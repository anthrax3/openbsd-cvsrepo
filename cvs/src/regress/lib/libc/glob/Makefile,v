head	1.4;
access;
symbols
	OPENBSD_6_0:1.4.0.22
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.12
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.20
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.18
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.16
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.14
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.10
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.4.0.8
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.4.0.6
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.4
	OPENBSD_5_0:1.4.0.2
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.3.0.2
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.2.0.8
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.4
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.6
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.2
	OPENBSD_4_5_BASE:1.2;
locks; strict;
comment	@# @;


1.4
date	2011.05.01.04.25.40;	author guenther;	state Exp;
branches;
next	1.3;

1.3
date	2010.09.24.13.32.55;	author djm;	state Exp;
branches;
next	1.2;

1.2
date	2009.02.18.15.17.55;	author millert;	state Exp;
branches;
next	1.1;

1.1
date	2008.10.01.23.04.36;	author millert;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Make the regress setup not assume the umask is 022
@
text
@#	$OpenBSD: Makefile,v 1.3 2010/09/24 13:32:55 djm Exp $

PROG=	globtest

run-regress-${PROG}:
	mkdir -m 755 -p `sed 's@@/[^/]*$$@@@@' ${.CURDIR}/files | sort -u`
	umask 022; touch `cat ${.CURDIR}/files`
	chmod 0755 `grep '/r[^/]*$$' ${.CURDIR}/files`
	chmod 0444 `grep '/s[^/]*$$' ${.CURDIR}/files`
	chmod 0711 `grep '/t[^/]*$$' ${.CURDIR}/files`
	./${PROG} ${.CURDIR}/${PROG}.in

clean:
	rm -rf fake ${PROG} ${OBJS} *.core

.include <bsd.regress.mk>
@


1.3
log
@add a GLOB_KEEPSTAT option that retains a copy of the struct stat
information that is looked up while matching glob(3)s

Keeping this information around can make a big difference when
fetching it is expensive, e.g. in sftp which uses GLOB_ALTDIRFUNC

feedback millert@@ jmc@@

"get it in before the libc crank" deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.2 2009/02/18 15:17:55 millert Exp $
d6 2
a7 2
	mkdir -p `sed 's@@/[^/]*$$@@@@' ${.CURDIR}/files | sort -u`
	touch `cat ${.CURDIR}/files`
@


1.2
log
@Add missing CURDIR
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.1 2008/10/01 23:04:36 millert Exp $
d8 3
@


1.1
log
@Regress driver for glob(3).  Needs more tests.
@
text
@d1 1
a1 1
#	$OpenBSD$
d7 1
a7 1
	touch `cat files`
@

