head	1.3;
access;
symbols
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.1.0.4
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.2
	OPENBSD_5_9_BASE:1.1;
locks; strict;
comment	@ * @;


1.3
date	2017.02.25.07.28.32;	author jsg;	state Exp;
branches;
next	1.2;
commitid	o45S2hSKbgrOD8tL;

1.2
date	2016.08.27.04.29.25;	author guenther;	state Exp;
branches;
next	1.1;
commitid	JbG3Jb9y1KkW1IjD;

1.1
date	2015.10.22.15.47.00;	author claudio;	state Exp;
branches;
next	;
commitid	xV5F37dTnKzK9PVh;


desc
@@


1.3
log
@Add missing includes to avoid implicit function declarations.
@
text
@/*	$OpenBSD: ifnitest.c,v 1.2 2016/08/27 04:29:25 guenther Exp $ */

/* Public domain. 2015, Claudio Jeker */

#include <sys/types.h>
#include <sys/socket.h>
#include <net/if.h>
#include <err.h>
#include <stdio.h>
#include <string.h>

int
main(int argc, char *argv[])
{
	char name[IF_NAMESIZE], *ifname;
	unsigned int lo0index;

	lo0index = if_nametoindex("lo0");
	if (lo0index == 0)
		err(1, "if_nametoindex(lo0)");
	ifname = if_indextoname(lo0index, name);
	if (ifname == NULL || strcmp("lo0", ifname) != 0)
		err(1, "if_indextoname(%u)", lo0index);

	/* test failures */
	if (if_nametoindex("4kingbula") != 0)
		err(1, "if_nametoindex(4kingbula)");
	if (if_indextoname(65536, name) != NULL)
		err(1, "if_indextoname(%u)", 65536);

	return 0;
}
@


1.2
log
@Pull in <stdio.h> for NULL

ok deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: ifnitest.c,v 1.1 2015/10/22 15:47:00 claudio Exp $ */
d10 1
@


1.1
log
@Add a regress test for if_indextoname() and if_nametoindex()
@
text
@d1 1
a1 1
/*	$OpenBSD$ */
d9 1
@

