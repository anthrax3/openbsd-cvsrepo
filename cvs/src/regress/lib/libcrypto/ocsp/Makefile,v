head	1.3;
access;
symbols
	OPENBSD_6_1:1.3.0.4
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.2.0.2
	OPENBSD_6_0_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2016.11.05.12.45.25;	author miod;	state Exp;
branches;
next	1.2;
commitid	XxD73Rtqh97iTY9p;

1.2
date	2016.07.05.00.16.23;	author beck;	state Exp;
branches;
next	1.1;
commitid	AVQwpbaK19m2JgTd;

1.1
date	2016.07.04.23.43.30;	author beck;	state Exp;
branches;
next	;
commitid	ULf8jWRfHJlnpG92;


desc
@@


1.3
log
@Set PROG so that the binary correctly gets recompiled when the libraries
it is linked against change.

ok beck@@ jsing@@
@
text
@#	$OpenBSD: Makefile,v 1.2 2016/07/05 00:16:23 beck Exp $

REGRESS_TARGETS= all_tests

PROG=		ocsp_test
LDADD=		-lcrypto -lssl
DPADD=		${LIBCRYPTO} ${LIBSSL}
WARNINGS=	Yes
LDFLAGS+=	-lcrypto -lssl
CFLAGS+=	-DLIBRESSL_INTERNAL -Wall -Wundef -Werror

all_tests: ${PROG}
	${.OBJDIR}/${PROG} www.amazon.com 443
	${.OBJDIR}/${PROG} cloudflare.com 443

.include <bsd.regress.mk>
@


1.2
log
@make less awful.. test against cloudflare too
@
text
@d1 1
a1 4
#	$OpenBSD: Makefile,v 1.1 2016/07/04 23:43:30 beck Exp $

TESTS = \
	ocsp_test
d5 1
d12 3
a14 7
CLEANFILES+= ${TESTS}

all_tests: ${TESTS}
	@@for test in $>; do \
		./$$test www.amazon.com 443; \
		./$$test cloudflare.com 443; \
	done
@


1.1
log
@Add a nasty little ocsp regress test in the hope pedants will make it better.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.2 2015/09/29 04:54:23 beck Exp $
d19 1
@

