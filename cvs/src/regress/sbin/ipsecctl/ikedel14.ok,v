head	1.5;
access;
symbols
	OPENBSD_6_2_BASE:1.5
	OPENBSD_6_1:1.5.0.38
	OPENBSD_6_1_BASE:1.5
	OPENBSD_6_0:1.5.0.34
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.24
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.5.0.32
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.5.0.30
	OPENBSD_5_7_BASE:1.5
	OPENBSD_5_6:1.5.0.28
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_5:1.5.0.26
	OPENBSD_5_5_BASE:1.5
	OPENBSD_5_4:1.5.0.22
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.5.0.20
	OPENBSD_5_3_BASE:1.5
	OPENBSD_5_2:1.5.0.18
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.16
	OPENBSD_5_0:1.5.0.14
	OPENBSD_5_0_BASE:1.5
	OPENBSD_4_9:1.5.0.12
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.5.0.10
	OPENBSD_4_8_BASE:1.5
	OPENBSD_4_7:1.5.0.6
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.5.0.8
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.5.0.4
	OPENBSD_4_5_BASE:1.5
	OPENBSD_4_4:1.5.0.2
	OPENBSD_4_4_BASE:1.5
	OPENBSD_4_3:1.4.0.6
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_2:1.4.0.4
	OPENBSD_4_2_BASE:1.4
	OPENBSD_4_1:1.4.0.2
	OPENBSD_4_1_BASE:1.4
	OPENBSD_4_0:1.1.0.2
	OPENBSD_4_0_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2008.07.01.15.00.54;	author bluhm;	state Exp;
branches;
next	1.4;

1.4
date	2006.11.30.16.18.21;	author markus;	state Exp;
branches;
next	1.3;

1.3
date	2006.11.21.14.11.16;	author markus;	state Exp;
branches;
next	1.2;

1.2
date	2006.11.01.03.24.21;	author mcbride;	state Exp;
branches;
next	1.1;

1.1
date	2006.06.15.17.03.21;	author hshoexer;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Isakmpd acquire mode did not work with a config generated from
ipsec.conf.  The config created by isakmpd dynamically was different
from the config that ipsecctl generated out of ipsec.conf.

Both config formats are changed so that they match.  One needs a
passive ike line and a require flow line with the same parameters
in the ipsec.conf.  Then the acquire message generated by the kernel
will trigger isakmpd to generate a config that matches the one that
ipsecctl generated from the ike line.

ok hshoexer, 'sounds good' todd
@
text
@FROM = "{ 2.2.2.0/24, 3.3.3.0/24, 4.4.4.0/24 }"
TO = "{ 5.5.5.0/24, 6.6.6.0/24, 7.7.7.0/24 }"
t from-2.2.2.0/24-to-5.5.5.0/24
C rmv [Phase 2]:Connections=from-2.2.2.0/24-to-5.5.5.0/24
C rms [from-2.2.2.0/24-to-5.5.5.0/24]
C rms [phase2-from-2.2.2.0/24-to-5.5.5.0/24]
t from-2.2.2.0/24-to-6.6.6.0/24
C rmv [Phase 2]:Connections=from-2.2.2.0/24-to-6.6.6.0/24
C rms [from-2.2.2.0/24-to-6.6.6.0/24]
C rms [phase2-from-2.2.2.0/24-to-6.6.6.0/24]
t from-2.2.2.0/24-to-7.7.7.0/24
C rmv [Phase 2]:Connections=from-2.2.2.0/24-to-7.7.7.0/24
C rms [from-2.2.2.0/24-to-7.7.7.0/24]
C rms [phase2-from-2.2.2.0/24-to-7.7.7.0/24]
t from-3.3.3.0/24-to-5.5.5.0/24
C rmv [Phase 2]:Connections=from-3.3.3.0/24-to-5.5.5.0/24
C rms [from-3.3.3.0/24-to-5.5.5.0/24]
C rms [phase2-from-3.3.3.0/24-to-5.5.5.0/24]
t from-3.3.3.0/24-to-6.6.6.0/24
C rmv [Phase 2]:Connections=from-3.3.3.0/24-to-6.6.6.0/24
C rms [from-3.3.3.0/24-to-6.6.6.0/24]
C rms [phase2-from-3.3.3.0/24-to-6.6.6.0/24]
t from-3.3.3.0/24-to-7.7.7.0/24
C rmv [Phase 2]:Connections=from-3.3.3.0/24-to-7.7.7.0/24
C rms [from-3.3.3.0/24-to-7.7.7.0/24]
C rms [phase2-from-3.3.3.0/24-to-7.7.7.0/24]
t from-4.4.4.0/24-to-5.5.5.0/24
C rmv [Phase 2]:Connections=from-4.4.4.0/24-to-5.5.5.0/24
C rms [from-4.4.4.0/24-to-5.5.5.0/24]
C rms [phase2-from-4.4.4.0/24-to-5.5.5.0/24]
t from-4.4.4.0/24-to-6.6.6.0/24
C rmv [Phase 2]:Connections=from-4.4.4.0/24-to-6.6.6.0/24
C rms [from-4.4.4.0/24-to-6.6.6.0/24]
C rms [phase2-from-4.4.4.0/24-to-6.6.6.0/24]
t from-4.4.4.0/24-to-7.7.7.0/24
C rmv [Phase 2]:Connections=from-4.4.4.0/24-to-7.7.7.0/24
C rms [from-4.4.4.0/24-to-7.7.7.0/24]
C rms [phase2-from-4.4.4.0/24-to-7.7.7.0/24]
@


1.4
log
@sync: rmv to unregister ipsec connections
@
text
@d3 36
a38 36
t IPsec-2.2.2.0/24-5.5.5.0/24
C rmv [Phase 2]:Connections=IPsec-2.2.2.0/24-5.5.5.0/24
C rms [IPsec-2.2.2.0/24-5.5.5.0/24]
C rms [qm-2.2.2.0/24-5.5.5.0/24]
t IPsec-2.2.2.0/24-6.6.6.0/24
C rmv [Phase 2]:Connections=IPsec-2.2.2.0/24-6.6.6.0/24
C rms [IPsec-2.2.2.0/24-6.6.6.0/24]
C rms [qm-2.2.2.0/24-6.6.6.0/24]
t IPsec-2.2.2.0/24-7.7.7.0/24
C rmv [Phase 2]:Connections=IPsec-2.2.2.0/24-7.7.7.0/24
C rms [IPsec-2.2.2.0/24-7.7.7.0/24]
C rms [qm-2.2.2.0/24-7.7.7.0/24]
t IPsec-3.3.3.0/24-5.5.5.0/24
C rmv [Phase 2]:Connections=IPsec-3.3.3.0/24-5.5.5.0/24
C rms [IPsec-3.3.3.0/24-5.5.5.0/24]
C rms [qm-3.3.3.0/24-5.5.5.0/24]
t IPsec-3.3.3.0/24-6.6.6.0/24
C rmv [Phase 2]:Connections=IPsec-3.3.3.0/24-6.6.6.0/24
C rms [IPsec-3.3.3.0/24-6.6.6.0/24]
C rms [qm-3.3.3.0/24-6.6.6.0/24]
t IPsec-3.3.3.0/24-7.7.7.0/24
C rmv [Phase 2]:Connections=IPsec-3.3.3.0/24-7.7.7.0/24
C rms [IPsec-3.3.3.0/24-7.7.7.0/24]
C rms [qm-3.3.3.0/24-7.7.7.0/24]
t IPsec-4.4.4.0/24-5.5.5.0/24
C rmv [Phase 2]:Connections=IPsec-4.4.4.0/24-5.5.5.0/24
C rms [IPsec-4.4.4.0/24-5.5.5.0/24]
C rms [qm-4.4.4.0/24-5.5.5.0/24]
t IPsec-4.4.4.0/24-6.6.6.0/24
C rmv [Phase 2]:Connections=IPsec-4.4.4.0/24-6.6.6.0/24
C rms [IPsec-4.4.4.0/24-6.6.6.0/24]
C rms [qm-4.4.4.0/24-6.6.6.0/24]
t IPsec-4.4.4.0/24-7.7.7.0/24
C rmv [Phase 2]:Connections=IPsec-4.4.4.0/24-7.7.7.0/24
C rms [IPsec-4.4.4.0/24-7.7.7.0/24]
C rms [qm-4.4.4.0/24-7.7.7.0/24]
@


1.3
log
@sync
@
text
@d4 1
d8 1
d12 1
d16 1
d20 1
d24 1
d28 1
d32 1
d36 1
@


1.2
log
@Adjust existing ikedel tests for aggressive mode support (we now
delete both mainmode and aggressive mode phase 1 transforms)
@
text
@a3 3
C rms [peer-1.1.1.1]
C rms [mm-1.1.1.1]
C rms [am-1.1.1.1]
a5 2
C rms [lid-2.2.2.0/24]
C rms [rid-5.5.5.0/24]
a6 3
C rms [peer-1.1.1.1]
C rms [mm-1.1.1.1]
C rms [am-1.1.1.1]
a8 2
C rms [lid-2.2.2.0/24]
C rms [rid-6.6.6.0/24]
a9 3
C rms [peer-1.1.1.1]
C rms [mm-1.1.1.1]
C rms [am-1.1.1.1]
a11 2
C rms [lid-2.2.2.0/24]
C rms [rid-7.7.7.0/24]
a12 3
C rms [peer-1.1.1.1]
C rms [mm-1.1.1.1]
C rms [am-1.1.1.1]
a14 2
C rms [lid-3.3.3.0/24]
C rms [rid-5.5.5.0/24]
a15 3
C rms [peer-1.1.1.1]
C rms [mm-1.1.1.1]
C rms [am-1.1.1.1]
a17 2
C rms [lid-3.3.3.0/24]
C rms [rid-6.6.6.0/24]
a18 3
C rms [peer-1.1.1.1]
C rms [mm-1.1.1.1]
C rms [am-1.1.1.1]
a20 2
C rms [lid-3.3.3.0/24]
C rms [rid-7.7.7.0/24]
a21 3
C rms [peer-1.1.1.1]
C rms [mm-1.1.1.1]
C rms [am-1.1.1.1]
a23 2
C rms [lid-4.4.4.0/24]
C rms [rid-5.5.5.0/24]
a24 3
C rms [peer-1.1.1.1]
C rms [mm-1.1.1.1]
C rms [am-1.1.1.1]
a26 2
C rms [lid-4.4.4.0/24]
C rms [rid-6.6.6.0/24]
a27 3
C rms [peer-1.1.1.1]
C rms [mm-1.1.1.1]
C rms [am-1.1.1.1]
a29 2
C rms [lid-4.4.4.0/24]
C rms [rid-7.7.7.0/24]
@


1.1
log
@Add a bunch of test for deletion of ike rules, add a test for "to
any" rules without a peer specified.  These tests resulted in the
recent fix in ipsecctl/ike.c.
@
text
@d6 1
d14 1
d22 1
d30 1
d38 1
d46 1
d54 1
d62 1
d70 1
@

