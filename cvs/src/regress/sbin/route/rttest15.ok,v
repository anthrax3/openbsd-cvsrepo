head	1.6;
access;
symbols
	OPENBSD_6_2_BASE:1.6
	OPENBSD_6_1:1.6.0.4
	OPENBSD_6_1_BASE:1.6
	OPENBSD_6_0:1.4.0.2
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.3.0.2
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.1.0.6
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.4
	OPENBSD_5_7_BASE:1.1;
locks; strict;
comment	@# @;


1.6
date	2016.09.01.11.36.15;	author bluhm;	state Exp;
branches;
next	1.5;
commitid	rHFpjLaRGad0GCRL;

1.5
date	2016.08.22.16.55.14;	author mpi;	state Exp;
branches;
next	1.4;
commitid	dkTZ6kk6d0ogYX88;

1.4
date	2016.07.19.10.47.39;	author mpi;	state Exp;
branches;
next	1.3;
commitid	0sWOCExGb92OBGf2;

1.3
date	2015.11.09.10.49.36;	author mpi;	state Exp;
branches;
next	1.2;
commitid	X0vWRjkoOCde8R5q;

1.2
date	2015.09.23.09.00.04;	author mpi;	state Exp;
branches;
next	1.1;
commitid	rdqUHuR3XgPi3cjy;

1.1
date	2014.11.26.11.55.08;	author mpi;	state Exp;
branches;
next	;
commitid	xB0RjjmJRYn2KAJc;


desc
@@


1.6
log
@Now the cached route flag appears in "route show".  Adapt test.
OK mpi@@
@
text
@Routing tables

Internet:
Destination        Gateway            Flags   Refs      Use   Mtu  Prio Iface
10.0/16            192.0.2.4          UGS        0        0 32768     8 lo10002
192.0.2.1          192.0.2.1          UHl        0        0 32768     1 lo10001
192.0.2.2          192.0.2.2          UHl        0        0 32768     1 lo10002
192.0.2.3          192.0.2.3          UHl        0        0 32768     1 lo10003
192.0.2.4          192.0.2.4          UHhl       1        2 32768     1 lo10004
@


1.5
log
@Sync counters now that ifa_ifwithroute() no longer uses ifa_ifwithnet().
@
text
@d9 1
a9 1
192.0.2.4          192.0.2.4          UHl        1        2 32768     1 lo10004
@


1.4
log
@Update counters & unbreak now that rtrequest(RTM_ADD, ...) caches the
gateway.
@
text
@d9 1
a9 1
192.0.2.4          192.0.2.4          UHl        1        1 32768     1 lo10004
@


1.3
log
@Match recent rtalloc(9) rewrite.

Gateway routes are now cached the first time they are used and no longer
when they are added.  This allows to track down which multipath route is
being selected as next-hop.
@
text
@d9 1
a9 1
192.0.2.4          192.0.2.4          UHl        0        0 32768     1 lo10004
@


1.2
log
@Sync with recent rt_use change.
@
text
@d9 1
a9 1
192.0.2.4          192.0.2.4          UHl        1        1 32768     1 lo10004
@


1.1
log
@Add 3 regression tests for "route change" dealing with -ifp, -ifa and
-mtu.  Triggered by a report from Florian Riehm on tech@@.

Note that two of these tests are using IPv6 addresses and expose another
bug with ::1.  I'll deal with this afterward unless someone else(tm)
fixes it.
@
text
@d9 1
a9 1
192.0.2.4          192.0.2.4          UHl        1        0 32768     1 lo10004
@

