head	1.10;
access;
symbols
	OPENBSD_5_5:1.9.0.4
	OPENBSD_5_5_BASE:1.9
	OPENBSD_5_4:1.8.0.28
	OPENBSD_5_4_BASE:1.8
	OPENBSD_5_3:1.8.0.26
	OPENBSD_5_3_BASE:1.8
	OPENBSD_5_2:1.8.0.24
	OPENBSD_5_2_BASE:1.8
	OPENBSD_5_1_BASE:1.8
	OPENBSD_5_1:1.8.0.22
	OPENBSD_5_0:1.8.0.20
	OPENBSD_5_0_BASE:1.8
	OPENBSD_4_9:1.8.0.18
	OPENBSD_4_9_BASE:1.8
	OPENBSD_4_8:1.8.0.16
	OPENBSD_4_8_BASE:1.8
	OPENBSD_4_7:1.8.0.12
	OPENBSD_4_7_BASE:1.8
	OPENBSD_4_6:1.8.0.14
	OPENBSD_4_6_BASE:1.8
	OPENBSD_4_5:1.8.0.10
	OPENBSD_4_5_BASE:1.8
	OPENBSD_4_4:1.8.0.8
	OPENBSD_4_4_BASE:1.8
	OPENBSD_4_3:1.8.0.6
	OPENBSD_4_3_BASE:1.8
	OPENBSD_4_2:1.8.0.4
	OPENBSD_4_2_BASE:1.8
	OPENBSD_4_1:1.8.0.2
	OPENBSD_4_1_BASE:1.8
	OPENBSD_4_0:1.7.0.16
	OPENBSD_4_0_BASE:1.7
	OPENBSD_3_9:1.7.0.14
	OPENBSD_3_9_BASE:1.7
	OPENBSD_3_8:1.7.0.12
	OPENBSD_3_8_BASE:1.7
	OPENBSD_3_7:1.7.0.10
	OPENBSD_3_7_BASE:1.7
	OPENBSD_3_6:1.7.0.8
	OPENBSD_3_6_BASE:1.7
	OPENBSD_3_5:1.7.0.6
	OPENBSD_3_5_BASE:1.7
	OPENBSD_3_4:1.7.0.4
	OPENBSD_3_4_BASE:1.7
	OPENBSD_3_3:1.7.0.2
	OPENBSD_3_3_BASE:1.7;
locks; strict;
comment	@# @;


1.10
date	2014.04.18.10.48.23;	author henning;	state dead;
branches;
next	1.9;

1.9
date	2013.10.12.12.18.44;	author henning;	state Exp;
branches;
next	1.8;

1.8
date	2006.10.06.17.09.41;	author mcbride;	state Exp;
branches;
next	1.7;

1.7
date	2003.03.02.12.38.15;	author henning;	state Exp;
branches;
next	1.6;

1.6
date	2002.12.24.13.45.51;	author mcbride;	state Exp;
branches;
next	1.5;

1.5
date	2002.12.16.22.21.19;	author henning;	state Exp;
branches;
next	1.4;

1.4
date	2002.12.08.00.20.17;	author henning;	state Exp;
branches;
next	1.3;

1.3
date	2002.12.07.20.53.05;	author henning;	state Exp;
branches;
next	1.2;

1.2
date	2002.11.25.16.26.23;	author henning;	state Exp;
branches;
next	1.1;

1.1
date	2002.11.24.20.46.54;	author henning;	state Exp;
branches;
next	;


desc
@@


1.10
log
@stop testing altq stuffz
how many tests I wrote back then... (of which the majority is pointless)
@
text
@ext_if = "lo0"

altq on $ext_if cbq bandwidth 10Mb tbrsize 1824 \
    queue { deflt, http, ssh, mail, rsets }
oldqueue	deflt bandwidth 10% priority 0 cbq(default ecn)
oldqueue	http bandwidth 1.5Mb priority 3 { http_vhosts, http_cust1 }
oldqueue	 http_vhosts bandwidth 40% cbq(borrow red)
oldqueue	 http_cust1 bandwidth 0.5Mb
oldqueue	mail bandwidth 10% priority 1
oldqueue	ssh bandwidth 200Kb priority 7 cbq(borrow)
oldqueue	rsets bandwidth 150000b priority 0 cbq(red)

block return in on $ext_if inet all queue rsets
pass in on $ext_if inet proto tcp from any to any port 80 keep state queue http
pass out on $ext_if inet proto tcp from any to any port 22 keep state queue ssh
pass in  on $ext_if inet proto tcp from any to any port 22 keep state queue ssh
pass out on $ext_if inet proto tcp from any to any port 25 keep state queue mail
pass out on $ext_if inet all
@


1.9
log
@adopt existing altq regress to queueing changes; queuespecs for altq use
"oldqueue" as keyword for the transition phase
@
text
@@


1.8
log
@Handle default 'flags S/SA keep state', 'no state' and 'flags any'.
@
text
@d5 7
a11 7
queue	deflt bandwidth 10% priority 0 cbq(default ecn)
queue	http bandwidth 1.5Mb priority 3 { http_vhosts, http_cust1 }
queue	 http_vhosts bandwidth 40% cbq(borrow red)
queue	 http_cust1 bandwidth 0.5Mb
queue	mail bandwidth 10% priority 1
queue	ssh bandwidth 200Kb priority 7 cbq(borrow)
queue	rsets bandwidth 150000b priority 0 cbq(red)
@


1.7
log
@cbq control keyword is gone
@
text
@d18 1
a18 1
pass out on $ext_if inet all keep state
@


1.6
log
@add cbq "control" keyword to regress test
@
text
@d4 1
a4 2
    queue { ctrl, deflt, http, ssh, mail, rsets }
queue	ctrl bandwidth 5% priority 0 cbq(control)
@


1.5
log
@loopback interface MTU differs on 64 bit archs.
interface MTU is part of the tbrsize calculation.
thus we need to specify the tbrsize in the input files to make the tests
work on 64 bit platforms.
@
text
@d4 2
a5 1
    queue { deflt, http, ssh, mail, rsets }
@


1.4
log
@adjust after syntax change
@
text
@d3 1
a3 1
altq on $ext_if cbq bandwidth 10Mb \
@


1.3
log
@now that we use the MTU from the interface instead of assuming 1500 the
tbrsize and the minimum useful bandwidth are different on lo0/lo1. cope with
that.
@
text
@d3 1
a3 1
altq on $ext_if scheduler cbq bandwidth 10Mb \
@


1.2
log
@kill trailing newlines; markus@@
@
text
@d10 2
a11 2
queue	ssh bandwidth 100Kb priority 7 cbq(borrow)
queue	rsets bandwidth 7500b priority 0 cbq(red)
@


1.1
log
@gack.
@
text
@a18 2


@

