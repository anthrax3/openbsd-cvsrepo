head	1.3;
access;
symbols
	OPENBSD_6_2_BASE:1.3;
locks; strict;
comment	@# @;


1.3
date	2017.07.05.15.31.45;	author bluhm;	state Exp;
branches;
next	1.2;
commitid	eYx6IbLq0jXNHWKX;

1.2
date	2017.07.04.18.02.21;	author bluhm;	state Exp;
branches;
next	1.1;
commitid	AYSwbi5GCOENFnyU;

1.1
date	2017.07.03.18.19.55;	author bluhm;	state Exp;
branches;
next	;
commitid	DBhhLSUFgUy3oGv6;


desc
@@


1.3
log
@Implement the generated dependency with a stamp file to avoid needless
recompiling of the test programs.  Add some RCS ids.
@
text
@#	$OpenBSD: Makefile.inc,v 1.2 2017/07/04 18:02:21 bluhm Exp $

TOPSRC=		${.CURDIR}/../../../../sbin/isakmpd
TOPOBJ!!=	${MAKE} -C ${TOPSRC} -V .OBJDIR
CFLAGS+=	-I${TOPSRC} -I${TOPSRC}/sysdep/openbsd -I${TOPOBJ} -Wall
DEBUG=		-g
CLEANFILES+=	stamp-generated

${PROG}: stamp-generated

stamp-generated:
	${MAKE} -C ${TOPSRC} generated
	date >$@@

.PATH:		${.CURDIR}/../common
.PATH:		${TOPSRC} ${TOPSRC}/sysdep/openbsd
@


1.2
log
@Do not add isakmpd obj directory to .PATH.  We must compile some
fake objects from regress ourselves.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.1 2017/07/03 18:19:55 bluhm Exp $
d7 1
d9 1
a9 1
.PHONY: generated
d11 1
a11 3
${PROG}: generated

generated:
d13 1
@


1.1
log
@Generate source and header files for regress on demand.
OK espie@@
@
text
@d1 1
a1 1
#	$OpenBSD$
d16 1
a16 1
.PATH:		${TOPSRC} ${TOPSRC}/sysdep/openbsd ${TOPOBJ}
@

