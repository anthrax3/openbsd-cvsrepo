head	1.1;
access;
symbols
	OPENBSD_6_1_BASE:1.1
	OPENBSD_6_0:1.1.0.10
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.2
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.8
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.6
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.4
	OPENBSD_5_6_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2014.07.12.00.34.03;	author reyk;	state Exp;
branches;
next	;
commitid	iLHFx6PdKhCHBf3P;


desc
@@


1.1
log
@Test filtering by method

ok bluhm@@ benno@@
@
text
@# test method filtering

use strict;
use warnings;

our %args = (
    client => {
	func => \&http_client,
	method => 'HEAD',
	loggrep => qr/HTTP\/1\.0 403 Forbidden/,
	httpnok => 1,
	nocheck => 1,
    },
    relayd => {
	protocol => [ "http",
	    'return error',
	    'block request method "HEAD" path log',
	],
	loggrep => qr/403 Forbidden/,
    },
    server => {
	noserver => 1,
	nocheck => 1,
    },
);

1;
@
