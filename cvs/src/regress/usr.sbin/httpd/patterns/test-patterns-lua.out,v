head	1.2;
access;
symbols
	OPENBSD_6_2:1.2.0.8
	OPENBSD_6_2_BASE:1.2
	OPENBSD_6_1:1.2.0.10
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.6
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.2
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.4
	OPENBSD_5_8_BASE:1.2;
locks; strict;
comment	@# @;


1.2
date	2015.06.23.19.33.06;	author reyk;	state Exp;
branches;
next	1.1;
commitid	ZEt5cYpsWBUn7Q8B;

1.1
date	2015.06.23.18.03.09;	author semarie;	state Exp;
branches;
next	;
commitid	VPJ3W6MI5l9qi22j;


desc
@@


1.2
log
@Fix the optional lua patterns test with obj and different versions.
@
text
@string='/page/51'
pattern='^/(%a+)/(%d+)$'
page	51
string='/Apage/51'
pattern='/[^%d][%w%u][^%c]+()[%d]+'
9
string='/^page/51'
pattern='/^(.a.e)/(.)'
page	5
string='/page/page-51'
pattern='/(.*)/%1-(%d+)'
page	51
string='/page/[51]'
pattern='/page/(%b[])'
[51]
string=':-]'
pattern=']+'
]
string=':-)'
pattern='[)]+'
)
string='/page/51'
pattern='$^'
nil
string='1234567890'
pattern='([2-5]-)'

string='****'
pattern='^**$'
****
string='xxxx'
pattern='^x*$'
xxxx
string='/page/51'
pattern='no-%d-match'
nil
string='/page/page-51'
pattern='/(.*)/%9-(%d+)'
X_PATTERNS_TESTER_X:3: invalid capture index %9
stack traceback:
	[C]: in function 'string.match'
X_PATTERNS_TESTER_X:3: in main chunk
	[C]: in ?
string=':-)'
pattern=')+'
X_PATTERNS_TESTER_X:3: invalid pattern capture
stack traceback:
	[C]: in function 'string.match'
X_PATTERNS_TESTER_X:3: in main chunk
	[C]: in ?
string='/page/51'
pattern='/page/51('
X_PATTERNS_TESTER_X:3: unfinished capture
stack traceback:
	[C]: in function 'string.match'
X_PATTERNS_TESTER_X:3: in main chunk
	[C]: in ?
string='/page/51'
pattern='/page/51%'
X_PATTERNS_TESTER_X:3: malformed pattern (ends with '%')
stack traceback:
	[C]: in function 'string.match'
X_PATTERNS_TESTER_X:3: in main chunk
	[C]: in ?
string='/page/51'
pattern='/page/[51'
X_PATTERNS_TESTER_X:3: malformed pattern (missing ']')
stack traceback:
	[C]: in function 'string.match'
X_PATTERNS_TESTER_X:3: in main chunk
	[C]: in ?
string='/page/(51)'
pattern='/page/%b('
X_PATTERNS_TESTER_X:3: malformed pattern (missing arguments to '%b')
stack traceback:
	[C]: in function 'string.match'
X_PATTERNS_TESTER_X:3: in main chunk
	[C]: in ?
string='/page/51'
pattern='()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()'
X_PATTERNS_TESTER_X:3: too many captures
stack traceback:
	[C]: in function 'string.match'
X_PATTERNS_TESTER_X:3: in main chunk
	[C]: in ?
string='/page/51'
pattern='/page/%f'
X_PATTERNS_TESTER_X:3: missing '[' after '%f' in pattern
stack traceback:
	[C]: in function 'string.match'
X_PATTERNS_TESTER_X:3: in main chunk
	[C]: in ?
string='/page/51'
pattern='/page%f/51'
X_PATTERNS_TESTER_X:3: missing '[' after '%f' in pattern
stack traceback:
	[C]: in function 'string.match'
X_PATTERNS_TESTER_X:3: in main chunk
	[C]: in ?
string='q*********************************'
pattern='*************************************q'
X_PATTERNS_TESTER_X:3: max repetition items
stack traceback:
	[C]: in function 'string.match'
X_PATTERNS_TESTER_X:3: in main chunk
	[C]: in ?
string='q+++++++++++++++++++++++++++++++++'
pattern='+++++++++++++++++++++++++++++++++++++q'
X_PATTERNS_TESTER_X:3: max repetition items
stack traceback:
	[C]: in function 'string.match'
X_PATTERNS_TESTER_X:3: in main chunk
	[C]: in ?
string='q---------------------------------'
pattern='-------------------------------------q'
X_PATTERNS_TESTER_X:3: max repetition items
stack traceback:
	[C]: in function 'string.match'
X_PATTERNS_TESTER_X:3: in main chunk
	[C]: in ?
string='q?????????????????????????????????'
pattern='?????????????????????????????????????q'
X_PATTERNS_TESTER_X:3: max repetition items
stack traceback:
	[C]: in function 'string.match'
X_PATTERNS_TESTER_X:3: in main chunk
	[C]: in ?
@


1.1
log
@add regress tests for httpd

- this testsuite covers patterns
@
text
@a0 1
# $OpenBSD$
d39 1
a39 1
lua53: ./patterns-tester.lua:2: invalid capture index %9
d42 1
a42 1
	./patterns-tester.lua:2: in main chunk
d46 1
a46 1
lua53: ./patterns-tester.lua:2: invalid pattern capture
d49 1
a49 1
	./patterns-tester.lua:2: in main chunk
d53 1
a53 1
lua53: ./patterns-tester.lua:2: unfinished capture
d56 1
a56 1
	./patterns-tester.lua:2: in main chunk
d60 1
a60 1
lua53: ./patterns-tester.lua:2: malformed pattern (ends with '%')
d63 1
a63 1
	./patterns-tester.lua:2: in main chunk
d67 1
a67 1
lua53: ./patterns-tester.lua:2: malformed pattern (missing ']')
d70 1
a70 1
	./patterns-tester.lua:2: in main chunk
d74 1
a74 1
lua53: ./patterns-tester.lua:2: malformed pattern (missing arguments to '%b')
d77 1
a77 1
	./patterns-tester.lua:2: in main chunk
d81 1
a81 1
lua53: ./patterns-tester.lua:2: too many captures
d84 1
a84 1
	./patterns-tester.lua:2: in main chunk
d88 1
a88 1
lua53: ./patterns-tester.lua:2: missing '[' after '%f' in pattern
d91 1
a91 1
	./patterns-tester.lua:2: in main chunk
d95 1
a95 1
lua53: ./patterns-tester.lua:2: missing '[' after '%f' in pattern
d98 1
a98 1
	./patterns-tester.lua:2: in main chunk
d102 1
a102 1
lua53: ./patterns-tester.lua:2: max repetition items
d105 1
a105 1
	./patterns-tester.lua:2: in main chunk
d109 1
a109 1
lua53: ./patterns-tester.lua:2: max repetition items
d112 1
a112 1
	./patterns-tester.lua:2: in main chunk
d116 1
a116 1
lua53: ./patterns-tester.lua:2: max repetition items
d119 1
a119 1
	./patterns-tester.lua:2: in main chunk
d123 1
a123 1
lua53: ./patterns-tester.lua:2: max repetition items
d126 1
a126 1
	./patterns-tester.lua:2: in main chunk
@

