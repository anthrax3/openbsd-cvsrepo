head	1.5;
access;
symbols
	OPENBSD_4_9:1.3.0.6
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.4
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.2
	OPENBSD_4_7_BASE:1.3;
locks; strict;
comment	@# @;


1.5
date	2011.07.13.11.57.10;	author espie;	state dead;
branches;
next	1.4;

1.4
date	2011.07.12.23.17.21;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2010.01.14.19.38.37;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2009.12.31.12.58.22;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2009.11.14.10.59.11;	author espie;	state Exp;
branches;
next	;


desc
@@


1.5
log
@tweak script to handle add/delete/info
finish the manual1 test
@
text
@#! /usr/bin/perl

# ex:ts=8 sw=4:
# $OpenBSD: myadd,v 1.4 2011/07/12 23:17:21 espie Exp $
#
# Copyright (c) 2009 Marc Espie <espie@@openbsd.org>
#
# Permission to use, copy, modify, and distribute this software for any
# purpose with or without fee is hereby granted, provided that the above
# copyright notice and this permission notice appear in all copies.
#
# THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
# WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
# MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
# ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
# WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
# ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
# OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
use strict;
use warnings;
use File::Path;

my $root = $ENV{'ROOT'};

File::Path::make_path("$root/pkgdb");

$ENV{'PKG_DBDIR'} = "$root/pkgdb";

my @@args = ('-D', 'nonroot', '-B', $root, @@ARGV);
my $prog;
if ($ENV{'DEBUG'}) {
	unshift(@@args, 'perl', '-d', '/usr/sbin/pkg_add', '-D', 'debug');
	$prog = 'perl';
} else {
	unshift(@@args, 'pkg_add');
	$prog = 'pkg_add';
}
print join(' ', "pkg_add", @@ARGV), "\n" unless $ENV{'SILENT'} || $ENV{'VERBOSE'};
print join(' ', @@args), "\n" if $ENV{'VERBOSE'};

exec {$prog} @@args;
@


1.4
log
@start adding regress for manual installs, not fully working yet...
@
text
@d4 1
a4 1
# $OpenBSD: myadd,v 1.3 2010/01/14 19:38:37 espie Exp $
@


1.3
log
@new test for vstat
@
text
@d4 1
a4 1
# $OpenBSD: myadd,v 1.2 2009/12/31 12:58:22 espie Exp $
d29 1
a29 1
my @@args = ('-F', 'nonroot', '-B', $root, @@ARGV);
@


1.2
log
@remove all noise, have myadd display a simplified version of what it's doing
@
text
@d4 1
a4 1
# $OpenBSD: myadd,v 1.1 2009/11/14 10:59:11 espie Exp $
d32 1
a32 1
	unshift(@@args, 'perl', '-d', '/usr/sbin/pkg_add', '-F', 'debug');
@


1.1
log
@forgot
@
text
@d4 1
a4 1
# $OpenBSD$
d38 1
@

