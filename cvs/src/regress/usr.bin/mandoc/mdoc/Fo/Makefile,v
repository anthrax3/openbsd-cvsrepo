head	1.16;
access;
symbols
	OPENBSD_6_1:1.15.0.4
	OPENBSD_6_1_BASE:1.15
	OPENBSD_6_0:1.13.0.8
	OPENBSD_6_0_BASE:1.13
	OPENBSD_5_9:1.13.0.2
	OPENBSD_5_9_BASE:1.13
	OPENBSD_5_8:1.13.0.6
	OPENBSD_5_8_BASE:1.13
	OPENBSD_5_7:1.13.0.4
	OPENBSD_5_7_BASE:1.13
	OPENBSD_5_6:1.9.0.4
	OPENBSD_5_6_BASE:1.9
	OPENBSD_5_5:1.7.0.4
	OPENBSD_5_5_BASE:1.7
	OPENBSD_5_4:1.6.0.4
	OPENBSD_5_4_BASE:1.6
	OPENBSD_5_3:1.6.0.2
	OPENBSD_5_3_BASE:1.6
	OPENBSD_5_2:1.5.0.2
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.2
	OPENBSD_5_0:1.2.0.4
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.2
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.1.0.2
	OPENBSD_4_8_BASE:1.1;
locks; strict;
comment	@# @;


1.16
date	2017.06.10.01.48.31;	author schwarze;	state Exp;
branches;
next	1.15;
commitid	GnqehULkzSOZe9a6;

1.15
date	2017.03.08.22.53.35;	author schwarze;	state Exp;
branches;
next	1.14;
commitid	S0sHiOvvLc7ECRCI;

1.14
date	2017.03.05.19.59.26;	author schwarze;	state Exp;
branches;
next	1.13;
commitid	oe0SPH5Gl3TsCzFo;

1.13
date	2015.02.16.11.39.34;	author schwarze;	state Exp;
branches;
next	1.12;
commitid	Pj7PSYktKSIptu5t;

1.12
date	2015.02.06.03.31.11;	author schwarze;	state Exp;
branches;
next	1.11;
commitid	EGoCKP2gntS3HBlE;

1.11
date	2014.11.20.00.30.34;	author schwarze;	state Exp;
branches;
next	1.10;
commitid	MCznpt0ynpsp3gtZ;

1.10
date	2014.10.11.21.14.11;	author schwarze;	state Exp;
branches;
next	1.9;
commitid	ArFLy7r4v7g9NTzH;

1.9
date	2014.07.02.20.18.42;	author schwarze;	state Exp;
branches;
next	1.8;
commitid	9LBCQenwbyZCIKCe;

1.8
date	2014.07.02.03.47.07;	author schwarze;	state Exp;
branches;
next	1.7;
commitid	p4pNII1v0bYCswy0;

1.7
date	2013.12.25.00.39.14;	author schwarze;	state Exp;
branches;
next	1.6;

1.6
date	2012.11.18.00.05.28;	author schwarze;	state Exp;
branches;
next	1.5;

1.5
date	2012.07.09.17.52.09;	author schwarze;	state Exp;
branches;
next	1.4;

1.4
date	2012.07.08.18.38.07;	author schwarze;	state Exp;
branches;
next	1.3;

1.3
date	2011.11.17.16.28.45;	author schwarze;	state Exp;
branches;
next	1.2;

1.2
date	2011.02.05.18.19.11;	author schwarze;	state Exp;
branches;
next	1.1;

1.1
date	2010.07.01.05.29.57;	author schwarze;	state Exp;
branches;
next	;


desc
@@


1.16
log
@style message about missing blank before trailing delimiter;
inspired by mdoclint(1), and jmc@@ considers it useful
@
text
@# $OpenBSD: Makefile,v 1.15 2017/03/08 22:53:35 schwarze Exp $

REGRESS_TARGETS	 = basic break eos font noarg nohead
REGRESS_TARGETS += obsolete punct section warn
LINT_TARGETS	 = noarg nohead obsolete punct warn

# groff-1.22.3 defects:
# - .Fo without an argument prints unbalanced parentheses
# - .nr nS is ignored

SKIP_GROFF	 = nohead section

SKIP_TMAN = eos

.include <bsd.regress.mk>
@


1.15
log
@Now that markdown output is tested for almost everything, test all
input files in -T markdown output mode by default and only mark
those files with SKIP_MARKDOWN that are not to be tested.
Much easier to read, and almost minus 40 lines of Makefile code.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2017/03/05 19:59:26 schwarze Exp $
d5 1
a5 1
LINT_TARGETS	 = noarg nohead obsolete warn
@


1.14
log
@first batch of -T markdown tests
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2015/02/16 11:39:34 schwarze Exp $
a5 2
MARKDOWN_TARGETS  = basic break eos font noarg nohead
MARKDOWN_TARGETS += obsolete punct section warn
@


1.13
log
@The wrong test was marked SKIP_GROFF.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2015/02/06 03:31:11 schwarze Exp $
d6 2
@


1.12
log
@better handle .Fo and .Fd without argument
better handle .Fo with more than one argument
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2014/11/20 00:30:34 schwarze Exp $
d11 1
a11 1
SKIP_GROFF	 = noarg section
@


1.11
log
@Fix two minibugs reported by Thomas Klausner <wiz at NetBSD>:
1. The first argument of .Fn is not supposed to be parsed.
2. The .Fn macro is not supposed to reopen its scope after punctuation.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2014/10/11 21:14:11 schwarze Exp $
d3 3
a5 2
REGRESS_TARGETS = basic break eos font noarg obsolete punct section warn
LINT_TARGETS	= noarg obsolete warn
d7 3
a9 1
# groff does not handle .nr nS
d11 1
a11 1
SKIP_GROFF ?= section
@


1.10
log
@warn about parentheses in function names after .Fn and .Fo;
particularly useful when converting from other languages to mdoc(7);
feature suggested by bentley@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2014/07/02 20:18:42 schwarze Exp $
d3 1
a3 1
REGRESS_TARGETS = basic break eos font noarg obsolete section warn
@


1.9
log
@Improve and test the messages about empty macros,
in particular reporting the macro names involved.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2014/07/02 03:47:07 schwarze Exp $
d3 2
a4 2
REGRESS_TARGETS = basic section break noarg font eos obsolete
LINT_TARGETS	= noarg obsolete
@


1.8
log
@Implement the obsolete macros .En .Es .Fr .Ot for backward compatibility,
since this is hardly more complicated than explicitly ignoring them
as we did in the past.  Of course, do not use them!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2013/12/25 00:39:14 schwarze Exp $
d4 1
a4 2

LINT_TARGETS = obsolete
@


1.7
log
@Do not break output lines in .Fn function arguments in SYNOPSIS mode.
Following an idea from Franco Fichtner, but implemented more cleanly.
This reduces groff-mandoc-differences in base by a fantastic 7.5%.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2012/11/18 00:05:28 schwarze Exp $
d3 3
a5 1
REGRESS_TARGETS = basic section break noarg font eos
@


1.6
log
@Fix four small whitespace issues related to trailing punctuation
reported by Nicolas Joly <njoly at pasteur dot fr>:

- add EOS spacing after trailing punctuation after .Cd, .Fc, and .Lb
- suppress spacing before trailing punctuation after .Fd
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2012/07/09 17:52:09 schwarze Exp $
d3 1
a3 1
REGRESS_TARGETS = basic section noarg font eos
d5 1
a5 1
# groff 1.21 does not handle .nr nS
@


1.5
log
@fix -Tman font handling for:
.Ad .Ar .Cd .Cm .Dv .Em .Er .Ev .Fa .Fl .Fn .Fo .Ft
.Ic .In .Lk .Li .Ms .Mt .Nm .Pa .Sx .Sy .Tn .Va .Vt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2012/07/08 18:38:07 schwarze Exp $
d3 1
a3 1
REGRESS_TARGETS = basic section noarg font
d8 2
@


1.4
log
@fix vertical spacing for -Tman SYNOPSIS .Fn .Fo .Ft .In .Nm .Va .Vt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2011/11/17 16:28:45 schwarze Exp $
d3 1
a3 1
REGRESS_TARGETS = basic section noarg
@


1.3
log
@Complete overhaul of the mandoc(1) test suite.
* Test the recently introduced -Tman output mode, too.
* Specify date and OS arguments in all tests.
* Remove the kludge of sed(1)ing away the page footer lines.
* New make(1) variables SKIP_TMAN, SKIP_GROFF.
* Drop obsolete, clumsy make(1) variable GROFF_TARGETS.
* Delete obsolete mdoc/Bl/E*.sh error reporting tests.
* Silence char/N/basic.
* New targets:
- ascii, ascii-clean - to run -Tascii tests only
- tman, tman-clean - to run the new -Tman tests only
- obj-clean - maintainer only, needed before groff-clean and groff
- groff-clean - maintainer only, affects checked-in files
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2011/02/05 18:19:11 schwarze Exp $
d3 1
a3 1
REGRESS_TARGETS=section noarg
a7 2

SKIP_TMAN ?= ALL
@


1.2
log
@some more tests found in my tree
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1 2010/07/01 05:29:57 schwarze Exp $
d4 6
a9 1
GROFF_TARGETS=section noarg
@


1.1
log
@major update of the mandoc test suite:
* add various new and extend a few existing tests
* stop using Mdocdate to ease syncing with NetBSD
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/01/01 20:08:17 schwarze Exp $
d3 2
a4 2
REGRESS_TARGETS=section
GROFF_TARGETS=section
@

