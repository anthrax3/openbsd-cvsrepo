head	1.2;
access;
symbols
	OPENBSD_6_1:1.2.0.12
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.8
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.2
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.6
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.4
	OPENBSD_5_7_BASE:1.2;
locks; strict;
comment	@# @;


1.2
date	2015.02.03.18.19.27;	author schwarze;	state Exp;
branches;
next	1.1;
commitid	b0gYEbo46Z2hVtHV;

1.1
date	2014.12.20.02.26.42;	author schwarze;	state Exp;
branches;
next	;
commitid	uca6hEcrcxivtoqC;


desc
@@


1.2
log
@Avoid closing out an explicit block twice when broken by .It
(assertion failure); regression found in jsg@@'s afl test case 847.
@
text
@BL-BREAKINGIT(1)            General Commands Manual           BL-BREAKINGIT(1)

NNAAMMEE
     BBll--bbrreeaakkiinnggIItt - items breaking other blocks

DDEESSCCRRIIPPTTIIOONN
   BBrreeaakkiinngg ppaarrttiiaall eexxpplliicciitt mmaaccrrooss
     Stray text.  <More stray text.>

     tag     Tagged text.
     Stray text.  <More stray text.>

     ++oo   Bullet point.

     tag     Tagged text.  <More tagged text.>

     tag2    Yet more tagged text.

     ++oo   Item text.  <More item text.>

     ++oo   Bullet point.

   BBrreeaakkiinngg ffuullll eexxpplliicciitt mmaaccrrooss
     Stray text.

           More stray text.

     tag     Tagged text.
     Stray text.

           More stray text.

     ++oo   Bullet point.

     tag     Tagged text.

                   Display text.

     tag2    More tagged text.

     ++oo   Item text.

               Display text.

     ++oo   Bullet point.

OpenBSD                        February 3, 2015                        OpenBSD
@


1.1
log
@Fix two issues causing a class of assertion failures found by jsg@@ with afl.
1) rew_sub(): Make sure REWIND_MORE is acted upon even when followed by
REWIND_NONE.  This prevents .It from ending up inside other children of .Bl.
2) blk_exp_close(): Only allow extension of .Bl when it has at least
one .It.  Otherwise, a broken child block could be moved in front of
the .Bl, effectively resulting in a .Bl that ended before it began.
@
text
@d15 8
d35 13
a47 1
OpenBSD                        December 19, 2014                       OpenBSD
@

