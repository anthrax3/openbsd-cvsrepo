head	1.17;
access;
symbols
	OPENBSD_6_2:1.17.0.4
	OPENBSD_6_2_BASE:1.17
	OPENBSD_6_1:1.16.0.4
	OPENBSD_6_1_BASE:1.16
	OPENBSD_6_0:1.15.0.4
	OPENBSD_6_0_BASE:1.15
	OPENBSD_5_9:1.15.0.2
	OPENBSD_5_9_BASE:1.15
	OPENBSD_5_8:1.14.0.6
	OPENBSD_5_8_BASE:1.14
	OPENBSD_5_7:1.14.0.4
	OPENBSD_5_7_BASE:1.14
	OPENBSD_5_6:1.10.0.4
	OPENBSD_5_6_BASE:1.10
	OPENBSD_5_5:1.9.0.4
	OPENBSD_5_5_BASE:1.9
	OPENBSD_5_4:1.8.0.2
	OPENBSD_5_4_BASE:1.8
	OPENBSD_5_3:1.7.0.2
	OPENBSD_5_3_BASE:1.7
	OPENBSD_5_2:1.5.0.2
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.2
	OPENBSD_5_0:1.2.0.4
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.2
	OPENBSD_4_9_BASE:1.2;
locks; strict;
comment	@# @;


1.17
date	2017.07.04.14.53.24;	author schwarze;	state Exp;
branches;
next	1.16;
commitid	b0KXfVBm69j6HJWE;

1.16
date	2016.10.17.19.00.16;	author schwarze;	state Exp;
branches;
next	1.15;
commitid	3tr3UYKGzacVNoa9;

1.15
date	2015.09.21.13.24.32;	author schwarze;	state Exp;
branches;
next	1.14;
commitid	hh1XsHF4k03QJZSt;

1.14
date	2014.12.24.23.31.59;	author schwarze;	state Exp;
branches;
next	1.13;
commitid	TfSx49MGGpeWF6md;

1.13
date	2014.11.16.21.29.27;	author schwarze;	state Exp;
branches;
next	1.12;
commitid	pN9PFZfnMTqAcBP6;

1.12
date	2014.11.10.20.59.41;	author schwarze;	state Exp;
branches;
next	1.11;
commitid	dYTNtpHdR6HoVvDX;

1.11
date	2014.08.26.11.32.54;	author schwarze;	state Exp;
branches;
next	1.10;
commitid	QJnN8iCFzEXgbRZx;

1.10
date	2014.04.08.04.45.50;	author schwarze;	state Exp;
branches;
next	1.9;

1.9
date	2014.02.16.12.30.51;	author schwarze;	state Exp;
branches;
next	1.8;

1.8
date	2013.05.19.21.40.18;	author schwarze;	state Exp;
branches;
next	1.7;

1.7
date	2012.12.31.22.34.01;	author schwarze;	state Exp;
branches;
next	1.6;

1.6
date	2012.11.18.23.10.58;	author schwarze;	state Exp;
branches;
next	1.5;

1.5
date	2012.07.13.20.42.59;	author schwarze;	state Exp;
branches;
next	1.4;

1.4
date	2012.07.10.20.36.33;	author schwarze;	state Exp;
branches;
next	1.3;

1.3
date	2011.11.17.16.28.45;	author schwarze;	state Exp;
branches;
next	1.2;

1.2
date	2011.02.06.00.18.58;	author schwarze;	state Exp;
branches;
next	1.1;

1.1
date	2010.12.04.13.08.10;	author schwarze;	state Exp;
branches;
next	;


desc
@@


1.17
log
@Messages of the -Wbase level now print STYLE:.  Since this
causes horrible churn anyway, profit of the opportunity to stop
excessive testing, such that this is hopefully the last instance
of such churn.  Consistently use OpenBSD RCS tags, blank .Os,
blank fourth .TH argument, and Mdocdate like everywhere else.
Use -Ios=OpenBSD for platform-independent predictable output.
@
text
@BL-TAG(1)                   General Commands Manual                  BL-TAG(1)

NNAAMMEE
     BBll--ttaagg - tagged lists

DDEESSCCRRIIPPTTIIOONN
     tag
   x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x
   x x

     tag
    x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x
    x x x

     tag
     x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x
     x x x

     tag
      x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x
      x x x x

     tag
       x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x
       x x x x

     tag
        x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x
        x x x x x

     tag
         x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x
         x x x x x

     tag  x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x
          x x x x x x

     tag   x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x
           x x x x x x

     tag    x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x
            x x x x x x x

     four   x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x
            x x x x x x x

     quint  x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x
            x x x x x x x

     indent
            x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x
            x x x x x x x

     septime
            x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x
            x x x x x x x

     achtacht
            x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x
            x x x x x x x

     neun neun
            x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x
            x x x x x x x

     zehn_ zehn
            x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x
            x x x x x x x

     This is a very long text contained in the tag, it is so long that it
            overruns the line -
            and here comes the item body.

     hundred                                                                                               text
                                                                                                           text

     Trailing white space in the head:

     a      none

     a      one

     a      two

     a      three

     a      four

     a
            five

     a
            six

            white space only

     Non-numeric width specification:

     tag  text

     tag         text

     Scaling units other than n:

     tag   text

     tag       text

     tag
         text

     Default width:

     tag     text

     long tag
             long text

     ttaagg _w_i_t_h _m_a_r_k_u_p
             text

     Indented list:

           one  first text

           two  second text

     Embedded paragraph:

     tag     first paragraph

             second paragraph

OpenBSD                          July 4, 2017                          OpenBSD
@


1.16
log
@test .Bl -tag without -width;
related to mandoc/mdoc_term.c rev. 1.231 and to textproc/groff-1.22.3p3
@
text
@d134 1
a134 1
OpenBSD                       September 21, 2015                       OpenBSD
@


1.15
log
@Trailing whitespace is significant when determining the width of a tag
in mdoc(7) .Bl -tag and man(7) .TP, but not in man(7) .IP.
Quirk reported by Jan Stary <hans at stare dot cz> on ports@@.
@
text
@d112 10
@


1.14
log
@Support negative indentations for mdoc(7) displays and lists.
Not exactly recommended for use, rather for groff compatibility.
While here, introduce similar SHRT_MAX limits as in man(7),
fixing a few cases of infinite output found by jsg@@ with afl.
@
text
@d79 1
a79 1
     a      b
d81 13
a93 1
     a      b
a96 2
     a      b

d124 1
a124 1
OpenBSD                        December 25, 2014                       OpenBSD
@


1.13
log
@When a line (in the sense of term_flushln()) contains white space only,
the `vbl' variable includes the left margin, but `vis' does not.
Prevent a `vis' underflow that caused a bogus blank line.
Bug reported by Carsten Kunze, found in less(1): .Bl -tag ... .It " "
@
text
@d7 34
d114 1
a114 1
OpenBSD                        November 16, 2014                       OpenBSD
@


1.12
log
@more tests found in my tree
@
text
@d49 2
d80 1
a80 1
OpenBSD                          April 8, 2014                         OpenBSD
@


1.11
log
@inevitable churn caused by the section title change
@
text
@d57 9
@


1.10
log
@more tests for excessively long text in TERMP_NOBREAK mode
@
text
@d1 1
a1 1
BL-TAG(1)                  OpenBSD Reference Manual                  BL-TAG(1)
@


1.9
log
@when indenting, extend the right margin accordingly, when needed;
fixes a crash reported by blambert@@ and a few other, similar ones
@
text
@d36 4
d69 1
a69 1
OpenBSD                        February 16, 2014                       OpenBSD
@


1.8
log
@Support .Bl -offset in -mdoc -Tman.
Issue found when Thomas Klausner <wiz at NetBSD dot org> made me
look at the manuals of his http://www.nih.at/libzip library.
@
text
@d36 3
d65 1
a65 1
OpenBSD                          May 19, 2013                          OpenBSD
@


1.7
log
@Rewrite indentation handling for nested lists in a more systematic way
to fix multiple issues reported by Todd Miller; thanks!

Specifically,
 - avoid double indentation after .Bd inside .Bl
 - set up correct indentation after .Bl inside .Bl
 - set up correct indentation after .Dl and .D1 inside .Bl

While here, also
 - set up correct indentation *inside* .Dl and .D1 inside .Bl.
@
text
@d50 6
d62 1
a62 1
OpenBSD                        December 31, 2012                       OpenBSD
@


1.6
log
@Check that mandoc handles non-numeric width arguments
to .Bl -tag and .TP the same way as groff, even via -Tman.
Some time ago, millert@@ reported issues with these;
apparently, those issues were fixed since then.
@
text
@d44 1
a44 1
     Non-numeric with specification:
d50 7
a56 1
OpenBSD                        November 18, 2012                       OpenBSD
@


1.5
log
@If the tag in .Bl -tag .It would leave exactly one blank before the
body of the item, mdoc(7) breaks the line, whereas the .TP used to
translate this to man(7) does not.  Thus, insert an explicit roff(7)
line break in this place.
To be able to correctly count the characters, do not pass font escapes
an the like through print_word().
@
text
@d36 2
d44 7
a50 1
OpenBSD                        October 28, 2009                        OpenBSD
@


1.4
log
@basic implementation of -Tman .Bl -tag
while here, do some minor outflags cleanup
@
text
@d16 4
@


1.3
log
@Complete overhaul of the mandoc(1) test suite.
* Test the recently introduced -Tman output mode, too.
* Specify date and OS arguments in all tests.
* Remove the kludge of sed(1)ing away the page footer lines.
* New make(1) variables SKIP_TMAN, SKIP_GROFF.
* Drop obsolete, clumsy make(1) variable GROFF_TARGETS.
* Delete obsolete mdoc/Bl/E*.sh error reporting tests.
* Silence char/N/basic.
* New targets:
- ascii, ascii-clean - to run -Tascii tests only
- tman, tman-clean - to run the new -Tman tests only
- obj-clean - maintainer only, needed before groff-clean and groff
- groff-clean - maintainer only, affects checked-in files
@
text
@a15 4
     indent
            x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x
            x x x x x x x

@


1.2
log
@more tests found in my other tree
@
text
@d42 1
@


1.1
log
@Now that we don't have groff in base any longer, check in the desired output,
such that the regression suite does not depend on ports.
@
text
@d36 6
@

