head	1.3;
access;
symbols
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.3.0.8
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.2
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.6
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.4
	OPENBSD_5_7_BASE:1.3;
locks; strict;
comment	@# @;


1.3
date	2014.12.24.23.31.59;	author schwarze;	state Exp;
branches;
next	1.2;
commitid	TfSx49MGGpeWF6md;

1.2
date	2014.11.21.01.52.45;	author schwarze;	state Exp;
branches;
next	1.1;
commitid	hm1luQGz9X3OaZNV;

1.1
date	2014.10.30.20.05.33;	author schwarze;	state Exp;
branches;
next	;
commitid	0MyCvIn2JIoyqJkI;


desc
@@


1.3
log
@Support negative indentations for mdoc(7) displays and lists.
Not exactly recommended for use, rather for groff compatibility.
While here, introduce similar SHRT_MAX limits as in man(7),
fixing a few cases of infinite output found by jsg@@ with afl.
@
text
@.Dd December 25, 2014
.Dt BL-OFFSET 1
.Os OpenBSD
.Sh NAME
.Nm Bl-offset
.Nd various arguments for Bl offset
.Sh DESCRIPTION
.Bl -item -offset
.It
Bl item offset empty
.El
.Bl -item -offset left
.It
Bl item offset left
.El
.Bl -item -offset indent
.It
Bl item offset indent
.El
.Bl -item -offset indent-two
.It
Bl item offset indent-two
.El
.Bl -item -offset 4n
.It
Bl item offset 4n
.El
.Bl -item -offset mystring
.It
Bl item offset mystring
.El
.Bl -item -offset Ds
.It
Bl item offset Ds
.El
.Bl -item -offset 78n
.It
Bl item offset 78n
.El
.Bl -item -offset -3n
.It
Bl item offset -3n
.El
.Bl -tag -width Ds -offset
.It tag
Bl tag width Ds offset empty
.El
.Bl -tag -width Ds -offset left
.It tag
Bl tag width Ds offset left
.El
.Bl -tag -width Ds -offset indent
.It tag
Bl tag width Ds offset indent
.El
.Bl -tag -width Ds -offset indent-two
.It tag
Bl tag width Ds offset indent-two
.El
.Bl -tag -width Ds -offset 4n
.It tag
Bl tag width Ds offset 4n
.El
.Bl -tag -width Ds -offset mystring
.It tag
Bl tag width Ds offset mystring
.El
.Bl -tag -width Ds -offset Ds
.It tag
Bl tag width Ds offset Ds
.El
.Bl -tag -width Ds -offset 78n
.It tag
Bl tag width Ds offset 78n
.El
.Bl -tag -width Ds -offset -3n
.It tag
Bl tag width Ds offset -3n
.El
@


1.2
log
@We repeatedly observed assertion crashes in the low-level terminal
output handler because the high level terminal formatters could be
tricked into setting the left margin further to the right than the
right margin.  Today, jsg@@ found more of these with afl.

Change the internal interface between both levels, aiming for
simplicity and robustness of the code.  Treat both margins as
*independent* settings:  Now, termp.offset is the requested left
margin, and termp.rmargin is the available space.  Let the lower
level cope with that case of insufficient space.

Obviously, high level code that does centering or flush right
still has to do careful checks, so i did a full audit of margin
settings in the terminal formatters.

Fixes crashes caused by excessively long title or date strings in
the man(7) footer, operating system or date strings in the mdoc(7)
footer, volume strings in the man(7) or mdoc(7) header, and a few
cases related to some non-prologue macros.
@
text
@d1 1
a1 1
.Dd November 20, 2014
d40 4
d75 4
@


1.1
log
@Major bugsquashing with respect to -offset and -width:
1. Support specifying the .Bd and .Bl -offset as a macro default width;
while here, simplify the code handling the same for .Bl -width.
2. Correct handling of .Bl -offset arguments:  unlike .Bd -offset, the
arguments "left", "indent", and "indent-two" have no special meaning.
3. Fix the scaling of string length -offset and -width arguments in -Thtml.
Triggered by an incomplete documentation patch from bentley@@.
@
text
@d1 1
a1 1
.Dd October 30, 2014
d36 4
d67 4
@

