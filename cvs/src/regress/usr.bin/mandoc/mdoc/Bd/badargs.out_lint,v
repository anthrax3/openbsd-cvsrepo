head	1.9;
access;
symbols
	OPENBSD_6_1:1.7.0.8
	OPENBSD_6_1_BASE:1.7
	OPENBSD_6_0:1.7.0.4
	OPENBSD_6_0_BASE:1.7
	OPENBSD_5_9:1.7.0.2
	OPENBSD_5_9_BASE:1.7
	OPENBSD_5_8:1.6.0.6
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.4
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.2.0.4
	OPENBSD_5_6_BASE:1.2;
locks; strict;
comment	@# @;


1.9
date	2017.06.17.22.46.24;	author schwarze;	state Exp;
branches;
next	1.8;
commitid	cZz8ExRoPNYxAmqE;

1.8
date	2017.06.11.19.48.26;	author schwarze;	state Exp;
branches;
next	1.7;
commitid	Ja7YNtdzMnyr3Ti7;

1.7
date	2015.10.30.19.03.36;	author schwarze;	state Exp;
branches;
next	1.6;
commitid	B2ZxW3H5UgZIgEOi;

1.6
date	2015.02.04.22.29.28;	author schwarze;	state Exp;
branches;
next	1.5;
commitid	IbbLBZeVYih9Ehjm;

1.5
date	2015.02.04.18.58.09;	author schwarze;	state Exp;
branches;
next	1.4;
commitid	fjQt2d2WjsAKf1nR;

1.4
date	2014.11.27.23.35.03;	author schwarze;	state Exp;
branches;
next	1.3;
commitid	h4lbTux1L5FzGMXy;

1.3
date	2014.08.11.04.18.18;	author schwarze;	state Exp;
branches;
next	1.2;
commitid	OrK7ZCs0XQIBx79v;

1.2
date	2014.07.05.12.33.54;	author schwarze;	state Exp;
branches;
next	1.1;
commitid	IbTbYyU1XoSImvHA;

1.1
date	2014.07.05.01.11.33;	author schwarze;	state Exp;
branches;
next	;
commitid	xwzAVywNWdayFtqP;


desc
@@


1.9
log
@churn related to the new style message about RCS ids
@
text
@mandoc: badargs.in:12:2: ERROR: skipping all arguments: Ed tail argument
mandoc: badargs.in:19:16: ERROR: skipping excess arguments: Bd ... -bogus
mandoc: badargs.in:1:5: STYLE: Mdocdate missing: Dd October
mandoc: badargs.in:9:13: WARNING: empty argument, using 0n: Bd -offset
mandoc: badargs.in:14:34: WARNING: duplicate argument: Bd -compact
mandoc: badargs.in:14:43: WARNING: duplicate argument: Bd -offset 6n
mandoc: badargs.in:19:2: WARNING: missing display type, using -ragged: Bd
mandoc: badargs.in:24:2: WARNING: skipping duplicate display type: Bd -unfilled
mandoc: badargs.in:28:2: WARNING: skipping duplicate display type: Bd -ragged
mandoc: badargs.in:33:2: ERROR: NOT IMPLEMENTED: Bd -file
mandoc: badargs.in:38:2: ERROR: NOT IMPLEMENTED: Bd -file
mandoc: badargs.in:43:2: ERROR: NOT IMPLEMENTED: Bd -file
mandoc: badargs.in:48:2: ERROR: skipping display without arguments: Bd
mandoc: badargs.in: STYLE: RCS id missing
@


1.8
log
@churn caused by the new Mdocdate messages, no easy way to avoid this :(
@
text
@d14 1
@


1.7
log
@If a .Bd block has no arguments at all, drop the block and only keep
its contents.  Removing a gratuitious difference to groff output
found after a related bug report from krw@@.
@
text
@d3 1
@


1.6
log
@Discard excess head arguments for .Bd .Bl .Bk and delete hwarn_eq0().
Discard empty .Bk blocks.
Improve related diagnostics.
@
text
@d1 2
a3 1
mandoc: badargs.in:12:2: ERROR: skipping all arguments: Ed tail argument
a6 1
mandoc: badargs.in:19:16: ERROR: skipping excess arguments: Bd ... -bogus
d12 1
@


1.5
log
@fix column numbers of macro arguments in messages
@
text
@d6 1
@


1.4
log
@Downgrade .Bd -file from FATAL to ERROR.
Since this was the last remaining FATAL error in this area,
this change will allow major simplifications in the mdoc(7) parser.
@
text
@d1 1
a1 1
mandoc: badargs.in:9:20: WARNING: empty argument, using 0n: Bd -offset
d3 2
a4 2
mandoc: badargs.in:14:43: WARNING: duplicate argument: Bd -compact
mandoc: badargs.in:14:51: WARNING: duplicate argument: Bd -offset 6n
@


1.3
log
@start catching up with recent code changes, but no new files yet
@
text
@d8 3
@


1.2
log
@Cleanup with respect to bad macro arguments.
* Fix .Sm with invalid arg: move arg out and toggle mode.
* Promote "unknown standard" from WARNING to ERROR, it loses information.
* Delete MANDOCERR_BADWIDTH, it would only indicate a mandoc(1) bug.
* Do not report MANDOCERR_BL_LATETYPE when there is no type at all.
* Mention macro names, arguments and fallbacks.
@
text
@d5 3
a7 3
mandoc: badargs.in:19:2: WARNING: missing display type, using -ragged
mandoc: badargs.in:24:2: WARNING: skipping duplicate display type: unfilled
mandoc: badargs.in:28:2: WARNING: skipping duplicate display type: ragged
@


1.1
log
@Cleanup regarding -offset and -width:
* Bugfix: Last one wins, not first one.
* Fix .Bl -width without argument: it means 0n, so do not ignore it.
* Report macro names, argument names and fallbacks in related messages.
* Simplify: Garbage collect auxiliary variables in pre_bd() and pre_bl().
@
text
@d1 1
a1 1
mandoc: badargs.in:9:20: WARNING: skipping empty argument: Bd -offset
d5 3
@

