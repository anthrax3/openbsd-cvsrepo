head	1.5;
access;
symbols
	OPENBSD_6_1:1.5.0.10
	OPENBSD_6_1_BASE:1.5
	OPENBSD_6_0:1.5.0.8
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.2
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.5.0.6
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.5.0.4
	OPENBSD_5_7_BASE:1.5;
locks; strict;
comment	@# @;


1.5
date	2014.12.23.13.48.15;	author schwarze;	state Exp;
branches;
next	1.4;
commitid	gQAVpbNdyny1vBnL;

1.4
date	2014.12.23.09.31.17;	author schwarze;	state Exp;
branches;
next	1.3;
commitid	SXZbldG8wiiZaqvE;

1.3
date	2014.11.21.01.52.45;	author schwarze;	state Exp;
branches;
next	1.2;
commitid	hm1luQGz9X3OaZNV;

1.2
date	2014.08.26.11.32.57;	author schwarze;	state Exp;
branches;
next	1.1;
commitid	QJnN8iCFzEXgbRZx;

1.1
date	2014.08.14.02.00.53;	author schwarze;	state Exp;
branches;
next	;
commitid	pqgg86JpQ4OXDxJ3;


desc
@@


1.5
log
@support negative horizontal widths in man(7);
minus twenty lines of code in spite of enhanced functionality
@
text
@HORIZ(1)                    General Commands Manual                   HORIZ(1)



NNAAMMEE
       horiz - horizontal distances

DDEESSCCRRIIPPTTIIOONN
       initial text
          240u
              3.6c
        0.003f
                    2i
     500M
          6P
     36p
          10n
     5m
                                                                               79n
               1.5ix
         -6n

       final text



OpenBSD                        December 23, 2014                      HORIZ(1)
@


1.4
log
@some scaling unit fixes:
- .sp with an invalid argument is .sp 1v, not .sp 0v
- in man(1), trailing garbage doesn't make scaling units invalid
@
text
@d21 1
@


1.3
log
@We repeatedly observed assertion crashes in the low-level terminal
output handler because the high level terminal formatters could be
tricked into setting the left margin further to the right than the
right margin.  Today, jsg@@ found more of these with afl.

Change the internal interface between both levels, aiming for
simplicity and robustness of the code.  Treat both margins as
*independent* settings:  Now, termp.offset is the requested left
margin, and termp.rmargin is the available space.  Let the lower
level cope with that case of insufficient space.

Obviously, high level code that does centering or flush right
still has to do careful checks, so i did a full audit of margin
settings in the terminal formatters.

Fixes crashes caused by excessively long title or date strings in
the man(7) footer, operating system or date strings in the mdoc(7)
footer, volume strings in the man(7) or mdoc(7) header, and a few
cases related to some non-prologue macros.
@
text
@d20 1
d26 1
a26 1
OpenBSD                        November 20, 2014                      HORIZ(1)
@


1.2
log
@inevitable churn caused by the section title change
@
text
@d19 1
d25 1
a25 1
OpenBSD                         August 12, 2014                       HORIZ(1)
@


1.1
log
@new regression tests collected during recent work
@
text
@d1 1
a1 1
HORIZ(1)                   OpenBSD Reference Manual                   HORIZ(1)
@

