head	1.3;
access;
symbols
	OPENBSD_6_1:1.3.0.12
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.3.0.8
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.2
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.6
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.4
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.1.0.12
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.10
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.6
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.4
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.2
	OPENBSD_5_2_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2015.01.30.21.28.21;	author schwarze;	state Exp;
branches;
next	1.2;
commitid	klhLXGjLVr5oVTkR;

1.2
date	2014.08.14.01.58.51;	author schwarze;	state Exp;
branches;
next	1.1;
commitid	I195DFC5p2b9CR9i;

1.1
date	2012.05.27.01.01.25;	author schwarze;	state Exp;
branches;
next	;


desc
@@


1.3
log
@starting a tbl(7) breaks man(7) next-line scope;
triggered by a bug report from jsg@@
@
text
@# $OpenBSD: Makefile,v 1.2 2014/08/14 01:58:51 schwarze Exp $

REGRESS_TARGETS	= break vspace
LINT_TARGETS	= break

# groff-1.22.3 defect:
# - Starting a table in next-line scope confuses font handling,
#   and in the case of .TP indentation as well.

SKIP_GROFF	= break

TBL=/usr/local/bin/tbl

.for t in ${REGRESS_TARGETS}
${t}.out_ascii: ${t}.in
	${TBL} ${.ALLSRC} | ${NROFF} ${NOPTS} -Tascii > ${.TARGET}
.endfor

.include <bsd.regress.mk>
@


1.2
log
@add missing NOPTS arguments
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1 2012/05/27 01:01:25 schwarze Exp $
d3 8
a10 1
REGRESS_TARGETS=vspace
@


1.1
log
@Fix the vertical spacing around tbl(7) instances in man(7).

Groff forces the document author to manually request sufficient spacing
after .TE - that is, at least .sp 1v after a table with the "box" option
and at least .sp 2v after a table with the "doublebox" option - or else
it clobbers the box.  I consider that insane, so i'm not imitating groff
in that respect.  Instead, i add at least as much vertical space as groff,
or more where required to avoid clobbering the box.

Consequently, output will be identical for input that looks sane with
groff, and mandoc will make output look better for input that looks bad
with groff.

As a side effect, having identical output for portable input
makes it possible to set up the first regression tests for tbl(7).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2011/02/05 18:26:14 schwarze Exp $
d9 1
a9 1
	${TBL} ${.ALLSRC} | ${NROFF} > ${.TARGET}
@

