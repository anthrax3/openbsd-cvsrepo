head	1.4;
access;
symbols
	OPENBSD_6_0:1.4.0.8
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.2
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.6
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.4
	OPENBSD_5_7_BASE:1.4;
locks; strict;
comment	@# @;


1.4
date	2015.01.24.10.07.58;	author schwarze;	state Exp;
branches;
next	1.3;
commitid	S11bl58eNymvqy0E;

1.3
date	2015.01.24.01.59.40;	author schwarze;	state Exp;
branches;
next	1.2;
commitid	pxeX1HXdNjYPBYKE;

1.2
date	2014.08.26.11.32.54;	author schwarze;	state Exp;
branches;
next	1.1;
commitid	QJnN8iCFzEXgbRZx;

1.1
date	2014.08.18.16.26.13;	author schwarze;	state Exp;
branches;
next	;
commitid	ytc98H3JPc5RCcXi;


desc
@@


1.4
log
@preserve .PP before .RE; effect found in audio/pms(1)
@
text
@RS-BROKEN(1)                General Commands Manual               RS-BROKEN(1)



NNAAMMEE
       RS-broken - indented blocks broken by other blocks

DDEESSCCRRIIPPTTIIOONN
       broken by PP:
         indented

         still indented
       broken by IP:
              indented

              tag   first line
                    second line

              still indented
       broken by TP:
              indented

              tag   first line
                    second line

              still indented
       broken by HP:
              indented

              Let's have a longer text here such that we can see the line
                break.

              still indented
       trailing PP:
              indented

       final text



OpenBSD                        January 24, 2015                   RS-BROKEN(1)
@


1.3
log
@Support .RE with an argument; needed for audio/pms(1).
@
text
@d34 3
@


1.2
log
@inevitable churn caused by the section title change
@
text
@d9 1
a9 1
       initial text
d13 21
a33 1
       back to normal
d38 1
a38 1
OpenBSD                         August 28, 2014                   RS-BROKEN(1)
@


1.1
log
@When the first child of the node being validated gets deleted during
validation, man_node_unlink() switches to MAN_NEXT_CHILD.  After
that, we have to switch back to MAN_NEXT_SIBLING after completing
validation, or subsequent parsing would add content into an already
closed node, clobbering potentially existing children, causing
information loss and a memory leak.  Bug found by kristaps@@ with
valgrind in groff(7) on Mac OS X.

Note that the switch back must be conditional, for if the node being
validated itself gets deleted, we must *not* go to MAN_NEXT_SIBLING,
which would not only yield wrong results in general but also crash
in malformed manuals having an empty paragraph before the first .SH,
for example OpenBSD c++filt(1).

While here, add the missing <sys/types.h> as required before mandoc.h.
@
text
@d1 1
a1 1
RS-BROKEN(1)               OpenBSD Reference Manual               RS-BROKEN(1)
@

