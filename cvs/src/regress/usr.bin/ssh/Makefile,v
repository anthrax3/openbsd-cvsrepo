head	1.95;
access;
symbols
	OPENBSD_6_2:1.95.0.2
	OPENBSD_6_2_BASE:1.95
	OPENBSD_6_1:1.94.0.4
	OPENBSD_6_1_BASE:1.94
	OPENBSD_6_0:1.88.0.2
	OPENBSD_6_0_BASE:1.88
	OPENBSD_5_9:1.83.0.2
	OPENBSD_5_9_BASE:1.83
	OPENBSD_5_8:1.81.0.4
	OPENBSD_5_8_BASE:1.81
	OPENBSD_5_7:1.78.0.2
	OPENBSD_5_7_BASE:1.78
	OPENBSD_5_6:1.70.0.4
	OPENBSD_5_6_BASE:1.70
	OPENBSD_5_5:1.68.0.4
	OPENBSD_5_5_BASE:1.68
	OPENBSD_5_4:1.65.0.2
	OPENBSD_5_4_BASE:1.65
	OPENBSD_5_3:1.62.0.2
	OPENBSD_5_3_BASE:1.62
	OPENBSD_5_2:1.58.0.8
	OPENBSD_5_2_BASE:1.58
	OPENBSD_5_1_BASE:1.58
	OPENBSD_5_1:1.58.0.6
	OPENBSD_5_0:1.58.0.4
	OPENBSD_5_0_BASE:1.58
	OPENBSD_4_9:1.58.0.2
	OPENBSD_4_9_BASE:1.58
	OPENBSD_4_8:1.54.0.2
	OPENBSD_4_8_BASE:1.54
	OPENBSD_4_7:1.52.0.2
	OPENBSD_4_7_BASE:1.52
	OPENBSD_4_6:1.48.0.8
	OPENBSD_4_6_BASE:1.48
	OPENBSD_4_5:1.48.0.4
	OPENBSD_4_5_BASE:1.48
	OPENBSD_4_4:1.48.0.2
	OPENBSD_4_4_BASE:1.48
	OPENBSD_4_3:1.44.0.2
	OPENBSD_4_3_BASE:1.44
	OPENBSD_4_2:1.42.0.6
	OPENBSD_4_2_BASE:1.42
	OPENBSD_4_1:1.42.0.4
	OPENBSD_4_1_BASE:1.42
	OPENBSD_4_0:1.42.0.2
	OPENBSD_4_0_BASE:1.42
	OPENBSD_3_9:1.36.0.6
	OPENBSD_3_9_BASE:1.36
	OPENBSD_3_8:1.36.0.4
	OPENBSD_3_8_BASE:1.36
	OPENBSD_3_7:1.36.0.2
	OPENBSD_3_7_BASE:1.36
	OPENBSD_3_6:1.32.0.2
	OPENBSD_3_6_BASE:1.32
	OPENBSD_3_5:1.27.0.2
	OPENBSD_3_5_BASE:1.27
	OPENBSD_3_4:1.24.0.2
	OPENBSD_3_4_BASE:1.24
	OPENBSD_3_3:1.20.0.2
	OPENBSD_3_3_BASE:1.20
	OPENBSD_3_2:1.17.0.2
	OPENBSD_3_2_BASE:1.17
	OPENBSD_3_1:1.13.0.2
	OPENBSD_3_1_BASE:1.13;
locks; strict;
comment	@# @;


1.95
date	2017.06.24.06.35.24;	author djm;	state Exp;
branches;
next	1.94;
commitid	BJEqc9tiAMaIhwWT;

1.94
date	2016.12.16.03.51.19;	author dtucker;	state Exp;
branches;
next	1.93;
commitid	IZ4x7JZqiJJQw9fs;

1.93
date	2016.11.01.13.43.27;	author tb;	state Exp;
branches;
next	1.92;
commitid	pBCtG0AEsm5tbSei;

1.92
date	2016.10.31.23.45.08;	author tb;	state Exp;
branches;
next	1.91;
commitid	hPWTqh5uOUs3ji8u;

1.91
date	2016.10.06.09.31.38;	author natano;	state Exp;
branches;
next	1.90;
commitid	MfrRS8aUECJfapZh;

1.90
date	2016.09.30.11.55.20;	author bluhm;	state Exp;
branches;
next	1.89;
commitid	sqi57uFiAqSYM6qf;

1.89
date	2016.09.12.02.25.46;	author dtucker;	state Exp;
branches;
next	1.88;
commitid	SOD2yl1ucoFmmKnX;

1.88
date	2016.06.03.04.10.41;	author dtucker;	state Exp;
branches;
next	1.87;
commitid	TKTxzLUXEBFk1nvp;

1.87
date	2016.04.15.02.55.53;	author djm;	state Exp;
branches;
next	1.86;
commitid	q44rVUDJtkoxvkd8;

1.86
date	2016.04.15.00.48.01;	author djm;	state Exp;
branches;
next	1.85;
commitid	dPRGAJq2jK30gu5k;

1.85
date	2016.04.15.00.31.10;	author djm;	state Exp;
branches;
next	1.84;
commitid	tfJY7oikBP8cNwAW;

1.84
date	2016.03.04.02.30.36;	author djm;	state Exp;
branches;
next	1.83;
commitid	kgaORXIgFpU5Yjvh;

1.83
date	2016.02.18.02.37.25;	author djm;	state Exp;
branches;
next	1.82;
commitid	z4ZNNtVYkmMutnxo;

1.82
date	2015.09.24.06.16.53;	author djm;	state Exp;
branches;
next	1.81;
commitid	5OZyjCM8FhoxLlNA;

1.81
date	2015.05.21.06.44.25;	author djm;	state Exp;
branches;
next	1.80;
commitid	pCrnYGMxrZow52mc;

1.80
date	2015.04.23.05.01.19;	author dtucker;	state Exp;
branches;
next	1.79;
commitid	Z5sVeBHgp15qZPLk;

1.79
date	2015.03.16.22.46.14;	author djm;	state Exp;
branches;
next	1.78;
commitid	uzzxxfh6hvwJMLcd;

1.78
date	2015.01.26.06.12.18;	author djm;	state Exp;
branches;
next	1.77;
commitid	eC96HCtfRBC4XicK;

1.77
date	2015.01.20.22.58.57;	author djm;	state Exp;
branches;
next	1.76;
commitid	z17JmhaYBWUmyJjT;

1.76
date	2015.01.18.22.00.18;	author djm;	state Exp;
branches;
next	1.75;
commitid	kPbAhgTlOB37WugC;

1.75
date	2015.01.18.19.47.55;	author djm;	state Exp;
branches;
next	1.74;
commitid	QD5Lh9hTesfhcuSy;

1.74
date	2015.01.13.07.49.49;	author djm;	state Exp;
branches;
next	1.73;
commitid	RDFGhPj5IZQMm90n;

1.73
date	2015.01.12.20.13.27;	author markus;	state Exp;
branches;
next	1.72;
commitid	p9qucpN7Qi5sBhex;

1.72
date	2014.12.22.08.06.03;	author djm;	state Exp;
branches;
next	1.71;
commitid	O5anoQRAYbIC0THz;

1.71
date	2014.12.22.02.15.52;	author djm;	state Exp;
branches;
next	1.70;
commitid	ae5gs3LqO1Ehx85B;

1.70
date	2014.06.24.01.14.17;	author djm;	state Exp;
branches;
next	1.69;
commitid	ykKEHe6cpJlsqpsg;

1.69
date	2014.04.30.05.32.00;	author djm;	state Exp;
branches;
next	1.68;

1.68
date	2014.01.25.04.35.32;	author dtucker;	state Exp;
branches;
next	1.67;

1.67
date	2013.12.06.13.52.46;	author markus;	state Exp;
branches;
next	1.66;

1.66
date	2013.10.09.23.44.14;	author djm;	state Exp;
branches;
next	1.65;

1.65
date	2013.04.18.02.46.12;	author djm;	state Exp;
branches;
next	1.64;

1.64
date	2013.04.07.02.16.03;	author dtucker;	state Exp;
branches;
next	1.63;

1.63
date	2013.04.06.06.00.22;	author dtucker;	state Exp;
branches;
next	1.62;

1.62
date	2013.01.18.00.45.29;	author djm;	state Exp;
branches;
next	1.61;

1.61
date	2012.12.11.22.42.11;	author markus;	state Exp;
branches;
next	1.60;

1.60
date	2012.12.02.20.47.48;	author djm;	state Exp;
branches;
next	1.59;

1.59
date	2012.11.22.22.49.30;	author djm;	state Exp;
branches;
next	1.58;

1.58
date	2011.01.06.22.46.21;	author djm;	state Exp;
branches;
next	1.57;

1.57
date	2010.09.22.12.26.05;	author djm;	state Exp;
branches;
next	1.56;

1.56
date	2010.09.02.16.12.55;	author markus;	state Exp;
branches;
next	1.55;

1.55
date	2010.08.31.12.24.25;	author djm;	state Exp;
branches;
next	1.54;

1.54
date	2010.06.27.19.19.56;	author phessler;	state Exp;
branches;
next	1.53;

1.53
date	2010.05.07.11.31.26;	author djm;	state Exp;
branches;
next	1.52;

1.52
date	2010.02.26.20.33.21;	author djm;	state Exp;
branches;
next	1.51;

1.51
date	2010.02.09.06.29.02;	author djm;	state Exp;
branches;
next	1.50;

1.50
date	2009.11.09.04.20.04;	author dtucker;	state Exp;
branches;
next	1.49;

1.49
date	2009.08.13.00.57.17;	author djm;	state Exp;
branches;
next	1.48;

1.48
date	2008.06.28.13.57.25;	author djm;	state Exp;
branches;
next	1.47;

1.47
date	2008.06.11.23.11.40;	author dtucker;	state Exp;
branches;
next	1.46;

1.46
date	2008.06.10.23.13.43;	author dtucker;	state Exp;
branches;
next	1.45;

1.45
date	2008.06.10.05.23.32;	author dtucker;	state Exp;
branches;
next	1.44;

1.44
date	2007.12.21.04.13.53;	author djm;	state Exp;
branches;
next	1.43;

1.43
date	2007.10.29.06.57.13;	author dtucker;	state Exp;
branches;
next	1.42;

1.42
date	2006.07.19.13.34.52;	author dtucker;	state Exp;
branches;
next	1.41;

1.41
date	2006.07.19.13.09.28;	author dtucker;	state Exp;
branches;
next	1.40;

1.40
date	2006.07.17.12.08.02;	author dtucker;	state Exp;
branches;
next	1.39;

1.39
date	2006.03.13.12.20.38;	author dtucker;	state Exp;
branches;
next	1.38;

1.38
date	2006.03.13.09.04.00;	author dtucker;	state Exp;
branches;
next	1.37;

1.37
date	2006.03.13.08.48.28;	author dtucker;	state Exp;
branches;
next	1.36;

1.36
date	2005.03.04.08.48.46;	author djm;	state Exp;
branches;
next	1.35;

1.35
date	2005.01.14.04.21.18;	author david;	state Exp;
branches;
next	1.34;

1.34
date	2004.12.10.01.31.30;	author fgsch;	state Exp;
branches;
next	1.33;

1.33
date	2004.10.29.23.59.22;	author djm;	state Exp;
branches;
next	1.32;

1.32
date	2004.07.09.19.45.43;	author david;	state Exp;
branches;
next	1.31;

1.31
date	2004.06.24.19.32.00;	author djm;	state Exp;
branches;
next	1.30;

1.30
date	2004.06.13.15.04.08;	author djm;	state Exp;
branches;
next	1.29;

1.29
date	2004.06.13.13.51.02;	author dtucker;	state Exp;
branches;
next	1.28;

1.28
date	2004.04.27.09.47.30;	author djm;	state Exp;
branches;
next	1.27;

1.27
date	2004.02.17.08.23.20;	author dtucker;	state Exp;
branches;
next	1.26;

1.26
date	2003.10.11.11.49.49;	author dtucker;	state Exp;
branches;
next	1.25;

1.25
date	2003.10.07.01.52.13;	author dtucker;	state Exp;
branches;
next	1.24;

1.24
date	2003.07.03.08.24.13;	author markus;	state Exp;
branches;
next	1.23;

1.23
date	2003.06.12.15.43.32;	author markus;	state Exp;
branches;
next	1.22;

1.22
date	2003.04.04.09.34.22;	author djm;	state Exp;
branches;
next	1.21;

1.21
date	2003.04.02.12.21.13;	author markus;	state Exp;
branches;
next	1.20;

1.20
date	2003.01.08.23.54.22;	author djm;	state Exp;
branches;
next	1.19;

1.19
date	2002.12.09.16.05.02;	author markus;	state Exp;
branches;
next	1.18;

1.18
date	2002.12.09.15.38.30;	author markus;	state Exp;
branches;
next	1.17;

1.17
date	2002.09.02.20.01.44;	author avsm;	state Exp;
branches;
next	1.16;

1.16
date	2002.07.16.09.14.06;	author markus;	state Exp;
branches;
next	1.15;

1.15
date	2002.06.24.12.48.06;	author wcobb;	state Exp;
branches;
next	1.14;

1.14
date	2002.06.06.00.38.40;	author markus;	state Exp;
branches;
next	1.13;

1.13
date	2002.04.01.22.15.08;	author markus;	state Exp;
branches;
next	1.12;

1.12
date	2002.03.27.22.40.27;	author markus;	state Exp;
branches;
next	1.11;

1.11
date	2002.03.27.00.03.37;	author markus;	state Exp;
branches;
next	1.10;

1.10
date	2002.03.26.15.14.33;	author markus;	state Exp;
branches;
next	1.9;

1.9
date	2002.03.23.16.38.08;	author markus;	state Exp;
branches;
next	1.8;

1.8
date	2002.03.21.22.27.00;	author markus;	state Exp;
branches;
next	1.7;

1.7
date	2002.03.21.21.45.07;	author markus;	state Exp;
branches;
next	1.6;

1.6
date	2002.03.15.13.08.56;	author markus;	state Exp;
branches;
next	1.5;

1.5
date	2002.02.22.12.31.35;	author markus;	state Exp;
branches;
next	1.4;

1.4
date	2002.02.18.11.40.42;	author markus;	state Exp;
branches;
next	1.3;

1.3
date	2002.02.15.14.41.38;	author markus;	state Exp;
branches;
next	1.2;

1.2
date	2002.02.14.23.18.00;	author markus;	state Exp;
branches;
next	1.1;

1.1
date	2002.01.17.13.21.28;	author markus;	state Exp;
branches;
next	;


desc
@@


1.95
log
@regress test for ExposeAuthInfo
@
text
@#	$OpenBSD: Makefile,v 1.94 2016/12/16 03:51:19 dtucker Exp $

.ifndef SKIP_UNIT
SUBDIR=		unittests
.endif
SUBDIR+=	misc

REGRESS_FAIL_EARLY?=	yes
REGRESS_TARGETS=	t1 t2 t3 t4 t5 t6 t7 t8 t9 t10 t11 t12

LTESTS= 	connect \
		proxy-connect \
		connect-privsep \
		proto-version \
		proto-mismatch \
		exit-status \
		envpass \
		transfer \
		banner \
		rekey \
		dhgex \
		stderr-data \
		stderr-after-eof \
		broken-pipe \
		try-ciphers \
		yes-head \
		login-timeout \
		agent \
		agent-getpeereid \
		agent-timeout \
		agent-ptrace \
		keyscan \
		keygen-change \
		keygen-convert \
		keygen-moduli \
		key-options \
		scp \
		sftp \
		sftp-chroot \
		sftp-cmds \
		sftp-badcmds \
		sftp-batch \
		sftp-glob \
		sftp-perm \
		reconfigure \
		dynamic-forward \
		forwarding \
		multiplex \
		reexec \
		brokenkeys \
		sshcfgparse \
		cfgparse \
		cfgmatch \
		addrmatch \
		localcommand \
		forcecommand \
		portnum \
		keytype \
		kextype \
		cert-hostkey \
		cert-userkey \
		host-expand \
		keys-command \
		forward-control \
		integrity \
		krl \
		multipubkey \
		limit-keytype \
		hostkey-agent \
		keygen-knownhosts \
		hostkey-rotate \
		principals-command \
		cert-file \
		cfginclude \
		allow-deny-users \
		authinfo

INTEROP_TESTS=	putty-transfer putty-ciphers putty-kex conch-ciphers
#INTEROP_TESTS+=ssh-com ssh-com-client ssh-com-keygen ssh-com-sftp

#LTESTS= 	cipher-speed

USERNAME!=	id -un
CLEANFILES+=	*.core actual agent-key.* authorized_keys_${USERNAME} \
		authorized_keys_${USERNAME}.* authorized_principals_${USERNAME} \
		banner.in banner.out cert_host_key* cert_user_key* \
		copy.1 copy.2 data ed25519-agent ed25519-agent* \
		ed25519-agent.pub empty.in expect failed-regress.log \
		failed-ssh.log failed-sshd.log hkr.* host.rsa host.rsa1 \
		host_* host_ca_key* host_krl_* host_revoked_* key.* \
		key.dsa-* key.ecdsa-* key.ed25519-512 key.ed25519-512.pub \
		key.rsa-* keys-command-args kh.* known_hosts \
		known_hosts-cert known_hosts.* krl-* ls.copy modpipe \
		netcat pidfile putty.rsa2 ready regress.log remote_pid \
		revoked-* rsa rsa-agent rsa-agent.pub rsa.pub rsa1 \
		rsa1-agent rsa1-agent.pub rsa1.pub rsa_ssh2_cr.prv \
		rsa_ssh2_crnl.prv scp-ssh-wrapper.exe \
		scp-ssh-wrapper.scp setuid-allowed sftp-server.log \
		sftp-server.sh sftp.log ssh-log-wrapper.sh ssh.log \
		ssh_config ssh_config.* ssh_proxy ssh_proxy_bak \
		ssh_proxy_envpass sshd.log sshd_config sshd_config.orig \
		sshd_proxy sshd_proxy.* sshd_proxy_bak sshd_proxy_orig \
		t10.out t10.out.pub t12.out t12.out.pub t2.out t3.out \
		t6.out1 t6.out2 t7.out t7.out.pub t8.out t8.out.pub \
		t9.out t9.out.pub testdata user_*key* user_ca* user_key*

SUDO_CLEAN+=	/var/run/testdata_${USERNAME} /var/run/keycommand_${USERNAME}

# Enable all malloc(3) randomisations and checks
TEST_ENV=      "MALLOC_OPTIONS=CFGJRSUX"

t1:
	ssh-keygen -if ${.CURDIR}/rsa_ssh2.prv | diff - ${.CURDIR}/rsa_openssh.prv
	tr '\n' '\r' <${.CURDIR}/rsa_ssh2.prv > ${.OBJDIR}/rsa_ssh2_cr.prv
	ssh-keygen -if ${.OBJDIR}/rsa_ssh2_cr.prv | diff - ${.CURDIR}/rsa_openssh.prv
	awk '{print $$0 "\r"}' ${.CURDIR}/rsa_ssh2.prv > ${.OBJDIR}/rsa_ssh2_crnl.prv
	ssh-keygen -if ${.OBJDIR}/rsa_ssh2_crnl.prv | diff - ${.CURDIR}/rsa_openssh.prv

t2:
	cat ${.CURDIR}/rsa_openssh.prv > t2.out
	chmod 600 t2.out
	ssh-keygen -yf t2.out | diff - ${.CURDIR}/rsa_openssh.pub

t3:
	ssh-keygen -ef ${.CURDIR}/rsa_openssh.pub |\
		ssh-keygen -if /dev/stdin |\
		diff - ${.CURDIR}/rsa_openssh.pub

t4:
	ssh-keygen -E md5 -lf ${.CURDIR}/rsa_openssh.pub |\
		awk '{print $$2}' | diff - ${.CURDIR}/t4.ok

t5:
	ssh-keygen -Bf ${.CURDIR}/rsa_openssh.pub |\
		awk '{print $$2}' | diff - ${.CURDIR}/t5.ok

t6:
	ssh-keygen -if ${.CURDIR}/dsa_ssh2.prv > t6.out1
	ssh-keygen -if ${.CURDIR}/dsa_ssh2.pub > t6.out2
	chmod 600 t6.out1
	ssh-keygen -yf t6.out1 | diff - t6.out2

t7.out:
	ssh-keygen -q -t rsa -N '' -f $@@

t7: t7.out
	ssh-keygen -lf t7.out > /dev/null
	ssh-keygen -Bf t7.out > /dev/null

t8.out:
	ssh-keygen -q -t dsa -N '' -f $@@

t8: t8.out
	ssh-keygen -lf t8.out > /dev/null
	ssh-keygen -Bf t8.out > /dev/null

t9.out:
	ssh-keygen -q -t ecdsa -N '' -f $@@

t9: t9.out
	ssh-keygen -lf t9.out > /dev/null
	ssh-keygen -Bf t9.out > /dev/null

t10.out:
	ssh-keygen -q -t ed25519 -N '' -f $@@

t10: t10.out
	ssh-keygen -lf t10.out > /dev/null
	ssh-keygen -Bf t10.out > /dev/null

t11:
	ssh-keygen -E sha256 -lf ${.CURDIR}/rsa_openssh.pub |\
		awk '{print $$2}' | diff - ${.CURDIR}/t11.ok

t12.out:
	ssh-keygen -q -t ed25519 -N '' -C 'test-comment-1234' -f $@@

t12: t12.out
	ssh-keygen -lf t12.out.pub | grep -q test-comment-1234

modpipe: modpipe.c

t-integrity: modpipe

.for t in ${LTESTS} ${INTEROP_TESTS}
t-${t}:
	env SUDO="${SUDO}" ${TEST_ENV} \
	    sh ${.CURDIR}/test-exec.sh ${.OBJDIR} ${.CURDIR}/${t}.sh
.endfor

.for t in ${LTESTS}
REGRESS_TARGETS+=t-${t}
.endfor

.for t in ${INTEROP_TESTS}
INTEROP_TARGETS+=t-${t}
.endfor

# Not run by default
interop: ${INTEROP_TARGETS}

.for s in ${SUBDIR}
CLEAN_SUBDIR+=c-${s}
c-${s}:
	${MAKE} -C ${.CURDIR}/${s} clean
.endfor

clean: ${CLEAN_SUBDIR}
	rm -f ${CLEANFILES}
	test -z "${SUDO}" || ${SUDO} rm -f ${SUDO_CLEAN}
	rm -rf .putty

.include <bsd.regress.mk>
@


1.94
log
@Add regression test for AllowUsers and DenyUsers.  Patch from Zev Weiss
<zev at bewilderbeest.net>
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.93 2016/11/01 13:43:27 tb Exp $
d75 2
a76 1
		allow-deny-users
@


1.93
log
@Clean up MALLOC_OPTIONS.  For the unittests, move MALLOC_OPTIONS and
TEST_ENV to unittets/Makefile.inc.

ok otto
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.92 2016/10/31 23:45:08 tb Exp $
d74 2
a75 1
		cfginclude
@


1.92
log
@Remove the obsolete A and P flags from MALLOC_OPTIONS.

ok dtucker
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.91 2016/10/06 09:31:38 natano Exp $
d108 1
a108 1
TEST_ENV=      "MALLOC_OPTIONS=FGJRX"
@


1.91
log
@Move USER out of the way to unbreak the BUILDUSER mechanism.
ok tb
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.90 2016/09/30 11:55:20 bluhm Exp $
d108 1
a108 1
TEST_ENV=      "MALLOC_OPTIONS=AFGJPRX"
@


1.90
log
@In ssh tests set REGRESS_FAIL_EARLY with ?= so that the environment
can change it.
OK djm@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.89 2016/09/12 02:25:46 dtucker Exp $
d81 3
a83 3
USER!=		id -un
CLEANFILES+=	*.core actual agent-key.* authorized_keys_${USER} \
		authorized_keys_${USER}.* authorized_principals_${USER} \
d105 1
a105 1
SUDO_CLEAN+=	/var/run/testdata_${USER} /var/run/keycommand_${USER}
@


1.89
log
@Add testcase for ssh-keygen -j, -J and -K options for moduli screening.
Does not currently test generation as that is extremely slow.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.88 2016/06/03 04:10:41 dtucker Exp $
d8 1
a8 1
REGRESS_FAIL_EARLY=	yes
@


1.88
log
@Add a test for ssh(1)'s config file parsing.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.87 2016/04/15 02:55:53 djm Exp $
d35 1
@


1.87
log
@remove redundant CLEANFILES section
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.86 2016/04/15 00:48:01 djm Exp $
d50 1
@


1.86
log
@sync CLEANFILES with portable, sort
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.85 2016/04/15 00:31:10 djm Exp $
a9 4

CLEANFILES+=	t2.out t6.out1 t6.out2 t7.out t7.out.pub copy.1 copy.2 \
		t8.out t8.out.pub t9.out t9.out.pub t10.out t10.out.pub \
		t12.out t12.out.pub
@


1.85
log
@regression test for ssh_config Include directive
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.84 2016/03/04 02:30:36 djm Exp $
d84 22
a105 16
CLEANFILES+=	*.core authorized_keys_${USER} known_hosts pidfile \
		ssh_config sshd_config.orig ssh_proxy sshd_config sshd_proxy \
		rsa.pub rsa rsa1.pub rsa1 host.rsa host.rsa1 \
		rsa-agent rsa-agent.pub rsa1-agent rsa1-agent.pub \
		ls.copy banner.in banner.out empty.in \
		scp-ssh-wrapper.exe ssh_proxy_envpass remote_pid \
		sshd_proxy_bak rsa_ssh2_cr.prv rsa_ssh2_crnl.prv \
		known_hosts-cert host_ca_key* cert_user_key* cert_host_key* \
		authorized_principals_${USER} expect actual ready \
		sshd_proxy.* authorized_keys_${USER}.* revoked-* krl-* \
		ssh.log failed-ssh.log sshd.log failed-sshd.log \
		regress.log failed-regress.log ssh-log-wrapper.sh \
		sftp-server.sh sftp-server.log sftp.log kh.* hkr.* \
		user_key* user_ca* host_* key.* agent-key.* ed25519-agent* \
		known_hosts.* data modpipe ssh_proxy keys-command-args \
		scp-ssh-wrapper.scp ssh_proxy_bak ssh_config.*
@


1.84
log
@add KEX fuzzer harness; ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.83 2016/02/18 02:37:25 djm Exp $
d75 2
a76 1
		cert-file
d99 1
a99 1
		scp-ssh-wrapper.scp ssh_proxy_bak
@


1.83
log
@bsd.regress.mk doesn't automatically add "make clean" targets for
$SUBDIRS so do it explicitly
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.82 2015/09/24 06:16:53 djm Exp $
d6 1
@


1.82
log
@regress test for CertificateFile; patch from Meghana Bhat via bz#2436
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.81 2015/05/21 06:44:25 djm Exp $
d194 7
a200 1
clean:
@


1.81
log
@regress test for AuthorizedPrincipalsCommand
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.80 2015/04/23 05:01:19 dtucker Exp $
d73 2
a74 1
		principals-command
@


1.80
log
@Add a simple regression test for sshd's configuration parser.  Right now,
all it does is run the output of sshd -T back through itself and ensure
the output is valid and invariant.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.79 2015/03/16 22:46:14 djm Exp $
d72 2
a73 1
		hostkey-rotate
@


1.79
log
@make CLEANFILES clean up more of the tests' droppings
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.78 2015/01/26 06:12:18 djm Exp $
d53 1
@


1.78
log
@regression test for host key rotation
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.77 2015/01/20 22:58:57 djm Exp $
d79 1
a79 1
CLEANFILES+=	authorized_keys_${USER} known_hosts pidfile \
d91 4
a94 1
		sftp-server.sh sftp-server.log sftp.log kh.*
@


1.77
log
@use SUBDIR to recuse into unit tests; makes "make obj" actually
work
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.76 2015/01/18 22:00:18 djm Exp $
d70 2
a71 1
		keygen-knownhosts
@


1.76
log
@regression test for known_host file editing using
ssh-keygen (-H / -R / -F) after hostkeys_foreach() change;
feedback and ok markus@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.75 2015/01/18 19:47:55 djm Exp $
d3 6
a8 2
REGRESS_FAIL_EARLY= yes
REGRESS_TARGETS=	unit t1 t2 t3 t4 t5 t6 t7 t8 t9 t10 t11 t12
a96 5
unit:
	if test -z "${SKIP_UNIT}" ; then \
		(set -e ; cd ${.CURDIR}/unittests ; make) \
	fi

a190 1
	(set -e ; cd ${.CURDIR}/unittests ; make clean)
@


1.75
log
@enable hostkey-agent.sh test
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.74 2015/01/13 07:49:49 djm Exp $
d65 2
a66 1
		hostkey-agent
d86 1
a86 1
		sftp-server.sh sftp-server.log sftp.log
@


1.74
log
@regress test for PubkeyAcceptedKeyTypes; ok markus@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.73 2015/01/12 20:13:27 markus Exp $
d64 2
a65 1
		limit-keytype
@


1.73
log
@unbreak parsing of pubkey comments; with gerhard; ok djm/deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.72 2014/12/22 08:06:03 djm Exp $
d63 2
a64 1
		multipubkey
@


1.72
log
@regression test for multiple required pubkey authentication;
ok markus@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.71 2014/12/22 02:15:52 djm Exp $
d4 1
a4 1
REGRESS_TARGETS=	unit t1 t2 t3 t4 t5 t6 t7 t8 t9 t10 t11
d7 2
a8 1
		t8.out t8.out.pub t9.out t9.out.pub
d157 6
@


1.71
log
@adjust for new SHA256 key fingerprints and slightly-different MD5 hex
fingerprint format
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.70 2014/06/24 01:14:17 djm Exp $
d61 2
a62 1
		krl
@


1.70
log
@unit and fuzz tests for new key API
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.69 2014/04/30 05:32:00 djm Exp $
d4 1
a4 1
REGRESS_TARGETS=	unit t1 t2 t3 t4 t5 t6 t7 t8 t9
d111 1
a111 1
	ssh-keygen -lf ${.CURDIR}/rsa_openssh.pub |\
d151 4
@


1.69
log
@unit tests for new buffer API; including basic fuzz testing
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.68 2014/01/25 04:35:32 dtucker Exp $
d89 3
a91 1
	(set -e ; cd ${.CURDIR}/unittests ; make)
@


1.68
log
@Add a test for DH GEX sizes
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.67 2013/12/06 13:52:46 markus Exp $
d4 1
a4 1
REGRESS_TARGETS=	t1 t2 t3 t4 t5 t6 t7 t8 t9
d88 3
d175 1
@


1.67
log
@test ed25519 support; from djm@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.66 2013/10/09 23:44:14 djm Exp $
d19 1
@


1.66
log
@regression test for sftp request white/blacklisting and readonly mode.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.65 2013/04/18 02:46:12 djm Exp $
d138 7
@


1.65
log
@test sshd ChrootDirectory+internal-sftp; feedback & ok dtucker@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.64 2013/04/07 02:16:03 dtucker Exp $
d3 1
d40 1
d79 2
a80 1
		regress.log failed-regress.log ssh-log-wrapper.sh
@


1.64
log
@use -E option for ssh and sshd to write debuging logs to ssh{,d}.log and
save the output from any failing tests.  If a test fails the debug output
from ssh and sshd for the failing tests (and only the failing tests) should
be available in failed-ssh{,d}.log.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.63 2013/04/06 06:00:22 dtucker Exp $
d34 1
d79 2
d159 1
@


1.63
log
@Split the regress log into 3 parts: the debug output from ssh, the debug
log from sshd and the output from the client command (ssh, scp or sftp).
Somewhat functional now, will become more useful when ssh/sshd -E is added.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.62 2013/01/18 00:45:29 djm Exp $
d75 2
a76 1
		ssh.log sshd.log regress.log
@


1.62
log
@Tests for Key Revocation Lists (KRLs)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.61 2012/12/11 22:42:11 markus Exp $
d74 2
a75 1
		sshd_proxy.* authorized_keys_${USER}.* revoked-* krl-*
@


1.61
log
@test the integrity of the packets; with djm@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.60 2012/12/02 20:47:48 djm Exp $
d56 2
a57 1
		integrity
d72 1
a72 1
		known_hosts-cert host_ca_key* cert_host_key* \
d74 1
a74 1
		sshd_proxy.* authorized_keys_${USER}.*
@


1.60
log
@regress for AllowTcpForwarding local/remote; ok markus@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.59 2012/11/22 22:49:30 djm Exp $
d55 2
a56 1
		forward-control
d129 4
@


1.59
log
@regress for AuthorizedKeysCommand; hints from markus@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.58 2011/01/06 22:46:21 djm Exp $
d54 2
a55 1
		keys-command
d71 2
a72 1
		authorized_principals_${USER} expect actual
@


1.58
log
@regress test for LocalCommand %n expansion from bert.wesarg AT
googlemail.com; ok markus@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.57 2010/09/22 12:26:05 djm Exp $
d53 2
a54 1
		host-expand
@


1.57
log
@regress test for each of the key exchange algorithms that we support
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.56 2010/09/02 16:12:55 markus Exp $
d52 2
a53 1
		cert-userkey
d69 1
a69 1
		authorized_principals_${USER}
@


1.56
log
@test different key types (dsa, rsa, ecdsa) and sizes for login
and host keys; print time used for each iteration; ok djm@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.55 2010/08/31 12:24:25 djm Exp $
d50 1
d57 1
@


1.55
log
@tests for ECDSA keys
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.54 2010/06/27 19:19:56 phessler Exp $
d49 1
@


1.54
log
@fix how we run the tests so we can successfully use SUDO='sudo -E' in our env
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.53 2010/05/07 11:31:26 djm Exp $
d3 1
a3 1
REGRESS_TARGETS=	t1 t2 t3 t4 t5 t6 t7
d5 2
a6 1
CLEANFILES+=	t2.out t6.out1 t6.out2 t7.out t7.out.pub copy.1 copy.2
d107 14
@


1.53
log
@regress tests for AuthorizedPrincipalsFile and "principals=" key option.
feedback and ok markus@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.52 2010/02/26 20:33:21 djm Exp $
d109 1
a109 1
	env SUDO=${SUDO} ${TEST_ENV} \
@


1.52
log
@regression tests for certified keys
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.51 2010/02/09 06:29:02 djm Exp $
d63 2
a64 1
		known_hosts-cert host_ca_key* cert_host_key*
@


1.51
log
@turn on all the malloc(3) checking options when running regression
tests. this has caught a few bugs for me in the past; ok dtucker@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.50 2009/11/09 04:20:04 dtucker Exp $
d47 3
a49 1
		portnum
d62 2
a63 1
		sshd_proxy_bak rsa_ssh2_cr.prv rsa_ssh2_crnl.prv
@


1.50
log
@add regression test for ssh-keygen pubkey conversions
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.49 2009/08/13 00:57:17 djm Exp $
d62 3
d105 2
a106 1
	env SUDO=${SUDO} sh ${.CURDIR}/test-exec.sh ${.OBJDIR} ${.CURDIR}/${t}.sh
@


1.49
log
@regression test for port number parsing. written as part of the a2port
change that went into 5.2 but I forgot to commit it at the time...
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.48 2008/06/28 13:57:25 djm Exp $
d29 1
@


1.48
log
@very basic regress test against Twisted Conch in "make interop"
target (conch is available in ports/devel/py-twisted/conch);
ok markus@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.47 2008/06/11 23:11:40 dtucker Exp $
d45 2
a46 1
		forcecommand
@


1.47
log
@Don't run cipher-speed test by default; mistakenly enabled by me
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.46 2008/06/10 23:13:43 dtucker Exp $
d47 1
a47 1
INTEROP_TESTS=	putty-transfer putty-ciphers putty-kex
@


1.46
log
@Add regress test for key options.  ok djm@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.45 2008/06/10 05:23:32 dtucker Exp $
a44 1
		cipher-speed \
@


1.45
log
@Regress test for Match CIDR rules.  ok djm@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.44 2007/12/21 04:13:53 djm Exp $
d29 1
d45 1
@


1.44
log
@basic (crypto, kex and transfer) interop regression tests against putty

To run these, install the net/putty port and run "make interop" - the
tests aren't run by default yet.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.43 2007/10/29 06:57:13 dtucker Exp $
d42 1
@


1.43
log
@Add simple regress test for LocalCommand; ok djm@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.42 2006/07/19 13:34:52 dtucker Exp $
d45 4
a57 2
#LTESTS+=	ssh-com ssh-com-client ssh-com-keygen ssh-com-sftp

d96 5
a102 2
t-${t}:
	env SUDO=${SUDO} sh ${.CURDIR}/test-exec.sh ${.OBJDIR} ${.CURDIR}/${t}.sh
d104 11
@


1.42
log
@Add a couple of files missing from the cleanup list
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.41 2006/07/19 13:09:28 dtucker Exp $
d42 1
@


1.41
log
@Add regress test for ForceCommand
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.40 2006/07/17 12:08:02 dtucker Exp $
d50 2
a51 1
		scp-ssh-wrapper.exe ssh_proxy_envpass
@


1.40
log
@Regress test for Match + PermitOpen.  ok djm@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.39 2006/03/13 12:20:38 dtucker Exp $
d41 2
a42 1
		cfgmatch
@


1.39
log
@regress test for various ssh-keygen IETF conversion line terminators; ok djm@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.37 2006/03/13 08:48:28 dtucker Exp $
d40 2
a41 1
		brokenkeys
@


1.38
log
@back out previous
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.36 2005/03/04 08:48:46 djm Exp $
d54 4
@


1.37
log
@regress test for alternate line terminations for IETF key conversion, ok djm@@
@
text
@a53 4
	sed 's/$$/\r/g' ${.CURDIR}/rsa_ssh2.prv > ${OBJ}/rsa_ssh2_crnl.prv
	ssh-keygen -if ${OBJ}/rsa_ssh2_crnl.prv | diff - ${.CURDIR}/rsa_openssh.prv
	tr '\n' '\r' <${.CURDIR}/rsa_ssh2.prv > ${OBJ}/rsa_ssh2_cr.prv
	ssh-keygen -if ${OBJ}/rsa_ssh2_cr.prv | diff - ${.CURDIR}/rsa_openssh.prv
@


1.36
log
@regress test for SendEnv config parsing bug; ok dtucker@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.35 2005/01/14 04:21:18 david Exp $
d54 4
@


1.35
log
@pass the SUDO make variable to the individual sh tests; ok dtucker@@ markus@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.34 2004/12/10 01:31:30 fgsch Exp $
d48 1
a48 1
		scp-ssh-wrapper.exe
@


1.34
log
@some globbing regress; prompted and ok djm@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.33 2004/10/29 23:59:22 djm Exp $
d89 1
a89 1
	sh ${.CURDIR}/test-exec.sh ${.OBJDIR} ${.CURDIR}/${t}.sh
@


1.33
log
@regression test for handling of corrupt keys in authorized_keys file
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.32 2004/07/09 19:45:43 david Exp $
d34 1
@


1.32
log
@add a missing CLEANFILES used in the re-exec test
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.31 2004/06/24 19:32:00 djm Exp $
d38 2
a39 1
		reexec
@


1.31
log
@regress test for re-exec corner cases
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.30 2004/06/13 15:04:08 djm Exp $
d42 1
a42 1
		ssh_config ssh_proxy sshd_config sshd_proxy \
@


1.30
log
@regress test for client multiplexing; ok markus@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.29 2004/06/13 13:51:02 dtucker Exp $
d37 2
a38 1
		multiplex
@


1.29
log
@Add scp regression test; with & ok markus@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.28 2004/04/27 09:47:30 djm Exp $
d36 2
a37 1
		forwarding
@


1.28
log
@regress test for environment passing, SendEnv & AcceptEnv options; ok markus@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.27 2004/02/17 08:23:20 dtucker Exp $
d29 1
d43 2
a44 1
		ls.copy banner.in banner.out empty.in
@


1.27
log
@Add regression test for LoginGraceTime; ok markus@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.26 2003/10/11 11:49:49 dtucker Exp $
d13 1
@


1.26
log
@Test missing banner file, suppression of banner with ssh -q, check return
code from ssh.  ok markus@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.25 2003/10/07 01:52:13 dtucker Exp $
d21 1
@


1.25
log
@Test SSH2 banner.  ok markus@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.24 2003/07/03 08:24:13 markus Exp $
d40 1
a40 1
		ls.copy banner.in banner.out
@


1.24
log
@enable tests for dynamic fwd via socks (-D), uses nc(1)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.23 2003/06/12 15:43:32 markus Exp $
d14 1
d40 1
a40 1
		ls.copy
@


1.23
log
@test -HUP; dtucker at zip.com.au
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.22 2003/04/04 09:34:22 djm Exp $
d31 1
@


1.22
log
@More regression tests, including recent directory rename bug; ok markus@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.21 2003/04/02 12:21:13 markus Exp $
d30 1
@


1.21
log
@enable rekey test
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.20 2003/01/08 23:54:22 djm Exp $
d28 1
@


1.20
log
@More regress tests for sftp, most commands are now exercised as is batchmode
ok markus@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.19 2002/12/09 16:05:02 markus Exp $
d14 1
@


1.19
log
@make sure getpeereid works in the agent; XXX test needs sudo
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.18 2002/12/09 15:38:30 markus Exp $
d26 2
@


1.18
log
@make sure gdb cannot attach to a running agent
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.17 2002/09/02 20:01:44 avsm Exp $
d20 1
@


1.17
log
@Rename a bunch of the old bsd.regress.mk variables into the new ones.

ok art@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.16 2002/07/16 09:14:06 markus Exp $
d21 1
@


1.16
log
@test ssh-keygen -p (change passphrase for key)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.15 2002/06/24 12:48:06 wcobb Exp $
d3 1
a3 1
REGRESSTARGETS=	t1 t2 t3 t4 t5 t6 t7
d70 1
a70 1
REGRESSTARGETS+=t-${t}
@


1.15
log
@clean copy.[12].
ok markus@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.14 2002/06/06 00:38:40 markus Exp $
d22 1
@


1.14
log
@test ssh-agent timeout feature
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.13 2002/04/01 22:15:08 markus Exp $
d5 1
a5 1
CLEANFILES+=	t2.out t6.out1 t6.out2 t7.out t7.out.pub 
@


1.13
log
@sftp interop w/ ssh.com servers
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.12 2002/03/27 22:40:27 markus Exp $
d20 1
@


1.12
log
@test key import
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.11 2002/03/27 00:03:37 markus Exp $
d31 1
a31 1
#LTESTS+=	ssh-com ssh-com-client ssh-com-keygen
@


1.11
log
@transfer data test
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.10 2002/03/26 15:14:33 markus Exp $
d31 1
a31 1
#LTESTS+=	ssh-com ssh-com-client
@


1.10
log
@test interop w/ ssh.com 2.x/3.x
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.9 2002/03/23 16:38:08 markus Exp $
d13 1
@


1.9
log
@some tests for stderr handling
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 2002/03/21 22:27:00 markus Exp $
d30 1
a30 1
#LTESTS+=	ssh-com
@


1.8
log
@basic sftp put/get test
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 2002/03/21 21:45:07 markus Exp $
d13 2
@


1.7
log
@try to (proxy)connect with UsePrivilegeSeparation enabled.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.6 2002/03/15 13:08:56 markus Exp $
d18 1
@


1.6
log
@allow specification of binary-under-test with
	$TEST_SSH_{SSH,SSHD,SSHAGENT,SSHADD,SSHKEYGEN,SSHKEYSCAN}
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.5 2002/02/22 12:31:35 markus Exp $
d9 1
@


1.5
log
@test keyscan as well (test for pr 2354)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 2002/02/18 11:40:42 markus Exp $
d25 2
@


1.4
log
@don't mark tests as slow, have some slow tests print out information by default
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.3 2002/02/15 14:41:38 markus Exp $
d16 1
@


1.3
log
@we don't need a listening sshd for most of our tests, just
connect client and server w/o TCP:
	ssh -o 'proxycommand sshd -i -f $OBJ/sshd_proxy'
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.2 2002/02/14 23:18:00 markus Exp $
a60 1
REGRESSSLOWTARGETS+=t-${t}
@


1.2
log
@serveral tests for ssh-keygen/ssh/sshd/ssh-add/ssh-agent

note that these tests will start sshd on 127.0.0.1:4242
and will fail if the realpath of /usr/src/usr.sbin/ssh/obj/ contains
a group or world writeable directory.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.1 2002/01/17 13:21:28 markus Exp $
d9 2
d20 1
a20 1
		ssh_config sshd_config sshd_config_proxy \
@


1.1
log
@regress for ssh-keygen
@
text
@d1 1
a1 1
#	$OpenBSD: $
d3 1
a3 1
REGRESSTARGETS=t1 t2 t3 t4 t5 t6 t7
d5 17
a21 1
CLEANFILES+=	t2.out t6.out1 t6.out2 t7.out t7.out.pub
d56 7
@

