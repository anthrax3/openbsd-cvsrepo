head	1.18;
access;
symbols
	OPENBSD_6_1:1.16.0.16
	OPENBSD_6_1_BASE:1.16
	OPENBSD_6_0:1.16.0.12
	OPENBSD_6_0_BASE:1.16
	OPENBSD_5_9:1.16.0.2
	OPENBSD_5_9_BASE:1.16
	OPENBSD_5_8:1.16.0.10
	OPENBSD_5_8_BASE:1.16
	OPENBSD_5_7:1.16.0.8
	OPENBSD_5_7_BASE:1.16
	OPENBSD_5_6:1.16.0.6
	OPENBSD_5_6_BASE:1.16
	OPENBSD_5_5:1.16.0.4
	OPENBSD_5_5_BASE:1.16
	OPENBSD_5_4:1.14.0.2
	OPENBSD_5_4_BASE:1.14
	OPENBSD_5_3:1.12.0.6
	OPENBSD_5_3_BASE:1.12
	OPENBSD_5_2:1.12.0.4
	OPENBSD_5_2_BASE:1.12
	OPENBSD_5_1_BASE:1.12
	OPENBSD_5_1:1.12.0.2
	OPENBSD_5_0:1.10.0.4
	OPENBSD_5_0_BASE:1.10
	OPENBSD_4_9:1.10.0.2
	OPENBSD_4_9_BASE:1.10
	OPENBSD_4_8:1.7.0.6
	OPENBSD_4_8_BASE:1.7
	OPENBSD_4_7:1.7.0.2
	OPENBSD_4_7_BASE:1.7
	OPENBSD_4_6:1.7.0.4
	OPENBSD_4_6_BASE:1.7
	OPENBSD_4_5:1.5.0.2
	OPENBSD_4_5_BASE:1.5;
locks; strict;
comment	@.\" @;


1.18
date	2017.05.02.17.51.32;	author schwarze;	state Exp;
branches;
next	1.17;
commitid	FtlVJ0oMhEZGatQH;

1.17
date	2017.04.28.14.11.01;	author schwarze;	state Exp;
branches;
next	1.16;
commitid	yEWzbSsJU36uovFS;

1.16
date	2013.08.21.13.22.03;	author jmc;	state Exp;
branches;
next	1.15;

1.15
date	2013.08.05.07.09.42;	author jmc;	state Exp;
branches;
next	1.14;

1.14
date	2013.07.16.14.18.39;	author schwarze;	state Exp;
branches;
next	1.13;

1.13
date	2013.03.14.21.22.52;	author jmc;	state Exp;
branches;
next	1.12;

1.12
date	2011.10.03.06.58.16;	author jmc;	state Exp;
branches;
next	1.11;

1.11
date	2011.09.17.08.38.26;	author schwarze;	state Exp;
branches;
next	1.10;

1.10
date	2010.12.03.08.06.26;	author jmc;	state Exp;
branches;
next	1.9;

1.9
date	2010.09.01.17.32.53;	author jmc;	state Exp;
branches;
next	1.8;

1.8
date	2010.08.31.21.07.57;	author jmc;	state Exp;
branches;
next	1.7;

1.7
date	2009.04.13.19.06.38;	author jmc;	state Exp;
branches;
next	1.6;

1.6
date	2009.04.13.12.41.27;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2008.11.23.17.07.36;	author jmc;	state Exp;
branches;
next	1.4;

1.4
date	2008.11.03.12.17.01;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2008.11.01.07.49.54;	author jmc;	state Exp;
branches;
next	1.2;

1.2
date	2008.10.31.14.26.56;	author jmc;	state Exp;
branches;
next	1.1;

1.1
date	2008.10.31.14.11.04;	author jmc;	state Exp;
branches;
next	;


desc
@@


1.18
log
@Remove -P (warnings about paragraph problems).
These are fully covered by mandoc -Tlint.
OK jmc@@ wiz@@, and also committed to pkgsrc.
@
text
@.\" $OpenBSD: mdoclint.1,v 1.17 2017/04/28 14:11:01 schwarze Exp $
.\" $NetBSD: mdoclint.1,v 1.15 2017/05/02 13:59:10 wiz Exp $
.\"
.\" Copyright (c) 2001-2013 Thomas Klausner
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR, THOMAS KLAUSNER,
.\" ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
.\" TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
.\" PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE FOUNDATION OR CONTRIBUTORS
.\" BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
.\" CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
.\" SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
.\" INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
.\" CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
.\" ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
.\" POSSIBILITY OF SUCH DAMAGE.
.\"
.Dd $Mdocdate: April 28 2017 $
.Dt MDOCLINT 1
.Os
.Sh NAME
.Nm mdoclint
.Nd man page verifier
.Sh SYNOPSIS
.Nm
.Op Fl aDdeFfHhlmnoprSsvwXx
.Ar
.Sh DESCRIPTION
.Nm
is a man page verifier.
It tries to automatically find as many common
errors that occur when writing man pages as possible.
If no flags are given,
.Fl aDdfmnoprSsXx
is assumed (that is, everything except
.Fl eFHhlvw ) .
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl a
Warn about some possible problems in the
.Sx SEE ALSO
section, like incorrect order (correct order: first by section
numbers, then by name), or incorrect or superfluous punctuation
between or after the cross-references.
.It Fl D
Warn about bad casing and architectures in the .Dt macro.
.It Fl d
Warn about bad date strings (in the .Dd macro).
.It Fl e
Warn about unsorted errors (for functions).
.It Fl F
Fix whitespace problems (see also
.Fl s ) .
.It Fl f
Warn about possible .Fn abuse; its arguments should be put in
.Sq \&"
separately, not together and separated by commas.
Those will be automatically added by mdoc.
.It Fl H
Show warnings for characters that might generate problems in
HTML output:
.Sq \*(Lt
and
.Sq \*(Gt .
Replace a pair of angle quotes with the .Aq macro.
Otherwise, the replacements are
.Dq \e*(Lt
and
.Dq \e*(Gt .
This option is off by default,
as these characters no longer pose any problems.
.It Fl h
Display usage.
.It Fl l
Warn about unknown libraries used as arguments to Lb.
.It Fl m
Warn if man page is not in
.Xr mdoc 7
format.
.It Fl n
Warn when the .Nd macro's argument ends in a dot, that is
.Sq \&. .
.It Fl o
Warn when the .Os macro has an argument (it shouldn't have one at
least in the base system, because on
.Ox
the current version is default).
.It Fl p
Warn about possible punctuation problems at the end of macro arguments,
abuse of .Ns to get punctuation directly next to a word,
and sentences not starting on a new line.
.It Fl r
Warn about missing RCS Id.
.It Fl S
Warn about any unknown sections or about a section that comes in the
wrong order (see
.Xr mdoc 7 ) .
.It Fl s
Warn about superfluous whitespace at the end of line.
.It Fl v
Verbose output.
.It Fl w
Display the section name,
in addition to the relevant line number,
in warnings.
.It Fl X
Warn about explicit mentions of the words
.Dq FreeBSD ,
.Dq NetBSD ,
.Dq DragonFlyBSD ,
and
.Dq OpenBSD ,
which should be replaced by .Fx, .Nx, .Dx, and .Ox respectively.
Also notices occurrences of
.Dq \&.Bx Free ,
.Dq \&.Bx Net ,
.Dq \&.Bx DragonFly ,
and
.Dq \&.Bx Open ,
for which the same applies.
.It Fl x
Warn about cross-references whose target is missing, cross-references
to itself, or plain bogus cross-references.
.Pp
For
.Dq .Xr name X ,
the following files are checked:
.Pa /usr/share/man/manX/name.X ,
.Pa /usr/share/man/manX/`uname -m`/name.X ,
.Pa ./name.X ,
and
.Pa /usr/X11R6/man/manX/name.X .
.El
.Sh SEE ALSO
.Xr mdoc 7
.Sh HISTORY
The
.Nm
utility first appeared in
.Ox 4.5 .
.Sh AUTHORS
.An Thomas Klausner Aq Mt wiz@@netbsd.org
.An Marc Espie Aq Mt espie@@openbsd.org
.Sh BUGS
The
.Fl o
and
.Fl p
flags currently produce too many bogus warnings.
.Pp
The
.Fl x
flag sometimes erroneously warns about xrefs to man pages for
machine-dependent drivers that are not for the architecture
.Nm
is running on.
@


1.17
log
@Start deleting redundant features that are already covered
by mandoc(1) -Tlint, as suggested by the upstream author
and maintainer Thomas Klausner <wiz @@ NetBSD>.
The ultimate goal is to get rid of mdoclint and integrate
all its functionality into mandoc, but that will still take
some time, so simplify mdoclint for the time being.
jmc@@ "go ahead", OK wiz@@, also committed upstream

This first patch removes the AUTHORS check that mandoc does, too.
@
text
@d1 2
a2 2
.\"	$OpenBSD: mdoclint.1,v 1.16 2013/08/21 13:22:03 jmc Exp $
.\" $NetBSD: mdoclint.1,v 1.13 2013/08/21 11:22:15 wiz Exp $
d28 1
a28 1
.Dd $Mdocdate: August 21 2013 $
d36 1
a36 1
.Op Fl aDdeFfHhlmnoPprSsvwXx
d44 1
a44 1
.Fl aDdfmnoPprSsXx
a98 3
.It Fl P
Warn about paragraph problems, like empty lines or .Pp macros before
section macros like .Ss and .Sh.
@


1.16
log
@recognise dragonfly; from jan stary
@
text
@d1 1
a1 1
.\"	$OpenBSD: mdoclint.1,v 1.15 2013/08/05 07:09:42 jmc Exp $
d28 1
a28 1
.Dd $Mdocdate: August 5 2013 $
d36 1
a36 1
.Op Fl AaDdeFfHhlmnoPprSsvwXx
d44 1
a44 1
.Fl AaDdfmnoPprSsXx
a49 6
.It Fl A
Warn if the
.Dq .An
macro (author) markup is not used in the
.Sx AUTHORS
section.
@


1.15
log
@integrate support for an -A option, which warns if an AUTHORS section
does not contain any An macros;

from wiz@@netbsd
@
text
@d1 2
a2 2
.\"	$OpenBSD: mdoclint.1,v 1.14 2013/07/16 14:18:39 schwarze Exp $
.\" $NetBSD: mdoclint.1,v 1.10 2013/07/30 18:50:07 wiz Exp $
d28 1
a28 1
.Dd $Mdocdate: July 16 2013 $
d130 1
d133 1
a133 1
which should be replaced by .Fx, .Nx, and .Ox respectively.
d137 1
@


1.14
log
@use .Mt for email addresses; from Jan Stary <hans at stare dot cz>
@
text
@d1 2
a2 2
.\"	$OpenBSD: mdoclint.1,v 1.13 2013/03/14 21:22:52 jmc Exp $
.\"	$NetBSD: mdoclint.1,v 1.2 2009/04/13 22:18:13 wiz Exp $
d28 1
a28 1
.Dd $Mdocdate: March 14 2013 $
d36 1
a36 1
.Op Fl aDdeFfHhlmnoPprSsvwXx
d44 1
a44 1
.Fl aDdfmnoPprSsXx
d50 6
@


1.13
log
@sync with -r1.22: add an -l option, to check library names in Lb; this is
off by default on openbsd, and the libraries checked are netbsd ones (we
can tweak this later if we ever want to start using Lb)

also rolls in 1.2{3,6,7,8}, which simply added some libraries to the list.
@
text
@d1 1
a1 1
.\"	$OpenBSD: mdoclint.1,v 1.12 2011/10/03 06:58:16 jmc Exp $
d28 1
a28 1
.Dd $Mdocdate: October 3 2011 $
d154 2
a155 4
.An Thomas Klausner
.Aq wiz@@netbsd.org
.An Marc Espie
.Aq espie@@openbsd.org
@


1.12
log
@when checking Xrs, look in man* subdirs, not cat*;
code diff from wiz@@netbsd
@
text
@d1 1
a1 1
.\"	$OpenBSD: mdoclint.1,v 1.11 2011/09/17 08:38:26 schwarze Exp $
d4 1
a4 1
.\" Copyright (c) 2001-2010 Thomas Klausner
d28 1
a28 1
.Dd $Mdocdate: September 17 2011 $
d36 1
a36 1
.Op Fl aDdeFfHhmnoPprSsvwXx
d46 1
a46 1
.Fl eFHhvw ) .
d85 2
@


1.11
log
@remove mdoc.samples(7): all info already is in mdoc(7)
feedback and ok  jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: mdoclint.1,v 1.10 2010/12/03 08:06:26 jmc Exp $
d28 1
a28 1
.Dd $Mdocdate: December 3 2010 $
d138 2
a139 2
.Pa /usr/share/man/catX/name.0 ,
.Pa /usr/share/man/catX/`uname -m`/name.0 ,
a140 1
.Pa /usr/X11R6/man/catX/name.0 ,
@


1.10
log
@turn off -H by default (<> warning), since mandoc does not have the same
html issues as nroff did;

from Thomas Klausner
@
text
@d1 1
a1 1
.\"	$OpenBSD: mdoclint.1,v 1.9 2010/09/01 17:32:53 jmc Exp $
d28 1
a28 1
.Dd $Mdocdate: September 1 2010 $
d146 1
a146 2
.Xr mdoc 7 ,
.Xr mdoc.samples 7
@


1.9
log
@some very minor tweaks to bring us in line with mdoclint -r1.12 and
mdoclint.1 -r1.2; some minor os-specific differences remain
@
text
@d1 1
a1 1
.\"	$OpenBSD: mdoclint.1,v 1.8 2010/08/31 21:07:57 jmc Exp $
d28 1
a28 1
.Dd $Mdocdate: August 31 2010 $
d44 1
a44 1
.Fl aDdfHmnoPprSsXx
d46 1
a46 1
.Fl eFhvw ) .
d81 2
@


1.8
log
@put .Os in the right place;
@
text
@d1 2
a2 2
.\"	$OpenBSD: mdoclint.1,v 1.7 2009/04/13 19:06:38 jmc Exp $
.\" $NetBSD: mdoclint.1,v 1.3 2003/05/09 09:22:05 wiz Exp $
d4 1
a4 1
.\" Copyright (c) 2001-2008 Thomas Klausner
d28 1
a28 1
.Dd $Mdocdate: April 13 2009 $
d59 1
a59 3
Warn about .Dd strings
that don't start
.Dq .Dd $\&Mdocdate .
@


1.7
log
@document -w; ok espie wiz@@netbsd
@
text
@d1 1
a1 1
.\"	$OpenBSD: mdoclint.1,v 1.6 2009/04/13 12:41:27 espie Exp $
d29 1
a30 1
.Dt MDOCLINT 1
@


1.6
log
@Add myself to AUTHORS list, as suggested by Thomas.

Always cool to see email addresses @@netbsd/@@openbsd in the same program ;)
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d28 1
a28 1
.Dd $Mdocdate$
d36 1
a36 1
.Op Fl aDdeFfHhmnoPprSsvXx
d46 1
a46 1
.Fl eFhv ) .
d114 4
@


1.5
log
@expand -p to warn about "new sentence, new line" errors;
from wiz@@netbsd
@
text
@d1 1
a1 1
.\"	$OpenBSD: mdoclint.1,v 1.4 2008/11/03 12:17:01 espie Exp $
d28 1
a28 1
.Dd $Mdocdate: November 3 2008 $
d152 2
@


1.4
log
@handle Xrefs to XFree as well
okay grunk@@, jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: mdoclint.1,v 1.3 2008/11/01 07:49:54 jmc Exp $
d4 1
a4 1
.\" Copyright (c) 2001, 2002, 2003 Thomas Klausner
d28 1
a28 1
.Dd $Mdocdate: November 1 2008 $
d101 3
a103 4
Warn about possible punctuation problems at the end of macro
arguments.
Also warns about abuse of .Ns to get punctuation directly next to a
word \(en this should not be needed.
@


1.3
log
@- since mdocdate fills in the date automatically, we no longer have to check
that a valid date is entered. instead, just make sure there is an
mdocdate tag there. saves us bumping the year too. ok millert
- adjust man page accordingly
- remove -e from default options list in usage()
- add a HISTORY section
@
text
@d1 1
a1 1
.\"	$OpenBSD: mdoclint.1,v 1.2 2008/10/31 14:26:56 jmc Exp $
d28 1
a28 1
.Dd $Mdocdate: October 31 2008 $
d137 2
d140 1
a140 1
.Pa ./name.X .
@


1.2
log
@turn off -e by default, since we do not currently sort the errors
in the man page;
@
text
@d1 1
a1 1
.\"	$OpenBSD: mdoclint.1,v 1.1 2008/10/31 14:11:04 jmc Exp $
d59 3
a61 1
Warn about bad date strings (in the .Dd macro).
d143 5
@


1.1
log
@add mdoclint, a perl script for checking man pages;
not hooked up to the build, since there are no tests;

from wiz@@netbsd
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d28 1
a28 1
.Dd $Mdocdate$
d44 1
a44 1
.Fl aDdefHmnoPprSsXx
d46 1
a46 1
.Fl Fhv ) .
@

