head	1.22;
access;
symbols
	OPENBSD_6_2_BASE:1.22
	OPENBSD_6_1:1.21.0.12
	OPENBSD_6_1_BASE:1.21
	OPENBSD_6_0:1.21.0.8
	OPENBSD_6_0_BASE:1.21
	OPENBSD_5_9:1.21.0.2
	OPENBSD_5_9_BASE:1.21
	OPENBSD_5_8:1.21.0.6
	OPENBSD_5_8_BASE:1.21
	OPENBSD_5_7:1.21.0.4
	OPENBSD_5_7_BASE:1.21
	OPENBSD_5_6:1.20.0.20
	OPENBSD_5_6_BASE:1.20
	OPENBSD_5_5:1.20.0.18
	OPENBSD_5_5_BASE:1.20
	OPENBSD_5_4:1.20.0.14
	OPENBSD_5_4_BASE:1.20
	OPENBSD_5_3:1.20.0.12
	OPENBSD_5_3_BASE:1.20
	OPENBSD_5_2:1.20.0.10
	OPENBSD_5_2_BASE:1.20
	OPENBSD_5_1_BASE:1.20
	OPENBSD_5_1:1.20.0.8
	OPENBSD_5_0:1.20.0.6
	OPENBSD_5_0_BASE:1.20
	OPENBSD_4_9:1.20.0.4
	OPENBSD_4_9_BASE:1.20
	OPENBSD_4_8:1.20.0.2
	OPENBSD_4_8_BASE:1.20
	OPENBSD_4_7:1.19.0.20
	OPENBSD_4_7_BASE:1.19
	OPENBSD_4_6:1.19.0.22
	OPENBSD_4_6_BASE:1.19
	OPENBSD_4_5:1.19.0.18
	OPENBSD_4_5_BASE:1.19
	OPENBSD_4_4:1.19.0.16
	OPENBSD_4_4_BASE:1.19
	OPENBSD_4_3:1.19.0.14
	OPENBSD_4_3_BASE:1.19
	OPENBSD_4_2:1.19.0.12
	OPENBSD_4_2_BASE:1.19
	OPENBSD_4_1:1.19.0.10
	OPENBSD_4_1_BASE:1.19
	OPENBSD_4_0:1.19.0.8
	OPENBSD_4_0_BASE:1.19
	OPENBSD_3_9:1.19.0.6
	OPENBSD_3_9_BASE:1.19
	OPENBSD_3_8:1.19.0.4
	OPENBSD_3_8_BASE:1.19
	OPENBSD_3_7:1.19.0.2
	OPENBSD_3_7_BASE:1.19
	OPENBSD_3_6:1.18.0.2
	OPENBSD_3_6_BASE:1.18
	OPENBSD_3_5:1.17.0.2
	OPENBSD_3_5_BASE:1.17
	OPENBSD_3_4:1.16.0.4
	OPENBSD_3_4_BASE:1.16
	OPENBSD_3_3:1.16.0.2
	OPENBSD_3_3_BASE:1.16
	OPENBSD_3_2:1.15.0.2
	OPENBSD_3_2_BASE:1.15
	OPENBSD_3_1:1.12.0.2
	OPENBSD_3_1_BASE:1.12
	OPENBSD_3_0:1.7.0.2
	OPENBSD_3_0_BASE:1.7
	OPENBSD_2_9:1.4.0.2
	OPENBSD_2_9_BASE:1.4
	OPENBSD_2_8:1.3.0.2
	OPENBSD_2_8_BASE:1.3
	OPENBSD_2_7:1.2.0.2
	OPENBSD_2_7_BASE:1.2
	OPENBSD_2_6:1.1.1.1.0.14
	OPENBSD_2_6_BASE:1.1.1.1
	OPENBSD_2_5:1.1.1.1.0.12
	OPENBSD_2_5_BASE:1.1.1.1
	OPENBSD_2_4:1.1.1.1.0.10
	OPENBSD_2_4_BASE:1.1.1.1
	OPENBSD_2_3:1.1.1.1.0.8
	OPENBSD_2_3_BASE:1.1.1.1
	OPENBSD_2_2:1.1.1.1.0.6
	OPENBSD_2_2_BASE:1.1.1.1
	OPENBSD_2_1:1.1.1.1.0.4
	OPENBSD_2_1_BASE:1.1.1.1
	OPENBSD_2_0:1.1.1.1.0.2
	OPENBSD_2_0_BASE:1.1.1.1
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.22
date	2017.07.07.23.55.21;	author bluhm;	state Exp;
branches;
next	1.21;
commitid	HPFM3FepOktcWNt0;

1.21
date	2014.11.24.01.12.14;	author schwarze;	state Exp;
branches;
next	1.20;
commitid	nyhYEjLPOqqgN3iT;

1.20
date	2010.06.28.16.03.15;	author phessler;	state Exp;
branches;
next	1.19;

1.19
date	2005.02.05.10.39.50;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2004.07.20.06.25.40;	author david;	state Exp;
branches;
next	1.17;

1.17
date	2004.02.21.19.07.29;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2002.12.04.05.03.02;	author art;	state Exp;
branches;
next	1.15;

1.15
date	2002.09.03.11.18.29;	author avsm;	state Exp;
branches;
next	1.14;

1.14
date	2002.09.02.22.37.18;	author avsm;	state Exp;
branches;
next	1.13;

1.13
date	2002.09.02.19.56.55;	author avsm;	state Exp;
branches;
next	1.12;

1.12
date	2002.02.23.01.25.10;	author art;	state Exp;
branches;
next	1.11;

1.11
date	2002.02.18.10.16.30;	author art;	state Exp;
branches;
next	1.10;

1.10
date	2002.02.18.10.16.01;	author art;	state Exp;
branches;
next	1.9;

1.9
date	2002.02.05.21.48.04;	author matthieu;	state Exp;
branches;
next	1.8;

1.8
date	2002.01.04.22.40.04;	author art;	state Exp;
branches;
next	1.7;

1.7
date	2001.09.06.20.55.02;	author todd;	state Exp;
branches;
next	1.6;

1.6
date	2001.08.01.21.46.09;	author markus;	state Exp;
branches;
next	1.5;

1.5
date	2001.06.04.23.08.18;	author millert;	state Exp;
branches;
next	1.4;

1.4
date	2001.01.29.02.05.33;	author niklas;	state Exp;
branches;
next	1.3;

1.3
date	2000.07.01.00.32.35;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2000.04.01.03.41.46;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.49.29;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.49.29;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.22
log
@Remove all references to "make depend" from regress.
@
text
@#	$OpenBSD: Makefile,v 1.21 2014/11/24 01:12:14 schwarze Exp $

#
# To run full regression tests you just need one step:
# make regress
#
# A normal "make" is not necessary and will simply do the same thing
# as "regress" (possibly with more bugs). This allows us to include
# compilation as a part of the regression test.
#
# To get a log of test results set the REGRESS_LOG make variable to
# a log file, use an absolute path.
# To mail the test results set the REGRESS_MAIL make variable to an
# email address.
# To skip the really slow tests, set the REGRESS_SKIP_SLOW variable.

SUBDIR+= etc bin include lib libexec sbin sys usr.bin usr.sbin misc gnu

install:

REGRESS_MAIL?=

.if !empty(REGRESS_MAIL)
_REGRESS_TMP!=/usr/bin/mktemp
.endif

.if empty(REGRESS_MAIL) || empty(_REGRESS_TMP)
_REGRESS_TMP=
_REGRESS_CLEAN=exit 0
.else
_REGRESS_CLEAN=rm -f ${_REGRESS_TMP}
.endif
MAKE_FLAGS+= _REGRESS_TMP=${_REGRESS_TMP}

.INTERRUPT:
	${_REGRESS_CLEAN}

.END: .SILENT
.if ${.TARGETS:Mall} || ${.TARGETS:Mregress} 
	echo ====================================================================
.if empty(REGRESS_MAIL) || empty(_REGRESS_TMP)
	echo You can set REGRESS_LOG to point to a file and mail it manually.
	echo $$ make REGRESS_LOG=/var/log/regress-tests regress
.else
	echo Mailing regress results to ${REGRESS_MAIL} ...
	echo If you want them to be also logged locally, you can set the
	echo REGRESS_LOG make variable to the full path of a log file.
	(sysctl -n kern.version && cat ${_REGRESS_TMP}) | /usr/bin/mail -s "Regress: `uname -a`" ${REGRESS_MAIL}
.endif
	echo ====================================================================
	${_REGRESS_CLEAN}
.endif

.include <bsd.subdir.mk>
@


1.21
log
@Kill old crap that is unbelievably slow and produces hundreds of false
positives.  Fixing it is not worth the hassle; if we want something
like this, it ought to be done in the context of makewhatis(8) and
mandoc.db(5).  As it stands, its only effect is to discourage people
from running our regression suite, which is bad.  I got a report
from daniel@@ that part of it even crashes.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.20 2010/06/28 16:03:15 phessler Exp $
d4 2
a5 3
# To run full regression tests you just need two steps:
# 1. make depend
# 2. make regress
@


1.20
log
@Don't ask people to send regress logs to a non-existant email address.

OK deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.19 2005/02/05 10:39:50 espie Exp $
d18 1
a18 1
SUBDIR+= etc bin include lib libexec sbin sys share usr.bin usr.sbin misc gnu
@


1.19
log
@introduce explicit MAKE_FLAGS variable, which has no surprising behavior
dependent on make, and fixes the regress problem reported by David Krause.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.18 2004/07/20 06:25:40 david Exp $
d15 1
a15 1
# email address, preferably 'regress@@openbsd.org'.
a42 6
#	echo Please mail a copy of these regression tests to regress@@openbsd.org
#	echo to help with future development.
#	echo
#	echo You can do this automatically by setting the REGRESS_MAIL variable
#	echo $$ make REGRESS_MAIL=regress@@openbsd.org regress
#	echo
@


1.18
log
@we can add the gnu directory to the regress build now
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.17 2004/02/21 19:07:29 espie Exp $
d34 1
a34 1
.MAKEFLAGS+= _REGRESS_TMP=${_REGRESS_TMP}
@


1.17
log
@First regression test for pkg_add, checking packages-specs lists.
(the nice thing about having this as perl modules is that we CAN write
regression tests)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.16 2002/12/04 05:03:02 art Exp $
d18 1
a18 1
SUBDIR+= etc bin include lib libexec sbin sys share usr.bin usr.sbin misc
@


1.16
log
@add misc
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.15 2002/09/03 11:18:29 avsm Exp $
d18 1
a18 1
SUBDIR+= etc bin include lib libexec sbin sys share usr.bin misc
@


1.15
log
@trim some whitespace in the mail subject
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.14 2002/09/02 22:37:18 avsm Exp $
d18 1
a18 1
SUBDIR+= etc bin include lib libexec sbin sys share usr.bin
@


1.14
log
@comment out the mailing suggestions, since the address doesnt exist yet
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.13 2002/09/02 19:56:55 avsm Exp $
d55 1
a55 1
	(sysctl -n kern.version && cat ${_REGRESS_TMP}) | /usr/bin/mail -s "Regress:  `uname -a`" ${REGRESS_MAIL}
@


1.13
log
@- Precede internal bsd.regress.mk variables with a _
- Rename old variables to be easier to read, and deprecate old
variables.  The old variables will still work, but emit warnings.
- REGRESS_SKIP_SLOW only needs to be non-empty now, not explicitly
set to 'yes'
- REGRESS_LOG can contain more than one file to append results to
- ERRORS variable can be set in Makefile to emit warnings or indicate
fatal errors.
- Add REGRESS_MAIL variable which can be set to an email address to
send results to.  Currently this only works for a full regression
run, since art doesnt want partial run results
- sync bsd.regress.mk(5) with these changes

ok art@@ , also looked over by miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.12 2002/02/23 01:25:10 art Exp $
d43 7
a49 7
	echo Please mail a copy of these regression tests to regress@@openbsd.org
	echo to help with future development.
	echo
	echo You can do this automatically by setting the REGRESS_MAIL variable
	echo $$ make REGRESS_MAIL=regress@@openbsd.org regress
	echo
	echo You can also set REGRESS_LOG to point to a file and mail it manually.
@


1.12
log
@no more need to explicitly specify regress: _SUBDIRUSE targets anymore.
XXX - what about the install targets?
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.11 2002/02/18 10:16:30 art Exp $
d12 1
a12 1
# To get a log of test results set the REGRESSLOG make variable to
d14 3
a16 1
# To skip the really slow tests, set the REGRESSSKIPSLOW variable.
d21 39
@


1.11
log
@Actually, remove the whole "missing" line.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.10 2002/02/18 10:16:01 art Exp $
a16 2

regress: _SUBDIRUSE
@


1.10
log
@Remove some parts that are there from the "missing" line.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.9 2002/02/05 21:48:04 matthieu Exp $
a14 2

# missing: usr.sbin games gnu
@


1.9
log
@regress has a libexec subdir now.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 2002/01/04 22:40:04 art Exp $
d16 1
a16 1
# missing: bin usr.sbin share games gnu
@


1.8
log
@Document some.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 2001/09/06 20:55:02 todd Exp $
d16 1
a16 1
# missing: libexec bin usr.sbin share games gnu
d18 1
a18 1
SUBDIR+= etc bin include lib sbin sys share usr.bin
@


1.7
log
@add MAKEDEV regress
@
text
@d1 14
a14 2
#	$OpenBSD: Makefile,v 1.6 2001/08/01 21:46:09 markus Exp $
#	$NetBSD: Makefile,v 1.5 1995/04/20 22:37:12 cgd Exp $
@


1.6
log
@enable regress for sbin/pfctl
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.5 2001/06/04 23:08:18 millert Exp $
d6 1
a6 1
SUBDIR+= bin include lib sbin sys share usr.bin
@


1.5
log
@trivial regression tests for md5/sha1/rmd160 driver
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 2001/01/29 02:05:33 niklas Exp $
d4 1
a4 1
# missing: libexec sbin usr.bin usr.sbin share games gnu
d6 1
a6 1
SUBDIR+= bin include lib sys share usr.bin
@


1.4
log
@$OpenBSD$
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.5 1995/04/20 22:37:12 cgd Exp $
d4 1
a4 1
# missing: bin libexec sbin usr.bin usr.sbin share games gnu
d6 1
a6 1
SUBDIR+= include lib sys share usr.bin
@


1.3
log
@+ usr.bin
@
text
@d1 1
@


1.2
log
@some man page tree checking tools from tchrist@@perl.com
@
text
@d5 1
a5 1
SUBDIR+= include lib sys share
@


1.1
log
@Initial revision
@
text
@d5 1
a5 1
SUBDIR+= include lib sys
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
