head	1.3;
access;
symbols;
locks; strict;
comment	@# @;


1.3
date	2002.08.31.22.56.01;	author mickey;	state dead;
branches;
next	1.2;

1.2
date	2002.07.27.08.01.31;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	2002.07.27.06.52.37;	author mickey;	state Exp;
branches;
next	;


desc
@@


1.3
log
@a combined non-exec test set.
allows reusing same testing code for:
- text & mprotect (not finished, not enabled);
- data, data & mprotect;
- bss, bss & mprotect;
- heap, heap & mprotect;
- stack, stack & mprotect.
also a test for mmaping pages in those areas
and see how it allows execution (suggested by art@@),
not enabled yet.
all tested on i386 and hppa.
@
text
@#	$OpenBSD: Makefile,v 1.2 2002/07/27 08:01:31 deraadt Exp $

.if ${MACHINE} == "sparc64" || ${MACHINE} == "sparc" || \
    ${MACHINE} == "alpha" || ${MACHINE} == "macppc" || \
    ${MACHINE} == "mvmeppc" || ${MACHINE} == "i386" || \
    ${MACHINE} == "hppa"

PROG=	nxstack-mprotect
LDSTATIC= ${STATIC}

.else
REGRESSTARGETS=		# this architecture has no test for this
.endif

.include <bsd.regress.mk>
@


1.2
log
@limit this to the right architectures
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.1 2002/07/27 06:52:37 mickey Exp $
@


1.1
log
@test for mprotect() on the stack area: try force execable mapping on it first, and it should run a code on the stack fine; then lower the protection to non-exec and observe a sigfault. fail contraccordingly
@
text
@d1 6
a6 1
#	$OpenBSD$
d10 4
@

