head     1.1;
branch   1.1.1;
access   ;
symbols  LLVM_5_0_0:1.1.1.1 LLVM:1.1.1;
locks    ; strict;
comment  @ * @;
expand   @o@;


1.1
date     2017.10.04.20.27.40;  author patrick;  state Exp;
branches 1.1.1.1;
next     ;
commitid        ufzi3t8MqoilCPqO;

1.1.1.1
date     2017.10.04.20.27.40;  author patrick;  state Exp;
branches ;
next     ;
commitid        ufzi3t8MqoilCPqO;


desc
@@



1.1
log
@Initial revision
@
text
@#include <unistd.h>
#include <stdio.h>
#include <signal.h>

static int sigchld_no;
static int nosig_no;
static int weird_value;

void
sigchld_handler (int signo)
{
  sigchld_no++;
  printf ("Got sigchld %d.\n", sigchld_no);
}

int
call_me (int some_value)
{
  int ret_val = 0;
  int i;
  for (i = 0; i < some_value; i++)
    {
      int result = 0;
      if (i%2 == 0)
          result = kill (getpid(), SIGCHLD);
      else
        sigchld_no++;

      usleep(1000);
      if (result == 0)
        ret_val++;
    }
  usleep (10000);
  return ret_val;
}

int
call_me_nosig (int some_value)
{
  int ret_val = 0;
  int i;
  for (i = 0; i < some_value; i++)
    weird_value += i % 4;

  nosig_no += some_value;
  return some_value;
}

int 
main ()
{
  int ret_val;
  signal (SIGCHLD, sigchld_handler);
  
  ret_val = call_me (2);  // Stop here in main.

  ret_val = call_me_nosig (10);

  return 0;

}
@


1.1.1.1
log
@Import LLVM 5.0.0 release including clang, lld and lldb.
@
text
@@
