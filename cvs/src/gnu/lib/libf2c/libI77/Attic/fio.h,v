head	1.4;
access;
symbols
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.30
	OPENBSD_5_0:1.3.0.28
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.3.0.26
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.24
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.20
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.22
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.18
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.16
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.14
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.3.0.12
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.3.0.10
	OPENBSD_4_1_BASE:1.3
	OPENBSD_4_0:1.3.0.8
	OPENBSD_4_0_BASE:1.3
	OPENBSD_3_9:1.3.0.6
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.3.0.4
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.3.0.2
	OPENBSD_3_7_BASE:1.3
	gcc-3_3_5:1.1.1.2
	OPENBSD_3_6:1.1.1.1.0.4
	OPENBSD_3_6_BASE:1.1.1.1
	OPENBSD_3_5:1.1.1.1.0.2
	OPENBSD_3_5_BASE:1.1.1.1
	gcc-3_3_2:1.1.1.1
	FSF:1.1.1;
locks; strict;
comment	@ * @;


1.4
date	2012.04.14.06.01.40;	author jsg;	state dead;
branches;
next	1.3;

1.3
date	2004.12.30.17.35.27;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2004.12.24.22.33.13;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2004.02.29.19.27.14;	author drahn;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.02.29.19.27.14;	author drahn;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2004.12.24.22.07.27;	author espie;	state Exp;
branches;
next	;


desc
@@


1.4
log
@remove libf2c, hasn't been built since it was moved to ports in 2010.
ok miod@@ espie@@
@
text
@#include <sys/types.h>
#include <stdio.h>
#include <errno.h>
#ifndef NULL
/* ANSI C */
#include <stddef.h>
#endif
#ifdef STDC_HEADERS
#include <string.h>
#endif

#ifndef SEEK_SET
#define SEEK_SET 0
#define SEEK_CUR 1
#define SEEK_END 2
#endif

/* Only use fseeko/ftello if they are both there.  */

#if defined (HAVE_FSEEKO) && defined (HAVE_FTELLO)
#define FSEEK fseeko
#define FTELL ftello
#else
#define FSEEK fseek
#define FTELL ftell
#endif

#if defined (MSDOS) && !defined (GO32)
#ifndef NON_UNIX_STDIO
#define NON_UNIX_STDIO
#endif
#endif

#ifdef UIOLEN_int
typedef int uiolen;
#else
typedef long uiolen;
#endif

/*units*/
typedef struct
{
  FILE *ufd;			/*0=unconnected */
  char *ufnm;
#if !(defined (MSDOS) && !defined (GO32))
  long uinode;
  int udev;
#endif
  int url;			/*0=sequential */
  flag useek;			/*true=can backspace, use dir, ... */
  flag ufmt;
  flag urw;			/* (1 for can read) | (2 for can write) */
  flag ublnk;
  flag uend;
  flag uwrt;			/*last io was write */
  flag uscrtch;
}
unit;

extern int f__init;
extern cilist *f__elist;	/*active external io list */
extern flag f__reading, f__external, f__sequential, f__formatted;
extern int (*f__getn) (void);	/* for formatted input */
extern void (*f__putn) (int);	/* for formatted output */
extern void x_putc (int);
extern long f__inode (char *, int *);
extern void sig_die (char *, int);
extern void f__fatal (int, char *);
extern int t_runc (alist *);
extern int f__nowreading (unit *), f__nowwriting (unit *);
extern int fk_open (int, int, ftnint);
extern int en_fio (void);
extern void f_init (void);
extern int (*f__donewrec) (void), t_putc (int), x_wSL (void);
extern void b_char (char *, char *, ftnlen), g_char (char *, ftnlen, char *);
extern int c_sfe (cilist *), z_rnew (void);
extern int isatty (int);
extern int err__fl (int, int, char *);
extern int xrd_SL (void);
extern int f__putbuf (int);
extern int (*f__doend) (void);
extern FILE *f__cf;		/*current file */
extern unit *f__curunit;	/*current unit */
extern unit f__units[];
#define err(f,m,s) do {if(f) {f__init &= ~2; errno= m;} else f__fatal(m,s); return(m);} while(0)
#define errfl(f,m,s) do {return err__fl((int)f,m,s);} while(0)

/*Table sizes*/
#define MXUNIT 100

extern int f__recpos;		/*position in current record */
extern int f__cursor;		/* offset to move to */
extern int f__hiwater;		/* so TL doesn't confuse us */

#define WRITE	1
#define READ	2
#define SEQ	3
#define DIR	4
#define FMT	5
#define UNF	6
#define EXT	7
#define INT	8

#define buf_end(x) (x->_flag & _IONBF ? x->_ptr : x->_base + BUFSIZ)
@


1.3
log
@Actual synch with 3.3.5.

Changes in Makefile.bsd-wrapper to avoid prereq.

Fix in lib*/config.h.in to include the right ones and get the correct
definitions.

Bump of shlib_version accordingly.
@
text
@@


1.2
log
@result from merge... highly weird, since dale mixed things up
and we're going back, as his libf2c 3.3.2 is actually libf2c 3.2.3.
@
text
@d42 3
a44 2
{	FILE *ufd;	/*0=unconnected*/
	char *ufnm;
d46 2
a47 2
	long uinode;
	int udev;
d49 10
a58 9
	int url;	/*0=sequential*/
	flag useek;	/*true=can backspace, use dir, ...*/
	flag ufmt;
	flag urw;	/* (1 for can read) | (2 for can write) */
	flag ublnk;
	flag uend;
	flag uwrt;	/*last io was write*/
	flag uscrtch;
} unit;
d61 23
a83 42
extern cilist *f__elist;	/*active external io list*/
extern flag f__reading,f__external,f__sequential,f__formatted;
#undef Void
#ifdef KR_headers
#define Void /*void*/
extern int (*f__getn)();	/* for formatted input */
extern void (*f__putn)();	/* for formatted output */
extern void x_putc();
extern long f__inode();
extern VOID sig_die();
extern int (*f__donewrec)(), t_putc(), x_wSL();
extern int c_sfe(), err__fl(), xrd_SL(), f__putbuf();
#else
#define Void void
#ifdef __cplusplus
extern "C" {
#endif
extern int (*f__getn)(void);	/* for formatted input */
extern void (*f__putn)(int);	/* for formatted output */
extern void x_putc(int);
extern long f__inode(char*,int*);
extern void sig_die(char*,int);
extern void f__fatal(int,char*);
extern int t_runc(alist*);
extern int f__nowreading(unit*), f__nowwriting(unit*);
extern int fk_open(int,int,ftnint);
extern int en_fio(void);
extern void f_init(void);
extern int (*f__donewrec)(void), t_putc(int), x_wSL(void);
extern void b_char(char*,char*,ftnlen), g_char(char*,ftnlen,char*);
extern int c_sfe(cilist*), z_rnew(void);
extern int isatty(int);
extern int err__fl(int,int,char*);
extern int xrd_SL(void);
extern int f__putbuf(int);
#ifdef __cplusplus
	}
#endif
#endif
extern int (*f__doend)(Void);
extern FILE *f__cf;	/*current file*/
extern unit *f__curunit;	/*current unit*/
d91 3
a93 3
extern int f__recpos;	/*position in current record*/
extern int f__cursor;	/* offset to move to */
extern int f__hiwater;	/* so TL doesn't confuse us */
@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@Import of libf2c from gcc3.3.2
@
text
@@


1.1.1.2
log
@gcc 3.3.5 update
@
text
@d42 2
a43 3
{
  FILE *ufd;			/*0=unconnected */
  char *ufnm;
d45 2
a46 2
  long uinode;
  int udev;
d48 9
a56 10
  int url;			/*0=sequential */
  flag useek;			/*true=can backspace, use dir, ... */
  flag ufmt;
  flag urw;			/* (1 for can read) | (2 for can write) */
  flag ublnk;
  flag uend;
  flag uwrt;			/*last io was write */
  flag uscrtch;
}
unit;
d59 42
a100 23
extern cilist *f__elist;	/*active external io list */
extern flag f__reading, f__external, f__sequential, f__formatted;
extern int (*f__getn) (void);	/* for formatted input */
extern void (*f__putn) (int);	/* for formatted output */
extern void x_putc (int);
extern long f__inode (char *, int *);
extern void sig_die (char *, int);
extern void f__fatal (int, char *);
extern int t_runc (alist *);
extern int f__nowreading (unit *), f__nowwriting (unit *);
extern int fk_open (int, int, ftnint);
extern int en_fio (void);
extern void f_init (void);
extern int (*f__donewrec) (void), t_putc (int), x_wSL (void);
extern void b_char (char *, char *, ftnlen), g_char (char *, ftnlen, char *);
extern int c_sfe (cilist *), z_rnew (void);
extern int isatty (int);
extern int err__fl (int, int, char *);
extern int xrd_SL (void);
extern int f__putbuf (int);
extern int (*f__doend) (void);
extern FILE *f__cf;		/*current file */
extern unit *f__curunit;	/*current unit */
d108 3
a110 3
extern int f__recpos;		/*position in current record */
extern int f__cursor;		/* offset to move to */
extern int f__hiwater;		/* so TL doesn't confuse us */
@

