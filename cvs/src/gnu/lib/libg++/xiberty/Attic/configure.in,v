head	1.4;
access;
symbols
	OPENBSD_2_5:1.3.0.6
	OPENBSD_2_5_BASE:1.3
	OPENBSD_2_4:1.3.0.4
	OPENBSD_2_4_BASE:1.3
	OPENBSD_2_3:1.3.0.2
	OPENBSD_2_3_BASE:1.3
	FSF_2_8_0:1.1.1.1
	FSF:1.1.1;
locks; strict;
comment	@# @;


1.4
date	99.05.26.16.39.49;	author espie;	state dead;
branches;
next	1.3;

1.3
date	98.03.03.21.50.34;	author millert;	state Exp;
branches;
next	1.2;

1.2
date	98.03.03.20.43.24;	author millert;	state dead;
branches;
next	1.1;

1.1
date	98.03.03.20.25.17;	author millert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.03.03.20.25.17;	author millert;	state Exp;
branches;
next	;


desc
@@


1.4
log
@old libg++, replaced by part of egcs.
@
text
@# This file is a shell script fragment that supplies the information
# necessary for a configure script to process the program in
# this directory.  For more information, look at ../configure.

# We need multilib support.
. ${srcdir}/../cfg-ml-com.in

configdirs=
srctrigger=../libiberty/getopt1.c
srcname="cross -liberty library"
Makefile_in=../libiberty/Makefile.in

case "$srcdir" in
    ".") ;;
    *) srcdir=${srcdir}/../libiberty ;;
esac

# per-host:

# per-target:

files="../libiberty/alloca-norm.h"
links="alloca-conf.h"

xhost=${target}
xsrcdir=../libiberty/
. ${srcdir}/../libiberty/config.table
target_makefile_frag=${frag}

case "$srcdir" in
    ".")
	# Make sure we also make links to all the source files
	source_files=`echo ../libiberty/*.[ch] ../libiberty/functions.def`
	files="${files} ${source_files}"
	source_links=`echo "$source_files" | sed -e 's|../libiberty/||g'`
	links="${links} ${source_links}"
	;;
    *)
	;;
esac

# post-target:

# if we are candian crossing the we need to pick up host copies of
# the tools, otherwise we can look in the current tree
# but we shouldn't build xiberty if we're not canadian crossing.
if [ "${host}" != "${target}" ] ; then
	echo "CC = ${target_alias}-gcc" > Makefile.tem
	echo "AR = ${target_alias}-ar " >> Makefile.tem
	echo "RANLIB = ${target_alias}-ranlib " >> Makefile.tem
else
	echo > Makefile.tem
fi	

echo "INSTALL_DEST = tooldir" >> Makefile.tem

# If we are cross-compiling, check at compile time whether we are
# using newlib.  If we are, we already know the files we need, since
# the linker will fail when run on some of the newlib targets.
if [ "${host}" != "${target}" ] ; then
  cat > Makefile.tem2 <<'!EOF!'
CONFIG_H = xconfig.h
NEEDED_LIST = xneeded-list

xconfig.h: Makefile
	if [ -f ../newlib/Makefile ]; then \
	  echo "#define NEED_sys_nerr 1" >xconfig.h; \
	  echo "#define NEED_sys_errlist 1" >>xconfig.h; \
	  echo "#define NEED_sys_siglist 1" >>xconfig.h; \
	  echo "#define NEED_psignal 1" >>xconfig.h; \
	else \
	  $(MAKE) $(FLAGS_TO_PASS) lconfig.h; \
	  cp lconfig.h xconfig.h; \
	fi

xneeded-list: Makefile
	if [ -f ../newlib/Makefile ]; then \
	  echo insque.o random.o strdup.o alloca.o >xneeded-list; \
	else \
	  $(MAKE) $(FLAGS_TO_PASS) lneeded-list; \
	  cp lneeded-list xneeded-list; \
	fi
!EOF!
fi
sed -e "/^####/  r Makefile.tem" -e "/^####/  r Makefile.tem2" ${Makefile} > Makefile.tem3
mv Makefile.tem3 ${Makefile}
rm -f Makefile.tem Makefile.tem2

if [ "${srcdir}" = "." ] ; then
  echo "EXTRA_LINKS = ${source_links}" >>Makefile
fi
mv Makefile Makefile.tmp
# Patch 'install' and 'Makefile' rules in Makefile
# (The latter is only needed when "$srcdir" = ".".)
sed <Makefile.tmp -e '/INSTALL_DEST =/s/libdir/tooldir/' \
  -e '/Makefile/s|(srcdir)/Makefile.in|(srcdir)/../libiberty/Makefile.in|' \
  >Makefile
rm -f Makefile.tmp

# We need multilib support.
. ${srcdir}/../cfg-ml-pos.in
@


1.3
log
@libg++ 2.8.0 from FSF + changes to build in an OpenBSD environment
@
text
@@


1.2
log
@Files from libg++ 2.8.0 that cvs erroneously placed in the trunk.
@
text
@@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@libg++ 2.8.0 baseline import
@
text
@@

