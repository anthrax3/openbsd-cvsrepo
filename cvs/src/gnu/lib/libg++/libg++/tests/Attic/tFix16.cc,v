head	1.2;
access;
symbols
	OPENBSD_2_5:1.1.1.1.0.12
	OPENBSD_2_5_BASE:1.1.1.1
	OPENBSD_2_4:1.1.1.1.0.10
	OPENBSD_2_4_BASE:1.1.1.1
	OPENBSD_2_3:1.1.1.1.0.8
	OPENBSD_2_3_BASE:1.1.1.1
	FSF_2_8_0:1.1.1.1
	OPENBSD_2_2:1.1.1.1.0.6
	OPENBSD_2_2_BASE:1.1.1.1
	OPENBSD_2_1:1.1.1.1.0.4
	OPENBSD_2_1_BASE:1.1.1.1
	OPENBSD_2_0:1.1.1.1.0.2
	OPENBSD_2_0_BASE:1.1.1.1
	FSF_2_7_1:1.1.1.1
	FSF:1.1.1;
locks; strict;
comment	@// @;


1.2
date	99.05.26.16.36.08;	author espie;	state dead;
branches;
next	1.1;

1.1
date	96.03.15.22.19.10;	author niklas;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	96.03.15.22.19.10;	author niklas;	state Exp;
branches;
next	;


desc
@@


1.2
log
@old libg++, replaced by part of egcs.
@
text
@//
// testFix16.cc : test Fix16/32 classes
//

#include <Fix16.h>

// This set of inlines (instead of a macro) is to force the side effects
// of evaluating y to happen before x is printed.

inline void check(char *x, int y) { cout << x << " = " << (y) << "\n"; }
inline void check(char *x, long y) { cout << x << " = " << (y) << "\n"; }
inline void check(char *x, double y) { cout << x << " = " << (y) << "\n"; }
inline void check(char *x, Fix16 y) { cout << x << " = " << (y) << "\n"; }
inline void check(char *x, Fix32 y) { cout << x << " = " << (y) << "\n"; }

void test16() {
  cout << "Fix16: identities should be displayed\n";

  Fix16 a;		check("0",a);
  Fix16 b = .5;		check(".5",b);
  Fix16 c = -.5;	check("-.5",c);
  Fix16 d = .1;		check(".1",d);
  Fix16 e = b;		check(".5",e);

  check(".5",a = b);
  check(".25",a = .25);
  check("8192",mantissa(a));
  mantissa(a)=8192;
  check(".25",a);
  check(".25",value(a));

  check(".25",+a);
  check("-.25",-a);

  check(".1 + .5",d+b);
  check(".1 - .5",d-b);
  check(".1 * .5",d*b);
  check(".1 *  3",d*3);
  check(".1 * -3",d*-3);
  check(".1 / .5",d/b);
  check(".1 << 1",d<<1);
  check("-.5 >> 2",c>>2);

  check(".1 == .5",d == b);
  check(".1 != .5",d != b);
  check(".1 > .5",d > b);
  check(".5 <= -.5",b <= c);

  cout << "Fix16: range errors ignored and overflows saturated\n";
  set_Fix16_overflow_handler(Fix16_overflow_saturate);
  set_Fix16_range_error_handler(Fix16_ignore);

  Fix16 f = 1.1;	check("1.1",f);

  Fix16 g = .7;
  check(".7 + .5",g+b);
  check("-.5 - .7",c-g);
  check(".5 / .1",b/d);
}

void test32() {
  cout << "Fix32: identities should be displayed\n";

  Fix32 a;		check("0",a);
  Fix32 b = .5;		check(".5",b);
  Fix32 c = -.5;	check("-.5",c);
  Fix32 d = .1;		check(".1",d);
  Fix32 e = b;		check(".5",e);

  check(".5",a = b);
  check(".25",a = .25);
  check("536870912",mantissa(a));
  mantissa(a)=536870912;
  check(".25",a);
  check(".25",value(a));

  check(".25",+a);
  check("-.25",-a);

  check(".1 + .5",d+b);
  check(".1 - .5",d-b);
  check(".1 * .5",d*b);
  check(".1 *  3",d*3);
  check(".1 * -3",d*-3);
  check(".1 / .5",d/b);
  check(".1 << 1",d<<1);
  check("-.5 >> 2",c>>2);

  check(".1 == .5",d == b);
  check(".1 != .5",d != b);
  check(".1 > .5",d > b);
  check(".5 <= -.5",b <= c);

  cout << "Fix32: range errors reported and overflows reported\n";
  set_Fix32_overflow_handler(Fix32_warning);
  set_Fix32_range_error_handler(Fix32_warning);

  Fix32 f = 1.1;	check("1.1",f);

  Fix32 g = .7;
  check(".7 + .5",g+b);
  check("-.5 - .7",c-g);
  check(".5 / .1",b/d);
}

int main() {
  test16();
  test32();
  return 0;
}
@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@Import of GNU libg++ 2.7.1 port (prepared by Erik Theisen)
@
text
@@

