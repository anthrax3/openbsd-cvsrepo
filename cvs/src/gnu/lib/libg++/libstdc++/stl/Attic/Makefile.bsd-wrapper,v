head	1.3;
access;
symbols
	OPENBSD_2_2:1.2.0.6
	OPENBSD_2_2_BASE:1.2
	OPENBSD_2_1:1.2.0.4
	OPENBSD_2_1_BASE:1.2
	OPENBSD_2_0:1.2.0.2
	OPENBSD_2_0_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	98.03.03.21.44.11;	author millert;	state dead;
branches;
next	1.2;

1.2
date	96.05.19.21.48.32;	author niklas;	state Exp;
branches;
next	1.1;

1.1
date	96.03.16.05.18.57;	author etheisen;	state Exp;
branches;
next	;


desc
@@


1.3
log
@libg++ 2.8.0 from FSF + changes to build in an OpenBSD environment
@
text
@#	$OpenBSD: Makefile.bsd-wrapper,v 1.2 1996/05/19 21:48:32 niklas Exp $

IO_DIR=		$(.CURDIR)/../../libio

.if defined(OBJMACHINE)
OBJDIR=	obj.${MACHINE}
.else
OBJDIR=	obj
.endif

IO_OBJDIR!=	if [ -d $(IO_DIR)/$(OBJDIR) ]; then \
			echo $(IO_DIR)/$(OBJDIR); \
		else \
			echo $(IO_DIR); \
		fi

LIB=	stl
CXXFLAGS+=	-fno-implicit-templates -nostdinc++
CPPFLAGS+=	-I$(.CURDIR) -I$(.CURDIR)/.. -I$(.CURDIR)/../../libio \
		-I$(IO_OBJDIR)

CLEANFILES+=	stl.list

SRCS=	tempbuf.cc tree.cc random.cc


all:	stl.list

stl.list: ${SRCS:N*.h:R:S/$/.o/g}
	@@echo Generating stl.list
	@@echo "${SRCS:N*.h:R:S/$/.o/g}" >stl.list

install:
	@@-cd $(.CURDIR); for i in *.h; do \
		cmp -s $$i $(DESTDIR)/usr/include/g++/$$i || \
	install -c -o $(BINOWN) -g $(BINGRP) -m $(NONBINMODE) \
		 $$i $(DESTDIR)/usr/include/g++/$$i; \
	done

.include <bsd.lib.mk>
@


1.2
log
@The former build assumed either no separate objdirs, or objdir links to a
separate equivalent hierarchy.  There are two cases where this does not hold:
1. When the objdirs are real directories in the src tree, i.e. not links.
2. When OBJMACHINE is set.
Fix these remaining cases.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.1 1996/03/16 05:18:57 etheisen Exp $
@


1.1
log
@Allow native BSD build of libg++ 2.7.1.  This is a complete replacement of
the GNU build procedure, not a wrapper.  Generates standard, profiled,
shared object, and shared library versions of libiberty, libstdc++, and
libg++.  libiberty version 0.0, libstdc++ version 27.1, and libg++ version
27.1.  Requires modification of bsd.subdir.mk pmake include.  Targets
linked with the shared libraries libstdc++ and libg++ will, by default,
automatically be run time linked with libm and libcurses.
@
text
@d1 15
a15 1
#	$OpenBSD$
d20 1
a20 1
		-I$(.OBJDIR)/../../libio
@

