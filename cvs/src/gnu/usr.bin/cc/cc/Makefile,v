head	1.7;
access;
symbols
	OPENBSD_6_1:1.7.0.4
	OPENBSD_6_1_BASE:1.7
	OPENBSD_6_0:1.5.0.2
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.4.0.10
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.12
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.4
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.8
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.6
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.2
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.3.0.2
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.2.0.8
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.6
	OPENBSD_5_0:1.2.0.4
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.2
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.1.1.1.0.4
	OPENBSD_4_8_BASE:1.1.1.1
	OPENBSD_4_7:1.1.1.1.0.2
	OPENBSD_4_7_BASE:1.1.1.1
	robert_20091015:1.1.1.1
	robert:1.1.1;
locks; strict;
comment	@# @;


1.7
date	2016.11.08.17.39.12;	author tb;	state Exp;
branches;
next	1.6;
commitid	W1UPKCW8N0De6000;

1.6
date	2016.09.27.19.30.01;	author natano;	state Exp;
branches;
next	1.5;
commitid	zthP9GQTv7MHl6PA;

1.5
date	2016.03.30.06.38.40;	author jmc;	state Exp;
branches;
next	1.4;
commitid	LN9ijdk9SEnzWAbM;

1.4
date	2013.03.30.20.34.24;	author miod;	state Exp;
branches;
next	1.3;

1.3
date	2012.10.13.14.20.26;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2010.09.25.17.44.34;	author drahn;	state Exp;
branches;
next	1.1;

1.1
date	2009.10.15.20.50.20;	author robert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.10.15.20.50.20;	author robert;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Set the permissions of the specs file explicitly so that they don't
depend on the umask.  Install headers and info files with group bin
like all the other headers and info files.

ok stefan
@
text
@# $FreeBSD: src/gnu/usr.bin/cc/cc/Makefile,v 1.33.8.1 2009/04/15 03:14:26 kensmith Exp $
# $OpenBSD: Makefile,v 1.6 2016/09/27 19:30:01 natano Exp $

.include <bsd.own.mk>

.include "${.CURDIR}/../Makefile.inc"
.include "${.CURDIR}/../Makefile.fe"

PROG=	cc
MAN=	gcc.1
SRCS+=  gccspec.c

SPECDIR= /usr/lib/gcc-lib/${GCC_TARGET}/${BASEVER}

LINKS=	${BINDIR}/cc ${BINDIR}/gcc

beforeinstall:
.for dir in /usr/lib/gcc-lib /usr/lib/gcc-lib/${GCC_TARGET} ${SPECDIR}
	${INSTALL} -d -o ${BINOWN} -g ${BINGRP} -m ${DIRMODE} ${DESTDIR}${dir}
.endfor

afterinstall:
	${.OBJDIR}/cc -dumpspecs > ${DESTDIR}${SPECDIR}/specs
	chown ${BINOWN}:${BINGRP} ${DESTDIR}${SPECDIR}/specs
	chmod ${NONBINMODE} ${DESTDIR}${SPECDIR}/specs

.include <bsd.prog.mk>
@


1.6
log
@Set owner for /usr/lib/gcc-lib and /usr/include/g++ on install.
initial diff and ok tb
@
text
@d2 1
a2 1
# $OpenBSD: Makefile,v 1.5 2016/03/30 06:38:40 jmc Exp $
d25 1
@


1.5
log
@for some time now mandoc has not required MLINKS to function
correctly - logically complete that now by removing MLINKS from base;

authors need only to ensure there is an entry in NAME for any function/
util being added. MLINKS will still work, and remain for perl to ease
upgrades;

ok nicm (curses) bcook (ssl)
ok schwarze, who provided a lot of feedback and assistance
ok tb natano jung
@
text
@d2 1
a2 1
# $OpenBSD: Makefile,v 1.4 2013/03/30 20:34:24 miod Exp $
d18 3
a20 4
.if !exists(${DESTDIR}${SPECDIR})
	${INSTALL} -d -o ${BINOWN} -g ${BINGRP} -m ${DIRMODE} \
		${DESTDIR}${SPECDIR}
.endif
d24 1
@


1.4
log
@Don't create a c++filt.1->gcc.1 manpage link at install time, the c++filt
manpage comes from binutils.
@
text
@d2 1
a2 1
# $OpenBSD: Makefile,v 1.3 2012/10/13 14:20:26 espie Exp $
a15 1
MLINKS=	gcc.1 cc.1 gcc.1 c++.1 gcc.1 g++.1
@


1.3
log
@fix typo, keyword is exists, not exist
@
text
@d2 1
a2 1
# $OpenBSD: Makefile,v 1.2 2010/09/25 17:44:34 drahn Exp $
d16 1
a16 1
MLINKS=	gcc.1 cc.1 gcc.1 c++.1 gcc.1 g++.1 gcc.1 c++filt.1
@


1.2
log
@GCC4 cross compilation support under OpenBSD.
@
text
@d2 1
a2 1
# $OpenBSD: Makefile,v 1.1.1.1 2009/10/15 20:50:20 robert Exp $
d19 1
a19 1
.if !exist(${DESTDIR}${SPECDIR})
@


1.1
log
@Initial revision
@
text
@d2 1
a2 1
# $OpenBSD$
d25 1
a25 1
	${.CURDIR}/../cc/obj/cc -dumpspecs > ${DESTDIR}${SPECDIR}/specs
@


1.1.1.1
log
@Import a BSD make based infrastructure for building gcc, based on the
same solution from FreeBSD.
Don't even try to build it at the moment. This is commited so people can
work on it in tree.
@
text
@@
