head	1.12;
access;
symbols
	OPENBSD_5_5:1.10.0.14
	OPENBSD_5_5_BASE:1.10
	OPENBSD_5_4:1.10.0.10
	OPENBSD_5_4_BASE:1.10
	OPENBSD_5_3:1.10.0.8
	OPENBSD_5_3_BASE:1.10
	OPENBSD_5_2:1.10.0.6
	OPENBSD_5_2_BASE:1.10
	OPENBSD_5_1_BASE:1.10
	OPENBSD_5_1:1.10.0.4
	OPENBSD_5_0:1.10.0.2
	OPENBSD_5_0_BASE:1.10
	OPENBSD_4_9:1.9.0.8
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.9.0.6
	OPENBSD_4_8_BASE:1.9
	OPENBSD_4_7:1.9.0.2
	OPENBSD_4_7_BASE:1.9
	OPENBSD_4_6:1.9.0.4
	OPENBSD_4_6_BASE:1.9
	OPENBSD_4_5:1.8.0.2
	OPENBSD_4_5_BASE:1.8
	OPENBSD_4_4:1.7.0.4
	OPENBSD_4_4_BASE:1.7
	OPENBSD_4_3:1.7.0.2
	OPENBSD_4_3_BASE:1.7
	OPENBSD_4_2:1.6.0.14
	OPENBSD_4_2_BASE:1.6
	OPENBSD_4_1:1.6.0.12
	OPENBSD_4_1_BASE:1.6
	OPENBSD_4_0:1.6.0.10
	OPENBSD_4_0_BASE:1.6
	OPENBSD_3_9:1.6.0.8
	OPENBSD_3_9_BASE:1.6
	OPENBSD_3_8:1.6.0.6
	OPENBSD_3_8_BASE:1.6
	OPENBSD_3_7:1.6.0.4
	OPENBSD_3_7_BASE:1.6
	OPENBSD_3_6:1.6.0.2
	OPENBSD_3_6_BASE:1.6
	OPENBSD_3_5:1.5.0.4
	OPENBSD_3_5_BASE:1.5
	OPENBSD_3_4:1.5.0.2
	OPENBSD_3_4_BASE:1.5
	OPENBSD_3_3:1.3.0.2
	OPENBSD_3_3_BASE:1.3
	OPENBSD_3_2:1.2.0.12
	OPENBSD_3_2_BASE:1.2
	OPENBSD_3_1:1.2.0.10
	OPENBSD_3_1_BASE:1.2
	OPENBSD_3_0:1.2.0.8
	OPENBSD_3_0_BASE:1.2
	OPENBSD_2_9:1.2.0.6
	OPENBSD_2_9_BASE:1.2
	OPENBSD_2_8:1.2.0.4
	OPENBSD_2_8_BASE:1.2
	OPENBSD_2_7:1.2.0.2
	OPENBSD_2_7_BASE:1.2
	OPENBSD_2_6:1.1.1.1.0.8
	OPENBSD_2_6_BASE:1.1.1.1
	OPENBSD_2_5:1.1.1.1.0.6
	OPENBSD_2_5_BASE:1.1.1.1
	OPENBSD_2_4:1.1.1.1.0.4
	OPENBSD_2_4_BASE:1.1.1.1
	OPENBSD_2_3:1.1.1.1.0.2
	OPENBSD_2_3_BASE:1.1.1.1
	LYNX_2_8:1.1.1.1
	LYNX:1.1.1;
locks; strict;
comment	@# @;


1.12
date	2014.07.23.19.13.26;	author deraadt;	state dead;
branches;
next	1.11;
commitid	EcR8E7r0stjLUV4p;

1.11
date	2014.07.09.04.11.35;	author daniel;	state Exp;
branches;
next	1.10;
commitid	lGGuvDWEniklWrQe;

1.10
date	2011.07.22.14.10.39;	author avsm;	state Exp;
branches;
next	1.9;

1.9
date	2009.05.31.09.16.52;	author avsm;	state Exp;
branches;
next	1.8;

1.8
date	2008.11.06.01.53.42;	author martynas;	state Exp;
branches;
next	1.7;

1.7
date	2007.12.01.15.40.36;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2004.06.22.04.01.51;	author avsm;	state Exp;
branches;
next	1.5;

1.5
date	2003.05.17.15.01.52;	author mickey;	state Exp;
branches;
next	1.4;

1.4
date	2003.05.01.18.59.40;	author avsm;	state Exp;
branches;
next	1.3;

1.3
date	2002.12.19.02.15.55;	author mickey;	state Exp;
branches;
next	1.2;

1.2
date	2000.03.25.18.17.14;	author maja;	state Exp;
branches;
next	1.1;

1.1
date	98.03.11.17.48.00;	author maja;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.03.11.17.48.00;	author maja;	state Exp;
branches;
next	;


desc
@@


1.12
log
@delinked from tree, now it goes to the bit bucket
@
text
@# $LynxId: makefile.in,v 1.73 2014/01/19 14:41:13 tom Exp $
# template-makefile for Lynx src directory

SHELL		= @@CONFIG_SHELL@@
CDPATH		= .

@@SET_MAKE@@
prefix		= @@prefix@@
datarootdir	= @@datarootdir@@
exec_prefix	= @@exec_prefix@@
top_srcdir	= @@top_srcdir@@
srcdir		= @@srcdir@@
VPATH		= .:$(srcdir)

top_builddir	= ..

# see po/makefile
localedir	= @@NLS_DATADIR@@/locale

# Symbols which the configure script can set in each makefile:
CC		= @@CC@@
CPP		= @@CPP@@
CFLAGS		= @@CFLAGS@@
DEFS		= @@DEFS@@
CHARSET_DEFS	= @@CHARSET_DEFS@@
EXTRA_CPPFLAGS	= @@EXTRA_CPPFLAGS@@
CPPFLAGS	= @@CPPFLAGS@@

x		= @@EXEEXT@@
o		= .@@OBJEXT@@

BUILD_CC	= @@BUILD_CC@@
BUILD_CPP	= @@BUILD_CPP@@
BUILD_CFLAGS	= @@BUILD_CFLAGS@@
BUILD_CPPFLAGS	= @@BUILD_CPPFLAGS@@ @@DEFS@@
BUILD_EXEEXT	= @@BUILD_EXEEXT@@
BUILD_LDFLAGS	= @@BUILD_LDFLAGS@@
BUILD_LIBS	= @@BUILD_LIBS@@

MAKE_RECUR	= $(MAKE) @@cf_cv_makeflags@@ DESTDIR="$(DESTDIR)" CC="$(CC)"

YACC		= @@YACC@@
WINDRES		= @@WINDRES@@

LIBS		= @@LIBS@@ $(RESOLVLIB) $(WAISLIB) $(SITE_LIBS)
LDFLAGS		= @@EXTRA_LDFLAGS@@ @@LDFLAGS@@

# Symbols inherited from the top-level makefile
RESOLVLIB	= # FIXME: set in parent makefile
SITE_DEFS	= # FIXME: set in parent makefile
SITE_LIBS	= # FIXME: set in parent makefile
WAISLIB		= # FIXME: set in parent makefile

WWWINC		= WWW/Library/Implementation
WWWLIB		= $(top_builddir)/WWW/Library/Implementation/libwww.a

INTLLIB		= @@INTLLIBS@@
INTLDIR_CPPFLAGS= @@INTLDIR_CPPFLAGS@@-I$(top_srcdir)/intl

CPP_OPTS	= $(DEFS) $(CHARSET_DEFS) \
		-DLOCALEDIR=\"$(localedir)\" \
		-I. \
		-I$(top_builddir) \
		-Ichrtrans \
		-I$(srcdir)/chrtrans \
		-I$(top_srcdir) \
		-I$(top_srcdir)/src \
		-I$(top_srcdir)/$(WWWINC) \
		$(INTLDIR_CPPFLAGS) $(SITE_DEFS) $(EXTRA_CPPFLAGS) $(CPPFLAGS)
CC_OPTS		= $(CPP_OPTS) $(CFLAGS)

LINT		= @@LINT@@
LINTOPTS	=

CTAGS		= @@CTAGS@@

COMPRESS_PROG	=@@COMPRESS_PROG@@
COMPRESS_EXT	=@@COMPRESS_EXT@@

CHARTRANS_OBJS	= UCdomap$o UCAux$o UCAuto$o
OBJS		= \
	LYebcdic$o \
	LYClean$o LYShowInfo$o LYEdit$o LYStrings$o LYMail$o \
	HTAlert$o GridText$o LYGetFile$o LYMain$o LYMainLoop$o \
	LYCurses$o LYBookmark$o LYmktime$o LYUtils$o LYOptions$o \
	LYReadCFG$o LYSearch$o LYHistory$o LYForms$o LYPrint$o \
	LYrcFile$o LYDownload$o LYNews$o LYKeymap$o HTML$o \
	HTFWriter$o HTInit$o DefaultStyle$o LYUpload$o \
	LYLeaks$o LYexit$o LYJump$o LYList$o LYCgi$o \
	LYTraversal$o LYEditmap$o LYCharSets$o LYCharUtils$o \
	LYMap$o LYCookie$o LYStyle$o LYHash$o LYPrettySrc$o \
	TRSTable$o parsdate$o $(CHARTRANS_OBJS) @@EXTRA_OBJS@@ @@LIBOBJS@@

C_SRC		= $(OBJS:$o=.c)

all: lynx$x

.SUFFIXES : $o .i

# yacc builds .c in target directory, not $(srcdir)
.c$o:
	@@RULE_CC@@
	@@ECHO_CC@@$(CC) $(CC_OPTS) -c $<

.c.i:
	@@RULE_CC@@
	@@ECHO_CC@@$(CPP) -C $(CPP_OPTS) $< >$@@

lynx$x:   message $(top_builddir)/LYHelp.h $(OBJS) $(WWWLIB)
	@@echo "Linking and creating Lynx executable"
	$(CC) $(CC_OPTS) $(LDFLAGS) -o $@@  $(OBJS) $(WWWLIB) $(LIBS) $(INTLLIB)
	@@echo "Copying Lynx executable into top-level directory"
	rm -f $(top_builddir)/$@@
	cp $@@ $(top_builddir)/
	@@echo "Welcome to Lynx!"

message:
	@@echo "Compiling Lynx sources"

do_chartrans_stuff:
	-cd chrtrans && $(MAKE_RECUR) \
		SITE_DEFS="$(SITE_DEFS)" \
		BUILD_CFLAGS="$(BUILD_CFLAGS)" \
		BUILD_CPPFLAGS="$(BUILD_CPPFLAGS)" \
		BUILD_LDFLAGS="$(BUILD_LDFLAGS)" \
		BUILD_LIBS="$(BUILD_LIBS)" \
		BUILD_CC="$(BUILD_CC)" tables

lint:
	$(LINT) $(LINTOPTS) $(CPP_OPTS) $(C_SRC)  2>&1 |tee $(top_builddir)/lint.lynx

clean:
	rm -f lynx$x core *.core *.leaks *.i *$o *.bak tags TAGS test_*
	cd chrtrans && $(MAKE_RECUR) clean

tags:
	$(CTAGS) *.[ch]

distclean: clean

CMN=$(top_srcdir)/WWW/Library/Implementation/

HTFWriter$o :		$(top_srcdir)/userdefs.h
HTInit$o :		$(top_srcdir)/userdefs.h
LYCharSets$o :		$(top_srcdir)/userdefs.h
LYGetFile$o :		$(top_srcdir)/userdefs.h
LYKeymap$o :		$(top_srcdir)/userdefs.h
LYLeaks$o :		$(CMN)LYLeaks.h $(CMN)HTString.h
LYMail$o :		$(top_srcdir)/userdefs.h
LYMain$o :		$(top_srcdir)/userdefs.h $(top_builddir)/lynx_cfg.h
LYMainLoop$o :		$(top_srcdir)/userdefs.h
LYOptions$o :		$(top_srcdir)/userdefs.h
LYReadCFG$o :		$(top_srcdir)/userdefs.h
LYShowInfo$o :		$(top_builddir)/cfg_defs.h
LYTraversal$o :		$(top_srcdir)/userdefs.h
LYUtils$o :		$(top_srcdir)/userdefs.h
LYmktime$o :		$(top_srcdir)/userdefs.h
LYrcFile$o :		$(top_srcdir)/userdefs.h

LYIcon$o: LYIcon.rc
	$(WINDRES) -i LYIcon.rc -o LYIcon$o -O coff

CHRTR= chrtrans/

TABLES= \
 $(CHRTR)cp1250_uni.h \
 $(CHRTR)cp1251_uni.h \
 $(CHRTR)cp1252_uni.h \
 $(CHRTR)cp1253_uni.h \
 $(CHRTR)cp1255_uni.h \
 $(CHRTR)cp1256_uni.h \
 $(CHRTR)cp1257_uni.h \
 $(CHRTR)cp437_uni.h \
 $(CHRTR)cp737_uni.h \
 $(CHRTR)cp775_uni.h \
 $(CHRTR)cp850_uni.h \
 $(CHRTR)cp852_uni.h \
 $(CHRTR)cp857_uni.h \
 $(CHRTR)cp862_uni.h \
 $(CHRTR)cp864_uni.h \
 $(CHRTR)cp866_uni.h \
 $(CHRTR)cp866u_uni.h \
 $(CHRTR)cp869_uni.h \
 $(CHRTR)def7_uni.h \
 $(CHRTR)dmcs_uni.h \
 $(CHRTR)hp_uni.h \
 $(CHRTR)iso01_uni.h \
 $(CHRTR)iso02_uni.h \
 $(CHRTR)iso03_uni.h \
 $(CHRTR)iso04_uni.h \
 $(CHRTR)iso05_uni.h \
 $(CHRTR)iso06_uni.h \
 $(CHRTR)iso07_uni.h \
 $(CHRTR)iso08_uni.h \
 $(CHRTR)iso09_uni.h \
 $(CHRTR)iso10_uni.h \
 $(CHRTR)iso13_uni.h \
 $(CHRTR)iso14_uni.h \
 $(CHRTR)iso15_uni.h \
 $(CHRTR)koi8r_uni.h \
 $(CHRTR)koi8u_uni.h \
 $(CHRTR)mac_uni.h \
 $(CHRTR)mnem2_suni.h \
 $(CHRTR)mnem_suni.h \
 $(CHRTR)next_uni.h \
 $(CHRTR)pt154_uni.h \
 $(CHRTR)rfc_suni.h \
 $(CHRTR)utf8_uni.h \
 $(CHRTR)viscii_uni.h

$(TABLES): do_chartrans_stuff
	-cd chrtrans && $(MAKE_RECUR) tables

UCdomap$o :	UCdomap.c \
		chrtrans/UCkd.h \
		chrtrans/makeuctb$(BUILD_EXEEXT) \
		chrtrans/makeuctb.c \
	UCdomap.h $(CMN)UCMap.h $(TABLES) $(top_srcdir)/userdefs.h

chrtrans/makeuctb$(BUILD_EXEEXT): do_chartrans_stuff
	-cd chrtrans && $(MAKE_RECUR) makeuctb$(BUILD_EXEEXT)

UCAux$o : UCAux.c $(CMN)UCAux.h $(CMN)UCDefs.h
LYCookie$o : $(top_srcdir)/userdefs.h

test_mktime.o: $(srcdir)/LYmktime.c
	$(CC) -o $@@ $(CC_OPTS) -DTEST_DRIVER -c $(srcdir)/LYmktime.c

# test-driver for LYmktime
test_mktime: test_mktime.o parsdate.o LYebcdic.o
	$(CC) -o $@@ $(CC_OPTS) test_mktime.o parsdate.o LYebcdic.o

# update generated source (may be in ".", or srcdir)
parsdate.c : $(srcdir)/parsdate.y
	$(YACC)  $(srcdir)/parsdate.y
	-rm -f $@@
	mv y.tab.c $@@

depend : $(TABLES)
	makedepend -fmakefile -- $(CC_OPTS) -- $(C_SRC)

# DO NOT DELETE THIS LINE -- make depend depends on it.
@


1.11
log
@update to lynx 2.8.8rel2, keeping local changes. primarily to get these
changes from 2.8.8dev.16:

* fix most issues found by clang 3.2 analyze
* fix most issues found by Coverity scan

tested on i386, sparc64, and macppc by myself.
tested on vax by miod@@ (including https)
helpful discussion with avsm@@, sthen@@

ok deraadt@@
@
text
@@


1.10
log
@update to lynx2.8.7rel.2, with local patches:
- restore local lynx.cfg settings [avsm]
- fix makefile races [espie]
- read/write result checking fixes to avoid unsigned comparisons vs -1 [krw]
- initialize all the InputFieldData members correctly [fgsch]
- fix socklen_t test to include <sys/types.h> [miod]
- fgets(3) returns NULL on error, not 0. No functional change [cloder]

ok krw@@, tests by Simon Kuhnle and Martin Pieuchot
@
text
@d1 1
a1 1
# $LynxId: makefile.in,v 1.59 2009/03/09 22:43:29 Doug.Kaufman Exp $
d9 1
d37 4
d43 1
d46 1
a46 1
LDFLAGS		= @@LDFLAGS@@
d75 2
d102 1
a102 1
@@RULE_CC@@
d106 1
a106 1
@@RULE_CC@@
d109 1
a109 1
lynx$x:   message do_chartrans_stuff $(top_builddir)/LYHelp.h $(OBJS) $(WWWLIB)
d111 1
a111 1
	$(CC) $(CC_OPTS) $(LDFLAGS) -o $@@  $(OBJS) $(WWWLIB) $(INTLLIB) $(LDFLAGS) $(LIBS)
d121 1
a121 1
	-cd chrtrans && $(MAKE) \
d130 1
a130 1
	$(LINT) $(LINTOPTS) $(CPP_OPTS) *.c  > $(top_builddir)/lint.lynx
d134 1
a134 1
	cd chrtrans && $(MAKE) clean
d137 1
a137 1
	ctags *.[ch]
d160 2
a161 2
LYIcon$o:
	windres -i LYIcon.rc -o LYIcon$o -O coff
d178 1
d182 1
d197 2
d201 1
d203 1
a204 1
 $(CHRTR)mnem2_suni.h \
d206 1
d212 1
a212 1
	-cd chrtrans && $(MAKE) tables
d221 1
a221 1
	-cd chrtrans && ${MAKE} makeuctb$(BUILD_EXEEXT)
d235 1
a235 1
	$(YACC)  $(srcdir)/parsdate.y 
@


1.9
log
@Update to lynx-2.8.6.rel5, with our local patches maintained where relevant.
tests from miod@@ sthen@@ jmc@@ jsing@@
two additional fixes from miod:
- fix uninitialized stack variable use, leading to occasional crash.
- modify the socklen_t test to include <sys/types.h>, fixes gcc2 build failures
@
text
@d1 1
d12 1
a12 1
VPATH		= $(srcdir)
d37 2
d54 1
a54 1
CPP_OPTS	= $(EXTRA_CPPFLAGS) $(CPPFLAGS) $(DEFS) $(CHARSET_DEFS) \
d63 1
a63 1
		$(INTLDIR_CPPFLAGS) $(SITE_DEFS)
d73 2
a74 1
OBJS	= \
d77 1
a77 1
	LYCurses$o LYBookmark$o LYUtils$o LYOptions$o \
d84 1
a84 1
	TRSTable$o $(CHARTRANS_OBJS) @@EXTRA_OBJS@@ @@LIBOBJS@@
d86 1
a86 1
C_SRC	= $(OBJS:$o=.c)
d92 1
d95 1
a95 1
	@@ECHO_CC@@$(CC) $(CC_OPTS) -c $(srcdir)/$*.c
d99 1
a99 1
	@@ECHO_CC@@$(CPP) -C $(CPP_OPTS) $(srcdir)/$*.c >$@@
d125 1
a125 1
	rm -f lynx$x core *.core *.leaks *.i *$o *.bak tags TAGS
d140 1
d149 1
d151 3
a153 1
LYLeaks$o :		$(CMN)LYLeaks.h $(CMN)HTString.h
d206 2
a207 2
chrtrans/makeuctb$(BUILD_EXEEXT):
	cd chrtrans; make makeuctb$(BUILD_EXEEXT)
d212 2
a213 4
.if ${MACHINE_ARCH} == "hppa"
LYMainLoop.o: ${srcdir}/LYMainLoop.c
@@RULE_CC@@
	@@ECHO_CC@@$(CC) $(CC_OPTS) -O0 -c $<
d215 9
a223 4
HTML.o: ${srcdir}/HTML.c
@@RULE_CC@@
	@@ECHO_CC@@$(CC) $(CC_OPTS) -O0 -c $<
.endif
@


1.8
log
@add support for iso8859-13
@
text
@d24 1
d30 6
d51 1
a51 1
CPP_OPTS	= $(CPPFLAGS) $(DEFS) $(CHARSET_DEFS) \
d80 1
a80 1
	TRSTable$o $(CHARTRANS_OBJS) @@LIBOBJS@@
d98 1
a98 1
	$(CC) $(CC_OPTS) $(LDFLAGS) -o $@@  $(OBJS) $(WWWLIB) $(INTLLIB) $(LIBS)
d110 5
a114 3
		CFLAGS="$(CFLAGS)" \
		CPPFLAGS="$(CPPFLAGS)" \
		CC="$(CC)" tables
d123 3
a177 1
 $(CHRTR)iso13_uni.h \
d191 4
a194 1
UCdomap$o : UCdomap.c chrtrans/UCkd.h chrtrans/makeuctb$x chrtrans/makeuctb.c \
d197 2
a198 2
chrtrans/makeuctb$x: do_chartrans_stuff
	-cd chrtrans && ${MAKE} makeuctb$x
d202 10
@


1.7
log
@fix makefile races.
okay millert@@
@
text
@d166 1
@


1.6
log
@update to lynx 2.8.5rel.1
tested todd@@,naddy@@. millert@@ deraadt@@ ok
@
text
@d176 1
a176 1
$(TABLES):
d182 2
a183 2
chrtrans/makeuctb$x:
	cd chrtrans; make makeuctb$x
@


1.5
log
@no need for O0 on hppa anymore
@
text
@a5 2
x		= @@PROG_EXT@@

d25 3
a27 1
_O		= .o
d41 1
a41 1
INTLLIB		= @@INTLDIR_MAKE@@@@INTLLIBS@@
d62 1
a62 1
CHARTRANS_OBJS	= UCdomap$(_O) UCAux$(_O) UCAuto$(_O)
d64 10
a73 10
	LYClean$(_O) LYShowInfo$(_O) LYEdit$(_O) LYStrings$(_O) LYMail$(_O) \
	HTAlert$(_O) GridText$(_O) LYGetFile$(_O) LYMain$(_O) LYMainLoop$(_O) \
	LYCurses$(_O) LYBookmark$(_O) LYUtils$(_O) LYOptions$(_O) \
	LYReadCFG$(_O) LYSearch$(_O) LYHistory$(_O) LYForms$(_O) LYPrint$(_O) \
	LYrcFile$(_O) LYDownload$(_O) LYNews$(_O) LYKeymap$(_O) HTML$(_O) \
	HTFWriter$(_O) HTInit$(_O) DefaultStyle$(_O) LYUpload$(_O) \
	LYLeaks$(_O) LYexit$(_O) LYJump$(_O) LYList$(_O) LYCgi$(_O) \
	LYTraversal$(_O) LYEditmap$(_O) LYCharSets$(_O) LYCharUtils$(_O) \
	LYMap$(_O) LYCookie$(_O) LYStyle$(_O) LYHash$(_O) LYPrettySrc$(_O) \
	TRSTable$(_O) $(CHARTRANS_OBJS) @@LIBOBJS@@
d75 1
a75 1
C_SRC	= $(OBJS:$(_O)=.c)
d79 1
a79 1
.SUFFIXES : $(_O) .i
d81 1
a81 1
.c$(_O):
d111 1
a111 1
	rm -f lynx$x core *.core *.leaks *.[oi] *.bak tags TAGS
d118 15
a132 15
HTFWriter$(_O):		$(top_srcdir)/userdefs.h
HTInit$(_O):		$(top_srcdir)/userdefs.h
LYCharSets$(_O):	$(top_srcdir)/userdefs.h
LYGetFile$(_O):		$(top_srcdir)/userdefs.h
LYKeymap$(_O):		$(top_srcdir)/userdefs.h
LYMail$(_O):		$(top_srcdir)/userdefs.h
LYMain$(_O):		$(top_srcdir)/userdefs.h $(top_builddir)/lynx_cfg.h
LYMainLoop$(_O):	$(top_srcdir)/userdefs.h
LYOptions$(_O):		$(top_srcdir)/userdefs.h
LYReadCFG$(_O):		$(top_srcdir)/userdefs.h
LYShowInfo$(_O):	$(top_builddir)/cfg_defs.h
LYTraversal$(_O):	$(top_srcdir)/userdefs.h
LYUtils$(_O):		$(top_srcdir)/userdefs.h
LYrcFile$(_O):		$(top_srcdir)/userdefs.h
LYLeaks$(_O):		$(CMN)LYLeaks.h $(CMN)HTString.h
d179 1
a179 1
UCdomap$(_O): UCdomap.c chrtrans/UCkd.h chrtrans/makeuctb$x chrtrans/makeuctb.c \
d185 2
a186 2
UCAux$(_O) : UCAux.c $(CMN)UCAux.h $(CMN)UCDefs.h
LYCookie$(_O): $(top_srcdir)/userdefs.h
@


1.4
log
@Update to lynx-2.8.4-rel1, patchset d, now with IPv6 as well

Local patches we maintain to the distribution are:
- replace unbounded fscanf with fgets (avsm)
- spelling fixes (deraadt)
- hppa -O0 workaround (mickey)
- default to ftp passive (deraadt)
- work with non-exec scripts (deraadt,hin,maja)
- be more careful with rlogin username (art)
- default to our webpage (deraadt)
- install helpfiles locally (maja)
- mkdtemp temp space directory (art)
- install more recent config.guess (avsm)

Tested by beck,millert,grange,fries,miod and others, deraadt@@ ok
@
text
@a184 10
.if ${MACHINE_ARCH} == "hppa"
LYMainLoop.o: ${srcdir}/LYMainLoop.c
@@RULE_CC@@
	@@ECHO_CC@@$(CC) $(CC_OPTS) -O0 -c $<

HTML.o: ${srcdir}/HTML.c
@@RULE_CC@@
	@@ECHO_CC@@$(CC) $(CC_OPTS) -O0 -c $<
.endif

@


1.3
log
@build LYMainLoop.o -O0 as a workaround for gcc on hppa
@
text
@d4 1
d25 1
d27 1
d44 1
a44 1
CPP_OPTS	= $(DEFS) $(CPPFLAGS) \
d62 12
a73 10
CHARTRANS_OBJS=UCdomap.o UCAux.o UCAuto.o
OBJS=  LYClean.o LYShowInfo.o LYEdit.o LYStrings.o \
LYMail.o HTAlert.o GridText.o LYGetFile.o \
LYMain.o LYMainLoop.o LYCurses.o LYBookmark.o LYUtils.o \
LYOptions.o LYReadCFG.o LYSearch.o LYHistory.o \
LYForms.o LYPrint.o LYrcFile.o LYDownload.o LYNews.o LYKeymap.o \
HTML.o HTFWriter.o HTInit.o DefaultStyle.o LYLocal.o LYUpload.o \
LYLeaks.o LYexit.o LYJump.o LYList.o LYCgi.o LYTraversal.o \
LYEditmap.o LYCharSets.o LYCharUtils.o LYMap.o LYCookie.o LYExtern.o \
LYStyle.o LYHash.o LYPrettySrc.o $(CHARTRANS_OBJS) @@LIBOBJS@@
d75 1
a75 1
C_SRC	= $(OBJS:.o=.c)
d79 1
a79 1
.SUFFIXES : .i
d81 1
a81 1
.c.o:
d93 2
a94 1
	cp $@@ $(top_builddir)
d111 1
a111 1
	rm -f lynx$x core *.core *.leaks *.[ob] *.bak
d116 17
a132 14
HTFWriter.o:	$(top_srcdir)/userdefs.h
HTInit.o:	$(top_srcdir)/userdefs.h
LYCharSets.o:	$(top_srcdir)/userdefs.h
LYGetFile.o:	$(top_srcdir)/userdefs.h
LYKeymap.o:	$(top_srcdir)/userdefs.h
LYMail.o:	$(top_srcdir)/userdefs.h
LYMain.o:	$(top_srcdir)/userdefs.h $(top_builddir)/lynx_cfg.h
LYMainLoop.o:	$(top_srcdir)/userdefs.h
LYOptions.o:	$(top_srcdir)/userdefs.h
LYReadCFG.o:	$(top_srcdir)/userdefs.h
LYShowInfo.o:	$(top_builddir)/cfg_defs.h
LYTraversal.o:	$(top_srcdir)/userdefs.h
LYUtils.o:	$(top_srcdir)/userdefs.h
LYrcFile.o:	$(top_srcdir)/userdefs.h
a175 2
CMN=$(top_srcdir)/WWW/Library/Implementation/

d179 1
a179 1
UCdomap.o: UCdomap.c chrtrans/UCkd.h chrtrans/makeuctb$x chrtrans/makeuctb.c \
d182 2
a183 2
UCAux.o : UCAux.c $(CMN)UCAux.h $(CMN)UCDefs.h
LYCookie.o: $(top_srcdir)/userdefs.h
d194 3
@


1.2
log
@Upgrade to Lynx 2.8.2. -moj
@
text
@d178 10
@


1.1
log
@Initial revision
@
text
@d3 1
a3 1
SHELL = /bin/sh
d14 5
d26 1
a26 1
LIBS		= @@LIBS@@ $(RESOLVLIB) $(WAISLIB) $(SOCKSLIB) $(SITE_LIBS)
a32 1
SOCKSLIB	= # FIXME: set in parent makefile
d36 4
a39 1
WWWLIB		= ../WWW/Library/unix/libwww.a
d42 1
d44 1
a44 1
		-I.. \
d50 1
a50 1
		$(SITE_DEFS)
d56 3
d68 1
a68 1
LYStyle.o LYHash.o $(CHARTRANS_OBJS) @@LIBOBJS@@
d82 1
a82 1
	@@ECHO_CC@@$(CPP) -C $(CPP_OPTS) $*.c >$@@
d84 1
a84 1
lynx$x:   message do_chartrans_stuff $(OBJS) $(WWWLIB)
d86 1
a86 1
	$(CC) $(CC_OPTS) $(LDFLAGS) -o $@@  $(OBJS) $(WWWLIB) $(LIBS)
d88 1
a88 1
	cp $@@ ..
d102 1
a102 1
	$(LINT) $(LINTOPTS) $(CPP_OPTS) *.c  > ../lint.out
d105 1
a105 1
	rm -f lynx$x core *.[ob] *.bak
d110 14
a123 14
LYMain.o: ../userdefs.h
LYMainLoop.o: ../userdefs.h
LYReadCFG.o: ../userdefs.h
HTFWriter.o: ../userdefs.h
LYGetFile.o: ../userdefs.h
LYOptions.o: ../userdefs.h
LYReadCFG.o: ../userdefs.h
LYrcFile.o: ../userdefs.h
LYMail.o: ../userdefs.h
LYUtils.o: ../userdefs.h
HTInit.o: ../userdefs.h
LYTraversal.o: ../userdefs.h
LYMail.o: ../userdefs.h
LYCharSets.o: ../userdefs.h
d146 1
d157 1
d167 1
a167 1
CMN=../WWW/Library/Implementation/
d172 2
a173 2
UCdomap.o: UCdomap.c chrtrans/UCkd.h chrtrans/makeuctb chrtrans/makeuctb.c \
                 UCdomap.h $(CMN)UCMap.h $(TABLES) ../userdefs.h
d176 1
a176 1
LYCookie.o: ../userdefs.h
d178 1
a178 1
depend :
@


1.1.1.1
log
@Lynx 2.8
@
text
@@
