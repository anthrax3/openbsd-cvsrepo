head	1.4;
access;
symbols
	OPENBSD_6_1:1.4.0.4
	OPENBSD_6_1_BASE:1.4
	OPENBSD_6_0:1.3.0.16
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.10
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.12
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.4
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.8
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.6
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.2
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.2.0.8
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.6
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.4
	OPENBSD_5_0:1.2.0.2
	OPENBSD_5_0_BASE:1.2
	BINUTILS_2_17_RELEASE:1.1.1.1
	FSF:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2016.08.10.02.58.44;	author guenther;	state Exp;
branches;
next	1.3;
commitid	QZajJo3pvCt9duBi;

1.3
date	2013.03.21.22.32.30;	author miod;	state Exp;
branches;
next	1.2;

1.2
date	2011.04.24.20.19.25;	author miod;	state Exp;
branches;
next	1.1;

1.1
date	2011.04.24.20.14.49;	author miod;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2011.04.24.20.14.49;	author miod;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Cover your kid's remaining eye and lock up the pets for the great old ones
have been disturbed: rework the linker script and then enable RELRO support
on all but mips64 (something something padding) and m88k (untested).
This extends the RO coverage from just .got and .cdtors to also include
.openbsd.randomdata, .jcr, .dynamic, and .data.rel.ro., and moves more
segments from the text section to the rodata section.  Depends on the
previous csu and ld.so work; reinstall those *before* rebuilding ld, or
just get a snapshot.

clues from kettenis
assistance testing and ok deraadt@@
@
text
@. ${srcdir}/emulparams/hppaelf.sh
 
#override hppaelf.sh
SCRIPT_NAME=elf
ELFSIZE=32
OUTPUT_FORMAT="elf32-hppa"

# other necessary defines, similar but not the same as linux.
MAXPAGESIZE=0x1000
COMMONPAGESIZE=0x1000
ENTRY="__start"
MACHINE=hppa1.1    # We use 1.1 specific features.
OTHER_READONLY_SECTIONS=".PARISC.unwind ${RELOCATING-0} : { *(.PARISC.unwind) }"
DATA_NONEXEC_PLT=
PLT_BEFORE_GOT=
GENERATE_SHLIB_SCRIPT=yes

. ${srcdir}/emulparams/elf_obsd.sh

#override elf_obsd.sh
DATA_START_SYMBOLS='PROVIDE ($global$ = .); __data_start = . ;'
@


1.3
log
@Define PLT_BEFORE_GOT.
@
text
@d10 1
@


1.2
log
@A first attempt at merging our local changes and fixes into the 2.17 codebase.
ld(1) needs a lot more work, as the upstream code evolved significantly since
2.15, mostly due to changes in PIE binaries layout, and we had already
diverged significantly to implement W^X.
@
text
@d14 1
@


1.1
log
@Initial revision
@
text
@d1 6
a6 1
. ${srcdir}/emulparams/hppanbsd.sh
d8 1
a8 3
OUTPUT_FORMAT="elf32-hppa"
TEXT_START_ADDR=0x1000
TARGET_PAGE_SIZE=0x1000
d10 10
@


1.1.1.1
log
@Here comes the easter bunnytils 2.17 (the last version released against a
licence mere mortals can understand the terms of); will be connected to the
build on an arch-by-arch basis.

Testsuites and generated files have been intentionnaly omitted from this import.

Peer pressure and ok from at least drahn@@ pirofti@@ deraadt@@
@
text
@@
