head	1.5;
access;
symbols
	OPENBSD_3_3:1.4.0.8
	OPENBSD_3_3_BASE:1.4
	OPENBSD_3_2:1.4.0.6
	OPENBSD_3_2_BASE:1.4
	OPENBSD_3_1:1.4.0.4
	OPENBSD_3_1_BASE:1.4
	OPENBSD_3_0:1.4.0.2
	OPENBSD_3_0_BASE:1.4
	OPENBSD_2_9:1.2.0.14
	OPENBSD_2_9_BASE:1.2
	OPENBSD_2_8:1.2.0.12
	OPENBSD_2_8_BASE:1.2
	OPENBSD_2_7:1.2.0.10
	OPENBSD_2_7_BASE:1.2
	OPENBSD_2_6:1.2.0.8
	OPENBSD_2_6_BASE:1.2
	OPENBSD_2_5:1.2.0.6
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.2.0.4
	OPENBSD_2_4_BASE:1.2
	OPENBSD_2_3:1.2.0.2
	OPENBSD_2_3_BASE:1.2
	OPENBSD_2_2:1.1.1.1.0.6
	OPENBSD_2_2_BASE:1.1.1.1
	OPENBSD_2_1:1.1.1.1.0.4
	OPENBSD_2_1_BASE:1.1.1.1
	OPENBSD_2_0:1.1.1.1.0.2
	OPENBSD_2_0_BASE:1.1.1.1
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.5
date	2003.07.12.16.02.25;	author millert;	state dead;
branches;
next	1.4;

1.4
date	2001.09.29.01.10.47;	author millert;	state Exp;
branches;
next	1.3;

1.3
date	2001.09.27.21.57.15;	author millert;	state Exp;
branches;
next	1.2;

1.2
date	98.03.31.03.20.53;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.40.54;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.40.54;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.5
log
@remove zdiff now that compress has its own
@
text
@#!/bin/sh
# sh is buggy on RS/6000 AIX 3.2. Replace above line with #!/bin/ksh

# Zcmp and zdiff are used to invoke the cmp or the  diff  pro-
# gram  on compressed files.  All options specified are passed
# directly to cmp or diff.  If only 1 file is specified,  then
# the  files  compared  are file1 and an uncompressed file1.gz.
# If two files are specified, then they are  uncompressed  (if
# necessary) and fed to cmp or diff.  The exit status from cmp
# or diff is preserved.

prog=`echo $0 | sed 's|.*/||'`
case "$prog" in
  *cmp) comp=${CMP-cmp}   ;;
  *)    comp=${DIFF-diff} ;;
esac

OPTIONS=
FILES=
for ARG
do
    case "$ARG" in
    -*)	OPTIONS="$OPTIONS $ARG";;
     *)	if test -f "$ARG"; then
            FILES="$FILES $ARG"
        else
            echo "${prog}: $ARG not found or not a regular file"
	    exit 1
        fi ;;
    esac
done
if test -z "$FILES"; then
	echo "Usage: $prog [${comp}_options] file [file]"
	exit 1
fi
set $FILES
if test $# -eq 1; then
	FILE=`echo "$1" | sed 's/[-.][zZtga]*$//'`
	gzip -cd "$1" | $comp $OPTIONS - "$FILE"
	STAT="$?"

elif test $# -eq 2; then
	case "$1" in
        *[-.]gz* | *[-.][zZ] | *.t[ga]z)
                case "$2" in
	        *[-.]gz* | *[-.][zZ] | *.t[ga]z)
			F=`echo "$2" | sed 's|.*/||;s|[-.][zZtga]*||'`
			TF=`mktemp /tmp/"$F".XXXXXXXXXX` || exit 1
                        gzip -cdfq "$2" > "$TF"
                        gzip -cdfq "$1" | $comp $OPTIONS - "$TF"
                        STAT="$?"
			/bin/rm -f "$TF";;

                *)      gzip -cdfq "$1" | $comp $OPTIONS - "$2"
                        STAT="$?";;
                esac;;
        *)      case "$2" in
	        *[-.]gz* | *[-.][zZ] | *.t[ga]z)
                        gzip -cdfq "$2" | $comp $OPTIONS "$1" -
                        STAT="$?";;
                *)      $comp $OPTIONS "$1" "$2"
                        STAT="$?";;
                esac;;
	esac
        exit "$STAT"
else
	echo "Usage: $prog [${comp}_options] file [file]"
	exit 1
fi
@


1.4
log
@Put $TF in double-quotes since it could possibly contain spaces;
solar@@openwall.com
@
text
@@


1.3
log
@Use mktemp(1) to avoid potential /tmp races
@
text
@d49 2
a50 2
                        gzip -cdfq "$2" > $TF
                        gzip -cdfq "$1" | $comp $OPTIONS - $TF
d52 1
a52 1
			/bin/rm -f $TF;;
@


1.2
log
@do not prepend /usr/local/bin to path; jbernard@@tater.mines.edu
@
text
@d48 3
a50 2
                        gzip -cdfq "$2" > /tmp/"$F".$$
                        gzip -cdfq "$1" | $comp $OPTIONS - /tmp/"$F".$$
d52 1
a52 1
			/bin/rm -f /tmp/"$F".$$;;
@


1.1
log
@Initial revision
@
text
@a11 1
PATH="/usr/local/bin:$PATH"; export PATH
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
