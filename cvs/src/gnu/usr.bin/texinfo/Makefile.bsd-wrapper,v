head	1.45;
access;
symbols
	OPENBSD_6_1:1.45.0.2
	OPENBSD_6_1_BASE:1.45
	OPENBSD_6_0:1.42.0.10
	OPENBSD_6_0_BASE:1.42
	OPENBSD_5_9:1.42.0.6
	OPENBSD_5_9_BASE:1.42
	OPENBSD_5_8:1.42.0.8
	OPENBSD_5_8_BASE:1.42
	OPENBSD_5_7:1.42.0.2
	OPENBSD_5_7_BASE:1.42
	OPENBSD_5_6:1.42.0.4
	OPENBSD_5_6_BASE:1.42
	OPENBSD_5_5:1.41.0.28
	OPENBSD_5_5_BASE:1.41
	OPENBSD_5_4:1.41.0.24
	OPENBSD_5_4_BASE:1.41
	OPENBSD_5_3:1.41.0.22
	OPENBSD_5_3_BASE:1.41
	OPENBSD_5_2:1.41.0.20
	OPENBSD_5_2_BASE:1.41
	OPENBSD_5_1_BASE:1.41
	OPENBSD_5_1:1.41.0.18
	OPENBSD_5_0:1.41.0.16
	OPENBSD_5_0_BASE:1.41
	OPENBSD_4_9:1.41.0.14
	OPENBSD_4_9_BASE:1.41
	OPENBSD_4_8:1.41.0.12
	OPENBSD_4_8_BASE:1.41
	OPENBSD_4_7:1.41.0.8
	OPENBSD_4_7_BASE:1.41
	OPENBSD_4_6:1.41.0.10
	OPENBSD_4_6_BASE:1.41
	OPENBSD_4_5:1.41.0.6
	OPENBSD_4_5_BASE:1.41
	OPENBSD_4_4:1.41.0.4
	OPENBSD_4_4_BASE:1.41
	OPENBSD_4_3:1.41.0.2
	OPENBSD_4_3_BASE:1.41
	OPENBSD_4_2:1.40.0.6
	OPENBSD_4_2_BASE:1.40
	OPENBSD_4_1:1.40.0.4
	OPENBSD_4_1_BASE:1.40
	OPENBSD_4_0:1.40.0.2
	OPENBSD_4_0_BASE:1.40
	OPENBSD_3_9:1.37.0.14
	OPENBSD_3_9_BASE:1.37
	OPENBSD_3_8:1.37.0.12
	OPENBSD_3_8_BASE:1.37
	OPENBSD_3_7:1.37.0.10
	OPENBSD_3_7_BASE:1.37
	OPENBSD_3_6:1.37.0.8
	OPENBSD_3_6_BASE:1.37
	OPENBSD_3_5:1.37.0.6
	OPENBSD_3_5_BASE:1.37
	OPENBSD_3_4:1.37.0.4
	OPENBSD_3_4_BASE:1.37
	OPENBSD_3_3:1.37.0.2
	OPENBSD_3_3_BASE:1.37
	OPENBSD_3_2:1.36.0.2
	OPENBSD_3_2_BASE:1.36
	OPENBSD_3_1:1.33.0.8
	OPENBSD_3_1_BASE:1.33
	OPENBSD_3_0:1.33.0.6
	OPENBSD_3_0_BASE:1.33
	OPENBSD_2_9:1.33.0.4
	OPENBSD_2_9_BASE:1.33
	OPENBSD_2_8:1.33.0.2
	OPENBSD_2_8_BASE:1.33
	OPENBSD_2_7:1.31.0.2
	OPENBSD_2_7_BASE:1.31
	OPENBSD_2_6:1.29.0.2
	OPENBSD_2_6_BASE:1.29
	OPENBSD_2_5:1.28.0.2
	OPENBSD_2_5_BASE:1.28
	OPENBSD_2_4:1.25.0.2
	OPENBSD_2_4_BASE:1.25
	OPENBSD_2_3:1.24.0.4
	OPENBSD_2_3_BASE:1.24
	OPENBSD_2_2:1.24.0.2
	OPENBSD_2_2_BASE:1.24
	OPENBSD_2_1:1.8.0.4
	OPENBSD_2_1_BASE:1.8
	OPENBSD_2_0:1.8.0.2
	OPENBSD_2_0_BASE:1.8;
locks; strict;
comment	@# @;


1.45
date	2016.11.16.21.40.21;	author tb;	state Exp;
branches;
next	1.44;
commitid	S6Rtaz5o0IHPpg7W;

1.44
date	2016.10.03.21.24.40;	author natano;	state Exp;
branches;
next	1.43;
commitid	gb0S1xHOi6VkqMuN;

1.43
date	2016.09.11.14.17.04;	author natano;	state Exp;
branches;
next	1.42;
commitid	kl1HdfecR4JSz4ps;

1.42
date	2014.07.11.23.23.28;	author jsg;	state Exp;
branches;
next	1.41;
commitid	AQEcnT91uWWx6zH0;

1.41
date	2007.11.03.15.13.56;	author espie;	state Exp;
branches;
next	1.40;

1.40
date	2006.07.17.21.40.56;	author espie;	state Exp;
branches;
next	1.39;

1.39
date	2006.07.17.16.41.02;	author espie;	state Exp;
branches;
next	1.38;

1.38
date	2006.07.12.23.00.07;	author espie;	state Exp;
branches;
next	1.37;

1.37
date	2003.02.16.18.28.41;	author deraadt;	state Exp;
branches;
next	1.36;

1.36
date	2002.06.11.22.37.14;	author art;	state Exp;
branches;
next	1.35;

1.35
date	2002.06.10.14.19.50;	author espie;	state Exp;
branches;
next	1.34;

1.34
date	2002.06.10.13.54.22;	author espie;	state Exp;
branches;
next	1.33;

1.33
date	2000.08.04.10.03.16;	author espie;	state Exp;
branches;
next	1.32;

1.32
date	2000.07.31.20.54.13;	author espie;	state Exp;
branches;
next	1.31;

1.31
date	2000.02.15.19.40.23;	author espie;	state Exp;
branches;
next	1.30;

1.30
date	2000.02.09.02.18.36;	author espie;	state Exp;
branches;
next	1.29;

1.29
date	99.06.07.00.45.37;	author deraadt;	state Exp;
branches;
next	1.28;

1.28
date	99.01.24.18.42.16;	author espie;	state Exp;
branches;
next	1.27;

1.27
date	99.01.24.10.25.53;	author downsj;	state Exp;
branches;
next	1.26;

1.26
date	99.01.11.16.38.00;	author espie;	state Exp;
branches;
next	1.25;

1.25
date	98.10.18.20.02.35;	author millert;	state Exp;
branches;
next	1.24;

1.24
date	97.09.05.19.53.23;	author flipk;	state Exp;
branches;
next	1.23;

1.23
date	97.08.18.14.35.49;	author kstailey;	state Exp;
branches;
next	1.22;

1.22
date	97.08.18.00.22.57;	author kstailey;	state Exp;
branches;
next	1.21;

1.21
date	97.08.06.10.22.13;	author niklas;	state Exp;
branches;
next	1.20;

1.20
date	97.08.01.22.48.18;	author kstailey;	state Exp;
branches;
next	1.19;

1.19
date	97.08.01.18.11.32;	author kstailey;	state Exp;
branches;
next	1.18;

1.18
date	97.07.29.03.37.05;	author kstailey;	state Exp;
branches;
next	1.17;

1.17
date	97.07.29.03.16.30;	author kstailey;	state Exp;
branches;
next	1.16;

1.16
date	97.07.24.20.08.25;	author kstailey;	state Exp;
branches;
next	1.15;

1.15
date	97.07.24.16.00.50;	author kstailey;	state Exp;
branches;
next	1.14;

1.14
date	97.07.24.15.46.17;	author kstailey;	state Exp;
branches;
next	1.13;

1.13
date	97.07.24.15.24.09;	author kstailey;	state Exp;
branches;
next	1.12;

1.12
date	97.07.24.15.14.01;	author kstailey;	state Exp;
branches;
next	1.11;

1.11
date	97.06.23.23.19.47;	author kstailey;	state Exp;
branches;
next	1.10;

1.10
date	97.06.23.22.20.25;	author kstailey;	state Exp;
branches;
next	1.9;

1.9
date	97.06.23.12.13.45;	author kstailey;	state Exp;
branches;
next	1.8;

1.8
date	96.07.20.09.05.10;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	96.02.02.07.23.19;	author etheisen;	state Exp;
branches;
next	1.6;

1.6
date	96.02.02.06.43.48;	author etheisen;	state Exp;
branches;
next	1.5;

1.5
date	96.02.02.06.34.09;	author etheisen;	state Exp;
branches;
next	1.4;

1.4
date	96.02.02.00.49.14;	author niklas;	state Exp;
branches;
next	1.3;

1.3
date	96.01.01.23.51.29;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	95.12.27.10.42.07;	author niklas;	state Exp;
branches;
next	1.1;

1.1
date	95.12.22.18.12.36;	author niklas;	state Exp;
branches;
next	;


desc
@@


1.45
log
@Set permissions of /usr/share/info/dir explicitly, so they don't depend on
the umask.

ok millert
@
text
@#	$OpenBSD: Makefile.bsd-wrapper,v 1.44 2016/10/03 21:24:40 natano Exp $

INFODIR=	infodir=/usr/share/info
INFOPATH=	DEFAULT_INFOPATH=/usr/local/info:/usr/share/info:.

MAN=	doc/info.1 doc/install-info.1 doc/makeinfo.1 doc/texi2dvi.1
MAN+= doc/texindex.1 doc/info.5 doc/texinfo.5 doc/infokey.1

XCFLAGS=	CC="${CC}" CFLAGS="${CFLAGS} ${COPTS}" LDFLAGS="${LDFLAGS}"
GNUCFLAGS=	${XCFLAGS} \
	ACLOCAL=true AUTOHEADER=true AUTOCONF=true AUTOMAKE=true \
	MAKEINFOFLAGS='--no-split'

FSFMAKE=	${MAKE} ${GNUCFLAGS} ${INFODIR} ${INFOPATH} 
FSFALL=all-recursive
MAN+=		texi2pdf.1

.include <bsd.own.mk>

all:	config.status
	${FSFMAKE} LDFLAGS=${LDSTATIC} $(FSFALL)

.FORCE:	.IGNORE

.ifdef GLOBAL_AUTOCONF_CACHE
CF=	--cache-file=${GLOBAL_AUTOCONF_CACHE}
.else
CF=
.endif

config: .FORCE
.ifndef GLOBAL_AUTOCONF_CACHE
	-rm -f config.cache
.endif
	PATH="/bin:/usr/bin:/sbin:/usr/sbin" \
	${XCFLAGS} \
	INSTALL_PROGRAM="${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP} -o ${BINOWN} -g ${BINGRP} -m ${BINMODE}" \
	INSTALL_SCRIPT="${INSTALL} ${INSTALL_COPY} -o ${BINOWN} -g ${BINGRP} -m ${BINMODE}" \
	INSTALL_DATA="${INSTALL} ${INSTALL_COPY} -o ${DOCOWN} -g ${DOCGRP}  -m ${NONBINMODE}" \
		/bin/sh ${.CURDIR}/configure --infodir=/usr/share/info --prefix=/usr --disable-nls ${CF}

config.status:
	PATH="/bin:/usr/bin:/sbin:/usr/sbin" \
	${XCFLAGS} \
	INSTALL_PROGRAM="${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP} -o ${BINOWN} -g ${BINGRP}  -m ${BINMODE}" \
	INSTALL_SCRIPT="${INSTALL} ${INSTALL_COPY} -o ${BINOWN} -g ${BINGRP} -m ${BINMODE}" \
	INSTALL_DATA="${INSTALL} ${INSTALL_COPY} -o ${DOCOWN} -g ${DOCGRP} -m ${NONBINMODE}" \
		/bin/sh ${.CURDIR}/configure --infodir=/usr/share/info --prefix=/usr --disable-nls ${CF}

BEFOREMAN=config.status

.ifdef NOMAN
maninstall:
	@@echo NOMAN is set
.endif

install:	maninstall
	${INSTALL} -d -o ${BINOWN} -g ${BINGRP} ${DESTDIR}/usr/share/texinfo
	${FSFMAKE} mandir= INSTALL_MAN= DESTDIR=${DESTDIR} install
	sh ${.CURDIR}/util/gen-dir-node ${DESTDIR}/usr/share/info > \
	    ${DESTDIR}/usr/share/info/dir
	chown ${MANOWN}:${MANGRP} ${DESTDIR}/usr/share/info/dir
	chmod ${MANMODE} ${DESTDIR}/usr/share/info/dir

clean cleandir:
	rm -f ${CLEANFILES}
	if [ -e ${.OBJDIR}/Makefile ]; then \
		$(FSFMAKE) distclean; fi

depend:
	# Nothing here so far...

lint:
	# Nothing here so far...

tags:
	# Nothing here so far...

.include <bsd.obj.mk>
.include <bsd.subdir.mk>
.ifndef NOMAN
.include <bsd.man.mk>
.endif
@


1.44
log
@Fix ownership for install on a noperm filesystem.
joint work with tb
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.43 2016/09/11 14:17:04 natano Exp $
d63 1
@


1.43
log
@Install binaries, scripts and documentation with the usual owner/group/mode.
ok deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.42 2014/07/11 23:23:28 jsg Exp $
d58 1
d62 1
@


1.42
log
@use CC when running configure
matches the behaviour of the other Makefile.bsd-wrapper files
ok miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.41 2007/11/03 15:13:56 espie Exp $
d37 3
a39 1
	INSTALL_PROGRAM="${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP}" \
d45 3
a47 1
	INSTALL_PROGRAM="${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP}" \
@


1.41
log
@man pages can only be built after configure has run
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.40 2006/07/17 21:40:56 espie Exp $
d9 2
a10 1
GNUCFLAGS=	CC="${CC}" CFLAGS="${CFLAGS} ${COPTS}" \
d36 1
a36 1
	CFLAGS="${CFLAGS} ${COPTS}" \
d42 1
a42 1
	CFLAGS="${CFLAGS} ${COPTS}" \
@


1.40
log
@manpage for texi2pdf, with some help from jmc@@, okay theo@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.39 2006/07/17 16:41:02 espie Exp $
d44 2
@


1.39
log
@let texinfo use whatever makeinfo it wants, preferably the one it just
built, and override MAKEINFOFLAGS for --no-split instead.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.38 2006/07/12 23:00:07 espie Exp $
d15 1
@


1.38
log
@makeinfo --no-split, simplifies sets immensely.
Approved deraadt@@, kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.37 2003/02/16 18:28:41 deraadt Exp $
d11 1
a11 1
	MAKEINFO='makeinfo --no-split'
a35 1
	MAKEINFO='makeinfo --no-split' \
a41 1
	MAKEINFO='makeinfo --no-split' \
@


1.37
log
@a few missing man pages converted from info documents; work done by jmc
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.36 2002/06/11 22:37:14 art Exp $
d10 2
a11 1
	ACLOCAL=true AUTOHEADER=true AUTOCONF=true AUTOMAKE=true
d36 1
d43 1
@


1.36
log
@Zap CLEANFILES. Those files are no longer generated.
From fransoa holop with modifcations.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.35 2002/06/10 14:19:50 espie Exp $
d6 2
a7 2
MAN=	doc/info.1 doc/install-info.1 doc/makeinfo.1 doc/texi2dvi.1 
MAN+= doc/texindex.1 doc/info.5 doc/texinfo.5
@


1.35
log
@disable all auto* stuff explicitly, which is a heck of a lot easier to do
now.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.34 2002/06/10 13:54:22 espie Exp $
a4 2
CLEANFILES=	makeinfo/makeinfo.info info/info.info info/info-stnd.info \
	info/funs.h info/doc.c intl/libintl.h
@


1.34
log
@explicitly pass DESTDIR=value on install line, instead of tweaking
Makefiles to say DESTDIR?=.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.33 2000/08/04 10:03:16 espie Exp $
d11 3
a13 1
GNUCFLAGS=	CC="${CC}" CFLAGS="${CFLAGS} ${COPTS}"
@


1.33
log
@New make passes DESTDIR correctly, and texinfo handles it correctly.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.32 2000/07/31 20:54:13 espie Exp $
d49 1
a49 1
	${FSFMAKE} mandir= INSTALL_MAN= install
@


1.32
log
@Remove unneeded SUBDIR override.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.31 2000/02/15 19:40:23 espie Exp $
d3 1
a3 1
INFODIR=	infodir=${DESTDIR}/usr/share/info
d49 1
a49 2
	${FSFMAKE} prefix=${DESTDIR}/usr bindir=${DESTDIR}/usr/bin \
	    mandir= INSTALL_MAN= install
@


1.31
log
@--infodir in configure. Don't rely on stuff that is no longer available.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.30 2000/02/09 02:18:36 espie Exp $
a10 1
SUBDIRS=	intl lib info makeinfo po util doc
d12 1
a12 2
FSFMAKE=	${MAKE} SUBDIRS="${SUBDIRS}" ${GNUCFLAGS} ${INFODIR} \
			${INFOPATH} 
@


1.30
log
@Merge conflicts, and a few details:
- Makefile.bsd-wrapper: man pages, disable NLS for now.
- doc/Makefile.in: install man pages manually, remove buggy targets that
would break `make clean'.
- makeinfo/Makefile.in: shell failure ??? rework problematic line.
- util/texindex.c: let maketempname create the file, remove race condition.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.29 1999/06/07 00:45:37 deraadt Exp $
d37 1
a37 1
		/bin/sh ${.CURDIR}/configure --prefix=/usr --disable-nls ${CF}
d43 1
a43 1
		/bin/sh ${.CURDIR}/configure --prefix=/usr --disable-nls ${CF}
@


1.29
log
@move CC, CCX, and COPTS forward; wd@@ics.nara-wu.ac.jp
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.28 1999/01/24 18:42:16 espie Exp $
d6 4
a9 1
	info/funs.h info/doc.c
a10 1
NOMAN=		# info.1 manpage passed into obsolescence
d35 1
d37 1
a37 1
		/bin/sh ${.CURDIR}/configure --prefix=/usr ${CF}
d41 1
d43 1
a43 1
		/bin/sh ${.CURDIR}/configure --prefix=/usr ${CF}
d58 1
a58 1
	-@@if [ -e Makefile ]; then \
@


1.28
log
@Clean up mess instead of applying band-aids.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.27 1999/01/24 10:25:53 downsj Exp $
d10 1
a10 1
GNUCFLAGS=	CFLAGS="${CFLAGS}"
@


1.27
log
@Whomever thinks that a 'make clean' should do a 'make all' first shall be
cursed to do builds on a 68020 for the rest of their life!
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.26 1999/01/11 16:38:00 espie Exp $
d12 2
a13 1
			${INFOPATH} all-recursive
d18 1
a18 1
	${FSFMAKE} LDFLAGS=${LDSTATIC}
d55 1
a55 2
		${MAKE} SUBDIRS="${SUBDIRS}" ${GNUCFLAGS} ${INFODIR} \
			${INFOPATH} distclean; fi
@


1.26
log
@Upgrade to 3.12, merge with OpenBSD changes.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.25 1998/10/18 20:02:35 millert Exp $
d53 3
a55 1
	-@@if [ -e Makefile ]; then ${FSFMAKE} distclean; fi
@


1.25
log
@set PATH before running configure since we can't rely on the user's path being sane
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.24 1997/09/05 19:53:23 flipk Exp $
d6 1
a6 1
		emacs/Makefile
@


1.24
log
@after configure, call "make all-recursive" instead of "make" -- this
short-circuits the dependencies that try to run things like automake
which we don't have and touch timestamp files in the source dir.
texinfo now appears to build in a read-only tree.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.23 1997/08/18 14:35:49 kstailey Exp $
d31 1
d36 1
@


1.23
log
@back out 1.22
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.22 1997/08/18 00:22:57 kstailey Exp $
d12 1
a12 1
			${INFOPATH}
@


1.22
log
@set x bits on critical files
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.21 1997/08/06 10:22:13 niklas Exp $
d54 1
a54 2
	-@@if [ ! -x missing ]; then chmod +x missing; fi # XXX ctm loses x bits
	-@@if [ ! -x mkinstalldirs ]; then chmod +x mkinstalldirs; fi # XXX
@


1.21
log
@OpenBSD customization.  As we have DESTDIR as a maketime configuration option,
infodir and friends must be passed down dynamically to subdir makes.
Also did some style nits in the wrapper for consistency.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.20 1997/08/01 22:48:18 kstailey Exp $
d54 2
a55 1
	# Nothing here so far...
@


1.20
log
@updates for 3.11
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.19 1997/08/01 18:11:32 kstailey Exp $
d5 2
a6 1
CLEANFILES=	makeinfo/makeinfo.info info/info.info info/info-stnd.info emacs/Makefile
d10 3
a12 2
GNUCFLAGS=	CFLAGS="$(CFLAGS)"
FSFMAKE=	${MAKE} SUBDIRS="$(SUBDIRS)" $(GNUCFLAGS) $(INFODIR) $(INFOPATH)
d32 1
a32 1
		/bin/sh ${.CURDIR}/configure --prefix=/usr $(CF)
d36 1
a36 1
		/bin/sh ${.CURDIR}/configure --prefix=/usr $(CF)
d50 1
a50 1
	rm -f $(CLEANFILES)
@


1.19
log
@optimize GLOBAL_AUTOCONF_CACHE code
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.18 1997/07/29 03:37:05 kstailey Exp $
d7 2
a8 2
MAN=		info/info.1
SUBDIRS=	libtxi makeinfo info util
@


1.18
log
@Changed the rules.
The variable is now GLOBAL_AUTOCONF_CACHE.  You must set it to the name
of the cache file to use.  Ether "setenv GLOBAL_AUTOCONF_CACHE /var/tmp/foo"
or add it to /etc/mk.conf
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.17 1997/07/29 03:16:30 kstailey Exp $
d20 4
a23 4
config: .FORCE
	INSTALL_PROGRAM="${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP}" \
		/bin/sh ${.CURDIR}/configure --prefix=/usr \
		--cache-file=${GLOBAL_AUTOCONF_CACHE}
a24 5
config.status:
	INSTALL_PROGRAM="${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP}" \
		/bin/sh ${.CURDIR}/configure --prefix=/usr \
		--cache-file=${GLOBAL_AUTOCONF_CACHE}
.else
d26 1
d28 1
d30 1
a30 1
		/bin/sh ${.CURDIR}/configure --prefix=/usr
d34 1
a34 2
		/bin/sh ${.CURDIR}/configure --prefix=/usr
.endif
@


1.17
log
@Start of GLOBAL_CACHE option to speed compiles.
This change should have no effect by default.
"setenv GLOBAL_CACHE" or add GLOBAL_CACHE to /etc/mk.conf to activate.
Global cache files are on a per-account basis to deal with security.
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.16 1997/07/24 20:08:25 kstailey Exp $
d19 1
a19 1
.ifdef GLOBAL_CACHE
d23 1
a23 1
		--cache-file=${HOME}/.Makefile.bsd-wrapper.cache
d28 1
a28 1
		--cache-file=${HOME}/.Makefile.bsd-wrapper.cache
@


1.16
log
@don't hardcode `install'
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.15 1997/07/24 16:00:50 kstailey Exp $
d19 11
d38 1
@


1.15
log
@get the "make -f Makefile.bsd-wrapper config" case too (pr 188.)
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.14 1997/07/24 15:46:17 kstailey Exp $
a13 6
.if defined (INSTALL_STRIP) && ${INSTALL_STRIP} == "-s"
INST_PROG='/usr/bin/install -cs'
.else
INST_PROG='/usr/bin/install -c'
.endif

d21 2
a22 1
	INSTALL_PROGRAM=$(INST_PROG) /bin/sh ${.CURDIR}/configure --prefix=/usr
d25 2
a26 1
	INSTALL_PROGRAM=$(INST_PROG) /bin/sh ${.CURDIR}/configure --prefix=/usr
@


1.14
log
@optimize pr 188
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.13 1997/07/24 15:24:09 kstailey Exp $
d27 1
a27 1
	/bin/sh ${.CURDIR}/configure --prefix=/usr
@


1.13
log
@don't crap out if DEBUG is set pr 188
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.12 1997/07/24 15:14:01 kstailey Exp $
d14 1
a14 4
.ifndef INSTALL_STRIP
INST_PROG='/usr/bin/install -c'
.else
.if (${INSTALL_STRIP} == "-s")
a17 1
.endif
@


1.12
log
@respect "INSTALL_STRIP= -s" pr 188
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.11 1997/06/23 23:19:47 kstailey Exp $
d14 3
d21 1
@


1.11
log
@tabs vs. spaces
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.10 1997/06/23 22:20:25 kstailey Exp $
d12 8
d30 1
a30 1
	/bin/sh ${.CURDIR}/configure --prefix=/usr
@


1.10
log
@respect NOMAN during install
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.9 1997/06/23 12:13:45 kstailey Exp $
d26 1
a26 1
        @@echo NOMAN is set
@


1.9
log
@respect NOMAN (in bulk)
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.8 1996/07/20 09:05:10 deraadt Exp $
d23 5
@


1.8
log
@auto-generate share/info/dir
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.7 1996/02/02 07:23:19 etheisen Exp $
d45 1
d47 1
@


1.7
log
@More files to smash while making clean.
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.6 1996/02/02 06:43:48 etheisen Exp $
d26 3
a28 1
	mandir= INSTALL_MAN= install
@


1.6
log
@Undo LDSTATIC change. Possibly needed.
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.5 1996/02/02 06:34:09 etheisen Exp $
d5 1
a5 1
CLEANFILES=	makeinfo/makeinfo.info info/info info/info-stnd.info
@


1.5
log
@Added default info path to match our directory structure.
Pass CFLAGS into 'configure' generated Makefile.
Setup infodir for both build and install.
Removed static linking.  Not required for texinfo.
Added CLEANFILES section to smash files cleandir missed.
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.4 1996/02/02 00:49:14 niklas Exp $
d13 1
a13 1
	${FSFMAKE} 
@


1.4
log
@"make -f Makefile.bsd-wrapper config" should *really* config, and
never use cached values.
@
text
@d1 5
a5 1
#	$Id: Makefile.bsd-wrapper,v 1.3 1996/01/01 23:51:29 deraadt Exp $
d9 2
a10 1
FSFMAKE=	${MAKE} SUBDIRS="$(SUBDIRS)"
d13 1
a13 1
	${FSFMAKE} LDFLAGS=${LDSTATIC}
d26 1
a26 1
	infodir=${DESTDIR}/usr/share/info mandir= INSTALL_MAN= install
d29 1
@


1.3
log
@cannot assume BINDIR is setup
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.2 1995/12/27 10:42:07 niklas Exp $
d13 1
@


1.2
log
@Support LDSTATIC and BINDIR
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.1 1995/12/22 18:12:36 niklas Exp $
d19 1
a19 1
	${FSFMAKE} prefix=${DESTDIR}/usr bindir=${DESTDIR}${BINDIR} \
@


1.1
log
@Don't build or install compiled elisp files or unformatted manpages.
However formatted ones shall be installed.  Fix typo.
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.1 1995/12/21 01:16:07 niklas Exp $
d8 1
a8 1
	${FSFMAKE}
d19 2
a20 2
	${FSFMAKE} prefix=${DESTDIR}/usr infodir=${DESTDIR}/usr/share/info \
		   mandir= INSTALL_MAN= install
@
