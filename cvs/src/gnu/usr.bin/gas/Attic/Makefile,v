head	1.9;
access;
symbols
	OPENBSD_5_3:1.8.0.28
	OPENBSD_5_3_BASE:1.8
	OPENBSD_5_2:1.8.0.26
	OPENBSD_5_2_BASE:1.8
	OPENBSD_5_1_BASE:1.8
	OPENBSD_5_1:1.8.0.24
	OPENBSD_5_0:1.8.0.22
	OPENBSD_5_0_BASE:1.8
	OPENBSD_4_9:1.8.0.20
	OPENBSD_4_9_BASE:1.8
	OPENBSD_4_8:1.8.0.18
	OPENBSD_4_8_BASE:1.8
	OPENBSD_4_7:1.8.0.14
	OPENBSD_4_7_BASE:1.8
	OPENBSD_4_6:1.8.0.16
	OPENBSD_4_6_BASE:1.8
	OPENBSD_4_5:1.8.0.12
	OPENBSD_4_5_BASE:1.8
	OPENBSD_4_4:1.8.0.10
	OPENBSD_4_4_BASE:1.8
	OPENBSD_4_3:1.8.0.8
	OPENBSD_4_3_BASE:1.8
	OPENBSD_4_2:1.8.0.6
	OPENBSD_4_2_BASE:1.8
	OPENBSD_4_1:1.8.0.4
	OPENBSD_4_1_BASE:1.8
	OPENBSD_4_0:1.8.0.2
	OPENBSD_4_0_BASE:1.8
	OPENBSD_3_9:1.7.0.2
	OPENBSD_3_9_BASE:1.7
	OPENBSD_3_8:1.6.0.18
	OPENBSD_3_8_BASE:1.6
	OPENBSD_3_7:1.6.0.16
	OPENBSD_3_7_BASE:1.6
	OPENBSD_3_6:1.6.0.14
	OPENBSD_3_6_BASE:1.6
	OPENBSD_3_5:1.6.0.12
	OPENBSD_3_5_BASE:1.6
	OPENBSD_3_4:1.6.0.10
	OPENBSD_3_4_BASE:1.6
	OPENBSD_3_3:1.6.0.8
	OPENBSD_3_3_BASE:1.6
	OPENBSD_3_2:1.6.0.6
	OPENBSD_3_2_BASE:1.6
	OPENBSD_3_1:1.6.0.4
	OPENBSD_3_1_BASE:1.6
	OPENBSD_3_0:1.6.0.2
	OPENBSD_3_0_BASE:1.6
	OPENBSD_2_9:1.5.0.10
	OPENBSD_2_9_BASE:1.5
	OPENBSD_2_8:1.5.0.8
	OPENBSD_2_8_BASE:1.5
	OPENBSD_2_7:1.5.0.6
	OPENBSD_2_7_BASE:1.5
	OPENBSD_2_6:1.5.0.4
	OPENBSD_2_6_BASE:1.5
	OPENBSD_2_5:1.5.0.2
	OPENBSD_2_5_BASE:1.5
	OPENBSD_2_4:1.4.0.2
	OPENBSD_2_4_BASE:1.4
	OPENBSD_2_3:1.3.0.2
	OPENBSD_2_3_BASE:1.3
	OPENBSD_2_2:1.2.0.6
	OPENBSD_2_2_BASE:1.2
	OPENBSD_2_1:1.2.0.4
	OPENBSD_2_1_BASE:1.2
	OPENBSD_2_0:1.2.0.2
	OPENBSD_2_0_BASE:1.2
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.9
date	2013.07.05.21.31.45;	author miod;	state dead;
branches;
next	1.8;

1.8
date	2006.07.12.23.00.07;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2005.12.16.23.06.05;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	2001.07.25.23.23.36;	author miod;	state Exp;
branches;
next	1.5;

1.5
date	98.11.01.01.38.13;	author smurph;	state Exp;
branches;
next	1.4;

1.4
date	98.04.25.06.48.34;	author niklas;	state Exp;
branches;
next	1.3;

1.3
date	98.02.15.18.48.39;	author niklas;	state Exp;
branches;
next	1.2;

1.2
date	96.08.20.05.14.07;	author tholo;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.38.56;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.38.56;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.9
log
@Put the a.out as and ld to rest in the Attic, finally!
@
text
@#	$OpenBSD: Makefile,v 1.8 2006/07/12 23:00:07 espie Exp $
#	$NetBSD: Makefile,v 1.25 1997/10/25 10:10:35 lukem Exp $
#	@@(#)Makefile	6.1 (Berkeley) 3/3/91
TARGET_MACHINE_ARCH?=	$(MACHINE_ARCH)

.if	(${TARGET_MACHINE_ARCH} == "m68k") || \
	(${TARGET_MACHINE_ARCH} == "vax") || \
	(${TARGET_MACHINE_ARCH} == "m88k") 
.if exists(config/Makefile.$(TARGET_MACHINE_ARCH))
.include "config/Makefile.$(TARGET_MACHINE_ARCH)"
.endif

.if !defined (gas_hosttype)
gas_hosttype=$(MACHINE_ARCH)
.endif
.if !defined (gas_target)
gas_target=$(TARGET_MACHINE_ARCH)
.endif
.if !defined (gas_objformat)
gas_objformat=aout
.endif

.if ($(TARGET_MACHINE_ARCH) != $(MACHINE_ARCH))
CPPFLAGS+=	-DCROSS_COMPILE
.endif

ADDINCLUDE=-I${.OBJDIR}

PROG=		as
SRCS+=		app.c as.c atof-generic.c bignum-copy.c \
		cond.c expr.c flo-const.c flo-copy.c flonum-mult.c \
		frags.c hash.c hex-value.c input-file.c input-scrub.c \
		listing.c messages.c obstack.c output-file.c read.c subsegs.c \
		symbols.c version.c write.c xmalloc.c xrealloc.c \
		obj-$(gas_objformat).c
CPPFLAGS+=	-I$(.CURDIR) ${ADDINCLUDE} -I$(.CURDIR)/config \
		-DOLD_GAS -DSIGTY=void -Derror=as_fatal \
		-DNETBSD_AOUT

CONF_HEADERS=	targ-cpu.h obj-format.h host.h targ-env.h

.PATH: $(.CURDIR)/config

beforedepend ${PROG}: ${CONF_HEADERS}

targ-cpu.h: Makefile config/Makefile.$(TARGET_MACHINE_ARCH)
	@@cmp -s $(.CURDIR)/config/tc-$(gas_target).h targ-cpu.h || \
	    ( echo "updating ${.TARGET}..." ; /bin/rm -f targ-cpu.h ; \
	    cp $(.CURDIR)/config/tc-$(gas_target).h targ-cpu.h )

obj-format.h: Makefile config/Makefile.$(TARGET_MACHINE_ARCH)
	@@cmp -s $(.CURDIR)/config/obj-$(gas_objformat).h obj-format.h || \
	    ( echo "updating ${.TARGET}..." ; /bin/rm -f obj-format.h ; \
	    cp $(.CURDIR)/config/obj-$(gas_objformat).h obj-format.h )

.if exists ($(.CURDIR)/config/ho-$(gas_hosttype).h)
config_hostfile=	$(.CURDIR)/config/ho-$(gas_hosttype).h
.else
config_hostfile=	$(.CURDIR)/config/ho-generic.h
.endif

host.h: $(config_hostfile)
	@@cmp -s $(config_hostfile) host.h || \
	    ( echo "updating ${.TARGET}..." ; /bin/rm -f host.h ; \
	    cp $(config_hostfile) host.h )

.if exists ($(.CURDIR)/config/te-$(TARGET_MACHINE_ARCH).h)
config_targenvfile=	$(.CURDIR)/config/te-$(TARGET_MACHINE_ARCH).h
.else
config_targenvfile=	$(.CURDIR)/config/te-generic.h
.endif

targ-env.h: Makefile config/Makefile.$(TARGET_MACHINE_ARCH)
	@@cmp -s $(config_targenvfile) targ-env.h || \
	    ( echo "updating ${.TARGET}..." ; /bin/rm -f targ-env.h ; \
	    cp $(config_targenvfile) targ-env.h )

CLEANFILES+= ${CONF_HEADERS}

.endif

MAN=	as.1

all:
	(cd ${.CURDIR}/doc; m4 pretex.m4 none.m4 all.m4 as.texinfo) > as-all.texinfo
	makeinfo --no-split -o as.info as-all.texinfo

afterinstall: as.info
	${INSTALL} ${INSTALL_COPY} -o ${DOCOWN} -g ${DOCGRP} -m ${DOCMODE} \
	    as.info ${DESTDIR}/usr/share/info/

.include <bsd.prog.mk>
@


1.8
log
@makeinfo --no-split, simplifies sets immensely.
Approved deraadt@@, kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 2005/12/16 23:06:05 deraadt Exp $
@


1.7
log
@build old info files; ok espie
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.6 2001/07/25 23:23:36 miod Exp $
d86 1
a86 1
	makeinfo --split-size 200000 -o as.info as-all.texinfo
d90 1
a90 1
	    as.info as.info-1 ${DESTDIR}/usr/share/info/
@


1.6
log
@Fix compilation on mvme88k (until binutils are ready).
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.5 1998/11/01 01:38:13 smurph Exp $
d6 1
a6 4
.if	(${TARGET_MACHINE_ARCH} == "i386") || \
	(${TARGET_MACHINE_ARCH} == "m68k") || \
	(${TARGET_MACHINE_ARCH} == "ns32k") || \
	(${TARGET_MACHINE_ARCH} == "sparc") || \
d83 8
@


1.5
log
@mvme88k changes.  Fixed killer bug in xcr instruction.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 1998/04/25 06:48:34 niklas Exp $
d11 1
a11 1
	(${TARGET_MACHINE_ARCH} == "mvme88k") 
@


1.4
log
@Improved cross-compilability (from non-a.out host)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.3 1998/02/15 18:48:39 niklas Exp $
d10 2
a11 1
	(${TARGET_MACHINE_ARCH} == "vax")
@


1.3
log
@Merge of NetBSD changes + $OpenBSD$ tags
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.2 1996/08/20 05:14:07 tholo Exp $
d64 1
a64 1
host.h: Makefile config/Makefile.$(MACHINE_ARCH)
@


1.2
log
@R.I.P.
@
text
@d1 2
a2 2
#	$OpenBSD$
#	$NetBSD: Makefile,v 1.17 1995/04/23 07:58:35 cgd Exp $
d4 1
d6 8
a13 1
.include "config/Makefile.$(MACHINE_ARCH)"
d19 1
a19 1
gas_target=$(MACHINE_ARCH)
d25 4
d38 1
a38 1
CFLAGS+=	-I$(.CURDIR) ${ADDINCLUDE} -I$(.CURDIR)/config \
d48 1
a48 1
targ-cpu.h: Makefile config/Makefile.$(MACHINE_ARCH)
d53 1
a53 1
obj-format.h: Makefile config/Makefile.$(MACHINE_ARCH)
d69 2
a70 2
.if exists ($(.CURDIR)/config/te-$(MACHINE_ARCH).h)
config_targenvfile=	$(.CURDIR)/config/te-$(MACHINE_ARCH).h
d75 1
a75 1
targ-env.h: Makefile config/Makefile.$(MACHINE_ARCH)
d81 4
@


1.1
log
@Initial revision
@
text
@d1 1
a28 2
#LDADD+=		-lgnumalloc
DPADD+=		/usr/lib/libgnumalloc.a
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
