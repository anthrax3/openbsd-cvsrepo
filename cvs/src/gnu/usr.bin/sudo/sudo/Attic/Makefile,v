head	1.7;
access;
symbols
	OPENBSD_2_6:1.6.0.4
	OPENBSD_2_6_BASE:1.6
	OPENBSD_2_5:1.6.0.2
	OPENBSD_2_5_BASE:1.6
	OPENBSD_2_4:1.5.0.2
	OPENBSD_2_4_BASE:1.5
	OPENBSD_2_3:1.4.0.6
	OPENBSD_2_3_BASE:1.4
	OPENBSD_2_2:1.4.0.4
	OPENBSD_2_2_BASE:1.4
	OPENBSD_2_1:1.4.0.2
	OPENBSD_2_1_BASE:1.4;
locks; strict;
comment	@# @;


1.7
date	99.11.18.16.39.33;	author millert;	state dead;
branches;
next	1.6;

1.6
date	99.03.29.20.29.00;	author millert;	state Exp;
branches;
next	1.5;

1.5
date	98.09.15.02.42.43;	author millert;	state Exp;
branches;
next	1.4;

1.4
date	97.04.19.21.26.13;	author millert;	state Exp;
branches;
next	1.3;

1.3
date	97.03.18.20.48.46;	author maja;	state Exp;
branches;
next	1.2;

1.2
date	96.10.31.14.59.54;	author millert;	state Exp;
branches;
next	1.1;

1.1
date	96.10.14.05.14.43;	author millert;	state Exp;
branches;
next	;


desc
@@


1.7
log
@remove old GPL'd sudo
@
text
@#       $OpenBSD: Makefile,v 1.6 1999/03/29 20:29:00 millert Exp $

PROG=	sudo
MAN=	sudo.8 sudoers.5
CFLAGS+=-I${.CURDIR} -I.
SRCS=	check.c find_path.c getspwuid.c goodpath.c interfaces.c logging.c parse.c sudo.c sudo_setenv.c tgetpass.c sudo.tab.c lex.yy.c alloc.c
CLEANFILES+=sudo.tab.c sudo.tab.h lex.yy.c

LDADD=  -lcompat
DPADD=  ${LIBCOMPAT}

.include <bsd.own.mk>   # For SKEY, KERBEROS and KERBEROS5

.if (${SKEY} == "yes")
CFLAGS+=-DHAVE_SKEY
LDADD+= -lskey
DPADD+= ${LIBSKEY}
.endif

.if (${KERBEROS5} == "yes")
CFLAGS+= -DHAVE_KERB5 -I${DESTDIR}/usr/include/kerberosIV
LDADD+= -lkrb5 -lcrypto
DPADD+= ${LIBKRB5} ${LIBCRYPTO}
.elif (${KERBEROS} == "yes")
CFLAGS+= -DHAVE_KERB4 -I${DESTDIR}/usr/include/kerberosIV
LDADD+= -lkrb -ldes
DPADD+= ${LIBKRB} ${LIBDES}
.endif

BINOWN=	root
BINMODE=4111
BINDIR?=/usr/bin

.include <bsd.prog.mk>

lex.yy.c: parse.lex
	rm -f lex.yy.c
	$(LEX) ${.CURDIR}/parse.lex

sudo.tab.c sudo.tab.h: parse.yacc
	$(YACC) -b sudo -d ${.CURDIR}/parse.yacc
@


1.6
log
@sudo 1.5.9--fixes some parser bugs
@
text
@d1 1
a1 1
#       $OpenBSD: Makefile,v 1.5 1998/09/15 02:42:43 millert Exp $
@


1.5
log
@sudo 1.5.6
@
text
@d1 1
a1 1
#       $OpenBSD: Makefile,v 1.4 1997/04/19 21:26:13 millert Exp $
d6 1
a6 1
SRCS=	check.c find_path.c getspwuid.c goodpath.c interfaces.c logging.c parse.c sudo.c sudo_setenv.c tgetpass.c sudo.tab.c lex.yy.c
@


1.4
log
@Changed ``defined(KERBEROS)'' to ``(${KERBEROS} == "yes")''
Same change doen for SKEY, YP, and KERBEROS5.  This allows
people to override those setting in /etc/mk.conf.
@
text
@d1 1
a1 1
#       $OpenBSD: Makefile,v 1.3 1997/03/18 20:48:46 maja Exp $
d6 2
a7 2
SRCS=	check.c find_path.c getspwuid.c goodpath.c interfaces.c logging.c parse.c sudo.c sudo_setenv.c tgetpass.c y.tab.c lex.yy.c
CLEANFILES+=y.tab.c y.tab.h lex.yy.c
d40 2
a41 2
y.tab.c y.tab.h: parse.yacc
	$(YACC) -d ${.CURDIR}/parse.yacc
@


1.3
log
@Added ${DESTDIR} in -I/usr/include/kerberosIV. -moj
@
text
@d1 1
a1 1
#       $OpenBSD: Makefile,v 1.2 1996/10/31 14:59:54 millert Exp $
d14 1
a14 1
.if defined(SKEY)
d20 1
a20 1
.if defined(KERBEROS5)
d24 1
a24 1
.elif defined(KERBEROS)
@


1.2
log
@Correct kerb header location.
@
text
@d1 1
a1 1
#       $OpenBSD: Makefile,v 1.1 1996/10/14 05:14:43 millert Exp $
d21 1
a21 1
CFLAGS+= -DHAVE_KERB5 -I/usr/include/kerberosIV
d25 1
a25 1
CFLAGS+= -DHAVE_KERB4 -I/usr/include/kerberosIV
@


1.1
log
@sudo 1.5.2
@
text
@d1 1
a1 1
#       $OpenBSD: Makefile,v 1.6 1996/07/31 17:44:23 deraadt Exp $
d21 1
a21 1
CFLAGS+= -DHAVE_KERB5
d25 1
a25 1
CFLAGS+= -DHAVE_KERB4
@
