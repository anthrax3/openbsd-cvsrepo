head	1.2;
access;
symbols
	OPENBSD_3_5:1.1.1.2.0.8
	OPENBSD_3_5_BASE:1.1.1.2
	OPENBSD_3_4:1.1.1.2.0.6
	OPENBSD_3_4_BASE:1.1.1.2
	OPENBSD_3_3:1.1.1.2.0.4
	OPENBSD_3_3_BASE:1.1.1.2
	OPENBSD_3_2:1.1.1.2.0.2
	OPENBSD_3_2_BASE:1.1.1.2
	binutils-2_11_2:1.1.1.2
	OPENBSD_3_1:1.1.1.1.0.8
	OPENBSD_3_1_BASE:1.1.1.1
	OPENBSD_3_0:1.1.1.1.0.6
	OPENBSD_3_0_BASE:1.1.1.1
	BINUTILS-2_10_1:1.1.1.1
	OPENBSD_2_9:1.1.1.1.0.4
	OPENBSD_2_9_BASE:1.1.1.1
	OPENBSD_2_8:1.1.1.1.0.2
	OPENBSD_2_8_BASE:1.1.1.1
	BINUTILS-2_10:1.1.1.1
	FSF:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2004.05.17.21.54.40;	author drahn;	state dead;
branches;
next	1.1;

1.1
date	2000.09.12.14.47.04;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.09.12.14.47.04;	author espie;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2002.05.13.13.42.15;	author fgsch;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Resolve merge conflicts, adjust method of W^X handing (.sh files)
remove testsuites (not useable) remove mmalloc (not part of new binutils).
@
text
@# Check GNU-specific embedded relocs, for ELF.

	.text
	.set noreorder
	nop
l2:	jal	g1		# R_MIPS_GNU_REL16_S2	g1   -1
	nop
	b	g2		# R_MIPS_GNU_REL16_S2	g2   -1
	nop
	b	g2		# R_MIPS_GNU_REL16_S2	g2   -1
	nop
	jal	l1		# R_MIPS_GNU_REL16_S2	.foo 3F
	nop
	jal	l2		# R_MIPS_GNU_REL16_S2	.text 0  or -9
	nop
	b	l1+8		# R_MIPS_GNU_REL16_S2	.foo 41
	nop
l3:
	b	l2		# R_MIPS_GNU_REL16_S2	.text 0  or -D
	nop
	la	$3,g1-l3	# R_MIPS_GNU_REL_HI16   g1   0
				# R_MIPS_GNU_REL_LO16   g1   C
	la	$3,l1-l3	# R_MIPS_GNU_REL_HI16   .foo 0
				# R_MIPS_GNU_REL_LO16   .foo 114
	la	$3,l2-l3	# -30
	.word	g1		# R_MIPS_32	g1    0
	.word	l1		# R_MIPS_32	.foo  100
	.word	l2		# R_MIPS_32	.text 4
	.word	g1-l3		# R_MIPS_PC32	g1    28
	.word	l1-l3		# R_MIPS_PC32	.foo  12C
	.word	l2-l3		# -30
	.align 3
	.dword	g1		# R_MIPS_64	g1    0
	.dword	l1		# R_MIPS_64	.foo  100
	.dword	l2		# R_MIPS_64	.text 4
	.dword	g1-l3		# R_MIPS_PC64	g1    4C
	.dword	l1-l3		# R_MIPS_PC64	.foo  154
	.dword	l2-l3		# -30
l5:
	b	2f		# R_MIPS_GNU_REL16_S2	.text 32
	b	2f+4		# R_MIPS_GNU_REL16_S2	.text 33
	la	$3,2f-l5	# R_MIPS_GNU_REL_HI16	.text 0
				# R_MIPS_GNU_REL_HI16	.text D8
	la	$3,2f+8-l5	# R_MIPS_GNU_REL_HI16	.text 0
				# R_MIPS_GNU_REL_HI16	.text E8

	.word	2f		# R_MIPS_32	.text CC
	.word	2f-l5		# R_MIPS_PC32	.text EC  or 34
	.dword	2f		# R_MIPS_64	.text CC
	.dword	2f-l5		# R_MIPS_PC64	.text F8  or 34
	nop
2:				# at address 0xCC.
	b	2b		# R_MIPS_GNU_REL16_S2	.text 32
	b	2b+4		# R_MIPS_GNU_REL16_S2	.text 33
	la	$3,2b-l5	# R_MIPS_GNU_REL_HI16	.text 0
				# R_MIPS_GNU_REL_HI16	.text 10C
	la	$3,2b+8-l5	# R_MIPS_GNU_REL_HI16	.text 0
				# R_MIPS_GNU_REL_HI16	.text 11C
	.word	2b		# R_MIPS_32	.text CC
	.word	2b-l5		# R_MIPS_PC32	.text 11C  or 34
	nop
	.dword	2b		# R_MIPS_64	.text CC
	.dword	2b-l5		# R_MIPS_PC64	.text 98  or 34
	
	.section ".foo","ax",@@progbits
	nop
l4:	
	la	$3,g1-l4
	la	$3,l1-l4
	la	$3,l2-l4
	la	$3,g1-l4

	dla	$3,g1-l4
	dla	$3,l1-l4
	dla	$3,l2-l4

	.word	g1
	.word	l1
	.word	l2
	.word	g1-l4
	.word	l1-l4
	.word	l2-l4
	.dword	g1
	.dword	l1
	.dword	l2
	.dword	g1-l4
	.dword	l1-l4
	.dword	l2-l4

	la	$3,g1-l4+4
	la	$3,l1-l4+4
	la	$3,l2-l4+4

	dla	$3,g1-l4+4
	dla	$3,l1-l4+4
	dla	$3,l2-l4+4

	.word	g1+4
	.word	l1+4
	.word	l2+4
	.word	g1-l4+4
	.word	l1-l4+4
	.word	l2-l4+4
	.dword	g1+4
	.dword	l1+4
	.dword	l2+4
	.dword	g1-l4+4
	.dword	l1-l4+4
	.dword	l2-l4+4
l1:

	nop
@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@Import binutils-2.10
- only the binutils package (no gdb here)
- don't import libiberty and texinfo, they are elsewhere
- remove all .info* generated files
@
text
@@


1.1.1.2
log
@Import binutils-2.11.2
- only the binutils package (no gdb here)
- don't import libiberty and texinfo, they are elsewhere
- remove all .info* generated files
@
text
@d43 1
a43 1
	                        # R_MIPS_GNU_REL_LO16   .text D8
d45 1
a45 2
	                        # R_MIPS_GNU_REL_LO16   .text E8

d55 4
a58 2
	la      $3,2b-l5        # 34
	la      $3,2b+8-l5      # 3C
d64 1
a64 4

# align section end to 16-byte boundary for easier testing on multiple targets
	.p2align 4

a112 3

# align section end to 16-byte boundary for easier testing on multiple targets
	.p2align 4
@

