head	1.4;
access;
symbols
	OPENBSD_6_2_BASE:1.4
	OPENBSD_6_1:1.4.0.70
	OPENBSD_6_1_BASE:1.4
	OPENBSD_6_0:1.4.0.66
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.62
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.64
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.56
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.60
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.58
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.54
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.4.0.52
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.4.0.50
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.48
	OPENBSD_5_0:1.4.0.46
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.4.0.44
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.4.0.42
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.4.0.38
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.4.0.40
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.36
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.4.0.34
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.4.0.32
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_2:1.4.0.30
	OPENBSD_4_2_BASE:1.4
	OPENBSD_4_1:1.4.0.28
	OPENBSD_4_1_BASE:1.4
	OPENBSD_4_0:1.4.0.26
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.4.0.24
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.4.0.22
	OPENBSD_3_8_BASE:1.4
	OPENBSD_3_7:1.4.0.20
	OPENBSD_3_7_BASE:1.4
	BINUTILS_2_15:1.1.1.4
	OPENBSD_3_6:1.4.0.18
	OPENBSD_3_6_BASE:1.4
	BINUTILS-2_14:1.1.1.4
	OPENBSD_3_5:1.4.0.16
	OPENBSD_3_5_BASE:1.4
	OPENBSD_3_4:1.4.0.14
	OPENBSD_3_4_BASE:1.4
	OPENBSD_3_3:1.4.0.12
	OPENBSD_3_3_BASE:1.4
	OPENBSD_3_2:1.4.0.10
	OPENBSD_3_2_BASE:1.4
	binutils-2_11_2:1.1.1.4
	OPENBSD_3_1:1.4.0.8
	OPENBSD_3_1_BASE:1.4
	OPENBSD_3_0:1.4.0.6
	OPENBSD_3_0_BASE:1.4
	BINUTILS-2_10_1:1.1.1.4
	OPENBSD_2_9:1.4.0.4
	OPENBSD_2_9_BASE:1.4
	OPENBSD_2_8:1.4.0.2
	OPENBSD_2_8_BASE:1.4
	BINUTILS-2_10:1.1.1.4
	OPENBSD_2_7:1.3.0.18
	OPENBSD_2_7_BASE:1.3
	new-binutils:1.3.0.16
	OPENBSD_2_6:1.3.0.14
	OPENBSD_2_6_BASE:1.3
	OPENBSD_2_5:1.3.0.12
	OPENBSD_2_5_BASE:1.3
	OPENBSD_2_4:1.3.0.10
	OPENBSD_2_4_BASE:1.3
	OPENBSD_2_3:1.3.0.8
	OPENBSD_2_3_BASE:1.3
	OPENBSD_2_2:1.3.0.6
	OPENBSD_2_2_BASE:1.3
	BINUTILS-2_8_1:1.1.1.4
	OPENBSD_2_1:1.3.0.4
	OPENBSD_2_1_BASE:1.3
	CYGNUS-961112:1.1.1.3
	OPENBSD_2_0:1.3.0.2
	OPENBSD_2_0_BASE:1.3
	CYGNUS-960904:1.1.1.3
	CYGNUS-960609:1.1.1.2
	CYGNUS-960607:1.1.1.2
	CYGNUS:1.1.1
	FSF_2_6:1.1.1.1
	FSF:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2000.09.12.22.24.41;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	96.09.04.19.03.02;	author niklas;	state Exp;
branches;
next	1.2;

1.2
date	96.06.10.10.48.39;	author niklas;	state Exp;
branches;
next	1.1;

1.1
date	96.01.08.11.03.48;	author niklas;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	96.01.08.11.03.48;	author niklas;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	96.06.07.11.03.47;	author niklas;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	96.09.04.17.49.45;	author niklas;	state Exp;
branches;
next	1.1.1.4;

1.1.1.4
date	97.05.29.09.16.09;	author niklas;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Resolve other problems that dumb cvs can't find out by itself.

(trivial part done, `interesting' patches remain)
@
text
@# Sed commands to finish translating the binutils Unix makefile into MPW syntax.

# Add a rule.
/^#### .*/a\
\
"{o}"underscore.c.o \\Option-f "{o}"underscore.c\

# Comment out any alias settings.
/^host_alias =/s/^/#/
/^target_alias =/s/^/#/

# Whack out unused host define bits.
/HDEFINES/s/@@HDEFINES@@//

# Don't build specialized tools.
/BUILD_NLMCONV/s/@@BUILD_NLMCONV@@//
/BUILD_SRCONV/s/@@BUILD_SRCONV@@//
/BUILD_DLLTOOL/s/@@BUILD_DLLTOOL@@//

/UNDERSCORE/s/@@UNDERSCORE@@/{UNDERSCORE}/

# Don't need this.
/@@HLDFLAGS@@/s/@@HLDFLAGS@@//

# Point at the libraries directly.
/@@BFDLIB@@/s/@@BFDLIB@@/::bfd:libbfd.o/
/@@OPCODES@@/s/@@OPCODES@@/::opcodes:libopcodes.o/

# Whack out target makefile fragment.
/target_makefile_fragment/s/target_makefile_fragment@@//

# Fix and add to the include paths.
/^INCLUDES = .*$/s/$/ -i "{INCDIR}":mpw: -i ::extra-include:/
/BFDDIR/s/-i {BFDDIR} /-i "{BFDDIR}": /
/INCDIR/s/-i {INCDIR} /-i "{INCDIR}": /

# Use byacc instead of bison (for now anyway).
/BISON/s/^BISON =.*$/BISON = byacc/
#/BISONFLAGS/s/^BISONFLAGS =.*$/BISONFLAGS = /

# Embed the version in symbolic doublequotes that will expand to
# the right thing for each compiler.
/VERSION/s/'"{VERSION}"'/{dq}{VERSION}{dq}/

# '+' is a special char to MPW, don't use it ever.
/c++filt/s/c++filt/cplusfilt/

# All of the binutils use the same Rez file, change names to refer to it.
/^{[A-Z]*_PROG}/s/$/ "{s}"mac-binutils.r/
/{[A-Z]*_PROG}\.r/s/{[A-Z]*_PROG}\.r/mac-binutils.r/

# There are auto-generated references to BFD .h files that are not
# in the objdir (like bfd.h) but are in the source dir.
/::bfd:lib/s/::bfd:lib\([a-z]*\)\.h/{BFDDIR}:lib\1.h/g

# Fix the locations of generated files.
/config/s/"{s}"config\.h/"{o}"config.h/g
/config/s/^config\.h/"{o}"config\.h/
/underscore/s/"{s}"underscore\.c/"{o}"underscore.c/g
/underscore/s/^underscore\.c/"{o}"underscore\.c/

# Fix paths to generated source files.
/lex.yy.c/s/"{s}"lex\.yy\.c/"{o}"lex.yy.c/g
/lex.yy.c/s/^lex\.yy\.c/"{o}"lex.yy.c/
/arlex.c/s/"{s}"arlex\.c/"{o}"arlex.c/g
/arlex.c/s/^arlex\.c/"{o}"arlex.c/
/y.tab.c/s/"{s}"y\.tab\.c/"{o}"y.tab.c/g
/y.tab.c/s/^y\.tab\.c/"{o}"y.tab.c/
/arparse.c/s/"{s}"arparse\.c/"{o}"arparse.c/g
/arparse.c/s/^arparse\.c/"{o}"arparse.c/
/y.tab.h/s/"{s}"y\.tab\.h/"{o}"y.tab.h/g
/y.tab.h/s/^y\.tab\.h/"{o}"y.tab.h/
/arparse.h/s/"{s}"arparse\.h/"{o}"arparse.h/g
/arparse.h/s/^arparse\.h/"{o}"arparse.h/

/"{s}"{INCDIR}/s/"{s}"{INCDIR}/"{INCDIR}"/g

# The generated lexer may include an ifdef for older Mac compilers that
# needs to work with newer compilers also.
/lex.yy.c/s/Rename -y \([^ ]*\) \([^ ]*\)$/sed -e 's,ifdef macintosh,if defined(macintosh) || defined(__MWERKS__),' \1 > \2/

# Fix an over-eagerness.
/echo.*WARNING.*This file/s/'.*'/' '/

# Add a "stamps" target.
$a\
stamps \\Option-f stamp-under\

/^install \\Option-f /,/^$/c\
install \\Option-f  all install-only\
\
install-only \\Option-f\
	NewFolderRecursive "{bindir}"\
	# Need to copy all the tools\
	For prog in {PROGS}\
		Set progname `echo {prog} | sed -e 's/.new//'`\
		Duplicate -y :{prog} "{bindir}"{progname}\
	End For\


/true/s/ ; @@true$//

# dot files are trouble, remove them and their actions.
/^\.dep/,/^$/d

# Remove un-useful targets.
/^Makefile \\Option-f/,/^$/d
/^"{o}"config.h \\Option-f/,/^$/d
/^config.status \\Option-f/,/^$/d

# Don't try to make the demangler's man page, it's useless.
/^{DEMANGLER_PROG}\.1 \\Option-f/,/^$/d
# Don't depend on it either.
/{DEMANGLER_PROG}/s/ {DEMANGLER_PROG}\.1//

@


1.3
log
@Merge the Cygnus 960904 sources
@
text
@d93 1
a93 7
	If "`Exists "{prefix}"`" == ""\
		Echo "{prefix}" does not exist, cannot install anything\
		Exit 1\
	End If\
	If "`Exists "{bindir}"`" == ""\
		NewFolder "{bindir}"\
	End If\
@


1.2
log
@Bring Cygnus versions into the trunk, keeping our local patches
@
text
@d15 1
d41 4
d48 1
@


1.1
log
@Initial revision
@
text
@d3 1
a3 1
# Define undefined makefile variables.
a5 5
BUILD_NLMCONV = \
BUILD_SRCONV = \
SYSINFO_PROG = \
BUILD_DLLTOOL = \
\
d8 4
d21 7
d46 4
d78 27
@


1.1.1.1
log
@Initial GNU binutils 2.6 import
@
text
@@


1.1.1.2
log
@(Correct) Import of Cygnus binutils snapshot taken 960607
@
text
@d3 1
a3 1
# Add a rule.
d6 5
a12 4
# Comment out any alias settings.
/^host_alias =/s/^/#/
/^target_alias =/s/^/#/

a21 7
# Don't need this.
/@@HLDFLAGS@@/s/@@HLDFLAGS@@//

# Point at the libraries directly.
/@@BFDLIB@@/s/@@BFDLIB@@/::bfd:libbfd.o/
/@@OPCODES@@/s/@@OPCODES@@/::opcodes:libopcodes.o/

a39 4
# There are auto-generated references to BFD .h files that are not
# in the objdir (like bfd.h) but are in the source dir.
/::bfd:lib/s/::bfd:lib\([a-z]*\)\.h/{BFDDIR}:lib\1.h/g

a67 27

# Add a "stamps" target.
$a\
stamps \\Option-f stamp-under\

/^install \\Option-f /,/^$/c\
install \\Option-f  all install-only\
\
install-only \\Option-f\
	If "`Exists "{prefix}"`" == ""\
		Echo "{prefix}" does not exist, cannot install anything\
		Exit 1\
	End If\
	If "`Exists "{bindir}"`" == ""\
		NewFolder "{bindir}"\
	End If\
	# Need to copy all the tools\
	For prog in {PROGS}\
		Set progname `echo {prog} | sed -e 's/.new//'`\
		Duplicate -y :{prog} "{bindir}"{progname}\
	End For\


/true/s/ ; @@true$//

# dot files are trouble, remove them and their actions.
/^\.dep/,/^$/d
@


1.1.1.3
log
@Import of binutils, gas, ld & gprof from Cygnus 960904 tree
@
text
@a14 1
# Don't build specialized tools.
a39 4
# Embed the version in symbolic doublequotes that will expand to
# the right thing for each compiler.
/VERSION/s/'"{VERSION}"'/{dq}{VERSION}{dq}/

a42 1
# All of the binutils use the same Rez file, change names to refer to it.
@


1.1.1.4
log
@Import of binutils-2.8.1 from Cygnus/FSF
@
text
@d93 7
a99 1
	NewFolderRecursive "{bindir}"\
@
