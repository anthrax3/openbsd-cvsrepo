head	1.2;
access;
symbols
	OPENBSD_2_7:1.1.1.3.0.14
	OPENBSD_2_7_BASE:1.1.1.3
	new-binutils:1.1.1.3.0.12
	OPENBSD_2_6:1.1.1.3.0.10
	OPENBSD_2_6_BASE:1.1.1.3
	OPENBSD_2_5:1.1.1.3.0.8
	OPENBSD_2_5_BASE:1.1.1.3
	OPENBSD_2_4:1.1.1.3.0.6
	OPENBSD_2_4_BASE:1.1.1.3
	OPENBSD_2_3:1.1.1.3.0.4
	OPENBSD_2_3_BASE:1.1.1.3
	OPENBSD_2_2:1.1.1.3.0.2
	OPENBSD_2_2_BASE:1.1.1.3
	BINUTILS-2_8_1:1.1.1.3
	OPENBSD_2_1:1.1.1.2.0.2
	OPENBSD_2_1_BASE:1.1.1.2
	CYGNUS-961112:1.1.1.2
	OPENBSD_2_0:1.1.1.1.0.2
	OPENBSD_2_0_BASE:1.1.1.1
	CYGNUS-960904:1.1.1.1
	CYGNUS:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2000.09.12.22.24.41;	author espie;	state dead;
branches;
next	1.1;

1.1
date	96.09.04.17.49.44;	author niklas;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	96.09.04.17.49.44;	author niklas;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	96.11.19.14.13.25;	author niklas;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	97.05.29.09.16.06;	author niklas;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Resolve other problems that dumb cvs can't find out by itself.

(trivial part done, `interesting' patches remain)
@
text
@#
# Makefile for binutils under openVMS/AXP
#
# For use with gnu-make for vms
#
# Created by Klaus Kämpf, kkaempf@@progis.de
#
#

CC=gcc

ifeq ($(CC),gcc)
CFLAGS=/include=([],[-.include],[-.bfd])$(DEFS)
DEFS=/define=("unlink=remove")
LIBS=,GNU_CC:[000000]LIBGCC2/lib,GNU_CC:[000000]LIBGCCLIB/lib,sys$$library:vaxcrtl.olb/lib,GNU_CC:[000000]crt0.obj
else
CFLAGS=/noopt/debug/include=([],[-.include],[-.bfd])$(DEFS)/warnings=disable=(missingreturn,implicitfunc)
DEFS=/define=("const=","unlink=remove",\
"_bfd_generic_get_section_contents_in_window"="_bfd_generic_get_win_section_cont",\
"_bfd_elf_section_from_bfd_section"="_bfd_elf_sec_from_bfd_sec")
LIBS=,sys$$library:vaxcrtl.olb/lib
endif

BFDLIB = [-.bfd]libbfd.olb/lib
BFDLIB_DEP = [-.bfd]libbfd.olb
LIBIBERTY_DEP = [-.libiberty]libiberty.olb
LIBIBERTY = [-.libiberty]libiberty.olb/lib
OPCODES_DEP = [-.opcodes]libopcodes.olb
OPCODES = [-.opcodes]libopcodes.olb/lib

DEBUG_OBJS = rddbg.obj,debug.obj,stabs.obj,ieee.obj,rdcoff.obj

WRITE_DEBUG_OBJS = $(DEBUG_OBJS),wrstabs.obj

BULIBS = []bucomm.obj,version.obj,filemode.obj

ADDL_DEPS = $(BULIBS),$(BFDLIB_DEP),$(LIBIBERTY_DEP)
ADDL_LIBS = $(BULIBS),$(BFDLIB),$(LIBIBERTY)

SIZEOBJS = $(ADDL_DEPS),size.obj

STRINGSOBJS = $(ADDL_DEPS),strings.obj

NMOBJS = $(ADDL_DEPS),nm.obj

OBJDUMPOBJS = $(ADDL_DEPS),objdump.obj,prdbg.obj,$(DEBUG_OBJS),$(OPCODES_DEP)

all: config.h size.exe strings.exe objdump.exe nm.exe

size.exe: $(SIZEOBJS)
	link/exe=$@@ size.obj,$(ADDL_LIBS)$(LIBS)

strings.exe: $(STRINGSOBJS)
	link/exe=$@@ strings.obj,$(ADDL_LIBS)$(LIBS)

nm.exe: $(NMOBJS)
	link/exe=$@@ nm.obj,$(ADDL_LIBS)$(LIBS)

objdump.exe: $(OBJDUMPOBJS)
	link/exe=$@@ objdump.obj,prdbg.obj,$(DEBUG_OBJS),$(BFDLIB),$(OPCODES),$(ADDL_LIBS)$(LIBS)


version.obj: version.c
	$(CC) $(CFLAGS)/define=(VERSION="""960723""") $<

config.h: config.h-vms
	$(CP) $< $@@
@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@Import of binutils, gas, ld & gprof from Cygnus 960904 tree
@
text
@@


1.1.1.2
log
@Import of 961112 Cygnus binutils+gas+ld+gdb+gprof
@
text
@d64 1
a64 1
	$(CC) $(CFLAGS)/define=(VERSION="""960814""") $<
@


1.1.1.3
log
@Import of binutils-2.8.1 from Cygnus/FSF
@
text
@d2 1
a2 1
# Makefile for binutils under openVMS/Alpha
d6 1
a6 1
# Created by Klaus K"ampf, kkaempf@@progis.de
d10 1
a10 4
# Distribution version, filled in by configure.com
VERSION=

TARGET=""evax-alpha""
d14 2
a15 2
DEFS=/define=("TARGET=$(TARGET)")
LIBS=,GNU:[000000]libgcc/lib,sys$$library:vaxcrtl.olb/lib,GNU:[000000]crt0.obj
d18 1
a18 2
DEFS=/define=("TARGET=$(TARGET)",\
"const=","unlink=remove",\
d64 1
a64 1
	$(CC) $(CFLAGS)/define=(VERSION="""$(VERSION)""") $<
d66 2
a67 24
config.h:
	$$ @@configure
	$(MAKE) -f makefile.vms

[-.bfd]libbfd.olb:
	$(CD) [-.bfd]
	$(MAKE) -f makefile.vms
	$(CD) [-.binutils]

[-.libiberty]libiberty.olb:
	$(CD) [-.libiberty]
	$(MAKE) -f makefile.vms
	$(CD) [-.binutils]

[-.opcodes]libopcodes.olb:
	$(CD) [-.opcodes]
	$(MAKE) -f makefile.vms
	$(CD) [-.binutils]

clean:
	$$ purge
	$(RM) *.obj;
	$(RM) *.exe;
	$(RM) config.h;
@
