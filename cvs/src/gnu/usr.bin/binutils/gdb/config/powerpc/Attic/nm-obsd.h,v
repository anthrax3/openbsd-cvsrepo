head	1.6;
access;
symbols
	OPENBSD_3_6:1.5.0.2
	OPENBSD_3_6_BASE:1.5
	OPENBSD_3_5:1.4.0.8
	OPENBSD_3_5_BASE:1.4
	OPENBSD_3_4:1.4.0.6
	OPENBSD_3_4_BASE:1.4
	OPENBSD_3_3:1.4.0.4
	OPENBSD_3_3_BASE:1.4
	OPENBSD_3_2:1.4.0.2
	OPENBSD_3_2_BASE:1.4
	OPENBSD_3_1:1.3.0.8
	OPENBSD_3_1_BASE:1.3
	OPENBSD_3_0:1.3.0.6
	OPENBSD_3_0_BASE:1.3
	OPENBSD_2_9:1.3.0.4
	OPENBSD_2_9_BASE:1.3
	OPENBSD_2_8:1.3.0.2
	OPENBSD_2_8_BASE:1.3
	OPENBSD_2_7:1.2.0.10
	OPENBSD_2_7_BASE:1.2
	new-binutils:1.2.0.8
	OPENBSD_2_6:1.2.0.6
	OPENBSD_2_6_BASE:1.2
	OPENBSD_2_5:1.2.0.4
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.2.0.2
	OPENBSD_2_4_BASE:1.2
	OPENBSD_2_3:1.1.0.6
	OPENBSD_2_3_BASE:1.1
	OPENBSD_2_2:1.1.0.4
	OPENBSD_2_2_BASE:1.1
	OPENBSD_2_1:1.1.0.2
	OPENBSD_2_1_BASE:1.1;
locks; strict;
comment	@ * @;


1.6
date	2004.12.27.14.00.50;	author kettenis;	state dead;
branches;
next	1.5;

1.5
date	2004.05.21.20.23.24;	author kettenis;	state Exp;
branches;
next	1.4;

1.4
date	2002.06.07.17.46.55;	author drahn;	state Exp;
branches;
next	1.3;

1.3
date	2000.10.25.05.17.19;	author drahn;	state Exp;
branches;
next	1.2;

1.2
date	98.08.07.02.02.34;	author rahnds;	state Exp;
branches;
next	1.1;

1.1
date	97.02.07.20.47.24;	author rahnds;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Resolve conflicts for GDB 6.3.  Add local patches.
ok deraadt@@
@
text
@/* Native-dependent definitions for OpenBSD/powerpc.

   Copyright 2004 Free Software Foundation, Inc.

   This file is part of GDB.

   This program is free software; you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation; either version 2 of the License, or
   (at your option) any later version.

   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.

   You should have received a copy of the GNU General Public License
   along with this program; if not, write to the Free Software
   Foundation, Inc., 59 Temple Place - Suite 330,
   Boston, MA 02111-1307, USA.  */

#ifndef NM_OBSD_H
#define NM_OBSD_H

/* Get generic BSD native definitions.  */
#include "config/nm-bsd.h"

#endif /* nm-obsd.h */
@


1.5
log
@Resolve conflicts for GDB 6.1.  Add local patches.
ok deraadt@@
@
text
@@


1.4
log
@Switch powerpc to using new split (aout/elf) link.h
@
text
@d1 1
a1 2
/* Native-dependent definitions for OpenBSD.
   Copyright 1994, 1996 Free Software Foundation, Inc.
d3 1
a3 1
This file is part of GDB.
d5 1
a5 151
This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */

/* "Support" the Net- and OpenBSD-specific "-k" option. */
#define	ADDITIONAL_OPTIONS		{"k", no_argument, 0, 'k'},
#define	ADDITIONAL_OPTION_CASES case 'k': \
	fprintf_unfiltered (gdb_stderr, \
"-k: obsolete option.  For kernel debugging, start gdb\n"	\
"with just the kernel name as an argument (no core file)\n"	\
"and then use the gdb command `target kcore COREFILE'.\n");	\
	exit (1);
/* End of "-k" stuff. */

#define ATTACH_DETACH

/* Use this instead of KERNEL_U_ADDR (See gdb/infptrace.c) */
#define KERNEL_U_ADDR 0
#define FETCH_INFERIOR_REGISTERS

#define SVR4_SHARED_LIBS

/* This enables functions needed by kcore-nbsd.c */
#define FETCH_KCORE_REGISTERS

#define PTRACE_ARG3_TYPE char*

#include "solib.h"      /* Support for shared libraries. */

/* 
 * fix this later
 */
#ifdef SVR4_SHARED_LIBS
/* The Net- and OpenBSD link.h structure definitions have different names
   than the SunOS version, but the structures are very similar,
   so we can use solib.c by defining the SunOS names.  */
#define link_object	sod
#define lo_name		sod_name
#define lo_library	sod_library
#define lo_unused	sod_reserved
#define lo_major	sod_major
#define lo_minor	sod_minor
#define lo_next		sod_next

#define l_addr		som_addr
#define l_name		som_path
#define l_next		som_next
#define lm_lop		som_sod
#define lm_lob		som_sodbase
#define l_prev		som_sodbase
#define lm_rwt		som_write
#define lm_ld		som_dynamic
#define lm_lpd		som_spd

#define link_dynamic_2	section_dispatch_table
#define ld_loaded	sdt_loaded
#define ld_need		sdt_sods
#define ld_rules	sdt_rules
#define ld_got		sdt_got
#define ld_plt		sdt_plt
#define ld_rel		sdt_rel
#define ld_hash		sdt_hash
#define ld_stab		sdt_nzlist
#define ld_stab_hash	sdt_filler2
#define ld_buckets	sdt_buckets
#define ld_symbols	sdt_strings
#define ld_symb_size	sdt_str_sz
#define ld_text		sdt_text_sz
#define ld_plt_sz	sdt_plt_sz

#define rtc_symb	rt_symbol
#define rtc_sp		rt_sp
#define rtc_next	rt_next

#define r_debug		so_debug
#define ldd_version	dd_version
#define ldd_in_debugger	dd_in_debugger
#define ldd_sym_loaded	dd_sym_loaded
#define ldd_bp_addr	dd_bpt_addr
#define ldd_bp_inst	dd_bpt_shadow
#define ldd_cp		dd_cc

#define link_dynamic	_dynamic
#define ld_version	d_version
#define ldd		d_debug
#define ld_un		d_un
#define ld_2		d_sdt

#else 

#define link_object	sod
#define lo_name		sod_name
#define lo_library	sod_library
#define lo_unused	sod_reserved
#define lo_major	sod_major
#define lo_minor	sod_minor
#define lo_next		sod_next

#define link_map	so_map
#define lm_addr		som_addr
#define lm_name		som_path
#define lm_next		som_next
#define lm_lop		som_sod
#define lm_lob		som_sodbase
#define lm_rwt		som_write
#define lm_ld		som_dynamic
#define lm_lpd		som_spd

#define link_dynamic_2	section_dispatch_table
#define ld_loaded	sdt_loaded
#define ld_need		sdt_sods
#define ld_rules	sdt_rules
#define ld_got		sdt_got
#define ld_plt		sdt_plt
#define ld_rel		sdt_rel
#define ld_hash		sdt_hash
#define ld_stab		sdt_nzlist
#define ld_stab_hash	sdt_filler2
#define ld_buckets	sdt_buckets
#define ld_symbols	sdt_strings
#define ld_symb_size	sdt_str_sz
#define ld_text		sdt_text_sz
#define ld_plt_sz	sdt_plt_sz

#define rtc_symb	rt_symbol
#define rtc_sp		rt_sp
#define rtc_next	rt_next

#define ld_debug	so_debug
#define ldd_version	dd_version
#define ldd_in_debugger	dd_in_debugger
#define ldd_sym_loaded	dd_sym_loaded
#define ldd_bp_addr	dd_bpt_addr
#define ldd_bp_inst	dd_bpt_shadow
#define ldd_cp		dd_cc

#define link_dynamic	_dynamic
#define ld_version	d_version
#define ldd		d_debug
#define ld_un		d_un
#define ld_2		d_sdt
d7 22
a28 1
#endif /* SVR4_SHARED_LIBS */
@


1.3
log
@Add shared library awareness to powerpc gdb. Uses the "standard" SVR4 solib
support.

Ok'ed by espie and deraadt.
@
text
@a59 1
#define link_map	so_map
@


1.2
log
@Support pieces for gdb to work on the powerpc port.
@
text
@d36 2
a42 1
#if 0
a43 1
#endif
a47 1
#if 0
a159 1
#endif
@


1.1
log
@These changes are not complete, This does not deal with cores correctly yet.
This checkin is an attempt to make the powerpc port have a clean build.
@
text
@d1 2
a2 3
/* Definitions for running gdb on a host machine running any flavor of SVR4.
   Copyright 1991, 1992 Free Software Foundation, Inc.
   Written by Fred Fish at Cygnus Support (fnf@@cygnus.com).
d20 9
a28 1
#include "solib.h"	/* Support for shared libraries. */
d30 1
a30 6
/* Use SVR4 style shared library support */

#define SVR4_SHARED_LIBS

/* SVR4 has /proc support, so use it instead of ptrace. */
/* On OpenBSD we prefer ptrace */
d32 127
a158 6
#undef USE_PROC_FS

/* SVR4 machines can easily do attach and detach via /proc (procfs.c)
   support */

#define ATTACH_DETACH
d160 2
a161 1
#define KERNEL_U_ADDR ((u_int)(USER_ADDR))
@

