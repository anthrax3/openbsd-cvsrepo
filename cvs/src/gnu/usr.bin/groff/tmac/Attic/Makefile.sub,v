head	1.6;
access;
symbols
	OPENBSD_4_9:1.5.0.4
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.5.0.2
	OPENBSD_4_8_BASE:1.5
	OPENBSD_4_7:1.4.0.40
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.4.0.42
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.38
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.4.0.36
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.4.0.34
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_2:1.4.0.32
	OPENBSD_4_2_BASE:1.4
	OPENBSD_4_1:1.4.0.30
	OPENBSD_4_1_BASE:1.4
	OPENBSD_4_0:1.4.0.28
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.4.0.26
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.4.0.24
	OPENBSD_3_8_BASE:1.4
	OPENBSD_3_7:1.4.0.22
	OPENBSD_3_7_BASE:1.4
	OPENBSD_3_6:1.4.0.20
	OPENBSD_3_6_BASE:1.4
	OPENBSD_3_5:1.4.0.18
	OPENBSD_3_5_BASE:1.4
	OPENBSD_3_4:1.4.0.16
	OPENBSD_3_4_BASE:1.4
	OPENBSD_3_3:1.4.0.14
	OPENBSD_3_3_BASE:1.4
	OPENBSD_3_2:1.4.0.12
	OPENBSD_3_2_BASE:1.4
	OPENBSD_3_1:1.4.0.10
	OPENBSD_3_1_BASE:1.4
	OPENBSD_3_0:1.4.0.8
	OPENBSD_3_0_BASE:1.4
	OPENBSD_2_9:1.4.0.6
	OPENBSD_2_9_BASE:1.4
	OPENBSD_2_8:1.4.0.4
	OPENBSD_2_8_BASE:1.4
	OPENBSD_2_7:1.4.0.2
	OPENBSD_2_7_BASE:1.4
	groff_1_15:1.1.1.2
	OPENBSD_2_6:1.3.0.12
	OPENBSD_2_6_BASE:1.3
	OPENBSD_2_5:1.3.0.10
	OPENBSD_2_5_BASE:1.3
	OPENBSD_2_4:1.3.0.8
	OPENBSD_2_4_BASE:1.3
	OPENBSD_2_3:1.3.0.6
	OPENBSD_2_3_BASE:1.3
	groff_1_11a:1.1.1
	OPENBSD_2_2:1.3.0.4
	OPENBSD_2_2_BASE:1.3
	OPENBSD_2_1:1.3.0.2
	OPENBSD_2_1_BASE:1.3
	OPENBSD_2_0:1.2.0.2
	OPENBSD_2_0_BASE:1.2
	OpenBSD_1_2:1.2
	groff_1_10:1.1.1.1
	gnu:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2011.03.12.19.04.01;	author schwarze;	state dead;
branches;
next	1.5;

1.5
date	2010.07.20.19.30.18;	author schwarze;	state Exp;
branches;
next	1.4;

1.4
date	2000.04.09.08.25.23;	author millert;	state Exp;
branches;
next	1.3;

1.3
date	97.04.22.14.07.37;	author kstailey;	state Exp;
branches;
next	1.2;

1.2
date	96.09.14.20.20.44;	author etheisen;	state Exp;
branches;
next	1.1;

1.1
date	96.09.14.19.01.48;	author etheisen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	96.09.14.19.01.48;	author etheisen;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2000.04.09.07.58.29;	author millert;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Replaced by mandoc(1) for base and xenocara purposes,
and comes with 4.9 ports.
ok deraadt@@
@
text
@MAN7=groff_ms.7 groff_me.7 groff_msafer.7

NORMALFILES=tmac.pic tmac.ps tmac.psnew tmac.psold tmac.pspic \
      tmac.psatk tmac.dvi tmac.tty tmac.tty-char tmac.X tmac.Xps tmac.latin1 \
      tmac.lj4 eqnrc troffrc tmac.safer tmac.html tmac.arkup
SPECIALFILES=tmac.s
STRIPFILES=tmac.e
mdocdir=$(tmacdir)/mdoc
CLEANADD=stamp-strip stamp-wrap tmac.e-s tmac.doc-s tmac.doc.old-s \
      doc-common-s doc-ditroff-s doc-nroff-s doc-syms-s *-wrap
tmac_s_prefix=
tmac_wrap=
sys_tmac_prefix=

all: stamp-strip stamp-wrap

install_data: $(NORMALFILES) $(SPECIALFILES) stamp-wrap stamp-strip man.local
	-test -d $(tmacdir) || mkdir $(tmacdir)
	if test -n "$(tmac_wrap)"; then \
	  for m in ""$(tmac_wrap); do \
	    $(INSTALL_DATA) $$m-wrap $(tmacdir)/tmac.$$m; \
	  done; \
	fi
	for f in $(NORMALFILES); do \
	  rm -f $(tmacdir)/$$f; \
	  $(INSTALL_DATA) $(srcdir)/$$f $(tmacdir)/$$f; \
	done
	-rm -f $(tmacdir)/tmac.$(tmac_s_prefix)s
	$(INSTALL_DATA) $(srcdir)/tmac.s $(tmacdir)/tmac.$(tmac_s_prefix)s
	for f in $(STRIPFILES); do \
	  rm -f $(tmacdir)/$$f; \
	  $(INSTALL_DATA) $$f-s $(tmacdir)/$$f; \
	done
	-test -f $(tmacdir)/man.local || \
	  $(INSTALL_DATA) $(srcdir)/man.local $(tmacdir)/man.local
	-rm -f temp

stamp-strip: $(STRIPFILES) $(MDOCFILES)
	for f in $(STRIPFILES) $(MDOCFILES); do \
	  rm -f $$f-s; \
	  sed -f $(srcdir)/strip.sed $(srcdir)/$$f >$$f-s; \
	done
	touch $@@

stamp-wrap:
	if test -n "$(tmac_wrap)"; then \
	  for m in ""$(tmac_wrap); do \
	    rm -f $$m-wrap; \
	    echo .cp 1 >$$m-wrap; \
	    echo .so $(sys_tmac_prefix)$$m >>$$m-wrap; \
	  done; \
	fi
	touch $@@

uninstall_sub:
	-if test -n "$(tmac_wrap)"; then \
	  for m in ""$(tmac_wrap); do \
	    rm -f $(tmacdir)/tmac.$$m; \
	  done; \
	fi
	-for f in $(NORMALFILES) $(STRIPFILES); do rm -f $(tmacdir)/$$f; done
	-rm -f $(tmacdir)/tmac.$(tmac_s_prefix)s
	-if cmp -s $(tmacdir)/man.local $(srcdir)/man.local; then \
	  rm -f $(tmacdir)/man.local; \
	fi
	-for f in $(MDOCFILES); do rm -f $(mdocdir)/$$f; done
	-rmdir $(mdocdir)
@


1.5
log
@disconnect groff_man(7) from the build and install man(7) instead;
"fine" jmc@@  "no worries" deraadt@@  "looks good" J.C. Roberts
@
text
@@


1.4
log
@groff 1.15 plus local changes (insomnia strikes):
o moved *.man to *.$section_in and generate *.$section not *.n for bsd.man.mk
o modified groff Makefiles to not install man pages (we do it ourselves)
o use mkstemp everywhere
o don't install groff versions on mdoc macros, we want our own ones
@
text
@d1 1
a1 1
MAN7=groff_ms.7 groff_man.7 groff_me.7 groff_msafer.7
@


1.3
log
@GNU Groff 1.10 exhaustively tested.
Jason, thanks for a good foundation to build on, but mine works better.
@
text
@d1 1
a1 1
MAN7=groff_ms.n me.n msafer.n
d3 1
a3 1
NORMALFILES=$(TMAC_ANDOC) tmac.pic tmac.ps tmac.psnew tmac.psold tmac.pspic \
d5 3
a7 4
      tmac.lj4 eqnrc troffrc tmac.safer
SPECIALFILES=$(TMAC_AN) tmac.s
STRIPFILES=tmac.e tmac.doc tmac.doc.old
# MDOCFILES=doc-common doc-ditroff doc-nroff doc-syms
d10 1
a10 1
 doc-common-s doc-ditroff-s doc-nroff-s doc-syms-s *-wrap
a11 1
tmac_an_prefix=
d20 1
a20 1
	  for m in $(tmac_wrap); do \
d28 2
a29 8
	if test -n "$(TMAC_S)"; then \
		rm -f $(tmacdir)/tmac.$(tmac_s_prefix)s ; \
		$(INSTALL_DATA) $(srcdir)/tmac.s $(tmacdir)/tmac.$(tmac_s_prefix)s ; \
	fi
	if test -n "$(TMAC_AN)"; then \
		rm -f $(tmacdir)/tmac.$(tmac_an_prefix)an ; \
		$(INSTALL_DATA) $(srcdir)/tmac.an $(tmacdir)/tmac.$(tmac_an_prefix)an ; \
	fi
a33 5
	-test -d $(mdocdir) || mkdir $(mdocdir)
	for f in $(MDOCFILES); do \
	  rm -f $(mdocdir)/$$f; \
	  $(INSTALL_DATA) $$f-s $(mdocdir)/$$f; \
	done
d47 1
a47 1
	  for m in $(tmac_wrap); do \
d57 3
a59 1
	  for m in $(tmac_wrap); do rm -f $(tmacdir)/tmac.$$m; done; \
a62 1
	-rm -f $(tmacdir)/tmac.$(tmac_an_prefix)an
@


1.2
log
@Redo the OpenBSD build wrapper import. Thanx cvs.
@
text
@d8 1
@


1.1
log
@Initial revision
@
text
@d3 1
a3 1
NORMALFILES=tmac.andoc tmac.pic tmac.ps tmac.psnew tmac.psold tmac.pspic \
d6 1
a6 1
SPECIALFILES=tmac.an tmac.s
a7 1
MDOCFILES=doc-common doc-ditroff doc-nroff doc-syms
d29 8
a36 4
	-rm -f $(tmacdir)/tmac.$(tmac_s_prefix)s
	$(INSTALL_DATA) $(srcdir)/tmac.s $(tmacdir)/tmac.$(tmac_s_prefix)s
	-rm -f $(tmacdir)/tmac.$(tmac_an_prefix)an
	$(INSTALL_DATA) $(srcdir)/tmac.an $(tmacdir)/tmac.$(tmac_an_prefix)an
@


1.1.1.1
log
@Third time because import sucks.
@
text
@@


1.1.1.2
log
@groff 1.15
@
text
@d1 1
a1 2
MAN7=groff_ms.n groff_man.n groff_me.n groff_msafer.n \
      groff_mdoc.n groff_mdoc.samples.n
d5 1
a5 1
      tmac.lj4 eqnrc troffrc tmac.safer tmac.html tmac.arkup
d11 1
a11 1
      doc-common-s doc-ditroff-s doc-nroff-s doc-syms-s *-wrap
d22 1
a22 1
	  for m in ""$(tmac_wrap); do \
d56 1
a56 1
	  for m in ""$(tmac_wrap); do \
d66 1
a66 3
	  for m in ""$(tmac_wrap); do \
	    rm -f $(tmacdir)/tmac.$$m; \
	  done; \
@

