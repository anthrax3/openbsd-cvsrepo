head	1.8;
access;
symbols
	OPENBSD_6_2:1.8.0.24
	OPENBSD_6_2_BASE:1.8
	PERL_5_24_2:1.1.1.7
	OPENBSD_6_1:1.8.0.28
	OPENBSD_6_1_BASE:1.8
	OPENBSD_6_0:1.8.0.26
	OPENBSD_6_0_BASE:1.8
	OPENBSD_5_9:1.8.0.20
	OPENBSD_5_9_BASE:1.8
	OPENBSD_5_8:1.8.0.22
	OPENBSD_5_8_BASE:1.8
	PERL_5_20_2:1.1.1.7
	OPENBSD_5_7:1.8.0.14
	OPENBSD_5_7_BASE:1.8
	PERL_5_20_1:1.1.1.7
	OPENBSD_5_6:1.8.0.18
	OPENBSD_5_6_BASE:1.8
	PERL_5_18_2:1.1.1.7
	PERL:1.1.1
	OPENBSD_5_5:1.8.0.16
	OPENBSD_5_5_BASE:1.8
	OPENBSD_5_4:1.8.0.12
	OPENBSD_5_4_BASE:1.8
	PERL_5_16_3:1.1.1.7
	OPENBSD_5_3:1.8.0.10
	OPENBSD_5_3_BASE:1.8
	OPENBSD_5_2:1.8.0.8
	OPENBSD_5_2_BASE:1.8
	OPENBSD_5_1_BASE:1.8
	OPENBSD_5_1:1.8.0.6
	OPENBSD_5_0:1.8.0.4
	OPENBSD_5_0_BASE:1.8
	OPENBSD_4_9:1.8.0.2
	OPENBSD_4_9_BASE:1.8
	PERL_5_12_2:1.1.1.7
	OPENBSD_4_8:1.7.0.4
	OPENBSD_4_8_BASE:1.7
	OPENBSD_4_7:1.7.0.2
	OPENBSD_4_7_BASE:1.7
	PERL_5_10_1:1.1.1.6
	OPENBSD_4_6:1.6.0.24
	OPENBSD_4_6_BASE:1.6
	OPENBSD_4_5:1.6.0.20
	OPENBSD_4_5_BASE:1.6
	PERL_5_10_0:1.1.1.5
	OPENBSD_4_4:1.6.0.18
	OPENBSD_4_4_BASE:1.6
	OPENBSD_4_3:1.6.0.16
	OPENBSD_4_3_BASE:1.6
	OPENBSD_4_2:1.6.0.14
	OPENBSD_4_2_BASE:1.6
	OPENBSD_4_1:1.6.0.12
	OPENBSD_4_1_BASE:1.6
	OPENBSD_4_0:1.6.0.10
	OPENBSD_4_0_BASE:1.6
	PERL_5_8_8:1.1.1.5
	OPENBSD_3_9:1.6.0.8
	OPENBSD_3_9_BASE:1.6
	OPENBSD_3_8:1.6.0.6
	OPENBSD_3_8_BASE:1.6
	OPENBSD_3_7:1.6.0.4
	OPENBSD_3_7_BASE:1.6
	PERL_5_8_6:1.1.1.5
	OPENBSD_3_6:1.6.0.2
	OPENBSD_3_6_BASE:1.6
	PERL_5_8_5:1.1.1.5
	PERL_5_8_3:1.1.1.4
	OPENBSD_3_5:1.5.0.6
	OPENBSD_3_5_BASE:1.5
	PERL_5_8_2:1.1.1.4
	OPENBSD_3_4:1.5.0.4
	OPENBSD_3_4_BASE:1.5
	OPENBSD_3_3:1.5.0.2
	OPENBSD_3_3_BASE:1.5
	PERL_5_8_0:1.1.1.4
	OPENBSD_3_2:1.4.0.6
	OPENBSD_3_2_BASE:1.4
	OPENBSD_3_1:1.4.0.4
	OPENBSD_3_1_BASE:1.4
	OPENBSD_3_0:1.4.0.2
	OPENBSD_3_0_BASE:1.4
	PERL_5_6_1:1.1.1.3
	OPENBSD_2_9:1.3.0.8
	OPENBSD_2_9_BASE:1.3
	OPENBSD_2_8:1.3.0.6
	OPENBSD_2_8_BASE:1.3
	OPENBSD_2_7:1.3.0.4
	OPENBSD_2_7_BASE:1.3
	PERL_5_6_0:1.1.1.2
	OPENBSD_2_6:1.3.0.2
	OPENBSD_2_6_BASE:1.3
	PERL_500503:1.1.1.2
	CPAN:1.1.1
	OPENBSD_2_5:1.2.0.6
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.2.0.4
	OPENBSD_2_4_BASE:1.2
	OPENBSD_2_3:1.2.0.2
	OPENBSD_2_3_BASE:1.2
	OPENBSD_2_2:1.1.1.1.0.6
	OPENBSD_2_2_BASE:1.1.1.1
	OPENBSD_2_1:1.1.1.1.0.4
	OPENBSD_2_1_BASE:1.1.1.1
	OPENBSD_2_0:1.1.1.1.0.2
	OPENBSD_2_0_BASE:1.1.1.1
	perl5003:1.1.1.1
	lwall:1.1.1;
locks; strict;
comment	@# @;
expand	@o@;


1.8
date	2010.09.24.15.06.58;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	2009.10.12.18.24.37;	author millert;	state Exp;
branches;
next	1.6;

1.6
date	2004.08.09.18.09.26;	author millert;	state Exp;
branches;
next	1.5;

1.5
date	2002.10.27.22.25.24;	author millert;	state Exp;
branches;
next	1.4;

1.4
date	2001.05.24.18.35.18;	author millert;	state Exp;
branches;
next	1.3;

1.3
date	99.04.29.22.51.37;	author millert;	state Exp;
branches;
next	1.2;

1.2
date	97.11.30.07.56.04;	author millert;	state Exp;
branches;
next	1.1;

1.1
date	96.08.19.10.12.21;	author downsj;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	96.08.19.10.12.21;	author downsj;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	99.04.29.22.39.29;	author millert;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2001.05.24.18.23.08;	author millert;	state Exp;
branches;
next	1.1.1.4;

1.1.1.4
date	2002.10.27.22.14.56;	author millert;	state Exp;
branches;
next	1.1.1.5;

1.1.1.5
date	2004.08.09.17.47.56;	author millert;	state Exp;
branches;
next	1.1.1.6;

1.1.1.6
date	2009.10.12.18.10.46;	author millert;	state Exp;
branches;
next	1.1.1.7;

1.1.1.7
date	2010.09.24.14.48.55;	author millert;	state Exp;
branches;
next	;


desc
@@


1.8
log
@merge in perl 5.12.2 plus local changes
@
text
@# hints/bsdos.sh
#
# hints file for BSD/OS (adapted from bsd386.sh)
# Original by Neil Bowers <neilb@@khoros.unm.edu>; Tue Oct  4 12:01:34 EDT 1994
# Updated by Tony Sanders <sanders@@bsdi.com>; Sat Aug 23 12:47:45 MDT 1997
#     Added 3.1 with ELF dynamic libraries (NOT in 3.1 yet.
#     Estimated for 4.0) SYSV IPC tested Ok so I re-enabled.
#
# Updated to work in post-4.0 by Todd C. Miller <millert@@openbsd.org>
#
# Updated for threads by "Timur I. Bakeyev" <bsdi@@listserv.bat.ru>
#
# To override the compiler on the command line:
#     ./Configure -Dcc=gcc2
#
# The BSD/OS distribution is built with:
#     ./Configure -des -Dbsdos_distribution=defined

signal_t='void'
d_voidsig='define'

usemymalloc='n'

# malloc wrap works
case "$usemallocwrap" in
'') usemallocwrap='define' ;;
esac

# setre?[ug]id() have been replaced by the _POSIX_SAVED_IDS versions.
# See man 2 setuid
d_setregid='undef'
d_setreuid='undef'
d_setrgid='undef'
d_setruid='undef'

# we don't want to use -lnm, since exp() is busted (in 1.1 anyway)
set `echo X "$libswanted "| sed -e 's/ nm / /'`
shift
libswanted="$*"

# X libraries are in their own tree
glibpth="$glibpth /usr/X11/lib"
ldflags="$ldflags -L/usr/X11/lib"

case "$optimize" in
'')     optimize='-O2' ;;
esac

case "$bsdos_distribution" in
''|undef|false)	;;
*)
	d_dosuid='define'
	d_portable='undef'
	prefix='/usr/contrib'
	perlpath='/usr/bin/perl5'
	startperl='#!/usr/bin/perl5'
	scriptdir='/usr/contrib/bin'
	privlib='/usr/libdata/perl5'
	man1dir='/usr/contrib/man/man1'
	man3dir='/usr/contrib/man/man3'
	# phlib added by BSDI -- we share the *.ph include dir with perl4
	phlib="/usr/libdata/perl5/site_perl/$(arch)-$osname/include"
	phlibexp="/usr/libdata/perl5/site_perl/$(arch)-$osname/include"
	;;
esac

case "$osvers" in
1.0*)
	# Avoid problems with HUGE_VAL in POSIX in 1.0's cc.
	POSIX_cflags='ccflags="$ccflags -UHUGE_VAL"' 
	;;
1.1*)
	# Use gcc2
	case "$cc" in
	'')	cc='gcc2' ;;
	esac
	;;
2.0*|2.1*|3.0*|3.1*)
	so='o'

	# default to GCC 2.X w/shared libraries
	case "$cc" in
	'')	cc='shlicc2'
		cccdlflags=' ' ;; # Avoid the dreaded -fpic
	esac

	# default ld to shared library linker
	case "$ld" in
	'')	ld='shlicc2'
		lddlflags='-r' ;; # this one is necessary
	esac

	# Must preload the static shared libraries.
	libswanted="Xpm Xaw Xmu Xt SM ICE Xext X11 $libswanted"
	libswanted="rpc curses termcap $libswanted"
	;;
4.*)
	# ELF dynamic link libraries starting in 4.0
        useshrplib='true'
	so='so'
	dlext='so'

	case "$cc" in
	'')	cc='cc'			# cc is gcc2 in 4.0
		cccdlflags="-fPIC"
		;;
	esac

	case "$ld" in
	'')	ld='ld'
		lddlflags="-shared -x $lddlflags" ;;
	esac
	# Due usage of static pointer from crt.o
	libswanted="util $libswanted" ;;
esac

# This script UU/usethreads.cbu will get 'called-back' by Configure 
# after it has prompted the user for whether to use threads.
cat > UU/usethreads.cbu <<'EOCBU'
case "$usethreads" in
$define|true|[yY]*)
	case "$osvers" in 
	3.*|4.*)        ccflags="-D_REENTRANT -D_THREAD_SAFE -pthread $ccflags"
	    ;;
	*)   cat <<EOM >&4
I did not know that BSD/OS $osvers supports POSIX threads.

Feel free to tell perlbug@@perl.org otherwise.
EOM
	    exit 1
	    ;;
	esac
	;;
esac
EOCBU
@


1.7
log
@Merge in perl 5.10.1
@
text
@d30 1
a30 1
# See <A HREF="http://www.bsdi.com/bsdi-man?setuid">http://www.bsdi.com/bsdi-man?setuid</A>(2)
@


1.6
log
@merge 5.8.5 into HEAD
remove now-unused files
crank libperl shared library major number
update Makefile.bsd-wrapper
tweak openbsd hints file for arm and m68k
@
text
@d123 1
a123 1
	3.*|4.*)	ccflags="-D_REENTRANT $ccflags"	
@


1.5
log
@Resolve conflicts, remove old files, merge local changes
@
text
@d24 5
@


1.4
log
@merge in perl 5.6.1 with our local changes
@
text
@a100 1
		ccdlflags="-rdynamic -Wl,-rpath,$privlib/$archname/CORE"
@


1.3
log
@perl5.005_03 (stock)
@
text
@d6 6
a11 2
#     Added 3.1 with ELF dynamic libraries (NOT in 3.1 yet. Estimated for 4.0)
#     SYSV IPC tested Ok so I re-enabled.
d25 1
a25 1
# See http://www.bsdi.com/bsdi-man?setuid(2)
d92 2
a93 2
4.0*)
	# ELF dynamic link libraries starting in 4.0 (???)
d101 2
a102 1
		ccdlflags=" " ;;
d109 20
d131 1
a131 1

@


1.2
log
@perl 5.004_04
@
text
@d6 1
a6 1
#     Added 3.1 with ELF dynamic libraries
a35 3
# Avoid telldir prototype conflict in pp_sys.c
pp_sys_cflags='ccflags="$ccflags -DHAS_TELLDIR_PROTOTYPE"'

d69 1
a69 1
2.0*|2.1*|3.0*)
d88 2
a89 2
3.1*)
	# ELF dynamic link libraries starting in 3.1
d95 1
a95 1
	'')	cc='cc'			# cc is gcc2 in 3.1
@


1.1
log
@Initial revision
@
text
@d3 5
a7 5
# hints file for BSD/OS 2.x (adapted from bsd386.sh)
# Original by Neil Bowers <neilb@@khoros.unm.edu>
#     Tue Oct  4 12:01:34 EDT 1994
# Updated by Tony Sanders <sanders@@bsdi.com>
#     Mon Nov 27 17:25:51 CST 1995
d9 5
a13 5
# You can override the compiler and loader on the Configure command line:
#     ./Configure -Dcc=shlicc2 -Dld=shlicc2

# filename extension for shared library objects
so='o'
a14 2
# Don't use this for Perl 5.002, which needs parallel sig_name and sig_num lists
#sig_name='ZERO HUP INT QUIT ILL TRAP IOT EMT FPE KILL BUS SEGV SYS PIPE ALRM TERM URG STOP TSTP CONT CHLD TTIN TTOU IO XCPU XFSZ VTALRM PROF WINCH INFO USR1 USR2 '
d17 9
a25 1
d_dosuid='define'
d32 1
a32 1
# BSD/OS X libraries are in their own tree
d39 4
d44 4
a47 2
defined)
	d_portable='no'
d49 5
d55 3
d72 3
a74 1
2.0*)
d77 2
a78 1
	'')	cc='shlicc2' ;;
d83 2
a84 1
	'')	ld='shlicc2' ;;
d87 3
a89 7
	# setre?[ug]id() have been replaced by the _POSIX_SAVED_IDS stuff
	# in 4.4BSD-based systems (including BSD/OS 2.0 and later).
	# See http://www.bsdi.com/bsdi-man?setuid(2)
	d_setregid='undef'
	d_setreuid='undef'
	d_setrgid='undef'
	d_setruid='undef'
d91 5
a95 5
2.1*)
	# Use 2.1's shlicc2 for dynamic linking
	# Since cc -o is linking, use it for compiling too.
	# I'm not sure whether Configure is careful about
	# distinguishing between the two.
d98 3
a100 2
	'')	cc='shlicc2'
		cccdlflags=' ' ;; # Avoid the dreaded -fpic
a102 3
	# Link with shared libraries in 2.1
	# Turns out that shlicc2 will automatically use the
	# shared libs, so don't explicitly specify -lc_s.2.1.*
d104 2
a105 2
	'')	ld='shlicc2'
		lddlflags='-r' ;; # this one is necessary
a106 9

	# setre?[ug]id() have been replaced by the _POSIX_SAVED_IDS  stuff
	# in 4.4BSD-based systems (including BSD/OS 2.0 and later).
	# See http://www.bsdi.com/bsdi-man?setuid(2)
	# This stuff may or may not be right, but it works.
	d_setregid='undef'
	d_setreuid='undef'
	d_setrgid='undef'
	d_setruid='undef'
d109 1
@


1.1.1.1
log
@Import of Perl 5.003 into the tree.  Makefile.bsd-wrapper and
config.sh.OpenBSD are the only local changes.
@
text
@@


1.1.1.2
log
@perl5.005_03
@
text
@d3 5
a7 5
# hints file for BSD/OS (adapted from bsd386.sh)
# Original by Neil Bowers <neilb@@khoros.unm.edu>; Tue Oct  4 12:01:34 EDT 1994
# Updated by Tony Sanders <sanders@@bsdi.com>; Sat Aug 23 12:47:45 MDT 1997
#     Added 3.1 with ELF dynamic libraries (NOT in 3.1 yet. Estimated for 4.0)
#     SYSV IPC tested Ok so I re-enabled.
d9 5
a13 5
# To override the compiler on the command line:
#     ./Configure -Dcc=gcc2
#
# The BSD/OS distribution is built with:
#     ./Configure -des -Dbsdos_distribution=defined
d15 2
d19 1
a19 9

usemymalloc='n'

# setre?[ug]id() have been replaced by the _POSIX_SAVED_IDS versions.
# See http://www.bsdi.com/bsdi-man?setuid(2)
d_setregid='undef'
d_setreuid='undef'
d_setrgid='undef'
d_setruid='undef'
d26 1
a26 1
# X libraries are in their own tree
d30 2
a31 3
case "$optimize" in
'')     optimize='-O2' ;;
esac
d34 2
a35 4
''|undef|false)	;;
*)
	d_dosuid='define'
	d_portable='undef'
a36 5
	perlpath='/usr/bin/perl5'
	startperl='#!/usr/bin/perl5'
	scriptdir='/usr/contrib/bin'
	privlib='/usr/libdata/perl5'
	man1dir='/usr/contrib/man/man1'
a37 3
	# phlib added by BSDI -- we share the *.ph include dir with perl4
	phlib="/usr/libdata/perl5/site_perl/$(arch)-$osname/include"
	phlibexp="/usr/libdata/perl5/site_perl/$(arch)-$osname/include"
d52 1
a52 3
2.0*|2.1*|3.0*|3.1*)
	so='o'

d55 1
a55 2
	'')	cc='shlicc2'
		cccdlflags=' ' ;; # Avoid the dreaded -fpic
d60 1
a60 2
	'')	ld='shlicc2'
		lddlflags='-r' ;; # this one is necessary
d63 7
a69 3
	# Must preload the static shared libraries.
	libswanted="Xpm Xaw Xmu Xt SM ICE Xext X11 $libswanted"
	libswanted="rpc curses termcap $libswanted"
d71 5
a75 5
4.0*)
	# ELF dynamic link libraries starting in 4.0 (???)
        useshrplib='true'
	so='so'
	dlext='so'
d78 2
a79 3
	'')	cc='cc'			# cc is gcc2 in 4.0
		cccdlflags="-fPIC"
		ccdlflags=" " ;;
d82 3
d86 2
a87 2
	'')	ld='ld'
		lddlflags="-shared -x $lddlflags" ;;
d89 9
a99 1

@


1.1.1.3
log
@stock perl 5.6.1
@
text
@d6 2
a7 6
#     Added 3.1 with ELF dynamic libraries (NOT in 3.1 yet.
#     Estimated for 4.0) SYSV IPC tested Ok so I re-enabled.
#
# Updated to work in post-4.0 by Todd C. Miller <millert@@openbsd.org>
#
# Updated for threads by "Timur I. Bakeyev" <bsdi@@listserv.bat.ru>
d21 1
a21 1
# See <A HREF="http://www.bsdi.com/bsdi-man?setuid">http://www.bsdi.com/bsdi-man?setuid</A>(2)
d88 2
a89 2
4.*)
	# ELF dynamic link libraries starting in 4.0
d97 1
a97 2
		ccdlflags="-rdynamic -Wl,-rpath,$privlib/$archname/CORE"
		;;
d104 1
a104 2
	# Due usage of static pointer from crt.o
	libswanted="util $libswanted" ;;
a106 19
# This script UU/usethreads.cbu will get 'called-back' by Configure 
# after it has prompted the user for whether to use threads.
cat > UU/usethreads.cbu <<'EOCBU'
case "$usethreads" in
$define|true|[yY]*)
	case "$osvers" in 
	3.*|4.*)	ccflags="-D_REENTRANT $ccflags"	
	    ;;
	*)   cat <<EOM >&4
I did not know that BSD/OS $osvers supports POSIX threads.

Feel free to tell perlbug@@perl.org otherwise.
EOM
	    exit 1
	    ;;
	esac
	;;
esac
EOCBU
@


1.1.1.4
log
@stock perl 5.8.0 from CPAN
@
text
@d101 1
@


1.1.1.5
log
@Import of stock perl 5.8.5
@
text
@a23 5
# malloc wrap works
case "$usemallocwrap" in
'') usemallocwrap='define' ;;
esac

@


1.1.1.6
log
@import perl 5.10.1
@
text
@d123 1
a123 1
	3.*|4.*)        ccflags="-D_REENTRANT -D_THREAD_SAFE -pthread $ccflags"
@


1.1.1.7
log
@Perl 5.12.2 from CPAN
@
text
@d30 1
a30 1
# See man 2 setuid
@


