head	1.4;
access;
symbols
	OPENBSD_5_6:1.3.0.4
	OPENBSD_5_6_BASE:1.3
	PERL_5_18_2:1.1.1.2
	PERL:1.1.1
	OPENBSD_5_3:1.1.1.1.0.10
	OPENBSD_5_3_BASE:1.1.1.1
	OPENBSD_5_2:1.1.1.1.0.8
	OPENBSD_5_2_BASE:1.1.1.1
	OPENBSD_5_1_BASE:1.1.1.1
	OPENBSD_5_1:1.1.1.1.0.6
	OPENBSD_5_0:1.1.1.1.0.4
	OPENBSD_5_0_BASE:1.1.1.1
	OPENBSD_4_9:1.1.1.1.0.2
	OPENBSD_4_9_BASE:1.1.1.1
	PERL_5_12_2:1.1.1.1
	CPAN:1.1.1;
locks; strict;
comment	@# @;
expand	@o@;


1.4
date	2014.11.17.20.56.55;	author afresh1;	state dead;
branches;
next	1.3;
commitid	QP75iYx42Uo7mMxO;

1.3
date	2014.03.24.15.05.23;	author afresh1;	state Exp;
branches;
next	1.2;

1.2
date	2013.03.25.20.40.46;	author sthen;	state dead;
branches;
next	1.1;

1.1
date	2010.09.24.14.49.04;	author millert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2010.09.24.14.49.04;	author millert;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2014.03.24.14.58.49;	author afresh1;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Fix merge conflicts, remove extra files, match upstream perl-5.20.1

ok deraadt@@ sthen@@ espie@@ miod@@
@
text
@package B::Lint::Debug;
use if $] > 5.017, 'deprecate';

our $VERSION = '1.17';

=head1 NAME

B::Lint::Debug - Adds debugging stringification to B::

=head1 DESCRIPTION

This module injects stringification to a B::OP*/B::SPECIAL. This
should not be loaded unless you're debugging.

=cut

package # hide from PAUSE
    B::SPECIAL;
use overload '""' => sub {
    my $self = shift @@_;
    "SPECIAL($$self)";
};

package # hide from PAUSE
    B::OP;
use overload '""' => sub {
    my $self  = shift @@_;
    my $class = ref $self;
    $class =~ s/\AB:://xms;
    my $name = $self->name;
    "$class($name)";
};

package # hide from PAUSE
    B::SVOP;
use overload '""' => sub {
    my $self  = shift @@_;
    my $class = ref $self;
    $class =~ s/\AB:://xms;
    my $name = $self->name;
    "$class($name," . $self->sv . "," . $self->gv . ")";
};

package # hide from PAUSE
    B::SPECIAL;
sub DESTROY { }
our $AUTOLOAD;

sub AUTOLOAD {
    my $cx = 0;
    print "AUTOLOAD $AUTOLOAD\n";

    package # hide from PAUSE
        DB;
    while ( my @@stuff = caller $cx ) {

        print "$cx: [@@DB::args] [@@stuff]\n";
        if ( ref $DB::args[0] ) {
            if ( $DB::args[0]->can('padix') ) {
                print "    PADIX: " . $DB::args[0]->padix . "\n";
            }
            if ( $DB::args[0]->can('targ') ) {
                print "    TARG: " . $DB::args[0]->targ . "\n";
                for ( B::Lint::cv()->PADLIST->ARRAY ) {
                    print +( $_->ARRAY )[ $DB::args[0]->targ ] . "\n";
                }
            }
        }
        ++$cx;
    }
}

1;
@


1.3
log
@Merge perl-5.18.2 plus local patches, remove old files

OK espie@@ sthen@@ deraadt@@
@
text
@@


1.2
log
@merge/resolve conflicts
(some more to do after this one)
@
text
@d2 1
d4 1
a4 1
our $VERSION = '0.01';
d17 2
a18 1
package B::SPECIAL;
d24 2
a25 1
package B::OP;
d34 2
a35 1
package B::SVOP;
d44 2
a45 1
package B::SPECIAL;
d53 2
a54 1
    package DB;
@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@Perl 5.12.2 from CPAN
@
text
@@


1.1.1.2
log
@Import perl-5.18.2

OK espie@@ sthen@@ deraadt@@
@
text
@a1 1
use if $] > 5.017, 'deprecate';
d3 1
a3 1
our $VERSION = '1.17';
d16 1
a16 2
package # hide from PAUSE
    B::SPECIAL;
d22 1
a22 2
package # hide from PAUSE
    B::OP;
d31 1
a31 2
package # hide from PAUSE
    B::SVOP;
d40 1
a40 2
package # hide from PAUSE
    B::SPECIAL;
d48 1
a48 2
    package # hide from PAUSE
        DB;
@

