head	1.1;
access;
symbols
	OPENBSD_6_1:1.1.0.2
	OPENBSD_6_1_BASE:1.1;
locks; strict;
comment	@# @;
expand	@o@;


1.1
date	2017.02.05.00.32.14;	author afresh1;	state Exp;
branches;
next	;
commitid	cxJ08BvJA9Pt2PTM;


desc
@@


1.1
log
@Fix merge issues, remove excess files - match perl-5.24.1 dist
@
text
@#!perl

use strict;
use warnings;

use Test::More tests => 18;

use XS::APItest qw(with_vars);

my $foo = "A"; my $rfoo = \$foo;
my $bar = "B"; my $rbar = \$bar;
my $baz = "C"; my $rbaz = \$baz;

with_vars foo bar baz {
    is $foo, 1;
    is $$rfoo, "A";
    isnt \$foo, $rfoo;

    is $bar, 2;
    is $$rbar, "B";
    isnt \$bar, $rbar;

    is $baz, 3;
    is $$rbaz, "C";
    isnt \$baz, $rbaz;
}

is $foo, "A";
is \$foo, $rfoo;

is $bar, "B";
is \$bar, $rbar;

is $baz, "C";
is \$baz, $rbaz;

with_vars x {
    is $x, 1;
}

is eval('$x++'), undef;
like $@@, qr/explicit package name/;
@
