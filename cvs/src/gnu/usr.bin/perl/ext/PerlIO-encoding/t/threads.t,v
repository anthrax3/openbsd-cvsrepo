head	1.1;
access;
symbols
	OPENBSD_6_1:1.1.0.4
	OPENBSD_6_1_BASE:1.1;
locks; strict;
comment	@# @;
expand	@o@;


1.1
date	2017.02.05.00.32.13;	author afresh1;	state Exp;
branches;
next	;
commitid	cxJ08BvJA9Pt2PTM;


desc
@@


1.1
log
@Fix merge issues, remove excess files - match perl-5.24.1 dist
@
text
@#!perl

use strict;
use warnings;

BEGIN {
    use Config;
    if ($Config{extensions} !~ /\bEncode\b/) {
	print "1..0 # Skip: no Encode\n";
	exit 0;
    }
    unless ($Config{useithreads}) {
	print "1..0 # Skip: no threads\n";
	exit 0;
    }
}

use threads;

use Test::More tests => 3 + 1;

binmode *STDOUT, ':encoding(UTF-8)';

SKIP: {
    local $@@;
    my $ret = eval {
	my $thread = threads->create(sub { pass 'in thread'; return 1 });
	skip 'test thread could not be spawned' => 3 unless $thread;
	$thread->join;
    };
    is $@@, '', 'thread did not croak';
    is $ret, 1, 'thread returned the right value';
}

pass 'passes at least one test';
@
