head	1.1;
access;
symbols
	PERL_5_24_2:1.1.1.1
	PERL:1.1.1
	OPENBSD_6_1:1.1.0.4
	OPENBSD_6_1_BASE:1.1;
locks; strict;
comment	@# @;
expand	@o@;


1.1
date	2017.02.05.00.32.08;	author afresh1;	state Exp;
branches
	1.1.1.1;
next	;
commitid	cxJ08BvJA9Pt2PTM;

1.1.1.1
date	2017.08.14.13.46.07;	author afresh1;	state Exp;
branches;
next	;
commitid	fAzrs78vdW2Yfc6A;


desc
@@


1.1
log
@Fix merge issues, remove excess files - match perl-5.24.1 dist
@
text
@#!./perl -w
#
# automated tests for Data::Dumper that need large amounts of memory; they
# are skipped unless PERL_TEST_MEMORY is set, and at least 10
#

use strict;
use warnings;

use Test::More;

use Config;
use Data::Dumper;

BEGIN {
    plan skip_all => 'Data::Dumper was not built'
        if $Config{extensions} !~ m{\b Data/Dumper \b}x;
    plan skip_all => 'Need 64-bit pointers for this test'
        if $Config{ptrsize} < 8;
    plan skip_all => 'Need ~10 GiB of core for this test'
        if !$ENV{PERL_TEST_MEMORY} || $ENV{PERL_TEST_MEMORY} < 10;
}

plan tests => 1;

{
    my $input = q/'/ x 2**31;
    my $len = length Dumper($input);
    # Each single-quote will get backslashed, so the output must have
    # stricly more than twice as many characters as the input.
    cmp_ok($len, '>', 2**32, 'correct output for huge all-quotable value');
    undef $input;
}
@


1.1.1.1
log
@Import perl-5.24.2
@
text
@@

