head	1.2;
access;
symbols
	PERL_5_24_2:1.1.1.2
	OPENBSD_6_1:1.2.0.4
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.1.1.1.0.12
	OPENBSD_6_0_BASE:1.1.1.1
	OPENBSD_5_9:1.1.1.1.0.6
	OPENBSD_5_9_BASE:1.1.1.1
	OPENBSD_5_8:1.1.1.1.0.8
	OPENBSD_5_8_BASE:1.1.1.1
	PERL_5_20_2:1.1.1.1
	OPENBSD_5_7:1.1.1.1.0.2
	OPENBSD_5_7_BASE:1.1.1.1
	PERL_5_20_1:1.1.1.1
	OPENBSD_5_6:1.1.1.1.0.4
	OPENBSD_5_6_BASE:1.1.1.1
	PERL_5_18_2:1.1.1.1
	PERL:1.1.1;
locks; strict;
comment	@# @;
expand	@b@;


1.2
date	2017.02.05.00.32.21;	author afresh1;	state Exp;
branches;
next	1.1;
commitid	cxJ08BvJA9Pt2PTM;

1.1
date	2014.03.24.14.59.11;	author afresh1;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2014.03.24.14.59.11;	author afresh1;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2017.08.14.13.46.25;	author afresh1;	state Exp;
branches;
next	;
commitid	fAzrs78vdW2Yfc6A;


desc
@@


1.2
log
@Fix merge issues, remove excess files - match perl-5.24.1 dist
@
text
@#!./perl

# Make sure pos / resetting pos on failed match works

BEGIN {
    chdir 't' if -d 't';
    @@INC = '../lib';
    require './test.pl';
}

plan tests => 8;

use strict;
use warnings;

##  Early bailout of pp_match because matchlen > stringlen

# With a var
{
	my $str = "bird";

	$str =~ /i/g;

	is(pos($str),  2, 'pos correct');

	$str =~ /toolongtomatch/g;

	is(pos($str), undef, 'pos undef after failed match');
}

# With $_
{
	$_ = "bird";

	m/i/g;

	is(pos, 2, 'pos correct');

	m/toolongtomatch/g;

	is(pos, undef, 'pos undef after failed match');
}

## Early bail out of pp_match because ?? already matched

# With a var
{
	my $str = "bird";

	for (1..2) {
		if ($str =~ m?bird?g) {
			is(pos($str),  4, 'pos correct');
		} else {
			is(pos($str), undef, 'pos undef after failed match');
		}
	}
}

# With $_
{
	for (1..2) {
		if (m?\d?g) {
			is(pos,  1, 'pos correct');
		} else {
			is(pos, undef, 'pos undef after failed match');
		}
	}
}
@


1.1
log
@Initial revision
@
text
@a4 3
use strict;
use warnings;

d12 3
@


1.1.1.1
log
@Import perl-5.18.2

OK espie@@ sthen@@ deraadt@@
@
text
@@


1.1.1.2
log
@Import perl-5.24.2
@
text
@d5 3
a14 3

use strict;
use warnings;
@

