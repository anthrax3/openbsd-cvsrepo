head	1.2;
access;
symbols
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.1.1.1.0.10
	OPENBSD_6_0_BASE:1.1.1.1
	OPENBSD_5_9:1.1.1.1.0.4
	OPENBSD_5_9_BASE:1.1.1.1
	OPENBSD_5_8:1.1.1.1.0.6
	OPENBSD_5_8_BASE:1.1.1.1
	PERL_5_20_2:1.1.1.1
	OPENBSD_5_7:1.1.1.1.0.2
	OPENBSD_5_7_BASE:1.1.1.1
	PERL_5_20_1:1.1.1.1
	PERL:1.1.1;
locks; strict;
comment	@# @;
expand	@b@;


1.2
date	2017.02.05.00.32.20;	author afresh1;	state Exp;
branches;
next	1.1;
commitid	cxJ08BvJA9Pt2PTM;

1.1
date	2014.11.17.20.53.18;	author afresh1;	state Exp;
branches
	1.1.1.1;
next	;
commitid	B31cAbBIXiCqnL97;

1.1.1.1
date	2014.11.17.20.53.18;	author afresh1;	state Exp;
branches;
next	;
commitid	B31cAbBIXiCqnL97;


desc
@@


1.2
log
@Fix merge issues, remove excess files - match perl-5.24.1 dist
@
text
@#!perl

BEGIN {
    chdir 't' if -d 't';
    require './test.pl';
    set_up_inc('../lib');
}

no warnings "illegalproto";

our $a = 123;
our $z;

sub t000 ($a) { $a || "z" }
is prototype(\&t000), "\$a", "(\$a) interpreted as protoype when not enabled";
is &t000(456), 123, "(\$a) not signature when not enabled";
is $a, 123;

no warnings "experimental::signatures";
use feature "signatures";

sub t001 { $a || "z" }
is prototype(\&t001), undef;
is eval("t001()"), 123;
is eval("t001(456)"), 123;
is eval("t001(456, 789)"), 123;
is $a, 123;

sub t002 () { $a || "z" }
is prototype(\&t002), undef;
is eval("t002()"), 123;
is eval("t002(456)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t002(456, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t003 ( ) { $a || "z" }
is prototype(\&t003), undef;
is eval("t003()"), 123;
is eval("t003(456)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t003(456, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t006 ($a) { $a || "z" }
is prototype(\&t006), undef;
is eval("t006()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t006(0)"), "z";
is eval("t006(456)"), 456;
is eval("t006(456, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t006(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t007 ($a, $b) { $a.$b }
is prototype(\&t007), undef;
is eval("t007()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t007(456)"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t007(456, 789)"), "456789";
is eval("t007(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t007(456, 789, 987, 654)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t008 ($a, $b, $c) { $a.$b.$c }
is prototype(\&t008), undef;
is eval("t008()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t008(456)"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t008(456, 789)"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t008(456, 789, 987)"), "456789987";
is eval("t008(456, 789, 987, 654)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t009 ($abc, $def) { $abc.$def }
is prototype(\&t009), undef;
is eval("t009()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t009(456)"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t009(456, 789)"), "456789";
is eval("t009(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t009(456, 789, 987, 654)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t010 ($a, $) { $a || "z" }
is prototype(\&t010), undef;
is eval("t010()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t010(456)"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t010(0, 789)"), "z";
is eval("t010(456, 789)"), 456;
is eval("t010(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t010(456, 789, 987, 654)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t011 ($, $a) { $a || "z" }
is prototype(\&t011), undef;
is eval("t011()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t011(456)"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t011(456, 0)"), "z";
is eval("t011(456, 789)"), 789;
is eval("t011(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t011(456, 789, 987, 654)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t012 ($, $) { $a || "z" }
is prototype(\&t012), undef;
is eval("t012()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t012(456)"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t012(0, 789)"), 123;
is eval("t012(456, 789)"), 123;
is eval("t012(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t012(456, 789, 987, 654)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t013 ($) { $a || "z" }
is prototype(\&t013), undef;
is eval("t013()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t013(0)"), 123;
is eval("t013(456)"), 123;
is eval("t013(456, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t013(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t013(456, 789, 987, 654)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t014 ($a = 222) { $a // "z" }
is prototype(\&t014), undef;
is eval("t014()"), 222;
is eval("t014(0)"), 0;
is eval("t014(undef)"), "z";
is eval("t014(456)"), 456;
is eval("t014(456, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t014(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t015 ($a = undef) { $a // "z" }
is prototype(\&t015), undef;
is eval("t015()"), "z";
is eval("t015(0)"), 0;
is eval("t015(undef)"), "z";
is eval("t015(456)"), 456;
is eval("t015(456, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t015(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t016 ($a = do { $z++; 222 }) { $a // "z" }
$z = 0;
is prototype(\&t016), undef;
is eval("t016()"), 222;
is $z, 1;
is eval("t016(0)"), 0;
is eval("t016(undef)"), "z";
is eval("t016(456)"), 456;
is eval("t016(456, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t016(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $z, 1;
is eval("t016()"), 222;
is $z, 2;
is $a, 123;

sub t018 { join("/", @@_) }
sub t017 ($p = t018 222, $a = 333) { $p // "z" }
is prototype(\&t017), undef;
is eval("t017()"), "222/333";
is $a, 333;
$a = 123;
is eval("t017(0)"), 0;
is eval("t017(undef)"), "z";
is eval("t017(456)"), 456;
is eval("t017(456, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t017(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t019 ($p = 222, $a = 333) { "$p/$a" }
is prototype(\&t019), undef;
is eval("t019()"), "222/333";
is eval("t019(0)"), "0/333";
is eval("t019(456)"), "456/333";
is eval("t019(456, 789)"), "456/789";
is eval("t019(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t020 :prototype($) { $_[0]."z" }
sub t021 ($p = t020 222, $a = 333) { "$p/$a" }
is prototype(\&t021), undef;
is eval("t021()"), "222z/333";
is eval("t021(0)"), "0/333";
is eval("t021(456)"), "456/333";
is eval("t021(456, 789)"), "456/789";
is eval("t021(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t022 ($p = do { $z += 10; 222 }, $a = do { $z++; 333 }) { "$p/$a" }
$z = 0;
is prototype(\&t022), undef;
is eval("t022()"), "222/333";
is $z, 11;
is eval("t022(0)"), "0/333";
is $z, 12;
is eval("t022(456)"), "456/333";
is $z, 13;
is eval("t022(456, 789)"), "456/789";
is eval("t022(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $z, 13;
is $a, 123;

sub t023 ($a = sub { $_[0]."z" }) { $a->("a")."y" }
is prototype(\&t023), undef;
is eval("t023()"), "azy";
is eval("t023(sub { \"x\".\$_[0].\"x\" })"), "xaxy";
is eval("t023(sub { \"x\".\$_[0].\"x\" }, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t036 ($a = $a."x") { $a."y" }
is prototype(\&t036), undef;
is eval("t036()"), "123xy";
is eval("t036(0)"), "0y";
is eval("t036(456)"), "456y";
is eval("t036(456, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t120 ($a = $_) { $a // "z" }
is prototype(\&t120), undef;
$_ = "___";
is eval("t120()"), "___";
$_ = "___";
is eval("t120(undef)"), "z";
$_ = "___";
is eval("t120(0)"), 0;
$_ = "___";
is eval("t120(456)"), 456;
$_ = "___";
is eval("t120(456, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t121 ($a = caller) { $a // "z" }
is prototype(\&t121), undef;
is eval("t121()"), "main";
is eval("t121(undef)"), "z";
is eval("t121(0)"), 0;
is eval("t121(456)"), 456;
is eval("t121(456, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("package T121::Z; ::t121()"), "T121::Z";
is eval("package T121::Z; ::t121(undef)"), "z";
is eval("package T121::Z; ::t121(0)"), 0;
is eval("package T121::Z; ::t121(456)"), 456;
is eval("package T121::Z; ::t121(456, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t129 ($a = return 222) { $a."x" }
is prototype(\&t129), undef;
is eval("t129()"), "222";
is eval("t129(0)"), "0x";
is eval("t129(456)"), "456x";
is eval("t129(456, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

use feature "current_sub";
sub t122 ($c = 5, $r = $c > 0 ? __SUB__->($c - 1) : "") { $c.$r }
is prototype(\&t122), undef;
is eval("t122()"), "543210";
is eval("t122(0)"), "0";
is eval("t122(1)"), "10";
is eval("t122(5)"), "543210";
is eval("t122(5, 789)"), "5789";
is eval("t122(5, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t123 ($list = wantarray) { $list ? "list" : "scalar" }
is prototype(\&t123), undef;
is eval("scalar(t123())"), "scalar";
is eval("(t123())[0]"), "list";
is eval("scalar(t123(0))"), "scalar";
is eval("(t123(0))[0]"), "scalar";
is eval("scalar(t123(1))"), "list";
is eval("(t123(1))[0]"), "list";
is eval("t123(456, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t124 ($b = (local $a = $a + 1)) { "$a/$b" }
is prototype(\&t124), undef;
is eval("t124()"), "124/124";
is $a, 123;
is eval("t124(456)"), "123/456";
is $a, 123;
is eval("t124(456, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t125 ($c = (our $t125_counter)++) { $c }
is prototype(\&t125), undef;
is eval("t125()"), 0;
is eval("t125()"), 1;
is eval("t125()"), 2;
is eval("t125(456)"), 456;
is eval("t125(789)"), 789;
is eval("t125()"), 3;
is eval("t125()"), 4;
is eval("t125(456, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

use feature "state";
sub t126 ($c = (state $s = $z++)) { $c }
is prototype(\&t126), undef;
$z = 222;
is eval("t126(456)"), 456;
is $z, 222;
is eval("t126()"), 222;
is $z, 223;
is eval("t126(456)"), 456;
is $z, 223;
is eval("t126()"), 222;
is $z, 223;
is eval("t126(456, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $z, 223;
is $a, 123;

sub t127 ($c = do { state $s = $z++; $s++ }) { $c }
is prototype(\&t127), undef;
$z = 222;
is eval("t127(456)"), 456;
is $z, 222;
is eval("t127()"), 222;
is $z, 223;
is eval("t127()"), 223;
is eval("t127()"), 224;
is $z, 223;
is eval("t127(456)"), 456;
is eval("t127(789)"), 789;
is eval("t127()"), 225;
is eval("t127()"), 226;
is eval("t127(456, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $z, 223;
is $a, 123;

sub t037 ($a = 222, $b = $a."x") { "$a/$b" }
is prototype(\&t037), undef;
is eval("t037()"), "222/222x";
is eval("t037(0)"), "0/0x";
is eval("t037(456)"), "456/456x";
is eval("t037(456, 789)"), "456/789";
is eval("t037(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t128 ($a = 222, $b = ($a = 333)) { "$a/$b" }
is prototype(\&t128), undef;
is eval("t128()"), "333/333";
is eval("t128(0)"), "333/333";
is eval("t128(456)"), "333/333";
is eval("t128(456, 789)"), "456/789";
is eval("t128(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t130 { join(",", @@_).";".scalar(@@_) }
sub t131 ($a = 222, $b = goto &t130) { "$a/$b" }
is prototype(\&t131), undef;
is eval("t131()"), ";0";
is eval("t131(0)"), "0;1";
is eval("t131(456)"), "456;1";
is eval("t131(456, 789)"), "456/789";
is eval("t131(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

eval "#line 8 foo\nsub t024 (\$a =) { }";
is $@@, "Optional parameter lacks default expression at foo line 8\.\n";

sub t025 ($ = undef) { $a // "z" }
is prototype(\&t025), undef;
is eval("t025()"), 123;
is eval("t025(0)"), 123;
is eval("t025(456)"), 123;
is eval("t025(456, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t025(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t025(456, 789, 987, 654)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t026 ($ = 222) { $a // "z" }
is prototype(\&t026), undef;
is eval("t026()"), 123;
is eval("t026(0)"), 123;
is eval("t026(456)"), 123;
is eval("t026(456, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t026(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t026(456, 789, 987, 654)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t032 ($ = do { $z++; 222 }) { $a // "z" }
$z = 0;
is prototype(\&t032), undef;
is eval("t032()"), 123;
is $z, 1;
is eval("t032(0)"), 123;
is eval("t032(456)"), 123;
is eval("t032(456, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t032(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t032(456, 789, 987, 654)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $z, 1;
is $a, 123;

sub t027 ($ =) { $a // "z" }
is prototype(\&t027), undef;
is eval("t027()"), 123;
is eval("t027(0)"), 123;
is eval("t027(456)"), 123;
is eval("t027(456, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t027(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t027(456, 789, 987, 654)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t119 ($ =, $a = 333) { $a // "z" }
is prototype(\&t119), undef;
is eval("t119()"), 333;
is eval("t119(0)"), 333;
is eval("t119(456)"), 333;
is eval("t119(456, 789)"), 789;
is eval("t119(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t119(456, 789, 987, 654)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t028 ($a, $b = 333) { "$a/$b" }
is prototype(\&t028), undef;
is eval("t028()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t028(0)"), "0/333";
is eval("t028(456)"), "456/333";
is eval("t028(456, 789)"), "456/789";
is eval("t028(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t045 ($a, $ = 333) { "$a/" }
is prototype(\&t045), undef;
is eval("t045()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t045(0)"), "0/";
is eval("t045(456)"), "456/";
is eval("t045(456, 789)"), "456/";
is eval("t045(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t046 ($, $b = 333) { "$a/$b" }
is prototype(\&t046), undef;
is eval("t046()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t046(0)"), "123/333";
is eval("t046(456)"), "123/333";
is eval("t046(456, 789)"), "123/789";
is eval("t046(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t047 ($, $ = 333) { "$a/" }
is prototype(\&t047), undef;
is eval("t047()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t047(0)"), "123/";
is eval("t047(456)"), "123/";
is eval("t047(456, 789)"), "123/";
is eval("t047(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t029 ($a, $b, $c = 222, $d = 333) { "$a/$b/$c/$d" }
is prototype(\&t029), undef;
is eval("t029()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t029(0)"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t029(456)"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t029(456, 789)"), "456/789/222/333";
is eval("t029(456, 789, 987)"), "456/789/987/333";
is eval("t029(456, 789, 987, 654)"), "456/789/987/654";
is eval("t029(456, 789, 987, 654, 321)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t029(456, 789, 987, 654, 321, 111)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t038 ($a, $b = $a."x") { "$a/$b" }
is prototype(\&t038), undef;
is eval("t038()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t038(0)"), "0/0x";
is eval("t038(456)"), "456/456x";
is eval("t038(456, 789)"), "456/789";
is eval("t038(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

eval "#line 8 foo\nsub t030 (\$a = 222, \$b) { }";
is $@@, "Mandatory parameter follows optional parameter at foo line 8\.\n";

eval "#line 8 foo\nsub t031 (\$a = 222, \$b = 333, \$c, \$d) { }";
is $@@, "Mandatory parameter follows optional parameter at foo line 8\.\n";

sub t034 (@@abc) { join("/", @@abc).";".scalar(@@abc) }
is prototype(\&t034), undef;
is eval("t034()"), ";0";
is eval("t034(0)"), "0;1";
is eval("t034(456)"), "456;1";
is eval("t034(456, 789)"), "456/789;2";
is eval("t034(456, 789, 987)"), "456/789/987;3";
is eval("t034(456, 789, 987, 654)"), "456/789/987/654;4";
is eval("t034(456, 789, 987, 654, 321)"), "456/789/987/654/321;5";
is eval("t034(456, 789, 987, 654, 321, 111)"), "456/789/987/654/321/111;6";
is $a, 123;

eval "#line 8 foo\nsub t136 (\@@abc = 222) { }";
like $@@, qr/\AParse error at foo line 8\.\n/;

eval "#line 8 foo\nsub t137 (\@@abc =) { }";
like $@@, qr/\AParse error at foo line 8\.\n/;

sub t035 (@@) { $a }
is prototype(\&t035), undef;
is eval("t035()"), 123;
is eval("t035(0)"), 123;
is eval("t035(456)"), 123;
is eval("t035(456, 789)"), 123;
is eval("t035(456, 789, 987)"), 123;
is eval("t035(456, 789, 987, 654)"), 123;
is eval("t035(456, 789, 987, 654, 321)"), 123;
is eval("t035(456, 789, 987, 654, 321, 111)"), 123;
is $a, 123;

eval "#line 8 foo\nsub t138 (\@@ = 222) { }";
like $@@, qr/\AParse error at foo line 8\.\n/;

eval "#line 8 foo\nsub t139 (\@@ =) { }";
like $@@, qr/\AParse error at foo line 8\.\n/;

sub t039 (%abc) { join("/", map { $_."=".$abc{$_} } sort keys %abc) }
is prototype(\&t039), undef;
is eval("t039()"), "";
is eval("t039(0)"), undef;
like $@@, qr#\AOdd name/value argument for subroutine at \(eval \d+\) line 1\.\n\z#;
is eval("t039(456)"), undef;
like $@@, qr#\AOdd name/value argument for subroutine at \(eval \d+\) line 1\.\n\z#;
is eval("t039(456, 789)"), "456=789";
is eval("t039(456, 789, 987)"), undef;
like $@@, qr#\AOdd name/value argument for subroutine at \(eval \d+\) line 1\.\n\z#;
is eval("t039(456, 789, 987, 654)"), "456=789/987=654";
is eval("t039(456, 789, 987, 654, 321)"), undef;
like $@@, qr#\AOdd name/value argument for subroutine at \(eval \d+\) line 1\.\n\z#;
is eval("t039(456, 789, 987, 654, 321, 111)"), "321=111/456=789/987=654";
is $a, 123;

eval "#line 8 foo\nsub t140 (\%abc = 222) { }";
like $@@, qr/\AParse error at foo line 8\.\n/;

eval "#line 8 foo\nsub t141 (\%abc =) { }";
like $@@, qr/\AParse error at foo line 8\.\n/;

sub t040 (%) { $a }
is prototype(\&t040), undef;
is eval("t040()"), 123;
is eval("t040(0)"), undef;
like $@@, qr#\AOdd name/value argument for subroutine at \(eval \d+\) line 1\.\n\z#;
is eval("t040(456)"), undef;
like $@@, qr#\AOdd name/value argument for subroutine at \(eval \d+\) line 1\.\n\z#;
is eval("t040(456, 789)"), 123;
is eval("t040(456, 789, 987)"), undef;
like $@@, qr#\AOdd name/value argument for subroutine at \(eval \d+\) line 1\.\n\z#;
is eval("t040(456, 789, 987, 654)"), 123;
is eval("t040(456, 789, 987, 654, 321)"), undef;
like $@@, qr#\AOdd name/value argument for subroutine at \(eval \d+\) line 1\.\n\z#;
is eval("t040(456, 789, 987, 654, 321, 111)"), 123;
is $a, 123;

eval "#line 8 foo\nsub t142 (\% = 222) { }";
like $@@, qr/\AParse error at foo line 8\.\n/;

eval "#line 8 foo\nsub t143 (\% =) { }";
like $@@, qr/\AParse error at foo line 8\.\n/;

sub t041 ($a, @@b) { $a.";".join("/", @@b) }
is prototype(\&t041), undef;
is eval("t041()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t041(0)"), "0;";
is eval("t041(456)"), "456;";
is eval("t041(456, 789)"), "456;789";
is eval("t041(456, 789, 987)"), "456;789/987";
is eval("t041(456, 789, 987, 654)"), "456;789/987/654";
is eval("t041(456, 789, 987, 654, 321)"), "456;789/987/654/321";
is eval("t041(456, 789, 987, 654, 321, 111)"), "456;789/987/654/321/111";
is $a, 123;

sub t042 ($a, @@) { $a.";" }
is prototype(\&t042), undef;
is eval("t042()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t042(0)"), "0;";
is eval("t042(456)"), "456;";
is eval("t042(456, 789)"), "456;";
is eval("t042(456, 789, 987)"), "456;";
is eval("t042(456, 789, 987, 654)"), "456;";
is eval("t042(456, 789, 987, 654, 321)"), "456;";
is eval("t042(456, 789, 987, 654, 321, 111)"), "456;";
is $a, 123;

sub t043 ($, @@b) { $a.";".join("/", @@b) }
is prototype(\&t043), undef;
is eval("t043()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t043(0)"), "123;";
is eval("t043(456)"), "123;";
is eval("t043(456, 789)"), "123;789";
is eval("t043(456, 789, 987)"), "123;789/987";
is eval("t043(456, 789, 987, 654)"), "123;789/987/654";
is eval("t043(456, 789, 987, 654, 321)"), "123;789/987/654/321";
is eval("t043(456, 789, 987, 654, 321, 111)"), "123;789/987/654/321/111";
is $a, 123;

sub t044 ($, @@) { $a.";" }
is prototype(\&t044), undef;
is eval("t044()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t044(0)"), "123;";
is eval("t044(456)"), "123;";
is eval("t044(456, 789)"), "123;";
is eval("t044(456, 789, 987)"), "123;";
is eval("t044(456, 789, 987, 654)"), "123;";
is eval("t044(456, 789, 987, 654, 321)"), "123;";
is eval("t044(456, 789, 987, 654, 321, 111)"), "123;";
is $a, 123;

sub t049 ($a, %b) { $a.";".join("/", map { $_."=".$b{$_} } sort keys %b) }
is prototype(\&t049), undef;
is eval("t049()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t049(222)"), "222;";
is eval("t049(222, 456)"), undef;
like $@@, qr#\AOdd name/value argument for subroutine at \(eval \d+\) line 1\.\n\z#;
is eval("t049(222, 456, 789)"), "222;456=789";
is eval("t049(222, 456, 789, 987)"), undef;
like $@@, qr#\AOdd name/value argument for subroutine at \(eval \d+\) line 1\.\n\z#;
is eval("t049(222, 456, 789, 987, 654)"), "222;456=789/987=654";
is eval("t049(222, 456, 789, 987, 654, 321)"), undef;
like $@@, qr#\AOdd name/value argument for subroutine at \(eval \d+\) line 1\.\n\z#;
is eval("t049(222, 456, 789, 987, 654, 321, 111)"),
    "222;321=111/456=789/987=654";
is $a, 123;

sub t051 ($a, $b, $c, @@d) { "$a;$b;$c;".join("/", @@d).";".scalar(@@d) }
is prototype(\&t051), undef;
is eval("t051()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t051(456)"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t051(456, 789)"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t051(456, 789, 987)"), "456;789;987;;0";
is eval("t051(456, 789, 987, 654)"), "456;789;987;654;1";
is eval("t051(456, 789, 987, 654, 321)"), "456;789;987;654/321;2";
is eval("t051(456, 789, 987, 654, 321, 111)"), "456;789;987;654/321/111;3";
is $a, 123;

sub t052 ($a, $b, %c) { "$a;$b;".join("/", map { $_."=".$c{$_} } sort keys %c) }
is prototype(\&t052), undef;
is eval("t052()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t052(222)"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t052(222, 333)"), "222;333;";
is eval("t052(222, 333, 456)"), undef;
like $@@, qr#\AOdd name/value argument for subroutine at \(eval \d+\) line 1\.\n\z#;
is eval("t052(222, 333, 456, 789)"), "222;333;456=789";
is eval("t052(222, 333, 456, 789, 987)"), undef;
like $@@, qr#\AOdd name/value argument for subroutine at \(eval \d+\) line 1\.\n\z#;
is eval("t052(222, 333, 456, 789, 987, 654)"), "222;333;456=789/987=654";
is eval("t052(222, 333, 456, 789, 987, 654, 321)"), undef;
like $@@, qr#\AOdd name/value argument for subroutine at \(eval \d+\) line 1\.\n\z#;
is eval("t052(222, 333, 456, 789, 987, 654, 321, 111)"),
    "222;333;321=111/456=789/987=654";
is $a, 123;

sub t053 ($a, $b, $c, %d) {
    "$a;$b;$c;".join("/", map { $_."=".$d{$_} } sort keys %d)
}
is prototype(\&t053), undef;
is eval("t053()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t053(222)"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t053(222, 333)"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t053(222, 333, 444)"), "222;333;444;";
is eval("t053(222, 333, 444, 456)"), undef;
like $@@, qr#\AOdd name/value argument for subroutine at \(eval \d+\) line 1\.\n\z#;
is eval("t053(222, 333, 444, 456, 789)"), "222;333;444;456=789";
is eval("t053(222, 333, 444, 456, 789, 987)"), undef;
like $@@, qr#\AOdd name/value argument for subroutine at \(eval \d+\) line 1\.\n\z#;
is eval("t053(222, 333, 444, 456, 789, 987, 654)"),
    "222;333;444;456=789/987=654";
is eval("t053(222, 333, 444, 456, 789, 987, 654, 321)"), undef;
like $@@, qr#\AOdd name/value argument for subroutine at \(eval \d+\) line 1\.\n\z#;
is eval("t053(222, 333, 444, 456, 789, 987, 654, 321, 111)"),
    "222;333;444;321=111/456=789/987=654";
is $a, 123;

sub t048 ($a = 222, @@b) { $a.";".join("/", @@b).";".scalar(@@b) }
is prototype(\&t048), undef;
is eval("t048()"), "222;;0";
is eval("t048(0)"), "0;;0";
is eval("t048(456)"), "456;;0";
is eval("t048(456, 789)"), "456;789;1";
is eval("t048(456, 789, 987)"), "456;789/987;2";
is eval("t048(456, 789, 987, 654)"), "456;789/987/654;3";
is eval("t048(456, 789, 987, 654, 321)"), "456;789/987/654/321;4";
is eval("t048(456, 789, 987, 654, 321, 111)"), "456;789/987/654/321/111;5";
is $a, 123;

sub t054 ($a = 222, $b = 333, @@c) { "$a;$b;".join("/", @@c).";".scalar(@@c) }
is prototype(\&t054), undef;
is eval("t054()"), "222;333;;0";
is eval("t054(456)"), "456;333;;0";
is eval("t054(456, 789)"), "456;789;;0";
is eval("t054(456, 789, 987)"), "456;789;987;1";
is eval("t054(456, 789, 987, 654)"), "456;789;987/654;2";
is eval("t054(456, 789, 987, 654, 321)"), "456;789;987/654/321;3";
is eval("t054(456, 789, 987, 654, 321, 111)"), "456;789;987/654/321/111;4";
is $a, 123;

sub t055 ($a = 222, $b = 333, $c = 444, @@d) {
    "$a;$b;$c;".join("/", @@d).";".scalar(@@d)
}
is prototype(\&t055), undef;
is eval("t055()"), "222;333;444;;0";
is eval("t055(456)"), "456;333;444;;0";
is eval("t055(456, 789)"), "456;789;444;;0";
is eval("t055(456, 789, 987)"), "456;789;987;;0";
is eval("t055(456, 789, 987, 654)"), "456;789;987;654;1";
is eval("t055(456, 789, 987, 654, 321)"), "456;789;987;654/321;2";
is eval("t055(456, 789, 987, 654, 321, 111)"), "456;789;987;654/321/111;3";
is $a, 123;

sub t050 ($a = 211, %b) { $a.";".join("/", map { $_."=".$b{$_} } sort keys %b) }
is prototype(\&t050), undef;
is eval("t050()"), "211;";
is eval("t050(222)"), "222;";
is eval("t050(222, 456)"), undef;
like $@@, qr#\AOdd name/value argument for subroutine at \(eval \d+\) line 1\.\n\z#;
is eval("t050(222, 456, 789)"), "222;456=789";
is eval("t050(222, 456, 789, 987)"), undef;
like $@@, qr#\AOdd name/value argument for subroutine at \(eval \d+\) line 1\.\n\z#;
is eval("t050(222, 456, 789, 987, 654)"), "222;456=789/987=654";
is eval("t050(222, 456, 789, 987, 654, 321)"), undef;
like $@@, qr#\AOdd name/value argument for subroutine at \(eval \d+\) line 1\.\n\z#;
is eval("t050(222, 456, 789, 987, 654, 321, 111)"),
    "222;321=111/456=789/987=654";
is $a, 123;

sub t056 ($a = 211, $b = 311, %c) {
    "$a;$b;".join("/", map { $_."=".$c{$_} } sort keys %c)
}
is prototype(\&t056), undef;
is eval("t056()"), "211;311;";
is eval("t056(222)"), "222;311;";
is eval("t056(222, 333)"), "222;333;";
is eval("t056(222, 333, 456)"), undef;
like $@@, qr#\AOdd name/value argument for subroutine at \(eval \d+\) line 1\.\n\z#;
is eval("t056(222, 333, 456, 789)"), "222;333;456=789";
is eval("t056(222, 333, 456, 789, 987)"), undef;
like $@@, qr#\AOdd name/value argument for subroutine at \(eval \d+\) line 1\.\n\z#;
is eval("t056(222, 333, 456, 789, 987, 654)"), "222;333;456=789/987=654";
is eval("t056(222, 333, 456, 789, 987, 654, 321)"), undef;
like $@@, qr#\AOdd name/value argument for subroutine at \(eval \d+\) line 1\.\n\z#;
is eval("t056(222, 333, 456, 789, 987, 654, 321, 111)"),
    "222;333;321=111/456=789/987=654";
is $a, 123;

sub t057 ($a = 211, $b = 311, $c = 411, %d) {
    "$a;$b;$c;".join("/", map { $_."=".$d{$_} } sort keys %d)
}
is prototype(\&t057), undef;
is eval("t057()"), "211;311;411;";
is eval("t057(222)"), "222;311;411;";
is eval("t057(222, 333)"), "222;333;411;";
is eval("t057(222, 333, 444)"), "222;333;444;";
is eval("t057(222, 333, 444, 456)"), undef;
like $@@, qr#\AOdd name/value argument for subroutine at \(eval \d+\) line 1\.\n\z#;
is eval("t057(222, 333, 444, 456, 789)"), "222;333;444;456=789";
is eval("t057(222, 333, 444, 456, 789, 987)"), undef;
like $@@, qr#\AOdd name/value argument for subroutine at \(eval \d+\) line 1\.\n\z#;
is eval("t057(222, 333, 444, 456, 789, 987, 654)"),
    "222;333;444;456=789/987=654";
is eval("t057(222, 333, 444, 456, 789, 987, 654, 321)"), undef;
like $@@, qr#\AOdd name/value argument for subroutine at \(eval \d+\) line 1\.\n\z#;
is eval("t057(222, 333, 444, 456, 789, 987, 654, 321, 111)"),
    "222;333;444;321=111/456=789/987=654";
is $a, 123;

sub t058 ($a, $b = 333, @@c) { "$a;$b;".join("/", @@c).";".scalar(@@c) }
is prototype(\&t058), undef;
is eval("t058()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t058(456)"), "456;333;;0";
is eval("t058(456, 789)"), "456;789;;0";
is eval("t058(456, 789, 987)"), "456;789;987;1";
is eval("t058(456, 789, 987, 654)"), "456;789;987/654;2";
is eval("t058(456, 789, 987, 654, 321)"), "456;789;987/654/321;3";
is eval("t058(456, 789, 987, 654, 321, 111)"), "456;789;987/654/321/111;4";
is $a, 123;

eval "#line 8 foo\nsub t059 (\@@a, \$b) { }";
is $@@, "Slurpy parameter not last at foo line 8\.\n";

eval "#line 8 foo\nsub t060 (\@@a, \$b = 222) { }";
is $@@, "Slurpy parameter not last at foo line 8\.\n";

eval "#line 8 foo\nsub t061 (\@@a, \@@b) { }";
is $@@, "Slurpy parameter not last at foo line 8\.\n";

eval "#line 8 foo\nsub t062 (\@@a, \%b) { }";
is $@@, "Slurpy parameter not last at foo line 8\.\n";

eval "#line 8 foo\nsub t063 (\@@, \$b) { }";
is $@@, "Slurpy parameter not last at foo line 8\.\n";

eval "#line 8 foo\nsub t064 (\@@, \$b = 222) { }";
is $@@, "Slurpy parameter not last at foo line 8\.\n";

eval "#line 8 foo\nsub t065 (\@@, \@@b) { }";
is $@@, "Slurpy parameter not last at foo line 8\.\n";

eval "#line 8 foo\nsub t066 (\@@, \%b) { }";
is $@@, "Slurpy parameter not last at foo line 8\.\n";

eval "#line 8 foo\nsub t067 (\@@a, \$) { }";
is $@@, "Slurpy parameter not last at foo line 8\.\n";

eval "#line 8 foo\nsub t068 (\@@a, \$ = 222) { }";
is $@@, "Slurpy parameter not last at foo line 8\.\n";

eval "#line 8 foo\nsub t069 (\@@a, \@@) { }";
is $@@, "Slurpy parameter not last at foo line 8\.\n";

eval "#line 8 foo\nsub t070 (\@@a, \%) { }";
is $@@, "Slurpy parameter not last at foo line 8\.\n";

eval "#line 8 foo\nsub t071 (\@@, \$) { }";
is $@@, "Slurpy parameter not last at foo line 8\.\n";

eval "#line 8 foo\nsub t072 (\@@, \$ = 222) { }";
is $@@, "Slurpy parameter not last at foo line 8\.\n";

eval "#line 8 foo\nsub t073 (\@@, \@@) { }";
is $@@, "Slurpy parameter not last at foo line 8\.\n";

eval "#line 8 foo\nsub t074 (\@@, \%) { }";
is $@@, "Slurpy parameter not last at foo line 8\.\n";

eval "#line 8 foo\nsub t075 (\%a, \$b) { }";
is $@@, "Slurpy parameter not last at foo line 8\.\n";

eval "#line 8 foo\nsub t076 (\%, \$b) { }";
is $@@, "Slurpy parameter not last at foo line 8\.\n";

eval "#line 8 foo\nsub t077 (\$a, \@@b, \$c) { }";
is $@@, "Slurpy parameter not last at foo line 8\.\n";

eval "#line 8 foo\nsub t078 (\$a, \%b, \$c) { }";
is $@@, "Slurpy parameter not last at foo line 8\.\n";

eval "#line 8 foo\nsub t079 (\$a, \@@b, \$c, \$d) { }";
is $@@, "Slurpy parameter not last at foo line 8\.\n";

sub t080 ($a,,, $b) { $a.$b }
is prototype(\&t080), undef;
is eval("t080()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t080(456)"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t080(456, 789)"), "456789";
is eval("t080(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t080(456, 789, 987, 654)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t081 ($a, $b,,) { $a.$b }
is prototype(\&t081), undef;
is eval("t081()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t081(456)"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t081(456, 789)"), "456789";
is eval("t081(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t081(456, 789, 987, 654)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

eval "#line 8 foo\nsub t082 (, \$a) { }";
like $@@, qr/\AParse error at foo line 8\.\n/;

eval "#line 8 foo\nsub t083 (,) { }";
like $@@, qr/\AParse error at foo line 8\.\n/;

sub t084($a,$b){ $a.$b }
is prototype(\&t084), undef;
is eval("t084()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t084(456)"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t084(456, 789)"), "456789";
is eval("t084(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t084(456, 789, 987, 654)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t085
    (
    $
    a
    ,
    ,
    $
    b
    =
    333
    ,
    ,
    )
    { $a.$b }
is prototype(\&t085), undef;
is eval("t085()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t085(456)"), "456333";
is eval("t085(456, 789)"), "456789";
is eval("t085(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t085(456, 789, 987, 654)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t086
    ( #foo)))
    $ #foo)))
    a #foo)))
    , #foo)))
    , #foo)))
    $ #foo)))
    b #foo)))
    = #foo)))
    333 #foo)))
    , #foo)))
    , #foo)))
    ) #foo)))
    { $a.$b }
is prototype(\&t086), undef;
is eval("t086()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t086(456)"), "456333";
is eval("t086(456, 789)"), "456789";
is eval("t086(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t086(456, 789, 987, 654)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t087
    (#foo)))
    $ #foo)))
    a#foo)))
    ,#foo)))
    ,#foo)))
    $ #foo)))
    b#foo)))
    =#foo)))
    333#foo)))
    ,#foo)))
    ,#foo)))
    )#foo)))
    { $a.$b }
is prototype(\&t087), undef;
is eval("t087()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t087(456)"), "456333";
is eval("t087(456, 789)"), "456789";
is eval("t087(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t087(456, 789, 987, 654)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

eval "#line 8 foo\nsub t088 (\$ #foo\na) { }";
is $@@, "";

eval "#line 8 foo\nsub t089 (\$#foo\na) { }";
like $@@, qr/\AParse error at foo line 8\.\n/;

eval "#line 8 foo\nsub t090 (\@@ #foo\na) { }";
is $@@, "";

eval "#line 8 foo\nsub t091 (\@@#foo\na) { }";
like $@@, qr/\AParse error at foo line 8\.\n/;

eval "#line 8 foo\nsub t092 (\% #foo\na) { }";
is $@@, "";

eval "#line 8 foo\nsub t093 (\%#foo\na) { }";
like $@@, qr/\AParse error at foo line 8\.\n/;

eval "#line 8 foo\nsub t094 (123) { }";
like $@@, qr/\AParse error at foo line 8\.\n/;

eval "#line 8 foo\nsub t095 (\$a, 123) { }";
like $@@, qr/\AParse error at foo line 8\.\n/;

eval "#line 8 foo\nsub t096 (\$a 123) { }";
like $@@, qr/\AParse error at foo line 8\.\n/;

eval "#line 8 foo\nsub t097 (\$a { }) { }";
like $@@, qr/\AParse error at foo line 8\.\n/;

eval "#line 8 foo\nsub t098 (\$a; \$b) { }";
like $@@, qr/\AParse error at foo line 8\.\n/;

eval "#line 8 foo\nsub t099 (\$\$) { }";
like $@@, qr/\AParse error at foo line 8\.\n/;

eval "#line 8 foo\nsub t101 (\@@_) { }";
like $@@, qr/\ACan't use global \@@_ in "my" at foo line 8/;

eval "#line 8 foo\nsub t102 (\%_) { }";
like $@@, qr/\ACan't use global \%_ in "my" at foo line 8/;

my $t103 = sub ($a) { $a || "z" };
is prototype($t103), undef;
is eval("\$t103->()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("\$t103->(0)"), "z";
is eval("\$t103->(456)"), 456;
is eval("\$t103->(456, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("\$t103->(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

my $t118 = sub ($a) :prototype($) { $a || "z" };
is prototype($t118), "\$";
is eval("\$t118->()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("\$t118->(0)"), "z";
is eval("\$t118->(456)"), 456;
is eval("\$t118->(456, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("\$t118->(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t033 ($a = sub ($a) { $a."z" }) { $a->("a")."y" }
is prototype(\&t033), undef;
is eval("t033()"), "azy";
is eval("t033(sub { \"x\".\$_[0].\"x\" })"), "xaxy";
is eval("t033(sub { \"x\".\$_[0].\"x\" }, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t133 ($a = sub ($a = 222) { $a."z" }) { $a->()."/".$a->("a") }
is prototype(\&t133), undef;
is eval("t133()"), "222z/az";
is eval("t133(sub { \"x\".(\$_[0] // \"u\").\"x\" })"), "xux/xax";
is eval("t133(sub { \"x\".(\$_[0] // \"u\").\"x\" }, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t134 ($a = sub ($a, $t = sub { $_[0]."p" }) { $t->($a)."z" }) {
    $a->("a")."/".$a->("b", sub { $_[0]."q" } )
}
is prototype(\&t134), undef;
is eval("t134()"), "apz/bqz";
is eval("t134(sub { \"x\".(\$_[1] // sub{\$_[0]})->(\$_[0]).\"x\" })"),
    "xax/xbqx";
is eval("t134(sub { \"x\".(\$_[1] // sub{\$_[0]})->(\$_[0]).\"x\" }, 789)"),
    undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t135 ($a = sub ($a, $t = sub ($p) { $p."p" }) { $t->($a)."z" }) {
    $a->("a")."/".$a->("b", sub { $_[0]."q" } )
}
is prototype(\&t135), undef;
is eval("t135()"), "apz/bqz";
is eval("t135(sub { \"x\".(\$_[1] // sub{\$_[0]})->(\$_[0]).\"x\" })"),
    "xax/xbqx";
is eval("t135(sub { \"x\".(\$_[1] // sub{\$_[0]})->(\$_[0]).\"x\" }, 789)"),
    undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t132 (
    $a = sub ($a, $t = sub ($p = 222) { $p."p" }) { $t->($a)."z".$t->() },
) {
    $a->("a")."/".$a->("b", sub { ($_[0] // "u")."q" } )
}
is prototype(\&t132), undef;
is eval("t132()"), "apz222p/bqzuq";
is eval("t132(sub { \"x\".(\$_[1] // sub{\$_[0]})->(\$_[0]).\"x\" })"),
    "xax/xbqx";
is eval("t132(sub { \"x\".(\$_[1] // sub{\$_[0]})->(\$_[0]).\"x\" }, 789)"),
    undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t104($a) :method { $a || "z" }
is prototype(\&t104), undef;
is eval("t104()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t104(0)"), "z";
is eval("t104(456)"), 456;
is eval("t104(456, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t104(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

sub t105($a) :prototype($) { $a || "z" }
is prototype(\&t105), "\$";
is eval("t105()"), undef;
like $@@, qr/\ANot enough arguments for main::t105 /;
is eval("t105(0)"), "z";
is eval("t105(456)"), 456;
is eval("t105(456, 789)"), undef;
like $@@, qr/\AToo many arguments for main::t105 at \(eval \d+\) line 1, near/;
is eval("t105(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for main::t105 at \(eval \d+\) line 1, near/;
is $a, 123;

sub t106($a) :prototype(@@) { $a || "z" }
is prototype(\&t106), "\@@";
is eval("t106()"), undef;
like $@@, qr/\AToo few arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t106(0)"), "z";
is eval("t106(456)"), 456;
is eval("t106(456, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is eval("t106(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at \(eval \d+\) line 1\.\n\z/;
is $a, 123;

eval "#line 8 foo\nsub t107 :method (\$a) { }";
isnt $@@, "";

eval "#line 8 foo\nsub t108 :prototype(\$) (\$a) { }";
isnt $@@, "";

sub t109 { }
is prototype(\&t109), undef;
is scalar(@@{[ t109() ]}), 0;
is scalar(t109()), undef;

sub t110 () { }
is prototype(\&t110), undef;
is scalar(@@{[ t110() ]}), 0;
is scalar(t110()), undef;

sub t111 ($a) { }
is prototype(\&t111), undef;
is scalar(@@{[ t111(222) ]}), 0;
is scalar(t111(222)), undef;

sub t112 ($) { }
is prototype(\&t112), undef;
is scalar(@@{[ t112(222) ]}), 0;
is scalar(t112(222)), undef;

sub t114 ($a = undef) { }
is prototype(\&t114), undef;
is scalar(@@{[ t114() ]}), 0;
is scalar(t114()), undef;
is scalar(@@{[ t114(333) ]}), 0;
is scalar(t114(333)), undef;

sub t113 ($a = 222) { }
is prototype(\&t113), undef;
is scalar(@@{[ t113() ]}), 0;
is scalar(t113()), undef;
is scalar(@@{[ t113(333) ]}), 0;
is scalar(t113(333)), undef;

sub t115 ($a = do { $z++; 222 }) { }
is prototype(\&t115), undef;
$z = 0;
is scalar(@@{[ t115() ]}), 0;
is $z, 1;
is scalar(t115()), undef;
is $z, 2;
is scalar(@@{[ t115(333) ]}), 0;
is scalar(t115(333)), undef;
is $z, 2;

sub t116 (@@a) { }
is prototype(\&t116), undef;
is scalar(@@{[ t116() ]}), 0;
is scalar(t116()), undef;
is scalar(@@{[ t116(333) ]}), 0;
is scalar(t116(333)), undef;

sub t117 (%a) { }
is prototype(\&t117), undef;
is scalar(@@{[ t117() ]}), 0;
is scalar(t117()), undef;
is scalar(@@{[ t117(333, 444) ]}), 0;
is scalar(t117(333, 444)), undef;

use File::Spec::Functions;
my $keywords_file = catfile(updir,'regen','keywords.pl');
open my $kh, $keywords_file
   or die "$0 cannot open $keywords_file: $!";
while(<$kh>) {
    if (m?__END__?..${\0} and /^[+-]/) {
        chomp(my $word = $');
        # $y should be an error after $x=foo.  The exact error we get may
        # differ if this is __END__ or s or some other special keyword.
        eval 'sub ($x = ' . $word . ', $y) {}';
        local $::TODO = 'does not work yet'
          if $word =~ /^(?:chmod|chown|die|exec|glob|kill|mkdir|print
                          |printf|return|reverse|select|setpgrp|sort|split
                          |system|unlink|utime|warn)\z/x;
        isnt $@@, "", "$word does not swallow trailing comma";
    }
}

done_testing;

1;
@


1.1
log
@Initial revision
@
text
@d4 1
a4 2
    chdir 't';
    @@INC = '../lib';
d6 1
a7 9
plan 912;

eval "#line 8 foo\nsub t004 :method (\$a) { }";
is $@@, "Experimental subroutine signatures not enabled at foo line 8\.\n",
    "error when not enabled";

eval "#line 8 foo\nsub t005 (\$) (\$a) { }";
is $@@, "Experimental subroutine signatures not enabled at foo line 8\.\n",
    "error when not enabled";
d33 1
a33 1
like $@@, qr/\AToo many arguments for subroutine at/;
d35 1
a35 1
like $@@, qr/\AToo many arguments for subroutine at/;
d42 1
a42 1
like $@@, qr/\AToo many arguments for subroutine at/;
d44 1
a44 1
like $@@, qr/\AToo many arguments for subroutine at/;
d50 1
a50 1
like $@@, qr/\AToo few arguments for subroutine at/;
d54 1
a54 1
like $@@, qr/\AToo many arguments for subroutine at/;
d56 1
a56 1
like $@@, qr/\AToo many arguments for subroutine at/;
d62 1
a62 1
like $@@, qr/\AToo few arguments for subroutine at/;
d64 1
a64 1
like $@@, qr/\AToo few arguments for subroutine at/;
d67 1
a67 1
like $@@, qr/\AToo many arguments for subroutine at/;
d69 1
a69 1
like $@@, qr/\AToo many arguments for subroutine at/;
d75 1
a75 1
like $@@, qr/\AToo few arguments for subroutine at/;
d77 1
a77 1
like $@@, qr/\AToo few arguments for subroutine at/;
d79 1
a79 1
like $@@, qr/\AToo few arguments for subroutine at/;
d82 1
a82 1
like $@@, qr/\AToo many arguments for subroutine at/;
d88 1
a88 1
like $@@, qr/\AToo few arguments for subroutine at/;
d90 1
a90 1
like $@@, qr/\AToo few arguments for subroutine at/;
d93 1
a93 1
like $@@, qr/\AToo many arguments for subroutine at/;
d95 1
a95 1
like $@@, qr/\AToo many arguments for subroutine at/;
d101 1
a101 1
like $@@, qr/\AToo few arguments for subroutine at/;
d103 1
a103 1
like $@@, qr/\AToo few arguments for subroutine at/;
d107 1
a107 1
like $@@, qr/\AToo many arguments for subroutine at/;
d109 1
a109 1
like $@@, qr/\AToo many arguments for subroutine at/;
d115 1
a115 1
like $@@, qr/\AToo few arguments for subroutine at/;
d117 1
a117 1
like $@@, qr/\AToo few arguments for subroutine at/;
d121 1
a121 1
like $@@, qr/\AToo many arguments for subroutine at/;
d123 1
a123 1
like $@@, qr/\AToo many arguments for subroutine at/;
d129 1
a129 1
like $@@, qr/\AToo few arguments for subroutine at/;
d131 1
a131 1
like $@@, qr/\AToo few arguments for subroutine at/;
d135 1
a135 1
like $@@, qr/\AToo many arguments for subroutine at/;
d137 1
a137 1
like $@@, qr/\AToo many arguments for subroutine at/;
d143 1
a143 1
like $@@, qr/\AToo few arguments for subroutine at/;
d147 1
a147 1
like $@@, qr/\AToo many arguments for subroutine at/;
d149 1
a149 1
like $@@, qr/\AToo many arguments for subroutine at/;
d151 1
a151 1
like $@@, qr/\AToo many arguments for subroutine at/;
d161 1
a161 1
like $@@, qr/\AToo many arguments for subroutine at/;
d163 1
a163 1
like $@@, qr/\AToo many arguments for subroutine at/;
d173 1
a173 1
like $@@, qr/\AToo many arguments for subroutine at/;
d175 1
a175 1
like $@@, qr/\AToo many arguments for subroutine at/;
d187 1
a187 1
like $@@, qr/\AToo many arguments for subroutine at/;
d189 1
a189 1
like $@@, qr/\AToo many arguments for subroutine at/;
d205 1
a205 1
like $@@, qr/\AToo many arguments for subroutine at/;
d207 1
a207 1
like $@@, qr/\AToo many arguments for subroutine at/;
d217 1
a217 1
like $@@, qr/\AToo many arguments for subroutine at/;
d228 1
a228 1
like $@@, qr/\AToo many arguments for subroutine at/;
d242 1
a242 1
like $@@, qr/\AToo many arguments for subroutine at/;
d251 1
a251 1
like $@@, qr/\AToo many arguments for subroutine at/;
d260 1
a260 1
like $@@, qr/\AToo many arguments for subroutine at/;
d275 1
a275 1
like $@@, qr/\AToo many arguments for subroutine at/;
d285 1
a285 1
like $@@, qr/\AToo many arguments for subroutine at/;
d291 1
a291 1
like $@@, qr/\AToo many arguments for subroutine at/;
d300 1
a300 1
like $@@, qr/\AToo many arguments for subroutine at/;
d312 1
a312 1
like $@@, qr/\AToo many arguments for subroutine at/;
d324 1
a324 1
like $@@, qr/\AToo many arguments for subroutine at/;
d334 1
a334 1
like $@@, qr/\AToo many arguments for subroutine at/;
d347 1
a347 1
like $@@, qr/\AToo many arguments for subroutine at/;
d363 1
a363 1
like $@@, qr/\AToo many arguments for subroutine at/;
d382 1
a382 1
like $@@, qr/\AToo many arguments for subroutine at/;
d393 1
a393 1
like $@@, qr/\AToo many arguments for subroutine at/;
d403 1
a403 1
like $@@, qr/\AToo many arguments for subroutine at/;
d414 1
a414 1
like $@@, qr/\AToo many arguments for subroutine at/;
d426 1
a426 1
like $@@, qr/\AToo many arguments for subroutine at/;
d428 1
a428 1
like $@@, qr/\AToo many arguments for subroutine at/;
d430 1
a430 1
like $@@, qr/\AToo many arguments for subroutine at/;
d439 1
a439 1
like $@@, qr/\AToo many arguments for subroutine at/;
d441 1
a441 1
like $@@, qr/\AToo many arguments for subroutine at/;
d443 1
a443 1
like $@@, qr/\AToo many arguments for subroutine at/;
d454 1
a454 1
like $@@, qr/\AToo many arguments for subroutine at/;
d456 1
a456 1
like $@@, qr/\AToo many arguments for subroutine at/;
d458 1
a458 1
like $@@, qr/\AToo many arguments for subroutine at/;
d468 1
a468 1
like $@@, qr/\AToo many arguments for subroutine at/;
d470 1
a470 1
like $@@, qr/\AToo many arguments for subroutine at/;
d472 1
a472 1
like $@@, qr/\AToo many arguments for subroutine at/;
d482 1
a482 1
like $@@, qr/\AToo many arguments for subroutine at/;
d484 1
a484 1
like $@@, qr/\AToo many arguments for subroutine at/;
d490 1
a490 1
like $@@, qr/\AToo few arguments for subroutine at/;
d495 1
a495 1
like $@@, qr/\AToo many arguments for subroutine at/;
d501 1
a501 1
like $@@, qr/\AToo few arguments for subroutine at/;
d506 1
a506 1
like $@@, qr/\AToo many arguments for subroutine at/;
d512 1
a512 1
like $@@, qr/\AToo few arguments for subroutine at/;
d517 1
a517 1
like $@@, qr/\AToo many arguments for subroutine at/;
d523 1
a523 1
like $@@, qr/\AToo few arguments for subroutine at/;
d528 1
a528 1
like $@@, qr/\AToo many arguments for subroutine at/;
d534 1
a534 1
like $@@, qr/\AToo few arguments for subroutine at/;
d536 1
a536 1
like $@@, qr/\AToo few arguments for subroutine at/;
d538 1
a538 1
like $@@, qr/\AToo few arguments for subroutine at/;
d543 1
a543 1
like $@@, qr/\AToo many arguments for subroutine at/;
d545 1
a545 1
like $@@, qr/\AToo many arguments for subroutine at/;
d551 1
a551 1
like $@@, qr/\AToo few arguments for subroutine at/;
d556 1
a556 1
like $@@, qr/\AToo many arguments for subroutine at/;
d605 1
a605 1
like $@@, qr#\AOdd name/value argument for subroutine at#;
d607 1
a607 1
like $@@, qr#\AOdd name/value argument for subroutine at#;
d610 1
a610 1
like $@@, qr#\AOdd name/value argument for subroutine at#;
d613 1
a613 1
like $@@, qr#\AOdd name/value argument for subroutine at#;
d627 1
a627 1
like $@@, qr#\AOdd name/value argument for subroutine at#;
d629 1
a629 1
like $@@, qr#\AOdd name/value argument for subroutine at#;
d632 1
a632 1
like $@@, qr#\AOdd name/value argument for subroutine at#;
d635 1
a635 1
like $@@, qr#\AOdd name/value argument for subroutine at#;
d648 1
a648 1
like $@@, qr/\AToo few arguments for subroutine at/;
d661 1
a661 1
like $@@, qr/\AToo few arguments for subroutine at/;
d674 1
a674 1
like $@@, qr/\AToo few arguments for subroutine at/;
d687 1
a687 1
like $@@, qr/\AToo few arguments for subroutine at/;
d700 1
a700 1
like $@@, qr/\AToo few arguments for subroutine at/;
d703 1
a703 1
like $@@, qr#\AOdd name/value argument for subroutine at#;
d706 1
a706 1
like $@@, qr#\AOdd name/value argument for subroutine at#;
d709 1
a709 1
like $@@, qr#\AOdd name/value argument for subroutine at#;
d717 1
a717 1
like $@@, qr/\AToo few arguments for subroutine at/;
d719 1
a719 1
like $@@, qr/\AToo few arguments for subroutine at/;
d721 1
a721 1
like $@@, qr/\AToo few arguments for subroutine at/;
d731 1
a731 1
like $@@, qr/\AToo few arguments for subroutine at/;
d733 1
a733 1
like $@@, qr/\AToo few arguments for subroutine at/;
d736 1
a736 1
like $@@, qr#\AOdd name/value argument for subroutine at#;
d739 1
a739 1
like $@@, qr#\AOdd name/value argument for subroutine at#;
d742 1
a742 1
like $@@, qr#\AOdd name/value argument for subroutine at#;
d752 1
a752 1
like $@@, qr/\AToo few arguments for subroutine at/;
d754 1
a754 1
like $@@, qr/\AToo few arguments for subroutine at/;
d756 1
a756 1
like $@@, qr/\AToo few arguments for subroutine at/;
d759 1
a759 1
like $@@, qr#\AOdd name/value argument for subroutine at#;
d762 1
a762 1
like $@@, qr#\AOdd name/value argument for subroutine at#;
d766 1
a766 1
like $@@, qr#\AOdd name/value argument for subroutine at#;
d812 1
a812 1
like $@@, qr#\AOdd name/value argument for subroutine at#;
d815 1
a815 1
like $@@, qr#\AOdd name/value argument for subroutine at#;
d818 1
a818 1
like $@@, qr#\AOdd name/value argument for subroutine at#;
d831 1
a831 1
like $@@, qr#\AOdd name/value argument for subroutine at#;
d834 1
a834 1
like $@@, qr#\AOdd name/value argument for subroutine at#;
d837 1
a837 1
like $@@, qr#\AOdd name/value argument for subroutine at#;
d851 1
a851 1
like $@@, qr#\AOdd name/value argument for subroutine at#;
d854 1
a854 1
like $@@, qr#\AOdd name/value argument for subroutine at#;
d858 1
a858 1
like $@@, qr#\AOdd name/value argument for subroutine at#;
d866 1
a866 1
like $@@, qr/\AToo few arguments for subroutine at/;
d941 1
a941 1
like $@@, qr/\AToo few arguments for subroutine at/;
d943 1
a943 1
like $@@, qr/\AToo few arguments for subroutine at/;
d946 1
a946 1
like $@@, qr/\AToo many arguments for subroutine at/;
d948 1
a948 1
like $@@, qr/\AToo many arguments for subroutine at/;
d954 1
a954 1
like $@@, qr/\AToo few arguments for subroutine at/;
d956 1
a956 1
like $@@, qr/\AToo few arguments for subroutine at/;
d959 1
a959 1
like $@@, qr/\AToo many arguments for subroutine at/;
d961 1
a961 1
like $@@, qr/\AToo many arguments for subroutine at/;
d973 1
a973 1
like $@@, qr/\AToo few arguments for subroutine at/;
d975 1
a975 1
like $@@, qr/\AToo few arguments for subroutine at/;
d978 1
a978 1
like $@@, qr/\AToo many arguments for subroutine at/;
d980 1
a980 1
like $@@, qr/\AToo many arguments for subroutine at/;
d999 1
a999 1
like $@@, qr/\AToo few arguments for subroutine at/;
d1003 1
a1003 1
like $@@, qr/\AToo many arguments for subroutine at/;
d1005 1
a1005 1
like $@@, qr/\AToo many arguments for subroutine at/;
d1024 1
a1024 1
like $@@, qr/\AToo few arguments for subroutine at/;
d1028 1
a1028 1
like $@@, qr/\AToo many arguments for subroutine at/;
d1030 1
a1030 1
like $@@, qr/\AToo many arguments for subroutine at/;
d1049 1
a1049 1
like $@@, qr/\AToo few arguments for subroutine at/;
d1053 1
a1053 1
like $@@, qr/\AToo many arguments for subroutine at/;
d1055 1
a1055 1
like $@@, qr/\AToo many arguments for subroutine at/;
a1093 18
no warnings "experimental::lexical_topic";
sub t100 ($_) { "$::_/$_" }
is prototype(\&t100), undef;
$_ = "___";
is eval("t100()"), undef;
like $@@, qr/\AToo few arguments for subroutine at/;
$_ = "___";
is eval("t100(0)"), "___/0";
$_ = "___";
is eval("t100(456)"), "___/456";
$_ = "___";
is eval("t100(456, 789)"), undef;
like $@@, qr/\AToo many arguments for subroutine at/;
$_ = "___";
is eval("t100(456, 789, 987)"), undef;
like $@@, qr/\AToo many arguments for subroutine at/;
is $a, 123;

d1103 1
a1103 1
like $@@, qr/\AToo few arguments for subroutine at/;
d1107 1
a1107 1
like $@@, qr/\AToo many arguments for subroutine at/;
d1109 1
a1109 1
like $@@, qr/\AToo many arguments for subroutine at/;
d1112 1
a1112 1
my $t118 = sub :prototype($) ($a) { $a || "z" };
d1115 1
a1115 1
like $@@, qr/\AToo few arguments for subroutine at/;
d1119 1
a1119 1
like $@@, qr/\AToo many arguments for subroutine at/;
d1121 1
a1121 1
like $@@, qr/\AToo many arguments for subroutine at/;
d1129 1
a1129 1
like $@@, qr/\AToo many arguments for subroutine at/;
d1137 1
a1137 1
like $@@, qr/\AToo many arguments for subroutine at/;
d1149 1
a1149 1
like $@@, qr/\AToo many arguments for subroutine at/;
d1161 1
a1161 1
like $@@, qr/\AToo many arguments for subroutine at/;
d1175 1
a1175 1
like $@@, qr/\AToo many arguments for subroutine at/;
d1178 1
a1178 1
sub t104 :method ($a) { $a || "z" }
d1181 1
a1181 1
like $@@, qr/\AToo few arguments for subroutine at/;
d1185 1
a1185 1
like $@@, qr/\AToo many arguments for subroutine at/;
d1187 1
a1187 1
like $@@, qr/\AToo many arguments for subroutine at/;
d1190 1
a1190 1
sub t105 :prototype($) ($a) { $a || "z" }
d1197 1
a1197 1
like $@@, qr/\AToo many arguments for main::t105 at/;
d1199 1
a1199 1
like $@@, qr/\AToo many arguments for main::t105 at/;
d1202 1
a1202 1
sub t106 :prototype(@@) ($a) { $a || "z" }
d1205 1
a1205 1
like $@@, qr/\AToo few arguments for subroutine at/;
d1209 1
a1209 1
like $@@, qr/\AToo many arguments for subroutine at/;
d1211 1
a1211 1
like $@@, qr/\AToo many arguments for subroutine at/;
d1214 1
a1214 1
eval "#line 8 foo\nsub t107 (\$a) :method { }";
d1217 1
a1217 1
eval "#line 8 foo\nsub t108 (\$a) :prototype(\$) { }";
d1278 20
@


1.1.1.1
log
@Import perl-5.20.1
@
text
@@
