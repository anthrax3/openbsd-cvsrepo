head	1.2;
access;
symbols
	OPENBSD_4_8:1.1.1.2.0.8
	OPENBSD_4_8_BASE:1.1.1.2
	OPENBSD_4_7:1.1.1.2.0.4
	OPENBSD_4_7_BASE:1.1.1.2
	PERL_5_10_1:1.1.1.2
	OPENBSD_4_6:1.1.1.2.0.6
	OPENBSD_4_6_BASE:1.1.1.2
	OPENBSD_4_5:1.1.1.2.0.2
	OPENBSD_4_5_BASE:1.1.1.2
	PERL_5_10_0:1.1.1.2
	OPENBSD_4_4:1.1.1.1.0.18
	OPENBSD_4_4_BASE:1.1.1.1
	OPENBSD_4_3:1.1.1.1.0.16
	OPENBSD_4_3_BASE:1.1.1.1
	OPENBSD_4_2:1.1.1.1.0.14
	OPENBSD_4_2_BASE:1.1.1.1
	OPENBSD_4_1:1.1.1.1.0.12
	OPENBSD_4_1_BASE:1.1.1.1
	OPENBSD_4_0:1.1.1.1.0.10
	OPENBSD_4_0_BASE:1.1.1.1
	PERL_5_8_8:1.1.1.1
	OPENBSD_3_9:1.1.1.1.0.8
	OPENBSD_3_9_BASE:1.1.1.1
	OPENBSD_3_8:1.1.1.1.0.6
	OPENBSD_3_8_BASE:1.1.1.1
	OPENBSD_3_7:1.1.1.1.0.4
	OPENBSD_3_7_BASE:1.1.1.1
	PERL_5_8_6:1.1.1.1
	OPENBSD_3_6:1.1.1.1.0.2
	OPENBSD_3_6_BASE:1.1.1.1
	PERL_5_8_5:1.1.1.1
	CPAN:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2010.09.24.14.59.41;	author millert;	state dead;
branches;
next	1.1;

1.1
date	2004.08.09.17.47.12;	author millert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.08.09.17.47.12;	author millert;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2008.09.29.17.18.36;	author millert;	state Exp;
branches;
next	;


desc
@@


1.2
log
@remove files no longer in perl 5.12.2 (or that have moved)
@
text
@
require 5;
# Time-stamp: "2004-03-30 17:02:53 AST"

# Summary of, well, things.

use Test;
BEGIN {plan tests => 2};

ok 1;

use Locale::Maketext;

#chdir "t" if -e "t";

{
  my @@out;
  push @@out,
    "\n\nPerl v",
    defined($^V) ? sprintf('%vd', $^V) : $],
    " under $^O ",
    (defined(&Win32::BuildNumber) and defined &Win32::BuildNumber())
      ? ("(Win32::BuildNumber ", &Win32::BuildNumber(), ")") : (),
    (defined $MacPerl::Version)
      ? ("(MacPerl version $MacPerl::Version)") : (),
    "\n"
  ;

  # Ugly code to walk the symbol tables:
  my %v;
  my @@stack = ('');  # start out in %::
  my $this;
  my $count = 0;
  my $pref;
  while(@@stack) {
    $this = shift @@stack;
    die "Too many packages?" if ++$count > 1000;
    next if exists $v{$this};
    next if $this eq 'main'; # %main:: is %::

    #print "Peeking at $this => ${$this . '::VERSION'}\n";
    
    if(defined ${$this . '::VERSION'} ) {
      $v{$this} = ${$this . '::VERSION'}
    } elsif(
       defined *{$this . '::ISA'} or defined &{$this . '::import'}
       or ($this ne '' and grep defined *{$_}{'CODE'}, values %{$this . "::"})
       # If it has an ISA, an import, or any subs...
    ) {
      # It's a class/module with no version.
      $v{$this} = undef;
    } else {
      # It's probably an unpopulated package.
      ## $v{$this} = '...';
    }
    
    $pref = length($this) ? "$this\::" : '';
    push @@stack, map m/^(.+)::$/ ? "$pref$1" : (), keys %{$this . '::'};
    #print "Stack: @@stack\n";
  }
  push @@out, " Modules in memory:\n";
  delete @@v{'', '[none]'};
  foreach my $p (sort {lc($a) cmp lc($b)} keys %v) {
    $indent = ' ' x (2 + ($p =~ tr/:/:/));
    push @@out,  '  ', $indent, $p, defined($v{$p}) ? " v$v{$p};\n" : ";\n";
  }
  push @@out, sprintf "[at %s (local) / %s (GMT)]\n",
    scalar(gmtime), scalar(localtime);
  my $x = join '', @@out;
  $x =~ s/^/#/mg;
  print $x;
}

print "# Running",
  (chr(65) eq 'A') ? " in an ASCII world.\n" : " in a non-ASCII world.\n",
  "#\n",
;

print "# \@@INC:\n", map("#   [$_]\n", @@INC), "#\n#\n";

print "# \%INC:\n";
foreach my $x (sort {lc($a) cmp lc($b)} keys %INC) {
  print "#   [$x] = [", $INC{$x} || '', "]\n";
}

ok 1;

@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@Import of stock perl 5.8.5
@
text
@@


1.1.1.2
log
@import perl 5.10.0 from CPAN
@
text
@a0 1
#!/usr/bin/perl -Tw
d3 1
d5 1
a5 1
use strict;
d7 2
a8 1
use Test::More tests => 1;
d10 5
a14 3
BEGIN {
    use_ok( 'Locale::Maketext' );
}
d16 3
a18 2
my @@out;
push @@out,
d23 1
a23 1
    ? ('(Win32::BuildNumber ', &Win32::BuildNumber(), ')') : (),
d25 1
a25 1
    ? ("(MacPerl version $MacPerl::Version)") : (),
d27 1
a27 1
;
d29 7
a35 7
# Ugly code to walk the symbol tables:
my %v;
my @@stack = ('');  # start out in %::
my $this;
my $count = 0;
my $pref;
while(@@stack) {
d37 1
a37 1
    die 'Too many packages?' if ++$count > 1000;
d41 8
a48 8
    no strict 'refs';
    if ( defined ${$this . '::VERSION'} ) {
        $v{$this} = ${$this . '::VERSION'}
    }
    elsif (
        defined *{$this . '::ISA'} or defined &{$this . '::import'}
            or ($this ne '' and grep defined *{$_}{'CODE'}, values %{$this . '::'})
        # If it has an ISA, an import, or any subs...
d50 5
a54 6
        # It's a class/module with no version.
        $v{$this} = undef;
    }
    else {
        # It's probably an unpopulated package.
        ## $v{$this} = '...';
d56 1
a56 1

d59 6
a64 5
}
push @@out, " Modules in memory:\n";
delete @@v{'', '[none]'};
foreach my $p (sort {lc($a) cmp lc($b)} keys %v) {
    my $indent = ' ' x (2 + ($p =~ tr/:/:/));
d66 6
a72 4
push @@out, sprintf "[at %s (local) / %s (GMT)]\n", scalar(gmtime), scalar(localtime);
my $x = join '', @@out;
$x =~ s/^/#/mg;
print $x;
d74 4
a77 2
my $ascii = (chr(65) eq 'A') ? 'an ASCII' : 'a non-ASCII';
print "# Running in $ascii world.\n";
d83 1
a83 1
    print "#   [$x] = [", $INC{$x} || '', "]\n";
d85 3
@

