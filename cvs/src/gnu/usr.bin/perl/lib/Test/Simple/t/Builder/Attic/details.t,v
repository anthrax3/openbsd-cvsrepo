head	1.3;
access;
symbols
	OPENBSD_4_8:1.2.0.4
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.2
	OPENBSD_4_7_BASE:1.2
	PERL_5_10_1:1.1.1.1
	CPAN:1.1.1
	OPENBSD_4_6:1.1.0.4
	OPENBSD_4_6_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2010.09.24.14.59.52;	author millert;	state dead;
branches;
next	1.2;

1.2
date	2009.10.12.18.24.44;	author millert;	state Exp;
branches;
next	1.1;

1.1
date	2009.05.16.21.42.57;	author simon;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.10.12.18.10.56;	author millert;	state Exp;
branches;
next	;


desc
@@


1.3
log
@remove files no longer in perl 5.12.2 (or that have moved)
@
text
@#!/usr/bin/perl -w

BEGIN {
    if( $ENV{PERL_CORE} ) {
        chdir 't';
        @@INC = ('../lib', 'lib');
    }
    else {
        unshift @@INC, 't/lib';
    }
}

use Test::More;
use Test::Builder;
my $Test = Test::Builder->new;

$Test->plan( tests => 9 );
$Test->level(0);

my @@Expected_Details;

$Test->is_num( scalar $Test->summary(), 0,   'no tests yet, no summary' );
push @@Expected_Details, { 'ok'      => 1,
                          actual_ok => 1,
                          name      => 'no tests yet, no summary',
                          type      => '',
                          reason    => ''
                        };

# Inline TODO tests will confuse pre 1.20 Test::Harness, so we
# should just avoid the problem and not print it out.
my $start_test = $Test->current_test + 1;

my $output = '';
$Test->output(\$output);
$Test->todo_output(\$output);

SKIP: {
    $Test->skip( 'just testing skip' );
}
push @@Expected_Details, { 'ok'      => 1,
                          actual_ok => 1,
                          name      => '',
                          type      => 'skip',
                          reason    => 'just testing skip',
                        };

TODO: {
    local $TODO = 'i need a todo';
    $Test->ok( 0, 'a test to todo!' );

    push @@Expected_Details, { 'ok'       => 1,
                              actual_ok  => 0,
                              name       => 'a test to todo!',
                              type       => 'todo',
                              reason     => 'i need a todo',
                            };

    $Test->todo_skip( 'i need both' );
}
push @@Expected_Details, { 'ok'      => 1,
                          actual_ok => 0,
                          name      => '',
                          type      => 'todo_skip',
                          reason    => 'i need both'
                        };

for ($start_test..$Test->current_test) { print "ok $_\n" }
$Test->reset_outputs;

$Test->is_num( scalar $Test->summary(), 4,   'summary' );
push @@Expected_Details, { 'ok'      => 1,
                          actual_ok => 1,
                          name      => 'summary',
                          type      => '',
                          reason    => '',
                        };

$Test->current_test(6);
print "ok 6 - current_test incremented\n";
push @@Expected_Details, { 'ok'      => 1,
                          actual_ok => undef,
                          name      => undef,
                          type      => 'unknown',
                          reason    => 'incrementing test number',
                        };

my @@details = $Test->details();
$Test->is_num( scalar @@details, 6,
    'details() should return a list of all test details');

$Test->level(1);
is_deeply( \@@details, \@@Expected_Details );


# This test has to come last because it thrashes the test details.
{
    my $curr_test = $Test->current_test;
    $Test->current_test(4);
    my @@details = $Test->details();

    $Test->current_test($curr_test);
    $Test->is_num( scalar @@details, 4 );
}
@


1.2
log
@Merge in perl 5.10.1
@
text
@@


1.1
log
@relocate / fix Test::Simple tests

ok millert@@
@
text
@a1 1
# $Id$
a31 2
my $out_fh  = $Test->output;
my $todo_fh = $Test->todo_output;
d33 4
a36 4
require TieOut;
tie *FH, 'TieOut';
$Test->output(\*FH);
$Test->todo_output(\*FH);
d69 1
a69 2
$Test->output($out_fh);
$Test->todo_output($todo_fh);
@


1.1.1.1
log
@import perl 5.10.1
@
text
@d2 1
d33 2
d36 4
a39 4

my $output = '';
$Test->output(\$output);
$Test->todo_output(\$output);
d72 2
a73 1
$Test->reset_outputs;
@

