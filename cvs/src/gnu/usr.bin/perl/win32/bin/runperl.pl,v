head	1.3;
access;
symbols
	OPENBSD_6_1:1.3.0.10
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.3.0.12
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.6
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.8
	OPENBSD_5_8_BASE:1.3
	PERL_5_20_2:1.1.1.3
	OPENBSD_5_7:1.3.0.2
	OPENBSD_5_7_BASE:1.3
	PERL_5_20_1:1.1.1.3
	OPENBSD_5_6:1.3.0.4
	OPENBSD_5_6_BASE:1.3
	PERL_5_18_2:1.1.1.3
	PERL:1.1.1
	OPENBSD_5_5:1.2.0.6
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.2
	OPENBSD_5_4_BASE:1.2
	PERL_5_16_3:1.1.1.2
	OPENBSD_5_3:1.1.0.62
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.60
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.58
	OPENBSD_5_0:1.1.0.56
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.54
	OPENBSD_4_9_BASE:1.1
	PERL_5_12_2:1.1.1.1
	OPENBSD_4_8:1.1.0.52
	OPENBSD_4_8_BASE:1.1
	OPENBSD_4_7:1.1.0.48
	OPENBSD_4_7_BASE:1.1
	PERL_5_10_1:1.1.1.1
	OPENBSD_4_6:1.1.0.50
	OPENBSD_4_6_BASE:1.1
	OPENBSD_4_5:1.1.0.46
	OPENBSD_4_5_BASE:1.1
	PERL_5_10_0:1.1.1.1
	OPENBSD_4_4:1.1.0.44
	OPENBSD_4_4_BASE:1.1
	OPENBSD_4_3:1.1.0.42
	OPENBSD_4_3_BASE:1.1
	OPENBSD_4_2:1.1.0.40
	OPENBSD_4_2_BASE:1.1
	OPENBSD_4_1:1.1.0.38
	OPENBSD_4_1_BASE:1.1
	OPENBSD_4_0:1.1.0.36
	OPENBSD_4_0_BASE:1.1
	PERL_5_8_8:1.1.1.1
	OPENBSD_3_9:1.1.0.34
	OPENBSD_3_9_BASE:1.1
	OPENBSD_3_8:1.1.0.32
	OPENBSD_3_8_BASE:1.1
	OPENBSD_3_7:1.1.0.30
	OPENBSD_3_7_BASE:1.1
	PERL_5_8_6:1.1.1.1
	OPENBSD_3_6:1.1.0.28
	OPENBSD_3_6_BASE:1.1
	PERL_5_8_5:1.1.1.1
	PERL_5_8_3:1.1.1.1
	OPENBSD_3_5:1.1.0.26
	OPENBSD_3_5_BASE:1.1
	PERL_5_8_2:1.1.1.1
	OPENBSD_3_4:1.1.0.24
	OPENBSD_3_4_BASE:1.1
	OPENBSD_3_3:1.1.0.22
	OPENBSD_3_3_BASE:1.1
	PERL_5_8_0:1.1.1.1
	OPENBSD_3_2:1.1.0.20
	OPENBSD_3_2_BASE:1.1
	OPENBSD_3_1:1.1.0.18
	OPENBSD_3_1_BASE:1.1
	OPENBSD_3_0:1.1.0.16
	OPENBSD_3_0_BASE:1.1
	PERL_5_6_1:1.1.1.1
	OPENBSD_2_9:1.1.0.14
	OPENBSD_2_9_BASE:1.1
	OPENBSD_2_8:1.1.0.12
	OPENBSD_2_8_BASE:1.1
	OPENBSD_2_7:1.1.0.10
	OPENBSD_2_7_BASE:1.1
	PERL_5_6_0:1.1.1.1
	OPENBSD_2_6:1.1.0.8
	OPENBSD_2_6_BASE:1.1
	PERL_500503:1.1.1.1
	CPAN:1.1.1
	OPENBSD_2_5:1.1.0.6
	OPENBSD_2_5_BASE:1.1
	OPENBSD_2_4:1.1.0.4
	OPENBSD_2_4_BASE:1.1
	OPENBSD_2_3:1.1.0.2
	OPENBSD_2_3_BASE:1.1;
locks; strict;
comment	@# @;
expand	@o@;


1.3
date	2014.03.24.15.05.34;	author afresh1;	state Exp;
branches;
next	1.2;

1.2
date	2013.03.25.20.41.01;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	97.11.30.08.06.50;	author millert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	99.04.29.22.42.17;	author millert;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2013.03.25.20.09.45;	author sthen;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2014.03.24.14.59.13;	author afresh1;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Merge perl-5.18.2 plus local patches, remove old files

OK espie@@ sthen@@ deraadt@@
@
text
@#!perl -w
$0 =~ s|\.bat||i;
unless (-f $0) {
    $0 =~ s|.*[/\\]||;
    for (".", split ';', $ENV{PATH}) {
	$_ = "." if $_ eq "";
	$0 = "$_/$0" , goto doit if -f "$_/$0";
    }
    die "'$0' not found.\n";
}
doit: exec "perl", "-x", $0, @@ARGV;
die "Failed to exec '$0': $!";
__END__

=head1 NAME

runperl.bat - "universal" batch file to run perl scripts

=head1 SYNOPSIS

	C:\> copy runperl.bat foo.bat
	C:\> foo
	[..runs the perl script 'foo'..]

	C:\> foo.bat
	[..runs the perl script 'foo'..]


=head1 DESCRIPTION

This file can be copied to any file name ending in the ".bat" suffix.
When executed on a DOS-like operating system, it will invoke the perl
script of the same name, but without the ".bat" suffix.  It will
look for the script in the same directory as itself, and then in
the current directory, and then search the directories in your PATH.

It relies on the C<exec()> operator, so you will need to make sure
that works in your perl.

This method of invoking perl scripts has some advantages over
batch-file wrappers like C<pl2bat.bat>:  it avoids duplication
of all the code; it ensures C<$0> contains the same name as the
executing file, without any egregious ".bat" suffix; it allows
you to separate your perl scripts from the wrapper used to
run them; since the wrapper is generic, you can use symbolic
links to simply link to C<runperl.bat>, if you are serving your
files on a filesystem that supports that.

On the other hand, if the batch file is invoked with the ".bat"
suffix, it does an extra C<exec()>.  This may be a performance
issue.  You can avoid this by running it without specifying
the ".bat" suffix.

Perl is invoked with the -x flag, so the script must contain
a C<#!perl> line.  Any flags found on that line will be honored.

=head1 BUGS

Perl is invoked with the -S flag, so it will search the PATH to find
the script.  This may have undesirable effects.

=head1 SEE ALSO

perl, perlwin32, pl2bat.bat

=cut

@


1.2
log
@merge/resolve conflicts
(some more to do after this one)
@
text
@d24 1
a24 1
	
d27 1
a27 1
	
@


1.1
log
@perl 5.004_04
@
text
@d9 1
a9 1
    die "`$0' not found.\n";
d12 1
a12 1
die "Failed to exec `$0': $!";
d23 1
a23 1
	[..runs the perl script `foo'..]
d26 1
a26 1
	[..runs the perl script `foo'..]
@


1.1.1.1
log
@perl5.005_03
@
text
@@


1.1.1.2
log
@import perl 5.16.3 from CPAN - worked on by Andrew Fresh and myself
@
text
@d9 1
a9 1
    die "'$0' not found.\n";
d12 1
a12 1
die "Failed to exec '$0': $!";
d23 1
a23 1
	[..runs the perl script 'foo'..]
d26 1
a26 1
	[..runs the perl script 'foo'..]
@


1.1.1.3
log
@Import perl-5.18.2

OK espie@@ sthen@@ deraadt@@
@
text
@d24 1
a24 1

d27 1
a27 1

@


