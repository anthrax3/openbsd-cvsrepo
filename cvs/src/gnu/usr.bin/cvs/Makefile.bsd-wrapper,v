head	1.55;
access;
symbols
	OPENBSD_6_1:1.55.0.2
	OPENBSD_6_1_BASE:1.55
	OPENBSD_6_0:1.52.0.8
	OPENBSD_6_0_BASE:1.52
	OPENBSD_5_9:1.52.0.4
	OPENBSD_5_9_BASE:1.52
	OPENBSD_5_8:1.52.0.6
	OPENBSD_5_8_BASE:1.52
	OPENBSD_5_7:1.52.0.2
	OPENBSD_5_7_BASE:1.52
	OPENBSD_5_6:1.51.0.4
	OPENBSD_5_6_BASE:1.51
	OPENBSD_5_5:1.49.0.4
	OPENBSD_5_5_BASE:1.49
	OPENBSD_5_4:1.47.0.24
	OPENBSD_5_4_BASE:1.47
	OPENBSD_5_3:1.47.0.22
	OPENBSD_5_3_BASE:1.47
	OPENBSD_5_2:1.47.0.20
	OPENBSD_5_2_BASE:1.47
	OPENBSD_5_1_BASE:1.47
	OPENBSD_5_1:1.47.0.18
	OPENBSD_5_0:1.47.0.16
	OPENBSD_5_0_BASE:1.47
	OPENBSD_4_9:1.47.0.14
	OPENBSD_4_9_BASE:1.47
	OPENBSD_4_8:1.47.0.12
	OPENBSD_4_8_BASE:1.47
	OPENBSD_4_7:1.47.0.8
	OPENBSD_4_7_BASE:1.47
	OPENBSD_4_6:1.47.0.10
	OPENBSD_4_6_BASE:1.47
	OPENBSD_4_5:1.47.0.6
	OPENBSD_4_5_BASE:1.47
	OPENBSD_4_4:1.47.0.4
	OPENBSD_4_4_BASE:1.47
	OPENBSD_4_3:1.47.0.2
	OPENBSD_4_3_BASE:1.47
	OPENBSD_4_2:1.46.0.6
	OPENBSD_4_2_BASE:1.46
	OPENBSD_4_1:1.46.0.4
	OPENBSD_4_1_BASE:1.46
	OPENBSD_4_0:1.46.0.2
	OPENBSD_4_0_BASE:1.46
	OPENBSD_3_9:1.45.0.8
	OPENBSD_3_9_BASE:1.45
	OPENBSD_3_8:1.45.0.6
	OPENBSD_3_8_BASE:1.45
	OPENBSD_3_7:1.45.0.4
	OPENBSD_3_7_BASE:1.45
	OPENBSD_3_6:1.45.0.2
	OPENBSD_3_6_BASE:1.45
	OPENBSD_3_5:1.44.0.2
	OPENBSD_3_5_BASE:1.44
	OPENBSD_3_4:1.43.0.2
	OPENBSD_3_4_BASE:1.43
	OPENBSD_3_3:1.42.0.2
	OPENBSD_3_3_BASE:1.42
	OPENBSD_3_2:1.41.0.2
	OPENBSD_3_2_BASE:1.41
	OPENBSD_3_1:1.38.0.2
	OPENBSD_3_1_BASE:1.38
	OPENBSD_3_0:1.37.0.2
	OPENBSD_3_0_BASE:1.37
	OPENBSD_2_9:1.35.0.4
	OPENBSD_2_9_BASE:1.35
	OPENBSD_2_8:1.35.0.2
	OPENBSD_2_8_BASE:1.35
	OPENBSD_2_7:1.34.0.2
	OPENBSD_2_7_BASE:1.34
	OPENBSD_2_6:1.32.0.2
	OPENBSD_2_6_BASE:1.32
	OPENBSD_2_5:1.30.0.2
	OPENBSD_2_5_BASE:1.30
	OPENBSD_2_4:1.29.0.2
	OPENBSD_2_4_BASE:1.29
	OPENBSD_2_3:1.27.0.4
	OPENBSD_2_3_BASE:1.27
	OPENBSD_2_2:1.27.0.2
	OPENBSD_2_2_BASE:1.27
	OPENBSD_2_1:1.22.0.2
	OPENBSD_2_1_BASE:1.22
	OPENBSD_2_0:1.20.0.2
	OPENBSD_2_0_BASE:1.20;
locks; strict;
comment	@# @;


1.55
date	2016.09.29.09.16.21;	author natano;	state Exp;
branches;
next	1.54;
commitid	A42UlyydNLcLEJSX;

1.54
date	2016.09.20.18.36.57;	author natano;	state Exp;
branches;
next	1.53;
commitid	dU5SIck0lYi6V9V2;

1.53
date	2016.09.20.18.29.12;	author natano;	state Exp;
branches;
next	1.52;
commitid	hHrIAZKVIofYrkTK;

1.52
date	2014.10.21.00.12.46;	author daniel;	state Exp;
branches;
next	1.51;
commitid	pegdTScKmxxguw6p;

1.51
date	2014.04.22.10.21.56;	author reyk;	state Exp;
branches;
next	1.50;

1.50
date	2014.04.15.20.55.42;	author miod;	state Exp;
branches;
next	1.49;

1.49
date	2013.11.11.22.58.53;	author deraadt;	state Exp;
branches;
next	1.48;

1.48
date	2013.08.06.19.05.57;	author miod;	state Exp;
branches;
next	1.47;

1.47
date	2007.11.03.10.32.56;	author espie;	state Exp;
branches;
next	1.46;

1.46
date	2006.07.12.23.00.07;	author espie;	state Exp;
branches;
next	1.45;

1.45
date	2004.06.21.16.53.59;	author avsm;	state Exp;
branches;
next	1.44;

1.44
date	2004.01.02.09.01.24;	author millert;	state Exp;
branches;
next	1.43;

1.43
date	2003.05.12.16.40.07;	author mho;	state Exp;
branches;
next	1.42;

1.42
date	2003.02.16.18.28.41;	author deraadt;	state Exp;
branches;
next	1.41;

1.41
date	2002.06.03.15.59.38;	author todd;	state Exp;
branches;
next	1.40;

1.40
date	2002.06.03.15.50.17;	author todd;	state Exp;
branches;
next	1.39;

1.39
date	2002.05.31.20.17.00;	author wcobb;	state Exp;
branches;
next	1.38;

1.38
date	2001.11.21.15.35.38;	author millert;	state Exp;
branches;
next	1.37;

1.37
date	2001.09.30.20.31.46;	author tholo;	state Exp;
branches
	1.37.2.1;
next	1.36;

1.36
date	2001.05.25.23.13.46;	author ho;	state Exp;
branches;
next	1.35;

1.35
date	2000.09.03.18.41.12;	author espie;	state Exp;
branches;
next	1.34;

1.34
date	2000.02.21.03.05.42;	author ho;	state Exp;
branches;
next	1.33;

1.33
date	99.12.06.09.24.55;	author deraadt;	state Exp;
branches;
next	1.32;

1.32
date	99.09.10.06.19.48;	author tholo;	state Exp;
branches;
next	1.31;

1.31
date	99.06.07.00.45.36;	author deraadt;	state Exp;
branches;
next	1.30;

1.30
date	99.03.04.03.57.29;	author niklas;	state Exp;
branches;
next	1.29;

1.29
date	98.10.18.20.02.29;	author millert;	state Exp;
branches;
next	1.28;

1.28
date	98.08.24.19.35.35;	author kstailey;	state Exp;
branches;
next	1.27;

1.27
date	97.07.24.20.04.11;	author kstailey;	state Exp;
branches;
next	1.26;

1.26
date	97.07.24.16.51.23;	author kstailey;	state Exp;
branches;
next	1.25;

1.25
date	97.06.23.22.20.24;	author kstailey;	state Exp;
branches;
next	1.24;

1.24
date	97.06.23.03.57.23;	author kstailey;	state Exp;
branches;
next	1.23;

1.23
date	97.05.29.20.12.22;	author deraadt;	state Exp;
branches;
next	1.22;

1.22
date	97.04.19.21.26.13;	author millert;	state Exp;
branches;
next	1.21;

1.21
date	96.10.18.04.34.47;	author tholo;	state Exp;
branches;
next	1.20;

1.20
date	96.08.13.17.36.42;	author millert;	state Exp;
branches;
next	1.19;

1.19
date	96.08.13.02.45.41;	author deraadt;	state Exp;
branches;
next	1.18;

1.18
date	96.08.13.02.35.15;	author deraadt;	state Exp;
branches;
next	1.17;

1.17
date	96.05.30.23.10.33;	author niklas;	state Exp;
branches;
next	1.16;

1.16
date	96.05.30.22.13.12;	author niklas;	state Exp;
branches;
next	1.15;

1.15
date	96.05.06.22.52.19;	author tholo;	state Exp;
branches;
next	1.14;

1.14
date	96.05.01.07.26.35;	author deraadt;	state Exp;
branches;
next	1.13;

1.13
date	96.04.27.20.47.31;	author tholo;	state Exp;
branches;
next	1.12;

1.12
date	96.03.06.17.54.06;	author david;	state Exp;
branches;
next	1.11;

1.11
date	96.02.06.03.38.29;	author etheisen;	state Exp;
branches;
next	1.10;

1.10
date	96.02.02.00.11.23;	author niklas;	state Exp;
branches;
next	1.9;

1.9
date	96.01.30.03.22.47;	author tholo;	state Exp;
branches;
next	1.8;

1.8
date	96.01.30.01.09.32;	author tholo;	state Exp;
branches;
next	1.7;

1.7
date	96.01.01.23.51.27;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	95.12.27.10.41.22;	author niklas;	state Exp;
branches;
next	1.5;

1.5
date	95.12.20.18.39.20;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	95.12.19.21.25.28;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	95.12.19.11.00.20;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	95.12.19.10.43.28;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.12.19.09.23.39;	author deraadt;	state Exp;
branches;
next	;

1.37.2.1
date	2002.02.21.04.50.34;	author jason;	state Exp;
branches;
next	;


desc
@@


1.55
log
@Set correct owner for installed files. Required for noperm release.
ok tb
@
text
@#	$OpenBSD: Makefile.bsd-wrapper,v 1.54 2016/09/20 18:36:57 natano Exp $

.include <bsd.own.mk>

MAN=	man/cvs.1 man/cvs.5 man/cvsbug.8 man/rcs2log.1
GNUCFLAGS=	CC="${CC}" CFLAGS="${CFLAGS} ${COPTS}" CPP="${CPP}"
CLEANFILES=	src/version.c lib/getdate.c lib/getdate.h macintosh/Makefile \
		os2/Makefile zlib/Makefile \
		windows-NT/SCC/Makefile emx/Makefile doc/CVSvn.texi \
                doc/cvs.info doc/cvs.info-1 doc/cvs.info-2 doc/cvs.info-3 \
                doc/cvs.info-4 doc/cvs.info-5 doc/cvs.info-6 doc/cvs.info-7 \
		doc/cvs.info-8 doc/cvs.info-9 doc/cvsclient.info \
		doc/cvsclient.info-1 doc/cvsclient.info-2 doc/cvsclient.info-3

LDFLAGS=${LDSTATIC}

all:	config.status
	${MAKE} ${GNUCFLAGS} LDFLAGS="${LDFLAGS}" all info

.FORCE:	.IGNORE

.ifdef GLOBAL_AUTOCONF_CACHE
CF=     --cache-file=${GLOBAL_AUTOCONF_CACHE}
.else
CF=
.endif

config: .FORCE
	-rm -f config.cache
	PATH="/bin:/usr/bin:/sbin:/usr/sbin" \
	INSTALL_PROGRAM="${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP} -o ${BINOWN} -g ${BINGRP} -m ${BINMODE}" \
	INSTALL_SCRIPT="${INSTALL} ${INSTALL_COPY} -o ${BINOWN} -g ${BINGRP} -m ${BINMODE}" \
	INSTALL_DATA="${INSTALL} ${INSTALL_COPY} -o ${DOCOWN} -g ${DOCGRP} -m ${DOCMODE}" \
	ACLOCAL=true AUTOCONF=true AUTOMAKE=true AUTOHEADER=true \
	MAKEINFO='makeinfo --no-split' \
	sh ${.CURDIR}/configure --prefix=/usr --mandir=/usr/share/man \
		--datadir=/usr/libdata ${CF}

config.status:
	PATH="/bin:/usr/bin:/sbin:/usr/sbin" \
	INSTALL_PROGRAM="${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP} -o ${BINOWN} -g ${BINGRP} -m ${BINMODE}" \
	INSTALL_SCRIPT="${INSTALL} ${INSTALL_COPY} -o ${BINOWN} -g ${BINGRP} -m ${BINMODE}" \
	INSTALL_DATA="${INSTALL} ${INSTALL_COPY} -o ${DOCOWN} -g ${DOCGRP} -m ${DOCMODE}" \
	ACLOCAL=true AUTOCONF=true AUTOMAKE=true AUTOHEADER=true \
	MAKEINFO='makeinfo --no-split' \
	sh ${.CURDIR}/configure --prefix=/usr --mandir=/usr/share/man \
		--datadir=/usr/libdata ${CF}

.ifdef NOMAN
maninstall:
	@@echo NOMAN is set
.endif

BEFOREMAN=config.status
install: maninstall
	${MAKE} ${GNUCFLAGS} prefix=${DESTDIR}/usr \
		infodir=/usr/share/info \
		libexecdir=/usr/libexec \
		bindir=/usr/bin INSTALL_MAN= install

clean cleandir:
	-@@if [ -e Makefile ]; then ${MAKE} distclean; fi
	rm -f ${CLEANFILES}

depend:
	# Nothing here so far...

lint:
	# Nothing here so far...

tags:
	# Nothing here so far...

.include <bsd.obj.mk>
.include <bsd.subdir.mk>
.ifndef NOMAN
.include <bsd.man.mk>
.endif
@


1.54
log
@Revert previous, I didn't intend to commit this (yet).
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.52 2014/10/21 00:12:46 daniel Exp $
d31 7
a37 6
	INSTALL_PROGRAM="${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP}" \
		INSTALL_SCRIPT="${INSTALL} ${INSTALL_COPY}" \
		ACLOCAL=true AUTOCONF=true AUTOMAKE=true AUTOHEADER=true \
		MAKEINFO='makeinfo --no-split' \
		sh ${.CURDIR}/configure --prefix=/usr --mandir=/usr/share/man \
			--datadir=/usr/libdata ${CF}
d41 7
a47 6
	INSTALL_PROGRAM="${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP}" \
		INSTALL_SCRIPT="${INSTALL} ${INSTALL_COPY}" \
		ACLOCAL=true AUTOCONF=true AUTOMAKE=true AUTOHEADER=true \
		MAKEINFO='makeinfo --no-split' \
		sh ${.CURDIR}/configure --prefix=/usr --mandir=/usr/share/man \
			--datadir=/usr/libdata ${CF}
@


1.53
log
@Set correct owner for installed files. One step closer to noperm
builds.

initial diff and ok millert
@
text
@d31 6
a36 7
	INSTALL_PROGRAM="${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP} -o ${BINOWN} -g ${BINGRP} -m ${BINMODE}" \
	INSTALL_SCRIPT="${INSTALL} ${INSTALL_COPY} -o ${BINOWN} -g ${BINGRP} -m ${BINMODE}" \
	INSTALL_DATA="${INSTALL} ${INSTALL_COPY} -o ${DOCOWN} -g ${DOCGRP} -m ${DOCMODE}" \
	ACLOCAL=true AUTOCONF=true AUTOMAKE=true AUTOHEADER=true \
	MAKEINFO='makeinfo --no-split' \
	sh ${.CURDIR}/configure --prefix=/usr --mandir=/usr/share/man \
		--datadir=/usr/libdata ${CF}
d40 6
a45 7
	INSTALL_PROGRAM="${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP} -o ${BINOWN} -g ${BINGRP} -m ${BINMODE}" \
	INSTALL_SCRIPT="${INSTALL} ${INSTALL_COPY} -o ${BINOWN} -g ${BINGRP} -m ${BINMODE}" \
	INSTALL_DATA="${INSTALL} ${INSTALL_COPY} -o ${DOCOWN} -g ${DOCGRP} -m ${DOCMODE}" \
	ACLOCAL=true AUTOCONF=true AUTOMAKE=true AUTOHEADER=true \
	MAKEINFO='makeinfo --no-split' \
	sh ${.CURDIR}/configure --prefix=/usr --mandir=/usr/share/man \
		--datadir=/usr/libdata ${CF}
@


1.52
log
@no more kerberos.

ok deraadt@@, dcoppa@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.51 2014/04/22 10:21:56 reyk Exp $
d31 7
a37 6
	INSTALL_PROGRAM="${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP}" \
		INSTALL_SCRIPT="${INSTALL} ${INSTALL_COPY}" \
		ACLOCAL=true AUTOCONF=true AUTOMAKE=true AUTOHEADER=true \
		MAKEINFO='makeinfo --no-split' \
		sh ${.CURDIR}/configure --prefix=/usr --mandir=/usr/share/man \
			--datadir=/usr/libdata ${CF}
d41 7
a47 6
	INSTALL_PROGRAM="${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP}" \
		INSTALL_SCRIPT="${INSTALL} ${INSTALL_COPY}" \
		ACLOCAL=true AUTOCONF=true AUTOMAKE=true AUTOHEADER=true \
		MAKEINFO='makeinfo --no-split' \
		sh ${.CURDIR}/configure --prefix=/usr --mandir=/usr/share/man \
			--datadir=/usr/libdata ${CF}
@


1.51
log
@Remove KERBEROS5 from the Makefiles (except ssh for now, where it is
already manually disabled).

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.50 2014/04/15 20:55:42 miod Exp $
d36 1
a36 1
			--datadir=/usr/libdata ${KRB} ${KRB5} ${CF}
d45 1
a45 1
			--datadir=/usr/libdata ${KRB} ${KRB5} ${CF}
@


1.50
log
@Remove workarounds for ld reaching MAXDSIZ on vax, now that MAXDSIZ is
more comfortable.
Reminded by brad@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.49 2013/11/11 22:58:53 deraadt Exp $
a13 8

# KRB=--without-krb4
# 
# .if (${KERBEROS5:L} == "yes")
# KRB5=--with-gssapi=/usr --enable-encryption
# .else
KRB5=
# .endif
@


1.49
log
@disable kerberos support (only used for pserver, which we strongly
discourage anyone from using anyways)
ok various
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.48 2013/08/06 19:05:57 miod Exp $
a23 3
.if ${MACHINE} == "vax"
LDFLAGS+=-Wl,--no-keep-memory
.endif
@


1.48
log
@Switch vax to gcc 3.3.6.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.47 2007/11/03 10:32:56 espie Exp $
d15 5
a19 5
KRB=--without-krb4

.if (${KERBEROS5:L} == "yes")
KRB5=--with-gssapi=/usr --enable-encryption
.else
d21 1
a21 1
.endif
@


1.47
log
@make sure configure is done before we try building manpages.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.46 2006/07/12 23:00:07 espie Exp $
d23 5
d29 1
a29 1
	${MAKE} ${GNUCFLAGS} LDFLAGS=${LDSTATIC} all info
@


1.46
log
@makeinfo --no-split, simplifies sets immensely.
Approved deraadt@@, kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.45 2004/06/21 16:53:59 avsm Exp $
d58 1
@


1.45
log
@propagate CPP here as well
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.44 2004/01/02 09:01:24 millert Exp $
d40 1
d49 1
@


1.44
log
@Don't strip scripts; idea from mpech@@; ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.43 2003/05/12 16:40:07 mho Exp $
d6 1
a6 1
GNUCFLAGS=	CC="${CC}" CFLAGS="${CFLAGS} ${COPTS}"
@


1.43
log
@Disable krb4 support in preparation for krb4 removal.

ok jakob@@, hin@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.42 2003/02/16 18:28:41 deraadt Exp $
d38 1
d46 1
@


1.42
log
@a few missing man pages converted from info documents; work done by jmc
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.41 2002/06/03 15:59:38 todd Exp $
a14 3
.if (${KERBEROS:L} == "yes")
KRB=--with-krb4=/usr --enable-encryption
.else
a15 1
.endif
@


1.41
log
@fix typo
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.40 2002/06/03 15:50:17 todd Exp $
d5 1
a5 1
MAN=	man/cvs.1 man/cvs.5 man/cvsbug.8
@


1.40
log
@make ro /usr/src work again
while I'm here, make 'cleandir' cleanup all files
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.38 2001/11/21 15:35:38 millert Exp $
d7 1
a7 1
CLEANFILES=	src/version.c lib/getdate.c lib/getdate.h macintosh/Makefile
@


1.39
log
@don't write CVSvn.texi to src.
ok millert@@.
@
text
@d7 3
a9 2
CLEANFILES=	lib/getdate.c macintosh/Makefile os2/Makefile zlib/Makefile \
		windows-NT/SCC/Makefile emx/Makefile \
d12 2
a13 2
		doc/cvs.info-8 doc/cvs.info-9 doc/cvsclient.info doc/cvsclient.info-1 \
		doc/cvsclient.info-2 doc/cvsclient.info-3
@


1.38
log
@Dummy out aclocal, autoconf, automake, and autoheader since there
are still things in cvs's Makefile.in files that will attempt to
run e.g. autoheader.  Doing this here should mean we don't get hosed
again the next time cvs is updated.

I believe Marc Espie suggested something similar a while ago.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.37 2001/09/30 20:31:46 tholo Exp $
d8 1
a8 1
		windows-NT/SCC/Makefile emx/Makefile doc/CVSvn.texi \
@


1.37
log
@Don't pass $DESTDIR where generated Makefiles already handle it
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.36 2001/05/25 23:13:46 ho Exp $
d41 1
d48 1
@


1.37.2.1
log
@Pull in patch from current:
Fix (millert):
Dummy out aclocal, autoconf, automake, and autoheader since there
are still things in cvs's Makefile.in files that will attempt to
run e.g. autoheader.  Doing this here should mean we don't get hosed
again the next time cvs is updated.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.37 2001/09/30 20:31:46 tholo Exp $
a40 1
		ACLOCAL=true AUTOCONF=true AUTOMAKE=true AUTOHEADER=true \
a46 1
		ACLOCAL=true AUTOCONF=true AUTOMAKE=true AUTOHEADER=true \
@


1.36
log
@Support KERBEROS5 / gssapi. (hin@@ ok)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.35 2000/09/03 18:41:12 espie Exp $
d57 3
a59 2
		infodir=${DESTDIR}/usr/share/info \
		bindir=${DESTDIR}/usr/bin INSTALL_MAN= install
@


1.35
log
@Boring...  Add :L modifier to all tweakable variables tests.

Closes PR 1246
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.34 2000/02/21 03:05:42 ho Exp $
d20 6
d41 2
a42 1
		sh ${.CURDIR}/configure --prefix=/usr --mandir=/usr/share/man --datadir=/usr/libdata ${KRB} ${CF}
d47 2
a48 1
		sh ${.CURDIR}/configure --prefix=/usr --mandir=/usr/share/man --datadir=/usr/libdata ${KRB} ${CF}
@


1.34
log
@Some more files to clean up. (millert@@ ok)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.33 1999/12/06 09:24:55 deraadt Exp $
d14 1
a14 1
.if (${KERBEROS} == "yes")
@


1.33
log
@allow --enable-encryption in kerberos case
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.32 1999/09/10 06:19:48 tholo Exp $
d7 2
a8 1
CLEANFILES=	lib/getdate.c macintosh/Makefile os2/Makefile doc/CVSvn.texi \
@


1.32
log
@Put files in /usr/libexec/cvs and /usr/libdata/cvs; suggestion from Todd
Miller <todd.miller@@courtesan.com>
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.31 1999/06/07 00:45:36 deraadt Exp $
d14 1
a14 1
KRB=--with-krb4=/usr
@


1.31
log
@move CC, CCX, and COPTS forward; wd@@ics.nara-wu.ac.jp
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.30 1999/03/04 03:57:29 niklas Exp $
d34 1
a34 1
		sh ${.CURDIR}/configure --prefix=/usr ${KRB} ${CF}
d39 1
a39 1
		sh ${.CURDIR}/configure --prefix=/usr ${KRB} ${CF}
@


1.30
log
@Correct info-files cleaning and generation
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.29 1998/10/18 20:02:29 millert Exp $
d6 1
a6 1
GNUCFLAGS=	CFLAGS="${CFLAGS}"
@


1.29
log
@set PATH before running configure since we can't rely on the user's path being sane
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.28 1998/08/24 19:35:35 kstailey Exp $
d10 2
a11 1
		doc/cvs.info-8 doc/cvsclient.info
d20 1
a20 1
	${MAKE} ${GNUCFLAGS} LDFLAGS=${LDSTATIC}
@


1.28
log
@support GLOBAL_AUTOCONF_CACHE
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.27 1997/07/24 20:04:11 kstailey Exp $
d31 1
d36 1
@


1.27
log
@don't assume INSTALL_STRIP is set to `-s' pr 188
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.26 1997/07/24 16:51:23 kstailey Exp $
d23 6
d32 1
a32 1
		sh ${.CURDIR}/configure --prefix=/usr ${KRB}
d36 1
a36 1
		sh ${.CURDIR}/configure --prefix=/usr ${KRB}
@


1.26
log
@respect INSTALL_STRIP=-s'' pr 188
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.25 1997/06/23 22:20:24 kstailey Exp $
a17 6
.if defined (INSTALL_STRIP) && ${INSTALL_STRIP} == "-s"
INST_PROG='/usr/bin/install -cs'
.else
INST_PROG='/usr/bin/install -c'
.endif

d25 2
a26 2
	INSTALL_PROGRAM=$(INST_PROG) sh ${.CURDIR}/configure \
		--prefix=/usr ${KRB}
d29 2
a30 2
	INSTALL_PROGRAM=$(INST_PROG) sh ${.CURDIR}/configure \
		--prefix=/usr ${KRB}
@


1.25
log
@respect NOMAN during install
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.24 1997/06/23 03:57:23 kstailey Exp $
d18 6
d31 2
a32 1
	sh ${.CURDIR}/configure --prefix=/usr ${KRB}
d35 2
a36 1
	sh ${.CURDIR}/configure --prefix=/usr ${KRB}
@


1.24
log
@respect NOMAN
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.23 1997/05/29 20:12:22 deraadt Exp $
d29 5
@


1.23
log
@clean better; felix@@mamba.pond.inka.de, PR#194
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.22 1997/04/19 21:26:13 millert Exp $
d50 1
d52 1
@


1.22
log
@Changed ``defined(KERBEROS)'' to ``(${KERBEROS} == "yes")''
Same change doen for SKEY, YP, and KERBEROS5.  This allows
people to override those setting in /etc/mk.conf.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.21 1996/10/18 04:34:47 tholo Exp $
d9 2
a10 1
                doc/cvs.info-4 doc/cvs.info-5 doc/cvs.info-6 doc/cvsclient.info
@


1.21
log
@SERVER_FLOWCONTROL is now default; don't add it here
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.20 1996/08/13 17:36:42 millert Exp $
d11 1
a11 1
.if defined(KERBEROS)
@


1.20
log
@Don't need to explicately clean cat pages since cleandir will do that
(but do need to clean up the info pages).  Also, explicately tell
configure not to use kerberos if KERBEROS is not set so configure
doesn't try to be smarter than its/our own good.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.19 1996/08/13 02:45:41 deraadt Exp $
d6 1
a6 1
GNUCFLAGS=	CFLAGS="${CFLAGS} -DSERVER_FLOWCONTROL"
@


1.19
log
@make is not sh
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.18 1996/08/13 02:35:15 deraadt Exp $
d7 3
a9 2
CLEANFILES=	man/cvs.cat1 man/cvs.cat5 man/cvsbug.cat8 lib/getdate.c \
		macintosh/Makefile os2/Makefile
d13 2
@


1.18
log
@only compile kerberos support if needed; pointed out by millert
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.17 1996/05/30 23:10:33 niklas Exp $
d12 1
a12 1
.fi
@


1.17
log
@delay removing of Makefiles until AFTER they're used for the last time
@
text
@d1 3
a3 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.16 1996/05/30 22:13:12 niklas Exp $
d10 4
d21 1
a21 1
	sh ${.CURDIR}/configure --prefix=/usr --with-krb4=/usr
d24 1
a24 1
	sh ${.CURDIR}/configure --prefix=/usr --with-krb4=/usr
@


1.16
log
@Clean some more
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.15 1996/05/06 22:52:19 tholo Exp $
d26 1
a27 1
	-@@if [ -e Makefile ]; then ${MAKE} distclean; fi
@


1.15
log
@cvsinit.8 no longer exist
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.14 1996/05/01 07:26:35 deraadt Exp $
d5 2
a6 1
CLEANFILES=	man/cvs.cat1 man/cvs.cat5 man/cvsbug.cat8
@


1.14
log
@we need SERVER_FLOWCONTROL enabled
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.13 1996/04/27 20:47:31 tholo Exp $
d3 1
a3 1
MAN=	man/cvs.1 man/cvs.5 man/cvsbug.8 man/cvsinit.8
d5 1
a5 2
CLEANFILES=	man/cvs.cat1 man/cvs.cat5 man/cvsbug.cat8 \
		man/cvsinit.cat8
@


1.13
log
@mkmodules.1 no longer exist; don't try to build it
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.12 1996/03/06 17:54:06 david Exp $
d4 1
a4 1
GNUCFLAGS=	CFLAGS="${CFLAGS}"
@


1.12
log
@rm '-f' config.cache
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.11 1996/02/06 03:38:29 etheisen Exp $
d3 1
a3 1
MAN=	man/cvs.1 man/cvs.5 man/cvsbug.8 man/cvsinit.8 man/mkmodules.1
d6 1
a6 1
		man/cvsinit.cat8 man/mkmodules.cat1
@


1.11
log
@Pass CFLAGS into gnu build.
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.10 1996/02/02 00:11:23 niklas Exp $
d14 1
a14 1
	-rm config.cache
@


1.10
log
@"make -f Makefile.bsd-wrapper config" should *really* config, and
never use cached values.  The new cvs-version made me notice this.
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.9 1996/01/30 03:22:47 tholo Exp $
d4 3
d9 1
a9 1
	${MAKE} LDFLAGS=${LDSTATIC}
d21 2
a22 1
	${MAKE} prefix=${DESTDIR}/usr infodir=${DESTDIR}/usr/share/info \
d26 1
a27 1
	rm -f man/cvs.cat1 man/cvs.cat5 man/cvsbug.cat8 man/cvsinit.cat8 man/mkmodules.cat1
@


1.9
log
@Use "distclean" for cleaning, not "realclean"
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.8 1996/01/30 01:09:32 tholo Exp $
d11 1
@


1.8
log
@Integrate local changes
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.7 1996/01/01 23:51:27 deraadt Exp $
d21 2
a22 1
	-@@if [ -e Makefile ]; then ${MAKE} realclean; fi
@


1.7
log
@cannot assume BINDIR is setup
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.6 1995/12/27 10:41:22 niklas Exp $
d11 1
a11 1
	sh ${.CURDIR}/configure --prefix=/usr
d14 1
a14 1
	sh ${.CURDIR}/configure --prefix=/usr
@


1.6
log
@Support LDSTATIC and BINDIR
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.5 1995/12/20 18:39:20 deraadt Exp $
d18 1
a18 1
		bindir=${DESTDIR}${BINDIR} INSTALL_MAN= install
@


1.5
log
@use an ${INSTALL_MAN} variable to allow cvs to still be compiled on other machines
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.4 1995/12/19 21:25:28 deraadt Exp $
d6 1
a6 1
	${MAKE}
d18 1
a18 1
	    INSTALL_MAN= install
@


1.4
log
@use realclean, but first check if the Makefile exists
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.3 1995/12/19 11:00:20 deraadt Exp $
d17 2
a18 1
	${MAKE} prefix=${DESTDIR}/usr infodir=${DESTDIR}/usr/share/info install
@


1.3
log
@install processed man pages; from niklas
@
text
@d1 1
a1 1
#	$Id: Makefile.bsd-wrapper,v 1.2 1995/12/19 10:43:28 deraadt Exp $
d20 1
a20 1
	${MAKE} clean
@


1.2
log
@sh configure script, in case it loses it's execute permission
@
text
@d1 3
a3 1
#	$Id: Makefile.bsd-wrapper,v 1.1 1995/12/19 09:23:39 deraadt Exp $
d16 2
a17 2
install:
	${MAKE} prefix=${DESTDIR}/usr install
d33 1
@


1.1
log
@build cvs
@
text
@d1 1
a1 1
#	$Id$
d9 1
a9 1
	${.CURDIR}/configure --prefix=/usr
d12 1
a12 1
	${.CURDIR}/configure --prefix=/usr
@
