head	1.3;
access;
symbols
	OPENBSD_6_0:1.3.0.34
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.30
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.32
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.24
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.28
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.26
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.22
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.20
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.18
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.16
	OPENBSD_5_0:1.3.0.14
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.3.0.12
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.10
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.6
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.8
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.4
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.2
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.2.0.22
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.20
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.18
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.16
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.14
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.2.0.12
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.2.0.10
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.2.0.8
	OPENBSD_3_6_BASE:1.2
	OPENBSD_3_5:1.2.0.6
	OPENBSD_3_5_BASE:1.2
	OPENBSD_3_4:1.2.0.4
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.2.0.2
	OPENBSD_3_3_BASE:1.2
	OPENBSD_3_2:1.1.0.10
	OPENBSD_3_2_BASE:1.1
	OPENBSD_3_1:1.1.0.8
	OPENBSD_3_1_BASE:1.1
	OPENBSD_3_0:1.1.0.6
	OPENBSD_3_0_BASE:1.1
	OPENBSD_2_9:1.1.0.4
	OPENBSD_2_9_BASE:1.1
	OPENBSD_2_8:1.1.0.2
	OPENBSD_2_8_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2008.03.08.15.36.12;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2002.12.13.03.12.26;	author millert;	state Exp;
branches;
next	1.1;

1.1
date	2000.10.10.20.40.10;	author beck;	state Exp;
branches;
next	;


desc
@@


1.3
log
@more mkhybrid prototypes cleanups.
okay otto@@
@
text
@# Generated automatically from Makefile.in by configure.
#
# $Id: Makefile,v 1.2 2002/12/13 03:12:26 millert Exp $
#
## Makefile for mkhybrid - based on mkisofs v1.12
# James Pearson 16/3/1999

#### Start of system configuration section. ####

srcdir = .

CC = gcc

INSTALL = /usr/bin/install -c
INSTALL_PROGRAM = ${INSTALL}
INSTALL_DATA = ${INSTALL} -m 644

LIBS =  -lhfs -lfile

prefix = /usr/local
exec_prefix =  ${prefix}

bindir = ${exec_prefix}/bin

RANLIB = ranlib

libhfsdir = libhfs_iso
LIBHFS = $(libhfsdir)/libhfs.a
INCHFS = $(libhfsdir)/hfs.h

libfiledir = libfile
LIBFILE = $(libfiledir)/libfile.a

DEFINES = -DAPPLE_HYB

COPTS=-g -O2

# Where to put the manual pages.
mandir = $(prefix)/man/man8
# Extension (not including `.') for the manual page filenames.
manext = 8

#### End of system configuration section. ####

CFLAGS=$(COPTS) $(DEFINES) -I. -Iinclude -I$(libhfsdir) -DVANILLA_AUTOCONF
LDFLAGS= -L$(libhfsdir) -L$(libfiledir)
OBJS=mkisofs.o tree.o write.o hash.o rock.o multi.o \
		joliet.o match.o name.o eltorito.o \
		apple.o volume.o desktop.o mac_label.o

World: mkhybrid

Makefile: Makefile.in config.status
	CONFIG_FILES=Makefile CONFIG_HEADERS= $(SHELL) ./config.status

config.status: configure
	$(SHELL) config.status --recheck

configure:  configure.in
	cd $(srcdir) && autoconf

mkhybrid: Makefile $(OBJS) $(LIBHFS) $(LIBFILE)
	$(CC) $(LDFLAGS) -o mkhybrid $(OBJS) $(LIBS)

mkisofs: Makefile $(OBJS) $(LIBHFS) $(LIBFILE)
	$(CC) $(LDFLAGS) -o mkisofs $(OBJS) $(LIBS)

apple_driver: apple_driver.o
	$(CC) $(LDFLAGS) -o apple_driver  apple_driver.o
apple_driver.o: apple_driver.c mac_label.h
	$(CC) -c $(CFLAGS) $(srcdir)/apple_driver.c

install: mkisofs mkisofs.8
	[ -d $(bindir) ] || mkdir $(bindir)
	[ -d $(mandir) ] || mkdir $(mandir)
	$(INSTALL_PROGRAM) mkhybrid $(bindir)/mkhybrid
	-$(INSTALL_DATA) $(srcdir)/mkhybrid.8 $(mandir)/mkhybrid.$(manext)

tree.o: tree.c mkisofs.h iso9660.h exclude.h config.h Makefile
	$(CC) -c $(CFLAGS) $(srcdir)/tree.c

write.o: write.c mkisofs.h iso9660.h config.h Makefile
	$(CC) -c $(CFLAGS) $(srcdir)/write.c

hash.o: hash.c mkisofs.h  config.h Makefile
	$(CC) -c $(CFLAGS) $(srcdir)/hash.c

rock.o: rock.c mkisofs.h iso9660.h config.h Makefile
	$(CC) -c $(CFLAGS) $(srcdir)/rock.c

joliet.o: joliet.c mkisofs.h iso9660.h config.h Makefile
	$(CC) -c $(CFLAGS) $(srcdir)/joliet.c

match.o: match.c match.h config.h Makefile
	$(CC) -c $(CFLAGS) $(srcdir)/match.c

multi.o: multi.c iso9660.h mkisofs.h config.h Makefile
	$(CC) -c $(CFLAGS) $(srcdir)/multi.c

name.o: name.c iso9660.h mkisofs.h config.h Makefile
	$(CC) -c $(CFLAGS) $(srcdir)/name.c

mkisofs.o: mkisofs.c iso9660.h mkisofs.h exclude.h config.h Makefile $(LIBHFS) $(INCHFS) $(LIBFILE)
	$(CC) -c $(CFLAGS) $(srcdir)/mkisofs.c

eltorito.o: eltorito.c iso9660.h mkisofs.h config.h Makefile
	$(CC) -c $(CFLAGS) $(srcdir)/eltorito.c

apple.o: apple.c apple.h Makefile mkisofs.h
	$(CC) -c $(CFLAGS) $(srcdir)/apple.c

volume.o: volume.c mkisofs.h config.h Makefile $(LIBHFS) $(INCHFS)
	$(CC) -c $(CFLAGS) $(srcdir)/volume.c

desktop.o: desktop.c mkisofs.h config.h Makefile $(LIBHFS) $(INCHFS)
	$(CC) -c $(CFLAGS) $(srcdir)/desktop.c

mac_label.o: mac_label.c mac_label.h Makefile config.h mkisofs.h
	$(CC) -c $(CFLAGS) $(srcdir)/mac_label.c

$(LIBHFS) ::
	cd $(libhfsdir) && $(MAKE) CC="$(CC)" COPTS="$(COPTS)" DEFINES="$(DEFINES)" RANLIB="$(RANLIB)"

$(LIBFILE) ::
	cd $(libfiledir) && $(MAKE) CC="$(CC)" COPTS="$(COPTS)" DEFINES="$(DEFINES)" RANLIB="$(RANLIB)"

clean:
	/bin/rm -f *.o core mkhybrid apple_driver *~ #*#
	/bin/rm -f config.status config.log config.cache config.h
	(cd diag/; make clean)
	(cd $(libhfsdir); make clean)
	(cd $(libfiledir); make clean)

#
# All .h files except for config.h get copied.
#
dist:   Makefile
	(mydir=`basename \`pwd\``;\
	cd .. && tar -cvvf - $$mydir/README $$mydir/README.eltorito \
	$$mydir/configure.in $$mydir/configure $$mydir/config.h.in \
	$$mydir/Makefile.in  $$mydir/make.com $$mydir/TODO \
	$$mydir/COPYING $$mydir/ChangeLog $$mydir/*.8 $$mydir/*.c \
	$$mydir/mkisofs.spec $$mydir/acconfig.h \
	$$mydir/install-sh $$mydir/[d-z]*.h \
	$$mydir/README.session $$mydir/diag/Makefile.in \
	$$mydir/diag/README $$mydir/diag/*.c $$mydir/diag/isoinfo.8 \
	$$mydir/include/*.h | gzip -9 > $${mydir}.tar.gz)


@


1.2
log
@Two more places where we can use the libc getopt_long() instead of GNU getopt()
@
text
@d3 1
a3 1
# $Id: Makefile,v 1.1 2000/10/10 20:40:10 beck Exp $
d48 1
a48 1
		joliet.o match.o name.o fnmatch.o eltorito.o \
a95 3

fnmatch.o: fnmatch.c fnmatch.h config.h Makefile
	$(CC) -c $(CFLAGS) $(srcdir)/fnmatch.c
@


1.1
log
@mkhybrid 1.12b5.1

Note, this normally makes a "mkisofs" which is the same binary, mkisofs
from here needs to be tested out prior to replacing our existing mkisofs
with this. (currently just installs mkhybrid)
@
text
@d3 1
a3 1
# $Id: Makefile.in,v 1.14 1999/03/02 04:16:40 eric Exp $
a48 1
		getopt.o getopt1.o \
a110 6

getopt.o: getopt.c exclude.h config.h Makefile
	$(CC) -c $(CFLAGS) $(srcdir)/getopt.c

getopt1.o: getopt1.c exclude.h config.h Makefile
	$(CC) -c $(CFLAGS) $(srcdir)/getopt1.c
@

