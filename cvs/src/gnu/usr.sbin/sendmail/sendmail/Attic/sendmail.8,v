head	1.42;
access;
symbols
	OPENBSD_5_6:1.41.0.4
	OPENBSD_5_6_BASE:1.41
	OPENBSD_5_5:1.39.0.4
	OPENBSD_5_5_BASE:1.39
	OPENBSD_5_4:1.37.0.4
	OPENBSD_5_4_BASE:1.37
	OPENBSD_5_3:1.37.0.2
	OPENBSD_5_3_BASE:1.37
	OPENBSD_5_2:1.34.0.6
	OPENBSD_5_2_BASE:1.34
	OPENBSD_5_1_BASE:1.34
	OPENBSD_5_1:1.34.0.4
	OPENBSD_5_0:1.34.0.2
	OPENBSD_5_0_BASE:1.34
	OPENBSD_4_9:1.33.0.2
	OPENBSD_4_9_BASE:1.33
	OPENBSD_4_8:1.28.0.4
	OPENBSD_4_8_BASE:1.28
	OPENBSD_4_7:1.28.0.2
	OPENBSD_4_7_BASE:1.28
	OPENBSD_4_6:1.27.0.8
	OPENBSD_4_6_BASE:1.27
	OPENBSD_4_5:1.27.0.4
	OPENBSD_4_5_BASE:1.27
	OPENBSD_4_4:1.27.0.2
	OPENBSD_4_4_BASE:1.27
	OPENBSD_4_3:1.25.0.4
	OPENBSD_4_3_BASE:1.25
	OPENBSD_4_2:1.25.0.2
	OPENBSD_4_2_BASE:1.25
	OPENBSD_4_1:1.24.0.8
	OPENBSD_4_1_BASE:1.24
	OPENBSD_4_0:1.24.0.6
	OPENBSD_4_0_BASE:1.24
	OPENBSD_3_9:1.24.0.4
	OPENBSD_3_9_BASE:1.24
	OPENBSD_3_8:1.24.0.2
	OPENBSD_3_8_BASE:1.24
	OPENBSD_3_7:1.23.0.2
	OPENBSD_3_7_BASE:1.23
	OPENBSD_3_6:1.21.0.2
	OPENBSD_3_6_BASE:1.21
	OPENBSD_3_5:1.18.0.2
	OPENBSD_3_5_BASE:1.18
	OPENBSD_3_4:1.16.0.2
	OPENBSD_3_4_BASE:1.16
	OPENBSD_3_3:1.14.0.4
	OPENBSD_3_3_BASE:1.14
	OPENBSD_3_2:1.13.0.2
	OPENBSD_3_2_BASE:1.13
	OPENBSD_3_1:1.12.0.4
	OPENBSD_3_1_BASE:1.12
	OPENBSD_3_0:1.12.0.2
	OPENBSD_3_0_BASE:1.12
	SENDMAIL_8_12_0:1.1.1.3
	OPENBSD_2_9:1.10.0.2
	OPENBSD_2_9_BASE:1.10
	SENDMAIL_8_11_2:1.1.1.2
	OPENBSD_2_8:1.9.0.2
	OPENBSD_2_8_BASE:1.9
	OPENBSD_2_7:1.8.0.2
	OPENBSD_2_7_BASE:1.8
	SENDMAIL_8_10_0:1.1.1.1
	SENDMAIL_INC:1.1.1;
locks; strict;
comment	@.\" @;


1.42
date	2014.09.17.18.49.52;	author matthieu;	state dead;
branches;
next	1.41;
commitid	M7i5giHIoz3DMlTU;

1.41
date	2014.03.19.21.10.27;	author tedu;	state Exp;
branches;
next	1.40;

1.40
date	2014.03.12.16.07.53;	author jmc;	state Exp;
branches;
next	1.39;

1.39
date	2014.02.07.21.25.00;	author millert;	state Exp;
branches;
next	1.38;

1.38
date	2013.10.19.18.15.39;	author schwarze;	state Exp;
branches;
next	1.37;

1.37
date	2012.09.27.12.18.20;	author jmc;	state Exp;
branches;
next	1.36;

1.36
date	2012.08.18.16.25.20;	author jmc;	state Exp;
branches;
next	1.35;

1.35
date	2012.08.18.08.44.24;	author jmc;	state Exp;
branches;
next	1.34;

1.34
date	2011.05.17.15.54.24;	author millert;	state Exp;
branches;
next	1.33;

1.33
date	2010.10.18.14.42.16;	author jmc;	state Exp;
branches;
next	1.32;

1.32
date	2010.09.23.14.54.11;	author jmc;	state Exp;
branches;
next	1.31;

1.31
date	2010.09.23.14.51.57;	author jmc;	state Exp;
branches;
next	1.30;

1.30
date	2010.09.23.14.42.23;	author jmc;	state Exp;
branches;
next	1.29;

1.29
date	2010.09.23.14.20.02;	author jmc;	state Exp;
branches;
next	1.28;

1.28
date	2010.01.10.10.53.33;	author jmc;	state Exp;
branches;
next	1.27;

1.27
date	2008.06.15.21.17.27;	author jmc;	state Exp;
branches;
next	1.26;

1.26
date	2008.05.04.18.34.05;	author millert;	state Exp;
branches;
next	1.25;

1.25
date	2007.03.15.22.36.44;	author jmc;	state Exp;
branches;
next	1.24;

1.24
date	2005.05.04.08.39.36;	author jmc;	state Exp;
branches;
next	1.23;

1.23
date	2005.01.02.18.22.23;	author jmc;	state Exp;
branches;
next	1.22;

1.22
date	2004.12.31.15.55.01;	author jmc;	state Exp;
branches;
next	1.21;

1.21
date	2004.07.12.23.20.50;	author jmc;	state Exp;
branches;
next	1.20;

1.20
date	2004.06.24.03.59.27;	author millert;	state Exp;
branches;
next	1.19;

1.19
date	2004.04.21.08.19.45;	author jmc;	state Exp;
branches;
next	1.18;

1.18
date	2004.01.19.01.41.14;	author millert;	state Exp;
branches;
next	1.17;

1.17
date	2003.09.17.17.31.40;	author millert;	state Exp;
branches;
next	1.16;

1.16
date	2003.09.02.18.18.54;	author jmc;	state Exp;
branches;
next	1.15;

1.15
date	2003.08.06.08.19.46;	author jmc;	state Exp;
branches;
next	1.14;

1.14
date	2003.01.15.15.05.35;	author deraadt;	state Exp;
branches;
next	1.13;

1.13
date	2002.06.03.17.25.47;	author millert;	state Exp;
branches;
next	1.12;

1.12
date	2001.09.20.22.10.02;	author millert;	state Exp;
branches;
next	1.11;

1.11
date	2001.09.11.19.02.50;	author millert;	state Exp;
branches;
next	1.10;

1.10
date	2001.01.15.21.09.10;	author millert;	state Exp;
branches;
next	1.9;

1.9
date	2000.06.11.21.03.39;	author millert;	state Exp;
branches
	1.9.2.1;
next	1.8;

1.8
date	2000.05.03.05.47.40;	author itojun;	state Exp;
branches;
next	1.7;

1.7
date	2000.04.27.15.35.00;	author millert;	state Exp;
branches;
next	1.6;

1.6
date	2000.04.06.18.59.29;	author millert;	state Exp;
branches;
next	1.5;

1.5
date	2000.04.06.18.36.00;	author millert;	state Exp;
branches;
next	1.4;

1.4
date	2000.04.06.01.05.37;	author millert;	state Exp;
branches;
next	1.3;

1.3
date	2000.04.04.04.50.14;	author millert;	state Exp;
branches;
next	1.2;

1.2
date	2000.04.02.19.48.35;	author millert;	state Exp;
branches;
next	1.1;

1.1
date	2000.04.02.19.05.47;	author millert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.04.02.19.05.47;	author millert;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2001.01.15.20.52.17;	author millert;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2001.09.11.18.55.50;	author millert;	state Exp;
branches;
next	;

1.9.2.1
date	2001.05.31.00.31.41;	author miod;	state Exp;
branches;
next	;


desc
@@


1.42
log
@Bye.
@
text
@.\" Copyright (c) 1998-2003 Proofpoint, Inc. and its suppliers.
.\"
.\" Copyright (c) 1998-2003 Sendmail, Inc. and its suppliers.
.\"	All rights reserved.
.\" Copyright (c) 1983, 1997 Eric P. Allman.  All rights reserved.
.\" Copyright (c) 1988, 1991, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" By using this file, you agree to the terms and conditions set
.\" forth in the LICENSE file which can be found at the top level of
.\" the sendmail distribution.
.\"
.\"
.\"     $Sendmail: sendmail.8,v 8.61 2013/11/22 20:51:56 ca Exp $
.\"
.Dd $Mdocdate: March 19 2014 $
.Dt SENDMAIL 8
.Os
.Sh NAME
.Nm sendmail
.Nd an electronic mail transport agent
.Sh SYNOPSIS
.Nm sendmail
.Op Ar flags
.Op Ar address ...
.Op Fl v
.Nm hoststat
.Nm purgestat
.Sh DESCRIPTION
.Nm
sends a message to one or more
.Em recipients ,
routing the message over whatever networks
are necessary.
.Nm
does internetwork forwarding as necessary
to deliver the message to the correct place.
.Pp
.Nm
is not intended as a user interface routine;
other programs provide user-friendly
front ends;
.Nm
is used only to deliver pre-formatted messages.
.Pp
With no flags,
.Nm
reads its standard input
up to an end-of-file
or a line consisting only of a single dot
and sends a copy of the message found there
to all of the addresses listed.
It determines the network(s) to use
based on the syntax and contents of the addresses.
.Pp
Local addresses are looked up in a file
and aliased appropriately.
Aliasing can be prevented by preceding the address
with a backslash.
Beginning with 8.10, the sender is included in any alias
expansions, e.g.,
if `john' sends to `group',
and `group' includes `john' in the expansion,
then the letter will also be delivered to `john'.
.Pp
.Nm
can be made to conduct ESMTP transactions over TLS circuits
to increase the security of mail server transactions
if TLS/SSL is enabled.
See
.Xr starttls 8
for more information.
.Ss Parameters
.Bl -tag -width Fl
.\" XXX - how to prevent Ac from being interpreted as angle close quote?
.It Fl \&Ac
Use submit.cf even if the operation mode does not indicate
an initial mail submission.
.It Fl Am
Use sendmail.cf even if the operation mode indicates
an initial mail submission.
.It Fl B Ns Ar type
Set the body type to
.Ar type .
Current legal values are
.Li 7BIT
or
.Li 8BITMIME .
.It Fl ba
Go into
.Tn ARPANET
mode.
All input lines must end with a CR-LF,
and all messages will be generated with a CR-LF at the end.
Also,
the ``From:'' and ``Sender:''
fields are examined for the name of the sender.
.It Fl bd
Run as a daemon.
.Nm
will fork and run in the background
listening on socket 25 for incoming
.Tn SMTP
connections.
By default,
.Nm
will also listen on socket 587 for RFC 6409 message submission.
This is normally run from
.Pa /etc/rc .
.It Fl bD
Same as
.Fl bd
except runs in foreground.
.It Fl bh
Print the persistent host status database.
.It Fl bH
Purge expired entries from the persistent host status database.
.It Fl bi
Initialize the alias database.
.It Fl bm
Deliver mail in the usual way (default).
.It Fl bp
Print a listing of the queue(s).
.It Fl bP
Print number of entries in the queue(s);
only available with shared memory support.
.It Fl bs
Use the
.Tn SMTP
protocol as described in RFC 5321
on standard input and output.
This flag implies all the operations of the
.Fl ba
flag that are compatible with
.Tn SMTP .
.It Fl bt
Run in address test mode.
This mode reads addresses and shows the steps in parsing;
it is used for debugging configuration tables.
.It Fl bv
Verify names only \- do not try to collect or deliver a message.
Verify mode is normally used for validating
users or mailing lists.
.It Fl C Ns Ar file
Use alternate configuration file.
.Nm
gives up any enhanced (set-user-ID or set-group-ID) privileges
if an alternate configuration file is specified.
.It Fl D Ar logfile
Send debugging output to the indicated log file instead of stdout.
.It Fl d Ns Ar category . Ns Ar level
Set the debugging flag for
.Ar category
to
.Ar level .
The
.Ar category
is either an integer or a name specifying the topic; the
.Ar level
is an integer specifying the level of debugging output desired.
Higher levels generally mean more output.
More than one flag may be specified by separating flags with commas.
A list of numeric debugging categories can be found in the TRACEFLAGS file
in the sendmail source distribution.
.br
The option
.Fl d Ns Ar 0.1
prints the version of
.Nm
and the options it was compiled with.
.br
Most other categories are only useful with, and documented in,
.Nm Ns 's
source code.
.It Fl F Ns Ar fullname
Set the full name of the sender.
.It Fl f Ns Ar name
Sets the name of the ``from'' person
(i.e., the envelope sender of the mail).
This address may also be used in the From: header
if that header is missing during initial submission.
The envelope sender address is used as the recipient
for delivery status notifications
and may also appear in a Return-Path: header.
.Fl f
should only be used
by ``trusted'' users
(normally
.Em root ,
.Em daemon ,
and
.Em network )
or if the person you are trying to become
is the same as the person you are.
Otherwise,
an X-Authentication-Warning header
will be added to the message.
.It Fl G
Relay (gateway) submission of a message.
.It Fl h Ns Ar N
Set the hop count to
.Ar N .
The hop count is incremented every time the mail is
processed.
When it reaches a limit,
the mail is returned with an error message,
the victim of an aliasing loop.
If not specified,
``Received:'' lines in the message are counted.
.It Fl i
Do not strip a leading dot from lines in incoming messages,
and do not treat a dot on a line by itself
as the end of an incoming message.
This should be set if you are reading data from a file.
.It Fl L Ar tag
Set the identifier used in syslog messages to the supplied
.Ar tag .
.It Fl N Ar dsn
Set delivery status notification conditions to
.Ar dsn ,
which can be
.Ql never
for no notifications
or a comma separated list of the values
.Ql failure
to be notified if delivery failed,
.Ql delay
to be notified if delivery is delayed, and
.Ql success
to be notified when the message is successfully delivered.
.It Fl n
Don't do aliasing.
.It Fl O Ar option Ns = Ns Em value
Set option
.Ar option
to the specified
.Em value .
This form uses long names.
See below for more details.
.It Fl o Ns Ar x Em value
Set option
.Ar x
to the specified
.Em value .
This form uses single character names only.
The short names are not described in this manual page;
see the
.%T "Sendmail Installation and Operation Guide"
for details.
.It Fl p Ns Ar protocol
Set the name of the protocol used to receive the message.
This can be a simple protocol name such as ``UUCP''
or a protocol and hostname, such as ``UUCP:ucbvax''.
.It Fl Q Op Ar reason
Quarantine a normal queue items with the given reason or
unquarantine quarantined queue items if no reason is given.
This should only be used with some sort of item matching using
as described above.
.It Fl q Ns Bq Ar time
Process saved messages in the queue at given intervals.
If
.Ar time
is omitted, process the queue once.
.Ar time
is given as a tagged number,
with
.Ql s
being seconds,
.Ql m
being minutes (default),
.Ql h
being hours,
.Ql d
being days,
and
.Ql w
being weeks.
For example,
.Ql \-q1h30m
or
.Ql \-q90m
would both set the timeout to one hour thirty minutes.
By default,
.Nm
will run in the background.
This option can be used safely with
.Fl bd .
.It Fl qp Ns Op Ar time
Similar to
.Fl q Ns Ar time ,
except that instead of periodically forking a child to process the queue,
sendmail forks a single persistent child for each queue
that alternates between processing the queue and sleeping.
The sleep time is given as the argument; it defaults to 1 second.
The process will always sleep at least 5 seconds if the queue was
empty in the previous queue run.
.It Fl qf
Process saved messages in the queue once and do not
.Xr fork 2 ,
but run in the foreground.
.It Fl qG Ar name
Process jobs in queue group called
.Ar name
only.
.It Xo Fl q Ns Op Cm \&! Ns
.Cm I Ns Ar substr
.Xc
Limit processed jobs to those containing
.Ar substr
as a substring of the queue ID or not when
.Cm !\&
is specified.
.It Xo Fl q Ns Op Cm \&! Ns
.Cm Q Ns Ar substr
.Xc
Limit processed jobs to quarantined jobs containing
.Ar substr
as a substring of the quarantine reason or not when
.Cm !\&
is specified.
.It Xo Fl q Ns Op Cm \&! Ns
.Cm R Ns Ar substr
.Xc
Limit processed jobs to those containing
.Ar substr
as a substring of one of the recipients or not when
.Cm !\&
is specified.
.It Xo Fl q Ns Op Cm \&! Ns
.Cm S Ns Ar substr
.Xc
Limit processed jobs to those containing
.Ar substr
as a substring of the sender or not when
.Cm !\&
is specified.
.It Fl R Ar return
Set the amount of the message to be returned
if the message bounces.
The
.Ar return
parameter can be
.Ql full
to return the entire message or
.Ql hdrs
to return only the headers.
In the latter case also local bounces return only the headers.
.It Fl r Ns Ar name
An alternate and obsolete form of the
.Fl f
flag.
.It Fl t
Read message for recipients.
To:, Cc:, and Bcc: lines will be scanned for recipient addresses.
The Bcc: line will be deleted before transmission.
.It Fl V Ar envid
Set the original envelope id.
This is propagated across SMTP to servers that support DSNs
and is returned in DSN-compliant error messages.
.It Fl v
Go into verbose mode.
Alias expansions will be announced, etc.
.It Fl X Ar logfile
Log all traffic in and out of mailers in the indicated log file.
This should only be used as a last resort
for debugging mailer bugs.
It will log a lot of data very quickly.
.It Fl -
Stop processing command flags and use the rest of the arguments
as addresses.
.El
.Ss Options
There are also a number of processing options that may be set.
Normally these will only be used by a system administrator.
Options may be set either on the command line
using the
.Fl o
flag (for short names),
the
.Fl O
flag (for long names),
or in the configuration file.
This is a partial list limited to those options that are likely to be useful
on the command line
and only shows the long names;
for a complete list (and details), consult the
.%T "Sendmail Installation and Operation Guide" .
The options are:
.Bl -tag -width Fl
.It Li AliasFile= Ns Ar file
Use alternate alias file.
.It Li HoldExpensive
On mailers that are considered ``expensive'' to connect to,
don't initiate immediate connection.
This requires queueing.
.It Li CheckpointInterval= Ns Ar N
Checkpoint the queue file after every
.Ar N
successful deliveries (default 10).
This avoids excessive duplicate deliveries
when sending to long mailing lists
interrupted by system crashes.
.It Li DeliveryMode= Ns Ar x
Set the delivery mode to
.Ar x .
Delivery modes are
.Ql i
for interactive (synchronous) delivery,
.Ql b
for background (asynchronous) delivery,
.Ql q
for queue only \- i.e.,
actual delivery is done the next time the queue is run, and
.Ql d
for deferred \- the same as
.Ql q
except that database lookups for maps which have set the \-D option
(default for the host map) are avoided.
.It Li ErrorMode= Ns Ar x
Set error processing to mode
.Ar x .
Valid modes are
.Ql m
to mail back the error message,
.Ql w
to ``write''
back the error message
(or mail it back if the sender is not logged in),
.Ql p
to print the errors on the terminal
(default),
.Ql q
to throw away error messages
(only exit status is returned),
and
.Ql e
to do special processing for the BerkNet.
If the text of the message is not mailed back
by
modes
.Ql m
or
.Ql w
and if the sender is local to this machine,
a copy of the message is appended to the file
.Pa dead.letter
in the sender's home directory.
.It Li SaveFromLine
Save
.Tn UNIX Ns \-style
From lines at the front of messages.
.It Li MaxHopCount= Ns Ar N
The maximum number of times a message is allowed to ``hop''
before we decide it is in a loop.
.It Li IgnoreDots
Do not take dots on a line by themselves
as a message terminator.
.It Li SendMimeErrors
Send error messages in MIME format.
If not set, the DSN (Delivery Status Notification) SMTP extension
is disabled.
.It Li ConnectionCacheTimeout= Ns Ar timeout
Set connection cache timeout.
.It Li ConnectionCacheSize= Ns Ar N
Set connection cache size.
.It Li LogLevel= Ns Ar n
The log level.
.It Li MeToo= Ns Ar False
Don't send to ``me'' (the sender) if I am in an alias expansion.
.It Li CheckAliases
Validate the right hand side of aliases during a
.Xr newaliases 8
command.
.It Li OldStyleHeaders
If set, this message may have
old style headers.
If not set,
this message is guaranteed to have new style headers
(i.e., commas instead of spaces between addresses).
If set, an adaptive algorithm is used that will correctly
determine the header format in most cases.
.It Li QueueDirectory= Ns Ar queuedir
Select the directory in which to queue messages.
.It Li StatusFile= Ns Ar file
Save statistics in the named file.
.It Li Timeout.queuereturn= Ns Ar time
Set the timeout on undelivered messages in the queue to the specified time.
After delivery has failed
(e.g., because of a host being down)
for this amount of time,
failed messages will be returned to the sender.
The default is five days.
.It Li UserDatabaseSpec= Ns Ar userdatabase
If set, a user database is consulted to get forwarding information.
You can consider this an adjunct to the aliasing mechanism,
except that the database is intended to be distributed;
aliases are local to a particular host.
This may not be available if your sendmail does not have the
.Dv USERDB
option compiled in.
.It Li ForkEachJob
Fork each job during queue runs.
May be convenient on memory-poor machines.
.It Li SevenBitInput
Strip incoming messages to seven bits.
.It Li EightBitMode= Ns Ar mode
Set the handling of eight bit input to seven bit destinations to
.Ar mode :
.Li m
(mimefy) will convert to seven-bit MIME format,
.Li p
(pass) will pass it as eight bits (but violates protocols),
and
.Li s
(strict) will bounce the message.
.It Li MinQueueAge= Ns Ar timeout
Sets how long a job must ferment in the queue between attempts to send it.
.It Li DefaultCharSet= Ns Ar charset
Sets the default character set used to label 8-bit data
that is not otherwise labelled.
.It Li DialDelay= Ns Ar sleeptime
If opening a connection fails,
sleep for
.Ar sleeptime
seconds and try again.
Useful on dial-on-demand sites.
.It Li NoRecipientAction= Ns Ar action
Set the behaviour when there are no recipient headers (To:, Cc: or Bcc:)
in the message to
.Ar action :
.Li none
leaves the message unchanged,
.Li add-to
adds a To: header with the envelope recipients,
.Li add-apparently-to
adds an Apparently-To: header with the envelope recipients,
.Li add-bcc
adds an empty Bcc: header, and
.Li add-to-undisclosed
adds a header reading
.Ql "To: undisclosed-recipients:;" .
.It Li MaxDaemonChildren= Ns Ar N
Sets the maximum number of children that an incoming SMTP daemon
will allow to spawn at any time to
.Ar N .
.It Li ConnectionRateThrottle= Ns Ar N
Sets the maximum number of connections per second to the SMTP port to
.Ar N .
.El
.Pp
In aliases,
the first character of a name may be
a vertical bar to cause interpretation of
the rest of the name as a command
to pipe the mail to.
It may be necessary to quote the name
to keep
.Nm
from suppressing the blanks from between arguments.
For example:
.Bd -literal -offset indent
eric: "|/usr/bin/vacation -a allman eric"
.Ed
.Pp
Aliases may also have the syntax
.Dq :include: Ns Ar filename
to ask
.Nm
to read the named file for a list of recipients.
For example, an alias such as:
.Bd -literal -offset indent
poets: ":include:/usr/local/lib/poets.list"
.Ed
.Pp
would read
.Pa /usr/local/lib/poets.list
for the list of addresses making up the group.
.Pp
If invoked as
.Nm newaliases ,
.Nm
will rebuild the alias database.
If invoked as
.Nm mailq ,
.Nm
will print the contents of the mail queue.
If invoked as
.Nm hoststat ,
.Nm
will print the persistent host status database.
If invoked as
.Nm purgestat ,
.Nm
will purge expired entries from the persistent host status database.
.Sh FILES
Except for the file
.Pa /etc/mail/sendmail.cf
itself the following pathnames are all specified in
.Pa /etc/mail/sendmail.cf .
Thus,
these values are only approximations.
.Pp
.Bl -tag -width /etc/mail/sendmail.cf -compact
.It Pa /etc/mail/aliases
raw data for alias names
.It Pa /etc/mail/aliases.db
data base of alias names
.It Pa /etc/mail/sendmail.cf
configuration file
.It Pa /etc/mail/sendmail.hf
help file
.It Pa /var/log/sendmail.st
collected statistics
.It Pa /var/spool/mqueue/*
temp files
.El
.Sh EXIT STATUS
.Nm
returns an exit status
describing what it did.
The codes are defined in
.Aq Pa sysexits.h :
.Pp
.Bl -tag -width EX_UNAVAILABLE -compact -offset indent
.It Dv EX_OK
Successful completion on all addresses.
.It Dv EX_NOUSER
User name not recognized.
.It Dv EX_UNAVAILABLE
Catchall meaning necessary resources
were not available.
.It Dv EX_SYNTAX
Syntax error in address.
.It Dv EX_SOFTWARE
Internal software error,
including bad arguments.
.It Dv EX_OSERR
Temporary operating system error,
such as
.Dq cannot fork .
.It Dv EX_NOHOST
Host name not recognized.
.It Dv EX_TEMPFAIL
Message could not be sent immediately,
but was queued.
.El
.Sh SEE ALSO
.Xr mail 1 ,
.Xr syslog 3 ,
.Xr aliases 5 ,
.Xr mailer.conf 5 ,
.Xr mailaddr 7 ,
.Xr mail.local 8 ,
.Xr mailq 8 ,
.Xr mailstats 8 ,
.Xr newaliases 8 ,
.Xr rc 8 ,
.Xr starttls 8
.Pp
"Filtering Mail with Sendmail",
.br
.Pa /usr/share/doc/html/milter/index.html .
.Pp
.Lk http://www.sendmail.org/
.Pp
US Patent Numbers 6865671, 6986037.
.Sh STANDARDS
.Rs
.%A Zaw-Sing Su
.%A Jon Postel
.%D August 1982
.%R RFC 819
.%T The Domain Naming Convention for Internet User Applications
.Re
.Pp
.Rs
.%A J. Klensin
.%D October 2008
.%R RFC 5321
.%T Simple Mail Transfer Protocol
.Re
.Pp
.Rs
.%A P. Resnick
.%D October 2008
.%R RFC 5322
.%T Internet Message Format
.Re
.Sh HISTORY
The
.Nm
command appeared in
.Bx 4.2 .
.Sh CAVEATS
.Nm
often gets blamed for many problems
that are actually the result of other problems,
such as overly permissive modes on directories.
For this reason,
.Nm
checks the modes on system directories and files
to determine if they can be trusted.
Although these checks can be turned off
and your system security reduced by setting the
.Li DontBlameSendmail
option,
the permission problems should be fixed.
For more information, see:
.Pp
.Lk http://www.sendmail.org/tips/DontBlameSendmail.html
.Pp
Because
.Xr smtpd 8
is the default
.Ox
mailer,
.Nm
versions of
.Xr aliases 5 ,
.Xr forward 5 ,
.Xr makemap 8 ,
and
.Xr newaliases 8
are not currently installed.
@


1.41
log
@use smtpd man pages by default. ok deraadt jmc
sendmail.8 note by jmc
@
text
@d16 1
a16 1
.Dd $Mdocdate: March 12 2014 $
@


1.40
log
@no more rmail in base; ok millert
@
text
@d16 1
a16 1
.Dd $Mdocdate: February 7 2014 $
d711 14
@


1.39
log
@Update to sendmail 8.14.8.  This touches a lot of files due to the
Sendmail, Inc -> Proofpoint name change.  See RELEASE_NOTES for
actual changes.
@
text
@d16 1
a16 1
.Dd $Mdocdate: October 19 2013 $
d199 1
a199 4
Relay (gateway) submission of a message, e.g., when
.Nm rmail
calls
.Nm .
a657 1
.Xr rmail 8 ,
@


1.38
log
@fix a few obvious .Ar markup errors (unfortunately, there are many more)
found while working on mandoc apropos
@
text
@d1 1
a1 1
.\"	$OpenBSD: sendmail.8,v 1.37 2012/09/27 12:18:20 jmc Exp $
d14 1
a14 1
.\"     $Sendmail: sendmail.8,v 8.60 2011/03/07 23:44:48 ca Exp $
d16 1
a16 1
.Dd $Mdocdate: September 27 2012 $
@


1.37
log
@last stage of rfc changes, using consistent Rs/Re blocks, and moving the
references into a STANDARDS section;
@
text
@d1 1
a1 1
.\"	$OpenBSD: sendmail.8,v 1.36 2012/08/18 16:25:20 jmc Exp $
d16 1
a16 1
.Dd $Mdocdate: August 18 2012 $
d308 1
a308 1
.It Xo Fl q Ns Op Ar \&! Ns
d314 1
a314 1
.Em !\&
d316 1
a316 1
.It Xo Fl q Ns Op Ar \&! Ns
d322 1
a322 1
.Em !\&
d324 1
a324 1
.It Xo Fl q Ns Op Ar \&! Ns
d330 1
a330 1
.Em !\&
d332 1
a332 1
.It Xo Fl q Ns Op Ar \&! Ns
d338 1
a338 1
.Em !\&
@


1.36
log
@RFC updates:
5322 obsoletes 2822
5321 obsoletes 821 and 2821
6409 obsoletes 2476 and 4409
@
text
@d1 1
a1 1
.\"	$OpenBSD: sendmail.8,v 1.35 2012/08/18 08:44:24 jmc Exp $
d151 1
a151 3
.It Xo Fl d Ns Ar category Ns . Ns
.Ar level
.Xc
d301 2
a302 1
Process saved messages in the queue once and do not fork(),
a663 3
DARPA Internet Request For Comments
RFC 819, RFC 5321, RFC 5322.
.Pp
d671 22
@


1.35
log
@within Rs/Re reference blocks, use %U instead of %O (or any other
variants) for URLs, allowing mandoc -Thtml to properly generate links;

(sendmail.8 changes are simply using Lk, which i somehow missed in previous)

ingo reminded me to verify that gnu groff recognises %U: 1.20.1 does not,
but 1.21 does;
@
text
@d1 1
a1 1
.\"	$OpenBSD: sendmail.8,v 1.34 2011/05/17 15:54:24 millert Exp $
d16 1
a16 1
.Dd $Mdocdate: May 17 2011 $
d107 1
a107 1
will also listen on socket 587 for RFC 2476 message submission.
d130 1
a130 1
protocol as described in RFC 821
d666 1
a666 1
RFC 819, RFC 821, RFC 2822.
@


1.34
log
@Update to sendmail 8.14.5
@
text
@d1 1
a1 1
.\"	$OpenBSD: sendmail.8,v 1.33 2010/10/18 14:42:16 jmc Exp $
d16 1
a16 1
.Dd $Mdocdate: October 18 2010 $
d672 1
a672 1
http://www.sendmail.org/
d696 1
a696 1
.Pa http://www.sendmail.org/tips/DontBlameSendmail.html
@


1.33
log
@remove references to now removed usd/psd/smm docs;
@
text
@d1 1
a1 1
.\"	$OpenBSD: sendmail.8,v 1.32 2010/09/23 14:54:11 jmc Exp $
d14 1
a14 1
.\"     $Sendmail: sendmail.8,v 8.58 2007/08/02 05:42:33 ca Exp $
d16 1
a16 1
.Dd $Mdocdate: September 23 2010 $
d216 3
a218 1
Ignore dots alone on lines by themselves in incoming messages.
d673 2
@


1.32
log
@NOTES->CAVEATS; ok millert
@
text
@d1 1
a1 1
.\"	$OpenBSD: sendmail.8,v 1.31 2010/09/23 14:51:57 jmc Exp $
a664 3
.Pp
"Sendmail Installation and Operation Guide",
.Pa /usr/share/doc/smm/08.sendmailop/ .
@


1.31
log
@add RCSID and Mdocdate to these pages; ok millert
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d16 1
a16 1
.Dd $Mdocdate$
a596 17
.Sh NOTES
.Nm
often gets blamed for many problems
that are actually the result of other problems,
such as overly permissive modes on directories.
For this reason,
.Nm
checks the modes on system directories and files
to determine if they can be trusted.
Although these checks can be turned off
and your system security reduced by setting the
.Li DontBlameSendmail
option,
the permission problems should be fixed.
For more information, see:
.Pp
.Pa http://www.sendmail.org/tips/DontBlameSendmail.html
d679 17
@


1.30
log
@since msgs no longer exists, replace the example msgs alias with the one
from vacation(8);

ok millert
@
text
@d1 2
d16 1
a16 1
.Dd August 2, 2007
@


1.29
log
@use an EXIT STATUS section for these pages;
@
text
@d560 1
a560 1
For example, a common alias is:
d562 1
a562 1
msgs: "|/usr/bin/msgs -s"
@


1.28
log
@remove references to docs we no longer install;
@
text
@a578 30
.Nm
returns an exit status
describing what it did.
The codes are defined in
.Aq Pa sysexits.h :
.Pp
.Bl -tag -width EX_UNAVAILABLE -compact -offset indent
.It Dv EX_OK
Successful completion on all addresses.
.It Dv EX_NOUSER
User name not recognized.
.It Dv EX_UNAVAILABLE
Catchall meaning necessary resources
were not available.
.It Dv EX_SYNTAX
Syntax error in address.
.It Dv EX_SOFTWARE
Internal software error,
including bad arguments.
.It Dv EX_OSERR
Temporary operating system error,
such as
.Dq cannot fork .
.It Dv EX_NOHOST
Host name not recognized.
.It Dv EX_TEMPFAIL
Message could not be sent immediately,
but was queued.
.El
.Pp
d633 30
@


1.27
log
@RFC 2822 obsoletes RFC 822; from Igor Zinovik
@
text
@a683 3
"Sendmail \- An Internetwork Mail Router",
.Pa /usr/share/doc/smm/09.sendmail/ .
.Pp
@


1.26
log
@Update to sendmail-8.14.3
@
text
@d679 1
a679 1
RFC 819, RFC 821, RFC 822.
@


1.25
log
@.Nm does not need an argument; from Igor Sobrado
@
text
@d12 1
a12 1
.\"     $Sendmail: sendmail.8,v 8.57 2003/12/01 17:02:41 ca Exp $
d14 1
a14 1
.Dd December 1, 2003
@


1.24
log
@.Xr mailstats 8 ;
@
text
@d28 1
a28 1
.Nm Sendmail
d33 1
a33 1
.Nm Sendmail
d37 1
a37 1
.Nm Sendmail
d41 1
a41 1
.Nm sendmail
d45 1
a45 1
.Nm sendmail
d98 1
a98 1
.Nm Sendmail
d104 1
a104 1
.Nm Sendmail
d144 1
a144 1
.Nm Sendmail
d169 1
a169 1
.Nm sendmail
d173 1
a173 1
.Nm sendmail 's
d202 1
a202 1
.Nm sendmail .
d255 5
d285 1
a285 1
.Nm sendmail
a336 5
.It Fl Q Op Ar reason
Quarantine a normal queue items with the given reason or
unquarantine quarantined queue items if no reason is given.
This should only be used with some sort of item matching using
as described above.
d558 1
a558 1
.Nm sendmail
d568 1
a568 1
.Nm sendmail
d579 1
a579 1
.Nm Sendmail
d611 1
a611 1
.Nm sendmail
d615 1
a615 1
.Nm sendmail
d619 1
a619 1
.Nm sendmail
d623 1
a623 1
.Nm sendmail
d626 1
a626 1
.Nm sendmail
d631 1
a631 1
.Nm sendmail
@


1.23
log
@document starttls(8);
@
text
@d672 1
@


1.22
log
@add starttls(8) to SEE ALSO;
@
text
@d63 8
@


1.21
log
@point people to milter html docs;
suggested by Alexey E. Suslikov;

ok millert@@
@
text
@d666 2
a667 1
.Xr rmail 8
@


1.20
log
@Update to sendmail.8.13.0
@
text
@d677 4
@


1.19
log
@- point people to smm docs
- remove some .Pp and -compact from displays
- remove groff cruft
- add space

ok millert@@ (the first part anyway)
@
text
@d1 1
a1 1
.\" Copyright (c) 1998-2002 Sendmail, Inc. and its suppliers.
d12 1
a12 1
.\"     $Sendmail: sendmail.8,v 8.51.2.3 2003/12/01 17:02:00 ca Exp $
d139 2
d301 8
d324 5
@


1.18
log
@Update to sendmail 8.12.11.  I've been runninga beta version of this for
some time without problems.  See the RELEASE_NOTES for the change log.
@
text
@a379 1
.ne 1i
d538 1
a538 2
.Pp
.Bd -literal -offset indent -compact
d548 1
a548 2
.Pp
.Bd -literal -offset indent -compact
d561 1
d655 6
a660 10
.Rs
.%T "Sendmail \- An Internetwork Mail Router"
.%V SMM
.%N \&No. 9
.Re
.Rs
.%T "Sendmail Installation and Operation Guide"
.%V SMM
.%N \&No. 8
.Re
@


1.17
log
@Update to sendmail-8.12.10.  This includes a fix for a buffer overflow
in address parsing.  That fix (but not all of sendmail-8.12.10) has
been applied to OpenBSD 3.4 and the 3.2 and 3.2 -stable branches.
@
text
@d12 1
a12 1
.\"     $Sendmail: sendmail.8,v 8.51.2.1 2003/05/20 16:38:15 gshapiro Exp $
d14 1
a14 1
.Dd May 20, 2003
d137 28
a164 5
refuses to run as root if an alternate configuration file is specified.
.It Fl d Ns Ar X
Set debugging value to
.Ar X .
.ne 1i
@


1.16
log
@escape punctuation;
ok deraadt@@
@
text
@d12 1
a12 1
.\"     $Sendmail: sendmail.8,v 8.51 2002/05/24 15:42:13 ca Exp $
d14 1
a14 1
.Dd May 24, 2002
d268 1
a268 1
.Cm I Ar substr
d276 1
a276 1
.Cm R Ar substr
d284 1
a284 1
.Cm S Ar substr
@


1.15
log
@small cleanup;
ok millert@@
@
text
@d267 1
a267 1
.It Xo Fl q Ns Op Ar ! Ns
d273 1
a273 1
.Em !
d275 1
a275 1
.It Xo Fl q Ns Op Ar ! Ns
d281 1
a281 1
.Em !
d283 1
a283 1
.It Xo Fl q Ns Op Ar ! Ns
d289 1
a289 1
.Em !
@


1.14
log
@typos; jmc@@prioris.mini.pw.edu.pl
@
text
@d58 4
a61 4
Beginning with 8.10, the sender is included in any alias 
expansions, e.g., 
if `john' sends to `group', 
and `group' includes `john' in the expansion, 
d97 1
a97 3
will also listen on socket 587 for
.Tn RFC2476
message submission.
d120 1
a120 2
protocol as described in
.Tn RFC821
d153 1
a153 1
should only be used 
d188 1
a188 1
.Ar dsn,
d206 2
a207 1
This form uses long names.  See below for more details.
d227 1
a227 1
.Xr Time
d272 1
a272 1
as a substring of the queue id or not when
d524 1
a524 1
.Xr sendmail
d568 2
a569 1
will rebuild the alias database.  If invoked as
d596 2
a597 2

.%T http://www.sendmail.org/tips/DontBlameSendmail.html
d602 1
a602 1
.Pa /etc/mail/sendmail.cf.
d632 2
a633 5
DARPA
Internet Request For Comments
.%T RFC819 ,
.%T RFC821 ,
.%T RFC822 .
@


1.13
log
@Update to sendmail-8.12.4
@
text
@d66 1
a66 1
.It Fl A Ns c
d75 1
a75 1
Current legal values
d91 1
a91 1
will fork and run in background
d250 1
a250 1
will run in background.
d262 1
a262 1
.It Fl q Ns f
d265 1
a265 1
.It Fl q Ns G Ar name
d270 1
a270 1
.No I Ar substr
d278 1
a278 1
.No R Ar substr
d286 1
a286 1
.No S Ar substr
d409 1
a409 1
.It Li MaxHopCount= Ar N
@


1.12
log
@mailq moves to section 8 since it can only be run by the superuser now
that sendmail is no longer setuid root.
@
text
@d1 1
a1 1
.\" Copyright (c) 1998-2001 Sendmail, Inc. and its suppliers.
d12 1
a12 1
.\"     $Sendmail: sendmail.8,v 8.49 2001/03/23 22:10:00 ca Exp $
d14 1
a14 1
.Dd March 23, 2001
d89 1
a89 2
Run as a daemon.  This requires Berkeley
.Tn IPC .
@


1.11
log
@merge in sendmail 8.12.0 with BSD Makefiles and mdoc man pages
@
text
@a623 1
.Xr mailq 1 ,
d629 1
@


1.10
log
@sendmail 8.11.2 with BSD Makefiles
@
text
@d1 1
a1 1
.\" Copyright (c) 1998-2000 Sendmail, Inc. and its suppliers.
d12 1
a12 1
.\"     $Sendmail: sendmail.8,v 8.36.8.3 2000/12/14 23:08:15 gshapiro Exp $
d14 1
a14 1
.Dd December 14, 2000
d65 7
d116 4
a119 1
Print a listing of the queue.
d226 1
a226 1
Processed saved messages in the queue at given intervals.
d236 1
a236 1
being minutes,
d249 1
a249 3
If
.Ar time
is specified,
d254 19
a272 1
.It Fl qI Ns Ar substr
d275 6
a280 2
as a substring of the queue id.
.It Fl qR Ns Ar substr
d283 6
a288 2
as a substring of one of the recipients.
.It Fl qS Ns Ar substr
d291 3
a293 1
as a substring of the sender.
a312 11
.It Fl U
Initial (user) submission.  This should
.Em always
be set when called from a user agent such as
.Nm Mail
or
.Nm exmh
and
.Em never
be set when called by a network delivery agent such as
.Nm rmail .
@


1.9
log
@newaliases(1) -> newaliases(8)
@
text
@d12 1
a12 1
.\"     $Sendmail: sendmail.8,v 8.36 2000/02/01 05:49:57 gshapiro Exp $
d14 1
a14 1
.Dd January 2, 2000
d159 5
@


1.9.2.1
log
@Pull in patch from current:
Errata(028):
The signal handlers in sendmail contain code that is unsafe in the
context of a signal handler.  This leads to potentially serious race
conditions.  At the moment this is a theoretical attack only and can
only be exploited on the local host (if at all).
Fix(millert):
Update to sendmail 8.11.4:
8.11.4 revamps signal handling within the MTA in order to reduce
the likelihood of a race condition that can lead to heap
corruption as described in Michal Zalewski's advisory.  The
problems discussed in the advisory are not currently known to
be exploitable but we recommend upgrading to 8.11.4 in case a
method is found to exploit the signal handling race condition.
8.11.4 also fixes other bugs found since the release of 8.11.3.

See the RELEASE_NOTES file for more details.
@
text
@d12 1
a12 1
.\"     $Sendmail: sendmail.8,v 8.36.8.3 2000/12/14 23:08:15 gshapiro Exp $
d14 1
a14 1
.Dd December 14, 2000
a158 5
.It Fl G
Relay (gateway) submission of a message, e.g., when
.Nm rmail
calls
.Nm sendmail .
@


1.8
log
@typo (etc -> etc/mail migration).  deraadt okay'ed
@
text
@d400 1
a400 1
.Xr newaliases 1
a594 1
.Xr newaliases 1 ,
d600 1
@


1.7
log
@Mention RFC2476 and port 587
@
text
@d574 1
a574 1
.Pa /etc/sendmail.cf.
@


1.6
log
@Back out last change, I changed my mind...
@
text
@d89 5
@


1.5
log
@Use /etc/mail/statistics not /var/log/sendmail.st by default.
@
text
@d582 1
a582 1
.It Pa /etc/mail/statistics
@


1.4
log
@Don't make a sendmail smtpd link, it will be confused with beck's smtpd.
@
text
@d582 1
a582 1
.It Pa /var/log/sendmail.st
@


1.3
log
@Add MLINKs from sendmail.8 to smtpd.8, hoststat.1, purgestat.1
Convert man pages back to mandoc format.
@
text
@a26 1
.Nm smtpd
a547 6
If invoked as
.Nm smtpd ,
.Nm sendmail
will act as a daemon, as if the
.Fl bd
option were specified.
@


1.2
log
@Remove sendmail's `Build' scaffolding and add real Makefiles
praliases should be in section 1, not 8
Use arc4random(3) instead of random(3)
Add some sample OpenBSD .mc files
@
text
@d2 1
a2 1
.\"      All rights reserved.
d5 1
a5 1
.\"     The Regents of the University of California.  All rights reserved.
d14 16
a29 20
.TH SENDMAIL 8 "$Date: 2000/02/01 05:49:57 $"
.SH NAME
.B sendmail
\- an electronic mail transport agent
.SH SYNOPSIS
.B sendmail
.RI [ flags "] [" "address ..." ]
.br
.B newaliases
.br
.B mailq
.RB [ \-v ]
.br
.B hoststat
.br
.B purgestat
.br
.B smtpd
.SH DESCRIPTION
.B Sendmail
d31 2
a32 2
.I recipients,
routing the message over whatever networks 
d34 2
a35 2
.B Sendmail
does internetwork forwarding as necessary 
d37 4
a40 4
.PP
.B Sendmail
is not intended as a user interface routine; 
other programs provide user-friendly 
d42 1
a42 1
.B sendmail
d44 1
a44 1
.PP
d46 4
a49 4
.B sendmail
reads its standard input 
up to an end-of-file 
or a line consisting only of a single dot 
d51 2
a52 2
to all of the addresses listed.  
It determines the network(s) to use 
d54 2
a55 2
.PP
Local addresses are looked up in a file 
d57 1
a57 1
Aliasing can be prevented by preceding the address 
d64 3
a66 3
.SS Parameters
.TP
.BI \-B type
d68 13
a80 13
.IR type .
Current legal values are 
7BIT 
or  
8BITMIME.
.TP
.B \-ba
Go into 
ARPANET 
mode.  All input lines must end with a CR-LF, 
and all messages will be generated with a CR-LF at the end.  
Also, 
the ``From:'' and ``Sender:'' 
d82 5
a86 6
.TP
.B \-bd
Run as a daemon.  This requires Berkeley 
IPC.
.B Sendmail
will fork and run in background 
d88 5
a92 6
SMTP 
connections.  
This is normally run from 
/etc/rc.
.TP
.B \-bD
d94 1
a94 1
.B \-bd
d96 1
a96 2
.TP
.B \-bh
d98 1
a98 2
.TP
.B \-bH
d100 1
a100 2
.TP
.B \-bi
d102 1
a102 2
.TP
.B \-bm
d104 1
a104 2
.TP
.B \-bp
d106 6
a111 7
.TP
.B \-bs
Use the 
SMTP 
protocol as described in 
RFC821 
on standard input and output.  
d113 6
a118 7
.B \-ba
flag that are compatible with 
SMTP.
.TP
.B \-bt
Run in address test mode.  
This mode reads addresses and shows the steps in parsing; 
d120 1
a120 2
.TP
.B \-bv
d122 1
a122 1
Verify mode is normally used for validating 
d124 1
a124 2
.TP
.BI \-C file
d126 1
a126 1
.B Sendmail
d128 1
a128 2
.TP
.BI \-d X
d130 1
a130 1
.IR X .
d132 1
a132 2
.TP
.BI \-F fullname
d134 2
a135 3
.TP
.BI \-f name
Sets the name of the ``from'' person 
d142 1
a142 1
.B \-f
d144 1
a144 1
by ``trusted'' users 
d146 2
a147 1
.IR root ", " daemon ,
d149 2
a150 2
.IR network )
or if the person you are trying to become 
d155 1
a155 2
.TP
.BI \-h N
d157 2
a158 2
.IR N .
The hop count is incremented every time the mail is 
d160 1
a160 1
When it reaches a limit, 
d162 2
a163 2
the victim of an aliasing loop.  
If not specified, 
d165 1
a165 2
.TP
.B \-i
d168 1
a168 2
.TP
.BI "\-L " tag
d170 2
a171 3
.IR tag .
.TP
.BI "\-N " dsn
d173 10
a182 10
.IR dsn ,
which can be 
`never' 
for no notifications 
or a comma separated list of the values 
`failure' 
to be notified if delivery failed, 
`delay'
to be notified if delivery is delayed, and 
`success' 
d184 1
a184 2
.TP
.B \-n
d186 1
a186 2
.TP
\fB\-O\fP \fIoption\fR=\fIvalue\fR 
d188 1
a188 1
.I option
d190 1
a190 1
.IR value .
d192 1
a192 2
.TP
.BI \-o "x value"
d194 1
a194 1
.I x
d196 3
a198 3
.IR value .
This form uses single character names only.  
The short names are not described in this manual page; 
d200 1
a200 1
.I "Sendmail Installation and Operation Guide"
d202 3
a204 4
.TP
.BI \-p protocol
Set the name of the protocol used to receive the message.  
This can be a simple protocol name such as ``UUCP'' 
d206 2
a207 3
.TP
\fB\-q\fR[\fItime\fR] 
Processed saved messages in the queue at given intervals.  
d209 1
a209 1
.I time
d211 13
a223 13
.I Time
is given as a tagged number, 
with 
`s' 
being seconds, 
`m' 
being minutes, 
`h' 
being hours, 
`d' 
being days, 
and 
`w' 
d225 4
a228 4
For example, 
`\-q1h30m' 
or 
`\-q90m' 
d231 1
a231 1
.I time
d233 2
a234 2
.B sendmail
will run in the background.  
d236 2
a237 3
.BR \-bd .
.TP
.BI \-qI substr
d239 1
a239 1
.I substr
d241 1
a241 2
.TP
.BI \-qR substr
d243 1
a243 1
.I substr
d245 1
a245 2
.TP
.BI \-qS substr
d247 1
a247 1
.I substr
d249 2
a250 3
.TP
.BI "\-R " return
Set the amount of the message to be returned 
d253 6
a258 6
.I return
parameter can be 
`full' 
to return the entire message or 
`hdrs' 
to return only the headers.  
d260 1
a260 2
.TP
.BI \-r name
d262 1
a262 1
.B \-f
d264 3
a266 4
.TP
.B \-t
Read message for recipients.  
To:, Cc:, and Bcc: lines will be scanned for recipient addresses.  
d268 1
a268 2
.TP
.B \-U
d270 1
a270 1
.I always
d272 1
a272 1
.B Mail
d274 1
a274 1
.B exmh
d276 1
a276 1
.I never
d278 4
a281 5
.BR rmail .
.TP
.BI "\-V " envid
Set the original envelope id.  
This is propagated across SMTP to servers that support DSNs 
d283 2
a284 3
.TP
.B \-v
Go into verbose mode.  
d286 1
a286 2
.TP
.BI "\-X " logfile
d288 2
a289 2
This should only be used as a last resort 
for debugging mailer bugs.  
d291 5
a295 5
.TP
.B \-\-
Stop processing command flags and use the rest of the arguments as
addresses.
.SS Options
d297 2
a298 2
Normally these will only be used by a system administrator.  
Options may be set either on the command line 
d300 6
a305 5
.B \-o
flag (for short names), the
.B \-O
flag (for long names), 
or in the configuration file.  
d307 2
a308 2
on the command line 
and only shows the long names; 
d310 1
a310 1
.IR "Sendmail Installation and Operation Guide" .
d312 2
a313 2
.TP
.RI AliasFile= file
d315 3
a317 4
.TP
HoldExpensive 
On mailers that are considered ``expensive'' to connect to, 
don't initiate immediate connection.  
d319 1
a319 2
.TP
.RI CheckpointInterval= N
d321 4
a324 4
.I N
successful deliveries (default 10).  
This avoids excessive duplicate deliveries 
when sending to long mailing lists 
d327 1
a327 2
.TP
.RI DeliveryMode= x
d329 7
a335 7
.IR x .
Delivery modes are 
`i' 
for interactive (synchronous) delivery, 
`b'
for background (asynchronous) delivery, 
`q' 
d337 4
a340 4
actual delivery is done the next time the queue is run, and 
`d'
for deferred \- the same as 
`q' 
d343 1
a343 2
.TP
.RI ErrorMode= x
d345 5
a349 5
.IR x .
Valid modes are 
`m' 
to mail back the error message, 
`w' 
d351 13
a363 13
back the error message 
(or mail it back if the sender is not logged in), 
`p' 
to print the errors on the terminal 
(default), 
`q' 
to throw away error messages 
(only exit status is returned), 
and 
`e'
to do special processing for the BerkNet.  
If the text of the message is not mailed back 
by 
d365 1
a365 1
`m'
d367 2
a368 2
`w'
and if the sender is local to this machine, 
d370 1
a370 1
.I dead.letter
d372 1
a372 2
.TP
SaveFromLine
d374 1
a374 1
UNIX-style
d376 2
a377 3
.TP
.RI MaxHopCount= N
The maximum number of times a message is allowed to ``hop'' 
d379 2
a380 3
.TP
IgnoreDots
Do not take dots on a line by themselves 
d382 3
a384 4
.TP
SendMimeErrors
Send error messages in MIME format.  
If not set, the DSN (Delivery Status Notification) SMTP extension 
d386 1
a386 2
.TP
.RI ConnectionCacheTimeout= timeout
d388 1
a388 2
.TP
.RI ConnectionCacheSize= N
d390 1
a390 2
.TP
.RI LogLevel= n
d392 1
a392 2
.TP
.RI MeToo= False
d394 1
a394 2
.TP
CheckAliases
d396 1
a396 1
newaliases(1)
d398 7
a404 8
.TP
OldStyleHeaders
If set, this message may have 
old style headers.  
If not set, 
this message is guaranteed to have new style headers 
(i.e., commas instead of spaces between addresses).  
If set, an adaptive algorithm is used that will correctly 
d406 1
a406 2
.TP
.RI QueueDirectory= queuedir
d408 1
a408 2
.TP
.RI StatusFile= file
d410 6
a415 7
.TP
.RI Timeout.queuereturn= time
Set the timeout on undelivered messages in the queue to the specified time.  
After delivery has failed 
(e.g., because of a host being down) 
for this amount of time, 
failed messages will be returned to the sender.  
d417 1
a417 2
.TP
.RI UserDatabaseSpec= userdatabase
d419 3
a421 3
You can consider this an adjunct to the aliasing mechanism, 
except that the database is intended to be distributed; 
aliases are local to a particular host.  
d423 1
a423 1
USERDB
d425 2
a426 3
.TP
ForkEachJob
Fork each job during queue runs.  
d428 1
a428 2
.TP
SevenBitInput
d430 1
a430 2
.TP
.RI EightBitMode= mode
d432 2
a433 2
.IR mode :
m
d435 2
a436 2
p
(pass) will pass it as eight bits (but violates protocols), 
d438 1
a438 1
s
d440 1
a440 2
.TP
.RI MinQueueAge= timeout
d442 2
a443 3
.TP
.RI DefaultCharSet= charset
Sets the default character set used to label 8-bit data 
d445 2
a446 3
.TP
.RI DialDelay= sleeptime
If opening a connection fails, 
d448 2
a449 2
.I sleeptime
seconds and try again.  
d451 5
a455 6
.TP
.RI NoRecipientAction= action
Set the behaviour when there are no recipient headers (To:, Cc: or
Bcc:) in the message to
.IR action :
none
d457 1
a457 1
add-to
d459 1
a459 1
add-apparently-to
d461 1
a461 1
add-bcc
d463 1
a463 1
add-to-undisclosed
d465 2
a466 3
`To: undisclosed-recipients:;'.
.TP
.RI MaxDaemonChildren= N
d469 2
a470 3
.IR N .
.TP
.RI ConnectionRateThrottle= N
d472 9
a480 8
.IR N .
.PP
In aliases, 
the first character of a name may be 
a vertical bar to cause interpretation of 
the rest of the name as a command 
to pipe the mail to.  
It may be necessary to quote the name 
d482 2
a483 2
.B sendmail
from suppressing the blanks from between arguments. 
d485 2
a486 1
.IP
d488 2
a489 1
.PP
d491 1
a491 1
.RI ``:include: filename ''
d493 2
a494 2
.B sendmail
to read the named file for a list of recipients.  
d496 2
a497 1
.IP
d499 2
a500 1
.PP
d502 1
a502 1
.I /usr/local/lib/poets.list
d504 4
a507 4
.PP
.B Sendmail
returns an exit status 
describing what it did.  
d509 3
a511 3
.RI < sysexits.h >:
.TP
EX_OK
d513 1
a513 2
.TP
EX_NOUSER
d515 2
a516 3
.TP
EX_UNAVAILABLE
Catchall meaning necessary resources 
d518 1
a518 2
.TP
EX_SYNTAX
d520 2
a521 3
.TP
EX_SOFTWARE
Internal software error, 
d523 2
a524 3
.TP
EX_OSERR
Temporary operating system error, 
d526 2
a527 3
``cannot fork''.
.TP
EX_NOHOST
d529 2
a530 3
.TP
EX_TEMPFAIL
Message could not be sent immediately, 
d532 2
a533 1
.PP
d535 2
a536 2
.BR newaliases ,
.B sendmail
d538 2
a539 2
.BR mailq ,
.B sendmail
d542 2
a543 2
.BR hoststat ,
.B sendmail
d546 2
a547 2
.BR purgestat ,
.B sendmail
d550 2
a551 2
.BR smtpd ,
.B sendmail
d553 1
a553 1
.B \-bd
d555 2
a556 2
.SH NOTES
.B sendmail
d561 1
a561 1
.B sendmail
d566 1
a566 1
.BR DontBlameSendmail
d571 2
a572 2
.I http://www.sendmail.org/tips/DontBlameSendmail.html
.SH FILES
d574 1
a574 1
.I /etc/mail/sendmail.cf
d576 2
a577 2
.IR /etc/mail/sendmail.cf .
Thus, 
d579 3
a581 3
.PP
.TP
 /etc/mail/aliases
d583 1
a583 2
.TP
 /etc/mail/aliases.db
d585 1
a585 2
.TP
 /etc/mail/sendmail.cf
d587 1
a587 2
.TP
 /etc/mail/helpfile
d589 1
a589 2
.TP
 /etc/mail/statistics
d591 1
a591 2
.TP
 /var/spool/mqueue/*
d593 14
a606 10
.SH SEE ALSO
binmail(1),
mail(1),
rmail(1),
syslog(3),
aliases(5),
mailaddr(7),
rc(8)
.PP
DARPA 
d608 14
a621 8
.IR RFC819 ,
.IR RFC821 ,
.IR RFC822 .
.IR "Sendmail \- An Internetwork Mail Router" ,
No. 9, SMM.
.IR "Sendmail Installation and Operation Guide" ,
No. 8, SMM.
.PP
d623 1
a623 1
.SH HISTORY
d625 1
a625 1
.B sendmail
d627 1
a627 1
4.2BSD.
@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@stock sendmail 8.10.0 with $Id -> $Sendmail
@
text
@@


1.1.1.2
log
@sendmail 8.11.2
@
text
@d12 1
a12 1
.\"     $Id: sendmail.8,v 8.36.8.3 2000/12/14 23:08:15 gshapiro Exp $
d14 1
a14 1
.TH SENDMAIL 8 "$Date: 2000/12/14 23:08:15 $"
d16 1
a16 1
sendmail
a172 7
.BI \-G
Relay (gateway) submission of a message,
e.g., when
.BR rmail
calls
.B sendmail .
.TP
d675 2
@


1.1.1.3
log
@sendmail 8.12.0 with $Id tags converted to $Sendmail
@
text
@d1 1
a1 1
.\" Copyright (c) 1998-2001 Sendmail, Inc. and its suppliers.
d12 1
a12 1
.\"     $Sendmail: sendmail.8,v 8.49 2001/03/23 22:10:00 ca Exp $
d14 1
a14 1
.TH SENDMAIL 8 "$Date: 2001/03/23 22:10:00 $"
a69 8
.B \-Ac
Use submit.cf even if the operation mode does not indicate
an initial mail submission.
.TP
.B \-Am
Use sendmail.cf even if the operation mode indicates
an initial mail submission.
.TP
d116 1
a116 5
Print a listing of the queue(s).
.TP
.B \-bP
Print number of entries in the queue(s);
only available with shared memory support.
d240 1
a240 1
Process saved messages in the queue at given intervals.  
d250 1
a250 1
being minutes (default), 
d263 3
a265 1
By default,
d267 1
a267 1
will run in the background.
d271 1
a271 19
\fB\-qp\fR[\fItime\fR] 
Similar to \fB\-q\fItime\fR,
except that instead of periodically forking a child to process the queue,
sendmail forks a single persistent child for each queue
that alternates between processing the queue and sleeping.
The sleep time is given as the argument; it defaults to 1 second.
The process will always sleep at least 5 seconds if the queue was
empty in the previous queue run.
.TP
\fB\-q\fRf
Process saved messages in the queue once and do not fork(),
but run in the foreground.
.TP
\fB\-q\fRG name
Process jobs in queue group called
.I name
only.
.TP
\fB\-q\fR[\fI!\fR]I substr
d274 1
a274 3
as a substring of the queue id or not when
.I !
is specified.
d276 1
a276 1
\fB\-q\fR[\fI!\fR]R substr
d279 1
a279 3
as a substring of one of the recipients or not when
.I !
is specified.
d281 1
a281 1
\fB\-q\fR[\fI!\fR]S substr
d284 1
a284 3
as a substring of the sender or not when
.I !
is specified.
d307 12
@


