head	1.18;
access;
symbols
	OPENBSD_5_6:1.17.0.6
	OPENBSD_5_6_BASE:1.17
	OPENBSD_5_5:1.17.0.4
	OPENBSD_5_5_BASE:1.17
	OPENBSD_5_4:1.16.0.12
	OPENBSD_5_4_BASE:1.16
	OPENBSD_5_3:1.16.0.10
	OPENBSD_5_3_BASE:1.16
	OPENBSD_5_2:1.16.0.8
	OPENBSD_5_2_BASE:1.16
	OPENBSD_5_1_BASE:1.16
	OPENBSD_5_1:1.16.0.6
	OPENBSD_5_0:1.16.0.4
	OPENBSD_5_0_BASE:1.16
	OPENBSD_4_9:1.16.0.2
	OPENBSD_4_9_BASE:1.16
	OPENBSD_4_8:1.14.0.22
	OPENBSD_4_8_BASE:1.14
	OPENBSD_4_7:1.14.0.18
	OPENBSD_4_7_BASE:1.14
	OPENBSD_4_6:1.14.0.20
	OPENBSD_4_6_BASE:1.14
	OPENBSD_4_5:1.14.0.16
	OPENBSD_4_5_BASE:1.14
	OPENBSD_4_4:1.14.0.14
	OPENBSD_4_4_BASE:1.14
	OPENBSD_4_3:1.14.0.12
	OPENBSD_4_3_BASE:1.14
	OPENBSD_4_2:1.14.0.10
	OPENBSD_4_2_BASE:1.14
	OPENBSD_4_1:1.14.0.8
	OPENBSD_4_1_BASE:1.14
	OPENBSD_4_0:1.14.0.6
	OPENBSD_4_0_BASE:1.14
	OPENBSD_3_9:1.14.0.4
	OPENBSD_3_9_BASE:1.14
	OPENBSD_3_8:1.14.0.2
	OPENBSD_3_8_BASE:1.14
	OPENBSD_3_7:1.13.0.4
	OPENBSD_3_7_BASE:1.13
	OPENBSD_3_6:1.13.0.2
	OPENBSD_3_6_BASE:1.13
	OPENBSD_3_5:1.12.0.6
	OPENBSD_3_5_BASE:1.12
	OPENBSD_3_4:1.12.0.2
	OPENBSD_3_4_BASE:1.12
	OPENBSD_3_3:1.12.0.4
	OPENBSD_3_3_BASE:1.12
	OPENBSD_3_2:1.10.0.2
	OPENBSD_3_2_BASE:1.10
	OPENBSD_3_1:1.8.0.4
	OPENBSD_3_1_BASE:1.8
	OPENBSD_3_0:1.8.0.2
	OPENBSD_3_0_BASE:1.8
	SENDMAIL_8_12_0:1.1.1.3
	OPENBSD_2_9:1.6.0.2
	OPENBSD_2_9_BASE:1.6
	SENDMAIL_8_11_2:1.1.1.2
	OPENBSD_2_8:1.4.0.4
	OPENBSD_2_8_BASE:1.4
	OPENBSD_2_7:1.4.0.2
	OPENBSD_2_7_BASE:1.4
	SENDMAIL_8_10_0:1.1.1.1
	SENDMAIL_INC:1.1.1;
locks; strict;
comment	@.\" @;


1.18
date	2014.09.17.18.49.51;	author matthieu;	state dead;
branches;
next	1.17;
commitid	M7i5giHIoz3DMlTU;

1.17
date	2014.02.07.21.25.00;	author millert;	state Exp;
branches;
next	1.16;

1.16
date	2010.09.23.14.51.56;	author jmc;	state Exp;
branches;
next	1.15;

1.15
date	2010.09.23.14.40.45;	author jmc;	state Exp;
branches;
next	1.14;

1.14
date	2005.05.04.08.41.57;	author jmc;	state Exp;
branches;
next	1.13;

1.13
date	2004.06.24.03.59.26;	author millert;	state Exp;
branches;
next	1.12;

1.12
date	2003.03.07.17.42.26;	author jmc;	state Exp;
branches;
next	1.11;

1.11
date	2003.01.01.19.59.22;	author millert;	state Exp;
branches;
next	1.10;

1.10
date	2002.06.03.17.25.46;	author millert;	state Exp;
branches;
next	1.9;

1.9
date	2002.04.18.00.49.27;	author millert;	state Exp;
branches;
next	1.8;

1.8
date	2001.09.11.19.02.49;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	2001.05.29.01.31.13;	author millert;	state Exp;
branches;
next	1.6;

1.6
date	2001.03.01.20.20.39;	author millert;	state Exp;
branches
	1.6.2.1;
next	1.5;

1.5
date	2001.01.15.21.09.05;	author millert;	state Exp;
branches;
next	1.4;

1.4
date	2000.04.06.18.59.28;	author millert;	state Exp;
branches
	1.4.4.1;
next	1.3;

1.3
date	2000.04.06.18.35.59;	author millert;	state Exp;
branches;
next	1.2;

1.2
date	2000.04.04.04.50.13;	author millert;	state Exp;
branches;
next	1.1;

1.1
date	2000.04.02.19.05.42;	author millert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.04.02.19.05.42;	author millert;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2001.01.15.20.52.08;	author millert;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2001.09.11.18.55.49;	author millert;	state Exp;
branches;
next	;

1.4.4.1
date	2001.05.31.00.30.14;	author miod;	state Exp;
branches;
next	;

1.6.2.1
date	2001.05.31.01.47.54;	author jason;	state Exp;
branches;
next	;


desc
@@


1.18
log
@Bye.
@
text
@.\" Copyright (c) 1998-2002 Proofpoint, Inc. and its suppliers.
.\"
.\" Copyright (c) 1998-2002 Sendmail, Inc. and its suppliers.
.\"	All rights reserved.
.\"
.\" By using this file, you agree to the terms and conditions set
.\" forth in the LICENSE file which can be found at the top level of
.\" the sendmail distribution.
.\"
.\"
.\"	$Sendmail: mailstats.8,v 8.32 2013/11/22 20:51:51 ca Exp $
.\"
.Dd $Mdocdate: February 7 2014 $
.Dt MAILSTATS 8
.Os
.Sh NAME
.Nm mailstats
.Nd display mail statistics
.Sh SYNOPSIS
.Nm mailstats
.Op Fl c
.Op Fl o
.Op Fl p
.Op Fl P
.Op Fl C Ar cffile
.Op Fl f Ar stfile
.Sh DESCRIPTION
The
.Nm mailstats
utility displays the current mail statistics.
.Pp
First, the time at which statistics started being kept is displayed,
in the format specified by
.Xr ctime 3 .
Then,
the statistics for each mailer are displayed on a single line,
each with the following whitespace separated fields:
.Pp
.Bl -tag -width 10n -offset indent -compact
.It Sy M
The mailer number.
.It Sy msgsfr
Number of messages from the mailer.
.It Sy bytes_from
Kbytes from the mailer.
.It Sy msgsto
Number of messages to the mailer.
.It Sy bytes_to
Kbytes to the mailer.
.It Sy msgsrej
Number of messages rejected.
.It Sy msgsdis
Number of messages discarded.
.It Sy msgsqur
Number of messages quarantined.
.It Sy Mailer
The name of the mailer.
.El
.Pp
After this display, a line totaling the values for all of the mailers
is displayed (preceded with a
.Dq T ) ,
separated from the previous information by a line containing only equals
.Pq Dq \&=
characters.
Another line preceded with a
.Dq C
lists the number of TCP connections.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl C
Read the specified file instead of the default
.Nm sendmail
configuration file.
.It Fl c
Try to use submit.cf instead of the default
.Nm sendmail
configuration file.
.It Fl f
Read the specified statistics file instead of the statistics file
specified in the
.Nm sendmail
configuration file.
.It Fl p
Output information in program-readable mode and clear statistics.
.It Fl P
Output information in program-readable mode without clearing statistics.
.It Fl o
Don't display the name of the mailer in the output.
.El
.Sh FILES
.Bl -tag -width /var/log/sendmail.stXX -compact
.It Pa /etc/mail/sendmail.cf
The default
.Nm sendmail
.Dq cf
file.
.It Pa /var/log/sendmail.st
The default
.Nm sendmail
statistics file.
.El
.Sh EXIT STATUS
.Ex -std mailstats
.Sh SEE ALSO
.Xr mailq 8 ,
.Xr sendmail 8
@


1.17
log
@Update to sendmail 8.14.8.  This touches a lot of files due to the
Sendmail, Inc -> Proofpoint name change.  See RELEASE_NOTES for
actual changes.
@
text
@d13 1
a13 1
.Dd $Mdocdate: September 23 2010 $
@


1.16
log
@add RCSID and Mdocdate to these pages; ok millert
@
text
@d1 1
a1 1
.\" $OpenBSD$
d11 1
a11 1
.\"	$Sendmail: mailstats.8,v 8.31 2002/06/27 22:47:29 gshapiro Exp $
d13 1
a13 1
.Dd $Mdocdate$
@


1.15
log
@add EXIT STATUS here too;
@
text
@d1 2
d13 1
a13 1
.Dd September 26, 2002
@


1.14
log
@this is a section 8 page, not section 1: correct .Dt
ok millert@@
@
text
@a89 4
.Pp
The
.Nm mailstats
utility exits 0 on success, and >0 if an error occurs.
d102 2
@


1.13
log
@Update to sendmail.8.13.0
@
text
@d12 1
a12 1
.Dt MAILSTATS 1
@


1.12
log
@.Xr typos;

ok millert@@
@
text
@d9 1
a9 1
.\"	$Sendmail: mailstats.8,v 8.30.2.1 2002/09/26 23:03:39 gshapiro Exp $
d52 2
@


1.11
log
@update to sendmail 8.12.7
@
text
@d105 1
a105 1
.Xr mailq 1 ,
@


1.10
log
@Update to sendmail-8.12.4
@
text
@d9 1
a9 1
.\"	$Sendmail: mailstats.8,v 8.30 2002/04/12 00:42:33 ca Exp $
d11 1
a11 1
.Dd April 12, 2002
@


1.9
log
@update to sendmail 8.12.3
@
text
@d9 1
a9 1
.\"	$Sendmail: mailstats.8,v 8.28 2002/03/19 00:23:23 gshapiro Exp $
d11 1
a11 1
.Dd April 18, 2001
d19 1
d70 4
@


1.8
log
@merge in sendmail 8.12.0 with BSD Makefiles and mdoc man pages
@
text
@d1 1
a1 1
.\" Copyright (c) 1998-2001 Sendmail, Inc. and its suppliers.
d9 1
a9 1
.\"	$Sendmail: mailstats.8,v 8.25 2001/04/18 04:53:31 gshapiro Exp $
d63 1
a63 1
lists the number of connections.
@


1.7
log
@Update to sendmail 8.11.4:
    8.11.4 revamps signal handling within the MTA in order to reduce
    the likelihood of a race condition that can lead to heap
    corruption as described in Michal Zalewski's advisory.  The
    problems discussed in the advisory are not currently known to
    be exploitable but we recommend upgrading to 8.11.4 in case a
    method is found to exploit the signal handling race condition.
    8.11.4 also fixes other bugs found since the release of 8.11.3.

See the RELEASE_NOTES file for more details.
@
text
@d9 1
a9 1
.\"	$Sendmail: mailstats.8,v 8.17.4.6 2001/05/07 22:06:38 gshapiro Exp $
d11 1
a11 1
.Dd May 7, 2001
d21 1
d78 2
@


1.6
log
@Fix typo (aaron) and pull in a missing part from the -man version.
@
text
@d1 1
a1 1
.\" Copyright (c) 1998 Sendmail, Inc. and its suppliers.
d9 1
a9 1
.\"	$Sendmail: mailstats.8,v 8.17.4.3 2000/12/29 18:12:20 gshapiro Exp $
d11 1
a11 1
.Dd December 29, 2000
@


1.6.2.1
log
@Pull in patch from current:
Fix (millert), Errata 001:
Update to sendmail 8.11.4:
    8.11.4 revamps signal handling within the MTA in order to reduce
    the likelihood of a race condition that can lead to heap
    corruption as described in Michal Zalewski's advisory.  The
    problems discussed in the advisory are not currently known to
    be exploitable but we recommend upgrading to 8.11.4 in case a
    method is found to exploit the signal handling race condition.
    8.11.4 also fixes other bugs found since the release of 8.11.3.

See the RELEASE_NOTES file for more details.
@
text
@d1 1
a1 1
.\" Copyright (c) 1998-2001 Sendmail, Inc. and its suppliers.
d9 1
a9 1
.\"	$Sendmail: mailstats.8,v 8.17.4.6 2001/05/07 22:06:38 gshapiro Exp $
d11 1
a11 1
.Dd May 7, 2001
@


1.5
log
@sendmail 8.11.2 with BSD Makefiles
@
text
@d55 2
a56 1
is displayed,
d60 1
a60 1
Another line preceeded with a
@


1.4
log
@Back out last change, I changed my mind...
@
text
@d9 1
a9 1
.\"	$Sendmail: mailstats.8,v 8.16 2000/02/01 05:49:53 gshapiro Exp $
d11 1
a11 1
.Dd April 25, 1996
d68 1
a68 2
.Dq cf
file.
d73 1
a73 2
.Dq cf
file.
@


1.4.4.1
log
@Pull in patch from current:
Errata(028):
The signal handlers in sendmail contain code that is unsafe in the
context of a signal handler.  This leads to potentially serious race
conditions.  At the moment this is a theoretical attack only and can
only be exploited on the local host (if at all).
Fix(millert):
Update to sendmail 8.11.4:
8.11.4 revamps signal handling within the MTA in order to reduce
the likelihood of a race condition that can lead to heap
corruption as described in Michal Zalewski's advisory.  The
problems discussed in the advisory are not currently known to
be exploitable but we recommend upgrading to 8.11.4 in case a
method is found to exploit the signal handling race condition.
8.11.4 also fixes other bugs found since the release of 8.11.3.

See the RELEASE_NOTES file for more details.
@
text
@d1 1
a1 1
.\" Copyright (c) 1998-2001 Sendmail, Inc. and its suppliers.
d9 1
a9 1
.\"	$Sendmail: mailstats.8,v 8.17.4.6 2001/05/07 22:06:38 gshapiro Exp $
d11 1
a11 1
.Dd May 7, 2001
d55 1
a55 2
is displayed (preceded with a
.Dq T ) ,
d59 1
a59 1
Another line preceded with a
d68 2
a69 1
configuration file.
d74 2
a75 1
configuration file.
@


1.3
log
@Use /etc/mail/statistics not /var/log/sendmail.st by default.
@
text
@d86 1
a86 1
.Bl -tag -width /etc/mail/statisticsXX -compact
d92 1
a92 1
.It Pa /etc/mail/statistics
@


1.2
log
@Add MLINKs from sendmail.8 to smtpd.8, hoststat.1, purgestat.1
Convert man pages back to mandoc format.
@
text
@d86 1
a86 1
.Bl -tag -width /var/log/sendmail.stXX -compact
d92 1
a92 1
.It Pa /var/log/sendmail.st
@


1.1
log
@Initial revision
@
text
@d1 2
a2 2
.\" Copyright (c) 1998-2000 Sendmail, Inc. and its suppliers.
.\"	 All rights reserved.
d11 13
a23 12
.TH MAILSTATS 1 "April 25, 1996"
.SH NAME
.B mailstats
\- display mail statistics
.SH SYNOPSIS
.B mailstats
.RB [ \-o "] [" \-p ]
.RB [ \-C 
.IR cffile ]
.RB [ \-f
.IR stfile ]
.SH DESCRIPTION
d25 1
a25 1
.B mailstats
d27 1
a27 1
.PP
d29 4
a32 4
in the format specified by 
ctime(3).  
Then, 
the statistics for each mailer are displayed on a single line, 
d34 3
a36 5
.sp
.RS
.PD 0.2v
.TP 1.2i
.B M
d38 1
a38 2
.TP 
.B msgsfr
d40 1
a40 2
.TP
.B bytes_from
d42 1
a42 2
.TP
.B msgsto
d44 1
a44 2
.TP
.B bytes_to
d46 1
a46 2
.TP
.B msgsrej
d48 1
a48 2
.TP
.B msgsdis
d50 1
a50 2
.TP
.B Mailer
d52 6
a57 7
.PD
.RE
.PP
After this display, a line totaling the values for all of the mailers 
is displayed (preceeded with a ``T''),
separated from the previous information by a line containing only equals 
(``='') 
d59 4
a62 2
Another line preceeded with a ``C'' lists the number of connections.
.PP
d64 2
a65 2
.TP 
.B \-C
d67 4
a70 4
.B sendmail
``cf'' file.
.TP
.B \-f
d73 4
a76 4
.B sendmail 
``cf'' file.
.TP 
.B \-p
d78 1
a78 2
.TP
.B \-o
d80 2
a81 1
.PP
d83 1
a83 1
.B mailstats
d85 3
a87 4
.SH FILES
.PD 0.2v
.TP 2.5i
/etc/mail/sendmail.cf
d89 4
a92 4
.B sendmail
``cf'' file.
.TP
/etc/mail/statistics
d94 1
a94 1
.B sendmail
d96 4
a99 4
.PD
.SH SEE ALSO
mailq(1), 
sendmail(8)
@


1.1.1.1
log
@stock sendmail 8.10.0 with $Id -> $Sendmail
@
text
@@


1.1.1.2
log
@sendmail 8.11.2
@
text
@d9 1
a9 1
.\"	$Id: mailstats.8,v 8.17.4.3 2000/12/29 18:12:20 gshapiro Exp $
d11 1
a11 1
.TH MAILSTATS 1 "$Date: 2000/12/29 18:12:20 $"
d13 1
a13 1
mailstats
d32 1
a32 1
each with the following white space separated fields:
d75 1
a75 1
configuration file.
d81 1
a81 1
configuration file.
d98 1
a98 1
configuration file.
@


1.1.1.3
log
@sendmail 8.12.0 with $Id tags converted to $Sendmail
@
text
@d1 1
a1 1
.\" Copyright (c) 1998-2001 Sendmail, Inc. and its suppliers.
d9 1
a9 1
.\"	$Sendmail: mailstats.8,v 8.25 2001/04/18 04:53:31 gshapiro Exp $
d11 1
a11 1
.TH MAILSTATS 8 "$Date: 2001/04/18 04:53:31 $"
d17 1
a17 1
.RB [ \-o "] [" \-p "] [" \-P ]
d64 1
a64 1
is displayed (preceded with a ``T''),
d68 1
a68 1
Another line preceded with a ``C'' lists the number of connections.
a82 3
.B \-P
Output information in program-readable mode without clearing statistics.
.TP
@


