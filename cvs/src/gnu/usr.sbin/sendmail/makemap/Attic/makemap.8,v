head	1.14;
access;
symbols
	OPENBSD_5_6:1.13.0.6
	OPENBSD_5_6_BASE:1.13
	OPENBSD_5_5:1.13.0.4
	OPENBSD_5_5_BASE:1.13
	OPENBSD_5_4:1.12.0.12
	OPENBSD_5_4_BASE:1.12
	OPENBSD_5_3:1.12.0.10
	OPENBSD_5_3_BASE:1.12
	OPENBSD_5_2:1.12.0.8
	OPENBSD_5_2_BASE:1.12
	OPENBSD_5_1_BASE:1.12
	OPENBSD_5_1:1.12.0.6
	OPENBSD_5_0:1.12.0.4
	OPENBSD_5_0_BASE:1.12
	OPENBSD_4_9:1.12.0.2
	OPENBSD_4_9_BASE:1.12
	OPENBSD_4_8:1.11.0.10
	OPENBSD_4_8_BASE:1.11
	OPENBSD_4_7:1.11.0.6
	OPENBSD_4_7_BASE:1.11
	OPENBSD_4_6:1.11.0.8
	OPENBSD_4_6_BASE:1.11
	OPENBSD_4_5:1.11.0.4
	OPENBSD_4_5_BASE:1.11
	OPENBSD_4_4:1.11.0.2
	OPENBSD_4_4_BASE:1.11
	OPENBSD_4_3:1.10.0.16
	OPENBSD_4_3_BASE:1.10
	OPENBSD_4_2:1.10.0.14
	OPENBSD_4_2_BASE:1.10
	OPENBSD_4_1:1.10.0.12
	OPENBSD_4_1_BASE:1.10
	OPENBSD_4_0:1.10.0.10
	OPENBSD_4_0_BASE:1.10
	OPENBSD_3_9:1.10.0.8
	OPENBSD_3_9_BASE:1.10
	OPENBSD_3_8:1.10.0.6
	OPENBSD_3_8_BASE:1.10
	OPENBSD_3_7:1.10.0.4
	OPENBSD_3_7_BASE:1.10
	OPENBSD_3_6:1.10.0.2
	OPENBSD_3_6_BASE:1.10
	OPENBSD_3_5:1.9.0.4
	OPENBSD_3_5_BASE:1.9
	OPENBSD_3_4:1.9.0.2
	OPENBSD_3_4_BASE:1.9
	OPENBSD_3_3:1.8.0.8
	OPENBSD_3_3_BASE:1.8
	OPENBSD_3_2:1.8.0.4
	OPENBSD_3_2_BASE:1.8
	OPENBSD_3_1:1.8.0.2
	OPENBSD_3_1_BASE:1.8
	OPENBSD_3_0:1.7.0.2
	OPENBSD_3_0_BASE:1.7
	SENDMAIL_8_12_0:1.1.1.3
	OPENBSD_2_9:1.4.0.2
	OPENBSD_2_9_BASE:1.4
	SENDMAIL_8_11_2:1.1.1.2
	OPENBSD_2_8:1.2.0.4
	OPENBSD_2_8_BASE:1.2
	OPENBSD_2_7:1.2.0.2
	OPENBSD_2_7_BASE:1.2
	SENDMAIL_8_10_0:1.1.1.1
	SENDMAIL_INC:1.1.1;
locks; strict;
comment	@.\" @;


1.14
date	2014.09.17.18.49.51;	author matthieu;	state dead;
branches;
next	1.13;
commitid	M7i5giHIoz3DMlTU;

1.13
date	2014.02.07.21.25.00;	author millert;	state Exp;
branches;
next	1.12;

1.12
date	2010.09.23.14.51.57;	author jmc;	state Exp;
branches;
next	1.11;

1.11
date	2008.05.04.18.34.05;	author millert;	state Exp;
branches;
next	1.10;

1.10
date	2004.06.24.03.59.26;	author millert;	state Exp;
branches;
next	1.9;

1.9
date	2003.08.06.08.19.45;	author jmc;	state Exp;
branches;
next	1.8;

1.8
date	2002.01.14.03.21.40;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	2001.09.18.06.58.26;	author mpech;	state Exp;
branches;
next	1.6;

1.6
date	2001.09.12.16.40.39;	author millert;	state Exp;
branches;
next	1.5;

1.5
date	2001.09.11.19.02.49;	author millert;	state Exp;
branches;
next	1.4;

1.4
date	2001.01.17.04.57.56;	author millert;	state Exp;
branches;
next	1.3;

1.3
date	2001.01.15.21.09.05;	author millert;	state Exp;
branches;
next	1.2;

1.2
date	2000.04.04.04.50.14;	author millert;	state Exp;
branches
	1.2.4.1;
next	1.1;

1.1
date	2000.04.02.19.05.42;	author millert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.04.02.19.05.42;	author millert;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2001.01.15.20.52.09;	author millert;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2001.09.11.18.55.49;	author millert;	state Exp;
branches;
next	;

1.2.4.1
date	2001.05.31.00.30.26;	author miod;	state Exp;
branches;
next	;


desc
@@


1.14
log
@Bye.
@
text
@.\" Copyright (c) 1998-2002 Proofpoint, Inc. and its suppliers.
.\"
.\" Copyright (c) 1998-2002 Sendmail, Inc. and its suppliers.
.\"	All rights reserved.
.\" Copyright (c) 1988, 1991, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" By using this file, you agree to the terms and conditions set
.\" forth in the LICENSE file which can be found at the top level of
.\" the sendmail distribution.
.\"
.\"
.\"     $Sendmail: aliases.5,v 8.20 2013/11/22 20:51:55 ca Exp $
.\"
.Dd $Mdocdate: February 7 2014 $
.Dt MAKEMAP 8
.Os
.Sh NAME
.Nm makemap
.Nd create database maps for sendmail
.Sh SYNOPSIS
.Nm makemap
.Op Fl C Ar file
.Op Fl N
.Op Fl c Ar cachesize
.Op Fl D Ar commentchar
.Op Fl d
.Op Fl e
.Op Fl f
.Op Fl l
.Op Fl o
.Op Fl r
.Op Fl s
.Op Fl t Ar delim
.Op Fl u
.Op Fl v
.Ar maptype
.Ar mapname
.Sh DESCRIPTION
.Nm
creates the database maps used by the keyed map lookups in
.Xr sendmail 8 .
It reads input from the standard input
and outputs them to the indicated
.Ar mapname .
.Pp
Depending on how it is compiled,
.Nm
handles up to three different database formats,
selected using the
.Ar maptype
parameter.
They may be
.Bl -tag -width Fl
.It Li dbm
DBM format maps.
This requires the
.Xr ndbm 3
library.
.It Li btree
B-Tree format maps.
This requires the new Berkeley DB
library.
.It Li hash
Hash format maps.
This also requires the Berkeley DB
library.
.El
.Pp
In all cases,
.Nm
reads lines from the standard input consisting of two
words separated by whitespace.
The first is the database key,
the second is the value.
The value may contain
``%\fIn\fP''
strings to indicated parameter substitution.
Literal percents should be doubled
(``%%'').
Blank lines and lines beginning with ``#'' are ignored.
.Pp
Notice: do
.Em not
use
.Nm
to create the aliases data base, but
.Xr newaliases 8
which puts a special token into the data base that is required by
.Xr sendmail 8 .
.Pp
If the
.Li TrustedUser
option is set in the sendmail configuration file and
.Nm
is invoked as root, the generated files will be owned by
the specified
.Li TrustedUser .
.Ss Flags
.Bl -tag -width Fl
.It Fl C Ar file
Use the specified
.Xr sendmail 8
configuration
.Ar file
for looking up the
.Li TrustedUser
option.
.It Fl N
Include the null byte that terminates strings
in the map.
This must match the
.Fl N
flag in the sendmail.cf
.Dq K
line.
.It Fl c
Use the specified hash and B-Tree cache size.
.It Fl D
Use to specify the character to use to indicate a comment (which is ignored)
instead of the default of
.Sq # .
.It Fl d
Allow duplicate keys in the map.
This is only allowed on B-Tree format maps.
If two identical keys are read,
they will both be inserted into the map.
.It Fl e
Allow empty value (right hand side).
.It Fl f
Normally all upper case letters in the key
are folded to lower case.
This flag disables that behaviour.
This is intended to mesh with the
.Fl f
flag in the
.Dq K
line in sendmail.cf.
The value is never case folded.
.It Fl l
List supported map types.
.It Fl o
Append to an old file.
This allows you to augment an existing file.
.It Fl r
Allow replacement of existing keys.
Normally
.Nm
complains if you repeat a key,
and does not do the insert.
.It Fl s
Ignore safety checks on maps being created.
This includes checking for hard or symbolic
links in world writable directories.
.It Fl t
Use the specified delimiter instead of white space
(also for dumping a map).
.It Fl u
dump (unmap) the content of the database to standard output.
.It Fl v
Verbosely print what it is doing.
.El
.Sh SEE ALSO
.Xr editmap 8 ,
.Xr newaliases 8 ,
.Xr sendmail 8
.Sh HISTORY
The
.Nm
command appeared in
.Bx 4.4 .
@


1.13
log
@Update to sendmail 8.14.8.  This touches a lot of files due to the
Sendmail, Inc -> Proofpoint name change.  See RELEASE_NOTES for
actual changes.
@
text
@d15 1
a15 1
.Dd $Mdocdate: September 23 2010 $
@


1.12
log
@add RCSID and Mdocdate to these pages; ok millert
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d13 1
a13 1
.\"     $Sendmail: makemap.8,v 8.31 2008/05/02 23:07:48 ca Exp $
d15 1
a15 1
.Dd $Mdocdate$
@


1.11
log
@Update to sendmail-8.14.3
@
text
@d1 2
d15 1
a15 1
.Dd May 2, 2008
@


1.10
log
@Update to sendmail.8.13.0
@
text
@d11 1
a11 1
.\"     $Sendmail: makemap.8,v 8.30 2002/06/27 23:41:04 gshapiro Exp $
d13 1
a13 1
.Dd October 10, 2001
d154 2
a155 1
Use the specified delimiter instead of white space.
@


1.9
log
@small cleanup;
ok millert@@
@
text
@d1 1
a1 1
.\" Copyright (c) 1998-2001 Sendmail, Inc. and its suppliers.
d11 1
a11 1
.\"     $Sendmail: makemap.8,v 8.29 2001/10/10 03:23:02 ca Exp $
d24 1
d117 4
@


1.8
log
@update to sendmail-8.12.2
@
text
@d93 1
a93 1
is invoked as root, the generated files will be owned by 
@


1.7
log
@add reference to editmap(8).

millert@@ ok
@
text
@d1 1
a1 1
.\" Copyright (c) 1998, 1999 Sendmail, Inc. and its suppliers.
d11 1
a11 1
.\"     $Sendmail: makemap.8,v 8.27 2000/12/29 18:16:55 gshapiro Exp $
d13 1
a13 1
.Dd December 29, 2000
d80 9
d157 1
@


1.6
log
@better mdoc style
@
text
@d147 1
@


1.5
log
@merge in sendmail 8.12.0 with BSD Makefiles and mdoc man pages
@
text
@d86 1
a86 1
.Li TrustedUser.
d91 1
a91 1
.Nm
d94 3
a96 1
for looking up the TrustedUser option.
d100 5
a104 2
This must match the \-N flag in the sendmail.cf
``K'' line.
d119 3
a121 2
\-f flag in the
\fBK\fP
@


1.4
log
@fix speling of December
@
text
@d11 1
a11 1
.\"     $Sendmail: makemap.8,v 8.21.16.5 2000/12/29 18:12:20 gshapiro Exp $
d31 1
d133 2
@


1.3
log
@sendmail 8.11.2 with BSD Makefiles
@
text
@d13 1
a13 1
.Dd Decembe 29, 2000
@


1.2
log
@Add MLINKs from sendmail.8 to smtpd.8, hoststat.1, purgestat.1
Convert man pages back to mandoc format.
@
text
@d11 1
a11 1
.\"     $Sendmail: makemap.8,v 8.21 1999/07/30 06:15:31 gshapiro Exp $
d13 1
a13 1
.Dd November 16, 1992
d89 3
a91 1
Use the specified sendmail configuration
@


1.2.4.1
log
@Pull in patch from current:
Errata(028):
The signal handlers in sendmail contain code that is unsafe in the
context of a signal handler.  This leads to potentially serious race
conditions.  At the moment this is a theoretical attack only and can
only be exploited on the local host (if at all).
Fix(millert):
Update to sendmail 8.11.4:
8.11.4 revamps signal handling within the MTA in order to reduce
the likelihood of a race condition that can lead to heap
corruption as described in Michal Zalewski's advisory.  The
problems discussed in the advisory are not currently known to
be exploitable but we recommend upgrading to 8.11.4 in case a
method is found to exploit the signal handling race condition.
8.11.4 also fixes other bugs found since the release of 8.11.3.

See the RELEASE_NOTES file for more details.
@
text
@d11 1
a11 1
.\"     $Sendmail: makemap.8,v 8.21.16.5 2000/12/29 18:12:20 gshapiro Exp $
d13 1
a13 1
.Dd December 29, 2000
d89 1
a89 3
Use the specified
.Nm
configuration
@


1.1
log
@Initial revision
@
text
@d2 1
a2 1
.\"	 All rights reserved.
d13 24
a36 16
.TH MAKEMAP 8 "November 16, 1992"
.SH NAME
.B makemap
\- create database maps for sendmail
.SH SYNOPSIS
.B makemap
.RB [ \-C
.IR file ]
.RB [ \-N ]
.RB [ \-c
.IR cachesize ]
.RB [ \-d "] [" \-e "] [" \-f "] [" \-l "] [" \-o "] [" \-r "] [" \-s "] [" \-u "] [" \-v ]
.I 
maptype mapnam
.SH DESCRIPTION
.B Makemap
d38 1
a38 1
sendmail(8).  
d41 2
a42 2
.I mapname.
.PP
d44 2
a45 2
.B makemap
handles up to three different database formats, 
d47 2
a48 2
.I maptype
parameter.  
d50 5
a54 5
.TP
dbm
DBM format maps.  
This requires the 
ndbm(3) 
d56 3
a58 4
.TP
btree
B-Tree format maps.  
This requires the new Berkeley DB 
d60 3
a62 4
.TP
hash
Hash format maps.  
This also requires the Berkeley DB 
d64 2
a65 1
.PP
d67 9
a75 9
.B makemap
reads lines from the standard input consisting of two 
words separated by white space.  
The first is the database key, 
the second is the value.  
The value may contain 
``%\fIn\fP'' 
strings to indicate parameter substitution.  
Literal percents should be doubled 
d78 1
a78 1
.PP
d80 1
a80 1
.I TrustedUser
d82 1
a82 1
.B makemap
d85 11
a95 11
.IR TrustedUser.
.SS Flags
.TP  
.B \-C
Use the specified sendmail configuration file for 
looking up the TrustedUser option.
.TP 
.B \-N
Include the null byte that terminates strings 
in the map.  
This must match the \-N flag in the sendmail.cf 
d97 1
a97 2
.TP
.B \-c
d99 4
a102 5
.TP
.B \-d
Allow duplicate keys in the map.  
This is only allowed on B-Tree format maps.  
If two identical keys are read, 
d104 1
a104 2
.TP
.B \-e
d106 8
a113 9
.TP
.B \-f
Normally all upper case letters in the key 
are folded to lower case.  
This flag disables that behaviour.  
This is intended to mesh with the 
\-f flag in the 
.B K 
line in sendmail.cf.  
d115 1
a115 2
.TP
.B \-l
d117 2
a118 3
.TP
.B \-o
Append to an old file.  
d120 2
a121 3
.TP
.B \-r
Allow replacement of existing keys.  
d123 2
a124 2
.B makemap
complains if you repeat a key, 
d126 3
a128 4
.TP
.B \-s
Ignore safety checks on maps being created.  
This includes checking for hard or symbolic 
d130 1
a130 2
.TP
.B \-u
d132 1
a132 2
.TP
.B \-v
d134 4
a137 3
.SH SEE ALSO
sendmail(8)
.SH HISTORY
d139 3
a141 3
.B makemap
command appeared in 
4.4BSD.
@


1.1.1.1
log
@stock sendmail 8.10.0 with $Id -> $Sendmail
@
text
@@


1.1.1.2
log
@sendmail 8.11.2
@
text
@d1 1
a1 1
.\" Copyright (c) 1998-2000 Sendmail, Inc. and its suppliers.
d11 1
a11 1
.\"     $Id: makemap.8,v 8.21.16.5 2000/12/29 18:12:20 gshapiro Exp $
d13 1
a13 1
.TH MAKEMAP 8 "$Date: 2000/12/29 18:12:20 $"
d15 1
a15 1
makemap
d24 1
a24 9
.RB [ \-d ]
.RB [ \-e ]
.RB [ \-f ]
.RB [ \-l ]
.RB [ \-o ]
.RB [ \-r ]
.RB [ \-s ]
.RB [ \-u ]
.RB [ \-v ]
d82 2
a83 3
Use the specified
.B sendmail
configuration file for looking up the TrustedUser option.
@


1.1.1.3
log
@sendmail 8.12.0 with $Id tags converted to $Sendmail
@
text
@d11 1
a11 1
.\"     $Sendmail: makemap.8,v 8.27 2000/12/29 18:16:55 gshapiro Exp $
d13 1
a13 1
.TH MAKEMAP 8 "$Date: 2000/12/29 18:16:55 $"
a30 2
.RB [ \-t
.IR delim ]
a139 3
.TP
.B \-t
Use the specified delimiter instead of white space.
@


