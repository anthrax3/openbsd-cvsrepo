head	1.28;
access;
symbols
	OPENBSD_5_6:1.27.0.10
	OPENBSD_5_6_BASE:1.27
	OPENBSD_5_5:1.27.0.8
	OPENBSD_5_5_BASE:1.27
	OPENBSD_5_4:1.27.0.4
	OPENBSD_5_4_BASE:1.27
	OPENBSD_5_3:1.27.0.2
	OPENBSD_5_3_BASE:1.27
	OPENBSD_5_2:1.26.0.2
	OPENBSD_5_2_BASE:1.26
	OPENBSD_5_1_BASE:1.24
	OPENBSD_5_1:1.24.0.14
	OPENBSD_5_0:1.24.0.12
	OPENBSD_5_0_BASE:1.24
	OPENBSD_4_9:1.24.0.10
	OPENBSD_4_9_BASE:1.24
	OPENBSD_4_8:1.24.0.8
	OPENBSD_4_8_BASE:1.24
	OPENBSD_4_7:1.24.0.4
	OPENBSD_4_7_BASE:1.24
	OPENBSD_4_6:1.24.0.6
	OPENBSD_4_6_BASE:1.24
	OPENBSD_4_5:1.24.0.2
	OPENBSD_4_5_BASE:1.24
	OPENBSD_4_4:1.23.0.2
	OPENBSD_4_4_BASE:1.23
	OPENBSD_4_3:1.22.0.8
	OPENBSD_4_3_BASE:1.22
	OPENBSD_4_2:1.22.0.6
	OPENBSD_4_2_BASE:1.22
	OPENBSD_4_1:1.22.0.4
	OPENBSD_4_1_BASE:1.22
	OPENBSD_4_0:1.22.0.2
	OPENBSD_4_0_BASE:1.22
	OPENBSD_3_9:1.21.0.6
	OPENBSD_3_9_BASE:1.21
	OPENBSD_3_8:1.21.0.4
	OPENBSD_3_8_BASE:1.21
	OPENBSD_3_7:1.21.0.2
	OPENBSD_3_7_BASE:1.21
	OPENBSD_3_6:1.20.0.2
	OPENBSD_3_6_BASE:1.20
	OPENBSD_3_5:1.19.0.4
	OPENBSD_3_5_BASE:1.19
	OPENBSD_3_4:1.19.0.2
	OPENBSD_3_4_BASE:1.19
	OPENBSD_3_3:1.18.0.6
	OPENBSD_3_3_BASE:1.18
	OPENBSD_3_2:1.18.0.2
	OPENBSD_3_2_BASE:1.18
	OPENBSD_3_1:1.17.0.2
	OPENBSD_3_1_BASE:1.17
	OPENBSD_3_0:1.14.0.2
	OPENBSD_3_0_BASE:1.14
	SENDMAIL_8_12_0:1.1.1.3
	OPENBSD_2_9:1.9.0.2
	OPENBSD_2_9_BASE:1.9
	SENDMAIL_8_11_2:1.1.1.2
	OPENBSD_2_8:1.6.0.2
	OPENBSD_2_8_BASE:1.6
	OPENBSD_2_7:1.4.0.2
	OPENBSD_2_7_BASE:1.4
	SENDMAIL_8_10_0:1.1.1.1
	SENDMAIL_INC:1.1.1;
locks; strict;
comment	@# @;


1.28
date	2014.09.17.18.49.49;	author matthieu;	state dead;
branches;
next	1.27;
commitid	M7i5giHIoz3DMlTU;

1.27
date	2013.01.13.20.47.05;	author millert;	state Exp;
branches;
next	1.26;

1.26
date	2012.04.12.12.13.18;	author kurt;	state Exp;
branches;
next	1.25;

1.25
date	2012.04.12.12.09.30;	author kurt;	state Exp;
branches;
next	1.24;

1.24
date	2008.10.03.16.29.05;	author millert;	state Exp;
branches;
next	1.23;

1.23
date	2008.06.09.15.40.21;	author pyr;	state Exp;
branches;
next	1.22;

1.22
date	2006.03.22.18.43.53;	author millert;	state Exp;
branches;
next	1.21;

1.21
date	2004.12.16.00.21.29;	author millert;	state Exp;
branches;
next	1.20;

1.20
date	2004.06.24.03.59.24;	author millert;	state Exp;
branches;
next	1.19;

1.19
date	2003.06.12.01.05.14;	author millert;	state Exp;
branches;
next	1.18;

1.18
date	2002.07.03.16.08.27;	author millert;	state Exp;
branches;
next	1.17;

1.17
date	2002.01.14.03.21.39;	author millert;	state Exp;
branches;
next	1.16;

1.16
date	2002.01.09.23.41.13;	author lebel;	state Exp;
branches;
next	1.15;

1.15
date	2002.01.09.17.59.02;	author tholo;	state Exp;
branches;
next	1.14;

1.14
date	2001.09.29.15.22.27;	author millert;	state Exp;
branches;
next	1.13;

1.13
date	2001.09.25.20.23.41;	author niklas;	state Exp;
branches;
next	1.12;

1.12
date	2001.09.12.16.15.38;	author millert;	state Exp;
branches;
next	1.11;

1.11
date	2001.09.11.19.02.48;	author millert;	state Exp;
branches;
next	1.10;

1.10
date	2001.05.29.01.31.11;	author millert;	state Exp;
branches;
next	1.9;

1.9
date	2001.02.02.06.41.18;	author tholo;	state Exp;
branches
	1.9.2.1;
next	1.8;

1.8
date	2001.01.16.01.38.37;	author itojun;	state Exp;
branches;
next	1.7;

1.7
date	2001.01.15.21.08.51;	author millert;	state Exp;
branches;
next	1.6;

1.6
date	2000.06.18.03.13.08;	author itojun;	state Exp;
branches
	1.6.2.1;
next	1.5;

1.5
date	2000.06.18.00.14.40;	author itojun;	state Exp;
branches;
next	1.4;

1.4
date	2000.04.02.21.12.29;	author millert;	state Exp;
branches;
next	1.3;

1.3
date	2000.04.02.21.11.43;	author millert;	state Exp;
branches;
next	1.2;

1.2
date	2000.04.02.19.48.11;	author millert;	state Exp;
branches;
next	1.1;

1.1
date	2000.04.02.19.05.50;	author millert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.04.02.19.05.50;	author millert;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2001.01.15.20.52.21;	author millert;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2001.09.11.18.55.51;	author millert;	state Exp;
branches;
next	;

1.6.2.1
date	2001.05.31.00.12.42;	author miod;	state Exp;
branches;
next	;

1.9.2.1
date	2001.05.31.01.47.51;	author jason;	state Exp;
branches;
next	;


desc
@@


1.28
log
@Bye.
@
text
@#	$OpenBSD: Makefile,v 1.27 2013/01/13 20:47:05 millert Exp $
#
#  Makefile for configuration files.
#
#	$Sendmail: Makefile,v 8.60 2005/06/14 02:16:34 gshapiro Exp $
#

#
#  Create configuration files using "m4 ../m4/cf.m4 file.mc > file.cf";
#  this may be easier than tweaking the Makefile.  You do need to
#  have a fairly modern M4 available (GNU m4 works).  On SunOS, use
#  /usr/5bin/m4.
#

M4=	/usr/bin/m4
CFDIR=	${.CURDIR}/..
SED=	sed
ECHO=	echo
CHMOD=	chmod
ROMODE=	444
RM=	rm -f

.SUFFIXES:  .mc .cf

.mc.cf:
	$(RM) $@@
	( cd ${.CURDIR} && $(M4) ${CFDIR}/m4/cf.m4 ${@@:R}.mc > ${.OBJDIR}/$@@ )
	$(ECHO) "### $*.mc ###" >>$@@
	$(SED) -e 's/^/# /' ${.CURDIR}/$*.mc >>$@@
	$(CHMOD) $(ROMODE) $@@

ALL=	openbsd-submit.cf clientproto.cf tcpproto.cf openbsd-localhost.cf \
	openbsd-proto.cf courtesan.cf courtesan-nonet.cf openbsd-lists.cf \
	openbsd-bulk.cf lucifier.cf corpse.cf knecht.cf

all: $(ALL)

cleandir: clean

clean:
	$(RM) $(ALL) *.core

depend:

install:
	@@if test -e ${DESTDIR}/etc/mail/sendmail.cf; then \
		if test ! -e ${DESTDIR}/etc/mail/submit.cf; then \
			echo "WARNING: installed missing ${DESTDIR}/etc/mail/submit.cf"; \
			echo "You should probably rebuild ${DESTDIR}/etc/mail/sendmail.cf"; \
			${INSTALL} ${INSTALL_COPY} -o root -g wheel -m 644 \
			    openbsd-submit.cf ${DESTDIR}/etc/mail/submit.cf; \
		fi; \
		if test ! -e ${DESTDIR}/etc/mail/localhost.cf; then \
			echo "WARNING: installed missing ${DESTDIR}/etc/mail/localhost.cf"; \
			${INSTALL} ${INSTALL_COPY} -o root -g wheel -m 644 \
			    openbsd-localhost.cf ${DESTDIR}/etc/mail/localhost.cf; \
		fi; \
	fi

distribution: openbsd-proto.cf openbsd-localhost.cf openbsd-submit.cf
	${INSTALL} ${INSTALL_COPY} -o root -g wheel -m 644 openbsd-proto.cf \
	    ${DESTDIR}/etc/mail/sendmail.cf
	${INSTALL} ${INSTALL_COPY} -o root -g wheel -m 644 openbsd-localhost.cf \
	    ${DESTDIR}/etc/mail/localhost.cf
	${INSTALL} ${INSTALL_COPY} -o root -g wheel -m 644 openbsd-submit.cf \
	    ${DESTDIR}/etc/mail/submit.cf

# this is overkill, but....
M4FILES=\
	${CFDIR}/domain/Berkeley.EDU.m4 \
	${CFDIR}/domain/CS.Berkeley.EDU.m4 \
	${CFDIR}/domain/EECS.Berkeley.EDU.m4 \
	${CFDIR}/domain/S2K.Berkeley.EDU.m4 \
	${CFDIR}/domain/berkeley-only.m4 \
	${CFDIR}/domain/generic.m4 \
	${CFDIR}/feature/accept_unqualified_senders.m4 \
	${CFDIR}/feature/accept_unresolvable_domains.m4 \
	${CFDIR}/feature/access_db.m4 \
	${CFDIR}/feature/allmasquerade.m4 \
	${CFDIR}/feature/always_add_domain.m4 \
	${CFDIR}/feature/authinfo.m4 \
	${CFDIR}/feature/bestmx_is_local.m4 \
	${CFDIR}/feature/bitdomain.m4 \
	${CFDIR}/feature/blacklist_recipients.m4 \
	${CFDIR}/feature/conncontrol.m4 \
	${CFDIR}/feature/compat_check.m4 \
	${CFDIR}/feature/delay_checks.m4 \
	${CFDIR}/feature/dnsbl.m4 \
	${CFDIR}/feature/domaintable.m4 \
	${CFDIR}/feature/enhdnsbl.m4 \
	${CFDIR}/feature/generics_entire_domain.m4 \
	${CFDIR}/feature/genericstable.m4 \
	${CFDIR}/feature/ldap_routing.m4 \
	${CFDIR}/feature/msp.m4 \
	${CFDIR}/feature/limited_masquerade.m4 \
	${CFDIR}/feature/local_lmtp.m4 \
	${CFDIR}/feature/local_no_masquerade.m4 \
	${CFDIR}/feature/local_procmail.m4 \
	${CFDIR}/feature/lookupdotdomain.m4 \
	${CFDIR}/feature/loose_relay_check.m4 \
	${CFDIR}/feature/mailertable.m4 \
	${CFDIR}/feature/masquerade_entire_domain.m4 \
	${CFDIR}/feature/masquerade_envelope.m4 \
	${CFDIR}/feature/no_default_msa.m4 \
	${CFDIR}/feature/nocanonify.m4 \
	${CFDIR}/feature/notsticky.m4 \
	${CFDIR}/feature/nouucp.m4 \
	${CFDIR}/feature/nullclient.m4 \
	${CFDIR}/feature/preserve_local_plus_detail.m4 \
	${CFDIR}/feature/preserve_luser_host.m4 \
	${CFDIR}/feature/promiscuous_relay.m4 \
	${CFDIR}/feature/queuegroup.m4 \
	${CFDIR}/feature/ratecontrol.m4 \
	${CFDIR}/feature/redirect.m4 \
	${CFDIR}/feature/relay_based_on_MX.m4 \
	${CFDIR}/feature/relay_entire_domain.m4 \
	${CFDIR}/feature/relay_hosts_only.m4 \
	${CFDIR}/feature/relay_local_from.m4 \
	${CFDIR}/feature/relay_mail_from.m4 \
	${CFDIR}/feature/smrsh.m4 \
	${CFDIR}/feature/stickyhost.m4 \
	${CFDIR}/feature/use_ct_file.m4 \
	${CFDIR}/feature/use_cw_file.m4 \
	${CFDIR}/feature/uucpdomain.m4 \
	${CFDIR}/feature/virtuser_entire_domain.m4 \
	${CFDIR}/feature/virtusertable.m4 \
	${CFDIR}/hack/cssubdomain.m4 \
	${CFDIR}/m4/cf.m4 \
	${CFDIR}/m4/cfhead.m4 \
	${CFDIR}/m4/proto.m4 \
	${CFDIR}/m4/version.m4 \
	${CFDIR}/mailer/cyrus.m4 \
	${CFDIR}/mailer/fax.m4 \
	${CFDIR}/mailer/local.m4 \
	${CFDIR}/mailer/mail11.m4 \
	${CFDIR}/mailer/phquery.m4 \
	${CFDIR}/mailer/pop.m4 \
	${CFDIR}/mailer/procmail.m4 \
	${CFDIR}/mailer/qpage.m4 \
	${CFDIR}/mailer/smtp.m4 \
	${CFDIR}/mailer/usenet.m4 \
	${CFDIR}/mailer/uucp.m4 \
	${CFDIR}/ostype/aix3.m4 \
	${CFDIR}/ostype/aix4.m4 \
	${CFDIR}/ostype/aix5.m4 \
	${CFDIR}/ostype/altos.m4 \
	${CFDIR}/ostype/amdahl-uts.m4 \
	${CFDIR}/ostype/a-ux.m4 \
	${CFDIR}/ostype/bsd4.3.m4 \
	${CFDIR}/ostype/bsd4.4.m4 \
	${CFDIR}/ostype/bsdi.m4 \
	${CFDIR}/ostype/bsdi1.0.m4 \
	${CFDIR}/ostype/bsdi2.0.m4 \
	${CFDIR}/ostype/darwin.m4 \
	${CFDIR}/ostype/dgux.m4 \
	${CFDIR}/ostype/domainos.m4 \
	${CFDIR}/ostype/dragonfly.m4 \
	${CFDIR}/ostype/dynix3.2.m4 \
	${CFDIR}/ostype/freebsd4.m4 \
	${CFDIR}/ostype/freebsd5.m4 \
	${CFDIR}/ostype/freebsd6.m4 \
	${CFDIR}/ostype/gnu.m4 \
	${CFDIR}/ostype/hpux10.m4 \
	${CFDIR}/ostype/hpux11.m4 \
	${CFDIR}/ostype/hpux9.m4 \
	${CFDIR}/ostype/irix4.m4 \
	${CFDIR}/ostype/irix5.m4 \
	${CFDIR}/ostype/irix6.m4 \
	${CFDIR}/ostype/isc4.1.m4 \
	${CFDIR}/ostype/linux.m4 \
	${CFDIR}/ostype/maxion.m4 \
	${CFDIR}/ostype/mklinux.m4 \
	${CFDIR}/ostype/mpeix.m4 \
	${CFDIR}/ostype/nextstep.m4 \
	${CFDIR}/ostype/openbsd.m4 \
	${CFDIR}/ostype/osf1.m4 \
	${CFDIR}/ostype/powerux.m4 \
	${CFDIR}/ostype/ptx2.m4 \
	${CFDIR}/ostype/qnx.m4 \
	${CFDIR}/ostype/riscos4.5.m4 \
	${CFDIR}/ostype/sco-uw-2.1.m4 \
	${CFDIR}/ostype/sco3.2.m4 \
	${CFDIR}/ostype/sinix.m4 \
	${CFDIR}/ostype/solaris2.m4 \
	${CFDIR}/ostype/solaris2.ml.m4 \
	${CFDIR}/ostype/solaris2.pre5.m4 \
	${CFDIR}/ostype/solaris8.m4 \
	${CFDIR}/ostype/sunos3.5.m4 \
	${CFDIR}/ostype/sunos4.1.m4 \
	${CFDIR}/ostype/svr4.m4 \
	${CFDIR}/ostype/ultrix4.m4 \
	${CFDIR}/ostype/unixware7.m4 \
	${CFDIR}/ostype/unknown.m4 \
	${CFDIR}/ostype/uxpds.m4

$(ALL): $(M4FILES)

.include <bsd.prog.mk>
@


1.27
log
@Change an instance of submit.cf that should now be openbsd-submit.cf.
From grunk@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.26 2012/04/12 12:13:18 kurt Exp $
@


1.26
log
@Revert change not intended to be committed.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.25 2012/04/12 12:09:30 kurt Exp $
d51 1
a51 1
			    submit.cf ${DESTDIR}/etc/mail/submit.cf; \
@


1.25
log
@Remove incorrect -pthread preprocessor define _POSIX_THREADS and replace
with _REENTRANT. Also remove undef _POSIX_THREADS in phread.h.
From brad@@comstyle.com. okay guenther@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.24 2008/10/03 16:29:05 millert Exp $
d34 1
a34 1
	openbsd-bulk.cf lucifier.cf corpse.cf knecht.cf dockconfig.cf
d60 1
a60 1
distribution: openbsd-proto.cf openbsd-localhost.cf openbsd-submit.cf dockconfig.cf
a66 2
	${INSTALL} ${INSTALL_COPY} -o root -g wheel -m 644 dockconfig.cf \
	    ${DESTDIR}/etc/mail/dockconfig.cf
@


1.24
log
@Add openbsd-submit.mc, a custom version submit.mc and revert the
existing submit.mc to the stock version.  Closes PR 4951.
OK sthen@@ martynas@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.23 2008/06/09 15:40:21 pyr Exp $
d34 1
a34 1
	openbsd-bulk.cf lucifier.cf corpse.cf knecht.cf
d60 1
a60 1
distribution: openbsd-proto.cf openbsd-localhost.cf openbsd-submit.cf
d67 2
@


1.23
log
@Don't be overzealous when cleaning up, once is enough.
spotted by ajacoutot@@, ok ajacoutot@@, millert@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.22 2006/03/22 18:43:53 millert Exp $
d32 1
a32 1
ALL=	submit.cf clientproto.cf tcpproto.cf openbsd-localhost.cf \
d60 1
a60 1
distribution: openbsd-proto.cf openbsd-localhost.cf submit.cf
d65 1
a65 1
	${INSTALL} ${INSTALL_COPY} -o root -g wheel -m 644 submit.cf \
@


1.22
log
@Update to sendmail 8.13.6
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.21 2004/12/16 00:21:29 millert Exp $
d38 3
a40 1
clean cleandir:
@


1.21
log
@Update to sendmail-8.13.2
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.20 2004/06/24 03:59:24 millert Exp $
d5 1
a5 1
#	$Sendmail: Makefile,v 8.59 2004/08/06 03:54:05 gshapiro Exp $
d159 1
@


1.20
log
@Update to sendmail.8.13.0
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.19 2003/06/12 01:05:14 millert Exp $
d5 1
a5 1
#	$Sendmail: Makefile,v 8.58 2003/10/20 22:01:00 ca Exp $
d155 1
@


1.19
log
@remove cruft
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.18 2002/07/03 16:08:27 millert Exp $
d5 1
a5 1
#	$Sendmail: Makefile,v 8.56 2001/12/13 23:56:37 gshapiro Exp $
d17 2
d28 2
d83 1
a103 1
	${CFDIR}/feature/nodns.m4 \
d111 1
@


1.18
log
@sync
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.17 2002/01/14 03:21:39 millert Exp $
d30 1
a30 1
	openbsd-bulk.cf lucifier.cf elbereth.cf corpse.cf knecht.cf
@


1.17
log
@update to sendmail-8.12.2
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.16 2002/01/09 23:41:13 lebel Exp $
d29 2
a30 2
	openbsd-proto.cf courtesan.cf courtesan-nonet.cf courtesan-lists.cf \
	openbsd-lists.cf lucifier.cf elbereth.cf corpse.cf knecht.cf
@


1.16
log
@remove cf/domain/sigmasoft.m4 from cf/cf/Makefile
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.15 2002/01/09 17:59:02 tholo Exp $
d5 1
a5 1
#	$Sendmail: Makefile,v 8.54 2001/08/20 15:16:48 gshapiro Exp $
d152 1
d164 1
@


1.15
log
@Remove private sendmail configuration files -- they are out of date anyhow
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.14 2001/09/29 15:22:27 millert Exp $
a69 1
	${CFDIR}/domain/sigmasoft.m4 \
@


1.14
log
@Add missing dependencies for distribution rule
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.13 2001/09/25 20:23:41 niklas Exp $
d30 1
a30 2
	openbsd-lists.cf gandalf.cf alatar.cf lucifier.cf \
	elbereth.cf corpse.cf knecht.cf
@


1.13
log
@Remove obsolete custom shit
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.12 2001/09/12 16:15:38 millert Exp $
d15 1
a15 1
M4=	m4
d55 1
a55 1
distribution: openbsd-proto.cf
@


1.12
log
@Install localhost.cf if it is missing and sendmail.cf exists.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.11 2001/09/11 19:02:48 millert Exp $
d30 1
a30 1
	openbsd-lists.cf gandalf.cf alatar.cf nettan.cf waldorf.cf lucifier.cf \
@


1.11
log
@merge in sendmail 8.12.0 with BSD Makefiles and mdoc man pages
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.10 2001/05/29 01:31:11 millert Exp $
d41 12
a52 6
	@@if test -e ${DESTDIR}/etc/mail/sendmail.cf -a \
	    \! -e ${DESTDIR}/etc/mail/submit.cf; then \
		echo "WARNING: installed missing ${DESTDIR}/etc/mail/submit.cf"; \
		echo "You should probably rebuild ${DESTDIR}/etc/mail/sendmail.cf"; \
		${INSTALL} ${INSTALL_COPY} -o root -g wheel -m 644 submit.cf \
		    ${DESTDIR}/etc/mail/submit.cf; \
@


1.10
log
@Update to sendmail 8.11.4:
    8.11.4 revamps signal handling within the MTA in order to reduce
    the likelihood of a race condition that can lead to heap
    corruption as described in Michal Zalewski's advisory.  The
    problems discussed in the advisory are not currently known to
    be exploitable but we recommend upgrading to 8.11.4 in case a
    method is found to exploit the signal handling race condition.
    8.11.4 also fixes other bugs found since the release of 8.11.3.

See the RELEASE_NOTES file for more details.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.9 2001/02/02 06:41:18 tholo Exp $
d5 1
a5 1
#	$Sendmail: Makefile,v 8.40.8.5 2001/04/12 22:39:52 gshapiro Exp $
d28 4
a31 3
ALL=	clientproto.cf openbsd-proto.cf courtesan.cf courtesan-nonet.cf \
	courtesan-lists.cf  openbsd-lists.cf gandalf.cf alatar.cf \
	nettan.cf waldorf.cf lucifier.cf elbereth.cf corpse.cf knecht.cf
d36 1
a36 1
	$(RM) $(ALL) core
d38 10
a47 1
depend install:
d52 4
d65 1
d71 1
d75 2
d79 1
d83 1
d86 1
d88 1
d99 2
d102 1
a102 1
	${CFDIR}/feature/rbl.m4 \
a131 1
	${CFDIR}/ostype/aix2.m4 \
d134 1
d137 1
d143 1
d147 1
d172 1
@


1.9
log
@Remove non-existant machine config -- replace w/laptop config that works
both native and under VMware
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 2001/01/16 01:38:37 itojun Exp $
d5 1
a5 1
#	$Sendmail: Makefile,v 8.40.8.4 2000/10/26 18:27:44 gshapiro Exp $
a112 1
	${CFDIR}/ostype/aux.m4 \
@


1.9.2.1
log
@Pull in patch from current:
Fix (millert), Errata 001:
Update to sendmail 8.11.4:
    8.11.4 revamps signal handling within the MTA in order to reduce
    the likelihood of a race condition that can lead to heap
    corruption as described in Michal Zalewski's advisory.  The
    problems discussed in the advisory are not currently known to
    be exploitable but we recommend upgrading to 8.11.4 in case a
    method is found to exploit the signal handling race condition.
    8.11.4 also fixes other bugs found since the release of 8.11.3.

See the RELEASE_NOTES file for more details.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.10 2001/05/29 01:31:11 millert Exp $
d5 1
a5 1
#	$Sendmail: Makefile,v 8.40.8.5 2001/04/12 22:39:52 gshapiro Exp $
d113 1
@


1.8
log
@pull 8.12.x change (or equivalent to),
which can mark certain DaemonPortOptions as "optional".
now we can ship single sendmail.cf for both IPv4-only and IPv4/v6 kernels.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 2001/01/15 21:08:51 millert Exp $
d29 1
a29 1
	courtesan-lists.cf  openbsd-lists.cf gandalf.cf saruman.cf alatar.cf \
@


1.7
log
@sendmail 8.11.2 with BSD Makefiles
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.6 2000/06/18 03:13:08 itojun Exp $
d30 1
a30 2
	nettan.cf waldorf.cf lucifier.cf elbereth.cf corpse.cf knecht.cf \
	openbsd-proto-IPv4only.cf 
d39 1
a39 1
distribution: openbsd-proto.cf openbsd-proto-IPv4only.cf
a41 2
	${INSTALL} ${INSTALL_COPY} -o root -g wheel -m 644 \
	    openbsd-proto-IPv4only.cf ${DESTDIR}/etc/mail/sendmail-IPv4only.cf
@


1.6
log
@typo
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.5 2000/06/18 00:14:40 itojun Exp $
d5 1
a5 1
#	$Sendmail: Makefile,v 8.40 2000/02/01 22:07:15 gshapiro Exp $
@


1.6.2.1
log
@Pull in patch from current:
Errata(028):
The signal handlers in sendmail contain code that is unsafe in the
context of a signal handler.  This leads to potentially serious race
conditions.  At the moment there is a theoretical attack only and
can only be exploited on the local host (if at all).
Fix(millert):
Update to sendmail 8.11.4:
8.11.4 revamps signal handling within the MTA in order to reduce
the likelihood of a race condition that can lead to heap
corruption as described in Michal Zalewski's advisory.  The
problems discussed in the advisory are not currently known to
be exploitable but we recommend upgrading to 8.11.4 in case a
method is found to exploit the signal handling race condition.
8.11.4 also fixes other bugs found since the release of 8.11.3.

See the RELEASE_NOTES file for more details.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.10 2001/05/29 01:31:11 millert Exp $
d5 1
a5 1
#	$Sendmail: Makefile,v 8.40.8.5 2001/04/12 22:39:52 gshapiro Exp $
d29 3
a31 2
	courtesan-lists.cf  openbsd-lists.cf gandalf.cf alatar.cf \
	nettan.cf waldorf.cf lucifier.cf elbereth.cf corpse.cf knecht.cf
d40 1
a40 1
distribution: openbsd-proto.cf
d43 2
d116 1
@


1.5
log
@make /etc/mail/sendmail.cf to listen to both IPv4 and IPv6 smtp port.
supply /etc/mail/sendmail-IPv4only.cf, since sendmail.cf chokes on
IPv4-only kernel.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 2000/04/02 21:12:29 millert Exp $
d40 1
a40 1
distribution: openbsd-proto.cf openbsd-proto-IPv6.cf
@


1.4
log
@Fix typo introduced in last commit
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.3 2000/04/02 21:11:43 millert Exp $
d30 2
a31 1
	nettan.cf waldorf.cf lucifier.cf elbereth.cf corpse.cf knecht.cf
d40 1
a40 1
distribution: openbsd-proto.cf
d43 2
@


1.3
log
@Build courtesan-lists.mc and openbsd-lists.mc too
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.2 2000/04/02 19:48:11 millert Exp $
d29 1
a29 1
	courtesan-lists.mc  openbsd-lists.mc gandalf.cf saruman.cf alatar.cf \
@


1.2
log
@Remove sendmail's `Build' scaffolding and add real Makefiles
praliases should be in section 1, not 8
Use arc4random(3) instead of random(3)
Add some sample OpenBSD .mc files
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.18 1999/01/01 20:32:29 millert Exp $
a27 1
# XXX - need more/better examples!
d29 2
a30 2
	gandalf.cf saruman.cf alatar.cf nettan.cf waldorf.cf lucifier.cf \
	elbereth.cf corpse.cf knecht.cf
@


1.1
log
@Initial revision
@
text
@d1 1
d16 1
a16 1
CFDIR=	..
d25 1
a25 1
	$(M4) ${CFDIR}/m4/cf.m4 $*.mc > $@@ || ( $(RM) $@@ && exit 1 )
d28 4
a31 11
GENERIC=generic-bsd4.4.cf generic-hpux9.cf generic-hpux10.cf \
		generic-linux.cf \
		generic-osf1.cf generic-solaris2.cf \
		generic-sunos4.1.cf generic-ultrix4.cf
BERKELEY=cs-hpux9.cf cs-osf1.cf cs-solaris2.cf \
	cs-sunos4.1.cf cs-ultrix4.cf \
	s2k-osf1.cf s2k-ultrix4.cf \
	chez.cs.cf huginn.cs.cf mail.cs.cf mail.eecs.cf mailspool.cs.cf \
	python.cs.cf ucbarpa.cf ucbvax.cf vangogh.cs.cf
OTHER=	knecht.cf
ALL=	$(GENERIC) $(BERKELEY) $(OTHER)
a34 4
berkeley: $(BERKELEY)
generic: $(GENERIC)
other: $(OTHER)

d40 4
d156 2
a157 3
$(BERKELEY): $(M4FILES)
$(GENERIC): $(M4FILES)
$(OTHER): $(M4FILES)
@


1.1.1.1
log
@stock sendmail 8.10.0 with $Id -> $Sendmail
@
text
@@


1.1.1.2
log
@sendmail 8.11.2
@
text
@d4 1
a4 1
#	$Id: Makefile,v 8.40.8.4 2000/10/26 18:27:44 gshapiro Exp $
d28 1
a28 1
		generic-linux.cf generic-nextstep3.3.cf \
d31 1
a31 1
BERKELEY=cs-hpux9.cf cs-hpux10.cf cs-osf1.cf cs-solaris2.cf \
a152 1
	${CFDIR}/ostype/solaris8.m4 \
@


1.1.1.3
log
@sendmail 8.12.0 with $Id tags converted to $Sendmail
@
text
@d4 1
a4 1
#	$Sendmail: Makefile,v 8.54 2001/08/20 15:16:48 gshapiro Exp $
a13 6
# name of source for sendmail.cf (without extension)
CF=	sendmail
# name of source for submit.cf (without extension)
SUBMIT=	submit
# directory for .cf files
MAILDIR=/etc/mail
a18 7
# use our own install program; should be really confINSTALL
INSTALL=../../devtools/bin/install.sh
# CF file ownership/permissions
CFOWN=root
CFGRP=bin
CFMODE=0444

d29 1
a29 1
		generic-osf1.cf generic-solaris.cf \
d31 1
a31 1
BERKELEY=cs-hpux9.cf cs-hpux10.cf cs-osf1.cf cs-solaris.cf \
d37 1
a37 1
ALL=	submit.cf $(GENERIC) $(OTHER)
d48 1
a48 24
install:
	@@echo "Before installing the .cf files please make sure you have read the"
	@@echo "instructions in the file ../../INSTALL.  You should have prepared the"
	@@echo "files \"submit.mc\" (supplied) and \"sendmail.mc\". Then you can use"
	@@echo ""
	@@echo "	make install-cf"
	@@echo ""
	@@echo "If you use a different name than \"sendmail\" for your main .mc file"

	@@echo "then you should use"
	@@echo ""
	@@echo "	make install-cf CF=config"
	@@echo ""
	@@echo "where \"config\" is the name of your main .mc file."

install-cf:  install-sendmail-cf install-submit-cf

install-sendmail-cf: $(CF).cf
	$(INSTALL) -c -o $(CFOWN) -g $(CFGRP) -m $(CFMODE) $(CF).cf ${DESTDIR}$(MAILDIR)/sendmail.cf

install-submit-cf: $(SUBMIT).cf
	$(INSTALL) -c -o $(CFOWN) -g $(CFGRP) -m $(CFMODE) $(SUBMIT).cf ${DESTDIR}$(MAILDIR)/submit.cf

depend:
d85 1
d115 1
d120 1
a120 1
	${CFDIR}/ostype/a-ux.m4 \
@


