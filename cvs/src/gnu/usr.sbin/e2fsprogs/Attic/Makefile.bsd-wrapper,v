head	1.3;
access;
symbols
	OPENBSD_2_3:1.2.0.4
	OPENBSD_2_3_BASE:1.2
	OPENBSD_2_2:1.2.0.2
	OPENBSD_2_2_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	98.07.07.18.19.56;	author art;	state dead;
branches;
next	1.2;

1.2
date	97.09.05.07.16.25;	author kstailey;	state Exp;
branches;
next	1.1;

1.1
date	97.06.14.07.42.54;	author downsj;	state Exp;
branches;
next	;


desc
@@


1.3
log
@old, big, not compiled and not used, die
@
text
@#	$OpenBSD: Makefile.bsd-wrapper,v 1.2 1997/09/05 07:16:25 kstailey Exp $

MAN=	misc/badblocks.8 misc/chattr.1 misc/dumpe2fs.8 misc/lsattr.1 \
	misc/mklost+found.8 misc/mke2fs.8 misc/tune2fs.8

MANLOCALBUILD=	yes

MANALL=	${MAN:S/.1/.cat1/g:S/.8/.cat8/g}

.SUFFIXES: .1 .cat1 .8 .cat8

.1.cat1: .8.cat8:
	@@echo "${NROFF} -mandoc ${.IMPSRC} > ${.TARGET}"
	@@${NROFF} -mandoc ${.IMPSRC} > ${.TARGET} || (rm -f ${.TARGET}; false)

CLEANFILES=	${MANALL}

PROGS=  misc/badblocks misc/chattr misc/dumpe2fs misc/lsattr \
	misc/mklost+found misc/mke2fs misc/tune2fs

all:	config.status
	${MAKE} LDFLAGS=${LDSTATIC}

.FORCE:	.IGNORE

.ifdef GLOBAL_AUTOCONF_CACHE
CF=	--cache-file=${GLOBAL_AUTOCONF_CACHE}
.else
CF=
.endif

config: .FORCE
.ifndef GLOBAL_AUTOCONF_CACHE
	-rm -f config.cache
.endif
	/bin/sh ${.CURDIR}/configure --prefix=/usr --bindir=/usr/sbin ${CF}

config.status:
	/bin/sh ${.CURDIR}/configure --prefix=/usr --bindir=/usr/sbin ${CF}

.if !defined(NOMAN)
install: ${MANALL} maninstall
	@@for i in ${PROGS}; do \
	    j="${INSTALL} ${INSTALL_COPY} -s -o ${BINOWN} -g ${BINGRP} -m 555 \
		$$i ${DESTDIR}/usr/sbin"; \
	    echo $$j; \
	    eval "$$j"; \
	done
.else
install: 
	@@for i in ${PROGS}; do \
	    j="${INSTALL} ${INSTALL_COPY} -s -o ${BINOWN} -g ${BINGRP} -m 555 \
		$$i ${DESTDIR}/usr/sbin"; \
	    echo $$j; \
	    eval "$$j"; \
	done
.endif

clean cleandir:
	rm -f ${CLEANFILES}
	-@@if [ -e Makefile ]; then ${MAKE} distclean; fi

depend:
	# Nothing here so far...

lint:
	# Nothing here so far...

tags:
	# Nothing here so far...

.include <bsd.obj.mk>
.include <bsd.subdir.mk>
.include <bsd.man.mk>
@


1.2
log
@add support for GLOBAL_AUTOCONF_CACHE
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.bsd-wrapper,v 1.1 1997/06/14 07:42:54 downsj Exp $
@


1.1
log
@Add wrapper; also update config support (from gcc) and disable all subdirs
except for misc and the libs.
@
text
@d1 1
a1 1
#	$OpenBSD$
d26 6
d33 1
d35 2
a36 1
	/bin/sh ${.CURDIR}/configure --prefix=/usr --bindir=/usr/sbin
d39 1
a39 1
	/bin/sh ${.CURDIR}/configure --prefix=/usr --bindir=/usr/sbin
@
