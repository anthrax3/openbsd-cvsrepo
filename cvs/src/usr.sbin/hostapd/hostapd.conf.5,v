head	1.45;
access;
symbols
	OPENBSD_6_2:1.45.0.8
	OPENBSD_6_2_BASE:1.45
	OPENBSD_6_1:1.45.0.10
	OPENBSD_6_1_BASE:1.45
	OPENBSD_6_0:1.45.0.6
	OPENBSD_6_0_BASE:1.45
	OPENBSD_5_9:1.45.0.2
	OPENBSD_5_9_BASE:1.45
	OPENBSD_5_8:1.45.0.4
	OPENBSD_5_8_BASE:1.45
	OPENBSD_5_7:1.44.0.2
	OPENBSD_5_7_BASE:1.44
	OPENBSD_5_6:1.43.0.4
	OPENBSD_5_6_BASE:1.43
	OPENBSD_5_5:1.42.0.4
	OPENBSD_5_5_BASE:1.42
	OPENBSD_5_4:1.41.0.2
	OPENBSD_5_4_BASE:1.41
	OPENBSD_5_3:1.40.0.2
	OPENBSD_5_3_BASE:1.40
	OPENBSD_5_2:1.39.0.2
	OPENBSD_5_2_BASE:1.39
	OPENBSD_5_1_BASE:1.38
	OPENBSD_5_1:1.38.0.4
	OPENBSD_5_0:1.38.0.2
	OPENBSD_5_0_BASE:1.38
	OPENBSD_4_9:1.37.0.8
	OPENBSD_4_9_BASE:1.37
	OPENBSD_4_8:1.37.0.6
	OPENBSD_4_8_BASE:1.37
	OPENBSD_4_7:1.37.0.2
	OPENBSD_4_7_BASE:1.37
	OPENBSD_4_6:1.37.0.4
	OPENBSD_4_6_BASE:1.37
	OPENBSD_4_5:1.36.0.8
	OPENBSD_4_5_BASE:1.36
	OPENBSD_4_4:1.36.0.6
	OPENBSD_4_4_BASE:1.36
	OPENBSD_4_3:1.36.0.4
	OPENBSD_4_3_BASE:1.36
	OPENBSD_4_2:1.36.0.2
	OPENBSD_4_2_BASE:1.36
	OPENBSD_4_1:1.35.0.2
	OPENBSD_4_1_BASE:1.35
	OPENBSD_4_0:1.34.0.2
	OPENBSD_4_0_BASE:1.34
	OPENBSD_3_9:1.29.0.2
	OPENBSD_3_9_BASE:1.29
	OPENBSD_3_8:1.8.0.2
	OPENBSD_3_8_BASE:1.8;
locks; strict;
comment	@.\" @;


1.45
date	2015.03.26.20.34.54;	author jmc;	state Exp;
branches;
next	1.44;
commitid	EPvbYrhVzbYQPMhY;

1.44
date	2015.02.16.16.21.25;	author bentley;	state Exp;
branches;
next	1.43;
commitid	T4szyBpTWSGKAMYe;

1.43
date	2014.08.05.16.35.37;	author reyk;	state Exp;
branches;
next	1.42;
commitid	BfKD8cpmD1Ia5LcR;

1.42
date	2013.09.03.20.44.01;	author jmc;	state Exp;
branches;
next	1.41;

1.41
date	2013.07.16.11.13.33;	author schwarze;	state Exp;
branches;
next	1.40;

1.40
date	2013.01.17.21.39.29;	author jmc;	state Exp;
branches;
next	1.39;

1.39
date	2012.04.24.14.56.09;	author jmc;	state Exp;
branches;
next	1.38;

1.38
date	2011.06.23.20.35.22;	author sthen;	state Exp;
branches;
next	1.37;

1.37
date	2009.04.16.20.13.13;	author sobrado;	state Exp;
branches;
next	1.36;

1.36
date	2007.05.31.19.20.24;	author jmc;	state Exp;
branches;
next	1.35;

1.35
date	2006.12.31.03.25.58;	author reyk;	state Exp;
branches;
next	1.34;

1.34
date	2006.08.31.18.44.48;	author jmc;	state Exp;
branches;
next	1.33;

1.33
date	2006.06.27.18.14.59;	author reyk;	state Exp;
branches;
next	1.32;

1.32
date	2006.05.15.21.09.49;	author reyk;	state Exp;
branches;
next	1.31;

1.31
date	2006.05.15.20.53.02;	author reyk;	state Exp;
branches;
next	1.30;

1.30
date	2006.03.10.18.10.16;	author reyk;	state Exp;
branches;
next	1.29;

1.29
date	2005.12.29.04.33.58;	author reyk;	state Exp;
branches;
next	1.28;

1.28
date	2005.12.18.17.54.12;	author reyk;	state Exp;
branches;
next	1.27;

1.27
date	2005.12.10.22.16.22;	author jmc;	state Exp;
branches;
next	1.26;

1.26
date	2005.12.10.13.42.37;	author reyk;	state Exp;
branches;
next	1.25;

1.25
date	2005.12.01.08.28.58;	author jmc;	state Exp;
branches;
next	1.24;

1.24
date	2005.12.01.05.10.38;	author deraadt;	state Exp;
branches;
next	1.23;

1.23
date	2005.12.01.02.03.57;	author reyk;	state Exp;
branches;
next	1.22;

1.22
date	2005.12.01.01.28.19;	author reyk;	state Exp;
branches;
next	1.21;

1.21
date	2005.11.23.20.40.38;	author reyk;	state Exp;
branches;
next	1.20;

1.20
date	2005.11.20.12.02.04;	author reyk;	state Exp;
branches;
next	1.19;

1.19
date	2005.11.17.00.10.46;	author reyk;	state Exp;
branches;
next	1.18;

1.18
date	2005.11.16.00.01.19;	author reyk;	state Exp;
branches;
next	1.17;

1.17
date	2005.10.15.08.18.32;	author jmc;	state Exp;
branches;
next	1.16;

1.16
date	2005.10.05.16.09.55;	author reyk;	state Exp;
branches;
next	1.15;

1.15
date	2005.09.30.18.22.28;	author jmc;	state Exp;
branches;
next	1.14;

1.14
date	2005.09.30.17.31.58;	author jmc;	state Exp;
branches;
next	1.13;

1.13
date	2005.09.30.16.53.16;	author reyk;	state Exp;
branches;
next	1.12;

1.12
date	2005.09.30.16.50.03;	author reyk;	state Exp;
branches;
next	1.11;

1.11
date	2005.09.29.23.57.00;	author reyk;	state Exp;
branches;
next	1.10;

1.10
date	2005.09.12.09.32.42;	author jmc;	state Exp;
branches;
next	1.9;

1.9
date	2005.09.10.21.47.36;	author reyk;	state Exp;
branches;
next	1.8;

1.8
date	2005.07.04.22.49.02;	author jmc;	state Exp;
branches;
next	1.7;

1.7
date	2005.07.04.18.25.32;	author reyk;	state Exp;
branches;
next	1.6;

1.6
date	2005.07.04.18.12.31;	author reyk;	state Exp;
branches;
next	1.5;

1.5
date	2005.06.17.20.17.01;	author jmc;	state Exp;
branches;
next	1.4;

1.4
date	2005.06.17.19.13.35;	author reyk;	state Exp;
branches;
next	1.3;

1.3
date	2005.04.13.20.03.06;	author jmc;	state Exp;
branches;
next	1.2;

1.2
date	2005.04.13.19.06.11;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	2005.04.13.18.12.23;	author reyk;	state Exp;
branches;
next	;


desc
@@


1.45
log
@do not encourage random uppercasing;
@
text
@.\" $OpenBSD: hostapd.conf.5,v 1.44 2015/02/16 16:21:25 bentley Exp $
.\"
.\" Copyright (c) 2004, 2005, 2006 Reyk Floeter <reyk@@openbsd.org>
.\"
.\" Permission to use, copy, modify, and distribute this software for any
.\" purpose with or without fee is hereby granted, provided that the above
.\" copyright notice and this permission notice appear in all copies.
.\"
.\" THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
.\" WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
.\" MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
.\" ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
.\" WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
.\" ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
.\" OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
.\"
.Dd $Mdocdate: February 16 2015 $
.Dt HOSTAPD.CONF 5
.Os
.Sh NAME
.Nm hostapd.conf
.Nd configuration file for the Host Access Point daemon
.Sh DESCRIPTION
.Nm
is the configuration file for the
.Xr hostapd 8
daemon.
.Sh SECTIONS
The
.Nm
file is divided into four main sections.
.Bl -tag -width xxxx
.It Sy Macros
User-defined variables may be defined and used later, simplifying the
configuration file.
.It Sy Tables
Tables provide a mechanism to handle a large number of link layer
addresses easily, with increased performance and flexibility.
.It Sy Global Configuration
Global runtime settings for
.Xr hostapd 8 .
.It Sy Event Rules
Event rules provide a powerful mechanism to trigger certain actions
when receiving specified IEEE 802.11 frames.
.It Sy IP Roaming
The concepts and details about the optional IP based roaming in
.Xr hostapd 8 .
.El
.Pp
The current line can be extended over multiple lines using a backslash
.Pq Sq \e .
Comments can be put anywhere in the file using a hash mark
.Pq Sq # ,
and extend to the end of the current line.
Care should be taken when commenting out multi-line text:
the comment is effective until the end of the entire block.
.Pp
Argument names not beginning with a letter, digit, or underscore
must be quoted.
.Pp
Additional configuration files can be included with the
.Ic include
keyword, for example:
.Bd -literal -offset indent
include "/etc/hostapd.conf.local"
.Ed
.Sh MACROS
Macros can be defined that will later be expanded in context.
Macro names must start with a letter, digit, or underscore,
and may contain any of those characters.
Macro names may not be reserved words (for example,
.Ic set ,
.Ic interface ,
or
.Ic hostap ) .
Macros are not expanded inside quotes.
.Pp
For example:
.Bd -literal -offset indent
wlan="ath0"
set iapp handle subtype { ! add notify, radiotap }
set iapp interface $wlan
.Ed
.Sh TABLES
Tables are named structures which can hold a collection of link layer
addresses, masked address ranges, and link layer to IP address
assignments.
Lookups against tables in
.Xr hostapd 8
are relatively fast, making a single rule with tables much more
efficient, in terms of processor usage and memory consumption, than a
large number of rules which differ only in link layer addresses.
.Pp
Tables are used for
.Xr hostapd 8
.Em event rules
to match specified IEEE 802.11 link layer addresses and address ranges,
and the capability to assign link layer to IP addresses and an option netmask
is a requirement for advanced IAPP functionality.
.Pp
Table options may be presented after the table name declaration.
The following options are supported:
.Bl -tag -width const
.It Ic const
The table is constant and cannot be later changed from its original
definition.
.El
.Pp
For example:
.Bd -literal -offset indent
cisco="00:40:06:ff:ff:ff & ff:ff:ff:00:00:00"

table <black> { $cisco, 00:0d:60:ff:f1:2a }
table <myess> const {
	00:00:24:c3:40:18 -> 10.195.64.24,
	00:00:24:c3:40:19 -> 10.195.64.25,
	00:00:24:c3:40:1a -> 10.195.64.26
}
table <myclient> const {
	00:05:4e:45:d4:b9 -> 172.23.5.1/30
}
.Ed
.Sh GLOBAL CONFIGURATION
The following configuration settings are understood:
.Bl -tag -width Ds
.It Xo
.Ic set hostap interface
.Ar interface |
.Brq Ar interface0 , interface1 , ...
.Xc
Specify the wireless interface running in Host AP mode.
This option could be omitted to use
.Xr hostapd 8
to log received IAPP messages.
Multiple hostap interfaces may be specified
as a comma-separated list,
surrounded by curly braces.
.It Ic set hostap mode Ar mode
Specify the Host AP capture mode.
The supported modes are:
.Pp
.Bl -tag -width radiotap -offset indent -compact
.It Ic radiotap
Capture IEEE 802.11 frames with additional radiotap headers.
They will provide optional but useful information like received frame
signal levels.
.It Ic pcap
Capture plain IEEE 802.11 frames.
.El
.It Xo
.Ic set hostap hopper interface
.Ar interface |
.Brq Ar interface0 , interface1 , ...
.Xc
Enable a channel hopper on the selected wireless interface.
Multiple hostap interfaces may be specified as a comma-separated list,
surrounded by curly braces.
.It Ic set hostap hopper delay Ar number
Set the delay in milliseconds for the channel hopper before hopping to
the next available channel.
The default value is 800 milliseconds.
.It Ic set iapp interface Ar interface
Specify the mandatory Inter-Access-Point (IAPP) interface.
It is important that the IAPP interface is on a trusted
network because there is no authentication and an attacker could force
disassociation of selected stations on all listening access points.
.It Xo
.Ic set iapp
.Op Ic address | route
.Ic roaming table
.Pf < Ar table Ns >
.Xc
Specify a table used for
.Em IP Roaming
lookups of link layer address to IP address or subnet assignments.
.It Xo
.Ic set iapp handle subtype
.Ar subtype |
.Brq Ar subtype0 , subtype1 , ...
.Xc
Specify the IAPP subtypes to use:
.Pp
.Bl -tag -width broadcast -offset indent -compact
.It Xo
.Op Ic not
.Ic add notify
.Xc
Send and receive
.Em ADD.notify
messages.
This option is enabled by default.
.It Xo
.Op Ic not
.Ic radiotap
.Xc
Receive
.Em radiotap
messages.
This option is enabled by default.
.It Xo
.Op Ic not
.Op Ic address |\ route
.Ic roaming
.Xc
Enable dynamic roaming of IP addresses or routes.
These options are disabled by default.
.El
.It Ic set iapp mode Ar mode
Specify the IAPP mode.
The supported modes are:
.Pp
.Bl -tag -width broadcast -offset indent -compact
.It Xo
.Ic multicast
.Op Ic address Ar ipv4addr
.Op Ic port Ar number
.Op Ic ttl Ar number
.Xc
Use
.Xr multicast 4
frames.
A multicast time-to-live (TTL) of 2 or higher is required to allow
multicast forwarding, for example for use with
.Xr mrouted 8 .
.It Xo
.Ic broadcast
.Op Ic port Ar number
.Xc
Use broadcast frames.
.El
.Pp
The default is multicast using the multicast address 224.0.1.178 and
port 3517 with a TTL limited to 1 hop.
Some access point vendors still use broadcast with the pre-standard
IAPP port 2313.
.El
.Sh EVENT RULES
Event rules provide a powerful way to trigger a certain action when
receiving specified IEEE 802.11 frames on the
.Em hostap interface .
The rules are handled in sequential order, from first to last.
Rules are handled without a state:
each rule is processed independently from the others and from
any previous actions.
This behaviour is somewhat different to that of packet filter rules
specified in
.Xr pf.conf 5 .
.Pp
All
.Xr hostapd 8
event rules are single line statements beginning with
the mandatory
.Ic hostap handle
keywords and optional rule options, interface, frame matching,
a specified action, a limit, and a minimal rate:
.Bd -filled -offset indent
.Ic hostap handle
.Op Ar option
.Op Ar interface
.Op Ar frame
.Op Ar action
.Op Ar limit
.Op Ar rate
.Ed
.Pp
Some rule statements support the optional keyword
.Ic not ,
also represented by the
.Ic !\&
operator,
for inverse matching.
.Pp
The optional parts are defined below.
.Ss Rule Option
The rule
.Ar option
will modify the behaviour of handling the statement.
There are two possible options,
.Ic quick
and
.Ic skip .
If either the keyword
.Ic quick
or the keyword
.Ic skip
is specified, no further event rules will be handled for this frame
after processing this rule successfully.
The keyword
.Ic skip
additionally skips any further IAPP processing of the frame,
which is normally done after handling the event rules.
.Ss Rule Interface
The rule
.Ar interface
specifies the hostap interface the rule is matched on.
The available interface list is specified by the global
.Ic set hostap interface
configuration setting.
.Bd -filled -offset indent
.Ic on
.Op Ic not
.Ar interface
.Ed
.Pp
If not given,
the event rule is matched on all available hostap interfaces.
.Ss Rule Frame
The
.Ar frame
description specifies a mechanism to match IEEE 802.11 frames.
.Bl -tag -width Ds
.It Ic any
Match all frames.
.It Xo
.Ic frame
.Op Ar type
.Op Ar dir
.Op Ar from
.Op Ar to
.Op Ar bssid
.Op Ar radiotap
.Xc
Apply rules to frames matching the given parameters.
The parameters are explained below.
.Pp
The
.Ar type
parameter specifies the frame type to match on.
The frame type may be specified in the following ways:
.Bl -tag -width Ds
.It Ic type any
Match all frame types.
.It Xo
.Ic type
.Op Ic not
.Ic data
.Xc
Match data frames.
Presence of the
.Ic not
keyword negates the match and will match all non-data frames.
.It Xo
.Ic type
.Op Ic not
.Ic management
.Oo Op Ic not
.Ar subtype Oc
.Xc
Match management frames.
The
.Ar subtype
argument may be specified to optionally match management frames of the
given subtype.
The subtype match may be negated by specifying the
.Ic not
keyword.
See the
.Sx Management Frame Subtypes
section below for available subtypes specifications.
.El
.Pp
The
.Ar dir
parameter specifies the direction the frame is being sent.
The direction may be specified in the following ways:
.Bl -tag -width Ds
.It Ic dir any
Match all directions.
.It Ic dir Ar framedir
Match frames with the given direction
.Ar framedir .
See the
.Sx Frame Directions
section below for available direction specifications.
.El
.Pp
The
.Ar radiotap
rules allow parsing and matching of the extra information reported by
the radiotap header.
Support for the specified radiotap headers is optional and the
specific parameters depend on the radiotap elements reported
by the wireless interface.
Support for the radiotap data link type can be verified with the
.Xr tcpdump 8
command.
These rules require
.Ic hostap mode radiotap
in the global configuration.
.Bl -tag -width Ds
.It Xo
.Ic signal
.Op Ic operator
.Ar percentage Ic %
.Xc
Match the signal quality of the received frame.
.It Xo
.Ic freq
.Op Ic operator
.Ar value Ic ( GHz | MHz )
.Xc
Match the transmit rate of the received frame.
.It Xo
.Ic txrate
.Op Ic operator
.Ar rate Ic Mb
.Xc
Match the frequency of the received frame,
in Mbps.
.El
.Pp
The radiotap rules support the following operators.
If omitted, the specified value will be checked if it is equal or not.
.Bd -literal -offset indent
=	(equal)
!=	(not equal)
<	(less than)
<=	(less than or equal)
>	(greater than)
>=	(greater than or equal)
.Ed
.Pp
The
.Ar from , to ,
and
.Ar bssid
parameters specify the IEEE 802.11 address fields to match on.
They can be specified in the following ways:
.Bl -tag -width Ds
.It Xo
.Ic ( from | to | bssid ) Ic any
.Xc
Allow all addresses for the specified address field.
.It Xo
.Ic ( from | to | bssid )
.Op Ic not
.Pf < Ar table Ns >
.Xc
Allow allow addresses from the given
.Ar table
(see
.Sx Tables
above)
for the specified address field.
.It Xo
.Ic ( from | to | bssid )
.Op Ic not
.Ar lladdr
.Xc
Allow the given address
.Ar lladdr
for the specified address field.
.El
.El
.Ss Rule Action
An optional
.Ar action
is triggered if a received IEEE 802.11 frame matches the frame
description.
The following actions are supported:
.Bl -tag -width Ds
.It Xo
.Ic with frame Ar type
.Op Ar dir
.Ar from to bssid
.Xc
Send an arbitrary constructed frame to the wireless network.
The arguments are as follows.
.Pp
The
.Ar type
describes the IEEE 802.11 frame type to send, specified in the
frame control header.
The following frames types are supported at present:
.Bl -tag -width Ds
.It Ic type data
Send a data frame.
This is normally used to encapsulate ordinary IEEE 802.3
frames into IEEE 802.11 wireless frames.
.It Ic type Ic management Ar subtype
Send a management frame with the specified subtype.
Management frames are used to control states and to find access points
and IBSS nodes in IEEE 802.11 networks.
See the
.Sx Management Frame Subtypes
section below for available subtypes specifications.
.El
.Pp
The
.Ar dir
describes the direction the IEEE 802.11 frame will be sent.
It has the following syntax:
.Bd -filled -offset indent
.Ic dir Ar framedir
.Ed
.Pp
See the
.Sx Frame Directions
section below for available direction specifications.
.Pp
The
.Ar from , to ,
and
.Ar bssid
arguments specify the link layer address fields used in IEEE 802.11
frames.
All address fields are mandatory in the frame action.
The optional fourth address field used by wireless distribution
systems (WDS) is currently not supported.
Each argument is specified by a keyword of the same name
.Po
.Ic from , to ,
or
.Ic bssid
.Pc
followed by one of the following address specifications:
.Bl -tag -width "&refaddr"
.It Ar lladdr
Specify the link layer addresses used in the IEEE 802.11 frame address
field.
The link layer address
.Ql ff:ff:ff:ff:ff:ff
is the IEEE 802.11 broadcast address.
.It Li & Ns Ar refaddr
Fill in a link layer address from the previously matched IEEE 802.11
frame.
.Ic &from
will use the source link layer address;
.Ic &to
the destination link layer address; and
.Ic &bssid
the BSSID link layer address of the previously matched frame.
.It Ic random
Use a random link layer address in the specified IEEE 802.11 frame
address field.
Multicast and broadcast link layer addresses will be skipped.
.El
.It Ic with iapp type Ar iapp-type
Send a
.Xr hostapd 8
specific IAPP frame with a raw IEEE 802.11 packet dump of the received
frame to the wired network.
The only supported
.Ar iapp-type
is
.Ic radiotap .
.It Ic with log Op Ic verbose
Write informational messages to the local system log (see
.Xr syslogd 8 )
or standard error.
If the
.Sx Rule Rate
has been specified,
log will print the actual rate.
.It Ic node add | delete Ar lladdr
Add or remove the specified node from the internal kernel
node table.
.It Ic resend
Resend the received IEEE 802.11 frame.
.El
.Ss Rule Limit
It is possible to limit handling of specific rules with the
.Ic limit
keyword:
.Bd -filled -offset indent
.Ic limit
.Ar number
.Ic sec | usec
.Ed
.Pp
In some cases it is absolutely necessary to use limited matching
to protect
.Xr hostapd 8
against excessive flooding with IEEE 802.11 frames.
For example, beacon frames will be normally received every 100 ms.
.Ss Rule Rate
It is possible to tell
.Xr hostapd 8
to trigger the action only after a specific
.Ic rate
of matched frames.
.Bd -filled -offset indent
.Ic rate
.Ar number
.Ar /
.Ar number
.Ic sec
.Ed
.Pp
This will help to detect excessive flooding of IEEE 802.11 frames.
For example, de-auth flooding is a denial of service (DoS) attack
against IEEE 802.11 wireless networks.
.Ss Management Frame Subtypes
The
.Ar subtype
describes the IEEE 802.11 frame subtype, specified in
the frame control header.
The choice of subtypes depends on the used frame type.
.Xr hostapd 8
currently only supports management frame subtypes.
Most frame subtypes require an additional subtype-specific header
in the frame body, but currently only the
.Ic deauth
and
.Ic disassoc
reason codes are supported:
.Bl -ohang -offset 3n
.It Ic subtype beacon
A beacon frame.
Wireless access points and devices running in
.Em ibss
master or
.Em hostap
mode continuously send beacon frames to indicate their presence,
traffic load, and capabilities.
.It Ic subtype deauth Op Ar reason
A deauthentication frame with an optional reason code.
Deauthenticated stations will lose any IEEE 802.11 operational state.
.It Ic subtype disassoc Op Ar reason
A disassociation frame with an optional reason code.
.It Ic subtype assoc request
An association request frame.
.It Ic subtype assoc response
An association response frame.
.It Ic subtype atim
An announcement traffic indication message (ATIM frame).
.It Xo
.Ic subtype auth Op Ic open request | response
.Xc
An authentication frame.
.It Ic subtype probe request
A probe request frame.
Probe requests are used to probe for access points and IBSS nodes.
.It Ic subtype probe response
A probe response frame.
.It Ic subtype reassoc request
A re-association request frame.
.It Ic subtype reassoc response
A re-association response frame.
.El
.Pp
The
.Ar reason
defines a descriptive reason for the actual
.Em deauthentication
or
.Em disassociation
of a station:
.Bl -ohang -offset 3n
.It Ic reason assoc expire
Disassociated due to inactivity.
.It Ic reason assoc leave
Disassociated because the sending station is leaving or has left the
wireless network.
.It Ic reason assoc toomany
Disassociated because the access point has reached its limit of
associated stations.
.It Ic reason auth expire
Previous authentication no longer valid.
.It Ic reason auth leave
Deauthenticated because the sending station is leaving or has left the
wireless network.
.It Ic reason ie invalid
IEEE 802.11i extension.
.It Ic reason mic failure
IEEE 802.11i extension.
.It Ic reason not authed
Frame received from unauthenticated station.
.It Ic reason assoc not authed
Frame received from an associated but unauthenticated station.
.It Ic reason not assoced
Frame received from unassociated station.
.It Ic reason rsn required
IEEE 802.11i extension.
.It Ic reason rsn inconsistent
IEEE 802.11i extension.
.It Ic reason unspecified
Unspecified reason.
.El
.Ss Frame Directions
The direction a frame is being transmitted
.Pq Ar framedir
can be specified in the following ways:
.Bl -ohang -offset 3n
.It Ic dir no ds
No distribution system direction is used for management frames.
.It Ic dir to ds
A frame sent from a station to the distribution system, the access point.
.It Ic dir from ds
A frame from the distribution system, the access point, to a station.
.It Ic dir ds to ds
A frame direction used by wireless distribution systems (WDS) for
wireless access point to access point communication.
.El
.Sh EVENT RULE EXAMPLES
.Bd -literal
# Log probe requests locally
hostap handle type management subtype probe request \e
    with log

# Detect flooding of management frames except beacons.
# This will detect some possible denial of service attacks
# against the IEEE 802.11 protocol.
hostap handle skip type management subtype ! beacon \e
    with log \e
    rate 100 / 10 sec

# Log rogue access points via IAPP, limited to every second,
# and skip further IAPP processing.
hostap handle skip type management subtype beacon bssid !<myess> \e
    with iapp type radiotap limit 1 sec

# Send deauthentication frames to stations associated to rogue APs
hostap handle type data bssid !<myess> with frame type management \e
    subtype deauth reason auth expire \e
    from &bssid to &from bssid &bssid

# Send authentication requests from random station addresses to
# rogue access points. This is a common way to test the quality of
# various hostap implementations.
hostap handle skip type management subtype beacon bssid <pentest> \e
    with frame type management subtype auth \e
    from random to &bssid bssid &bssid

# Re-inject a received IEEE 802.11 frame on the interface ath0
hostap handle on ath0 type management subtype auth with resend

# Remove a blacklisted node from the kernel node tree
hostap handle type management subtype auth from <blacklist> \e
    with node delete &from

# Log rogue access points with a strong signal quality on
# channel 3 (2.422GHz) transmitting frames with 1Mbps.
hostap handle type management subtype beacon bssid !<myess> \e
    signal >= 50% txrate 1Mb freq 2.422GHz \e
    with log
.Ed
.Sh IP ROAMING
In a traditional wireless network, multiple access points are
members of a single layer 3 broadcast domain.
The traffic is bridged between physical collision domains,
as with the
.Xr bridge 4
interface in
.Ox .
This may cause problems in large wireless networks with a heavy load
of broadcast traffic, like broadcasted ARP, DHCP or ICMP requests.
.Pp
.Xr hostapd 8
implements IP based roaming to build wireless networks
without the requirement of a single broadcast domain.
This works as follows:
.Pp
.Bl -enum -compact
.It
Every access point running
.Xr hostapd 8
is a router to an individual internal broadcast domain,
.Em without
using the
.Xr bridge 4
interface.
.It
An increased multicast TTL is used for IAPP communication
between access points in multiple network segments.
Multicast routing is required in the network infrastructure,
like an
.Ox
router running
.Xr mrouted 8 .
.It
The configuration file
.Nm
is used to assign IP subnets to link layer addresses.
If a station with the specified link layer address successfully
associates to the access point,
.Xr hostapd 8
will configure the specified IP address and subnet on
the wireless interface.
.It
The
IAPP
.Em ADD.notify
message is used to notify other access points running
.Xr hostapd 8
to remove the station and any assigned IP addresses or subnets from
the wireless interface.
.It
A dynamic routing daemon like
.Xr ospfd 8
or
.Xr bgpd 8
running on the access point will be used to announce the
new IP route to the internal network and routers.
.El
.Pp
For example:
.Bd -literal -offset indent
# Assign IP addresses to layer 2 addresses
table <clients> {
	00:02:6f:42:d0:01 -> 172.23.5.1/30,
	00:05:4e:45:d3:b8 -> 172.23.5.4/30,
	00:04:2e:12:03:e0 -> 172.23.5.8/30
}

# Global options
set hostap interface ath0
set hostap mode radiotap
set iapp interface sis0
set iapp address roaming table <clients>
set iapp handle subtype address roaming
set iapp mode multicast ttl 2
.Ed
.Sh FILES
.Bl -tag -width "/etc/hostapd.conf" -compact
.It Pa /etc/hostapd.conf
Default location of the configuration file.
.El
.Sh SEE ALSO
.Xr hostapd 8
.Sh AUTHORS
The
.Xr hostapd 8
program was written by
.An Reyk Floeter Aq Mt reyk@@openbsd.org .
.Sh CAVEATS
.Em IP Roaming
requires statically assigned IP addresses of stations and does
not support DHCP at present.
@


1.44
log
@Don't use greater-equal/less-equal symbols where "<="/">=" are intended.

Also, clean up some usage of predefined strings (which are discouraged by
mandoc_char(7) for portability reasons) and improve spacing in
hostapd.conf(5).

ok schwarze@@
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.43 2014/08/05 16:35:37 reyk Exp $
d17 1
a17 1
.Dd $Mdocdate: August 5 2014 $
d591 1
a591 1
For example, de-auth flooding is a DoS (Denial of Service) attack
d702 1
a702 1
# This will detect some possible Denial of Service attacks
@


1.43
log
@Fix an example: hostapd table entries have to be comma-separated.

From "Vigdis" via misc@@
can go in deraadt@@
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.42 2013/09/03 20:44:01 jmc Exp $
d17 1
a17 1
.Dd $Mdocdate: September 3 2013 $
d128 2
a129 2
.Ar interface \*(Ba\ \&
.Pf { Ar interface0 , interface1 , ... No }
d152 2
a153 2
.Ar interface \*(Ba\ \&
.Pf { Ar interface0 , interface1 , ... No }
d169 1
a169 1
.Op Ic address \*(Ba\ route
d171 1
a171 1
.Aq Ar table
d178 2
a179 2
.Ar subtype \*(Ba\ \&
.Pf { Ar subtype0 , subtype1 , ... No }
d202 1
a202 1
.Op Ic address \*(Ba\ route
d400 1
a400 1
.Ar value Ic ( GHz \*(Ba MHz )
d417 4
a420 4
\*(Lt	(less than)
\*(Le	(less than or equal)
\*(Gt	(greater than)
\*(Ge	(greater than or equal)
d431 1
a431 1
.Ic ( from \*(Ba to \*(Ba bssid ) Ic any
d435 1
a435 1
.Ic ( from \*(Ba to \*(Ba bssid )
d437 1
a437 1
.Aq Ar table
d440 1
a440 1
.Aq Ar table
d446 1
a446 1
.Ic ( from \*(Ba to \*(Ba bssid )
d568 1
a568 1
.Ic sec \*(Ba usec
d628 1
a628 1
.Ic subtype auth Op Ic open request \*(Ba response
@


1.42
log
@clarify that the Mb keyword is Mbps; ok reyk
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.41 2013/07/16 11:13:33 schwarze Exp $
d17 1
a17 1
.Dd $Mdocdate: July 16 2013 $
d801 2
a802 2
	00:02:6f:42:d0:01 -> 172.23.5.1/30
	00:05:4e:45:d3:b8 -> 172.23.5.4/30
@


1.41
log
@use .Mt for email addresses; from Jan Stary <hans at stare dot cz>; ok jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.40 2013/01/17 21:39:29 jmc Exp $
d17 1
a17 1
.Dd $Mdocdate: January 17 2013 $
d408 2
a409 1
Match the frequency of the received frame.
d733 1
a733 1
# channel 3 (2.422GHz) transmitting frames with 1Mb.
@


1.40
log
@some simple macro fixes;
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.39 2012/04/24 14:56:09 jmc Exp $
d17 1
a17 1
.Dd $Mdocdate: April 24 2012 $
d824 1
a824 1
.An Reyk Floeter Aq reyk@@openbsd.org .
@


1.39
log
@take a stab at documenting when arguments need quoted, and valid macro
characters;

prompted by a diff from robert peichaer org

thanks gilles and henning for feedback
ok deraadt zinke
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.38 2011/06/23 20:35:22 sthen Exp $
d17 1
a17 1
.Dd $Mdocdate: June 23 2011 $
a207 1
.Pp
@


1.38
log
@Use a common text explaining how the various configuration parsers using
the standard OpenBSD-style parse.y handle continuing lines with backslashes,
paying particular attention to how comments are handled (which can cause
nasty side-effects if you're not expecting it).

Most wording from jmc@@, with suggestions from fgsch@@, marc@@, Richard Toohey,
patrick keshishian and Florian Obser, ok jmc@@.
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.37 2009/04/16 20:13:13 sobrado Exp $
d17 1
a17 1
.Dd $Mdocdate: April 16 2009 $
d58 3
d69 2
a70 2
Macro names must start with a letter, and may contain letters, digits
and underscores.
@


1.37
log
@fix a few more typos found by spell(1); rectify a double "with" pointed out
by jmc@@ while looking at this diff.

ok jmc@@, reyk@@ (for the hostapd part)
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.36 2007/05/31 19:20:24 jmc Exp $
d17 1
a17 1
.Dd $Mdocdate: May 31 2007 $
d50 2
d55 2
@


1.36
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.35 2006/12/31 03:25:58 reyk Exp $
d17 1
a17 1
.Dd $Mdocdate$
d701 1
a701 1
# Log rogue accesspoints via IAPP, limited to every second,
d712 1
a712 1
# rogue accesspoints. This is a common way to test the quality of
d725 1
a725 1
# Log rogue accesspoints with a strong signal quality on
@


1.35
log
@add a channel hopper for wireless interfaces. the channel hopper will
jump to the next available channel after a configurable delay for the
specified list of wireless "hostap" interfaces, see the new "set
hostap hopper" commands in hostapd.conf(5).

with help by jsg@@
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.34 2006/08/31 18:44:48 jmc Exp $
d17 1
a17 1
.Dd April 13, 2004
@


1.34
log
@knock out the cpp/m4 stuff from MACROS; after discussion with many...
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.33 2006/06/27 18:14:59 reyk Exp $
d143 12
@


1.33
log
@add new event rules to match optional elements of radiotap headers:
signal percentage, transmit rate and channel frequency.

ok and hints by jsg@@ jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.32 2006/05/15 21:09:49 reyk Exp $
d61 1
a61 5
Much like
.Xr cpp 1
or
.Xr m4 1 ,
macros can be defined that will later be expanded in context.
@


1.32
log
@mention the lack of authenticated management frames in IEEE 802.11.
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.31 2006/05/15 20:53:02 reyk Exp $
d3 1
a3 1
.\" Copyright (c) 2004, 2005 Reyk Floeter <reyk@@openbsd.org>
d307 1
d364 45
d716 6
@


1.31
log
@initial implementation of "IP Roaming" in hostapd, see hostapd.conf(5).

ok dlg@@
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.30 2006/03/10 18:10:16 reyk Exp $
a762 1

@


1.30
log
@some IAPP implementations still use the pre-standard port 2313 in broadcast
mode (tested with the HP ProCurve 420wl). add a note to the manual page and
the example configuration.
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.29 2005/12/29 04:33:58 reyk Exp $
d42 1
a42 1
.It Sy Event rules
d45 3
d153 9
d185 7
d671 76
d759 5
@


1.29
log
@add an 'include' rule to hostapd.conf(5); based on an older diff from
dhartmei@@ for the parser. this is useful if you have many hostapd
systems using the same configuration but individual local definitions
(like macros or table entries).
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.28 2005/12/18 17:54:12 reyk Exp $
d199 4
a202 2
The default is multicast using the multicast address 224.0.1.178 with a TTL
limited to 1 hop.
@


1.28
log
@Update my e-mail address in the copyright statement, no binary changes.
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.27 2005/12/10 22:16:22 jmc Exp $
d50 7
@


1.27
log
@tweak: ok reyk
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.26 2005/12/10 13:42:37 reyk Exp $
d3 1
a3 1
.\" Copyright (c) 2004, 2005 Reyk Floeter <reyk@@vantronix.net>
@


1.26
log
@add an option to increase the multicast ttl which is currently limited
to 1 hop. by using a higher multicast ttl, you could use inter-network
multicast forwarding of hostapd messages (i.e. with mrouted(8) or
multicast-capable routing switches); "set iapp mode multicast ttl 2".
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.25 2005/12/01 08:28:58 jmc Exp $
d179 5
a183 3
Use multicast frames.
A multicast ttl (time-to-live) of 2 or higher is required to allow
multicast forwarding, for example with
d192 1
a192 1
The default is multicast using the multicast address 224.0.1.178 with a ttl
@


1.25
log
@tweaks;
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.24 2005/12/01 05:10:38 deraadt Exp $
d177 1
d180 3
d190 2
a191 1
The default is multicast using the multicast address 224.0.1.178.
@


1.24
log
@typo
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.23 2005/12/01 02:03:57 reyk Exp $
d85 1
a85 1
and the capability to assign link layer to IP addresses and a option netmask
d154 1
a154 1
Sent and receive
d173 2
a174 1
.It Ic multicast
d177 1
d179 2
a180 1
.It Ic broadcast
d182 1
d321 1
a321 1
.Ar framedir.
@


1.23
log
@add configuration option to enable/disable specified iapp subtype handling
@
text
@d1 1
a1 1
5~.\" $OpenBSD: hostapd.conf.5,v 1.22 2005/12/01 01:28:19 reyk Exp $
@


1.22
log
@support netmasks in table entry ip address assignments
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.21 2005/11/23 20:40:38 reyk Exp $
d68 1
d142 26
@


1.21
log
@add optional interface rule for event rules
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.20 2005/11/20 12:02:04 reyk Exp $
d84 2
a85 2
and the capability to assign link layer to IP addresses is a
requirement for advanced IAPP functionality.
d104 3
@


1.20
log
@add support for multiple hostap (wireless) interfaces.

for example, if you run one hostapd with two ath(4) devices. you have
to specify "set hostap interface { ath0, ath1 }" in hostapd.conf(5).

man page bits by jmc@@, tested by others
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.19 2005/11/17 00:10:46 reyk Exp $
d171 1
a171 1
keywords and optional rule options, frame matching,
d176 1
d183 7
d209 15
d595 2
a596 2
# Re-inject a received IEEE 802.11 frame
hostap handle type management subtype auth with resend
@


1.19
log
@remove the BNF grammar definition from the manual page. it's getting a
pain to maintain this (have a look at parse.y for some BNF). theo was
right...
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.18 2005/11/16 00:01:19 reyk Exp $
d109 5
a113 1
.It Ic set hostap interface Ar interface
d118 3
@


1.18
log
@add a configuration option for specifying a non-standard port and multicast
address for the IAPP messages. this is an initial approach to run multiple
hostapds on one machine, further work will be done later.
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.17 2005/10/15 08:18:32 jmc Exp $
a570 64
.Ed
.Sh GRAMMAR
Syntax for
.Nm
in BNF:
.Bd -literal
grammar		= [ varset ] | [ tabledef ] | option | [ event ]

varset		= varname "=" varvalue

tabledef	= "table" table tableopts

table		= "<" tablename ">"

tableopts	= "const" | "{" [ "\en" ] "}" |
		  "{" [ "\en" ] tableaddrlist [ "\en" ] "}"

tableaddrlist	= lladdr [ "->" ipv4-dotted-quad | "&" lladdr-mask |
		  "/" number ] [ "," ] [ tableaddrlist ]

option		= "set" ( "hostap" "interface" name |
		  "iapp" "interface" name [ "passive" ] |
		  [ "iapp" "mode" ( "multicast" | "broadcast" ] )

event		= "hostap" "handle" [ eventopt ] [ frmmatch ] [ action ]
		  [ limit ] [ rate ]

eventopt	= "skip" | "quick"

action		= "with" ( "log" [ "verbose" ] | "frame" frmaction |
		  "iapp" "type" "radiotap" |
		  "node" ( "add" | "delete" ) frmactionaddr )

frmmatch	= [ frmmatchtype ] [ "dir" ( "any" | [ "!" ] frmdir ) ]
		  [ ( "from" | "to" | "bssid" ) frmmatchaddr ]

frmmatchtype	= "type" ( "any" | [ "!" ] ( "data" | "management"
		  [ frmmatchmgmt ] ) )

frmmatchmgmt	= "subtype" ( "any" | [ "!" ] frmsubtype )

frmmatchaddr	= "any" | [ "!" ] table | [ "!" ] lladdr

frmaction	= frmactiontype [ "dir" frmdir ]
		  ( "from" , "to" , "bssid" ) frmactionaddr

frmactiontype	= "type" ( "data" | "management" "subtype" frmsubtype )

frmactionaddr	= lladdr | refaddr | "random"

limit		= "limit" number ( "sec" | "usec" )

rate		= "rate" number "/" number "sec"

frmsubtype	= ( "probe-request" | "probe-resp" |
		  "beacon" ) [ frmelems ] | "atim" | "auth" | "deauth" |
		  "assoc-request" | "assoc-resp" | "reassoc-request" |
		  "reassoc-response"

frmelems	= "nwid" [ "!" ] name [ frmelems ]

frmdir		= ( "no" | "to" | "from" | "ds" "to" ) "ds"

refaddr		= "&" ( "from" | "to" | "bssid" )
@


1.17
log
@use some -ohang list types, for purely cosmetic reasons;
ok reyk@@
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.16 2005/10/05 16:09:55 reyk Exp $
d137 2
d141 1
d145 1
a145 2
The default is multicast.
The multicast group used is 224.0.1.178.
@


1.16
log
@the correct mask sign in table declarations is '&' (not '/').
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.15 2005/09/30 18:22:28 jmc Exp $
d445 1
a445 2
.Pp
.Bl -tag -width Ds -compact
d487 1
a487 2
.Pp
.Bl -tag -width Ds -compact
d522 1
a522 2
.Pp
.Bl -tag -width Ds -compact
@


1.15
log
@rewording for clarity;
ok reyk@@
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.14 2005/09/30 17:31:58 jmc Exp $
d97 1
a97 1
cisco="00:40:06:ff:ff:ff / ff:ff:ff:00:00:00"
@


1.14
log
@correct way to display a backslash is `\e' in mdoc;
grammar + spelling;
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.13 2005/09/30 16:53:16 reyk Exp $
d150 2
a151 7
.Pp
In difference to packet filter rules like in
.Xr pf.conf 5 ,
the
.Xr hostapd 8
event rules are handled without a state;
each rule is processed indepedently from the others and from
d153 3
@


1.13
log
@update the BNF
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.12 2005/09/30 16:50:03 reyk Exp $
d541 1
a541 1
hostap handle type management subtype probe request \\
d547 2
a548 2
hostap handle skip type management subtype ! beacon \\
    with log \\
d553 1
a553 1
hostap handle skip type management subtype beacon bssid !<myess> \\
d556 3
a558 3
# Send deauthentication frames to stations accociated to rogue APs
hostap handle type data bssid !<myess> with frame type management \\
    subtype deauth reason auth expire \\
d562 1
a562 1
# rogue accesspoints. This is common way to test the quality of
d564 2
a565 2
hostap handle skip type management subtype beacon bssid <pentest> \\
    with frame type management subtype auth \\
d572 1
a572 1
hostap handle type management subtype auth from <blacklist> \\
@


1.12
log
@implement a way to match IEEE 802.11 flooding. this will help to detect
known DoS attacks, like de-auth flooding against wireless networks.
an example is provided in the manual page.

"or could you just got for it?", deraadt@@
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.11 2005/09/29 23:57:00 reyk Exp $
d599 1
a599 1
		  [ limit ]
d625 2
@


1.11
log
@Add event rule examples
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.10 2005/09/12 09:32:42 jmc Exp $
d165 1
a165 1
a specified action, and a limit:
d172 1
d391 4
d416 17
d543 7
@


1.10
log
@preserve backslash using `\e', not `\\';
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.9 2005/09/10 21:47:36 reyk Exp $
d516 30
@


1.9
log
@fix small typo found by Benedikt Steinbusch
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.8 2005/07/04 22:49:02 jmc Exp $
d529 2
a530 2
tableopts	= "const" | "{" [ "\\n" ] "}" |
		  "{" [ "\\n" ] tableaddrlist [ "\\n" ] "}"
@


1.8
log
@whitespace;
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.7 2005/07/04 18:25:32 reyk Exp $
d529 1
a529 1
tableopts	= "const" | "{" [ "\n" ] "}" |
@


1.7
log
@describe the difference between radiotap and pcap mode
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.6 2005/07/04 18:12:31 reyk Exp $
d122 1
a122 1
signal levels. 
@


1.6
log
@update the hostapd.conf(5) manual page with a more detailed description
of the configuration language and grammar.
thanks to jmc@@ and jaredy@@
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.5 2005/06/17 20:17:01 jmc Exp $
d115 1
a115 1
Specify the Host AP mode.
d120 3
a122 1
<radiotap mode>
d124 1
a124 1
<pcap mode>
@


1.5
log
@formatting tweaks;
ok reyk@@
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.3 2005/04/13 20:03:06 jmc Exp $
d31 1
a31 1
file is divided into two main sections.
d82 2
a83 2
.Ic event rules
to match specified IEEE 802.11 link layer addresses and address ranges
d87 8
d108 1
a108 1
.Bl -tag -width xxxx
d114 10
d126 3
d130 12
a141 9
Specify the IAPP mode, if not using the default one.
IAPP could be used in multicast (default) or in broadcast mode.
The used multicast group is 224.0.1.178.
.Pp
Possible options:
.Bd -unfilled -offset indent
.Ic set iapp mode multicast
.Ic set iapp mode broadcast
.Ed
d146 1
a146 1
.Ic hostap interface .
d153 1
a153 1
event rules are handled without a state,
d157 3
a159 1
All hostapd event rules are single line statements beginning with
d163 7
a169 3
a specified action and a limit:
.Bd -literal -offset indent
hostap handle [<option>] [<frame>] [<action>] [<limit>]
d172 2
a173 3
The optional parts are defined below:
.Bl -tag -width xxxx
.It Aq Ic option
d175 1
a175 1
.Ic option
d191 7
d200 20
a219 6
.Bq Aq Ar type
.Bq Aq Ar subtype
.Bq Aq Ar dir
.Bq Aq Ar from
.Bq Aq Ar to
.Bq Aq Ar bssid
d221 24
d246 47
a292 3
.Ic frame
description specifies a mechanism to match IEEE 802.11 frames.
.It Ic with Aq Ar action
d297 35
a331 4
The following choices are available as an
.Ar action :
.Bd -literal
frame <type> <subtype> [<dir>] <from> <to> <bssid>
d333 63
a395 52
.Bd -unfilled -offset indent
.Ic type :
type data
type management
.Ed
.Bd -unfilled -offset indent
.Ic subtype :
subtype beacon
subtype deauth [<reason>]
subtype assoc request
subtype assoc resp
subtype atim
subtype auth
subtype probe request
subtype probe resp
subtype reassoc request
subtype reassoc response
.Ed
.Bd -unfilled -offset indent
.Ic reason :
reason assoc leave
reason assoc not authed
reason assoc toomany
reason auth expire
reason auth leave
reason ie invalid
reason mic failure
reason not authed
reason not assoced
reason rsn required
reason rsn inconsistent
reason unspecified
.Ed
.Bd -unfilled -offset indent
.Ic dir :
dir no ds
dir to ds
dir from ds
dir ds to ds
.Ed
.Bd -unfilled -offset indent
.Ic from/to/bssid :
( from | to | bssid ) lladdr
( from | to | bssid ) &refaddr
.Ed
.Bd -unfilled
iapp radiotap
log [verbose]
node ( add | delete ) <lladdr>
resend
.Ed
.It Xo
d397 2
a398 4
.Aq Ar number
.Pq Ar sec \*(Ba usec
.Xc
It is possible to
d400 4
a403 1
handling of specific rules.
d409 93
d503 10
d561 1
a561 1
frmactionaddr	= lladdr | refaddr
@


1.4
log
@first step to implement a proactive wireless monitoring system using
hostapd(8). it's a very simple but powerful approach using highly
flexible and stateless event and action rules for IEEE 802.11 traffic.
you can monitor a wireless network by watching frames with types and
addresses (with support for tables and masks) and you can trigger
actions like writing log messages, sending pcap/radiotap dumps to the
IAPP network, removing nodes from the hostap, resending received
frames and sending contructed 802.11 frames in reply to traffic
received from any rogue nodes.

it's based on some initial work from the c2k5 which has been tested
and improved during the last weeks. some missing documentation for
hostapd.conf(5) will be written as soon as possible.

ok deraadt@@
@
text
@d37 2
a38 2
Tables provide a mechanism to handle large number of linker layer
addresses easily with increased performance and flexibility.
d72 3
a74 2
addresses, masked address ranges and link layer to IP address
assignments. Lookups against tables in
d114 3
a116 3
.Bd -literal -offset indent
.Ar set iapp mode multicast
.Ar set iapp mode broadcast
d121 1
a121 1
receiving specified IEEE 802.11 frames on the 
d137 1
a137 1
a specified action and a limit.
d139 1
a139 1
.Ar hostap handle [<option>] [<frame>] [<action>] [<limit>]
d144 1
a144 1
.It Ar <option>
d149 1
a149 1
.Ar quick
d151 1
a151 1
.Ar skip .
d153 1
a153 1
.Ar quick
d155 1
a155 1
.Ar skip
d159 1
a159 1
.Ar skip
d162 9
a170 1
.It Ar [<type>] [<subtype>] [<dir>] [<from>] [<to>] [<bssid>]
d174 1
a174 1
.It Ar with <action>
d176 1
a176 1
.Ic action
d178 3
a180 2
description. The following choice are available as an
.Ic action :
d182 1
a182 1
.Ar frame <type> <subtype> [<dir>] <from> <to> <bssid>
d184 1
a184 2
.Pp
.Bd -literal -offset indent
d186 2
a187 2
.Ar type data
.Ar type management
d189 1
a189 2
.Pp
.Bd -literal -offset indent
d191 10
a200 10
.Ar subtype beacon
.Ar subtype deauth [<reason>]
.Ar subtype assoc request
.Ar subtype assoc resp
.Ar subtype atim
.Ar subtype auth
.Ar subtype probe request
.Ar subtype probe resp
.Ar subtype reassoc request
.Ar subtype reassoc response
d202 1
a202 2
.Pp
.Bd -literal -offset indent
d204 12
a215 12
.Ar reason assoc leave
.Ar reason assoc not authed
.Ar reason assoc toomany
.Ar reason auth expire
.Ar reason auth leave
.Ar reason ie invalid
.Ar reason mic failure
.Ar reason not authed
.Ar reason not assoced
.Ar reason rsn required
.Ar reason rsn inconsistent
.Ar reason unspecified
d217 1
a217 2
.Pp
.Bd -literal -offset indent
d219 4
a222 4
.Ar dir no ds
.Ar dir to ds
.Ar dir from ds
.Ar dir ds to ds
d224 1
a224 2
.Pp
.Bd -literal -offset indent
d226 2
a227 2
.Ar ( from | to | bssid ) lladdr
.Ar ( from | to | bssid ) &refaddr
d229 5
a233 6
.Pp
.Bd -literal
.Ar iapp radiotap
.Ar log [verbose]
.Ar node ( add | delete ) <lladdr>
.Ar resend
d235 5
a239 1
.It Ar limit <number> ( sec | usec )
d247 1
a247 1
In example, beacon frames will be normally received every 100 ms.
d301 4
a304 3
frmsubtype	= ( "probe-request" | "probe-resp" | "beacon" ) [ frmelems ] |
		  "atim" | "auth" | "deauth" | "assoc-request" | "assoc-resp" |
		  "reassoc-request" | "reassoc-response"
@


1.3
log
@tweaks; ok reyk@@
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.2 2005/04/13 19:06:11 deraadt Exp $
d36 3
d40 1
a40 1
Global settings for
d42 3
d70 27
d99 1
a99 1
.Bl -tag -width Ds
d114 188
a301 2
set iapp mode multicast
set iapp mode broadcast
d303 4
@


1.2
log
@spaces
@
text
@d1 1
a1 1
.\" $OpenBSD: hostapd.conf.5,v 1.1 2005/04/13 18:12:23 reyk Exp $
d43 1
a43 1
and extends to the end of the current line.
d59 1
a59 1
For example,
d68 2
a69 4
Specify the wireless interface running in
.Pa Host AP
mode.
This this option could be omitted to use the
d71 1
a71 3
to log received
.Pa IAPP
messages.
@


1.1
log
@add the initial version of the OpenBSD hostapd daemon

ok deraadt@@
@
text
@d1 1
a1 1
.\" $OpenBSD$
d79 1
a79 1
Specify the IAPP mode, if not using the default one. 
@

