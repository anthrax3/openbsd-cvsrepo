head	1.23;
access;
symbols
	OPENBSD_6_0:1.22.0.6
	OPENBSD_6_0_BASE:1.22
	OPENBSD_5_9:1.22.0.2
	OPENBSD_5_9_BASE:1.22
	OPENBSD_5_8:1.22.0.4
	OPENBSD_5_8_BASE:1.22
	OPENBSD_5_7:1.21.0.2
	OPENBSD_5_7_BASE:1.21
	OPENBSD_5_6:1.20.0.28
	OPENBSD_5_6_BASE:1.20
	OPENBSD_5_5:1.20.0.26
	OPENBSD_5_5_BASE:1.20
	OPENBSD_5_4:1.20.0.22
	OPENBSD_5_4_BASE:1.20
	OPENBSD_5_3:1.20.0.20
	OPENBSD_5_3_BASE:1.20
	OPENBSD_5_2:1.20.0.18
	OPENBSD_5_2_BASE:1.20
	OPENBSD_5_1_BASE:1.20
	OPENBSD_5_1:1.20.0.16
	OPENBSD_5_0:1.20.0.14
	OPENBSD_5_0_BASE:1.20
	OPENBSD_4_9:1.20.0.12
	OPENBSD_4_9_BASE:1.20
	OPENBSD_4_8:1.20.0.10
	OPENBSD_4_8_BASE:1.20
	OPENBSD_4_7:1.20.0.6
	OPENBSD_4_7_BASE:1.20
	OPENBSD_4_6:1.20.0.8
	OPENBSD_4_6_BASE:1.20
	OPENBSD_4_5:1.20.0.4
	OPENBSD_4_5_BASE:1.20
	OPENBSD_4_4:1.20.0.2
	OPENBSD_4_4_BASE:1.20
	OPENBSD_4_3:1.18.0.2
	OPENBSD_4_3_BASE:1.18
	OPENBSD_4_2:1.16.0.2
	OPENBSD_4_2_BASE:1.16
	OPENBSD_4_1:1.9.0.4
	OPENBSD_4_1_BASE:1.9
	OPENBSD_4_0:1.9.0.2
	OPENBSD_4_0_BASE:1.9
	OPENBSD_3_9:1.8.0.4
	OPENBSD_3_9_BASE:1.8
	OPENBSD_3_8:1.8.0.2
	OPENBSD_3_8_BASE:1.8
	OPENBSD_3_7:1.4.0.4
	OPENBSD_3_7_BASE:1.4
	OPENBSD_3_6:1.4.0.2
	OPENBSD_3_6_BASE:1.4
	OPENBSD_3_5:1.3.0.2
	OPENBSD_3_5_BASE:1.3;
locks; strict;
comment	@.\" @;


1.23
date	2017.03.20.15.31.23;	author bluhm;	state Exp;
branches;
next	1.22;
commitid	MQUBTVsa3plEHpse;

1.22
date	2015.07.27.17.28.40;	author sobrado;	state Exp;
branches;
next	1.21;
commitid	a73SHFfjDK7MTyGx;

1.21
date	2014.08.26.12.34.24;	author millert;	state Exp;
branches;
next	1.20;
commitid	q0zPAQjNjPk2zDXb;

1.20
date	2008.03.16.22.26.43;	author jmc;	state Exp;
branches;
next	1.19;

1.19
date	2008.03.16.03.07.03;	author cnst;	state Exp;
branches;
next	1.18;

1.18
date	2007.11.28.19.20.05;	author jmc;	state Exp;
branches;
next	1.17;

1.17
date	2007.11.28.17.03.59;	author tedu;	state Exp;
branches;
next	1.16;

1.16
date	2007.08.11.20.45.35;	author cnst;	state Exp;
branches;
next	1.15;

1.15
date	2007.08.11.20.36.33;	author cnst;	state Exp;
branches;
next	1.14;

1.14
date	2007.08.10.21.03.05;	author cnst;	state Exp;
branches;
next	1.13;

1.13
date	2007.07.31.08.11.36;	author jmc;	state Exp;
branches;
next	1.12;

1.12
date	2007.07.31.06.56.24;	author robert;	state Exp;
branches;
next	1.11;

1.11
date	2007.05.31.19.20.29;	author jmc;	state Exp;
branches;
next	1.10;

1.10
date	2007.05.30.07.49.37;	author cnst;	state Exp;
branches;
next	1.9;

1.9
date	2006.04.21.08.35.00;	author jmc;	state Exp;
branches;
next	1.8;

1.8
date	2005.08.10.16.32.06;	author aanriot;	state Exp;
branches;
next	1.7;

1.7
date	2005.08.10.12.18.35;	author aanriot;	state Exp;
branches;
next	1.6;

1.6
date	2005.05.11.20.12.12;	author jmc;	state Exp;
branches;
next	1.5;

1.5
date	2005.04.01.22.10.23;	author hshoexer;	state Exp;
branches;
next	1.4;

1.4
date	2004.06.27.22.48.27;	author jmc;	state Exp;
branches;
next	1.3;

1.3
date	2003.10.07.19.38.22;	author henning;	state Exp;
branches;
next	1.2;

1.2
date	2003.10.06.06.59.39;	author henning;	state Exp;
branches;
next	1.1;

1.1
date	2003.09.24.20.32.49;	author henning;	state Exp;
branches;
next	;


desc
@@


1.23
log
@Add command line option -f to specify alternative config file.
from Matthias Pitzl
@
text
@.\"	$OpenBSD: sensorsd.8,v 1.22 2015/07/27 17:28:40 sobrado Exp $
.\"
.\" Copyright (c) 2003 Henning Brauer <henning@@openbsd.org>
.\" Copyright (c) 2005 Matthew Gream <matthew.gream@@pobox.com>
.\" Copyright (c) 2007 Constantine A. Murenin <cnst@@openbsd.org>
.\"
.\" Permission to use, copy, modify, and distribute this software for any
.\" purpose with or without fee is hereby granted, provided that the above
.\" copyright notice and this permission notice appear in all copies.
.\"
.\" THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
.\" WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
.\" MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
.\" ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
.\" WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
.\" ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
.\" OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
.\"
.Dd $Mdocdate: July 27 2015 $
.Dt SENSORSD 8
.Os
.Sh NAME
.Nm sensorsd
.Nd hardware sensors monitor
.Sh SYNOPSIS
.Nm sensorsd
.Op Fl d
.Op Fl c Ar check
.Op Fl f Ar file
.Sh DESCRIPTION
The
.Nm
utility retrieves sensor monitoring data like fan speed,
temperature, voltage and RAID logical disk status via
.Xr sysctl 3 .
When the state of any monitored sensor changes, an alert is sent using
.Xr syslog 3
and a command, if specified, is executed.
.Pp
By default,
.Nm
monitors status changes on all sensors that keep their state,
thus sensors that automatically provide status do not require
any additional configuration.
In addition, for every sensor,
no matter whether it automatically provides its state or not,
custom low and high limits may be set,
so that a local notion of sensor status can be computed by
.Nm ,
indicating whether the sensor is within or is exceeding its limits.
.Pp
Limit and command values for a particular sensor may be specified in the
.Xr sensorsd.conf 5
configuration file.
This file is reloaded upon receiving
.Dv SIGHUP .
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl c Ar check
Check sensors every
.Ar check
seconds.
The shortest reporting period for state changes
will be three times this value.
The default is 20.
.It Fl d
Do not daemonize.
If this option is specified,
.Nm
will run in the foreground.
.It Fl f Ar file
Read configuration from
.Ar file
instead of the default configuration file
.Pa /etc/sensorsd.conf .
.El
.Sh FILES
.Bl -tag -width "/etc/sensorsd.conf"
.It Pa /etc/sensorsd.conf
Configuration file for
.Nm .
.El
.Sh SEE ALSO
.Xr sysctl 3 ,
.Xr syslog 3 ,
.Xr sensorsd.conf 5 ,
.Xr syslogd 8
.Sh HISTORY
The
.Nm
program first appeared in
.Ox 3.5 .
.Sh CAVEATS
Certain sensors may flip status from time to time.
To guard against false reports,
.Nm
implements a state dumping mechanism.
However, this inevitably introduces
an additional delay in status reporting and command execution,
e.g. one may notice that
.Nm
makes its initial report about the state of monitored sensors
not immediately, but about 60 seconds after it is started.
@


1.22
log
@use file system path (.Pa) semantic markup macros where appropriate.

ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: sensorsd.8,v 1.21 2014/08/26 12:34:24 millert Exp $
d19 1
a19 1
.Dd $Mdocdate: August 26 2014 $
d29 1
d72 5
@


1.21
log
@Don't single out ami(4) here; other RAID drivers support logical
drive reporting too.  OK jsing@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: sensorsd.8,v 1.20 2008/03/16 22:26:43 jmc Exp $
d19 1
a19 1
.Dd $Mdocdate: March 16 2008 $
d74 1
a74 1
.It /etc/sensorsd.conf
@


1.20
log
@text simplification;
@
text
@d1 1
a1 1
.\"	$OpenBSD: sensorsd.8,v 1.19 2008/03/16 03:07:03 cnst Exp $
d33 1
a33 3
temperature, voltage and
.Xr ami 4
logical disk status via
@


1.19
log
@Reduce the number of unnecessary time(3)/gettimeofday(2) calls, and make sure
that the time always goes forward, so reports are neither duplicated nor lost.

Report state changes stabilised through dampening immediately, instead of delay-
ing them until the next reporting window; previously, it was common for check()
to lag one second behind report(), hence the initial report was delayed one
extra minute (this then reduces the number of sleep(3)/nanosleep(2) calls, too).

ok ckuethe;  some man-page suggestions jmc
@
text
@d1 1
a1 1
.\"	$OpenBSD: sensorsd.8,v 1.18 2007/11/28 19:20:05 jmc Exp $
d19 1
a19 1
.Dd $Mdocdate: November 28 2007 $
d100 1
a100 1
not immediately, but about 60 seconds after it is being started up.
@


1.18
log
@sort options list;
@
text
@d1 1
a1 1
.\"	$OpenBSD: sensorsd.8,v 1.17 2007/11/28 17:03:59 tedu Exp $
a28 1
.Op Fl r Ar report
d65 3
a72 4
.It Fl r Ar report
Report changes in sensor status every
.Ar report
seconds.
d100 1
a100 1
not immediately, but either 1 or 2 minutes after it is being started up.
@


1.17
log
@add options to specify the check and report intervals. ok deraadt
@
text
@d1 1
a1 1
.\"	$OpenBSD: sensorsd.8,v 1.16 2007/08/11 20:45:35 cnst Exp $
d19 1
a19 1
.Dd $Mdocdate: August 11 2007 $
d62 4
a70 4
.It Fl c Ar check
Check sensors every
.Ar check
seconds.
@


1.16
log
@add caveats section, documenting previously undocumented state dumping mechanism;  ok jmc@@ henning@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: sensorsd.8,v 1.15 2007/08/11 20:36:33 cnst Exp $
d28 2
d67 8
@


1.15
log
@s/ and alerter// against previous:  'alerter' is not a standard word (yet),
even if it is present in certain dictionaries (it is). Also, it doesn't add
that much to .Nd anyhow.  Requested by jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: sensorsd.8,v 1.14 2007/08/10 21:03:05 cnst Exp $
d19 1
a19 1
.Dd $Mdocdate: August 10 2007 $
d82 11
@


1.14
log
@sync sensorsd.8:  add my copyright;  change NAME summary;  fix some grammar;
fix description of when the command is executed (it was wrong from the start);
say a few more words about automatic monitoring of all sensors that keep state.

ok henning@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: sensorsd.8,v 1.13 2007/07/31 08:11:36 jmc Exp $
d19 1
a19 1
.Dd $Mdocdate: July 31 2007 $
d24 1
a24 1
.Nd hardware sensors monitor and alerter
@


1.13
log
@something went wrong w/ previous;
@
text
@d1 1
a1 1
.\"	$OpenBSD: sensorsd.8,v 1.12 2007/07/31 06:56:24 robert Exp $
d5 1
d24 1
a24 1
.Nd monitor hardware sensors
d31 2
a32 2
utility retrieves sensor monitoring data like fan speeds,
temperatures, voltages, and
d36 1
a36 1
If the data is out of given limits, an alert is sent using
d42 9
a50 1
also monitors status changes on all sensors that keep their state.
@


1.12
log
@document the -d option of sensorsd; input and ok from jmc@@, deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: sensorsd.8,v 1.11 2007/05/31 19:20:29 jmc Exp $
d18 1
a18 1
.Dd $Mdocdate: May 31 2007 $
d25 1
a26 1
.Nm sensorsd
@


1.11
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: sensorsd.8,v 1.10 2007/05/30 07:49:37 cnst Exp $
d18 1
a18 1
.Dd $Mdocdate$
d25 1
d48 9
@


1.10
log
@Major update to sensorsd.

Improves support for both 'smart' (those providing sensor status) and
'old-style' sensors.

Due to re-design, the following improvements are now present and many
flaws are now gone:


== for smart sensors ==

* automatically monitor all sensors that provide status by themselves,
  with the possibility to ignore certain individual sensors or sensors
  of certain type (appropriate template for sensorsd.conf is included)

* report actual sensor status as provided by the driver. Previously,
  WARN, CRITICAL and UNKNOWN statuses were considered the same, but
  now they are different and will be reported separately. This also
  improves readability of the log-files and consistency with sysctl
  output.

* ability to ignore status provided by the driver with the 'istatus'
  keyword ("ignore automatic status" or "I set the status"), with the
  possibility to set your own settings for acceptable limits.
  Previously, it was not possible to set any kind of user limits for
  those sensors that had their own status facilities.


== for old-style sensors ==

* previously, lm(4)-style fans that were flagged SENSOR_FINVALID during
  sensorsd startup were completely ignored, but now their invalid status
  is appropriately reported, and they are monitored again when they come
  out of their invalid mode

* previously, a sensor that had an empty entry in the configuration file
  was reported to be "within limits", but now it will not be monitored
  at all (unless, of cause, it provides its own status)


As a bonus, sensorsd syslog entries should now be shorter, and the
majority of them will fit on one line on 80-column terminals.


ok beck@@, henning@@, deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: sensorsd.8,v 1.9 2006/04/21 08:35:00 jmc Exp $
d18 1
a18 1
.Dd March 15, 2005
@


1.9
log
@ami sysctl diff; from michael knudsen
ok dlg
@
text
@d1 1
a1 1
.\"	$OpenBSD: sensorsd.8,v 1.8 2005/08/10 16:32:06 aanriot Exp $
d37 4
@


1.8
log
@remove drivers from here.

ok jsg@@ deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: sensorsd.8,v 1.7 2005/08/10 12:18:35 aanriot Exp $
d29 4
a32 2
utility retrieves hardware sensor monitoring data like fan speeds,
temperatures and voltages, via
@


1.7
log
@add lmtemp(4) and viasio(4).

ok grange@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: sensorsd.8,v 1.6 2005/05/11 20:12:12 jmc Exp $
a49 6
.Xr it 4 ,
.Xr lm 4 ,
.Xr lmtemp 4 ,
.Xr nsclpcsio 4 ,
.Xr viaenv 4 ,
.Xr viasio 4 ,
@


1.6
log
@document conf file reload w/ SIGHUP;

from michael knudsen;
ok henning@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: sensorsd.8,v 1.5 2005/04/01 22:10:23 hshoexer Exp $
d52 1
d55 1
@


1.5
log
@sensorsd(8) execute command on exceeding limits
from matthew.gream@@pobox.com, thanks!

cleaning and ok deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: sensorsd.8,v 1.4 2004/06/27 22:48:27 jmc Exp $
d39 2
@


1.4
log
@add reference to nsclpcsio(4) to SEE ALSO;
prodded by Alexey E. Suslikov;
@
text
@d1 1
a1 1
.\"	$OpenBSD: sensorsd.8,v 1.3 2003/10/07 19:38:22 henning Exp $
d4 1
d18 1
a18 1
.Dd September 20, 2003
d32 1
a32 1
It uses
d34 1
a34 1
to send an alert if they are out of the given limits.
d36 1
a36 1
Limits for a particular sensor may be specified in the
@


1.3
log
@FILES /etc/sensorsd.conf
spotted by millert@@
ok millert@@ jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: sensorsd.8,v 1.2 2003/10/06 06:59:39 henning Exp $
d8 1
a8 1
.\" 
d49 1
@


1.2
log
@.Xr it 4
PR3512, From: zejames@@greyhats.org
@
text
@d1 1
a1 1
.\"	$OpenBSD: sensorsd.8,v 1.1 2003/09/24 20:32:49 henning Exp $
d38 6
@


1.1
log
@sensorsd monitors the hardware sensors as reported by sysctl in hw.sensors.
limits can be configured, out of range notifications through syslog.
config file parsing based on bob's hints, lots of hints from theo
feedback from grange, otto, mickey as well

ok deraadt@@; grange@@ on an earlier version
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d41 1
@

