head	1.45;
access;
symbols
	OPENBSD_6_1_BASE:1.45
	OPENBSD_6_0:1.44.0.4
	OPENBSD_6_0_BASE:1.44
	OPENBSD_5_9:1.44.0.2
	OPENBSD_5_9_BASE:1.44
	OPENBSD_5_8:1.43.0.6
	OPENBSD_5_8_BASE:1.43
	OPENBSD_5_7:1.43.0.2
	OPENBSD_5_7_BASE:1.43
	OPENBSD_5_6:1.42.0.10
	OPENBSD_5_6_BASE:1.42
	OPENBSD_5_5:1.42.0.8
	OPENBSD_5_5_BASE:1.42
	OPENBSD_5_4:1.42.0.4
	OPENBSD_5_4_BASE:1.42
	OPENBSD_5_3:1.42.0.2
	OPENBSD_5_3_BASE:1.42
	OPENBSD_5_2:1.41.0.6
	OPENBSD_5_2_BASE:1.41
	OPENBSD_5_1_BASE:1.41
	OPENBSD_5_1:1.41.0.4
	OPENBSD_5_0:1.41.0.2
	OPENBSD_5_0_BASE:1.41
	OPENBSD_4_9:1.39.0.16
	OPENBSD_4_9_BASE:1.39
	OPENBSD_4_8:1.39.0.14
	OPENBSD_4_8_BASE:1.39
	OPENBSD_4_7:1.39.0.10
	OPENBSD_4_7_BASE:1.39
	OPENBSD_4_6:1.39.0.12
	OPENBSD_4_6_BASE:1.39
	OPENBSD_4_5:1.39.0.8
	OPENBSD_4_5_BASE:1.39
	OPENBSD_4_4:1.39.0.6
	OPENBSD_4_4_BASE:1.39
	OPENBSD_4_3:1.39.0.4
	OPENBSD_4_3_BASE:1.39
	OPENBSD_4_2:1.39.0.2
	OPENBSD_4_2_BASE:1.39
	OPENBSD_4_1:1.38.0.8
	OPENBSD_4_1_BASE:1.38
	OPENBSD_4_0:1.38.0.6
	OPENBSD_4_0_BASE:1.38
	OPENBSD_3_9:1.38.0.4
	OPENBSD_3_9_BASE:1.38
	OPENBSD_3_8:1.38.0.2
	OPENBSD_3_8_BASE:1.38
	OPENBSD_3_7:1.36.0.6
	OPENBSD_3_7_BASE:1.36
	OPENBSD_3_6:1.36.0.4
	OPENBSD_3_6_BASE:1.36
	OPENBSD_3_5:1.36.0.2
	OPENBSD_3_5_BASE:1.36
	OPENBSD_3_4:1.34.0.2
	OPENBSD_3_4_BASE:1.34
	OPENBSD_3_3:1.27.0.2
	OPENBSD_3_3_BASE:1.27
	OPENBSD_3_2:1.26.0.4
	OPENBSD_3_2_BASE:1.26
	OPENBSD_3_1:1.26.0.2
	OPENBSD_3_1_BASE:1.26
	OPENBSD_3_0:1.24.0.2
	OPENBSD_3_0_BASE:1.24
	OPENBSD_2_9_BASE:1.21
	OPENBSD_2_9:1.21.0.2
	OPENBSD_2_8:1.18.0.2
	OPENBSD_2_8_BASE:1.18
	OPENBSD_2_7:1.17.0.2
	OPENBSD_2_7_BASE:1.17
	OPENBSD_2_6:1.14.0.2
	OPENBSD_2_6_BASE:1.14
	OPENBSD_2_5:1.6.0.2
	OPENBSD_2_5_BASE:1.6
	OPENBSD_2_4:1.4.0.2
	OPENBSD_2_4_BASE:1.4
	OPENBSD_2_3:1.2.0.4
	OPENBSD_2_3_BASE:1.2
	OPENBSD_2_2:1.2.0.2
	OPENBSD_2_2_BASE:1.2
	OPENBSD_2_1:1.1.0.4
	OPENBSD_2_1_BASE:1.1
	OPENBSD_2_0:1.1.0.2
	OPENBSD_2_0_BASE:1.1;
locks; strict;
comment	@# @;


1.45
date	2017.02.06.06.16.52;	author tb;	state Exp;
branches;
next	1.44;
commitid	xoVtRnJ24BbEsO7o;

1.44
date	2015.12.24.16.54.37;	author mmcc;	state Exp;
branches;
next	1.43;
commitid	52DQs4TJie3OmFZq;

1.43
date	2014.10.01.09.56.36;	author mpi;	state Exp;
branches;
next	1.42;
commitid	YjUss0iJWhbDg71W;

1.42
date	2013.01.18.21.48.43;	author jmc;	state Exp;
branches;
next	1.41;

1.41
date	2011.05.11.07.05.35;	author lum;	state Exp;
branches;
next	1.40;

1.40
date	2011.05.10.16.49.07;	author lum;	state Exp;
branches;
next	1.39;

1.39
date	2007.05.31.19.20.21;	author jmc;	state Exp;
branches;
next	1.38;

1.38
date	2005.04.25.07.42.10;	author jmc;	state Exp;
branches;
next	1.37;

1.37
date	2005.04.25.07.35.21;	author jmc;	state Exp;
branches;
next	1.36;

1.36
date	2004.03.09.17.39.33;	author tom;	state Exp;
branches;
next	1.35;

1.35
date	2004.01.23.23.08.47;	author jmc;	state Exp;
branches;
next	1.34;

1.34
date	2003.09.02.18.56.35;	author jmc;	state Exp;
branches;
next	1.33;

1.33
date	2003.06.21.21.47.34;	author jmc;	state Exp;
branches;
next	1.32;

1.32
date	2003.06.14.23.23.08;	author millert;	state Exp;
branches;
next	1.31;

1.31
date	2003.06.14.22.45.11;	author millert;	state Exp;
branches;
next	1.30;

1.30
date	2003.06.12.12.59.48;	author jmc;	state Exp;
branches;
next	1.29;

1.29
date	2003.06.10.21.55.02;	author millert;	state Exp;
branches;
next	1.28;

1.28
date	2003.05.13.01.23.10;	author millert;	state Exp;
branches;
next	1.27;

1.27
date	2003.01.29.16.53.36;	author jmc;	state Exp;
branches;
next	1.26;

1.26
date	2001.12.22.18.11.17;	author millert;	state Exp;
branches;
next	1.25;

1.25
date	2001.12.04.22.05.23;	author millert;	state Exp;
branches;
next	1.24;

1.24
date	2001.09.07.20.34.11;	author millert;	state Exp;
branches;
next	1.23;

1.23
date	2001.07.20.19.09.46;	author mpech;	state Exp;
branches;
next	1.22;

1.22
date	2001.07.11.12.47.33;	author mpech;	state Exp;
branches;
next	1.21;

1.21
date	2001.04.09.18.31.36;	author deraadt;	state Exp;
branches;
next	1.20;

1.20
date	2001.01.31.21.12.58;	author chris;	state Exp;
branches;
next	1.19;

1.19
date	2000.11.08.19.37.33;	author aaron;	state Exp;
branches;
next	1.18;

1.18
date	2000.05.15.06.55.44;	author deraadt;	state Exp;
branches;
next	1.17;

1.17
date	2000.05.01.20.49.11;	author millert;	state Exp;
branches;
next	1.16;

1.16
date	2000.03.29.07.01.29;	author deraadt;	state Exp;
branches;
next	1.15;

1.15
date	2000.03.19.17.57.00;	author aaron;	state Exp;
branches;
next	1.14;

1.14
date	99.10.07.06.24.11;	author ericj;	state Exp;
branches;
next	1.13;

1.13
date	99.07.08.22.07.39;	author aaron;	state Exp;
branches;
next	1.12;

1.12
date	99.07.08.21.46.53;	author aaron;	state Exp;
branches;
next	1.11;

1.11
date	99.07.02.20.11.47;	author aaron;	state Exp;
branches;
next	1.10;

1.10
date	99.06.17.20.27.32;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	99.06.05.22.16.26;	author aaron;	state Exp;
branches;
next	1.8;

1.8
date	99.05.28.23.00.04;	author aaron;	state Exp;
branches;
next	1.7;

1.7
date	99.05.23.14.11.31;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	98.12.29.12.04.37;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	98.11.08.00.21.25;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	98.09.22.01.40.30;	author weingart;	state Exp;
branches;
next	1.3;

1.3
date	98.08.29.21.11.15;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	97.05.29.04.26.55;	author gene;	state Exp;
branches;
next	1.1;

1.1
date	96.09.28.05.58.35;	author downsj;	state Exp;
branches;
next	;


desc
@@


1.45
log
@Use quotes to protect the password hash from shell expansion. Update hash
to the new bcrypt version $2b$ and use more rounds. Prof. Falken's password
is much safer now. Found thanks to a problem report by John McGuigan.

ok beck
@
text
@.\"	$OpenBSD: adduser.8,v 1.44 2015/12/24 16:54:37 mmcc Exp $
.\"
.\" Copyright (c) 1995-1996 Wolfram Schneider <wosch@@FreeBSD.org>. Berlin.
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\" $From: adduser.8,v 1.12 1996/08/28 17:54:13 adam Exp $
.Dd $Mdocdate: December 24 2015 $
.Dt ADDUSER 8
.Os
.Sh NAME
.Nm adduser ,
.Nm rmuser
.Nd add and delete users from the system
.Sh SYNOPSIS
.Nm adduser
.Bk -words
.Oo Fl batch Ar username
.Oo Ar group Ns Op , Ns Ar group
.Ar ...
.Oc
.Op Ar fullname
.Op Ar password
.Oc
.Op Fl check_only
.Op Fl class Ar login_class
.Op Fl config_create
.Op Fl dotdir Ar directory
.Oo
.Fl e
.Ar method | Fl encryption Ar method
.Oc
.Op Fl group Ar login_group
.Op Fl h | help | \&?
.Op Fl home Ar partition
.Op Fl message Ar file
.Op Fl noconfig
.Op Fl shell Ar shell
.Op Fl s | silent | q | quiet
.Op Fl uid_start Ar uid
.Op Fl uid_end Ar uid
.Op Fl v | verbose
.Op Fl unencrypted
.Ek
.Pp
.Nm rmuser
.Op Ar username
.Sh DESCRIPTION
The
.Nm adduser
program adds new users to the system.
The
.Nm rmuser
program removes users from the system.
When not passed any arguments, both
utilities operate in interactive mode and prompt for any required information.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Xo Fl batch Ar username
.Oo Ar group Ns Op , Ns Ar group
.Ar ... Oc
.Op Ar fullname
.Op Ar password
.Xc
Enter batch mode in which multiple users are specified on the command line
in a compact format.
By default the password is assumed to already be properly encrypted.
.It Fl check_only
Check the passwd, group, and shells databases for consistency and problems
then exit without performing any other operation.
.It Fl class Ar login_class
Use the specified
.Ar login_class
as the default user login class.
See
.Xr login.conf 5
for further details.
.It Fl config_create
Create or edit default configuration information and message file before
proceeding with the normal interactive adduser procedure.
.It Fl dotdir Ar directory
Copy files from
.Ar directory
into the HOME directory of new users.
Files named in the fashion of
.Dq Pa dot.foo
will be renamed to
.Dq Pa .foo .
By default, all files are made writable and readable by
their owner.
.\" don't allow group or world to write files and allow only owner
.\" to read/execute/write .rhost, .Xauthority, .kermrc, .netrc, Mail,
.\" prv, iscreen, term.
.It Fl encryption , e Ar method
Encrypt local passwords using
.Ar method
of encryption as described in
.Xr login.conf 5 .
If
.Ar method
is
.Dq auto ,
the encryption type will be derived from the user's login class.
.It Fl group Ar login_group
Specify the default login group.
A value of
.Ar USER
means that the username is to be used as the login group.
.It Fl help , h , \&?
Print a summary of options and exit.
.It Fl home Ar partition
Specify the default home partition where all users' home directories
are to be located.
.It Fl message Ar file
Send new users a welcome message from
.Ar file .
Specifying a value of
.Dq no
for
.Ar file
causes no message to be sent to new users.
.It Fl noconfig
Do not read the default configuration file.
.It Fl shell Ar shell
Specify the default shell for new users.
.It Xo
.Fl silent , s ,
.Fl quiet , q
.Xc
Causes the program to print fewer warnings, questions, and bug reports.
.It Fl uid_start Ar uid
Use UIDs from
.Ar uid
up when automatically generating UIDs.
.It Fl uid_end Ar uid
Do not use UIDs higher than
.Ar uid
when generating UIDs.
.It Fl unencrypted
Causes the program to assume that the password given in batch mode is
unencrypted.
The password will be encrypted before being added to the password file.
Use of this option is discouraged, as the username and cleartext password
will appear in the process list, which is visible to users.
.It Fl verbose , v
Causes the program to print many warnings and questions.
This option is recommended for novice users.
.El
.Pp
.Nm adduser
first performs consistency checks on the password, group, and shell databases.
This includes finding any duplicate user or group names, illegal shells, or
shells that aren't executable.
Once these tests are passed,
.Nm
performs the following operations for each new user:
.Bl -enum -offset indent
.It
Add the appropriate entries to the password and group files and re-generate
the password database using
.Xr pwd_mkdb 8 .
.It
Create a home directory and copy all files from the skeletal
login directory (normally
.Pa /etc/skel )
to this new directory.
Files named in the fashion of
.Dq Pa dot.foo
will be renamed to
.Dq Pa .foo
in the new directory.
.It
Mails the new user a welcome message at the discretion of the account creator.
.El
.Pp
Similarly, when removing a user,
.Nm rmuser
performs the following operations for the given
.Ar username :
.Bl -enum -offset indent
.It
Removes any
.Xr crontab 1
entries or
.Xr at 1
jobs belonging to the user.
.It
Removes the user from the password database and all groups in the group
database.
If a group becomes empty and its name is the same as the username,
the group is removed (this complements
.Nm adduser Ns 's
unique per-user groups).
.It
Recursively deletes all files in the user's home directory and removes the
directory itself (provided the directory actually belongs to the user).
.Nm rmuser
prompts for confirmation before actually doing this.
.It
Removes the user's incoming mail file if one exists.
.El
.Pp
Understandably,
.Nm rmuser
politely refuses to remove users whose UID is 0 (typically root).
.Sh RESTRICTIONS
.Bl -tag -width Ds
.It Sy username
It is recommended that login names contain only lowercase characters
and digits.
They may also contain uppercase characters, non-leading hyphens,
periods, underscores, and a trailing
.Ql $ .
Login names may not be longer than 31 characters.
.\" The reasons for this limit are "Historical".
.\" Given that people have traditionally wanted to break this
.\" limit for aesthetic reasons, it's never been of great importance to break
.\" such a basic fundamental parameter in UNIX.
.\" You can change UT_NAMESIZE in /usr/include/utmp.h and recompile the
.\" world; people have done this and it works, but you will have problems
.\" with any precompiled programs, or source that assumes the 8-character
.\" name limit and NIS. The NIS protocol mandates an 8-character username.
If you need a longer login name for email addresses,
you can define an alias in
.Pa /etc/mail/aliases .
.It Sy fullname
This should contain the user's first name and surname.
The
.Ql \&:
is not permitted.
.It Sy login_class
The specified user login class
must exist in
.Pa /etc/login.conf .
.It Sy shell
Only valid entries from the
.Xr shells 5
database or entries corresponding to
.Xr pppd 8
are permitted.
.It Sy uid_start
This value is the start of the range where free UID values are
searched for.
This value must be less than the value of uid_end.
The default value is 1000 or as configured in the configuration file.
.It Sy uid_end
This value is the end of the range where free UID values are
searched for.
This value must be more than the value of uid_start.
The default value is 2147483647 or as configured in the configuration file.
.It Sy gid/login group
This value is generated automatically, but can be specified at the
discretion of the person invoking the program.
.It Sy password
If not empty, the password is encrypted according to
.Xr login.conf 5 .
If empty, the account will be automatically disabled to prevent spurious
access to it.
.El
.\" .Sh UNIQUE GROUP
.\" Perhaps you're missing what *can* be done with this scheme that falls apart
.\" with most other schemes.  With each user in his/her own group the user can
.\" safely run with a umask of 002 and have files created in their home
.\" directory and not worry about others being able to read them.
.\"
.\" For a shared area you create a separate uid/gid (like cvs or ncvs on
.\" freefall) you place each person that should be able to access this area
.\" into that new group.
.\"
.\" This model of uid/gid administration allows far greater flexibility than
.\" lumping users into groups and having to muck with the umask when working
.\" in a shared area.
.\"
.\" I have been using this model for almost 10 years and found that it works
.\" for most situations, and has never gotten in the way.  (Rod Grimes)
.Sh CONFIGURATION
.Nm
follows these steps to extract its configuration
information:
.Pp
.Bl -enum -offset indent -compact
.It
Read internal variables.
.It
Read configuration file
.Pq Pa /etc/adduser.conf .
.It
Parse command-line options.
.El
.Pp
The
.Em adduser.conf
format is explained within that file and is quite straightforward.
.\" .Sh FORMAT
.\" .Bl -tag -width Ds -compact
.\" .Ql Pa #
.\" is a comment.
.\" .P
.\" .It Sy config file
.\" .Nm adduser
.\" reads and writes this file.
.\" See /etc/adduser.conf for more details.
.\" .It Sy message file
.\" Eval variables in this file. See /etc/adduser.message for more
.\" details.
.\" .El
.Sh FILES
.Bl -tag -width /etc/adduser.messageX -compact
.It Pa /etc/master.passwd
user database
.It Pa /etc/group
group database
.It Pa /etc/shells
shell database
.It Pa /etc/ptmp
lock file for the passwd database
.It Pa /etc/adduser.conf
configuration file for
.Nm adduser
.It Pa /etc/adduser.message
message file for
.Nm
.It Pa /etc/skel
skeletal login directory
.It Pa /var/log/adduser
log file for
.Nm
.El
.Sh EXAMPLES
Start
.Nm
in interactive mode:
.Pp
.Dl # adduser
.Pp
Create user
.Dq falken
and
login group
.Dq falken .
Invite user
.Dq falken
into groups
.Dq guest ,
.Dq staff ,
and
.Dq beer .
Realname (fullname)
is
.Dq Prof. Falken .
The password has been created using
.Xr encrypt 1 :
.Bd -literal -offset indent
# adduser -batch falken guest,staff,beer 'Prof. Falken' \e
    '$2b$10$aOadQNznQ1YJFnqNaRRneOvYvZAEO7atYiTND3EsLf6afHT5t1UIK'
.Ed
.Pp
Create user
.Dq vehlefanz
in login group
.Dq guest .
Start the free UID search at 5000.
No other groups, no realname, no password.
Send a welcome message:
.Bd -literal -offset indent
# adduser -uid_start 5000 -group guest \e
    -message /etc/adduser.message -batch vehlefanz
.Ed
.Pp
Create user
.Dq jsmith
and place in the
.Dq jsmith
login group.
Also add to the
.Dq staff
group.
No password:
.Pp
.Dl "# adduser -group USER -batch jsmith staff"
.Sh SEE ALSO
.Xr chpass 1 ,
.Xr finger 1 ,
.Xr passwd 1 ,
.Xr setlogin 2 ,
.Xr aliases 5 ,
.Xr group 5 ,
.Xr login.conf 5 ,
.Xr passwd 5 ,
.Xr shells 5 ,
.Xr nologin 8 ,
.Xr pwd_mkdb 8 ,
.Xr vipw 8 ,
.Xr yp 8
@


1.44
log
@more e-mail -> email
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.43 2014/10/01 09:56:36 mpi Exp $
d28 1
a28 1
.Dd $Mdocdate: October 1 2014 $
d376 1
a376 1
    $2a$06$1Sdjxjoxg4cNmT6zAxriGOLgdLXQ3HdJ2dKBbzEk68jSrO1EtLJ3C
@


1.43
log
@Do not mention sliplogin(8) and sl(4).
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.42 2013/01/18 21:48:43 jmc Exp $
d28 1
a28 1
.Dd $Mdocdate: January 18 2013 $
d244 1
a244 1
If you need a longer login name for e-mail addresses,
@


1.42
log
@command-line (adj.) -> command line (n.);
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.41 2011/05/11 07:05:35 lum Exp $
d28 1
a28 1
.Dd $Mdocdate: May 11 2011 $
a259 2
.Xr sliplogin 8
and
@


1.41
log
@Tweak previous from jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.40 2011/05/10 16:49:07 lum Exp $
d28 1
a28 1
.Dd $Mdocdate: May 10 2011 $
d86 1
a86 1
Enter batch mode in which multiple users are specified on the command-line
@


1.40
log
@Update EXAMPLES to reflect current behaviour.
reviewed by jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.39 2007/05/31 19:20:21 jmc Exp $
d28 1
a28 1
.Dd $Mdocdate: May 31 2007 $
d376 1
a376 2
.Pp
.Bd -literal -offset inedent
d388 1
a388 2
.Pp
.Bd -literal -offset inedent
@


1.39
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.38 2005/04/25 07:42:10 jmc Exp $
d28 1
a28 1
.Dd $Mdocdate$
d374 2
a375 5
Password is
.Dq joshua
(don't use such a password!).
Send user falken
a welcome message:
d377 4
a380 1
.Dl "# adduser -batch falken guest,staff,beer 'Prof. Falken' joshua"
d388 1
a388 1
Do not send a welcome message:
d390 16
a405 1
.Dl "# adduser -uid_start 5000 -group guest -message no -batch vehlefanz"
@


1.38
log
@put EXAMPLES into a more standard format (first description, then
example), and use literal to mark up the commands themselves;
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.37 2005/04/25 07:35:21 jmc Exp $
d28 1
a28 1
.Dd July 8, 1999
@


1.37
log
@- login names may contain underscores
- reference to setlogin(2) BUGS was irrelevant, so remove it
- mark up `$'

from ray;
ok millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.36 2004/03/09 17:39:33 tom Exp $
a352 2
# adduser
.Pp
d355 1
a355 1
in interactive mode.
d357 1
a357 1
# adduser -batch falken guest,staff,beer 'Prof. Falken' joshua
d378 1
a378 1
a welcome message.
d380 1
a380 1
# adduser -uid_start 5000 -group guest -message no -batch vehlefanz
d388 3
a390 1
Do not send a welcome message.
@


1.36
log
@Clarify -unencrypted.  Closes PR 3705.

ok otto@@, nick@@, millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.35 2004/01/23 23:08:47 jmc Exp $
d233 3
a235 3
periods, and a trailing '$'.
Login names may not be longer than 31 characters (see BUGS section of
.Xr setlogin 2 ) .
@


1.35
log
@`Ns' implies `No', so `Ns No' -> `Ns'; (even simpler in adduser(8))
discussed with todd@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.34 2003/09/02 18:56:35 jmc Exp $
d163 3
a165 3
The password will be encrypted before it's added to the password file.
Use of this option will leave username and cleartext password displayable
for any user.
@


1.34
log
@escape punctuation; (and a nit in openssl.1)
ok deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.33 2003/06/21 21:47:34 jmc Exp $
d115 1
a115 1
.It Fl encryption Ns No , Fl e Ar method
d148 2
a149 2
.Fl silent Ns No , Fl s Ns No ,
.Fl quiet Ns No , Fl q
d166 1
a166 1
.It Fl verbose Ns No , Fl v
d213 1
a213 1
.Nm adduser Ns No 's
@


1.33
log
@kill duplicate .Xr;
from Kent Spillner.
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.32 2003/06/14 23:23:08 millert Exp $
d51 1
a51 1
.Ar method No \&| Fl encryption Ar method
d54 1
a54 1
.Op Fl h | help | ?
d130 1
a130 4
.It Xo
.Fl help Ns No ,
.Fl h Ns No , Fl ?
.Xc
@


1.32
log
@Add an "auto" encryption type that calls encrypt(1) with "-c class".
This results in encrypt(1) picking the password cipher based on the
user's login class in /etc/login.conf.
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.31 2003/06/14 22:45:11 millert Exp $
a402 1
.Xr login.conf 5 ,
@


1.31
log
@Cipher type is set in login.conf, not passwd.conf these days; Otto Moerbeek
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.30 2003/06/12 12:59:48 jmc Exp $
d95 1
a95 1
as the default login class.
d120 5
@


1.30
log
@- section reorder
- macro fixes
- kill whitespace at EOL
- new sentence, new line
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.29 2003/06/10 21:55:02 millert Exp $
d119 1
a119 1
.Xr passwd.conf 5 .
d277 1
a277 1
.Xr passwd.conf 5 .
d398 1
a398 1
.Xr passwd.conf 5 ,
@


1.29
log
@Add login class support; based on a diff from Peter Werner
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.28 2003/05/13 01:23:10 millert Exp $
d66 2
a67 1
.Nm rmuser Op Ar username
d229 3
a231 2
and digits. They may also contain uppercase characters, non-leading
hyphens, periods, and a trailing '$'.
d302 2
a303 2
.Bl -tag -width Ds -compact
.It Sy 1.
d305 1
a305 1
.It Sy 2.
d307 2
a308 3
.Po Ns Pa /etc/adduser.conf
.Pc .
.It Sy 3.
d328 22
a388 22
.Sh FILES
.Bl -tag -width /etc/adduser.messageX -compact
.It Pa /etc/master.passwd
user database
.It Pa /etc/group
group database
.It Pa /etc/shells
shell database
.It Pa /etc/ptmp
lock file for the passwd database
.It Pa /etc/adduser.conf
configuration file for
.Nm adduser
.It Pa /etc/adduser.message
message file for
.Nm
.It Pa /etc/skel
skeletal login directory
.It Pa /var/log/adduser
log file for
.Nm
.El
@


1.28
log
@Sync valid username check w/ user(1).  Patch from Brian Poole,
problem reported by juncus on misc
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.27 2003/01/29 16:53:36 jmc Exp $
d46 1
d91 7
d154 1
a154 1
Do not use UIDs higher than 
d228 3
a230 3
and digits. They may also contain uppercase characters, non-leading 
hyphens, periods, and a trailing '$'. 
Login names may not be longer than 31 characters (see BUGS section of 
d248 4
d395 1
@


1.27
log
@typos;

many tweaks by millert@@ (thanks)
thanks mpech@@ for help with adduser(8)

ok millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.26 2001/12/22 18:11:17 millert Exp $
d219 4
a222 2
Login names should contain only lowercase characters or digits.
They should be no longer than 31 characters (see BUGS section of
@


1.26
log
@No Virginia, there is no adduser.conf(5).
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.25 2001/12/04 22:05:23 millert Exp $
d37 1
d63 1
d181 1
a181 1
int the new directory.
@


1.25
log
@All files are copied from the skel dir, not just dot.*
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.24 2001/09/07 20:34:11 millert Exp $
d296 1
a296 1
.Xr adduser.conf 5
@


1.24
log
@Cleanup from Brian Poole:
o remove useless copyright() sub since it does nothing
o remov unused variables
o clear hashes properly
o grammar/spelling fixes
o pass perl -w
o unlock the ptmp file before we close it, not after
o parse args in config_read() correctly
o man page cleanup
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.23 2001/07/20 19:09:46 mpech Exp $
d171 2
a172 3
Create a home directory and copy all
.Pa dot.*
files from the skeletal login directory (normally
d175 5
@


1.23
log
@we don't like:
o) .Pp before/after .Sh;
o) .Pp before/after .Sh;
o) .Nm without argument in SYNOPSIS;
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.22 2001/07/11 12:47:33 mpech Exp $
d49 1
a49 1
.Ar method No \&| Fl encrypt_method Ar method
a57 1
.Op Fl uid Ar uid
d104 1
a104 1
.It Fl encrypt Ns No , Fl e Ar method
d139 1
a139 1
.It Fl uid Ar uid
d143 4
d354 2
@


1.22
log
@since Feb'99 uid_end is 2147483647, not 32000.

millert@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.21 2001/04/09 18:31:36 deraadt Exp $
a206 1
.Pp
@


1.21
log
@31 vs 32; ianm@@cit.uws.edu.au
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.20 2001/01/31 21:12:58 chris Exp $
d247 1
a247 1
The default value is 32000 or as configured in the configuration file.
@


1.20
log
@32 character user names
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.19 2000/11/08 19:37:33 aaron Exp $
d212 1
a212 1
They should be no longer than 32 characters (see BUGS section of
@


1.19
log
@- Get rid of ".Sh OPTIONS" and always use the standard options list intro.
- Move some BUGS/CAVEATS to the end of the man pages where they should go.
- Correct some .Nm usage.
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.18 2000/05/15 06:55:44 deraadt Exp $
d212 1
a212 1
They should be no longer than 8 characters (see BUGS section of
@


1.18
log
@/etc/mail/aliases
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.17 2000/05/01 20:49:11 millert Exp $
d75 80
a291 79
.Sh OPTIONS
.Bl -tag -width Ds
.It Xo Fl batch Ar username
.Oo Ar group Ns Op , Ns Ar group
.Ar ... Oc
.Op Ar fullname
.Op Ar password
.Xc
Enter batch mode in which multiple users are specified on the command-line
in a compact format.
By default the password is assumed to already be properly encrypted.
.It Fl check_only
Check the passwd, group, and shells databases for consistency and problems
then exit without performing any other operation.
.It Fl config_create
Create or edit default configuration information and message file before
proceeding with the normal interactive adduser procedure.
.It Fl dotdir Ar directory
Copy files from
.Ar directory
into the HOME directory of new users.
Files named in the fashion of
.Dq Pa dot.foo
will be renamed to
.Dq Pa .foo .
By default, all files are made writable and readable by
their owner.
.\" don't allow group or world to write files and allow only owner
.\" to read/execute/write .rhost, .Xauthority, .kermrc, .netrc, Mail,
.\" prv, iscreen, term.
.It Fl encrypt Ns No , Fl e Ar method
Encrypt local passwords using
.Ar method
of encryption as described in
.Xr passwd.conf 5 .
.It Fl group Ar login_group
Specify the default login group.
A value of
.Ar USER
means that the username is to be used as the login group.
.It Xo
.Fl help Ns No ,
.Fl h Ns No , Fl ?
.Xc
Print a summary of options and exit.
.It Fl home Ar partition
Specify the default home partition where all users' home directories
are to be located.
.It Fl message Ar file
Send new users a welcome message from
.Ar file .
Specifying a value of
.Dq no
for
.Ar file
causes no message to be sent to new users.
.It Fl noconfig
Do not read the default configuration file.
.It Fl shell Ar shell
Specify the default shell for new users.
.It Xo
.Fl silent Ns No , Fl s Ns No ,
.Fl quiet Ns No , Fl q
.Xc
Causes the program to print fewer warnings, questions, and bug reports.
.It Fl uid Ar uid
Use UIDs from
.Ar uid
up when automatically generating UIDs.
.It Fl unencrypted
Causes the program to assume that the password given in batch mode is
unencrypted.
The password will be encrypted before it's added to the password file.
Use of this option will leave username and cleartext password displayable
for any user.
.It Fl verbose Ns No , Fl v
Causes the program to print many warnings and questions.
This option is recommended for novice users.
.El
a377 1

@


1.17
log
@skel now lives in /etc
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.16 2000/03/29 07:01:29 deraadt Exp $
d144 1
a144 1
.Pa /etc/aliases .
@


1.16
log
@no adduser_proc(8) anymore
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.15 2000/03/19 17:57:00 aaron Exp $
d91 1
a91 1
.Pa /usr/share/skel )
d357 1
a357 1
.It Pa /usr/share/skel
@


1.15
log
@Remove hard sentence breaks. Add $OpenBSD$ tags where appropriate. Some other
cleanup along the way.
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.14 1999/10/07 06:24:11 ericj Exp $
a372 1
.Xr adduser_proc 8 ,
@


1.14
log
@adduser.messages -> adduser.message
@
text
@d1 2
a2 1
.\"	$OpenBSD: adduser.8,v 1.13 1999/07/08 22:07:39 aaron Exp $
d68 2
a69 1
program adds new users to the system. The
d71 2
a72 1
program removes users from the system. When not passed any arguments, both
d78 2
a79 1
shells that aren't executable. Once these tests are passed,
d110 2
a111 1
database. If a group becomes empty and its name is the same as the username,
d131 2
a132 2
Login names should contain only lowercase characters or digits. They should be
no longer than 8 characters (see BUGS section of
d146 2
a147 1
This should contain the user's first name and surname.  The
d160 2
a161 1
searched for.  This value must be less than the value of uid_end.
d165 2
a166 1
searched for.  This value must be more than the value of uid_start.
d232 2
a233 1
into the HOME directory of new users.  Files named in the fashion of
d248 2
a249 1
Specify the default login group.  A value of
d283 2
a284 2
unencrypted. The password will be encrypted before it's added to the
password file.
d340 2
a341 2
Start the free
UID search at 5000. No other groups, no realname, no password.
@


1.13
log
@- use `#' prompts instead of `$' prompts (need to be root to run adduser)
- mdoc'ify the -batch option syntax properly
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.12 1999/07/08 21:46:53 aaron Exp $
d344 1
a344 1
.It Pa /etc/adduser.messages
@


1.12
log
@merge adduser(8) and rmuser(8) man pages, plus add more information... hmm,
could still probably use a bit of work
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.11 1999/07/02 20:11:47 aaron Exp $
d36 7
a42 4
.Oo Fl batch Ar username No [ Ns Ar group
.Ns Op Ns , Ns Ar group
.Ar ... Oc
.Op Ar fullname Op Ar password
d206 6
a211 1
.It Sy -batch username [group[,group]...] [fullname] [password]
d215 1
a215 1
.It Sy -check_only
d218 1
a218 1
.It Sy -config_create
d221 1
a221 1
.It Sy -dotdir Ar directory
d233 1
a233 1
.It Sy -encrypt,-e Ar method
d238 1
a238 1
.It Sy -group Ar login_group
d242 4
a245 1
.It Sy -help,-h,-?
d247 1
a247 1
.It Sy -home Ar partition
d250 1
a250 1
.It Sy -message Ar file
d258 1
a258 1
.It Sy -noconfig
d260 1
a260 1
.It Sy -shell Ar shell
d262 4
a265 1
.It Sy -silent,-s,-quiet,-q
d267 1
a267 1
.It Sy -uid Ar uid
d271 1
a271 1
.It Sy -unencrypted
d277 1
a277 1
.It Sy -verbose,-v
d295 1
a295 1
$ adduser
d301 1
a301 1
$ adduser -batch falken guest,staff,beer 'Prof. Falken' joshua
d324 1
a324 1
$ adduser -uid_start 5000 -group guest -message no -batch vehlefanz
@


1.11
log
@consistent .Dd usage; proper format is: .Dd Month DD, YYYY
@
text
@d1 1
a1 2
.\"	$OpenBSD: adduser.8,v 1.10 1999/06/17 20:27:32 espie Exp $
.\"
d27 1
a27 1
.Dd January 9, 1995
d31 3
a33 2
.Nm adduser
.Nd command for adding new users
d36 4
a39 1
.Op Fl batch Ar username No [group[,group]...] [fullname] [password]
d42 5
a46 2
.Op Fl dotdir Ar dotdir
.Op Fl e | encrypt_method
d48 3
a50 3
.Op Fl h | help
.Op Fl home Ar home
.Op Fl message Ar message_file
d54 3
a56 2
.Op Fl uid_start Ar uid_start
.Op Fl uid_end Ar uid_end
d59 2
d62 11
d74 46
a119 6
is a simple program for adding new users.
.Nm
first performs consistency
checks on the passwd, group, and shell databases. It creates passwd/group
entries, a HOME directory, dotfiles for a new user, and sends him or her a
welcome message at the discretion of the person creating the account.
d124 2
a125 3
no longer than 8 characters (see
.Xr setlogin 2
BUGS section).
d138 2
a139 2
This should contain the user's firstname and surname.  The
.Dq \&:
d169 2
a170 2
.\" safely run with a umask of 002 and have files created in their home directory
.\" and not worry about others being able to read them.
d172 3
a174 3
.\" For a shared area you create a separate uid/gid (like cvs or ncvs on freefall),
.\" you place each person that should be able to access this area into that new
.\" group.
d176 3
a178 3
.\" This model of uid/gid administration allows far greater flexibility than lumping
.\" users into groups and having to muck with the umask when working in a shared
.\" area.
d198 3
a200 2
The adduser.conf format is explained within that file and is quite
straightforward.
d287 1
a287 1
$ adduser -unencrypted -batch falken guest,staff,beer 'Prof. Falken' joshua
a306 7
Create the HOME directory
.Pa /home/falken
and copy all files and directories
from
.Pa /usr/share/skel
to
.Pa /home/falken .
d320 1
a320 1
.Bl -tag -width /etc/master.passwdxx -compact
d328 5
a332 3
config file for adduser
.It Pa /etc/adduser.message
message file for adduser
d336 2
a337 1
logfile for adduser
d350 1
d354 1
a354 5
.\" .Sh BUGS
.Sh HISTORY
This
.Nm
program appeared in FreeBSD 2.1.
@


1.10
log
@Dislexy strikes again
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.9 1999/06/05 22:16:26 aaron Exp $
d28 1
a28 1
.Dd Jan, 9, 1995
@


1.9
log
@remove trailing whitespace, some Nm cleanup
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.8 1999/05/28 23:00:04 aaron Exp $
d150 1
a150 1
.It Sy -create_config
@


1.8
log
@more .El madness
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.7 1999/05/23 14:11:31 aaron Exp $
d53 1
a53 1
.Nm adduser 
d55 1
a55 1
.Nm adduser
d64 1
a64 1
no longer than 8 characters (see 
d66 2
a67 2
BUGS section). 
.\" The reasons for this limit are "Historical". 
d79 1
a79 1
This should contain the user's firstname and surname.  The 
d83 1
a83 1
Only valid entries from the 
d100 1
a100 1
discretion of the person invoking the program. 
d102 1
a102 1
If not empty, the password is encrypted according to 
d112 1
a112 1
.\" 
d116 1
a116 1
.\" 
d120 1
a120 1
.\" 
d124 1
a124 1
.Nm adduser
d151 1
a151 1
Create or edit default configuration information and message file before 
d154 2
a155 2
Copy files from 
.Ar directory 
d158 1
a158 1
will be renamed to 
d160 1
a160 1
By default, all files are made writable and readable by 
d168 1
a168 1
of encryption as described in 
d171 1
a171 1
Specify the default login group.  A value of 
d189 1
a189 1
.It Sy -shell Ar shell 
d192 1
a192 1
Causes the program to print fewer warnings, questions, and bug reports. 
d194 1
a194 1
Use UIDs from 
d210 1
a210 1
.\" is a comment.  
d214 1
a214 1
.\" reads and writes this file. 
d224 1
a224 1
.Nm adduser
d234 1
a234 1
Invite user 
d241 1
a241 1
Realname (fullname) 
d249 1
a249 1
and copy all files and directories 
d254 1
a254 1
Send user falken 
@


1.7
log
@remove argument from .Os macros so value in /usr/share/tmac/mdoc/doc-common
is used instead; kwesterback@@home.com
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.6 1998/12/29 12:04:37 deraadt Exp $
d206 1
@


1.6
log
@do batch in encrypted mode by default; ibo@@val-axs.net
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.5 1998/11/08 00:21:25 aaron Exp $
d30 1
a30 1
.Os OpenBSD
@


1.5
log
@usr.sbin/ man page repairs, a-i
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.4 1998/09/22 01:40:30 weingart Exp $
d51 1
d146 1
d197 6
d226 1
a226 1
$ adduser -batch falken guest,staff,beer 'Prof. Falken' joshua
@


1.4
log
@Add support for having UIDs past 32000.  Changed the option -uid to
-uid_start, and added -uid_end to specify valid ranges to adduser.
Manpage updated to relfect reality, plus a couple spelling errors.
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.3 1998/08/29 21:11:15 deraadt Exp $
a27 1

a33 1

d36 15
a50 8
    [-batch username [group[,group]...] [fullname] [password]]
    [-check_only] [-config_create] [-dotdir dotdir] 
    [-e|-encrypt method] [-group login_group] [-h|-help] 
    [-home home] [-message message_file] [-noconfig] 
    [-shell shell] [-s|-silent|-q|-quiet]
    [-uid_start uid_start] [-uid_end uid_end]
    [-v|-verbose]

d52 4
a55 2
.Nm Adduser 
is a simple program for adding new users. Adduser first performs consistency
d57 1
a57 1
entries, a HOME-directory, dotfiles for a new user, and sends him or her a
a58 1

d60 1
a60 1
.Bl -tag -width Ds -compact
d79 1
a79 1
.Ql Pa \:
d84 5
a88 1
database or entries corresponding to sliplogin and pppd are permitted.
d90 1
a90 1
This value is the start of the range where free uid values are
d94 1
a94 1
This value is the end of the range where free uid values are
d98 1
a98 1
This value is generated automatically, but it can be specified at the
a104 1
.
d123 2
a124 1
Adduser follows these steps to extract its configuration
d126 1
d131 3
a133 1
Read configuration file (/etc/adduser.conf)
d135 1
a135 1
Parse command-line options
d137 1
a137 1

a139 1

a144 1

d146 1
a146 1
Check the passwd, group, shells databases for consistency and problems
a147 1

a150 1

d154 2
a155 2
into the HOME-directory of new users.  Files named in the fashion of
.Ql Pa dot.foo
d157 1
a157 1
.Ql Pa .foo .
a162 1

a167 1

a171 1

a173 1

a176 1

d181 1
a181 1
.Ar no
a184 1

a186 1

a188 1

a190 1

d192 1
a192 1
Use uid's from 
d194 1
a194 2
up when automatically generating uid's.

a197 1

a201 1

d204 1
a204 1
.\" .Nm Adduser
a210 1

a211 1
.Pp
d214 3
a216 2
Start adduser in interactive mode.

d220 26
a245 5
Create user 'falken' and  login group 'falken'. Invite user 
falken into groups guest, staff and beer. Realname (fullname) 
is 'Prof. Falken'. Password is 'joshua' (don't use such a password!). Create
the HOME directory '/home/falken' and copy all files and directories 
from /usr/share/skel to /home/falken. Send user falken 
a246 1

d250 5
a254 1
Create user 'vehlefanz' in login group guest. Start the free
a256 1

a273 1

d280 1
a282 1
.Xr group 5 ,
a287 1

a288 1

@


1.3
log
@man page repairs; aaron@@ug.cs.dal.ca
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.2 1997/05/29 04:26:55 gene Exp $
d42 2
a43 1
    [-shell shell] [-s|-silent|-q|-quiet] [-uid uid_start] 
d79 8
a86 3
.It Sy uid
This value is automatically generated or assigned at the invoker's 
discretion; however, it must be less than 32000.
d232 1
a232 1
$ adduser -uid 5000 -group guest -message no -batch vehlefanz
d234 2
a235 2
Create user 'vehlefanz' in login group guest. Uid is up to
5000, for instance 5007. No other groups, no realname, no password.
@


1.2
log
@Major cleanup:
+ No longer prompt for setting of default options _every_ time it's invoked.
Only does that when adduser.conf doesn't exist or with the passing of
-config_create
+ Scriptwork cleanup and prettying
+ Fix the manpage to use proper English and give examples and better docs in
general.
+ Improve the bonehead question "Use passwords" to seem more intuitively
meaningful.
+ Add support for multiple kinds of encryption with a default entry or a new
-e flag (passwd.conf).  TODO: Make adduser grok passwd.conf and add users
for whom the encryption is different to it.
+ "and more..." see the manpage.
@
text
@d1 1
a1 1
.\"	$OpenBSD: adduser.8,v 1.1 1996/09/28 05:58:35 downsj Exp $
d49 2
a50 3
entries, a HOME-directory, and dotfiles for a new user, and sends
him or her a welcome message at the discretion of the person creating
the account.
d73 1
a73 1
is not permitted..
d79 1
a79 1
This value is automatically generated or assigend at the invoker's 
d86 1
a86 1
.Xr passwd.conf 5
d125 1
a125 1
Enter batch mode in which multiple users are specified on the command line
d164 1
a164 1
Specify the default home partition where all users home directories
d191 1
a191 1
Causes the program to print many warnings and question.
@


1.1
log
@Perl adduser(8) from FreeBSD.

TODO: Hack to accept the same arguments as BSD/OS adduser(8).  Add rmuser(8).
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d40 4
a43 4
    [-group login_group] [-h|-help] [-home home] 
    [-message message_file] [-noconfig] [-shell shell] 
    [-s|-silent|-q|-quit] [-uid uid_start] [-v|-verbose]

d47 5
a51 3
is a simple program for adding new users. Adduser checks
passwd, group and shell database. It creates passwd/group entry,
HOME-directory, dotfiles and sends new user a welcome message.
d56 2
a57 2
Login name. Only lowercase characters or digits. Maximum length
is 8 characters (see 
d72 1
a72 1
Firstname and surname. 
d74 1
a74 1
not allowed.
d76 3
a78 1
Only valid shells from shell database or sliplogin and pppd
d80 2
a81 1
Automatically generated or your choice, less than 32000.
d83 2
a84 1
Your choice or automatically generated. 
d86 5
a90 1
If not empty, password is encoded with crypt.
a91 1

a107 1

d109 2
d113 1
a113 1
Read intern variables.
d115 1
a115 1
Read config file (/etc/adduser.conf)
d117 1
a117 1
Parse command line options
d120 3
d126 2
a127 1
Batch mode.
d130 2
a131 1
Check /etc/passwd, /etc/group, /etc/shells and exit.
d134 2
a135 1
Create new config and message file and exit. 
d140 1
a140 1
into the HOME-directory of new users,
d142 1
a142 1
files renamed to 
d144 11
a154 8
Don't copy files if
.Ar directory 
equal with 
.Ar no .
For security make all files writable and readable for owner,
don't allow group or world to write files and allow only owner
to read/execute/write .rhost, .Xauthority, .kermrc, .netrc, Mail,
prv, iscreen, term.
d157 1
a157 1
Login group. 
d159 1
a159 1
means use username as login group.
d162 1
a162 1
Print options and exit.
d165 2
a166 1
Default home partition where all users located.
d169 7
a175 5
Send new users a welcome message.
Don't send message if
.Ar file 
equal with
.Ar no .
d178 1
a178 1
Do not read config file.
d181 1
a181 1
Default shell for new users.
d183 2
a184 2
.It Sy -silent,-s,-quit,-q
Few warnings, question, bug reports. 
d189 1
a189 1
up.
d192 2
a193 1
Many warning, question. Recommended for novice users.
d195 14
a208 16


.Sh FORMAT
.Bl -tag -width Ds -compact
.Ql Pa #
is a comment.  

.P
.It Sy config file
.Nm Adduser
reads and writes this file. 
See /etc/adduser.conf for more details.
.It Sy message file
Eval variables in this file. See /etc/adduser.message for more
details.
.El
d217 1
a217 1
$ adduser -batch baerenklau guest,staff,baer 'Teddy II' qwerty7
d219 5
a223 5
Create user 'baerenklau' and  login group 'baerenklau'. Invite user 
baerenklau into groups guest, staff and baer. Realname (fullname) 
is 'Teddy II'. Password is 'qwerty7' (don't use such password!). Create
HOME directory '/home/baerenklau' and copy all files and directories 
from /usr/share/skel to /home/baerenklau. Send user baerenklau 
d229 1
a229 1
Create user 'vehlefanz'. Login group is guest. Uid is up to
d258 1
@
