head	1.3;
access;
symbols
	OPENBSD_5_2:1.2.0.42
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.40
	OPENBSD_5_0:1.2.0.38
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.36
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.34
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.30
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.32
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.28
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.26
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.24
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.22
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.20
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.18
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.16
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.2.0.14
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.2.0.12
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.2.0.10
	OPENBSD_3_6_BASE:1.2
	OPENBSD_3_5:1.2.0.8
	OPENBSD_3_5_BASE:1.2
	OPENBSD_3_4:1.2.0.6
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.2.0.4
	OPENBSD_3_3_BASE:1.2
	OPENBSD_3_2:1.2.0.2
	OPENBSD_3_2_BASE:1.2
	arla-0-35-7:1.1.1.1
	arla:1.1.1
	OPENBSD_3_1:1.1.0.8
	OPENBSD_3_1_BASE:1.1
	OPENBSD_3_0:1.1.0.6
	OPENBSD_3_0_BASE:1.1
	OPENBSD_2_9_BASE:1.1
	OPENBSD_2_9:1.1.0.4
	OPENBSD_2_8:1.1.0.2
	OPENBSD_2_8_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2012.08.23.06.21.50;	author deraadt;	state dead;
branches;
next	1.2;

1.2
date	2002.06.07.04.38.50;	author hin;	state Exp;
branches;
next	1.1;

1.1
date	2000.09.11.14.40.45;	author art;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.06.07.04.14.25;	author hin;	state Exp;
branches;
next	;


desc
@@


1.3
log
@the afs src tree can go away
@
text
@dnl
dnl $KTH: check-kafs.m4,v 1.7.2.1 2001/04/16 23:07:48 lha Exp $
dnl
dnl check for libkafs/krbafs
dnl

dnl check_kafs_fluff(LIB_DIR,LIB_LIBS)
define(check_kafs_fluff,[
for b in "kafs" "krbafs"; do
  LIBS="$saved_LIBS ${KAFS_LIBS_FLAGS} $1 -l$b $2"
  AC_TRY_LINK([],
  [k_hasafs()],
  [ac_cv_funclib_k_hasafs=yes
  ac_cv_libkafs_flags="$KAFS_LIBS_FLAGS $1 -l$b $2"
  break 2],
  [ac_cv_funclib_k_hasafs=no])
done])

AC_DEFUN(AC_CHECK_KAFS,[

AC_ARG_WITH(krbafs,
[  --with-krbafs=dir       use libkrbafs (from cmu, extracted from kth-krb) in dir],

[if test "$with_krbafs" = "yes"; then
  AC_MSG_ERROR([You have to give the path to krbafs lib])
elif test "$with_krbafs" = "no"; then
  ac_cv_funclib_k_hasafs=no
else
  KAFS_LIBS_FLAGS="-L${with_krbafs}/lib"
fi])

AC_CACHE_CHECK([for libkafs/libkrbafs],
[ac_cv_funclib_k_hasafs],[

saved_LIBS="$LIBS"

for a in "foo" ; do
check_kafs_fluff([],[])
check_kafs_fluff([${KRB4_LIB_DIR}],[${KRB4_LIB_LIBS}])
check_kafs_fluff([${KRB5_LIB_DIR}],[${KRB5_LIB_LIBS}])
check_kafs_fluff([${KRB4_LIB_DIR} ${KRB5_LIB_DIR}],
[${KRB5_LIB_LIBS} ${KRB4_LIB_LIBS}])
done

undefine([check_kafs_fluff])

LIBS="$saved_LIBS"])

if test "X$ac_cv_funclib_k_hasafs" != "Xno"; then
   KAFS_LIBS="$ac_cv_libkafs_flags"
fi

AC_SUBST(KAFS_LIBS)dnl

])dnl
@


1.2
log
@merge
@
text
@@


1.1
log
@New Arla userland from Arla between 0.34.2 and current in arla cvs.
Too many new features and fixes to mention here.
@
text
@d2 1
a2 1
dnl $Id: check-kafs.m4,v 1.5 2000/08/20 16:11:44 ahltorp Exp $
d7 12
d37 6
a42 12
for a in "$KRB4_LIB_FLAGS" \
	 "$KRB5_LIB_FLAGS" \
	 "$KRB5_LIB_FLAGS $KRB4_LIB_FLAGS" ; do
  for b in "kafs" "krbafs"; do
    LIBS="$saved_LIBS ${KAFS_LIBS_FLAGS} $a -l$b"
    AC_TRY_LINK([],
    [k_hasafs();],
    [ac_cv_funclib_k_hasafs=yes
    ac_cv_libkafs_flags="$KAFS_LIBS_FLAGS $a -l$b"
    break 2],
    [ac_cv_funclib_k_hasafs=no])
  done
d44 2
@


1.1.1.1
log
@Import of arla-0.35.7
@
text
@d2 1
a2 1
dnl $KTH: check-kafs.m4,v 1.7.2.1 2001/04/16 23:07:48 lha Exp $
a6 12
dnl check_kafs_fluff(LIB_DIR,LIB_LIBS)
define(check_kafs_fluff,[
for b in "kafs" "krbafs"; do
  LIBS="$saved_LIBS ${KAFS_LIBS_FLAGS} $1 -l$b $2"
  AC_TRY_LINK([],
  [k_hasafs()],
  [ac_cv_funclib_k_hasafs=yes
  ac_cv_libkafs_flags="$KAFS_LIBS_FLAGS $1 -l$b $2"
  break 2],
  [ac_cv_funclib_k_hasafs=no])
done])

d25 12
a36 6
for a in "foo" ; do
check_kafs_fluff([],[])
check_kafs_fluff([${KRB4_LIB_DIR}],[${KRB4_LIB_LIBS}])
check_kafs_fluff([${KRB5_LIB_DIR}],[${KRB5_LIB_LIBS}])
check_kafs_fluff([${KRB4_LIB_DIR} ${KRB5_LIB_DIR}],
[${KRB5_LIB_LIBS} ${KRB4_LIB_LIBS}])
a37 2

undefine([check_kafs_fluff])
@

