head	1.3;
access;
symbols
	OPENBSD_5_2:1.2.0.42
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.40
	OPENBSD_5_0:1.2.0.38
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.36
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.34
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.30
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.32
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.28
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.26
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.24
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.22
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.20
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.18
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.16
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.2.0.14
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.2.0.12
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.2.0.10
	OPENBSD_3_6_BASE:1.2
	OPENBSD_3_5:1.2.0.8
	OPENBSD_3_5_BASE:1.2
	OPENBSD_3_4:1.2.0.6
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.2.0.4
	OPENBSD_3_3_BASE:1.2
	OPENBSD_3_2:1.2.0.2
	OPENBSD_3_2_BASE:1.2
	arla-0-35-7:1.1.1.1
	arla:1.1.1
	OPENBSD_3_1:1.1.0.8
	OPENBSD_3_1_BASE:1.1
	OPENBSD_3_0:1.1.0.6
	OPENBSD_3_0_BASE:1.1
	OPENBSD_2_9_BASE:1.1
	OPENBSD_2_9:1.1.0.4
	OPENBSD_2_8:1.1.0.2
	OPENBSD_2_8_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2012.08.23.06.21.49;	author deraadt;	state dead;
branches;
next	1.2;

1.2
date	2002.06.07.04.28.57;	author hin;	state Exp;
branches;
next	1.1;

1.1
date	2000.09.11.14.40.39;	author art;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.06.07.04.14.22;	author hin;	state Exp;
branches;
next	;


desc
@@


1.3
log
@the afs src tree can go away
@
text
@# $KTH: Makefile.in,v 1.83.2.3 2001/05/28 23:22:46 mattiasa Exp $

srcdir		= @@srcdir@@
top_builddir	= ..
VPATH		= @@srcdir@@

CC		= @@CC@@

INSTALL		= @@INSTALL@@
INSTALL_PROGRAM = @@INSTALL_PROGRAM@@
INSTALL_DATA	= @@INSTALL_DATA@@
MKINSTALLDIRS 	= @@top_srcdir@@/mkinstalldirs

prefix 		= @@prefix@@
exec_prefix 	= @@exec_prefix@@
libdir 		= @@libdir@@
libexecdir 	= @@libexecdir@@
bindir 		= @@bindir@@
sbindir		= @@sbindir@@
sysconfdir	= @@sysconfdir@@
mandir		= @@mandir@@
transform	= @@program_transform_name@@
ARLACACHEDIR	= @@ARLACACHEDIR@@
ARLACONFFILE	= @@ARLACONFFILE@@

ARLA_SBIN	= arla-cli
ARLA_LIBEXEC	= arlad

MANPAGES	= CellServDB.5 DynRootDB.5 ThisCell.5 \
		  SuidCells.5 arlad.8 arla-cli.8

DEFS		= @@DEFS@@ -DSYSCONFDIR=\"$(sysconfdir)\" \
		  -DARLACACHEDIR=\"$(ARLACACHEDIR)\" \
		  -DARLACONFFILE=\"$(ARLACONFFILE)\"

SHELL		= /bin/sh

CFLAGS		= @@CFLAGS@@
LDFLAGS		= @@LDFLAGS@@

ETAGS		= etags
MAKEDEPEND	= makedepend
AFSWSROOT	= /usr/afsws
RXKADINC	= -I$(srcdir)/../rxkad
INCLUDES	= -I$(srcdir)/.. \
		  @@KERNEL_INCLUDE@@ \
		  -I../include \
		  -I$(srcdir)/../include \
		  -I$(srcdir)/../xfs/include \
		  -I../rxdef \
		  @@INC_roken@@ \
		  $(RXKADINC)
DEFINES		= -DDEBUG
REALCFLAGS	= $(INCLUDES) @@KRB4_INC_FLAGS@@ $(DEFINES) $(CFLAGS) \
		  -DRXDEBUG @@PLWP_INC_FLAGS@@
RXKADLIB	= @@RXKAD_LIBS@@
KAFS_LIBS	= @@AIX_EXTRA_KAFS@@ @@KAFS_LIBS@@
LIB_tgetent	= @@LIB_tgetent@@
LIBS_common	= -L../lib/bufdir -lbufdir \
		  -L../rxdef -lrxdefclient -L../rx -lrx -L../lwp \
		  -llwp @@PLWP_LIB_FLAGS@@

LIBS_common_post= -L../lib/ko -lko -L../util -lutil\
		   @@LIB_roken@@ $(RXKADLIB) $(KAFS_LIBS) @@LIBS@@

LIBS_arla-cli	= $(LIBS_common) \
		  -L../lib/sl -lsl @@LIB_readline@@ \
		  $(LIBS_common_post)

LIBS_arlad	= $(LIBS_common) \
		  $(LIBS_common_post)

LIBS_afsdir_check= $(LIBS_common) \
		  $(LIBS_common_post)

LIBDEPENDS	= ../rxdef/librxdefclient.a ../rx/librx.a ../lwp/liblwp.a \
		  ../util/libutil.a ../lib/sl/libsl.a \
		  ../lib/ko/libko.a ../lib/bufdir/libbufdir.a
KERNEL_SRCS	= @@KERNEL_SRCS@@
PROGS		= $(ARLA_SBIN) $(ARLA_LIBEXEC) afsdir_check

SRCS		=				\
		adir.c				\
		afsdir_check.c			\
		arla.c				\
		arlad.c				\
		arla-cli.c			\
		arladeb.c			\
		arladebu.c			\
		cmcb.c				\
		conn.c				\
		cred.c				\
		darla.c				\
		discon_log.c			\
		dynroot.c			\
		fcache.c			\
		fprio.c				\
		inter.c				\
		kernel.c			\
		messages.c			\
		reconnect.c			\
		subr.c				\
		volcache.c			\
		xfs.c				\
		$(KERNEL_SRCS)

HDRS		=				\
		adir.h				\
		afs_dir.h			\
		arla_local.h			\
		arladeb.h			\
		cmcb.h				\
		conn.h				\
		cred.h				\
		darla.h				\
		discon.h			\
		discon_fix.h			\
		discon_log.h			\
		dynroot.h			\
		fcache.h			\
		fprio.h				\
		inter.h				\
		kernel.h			\
		messages.h			\
		service.h			\
		subr.h				\
		xfs.h				\
		volcache.h		

common_OBJS	=				\
		adir.o				\
		arla.o				\
		arladeb.o			\
		arladebu.o			\
		cmcb.o				\
		conn.o				\
		cred.o				\
		darla.o				\
		discon_log.o			\
		dynroot.o			\
		fcache.o			\
		fprio.o				\
		inter.o				\
		kernel.o			\
		messages.o			\
		reconnect.o			\
		subr.o				\
		volcache.o			\
		xfs.o				\
		$(KERNEL_SRCS:.c=.o)

arlad_OBJS	= $(common_OBJS)		\
		arlad.o

arla-cli_OBJS	= $(common_OBJS)		\
		arla-cli.o

afsdir_check_OBJS = afsdir_check.o

.PHONY: all install uninstall depend tags clean

all:		$(PROGS)

.c.o:
		$(CC) -c $(CPPFLAGS) $(DEFS) -I$(srcdir) -I. $(REALCFLAGS) $<

install: all
		$(MKINSTALLDIRS) $(DESTDIR)$(sbindir)
		PROG_SBIN='$(ARLA_SBIN)'; for x in $$PROG_SBIN; do \
			f=`echo $$x | sed '$(transform)'`; \
			$(INSTALL_PROGRAM) $$x $(DESTDIR)$(sbindir)/$$f; \
		done ; \
		$(MKINSTALLDIRS) $(DESTDIR)$(libexecdir) ; \
		PROG_LIBEXEC='$(ARLA_LIBEXEC)'; for x in $$PROG_LIBEXEC; do \
			f=`echo $$x | sed '$(transform)'`; \
			$(INSTALL_PROGRAM) $$x $(DESTDIR)$(libexecdir)/$$f; \
		done ; \
		$(MKINSTALLDIRS) $(DESTDIR)$(mandir) ; \
		MANPAGES='$(MANPAGES)'; for x in $$MANPAGES; do \
			n=`echo $$x | sed 's/\(.*\)\.[1-9a-zA-Z]*$$/\1/'`; \
			e=`echo $$x | sed 's/.*\.\([1-9a-zA-Z]*\)$$/\1/'`; \
			f=`echo $$n | sed '$(transform)'`; \
			$(MKINSTALLDIRS) $(DESTDIR)$(mandir)/man$$e ; \
			$(INSTALL_DATA) $(srcdir)/$$x \
				$(DESTDIR)$(mandir)/man$$e/$$f.$$e; \
		done

uninstall:
		PROG_BIN='$(ARLA_BIN)'; for x in $$PROG_BIN; do \
			f=`echo $$x | sed '$(transform)'`; \
			rm -f $(DESTDIR)$(bindir)/$$f; \
		done ; \
		PROG_LIBEXEC='$(ARLA_LIBEXEC)'; for x in $$PROG_LIBEXEC; do \
			f=`echo $$x | sed '$(transform)'`; \
			rm -f $(DESTDIR)$(libexecdir)/$$f; \
		done ; \
		MANPAGES='$(MANPAGES)'; for x in $$MANPAGES; do \
			n=`echo $$x | sed 's/\(.*\)\.[1-9a-zA-Z]*$$/\1/'`; \
			e=`echo $$x | sed 's/.*\.\([1-9a-zA-Z]*\)$$/\1/'`; \
			f=`echo $$n | sed '$(transform)'`; \
			rm -rf $(DESTDIR)$(mandir)/$$f.$$e; \
		done

arlad:		$(arlad_OBJS) $(LIBDEPENDS)
		$(CC) $(LDFLAGS) -o $@@ $(arlad_OBJS) $(LIBS_arlad)

arla-cli:	$(arla-cli_OBJS) $(LIBDEPENDS)
		$(CC) $(LDFLAGS) -o $@@ $(arla-cli_OBJS) $(LIBS_arla-cli)

afsdir_check:	$(afsdir_check_OBJS)
		$(CC) $(LDFLAGS) -o $@@ $(afsdir_check_OBJS) $(LIBS_afsdir_check)

Makefile:	Makefile.in ../config.status
		cd ..; CONFIG_FILES=arlad/Makefile CONFIG_HEADERS= $(SHELL) config.status

depend:		$(SRCS)
		$(MAKEDEPEND) -- $(REALCFLAGS) -- $^

tags:		TAGS

TAGS:		$(SRCS) $(HDRS)
		$(ETAGS) -t $(SRCS) $(HDRS)

clean		:
		rm -f $(PROGS) $(OBJS) *~ *.o core *.core

mostlyclean:	clean

distclean:	clean
		rm -f Makefile config.status

realclean:	distclean
		rm -f TAGS
@


1.2
log
@merge
@
text
@@


1.1
log
@New Arla userland from Arla between 0.34.2 and current in arla cvs.
Too many new features and fixes to mention here.
@
text
@d1 1
a1 1
# $Id: Makefile.in,v 1.75 2000/08/19 10:42:05 assar Exp $
d4 1
d19 1
d26 2
a27 1
ARLA_BIN	= arlad
d29 2
a30 1
MANPAGES	= CellServDB.5 ThisCell.5 SuidCells.5 arlad.1
d51 1
d59 1
a59 1
LIBS		= -L../lib/bufdir -lbufdir \
d61 6
a66 1
		  -llwp @@PLWP_LIB_FLAGS@@ \
d68 8
a75 2
		  -L../lib/ko -lko -L../util -lutil\
		  -L../lib/roken -lroken $(RXKADLIB) $(KAFS_LIBS) @@LIBS@@
d77 2
a78 2
		  ../util/libutil.a ../lib/sl/libsl.a ../lib/roken/libroken.a \
		  ../lib/ko/libko.a
d80 2
a81 1
PROGS		= arlad afsdir_check
d86 2
d89 1
a89 1
		arladeb2.c			\
d130 1
a130 1
arlad_OBJS	=				\
d134 1
a134 1
		arladeb2.o			\
d152 7
a158 3
afsdir_check_OBJS =				\
		arladeb.o			\
		afsdir_check.o
d168 7
a174 2
		$(MKINSTALLDIRS) $(DESTDIR)$(bindir)
		PROG_BIN='$(ARLA_BIN)'; for x in $$PROG_BIN; do \
d176 1
a176 1
			$(INSTALL_PROGRAM) $$x $(DESTDIR)$(bindir)/$$f; \
d184 1
a184 1
			$(INSTALL_PROGRAM) $(srcdir)/$$x \
d193 4
d205 4
a208 1
		$(CC) $(LDFLAGS) -o $@@ $(arlad_OBJS) $(LIBS)
d211 1
a211 1
		$(CC) $(LDFLAGS) -o $@@ $(afsdir_check_OBJS) $(LIBS)
@


1.1.1.1
log
@Import of arla-0.35.7
@
text
@d1 1
a1 1
# $KTH: Makefile.in,v 1.83.2.3 2001/05/28 23:22:46 mattiasa Exp $
a3 1
top_builddir	= ..
a17 1
sbindir		= @@sbindir@@
d24 1
a24 2
ARLA_SBIN	= arla-cli
ARLA_LIBEXEC	= arlad
d26 1
a26 2
MANPAGES	= CellServDB.5 DynRootDB.5 ThisCell.5 \
		  SuidCells.5 arlad.8 arla-cli.8
a46 1
		  @@INC_roken@@ \
d54 1
a54 1
LIBS_common	= -L../lib/bufdir -lbufdir \
d56 1
a56 6
		  -llwp @@PLWP_LIB_FLAGS@@

LIBS_common_post= -L../lib/ko -lko -L../util -lutil\
		   @@LIB_roken@@ $(RXKADLIB) $(KAFS_LIBS) @@LIBS@@

LIBS_arla-cli	= $(LIBS_common) \
d58 2
a59 8
		  $(LIBS_common_post)

LIBS_arlad	= $(LIBS_common) \
		  $(LIBS_common_post)

LIBS_afsdir_check= $(LIBS_common) \
		  $(LIBS_common_post)

d61 2
a62 2
		  ../util/libutil.a ../lib/sl/libsl.a \
		  ../lib/ko/libko.a ../lib/bufdir/libbufdir.a
d64 1
a64 2
PROGS		= $(ARLA_SBIN) $(ARLA_LIBEXEC) afsdir_check

a68 2
		arlad.c				\
		arla-cli.c			\
d70 1
a70 1
		arladebu.c			\
d111 1
a111 1
common_OBJS	=				\
d115 1
a115 1
		arladebu.o			\
d133 3
a135 7
arlad_OBJS	= $(common_OBJS)		\
		arlad.o

arla-cli_OBJS	= $(common_OBJS)		\
		arla-cli.o

afsdir_check_OBJS = afsdir_check.o
d145 2
a146 7
		$(MKINSTALLDIRS) $(DESTDIR)$(sbindir)
		PROG_SBIN='$(ARLA_SBIN)'; for x in $$PROG_SBIN; do \
			f=`echo $$x | sed '$(transform)'`; \
			$(INSTALL_PROGRAM) $$x $(DESTDIR)$(sbindir)/$$f; \
		done ; \
		$(MKINSTALLDIRS) $(DESTDIR)$(libexecdir) ; \
		PROG_LIBEXEC='$(ARLA_LIBEXEC)'; for x in $$PROG_LIBEXEC; do \
d148 1
a148 1
			$(INSTALL_PROGRAM) $$x $(DESTDIR)$(libexecdir)/$$f; \
d156 1
a156 1
			$(INSTALL_DATA) $(srcdir)/$$x \
a164 4
		PROG_LIBEXEC='$(ARLA_LIBEXEC)'; for x in $$PROG_LIBEXEC; do \
			f=`echo $$x | sed '$(transform)'`; \
			rm -f $(DESTDIR)$(libexecdir)/$$f; \
		done ; \
d173 1
a173 4
		$(CC) $(LDFLAGS) -o $@@ $(arlad_OBJS) $(LIBS_arlad)

arla-cli:	$(arla-cli_OBJS) $(LIBDEPENDS)
		$(CC) $(LDFLAGS) -o $@@ $(arla-cli_OBJS) $(LIBS_arla-cli)
d176 1
a176 1
		$(CC) $(LDFLAGS) -o $@@ $(afsdir_check_OBJS) $(LIBS_afsdir_check)
@

