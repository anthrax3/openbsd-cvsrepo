head	1.16;
access;
symbols
	OPENBSD_6_0:1.16.0.14
	OPENBSD_6_0_BASE:1.16
	OPENBSD_5_9:1.16.0.10
	OPENBSD_5_9_BASE:1.16
	OPENBSD_5_8:1.16.0.12
	OPENBSD_5_8_BASE:1.16
	OPENBSD_5_7:1.16.0.4
	OPENBSD_5_7_BASE:1.16
	OPENBSD_5_6:1.16.0.8
	OPENBSD_5_6_BASE:1.16
	OPENBSD_5_5:1.16.0.6
	OPENBSD_5_5_BASE:1.16
	OPENBSD_5_4:1.16.0.2
	OPENBSD_5_4_BASE:1.16
	OPENBSD_5_3:1.15.0.14
	OPENBSD_5_3_BASE:1.15
	OPENBSD_5_2:1.15.0.12
	OPENBSD_5_2_BASE:1.15
	OPENBSD_5_1_BASE:1.15
	OPENBSD_5_1:1.15.0.10
	OPENBSD_5_0:1.15.0.8
	OPENBSD_5_0_BASE:1.15
	OPENBSD_4_9:1.15.0.6
	OPENBSD_4_9_BASE:1.15
	OPENBSD_4_8:1.15.0.4
	OPENBSD_4_8_BASE:1.15
	OPENBSD_4_7:1.15.0.2
	OPENBSD_4_7_BASE:1.15
	OPENBSD_4_6:1.13.0.12
	OPENBSD_4_6_BASE:1.13
	OPENBSD_4_5:1.13.0.8
	OPENBSD_4_5_BASE:1.13
	OPENBSD_4_4:1.13.0.6
	OPENBSD_4_4_BASE:1.13
	OPENBSD_4_3:1.13.0.4
	OPENBSD_4_3_BASE:1.13
	OPENBSD_4_2:1.13.0.2
	OPENBSD_4_2_BASE:1.13
	OPENBSD_4_1:1.12.0.16
	OPENBSD_4_1_BASE:1.12
	OPENBSD_4_0:1.12.0.14
	OPENBSD_4_0_BASE:1.12
	OPENBSD_3_9:1.12.0.12
	OPENBSD_3_9_BASE:1.12
	OPENBSD_3_8:1.12.0.10
	OPENBSD_3_8_BASE:1.12
	OPENBSD_3_7:1.12.0.8
	OPENBSD_3_7_BASE:1.12
	OPENBSD_3_6:1.12.0.6
	OPENBSD_3_6_BASE:1.12
	OPENBSD_3_5:1.12.0.4
	OPENBSD_3_5_BASE:1.12
	OPENBSD_3_4:1.12.0.2
	OPENBSD_3_4_BASE:1.12
	OPENBSD_3_3:1.10.0.2
	OPENBSD_3_3_BASE:1.10
	OPENBSD_3_2:1.9.0.6
	OPENBSD_3_2_BASE:1.9
	OPENBSD_3_1:1.9.0.4
	OPENBSD_3_1_BASE:1.9
	OPENBSD_3_0:1.9.0.2
	OPENBSD_3_0_BASE:1.9
	OPENBSD_2_9_BASE:1.8
	OPENBSD_2_9:1.8.0.2
	OPENBSD_2_8:1.7.0.4
	OPENBSD_2_8_BASE:1.7
	OPENBSD_2_7:1.7.0.2
	OPENBSD_2_7_BASE:1.7
	OPENBSD_2_6:1.6.0.2
	OPENBSD_2_6_BASE:1.6
	OPENBSD_2_5:1.4.0.2
	OPENBSD_2_5_BASE:1.4
	OPENBSD_2_4:1.3.0.10
	OPENBSD_2_4_BASE:1.3
	OPENBSD_2_3:1.3.0.8
	OPENBSD_2_3_BASE:1.3
	OPENBSD_2_2:1.3.0.6
	OPENBSD_2_2_BASE:1.3
	OPENBSD_2_1:1.3.0.4
	OPENBSD_2_1_BASE:1.3
	OPENBSD_2_0:1.3.0.2
	OPENBSD_2_0_BASE:1.3;
locks; strict;
comment	@# @;


1.16
date	2013.07.16.11.13.34;	author schwarze;	state Exp;
branches;
next	1.15;

1.15
date	2009.12.20.12.33.59;	author schwarze;	state Exp;
branches;
next	1.14;

1.14
date	2009.10.16.09.46.40;	author sobrado;	state Exp;
branches;
next	1.13;

1.13
date	2007.05.31.19.20.31;	author jmc;	state Exp;
branches;
next	1.12;

1.12
date	2003.06.12.12.59.54;	author jmc;	state Exp;
branches;
next	1.11;

1.11
date	2003.06.02.21.58.26;	author maja;	state Exp;
branches;
next	1.10;

1.10
date	2003.02.11.07.26.20;	author jmc;	state Exp;
branches;
next	1.9;

1.9
date	2001.08.02.18.37.35;	author mpech;	state Exp;
branches;
next	1.8;

1.8
date	2000.11.09.17.53.30;	author aaron;	state Exp;
branches;
next	1.7;

1.7
date	2000.03.19.17.57.18;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	99.06.05.22.18.25;	author aaron;	state Exp;
branches;
next	1.5;

1.5
date	99.05.23.14.11.06;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	99.03.12.15.33.59;	author aaron;	state Exp;
branches;
next	1.3;

1.3
date	96.05.30.09.53.07;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	96.04.24.12.37.41;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	96.03.02.03.01.33;	author dm;	state Exp;
branches;
next	;


desc
@@


1.16
log
@use .Mt for email addresses; from Jan Stary <hans at stare dot cz>; ok jmc@@
@
text
@.\"	$OpenBSD: mknetid.8,v 1.15 2009/12/20 12:33:59 schwarze Exp $
.\"
.\" Copyright (c) 1996 Mats O Jansson <moj@@stacken.kth.se>
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS
.\" OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
.\" WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY
.\" DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.Dd $Mdocdate: December 20 2009 $
.Dt MKNETID 8
.Os
.Sh NAME
.Nm mknetid
.Nd generate a YP map of group and domain memberships
.Sh SYNOPSIS
.Nm mknetid
.Bk -words
.Op Fl q
.Op Fl d Ar domain
.Op Fl g Ar groupfile
.Op Fl h Ar hostfile
.Op Fl m Ar netidfile
.Op Fl P Ar master.passwdfile
.Op Fl p Ar passwdfile
.Ek
.Sh DESCRIPTION
The
.Nm
utility combines information from the
.Xr passwd 5 ,
.Xr group 5 ,
.Xr hosts 5 ,
and
.Xr netid 5
files, printing it in
.Xr netid 5
format to the standard output.
If the
.Xr passwd 5
file is not available, the
.Xr master.passwd 5
file is used instead.
The
.Xr netid 5
file is optional and does not need to exist.
.Pp
The most common application is to pass the output to
.Xr makedbm 8
in order to create a
.Pa netid.byname
map for the
.Xr yp 8
subsystem.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl d Ar domain
Use
.Ar domain
instead of the default
.Xr domainname 1 .
.It Fl g Ar groupfile
Use
.Ar groupfile
instead of
.Pa /etc/group .
.It Fl h Ar hostfile
Use
.Ar hostfile
instead of
.Pa /etc/hosts .
.It Fl m Ar netidfile
Use
.Ar netidfile
instead of
.Pa /etc/netid .
.It Fl P Ar master.passwdfile
Use
.Ar master.passwdfile
instead of
.Pa /etc/master.passwd .
.It Fl p Ar passwdfile
Use
.Ar passwdfile
instead of
.Pa /etc/passwd .
.It Fl q
Keep quiet about multiple occurrences of a user ID.
Ignore all but the first.
.El
.Sh FILES
.Bl -tag -width /etc/master.passwd -compact
.It Pa /etc/passwd
.It Pa /etc/master.passwd
.It Pa /etc/group
.It Pa /etc/hosts
.It Pa /etc/netid
.El
.Sh SEE ALSO
.Xr domainname 1 ,
.Xr group 5 ,
.Xr hosts 5 ,
.Xr netid 5 ,
.Xr passwd 5 ,
.Xr Makefile.yp 8
.Sh AUTHORS
.An Mats O Jansson Aq Mt moj@@stacken.kth.se
@


1.15
log
@When a passwd(5) file is not available, fall back to master.passwd(5).
That's useful because the latter is needed for passwd-maps, anyway.
Make the master.passwd file name configurable in the same way as passwd.

While here, do a bit of cleanup:
 - Drop the HOSTS, PASSWD, GROUP, NETID #defines:
   They are used nowhere else and serve no purpose.
 - Use err(3), it's simpler and more precise than fprintf(3)+goto.
 - Drop a debug statement forgotten a decade ago.
 - In the manual, improve .Nd, DESCRIPTION and .Xrs.

Originally triggered by edd@@'s gripes with our yp implementation.
Regarding the manual, using many tweaks from jmc@@.

"I like this" ajacoutot@@
"I think it's a good idea" edd@@
"no opinion", "you decide" deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: mknetid.8,v 1.14 2009/10/16 09:46:40 sobrado Exp $
d27 1
a27 1
.Dd $Mdocdate: October 16 2009 $
d125 1
a125 1
.An Mats O Jansson Aq moj@@stacken.kth.se
@


1.14
log
@sort flags in synopsis, usage, and description.
@
text
@d1 1
a1 1
.\"	$OpenBSD: mknetid.8,v 1.13 2007/05/31 19:20:31 jmc Exp $
d27 1
a27 1
.Dd $Mdocdate: May 31 2007 $
d32 1
a32 1
.Nd a YP filter program
d41 1
d45 1
d47 1
a47 3
is used to create a map named
.Ar netid.byname .
The map consists of information from
d49 2
a50 1
.Xr group 5
a51 2
.Xr hosts 5 ,
concatenated with a
d53 19
a71 1
file, if one exists.
d76 4
a79 1
Which yp-domain if not default yp-domain.
d81 3
a83 4
Alternate
.Xr group 5
file.
Default is
d86 3
a88 4
Alternate
.Xr hosts 5
file.
Default is
d91 3
a93 4
Alternate
.Xr netid 5
file.
Default is
d95 5
a99 1
file.
d101 3
a103 4
Alternate
.Xr passwd 5
file.
Default is
d106 1
a106 1
Keep quiet about multiple occurrences of a UID.
d110 1
a110 1
.Bl -tag -width /etc/passwd -compact
d112 1
d118 1
d123 1
a123 1
.Xr yp 8
@


1.13
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: mknetid.8,v 1.12 2003/06/12 12:59:54 jmc Exp $
d27 1
a27 1
.Dd $Mdocdate$
d36 1
a37 2
.Op Fl q
.Op Fl p Ar passwdfile
d41 1
a59 9
.It Fl q
Keep quiet about multiple occurrences of a UID.
Ignore all but the first.
.It Fl p Ar passwdfile
Alternate
.Xr passwd 5
file.
Default is
.Pa /etc/passwd .
d79 9
@


1.12
log
@- section reorder
- macro fixes
- kill whitespace at EOL
- new sentence, new line
@
text
@d1 1
a1 1
.\"	$OpenBSD: mknetid.8,v 1.11 2003/06/02 21:58:26 maja Exp $
d27 1
a27 1
.Dd January 13, 1996
@


1.11
log
@remove clause 3 and 4. -moj
@
text
@d1 1
a1 1
.\"	$OpenBSD: mknetid.8,v 1.10 2003/02/11 07:26:20 jmc Exp $
d103 1
a103 1
Mats O Jansson <moj@@stacken.kth.se>
@


1.10
log
@typos;

raidctl(8) ok millert@@
mknetid(8) help maja@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: mknetid.8,v 1.9 2001/08/02 18:37:35 mpech Exp $
a13 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"      This product includes software developed by Mats O Jansson
.\" 4. The name of the author may not be used to endorse or promote products
.\"    derived from this software without specific prior written permission.
@


1.9
log
@o) .Sh AUTHOR -> .Sh AUTHORS;
o) .Sh EXAMPLE -> .Sh EXAMPLES;
o) Delete .Sh OPTIONS. Text moved to .Sh DESCRIPTION;

millert@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: mknetid.8,v 1.8 2000/11/09 17:53:30 aaron Exp $
d40 1
d47 1
d56 2
a57 2
.Xr hosts 5
eventually concatenated with a
d59 1
a59 1
file.
@


1.8
log
@Change all option list specifications to ".Bl -tag -width Ds". Most man
pages just needed their -width parameter tweaked to "Ds", which provides
a nice width of 6 constant characters. For consistency more than anything.
@
text
@d1 1
a1 1
.\"	$OpenBSD: mknetid.8,v 1.7 2000/03/19 17:57:18 aaron Exp $
d105 1
a105 1
.Sh AUTHOR
@


1.7
log
@Remove hard sentence breaks. Add $OpenBSD$ tags where appropriate. Some other
cleanup along the way.
@
text
@d1 1
a1 1
.\"	$OpenBSD: mknetid.8,v 1.6 1999/06/05 22:18:25 aaron Exp $
d60 1
a60 1
.Bl -tag -width indent
@


1.6
log
@remove trailing whitespace, some Nm cleanup
@
text
@d1 2
a2 1
.\"	$OpenBSD: mknetid.8,v 1.5 1999/05/23 14:11:06 aaron Exp $
d64 2
a65 1
Keep quiet about multiple occurrences of a UID. Ignore all but the first.
d69 2
a70 1
file. Default is
d75 2
a76 1
file. Default is
d81 2
a82 1
file. Default is
d87 2
a88 1
file. Default is
@


1.5
log
@remove argument from .Os macros so value in /usr/share/tmac/mdoc/doc-common
is used instead; kwesterback@@home.com
@
text
@d1 1
a1 1
.\"	$OpenBSD: mknetid.8,v 1.4 1999/03/12 15:33:59 aaron Exp $
d47 1
a47 1
is used to create a map named 
d53 1
a53 1
.Xr hosts 5 
@


1.4
log
@cleanup
@
text
@d1 1
a1 1
.\"	$OpenBSD: mknetid.8,v 1.3 1996/05/30 09:53:07 deraadt Exp $
d33 1
a33 1
.Os 
@


1.3
log
@$OpenBSD$ tag and few spelling errors
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d46 1
a46 1
.Nm Mknetid
d63 1
a63 1
Keep quiet about multipy occuraces of a uid. Ignore all but the first.
d68 1
a68 1
.Nm /etc/passwd .
d73 1
a73 1
.Nm /etc/group .
d76 3
a78 3
.Xr hosts 5 Default is
.Nm /etc/hosts .
file
d81 3
a83 2
.Xr netid 5 Default is
.Nm /etc/netid .
a93 2
.Xr yp 8
.Xr passwd 5 ,
d96 3
a98 1
.Xr netid 5
@


1.2
log
@slight cleanup, .Os strings, point at yp(8)
@
text
@d1 1
d31 1
a31 3
.\"	$Id: mknetid.8,v 1.1 1996/03/02 03:01:33 dm Exp $
.\"
.Dd Januari 13, 1996
@


1.1
log
@Added in stuff from 960121.  Fixed several bugs in ypxfr.
@
text
@d30 1
a30 1
.\"	$Id: mknetid.8,v 1.0 1996/01/13 23:19:34 moj Exp $
d39 1
a39 1
.Nm /usr/sbin/mknetid
d94 1
@
