head	1.13;
access;
symbols
	OPENBSD_6_1:1.13.0.16
	OPENBSD_6_1_BASE:1.13
	OPENBSD_6_0:1.13.0.14
	OPENBSD_6_0_BASE:1.13
	OPENBSD_5_9:1.13.0.10
	OPENBSD_5_9_BASE:1.13
	OPENBSD_5_8:1.13.0.12
	OPENBSD_5_8_BASE:1.13
	OPENBSD_5_7:1.13.0.4
	OPENBSD_5_7_BASE:1.13
	OPENBSD_5_6:1.13.0.8
	OPENBSD_5_6_BASE:1.13
	OPENBSD_5_5:1.13.0.6
	OPENBSD_5_5_BASE:1.13
	OPENBSD_5_4:1.13.0.2
	OPENBSD_5_4_BASE:1.13
	OPENBSD_5_3:1.12.0.16
	OPENBSD_5_3_BASE:1.12
	OPENBSD_5_2:1.12.0.14
	OPENBSD_5_2_BASE:1.12
	OPENBSD_5_1_BASE:1.12
	OPENBSD_5_1:1.12.0.12
	OPENBSD_5_0:1.12.0.10
	OPENBSD_5_0_BASE:1.12
	OPENBSD_4_9:1.12.0.8
	OPENBSD_4_9_BASE:1.12
	OPENBSD_4_8:1.12.0.6
	OPENBSD_4_8_BASE:1.12
	OPENBSD_4_7:1.12.0.2
	OPENBSD_4_7_BASE:1.12
	OPENBSD_4_6:1.12.0.4
	OPENBSD_4_6_BASE:1.12
	OPENBSD_4_5:1.11.0.8
	OPENBSD_4_5_BASE:1.11
	OPENBSD_4_4:1.11.0.6
	OPENBSD_4_4_BASE:1.11
	OPENBSD_4_3:1.11.0.4
	OPENBSD_4_3_BASE:1.11
	OPENBSD_4_2:1.11.0.2
	OPENBSD_4_2_BASE:1.11
	OPENBSD_4_1:1.10.0.16
	OPENBSD_4_1_BASE:1.10
	OPENBSD_4_0:1.10.0.14
	OPENBSD_4_0_BASE:1.10
	OPENBSD_3_9:1.10.0.12
	OPENBSD_3_9_BASE:1.10
	OPENBSD_3_8:1.10.0.10
	OPENBSD_3_8_BASE:1.10
	OPENBSD_3_7:1.10.0.8
	OPENBSD_3_7_BASE:1.10
	OPENBSD_3_6:1.10.0.6
	OPENBSD_3_6_BASE:1.10
	OPENBSD_3_5:1.10.0.4
	OPENBSD_3_5_BASE:1.10
	OPENBSD_3_4:1.10.0.2
	OPENBSD_3_4_BASE:1.10
	OPENBSD_3_3:1.8.0.8
	OPENBSD_3_3_BASE:1.8
	OPENBSD_3_2:1.8.0.6
	OPENBSD_3_2_BASE:1.8
	OPENBSD_3_1:1.8.0.4
	OPENBSD_3_1_BASE:1.8
	OPENBSD_3_0:1.8.0.2
	OPENBSD_3_0_BASE:1.8
	OPENBSD_2_9_BASE:1.7
	OPENBSD_2_9:1.7.0.6
	OPENBSD_2_8:1.7.0.4
	OPENBSD_2_8_BASE:1.7
	OPENBSD_2_7:1.7.0.2
	OPENBSD_2_7_BASE:1.7
	OPENBSD_2_6:1.6.0.2
	OPENBSD_2_6_BASE:1.6
	OPENBSD_2_5:1.4.0.2
	OPENBSD_2_5_BASE:1.4
	OPENBSD_2_4:1.3.0.10
	OPENBSD_2_4_BASE:1.3
	OPENBSD_2_3:1.3.0.8
	OPENBSD_2_3_BASE:1.3
	OPENBSD_2_2:1.3.0.6
	OPENBSD_2_2_BASE:1.3
	OPENBSD_2_1:1.3.0.4
	OPENBSD_2_1_BASE:1.3
	OPENBSD_2_0:1.3.0.2
	OPENBSD_2_0_BASE:1.3;
locks; strict;
comment	@# @;


1.13
date	2013.07.16.11.13.34;	author schwarze;	state Exp;
branches;
next	1.12;

1.12
date	2009.03.27.12.31.31;	author schwarze;	state Exp;
branches;
next	1.11;

1.11
date	2007.05.31.19.20.31;	author jmc;	state Exp;
branches;
next	1.10;

1.10
date	2003.06.12.12.59.54;	author jmc;	state Exp;
branches;
next	1.9;

1.9
date	2003.06.02.21.58.26;	author maja;	state Exp;
branches;
next	1.8;

1.8
date	2001.08.02.18.37.35;	author mpech;	state Exp;
branches;
next	1.7;

1.7
date	2000.03.23.21.39.57;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	99.06.05.22.18.25;	author aaron;	state Exp;
branches;
next	1.5;

1.5
date	99.05.23.14.11.06;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	99.03.12.15.33.59;	author aaron;	state Exp;
branches;
next	1.3;

1.3
date	96.05.30.09.53.10;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	96.04.24.12.37.42;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	96.03.02.03.01.35;	author dm;	state Exp;
branches;
next	;


desc
@@


1.13
log
@use .Mt for email addresses; from Jan Stary <hans at stare dot cz>; ok jmc@@
@
text
@.\"	$OpenBSD: netid.5,v 1.12 2009/03/27 12:31:31 schwarze Exp $
.\"
.\" Copyright (c) 2008 Ingo Schwarze <schwarze@@usta.de>
.\" Copyright (c) 1996 Mats O Jansson <moj@@stacken.kth.se>
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS
.\" OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
.\" WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY
.\" DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.Dd $Mdocdate: March 27 2009 $
.Dt NETID 5
.Os
.Sh NAME
.Nm netid
.Nd YP network credential file
.Sh DESCRIPTION
The file
.Pa /etc/netid
consists of newline separated ASCII records.
Each record consists of a key, a single blank character, and a value.
The key and the value may be arbitrary strings except that neither
may contain blank characters.
.Pp
Records in the file
.Pa /etc/netid
and in the
.Pa netid.byname
YP map are ignored by the system unless they have the following form:
.Bd -literal
unix.<uid>@@<yp-domain> <uid>:<gid>,<gid>,...
.Ed
.Pp
When YP is enabled in the
.Xr group 5
file, such records specify that the function
.Xr getgrouplist 3
shall return the specified groups in addition to the groups
found in the group file.
The file
.Pa /etc/netid
is parsed before the
.Pa netid.byname
YP map.
Only the first matching record is used.
.Pp
The main use of the
.Pa /etc/netid
file is to allow certain users to log in even while YP is enabled but
temporarily unavailable.
These users must also be listed in the local
.Xr master.passwd 5
file.
If consistency of group membership information is required while YP is
enabled and available, all records in the
.Pa /etc/netid
file must agree with records in the
.Pa netid.byname
YP map, although the latter may contain additional records.
If consistency of group membership information is required even while YP is
enabled but unavailable, the records in the
.Pa /etc/netid
file must not grant more group memberships than the
.Xr group 5
file, and users having their own record in the
.Pa /etc/netid
file must not show up in the
.Pa group.byname
and
.Pa group.bygid
YP maps.
.Pp
On a YP master server,
.Xr Makefile.yp 8
uses the
.Xr mknetid 8
utility to generate the
.Pa netid.byname
YP map.
In this case, the YP map will also contain records of the following form:
.Bd -literal
unix.<hostname>@@<yp-domain> 0:<hostname>
.Ed
.Pp
Such records are ignored by the system.
.Sh FILES
.Bl -tag -width /etc/netid -compact
.It Pa /etc/netid
.El
.Sh EXAMPLES
A netid file or YP map might look like the following:
.Bd -literal -offset indent
unix.10714@@kaka 10714:400,10
unix.jodie@@kaka 0:jodie
.Ed
.Sh SEE ALSO
.Xr getgrouplist 3 ,
.Xr group 5 ,
.Xr Makefile.yp 8 ,
.Xr mknetid 8 ,
.Xr yp 8
.Sh AUTHORS
.An Mats O Jansson Aq Mt moj@@stacken.kth.se
@


1.12
log
@getgrouplist: If YP is #defined and enabled in /etc/group(5) and /etc/netid(5)
  contains a matching entry, use that and refrain from accessing YP.
getpwnam/getpwuid: If YP is #defined and /etc/master.passwd(5) contains
  a matching entry before the first YP entry, use that and stay away from YP.

Taken together, this allows a solution to the following problem pointed
out by deraadt@@: When YP was configured but temporarily unavailable, even
root login would block, hindering you when trying to do repairs.
To avoid this, you can now provide a static entry for root in /etc/netid.

Using suggestions from miod@@ otto@@ blambert@@ jmc@@.
"commit" deraadt@@, "cool" ajacoutot@@, "looks fine" jmc@@.
@
text
@d1 1
a1 1
.\"	$OpenBSD: netid.5,v 1.11 2007/05/31 19:20:31 jmc Exp $
d28 1
a28 1
.Dd $Mdocdate: May 31 2007 $
d120 1
a120 1
.An Mats O Jansson Aq moj@@stacken.kth.se
@


1.11
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: netid.5,v 1.10 2003/06/12 12:59:54 jmc Exp $
d3 1
d28 1
a28 1
.Dd $Mdocdate$
d33 1
a33 3
.Nd
.Nm YP
network credential file
d35 6
a40 12
Files in
.Nm netid
format are rare.
One lives in the
.Nm YP
map
.Dq netid.byname .
The format is rather simple.
Each row consists of two items: a key and a value.
When created by
.Xr mknetid 8
there are three types of records.
d42 5
a46 1
The first type is information about which GIDs a UID has:
d48 1
a48 1
unix.<uid>@@<yp-domain> <uid>:<gid>,<gid>
d51 47
a97 1
The second type contains information about hosts:
d102 1
a102 3
The third type refers to records from a
.Nm netid
file other than the two types above.
a105 2
for lines not generated automatically by
.Xr mknetid 8 .
d108 2
a109 2
A configuration file might look like the following:
.Bd -literal
d114 3
@


1.10
log
@- section reorder
- macro fixes
- kill whitespace at EOL
- new sentence, new line
@
text
@d1 1
a1 1
.\"	$OpenBSD: netid.5,v 1.9 2003/06/02 21:58:26 maja Exp $
d27 1
a27 1
.Dd January 13, 1996
@


1.9
log
@remove clause 3 and 4. -moj
@
text
@d1 1
a1 1
.\"	$OpenBSD: netid.5,v 1.8 2001/08/02 18:37:35 mpech Exp $
d37 1
a37 1
.Xr netid 5
d60 1
a60 1
.Xr netid 5
d62 6
a73 6
.Sh FILES
.Bl -tag -width /etc/netid -compact
.It Pa /etc/netid
for lines not generated automatically by
.Xr mknetid 8 .
.El
d78 1
a78 1
Mats O Jansson <moj@@stacken.kth.se>
@


1.8
log
@o) .Sh AUTHOR -> .Sh AUTHORS;
o) .Sh EXAMPLE -> .Sh EXAMPLES;
o) Delete .Sh OPTIONS. Text moved to .Sh DESCRIPTION;

millert@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: netid.5,v 1.7 2000/03/23 21:39:57 aaron Exp $
a13 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"      This product includes software developed by Mats O Jansson
.\" 4. The name of the author may not be used to endorse or promote products
.\"    derived from this software without specific prior written permission.
@


1.7
log
@More pedantic man page formatting insanity, lalala
@
text
@d1 1
a1 1
.\"	$OpenBSD: netid.5,v 1.6 1999/06/05 22:18:25 aaron Exp $
d82 1
a82 1
.Sh AUTHOR
@


1.6
log
@remove trailing whitespace, some Nm cleanup
@
text
@d1 2
a2 1
.\"	$OpenBSD: netid.5,v 1.5 1999/05/23 14:11:06 aaron Exp $
d43 2
a44 1
format are rare. One lives in the
d48 3
a50 2
The format is rather simple. Each row consists of two
items, a key and a value. When created by
@


1.5
log
@remove argument from .Os macros so value in /usr/share/tmac/mdoc/doc-common
is used instead; kwesterback@@home.com
@
text
@d1 1
a1 1
.\"	$OpenBSD: netid.5,v 1.4 1999/03/12 15:33:59 aaron Exp $
d36 1
a36 1
.Nd 
d61 1
a61 1
The third type refers to records from a 
@


1.4
log
@cleanup
@
text
@d1 1
a1 1
.\"	$OpenBSD: netid.5,v 1.3 1996/05/30 09:53:10 deraadt Exp $
d33 1
a33 1
.Os 
@


1.3
log
@$OpenBSD$ tag and few spelling errors
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d41 2
a42 2
.Nm netid
format is rare. One lives in the
d45 1
a45 1
.Nm netid.byname .
d49 1
a49 1
there is three kind of records.
d51 1
a51 1
The first type is information about which gids a uid has:
d56 1
a56 1
The second type has informations about hosts:
d61 1
a61 1
The third type is records from a 
d65 1
a65 2
.Pp
A configuration file might appear as follows:
d73 1
a73 1
A file for lines not generated automatic by
d77 2
a78 2
.Xr yp 8 ,
.Xr mknetid 8
@


1.2
log
@slight cleanup, .Os strings, point at yp(8)
@
text
@d1 1
a29 2
.\"
.\"	$Id: netid.5,v 1.1 1996/03/02 03:01:35 dm Exp $
@


1.1
log
@Added in stuff from 960121.  Fixed several bugs in ypxfr.
@
text
@d30 1
a30 1
.\"	$Id: netid.5,v 1.0 1996/01/13 23:10:03 moj Exp $
d79 1
@
