head	1.13;
access;
symbols
	OPENBSD_3_5:1.12.0.4
	OPENBSD_3_5_BASE:1.12
	OPENBSD_3_4:1.12.0.2
	OPENBSD_3_4_BASE:1.12
	OPENBSD_3_3:1.11.0.2
	OPENBSD_3_3_BASE:1.11
	OPENBSD_3_2:1.10.0.4
	OPENBSD_3_2_BASE:1.10
	OPENBSD_3_1:1.10.0.2
	OPENBSD_3_1_BASE:1.10
	OPENBSD_3_0:1.8.0.2
	OPENBSD_3_0_BASE:1.8
	OPENBSD_2_9_BASE:1.7
	OPENBSD_2_9:1.7.0.6
	OPENBSD_2_8:1.7.0.4
	OPENBSD_2_8_BASE:1.7
	OPENBSD_2_7:1.7.0.2
	OPENBSD_2_7_BASE:1.7
	OPENBSD_2_6:1.6.0.2
	OPENBSD_2_6_BASE:1.6
	OPENBSD_2_5:1.5.0.2
	OPENBSD_2_5_BASE:1.5
	OPENBSD_2_4:1.4.0.2
	OPENBSD_2_4_BASE:1.4
	OPENBSD_2_3:1.2.0.8
	OPENBSD_2_3_BASE:1.2
	OPENBSD_2_2:1.2.0.6
	OPENBSD_2_2_BASE:1.2
	OPENBSD_2_1:1.2.0.4
	OPENBSD_2_1_BASE:1.2
	OPENBSD_2_0:1.2.0.2
	OPENBSD_2_0_BASE:1.2;
locks; strict;
comment	@# @;


1.13
date	2004.05.28.20.15.48;	author brad;	state dead;
branches;
next	1.12;

1.12
date	2003.06.12.12.59.52;	author jmc;	state Exp;
branches;
next	1.11;

1.11
date	2003.03.07.06.30.38;	author david;	state Exp;
branches;
next	1.10;

1.10
date	2002.04.06.01.07.19;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2001.11.07.21.08.50;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2001.08.17.11.13.58;	author mpech;	state Exp;
branches;
next	1.7;

1.7
date	2000.03.19.17.57.11;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	99.06.05.01.29.39;	author aaron;	state Exp;
branches;
next	1.5;

1.5
date	99.02.27.13.44.20;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	98.10.13.23.09.51;	author marc;	state Exp;
branches;
next	1.3;

1.3
date	98.09.07.22.30.16;	author marc;	state Exp;
branches;
next	1.2;

1.2
date	96.10.08.01.21.03;	author michaels;	state Exp;
branches;
next	1.1;

1.1
date	96.06.04.07.56.10;	author niklas;	state Exp;
branches;
next	;


desc
@@


1.13
log
@bye bye old package tools.

ok deraadt@@
@
text
@.\"	$OpenBSD: pkg_info.1,v 1.12 2003/06/12 12:59:52 jmc Exp $
.\"
.\" FreeBSD install - a package for the installation and maintenance
.\" of non-core utilities.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" Jordan K. Hubbard
.\"
.\"
.\"     @@(#)pkg_info.1
.\"
.Dd August 22, 1998
.Dt PKG_INFO 1
.Os
.Sh NAME
.Nm pkg_info
.Nd a utility for displaying information on software packages
.Sh SYNOPSIS
.Nm pkg_info
.Op Fl cDdfIikLmpqRrvh
.Op Fl e Ar package
.Op Fl l Ar prefix
.Ar pkg-name Op Ar ...
.Nm pkg_info
.Op Fl a Ar flags
.Sh DESCRIPTION
The
.Nm
command is used to dump out information for packages, which may be either
packed up in files or already installed on the system with the
.Xr pkg_create 1
command.
.Pp
The
.Ar pkg-name
may be the name of an installed package, the pathname to a package
distribution file, or a URL to an ftp-available package.
.Nm
will try to complete
.Ar pkg-name
with a version number while looking through installed packages.
.Pp
The following command-line options are supported:
.Bl -tag -width indent
.It Fl a
Show information for all currently installed packages.
.It Fl c
Show the one-line comment field for each package.
.It Fl D
Show the install-message file (if any) for each package.
.It Fl d
Show the long-description field for each package.
.It Fl e Ar pkg-name
This option
allows you to test for the presence of another (perhaps
prerequisite) package from a script.
If the package identified by
.Ar pkg-name
is currently installed, return 0, otherwise return 1.
In addition, the names of any package(s) found installed are printed to
stdout unless turned off using the
.Fl q
option.
.Pp
If the given
.Ar pkg-name
contains a
shell meta-character, it will be matched against all installed
packages using
.Xr fnmatch 3 .
.Xr csh 1
style
.Dq {,}
alternates have also been implemented in addition to this.
Package version numbers can also be matched in a relational manner
using the
.Dq >= ,
.Dq <= ,
.Dq > ,
and
.Dq <
operators.
For example,
.Ic pkg_info -e 'name>=1.3'
will match versions 1.3 and later of the
.Pa name
package.
.It Fl f
Show the packing list instructions for each package.
.It Fl I
Show the index entry for each package.
.It Fl i
Show the install script (if any) for each package.
.It Fl k
Show the de-install script (if any) for each package.
.It Fl L
Show the files within each package.
This is different from just
viewing the packing list, since full pathnames for everything
are generated.
.It Fl l Ar str
Prefix each information category header (see
.Fl q )
shown with
.Ar str .
This is primarily of use to front-end programs that want to request a
lot of different information fields at once for a package, but don't
necessary want the output intermingled in such a way that they can't
organize it.
This lets you add a special token to the start of each field.
.It Fl m
Show the mtree file (if any) for each package.
.It Fl p
Show the installation prefix for each package.
.It Fl q
Be
.Dq quiet
in emitting report headers and such, just dump the
raw info (basically, assume a non-human reading).
.It Fl R
Show which packages require a given package.
.It Fl r
Show the requirements script (if any) for each package.
.It Fl v
Turn on verbose output.
.El
.Sh ENVIRONMENT
.Bl -tag -width PKG_DBDIR
.It Ev PKG_DBDIR
The standard package database directory,
.Pa /var/db/pkg ,
can be overridden by specifying an alternative directory in the
.Ev PKG_DBDIR
environment variable.
.It Ev PKG_PATH
This can be used to specify a colon-separated list of paths to search for
package files.
The current directory is always searched first, even if
.Ev PKG_PATH
is set.
If
.Ev PKG_PATH
is used, the suffix
.Dq .tgz
is automatically appended to the
.Ar pkg-name ,
whereas searching in the current directory uses
.Ar pkg-name
literally.
.It Ev PKG_TMPDIR , Ev TMPDIR
These are tried in turn (if set) as candidate directories in which
to create a
.Dq staging area
for any files extracted by
.Nm
from package files.
If neither
.Ev PKG_TMPDIR
nor
.Ev TMPDIR
yields a suitable scratch directory,
.Pa /var/tmp ,
.Pa /tmp ,
and
.Pa /usr/tmp
are tried in turn.
Note that
.Pa /usr/tmp
may be created, if it doesn't already exist.
.Pp
Since
.Nm
requires very little information to be extracted from any package
files examined, it is unlikely that these environment variables would
ever need to be used to work around limited available space in the
default locations.
.El
.Sh TECHNICAL DETAILS
Package info is either extracted from package files named on the
command line, or from already installed package information
in
.Pa /var/db/pkg/<pkg-name> .
.Sh SEE ALSO
.Xr pkg_add 1 ,
.Xr pkg_create 1 ,
.Xr pkg_delete 1 ,
.Xr mkstemp 3 ,
.Xr mtree 8
.Sh AUTHORS
.Bl -tag -width indent -compact
.It "Jordan Hubbard"
most of the work
.It "John Kohl"
refined it for
.Nx
.El
.Sh BUGS
Sure to be some.
@


1.12
log
@- section reorder
- macro fixes
- kill whitespace at EOL
- new sentence, new line
@
text
@d1 1
a1 1
.\"	$OpenBSD: pkg_info.1,v 1.11 2003/03/07 06:30:38 david Exp $
@


1.11
log
@spelling errors/typos
ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: pkg_info.1,v 1.10 2002/04/06 01:07:19 espie Exp $
d72 1
a72 1

@


1.10
log
@PR2525
@
text
@d1 1
a1 1
.\"	$OpenBSD: pkg_info.1,v 1.9 2001/11/07 21:08:50 espie Exp $
d3 1
a3 1
.\" FreeBSD install - a package for the installation and maintainance
@


1.9
log
@Unconfuse option description.
@
text
@d1 1
a1 1
.\"	$OpenBSD: pkg_info.1,v 1.8 2001/08/17 11:13:58 mpech Exp $
d195 1
a195 1
.Xr mktemp 3 ,
@


1.8
log
@o) {Open,Net,Free}BSD -> .{O,N,F}x;
o) "start sentence on new line" issues;
o) minimal -mdoc improvements;

millert@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: pkg_info.1,v 1.7 2000/03/19 17:57:11 aaron Exp $
d129 1
a129 1
Show which packages are required by each package.
@


1.7
log
@Remove hard sentence breaks. Add $OpenBSD$ tags where appropriate. Some other
cleanup along the way.
@
text
@d1 1
a1 1
.\"	$OpenBSD: pkg_info.1,v 1.6 1999/06/05 01:29:39 aaron Exp $
d202 2
a203 1
refined it for NetBSD
@


1.6
log
@more .Os cleansing
@
text
@d1 1
a1 1
.\"	$OpenBSD: pkg_info.1,v 1.5 1999/02/27 13:44:20 espie Exp $
d105 2
a106 1
Show the files within each package.  This is different from just
d117 2
a118 2
organize it.  This lets you add a special token to the start of
each field.
d145 2
a146 1
package files.  The current directory is always searched first, even if
d148 2
a149 1
is set.  If
d164 2
a165 1
from package files.  If neither
d174 2
a175 1
are tried in turn.  Note that
@


1.5
log
@Document that feature.

Pending a check and a rewriting, as the documentation is misleading.
It seems to imply it looks thru installed packages first, whereas
code tells pkg_info looks thru package files first.
@
text
@d1 1
a1 1
.\"	$OpenBSD: pkg_info.1,v 1.4 1998/10/13 23:09:51 marc Exp $
d22 1
a22 1
.Os FreeBSD
d31 1
a31 1
.Ar pkg-name [pkg-name ...]
d76 1
a76 1
shell metacharacter, it will be matched against all installed
d80 3
a82 1
style {,} alternates have also been implemented in addition to this.
d85 3
a87 1
.Pa >=, <=, >
d89 1
a89 1
.Pa <
d92 1
a92 1
.Pa pkg_info -e 'name>=1.3'
d123 3
a125 1
Be ``quiet'' in emitting report headers and such, just dump the
d149 1
a149 1
.Pa .tgz
d157 3
a159 1
to create a ``staging area'' for any files extracted by
d191 1
a191 1
.Xr mtree 8 .
@


1.4
log
@Sync with recent NetBSD changes:
- use snprintf in place of sprintf
- code cleanup
- Package -> package_t, PackingList -> plist_t
Also: remove files that haven't been linked in a while
Pass -q to mtree so it is quiet in the presence of symlinks
@
text
@d1 1
a1 1
.\"	$OpenBSD: pkg_info.1,v 1.3 1998/09/07 22:30:16 marc Exp $
d46 4
@


1.3
log
@updated pkg_* tools.  Merged in many changes/improvements from NetBSD.
New features include md5 hash so pkg_delete won't remove files that have
changed and the ability to define conflicting packages, e.g. you can't
install both mh and nmh.  The ports tree will have to be updated to take
advantage of this.

Let me know of any problems, real or imagined :-)
@
text
@d1 1
a1 1
.\"	$OpenBSD: pkg_info.1,v 1.2 1996/10/08 01:21:03 michaels Exp $
d58 3
d64 8
a71 1
If the given pkg-name contains a
d74 1
a74 3
.Xr fnmatch 3 ,
and any packages found installed are printed to stdout, one name per
line.
d76 2
a77 2
style {,} alternates have also been implemented.
Dewey decimal numbers can also be matched in a relational manner,
a87 6
This printing can be turned off using the
.Fl q
option.
This option
allows you to test for the presence of another (perhaps
prerequisite) package from a script.
@


1.2
log
@Attempt at cleanup.
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d20 3
a22 3
.Dd November 25, 1994
.Dt pkg_info 1
.Os
d25 1
a25 1
.Nd a utility for displaying information on software packages.
d28 1
a28 1
.Op Fl cdDikrRpLqImv
d33 1
a33 2
.Fl a
.Op Ar flags
d37 2
a38 3
command is used to dump out information for packages, either packed up in
files or already installed on the system
with the
d41 7
a47 2
.Sh OPTIONS
The following command line options are supported.
a48 4
.It Ar pkg-name ...
The named packages are described.  A package name may either be the name of
an installed package, the pathname to a package distribution file or a
URL to an ftp available package.
d50 1
a50 8
Show all currently installed packages.
.It Fl v
Turns on verbose output.
.It Fl p
Show the installation prefix for each package.
.It Fl q
Be ``quiet'' in emitting report headers and such, just dump the
raw info (basically, assume a non-human reading).
d52 3
a54 1
Show the comment (one liner) field for each package.
d56 30
a85 3
Show the long description field for each package.
.It Fl D
Show the install-message file for each package.
d88 2
a93 4
.It Fl r
Show the requirements script (if any) for each package.
.It Fl m
Show the mtree file (if any) for each package.
a97 6
.It Fl e Ar pkg-name
If the package identified by
.Ar pkg-name
is currently installed, return 0, otherwise return 1.  This option
allows you to easily test for the presence of another (perhaps
prerequisite) package from a script.
d99 1
a99 1
Prefix each information catagory header (see
d103 1
a103 1
This is primarily of use to front-end programs who want to request a
d108 59
a166 22
.It Fl t Ar template
Use
.Ar template
as the input to 
.Xr mktemp 3 
when creating a ``staging area.''
By default, this is the string
.Pa /tmp/instmp.XXXXXX ,
but it may be necessary to override it in the situation where
space in your
.Pa /tmp
directory is limited. Be sure to leave some number of `X' characters
for
.Xr mktemp 3
to fill in with a unique ID.
.Bd -filled -offset indent -compact
Note:  This should really not be necessary with pkg_info,
since very little information is extracted from each package
and one would have to have a very small 
.Pa /tmp
indeed to overflow it.
.Ed
@


1.1
log
@add package tools from FreeBSD
@
text
@d22 1
a22 1
.Os FreeBSD 2.0
@
