head	1.62;
access;
symbols
	OPENBSD_6_1:1.61.0.6
	OPENBSD_6_1_BASE:1.61
	OPENBSD_6_0:1.61.0.2
	OPENBSD_6_0_BASE:1.61
	OPENBSD_5_9:1.60.0.8
	OPENBSD_5_9_BASE:1.60
	OPENBSD_5_8:1.60.0.10
	OPENBSD_5_8_BASE:1.60
	OPENBSD_5_7:1.60.0.2
	OPENBSD_5_7_BASE:1.60
	OPENBSD_5_6:1.60.0.6
	OPENBSD_5_6_BASE:1.60
	OPENBSD_5_5:1.60.0.4
	OPENBSD_5_5_BASE:1.60
	OPENBSD_5_4:1.58.0.2
	OPENBSD_5_4_BASE:1.58
	OPENBSD_5_3:1.56.0.8
	OPENBSD_5_3_BASE:1.56
	OPENBSD_5_2:1.56.0.6
	OPENBSD_5_2_BASE:1.56
	OPENBSD_5_1_BASE:1.56
	OPENBSD_5_1:1.56.0.4
	OPENBSD_5_0:1.56.0.2
	OPENBSD_5_0_BASE:1.56
	OPENBSD_4_9:1.54.0.6
	OPENBSD_4_9_BASE:1.54
	OPENBSD_4_8:1.54.0.4
	OPENBSD_4_8_BASE:1.54
	OPENBSD_4_7:1.54.0.2
	OPENBSD_4_7_BASE:1.54
	OPENBSD_4_6:1.53.0.4
	OPENBSD_4_6_BASE:1.53
	OPENBSD_4_5:1.51.0.8
	OPENBSD_4_5_BASE:1.51
	OPENBSD_4_4:1.51.0.6
	OPENBSD_4_4_BASE:1.51
	OPENBSD_4_3:1.51.0.4
	OPENBSD_4_3_BASE:1.51
	OPENBSD_4_2:1.51.0.2
	OPENBSD_4_2_BASE:1.51
	OPENBSD_4_1:1.47.0.4
	OPENBSD_4_1_BASE:1.47
	OPENBSD_4_0:1.47.0.2
	OPENBSD_4_0_BASE:1.47
	OPENBSD_3_9:1.45.0.2
	OPENBSD_3_9_BASE:1.45
	OPENBSD_3_8:1.43.0.6
	OPENBSD_3_8_BASE:1.43
	OPENBSD_3_7:1.43.0.4
	OPENBSD_3_7_BASE:1.43
	OPENBSD_3_6:1.43.0.2
	OPENBSD_3_6_BASE:1.43
	OPENBSD_3_5:1.42.0.2
	OPENBSD_3_5_BASE:1.42
	OPENBSD_3_4:1.38.0.2
	OPENBSD_3_4_BASE:1.38
	OPENBSD_3_3:1.31.0.2
	OPENBSD_3_3_BASE:1.31
	OPENBSD_3_2:1.29.0.2
	OPENBSD_3_2_BASE:1.29
	OPENBSD_3_1:1.28.0.2
	OPENBSD_3_1_BASE:1.28
	OPENBSD_3_0:1.25.0.2
	OPENBSD_3_0_BASE:1.25
	OPENBSD_2_9_BASE:1.23
	OPENBSD_2_9:1.23.0.4
	OPENBSD_2_8:1.23.0.2
	OPENBSD_2_8_BASE:1.23
	OPENBSD_2_7:1.18.0.2
	OPENBSD_2_7_BASE:1.18
	OPENBSD_2_6:1.13.0.2
	OPENBSD_2_6_BASE:1.13
	OPENBSD_2_5:1.8.0.2
	OPENBSD_2_5_BASE:1.8
	OPENBSD_2_4:1.6.0.4
	OPENBSD_2_4_BASE:1.6
	OPENBSD_2_3:1.6.0.2
	OPENBSD_2_3_BASE:1.6
	OPENBSD_2_2:1.5.0.2
	OPENBSD_2_2_BASE:1.5
	OPENBSD_2_1:1.4.0.2
	OPENBSD_2_1_BASE:1.4
	OPENBSD_2_0:1.3.0.2
	OPENBSD_2_0_BASE:1.3
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@.\" @;


1.62
date	2017.04.30.20.09.27;	author mpi;	state Exp;
branches;
next	1.61;
commitid	IhgofW1vEaLl0nkz;

1.61
date	2016.03.13.08.39.29;	author jmc;	state Exp;
branches;
next	1.60;
commitid	Mrhbwek9DAr7LEBK;

1.60
date	2014.01.20.01.11.49;	author schwarze;	state Exp;
branches;
next	1.59;

1.59
date	2013.08.14.08.39.32;	author jmc;	state Exp;
branches;
next	1.58;

1.58
date	2013.03.28.20.08.10;	author jmc;	state Exp;
branches;
next	1.57;

1.57
date	2013.03.27.16.39.30;	author jmc;	state Exp;
branches;
next	1.56;

1.56
date	2011.06.26.23.48.37;	author tedu;	state Exp;
branches;
next	1.55;

1.55
date	2011.04.15.03.10.49;	author deraadt;	state Exp;
branches;
next	1.54;

1.54
date	2009.12.10.22.07.19;	author kettenis;	state Exp;
branches;
next	1.53;

1.53
date	2009.06.03.21.42.16;	author beck;	state Exp;
branches;
next	1.52;

1.52
date	2009.03.23.16.57.05;	author jmc;	state Exp;
branches;
next	1.51;

1.51
date	2007.05.31.19.20.23;	author jmc;	state Exp;
branches;
next	1.50;

1.50
date	2007.03.20.20.34.36;	author jmc;	state Exp;
branches;
next	1.49;

1.49
date	2007.03.20.20.19.09;	author jmc;	state Exp;
branches;
next	1.48;

1.48
date	2007.03.20.19.42.14;	author jmc;	state Exp;
branches;
next	1.47;

1.47
date	2006.03.23.10.50.03;	author jmc;	state Exp;
branches;
next	1.46;

1.46
date	2006.03.17.11.01.09;	author otto;	state Exp;
branches;
next	1.45;

1.45
date	2005.12.22.09.26.34;	author jmc;	state Exp;
branches;
next	1.44;

1.44
date	2005.11.30.11.53.32;	author jmc;	state Exp;
branches;
next	1.43;

1.43
date	2004.06.08.20.59.29;	author mcbride;	state Exp;
branches;
next	1.42;

1.42
date	2004.01.07.19.10.08;	author jmc;	state Exp;
branches;
next	1.41;

1.41
date	2004.01.04.18.47.11;	author deraadt;	state Exp;
branches;
next	1.40;

1.40
date	2003.11.17.10.09.11;	author avsm;	state Exp;
branches;
next	1.39;

1.39
date	2003.10.23.18.23.33;	author jmc;	state Exp;
branches;
next	1.38;

1.38
date	2003.09.02.18.56.35;	author jmc;	state Exp;
branches;
next	1.37;

1.37
date	2003.07.14.13.09.13;	author jmc;	state Exp;
branches;
next	1.36;

1.36
date	2003.06.21.13.35.22;	author jmc;	state Exp;
branches;
next	1.35;

1.35
date	2003.06.12.12.59.50;	author jmc;	state Exp;
branches;
next	1.34;

1.34
date	2003.06.02.23.36.52;	author millert;	state Exp;
branches;
next	1.33;

1.33
date	2003.05.12.12.05.18;	author jmc;	state Exp;
branches;
next	1.32;

1.32
date	2003.05.08.08.24.53;	author jmc;	state Exp;
branches;
next	1.31;

1.31
date	2002.12.15.13.31.13;	author henning;	state Exp;
branches;
next	1.30;

1.30
date	2002.10.13.21.21.31;	author miod;	state Exp;
branches;
next	1.29;

1.29
date	2002.06.14.21.35.01;	author todd;	state Exp;
branches;
next	1.28;

1.28
date	2002.03.23.13.30.24;	author espie;	state Exp;
branches;
next	1.27;

1.27
date	2002.02.17.23.01.19;	author maja;	state Exp;
branches;
next	1.26;

1.26
date	2002.02.07.22.45.42;	author aaron;	state Exp;
branches;
next	1.25;

1.25
date	2001.08.05.20.34.12;	author hugh;	state Exp;
branches;
next	1.24;

1.24
date	2001.07.20.19.09.47;	author mpech;	state Exp;
branches;
next	1.23;

1.23
date	2000.08.08.21.42.40;	author deraadt;	state Exp;
branches;
next	1.22;

1.22
date	2000.07.07.21.53.29;	author deraadt;	state Exp;
branches;
next	1.21;

1.21
date	2000.05.31.02.24.44;	author aaron;	state Exp;
branches;
next	1.20;

1.20
date	2000.05.29.07.28.54;	author angelos;	state Exp;
branches;
next	1.19;

1.19
date	2000.05.29.07.19.29;	author deraadt;	state Exp;
branches;
next	1.18;

1.18
date	2000.04.12.21.47.52;	author aaron;	state Exp;
branches;
next	1.17;

1.17
date	2000.04.04.03.32.02;	author deraadt;	state Exp;
branches;
next	1.16;

1.16
date	2000.03.19.17.57.03;	author aaron;	state Exp;
branches;
next	1.15;

1.15
date	2000.03.14.21.31.36;	author aaron;	state Exp;
branches;
next	1.14;

1.14
date	99.11.27.03.49.13;	author d;	state Exp;
branches;
next	1.13;

1.13
date	99.10.17.20.35.47;	author aaron;	state Exp;
branches;
next	1.12;

1.12
date	99.10.16.04.48.22;	author aaron;	state Exp;
branches;
next	1.11;

1.11
date	99.10.12.00.25.30;	author maja;	state Exp;
branches;
next	1.10;

1.10
date	99.07.22.19.24.52;	author deraadt;	state Exp;
branches;
next	1.9;

1.9
date	99.05.23.14.11.32;	author aaron;	state Exp;
branches;
next	1.8;

1.8
date	99.03.17.15.56.25;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	98.11.08.00.21.28;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	98.03.16.07.46.04;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	97.06.05.12.37.15;	author kstailey;	state Exp;
branches;
next	1.4;

1.4
date	96.10.23.22.37.50;	author niklas;	state Exp;
branches;
next	1.3;

1.3
date	96.04.21.23.40.05;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	96.03.25.15.55.01;	author niklas;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.48.33;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.48.33;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.62
log
@Remove KGDB references.
@
text
@.\"	$OpenBSD: config.8,v 1.61 2016/03/13 08:39:29 jmc Exp $
.\"	$NetBSD: config.8,v 1.10 1996/08/31 20:58:16 mycroft Exp $
.\"
.\" Copyright (c) 1980, 1991, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"     from: @@(#)config.8	8.2 (Berkeley) 4/19/94
.\"
.Dd $Mdocdate: March 13 2016 $
.Dt CONFIG 8
.Os
.Sh NAME
.Nm config
.Nd build kernel compilation directories or modify a kernel
.Sh SYNOPSIS
.Nm config
.Op Fl p
.Op Fl b Ar builddir
.Op Fl s Ar srcdir
.Op Ar config-file
.Nm config
.Op Fl u
.Op Fl f | o Ar outfile
.Fl e
.Ar infile
.Sh DESCRIPTION
In the first synopsis form, the
.Nm
program creates a kernel build directory from the kernel configuration file
specified by
.Ar config-file .
.Pp
In the second synopsis form,
.Nm
allows editing of the kernel binary specified by
.Ar infile .
Devices may be enabled, disabled, or modified without recompiling,
by editing the kernel executable.
Similarly, the same editing can be done at boot-time,
using the in-kernel editor,
as described in
.Xr boot_config 8 .
.Pp
For kernel building, the options are as follows:
.Bl -tag -width Ds
.It Fl b Ar builddir
Create the build directory in the path specified by
.Ar builddir
instead of the default
.Pa ../compile/SYSTEMNAME .
.It Fl p
Configure for a system that includes profiling code; see
.Xr kgmon 8
and
.Xr gprof 1 .
When this option is specified,
.Nm
acts as if the lines
.Dq makeoptions PROF="-pg"
and
.Dq option GPROF
appeared in the specified kernel configuration file.
In addition,
.Dq .PROF
is appended to the default compilation directory name.
.Pp
The
.Fl p
flag is expected to be used for
.Dq one-shot
profiles of existing systems; for regular profiling, it is probably wiser to
make a separate configuration containing the makeoptions line.
.It Fl s Ar srcdir
Use
.Ar srcdir
as the top-level kernel source directory instead of the default (four
directories above the build directory).
.El
.Pp
For kernel modification, the options are as follows:
.Bl -tag -width Ds
.It Fl e
Allows the modification of kernel device configuration (see
.Xr boot_config 8 ) .
Temporary changes can be made to the running kernel's configuration or a new
kernel binary may be written for permanent changes between system reboots.
See the section
.Sx KERNEL MODIFICATION
below for more details.
.It Fl f
Overwrite the
.Ar infile
kernel binary with the modified kernel.
Otherwise,
.Fl o
should be given to specify an alternate output file.
.It Fl o Ar outfile
Write the modified kernel to
.Ar outfile .
.It Fl u
Check to see if the kernel configuration was modified at boot-time
(i.e.\&
.Cm boot -c
was used).
If so, compare the running kernel with the kernel to be edited
.Pq Ar infile .
If they seem to be the same, apply all configuration changes performed at
boot.
.El
.Sh KERNEL BUILDING
The output of
.Nm
consists of a number of files, principally
.Pa ioconf.c
(a description of I/O devices that may be attached to the system)
and a
.Pa Makefile ,
used by
.Xr make 1
when building the kernel.
.Pp
If
.Nm
stops due to errors, the problems reported should be corrected and
.Nm
should be run again.
.Nm
attempts to avoid changing the compilation directory if there are
configuration errors, but this code is not well-tested and some problems
(such as running out of disk space) are unrecoverable.
.Pp
If
.Ar config-file
is not specified,
.Nm
uses the current directory as the build directory, and looks in it for
a file called
.Pa CONFIG .
If
.Nm
is run this way, the location of the top-level kernel source
directory must be specified using the
.Fl s
option or by using the
.Dq Li source
directive at the beginning of the system configuration file.
.Pp
The configuration files consists of various statements which
include the following:
.Bl -tag -offset indent -width indent
.It Ic machine Ar var
Required.
Specifies the machine architecture.
.It Ic include Ar file
Include another configuration file.
.It Ic option Ar name
Set a kernel option.
Kernel options may take either the form
.Ar NAME
or the form
.Ar NAME Ns = Ns Ar value .
These options are passed to the compiler with the
.Fl D
flag.
.It Ic rmoption Ar name
Delete a previously set option.
This is useful when including another kernel configuration file.
A typical use is to include the
.Va GENERIC
kernel provided with each release and remove options that are
unwanted, thus allowing for automatic inclusion of new device
drivers.
.It Ic maxusers Ar number
Required.
Used to size various system tables and maximum operating conditions
in an approximate fashion.
Multiple instances of this keyword may be specified.
The number provided in the last instance will be used, and
warnings will be printed for each duplicate value.
This is convenient when used with the
.Va include
directive.
.It Xo Ic config Cm bsd root on Ar dev
.Op Cm swap on Ar dev Op Cm and Ar dev ...
.Op Cm dumps on Ar dev Op Cm and Ar dev ...
.Xc
Required.
Specifies the swap and dump devices which the system should use.
.It Ic config Cm bsd swap generic
Otherwise, if generic is specified, the system follows generic routines to
decide what should happen.
.El
.Pp
To debug kernels and their crash dumps with gdb, add
.Dq makeoptions DEBUG="-g"
to the kernel configuration file, along with (typically)
.Pp
Many other statements exist, and the file format is fairly rich; for more
information see the various configuration files included in the system, as
well as
.Xr files.conf 5
for the
.Nm
rules base.
.Sh KERNEL MODIFICATION
When
.Fl e
is specified, device parameters that are normally hard-coded into the kernel
may be changed.
This is useful to avoid the need for kernel recompilation or rebooting.
Modifications are made to the currently running kernel and can be written to
a new kernel binary so changes are preserved during subsequent system restarts.
.Pp
When invoked, the kernel identification is first shown.
.Bd -literal -offset indent
# config -e -o bsd.new /bsd
OpenBSD 5.3-current (GENERIC.MP) #91: Mon Mar 25 16:43:17 MDT 2013
    deraadt@@i386.openbsd.org:/usr/src/sys/arch/i386/compile/GENERIC.MP
Enter 'help' for information
ukc\*(Gt
.Ed
.Pp
One or more warnings may be printed before the
.Li ukc\*(Gt
prompt.
.Bd -literal -offset indent
warning: no output file specified
.Ed
.Pp
Neither the
.Fl f
nor
.Fl o
option has been specified.
Changes will be ignored.
.Bd -literal -offset indent
WARNING kernel mismatch. -u ignored.
WARNING the running kernel version:
.Ed
.Pp
.Nm
does not believe the running kernel is the same as the
.Ar infile
specified.
Since the log of changes (from
.Cm boot -c )
in the running kernel is kernel-specific, the
.Fl u
option is ignored.
.Pp
The commands are as follows:
.Bl -tag -width "disable attr val | devno | dev"
.It Ic add Ar dev
Add a device through copying another.
.It Ic base Cm 8 | 10 | 16
Change the base of numbers displayed and entered.
.It Ic bufcachepercent Op Ar number
Change the BUFCACHEPERCENT value.
Without arguments, displays its current value.
.It Ic change Ar devno | dev
Modify one or more devices.
.It Ic disable Ar attr val | devno | dev
Disable one or more devices.
.It Ic enable Ar attr val | devno | dev
Enable one or more devices.
.It Ic exit
Exit without saving changes.
.It Ic find Ar devno | dev
Find one or more devices.
.It Ic help
Give a short summary of all commands and their arguments.
.It Ic lines Op Ar count
Set the number of rows per page.
.It Ic list
Show all known devices, a screen at a time.
.It Ic nkmempg Op Ar number
Change the NKMEMPAGES value.
Without arguments, displays its current value.
.It Ic quit
Exit and save changes.
.It Ic show Op Ar attr Op Ar val
Show all devices for which attribute
.Ar attr
has the value
.Ar val .
.It Ic timezone Op Ar minuteswest Op Ar dst
Change the
.Va tz
timezone structure.
.Va minuteswest
is the number of minutes west of GMT and
.Va dst
is non-zero if Daylight Saving Time is in effect.
Without arguments, displays its current value.
.El
.Sh EXAMPLES (kernel building)
Note:
The standard
.Ox
kernel configuration
(GENERIC or GENERIC.MP)
is suitable for most purposes.
Use of an alternative kernel configuration is not recommended.
A custom kernel is built in the following way.
.Pp
To compile a kernel from a non-writable media (such as a CD-ROM)
mounted on
.Pa /usr/src ,
do the following:
.Bd -literal -offset indent
# cd /somedir
# cp /usr/src/sys/arch/somearch/conf/SOMEFILE .
# vi SOMEFILE	(to make any changes)
# config -s /usr/src/sys -b . SOMEFILE
# make
.Ed
.Pp
To compile a kernel inside a writable source tree, do the following:
.Bd -literal -offset indent
# cd /usr/src/sys/arch/somearch/conf
# vi SOMEFILE	(to make any changes)
# config SOMEFILE
# cd ../compile/SOMEFILE
# make
.Ed
.Pp
In the examples above,
.Ar somedir
is a writable directory,
.Ar somearch
is the architecture (e.g. i386),
and
.Ar SOMEFILE
should be a name indicative of a particular configuration (often
that of the hostname).
.Nm config
will warn if a
.Dq make clean
is required.
.Pp
The new kernel, called
.Pa bsd ,
can be copied to
.Pa /bsd
and the system will boot it next time.
Most people save their backup kernels as
.Pa /bsd.1 ,
.Pa /bsd.2 ,
etc.
.Sh EXAMPLES (kernel modification)
The Ethernet card is not detected at boot because the kernel configuration
does not match the physical hardware configuration,
e.g. wrong IRQ in OpenBSD/i386.
The Ethernet card is supposed to use the
.Xr ne 4
driver.
.Bd -literal
.No ukc\*(Gt Ic find ne
24 ne0 at isa0 port 0x240 size 0 iomem 0xd8000 iosiz 0 irq 9 drq -1 drq2 -1 flags 0x0
25 ne1 at isa0 port 0x300 size 0 iomem -1 iosiz 0 irq 10 drq -1 drq2 -1 flags 0x0
26 ne* at isapnp0 port -1 size 0 iomem -1 iosiz 0 irq -1 drq -1 flags 0x0
27 ne* at pci* dev -1 function -1 flags 0x0
28 ne* at pcmcia* function -1 irq -1 flags 0x0
ukc\*(Gt
.Ed
.Pp
ne1 seems to match the configuration except it uses IRQ 10 instead of IRQ 5.
So the irq on ne1 should be changed via the
.Ic change
command.
The device can be specified by either name or number.
.Bd -literal
.No ukc\*(Gt Ic change ne1
25 ne1 at isa0 port 0x300 size 0 iomem -1 iosiz 0 irq 10 drq -1 drq2 -1
.No change (y/n) \&? Ic y
.No port [0x300] \&?
.No size [0] \&?
.No iomem [-1] \&?
.No iosiz [0] \&?
.No irq [10] \&? Ic 5
.No drq [-1] \&?
.No drq2 [-1] \&?
.No flags [0] \&?
25 ne1 changed
25 ne1 at isa0 port 0x300 size 0 iomem -1 iosiz 0 irq 5 drq -1 drq2 -1 flags 0x0
ukc\*(Gt
.Ed
.Pp
It's also possible to disable all devices with a common attribute.
For example:
.Bd -literal
.No ukc\*(Gt Ic disable port 0x300
 25 ne1 disabled
 72 we1 disabled
 75 el0 disabled
 77 ie1 disabled
.Ed
.Pp
The
.Cm show
command is useful for finding which devices have a certain attribute.
It can also be used to find those devices with a particular value for
an attribute.
.Bd -literal
.No ukc\*(Gt Ic show slot
  2 ahc* at eisa0 slot -1
 10 uha* at eisa0 slot -1
 12 ep0 at eisa0 slot -1
 17 ep* at eisa0 slot -1
102 ahb* at eisa0 slot -1
103 fea* at eisa0 slot -1
.No ukc\*(Gt Ic show port 0x300
 25 ne1 at isa0 port 0x300 size 0 iomem -1 iosiz 0 irq 10 drq -1 drq2 -1 flags 0x0
 72 we1 at isa0 port 0x300 size 0 iomem 0xcc000 iosiz 0 irq 10 drq -1 drq2 -1 flags 0x0
 75 el0 at isa0 port 0x300 size 0 iomem -1 iosiz 0 irq 9 drq -1 drq2 -1 flags 0x0
 77 ie1 at isa0 port 0x300 size 0 iomem -1 iosiz 0 irq 10 drq -1 drq2 -1 flags 0x0
ukc\*(Gt
.Ed
.Pp
It is possible to add new devices, but only devices that were linked into the
kernel.
If a new device is added, following devices will be renumbered.
.Bd -literal
.No ukc\*(Gt Ic find ep
 11 ep0 at isa0 port -1 size 0 iomem -1 iosiz 0 irq -1 drq -1 drq2 -1 flags 0x0
 12 ep0 at eisa0 slot -1 flags 0x0
 13 ep0 at pci* dev -1 function -1 flags 0x0
 14 ep* at isapnp0 port -1 size 0 iomem -1 iosiz 0 irq -1 drq -1 flags 0x0
 15 ep* at isa0 port -1 size 0 iomem -1 iosiz 0 irq -1 drq -1 drq2 -1 flags 0x0
 16 ep* at eisa0 slot -1 flags 0x0
 17 ep* at pci* dev -1 function -1 flags 0x0
 18 ep* at pcmcia* dev -1 irq -1 flags 0x0
.No ukc\*(Gt Ic add ep1
.No "Clone Device (DevNo, 'q' or '\&?') \&?" Ic 13
.No "Insert before Device (DevNo, 'q' or '\&?')" Ic 14
 14 ep1 at pci* dev -1 function -1
.No ukc\*(Gt Ic change 14
 14 ep1 at pci* dev -1 function -1
.No change (y/n) \&? Ic y
.No dev [-1] \&? Ic 14
.No function [-1] \&?
.No flags [0] \&? Ic 18
 14 ep1 changed
 14 ep1 at pci* dev 14 function -1 flags 0x12
ukc\*(Gt
.Ed
.Pp
When done, exit the program with the
.Ic quit
or
.Ic exit
commands.
.Ic exit
will ignore any changes while
.Ic quit
writes the changes to
.Ar outfile
(if
.Fl o
or
.Fl f
was given, else ignore changes).
.Bd -literal
.No ukc\*(Gt Ic quit
.Ed
.Sh SEE ALSO
.Xr options 4 ,
.Xr files.conf 5 ,
.Xr boot.conf 8 ,
.Xr boot_config 8
.Pp
The SYNOPSIS portion of each device in section 4 of the manual.
.Rs
.%T "Building 4.4 BSD Systems with Config"
.Re
.Sh HISTORY
The
.Nm
program appeared in
.Bx 4.1
and was completely revised in
.Bx 4.4 .
The
.Fl e
option appeared in
.Ox 2.6 .
.Sh BUGS
Included files should start with an empty line or comment.
@


1.61
log
@one more un-vax, which i fixed but somehow didn;t commit;
Xr fix while here...
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.60 2014/01/20 01:11:49 schwarze Exp $
d33 1
a33 1
.Dd $Mdocdate: January 20 2014 $
a220 4
.Dq option KGDB .
Refer to
.Xr options 4
for further details.
@


1.60
log
@Obvious markup fixes; ran into this while testing mandocdb(8).
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.59 2013/08/14 08:39:32 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: August 14 2013 $
d284 1
a284 2
Change the base of numbers displayed and entered,
e.g. I/O addresses in a VAXen are octal.
a495 1
.Xr boot.conf 5 ,
d497 1
@


1.59
log
@some Bx/Ox conversion;
From: Jan Stary
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.58 2013/03/28 20:08:10 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: March 28 2013 $
d175 1
a175 1
.It machine Ar var
d178 1
a178 1
.It include Ar file
d180 1
a180 1
.It option Ar name
d185 1
a185 1
.Ar NAME=value .
d189 1
a189 1
.It rmoption Ar name
d197 1
a197 1
.It maxusers Ar number
d207 4
a210 1
.It config Ar bsd root on "dev [swap on dev [and dev ...]] [dumps on dev [and dev ...]]"
d213 1
a213 1
.It config Ar bsd swap generic
d283 1
a283 1
.It Ic base Ar 8 | 10 | 16
@


1.58
log
@shuffle the KERNEL BUILDING text a little; from daniel dickman
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.57 2013/03/27 16:39:30 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: March 27 2013 $
d505 4
a508 2
program appeared in 4.1BSD and
was completely revised in 4.4BSD.
@


1.57
log
@some updates from daniel dickman;
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.56 2011/06/26 23:48:37 tedu Exp $
d33 1
a33 1
.Dd $Mdocdate: June 26 2011 $
a134 5
Add
.Dq makeoptions DEBUG="-g"
to the kernel configuration file, along with (typically)
.Dq option KGDB .
.Pp
d214 8
@


1.56
log
@remove mcd example here too
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.55 2011/04/15 03:10:49 deraadt Exp $
d33 1
a33 1
.Dd $Mdocdate: April 15 2011 $
d135 1
a135 4
The old
.Fl g
flag is deprecated and no longer supported.
Instead, add
d239 2
a240 2
OpenBSD 2.6-beta (GENERIC.rz0) #0: Mon Oct  4 03:57:22 MEST 1999
    root@@winona:/usr/src/sys/arch/pmax/compile/GENERIC.rz0
a258 10
WARNING this kernel doesn't contain all information needed!
WARNING the commands add and change might not work.
.Ed
.Pp
The kernel is too old (pre
.Ox 2.6 )
and cannot support all of the functionality needed by the
.Fl e
option.
.Bd -literal -offset indent
d502 2
a503 2
program appeared in 4.1BSD.
It was completely revised in 4.4BSD.
@


1.55
log
@stop talking about make depend; ok guenther
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.54 2009/12/10 22:07:19 kettenis Exp $
d33 1
a33 1
.Dd $Mdocdate: December 10 2009 $
a424 14
Another case is a mistakenly detected non-existing device instead of another
device at the probed location.
One known case is the Mitsumi
CD-ROM in OpenBSD/i386.
The simplest thing to solve that problem is to disable mcd0.
.Bd -literal
.No ukc\*(Gt Ic find mcd0
 29 mcd0 at isa0 port 0x300 size 0 iomem -1 iosiz 0 irq 10 drq -1 drq2 -1 flags 0x0
.No ukc\*(Gt Ic disable mcd0
 29 mcd0 disabled
.No ukc\*(Gt Ic find 29
 29 mcd0 at isa0 disable port 0x300 size 0 iomem -1 iosiz 0 irq 10 drq -1 drq2 -1 flags 0x0
.Ed
.Pp
a429 1
 29 mcd0 already disabled
@


1.54
log
@Now that the old SysV SHM size limits global variables are gone, remove
support for setting them from config(8).
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.53 2009/06/03 21:42:16 beck Exp $
d33 1
a33 1
.Dd $Mdocdate: June 3 2009 $
a153 8
After running
.Nm
it is wise to run
.Dq make depend
in the new build directory.
.Nm
prints a reminder of this when it completes.
.Pp
d375 1
a375 5
is required;
a
.Dq make depend
can also be run
to have dependencies there the next time sources are compiled.
@


1.53
log
@change "cachepct" to "bufcachepercent" so it is the same
as the variable and the similar sysctl
ok deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.52 2009/03/23 16:57:05 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: March 23 2009 $
a324 6
.It Ic shmmaxpgs Op Ar number
Change the SHMMAXPGS value.
Without arguments, displays its current value.
.It Ic shmseg Op Ar number
Change the SHMSEG value.
Without arguments, displays its current value.
@


1.52
log
@correct example; from Sebastian Rother
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.51 2007/05/31 19:20:23 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: May 31 2007 $
d301 1
a301 1
.It Ic cachepct Op Ar number
@


1.51
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.50 2007/03/20 20:34:36 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate$
d421 1
a421 1
ne1 seems to match the configuration except it uses IRQ 5 instead of IRQ 10.
@


1.50
log
@document the args to the "timezone" command;
fixes documentation/5403: dst argument not defined in config manpage
from James Hartley
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.49 2007/03/20 20:19:09 jmc Exp $
d33 1
a33 1
.Dd October 15, 1999
@


1.49
log
@various text improvements to make this page read better. also add in
a little of afterboot(8)'s wisdom to prepare for my killing the kernel
building section in afterboot(8) (which is here replicated);
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.48 2007/03/20 19:42:14 jmc Exp $
d340 4
@


1.48
log
@make synopsis/usage() a little nicer;
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.47 2006/03/23 10:50:03 jmc Exp $
d38 1
a38 1
.Nd "build kernel compilation directories or modify a kernel"
d56 1
d61 5
a65 7
.Pp
Furthermore, devices may be enabled, disabled, or modified without
recompiling, by editing the kernel executable using the
.Fl e
option.
Similarly, you can do the same editing at boot-time, using
the in-kernel editor, as described in
a67 20
.Nm
is most commonly invoked from the directory containing
.Ox
kernel configuration files (i.e.,
.Pa /usr/src/sys/arch/i386/conf
for i386 machines).
For instance, the following steps would be followed to configure and compile
a new GENERIC kernel (assuming a complete kernel source tree is available in
.Pa /usr/src/sys ) :
.Bd -literal -offset indent
# cd /usr/src/sys/arch/i386/conf
# config ./GENERIC
# cd ../compile/GENERIC
# make depend && make
.Ed
.Pp
Replace
.Dq i386
with the appropriate architecture name.
.Pp
d112 1
a112 1
.Sx Kernel modification
d126 1
a126 1
(i.e.,
d134 1
a134 1
.Pp
d179 1
a179 1
If you run
d181 2
a182 2
this way, you must specify the location of the top-level kernel source
directory using the
d238 1
a238 1
.Ss Kernel modification
d248 1
a248 1
.Bd -literal
d253 1
a253 1
ukc>
d257 1
a257 1
.Li ukc>
d300 1
a300 1
e.g., I/O addresses in a VAXen are octal.
d342 8
a349 1
.Sh EXAMPLES (First synopsis)
d352 1
a352 1
To compile your own kernel from a non-writable media (such as a CD-ROM)
d373 1
a373 1
where
d377 1
a377 2
is the architecture (e.g.,
.Ic i386 ) ,
d383 1
a383 1
will warn you if a
d386 1
a386 1
you can also do a
d388 2
a389 1
so that you will have dependencies there the next time you do a compile.
d391 4
a394 6
After either of these two methods, you can place the new kernel (called
.Pa bsd )
in
.Pa /
(i.e.,
.Pa /bsd )
d400 1
a400 1
.Sh EXAMPLES (Second synopsis)
d403 1
a403 1
e.g., wrong IRQ in OpenBSD/i386.
d408 1
a408 1
.No ukc> Ic find ne
d414 1
a414 1
ukc>
d423 1
a423 1
.No ukc> Ic change ne1
d436 1
a436 1
ukc>
d445 1
a445 1
.No ukc> Ic find mcd0
d447 1
a447 1
.No ukc> Ic disable mcd0
d449 1
a449 1
.No ukc> Ic find 29
d453 2
a454 1
It's also possible to disable all devices with a common attribute. e.g.,
d456 1
a456 1
.No ukc> Ic disable port 0x300
d470 1
a470 1
.No ukc> Ic show slot
d477 1
a477 1
.No ukc> Ic show port 0x300
d482 1
a482 1
ukc>
d489 1
a489 1
.No ukc> Ic find ep
d498 1
a498 1
.No ukc> Ic add ep1
d502 1
a502 1
.No ukc> Ic change 14
d510 1
a510 1
ukc>
d529 1
a529 1
.No ukc> Ic quit
d533 1
@


1.47
log
@reword; ok otto
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.46 2006/03/17 11:01:09 otto Exp $
d41 1
a42 1
.Op Fl p
d46 2
a48 2
.Op Fl f | Fl o Ar outfile
.Op Fl u
@


1.46
log
@Add BUGS section documenting included files should start with a
newline or comment. Problem found by mpech@@; ok miod@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.45 2005/12/22 09:26:34 jmc Exp $
d565 1
a565 1
Included files should start with an empty or comment line.
@


1.45
log
@`option', not `options';
from j.c. roberts
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.44 2005/11/30 11:53:32 jmc Exp $
d564 2
@


1.44
log
@put the command list back in order;
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.43 2004/06/08 20:59:29 mcbride Exp $
d106 1
a106 1
.Dq options GPROF
d162 1
a162 1
.Dq options KGDB .
@


1.43
log
@Remove 'nmbuclust' setting of NMBCLUSTERS. They don't exist anymore.

ok millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.42 2004/01/07 19:10:08 jmc Exp $
d322 3
d337 2
d341 3
a343 2
.It Ic lines Op Ar count
Set the number of rows per page.
d346 6
a360 12
Without arguments, displays its current value.
.It Ic cachepct Op Ar number
Change the BUFCACHEPERCENT value.
Without arguments, displays its current value.
.It Ic nkmempg Op Ar number
Change the NKMEMPAGES value.
Without arguments, displays its current value.
.It Ic shmseg Op Ar number
Change the SHMSEG value.
Without arguments, displays its current value.
.It Ic shmmaxpgs Op Ar number
Change the SHMMAXPGS value.
@


1.42
log
@missing Ic; from Andrey Matveev;
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.41 2004/01/04 18:47:11 deraadt Exp $
a348 3
Without arguments, displays its current value.
.It Ic nmbclust Op Ar number
Change the NMBCLUSTERS value.
@


1.41
log
@re-org some parts; grudging ok from jmc
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.40 2003/11/17 10:09:11 avsm Exp $
d525 1
a525 1
.No flags [0] \&? 18
@


1.40
log
@- remove extra trailing bracket
- change /sys -> /usr/src/sys for consistency with rest of page
jmc@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.39 2003/10/23 18:23:33 jmc Exp $
d42 1
a43 1
.Op Fl p
d89 37
a125 1
The options are as follows:
a153 32
.It Fl b Ar builddir
Create the build directory in the path specified by
.Ar builddir
instead of the default
.Pa ../compile/SYSTEMNAME .
.It Fl s Ar srcdir
Use
.Ar srcdir
as the top-level kernel source directory instead of the default (four
directories above the build directory).
.It Fl p
Configure for a system that includes profiling code; see
.Xr kgmon 8
and
.Xr gprof 1 .
When this option is specified,
.Nm
acts as if the lines
.Dq makeoptions PROF="-pg"
and
.Dq options GPROF
appeared in the specified kernel configuration file.
In addition,
.Dq .PROF
is appended to the default compilation directory name.
.Pp
The
.Fl p
flag is expected to be used for
.Dq one-shot
profiles of existing systems; for regular profiling, it is probably wiser to
make a separate configuration containing the makeoptions line.
@


1.39
log
@typos from Jared Yanovich, plus a few more independant -> independent;
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.38 2003/09/02 18:56:35 jmc Exp $
d67 1
a67 1
.Xr boot_config 8 ) .
d73 1
a73 1
.Pa /sys/arch/i386/conf
d77 1
a77 1
.Pa /sys ) :
d79 1
a79 1
# cd /sys/arch/i386/conf
@


1.38
log
@escape punctuation; (and a nit in openssl.1)
ok deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.37 2003/07/14 13:09:13 jmc Exp $
d65 1
a65 1
Similarily, you can do the same editing at boot-time, using
@


1.37
log
@fix a width specifier and remove some .Pp's before lists/displays;
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.36 2003/06/21 13:35:22 jmc Exp $
d440 9
a448 9
.No change (y/n) ? Ic y
.No port [0x300] ?
.No size [0] ?
.No iomem [-1] ?
.No iosiz [0] ?
.No irq [10] ? Ic 5
.No drq [-1] ?
.No drq2 [-1] ?
.No flags [0] ?
d513 2
a514 2
.No "Clone Device (DevNo, 'q' or '?') ?" Ic 13
.No "Insert before Device (DevNo, 'q' or '?')" Ic 14
d518 4
a521 4
.No change (y/n) ? Ic y
.No dev [-1] ? Ic 14
.No function [-1] ?
.No flags [0] ? 18
@


1.36
log
@typo;
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.35 2003/06/12 12:59:50 jmc Exp $
a206 1
.Pp
a264 1
.Pp
a285 1
.Pp
a295 1
.Pp
d312 1
a312 2
.Pp
.Bl -tag -width "disable attr val | devno | dev" indent
a421 1
.Pp
a436 1
.Pp
a458 1
.Pp
a468 1
.Pp
a501 1
.Pp
a541 1
.Pp
@


1.35
log
@- section reorder
- macro fixes
- kill whitespace at EOL
- new sentence, new line
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.34 2003/06/02 23:36:52 millert Exp $
d481 1
a481 1
 29 mcd0 alredy disabled
@


1.34
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.33 2003/05/12 12:05:18 jmc Exp $
a255 1
.Pp
a573 1

@


1.33
log
@typo (mine) from Martin Reindl;
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.32 2003/05/08 08:24:53 jmc Exp $
d15 1
a15 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
@


1.32
log
@used .Li for examples, as per first example.
CDROM -> CD-ROM for consistency.
"make depend" and "make clean" wrapped in double quotes for consistency.

ok millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.31 2002/12/15 13:31:13 henning Exp $
d273 1
a273 1
# config -e o bsd.new /bsd
@


1.31
log
@spellingmania; torh
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.30 2002/10/13 21:21:31 miod Exp $
d273 1
a273 1
.Li #\  Ic config Fl e o Ar bsd.new /bsd
d375 1
a375 1
To compile your own kernel from a non-writable media (such as a CDROM)
a378 1
.Sm off
d380 5
a384 23
.Li #\  Xo
.Ic cd\ /
.Ar somedir
.Xc
.Li #\  Xo
.Ic cp\ /usr/src/sys/arch/
.Ar somearch
.Ic /conf/
.Ar SOMEFILE
.Ic \ .
.Xc
.Li #\  Xo
.Ic vi\ \&
.Ar SOMEFILE
.No \ \ \ (to\ make\ any\ changes)
.Xc
.Li #\  Xo
.Ic config\ -s\ /usr/src/sys\ -b\ .\ \&
.Ar SOMEFILE
.Xc
.Li #\  Xo
.Ic make
.Xc
a385 1
.Sm on
a387 1
.Sm off
d389 5
a393 21
.Li #\  Xo
.Ic cd\ /usr/src/sys/arch/
.Ar somearch
.Ic /conf
.Xc
.Li #\  Xo
.Ic vi\ \&
.Ar SOMEFILE
.No \ \ \ (to\ make\ any\ changes)
.Xc
.Li #\  Xo
.Ic config\ \&
.Ar SOMEFILE
.Xc
.Li #\  Xo
.Ic cd\ ../compile/
.Ar SOMEFILE
.Xc
.Li #\  Xo
.Ic make
.Xc
a394 1
.Sm on
d408 1
a408 1
.Ar "make clean"
d411 1
a411 1
.Ic make depend
@


1.30
log
@Xr files.conf(5)
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.29 2002/06/14 21:35:01 todd Exp $
d375 1
a375 1
To compile your own kernel from a non-writeable media (such as a CDROM)
@


1.29
log
@spelling; from Brian Poole <raj@@cerias.purdue.edu>
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.28 2002/03/23 13:30:24 espie Exp $
d254 6
a259 1
information see the various configuration files included in the system.
d601 1
@


1.28
log
@small cleanups:
ansi prototypes,
help formating,
common code to handle integer parameters.

Let SystemV shm parameters be settable.
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.27 2002/02/17 23:01:19 maja Exp $
d146 1
a146 1
is appended to the default compliation directory name.
@


1.27
log
@Patch from Daniel Lucq <daniel@@lucq.org>

The patch allows you to change the value of NMBCLUSTERS, BUFCACHEPERCENT
and NKMEMPAGES using the config command, instead of recompiling the kernel.

This is the userland part of the patch. I have compiled it on i386, sparc64,
alpha and macppc. -moj ok art@@ maja@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.26 2002/02/07 22:45:42 aaron Exp $
d359 6
@


1.26
log
@device -> decide; fixes PR#2382.
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.25 2001/08/05 20:34:12 hugh Exp $
d350 9
@


1.25
log
@Make manual match source string.
Spotted by Heikki Korpela.
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.24 2001/07/20 19:09:47 mpech Exp $
d250 1
a250 1
device what should happen.
@


1.24
log
@we don't like:
o) .Pp before/after .Sh;
o) .Pp before/after .Sh;
o) .Nm without argument in SYNOPSIS;
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.23 2000/08/08 21:42:40 deraadt Exp $
d245 1
a245 1
.It config Ar bsd root on "dev [swap on dev [and dev ...]] [dump on dev [and dev ...]]"
@


1.23
log
@permit changing flags
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.22 2000/07/07 21:53:29 deraadt Exp $
a583 1
.Pp
@


1.22
log
@document timezone command, as in boot_config(8)
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.21 2000/05/31 02:24:44 aaron Exp $
d453 5
a457 5
24 ne0 at isa0 port 0x240 size 0 iomem 0xd8000 iosiz 0 irq 9 drq -1 drq2 -1
25 ne1 at isa0 port 0x300 size 0 iomem -1 iosiz 0 irq 10 drq -1 drq2 -1
26 ne* at isapnp0 port -1 size 0 iomem -1 iosiz 0 irq -1 drq -1
27 ne* at pci* dev -1 function -1
28 ne* at pcmcia* function -1 irq -1
d478 1
d480 1
a480 1
25 ne1 at isa0 port 0x300 size 0 iomem -1 iosiz 0 irq 5 drq -1 drq2 -1
d492 1
a492 1
 29 mcd0 at isa0 port 0x300 size 0 iomem -1 iosiz 0 irq 10 drq -1 drq2 -1
d496 1
a496 1
 29 mcd0 at isa0 disable port 0x300 size 0 iomem -1 iosiz 0 irq 10 drq -1 drq2 -1
d524 4
a527 4
 25 ne1 at isa0 port 0x300 size 0 iomem -1 iosiz 0 irq 10 drq -1 drq2 -1
 72 we1 at isa0 port 0x300 size 0 iomem 0xcc000 iosiz 0 irq 10 drq -1 drq2 -1
 75 el0 at isa0 port 0x300 size 0 iomem -1 iosiz 0 irq 9 drq -1 drq2 -1
 77 ie1 at isa0 port 0x300 size 0 iomem -1 iosiz 0 irq 10 drq -1 drq2 -1
d537 8
a544 8
 11 ep0 at isa0 port -1 size 0 iomem -1 iosiz 0 irq -1 drq -1 drq2 -1
 12 ep0 at eisa0 slot -1
 13 ep0 at pci* dev -1 function -1
 14 ep* at isapnp0 port -1 size 0 iomem -1 iosiz 0 irq -1 drq -1
 15 ep* at isa0 port -1 size 0 iomem -1 iosiz 0 irq -1 drq -1 drq2 -1
 16 ep* at eisa0 slot -1
 17 ep* at pci* dev -1 function -1
 18 ep* at pcmcia* dev -1 irq -1
d554 1
d556 1
a556 1
 14 ep1 at pci* dev 14 function -1
@


1.21
log
@Remove hard sentence breaks.
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.20 2000/05/29 07:28:54 angelos Exp $
d346 5
@


1.20
log
@More text about config file format, some of it unfortunately at the
expense of Theo's artistic expression.
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.19 2000/05/29 07:19:29 deraadt Exp $
d68 2
a69 1
option.  Similarily, you can do the same editing at boot-time, using
d214 2
a215 1
Required.  Specifies the machine architecture.
d219 2
a220 1
Set a kernel option.  Kernel options may take either the form
d228 3
a230 2
Delete a previously set option.  This is useful when including another
kernel configuration file.  A typical use is to include the
d236 7
a242 5
Required.  Used to size various system tables and maximum operating conditions
in an approximate fashion.  Multiple instances of this keyword may be
specified.  The number provided in the last instance will be used, and
warnings will be printed for each duplicate value.  This is convenient
when used with the
d246 2
a247 1
Required.  Specifies the swap and dump devices which the system should use.
@


1.19
log
@start to describe config file format
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.18 2000/04/12 21:47:52 aaron Exp $
d215 1
a215 1
la la la
d221 3
d225 6
a230 1
Delete a previously set option.
d233 6
a238 1
in an approximate fashion.
@


1.18
log
@Trailing whitespace begone!
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.17 2000/04/04 03:32:02 deraadt Exp $
d207 29
@


1.17
log
@more details, and a UKC(8) link
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.16 2000/03/19 17:57:03 aaron Exp $
d373 1
a373 1
is required; 
@


1.16
log
@Remove hard sentence breaks. Add $OpenBSD$ tags where appropriate. Some other
cleanup along the way.
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.15 2000/03/14 21:31:36 aaron Exp $
d64 6
a69 1
Devices may be enabled, disabled, or modified without recompiling (see
@


1.15
log
@Suffix "i.e." and "e.g." with a comma. Just another really picky man page
commit, as we want our documentation to be as consistently formatted as
possible (it's getting there :-)).
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.14 1999/11/27 03:49:13 d Exp $
d100 2
a101 1
kernel binary with the modified kernel. Otherwise,
d402 2
a403 2
ne1 seems to match the configuration except it uses IRQ 5 instead of IRQ 10. So
the irq on ne1 should be changed via the
d405 2
a406 1
command. The device can be specified by either name or number.
d427 2
a428 2
CD-ROM in OpenBSD/i386. The simplest thing to solve that problem is to
disable mcd0.
d472 2
a473 1
kernel. If a new device is added, following devices will be renumbered.
@


1.14
log
@re-enable config without arguments; fix usage
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.13 1999/10/17 20:35:47 aaron Exp $
d376 1
a376 1
(i.e.
d437 1
a437 1
It's also possible to disable all devices with a common attribute. e.g.
@


1.13
log
@Remove some redundant .Pp.
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.12 1999/10/16 04:48:22 aaron Exp $
d48 1
a48 1
.Ar config-file
d50 1
a50 1
.Op Fl e
d185 16
@


1.12
log
@Improved config(8) man page; deraadt@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.11 1999/10/12 00:25:30 maja Exp $
a87 1
.Pp
@


1.11
log
@document config -e. -moj
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.10 1999/07/22 19:24:52 deraadt Exp $
d37 1
a37 1
.Dd April 19, 1994
d42 1
a42 1
.Nd build kernel compilation directories or modify a kernel
d48 1
a48 1
.Op Ar config-file
d50 2
a51 2
.Fl e 
.Op Fl f | o Ar outfile
d55 4
a58 33
.Nm config
creates a kernel build directory from the file
.Ar config-file ,
which describes the system to configure.
.Nm config
can also be used to modify a compiled kernel when using the
.Fl e
option, see section modifying kernel.
.Pp
There are several different ways to run the
.Nm config
program.  The traditional way is to run
.Nm config
from the
.Pa conf
subdirectory of the machine-specific directory of the system source
(usually
.Pa /sys/arch/MACHINE/conf ,
where
.Pa MACHINE
is one of
.Pa i386 ,
.Pa sparc ,
.Pa hp300 ,
and so forth), and to specify as the
.Ar config-file
the name of a file located in that directory.
.Nm config
will by default create files in the directory
.Pa ../compile/SYSTEMNAME ,
where
.Pa SYSTEMNAME
is the last path component of
d60 22
a81 3
.Nm config
will assume that the top-level kernel source directory is located four
directories above the build directory.
d83 3
a85 17
Another way is to create the build directory yourself, place the
configuration file in the build directory with the name
.Pa CONFIG ,
and run
.Nm config
from within the build directory without specifying a
.Ar config-file .
.Nm config
will then by default create files in the current directory.  If you
run
.Nm config
this way, you must specify the location of the top-level kernel source
directory using the
.Fl s
option or by using the
.Dq Li source
directive at the beginning of the system configuration file.
d87 1
a87 9
Finally, you can specify the build directory for
.Nm config
and run it from anywhere.  You can specify a build directory with the
.Fl b
option or by using the
.Dq Li build
directive at the beginning of the system configuration file.  You must
specify the location of the top-level kernel source directory if you
specify a build directory.
d89 39
a127 12
If the
.Fl p
option is supplied,
.Pa .PROF
is appended to the default compilation directory name, and
.Nm config
acts as if the lines
.Dq Li makeoptions PROF="-pg"
and
.Dq Li options GPROF
appeared in the configuration file.
This will build a system that includes profiling code; see
d131 11
d146 3
a148 6
profiles of existing systems;
for regular profiling,
it is probably wiser to make a separate configuration
containing the
.Li makeoptions
line.
d150 1
a150 1
The old undocumented
d152 5
a156 5
flag is no longer supported.
Instead, use
.Dq Li makeoptions DEBUG="-g"
and (typically)
.Dq Li options KGDB .
d159 1
a159 1
.Nm config
d161 3
a163 2
.Pa ioconf.c ,
a description of I/O devices that may be attached to the system; and a
d167 1
a167 1
in building the kernel.
d170 1
a170 1
.Nm config ,
d172 3
a174 4
.Dq Li make depend
in the directory where the new makefile
was created.
.Nm config
d178 1
a178 1
.Nm config
d180 1
a180 1
.Nm config
d182 96
a277 7
.Nm config
attempts to avoid changing the compilation directory
if there are configuration errors,
but this code is not well-tested,
and some problems (such as running out of disk space)
are unrecoverable.
.Sh EXAMPLE
d343 1
a343 1
is the architecture (e.g.
d368 2
a369 102
.Sh MODIFYING KERNEL
.Nm config
.Fl e
has the same functionalty as
.Xr boot_config 8
, to modify the device configuration of a kernel. One problem with
.Xr boot_config 8
has been that modifications has to be done on every boot.
.Nm config
.Fl e
makes it possible to do permanent changes to a kernel.
.Pp
The options are as follows:
.Bl -tag -width indent
.It Fl f
If
.Fl o Ar outfile
hasn't be given use
.Ar infile
as output file. 
.It Fl o Ar outfile
Save any changes to
.Ar outfile .
.It Fl u
If
.Ar infile
seems to be the same kernel as the current kernel, apply all changes done at
boot.
.El
.Pp
When invoked the kernel identification of the input file will be showed
.Pp
.Bd -literal 
.Li #\  Ic config Fl e o Ar bsd.new /bsd
OpenBSD 2.6-beta (GENERIC.rz0) #0: Mon Oct  4 03:57:22 MEST 1999
    root@@winona:/usr/src/sys/arch/pmax/compile/GENERIC.rz0
Enter 'help' for information
ukc>
.Ed
.Pp
Some warnings might be printed before the ukc prompt.
.Bd -literal
warning: not output file specified
.Ed
.Pp
Niether 
.Fl f
or
.Fl o
has been specifed. Changes will be ignored.
.Bd -literal
WARNING this kernel doesn't contain all information needed!
WARNING the commands add and change might not work.
.Ed
.Pp
The kernel is too old (pre
.Ox 2.6 )
and can't support all functionality of
.Ic config Fl e .
.Bd -literal
WARNING kernel mismatch. -u ignored.
WARNING the running kernel version:
.Ed
.Pp
.Nm config
doesn't think that the running kernel is the same as the file specified.
Since the log of changes in the running kernel is kernel specific the 
.Fl u
option is ignored.
.Sh COMMANDS
.Bl -tag -width "disable attr val | devno | dev" indent
.It Ic add Ar dev
Add a device through copying another.
.It Ic base Ar 8 | 10 | 16
Change the base of numbers displayed and entered,
e.g. I/O addresses in a VAXen are octal.
.It Ic change Ar devno | dev
Modify one or more devices.
.It Ic disable Ar attr val | devno | dev
Disable one or more devices.
.It Ic enable Ar attr val | devno | dev
Enable one or more devices.
.It Ic exit
Exit without saving changes.
.It Ic find Ar devno | dev
Find one or more devices.
.It Ic help
Give a short summary of all commands and their arguments.
.It Ic list
Show all known devices, a screen at a time.
.It Ic lines Op Ar count
Set the number of rows per page.
.It Ic quit
Exit and save changes.
.It Ic show Op Ar attr Op Ar val
Show all devices for which attribute
.Ar attr
has the value
.Ar val .
.El
.Sh MORE EXAMPLES
The ethernet card is not detected at boot because the kernel configuration
d371 2
a372 2
e.g. wrong IRQ in OpenBSD/i386.
The ethernet card is supposed to use the
d388 1
a388 1
.Fa change
d433 3
a435 1
The show command is useful for finding which devices have a certain attribute.
d481 1
a481 1
When done exit the program with the
d489 1
a489 1
writes the changes in
d500 3
d504 1
a504 2
.Sh SEE ALSO
.Xr options 4
a505 1
The SYNOPSIS portion of each device in section 4.
a507 1
.\" .%T "Device Support in 4.4BSD"
a508 1
.Pp
d511 3
a513 5
.Nm config
command appeared in
.Bx 4.1 .
It was completely revised in
.Bx 4.4 .
d515 2
a516 2
.Nm config Fl e
command appeared in
d518 1
@


1.10
log
@document kernel building; stolen from afterboot.8
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.9 1999/05/23 14:11:32 aaron Exp $
d42 1
a42 1
.Nd build kernel compilation directories
d49 5
d59 4
d276 231
d523 4
@


1.9
log
@remove argument from .Os macros so value in /usr/share/tmac/mdoc/doc-common
is used instead; kwesterback@@home.com
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.8 1999/03/17 15:56:25 millert Exp $
d176 91
d275 1
a275 1
.sp
@


1.8
log
@i386, sparc, hp300 not vax, tahoe, hp300
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.7 1998/11/08 00:21:28 aaron Exp $
d39 1
a39 1
.Os BSD 4
@


1.7
log
@usr.sbin/ man page repairs, a-i
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.6 1998/03/16 07:46:04 deraadt Exp $
d67 2
a68 2
.Pa vax ,
.Pa tahoe ,
@


1.6
log
@Xr options 4
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.5 1997/06/05 12:37:15 kstailey Exp $
d50 1
a50 2
.Pp
.Nm Config
d80 1
a80 1
.Nm Config
d91 1
a91 1
.Nm Config
d162 1
a162 1
.Nm Config
d170 1
a170 1
.Nm Config
d177 1
a177 1
.Xr options 4 .
@


1.5
log
@take out self-reference from "SEE ALSO"
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.4 1996/10/23 22:37:50 niklas Exp $
d178 2
@


1.4
log
@Merge of NetBSD 961020.  Includes flexible build/source dir specs
@
text
@d1 1
a1 1
.\"	$OpenBSD: config.8,v 1.3 1996/04/21 23:40:05 deraadt Exp $
a183 1
.Xr config 8
@


1.3
log
@sync to netbsd 960418
@
text
@d1 2
a2 2
.\"	$OpenBSD: config.8,v 1.2 1996/03/25 15:55:01 niklas Exp $
.\"	$NetBSD: config.8,v 1.9 1996/03/17 06:29:19 cgd Exp $
d45 2
d48 1
a48 1
.Ar system-name
a50 12
This is the new version of the
.Nm config
program.
.\"It understands the more modern autoconfiguration scheme
.\"used on the SPARC and i386 platforms.
.\"The old version of config is still used with the
.\"HP300, DECstation, and derivative platforms.
.\"Only the version of
.\".Nm config
.\"applicable to the architecture that you are running
.\"will be installed on your machine.
.Pp
d52 3
a54 4
builds a set of configuration files from the file
.Ar system-name ,
which describes
the system to configure.
d56 5
a60 2
.Nm Config
should run from the
d62 2
a63 2
subdirectory of the top-level machine-specific directory
of the system source (usually
d71 10
a80 1
and so forth).
d82 30
a111 10
assumes the directory
.Pa ../compile
exists; it places all output files in a subdirectory there,
creating the subdirectory if necessary.
The subdirectory name is taken from the
.Ar system-name ;
thus, configuring with
.Dq Li config PICKLE
will use the directory
.Pa ../compile/PICKLE .
d117 1
a117 1
is appended to the compilation directory name, and
@


1.2
log
@From NetBSD: merge of 960317
@
text
@d1 2
a2 2
.\"	$OpenBSD$
.\"	$NetBSD: config.8,v 1.8 1996/03/03 17:28:05 thorpej Exp $
d56 1
a56 1
.\"Only the version of 
@


1.1
log
@Initial revision
@
text
@d1 3
a35 1
.\"	$Id: config.8,v 1.7 1995/04/28 06:55:00 cgd Exp $
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@

