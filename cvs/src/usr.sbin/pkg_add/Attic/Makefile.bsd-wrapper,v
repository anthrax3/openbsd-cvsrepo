head	1.8;
access;
symbols
	pkgtools:1.1.1.1
	espie:1.1.1;
locks; strict;
comment	@# @;


1.8
date	2003.10.28.17.14.16;	author espie;	state dead;
branches;
next	1.7;

1.7
date	2003.10.21.16.41.43;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2003.10.20.22.21.41;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2003.10.20.17.28.09;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2003.10.19.18.38.06;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2003.10.19.18.12.46;	author sturm;	state Exp;
branches;
next	1.2;

1.2
date	2003.10.19.17.45.59;	author sturm;	state Exp;
branches;
next	1.1;

1.1
date	2003.10.16.17.43.34;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.10.16.17.43.34;	author espie;	state Exp;
branches;
next	;


desc
@@


1.8
log
@zap
@
text
@.BEGIN:
	@@if [ ${.CURDIR} != ${.OBJDIR} ]; then ${LNDIR} -s -e obj -e obj.${MACHINE_ARCH} -e Makefile.bsd-wrapper ${.CURDIR}; fi

MAN=pkg_add.1 pkg_info.1 pkg_create.1 pkg_delete.1 pkg.1
depend Makefile:
	perl ${.CURDIR}/Makefile.PL \
	    INSTALLSCRIPT='$${DESTDIR}/usr/sbin' \
	    INSTALLPRIVLIB='$${DESTDIR}/usr/libdata/perl5/'

all: Makefile
	cd ${.OBJDIR} && exec ${MAKE}

install: maninstall
	cd ${.OBJDIR} && exec ${MAKE} pure_install
	
clean:
	cd ${.OBJDIR} && exec ${MAKE} clean

# XXX don't remove srcdir
cleandir:
	-@@if [ ${.CURDIR} != ${.OBJDIR} ]; then \
		cd ${.OBJDIR} && rm -fr *; \
	else \
		test -e Makefile && exec ${MAKE} realclean; \
	fi

# Our lndir is hacked; specify a full path to avoid potential conflicts
# with the one installed with X11.
LNDIR=          /usr/bin/lndir

.include <bsd.obj.mk>
.include <bsd.subdir.mk>
.include <bsd.man.mk>
@


1.7
log
@Prefix ${DESTDIR} to installation directory.
Oops.

Problem found by danh@@, thx!
@
text
@@


1.6
log
@let it build even if depend stage gets skipped.
ok miod@@
@
text
@d6 3
a8 1
	perl ${.CURDIR}/Makefile.PL
@


1.5
log
@Forgot that one.
@
text
@d5 1
a5 1
depend:
d8 1
a8 1
all:
@


1.4
log
@Add manpages, with a few minor changes from old ones.
ok pval
@
text
@d4 1
a4 1
MAN=pkg_add.1 pkg_info.1 pkg_create.1 pkg_delete.1
@


1.3
log
@I committed the wrong diff which would remove all files in pkg_add/
in case $USER forgot make obj before make cleandir, this fixes it

espie@@ ok
@
text
@d4 1
d11 1
a11 1
install:
d31 1
a31 3
.ifndef NOMAN
.  include <bsd.man.mk>
.endif
@


1.2
log
@new targets clean and cleandir

espie@@ ok
@
text
@d16 1
d18 5
a22 1
	cd ${.OBJDIR} && rm -fr *
@


1.1
log
@Initial revision
@
text
@d13 6
@


1.1.1.1
log
@new import of my pkgtools, after a slight naming disagreement with the
Upper Management...
@
text
@@
