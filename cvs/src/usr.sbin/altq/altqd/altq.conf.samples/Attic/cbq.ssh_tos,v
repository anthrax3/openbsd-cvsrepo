head	1.3;
access;
symbols
	OPENBSD_3_2:1.2.0.4
	OPENBSD_3_2_BASE:1.2
	OPENBSD_3_1:1.2.0.2
	OPENBSD_3_1_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2002.11.23.18.47.28;	author deraadt;	state dead;
branches;
next	1.2;

1.2
date	2002.02.07.10.22.02;	author wilfried;	state Exp;
branches;
next	1.1;

1.1
date	2002.02.06.17.29.30;	author art;	state Exp;
branches;
next	;


desc
@@


1.3
log
@bye bye
@
text
@#	$OpenBSD: cbq.ssh_tos,v 1.2 2002/02/07 10:22:02 wilfried Exp $
#
# Artur Grabowski <art@@openbsd.org> 2002 Public Domain
#
# Sample configuration that puts ssh traffic into different classes depending
# on if it's a bulk transfer or interactive session.
#

# We have a 10Mbps link on de0
interface de0 bandwidth 10M cbq

# Create the root class. Everything.
class cbq de0 root NULL pbandwidth 100

class cbq de0 ctl_class root pbandwidth 5 control
class cbq de0 def_class root borrow pbandwidth 95 default

class cbq de0 bulk def_class borrow pbandwidth 40
class cbq de0 interactive def_class borrow pbandwidth 40

class cbq de0 inter_ssh interactive borrow pbandwidth 35 red
# TOS 0x10 is IPTOS_LOWDELAY, set in ssh for interactive sessions.
	filter de0 inter_ssh 0 22 0 0 6 tos 0x10
	filter de0 inter_ssh 0 0 0 22 6 tos 0x10

class cbq de0 bulk_ssh bulk borrow pbandwidth 20 red
# TOS 0x08 is IPTOS_THROUGHPUT, set in ssh for bulk sessions.
	filter de0 bulk_ssh 0 22 0 0 6 tos 0x08
	filter de0 bulk_ssh 0 0 0 22 6 tos 0x08
@


1.2
log
@fix typo, ok art@@
@
text
@d1 1
a1 1
#	$OpenBSD: cbq.ssh_tos,v 1.1 2002/02/06 17:29:30 art Exp $
@


1.1
log
@example configuration that sees the difference between interactive and bulk ssh sessions.
@
text
@d1 1
a1 1
#	$OpenBSD$
d23 2
a24 2
	filter de0 inter_tcp 0 22 0 0 6 tos 0x10
	filter de0 inter_tcp 0 0 0 22 6 tos 0x10
@

