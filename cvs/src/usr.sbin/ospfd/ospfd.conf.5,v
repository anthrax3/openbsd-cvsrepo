head	1.48;
access;
symbols
	OPENBSD_6_2:1.48.0.8
	OPENBSD_6_2_BASE:1.48
	OPENBSD_6_1:1.48.0.10
	OPENBSD_6_1_BASE:1.48
	OPENBSD_6_0:1.48.0.6
	OPENBSD_6_0_BASE:1.48
	OPENBSD_5_9:1.48.0.2
	OPENBSD_5_9_BASE:1.48
	OPENBSD_5_8:1.48.0.4
	OPENBSD_5_8_BASE:1.48
	OPENBSD_5_7:1.47.0.6
	OPENBSD_5_7_BASE:1.47
	OPENBSD_5_6:1.47.0.10
	OPENBSD_5_6_BASE:1.47
	OPENBSD_5_5:1.47.0.8
	OPENBSD_5_5_BASE:1.47
	OPENBSD_5_4:1.47.0.4
	OPENBSD_5_4_BASE:1.47
	OPENBSD_5_3:1.47.0.2
	OPENBSD_5_3_BASE:1.47
	OPENBSD_5_2:1.46.0.2
	OPENBSD_5_2_BASE:1.46
	OPENBSD_5_1_BASE:1.45
	OPENBSD_5_1:1.45.0.4
	OPENBSD_5_0:1.45.0.2
	OPENBSD_5_0_BASE:1.45
	OPENBSD_4_9:1.44.0.2
	OPENBSD_4_9_BASE:1.44
	OPENBSD_4_8:1.43.0.2
	OPENBSD_4_8_BASE:1.43
	OPENBSD_4_7:1.42.0.2
	OPENBSD_4_7_BASE:1.42
	OPENBSD_4_6:1.35.0.4
	OPENBSD_4_6_BASE:1.35
	OPENBSD_4_5:1.34.0.2
	OPENBSD_4_5_BASE:1.34
	OPENBSD_4_4:1.31.0.2
	OPENBSD_4_4_BASE:1.31
	OPENBSD_4_3:1.29.0.2
	OPENBSD_4_3_BASE:1.29
	OPENBSD_4_2:1.28.0.2
	OPENBSD_4_2_BASE:1.28
	OPENBSD_4_1:1.21.0.2
	OPENBSD_4_1_BASE:1.21
	OPENBSD_4_0:1.19.0.2
	OPENBSD_4_0_BASE:1.19
	OPENBSD_3_9:1.14.0.2
	OPENBSD_3_9_BASE:1.14
	OPENBSD_3_8:1.10.0.2
	OPENBSD_3_8_BASE:1.10
	OPENBSD_3_7:1.6.0.2
	OPENBSD_3_7_BASE:1.6;
locks; strict;
comment	@.\" @;


1.48
date	2015.03.11.08.05.11;	author sthen;	state Exp;
branches;
next	1.47;
commitid	d4kH23IWuUcUVccN;

1.47
date	2012.08.29.19.39.26;	author jmc;	state Exp;
branches;
next	1.46;

1.46
date	2012.04.24.14.56.09;	author jmc;	state Exp;
branches;
next	1.45;

1.45
date	2011.04.30.07.52.33;	author sthen;	state Exp;
branches;
next	1.44;

1.44
date	2011.02.02.23.27.51;	author sthen;	state Exp;
branches;
next	1.43;

1.43
date	2010.05.17.17.47.46;	author jmc;	state Exp;
branches;
next	1.42;

1.42
date	2010.02.16.08.39.05;	author dlg;	state Exp;
branches;
next	1.41;

1.41
date	2010.02.16.08.27.31;	author dlg;	state Exp;
branches;
next	1.40;

1.40
date	2010.02.16.08.22.42;	author dlg;	state Exp;
branches;
next	1.39;

1.39
date	2009.11.25.12.58.47;	author dlg;	state Exp;
branches;
next	1.38;

1.38
date	2009.09.19.13.31.35;	author sthen;	state Exp;
branches;
next	1.37;

1.37
date	2009.07.23.20.40.00;	author jmc;	state Exp;
branches;
next	1.36;

1.36
date	2009.07.23.16.37.44;	author claudio;	state Exp;
branches;
next	1.35;

1.35
date	2009.03.29.18.40.24;	author claudio;	state Exp;
branches;
next	1.34;

1.34
date	2009.01.26.23.08.31;	author claudio;	state Exp;
branches;
next	1.33;

1.33
date	2009.01.08.17.19.57;	author jmc;	state Exp;
branches;
next	1.32;

1.32
date	2009.01.07.21.16.36;	author claudio;	state Exp;
branches;
next	1.31;

1.31
date	2008.06.10.07.22.45;	author jsing;	state Exp;
branches;
next	1.30;

1.30
date	2008.05.07.12.58.37;	author jsing;	state Exp;
branches;
next	1.29;

1.29
date	2008.01.31.20.00.08;	author jmc;	state Exp;
branches;
next	1.28;

1.28
date	2007.06.19.16.45.15;	author reyk;	state Exp;
branches;
next	1.27;

1.27
date	2007.05.31.19.20.26;	author jmc;	state Exp;
branches;
next	1.26;

1.26
date	2007.05.31.04.24.26;	author claudio;	state Exp;
branches;
next	1.25;

1.25
date	2007.05.31.03.12.21;	author jmc;	state Exp;
branches;
next	1.24;

1.24
date	2007.05.10.11.49.34;	author stevesk;	state Exp;
branches;
next	1.23;

1.23
date	2007.03.21.14.17.57;	author jmc;	state Exp;
branches;
next	1.22;

1.22
date	2007.03.21.12.47.34;	author claudio;	state Exp;
branches;
next	1.21;

1.21
date	2006.12.08.09.21.08;	author claudio;	state Exp;
branches;
next	1.20;

1.20
date	2006.12.08.09.19.19;	author claudio;	state Exp;
branches;
next	1.19;

1.19
date	2006.08.31.18.44.48;	author jmc;	state Exp;
branches;
next	1.18;

1.18
date	2006.08.28.23.16.50;	author stevesk;	state Exp;
branches;
next	1.17;

1.17
date	2006.08.28.14.45.54;	author stevesk;	state Exp;
branches;
next	1.16;

1.16
date	2006.06.01.23.00.17;	author claudio;	state Exp;
branches;
next	1.15;

1.15
date	2006.03.30.12.46.47;	author claudio;	state Exp;
branches;
next	1.14;

1.14
date	2005.10.28.18.27.17;	author jmc;	state Exp;
branches;
next	1.13;

1.13
date	2005.10.28.16.50.12;	author stevesk;	state Exp;
branches;
next	1.12;

1.12
date	2005.10.27.22.52.46;	author stevesk;	state Exp;
branches;
next	1.11;

1.11
date	2005.09.15.20.24.46;	author claudio;	state Exp;
branches;
next	1.10;

1.10
date	2005.05.24.20.38.20;	author claudio;	state Exp;
branches;
next	1.9;

1.9
date	2005.05.23.19.59.02;	author norby;	state Exp;
branches;
next	1.8;

1.8
date	2005.04.12.09.54.59;	author claudio;	state Exp;
branches;
next	1.7;

1.7
date	2005.03.31.19.32.10;	author norby;	state Exp;
branches;
next	1.6;

1.6
date	2005.03.11.23.34.41;	author norby;	state Exp;
branches;
next	1.5;

1.5
date	2005.02.27.08.21.15;	author norby;	state Exp;
branches;
next	1.4;

1.4
date	2005.02.07.05.51.00;	author david;	state Exp;
branches;
next	1.3;

1.3
date	2005.02.03.10.41.53;	author jmc;	state Exp;
branches;
next	1.2;

1.2
date	2005.02.02.22.50.59;	author jmc;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.02.21.22.28;	author norby;	state Exp;
branches;
next	;


desc
@@


1.48
log
@tweak wording; "a value different to 1" -> "...other than 1", from Sevan Janiyan
@
text
@.\"	$OpenBSD: ospfd.conf.5,v 1.47 2012/08/29 19:39:26 jmc Exp $
.\"
.\" Copyright (c) 2005 Esben Norby <norby@@openbsd.org>
.\" Copyright (c) 2004 Claudio Jeker <claudio@@openbsd.org>
.\" Copyright (c) 2003, 2004 Henning Brauer <henning@@openbsd.org>
.\" Copyright (c) 2002 Daniel Hartmeier <dhartmei@@openbsd.org>
.\"
.\" Permission to use, copy, modify, and distribute this software for any
.\" purpose with or without fee is hereby granted, provided that the above
.\" copyright notice and this permission notice appear in all copies.
.\"
.\" THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
.\" WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
.\" MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
.\" ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
.\" WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
.\" ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
.\" OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
.\"
.Dd $Mdocdate: August 29 2012 $
.Dt OSPFD.CONF 5
.Os
.Sh NAME
.Nm ospfd.conf
.Nd Open Shortest Path First daemon configuration file
.Sh DESCRIPTION
The
.Xr ospfd 8
daemon implements the Open Shortest Path First protocol version 2 as described
in RFC 2328.
.Sh SECTIONS
The
.Nm
config file is divided into three main sections.
.Bl -tag -width xxxx
.It Sy Macros
User-defined variables may be defined and used later, simplifying the
configuration file.
.It Sy Global Configuration
Global settings for
.Xr ospfd 8 .
A number of global settings can be overruled in specific areas or interfaces.
.It Sy Areas
An OSPF router must be a member of at least one area.
Areas are used to group interfaces, simplifying configuration.
.El
.Pp
Argument names not beginning with a letter, digit, or underscore
must be quoted.
.Pp
Additional configuration files can be included with the
.Ic include
keyword, for example:
.Bd -literal -offset indent
include "/etc/ospfd.sub.conf"
.Ed
.Sh MACROS
Macros can be defined that will later be expanded in context.
Macro names must start with a letter, digit, or underscore,
and may contain any of those characters.
Macro names may not be reserved words (for example,
.Ic area ,
.Ic interface ,
or
.Ic hello-interval ) .
Macros are not expanded inside quotes.
.Pp
For example:
.Bd -literal -offset indent
hi="5"
area 0.0.0.0 {
	interface em0 {
		hello-interval $hi
	}
}
.Ed
.Pp
The same can be accomplished by specifying the hello-interval
globally or within the area declaration.
.Sh GLOBAL CONFIGURATION
All interface related settings can be configured globally, per area and per
interface.
The only settings that can be set globally and not overruled are listed below.
.Pp
.Bl -tag -width Ds -compact
.It Xo
.Ic fib-update
.Pq Ic yes Ns | Ns Ic no
.Xc
If set to
.Ic \&no ,
do not update the Forwarding Information Base, a.k.a. the kernel
routing table.
The default is
.Ic yes .
Setting
.Ic fib-update
to
.Ic \&no
will implicitly set the
.Ic stub Ic router
option to ensure that no traffic tries to transit via this router.
.Pp
.It Ic rdomain Ar tableid
Specifies the routing table
.Xr ospfd 8
should modify.
Table 0 is the default table.
.Pp
.It Xo
.Op Ic no
.Ic redistribute
.Sm off
.Po Ic static Ns | Ns Ic connected Ns | Ns
.Ic default Pc
.Sm on
.Op Ic set ...
.Xc
.It Xo
.Op Ic no
.Ic redistribute Ar prefix Op Ic set ...
.Xc
.It Xo
.Op Ic no
.Ic redistribute rtlabel Ar label Op Ic set ...
.Xc
If set to
.Ic connected ,
routes to directly attached networks will be announced over OSPF.
If set to
.Ic static ,
static routes will be announced over OSPF.
If set to
.Ic default ,
a default route pointing to this router will be announced over OSPF.
It is possible to specify a network range with
.Ar prefix ;
networks need to be part of that range to be redistributed.
Additionally it is possible to redistribute based on route labels
using the
.Ic rtlabel
keyword.
By default no additional routes will be announced over OSPF.
.Pp
.Ic redistribute
statements are evaluated in sequential order, from first to last.
The first matching rule decides if a route should be redistributed or not.
Matching rules starting with
.Ic no
will force the route to be not announced.
The only exception is
.Ic default ,
which will be set no matter what, and additionally
.Ic no
cannot be used together with it.
.Pp
It is possible to set the route
.Ic metric
and
.Ic type
for each redistribute rule.
.Ic type
is either 1 or 2.
The default value for
.Ic type
is 1 and for
.Ic metric
is 100.
Setting more than one option needs curly brackets:
.Bd -literal -offset indent
redistribute static set { metric 300 type 2 }
.Ed
.Pp
.It Xo
.Ic rfc1583compat
.Pq Ic yes Ns | Ns Ic no
.Xc
If set to
.Ic yes ,
decisions regarding AS-external routes are evaluated according to RFC 2328.
The default is
.Ic no .
.Pp
.It Ic router-id Ar address
Set the router ID; if not specified, the numerically lowest IP address of
the router will be used.
.Pp
.It Ic rtlabel Ar label Ic external-tag Ar number
Map route labels to external route tags and vice versa.
The external route tag is a non-negative 32-bit number attached to
AS-external OSPF LSAs.
.Pp
.It Xo
.Ic spf-delay
.Po Ar seconds Ns | Ns
.Ic msec Ar milliseconds Pc
.Xc
Set the SPF delay.
The delay between receiving an update to the link
state database and starting the shortest path first calculation.
The default value is 1 second; valid range is 10 milliseconds\-10 seconds.
.Pp
.It Xo
.Ic spf-holdtime
.Po Ar seconds Ns | Ns
.Ic msec Ar milliseconds Pc
.Xc
Set the SPF holdtime.
The minimum time between two consecutive
shortest path first calculations.
The default value is 5 seconds; the valid range is 10 milliseconds\-5 seconds.
.Pp
.It Xo
.Ic stub Ic router
.Pq Ic yes Ns | Ns Ic no
.Xc
If set to
.Ic yes ,
all interfaces with active neighbors will have a metric of infinity.
This ensures that the other routers prefer routes around this router while
still being able to reach directly connected IP prefixes.
The
.Ic stub Ic router
option is automatically enabled if either the
.Xr sysctl 8
variable
.Va net.inet.ip.forwarding
is set to a value other than 1 or if the FIB is not coupled.
.El
.Sh AREAS
Areas are used for grouping interfaces.
All interface-specific parameters can
be configured per area, overruling the global settings.
.Bl -tag -width Ds
.It Ic area Ar address
Specify an area section, grouping one or more interfaces.
.Bd -literal -offset indent
area 0.0.0.0 {
	interface em0
	interface em1 {
		metric 10
	}
}
.Ed
.El
.Pp
Area specific parameters are listed below.
.Bl -tag -width Ds
.It Ic demote Ar group Op Ar count
Increase the
.Xr carp 4
demotion counter by
.Ar count
on the given interface group, usually
.Ar carp ,
when no neighbor in the area is in an active state.
The demotion counter will be decreased when one neighbor in that
area is in an active state.
The default value for
.Ar count
is 1.
.Pp
For more information on interface groups,
see the
.Ic group
keyword in
.Xr ifconfig 8 .
.It Xo
.Ic stub
.Op Ic redistribute default
.Op Ic set ...
.Xc
Mark the area as
.Ar stub .
Stub areas will not be flooded by as-ext LSA, resulting in smaller routing
tables.
Area border routers should redistribute a default network LSA; this can be
enabled by specifying the default redistribute option.
A default summary LSA will only be redistributed if the router has an active
connection to the backbone area 0.0.0.0.
.El
.Sh INTERFACES
Each interface can have several parameters configured individually, otherwise
they are inherited.
An interface is specified by its name.
If multiple networks are configured an additional IP address can be supplied.
By default the first IP address is used.
.Bd -literal -offset indent
interface em0 {
	auth-type crypt
	auth-md 1 "yotVoo_Heypp"
	auth-md-keyid 1
}
interface fxp0:192.168.1.3
.Ed
.Pp
Interface-specific parameters are listed below.
.Bl -tag -width Ds
.It Ic auth-key Ar key
Set the authentication key for
.Ic simple
authentication.
Up to 8 characters can be specified.
.It Ic auth-md Ar key-id key
Set the authentication
.Ar key-id
and
.Ar key
for
.Ic crypt
authentication.
The valid range for
.Ar key-id
is 0\-255.
Up to 16 characters can be specified for
.Ar key .
Multiple keys may be specified.
.It Ic auth-md-keyid Ar key-id
Configure the
.Ar key-id
to use for
.Ic crypt
authentication.
The valid range for
.Ar key-id
is 0\-255.
The default key-id is 1.
While key-id 0 is valid, it is unavailable on various other implementations.
.It Xo
.Ic auth-type
.Po Ic none Ns | Ns
.Ic simple Ns | Ns Ic crypt Pc
.Xc
Set the authentication type.
The default is
.Ic none .
Simple authentication uses a plaintext password, up to 8 characters.
Crypt authentication uses an MD5 hash.
.It Ic demote Ar group
Increase the
.Xr carp 4
demotion counter by 1 on the given interface group, usually
.Ar carp ,
when the interface state is going down.
The demotion counter will be decreased when the interface
state is active again.
.It Ic fast-hello-interval Ic msec Ar milliseconds
If the interface is configured to use
.Ic router-dead-time minimal ,
hello packets will be sent using this timer.
The default value is 333; valid range is 50\-333 milliseconds.
.It Ic hello-interval Ar seconds
Set the hello interval.
The default value is 10; valid range is 1\-65535 seconds.
.It Ic metric Ar cost
Set the interface metric a.k.a. cost.
The default value is 10; valid range is 1\-65535.
.It Ic passive
Prevent transmission and reception of OSPF packets on this interface.
The specified interface will be announced as a stub network.
.It Ic retransmit-interval Ar seconds
Set retransmit interval.
The default value is 5 seconds; valid range is 5\-3600 seconds.
.It Xo
.Ic router-dead-time
.Po Ar seconds Ns | Ns Ic minimal Pc
.Xc
Set the router dead time, a.k.a. neighbor inactivity timer.
The default value is 40 seconds; valid range is 2\-2147483647 seconds.
If the router dead time has been set to
.Ic minimal ,
the timer is set to 1 second and hello packets are sent using the interval
specified by
.Ic fast-hello-interval .
When a neighbor has been
inactive for router-dead-time its state is set to DOWN.
Neighbors
that have been inactive for more than 24 hours are completely removed.
.It Ic router-priority Ar priority
Set the router priority.
The default value is 1; valid range is 0\-255.
If set
to 0 the router is not eligible as a Designated Router or Backup Designated
Router.
.It Ic transmit-delay Ar seconds
Set the transmit delay.
The default value is 1; valid range is 1\-3600 seconds.
.El
.Sh FILES
.Bl -tag -width "/etc/ospfd.conf" -compact
.It Pa /etc/ospfd.conf
.Xr ospfd 8
configuration file
.El
.Sh SEE ALSO
.Xr ospfctl 8 ,
.Xr ospfd 8 ,
.Xr rc.conf.local 8
.Sh HISTORY
The
.Nm
file format first appeared in
.Ox 3.7 .
@


1.47
log
@bump reference to rfc 1583 to rfc 2328;
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.46 2012/04/24 14:56:09 jmc Exp $
d20 1
a20 1
.Dd $Mdocdate: April 24 2012 $
d228 1
a228 1
is set to a value different to 1 or if the FIB is not coupled.
@


1.46
log
@take a stab at documenting when arguments need quoted, and valid macro
characters;

prompted by a diff from robert peichaer org

thanks gilles and henning for feedback
ok deraadt zinke
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.45 2011/04/30 07:52:33 sthen Exp $
d20 1
a20 1
.Dd $Mdocdate: April 30 2011 $
d180 1
a180 1
decisions regarding AS-external routes are evaluated according to RFC 1583.
@


1.45
log
@no need to escape |, pointed out by jmc@@
"it's worth killing, if just to stop it being copied all over the place"
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.44 2011/02/02 23:27:51 sthen Exp $
d20 1
a20 1
.Dd $Mdocdate: February 2 2011 $
d48 3
d59 2
a60 2
Macro names must start with a letter, and may contain letters, digits,
and underscores.
@


1.44
log
@s/microseconds/milliseconds/, from Stijn on bugs@@.
"whichever one is a thousandth of a second is the one i am ok with" dlg@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.43 2010/05/17 17:47:46 jmc Exp $
d20 1
a20 1
.Dd $Mdocdate: May 17 2010 $
d85 1
a85 1
.Pq Ic yes Ns \&| Ns Ic no
d111 1
a111 1
.Po Ic static Ns \&| Ns Ic connected Ns \&| Ns
d173 1
a173 1
.Pq Ic yes Ns \&| Ns Ic no
d192 1
a192 1
.Po Ar seconds Ns \&| Ns
d202 1
a202 1
.Po Ar seconds Ns \&| Ns
d212 1
a212 1
.Pq Ic yes Ns \&| Ns Ic no
d328 2
a329 2
.Po Ic none Ns \&| Ns
.Ic simple Ns \&| Ns Ic crypt Pc
d363 1
a363 1
.Po Ar seconds Ns \&| Ns Ic minimal Pc
@


1.43
log
@more then -> more than;
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.42 2010/02/16 08:39:05 dlg Exp $
d20 1
a20 1
.Dd $Mdocdate: February 16 2010 $
d193 1
a193 1
.Ic msec Ar microseconds Pc
d198 1
a198 1
The default value is 1 second; valid range is 10 microseconds\-10 seconds.
d203 1
a203 1
.Ic msec Ar microseconds Pc
d208 1
a208 1
The default value is 5 seconds; the valid range is 10 microseconds\-5 seconds.
d344 1
a344 1
.It Ic fast-hello-interval Ic msec Ar microseconds
d348 1
a348 1
The default value is 333; valid range is 50\-333 microseconds.
@


1.42
log
@implement support for fast hello packets.

if route-dead-time is set to "minimal" (rather than a number of
seconds), the dead time is set to 1 second and hellos are sent at
the interval specified by fast-hello-interval in msecs. this is non
standard wrt to the ospf rfc, but it does interoperate with at least
one other router vendor.

this allows much better responsiveness to l3 topology changes than
the standard intervals allow. if i yank a cable to one of my
upstreams, the routes adjust in a second rather than the default
of 40 i was running with before. the users dont even notice something
changed.

developed while working with joshua atterbury.
ok claudio@@ as part of a larger diff.
dedicated to zan rowe who thinks she is a bigger nerd than me.
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.41 2010/02/16 08:27:31 dlg Exp $
d166 1
a166 1
Setting more then one option needs curly brackets:
@


1.41
log
@the minimal spf-holdtime and spf-delay is 10 msec, not 50.

pointed out by claudio@@ before, somehow it snuck back in.
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.40 2010/02/16 08:22:42 dlg Exp $
d344 5
d361 4
a364 1
.It Ic router-dead-time Ar seconds
d367 5
@


1.40
log
@allow spf-delay and spf-holdtime to be specified in msec so ospfd can
better respond to rapid topology changes.

developed while working with joshua atterbury
ok claudio@@ as part of a larger diff.
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.39 2009/11/25 12:58:47 dlg Exp $
d20 1
a20 1
.Dd $Mdocdate: November 25 2009 $
d198 1
a198 1
The default value is 1 second; valid range is 50 microseconds\-10 seconds.
d208 1
a208 1
The default value is 5 seconds; the valid range is 50 microseconds\-5 seconds.
@


1.39
log
@document the include support
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.38 2009/09/19 13:31:35 sthen Exp $
d20 1
a20 1
.Dd $Mdocdate: September 19 2009 $
d190 6
a195 2
.It Ic spf-delay Ar seconds
Set SPF delay in seconds.
d198 1
a198 1
The default value is 1; valid range is 1\-10 seconds.
d200 6
a205 2
.It Ic spf-holdtime Ar seconds
Set the SPF holdtime in seconds.
d208 1
a208 1
The default value is 5 seconds; the valid range is 1\-5 seconds.
@


1.38
log
@- "stub redistribute default" does not take a "no" option, remove it
- remove some unnecessary \& escapes

ok claudio, jmc
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.37 2009/07/23 20:40:00 jmc Exp $
d20 1
a20 1
.Dd $Mdocdate: July 23 2009 $
d47 7
@


1.37
log
@no need for Xo/Xc when we have very simple list items;
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.36 2009/07/23 16:37:44 claudio Exp $
d107 1
a107 1
.Op Ic set ...\&
d111 1
a111 1
.Ic redistribute Ar prefix Op Ic set ...\&
d115 1
a115 1
.Ic redistribute rtlabel Ar label Op Ic set ...\&
d252 2
a253 2
.Op Ic no
.Ic redistribute default Op Ic set ...\&
@


1.36
log
@Document rdomain keyword, again from stsp@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.35 2009/03/29 18:40:24 claudio Exp $
d20 1
a20 1
.Dd $Mdocdate: March 29 2009 $
d94 1
a94 3
.It Xo
.Ic rdomain Ar tableid
.Xc
@


1.35
log
@Key-Id 0 is not only not available on Cisco devices but also on other devices.
Make this a more general concern about using 0 as key id. After discussion with
Tamas TEVESZ
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.34 2009/01/26 23:08:31 claudio Exp $
d20 1
a20 1
.Dd $Mdocdate: January 26 2009 $
d93 8
@


1.34
log
@We acutally use the lowest IP configured as router-id if none is specified.
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.33 2009/01/08 17:19:57 jmc Exp $
d20 1
a20 1
.Dd $Mdocdate: January 8 2009 $
d304 1
a304 1
While key-id 0 is valid, it is unavailable on Cisco devices.
@


1.33
log
@tweak previous; feedback/ok claudio
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.32 2009/01/07 21:16:36 claudio Exp $
d20 1
a20 1
.Dd $Mdocdate: January 7 2009 $
d169 1
a169 1
Set the router ID; if not specified, the numerically highest IP address of
@


1.32
log
@Full stub area support. This allows ABRs to announce a default network
summary LSA into stub areas so that these routers are able to reach the
outside of the area.
OK norby@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.31 2008/06/10 07:22:45 jsing Exp $
d20 1
a20 1
.Dd $Mdocdate: June 10 2008 $
d251 1
a251 1
Stub areas will not be flooded by as-ext LSA which results in smaller routing
d253 1
a253 1
Area border router should redistribute a default network LSA this can be
@


1.31
log
@Fix typo.
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.28 2007/06/19 16:45:15 reyk Exp $
d20 1
a20 1
.Dd $Mdocdate: May 31 2007 $
d244 13
@


1.30
log
@OSPF uses the highest IP address, not the lowest.

hai norby@@
@
text
@d92 1
a92 1
option to ensure that no trafic tries to transit via this router.
@


1.29
log
@use a hyphen for "interface-specific" as a compound term. this is
not a hard and fast rule (actually it's a form i abuse) but
hostname.if.5 currently uses two conflicting forms and this keeps
it consistent;
@
text
@d169 2
a170 2
Set the router ID; if not specified, the lowest IP address of the router
will be used.
@


1.28
log
@add support for mapping route labels to AS-external route tags.

manpage bits from jmc@@
ok norby@@ claudio@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.27 2007/05/31 19:20:26 jmc Exp $
d208 1
a208 1
All interface specific parameters can
d260 1
a260 1
Interface specific parameters are listed below.
@


1.27
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.26 2007/05/31 04:24:26 claudio Exp $
d20 1
a20 1
.Dd $Mdocdate$
d171 5
@


1.26
log
@Document demotion counters. With help from jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.25 2007/05/31 03:12:21 jmc Exp $
d20 1
a20 1
.Dd February 2, 2005
@


1.25
log
@automaticaly -> automatically
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.24 2007/05/10 11:49:34 stevesk Exp $
d217 23
d297 8
@


1.24
log
@transposition; ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.23 2007/03/21 14:17:57 jmc Exp $
d195 1
a195 1
option is automaticaly enabled if either the
@


1.23
log
@tweak a sentence;
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.22 2007/03/21 12:47:34 claudio Exp $
d182 1
a182 1
The default value is 5 seconds; the valid is range 1\-5 seconds.
@


1.22
log
@Document "stub router (yes|no)" and how/why it is used.
Also modify the fib-update block a bit because "fib-update no" implies
"stub router yes".
OK norby@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.21 2006/12/08 09:21:08 claudio Exp $
d199 1
a199 1
is set to value different from 1 or if the FIB is not coupled.
@


1.21
log
@Document redistribute set options. OK norby@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.20 2006/12/08 09:19:19 claudio Exp $
d90 3
a92 4
may result in routing loops and could cause major routing issues in the
complete OSPF cloud.
Only routers with just one link to the OSPF cloud may safely set it to
.Ic no .
d183 17
@


1.20
log
@Document the interface:ip syntax and add some statements to the examples
to make them useful. OK norby@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.19 2006/08/31 18:44:48 jmc Exp $
d102 1
d106 1
a106 1
.Ic redistribute Ar prefix
d110 1
a110 1
.Ic redistribute rtlabel Ar label
d141 17
@


1.19
log
@knock out the cpp/m4 stuff from MACROS; after discussion with many...
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.18 2006/08/28 23:16:50 stevesk Exp $
d176 1
a176 2
	interface em0 {
	}
d178 1
d186 3
d191 3
d195 1
@


1.18
log
@use Forwarding Information Base vs. Forward Information Base;
ok jmc@@ claudio@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.17 2006/08/28 14:45:54 stevesk Exp $
d48 1
a48 5
Much like
.Xr cpp 1
or
.Xr m4 1 ,
macros can be defined that will later be expanded in context.
@


1.17
log
@tiny grammar fix; ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.16 2006/06/01 23:00:17 claudio Exp $
d86 1
a86 1
do not update the Forward Information Base, a.k.a. the kernel
@


1.16
log
@Document all the new and shiny redistribute options. With a lot of help from
jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.15 2006/03/30 12:46:47 claudio Exp $
d126 1
a126 1
networks needs to be part of that range to be redistributed.
@


1.15
log
@Add a warning about "fib-update no" similar to the fib decouple description
in ospfctl(8). help jmc@@ OK norby@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.14 2005/10/28 18:27:17 jmc Exp $
d78 2
a79 1
.Bl -tag -width Ds
d97 2
a98 1
.Ic \&no .
d100 1
d104 1
a104 1
.Ic default Ns \&| Ns Ic none Pc
d107 8
d124 21
a144 3
The default setting is
.Ic none .
In this case no additional routes will be announced over OSPF.
d154 1
d158 1
@


1.14
log
@a little bit saner macros;
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.13 2005/10/28 16:50:12 stevesk Exp $
d84 1
a84 1
.Ic no ,
d89 8
@


1.13
log
@authentication cleanup and clarification;
ok and mdoc help claudio@@ jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.12 2005/10/27 22:52:46 stevesk Exp $
d97 1
a97 1
.Ar connected ,
d100 1
a100 1
.Ar static ,
d103 1
a103 1
.Ar default ,
d106 1
a106 1
.Ar none .
@


1.12
log
@Add something to explain effect of passive interface; ok claudio@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.11 2005/09/15 20:24:46 claudio Exp $
d159 17
a175 5
Set the authentication key.
If the auth-type is set to simple, up to 8 characters can be specified.
.It Ic auth-md Ar key-id Ar key
Set the crypt authentication key.
If the auth-type is set to crypt, up to 16 characters can be specified.
d178 8
a185 1
Configure which key-id to use when using crypt authentication.
d194 2
a195 1
The default is none.
@


1.11
log
@auth-md-keyid 0 is valid but is not allowed on Cis^H^Hrap routers.
Default to id 1 and mention it in the man page.
From a discussion with msf@@ OK norby@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.10 2005/05/24 20:38:20 claudio Exp $
d186 1
@


1.10
log
@Be more specific on what we redistribute. OK norby@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.9 2005/05/23 19:59:02 norby Exp $
d167 2
a168 1
The default key-id is 0.
@


1.9
log
@Make the rfc1583compat flag changable in ospfd.conf(5).

ok claudio@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.8 2005/04/12 09:54:59 claudio Exp $
d104 1
a104 1
the default route will be announced over OSPF.
@


1.8
log
@Support for self originated AS-external LSA.
With "redistribute (static|connected|default|none)" it is possible to
tell ospfd which external routes should be announced.
Connected routes will be announced only if there is no corresponding
interface configured, in that case the prefix is not external.
Adding and removing of announced prefixes are done automaticaly.
OK norby@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.7 2005/03/31 19:32:10 norby Exp $
d108 9
@


1.7
log
@Add support for crypt authentication (MD5).

ok and input claudio@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.6 2005/03/11 23:34:41 norby Exp $
d89 19
@


1.6
log
@Fix typo.

ok claudio@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.5 2005/02/27 08:21:15 norby Exp $
d133 7
@


1.5
log
@SPF and route table calculation.

Calculate Shortest Path Tree for each area known in the link state
database.

The Shortest Path Tree is used as input for route table calculation.
Route tabled is calculated and the result is inserted into the kernel
route table.

ok claudio@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.4 2005/02/07 05:51:00 david Exp $
d160 1
a160 1
.It Ic router-priority Ar seconds
@


1.4
log
@spelling fixes
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.3 2005/02/03 10:41:53 jmc Exp $
d92 11
a102 11
.\".It Ic spf-delay Ar seconds
.\"Set SPF delay in seconds.
.\"The delay between receiving an update to the link
.\"state database and starting the shortest path first calculation.
.\"The default value is 1; valid range is 1\-10 seconds.
.\".Pp
.\".It Ic spf-holdtime Ar seconds
.\"Set the SPF holdtime in seconds.
.\"The minimum time between two consecutive
.\"shortest path first calculations.
.\"The default value is 5 seconds; the valid is range 1\-5 seconds.
@


1.3
log
@no need for -compact/.Pp in these lists;
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.2 2005/02/02 22:50:59 jmc Exp $
d42 1
a42 1
A number of global settings can be overruled in specfic areas or interfaces.
@


1.2
log
@various fixes;
@
text
@d1 1
a1 1
.\"	$OpenBSD: ospfd.conf.5,v 1.1 2005/02/02 21:22:28 norby Exp $
d78 1
a78 2
.Pp
.Bl -tag -width Ds -compact
a88 1
.Pp
a102 1
.\".Pp
d108 1
a108 2
.Pp
.Bl -tag -width Ds -compact
d129 1
a129 2
.Pp
.Bl -tag -width Ds -compact
a132 1
.Pp
a141 1
.Pp
a144 1
.Pp
a147 1
.Pp
a149 1
.Pp
a152 1
.Pp
a159 1
.Pp
a165 1
.Pp
@


1.1
log
@Add manpage ospfd.conf(5).

ok claudio@@ henning@@ jmc@@ jaredy@@
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d41 2
a42 2
.Xr ospfd 8 . A number of global settings can be overruled in specfic areas or
interfaces.
d44 3
a46 2
An OSPF router must be a member of at least one area. Areas are used to group
interfaces, simplifying configuration.
d53 1
a53 1
Macro names must start with a letter, and may contain letters, digits
d62 1
a62 1
For example,
a73 1
.Pp
d76 2
a77 2
interface. The only settings that can be set globally and not overuled are
listed below.
d92 1
a92 1
Set the router ID, if not specified the the lowest IP address of the router
a93 1
.Pp
d95 4
a98 3
.\"Set SPF delay in seconds. The delay between receiving an update to the link
.\"state database and starting the shortest path first calculation. The default
.\"value is 1, valid range is 1-10 seconds.
d101 4
a104 3
.\"Set the SPF holdtime in seconds. The minimum time between two consecutive
.\"shortest path first calculations. The default value is 5 seconds, the valid
.\"is range 1-5 seconds.
d106 1
d108 2
a109 1
Areas are used for grouping interfaces. All interface specific parameters can
a114 1
.Pp
d123 1
a123 1
.Pp
d125 2
a126 3
Each interface can have several parameteres configured individually, otherwise
they are enherited.
.Pp
d128 2
a129 2
	interface em0 {
	}
d136 2
a137 2
Set the authentication key. If the auth-type is set to simple, up to 8
characters can be specified.
d144 4
a147 2
Set the authentication type. The default is none. Simple authentication uses a
plaintext pssword, up to 8 characters. Crypt authentication uses a MD5 hash.
d150 2
a151 1
Set the hello interval. The default value is 10, valid range is 1-65535 seconds.
d154 2
a155 2
Set the interface metric a.k.a. cost. The default value is 10, valid range is 
1-65535.
d161 2
a162 2
Set retransmit interval. The default value is 5 seconds, valid range is 5-3600
seconds.
d165 5
a169 3
Set the router dead time, a.k.a. neighbor inactivity timer. The default value
is 40 seconds, valid range is 2-2147483647 seconds. When a neigbhor has been
inactive for router-dead-time it's state is set to DOWN. Neighbors
d173 4
a176 2
Set the router priority. The default value is 1, valid range is 0-255. If set
to 0 the router is not elegible as Desginated Router or Backup Designated
d180 3
a182 2
Set the transmit delay. The default value is 1, valid range is 1-3600 seconds.
.Pp
d190 2
a191 2
.Xr ospfctl 8
.Xr ospfd 8
a197 1

@

