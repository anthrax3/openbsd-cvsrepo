head	1.52;
access;
symbols
	OPENBSD_6_0:1.50.0.2
	OPENBSD_6_0_BASE:1.50
	OPENBSD_5_9:1.49.0.2
	OPENBSD_5_9_BASE:1.49
	OPENBSD_5_8:1.48.0.6
	OPENBSD_5_8_BASE:1.48
	OPENBSD_5_7:1.48.0.2
	OPENBSD_5_7_BASE:1.48
	OPENBSD_5_6:1.47.0.4
	OPENBSD_5_6_BASE:1.47
	OPENBSD_5_5:1.46.0.4
	OPENBSD_5_5_BASE:1.46
	OPENBSD_5_4:1.45.0.4
	OPENBSD_5_4_BASE:1.45
	OPENBSD_5_3:1.45.0.2
	OPENBSD_5_3_BASE:1.45
	OPENBSD_5_2:1.44.0.2
	OPENBSD_5_2_BASE:1.44
	OPENBSD_5_1_BASE:1.43
	OPENBSD_5_1:1.43.0.6
	OPENBSD_5_0:1.43.0.4
	OPENBSD_5_0_BASE:1.43
	OPENBSD_4_9:1.43.0.2
	OPENBSD_4_9_BASE:1.43
	OPENBSD_4_8:1.42.0.4
	OPENBSD_4_8_BASE:1.42
	OPENBSD_4_7:1.42.0.2
	OPENBSD_4_7_BASE:1.42
	OPENBSD_4_6:1.41.0.6
	OPENBSD_4_6_BASE:1.41
	OPENBSD_4_5:1.41.0.2
	OPENBSD_4_5_BASE:1.41
	OPENBSD_4_4:1.40.0.2
	OPENBSD_4_4_BASE:1.40
	OPENBSD_4_3:1.39.0.2
	OPENBSD_4_3_BASE:1.39
	OPENBSD_4_2:1.34.0.2
	OPENBSD_4_2_BASE:1.34
	OPENBSD_4_1:1.33.0.2
	OPENBSD_4_1_BASE:1.33
	OPENBSD_4_0:1.32.0.2
	OPENBSD_4_0_BASE:1.32
	OPENBSD_3_9:1.30.0.2
	OPENBSD_3_9_BASE:1.30
	OPENBSD_3_8:1.28.0.2
	OPENBSD_3_8_BASE:1.28
	OPENBSD_3_7:1.27.0.4
	OPENBSD_3_7_BASE:1.27
	OPENBSD_3_6:1.27.0.2
	OPENBSD_3_6_BASE:1.27
	OPENBSD_3_5:1.26.0.2
	OPENBSD_3_5_BASE:1.26
	OPENBSD_3_4:1.23.0.2
	OPENBSD_3_4_BASE:1.23
	OPENBSD_3_3:1.20.0.2
	OPENBSD_3_3_BASE:1.20
	OPENBSD_3_2:1.19.0.2
	OPENBSD_3_2_BASE:1.19
	OPENBSD_3_1:1.18.0.2
	OPENBSD_3_1_BASE:1.18
	OPENBSD_3_0:1.17.0.2
	OPENBSD_3_0_BASE:1.17
	OPENBSD_2_9_BASE:1.16
	OPENBSD_2_9:1.16.0.2
	OPENBSD_2_8:1.15.0.2
	OPENBSD_2_8_BASE:1.15
	OPENBSD_2_7:1.14.0.2
	OPENBSD_2_7_BASE:1.14
	OPENBSD_2_6:1.12.0.2
	OPENBSD_2_6_BASE:1.12
	OPENBSD_2_5:1.11.0.2
	OPENBSD_2_5_BASE:1.11
	OPENBSD_2_4:1.9.0.2
	OPENBSD_2_4_BASE:1.9
	OPENBSD_2_3:1.7.0.4
	OPENBSD_2_3_BASE:1.7
	OPENBSD_2_2:1.7.0.2
	OPENBSD_2_2_BASE:1.7
	OPENBSD_2_1:1.6.0.4
	OPENBSD_2_1_BASE:1.6
	OPENBSD_2_0:1.6.0.2
	OPENBSD_2_0_BASE:1.6
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@.\" @;


1.52
date	2016.11.26.11.18.43;	author mpi;	state Exp;
branches;
next	1.51;
commitid	w5BGwu0VUCmpZ1gz;

1.51
date	2016.09.25.15.23.37;	author deraadt;	state Exp;
branches;
next	1.50;
commitid	YxqfPf79WCjoxCH9;

1.50
date	2016.06.03.20.38.48;	author deraadt;	state Exp;
branches;
next	1.49;
commitid	YkF2aYFYf7gUd7XZ;

1.49
date	2015.08.28.04.38.47;	author guenther;	state Exp;
branches;
next	1.48;
commitid	plAZIJHa0HKzn8y4;

1.48
date	2014.10.01.09.56.36;	author mpi;	state Exp;
branches;
next	1.47;
commitid	YjUss0iJWhbDg71W;

1.47
date	2014.03.19.04.17.33;	author guenther;	state Exp;
branches;
next	1.46;

1.46
date	2014.02.16.19.20.26;	author schwarze;	state Exp;
branches;
next	1.45;

1.45
date	2013.01.17.21.39.29;	author jmc;	state Exp;
branches;
next	1.44;

1.44
date	2012.05.17.17.53.22;	author deraadt;	state Exp;
branches;
next	1.43;

1.43
date	2010.09.19.21.59.23;	author jmc;	state Exp;
branches;
next	1.42;

1.42
date	2009.10.23.10.19.59;	author sobrado;	state Exp;
branches;
next	1.41;

1.41
date	2008.10.07.02.30.02;	author deraadt;	state Exp;
branches;
next	1.40;

1.40
date	2008.05.09.09.08.47;	author jmc;	state Exp;
branches;
next	1.39;

1.39
date	2007.12.04.18.54.59;	author deraadt;	state Exp;
branches;
next	1.38;

1.38
date	2007.11.28.19.25.25;	author jmc;	state Exp;
branches;
next	1.37;

1.37
date	2007.11.28.16.33.43;	author deraadt;	state Exp;
branches;
next	1.36;

1.36
date	2007.11.28.15.49.11;	author jmc;	state Exp;
branches;
next	1.35;

1.35
date	2007.11.28.11.37.41;	author tedu;	state Exp;
branches;
next	1.34;

1.34
date	2007.05.31.19.20.28;	author jmc;	state Exp;
branches;
next	1.33;

1.33
date	2006.09.21.15.15.22;	author jmc;	state Exp;
branches;
next	1.32;

1.32
date	2006.08.04.07.02.13;	author mbalmer;	state Exp;
branches;
next	1.31;

1.31
date	2006.06.07.15.34.29;	author mbalmer;	state Exp;
branches;
next	1.30;

1.30
date	2005.09.06.23.35.29;	author jmc;	state Exp;
branches;
next	1.29;

1.29
date	2005.09.06.23.28.23;	author jmc;	state Exp;
branches;
next	1.28;

1.28
date	2005.06.10.18.36.27;	author pedro;	state Exp;
branches;
next	1.27;

1.27
date	2004.08.03.04.11.49;	author mjc;	state Exp;
branches;
next	1.26;

1.26
date	2004.03.17.09.59.19;	author jmc;	state Exp;
branches;
next	1.25;

1.25
date	2004.03.16.23.11.20;	author jmc;	state Exp;
branches;
next	1.24;

1.24
date	2004.03.16.21.28.01;	author jmc;	state Exp;
branches;
next	1.23;

1.23
date	2003.06.12.12.59.52;	author jmc;	state Exp;
branches;
next	1.22;

1.22
date	2003.06.02.23.36.54;	author millert;	state Exp;
branches;
next	1.21;

1.21
date	2003.04.25.14.53.03;	author jmc;	state Exp;
branches;
next	1.20;

1.20
date	2003.02.11.07.26.20;	author jmc;	state Exp;
branches;
next	1.19;

1.19
date	2002.06.02.22.38.51;	author deraadt;	state Exp;
branches;
next	1.18;

1.18
date	2001.11.09.00.56.24;	author miod;	state Exp;
branches;
next	1.17;

1.17
date	2001.08.03.16.03.02;	author mpech;	state Exp;
branches;
next	1.16;

1.16
date	2000.11.12.17.20.42;	author aaron;	state Exp;
branches;
next	1.15;

1.15
date	2000.06.16.19.03.48;	author assar;	state Exp;
branches;
next	1.14;

1.14
date	2000.03.19.17.57.12;	author aaron;	state Exp;
branches;
next	1.13;

1.13
date	2000.03.05.00.28.51;	author aaron;	state Exp;
branches;
next	1.12;

1.12
date	99.05.23.14.11.36;	author aaron;	state Exp;
branches;
next	1.11;

1.11
date	99.04.02.15.12.19;	author aaron;	state Exp;
branches;
next	1.10;

1.10
date	99.03.01.06.17.06;	author aaron;	state Exp;
branches;
next	1.9;

1.9
date	98.06.15.17.56.19;	author mickey;	state Exp;
branches;
next	1.8;

1.8
date	98.05.13.10.33.30;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	97.05.31.08.48.19;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	96.07.08.22.09.48;	author ccappuc;	state Exp;
branches;
next	1.5;

1.5
date	96.06.10.08.37.05;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	96.05.05.16.15.46;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	96.01.11.17.54.00;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	95.12.08.19.48.42;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.48.01;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.48.01;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.52
log
@Remove leftovers of line disciplines that are no more.

ok mikeb@@
@
text
@.\"	$OpenBSD: pstat.8,v 1.51 2016/09/25 15:23:37 deraadt Exp $
.\"	$NetBSD: pstat.8,v 1.9.4.1 1996/06/02 09:08:17 mrg Exp $
.\"
.\" Copyright (c) 1980, 1991, 1993, 1994
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"     from: @@(#)pstat.8	8.4 (Berkeley) 4/19/94
.\"
.Dd $Mdocdate: September 25 2016 $
.Dt PSTAT 8
.Os
.Sh NAME
.Nm pstat
.Nd display system data structures
.Sh SYNOPSIS
.Nm pstat
.Op Fl fknsTtv
.Op Fl M Ar core
.Op Fl N Ar system
.Op Fl d Ar format Ar symbol ...
.Sh DESCRIPTION
.Nm
displays open file entry, swap space utilization,
terminal state, and vnode data structure information.
If
.Ar core
is given, the information is sought there, otherwise
in the running kernel via
.Pa /dev/kmem .
The required namelist is taken from the running kernel unless
.Ar system
is specified.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl d Ar format Ar symbol ...
Print the values of
.Ar symbol
using the specified format.
.Ar format
is a
.Xr printf 3 Ns -style
format, without the leading percent or precision specifiers,
such as
.Ar s ,
.Ar p ,
or
.Ar llx .
Symbol names are read from the remaining command line arguments.
Addresses may also be specified in hex.
.Pp
The
.Fl d
option requires the ability to open
.Pa /dev/kmem
which may be restricted based upon the value of the
.Ar kern.allowkmem
.Xr sysctl 8 .
.It Fl f
Print the open file table with these headings:
.Bl -tag -width indent
.It LOC
The core location of this table entry.
.It TYPE
The type of object the file table entry points to.
.It FLG
Miscellaneous state variables encoded thus:
.Pp
.Bl -tag -width indent -compact
.It R
open for reading
.It W
open for writing
.It A
open for appending
.It L
exclusive or shared lock present
.It I
signal pgrp when data ready
.It l
file descriptor slot is larval
.El
.It CNT
Number of processes that know this open file.
.It MSG
Number of messages outstanding for this file.
.It DATA
The location of the vnode table entry or socket structure for this file.
.It OFFSET
The file offset (see
.Xr lseek 2 ) .
This information is only visible to the user or superuser.
.El
.It Fl k
Use 1K-byte blocks.
.It Fl M Ar core
Extract values associated with the name list from the specified core
instead of the running kernel.
.It Fl N Ar system
Extract the name list from the specified system
instead of the running kernel.
.It Fl n
Print devices by major/minor number rather than by name.
.It Fl s
Print information about swap space usage on all the
swap areas compiled into the kernel.
The first column is the device name of the partition.
The next column is the total space available in the partition.
The
.Ar Used
column indicates the total blocks used so far;
the
.Ar Available
column indicates how much space is remaining on each partition.
The
.Ar Capacity
reports the percentage of space used.
.Pp
If more than one partition is configured into the system, totals for all
of the statistics will be reported in the final line of the report.
.It Fl T
Prints the number of used and free slots for open files, used vnodes, and swap
space.
It is useful for checking to see how large system tables become
if the system is under heavy load.
.It Fl t
Print table for terminals
with these headings:
.Bl -tag -width indent
.It LINE
Physical device name.
.It RAW
Number of characters in raw input queue.
.It CAN
Number of characters in canonicalized input queue.
.It OUT
Number of characters in output queue.
.It HWT
High water mark for output.
.It LWT
Low water mark for output.
.It COL
Calculated column position of terminal.
.It STATE
Miscellaneous state variables encoded thus:
.Pp
.Bl -tag -width indent -compact
.It W
waiting for open to complete
.It O
open
.It C
carrier is on
.It T
delay timeout in progress
.It F
outq has been flushed during DMA
.It B
busy doing output
.It A
process is awaiting output
.It X
open for exclusive use
.It S
output stopped
.It K
further input blocked
.It Y
tty in async I/O mode
.It D
next character is escaped lowercase special
.It E
printing erase sequence
.It L
next character is literal
.It P
retyping suspended input
.It N
counting tab width, ignoring output flush
.El
.It SESS
Enclosing session.
.It PGID
Process group for which this is controlling terminal.
.It DISC
Line discipline:
.Ql term
for
TTYDISC (see
.Xr termios 4 ) ,
.Ql ppp
for PPPDISC (see
.Xr ppp 4 )
and
.Ql nmea
for NMEADISC (see
.Xr nmea 4 ) .
.El
.It Fl v
Print the active vnodes.
Each group of vnodes corresponding
to a particular filesystem is preceded by a two line header.
The first line consists of the following:
.Pp
.No *** MOUNT Em fstype from
on
.Em on fsflags
.Pp
where
.Em fstype
is one of the file systems supported by the kernel;
.Em from
is the partition the filesystem is mounted from;
.Em on
is the directory
the filesystem is mounted on; and
.Em fsflags
is a list
of optional flags applied to the mount (see
.Xr mount 8 ) .
The second line is a header for the individual fields,
the first part of which are fixed, and the second part are filesystem
type specific.
The headers common to all vnodes are:
.Bl -tag -width indent
.It ADDR
Location of this vnode.
.It TYP
File type.
.It VFLAG
A list of letters representing vnode flags:
.Pp
.Bl -tag -width indent -compact
.It R
VROOT root of its file system.
.It T
VTEXT pure text prototype.
.It S
VSYSTEM vnode being used by kernel.
.It I
VISTTY vnode represents a tty.
.It L
VXLOCK locked to change underlying type.
.It W
VXWANT process is waiting for vnode.
.It B
VBWAIT waiting for output to complete.
.It A
VALIASED vnode has an alias.
.It F
VONFREELIST vnode is on a free list.
.It l
VLOCKSWORK FS supports locking discipline.
.It s
VONSYNCLIST vnode is on syncer worklist.
.El
.It USE
The number of references to this vnode.
.It HOLD
The number of I/O buffers held by this vnode.
.It FILEID
The vnode fileid.
In the case of
.Em ffs
this is the inode number.
.It IFLAG
Miscellaneous filesystem specific state variables encoded thus:
.Bl -tag -width indent
.It "For ffs:"
.Bl -tag -width indent -compact
.It A
access time must be corrected
.It C
changed time must be corrected
.It U
modification time must be corrected
.It R
has a rename in progress
.It M
contains modifications
.It m
contains lazy modifications
.It S
shared lock applied
.It E
exclusive lock applied
.El
.It "For nfs:"
.Bl -tag -width indent -compact
.It W
waiting for I/O buffer flush to complete
.It P
I/O buffers being flushed
.It M
locally modified data exists
.It E
an earlier write failed
.It X
non-cacheable lease (nqnfs)
.It O
write lease (nqnfs)
.It G
lease was evicted (nqnfs)
.It A
special file accessed
.It U
special file updated
.It C
special file times changed
.El
.El
.It SIZ/RDEV
Number of bytes in an ordinary file, or
major and minor device of special file.
.El
.Pp
The
.Fl v
option requires the ability to open
.Pa /dev/kmem
which may be restricted based upon the value of the
.Ar kern.allowkmem
.Xr sysctl 8 .
.El
.Sh ENVIRONMENT
.Bl -tag -width BLOCKSIZE
.It Ev BLOCKSIZE
If the environment variable
.Ev BLOCKSIZE
is set, and the
.Fl k
option is not specified, the block counts will be displayed in units of that
size block.
.El
.Sh SEE ALSO
.Xr fstat 1 ,
.Xr netstat 1 ,
.Xr procmap 1 ,
.Xr ps 1 ,
.Xr systat 1 ,
.Xr tcpbench 1 ,
.Xr top 1 ,
.Xr stat 2 ,
.Xr printf 3 ,
.Xr fs 5 ,
.Xr iostat 8 ,
.Xr vmstat 8
.Rs
.%T UNIX Implementation
.%A Ken Thompson
.%J Bell System Technical Journal
.%V Volume 57
.%N Number 6
.%D 1978
.%P 1931\(en1946
.Re
.Sh HISTORY
The
.Nm
command appeared in
.Bx 4.0 .
.Sh BUGS
Swap statistics are reported for all swap partitions compiled into the kernel,
regardless of whether those partitions are being used.
.Pp
Does not understand NFS swap servers.
@


1.51
log
@Make a move towards ending 4 decades of kernel snooping.

Add sysctl kern.allowkmem (default 0) which controls the ability to open
/dev/mem or /dev/kmem at securelevel > 0.  Over 15 years we converted 99%
of utilities in the tree to operate on sysctl-nodes (either by themselves
or via code hiding in the guts of -lkvm).

pstat -d and -v & procmap are affected and continued use of them will
require kern.allowkmem=1 in /etc/sysctl.conf.  acpidump (and it's
buddy sendbug) are affected, but we'll work out a solution soon.

There will be some impact in ports.

ok kettenis guenther
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.50 2016/06/03 20:38:48 deraadt Exp $
d33 1
a33 1
.Dd $Mdocdate: June 3 2016 $
a214 2
.Ql slip
for SLIPDISC ,
d217 1
a217 5
.Xr ppp 4 ) ,
.Ql strip
for STRIPDISC,
.\" (see
.\" .Xr strip 4 ) .
@


1.50
log
@correct synopsis to make -d usage clearer.
The shed fell over because 15 layers of paint exceeded engineering margins.
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.49 2015/08/28 04:38:47 guenther Exp $
d33 1
a33 1
.Dd $Mdocdate: August 28 2015 $
d75 8
d346 8
@


1.49
log
@Rework the UNIX domain socket garbage collector, including ideas from
{Free,Net}BSD
 - when a socket is closed with fds in its input, defer closing them to
   a task to avoid recursing.  This eliminates the complicated extra
   reference taking which had a 37 line(!) comment explanation
 - move flags, counts, and links only needed for this from struct file to
   struct unpcb
 - document the flow of the mark/sweep collector

much help from claudio@@ who made me explain the GC to him until we trusted it
ok claudio@@ mpi@@ deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.48 2014/10/01 09:56:36 mpi Exp $
d33 1
a33 1
.Dd $Mdocdate: October 1 2014 $
a41 1
.Op Fl d Ar format
d44 1
a44 1
.Op Ar symbols
d60 1
a60 1
.It Fl d Ar format
d62 1
a62 1
.Ar symbols
@


1.48
log
@Do not mention sliplogin(8) and sl(4).
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.47 2014/03/19 04:17:33 guenther Exp $
d33 1
a33 1
.Dd $Mdocdate: March 19 2014 $
a96 2
.It d
deferred for next AF_UNIX garbage collection pass
a98 2
.It m
marked during AF_UNIX garbage collection pass
@


1.47
log
@Pull in FreeBSD r37363 and r37887:
--
Sync timestamp changes for inodes of special files to disk as late
as possible (when the inode is reclaimed).  Temporarily only do
this if option UFS_LAZYMOD configured and softupdates aren't enabled.
UFS_LAZYMOD is intentionally left out of /sys/conf/options.

This is mainly to avoid almost useless disk i/o on battery powered
machines.  It's silly to write to disk (on the next sync or when the
inode becomes inactive) just because someone hit a key or something
wrote to the screen or /dev/null.
--
Made lazy syncing of timestamps for special files non-optional.
--

Also, include support in 'pstat -v' to display the IN_LAZYMOD flag.

ok tedu@@ millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.46 2014/02/16 19:20:26 schwarze Exp $
d33 1
a33 1
.Dd $Mdocdate: February 16 2014 $
d213 1
a213 2
for SLIPDISC (see
.Xr sl 4 ) ,
@


1.46
log
@fix bibliographical references; from Jan Stary <hans at stare dot cz>
feedback and ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.45 2013/01/17 21:39:29 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: January 17 2013 $
d304 1
a304 3
update time
.Pq Xr fs 5
must be corrected
d309 2
@


1.45
log
@some simple macro fixes;
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.44 2012/05/17 17:53:22 deraadt Exp $
d33 1
a33 1
.Dd $Mdocdate: May 17 2012 $
d370 6
a375 1
.%A K. Thompson
@


1.44
log
@show the f_iflags; ok guenther
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.43 2010/09/19 21:59:23 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: September 19 2010 $
a284 1
.Pp
@


1.43
log
@more wacky macro fixing;
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.42 2009/10/23 10:19:59 sobrado Exp $
d33 1
a33 1
.Dd $Mdocdate: October 23 2009 $
d97 6
@


1.42
log
@argument to -M is "core", not "corefile" (this typo was introduced
in 4.4BSD at least).

ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.41 2008/10/07 02:30:02 deraadt Exp $
d33 1
a33 1
.Dd $Mdocdate: October 7 2008 $
a226 1
.Df I
a229 1
.De
@


1.41
log
@pstat can hide information too; also based on PR 5113
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.41 2008/10/07 02:28:33 deraadt Exp $
d51 1
a51 1
.Ar corefile
@


1.40
log
@some Xr for tcpbench(1) and tcpdrop(8);
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.39 2007/12/04 18:54:59 deraadt Exp $
d33 1
a33 1
.Dd $Mdocdate: December 4 2007 $
d107 1
@


1.39
log
@show some -d examples; ok jmc
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.38 2007/11/28 19:25:25 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: November 28 2007 $
d357 1
@


1.38
log
@- bring back a tweak that got reverted in previous
- Xr printf 3 whilst here
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.37 2007/11/28 16:33:43 deraadt Exp $
d68 6
a73 1
format, without the leading percent or precision specifiers.
@


1.37
log
@Be more careful with printf-style formats, and fix a few other niggles
ok tedu
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.36 2007/11/28 15:49:11 jmc Exp $
d69 1
a69 1
Symbol named are read from the remaining command line arguments.
d354 1
@


1.36
log
@tweak previous;
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.35 2007/11/28 11:37:41 tedu Exp $
d45 1
d62 3
a64 1
Print the values of symbols using the specified format.
d67 3
a69 3
.Xr printf 3
format, without the leading percent.
Symbol names are read from the remaining command line arguments.
@


1.35
log
@add a -d argument, which can be used to peek at values in the kernel.
this is easier than using the ddb console.  ok deraadt
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.34 2007/05/31 19:20:28 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: May 31 2007 $
d62 2
a63 1
Format is a
d66 1
a66 1
Symbol named are read from the remainging command line arguments.
@


1.34
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.33 2006/09/21 15:15:22 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate$
d42 1
d60 7
@


1.33
log
@more lfs removal; ok pedro
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.32 2006/08/04 07:02:13 mbalmer Exp $
d33 1
a33 1
.Dd April 19, 1994
@


1.32
log
@Remove reference to tb(4).  Found by jmc@@, thanks.
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.31 2006/06/07 15:34:29 mbalmer Exp $
a255 2
.It D
VDIROP lfs vnode involved in directory op.
@


1.31
log
@mention the nmea line discipline in the pstat(8) man page.

found by mk, ok deraadt
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.30 2005/09/06 23:35:29 jmc Exp $
a187 3
.Ql tab
for TABLDISC (see
.Xr tb 4 ) ,
@


1.30
log
@comment out .Xr to strip(4), a page which does not get installed;
while here, make the list item a bit better grammatically.
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.29 2005/09/06 23:28:23 jmc Exp $
a196 1
and
d198 1
a198 1
for STRIPDISC .
d201 4
@


1.29
log
@make some of the stat utility pages reference each other;
idea from a mail to misc@@ from simon dassow;
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.28 2005/06/10 18:36:27 pedro Exp $
d183 1
a183 1
Line discipline;
d197 1
d199 3
a201 2
for STRIPDISC (see
.Xr strip 4 ) .
@


1.28
log
@No point in keeping a list of file systems here, instead just refer to
whatever the kernel supports, okay deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.27 2004/08/03 04:11:49 mjc Exp $
d336 1
d340 1
@


1.27
log
@make pstat -f show locking

ok art@@ tedu@@
much help from pedro@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.26 2004/03/17 09:59:19 jmc Exp $
d215 1
a215 6
is one of
.Em adosfs , afs , cd9660 , ext2fs ,
.Em fdesc , ffs, kernfs , lfs ,
.Em lofs , mfs , msdos , nfs ,
.Em null , portal , procfs ,
.Em umap , union ;
@


1.26
log
@add references to procmap(1) in SEE ALSO;
suggested by tedu@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.25 2004/03/16 23:11:20 jmc Exp $
d76 2
a77 4
.It S
shared lock present
.It X
exclusive lock present
@


1.25
log
@add -M and -N to options list;
sort options;
sync usage();
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.24 2004/03/16 21:28:01 jmc Exp $
d343 1
@


1.24
log
@add fstat(1) reference to SEE ALSO;
suggested by Drew Einhorn;
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.23 2003/06/12 12:59:52 jmc Exp $
d41 1
a41 1
.Op Fl Tfknstv
a58 5
.It Fl T
Prints the number of used and free slots for open files, used vnodes, and swap
space.
It is useful for checking to see how large system tables become
if the system is under heavy load.
d95 6
d120 5
@


1.23
log
@- section reorder
- macro fixes
- kill whitespace at EOL
- new sentence, new line
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.22 2003/06/02 23:36:54 millert Exp $
d336 1
@


1.22
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.21 2003/04/25 14:53:03 jmc Exp $
d343 2
a344 2
.Rt Tn UNIX Rt Implementation ,
.Ra K. Thompson
d346 5
a355 5
.Sh HISTORY
The
.Nm
command appeared in
.Bx 4.0 .
@


1.21
log
@add missing .El's for .Bl macros;
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.20 2003/02/11 07:26:20 jmc Exp $
d15 1
a15 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
@


1.20
log
@typos;

raidctl(8) ok millert@@
mknetid(8) help maja@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.19 2002/06/02 22:38:51 deraadt Exp $
d327 1
@


1.19
log
@fix tables; fred@@francis.unitra.sk
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.18 2001/11/09 00:56:24 miod Exp $
d222 1
a222 1
is the filesystem is mounted from;
@


1.18
log
@Since all our arches have /dev/ksyms, replace rigid mentions of the kernel
being /bsd with more correct terms, and remove /bsd and /dev/kmem from the
FILES section if they were there.
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.17 2001/08/03 16:03:02 mpech Exp $
d180 1
a180 2
.El
.It PGRP
d200 1
d250 1
a250 1
VISTTY vnode represents a tty
d256 1
a256 1
VBWAIT waiting for output to complete
d258 1
a258 1
VALIASED vnode has an alias
d262 1
a262 1
VONFREELIST vnode is on a free list
d264 1
a264 1
VLOCKSWORK FS supports locking discipline
d266 1
a266 1
VONSYNCLIST vnode is on syncer worklist
d323 1
a326 1
.El
@


1.17
log
@o) We always closes .Bl and .Bd tags;

millert@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.16 2000/11/12 17:20:42 aaron Exp $
d55 1
a55 1
in
d57 1
a57 3
The required namelist is taken from
.Pa /bsd
unless
a336 7
.El
.Sh FILES
.Bl -tag -width /dev/kmemxxx -compact
.It Pa /bsd
namelist
.It Pa /dev/kmem
default source of tables
@


1.16
log
@typo
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.15 2000/06/16 19:03:48 assar Exp $
d328 1
@


1.15
log
@update and sort list of vflags, iflags, nfsflags, mntflags.  also
update man-page to be compatible with the code.
@
text
@d1 1
a1 1
.\"	$OpenBSD: pstat.8,v 1.14 2000/03/19 17:57:12 aaron Exp $
d232 1
a232 1
.The second line is a header for the individual fields ,
@


1.14
log
@Remove hard sentence breaks. Add $OpenBSD$ tags where appropriate. Some other
cleanup along the way.
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d249 4
d257 2
a258 2
.It S
VSYSTEM vnode being used by kernel.
a260 2
.It B
VBWAIT waiting for output to complete
d263 6
d285 4
a288 2
.It L
locked
d293 4
a296 6
.It A
access time must be corrected
.It W
wanted by another process (L flag is on)
.It C
changed time must be corrected
a300 6
.It Z
someone waiting for a lock
.It M
contains modifications
.It R
has a rename in progress
d318 6
@


1.13
log
@Finish standardizing options list introduction.
@
text
@d1 1
d67 2
a68 1
space. It is useful for checking to see how large system tables become
d111 3
a113 2
The first column is the device name of the partition.  The next column is
the total space available in the partition.  The
d115 2
a116 1
column indicates the total blocks used so far;  the
d204 4
a207 3
Print the active vnodes.  Each group of vnodes corresponding
to a particular filesystem is preceded by a two line header.  The
first line consists of the following:
d234 2
a235 1
type specific.  The headers common to all vnodes are:
@


1.12
log
@remove argument from .Os macros so value in /usr/share/tmac/mdoc/doc-common
is used instead; kwesterback@@home.com
@
text
@d62 1
a62 1
The following options are available:
@


1.11
log
@all .Nm macros should have an argument in SYNOPSIS; also misc cleanup
@
text
@d38 1
a38 1
.Os BSD 4
@


1.10
log
@cleanup; d@@
@
text
@d43 1
a43 1
.Nm
@


1.9
log
@use Bx macro for BSD versions
@
text
@d43 1
a43 1
.Nm pstat
d48 1
a48 1
.Nm Pstat
d50 1
a50 1
terminal state, and vnode data structures.
a142 2
.It T
delay timeout in progress
a146 2
.It F
outq has been flushed during DMA
d165 10
d350 1
a350 1
.Nm pstat
@


1.8
log
@fix .Sh ENVIRONMENT
@
text
@d345 2
a346 1
command appeared in 4.0BSD.
@


1.7
log
@various
@
text
@d309 1
a309 1
.Sh ENVIRONMENT VARIABLES
@


1.6
log
@kernel is /bsd, os is OpenBSD
@
text
@d58 1
a58 1
unless 
d107 1
a107 1
Print information about swap space usage on all the 
d110 1
a110 1
the total space available in the partition.  The 
d112 1
a112 1
column indicates the total blocks used so far;  the 
d199 1
a199 1
.No *** MOUNT Em fstype from 
d207 5
a211 4
.Em adosfs , afs , cd9660 , fdesc ,
.Em kernfs , lfs , lofs , mfs ,
.Em msdos , nfs , null , portal ,
.Em procfs , ufs , umap , union ;
d258 1
a258 1
.Em ufs
d263 1
a263 1
.It "For ufs:"
@


1.5
log
@update ttystats
@
text
@d57 1
a57 1
.Pa /netbsd
d320 1
a320 1
.It Pa /netbsd
@


1.4
log
@from netbsd:
handle the VISTTY vnode flag with the same letter ('I') that BSDI used.
Update the documentation of the vnode flags so that it lists only (and all)
of the flags understood by the program.  (The documentation is likely in need
of more cleanup.)
@
text
@d1 2
a2 2
.\"	$OpenBSD$
.\"	$NetBSD: pstat.8,v 1.9 1996/05/02 00:13:08 cgd Exp $
a34 1
.\"	$Id: pstat.8,v 1.3 1996/01/11 17:54:00 deraadt Exp $
d65 2
a66 2
Prints the number of used and free slots in the several system tables
and is useful for checking to see how large system tables have become
d125 2
d133 4
a136 7
.It MODE
See
.Xr tty 4 .
.It ADDR
Physical device address.
.It DEL
Number of delimiters (newlines) in canonicalized input queue.
d153 4
d165 7
a171 2
.It H
hangup on close
d176 2
a177 8
Line discipline; blank is old tty
OTTYDISC
or
.Ql new tty
for
NTTYDISC
or
.Ql net
d179 14
a192 4
NETLDISC
(see
.Xr bk 4 ) .
.El
d207 4
a210 1
.Em ufs , nfs , mfs , or pc ;
d233 1
a233 1
\- VROOT
d235 1
a235 5
\- VTEXT
.It S
\- VSYSTEM
.It I
\- VISTTY
d237 1
a237 1
\- VXLOCK
d239 5
a243 1
\- VXWANT
d245 3
a247 3
\- VBWAIT
.It A
\- VALIASED
a303 1
.El
a306 1
.El
@


1.3
log
@from netbsd; Fix typo and make some enum. lists more compact
(James Jegers; PR#592).
@
text
@d1 2
d35 1
a35 1
.\"	$Id: pstat.8,v 1.7 1996/01/06 23:25:51 pk Exp $
d222 4
d230 2
a231 6
.It E
\- VEXLOCK
.It S
\- VSHLOCK
.It T
\- VLWAIT
a233 2
.It B
\- VBWAIT
@


1.2
log
@s/environmental/environment/
@
text
@d33 1
a33 1
.\"	$Id: pstat.8,v 1.5.2.1 1995/12/05 02:56:58 jtc Exp $
d76 2
a77 1
.Bl -tag -width indent
d129 1
a129 1
Number of characters in putput queue.
d141 2
a142 1
.Bl -tag -width indent
d213 1
d215 1
a215 2
A list of letters representing vnode flags:
.Bl -tag -width indent
d249 1
a249 2
.Pp
.Bl -tag -width indent
d274 1
a274 1
.Bl -tag -width indent
@


1.1
log
@Initial revision
@
text
@d33 1
a33 1
.\"	$Id: pstat.8,v 1.5 1995/09/27 19:47:07 jtc Exp $
d295 1
a295 1
.Sh ENVIRONMENTAL VARIABLES
d298 1
a298 1
If the environmental variable
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
