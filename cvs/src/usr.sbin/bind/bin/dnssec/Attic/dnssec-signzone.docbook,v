head	1.7;
access;
symbols
	OPENBSD_5_6:1.6.0.30
	OPENBSD_5_6_BASE:1.6
	OPENBSD_5_5:1.6.0.28
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.6.0.24
	OPENBSD_5_4_BASE:1.6
	OPENBSD_5_3:1.6.0.22
	OPENBSD_5_3_BASE:1.6
	OPENBSD_5_2:1.6.0.20
	OPENBSD_5_2_BASE:1.6
	OPENBSD_5_1_BASE:1.6
	OPENBSD_5_1:1.6.0.18
	OPENBSD_5_0:1.6.0.16
	OPENBSD_5_0_BASE:1.6
	OPENBSD_4_9:1.6.0.14
	OPENBSD_4_9_BASE:1.6
	OPENBSD_4_8:1.6.0.12
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.6.0.8
	OPENBSD_4_7_BASE:1.6
	OPENBSD_4_6:1.6.0.10
	OPENBSD_4_6_BASE:1.6
	OPENBSD_4_5:1.6.0.6
	OPENBSD_4_5_BASE:1.6
	OPENBSD_4_4:1.6.0.4
	OPENBSD_4_4_BASE:1.6
	BIND_9_4_2_P1:1.1.1.4
	OPENBSD_4_3:1.6.0.2
	OPENBSD_4_3_BASE:1.6
	BIND_9_4_2:1.1.1.4
	OPENBSD_4_2:1.5.0.6
	OPENBSD_4_2_BASE:1.5
	OPENBSD_4_1:1.5.0.4
	OPENBSD_4_1_BASE:1.5
	BIND_9_3_4:1.1.1.3
	BIND_9_3_3:1.1.1.3
	OPENBSD_4_0:1.5.0.2
	OPENBSD_4_0_BASE:1.5
	BIND_9_3_2:1.1.1.3
	OPENBSD_3_9:1.4.0.6
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.4.0.4
	OPENBSD_3_8_BASE:1.4
	BIND_9_3_1:1.1.1.2
	OPENBSD_3_7:1.4.0.2
	OPENBSD_3_7_BASE:1.4
	BIND_9_3_0:1.1.1.2
	OPENBSD_3_6:1.3.0.4
	OPENBSD_3_6_BASE:1.3
	OPENBSD_3_5:1.3.0.2
	OPENBSD_3_5_BASE:1.3
	OPENBSD_3_4:1.2.0.4
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.2.0.2
	OPENBSD_3_3_BASE:1.2
	BIND_9_2_2_RC1:1.1.1.1
	ISC:1.1.1;
locks; strict;
comment	@# @;


1.7
date	2014.08.25.07.08.32;	author brad;	state dead;
branches;
next	1.6;
commitid	zKogyOACFMOV70QE;

1.6
date	2007.12.09.13.39.42;	author jakob;	state Exp;
branches;
next	1.5;

1.5
date	2006.04.05.17.36.33;	author jakob;	state Exp;
branches;
next	1.4;

1.4
date	2004.09.28.17.14.03;	author jakob;	state Exp;
branches;
next	1.3;

1.3
date	2003.11.18.14.14.05;	author jakob;	state Exp;
branches;
next	1.2;

1.2
date	2003.03.05.09.18.32;	author jakob;	state Exp;
branches;
next	1.1;

1.1
date	2003.01.20.21.06.06;	author jakob;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.01.20.21.06.06;	author jakob;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2004.09.28.16.32.53;	author jakob;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2006.04.05.16.42.06;	author jakob;	state Exp;
branches;
next	1.1.1.4;

1.1.1.4
date	2007.12.09.12.32.31;	author jakob;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Start removing unused documentation and the server and related binaries source
code.
@
text
@<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
               "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd"
	       [<!ENTITY mdash "&#8212;">]>
<!--
 - Copyright (C) 2004-2007  Internet Systems Consortium, Inc. ("ISC")
 - Copyright (C) 2000-2003  Internet Software Consortium.
 -
 - Permission to use, copy, modify, and/or distribute this software for any
 - purpose with or without fee is hereby granted, provided that the above
 - copyright notice and this permission notice appear in all copies.
 -
 - THE SOFTWARE IS PROVIDED "AS IS" AND ISC DISCLAIMS ALL WARRANTIES WITH
 - REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
 - AND FITNESS.  IN NO EVENT SHALL ISC BE LIABLE FOR ANY SPECIAL, DIRECT,
 - INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
 - LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE
 - OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
 - PERFORMANCE OF THIS SOFTWARE.
-->

<!-- $ISC: dnssec-signzone.docbook,v 1.10.18.17 2007/08/28 07:20:00 tbox Exp $ -->
<refentry id="man.dnssec-signzone">
  <refentryinfo>
    <date>June 30, 2000</date>
  </refentryinfo>

  <refmeta>
    <refentrytitle><application>dnssec-signzone</application></refentrytitle>
   <manvolnum>8</manvolnum>
    <refmiscinfo>BIND9</refmiscinfo>
  </refmeta>

  <refnamediv>
    <refname><application>dnssec-signzone</application></refname>
    <refpurpose>DNSSEC zone signing tool</refpurpose>
  </refnamediv>

  <docinfo>
    <copyright>
      <year>2004</year>
      <year>2005</year>
      <year>2006</year>
      <year>2007</year>
      <holder>Internet Systems Consortium, Inc. ("ISC")</holder>
    </copyright>
    <copyright>
      <year>2000</year>
      <year>2001</year>
      <year>2002</year>
      <year>2003</year>
      <holder>Internet Software Consortium.</holder>
    </copyright>
  </docinfo>

  <refsynopsisdiv>
    <cmdsynopsis>
      <command>dnssec-signzone</command>
      <arg><option>-a</option></arg>
      <arg><option>-c <replaceable class="parameter">class</replaceable></option></arg>
      <arg><option>-d <replaceable class="parameter">directory</replaceable></option></arg>
      <arg><option>-e <replaceable class="parameter">end-time</replaceable></option></arg>
      <arg><option>-f <replaceable class="parameter">output-file</replaceable></option></arg>
      <arg><option>-g</option></arg>
      <arg><option>-h</option></arg>
      <arg><option>-k <replaceable class="parameter">key</replaceable></option></arg>
      <arg><option>-l <replaceable class="parameter">domain</replaceable></option></arg>
      <arg><option>-i <replaceable class="parameter">interval</replaceable></option></arg>
      <arg><option>-I <replaceable class="parameter">input-format</replaceable></option></arg>
      <arg><option>-j <replaceable class="parameter">jitter</replaceable></option></arg>
      <arg><option>-N <replaceable class="parameter">soa-serial-format</replaceable></option></arg>
      <arg><option>-o <replaceable class="parameter">origin</replaceable></option></arg>
      <arg><option>-O <replaceable class="parameter">output-format</replaceable></option></arg>
      <arg><option>-p</option></arg>
      <arg><option>-r <replaceable class="parameter">randomdev</replaceable></option></arg>
      <arg><option>-s <replaceable class="parameter">start-time</replaceable></option></arg>
      <arg><option>-t</option></arg>
      <arg><option>-v <replaceable class="parameter">level</replaceable></option></arg>
      <arg><option>-z</option></arg>
      <arg choice="req">zonefile</arg>
      <arg rep="repeat">key</arg>
    </cmdsynopsis>
  </refsynopsisdiv>

  <refsect1>
    <title>DESCRIPTION</title>
    <para><command>dnssec-signzone</command>
      signs a zone.  It generates
      NSEC and RRSIG records and produces a signed version of the
      zone. The security status of delegations from the signed zone
      (that is, whether the child zones are secure or not) is
      determined by the presence or absence of a
      <filename>keyset</filename> file for each child zone.
    </para>
  </refsect1>

  <refsect1>
    <title>OPTIONS</title>

    <variablelist>
      <varlistentry>
        <term>-a</term>
        <listitem>
          <para>
            Verify all generated signatures.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-c <replaceable class="parameter">class</replaceable></term>
        <listitem>
          <para>
            Specifies the DNS class of the zone.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-k <replaceable class="parameter">key</replaceable></term>
        <listitem>
          <para>
            Treat specified key as a key signing key ignoring any
            key flags.  This option may be specified multiple times.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-l <replaceable class="parameter">domain</replaceable></term>
        <listitem>
          <para>
            Generate a DLV set in addition to the key (DNSKEY) and DS sets.
            The domain is appended to the name of the records.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-d <replaceable class="parameter">directory</replaceable></term>
        <listitem>
          <para>
            Look for <filename>keyset</filename> files in
            <option>directory</option> as the directory
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-g</term>
        <listitem>
          <para>
            Generate DS records for child zones from keyset files.
            Existing DS records will be removed.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-s <replaceable class="parameter">start-time</replaceable></term>
        <listitem>
          <para>
            Specify the date and time when the generated RRSIG records
            become valid.  This can be either an absolute or relative
            time.  An absolute start time is indicated by a number
            in YYYYMMDDHHMMSS notation; 20000530144500 denotes
            14:45:00 UTC on May 30th, 2000.  A relative start time is
            indicated by +N, which is N seconds from the current time.
            If no <option>start-time</option> is specified, the current
            time minus 1 hour (to allow for clock skew) is used.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-e <replaceable class="parameter">end-time</replaceable></term>
        <listitem>
          <para>
            Specify the date and time when the generated RRSIG records
            expire.  As with <option>start-time</option>, an absolute
            time is indicated in YYYYMMDDHHMMSS notation.  A time relative
            to the start time is indicated with +N, which is N seconds from
            the start time.  A time relative to the current time is
            indicated with now+N.  If no <option>end-time</option> is
            specified, 30 days from the start time is used as a default.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-f <replaceable class="parameter">output-file</replaceable></term>
        <listitem>
          <para>
            The name of the output file containing the signed zone.  The
            default is to append <filename>.signed</filename> to
            the
            input filename.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-h</term>
        <listitem>
          <para>
            Prints a short summary of the options and arguments to
            <command>dnssec-signzone</command>.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-i <replaceable class="parameter">interval</replaceable></term>
        <listitem>
          <para>
            When a previously-signed zone is passed as input, records
            may be resigned.  The <option>interval</option> option
            specifies the cycle interval as an offset from the current
            time (in seconds).  If a RRSIG record expires after the
            cycle interval, it is retained.  Otherwise, it is considered
            to be expiring soon, and it will be replaced.
          </para>
          <para>
            The default cycle interval is one quarter of the difference
            between the signature end and start times.  So if neither
            <option>end-time</option> or <option>start-time</option>
            are specified, <command>dnssec-signzone</command>
            generates
            signatures that are valid for 30 days, with a cycle
            interval of 7.5 days.  Therefore, if any existing RRSIG records
            are due to expire in less than 7.5 days, they would be
            replaced.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-I <replaceable class="parameter">input-format</replaceable></term>
        <listitem>
          <para>
            The format of the input zone file.
	    Possible formats are <command>"text"</command> (default)
	    and <command>"raw"</command>.
	    This option is primarily intended to be used for dynamic
            signed zones so that the dumped zone file in a non-text
            format containing updates can be signed directly.
	    The use of this option does not make much sense for
	    non-dynamic zones.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-j <replaceable class="parameter">jitter</replaceable></term>
        <listitem>
          <para>
            When signing a zone with a fixed signature lifetime, all
            RRSIG records issued at the time of signing expires
            simultaneously.  If the zone is incrementally signed, i.e.
            a previously-signed zone is passed as input to the signer,
            all expired signatures have to be regenerated at about the
            same time.  The <option>jitter</option> option specifies a
            jitter window that will be used to randomize the signature
            expire time, thus spreading incremental signature
            regeneration over time.
          </para>
          <para>
            Signature lifetime jitter also to some extent benefits
            validators and servers by spreading out cache expiration,
            i.e. if large numbers of RRSIGs don't expire at the same time
            from all caches there will be less congestion than if all
            validators need to refetch at mostly the same time.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-n <replaceable class="parameter">ncpus</replaceable></term>
        <listitem>
          <para>
            Specifies the number of threads to use.  By default, one
            thread is started for each detected CPU.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-N <replaceable class="parameter">soa-serial-format</replaceable></term>
        <listitem>
          <para>
            The SOA serial number format of the signed zone.
	    Possible formats are <command>"keep"</command> (default),
            <command>"increment"</command> and
	    <command>"unixtime"</command>.
          </para>

          <variablelist>
	    <varlistentry>
	      <term><command>"keep"</command></term>
              <listitem>
                <para>Do not modify the SOA serial number.</para>
	      </listitem>
            </varlistentry>

	    <varlistentry>
	      <term><command>"increment"</command></term>
              <listitem>
                <para>Increment the SOA serial number using RFC 1982
                      arithmetics.</para>
	      </listitem>
            </varlistentry>

	    <varlistentry>
	      <term><command>"unixtime"</command></term>
              <listitem>
                <para>Set the SOA serial number to the number of seconds
	        since epoch.</para>
	      </listitem>
            </varlistentry>
	 </variablelist>

        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-o <replaceable class="parameter">origin</replaceable></term>
        <listitem>
          <para>
            The zone origin.  If not specified, the name of the zone file
            is assumed to be the origin.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-O <replaceable class="parameter">output-format</replaceable></term>
        <listitem>
          <para>
            The format of the output file containing the signed zone.
	    Possible formats are <command>"text"</command> (default)
	    and <command>"raw"</command>.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-p</term>
        <listitem>
          <para>
            Use pseudo-random data when signing the zone.  This is faster,
            but less secure, than using real random data.  This option
            may be useful when signing large zones or when the entropy
            source is limited.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-r <replaceable class="parameter">randomdev</replaceable></term>
        <listitem>
          <para>
            Specifies the source of randomness.  If the operating
            system does not provide a <filename>/dev/random</filename>
            or equivalent device, the default source of randomness
            is keyboard input.  <filename>randomdev</filename>
            specifies
            the name of a character device or file containing random
            data to be used instead of the default.  The special value
            <filename>keyboard</filename> indicates that keyboard
            input should be used.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-t</term>
        <listitem>
          <para>
            Print statistics at completion.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-v <replaceable class="parameter">level</replaceable></term>
        <listitem>
          <para>
            Sets the debugging level.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-z</term>
        <listitem>
          <para>
            Ignore KSK flag on key when determining what to sign.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>zonefile</term>
        <listitem>
          <para>
            The file containing the zone to be signed.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>key</term>
        <listitem>
          <para>
	    Specify which keys should be used to sign the zone.  If
	    no keys are specified, then the zone will be examined
	    for DNSKEY records at the zone apex.  If these are found and
	    there are matching private keys, in the current directory,
	    then these will be used for signing.
          </para>
        </listitem>
      </varlistentry>

    </variablelist>
  </refsect1>

  <refsect1>
    <title>EXAMPLE</title>
    <para>
      The following command signs the <userinput>example.com</userinput>
      zone with the DSA key generated by <command>dnssec-keygen</command>
      (Kexample.com.+003+17247).  The zone's keys must be in the master
      file (<filename>db.example.com</filename>).  This invocation looks
      for <filename>keyset</filename> files, in the current directory,
      so that DS records can be generated from them (<command>-g</command>).
    </para>
<programlisting>% dnssec-signzone -g -o example.com db.example.com \
Kexample.com.+003+17247
db.example.com.signed
%</programlisting>
    <para>
      In the above example, <command>dnssec-signzone</command> creates
      the file <filename>db.example.com.signed</filename>.  This
      file should be referenced in a zone statement in a
      <filename>named.conf</filename> file.
    </para>
    <para>
      This example re-signs a previously signed zone with default parameters.
      The private keys are assumed to be in the current directory.
    </para>
<programlisting>% cp db.example.com.signed db.example.com
% dnssec-signzone -o example.com db.example.com
db.example.com.signed
%</programlisting>
  </refsect1>

  <refsect1>
    <title>SEE ALSO</title>
    <para><citerefentry>
        <refentrytitle>dnssec-keygen</refentrytitle><manvolnum>8</manvolnum>
      </citerefentry>,
      <citetitle>BIND 9 Administrator Reference Manual</citetitle>,
      <citetitle>RFC 2535</citetitle>.
    </para>
  </refsect1>

  <refsect1>
    <title>AUTHOR</title>
    <para><corpauthor>Internet Systems Consortium</corpauthor>
    </para>
  </refsect1>

</refentry><!--
 - Local variables:
 - mode: sgml
 - End:
-->
@


1.6
log
@resolve conflicts
@
text
@@


1.5
log
@resolve conflicts
@
text
@d1 2
a2 2
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.0//EN"
               "http://www.oasis-open.org/docbook/xml/4.0/docbookx.dtd"
d5 1
a5 1
 - Copyright (C) 2004, 2005  Internet Systems Consortium, Inc. ("ISC")
d8 1
a8 1
 - Permission to use, copy, modify, and distribute this software for any
d21 2
a22 3
<!-- $ISC: dnssec-signzone.docbook,v 1.2.2.2.4.11 2005/06/24 00:18:15 marka Exp $ -->

<refentry>
d29 1
a29 1
    <manvolnum>8</manvolnum>
d33 5
d42 2
a54 5
  <refnamediv>
    <refname><application>dnssec-signzone</application></refname>
    <refpurpose>DNSSEC zone signing tool</refpurpose>
  </refnamediv>

d68 3
a70 1
      <arg><option>-n <replaceable class="parameter">nthreads</replaceable></option></arg>
d72 1
d86 7
a92 7
    <para>
        <command>dnssec-signzone</command> signs a zone.  It generates
	NSEC and RRSIG records and produces a signed version of the
	zone. The security status of delegations from the signed zone
	(that is, whether the child zones are secure or not) is
	determined by the presence or absence of a
	<filename>keyset</filename> file for each child zone.
d102 5
a106 5
	<listitem>
	  <para>
	      Verify all generated signatures.
	  </para>
	</listitem>
d111 5
a115 5
	<listitem>
	  <para>
	       Specifies the DNS class of the zone.
	  </para>
	</listitem>
d120 6
a125 6
	<listitem>
	  <para>
	       Treat specified key as a key signing key ignoring any
	       key flags.  This option may be specified multiple times.
	  </para>
	</listitem>
d130 6
a135 6
	<listitem>
	  <para>
		Generate a DLV set in addition to the key (DNSKEY) and DS sets.
		The domain is appended to the name of the records.
	  </para>
	</listitem>
d140 6
a145 6
	<listitem>
	  <para>
	       Look for <filename>keyset</filename> files in
	       <option>directory</option> as the directory 
	  </para>
	</listitem>
d150 6
a155 6
	<listitem>
	  <para>
		Generate DS records for child zones from keyset files.
		Existing DS records will be removed.
	  </para>
	</listitem>
d160 12
a171 12
	<listitem>
	  <para>
	       Specify the date and time when the generated RRSIG records
	       become valid.  This can be either an absolute or relative
	       time.  An absolute start time is indicated by a number
	       in YYYYMMDDHHMMSS notation; 20000530144500 denotes
	       14:45:00 UTC on May 30th, 2000.  A relative start time is
	       indicated by +N, which is N seconds from the current time.
	       If no <option>start-time</option> is specified, the current
	       time minus 1 hour (to allow for clock skew) is used.
	  </para>
	</listitem>
d176 11
a186 11
	<listitem>
	  <para>
	       Specify the date and time when the generated RRSIG records
	       expire.  As with <option>start-time</option>, an absolute
	       time is indicated in YYYYMMDDHHMMSS notation.  A time relative
	       to the start time is indicated with +N, which is N seconds from
	       the start time.  A time relative to the current time is
	       indicated with now+N.  If no <option>end-time</option> is
	       specified, 30 days from the start time is used as a default.
	  </para>
	</listitem>
d191 8
a198 7
	<listitem>
	  <para>
	       The name of the output file containing the signed zone.  The
	       default is to append <filename>.signed</filename> to the
	       input file.
	  </para>
	</listitem>
d203 6
a208 6
	<listitem>
	  <para>
	       Prints a short summary of the options and arguments to
	       <command>dnssec-signzone</command>.
	  </para>
	</listitem>
d213 61
a273 20
	<listitem>
	  <para>
	       When a previously signed zone is passed as input, records
	       may be resigned.  The <option>interval</option> option
	       specifies the cycle interval as an offset from the current
	       time (in seconds).  If a RRSIG record expires after the
	       cycle interval, it is retained.  Otherwise, it is considered
	       to be expiring soon, and it will be replaced.
	  </para>
	  <para>
	       The default cycle interval is one quarter of the difference
	       between the signature end and start times.  So if neither
	       <option>end-time</option> or <option>start-time</option>
	       are specified, <command>dnssec-signzone</command> generates
	       signatures that are valid for 30 days, with a cycle
	       interval of 7.5 days.  Therefore, if any existing RRSIG records
	       are due to expire in less than 7.5 days, they would be
	       replaced.
	  </para>
	</listitem>
d278 44
a321 6
	<listitem>
	  <para>
	       Specifies the number of threads to use.  By default, one
	       thread is started for each detected CPU.
	  </para>
	</listitem>
d326 17
a342 6
	<listitem>
	  <para>
	       The zone origin.  If not specified, the name of the zone file
	       is assumed to be the origin.
	  </para>
	</listitem>
d347 8
a354 8
	<listitem>
	  <para>
	       Use pseudo-random data when signing the zone.  This is faster,
	       but less secure, than using real random data.  This option
	       may be useful when signing large zones or when the entropy
	       source is limited.
	  </para>
	</listitem>
d359 13
a371 12
	<listitem>
	  <para>
	       Specifies the source of randomness.  If the operating
	       system does not provide a <filename>/dev/random</filename>
	       or equivalent device, the default source of randomness
	       is keyboard input.  <filename>randomdev</filename> specifies
	       the name of a character device or file containing random
	       data to be used instead of the default.  The special value
	       <filename>keyboard</filename> indicates that keyboard
	       input should be used.
	  </para>
	</listitem>
d376 5
a380 5
	<listitem>
	  <para>
	       Print statistics at completion.
	  </para>
	</listitem>
d385 5
a389 5
	<listitem>
	  <para>
	       Sets the debugging level.
	  </para>
	</listitem>
d394 5
a398 5
	<listitem>
	  <para>
	       Ignore KSK flag on key when determining what to sign.
	  </para>
	</listitem>
d403 5
a407 5
	<listitem>
	  <para>
	       The file containing the zone to be signed.
	  </para>
	</listitem>
d412 9
a420 7
	<listitem>
	  <para>
	       The keys used to sign the zone.  If no keys are specified, the
	       default all zone keys that have private key files in the
	       current directory.
	  </para>
	</listitem>
d429 6
a434 10
        The following command signs the <userinput>example.com</userinput>
	zone with the DSA key generated in the <command>dnssec-keygen</command>
	man page.  The zone's keys must be in the zone.  If there are
	<filename>keyset</filename> files associated with child zones,
	they must be in the current directory.
	<userinput>example.com</userinput>, the following command would be
	issued:
    </para>
    <para>
        <userinput>dnssec-signzone -o example.com db.example.com Kexample.com.+003+26160</userinput>
d436 4
d441 4
a444 1
        The command would print a string of the form:
d447 2
a448 4
        In this example, <command>dnssec-signzone</command> creates
	the file <filename>db.example.com.signed</filename>.  This file
	should be referenced in a zone statement in a
	<filename>named.conf</filename> file.
d450 4
d458 2
a459 4
    <para>
      <citerefentry>
        <refentrytitle>dnssec-keygen</refentrytitle>
	<manvolnum>8</manvolnum>
d468 1
a468 2
    <para>
        <corpauthor>Internet Systems Consortium</corpauthor>
d472 1
a472 3
</refentry>

<!--
@


1.4
log
@resolve conflicts
@
text
@d1 3
a3 1
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook V4.1//EN">
d5 2
a6 2
 - Copyright (C) 2004  Internet Systems Consortium, Inc. ("ISC")
 - Copyright (C) 2001-2003  Internet Software Consortium.
d21 1
a21 1
<!-- $ISC: dnssec-signzone.docbook,v 1.2.2.2.4.8 2004/06/11 01:17:35 marka Exp $ -->
d34 15
a309 1
	       Sets the debugging level.
@


1.3
log
@update to BIND v9.2.3. ok todd@@
@
text
@d3 2
a4 1
 - Copyright (C) 2001, 2003  Internet Software Consortium.
d10 7
a16 8
 - THE SOFTWARE IS PROVIDED "AS IS" AND INTERNET SOFTWARE CONSORTIUM
 - DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL
 - IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL
 - INTERNET SOFTWARE CONSORTIUM BE LIABLE FOR ANY SPECIAL, DIRECT,
 - INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING
 - FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT,
 - NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION
 - WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
d19 1
a19 1
<!-- $ISC: dnssec-signzone.docbook,v 1.2.2.2 2003/03/06 04:38:13 marka Exp $ -->
a42 1
      <arg><option>-s <replaceable class="parameter">start-time</replaceable></option></arg>
d45 1
d47 2
d54 1
d57 1
d66 6
a71 8
        <command>dnssec-signzone</command> signs a zone.  It generates NXT
	and SIG records and produces a signed version of the zone.  If there
	is a <filename>signedkey</filename> file from the zone's parent,
	the parent's signatures will be incorporated into the generated
	signed zone file.  The security status of delegations from the the
        signed zone (that is, whether the child zones are secure or not) is
        determined by the presence or absence of a
	<filename>signedkey</filename> file for each child zone.
d98 20
d121 1
a121 1
	       Look for <filename>signedkey</filename> files in
d128 10
d141 1
a141 1
	       Specify the date and time when the generated SIG records
d148 1
a148 1
	       time is used.
d157 1
a157 1
	       Specify the date and time when the generated SIG records
d196 1
a196 1
	       time (in seconds).  If a SIG record expires after the
d206 1
a206 1
	       interval of 7.5 days.  Therefore, if any existing SIG records
d280 9
d318 2
a319 2
	<filename>signedkey</filename> files associated with this zone
	or any child zones, they must be in the current directory.
a343 4
      <citerefentry>
        <refentrytitle>dnssec-signkey</refentrytitle>
	<manvolnum>8</manvolnum>
      </citerefentry>,
d352 1
a352 1
        <corpauthor>Internet Software Consortium</corpauthor>
@


1.2
log
@update to BIND 9.2.2-release. ok millert@@
@
text
@d19 1
a19 1
<!-- $ISC: dnssec-signzone.docbook,v 1.2.52.2 2003/02/17 07:05:03 marka Exp $ -->
@


1.1
log
@Initial revision
@
text
@d3 1
a3 1
 - Copyright (C) 2001  Internet Software Consortium.
d19 1
a19 1
<!-- $ISC: dnssec-signzone.docbook,v 1.2 2001/04/10 21:50:37 bwelling Exp $ -->
d129 1
a129 1
	       the start time.  A time realtive to the current time is
@


1.1.1.1
log
@ISC BIND version 9.2.2rc1
@
text
@@


1.1.1.2
log
@ISC BIND version 9.3.0. ok deraadt@@
@
text
@d3 1
a3 2
 - Copyright (C) 2004  Internet Systems Consortium, Inc. ("ISC")
 - Copyright (C) 2001-2003  Internet Software Consortium.
d9 8
a16 7
 - THE SOFTWARE IS PROVIDED "AS IS" AND ISC DISCLAIMS ALL WARRANTIES WITH
 - REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
 - AND FITNESS.  IN NO EVENT SHALL ISC BE LIABLE FOR ANY SPECIAL, DIRECT,
 - INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
 - LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE
 - OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
 - PERFORMANCE OF THIS SOFTWARE.
d19 1
a19 1
<!-- $ISC: dnssec-signzone.docbook,v 1.2.2.2.4.8 2004/06/11 01:17:35 marka Exp $ -->
d43 1
a45 1
      <arg><option>-g</option></arg>
a46 2
      <arg><option>-k <replaceable class="parameter">key</replaceable></option></arg>
      <arg><option>-l <replaceable class="parameter">domain</replaceable></option></arg>
a51 1
      <arg><option>-s <replaceable class="parameter">start-time</replaceable></option></arg>
a53 1
      <arg><option>-z</option></arg>
d62 8
a69 6
        <command>dnssec-signzone</command> signs a zone.  It generates
	NSEC and RRSIG records and produces a signed version of the
	zone. The security status of delegations from the signed zone
	(that is, whether the child zones are secure or not) is
	determined by the presence or absence of a
	<filename>keyset</filename> file for each child zone.
a95 20
        <term>-k <replaceable class="parameter">key</replaceable></term>
	<listitem>
	  <para>
	       Treat specified key as a key signing key ignoring any
	       key flags.  This option may be specified multiple times.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
        <term>-l <replaceable class="parameter">domain</replaceable></term>
	<listitem>
	  <para>
		Generate a DLV set in addition to the key (DNSKEY) and DS sets.
		The domain is appended to the name of the records.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
d99 1
a99 1
	       Look for <filename>keyset</filename> files in
a105 10
        <term>-g</term>
	<listitem>
	  <para>
		Generate DS records for child zones from keyset files.
		Existing DS records will be removed.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
d109 1
a109 1
	       Specify the date and time when the generated RRSIG records
d116 1
a116 1
	       time minus 1 hour (to allow for clock skew) is used.
d125 1
a125 1
	       Specify the date and time when the generated RRSIG records
d129 1
a129 1
	       the start time.  A time relative to the current time is
d164 1
a164 1
	       time (in seconds).  If a RRSIG record expires after the
d174 1
a174 1
	       interval of 7.5 days.  Therefore, if any existing RRSIG records
a247 9
        <term>-z</term>
	<listitem>
	  <para>
	       Ignore KSK flag on key when determining what to sign.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
d277 2
a278 2
	<filename>keyset</filename> files associated with child zones,
	they must be in the current directory.
d303 4
d315 1
a315 1
        <corpauthor>Internet Systems Consortium</corpauthor>
@


1.1.1.3
log
@ISC BIND release 9.3.2
@
text
@d1 1
a1 3
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.0//EN"
               "http://www.oasis-open.org/docbook/xml/4.0/docbookx.dtd"
	       [<!ENTITY mdash "&#8212;">]>
d3 2
a4 2
 - Copyright (C) 2004, 2005  Internet Systems Consortium, Inc. ("ISC")
 - Copyright (C) 2000-2003  Internet Software Consortium.
d19 1
a19 1
<!-- $ISC: dnssec-signzone.docbook,v 1.2.2.2.4.11 2005/06/24 00:18:15 marka Exp $ -->
a31 15
  <docinfo>
    <copyright>
      <year>2004</year>
      <year>2005</year>
      <holder>Internet Systems Consortium, Inc. ("ISC")</holder>
    </copyright>
    <copyright>
      <year>2000</year>
      <year>2001</year>
      <year>2002</year>
      <year>2003</year>
      <holder>Internet Software Consortium.</holder>
    </copyright>
  </docinfo>

d293 1
@


1.1.1.4
log
@ISC BIND release 9.4.2
@
text
@d1 2
a2 2
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
               "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd"
d5 1
a5 1
 - Copyright (C) 2004-2007  Internet Systems Consortium, Inc. ("ISC")
d8 1
a8 1
 - Permission to use, copy, modify, and/or distribute this software for any
d21 3
a23 2
<!-- $ISC: dnssec-signzone.docbook,v 1.10.18.17 2007/08/28 07:20:00 tbox Exp $ -->
<refentry id="man.dnssec-signzone">
d30 1
a30 1
   <manvolnum>8</manvolnum>
a33 5
  <refnamediv>
    <refname><application>dnssec-signzone</application></refname>
    <refpurpose>DNSSEC zone signing tool</refpurpose>
  </refnamediv>

a37 2
      <year>2006</year>
      <year>2007</year>
d49 5
d67 1
a67 3
      <arg><option>-I <replaceable class="parameter">input-format</replaceable></option></arg>
      <arg><option>-j <replaceable class="parameter">jitter</replaceable></option></arg>
      <arg><option>-N <replaceable class="parameter">soa-serial-format</replaceable></option></arg>
a68 1
      <arg><option>-O <replaceable class="parameter">output-format</replaceable></option></arg>
d82 7
a88 7
    <para><command>dnssec-signzone</command>
      signs a zone.  It generates
      NSEC and RRSIG records and produces a signed version of the
      zone. The security status of delegations from the signed zone
      (that is, whether the child zones are secure or not) is
      determined by the presence or absence of a
      <filename>keyset</filename> file for each child zone.
d98 5
a102 5
        <listitem>
          <para>
            Verify all generated signatures.
          </para>
        </listitem>
d107 5
a111 5
        <listitem>
          <para>
            Specifies the DNS class of the zone.
          </para>
        </listitem>
d116 6
a121 6
        <listitem>
          <para>
            Treat specified key as a key signing key ignoring any
            key flags.  This option may be specified multiple times.
          </para>
        </listitem>
d126 6
a131 6
        <listitem>
          <para>
            Generate a DLV set in addition to the key (DNSKEY) and DS sets.
            The domain is appended to the name of the records.
          </para>
        </listitem>
d136 6
a141 6
        <listitem>
          <para>
            Look for <filename>keyset</filename> files in
            <option>directory</option> as the directory
          </para>
        </listitem>
d146 6
a151 6
        <listitem>
          <para>
            Generate DS records for child zones from keyset files.
            Existing DS records will be removed.
          </para>
        </listitem>
d156 12
a167 12
        <listitem>
          <para>
            Specify the date and time when the generated RRSIG records
            become valid.  This can be either an absolute or relative
            time.  An absolute start time is indicated by a number
            in YYYYMMDDHHMMSS notation; 20000530144500 denotes
            14:45:00 UTC on May 30th, 2000.  A relative start time is
            indicated by +N, which is N seconds from the current time.
            If no <option>start-time</option> is specified, the current
            time minus 1 hour (to allow for clock skew) is used.
          </para>
        </listitem>
d172 11
a182 11
        <listitem>
          <para>
            Specify the date and time when the generated RRSIG records
            expire.  As with <option>start-time</option>, an absolute
            time is indicated in YYYYMMDDHHMMSS notation.  A time relative
            to the start time is indicated with +N, which is N seconds from
            the start time.  A time relative to the current time is
            indicated with now+N.  If no <option>end-time</option> is
            specified, 30 days from the start time is used as a default.
          </para>
        </listitem>
d187 7
a193 8
        <listitem>
          <para>
            The name of the output file containing the signed zone.  The
            default is to append <filename>.signed</filename> to
            the
            input filename.
          </para>
        </listitem>
d198 6
a203 6
        <listitem>
          <para>
            Prints a short summary of the options and arguments to
            <command>dnssec-signzone</command>.
          </para>
        </listitem>
d208 20
a227 61
        <listitem>
          <para>
            When a previously-signed zone is passed as input, records
            may be resigned.  The <option>interval</option> option
            specifies the cycle interval as an offset from the current
            time (in seconds).  If a RRSIG record expires after the
            cycle interval, it is retained.  Otherwise, it is considered
            to be expiring soon, and it will be replaced.
          </para>
          <para>
            The default cycle interval is one quarter of the difference
            between the signature end and start times.  So if neither
            <option>end-time</option> or <option>start-time</option>
            are specified, <command>dnssec-signzone</command>
            generates
            signatures that are valid for 30 days, with a cycle
            interval of 7.5 days.  Therefore, if any existing RRSIG records
            are due to expire in less than 7.5 days, they would be
            replaced.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-I <replaceable class="parameter">input-format</replaceable></term>
        <listitem>
          <para>
            The format of the input zone file.
	    Possible formats are <command>"text"</command> (default)
	    and <command>"raw"</command>.
	    This option is primarily intended to be used for dynamic
            signed zones so that the dumped zone file in a non-text
            format containing updates can be signed directly.
	    The use of this option does not make much sense for
	    non-dynamic zones.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-j <replaceable class="parameter">jitter</replaceable></term>
        <listitem>
          <para>
            When signing a zone with a fixed signature lifetime, all
            RRSIG records issued at the time of signing expires
            simultaneously.  If the zone is incrementally signed, i.e.
            a previously-signed zone is passed as input to the signer,
            all expired signatures have to be regenerated at about the
            same time.  The <option>jitter</option> option specifies a
            jitter window that will be used to randomize the signature
            expire time, thus spreading incremental signature
            regeneration over time.
          </para>
          <para>
            Signature lifetime jitter also to some extent benefits
            validators and servers by spreading out cache expiration,
            i.e. if large numbers of RRSIGs don't expire at the same time
            from all caches there will be less congestion than if all
            validators need to refetch at mostly the same time.
          </para>
        </listitem>
d232 6
a237 44
        <listitem>
          <para>
            Specifies the number of threads to use.  By default, one
            thread is started for each detected CPU.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-N <replaceable class="parameter">soa-serial-format</replaceable></term>
        <listitem>
          <para>
            The SOA serial number format of the signed zone.
	    Possible formats are <command>"keep"</command> (default),
            <command>"increment"</command> and
	    <command>"unixtime"</command>.
          </para>

          <variablelist>
	    <varlistentry>
	      <term><command>"keep"</command></term>
              <listitem>
                <para>Do not modify the SOA serial number.</para>
	      </listitem>
            </varlistentry>

	    <varlistentry>
	      <term><command>"increment"</command></term>
              <listitem>
                <para>Increment the SOA serial number using RFC 1982
                      arithmetics.</para>
	      </listitem>
            </varlistentry>

	    <varlistentry>
	      <term><command>"unixtime"</command></term>
              <listitem>
                <para>Set the SOA serial number to the number of seconds
	        since epoch.</para>
	      </listitem>
            </varlistentry>
	 </variablelist>

        </listitem>
d242 6
a247 17
        <listitem>
          <para>
            The zone origin.  If not specified, the name of the zone file
            is assumed to be the origin.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-O <replaceable class="parameter">output-format</replaceable></term>
        <listitem>
          <para>
            The format of the output file containing the signed zone.
	    Possible formats are <command>"text"</command> (default)
	    and <command>"raw"</command>.
          </para>
        </listitem>
d252 8
a259 8
        <listitem>
          <para>
            Use pseudo-random data when signing the zone.  This is faster,
            but less secure, than using real random data.  This option
            may be useful when signing large zones or when the entropy
            source is limited.
          </para>
        </listitem>
d264 12
a275 13
        <listitem>
          <para>
            Specifies the source of randomness.  If the operating
            system does not provide a <filename>/dev/random</filename>
            or equivalent device, the default source of randomness
            is keyboard input.  <filename>randomdev</filename>
            specifies
            the name of a character device or file containing random
            data to be used instead of the default.  The special value
            <filename>keyboard</filename> indicates that keyboard
            input should be used.
          </para>
        </listitem>
d280 5
a284 5
        <listitem>
          <para>
            Print statistics at completion.
          </para>
        </listitem>
d289 5
a293 5
        <listitem>
          <para>
            Sets the debugging level.
          </para>
        </listitem>
d298 5
a302 5
        <listitem>
          <para>
            Ignore KSK flag on key when determining what to sign.
          </para>
        </listitem>
d307 5
a311 5
        <listitem>
          <para>
            The file containing the zone to be signed.
          </para>
        </listitem>
d316 7
a322 9
        <listitem>
          <para>
	    Specify which keys should be used to sign the zone.  If
	    no keys are specified, then the zone will be examined
	    for DNSKEY records at the zone apex.  If these are found and
	    there are matching private keys, in the current directory,
	    then these will be used for signing.
          </para>
        </listitem>
d331 10
a340 6
      The following command signs the <userinput>example.com</userinput>
      zone with the DSA key generated by <command>dnssec-keygen</command>
      (Kexample.com.+003+17247).  The zone's keys must be in the master
      file (<filename>db.example.com</filename>).  This invocation looks
      for <filename>keyset</filename> files, in the current directory,
      so that DS records can be generated from them (<command>-g</command>).
a341 4
<programlisting>% dnssec-signzone -g -o example.com db.example.com \
Kexample.com.+003+17247
db.example.com.signed
%</programlisting>
d343 1
a343 4
      In the above example, <command>dnssec-signzone</command> creates
      the file <filename>db.example.com.signed</filename>.  This
      file should be referenced in a zone statement in a
      <filename>named.conf</filename> file.
d346 4
a349 2
      This example re-signs a previously signed zone with default parameters.
      The private keys are assumed to be in the current directory.
a350 4
<programlisting>% cp db.example.com.signed db.example.com
% dnssec-signzone -o example.com db.example.com
db.example.com.signed
%</programlisting>
d355 4
a358 2
    <para><citerefentry>
        <refentrytitle>dnssec-keygen</refentrytitle><manvolnum>8</manvolnum>
d367 2
a368 1
    <para><corpauthor>Internet Systems Consortium</corpauthor>
d372 3
a374 1
</refentry><!--
@


