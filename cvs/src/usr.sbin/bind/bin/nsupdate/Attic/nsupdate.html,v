head	1.8;
access;
symbols
	OPENBSD_5_6:1.7.0.30
	OPENBSD_5_6_BASE:1.7
	OPENBSD_5_5:1.7.0.28
	OPENBSD_5_5_BASE:1.7
	OPENBSD_5_4:1.7.0.24
	OPENBSD_5_4_BASE:1.7
	OPENBSD_5_3:1.7.0.22
	OPENBSD_5_3_BASE:1.7
	OPENBSD_5_2:1.7.0.20
	OPENBSD_5_2_BASE:1.7
	OPENBSD_5_1_BASE:1.7
	OPENBSD_5_1:1.7.0.18
	OPENBSD_5_0:1.7.0.16
	OPENBSD_5_0_BASE:1.7
	OPENBSD_4_9:1.7.0.14
	OPENBSD_4_9_BASE:1.7
	OPENBSD_4_8:1.7.0.12
	OPENBSD_4_8_BASE:1.7
	OPENBSD_4_7:1.7.0.8
	OPENBSD_4_7_BASE:1.7
	OPENBSD_4_6:1.7.0.10
	OPENBSD_4_6_BASE:1.7
	OPENBSD_4_5:1.7.0.6
	OPENBSD_4_5_BASE:1.7
	OPENBSD_4_4:1.7.0.4
	OPENBSD_4_4_BASE:1.7
	BIND_9_4_2_P1:1.1.1.5
	OPENBSD_4_3:1.7.0.2
	OPENBSD_4_3_BASE:1.7
	BIND_9_4_2:1.1.1.5
	OPENBSD_4_2:1.6.0.4
	OPENBSD_4_2_BASE:1.6
	OPENBSD_4_1:1.6.0.2
	OPENBSD_4_1_BASE:1.6
	BIND_9_3_4:1.1.1.4
	BIND_9_3_3:1.1.1.4
	OPENBSD_4_0:1.5.0.2
	OPENBSD_4_0_BASE:1.5
	BIND_9_3_2:1.1.1.3
	OPENBSD_3_9:1.4.0.6
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.4.0.4
	OPENBSD_3_8_BASE:1.4
	BIND_9_3_1:1.1.1.2
	OPENBSD_3_7:1.4.0.2
	OPENBSD_3_7_BASE:1.4
	BIND_9_3_0:1.1.1.2
	OPENBSD_3_6:1.3.0.4
	OPENBSD_3_6_BASE:1.3
	OPENBSD_3_5:1.3.0.2
	OPENBSD_3_5_BASE:1.3
	OPENBSD_3_4:1.2.0.4
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.2.0.2
	OPENBSD_3_3_BASE:1.2
	BIND_9_2_2_RC1:1.1.1.1
	ISC:1.1.1;
locks; strict;
comment	@# @;


1.8
date	2014.08.25.07.08.33;	author brad;	state dead;
branches;
next	1.7;
commitid	zKogyOACFMOV70QE;

1.7
date	2007.12.09.13.39.43;	author jakob;	state Exp;
branches;
next	1.6;

1.6
date	2007.01.10.19.07.58;	author jakob;	state Exp;
branches;
next	1.5;

1.5
date	2006.04.05.17.36.33;	author jakob;	state Exp;
branches;
next	1.4;

1.4
date	2004.09.28.17.14.04;	author jakob;	state Exp;
branches;
next	1.3;

1.3
date	2003.11.18.14.14.05;	author jakob;	state Exp;
branches;
next	1.2;

1.2
date	2003.03.05.09.18.32;	author jakob;	state Exp;
branches;
next	1.1;

1.1
date	2003.01.20.21.06.17;	author jakob;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.01.20.21.06.17;	author jakob;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2004.09.28.16.33.15;	author jakob;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2006.04.05.16.42.22;	author jakob;	state Exp;
branches;
next	1.1.1.4;

1.1.1.4
date	2007.01.10.18.18.36;	author jakob;	state Exp;
branches;
next	1.1.1.5;

1.1.1.5
date	2007.12.09.12.33.21;	author jakob;	state Exp;
branches;
next	;


desc
@@


1.8
log
@Start removing unused documentation and the server and related binaries source
code.
@
text
@<!--
 - Copyright (C) 2004-2007 Internet Systems Consortium, Inc. ("ISC")
 - Copyright (C) 2000-2003 Internet Software Consortium.
 - 
 - Permission to use, copy, modify, and distribute this software for any
 - purpose with or without fee is hereby granted, provided that the above
 - copyright notice and this permission notice appear in all copies.
 - 
 - THE SOFTWARE IS PROVIDED "AS IS" AND ISC DISCLAIMS ALL WARRANTIES WITH
 - REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
 - AND FITNESS. IN NO EVENT SHALL ISC BE LIABLE FOR ANY SPECIAL, DIRECT,
 - INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
 - LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE
 - OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
 - PERFORMANCE OF THIS SOFTWARE.
-->
<!-- $ISC: nsupdate.html,v 1.14.18.22 2007/05/09 03:33:13 marka Exp $ -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>nsupdate</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.71.1">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry" lang="en">
<a name="id2476275"></a><div class="titlepage"></div>
<div class="refnamediv">
<h2>Name</h2>
<p>nsupdate &#8212; Dynamic DNS update utility</p>
</div>
<div class="refsynopsisdiv">
<h2>Synopsis</h2>
<div class="cmdsynopsis"><p><code class="command">nsupdate</code>  [<code class="option">-d</code>] [[<code class="option">-y <em class="replaceable"><code>[<span class="optional">hmac:</span>]keyname:secret</code></em></code>] |  [<code class="option">-k <em class="replaceable"><code>keyfile</code></em></code>]] [<code class="option">-t <em class="replaceable"><code>timeout</code></em></code>] [<code class="option">-u <em class="replaceable"><code>udptimeout</code></em></code>] [<code class="option">-r <em class="replaceable"><code>udpretries</code></em></code>] [<code class="option">-v</code>] [filename]</p></div>
</div>
<div class="refsect1" lang="en">
<a name="id2543417"></a><h2>DESCRIPTION</h2>
<p><span><strong class="command">nsupdate</strong></span>
      is used to submit Dynamic DNS Update requests as defined in RFC2136
      to a name server.
      This allows resource records to be added or removed from a zone
      without manually editing the zone file.
      A single update request can contain requests to add or remove more than
      one
      resource record.
    </p>
<p>
      Zones that are under dynamic control via
      <span><strong class="command">nsupdate</strong></span>
      or a DHCP server should not be edited by hand.
      Manual edits could
      conflict with dynamic updates and cause data to be lost.
    </p>
<p>
      The resource records that are dynamically added or removed with
      <span><strong class="command">nsupdate</strong></span>
      have to be in the same zone.
      Requests are sent to the zone's master server.
      This is identified by the MNAME field of the zone's SOA record.
    </p>
<p>
      The
      <code class="option">-d</code>
      option makes
      <span><strong class="command">nsupdate</strong></span>
      operate in debug mode.
      This provides tracing information about the update requests that are
      made and the replies received from the name server.
    </p>
<p>
      Transaction signatures can be used to authenticate the Dynamic DNS
      updates.
      These use the TSIG resource record type described in RFC2845 or the
      SIG(0) record described in RFC3535 and RFC2931.
      TSIG relies on a shared secret that should only be known to
      <span><strong class="command">nsupdate</strong></span> and the name server.
      Currently, the only supported encryption algorithm for TSIG is
      HMAC-MD5, which is defined in RFC 2104.
      Once other algorithms are defined for TSIG, applications will need to
      ensure they select the appropriate algorithm as well as the key when
      authenticating each other.
      For instance, suitable
      <span class="type">key</span>
      and
      <span class="type">server</span>
      statements would be added to
      <code class="filename">/etc/named.conf</code>
      so that the name server can associate the appropriate secret key
      and algorithm with the IP address of the
      client application that will be using TSIG authentication.
      SIG(0) uses public key cryptography.  To use a SIG(0) key, the public
      key must be stored in a KEY record in a zone served by the name server.
      <span><strong class="command">nsupdate</strong></span>
      does not read
      <code class="filename">/etc/named.conf</code>.
    </p>
<p><span><strong class="command">nsupdate</strong></span>
      uses the <code class="option">-y</code> or <code class="option">-k</code> option
      to provide the shared secret needed to generate a TSIG record
      for authenticating Dynamic DNS update requests, default type
      HMAC-MD5.  These options are mutually exclusive.  With the
      <code class="option">-k</code> option, <span><strong class="command">nsupdate</strong></span> reads
      the shared secret from the file <em class="parameter"><code>keyfile</code></em>,
      whose name is of the form
      <code class="filename">K{name}.+157.+{random}.private</code>.  For
      historical reasons, the file
      <code class="filename">K{name}.+157.+{random}.key</code> must also be
      present.  When the <code class="option">-y</code> option is used, a
      signature is generated from
      [<span class="optional"><em class="parameter"><code>hmac:</code></em></span>]<em class="parameter"><code>keyname:secret.</code></em>
      <em class="parameter"><code>keyname</code></em> is the name of the key, and
      <em class="parameter"><code>secret</code></em> is the base64 encoded shared
      secret.  Use of the <code class="option">-y</code> option is discouraged
      because the shared secret is supplied as a command line
      argument in clear text.  This may be visible in the output
      from
      <span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span> or in a history file maintained by the user's
      shell.
    </p>
<p>
      The <code class="option">-k</code> may also be used to specify a SIG(0) key used
      to authenticate Dynamic DNS update requests.  In this case, the key
      specified is not an HMAC-MD5 key.
    </p>
<p>
      By default
      <span><strong class="command">nsupdate</strong></span>
      uses UDP to send update requests to the name server unless they are too
      large to fit in a UDP request in which case TCP will be used.
      The
      <code class="option">-v</code>
      option makes
      <span><strong class="command">nsupdate</strong></span>
      use a TCP connection.
      This may be preferable when a batch of update requests is made.
    </p>
<p>
      The <code class="option">-t</code> option sets the maximum time an update request
      can
      take before it is aborted.  The default is 300 seconds.  Zero can be
      used
      to disable the timeout.
    </p>
<p>
      The <code class="option">-u</code> option sets the UDP retry interval.  The default
      is
      3 seconds.  If zero, the interval will be computed from the timeout
      interval
      and number of UDP retries.
    </p>
<p>
      The <code class="option">-r</code> option sets the number of UDP retries. The
      default is
      3.  If zero, only one update request will be made.
    </p>
</div>
<div class="refsect1" lang="en">
<a name="id2543645"></a><h2>INPUT FORMAT</h2>
<p><span><strong class="command">nsupdate</strong></span>
      reads input from
      <em class="parameter"><code>filename</code></em>
      or standard input.
      Each command is supplied on exactly one line of input.
      Some commands are for administrative purposes.
      The others are either update instructions or prerequisite checks on the
      contents of the zone.
      These checks set conditions that some name or set of
      resource records (RRset) either exists or is absent from the zone.
      These conditions must be met if the entire update request is to succeed.
      Updates will be rejected if the tests for the prerequisite conditions
      fail.
    </p>
<p>
      Every update request consists of zero or more prerequisites
      and zero or more updates.
      This allows a suitably authenticated update request to proceed if some
      specified resource records are present or missing from the zone.
      A blank input line (or the <span><strong class="command">send</strong></span> command)
      causes the
      accumulated commands to be sent as one Dynamic DNS update request to the
      name server.
    </p>
<p>
      The command formats and their meaning are as follows:
      </p>
<div class="variablelist"><dl>
<dt><span class="term">
              <span><strong class="command">server</strong></span>
               {servername}
               [port]
            </span></dt>
<dd><p>
              Sends all dynamic update requests to the name server
              <em class="parameter"><code>servername</code></em>.
              When no server statement is provided,
              <span><strong class="command">nsupdate</strong></span>
              will send updates to the master server of the correct zone.
              The MNAME field of that zone's SOA record will identify the
              master
              server for that zone.
              <em class="parameter"><code>port</code></em>
              is the port number on
              <em class="parameter"><code>servername</code></em>
              where the dynamic update requests get sent.
              If no port number is specified, the default DNS port number of
              53 is
              used.
            </p></dd>
<dt><span class="term">
              <span><strong class="command">local</strong></span>
               {address}
               [port]
            </span></dt>
<dd><p>
              Sends all dynamic update requests using the local
              <em class="parameter"><code>address</code></em>.

              When no local statement is provided,
              <span><strong class="command">nsupdate</strong></span>
              will send updates using an address and port chosen by the
              system.
              <em class="parameter"><code>port</code></em>
              can additionally be used to make requests come from a specific
              port.
              If no port number is specified, the system will assign one.
            </p></dd>
<dt><span class="term">
              <span><strong class="command">zone</strong></span>
               {zonename}
            </span></dt>
<dd><p>
              Specifies that all updates are to be made to the zone
              <em class="parameter"><code>zonename</code></em>.
              If no
              <em class="parameter"><code>zone</code></em>
              statement is provided,
              <span><strong class="command">nsupdate</strong></span>
              will attempt determine the correct zone to update based on the
              rest of the input.
            </p></dd>
<dt><span class="term">
              <span><strong class="command">class</strong></span>
               {classname}
            </span></dt>
<dd><p>
              Specify the default class.
              If no <em class="parameter"><code>class</code></em> is specified, the
              default class is
              <em class="parameter"><code>IN</code></em>.
            </p></dd>
<dt><span class="term">
              <span><strong class="command">key</strong></span>
               {name}
               {secret}
            </span></dt>
<dd><p>
              Specifies that all updates are to be TSIG-signed using the
              <em class="parameter"><code>keyname</code></em> <em class="parameter"><code>keysecret</code></em> pair.
              The <span><strong class="command">key</strong></span> command
              overrides any key specified on the command line via
              <code class="option">-y</code> or <code class="option">-k</code>.
            </p></dd>
<dt><span class="term">
              <span><strong class="command">prereq nxdomain</strong></span>
               {domain-name}
            </span></dt>
<dd><p>
              Requires that no resource record of any type exists with name
              <em class="parameter"><code>domain-name</code></em>.
            </p></dd>
<dt><span class="term">
              <span><strong class="command">prereq yxdomain</strong></span>
               {domain-name}
            </span></dt>
<dd><p>
              Requires that
              <em class="parameter"><code>domain-name</code></em>
              exists (has as at least one resource record, of any type).
            </p></dd>
<dt><span class="term">
              <span><strong class="command">prereq nxrrset</strong></span>
               {domain-name}
               [class]
               {type}
            </span></dt>
<dd><p>
              Requires that no resource record exists of the specified
              <em class="parameter"><code>type</code></em>,
              <em class="parameter"><code>class</code></em>
              and
              <em class="parameter"><code>domain-name</code></em>.
              If
              <em class="parameter"><code>class</code></em>
              is omitted, IN (internet) is assumed.
            </p></dd>
<dt><span class="term">
              <span><strong class="command">prereq yxrrset</strong></span>
               {domain-name}
               [class]
               {type}
            </span></dt>
<dd><p>
              This requires that a resource record of the specified
              <em class="parameter"><code>type</code></em>,
              <em class="parameter"><code>class</code></em>
              and
              <em class="parameter"><code>domain-name</code></em>
              must exist.
              If
              <em class="parameter"><code>class</code></em>
              is omitted, IN (internet) is assumed.
            </p></dd>
<dt><span class="term">
              <span><strong class="command">prereq yxrrset</strong></span>
               {domain-name}
               [class]
               {type}
               {data...}
            </span></dt>
<dd><p>
              The
              <em class="parameter"><code>data</code></em>
              from each set of prerequisites of this form
              sharing a common
              <em class="parameter"><code>type</code></em>,
              <em class="parameter"><code>class</code></em>,
              and
              <em class="parameter"><code>domain-name</code></em>
              are combined to form a set of RRs.  This set of RRs must
              exactly match the set of RRs existing in the zone at the
              given
              <em class="parameter"><code>type</code></em>,
              <em class="parameter"><code>class</code></em>,
              and
              <em class="parameter"><code>domain-name</code></em>.
              The
              <em class="parameter"><code>data</code></em>
              are written in the standard text representation of the resource
              record's
              RDATA.
            </p></dd>
<dt><span class="term">
              <span><strong class="command">update delete</strong></span>
               {domain-name}
               [ttl]
               [class]
               [type [data...]]
            </span></dt>
<dd><p>
              Deletes any resource records named
              <em class="parameter"><code>domain-name</code></em>.
              If
              <em class="parameter"><code>type</code></em>
              and
              <em class="parameter"><code>data</code></em>
              is provided, only matching resource records will be removed.
              The internet class is assumed if
              <em class="parameter"><code>class</code></em>
              is not supplied.  The
              <em class="parameter"><code>ttl</code></em>
              is ignored, and is only allowed for compatibility.
            </p></dd>
<dt><span class="term">
              <span><strong class="command">update add</strong></span>
               {domain-name}
               {ttl}
               [class]
               {type}
               {data...}
            </span></dt>
<dd><p>
              Adds a new resource record with the specified
              <em class="parameter"><code>ttl</code></em>,
              <em class="parameter"><code>class</code></em>
              and
              <em class="parameter"><code>data</code></em>.
            </p></dd>
<dt><span class="term">
              <span><strong class="command">show</strong></span>
            </span></dt>
<dd><p>
              Displays the current message, containing all of the
              prerequisites and
              updates specified since the last send.
            </p></dd>
<dt><span class="term">
              <span><strong class="command">send</strong></span>
            </span></dt>
<dd><p>
              Sends the current message.  This is equivalent to entering a
              blank line.
            </p></dd>
<dt><span class="term">
              <span><strong class="command">answer</strong></span>
            </span></dt>
<dd><p>
              Displays the answer.
            </p></dd>
</dl></div>
<p>
    </p>
<p>
      Lines beginning with a semicolon are comments and are ignored.
    </p>
</div>
<div class="refsect1" lang="en">
<a name="id2544648"></a><h2>EXAMPLES</h2>
<p>
      The examples below show how
      <span><strong class="command">nsupdate</strong></span>
      could be used to insert and delete resource records from the
      <span class="type">example.com</span>
      zone.
      Notice that the input in each example contains a trailing blank line so
      that
      a group of commands are sent as one dynamic update request to the
      master name server for
      <span class="type">example.com</span>.

      </p>
<pre class="programlisting">
# nsupdate
&gt; update delete oldhost.example.com A
&gt; update add newhost.example.com 86400 A 172.16.1.1
&gt; send
</pre>
<p>
    </p>
<p>
      Any A records for
      <span class="type">oldhost.example.com</span>
      are deleted.
      And an A record for
      <span class="type">newhost.example.com</span>
      with IP address 172.16.1.1 is added.
      The newly-added record has a 1 day TTL (86400 seconds).
      </p>
<pre class="programlisting">
# nsupdate
&gt; prereq nxdomain nickname.example.com
&gt; update add nickname.example.com 86400 CNAME somehost.example.com
&gt; send
</pre>
<p>
    </p>
<p>
      The prerequisite condition gets the name server to check that there
      are no resource records of any type for
      <span class="type">nickname.example.com</span>.

      If there are, the update request fails.
      If this name does not exist, a CNAME for it is added.
      This ensures that when the CNAME is added, it cannot conflict with the
      long-standing rule in RFC1034 that a name must not exist as any other
      record type if it exists as a CNAME.
      (The rule has been updated for DNSSEC in RFC2535 to allow CNAMEs to have
      RRSIG, DNSKEY and NSEC records.)
    </p>
</div>
<div class="refsect1" lang="en">
<a name="id2544692"></a><h2>FILES</h2>
<div class="variablelist"><dl>
<dt><span class="term"><code class="constant">/etc/resolv.conf</code></span></dt>
<dd><p>
            used to identify default name server
          </p></dd>
<dt><span class="term"><code class="constant">K{name}.+157.+{random}.key</code></span></dt>
<dd><p>
            base-64 encoding of HMAC-MD5 key created by
            <span class="citerefentry"><span class="refentrytitle">dnssec-keygen</span>(8)</span>.
          </p></dd>
<dt><span class="term"><code class="constant">K{name}.+157.+{random}.private</code></span></dt>
<dd><p>
            base-64 encoding of HMAC-MD5 key created by
            <span class="citerefentry"><span class="refentrytitle">dnssec-keygen</span>(8)</span>.
          </p></dd>
</dl></div>
</div>
<div class="refsect1" lang="en">
<a name="id2544829"></a><h2>SEE ALSO</h2>
<p><span class="citerefentry"><span class="refentrytitle">RFC2136</span></span>,
      <span class="citerefentry"><span class="refentrytitle">RFC3007</span></span>,
      <span class="citerefentry"><span class="refentrytitle">RFC2104</span></span>,
      <span class="citerefentry"><span class="refentrytitle">RFC2845</span></span>,
      <span class="citerefentry"><span class="refentrytitle">RFC1034</span></span>,
      <span class="citerefentry"><span class="refentrytitle">RFC2535</span></span>,
      <span class="citerefentry"><span class="refentrytitle">RFC2931</span></span>,
      <span class="citerefentry"><span class="refentrytitle">named</span>(8)</span>,
      <span class="citerefentry"><span class="refentrytitle">dnssec-keygen</span>(8)</span>.
    </p>
</div>
<div class="refsect1" lang="en">
<a name="id2544900"></a><h2>BUGS</h2>
<p>
      The TSIG key is redundantly stored in two separate files.
      This is a consequence of nsupdate using the DST library
      for its cryptographic operations, and may change in future
      releases.
    </p>
</div>
</div></body>
</html>
@


1.7
log
@resolve conflicts
@
text
@@


1.6
log
@resolve conflicts and regen configure script
@
text
@d2 1
a2 1
 - Copyright (C) 2004, 2005 Internet Systems Consortium, Inc. ("ISC")
d17 1
a17 1
<!-- $ISC: nsupdate.html,v 1.9.2.3.2.15 2006/06/29 13:02:30 marka Exp $ -->
d22 1
a22 1
<meta name="generator" content="DocBook XSL Stylesheets V1.70.1">
d25 1
a25 1
<a name="id2482688"></a><div class="titlepage"></div>
d32 1
a32 1
<div class="cmdsynopsis"><p><code class="command">nsupdate</code>  [<code class="option">-d</code>] [[<code class="option">-y <em class="replaceable"><code>keyname:secret</code></em></code>] |  [<code class="option">-k <em class="replaceable"><code>keyfile</code></em></code>]] [<code class="option">-t <em class="replaceable"><code>timeout</code></em></code>] [<code class="option">-u <em class="replaceable"><code>udptimeout</code></em></code>] [<code class="option">-r <em class="replaceable"><code>udpretries</code></em></code>] [<code class="option">-v</code>] [filename]</p></div>
d35 119
a153 126
<a name="id2549461"></a><h2>DESCRIPTION</h2>
<p>
<span><strong class="command">nsupdate</strong></span>
is used to submit Dynamic DNS Update requests as defined in RFC2136
to a name server.
This allows resource records to be added or removed from a zone
without manually editing the zone file.
A single update request can contain requests to add or remove more than one
resource record.
</p>
<p>
Zones that are under dynamic control via
<span><strong class="command">nsupdate</strong></span>
or a DHCP server should not be edited by hand.
Manual edits could
conflict with dynamic updates and cause data to be lost.
</p>
<p>
The resource records that are dynamically added or removed with
<span><strong class="command">nsupdate</strong></span>
have to be in the same zone.
Requests are sent to the zone's master server.
This is identified by the MNAME field of the zone's SOA record.
</p>
<p>
The
<code class="option">-d</code>
option makes
<span><strong class="command">nsupdate</strong></span>
operate in debug mode.
This provides tracing information about the update requests that are
made and the replies received from the name server.
</p>
<p>
Transaction signatures can be used to authenticate the Dynamic DNS
updates.
These use the TSIG resource record type described in RFC2845 or the
SIG(0) record described in RFC3535 and RFC2931.
TSIG relies on a shared secret that should only be known to
<span><strong class="command">nsupdate</strong></span> and the name server.
Currently, the only supported encryption algorithm for TSIG is
HMAC-MD5, which is defined in RFC 2104.
Once other algorithms are defined for TSIG, applications will need to
ensure they select the appropriate algorithm as well as the key when
authenticating each other.
For instance suitable
<span class="type">key</span>
and
<span class="type">server</span>
statements would be added to
<code class="filename">/etc/named.conf</code>
so that the name server can associate the appropriate secret key
and algorithm with the IP address of the
client application that will be using TSIG authentication.
SIG(0) uses public key cryptography.  To use a SIG(0) key, the public
key must be stored in a KEY record in a zone served by the name server.
<span><strong class="command">nsupdate</strong></span>
does not read
<code class="filename">/etc/named.conf</code>.
</p>
<p>
<span><strong class="command">nsupdate</strong></span>
uses the
<code class="option">-y</code>
or
<code class="option">-k</code>
option (with an HMAC-MD5 key) to provide the shared secret needed to generate
a TSIG record for authenticating Dynamic DNS update requests.
These options are mutually exclusive.
With the
<code class="option">-k</code>
option,
<span><strong class="command">nsupdate</strong></span>
reads the shared secret from the file
<em class="parameter"><code>keyfile</code></em>,
whose name is of the form 
<code class="filename">K{name}.+157.+{random}.private</code>.
For historical
reasons, the file 
<code class="filename">K{name}.+157.+{random}.key</code>
must also be present.  When the
<code class="option">-y</code>
option is used, a signature is generated from
<em class="parameter"><code>keyname:secret.</code></em>
<em class="parameter"><code>keyname</code></em>
is the name of the key,
and
<em class="parameter"><code>secret</code></em>
is the base64 encoded shared secret.
Use of the
<code class="option">-y</code>
option is discouraged because the shared secret is supplied as a command
line argument in clear text.
This may be visible in the output from
<span class="citerefentry"><span class="refentrytitle">ps</span>(1
)</span>
or in a history file maintained by the user's shell.
</p>
<p>
The <code class="option">-k</code> may also be used to specify a SIG(0) key used
to authenticate Dynamic DNS update requests.  In this case, the key
specified is not an HMAC-MD5 key.
</p>
<p>
By default
<span><strong class="command">nsupdate</strong></span>
uses UDP to send update requests to the name server unless they are too
large to fit in a UDP request in which case TCP will be used.
The
<code class="option">-v</code>
option makes
<span><strong class="command">nsupdate</strong></span>
use a TCP connection.
This may be preferable when a batch of update requests is made.
</p>
<p>The <code class="option">-t</code> option sets the maximum time a update request can
take before it is aborted.  The default is 300 seconds.  Zero can be used
to disable the timeout.
</p>
<p>The <code class="option">-u</code> option sets the UDP retry interval.  The default is
3 seconds.  If zero the interval will be computed from the timeout interval
and number of UDP retries.
</p>
<p>The <code class="option">-r</code> option sets the number of UDP retries. The default is
3.  If zero only one update request will be made.
</p>
d156 25
a180 24
<a name="id2549686"></a><h2>INPUT FORMAT</h2>
<p>
<span><strong class="command">nsupdate</strong></span>
reads input from
<em class="parameter"><code>filename</code></em>
or standard input.
Each command is supplied on exactly one line of input.
Some commands are for administrative purposes.
The others are either update instructions or prerequisite checks on the
contents of the zone.
These checks set conditions that some name or set of
resource records (RRset) either exists or is absent from the zone.
These conditions must be met if the entire update request is to succeed.
Updates will be rejected if the tests for the prerequisite conditions fail.
</p>
<p>
Every update request consists of zero or more prerequisites
and zero or more updates.
This allows a suitably authenticated update request to proceed if some
specified resource records are present or missing from the zone.
A blank input line (or the <span><strong class="command">send</strong></span> command) causes the
accumulated commands to be sent as one Dynamic DNS update request to the
name server.
</p>
d182 2
a183 2
The command formats and their meaning are as follows:
</p>
d186 26
a211 20
<div class="cmdsynopsis"><p><code class="command">server</code>  {servername} [port]</p></div>
</span></dt>
<dd><p>
Sends all dynamic update requests to the name server
<em class="parameter"><code>servername</code></em>.
When no server statement is provided,
<span><strong class="command">nsupdate</strong></span>
will send updates to the master server of the correct zone.
The MNAME field of that zone's SOA record will identify the master
server for that zone.
<em class="parameter"><code>port</code></em>
is the port number on
<em class="parameter"><code>servername</code></em>
where the dynamic update requests get sent.
If no port number is specified, the default DNS port number of 53 is
used.
</p></dd>
<dt><span class="term">
<div class="cmdsynopsis"><p><code class="command">local</code>  {address} [port]</p></div>
</span></dt>
d213 2
a214 2
Sends all dynamic update requests using the local
<em class="parameter"><code>address</code></em>.
d216 175
a390 143
When no local statement is provided,
<span><strong class="command">nsupdate</strong></span>
will send updates using an address and port chosen by the system.
<em class="parameter"><code>port</code></em>
can additionally be used to make requests come from a specific port.
If no port number is specified, the system will assign one.
</p></dd>
<dt><span class="term">
<div class="cmdsynopsis"><p><code class="command">zone</code>  {zonename}</p></div>
</span></dt>
<dd><p>
Specifies that all updates are to be made to the zone
<em class="parameter"><code>zonename</code></em>.
If no
<em class="parameter"><code>zone</code></em>
statement is provided,
<span><strong class="command">nsupdate</strong></span>
will attempt determine the correct zone to update based on the rest of the input.
</p></dd>
<dt><span class="term">
<div class="cmdsynopsis"><p><code class="command">class</code>  {classname}</p></div>
</span></dt>
<dd><p>
Specify the default class.
If no <em class="parameter"><code>class</code></em> is specified the default class is
<em class="parameter"><code>IN</code></em>.
</p></dd>
<dt><span class="term">
<div class="cmdsynopsis"><p><code class="command">key</code>  {name} {secret}</p></div>
</span></dt>
<dd><p>
Specifies that all updates are to be TSIG signed using the
<em class="parameter"><code>keyname</code></em> <em class="parameter"><code>keysecret</code></em> pair.
The <span><strong class="command">key</strong></span> command
overrides any key specified on the command line via
<code class="option">-y</code> or <code class="option">-k</code>.
</p></dd>
<dt><span class="term">
<div class="cmdsynopsis"><p><code class="command">prereq nxdomain</code>  {domain-name}</p></div>
</span></dt>
<dd><p>
Requires that no resource record of any type exists with name
<em class="parameter"><code>domain-name</code></em>.
</p></dd>
<dt><span class="term">
<div class="cmdsynopsis"><p><code class="command">prereq yxdomain</code>  {domain-name}</p></div>
</span></dt>
<dd><p>
Requires that
<em class="parameter"><code>domain-name</code></em>
exists (has as at least one resource record, of any type).
</p></dd>
<dt><span class="term">
<div class="cmdsynopsis"><p><code class="command">prereq nxrrset</code>  {domain-name} [class] {type}</p></div>
</span></dt>
<dd><p>
Requires that no resource record exists of the specified
<em class="parameter"><code>type</code></em>,
<em class="parameter"><code>class</code></em>
and
<em class="parameter"><code>domain-name</code></em>.
If
<em class="parameter"><code>class</code></em>
is omitted, IN (internet) is assumed.
</p></dd>
<dt><span class="term">
<div class="cmdsynopsis"><p><code class="command">prereq yxrrset</code>  {domain-name} [class] {type}</p></div>
</span></dt>
<dd><p>
This requires that a resource record of the specified
<em class="parameter"><code>type</code></em>,
<em class="parameter"><code>class</code></em>
and
<em class="parameter"><code>domain-name</code></em>
must exist.
If
<em class="parameter"><code>class</code></em>
is omitted, IN (internet) is assumed.
</p></dd>
<dt><span class="term">
<div class="cmdsynopsis"><p><code class="command">prereq yxrrset</code>  {domain-name} [class] {type} {data...}</p></div>
</span></dt>
<dd><p>
The
<em class="parameter"><code>data</code></em>
from each set of prerequisites of this form
sharing a common
<em class="parameter"><code>type</code></em>,
<em class="parameter"><code>class</code></em>,
and 
<em class="parameter"><code>domain-name</code></em>
are combined to form a set of RRs.  This set of RRs must
exactly match the set of RRs existing in the zone at the
given 
<em class="parameter"><code>type</code></em>,
<em class="parameter"><code>class</code></em>,
and 
<em class="parameter"><code>domain-name</code></em>.
The
<em class="parameter"><code>data</code></em>
are written in the standard text representation of the resource record's
RDATA.
</p></dd>
<dt><span class="term">
<div class="cmdsynopsis"><p><code class="command">update delete</code>  {domain-name} [ttl] [class] [type [data...]]</p></div>
</span></dt>
<dd><p>
Deletes any resource records named
<em class="parameter"><code>domain-name</code></em>.
If
<em class="parameter"><code>type</code></em>
and
<em class="parameter"><code>data</code></em>
is provided, only matching resource records will be removed.
The internet class is assumed if
<em class="parameter"><code>class</code></em>
is not supplied.  The
<em class="parameter"><code>ttl</code></em>
is ignored, and is only allowed for compatibility.
</p></dd>
<dt><span class="term">
<div class="cmdsynopsis"><p><code class="command">update add</code>  {domain-name} {ttl} [class] {type} {data...}</p></div>
</span></dt>
<dd><p>
Adds a new resource record with the specified
<em class="parameter"><code>ttl</code></em>,
<em class="parameter"><code>class</code></em>
and
<em class="parameter"><code>data</code></em>.
</p></dd>
<dt><span class="term">
<div class="cmdsynopsis"><p><code class="command">show</code> </p></div>
</span></dt>
<dd><p>
Displays the current message, containing all of the prerequisites and
updates specified since the last send.
</p></dd>
<dt><span class="term">
<div class="cmdsynopsis"><p><code class="command">send</code> </p></div>
</span></dt>
<dd><p>
Sends the current message.  This is equivalent to entering a blank line.
</p></dd>
d392 2
a393 2
<div class="cmdsynopsis"><p><code class="command">answer</code> </p></div>
</span></dt>
d395 2
a396 2
Displays the answer.
</p></dd>
d399 1
a399 1
</p>
d401 2
a402 2
Lines beginning with a semicolon are comments and are ignored.
</p>
d405 1
a405 1
<a name="id2550382"></a><h2>EXAMPLES</h2>
d407 10
a416 9
The examples below show how
<span><strong class="command">nsupdate</strong></span>
could be used to insert and delete resource records from the
<span class="type">example.com</span>
zone.
Notice that the input in each example contains a trailing blank line so that
a group of commands are sent as one dynamic update request to the
master name server for
<span class="type">example.com</span>.
d418 1
a418 1
</p>
d426 1
a426 1
</p>
d428 8
a435 8
Any A records for
<span class="type">oldhost.example.com</span>
are deleted.
and an A record for
<span class="type">newhost.example.com</span>
it IP address 172.16.1.1 is added.
The newly-added record has a 1 day TTL (86400 seconds)
</p>
d443 1
a443 1
</p>
d445 3
a447 3
The prerequisite condition gets the name server to check that there
are no resource records of any type for
<span class="type">nickname.example.com</span>.
d449 8
a456 8
If there are, the update request fails.
If this name does not exist, a CNAME for it is added.
This ensures that when the CNAME is added, it cannot conflict with the
long-standing rule in RFC1034 that a name must not exist as any other
record type if it exists as a CNAME.
(The rule has been updated for DNSSEC in RFC2535 to allow CNAMEs to have
RRSIG, DNSKEY and NSEC records.)
</p>
d459 1
a459 1
<a name="id2550426"></a><h2>FILES</h2>
d463 2
a464 2
used to identify default name server
</p></dd>
d467 3
a469 3
base-64 encoding of HMAC-MD5 key created by
<span class="citerefentry"><span class="refentrytitle">dnssec-keygen</span>(8)</span>.
</p></dd>
d472 3
a474 3
base-64 encoding of HMAC-MD5 key created by
<span class="citerefentry"><span class="refentrytitle">dnssec-keygen</span>(8)</span>.
</p></dd>
d478 11
a488 12
<a name="id2549061"></a><h2>SEE ALSO</h2>
<p>
<span class="citerefentry"><span class="refentrytitle">RFC2136</span></span>,
<span class="citerefentry"><span class="refentrytitle">RFC3007</span></span>,
<span class="citerefentry"><span class="refentrytitle">RFC2104</span></span>,
<span class="citerefentry"><span class="refentrytitle">RFC2845</span></span>,
<span class="citerefentry"><span class="refentrytitle">RFC1034</span></span>,
<span class="citerefentry"><span class="refentrytitle">RFC2535</span></span>,
<span class="citerefentry"><span class="refentrytitle">RFC2931</span></span>,
<span class="citerefentry"><span class="refentrytitle">named</span>(8)</span>,
<span class="citerefentry"><span class="refentrytitle">dnssec-keygen</span>(8)</span>.
</p>
d491 1
a491 1
<a name="id2549132"></a><h2>BUGS</h2>
d493 5
a497 5
The TSIG key is redundantly stored in two separate files.
This is a consequence of nsupdate using the DST library
for its cryptographic operations, and may change in future
releases.
</p>
@


1.5
log
@resolve conflicts
@
text
@d17 1
a17 1
<!-- $ISC: nsupdate.html,v 1.9.2.3.2.12 2005/10/13 02:33:49 marka Exp $ -->
d22 1
a22 1
<meta name="generator" content="DocBook XSL Stylesheets V1.69.1">
d25 1
a25 1
<a name="id2463721"></a><div class="titlepage"></div>
d35 1
a35 1
<a name="id2525896"></a><h2>DESCRIPTION</h2>
d163 1
a163 1
<a name="id2526121"></a><h2>INPUT FORMAT</h2>
d320 1
a320 1
<div class="cmdsynopsis"><p><code class="command">update delete</code>  {domain-name} [ttl] [class] [type  [data...]]</p></div>
d373 1
a373 1
<a name="id2526749"></a><h2>EXAMPLES</h2>
d426 1
a426 1
<a name="id2526793"></a><h2>FILES</h2>
d445 1
a445 1
<a name="id2525155"></a><h2>SEE ALSO</h2>
d459 1
a459 1
<a name="id2525226"></a><h2>BUGS</h2>
@


1.4
log
@resolve conflicts
@
text
@d2 3
a4 3
 - Copyright (C) 2004  Internet Systems Consortium, Inc. ("ISC")
 - Copyright (C) 2001-2003  Internet Software Consortium.
 -
d8 1
a8 1
 -
d11 1
a11 1
 - AND FITNESS.  IN NO EVENT SHALL ISC BE LIABLE FOR ANY SPECIAL, DIRECT,
d17 21
a37 92

<!-- $ISC: nsupdate.html,v 1.9.2.3.2.5 2004/08/22 23:38:59 marka Exp $ -->

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>nsupdate</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"></HEAD
><BODY
CLASS="REFENTRY"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><H1
><A
NAME="AEN1"
></A
>nsupdate</H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN8"
></A
><H2
>Name</H2
>nsupdate&nbsp;--&nbsp;Dynamic DNS update utility</DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="AEN11"
></A
><H2
>Synopsis</H2
><P
><B
CLASS="COMMAND"
>nsupdate</B
>  [<VAR
CLASS="OPTION"
>-d</VAR
>] [<VAR
CLASS="OPTION"
>-y <VAR
CLASS="REPLACEABLE"
>keyname:secret</VAR
></VAR
> | <VAR
CLASS="OPTION"
>-k <VAR
CLASS="REPLACEABLE"
>keyfile</VAR
></VAR
>] [<VAR
CLASS="OPTION"
>-t <VAR
CLASS="REPLACEABLE"
>timeout</VAR
></VAR
>] [<VAR
CLASS="OPTION"
>-u <VAR
CLASS="REPLACEABLE"
>udptimeout</VAR
></VAR
>] [<VAR
CLASS="OPTION"
>-r <VAR
CLASS="REPLACEABLE"
>udpretries</VAR
></VAR
>] [<VAR
CLASS="OPTION"
>-v</VAR
>] [filename]</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN35"
></A
><H2
>DESCRIPTION</H2
><P
><B
CLASS="COMMAND"
>nsupdate</B
>
d43 5
a47 7
resource record.</P
><P
>Zones that are under dynamic control via
<B
CLASS="COMMAND"
>nsupdate</B
>
d50 5
a54 7
conflict with dynamic updates and cause data to be lost.</P
><P
>The resource records that are dynamically added or removed with
<B
CLASS="COMMAND"
>nsupdate</B
>
d57 5
a61 7
This is identified by the MNAME field of the zone's SOA record.</P
><P
>The
<VAR
CLASS="OPTION"
>-d</VAR
>
d63 1
a63 4
<B
CLASS="COMMAND"
>nsupdate</B
>
d66 4
a69 3
made and the replies received from the name server.</P
><P
>Transaction signatures can be used to authenticate the Dynamic DNS
d74 1
a74 4
<B
CLASS="COMMAND"
>nsupdate</B
> and the name server.
d81 1
a81 4
<SPAN
CLASS="TYPE"
>key</SPAN
>
d83 1
a83 4
<SPAN
CLASS="TYPE"
>server</SPAN
>
d85 1
a85 4
<TT
CLASS="FILENAME"
>/etc/named.conf</TT
>
d91 1
a91 4
<B
CLASS="COMMAND"
>nsupdate</B
>
d93 4
a96 9
<TT
CLASS="FILENAME"
>/etc/named.conf</TT
>.</P
><P
><B
CLASS="COMMAND"
>nsupdate</B
>
d98 1
a98 4
<VAR
CLASS="OPTION"
>-y</VAR
>
d100 1
a100 4
<VAR
CLASS="OPTION"
>-k</VAR
>
d105 1
a105 4
<VAR
CLASS="OPTION"
>-k</VAR
>
d107 1
a107 4
<B
CLASS="COMMAND"
>nsupdate</B
>
d109 1
a109 4
<VAR
CLASS="PARAMETER"
>keyfile</VAR
>,
d111 1
a111 4
<TT
CLASS="FILENAME"
>K{name}.+157.+{random}.private</TT
>.
d114 1
a114 4
<TT
CLASS="FILENAME"
>K{name}.+157.+{random}.key</TT
>
d116 1
a116 4
<VAR
CLASS="OPTION"
>-y</VAR
>
d118 2
a119 8
<VAR
CLASS="PARAMETER"
>keyname:secret.</VAR
>
<VAR
CLASS="PARAMETER"
>keyname</VAR
>
d122 1
a122 4
<VAR
CLASS="PARAMETER"
>secret</VAR
>
d125 1
a125 4
<VAR
CLASS="OPTION"
>-y</VAR
>
d129 6
a134 13
<SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>ps</SPAN
>(1)</SPAN
>
or in a history file maintained by the user's shell.</P
><P
>The <VAR
CLASS="OPTION"
>-k</VAR
> may also be used to specify a SIG(0) key used
d136 5
a140 7
specified is not an HMAC-MD5 key.</P
><P
>By default
<B
CLASS="COMMAND"
>nsupdate</B
>
d144 1
a144 4
<VAR
CLASS="OPTION"
>-v</VAR
>
d146 1
a146 4
<B
CLASS="COMMAND"
>nsupdate</B
>
d148 3
a150 6
This may be preferable when a batch of update requests is made.</P
><P
>The <VAR
CLASS="OPTION"
>-t</VAR
> option sets the maximum time a update request can
d152 3
a154 6
to disable the timeout.</P
><P
>The <VAR
CLASS="OPTION"
>-u</VAR
> option sets the UDP retry interval.  The default is
d156 10
a165 20
and number of UDP retries.</P
><P
>The <VAR
CLASS="OPTION"
>-r</VAR
> option sets the number of UDP retries. The default is
3.  If zero only one update request will be made.</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN82"
></A
><H2
>INPUT FORMAT</H2
><P
><B
CLASS="COMMAND"
>nsupdate</B
>
d167 1
a167 4
<VAR
CLASS="PARAMETER"
>filename</VAR
>
d176 4
a179 3
Updates will be rejected if the tests for the prerequisite conditions fail.</P
><P
>Every update request consists of zero or more prerequisites
d183 1
a183 4
A blank input line (or the <B
CLASS="COMMAND"
>send</B
> command) causes the
d185 12
a196 22
name server.</P
><P
>The command formats and their meaning are as follows:
<P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><P
><B
CLASS="COMMAND"
>server</B
>  {servername} [port]</P
></DT
><DD
><P
>Sends all dynamic update requests to the name server
<VAR
CLASS="PARAMETER"
>servername</VAR
>.
d198 1
a198 4
<B
CLASS="COMMAND"
>nsupdate</B
>
d202 1
a202 4
<VAR
CLASS="PARAMETER"
>port</VAR
>
d204 1
a204 4
<VAR
CLASS="PARAMETER"
>servername</VAR
>
d207 8
a214 16
used.</P
></DD
><DT
><P
><B
CLASS="COMMAND"
>local</B
>  {address} [port]</P
></DT
><DD
><P
>Sends all dynamic update requests using the local
<VAR
CLASS="PARAMETER"
>address</VAR
>.
d217 1
a217 4
<B
CLASS="COMMAND"
>nsupdate</B
>
d219 1
a219 4
<VAR
CLASS="PARAMETER"
>port</VAR
>
d221 8
a228 16
If no port number is specified, the system will assign one.&#13;</P
></DD
><DT
><P
><B
CLASS="COMMAND"
>zone</B
>  {zonename}</P
></DT
><DD
><P
>Specifies that all updates are to be made to the zone
<VAR
CLASS="PARAMETER"
>zonename</VAR
>.
d230 1
a230 4
<VAR
CLASS="PARAMETER"
>zone</VAR
>
d232 18
a249 46
<B
CLASS="COMMAND"
>nsupdate</B
>
will attempt determine the correct zone to update based on the rest of the input.</P
></DD
><DT
><P
><B
CLASS="COMMAND"
>class</B
>  {classname}</P
></DT
><DD
><P
>Specify the default class.
If no <VAR
CLASS="PARAMETER"
>class</VAR
> is specified the default class is
<VAR
CLASS="PARAMETER"
>IN</VAR
>.</P
></DD
><DT
><P
><B
CLASS="COMMAND"
>key</B
>  {name} {secret}</P
></DT
><DD
><P
>Specifies that all updates are to be TSIG signed using the
<VAR
CLASS="PARAMETER"
>keyname</VAR
> <VAR
CLASS="PARAMETER"
>keysecret</VAR
> pair.
The <B
CLASS="COMMAND"
>key</B
> command
d251 24
a274 57
<VAR
CLASS="OPTION"
>-y</VAR
> or <VAR
CLASS="OPTION"
>-k</VAR
>.</P
></DD
><DT
><P
><B
CLASS="COMMAND"
>prereq nxdomain</B
>  {domain-name}</P
></DT
><DD
><P
>Requires that no resource record of any type exists with name
<VAR
CLASS="PARAMETER"
>domain-name</VAR
>.</P
></DD
><DT
><P
><B
CLASS="COMMAND"
>prereq yxdomain</B
>  {domain-name}</P
></DT
><DD
><P
>Requires that
<VAR
CLASS="PARAMETER"
>domain-name</VAR
>
exists (has as at least one resource record, of any type).</P
></DD
><DT
><P
><B
CLASS="COMMAND"
>prereq nxrrset</B
>  {domain-name} [class] {type}</P
></DT
><DD
><P
>Requires that no resource record exists of the specified
<VAR
CLASS="PARAMETER"
>type</VAR
>,
<VAR
CLASS="PARAMETER"
>class</VAR
>
d276 1
a276 4
<VAR
CLASS="PARAMETER"
>domain-name</VAR
>.
d278 10
a287 24
<VAR
CLASS="PARAMETER"
>class</VAR
>
is omitted, IN (internet) is assumed.</P
></DD
><DT
><P
><B
CLASS="COMMAND"
>prereq yxrrset</B
>  {domain-name} [class] {type}</P
></DT
><DD
><P
>This requires that a resource record of the specified
<VAR
CLASS="PARAMETER"
>type</VAR
>,
<VAR
CLASS="PARAMETER"
>class</VAR
>
d289 1
a289 4
<VAR
CLASS="PARAMETER"
>domain-name</VAR
>
d292 9
a300 20
<VAR
CLASS="PARAMETER"
>class</VAR
>
is omitted, IN (internet) is assumed.</P
></DD
><DT
><P
><B
CLASS="COMMAND"
>prereq yxrrset</B
>  {domain-name} [class] {type} {data...}</P
></DT
><DD
><P
>The
<VAR
CLASS="PARAMETER"
>data</VAR
>
d303 2
a304 8
<VAR
CLASS="PARAMETER"
>type</VAR
>,
<VAR
CLASS="PARAMETER"
>class</VAR
>,
d306 1
a306 4
<VAR
CLASS="PARAMETER"
>domain-name</VAR
>
d310 2
a311 8
<VAR
CLASS="PARAMETER"
>type</VAR
>,
<VAR
CLASS="PARAMETER"
>class</VAR
>,
d313 1
a313 4
<VAR
CLASS="PARAMETER"
>domain-name</VAR
>.
d315 1
a315 4
<VAR
CLASS="PARAMETER"
>data</VAR
>
d317 8
a324 16
RDATA.</P
></DD
><DT
><P
><B
CLASS="COMMAND"
>update delete</B
>  {domain-name} [ttl] [class] [type  [data...]]</P
></DT
><DD
><P
>Deletes any resource records named
<VAR
CLASS="PARAMETER"
>domain-name</VAR
>.
d326 1
a326 4
<VAR
CLASS="PARAMETER"
>type</VAR
>
d328 1
a328 4
<VAR
CLASS="PARAMETER"
>data</VAR
>
d331 1
a331 4
<VAR
CLASS="PARAMETER"
>class</VAR
>
d333 10
a342 24
<VAR
CLASS="PARAMETER"
>ttl</VAR
>
is ignored, and is only allowed for compatibility.</P
></DD
><DT
><P
><B
CLASS="COMMAND"
>update add</B
>  {domain-name} {ttl} [class] {type} {data...}</P
></DT
><DD
><P
>Adds a new resource record with the specified
<VAR
CLASS="PARAMETER"
>ttl</VAR
>,
<VAR
CLASS="PARAMETER"
>class</VAR
>
d344 33
a376 58
<VAR
CLASS="PARAMETER"
>data</VAR
>.</P
></DD
><DT
><P
><B
CLASS="COMMAND"
>show</B
> </P
></DT
><DD
><P
>Displays the current message, containing all of the prerequisites and
updates specified since the last send.</P
></DD
><DT
><P
><B
CLASS="COMMAND"
>send</B
> </P
></DT
><DD
><P
>Sends the current message.  This is equivalent to entering a blank line.</P
></DD
><DT
><P
><B
CLASS="COMMAND"
>answer</B
> </P
></DT
><DD
><P
>Displays the answer.</P
></DD
></DL
></DIV
>&#13;</P
><P
>Lines beginning with a semicolon are comments and are ignored.</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN255"
></A
><H2
>EXAMPLES</H2
><P
>The examples below show how
<B
CLASS="COMMAND"
>nsupdate</B
>
d378 1
a378 4
<SPAN
CLASS="TYPE"
>example.com</SPAN
>
d383 1
a383 4
<SPAN
CLASS="TYPE"
>example.com</SPAN
>.
d385 12
a396 13
<PRE
CLASS="PROGRAMLISTING"
># nsupdate
&#62; update delete oldhost.example.com A
&#62; update add newhost.example.com 86400 A 172.16.1.1
&#62; send</PRE
></P
><P
>Any A records for
<SPAN
CLASS="TYPE"
>oldhost.example.com</SPAN
>
d399 1
a399 4
<SPAN
CLASS="TYPE"
>newhost.example.com</SPAN
>
d402 11
a412 9
<PRE
CLASS="PROGRAMLISTING"
># nsupdate
&#62; prereq nxdomain nickname.example.com
&#62; update add nickname.example.com 86400 CNAME somehost.example.com
&#62; send</PRE
></P
><P
>The prerequisite condition gets the name server to check that there
d414 1
a414 4
<SPAN
CLASS="TYPE"
>nickname.example.com</SPAN
>.
d422 40
a461 139
RRSIG, DNSKEY and NSEC records.)</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN268"
></A
><H2
>FILES</H2
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><CODE
CLASS="CONSTANT"
>/etc/resolv.conf</CODE
></DT
><DD
><P
>used to identify default name server</P
></DD
><DT
><CODE
CLASS="CONSTANT"
>K{name}.+157.+{random}.key</CODE
></DT
><DD
><P
>base-64 encoding of HMAC-MD5 key created by
<SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>dnssec-keygen</SPAN
>(8)</SPAN
>.</P
></DD
><DT
><CODE
CLASS="CONSTANT"
>K{name}.+157.+{random}.private</CODE
></DT
><DD
><P
>base-64 encoding of HMAC-MD5 key created by
<SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>dnssec-keygen</SPAN
>(8)</SPAN
>.</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN292"
></A
><H2
>SEE ALSO</H2
><P
><SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>RFC2136</SPAN
></SPAN
>,
<SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>RFC3007</SPAN
></SPAN
>,
<SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>RFC2104</SPAN
></SPAN
>,
<SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>RFC2845</SPAN
></SPAN
>,
<SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>RFC1034</SPAN
></SPAN
>,
<SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>RFC2535</SPAN
></SPAN
>,
<SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>RFC2931</SPAN
></SPAN
>,
<SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>named</SPAN
>(8)</SPAN
>,
<SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>dnssec-keygen</SPAN
>(8)</SPAN
>.&#13;</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN315"
></A
><H2
>BUGS</H2
><P
>The TSIG key is redundantly stored in two separate files.
d464 5
a468 5
releases.</P
></DIV
></BODY
></HTML
>
@


1.3
log
@update to BIND v9.2.3. ok todd@@
@
text
@d2 3
a4 2
 - Copyright (C) 2000, 2001  Internet Software Consortium.
 - 
d8 8
a15 9
 - 
 - THE SOFTWARE IS PROVIDED "AS IS" AND INTERNET SOFTWARE CONSORTIUM
 - DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL
 - IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL
 - INTERNET SOFTWARE CONSORTIUM BE LIABLE FOR ANY SPECIAL, DIRECT,
 - INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING
 - FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT,
 - NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION
 - WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
d17 4
d27 1
a27 2
CONTENT="Modular DocBook HTML Stylesheet Version 1.73
"></HEAD
d38 2
a39 2
>nsupdate</A
></H1
d59 10
a68 1
>  [<TT
d70 11
a80 2
>-d</TT
>] [<TT
d82 1
a82 1
>-y <TT
d84 3
a86 5
><I
>keyname:secret</I
></TT
></TT
> | <TT
d88 1
a88 1
>-k <TT
d90 3
a92 5
><I
>keyfile</I
></TT
></TT
>] [<TT
d94 1
a94 1
>-v</TT
d100 1
a100 1
NAME="AEN26"
d135 1
a135 1
<TT
d137 1
a137 1
>-d</TT
d150 3
a152 2
These use the TSIG resource record type described in RFC2845.
The signatures rely on a shared secret that should only be known to
d156 1
a156 2
>
and the name server.
d180 2
d197 1
a197 1
<TT
d199 1
a199 1
>-y</TT
d202 1
a202 1
<TT
d204 1
a204 1
>-k</TT
d206 2
a207 2
option to provide the shared secret needed to generate a TSIG record
for authenticating Dynamic DNS update requests.
d210 1
a210 1
<TT
d212 1
a212 1
>-k</TT
d220 1
a220 1
<TT
d222 1
a222 3
><I
>keyfile</I
></TT
d236 1
a236 1
<TT
d238 1
a238 1
>-y</TT
d241 1
a241 1
<TT
d243 1
a243 3
><I
>keyname:secret.</I
></TT
d245 1
a245 1
<TT
d247 1
a247 3
><I
>keyname</I
></TT
d251 1
a251 1
<TT
d253 1
a253 3
><I
>secret</I
></TT
d257 1
a257 1
<TT
d259 1
a259 1
>-y</TT
d273 7
d285 2
a286 1
uses UDP to send update requests to the name server.
d288 1
a288 1
<TT
d290 1
a290 1
>-v</TT
d299 20
d323 1
a323 1
NAME="AEN65"
d333 1
a333 1
<TT
d335 1
a335 3
><I
>filename</I
></TT
d374 1
a374 1
<TT
d376 1
a376 3
><I
>servername</I
></TT
d386 1
a386 1
<TT
d388 1
a388 3
><I
>port</I
></TT
d391 1
a391 1
<TT
d393 1
a393 3
><I
>servername</I
></TT
d409 1
a409 1
<TT
d411 1
a411 3
><I
>address</I
></TT
d420 1
a420 1
<TT
d422 1
a422 3
><I
>port</I
></TT
d437 1
a437 1
<TT
d439 1
a439 3
><I
>zonename</I
></TT
d442 1
a442 1
<TT
d444 1
a444 3
><I
>zone</I
></TT
d457 19
d482 4
a485 1
<TT
d487 1
a487 8
><I
>keyname</I
></TT
> <TT
CLASS="PARAMETER"
><I
>keysecret</I
></TT
d494 1
a494 1
<TT
d496 2
a497 2
>-y</TT
> or <TT
d499 1
a499 1
>-k</TT
d512 1
a512 1
<TT
d514 1
a514 3
><I
>domain-name</I
></TT
d527 1
a527 1
<TT
d529 1
a529 3
><I
>domain-name</I
></TT
d543 1
a543 1
<TT
d545 1
a545 3
><I
>type</I
></TT
d547 1
a547 1
<TT
d549 1
a549 3
><I
>class</I
></TT
d552 1
a552 1
<TT
d554 1
a554 3
><I
>domain-name</I
></TT
d557 1
a557 1
<TT
d559 1
a559 3
><I
>class</I
></TT
d561 1
a561 2
is omitted, IN (internet) is assumed.
&#13;</P
d573 1
a573 1
<TT
d575 1
a575 3
><I
>type</I
></TT
d577 1
a577 1
<TT
d579 1
a579 3
><I
>class</I
></TT
d582 1
a582 1
<TT
d584 1
a584 3
><I
>domain-name</I
></TT
d588 1
a588 1
<TT
d590 1
a590 3
><I
>class</I
></TT
d604 1
a604 1
<TT
d606 1
a606 3
><I
>data</I
></TT
d610 1
a610 1
<TT
d612 1
a612 3
><I
>type</I
></TT
d614 1
a614 1
<TT
d616 1
a616 3
><I
>class</I
></TT
d619 1
a619 1
<TT
d621 1
a621 3
><I
>domain-name</I
></TT
d626 1
a626 1
<TT
d628 1
a628 3
><I
>type</I
></TT
d630 1
a630 1
<TT
d632 1
a632 3
><I
>class</I
></TT
d635 1
a635 1
<TT
d637 1
a637 3
><I
>domain-name</I
></TT
d640 1
a640 1
<TT
d642 1
a642 3
><I
>data</I
></TT
d657 1
a657 1
<TT
d659 1
a659 3
><I
>domain-name</I
></TT
d662 1
a662 1
<TT
d664 1
a664 3
><I
>type</I
></TT
d667 1
a667 1
<TT
d669 1
a669 3
><I
>data</I
></TT
d673 1
a673 1
<TT
d675 1
a675 3
><I
>class</I
></TT
d678 1
a678 1
<TT
d680 1
a680 3
><I
>ttl</I
></TT
d694 1
a694 1
<TT
d696 1
a696 3
><I
>ttl</I
></TT
d698 1
a698 1
<TT
d700 1
a700 3
><I
>class</I
></TT
d703 1
a703 1
<TT
d705 1
a705 3
><I
>data</I
></TT
d731 11
d746 1
a746 1
>Lines beginning with a semicolon are comments, and are ignored.</P
d751 1
a751 1
NAME="AEN223"
d780 1
a780 1
&#62;</PRE
d801 1
a801 1
&#62;</PRE
d817 1
a817 1
SIG, KEY and NXT records.)</P
d822 1
a822 1
NAME="AEN236"
d832 1
a832 1
><TT
d834 1
a834 1
>/etc/resolv.conf</TT
d841 1
a841 1
><TT
d843 1
a843 1
>K{name}.+157.+{random}.key</TT
d857 1
a857 1
><TT
d859 1
a859 1
>K{name}.+157.+{random}.private</TT
d878 1
a878 1
NAME="AEN260"
d929 7
d950 1
a950 1
NAME="AEN281"
@


1.2
log
@update to BIND 9.2.2-release. ok millert@@
@
text
@d390 1
a390 1
will send updates using an address and port choosen by the system.
@


1.1
log
@Initial revision
@
text
@d23 1
a23 1
CONTENT="Modular DocBook HTML Stylesheet Version 1.61
d959 1
a959 1
>@


1.1.1.1
log
@ISC BIND version 9.2.2rc1
@
text
@@


1.1.1.2
log
@ISC BIND version 9.3.0. ok deraadt@@
@
text
@d2 2
a3 3
 - Copyright (C) 2004  Internet Systems Consortium, Inc. ("ISC")
 - Copyright (C) 2001-2003  Internet Software Consortium.
 -
d7 9
a15 8
 -
 - THE SOFTWARE IS PROVIDED "AS IS" AND ISC DISCLAIMS ALL WARRANTIES WITH
 - REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
 - AND FITNESS.  IN NO EVENT SHALL ISC BE LIABLE FOR ANY SPECIAL, DIRECT,
 - INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
 - LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE
 - OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
 - PERFORMANCE OF THIS SOFTWARE.
a16 4

<!-- $ISC: nsupdate.html,v 1.9.2.3.2.5 2004/08/22 23:38:59 marka Exp $ -->

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
d23 2
a24 1
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"></HEAD
d35 2
a36 2
></A
>nsupdate</H1
d56 1
a56 10
>  [<VAR
CLASS="OPTION"
>-d</VAR
>] [<VAR
CLASS="OPTION"
>-y <VAR
CLASS="REPLACEABLE"
>keyname:secret</VAR
></VAR
> | <VAR
d58 2
a59 11
>-k <VAR
CLASS="REPLACEABLE"
>keyfile</VAR
></VAR
>] [<VAR
CLASS="OPTION"
>-t <VAR
CLASS="REPLACEABLE"
>timeout</VAR
></VAR
>] [<VAR
d61 1
a61 1
>-u <VAR
d63 5
a67 3
>udptimeout</VAR
></VAR
>] [<VAR
d69 1
a69 1
>-r <VAR
d71 5
a75 3
>udpretries</VAR
></VAR
>] [<VAR
d77 1
a77 1
>-v</VAR
d83 1
a83 1
NAME="AEN35"
d118 1
a118 1
<VAR
d120 1
a120 1
>-d</VAR
d133 2
a134 3
These use the TSIG resource record type described in RFC2845 or the
SIG(0) record described in RFC3535 and RFC2931.
TSIG relies on a shared secret that should only be known to
d138 2
a139 1
> and the name server.
a162 2
SIG(0) uses public key cryptography.  To use a SIG(0) key, the public
key must be stored in a KEY record in a zone served by the name server.
d178 1
a178 1
<VAR
d180 1
a180 1
>-y</VAR
d183 1
a183 1
<VAR
d185 1
a185 1
>-k</VAR
d187 2
a188 2
option (with an HMAC-MD5 key) to provide the shared secret needed to generate
a TSIG record for authenticating Dynamic DNS update requests.
d191 1
a191 1
<VAR
d193 1
a193 1
>-k</VAR
d201 1
a201 1
<VAR
d203 3
a205 1
>keyfile</VAR
d219 1
a219 1
<VAR
d221 1
a221 1
>-y</VAR
d224 1
a224 1
<VAR
d226 3
a228 1
>keyname:secret.</VAR
d230 1
a230 1
<VAR
d232 3
a234 1
>keyname</VAR
d238 1
a238 1
<VAR
d240 3
a242 1
>secret</VAR
d246 1
a246 1
<VAR
d248 1
a248 1
>-y</VAR
a261 7
>The <VAR
CLASS="OPTION"
>-k</VAR
> may also be used to specify a SIG(0) key used
to authenticate Dynamic DNS update requests.  In this case, the key
specified is not an HMAC-MD5 key.</P
><P
d267 1
a267 2
uses UDP to send update requests to the name server unless they are too
large to fit in a UDP request in which case TCP will be used.
d269 1
a269 1
<VAR
d271 1
a271 1
>-v</VAR
a279 20
><P
>The <VAR
CLASS="OPTION"
>-t</VAR
> option sets the maximum time a update request can
take before it is aborted.  The default is 300 seconds.  Zero can be used
to disable the timeout.</P
><P
>The <VAR
CLASS="OPTION"
>-u</VAR
> option sets the UDP retry interval.  The default is
3 seconds.  If zero the interval will be computed from the timeout interval
and number of UDP retries.</P
><P
>The <VAR
CLASS="OPTION"
>-r</VAR
> option sets the number of UDP retries. The default is
3.  If zero only one update request will be made.</P
d284 1
a284 1
NAME="AEN82"
d294 1
a294 1
<VAR
d296 3
a298 1
>filename</VAR
d337 1
a337 1
<VAR
d339 3
a341 1
>servername</VAR
d351 1
a351 1
<VAR
d353 3
a355 1
>port</VAR
d358 1
a358 1
<VAR
d360 3
a362 1
>servername</VAR
d378 1
a378 1
<VAR
d380 3
a382 1
>address</VAR
d390 2
a391 2
will send updates using an address and port chosen by the system.
<VAR
d393 3
a395 1
>port</VAR
d410 1
a410 1
<VAR
d412 3
a414 1
>zonename</VAR
d417 1
a417 1
<VAR
d419 3
a421 1
>zone</VAR
a433 19
>class</B
>  {classname}</P
></DT
><DD
><P
>Specify the default class.
If no <VAR
CLASS="PARAMETER"
>class</VAR
> is specified the default class is
<VAR
CLASS="PARAMETER"
>IN</VAR
>.</P
></DD
><DT
><P
><B
CLASS="COMMAND"
d440 1
a440 4
<VAR
CLASS="PARAMETER"
>keyname</VAR
> <VAR
d442 8
a449 1
>keysecret</VAR
d456 1
a456 1
<VAR
d458 2
a459 2
>-y</VAR
> or <VAR
d461 1
a461 1
>-k</VAR
d474 1
a474 1
<VAR
d476 3
a478 1
>domain-name</VAR
d491 1
a491 1
<VAR
d493 3
a495 1
>domain-name</VAR
d509 1
a509 1
<VAR
d511 3
a513 1
>type</VAR
d515 1
a515 1
<VAR
d517 3
a519 1
>class</VAR
d522 1
a522 1
<VAR
d524 3
a526 1
>domain-name</VAR
d529 1
a529 1
<VAR
d531 3
a533 1
>class</VAR
d535 2
a536 1
is omitted, IN (internet) is assumed.</P
d548 1
a548 1
<VAR
d550 3
a552 1
>type</VAR
d554 1
a554 1
<VAR
d556 3
a558 1
>class</VAR
d561 1
a561 1
<VAR
d563 3
a565 1
>domain-name</VAR
d569 1
a569 1
<VAR
d571 3
a573 1
>class</VAR
d587 1
a587 1
<VAR
d589 3
a591 1
>data</VAR
d595 1
a595 1
<VAR
d597 3
a599 1
>type</VAR
d601 1
a601 1
<VAR
d603 3
a605 1
>class</VAR
d608 1
a608 1
<VAR
d610 3
a612 1
>domain-name</VAR
d617 1
a617 1
<VAR
d619 3
a621 1
>type</VAR
d623 1
a623 1
<VAR
d625 3
a627 1
>class</VAR
d630 1
a630 1
<VAR
d632 3
a634 1
>domain-name</VAR
d637 1
a637 1
<VAR
d639 3
a641 1
>data</VAR
d656 1
a656 1
<VAR
d658 3
a660 1
>domain-name</VAR
d663 1
a663 1
<VAR
d665 3
a667 1
>type</VAR
d670 1
a670 1
<VAR
d672 3
a674 1
>data</VAR
d678 1
a678 1
<VAR
d680 3
a682 1
>class</VAR
d685 1
a685 1
<VAR
d687 3
a689 1
>ttl</VAR
d703 1
a703 1
<VAR
d705 3
a707 1
>ttl</VAR
d709 1
a709 1
<VAR
d711 3
a713 1
>class</VAR
d716 1
a716 1
<VAR
d718 3
a720 1
>data</VAR
a745 11
><DT
><P
><B
CLASS="COMMAND"
>answer</B
> </P
></DT
><DD
><P
>Displays the answer.</P
></DD
d750 1
a750 1
>Lines beginning with a semicolon are comments and are ignored.</P
d755 1
a755 1
NAME="AEN255"
d784 1
a784 1
&#62; send</PRE
d805 1
a805 1
&#62; send</PRE
d821 1
a821 1
RRSIG, DNSKEY and NSEC records.)</P
d826 1
a826 1
NAME="AEN268"
d836 1
a836 1
><CODE
d838 1
a838 1
>/etc/resolv.conf</CODE
d845 1
a845 1
><CODE
d847 1
a847 1
>K{name}.+157.+{random}.key</CODE
d861 1
a861 1
><CODE
d863 1
a863 1
>K{name}.+157.+{random}.private</CODE
d882 1
a882 1
NAME="AEN292"
a932 7
>RFC2931</SPAN
></SPAN
>,
<SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
d947 1
a947 1
NAME="AEN315"
d959 1
a959 1
>
@


1.1.1.3
log
@ISC BIND release 9.3.2
@
text
@d2 3
a4 3
 - Copyright (C) 2004, 2005 Internet Systems Consortium, Inc. ("ISC")
 - Copyright (C) 2000-2003 Internet Software Consortium.
 - 
d8 1
a8 1
 - 
d11 1
a11 1
 - AND FITNESS. IN NO EVENT SHALL ISC BE LIABLE FOR ANY SPECIAL, DIRECT,
d17 92
a108 21
<!-- $ISC: nsupdate.html,v 1.9.2.3.2.12 2005/10/13 02:33:49 marka Exp $ -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>nsupdate</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.69.1">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry" lang="en">
<a name="id2463721"></a><div class="titlepage"></div>
<div class="refnamediv">
<h2>Name</h2>
<p>nsupdate &#8212; Dynamic DNS update utility</p>
</div>
<div class="refsynopsisdiv">
<h2>Synopsis</h2>
<div class="cmdsynopsis"><p><code class="command">nsupdate</code>  [<code class="option">-d</code>] [[<code class="option">-y <em class="replaceable"><code>keyname:secret</code></em></code>] |  [<code class="option">-k <em class="replaceable"><code>keyfile</code></em></code>]] [<code class="option">-t <em class="replaceable"><code>timeout</code></em></code>] [<code class="option">-u <em class="replaceable"><code>udptimeout</code></em></code>] [<code class="option">-r <em class="replaceable"><code>udpretries</code></em></code>] [<code class="option">-v</code>] [filename]</p></div>
</div>
<div class="refsect1" lang="en">
<a name="id2525896"></a><h2>DESCRIPTION</h2>
<p>
<span><strong class="command">nsupdate</strong></span>
d114 7
a120 5
resource record.
</p>
<p>
Zones that are under dynamic control via
<span><strong class="command">nsupdate</strong></span>
d123 7
a129 5
conflict with dynamic updates and cause data to be lost.
</p>
<p>
The resource records that are dynamically added or removed with
<span><strong class="command">nsupdate</strong></span>
d132 7
a138 5
This is identified by the MNAME field of the zone's SOA record.
</p>
<p>
The
<code class="option">-d</code>
d140 4
a143 1
<span><strong class="command">nsupdate</strong></span>
d146 3
a148 4
made and the replies received from the name server.
</p>
<p>
Transaction signatures can be used to authenticate the Dynamic DNS
d153 4
a156 1
<span><strong class="command">nsupdate</strong></span> and the name server.
d163 4
a166 1
<span class="type">key</span>
d168 4
a171 1
<span class="type">server</span>
d173 4
a176 1
<code class="filename">/etc/named.conf</code>
d182 4
a185 1
<span><strong class="command">nsupdate</strong></span>
d187 9
a195 4
<code class="filename">/etc/named.conf</code>.
</p>
<p>
<span><strong class="command">nsupdate</strong></span>
d197 4
a200 1
<code class="option">-y</code>
d202 4
a205 1
<code class="option">-k</code>
d210 4
a213 1
<code class="option">-k</code>
d215 4
a218 1
<span><strong class="command">nsupdate</strong></span>
d220 4
a223 1
<em class="parameter"><code>keyfile</code></em>,
d225 4
a228 1
<code class="filename">K{name}.+157.+{random}.private</code>.
d231 4
a234 1
<code class="filename">K{name}.+157.+{random}.key</code>
d236 4
a239 1
<code class="option">-y</code>
d241 8
a248 2
<em class="parameter"><code>keyname:secret.</code></em>
<em class="parameter"><code>keyname</code></em>
d251 4
a254 1
<em class="parameter"><code>secret</code></em>
d257 4
a260 1
<code class="option">-y</code>
d264 13
a276 6
<span class="citerefentry"><span class="refentrytitle">ps</span>(1
)</span>
or in a history file maintained by the user's shell.
</p>
<p>
The <code class="option">-k</code> may also be used to specify a SIG(0) key used
d278 7
a284 5
specified is not an HMAC-MD5 key.
</p>
<p>
By default
<span><strong class="command">nsupdate</strong></span>
d288 4
a291 1
<code class="option">-v</code>
d293 4
a296 1
<span><strong class="command">nsupdate</strong></span>
d298 6
a303 3
This may be preferable when a batch of update requests is made.
</p>
<p>The <code class="option">-t</code> option sets the maximum time a update request can
d305 6
a310 3
to disable the timeout.
</p>
<p>The <code class="option">-u</code> option sets the UDP retry interval.  The default is
d312 20
a331 10
and number of UDP retries.
</p>
<p>The <code class="option">-r</code> option sets the number of UDP retries. The default is
3.  If zero only one update request will be made.
</p>
</div>
<div class="refsect1" lang="en">
<a name="id2526121"></a><h2>INPUT FORMAT</h2>
<p>
<span><strong class="command">nsupdate</strong></span>
d333 4
a336 1
<em class="parameter"><code>filename</code></em>
d345 3
a347 4
Updates will be rejected if the tests for the prerequisite conditions fail.
</p>
<p>
Every update request consists of zero or more prerequisites
d351 4
a354 1
A blank input line (or the <span><strong class="command">send</strong></span> command) causes the
d356 22
a377 12
name server.
</p>
<p>
The command formats and their meaning are as follows:
</p>
<div class="variablelist"><dl>
<dt><span class="term">
<div class="cmdsynopsis"><p><code class="command">server</code>  {servername} [port]</p></div>
</span></dt>
<dd><p>
Sends all dynamic update requests to the name server
<em class="parameter"><code>servername</code></em>.
d379 4
a382 1
<span><strong class="command">nsupdate</strong></span>
d386 4
a389 1
<em class="parameter"><code>port</code></em>
d391 4
a394 1
<em class="parameter"><code>servername</code></em>
d397 16
a412 8
used.
</p></dd>
<dt><span class="term">
<div class="cmdsynopsis"><p><code class="command">local</code>  {address} [port]</p></div>
</span></dt>
<dd><p>
Sends all dynamic update requests using the local
<em class="parameter"><code>address</code></em>.
d415 4
a418 1
<span><strong class="command">nsupdate</strong></span>
d420 4
a423 1
<em class="parameter"><code>port</code></em>
d425 16
a440 8
If no port number is specified, the system will assign one.
</p></dd>
<dt><span class="term">
<div class="cmdsynopsis"><p><code class="command">zone</code>  {zonename}</p></div>
</span></dt>
<dd><p>
Specifies that all updates are to be made to the zone
<em class="parameter"><code>zonename</code></em>.
d442 4
a445 1
<em class="parameter"><code>zone</code></em>
d447 46
a492 18
<span><strong class="command">nsupdate</strong></span>
will attempt determine the correct zone to update based on the rest of the input.
</p></dd>
<dt><span class="term">
<div class="cmdsynopsis"><p><code class="command">class</code>  {classname}</p></div>
</span></dt>
<dd><p>
Specify the default class.
If no <em class="parameter"><code>class</code></em> is specified the default class is
<em class="parameter"><code>IN</code></em>.
</p></dd>
<dt><span class="term">
<div class="cmdsynopsis"><p><code class="command">key</code>  {name} {secret}</p></div>
</span></dt>
<dd><p>
Specifies that all updates are to be TSIG signed using the
<em class="parameter"><code>keyname</code></em> <em class="parameter"><code>keysecret</code></em> pair.
The <span><strong class="command">key</strong></span> command
d494 57
a550 24
<code class="option">-y</code> or <code class="option">-k</code>.
</p></dd>
<dt><span class="term">
<div class="cmdsynopsis"><p><code class="command">prereq nxdomain</code>  {domain-name}</p></div>
</span></dt>
<dd><p>
Requires that no resource record of any type exists with name
<em class="parameter"><code>domain-name</code></em>.
</p></dd>
<dt><span class="term">
<div class="cmdsynopsis"><p><code class="command">prereq yxdomain</code>  {domain-name}</p></div>
</span></dt>
<dd><p>
Requires that
<em class="parameter"><code>domain-name</code></em>
exists (has as at least one resource record, of any type).
</p></dd>
<dt><span class="term">
<div class="cmdsynopsis"><p><code class="command">prereq nxrrset</code>  {domain-name} [class] {type}</p></div>
</span></dt>
<dd><p>
Requires that no resource record exists of the specified
<em class="parameter"><code>type</code></em>,
<em class="parameter"><code>class</code></em>
d552 4
a555 1
<em class="parameter"><code>domain-name</code></em>.
d557 24
a580 10
<em class="parameter"><code>class</code></em>
is omitted, IN (internet) is assumed.
</p></dd>
<dt><span class="term">
<div class="cmdsynopsis"><p><code class="command">prereq yxrrset</code>  {domain-name} [class] {type}</p></div>
</span></dt>
<dd><p>
This requires that a resource record of the specified
<em class="parameter"><code>type</code></em>,
<em class="parameter"><code>class</code></em>
d582 4
a585 1
<em class="parameter"><code>domain-name</code></em>
d588 20
a607 9
<em class="parameter"><code>class</code></em>
is omitted, IN (internet) is assumed.
</p></dd>
<dt><span class="term">
<div class="cmdsynopsis"><p><code class="command">prereq yxrrset</code>  {domain-name} [class] {type} {data...}</p></div>
</span></dt>
<dd><p>
The
<em class="parameter"><code>data</code></em>
d610 8
a617 2
<em class="parameter"><code>type</code></em>,
<em class="parameter"><code>class</code></em>,
d619 4
a622 1
<em class="parameter"><code>domain-name</code></em>
d626 8
a633 2
<em class="parameter"><code>type</code></em>,
<em class="parameter"><code>class</code></em>,
d635 4
a638 1
<em class="parameter"><code>domain-name</code></em>.
d640 4
a643 1
<em class="parameter"><code>data</code></em>
d645 16
a660 8
RDATA.
</p></dd>
<dt><span class="term">
<div class="cmdsynopsis"><p><code class="command">update delete</code>  {domain-name} [ttl] [class] [type  [data...]]</p></div>
</span></dt>
<dd><p>
Deletes any resource records named
<em class="parameter"><code>domain-name</code></em>.
d662 4
a665 1
<em class="parameter"><code>type</code></em>
d667 4
a670 1
<em class="parameter"><code>data</code></em>
d673 4
a676 1
<em class="parameter"><code>class</code></em>
d678 24
a701 10
<em class="parameter"><code>ttl</code></em>
is ignored, and is only allowed for compatibility.
</p></dd>
<dt><span class="term">
<div class="cmdsynopsis"><p><code class="command">update add</code>  {domain-name} {ttl} [class] {type} {data...}</p></div>
</span></dt>
<dd><p>
Adds a new resource record with the specified
<em class="parameter"><code>ttl</code></em>,
<em class="parameter"><code>class</code></em>
d703 58
a760 33
<em class="parameter"><code>data</code></em>.
</p></dd>
<dt><span class="term">
<div class="cmdsynopsis"><p><code class="command">show</code> </p></div>
</span></dt>
<dd><p>
Displays the current message, containing all of the prerequisites and
updates specified since the last send.
</p></dd>
<dt><span class="term">
<div class="cmdsynopsis"><p><code class="command">send</code> </p></div>
</span></dt>
<dd><p>
Sends the current message.  This is equivalent to entering a blank line.
</p></dd>
<dt><span class="term">
<div class="cmdsynopsis"><p><code class="command">answer</code> </p></div>
</span></dt>
<dd><p>
Displays the answer.
</p></dd>
</dl></div>
<p>
</p>
<p>
Lines beginning with a semicolon are comments and are ignored.
</p>
</div>
<div class="refsect1" lang="en">
<a name="id2526749"></a><h2>EXAMPLES</h2>
<p>
The examples below show how
<span><strong class="command">nsupdate</strong></span>
d762 4
a765 1
<span class="type">example.com</span>
d770 4
a773 1
<span class="type">example.com</span>.
d775 13
a787 12
</p>
<pre class="programlisting">
# nsupdate
&gt; update delete oldhost.example.com A
&gt; update add newhost.example.com 86400 A 172.16.1.1
&gt; send
</pre>
<p>
</p>
<p>
Any A records for
<span class="type">oldhost.example.com</span>
d790 4
a793 1
<span class="type">newhost.example.com</span>
d796 9
a804 11
</p>
<pre class="programlisting">
# nsupdate
&gt; prereq nxdomain nickname.example.com
&gt; update add nickname.example.com 86400 CNAME somehost.example.com
&gt; send
</pre>
<p>
</p>
<p>
The prerequisite condition gets the name server to check that there
d806 4
a809 1
<span class="type">nickname.example.com</span>.
d817 139
a955 40
RRSIG, DNSKEY and NSEC records.)
</p>
</div>
<div class="refsect1" lang="en">
<a name="id2526793"></a><h2>FILES</h2>
<div class="variablelist"><dl>
<dt><span class="term"><code class="constant">/etc/resolv.conf</code></span></dt>
<dd><p>
used to identify default name server
</p></dd>
<dt><span class="term"><code class="constant">K{name}.+157.+{random}.key</code></span></dt>
<dd><p>
base-64 encoding of HMAC-MD5 key created by
<span class="citerefentry"><span class="refentrytitle">dnssec-keygen</span>(8)</span>.
</p></dd>
<dt><span class="term"><code class="constant">K{name}.+157.+{random}.private</code></span></dt>
<dd><p>
base-64 encoding of HMAC-MD5 key created by
<span class="citerefentry"><span class="refentrytitle">dnssec-keygen</span>(8)</span>.
</p></dd>
</dl></div>
</div>
<div class="refsect1" lang="en">
<a name="id2525155"></a><h2>SEE ALSO</h2>
<p>
<span class="citerefentry"><span class="refentrytitle">RFC2136</span></span>,
<span class="citerefentry"><span class="refentrytitle">RFC3007</span></span>,
<span class="citerefentry"><span class="refentrytitle">RFC2104</span></span>,
<span class="citerefentry"><span class="refentrytitle">RFC2845</span></span>,
<span class="citerefentry"><span class="refentrytitle">RFC1034</span></span>,
<span class="citerefentry"><span class="refentrytitle">RFC2535</span></span>,
<span class="citerefentry"><span class="refentrytitle">RFC2931</span></span>,
<span class="citerefentry"><span class="refentrytitle">named</span>(8)</span>,
<span class="citerefentry"><span class="refentrytitle">dnssec-keygen</span>(8)</span>.
</p>
</div>
<div class="refsect1" lang="en">
<a name="id2525226"></a><h2>BUGS</h2>
<p>
The TSIG key is redundantly stored in two separate files.
d958 5
a962 5
releases.
</p>
</div>
</div></body>
</html>
@


1.1.1.4
log
@ISC BIND release 9.3.3
@
text
@d17 1
a17 1
<!-- $ISC: nsupdate.html,v 1.9.2.3.2.15 2006/06/29 13:02:30 marka Exp $ -->
d22 1
a22 1
<meta name="generator" content="DocBook XSL Stylesheets V1.70.1">
d25 1
a25 1
<a name="id2482688"></a><div class="titlepage"></div>
d35 1
a35 1
<a name="id2549461"></a><h2>DESCRIPTION</h2>
d163 1
a163 1
<a name="id2549686"></a><h2>INPUT FORMAT</h2>
d320 1
a320 1
<div class="cmdsynopsis"><p><code class="command">update delete</code>  {domain-name} [ttl] [class] [type [data...]]</p></div>
d373 1
a373 1
<a name="id2550382"></a><h2>EXAMPLES</h2>
d426 1
a426 1
<a name="id2550426"></a><h2>FILES</h2>
d445 1
a445 1
<a name="id2549061"></a><h2>SEE ALSO</h2>
d459 1
a459 1
<a name="id2549132"></a><h2>BUGS</h2>
@


1.1.1.5
log
@ISC BIND release 9.4.2
@
text
@d2 1
a2 1
 - Copyright (C) 2004-2007 Internet Systems Consortium, Inc. ("ISC")
d17 1
a17 1
<!-- $ISC: nsupdate.html,v 1.14.18.22 2007/05/09 03:33:13 marka Exp $ -->
d22 1
a22 1
<meta name="generator" content="DocBook XSL Stylesheets V1.71.1">
d25 1
a25 1
<a name="id2476275"></a><div class="titlepage"></div>
d32 1
a32 1
<div class="cmdsynopsis"><p><code class="command">nsupdate</code>  [<code class="option">-d</code>] [[<code class="option">-y <em class="replaceable"><code>[<span class="optional">hmac:</span>]keyname:secret</code></em></code>] |  [<code class="option">-k <em class="replaceable"><code>keyfile</code></em></code>]] [<code class="option">-t <em class="replaceable"><code>timeout</code></em></code>] [<code class="option">-u <em class="replaceable"><code>udptimeout</code></em></code>] [<code class="option">-r <em class="replaceable"><code>udpretries</code></em></code>] [<code class="option">-v</code>] [filename]</p></div>
d35 126
a160 119
<a name="id2543417"></a><h2>DESCRIPTION</h2>
<p><span><strong class="command">nsupdate</strong></span>
      is used to submit Dynamic DNS Update requests as defined in RFC2136
      to a name server.
      This allows resource records to be added or removed from a zone
      without manually editing the zone file.
      A single update request can contain requests to add or remove more than
      one
      resource record.
    </p>
<p>
      Zones that are under dynamic control via
      <span><strong class="command">nsupdate</strong></span>
      or a DHCP server should not be edited by hand.
      Manual edits could
      conflict with dynamic updates and cause data to be lost.
    </p>
<p>
      The resource records that are dynamically added or removed with
      <span><strong class="command">nsupdate</strong></span>
      have to be in the same zone.
      Requests are sent to the zone's master server.
      This is identified by the MNAME field of the zone's SOA record.
    </p>
<p>
      The
      <code class="option">-d</code>
      option makes
      <span><strong class="command">nsupdate</strong></span>
      operate in debug mode.
      This provides tracing information about the update requests that are
      made and the replies received from the name server.
    </p>
<p>
      Transaction signatures can be used to authenticate the Dynamic DNS
      updates.
      These use the TSIG resource record type described in RFC2845 or the
      SIG(0) record described in RFC3535 and RFC2931.
      TSIG relies on a shared secret that should only be known to
      <span><strong class="command">nsupdate</strong></span> and the name server.
      Currently, the only supported encryption algorithm for TSIG is
      HMAC-MD5, which is defined in RFC 2104.
      Once other algorithms are defined for TSIG, applications will need to
      ensure they select the appropriate algorithm as well as the key when
      authenticating each other.
      For instance, suitable
      <span class="type">key</span>
      and
      <span class="type">server</span>
      statements would be added to
      <code class="filename">/etc/named.conf</code>
      so that the name server can associate the appropriate secret key
      and algorithm with the IP address of the
      client application that will be using TSIG authentication.
      SIG(0) uses public key cryptography.  To use a SIG(0) key, the public
      key must be stored in a KEY record in a zone served by the name server.
      <span><strong class="command">nsupdate</strong></span>
      does not read
      <code class="filename">/etc/named.conf</code>.
    </p>
<p><span><strong class="command">nsupdate</strong></span>
      uses the <code class="option">-y</code> or <code class="option">-k</code> option
      to provide the shared secret needed to generate a TSIG record
      for authenticating Dynamic DNS update requests, default type
      HMAC-MD5.  These options are mutually exclusive.  With the
      <code class="option">-k</code> option, <span><strong class="command">nsupdate</strong></span> reads
      the shared secret from the file <em class="parameter"><code>keyfile</code></em>,
      whose name is of the form
      <code class="filename">K{name}.+157.+{random}.private</code>.  For
      historical reasons, the file
      <code class="filename">K{name}.+157.+{random}.key</code> must also be
      present.  When the <code class="option">-y</code> option is used, a
      signature is generated from
      [<span class="optional"><em class="parameter"><code>hmac:</code></em></span>]<em class="parameter"><code>keyname:secret.</code></em>
      <em class="parameter"><code>keyname</code></em> is the name of the key, and
      <em class="parameter"><code>secret</code></em> is the base64 encoded shared
      secret.  Use of the <code class="option">-y</code> option is discouraged
      because the shared secret is supplied as a command line
      argument in clear text.  This may be visible in the output
      from
      <span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span> or in a history file maintained by the user's
      shell.
    </p>
<p>
      The <code class="option">-k</code> may also be used to specify a SIG(0) key used
      to authenticate Dynamic DNS update requests.  In this case, the key
      specified is not an HMAC-MD5 key.
    </p>
<p>
      By default
      <span><strong class="command">nsupdate</strong></span>
      uses UDP to send update requests to the name server unless they are too
      large to fit in a UDP request in which case TCP will be used.
      The
      <code class="option">-v</code>
      option makes
      <span><strong class="command">nsupdate</strong></span>
      use a TCP connection.
      This may be preferable when a batch of update requests is made.
    </p>
<p>
      The <code class="option">-t</code> option sets the maximum time an update request
      can
      take before it is aborted.  The default is 300 seconds.  Zero can be
      used
      to disable the timeout.
    </p>
<p>
      The <code class="option">-u</code> option sets the UDP retry interval.  The default
      is
      3 seconds.  If zero, the interval will be computed from the timeout
      interval
      and number of UDP retries.
    </p>
<p>
      The <code class="option">-r</code> option sets the number of UDP retries. The
      default is
      3.  If zero, only one update request will be made.
    </p>
d163 24
a186 25
<a name="id2543645"></a><h2>INPUT FORMAT</h2>
<p><span><strong class="command">nsupdate</strong></span>
      reads input from
      <em class="parameter"><code>filename</code></em>
      or standard input.
      Each command is supplied on exactly one line of input.
      Some commands are for administrative purposes.
      The others are either update instructions or prerequisite checks on the
      contents of the zone.
      These checks set conditions that some name or set of
      resource records (RRset) either exists or is absent from the zone.
      These conditions must be met if the entire update request is to succeed.
      Updates will be rejected if the tests for the prerequisite conditions
      fail.
    </p>
<p>
      Every update request consists of zero or more prerequisites
      and zero or more updates.
      This allows a suitably authenticated update request to proceed if some
      specified resource records are present or missing from the zone.
      A blank input line (or the <span><strong class="command">send</strong></span> command)
      causes the
      accumulated commands to be sent as one Dynamic DNS update request to the
      name server.
    </p>
d188 2
a189 2
      The command formats and their meaning are as follows:
      </p>
d192 20
a211 26
              <span><strong class="command">server</strong></span>
               {servername}
               [port]
            </span></dt>
<dd><p>
              Sends all dynamic update requests to the name server
              <em class="parameter"><code>servername</code></em>.
              When no server statement is provided,
              <span><strong class="command">nsupdate</strong></span>
              will send updates to the master server of the correct zone.
              The MNAME field of that zone's SOA record will identify the
              master
              server for that zone.
              <em class="parameter"><code>port</code></em>
              is the port number on
              <em class="parameter"><code>servername</code></em>
              where the dynamic update requests get sent.
              If no port number is specified, the default DNS port number of
              53 is
              used.
            </p></dd>
<dt><span class="term">
              <span><strong class="command">local</strong></span>
               {address}
               [port]
            </span></dt>
d213 2
a214 2
              Sends all dynamic update requests using the local
              <em class="parameter"><code>address</code></em>.
d216 143
a358 175
              When no local statement is provided,
              <span><strong class="command">nsupdate</strong></span>
              will send updates using an address and port chosen by the
              system.
              <em class="parameter"><code>port</code></em>
              can additionally be used to make requests come from a specific
              port.
              If no port number is specified, the system will assign one.
            </p></dd>
<dt><span class="term">
              <span><strong class="command">zone</strong></span>
               {zonename}
            </span></dt>
<dd><p>
              Specifies that all updates are to be made to the zone
              <em class="parameter"><code>zonename</code></em>.
              If no
              <em class="parameter"><code>zone</code></em>
              statement is provided,
              <span><strong class="command">nsupdate</strong></span>
              will attempt determine the correct zone to update based on the
              rest of the input.
            </p></dd>
<dt><span class="term">
              <span><strong class="command">class</strong></span>
               {classname}
            </span></dt>
<dd><p>
              Specify the default class.
              If no <em class="parameter"><code>class</code></em> is specified, the
              default class is
              <em class="parameter"><code>IN</code></em>.
            </p></dd>
<dt><span class="term">
              <span><strong class="command">key</strong></span>
               {name}
               {secret}
            </span></dt>
<dd><p>
              Specifies that all updates are to be TSIG-signed using the
              <em class="parameter"><code>keyname</code></em> <em class="parameter"><code>keysecret</code></em> pair.
              The <span><strong class="command">key</strong></span> command
              overrides any key specified on the command line via
              <code class="option">-y</code> or <code class="option">-k</code>.
            </p></dd>
<dt><span class="term">
              <span><strong class="command">prereq nxdomain</strong></span>
               {domain-name}
            </span></dt>
<dd><p>
              Requires that no resource record of any type exists with name
              <em class="parameter"><code>domain-name</code></em>.
            </p></dd>
<dt><span class="term">
              <span><strong class="command">prereq yxdomain</strong></span>
               {domain-name}
            </span></dt>
<dd><p>
              Requires that
              <em class="parameter"><code>domain-name</code></em>
              exists (has as at least one resource record, of any type).
            </p></dd>
<dt><span class="term">
              <span><strong class="command">prereq nxrrset</strong></span>
               {domain-name}
               [class]
               {type}
            </span></dt>
<dd><p>
              Requires that no resource record exists of the specified
              <em class="parameter"><code>type</code></em>,
              <em class="parameter"><code>class</code></em>
              and
              <em class="parameter"><code>domain-name</code></em>.
              If
              <em class="parameter"><code>class</code></em>
              is omitted, IN (internet) is assumed.
            </p></dd>
<dt><span class="term">
              <span><strong class="command">prereq yxrrset</strong></span>
               {domain-name}
               [class]
               {type}
            </span></dt>
<dd><p>
              This requires that a resource record of the specified
              <em class="parameter"><code>type</code></em>,
              <em class="parameter"><code>class</code></em>
              and
              <em class="parameter"><code>domain-name</code></em>
              must exist.
              If
              <em class="parameter"><code>class</code></em>
              is omitted, IN (internet) is assumed.
            </p></dd>
<dt><span class="term">
              <span><strong class="command">prereq yxrrset</strong></span>
               {domain-name}
               [class]
               {type}
               {data...}
            </span></dt>
<dd><p>
              The
              <em class="parameter"><code>data</code></em>
              from each set of prerequisites of this form
              sharing a common
              <em class="parameter"><code>type</code></em>,
              <em class="parameter"><code>class</code></em>,
              and
              <em class="parameter"><code>domain-name</code></em>
              are combined to form a set of RRs.  This set of RRs must
              exactly match the set of RRs existing in the zone at the
              given
              <em class="parameter"><code>type</code></em>,
              <em class="parameter"><code>class</code></em>,
              and
              <em class="parameter"><code>domain-name</code></em>.
              The
              <em class="parameter"><code>data</code></em>
              are written in the standard text representation of the resource
              record's
              RDATA.
            </p></dd>
<dt><span class="term">
              <span><strong class="command">update delete</strong></span>
               {domain-name}
               [ttl]
               [class]
               [type [data...]]
            </span></dt>
<dd><p>
              Deletes any resource records named
              <em class="parameter"><code>domain-name</code></em>.
              If
              <em class="parameter"><code>type</code></em>
              and
              <em class="parameter"><code>data</code></em>
              is provided, only matching resource records will be removed.
              The internet class is assumed if
              <em class="parameter"><code>class</code></em>
              is not supplied.  The
              <em class="parameter"><code>ttl</code></em>
              is ignored, and is only allowed for compatibility.
            </p></dd>
<dt><span class="term">
              <span><strong class="command">update add</strong></span>
               {domain-name}
               {ttl}
               [class]
               {type}
               {data...}
            </span></dt>
<dd><p>
              Adds a new resource record with the specified
              <em class="parameter"><code>ttl</code></em>,
              <em class="parameter"><code>class</code></em>
              and
              <em class="parameter"><code>data</code></em>.
            </p></dd>
<dt><span class="term">
              <span><strong class="command">show</strong></span>
            </span></dt>
<dd><p>
              Displays the current message, containing all of the
              prerequisites and
              updates specified since the last send.
            </p></dd>
<dt><span class="term">
              <span><strong class="command">send</strong></span>
            </span></dt>
<dd><p>
              Sends the current message.  This is equivalent to entering a
              blank line.
            </p></dd>
d360 2
a361 2
              <span><strong class="command">answer</strong></span>
            </span></dt>
d363 2
a364 2
              Displays the answer.
            </p></dd>
d367 1
a367 1
    </p>
d369 2
a370 2
      Lines beginning with a semicolon are comments and are ignored.
    </p>
d373 1
a373 1
<a name="id2544648"></a><h2>EXAMPLES</h2>
d375 9
a383 10
      The examples below show how
      <span><strong class="command">nsupdate</strong></span>
      could be used to insert and delete resource records from the
      <span class="type">example.com</span>
      zone.
      Notice that the input in each example contains a trailing blank line so
      that
      a group of commands are sent as one dynamic update request to the
      master name server for
      <span class="type">example.com</span>.
d385 1
a385 1
      </p>
d393 1
a393 1
    </p>
d395 8
a402 8
      Any A records for
      <span class="type">oldhost.example.com</span>
      are deleted.
      And an A record for
      <span class="type">newhost.example.com</span>
      with IP address 172.16.1.1 is added.
      The newly-added record has a 1 day TTL (86400 seconds).
      </p>
d410 1
a410 1
    </p>
d412 3
a414 3
      The prerequisite condition gets the name server to check that there
      are no resource records of any type for
      <span class="type">nickname.example.com</span>.
d416 8
a423 8
      If there are, the update request fails.
      If this name does not exist, a CNAME for it is added.
      This ensures that when the CNAME is added, it cannot conflict with the
      long-standing rule in RFC1034 that a name must not exist as any other
      record type if it exists as a CNAME.
      (The rule has been updated for DNSSEC in RFC2535 to allow CNAMEs to have
      RRSIG, DNSKEY and NSEC records.)
    </p>
d426 1
a426 1
<a name="id2544692"></a><h2>FILES</h2>
d430 2
a431 2
            used to identify default name server
          </p></dd>
d434 3
a436 3
            base-64 encoding of HMAC-MD5 key created by
            <span class="citerefentry"><span class="refentrytitle">dnssec-keygen</span>(8)</span>.
          </p></dd>
d439 3
a441 3
            base-64 encoding of HMAC-MD5 key created by
            <span class="citerefentry"><span class="refentrytitle">dnssec-keygen</span>(8)</span>.
          </p></dd>
d445 12
a456 11
<a name="id2544829"></a><h2>SEE ALSO</h2>
<p><span class="citerefentry"><span class="refentrytitle">RFC2136</span></span>,
      <span class="citerefentry"><span class="refentrytitle">RFC3007</span></span>,
      <span class="citerefentry"><span class="refentrytitle">RFC2104</span></span>,
      <span class="citerefentry"><span class="refentrytitle">RFC2845</span></span>,
      <span class="citerefentry"><span class="refentrytitle">RFC1034</span></span>,
      <span class="citerefentry"><span class="refentrytitle">RFC2535</span></span>,
      <span class="citerefentry"><span class="refentrytitle">RFC2931</span></span>,
      <span class="citerefentry"><span class="refentrytitle">named</span>(8)</span>,
      <span class="citerefentry"><span class="refentrytitle">dnssec-keygen</span>(8)</span>.
    </p>
d459 1
a459 1
<a name="id2544900"></a><h2>BUGS</h2>
d461 5
a465 5
      The TSIG key is redundantly stored in two separate files.
      This is a consequence of nsupdate using the DST library
      for its cryptographic operations, and may change in future
      releases.
    </p>
@


