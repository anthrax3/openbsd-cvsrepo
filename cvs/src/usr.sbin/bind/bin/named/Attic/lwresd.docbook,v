head	1.2;
access;
symbols
	OPENBSD_5_6:1.1.1.4.0.30
	OPENBSD_5_6_BASE:1.1.1.4
	OPENBSD_5_5:1.1.1.4.0.28
	OPENBSD_5_5_BASE:1.1.1.4
	OPENBSD_5_4:1.1.1.4.0.24
	OPENBSD_5_4_BASE:1.1.1.4
	OPENBSD_5_3:1.1.1.4.0.22
	OPENBSD_5_3_BASE:1.1.1.4
	OPENBSD_5_2:1.1.1.4.0.20
	OPENBSD_5_2_BASE:1.1.1.4
	OPENBSD_5_1_BASE:1.1.1.4
	OPENBSD_5_1:1.1.1.4.0.18
	OPENBSD_5_0:1.1.1.4.0.16
	OPENBSD_5_0_BASE:1.1.1.4
	OPENBSD_4_9:1.1.1.4.0.14
	OPENBSD_4_9_BASE:1.1.1.4
	OPENBSD_4_8:1.1.1.4.0.12
	OPENBSD_4_8_BASE:1.1.1.4
	OPENBSD_4_7:1.1.1.4.0.8
	OPENBSD_4_7_BASE:1.1.1.4
	OPENBSD_4_6:1.1.1.4.0.10
	OPENBSD_4_6_BASE:1.1.1.4
	OPENBSD_4_5:1.1.1.4.0.6
	OPENBSD_4_5_BASE:1.1.1.4
	OPENBSD_4_4:1.1.1.4.0.4
	OPENBSD_4_4_BASE:1.1.1.4
	BIND_9_4_2_P1:1.1.1.4
	OPENBSD_4_3:1.1.1.4.0.2
	OPENBSD_4_3_BASE:1.1.1.4
	BIND_9_4_2:1.1.1.4
	OPENBSD_4_2:1.1.1.3.0.6
	OPENBSD_4_2_BASE:1.1.1.3
	OPENBSD_4_1:1.1.1.3.0.4
	OPENBSD_4_1_BASE:1.1.1.3
	BIND_9_3_4:1.1.1.3
	BIND_9_3_3:1.1.1.3
	OPENBSD_4_0:1.1.1.3.0.2
	OPENBSD_4_0_BASE:1.1.1.3
	BIND_9_3_2:1.1.1.3
	OPENBSD_3_9:1.1.1.2.0.6
	OPENBSD_3_9_BASE:1.1.1.2
	OPENBSD_3_8:1.1.1.2.0.4
	OPENBSD_3_8_BASE:1.1.1.2
	BIND_9_3_1:1.1.1.2
	OPENBSD_3_7:1.1.1.2.0.2
	OPENBSD_3_7_BASE:1.1.1.2
	BIND_9_3_0:1.1.1.2
	OPENBSD_3_6:1.1.1.1.0.8
	OPENBSD_3_6_BASE:1.1.1.1
	OPENBSD_3_5:1.1.1.1.0.6
	OPENBSD_3_5_BASE:1.1.1.1
	OPENBSD_3_4:1.1.1.1.0.4
	OPENBSD_3_4_BASE:1.1.1.1
	OPENBSD_3_3:1.1.1.1.0.2
	OPENBSD_3_3_BASE:1.1.1.1
	BIND_9_2_2_RC1:1.1.1.1
	ISC:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2014.08.25.07.08.32;	author brad;	state dead;
branches;
next	1.1;
commitid	zKogyOACFMOV70QE;

1.1
date	2003.01.20.21.06.09;	author jakob;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.01.20.21.06.09;	author jakob;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2004.09.28.16.33.00;	author jakob;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2006.04.05.16.42.10;	author jakob;	state Exp;
branches;
next	1.1.1.4;

1.1.1.4
date	2007.12.09.12.33.08;	author jakob;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Start removing unused documentation and the server and related binaries source
code.
@
text
@<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook V4.1//EN">
<!--
 - Copyright (C) 2000, 2001  Internet Software Consortium.
 -
 - Permission to use, copy, modify, and distribute this software for any
 - purpose with or without fee is hereby granted, provided that the above
 - copyright notice and this permission notice appear in all copies.
 -
 - THE SOFTWARE IS PROVIDED "AS IS" AND INTERNET SOFTWARE CONSORTIUM
 - DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL
 - IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL
 - INTERNET SOFTWARE CONSORTIUM BE LIABLE FOR ANY SPECIAL, DIRECT,
 - INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING
 - FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT,
 - NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION
 - WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
-->

<!-- $ISC: lwresd.docbook,v 1.6 2001/06/10 19:54:07 tale Exp $ -->

<refentry>
  <refentryinfo>
    <date>June 30, 2000</date>
  </refentryinfo>

  <refmeta>
    <refentrytitle><application>lwresd</application></refentrytitle>
    <manvolnum>8</manvolnum>
    <refmiscinfo>BIND9</refmiscinfo>
  </refmeta>

  <refnamediv>
    <refname><application>lwresd</application></refname>
    <refpurpose>lightweight resolver daemon</refpurpose>
  </refnamediv>

  <refsynopsisdiv>
    <cmdsynopsis>
      <command>lwresd</command>
      <arg><option>-C <replaceable class="parameter">config-file</replaceable></option></arg>
      <arg><option>-d <replaceable class="parameter">debug-level</replaceable></option></arg>
      <arg><option>-f</option></arg>
      <arg><option>-g</option></arg>
      <arg><option>-i <replaceable class="parameter">pid-file</replaceable></option></arg>
      <arg><option>-n <replaceable class="parameter">#cpus</replaceable></option></arg>
      <arg><option>-P <replaceable class="parameter">port</replaceable></option></arg>
      <arg><option>-p <replaceable class="parameter">port</replaceable></option></arg>
      <arg><option>-s</option></arg>
      <arg><option>-t <replaceable class="parameter">directory</replaceable></option></arg>
      <arg><option>-u <replaceable class="parameter">user</replaceable></option></arg>
      <arg><option>-v</option></arg>
    </cmdsynopsis>
  </refsynopsisdiv>

  <refsect1>
    <title>DESCRIPTION</title>
    <para>
	<command>lwresd</command> is the daemon providing name lookup
	services to clients that use the BIND 9 lightweight resolver
	library.  It is essentially a stripped-down, caching-only name
	server that answers queries using the BIND 9 lightweight
	resolver protocol rather than the DNS protocol.
    </para>
    <para>
	<command>lwresd</command> listens for resolver queries on a
	UDP port on the IPv4 loopback interface, 127.0.0.1.  This
	means that <command>lwresd</command> can only be used by
	processes running on the local machine.  By default UDP port
	number 921 is used for lightweight resolver requests and
	responses.
    </para>
    <para>
	Incoming lightweight resolver requests are decoded by the
	server which then resolves them using the DNS protocol.  When
	the DNS lookup completes, <command>lwresd</command> encodes
	the answers in the lightweight resolver format and returns
	them to the client that made the request.
    </para>
    <para>
	If <filename>/etc/resolv.conf</filename> contains any
	<option>nameserver</option> entries, <command>lwresd</command>
	sends recursive DNS queries to those servers.  This is similar
	to the use of forwarders in a caching name server.  If no
	<option>nameserver</option> entries are present, or if
	forwarding fails, <command>lwresd</command> resolves the
	queries autonomously starting at the root name servers, using
	a built-in list of root server hints.
    </para>
  </refsect1>

  <refsect1>
    <title>OPTIONS</title>

    <variablelist>
      <varlistentry>
	<term>-C <replaceable class="parameter">config-file</replaceable></term>
	<listitem>
	  <para>
		Use <replaceable
		class="parameter">config-file</replaceable> as the
		configuration file instead of the default,
		<filename>/etc/resolv.conf</filename>.
          </para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>-d <replaceable class="parameter">debug-level</replaceable></term>
	<listitem>
	  <para>
		Set the daemon's debug level to <replaceable
		class="parameter">debug-level</replaceable>.
		Debugging traces from <command>lwresd</command> become
		more verbose as the debug level increases.
          </para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>-f</term>
	<listitem>
	  <para>
		Run the server in the foreground (i.e. do not daemonize).
          </para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>-g</term>
	<listitem>
	  <para>
		Run the server in the foreground and force all logging
		to <filename>stderr</filename>.
          </para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>-n <replaceable class="parameter">#cpus</replaceable></term>
	<listitem>
	  <para>
		Create <replaceable
		class="parameter">#cpus</replaceable> worker threads
		to take advantage of multiple CPUs.  If not specified,
		<command>lwresd</command> will try to determine the
		number of CPUs present and create one thread per CPU.
		If it is unable to determine the number of CPUs, a
		single worker thread will be created.
          </para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>-P <replaceable class="parameter">port</replaceable></term>
	<listitem>
	  <para>
		Listen for lightweight resolver queries on port
		<replaceable class="parameter">port</replaceable>.  If
		not specified, the default is port 921.
          </para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>-p <replaceable class="parameter">port</replaceable></term>
	<listitem>
	  <para>
		Send DNS lookups to port <replaceable
		class="parameter">port</replaceable>.  If not
		specified, the default is port 53.  This provides a
		way of testing the lightweight resolver daemon with a
		name server that listens for queries on a non-standard
		port number.
          </para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>-s</term>
	<listitem>
	  <para>
		Write memory usage statistics to <filename>stdout</filename>
		on exit.
          </para>
	  <note>
	    <para>
		This option is mainly of interest to BIND 9 developers
		and may be removed or changed in a future release.
	    </para>
	  </note>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>-t <replaceable class="parameter">directory</replaceable></term>
	<listitem>
	  <para>
		<function>chroot()</function> to <replaceable
		class="parameter">directory</replaceable> after
		processing the command line arguments, but before
		reading the configuration file.
          </para>
	  <warning>
	    <para>
		This option should be used in conjunction with the
		<option>-u</option> option, as chrooting a process
		running as root doesn't enhance security on most
		systems; the way <function>chroot()</function> is
		defined allows a process with root privileges to
		escape a chroot jail.
	    </para>
	  </warning>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>-u <replaceable class="parameter">user</replaceable></term>
	<listitem>
	  <para>
		<function>setuid()</function> to <replaceable
		class="parameter">user</replaceable> after completing
		privileged operations, such as creating sockets that
		listen on privileged ports.
          </para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>-v</term>
	<listitem>
	  <para>
		Report the version number and exit.
          </para>
	</listitem>
      </varlistentry>

    </variablelist>

  </refsect1>

  <refsect1>
    <title>FILES</title>

    <variablelist>

      <varlistentry>
	<term><filename>/etc/resolv.conf</filename></term>
	<listitem>
	  <para>
		The default configuration file.
          </para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term><filename>/var/run/lwresd.pid</filename></term>
	<listitem>
	  <para>
		The default process-id file.
          </para>
	</listitem>
      </varlistentry>

    </variablelist>

  </refsect1>

  <refsect1>
    <title>SEE ALSO</title>
    <para>
	<citerefentry>
	  <refentrytitle>named</refentrytitle>
	  <manvolnum>8</manvolnum>
        </citerefentry>,
	<citerefentry>
	  <refentrytitle>lwres</refentrytitle>
	  <manvolnum>3</manvolnum>
        </citerefentry>,
	<citerefentry>
	  <refentrytitle>resolver</refentrytitle>
	  <manvolnum>5</manvolnum>
        </citerefentry>.
    </para>
  </refsect1>

  <refsect1>
    <title>AUTHOR</title>
    <para>
	<corpauthor>Internet Software Consortium</corpauthor>
    </para>
  </refsect1>

</refentry>


<!--
 - Local variables:
 - mode: sgml
 - End:
-->
@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@ISC BIND version 9.2.2rc1
@
text
@@


1.1.1.2
log
@ISC BIND version 9.3.0. ok deraadt@@
@
text
@a2 1
 - Copyright (C) 2004  Internet Systems Consortium, Inc. ("ISC")
d9 8
a16 7
 - THE SOFTWARE IS PROVIDED "AS IS" AND ISC DISCLAIMS ALL WARRANTIES WITH
 - REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
 - AND FITNESS.  IN NO EVENT SHALL ISC BE LIABLE FOR ANY SPECIAL, DIRECT,
 - INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
 - LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE
 - OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
 - PERFORMANCE OF THIS SOFTWARE.
d19 1
a19 1
<!-- $ISC: lwresd.docbook,v 1.6.208.2 2004/06/03 02:24:57 marka Exp $ -->
d289 1
a289 1
	<corpauthor>Internet Systems Consortium</corpauthor>
@


1.1.1.3
log
@ISC BIND release 9.3.2
@
text
@d1 1
a1 3
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.0//EN"
               "http://www.oasis-open.org/docbook/xml/4.0/docbookx.dtd"
	       [<!ENTITY mdash "&#8212;">]>
d3 1
a3 1
 - Copyright (C) 2004, 2005  Internet Systems Consortium, Inc. ("ISC")
d19 1
a19 1
<!-- $ISC: lwresd.docbook,v 1.6.208.4 2005/05/13 01:22:33 marka Exp $ -->
a30 13

  <docinfo>
    <copyright>
      <year>2004</year>
      <year>2005</year>
      <holder>Internet Systems Consortium, Inc. ("ISC")</holder>
    </copyright>
    <copyright>
      <year>2000</year>
      <year>2001</year>
      <holder>Internet Software Consortium.</holder>
    </copyright>
  </docinfo>
@


1.1.1.4
log
@ISC BIND release 9.4.2
@
text
@d1 2
a2 2
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
               "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd"
d5 1
a5 1
 - Copyright (C) 2004, 2005, 2007  Internet Systems Consortium, Inc. ("ISC")
d8 1
a8 1
 - Permission to use, copy, modify, and/or distribute this software for any
d21 2
a22 1
<!-- $ISC: lwresd.docbook,v 1.7.18.8 2007/08/28 07:20:01 tbox Exp $ -->
a33 5
  <refnamediv>
    <refname><application>lwresd</application></refname>
    <refpurpose>lightweight resolver daemon</refpurpose>
  </refnamediv>

a37 1
      <year>2007</year>
d47 5
a54 1
      <arg><option>-c <replaceable class="parameter">config-file</replaceable></option></arg>
a59 1
      <arg><option>-m <replaceable class="parameter">flag</replaceable></option></arg>
a66 2
      <arg><option>-4</option></arg>
      <arg><option>-6</option></arg>
d72 6
a77 7

    <para><command>lwresd</command>
      is the daemon providing name lookup
      services to clients that use the BIND 9 lightweight resolver
      library.  It is essentially a stripped-down, caching-only name
      server that answers queries using the BIND 9 lightweight
      resolver protocol rather than the DNS protocol.
d79 7
a85 8

    <para><command>lwresd</command> 
      listens for resolver queries on a
      UDP port on the IPv4 loopback interface, 127.0.0.1.  This
      means that <command>lwresd</command> can only be used by
      processes running on the local machine.  By default UDP port
      number 921 is used for lightweight resolver requests and
      responses.
d88 5
a92 5
      Incoming lightweight resolver requests are decoded by the
      server which then resolves them using the DNS protocol.  When
      the DNS lookup completes, <command>lwresd</command> encodes
      the answers in the lightweight resolver format and returns
      them to the client that made the request.
d95 8
a102 8
      If <filename>/etc/resolv.conf</filename> contains any
      <option>nameserver</option> entries, <command>lwresd</command>
      sends recursive DNS queries to those servers.  This is similar
      to the use of forwarders in a caching name server.  If no
      <option>nameserver</option> entries are present, or if
      forwarding fails, <command>lwresd</command> resolves the
      queries autonomously starting at the root name servers, using
      a built-in list of root server hints.
a109 1

d111 7
a117 6
        <term>-4</term>
        <listitem>
          <para>
            Use IPv4 only even if the host machine is capable of IPv6.
            <option>-4</option> and <option>-6</option> are mutually
            exclusive.
d119 1
a119 1
        </listitem>
d123 7
a129 6
        <term>-6</term>
        <listitem>
          <para>
            Use IPv6 only even if the host machine is capable of IPv4.
            <option>-4</option> and <option>-6</option> are mutually
            exclusive.
d131 1
a131 1
        </listitem>
a133 1
      <!-- this is in source but not mentioned? does this matter? -->
d135 4
a138 8
        <term>-c <replaceable class="parameter">config-file</replaceable></term>
        <listitem>
          <para>
            Use <replaceable class="parameter">config-file</replaceable> as the
            configuration file instead of the default,
            <filename>/etc/lwresd.conf</filename>.
	    <!-- Should this be an absolute path name? -->
	    <term>-c</term> can not be used with <term>-C</term>.
d140 1
a140 1
        </listitem>
d144 5
a148 7
        <term>-C <replaceable class="parameter">config-file</replaceable></term>
        <listitem>
          <para>
            Use <replaceable class="parameter">config-file</replaceable> as the
            configuration file instead of the default,
            <filename>/etc/resolv.conf</filename>.
	    <term>-C</term> can not be used with <term>-c</term>.
d150 1
a150 1
        </listitem>
d154 10
a163 6
        <term>-d <replaceable class="parameter">debug-level</replaceable></term>
        <listitem>
          <para>
            Set the daemon's debug level to <replaceable class="parameter">debug-level</replaceable>.
            Debugging traces from <command>lwresd</command> become
            		more verbose as the debug level increases.
d165 1
a165 1
        </listitem>
d169 6
a174 4
        <term>-f</term>
        <listitem>
          <para>
            Run the server in the foreground (i.e. do not daemonize).
d176 1
a176 1
        </listitem>
d180 9
a188 5
        <term>-g</term>
        <listitem>
          <para>
            Run the server in the foreground and force all logging
            to <filename>stderr</filename>.
d190 1
a190 1
        </listitem>
d194 5
a198 6
        <term>-i <replaceable class="parameter">pid-file</replaceable></term>
        <listitem>
          <para>
            Use <replaceable class="parameter">pid-file</replaceable> as the
            PID file instead of the default,
            <filename>/var/run/lwresd.pid</filename>.
d200 7
a206 1
        </listitem>
d210 7
a216 11
        <term>-m <replaceable class="parameter">flag</replaceable></term>
        <listitem>
          <para>
            Turn on memory usage debugging flags.  Possible flags are
            <replaceable class="parameter">usage</replaceable>,
            <replaceable class="parameter">trace</replaceable>,
            <replaceable class="parameter">record</replaceable>,
            <replaceable class="parameter">size</replaceable>, and
            <replaceable class="parameter">mctx</replaceable>.  
            These correspond to the ISC_MEM_DEBUGXXXX flags described in
            <filename>&lt;isc/mem.h&gt;</filename>.
d218 11
a228 1
        </listitem>
d232 7
a238 9
        <term>-n <replaceable class="parameter">#cpus</replaceable></term>
        <listitem>
          <para>
            Create <replaceable class="parameter">#cpus</replaceable> worker threads
            to take advantage of multiple CPUs.  If not specified,
            <command>lwresd</command> will try to determine the
            number of CPUs present and create one thread per CPU.
            If it is unable to determine the number of CPUs, a
            single worker thread will be created.
d240 1
a240 1
        </listitem>
d244 4
a247 6
        <term>-P <replaceable class="parameter">port</replaceable></term>
        <listitem>
          <para>
            Listen for lightweight resolver queries on port
            <replaceable class="parameter">port</replaceable>.  If
            		not specified, the default is port 921.
d249 1
a249 71
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-p <replaceable class="parameter">port</replaceable></term>
        <listitem>
          <para>
            Send DNS lookups to port <replaceable class="parameter">port</replaceable>.  If not
            specified, the default is port 53.  This provides a
            way of testing the lightweight resolver daemon with a
            name server that listens for queries on a non-standard
            port number.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-s</term>
        <listitem>
          <para>
            Write memory usage statistics to <filename>stdout</filename>
            on exit.
          </para>
          <note>
            <para>
              This option is mainly of interest to BIND 9 developers
              and may be removed or changed in a future release.
            </para>
          </note>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-t <replaceable class="parameter">directory</replaceable></term>
        <listitem>
          <para>Chroot
	    to <replaceable class="parameter">directory</replaceable> after
            processing the command line arguments, but before
            reading the configuration file.
          </para>
          <warning>
            <para>
              This option should be used in conjunction with the
              <option>-u</option> option, as chrooting a process
              running as root doesn't enhance security on most
              systems; the way <function>chroot(2)</function> is
              defined allows a process with root privileges to
              escape a chroot jail.
            </para>
          </warning>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-u <replaceable class="parameter">user</replaceable></term>
        <listitem>
          <para>Setuid
	    to <replaceable class="parameter">user</replaceable> after completing
            privileged operations, such as creating sockets that
            listen on privileged ports.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-v</term>
        <listitem>
          <para>
            Report the version number and exit.
          </para>
        </listitem>
d262 4
a265 4
        <term><filename>/etc/resolv.conf</filename></term>
        <listitem>
          <para>
            The default configuration file.
d267 1
a267 1
        </listitem>
d271 4
a274 4
        <term><filename>/var/run/lwresd.pid</filename></term>
        <listitem>
          <para>
            The default process-id file.
d276 1
a276 1
        </listitem>
d285 13
a297 9
    <para><citerefentry>
        <refentrytitle>named</refentrytitle><manvolnum>8</manvolnum>
      </citerefentry>,
      <citerefentry>
        <refentrytitle>lwres</refentrytitle><manvolnum>3</manvolnum>
      </citerefentry>,
      <citerefentry>
        <refentrytitle>resolver</refentrytitle><manvolnum>5</manvolnum>
      </citerefentry>.
d303 2
a304 1
    <para><corpauthor>Internet Systems Consortium</corpauthor>
d308 4
a311 1
</refentry><!--
@


