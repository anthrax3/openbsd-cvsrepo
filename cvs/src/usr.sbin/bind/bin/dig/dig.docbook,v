head	1.6;
access;
symbols
	OPENBSD_6_2:1.6.0.38
	OPENBSD_6_2_BASE:1.6
	OPENBSD_6_1:1.6.0.40
	OPENBSD_6_1_BASE:1.6
	OPENBSD_6_0:1.6.0.36
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.6.0.32
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.6.0.34
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.26
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.6.0.30
	OPENBSD_5_6_BASE:1.6
	OPENBSD_5_5:1.6.0.28
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.6.0.24
	OPENBSD_5_4_BASE:1.6
	OPENBSD_5_3:1.6.0.22
	OPENBSD_5_3_BASE:1.6
	OPENBSD_5_2:1.6.0.20
	OPENBSD_5_2_BASE:1.6
	OPENBSD_5_1_BASE:1.6
	OPENBSD_5_1:1.6.0.18
	OPENBSD_5_0:1.6.0.16
	OPENBSD_5_0_BASE:1.6
	OPENBSD_4_9:1.6.0.14
	OPENBSD_4_9_BASE:1.6
	OPENBSD_4_8:1.6.0.12
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.6.0.8
	OPENBSD_4_7_BASE:1.6
	OPENBSD_4_6:1.6.0.10
	OPENBSD_4_6_BASE:1.6
	OPENBSD_4_5:1.6.0.6
	OPENBSD_4_5_BASE:1.6
	OPENBSD_4_4:1.6.0.4
	OPENBSD_4_4_BASE:1.6
	BIND_9_4_2_P1:1.1.1.4
	OPENBSD_4_3:1.6.0.2
	OPENBSD_4_3_BASE:1.6
	BIND_9_4_2:1.1.1.4
	OPENBSD_4_2:1.5.0.6
	OPENBSD_4_2_BASE:1.5
	OPENBSD_4_1:1.5.0.4
	OPENBSD_4_1_BASE:1.5
	BIND_9_3_4:1.1.1.3
	BIND_9_3_3:1.1.1.3
	OPENBSD_4_0:1.5.0.2
	OPENBSD_4_0_BASE:1.5
	BIND_9_3_2:1.1.1.3
	OPENBSD_3_9:1.4.0.6
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.4.0.4
	OPENBSD_3_8_BASE:1.4
	BIND_9_3_1:1.1.1.2
	OPENBSD_3_7:1.4.0.2
	OPENBSD_3_7_BASE:1.4
	BIND_9_3_0:1.1.1.2
	OPENBSD_3_6:1.3.0.4
	OPENBSD_3_6_BASE:1.3
	OPENBSD_3_5:1.3.0.2
	OPENBSD_3_5_BASE:1.3
	OPENBSD_3_4:1.2.0.4
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.2.0.2
	OPENBSD_3_3_BASE:1.2
	BIND_9_2_2_RC1:1.1.1.1
	ISC:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2007.12.09.13.39.42;	author jakob;	state Exp;
branches;
next	1.5;

1.5
date	2006.04.05.17.36.32;	author jakob;	state Exp;
branches;
next	1.4;

1.4
date	2004.09.28.17.14.02;	author jakob;	state Exp;
branches;
next	1.3;

1.3
date	2003.11.18.14.14.05;	author jakob;	state Exp;
branches;
next	1.2;

1.2
date	2003.03.05.09.18.31;	author jakob;	state Exp;
branches;
next	1.1;

1.1
date	2003.01.20.21.06.02;	author jakob;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.01.20.21.06.02;	author jakob;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2004.09.28.16.32.44;	author jakob;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2006.04.05.16.41.59;	author jakob;	state Exp;
branches;
next	1.1.1.4;

1.1.1.4
date	2007.12.09.12.33.18;	author jakob;	state Exp;
branches;
next	;


desc
@@


1.6
log
@resolve conflicts
@
text
@<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
               "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd"
	       [<!ENTITY mdash "&#8212;">]>
<!--
 - Copyright (C) 2004-2007  Internet Systems Consortium, Inc. ("ISC")
 - Copyright (C) 2000-2003  Internet Software Consortium.
 -
 - Permission to use, copy, modify, and/or distribute this software for any
 - purpose with or without fee is hereby granted, provided that the above
 - copyright notice and this permission notice appear in all copies.
 -
 - THE SOFTWARE IS PROVIDED "AS IS" AND ISC DISCLAIMS ALL WARRANTIES WITH
 - REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
 - AND FITNESS.  IN NO EVENT SHALL ISC BE LIABLE FOR ANY SPECIAL, DIRECT,
 - INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
 - LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE
 - OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
 - PERFORMANCE OF THIS SOFTWARE.
-->

<!-- $ISC: dig.docbook,v 1.17.18.21 2007/08/28 07:19:55 tbox Exp $ -->
<refentry id="man.dig">

  <refentryinfo>
    <date>Jun 30, 2000</date>
  </refentryinfo>

  <refmeta>
    <refentrytitle>dig</refentrytitle>
    <manvolnum>1</manvolnum>
    <refmiscinfo>BIND9</refmiscinfo>
  </refmeta>

  <refnamediv>
    <refname>dig</refname>
    <refpurpose>DNS lookup utility</refpurpose>
  </refnamediv>

  <docinfo>
    <copyright>
      <year>2004</year>
      <year>2005</year>
      <year>2006</year>
      <year>2007</year>
      <holder>Internet Systems Consortium, Inc. ("ISC")</holder>
    </copyright>
    <copyright>
      <year>2000</year>
      <year>2001</year>
      <year>2002</year>
      <year>2003</year>
      <holder>Internet Software Consortium.</holder>
    </copyright>
  </docinfo>

  <refsynopsisdiv>
    <cmdsynopsis>
      <command>dig</command>
      <arg choice="opt">@@server</arg>
      <arg><option>-b <replaceable class="parameter">address</replaceable></option></arg>
      <arg><option>-c <replaceable class="parameter">class</replaceable></option></arg>
      <arg><option>-f <replaceable class="parameter">filename</replaceable></option></arg>
      <arg><option>-k <replaceable class="parameter">filename</replaceable></option></arg>
      <arg><option>-p <replaceable class="parameter">port#</replaceable></option></arg>
      <arg><option>-q <replaceable class="parameter">name</replaceable></option></arg>
      <arg><option>-t <replaceable class="parameter">type</replaceable></option></arg>
      <arg><option>-x <replaceable class="parameter">addr</replaceable></option></arg>
      <arg><option>-y <replaceable class="parameter"><optional>hmac:</optional>name:key</replaceable></option></arg>
      <arg><option>-4</option></arg>
      <arg><option>-6</option></arg>
      <arg choice="opt">name</arg>
      <arg choice="opt">type</arg>
      <arg choice="opt">class</arg>
      <arg choice="opt" rep="repeat">queryopt</arg>
    </cmdsynopsis>

    <cmdsynopsis>
      <command>dig</command>
      <arg><option>-h</option></arg>
    </cmdsynopsis>

    <cmdsynopsis>
      <command>dig</command>
      <arg choice="opt" rep="repeat">global-queryopt</arg>
      <arg choice="opt" rep="repeat">query</arg>
    </cmdsynopsis>
  </refsynopsisdiv>

  <refsect1>
    <title>DESCRIPTION</title>
    <para><command>dig</command>
      (domain information groper) is a flexible tool
      for interrogating DNS name servers.  It performs DNS lookups and
      displays the answers that are returned from the name server(s) that
      were queried.  Most DNS administrators use <command>dig</command> to
      troubleshoot DNS problems because of its flexibility, ease of use and
      clarity of output.  Other lookup tools tend to have less functionality
      than <command>dig</command>.
    </para>

    <para>
      Although <command>dig</command> is normally used with
      command-line
      arguments, it also has a batch mode of operation for reading lookup
      requests from a file.  A brief summary of its command-line arguments
      and options is printed when the <option>-h</option> option is given.
      Unlike earlier versions, the BIND 9 implementation of
      <command>dig</command> allows multiple lookups to be issued
      from the
      command line.
    </para>

    <para>
      Unless it is told to query a specific name server,
      <command>dig</command> will try each of the servers listed
      in
      <filename>/etc/resolv.conf</filename>.
    </para>

    <para>
      When no command line arguments or options are given, will perform an
      NS query for "." (the root).
    </para>

    <para>
      It is possible to set per-user defaults for <command>dig</command> via
      <filename>${HOME}/.digrc</filename>.  This file is read and
      any options in it
      are applied before the command line arguments.
    </para>

    <para>
      The IN and CH class names overlap with the IN and CH top level
      domains names.  Either use the <option>-t</option> and
      <option>-c</option> options to specify the type and class or
      use the <option>-q</option> the specify the domain name or
      use "IN." and "CH." when looking up these top level domains.
    </para>

  </refsect1>

  <refsect1>
    <title>SIMPLE USAGE</title>

    <para>
      A typical invocation of <command>dig</command> looks like:
      <programlisting> dig @@server name type </programlisting>
      where:

      <variablelist>

        <varlistentry>
          <term><constant>server</constant></term>
          <listitem>
            <para>
              is the name or IP address of the name server to query.  This can
              be an IPv4
              address in dotted-decimal notation or an IPv6
              address in colon-delimited notation.  When the supplied
              <parameter>server</parameter> argument is a
              hostname,
              <command>dig</command> resolves that name before
              querying that name
              server.  If no <parameter>server</parameter>
              argument is provided,
              <command>dig</command> consults <filename>/etc/resolv.conf</filename>
              and queries the name servers listed there.  The reply from the
              name
              server that responds is displayed.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><constant>name</constant></term>
          <listitem>
            <para>
              is the name of the resource record that is to be looked up.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><constant>type</constant></term>
          <listitem>
            <para>
              indicates what type of query is required &mdash;
              ANY, A, MX, SIG, etc.
              <parameter>type</parameter> can be any valid query
              type.  If no
              <parameter>type</parameter> argument is supplied,
              <command>dig</command> will perform a lookup for an
              A record.
            </para>
          </listitem>
        </varlistentry>

      </variablelist>
    </para>

  </refsect1>

  <refsect1>
    <title>OPTIONS</title>

    <para>
      The <option>-b</option> option sets the source IP address of the query
      to <parameter>address</parameter>.  This must be a valid
      address on
      one of the host's network interfaces or "0.0.0.0" or "::".  An optional
      port
      may be specified by appending "#&lt;port&gt;"
    </para>

    <para>
      The default query class (IN for internet) is overridden by the
      <option>-c</option> option.  <parameter>class</parameter> is
      any valid
      class, such as HS for Hesiod records or CH for Chaosnet records.
    </para>

    <para>
      The <option>-f</option> option makes <command>dig </command>
      operate
      in batch mode by reading a list of lookup requests to process from the
      file <parameter>filename</parameter>.  The file contains a
      number of
      queries, one per line.  Each entry in the file should be organized in
      the same way they would be presented as queries to
      <command>dig</command> using the command-line interface.
    </para>

    <para>
      If a non-standard port number is to be queried, the
      <option>-p</option> option is used.  <parameter>port#</parameter> is
      the port number that <command>dig</command> will send its
      queries
      instead of the standard DNS port number 53.  This option would be used
      to test a name server that has been configured to listen for queries
      on a non-standard port number.
    </para>

    <para>
      The <option>-4</option> option forces <command>dig</command>
      to only
      use IPv4 query transport.  The <option>-6</option> option forces
      <command>dig</command> to only use IPv6 query transport.
    </para>

    <para>
      The <option>-t</option> option sets the query type to
      <parameter>type</parameter>.  It can be any valid query type
      which is
      supported in BIND 9.  The default query type is "A", unless the
      <option>-x</option> option is supplied to indicate a reverse lookup.
      A zone transfer can be requested by specifying a type of AXFR.  When
      an incremental zone transfer (IXFR) is required,
      <parameter>type</parameter> is set to <literal>ixfr=N</literal>.
      The incremental zone transfer will contain the changes made to the zone
      since the serial number in the zone's SOA record was
      <parameter>N</parameter>.
    </para>

    <para>
      The <option>-q</option> option sets the query name to 
      <parameter>name</parameter>.  This useful do distinguish the
      <parameter>name</parameter> from other arguments.
    </para>

    <para>
      Reverse lookups &mdash; mapping addresses to names &mdash; are simplified by the
      <option>-x</option> option.  <parameter>addr</parameter> is
      an IPv4
      address in dotted-decimal notation, or a colon-delimited IPv6 address.
      When this option is used, there is no need to provide the
      <parameter>name</parameter>, <parameter>class</parameter> and
      <parameter>type</parameter> arguments.  <command>dig</command>
      automatically performs a lookup for a name like
      <literal>11.12.13.10.in-addr.arpa</literal> and sets the
      query type and
      class to PTR and IN respectively.  By default, IPv6 addresses are
      looked up using nibble format under the IP6.ARPA domain.
      To use the older RFC1886 method using the IP6.INT domain
      specify the <option>-i</option> option.  Bit string labels (RFC2874)
      are now experimental and are not attempted.
    </para>

    <para>
      To sign the DNS queries sent by <command>dig</command> and
      their
      responses using transaction signatures (TSIG), specify a TSIG key file
      using the <option>-k</option> option.  You can also specify the TSIG
      key itself on the command line using the <option>-y</option> option;
      <parameter>hmac</parameter> is the type of the TSIG, default HMAC-MD5,
      <parameter>name</parameter> is the name of the TSIG key and
      <parameter>key</parameter> is the actual key.  The key is a
      base-64
      encoded string, typically generated by
      <citerefentry>
        <refentrytitle>dnssec-keygen</refentrytitle><manvolnum>8</manvolnum>
      </citerefentry>.

      Caution should be taken when using the <option>-y</option> option on
      multi-user systems as the key can be visible in the output from
      <citerefentry>
        <refentrytitle>ps</refentrytitle><manvolnum>1</manvolnum>
      </citerefentry>
      or in the shell's history file.  When
      using TSIG authentication with <command>dig</command>, the name
      server that is queried needs to know the key and algorithm that is
      being used.  In BIND, this is done by providing appropriate
      <command>key</command> and <command>server</command> statements in
      <filename>named.conf</filename>.
    </para>

  </refsect1>

  <refsect1>
    <title>QUERY OPTIONS</title>

    <para><command>dig</command>
      provides a number of query options which affect
      the way in which lookups are made and the results displayed.  Some of
      these set or reset flag bits in the query header, some determine which
      sections of the answer get printed, and others determine the timeout
      and retry strategies.
    </para>

    <para>
      Each query option is identified by a keyword preceded by a plus sign
      (<literal>+</literal>).  Some keywords set or reset an
      option.  These may be preceded
      by the string <literal>no</literal> to negate the meaning of
      that keyword.  Other
      keywords assign values to options like the timeout interval.  They
      have the form <option>+keyword=value</option>.
      The query options are:

      <variablelist>

        <varlistentry>
          <term><option>+[no]tcp</option></term>
          <listitem>
            <para>
              Use [do not use] TCP when querying name servers.  The default
              behavior is to use UDP unless an AXFR or IXFR query is
              requested, in
              which case a TCP connection is used.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]vc</option></term>
          <listitem>
            <para>
              Use [do not use] TCP when querying name servers.  This alternate
              syntax to <parameter>+[no]tcp</parameter> is
              provided for backwards
              compatibility.  The "vc" stands for "virtual circuit".
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]ignore</option></term>
          <listitem>
            <para>
              Ignore truncation in UDP responses instead of retrying with TCP.
               By
              default, TCP retries are performed.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+domain=somename</option></term>
          <listitem>
            <para>
              Set the search list to contain the single domain
              <parameter>somename</parameter>, as if specified in
              a
              <command>domain</command> directive in
              <filename>/etc/resolv.conf</filename>, and enable
              search list
              processing as if the <parameter>+search</parameter>
              option were given.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]search</option></term>
          <listitem>
            <para>
              Use [do not use] the search list defined by the searchlist or
              domain
              directive in <filename>resolv.conf</filename> (if
              any).
              The search list is not used by default.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]showsearch</option></term>
          <listitem>
            <para>
              Perform [do not perform] a search showing intermediate
	      results.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]defname</option></term>
          <listitem>
            <para>
              Deprecated, treated as a synonym for <parameter>+[no]search</parameter>
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]aaonly</option></term>
          <listitem>
            <para>
              Sets the "aa" flag in the query.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]aaflag</option></term>
          <listitem>
            <para>
              A synonym for <parameter>+[no]aaonly</parameter>.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]adflag</option></term>
          <listitem>
            <para>
              Set [do not set] the AD (authentic data) bit in the query.  The
              AD bit
              currently has a standard meaning only in responses, not in
              queries,
              but the ability to set the bit in the query is provided for
              completeness.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]cdflag</option></term>
          <listitem>
            <para>
              Set [do not set] the CD (checking disabled) bit in the query.
              This
              requests the server to not perform DNSSEC validation of
              responses.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]cl</option></term>
          <listitem>
            <para>
              Display [do not display] the CLASS when printing the record.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]ttlid</option></term>
          <listitem>
            <para>
              Display [do not display] the TTL when printing the record.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]recurse</option></term>
          <listitem>
            <para>
              Toggle the setting of the RD (recursion desired) bit in the
              query.
              This bit is set by default, which means <command>dig</command>
              normally sends recursive queries.  Recursion is automatically
              disabled
              when the <parameter>+nssearch</parameter> or
              <parameter>+trace</parameter> query options are
              used.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]nssearch</option></term>
          <listitem>
            <para>
              When this option is set, <command>dig</command>
              attempts to find the
              authoritative name servers for the zone containing the name
              being
              looked up and display the SOA record that each name server has
              for the
              zone.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]trace</option></term>
          <listitem>
            <para>
              Toggle tracing of the delegation path from the root name servers
              for
              the name being looked up.  Tracing is disabled by default.  When
              tracing is enabled, <command>dig</command> makes
              iterative queries to
              resolve the name being looked up.  It will follow referrals from
              the
              root servers, showing the answer from each server that was used
              to
              resolve the lookup.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]cmd</option></term>
          <listitem>
            <para>
              Toggles the printing of the initial comment in the output
              identifying
              the version of <command>dig</command> and the query
              options that have
              been applied.  This comment is printed by default.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]short</option></term>
          <listitem>
            <para>
              Provide a terse answer.  The default is to print the answer in a
              verbose form.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]identify</option></term>
          <listitem>
            <para>
              Show [or do not show] the IP address and port number that
              supplied the
              answer when the <parameter>+short</parameter> option
              is enabled.  If
              short form answers are requested, the default is not to show the
              source address and port number of the server that provided the
              answer.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]comments</option></term>
          <listitem>
            <para>
              Toggle the display of comment lines in the output.  The default
              is to
              print comments.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]stats</option></term>
          <listitem>
            <para>
              This query option toggles the printing of statistics: when the
              query
              was made, the size of the reply and so on.  The default
              behavior is
              to print the query statistics.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]qr</option></term>
          <listitem>
            <para>
              Print [do not print] the query as it is sent.
              By default, the query is not printed.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]question</option></term>
          <listitem>
            <para>
              Print [do not print] the question section of a query when an
              answer is
              returned.  The default is to print the question section as a
              comment.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]answer</option></term>
          <listitem>
            <para>
              Display [do not display] the answer section of a reply.  The
              default
              is to display it.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]authority</option></term>
          <listitem>
            <para>
              Display [do not display] the authority section of a reply.  The
              default is to display it.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]additional</option></term>
          <listitem>
            <para>
              Display [do not display] the additional section of a reply.
              The default is to display it.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]all</option></term>
          <listitem>
            <para>
              Set or clear all display flags.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+time=T</option></term>
          <listitem>
            <para>

              Sets the timeout for a query to
              <parameter>T</parameter> seconds.  The default
	      timeout is 5 seconds.
              An attempt to set <parameter>T</parameter> to less
              than 1 will result
              in a query timeout of 1 second being applied.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+tries=T</option></term>
          <listitem>
            <para>
              Sets the number of times to try UDP queries to server to
              <parameter>T</parameter> instead of the default, 3.
              If
              <parameter>T</parameter> is less than or equal to
              zero, the number of
              tries is silently rounded up to 1.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+retry=T</option></term>
          <listitem>
            <para>
              Sets the number of times to retry UDP queries to server to
              <parameter>T</parameter> instead of the default, 2.
              Unlike
              <parameter>+tries</parameter>, this does not include
              the initial
              query.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+ndots=D</option></term>
          <listitem>
            <para>
              Set the number of dots that have to appear in
              <parameter>name</parameter> to <parameter>D</parameter> for it to be
              considered absolute.  The default value is that defined using
              the
              ndots statement in <filename>/etc/resolv.conf</filename>, or 1 if no
              ndots statement is present.  Names with fewer dots are
              interpreted as
              relative names and will be searched for in the domains listed in
              the
              <option>search</option> or <option>domain</option> directive in
              <filename>/etc/resolv.conf</filename>.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+bufsize=B</option></term>
          <listitem>
            <para>
              Set the UDP message buffer size advertised using EDNS0 to
              <parameter>B</parameter> bytes.  The maximum and minimum sizes
	      of this buffer are 65535 and 0 respectively.  Values outside
	      this range are rounded up or down appropriately.  
	      Values other than zero will cause a EDNS query to be sent.
            </para>
          </listitem>
        </varlistentry>

	<varlistentry>
	  <term><option>+edns=#</option></term>
	  <listitem>
	    <para>
	       Specify the EDNS version to query with.  Valid values
	       are 0 to 255.  Setting the EDNS version will cause a
	       EDNS query to be sent.  <option>+noedns</option> clears the
	       remembered EDNS version.
	    </para>
	  </listitem>
	</varlistentry>

        <varlistentry>
          <term><option>+[no]multiline</option></term>
          <listitem>
            <para>
              Print records like the SOA records in a verbose multi-line
              format with human-readable comments.  The default is to print
              each record on a single line, to facilitate machine parsing
              of the <command>dig</command> output.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]fail</option></term>
          <listitem>
            <para>
              Do not try the next server if you receive a SERVFAIL.  The
              default is
              to not try the next server which is the reverse of normal stub
              resolver
              behavior.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]besteffort</option></term>
          <listitem>
            <para>
              Attempt to display the contents of messages which are malformed.
              The default is to not display malformed answers.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]dnssec</option></term>
          <listitem>
            <para>
              Requests DNSSEC records be sent by setting the DNSSEC OK bit
              (DO)
              in the OPT record in the additional section of the query.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]sigchase</option></term>
          <listitem>
            <para>
              Chase DNSSEC signature chains.  Requires dig be compiled with
              -DDIG_SIGCHASE.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+trusted-key=####</option></term>
          <listitem>
            <para>
              Specifies a file containing trusted keys to be used with
	      <option>+sigchase</option>.  Each DNSKEY record must be
	      on its own line.
            </para>
	    <para>
	      If not specified <command>dig</command> will look for
	      <filename>/etc/trusted-key.key</filename> then
	      <filename>trusted-key.key</filename> in the current directory.
	    </para>
	    <para>
              Requires dig be compiled with -DDIG_SIGCHASE.
	    </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]topdown</option></term>
          <listitem>
            <para>
              When chasing DNSSEC signature chains perform a top-down
              validation.
              Requires dig be compiled with -DDIG_SIGCHASE.
            </para>
          </listitem>
        </varlistentry>



      </variablelist>

    </para>
  </refsect1>

  <refsect1>
    <title>MULTIPLE QUERIES</title>

    <para>
      The BIND 9 implementation of <command>dig </command>
      supports
      specifying multiple queries on the command line (in addition to
      supporting the <option>-f</option> batch file option).  Each of those
      queries can be supplied with its own set of flags, options and query
      options.
    </para>

    <para>
      In this case, each <parameter>query</parameter> argument
      represent an
      individual query in the command-line syntax described above.  Each
      consists of any of the standard options and flags, the name to be
      looked up, an optional query type and class and any query options that
      should be applied to that query.
    </para>

    <para>
      A global set of query options, which should be applied to all queries,
      can also be supplied.  These global query options must precede the
      first tuple of name, class, type, options, flags, and query options
      supplied on the command line.  Any global query options (except
      the <option>+[no]cmd</option> option) can be
      overridden by a query-specific set of query options.  For example:
      <programlisting>
dig +qr www.isc.org any -x 127.0.0.1 isc.org ns +noqr
</programlisting>
      shows how <command>dig</command> could be used from the
      command line
      to make three lookups: an ANY query for <literal>www.isc.org</literal>, a
      reverse lookup of 127.0.0.1 and a query for the NS records of
      <literal>isc.org</literal>.

      A global query option of <parameter>+qr</parameter> is
      applied, so
      that <command>dig</command> shows the initial query it made
      for each
      lookup.  The final query has a local query option of
      <parameter>+noqr</parameter> which means that <command>dig</command>
      will not print the initial query when it looks up the NS records for
      <literal>isc.org</literal>.
    </para>

  </refsect1>

  <refsect1>
    <title>IDN SUPPORT</title>
    <para>
      If <command>dig</command> has been built with IDN (internationalized
      domain name) support, it can accept and display non-ASCII domain names.
      <command>dig</command> appropriately converts character encoding of
      domain name before sending a request to DNS server or displaying a
      reply from the server.
      If you'd like to turn off the IDN support for some reason, defines
      the <envar>IDN_DISABLE</envar> environment variable.
      The IDN support is disabled if the variable is set when 
      <command>dig</command> runs.
    </para>
  </refsect1>

  <refsect1>
    <title>FILES</title>
    <para><filename>/etc/resolv.conf</filename>
    </para>
    <para><filename>${HOME}/.digrc</filename>
    </para>
  </refsect1>

  <refsect1>
    <title>SEE ALSO</title>
    <para><citerefentry>
        <refentrytitle>host</refentrytitle><manvolnum>1</manvolnum>
      </citerefentry>,
      <citerefentry>
        <refentrytitle>named</refentrytitle><manvolnum>8</manvolnum>
      </citerefentry>,
      <citerefentry>
        <refentrytitle>dnssec-keygen</refentrytitle><manvolnum>8</manvolnum>
      </citerefentry>,
      <citetitle>RFC1035</citetitle>.
    </para>
  </refsect1>

  <refsect1>
    <title>BUGS</title>
    <para>
      There are probably too many query options.
    </para>
  </refsect1>
</refentry><!--
 - Local variables:
 - mode: sgml
 - End:
-->
@


1.5
log
@resolve conflicts
@
text
@d1 2
a2 2
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.0//EN"
               "http://www.oasis-open.org/docbook/xml/4.0/docbookx.dtd"
d5 1
a5 1
 - Copyright (C) 2004, 2005  Internet Systems Consortium, Inc. ("ISC")
d8 1
a8 1
 - Permission to use, copy, modify, and distribute this software for any
d21 2
a22 1
<!-- $ISC: dig.docbook,v 1.4.2.7.4.12 2005/08/30 00:50:29 marka Exp $ -->
d24 14
a37 11
<refentry>

<refentryinfo>
<date>Jun 30, 2000</date>
</refentryinfo>

<refmeta>
<refentrytitle>dig</refentrytitle>
<manvolnum>1</manvolnum>
<refmiscinfo>BIND9</refmiscinfo>
</refmeta>
d43 2
d56 677
a732 482
<refnamediv>
<refname>dig</refname>
<refpurpose>DNS lookup utility</refpurpose>
</refnamediv>

<refsynopsisdiv>
<cmdsynopsis>
<command>dig</command>
<arg choice="opt">@@server</arg>
<arg><option>-b <replaceable class="parameter">address</replaceable></option></arg>
<arg><option>-c <replaceable class="parameter">class</replaceable></option></arg>
<arg><option>-f <replaceable class="parameter">filename</replaceable></option></arg>
<arg><option>-k <replaceable class="parameter">filename</replaceable></option></arg>
<arg><option>-p <replaceable class="parameter">port#</replaceable></option></arg>
<arg><option>-t <replaceable class="parameter">type</replaceable></option></arg>
<arg><option>-x <replaceable class="parameter">addr</replaceable></option></arg>
<arg><option>-y <replaceable class="parameter">name:key</replaceable></option></arg>
<arg><option>-4</option></arg>
<arg><option>-6</option></arg>
<arg choice="opt">name</arg>
<arg choice="opt">type</arg>
<arg choice="opt">class</arg>
<arg choice="opt" rep="repeat">queryopt</arg>
</cmdsynopsis>

<cmdsynopsis>
<command>dig</command>
<arg><option>-h</option></arg>
</cmdsynopsis>

<cmdsynopsis>
<command>dig</command>
<arg choice="opt" rep="repeat">global-queryopt</arg>
<arg choice="opt" rep="repeat">query</arg>
</cmdsynopsis>
</refsynopsisdiv>

<refsect1>
<title>DESCRIPTION</title>
<para>
<command>dig</command> (domain information groper) is a flexible tool
for interrogating DNS name servers.  It performs DNS lookups and
displays the answers that are returned from the name server(s) that
were queried.  Most DNS administrators use <command>dig</command> to
troubleshoot DNS problems because of its flexibility, ease of use and
clarity of output.  Other lookup tools tend to have less functionality
than <command>dig</command>.
</para>

<para>
Although <command>dig</command> is normally used with command-line
arguments, it also has a batch mode of operation for reading lookup
requests from a file.  A brief summary of its command-line arguments
and options is printed when the <option>-h</option> option is given.
Unlike earlier versions, the BIND9 implementation of
<command>dig</command> allows multiple lookups to be issued from the
command line.
</para>

<para>
Unless it is told to query a specific name server,
<command>dig</command> will try each of the servers listed in
<filename>/etc/resolv.conf</filename>.
</para>

<para>
When no command line arguments or options are given, will perform an
NS query for "." (the root).
</para>

<para>
It is possible to set per-user defaults for <command>dig</command> via
<filename>${HOME}/.digrc</filename>.  This file is read and any options in it
are applied before the command line arguments.
</para>

</refsect1>

<refsect1>
<title>SIMPLE USAGE</title>

<para>
A typical invocation of <command>dig</command> looks like:
<programlisting> dig @@server name type </programlisting> where:

<variablelist>

<varlistentry><term><constant>server</constant></term>
<listitem><para>
is the name or IP address of the name server to query.  This can be an IPv4
address in dotted-decimal notation or an IPv6
address in colon-delimited notation.  When the supplied
<parameter>server</parameter> argument is a hostname,
<command>dig</command> resolves that name before querying that name
server.  If no <parameter>server</parameter> argument is provided,
<command>dig</command> consults <filename>/etc/resolv.conf</filename>
and queries the name servers listed there.  The reply from the name
server that responds is displayed.
</para></listitem></varlistentry>

<varlistentry><term><constant>name</constant></term>
<listitem><para>
is the name of the resource record that is to be looked up.
</para></listitem></varlistentry>

<varlistentry><term><constant>type</constant></term>
<listitem><para>
indicates what type of query is required &mdash;
ANY, A, MX, SIG, etc.
<parameter>type</parameter> can be any valid query type.  If no
<parameter>type</parameter> argument is supplied,
<command>dig</command> will perform a lookup for an A record.
</para></listitem></varlistentry>

</variablelist>
</para>

</refsect1>

<refsect1>
<title>OPTIONS</title>

<para>
The <option>-b</option> option sets the source IP address of the query
to <parameter>address</parameter>.  This must be a valid address on
one of the host's network interfaces or "0.0.0.0" or "::".  An optional port
may be specified by appending "#&lt;port&gt;"
</para>

<para>
The default query class (IN for internet) is overridden by the
<option>-c</option> option.  <parameter>class</parameter> is any valid
class, such as HS for Hesiod records or CH for CHAOSNET records.
</para>

<para>
The <option>-f</option> option makes <command>dig </command> operate
in batch mode by reading a list of lookup requests to process from the
file <parameter>filename</parameter>.  The file contains a number of
queries, one per line.  Each entry in the file should be organised in
the same way they would be presented as queries to
<command>dig</command> using the command-line interface.
</para>

<para>
If a non-standard port number is to be queried, the
<option>-p</option> option is used.  <parameter>port#</parameter> is
the port number that <command>dig</command> will send its queries
instead of the standard DNS port number 53.  This option would be used
to test a name server that has been configured to listen for queries
on a non-standard port number.
</para>

<para>
The <option>-4</option> option forces <command>dig</command> to only
use IPv4 query transport.  The <option>-6</option> option forces
<command>dig</command> to only use IPv6 query transport.
</para>

<para>
The <option>-t</option> option sets the query type to
<parameter>type</parameter>.  It can be any valid query type which is
supported in BIND9.  The default query type "A", unless the
<option>-x</option> option is supplied to indicate a reverse lookup.
A zone transfer can be requested by specifying a type of AXFR.  When
an incremental zone transfer (IXFR) is required,
<parameter>type</parameter> is set to <literal>ixfr=N</literal>.
The incremental zone transfer will contain the changes made to the zone
since the serial number in the zone's SOA record was
<parameter>N</parameter>.
</para>

<para>
Reverse lookups - mapping addresses to names - are simplified by the
<option>-x</option> option.  <parameter>addr</parameter> is an IPv4
address in dotted-decimal notation, or a colon-delimited IPv6 address.
When this option is used, there is no need to provide the
<parameter>name</parameter>, <parameter>class</parameter> and
<parameter>type</parameter> arguments.  <command>dig</command>
automatically performs a lookup for a name like
<literal>11.12.13.10.in-addr.arpa</literal> and sets the query type and
class to PTR and IN respectively.  By default, IPv6 addresses are
looked up using nibble format under the IP6.ARPA domain.
To use the older RFC1886 method using the IP6.INT domain 
specify the <option>-i</option> option.  Bit string labels (RFC2874)
are now experimental and are not attempted.
</para>

<para>
To sign the DNS queries sent by <command>dig</command> and their
responses using transaction signatures (TSIG), specify a TSIG key file
using the <option>-k</option> option.  You can also specify the TSIG
key itself on the command line using the <option>-y</option> option;
<parameter>name</parameter> is the name of the TSIG key and
<parameter>key</parameter> is the actual key.  The key is a base-64
encoded string, typically generated by <citerefentry>
<refentrytitle>dnssec-keygen</refentrytitle><manvolnum>8</manvolnum>
</citerefentry>.

Caution should be taken when using the <option>-y</option> option on
multi-user systems as the key can be visible in the output from
<citerefentry> <refentrytitle>ps</refentrytitle><manvolnum>1
</manvolnum> </citerefentry> or in the shell's history file.  When
using TSIG authentication with <command>dig</command>, the name
server that is queried needs to know the key and algorithm that is
being used.  In BIND, this is done by providing appropriate
<command>key</command> and <command>server</command> statements in
<filename>named.conf</filename>.
</para>

</refsect1>

<refsect1>
<title>QUERY OPTIONS</title>

<para>
<command>dig</command> provides a number of query options which affect
the way in which lookups are made and the results displayed.  Some of
these set or reset flag bits in the query header, some determine which
sections of the answer get printed, and others determine the timeout
and retry strategies.
</para>

<para>
Each query option is identified by a keyword preceded by a plus sign
(<literal>+</literal>).  Some keywords set or reset an option.  These may be preceded
by the string <literal>no</literal> to negate the meaning of that keyword.  Other
keywords assign values to options like the timeout interval.  They
have the form <option>+keyword=value</option>.
The query options are:

<variablelist>

<varlistentry><term><option>+[no]tcp</option></term>
<listitem><para>
Use [do not use] TCP when querying name servers.  The default
behaviour is to use UDP unless an AXFR or IXFR query is requested, in
which case a TCP connection is used.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]vc</option></term>
<listitem><para>
Use [do not use] TCP when querying name servers.  This alternate
syntax to <parameter>+[no]tcp</parameter> is provided for backwards
compatibility.  The "vc" stands for "virtual circuit".
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]ignore</option></term>
<listitem><para>
Ignore truncation in UDP responses instead of retrying with TCP.  By
default, TCP retries are performed.
</para></listitem></varlistentry>

<varlistentry><term><option>+domain=somename</option></term>
<listitem><para>
Set the search list to contain the single domain
<parameter>somename</parameter>, as if specified in a
<command>domain</command> directive in
<filename>/etc/resolv.conf</filename>, and enable search list
processing as if the <parameter>+search</parameter> option were given.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]search</option></term>
<listitem><para>
Use [do not use] the search list defined by the searchlist or domain
directive in <filename>resolv.conf</filename> (if any).
The search list is not used by default.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]defname</option></term>
<listitem><para>
Deprecated, treated as a synonym for <parameter>+[no]search</parameter>
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]aaonly</option></term>
<listitem><para>
Sets the "aa" flag in the query.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]aaflag</option></term>
<listitem><para>
A synonym for <parameter>+[no]aaonly</parameter>.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]adflag</option></term>
<listitem><para>
Set [do not set] the AD (authentic data) bit in the query.  The AD bit
currently has a standard meaning only in responses, not in queries,
but the ability to set the bit in the query is provided for
completeness.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]cdflag</option></term>
<listitem><para>
Set [do not set] the CD (checking disabled) bit in the query.  This
requests the server to not perform DNSSEC validation of responses.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]cl</option></term>
<listitem><para>
Display [do not display] the CLASS when printing the record.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]ttlid</option></term>
<listitem><para>
Display [do not display] the TTL when printing the record.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]recurse</option></term>
<listitem><para>
Toggle the setting of the RD (recursion desired) bit in the query.
This bit is set by default, which means <command>dig</command>
normally sends recursive queries.  Recursion is automatically disabled
when the <parameter>+nssearch</parameter> or
<parameter>+trace</parameter> query options are used.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]nssearch</option></term>
<listitem><para>
When this option is set, <command>dig</command> attempts to find the
authoritative name servers for the zone containing the name being
looked up and display the SOA record that each name server has for the
zone.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]trace</option></term>
<listitem><para>
Toggle tracing of the delegation path from the root name servers for
the name being looked up.  Tracing is disabled by default.  When
tracing is enabled, <command>dig</command> makes iterative queries to
resolve the name being looked up.  It will follow referrals from the
root servers, showing the answer from each server that was used to
resolve the lookup.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]cmd</option></term>
<listitem><para>
toggles the printing of the initial comment in the output identifying
the version of <command>dig</command> and the query options that have
been applied.  This comment is printed by default.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]short</option></term>
<listitem><para>
Provide a terse answer.  The default is to print the answer in a
verbose form.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]identify</option></term>
<listitem><para>
Show [or do not show] the IP address and port number that supplied the
answer when the <parameter>+short</parameter> option is enabled.  If
short form answers are requested, the default is not to show the
source address and port number of the server that provided the answer.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]comments</option></term>
<listitem><para>
Toggle the display of comment lines in the output.  The default is to
print comments.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]stats</option></term>
<listitem><para>
This query option toggles the printing of statistics: when the query
was made, the size of the reply and so on.  The default behaviour is
to print the query statistics.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]qr</option></term>
<listitem><para>
Print [do not print] the query as it is sent.
By default, the query is not printed.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]question</option></term>
<listitem><para>
Print [do not print] the question section of a query when an answer is
returned.  The default is to print the question section as a comment.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]answer</option></term>
<listitem><para>
Display [do not display] the answer section of a reply.  The default
is to display it.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]authority</option></term>
<listitem><para>
Display [do not display] the authority section of a reply.  The
default is to display it.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]additional</option></term>
<listitem><para>
Display [do not display] the additional section of a reply.
The default is to display it.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]all</option></term>
<listitem><para>
Set or clear all display flags.
</para></listitem></varlistentry>

<varlistentry><term><option>+time=T</option></term>
<listitem><para>

Sets the timeout for a query to
<parameter>T</parameter> seconds.  The default time out is 5 seconds.
An attempt to set <parameter>T</parameter> to less than 1 will result
in a query timeout of 1 second being applied.
</para></listitem></varlistentry>

<varlistentry><term><option>+tries=T</option></term>
<listitem><para>
Sets the number of times to try UDP queries to server to
<parameter>T</parameter> instead of the default, 3.  If
<parameter>T</parameter> is less than or equal to zero, the number of
tries is silently rounded up to 1.
</para></listitem></varlistentry>

<varlistentry><term><option>+retry=T</option></term>
<listitem><para>
Sets the number of times to retry UDP queries to server to
<parameter>T</parameter> instead of the default, 2.  Unlike
<parameter>+tries</parameter>, this does not include the initial
query.
</para></listitem></varlistentry>

<varlistentry><term><option>+ndots=D</option></term>
<listitem><para>
Set the number of dots that have to appear in
<parameter>name</parameter> to <parameter>D</parameter> for it to be
considered absolute.  The default value is that defined using the
ndots statement in <filename>/etc/resolv.conf</filename>, or 1 if no
ndots statement is present.  Names with fewer dots are interpreted as
relative names and will be searched for in the domains listed in the
<option>search</option> or <option>domain</option> directive in
<filename>/etc/resolv.conf</filename>.
</para></listitem></varlistentry>

<varlistentry><term><option>+bufsize=B</option></term>
<listitem><para>
Set the UDP message buffer size advertised using EDNS0 to
<parameter>B</parameter> bytes.  The maximum and minimum sizes of this
buffer are 65535 and 0 respectively.  Values outside this range are
rounded up or down appropriately.
</para>
</listitem></varlistentry>

<varlistentry><term><option>+[no]multiline</option></term>
<listitem><para>
Print records like the SOA records in a verbose multi-line
format with human-readable comments.  The default is to print
each record on a single line, to facilitate machine parsing 
of the <command>dig</command> output.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]fail</option></term>
<listitem><para>
Do not try the next server if you receive a SERVFAIL.  The default is
to not try the next server which is the reverse of normal stub resolver
behaviour.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]besteffort</option></term>
<listitem><para>
Attempt to display the contents of messages which are malformed.
The default is to not display malformed answers.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]dnssec</option></term>
<listitem><para>
Requests DNSSEC records be sent by setting the DNSSEC OK bit (DO)
in the OPT record in the additional section of the query.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]sigchase</option></term>
<listitem><para>
Chase DNSSEC signature chains.  Requires dig be compiled with
-DDIG_SIGCHASE.
</para></listitem></varlistentry>
d735 1
a735 1
	  <term><option>+trusted-key=####</option></term>
d738 69
a806 1
	      Specifies a file containing trusted keys to be used with
d809 1
a809 1
	    </para>
d816 1
a816 1
	      Requires dig be compiled with -DDIG_SIGCHASE.
d818 2
a819 2
	  </listitem>
	</varlistentry>
d821 10
a830 5
<varlistentry><term><option>+[no]topdown</option></term>
<listitem><para>
When chasing DNSSEC signature chains perform a top down validation.
Requires dig be compiled with -DDIG_SIGCHASE.
</para></listitem></varlistentry>
d834 34
a867 32
</variablelist>

</para>
</refsect1>

<refsect1>
<title>MULTIPLE QUERIES</title>

<para>
The BIND 9 implementation of <command>dig </command> supports
specifying multiple queries on the command line (in addition to
supporting the <option>-f</option> batch file option).  Each of those
queries can be supplied with its own set of flags, options and query
options.
</para>

<para>
In this case, each <parameter>query</parameter> argument represent an
individual query in the command-line syntax described above.  Each
consists of any of the standard options and flags, the name to be
looked up, an optional query type and class and any query options that
should be applied to that query.
</para>

<para>
A global set of query options, which should be applied to all queries,
can also be supplied.  These global query options must precede the
first tuple of name, class, type, options, flags, and query options
supplied on the command line.  Any global query options (except
the <option>+[no]cmd</option> option) can be
overridden by a query-specific set of query options.  For example:
<programlisting>
d870 67
a936 48
shows how <command>dig</command> could be used from the command line
to make three lookups: an ANY query for <literal>www.isc.org</literal>, a
reverse lookup of 127.0.0.1 and a query for the NS records of
<literal>isc.org</literal>.

A global query option of <parameter>+qr</parameter> is applied, so
that <command>dig</command> shows the initial query it made for each
lookup.  The final query has a local query option of
<parameter>+noqr</parameter> which means that <command>dig</command>
will not print the initial query when it looks up the NS records for
<literal>isc.org</literal>.
</para>

</refsect1>

<refsect1>
<title>FILES</title>
<para>
<filename>/etc/resolv.conf</filename>
</para>
<para>
<filename>${HOME}/.digrc</filename>
</para>
</refsect1>

<refsect1>
<title>SEE ALSO</title>
<para>
<citerefentry>
<refentrytitle>host</refentrytitle><manvolnum>1</manvolnum>
</citerefentry>,
<citerefentry>
<refentrytitle>named</refentrytitle><manvolnum>8</manvolnum>
</citerefentry>,
<citerefentry>
<refentrytitle>dnssec-keygen</refentrytitle><manvolnum>8</manvolnum>
</citerefentry>,
<citetitle>RFC1035</citetitle>.
</para>
</refsect1>

<refsect1>
<title>BUGS </title>
<para>
There are probably too many query options. 
</para>
</refsect1>
</refentry>
@


1.4
log
@resolve conflicts
@
text
@d1 3
a3 1
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook V4.1//EN">
d5 1
a5 1
 - Copyright (C) 2004  Internet Systems Consortium, Inc. ("ISC")
d21 1
a21 1
<!-- $ISC: dig.docbook,v 1.4.2.7.4.9 2004/06/23 04:19:41 marka Exp $ -->
d35 15
d58 1
a58 1
<arg choice=opt>@@server</arg>
d69 4
a72 4
<arg choice=opt>name</arg>
<arg choice=opt>type</arg>
<arg choice=opt>class</arg>
<arg choice=opt rep=repeat>queryopt</arg>
d82 2
a83 2
<arg choice=opt rep=repeat>global-queryopt</arg>
<arg choice=opt rep=repeat>query</arg>
d533 18
a550 5
<varlistentry><term><option>+trusted-key=####</option></term>
<listitem><para>
Specify a trusted key to be used with <option>+sigchase</option>.
Requires dig be compiled with -DDIG_SIGCHASE.
</para></listitem></varlistentry>
@


1.3
log
@update to BIND v9.2.3. ok todd@@
@
text
@d3 2
a4 1
 - Copyright (C) 2000, 2001, 2003  Internet Software Consortium.
d10 7
a16 8
 - THE SOFTWARE IS PROVIDED "AS IS" AND INTERNET SOFTWARE CONSORTIUM
 - DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL
 - IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL
 - INTERNET SOFTWARE CONSORTIUM BE LIABLE FOR ANY SPECIAL, DIRECT,
 - INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING
 - FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT,
 - NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION
 - WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
d19 1
a19 1
<!-- $ISC: dig.docbook,v 1.4.2.7 2003/05/12 02:50:15 marka Exp $ -->
d50 2
d104 1
a104 1
It is possible to set per user defaults for <command>dig</command> via
d106 1
a106 1
are applied before the command line arguements.
d158 2
a159 1
one of the host's network interfaces.
d187 6
d215 4
a218 3
looked up using the IP6.ARPA domain and binary labels as defined in
RFC2874.  To use the older RFC1886 method using the IP6.INT domain and
"nibble" labels, specify the <option>-n</option> (nibble) option.
d309 6
a314 3
This option does nothing.  It is provided for compatibility with old
versions of <command>dig</command> where it set an unimplemented
resolver flag.
d331 10
d448 1
a448 1
Sets the number of times to retry UDP queries to server to
d451 9
a459 1
retries is silently rounded up to 1.
d489 1
a489 2
</para>
</listitem></varlistentry>
d496 1
a496 1
</para>
a497 1
</listitem></varlistentry>
d502 1
a502 1
</para>
a503 1
</listitem></varlistentry>
d508 21
a528 1
</para>
@


1.2
log
@update to BIND 9.2.2-release. ok millert@@
@
text
@d19 1
a19 1
<!-- $ISC: dig.docbook,v 1.4.2.2.4.2 2003/02/17 07:05:02 marka Exp $ -->
d101 6
d318 1
a318 1
<varlistentry><term><option>+[no]recursive</option></term>
d479 1
a479 1
in the the OPT record in the additional section of the query.
d535 3
@


1.1
log
@Initial revision
@
text
@d3 1
a3 1
 - Copyright (C) 2000, 2001  Internet Software Consortium.
d19 1
a19 1
<!-- $ISC: dig.docbook,v 1.4.2.2 2001/11/28 23:35:02 gson Exp $ -->
d293 1
a293 1
This option does nothing.  It is provided for compatibilty with old
@


1.1.1.1
log
@ISC BIND version 9.2.2rc1
@
text
@@


1.1.1.2
log
@ISC BIND version 9.3.0. ok deraadt@@
@
text
@d3 1
a3 2
 - Copyright (C) 2004  Internet Systems Consortium, Inc. ("ISC")
 - Copyright (C) 2000-2003  Internet Software Consortium.
d9 8
a16 7
 - THE SOFTWARE IS PROVIDED "AS IS" AND ISC DISCLAIMS ALL WARRANTIES WITH
 - REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
 - AND FITNESS.  IN NO EVENT SHALL ISC BE LIABLE FOR ANY SPECIAL, DIRECT,
 - INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
 - LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE
 - OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
 - PERFORMANCE OF THIS SOFTWARE.
d19 1
a19 1
<!-- $ISC: dig.docbook,v 1.4.2.7.4.9 2004/06/23 04:19:41 marka Exp $ -->
a49 2
<arg><option>-4</option></arg>
<arg><option>-6</option></arg>
a100 6
<para>
It is possible to set per-user defaults for <command>dig</command> via
<filename>${HOME}/.digrc</filename>.  This file is read and any options in it
are applied before the command line arguments.
</para>

d150 1
a150 2
one of the host's network interfaces or "0.0.0.0" or "::".  An optional port
may be specified by appending "#&lt;port&gt;"
a177 6
The <option>-4</option> option forces <command>dig</command> to only
use IPv4 query transport.  The <option>-6</option> option forces
<command>dig</command> to only use IPv6 query transport.
</para>

<para>
d200 3
a202 4
looked up using nibble format under the IP6.ARPA domain.
To use the older RFC1886 method using the IP6.INT domain 
specify the <option>-i</option> option.  Bit string labels (RFC2874)
are now experimental and are not attempted.
d293 3
a295 6
Sets the "aa" flag in the query.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]aaflag</option></term>
<listitem><para>
A synonym for <parameter>+[no]aaonly</parameter>.
d312 1
a312 11
<varlistentry><term><option>+[no]cl</option></term>
<listitem><para>
Display [do not display] the CLASS when printing the record.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]ttlid</option></term>
<listitem><para>
Display [do not display] the TTL when printing the record.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]recurse</option></term>
d419 1
a419 1
Sets the number of times to try UDP queries to server to
d422 1
a422 9
tries is silently rounded up to 1.
</para></listitem></varlistentry>

<varlistentry><term><option>+retry=T</option></term>
<listitem><para>
Sets the number of times to retry UDP queries to server to
<parameter>T</parameter> instead of the default, 2.  Unlike
<parameter>+tries</parameter>, this does not include the initial
query.
d452 2
a453 1
</para></listitem></varlistentry>
d460 1
a460 1
</para></listitem></varlistentry>
d462 1
d467 1
a467 1
</para></listitem></varlistentry>
d469 1
d473 2
a474 22
in the OPT record in the additional section of the query.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]sigchase</option></term>
<listitem><para>
Chase DNSSEC signature chains.  Requires dig be compiled with
-DDIG_SIGCHASE.
</para></listitem></varlistentry>

<varlistentry><term><option>+trusted-key=####</option></term>
<listitem><para>
Specify a trusted key to be used with <option>+sigchase</option>.
Requires dig be compiled with -DDIG_SIGCHASE.
</para></listitem></varlistentry>

<varlistentry><term><option>+[no]topdown</option></term>
<listitem><para>
When chasing DNSSEC signature chains perform a top down validation.
Requires dig be compiled with -DDIG_SIGCHASE.
</para></listitem></varlistentry>


a528 3
</para>
<para>
<filename>${HOME}/.digrc</filename>
@


1.1.1.3
log
@ISC BIND release 9.3.2
@
text
@d1 1
a1 3
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.0//EN"
               "http://www.oasis-open.org/docbook/xml/4.0/docbookx.dtd"
	       [<!ENTITY mdash "&#8212;">]>
d3 1
a3 1
 - Copyright (C) 2004, 2005  Internet Systems Consortium, Inc. ("ISC")
d19 1
a19 1
<!-- $ISC: dig.docbook,v 1.4.2.7.4.12 2005/08/30 00:50:29 marka Exp $ -->
a32 15
  <docinfo>
    <copyright>
      <year>2004</year>
      <year>2005</year>
      <holder>Internet Systems Consortium, Inc. ("ISC")</holder>
    </copyright>
    <copyright>
      <year>2000</year>
      <year>2001</year>
      <year>2002</year>
      <year>2003</year>
      <holder>Internet Software Consortium.</holder>
    </copyright>
  </docinfo>

d41 1
a41 1
<arg choice="opt">@@server</arg>
d52 4
a55 4
<arg choice="opt">name</arg>
<arg choice="opt">type</arg>
<arg choice="opt">class</arg>
<arg choice="opt" rep="repeat">queryopt</arg>
d65 2
a66 2
<arg choice="opt" rep="repeat">global-queryopt</arg>
<arg choice="opt" rep="repeat">query</arg>
d516 5
a520 18
	<varlistentry>
	  <term><option>+trusted-key=####</option></term>
	  <listitem>
	    <para>
	      Specifies a file containing trusted keys to be used with
	      <option>+sigchase</option>.  Each DNSKEY record must be
	      on its own line.
	    </para>
	    <para>
	      If not specified <command>dig</command> will look for
	      <filename>/etc/trusted-key.key</filename> then
	      <filename>trusted-key.key</filename> in the current directory.
	    </para>
	    <para>
	      Requires dig be compiled with -DDIG_SIGCHASE.
	    </para>
	  </listitem>
	</varlistentry>
@


1.1.1.4
log
@ISC BIND release 9.4.2
@
text
@d1 2
a2 2
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
               "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd"
d5 1
a5 1
 - Copyright (C) 2004-2007  Internet Systems Consortium, Inc. ("ISC")
d8 1
a8 1
 - Permission to use, copy, modify, and/or distribute this software for any
d21 1
a21 2
<!-- $ISC: dig.docbook,v 1.17.18.21 2007/08/28 07:19:55 tbox Exp $ -->
<refentry id="man.dig">
d23 11
a33 14
  <refentryinfo>
    <date>Jun 30, 2000</date>
  </refentryinfo>

  <refmeta>
    <refentrytitle>dig</refentrytitle>
    <manvolnum>1</manvolnum>
    <refmiscinfo>BIND9</refmiscinfo>
  </refmeta>

  <refnamediv>
    <refname>dig</refname>
    <refpurpose>DNS lookup utility</refpurpose>
  </refnamediv>
a38 2
      <year>2006</year>
      <year>2007</year>
d50 482
a531 677
  <refsynopsisdiv>
    <cmdsynopsis>
      <command>dig</command>
      <arg choice="opt">@@server</arg>
      <arg><option>-b <replaceable class="parameter">address</replaceable></option></arg>
      <arg><option>-c <replaceable class="parameter">class</replaceable></option></arg>
      <arg><option>-f <replaceable class="parameter">filename</replaceable></option></arg>
      <arg><option>-k <replaceable class="parameter">filename</replaceable></option></arg>
      <arg><option>-p <replaceable class="parameter">port#</replaceable></option></arg>
      <arg><option>-q <replaceable class="parameter">name</replaceable></option></arg>
      <arg><option>-t <replaceable class="parameter">type</replaceable></option></arg>
      <arg><option>-x <replaceable class="parameter">addr</replaceable></option></arg>
      <arg><option>-y <replaceable class="parameter"><optional>hmac:</optional>name:key</replaceable></option></arg>
      <arg><option>-4</option></arg>
      <arg><option>-6</option></arg>
      <arg choice="opt">name</arg>
      <arg choice="opt">type</arg>
      <arg choice="opt">class</arg>
      <arg choice="opt" rep="repeat">queryopt</arg>
    </cmdsynopsis>

    <cmdsynopsis>
      <command>dig</command>
      <arg><option>-h</option></arg>
    </cmdsynopsis>

    <cmdsynopsis>
      <command>dig</command>
      <arg choice="opt" rep="repeat">global-queryopt</arg>
      <arg choice="opt" rep="repeat">query</arg>
    </cmdsynopsis>
  </refsynopsisdiv>

  <refsect1>
    <title>DESCRIPTION</title>
    <para><command>dig</command>
      (domain information groper) is a flexible tool
      for interrogating DNS name servers.  It performs DNS lookups and
      displays the answers that are returned from the name server(s) that
      were queried.  Most DNS administrators use <command>dig</command> to
      troubleshoot DNS problems because of its flexibility, ease of use and
      clarity of output.  Other lookup tools tend to have less functionality
      than <command>dig</command>.
    </para>

    <para>
      Although <command>dig</command> is normally used with
      command-line
      arguments, it also has a batch mode of operation for reading lookup
      requests from a file.  A brief summary of its command-line arguments
      and options is printed when the <option>-h</option> option is given.
      Unlike earlier versions, the BIND 9 implementation of
      <command>dig</command> allows multiple lookups to be issued
      from the
      command line.
    </para>

    <para>
      Unless it is told to query a specific name server,
      <command>dig</command> will try each of the servers listed
      in
      <filename>/etc/resolv.conf</filename>.
    </para>

    <para>
      When no command line arguments or options are given, will perform an
      NS query for "." (the root).
    </para>

    <para>
      It is possible to set per-user defaults for <command>dig</command> via
      <filename>${HOME}/.digrc</filename>.  This file is read and
      any options in it
      are applied before the command line arguments.
    </para>

    <para>
      The IN and CH class names overlap with the IN and CH top level
      domains names.  Either use the <option>-t</option> and
      <option>-c</option> options to specify the type and class or
      use the <option>-q</option> the specify the domain name or
      use "IN." and "CH." when looking up these top level domains.
    </para>

  </refsect1>

  <refsect1>
    <title>SIMPLE USAGE</title>

    <para>
      A typical invocation of <command>dig</command> looks like:
      <programlisting> dig @@server name type </programlisting>
      where:

      <variablelist>

        <varlistentry>
          <term><constant>server</constant></term>
          <listitem>
            <para>
              is the name or IP address of the name server to query.  This can
              be an IPv4
              address in dotted-decimal notation or an IPv6
              address in colon-delimited notation.  When the supplied
              <parameter>server</parameter> argument is a
              hostname,
              <command>dig</command> resolves that name before
              querying that name
              server.  If no <parameter>server</parameter>
              argument is provided,
              <command>dig</command> consults <filename>/etc/resolv.conf</filename>
              and queries the name servers listed there.  The reply from the
              name
              server that responds is displayed.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><constant>name</constant></term>
          <listitem>
            <para>
              is the name of the resource record that is to be looked up.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><constant>type</constant></term>
          <listitem>
            <para>
              indicates what type of query is required &mdash;
              ANY, A, MX, SIG, etc.
              <parameter>type</parameter> can be any valid query
              type.  If no
              <parameter>type</parameter> argument is supplied,
              <command>dig</command> will perform a lookup for an
              A record.
            </para>
          </listitem>
        </varlistentry>

      </variablelist>
    </para>

  </refsect1>

  <refsect1>
    <title>OPTIONS</title>

    <para>
      The <option>-b</option> option sets the source IP address of the query
      to <parameter>address</parameter>.  This must be a valid
      address on
      one of the host's network interfaces or "0.0.0.0" or "::".  An optional
      port
      may be specified by appending "#&lt;port&gt;"
    </para>

    <para>
      The default query class (IN for internet) is overridden by the
      <option>-c</option> option.  <parameter>class</parameter> is
      any valid
      class, such as HS for Hesiod records or CH for Chaosnet records.
    </para>

    <para>
      The <option>-f</option> option makes <command>dig </command>
      operate
      in batch mode by reading a list of lookup requests to process from the
      file <parameter>filename</parameter>.  The file contains a
      number of
      queries, one per line.  Each entry in the file should be organized in
      the same way they would be presented as queries to
      <command>dig</command> using the command-line interface.
    </para>

    <para>
      If a non-standard port number is to be queried, the
      <option>-p</option> option is used.  <parameter>port#</parameter> is
      the port number that <command>dig</command> will send its
      queries
      instead of the standard DNS port number 53.  This option would be used
      to test a name server that has been configured to listen for queries
      on a non-standard port number.
    </para>

    <para>
      The <option>-4</option> option forces <command>dig</command>
      to only
      use IPv4 query transport.  The <option>-6</option> option forces
      <command>dig</command> to only use IPv6 query transport.
    </para>

    <para>
      The <option>-t</option> option sets the query type to
      <parameter>type</parameter>.  It can be any valid query type
      which is
      supported in BIND 9.  The default query type is "A", unless the
      <option>-x</option> option is supplied to indicate a reverse lookup.
      A zone transfer can be requested by specifying a type of AXFR.  When
      an incremental zone transfer (IXFR) is required,
      <parameter>type</parameter> is set to <literal>ixfr=N</literal>.
      The incremental zone transfer will contain the changes made to the zone
      since the serial number in the zone's SOA record was
      <parameter>N</parameter>.
    </para>

    <para>
      The <option>-q</option> option sets the query name to 
      <parameter>name</parameter>.  This useful do distinguish the
      <parameter>name</parameter> from other arguments.
    </para>

    <para>
      Reverse lookups &mdash; mapping addresses to names &mdash; are simplified by the
      <option>-x</option> option.  <parameter>addr</parameter> is
      an IPv4
      address in dotted-decimal notation, or a colon-delimited IPv6 address.
      When this option is used, there is no need to provide the
      <parameter>name</parameter>, <parameter>class</parameter> and
      <parameter>type</parameter> arguments.  <command>dig</command>
      automatically performs a lookup for a name like
      <literal>11.12.13.10.in-addr.arpa</literal> and sets the
      query type and
      class to PTR and IN respectively.  By default, IPv6 addresses are
      looked up using nibble format under the IP6.ARPA domain.
      To use the older RFC1886 method using the IP6.INT domain
      specify the <option>-i</option> option.  Bit string labels (RFC2874)
      are now experimental and are not attempted.
    </para>

    <para>
      To sign the DNS queries sent by <command>dig</command> and
      their
      responses using transaction signatures (TSIG), specify a TSIG key file
      using the <option>-k</option> option.  You can also specify the TSIG
      key itself on the command line using the <option>-y</option> option;
      <parameter>hmac</parameter> is the type of the TSIG, default HMAC-MD5,
      <parameter>name</parameter> is the name of the TSIG key and
      <parameter>key</parameter> is the actual key.  The key is a
      base-64
      encoded string, typically generated by
      <citerefentry>
        <refentrytitle>dnssec-keygen</refentrytitle><manvolnum>8</manvolnum>
      </citerefentry>.

      Caution should be taken when using the <option>-y</option> option on
      multi-user systems as the key can be visible in the output from
      <citerefentry>
        <refentrytitle>ps</refentrytitle><manvolnum>1</manvolnum>
      </citerefentry>
      or in the shell's history file.  When
      using TSIG authentication with <command>dig</command>, the name
      server that is queried needs to know the key and algorithm that is
      being used.  In BIND, this is done by providing appropriate
      <command>key</command> and <command>server</command> statements in
      <filename>named.conf</filename>.
    </para>

  </refsect1>

  <refsect1>
    <title>QUERY OPTIONS</title>

    <para><command>dig</command>
      provides a number of query options which affect
      the way in which lookups are made and the results displayed.  Some of
      these set or reset flag bits in the query header, some determine which
      sections of the answer get printed, and others determine the timeout
      and retry strategies.
    </para>

    <para>
      Each query option is identified by a keyword preceded by a plus sign
      (<literal>+</literal>).  Some keywords set or reset an
      option.  These may be preceded
      by the string <literal>no</literal> to negate the meaning of
      that keyword.  Other
      keywords assign values to options like the timeout interval.  They
      have the form <option>+keyword=value</option>.
      The query options are:

      <variablelist>

        <varlistentry>
          <term><option>+[no]tcp</option></term>
          <listitem>
            <para>
              Use [do not use] TCP when querying name servers.  The default
              behavior is to use UDP unless an AXFR or IXFR query is
              requested, in
              which case a TCP connection is used.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]vc</option></term>
          <listitem>
            <para>
              Use [do not use] TCP when querying name servers.  This alternate
              syntax to <parameter>+[no]tcp</parameter> is
              provided for backwards
              compatibility.  The "vc" stands for "virtual circuit".
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]ignore</option></term>
          <listitem>
            <para>
              Ignore truncation in UDP responses instead of retrying with TCP.
               By
              default, TCP retries are performed.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+domain=somename</option></term>
          <listitem>
            <para>
              Set the search list to contain the single domain
              <parameter>somename</parameter>, as if specified in
              a
              <command>domain</command> directive in
              <filename>/etc/resolv.conf</filename>, and enable
              search list
              processing as if the <parameter>+search</parameter>
              option were given.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]search</option></term>
          <listitem>
            <para>
              Use [do not use] the search list defined by the searchlist or
              domain
              directive in <filename>resolv.conf</filename> (if
              any).
              The search list is not used by default.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]showsearch</option></term>
          <listitem>
            <para>
              Perform [do not perform] a search showing intermediate
	      results.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]defname</option></term>
          <listitem>
            <para>
              Deprecated, treated as a synonym for <parameter>+[no]search</parameter>
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]aaonly</option></term>
          <listitem>
            <para>
              Sets the "aa" flag in the query.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]aaflag</option></term>
          <listitem>
            <para>
              A synonym for <parameter>+[no]aaonly</parameter>.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]adflag</option></term>
          <listitem>
            <para>
              Set [do not set] the AD (authentic data) bit in the query.  The
              AD bit
              currently has a standard meaning only in responses, not in
              queries,
              but the ability to set the bit in the query is provided for
              completeness.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]cdflag</option></term>
          <listitem>
            <para>
              Set [do not set] the CD (checking disabled) bit in the query.
              This
              requests the server to not perform DNSSEC validation of
              responses.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]cl</option></term>
          <listitem>
            <para>
              Display [do not display] the CLASS when printing the record.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]ttlid</option></term>
          <listitem>
            <para>
              Display [do not display] the TTL when printing the record.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]recurse</option></term>
          <listitem>
            <para>
              Toggle the setting of the RD (recursion desired) bit in the
              query.
              This bit is set by default, which means <command>dig</command>
              normally sends recursive queries.  Recursion is automatically
              disabled
              when the <parameter>+nssearch</parameter> or
              <parameter>+trace</parameter> query options are
              used.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]nssearch</option></term>
          <listitem>
            <para>
              When this option is set, <command>dig</command>
              attempts to find the
              authoritative name servers for the zone containing the name
              being
              looked up and display the SOA record that each name server has
              for the
              zone.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]trace</option></term>
          <listitem>
            <para>
              Toggle tracing of the delegation path from the root name servers
              for
              the name being looked up.  Tracing is disabled by default.  When
              tracing is enabled, <command>dig</command> makes
              iterative queries to
              resolve the name being looked up.  It will follow referrals from
              the
              root servers, showing the answer from each server that was used
              to
              resolve the lookup.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]cmd</option></term>
          <listitem>
            <para>
              Toggles the printing of the initial comment in the output
              identifying
              the version of <command>dig</command> and the query
              options that have
              been applied.  This comment is printed by default.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]short</option></term>
          <listitem>
            <para>
              Provide a terse answer.  The default is to print the answer in a
              verbose form.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]identify</option></term>
          <listitem>
            <para>
              Show [or do not show] the IP address and port number that
              supplied the
              answer when the <parameter>+short</parameter> option
              is enabled.  If
              short form answers are requested, the default is not to show the
              source address and port number of the server that provided the
              answer.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]comments</option></term>
          <listitem>
            <para>
              Toggle the display of comment lines in the output.  The default
              is to
              print comments.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]stats</option></term>
          <listitem>
            <para>
              This query option toggles the printing of statistics: when the
              query
              was made, the size of the reply and so on.  The default
              behavior is
              to print the query statistics.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]qr</option></term>
          <listitem>
            <para>
              Print [do not print] the query as it is sent.
              By default, the query is not printed.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]question</option></term>
          <listitem>
            <para>
              Print [do not print] the question section of a query when an
              answer is
              returned.  The default is to print the question section as a
              comment.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]answer</option></term>
          <listitem>
            <para>
              Display [do not display] the answer section of a reply.  The
              default
              is to display it.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]authority</option></term>
          <listitem>
            <para>
              Display [do not display] the authority section of a reply.  The
              default is to display it.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]additional</option></term>
          <listitem>
            <para>
              Display [do not display] the additional section of a reply.
              The default is to display it.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]all</option></term>
          <listitem>
            <para>
              Set or clear all display flags.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+time=T</option></term>
          <listitem>
            <para>

              Sets the timeout for a query to
              <parameter>T</parameter> seconds.  The default
	      timeout is 5 seconds.
              An attempt to set <parameter>T</parameter> to less
              than 1 will result
              in a query timeout of 1 second being applied.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+tries=T</option></term>
          <listitem>
            <para>
              Sets the number of times to try UDP queries to server to
              <parameter>T</parameter> instead of the default, 3.
              If
              <parameter>T</parameter> is less than or equal to
              zero, the number of
              tries is silently rounded up to 1.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+retry=T</option></term>
          <listitem>
            <para>
              Sets the number of times to retry UDP queries to server to
              <parameter>T</parameter> instead of the default, 2.
              Unlike
              <parameter>+tries</parameter>, this does not include
              the initial
              query.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+ndots=D</option></term>
          <listitem>
            <para>
              Set the number of dots that have to appear in
              <parameter>name</parameter> to <parameter>D</parameter> for it to be
              considered absolute.  The default value is that defined using
              the
              ndots statement in <filename>/etc/resolv.conf</filename>, or 1 if no
              ndots statement is present.  Names with fewer dots are
              interpreted as
              relative names and will be searched for in the domains listed in
              the
              <option>search</option> or <option>domain</option> directive in
              <filename>/etc/resolv.conf</filename>.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+bufsize=B</option></term>
          <listitem>
            <para>
              Set the UDP message buffer size advertised using EDNS0 to
              <parameter>B</parameter> bytes.  The maximum and minimum sizes
	      of this buffer are 65535 and 0 respectively.  Values outside
	      this range are rounded up or down appropriately.  
	      Values other than zero will cause a EDNS query to be sent.
            </para>
          </listitem>
        </varlistentry>
d534 1
a534 1
	  <term><option>+edns=#</option></term>
d537 1
a537 69
	       Specify the EDNS version to query with.  Valid values
	       are 0 to 255.  Setting the EDNS version will cause a
	       EDNS query to be sent.  <option>+noedns</option> clears the
	       remembered EDNS version.
	    </para>
	  </listitem>
	</varlistentry>

        <varlistentry>
          <term><option>+[no]multiline</option></term>
          <listitem>
            <para>
              Print records like the SOA records in a verbose multi-line
              format with human-readable comments.  The default is to print
              each record on a single line, to facilitate machine parsing
              of the <command>dig</command> output.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]fail</option></term>
          <listitem>
            <para>
              Do not try the next server if you receive a SERVFAIL.  The
              default is
              to not try the next server which is the reverse of normal stub
              resolver
              behavior.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]besteffort</option></term>
          <listitem>
            <para>
              Attempt to display the contents of messages which are malformed.
              The default is to not display malformed answers.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]dnssec</option></term>
          <listitem>
            <para>
              Requests DNSSEC records be sent by setting the DNSSEC OK bit
              (DO)
              in the OPT record in the additional section of the query.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+[no]sigchase</option></term>
          <listitem>
            <para>
              Chase DNSSEC signature chains.  Requires dig be compiled with
              -DDIG_SIGCHASE.
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>+trusted-key=####</option></term>
          <listitem>
            <para>
              Specifies a file containing trusted keys to be used with
d540 1
a540 1
            </para>
d547 1
a547 1
              Requires dig be compiled with -DDIG_SIGCHASE.
d549 2
a550 2
          </listitem>
        </varlistentry>
d552 5
a556 10
        <varlistentry>
          <term><option>+[no]topdown</option></term>
          <listitem>
            <para>
              When chasing DNSSEC signature chains perform a top-down
              validation.
              Requires dig be compiled with -DDIG_SIGCHASE.
            </para>
          </listitem>
        </varlistentry>
d560 32
a591 34
      </variablelist>

    </para>
  </refsect1>

  <refsect1>
    <title>MULTIPLE QUERIES</title>

    <para>
      The BIND 9 implementation of <command>dig </command>
      supports
      specifying multiple queries on the command line (in addition to
      supporting the <option>-f</option> batch file option).  Each of those
      queries can be supplied with its own set of flags, options and query
      options.
    </para>

    <para>
      In this case, each <parameter>query</parameter> argument
      represent an
      individual query in the command-line syntax described above.  Each
      consists of any of the standard options and flags, the name to be
      looked up, an optional query type and class and any query options that
      should be applied to that query.
    </para>

    <para>
      A global set of query options, which should be applied to all queries,
      can also be supplied.  These global query options must precede the
      first tuple of name, class, type, options, flags, and query options
      supplied on the command line.  Any global query options (except
      the <option>+[no]cmd</option> option) can be
      overridden by a query-specific set of query options.  For example:
      <programlisting>
d594 48
a641 67
      shows how <command>dig</command> could be used from the
      command line
      to make three lookups: an ANY query for <literal>www.isc.org</literal>, a
      reverse lookup of 127.0.0.1 and a query for the NS records of
      <literal>isc.org</literal>.

      A global query option of <parameter>+qr</parameter> is
      applied, so
      that <command>dig</command> shows the initial query it made
      for each
      lookup.  The final query has a local query option of
      <parameter>+noqr</parameter> which means that <command>dig</command>
      will not print the initial query when it looks up the NS records for
      <literal>isc.org</literal>.
    </para>

  </refsect1>

  <refsect1>
    <title>IDN SUPPORT</title>
    <para>
      If <command>dig</command> has been built with IDN (internationalized
      domain name) support, it can accept and display non-ASCII domain names.
      <command>dig</command> appropriately converts character encoding of
      domain name before sending a request to DNS server or displaying a
      reply from the server.
      If you'd like to turn off the IDN support for some reason, defines
      the <envar>IDN_DISABLE</envar> environment variable.
      The IDN support is disabled if the variable is set when 
      <command>dig</command> runs.
    </para>
  </refsect1>

  <refsect1>
    <title>FILES</title>
    <para><filename>/etc/resolv.conf</filename>
    </para>
    <para><filename>${HOME}/.digrc</filename>
    </para>
  </refsect1>

  <refsect1>
    <title>SEE ALSO</title>
    <para><citerefentry>
        <refentrytitle>host</refentrytitle><manvolnum>1</manvolnum>
      </citerefentry>,
      <citerefentry>
        <refentrytitle>named</refentrytitle><manvolnum>8</manvolnum>
      </citerefentry>,
      <citerefentry>
        <refentrytitle>dnssec-keygen</refentrytitle><manvolnum>8</manvolnum>
      </citerefentry>,
      <citetitle>RFC1035</citetitle>.
    </para>
  </refsect1>

  <refsect1>
    <title>BUGS</title>
    <para>
      There are probably too many query options.
    </para>
  </refsect1>
</refentry><!--
 - Local variables:
 - mode: sgml
 - End:
-->
@


