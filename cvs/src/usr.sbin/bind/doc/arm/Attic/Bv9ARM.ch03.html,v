head	1.9;
access;
symbols
	OPENBSD_5_6:1.8.0.30
	OPENBSD_5_6_BASE:1.8
	OPENBSD_5_5:1.8.0.28
	OPENBSD_5_5_BASE:1.8
	OPENBSD_5_4:1.8.0.24
	OPENBSD_5_4_BASE:1.8
	OPENBSD_5_3:1.8.0.22
	OPENBSD_5_3_BASE:1.8
	OPENBSD_5_2:1.8.0.20
	OPENBSD_5_2_BASE:1.8
	OPENBSD_5_1_BASE:1.8
	OPENBSD_5_1:1.8.0.18
	OPENBSD_5_0:1.8.0.16
	OPENBSD_5_0_BASE:1.8
	OPENBSD_4_9:1.8.0.14
	OPENBSD_4_9_BASE:1.8
	OPENBSD_4_8:1.8.0.12
	OPENBSD_4_8_BASE:1.8
	OPENBSD_4_7:1.8.0.8
	OPENBSD_4_7_BASE:1.8
	OPENBSD_4_6:1.8.0.10
	OPENBSD_4_6_BASE:1.8
	OPENBSD_4_5:1.8.0.6
	OPENBSD_4_5_BASE:1.8
	OPENBSD_4_4:1.8.0.4
	OPENBSD_4_4_BASE:1.8
	BIND_9_4_2_P1:1.1.1.6
	OPENBSD_4_3:1.8.0.2
	OPENBSD_4_3_BASE:1.8
	BIND_9_4_2:1.1.1.6
	OPENBSD_4_2:1.7.0.4
	OPENBSD_4_2_BASE:1.7
	OPENBSD_4_1:1.7.0.2
	OPENBSD_4_1_BASE:1.7
	BIND_9_3_4:1.1.1.5
	BIND_9_3_3:1.1.1.5
	OPENBSD_4_0:1.6.0.2
	OPENBSD_4_0_BASE:1.6
	BIND_9_3_2:1.1.1.4
	OPENBSD_3_9:1.5.0.4
	OPENBSD_3_9_BASE:1.5
	OPENBSD_3_8:1.5.0.2
	OPENBSD_3_8_BASE:1.5
	BIND_9_3_1:1.1.1.3
	OPENBSD_3_7:1.4.0.2
	OPENBSD_3_7_BASE:1.4
	BIND_9_3_0:1.1.1.2
	OPENBSD_3_6:1.3.0.4
	OPENBSD_3_6_BASE:1.3
	OPENBSD_3_5:1.3.0.2
	OPENBSD_3_5_BASE:1.3
	OPENBSD_3_4:1.2.0.4
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.2.0.2
	OPENBSD_3_3_BASE:1.2
	BIND_9_2_2_RC1:1.1.1.1
	ISC:1.1.1;
locks; strict;
comment	@# @;


1.9
date	2014.08.25.07.08.34;	author brad;	state dead;
branches;
next	1.8;
commitid	zKogyOACFMOV70QE;

1.8
date	2007.12.09.13.39.43;	author jakob;	state Exp;
branches;
next	1.7;

1.7
date	2007.01.10.19.07.59;	author jakob;	state Exp;
branches;
next	1.6;

1.6
date	2006.04.05.17.36.34;	author jakob;	state Exp;
branches;
next	1.5;

1.5
date	2005.03.22.16.52.39;	author jakob;	state Exp;
branches;
next	1.4;

1.4
date	2004.09.28.17.14.05;	author jakob;	state Exp;
branches;
next	1.3;

1.3
date	2003.11.18.14.14.06;	author jakob;	state Exp;
branches;
next	1.2;

1.2
date	2003.03.05.09.18.32;	author jakob;	state Exp;
branches;
next	1.1;

1.1
date	2003.01.20.21.06.50;	author jakob;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.01.20.21.06.50;	author jakob;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2004.09.28.16.34.27;	author jakob;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2005.03.22.16.37.23;	author jakob;	state Exp;
branches;
next	1.1.1.4;

1.1.1.4
date	2006.04.05.16.43.09;	author jakob;	state Exp;
branches;
next	1.1.1.5;

1.1.1.5
date	2007.01.10.18.19.16;	author jakob;	state Exp;
branches;
next	1.1.1.6;

1.1.1.6
date	2007.12.09.12.33.46;	author jakob;	state Exp;
branches;
next	;


desc
@@


1.9
log
@Start removing unused documentation and the server and related binaries source
code.
@
text
@<!--
 - Copyright (C) 2004-2007 Internet Systems Consortium, Inc. ("ISC")
 - Copyright (C) 2000-2003 Internet Software Consortium.
 - 
 - Permission to use, copy, modify, and distribute this software for any
 - purpose with or without fee is hereby granted, provided that the above
 - copyright notice and this permission notice appear in all copies.
 - 
 - THE SOFTWARE IS PROVIDED "AS IS" AND ISC DISCLAIMS ALL WARRANTIES WITH
 - REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
 - AND FITNESS. IN NO EVENT SHALL ISC BE LIABLE FOR ANY SPECIAL, DIRECT,
 - INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
 - LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE
 - OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
 - PERFORMANCE OF THIS SOFTWARE.
-->
<!-- $ISC: Bv9ARM.ch03.html,v 1.35.18.31 2007/10/31 01:35:57 marka Exp $ -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Chapter 3. Name Server Configuration</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.71.1">
<link rel="start" href="Bv9ARM.html" title="BIND 9 Administrator Reference Manual">
<link rel="up" href="Bv9ARM.html" title="BIND 9 Administrator Reference Manual">
<link rel="prev" href="Bv9ARM.ch02.html" title="Chapter 2. BIND Resource Requirements">
<link rel="next" href="Bv9ARM.ch04.html" title="Chapter 4. Advanced DNS Features">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">Chapter 3. Name Server Configuration</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="Bv9ARM.ch02.html">Prev</a> </td>
<th width="60%" align="center"> </th>
<td width="20%" align="right"> <a accesskey="n" href="Bv9ARM.ch04.html">Next</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="chapter" lang="en">
<div class="titlepage"><div><div><h2 class="title">
<a name="Bv9ARM.ch03"></a>Chapter 3. Name Server Configuration</h2></div></div></div>
<div class="toc">
<p><b>Table of Contents</b></p>
<dl>
<dt><span class="sect1"><a href="Bv9ARM.ch03.html#sample_configuration">Sample Configurations</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="Bv9ARM.ch03.html#id2568004">A Caching-only Name Server</a></span></dt>
<dt><span class="sect2"><a href="Bv9ARM.ch03.html#id2568020">An Authoritative-only Name Server</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="Bv9ARM.ch03.html#id2568042">Load Balancing</a></span></dt>
<dt><span class="sect1"><a href="Bv9ARM.ch03.html#id2568465">Name Server Operations</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="Bv9ARM.ch03.html#id2568470">Tools for Use With the Name Server Daemon</a></span></dt>
<dt><span class="sect2"><a href="Bv9ARM.ch03.html#id2570184">Signals</a></span></dt>
</dl></dd>
</dl>
</div>
<p>
      In this section we provide some suggested configurations along
      with guidelines for their use.  We suggest reasonable values for
      certain option settings.
    </p>
<div class="sect1" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="sample_configuration"></a>Sample Configurations</h2></div></div></div>
<div class="sect2" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="id2568004"></a>A Caching-only Name Server</h3></div></div></div>
<p>
          The following sample configuration is appropriate for a caching-only
          name server for use by clients internal to a corporation.  All
          queries
          from outside clients are refused using the <span><strong class="command">allow-query</strong></span>
          option.  Alternatively, the same effect could be achieved using
          suitable
          firewall rules.
        </p>
<pre class="programlisting">
// Two corporate subnets we wish to allow queries from.
acl corpnets { 192.168.4.0/24; 192.168.7.0/24; };
options {
     directory "/etc/namedb";           // Working directory
     allow-query { corpnets; };
};
// Provide a reverse mapping for the loopback address 127.0.0.1
zone "0.0.127.in-addr.arpa" {
     type master;
     file "localhost.rev";
     notify no;
};
</pre>
</div>
<div class="sect2" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="id2568020"></a>An Authoritative-only Name Server</h3></div></div></div>
<p>
          This sample configuration is for an authoritative-only server
          that is the master server for "<code class="filename">example.com</code>"
          and a slave for the subdomain "<code class="filename">eng.example.com</code>".
        </p>
<pre class="programlisting">
options {
     directory "/etc/namedb";           // Working directory
     allow-query-cache { none; };       // Do not allow access to cache
     allow-query { any; };              // This is the default
     recursion no;                      // Do not provide recursive service
};

// Provide a reverse mapping for the loopback address 127.0.0.1
zone "0.0.127.in-addr.arpa" {
     type master;
     file "localhost.rev";
     notify no;
};
// We are the master server for example.com
zone "example.com" {
     type master;
     file "example.com.db";
     // IP addresses of slave servers allowed to transfer example.com
     allow-transfer {
          192.168.4.14;
          192.168.5.53;
     };
};
// We are a slave server for eng.example.com
zone "eng.example.com" {
     type slave;
     file "eng.example.com.bk";
     // IP address of eng.example.com master server
     masters { 192.168.4.12; };
};
</pre>
</div>
</div>
<div class="sect1" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="id2568042"></a>Load Balancing</h2></div></div></div>
<p>
        A primitive form of load balancing can be achieved in
        the <acronym class="acronym">DNS</acronym> by using multiple records
        (such as multiple A records) for one name.
      </p>
<p>
        For example, if you have three WWW servers with network addresses
        of 10.0.0.1, 10.0.0.2 and 10.0.0.3, a set of records such as the
        following means that clients will connect to each machine one third
        of the time:
      </p>
<div class="informaltable"><table border="1">
<colgroup>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td>
                <p>
                  Name
                </p>
              </td>
<td>
                <p>
                  TTL
                </p>
              </td>
<td>
                <p>
                  CLASS
                </p>
              </td>
<td>
                <p>
                  TYPE
                </p>
              </td>
<td>
                <p>
                  Resource Record (RR) Data
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="literal">www</code>
                </p>
              </td>
<td>
                <p>
                  <code class="literal">600</code>
                </p>
              </td>
<td>
                <p>
                  <code class="literal">IN</code>
                </p>
              </td>
<td>
                <p>
                  <code class="literal">A</code>
                </p>
              </td>
<td>
                <p>
                  <code class="literal">10.0.0.1</code>
                </p>
              </td>
</tr>
<tr>
<td>
                <p></p>
              </td>
<td>
                <p>
                  <code class="literal">600</code>
                </p>
              </td>
<td>
                <p>
                  <code class="literal">IN</code>
                </p>
              </td>
<td>
                <p>
                  <code class="literal">A</code>
                </p>
              </td>
<td>
                <p>
                  <code class="literal">10.0.0.2</code>
                </p>
              </td>
</tr>
<tr>
<td>
                <p></p>
              </td>
<td>
                <p>
                  <code class="literal">600</code>
                </p>
              </td>
<td>
                <p>
                  <code class="literal">IN</code>
                </p>
              </td>
<td>
                <p>
                  <code class="literal">A</code>
                </p>
              </td>
<td>
                <p>
                  <code class="literal">10.0.0.3</code>
                </p>
              </td>
</tr>
</tbody>
</table></div>
<p>
        When a resolver queries for these records, <acronym class="acronym">BIND</acronym> will rotate
        them and respond to the query with the records in a different
        order.  In the example above, clients will randomly receive
        records in the order 1, 2, 3; 2, 3, 1; and 3, 1, 2. Most clients
        will use the first record returned and discard the rest.
      </p>
<p>
        For more detail on ordering responses, check the
        <span><strong class="command">rrset-order</strong></span> substatement in the
        <span><strong class="command">options</strong></span> statement, see
        <a href="Bv9ARM.ch06.html#rrset_ordering">RRset Ordering</a>.
      </p>
</div>
<div class="sect1" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="id2568465"></a>Name Server Operations</h2></div></div></div>
<div class="sect2" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="id2568470"></a>Tools for Use With the Name Server Daemon</h3></div></div></div>
<p>
          This section describes several indispensable diagnostic,
          administrative and monitoring tools available to the system
          administrator for controlling and debugging the name server
          daemon.
        </p>
<div class="sect3" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="diagnostic_tools"></a>Diagnostic Tools</h4></div></div></div>
<p>
            The <span><strong class="command">dig</strong></span>, <span><strong class="command">host</strong></span>, and
            <span><strong class="command">nslookup</strong></span> programs are all command
            line tools
            for manually querying name servers.  They differ in style and
            output format.
          </p>
<div class="variablelist"><dl>
<dt><span class="term"><a name="dig"></a><span><strong class="command">dig</strong></span></span></dt>
<dd>
<p>
                  The domain information groper (<span><strong class="command">dig</strong></span>)
                  is the most versatile and complete of these lookup tools.
                  It has two modes: simple interactive
                  mode for a single query, and batch mode which executes a
                  query for
                  each in a list of several query lines. All query options are
                  accessible
                  from the command line.
                </p>
<div class="cmdsynopsis"><p><code class="command">dig</code>  [@@<em class="replaceable"><code>server</code></em>]  <em class="replaceable"><code>domain</code></em>  [<em class="replaceable"><code>query-type</code></em>] [<em class="replaceable"><code>query-class</code></em>] [+<em class="replaceable"><code>query-option</code></em>] [-<em class="replaceable"><code>dig-option</code></em>] [%<em class="replaceable"><code>comment</code></em>]</p></div>
<p>
                  The usual simple use of dig will take the form
                </p>
<p>
                  <span><strong class="command">dig @@server domain query-type query-class</strong></span>
                </p>
<p>
                  For more information and a list of available commands and
                  options, see the <span><strong class="command">dig</strong></span> man
                  page.
                </p>
</dd>
<dt><span class="term"><span><strong class="command">host</strong></span></span></dt>
<dd>
<p>
                  The <span><strong class="command">host</strong></span> utility emphasizes
                  simplicity
                  and ease of use.  By default, it converts
                  between host names and Internet addresses, but its
                  functionality
                  can be extended with the use of options.
                </p>
<div class="cmdsynopsis"><p><code class="command">host</code>  [-aCdlnrsTwv] [-c <em class="replaceable"><code>class</code></em>] [-N <em class="replaceable"><code>ndots</code></em>] [-t <em class="replaceable"><code>type</code></em>] [-W <em class="replaceable"><code>timeout</code></em>] [-R <em class="replaceable"><code>retries</code></em>] [-m <em class="replaceable"><code>flag</code></em>] [-4] [-6]  <em class="replaceable"><code>hostname</code></em>  [<em class="replaceable"><code>server</code></em>]</p></div>
<p>
                  For more information and a list of available commands and
                  options, see the <span><strong class="command">host</strong></span> man
                  page.
                </p>
</dd>
<dt><span class="term"><span><strong class="command">nslookup</strong></span></span></dt>
<dd>
<p><span><strong class="command">nslookup</strong></span>
                  has two modes: interactive and
                  non-interactive. Interactive mode allows the user to
                  query name servers for information about various
                  hosts and domains or to print a list of hosts in a
                  domain. Non-interactive mode is used to print just
                  the name and requested information for a host or
                  domain.
                </p>
<div class="cmdsynopsis"><p><code class="command">nslookup</code>  [-option...] [[<em class="replaceable"><code>host-to-find</code></em>] |  [- [server]]]</p></div>
<p>
                  Interactive mode is entered when no arguments are given (the
                  default name server will be used) or when the first argument
                  is a
                  hyphen (`-') and the second argument is the host name or
                  Internet address
                  of a name server.
                </p>
<p>
                  Non-interactive mode is used when the name or Internet
                  address
                  of the host to be looked up is given as the first argument.
                  The
                  optional second argument specifies the host name or address
                  of a name server.
                </p>
<p>
                  Due to its arcane user interface and frequently inconsistent
                  behavior, we do not recommend the use of <span><strong class="command">nslookup</strong></span>.
                  Use <span><strong class="command">dig</strong></span> instead.
                </p>
</dd>
</dl></div>
</div>
<div class="sect3" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="admin_tools"></a>Administrative Tools</h4></div></div></div>
<p>
            Administrative tools play an integral part in the management
            of a server.
          </p>
<div class="variablelist"><dl>
<dt>
<a name="named-checkconf"></a><span class="term"><span><strong class="command">named-checkconf</strong></span></span>
</dt>
<dd>
<p>
                  The <span><strong class="command">named-checkconf</strong></span> program
                  checks the syntax of a <code class="filename">named.conf</code> file.
                </p>
<div class="cmdsynopsis"><p><code class="command">named-checkconf</code>  [-jvz] [-t <em class="replaceable"><code>directory</code></em>] [<em class="replaceable"><code>filename</code></em>]</p></div>
</dd>
<dt>
<a name="named-checkzone"></a><span class="term"><span><strong class="command">named-checkzone</strong></span></span>
</dt>
<dd>
<p>
                  The <span><strong class="command">named-checkzone</strong></span> program
                  checks a master file for
                  syntax and consistency.
                </p>
<div class="cmdsynopsis"><p><code class="command">named-checkzone</code>  [-djqvD] [-c <em class="replaceable"><code>class</code></em>] [-o <em class="replaceable"><code>output</code></em>] [-t <em class="replaceable"><code>directory</code></em>] [-w <em class="replaceable"><code>directory</code></em>] [-k <em class="replaceable"><code>(ignore|warn|fail)</code></em>] [-n <em class="replaceable"><code>(ignore|warn|fail)</code></em>] [-W <em class="replaceable"><code>(ignore|warn)</code></em>]  <em class="replaceable"><code>zone</code></em>  [<em class="replaceable"><code>filename</code></em>]</p></div>
</dd>
<dt>
<a name="named-compilezone"></a><span class="term"><span><strong class="command">named-compilezone</strong></span></span>
</dt>
<dd><p>
                  Similar to <span><strong class="command">named-checkzone,</strong></span> but
                  it always dumps the zone content to a specified file
                  (typically in a different format).
                </p></dd>
<dt>
<a name="rndc"></a><span class="term"><span><strong class="command">rndc</strong></span></span>
</dt>
<dd>
<p>
                  The remote name daemon control
                  (<span><strong class="command">rndc</strong></span>) program allows the
                  system
                  administrator to control the operation of a name server.
                  Since <acronym class="acronym">BIND</acronym> 9.2, <span><strong class="command">rndc</strong></span>
                  supports all the commands of the BIND 8 <span><strong class="command">ndc</strong></span>
                  utility except <span><strong class="command">ndc start</strong></span> and
                  <span><strong class="command">ndc restart</strong></span>, which were also
                  not supported in <span><strong class="command">ndc</strong></span>'s
                  channel mode.
                  If you run <span><strong class="command">rndc</strong></span> without any
                  options
                  it will display a usage message as follows:
                </p>
<div class="cmdsynopsis"><p><code class="command">rndc</code>  [-c <em class="replaceable"><code>config</code></em>] [-s <em class="replaceable"><code>server</code></em>] [-p <em class="replaceable"><code>port</code></em>] [-y <em class="replaceable"><code>key</code></em>]  <em class="replaceable"><code>command</code></em>  [<em class="replaceable"><code>command</code></em>...]</p></div>
<p>The <span><strong class="command">command</strong></span>
                  is one of the following:
                </p>
<div class="variablelist"><dl>
<dt><span class="term"><strong class="userinput"><code>reload</code></strong></span></dt>
<dd><p>
                        Reload configuration file and zones.
                      </p></dd>
<dt><span class="term"><strong class="userinput"><code>reload <em class="replaceable"><code>zone</code></em>
                        [<span class="optional"><em class="replaceable"><code>class</code></em>
           [<span class="optional"><em class="replaceable"><code>view</code></em></span>]</span>]</code></strong></span></dt>
<dd><p>
                        Reload the given zone.
                      </p></dd>
<dt><span class="term"><strong class="userinput"><code>refresh <em class="replaceable"><code>zone</code></em>
                        [<span class="optional"><em class="replaceable"><code>class</code></em>
           [<span class="optional"><em class="replaceable"><code>view</code></em></span>]</span>]</code></strong></span></dt>
<dd><p>
                        Schedule zone maintenance for the given zone.
                      </p></dd>
<dt><span class="term"><strong class="userinput"><code>retransfer <em class="replaceable"><code>zone</code></em>

                        [<span class="optional"><em class="replaceable"><code>class</code></em>
           [<span class="optional"><em class="replaceable"><code>view</code></em></span>]</span>]</code></strong></span></dt>
<dd><p>
                        Retransfer the given zone from the master.
                      </p></dd>
<dt><span class="term"><strong class="userinput"><code>freeze
                        [<span class="optional"><em class="replaceable"><code>zone</code></em>
       [<span class="optional"><em class="replaceable"><code>class</code></em>
           [<span class="optional"><em class="replaceable"><code>view</code></em></span>]</span>]</span>]</code></strong></span></dt>
<dd><p>
                        Suspend updates to a dynamic zone.  If no zone is
                        specified,
                        then all zones are suspended.  This allows manual
                        edits to be made to a zone normally updated by dynamic
                        update.  It
                        also causes changes in the journal file to be synced
                        into the master
                        and the journal file to be removed.  All dynamic
                        update attempts will
                        be refused while the zone is frozen.
                      </p></dd>
<dt><span class="term"><strong class="userinput"><code>thaw
                        [<span class="optional"><em class="replaceable"><code>zone</code></em>
       [<span class="optional"><em class="replaceable"><code>class</code></em>
           [<span class="optional"><em class="replaceable"><code>view</code></em></span>]</span>]</span>]</code></strong></span></dt>
<dd><p>
                        Enable updates to a frozen dynamic zone.  If no zone
                        is
                        specified, then all frozen zones are enabled.  This
                        causes
                        the server to reload the zone from disk, and
                        re-enables dynamic updates
                        after the load has completed.  After a zone is thawed,
                        dynamic updates
                        will no longer be refused.
                      </p></dd>
<dt><span class="term"><strong class="userinput"><code>notify <em class="replaceable"><code>zone</code></em>
                        [<span class="optional"><em class="replaceable"><code>class</code></em>
           [<span class="optional"><em class="replaceable"><code>view</code></em></span>]</span>]</code></strong></span></dt>
<dd><p>
                        Resend NOTIFY messages for the zone.
                      </p></dd>
<dt><span class="term"><strong class="userinput"><code>reconfig</code></strong></span></dt>
<dd><p>
                        Reload the configuration file and load new zones,
                        but do not reload existing zone files even if they
                        have changed.
                        This is faster than a full <span><strong class="command">reload</strong></span> when there
                        is a large number of zones because it avoids the need
                        to examine the
                        modification times of the zones files.
                      </p></dd>
<dt><span class="term"><strong class="userinput"><code>stats</code></strong></span></dt>
<dd><p>
                        Write server statistics to the statistics file.
                      </p></dd>
<dt><span class="term"><strong class="userinput"><code>querylog</code></strong></span></dt>
<dd><p>
                        Toggle query logging. Query logging can also be enabled
                        by explicitly directing the <span><strong class="command">queries</strong></span>
                        <span><strong class="command">category</strong></span> to a
                        <span><strong class="command">channel</strong></span> in the
                        <span><strong class="command">logging</strong></span> section of
                        <code class="filename">named.conf</code> or by specifying
                        <span><strong class="command">querylog yes;</strong></span> in the
                        <span><strong class="command">options</strong></span> section of
                        <code class="filename">named.conf</code>.
                      </p></dd>
<dt><span class="term"><strong class="userinput"><code>dumpdb
                        [<span class="optional">-all|-cache|-zone</span>]
                        [<span class="optional"><em class="replaceable"><code>view ...</code></em></span>]</code></strong></span></dt>
<dd><p>
                        Dump the server's caches (default) and/or zones to
                        the
                        dump file for the specified views.  If no view is
                        specified, all
                        views are dumped.
                      </p></dd>
<dt><span class="term"><strong class="userinput"><code>stop [<span class="optional">-p</span>]</code></strong></span></dt>
<dd><p>
                        Stop the server, making sure any recent changes
                        made through dynamic update or IXFR are first saved to
                        the master files of the updated zones.
                        If -p is specified named's process id is returned.
                        This allows an external process to determine when named
                        had completed stopping.
                      </p></dd>
<dt><span class="term"><strong class="userinput"><code>halt [<span class="optional">-p</span>]</code></strong></span></dt>
<dd><p>
                        Stop the server immediately.  Recent changes
                        made through dynamic update or IXFR are not saved to
                        the master files, but will be rolled forward from the
                        journal files when the server is restarted.
                        If -p is specified named's process id is returned.
                        This allows an external process to determine when named
                        had completed halting.
                      </p></dd>
<dt><span class="term"><strong class="userinput"><code>trace</code></strong></span></dt>
<dd><p>
                        Increment the servers debugging level by one.
                      </p></dd>
<dt><span class="term"><strong class="userinput"><code>trace <em class="replaceable"><code>level</code></em></code></strong></span></dt>
<dd><p>
                        Sets the server's debugging level to an explicit
                        value.
                      </p></dd>
<dt><span class="term"><strong class="userinput"><code>notrace</code></strong></span></dt>
<dd><p>
                        Sets the server's debugging level to 0.
                      </p></dd>
<dt><span class="term"><strong class="userinput"><code>flush</code></strong></span></dt>
<dd><p>
                        Flushes the server's cache.
                      </p></dd>
<dt><span class="term"><strong class="userinput"><code>flushname</code></strong> <em class="replaceable"><code>name</code></em></span></dt>
<dd><p>
                        Flushes the given name from the server's cache.
                      </p></dd>
<dt><span class="term"><strong class="userinput"><code>status</code></strong></span></dt>
<dd><p>
                        Display status of the server.
                        Note that the number of zones includes the internal <span><strong class="command">bind/CH</strong></span> zone
                        and the default <span><strong class="command">./IN</strong></span>
                        hint zone if there is not an
                        explicit root zone configured.
                      </p></dd>
<dt><span class="term"><strong class="userinput"><code>recursing</code></strong></span></dt>
<dd><p>
                        Dump the list of queries named is currently recursing
                        on.
                      </p></dd>
</dl></div>
<p>
                  A configuration file is required, since all
                  communication with the server is authenticated with
                  digital signatures that rely on a shared secret, and
                  there is no way to provide that secret other than with a
                  configuration file.  The default location for the
                  <span><strong class="command">rndc</strong></span> configuration file is
                  <code class="filename">/etc/rndc.conf</code>, but an
                  alternate
                  location can be specified with the <code class="option">-c</code>
                  option.  If the configuration file is not found,
                  <span><strong class="command">rndc</strong></span> will also look in
                  <code class="filename">/etc/rndc.key</code> (or whatever
                  <code class="varname">sysconfdir</code> was defined when
                  the <acronym class="acronym">BIND</acronym> build was
                  configured).
                  The <code class="filename">rndc.key</code> file is
                  generated by
                  running <span><strong class="command">rndc-confgen -a</strong></span> as
                  described in
                  <a href="Bv9ARM.ch06.html#controls_statement_definition_and_usage" title="controls Statement Definition and
          Usage">the section called &#8220;<span><strong class="command">controls</strong></span> Statement Definition and
          Usage&#8221;</a>.
                </p>
<p>
                  The format of the configuration file is similar to
                  that of <code class="filename">named.conf</code>, but
                  limited to
                  only four statements, the <span><strong class="command">options</strong></span>,
                  <span><strong class="command">key</strong></span>, <span><strong class="command">server</strong></span> and
                  <span><strong class="command">include</strong></span>
                  statements.  These statements are what associate the
                  secret keys to the servers with which they are meant to
                  be shared.  The order of statements is not
                  significant.
                </p>
<p>
                  The <span><strong class="command">options</strong></span> statement has
                  three clauses:
                  <span><strong class="command">default-server</strong></span>, <span><strong class="command">default-key</strong></span>,
                  and <span><strong class="command">default-port</strong></span>.
                  <span><strong class="command">default-server</strong></span> takes a
                  host name or address argument  and represents the server
                  that will
                  be contacted if no <code class="option">-s</code>
                  option is provided on the command line.
                  <span><strong class="command">default-key</strong></span> takes
                  the name of a key as its argument, as defined by a <span><strong class="command">key</strong></span> statement.
                  <span><strong class="command">default-port</strong></span> specifies the
                  port to which
                  <span><strong class="command">rndc</strong></span> should connect if no
                  port is given on the command line or in a
                  <span><strong class="command">server</strong></span> statement.
                </p>
<p>
                  The <span><strong class="command">key</strong></span> statement defines a
                  key to be used
                  by <span><strong class="command">rndc</strong></span> when authenticating
                  with
                  <span><strong class="command">named</strong></span>.  Its syntax is
                  identical to the
                  <span><strong class="command">key</strong></span> statement in named.conf.
                  The keyword <strong class="userinput"><code>key</code></strong> is
                  followed by a key name, which must be a valid
                  domain name, though it need not actually be hierarchical;
                  thus,
                  a string like "<strong class="userinput"><code>rndc_key</code></strong>" is a valid
                  name.
                  The <span><strong class="command">key</strong></span> statement has two
                  clauses:
                  <span><strong class="command">algorithm</strong></span> and <span><strong class="command">secret</strong></span>.
                  While the configuration parser will accept any string as the
                  argument
                  to algorithm, currently only the string "<strong class="userinput"><code>hmac-md5</code></strong>"
                  has any meaning.  The secret is a base-64 encoded string
                  as specified in RFC 3548.
                </p>
<p>
                  The <span><strong class="command">server</strong></span> statement
                  associates a key
                  defined using the <span><strong class="command">key</strong></span>
                  statement with a server.
                  The keyword <strong class="userinput"><code>server</code></strong> is followed by a
                  host name or address.  The <span><strong class="command">server</strong></span> statement
                  has two clauses: <span><strong class="command">key</strong></span> and <span><strong class="command">port</strong></span>.
                  The <span><strong class="command">key</strong></span> clause specifies the
                  name of the key
                  to be used when communicating with this server, and the
                  <span><strong class="command">port</strong></span> clause can be used to
                  specify the port <span><strong class="command">rndc</strong></span> should
                  connect
                  to on the server.
                </p>
<p>
                  A sample minimal configuration file is as follows:
                </p>
<pre class="programlisting">
key rndc_key {
     algorithm "hmac-md5";
     secret "c3Ryb25nIGVub3VnaCBmb3IgYSBtYW4gYnV0IG1hZGUgZm9yIGEgd29tYW4K";
};
options {
     default-server 127.0.0.1;
     default-key    rndc_key;
};
</pre>
<p>
                  This file, if installed as <code class="filename">/etc/rndc.conf</code>,
                  would allow the command:
                </p>
<p>
                  <code class="prompt">$ </code><strong class="userinput"><code>rndc reload</code></strong>
                </p>
<p>
                  to connect to 127.0.0.1 port 953 and cause the name server
                  to reload, if a name server on the local machine were
                  running with
                  following controls statements:
                </p>
<pre class="programlisting">
controls {
        inet 127.0.0.1 allow { localhost; } keys { rndc_key; };
};
</pre>
<p>
                  and it had an identical key statement for
                  <code class="literal">rndc_key</code>.
                </p>
<p>
                  Running the <span><strong class="command">rndc-confgen</strong></span>
                  program will
                  conveniently create a <code class="filename">rndc.conf</code>
                  file for you, and also display the
                  corresponding <span><strong class="command">controls</strong></span>
                  statement that you need to
                  add to <code class="filename">named.conf</code>.
                  Alternatively,
                  you can run <span><strong class="command">rndc-confgen -a</strong></span>
                  to set up
                  a <code class="filename">rndc.key</code> file and not
                  modify
                  <code class="filename">named.conf</code> at all.
                </p>
</dd>
</dl></div>
</div>
</div>
<div class="sect2" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="id2570184"></a>Signals</h3></div></div></div>
<p>
          Certain UNIX signals cause the name server to take specific
          actions, as described in the following table.  These signals can
          be sent using the <span><strong class="command">kill</strong></span> command.
        </p>
<div class="informaltable"><table border="1">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td>
                  <p><span><strong class="command">SIGHUP</strong></span></p>
                </td>
<td>
                  <p>
                    Causes the server to read <code class="filename">named.conf</code> and
                    reload the database.
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p><span><strong class="command">SIGTERM</strong></span></p>
                </td>
<td>
                  <p>
                    Causes the server to clean up and exit.
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p><span><strong class="command">SIGINT</strong></span></p>
                </td>
<td>
                  <p>
                    Causes the server to clean up and exit.
                  </p>
                </td>
</tr>
</tbody>
</table></div>
</div>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="Bv9ARM.ch02.html">Prev</a> </td>
<td width="20%" align="center"> </td>
<td width="40%" align="right"> <a accesskey="n" href="Bv9ARM.ch04.html">Next</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">Chapter 2. <acronym class="acronym">BIND</acronym> Resource Requirements </td>
<td width="20%" align="center"><a accesskey="h" href="Bv9ARM.html">Home</a></td>
<td width="40%" align="right" valign="top"> Chapter 4. Advanced DNS Features</td>
</tr>
</table>
</div>
</body>
</html>
@


1.8
log
@resolve conflicts
@
text
@@


1.7
log
@resolve conflicts and regen configure script
@
text
@d2 1
a2 1
 - Copyright (C) 2004-2006 Internet Systems Consortium, Inc. ("ISC")
d17 1
a17 1
<!-- $ISC: Bv9ARM.ch03.html,v 1.26.2.5.4.17 2006/06/29 13:02:31 marka Exp $ -->
d22 1
a22 1
<meta name="generator" content="DocBook XSL Stylesheets V1.70.1">
d50 2
a51 2
<dt><span class="sect2"><a href="Bv9ARM.ch03.html#id2571026">A Caching-only Name Server</a></span></dt>
<dt><span class="sect2"><a href="Bv9ARM.ch03.html#id2571042">An Authoritative-only Name Server</a></span></dt>
d53 2
a54 2
<dt><span class="sect1"><a href="Bv9ARM.ch03.html#id2571064">Load Balancing</a></span></dt>
<dt><span class="sect1"><a href="Bv9ARM.ch03.html#id2571484">Name Server Operations</a></span></dt>
d56 2
a57 2
<dt><span class="sect2"><a href="Bv9ARM.ch03.html#id2571490">Tools for Use With the Name Server Daemon</a></span></dt>
<dt><span class="sect2"><a href="Bv9ARM.ch03.html#id2572723">Signals</a></span></dt>
d61 5
a65 3
<p>In this section we provide some suggested configurations along
with guidelines for their use. We also address the topic of reasonable
option setting.</p>
d71 10
a80 6
<a name="id2571026"></a>A Caching-only Name Server</h3></div></div></div>
<p>The following sample configuration is appropriate for a caching-only
name server for use by clients internal to a corporation.  All queries
from outside clients are refused using the <span><strong class="command">allow-query</strong></span>
option.  Alternatively, the same effect could be achieved using suitable
firewall rules.</p>
d98 6
a103 4
<a name="id2571042"></a>An Authoritative-only Name Server</h3></div></div></div>
<p>This sample configuration is for an authoritative-only server
that is the master server for "<code class="filename">example.com</code>"
and a slave for the subdomain "<code class="filename">eng.example.com</code>".</p>
d107 1
d140 12
a151 7
<a name="id2571064"></a>Load Balancing</h2></div></div></div>
<p>A primitive form of load balancing can be achieved in
the <acronym class="acronym">DNS</acronym> by using multiple A records for one name.</p>
<p>For example, if you have three WWW servers with network addresses
of 10.0.0.1, 10.0.0.2 and 10.0.0.3, a set of records such as the
following means that clients will connect to each machine one third
of the time:</p>
d162 25
a186 5
<td><p>Name</p></td>
<td><p>TTL</p></td>
<td><p>CLASS</p></td>
<td><p>TYPE</p></td>
<td><p>Resource Record (RR) Data</p></td>
d189 25
a213 5
<td><p><code class="literal">www</code></p></td>
<td><p><code class="literal">600</code></p></td>
<td><p><code class="literal">IN</code></p></td>
<td><p><code class="literal">A</code></p></td>
<td><p><code class="literal">10.0.0.1</code></p></td>
d216 23
a238 5
<td><p></p></td>
<td><p><code class="literal">600</code></p></td>
<td><p><code class="literal">IN</code></p></td>
<td><p><code class="literal">A</code></p></td>
<td><p><code class="literal">10.0.0.2</code></p></td>
d241 23
a263 5
<td><p></p></td>
<td><p><code class="literal">600</code></p></td>
<td><p><code class="literal">IN</code></p></td>
<td><p><code class="literal">A</code></p></td>
<td><p><code class="literal">10.0.0.3</code></p></td>
d267 13
a279 12
<p>When a resolver queries for these records, <acronym class="acronym">BIND</acronym> will rotate
    them and respond to the query with the records in a different
    order.  In the example above, clients will randomly receive
    records in the order 1, 2, 3; 2, 3, 1; and 3, 1, 2. Most clients
    will use the first record returned and discard the rest.</p>
<p>For more detail on ordering responses, check the
    <span><strong class="command">rrset-order</strong></span> substatement in the
    <span><strong class="command">options</strong></span> statement, see
    <a href="Bv9ARM.ch06.html#rrset_ordering">RRset Ordering</a>.
    This substatement is not supported in
    <acronym class="acronym">BIND</acronym> 9, and only the ordering scheme described above is
    available.</p>
d283 1
a283 1
<a name="id2571484"></a>Name Server Operations</h2></div></div></div>
d286 7
a292 5
<a name="id2571490"></a>Tools for Use With the Name Server Daemon</h3></div></div></div>
<p>There are several indispensable diagnostic, administrative
and monitoring tools available to the system administrator for controlling
and debugging the name server daemon. We describe several in this
section </p>
d296 7
a302 5
<p>The <span><strong class="command">dig</strong></span>, <span><strong class="command">host</strong></span>, and
<span><strong class="command">nslookup</strong></span> programs are all command line tools
for manually querying name servers.  They differ in style and
output format.
</p>
d306 10
a315 6
<p>The domain information groper (<span><strong class="command">dig</strong></span>)
is the most versatile and complete of these lookup tools.
It has two modes: simple interactive
mode for a single query, and batch mode which executes a query for
each in a list of several query lines. All query options are accessible
from the command line.</p>
d317 11
a327 4
<p>The usual simple use of dig will take the form</p>
<p><span><strong class="command">dig @@server domain query-type query-class</strong></span></p>
<p>For more information and a list of available commands and
options, see the <span><strong class="command">dig</strong></span> man page.</p>
d331 14
a344 7
<p>The <span><strong class="command">host</strong></span> utility emphasizes simplicity
and ease of use.  By default, it converts
between host names and Internet addresses, but its functionality
can be extended with the use of options.</p>
<div class="cmdsynopsis"><p><code class="command">host</code>  [-aCdlrTwv] [-c <em class="replaceable"><code>class</code></em>] [-N <em class="replaceable"><code>ndots</code></em>] [-t <em class="replaceable"><code>type</code></em>] [-W <em class="replaceable"><code>timeout</code></em>] [-R <em class="replaceable"><code>retries</code></em>]  <em class="replaceable"><code>hostname</code></em>  [<em class="replaceable"><code>server</code></em>]</p></div>
<p>For more information and a list of available commands and
options, see the <span><strong class="command">host</strong></span> man page.</p>
d348 9
a356 5
<p><span><strong class="command">nslookup</strong></span> has two modes: interactive
and non-interactive. Interactive mode allows the user to query name servers
for information about various hosts and domains or to print a list
of hosts in a domain. Non-interactive mode is used to print just
the name and requested information for a host or domain.</p>
d358 21
a378 10
<p>Interactive mode is entered when no arguments are given (the
default name server will be used) or when the first argument is a
hyphen (`-') and the second argument is the host name or Internet address
of a name server.</p>
<p>Non-interactive mode is used when the name or Internet address
of the host to be looked up is given as the first argument. The
optional second argument specifies the host name or address of a name server.</p>
<p>Due to its arcane user interface and frequently inconsistent
behavior, we do not recommend the use of <span><strong class="command">nslookup</strong></span>.
Use <span><strong class="command">dig</strong></span> instead.</p>
d385 4
a388 2
<p>Administrative tools play an integral part in the management
of a server.</p>
d394 4
a397 2
<p>The <span><strong class="command">named-checkconf</strong></span> program
              checks the syntax of a <code class="filename">named.conf</code> file.</p>
d404 6
a409 3
<p>The <span><strong class="command">named-checkzone</strong></span> program checks a master file for
              syntax and consistency.</p>
<div class="cmdsynopsis"><p><code class="command">named-checkzone</code>  [-djqvD] [-c <em class="replaceable"><code>class</code></em>] [-o <em class="replaceable"><code>output</code></em>] [-t <em class="replaceable"><code>directory</code></em>] [-w <em class="replaceable"><code>directory</code></em>] [-k <em class="replaceable"><code>(ignore|warn|fail)</code></em>] [-n <em class="replaceable"><code>(ignore|warn|fail)</code></em>]  <em class="replaceable"><code>zone</code></em>  [<em class="replaceable"><code>filename</code></em>]</p></div>
d412 8
d423 15
a437 5
<p>The remote name daemon control
              (<span><strong class="command">rndc</strong></span>) program allows the system
              administrator to control the operation of a name server.
              If you run <span><strong class="command">rndc</strong></span> without any options
              it will display a usage message as follows:</p>
d439 3
a441 1
<p>The <span><strong class="command">command</strong></span> is one of the following:</p>
d444 3
a446 1
<dd><p>Reload configuration file and zones.</p></dd>
d448 1
a448 1
       [<span class="optional"><em class="replaceable"><code>class</code></em>
d450 3
a452 1
<dd><p>Reload the given zone.</p></dd>
d454 1
a454 1
       [<span class="optional"><em class="replaceable"><code>class</code></em>
d456 3
a458 1
<dd><p>Schedule zone maintenance for the given zone.</p></dd>
d460 2
a461 1
       [<span class="optional"><em class="replaceable"><code>class</code></em>
d463 5
a467 2
<dd><p>Retransfer the given zone from the master.</p></dd>
<dt><span class="term"><strong class="userinput"><code>freeze [<span class="optional"><em class="replaceable"><code>zone</code></em>
d470 14
a483 7
<dd><p>Suspend updates to a dynamic zone.  If no zone is specified,
	then all zones are suspended.  This allows manual
    edits to be made to a zone normally updated by dynamic update.  It
    also causes changes in the journal file to be synced into the master
    and the journal file to be removed.  All dynamic update attempts will
    be refused while the zone is frozen.</p></dd>
<dt><span class="term"><strong class="userinput"><code>thaw [<span class="optional"><em class="replaceable"><code>zone</code></em>
d486 17
a502 5
<dd><p>Enable updates to a frozen dynamic zone.  If no zone is
    specified, then all frozen zones are enabled.  This causes
    the server to reload the zone from disk, and re-enables dynamic updates
    after the load has completed.  After a zone is thawed, dynamic updates
    will no longer be refused.</p></dd>
d504 9
a512 6
<dd><p>Reload the configuration file and load new zones,
   but do not reload existing zone files even if they have changed.
   This is faster than a full <span><strong class="command">reload</strong></span> when there
   is a large number of zones because it avoids the need to examine the
   modification times of the zones files.
   </p></dd>
d514 3
a516 1
<dd><p>Write server statistics to the statistics file.</p></dd>
d518 21
a538 9
<dd><p>Toggle query logging. Query logging can also be enabled
   by explicitly directing the <span><strong class="command">queries</strong></span>
   <span><strong class="command">category</strong></span> to a <span><strong class="command">channel</strong></span> in the
   <span><strong class="command">logging</strong></span> section of
   <code class="filename">named.conf</code>.</p></dd>
<dt><span class="term"><strong class="userinput"><code>dumpdb [<span class="optional">-all|-cache|-zone</span>] [<span class="optional"><em class="replaceable"><code>view ...</code></em></span>]</code></strong></span></dt>
<dd><p>Dump the server's caches (default) and / or zones to the
	 dump file for the specified views.  If no view is specified, all
	 views are dumped.</p></dd>
d540 8
a547 4
<dd><p>Stop the server, making sure any recent changes
   made through dynamic update or IXFR are first saved to the master files
   of the updated zones.  If -p is specified named's process id is returned.
   This allows an external process to determine when named had completed stopping.</p></dd>
d549 9
a557 6
<dd><p>Stop the server immediately.  Recent changes
   made through dynamic update or IXFR are not saved to the master files,
   but will be rolled forward from the journal files when the server
   is restarted.  If -p is specified named's process id is returned.
   This allows an external process to determine when named had completed
   stopping.</p></dd>
d559 3
a561 1
<dd><p>Increment the servers debugging level by one. </p></dd>
d563 4
a566 2
<dd><p>Sets the server's debugging level to an explicit
   value.</p></dd>
d568 3
a570 1
<dd><p>Sets the server's debugging level to 0.</p></dd>
d572 3
a574 1
<dd><p>Flushes the server's cache.</p></dd>
d576 3
a578 1
<dd><p>Flushes the given name from the server's cache.</p></dd>
d580 7
a586 4
<dd><p>Display status of the server.
Note that the number of zones includes the internal <span><strong class="command">bind/CH</strong></span> zone
and the default <span><strong class="command">./IN</strong></span> hint zone if there is not an
explicit root zone configured.</p></dd>
d588 4
a591 3
<dd><p>Dump the list of queries named is currently recursing
   on.
   </p></dd>
d593 96
a688 67
<p>In <acronym class="acronym">BIND</acronym> 9.2, <span><strong class="command">rndc</strong></span>
supports all the commands of the BIND 8 <span><strong class="command">ndc</strong></span>
utility except <span><strong class="command">ndc start</strong></span> and
<span><strong class="command">ndc restart</strong></span>, which were also
not supported in <span><strong class="command">ndc</strong></span>'s channel mode.</p>
<p>A configuration file is required, since all
communication with the server is authenticated with
digital signatures that rely on a shared secret, and
there is no way to provide that secret other than with a
configuration file.  The default location for the
<span><strong class="command">rndc</strong></span> configuration file is
<code class="filename">/etc/rndc.conf</code>, but an alternate
location can be specified with the <code class="option">-c</code>
option.  If the configuration file is not found,
<span><strong class="command">rndc</strong></span> will also look in
<code class="filename">/etc/rndc.key</code> (or whatever
<code class="varname">sysconfdir</code> was defined when
the <acronym class="acronym">BIND</acronym> build was configured).
The <code class="filename">rndc.key</code> file is generated by
running <span><strong class="command">rndc-confgen -a</strong></span> as described in
<a href="Bv9ARM.ch06.html#controls_statement_definition_and_usage" title="controls Statement Definition and Usage">the section called &#8220;<span><strong class="command">controls</strong></span> Statement Definition and Usage&#8221;</a>.</p>
<p>The format of the configuration file is similar to
that of <code class="filename">named.conf</code>, but limited to
only four statements, the <span><strong class="command">options</strong></span>,
<span><strong class="command">key</strong></span>, <span><strong class="command">server</strong></span> and
<span><strong class="command">include</strong></span>
statements.  These statements are what associate the
secret keys to the servers with which they are meant to
be shared.  The order of statements is not
significant.</p>
<p>The <span><strong class="command">options</strong></span> statement has three clauses:
<span><strong class="command">default-server</strong></span>, <span><strong class="command">default-key</strong></span>, 
and <span><strong class="command">default-port</strong></span>.
<span><strong class="command">default-server</strong></span> takes a
host name or address argument  and represents the server that will
be contacted if no <code class="option">-s</code>
option is provided on the command line.  
<span><strong class="command">default-key</strong></span> takes
the name of a key as its argument, as defined by a <span><strong class="command">key</strong></span> statement.
<span><strong class="command">default-port</strong></span> specifies the port to which
<span><strong class="command">rndc</strong></span> should connect if no
port is given on the command line or in a
<span><strong class="command">server</strong></span> statement.</p>
<p>The <span><strong class="command">key</strong></span> statement defines a key to be used
by <span><strong class="command">rndc</strong></span> when authenticating with
<span><strong class="command">named</strong></span>.  Its syntax is identical to the
<span><strong class="command">key</strong></span> statement in named.conf.
The keyword <strong class="userinput"><code>key</code></strong> is
followed by a key name, which must be a valid
domain name, though it need not actually be hierarchical; thus,
a string like "<strong class="userinput"><code>rndc_key</code></strong>" is a valid name.
The <span><strong class="command">key</strong></span> statement has two clauses:
<span><strong class="command">algorithm</strong></span> and <span><strong class="command">secret</strong></span>.
While the configuration parser will accept any string as the argument
to algorithm, currently only the string "<strong class="userinput"><code>hmac-md5</code></strong>"
has any meaning.  The secret is a base-64 encoded string.</p>
<p>The <span><strong class="command">server</strong></span> statement associates a key
defined using the <span><strong class="command">key</strong></span> statement with a server.
The keyword <strong class="userinput"><code>server</code></strong> is followed by a
host name or address.  The <span><strong class="command">server</strong></span> statement
has two clauses: <span><strong class="command">key</strong></span> and <span><strong class="command">port</strong></span>.
The <span><strong class="command">key</strong></span> clause specifies the name of the key
to be used when communicating with this server, and the
<span><strong class="command">port</strong></span> clause can be used to
specify the port <span><strong class="command">rndc</strong></span> should connect
to on the server.</p>
<p>A sample minimal configuration file is as follows:</p>
d699 13
a711 6
<p>This file, if installed as <code class="filename">/etc/rndc.conf</code>,
would allow the command:</p>
<p><code class="prompt">$ </code><strong class="userinput"><code>rndc reload</code></strong></p>
<p>to connect to 127.0.0.1 port 953 and cause the name server
to reload, if a name server on the local machine were running with
following controls statements:</p>
d717 19
a735 11
<p>and it had an identical key statement for
<code class="literal">rndc_key</code>.</p>
<p>Running the <span><strong class="command">rndc-confgen</strong></span> program will
conveniently create a <code class="filename">rndc.conf</code>
file for you, and also display the
corresponding <span><strong class="command">controls</strong></span> statement that you need to
add to <code class="filename">named.conf</code>.  Alternatively,
you can run <span><strong class="command">rndc-confgen -a</strong></span> to set up
a <code class="filename">rndc.key</code> file and not modify 
<code class="filename">named.conf</code> at all.
</p>
d742 6
a747 4
<a name="id2572723"></a>Signals</h3></div></div></div>
<p>Certain UNIX signals cause the name server to take specific
actions, as described in the following table.  These signals can
be sent using the <span><strong class="command">kill</strong></span> command.</p>
d755 9
a763 3
<td><p><span><strong class="command">SIGHUP</strong></span></p></td>
<td><p>Causes the server to read <code class="filename">named.conf</code> and
reload the database. </p></td>
d766 8
a773 2
<td><p><span><strong class="command">SIGTERM</strong></span></p></td>
<td><p>Causes the server to clean up and exit.</p></td>
d777 7
a783 3
<p><span><strong class="command">SIGINT</strong></span></p>
</td>
<td><p>Causes the server to clean up and exit.</p></td>
@


1.6
log
@resolve conflicts
@
text
@d2 1
a2 1
 - Copyright (C) 2004, 2005 Internet Systems Consortium, Inc. ("ISC")
d17 1
a17 1
<!-- $ISC: Bv9ARM.ch03.html,v 1.26.2.5.4.11 2005/10/13 02:33:59 marka Exp $ -->
d22 1
a22 1
<meta name="generator" content="DocBook XSL Stylesheets V1.69.1">
d50 2
a51 2
<dt><span class="sect2"><a href="Bv9ARM.ch03.html#id2547334">A Caching-only Name Server</a></span></dt>
<dt><span class="sect2"><a href="Bv9ARM.ch03.html#id2547350">An Authoritative-only Name Server</a></span></dt>
d53 2
a54 2
<dt><span class="sect1"><a href="Bv9ARM.ch03.html#id2547372">Load Balancing</a></span></dt>
<dt><span class="sect1"><a href="Bv9ARM.ch03.html#id2547656">Name Server Operations</a></span></dt>
d56 2
a57 2
<dt><span class="sect2"><a href="Bv9ARM.ch03.html#id2547661">Tools for Use With the Name Server Daemon</a></span></dt>
<dt><span class="sect2"><a href="Bv9ARM.ch03.html#id2548915">Signals</a></span></dt>
d69 1
a69 1
<a name="id2547334"></a>A Caching-only Name Server</h3></div></div></div>
d92 1
a92 1
<a name="id2547350"></a>An Authoritative-only Name Server</h3></div></div></div>
d131 1
a131 1
<a name="id2547372"></a>Load Balancing</h2></div></div></div>
d133 1
a133 1
the <span class="acronym">DNS</span> by using multiple A records for one name.</p>
d177 1
a177 1
<p>When a resolver queries for these records, <span class="acronym">BIND</span> will rotate
d187 1
a187 1
    <span class="acronym">BIND</span> 9, and only the ordering scheme described above is
d192 1
a192 1
<a name="id2547656"></a>Name Server Operations</h2></div></div></div>
d195 1
a195 1
<a name="id2547661"></a>Tools for Use With the Name Server Daemon</h3></div></div></div>
d240 1
a240 1
<div class="cmdsynopsis"><p><code class="command">nslookup</code>  [-option...] [[<em class="replaceable"><code>host-to-find</code></em>] |  [-  [server]]]</p></div>
d286 1
a286 1
<p><span><strong class="command">command</strong></span> is one of the following:</p>
d305 1
a305 1
<dd><p>Suspend updates to a dynamic zone.  If no zone is specified
d315 1
a315 1
    specified then all frozen zones are enabled.  This causes
a318 4
<dt><span class="term"><strong class="userinput"><code>notify <em class="replaceable"><code>zone</code></em>
       [<span class="optional"><em class="replaceable"><code>class</code></em>
           [<span class="optional"><em class="replaceable"><code>view</code></em></span>]</span>]</code></strong></span></dt>
<dd><p>Resend NOTIFY messages for the zone</p></dd>
d336 1
a336 1
	 dump file for the specified views.  If no view is specified all
d341 2
a342 1
   of the updated zones.  If -p is specified named's process id is returned.</p></dd>
d347 3
a349 1
   is restarted.  If -p is specified named's process id is returned.</p></dd>
d363 2
a364 2
Note the number of zones includes the internal <span><strong class="command">bind/CH</strong></span> zone
and the default <span><strong class="command">./IN</strong></span> hint zone if there is not a
d371 1
a371 1
<p>In <span class="acronym">BIND</span> 9.2, <span><strong class="command">rndc</strong></span>
d388 1
a388 1
the <span class="acronym">BIND</span> build was configured).
d414 1
a414 1
<p>The <span><strong class="command">key</strong></span> statement defines an key to be used
d476 1
a476 1
<a name="id2548915"></a>Signals</h3></div></div></div>
d517 1
a517 1
<td width="40%" align="left" valign="top">Chapter 2. <span class="acronym">BIND</span> Resource Requirements </td>
@


1.5
log
@resolve conflicts
@
text
@d1 61
a61 100
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>Name Server Configuration</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="BIND 9 Administrator Reference Manual"
HREF="Bv9ARM.html"><LINK
REL="PREVIOUS"
TITLE="BIND Resource Requirements"
HREF="Bv9ARM.ch02.html"><LINK
REL="NEXT"
TITLE="Advanced DNS Features"
HREF="Bv9ARM.ch04.html"></HEAD
><BODY
CLASS="chapter"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>BIND 9 Administrator Reference Manual</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="Bv9ARM.ch02.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="Bv9ARM.ch04.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="chapter"
><H1
><A
NAME="ch03"
></A
>Chapter 3. Name Server Configuration</H1
><DIV
CLASS="TOC"
><DL
><DT
><B
>Table of Contents</B
></DT
><DT
>3.1. <A
HREF="Bv9ARM.ch03.html#sample_configuration"
>Sample Configurations</A
></DT
><DT
>3.2. <A
HREF="Bv9ARM.ch03.html#AEN268"
>Load Balancing</A
></DT
><DT
>3.3. <A
HREF="Bv9ARM.ch03.html#AEN345"
>Name Server Operations</A
></DT
></DL
></DIV
><P
>In this section we provide some suggested configurations along
d63 8
a70 19
option setting.</P
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="sample_configuration"
>3.1. Sample Configurations</A
></H1
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="AEN257"
>3.1.1. A Caching-only Name Server</A
></H2
><P
>The following sample configuration is appropriate for a caching-only
d72 1
a72 4
from outside clients are refused using the <B
CLASS="command"
>allow-query</B
>
d74 3
a76 4
firewall rules.</P
><PRE
CLASS="programlisting"
>&#13;// Two corporate subnets we wish to allow queries from.
d88 10
a97 23
</PRE
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="AEN262"
>3.1.2. An Authoritative-only Name Server</A
></H2
><P
>This sample configuration is for an authoritative-only server
that is the master server for "<TT
CLASS="filename"
>example.com</TT
>"
and a slave for the subdomain "<TT
CLASS="filename"
>eng.example.com</TT
>".</P
><PRE
CLASS="programlisting"
>&#13;options {
d126 9
a134 19
</PRE
></DIV
></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="AEN268"
>3.2. Load Balancing</A
></H1
><P
>A primitive form of load balancing can be achieved in
the <ACRONYM
CLASS="acronym"
>DNS</ACRONYM
> by using multiple A records for one name.</P
><P
>For example, if you have three WWW servers with network addresses
d137 41
a177 150
of the time:</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN273"
></A
><TABLE
CELLPADDING="3"
BORDER="1"
CLASS="CALSTABLE"
><TBODY
><TR
><TD
><P
>Name</P
></TD
><TD
><P
>TTL</P
></TD
><TD
><P
>CLASS</P
></TD
><TD
><P
>TYPE</P
></TD
><TD
><P
>Resource Record (RR) Data</P
></TD
></TR
><TR
><TD
><P
><VAR
CLASS="literal"
>www</VAR
></P
></TD
><TD
><P
><VAR
CLASS="literal"
>600</VAR
></P
></TD
><TD
><P
><VAR
CLASS="literal"
>IN</VAR
></P
></TD
><TD
><P
><VAR
CLASS="literal"
>A</VAR
></P
></TD
><TD
><P
><VAR
CLASS="literal"
>10.0.0.1</VAR
></P
></TD
></TR
><TR
><TD
><P
></P
></TD
><TD
><P
><VAR
CLASS="literal"
>600</VAR
></P
></TD
><TD
><P
><VAR
CLASS="literal"
>IN</VAR
></P
></TD
><TD
><P
><VAR
CLASS="literal"
>A</VAR
></P
></TD
><TD
><P
><VAR
CLASS="literal"
>10.0.0.2</VAR
></P
></TD
></TR
><TR
><TD
><P
></P
></TD
><TD
><P
><VAR
CLASS="literal"
>600</VAR
></P
></TD
><TD
><P
><VAR
CLASS="literal"
>IN</VAR
></P
></TD
><TD
><P
><VAR
CLASS="literal"
>A</VAR
></P
></TD
><TD
><P
><VAR
CLASS="literal"
>10.0.0.3</VAR
></P
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><P
>When a resolver queries for these records, <ACRONYM
CLASS="acronym"
>BIND</ACRONYM
> will rotate
d181 5
a185 17
    will use the first record returned and discard the rest.</P
><P
>For more detail on ordering responses, check the
    <B
CLASS="command"
>rrset-order</B
> substatement in the
    <B
CLASS="command"
>options</B
> statement, see
    <A
HREF="Bv9ARM.ch06.html#rrset_ordering"
><I
>RRset Ordering</I
></A
>.
d187 10
a196 24
    <ACRONYM
CLASS="acronym"
>BIND</ACRONYM
> 9, and only the ordering scheme described above is
    available.</P
></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="AEN345"
>3.3. Name Server Operations</A
></H1
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="AEN347"
>3.3.1. Tools for Use With the Name Server Daemon</A
></H2
><P
>There are several indispensable diagnostic, administrative
d199 6
a204 21
section </P
><DIV
CLASS="sect3"
><H3
CLASS="sect3"
><A
NAME="diagnostic_tools"
>3.3.1.1. Diagnostic Tools</A
></H3
><P
>The <B
CLASS="command"
>dig</B
>, <B
CLASS="command"
>host</B
>, and
<B
CLASS="command"
>nslookup</B
> programs are all command line tools
d207 5
a211 17
</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><B
CLASS="command"
>dig</B
></DT
><DD
><P
>The domain information groper (<B
CLASS="command"
>dig</B
>)
d216 10
a225 52
from the command line.</P
><P
><B
CLASS="command"
>dig</B
>  [@@<VAR
CLASS="replaceable"
>server</VAR
>]  <VAR
CLASS="replaceable"
>domain</VAR
>  [<VAR
CLASS="replaceable"
>query-type</VAR
>] [<VAR
CLASS="replaceable"
>query-class</VAR
>] [+<VAR
CLASS="replaceable"
>query-option</VAR
>] [-<VAR
CLASS="replaceable"
>dig-option</VAR
>] [%<VAR
CLASS="replaceable"
>comment</VAR
>]</P
><P
>The usual simple use of dig will take the form</P
><P
><B
CLASS="command"
>dig @@server domain query-type query-class</B
></P
><P
>For more information and a list of available commands and
options, see the <B
CLASS="command"
>dig</B
> man page.</P
></DD
><DT
><B
CLASS="command"
>host</B
></DT
><DD
><P
>The <B
CLASS="command"
>host</B
> utility emphasizes simplicity
d228 8
a235 45
can be extended with the use of options.</P
><P
><B
CLASS="command"
>host</B
>  [-aCdlrTwv] [-c <VAR
CLASS="replaceable"
>class</VAR
>] [-N <VAR
CLASS="replaceable"
>ndots</VAR
>] [-t <VAR
CLASS="replaceable"
>type</VAR
>] [-W <VAR
CLASS="replaceable"
>timeout</VAR
>] [-R <VAR
CLASS="replaceable"
>retries</VAR
>]  <VAR
CLASS="replaceable"
>hostname</VAR
>  [<VAR
CLASS="replaceable"
>server</VAR
>]</P
><P
>For more information and a list of available commands and
options, see the <B
CLASS="command"
>host</B
> man page.</P
></DD
><DT
><B
CLASS="command"
>nslookup</B
></DT
><DD
><P
><B
CLASS="command"
>nslookup</B
> has two modes: interactive
d239 3
a241 11
the name and requested information for a host or domain.</P
><P
><B
CLASS="command"
>nslookup</B
>  [-option...] [<VAR
CLASS="replaceable"
>host-to-find</VAR
> | -  [server]]</P
><P
>Interactive mode is entered when no arguments are given (the
d244 2
a245 3
of a name server.</P
><P
>Non-interactive mode is used when the name or Internet address
d247 35
a281 121
optional second argument specifies the host name or address of a name server.</P
><P
>Due to its arcane user interface and frequently inconsistent
behavior, we do not recommend the use of <B
CLASS="command"
>nslookup</B
>.
Use <B
CLASS="command"
>dig</B
> instead.</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="sect3"
><H3
CLASS="sect3"
><A
NAME="admin_tools"
>3.3.1.2. Administrative Tools</A
></H3
><P
>Administrative tools play an integral part in the management
of a server.</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><A
NAME="named-checkconf"
></A
><B
CLASS="command"
>named-checkconf</B
></DT
><DD
><P
>The <B
CLASS="command"
>named-checkconf</B
> program
              checks the syntax of a <TT
CLASS="filename"
>named.conf</TT
> file.</P
><P
><B
CLASS="command"
>named-checkconf</B
>  [-t <VAR
CLASS="replaceable"
>directory</VAR
>] [<VAR
CLASS="replaceable"
>filename</VAR
>]</P
></DD
><DT
><A
NAME="named-checkzone"
></A
><B
CLASS="command"
>named-checkzone</B
></DT
><DD
><P
>The <B
CLASS="command"
>named-checkzone</B
> program checks a master file for
              syntax and consistency.</P
><P
><B
CLASS="command"
>named-checkzone</B
>  [-djqvD] [-c <VAR
CLASS="replaceable"
>class</VAR
>] [-o <VAR
CLASS="replaceable"
>output</VAR
>] [-t <VAR
CLASS="replaceable"
>directory</VAR
>] [-w <VAR
CLASS="replaceable"
>directory</VAR
>] [-k <VAR
CLASS="replaceable"
>(ignore|warn|fail)</VAR
>] [-n <VAR
CLASS="replaceable"
>(ignore|warn|fail)</VAR
>]  <VAR
CLASS="replaceable"
>zone</VAR
>  [<VAR
CLASS="replaceable"
>filename</VAR
>]</P
></DD
><DT
><A
NAME="rndc"
></A
><B
CLASS="command"
>rndc</B
></DT
><DD
><P
>The remote name daemon control
              (<B
CLASS="command"
>rndc</B
>) program allows the system
d283 24
a306 150
              If you run <B
CLASS="command"
>rndc</B
> without any options
              it will display a usage message as follows:</P
><P
><B
CLASS="command"
>rndc</B
>  [-c <VAR
CLASS="replaceable"
>config</VAR
>] [-s <VAR
CLASS="replaceable"
>server</VAR
>] [-p <VAR
CLASS="replaceable"
>port</VAR
>] [-y <VAR
CLASS="replaceable"
>key</VAR
>]  <VAR
CLASS="replaceable"
>command</VAR
>  [<VAR
CLASS="replaceable"
>command</VAR
>...]</P
><P
><B
CLASS="command"
>command</B
> is one of the following:</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><KBD
CLASS="userinput"
>reload</KBD
></DT
><DD
><P
>Reload configuration file and zones.</P
></DD
><DT
><KBD
CLASS="userinput"
>reload <VAR
CLASS="replaceable"
>zone</VAR
>
       [<SPAN
CLASS="optional"
><VAR
CLASS="replaceable"
>class</VAR
>
           [<SPAN
CLASS="optional"
><VAR
CLASS="replaceable"
>view</VAR
></SPAN
>]</SPAN
>]</KBD
></DT
><DD
><P
>Reload the given zone.</P
></DD
><DT
><KBD
CLASS="userinput"
>refresh <VAR
CLASS="replaceable"
>zone</VAR
>
       [<SPAN
CLASS="optional"
><VAR
CLASS="replaceable"
>class</VAR
>
           [<SPAN
CLASS="optional"
><VAR
CLASS="replaceable"
>view</VAR
></SPAN
>]</SPAN
>]</KBD
></DT
><DD
><P
>Schedule zone maintenance for the given zone.</P
></DD
><DT
><KBD
CLASS="userinput"
>retransfer <VAR
CLASS="replaceable"
>zone</VAR
>
       [<SPAN
CLASS="optional"
><VAR
CLASS="replaceable"
>class</VAR
>
           [<SPAN
CLASS="optional"
><VAR
CLASS="replaceable"
>view</VAR
></SPAN
>]</SPAN
>]</KBD
></DT
><DD
><P
>Retransfer the given zone from the master.</P
></DD
><DT
><KBD
CLASS="userinput"
>freeze <VAR
CLASS="replaceable"
>zone</VAR
>
       [<SPAN
CLASS="optional"
><VAR
CLASS="replaceable"
>class</VAR
>
           [<SPAN
CLASS="optional"
><VAR
CLASS="replaceable"
>view</VAR
></SPAN
>]</SPAN
>]</KBD
></DT
><DD
><P
>Suspend updates to a dynamic zone.  This allows manual
d310 6
a315 27
    be refused while the zone is frozen.</P
></DD
><DT
><KBD
CLASS="userinput"
>unfreeze <VAR
CLASS="replaceable"
>zone</VAR
>
       [<SPAN
CLASS="optional"
><VAR
CLASS="replaceable"
>class</VAR
>
           [<SPAN
CLASS="optional"
><VAR
CLASS="replaceable"
>view</VAR
></SPAN
>]</SPAN
>]</KBD
></DT
><DD
><P
>Enable updates to a frozen dynamic zone.  This causes
d317 8
a324 11
    after the load has completed.  After a zone is unfrozen, dynamic updates
    will no longer be refused.</P
></DD
><DT
><KBD
CLASS="userinput"
>reconfig</KBD
></DT
><DD
><P
>Reload the configuration file and load new zones,
d326 1
a326 4
   This is faster than a full <B
CLASS="command"
>reload</B
> when there
d329 15
a343 57
   </P
></DD
><DT
><KBD
CLASS="userinput"
>stats</KBD
></DT
><DD
><P
>Write server statistics to the statistics file.</P
></DD
><DT
><KBD
CLASS="userinput"
>querylog</KBD
></DT
><DD
><P
>Toggle query logging. Query logging can also be enabled
   by explicitly directing the <B
CLASS="command"
>queries</B
>
   <B
CLASS="command"
>category</B
> to a <B
CLASS="command"
>channel</B
> in the
   <B
CLASS="command"
>logging</B
> section of
   <TT
CLASS="filename"
>named.conf</TT
>.</P
></DD
><DT
><KBD
CLASS="userinput"
>dumpdb</KBD
></DT
><DD
><P
>Dump the server's caches to the dump file. </P
></DD
><DT
><KBD
CLASS="userinput"
>stop</KBD
></DT
><DD
><P
>Stop the server,
   making sure any recent changes
d345 3
a347 10
   of the updated zones.</P
></DD
><DT
><KBD
CLASS="userinput"
>halt</KBD
></DT
><DD
><P
>Stop the server immediately.  Recent changes
d350 28
a377 88
   is restarted.</P
></DD
><DT
><KBD
CLASS="userinput"
>trace</KBD
></DT
><DD
><P
>Increment the servers debugging level by one. </P
></DD
><DT
><KBD
CLASS="userinput"
>trace <VAR
CLASS="replaceable"
>level</VAR
></KBD
></DT
><DD
><P
>Sets the server's debugging level to an explicit
   value.</P
></DD
><DT
><KBD
CLASS="userinput"
>notrace</KBD
></DT
><DD
><P
>Sets the server's debugging level to 0.</P
></DD
><DT
><KBD
CLASS="userinput"
>flush</KBD
></DT
><DD
><P
>Flushes the server's cache.</P
></DD
><DT
><KBD
CLASS="userinput"
>status</KBD
></DT
><DD
><P
>Display status of the server.
Note the number of zones includes the internal <B
CLASS="command"
>bind/CH</B
> zone
and the default <B
CLASS="command"
>./IN</B
> hint zone if there is not a
explicit root zone configured.</P
></DD
></DL
></DIV
><P
>In <ACRONYM
CLASS="acronym"
>BIND</ACRONYM
> 9.2, <B
CLASS="command"
>rndc</B
>
supports all the commands of the BIND 8 <B
CLASS="command"
>ndc</B
>
utility except <B
CLASS="command"
>ndc start</B
> and
<B
CLASS="command"
>ndc restart</B
>, which were also
not supported in <B
CLASS="command"
>ndc</B
>'s channel mode.</P
><P
>A configuration file is required, since all
d382 3
a384 12
<B
CLASS="command"
>rndc</B
> configuration file is
<TT
CLASS="filename"
>/etc/rndc.conf</TT
>, but an alternate
location can be specified with the <VAR
CLASS="option"
>-c</VAR
>
d386 12
a397 49
<B
CLASS="command"
>rndc</B
> will also look in
<TT
CLASS="filename"
>/etc/rndc.key</TT
> (or whatever
<VAR
CLASS="varname"
>sysconfdir</VAR
> was defined when
the <ACRONYM
CLASS="acronym"
>BIND</ACRONYM
> build was configured).
The <TT
CLASS="filename"
>rndc.key</TT
> file is generated by
running <B
CLASS="command"
>rndc-confgen -a</B
> as described in
<A
HREF="Bv9ARM.ch06.html#controls_statement_definition_and_usage"
>Section 6.2.4</A
>.</P
><P
>The format of the configuration file is similar to
that of <TT
CLASS="filename"
>named.conf</TT
>, but limited to
only four statements, the <B
CLASS="command"
>options</B
>,
<B
CLASS="command"
>key</B
>, <B
CLASS="command"
>server</B
> and
<B
CLASS="command"
>include</B
>
d401 5
a405 21
significant.</P
><P
>The <B
CLASS="command"
>options</B
> statement has three clauses:
<B
CLASS="command"
>default-server</B
>, <B
CLASS="command"
>default-key</B
>, 
and <B
CLASS="command"
>default-port</B
>.
<B
CLASS="command"
>default-server</B
> takes a
d407 1
a407 4
be contacted if no <VAR
CLASS="option"
>-s</VAR
>
d409 4
a412 16
<B
CLASS="command"
>default-key</B
> takes
the name of a key as its argument, as defined by a <B
CLASS="command"
>key</B
> statement.
<B
CLASS="command"
>default-port</B
> specifies the port to which
<B
CLASS="command"
>rndc</B
> should connect if no
d414 6
a419 25
<B
CLASS="command"
>server</B
> statement.</P
><P
>The <B
CLASS="command"
>key</B
> statement defines an key to be used
by <B
CLASS="command"
>rndc</B
> when authenticating with
<B
CLASS="command"
>named</B
>.  Its syntax is identical to the
<B
CLASS="command"
>key</B
> statement in named.conf.
The keyword <KBD
CLASS="userinput"
>key</KBD
> is
d422 3
a424 15
a string like "<KBD
CLASS="userinput"
>rndc_key</KBD
>" is a valid name.
The <B
CLASS="command"
>key</B
> statement has two clauses:
<B
CLASS="command"
>algorithm</B
> and <B
CLASS="command"
>secret</B
>.
d426 8
a433 33
to algorithm, currently only the string "<KBD
CLASS="userinput"
>hmac-md5</KBD
>"
has any meaning.  The secret is a base-64 encoded string.</P
><P
>The <B
CLASS="command"
>server</B
> statement associates a key
defined using the <B
CLASS="command"
>key</B
> statement with a server.
The keyword <KBD
CLASS="userinput"
>server</KBD
> is followed by a
host name or address.  The <B
CLASS="command"
>server</B
> statement
has two clauses: <B
CLASS="command"
>key</B
> and <B
CLASS="command"
>port</B
>.
The <B
CLASS="command"
>key</B
> clause specifies the name of the key
d435 6
a440 14
<B
CLASS="command"
>port</B
> clause can be used to
specify the port <B
CLASS="command"
>rndc</B
> should connect
to on the server.</P
><P
>A sample minimal configuration file is as follows:</P
><PRE
CLASS="programlisting"
>&#13;key rndc_key {
d448 5
a452 17
</PRE
><P
>This file, if installed as <TT
CLASS="filename"
>/etc/rndc.conf</TT
>,
would allow the command:</P
><P
><SAMP
CLASS="prompt"
>$ </SAMP
><KBD
CLASS="userinput"
>rndc reload</KBD
></P
><P
>to connect to 127.0.0.1 port 953 and cause the name server
d454 3
a456 4
following controls statements:</P
><PRE
CLASS="programlisting"
>&#13;controls {
d459 5
a463 16
</PRE
><P
>and it had an identical key statement for
<VAR
CLASS="literal"
>rndc_key</VAR
>.</P
><P
>Running the <B
CLASS="command"
>rndc-confgen</B
> program will
conveniently create a <TT
CLASS="filename"
>rndc.conf</TT
>
d465 14
a478 36
corresponding <B
CLASS="command"
>controls</B
> statement that you need to
add to <TT
CLASS="filename"
>named.conf</TT
>.  Alternatively,
you can run <B
CLASS="command"
>rndc-confgen -a</B
> to set up
a <TT
CLASS="filename"
>rndc.key</TT
> file and not modify 
<TT
CLASS="filename"
>named.conf</TT
> at all.
</P
></DD
></DL
></DIV
></DIV
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="AEN689"
>3.3.2. Signals</A
></H2
><P
>Certain UNIX signals cause the name server to take specific
d480 46
a525 132
be sent using the <B
CLASS="command"
>kill</B
> command.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN693"
></A
><TABLE
CELLPADDING="3"
BORDER="1"
CLASS="CALSTABLE"
><TBODY
><TR
><TD
><P
><B
CLASS="command"
>SIGHUP</B
></P
></TD
><TD
><P
>Causes the server to read <TT
CLASS="filename"
>named.conf</TT
> and
reload the database. </P
></TD
></TR
><TR
><TD
><P
><B
CLASS="command"
>SIGTERM</B
></P
></TD
><TD
><P
>Causes the server to clean up and exit.</P
></TD
></TR
><TR
><TD
>&#13;<P
><B
CLASS="command"
>SIGINT</B
></P
>
</TD
><TD
><P
>Causes the server to clean up and exit.</P
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="Bv9ARM.ch02.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="Bv9ARM.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="Bv9ARM.ch04.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><ACRONYM
CLASS="acronym"
>BIND</ACRONYM
> Resource Requirements</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Advanced DNS Features</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>@


1.4
log
@resolve conflicts
@
text
@d654 1
a654 1
>  [-dq] [-c <VAR
d657 15
d1336 1
a1336 1
NAME="AEN679"
d1351 1
a1351 1
NAME="AEN683"
@


1.3
log
@update to BIND v9.2.3. ok todd@@
@
text
@d1 1
d5 1
a5 1
>Nameserver Configuration</TITLE
d8 1
a8 2
CONTENT="Modular DocBook HTML Stylesheet Version 1.73
"><LINK
d16 1
a16 1
TITLE="Advanced Concepts"
d73 2
a74 2
>Chapter 3. Nameserver Configuration</A
></H1
d89 1
a89 1
HREF="Bv9ARM.ch03.html#AEN281"
d94 2
a95 7
HREF="Bv9ARM.ch03.html#notify"
>Notify</A
></DT
><DT
>3.4. <A
HREF="Bv9ARM.ch03.html#AEN369"
>Nameserver Operations</A
d116 2
a117 2
NAME="AEN271"
>3.1.1. A Caching-only Nameserver</A
d122 6
a127 1
from outside clients are refused.</P
d131 1
a131 1
acl "corpnets" { 192.168.4.0/24; 192.168.7.0/24; };
d134 1
a134 2
     pid-file "named.pid";              // Put pid file in working dir
     allow-query { "corpnets"; };
a135 2
// Root server hints
zone "." { type hint; file "root.hint"; };
d149 2
a150 2
NAME="AEN275"
>3.1.2. An Authoritative-only Nameserver</A
a165 1
     pid-file "named.pid";              // Put pid file in working dir
a168 2
// Root server hints
zone "." { type hint; file "root.hint"; };
d201 1
a201 1
NAME="AEN281"
d205 2
a206 1
>Primitive load balancing can be achieved in <SPAN
d208 2
a209 3
>DNS</SPAN
> using multiple
A records for one name.</P
d217 2
d220 1
a220 1
NAME="AEN286"
a221 2
><P
></P
a228 3
WIDTH="84"
ALIGN="LEFT"
VALIGN="MIDDLE"
a232 3
WIDTH="48"
ALIGN="LEFT"
VALIGN="MIDDLE"
a236 3
WIDTH="72"
ALIGN="LEFT"
VALIGN="MIDDLE"
a240 3
WIDTH="72"
ALIGN="LEFT"
VALIGN="MIDDLE"
a244 3
WIDTH="195"
ALIGN="LEFT"
VALIGN="MIDDLE"
a250 3
WIDTH="84"
ALIGN="LEFT"
VALIGN="MIDDLE"
d252 1
a252 1
><TT
d254 1
a254 1
>www</TT
a257 3
WIDTH="48"
ALIGN="LEFT"
VALIGN="MIDDLE"
d259 1
a259 1
><TT
d261 1
a261 1
>600</TT
a264 3
WIDTH="72"
ALIGN="LEFT"
VALIGN="MIDDLE"
d266 1
a266 1
><TT
d268 1
a268 1
>IN</TT
a271 3
WIDTH="72"
ALIGN="LEFT"
VALIGN="MIDDLE"
d273 1
a273 1
><TT
d275 1
a275 1
>A</TT
a278 3
WIDTH="195"
ALIGN="LEFT"
VALIGN="MIDDLE"
d280 1
a280 1
><TT
d282 1
a282 1
>10.0.0.1</TT
a287 3
WIDTH="84"
ALIGN="LEFT"
VALIGN="MIDDLE"
a291 3
WIDTH="48"
ALIGN="LEFT"
VALIGN="MIDDLE"
d293 1
a293 1
><TT
d295 1
a295 1
>600</TT
a298 3
WIDTH="72"
ALIGN="LEFT"
VALIGN="MIDDLE"
d300 1
a300 1
><TT
d302 1
a302 1
>IN</TT
a305 3
WIDTH="72"
ALIGN="LEFT"
VALIGN="MIDDLE"
d307 1
a307 1
><TT
d309 1
a309 1
>A</TT
a312 3
WIDTH="195"
ALIGN="LEFT"
VALIGN="MIDDLE"
d314 1
a314 1
><TT
d316 1
a316 1
>10.0.0.2</TT
a321 3
WIDTH="84"
ALIGN="LEFT"
VALIGN="MIDDLE"
a325 3
WIDTH="48"
ALIGN="LEFT"
VALIGN="MIDDLE"
d327 1
a327 1
><TT
d329 1
a329 1
>600</TT
a332 3
WIDTH="72"
ALIGN="LEFT"
VALIGN="MIDDLE"
d334 1
a334 1
><TT
d336 1
a336 1
>IN</TT
a339 3
WIDTH="72"
ALIGN="LEFT"
VALIGN="MIDDLE"
d341 1
a341 1
><TT
d343 1
a343 1
>A</TT
a346 3
WIDTH="195"
ALIGN="LEFT"
VALIGN="MIDDLE"
d348 1
a348 1
><TT
d350 1
a350 1
>10.0.0.3</TT
d360 1
a360 1
>When a resolver queries for these records, <SPAN
d362 1
a362 1
>BIND</SPAN
d385 1
a385 1
    <SPAN
d387 1
a387 1
>BIND</SPAN
d396 2
a397 44
NAME="notify"
>3.3. Notify</A
></H1
><P
><SPAN
CLASS="acronym"
>DNS</SPAN
> Notify is a mechanism that allows master nameservers to
    notify their slave servers of changes to a zone's data. In
    response to a <B
CLASS="command"
>NOTIFY</B
> from a master server, the
    slave will check to see that its version of the zone is the
    current version and, if not, initiate a transfer.</P
><P
><SPAN
CLASS="acronym"
>DNS</SPAN
>
    Notify is fully documented in RFC 1996. See also the description
    of the zone option <B
CLASS="command"
>also-notify</B
>, see
    <A
HREF="Bv9ARM.ch06.html#zone_transfers"
>Section 6.2.14.6</A
>. For more information about
    <B
CLASS="command"
>notify</B
>, see <A
HREF="Bv9ARM.ch06.html#boolean_options"
>Section 6.2.14.1</A
>.</P
></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="AEN369"
>3.4. Nameserver Operations</A
d404 2
a405 2
NAME="AEN371"
>3.4.1. Tools for Use With the Nameserver Daemon</A
d410 1
a410 1
and debugging the nameserver daemon. We describe several in this
d418 1
a418 1
>3.4.1.1. Diagnostic Tools</A
d421 15
d450 3
a452 3
>) is
a command line tool that can be used to gather information from
the Domain Name System servers. Dig has two modes: simple interactive
d460 1
a460 1
>  [@@<TT
d462 2
a463 4
><I
>server</I
></TT
>]  <TT
d465 2
a466 4
><I
>domain</I
></TT
>  [<TT
d468 2
a469 4
><I
>query-type</I
></TT
>] [<TT
d471 2
a472 4
><I
>query-class</I
></TT
>] [+<TT
d474 2
a475 4
><I
>query-option</I
></TT
>] [-<TT
d477 2
a478 4
><I
>dig-option</I
></TT
>] [%<TT
d480 1
a480 3
><I
>comment</I
></TT
d506 2
a507 6
> utility
provides a simple <SPAN
CLASS="acronym"
>DNS</SPAN
> lookup using a command-line interface for
looking up Internet hostnames. By default, the utility converts
d514 1
a514 1
>  [-aCdlrTwv] [-c <TT
d516 2
a517 4
><I
>class</I
></TT
>] [-N <TT
d519 2
a520 4
><I
>ndots</I
></TT
>] [-t <TT
d522 2
a523 4
><I
>type</I
></TT
>] [-W <TT
d525 2
a526 4
><I
>timeout</I
></TT
>] [-R <TT
d528 2
a529 4
><I
>retries</I
></TT
>]  <TT
d531 2
a532 4
><I
>hostname</I
></TT
>  [<TT
d534 1
a534 3
><I
>server</I
></TT
a552 4
> is a program used to query Internet
domain nameservers. <B
CLASS="command"
>nslookup</B
d554 1
a554 1
and non-interactive. Interactive mode allows the user to query nameservers
d562 1
a562 1
>  [-option...] [<TT
d564 1
a564 3
><I
>host-to-find</I
></TT
d568 1
a568 1
default nameserver will be used) or when the first argument is a
d570 1
a570 1
of a nameserver.</P
d574 1
a574 1
optional second argument specifies the host name or address of a nameserver.</P
d595 1
a595 1
>3.4.1.2. Administrative Tools</A
d608 1
a611 1
></A
d627 1
a627 1
>  [-t <TT
d629 2
a630 4
><I
>directory</I
></TT
>] [<TT
d632 1
a632 3
><I
>filename</I
></TT
d638 1
a641 1
></A
d654 1
a654 1
>  [-dq] [-c <TT
d656 2
a657 4
><I
>class</I
></TT
>]  <TT
d659 2
a660 4
><I
>zone</I
></TT
>  [<TT
d662 1
a662 3
><I
>filename</I
></TT
d668 1
a671 1
></A
d680 1
a680 1
              administrator to control the operation of a nameserver.
d690 1
a690 1
>  [-c <TT
d692 2
a693 4
><I
>config</I
></TT
>] [-s <TT
d695 2
a696 4
><I
>server</I
></TT
>] [-p <TT
d698 2
a699 4
><I
>port</I
></TT
>] [-y <TT
d701 2
a702 4
><I
>key</I
></TT
>]  <TT
d704 2
a705 4
><I
>command</I
></TT
>  [<TT
d707 1
a707 3
><I
>command</I
></TT
d720 1
a720 1
><TT
d722 1
a722 3
><B
>reload</B
></TT
d729 1
a729 1
><TT
d731 1
a731 2
><B
>reload <TT
d733 1
a733 3
><I
>zone</I
></TT
d737 1
a737 1
><TT
d739 1
a739 3
><I
>class</I
></TT
d743 1
a743 1
><TT
d745 1
a745 3
><I
>view</I
></TT
d748 1
a748 2
>]</B
></TT
d755 1
a755 1
><TT
d757 1
a757 2
><B
>refresh <TT
d759 1
a759 3
><I
>zone</I
></TT
d763 1
a763 1
><TT
d765 1
a765 3
><I
>class</I
></TT
d769 1
a769 1
><TT
d771 1
a771 3
><I
>view</I
></TT
d774 1
a774 2
>]</B
></TT
d781 86
a866 1
><TT
d868 1
a868 3
><B
>reconfig</B
></TT
d883 1
a883 1
><TT
d885 1
a885 3
><B
>stats</B
></TT
d892 1
a892 1
><TT
d894 1
a894 3
><B
>querylog</B
></TT
d920 1
a920 1
><TT
d922 1
a922 3
><B
>dumpdb</B
></TT
d929 1
a929 1
><TT
d931 1
a931 3
><B
>stop</B
></TT
d941 1
a941 1
><TT
d943 1
a943 3
><B
>halt</B
></TT
d953 1
a953 1
><TT
d955 1
a955 3
><B
>trace</B
></TT
d962 1
a962 1
><TT
d964 1
a964 2
><B
>trace <TT
d966 2
a967 5
><I
>level</I
></TT
></B
></TT
d975 1
a975 1
><TT
d977 1
a977 3
><B
>notrace</B
></TT
d984 1
a984 1
><TT
d986 1
a986 3
><B
>flush</B
></TT
d993 1
a993 1
><TT
d995 1
a995 3
><B
>status</B
></TT
d1013 1
a1013 1
>In <SPAN
d1015 1
a1015 1
>BIND</SPAN
d1027 5
a1031 1
>, which was also
d1050 1
a1050 1
location can be specified with the <TT
d1052 1
a1052 1
>-c</TT
d1063 1
a1063 1
<TT
d1065 1
a1065 1
>sysconfdir</TT
d1067 1
a1067 1
the <SPAN
d1069 1
a1069 1
>BIND</SPAN
d1129 1
a1129 1
be contacted if no <TT
d1131 1
a1131 1
>-s</TT
d1138 1
a1138 1
the name of key as its argument, as defined by a <B
d1159 18
a1176 2
> statement names a key with its
string argument. The string is required by the server to be a valid
d1178 1
a1178 1
a string like "<TT
d1180 1
a1180 3
><B
>rndc_key</B
></TT
d1194 1
a1194 1
to algorithm, currently only the string "<TT
d1196 1
a1196 3
><B
>hmac-md5</B
></TT
d1203 2
a1204 2
> statement uses the key clause
to associate a <B
d1207 6
a1212 2
>-defined key with a server.
The argument to the <B
d1215 2
a1216 3
> statement is a
host name or address (addresses must be double quoted).  The argument
to the key clause is the name of the key as defined by the <B
d1219 4
a1222 1
> statement.
d1225 5
d1231 2
a1232 2
> clause can be used to 
specify the port to which <B
d1236 1
a1236 1
on the given server.</P
d1246 1
a1246 1
     default-server localhost;
d1257 1
a1257 1
><TT
d1259 2
a1260 2
>$ </TT
><TT
d1262 1
a1262 3
><B
>rndc reload</B
></TT
d1265 2
a1266 2
>to connect to 127.0.0.1 port 953 and cause the nameserver
to reload, if a nameserver on the local machine were running with
d1276 1
a1276 1
<TT
d1278 1
a1278 1
>rndc_key</TT
d1321 2
a1322 2
NAME="AEN663"
>3.4.2. Signals</A
d1333 2
d1336 1
a1336 1
NAME="AEN667"
a1337 2
><P
></P
a1344 3
WIDTH="108"
ALIGN="LEFT"
VALIGN="MIDDLE"
a1351 3
WIDTH="384"
ALIGN="LEFT"
VALIGN="MIDDLE"
a1361 3
WIDTH="108"
ALIGN="LEFT"
VALIGN="MIDDLE"
a1368 3
WIDTH="384"
ALIGN="LEFT"
VALIGN="MIDDLE"
a1374 3
WIDTH="108"
ALIGN="LEFT"
VALIGN="MIDDLE"
a1382 3
WIDTH="384"
ALIGN="LEFT"
VALIGN="MIDDLE"
d1439 1
a1439 1
><SPAN
d1441 1
a1441 1
>BIND</SPAN
d1452 1
a1452 1
>Advanced Concepts</TD
@


1.2
log
@update to BIND 9.2.2-release. ok millert@@
@
text
@d1561 1
a1561 1
>
@


1.1
log
@Initial revision
@
text
@d991 1
a991 1
   by explictly directing the <B
d1561 1
a1561 1
>@


1.1.1.1
log
@ISC BIND version 9.2.2rc1
@
text
@@


1.1.1.2
log
@ISC BIND version 9.3.0. ok deraadt@@
@
text
@a0 1
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
d4 1
a4 1
>Name Server Configuration</TITLE
d7 2
a8 1
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
d16 1
a16 1
TITLE="Advanced DNS Features"
d73 2
a74 2
></A
>Chapter 3. Name Server Configuration</H1
d89 1
a89 1
HREF="Bv9ARM.ch03.html#AEN268"
d94 7
a100 2
HREF="Bv9ARM.ch03.html#AEN345"
>Name Server Operations</A
d121 2
a122 2
NAME="AEN257"
>3.1.1. A Caching-only Name Server</A
d127 1
a127 6
from outside clients are refused using the <B
CLASS="command"
>allow-query</B
>
option.  Alternatively, the same effect could be achieved using suitable
firewall rules.</P
d131 1
a131 1
acl corpnets { 192.168.4.0/24; 192.168.7.0/24; };
d134 2
a135 1
     allow-query { corpnets; };
d137 2
d152 2
a153 2
NAME="AEN262"
>3.1.2. An Authoritative-only Name Server</A
d169 1
d173 2
d207 1
a207 1
NAME="AEN268"
d211 1
a211 2
>A primitive form of load balancing can be achieved in
the <ACRONYM
d213 3
a215 2
>DNS</ACRONYM
> by using multiple A records for one name.</P
d223 3
a227 3
><A
NAME="AEN273"
></A
d235 3
d242 3
d249 3
d256 3
d263 3
d272 3
d276 1
a276 1
><VAR
d278 1
a278 1
>www</VAR
d282 3
d286 1
a286 1
><VAR
d288 1
a288 1
>600</VAR
d292 3
d296 1
a296 1
><VAR
d298 1
a298 1
>IN</VAR
d302 3
d306 1
a306 1
><VAR
d308 1
a308 1
>A</VAR
d312 3
d316 1
a316 1
><VAR
d318 1
a318 1
>10.0.0.1</VAR
d324 3
d331 3
d335 1
a335 1
><VAR
d337 1
a337 1
>600</VAR
d341 3
d345 1
a345 1
><VAR
d347 1
a347 1
>IN</VAR
d351 3
d355 1
a355 1
><VAR
d357 1
a357 1
>A</VAR
d361 3
d365 1
a365 1
><VAR
d367 1
a367 1
>10.0.0.2</VAR
d373 3
d380 3
d384 1
a384 1
><VAR
d386 1
a386 1
>600</VAR
d390 3
d394 1
a394 1
><VAR
d396 1
a396 1
>IN</VAR
d400 3
d404 1
a404 1
><VAR
d406 1
a406 1
>A</VAR
d410 3
d414 1
a414 1
><VAR
d416 1
a416 1
>10.0.0.3</VAR
d426 1
a426 1
>When a resolver queries for these records, <ACRONYM
d428 1
a428 1
>BIND</ACRONYM
d451 1
a451 1
    <ACRONYM
d453 1
a453 1
>BIND</ACRONYM
d462 44
a505 2
NAME="AEN345"
>3.3. Name Server Operations</A
d512 2
a513 2
NAME="AEN347"
>3.3.1. Tools for Use With the Name Server Daemon</A
d518 1
a518 1
and debugging the name server daemon. We describe several in this
d526 1
a526 1
>3.3.1.1. Diagnostic Tools</A
a528 15
>The <B
CLASS="command"
>dig</B
>, <B
CLASS="command"
>host</B
>, and
<B
CLASS="command"
>nslookup</B
> programs are all command line tools
for manually querying name servers.  They differ in style and
output format.
</P
><P
d543 3
a545 3
>)
is the most versatile and complete of these lookup tools.
It has two modes: simple interactive
d553 1
a553 1
>  [@@<VAR
d555 4
a558 2
>server</VAR
>]  <VAR
d560 4
a563 2
>domain</VAR
>  [<VAR
d565 4
a568 2
>query-type</VAR
>] [<VAR
d570 4
a573 2
>query-class</VAR
>] [+<VAR
d575 4
a578 2
>query-option</VAR
>] [-<VAR
d580 4
a583 2
>dig-option</VAR
>] [%<VAR
d585 3
a587 1
>comment</VAR
d613 6
a618 2
> utility emphasizes simplicity
and ease of use.  By default, it converts
d625 1
a625 1
>  [-aCdlrTwv] [-c <VAR
d627 4
a630 2
>class</VAR
>] [-N <VAR
d632 4
a635 2
>ndots</VAR
>] [-t <VAR
d637 4
a640 2
>type</VAR
>] [-W <VAR
d642 4
a645 2
>timeout</VAR
>] [-R <VAR
d647 4
a650 2
>retries</VAR
>]  <VAR
d652 4
a655 2
>hostname</VAR
>  [<VAR
d657 3
a659 1
>server</VAR
d678 4
d683 1
a683 1
and non-interactive. Interactive mode allows the user to query name servers
d691 1
a691 1
>  [-option...] [<VAR
d693 3
a695 1
>host-to-find</VAR
d699 1
a699 1
default name server will be used) or when the first argument is a
d701 1
a701 1
of a name server.</P
d705 1
a705 1
optional second argument specifies the host name or address of a name server.</P
d726 1
a726 1
>3.3.1.2. Administrative Tools</A
a738 1
></A
d742 1
d758 1
a758 1
>  [-t <VAR
d760 4
a763 2
>directory</VAR
>] [<VAR
d765 3
a767 1
>filename</VAR
a772 1
></A
d776 1
d789 1
a789 1
>  [-dq] [-c <VAR
d791 4
a794 2
>class</VAR
>]  <VAR
d796 4
a799 2
>zone</VAR
>  [<VAR
d801 3
a803 1
>filename</VAR
a808 1
></A
d812 1
d821 1
a821 1
              administrator to control the operation of a name server.
d831 1
a831 1
>  [-c <VAR
d833 4
a836 2
>config</VAR
>] [-s <VAR
d838 4
a841 2
>server</VAR
>] [-p <VAR
d843 4
a846 2
>port</VAR
>] [-y <VAR
d848 4
a851 2
>key</VAR
>]  <VAR
d853 4
a856 2
>command</VAR
>  [<VAR
d858 3
a860 1
>command</VAR
d873 1
a873 1
><KBD
d875 3
a877 1
>reload</KBD
d884 1
a884 1
><KBD
d886 2
a887 1
>reload <VAR
d889 3
a891 1
>zone</VAR
d895 1
a895 1
><VAR
d897 3
a899 1
>class</VAR
d903 1
a903 1
><VAR
d905 3
a907 1
>view</VAR
d910 2
a911 1
>]</KBD
d918 1
a918 1
><KBD
d920 2
a921 1
>refresh <VAR
d923 3
a925 1
>zone</VAR
d929 1
a929 1
><VAR
d931 3
a933 1
>class</VAR
d937 1
a937 1
><VAR
d939 3
a941 1
>view</VAR
d944 2
a945 1
>]</KBD
d952 1
a952 1
><KBD
d954 3
a956 86
>retransfer <VAR
CLASS="replaceable"
>zone</VAR
>
       [<SPAN
CLASS="optional"
><VAR
CLASS="replaceable"
>class</VAR
>
           [<SPAN
CLASS="optional"
><VAR
CLASS="replaceable"
>view</VAR
></SPAN
>]</SPAN
>]</KBD
></DT
><DD
><P
>Retransfer the given zone from the master.</P
></DD
><DT
><KBD
CLASS="userinput"
>freeze <VAR
CLASS="replaceable"
>zone</VAR
>
       [<SPAN
CLASS="optional"
><VAR
CLASS="replaceable"
>class</VAR
>
           [<SPAN
CLASS="optional"
><VAR
CLASS="replaceable"
>view</VAR
></SPAN
>]</SPAN
>]</KBD
></DT
><DD
><P
>Suspend updates to a dynamic zone.  This allows manual
    edits to be made to a zone normally updated by dynamic update.  It
    also causes changes in the journal file to be synced into the master
    and the journal file to be removed.  All dynamic update attempts will
    be refused while the zone is frozen.</P
></DD
><DT
><KBD
CLASS="userinput"
>unfreeze <VAR
CLASS="replaceable"
>zone</VAR
>
       [<SPAN
CLASS="optional"
><VAR
CLASS="replaceable"
>class</VAR
>
           [<SPAN
CLASS="optional"
><VAR
CLASS="replaceable"
>view</VAR
></SPAN
>]</SPAN
>]</KBD
></DT
><DD
><P
>Enable updates to a frozen dynamic zone.  This causes
    the server to reload the zone from disk, and re-enables dynamic updates
    after the load has completed.  After a zone is unfrozen, dynamic updates
    will no longer be refused.</P
></DD
><DT
><KBD
CLASS="userinput"
>reconfig</KBD
d971 1
a971 1
><KBD
d973 3
a975 1
>stats</KBD
d982 1
a982 1
><KBD
d984 3
a986 1
>querylog</KBD
d991 1
a991 1
   by explicitly directing the <B
d1012 1
a1012 1
><KBD
d1014 3
a1016 1
>dumpdb</KBD
d1023 1
a1023 1
><KBD
d1025 3
a1027 1
>stop</KBD
d1037 1
a1037 1
><KBD
d1039 3
a1041 1
>halt</KBD
d1051 1
a1051 1
><KBD
d1053 3
a1055 1
>trace</KBD
d1062 1
a1062 1
><KBD
d1064 2
a1065 1
>trace <VAR
d1067 5
a1071 2
>level</VAR
></KBD
d1079 1
a1079 1
><KBD
d1081 3
a1083 1
>notrace</KBD
d1090 1
a1090 1
><KBD
d1092 3
a1094 1
>flush</KBD
d1101 1
a1101 1
><KBD
d1103 3
a1105 1
>status</KBD
d1123 1
a1123 1
>In <ACRONYM
d1125 1
a1125 1
>BIND</ACRONYM
d1137 1
a1137 5
> and
<B
CLASS="command"
>ndc restart</B
>, which were also
d1156 1
a1156 1
location can be specified with the <VAR
d1158 1
a1158 1
>-c</VAR
d1169 1
a1169 1
<VAR
d1171 1
a1171 1
>sysconfdir</VAR
d1173 1
a1173 1
the <ACRONYM
d1175 1
a1175 1
>BIND</ACRONYM
d1235 1
a1235 1
be contacted if no <VAR
d1237 1
a1237 1
>-s</VAR
d1244 1
a1244 1
the name of a key as its argument, as defined by a <B
d1265 2
a1266 18
> statement defines an key to be used
by <B
CLASS="command"
>rndc</B
> when authenticating with
<B
CLASS="command"
>named</B
>.  Its syntax is identical to the
<B
CLASS="command"
>key</B
> statement in named.conf.
The keyword <KBD
CLASS="userinput"
>key</KBD
> is
followed by a key name, which must be a valid
d1268 1
a1268 1
a string like "<KBD
d1270 3
a1272 1
>rndc_key</KBD
d1286 1
a1286 1
to algorithm, currently only the string "<KBD
d1288 3
a1290 1
>hmac-md5</KBD
d1297 2
a1298 2
> statement associates a key
defined using the <B
d1301 2
a1302 6
> statement with a server.
The keyword <KBD
CLASS="userinput"
>server</KBD
> is followed by a
host name or address.  The <B
d1305 3
a1307 2
> statement
has two clauses: <B
d1310 1
a1310 4
> and <B
CLASS="command"
>port</B
>.
a1312 5
>key</B
> clause specifies the name of the key
to be used when communicating with this server, and the
<B
CLASS="command"
d1314 2
a1315 2
> clause can be used to
specify the port <B
d1319 1
a1319 1
to on the server.</P
d1329 1
a1329 1
     default-server 127.0.0.1;
d1340 1
a1340 1
><SAMP
d1342 2
a1343 2
>$ </SAMP
><KBD
d1345 3
a1347 1
>rndc reload</KBD
d1350 2
a1351 2
>to connect to 127.0.0.1 port 953 and cause the name server
to reload, if a name server on the local machine were running with
d1361 1
a1361 1
<VAR
d1363 1
a1363 1
>rndc_key</VAR
d1406 2
a1407 2
NAME="AEN679"
>3.3.2. Signals</A
d1418 3
a1422 3
><A
NAME="AEN683"
></A
d1430 3
d1440 3
d1453 3
d1463 3
d1472 3
d1483 3
d1542 1
a1542 1
><ACRONYM
d1544 1
a1544 1
>BIND</ACRONYM
d1555 1
a1555 1
>Advanced DNS Features</TD
@


1.1.1.3
log
@ISC BIND release 9.3.1. ok deraadt@@
@
text
@d654 1
a654 1
>  [-djqvD] [-c <VAR
a656 15
>] [-o <VAR
CLASS="replaceable"
>output</VAR
>] [-t <VAR
CLASS="replaceable"
>directory</VAR
>] [-w <VAR
CLASS="replaceable"
>directory</VAR
>] [-k <VAR
CLASS="replaceable"
>(ignore|warn|fail)</VAR
>] [-n <VAR
CLASS="replaceable"
>(ignore|warn|fail)</VAR
d1321 1
a1321 1
NAME="AEN689"
d1336 1
a1336 1
NAME="AEN693"
@


1.1.1.4
log
@ISC BIND release 9.3.2
@
text
@d1 100
a100 61
<!--
 - Copyright (C) 2004, 2005 Internet Systems Consortium, Inc. ("ISC")
 - Copyright (C) 2000-2003 Internet Software Consortium.
 - 
 - Permission to use, copy, modify, and distribute this software for any
 - purpose with or without fee is hereby granted, provided that the above
 - copyright notice and this permission notice appear in all copies.
 - 
 - THE SOFTWARE IS PROVIDED "AS IS" AND ISC DISCLAIMS ALL WARRANTIES WITH
 - REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
 - AND FITNESS. IN NO EVENT SHALL ISC BE LIABLE FOR ANY SPECIAL, DIRECT,
 - INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
 - LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE
 - OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
 - PERFORMANCE OF THIS SOFTWARE.
-->
<!-- $ISC: Bv9ARM.ch03.html,v 1.26.2.5.4.11 2005/10/13 02:33:59 marka Exp $ -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Chapter 3. Name Server Configuration</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.69.1">
<link rel="start" href="Bv9ARM.html" title="BIND 9 Administrator Reference Manual">
<link rel="up" href="Bv9ARM.html" title="BIND 9 Administrator Reference Manual">
<link rel="prev" href="Bv9ARM.ch02.html" title="Chapter 2. BIND Resource Requirements">
<link rel="next" href="Bv9ARM.ch04.html" title="Chapter 4. Advanced DNS Features">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">Chapter 3. Name Server Configuration</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="Bv9ARM.ch02.html">Prev</a> </td>
<th width="60%" align="center"> </th>
<td width="20%" align="right"> <a accesskey="n" href="Bv9ARM.ch04.html">Next</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="chapter" lang="en">
<div class="titlepage"><div><div><h2 class="title">
<a name="Bv9ARM.ch03"></a>Chapter 3. Name Server Configuration</h2></div></div></div>
<div class="toc">
<p><b>Table of Contents</b></p>
<dl>
<dt><span class="sect1"><a href="Bv9ARM.ch03.html#sample_configuration">Sample Configurations</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="Bv9ARM.ch03.html#id2547334">A Caching-only Name Server</a></span></dt>
<dt><span class="sect2"><a href="Bv9ARM.ch03.html#id2547350">An Authoritative-only Name Server</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="Bv9ARM.ch03.html#id2547372">Load Balancing</a></span></dt>
<dt><span class="sect1"><a href="Bv9ARM.ch03.html#id2547656">Name Server Operations</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="Bv9ARM.ch03.html#id2547661">Tools for Use With the Name Server Daemon</a></span></dt>
<dt><span class="sect2"><a href="Bv9ARM.ch03.html#id2548915">Signals</a></span></dt>
</dl></dd>
</dl>
</div>
<p>In this section we provide some suggested configurations along
d102 19
a120 8
option setting.</p>
<div class="sect1" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="sample_configuration"></a>Sample Configurations</h2></div></div></div>
<div class="sect2" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="id2547334"></a>A Caching-only Name Server</h3></div></div></div>
<p>The following sample configuration is appropriate for a caching-only
d122 4
a125 1
from outside clients are refused using the <span><strong class="command">allow-query</strong></span>
d127 4
a130 3
firewall rules.</p>
<pre class="programlisting">
// Two corporate subnets we wish to allow queries from.
d142 23
a164 10
</pre>
</div>
<div class="sect2" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="id2547350"></a>An Authoritative-only Name Server</h3></div></div></div>
<p>This sample configuration is for an authoritative-only server
that is the master server for "<code class="filename">example.com</code>"
and a slave for the subdomain "<code class="filename">eng.example.com</code>".</p>
<pre class="programlisting">
options {
d193 19
a211 9
</pre>
</div>
</div>
<div class="sect1" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="id2547372"></a>Load Balancing</h2></div></div></div>
<p>A primitive form of load balancing can be achieved in
the <span class="acronym">DNS</span> by using multiple A records for one name.</p>
<p>For example, if you have three WWW servers with network addresses
d214 150
a363 41
of the time:</p>
<div class="informaltable"><table border="1">
<colgroup>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td><p>Name</p></td>
<td><p>TTL</p></td>
<td><p>CLASS</p></td>
<td><p>TYPE</p></td>
<td><p>Resource Record (RR) Data</p></td>
</tr>
<tr>
<td><p><code class="literal">www</code></p></td>
<td><p><code class="literal">600</code></p></td>
<td><p><code class="literal">IN</code></p></td>
<td><p><code class="literal">A</code></p></td>
<td><p><code class="literal">10.0.0.1</code></p></td>
</tr>
<tr>
<td><p></p></td>
<td><p><code class="literal">600</code></p></td>
<td><p><code class="literal">IN</code></p></td>
<td><p><code class="literal">A</code></p></td>
<td><p><code class="literal">10.0.0.2</code></p></td>
</tr>
<tr>
<td><p></p></td>
<td><p><code class="literal">600</code></p></td>
<td><p><code class="literal">IN</code></p></td>
<td><p><code class="literal">A</code></p></td>
<td><p><code class="literal">10.0.0.3</code></p></td>
</tr>
</tbody>
</table></div>
<p>When a resolver queries for these records, <span class="acronym">BIND</span> will rotate
d367 17
a383 5
    will use the first record returned and discard the rest.</p>
<p>For more detail on ordering responses, check the
    <span><strong class="command">rrset-order</strong></span> substatement in the
    <span><strong class="command">options</strong></span> statement, see
    <a href="Bv9ARM.ch06.html#rrset_ordering">RRset Ordering</a>.
d385 24
a408 10
    <span class="acronym">BIND</span> 9, and only the ordering scheme described above is
    available.</p>
</div>
<div class="sect1" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="id2547656"></a>Name Server Operations</h2></div></div></div>
<div class="sect2" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="id2547661"></a>Tools for Use With the Name Server Daemon</h3></div></div></div>
<p>There are several indispensable diagnostic, administrative
d411 21
a431 6
section </p>
<div class="sect3" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="diagnostic_tools"></a>Diagnostic Tools</h4></div></div></div>
<p>The <span><strong class="command">dig</strong></span>, <span><strong class="command">host</strong></span>, and
<span><strong class="command">nslookup</strong></span> programs are all command line tools
d434 17
a450 5
</p>
<div class="variablelist"><dl>
<dt><span class="term"><a name="dig"></a><span><strong class="command">dig</strong></span></span></dt>
<dd>
<p>The domain information groper (<span><strong class="command">dig</strong></span>)
d455 52
a506 10
from the command line.</p>
<div class="cmdsynopsis"><p><code class="command">dig</code>  [@@<em class="replaceable"><code>server</code></em>]  <em class="replaceable"><code>domain</code></em>  [<em class="replaceable"><code>query-type</code></em>] [<em class="replaceable"><code>query-class</code></em>] [+<em class="replaceable"><code>query-option</code></em>] [-<em class="replaceable"><code>dig-option</code></em>] [%<em class="replaceable"><code>comment</code></em>]</p></div>
<p>The usual simple use of dig will take the form</p>
<p><span><strong class="command">dig @@server domain query-type query-class</strong></span></p>
<p>For more information and a list of available commands and
options, see the <span><strong class="command">dig</strong></span> man page.</p>
</dd>
<dt><span class="term"><span><strong class="command">host</strong></span></span></dt>
<dd>
<p>The <span><strong class="command">host</strong></span> utility emphasizes simplicity
d509 45
a553 8
can be extended with the use of options.</p>
<div class="cmdsynopsis"><p><code class="command">host</code>  [-aCdlrTwv] [-c <em class="replaceable"><code>class</code></em>] [-N <em class="replaceable"><code>ndots</code></em>] [-t <em class="replaceable"><code>type</code></em>] [-W <em class="replaceable"><code>timeout</code></em>] [-R <em class="replaceable"><code>retries</code></em>]  <em class="replaceable"><code>hostname</code></em>  [<em class="replaceable"><code>server</code></em>]</p></div>
<p>For more information and a list of available commands and
options, see the <span><strong class="command">host</strong></span> man page.</p>
</dd>
<dt><span class="term"><span><strong class="command">nslookup</strong></span></span></dt>
<dd>
<p><span><strong class="command">nslookup</strong></span> has two modes: interactive
d557 11
a567 3
the name and requested information for a host or domain.</p>
<div class="cmdsynopsis"><p><code class="command">nslookup</code>  [-option...] [[<em class="replaceable"><code>host-to-find</code></em>] |  [-  [server]]]</p></div>
<p>Interactive mode is entered when no arguments are given (the
d570 3
a572 2
of a name server.</p>
<p>Non-interactive mode is used when the name or Internet address
d574 121
a694 35
optional second argument specifies the host name or address of a name server.</p>
<p>Due to its arcane user interface and frequently inconsistent
behavior, we do not recommend the use of <span><strong class="command">nslookup</strong></span>.
Use <span><strong class="command">dig</strong></span> instead.</p>
</dd>
</dl></div>
</div>
<div class="sect3" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="admin_tools"></a>Administrative Tools</h4></div></div></div>
<p>Administrative tools play an integral part in the management
of a server.</p>
<div class="variablelist"><dl>
<dt>
<a name="named-checkconf"></a><span class="term"><span><strong class="command">named-checkconf</strong></span></span>
</dt>
<dd>
<p>The <span><strong class="command">named-checkconf</strong></span> program
              checks the syntax of a <code class="filename">named.conf</code> file.</p>
<div class="cmdsynopsis"><p><code class="command">named-checkconf</code>  [-jvz] [-t <em class="replaceable"><code>directory</code></em>] [<em class="replaceable"><code>filename</code></em>]</p></div>
</dd>
<dt>
<a name="named-checkzone"></a><span class="term"><span><strong class="command">named-checkzone</strong></span></span>
</dt>
<dd>
<p>The <span><strong class="command">named-checkzone</strong></span> program checks a master file for
              syntax and consistency.</p>
<div class="cmdsynopsis"><p><code class="command">named-checkzone</code>  [-djqvD] [-c <em class="replaceable"><code>class</code></em>] [-o <em class="replaceable"><code>output</code></em>] [-t <em class="replaceable"><code>directory</code></em>] [-w <em class="replaceable"><code>directory</code></em>] [-k <em class="replaceable"><code>(ignore|warn|fail)</code></em>] [-n <em class="replaceable"><code>(ignore|warn|fail)</code></em>]  <em class="replaceable"><code>zone</code></em>  [<em class="replaceable"><code>filename</code></em>]</p></div>
</dd>
<dt>
<a name="rndc"></a><span class="term"><span><strong class="command">rndc</strong></span></span>
</dt>
<dd>
<p>The remote name daemon control
              (<span><strong class="command">rndc</strong></span>) program allows the system
d696 150
a845 24
              If you run <span><strong class="command">rndc</strong></span> without any options
              it will display a usage message as follows:</p>
<div class="cmdsynopsis"><p><code class="command">rndc</code>  [-c <em class="replaceable"><code>config</code></em>] [-s <em class="replaceable"><code>server</code></em>] [-p <em class="replaceable"><code>port</code></em>] [-y <em class="replaceable"><code>key</code></em>]  <em class="replaceable"><code>command</code></em>  [<em class="replaceable"><code>command</code></em>...]</p></div>
<p><span><strong class="command">command</strong></span> is one of the following:</p>
<div class="variablelist"><dl>
<dt><span class="term"><strong class="userinput"><code>reload</code></strong></span></dt>
<dd><p>Reload configuration file and zones.</p></dd>
<dt><span class="term"><strong class="userinput"><code>reload <em class="replaceable"><code>zone</code></em>
       [<span class="optional"><em class="replaceable"><code>class</code></em>
           [<span class="optional"><em class="replaceable"><code>view</code></em></span>]</span>]</code></strong></span></dt>
<dd><p>Reload the given zone.</p></dd>
<dt><span class="term"><strong class="userinput"><code>refresh <em class="replaceable"><code>zone</code></em>
       [<span class="optional"><em class="replaceable"><code>class</code></em>
           [<span class="optional"><em class="replaceable"><code>view</code></em></span>]</span>]</code></strong></span></dt>
<dd><p>Schedule zone maintenance for the given zone.</p></dd>
<dt><span class="term"><strong class="userinput"><code>retransfer <em class="replaceable"><code>zone</code></em>
       [<span class="optional"><em class="replaceable"><code>class</code></em>
           [<span class="optional"><em class="replaceable"><code>view</code></em></span>]</span>]</code></strong></span></dt>
<dd><p>Retransfer the given zone from the master.</p></dd>
<dt><span class="term"><strong class="userinput"><code>freeze [<span class="optional"><em class="replaceable"><code>zone</code></em>
       [<span class="optional"><em class="replaceable"><code>class</code></em>
           [<span class="optional"><em class="replaceable"><code>view</code></em></span>]</span>]</span>]</code></strong></span></dt>
<dd><p>Suspend updates to a dynamic zone.  If no zone is specified
	then all zones are suspended.  This allows manual
d849 27
a875 6
    be refused while the zone is frozen.</p></dd>
<dt><span class="term"><strong class="userinput"><code>thaw [<span class="optional"><em class="replaceable"><code>zone</code></em>
       [<span class="optional"><em class="replaceable"><code>class</code></em>
           [<span class="optional"><em class="replaceable"><code>view</code></em></span>]</span>]</span>]</code></strong></span></dt>
<dd><p>Enable updates to a frozen dynamic zone.  If no zone is
    specified then all frozen zones are enabled.  This causes
d877 11
a887 8
    after the load has completed.  After a zone is thawed, dynamic updates
    will no longer be refused.</p></dd>
<dt><span class="term"><strong class="userinput"><code>notify <em class="replaceable"><code>zone</code></em>
       [<span class="optional"><em class="replaceable"><code>class</code></em>
           [<span class="optional"><em class="replaceable"><code>view</code></em></span>]</span>]</code></strong></span></dt>
<dd><p>Resend NOTIFY messages for the zone</p></dd>
<dt><span class="term"><strong class="userinput"><code>reconfig</code></strong></span></dt>
<dd><p>Reload the configuration file and load new zones,
d889 4
a892 1
   This is faster than a full <span><strong class="command">reload</strong></span> when there
d895 57
a951 15
   </p></dd>
<dt><span class="term"><strong class="userinput"><code>stats</code></strong></span></dt>
<dd><p>Write server statistics to the statistics file.</p></dd>
<dt><span class="term"><strong class="userinput"><code>querylog</code></strong></span></dt>
<dd><p>Toggle query logging. Query logging can also be enabled
   by explicitly directing the <span><strong class="command">queries</strong></span>
   <span><strong class="command">category</strong></span> to a <span><strong class="command">channel</strong></span> in the
   <span><strong class="command">logging</strong></span> section of
   <code class="filename">named.conf</code>.</p></dd>
<dt><span class="term"><strong class="userinput"><code>dumpdb [<span class="optional">-all|-cache|-zone</span>] [<span class="optional"><em class="replaceable"><code>view ...</code></em></span>]</code></strong></span></dt>
<dd><p>Dump the server's caches (default) and / or zones to the
	 dump file for the specified views.  If no view is specified all
	 views are dumped.</p></dd>
<dt><span class="term"><strong class="userinput"><code>stop [<span class="optional">-p</span>]</code></strong></span></dt>
<dd><p>Stop the server, making sure any recent changes
d953 10
a962 3
   of the updated zones.  If -p is specified named's process id is returned.</p></dd>
<dt><span class="term"><strong class="userinput"><code>halt [<span class="optional">-p</span>]</code></strong></span></dt>
<dd><p>Stop the server immediately.  Recent changes
d965 88
a1052 28
   is restarted.  If -p is specified named's process id is returned.</p></dd>
<dt><span class="term"><strong class="userinput"><code>trace</code></strong></span></dt>
<dd><p>Increment the servers debugging level by one. </p></dd>
<dt><span class="term"><strong class="userinput"><code>trace <em class="replaceable"><code>level</code></em></code></strong></span></dt>
<dd><p>Sets the server's debugging level to an explicit
   value.</p></dd>
<dt><span class="term"><strong class="userinput"><code>notrace</code></strong></span></dt>
<dd><p>Sets the server's debugging level to 0.</p></dd>
<dt><span class="term"><strong class="userinput"><code>flush</code></strong></span></dt>
<dd><p>Flushes the server's cache.</p></dd>
<dt><span class="term"><strong class="userinput"><code>flushname</code></strong> <em class="replaceable"><code>name</code></em></span></dt>
<dd><p>Flushes the given name from the server's cache.</p></dd>
<dt><span class="term"><strong class="userinput"><code>status</code></strong></span></dt>
<dd><p>Display status of the server.
Note the number of zones includes the internal <span><strong class="command">bind/CH</strong></span> zone
and the default <span><strong class="command">./IN</strong></span> hint zone if there is not a
explicit root zone configured.</p></dd>
<dt><span class="term"><strong class="userinput"><code>recursing</code></strong></span></dt>
<dd><p>Dump the list of queries named is currently recursing
   on.
   </p></dd>
</dl></div>
<p>In <span class="acronym">BIND</span> 9.2, <span><strong class="command">rndc</strong></span>
supports all the commands of the BIND 8 <span><strong class="command">ndc</strong></span>
utility except <span><strong class="command">ndc start</strong></span> and
<span><strong class="command">ndc restart</strong></span>, which were also
not supported in <span><strong class="command">ndc</strong></span>'s channel mode.</p>
<p>A configuration file is required, since all
d1057 12
a1068 3
<span><strong class="command">rndc</strong></span> configuration file is
<code class="filename">/etc/rndc.conf</code>, but an alternate
location can be specified with the <code class="option">-c</code>
d1070 49
a1118 12
<span><strong class="command">rndc</strong></span> will also look in
<code class="filename">/etc/rndc.key</code> (or whatever
<code class="varname">sysconfdir</code> was defined when
the <span class="acronym">BIND</span> build was configured).
The <code class="filename">rndc.key</code> file is generated by
running <span><strong class="command">rndc-confgen -a</strong></span> as described in
<a href="Bv9ARM.ch06.html#controls_statement_definition_and_usage" title="controls Statement Definition and Usage">the section called &#8220;<span><strong class="command">controls</strong></span> Statement Definition and Usage&#8221;</a>.</p>
<p>The format of the configuration file is similar to
that of <code class="filename">named.conf</code>, but limited to
only four statements, the <span><strong class="command">options</strong></span>,
<span><strong class="command">key</strong></span>, <span><strong class="command">server</strong></span> and
<span><strong class="command">include</strong></span>
d1122 21
a1142 5
significant.</p>
<p>The <span><strong class="command">options</strong></span> statement has three clauses:
<span><strong class="command">default-server</strong></span>, <span><strong class="command">default-key</strong></span>, 
and <span><strong class="command">default-port</strong></span>.
<span><strong class="command">default-server</strong></span> takes a
d1144 4
a1147 1
be contacted if no <code class="option">-s</code>
d1149 16
a1164 4
<span><strong class="command">default-key</strong></span> takes
the name of a key as its argument, as defined by a <span><strong class="command">key</strong></span> statement.
<span><strong class="command">default-port</strong></span> specifies the port to which
<span><strong class="command">rndc</strong></span> should connect if no
d1166 25
a1190 6
<span><strong class="command">server</strong></span> statement.</p>
<p>The <span><strong class="command">key</strong></span> statement defines an key to be used
by <span><strong class="command">rndc</strong></span> when authenticating with
<span><strong class="command">named</strong></span>.  Its syntax is identical to the
<span><strong class="command">key</strong></span> statement in named.conf.
The keyword <strong class="userinput"><code>key</code></strong> is
d1193 15
a1207 3
a string like "<strong class="userinput"><code>rndc_key</code></strong>" is a valid name.
The <span><strong class="command">key</strong></span> statement has two clauses:
<span><strong class="command">algorithm</strong></span> and <span><strong class="command">secret</strong></span>.
d1209 33
a1241 8
to algorithm, currently only the string "<strong class="userinput"><code>hmac-md5</code></strong>"
has any meaning.  The secret is a base-64 encoded string.</p>
<p>The <span><strong class="command">server</strong></span> statement associates a key
defined using the <span><strong class="command">key</strong></span> statement with a server.
The keyword <strong class="userinput"><code>server</code></strong> is followed by a
host name or address.  The <span><strong class="command">server</strong></span> statement
has two clauses: <span><strong class="command">key</strong></span> and <span><strong class="command">port</strong></span>.
The <span><strong class="command">key</strong></span> clause specifies the name of the key
d1243 14
a1256 6
<span><strong class="command">port</strong></span> clause can be used to
specify the port <span><strong class="command">rndc</strong></span> should connect
to on the server.</p>
<p>A sample minimal configuration file is as follows:</p>
<pre class="programlisting">
key rndc_key {
d1264 17
a1280 5
</pre>
<p>This file, if installed as <code class="filename">/etc/rndc.conf</code>,
would allow the command:</p>
<p><code class="prompt">$ </code><strong class="userinput"><code>rndc reload</code></strong></p>
<p>to connect to 127.0.0.1 port 953 and cause the name server
d1282 4
a1285 3
following controls statements:</p>
<pre class="programlisting">
controls {
d1288 16
a1303 5
</pre>
<p>and it had an identical key statement for
<code class="literal">rndc_key</code>.</p>
<p>Running the <span><strong class="command">rndc-confgen</strong></span> program will
conveniently create a <code class="filename">rndc.conf</code>
d1305 36
a1340 14
corresponding <span><strong class="command">controls</strong></span> statement that you need to
add to <code class="filename">named.conf</code>.  Alternatively,
you can run <span><strong class="command">rndc-confgen -a</strong></span> to set up
a <code class="filename">rndc.key</code> file and not modify 
<code class="filename">named.conf</code> at all.
</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect2" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="id2548915"></a>Signals</h3></div></div></div>
<p>Certain UNIX signals cause the name server to take specific
d1342 132
a1473 46
be sent using the <span><strong class="command">kill</strong></span> command.</p>
<div class="informaltable"><table border="1">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td><p><span><strong class="command">SIGHUP</strong></span></p></td>
<td><p>Causes the server to read <code class="filename">named.conf</code> and
reload the database. </p></td>
</tr>
<tr>
<td><p><span><strong class="command">SIGTERM</strong></span></p></td>
<td><p>Causes the server to clean up and exit.</p></td>
</tr>
<tr>
<td>
<p><span><strong class="command">SIGINT</strong></span></p>
</td>
<td><p>Causes the server to clean up and exit.</p></td>
</tr>
</tbody>
</table></div>
</div>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="Bv9ARM.ch02.html">Prev</a> </td>
<td width="20%" align="center"> </td>
<td width="40%" align="right"> <a accesskey="n" href="Bv9ARM.ch04.html">Next</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">Chapter 2. <span class="acronym">BIND</span> Resource Requirements </td>
<td width="20%" align="center"><a accesskey="h" href="Bv9ARM.html">Home</a></td>
<td width="40%" align="right" valign="top"> Chapter 4. Advanced DNS Features</td>
</tr>
</table>
</div>
</body>
</html>
@


1.1.1.5
log
@ISC BIND release 9.3.3
@
text
@d2 1
a2 1
 - Copyright (C) 2004-2006 Internet Systems Consortium, Inc. ("ISC")
d17 1
a17 1
<!-- $ISC: Bv9ARM.ch03.html,v 1.26.2.5.4.17 2006/06/29 13:02:31 marka Exp $ -->
d22 1
a22 1
<meta name="generator" content="DocBook XSL Stylesheets V1.70.1">
d50 2
a51 2
<dt><span class="sect2"><a href="Bv9ARM.ch03.html#id2571026">A Caching-only Name Server</a></span></dt>
<dt><span class="sect2"><a href="Bv9ARM.ch03.html#id2571042">An Authoritative-only Name Server</a></span></dt>
d53 2
a54 2
<dt><span class="sect1"><a href="Bv9ARM.ch03.html#id2571064">Load Balancing</a></span></dt>
<dt><span class="sect1"><a href="Bv9ARM.ch03.html#id2571484">Name Server Operations</a></span></dt>
d56 2
a57 2
<dt><span class="sect2"><a href="Bv9ARM.ch03.html#id2571490">Tools for Use With the Name Server Daemon</a></span></dt>
<dt><span class="sect2"><a href="Bv9ARM.ch03.html#id2572723">Signals</a></span></dt>
d69 1
a69 1
<a name="id2571026"></a>A Caching-only Name Server</h3></div></div></div>
d92 1
a92 1
<a name="id2571042"></a>An Authoritative-only Name Server</h3></div></div></div>
d131 1
a131 1
<a name="id2571064"></a>Load Balancing</h2></div></div></div>
d133 1
a133 1
the <acronym class="acronym">DNS</acronym> by using multiple A records for one name.</p>
d177 1
a177 1
<p>When a resolver queries for these records, <acronym class="acronym">BIND</acronym> will rotate
d187 1
a187 1
    <acronym class="acronym">BIND</acronym> 9, and only the ordering scheme described above is
d192 1
a192 1
<a name="id2571484"></a>Name Server Operations</h2></div></div></div>
d195 1
a195 1
<a name="id2571490"></a>Tools for Use With the Name Server Daemon</h3></div></div></div>
d240 1
a240 1
<div class="cmdsynopsis"><p><code class="command">nslookup</code>  [-option...] [[<em class="replaceable"><code>host-to-find</code></em>] |  [- [server]]]</p></div>
d286 1
a286 1
<p>The <span><strong class="command">command</strong></span> is one of the following:</p>
d305 1
a305 1
<dd><p>Suspend updates to a dynamic zone.  If no zone is specified,
d315 1
a315 1
    specified, then all frozen zones are enabled.  This causes
d319 4
d340 1
a340 1
	 dump file for the specified views.  If no view is specified, all
d345 1
a345 2
   of the updated zones.  If -p is specified named's process id is returned.
   This allows an external process to determine when named had completed stopping.</p></dd>
d350 1
a350 3
   is restarted.  If -p is specified named's process id is returned.
   This allows an external process to determine when named had completed
   stopping.</p></dd>
d364 2
a365 2
Note that the number of zones includes the internal <span><strong class="command">bind/CH</strong></span> zone
and the default <span><strong class="command">./IN</strong></span> hint zone if there is not an
d372 1
a372 1
<p>In <acronym class="acronym">BIND</acronym> 9.2, <span><strong class="command">rndc</strong></span>
d389 1
a389 1
the <acronym class="acronym">BIND</acronym> build was configured).
d415 1
a415 1
<p>The <span><strong class="command">key</strong></span> statement defines a key to be used
d477 1
a477 1
<a name="id2572723"></a>Signals</h3></div></div></div>
d518 1
a518 1
<td width="40%" align="left" valign="top">Chapter 2. <acronym class="acronym">BIND</acronym> Resource Requirements </td>
@


1.1.1.6
log
@ISC BIND release 9.4.2
@
text
@d2 1
a2 1
 - Copyright (C) 2004-2007 Internet Systems Consortium, Inc. ("ISC")
d17 1
a17 1
<!-- $ISC: Bv9ARM.ch03.html,v 1.35.18.31 2007/10/31 01:35:57 marka Exp $ -->
d22 1
a22 1
<meta name="generator" content="DocBook XSL Stylesheets V1.71.1">
d50 2
a51 2
<dt><span class="sect2"><a href="Bv9ARM.ch03.html#id2568004">A Caching-only Name Server</a></span></dt>
<dt><span class="sect2"><a href="Bv9ARM.ch03.html#id2568020">An Authoritative-only Name Server</a></span></dt>
d53 2
a54 2
<dt><span class="sect1"><a href="Bv9ARM.ch03.html#id2568042">Load Balancing</a></span></dt>
<dt><span class="sect1"><a href="Bv9ARM.ch03.html#id2568465">Name Server Operations</a></span></dt>
d56 2
a57 2
<dt><span class="sect2"><a href="Bv9ARM.ch03.html#id2568470">Tools for Use With the Name Server Daemon</a></span></dt>
<dt><span class="sect2"><a href="Bv9ARM.ch03.html#id2570184">Signals</a></span></dt>
d61 3
a63 5
<p>
      In this section we provide some suggested configurations along
      with guidelines for their use.  We suggest reasonable values for
      certain option settings.
    </p>
d69 6
a74 10
<a name="id2568004"></a>A Caching-only Name Server</h3></div></div></div>
<p>
          The following sample configuration is appropriate for a caching-only
          name server for use by clients internal to a corporation.  All
          queries
          from outside clients are refused using the <span><strong class="command">allow-query</strong></span>
          option.  Alternatively, the same effect could be achieved using
          suitable
          firewall rules.
        </p>
d92 4
a95 6
<a name="id2568020"></a>An Authoritative-only Name Server</h3></div></div></div>
<p>
          This sample configuration is for an authoritative-only server
          that is the master server for "<code class="filename">example.com</code>"
          and a slave for the subdomain "<code class="filename">eng.example.com</code>".
        </p>
a98 1
     allow-query-cache { none; };       // Do not allow access to cache
d131 7
a137 12
<a name="id2568042"></a>Load Balancing</h2></div></div></div>
<p>
        A primitive form of load balancing can be achieved in
        the <acronym class="acronym">DNS</acronym> by using multiple records
        (such as multiple A records) for one name.
      </p>
<p>
        For example, if you have three WWW servers with network addresses
        of 10.0.0.1, 10.0.0.2 and 10.0.0.3, a set of records such as the
        following means that clients will connect to each machine one third
        of the time:
      </p>
d148 5
a152 25
<td>
                <p>
                  Name
                </p>
              </td>
<td>
                <p>
                  TTL
                </p>
              </td>
<td>
                <p>
                  CLASS
                </p>
              </td>
<td>
                <p>
                  TYPE
                </p>
              </td>
<td>
                <p>
                  Resource Record (RR) Data
                </p>
              </td>
d155 5
a159 25
<td>
                <p>
                  <code class="literal">www</code>
                </p>
              </td>
<td>
                <p>
                  <code class="literal">600</code>
                </p>
              </td>
<td>
                <p>
                  <code class="literal">IN</code>
                </p>
              </td>
<td>
                <p>
                  <code class="literal">A</code>
                </p>
              </td>
<td>
                <p>
                  <code class="literal">10.0.0.1</code>
                </p>
              </td>
d162 5
a166 23
<td>
                <p></p>
              </td>
<td>
                <p>
                  <code class="literal">600</code>
                </p>
              </td>
<td>
                <p>
                  <code class="literal">IN</code>
                </p>
              </td>
<td>
                <p>
                  <code class="literal">A</code>
                </p>
              </td>
<td>
                <p>
                  <code class="literal">10.0.0.2</code>
                </p>
              </td>
d169 5
a173 23
<td>
                <p></p>
              </td>
<td>
                <p>
                  <code class="literal">600</code>
                </p>
              </td>
<td>
                <p>
                  <code class="literal">IN</code>
                </p>
              </td>
<td>
                <p>
                  <code class="literal">A</code>
                </p>
              </td>
<td>
                <p>
                  <code class="literal">10.0.0.3</code>
                </p>
              </td>
d177 12
a188 13
<p>
        When a resolver queries for these records, <acronym class="acronym">BIND</acronym> will rotate
        them and respond to the query with the records in a different
        order.  In the example above, clients will randomly receive
        records in the order 1, 2, 3; 2, 3, 1; and 3, 1, 2. Most clients
        will use the first record returned and discard the rest.
      </p>
<p>
        For more detail on ordering responses, check the
        <span><strong class="command">rrset-order</strong></span> substatement in the
        <span><strong class="command">options</strong></span> statement, see
        <a href="Bv9ARM.ch06.html#rrset_ordering">RRset Ordering</a>.
      </p>
d192 1
a192 1
<a name="id2568465"></a>Name Server Operations</h2></div></div></div>
d195 5
a199 7
<a name="id2568470"></a>Tools for Use With the Name Server Daemon</h3></div></div></div>
<p>
          This section describes several indispensable diagnostic,
          administrative and monitoring tools available to the system
          administrator for controlling and debugging the name server
          daemon.
        </p>
d203 5
a207 7
<p>
            The <span><strong class="command">dig</strong></span>, <span><strong class="command">host</strong></span>, and
            <span><strong class="command">nslookup</strong></span> programs are all command
            line tools
            for manually querying name servers.  They differ in style and
            output format.
          </p>
d211 6
a216 10
<p>
                  The domain information groper (<span><strong class="command">dig</strong></span>)
                  is the most versatile and complete of these lookup tools.
                  It has two modes: simple interactive
                  mode for a single query, and batch mode which executes a
                  query for
                  each in a list of several query lines. All query options are
                  accessible
                  from the command line.
                </p>
d218 4
a221 11
<p>
                  The usual simple use of dig will take the form
                </p>
<p>
                  <span><strong class="command">dig @@server domain query-type query-class</strong></span>
                </p>
<p>
                  For more information and a list of available commands and
                  options, see the <span><strong class="command">dig</strong></span> man
                  page.
                </p>
d225 7
a231 14
<p>
                  The <span><strong class="command">host</strong></span> utility emphasizes
                  simplicity
                  and ease of use.  By default, it converts
                  between host names and Internet addresses, but its
                  functionality
                  can be extended with the use of options.
                </p>
<div class="cmdsynopsis"><p><code class="command">host</code>  [-aCdlnrsTwv] [-c <em class="replaceable"><code>class</code></em>] [-N <em class="replaceable"><code>ndots</code></em>] [-t <em class="replaceable"><code>type</code></em>] [-W <em class="replaceable"><code>timeout</code></em>] [-R <em class="replaceable"><code>retries</code></em>] [-m <em class="replaceable"><code>flag</code></em>] [-4] [-6]  <em class="replaceable"><code>hostname</code></em>  [<em class="replaceable"><code>server</code></em>]</p></div>
<p>
                  For more information and a list of available commands and
                  options, see the <span><strong class="command">host</strong></span> man
                  page.
                </p>
d235 5
a239 9
<p><span><strong class="command">nslookup</strong></span>
                  has two modes: interactive and
                  non-interactive. Interactive mode allows the user to
                  query name servers for information about various
                  hosts and domains or to print a list of hosts in a
                  domain. Non-interactive mode is used to print just
                  the name and requested information for a host or
                  domain.
                </p>
d241 10
a250 21
<p>
                  Interactive mode is entered when no arguments are given (the
                  default name server will be used) or when the first argument
                  is a
                  hyphen (`-') and the second argument is the host name or
                  Internet address
                  of a name server.
                </p>
<p>
                  Non-interactive mode is used when the name or Internet
                  address
                  of the host to be looked up is given as the first argument.
                  The
                  optional second argument specifies the host name or address
                  of a name server.
                </p>
<p>
                  Due to its arcane user interface and frequently inconsistent
                  behavior, we do not recommend the use of <span><strong class="command">nslookup</strong></span>.
                  Use <span><strong class="command">dig</strong></span> instead.
                </p>
d257 2
a258 4
<p>
            Administrative tools play an integral part in the management
            of a server.
          </p>
d264 2
a265 4
<p>
                  The <span><strong class="command">named-checkconf</strong></span> program
                  checks the syntax of a <code class="filename">named.conf</code> file.
                </p>
d272 3
a274 6
<p>
                  The <span><strong class="command">named-checkzone</strong></span> program
                  checks a master file for
                  syntax and consistency.
                </p>
<div class="cmdsynopsis"><p><code class="command">named-checkzone</code>  [-djqvD] [-c <em class="replaceable"><code>class</code></em>] [-o <em class="replaceable"><code>output</code></em>] [-t <em class="replaceable"><code>directory</code></em>] [-w <em class="replaceable"><code>directory</code></em>] [-k <em class="replaceable"><code>(ignore|warn|fail)</code></em>] [-n <em class="replaceable"><code>(ignore|warn|fail)</code></em>] [-W <em class="replaceable"><code>(ignore|warn)</code></em>]  <em class="replaceable"><code>zone</code></em>  [<em class="replaceable"><code>filename</code></em>]</p></div>
a276 8
<a name="named-compilezone"></a><span class="term"><span><strong class="command">named-compilezone</strong></span></span>
</dt>
<dd><p>
                  Similar to <span><strong class="command">named-checkzone,</strong></span> but
                  it always dumps the zone content to a specified file
                  (typically in a different format).
                </p></dd>
<dt>
d280 5
a284 15
<p>
                  The remote name daemon control
                  (<span><strong class="command">rndc</strong></span>) program allows the
                  system
                  administrator to control the operation of a name server.
                  Since <acronym class="acronym">BIND</acronym> 9.2, <span><strong class="command">rndc</strong></span>
                  supports all the commands of the BIND 8 <span><strong class="command">ndc</strong></span>
                  utility except <span><strong class="command">ndc start</strong></span> and
                  <span><strong class="command">ndc restart</strong></span>, which were also
                  not supported in <span><strong class="command">ndc</strong></span>'s
                  channel mode.
                  If you run <span><strong class="command">rndc</strong></span> without any
                  options
                  it will display a usage message as follows:
                </p>
d286 1
a286 3
<p>The <span><strong class="command">command</strong></span>
                  is one of the following:
                </p>
d289 1
a289 3
<dd><p>
                        Reload configuration file and zones.
                      </p></dd>
d291 1
a291 1
                        [<span class="optional"><em class="replaceable"><code>class</code></em>
d293 1
a293 3
<dd><p>
                        Reload the given zone.
                      </p></dd>
d295 1
a295 1
                        [<span class="optional"><em class="replaceable"><code>class</code></em>
d297 1
a297 3
<dd><p>
                        Schedule zone maintenance for the given zone.
                      </p></dd>
d299 1
a299 2

                        [<span class="optional"><em class="replaceable"><code>class</code></em>
d301 2
a302 5
<dd><p>
                        Retransfer the given zone from the master.
                      </p></dd>
<dt><span class="term"><strong class="userinput"><code>freeze
                        [<span class="optional"><em class="replaceable"><code>zone</code></em>
d305 7
a311 14
<dd><p>
                        Suspend updates to a dynamic zone.  If no zone is
                        specified,
                        then all zones are suspended.  This allows manual
                        edits to be made to a zone normally updated by dynamic
                        update.  It
                        also causes changes in the journal file to be synced
                        into the master
                        and the journal file to be removed.  All dynamic
                        update attempts will
                        be refused while the zone is frozen.
                      </p></dd>
<dt><span class="term"><strong class="userinput"><code>thaw
                        [<span class="optional"><em class="replaceable"><code>zone</code></em>
d314 5
a318 17
<dd><p>
                        Enable updates to a frozen dynamic zone.  If no zone
                        is
                        specified, then all frozen zones are enabled.  This
                        causes
                        the server to reload the zone from disk, and
                        re-enables dynamic updates
                        after the load has completed.  After a zone is thawed,
                        dynamic updates
                        will no longer be refused.
                      </p></dd>
<dt><span class="term"><strong class="userinput"><code>notify <em class="replaceable"><code>zone</code></em>
                        [<span class="optional"><em class="replaceable"><code>class</code></em>
           [<span class="optional"><em class="replaceable"><code>view</code></em></span>]</span>]</code></strong></span></dt>
<dd><p>
                        Resend NOTIFY messages for the zone.
                      </p></dd>
d320 6
a325 9
<dd><p>
                        Reload the configuration file and load new zones,
                        but do not reload existing zone files even if they
                        have changed.
                        This is faster than a full <span><strong class="command">reload</strong></span> when there
                        is a large number of zones because it avoids the need
                        to examine the
                        modification times of the zones files.
                      </p></dd>
d327 1
a327 3
<dd><p>
                        Write server statistics to the statistics file.
                      </p></dd>
d329 9
a337 21
<dd><p>
                        Toggle query logging. Query logging can also be enabled
                        by explicitly directing the <span><strong class="command">queries</strong></span>
                        <span><strong class="command">category</strong></span> to a
                        <span><strong class="command">channel</strong></span> in the
                        <span><strong class="command">logging</strong></span> section of
                        <code class="filename">named.conf</code> or by specifying
                        <span><strong class="command">querylog yes;</strong></span> in the
                        <span><strong class="command">options</strong></span> section of
                        <code class="filename">named.conf</code>.
                      </p></dd>
<dt><span class="term"><strong class="userinput"><code>dumpdb
                        [<span class="optional">-all|-cache|-zone</span>]
                        [<span class="optional"><em class="replaceable"><code>view ...</code></em></span>]</code></strong></span></dt>
<dd><p>
                        Dump the server's caches (default) and/or zones to
                        the
                        dump file for the specified views.  If no view is
                        specified, all
                        views are dumped.
                      </p></dd>
d339 4
a342 8
<dd><p>
                        Stop the server, making sure any recent changes
                        made through dynamic update or IXFR are first saved to
                        the master files of the updated zones.
                        If -p is specified named's process id is returned.
                        This allows an external process to determine when named
                        had completed stopping.
                      </p></dd>
d344 6
a349 9
<dd><p>
                        Stop the server immediately.  Recent changes
                        made through dynamic update or IXFR are not saved to
                        the master files, but will be rolled forward from the
                        journal files when the server is restarted.
                        If -p is specified named's process id is returned.
                        This allows an external process to determine when named
                        had completed halting.
                      </p></dd>
d351 1
a351 3
<dd><p>
                        Increment the servers debugging level by one.
                      </p></dd>
d353 2
a354 4
<dd><p>
                        Sets the server's debugging level to an explicit
                        value.
                      </p></dd>
d356 1
a356 3
<dd><p>
                        Sets the server's debugging level to 0.
                      </p></dd>
d358 1
a358 3
<dd><p>
                        Flushes the server's cache.
                      </p></dd>
d360 1
a360 3
<dd><p>
                        Flushes the given name from the server's cache.
                      </p></dd>
d362 4
a365 7
<dd><p>
                        Display status of the server.
                        Note that the number of zones includes the internal <span><strong class="command">bind/CH</strong></span> zone
                        and the default <span><strong class="command">./IN</strong></span>
                        hint zone if there is not an
                        explicit root zone configured.
                      </p></dd>
d367 3
a369 4
<dd><p>
                        Dump the list of queries named is currently recursing
                        on.
                      </p></dd>
d371 67
a437 96
<p>
                  A configuration file is required, since all
                  communication with the server is authenticated with
                  digital signatures that rely on a shared secret, and
                  there is no way to provide that secret other than with a
                  configuration file.  The default location for the
                  <span><strong class="command">rndc</strong></span> configuration file is
                  <code class="filename">/etc/rndc.conf</code>, but an
                  alternate
                  location can be specified with the <code class="option">-c</code>
                  option.  If the configuration file is not found,
                  <span><strong class="command">rndc</strong></span> will also look in
                  <code class="filename">/etc/rndc.key</code> (or whatever
                  <code class="varname">sysconfdir</code> was defined when
                  the <acronym class="acronym">BIND</acronym> build was
                  configured).
                  The <code class="filename">rndc.key</code> file is
                  generated by
                  running <span><strong class="command">rndc-confgen -a</strong></span> as
                  described in
                  <a href="Bv9ARM.ch06.html#controls_statement_definition_and_usage" title="controls Statement Definition and
          Usage">the section called &#8220;<span><strong class="command">controls</strong></span> Statement Definition and
          Usage&#8221;</a>.
                </p>
<p>
                  The format of the configuration file is similar to
                  that of <code class="filename">named.conf</code>, but
                  limited to
                  only four statements, the <span><strong class="command">options</strong></span>,
                  <span><strong class="command">key</strong></span>, <span><strong class="command">server</strong></span> and
                  <span><strong class="command">include</strong></span>
                  statements.  These statements are what associate the
                  secret keys to the servers with which they are meant to
                  be shared.  The order of statements is not
                  significant.
                </p>
<p>
                  The <span><strong class="command">options</strong></span> statement has
                  three clauses:
                  <span><strong class="command">default-server</strong></span>, <span><strong class="command">default-key</strong></span>,
                  and <span><strong class="command">default-port</strong></span>.
                  <span><strong class="command">default-server</strong></span> takes a
                  host name or address argument  and represents the server
                  that will
                  be contacted if no <code class="option">-s</code>
                  option is provided on the command line.
                  <span><strong class="command">default-key</strong></span> takes
                  the name of a key as its argument, as defined by a <span><strong class="command">key</strong></span> statement.
                  <span><strong class="command">default-port</strong></span> specifies the
                  port to which
                  <span><strong class="command">rndc</strong></span> should connect if no
                  port is given on the command line or in a
                  <span><strong class="command">server</strong></span> statement.
                </p>
<p>
                  The <span><strong class="command">key</strong></span> statement defines a
                  key to be used
                  by <span><strong class="command">rndc</strong></span> when authenticating
                  with
                  <span><strong class="command">named</strong></span>.  Its syntax is
                  identical to the
                  <span><strong class="command">key</strong></span> statement in named.conf.
                  The keyword <strong class="userinput"><code>key</code></strong> is
                  followed by a key name, which must be a valid
                  domain name, though it need not actually be hierarchical;
                  thus,
                  a string like "<strong class="userinput"><code>rndc_key</code></strong>" is a valid
                  name.
                  The <span><strong class="command">key</strong></span> statement has two
                  clauses:
                  <span><strong class="command">algorithm</strong></span> and <span><strong class="command">secret</strong></span>.
                  While the configuration parser will accept any string as the
                  argument
                  to algorithm, currently only the string "<strong class="userinput"><code>hmac-md5</code></strong>"
                  has any meaning.  The secret is a base-64 encoded string
                  as specified in RFC 3548.
                </p>
<p>
                  The <span><strong class="command">server</strong></span> statement
                  associates a key
                  defined using the <span><strong class="command">key</strong></span>
                  statement with a server.
                  The keyword <strong class="userinput"><code>server</code></strong> is followed by a
                  host name or address.  The <span><strong class="command">server</strong></span> statement
                  has two clauses: <span><strong class="command">key</strong></span> and <span><strong class="command">port</strong></span>.
                  The <span><strong class="command">key</strong></span> clause specifies the
                  name of the key
                  to be used when communicating with this server, and the
                  <span><strong class="command">port</strong></span> clause can be used to
                  specify the port <span><strong class="command">rndc</strong></span> should
                  connect
                  to on the server.
                </p>
<p>
                  A sample minimal configuration file is as follows:
                </p>
d448 6
a453 13
<p>
                  This file, if installed as <code class="filename">/etc/rndc.conf</code>,
                  would allow the command:
                </p>
<p>
                  <code class="prompt">$ </code><strong class="userinput"><code>rndc reload</code></strong>
                </p>
<p>
                  to connect to 127.0.0.1 port 953 and cause the name server
                  to reload, if a name server on the local machine were
                  running with
                  following controls statements:
                </p>
d459 11
a469 19
<p>
                  and it had an identical key statement for
                  <code class="literal">rndc_key</code>.
                </p>
<p>
                  Running the <span><strong class="command">rndc-confgen</strong></span>
                  program will
                  conveniently create a <code class="filename">rndc.conf</code>
                  file for you, and also display the
                  corresponding <span><strong class="command">controls</strong></span>
                  statement that you need to
                  add to <code class="filename">named.conf</code>.
                  Alternatively,
                  you can run <span><strong class="command">rndc-confgen -a</strong></span>
                  to set up
                  a <code class="filename">rndc.key</code> file and not
                  modify
                  <code class="filename">named.conf</code> at all.
                </p>
d476 4
a479 6
<a name="id2570184"></a>Signals</h3></div></div></div>
<p>
          Certain UNIX signals cause the name server to take specific
          actions, as described in the following table.  These signals can
          be sent using the <span><strong class="command">kill</strong></span> command.
        </p>
d487 3
a489 9
<td>
                  <p><span><strong class="command">SIGHUP</strong></span></p>
                </td>
<td>
                  <p>
                    Causes the server to read <code class="filename">named.conf</code> and
                    reload the database.
                  </p>
                </td>
d492 2
a493 8
<td>
                  <p><span><strong class="command">SIGTERM</strong></span></p>
                </td>
<td>
                  <p>
                    Causes the server to clean up and exit.
                  </p>
                </td>
d497 3
a499 7
                  <p><span><strong class="command">SIGINT</strong></span></p>
                </td>
<td>
                  <p>
                    Causes the server to clean up and exit.
                  </p>
                </td>
@


