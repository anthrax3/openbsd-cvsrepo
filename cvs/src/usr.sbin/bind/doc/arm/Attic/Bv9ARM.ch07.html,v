head	1.9;
access;
symbols
	OPENBSD_5_6:1.8.0.30
	OPENBSD_5_6_BASE:1.8
	OPENBSD_5_5:1.8.0.28
	OPENBSD_5_5_BASE:1.8
	OPENBSD_5_4:1.8.0.24
	OPENBSD_5_4_BASE:1.8
	OPENBSD_5_3:1.8.0.22
	OPENBSD_5_3_BASE:1.8
	OPENBSD_5_2:1.8.0.20
	OPENBSD_5_2_BASE:1.8
	OPENBSD_5_1_BASE:1.8
	OPENBSD_5_1:1.8.0.18
	OPENBSD_5_0:1.8.0.16
	OPENBSD_5_0_BASE:1.8
	OPENBSD_4_9:1.8.0.14
	OPENBSD_4_9_BASE:1.8
	OPENBSD_4_8:1.8.0.12
	OPENBSD_4_8_BASE:1.8
	OPENBSD_4_7:1.8.0.8
	OPENBSD_4_7_BASE:1.8
	OPENBSD_4_6:1.8.0.10
	OPENBSD_4_6_BASE:1.8
	OPENBSD_4_5:1.8.0.6
	OPENBSD_4_5_BASE:1.8
	OPENBSD_4_4:1.8.0.4
	OPENBSD_4_4_BASE:1.8
	BIND_9_4_2_P1:1.1.1.6
	OPENBSD_4_3:1.8.0.2
	OPENBSD_4_3_BASE:1.8
	BIND_9_4_2:1.1.1.6
	OPENBSD_4_2:1.7.0.4
	OPENBSD_4_2_BASE:1.7
	OPENBSD_4_1:1.7.0.2
	OPENBSD_4_1_BASE:1.7
	BIND_9_3_4:1.1.1.5
	BIND_9_3_3:1.1.1.5
	OPENBSD_4_0:1.6.0.2
	OPENBSD_4_0_BASE:1.6
	BIND_9_3_2:1.1.1.4
	OPENBSD_3_9:1.5.0.4
	OPENBSD_3_9_BASE:1.5
	OPENBSD_3_8:1.5.0.2
	OPENBSD_3_8_BASE:1.5
	BIND_9_3_1:1.1.1.3
	OPENBSD_3_7:1.4.0.2
	OPENBSD_3_7_BASE:1.4
	BIND_9_3_0:1.1.1.2
	OPENBSD_3_6:1.3.0.4
	OPENBSD_3_6_BASE:1.3
	OPENBSD_3_5:1.3.0.2
	OPENBSD_3_5_BASE:1.3
	OPENBSD_3_4:1.1.1.1.0.4
	OPENBSD_3_4_BASE:1.1.1.1
	OPENBSD_3_3:1.1.1.1.0.2
	OPENBSD_3_3_BASE:1.1.1.1
	BIND_9_2_2_RC1:1.1.1.1
	ISC:1.1.1;
locks; strict;
comment	@# @;


1.9
date	2014.08.25.07.08.34;	author brad;	state dead;
branches;
next	1.8;
commitid	zKogyOACFMOV70QE;

1.8
date	2007.12.09.13.39.43;	author jakob;	state Exp;
branches;
next	1.7;

1.7
date	2007.01.10.19.07.59;	author jakob;	state Exp;
branches;
next	1.6;

1.6
date	2006.04.05.17.36.34;	author jakob;	state Exp;
branches;
next	1.5;

1.5
date	2005.03.22.16.52.39;	author jakob;	state Exp;
branches;
next	1.4;

1.4
date	2004.09.28.17.14.05;	author jakob;	state Exp;
branches;
next	1.3;

1.3
date	2003.11.18.14.14.06;	author jakob;	state Exp;
branches;
next	1.2;

1.2
date	2003.09.22.19.49.28;	author jakob;	state Exp;
branches;
next	1.1;

1.1
date	2003.01.20.21.06.52;	author jakob;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.01.20.21.06.52;	author jakob;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2004.09.28.16.34.31;	author jakob;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2005.03.22.16.37.27;	author jakob;	state Exp;
branches;
next	1.1.1.4;

1.1.1.4
date	2006.04.05.16.43.14;	author jakob;	state Exp;
branches;
next	1.1.1.5;

1.1.1.5
date	2007.01.10.18.19.21;	author jakob;	state Exp;
branches;
next	1.1.1.6;

1.1.1.6
date	2007.12.09.12.33.45;	author jakob;	state Exp;
branches;
next	;


desc
@@


1.9
log
@Start removing unused documentation and the server and related binaries source
code.
@
text
@<!--
 - Copyright (C) 2004-2007 Internet Systems Consortium, Inc. ("ISC")
 - Copyright (C) 2000-2003 Internet Software Consortium.
 - 
 - Permission to use, copy, modify, and distribute this software for any
 - purpose with or without fee is hereby granted, provided that the above
 - copyright notice and this permission notice appear in all copies.
 - 
 - THE SOFTWARE IS PROVIDED "AS IS" AND ISC DISCLAIMS ALL WARRANTIES WITH
 - REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
 - AND FITNESS. IN NO EVENT SHALL ISC BE LIABLE FOR ANY SPECIAL, DIRECT,
 - INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
 - LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE
 - OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
 - PERFORMANCE OF THIS SOFTWARE.
-->
<!-- $ISC: Bv9ARM.ch07.html,v 1.75.18.63 2007/10/31 01:35:59 marka Exp $ -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Chapter 7. BIND 9 Security Considerations</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.71.1">
<link rel="start" href="Bv9ARM.html" title="BIND 9 Administrator Reference Manual">
<link rel="up" href="Bv9ARM.html" title="BIND 9 Administrator Reference Manual">
<link rel="prev" href="Bv9ARM.ch06.html" title="Chapter 6. BIND 9 Configuration Reference">
<link rel="next" href="Bv9ARM.ch08.html" title="Chapter 8. Troubleshooting">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">Chapter 7. <acronym class="acronym">BIND</acronym> 9 Security Considerations</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="Bv9ARM.ch06.html">Prev</a> </td>
<th width="60%" align="center"> </th>
<td width="20%" align="right"> <a accesskey="n" href="Bv9ARM.ch08.html">Next</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="chapter" lang="en">
<div class="titlepage"><div><div><h2 class="title">
<a name="Bv9ARM.ch07"></a>Chapter 7. <acronym class="acronym">BIND</acronym> 9 Security Considerations</h2></div></div></div>
<div class="toc">
<p><b>Table of Contents</b></p>
<dl>
<dt><span class="sect1"><a href="Bv9ARM.ch07.html#Access_Control_Lists">Access Control Lists</a></span></dt>
<dt><span class="sect1"><a href="Bv9ARM.ch07.html#id2592714"><span><strong class="command">Chroot</strong></span> and <span><strong class="command">Setuid</strong></span></a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="Bv9ARM.ch07.html#id2592791">The <span><strong class="command">chroot</strong></span> Environment</a></span></dt>
<dt><span class="sect2"><a href="Bv9ARM.ch07.html#id2592851">Using the <span><strong class="command">setuid</strong></span> Function</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="Bv9ARM.ch07.html#dynamic_update_security">Dynamic Update Security</a></span></dt>
</dl>
</div>
<div class="sect1" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="Access_Control_Lists"></a>Access Control Lists</h2></div></div></div>
<p>
          Access Control Lists (ACLs), are address match lists that
          you can set up and nickname for future use in <span><strong class="command">allow-notify</strong></span>,
          <span><strong class="command">allow-query</strong></span>, <span><strong class="command">allow-recursion</strong></span>,
          <span><strong class="command">blackhole</strong></span>, <span><strong class="command">allow-transfer</strong></span>,
          etc.
        </p>
<p>
          Using ACLs allows you to have finer control over who can access
          your name server, without cluttering up your config files with huge
          lists of IP addresses.
        </p>
<p>
          It is a <span class="emphasis"><em>good idea</em></span> to use ACLs, and to
          control access to your server. Limiting access to your server by
          outside parties can help prevent spoofing and denial of service (DoS) attacks against
          your server.
        </p>
<p>
          Here is an example of how to properly apply ACLs:
        </p>
<pre class="programlisting">
// Set up an ACL named "bogusnets" that will block RFC1918 space
// and some reserved space, which is commonly used in spoofing attacks.
acl bogusnets {
        0.0.0.0/8; 1.0.0.0/8; 2.0.0.0/8; 192.0.2.0/24; 224.0.0.0/3;
        10.0.0.0/8; 172.16.0.0/12; 192.168.0.0/16;
};

// Set up an ACL called our-nets. Replace this with the real IP numbers.
acl our-nets { x.x.x.x/24; x.x.x.x/21; };
options {
  ...
  ...
  allow-query { our-nets; };
  allow-recursion { our-nets; };
  ...
  blackhole { bogusnets; };
  ...
};

zone "example.com" {
  type master;
  file "m/example.com";
  allow-query { any; };
};
</pre>
<p>
          This allows recursive queries of the server from the outside
          unless recursion has been previously disabled.
        </p>
<p>
          For more information on how to use ACLs to protect your server,
          see the <span class="emphasis"><em>AUSCERT</em></span> advisory at:
        </p>
<p>
          <a href="ftp://ftp.auscert.org.au/pub/auscert/advisory/AL-1999.004.dns_dos" target="_top">ftp://ftp.auscert.org.au/pub/auscert/advisory/AL-1999.004.dns_dos</a>
        </p>
</div>
<div class="sect1" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="id2592714"></a><span><strong class="command">Chroot</strong></span> and <span><strong class="command">Setuid</strong></span>
</h2></div></div></div>
<p>
          On UNIX servers, it is possible to run <acronym class="acronym">BIND</acronym> in a <span class="emphasis"><em>chrooted</em></span> environment
          (using the <span><strong class="command">chroot()</strong></span> function) by specifying the "<code class="option">-t</code>"
          option. This can help improve system security by placing <acronym class="acronym">BIND</acronym> in
          a "sandbox", which will limit the damage done if a server is
          compromised.
        </p>
<p>
          Another useful feature in the UNIX version of <acronym class="acronym">BIND</acronym> is the
          ability to run the daemon as an unprivileged user ( <code class="option">-u</code> <em class="replaceable"><code>user</code></em> ).
          We suggest running as an unprivileged user when using the <span><strong class="command">chroot</strong></span> feature.
        </p>
<p>
          Here is an example command line to load <acronym class="acronym">BIND</acronym> in a <span><strong class="command">chroot</strong></span> sandbox,
          <span><strong class="command">/var/named</strong></span>, and to run <span><strong class="command">named</strong></span> <span><strong class="command">setuid</strong></span> to
          user 202:
        </p>
<p>
          <strong class="userinput"><code>/usr/local/bin/named -u 202 -t /var/named</code></strong>
        </p>
<div class="sect2" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="id2592791"></a>The <span><strong class="command">chroot</strong></span> Environment</h3></div></div></div>
<p>
            In order for a <span><strong class="command">chroot</strong></span> environment
            to
            work properly in a particular directory
            (for example, <code class="filename">/var/named</code>),
            you will need to set up an environment that includes everything
            <acronym class="acronym">BIND</acronym> needs to run.
            From <acronym class="acronym">BIND</acronym>'s point of view, <code class="filename">/var/named</code> is
            the root of the filesystem.  You will need to adjust the values of
            options like
            like <span><strong class="command">directory</strong></span> and <span><strong class="command">pid-file</strong></span> to account
            for this.
          </p>
<p>
            Unlike with earlier versions of BIND, you typically will
            <span class="emphasis"><em>not</em></span> need to compile <span><strong class="command">named</strong></span>
            statically nor install shared libraries under the new root.
            However, depending on your operating system, you may need
            to set up things like
            <code class="filename">/dev/zero</code>,
            <code class="filename">/dev/random</code>,
            <code class="filename">/dev/log</code>, and
            <code class="filename">/etc/localtime</code>.
          </p>
</div>
<div class="sect2" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="id2592851"></a>Using the <span><strong class="command">setuid</strong></span> Function</h3></div></div></div>
<p>
            Prior to running the <span><strong class="command">named</strong></span> daemon,
            use
            the <span><strong class="command">touch</strong></span> utility (to change file
            access and
            modification times) or the <span><strong class="command">chown</strong></span>
            utility (to
            set the user id and/or group id) on files
            to which you want <acronym class="acronym">BIND</acronym>
            to write.
          </p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Note</h3>
            Note that if the <span><strong class="command">named</strong></span> daemon is running as an
            unprivileged user, it will not be able to bind to new restricted
            ports if the server is reloaded.
          </div>
</div>
</div>
<div class="sect1" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="dynamic_update_security"></a>Dynamic Update Security</h2></div></div></div>
<p>
          Access to the dynamic
          update facility should be strictly limited.  In earlier versions of
          <acronym class="acronym">BIND</acronym>, the only way to do this was
          based on the IP
          address of the host requesting the update, by listing an IP address
          or
          network prefix in the <span><strong class="command">allow-update</strong></span>
          zone option.
          This method is insecure since the source address of the update UDP
          packet
          is easily forged.  Also note that if the IP addresses allowed by the
          <span><strong class="command">allow-update</strong></span> option include the
          address of a slave
          server which performs forwarding of dynamic updates, the master can
          be
          trivially attacked by sending the update to the slave, which will
          forward it to the master with its own source IP address causing the
          master to approve it without question.
        </p>
<p>
          For these reasons, we strongly recommend that updates be
          cryptographically authenticated by means of transaction signatures
          (TSIG).  That is, the <span><strong class="command">allow-update</strong></span>
          option should
          list only TSIG key names, not IP addresses or network
          prefixes. Alternatively, the new <span><strong class="command">update-policy</strong></span>
          option can be used.
        </p>
<p>
          Some sites choose to keep all dynamically-updated DNS data
          in a subdomain and delegate that subdomain to a separate zone. This
          way, the top-level zone containing critical data such as the IP
          addresses
          of public web and mail servers need not allow dynamic update at
          all.
        </p>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="Bv9ARM.ch06.html">Prev</a> </td>
<td width="20%" align="center"> </td>
<td width="40%" align="right"> <a accesskey="n" href="Bv9ARM.ch08.html">Next</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">Chapter 6. <acronym class="acronym">BIND</acronym> 9 Configuration Reference </td>
<td width="20%" align="center"><a accesskey="h" href="Bv9ARM.html">Home</a></td>
<td width="40%" align="right" valign="top"> Chapter 8. Troubleshooting</td>
</tr>
</table>
</div>
</body>
</html>
@


1.8
log
@resolve conflicts
@
text
@@


1.7
log
@resolve conflicts and regen configure script
@
text
@d2 1
a2 1
 - Copyright (C) 2004-2006 Internet Systems Consortium, Inc. ("ISC")
d17 1
a17 1
<!-- $ISC: Bv9ARM.ch07.html,v 1.50.2.9.2.33 2006/09/13 02:56:21 marka Exp $ -->
d22 1
a22 1
<meta name="generator" content="DocBook XSL Stylesheets V1.70.1">
d49 1
a49 2
<dt><span class="sect1"><a href="Bv9ARM.ch07.html#id2591971"><span><strong class="command">chroot</strong></span> and <span><strong class="command">setuid</strong></span> (for
UNIX servers)</a></span></dt>
d51 2
a52 2
<dt><span class="sect2"><a href="Bv9ARM.ch07.html#id2592046">The <span><strong class="command">chroot</strong></span> Environment</a></span></dt>
<dt><span class="sect2"><a href="Bv9ARM.ch07.html#id2592172">Using the <span><strong class="command">setuid</strong></span> Function</a></span></dt>
d60 21
a80 13
<p>Access Control Lists (ACLs), are address match lists that
you can set up and nickname for future use in <span><strong class="command">allow-notify</strong></span>,
<span><strong class="command">allow-query</strong></span>, <span><strong class="command">allow-recursion</strong></span>,
<span><strong class="command">blackhole</strong></span>, <span><strong class="command">allow-transfer</strong></span>,
etc.</p>
<p>Using ACLs allows you to have finer control over who can access
your name server, without cluttering up your config files with huge
lists of IP addresses.</p>
<p>It is a <span class="emphasis"><em>good idea</em></span> to use ACLs, and to
control access to your server. Limiting access to your server by
outside parties can help prevent spoofing and denial of service (DoS)
attacks against your server.</p>
<p>Here is an example of how to properly apply ACLs:</p>
d82 6
a87 3
// Set up an ACL named "bogusnets" that will block RFC1918 space,
// which is commonly used in spoofing attacks.
acl bogusnets { 0.0.0.0/8; 1.0.0.0/8; 2.0.0.0/8; 192.0.2.0/24; 224.0.0.0/3; 10.0.0.0/8; 172.16.0.0/12; 192.168.0.0/16; };
d90 1
a90 1
acl our-nets { x.x.x.x/24; x.x.x.x/21; }; 
d107 11
a117 5
<p>This allows recursive queries of the server from the outside
unless recursion has been previously disabled.</p>
<p>For more information on how to use ACLs to protect your server,
see the <span class="emphasis"><em>AUSCERT</em></span> advisory at
<a href="ftp://ftp.auscert.org.au/pub/auscert/advisory/AL-1999.004.dns_dos" target="_top">ftp://ftp.auscert.org.au/pub/auscert/advisory/AL-1999.004.dns_dos</a></p>
d121 22
a142 13
<a name="id2591971"></a><span><strong class="command">chroot</strong></span> and <span><strong class="command">setuid</strong></span> (for
UNIX servers)</h2></div></div></div>
<p>On UNIX servers, it is possible to run <acronym class="acronym">BIND</acronym> in a <span class="emphasis"><em>chrooted</em></span> environment
(using the <span><strong class="command">chroot()</strong></span> function) by specifying the "<code class="option">-t</code>"
option. This can help improve system security by placing <acronym class="acronym">BIND</acronym> in
a "sandbox", which will limit the damage done if a server is compromised.</p>
<p>Another useful feature in the UNIX version of <acronym class="acronym">BIND</acronym> is the
ability to run the daemon as an unprivileged user ( <code class="option">-u</code> <em class="replaceable"><code>user</code></em> ).
We suggest running as an unprivileged user when using the <span><strong class="command">chroot</strong></span> feature.</p>
<p>Here is an example command line to load <acronym class="acronym">BIND</acronym> in a <span><strong class="command">chroot</strong></span> sandbox, 
<span><strong class="command">/var/named</strong></span>, and to run <span><strong class="command">named</strong></span> <span><strong class="command">setuid</strong></span> to
user 202:</p>
<p><strong class="userinput"><code>/usr/local/bin/named -u 202 -t /var/named</code></strong></p>
d145 25
a169 22
<a name="id2592046"></a>The <span><strong class="command">chroot</strong></span> Environment</h3></div></div></div>
<p>In order for a <span><strong class="command">chroot</strong></span> environment to
work properly in a particular directory
(for example, <code class="filename">/var/named</code>),
you will need to set up an environment that includes everything
<acronym class="acronym">BIND</acronym> needs to run.
From <acronym class="acronym">BIND</acronym>'s point of view, <code class="filename">/var/named</code> is
the root of the filesystem.  You will need to adjust the values of options like
like <span><strong class="command">directory</strong></span> and <span><strong class="command">pid-file</strong></span> to account
for this.
</p>
<p>
Unlike with earlier versions of BIND, you will typically
<span class="emphasis"><em>not</em></span> need to compile <span><strong class="command">named</strong></span>
statically nor install shared libraries under the new root.
However, depending on your operating system, you may need
to set up things like
<code class="filename">/dev/zero</code>,
<code class="filename">/dev/random</code>,
<code class="filename">/dev/log</code>, and
<code class="filename">/etc/localtime</code>.
</p>
d173 18
a190 9
<a name="id2592172"></a>Using the <span><strong class="command">setuid</strong></span> Function</h3></div></div></div>
<p>Prior to running the <span><strong class="command">named</strong></span> daemon, use
the <span><strong class="command">touch</strong></span> utility (to change file access and
modification times) or the <span><strong class="command">chown</strong></span> utility (to
set the user id and/or group id) on files
to which you want <acronym class="acronym">BIND</acronym>
to write.  Note that if the <span><strong class="command">named</strong></span> daemon is running as an
unprivileged user, it will not be able to bind to new restricted ports if the
server is reloaded.</p>
d196 37
a232 23
<p>Access to the dynamic
update facility should be strictly limited.  In earlier versions of
<acronym class="acronym">BIND</acronym>, the only way to do this was based on the IP
address of the host requesting the update, by listing an IP address or
network prefix in the <span><strong class="command">allow-update</strong></span> zone option.
This method is insecure since the source address of the update UDP packet
is easily forged.  Also note that if the IP addresses allowed by the
<span><strong class="command">allow-update</strong></span> option include the address of a slave
server which performs forwarding of dynamic updates, the master can be
trivially attacked by sending the update to the slave, which will
forward it to the master with its own source IP address causing the
master to approve it without question.</p>
<p>For these reasons, we strongly recommend that updates be
cryptographically authenticated by means of transaction signatures
(TSIG).  That is, the <span><strong class="command">allow-update</strong></span> option should
list only TSIG key names, not IP addresses or network
prefixes. Alternatively, the new <span><strong class="command">update-policy</strong></span>
option can be used.</p>
<p>Some sites choose to keep all dynamically-updated DNS data
in a subdomain and delegate that subdomain to a separate zone. This
way, the top-level zone containing critical data such as the IP addresses
of public web and mail servers need not allow dynamic update at
all.</p>
@


1.6
log
@resolve conflicts
@
text
@d2 1
a2 1
 - Copyright (C) 2004, 2005 Internet Systems Consortium, Inc. ("ISC")
d17 1
a17 1
<!-- $ISC: Bv9ARM.ch07.html,v 1.50.2.9.2.24 2005/10/13 02:34:02 marka Exp $ -->
d22 1
a22 1
<meta name="generator" content="DocBook XSL Stylesheets V1.69.1">
d31 1
a31 1
<tr><th colspan="3" align="center">Chapter 7. <span class="acronym">BIND</span> 9 Security Considerations</th></tr>
d44 1
a44 1
<a name="Bv9ARM.ch07"></a>Chapter 7. <span class="acronym">BIND</span> 9 Security Considerations</h2></div></div></div>
d49 1
a49 1
<dt><span class="sect1"><a href="Bv9ARM.ch07.html#id2567222"><span><strong class="command">chroot</strong></span> and <span><strong class="command">setuid</strong></span> (for
d52 2
a53 2
<dt><span class="sect2"><a href="Bv9ARM.ch07.html#id2567366">The <span><strong class="command">chroot</strong></span> Environment</a></span></dt>
<dt><span class="sect2"><a href="Bv9ARM.ch07.html#id2567424">Using the <span><strong class="command">setuid</strong></span> Function</a></span></dt>
d71 2
a72 2
outside parties can help prevent spoofing and DoS attacks against
your server.</p>
d78 1
d90 1
d105 1
a105 1
<a name="id2567222"></a><span><strong class="command">chroot</strong></span> and <span><strong class="command">setuid</strong></span> (for
d107 3
a109 3
<p>On UNIX servers, it is possible to run <span class="acronym">BIND</span> in a <span class="emphasis"><em>chrooted</em></span> environment
(<span><strong class="command">chroot()</strong></span>) by specifying the "<code class="option">-t</code>"
option. This can help improve system security by placing <span class="acronym">BIND</span> in
d111 1
a111 1
<p>Another useful feature in the UNIX version of <span class="acronym">BIND</span> is the
d114 1
a114 1
<p>Here is an example command line to load <span class="acronym">BIND</span> in a <span><strong class="command">chroot()</strong></span> sandbox, 
d120 2
a121 2
<a name="id2567366"></a>The <span><strong class="command">chroot</strong></span> Environment</h3></div></div></div>
<p>In order for a <span><strong class="command">chroot()</strong></span> environment to
d125 2
a126 2
<span class="acronym">BIND</span> needs to run.
From <span class="acronym">BIND</span>'s point of view, <code class="filename">/var/named</code> is
d139 1
a139 1
<code class="filename">/dev/log</code>, and/or
d145 1
a145 1
<a name="id2567424"></a>Using the <span><strong class="command">setuid</strong></span> Function</h3></div></div></div>
d150 1
a150 1
to which you want <span class="acronym">BIND</span>
d161 1
a161 1
<span class="acronym">BIND</span> the only way to do this was based on the IP
d177 1
a177 1
<p>Some sites choose to keep all dynamically updated DNS data
d195 1
a195 1
<td width="40%" align="left" valign="top">Chapter 6. <span class="acronym">BIND</span> 9 Configuration Reference </td>
@


1.5
log
@resolve conflicts
@
text
@d1 66
a66 139
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>BIND 9 Security Considerations</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="BIND 9 Administrator Reference Manual"
HREF="Bv9ARM.html"><LINK
REL="PREVIOUS"
TITLE="BIND 9 Configuration Reference"
HREF="Bv9ARM.ch06.html"><LINK
REL="NEXT"
TITLE="Troubleshooting"
HREF="Bv9ARM.ch08.html"></HEAD
><BODY
CLASS="chapter"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>BIND 9 Administrator Reference Manual</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="Bv9ARM.ch06.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="Bv9ARM.ch08.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="chapter"
><H1
><A
NAME="ch07"
></A
>Chapter 7. <ACRONYM
CLASS="acronym"
>BIND</ACRONYM
> 9 Security Considerations</H1
><DIV
CLASS="TOC"
><DL
><DT
><B
>Table of Contents</B
></DT
><DT
>7.1. <A
HREF="Bv9ARM.ch07.html#Access_Control_Lists"
>Access Control Lists</A
></DT
><DT
>7.2. <A
HREF="Bv9ARM.ch07.html#AEN4693"
><B
CLASS="command"
>chroot</B
> and <B
CLASS="command"
>setuid</B
> (for
UNIX servers)</A
></DT
><DT
>7.3. <A
HREF="Bv9ARM.ch07.html#dynamic_update_security"
>Dynamic Update Security</A
></DT
></DL
></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="Access_Control_Lists"
>7.1. Access Control Lists</A
></H1
><P
>Access Control Lists (ACLs), are address match lists that
you can set up and nickname for future use in <B
CLASS="command"
>allow-notify</B
>,
<B
CLASS="command"
>allow-query</B
>, <B
CLASS="command"
>allow-recursion</B
>,
<B
CLASS="command"
>blackhole</B
>, <B
CLASS="command"
>allow-transfer</B
>,
etc.</P
><P
>Using ACLs allows you to have finer control over who can access
d68 2
a69 9
lists of IP addresses.</P
><P
>It is a <SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>good idea</I
></SPAN
> to use ACLs, and to
d72 4
a75 6
your server.</P
><P
>Here is an example of how to properly apply ACLs:</P
><PRE
CLASS="programlisting"
>&#13;// Set up an ACL named "bogusnets" that will block RFC1918 space,
d94 26
a119 113
</PRE
><P
>This allows recursive queries of the server from the outside
unless recursion has been previously disabled.</P
><P
>For more information on how to use ACLs to protect your server,
see the <SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>AUSCERT</I
></SPAN
> advisory at
<A
HREF="ftp://ftp.auscert.org.au/pub/auscert/advisory/AL-1999.004.dns_dos"
TARGET="_top"
>ftp://ftp.auscert.org.au/pub/auscert/advisory/AL-1999.004.dns_dos</A
></P
></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="AEN4693"
>7.2. <B
CLASS="command"
>chroot</B
> and <B
CLASS="command"
>setuid</B
> (for
UNIX servers)</A
></H1
><P
>On UNIX servers, it is possible to run <ACRONYM
CLASS="acronym"
>BIND</ACRONYM
> in a <SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>chrooted</I
></SPAN
> environment
(<B
CLASS="command"
>chroot()</B
>) by specifying the "<VAR
CLASS="option"
>-t</VAR
>"
option. This can help improve system security by placing <ACRONYM
CLASS="acronym"
>BIND</ACRONYM
> in
a "sandbox", which will limit the damage done if a server is compromised.</P
><P
>Another useful feature in the UNIX version of <ACRONYM
CLASS="acronym"
>BIND</ACRONYM
> is the
ability to run the daemon as an unprivileged user ( <VAR
CLASS="option"
>-u</VAR
> <VAR
CLASS="replaceable"
>user</VAR
> ).
We suggest running as an unprivileged user when using the <B
CLASS="command"
>chroot</B
> feature.</P
><P
>Here is an example command line to load <ACRONYM
CLASS="acronym"
>BIND</ACRONYM
> in a <B
CLASS="command"
>chroot()</B
> sandbox, 
<B
CLASS="command"
>/var/named</B
>, and to run <B
CLASS="command"
>named</B
> <B
CLASS="command"
>setuid</B
> to
user 202:</P
><P
><KBD
CLASS="userinput"
>/usr/local/bin/named -u 202 -t /var/named</KBD
></P
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="AEN4716"
>7.2.1. The <B
CLASS="command"
>chroot</B
> Environment</A
></H2
><P
>In order for a <B
CLASS="command"
>chroot()</B
> environment to
d121 1
a121 4
(for example, <TT
CLASS="filename"
>/var/named</TT
>),
d123 2
a124 11
<ACRONYM
CLASS="acronym"
>BIND</ACRONYM
> needs to run.
From <ACRONYM
CLASS="acronym"
>BIND</ACRONYM
>'s point of view, <TT
CLASS="filename"
>/var/named</TT
> is
d126 1
a126 7
like <B
CLASS="command"
>directory</B
> and <B
CLASS="command"
>pid-file</B
> to account
d128 4
a131 13
</P
><P
>&#13;Unlike with earlier versions of BIND, you will typically
<SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>not</I
></SPAN
> need to compile <B
CLASS="command"
>named</B
>
d135 12
a146 42
<TT
CLASS="filename"
>/dev/zero</TT
>,
<TT
CLASS="filename"
>/dev/random</TT
>,
<TT
CLASS="filename"
>/dev/log</TT
>, and/or
<TT
CLASS="filename"
>/etc/localtime</TT
>.
</P
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="AEN4734"
>7.2.2. Using the <B
CLASS="command"
>setuid</B
> Function</A
></H2
><P
>Prior to running the <B
CLASS="command"
>named</B
> daemon, use
the <B
CLASS="command"
>touch</B
> utility (to change file access and
modification times) or the <B
CLASS="command"
>chown</B
> utility (to
d148 2
a149 8
to which you want <ACRONYM
CLASS="acronym"
>BIND</ACRONYM
>
to write.  Note that if the <B
CLASS="command"
>named</B
> daemon is running as an
d151 7
a157 13
server is reloaded.</P
></DIV
></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="dynamic_update_security"
>7.3. Dynamic Update Security</A
></H1
><P
>Access to the dynamic
d159 1
a159 4
<ACRONYM
CLASS="acronym"
>BIND</ACRONYM
> the only way to do this was based on the IP
d161 1
a161 4
network prefix in the <B
CLASS="command"
>allow-update</B
> zone option.
d164 1
a164 4
<B
CLASS="command"
>allow-update</B
> option include the address of a slave
d168 2
a169 3
master to approve it without question.</P
><P
>For these reasons, we strongly recommend that updates be
d171 1
a171 4
(TSIG).  That is, the <B
CLASS="command"
>allow-update</B
> option should
d173 3
a175 7
prefixes. Alternatively, the new <B
CLASS="command"
>update-policy</B
>
option can be used.</P
><P
>Some sites choose to keep all dynamically updated DNS data
d179 22
a200 67
all.</P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="Bv9ARM.ch06.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="Bv9ARM.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="Bv9ARM.ch08.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><ACRONYM
CLASS="acronym"
>BIND</ACRONYM
> 9 Configuration Reference</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Troubleshooting</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>@


1.4
log
@resolve conflicts
@
text
@d92 1
a92 1
HREF="Bv9ARM.ch07.html#AEN4658"
d200 1
a200 1
NAME="AEN4658"
d278 1
a278 1
NAME="AEN4681"
d354 1
a354 1
NAME="AEN4699"
@


1.3
log
@update to BIND v9.2.3. ok todd@@
@
text
@d1 1
d8 1
a8 2
CONTENT="Modular DocBook HTML Stylesheet Version 1.73
"><LINK
d73 2
a74 1
>Chapter 7. <SPAN
d76 2
a77 3
>BIND</SPAN
> 9 Security Considerations</A
></H1
d92 1
a92 1
HREF="Bv9ARM.ch07.html#AEN4213"
d140 1
a140 1
your nameserver, without cluttering up your config files with huge
d200 1
a200 1
NAME="AEN4213"
d211 1
a211 1
>On UNIX servers, it is possible to run <SPAN
d213 1
a213 1
>BIND</SPAN
d224 1
a224 1
>) by specifying the "<TT
d226 1
a226 1
>-t</TT
d228 1
a228 1
option. This can help improve system security by placing <SPAN
d230 1
a230 1
>BIND</SPAN
d232 1
a232 1
a "sandbox," which will limit the damage done if a server is compromised.</P
d234 1
a234 1
>Another useful feature in the UNIX version of <SPAN
d236 1
a236 1
>BIND</SPAN
d238 1
a238 1
ability to run the daemon as a nonprivileged user ( <TT
d240 2
a241 2
>-u</TT
> <TT
d243 1
a243 3
><I
>user</I
></TT
d245 1
a245 1
We suggest running as a nonprivileged user when using the <B
d250 1
a250 1
>Here is an example command line to load <SPAN
d252 1
a252 1
>BIND</SPAN
d269 1
a269 1
><TT
d271 1
a271 3
><B
>/usr/local/bin/named -u 202 -t /var/named</B
></TT
d278 1
a278 1
NAME="AEN4236"
d295 1
a295 1
<SPAN
d297 1
a297 1
>BIND</SPAN
d299 1
a299 1
From <SPAN
d301 1
a301 1
>BIND</SPAN
d354 1
a354 1
NAME="AEN4254"
d374 1
a374 1
to which you want <SPAN
d376 1
a376 1
>BIND</SPAN
d381 2
a382 2
> daemon is running as a
nonprivileged user, it will not be able to bind to new restricted ports if the
d397 1
a397 1
<SPAN
d399 1
a399 1
>BIND</SPAN
d481 1
a481 1
><SPAN
d483 1
a483 1
>BIND</SPAN
@


1.2
log
@sync with 9.2.2-P3; new zone type "delegation-only"
discussed with deraadt@@, millert@@ and todd@@
@
text
@d92 1
a92 1
HREF="Bv9ARM.ch07.html#AEN4239"
d200 1
a200 1
NAME="AEN4239"
d282 1
a282 1
NAME="AEN4262"
d358 1
a358 1
NAME="AEN4280"
d504 1
a504 1
>
@


1.1
log
@Initial revision
@
text
@d92 1
a92 1
HREF="Bv9ARM.ch07.html#AEN4218"
d200 1
a200 1
NAME="AEN4218"
d282 1
a282 1
NAME="AEN4241"
d358 1
a358 1
NAME="AEN4259"
d504 1
a504 1
>@


1.1.1.1
log
@ISC BIND version 9.2.2rc1
@
text
@@


1.1.1.2
log
@ISC BIND version 9.3.0. ok deraadt@@
@
text
@a0 1
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
d7 2
a8 1
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
d73 1
a73 2
></A
>Chapter 7. <ACRONYM
d75 3
a77 2
>BIND</ACRONYM
> 9 Security Considerations</H1
d92 1
a92 1
HREF="Bv9ARM.ch07.html#AEN4658"
d140 1
a140 1
your name server, without cluttering up your config files with huge
d200 1
a200 1
NAME="AEN4658"
d211 1
a211 1
>On UNIX servers, it is possible to run <ACRONYM
d213 1
a213 1
>BIND</ACRONYM
d224 1
a224 1
>) by specifying the "<VAR
d226 1
a226 1
>-t</VAR
d228 1
a228 1
option. This can help improve system security by placing <ACRONYM
d230 1
a230 1
>BIND</ACRONYM
d232 1
a232 1
a "sandbox", which will limit the damage done if a server is compromised.</P
d234 1
a234 1
>Another useful feature in the UNIX version of <ACRONYM
d236 1
a236 1
>BIND</ACRONYM
d238 1
a238 1
ability to run the daemon as an unprivileged user ( <VAR
d240 2
a241 2
>-u</VAR
> <VAR
d243 3
a245 1
>user</VAR
d247 1
a247 1
We suggest running as an unprivileged user when using the <B
d252 1
a252 1
>Here is an example command line to load <ACRONYM
d254 1
a254 1
>BIND</ACRONYM
d271 1
a271 1
><KBD
d273 3
a275 1
>/usr/local/bin/named -u 202 -t /var/named</KBD
d282 1
a282 1
NAME="AEN4681"
d299 1
a299 1
<ACRONYM
d301 1
a301 1
>BIND</ACRONYM
d303 1
a303 1
From <ACRONYM
d305 1
a305 1
>BIND</ACRONYM
d358 1
a358 1
NAME="AEN4699"
d378 1
a378 1
to which you want <ACRONYM
d380 1
a380 1
>BIND</ACRONYM
d385 2
a386 2
> daemon is running as an
unprivileged user, it will not be able to bind to new restricted ports if the
d401 1
a401 1
<ACRONYM
d403 1
a403 1
>BIND</ACRONYM
d485 1
a485 1
><ACRONYM
d487 1
a487 1
>BIND</ACRONYM
@


1.1.1.3
log
@ISC BIND release 9.3.1. ok deraadt@@
@
text
@d92 1
a92 1
HREF="Bv9ARM.ch07.html#AEN4693"
d200 1
a200 1
NAME="AEN4693"
d278 1
a278 1
NAME="AEN4716"
d354 1
a354 1
NAME="AEN4734"
@


1.1.1.4
log
@ISC BIND release 9.3.2
@
text
@d1 139
a139 66
<!--
 - Copyright (C) 2004, 2005 Internet Systems Consortium, Inc. ("ISC")
 - Copyright (C) 2000-2003 Internet Software Consortium.
 - 
 - Permission to use, copy, modify, and distribute this software for any
 - purpose with or without fee is hereby granted, provided that the above
 - copyright notice and this permission notice appear in all copies.
 - 
 - THE SOFTWARE IS PROVIDED "AS IS" AND ISC DISCLAIMS ALL WARRANTIES WITH
 - REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
 - AND FITNESS. IN NO EVENT SHALL ISC BE LIABLE FOR ANY SPECIAL, DIRECT,
 - INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
 - LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE
 - OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
 - PERFORMANCE OF THIS SOFTWARE.
-->
<!-- $ISC: Bv9ARM.ch07.html,v 1.50.2.9.2.24 2005/10/13 02:34:02 marka Exp $ -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Chapter 7. BIND 9 Security Considerations</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.69.1">
<link rel="start" href="Bv9ARM.html" title="BIND 9 Administrator Reference Manual">
<link rel="up" href="Bv9ARM.html" title="BIND 9 Administrator Reference Manual">
<link rel="prev" href="Bv9ARM.ch06.html" title="Chapter 6. BIND 9 Configuration Reference">
<link rel="next" href="Bv9ARM.ch08.html" title="Chapter 8. Troubleshooting">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">Chapter 7. <span class="acronym">BIND</span> 9 Security Considerations</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="Bv9ARM.ch06.html">Prev</a> </td>
<th width="60%" align="center"> </th>
<td width="20%" align="right"> <a accesskey="n" href="Bv9ARM.ch08.html">Next</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="chapter" lang="en">
<div class="titlepage"><div><div><h2 class="title">
<a name="Bv9ARM.ch07"></a>Chapter 7. <span class="acronym">BIND</span> 9 Security Considerations</h2></div></div></div>
<div class="toc">
<p><b>Table of Contents</b></p>
<dl>
<dt><span class="sect1"><a href="Bv9ARM.ch07.html#Access_Control_Lists">Access Control Lists</a></span></dt>
<dt><span class="sect1"><a href="Bv9ARM.ch07.html#id2567222"><span><strong class="command">chroot</strong></span> and <span><strong class="command">setuid</strong></span> (for
UNIX servers)</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="Bv9ARM.ch07.html#id2567366">The <span><strong class="command">chroot</strong></span> Environment</a></span></dt>
<dt><span class="sect2"><a href="Bv9ARM.ch07.html#id2567424">Using the <span><strong class="command">setuid</strong></span> Function</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="Bv9ARM.ch07.html#dynamic_update_security">Dynamic Update Security</a></span></dt>
</dl>
</div>
<div class="sect1" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="Access_Control_Lists"></a>Access Control Lists</h2></div></div></div>
<p>Access Control Lists (ACLs), are address match lists that
you can set up and nickname for future use in <span><strong class="command">allow-notify</strong></span>,
<span><strong class="command">allow-query</strong></span>, <span><strong class="command">allow-recursion</strong></span>,
<span><strong class="command">blackhole</strong></span>, <span><strong class="command">allow-transfer</strong></span>,
etc.</p>
<p>Using ACLs allows you to have finer control over who can access
d141 9
a149 2
lists of IP addresses.</p>
<p>It is a <span class="emphasis"><em>good idea</em></span> to use ACLs, and to
d152 6
a157 4
your server.</p>
<p>Here is an example of how to properly apply ACLs:</p>
<pre class="programlisting">
// Set up an ACL named "bogusnets" that will block RFC1918 space,
d176 113
a288 26
</pre>
<p>This allows recursive queries of the server from the outside
unless recursion has been previously disabled.</p>
<p>For more information on how to use ACLs to protect your server,
see the <span class="emphasis"><em>AUSCERT</em></span> advisory at
<a href="ftp://ftp.auscert.org.au/pub/auscert/advisory/AL-1999.004.dns_dos" target="_top">ftp://ftp.auscert.org.au/pub/auscert/advisory/AL-1999.004.dns_dos</a></p>
</div>
<div class="sect1" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="id2567222"></a><span><strong class="command">chroot</strong></span> and <span><strong class="command">setuid</strong></span> (for
UNIX servers)</h2></div></div></div>
<p>On UNIX servers, it is possible to run <span class="acronym">BIND</span> in a <span class="emphasis"><em>chrooted</em></span> environment
(<span><strong class="command">chroot()</strong></span>) by specifying the "<code class="option">-t</code>"
option. This can help improve system security by placing <span class="acronym">BIND</span> in
a "sandbox", which will limit the damage done if a server is compromised.</p>
<p>Another useful feature in the UNIX version of <span class="acronym">BIND</span> is the
ability to run the daemon as an unprivileged user ( <code class="option">-u</code> <em class="replaceable"><code>user</code></em> ).
We suggest running as an unprivileged user when using the <span><strong class="command">chroot</strong></span> feature.</p>
<p>Here is an example command line to load <span class="acronym">BIND</span> in a <span><strong class="command">chroot()</strong></span> sandbox, 
<span><strong class="command">/var/named</strong></span>, and to run <span><strong class="command">named</strong></span> <span><strong class="command">setuid</strong></span> to
user 202:</p>
<p><strong class="userinput"><code>/usr/local/bin/named -u 202 -t /var/named</code></strong></p>
<div class="sect2" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="id2567366"></a>The <span><strong class="command">chroot</strong></span> Environment</h3></div></div></div>
<p>In order for a <span><strong class="command">chroot()</strong></span> environment to
d290 4
a293 1
(for example, <code class="filename">/var/named</code>),
d295 11
a305 2
<span class="acronym">BIND</span> needs to run.
From <span class="acronym">BIND</span>'s point of view, <code class="filename">/var/named</code> is
d307 7
a313 1
like <span><strong class="command">directory</strong></span> and <span><strong class="command">pid-file</strong></span> to account
d315 13
a327 4
</p>
<p>
Unlike with earlier versions of BIND, you will typically
<span class="emphasis"><em>not</em></span> need to compile <span><strong class="command">named</strong></span>
d331 42
a372 12
<code class="filename">/dev/zero</code>,
<code class="filename">/dev/random</code>,
<code class="filename">/dev/log</code>, and/or
<code class="filename">/etc/localtime</code>.
</p>
</div>
<div class="sect2" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="id2567424"></a>Using the <span><strong class="command">setuid</strong></span> Function</h3></div></div></div>
<p>Prior to running the <span><strong class="command">named</strong></span> daemon, use
the <span><strong class="command">touch</strong></span> utility (to change file access and
modification times) or the <span><strong class="command">chown</strong></span> utility (to
d374 8
a381 2
to which you want <span class="acronym">BIND</span>
to write.  Note that if the <span><strong class="command">named</strong></span> daemon is running as an
d383 13
a395 7
server is reloaded.</p>
</div>
</div>
<div class="sect1" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="dynamic_update_security"></a>Dynamic Update Security</h2></div></div></div>
<p>Access to the dynamic
d397 4
a400 1
<span class="acronym">BIND</span> the only way to do this was based on the IP
d402 4
a405 1
network prefix in the <span><strong class="command">allow-update</strong></span> zone option.
d408 4
a411 1
<span><strong class="command">allow-update</strong></span> option include the address of a slave
d415 3
a417 2
master to approve it without question.</p>
<p>For these reasons, we strongly recommend that updates be
d419 4
a422 1
(TSIG).  That is, the <span><strong class="command">allow-update</strong></span> option should
d424 7
a430 3
prefixes. Alternatively, the new <span><strong class="command">update-policy</strong></span>
option can be used.</p>
<p>Some sites choose to keep all dynamically updated DNS data
d434 67
a500 22
all.</p>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="Bv9ARM.ch06.html">Prev</a> </td>
<td width="20%" align="center"> </td>
<td width="40%" align="right"> <a accesskey="n" href="Bv9ARM.ch08.html">Next</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">Chapter 6. <span class="acronym">BIND</span> 9 Configuration Reference </td>
<td width="20%" align="center"><a accesskey="h" href="Bv9ARM.html">Home</a></td>
<td width="40%" align="right" valign="top"> Chapter 8. Troubleshooting</td>
</tr>
</table>
</div>
</body>
</html>
@


1.1.1.5
log
@ISC BIND release 9.3.3
@
text
@d2 1
a2 1
 - Copyright (C) 2004-2006 Internet Systems Consortium, Inc. ("ISC")
d17 1
a17 1
<!-- $ISC: Bv9ARM.ch07.html,v 1.50.2.9.2.33 2006/09/13 02:56:21 marka Exp $ -->
d22 1
a22 1
<meta name="generator" content="DocBook XSL Stylesheets V1.70.1">
d31 1
a31 1
<tr><th colspan="3" align="center">Chapter 7. <acronym class="acronym">BIND</acronym> 9 Security Considerations</th></tr>
d44 1
a44 1
<a name="Bv9ARM.ch07"></a>Chapter 7. <acronym class="acronym">BIND</acronym> 9 Security Considerations</h2></div></div></div>
d49 1
a49 1
<dt><span class="sect1"><a href="Bv9ARM.ch07.html#id2591971"><span><strong class="command">chroot</strong></span> and <span><strong class="command">setuid</strong></span> (for
d52 2
a53 2
<dt><span class="sect2"><a href="Bv9ARM.ch07.html#id2592046">The <span><strong class="command">chroot</strong></span> Environment</a></span></dt>
<dt><span class="sect2"><a href="Bv9ARM.ch07.html#id2592172">Using the <span><strong class="command">setuid</strong></span> Function</a></span></dt>
d71 2
a72 2
outside parties can help prevent spoofing and denial of service (DoS)
attacks against your server.</p>
a77 1

a88 1

d103 1
a103 1
<a name="id2591971"></a><span><strong class="command">chroot</strong></span> and <span><strong class="command">setuid</strong></span> (for
d105 3
a107 3
<p>On UNIX servers, it is possible to run <acronym class="acronym">BIND</acronym> in a <span class="emphasis"><em>chrooted</em></span> environment
(using the <span><strong class="command">chroot()</strong></span> function) by specifying the "<code class="option">-t</code>"
option. This can help improve system security by placing <acronym class="acronym">BIND</acronym> in
d109 1
a109 1
<p>Another useful feature in the UNIX version of <acronym class="acronym">BIND</acronym> is the
d112 1
a112 1
<p>Here is an example command line to load <acronym class="acronym">BIND</acronym> in a <span><strong class="command">chroot</strong></span> sandbox, 
d118 2
a119 2
<a name="id2592046"></a>The <span><strong class="command">chroot</strong></span> Environment</h3></div></div></div>
<p>In order for a <span><strong class="command">chroot</strong></span> environment to
d123 2
a124 2
<acronym class="acronym">BIND</acronym> needs to run.
From <acronym class="acronym">BIND</acronym>'s point of view, <code class="filename">/var/named</code> is
d137 1
a137 1
<code class="filename">/dev/log</code>, and
d143 1
a143 1
<a name="id2592172"></a>Using the <span><strong class="command">setuid</strong></span> Function</h3></div></div></div>
d148 1
a148 1
to which you want <acronym class="acronym">BIND</acronym>
d159 1
a159 1
<acronym class="acronym">BIND</acronym>, the only way to do this was based on the IP
d175 1
a175 1
<p>Some sites choose to keep all dynamically-updated DNS data
d193 1
a193 1
<td width="40%" align="left" valign="top">Chapter 6. <acronym class="acronym">BIND</acronym> 9 Configuration Reference </td>
@


1.1.1.6
log
@ISC BIND release 9.4.2
@
text
@d2 1
a2 1
 - Copyright (C) 2004-2007 Internet Systems Consortium, Inc. ("ISC")
d17 1
a17 1
<!-- $ISC: Bv9ARM.ch07.html,v 1.75.18.63 2007/10/31 01:35:59 marka Exp $ -->
d22 1
a22 1
<meta name="generator" content="DocBook XSL Stylesheets V1.71.1">
d49 2
a50 1
<dt><span class="sect1"><a href="Bv9ARM.ch07.html#id2592714"><span><strong class="command">Chroot</strong></span> and <span><strong class="command">Setuid</strong></span></a></span></dt>
d52 2
a53 2
<dt><span class="sect2"><a href="Bv9ARM.ch07.html#id2592791">The <span><strong class="command">chroot</strong></span> Environment</a></span></dt>
<dt><span class="sect2"><a href="Bv9ARM.ch07.html#id2592851">Using the <span><strong class="command">setuid</strong></span> Function</a></span></dt>
d61 13
a73 21
<p>
          Access Control Lists (ACLs), are address match lists that
          you can set up and nickname for future use in <span><strong class="command">allow-notify</strong></span>,
          <span><strong class="command">allow-query</strong></span>, <span><strong class="command">allow-recursion</strong></span>,
          <span><strong class="command">blackhole</strong></span>, <span><strong class="command">allow-transfer</strong></span>,
          etc.
        </p>
<p>
          Using ACLs allows you to have finer control over who can access
          your name server, without cluttering up your config files with huge
          lists of IP addresses.
        </p>
<p>
          It is a <span class="emphasis"><em>good idea</em></span> to use ACLs, and to
          control access to your server. Limiting access to your server by
          outside parties can help prevent spoofing and denial of service (DoS) attacks against
          your server.
        </p>
<p>
          Here is an example of how to properly apply ACLs:
        </p>
d75 3
a77 6
// Set up an ACL named "bogusnets" that will block RFC1918 space
// and some reserved space, which is commonly used in spoofing attacks.
acl bogusnets {
        0.0.0.0/8; 1.0.0.0/8; 2.0.0.0/8; 192.0.2.0/24; 224.0.0.0/3;
        10.0.0.0/8; 172.16.0.0/12; 192.168.0.0/16;
};
d80 1
a80 1
acl our-nets { x.x.x.x/24; x.x.x.x/21; };
d97 5
a101 11
<p>
          This allows recursive queries of the server from the outside
          unless recursion has been previously disabled.
        </p>
<p>
          For more information on how to use ACLs to protect your server,
          see the <span class="emphasis"><em>AUSCERT</em></span> advisory at:
        </p>
<p>
          <a href="ftp://ftp.auscert.org.au/pub/auscert/advisory/AL-1999.004.dns_dos" target="_top">ftp://ftp.auscert.org.au/pub/auscert/advisory/AL-1999.004.dns_dos</a>
        </p>
d105 13
a117 22
<a name="id2592714"></a><span><strong class="command">Chroot</strong></span> and <span><strong class="command">Setuid</strong></span>
</h2></div></div></div>
<p>
          On UNIX servers, it is possible to run <acronym class="acronym">BIND</acronym> in a <span class="emphasis"><em>chrooted</em></span> environment
          (using the <span><strong class="command">chroot()</strong></span> function) by specifying the "<code class="option">-t</code>"
          option. This can help improve system security by placing <acronym class="acronym">BIND</acronym> in
          a "sandbox", which will limit the damage done if a server is
          compromised.
        </p>
<p>
          Another useful feature in the UNIX version of <acronym class="acronym">BIND</acronym> is the
          ability to run the daemon as an unprivileged user ( <code class="option">-u</code> <em class="replaceable"><code>user</code></em> ).
          We suggest running as an unprivileged user when using the <span><strong class="command">chroot</strong></span> feature.
        </p>
<p>
          Here is an example command line to load <acronym class="acronym">BIND</acronym> in a <span><strong class="command">chroot</strong></span> sandbox,
          <span><strong class="command">/var/named</strong></span>, and to run <span><strong class="command">named</strong></span> <span><strong class="command">setuid</strong></span> to
          user 202:
        </p>
<p>
          <strong class="userinput"><code>/usr/local/bin/named -u 202 -t /var/named</code></strong>
        </p>
d120 22
a141 25
<a name="id2592791"></a>The <span><strong class="command">chroot</strong></span> Environment</h3></div></div></div>
<p>
            In order for a <span><strong class="command">chroot</strong></span> environment
            to
            work properly in a particular directory
            (for example, <code class="filename">/var/named</code>),
            you will need to set up an environment that includes everything
            <acronym class="acronym">BIND</acronym> needs to run.
            From <acronym class="acronym">BIND</acronym>'s point of view, <code class="filename">/var/named</code> is
            the root of the filesystem.  You will need to adjust the values of
            options like
            like <span><strong class="command">directory</strong></span> and <span><strong class="command">pid-file</strong></span> to account
            for this.
          </p>
<p>
            Unlike with earlier versions of BIND, you typically will
            <span class="emphasis"><em>not</em></span> need to compile <span><strong class="command">named</strong></span>
            statically nor install shared libraries under the new root.
            However, depending on your operating system, you may need
            to set up things like
            <code class="filename">/dev/zero</code>,
            <code class="filename">/dev/random</code>,
            <code class="filename">/dev/log</code>, and
            <code class="filename">/etc/localtime</code>.
          </p>
d145 9
a153 18
<a name="id2592851"></a>Using the <span><strong class="command">setuid</strong></span> Function</h3></div></div></div>
<p>
            Prior to running the <span><strong class="command">named</strong></span> daemon,
            use
            the <span><strong class="command">touch</strong></span> utility (to change file
            access and
            modification times) or the <span><strong class="command">chown</strong></span>
            utility (to
            set the user id and/or group id) on files
            to which you want <acronym class="acronym">BIND</acronym>
            to write.
          </p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Note</h3>
            Note that if the <span><strong class="command">named</strong></span> daemon is running as an
            unprivileged user, it will not be able to bind to new restricted
            ports if the server is reloaded.
          </div>
d159 23
a181 37
<p>
          Access to the dynamic
          update facility should be strictly limited.  In earlier versions of
          <acronym class="acronym">BIND</acronym>, the only way to do this was
          based on the IP
          address of the host requesting the update, by listing an IP address
          or
          network prefix in the <span><strong class="command">allow-update</strong></span>
          zone option.
          This method is insecure since the source address of the update UDP
          packet
          is easily forged.  Also note that if the IP addresses allowed by the
          <span><strong class="command">allow-update</strong></span> option include the
          address of a slave
          server which performs forwarding of dynamic updates, the master can
          be
          trivially attacked by sending the update to the slave, which will
          forward it to the master with its own source IP address causing the
          master to approve it without question.
        </p>
<p>
          For these reasons, we strongly recommend that updates be
          cryptographically authenticated by means of transaction signatures
          (TSIG).  That is, the <span><strong class="command">allow-update</strong></span>
          option should
          list only TSIG key names, not IP addresses or network
          prefixes. Alternatively, the new <span><strong class="command">update-policy</strong></span>
          option can be used.
        </p>
<p>
          Some sites choose to keep all dynamically-updated DNS data
          in a subdomain and delegate that subdomain to a separate zone. This
          way, the top-level zone containing critical data such as the IP
          addresses
          of public web and mail servers need not allow dynamic update at
          all.
        </p>
@


