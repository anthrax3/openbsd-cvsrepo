head	1.35;
access;
symbols
	OPENBSD_6_2:1.35.0.2
	OPENBSD_6_2_BASE:1.35
	OPENBSD_6_1:1.34.0.8
	OPENBSD_6_1_BASE:1.34
	OPENBSD_6_0:1.34.0.4
	OPENBSD_6_0_BASE:1.34
	OPENBSD_5_9:1.34.0.2
	OPENBSD_5_9_BASE:1.34
	OPENBSD_5_8:1.32.0.6
	OPENBSD_5_8_BASE:1.32
	OPENBSD_5_7:1.32.0.2
	OPENBSD_5_7_BASE:1.32
	OPENBSD_5_6:1.31.0.8
	OPENBSD_5_6_BASE:1.31
	OPENBSD_5_5:1.31.0.6
	OPENBSD_5_5_BASE:1.31
	OPENBSD_5_4:1.31.0.2
	OPENBSD_5_4_BASE:1.31
	OPENBSD_5_3:1.30.0.24
	OPENBSD_5_3_BASE:1.30
	OPENBSD_5_2:1.30.0.22
	OPENBSD_5_2_BASE:1.30
	OPENBSD_5_1_BASE:1.30
	OPENBSD_5_1:1.30.0.20
	OPENBSD_5_0:1.30.0.18
	OPENBSD_5_0_BASE:1.30
	OPENBSD_4_9:1.30.0.16
	OPENBSD_4_9_BASE:1.30
	OPENBSD_4_8:1.30.0.14
	OPENBSD_4_8_BASE:1.30
	OPENBSD_4_7:1.30.0.10
	OPENBSD_4_7_BASE:1.30
	OPENBSD_4_6:1.30.0.12
	OPENBSD_4_6_BASE:1.30
	OPENBSD_4_5:1.30.0.8
	OPENBSD_4_5_BASE:1.30
	OPENBSD_4_4:1.30.0.6
	OPENBSD_4_4_BASE:1.30
	OPENBSD_4_3:1.30.0.4
	OPENBSD_4_3_BASE:1.30
	OPENBSD_4_2:1.30.0.2
	OPENBSD_4_2_BASE:1.30
	OPENBSD_4_1:1.28.0.2
	OPENBSD_4_1_BASE:1.28
	OPENBSD_4_0:1.27.0.4
	OPENBSD_4_0_BASE:1.27
	OPENBSD_3_9:1.27.0.2
	OPENBSD_3_9_BASE:1.27
	OPENBSD_3_8:1.26.0.6
	OPENBSD_3_8_BASE:1.26
	OPENBSD_3_7:1.26.0.4
	OPENBSD_3_7_BASE:1.26
	OPENBSD_3_6:1.26.0.2
	OPENBSD_3_6_BASE:1.26
	OPENBSD_3_5:1.25.0.2
	OPENBSD_3_5_BASE:1.25
	OPENBSD_3_4:1.24.0.2
	OPENBSD_3_4_BASE:1.24
	OPENBSD_3_3:1.21.0.2
	OPENBSD_3_3_BASE:1.21
	OPENBSD_3_2:1.16.0.2
	OPENBSD_3_2_BASE:1.16
	OPENBSD_3_1:1.13.0.2
	OPENBSD_3_1_BASE:1.13
	OPENBSD_3_0:1.11.0.2
	OPENBSD_3_0_BASE:1.11
	OPENBSD_2_9_BASE:1.10
	OPENBSD_2_9:1.10.0.2
	OPENBSD_2_8:1.8.0.4
	OPENBSD_2_8_BASE:1.8
	OPENBSD_2_7:1.8.0.2
	OPENBSD_2_7_BASE:1.8
	OPENBSD_2_6:1.7.0.2
	OPENBSD_2_6_BASE:1.7
	OPENBSD_2_5:1.3.0.2
	OPENBSD_2_5_BASE:1.3
	OPENBSD_2_4:1.2.0.4
	OPENBSD_2_4_BASE:1.2
	OPENBSD_2_3:1.2.0.2
	OPENBSD_2_3_BASE:1.2
	OPENBSD_2_2:1.1.1.1.0.6
	OPENBSD_2_2_BASE:1.1.1.1
	OPENBSD_2_1:1.1.1.1.0.4
	OPENBSD_2_1_BASE:1.1.1.1
	OPENBSD_2_0:1.1.1.1.0.2
	OPENBSD_2_0_BASE:1.1.1.1
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@.\" @;


1.35
date	2017.06.08.17.13.39;	author millert;	state Exp;
branches;
next	1.34;
commitid	QDQTHhpiDUN9UWcl;

1.34
date	2015.11.12.21.14.01;	author jmc;	state Exp;
branches;
next	1.33;
commitid	JPieHupT0rbqmQWz;

1.33
date	2015.11.12.17.46.40;	author millert;	state Exp;
branches;
next	1.32;
commitid	mJQPioUnCvrvF4he;

1.32
date	2015.01.23.01.01.06;	author tedu;	state Exp;
branches;
next	1.31;
commitid	kzBIhYnXdVeOLxgw;

1.31
date	2013.07.16.11.13.33;	author schwarze;	state Exp;
branches;
next	1.30;

1.30
date	2007.05.31.19.20.23;	author jmc;	state Exp;
branches;
next	1.29;

1.29
date	2007.03.28.16.49.25;	author millert;	state Exp;
branches;
next	1.28;

1.28
date	2007.02.18.23.59.03;	author jmc;	state Exp;
branches;
next	1.27;

1.27
date	2005.11.30.11.18.28;	author jmc;	state Exp;
branches;
next	1.26;

1.26
date	2004.06.03.19.56.09;	author millert;	state Exp;
branches;
next	1.25;

1.25
date	2004.02.24.19.39.48;	author jmc;	state Exp;
branches;
next	1.24;

1.24
date	2003.06.17.21.56.26;	author millert;	state Exp;
branches;
next	1.23;

1.23
date	2003.06.12.12.59.50;	author jmc;	state Exp;
branches;
next	1.22;

1.22
date	2003.06.03.01.20.39;	author millert;	state Exp;
branches;
next	1.21;

1.21
date	2003.02.20.20.38.08;	author millert;	state Exp;
branches;
next	1.20;

1.20
date	2003.02.19.23.45.46;	author millert;	state Exp;
branches;
next	1.19;

1.19
date	2003.02.19.22.11.42;	author millert;	state Exp;
branches;
next	1.18;

1.18
date	2003.02.17.18.40.11;	author millert;	state Exp;
branches;
next	1.17;

1.17
date	2003.02.01.16.29.52;	author jmc;	state Exp;
branches;
next	1.16;

1.16
date	2002.07.15.19.13.29;	author millert;	state Exp;
branches;
next	1.15;

1.15
date	2002.07.08.18.11.02;	author millert;	state Exp;
branches;
next	1.14;

1.14
date	2002.05.09.21.22.01;	author millert;	state Exp;
branches;
next	1.13;

1.13
date	2001.12.20.23.27.47;	author millert;	state Exp;
branches;
next	1.12;

1.12
date	2001.12.13.19.38.42;	author millert;	state Exp;
branches;
next	1.11;

1.11
date	2001.08.02.18.37.34;	author mpech;	state Exp;
branches;
next	1.10;

1.10
date	2001.02.19.00.18.33;	author millert;	state Exp;
branches;
next	1.9;

1.9
date	2001.02.18.19.48.31;	author millert;	state Exp;
branches;
next	1.8;

1.8
date	2000.03.19.17.57.03;	author aaron;	state Exp;
branches;
next	1.7;

1.7
date	99.07.07.10.50.11;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	99.07.02.20.11.48;	author aaron;	state Exp;
branches;
next	1.5;

1.5
date	99.06.18.02.11.44;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	99.06.05.22.16.34;	author aaron;	state Exp;
branches;
next	1.3;

1.3
date	99.03.10.02.43.11;	author pjanzen;	state Exp;
branches;
next	1.2;

1.2
date	97.12.22.08.10.40;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.47.30;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.47.30;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.35
log
@update permissions info to match recent changes
@
text
@.\"
.\" Copyright (c) 2002-2003 Todd C. Miller <Todd.Miller@@courtesan.com>
.\"
.\" Permission to use, copy, modify, and distribute this software for any
.\" purpose with or without fee is hereby granted, provided that the above
.\" copyright notice and this permission notice appear in all copies.
.\"
.\" THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
.\" WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
.\" MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
.\" ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
.\" WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
.\" ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
.\" OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
.\"
.\" Sponsored in part by the Defense Advanced Research Projects
.\" Agency (DARPA) and Air Force Research Laboratory, Air Force
.\" Materiel Command, USAF, under agreement number F39502-99-1-0512.
.\"
.\" $OpenBSD: cron.8,v 1.34 2015/11/12 21:14:01 jmc Exp $
.\"
.Dd $Mdocdate: November 12 2015 $
.Dt CRON 8
.Os
.Sh NAME
.Nm cron
.Nd clock daemon
.Sh SYNOPSIS
.Nm cron
.Op Fl n
.Op Fl l Ar load_avg
.Sh DESCRIPTION
The
.Nm
daemon schedules commands to be run at specified dates and times.
Commands that are to be run periodically are specified within
.Xr crontab 5
files.
Commands that are only to be run once are scheduled via the
.Xr at 1
and
.Xr batch 1
commands.
Normally, the
.Nm
daemon is started from the
.Pa /etc/rc
command script.
Because it can execute commands on a user's behalf,
.Nm
should be run late in the startup sequence,
as close to the time when logins are accepted as possible.
.Pp
.Nm
loads
.Xr crontab 5
and
.Xr at 1
files when it starts up and also when changes are made via the
.Xr crontab 1
and
.Xr at 1
commands.
Additionally,
.Nm
checks the modification time on the system crontab file
.Pq Pa /etc/crontab ,
the crontab spool
.Pq Pa /var/cron/tabs ,
and the at spool
.Pq Pa /var/cron/atjobs
once a minute.
If the modification time has changed, the affected files are reloaded.
.Pp
Any output produced by a command is sent to the user specified in the
.Ev MAILTO
environment variable as set in the
.Xr crontab 5
file or, if no
.Ev MAILTO
variable is set (or if this is an
.Xr at 1
or
.Xr batch 1
job), to the job's owner.
If a command produces no output or if the
.Ev MAILTO
environment variable is set to the empty string, no mail will be sent.
The exception to this is
.Xr at 1
or
.Xr batch 1
jobs submitted with the
.Fl m
flag.
In this case, mail will be sent even if the job produces no output.
.Ss Daylight Saving Time and other time changes
Local time changes of less than three hours, such as those caused
by the start or end of Daylight Saving Time, are handled specially.
This only applies to jobs that run at a specific time and jobs that
are run with a granularity greater than one hour.
Jobs that run more frequently are scheduled normally.
.Pp
If time has moved forward, those jobs that would have run in the
interval that has been skipped will be run immediately.
Conversely, if time has moved backward, care is taken to avoid running
jobs twice.
.Pp
Time changes of more than 3 hours are considered to be corrections to
the clock or time zone, and the new time is used immediately.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl l Ar load_avg
If the current load average is greater than
.Ar load_avg ,
.Xr batch 1
jobs will not be run.
The default value is 1.5.
To allow
.Xr batch 1
jobs to run regardless of the load, a value of 0.0 may be used.
.It Fl n
By default,
.Nm
will detach from the current tty and become a daemon.
The
.Fl n
option disables this behavior and causes it to run in the foreground.
.El
.Sh FILES
.Bl -tag -width "/var/run/cron.sock" -compact
.It Pa /etc/crontab
system crontab file
.It Pa /var/cron/atjobs
directory containing
.Xr at 1
jobs
.It Pa /var/cron/log
cron's log file
.It Pa /var/cron/tabs
directory containing individual crontab files
.It Pa /var/run/cron.sock
used by
.Xr crontab 1
to tell
.Nm
to check for crontab changes immediately
.El
.Sh SEE ALSO
.Xr at 1 ,
.Xr crontab 1 ,
.Xr syslog 3 ,
.Xr crontab 5
.Sh AUTHORS
.An Paul Vixie Aq Mt vixie@@isc.org
.Sh CAVEATS
.Xr crontab 5
files will be ignored if they do not have the proper file mode.
For user crontab files created by
.Xr crontab 1 ,
the mode must be 0600.
If the system crontab file is used,
.Pa /etc/crontab
must not be writable by any user other than root and must not have
the execute, set-user-ID, set-group-ID or sticky bits set.
@


1.34
log
@new location for cron sockets; ok millert
@
text
@d20 1
a20 1
.\" $OpenBSD: cron.8,v 1.33 2015/11/12 17:46:40 millert Exp $
d162 1
a162 1
the mode must be 0400 or 0600.
d165 2
a166 1
must not be writable by any user other than root.
@


1.33
log
@Remove SIGNALS section now that the non-syslog code has been removed.
@
text
@d20 1
a20 1
.\" $OpenBSD: cron.8,v 1.32 2015/01/23 01:01:06 tedu Exp $
d22 1
a22 1
.Dd $Mdocdate: January 23 2015 $
d132 1
a132 1
.Bl -tag -width "/var/cron/tabs/.sock" -compact
d143 1
a143 1
.It Pa /var/cron/tabs/.sock
@


1.32
log
@remove debug code.
I think the level of debug code in cron is excessive for a program
that has reached feature complete. If cron needs to provide more
information to the user about its operational status, I think syslog
would be more appropriate. (The debug flags also disable forking
into the background, so they aren't even that useful for debugging a
live system.)
ok deraadt millert
@
text
@d20 1
a20 1
.\" $OpenBSD: cron.8,v 1.31 2013/07/16 11:13:33 schwarze Exp $
d22 1
a22 1
.Dd $Mdocdate: July 16 2013 $
a129 14
.El
.Sh SIGNALS
.Bl -tag -width Ds
.It Dv SIGHUP
causes
.Nm
to close and reopen its log file.
This is useful in scripts which rotate and age log files.
On
.Ox
this has no effect because
.Nm cron
logs via
.Xr syslog 3 .
@


1.31
log
@use .Mt for email addresses; from Jan Stary <hans at stare dot cz>; ok jmc@@
@
text
@d20 1
a20 1
.\" $OpenBSD: cron.8,v 1.30 2007/05/31 19:20:23 jmc Exp $
d22 1
a22 1
.Dd $Mdocdate: May 31 2007 $
a31 8
.Oo
.Fl x
.Sm off
.Oo Ar ext , sch , proc ,
.Ar pars , load , misc , test
.Oc
.Sm on
.Oc
a129 35
.It Fl x Ar debug_flags
If
.Nm
was compiled with debugging support, a number of debugging flags
are available to show what
.Nm
is doing.
The following flags may be specified:
.Bl -tag -width Ds
.It ext
show extended information; used in conjunction with other debug flags
to provide even more information
.It sch
print information related to scheduling jobs
.It proc
print information related to running processes
.It pars
print information related to parsing
.Xr crontab 5
files
.It load
print when loading the databases
.It misc
show misc other debugging information
.It test
test mode; don't actually execute commands
.El
.Pp
Multiple flags may be specified, separated by a comma
.Pq So , Sc .
Regardless of which flags were specified, the
.Fl x
flag will cause
.Nm
to stay in the foreground and not become a daemon.
@


1.30
log
@convert to new .Dd format;
@
text
@d20 1
a20 1
.\" $OpenBSD: cron.8,v 1.29 2007/03/28 16:49:25 millert Exp $
d22 1
a22 1
.Dd $Mdocdate$
d213 1
a213 1
.An Paul Vixie Aq vixie@@isc.org
@


1.29
log
@Since /etc/crontab is not edited via crontab(1) there's no good
reason to require its mode to be be 0400 or to bail if the link
count is != 1.  The reason for such paranoia all has to do with
crontab(1) and editing user crontab files.  We now only require
that /etc/crontab not be writable by anyone other than the owner.
OK deraadt@@ ajacoutot@@ jmc@@
@
text
@d20 1
a20 1
.\" $OpenBSD: cron.8,v 1.28 2007/02/18 23:59:03 jmc Exp $
d22 1
a22 1
.Dd July 6, 2002
@


1.28
log
@tidy up synopsis and usage();
@
text
@d20 1
a20 1
.\" $OpenBSD: cron.8,v 1.27 2005/11/30 11:18:28 jmc Exp $
a214 1
All
d216 5
a220 7
files must not be readable or writable by any user other than their owner,
including
.Pa /etc/crontab .
In practice this means they should be mode 0600.
This restriction is enforced automatically by
.Xr crontab 1
but if
d222 1
a222 1
is used, the mode must be set manually on that file.
@


1.27
log
@timezone -> time zone
@
text
@d20 1
a20 1
.\" $OpenBSD: cron.8,v 1.26 2004/06/03 19:56:09 millert Exp $
d30 1
d32 8
a39 2
.Op Fl n
.Op Fl x Ar [ext,sch,proc,pars,load,misc,test]
@


1.26
log
@Document behavior if MAILTO is set to the empty string.
@
text
@d20 1
a20 1
.\" $OpenBSD: cron.8,v 1.25 2004/02/24 19:39:48 jmc Exp $
d111 1
a111 1
the clock or timezone, and the new time is used immediately.
@


1.25
log
@remove reference to -x bit;
ok millert@@
@
text
@d20 1
a20 1
.\" $OpenBSD: cron.8,v 1.24 2003/06/17 21:56:26 millert Exp $
d87 3
a89 1
If a command produces no output, no mail will be sent.
@


1.24
log
@Sync with share/misc/license.template and add missing DARPA credit
where applicable.
@
text
@d20 1
a20 1
.\" $OpenBSD: cron.8,v 1.23 2003/06/12 12:59:50 jmc Exp $
d32 1
a32 1
.Op Fl x Ar [ext,sch,proc,pars,load,misc,test,bit]
@


1.23
log
@- section reorder
- macro fixes
- kill whitespace at EOL
- new sentence, new line
@
text
@d8 7
a14 7
.\" THE SOFTWARE IS PROVIDED "AS IS" AND TODD C. MILLER DISCLAIMS ALL
.\" WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL TODD C. MILLER BE LIABLE
.\" FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
.\" WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION
.\" OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN
.\" CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
d16 5
a20 1
.\" $OpenBSD: cron.8,v 1.22 2003/06/03 01:20:39 millert Exp $
@


1.22
log
@Don't need 'all right reserved'; brings this into line with my other
ISC-style copyrights.
@
text
@d16 1
a16 1
.\" $OpenBSD: cron.8,v 1.21 2003/02/20 20:38:08 millert Exp $
d96 2
a97 2
are run with a granularity greater than one hour.  Jobs that run
more frequently are scheduled normally.
d200 1
a200 1
Paul Vixie <vixie@@isc.org>
@


1.21
log
@Sync with ISC cron-current + my at(1) integration.
The at(1) code is now more tightly integrated into the cron codebase.
@
text
@a2 1
.\" All rights reserved.
d16 1
a16 1
.\" $OpenBSD: cron.8,v 1.20 2003/02/19 23:45:46 millert Exp $
@


1.20
log
@Mention that /etc/crontab must be mode 0600 if it exists.
@
text
@d2 1
a2 1
.\" Copyright (c) 2002 Todd C. Miller <Todd.Miller@@courtesan.com>
d5 3
a7 10
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. The name of the author may not be used to endorse or promote products
.\"    derived from this software without specific prior written permission.
d9 7
a15 10
.\" THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES,
.\" INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY
.\" AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL
.\" THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
.\" EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
.\" PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
.\" OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
.\" WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
.\" OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
.\" ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
d17 1
a17 1
.\" $OpenBSD: cron.8,v 1.19 2003/02/19 22:11:42 millert Exp $
@


1.19
log
@Move contents of /var/at into /var/cron since at is now intergrated into
cron.  When ISC cron 5.0 is out the integration will be even tighter.

Also rename /var/cron/{allow,deny} -> /var/cron/cron.{allow,deny}
for consistency with POSIX and at.{allow,deny} and install an empty
cron.deny file (as we do at.deny) since crontab will require this
in the near future for POSIX compliance.

After a "make build" you can update your system as follows:
# mv /var/at/* /var/cron
# mv /var/cron/jobs /var/cron/atjobs
# mv /var/cron.allow /var/cron/cron.allow
# mv /var/cron.deny /var/cron/cron.deny
# rm -rf /var/at
# kill `cat /var/run/cron.pid` ; cron
@
text
@d27 1
a27 1
.\" $OpenBSD: cron.8,v 1.18 2003/02/17 18:40:11 millert Exp $
d212 12
@


1.18
log
@Add a -n flag and version string; from vixie
@
text
@d27 1
a27 1
.\" $OpenBSD: cron.8,v 1.17 2003/02/01 16:29:52 jmc Exp $
d79 1
a79 1
.Pq Pa /var/at/jobs
d190 1
a190 1
.It Pa /var/at/jobs
@


1.17
log
@typos;
chat(8): removed reference to uucico(8)

ok deraadt@@
@
text
@d27 1
a27 1
.\" $OpenBSD: cron.8,v 1.16 2002/07/15 19:13:29 millert Exp $
d38 1
d129 7
@


1.16
log
@Move atrun(8) functionality into cron(8) proper.  This fixes the
long-standing annoyance that atrun's granularity is 10 minutes.
Most at jobs run with a 1 minute granularity.  Jobs submitted via
"at now" or "batch" will run immediately.  Includes a rewritten
cron(8) man page.  at(1) will be integrated more closely into
cron at a future date.

Upgrading notes:
    the atrun job in root's crontab should be removed.
    the /var/at/spool directory is no longer used
@
text
@d27 1
a27 1
.\" $OpenBSD: cron.8,v 1.15 2002/07/08 18:11:02 millert Exp $
d82 1
a82 1
Any output produced by a command is sent to the used specified in the
d94 1
a94 1
The exception to this are
d156 2
a157 2
Multiple flags may be specified, sepatated by a comma
.Pq So , Sc
@


1.15
log
@Merge in some changes from Paul Vixie's tree; most are cosmetic
o ANSI function headers
o return (foo) not return foo
o add -oi to sendmail flags
o update email address in man pages
o make some strings const
o completely remove globbing cruft from popen.c
o whitespace changes
o add DOW_STAR to flags for "monthly", "weekly", and "daily" cron entries
@
text
@a0 3
.\"/* Copyright 1988,1990,1993,1996 by Paul Vixie
.\" * All rights reserved
.\" */
d2 2
a3 1
.\" Copyright (c) 1997,2000 by Internet Software Consortium, Inc.
d5 10
a14 3
.\" Permission to use, copy, modify, and distribute this software for any
.\" purpose with or without fee is hereby granted, provided that the above
.\" copyright notice and this permission notice appear in all copies.
d16 10
a25 8
.\" THE SOFTWARE IS PROVIDED "AS IS" AND INTERNET SOFTWARE CONSORTIUM DISCLAIMS
.\" ALL WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL INTERNET SOFTWARE
.\" CONSORTIUM BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
.\" DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
.\" PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS
.\" ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS
.\" SOFTWARE.
d27 1
a27 1
.\" $OpenBSD: cron.8,v 1.14 2002/05/09 21:22:01 millert Exp $
d29 1
a29 1
.Dd June 6, 1999
d34 1
a34 1
.Nd daemon to execute scheduled commands (Vixie Cron)
d37 2
d40 1
d42 12
a53 1
should be started from
d55 1
a55 4
or
.Pa /etc/rc.local .
It will return immediately, so you don't need to start it with
.Ql \&& .
d62 1
a62 3
searches its spool directory
.Pf ( Pa /var/cron/tabs Ns )
for
d64 19
a82 12
files which are named after accounts in
.Pa /etc/passwd ;
crontabs found are loaded into memory.
.Nm
also searches for
.Pa /etc/crontab
which is in a different format (see
.Xr crontab 5 ) .
.Nm
then wakes up every minute, examining all loaded crontabs, checking each
command to see if it should be run in the current minute.
When executing commands, any output is mailed to the user named in the
d84 3
a86 1
environment variable in the crontab, or to the owner of the crontab if
d88 25
a112 1
is not present.
d114 16
a129 1
Additionally,
d131 2
a132 7
checks each minute to see if its spool directory's modtime (or the modtime on
.Pa /etc/crontab )
has changed, and if it has,
.Nm
examines the modtime on all crontabs and reloads those which have
changed.
Thus
d134 21
a154 5
need not be restarted whenever a crontab file is modified.
Note that the
.Xr crontab 1
command updates the modtime of the spool directory whenever it changes a
crontab.
d156 8
a163 18
Special considerations exist when the clock is changed by less than 3
hours; for example, at the beginning and end of Daylight Saving
Time.
If the time has moved forward, those jobs which would have
run in the time that was skipped will be run soon after the change.
Conversely, if the time has moved backward by less than 3 hours,
those jobs that fall into the repeated time will not be run.
.Pp
Only jobs that run at a particular time (not specified as @@hourly, nor with
.Ql *
in the hour or minute specifier)
are
affected.
Jobs which are specified with wildcards are run based on the
new time immediately.
.Pp
Clock changes of more than 3 hours are considered to be corrections to
the clock, and the new time is used immediately.
d180 6
d189 1
a189 1
directory of individual crontabs
d198 1
@


1.14
log
@crontab is no longer setuid root, it is now setgid crontab.
These changes were modelled after the Owl version of vixie-cron,
but developed independently.

Our crontab used to send cron SIGUSR1 to tell cron to reread the
spool dir.  Now that crontab is not setuid root this doesn't work.
Instead, crontab pokes cron via a Unix domain socket located in the
tabs dir.

Please note, after these changes, the owner on user crontab files
will have to be changed manually from root to the uid of the
corresponding user for crontab to be usable.  cron itself will accept
tab files owned by either root or the user.
Also, any /var/cron/{allow,deny} files must be readable by group crontab.
@
text
@d20 1
a20 1
.\" $OpenBSD: cron.8,v 1.13 2001/12/20 23:27:47 millert Exp $
d131 1
a131 1
Paul Vixie <paul@@vix.com>
@


1.13
log
@Cause crontab to send SIGUSR1 when a user's crontab file has changed.
In cron, this interrupts the sleep() in cron_sleep() and causes cron
to check to see what signal woke it up and act appropriately.
This makes crontab changes take effect more or immediately.
@
text
@d20 1
a20 1
.\" $OpenBSD: cron.8,v 1.12 2001/12/13 19:38:42 millert Exp $
d112 11
a122 2
.It Dv SIGUSR1
causes
d124 1
a124 3
to check its spool directory's modtime (and the modtime of
.Pa /etc/crontab )
at the next possible moment instead of waiting until the next minute.
@


1.12
log
@Mention that cron should be started late in the rc file and why.
@
text
@d20 1
a20 1
.\" $OpenBSD: cron.8,v 1.11 2001/08/02 18:37:34 mpech Exp $
d100 11
a110 5
On receipt of a
.Tn SIGHUP ,
the cron daemon will close and reopen its log file.
This is useful in scripts which rotate and age log files.  
Naturally this is not relevant if cron was built to use
d112 7
d121 1
@


1.11
log
@o) .Sh AUTHOR -> .Sh AUTHORS;
o) .Sh EXAMPLE -> .Sh EXAMPLES;
o) Delete .Sh OPTIONS. Text moved to .Sh DESCRIPTION;

millert@@ ok
@
text
@d20 1
a20 1
.\" $OpenBSD: cron.8,v 1.10 2001/02/19 00:18:33 millert Exp $
d38 4
@


1.10
log
@We handle the clock going backwards.
@
text
@d20 1
a20 1
.\" $OpenBSD: cron.8,v 1.9 2001/02/18 19:48:31 millert Exp $
d105 1
a105 1
.Sh AUTHOR
@


1.9
log
@Update to ISC cron 4.0b1 + our patches.  This is now under a BSD license.
I also fixed the signal handlers while I was at it.
@
text
@d20 1
a20 1
.\" $OpenBSD: cron.8,v 1.8 2000/03/19 17:57:03 aaron Exp $
a101 4
Sh BUGS
.Nm
will behave mysteriously if a system clock is reset backward by more than
59 seconds.  Smaller steps, or steps forward, are handled correctly.
@


1.8
log
@Remove hard sentence breaks. Add $OpenBSD$ tags where appropriate. Some other
cleanup along the way.
@
text
@d1 1
a1 1
.\"/* Copyright 1988,1990,1993 by Paul Vixie
a2 13
.\" *
.\" * Distribute freely, except: don't remove my name from the source or
.\" * documentation (don't take credit for my work), mark your changes (don't
.\" * get me blamed for your possible bugs), don't alter or remove this
.\" * notice.  May be sold if buildable source is provided to buyer.  No
.\" * warrantee of any kind, express or implied, is included with this
.\" * software; use at your own risk, responsibility for damages (if any) to
.\" * anyone resulting from the use of this software rests entirely with the
.\" * user.
.\" *
.\" * Send bug reports, bug fixes, enhancements, requests, flames, etc., and
.\" * I'll try to keep a version up to date.  I can be reached as follows:
.\" * Paul Vixie          <paul@@vix.com>          uunet!decwrl!vixie!paul
d5 16
a20 1
.\" $Id: cron.8,v 1.7 1999/07/07 10:50:11 aaron Exp $
d95 11
@


1.7
log
@The proper order of the ``introductory'' macros in a man page is .Dd/.Dt/.Os.
Out of the approximately 1450 man pages, only about 90 of them were wrong.
Thanks to kwesterback@@home.com for coming up with a script and patch to repair
this. The patch also inserted a .Os macro in the few man pages that were
missing one.
@
text
@d18 1
a18 1
.\" $Id: cron.8,v 1.6 1999/07/02 20:11:48 aaron Exp $
d52 2
a53 2
command to see if it should be run in the current minute. When executing
commands, any output is mailed to the user named in the
d66 2
a67 1
changed. Thus
d69 2
a70 1
need not be restarted whenever a crontab file is modified. Note that the
d77 2
a78 1
Time. If the time has moved forward, those jobs which would have
d87 2
a88 1
affected. Jobs which are specified with wildcards are run based on the
@


1.6
log
@consistent .Dd usage; proper format is: .Dd Month DD, YYYY
@
text
@d18 1
a18 1
.\" $Id: cron.8,v 1.5 1999/06/18 02:11:44 aaron Exp $
d21 1
a22 1
.Dt CRON 8
@


1.5
log
@new mandoc cron(8), crontab(1), and crontab(5) man pages; kwesterback@@home.com
@
text
@d18 1
a18 1
.\" $Id: cron.8,v 1.3 1999/03/10 02:43:11 pjanzen Exp $
d20 1
a20 1
.Dd 6 June, 1999
@


1.4
log
@remove trailing whitespace, some Nm cleanup
@
text
@d20 39
a58 23
.TH CRON 8 "20 December 1993"
.UC 4
.SH NAME
cron \- daemon to execute scheduled commands (Vixie Cron)
.SH SYNOPSIS
cron
.SH DESCRIPTION
.I Cron
should be started from /etc/rc or /etc/rc.local.  It will return immediately,
so you don't need to start it with '&'.
.PP
.I Cron
searches /var/cron/tabs for crontab files which are named after accounts in
/etc/passwd; crontabs found are loaded into memory.
.I Cron
also searches for /etc/crontab which is in a different format (see
.IR crontab(5)).
.I Cron
then wakes up every minute, examining all stored crontabs, checking each
command to see if it should be run in the current minute.  When executing
commands, any output is mailed to the owner of the crontab (or to the user
named in the MAILTO environment variable in the crontab, if such exists).
.PP
d60 3
a62 4
.I cron
checks each minute to see if its spool directory's modtime (or the modtime
on
.IR /etc/crontab)
d64 6
a69 6
.I cron
will then examine the modtime on all crontabs and reload those which have
changed.  Thus
.I cron
need not be restarted whenever a crontab file is modified.  Note that the
.IR Crontab (1)
d72 1
a72 1
.PP
d74 2
a75 2
hours, for example at the beginning and end of Daylight Saving
Time. If the time has moved forwards, those jobs which would have
d77 1
a77 1
Conversely, if the time has moved backwards by less than 3 hours,
d79 5
a83 3
.PP
Only jobs that run at a particular time (not specified as
@@hourly, nor with '*' in the hour or minute specifier) are
d86 1
a86 1
.PP
d89 4
a92 4
.SH "SEE ALSO"
crontab(1), crontab(5)
.SH AUTHOR
.nf
@


1.3
log
@Daylight Saving Time, not savings
@
text
@d17 3
a19 3
.\" 
.\" $Id: cron.8,v 1.2 1997/12/22 08:10:40 deraadt Exp $
.\" 
d61 1
a61 1
run in the time that was skipped will be run soon after the change. 
@


1.2
log
@handle timing normally except when clock jumps between 1 and 3 hours. If it
jumps, attempt as best as possible to gaurantee that jobs DO run, but only
run ONCE; patch by thompson@@.tgsoft.com
@
text
@d18 1
a18 1
.\" $Id: cron.8,v 1.1.1.1 1995/10/18 08:47:30 deraadt Exp $
d59 2
a60 2
hours, for example at the beginning and end of daylight savings
time. If the time has moved forwards, those jobs which would have
@


1.1
log
@Initial revision
@
text
@d18 1
a18 1
.\" $Id: cron.8,v 1.1.1.1 1994/01/05 20:40:13 jtc Exp $
d57 15
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
