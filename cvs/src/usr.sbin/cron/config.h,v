head	1.23;
access;
symbols
	OPENBSD_6_0:1.23.0.4
	OPENBSD_6_0_BASE:1.23
	OPENBSD_5_9:1.23.0.2
	OPENBSD_5_9_BASE:1.23
	OPENBSD_5_8:1.21.0.6
	OPENBSD_5_8_BASE:1.21
	OPENBSD_5_7:1.21.0.2
	OPENBSD_5_7_BASE:1.21
	OPENBSD_5_6:1.17.0.44
	OPENBSD_5_6_BASE:1.17
	OPENBSD_5_5:1.17.0.42
	OPENBSD_5_5_BASE:1.17
	OPENBSD_5_4:1.17.0.38
	OPENBSD_5_4_BASE:1.17
	OPENBSD_5_3:1.17.0.36
	OPENBSD_5_3_BASE:1.17
	OPENBSD_5_2:1.17.0.34
	OPENBSD_5_2_BASE:1.17
	OPENBSD_5_1_BASE:1.17
	OPENBSD_5_1:1.17.0.32
	OPENBSD_5_0:1.17.0.30
	OPENBSD_5_0_BASE:1.17
	OPENBSD_4_9:1.17.0.28
	OPENBSD_4_9_BASE:1.17
	OPENBSD_4_8:1.17.0.26
	OPENBSD_4_8_BASE:1.17
	OPENBSD_4_7:1.17.0.22
	OPENBSD_4_7_BASE:1.17
	OPENBSD_4_6:1.17.0.24
	OPENBSD_4_6_BASE:1.17
	OPENBSD_4_5:1.17.0.20
	OPENBSD_4_5_BASE:1.17
	OPENBSD_4_4:1.17.0.18
	OPENBSD_4_4_BASE:1.17
	OPENBSD_4_3:1.17.0.16
	OPENBSD_4_3_BASE:1.17
	OPENBSD_4_2:1.17.0.14
	OPENBSD_4_2_BASE:1.17
	OPENBSD_4_1:1.17.0.12
	OPENBSD_4_1_BASE:1.17
	OPENBSD_4_0:1.17.0.10
	OPENBSD_4_0_BASE:1.17
	OPENBSD_3_9:1.17.0.8
	OPENBSD_3_9_BASE:1.17
	OPENBSD_3_8:1.17.0.6
	OPENBSD_3_8_BASE:1.17
	OPENBSD_3_7:1.17.0.4
	OPENBSD_3_7_BASE:1.17
	OPENBSD_3_6:1.17.0.2
	OPENBSD_3_6_BASE:1.17
	OPENBSD_3_5:1.16.0.4
	OPENBSD_3_5_BASE:1.16
	OPENBSD_3_4:1.16.0.2
	OPENBSD_3_4_BASE:1.16
	OPENBSD_3_3:1.15.0.2
	OPENBSD_3_3_BASE:1.15
	OPENBSD_3_2:1.13.0.2
	OPENBSD_3_2_BASE:1.13
	OPENBSD_3_1:1.10.0.4
	OPENBSD_3_1_BASE:1.10
	OPENBSD_3_0:1.10.0.2
	OPENBSD_3_0_BASE:1.10
	OPENBSD_2_9_BASE:1.9
	OPENBSD_2_9:1.9.0.2
	OPENBSD_2_8:1.5.0.2
	OPENBSD_2_8_BASE:1.5
	OPENBSD_2_7:1.4.0.4
	OPENBSD_2_7_BASE:1.4
	OPENBSD_2_6:1.4.0.2
	OPENBSD_2_6_BASE:1.4
	OPENBSD_2_5:1.2.0.6
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.2.0.4
	OPENBSD_2_4_BASE:1.2
	OPENBSD_2_3:1.2.0.2
	OPENBSD_2_3_BASE:1.2
	OPENBSD_2_2:1.1.1.1.0.6
	OPENBSD_2_2_BASE:1.1.1.1
	OPENBSD_2_1:1.1.1.1.0.4
	OPENBSD_2_1_BASE:1.1.1.1
	OPENBSD_2_0:1.1.1.1.0.2
	OPENBSD_2_0_BASE:1.1.1.1
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@ * @;


1.23
date	2015.10.23.18.42.55;	author tedu;	state Exp;
branches;
next	1.22;
commitid	XKGk51XvBaSkXmrX;

1.22
date	2015.10.06.14.58.37;	author tedu;	state Exp;
branches;
next	1.21;
commitid	DORRwC1MyrO1Yl4N;

1.21
date	2015.02.09.23.00.14;	author deraadt;	state Exp;
branches;
next	1.20;
commitid	822YD61EeG0Xl9Na;

1.20
date	2015.02.09.22.35.08;	author deraadt;	state Exp;
branches;
next	1.19;
commitid	eGq01x6bjr83TVho;

1.19
date	2015.01.23.01.01.06;	author tedu;	state Exp;
branches;
next	1.18;
commitid	kzBIhYnXdVeOLxgw;

1.18
date	2015.01.14.17.27.51;	author millert;	state Exp;
branches;
next	1.17;
commitid	29asVUstLv6pyoCO;

1.17
date	2004.06.17.22.11.55;	author millert;	state Exp;
branches;
next	1.16;

1.16
date	2003.04.14.15.58.13;	author millert;	state Exp;
branches;
next	1.15;

1.15
date	2003.02.20.20.38.08;	author millert;	state Exp;
branches;
next	1.14;

1.14
date	2003.02.20.19.12.16;	author millert;	state Exp;
branches;
next	1.13;

1.13
date	2002.07.15.19.13.29;	author millert;	state Exp;
branches;
next	1.12;

1.12
date	2002.07.08.23.42.17;	author millert;	state Exp;
branches;
next	1.11;

1.11
date	2002.07.08.18.11.02;	author millert;	state Exp;
branches;
next	1.10;

1.10
date	2001.05.29.21.41.33;	author millert;	state Exp;
branches;
next	1.9;

1.9
date	2001.02.19.14.33.32;	author millert;	state Exp;
branches;
next	1.8;

1.8
date	2001.02.18.20.28.45;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	2001.02.18.20.14.01;	author millert;	state Exp;
branches;
next	1.6;

1.6
date	2001.02.18.19.48.31;	author millert;	state Exp;
branches;
next	1.5;

1.5
date	2000.08.20.18.42.42;	author millert;	state Exp;
branches;
next	1.4;

1.4
date	99.08.29.08.51.55;	author millert;	state Exp;
branches;
next	1.3;

1.3
date	99.08.28.20.13.13;	author millert;	state Exp;
branches;
next	1.2;

1.2
date	98.03.30.06.59.41;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.47.30;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.47.30;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.23
log
@remove some more ifdef maziness
@
text
@/*	$OpenBSD: config.h,v 1.22 2015/10/06 14:58:37 tedu Exp $	*/

/* Copyright 1988,1990,1993,1994 by Paul Vixie
 * Copyright (c) 2004 by Internet Systems Consortium, Inc. ("ISC")
 * Copyright (c) 1997,2000 by Internet Software Consortium, Inc.
 *
 * Permission to use, copy, modify, and distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND ISC DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS.  IN NO EVENT SHALL ISC BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 */

/*
 * these are site-dependent
 */

			/*
			 * choose one of these mailer commands.  some use
			 * /bin/mail for speed; it makes biff bark but doesn't
			 * do aliasing.  sendmail does do aliasing but is
			 * a hog for short messages.  aliasing is not needed
			 * if you make use of the MAILTO= feature in crontabs.
			 * (hint: MAILTO= was added for this reason).
			 */

#define MAILFMT "%s -FCronDaemon -odi -oem -oi -t"	/*-*/
			/* -Fx	 = set full-name of sender
			 * -odi	 = Option Deliverymode Interactive
			 * -oem	 = Option Errors Mailedtosender
			 * -oi   = Ignore "." alone on a line
			 * -t    = Get recipient from headers
			 */
#define MAILARG _PATH_SENDMAIL				/*-*/

			/* maximum load at which batch jobs will still run */
#define BATCH_MAXLOAD	1.5		/*-*/

			/* Define this to run crontab setgid instead of
			 * setuid root.  Group access will be used to read
			 * the tabs/atjobs dirs and the allow/deny files.
			 * If this is not defined then crontab and at
			 * must be setuid root.
			 */
#define CRON_GROUP	"crontab"	/*-*/
@


1.22
log
@clear out some more legacy code and whatnot
@
text
@d1 1
a1 1
/*	$OpenBSD: config.h,v 1.21 2015/02/09 23:00:14 deraadt Exp $	*/
a40 14

/* #define MAILFMT "%s -d %s"				-*/
			/* -d = undocumented but common flag: deliver locally?
			 */
/* #define MAILARG "/bin/mail",mailto			-*/

/* #define MAILFMT "%s -mlrxto %s"			-*/
/* #define MAILARG "/usr/mmdf/bin/submit",mailto	-*/

			/* if your OS has the paths.h header */
#define HAVE_PATHS_H			/*-*/

			/* if your OS has a getloadavg() function */
#define HAVE_GETLOADAVG			/*-*/
@


1.21
log
@clean up flags++ instances around getopt()
ok florian
@
text
@d1 1
a1 1
/*	$OpenBSD: config.h,v 1.20 2015/02/09 22:35:08 deraadt Exp $	*/
a19 3
/* config.h - configurables for ISC Cron
 */

a49 27
/* #define MAIL_DATE				-*/
			/* should we include an ersatz Date: header in
			 * generated mail?  if you are using sendmail
			 * as the mailer, it is better to let sendmail
			 * generate the Date: header.
			 */

			/* if you want to use syslog(3) instead of appending
			 * to CRONDIR/LOG_FILE (/var/cron/log, e.g.), define
			 * SYSLOG here.  Note that quite a bit of logging
			 * info is written, and that you probably don't want
			 * to use this on 4.2bsd since everything goes in
			 * /usr/spool/mqueue/syslog.  On 4.[34]bsd you can
			 * tell /etc/syslog.conf to send cron's logging to
			 * a separate file.
			 *
			 * Note that if this and LOG_FILE in "pathnames.h"
			 * are both defined, then logging will go to both
			 * places.
			 */
#define SYSLOG				/*-*/

			/* if you have a tm_gmtoff member in struct tm.
			 * If not, we will have to compute the value ourselves.
			 */
#define HAVE_TM_GMTOFF			/*-*/

a52 6
			/* if your OS supports a BSD-style login.conf file */
#define LOGIN_CAP			/*-*/

			/* if your OS supports BSD authentication */
#define BSD_AUTH			/*-*/

a54 6

			/* if your OS has a setlogin() function */
#define HAVE_SETLOGIN			/*-*/

			/* if your OS has a pw_expire field in struct passwd */
#define HAVE_PW_EXPIRE			/*-*/
@


1.20
log
@correct copyright, upon approval from paul vixie via todd miller.  the
head copyright assertion was seperated from the remaining ones.
@
text
@d1 1
a1 1
/*	$OpenBSD: config.h,v 1.19 2015/01/23 01:01:06 tedu Exp $	*/
d73 1
a73 1
#define SYSLOG	 			/*-*/
d78 1
a78 1
#define HAVE_TM_GMTOFF		 	/*-*/
@


1.19
log
@remove debug code.
I think the level of debug code in cron is excessive for a program
that has reached feature complete. If cron needs to provide more
information to the user about its operational status, I think syslog
would be more appropriate. (The debug flags also disable forking
into the background, so they aren't even that useful for debugging a
live system.)
ok deraadt millert
@
text
@d1 1
a1 1
/*	$OpenBSD: config.h,v 1.18 2015/01/14 17:27:51 millert Exp $	*/
a3 4
 * All rights reserved
 */

/*
@


1.18
log
@Use HAVE_FOO for BSD-specific features instead of relying on the
BSD macro from sys/param.h.
@
text
@d1 1
a1 1
/*	$OpenBSD: config.h,v 1.17 2004/06/17 22:11:55 millert Exp $	*/
a29 4

#ifndef DEBUGGING
#define DEBUGGING 1	/* 1 or 0 -- do you want debugging code built in? */
#endif
@


1.17
log
@UUpdate ISC copyright year to 2004
Remove unused macros Skip_Line and MkLower
Remove trailing whitespace
@
text
@d1 1
a1 1
/*	$OpenBSD: config.h,v 1.16 2003/04/14 15:58:13 millert Exp $	*/
d88 3
d99 6
@


1.16
log
@Use setproctitle() instead of the CAPITALIZE_FOR_PS hack.  Inspired
by similar changes in FreeBSD and NetBSD.  For at jobs, include the
job number in the proctitle.
@
text
@d1 1
a1 1
/*	$OpenBSD: config.h,v 1.15 2003/02/20 20:38:08 millert Exp $	*/
d8 1
d15 7
a21 8
 * THE SOFTWARE IS PROVIDED "AS IS" AND INTERNET SOFTWARE CONSORTIUM DISCLAIMS
 * ALL WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES
 * OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL INTERNET SOFTWARE
 * CONSORTIUM BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
 * DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
 * PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS
 * ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS
 * SOFTWARE.
@


1.15
log
@Sync with ISC cron-current + my at(1) integration.
The at(1) code is now more tightly integrated into the cron codebase.
@
text
@d1 1
a1 1
/*	$OpenBSD: config.h,v 1.14 2003/02/20 19:12:16 millert Exp $	*/
a81 5

			/* if you want cron to capitalize its name in ps
			 * when running a job.  Does not work on SYSV.
			 */
#define CAPITALIZE_FOR_PS	 	/*-*/
@


1.14
log
@If there is no cron.allow or cron.deny file, only the superuser may run
the crontab command; for POSIX compliance.  Create an empty cron.deny
file to allow any user to run crontab:
    install -c -o root -g crontab -m 660 /dev/null /var/cron/cron.deny
@
text
@d1 1
a1 1
/*	$OpenBSD: config.h,v 1.13 2002/07/15 19:13:29 millert Exp $	*/
d24 1
a24 1
/* config.h - configurables for ISC cron
d83 3
d88 3
d99 3
d103 9
a111 1
#define BATCH_MAXLOAD	1.5
@


1.13
log
@Move atrun(8) functionality into cron(8) proper.  This fixes the
long-standing annoyance that atrun's granularity is 10 minutes.
Most at jobs run with a 1 minute granularity.  Jobs submitted via
"at now" or "batch" will run immediately.  Includes a rewritten
cron(8) man page.  at(1) will be integrated more closely into
cron at a future date.

Upgrading notes:
    the atrun job in root's crontab should be removed.
    the /var/at/spool directory is no longer used
@
text
@d1 1
a1 1
/*	$OpenBSD: config.h,v 1.12 2002/07/08 23:42:17 millert Exp $	*/
a66 6

			/* if ALLOW_FILE and DENY_FILE are not defined or are
			 * defined but neither exists, should crontab(1) be
			 * usable only by root?
			 */
/*#define ALLOW_ONLY_ROOT			-*/
@


1.12
log
@minor cosmetic change to reduce diffs
@
text
@d1 1
a1 1
/*	$OpenBSD: config.h,v 1.11 2002/07/08 18:11:02 millert Exp $	*/
d24 1
a24 1
/* config.h - configurables for Vixie Cron
d98 3
@


1.11
log
@Merge in some changes from Paul Vixie's tree; most are cosmetic
o ANSI function headers
o return (foo) not return foo
o add -oi to sendmail flags
o update email address in man pages
o make some strings const
o completely remove globbing cruft from popen.c
o whitespace changes
o add DOW_STAR to flags for "monthly", "weekly", and "daily" cron entries
@
text
@d1 1
a1 1
/*	$OpenBSD: config.h,v 1.10 2001/05/29 21:41:33 millert Exp $	*/
d6 1
@


1.10
log
@build with BSD auth support
@
text
@d1 1
a1 1
/*	$OpenBSD: config.h,v 1.9 2001/02/19 14:33:32 millert Exp $	*/
d43 1
a43 1
#define MAILFMT "%s -FCronDaemon -odi -oem -t"		/*-*/
d47 1
@


1.9
log
@Normalize the time in minutes to GMT so we can really catch DST changes
(since time() does not change during a DST switch).  This makes cron
correctly detect DST changes.  It does not fix the problem of wildcard
jobs running multiple times.  Also, don't rely on tm_gmtoff since that
is non-standard (but use it when we have it).
@
text
@d1 1
a1 1
/*	$OpenBSD: config.h,v 1.8 2001/02/18 20:28:45 millert Exp $	*/
d95 1
a95 1
/*#define BSD_AUTH			-*/
@


1.8
log
@Don't run sendmail with the -or0s arg since it causes sendmail to
drop root privileges when specified on the command line.
@
text
@d1 1
a1 1
/*	$OpenBSD: config.h,v 1.7 2001/02/18 20:14:01 millert Exp $	*/
d88 2
@


1.7
log
@Define CAPITALIZE_FOR_PS so children are capitalized in ps (like before).
@
text
@d1 1
a1 1
/*	$OpenBSD: config.h,v 1.6 2001/02/18 19:48:31 millert Exp $	*/
d43 1
a43 1
#define MAILFMT "%s -FCronDaemon -odi -oem -or0s -t"	/*-*/
a46 1
			 * -or0s = Option Readtimeout -- don't time out
@


1.6
log
@Update to ISC cron 4.0b1 + our patches.  This is now under a BSD license.
I also fixed the signal handlers while I was at it.
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
d87 2
@


1.5
log
@Add calls to setusercontext() and login_get*().  We basically call
setusercontext() in most places where previously we did a setlogin().
Add default login.conf file and put root in the "daemon" login class.
@
text
@d1 2
d5 3
d9 3
a11 8
 * Distribute freely, except: don't remove my name from the source or
 * documentation (don't take credit for my work), mark your changes (don't
 * get me blamed for your possible bugs), don't alter or remove this
 * notice.  May be sold if buildable source is provided to buyer.  No
 * warrantee of any kind, express or implied, is included with this
 * software; use at your own risk, responsibility for damages (if any) to
 * anyone resulting from the use of this software rests entirely with the
 * user.
d13 8
a20 3
 * Send bug reports, bug fixes, enhancements, requests, flames, etc., and
 * I'll try to keep a version up to date.  I can be reached as follows:
 * Paul Vixie          <paul@@vix.com>          uunet!decwrl!vixie!paul
a23 2
 *
 * $Id: config.h,v 1.4 1999/08/29 08:51:55 millert Exp $
a25 4
#if !defined(_PATH_SENDMAIL)
# define _PATH_SENDMAIL "/usr/lib/sendmail"
#endif /*SENDMAIL*/

d35 1
a35 1
			 * choose one of these MAILCMD commands.  I use
d37 1
a37 1
			 * do aliasing.  /usr/lib/sendmail does aliasing but is
d43 1
a43 2
#define MAILCMD _PATH_SENDMAIL					/*-*/
#define MAILARGS "%s -FCronDaemon -odi -oem -oi -t"		/*-*/
d47 2
a48 4
			 * -t    = read recipient from header of message
			 * NOTE: since this runs as the user, not root you must
			 *       not specify any args that will cause sendmail
			 *       to drop its suidness (see op.me for a list).
d50 1
d52 1
a52 2
/* #define MAILCMD "/bin/mail"			-*/
/* #define MAILARGS "%s -d  %s"			-*/
d55 1
d57 2
a58 2
/* #define MAILCMD "/usr/mmdf/bin/submit"	-*/
/* #define MAILARGS "%s -mlrxto %s"		-*/
d63 1
a63 1
			 * for MAILCMD, it is better to let sendmail
d89 4
a92 1
#define LOGIN_CAP	 		/*-*/
@


1.4
log
@Add comment to remind people not to use args in MAILARGS that will
cause sendmail to drop it's setuid privs.
@
text
@d20 1
a20 1
 * $Id: config.h,v 1.3 1999/08/28 20:13:13 millert Exp $
d90 3
@


1.3
log
@Run sendmail as the user corresponding to the crontab entry.
This keeps a user from abusing sendmail via the MAILTO var.
Had to drop -or0s from MAILARGS since that causes sendmail
to drop its privs (contrary to the sendmail docs).
@
text
@d20 1
a20 1
 * $Id: config.h,v 1.2 1998/03/30 06:59:41 deraadt Exp $
a48 2
			 * -or0s = Option Readtimeout -- don't time out
			 *	   XXX - causes sendmail to drop privs.
d50 3
@


1.2
log
@Y2K fixes from Andreas.Gunnarsson@@emw.ericsson.se; culled from various places
@
text
@d20 1
a20 1
 * $Id: config.h,v 1.1.1.1 1995/10/18 08:47:30 deraadt Exp $
d45 1
a45 1
#define MAILARGS "%s -FCronDaemon -odi -oem -oi -or0s -t"	/*-*/
d50 1
@


1.1
log
@Initial revision
@
text
@d20 1
a20 1
 * $Id: config.h,v 1.3 1995/04/14 19:49:32 mycroft Exp $
d53 2
a54 2
/* #define MAILCMD "/bin/mail"			/*-*/
/* #define MAILARGS "%s -d  %s"			/*-*/
d58 2
a59 2
/* #define MAILCMD "/usr/mmdf/bin/submit"	/*-*/
/* #define MAILARGS "%s -mlrxto %s"		/*-*/
d61 1
a61 1
/* #define MAIL_DATE				/*-*/
d72 1
a72 1
/*#define ALLOW_ONLY_ROOT			/*-*/
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
