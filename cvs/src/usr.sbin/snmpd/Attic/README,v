head	1.7;
access;
symbols;
locks; strict;
comment	@# @;


1.7
date	2008.01.21.23.35.58;	author reyk;	state dead;
branches;
next	1.6;

1.6
date	2008.01.21.23.33.39;	author reyk;	state Exp;
branches;
next	1.5;

1.5
date	2008.01.09.12.16.58;	author reyk;	state Exp;
branches;
next	1.4;

1.4
date	2007.12.28.17.26.09;	author reyk;	state Exp;
branches;
next	1.3;

1.3
date	2007.12.05.22.52.50;	author reyk;	state Exp;
branches;
next	1.2;

1.2
date	2007.12.05.16.03.42;	author reyk;	state Exp;
branches;
next	1.1;

1.1
date	2007.12.05.09.22.44;	author reyk;	state Exp;
branches;
next	;


desc
@@


1.7
log
@move README to the Attic; ask me directly if you need to know about
the TODOs and remaining issues.
@
text
@# $OpenBSD: README,v 1.6 2008/01/21 23:33:39 reyk Exp $

SNMP daemon
-----------

(Scary Network Management Protocol Daemon)

	This is the very experimental implementation of a simple SNMP daemon.
	Even if SNMP is not our favorite protocol, it is a very important
	key requirement in many corporate networks; sync to reality. And
	we don't want to rely on horrid SNMP implementations in this case.

DESIGN

	The main amazingly new thing is that this daemon will use the imsg
	privsep approach using several different processes ("engines") to
	separate privileges when handling the requests.

	It uses a new ASN.1/BER implementation to parse and create the SNMP
	messages. It is a simple implementation which does what we need.

	I may change the layout to look a bit more like RFC 2271. But
	the proposed design in RFC 2271 is a bad joke; it uses too many
	subsystems with the requirement to communicate with ASN.1/BER
	messages.

	The following picture is based on section 3.1 of RFC 2271 describing
	the proposed design of SNMPv3 entities and the current mapping in
        snmpd:

        +-------------------------------------------------------------------+
        |  SNMP entity (snmpd(8))                                           |
        |  snmpd(8)                                                         |
        |  +-------------------------------------------------------------+  |
        |  |  SNMP engine (identified by snmpEngineID)                   |  |
        |  |  snmpe.c                                                    |  |
        |  |  +------------+ +------------+ +-----------+-+-----------+  |  |
        |  |  |            | |            | |           |\            |  |  |
        |  |  | Dispatcher | | Message    | | Security  | | Access    |  |  |
        |  |  |            | | Processing | | Subsystem | | Control   |  |  |
        |  |  | IMSG,      | | Subsystem  | |           | | Subsystem |  |  |
        |  |  | event(3)   | | mps.c      | | TODO       \|           |  |  |
        |  |  +------------+ +------------+ +-----------+-+-----------+  |  |
        |  |        ||           ||   |                                  |  |
        |  +--------||-----------||---|----------------------------------+  |
        |           ||           ||   |                                     |
        |           ||           ||   | --> application                     |
        |           ||           ||   |     (unpriv, functions calls)       |
        |           ||           ||   |                                     |
        |           ||           || ------> application                     |
        |           ||           ||   |     (priv, IMSGs to snmpd.c)        |
        |           ||           ||   |                                     |
        .           ||--------------------> external application            .
        .           ||           ||   |     (IMSGs via /var/run/snmpd.sock) .
        .           ||           ||   |                                     .
        .  +--------||-----------||---|----------------------------------+  .
        |  |  Application(s)                                             |  |
        |  |  snmpd.c, snmpctl(8), possible: ospfd, bgpd, relayd, ...    |  |
        |  |  +-------------+  +--------------+  +--------------+        |  |
        |  |  | Command     |  | Notification |  | Proxy        |        |  |
        |  |  | Generator   |  | Receiver     |  | Forwarder    |        |  |
        |  |  +-------------+  +--------------+  +--------------+        |  |
        |  |                                                             |  |
        |  |  +-------------+  +--------------+  +--------------+        |  |
        |  |  | Command     |  | Notification |  | Other        |        |  |
        |  |  | Responder   |  | Originator   |  |              |        |  |
        |  |  +-------------+  +--------------+  +--------------+        |  |
        |  |                                                             |  |
        |  +-------------------------------------------------------------+  |
        |                                                                   |
        +-------------------------------------------------------------------+

FUZZ

	There is at least one SNMP fuzzer. Of course, it will not crash snmpd.
	http://www.hackingciscoexposed.com/tools/snmp-fuzzer-0.1.1.tar.gz

TODO

	snmpd:
	- Implement the advanced SNMPv2 features like INFORM
	- Implement USM (User-based Security Model)
	- Implement some MIBs (SNMPv2/3 standard MIBs)
		- MIB-2		(mostly done)
		- IF-MIB	(mostly done)
		- IP-MIB	(mostly done, at least the old version)
		- TCP-MIB
		- UDP-MIB
		- BRIDGE-MIB	(partially done)
                - OPENBSD-MIB	(sensors done, etc.)
		- ...
	- Review review review
	- More tests on other platforms like sparc64, hppa, etc.
	- Add trap receiver/logger

	- There is a SNMP over SSH draft, interesting reading:
		http://tools.ietf.org/html/draft-ietf-isms-secshell-09
		http://tools.ietf.org/wg/isms/

	snmpctl:
	- Add commands to query/set remote SNMP daemons (instead snmpwalk etc.)
	- Internal status, lalala, ...

	ber:
	- Should we replace all the long longs with u_int64_t and so on?

NOT TO DO

	- Do not implement all the zillions of MIBs from ucdavis/net-snmp
	- Do not provide a complex API for plugins, modules, and pimp-my-SNMP
	- ...

THANKS

	To .vantronix for supporting this work - it is time to get a
	nice(r) SNMP implementation for OpenBSD.

	Thanks to claudio@@ and mbalmer@@ for starting the implementation
        of ASN.1/BER encoding.

reyk
@


1.6
log
@sync
@
text
@d1 1
a1 1
# $OpenBSD: README,v 1.5 2008/01/09 12:16:58 reyk Exp $
@


1.5
log
@sync
@
text
@d1 1
a1 1
# $OpenBSD: README,v 1.4 2007/12/28 17:26:09 reyk Exp $
d89 1
a89 1
		- BRIDGE-MIB
a94 1
	- Add an interface to send traps via imsg from snmpctl and daemons
a100 1
	- Add commands to query the SNMP mibtree via imsg
@


1.4
log
@sync
@
text
@d1 1
a1 1
# $OpenBSD: README,v 1.3 2007/12/05 22:52:50 reyk Exp $
d86 1
a86 1
		- IP-MIB
d93 3
a95 2
	- add trap receiver/logger
	- manpages
d105 3
a107 1
	- manpage
@


1.3
log
@- add support joel's OPENBSD-SENSORS-MIB; it will dump the current
sensor status in a SNMP table.
- some other minor changes
@
text
@d1 1
a1 1
# $OpenBSD: README,v 1.2 2007/12/05 16:03:42 reyk Exp $
a92 1
	- Separate mps and snmpe?
@


1.2
log
@typo
@
text
@d1 1
a1 1
# $OpenBSD: README,v 1.1 2007/12/05 09:22:44 reyk Exp $
d90 1
a90 1
                - OPENBSD-MIB	(for sensors, etc.)
@


1.1
log
@Start working on snmpd(8) and snmpctl(8), a lightweight SNMP implementation
for OpenBSD.  SNMP is a necessary evil.  This is work in progress, don't
expect too much from it yet.

ok deraadt@@
@
text
@d1 1
a1 1
# $OpenBSD$
d22 1
a22 1
	I may change the layout a to look a bit more like RFC 2271. But
@

