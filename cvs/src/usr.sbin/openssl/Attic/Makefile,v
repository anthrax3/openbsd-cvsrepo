head	1.32;
access;
symbols
	OPENBSD_5_6:1.31.0.4
	OPENBSD_5_6_BASE:1.31
	OPENBSD_5_5:1.22.0.4
	OPENBSD_5_5_BASE:1.22
	OPENBSD_5_4:1.21.0.2
	OPENBSD_5_4_BASE:1.21
	OPENBSD_5_3:1.20.0.4
	OPENBSD_5_3_BASE:1.20
	OPENBSD_5_2:1.20.0.2
	OPENBSD_5_2_BASE:1.20
	OPENBSD_5_1_BASE:1.19
	OPENBSD_5_1:1.19.0.6
	OPENBSD_5_0:1.19.0.4
	OPENBSD_5_0_BASE:1.19
	OPENBSD_4_9:1.19.0.2
	OPENBSD_4_9_BASE:1.19
	OPENBSD_4_8:1.18.0.8
	OPENBSD_4_8_BASE:1.18
	OPENBSD_4_7:1.18.0.4
	OPENBSD_4_7_BASE:1.18
	OPENBSD_4_6:1.18.0.6
	OPENBSD_4_6_BASE:1.18
	OPENBSD_4_5:1.18.0.2
	OPENBSD_4_5_BASE:1.18
	OPENBSD_4_4:1.17.0.14
	OPENBSD_4_4_BASE:1.17
	OPENBSD_4_3:1.17.0.12
	OPENBSD_4_3_BASE:1.17
	OPENBSD_4_2:1.17.0.10
	OPENBSD_4_2_BASE:1.17
	OPENBSD_4_1:1.17.0.8
	OPENBSD_4_1_BASE:1.17
	OPENBSD_4_0:1.17.0.6
	OPENBSD_4_0_BASE:1.17
	OPENBSD_3_9:1.17.0.4
	OPENBSD_3_9_BASE:1.17
	OPENBSD_3_8:1.17.0.2
	OPENBSD_3_8_BASE:1.17
	OPENBSD_3_7:1.16.0.6
	OPENBSD_3_7_BASE:1.16
	OPENBSD_3_6:1.16.0.4
	OPENBSD_3_6_BASE:1.16
	OPENBSD_3_5:1.16.0.2
	OPENBSD_3_5_BASE:1.16
	OPENBSD_3_4:1.13.0.2
	OPENBSD_3_4_BASE:1.13
	OPENBSD_3_3:1.11.0.2
	OPENBSD_3_3_BASE:1.11
	OPENBSD_3_2:1.10.0.2
	OPENBSD_3_2_BASE:1.10
	OPENBSD_3_1:1.6.0.6
	OPENBSD_3_1_BASE:1.6
	OPENBSD_3_0:1.6.0.4
	OPENBSD_3_0_BASE:1.6
	OPENBSD_2_9_BASE:1.6
	OPENBSD_2_9:1.6.0.2
	OPENBSD_2_8:1.5.0.4
	OPENBSD_2_8_BASE:1.5
	OPENBSD_2_7:1.5.0.2
	OPENBSD_2_7_BASE:1.5
	OPENBSD_2_6:1.1.0.2
	OPENBSD_2_6_BASE:1.1;
locks; strict;
comment	@# @;


1.32
date	2014.08.26.17.47.25;	author jsing;	state dead;
branches;
next	1.31;
commitid	7A7DObXgY4Fni8xJ;

1.31
date	2014.07.27.23.46.51;	author guenther;	state Exp;
branches;
next	1.30;
commitid	82qdiXMyWZOm13Wd;

1.30
date	2014.07.02.20.37.06;	author miod;	state Exp;
branches;
next	1.29;
commitid	1c5Q6g2ldGNiU7rl;

1.29
date	2014.05.29.18.15.21;	author beck;	state Exp;
branches;
next	1.28;

1.28
date	2014.04.25.04.10.26;	author jsing;	state Exp;
branches;
next	1.27;

1.27
date	2014.04.18.19.55.15;	author tedu;	state Exp;
branches;
next	1.26;

1.26
date	2014.04.18.14.41.54;	author deraadt;	state Exp;
branches;
next	1.25;

1.25
date	2014.04.17.22.44.34;	author matthew;	state Exp;
branches;
next	1.24;

1.24
date	2014.04.17.20.46.29;	author tedu;	state Exp;
branches;
next	1.23;

1.23
date	2014.04.15.20.55.42;	author miod;	state Exp;
branches;
next	1.22;

1.22
date	2013.08.06.19.05.57;	author miod;	state Exp;
branches;
next	1.21;

1.21
date	2013.07.22.14.40.45;	author naddy;	state Exp;
branches;
next	1.20;

1.20
date	2012.07.11.11.02.48;	author sthen;	state Exp;
branches;
next	1.19;

1.19
date	2010.10.01.23.04.33;	author djm;	state Exp;
branches;
next	1.18;

1.18
date	2008.09.06.12.21.52;	author djm;	state Exp;
branches;
next	1.17;

1.17
date	2005.04.29.05.42.55;	author djm;	state Exp;
branches;
next	1.16;

1.16
date	2004.02.27.17.36.18;	author deraadt;	state Exp;
branches;
next	1.15;

1.15
date	2004.01.28.17.46.05;	author deraadt;	state Exp;
branches;
next	1.14;

1.14
date	2003.11.12.21.15.03;	author markus;	state Exp;
branches;
next	1.13;

1.13
date	2003.06.24.16.00.05;	author mickey;	state Exp;
branches;
next	1.12;

1.12
date	2003.05.13.06.28.20;	author itojun;	state Exp;
branches;
next	1.11;

1.11
date	2003.03.05.20.59.17;	author deraadt;	state Exp;
branches;
next	1.10;

1.10
date	2002.09.26.11.39.50;	author markus;	state Exp;
branches;
next	1.9;

1.9
date	2002.07.18.02.42.01;	author hugh;	state Exp;
branches;
next	1.8;

1.8
date	2002.05.15.02.29.59;	author beck;	state Exp;
branches;
next	1.7;

1.7
date	2002.05.11.00.20.21;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2000.12.15.03.15.01;	author beck;	state Exp;
branches;
next	1.5;

1.5
date	2000.04.25.01.25.13;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	2000.04.15.06.26.31;	author beck;	state Exp;
branches;
next	1.3;

1.3
date	2000.03.19.11.50.42;	author beck;	state Exp;
branches;
next	1.2;

1.2
date	2000.03.19.11.14.55;	author beck;	state Exp;
branches;
next	1.1;

1.1
date	99.09.29.05.56.47;	author beck;	state Exp;
branches;
next	;


desc
@@


1.32
log
@Move openssl(1) from /usr/sbin/openssl to /usr/bin/openssl, since it is not
a system/superuser binary. At the same time, move the source code from its
current lib/libssl/src/apps location to a more appropriate home under
usr.bin/openssl.

ok deraadt@@ miod@@
@
text
@#	$OpenBSD: Makefile,v 1.31 2014/07/27 23:46:51 guenther Exp $

PROG=	openssl
LDADD=	-lssl -lcrypto
DPADD=	${LIBSSL} ${LIBCRYPTO}
MAN1=	openssl.1

CFLAGS+= -Wall -Werror
CFLAGS+= -Wformat
CFLAGS+= -Wformat-security
CFLAGS+= -Wimplicit
CFLAGS+= -Wreturn-type
#CFLAGS+= -Wshadow
CFLAGS+= -Wtrigraphs
CFLAGS+= -Wuninitialized
CFLAGS+= -Wunused

CFLAGS+= -DLIBRESSL_INTERNAL

SRCS=	verify.c asn1pars.c req.c dgst.c dh.c enc.c passwd.c gendh.c errstr.c \
	pkcs7.c crl2p7.c crl.c ca.c \
	rsa.c rsautl.c dsa.c dsaparam.c ec.c ecparam.c \
	x509.c genrsa.c gendsa.c genpkey.c s_server.c s_client.c speed.c \
	s_time.c apps.c s_socket.c version.c sess_id.c \
	ciphers.c nseq.c pkcs12.c pkcs8.c pkey.c pkeyparam.c pkeyutl.c \
	spkac.c smime.c cms.c rand.c engine.c ocsp.c prime.c ts.c \
	openssl.c s_cb.c dhparam.c

.PATH:	${.CURDIR}/../../lib/libssl/src/apps

.include <bsd.prog.mk>
@


1.31
log
@Link dependencies on libssl and libcrypto were missing.
OPENSSL_NO_RC5 is #defined in the #includes, so it's not needed here.

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.30 2014/07/02 20:37:06 miod Exp $
@


1.30
log
@Warnings. I haz them.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.29 2014/05/29 18:15:21 beck Exp $
d5 1
d18 1
a18 1
CFLAGS+= -DOPENSSL_NO_RC5 -DLIBRESSL_INTERNAL
@


1.29
log
@define -DLIBRESSL_INTERNAL in here so we don't use nasties
ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.28 2014/04/25 04:10:26 jsing Exp $
d7 10
a16 1
CFLAGS+= -Wall
@


1.28
log
@Remove defined varibles that no longer do anything.

ok miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.27 2014/04/18 19:55:15 tedu Exp $
d8 1
a8 1
CFLAGS+= -DOPENSSL_NO_RC5
@


1.27
log
@no app_rand.c
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.26 2014/04/18 14:41:54 deraadt Exp $
d8 1
a8 2
CFLAGS+= -DTERMIOS -DANSI_SOURCE -DOPENSSL_NO_RC5
CFLAGS+= -DOPENSSL_NO_SSL2
@


1.26
log
@since e_os.h is dead, and e_os2.h is installed, we can fetch from there.
This means we don't need the reach-around anymore.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.25 2014/04/17 22:44:34 matthew Exp $
d15 1
a15 1
	s_time.c apps.c s_socket.c app_rand.c version.c sess_id.c \
@


1.25
log
@Make MONOLITH the default and only option

ok deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.24 2014/04/17 20:46:29 tedu Exp $
a6 5
SSLEAYDIST= lib/libssl/src

SSLEAY_SRC= ${.CURDIR}/../../${SSLEAYDIST}/apps
SSLEAY_SRC_TOP= ${.CURDIR}/../../${SSLEAYDIST}

a9 1
CFLAGS+= -I${SSLEAY_SRC_TOP}
d20 1
a20 1
.PATH:	${SSLEAY_SRC}
@


1.24
log
@-Wall
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.23 2014/04/15 20:55:42 miod Exp $
d13 1
a13 1
CFLAGS+= -DMONOLITH -DTERMIOS -DANSI_SOURCE -DOPENSSL_NO_RC5
@


1.23
log
@Remove workarounds for ld reaching MAXDSIZ on vax, now that MAXDSIZ is
more comfortable.
Reminded by brad@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.22 2013/08/06 19:05:57 miod Exp $
d12 1
@


1.22
log
@Switch vax to gcc 3.3.6.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.21 2013/07/22 14:40:45 naddy Exp $
a14 4

.if ${MACHINE} == "vax"
LDFLAGS+=-Wl,--no-keep-memory
.endif
@


1.21
log
@we now have IDEA and MDC2 in libcrypto, so don't disable them in openssl(1)
ok djm@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.20 2012/07/11 11:02:48 sthen Exp $
d15 4
@


1.20
log
@Disable SSLv2 in OpenSSL.  No objections from djm.
Brad, jasper and naddy helped with test builds, fixing ports, etc.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.19 2010/10/01 23:04:33 djm Exp $
d12 1
a12 2
CFLAGS+= -DMONOLITH -DOPENSSL_NO_IDEA -DTERMIOS -DANSI_SOURCE -DOPENSSL_NO_RC5
CFLAGS+= -DOPENSSL_NO_MDC2
@


1.19
log
@update to openssl-1.0.0a
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.18 2008/09/06 12:21:52 djm Exp $
d14 1
@


1.18
log
@update for openssl-0.9.8h
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.17 2005/04/29 05:42:55 djm Exp $
a11 12
.if ${MACHINE_ARCH} == "i386" || ${MACHINE_ARCH} == "vax" || \
    ${MACHINE_ARCH} == "amd64"

CFLAGS+= -DL_ENDIAN
.else
.if ${MACHINE_ARCH} == "alpha"
# no ENDIAN stuff defined for alpha
.else
CFLAGS+= -DB_ENDIAN
.endif
.endif

d16 1
a16 1
SRCS=	verify.c asn1pars.c req.c dgst.c dh.c enc.c passwd.c gendh.c errstr.c\
d18 6
a23 6
	rsa.c dsa.c dsaparam.c \
	x509.c genrsa.c gendsa.c s_server.c s_client.c speed.c \
	s_time.c apps.c s_cb.c s_socket.c version.c sess_id.c \
	app_rand.c ciphers.c nseq.c pkcs12.c pkcs8.c spkac.c smime.c \
	dhparam.c openssl.c rand.c rsautl.c engine.c ocsp.c prime.c \
	cms.c ec.c ecparam.c
@


1.17
log
@adjust for 0.9.7g
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.16 2004/02/27 17:36:18 deraadt Exp $
d34 2
a35 1
	dhparam.c openssl.c rand.c rsautl.c engine.c ocsp.c prime.c
@


1.16
log
@change amd64's MACHINE_ARCH from x86_64 to amd64.  There are many many
reasons for this, quite a few of them technical, and not all of them
in response to Intel's broken ia32e crud.  The gcc toolchain stays at
x86_64 for now.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.15 2004/01/28 17:46:05 deraadt Exp $
d34 1
a34 1
	dhparam.c openssl.c rand.c rsautl.c engine.c ocsp.c
@


1.15
log
@label x86_64 as LE
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.14 2003/11/12 21:15:03 markus Exp $
d12 2
a13 2
.if (${MACHINE_ARCH} == "i386") || (${MACHINE_ARCH} == "x86_64") || \
    (${MACHINE_ARCH} == "vax")
@


1.14
log
@remove -g for i386
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.13 2003/06/24 16:00:05 mickey Exp $
d12 3
a14 2
.if (${MACHINE_ARCH} == "arc") || (${MACHINE_ARCH} == "i386") || \
    (${MACHINE_ARCH} == "vax") || (${MACHINE_ARCH} == "pmax")
@


1.13
log
@no need to reset the BIN* stuff in here; markus@@ ok
@
text
@d1 1
a1 1
#	$OpenBSD$
d12 2
a13 5
.if ${MACHINE_ARCH} == "i386"
CFLAGS+= -g -DL_ENDIAN -DBN_ASM
.else
.if (${MACHINE_ARCH} == "arc") || (${MACHINE_ARCH} == "pmax") || \
    (${MACHINE_ARCH} == "vax")
a21 1
.endif 
@


1.12
log
@don't -I/usr/include/ssl, it's from old openssl distribution.
markus ok
@
text
@d1 1
a3 5

BINOWN= root
BINGRP= bin
BINMODE= 555
BINDIR= /usr/sbin
d41 1
a41 1
.include<bsd.prog.mk>
@


1.11
log
@jmc wrote a combination man page that covers all openssl(1) functionality,
based on the pod files from openssl.  This may need by-hand updating once
in a while, but at least now people can read a real man page instead of
the mess that the openssl team provides us with.
@
text
@d33 1
a33 1
CFLAGS+= -I/usr/include/ssl -I${SSLEAY_SRC_TOP}
@


1.10
log
@remove MDC2; patents
@
text
@d9 1
a9 1
NOMAN= not yet kiddies
@


1.9
log
@Correct CFLAGS for vax; deraadt says ok.
NB future porters, default is still big endian.
@
text
@d32 1
@


1.8
log
@Changes for OpenSSL 0.9.7
@
text
@d19 2
a20 4
.if ${MACHINE_ARCH} == "arc"
CFLAGS+= -DL_ENDIAN
.else
.if ${MACHINE_ARCH} == "pmax"
a26 1
.endif
@


1.7
log
@Add missing libraries to bsd.prog.mk (mostly kerberosV)
Use them in DPADD throughout the tree.
Fix a few mispells (LIBMATH -> LIBM...)
Wipe obsolete lib (LIBRESOLV)
Sort added missing libraries, move obsolete stuff apart.
Synch documentation in bsd.README

ok deraadt@@
@
text
@a7 1
DPADD=	${LIBSSL} ${LIBCRYPTO}
d14 1
d34 2
a35 2
CFLAGS+= -DMONOLITH -DNO_IDEA -DTERMIOS -DANSI_SOURCE -DNO_RC5
CFLAGS+= -I/usr/include/ssl
d43 1
a43 1
	dhparam.c openssl.c rand.c rsautl.c
@


1.6
log
@openssl-engine 0.9.6 merge

Note that the library changes will mean that you will need to blow away
/usr/obj/lib/libssl if you are building, or things will probably get mucked
up.
@
text
@d8 1
@


1.5
log
@omit RC5
@
text
@d42 1
a42 1
	dhparam.c openssl.c rand.c
@


1.4
log
@OpenSSL 0.9.5a merge - fixes DSA cert generation problem
@
text
@d33 1
a33 1
CFLAGS+= -DMONOLITH -DNO_IDEA -DTERMIOS -DANSI_SOURCE 
a46 1

@


1.3
log
@cleanup
@
text
@d42 1
a42 1
	dhparam.c openssl.c
@


1.2
log
@new minty 0.9.5 openssl
@
text
@a35 6
#SRCS=	verify.c asn1pars.c req.c dgst.c dh.c enc.c gendh.c errstr.c ca.c \
#	pkcs7.c crl2p7.c crl.c \
#	rsa.c dsa.c dsaparam.c \
#	x509.c genrsa.c gendsa.c s_server.c s_client.c speed.c \
#	s_time.c apps.c s_cb.c s_socket.c version.c sess_id.c \
#	ciphers.c nseq.c pkcs12.c pkcs8.c openssl.c
@


1.1
log
@openssl 0.9.4 "openssl" command
@
text
@d36 8
a43 2
SRCS=	verify.c asn1pars.c req.c dgst.c dh.c enc.c gendh.c errstr.c ca.c \
	pkcs7.c crl2p7.c crl.c \
d47 2
a48 1
	ciphers.c nseq.c pkcs12.c pkcs8.c openssl.c
@

