head	1.7;
access;
symbols
	OPENBSD_2_6:1.6.0.2
	OPENBSD_2_6_BASE:1.6
	OPENBSD_2_5:1.3.0.2
	OPENBSD_2_5_BASE:1.3
	OPENBSD_2_4:1.2.0.2
	OPENBSD_2_4_BASE:1.2
	OPENBSD_2_3:1.1.1.1.0.6
	OPENBSD_2_3_BASE:1.1.1.1
	OPENBSD_2_2:1.1.1.1.0.4
	OPENBSD_2_2_BASE:1.1.1.1
	OPENBSD_2_1:1.1.1.1.0.2
	OPENBSD_2_1_BASE:1.1.1.1
	GRAICHEN_961030:1.1.1.1
	GRAICHEN:1.1.1;
locks; strict;
comment	@.\" @;


1.7
date	99.12.02.04.00.47;	author deraadt;	state dead;
branches;
next	1.6;

1.6
date	99.07.13.23.02.05;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	99.07.07.10.50.11;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	99.06.05.22.16.39;	author aaron;	state Exp;
branches;
next	1.3;

1.3
date	98.11.08.00.21.28;	author aaron;	state Exp;
branches;
next	1.2;

1.2
date	98.09.27.02.49.25;	author aaron;	state Exp;
branches;
next	1.1;

1.1
date	96.10.30.17.32.57;	author graichen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	96.10.30.17.32.57;	author graichen;	state Exp;
branches;
next	;


desc
@@


1.7
log
@bye bye ctm (soon in ports tree)
@
text
@.\"----------------------------------------------------------------------------
.\""THE BEER-WARE LICENSE" (Revision 42):
.\"<joerg@@freebsd.org> wrote this file.  As long as you retain this notice you
.\"can do whatever you want with this stuff. If we meet some day, and you think
.\"this stuff is worth it, you can buy me a beer in return.       Joerg Wunsch
.\"----------------------------------------------------------------------------
.\"
.\" This manual page is partially obtained from Poul-Hennings CTM README
.\" file.
.\"
.\" CTM and ctm(1) by <phk@@login.dknet.dk>
.\"
.\" $Id: ctm.5,v 1.6 1999/07/13 23:02:05 deraadt Exp $
.\"
.Dd March 25, 1995
.Os
.Dt CTM 5
.Sh NAME
.Nm ctm
.Nd source code mirror system
.Sh DESCRIPTION
The
.Nm
transfers data in a specific file format, called a CTM delta.
.Pp
CTM deltas consist of control lines and data chunks.  Each control
line starts with the letters
.Dq CTM ,
followed by a CTM statement and control data, and ends with a
newline
.Pq Sq \en
character.
.Pp
Data chunks always belong to the preceding control line, and the
last field on that control line is the number of bytes in the data
chunk.
A trailing newline
character follows each data chunk. This
newline is not part of the chunk and isn't included in the count.
.Pp
The CTM statements are as follows:
.Bl -tag -width indent
.It _BEGIN Ar version name number timestamp prefix
This is the overall begin of a CTM delta file.  The
.Ar version
field must match the program version
.Pq currently 2.0 .
.Ar name
is the name and
.Ar number
the sequence number of the CTM service; it is matched against the file
.Pa .ctm_status
to see if the delta has already been applied.
.Ar timestamp
contains the year, month, day, hour, minute, and second of the
time of delta creation for reference
.Po
followed by the letter
.Dq Z ,
meaning this is a UTC timestamp
.Pc .
The
.Ar prefix
field is currently not implemented.
.It _END Ar md5
This statement ends the CTM delta. The global
.Ar md5
checksum is matched against the MD5 checksum of the entire delta, up to
and including the space (0x20) character following
.Dq _END .
.It \&FM Ar name uid gid mode md5 count
Make the file
.Ar name .
The original file had the UID
.Ar uid
.Pq numerical, decimal ,
the GID
.Ar gid
.Pq numerical, decimal ,
mode
.Ar mode
.Pq numerical, octal ,
and the MD5 checksum
.Ar md5 .
The following
.Ar count
bytes data are the contents of the new file.
.It \&FS Ar name uid gid mode md5before md5after count
Substitute the contents of file
.Ar name .
The original file had the new UID
.Ar uid
.Pq numerical, decimal ,
the new GID
.Ar gid
.Pq numerical, decimal ,
new mode
.Ar mode
.Pq numerical, octal ,
the old MD5 checksum
.Ar md5before ,
and the new MD5 checksum
.Ar md5after .
The following
.Ar count
bytes data are the contents of the new file.
File substitution is used if the commands to edit a file would exceed
the total file length, so substituting it is more efficient.
.It \&FN Ar name uid gid mode md5before md5after count
Edit the file
.Ar name .
The arguments are as above, but the data sections contain a
.Xr diff 1
-n script which should be applied to the file in question.
.It \&FR Ar name md5
Remove the file
.Ar name ,
which must match the MD5 checksum
.Ar md5 .
.It \&AS Ar name uid gid mode
The original file
.Ar name
changed its owner to
.Ar uid ,
its group to
.Ar gid ,
and/or its mode to
.Ar mode .
.It \&DM Ar name uid gid mode
The directory
.Ar name
is to be created. It had originally the owner
.Ar uid ,
group
.Ar gid ,
and mode
.Ar mode .
.It \&DR name
The directory
.Ar name
is to be removed.
.El
.Sh EXAMPLES
In the following example, long lines have been folded to make them
printable
.Pq marked by backslashes .
.Bd -literal
CTM_BEGIN 2.0 cvs-cur 485 19950324214652Z .
CTMFR src/sys/gnu/i386/isa/scd.c,v 5225f13aa3c7e458f9dd0d4bb637b18d
CTMFR src/sys/gnu/i386/isa/scdreg.h,v e5af42b8a06f2c8030b93a7d71afb223
CTMDM src/sys/gnu/i386/isa/Attic 0 552 775
CTMFS .ctm_status 545 552 664 d9ccd2a84a9dbb8db56ba85663adebf0 \\
e2a10c6f66428981782a0a18a789ee2e 12
cvs-cur 485
.Pp
CTMFN CVSROOT/commitlogs/gnu 545 552 664 \\
5d7bc3549140d860bd9641b5782c002d 7fb04ed84b48160c9b8eea84b4c0b6e3 394
a6936 21
ache        95/03/24 09:59:50
.Pp
  Modified:    gnu/lib/libdialog kernel.c prgbox.c
  Log:
[...]
CTM_END 74ddd298d76215ae45a077a4b6a74e9c
.Ed
.Sh SEE ALSO
.Xr ctm 1 ,
.Xr ctm_rmail 1 ,
.Xr ed 1
.Sh HISTORY
Initial trials ran during the work on FreeBSD 1.1.5, and many bugs and
methods were hashed out.
The CTM system has been made publically available in FreeBSD 2.1.
.Sh AUTHORS
The CTM system has been designed and implemented by
Poul-Henning Kamp
.Aq phk@@FreeBSD.org .
Joerg Wunsch
.Aq joerg@@FreeBSD.org
wrote this man page.
@


1.6
log
@Merge with FreeBSD 3.2, while keeping OpenBSD mktemp/mkstemp fixes.
Some minor man page enhancements.
Brings better man pages, new features, more error checking, and improved
performance; some FreeBSD examples for creating ctm deltas
merged by hgweigand@@wiesbaden.netsurf.de
@
text
@d13 1
a13 1
.\" $Id: ctm.5,v 1.4 1999/06/05 22:16:39 aaron Exp $
@


1.5
log
@The proper order of the ``introductory'' macros in a man page is .Dd/.Dt/.Os.
Out of the approximately 1450 man pages, only about 90 of them were wrong.
Thanks to kwesterback@@home.com for coming up with a script and patch to repair
this. The patch also inserted a .Os macro in the few man pages that were
missing one.
@
text
@d16 1
a17 1
.Os
d23 1
a23 1
.Nm ctm
d171 1
a171 1
Initial trials ran during the FreeBSD 1.1.5, and many bugs and
@


1.4
log
@remove trailing whitespace, some Nm cleanup
@
text
@d13 1
a13 1
.\" $Id: ctm.5,v 1.3 1998/11/08 00:21:28 aaron Exp $
d16 1
a17 1
.Dt CTM 5
@


1.3
log
@usr.sbin/ man page repairs, a-i
@
text
@d2 1
a2 1
.\""THE BEER-WARE LICENSE" (Revision 42): 
d13 1
a13 1
.\" $Id: ctm.5,v 1.2 1998/09/27 02:49:25 aaron Exp $
d68 1
a68 1
checksum is matched against the MD5 checksum of the entire delta, up to 
d171 1
a171 1
Initial trials ran during the FreeBSD 1.1.5, and many bugs and 
@


1.2
log
@preceeding -> preceding
@
text
@d13 1
a13 1
.\" $Id: ctm.5,v 1.1.1.1 1996/10/30 17:32:57 graichen Exp $
a20 1

d25 1
a25 1

d29 3
a31 1
followed by a CTM statement and control data, and ends with a '\en'
d33 1
a33 1

d37 2
a38 1
A trailing newline '\en' character follows each data chunk, this
d40 2
a41 2

The CTM statements are as follows.
a42 1

a43 1

d48 1
a48 1
.Ar Name
d51 1
a51 1
the sequence number of the CTM service, it is matched against the file
d54 1
a54 1
.Ar Timestamp
d59 1
a59 1
.Sq Z
d64 1
a64 2
This field is currently not implemented.

d66 1
a66 2

This statement ends the CTM delta, the global
d69 2
a70 2
and including the space (0x20) character following ``_END''.

a71 1

d73 2
a74 2
.Ar name ,
the original file had the uid
d77 1
a77 1
the gid
a84 1

a87 1

a88 1

d90 2
a91 2
.Ar name ,
the original file had the new uid
d94 1
a94 1
the new gid
a103 1

a106 1

a108 1

a109 1

d112 1
a112 1
The arguments are as above, but the data sections contains an
a114 1

a115 1

a119 1

a120 1

a128 1

a129 1

d132 1
a132 1
is to be created, it had originally the owner
a137 1

a138 1

a141 1

a142 1

a143 1

a146 1

a147 1

d155 1
a155 1

d160 1
a160 1

a164 1

a165 1

a166 1

d169 1
a169 2
.Xr ed 1 .

a170 1

a173 1

a174 1

d178 3
a180 3

Joerg Wunsch wrote this man-page.
.Aq joerg@@FreeBSD.org .
@


1.1
log
@Initial revision
@
text
@d13 1
a13 1
.\" $Id: ctm.5,v 1.3 1996/05/27 22:46:22 wosch Exp $
d33 1
a33 1
Data chunks always belong to the preceeding control line, and the
@


1.1.1.1
log
@import ctm (current through mail)
for more see http://www.openbsd.org/ctm.html - it's basicaly the FreeBSD
version adapted to OpenBSD - i'll bring in the latest FreeBSD changes in the
next days
@
text
@@
