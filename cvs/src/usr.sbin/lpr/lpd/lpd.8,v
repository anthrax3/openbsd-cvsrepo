head	1.29;
access;
symbols
	OPENBSD_6_1_BASE:1.29
	OPENBSD_6_0:1.29.0.4
	OPENBSD_6_0_BASE:1.29
	OPENBSD_5_9:1.29.0.2
	OPENBSD_5_9_BASE:1.29
	OPENBSD_5_8:1.26.0.8
	OPENBSD_5_8_BASE:1.26
	OPENBSD_5_7:1.26.0.2
	OPENBSD_5_7_BASE:1.26
	OPENBSD_5_6:1.26.0.4
	OPENBSD_5_6_BASE:1.26
	OPENBSD_5_5:1.23.0.16
	OPENBSD_5_5_BASE:1.23
	OPENBSD_5_4:1.23.0.12
	OPENBSD_5_4_BASE:1.23
	OPENBSD_5_3:1.23.0.10
	OPENBSD_5_3_BASE:1.23
	OPENBSD_5_2:1.23.0.8
	OPENBSD_5_2_BASE:1.23
	OPENBSD_5_1_BASE:1.23
	OPENBSD_5_1:1.23.0.6
	OPENBSD_5_0:1.23.0.4
	OPENBSD_5_0_BASE:1.23
	OPENBSD_4_9:1.23.0.2
	OPENBSD_4_9_BASE:1.23
	OPENBSD_4_8:1.22.0.4
	OPENBSD_4_8_BASE:1.22
	OPENBSD_4_7:1.22.0.2
	OPENBSD_4_7_BASE:1.22
	OPENBSD_4_6:1.21.0.8
	OPENBSD_4_6_BASE:1.21
	OPENBSD_4_5:1.21.0.4
	OPENBSD_4_5_BASE:1.21
	OPENBSD_4_4:1.21.0.2
	OPENBSD_4_4_BASE:1.21
	OPENBSD_4_3:1.20.0.4
	OPENBSD_4_3_BASE:1.20
	OPENBSD_4_2:1.20.0.2
	OPENBSD_4_2_BASE:1.20
	OPENBSD_4_1:1.18.0.2
	OPENBSD_4_1_BASE:1.18
	OPENBSD_4_0:1.17.0.6
	OPENBSD_4_0_BASE:1.17
	OPENBSD_3_9:1.17.0.4
	OPENBSD_3_9_BASE:1.17
	OPENBSD_3_8:1.17.0.2
	OPENBSD_3_8_BASE:1.17
	OPENBSD_3_7:1.16.0.2
	OPENBSD_3_7_BASE:1.16
	OPENBSD_3_6:1.15.0.6
	OPENBSD_3_6_BASE:1.15
	OPENBSD_3_5:1.15.0.4
	OPENBSD_3_5_BASE:1.15
	OPENBSD_3_4:1.15.0.2
	OPENBSD_3_4_BASE:1.15
	OPENBSD_3_3:1.12.0.2
	OPENBSD_3_3_BASE:1.12
	OPENBSD_3_2:1.11.0.2
	OPENBSD_3_2_BASE:1.11
	OPENBSD_3_1:1.10.0.10
	OPENBSD_3_1_BASE:1.10
	OPENBSD_3_0:1.10.0.8
	OPENBSD_3_0_BASE:1.10
	OPENBSD_2_9_BASE:1.10
	OPENBSD_2_9:1.10.0.6
	OPENBSD_2_8:1.10.0.4
	OPENBSD_2_8_BASE:1.10
	OPENBSD_2_7:1.10.0.2
	OPENBSD_2_7_BASE:1.10
	OPENBSD_2_6:1.9.0.2
	OPENBSD_2_6_BASE:1.9
	OPENBSD_2_5:1.5.0.8
	OPENBSD_2_5_BASE:1.5
	OPENBSD_2_4:1.5.0.6
	OPENBSD_2_4_BASE:1.5
	OPENBSD_2_3:1.5.0.4
	OPENBSD_2_3_BASE:1.5
	OPENBSD_2_2:1.5.0.2
	OPENBSD_2_2_BASE:1.5
	OPENBSD_2_1:1.3.0.4
	OPENBSD_2_1_BASE:1.3
	OPENBSD_2_0:1.3.0.2
	OPENBSD_2_0_BASE:1.3
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@.\" @;


1.29
date	2015.11.17.17.10.36;	author jmc;	state Exp;
branches;
next	1.28;
commitid	yMQ5Pm4R3sRt2sXJ;

1.28
date	2015.10.28.13.25.55;	author millert;	state Exp;
branches;
next	1.27;
commitid	bjmkhvj3DFyKVt2o;

1.27
date	2015.09.12.15.17.11;	author schwarze;	state Exp;
branches;
next	1.26;
commitid	0lDPlqsKgLXN3ynj;

1.26
date	2014.04.20.22.35.10;	author ajacoutot;	state Exp;
branches;
next	1.25;

1.25
date	2014.04.20.18.11.45;	author tedu;	state Exp;
branches;
next	1.24;

1.24
date	2014.04.19.18.44.25;	author tedu;	state Exp;
branches;
next	1.23;

1.23
date	2010.10.28.21.51.02;	author jmc;	state Exp;
branches;
next	1.22;

1.22
date	2009.12.29.10.25.43;	author sobrado;	state Exp;
branches;
next	1.21;

1.21
date	2008.04.15.07.54.48;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2007.05.31.19.20.25;	author jmc;	state Exp;
branches;
next	1.19;

1.19
date	2007.05.03.13.11.34;	author millert;	state Exp;
branches;
next	1.18;

1.18
date	2007.02.16.13.39.06;	author jmc;	state Exp;
branches;
next	1.17;

1.17
date	2005.07.17.18.53.45;	author jmc;	state Exp;
branches;
next	1.16;

1.16
date	2004.12.16.08.13.13;	author moritz;	state Exp;
branches;
next	1.15;

1.15
date	2003.06.12.12.59.51;	author jmc;	state Exp;
branches;
next	1.14;

1.14
date	2003.06.02.23.36.53;	author millert;	state Exp;
branches;
next	1.13;

1.13
date	2003.03.31.19.40.44;	author jmc;	state Exp;
branches;
next	1.12;

1.12
date	2003.01.06.06.00.04;	author cloder;	state Exp;
branches;
next	1.11;

1.11
date	2002.05.20.23.13.50;	author millert;	state Exp;
branches;
next	1.10;

1.10
date	2000.03.19.17.57.06;	author aaron;	state Exp;
branches;
next	1.9;

1.9
date	99.10.17.19.59.44;	author aaron;	state Exp;
branches;
next	1.8;

1.8
date	99.06.05.22.17.17;	author aaron;	state Exp;
branches;
next	1.7;

1.7
date	99.05.23.14.11.34;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	99.05.16.19.58.10;	author alex;	state Exp;
branches;
next	1.5;

1.5
date	97.07.17.07.43.07;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	97.06.02.09.20.34;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	96.06.17.00.01.54;	author downsj;	state Exp;
branches;
next	1.2;

1.2
date	96.06.16.23.10.03;	author downsj;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.47.41;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.47.41;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.29
log
@no more pac;
@
text
@.\"	$OpenBSD: lpd.8,v 1.28 2015/10/28 13:25:55 millert Exp $
.\"	$NetBSD: lpd.8,v 1.23 2002/02/08 01:38:50 ross Exp $
.\"
.\" Copyright (c) 1983, 1991, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"     @@(#)lpd.8	8.3 (Berkeley) 4/19/94
.\"
.Dd $Mdocdate: October 28 2015 $
.Dt LPD 8
.Os
.Sh NAME
.Nm lpd
.Nd line printer spooler daemon
.Sh SYNOPSIS
.Nm lpd
.Op Fl dlrs
.Op Fl b Ar bind-address
.Op Fl n Ar maxchild
.Op Fl w Ar maxwait
.Op Ar port
.Sh DESCRIPTION
.Nm
is the line printer daemon (spool area handler) and is normally invoked
at boot time from the
.Xr rc 8
file.
It makes a single pass through the
.Xr printcap 5
file to find out about the existing printers and prints any files
left after a crash.
It then uses the system calls
.Xr listen 2
and
.Xr accept 2
to receive requests to print files in the queue, transfer files to
the spooling area, display the queue, or remove jobs from the queue.
In each case, it forks a child to handle the request so the parent
can continue to listen for more requests.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl b Ar bind-address
Normally, if the
.Fl s
option is not specified,
.Nm
will listen on all network interfaces for incoming TCP connections.
The
.Fl b
option, followed by a
.Ar bind-address
specifies that
.Nm
should listen on that address instead of INADDR_ANY.
Multiple
.Fl b
options are permitted, allowing a list of addresses to be specified.
Use of this option silently overrides the
.Fl s
option if it is also present on the command line.
.Ar bind-address
can be a numeric host name in IPV4 or IPV6 notation, or a symbolic host
name which will be looked up in the normal way.
.It Fl d
The
.Fl d
option turns on the
.Dv SO_DEBUG
.Xr socket 2
option.
See
.Xr setsockopt 2
for more details.
.It Fl l
The
.Fl l
flag causes
.Nm
to log valid requests received from the network.
This can be useful for debugging purposes.
.It Fl n Ar maxchild
The
.Fl n
flag sets
.Ar maxchild
as the maximum number of child processes that
.Nm
will spawn.
The default is 32.
.It Fl r
The
.Fl r
flag allows the
.Dq of
filter to be used if specified for a remote
printer.
Traditionally,
.Nm
would not use the output filter for remote printers.
.It Fl s
The
.Fl s
flag selects
.Dq secure
mode, in which
.Nm
does not listen on a TCP socket but only takes commands from a
.Ux Ns -domain
socket.
This is valuable when the machine on which
.Nm
runs is subject to attack over the network and it is desired that the
machine be protected from attempts to remotely fill spools and similar
attacks.
.It Fl w Ar maxwait
The
.Fl w
flag sets
.Ar maxwait
as the wait time (in seconds) for dead remote server detection.
If no response is returned from a connected server within this period,
the connection is closed and a message logged.
The default is 300 seconds.
.El
.Pp
If the
.Ar port
parameter is passed,
.Nm
listens on this port instead of the usual
.Dq printer/tcp
port from
.Pa /etc/services .
.Pp
Access control is provided by two means.
First, all requests must come from one of the machines listed in the file
.Pa /etc/hosts.lpd ,
one hostname per line.
A plus "+" may be used as a wildcard to grant access to all hosts.
Second, if the
.Dq rs
capability is specified in the
.Xr printcap 5
entry for the printer being accessed,
.Em lpr
requests will only be honored for those users with accounts on the
machine with the printer.
.Pp
.Nm
performs reverse DNS lookups on network clients.
If a client hostname cannot be determined from its IP address,
the print request will be silently dropped.
This is important to note when debugging print problems
in dynamic address environments.
.Pp
The file
.Em minfree
in each spool directory contains the number of disk blocks to leave free
so that the line printer queue won't completely fill the disk.
The
.Em minfree
file can be edited with your favorite text editor.
.Pp
The daemon begins processing files
after it has successfully set the lock for exclusive
access (described a bit later),
and scans the spool directory
for files beginning with
.Em cf .
Lines in each
.Em cf
file specify files to be printed or non-printing actions to be performed.
Each such line begins with a key character to specify what to do
with the remainder of the line.
.Bl -tag -width Ds
.It J
Job Name.
String to be used for the job name on the burst page.
.It C
Classification.
String to be used for the classification line on the burst page.
.It L
Literal.
The line contains identification info from the password file and
causes the banner page to be printed.
.It T
Title.
String to be used as the title for
.Xr pr 1 .
.It H
Host Name.
Name of the machine where
.Xr lpr 1
was invoked.
.It P
Person.
Login name of the person who invoked
.Xr lpr 1 .
This is used to verify ownership by
.Xr lprm 1 .
.It M
Send mail to the specified user when the current print job completes.
.It f
Formatted File.
Name of a file to print which is already formatted.
.It l
Like
.Dq f
but passes control characters and does not make page breaks.
.It p
Name of a file to print using
.Xr pr 1
as a filter.
.It t
Troff File.
The file contains troff output (cat phototypesetter commands).
.It n
Ditroff File.
The file contains device independent troff output.
.It r
DVI File.
The file contains
.Tn Tex l
output
DVI format from Stanford.
.It g
Graph File.
The file contains data produced by
.Ic plot .
.It c
Cifplot File.
The file contains data produced by
.Ic cifplot .
.It v
The file contains a raster image.
.It r
The file contains text data with
FORTRAN carriage control characters.
.It \&1
Troff Font R.
Name of the font file to use instead of the default.
.It \&2
Troff Font I.
Name of the font file to use instead of the default.
.It \&3
Troff Font B.
Name of the font file to use instead of the default.
.It \&4
Troff Font S.
Name of the font file to use instead of the default.
.It W
Width.
Changes the page width (in characters) used by
.Xr pr 1
and the text filters.
.It I
Indent.
The number of characters to indent the output by (in ASCII).
.It U
Unlink.
Name of file to remove upon completion of printing.
.It N
File name.
The name of the file which is being printed, or a blank for the
standard input (when
.Xr lpr 1
is invoked in a pipeline).
.El
.Pp
If a file cannot be opened, a message will be logged via
.Xr syslog 3
using the
.Dv LOG_LPR
facility.
.Nm
will try up to 20 times to reopen a file it expects to be there,
after which it will skip the file to be printed.
.Pp
.Nm
uses
.Xr flock 2
to provide exclusive access to the lock file and to prevent multiple
daemons from becoming active simultaneously.
If the daemon should be killed or die unexpectedly, the lock file
need not be removed.
The lock file is kept in a readable
.Tn ASCII
form
and contains two lines.
The first is the process ID of the daemon and the second is the control
file name of the current job being printed.
The second line is updated to reflect the current status of
.Nm
for the programs
.Xr lpq 1
and
.Xr lprm 1 .
.Sh FILES
.Bl -tag -width "/var/spool/output/*/minfree" -compact
.It Pa /etc/printcap
printer description file
.It Pa /var/spool/output/*
spool directories
.It Pa /var/spool/output/*/minfree
minimum free space to leave
.It Pa /dev/lp*
line printer devices
.It Pa /var/run/printer
socket for local requests
.It Pa /etc/hosts.lpd
lists machine names allowed printer access
.El
.Sh SEE ALSO
.Xr lpq 1 ,
.Xr lpr 1 ,
.Xr lprm 1 ,
.Xr syslog 3 ,
.Xr hosts 5 ,
.Xr printcap 5 ,
.Xr resolv.conf 5 ,
.Xr lpc 8
.Rs
.%T "4.3BSD Line Printer Spooler Manual"
.Re
.Sh HISTORY
An
.Nm
daemon appeared in
.At v6 .
.Pp
.Nm
previously required that clients connected using a privileged port
(below 1024).
This restriction was removed because it does not provide additional
security and also because many modern clients connect using an
unprivileged port.
@


1.28
log
@Remove support for lpd.pid file.  OK deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: lpd.8,v 1.27 2015/09/12 15:17:11 schwarze Exp $
d33 1
a33 1
.Dd $Mdocdate: September 12 2015 $
d346 1
a346 2
.Xr lpc 8 ,
.Xr pac 8
@


1.27
log
@add missing .Ar macros
@
text
@d1 1
a1 1
.\"	$OpenBSD: lpd.8,v 1.26 2014/04/20 22:35:10 ajacoutot Exp $
d33 1
a33 1
.Dd $Mdocdate: April 20 2014 $
a326 3
.It Pa /var/run/lpd.pid
lock file for
.Nm
@


1.26
log
@Prevent lpd(8) from looking into hosts.equiv.
Access control is now done only using hosts.lpd.
See lpd(8) for more information about the format of this file.

"seems reasonable" tedu@@
"looks good" deraadt@@
ok sthen@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: lpd.8,v 1.25 2014/04/20 18:11:45 tedu Exp $
d45 1
a45 1
.Op port
d152 1
a152 1
.Op port
@


1.25
log
@clarify a bit about hosts.lpd
@
text
@d1 1
a1 1
.\"	$OpenBSD: lpd.8,v 1.24 2014/04/19 18:44:25 tedu Exp $
d33 1
a33 1
.Dd $Mdocdate: April 19 2014 $
d162 1
a162 3
.Pa /etc/hosts.lpd
or
.Pa /etc/hosts.equiv ,
d338 1
a338 1
.It Pa /etc/hosts.equiv
a339 3
.It Pa /etc/hosts.lpd
lists machine names allowed printer access,
but not under same administrative control.
@


1.24
log
@remove hosts.equiv xr
@
text
@d1 1
a1 1
.\"	$OpenBSD: lpd.8,v 1.23 2010/10/28 21:51:02 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: October 28 2010 $
d162 1
a162 1
.Pa /etc/hosts.equiv
d164 3
a166 1
.Pa /etc/hosts.lpd .
@


1.23
log
@more roff removal;
@
text
@d1 1
a1 1
.\"	$OpenBSD: lpd.8,v 1.22 2009/12/29 10:25:43 sobrado Exp $
d33 1
a33 1
.Dd $Mdocdate: December 29 2009 $
d164 1
a164 3
.Pa /etc/hosts.lpd
(which follows the same syntax as
.Xr hosts.equiv 5 ) .
a349 1
.Xr hosts.equiv 5 ,
@


1.22
log
@replace a few remaining UNIX terms with .Ux macros; this diff
completes the changes from Oct 22.
@
text
@d1 1
a1 1
.\"	$OpenBSD: lpd.8,v 1.21 2008/04/15 07:54:48 ajacoutot Exp $
d33 1
a33 1
.Dd $Mdocdate: April 15 2008 $
d243 1
a243 3
The file contains
.Xr troff 1
output (cat phototypesetter commands).
@


1.21
log
@- make it clear that hosts.lpd follows the same syntax that hosts.equiv(5)

inputs from jmc@@
"looks ok" beck@@ (similar older diff), "fine by me" jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: lpd.8,v 1.20 2007/05/31 19:20:25 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: May 31 2007 $
d133 2
a134 2
.Ux
domain socket.
@


1.20
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: lpd.8,v 1.19 2007/05/03 13:11:34 millert Exp $
d33 1
a33 1
.Dd $Mdocdate$
d164 3
a166 1
.Pa /etc/hosts.lpd .
@


1.19
log
@Deprecate the -W flag; it has been the default for years now.
Joint effort with stevesk@@ and jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: lpd.8,v 1.18 2007/02/16 13:39:06 jmc Exp $
d33 1
a33 1
.Dd May 18, 2002
@


1.18
log
@sort options; from Igor Sobrado
@
text
@d1 1
a1 1
.\"	$OpenBSD: lpd.8,v 1.17 2005/07/17 18:53:45 jmc Exp $
d41 1
a41 1
.Op Fl dlrsW
a139 5
.It Fl W
The
.Fl W
option will instruct lpd not to verify a remote tcp connection
comes from a reserved port (<1024).
d365 7
@


1.17
log
@document that clients need dns entries;

from martin crossley, pr #4293;
ok krw@@, millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: lpd.8,v 1.16 2004/12/16 08:13:13 moritz Exp $
d41 1
a41 1
.Op Fl dlsrW
d67 1
a67 1
.It Fl b
d106 1
a106 1
.It Fl n
d140 6
a145 1
.It Fl w
a153 5
.It Fl W
The
.Fl W
option will instruct lpd not to verify a remote tcp connection
comes from a reserved port (<1024).
@


1.16
log
@default wait time for dead server connection is 300 seconds, not 120.

ok millert@@, henning@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: lpd.8,v 1.15 2003/06/12 12:59:51 jmc Exp $
d179 7
d356 1
d359 1
@


1.15
log
@- section reorder
- macro fixes
- kill whitespace at EOL
- new sentence, new line
@
text
@d1 1
a1 1
.\"	$OpenBSD: lpd.8,v 1.14 2003/06/02 23:36:53 millert Exp $
d148 1
a148 1
The default is 120 seconds.
@


1.14
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
.\"	$OpenBSD: lpd.8,v 1.13 2003/03/31 19:40:44 jmc Exp $
d95 2
a96 1
option.  See
d113 2
a114 1
will spawn.  The default is 32.
d121 2
a122 1
printer.  Traditionally,
d145 4
a148 4
as the wait time (in seconds) for dead remote server detection.  If
no response is returned from a connected server within this period,
the connection is closed and a message logged.  The default is
120 seconds.
@


1.13
log
@ascii -> ASCII
@
text
@d1 1
a1 1
.\"	$OpenBSD: lpd.8,v 1.12 2003/01/06 06:00:04 cloder Exp $
d15 1
a15 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
@


1.12
log
@Typo: s/to be use if/to be used if/ s/Standford/Stanford/
@
text
@d1 1
a1 1
.\"	$OpenBSD: lpd.8,v 1.11 2002/05/20 23:13:50 millert Exp $
d284 1
a284 1
The number of characters to indent the output by (in ascii).
@


1.11
log
@Pull in useful bits from NetBSD and make our lp* easier to diff and
do some minor cleanup of my own:

o IPv6 support
o ANSI function headers
o use getopt()
o synce usage() with man pages
o passes -Wall on both 32bit and 64bit platforms
o add an option to set the max number of children lpd will fork off
o add an lpd option to bind to specific addresses instead of INADDR_ANY.
o allow user to specify how long to wait for a connection to remote servers
o more strlcpy() and snprintf() usage
o Use FOO_FILENO constants instead of hard-coding 0-2
o Add some keeps to man the page SYNOPSIS to avoid options being split
@
text
@d1 1
a1 1
.\"	$OpenBSD: lpd.8,v 1.10 2000/03/19 17:57:06 aaron Exp $
d122 1
a122 1
filter to be use if specified for a remote
d251 1
a251 1
DVI format from Standford.
@


1.10
log
@Remove hard sentence breaks. Add $OpenBSD$ tags where appropriate. Some other
cleanup along the way.
@
text
@d1 2
a2 1
.\"	$OpenBSD: lpd.8,v 1.9 1999/10/17 19:59:44 aaron Exp $
d37 1
a37 1
.Dd April 19, 1994
d45 5
a49 1
.Op Fl l
d58 2
a59 2
file to find out about the existing printers and
prints any files left after a crash.
d64 4
a67 5
to receive requests to print files in the queue,
transfer files to the spooling area, display the queue,
or remove jobs from the queue.
In each case, it forks a child to handle
the request so the parent can continue to listen for more requests.
d71 31
d103 3
a105 1
Cause
d109 46
d157 9
d167 1
a167 2
First, all requests must come from
one of the machines listed in the file
d174 1
a174 1
.Xr printcap
d196 3
a198 4
file specify files to be printed or non-printing actions to be
performed.
Each such line begins with a key character
to specify what to do with the remainder of the line.
d208 2
a209 2
The line contains identification info from
the password file and causes the banner page to be printed.
d255 1
a255 1
.Xr plot 3 .
d259 1
a259 1
.Em cifplot .
d290 2
a291 2
The name of the file which is being printed, or a blank
for the standard input (when
d302 2
a303 3
will try up to 20 times
to reopen a file it expects to be there, after which it will
skip the file to be printed.
d310 2
a311 2
If the daemon should be killed
or die unexpectedly, the lock file need not be removed.
d325 1
a325 1
.Bl -tag -width "/var/spool/*/minfree" -compact
d328 4
a331 1
.It Pa /var/spool/*
d333 1
a333 1
.It Pa /var/spool/*/minfree
d343 1
a343 1
but not under same administrative control
d350 1
d355 1
a355 1
.%T "BSD 4.3 Line printer manual"
@


1.9
log
@Use the AT&T UNIX macros.
@
text
@d1 1
a1 1
.\"	$OpenBSD: lpd.8,v 1.8 1999/06/05 22:17:17 aaron Exp $
d50 2
a51 1
file.  It makes a single pass through the
d54 2
a55 1
prints any files left after a crash. It then uses the system calls
d61 2
a62 1
or remove jobs from the queue.  In each case, it forks a child to handle
d70 2
a71 2
to log valid requests received from the network. This can be useful
for debugging purposes.
d74 2
a75 1
Access control is provided by two means. First, all requests must come from
d106 2
a107 1
performed.  Each such line begins with a key character
d111 2
a112 1
Job Name.  String to be used for the job name on the burst page.
d114 2
a115 2
Classification.  String to be used for the classification line
on the burst page.
d117 2
a118 1
Literal.  The line contains identification info from
d121 2
a122 1
Title.  String to be used as the title for
d125 2
a126 1
Host Name.  Name of the machine where
d130 2
a131 1
Person.  Login name of the person who invoked
d138 2
a139 1
Formatted File.  Name of a file to print which is already formatted.
d149 2
a150 1
Troff File.  The file contains
d154 2
a155 2
Ditroff File.  The file contains device independent troff
output.
d157 2
a158 1
DVI File.  The file contains
d163 2
a164 1
Graph File.  The file contains data produced by
d167 2
a168 1
Cifplot File. The file contains data produced by
d176 2
a177 1
Troff Font R. Name of the font file to use instead of the default.
d179 2
a180 1
Troff Font I. Name of the font file to use instead of the default.
d182 2
a183 1
Troff Font B. Name of the font file to use instead of the default.
d185 2
a186 1
Troff Font S. Name of the font file to use instead of the default.
d188 2
a189 1
Width. Changes the page width (in characters) used by
d193 2
a194 1
Indent.  The number of characters to indent the output by (in ascii).
d196 2
a197 1
Unlink.  Name of file to remove upon completion of printing.
d199 2
a200 1
File name.  The name of the file which is being printed, or a blank
d220 2
a221 1
daemons from becoming active simultaneously.  If the daemon should be killed
d228 2
a229 2
file name of the current job being printed.  The second line is updated to
reflect the current status of
@


1.8
log
@remove trailing whitespace, some Nm cleanup
@
text
@d1 1
a1 1
.\"	$OpenBSD: lpd.8,v 1.7 1999/05/23 14:11:34 aaron Exp $
d46 1
a46 1
.Nm lpd
d62 1
a62 1
Available options:
d65 2
a66 4
The
.Fl l
flag causes
.Nm lpd
d186 1
a186 1
.Em LOG_LPR
d188 1
a188 1
.Nm lpd
d193 1
a193 1
.Nm lpd
d206 1
a206 1
.Nm lpd
d243 2
a244 1
daemon appeared in Version 6 AT&T UNIX.
@


1.7
log
@remove argument from .Os macros so value in /usr/share/tmac/mdoc/doc-common
is used instead; kwesterback@@home.com
@
text
@d1 1
a1 1
.\"	$OpenBSD: lpd.8,v 1.6 1999/05/16 19:58:10 alex Exp $
d99 1
a99 1
for files beginning with 
d180 1
a180 1
for the standard input (when 
@


1.6
log
@Cleanup xrefs under SEE ALSO.  Specifically:

  - Sort xrefs by section, and then alphabetically.
  - Add missing commas between xref items.
  - Remove commas from the last xref entry.
  - Remove duplicate entries.
@
text
@d1 1
a1 1
.\"	$OpenBSD: lpd.8,v 1.5 1997/07/17 07:43:07 deraadt Exp $
d38 1
a38 1
.Os BSD 4.4
d46 1
a46 1
.Nm Lpd
d79 1
a79 1
.Li rs
d120 1
a120 1
.Xr lpr
d124 1
a124 1
.Xr lpr .
d126 1
a126 1
.Xr lprm .
d132 3
a134 1
Like ``f'' but passes control characters and does not make page breaks.
d181 1
a181 1
.Xr lpr
d190 1
a190 1
.Nm Lpd
d195 1
a195 1
.Nm Lpd
d205 1
a205 1
The first is the process id of the daemon and the second is the control
d229 1
a229 1
but not under same administrative control.
@


1.5
log
@fix Xr
@
text
@d1 1
a1 1
.\"	$OpenBSD: lpd.8,v 1.4 1997/06/02 09:20:34 deraadt Exp $
d230 1
a230 2
.Xr lpc 8 ,
.Xr pac 8 ,
a231 1
.Xr lpq 1 ,
d234 3
a236 1
.Xr printcap 5
@


1.4
log
@lpd has no support for specifying port option; sounds silly anyways; tinguely@@plains.NoDak.edu
@
text
@d1 1
a1 1
.\"	$OpenBSD: lpd.8,v 1.3 1996/06/17 00:01:54 downsj Exp $
d231 1
a231 1
.Xr pac 1 ,
@


1.3
log
@changed to match pk's commit message: 4.2 -> 4.4, SMM reference
@
text
@d1 1
a1 1
.\"	$OpenBSD: lpd.8,v 1.2 1996/06/16 23:10:03 downsj Exp $
a44 1
.Op Ar port#
a70 7
.It Ar "port#"
The Internet port number used to rendezvous
with other processes is normally obtained with
.Xr getservbyname 3
but can be changed with the
.Ar port#
argument.
@


1.2
log
@netbsd pr#2552: /dev/printer -> /var/run/printer
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d38 1
a38 1
.Os BSD 4.2
d246 1
a246 1
.%T "4.2 BSD Line Printer Spooler Manual"
@


1.1
log
@Initial revision
@
text
@d1 2
d229 1
a229 1
.It Pa /dev/printer
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
