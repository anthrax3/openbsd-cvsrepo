head	1.11;
access;
symbols
	OPENBSD_6_1:1.11.0.18
	OPENBSD_6_1_BASE:1.11
	OPENBSD_6_0:1.11.0.14
	OPENBSD_6_0_BASE:1.11
	OPENBSD_5_9:1.11.0.10
	OPENBSD_5_9_BASE:1.11
	OPENBSD_5_8:1.11.0.12
	OPENBSD_5_8_BASE:1.11
	OPENBSD_5_7:1.11.0.4
	OPENBSD_5_7_BASE:1.11
	OPENBSD_5_6:1.11.0.8
	OPENBSD_5_6_BASE:1.11
	OPENBSD_5_5:1.11.0.6
	OPENBSD_5_5_BASE:1.11
	OPENBSD_5_4:1.11.0.2
	OPENBSD_5_4_BASE:1.11;
locks; strict;
comment	@.\" @;


1.11
date	2013.07.17.15.38.47;	author okan;	state Exp;
branches;
next	1.10;

1.10
date	2013.04.29.04.17.58;	author dlg;	state Exp;
branches;
next	1.9;

1.9
date	2013.04.23.21.18.56;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2013.04.23.05.43.04;	author dlg;	state Exp;
branches;
next	1.7;

1.7
date	2013.04.23.05.38.20;	author dlg;	state Exp;
branches;
next	1.6;

1.6
date	2013.04.23.05.37.35;	author dlg;	state Exp;
branches;
next	1.5;

1.5
date	2013.04.23.01.55.45;	author dlg;	state Exp;
branches;
next	1.4;

1.4
date	2013.04.23.01.46.39;	author dlg;	state Exp;
branches;
next	1.3;

1.3
date	2013.03.18.17.09.11;	author jmc;	state Exp;
branches;
next	1.2;

1.2
date	2013.03.18.08.55.31;	author dlg;	state Exp;
branches;
next	1.1;

1.1
date	2013.03.18.00.34.48;	author dlg;	state Exp;
branches;
next	;


desc
@@


1.11
log
@implement -H, which hides existing and non-existent users, as well as
implying -h.

feedback and ok from jmc@@ and dlg@@
@
text
@.\"   $OpenBSD: identd.8,v 1.10 2013/04/29 04:17:58 dlg Exp $
.\"
.\" Copyright (c) 2013 David Gwynne <dlg@@openbsd.org>
.\"
.\" Permission to use, copy, modify, and distribute this software for any
.\" purpose with or without fee is hereby granted, provided that the above
.\" copyright notice and this permission notice appear in all copies.
.\"
.\" THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
.\" WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
.\" MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
.\" ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
.\" WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
.\" ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
.\" OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
.\"
.Dd $Mdocdate: April 29 2013 $
.Dt IDENTD 8
.Os
.Sh NAME
.Nm identd
.Nd Identification Protocol daemon
.Sh SYNOPSIS
.Nm
.Op Fl 46deHhNn
.Op Fl l Ar address
.Op Fl t Ar timeout
.Sh DESCRIPTION
.Nm
is a server which implements the Identification Protocol as specified in
RFC 1413.
.Pp
.Nm
operates by looking up specific TCP/IP connections and returning
the name of the user running the process responsible for the connection.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl 4
Forces
.Nm
to use IPv4 addresses only.
.It Fl 6
Forces
.Nm
to use IPv6 addresses only.
.It Fl d
Do not daemonize.
If this option is specified,
.Nm
will run in the foreground and log to stderr.
.It Fl e
Always return
.Dq UNKNOWN-ERROR
instead of the
.Dq NO-USER
or
.Dq INVALID-PORT
errors.
.It Fl H
Hide information about existing and non-existent users.
This flag implies
.Fl h .
.It Fl h
Hide the actual information about the user by providing an opaque
token instead.
This token is entered into the local system logs
so that the administrator can later discover who the real user was.
.It Fl l Ar address
Listen on the specified address.
By default
.Nm
listens on wildcard addresses.
.It Fl N
When replying with a user name or ID, first
check for a file
.Pa .noident
in the user's home directory.
If this file is accessible, return
.Dq HIDDEN-USER
instead of the normal USERID response.
.It Fl n
Always return UID numbers instead of usernames.
.It Fl t Ar timeout
Specifies the idle timeout for client connections,
in seconds.
The default timeout is 120 seconds.
.El
.\" .Sh SEE ALSO
.Sh STANDARDS
.Rs
.%A M. St. Johns
.%D February 1993
.%R RFC 1413
.%T Identification Protocol
.Re
.Sh HISTORY
The
.Nm
command was originally a process run via
.Xr inetd 8 .
It was rewritten for
.Ox 5.4
as a persistent non-blocking daemon.
@


1.10
log
@implement -h from libexec/identd, which hides usernames/uids.
@
text
@d1 1
a1 1
.\"   $OpenBSD: identd.8,v 1.9 2013/04/23 21:18:56 sthen Exp $
d17 1
a17 1
.Dd $Mdocdate: April 23 2013 $
d25 1
a25 1
.Op Fl 46dehNn
d60 4
@


1.9
log
@support src/libexec/identd's -e option in src/usr.sbin/identd, ok dlg@@
@
text
@d1 1
a1 1
.\"   $OpenBSD: identd.8,v 1.8 2013/04/23 05:43:04 dlg Exp $
d25 1
a25 1
.Op Fl 46deNn
d60 5
@


1.8
log
@i copied too much from the tftpd manpage. identd doesnt take a directory
argument.
@
text
@d1 1
a1 1
.\"   $OpenBSD: identd.8,v 1.7 2013/04/23 05:38:20 dlg Exp $
d25 1
a25 1
.Op Fl 46dNn
d52 8
@


1.7
log
@i forgot to add -n and -N to the synopsis
@
text
@d1 1
a1 1
.\"   $OpenBSD: identd.8,v 1.6 2013/04/23 05:37:35 dlg Exp $
a27 1
.Ar directory
@


1.6
log
@remove support for specifying which port you want to run on. there's no
point.

well argued by deraadt@@
@
text
@d1 1
a1 1
.\"   $OpenBSD: identd.8,v 1.5 2013/04/23 01:55:45 dlg Exp $
d25 1
a25 1
.Op Fl 46d
@


1.5
log
@add support for returning uids instead of usernames via -n, like libexec
identd.
@
text
@d1 1
a1 1
.\"   $OpenBSD: identd.8,v 1.4 2013/04/23 01:46:39 dlg Exp $
a26 1
.Op Fl p Ar port
a67 8
.It Fl p Ar port
Listen on the specified port.
By default
.Nm
listens on the port indicated in the
.Ql auth
service description; see
.Xr services 5 .
@


1.4
log
@add support for -N as per libexec/identd. this lets users put
.noident in their homedir to have this identd return HIDDEN-USER
instead of their username.
@
text
@d1 1
a1 1
.\"   $OpenBSD: identd.8,v 1.3 2013/03/18 17:09:11 jmc Exp $
d17 1
a17 1
.Dd $Mdocdate: March 18 2013 $
d67 2
@


1.3
log
@make the arg name for -t consistent, and add STANDARDS;
@
text
@d1 1
a1 1
.\"   $OpenBSD: identd.8,v 1.2 2013/03/18 08:55:31 dlg Exp $
d59 8
@


1.2
log
@jmc pointed out i didnt replace the placeholders with the year and my name.
@
text
@d1 1
a1 1
.\"   $OpenBSD: identd.8,v 1.1 2013/03/18 00:34:48 dlg Exp $
d67 3
a69 2
.It Fl t Ar seconds
Specifies the idle timeout for client connections.
d73 7
@


1.1
log
@this is a new identd daemon to replace the libexec one that can be run
from inetd. it is an event driven non-blocking implemention using libevent.

it features support for privilege separation and revocation. network
connections are handled by a chrooted and unprivileged process, while the
username lookups are handled by an unprivileged process. the lookups can
block while the network handling can continue.

it also features support for handling concurrent client connections.

its currently lacking support for handling dotfiles in homedirs like the
libexec one, and some error handling on accept. its going into the tree
so it can be worked on with a history of changes.
@
text
@d1 1
a1 1
.\"   $OpenBSD$
d3 1
a3 1
.\" Copyright (c) YYYY YOUR NAME HERE <user@@your.dom.ain>
d17 1
a17 1
.Dd $Mdocdate: March 4 2012 $
@

