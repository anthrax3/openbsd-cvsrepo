head	1.32;
access;
symbols
	OPENBSD_6_2_BASE:1.32
	OPENBSD_6_1:1.32.0.8
	OPENBSD_6_1_BASE:1.32
	OPENBSD_6_0:1.32.0.4
	OPENBSD_6_0_BASE:1.32
	OPENBSD_5_9:1.32.0.2
	OPENBSD_5_9_BASE:1.32
	OPENBSD_5_8:1.31.0.4
	OPENBSD_5_8_BASE:1.31
	OPENBSD_5_7:1.30.0.2
	OPENBSD_5_7_BASE:1.30
	OPENBSD_5_6:1.29.0.4
	OPENBSD_5_6_BASE:1.29
	OPENBSD_5_5:1.28.0.4
	OPENBSD_5_5_BASE:1.28
	OPENBSD_5_4:1.27.0.10
	OPENBSD_5_4_BASE:1.27
	OPENBSD_5_3:1.27.0.8
	OPENBSD_5_3_BASE:1.27
	OPENBSD_5_2:1.27.0.6
	OPENBSD_5_2_BASE:1.27
	OPENBSD_5_1_BASE:1.27
	OPENBSD_5_1:1.27.0.4
	OPENBSD_5_0:1.27.0.2
	OPENBSD_5_0_BASE:1.27
	OPENBSD_4_9:1.26.0.6
	OPENBSD_4_9_BASE:1.26
	OPENBSD_4_8:1.26.0.4
	OPENBSD_4_8_BASE:1.26
	OPENBSD_4_7:1.26.0.2
	OPENBSD_4_7_BASE:1.26
	OPENBSD_4_6:1.23.0.6
	OPENBSD_4_6_BASE:1.23
	OPENBSD_4_5:1.23.0.2
	OPENBSD_4_5_BASE:1.23
	OPENBSD_4_4:1.21.0.4
	OPENBSD_4_4_BASE:1.21
	OPENBSD_4_3:1.21.0.2
	OPENBSD_4_3_BASE:1.21;
locks; strict;
comment	@.\" @;


1.32
date	2015.11.28.01.22.44;	author gsoares;	state Exp;
branches;
next	1.31;
commitid	KGivUCoNqAzLQMTC;

1.31
date	2015.07.24.15.25.08;	author jmc;	state Exp;
branches;
next	1.30;
commitid	kNCphWSOOHMqvYJM;

1.30
date	2014.12.12.10.05.10;	author reyk;	state Exp;
branches;
next	1.29;
commitid	J8g0vRzthwLCqf68;

1.29
date	2014.06.25.11.12.45;	author reyk;	state Exp;
branches;
next	1.28;
commitid	b8NNT7Q82DkYrCh4;

1.28
date	2014.02.12.11.23.52;	author schwarze;	state Exp;
branches;
next	1.27;

1.27
date	2011.05.19.08.56.49;	author reyk;	state Exp;
branches;
next	1.26;

1.26
date	2009.10.22.15.02.12;	author sobrado;	state Exp;
branches;
next	1.25;

1.25
date	2009.10.22.12.35.53;	author sobrado;	state Exp;
branches;
next	1.24;

1.24
date	2009.08.17.11.36.01;	author reyk;	state Exp;
branches;
next	1.23;

1.23
date	2008.12.31.15.22.27;	author sobrado;	state Exp;
branches;
next	1.22;

1.22
date	2008.12.05.16.37.56;	author reyk;	state Exp;
branches;
next	1.21;

1.21
date	2007.12.20.20.22.11;	author reyk;	state Exp;
branches;
next	1.20;

1.20
date	2007.12.20.20.15.43;	author reyk;	state Exp;
branches;
next	1.19;

1.19
date	2007.12.12.14.55.12;	author jmc;	state Exp;
branches;
next	1.18;

1.18
date	2007.12.08.20.11.48;	author reyk;	state Exp;
branches;
next	1.17;

1.17
date	2007.12.08.17.07.09;	author reyk;	state Exp;
branches;
next	1.16;

1.16
date	2007.12.07.17.28.05;	author reyk;	state Exp;
branches;
next	1.15;

1.15
date	2007.12.07.17.17.01;	author reyk;	state Exp;
branches;
next	1.14;

1.14
date	2007.11.21.09.55.21;	author pyr;	state Exp;
branches;
next	1.13;

1.13
date	2007.10.01.14.02.09;	author pyr;	state Exp;
branches;
next	1.12;

1.12
date	2007.09.28.13.29.56;	author pyr;	state Exp;
branches;
next	1.11;

1.11
date	2007.09.07.08.33.31;	author reyk;	state Exp;
branches;
next	1.10;

1.10
date	2007.08.02.16.10.58;	author pyr;	state Exp;
branches;
next	1.9;

1.9
date	2007.05.31.19.20.24;	author jmc;	state Exp;
branches;
next	1.8;

1.8
date	2007.02.22.03.32.40;	author reyk;	state Exp;
branches;
next	1.7;

1.7
date	2007.02.01.20.03.38;	author pyr;	state Exp;
branches;
next	1.6;

1.6
date	2007.01.09.13.50.10;	author pyr;	state Exp;
branches;
next	1.5;

1.5
date	2006.12.19.14.44.38;	author jmc;	state Exp;
branches;
next	1.4;

1.4
date	2006.12.18.19.48.04;	author jmc;	state Exp;
branches;
next	1.3;

1.3
date	2006.12.16.18.50.33;	author reyk;	state Exp;
branches;
next	1.2;

1.2
date	2006.12.16.11.48.38;	author reyk;	state Exp;
branches;
next	1.1;

1.1
date	2006.12.16.11.45.07;	author reyk;	state Exp;
branches;
next	;


desc
@@


1.32
log
@add missing "log" bits

spotted out by Luiz Gustavo Costa < luizgustavo at mundounix.com.br >, Thanks!

OK jmc@@ jsg@@
@
text
@.\" $OpenBSD: relayctl.8,v 1.31 2015/07/24 15:25:08 jmc Exp $
.\"
.\" Copyright (c) 2007 - 2013 Reyk Floeter <reyk@@openbsd.org>
.\" Copyright (c) 2006 Pierre-Yves Ritschard <pyr@@openbsd.org>
.\"
.\" Permission to use, copy, modify, and distribute this software for any
.\" purpose with or without fee is hereby granted, provided that the above
.\" copyright notice and this permission notice appear in all copies.
.\"
.\" THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
.\" WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
.\" MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
.\" ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
.\" WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
.\" ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
.\" OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
.\"
.Dd $Mdocdate: July 24 2015 $
.Dt RELAYCTL 8
.Os
.Sh NAME
.Nm relayctl
.Nd control the relay daemon
.Sh SYNOPSIS
.Nm
.Ar command
.Op Ar argument ...
.Sh DESCRIPTION
The
.Nm
program controls the
.Xr relayd 8
daemon.
.Pp
The following commands are available:
.Bl -tag -width Ds
.It Cm host disable Op Ar name | id
Disable a host.
Treat it as though it were always down.
.It Cm host enable Op Ar name | id
Enable the host.
Start checking its health again.
.It Cm load Ar filename
Reload the configuration from the specified file.
.It Cm log brief
Disable verbose debug logging.
.It Cm log verbose
Enable verbose debug logging.
.It Cm monitor
Continuously report any changes in the host checking engine and the
.Xr pf 4
engine.
.It Cm poll
Schedule an immediate check of all hosts.
.It Cm redirect disable Op Ar name | id
Disable a redirection.
If it has
.Xr pf 4
redirection rules installed, remove them.
Mark the redirection's main table and \(en
if applicable \(en disable the backup table as well.
.It Cm redirect enable Op Ar name | id
Enable a redirection.
Mark the redirection's main table and \(en if applicable \(en enable
the backup table as well.
.It Cm reload
Reload the configuration file.
.It Cm show hosts
Show detailed status of hosts and tables.
It will also print the last error for failed host checks;
see the
.Sx DIAGNOSTICS
section below.
.It Cm show redirects
Show detailed status of redirections including the current and average
access statistics.
The statistics will be updated every minute.
Redirections using the
.Ic sticky-address
option will count the number of sticky states,
not the total number of redirected connections.
.It Cm show relays
Show detailed status of relays including the current and average
access statistics.
The statistics will be updated every minute.
.It Cm show routers
Show detailed status of routers including the configured network
routes.
.It Cm show sessions
Dump the complete list of running relay sessions.
.It Cm show summary
Display a list of all relays, redirections, routers, tables, and hosts.
.It Cm table disable Op Ar name | id
Disable a table.
Consider all hosts disabled.
If it is a main table of a redirection which has a non-empty backup table,
swap the contents of the
.Xr pf 4
table with those of the backup table.
.It Cm table enable Op Ar name | id
Enable a table.
Start doing checks for all hosts that aren't individually disabled
again.
.El
.Sh FILES
.Bl -tag -width "/var/run/relayd.sockXX" -compact
.It Pa /var/run/relayd.sock
.Ux Ns -domain
socket used for communication with
.Xr relayd 8 .
.El
.Sh DIAGNOSTICS
If a host is down and a previous check failed,
.Nm
will display the last error in the output of the
.Cm show hosts
command.
This is especially useful for debugging server or configuration failures.
The following errors will be reported:
.Pp
.Bl -tag -width Ds -compact
.It Em none
No specific error was reported by the check engine.
.Pp
.It Em aborted
All checks were aborted by an external event, like a configuration reload.
.Pp
.It Em interval timeout
The check did not finish in the configured time of an interval.
This can happen if there are too many hosts that have to be checked by
.Xr relayd 8
and can be avoided by increasing the global
.Ic interval
option in
.Xr relayd.conf 5 .
.Pp
.It Em icmp read timeout
.It Em tls read timeout
.It Em tcp read timeout
The check failed because the remote host did not send a reply within
the configured timeout.
.Pp
.It Em icmp write timeout
.It Em tls write timeout
.It Em tcp write timeout
.It Em tls connect timeout
.It Em tcp connect timeout
The check failed because
.Xr relayd 8
was not ready to send the request within the configured timeout.
.Pp
.It Em tls connect error
.It Em tls read error
.It Em tls write error
.It Em tcp connect error
.It Em tcp read failed
.It Em tcp write failed
An I/O error occurred.
This indicates that
.Xr relayd 8
was running low on resources,
file descriptors, or was too busy to run the request.
It can also indicate that a TLS or TCP protocol error occurred or
that the connection was unexpectedly aborted.
.Pp
.It Em tls connect failed
.It Em tcp connect failed
The check failed because the protocol handshake did not succeed in
opening a stateful connection with the remote host.
.Pp
.It Em script failed
The external script executed by the check did not return a valid return code.
.Pp
.It Em send/expect failed
The payload data returned by the remote host did not match the
expected pattern.
.Pp
.It Em http code malformed
.It Em http digest malformed
The remote host did not return a valid HTTP header or body.
.Pp
.It Em http code mismatch
The remote host did not return a matching HTTP error code.
This may indicate a real server problem (a server error, the page was
not found, permission was denied) or a configuration error.
For example, it is a very common mistake that
.Xr relayd 8
was configured to expect a
HTTP 200 OK
status but the host is returning a
HTTP 302 Found
redirection.
See
.Xr relayd.conf 5
for more information on validating the HTTP return code.
.Pp
.It Em http digest mismatch
The remote host did not return the expected content and the computed
digest was different to the configured value.
See
.Xr relayd.conf 5
for more information on validating the digest.
.El
.Sh SEE ALSO
.Xr relayd 8
.Sh HISTORY
The
.Nm
program, formerly known as
.Ic hoststatectl ,
first appeared in
.Ox 4.1 .
It was renamed to
.Nm
in
.Ox 4.3 .
@


1.31
log
@an TLS -> a TLS; from thanos tsouanas
@
text
@d1 1
a1 1
.\" $OpenBSD: relayctl.8,v 1.30 2014/12/12 10:05:10 reyk Exp $
d18 1
a18 1
.Dd $Mdocdate: December 12 2014 $
d45 4
@


1.30
log
@Change the keyword "ssl" to "tls" to reflect reality since we
effectively disabled support for the SSL protocols.  SSL remains a
common term describing SSL/TLS, there is some controvery about this
change, and the name really doesn't matter, but I feel confident about
it now.

(btw., sthen@@ pointed out some historical context:
http://tim.dierks.org/2014/05/security-standards-and-name-changes-in.html)

OK benno@@, with input from tedu@@
@
text
@d1 1
a1 1
.\" $OpenBSD: relayctl.8,v 1.29 2014/06/25 11:12:45 reyk Exp $
d18 1
a18 1
.Dd $Mdocdate: June 25 2014 $
d159 1
a159 1
It can also indicate that an TLS or TCP protocol error occurred or
@


1.29
log
@I did enough significant changes and/or additions since 2007 after
pyr@@'s initial version to rightfully add my copyright to these files:
sync with reality.
@
text
@d1 1
a1 1
.\" $OpenBSD: relayctl.8,v 1.28 2014/02/12 11:23:52 schwarze Exp $
d18 1
a18 1
.Dd $Mdocdate: February 12 2014 $
d134 1
a134 1
.It Em ssl read timeout
d140 1
a140 1
.It Em ssl write timeout
d142 1
a142 1
.It Em ssl connect timeout
d148 3
a150 3
.It Em ssl connect error
.It Em ssl read error
.It Em ssl write error
d159 2
a160 2
It can also indicate that an SSL/TCP protocol error occurred or that the
connection was unexpectedly aborted.
d162 1
a162 1
.It Em ssl connect failed
@


1.28
log
@in section 8, use DIAGNOSTICS rather than ERRORS,
and add a missing .Pa macro;
from Jan Stary <hans at stare dot cz>
@
text
@d1 1
a1 1
.\" $OpenBSD: relayctl.8,v 1.27 2011/05/19 08:56:49 reyk Exp $
d3 1
d18 1
a18 1
.Dd $Mdocdate: May 19 2011 $
@


1.27
log
@Fix reload support in relayd(8) by reimplementing large parts of the
daemon infrastructure. The previous design made it fairly hard to
reload the complex data structures, especially relays and protocols.
One of the reasons was that the privsep'd relayd processes had two
ways of getting their configuration: 1) from memory after forking from
the parent process and 2) and (partially) via imsgs after reload.  The
new implementation first forks the privsep'd children before the
parents loads the configuration and sends it via imsgs to them; so it
is only like 2) before.  It is based on an approach that I first
implemented for iked(8) and I also fixed many bugs in the code.

Thanks to many testers including dlg@@ sthen@@ phessler@@
ok pyr@@ dlg@@ sthen@@
@
text
@d1 1
a1 1
.\" $OpenBSD: relayctl.8,v 1.26 2009/10/22 15:02:12 sobrado Exp $
d17 1
a17 1
.Dd $Mdocdate: October 22 2009 $
d67 1
a67 1
.Sx ERRORS
d102 1
a102 1
.It /var/run/relayd.sock
d107 1
a107 1
.Sh ERRORS
@


1.26
log
@write UNIX-domain in a more consistent way; while here, replace a
few remaining ".Tn UNIX" macros with ".Ux" ones.

pointed out by ratchov@@, thanks!

ok jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: relayctl.8,v 1.25 2009/10/22 12:35:53 sobrado Exp $
d42 2
@


1.25
log
@use the UNIX-related macros (.At and .Ux) where appropriate.

ok jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: relayctl.8,v 1.24 2009/08/17 11:36:01 reyk Exp $
d17 1
a17 1
.Dd $Mdocdate: August 17 2009 $
d101 2
a102 2
.Ux
domain socket used for communication with
@


1.24
log
@also report routers and their host states in relayctl

ok pyr@@, jmc@@ for man bits
@
text
@d1 1
a1 1
.\" $OpenBSD: relayctl.8,v 1.23 2008/12/31 15:22:27 sobrado Exp $
d17 1
a17 1
.Dd $Mdocdate: December 31 2008 $
d101 2
a102 1
Unix-domain socket used for communication with
@


1.23
log
@an ellipsis allows more than one argument being specified;
sync synopsis/usage.
@
text
@d1 1
a1 1
.\" $OpenBSD: relayctl.8,v 1.22 2008/12/05 16:37:56 reyk Exp $
d17 1
a17 1
.Dd $Mdocdate: December 5 2008 $
d79 3
d85 1
a85 1
Display a list of all relays, redirections, tables, and hosts.
@


1.22
log
@change the way relayd reports check results: instead of logging an
arbitrary string in debugging mode, it will store an error code
(HCE_*) for each host.  the error code can be translated to a string
(in log.c) for debugging but it will also be passed to relayctl via
the control socket.

from a user point of view, this will print a human-readable error
message in the "relayctl show hosts" output if a host is down because
the check failed.  the relayctl(8) manpage includes detailed
explanations of the error messages including mitigations for the
most-common problems.

ok jmc@@ (manpages)
ok phessler@@
@
text
@d1 1
a1 1
.\" $OpenBSD: relayctl.8,v 1.21 2007/12/20 20:22:11 reyk Exp $
d17 1
a17 1
.Dd $Mdocdate: December 20 2007 $
d26 1
a26 1
.Op Ar arguments ...
@


1.21
log
@note that redirections with the sticky-address option will not count
statistics for new connections with sticky states.
@
text
@d1 1
a1 1
.\" $OpenBSD: relayctl.8,v 1.20 2007/12/20 20:15:43 reyk Exp $
d63 4
d100 92
@


1.20
log
@implement statistics for redirections, like the existing statistics
for relays.  they can be viewed with the new "relayctl show redirects"
command.

(uses the previous change to pf_table.c to get the statistics)

looks good pyr@@
@
text
@d1 1
a1 1
.\" $OpenBSD: relayctl.8,v 1.19 2007/12/12 14:55:12 jmc Exp $
d17 1
a17 1
.Dd $Mdocdate: December 12 2007 $
d67 4
@


1.19
log
@various improvements for the relay pages; ok reyk
@
text
@d1 1
a1 1
.\" $OpenBSD: relayctl.8,v 1.18 2007/12/08 20:11:48 reyk Exp $
d17 1
a17 1
.Dd $Mdocdate: December 8 2007 $
d62 5
a66 1
Show detailed status of hosts, tables, and redirections.
@


1.18
log
@service -> redirect

ok pyr@@
@
text
@d1 1
a1 1
.\" $OpenBSD: relayctl.8,v 1.17 2007/12/08 17:07:09 reyk Exp $
d22 1
a22 1
.Nd control the Relay daemon
d44 2
a45 1
pf engine.
a47 2
.It Cm reload
Reload the configuration file.
d54 1
a54 1
if applicable \(en backup table disabled as well.
d57 4
a60 2
Mark the redirection's main table and \(en if applicable \(en backup
table enabled as well.
@


1.17
log
@some changes to the relayd.conf configuration language and grammar.

the tables will look more like pf tables, it is easier to re-use
tables with different options, "services" will become "redirections"
(they refer to rdr pf rules), sync configuration directives of
redirect (l3, ex-service) relay (l7) sections (for example "virtual
host" will become "listen on"), all target definitions will start with
"forward to", etc. pp. (see relay.conf(5) and etc/relayd.conf)

discussed with pyr and deraadt
ok pyr@@
@
text
@d1 1
a1 1
.\" $OpenBSD: relayctl.8,v 1.16 2007/12/07 17:28:05 reyk Exp $
d17 1
a17 1
.Dd $Mdocdate: December 7 2007 $
d49 2
a50 2
.It Cm service disable Op Ar name | id
Disable a service.
d54 1
a54 1
Mark the service's main table and \(en
d56 3
a58 3
.It Cm service enable Op Ar name | id
Enable a service.
Mark the service's main table and \(en if applicable \(en backup
d61 1
a61 1
Show detailed status of hosts, tables, and services.
d69 1
a69 1
Display a list of all relays, services, tables, and hosts.
d73 1
a73 1
If it is a main table of a service which has a non-empty backup table,
@


1.16
log
@adjust the manpages to use "Relay daemon"
@
text
@d1 1
a1 1
.\" $OpenBSD: relayctl.8,v 1.15 2007/12/07 17:17:01 reyk Exp $
d93 3
a95 1
program first appeared in
d97 4
@


1.15
log
@hoststated gets renamed to relayd.  easier to type, and actually says
what the daemon does - it is a relayer that pays attention to the status
of pools of hosts; not a status checkers that happens to do some relaying
@
text
@d1 1
a1 1
.\" $OpenBSD: relayctl.8,v 1.14 2007/11/21 09:55:21 pyr Exp $
d17 1
a17 1
.Dd $Mdocdate: November 21 2007 $
d22 1
a22 1
.Nd control the Host Status daemon
@


1.14
log
@document hoststatectl poll.
prompted by reyk@@
@
text
@d1 1
a1 1
.\" $OpenBSD: hoststatectl.8,v 1.13 2007/10/01 14:02:09 pyr Exp $
d17 2
a18 2
.Dd $Mdocdate: October 1 2007 $
.Dt HOSTSTATECTL 8
d21 1
a21 1
.Nm hoststatectl
d31 1
a31 1
.Xr hoststated 8
d83 2
a84 2
.Bl -tag -width "/var/run/hoststated.sockXX" -compact
.It /var/run/hoststated.sock
d86 1
a86 1
.Xr hoststated 8 .
d89 1
a89 1
.Xr hoststated 8
@


1.13
log
@Sync .nd with other parts of hoststated, prompted by jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: hoststatectl.8,v 1.12 2007/09/28 13:29:56 pyr Exp $
d17 1
a17 1
.Dd $Mdocdate: September 28 2007 $
d45 2
@


1.12
log
@Correct my mail address.
@
text
@d1 1
a1 1
.\" $OpenBSD: hoststatectl.8,v 1.11 2007/09/07 08:33:31 reyk Exp $
d17 1
a17 1
.Dd $Mdocdate: September 7 2007 $
d22 1
a22 1
.Nd control the host status daemon
@


1.11
log
@add a "show sessions" command to dump the complete list of running relay
sessions.
@
text
@d1 1
a1 1
.\" $OpenBSD: hoststatectl.8,v 1.10 2007/08/02 16:10:58 pyr Exp $
d3 1
a3 1
.\" Copyright (c) 2006 Pierre-Yves Ritschard <pyr@@spootnik.org>
d17 1
a17 1
.Dd $Mdocdate: August 2 2007 $
@


1.10
log
@document the reload command.
@
text
@d1 1
a1 1
.\" $OpenBSD: hoststatectl.8,v 1.9 2007/05/31 19:20:24 jmc Exp $
d17 1
a17 1
.Dd $Mdocdate$
d64 2
@


1.9
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\" $OpenBSD: hoststatectl.8,v 1.8 2007/02/22 03:32:40 reyk Exp $
d45 2
@


1.8
log
@Add layer 7 functionality to hoststated used for layer 7
loadbalancing, SSL acceleration, general-purpose TCP relaying, and
transparent proxying.

see hoststated.conf(5) and my upcoming article on undeadly.org for
details.

ok to commit deraadt@@ pyr@@
@
text
@d1 1
a1 1
.\" $OpenBSD: hoststatectl.8,v 1.7 2007/02/01 20:03:38 pyr Exp $
d17 1
a17 1
.Dd November 1, 2006
@


1.7
log
@add a monitor mode to hoststatectl to continuously report changes in
hoststated.
ok reyk@@, "looks nice and clean" niallo@@
@
text
@d1 1
a1 1
.\" $OpenBSD: hoststatectl.8,v 1.6 2007/01/09 13:50:10 pyr Exp $
d56 8
a63 5
.It Cm show Op Cm summary
Show status of services, tables, and hosts.
The keyword
.Cm summary
is optional.
d84 5
@


1.6
log
@Finish renaming hostated to hoststated.
Note to testers: the user the daemon changes its id to is now _hoststated,
don't forget to update master.passwd.
ok reyk@@
@
text
@d1 1
a1 1
.\" $OpenBSD: hoststatectl.8,v 1.5 2006/12/19 14:44:38 jmc Exp $
d42 3
@


1.5
log
@sort these commands too;
@
text
@d1 1
a1 1
.\" $OpenBSD: hostatectl.8,v 1.4 2006/12/18 19:48:04 jmc Exp $
d18 1
a18 1
.Dt HOSTATECTL 8
d21 1
a21 1
.Nm hostatectl
d31 1
a31 1
.Xr hostated 8
d71 2
a72 2
.Bl -tag -width "/var/run/hostated.sockXX" -compact
.It /var/run/hostated.sock
d74 1
a74 1
.Xr hostated 8 .
d77 1
a77 1
.Xr hostated 8
@


1.4
log
@some initial improvements for the hostated pages;
@
text
@d1 1
a1 1
.\" $OpenBSD: hostatectl.8,v 1.3 2006/12/16 18:50:33 reyk Exp $
d36 6
a41 5
.It Cm show Op Cm summary
Show status of services, tables, and hosts.
The keyword
.Cm summary
is optional.
d53 5
a68 6
.It Cm host disable Op Ar name | id
Disable a host.
Treat it as though it were always down.
.It Cm host enable Op Ar name | id
Enable the host.
Start checking its health again.
@


1.3
log
@- allow to use host/service/table names instead of Ids in hostatectl.
- minor change of the "hostatectl show" command output
- increase the max service and tag names (max pf tag name size is 64 now!)

thanks to pyr who found a bug in my initial diff
@
text
@d1 1
a1 1
.\" $OpenBSD: hostatectl.8,v 1.2 2006/12/16 11:48:38 reyk Exp $
d36 5
a40 3
.It Cm show
.It Cm show summary
Show status of services, tables and hosts.
d46 2
a47 2
Mark the service's main table and -
if applicable - backup table disabled as well.
d50 1
a50 1
Mark the service's main table and - if applicable - backup
a76 1
.Xr hostated.conf 5 ,
@


1.2
log
@new sentence, new line
@
text
@d1 1
a1 1
.\" $OpenBSD: hostatectl.8,v 1.1 2006/12/16 11:45:07 reyk Exp $
d39 1
a39 1
.It Cm service disable id
d46 1
a46 1
.It Cm service enable id
d50 1
a50 1
.It Cm table disable id
d57 1
a57 1
.It Cm table enable id
d61 1
a61 1
.It Cm host disable id
d64 1
a64 1
.It Cm host enable id
@


1.1
log
@Import hostated, the host status daemon.  This daemon will monitor
remote hosts and dynamically alter pf(4) tables and redirection rules
for active server load balancing.  The daemon has been written by
Pierre-Yves Ritschard (pyr at spootnik.org) and was formerly known as
"slbd".

The daemon is fully functional but it still needs some work and
cleanup so we don't link it to the build yet.  Some TODOs are a
partial rewrite of the check_* routines (use libevent whenever we
can), improvement of the manpages, and general knf and cleanup.

ok deraadt@@ claudio@@
@
text
@d1 1
a1 1
.\" $OpenBSD$
d40 2
a41 1
Disable a service. If it has
d43 2
a44 1
redirection rules installed, remove them. Mark the service's main table and -
d47 2
a48 1
Enable a service. Mark the service's main table and - if applicable - backup
d51 3
a53 2
Disable a table. Consider all hosts disabled. If it is a 
main table of a service which has a non-empty backup table,
d58 3
a60 2
Enable a table. Start doing checks for all hosts that aren't
individually disabled again.
d62 2
a63 1
Disable a host. Treat it as though it were always down.
d65 2
a66 1
Enable the host. Start checking its health again.
@

