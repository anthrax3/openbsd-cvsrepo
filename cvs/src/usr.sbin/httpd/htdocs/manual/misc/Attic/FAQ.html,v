head	1.16;
access;
symbols
	OPENBSD_5_5:1.15.0.12
	OPENBSD_5_5_BASE:1.15
	OPENBSD_5_4:1.15.0.8
	OPENBSD_5_4_BASE:1.15
	OPENBSD_5_3:1.15.0.6
	OPENBSD_5_3_BASE:1.15
	OPENBSD_5_2:1.15.0.4
	OPENBSD_5_2_BASE:1.15
	OPENBSD_5_1_BASE:1.15
	OPENBSD_5_1:1.15.0.2
	OPENBSD_5_0:1.14.0.32
	OPENBSD_5_0_BASE:1.14
	OPENBSD_4_9:1.14.0.30
	OPENBSD_4_9_BASE:1.14
	OPENBSD_4_8:1.14.0.28
	OPENBSD_4_8_BASE:1.14
	OPENBSD_4_7:1.14.0.24
	OPENBSD_4_7_BASE:1.14
	OPENBSD_4_6:1.14.0.26
	OPENBSD_4_6_BASE:1.14
	OPENBSD_4_5:1.14.0.22
	OPENBSD_4_5_BASE:1.14
	OPENBSD_4_4:1.14.0.20
	OPENBSD_4_4_BASE:1.14
	OPENBSD_4_3:1.14.0.18
	OPENBSD_4_3_BASE:1.14
	OPENBSD_4_2:1.14.0.16
	OPENBSD_4_2_BASE:1.14
	OPENBSD_4_1:1.14.0.14
	OPENBSD_4_1_BASE:1.14
	OPENBSD_4_0:1.14.0.12
	OPENBSD_4_0_BASE:1.14
	OPENBSD_3_9:1.14.0.10
	OPENBSD_3_9_BASE:1.14
	OPENBSD_3_8:1.14.0.8
	OPENBSD_3_8_BASE:1.14
	OPENBSD_3_7:1.14.0.6
	OPENBSD_3_7_BASE:1.14
	OPENBSD_3_6:1.14.0.4
	OPENBSD_3_6_BASE:1.14
	OPENBSD_3_5:1.14.0.2
	OPENBSD_3_5_BASE:1.14
	apache_1_3_29-mod_ssl_2_8_16:1.1.1.6
	OPENBSD_3_4:1.13.0.2
	OPENBSD_3_4_BASE:1.13
	apache_1_3_28-mod_ssl_2_8_15:1.1.1.5
	OPENBSD_3_3:1.12.0.2
	OPENBSD_3_3_BASE:1.12
	apache_1_3_27-mod_ssl_2_8_12:1.1.1.4
	apache_1_3_27:1.1.1.4
	OPENBSD_3_2:1.11.0.2
	OPENBSD_3_2_BASE:1.11
	apache_1_3_26:1.1.1.3
	OPENBSD_3_1:1.10.0.2
	OPENBSD_3_1_BASE:1.10
	OPENBSD_3_0:1.8.0.4
	OPENBSD_3_0_BASE:1.8
	OPENBSD_2_9_BASE:1.8
	OPENBSD_2_9:1.8.0.2
	OPENBSD_2_8:1.6.0.4
	OPENBSD_2_8_BASE:1.6
	OPENBSD_2_7:1.6.0.2
	OPENBSD_2_7_BASE:1.6
	OPENBSD_2_6:1.4.0.2
	OPENBSD_2_6_BASE:1.4
	OPENBSD_2_5:1.3.0.2
	OPENBSD_2_5_BASE:1.3
	OPENBSD_2_4:1.2.0.2
	OPENBSD_2_4_BASE:1.2
	apache_1_3_2:1.1.1.2
	OPENBSD_2_3:1.1.1.1.0.2
	OPENBSD_2_3_BASE:1.1.1.1
	apache:1.1.1
	apache_1_2_6:1.1.1;
locks; strict;
comment	@# @;


1.16
date	2014.04.22.14.47.24;	author henning;	state dead;
branches;
next	1.15;

1.15
date	2012.01.29.15.05.05;	author jmc;	state Exp;
branches;
next	1.14;

1.14
date	2003.11.17.18.57.05;	author henning;	state Exp;
branches;
next	1.13;

1.13
date	2003.08.21.13.11.32;	author henning;	state Exp;
branches;
next	1.12;

1.12
date	2002.10.07.21.04.43;	author henning;	state Exp;
branches;
next	1.11;

1.11
date	2002.07.19.21.31.14;	author henning;	state Exp;
branches;
next	1.10;

1.10
date	2002.03.29.02.08.04;	author beck;	state Exp;
branches;
next	1.9;

1.9
date	2002.02.12.07.56.47;	author beck;	state Exp;
branches;
next	1.8;

1.8
date	2001.03.29.10.21.30;	author beck;	state Exp;
branches;
next	1.7;

1.7
date	2000.12.15.22.17.28;	author beck;	state Exp;
branches;
next	1.6;

1.6
date	2000.03.19.11.16.29;	author beck;	state Exp;
branches;
next	1.5;

1.5
date	2000.01.25.18.29.23;	author beck;	state Exp;
branches;
next	1.4;

1.4
date	99.09.29.06.29.00;	author beck;	state Exp;
branches;
next	1.3;

1.3
date	99.03.01.01.05.09;	author beck;	state Exp;
branches;
next	1.2;

1.2
date	98.10.11.19.45.05;	author beck;	state Exp;
branches;
next	1.1;

1.1
date	98.03.25.07.08.35;	author beck;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.03.25.07.08.35;	author beck;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	98.10.01.17.20.10;	author beck;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2002.07.19.21.28.06;	author henning;	state Exp;
branches;
next	1.1.1.4;

1.1.1.4
date	2002.10.07.19.48.09;	author henning;	state Exp;
branches;
next	1.1.1.5;

1.1.1.5
date	2003.08.21.12.53.31;	author henning;	state Exp;
branches;
next	1.1.1.6;

1.1.1.6
date	2003.11.17.17.03.14;	author henning;	state Exp;
branches;
next	;


desc
@@


1.16
log
@this commit is really florian@@'s, since he's the one who made removal
of our forked apache possible by his work on nginx and slowcgi, but he
doesn't want it - so it is my pleasure to tedu it. I spent so much work
on chroot in it 10 years ago - and am very happy to see it go now, nginx
is a far better choice today.
Bye bye, Apache, won't miss you.
@
text
@<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta name="generator" content="HTML Tidy, see www.w3.org" />

    <title>Apache Server Frequently Asked Questions</title>
    
  </head>
  <!-- Background white, links blue (unvisited), navy (visited), red (active) -->

  <body bgcolor="#FFFFFF" text="#000000" link="#0000FF"
  vlink="#000080" alink="#FF0000">
        <div align="CENTER">
      <img src="../images/sub.gif" alt="[APACHE DOCUMENTATION]" /> 

      <h3>Apache HTTP Server Version 1.3</h3>
    </div>


    <h1 align="CENTER">Apache Server Frequently Asked
    Questions</h1>

    <p>The latest version of this FAQ is always available from the
    main Apache web site, at &lt;<a
    href="http://httpd.apache.org/docs/misc/FAQ.html"
    rel="Help"><samp>http://httpd.apache.org/docs/misc/FAQ.html</samp></a>&gt;.</p>
    <!-- Notes about changes:                                           -->
    <!--  - If adding a relative link to another part of the            -->
    <!--    documentation, *do* include the ".html" portion.  There's a -->
    <!--    good chance that the user will be reading the documentation -->
    <!--    on his own system, which may not be configured for          -->
    <!--    multiviews.                                                 -->
    <!--  - When adding items, make sure they're put in the right place -->
    <!--    - verify that the numbering matches up.                     -->
    <!--  - *Don't* use <PRE></PRE> blocks - they don't appear          -->
    <!--    correctly in a reliable way when this is converted to text  -->
    <!--    with Lynx.  Use <DL><DD><CODE>xxx<BR>xx</CODE></DD></DL>    -->
    <!--    blocks inside a <P></P> instead.  This is necessary to get  -->
    <!--    the horizontal and vertical indenting right.                -->
    <!--  - Don't forget to include an HR tag after the last /P tag     -->
    <!--    but before the /LI in an item.                              -->

    <p>If you are reading a text-only version of this FAQ, you may
    find numbers enclosed in brackets (such as "[12]"). These refer
    to the list of reference URLs to be found at the end of the
    document. These references do not appear, and are not needed,
    for the hypertext version.</p>

    <h2>The Questions</h2>
    <!-- Stuff to Add:                                                  -->
    <!-- - can't bind to port 80                                        -->
    <!--   - permission denied                                          -->
    <!--   - address already in use                                     -->
    <!-- - mod_auth & passwd lines "user:pw:.*" - ++1st colon onward is -->
    <!--   treated as pw, not just ++1st to \-\-2nd.                    -->
    <!-- - SSL:                                                         -->
    <!--   - Can I use Apache-SSL for free in Canada?                   -->
    <!--   - Why can't I use Apache-SSL in the U.S.?                    -->
    <!-- - How can I found out how many visitors my site gets?          -->
    <!-- - How do I add a counter?                                      -->
    <!-- - How do I configure Apache as a proxy?                        -->
    <!-- - What browsers support HTTP/1.1?                              -->
    <!-- - What's the point of vhosts-by-name is there aren't any       -->
    <!--   HTTP/1.1 browsers?                                           -->
    <!-- - Is there an Apache for W95/WNT?                              -->
    <!-- - Why does Apache die when a vhost can't be DNS-resolved?      -->
    <!-- - Why do I get "send lost connection" messages in my error     -->
    <!--   log?                                                         -->
    <!--   - specifically consider .pdf files which seem to cause this  -->
    <!--     a lot when accessed via the plugin ... and also mention    -->
    <!--     how range-requests can cause bytes served < file size      -->
    <!-- - Why do directory indexes appear as garbage?  (A: -lucb)      -->
    <!-- - How do I add a footer to all pages offered by my server?     -->
    <!-- - Fix midi question; a bigger problem than midi vs. x-midi is  -->
    <!--   the simple fact that older versions of Apache (and new ones  -->
    <!--   that have been upgraded without upgrading the mime.types     -->
    <!--   file) don't have the type listed at all.                     -->
    <!-- - RewriteRule /~fraggle/* /cgi-bin/fraggle.pl does not work    -->
    <!-- - how do I disable authentication for a subdirectory?          -->
    <!--   (A: you can't but "Satisfy any; Allow from all" can be close -->
    <!-- - '400 malformed request' on Win32 might mean stale proxy; see -->
    <!--   PR #2300.                                                    -->
    <!-- - how do I tell what version of Apache I am running?           -->

    <ol type="A">
      








      

      <li value="1">
        <strong>Background</strong> 

        <ol>
          <li><a href="#what">What is Apache?</a></li>

          <li><a href="#why">How and why was Apache
          created?</a></li>

          <li><a href="#name">Why the name "Apache"?</a></li>

          <li><a href="#compare">OK, so how does Apache compare to
          other servers?</a></li>

          <li><a href="#tested">How thoroughly tested is
          Apache?</a></li>

          <li><a href="#future">What are the future plans for
          Apache?</a></li>

          <li><a href="#support">Whom do I contact for
          support?</a></li>

          <li><a href="#more">Is there any more information on
          Apache?</a></li>

          <li><a href="#where">Where can I get Apache?</a></li>

          <li><a href="#logo">May I use the Apache logo on my
          product or Web site?</a></li>
        </ol>
      </li>
      
      
    
    
  </body>
</html>


      








      

      <li value="2">
        <strong>General Technical Questions</strong> 

        <ol>
          <li><a href="#what2do">"Why can't I ...? Why won't ...
          work?" What to do in case of problems</a></li>

          <li><a href="#compatible">How compatible is Apache with
          my existing NCSA 1.3 setup?</a></li>

          <li><a href="#year2000">Is Apache Year 2000
          compliant?</a></li>

          <li><a href="#submit_patch">How do I submit a patch to
          the Apache Group?</a></li>

          <li><a href="#domination">Why has Apache stolen my
          favourite site's Internet address?</a></li>

          <li><a href="#apspam">Why am I getting spam mail from the
          Apache site?</a></li>

          <li><a href="#redist">May I include the Apache software
          on a CD or other package I'm distributing?</a></li>

          <li><a href="#zoom">What's the best hardware/operating
          system/... How do I get the most out of my Apache Web
          server?</a></li>

          <li><a href="#regex">What are "regular
          expressions"?</a></li>

          <li><a href="#binaries">Why isn't there a binary for my
          platform?</a></li>
        </ol>
      </li>
      
      
    
    
  </body>
</html>


      








      

      <li value="3">
        <strong>Building Apache</strong> 

        <ol>
          <li><a href="#bind8.1">Why do I get an error about an
          undefined reference to "<samp>__inet_ntoa</samp>" or
          other <samp>__inet_*</samp> symbols?</a></li>

          <li><a href="#cantbuild">Why won't Apache compile with my
          system's <samp>cc</samp>?</a></li>

          <li><a href="#linuxiovec">Why do I get complaints about
          redefinition of "<code>struct iovec</code>" when
          compiling under Linux?</a></li>

          <li><a href="#broken-gcc">I'm using gcc and I get some
          compilation errors, what is wrong?</a></li>

          <li><a href="#glibc-crypt">I'm using RedHat Linux 5.0, or
          some other <samp>glibc</samp>-based Linux system, and I
          get errors with the <code>crypt</code> function when I
          attempt to build Apache 1.2.</a></li>
        </ol>
      </li>
      
      
    
    
  </body>
</html>


      








      

      <li value="4">
        <strong>Error Log Messages and Problems Starting
        Apache</strong> 

        <ol>
          <li><a href="#setgid">Why do I get "<samp>setgid: Invalid
          argument</samp>" at startup?</a></li>

          <li><a href="#nodelay">Why am I getting "<samp>httpd:
          could not set socket option TCP_NODELAY</samp>" in my
          error log?</a></li>

          <li><a href="#peerreset">Why am I getting
          "<samp>connection reset by peer</samp>" in my error
          log?</a></li>

          <li><a href="#wheres-the-dump">The errorlog says Apache
          dumped core, but where's the dump file?</a></li>

          <li><a href="#linux-shmget">When I run it under Linux I
          get "shmget: function not found", what should I
          do?</a></li>

          <li><a href="#nfslocking">Server hangs, or fails to
          start, and/or error log fills with "<samp>fcntl:
          F_SETLKW: No record locks available</samp>" or similar
          messages</a></li>

          <li><a href="#aixccbug">Why am I getting "<samp>Expected
          &lt;/Directory&gt; but saw &lt;/Directory&gt;</samp>"
          when I try to start Apache?</a></li>

          <li><a href="#redhat">I'm using RedHat Linux and I have
          problems with httpd dying randomly or not restarting
          properly</a></li>

          <li><a href="#stopping">I upgraded from an Apache version
          earlier than 1.2.0 and suddenly I have problems with
          Apache dying randomly or not restarting properly</a></li>

          <li><a href="#setservername">When I try to start Apache
          from a DOS window, I get a message like "<samp>Cannot
          determine host name. Use ServerName directive to set it
          manually.</samp>" What does this mean?</a></li>

          <li><a href="#ws2_32dll">When I try to start Apache for
          Windows, I get a message like "<samp>Unable To Locate
          WS2_32.DLL...</samp>". What should I do?</a></li>

          <li><a href="#WSADuplicateSocket">Apache for Windows does
          not start. Error log contains this message "<samp>[crit]
          (10045) The attempted operation is not supported for the
          type of object referenced: Parent: WSADuplicateSocket
          failed for socket ###</samp>". What does this
          mean?</a></li>

          <li><a href="#err1067">When I try to start Apache on
          Windows, I get a message like "<code>System error 1067
          has occurred. The process terminated
          unexpectedly.</code>" What does this mean?</a></li>

          <li><a href="#suseFDN">On a SuSE Linux system, I try and 
          configure access control using basic authentication.
	  Although I follow the example exactly, authentication
	  fails, and an error message "<code>admin: not a valid
	  FDN: ....</code>" is logged.</a></li>

          <li><a href="#codered">Why do I have weird entries in my
          logs asking for <code>default.ida</code> and
          <code>cmd.exe</code>?</a></li>

          <li><a href="#restart">Why am I getting server restart
          messages periodically, when I did not restart the
          server?</a></li>

          <li><a href="#modulemagic">Why am I getting &quot;module
          <em>module-name</em> is not compatible with this version of
          Apache&quot; messages in my error log?</a></li>

        </ol>
      </li>
      
      
    
    
  </body>
</html>


      








      

      <li value="5">
        <strong>Configuration Questions</strong> 

        <ol>
          <li><a href="#fdlim">Why can't I run more than
          &lt;<em>n</em>&gt; virtual hosts?</a></li>

          <li><a href="#freebsd-setsize">Can I increase
          <samp>FD_SETSIZE</samp> on FreeBSD?</a></li>

          <li><a href="#errordoc401">Why doesn't my
          <code>ErrorDocument 401</code> work?</a></li>

          <li><a href="#cookies1">Why does Apache send a cookie on
          every response?</a></li>

          <li><a href="#jdk1-and-http1.1">Why do my Java app[let]s
          give me plain text when I request an URL from an Apache
          server?</a></li>

          <li><a href="#midi">How do I get Apache to send a MIDI
          file so the browser can play it?</a></li>

          <li><a href="#addlog">How do I add browsers and referrers
          to my logs?</a></li>

          <li><a href="#set-servername">Why does accessing
          directories only work when I include the trailing "/"
          (<em>e.g.</em>,&nbsp;<samp>http://foo.domain.com/~user/</samp>)
          but not when I omit it
          (<em>e.g.</em>,&nbsp;<samp>http://foo.domain.com/~user</samp>)?</a></li>

          <li><a href="#no-info-directives">Why doesn't mod_info
          list any directives?</a></li>

          <li><a href="#namevhost">I upgraded to Apache 1.3 and now
          my virtual hosts don't work!</a></li>

          <li><a href="#redhat-htm">I'm using RedHat Linux and my
          .htm files are showing up as HTML source rather than
          being formatted!</a></li>

          <li><a href="#htaccess-work">My <code>.htaccess</code>
          files are being ignored.</a></li>

          <li><a href="#forbidden">Why do I get a
          "<samp>Forbidden</samp>" message whenever I try to access
          a particular directory?</a></li>

          <li><a href="#malfiles">Why do I get a
          "<samp>Forbidden/You don't have permission to access / on
          this server</samp>" message whenever I try to access my
          server?</a></li>

          <li><a href="#ie-ignores-mime">Why do my files appear
          correctly in Internet Explorer, but show up as source or
          trigger a save window with Netscape; or, Why doesn't
          Internet Explorer render my text/plain document
          correctly?</a></li>

	  <li><a href="#canonical-hostnames">My site is accessible
          under many different hostnames; how do I redirect clients
          so that they see only a single name?</a></li>

          <li><a href="#firewall">Why can I access my website from the
          server or from my local network, but I can't access it from
          elsewhere on the Internet?</a></li>

	  <li><a href="#indexes">How do I turn automatic directory listings
	  on or off?</a></li>

         <li><a href="#options">Why do my Options directives not have
         the desired effect?</a></li>

         <li><a href="#serverheader">How can I change the information
         that Apache returns about itself in the headers?</a></li>

         <li><a href="#proxyscan">Why do I see requests for other sites
         appearing in my log files?</a></li>

        </ol>
      </li>
      
      
    
    
  </body>
</html>


      








      

      <li value="6">
        <strong>Dynamic Content (CGI and SSI)</strong> 

        <ol>
          <li><a href="#CGIoutsideScriptAlias">How do I enable CGI
          execution in directories other than the
          ScriptAlias?</a></li>

          <li><a href="#premature-script-headers">What does it mean
          when my CGIs fail with "<samp>Premature end of script
          headers</samp>"?</a></li>

          <li><a href="#POSTnotallowed">Why do I keep getting
          "Method Not Allowed" for form POST requests?</a></li>

          <li><a href="#nph-scripts">How can I get my script's
          output without Apache buffering it? Why doesn't my server
          push work?</a></li>

          <li><a href="#cgi-spec">Where can I find the "CGI
          specification"?</a></li>

          <li><a href="#fastcgi">Why isn't FastCGI included with
          Apache any more?</a></li>

          <li><a href="#ssi-part-i">How do I enable SSI (parsed
          HTML)?</a></li>

          <li><a href="#ssi-part-ii">Why don't my parsed files get
          cached?</a></li>

          <li><a href="#ssi-part-iii">How can I have my script
          output parsed?</a></li>

          <li><a href="#ssi-part-iv">SSIs don't work for
          VirtualHosts and/or user home directories</a></li>

          <li><a href="#errordocssi">How can I use
          <code>ErrorDocument</code> and SSI to simplify customized
          error messages?</a></li>

          <li><a href="#remote-user-var">Why is the environment
          variable <samp>REMOTE_USER</samp> not set?</a></li>

          <li><a href="#user-cgi">How do I allow each of my user
          directories to have a cgi-bin directory?</a></li>
        </ol>
      </li>
      
      
    
    
  </body>
</html>


      








      

      <li value="7">
        <strong>Authentication and Access Restrictions</strong> 

        <ol>
          <li><a href="#dnsauth">Why isn't restricting access by
          host or domain name working correctly?</a></li>

          <li><a href="#user-authentication">How do I set up Apache
          to require a username and password to access certain
          documents?</a></li>

          <li><a href="#remote-auth-only">How do I set up Apache to
          allow access to certain documents only if a site is
          either a local site <em>or</em> the user supplies a
          password and username?</a></li>

          <li><a href="#authauthoritative">Why does my
          authentication give me a server error?</a></li>

          <li><a href="#auth-on-same-machine">Do I have to keep the
          (mSQL) authentication information on the same
          machine?</a></li>

          <li><a href="#msql-slow">Why is my mSQL authentication
          terribly slow?</a></li>

          <li><a href="#passwdauth">Can I use my
          <samp>/etc/passwd</samp> file for Web page
          authentication?</a></li>

          <li><a href="#prompted-twice">Why does Apache ask for my
          password twice before serving a file?</a></li>

          <li><a href="#image-theft">How can I prevent people from
          "stealing" the images from my web site?</a></li>

        </ol>
      </li>
      
      
    
    
  </body>
</html>


      








      

      <li value="8">
        <strong>URL Rewriting</strong> 

        <ol>
          <li><a href="#rewrite-more-config">Where can I find
          mod_rewrite rulesets which already solve particular
          URL-related problems?</a></li>

          <li><a href="#rewrite-article">Where can I find any
          published information about URL-manipulations and
          mod_rewrite?</a></li>

          <li><a href="#rewrite-complexity">Why is mod_rewrite so
          difficult to learn and seems so complicated?</a></li>

          <li><a href="#rewrite-dontwork">What can I do if my
          RewriteRules don't work as expected?</a></li>

          <li><a href="#rewrite-prefixdocroot">Why don't some of my
          URLs get prefixed with DocumentRoot when using
          mod_rewrite?</a></li>

          <li><a href="#rewrite-nocase">How can I make all my URLs
          case-insensitive with mod_rewrite?</a></li>

          <li><a href="#rewrite-virthost">Why are RewriteRules in
          my VirtualHost parts ignored?</a></li>

          <li><a href="#rewrite-envwhitespace">How can I use
          strings with whitespaces in RewriteRule's ENV
          flag?</a></li>
        </ol>
      </li>
      
      
    
    
  </body>
</html>


      








      

      <li value="9">
        <strong>Features</strong> 

        <ol>
          <li><a href="#proxy">Does or will Apache act as a Proxy
          server?</a></li>

          <li><a href="#multiviews">What are "multiviews"?</a></li>

          <li><a href="#putsupport">Why can't I publish to my
          Apache server using PUT on Netscape Gold and other
          programs?</a></li>

          <li><a href="#SSL-i">Why doesn't Apache include
          SSL?</a></li>

          <li><a href="#footer">How can I attach a footer to my
          documents without using SSI?</a></li>

          <li><a href="#search">Does Apache include a search
          engine?</a></li>

          <li><a href="#rotate">How can I rotate my log
          files?</a></li>

          <li><a href="#conditional-logging">How do I keep certain
          requests from appearing in my logs?</a></li>

          <li><a href="#dbinteg">Does Apache include any sort of
          database integration?</a></li>

          <li><a href="#asp">Can I use Active Server Pages (ASP)
          with Apache?</a></li>

          <li><a href="#java">Does Apache come with Java
          support?</a></li>
        </ol>
      </li>
      
      
    
    
  </body>
</html>


    </ol>
    <hr />

    <h2>The Answers</h2>
    








      
      
    

    <h3>A. Background</h3>

    <ol>
      <li>
        <a id="what" name="what"><strong>What is
        Apache?</strong></a> 

        <p>The Apache httpd server</p>

        <ul>
          <li>is a powerful, flexible, HTTP/1.1 compliant web
          server</li>

          <li>implements the latest protocols, including HTTP/1.1
          (RFC2616)</li>

          <li>is highly configurable and extensible with
          third-party modules</li>

          <li>can be customised by writing 'modules' using the
          Apache module API</li>

          <li>provides full source code and comes with an
          unrestrictive license</li>

          <li>runs on Windows NT/9x, Netware 5.x and above, OS/2, and most
          versions of Unix, as well as several other operating
          systems</li>

          <li>is actively being developed</li>

          <li>encourages user feedback through new ideas, bug
          reports and patches</li>

          <li>
            implements many frequently requested features,
            including:<br />
            <br />
             

            <dl>
              <dt>DBM databases for authentication</dt>

              <dd>allows you to easily set up password-protected
              pages with enormous numbers of authorized users,
              without bogging down the server.</dd>

              <dt>Customized responses to errors and problems</dt>

              <dd>Allows you to set up files, or even CGI scripts,
              which are returned by the server in response to
              errors and problems, e.g. setup a script to intercept
              <strong>500 Server Error</strong>s and perform
              on-the-fly diagnostics for both users and
              yourself.</dd>

              <dt>Multiple DirectoryIndex directives</dt>

              <dd>Allows you to say <code>DirectoryIndex index.html
              index.cgi</code>, which instructs the server to
              either send back <code>index.html</code> or run
              <code>index.cgi</code> when a directory URL is
              requested, whichever it finds in the directory.</dd>

              <dt>Unlimited flexible URL rewriting and
              aliasing</dt>

              <dd>Apache has no fixed limit on the numbers of
              Aliases and Redirects which may be declared in the
              config files. In addition, a powerful rewriting
              engine can be used to solve most URL manipulation
              problems.</dd>

              <dt>Content negotiation</dt>

              <dd>i.e. the ability to automatically serve clients
              of varying sophistication and HTML level compliance,
              with documents which offer the best representation of
              information that the client is capable of
              accepting.</dd>

              <dt>Virtual Hosts</dt>

              <dd>A much requested feature, sometimes known as
              multi-homed servers. This allows the server to
              distinguish between requests made to different IP
              addresses or names (mapped to the same machine).
              Apache also offers dynamically configurable
              mass-virtual hosting.</dd>

              <dt>Configurable Reliable Piped Logs</dt>

              <dd>You can configure Apache to generate logs in the
              format that you want. In addition, on most Unix
              architectures, Apache can send log files to a pipe,
              allowing for log rotation, hit filtering, real-time
              splitting of multiple vhosts into separate logs, and
              asynchronous DNS resolving on the fly.</dd>
            </dl>
          </li>
        </ul>
        <hr />
      </li>

      <li>
        <a id="why" name="why"><strong>How and why was Apache
        created?</strong></a> 

        <p>The <a
        href="http://httpd.apache.org/ABOUT_APACHE.html">About
        Apache</a> document explains how the Apache project evolved
        from its beginnings as an outgrowth of the NCSA httpd
        project to its current status as one of the fastest, most
        efficient, and most functional web servers in
        existence.</p>
        <hr />
      </li>

      <li>
        <a id="name" name="name"><strong>Why the name
        "Apache"?</strong></a> 

        <p>The name 'Apache' was chosen from respect for
        the Native American Indian tribe of Apache (Ind&eacute;),
        <a href="http://www.indians.org/welker/apache.htm">well-known
        for their superior skills in warfare strategy and their
        inexhaustible endurance</a>. For more information on the
        Apache Nation, we suggest searching
        <a href="http://www.google.com/search?q=Apache+Nation">Google</a>,
        <a href="http://www.northernlight.com/nlquery.fcg?qr=Apache+Nation"
          >Northernlight</a>, or
        <a href="http://www.alltheweb.com/cgi-bin/asearch?query=Apache+Nation"
          >AllTheWeb</a>.</p>

        <p>Secondarily, and more popularly (though incorrectly) accepted,
        it's a considered cute name which stuck. Apache is "<strong>A
        PA</strong>t<strong>CH</strong>y server". It was based on
        some existing code and a series of "patch files".</p>

        <hr />
      </li>

      <li>
        <a id="compare" name="compare"><strong>OK, so how does
        Apache compare to other servers?</strong></a> 

        <p>For an independent assessment, see <a
        href="http://webcompare.internet.com/">Web
        Compare</a>.</p>

        <p>Apache has been shown to be substantially faster, more
        stable, and more feature-full than many other web servers.
        Although certain commercial servers have claimed to surpass
        Apache's speed (it has not been demonstrated that any of
        these "benchmarks" are a good way of measuring WWW server
        speed at any rate), we feel that it is better to have a
        mostly-fast free server than an extremely-fast server that
        costs thousands of dollars. Apache is run on sites that get
        millions of hits per day, and they have experienced no
        performance difficulties.</p>
        <hr />
      </li>

      <li>
        <a id="tested" name="tested"><strong>How thoroughly tested
        is Apache?</strong></a> 

        <p>Apache is run on over 6 million Internet servers (as of
        February 2000). It has been tested thoroughly by both
        developers and users. The Apache Group maintains rigorous
        standards before releasing new versions of their server,
        and our server runs without a hitch on over one half of all
        WWW servers available on the Internet. When bugs do show
        up, we release patches and new versions as soon as they are
        available.</p>
        <hr />
      </li>

      <li>
        <a id="future" name="future"><strong>What are the future
        plans for Apache?</strong></a> 

        <ul>
          <li>to continue to be an "open source" no-charge-for-use
          HTTP server,</li>

          <li>to keep up with advances in HTTP protocol and web
          developments in general,</li>

          <li>to collect suggestions for fixes/improvements from
          its users,</li>

          <li>to respond to needs of large volume providers as well
          as occasional users.</li>
        </ul>
        <hr />
      </li>

      <li>
        <a id="support" name="support"><strong>Whom do I contact
        for support?</strong></a> 

        <p>There is no official support for Apache. None of the
        developers want to be swamped by a flood of trivial
        questions that can be resolved elsewhere. Bug reports and
        suggestions should be sent <em>via</em> <a
        href="http://httpd.apache.org/bug_report.html">the bug
        report page</a>. Other questions should be directed to the
        <a href="http://httpd.apache.org/userslist.html">Apache HTTP
        Server Users List</a> or the
        <a
        href="news:comp.infosystems.www.servers.unix">comp.infosystems.www.servers.unix</a>
        or <a
        href="news:comp.infosystems.www.servers.ms-windows">comp.infosystems.www.servers.ms-windows</a>
        newsgroup (as appropriate for the platform you use), where
        some of the Apache team lurk, in the company of many other
        httpd gurus who should be able to help.</p>

        <p>Commercial support for Apache is, however, available
        from a number of third parties.</p>
        <hr />
      </li>

      <li>
        <a id="more" name="more"><strong>Is there any more
        information available on Apache?</strong></a> 

        <p>Indeed there is. See the main <a
        href="http://httpd.apache.org/">Apache web site</a>. There
        is also a regular electronic publication called <a
        href="http://www.apacheweek.com/" rel="Help"><cite>Apache
        Week</cite></a> available. Links to relevant <cite>Apache
        Week</cite> articles are included below where appropriate.
        There are also some <a
        href="http://httpd.apache.org/info/apache_books.html">Apache-specific
        books</a> available.</p>
        <hr />
      </li>

      <li>
        <a id="where" name="where"><strong>Where can I get
        Apache?</strong></a> 

        <p>You can find out how to download the source for Apache
        at the project's <a href="http://httpd.apache.org/">main
        web page</a>.</p>
        <hr />
      </li>

      <li>
        <a id="logo" name="logo"><b>May I use the Apache logo on my
        product or Web site?</b></a> 

        <p>You may <b>NOT</b> use any original artwork from the
        Apache Software Foundation, nor make or use modified
        versions of such artwork, except under the following
        conditions:</p>

        <ul>
          <li>You may use the <a
          href="../../apache_pb.gif">'Powered by Apache'
          graphic</a> on a Web site that is being served by the
          Apache HTTP server software.</li>

          <li>You may use the aforementioned 'Powered by Apache'
          graphic or the <a
          href="http://www.apache.org/images/asf_logo.gif">
          Apache Software Foundation logo</a> in product
          description and promotional material <b>IF and ONLY
          IF</b> such use can in no way be interpreted as anything
          other than an attribution. Using the Apache name and
          artwork in a manner that implies endorsement of a product
          or service is <b>strictly forbidden</b>.</li>
        </ul>
        <hr />
      </li>
    </ol>
    
    
  </body>
</html>


    








      
      
    

    <h3>B. General Technical Questions</h3>

    <ol>
      <li>
        <a id="what2do" name="what2do"><strong>"Why can't I ...?
        Why won't ... work?" What to do in case of
        problems</strong></a> 

        <p>If you are having trouble with your Apache server
        software, you should take the following steps:</p>

        <ol>
          <li>
            <strong>Check the errorlog!</strong> 

            <p>Apache tries to be helpful when it encounters a
            problem. In many cases, it will provide some details by
            writing one or messages to the server error log.
            Sometimes this is enough for you to diagnose &amp; fix
            the problem yourself (such as file permissions or the
            like). The default location of the error log is
            <samp>/usr/local/apache/logs/error_log</samp>, but see
            the <a
            href="../mod/core.html#errorlog"><samp>ErrorLog</samp></a>
            directive in your config files for the location on your
            server.</p>
          </li>

          <li>
            <strong>Check the <a
            href="http://httpd.apache.org/docs/misc/FAQ.html">FAQ</a>!</strong>
            

            <p>The latest version of the Apache Frequently-Asked
            Questions list can always be found at the main Apache
            web site.</p>
          </li>

          <li>
            <strong>Check the Apache bug database</strong> 

            <p>Most problems that get reported to The Apache Group
            are recorded in the <a
            href="http://bugs.apache.org/">bug database</a>.
            <em><strong>Please</strong> check the existing reports,
            open <strong>and</strong> closed, before adding
            one.</em> If you find that your issue has already been
            reported, please <em>don't</em> add a "me, too" report.
            If the original report isn't closed yet, we suggest
            that you check it periodically. You might also consider
            contacting the original submitter, because there may be
            an email exchange going on about the issue that isn't
            getting recorded in the database.</p>
          </li>

          <li>
            <strong>Ask in a user support group.</strong> 

            <p>A lot of common problems never make it to the bug
            database because there's already high Q&amp;A traffic
            about them in the <a
            href="http://httpd.apache.org/userslist.html">Users
            mailing list</a> or <a
            href="news:comp.infosystems.www.servers.unix"><samp>comp.infosystems.www.servers.unix</samp></a>
            and related newsgroups. These newsgroups are also
            available via <a
            href="http://groups.google.com/groups?group=comp.infosystems.www.servers">
            Google</a>. Many Apache users, and some of the developers,
            can be found roaming their virtual halls, so it is suggested
            that you seek wisdom there. The chances are good that
            you'll get a faster answer there than from the bug
            database, even if you <em>don't</em> see your question
            already posted.</p>
          </li>

          <li>
            <strong>If all else fails, report the problem in the
            bug database</strong> 

            <p>If you've gone through those steps above that are
            appropriate and have obtained no relief, then please
            <em>do</em> let The Apache Group know about the problem
            by <a
            href="http://httpd.apache.org/bug_report.html">logging
            a bug report</a>.</p>

            <p>If your problem involves the server crashing and
            generating a core dump, please include a backtrace (if
            possible). As an example,</p>

            <dl>
              <dd><code># cd <em>ServerRoot</em><br />
               # dbx httpd core<br />
               (dbx) where</code></dd>
            </dl>

            <p>(Substitute the appropriate locations for your
            <samp>ServerRoot</samp> and your <samp>httpd</samp> and
            <samp>core</samp> files. You may have to use
            <code>gdb</code> instead of <code>dbx</code>.)</p>
          </li>
        </ol>
        <hr />
      </li>

      <li>
        <a id="compatible" name="compatible"><strong>How compatible
        is Apache with my existing NCSA 1.3 setup?</strong></a> 

        <p>Apache attempts to offer all the features and
        configuration options of NCSA httpd 1.3, as well as many of
        the additional features found in NCSA httpd 1.4 and NCSA
        httpd 1.5.</p>

        <p>NCSA httpd appears to be moving toward adding
        experimental features which are not generally required at
        the moment. Some of the experiments will succeed while
        others will inevitably be dropped. The Apache philosophy is
        to add what's needed as and when it is needed.</p>

        <p>Friendly interaction between Apache and NCSA developers
        should ensure that fundamental feature enhancements stay
        consistent between the two servers for the foreseeable
        future.</p>
        <hr />
      </li>

      <li>
        <a id="year2000" name="year2000"><strong>Is Apache Year
        2000 compliant?</strong></a> 

        <p>Yes, Apache is Year 2000 compliant.</p>

        <p>Apache internally never stores years as two digits. On
        the HTTP protocol level RFC1123-style addresses are
        generated which is the only format a HTTP/1.1-compliant
        server should generate. To be compatible with older
        applications Apache recognizes ANSI C's
        <code>asctime()</code> and RFC850-/RFC1036-style date
        formats, too. The <code>asctime()</code> format uses
        four-digit years, but the RFC850 and RFC1036 date formats
        only define a two-digit year. If Apache sees such a date
        with a value less than 70 it assumes that the century is
        <samp>20</samp> rather than <samp>19</samp>.</p>

        <p>Although Apache is Year 2000 compliant, you may still
        get problems if the underlying OS has problems with dates
        past year 2000 (<em>e.g.</em>, OS calls which accept or
        return year numbers). Most (UNIX) systems store dates
        internally as signed 32-bit integers which contain the
        number of seconds since 1<sup>st</sup> January 1970, so the
        magic boundary to worry about is the year 2038 and not
        2000. But modern operating systems shouldn't cause any
        trouble at all.</p>

        <p>The Apache HTTP Server project is an open-source
        software product of the Apache Software Foundation. The
        project and the Foundation <b>cannot</b> offer legal
        assurances regarding any suitability of the software for
        your application. There are several commercial Apache
        support organizations and derivative server products
        available that may be able to stand behind the software and
        provide you with any assurances you may require. You may
        find links to some of these vendors at <samp>&lt;<a
        href="http://www.apache.org/info/support.cgi">http://www.apache.org/info/support.cgi</a>&gt;</samp>.</p>

        <p>The Apache HTTP server software is distributed with the
        following disclaimer, found in the software license:</p>
<pre>
   THIS SOFTWARE IS PROVIDED BY THE APACHE GROUP ``AS IS'' AND ANY
   EXPRESSED OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
   PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE APACHE GROUP OR
   ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
   SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
   NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
   LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
   HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
   STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
   ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
   OF THE POSSIBILITY OF SUCH DAMAGE.
 
</pre>
        <hr />
      </li>

      <li>
        <a id="submit_patch" name="submit_patch"><strong>How do I
        submit a patch to the Apache Group?</strong></a> 

        <p>The Apache Group encourages patches from outside
        developers. There are 2 main "types" of patches: small
        bugfixes and general improvements. Bugfixes should be
        submitting using the Apache <a
        href="http://httpd.apache.org/bug_report.html">bug report
        page</a>. Improvements, modifications, and additions should
        follow the instructions below.</p>

        <p>In general, the first course of action is to be a member
        of the <samp>dev@@httpd.apache.org</samp> mailing list. This
        indicates to the Group that you are closely following the
        latest Apache developments. Your patch file should be
        generated using either '<code>diff&nbsp;-c</code>' or
        '<code>diff&nbsp;-u</code>' against the latest CVS tree. To
        submit your patch, send email to
        <samp>dev@@httpd.apache.org</samp> with a
        <samp>Subject:</samp> line that starts with
        <samp>[PATCH]</samp> and includes a general description of
        the patch. In the body of the message, the patch should be
        clearly described and then included at the end of the
        message. If the patch-file is long, you can note a URL to
        the file instead of the file itself. Use of MIME
        enclosures/attachments should be avoided.</p>

        <p>Be prepared to respond to any questions about your
        patches and possibly defend your code. If your patch
        results in a lot of discussion, you may be asked to submit
        an updated patch that incorporates all changes and
        suggestions.</p>
        <hr />
      </li>

      <li>
        <a id="domination" name="domination"><strong>Why has Apache
        stolen my favourite site's Internet address?</strong></a> 

        <p>The simple answer is: "It hasn't." This misconception is
        usually caused by the site in question having migrated to
        the Apache Web server software, but not having migrated the
        site's content yet. When Apache is installed, the default
        page that gets installed tells the Webmaster the
        installation was successful. The expectation is that this
        default page will be replaced with the site's real content.
        If it doesn't, complain to the Webmaster, not to the Apache
        project -- we just make the software and aren't responsible
        for what people do (or don't do) with it.</p>
        <hr />
      </li>

      <li>
        <a id="apspam" name="apspam"><strong>Why am I getting spam
        mail from the Apache site?</strong></a> 

        <p>The short answer is: "You aren't." Usually when someone
        thinks the Apache site is originating spam, it's because
        they've traced the spam to a Web site, and the Web site
        says it's using Apache. See the <a
        href="#domination">previous FAQ entry</a> for more details
        on this phenomenon.</p>

        <p>No marketing spam originates from the Apache site. The
        only mail that comes from the site goes only to addresses
        that have been <em>requested</em> to receive the mail.</p>
        <hr />
      </li>

      <li>
        <a id="redist" name="redist"><strong>May I include the
        Apache software on a CD or other package I'm
        distributing?</strong></a> 

        <p>The detailed answer to this question can be found in the
        Apache license, which is included in the Apache
        distribution in the file <code>LICENSE</code>. You can also
        find it on the Web at <samp>&lt;<a
        href="http://www.apache.org/LICENSE.txt">http://www.apache.org/LICENSE.txt</a>&gt;</samp>.</p>
        <hr />
      </li>

      <li>
        <a id="zoom" name="zoom"><strong>What's the best
        hardware/operating system/... How do I get the most out of
        my Apache Web server?</strong></a> 

        <p>Check out Dean Gaudet's <a
        href="perf-tuning.html">performance tuning page</a>.</p>
        <hr />
      </li>

      <li>
        <a id="regex" name="regex"><strong>What are "regular
        expressions"?</strong></a> 

        <p>Regular expressions are a way of describing a pattern -
        for example, "all the words that begin with the letter A"
        or "every 10-digit phone number" or even "Every sentence
        with two commas in it, and no capital letter Q". Regular
        expressions (aka "regex"s) are useful in Apache because
        they let you apply certain attributes against collections
        of files or resources in very flexible ways - for example,
        all .gif and .jpg files under any "images" directory could
        be written as /\/images\/.*(jpg|gif)$/.</p>

        <p>The best overview around is probably the one which comes
        with Perl. We implement a simple subset of Perl's regex
        support, but it's still a good way to learn what they mean.
        You can start by going to the <a
        href="http://www.perl.com/doc/manual/html/pod/perlre.html">CPAN
        page on regular expressions</a>, and branching out from
        there.</p> <hr />
      </li>

      <li>
        <a id="binaries" name="binaries"><b>Why isn't there a
        binary for my platform?</b></a> 

        <p>The developers make sure that the software builds and
        works correctly on the platforms available to them; this
        does <i>not</i> necessarily mean that <i>your</i> platform
        is one of them. In addition, the Apache HTTP server project
        is primarily source oriented, meaning that distributing
        valid and buildable source code is the purpose of a
        release, not making sure that there is a binary package for
        all of the supported platforms.</p>

        <p>If you don't see a kit for your platform listed in the
        binary distribution area (&lt;URL:<a
        href="http://httpd.apache.org/dist/httpd/binaries/">http://httpd.apache.org/dist/httpd/binaries/</a>&gt;),
        it means either that the platform isn't available to any of
        the developers, or that they just haven't gotten around to
        preparing a binary for it. As this is a voluntary project,
        they are under no obligation to do so. Users are encouraged
        and expected to build the software themselves.</p>

        <p>The sole exception to these practices is the Windows
        package. Unlike most Unix and Unix-like platforms, Windows
        systems do not come with a bundled software development
        environment, so we <i>do</i> prepare binary kits for
        Windows when we make a release. Again, however, it's a
        voluntary thing and only a limited number of the developers
        have the capability to build the InstallShield package, so
        the Windows release may lag somewhat behind the source
        release. This lag should be no more than a few days at
        most.</p>
        <hr />
      </li>
    </ol>
    
    
  </body>
</html>


    








      
      
    

    <h3>C. Building Apache</h3>

    <ol>
      <li>
        <a id="bind8.1" name="bind8.1"><strong>Why do I get an
        error about an undefined reference to
        "<samp>__inet_ntoa</samp>" or other <samp>__inet_*</samp>
        symbols?</strong></a> 

        <p>If you have installed <a
        href="http://www.isc.org/bind.html">BIND-8</a> then this is
        normally due to a conflict between your include files and
        your libraries. BIND-8 installs its include files and
        libraries <code>/usr/local/include/</code> and
        <code>/usr/local/lib/</code>, while the resolver that comes
        with your system is probably installed in
        <code>/usr/include/</code> and <code>/usr/lib/</code>. If
        your system uses the header files in
        <code>/usr/local/include/</code> before those in
        <code>/usr/include/</code> but you do not use the new
        resolver library, then the two versions will conflict.</p>

        <p>To resolve this, you can either make sure you use the
        include files and libraries that came with your system or
        make sure to use the new include files and libraries.
        Adding <code>-lbind</code> to the
        <code>EXTRA_LDFLAGS</code> line in your
        <samp>Configuration</samp> file, then re-running
        <samp>Configure</samp>, should resolve the problem. (Apache
        versions 1.2.* and earlier use <code>EXTRA_LFLAGS</code>
        instead.)</p>

        <p><strong>Note:</strong>As of BIND 8.1.1, the bind
        libraries and files are installed under
        <samp>/usr/local/bind</samp> by default, so you should not
        run into this problem. Should you want to use the bind
        resolvers you'll have to add the following to the
        respective lines:</p>

        <dl>
          <dd><code>EXTRA_CFLAGS=-I/usr/local/bind/include<br />
           EXTRA_LDFLAGS=-L/usr/local/bind/lib<br />
           EXTRA_LIBS=-lbind</code></dd>
        </dl>
        <hr />
      </li>

      <li>
        <a id="cantbuild" name="cantbuild"><strong>Why won't Apache
        compile with my system's <samp>cc</samp>?</strong></a> 

        <p>If the server won't compile on your system, it is
        probably due to one of the following causes:</p>

        <ul>
          <li><strong>The <samp>Configure</samp> script doesn't
          recognize your system environment.</strong><br />
           This might be either because it's completely unknown or
          because the specific environment (include files, OS
          version, <em>et cetera</em>) isn't explicitly handled. If
          this happens, you may need to port the server to your OS
          yourself.</li>

          <li><strong>Your system's C compiler is
          garbage.</strong><br />
           Some operating systems include a default C compiler that
          is either not ANSI C-compliant or suffers from other
          deficiencies. The usual recommendation in cases like this
          is to acquire, install, and use <samp>gcc</samp>.</li>

          <li><strong>Your <samp>include</samp> files may be
          confused.</strong><br />
           In some cases, we have found that a compiler
          installation or system upgrade has left the C header
          files in an inconsistent state. Make sure that your
          include directory tree is in sync with the compiler and
          the operating system.</li>

          <li><strong>Your operating system or compiler may be out
          of revision.</strong><br />
           Software vendors (including those that develop operating
          systems) issue new releases for a reason; sometimes to
          add functionality, but more often to fix bugs that have
          been discovered. Try upgrading your compiler and/or your
          operating system.</li>
        </ul>

        <p>The Apache Group tests the ability to build the server
        on many different platforms. Unfortunately, we can't test
        all of the OS platforms there are. If you have verified
        that none of the above issues is the cause of your problem,
        and it hasn't been reported before, please submit a <a
        href="http://httpd.apache.org/bug_report.html">problem
        report</a>. Be sure to include <em>complete</em> details,
        such as the compiler &amp; OS versions and exact error
        messages.</p>
        <hr />
      </li>

      <li>
        <a id="linuxiovec" name="linuxiovec"><strong>Why do I get
        complaints about redefinition of "<code>struct
        iovec</code>" when compiling under Linux?</strong></a> 

        <p>This is a conflict between your C library includes and
        your kernel includes. You need to make sure that the
        versions of both are matched properly. There are two
        workarounds, either one will solve the problem:</p>

        <ul>
          <li>Remove the definition of <code>struct iovec</code>
          from your C library includes. It is located in
          <code>/usr/include/sys/uio.h</code>.
          <strong>Or,</strong></li>

          <li>Add <code>-DNO_WRITEV</code> to the
          <code>EXTRA_CFLAGS</code> line in your
          <samp>Configuration</samp> and reconfigure/rebuild. This
          hurts performance and should only be used as a last
          resort.</li>
        </ul>
        <hr />
      </li>

      <li>
        <a id="broken-gcc" name="broken-gcc"><strong>I'm using gcc
        and I get some compilation errors, what is
        wrong?</strong></a> 

        <p>GCC parses your system header files and produces a
        modified subset which it uses for compiling. This behavior
        ties GCC tightly to the version of your operating system.
        So, for example, if you were running IRIX 5.3 when you
        built GCC and then upgrade to IRIX 6.2 later, you will have
        to rebuild GCC. Similarly for Solaris 2.4, 2.5, or 2.5.1
        when you upgrade to 2.6. Sometimes you can type "gcc -v"
        and it will tell you the version of the operating system it
        was built against.</p>

        <p>If you fail to do this, then it is very likely that
        Apache will fail to build. One of the most common errors is
        with <code>readv</code>, <code>writev</code>, or
        <code>uio.h</code>. This is <strong>not</strong> a bug with
        Apache. You will need to re-install GCC.</p>
        <hr />
      </li>

      <li>
        <a id="glibc-crypt" name="glibc-crypt"><strong>I'm using
        RedHat Linux 5.0, or some other <samp>glibc</samp>-based
        Linux system, and I get errors with the <code>crypt</code>
        function when I attempt to build Apache 1.2.</strong></a> 

        <p><samp>glibc</samp> puts the <code>crypt</code> function
        into a separate library. Edit your
        <code>src/Configuration</code> file and set this:</p>

        <dl>
          <dd><code>EXTRA_LIBS=-lcrypt</code></dd>
        </dl>

        <p>Then re-run <samp>src/Configure</samp> and re-execute
        the make.</p>
        <hr />
      </li>
    </ol>
    
    
  </body>
</html>


    








      
      
    

    <h3>D. Error Log Messages and Problems Starting Apache</h3>

    <ol>
      <li>
        <a id="setgid" name="setgid"><strong>Why do I get
        "<samp>setgid: Invalid argument</samp>" at
        startup?</strong></a> 

        <p>Your <a
        href="../mod/core.html#group"><samp>Group</samp></a>
        directive (probably in <samp>conf/httpd.conf</samp>) needs
        to name a group that actually exists in the
        <samp>/etc/group</samp> file (or your system's equivalent).
        This problem is also frequently seen when a negative number
        is used in the <code>Group</code> directive (<em>e.g.</em>,
        "<code>Group&nbsp;#-1</code>"). Using a group name -- not
        group number -- found in your system's group database
        should solve this problem in all cases.</p>
        <hr />
      </li>

      <li>
        <a id="nodelay" name="nodelay"><strong>Why am I getting
        "<samp>httpd: could not set socket option
        TCP_NODELAY</samp>" in my error log?</strong></a> 

        <p>This message almost always indicates that the client
        disconnected before Apache reached the point of calling
        <code>setsockopt()</code> for the connection. It shouldn't
        occur for more than about 1% of the requests your server
        handles, and it's advisory only in any case.</p>
        <hr />
      </li>

      <li>
        <a id="peerreset" name="peerreset"><strong>Why am I getting
        "<samp>connection reset by peer</samp>" in my error
        log?</strong></a> 

        <p>This is a normal message and nothing about which to be
        alarmed. It simply means that the client canceled the
        connection before it had been completely set up - such as
        by the end-user pressing the "Stop" button. People's
        patience being what it is, sites with response-time
        problems or slow network links may experience this more
        than high capacity ones or those with large pipes to the
        network.</p>
        <hr />
      </li>

      <li>
        <a id="wheres-the-dump" name="wheres-the-dump"><strong>The
        errorlog says Apache dumped core, but where's the dump
        file?</strong></a> 

        <p>In Apache version 1.2, the error log message about
        dumped core includes the directory where the dump file
        should be located. However, many Unixes do not allow a
        process that has called <code>setuid()</code> to dump core
        for security reasons; the typical Apache setup has the
        server started as root to bind to port 80, after which it
        changes UIDs to a non-privileged user to serve
        requests.</p>

        <p>Dealing with this is extremely operating
        system-specific, and may require rebuilding your system
        kernel. Consult your operating system documentation or
        vendor for more information about whether your system does
        this and how to bypass it. If there <em>is</em> a
        documented way of bypassing it, it is recommended that you
        bypass it only for the <samp>httpd</samp> server process if
        possible.</p>

        <p>The canonical location for Apache's core-dump files is
        the <a href="../mod/core.html#serverroot">ServerRoot</a>
        directory. As of Apache version 1.3, the location can be
        set <em>via</em> the <a
        href="../mod/core.html#coredumpdirectory"><samp>CoreDumpDirectory</samp></a>
        directive to a different directory. Make sure that this
        directory is writable by the user the server runs as (as
        opposed to the user the server is <em>started</em> as).</p>
        <hr />
      </li>

      <li>
        <a id="linux-shmget" name="linux-shmget"><strong>When I run
        it under Linux I get "shmget: function not found", what
        should I do?</strong></a> 

        <p>Your kernel has been built without SysV IPC support. You
        will have to rebuild the kernel with that support enabled
        (it's under the "General Setup" submenu). Documentation for
        kernel building is beyond the scope of this FAQ; you should
        consult the <a
        href="http://www.redhat.com/mirrors/LDP/HOWTO/Kernel-HOWTO.html">
        Kernel HOWTO</a>, or the documentation provided with your
        distribution, or a <a
        href="http://www.redhat.com/mirrors/LDP/HOWTO/META-FAQ.html">
        Linux newsgroup/mailing list</a>. As a last-resort
        workaround, you can comment out the
        <code>#define&nbsp;USE_SHMGET_SCOREBOARD</code> definition
        in the <samp>LINUX</samp> section of
        <samp>src/conf.h</samp> and rebuild the server (prior to
        1.3b4, simply removing
        <code>#define&nbsp;HAVE_SHMGET</code> would have sufficed).
        This will produce a server which is slower and less
        reliable.</p>
        <hr />
      </li>

      <li>
        <a id="nfslocking" name="nfslocking"><strong>Server hangs,
        or fails to start, and/or error log fills with
        "<samp>fcntl: F_SETLKW: No record locks available</samp>"
        or similar messages</strong></a> 

        <p>These are symptoms of a fine locking problem, which
        usually means that the server is trying to use a
        synchronization file on an NFS filesystem.</p>

        <p>Because of its parallel-operation model, the Apache Web
        server needs to provide some form of synchronization when
        accessing certain resources. One of these synchronization
        methods involves taking out locks on a file, which means
        that the filesystem whereon the lockfile resides must
        support locking. In many cases this means it <em>can't</em>
        be kept on an NFS-mounted filesystem.</p>

        <p>To cause the Web server to work around the NFS locking
        limitations, include a line such as the following in your
        server configuration files:</p>

        <dl>
          <dd><code>LockFile /var/run/apache-lock</code></dd>
        </dl>

        <p>The directory should not be generally writable
        (<em>e.g.</em>, don't use <samp>/var/tmp</samp>). See the
        <a
        href="../mod/core.html#lockfile"><samp>LockFile</samp></a>
        documentation for more information.</p>
        <hr />
      </li>

      <li>
        <a id="aixccbug" name="aixccbug"><strong>Why am I getting
        "<samp>Expected &lt;/Directory&gt; but saw
        &lt;/Directory&gt;</samp>" when I try to start
        Apache?</strong></a> 

        <p>This is a known problem with certain versions of the AIX
        C compiler. IBM are working on a solution, and the issue is
        being tracked by <a
        href="http://bugs.apache.org/index/full/2312">problem
        report #2312</a>.</p>
        <hr />
      </li>

      <li>
        <a id="redhat" name="redhat"><strong>I'm using RedHat Linux
        and I have problems with httpd dying randomly or not
        restarting properly</strong></a> 

        <p>RedHat Linux versions 4.x (and possibly earlier) RPMs
        contain various nasty scripts which do not stop or restart
        Apache properly. These can affect you even if you're not
        running the RedHat supplied RPMs.</p>

        <p>If you're using the default install then you're probably
        running Apache 1.1.3, which is outdated. From RedHat's ftp
        site you can pick up a more recent RPM for Apache 1.2.x.
        This will solve one of the problems.</p>

        <p>If you're using a custom built Apache rather than the
        RedHat RPMs then you should <code>rpm -e apache</code>. In
        particular you want the mildly broken
        <code>/etc/logrotate.d/apache</code> script to be removed,
        and you want the broken <code>/etc/rc.d/init.d/httpd</code>
        (or <code>httpd.init</code>) script to be removed. The
        latter is actually fixed by the apache-1.2.5 RPMs but if
        you're building your own Apache then you probably don't
        want the RedHat files.</p>

        <p>We can't stress enough how important it is for folks,
        <em>especially vendors</em> to follow the <a
        href="../stopping.html">stopping Apache directions</a>
        given in our documentation. In RedHat's defense, the broken
        scripts were necessary with Apache 1.1.x because the Linux
        support in 1.1.x was very poor, and there were various race
        conditions on all platforms. None of this should be
        necessary with Apache 1.2 and later.</p>
        <hr />
      </li>

      <li>
        <a id="stopping" name="stopping"><strong>I upgraded from an
        Apache version earlier than 1.2.0 and suddenly I have
        problems with Apache dying randomly or not restarting
        properly</strong></a> 

        <p>You should read <a href="#redhat">the previous note</a>
        about problems with RedHat installations. It is entirely
        likely that your installation has start/stop/restart
        scripts which were built for an earlier version of Apache.
        Versions earlier than 1.2.0 had various race conditions
        that made it necessary to use <code>kill -9</code> at times
        to take out all the httpd servers. But that should not be
        necessary any longer. You should follow the <a
        href="../stopping.html">directions on how to stop and
        restart Apache</a>.</p>

        <p>As of Apache 1.3 there is a script
        <code>src/support/apachectl</code> which, after a bit of
        customization, is suitable for starting, stopping, and
        restarting your server.</p>
        <hr />
      </li>

      <li>
        <a id="setservername" name="setservername"><b>When I try to
        start Apache from a DOS window, I get a message like
        "<samp>Cannot determine host name. Use ServerName directive
        to set it manually.</samp>" What does this mean?</b></a> 

        <p>It means what it says; the Apache software can't
        determine the hostname of your system. Edit your
        <samp>conf\httpd.conf</samp> file, look for the string
        "ServerName", and make sure there's an uncommented
        directive such as</p>

        <dl>
          <dd><code>ServerName localhost</code></dd>
        </dl>

        <p>or</p>

        <dl>
          <dd><code>ServerName www.foo.com</code></dd>
        </dl>

        <p>in the file. Correct it if there one there with wrong
        information, or add one if you don't already have one.</p>

        <p>Also, make sure that your Windows system has DNS
        enabled. See the TCP/IP setup component of the Networking
        or Internet Options control panel.</p>

        <p>After verifying that DNS is enabled and that you have a
        valid hostname in your <samp>ServerName</samp> directive,
        try to start the server again.</p>
        <hr />
      </li>

      <li>
        <a id="ws2_32dll" name="ws2_32dll"><b>When I try to start
        Apache for Windows, I get a message like "<samp>Unable To
        Locate WS2_32.DLL...</samp>". What should I do?</b></a> 

        <p>Short answer: You need to install Winsock 2, available
        from <a
        href="http://www.microsoft.com/windows95/downloads/">http://www.microsoft.com/windows95/downloads/</a></p>

        <p>Detailed answer: Prior to version 1.3.9, Apache for
        Windows used Winsock 1.1. Beginning with version 1.3.9,
        Apache began using Winsock 2 features (specifically,
        WSADuplicateSocket()). WS2_32.DLL implements the Winsock 2
        API. Winsock 2 ships with Windows NT 4.0 and Windows 98.
        Some of the earlier releases of Windows 95 did not include
        Winsock 2.</p>
        <hr />
      </li>

      <li>
        <a id="WSADuplicateSocket"
        name="WSADuplicateSocket"><b>Apache for Windows does not
        start. Error log contains this message: "<samp>[crit]
        (10045) The attempted operation is not supported for the
        type of object referenced: Parent: WSADuplicateSocket
        failed for socket ###</samp>". What does this mean?</b></a>
        

        <p>We have seen this problem when Apache is run on systems
        along with Virtual Private Networking clients like Aventail
        Connect. Aventail Connect is a Layered Service Provider
        (LSP) that inserts itself, as a "shim," between the Winsock
        2 API and Window's native Winsock 2 implementation. The
        Aventail Connect shim does not implement
        WSADuplicateSocket, which is the cause of the failure.</p>

        <p>The shim is not unloaded when Aventail Connect is shut
        down. Once observed, the problem persists until the shim is
        either explicitly unloaded or the machine is rebooted.
        Another potential solution (not tested) is to add
        <code>apache.exe</code> to the Aventail "Connect Exclusion
        List".</p>

        <p>Apache is affected in a similar way by <em>any</em>
        firewall program that isn't correctly configured. Assure
        you exclude your Apache server ports (usually port 80) from
        the list of ports to block. Refer to your firewall
        program's documentation for the how-to.</p>
        <hr />
      </li>

      <li>
        <a id="err1067" name="err1067"><b>When I try to start
        Apache on Windows, I get a message like "<code>System error
        1067 has occurred. The process terminated
        unexpectedly</code>." What does this mean?</b></a> 

        <p>This message means that the Web server was unable to
        start correctly for one reason or another. To find out why,
        execute the following commands in a DOS window:</p>
<pre>
    c:
    cd "\Program Files\Apache Group\Apache"
    apache
 
</pre>

        <p>(If you don't get the prompt back, hit Control-C to
        cause Apache to exit.)</p>

        <p>The error you see will probably be one of those
        preceding this question in the FAQ.</p>

        <p>As of Apache 1.3.14, first check the Windows NT Event
        Log for Application errors using the Windows NT/2000 Event
        Viewer program. Any errors that occur prior to opening the
        Apache error log will be stored here, if Apache is run as a
        Service on NT or 2000. As with any error, also check your
        Apache error log.</p>
        <hr />
      </li>

      <li><a id="suseFDN" name="suseFDN"><b>On a SuSE Linux system, I try and 
          configure access control using basic authentication.
	  Although I follow the example exactly, authentication
	  fails, and an error message "<code>admin: not a valid
	  FDN: ....</code>" is logged.</b></a>

          <p>
	  In the SuSE distribution, additional 3rd party authentication
	  modules have been added and activated by default. These modules
	  interfere with the Apache standard modules and cause Basic
	  authentication to fail. Our recommendation is to comment all
	  those modules in <code>/etc/httpd/suse_addmodule.conf</code>
	  and <code>/etc/httpd/suse_loadmodule.conf</code> which are not
	  actually required for running your server.
          </p><hr />
      </li>

     <li><a id="codered" name="codered"><b>Why do I have weird entries in my
          logs asking for <code>default.ida</code> and
          <code>cmd.exe</code>?</b></a>
      
          <p>The host requesting pages from your website and creating
          those entries is a Windows machine running IIS that has been
          infected by an Internet worm such as Nimda or Code Red. You
          can safely ignore these error messages as they do not affect
          Apache.  ApacheWeek has an <a
          href="http://www.apacheweek.com/features/codered">article</a>
          with more information.</p><hr />
     </li>

    <li><a id="restart" name="restart"><b>Why am I getting server restart
    messages periodically, when I did not restart the server?</b></a>

          <p>Problem: You are noticing restart messages in your error log,
          periodically, when you know you did not restart the server
          yourself:</p>

<pre>
[Thu Jun  6 04:02:01 2002] [notice] SIGHUP received.  Attempting to restart
[Thu Jun  6 04:02:02 2002] [notice] Apache configured -- resuming normal operations
</pre>

          <p>Check your cron jobs to see when/if your server logs are being
          rotated. Compare the time of rotation to the error message time.
          If they are the same, you can somewhat safely assume that the 
          restart is due to your server logs being rotated.</p><hr />
     </li>

     <li><a id="modulemagic" name="modulemagic"><b>Why am I getting
          &quot;module <em>module-name</em> is not compatible with this version
          of Apache&quot; messages in my error log?</b></a>
      
          <p>Module Magic Number (MMN) is a constant defined in Apache
          source that is associated with binary compatibility of
          modules. It is changed when internal Apache structures,
          function calls and other significant parts of API change in
          such a way that binary compatibility cannot be guaranteed any
          more. On MMN change, all third party modules have to be at
          least recompiled, sometimes even slightly changed in order
          to work with the new version of Apache.</p>

          <p>If you're getting the above error messages, contact the
          vendor of the module for the new binary, or compile it if
          you have access to the source code.</p><hr />
     </li>

    </ol>
    
    
  </body>
</html>


    








      
      
    

    <h3>E. Configuration Questions</h3>

    <ol>
      <li>
        <a id="fdlim" name="fdlim"><strong>Why can't I run more
        than &lt;<em>n</em>&gt; virtual hosts?</strong></a> 

        <p>You are probably running into resource limitations in
        your operating system. The most common limitation is the
        <em>per</em>-process limit on <strong>file
        descriptors</strong>, which is almost always the cause of
        problems seen when adding virtual hosts. Apache often does
        not give an intuitive error message because it is normally
        some library routine (such as <code>gethostbyname()</code>)
        which needs file descriptors and doesn't complain
        intelligibly when it can't get them.</p>

        <p>Each log file requires a file descriptor, which means
        that if you are using separate access and error logs for
        each virtual host, each virtual host needs two file
        descriptors. Each <a
        href="../mod/core.html#listen"><samp>Listen</samp></a>
        directive also needs a file descriptor.</p>

        <p>Typical values for &lt;<em>n</em>&gt; that we've seen
        are in the neighborhood of 128 or 250. When the server
        bumps into the file descriptor limit, it may dump core with
        a SIGSEGV, it might just hang, or it may limp along and
        you'll see (possibly meaningful) errors in the error log.
        One common problem that occurs when you run into a file
        descriptor limit is that CGI scripts stop being executed
        properly.</p>

        <p>As to what you can do about this:</p>

        <ol>
          <li>Reduce the number of <a
          href="../mod/core.html#listen"><samp>Listen</samp></a>
          directives. If there are no other servers running on the
          machine on the same port then you normally don't need any
          Listen directives at all. By default Apache listens to
          all addresses on port 80.</li>

          <li>Reduce the number of log files. You can use <a
          href="../mod/mod_log_config.html"><samp>mod_log_config</samp></a>
          to log all requests to a single log file while including
          the name of the virtual host in the log file. You can
          then write a script to split the logfile into separate
          files later if necessary. Such a script is provided with
          the Apache 1.3 distribution in the
          <samp>src/support/split-logfile</samp> file.</li>

          <li>
            Increase the number of file descriptors available to
            the server (see your system's documentation on the
            <code>limit</code> or <code>ulimit</code> commands).
            For some systems, information on how to do this is
            available in the <a href="perf.html">performance
            hints</a> page. There is a specific note for <a
            href="#freebsd-setsize">FreeBSD</a> below. 

            <p>For Windows 95, try modifying your
            <samp>C:\CONFIG.SYS</samp> file to include a line
            like</p>

            <dl>
              <dd><code>FILES=300</code></dd>
            </dl>

            <p>Remember that you'll need to reboot your Windows 95
            system in order for the new value to take effect.</p>
          </li>

          <li>"Don't do that" - try to run with fewer virtual
          hosts</li>

          <li>Spread your operation across multiple server
          processes (using <a
          href="../mod/core.html#listen"><samp>Listen</samp></a>
          for example, but see the first point) and/or ports.</li>
        </ol>

        <p>Since this is an operating-system limitation, there's
        not much else available in the way of solutions.</p>

        <p>As of 1.2.1 we have made attempts to work around various
        limitations involving running with many descriptors. <a
        href="descriptors.html">More information is
        available.</a></p>
        <hr />
      </li>

      <li>
        <a id="freebsd-setsize" name="freebsd-setsize"><strong>Can
        I increase <samp>FD_SETSIZE</samp> on FreeBSD?</strong></a>
        

        <p>On versions of FreeBSD before 3.0, the
        <samp>FD_SETSIZE</samp> define defaults to 256. This means
        that you will have trouble usefully using more than 256
        file descriptors in Apache. This can be increased, but
        doing so can be tricky.</p>

        <p>If you are using a version prior to 2.2, you need to
        recompile your kernel with a larger
        <samp>FD_SETSIZE</samp>. This can be done by adding a line
        such as:</p>

        <dl>
          <dd><code>options FD_SETSIZE <em>nnn</em></code></dd>
        </dl>

        <p>to your kernel config file. Starting at version 2.2,
        this is no longer necessary.</p>

        <p>If you are using a version of 2.1-stable from after
        1997/03/10 or 2.2 or 3.0-current from before 1997/06/28,
        there is a limit in the resolver library that prevents it
        from using more file descriptors than what
        <samp>FD_SETSIZE</samp> is set to when libc is compiled. To
        increase this, you have to recompile libc with a higher
        <samp>FD_SETSIZE</samp>.</p>

        <p>In FreeBSD 3.0, the default <samp>FD_SETSIZE</samp> has
        been increased to 1024 and the above limitation in the
        resolver library has been removed.</p>

        <p>After you deal with the appropriate changes above, you
        can increase the setting of <samp>FD_SETSIZE</samp> at
        Apache compilation time by adding
        "<samp>-DFD_SETSIZE=<em>nnn</em></samp>" to the
        <samp>EXTRA_CFLAGS</samp> line in your
        <samp>Configuration</samp> file.</p>
        <hr />
      </li>

      <li>
        <a id="errordoc401" name="errordoc401"><strong>Why doesn't
        my <code>ErrorDocument 401</code> work?</strong></a> 

        <p>You need to use it with a URL in the form
        "<samp>/foo/bar</samp>" and not one with a method and
        hostname such as "<samp>http://host/foo/bar</samp>". See
        the <a
        href="../mod/core.html#errordocument"><samp>ErrorDocument</samp></a>
        documentation for details. This was incorrectly documented
        in the past.</p>
        <hr />
      </li>

      <li>
        <a id="cookies1" name="cookies1"><strong>Why does Apache
        send a cookie on every response?</strong></a> 

        <p>Apache does <em>not</em> automatically send a cookie on
        every response, unless you have re-compiled it with the <a
        href="../mod/mod_usertrack.html"><samp>mod_usertrack</samp></a>
        module, and specifically enabled it with the <a
        href="../mod/mod_usertrack.html#cookietracking"><samp>CookieTracking</samp></a>
        directive. This module has been in Apache since version
        1.2. This module may help track users, and uses cookies to
        do this. If you are not using the data generated by
        <samp>mod_usertrack</samp>, do not compile it into
        Apache.</p>
        <hr />
      </li>

      <li>
        <a id="jdk1-and-http1.1"
        name="jdk1-and-http1.1"><strong>Why do my Java app[let]s
        give me plain text when I request an URL from an Apache
        server?</strong></a> 

        <p>As of version 1.2, Apache is an HTTP/1.1 (HyperText
        Transfer Protocol version 1.1) server. This fact is
        reflected in the protocol version that's included in the
        response headers sent to a client when processing a
        request. Unfortunately, low-level Web access classes
        included in the Java Development Kit (JDK) version 1.0.2
        expect to see the version string "HTTP/1.0" and do not
        correctly interpret the "HTTP/1.1" value Apache is sending
        (this part of the response is a declaration of what the
        server can do rather than a declaration of the dialect of
        the response). The result is that the JDK methods do not
        correctly parse the headers, and include them with the
        document content by mistake.</p>

        <p>This is definitely a bug in the JDK 1.0.2 foundation
        classes from Sun, and it has been fixed in version 1.1.
        However, the classes in question are part of the virtual
        machine environment, which means they're part of the Web
        browser (if Java-enabled) or the Java environment on the
        client system - so even if you develop <em>your</em>
        classes with a recent JDK, the eventual users might
        encounter the problem. The classes involved are replaceable
        by vendors implementing the Java virtual machine
        environment, and so even those that are based upon the
        1.0.2 version may not have this problem.</p>

        <p>In the meantime, a workaround is to tell Apache to
        "fake" an HTTP/1.0 response to requests that come from the
        JDK methods; this can be done by including a line such as
        the following in your server configuration files:</p>

        <dl>
          <dd><code>BrowserMatch Java1.0 force-response-1.0<br />
           BrowserMatch JDK/1.0 force-response-1.0</code></dd>
        </dl>

        <p>More information about this issue can be found in the <a
        href="http://httpd.apache.org/info/jdk-102.html"><cite>Java
        and HTTP/1.1</cite></a> page at the Apache web site.</p>
        <hr />
      </li>

      <li>
        <a id="midi" name="midi"><strong>How do I get Apache to
        send a MIDI file so the browser can play it?</strong></a> 

        <p>Even though the registered MIME type for MIDI files is
        <samp>audio/midi</samp>, some browsers are not set up to
        recognize it as such; instead, they look for
        <samp>audio/x-midi</samp>. There are two things you can do
        to address this:</p>

        <ol>
          <li>Configure your browser to treat documents of type
          <samp>audio/midi</samp> correctly. This is the type that
          Apache sends by default. This may not be workable,
          however, if you have many client installations to change,
          or if some or many of the clients are not under your
          control.</li>

          <li>
            Instruct Apache to send a different
            <samp>Content-type</samp> header for these files by
            adding the following line to your server's
            configuration files: 

            <dl>
              <dd><code>AddType audio/x-midi .mid .midi
              .kar</code></dd>
            </dl>

            <p>Note that this may break browsers that <em>do</em>
            recognize the <samp>audio/midi</samp> MIME type unless
            they're prepared to also handle
            <samp>audio/x-midi</samp> the same way.</p>
          </li>
        </ol>
        <hr />
      </li>

      <li>
        <a id="addlog" name="addlog"><strong>How do I add browsers
        and referrers to my logs?</strong></a> 

        <p>Apache provides a couple of different ways of doing
        this. The recommended method is to compile the <a
        href="../mod/mod_log_config.html"><samp>mod_log_config</samp></a>
        module into your configuration and use the <a
        href="../mod/mod_log_config.html#customlog"><samp>CustomLog</samp></a>
        directive.</p>

        <p>You can either log the additional information in files
        other than your normal transfer log, or you can add them to
        the records already being written. For example:</p>

        <p>
        <code>CustomLog&nbsp;logs/access_log&nbsp;"%h&nbsp;%l&nbsp;%u&nbsp;%t&nbsp;\"%r\"&nbsp;%s&nbsp;%b&nbsp;\"%{Referer}i\"&nbsp;\"%{User-Agent}i\""</code></p>

        <p>This will add the values of the <samp>User-agent:</samp>
        and <samp>Referer:</samp> headers, which indicate the
        client and the referring page, respectively, to the end of
        each line in the access log.</p>

        <p>You may want to check out the <cite>Apache Week</cite>
        article entitled: "<a
        href="http://www.apacheweek.com/features/logfiles"
        rel="Help"><cite>Gathering Visitor Information: Customizing
        Your Logfiles</cite></a>".</p>
        <hr />
      </li>

      <li>
        <a id="set-servername" name="set-servername"><strong>Why
        does accessing directories only work when I include the
        trailing "/"
        (<em>e.g.</em>,&nbsp;<samp>http://foo.domain.com/~user/</samp>)
        but not when I omit it
        (<em>e.g.</em>,&nbsp;<samp>http://foo.domain.com/~user</samp>)?</strong></a>
        

        <p>When you access a directory without a trailing "/",
        Apache needs to send what is called a redirect to the
        client to tell it to add the trailing slash. If it did not
        do so, relative URLs would not work properly. When it sends
        the redirect, it needs to know the name of the server so
        that it can include it in the redirect. There are two ways
        for Apache to find this out; either it can guess, or you
        can tell it. If your DNS is configured correctly, it can
        normally guess without any problems. If it is not, however,
        then you need to tell it.</p>

        <p>Add a <a
        href="../mod/core.html#servername">ServerName</a> directive
        to the config file to tell it what the domain name of the
        server is.</p>

        <p>The other thing that can occasionally cause this symptom is a
        misunderstanding of the <a
        href="../mod/mod_alias.html#alias">Alias</a> directive,
        resulting in an alias working with a trailing slash, and not 
        without one. The <code>Alias</code> directive is very literal,
        and aliases what you tell it to. Consider the following
        example:</p>

        <pre>
        Alias /example/ /home/www/example/
        </pre>

        <p>The above directive creates an alias for URLs starting with
        <code>/example/</code>, but does <em>not</em> alias URLs
        starting with <code>/example</code>. That is to say, a URL such
        as <code>http://servername.com/example/</code> will get the
        desired content, but a URL such as
        <code>http://servername.com/example</code> will result in a
        "file not found" error.</p>

        <p>The following <code>Alias</code>, on the other hand, will
        work for both cases:</p>

        <pre>
        Alias /example /home/www/example
        </pre>

        <hr />
      </li>

      <li>
        <a id="no-info-directives"
        name="no-info-directives"><strong>Why doesn't mod_info list
        any directives?</strong></a> 

        <p>The <a
        href="../mod/mod_info.html"><samp>mod_info</samp></a>
        module allows you to use a Web browser to see how your
        server is configured. Among the information it displays is
        the list modules and their configuration directives. The
        "current" values for the directives are not necessarily
        those of the running server; they are extracted from the
        configuration files themselves at the time of the request.
        If the files have been changed since the server was last
        reloaded, the display will not match the values actively in
        use. If the files and the path to the files are not
        readable by the user as which the server is running (see
        the <a href="../mod/core.html#user"><samp>User</samp></a>
        directive), then <samp>mod_info</samp> cannot read them in
        order to list their values. An entry <em>will</em> be made
        in the error log in this event, however.</p>
        <hr />
      </li>

      <li>
        <a id="namevhost" name="namevhost"><strong>I upgraded to
        Apache 1.3 and now my virtual hosts don't
        work!</strong></a> 

        <p>In versions of Apache prior to 1.3b2, there was a lot of
        confusion regarding address-based virtual hosts and
        (HTTP/1.1) name-based virtual hosts, and the rules
        concerning how the server processed
        <samp>&lt;VirtualHost&gt;</samp> definitions were very
        complex and not well documented.</p>

        <p>Apache 1.3b2 introduced a new directive, <a
        href="../mod/core.html#namevirtualhost"><samp>NameVirtualHost</samp></a>,
        which simplifies the rules quite a bit. However, changing
        the rules like this means that your existing name-based
        <samp>&lt;VirtualHost&gt;</samp> containers probably won't
        work correctly immediately following the upgrade.</p>

        <p>To correct this problem, add the following line to the
        beginning of your server configuration file, before
        defining any virtual hosts:</p>

        <dl>
          <dd><code>NameVirtualHost <em>n.n.n.n</em></code></dd>
        </dl>

        <p>Replace the "<samp>n.n.n.n</samp>" with the IP address
        to which the name-based virtual host names resolve; if you
        have multiple name-based hosts on multiple addresses,
        repeat the directive for each address.</p>

        <p>Make sure that your name-based
        <samp>&lt;VirtualHost&gt;</samp> blocks contain
        <samp>ServerName</samp> and possibly
        <samp>ServerAlias</samp> directives so Apache can be sure
        to tell them apart correctly.</p>

        <p>Please see the <a href="../vhosts/">Apache Virtual Host
        documentation</a> for further details about
        configuration.</p>
        <hr />
      </li>

      <li>
        <a id="redhat-htm" name="redhat-htm"><strong>I'm using
        RedHat Linux and my .htm files are showing up as HTML
        source rather than being formatted!</strong></a> 

        <p>RedHat messed up and forgot to put a content type for
        <code>.htm</code> files into <code>/etc/mime.types</code>.
        Edit <code>/etc/mime.types</code>, find the line containing
        <code>html</code> and add <code>htm</code> to it. Then
        restart your httpd server:</p>

        <dl>
          <dd><code>kill -HUP `cat /var/run/httpd.pid`</code></dd>
        </dl>

        <p>Then <strong>clear your browsers' caches</strong>. (Many
        browsers won't re-examine the content type after they've
        reloaded a page.)</p>
        <hr />
      </li>

      <li>
        <a id="htaccess-work" name="htaccess-work"><strong>My
        <code>.htaccess</code> files are being
        ignored.</strong></a> 

        <p>This is almost always due to your <a
        href="../mod/core.html#allowoverride">AllowOverride</a>
        directive being set incorrectly for the directory in
        question. If it is set to <code>None</code> then .htaccess
        files will not even be looked for. If you do have one that
        is set, then be certain it covers the directory you are
        trying to use the .htaccess file in. This is normally
        accomplished by ensuring it is inside the proper <a
        href="../mod/core.html#directory">Directory</a>
        container.</p>
        <hr />
      </li>

      <li>
        <a id="forbidden" name="forbidden"><strong>Why do I get a
        "<samp>Forbidden</samp>" message whenever I try to access a
        particular directory?</strong></a> 

        <p>This message is generally caused because either</p>

        <ul>
          <li>The underlying file system permissions do not allow
          the User/Group under which Apache is running to access
          the necessary files; or</li>

          <li>The Apache configuration has some access restrictions
          in place which forbid access to the files.</li>
        </ul>

        <p>You can determine which case applies to your situation
        by checking the error log.</p>

        <p>In the case where file system permission are at fault,
        remember that not only must the directory and files in
        question be readable, but also all parent directories must
        be at least searchable by the web server in order for the
        content to be accessible.</p>
        <hr />
      </li>

      <li>
        <a id="malfiles" name="malfiles"><b>Why do I get a
        "<samp>Forbidden/You don't have permission to access / on
        this server</samp>" message whenever I try to access my
        server?</b></a> 

        <p>Search your <code>conf/httpd.conf</code> file for this
        exact string: <code>&lt;Files ~&gt;</code>. If you find it,
        that's your problem -- that particular &lt;Files&gt;
        container is malformed. Delete it or replace it with
        <code>&lt;Files ~ "^\.ht"&gt;</code> and restart your
        server and things should work as expected.</p>

        <p>This error appears to be caused by a problem with the
        version of linuxconf distributed with Redhat 6.x. It may
        reappear if you use linuxconf again.</p>

        <p>If you don't find this string, check out the <a
        href="#forbidden">previous question</a>.</p>
        <hr />
      </li>

      <li>
        <a id="ie-ignores-mime" name="ie-ignores-mime"><strong>Why
        do my files appear correctly in Internet Explorer, but show
        up as source or trigger a save window with
        Netscape; or, Why doesn't Internet Explorer render
        my text/plain document correctly?</strong></a> 

        <p>MS Internet Explorer (MSIE) and Netscape handle mime type
        detection in different ways, and therefore will display the
        document differently. In particular, IE sometimes relies on
        the file extension or the contents of the file to determine
        the mime type. This can happen when the server specifies a
        mime type of <code>application/octet-stream</code> or
        <code>text/plain</code>.  This behavior violates the the HTTP
        standard and makes it impossible to deliver plain text
        documents to MSIE clients in some cases.  More details are
        available on MSIE's mime type detection behavior in an <a
        href="http://msdn.microsoft.com/workshop/networking/moniker/overview/appendix_a.asp">
        MSDN article</a> and a <a
        href="http://ppewww.ph.gla.ac.uk/~flavell/www/content-type.html">note</a>
        by Alan J. Flavell.</p>

        <p>The best you can do as a server administrator is to
        accurately configure the mime type of your documents by editing
        the <code>mime.types</code> file or using an <a
        href="../mod/mod_mime.html#addtype"><code>AddType</code></a>
        directive in the Apache configuration files.  In some cases,
        you may be able to fool MSIE into rendering text/plain documents
        correctly by assuring they have a <code>.txt</code> filename
        extension, but this will not work if MSIE thinks the content
        looks like another file type.
</p> <hr />
      </li>
      <li>
	<a name="canonical-hostnames"><strong>My site is accessible
        under many different hostnames; how do I redirect clients
        so that they see only a single name?</strong></a>

        <p>Many sites map a variety of hostnames to the same content.
        For example, <code>www.example.com</code>,
        <code>example.com</code> and <code>www.example.net</code> may
        all refer to the same site.  It is best to make sure that,
        regardless of the name clients use to access the site, they
        will be redirected to a single, canonical hostname.  This
        makes the site easier to maintain and assures that there will
        be only one version of the site in proxy caches and search
        engines.</p>

        <p>There are two techniques to implement canonical hostnames:</p>

        <ol>
          <li>Use <a href="../mod/mod_rewrite.html">mod_rewrite</a>
          as described in the "Canonical Hostnames" section of the
          <a href="rewriteguide.html">URL Rewriting Guide</a>.</li>

          <li>Use <a href="../vhosts/name-based.html">name-based
          virtual hosting</a>:

<blockquote><code>
NameVirtualHost *<br />
<br />
&lt;VirtualHost *&gt;<br />
&nbsp;&nbsp;ServerName www.example.net<br />
&nbsp;&nbsp;ServerAlias example.com<br />
&nbsp;&nbsp;Redirect permanent / http://www.example.com/<br />
&lt;/VirtualHost&gt;<br />
<br />
&lt;VirtualHost *&gt;<br />
&nbsp;&nbsp;ServerName www.example.com<br />
&nbsp;&nbsp;DocumentRoot /usr/local/apache/htdocs<br />
&lt;/VirtualHost&gt;
</code></blockquote>
          </li></ol>
        <hr /></li>

         <li><a id="firewall" name="firewall"><strong>Why can I access my
         website from the server or from my local network, but I
         can't access it from elsewhere on the Internet?</strong></a>

         <p>There are many possible reasons for this, and almost all
         of them are related to the configuration of your network, not
         the configuration of the Apache HTTP Server.  One of the most
         common problems is that a firewall blocks access to the
         default HTTP port 80.  In particular, many consumer ISPs
         block access to this port.  You can see if this is the case
         by changing any <code>Port</code> and <code>Listen</code>
         directives in <code>httpd.conf</code> to use port 8000 and
         then request your site using
         <code>http://yourhost.example.com:8000/</code>.  (Of course,
         a very restrictive firewall may block this port as well.)</p>

        <hr /></li>

         <li><a id="indexes" name="indexes"><strong>How do I turn automatic
         directory listings on or off?</strong></a>

         <p>If a client requests a URL that designates a directory and
         the directory does not contain a filename that matches the <a
         href="../mod/mod_dir.html#directoryindex">DirectoryIndex</a>
         directive, then <a
         href="../mod/mod_autoindex.html">mod_autoindex</a> can be
         configured to present a listing of the directory contents.</p>

         <p>To turn on automatic directory indexing, find the 
         <a href="../mod/core.html#options">Options</a> directive that
         applies to the directory and add the <code>Indexes</code>
         keyword. For example:</p>

         <blockquote><code>
         &lt;Directory /path/to/directory&gt;<br />
         &nbsp;&nbsp;&nbsp;Options +Indexes<br />
         &lt;/Directory&gt;
         </code></blockquote>
         
         <p>To turn off automatic directory indexing, remove
         the <code>Indexes</code> keyword from the appropriate 
         <code>Options</code> line. To turn off directory listing
         for a particular subdirectory, you can use 
         <code>Options -Indexes</code>. For example:</p>

         <blockquote><code>
         &lt;Directory /path/to/directory&gt;<br />
         &nbsp;&nbsp;&nbsp;Options -Indexes<br />
         &lt;/Directory&gt;
         </code></blockquote>

       <hr /></li>

         <li><a id="options" name="options"><strong>Why do my Options
         directives not have the desired effect?</strong></a>

         <p>Directives placed in the configuration files are applied
         in a very particular order, as described by <a
         href="../sections.html">How Directory, Location, and Files
         sections work</a>.  In addition, each <a
         href="../mod/core.html#options">Options</a> directive has the
         effect of resetting the options to <code>none</code> before
         adding the specified options (unless only "+" and "-" options
         are used).  The consequence is that <code>Options</code> set
         in the main server or virtual host context (outside any
         directory, location, or files section) will usually have no
         effect, because they are overridden by more specific
         <code>Options</code> directives.  For example, in the following</p>

<blockquote><code>
&lt;Directory /usr/local/apache/htdocs&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;Options Indexes<br />
&lt;/Directory&gt;<br />
Options Includes ExecCGI<br />
</code></blockquote>
    
         <p><code>Includes</code> and <code>ExecCGI</code> will be 
         <strong>off</strong> in the <code>/usr/local/apache/htdocs</code>
         directory.</p>

         <p>You can usually avoid problems by either finding the 
         <code>Options</code> directive that already applies to a 
         specific directory and changing it, or by putting your
         <code>Options</code> directive inside the most specific possible
         <code>&lt;Directory&gt;</code> section.</p>

       <hr /></li>


       <li><a id="serverheader" name="serverheader"><strong>How can I change
       the information that Apache returns about itself in the
       headers?</strong></a>

    <p>When a client connects to Apache, part of the information returned in
    the headers is the name "Apache" Additional information that can be sent
    is the version number, such as "1.3.26", the operating system, and a
    list of non-standard modules you have installed.</p>

    <p>For example:</p>

<blockquote><code>
Server: Apache/1.3.26 (Unix) mod_perl/1.26
</code></blockquote>

    <p>Frequently, people want to remove this information, under the mistaken
    understanding that this will make the system more secure. This is
    probably not the case, as the same exploits will likely be attempted
    regardless of the header information you provide.</p>

    <p>There are, however, two answers to this question: the correct answer,
    and the answer that you are probably looking for.</p>

    <p>The correct answer to this question is that you should use the
    ServerTokens directive to alter the quantity of information which is
    passed in the headers. Setting this directive to <code>Prod</code> will
    pass the least possible amount of information:</p>

<blockquote><code>
Server: Apache
</code></blockquote>

    <p>The answer you are probably looking for is how to make Apache lie 
    about what what it is, ie send something like:</p>

<blockquote><code>
Server: Bob's Happy HTTPd Server
</code></blockquote>

    <p>In order to do this, you will need to modify the Apache source code and
    rebuild Apache. This is not advised, as it is almost certain not to
    provide you with the added security you think that you are gaining. The
    exact method of doing this is left as an exercise for the reader, as we
    are not keen on helping you do something that is intrinsically a bad
    idea.</p>

    <hr /></li>

         <li><a id="proxyscan" name="proxyscan"><strong>Why do I see requests
         for other sites appearing in my log files?</strong></a>

         <p>A an access_log entry showing this situation could look
         like this:</p> 

         <blockquote><code> 63.251.56.142 - -
         [25/Jul/2002:12:48:04 -0700] "GET http://www.yahoo.com/
         HTTP/1.0" 200 1456 </code></blockquote>

         <p>The question is: why did a request for
         <code>www.yahoo.com</code> come to your server instead of
         Yahoo's server?  And why does the response have a status 
         code of 200 (success)?</p>

         <p>This is usually the result of malicious clients trying to
         exploit open proxy servers to access a website without
         revealing their true location.  If you find entries like this
         in your log, the first thing to do is to make sure you have
         properly configured your server not to proxy for unknown
         clients.  If you don't need to provide a proxy server at all,
         you should simply assure that the <a
         href="../mod/mod_proxy.html#proxyrequests">ProxyRequests</a>
         directive is <strong>not</strong> set <code>on</code>.
         If you do need to run a proxy server, then you must ensure
         that you <a href="../mod/mod_proxy.html#access">secure your
         server properly</a> so that only authorized clients can use
         it.</p>

         <p>If your server is configured properly, then the attempt to
         proxy through your server will fail.  If you see a status
         code of <code>404</code> (file not found) in the log, then
         you know that the request failed.  If you see a status code
         of <code>200</code> (success), that does not necessarily mean
         that the attempt to proxy succeeded.  RFC2616 section 5.1.2
         mandates that Apache must accept requests with absolute URLs
         in the request-URI, even for non-proxy requests.  Since
         Apache has no way to know all the different names that your
         server may be known under, it cannot simply reject hostnames
         it does not recognize.  Instead, it will serve requests for
         unknown sites locally by stripping off the hostname and using
         the default server or virtual host.  Therefore you can
         compare the size of the file (1456 in the above example) to
         the size of the corresponding file in your default server.
         If they are the same, then the proxy attempt failed, since a
         document from your server was delivered, not a document from
         <code>www.yahoo.com</code>.</p>

         <p>If you wish to prevent this type of request entirely, then
         you need to let Apache know what hostnames to accept and what
         hostnames to reject.  You do this by configuring name-virtual
         hosts, where the first listed host is the default host that
         will catch and reject unknown hostnames.  For example:</p>

<blockquote>
<pre>
NameVirtualHost *

&lt;VirtualHost *&gt;
  ServerName default.only
  &lt;Location /&gt;
    Order allow,deny
    Deny from all
  &lt;/Location&gt;
&lt;/VirtualHost&gt;

&lt;VirtualHost *&gt;
  ServerName realhost1.example.com
  ServerAlias alias1.example.com alias2.example.com
  DocumentRoot /path/to/site1
&lt;/VirtualHost&gt;

...
</pre>
</blockquote>
    <hr /></li>

    </ol>
    
    
  </body>
</html>


    








      
      
    

    <h3>F. Dynamic Content (CGI and SSI)</h3>

    <ol>
      <li>
        <a id="CGIoutsideScriptAlias"
        name="CGIoutsideScriptAlias"><strong>How do I enable CGI
        execution in directories other than the
        ScriptAlias?</strong></a> 

        <p>Apache recognizes all files in a directory named as a <a
        href="../mod/mod_alias.html#scriptalias"><samp>ScriptAlias</samp></a>
        as being eligible for execution rather than processing as
        normal documents. This applies regardless of the file name,
        so scripts in a ScriptAlias directory don't need to be
        named "<samp>*.cgi</samp>" or "<samp>*.pl</samp>" or
        whatever. In other words, <em>all</em> files in a
        ScriptAlias directory are scripts, as far as Apache is
        concerned.</p>

        <p>To persuade Apache to execute scripts in other
        locations, such as in directories where normal documents
        may also live, you must tell it how to recognize them - and
        also that it's okay to execute them. For this, you need to
        use something like the <a
        href="../mod/mod_mime.html#addhandler"><samp>AddHandler</samp></a>
        directive.</p>

        <ol>
          <li>
            In an appropriate section of your server configuration
            files, add a line such as 

            <dl>
              <dd><code>AddHandler cgi-script .cgi</code></dd>
            </dl>

            <p>The server will then recognize that all files in
            that location (and its logical descendants) that end in
            "<samp>.cgi</samp>" are script files, not
            documents.</p>
          </li>

          <li>Make sure that the directory location is covered by
          an <a
          href="../mod/core.html#options"><samp>Options</samp></a>
          declaration that includes the <samp>ExecCGI</samp>
          option.</li>
        </ol>

        <p>In some situations, you might not want to actually allow
        all files named "<samp>*.cgi</samp>" to be executable.
        Perhaps all you want is to enable a particular file in a
        normal directory to be executable. This can be
        alternatively accomplished <em>via</em> <a
        href="../mod/mod_rewrite.html"><samp>mod_rewrite</samp></a>
        and the following steps:</p>

        <ol>
          <li>
            Locally add to the corresponding <samp>.htaccess</samp>
            file a ruleset similar to this one: 

            <dl>
              <dd><code>RewriteEngine on<br />
               RewriteBase /~foo/bar/<br />
               RewriteRule ^quux\.cgi$ -
              [T=application/x-httpd-cgi]</code></dd>
            </dl>
          </li>

          <li>Make sure that the directory location is covered by
          an <a
          href="../mod/core.html#options"><samp>Options</samp></a>
          declaration that includes the <samp>ExecCGI</samp> and
          <samp>FollowSymLinks</samp> option.</li>
        </ol>
        <hr />
      </li>

      <li>
        <a id="premature-script-headers"
        name="premature-script-headers"><strong>What does it mean
        when my CGIs fail with "<samp>Premature end of script
        headers</samp>"?</strong></a> 

        <p>It means just what it says: the server was expecting a
        complete set of HTTP headers (one or more followed by a
        blank line), and didn't get them.</p>

        <p>The most common cause of this problem is the script
        dying before sending the complete set of headers, or
        possibly any at all, to the server. To see if this is the
        case, try running the script standalone from an interactive
        session, rather than as a script under the server. If you
        get error messages, this is almost certainly the cause of
        the "premature end of script headers" message. Even if the
        CGI runs fine from the command line, remember that the
        environment and permissions may be different when running
        under the web server. The CGI can only access resources
        allowed for the <a
        href="../mod/core.html#user"><code>User</code></a> and <a
        href="../mod/core.html#group"><code>Group</code></a>
        specified in your Apache configuration. In addition, the
        environment will not be the same as the one provided on the
        command line, but it can be adjusted using the directives
        provided by <a href="../mod/mod_env.html">mod_env</a>.</p>

        <p>The second most common cause of this (aside from people
        not outputting the required headers at all) is a result of
        an interaction with Perl's output buffering. To make Perl
        flush its buffers after each output statement, insert the
        following statements around the <code>print</code> or
        <code>write</code> statements that send your HTTP
        headers:</p>

        <dl>
          <dd><code>{<br />
           &nbsp;local ($oldbar) = $|;<br />
           &nbsp;$cfh = select (STDOUT);<br />
           &nbsp;$| = 1;<br />
           &nbsp;#<br />
           &nbsp;# print your HTTP headers here<br />
           &nbsp;#<br />
           &nbsp;$| = $oldbar;<br />
           &nbsp;select ($cfh);<br />
           }</code></dd>
        </dl>

        <p>This is generally only necessary when you are calling
        external programs from your script that send output to
        stdout, or if there will be a long delay between the time
        the headers are sent and the actual content starts being
        emitted. To maximize performance, you should turn
        buffer-flushing back <em>off</em> (with <code>$| = 0</code>
        or the equivalent) after the statements that send the
        headers, as displayed above.</p>

        <p>If your script isn't written in Perl, do the equivalent
        thing for whatever language you <em>are</em> using
        (<em>e.g.</em>, for C, call <code>fflush()</code> after
        writing the headers).</p>

        <p>Another cause for the "premature end of script headers"
        message are the RLimitCPU and RLimitMEM directives. You may
        get the message if the CGI script was killed due to a
        resource limit.</p>

        <p>In addition, a configuration problem in <a
        href="../suexec.html">suEXEC</a>, mod_perl, or another
        third party module can often interfere with the execution
        of your CGI and cause the "premature end of script headers"
        message.</p>
        <hr />
      </li>

      <li>
        <a id="POSTnotallowed" name="POSTnotallowed"><strong>Why do
        I keep getting "Method Not Allowed" for form POST
        requests?</strong></a> 

        <p>This is almost always due to Apache not being configured
        to treat the file you are trying to POST to as a CGI
        script. You can not POST to a normal HTML file; the
        operation has no meaning. See the FAQ entry on <a
        href="#CGIoutsideScriptAlias">CGIs outside ScriptAliased
        directories</a> for details on how to configure Apache to
        treat the file in question as a CGI.</p>
        <hr />
      </li>

      <li>
        <a id="nph-scripts" name="nph-scripts"><strong>How can I
        get my script's output without Apache buffering it? Why
        doesn't my server push work?</strong></a> 

        <p>As of Apache 1.3, CGI scripts are essentially not
        buffered. Every time your script does a "flush" to output
        data, that data gets relayed on to the client. Some
        scripting languages, for example Perl, have their own
        buffering for output - this can be disabled by setting the
        <code>$|</code> special variable to 1. Of course this does
        increase the overall number of packets being transmitted,
        which can result in a sense of slowness for the end
        user.</p>

        <p>Prior to 1.3, you needed to use "nph-" scripts to
        accomplish non-buffering. Today, the only difference
        between nph scripts and normal scripts is that nph scripts
        require the full HTTP headers to be sent.</p>
        <hr />
      </li>

      <li>
        <a id="cgi-spec" name="cgi-spec"><strong>Where can I find
        the "CGI specification"?</strong></a> 

        <p>The Common Gateway Interface (CGI) specification can be
        found at the original NCSA site &lt; <a
        href="http://hoohoo.ncsa.uiuc.edu/cgi/interface.html"><samp>
        http://hoohoo.ncsa.uiuc.edu/cgi/interface.html</samp></a>&gt;.
        This version hasn't been updated since 1995, and there have
        been some efforts to update it.</p>

        <p>A new draft is being worked on with the intent of making
        it an informational RFC; you can find out more about this
        project at &lt;<a
        href="http://web.golux.com/coar/cgi/"><samp>http://web.golux.com/coar/cgi/</samp></a>&gt;.</p>
        <hr />
      </li>

      <li>
        <a id="fastcgi" name="fastcgi"><strong>Why isn't FastCGI
        included with Apache any more?</strong></a> 

        <p>The simple answer is that it was becoming too difficult
        to keep the version being included with Apache synchronized
        with the master copy at the <a
        href="http://www.fastcgi.com/">FastCGI web site</a>. When a
        new version of Apache was released, the version of the
        FastCGI module included with it would soon be out of
        date.</p>

        <p>You can still obtain the FastCGI module for Apache from
        the master FastCGI web site.</p>
        <hr />
      </li>

      <li>
        <a id="ssi-part-i" name="ssi-part-i"><strong>How do I
        enable SSI (parsed HTML)?</strong></a> 

        <p>SSI (an acronym for Server-Side Include) directives
        allow static HTML documents to be enhanced at run-time
        (<em>e.g.</em>, when delivered to a client by Apache). The
        format of SSI directives is covered in the <a
        href="../mod/mod_include.html">mod_include manual</a>;
        suffice it to say that Apache supports not only SSI but
        xSSI (eXtended SSI) directives.</p>

        <p>Processing a document at run-time is called
        <em>parsing</em> it; hence the term "parsed HTML" sometimes
        used for documents that contain SSI instructions. Parsing
        tends to be resource-consumptive compared to serving static
        files, and is not enabled by default. It can also interfere
        with the cachability of your documents, which can put a
        further load on your server. (See the <a
        href="#ssi-part-ii">next question</a> for more information
        about this.)</p>

        <p>To enable SSI processing, you need to</p>

        <ul>
          <li>Build your server with the <a
          href="../mod/mod_include.html"><samp>mod_include</samp></a>
          module. This is normally compiled in by default.</li>

          <li>Make sure your server configuration files have an <a
          href="../mod/core.html#options"><samp>Options</samp></a>
          directive which permits <samp>Includes</samp>.</li>

          <li>
            Make sure that the directory where you want the SSI
            documents to live is covered by the "server-parsed"
            content handler, either explicitly or in some ancestral
            location. That can be done with the following <a
            href="../mod/mod_mime.html#addhandler"><samp>AddHandler</samp></a>
            directive: 

            <dl>
              <dd><code>AddHandler server-parsed .shtml</code></dd>
            </dl>

            <p>This indicates that all files ending in ".shtml" in
            that location (or its descendants) should be parsed.
            Note that using ".html" will cause all normal HTML
            files to be parsed, which may put an inordinate load on
            your server.</p>
          </li>
        </ul>

        <p>For additional information, see the <cite>Apache
        Week</cite> article on <a
        href="http://www.apacheweek.com/features/ssi"
        rel="Help"><cite>Using Server Side Includes</cite></a>.</p>
        <hr />
      </li>

      <li>
        <a id="ssi-part-ii" name="ssi-part-ii"><strong>Why don't my
        parsed files get cached?</strong></a> 

        <p>Since the server is performing run-time processing of
        your SSI directives, which may change the content shipped
        to the client, it can't know at the time it starts parsing
        what the final size of the result will be, or whether the
        parsed result will always be the same. This means that it
        can't generate <samp>Content-Length</samp> or
        <samp>Last-Modified</samp> headers. Caches commonly work by
        comparing the <samp>Last-Modified</samp> of what's in the
        cache with that being delivered by the server. Since the
        server isn't sending that header for a parsed document,
        whatever's doing the caching can't tell whether the
        document has changed or not - and so fetches it again to be
        on the safe side.</p>

        <p>You can work around this in some cases by causing an
        <samp>Expires</samp> header to be generated. (See the <a
        href="../mod/mod_expires.html"
        rel="Help"><samp>mod_expires</samp></a> documentation for
        more details.) Another possibility is to use the <a
        href="../mod/mod_include.html#xbithack"
        rel="Help"><samp>XBitHack Full</samp></a> mechanism, which
        tells Apache to send (under certain circumstances detailed
        in the XBitHack directive description) a
        <samp>Last-Modified</samp> header based upon the last
        modification time of the file being parsed. Note that this
        may actually be lying to the client if the parsed file
        doesn't change but the SSI-inserted content does; if the
        included content changes often, this can result in stale
        copies being cached.</p>
        <hr />
      </li>

      <li>
        <a id="ssi-part-iii" name="ssi-part-iii"><strong>How can I
        have my script output parsed?</strong></a> 

        <p>So you want to include SSI directives in the output from
        your CGI script, but can't figure out how to do it? The
        short answer is "you can't." This is potentially a security
        liability and, more importantly, it can not be cleanly
        implemented under the current server API. The best
        workaround is for your script itself to do what the SSIs
        would be doing. After all, it's generating the rest of the
        content.</p>

        <p>This is a feature The Apache Group hopes to add in the
        next major release after 1.3.</p>
        <hr />
      </li>

      <li>
        <a id="ssi-part-iv" name="ssi-part-iv"><strong>SSIs don't
        work for VirtualHosts and/or user home
        directories.</strong></a> 

        <p>This is almost always due to having some setting in your
        config file that sets "Options Includes" or some other
        setting for your DocumentRoot but not for other
        directories. If you set it inside a Directory section, then
        that setting will only apply to that directory.</p>
        <hr />
      </li>

      <li>
        <a id="errordocssi" name="errordocssi"><strong>How can I
        use <code>ErrorDocument</code> and SSI to simplify
        customized error messages?</strong></a> 

        <p>Have a look at <a href="custom_errordocs.html">this
        document</a>. It shows in example form how you can a
        combination of XSSI and negotiation to tailor a set of
        <code>ErrorDocument</code>s to your personal taste, and
        returning different internationalized error responses based
        on the client's native language.</p>
        <hr />
      </li>

      <li>
        <a id="remote-user-var" name="remote-user-var"><strong>Why
        is the environment variable <samp>REMOTE_USER</samp> not
        set?</strong></a> 

        <p>This variable is set and thus available in SSI or CGI
        scripts <strong>if and only if</strong> the requested
        document was protected by access authentication. For an
        explanation on how to implement these restrictions, see <a
        href="http://www.apacheweek.com/"><cite>Apache
        Week</cite></a>'s articles on <a
        href="http://www.apacheweek.com/features/userauth"><cite>Using
        User Authentication</cite></a> or <a
        href="http://www.apacheweek.com/features/dbmauth"><cite>DBM
        User Authentication</cite></a>.</p>

        <p>Hint: When using a CGI script to receive the data of a
        HTML <samp>FORM</samp> notice that protecting the document
        containing the <samp>FORM</samp> is not sufficient to
        provide <samp>REMOTE_USER</samp> to the CGI script. You
        have to protect the CGI script, too. Or alternatively only
        the CGI script (then authentication happens only after
        filling out the form).</p>
        <hr />
      </li>

      <li>
        <a id="user-cgi" name="user-cgi"><strong>How do I allow
        each of my user directories to have a cgi-bin
        directory?</strong></a> 

        <p>Remember that CGI execution does not need to be
        restricted only to cgi-bin directories. You can <a
        href="#CGIoutsideScriptAlias">allow CGI script execution in
        arbitrary parts of your filesystem</a>.</p>

        <p>There are many ways to give each user directory a
        cgi-bin directory such that anything requested as
        <samp>http://example.com/~user/cgi-bin/program</samp> will
        be executed as a CGI script. Two alternatives are:</p>

        <ol>
          <li>
            Place the cgi-bin directory next to the public_html
            directory: 

            <dl>
              <dd><code>ScriptAliasMatch ^/~([^/]*)/cgi-bin/(.*)
              /home/$1/cgi-bin/$2</code></dd>
            </dl>
          </li>

          <li>
            Place the cgi-bin directory underneath the public_html
            directory: 

            <dl>
              <dd><code>&lt;Directory
              /home/*/public_html/cgi-bin&gt;<br />
               &nbsp;&nbsp;&nbsp;&nbsp;Options ExecCGI<br />
               &nbsp;&nbsp;&nbsp;&nbsp;SetHandler cgi-script<br />
               &lt;/Directory&gt;</code></dd>
            </dl>
          </li>
        </ol>
        <p>If you are using suexec, the first technique will not work
        because CGI scripts must be stored under the <code>public_html</code>
        directory.</p>

        <hr />
      </li>
    </ol>
    
    
  </body>
</html>


    








      
      
    

    <h3>G. Authentication and Access Restrictions</h3>

    <ol>
      <li>
        <a id="dnsauth" name="dnsauth"><strong>Why isn't
        restricting access by host or domain name working
        correctly?</strong></a> 

        <p>Two of the most common causes of this are:</p>

        <ol>
          <li><strong>An error, inconsistency, or unexpected
          mapping in the DNS registration</strong><br />
           This happens frequently: your configuration restricts
          access to <samp>Host.FooBar.Com</samp>, but you can't get
          in from that host. The usual reason for this is that
          <samp>Host.FooBar.Com</samp> is actually an alias for
          another name, and when Apache performs the
          address-to-name lookup it's getting the <em>real</em>
          name, not <samp>Host.FooBar.Com</samp>. You can verify
          this by checking the reverse lookup yourself. The easiest
          way to work around it is to specify the correct host name
          in your configuration.</li>

          <li>
            <strong>Inadequate checking and verification in your
            configuration of Apache</strong><br />
             If you intend to perform access checking and
            restriction based upon the client's host or domain
            name, you really need to configure Apache to
            double-check the origin information it's supplied. You
            do this by adding the <samp>-DMAXIMUM_DNS</samp> clause
            to the <samp>EXTRA_CFLAGS</samp> definition in your
            <samp>Configuration</samp> file. For example: 

            <dl>
              <dd><code>EXTRA_CFLAGS=-DMAXIMUM_DNS</code></dd>
            </dl>

            <p>This will cause Apache to be very paranoid about
            making sure a particular host address is
            <em>really</em> assigned to the name it claims to be.
            Note that this <em>can</em> incur a significant
            performance penalty, however, because of all the name
            resolution requests being sent to a nameserver.</p>
          </li>
        </ol>
        <hr />
      </li>

      <li>
        <a id="user-authentication"
        name="user-authentication"><strong>How do I set up Apache
        to require a username and password to access certain
        documents?</strong></a> 

        <p>There are several ways to do this; some of the more
        popular ones are to use the <a
        href="../mod/mod_auth.html">mod_auth</a>, <a
        href="../mod/mod_auth_db.html">mod_auth_db</a>, or <a
        href="../mod/mod_auth_dbm.html">mod_auth_dbm</a>
        modules.</p>

        <p>For an explanation on how to implement these
        restrictions, see <a
        href="http://www.apacheweek.com/"><cite>Apache
        Week</cite></a>'s articles on <a
        href="http://www.apacheweek.com/features/userauth"><cite>Using
        User Authentication</cite></a> or <a
        href="http://www.apacheweek.com/features/dbmauth"><cite>DBM
        User Authentication</cite></a>, or see the <a
        href="../howto/auth.html">authentication tutorial</a> in the
        Apache documentation.</p>
        <hr />
      </li>

      <li>
        <a id="remote-auth-only"
        name="remote-auth-only"><strong>How do I set up Apache to
        allow access to certain documents only if a site is either
        a local site <em>or</em> the user supplies a password and
        username?</strong></a> 

        <p>Use the <a href="../mod/core.html#satisfy">Satisfy</a>
        directive, in particular the <code>Satisfy Any</code>
        directive, to require that only one of the access
        restrictions be met. For example, adding the following
        configuration to a <samp>.htaccess</samp> or server
        configuration file would restrict access to people who
        either are accessing the site from a host under domain.com
        or who can supply a valid username and password:</p>

        <dl>
          <dd><code>Deny from all<br />
           Allow from .domain.com<br />
           AuthType Basic<br />
           AuthUserFile /usr/local/apache/conf/htpasswd.users<br />
           AuthName "special directory"<br />
           Require valid-user<br />
           Satisfy any</code></dd>
        </dl>

        <p>See the <a href="#user-authentication">user
        authentication</a> question and the <a
        href="../mod/mod_access.html">mod_access</a> module for
        details on how the above directives work.</p>
        <hr />
      </li>

      <li>
        <a id="authauthoritative"
        name="authauthoritative"><strong>Why does my authentication
        give me a server error?</strong></a> 

        <p>Under normal circumstances, the Apache access control
        modules will pass unrecognized user IDs on to the next
        access control module in line. Only if the user ID is
        recognized and the password is validated (or not) will it
        give the usual success or "authentication failed"
        messages.</p>

        <p>However, if the last access module in line 'declines'
        the validation request (because it has never heard of the
        user ID or because it is not configured), the
        <samp>http_request</samp> handler will give one of the
        following, confusing, errors:</p>

        <ul>
          <li><samp>check access</samp></li>

          <li><samp>check user. No user file?</samp></li>

          <li><samp>check access. No groups file?</samp></li>
        </ul>

        <p>This does <em>not</em> mean that you have to add an
        '<samp>AuthUserFile&nbsp;/dev/null</samp>' line as some
        magazines suggest!</p>

        <p>The solution is to ensure that at least the last module
        is authoritative and <strong>CONFIGURED</strong>. By
        default, <samp>mod_auth</samp> is authoritative and will
        give an OK/Denied, but only if it is configured with the
        proper <samp>AuthUserFile</samp>. Likewise, if a valid
        group is required. (Remember that the modules are processed
        in the reverse order from that in which they appear in your
        compile-time <samp>Configuration</samp> file.)</p>

        <p>A typical situation for this error is when you are using
        the <samp>mod_auth_dbm</samp>, <samp>mod_auth_msql</samp>,
        <samp>mod_auth_mysql</samp>, <samp>mod_auth_anon</samp> or
        <samp>mod_auth_cookie</samp> modules on their own. These
        are by default <strong>not</strong> authoritative, and this
        will pass the buck on to the (non-existent) next
        authentication module when the user ID is not in their
        respective database. Just add the appropriate
        '<samp><em>XXX</em>Authoritative yes</samp>' line to the
        configuration.</p>

        <p>In general it is a good idea (though not terribly
        efficient) to have the file-based <samp>mod_auth</samp> a
        module of last resort. This allows you to access the web
        server with a few special passwords even if the databases
        are down or corrupted. This does cost a file
        open/seek/close for each request in a protected area.</p>
        <hr />
      </li>

      <li>
        <a id="auth-on-same-machine"
        name="auth-on-same-machine"><strong>Do I have to keep the
        (mSQL) authentication information on the same
        machine?</strong></a> 

        <p>Some organizations feel very strongly about keeping the
        authentication information on a different machine than the
        webserver. With the <samp>mod_auth_msql</samp>,
        <samp>mod_auth_mysql</samp>, and other SQL modules
        connecting to (R)DBMses this is quite possible. Just
        configure an explicit host to contact.</p>

        <p>Be aware that with mSQL and Oracle, opening and closing
        these database connections is very expensive and time
        consuming. You might want to look at the code in the
        <samp>auth_*</samp> modules and play with the compile time
        flags to alleviate this somewhat, if your RDBMS licences
        allow for it.</p>
        <hr />
      </li>

      <li>
        <a id="msql-slow" name="msql-slow"><strong>Why is my mSQL
        authentication terribly slow?</strong></a> 

        <p>You have probably configured the Host by specifying a
        FQHN, and thus the <samp>libmsql</samp> will use a full
        blown TCP/IP socket to talk to the database, rather than a
        fast internal device. The <samp>libmsql</samp>, the mSQL
        FAQ, and the <samp>mod_auth_msql</samp> documentation warn
        you about this. If you have to use different hosts, check
        out the <samp>mod_auth_msql</samp> code for some compile
        time flags which might - or might not - suit you.</p>
        <hr />
      </li>

      <li>
        <a id="passwdauth" name="passwdauth"><strong>Can I use my
        <samp>/etc/passwd</samp> file for Web page
        authentication?</strong></a> 

        <p>Yes, you can - but it's a <strong>very bad
        idea</strong>. Here are some of the reasons:</p>

        <ul>
          <li>The Web technology provides no governors on how often
          or how rapidly password (authentication failure) retries
          can be made. That means that someone can hammer away at
          your system's <samp>root</samp> password using the Web,
          using a dictionary or similar mass attack, just as fast
          as the wire and your server can handle the requests. Most
          operating systems these days include attack detection
          (such as <em>n</em> failed passwords for the same account
          within <em>m</em> seconds) and evasion (breaking the
          connection, disabling the account under attack, disabling
          <em>all</em> logins from that source, <em>et
          cetera</em>), but the Web does not.</li>

          <li>An account under attack isn't notified (unless the
          server is heavily modified); there's no "You have 19483
          login failures" message when the legitimate owner logs
          in.</li>

          <li>Without an exhaustive and error-prone examination of
          the server logs, you can't tell whether an account has
          been compromised. Detecting that an attack has occurred,
          or is in progress, is fairly obvious, though -
          <em>if</em> you look at the logs.</li>

          <li>Web authentication passwords (at least for Basic
          authentication) generally fly across the wire, and
          through intermediate proxy systems, in what amounts to
          plain text. "O'er the net we go/Caching all the way;/O
          what fun it is to surf/Giving my password away!"</li>

          <li>Since HTTP is stateless, information about the
          authentication is transmitted <em>each and every
          time</em> a request is made to the server. Essentially,
          the client caches it after the first successful access,
          and transmits it without asking for all subsequent
          requests to the same server.</li>

          <li>It's relatively trivial for someone on your system to
          put up a page that will steal the cached password from a
          client's cache without them knowing. Can you say
          "password grabber"?</li>
        </ul>

        <p>If you still want to do this in light of the above
        disadvantages, the method is left as an exercise for the
        reader. It'll void your Apache warranty, though, and you'll
        lose all accumulated UNIX guru points.</p>
        <hr />
      </li>

      <li>
        <a id="prompted-twice" name="prompted-twice"><strong>Why
        does Apache ask for my password twice before serving a
        file?</strong></a> 

        <p>If the hostname under which you are accessing the server
        is different than the hostname specified in the <a
        href="../mod/core.html#servername"><code>ServerName</code></a>
        directive, then depending on the setting of the <a
        href="../mod/core.html#usecanonicalname"><code>UseCanonicalName</code></a>
        directive, Apache will redirect you to a new hostname when
        constructing self-referential URLs. This happens, for
        example, in the case where you request a directory without
        including the trailing slash.</p>

        <p>When this happens, Apache will ask for authentication
        once under the original hostname, perform the redirect, and
        then ask again under the new hostname. For security
        reasons, the browser must prompt again for the password
        when the host name changes.</p>

        <p>To eliminate this problem you should</p>

        <ol>
          <li>Always use the trailing slash when requesting
          directories;</li>

          <li>Change the <code>ServerName</code> to match the name
          you are using in the URL; and/or</li>

          <li>Set <code>UseCanonicalName off</code>.</li>
        </ol>
        <hr />
      </li>

      <li>
        <a id="image-theft" name="image-theft"><strong>How can I prevent
        people from "stealing" the images from my web site?</strong></a> 

        <p>The goal here is to prevent people from inlining your images
        directly from their web site, but accessing them only if they
        appear inline in your pages.<p>

        <p>This can be accomplished with a combination of SetEnvIf and
        the Deny and Allow directives. However, it is important to 
        understand that any access restriction based on the REFERER
        header is intrinsically problematic due to the fact that 
        browsers can send an incorrect REFERER, either because they 
        want to circumvent your restriction or simply because they don't
        send the right thing (or anything at all).</p>

        <p>The following configuration will produce the desired effect
        if the browser passes correct REFERER headers.</p>

<pre>
SetEnvIf REFERER "www\.mydomain\.com" linked_from_here
SetEnvIf REFERER "^$" linked_from_here

&lt;Directory /www/images&gt;
    Order deny,allow
    Deny from all
    Allow from env=linked_from_here
&lt;/Directory&gt;
</pre>

<p>Further examples can be found in the <a 
href="../env.html#examples">Environment Variables</a> documentation.</p>

        <hr />
      </li>


    </ol>
    
    
  </body>
</html>


    








      
      
    

    <h3>H. URL Rewriting</h3>

    <ol>
      <li>
        <a id="rewrite-more-config"
        name="rewrite-more-config"><strong>Where can I find
        mod_rewrite rulesets which already solve particular
        URL-related problems?</strong></a> 

        <p>There is a collection of <a
        href="http://www.engelschall.com/pw/apache/rewriteguide/">Practical
        Solutions for URL-Manipulation</a> where you can find all
        typical solutions the author of <a
        href="../mod/mod_rewrite.html"><samp>mod_rewrite</samp></a>
        currently knows of. If you have more interesting rulesets
        which solve particular problems not currently covered in
        this document, send it to <a
        href="mailto:rse@@apache.org">Ralf S. Engelschall</a> for
        inclusion. The other webmasters will thank you for avoiding
        the reinvention of the wheel.</p>
        <hr />
      </li>

      <li>
        <a id="rewrite-article"
        name="rewrite-article"><strong>Where can I find any
        published information about URL-manipulations and
        mod_rewrite?</strong></a> 

        <p>There is an article from <a
        href="mailto:rse@@apache.org">Ralf S. Engelschall</a> about
        URL-manipulations based on <a
        href="../mod/mod_rewrite.html"><samp>mod_rewrite</samp></a>
        in the "iX Multiuser Multitasking Magazin" issue #12/96.
        The german (original) version can be read online at &lt;<a
        href="http://www.heise.de/ix/artikel/9612149/">http://www.heise.de/ix/artikel/9612149/</a>&gt;,
        the English (translated) version can be found at &lt;<a
        href="http://www.heise.de/ix/artikel/E/9612149/">http://www.heise.de/ix/artikel/E/9612149/</a>&gt;.</p>
        <hr />
      </li>

      <li>
        <a id="rewrite-complexity"
        name="rewrite-complexity"><strong>Why is mod_rewrite so
        difficult to learn and seems so complicated?</strong></a> 

        <p>Hmmm... there are a lot of reasons. First, mod_rewrite
        itself is a powerful module which can help you in really
        <strong>all</strong> aspects of URL rewriting, so it can be
        no trivial module per definition. To accomplish its hard
        job it uses software leverage and makes use of a powerful
        regular expression library by Henry Spencer which is an
        integral part of Apache since its version 1.2. And regular
        expressions itself can be difficult to newbies, while
        providing the most flexible power to the advanced
        hacker.</p>

        <p>On the other hand mod_rewrite has to work inside the
        Apache API environment and needs to do some tricks to fit
        there. For instance the Apache API as of 1.x really was not
        designed for URL rewriting at the <tt>.htaccess</tt> level
        of processing. Or the problem of multiple rewrites in
        sequence, which is also not handled by the API per design.
        To provide this features mod_rewrite has to do some special
        (but API compliant!) handling which leads to difficult
        processing inside the Apache kernel. While the user usually
        doesn't see anything of this processing, it can be
        difficult to find problems when some of your RewriteRules
        seem not to work.</p>
        <hr />
      </li>

      <li>
        <a id="rewrite-dontwork"
        name="rewrite-dontwork"><strong>What can I do if my
        RewriteRules don't work as expected?</strong></a> 

        <p>Use "<samp>RewriteLog somefile</samp>" and
        "<samp>RewriteLogLevel 9</samp>" and have a precise look at
        the steps the rewriting engine performs. This is really the
        only one and best way to debug your rewriting
        configuration.</p>
        <hr />
      </li>

      <li>
        <a id="rewrite-prefixdocroot"
        name="rewrite-prefixdocroot"><strong>Why don't some of my
        URLs get prefixed with DocumentRoot when using
        mod_rewrite?</strong></a> 

        <p>If the rule starts with <samp>/somedir/...</samp> make
        sure that really no <samp>/somedir</samp> exists on the
        filesystem if you don't want to lead the URL to match this
        directory, <em>i.e.</em>, there must be no root directory
        named <samp>somedir</samp> on the filesystem. Because if
        there is such a directory, the URL will not get prefixed
        with DocumentRoot. This behavior looks ugly, but is really
        important for some other aspects of URL rewriting.</p>
        <hr />
      </li>

      <li>
        <a id="rewrite-nocase" name="rewrite-nocase"><strong>How
        can I make all my URLs case-insensitive with
        mod_rewrite?</strong></a> 

        <p>You can't! The reasons are: first, that, case
        translations for arbitrary length URLs cannot be done
        <em>via</em> regex patterns and corresponding
        substitutions. One needs a per-character pattern like the
        sed/Perl <samp>tr|..|..|</samp> feature. Second, just
        making URLs always upper or lower case does not solve the
        whole problem of case-INSENSITIVE URLs, because URLs
        actually have to be rewritten to the correct case-variant
        for the file residing on the filesystem in order to allow
        Apache to access the file. And the Unix filesystem is
        always case-SENSITIVE.</p>

        <p>But there is a module named <code><a
        href="../mod/mod_speling.html">mod_speling.c</a></code> in
        the Apache distribution. Try this module to help correct
        people who use mis-cased URLs.</p>
        <hr />
      </li>

      <li>
        <a id="rewrite-virthost"
        name="rewrite-virthost"><strong>Why are RewriteRules in my
        VirtualHost parts ignored?</strong></a> 

        <p>Because you have to enable the engine for every virtual
        host explicitly due to security concerns. Just add a
        "RewriteEngine on" to your virtual host configuration
        parts.</p>
        <hr />
      </li>

      <li>
        <a id="rewrite-envwhitespace"
        name="rewrite-envwhitespace"><strong>How can I use strings
        with whitespaces in RewriteRule's ENV flag?</strong></a> 

        <p>There is only one ugly solution: You have to surround
        the complete flag argument by quotation marks
        (<samp>"[E=...]"</samp>). Notice: The argument to quote
        here is not the argument to the E-flag, it is the argument
        of the Apache config file parser, <em>i.e.</em>, the third
        argument of the RewriteRule here. So you have to write
        <samp>"[E=any text with whitespaces]"</samp>.</p>
        <hr />
      </li>
    </ol>
    
    
  </body>
</html>


    








      
      
    

    <h3>I. Features</h3>

    <ol>
      <li>
        <a id="proxy" name="proxy"><strong>Does or will Apache act
        as a Proxy server?</strong></a> 

        <p>Apache version 1.1 and above comes with a <a
        href="../mod/mod_proxy.html">proxy module</a>. If compiled
        in, this will make Apache act as a caching-proxy
        server.</p>
        <hr />
      </li>

      <li>
        <a id="multiviews" name="multiviews"><strong>What are
        "multiviews"?</strong></a> 

        <p>"Multiviews" is the general name given to the Apache
        server's ability to provide language-specific document
        variants in response to a request. This is documented quite
        thoroughly in the <a href="../content-negotiation.html"
        rel="Help">content negotiation</a> description page. In
        addition, <cite>Apache Week</cite> carried an article on
        this subject entitled "<a
        href="http://www.apacheweek.com/features/negotiation"
        rel="Help"><cite>Content Negotiation
        Explained</cite></a>".</p>
        <hr />
      </li>

      <li>
        <a id="putsupport" name="putsupport"><strong>Why can't I
        publish to my Apache server using PUT on Netscape Gold and
        other programs?</strong></a> 

        <p>Because you need to install and configure a script to
        handle the uploaded files. This script is often called a
        "PUT" handler. There are several available, but they may
        have security problems. Using FTP uploads may be easier and
        more secure, at least for now. For more information, see
        the <cite>Apache Week</cite> article <a
        href="http://www.apacheweek.com/features/put"><cite>Publishing
        Pages with PUT</cite></a>.</p>
        <hr />
      </li>

      <li>
        <a id="SSL-i" name="SSL-i"><strong>Why doesn't Apache
        include SSL?</strong></a> 

        <p>SSL (Secure Socket Layer) data transport requires
        encryption, and many governments have restrictions upon the
        import, export, and use of encryption technology. If Apache
        included SSL in the base package, its distribution would
        involve all sorts of legal and bureaucratic issues, and it
        would no longer be freely available. Also, some of the
        technology required to talk to current clients using SSL is
        patented by <a href="http://www.rsa.com/">RSA Data
        Security</a>, who restricts its use without a license.</p>

        <p>Some SSL implementations of Apache are available,
        however; see the "<a
        href="http://httpd.apache.org/related_projects.html">related
        projects</a>" page at the main Apache web site.</p>

        <p>You can find out more about this topic in the
        <cite>Apache Week</cite> article about <a
        href="http://www.apacheweek.com/features/ssl"
        rel="Help"><cite>Apache and Secure
        Transactions</cite></a>.</p>
        <hr />
      </li>

      <li>
        <a id="footer" name="footer"><strong>How can I attach a
        footer to my documents without using SSI?</strong></a> 

        <p>You can make arbitrary changes to static documents by
        configuring an <a
        href="../mod/mod_actions.html#action">Action</a> which
        launches a CGI script. The CGI is then responsible for
        setting a content-type and delivering the requested
        document (the location of which is passed in the
        <samp>PATH_TRANSLATED</samp> environment variable), along
        with whatever footer is needed.</p>

        <p>Busy sites may not want to run a CGI script on every
        request, and should consider using an Apache module to add
        the footer. There are several third party modules available
        through the <a href="http://modules.apache.org/">Apache
        Module Registry</a> which will add footers to documents.
        These include mod_trailer, PHP
        (<samp>php3_auto_append_file</samp>), mod_layout, and
        mod_perl (<samp>Apache::Sandwich</samp>).</p>
        <hr />
      </li>

      <li>
        <a id="search" name="search"><strong>Does Apache include a
        search engine?</strong></a> 

        <p>Apache does not include a search engine, but there are
        many good commercial and free search engines which can be
        used easily with Apache. Some of them are listed on the <a
        href="http://www.searchtools.com/tools/tools.html">Web Site
        Search Tools</a> page. Open source search engines that are
        often used with Apache include <a
        href="http://www.htdig.org/">ht://Dig</a> and <a
        href="http://sunsite.berkeley.edu/SWISH-E/">SWISH-E</a>.</p>
        <hr />
      </li>

      <li>
        <a id="rotate" name="rotate"><strong>How can I rotate my
        log files?</strong></a> 

        <p>The simple answer: by piping the transfer log into an
        appropriate log file rotation utility.</p>

        <p>The longer answer: In the src/support/ directory, you
        will find a utility called <a
        href="../programs/rotatelogs.html">rotatelogs</a> which can
        be used like this:</p>
<pre>
   TransferLog "|/path/to/rotatelogs /path/to/logs/access_log 86400"
</pre>

        <p>to enable daily rotation of the log files.<br />
         A more sophisticated solution of a logfile rotation
        utility is available under the name <code>cronolog</code>
        from Andrew Ford's site at <a
        href="http://www.cronolog.org/">http://www.cronolog.org/</a>.
        It can automatically create logfile subdirectories based on
        time and date, and can have a constant symlink point to the
        rotating logfiles. (As of version 1.6.1, cronolog is
        available under the <a href="../LICENSE">Apache
        License</a>). Use it like this:</p>
<pre>
   CustomLog "|/path/to/cronolog --symlink=/usr/local/apache/logs/access_log /usr/local/apache/logs/%Y/%m/access_log" combined
</pre>
        <hr />
      </li>

      <li>
        <a id="conditional-logging"
        name="conditional-logging"><strong>How do I keep certain
        requests from appearing in my logs?</strong></a> 

        <p>The maximum flexibility for removing unwanted
        information from log files is obtained by post-processing
        the logs, or using piped-logs to feed the logs through a
        program which does whatever you want. However, Apache does
        offer the ability to prevent requests from ever appearing
        in the log files. You can do this by using the <a
        href="../mod/mod_setenvif.html#setenvif"><code>SetEnvIf</code></a>
        directive to set an environment variable for certain
        requests and then using the conditional <a
        href="../mod/mod_log_config.html#customlog-conditional"><code>
        CustomLog</code></a> syntax to prevent logging when the
        environment variable is set.</p>
        <hr />
      </li>

      <li>
        <a id="dbinteg" name="dbinteg"><b>Does Apache support any
        sort of database integration?</b></a> 

        <p>No. Apache is a Web (HTTP) server, not an application
        server. The base package does not include any such
        functionality. See the <a href="http://www.php.net/">PHP
        project</a> and the <a
        href="http://perl.apache.org/">mod_perl project</a> for
        examples of modules that allow you to work with databases
        from within the Apache environment.</p>
        <hr />
      </li>

      <li>
        <a id="asp" name="asp"><b>Can I use Active Server Pages
        (ASP) with Apache?</b></a> 

        <p>The base Apache Web server package does not include ASP
        support. However, there are a couple of after-market
        solutions that let you add this functionality; see the <a
        href="http://httpd.apache.org/related_projects.html">related
        projects</a> page to find out more.</p>
        <hr />
      </li>

      <li>
        <a id="java" name="java"><b>Does Apache come with Java
        support?</b></a> 

        <p>The base Apache Web server package does not include
        support for Java, Java Server Pages, Enterprise Java Beans,
        or Java servlets. Those features are available as add-ons
        from the Apache/Java project site, &lt;URL:<a
        href="http://jakarta.apache.org">http://jakarta.apache.org/</a>&gt;.</p>
        <hr />
      </li>
    </ol>
    
    
  </body>
</html>


        <hr />

    <h3 align="CENTER">Apache HTTP Server Version 1.3</h3>
    <a href="./"><img src="../images/index.gif" alt="Index" /></a>
    <a href="../"><img src="../images/home.gif" alt="Home" /></a>

  </body>
</html>

@


1.15
log
@from Mikolaj Kucharski:
- move FAQ.html to misc/FAQ.html, since all docs point there
- change a broken link in ssl_faq.html

from Rares Aioanei:
- underlaying -> underlying

ok henning
@
text
@@


1.14
log
@merge apache 1.3.29 and mod_ssl 2.8.16
ok brad@@
@
text
@d9 1
a9 1
    <!--#set var="FAQMASTER" value="YES" -->
d89 240
d331 6
d338 8
d347 83
d432 6
d439 8
a447 2
    </ol>
    <hr />
d449 50
a498 1
    <h2>The Answers</h2>
d501 55
d558 50
d610 55
d667 8
d676 3269
@


1.13
log
@merge
@
text
@d9 1
a9 1
    
a88 42








      

      <li value="1">
        <strong>Background</strong> 

        <ol>
          <li><a href="#what">What is Apache?</a></li>

          <li><a href="#why">How and why was Apache
          created?</a></li>

          <li><a href="#name">Why the name "Apache"?</a></li>

          <li><a href="#compare">OK, so how does Apache compare to
          other servers?</a></li>

          <li><a href="#tested">How thoroughly tested is
          Apache?</a></li>

          <li><a href="#future">What are the future plans for
          Apache?</a></li>

          <li><a href="#support">Whom do I contact for
          support?</a></li>

          <li><a href="#more">Is there any more information on
          Apache?</a></li>

          <li><a href="#where">Where can I get Apache?</a></li>

          <li><a href="#logo">May I use the Apache logo on my
          product or Web site?</a></li>
        </ol>
      </li>
a90 6
    
    
  </body>
</html>


a91 8








a92 37

      <li value="2">
        <strong>General Technical Questions</strong> 

        <ol>
          <li><a href="#what2do">"Why can't I ...? Why won't ...
          work?" What to do in case of problems</a></li>

          <li><a href="#compatible">How compatible is Apache with
          my existing NCSA 1.3 setup?</a></li>

          <li><a href="#year2000">Is Apache Year 2000
          compliant?</a></li>

          <li><a href="#submit_patch">How do I submit a patch to
          the Apache Group?</a></li>

          <li><a href="#domination">Why has Apache stolen my
          favourite site's Internet address?</a></li>

          <li><a href="#apspam">Why am I getting spam mail from the
          Apache site?</a></li>

          <li><a href="#redist">May I include the Apache software
          on a CD or other package I'm distributing?</a></li>

          <li><a href="#zoom">What's the best hardware/operating
          system/... How do I get the most out of my Apache Web
          server?</a></li>

          <li><a href="#regex">What are "regular
          expressions"?</a></li>

          <li><a href="#binaries">Why isn't there a binary for my
          platform?</a></li>
        </ol>
      </li>
a94 6
    
    
  </body>
</html>


a95 8








d97 2
d100 1
a100 297
      <li value="3">
        <strong>Building Apache</strong> 

        <ol>
          <li><a href="#bind8.1">Why do I get an error about an
          undefined reference to "<samp>__inet_ntoa</samp>" or
          other <samp>__inet_*</samp> symbols?</a></li>

          <li><a href="#cantbuild">Why won't Apache compile with my
          system's <samp>cc</samp>?</a></li>

          <li><a href="#linuxiovec">Why do I get complaints about
          redefinition of "<code>struct iovec</code>" when
          compiling under Linux?</a></li>

          <li><a href="#broken-gcc">I'm using gcc and I get some
          compilation errors, what is wrong?</a></li>

          <li><a href="#glibc-crypt">I'm using RedHat Linux 5.0, or
          some other <samp>glibc</samp>-based Linux system, and I
          get errors with the <code>crypt</code> function when I
          attempt to build Apache 1.2.</a></li>
        </ol>
      </li>
      
      
    
    
  </body>
</html>


      








      

      <li value="4">
        <strong>Error Log Messages and Problems Starting
        Apache</strong> 

        <ol>
          <li><a href="#setgid">Why do I get "<samp>setgid: Invalid
          argument</samp>" at startup?</a></li>

          <li><a href="#nodelay">Why am I getting "<samp>httpd:
          could not set socket option TCP_NODELAY</samp>" in my
          error log?</a></li>

          <li><a href="#peerreset">Why am I getting
          "<samp>connection reset by peer</samp>" in my error
          log?</a></li>

          <li><a href="#wheres-the-dump">The errorlog says Apache
          dumped core, but where's the dump file?</a></li>

          <li><a href="#linux-shmget">When I run it under Linux I
          get "shmget: function not found", what should I
          do?</a></li>

          <li><a href="#nfslocking">Server hangs, or fails to
          start, and/or error log fills with "<samp>fcntl:
          F_SETLKW: No record locks available</samp>" or similar
          messages</a></li>

          <li><a href="#aixccbug">Why am I getting "<samp>Expected
          &lt;/Directory&gt; but saw &lt;/Directory&gt;</samp>"
          when I try to start Apache?</a></li>

          <li><a href="#redhat">I'm using RedHat Linux and I have
          problems with httpd dying randomly or not restarting
          properly</a></li>

          <li><a href="#stopping">I upgraded from an Apache version
          earlier than 1.2.0 and suddenly I have problems with
          Apache dying randomly or not restarting properly</a></li>

          <li><a href="#setservername">When I try to start Apache
          from a DOS window, I get a message like "<samp>Cannot
          determine host name. Use ServerName directive to set it
          manually.</samp>" What does this mean?</a></li>

          <li><a href="#ws2_32dll">When I try to start Apache for
          Windows, I get a message like "<samp>Unable To Locate
          WS2_32.DLL...</samp>". What should I do?</a></li>

          <li><a href="#WSADuplicateSocket">Apache for Windows does
          not start. Error log contains this message "<samp>[crit]
          (10045) The attempted operation is not supported for the
          type of object referenced: Parent: WSADuplicateSocket
          failed for socket ###</samp>". What does this
          mean?</a></li>

          <li><a href="#err1067">When I try to start Apache on
          Windows, I get a message like "<code>System error 1067
          has occurred. The process terminated
          unexpectedly.</code>" What does this mean?</a></li>

          <li><a href="#suseFDN">On a SuSE Linux system, I try and 
          configure access control using basic authentication.
	  Although I follow the example exactly, authentication
	  fails, and an error message "<code>admin: not a valid
	  FDN: ....</code>" is logged.</a></li>

          <li><a href="#codered">Why do I have weird entries in my
          logs asking for <code>default.ida</code> and
          <code>cmd.exe</code>?</a></li>

          <li><a href="#restart">Why am I getting server restart
          messages periodically, when I did not restart the
          server?</a></li>

          <li><a href="#modulemagic">Why am I getting &quot;module
          <em>module-name</em> is not compatible with this version of
          Apache&quot; messages in my error log?</a></li>

        </ol>
      </li>
      
      
    
    
  </body>
</html>


      








      

      <li value="5">
        <strong>Configuration Questions</strong> 

        <ol>
          <li><a href="#fdlim">Why can't I run more than
          &lt;<em>n</em>&gt; virtual hosts?</a></li>

          <li><a href="#freebsd-setsize">Can I increase
          <samp>FD_SETSIZE</samp> on FreeBSD?</a></li>

          <li><a href="#errordoc401">Why doesn't my
          <code>ErrorDocument 401</code> work?</a></li>

          <li><a href="#cookies1">Why does Apache send a cookie on
          every response?</a></li>

          <li><a href="#cookies2">Why don't my cookies work, I even
          compiled in <samp>mod_cookies</samp>?</a></li>

          <li><a href="#jdk1-and-http1.1">Why do my Java app[let]s
          give me plain text when I request an URL from an Apache
          server?</a></li>

          <li><a href="#midi">How do I get Apache to send a MIDI
          file so the browser can play it?</a></li>

          <li><a href="#addlog">How do I add browsers and referrers
          to my logs?</a></li>

          <li><a href="#set-servername">Why does accessing
          directories only work when I include the trailing "/"
          (<em>e.g.</em>,&nbsp;<samp>http://foo.domain.com/~user/</samp>)
          but not when I omit it
          (<em>e.g.</em>,&nbsp;<samp>http://foo.domain.com/~user</samp>)?</a></li>

          <li><a href="#no-info-directives">Why doesn't mod_info
          list any directives?</a></li>

          <li><a href="#namevhost">I upgraded to Apache 1.3 and now
          my virtual hosts don't work!</a></li>

          <li><a href="#redhat-htm">I'm using RedHat Linux and my
          .htm files are showing up as HTML source rather than
          being formatted!</a></li>

          <li><a href="#htaccess-work">My <code>.htaccess</code>
          files are being ignored.</a></li>

          <li><a href="#forbidden">Why do I get a
          "<samp>Forbidden</samp>" message whenever I try to access
          a particular directory?</a></li>

          <li><a href="#malfiles">Why do I get a
          "<samp>Forbidden/You don't have permission to access / on
          this server</samp>" message whenever I try to access my
          server?</a></li>

          <li><a href="#ie-ignores-mime">Why do my files appear
          correctly in Internet Explorer, but show up as source or
          trigger a save window with Netscape; or, Why doesn't
          Internet Explorer render my text/plain document
          correctly?</a></li>

	  <li><a href="#canonical-hostnames">My site is accessible
          under many different hostnames; how do I redirect clients
          so that they see only a single name?</a></li>

          <li><a href="#firewall">Why can I access my website from the
          server or from my local network, but I can't access it from
          elsewhere on the Internet?</a></li>

	  <li><a href="#indexes">How do I turn automatic directory listings
	  on or off?</a></li>

         <li><a href="#options">Why do my Options directives not have
         the desired effect?</a></li>

         <li><a href="#serverheader">How can I change the information
         that Apache returns about itself in the headers?</a></li>

         <li><a href="#proxyscan">Why do I see requests for other sites
         appearing in my log files?</a></li>

        </ol>
      </li>
      
      
    
    
  </body>
</html>


      








      

      <li value="6">
        <strong>Dynamic Content (CGI and SSI)</strong> 

        <ol>
          <li><a href="#CGIoutsideScriptAlias">How do I enable CGI
          execution in directories other than the
          ScriptAlias?</a></li>

          <li><a href="#premature-script-headers">What does it mean
          when my CGIs fail with "<samp>Premature end of script
          headers</samp>"?</a></li>

          <li><a href="#POSTnotallowed">Why do I keep getting
          "Method Not Allowed" for form POST requests?</a></li>

          <li><a href="#nph-scripts">How can I get my script's
          output without Apache buffering it? Why doesn't my server
          push work?</a></li>

          <li><a href="#cgi-spec">Where can I find the "CGI
          specification"?</a></li>

          <li><a href="#fastcgi">Why isn't FastCGI included with
          Apache any more?</a></li>

          <li><a href="#ssi-part-i">How do I enable SSI (parsed
          HTML)?</a></li>

          <li><a href="#ssi-part-ii">Why don't my parsed files get
          cached?</a></li>

          <li><a href="#ssi-part-iii">How can I have my script
          output parsed?</a></li>

          <li><a href="#ssi-part-iv">SSIs don't work for
          VirtualHosts and/or user home directories</a></li>

          <li><a href="#errordocssi">How can I use
          <code>ErrorDocument</code> and SSI to simplify customized
          error messages?</a></li>

          <li><a href="#remote-user-var">Why is the environment
          variable <samp>REMOTE_USER</samp> not set?</a></li>

          <li><a href="#user-cgi">How do I allow each of my user
          directories to have a cgi-bin directory?</a></li>
        </ol>
      </li>
      
      
a102 55
  </body>
</html>


      








      

      <li value="7">
        <strong>Authentication and Access Restrictions</strong> 

        <ol>
          <li><a href="#dnsauth">Why isn't restricting access by
          host or domain name working correctly?</a></li>

          <li><a href="#user-authentication">How do I set up Apache
          to require a username and password to access certain
          documents?</a></li>

          <li><a href="#remote-auth-only">How do I set up Apache to
          allow access to certain documents only if a site is
          either a local site <em>or</em> the user supplies a
          password and username?</a></li>

          <li><a href="#authauthoritative">Why does my
          authentication give me a server error?</a></li>

          <li><a href="#auth-on-same-machine">Do I have to keep the
          (mSQL) authentication information on the same
          machine?</a></li>

          <li><a href="#msql-slow">Why is my mSQL authentication
          terribly slow?</a></li>

          <li><a href="#passwdauth">Can I use my
          <samp>/etc/passwd</samp> file for Web page
          authentication?</a></li>

          <li><a href="#prompted-twice">Why does Apache ask for my
          password twice before serving a file?</a></li>

          <li><a href="#image-theft">How can I prevent people from
          "stealing" the images from my web site?</a></li>

        </ol>
      </li>
      
      
a104 50
  </body>
</html>


      








      

      <li value="8">
        <strong>URL Rewriting</strong> 

        <ol>
          <li><a href="#rewrite-more-config">Where can I find
          mod_rewrite rulesets which already solve particular
          URL-related problems?</a></li>

          <li><a href="#rewrite-article">Where can I find any
          published information about URL-manipulations and
          mod_rewrite?</a></li>

          <li><a href="#rewrite-complexity">Why is mod_rewrite so
          difficult to learn and seems so complicated?</a></li>

          <li><a href="#rewrite-dontwork">What can I do if my
          RewriteRules don't work as expected?</a></li>

          <li><a href="#rewrite-prefixdocroot">Why don't some of my
          URLs get prefixed with DocumentRoot when using
          mod_rewrite?</a></li>

          <li><a href="#rewrite-nocase">How can I make all my URLs
          case-insensitive with mod_rewrite?</a></li>

          <li><a href="#rewrite-virthost">Why are RewriteRules in
          my VirtualHost parts ignored?</a></li>

          <li><a href="#rewrite-envwhitespace">How can I use
          strings with whitespaces in RewriteRule's ENV
          flag?</a></li>
        </ol>
      </li>
      
      
a106 55
  </body>
</html>


      








      

      <li value="9">
        <strong>Features</strong> 

        <ol>
          <li><a href="#proxy">Does or will Apache act as a Proxy
          server?</a></li>

          <li><a href="#multiviews">What are "multiviews"?</a></li>

          <li><a href="#putsupport">Why can't I publish to my
          Apache server using PUT on Netscape Gold and other
          programs?</a></li>

          <li><a href="#SSL-i">Why doesn't Apache include
          SSL?</a></li>

          <li><a href="#footer">How can I attach a footer to my
          documents without using SSI?</a></li>

          <li><a href="#search">Does Apache include a search
          engine?</a></li>

          <li><a href="#rotate">How can I rotate my log
          files?</a></li>

          <li><a href="#conditional-logging">How do I keep certain
          requests from appearing in my logs?</a></li>

          <li><a href="#dbinteg">Does Apache include any sort of
          database integration?</a></li>

          <li><a href="#asp">Can I use Active Server Pages (ASP)
          with Apache?</a></li>

          <li><a href="#java">Does Apache come with Java
          support?</a></li>
        </ol>
      </li>
      
      
a108 8
  </body>
</html>


    </ol>
    <hr />

    <h2>The Answers</h2>
a109 3290








      
      
    

    <h3>A. Background</h3>

    <ol>
      <li>
        <a id="what" name="what"><strong>What is
        Apache?</strong></a> 

        <p>The Apache httpd server</p>

        <ul>
          <li>is a powerful, flexible, HTTP/1.1 compliant web
          server</li>

          <li>implements the latest protocols, including HTTP/1.1
          (RFC2616)</li>

          <li>is highly configurable and extensible with
          third-party modules</li>

          <li>can be customised by writing 'modules' using the
          Apache module API</li>

          <li>provides full source code and comes with an
          unrestrictive license</li>

          <li>runs on Windows NT/9x, Netware 5.x and above, OS/2, and most
          versions of Unix, as well as several other operating
          systems</li>

          <li>is actively being developed</li>

          <li>encourages user feedback through new ideas, bug
          reports and patches</li>

          <li>
            implements many frequently requested features,
            including:<br />
            <br />
             

            <dl>
              <dt>DBM databases for authentication</dt>

              <dd>allows you to easily set up password-protected
              pages with enormous numbers of authorized users,
              without bogging down the server.</dd>

              <dt>Customized responses to errors and problems</dt>

              <dd>Allows you to set up files, or even CGI scripts,
              which are returned by the server in response to
              errors and problems, e.g. setup a script to intercept
              <strong>500 Server Error</strong>s and perform
              on-the-fly diagnostics for both users and
              yourself.</dd>

              <dt>Multiple DirectoryIndex directives</dt>

              <dd>Allows you to say <code>DirectoryIndex index.html
              index.cgi</code>, which instructs the server to
              either send back <code>index.html</code> or run
              <code>index.cgi</code> when a directory URL is
              requested, whichever it finds in the directory.</dd>

              <dt>Unlimited flexible URL rewriting and
              aliasing</dt>

              <dd>Apache has no fixed limit on the numbers of
              Aliases and Redirects which may be declared in the
              config files. In addition, a powerful rewriting
              engine can be used to solve most URL manipulation
              problems.</dd>

              <dt>Content negotiation</dt>

              <dd>i.e. the ability to automatically serve clients
              of varying sophistication and HTML level compliance,
              with documents which offer the best representation of
              information that the client is capable of
              accepting.</dd>

              <dt>Virtual Hosts</dt>

              <dd>A much requested feature, sometimes known as
              multi-homed servers. This allows the server to
              distinguish between requests made to different IP
              addresses or names (mapped to the same machine).
              Apache also offers dynamically configurable
              mass-virtual hosting.</dd>

              <dt>Configurable Reliable Piped Logs</dt>

              <dd>You can configure Apache to generate logs in the
              format that you want. In addition, on most Unix
              architectures, Apache can send log files to a pipe,
              allowing for log rotation, hit filtering, real-time
              splitting of multiple vhosts into separate logs, and
              asynchronous DNS resolving on the fly.</dd>
            </dl>
          </li>
        </ul>
        <hr />
      </li>

      <li>
        <a id="why" name="why"><strong>How and why was Apache
        created?</strong></a> 

        <p>The <a
        href="http://httpd.apache.org/ABOUT_APACHE.html">About
        Apache</a> document explains how the Apache project evolved
        from its beginnings as an outgrowth of the NCSA httpd
        project to its current status as one of the fastest, most
        efficient, and most functional web servers in
        existence.</p>
        <hr />
      </li>

      <li>
        <a id="name" name="name"><strong>Why the name
        "Apache"?</strong></a> 

        <p>The name 'Apache' was chosen from respect for
        the Native American Indian tribe of Apache (Ind&eacute;),
        <a href="http://www.indians.org/welker/apache.htm">well-known
        for their superior skills in warfare strategy and their
        inexhaustible endurance</a>. For more information on the
        Apache Nation, we suggest searching
        <a href="http://www.google.com/search?q=Apache+Nation">Google</a>,
        <a href="http://www.northernlight.com/nlquery.fcg?qr=Apache+Nation"
          >Northernlight</a>, or
        <a href="http://www.alltheweb.com/cgi-bin/asearch?query=Apache+Nation"
          >AllTheWeb</a>.</p>

        <p>Secondarily, and more popularly (though incorrectly) accepted,
        it's a considered cute name which stuck. Apache is "<strong>A
        PA</strong>t<strong>CH</strong>y server". It was based on
        some existing code and a series of "patch files".</p>

        <hr />
      </li>

      <li>
        <a id="compare" name="compare"><strong>OK, so how does
        Apache compare to other servers?</strong></a> 

        <p>For an independent assessment, see <a
        href="http://webcompare.internet.com/">Web
        Compare</a>.</p>

        <p>Apache has been shown to be substantially faster, more
        stable, and more feature-full than many other web servers.
        Although certain commercial servers have claimed to surpass
        Apache's speed (it has not been demonstrated that any of
        these "benchmarks" are a good way of measuring WWW server
        speed at any rate), we feel that it is better to have a
        mostly-fast free server than an extremely-fast server that
        costs thousands of dollars. Apache is run on sites that get
        millions of hits per day, and they have experienced no
        performance difficulties.</p>
        <hr />
      </li>

      <li>
        <a id="tested" name="tested"><strong>How thoroughly tested
        is Apache?</strong></a> 

        <p>Apache is run on over 6 million Internet servers (as of
        February 2000). It has been tested thoroughly by both
        developers and users. The Apache Group maintains rigorous
        standards before releasing new versions of their server,
        and our server runs without a hitch on over one half of all
        WWW servers available on the Internet. When bugs do show
        up, we release patches and new versions as soon as they are
        available.</p>
        <hr />
      </li>

      <li>
        <a id="future" name="future"><strong>What are the future
        plans for Apache?</strong></a> 

        <ul>
          <li>to continue to be an "open source" no-charge-for-use
          HTTP server,</li>

          <li>to keep up with advances in HTTP protocol and web
          developments in general,</li>

          <li>to collect suggestions for fixes/improvements from
          its users,</li>

          <li>to respond to needs of large volume providers as well
          as occasional users.</li>
        </ul>
        <hr />
      </li>

      <li>
        <a id="support" name="support"><strong>Whom do I contact
        for support?</strong></a> 

        <p>There is no official support for Apache. None of the
        developers want to be swamped by a flood of trivial
        questions that can be resolved elsewhere. Bug reports and
        suggestions should be sent <em>via</em> <a
        href="http://httpd.apache.org/bug_report.html">the bug
        report page</a>. Other questions should be directed to the
        <a href="http://httpd.apache.org/userslist.html">Apache HTTP
        Server Users List</a> or the
        <a
        href="news:comp.infosystems.www.servers.unix">comp.infosystems.www.servers.unix</a>
        or <a
        href="news:comp.infosystems.www.servers.ms-windows">comp.infosystems.www.servers.ms-windows</a>
        newsgroup (as appropriate for the platform you use), where
        some of the Apache team lurk, in the company of many other
        httpd gurus who should be able to help.</p>

        <p>Commercial support for Apache is, however, available
        from a number of third parties.</p>
        <hr />
      </li>

      <li>
        <a id="more" name="more"><strong>Is there any more
        information available on Apache?</strong></a> 

        <p>Indeed there is. See the main <a
        href="http://httpd.apache.org/">Apache web site</a>. There
        is also a regular electronic publication called <a
        href="http://www.apacheweek.com/" rel="Help"><cite>Apache
        Week</cite></a> available. Links to relevant <cite>Apache
        Week</cite> articles are included below where appropriate.
        There are also some <a
        href="http://httpd.apache.org/info/apache_books.html">Apache-specific
        books</a> available.</p>
        <hr />
      </li>

      <li>
        <a id="where" name="where"><strong>Where can I get
        Apache?</strong></a> 

        <p>You can find out how to download the source for Apache
        at the project's <a href="http://httpd.apache.org/">main
        web page</a>.</p>
        <hr />
      </li>

      <li>
        <a id="logo" name="logo"><b>May I use the Apache logo on my
        product or Web site?</b></a> 

        <p>You may <b>NOT</b> use any original artwork from the
        Apache Software Foundation, nor make or use modified
        versions of such artwork, except under the following
        conditions:</p>

        <ul>
          <li>You may use the <a
          href="../../apache_pb.gif">'Powered by Apache'
          graphic</a> on a Web site that is being served by the
          Apache HTTP server software.</li>

          <li>You may use the aforementioned 'Powered by Apache'
          graphic or the <a
          href="http://www.apache.org/images/asf_logo.gif">
          Apache Software Foundation logo</a> in product
          description and promotional material <b>IF and ONLY
          IF</b> such use can in no way be interpreted as anything
          other than an attribution. Using the Apache name and
          artwork in a manner that implies endorsement of a product
          or service is <b>strictly forbidden</b>.</li>
        </ul>
        <hr />
      </li>
    </ol>
    
    
  </body>
</html>


    








      
      
    

    <h3>B. General Technical Questions</h3>

    <ol>
      <li>
        <a id="what2do" name="what2do"><strong>"Why can't I ...?
        Why won't ... work?" What to do in case of
        problems</strong></a> 

        <p>If you are having trouble with your Apache server
        software, you should take the following steps:</p>

        <ol>
          <li>
            <strong>Check the errorlog!</strong> 

            <p>Apache tries to be helpful when it encounters a
            problem. In many cases, it will provide some details by
            writing one or messages to the server error log.
            Sometimes this is enough for you to diagnose &amp; fix
            the problem yourself (such as file permissions or the
            like). The default location of the error log is
            <samp>/usr/local/apache/logs/error_log</samp>, but see
            the <a
            href="../mod/core.html#errorlog"><samp>ErrorLog</samp></a>
            directive in your config files for the location on your
            server.</p>
          </li>

          <li>
            <strong>Check the <a
            href="http://httpd.apache.org/docs/misc/FAQ.html">FAQ</a>!</strong>
            

            <p>The latest version of the Apache Frequently-Asked
            Questions list can always be found at the main Apache
            web site.</p>
          </li>

          <li>
            <strong>Check the Apache bug database</strong> 

            <p>Most problems that get reported to The Apache Group
            are recorded in the <a
            href="http://bugs.apache.org/">bug database</a>.
            <em><strong>Please</strong> check the existing reports,
            open <strong>and</strong> closed, before adding
            one.</em> If you find that your issue has already been
            reported, please <em>don't</em> add a "me, too" report.
            If the original report isn't closed yet, we suggest
            that you check it periodically. You might also consider
            contacting the original submitter, because there may be
            an email exchange going on about the issue that isn't
            getting recorded in the database.</p>
          </li>

          <li>
            <strong>Ask in a user support group.</strong> 

            <p>A lot of common problems never make it to the bug
            database because there's already high Q&amp;A traffic
            about them in the <a
            href="http://httpd.apache.org/userslist.html">Users
            mailing list</a> or <a
            href="news:comp.infosystems.www.servers.unix"><samp>comp.infosystems.www.servers.unix</samp></a>
            and related newsgroups. These newsgroups are also
            available via <a
            href="http://groups.google.com/groups?group=comp.infosystems.www.servers">
            Google</a>. Many Apache users, and some of the developers,
            can be found roaming their virtual halls, so it is suggested
            that you seek wisdom there. The chances are good that
            you'll get a faster answer there than from the bug
            database, even if you <em>don't</em> see your question
            already posted.</p>
          </li>

          <li>
            <strong>If all else fails, report the problem in the
            bug database</strong> 

            <p>If you've gone through those steps above that are
            appropriate and have obtained no relief, then please
            <em>do</em> let The Apache Group know about the problem
            by <a
            href="http://httpd.apache.org/bug_report.html">logging
            a bug report</a>.</p>

            <p>If your problem involves the server crashing and
            generating a core dump, please include a backtrace (if
            possible). As an example,</p>

            <dl>
              <dd><code># cd <em>ServerRoot</em><br />
               # dbx httpd core<br />
               (dbx) where</code></dd>
            </dl>

            <p>(Substitute the appropriate locations for your
            <samp>ServerRoot</samp> and your <samp>httpd</samp> and
            <samp>core</samp> files. You may have to use
            <code>gdb</code> instead of <code>dbx</code>.)</p>
          </li>
        </ol>
        <hr />
      </li>

      <li>
        <a id="compatible" name="compatible"><strong>How compatible
        is Apache with my existing NCSA 1.3 setup?</strong></a> 

        <p>Apache attempts to offer all the features and
        configuration options of NCSA httpd 1.3, as well as many of
        the additional features found in NCSA httpd 1.4 and NCSA
        httpd 1.5.</p>

        <p>NCSA httpd appears to be moving toward adding
        experimental features which are not generally required at
        the moment. Some of the experiments will succeed while
        others will inevitably be dropped. The Apache philosophy is
        to add what's needed as and when it is needed.</p>

        <p>Friendly interaction between Apache and NCSA developers
        should ensure that fundamental feature enhancements stay
        consistent between the two servers for the foreseeable
        future.</p>
        <hr />
      </li>

      <li>
        <a id="year2000" name="year2000"><strong>Is Apache Year
        2000 compliant?</strong></a> 

        <p>Yes, Apache is Year 2000 compliant.</p>

        <p>Apache internally never stores years as two digits. On
        the HTTP protocol level RFC1123-style addresses are
        generated which is the only format a HTTP/1.1-compliant
        server should generate. To be compatible with older
        applications Apache recognizes ANSI C's
        <code>asctime()</code> and RFC850-/RFC1036-style date
        formats, too. The <code>asctime()</code> format uses
        four-digit years, but the RFC850 and RFC1036 date formats
        only define a two-digit year. If Apache sees such a date
        with a value less than 70 it assumes that the century is
        <samp>20</samp> rather than <samp>19</samp>.</p>

        <p>Although Apache is Year 2000 compliant, you may still
        get problems if the underlying OS has problems with dates
        past year 2000 (<em>e.g.</em>, OS calls which accept or
        return year numbers). Most (UNIX) systems store dates
        internally as signed 32-bit integers which contain the
        number of seconds since 1<sup>st</sup> January 1970, so the
        magic boundary to worry about is the year 2038 and not
        2000. But modern operating systems shouldn't cause any
        trouble at all.</p>

        <p>Users of Apache 1.2.x should upgrade to a current
        version of Apache 1.3 (see <a
        href="../new_features_1_3.html#misc">year-2000 improvements
        in Apache 1.3</a> for details).</p>

        <p>The Apache HTTP Server project is an open-source
        software product of the Apache Software Foundation. The
        project and the Foundation <b>cannot</b> offer legal
        assurances regarding any suitability of the software for
        your application. There are several commercial Apache
        support organizations and derivative server products
        available that may be able to stand behind the software and
        provide you with any assurances you may require. You may
        find links to some of these vendors at <samp>&lt;<a
        href="http://www.apache.org/info/support.cgi">http://www.apache.org/info/support.cgi</a>&gt;</samp>.</p>

        <p>The Apache HTTP server software is distributed with the
        following disclaimer, found in the software license:</p>
<pre>
   THIS SOFTWARE IS PROVIDED BY THE APACHE GROUP ``AS IS'' AND ANY
   EXPRESSED OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
   PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE APACHE GROUP OR
   ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
   SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
   NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
   LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
   HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
   STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
   ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
   OF THE POSSIBILITY OF SUCH DAMAGE.
 
</pre>
        <hr />
      </li>

      <li>
        <a id="submit_patch" name="submit_patch"><strong>How do I
        submit a patch to the Apache Group?</strong></a> 

        <p>The Apache Group encourages patches from outside
        developers. There are 2 main "types" of patches: small
        bugfixes and general improvements. Bugfixes should be
        submitting using the Apache <a
        href="http://httpd.apache.org/bug_report.html">bug report
        page</a>. Improvements, modifications, and additions should
        follow the instructions below.</p>

        <p>In general, the first course of action is to be a member
        of the <samp>dev@@httpd.apache.org</samp> mailing list. This
        indicates to the Group that you are closely following the
        latest Apache developments. Your patch file should be
        generated using either '<code>diff&nbsp;-c</code>' or
        '<code>diff&nbsp;-u</code>' against the latest CVS tree. To
        submit your patch, send email to
        <samp>dev@@httpd.apache.org</samp> with a
        <samp>Subject:</samp> line that starts with
        <samp>[PATCH]</samp> and includes a general description of
        the patch. In the body of the message, the patch should be
        clearly described and then included at the end of the
        message. If the patch-file is long, you can note a URL to
        the file instead of the file itself. Use of MIME
        enclosures/attachments should be avoided.</p>

        <p>Be prepared to respond to any questions about your
        patches and possibly defend your code. If your patch
        results in a lot of discussion, you may be asked to submit
        an updated patch that incorporates all changes and
        suggestions.</p>
        <hr />
      </li>

      <li>
        <a id="domination" name="domination"><strong>Why has Apache
        stolen my favourite site's Internet address?</strong></a> 

        <p>The simple answer is: "It hasn't." This misconception is
        usually caused by the site in question having migrated to
        the Apache Web server software, but not having migrated the
        site's content yet. When Apache is installed, the default
        page that gets installed tells the Webmaster the
        installation was successful. The expectation is that this
        default page will be replaced with the site's real content.
        If it doesn't, complain to the Webmaster, not to the Apache
        project -- we just make the software and aren't responsible
        for what people do (or don't do) with it.</p>
        <hr />
      </li>

      <li>
        <a id="apspam" name="apspam"><strong>Why am I getting spam
        mail from the Apache site?</strong></a> 

        <p>The short answer is: "You aren't." Usually when someone
        thinks the Apache site is originating spam, it's because
        they've traced the spam to a Web site, and the Web site
        says it's using Apache. See the <a
        href="#domination">previous FAQ entry</a> for more details
        on this phenomenon.</p>

        <p>No marketing spam originates from the Apache site. The
        only mail that comes from the site goes only to addresses
        that have been <em>requested</em> to receive the mail.</p>
        <hr />
      </li>

      <li>
        <a id="redist" name="redist"><strong>May I include the
        Apache software on a CD or other package I'm
        distributing?</strong></a> 

        <p>The detailed answer to this question can be found in the
        Apache license, which is included in the Apache
        distribution in the file <code>LICENSE</code>. You can also
        find it on the Web at <samp>&lt;<a
        href="http://www.apache.org/LICENSE.txt">http://www.apache.org/LICENSE.txt</a>&gt;</samp>.</p>
        <hr />
      </li>

      <li>
        <a id="zoom" name="zoom"><strong>What's the best
        hardware/operating system/... How do I get the most out of
        my Apache Web server?</strong></a> 

        <p>Check out Dean Gaudet's <a
        href="perf-tuning.html">performance tuning page</a>.</p>
        <hr />
      </li>

      <li>
        <a id="regex" name="regex"><strong>What are "regular
        expressions"?</strong></a> 

        <p>Regular expressions are a way of describing a pattern -
        for example, "all the words that begin with the letter A"
        or "every 10-digit phone number" or even "Every sentence
        with two commas in it, and no capital letter Q". Regular
        expressions (aka "regex"s) are useful in Apache because
        they let you apply certain attributes against collections
        of files or resources in very flexible ways - for example,
        all .gif and .jpg files under any "images" directory could
        be written as /\/images\/.*(jpg|gif)$/.</p>

        <p>The best overview around is probably the one which comes
        with Perl. We implement a simple subset of Perl's regex
        support, but it's still a good way to learn what they mean.
        You can start by going to the <a
        href="http://www.perl.com/doc/manual/html/pod/perlre.html">CPAN
        page on regular expressions</a>, and branching out from
        there.</p> <hr />
      </li>

      <li>
        <a id="binaries" name="binaries"><b>Why isn't there a
        binary for my platform?</b></a> 

        <p>The developers make sure that the software builds and
        works correctly on the platforms available to them; this
        does <i>not</i> necessarily mean that <i>your</i> platform
        is one of them. In addition, the Apache HTTP server project
        is primarily source oriented, meaning that distributing
        valid and buildable source code is the purpose of a
        release, not making sure that there is a binary package for
        all of the supported platforms.</p>

        <p>If you don't see a kit for your platform listed in the
        binary distribution area (&lt;URL:<a
        href="http://httpd.apache.org/dist/httpd/binaries/">http://httpd.apache.org/dist/httpd/binaries/</a>&gt;),
        it means either that the platform isn't available to any of
        the developers, or that they just haven't gotten around to
        preparing a binary for it. As this is a voluntary project,
        they are under no obligation to do so. Users are encouraged
        and expected to build the software themselves.</p>

        <p>The sole exception to these practices is the Windows
        package. Unlike most Unix and Unix-like platforms, Windows
        systems do not come with a bundled software development
        environment, so we <i>do</i> prepare binary kits for
        Windows when we make a release. Again, however, it's a
        voluntary thing and only a limited number of the developers
        have the capability to build the InstallShield package, so
        the Windows release may lag somewhat behind the source
        release. This lag should be no more than a few days at
        most.</p>
        <hr />
      </li>
    </ol>
    
    
  </body>
</html>


    








      
      
    

    <h3>C. Building Apache</h3>

    <ol>
      <li>
        <a id="bind8.1" name="bind8.1"><strong>Why do I get an
        error about an undefined reference to
        "<samp>__inet_ntoa</samp>" or other <samp>__inet_*</samp>
        symbols?</strong></a> 

        <p>If you have installed <a
        href="http://www.isc.org/bind.html">BIND-8</a> then this is
        normally due to a conflict between your include files and
        your libraries. BIND-8 installs its include files and
        libraries <code>/usr/local/include/</code> and
        <code>/usr/local/lib/</code>, while the resolver that comes
        with your system is probably installed in
        <code>/usr/include/</code> and <code>/usr/lib/</code>. If
        your system uses the header files in
        <code>/usr/local/include/</code> before those in
        <code>/usr/include/</code> but you do not use the new
        resolver library, then the two versions will conflict.</p>

        <p>To resolve this, you can either make sure you use the
        include files and libraries that came with your system or
        make sure to use the new include files and libraries.
        Adding <code>-lbind</code> to the
        <code>EXTRA_LDFLAGS</code> line in your
        <samp>Configuration</samp> file, then re-running
        <samp>Configure</samp>, should resolve the problem. (Apache
        versions 1.2.* and earlier use <code>EXTRA_LFLAGS</code>
        instead.)</p>

        <p><strong>Note:</strong>As of BIND 8.1.1, the bind
        libraries and files are installed under
        <samp>/usr/local/bind</samp> by default, so you should not
        run into this problem. Should you want to use the bind
        resolvers you'll have to add the following to the
        respective lines:</p>

        <dl>
          <dd><code>EXTRA_CFLAGS=-I/usr/local/bind/include<br />
           EXTRA_LDFLAGS=-L/usr/local/bind/lib<br />
           EXTRA_LIBS=-lbind</code></dd>
        </dl>
        <hr />
      </li>

      <li>
        <a id="cantbuild" name="cantbuild"><strong>Why won't Apache
        compile with my system's <samp>cc</samp>?</strong></a> 

        <p>If the server won't compile on your system, it is
        probably due to one of the following causes:</p>

        <ul>
          <li><strong>The <samp>Configure</samp> script doesn't
          recognize your system environment.</strong><br />
           This might be either because it's completely unknown or
          because the specific environment (include files, OS
          version, <em>et cetera</em>) isn't explicitly handled. If
          this happens, you may need to port the server to your OS
          yourself.</li>

          <li><strong>Your system's C compiler is
          garbage.</strong><br />
           Some operating systems include a default C compiler that
          is either not ANSI C-compliant or suffers from other
          deficiencies. The usual recommendation in cases like this
          is to acquire, install, and use <samp>gcc</samp>.</li>

          <li><strong>Your <samp>include</samp> files may be
          confused.</strong><br />
           In some cases, we have found that a compiler
          installation or system upgrade has left the C header
          files in an inconsistent state. Make sure that your
          include directory tree is in sync with the compiler and
          the operating system.</li>

          <li><strong>Your operating system or compiler may be out
          of revision.</strong><br />
           Software vendors (including those that develop operating
          systems) issue new releases for a reason; sometimes to
          add functionality, but more often to fix bugs that have
          been discovered. Try upgrading your compiler and/or your
          operating system.</li>
        </ul>

        <p>The Apache Group tests the ability to build the server
        on many different platforms. Unfortunately, we can't test
        all of the OS platforms there are. If you have verified
        that none of the above issues is the cause of your problem,
        and it hasn't been reported before, please submit a <a
        href="http://httpd.apache.org/bug_report.html">problem
        report</a>. Be sure to include <em>complete</em> details,
        such as the compiler &amp; OS versions and exact error
        messages.</p>
        <hr />
      </li>

      <li>
        <a id="linuxiovec" name="linuxiovec"><strong>Why do I get
        complaints about redefinition of "<code>struct
        iovec</code>" when compiling under Linux?</strong></a> 

        <p>This is a conflict between your C library includes and
        your kernel includes. You need to make sure that the
        versions of both are matched properly. There are two
        workarounds, either one will solve the problem:</p>

        <ul>
          <li>Remove the definition of <code>struct iovec</code>
          from your C library includes. It is located in
          <code>/usr/include/sys/uio.h</code>.
          <strong>Or,</strong></li>

          <li>Add <code>-DNO_WRITEV</code> to the
          <code>EXTRA_CFLAGS</code> line in your
          <samp>Configuration</samp> and reconfigure/rebuild. This
          hurts performance and should only be used as a last
          resort.</li>
        </ul>
        <hr />
      </li>

      <li>
        <a id="broken-gcc" name="broken-gcc"><strong>I'm using gcc
        and I get some compilation errors, what is
        wrong?</strong></a> 

        <p>GCC parses your system header files and produces a
        modified subset which it uses for compiling. This behavior
        ties GCC tightly to the version of your operating system.
        So, for example, if you were running IRIX 5.3 when you
        built GCC and then upgrade to IRIX 6.2 later, you will have
        to rebuild GCC. Similarly for Solaris 2.4, 2.5, or 2.5.1
        when you upgrade to 2.6. Sometimes you can type "gcc -v"
        and it will tell you the version of the operating system it
        was built against.</p>

        <p>If you fail to do this, then it is very likely that
        Apache will fail to build. One of the most common errors is
        with <code>readv</code>, <code>writev</code>, or
        <code>uio.h</code>. This is <strong>not</strong> a bug with
        Apache. You will need to re-install GCC.</p>
        <hr />
      </li>

      <li>
        <a id="glibc-crypt" name="glibc-crypt"><strong>I'm using
        RedHat Linux 5.0, or some other <samp>glibc</samp>-based
        Linux system, and I get errors with the <code>crypt</code>
        function when I attempt to build Apache 1.2.</strong></a> 

        <p><samp>glibc</samp> puts the <code>crypt</code> function
        into a separate library. Edit your
        <code>src/Configuration</code> file and set this:</p>

        <dl>
          <dd><code>EXTRA_LIBS=-lcrypt</code></dd>
        </dl>

        <p>Then re-run <samp>src/Configure</samp> and re-execute
        the make.</p>
        <hr />
      </li>
    </ol>
    
    
  </body>
</html>


    








      
      
    

    <h3>D. Error Log Messages and Problems Starting Apache</h3>

    <ol>
      <li>
        <a id="setgid" name="setgid"><strong>Why do I get
        "<samp>setgid: Invalid argument</samp>" at
        startup?</strong></a> 

        <p>Your <a
        href="../mod/core.html#group"><samp>Group</samp></a>
        directive (probably in <samp>conf/httpd.conf</samp>) needs
        to name a group that actually exists in the
        <samp>/etc/group</samp> file (or your system's equivalent).
        This problem is also frequently seen when a negative number
        is used in the <code>Group</code> directive (<em>e.g.</em>,
        "<code>Group&nbsp;#-1</code>"). Using a group name -- not
        group number -- found in your system's group database
        should solve this problem in all cases.</p>
        <hr />
      </li>

      <li>
        <a id="nodelay" name="nodelay"><strong>Why am I getting
        "<samp>httpd: could not set socket option
        TCP_NODELAY</samp>" in my error log?</strong></a> 

        <p>This message almost always indicates that the client
        disconnected before Apache reached the point of calling
        <code>setsockopt()</code> for the connection. It shouldn't
        occur for more than about 1% of the requests your server
        handles, and it's advisory only in any case.</p>
        <hr />
      </li>

      <li>
        <a id="peerreset" name="peerreset"><strong>Why am I getting
        "<samp>connection reset by peer</samp>" in my error
        log?</strong></a> 

        <p>This is a normal message and nothing about which to be
        alarmed. It simply means that the client canceled the
        connection before it had been completely set up - such as
        by the end-user pressing the "Stop" button. People's
        patience being what it is, sites with response-time
        problems or slow network links may experience this more
        than high capacity ones or those with large pipes to the
        network.</p>
        <hr />
      </li>

      <li>
        <a id="wheres-the-dump" name="wheres-the-dump"><strong>The
        errorlog says Apache dumped core, but where's the dump
        file?</strong></a> 

        <p>In Apache version 1.2, the error log message about
        dumped core includes the directory where the dump file
        should be located. However, many Unixes do not allow a
        process that has called <code>setuid()</code> to dump core
        for security reasons; the typical Apache setup has the
        server started as root to bind to port 80, after which it
        changes UIDs to a non-privileged user to serve
        requests.</p>

        <p>Dealing with this is extremely operating
        system-specific, and may require rebuilding your system
        kernel. Consult your operating system documentation or
        vendor for more information about whether your system does
        this and how to bypass it. If there <em>is</em> a
        documented way of bypassing it, it is recommended that you
        bypass it only for the <samp>httpd</samp> server process if
        possible.</p>

        <p>The canonical location for Apache's core-dump files is
        the <a href="../mod/core.html#serverroot">ServerRoot</a>
        directory. As of Apache version 1.3, the location can be
        set <em>via</em> the <a
        href="../mod/core.html#coredumpdirectory"><samp>CoreDumpDirectory</samp></a>
        directive to a different directory. Make sure that this
        directory is writable by the user the server runs as (as
        opposed to the user the server is <em>started</em> as).</p>
        <hr />
      </li>

      <li>
        <a id="linux-shmget" name="linux-shmget"><strong>When I run
        it under Linux I get "shmget: function not found", what
        should I do?</strong></a> 

        <p>Your kernel has been built without SysV IPC support. You
        will have to rebuild the kernel with that support enabled
        (it's under the "General Setup" submenu). Documentation for
        kernel building is beyond the scope of this FAQ; you should
        consult the <a
        href="http://www.redhat.com/mirrors/LDP/HOWTO/Kernel-HOWTO.html">
        Kernel HOWTO</a>, or the documentation provided with your
        distribution, or a <a
        href="http://www.redhat.com/mirrors/LDP/HOWTO/META-FAQ.html">
        Linux newsgroup/mailing list</a>. As a last-resort
        workaround, you can comment out the
        <code>#define&nbsp;USE_SHMGET_SCOREBOARD</code> definition
        in the <samp>LINUX</samp> section of
        <samp>src/conf.h</samp> and rebuild the server (prior to
        1.3b4, simply removing
        <code>#define&nbsp;HAVE_SHMGET</code> would have sufficed).
        This will produce a server which is slower and less
        reliable.</p>
        <hr />
      </li>

      <li>
        <a id="nfslocking" name="nfslocking"><strong>Server hangs,
        or fails to start, and/or error log fills with
        "<samp>fcntl: F_SETLKW: No record locks available</samp>"
        or similar messages</strong></a> 

        <p>These are symptoms of a fine locking problem, which
        usually means that the server is trying to use a
        synchronization file on an NFS filesystem.</p>

        <p>Because of its parallel-operation model, the Apache Web
        server needs to provide some form of synchronization when
        accessing certain resources. One of these synchronization
        methods involves taking out locks on a file, which means
        that the filesystem whereon the lockfile resides must
        support locking. In many cases this means it <em>can't</em>
        be kept on an NFS-mounted filesystem.</p>

        <p>To cause the Web server to work around the NFS locking
        limitations, include a line such as the following in your
        server configuration files:</p>

        <dl>
          <dd><code>LockFile /var/run/apache-lock</code></dd>
        </dl>

        <p>The directory should not be generally writable
        (<em>e.g.</em>, don't use <samp>/var/tmp</samp>). See the
        <a
        href="../mod/core.html#lockfile"><samp>LockFile</samp></a>
        documentation for more information.</p>
        <hr />
      </li>

      <li>
        <a id="aixccbug" name="aixccbug"><strong>Why am I getting
        "<samp>Expected &lt;/Directory&gt; but saw
        &lt;/Directory&gt;</samp>" when I try to start
        Apache?</strong></a> 

        <p>This is a known problem with certain versions of the AIX
        C compiler. IBM are working on a solution, and the issue is
        being tracked by <a
        href="http://bugs.apache.org/index/full/2312">problem
        report #2312</a>.</p>
        <hr />
      </li>

      <li>
        <a id="redhat" name="redhat"><strong>I'm using RedHat Linux
        and I have problems with httpd dying randomly or not
        restarting properly</strong></a> 

        <p>RedHat Linux versions 4.x (and possibly earlier) RPMs
        contain various nasty scripts which do not stop or restart
        Apache properly. These can affect you even if you're not
        running the RedHat supplied RPMs.</p>

        <p>If you're using the default install then you're probably
        running Apache 1.1.3, which is outdated. From RedHat's ftp
        site you can pick up a more recent RPM for Apache 1.2.x.
        This will solve one of the problems.</p>

        <p>If you're using a custom built Apache rather than the
        RedHat RPMs then you should <code>rpm -e apache</code>. In
        particular you want the mildly broken
        <code>/etc/logrotate.d/apache</code> script to be removed,
        and you want the broken <code>/etc/rc.d/init.d/httpd</code>
        (or <code>httpd.init</code>) script to be removed. The
        latter is actually fixed by the apache-1.2.5 RPMs but if
        you're building your own Apache then you probably don't
        want the RedHat files.</p>

        <p>We can't stress enough how important it is for folks,
        <em>especially vendors</em> to follow the <a
        href="../stopping.html">stopping Apache directions</a>
        given in our documentation. In RedHat's defense, the broken
        scripts were necessary with Apache 1.1.x because the Linux
        support in 1.1.x was very poor, and there were various race
        conditions on all platforms. None of this should be
        necessary with Apache 1.2 and later.</p>
        <hr />
      </li>

      <li>
        <a id="stopping" name="stopping"><strong>I upgraded from an
        Apache version earlier than 1.2.0 and suddenly I have
        problems with Apache dying randomly or not restarting
        properly</strong></a> 

        <p>You should read <a href="#redhat">the previous note</a>
        about problems with RedHat installations. It is entirely
        likely that your installation has start/stop/restart
        scripts which were built for an earlier version of Apache.
        Versions earlier than 1.2.0 had various race conditions
        that made it necessary to use <code>kill -9</code> at times
        to take out all the httpd servers. But that should not be
        necessary any longer. You should follow the <a
        href="../stopping.html">directions on how to stop and
        restart Apache</a>.</p>

        <p>As of Apache 1.3 there is a script
        <code>src/support/apachectl</code> which, after a bit of
        customization, is suitable for starting, stopping, and
        restarting your server.</p>
        <hr />
      </li>

      <li>
        <a id="setservername" name="setservername"><b>When I try to
        start Apache from a DOS window, I get a message like
        "<samp>Cannot determine host name. Use ServerName directive
        to set it manually.</samp>" What does this mean?</b></a> 

        <p>It means what it says; the Apache software can't
        determine the hostname of your system. Edit your
        <samp>conf\httpd.conf</samp> file, look for the string
        "ServerName", and make sure there's an uncommented
        directive such as</p>

        <dl>
          <dd><code>ServerName localhost</code></dd>
        </dl>

        <p>or</p>

        <dl>
          <dd><code>ServerName www.foo.com</code></dd>
        </dl>

        <p>in the file. Correct it if there one there with wrong
        information, or add one if you don't already have one.</p>

        <p>Also, make sure that your Windows system has DNS
        enabled. See the TCP/IP setup component of the Networking
        or Internet Options control panel.</p>

        <p>After verifying that DNS is enabled and that you have a
        valid hostname in your <samp>ServerName</samp> directive,
        try to start the server again.</p>
        <hr />
      </li>

      <li>
        <a id="ws2_32dll" name="ws2_32dll"><b>When I try to start
        Apache for Windows, I get a message like "<samp>Unable To
        Locate WS2_32.DLL...</samp>". What should I do?</b></a> 

        <p>Short answer: You need to install Winsock 2, available
        from <a
        href="http://www.microsoft.com/windows95/downloads/">http://www.microsoft.com/windows95/downloads/</a></p>

        <p>Detailed answer: Prior to version 1.3.9, Apache for
        Windows used Winsock 1.1. Beginning with version 1.3.9,
        Apache began using Winsock 2 features (specifically,
        WSADuplicateSocket()). WS2_32.DLL implements the Winsock 2
        API. Winsock 2 ships with Windows NT 4.0 and Windows 98.
        Some of the earlier releases of Windows 95 did not include
        Winsock 2.</p>
        <hr />
      </li>

      <li>
        <a id="WSADuplicateSocket"
        name="WSADuplicateSocket"><b>Apache for Windows does not
        start. Error log contains this message: "<samp>[crit]
        (10045) The attempted operation is not supported for the
        type of object referenced: Parent: WSADuplicateSocket
        failed for socket ###</samp>". What does this mean?</b></a>
        

        <p>We have seen this problem when Apache is run on systems
        along with Virtual Private Networking clients like Aventail
        Connect. Aventail Connect is a Layered Service Provider
        (LSP) that inserts itself, as a "shim," between the Winsock
        2 API and Window's native Winsock 2 implementation. The
        Aventail Connect shim does not implement
        WSADuplicateSocket, which is the cause of the failure.</p>

        <p>The shim is not unloaded when Aventail Connect is shut
        down. Once observed, the problem persists until the shim is
        either explicitly unloaded or the machine is rebooted.
        Another potential solution (not tested) is to add
        <code>apache.exe</code> to the Aventail "Connect Exclusion
        List".</p>

        <p>Apache is affected in a similar way by <em>any</em>
        firewall program that isn't correctly configured. Assure
        you exclude your Apache server ports (usually port 80) from
        the list of ports to block. Refer to your firewall
        program's documentation for the how-to.</p>
        <hr />
      </li>

      <li>
        <a id="err1067" name="err1067"><b>When I try to start
        Apache on Windows, I get a message like "<code>System error
        1067 has occurred. The process terminated
        unexpectedly</code>." What does this mean?</b></a> 

        <p>This message means that the Web server was unable to
        start correctly for one reason or another. To find out why,
        execute the following commands in a DOS window:</p>
<pre>
    c:
    cd "\Program Files\Apache Group\Apache"
    apache
 
</pre>

        <p>(If you don't get the prompt back, hit Control-C to
        cause Apache to exit.)</p>

        <p>The error you see will probably be one of those
        preceding this question in the FAQ.</p>

        <p>As of Apache 1.3.14, first check the Windows NT Event
        Log for Application errors using the Windows NT/2000 Event
        Viewer program. Any errors that occur prior to opening the
        Apache error log will be stored here, if Apache is run as a
        Service on NT or 2000. As with any error, also check your
        Apache error log.</p>
        <hr />
      </li>

      <li><a id="suseFDN" name="suseFDN"><b>On a SuSE Linux system, I try and 
          configure access control using basic authentication.
	  Although I follow the example exactly, authentication
	  fails, and an error message "<code>admin: not a valid
	  FDN: ....</code>" is logged.</b></a>

          <p>
	  In the SuSE distribution, additional 3rd party authentication
	  modules have been added and activated by default. These modules
	  interfere with the Apache standard modules and cause Basic
	  authentication to fail. Our recommendation is to comment all
	  those modules in <code>/etc/httpd/suse_addmodule.conf</code>
	  and <code>/etc/httpd/suse_loadmodule.conf</code> which are not
	  actually required for running your server.
          </p><hr />
      </li>

     <li><a id="codered" name="codered"><b>Why do I have weird entries in my
          logs asking for <code>default.ida</code> and
          <code>cmd.exe</code>?</b></a>
      
          <p>The host requesting pages from your website and creating
          those entries is a Windows machine running IIS that has been
          infected by an Internet worm such as Nimda or Code Red. You
          can safely ignore these error messages as they do not affect
          Apache.  ApacheWeek has an <a
          href="http://www.apacheweek.com/features/codered">article</a>
          with more information.</p><hr />
     </li>

    <li><a id="restart" name="restart"><b>Why am I getting server restart
    messages periodically, when I did not restart the server?</b></a>

          <p>Problem: You are noticing restart messages in your error log,
          periodically, when you know you did not restart the server
          yourself:</p>

<pre>
[Thu Jun  6 04:02:01 2002] [notice] SIGHUP received.  Attempting to restart
[Thu Jun  6 04:02:02 2002] [notice] Apache configured -- resuming normal operations
</pre>

          <p>Check your cron jobs to see when/if your server logs are being
          rotated. Compare the time of rotation to the error message time.
          If they are the same, you can somewhat safely assume that the 
          restart is due to your server logs being rotated.</p><hr />
     </li>

     <li><a id="modulemagic" name="modulemagic"><b>Why am I getting
          &quot;module <em>module-name</em> is not compatible with this version
          of Apache&quot; messages in my error log?</b></a>
      
          <p>Module Magic Number (MMN) is a constant defined in Apache
          source that is associated with binary compatibility of
          modules. It is changed when internal Apache structures,
          function calls and other significant parts of API change in
          such a way that binary compatibility cannot be guaranteed any
          more. On MMN change, all third party modules have to be at
          least recompiled, sometimes even slightly changed in order
          to work with the new version of Apache.</p>

          <p>If you're getting the above error messages, contact the
          vendor of the module for the new binary, or compile it if
          you have access to the source code.</p><hr />
     </li>

    </ol>
    
    
  </body>
</html>


    








      
      
    

    <h3>E. Configuration Questions</h3>

    <ol>
      <li>
        <a id="fdlim" name="fdlim"><strong>Why can't I run more
        than &lt;<em>n</em>&gt; virtual hosts?</strong></a> 

        <p>You are probably running into resource limitations in
        your operating system. The most common limitation is the
        <em>per</em>-process limit on <strong>file
        descriptors</strong>, which is almost always the cause of
        problems seen when adding virtual hosts. Apache often does
        not give an intuitive error message because it is normally
        some library routine (such as <code>gethostbyname()</code>)
        which needs file descriptors and doesn't complain
        intelligibly when it can't get them.</p>

        <p>Each log file requires a file descriptor, which means
        that if you are using separate access and error logs for
        each virtual host, each virtual host needs two file
        descriptors. Each <a
        href="../mod/core.html#listen"><samp>Listen</samp></a>
        directive also needs a file descriptor.</p>

        <p>Typical values for &lt;<em>n</em>&gt; that we've seen
        are in the neighborhood of 128 or 250. When the server
        bumps into the file descriptor limit, it may dump core with
        a SIGSEGV, it might just hang, or it may limp along and
        you'll see (possibly meaningful) errors in the error log.
        One common problem that occurs when you run into a file
        descriptor limit is that CGI scripts stop being executed
        properly.</p>

        <p>As to what you can do about this:</p>

        <ol>
          <li>Reduce the number of <a
          href="../mod/core.html#listen"><samp>Listen</samp></a>
          directives. If there are no other servers running on the
          machine on the same port then you normally don't need any
          Listen directives at all. By default Apache listens to
          all addresses on port 80.</li>

          <li>Reduce the number of log files. You can use <a
          href="../mod/mod_log_config.html"><samp>mod_log_config</samp></a>
          to log all requests to a single log file while including
          the name of the virtual host in the log file. You can
          then write a script to split the logfile into separate
          files later if necessary. Such a script is provided with
          the Apache 1.3 distribution in the
          <samp>src/support/split-logfile</samp> file.</li>

          <li>
            Increase the number of file descriptors available to
            the server (see your system's documentation on the
            <code>limit</code> or <code>ulimit</code> commands).
            For some systems, information on how to do this is
            available in the <a href="perf.html">performance
            hints</a> page. There is a specific note for <a
            href="#freebsd-setsize">FreeBSD</a> below. 

            <p>For Windows 95, try modifying your
            <samp>C:\CONFIG.SYS</samp> file to include a line
            like</p>

            <dl>
              <dd><code>FILES=300</code></dd>
            </dl>

            <p>Remember that you'll need to reboot your Windows 95
            system in order for the new value to take effect.</p>
          </li>

          <li>"Don't do that" - try to run with fewer virtual
          hosts</li>

          <li>Spread your operation across multiple server
          processes (using <a
          href="../mod/core.html#listen"><samp>Listen</samp></a>
          for example, but see the first point) and/or ports.</li>
        </ol>

        <p>Since this is an operating-system limitation, there's
        not much else available in the way of solutions.</p>

        <p>As of 1.2.1 we have made attempts to work around various
        limitations involving running with many descriptors. <a
        href="descriptors.html">More information is
        available.</a></p>
        <hr />
      </li>

      <li>
        <a id="freebsd-setsize" name="freebsd-setsize"><strong>Can
        I increase <samp>FD_SETSIZE</samp> on FreeBSD?</strong></a>
        

        <p>On versions of FreeBSD before 3.0, the
        <samp>FD_SETSIZE</samp> define defaults to 256. This means
        that you will have trouble usefully using more than 256
        file descriptors in Apache. This can be increased, but
        doing so can be tricky.</p>

        <p>If you are using a version prior to 2.2, you need to
        recompile your kernel with a larger
        <samp>FD_SETSIZE</samp>. This can be done by adding a line
        such as:</p>

        <dl>
          <dd><code>options FD_SETSIZE <em>nnn</em></code></dd>
        </dl>

        <p>to your kernel config file. Starting at version 2.2,
        this is no longer necessary.</p>

        <p>If you are using a version of 2.1-stable from after
        1997/03/10 or 2.2 or 3.0-current from before 1997/06/28,
        there is a limit in the resolver library that prevents it
        from using more file descriptors than what
        <samp>FD_SETSIZE</samp> is set to when libc is compiled. To
        increase this, you have to recompile libc with a higher
        <samp>FD_SETSIZE</samp>.</p>

        <p>In FreeBSD 3.0, the default <samp>FD_SETSIZE</samp> has
        been increased to 1024 and the above limitation in the
        resolver library has been removed.</p>

        <p>After you deal with the appropriate changes above, you
        can increase the setting of <samp>FD_SETSIZE</samp> at
        Apache compilation time by adding
        "<samp>-DFD_SETSIZE=<em>nnn</em></samp>" to the
        <samp>EXTRA_CFLAGS</samp> line in your
        <samp>Configuration</samp> file.</p>
        <hr />
      </li>

      <li>
        <a id="errordoc401" name="errordoc401"><strong>Why doesn't
        my <code>ErrorDocument 401</code> work?</strong></a> 

        <p>You need to use it with a URL in the form
        "<samp>/foo/bar</samp>" and not one with a method and
        hostname such as "<samp>http://host/foo/bar</samp>". See
        the <a
        href="../mod/core.html#errordocument"><samp>ErrorDocument</samp></a>
        documentation for details. This was incorrectly documented
        in the past.</p>
        <hr />
      </li>

      <li>
        <a id="cookies1" name="cookies1"><strong>Why does Apache
        send a cookie on every response?</strong></a> 

        <p>Apache does <em>not</em> automatically send a cookie on
        every response, unless you have re-compiled it with the <a
        href="../mod/mod_usertrack.html"><samp>mod_usertrack</samp></a>
        module, and specifically enabled it with the <a
        href="../mod/mod_usertrack.html#cookietracking"><samp>CookieTracking</samp></a>
        directive. This module has been in Apache since version
        1.2. This module may help track users, and uses cookies to
        do this. If you are not using the data generated by
        <samp>mod_usertrack</samp>, do not compile it into
        Apache.</p>
        <hr />
      </li>

      <li>
        <a id="cookies2" name="cookies2"><strong>Why don't my
        cookies work, I even compiled in
        <samp>mod_cookies</samp>?</strong></a> 

        <p>Firstly, you do <em>not</em> need to compile in
        <samp>mod_cookies</samp> in order for your scripts to work
        (see the <a href="#cookies1">previous question</a> for more
        about <samp>mod_cookies</samp>). Apache passes on your
        <samp>Set-Cookie</samp> header fine, with or without this
        module. If cookies do not work it will be because your
        script does not work properly or your browser does not use
        cookies or is not set-up to accept them.</p>
        <hr />
      </li>

      <li>
        <a id="jdk1-and-http1.1"
        name="jdk1-and-http1.1"><strong>Why do my Java app[let]s
        give me plain text when I request an URL from an Apache
        server?</strong></a> 

        <p>As of version 1.2, Apache is an HTTP/1.1 (HyperText
        Transfer Protocol version 1.1) server. This fact is
        reflected in the protocol version that's included in the
        response headers sent to a client when processing a
        request. Unfortunately, low-level Web access classes
        included in the Java Development Kit (JDK) version 1.0.2
        expect to see the version string "HTTP/1.0" and do not
        correctly interpret the "HTTP/1.1" value Apache is sending
        (this part of the response is a declaration of what the
        server can do rather than a declaration of the dialect of
        the response). The result is that the JDK methods do not
        correctly parse the headers, and include them with the
        document content by mistake.</p>

        <p>This is definitely a bug in the JDK 1.0.2 foundation
        classes from Sun, and it has been fixed in version 1.1.
        However, the classes in question are part of the virtual
        machine environment, which means they're part of the Web
        browser (if Java-enabled) or the Java environment on the
        client system - so even if you develop <em>your</em>
        classes with a recent JDK, the eventual users might
        encounter the problem. The classes involved are replaceable
        by vendors implementing the Java virtual machine
        environment, and so even those that are based upon the
        1.0.2 version may not have this problem.</p>

        <p>In the meantime, a workaround is to tell Apache to
        "fake" an HTTP/1.0 response to requests that come from the
        JDK methods; this can be done by including a line such as
        the following in your server configuration files:</p>

        <dl>
          <dd><code>BrowserMatch Java1.0 force-response-1.0<br />
           BrowserMatch JDK/1.0 force-response-1.0</code></dd>
        </dl>

        <p>More information about this issue can be found in the <a
        href="http://httpd.apache.org/info/jdk-102.html"><cite>Java
        and HTTP/1.1</cite></a> page at the Apache web site.</p>
        <hr />
      </li>

      <li>
        <a id="midi" name="midi"><strong>How do I get Apache to
        send a MIDI file so the browser can play it?</strong></a> 

        <p>Even though the registered MIME type for MIDI files is
        <samp>audio/midi</samp>, some browsers are not set up to
        recognize it as such; instead, they look for
        <samp>audio/x-midi</samp>. There are two things you can do
        to address this:</p>

        <ol>
          <li>Configure your browser to treat documents of type
          <samp>audio/midi</samp> correctly. This is the type that
          Apache sends by default. This may not be workable,
          however, if you have many client installations to change,
          or if some or many of the clients are not under your
          control.</li>

          <li>
            Instruct Apache to send a different
            <samp>Content-type</samp> header for these files by
            adding the following line to your server's
            configuration files: 

            <dl>
              <dd><code>AddType audio/x-midi .mid .midi
              .kar</code></dd>
            </dl>

            <p>Note that this may break browsers that <em>do</em>
            recognize the <samp>audio/midi</samp> MIME type unless
            they're prepared to also handle
            <samp>audio/x-midi</samp> the same way.</p>
          </li>
        </ol>
        <hr />
      </li>

      <li>
        <a id="addlog" name="addlog"><strong>How do I add browsers
        and referrers to my logs?</strong></a> 

        <p>Apache provides a couple of different ways of doing
        this. The recommended method is to compile the <a
        href="../mod/mod_log_config.html"><samp>mod_log_config</samp></a>
        module into your configuration and use the <a
        href="../mod/mod_log_config.html#customlog"><samp>CustomLog</samp></a>
        directive.</p>

        <p>You can either log the additional information in files
        other than your normal transfer log, or you can add them to
        the records already being written. For example:</p>

        <p>
        <code>CustomLog&nbsp;logs/access_log&nbsp;"%h&nbsp;%l&nbsp;%u&nbsp;%t&nbsp;\"%r\"&nbsp;%s&nbsp;%b&nbsp;\"%{Referer}i\"&nbsp;\"%{User-Agent}i\""</code></p>

        <p>This will add the values of the <samp>User-agent:</samp>
        and <samp>Referer:</samp> headers, which indicate the
        client and the referring page, respectively, to the end of
        each line in the access log.</p>

        <p>You may want to check out the <cite>Apache Week</cite>
        article entitled: "<a
        href="http://www.apacheweek.com/features/logfiles"
        rel="Help"><cite>Gathering Visitor Information: Customizing
        Your Logfiles</cite></a>".</p>
        <hr />
      </li>

      <li>
        <a id="set-servername" name="set-servername"><strong>Why
        does accessing directories only work when I include the
        trailing "/"
        (<em>e.g.</em>,&nbsp;<samp>http://foo.domain.com/~user/</samp>)
        but not when I omit it
        (<em>e.g.</em>,&nbsp;<samp>http://foo.domain.com/~user</samp>)?</strong></a>
        

        <p>When you access a directory without a trailing "/",
        Apache needs to send what is called a redirect to the
        client to tell it to add the trailing slash. If it did not
        do so, relative URLs would not work properly. When it sends
        the redirect, it needs to know the name of the server so
        that it can include it in the redirect. There are two ways
        for Apache to find this out; either it can guess, or you
        can tell it. If your DNS is configured correctly, it can
        normally guess without any problems. If it is not, however,
        then you need to tell it.</p>

        <p>Add a <a
        href="../mod/core.html#servername">ServerName</a> directive
        to the config file to tell it what the domain name of the
        server is.</p>

        <p>The other thing that can occasionally cause this symptom is a
        misunderstanding of the <a
        href="../mod/mod_alias.html#alias">Alias</a> directive,
        resulting in an alias working with a trailing slash, and not 
        without one. The <code>Alias</code> directive is very literal,
        and aliases what you tell it to. Consider the following
        example:</p>

        <pre>
        Alias /example/ /home/www/example/
        </pre>

        <p>The above directive creates an alias for URLs starting with
        <code>/example/</code>, but does <em>not</em> alias URLs
        starting with <code>/example</code>. That is to say, a URL such
        as <code>http://servername.com/example/</code> will get the
        desired content, but a URL such as
        <code>http://servername.com/example</code> will result in a
        "file not found" error.</p>

        <p>The following <code>Alias</code>, on the other hand, will
        work for both cases:</p>

        <pre>
        Alias /example /home/www/example
        </pre>

        <hr />
      </li>

      <li>
        <a id="no-info-directives"
        name="no-info-directives"><strong>Why doesn't mod_info list
        any directives?</strong></a> 

        <p>The <a
        href="../mod/mod_info.html"><samp>mod_info</samp></a>
        module allows you to use a Web browser to see how your
        server is configured. Among the information it displays is
        the list modules and their configuration directives. The
        "current" values for the directives are not necessarily
        those of the running server; they are extracted from the
        configuration files themselves at the time of the request.
        If the files have been changed since the server was last
        reloaded, the display will not match the values actively in
        use. If the files and the path to the files are not
        readable by the user as which the server is running (see
        the <a href="../mod/core.html#user"><samp>User</samp></a>
        directive), then <samp>mod_info</samp> cannot read them in
        order to list their values. An entry <em>will</em> be made
        in the error log in this event, however.</p>
        <hr />
      </li>

      <li>
        <a id="namevhost" name="namevhost"><strong>I upgraded to
        Apache 1.3 and now my virtual hosts don't
        work!</strong></a> 

        <p>In versions of Apache prior to 1.3b2, there was a lot of
        confusion regarding address-based virtual hosts and
        (HTTP/1.1) name-based virtual hosts, and the rules
        concerning how the server processed
        <samp>&lt;VirtualHost&gt;</samp> definitions were very
        complex and not well documented.</p>

        <p>Apache 1.3b2 introduced a new directive, <a
        href="../mod/core.html#namevirtualhost"><samp>NameVirtualHost</samp></a>,
        which simplifies the rules quite a bit. However, changing
        the rules like this means that your existing name-based
        <samp>&lt;VirtualHost&gt;</samp> containers probably won't
        work correctly immediately following the upgrade.</p>

        <p>To correct this problem, add the following line to the
        beginning of your server configuration file, before
        defining any virtual hosts:</p>

        <dl>
          <dd><code>NameVirtualHost <em>n.n.n.n</em></code></dd>
        </dl>

        <p>Replace the "<samp>n.n.n.n</samp>" with the IP address
        to which the name-based virtual host names resolve; if you
        have multiple name-based hosts on multiple addresses,
        repeat the directive for each address.</p>

        <p>Make sure that your name-based
        <samp>&lt;VirtualHost&gt;</samp> blocks contain
        <samp>ServerName</samp> and possibly
        <samp>ServerAlias</samp> directives so Apache can be sure
        to tell them apart correctly.</p>

        <p>Please see the <a href="../vhosts/">Apache Virtual Host
        documentation</a> for further details about
        configuration.</p>
        <hr />
      </li>

      <li>
        <a id="redhat-htm" name="redhat-htm"><strong>I'm using
        RedHat Linux and my .htm files are showing up as HTML
        source rather than being formatted!</strong></a> 

        <p>RedHat messed up and forgot to put a content type for
        <code>.htm</code> files into <code>/etc/mime.types</code>.
        Edit <code>/etc/mime.types</code>, find the line containing
        <code>html</code> and add <code>htm</code> to it. Then
        restart your httpd server:</p>

        <dl>
          <dd><code>kill -HUP `cat /var/run/httpd.pid`</code></dd>
        </dl>

        <p>Then <strong>clear your browsers' caches</strong>. (Many
        browsers won't re-examine the content type after they've
        reloaded a page.)</p>
        <hr />
      </li>

      <li>
        <a id="htaccess-work" name="htaccess-work"><strong>My
        <code>.htaccess</code> files are being
        ignored.</strong></a> 

        <p>This is almost always due to your <a
        href="../mod/core.html#allowoverride">AllowOverride</a>
        directive being set incorrectly for the directory in
        question. If it is set to <code>None</code> then .htaccess
        files will not even be looked for. If you do have one that
        is set, then be certain it covers the directory you are
        trying to use the .htaccess file in. This is normally
        accomplished by ensuring it is inside the proper <a
        href="../mod/core.html#directory">Directory</a>
        container.</p>
        <hr />
      </li>

      <li>
        <a id="forbidden" name="forbidden"><strong>Why do I get a
        "<samp>Forbidden</samp>" message whenever I try to access a
        particular directory?</strong></a> 

        <p>This message is generally caused because either</p>

        <ul>
          <li>The underlying file system permissions do not allow
          the User/Group under which Apache is running to access
          the necessary files; or</li>

          <li>The Apache configuration has some access restrictions
          in place which forbid access to the files.</li>
        </ul>

        <p>You can determine which case applies to your situation
        by checking the error log.</p>

        <p>In the case where file system permission are at fault,
        remember that not only must the directory and files in
        question be readable, but also all parent directories must
        be at least searchable by the web server in order for the
        content to be accessible.</p>
        <hr />
      </li>

      <li>
        <a id="malfiles" name="malfiles"><b>Why do I get a
        "<samp>Forbidden/You don't have permission to access / on
        this server</samp>" message whenever I try to access my
        server?</b></a> 

        <p>Search your <code>conf/httpd.conf</code> file for this
        exact string: <code>&lt;Files ~&gt;</code>. If you find it,
        that's your problem -- that particular &lt;Files&gt;
        container is malformed. Delete it or replace it with
        <code>&lt;Files ~ "^\.ht"&gt;</code> and restart your
        server and things should work as expected.</p>

        <p>This error appears to be caused by a problem with the
        version of linuxconf distributed with Redhat 6.x. It may
        reappear if you use linuxconf again.</p>

        <p>If you don't find this string, check out the <a
        href="#forbidden">previous question</a>.</p>
        <hr />
      </li>

      <li>
        <a id="ie-ignores-mime" name="ie-ignores-mime"><strong>Why
        do my files appear correctly in Internet Explorer, but show
        up as source or trigger a save window with
        Netscape; or, Why doesn't Internet Explorer render
        my text/plain document correctly?</strong></a> 

        <p>MS Internet Explorer (MSIE) and Netscape handle mime type
        detection in different ways, and therefore will display the
        document differently. In particular, IE sometimes relies on
        the file extension or the contents of the file to determine
        the mime type. This can happen when the server specifies a
        mime type of <code>application/octet-stream</code> or
        <code>text/plain</code>.  This behavior violates the the HTTP
        standard and makes it impossible to deliver plain text
        documents to MSIE clients in some cases.  More details are
        available on MSIE's mime type detection behavior in an <a
        href="http://msdn.microsoft.com/workshop/networking/moniker/overview/appendix_a.asp">
        MSDN article</a> and a <a
        href="http://ppewww.ph.gla.ac.uk/~flavell/www/content-type.html">note</a>
        by Alan J. Flavell.</p>

        <p>The best you can do as a server administrator is to
        accurately configure the mime type of your documents by editing
        the <code>mime.types</code> file or using an <a
        href="../mod/mod_mime.html#addtype"><code>AddType</code></a>
        directive in the Apache configuration files.  In some cases,
        you may be able to fool MSIE into rendering text/plain documents
        correctly by assuring they have a <code>.txt</code> filename
        extension, but this will not work if MSIE thinks the content
        looks like another file type.
</p> <hr />
      </li>
      <li>
	<a name="canonical-hostnames"><strong>My site is accessible
        under many different hostnames; how do I redirect clients
        so that they see only a single name?</strong></a>

        <p>Many sites map a variety of hostnames to the same content.
        For example, <code>www.example.com</code>,
        <code>example.com</code> and <code>www.example.net</code> may
        all refer to the same site.  It is best to make sure that,
        regardless of the name clients use to access the site, they
        will be redirected to a single, canonical hostname.  This
        makes the site easier to maintain and assures that there will
        be only one version of the site in proxy caches and search
        engines.</p>

        <p>There are two techniques to implement canonical hostnames:</p>

        <ol>
          <li>Use <a href="../mod/mod_rewrite.html">mod_rewrite</a>
          as described in the "Canonical Hostnames" section of the
          <a href="rewriteguide.html">URL Rewriting Guide</a>.</li>

          <li>Use <a href="../vhosts/name-based.html">name-based
          virtual hosting</a>:

<blockquote><code>
NameVirtualHost *<br />
<br />
&lt;VirtualHost *&gt;<br />
&nbsp;&nbsp;ServerName www.example.net<br />
&nbsp;&nbsp;ServerAlias example.com<br />
&nbsp;&nbsp;Redirect permanent / http://www.example.com/<br />
&lt;/VirtualHost&gt;<br />
<br />
&lt;VirtualHost *&gt;<br />
&nbsp;&nbsp;ServerName www.example.com<br />
&nbsp;&nbsp;DocumentRoot /usr/local/apache/htdocs<br />
&lt;/VirtualHost&gt;
</code></blockquote>
          </li></ol>
        <hr /></li>

         <li><a id="firewall" name="firewall"><strong>Why can I access my
         website from the server or from my local network, but I
         can't access it from elsewhere on the Internet?</strong></a>

         <p>There are many possible reasons for this, and almost all
         of them are related to the configuration of your network, not
         the configuration of the Apache HTTP Server.  One of the most
         common problems is that a firewall blocks access to the
         default HTTP port 80.  In particular, many consumer ISPs
         block access to this port.  You can see if this is the case
         by changing any <code>Port</code> and <code>Listen</code>
         directives in <code>httpd.conf</code> to use port 8000 and
         then request your site using
         <code>http://yourhost.example.com:8000/</code>.  (Of course,
         a very restrictive firewall may block this port as well.)</p>

        <hr /></li>

         <li><a id="indexes" name="indexes"><strong>How do I turn automatic
         directory listings on or off?</strong></a>

         <p>If a client requests a URL that designates a directory and
         the directory does not contain a filename that matches the <a
         href="../mod/mod_dir.html#directoryindex">DirectoryIndex</a>
         directive, then <a
         href="../mod/mod_autoindex.html">mod_autoindex</a> can be
         configured to present a listing of the directory contents.</p>

         <p>To turn on automatic directory indexing, find the 
         <a href="../mod/core.html#options">Options</a> directive that
         applies to the directory and add the <code>Indexes</code>
         keyword. For example:</p>

         <blockquote><code>
         &lt;Directory /path/to/directory&gt;<br />
         &nbsp;&nbsp;&nbsp;Options +Indexes<br />
         &lt;/Directory&gt;
         </code></blockquote>
         
         <p>To turn off automatic directory indexing, remove
         the <code>Indexes</code> keyword from the appropriate 
         <code>Options</code> line. To turn off directory listing
         for a particular subdirectory, you can use 
         <code>Options -Indexes</code>. For example:</p>

         <blockquote><code>
         &lt;Directory /path/to/directory&gt;<br />
         &nbsp;&nbsp;&nbsp;Options -Indexes<br />
         &lt;/Directory&gt;
         </code></blockquote>

       <hr /></li>

         <li><a id="options" name="options"><strong>Why do my Options
         directives not have the desired effect?</strong></a>

         <p>Directives placed in the configuration files are applied
         in a very particular order, as described by <a
         href="../sections.html">How Directory, Location, and Files
         sections work</a>.  In addition, each <a
         href="../mod/core.html#options">Options</a> directive has the
         effect of resetting the options to <code>none</code> before
         adding the specified options (unless only "+" and "-" options
         are used).  The consequence is that <code>Options</code> set
         in the main server or virtual host context (outside any
         directory, location, or files section) will usually have no
         effect, because they are overridden by more specific
         <code>Options</code> directives.  For example, in the following</p>

<blockquote><code>
&lt;Directory /usr/local/apache/htdocs&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;Options Indexes<br />
&lt;/Directory&gt;<br />
Options Includes ExecCGI<br />
</code></blockquote>
    
         <p><code>Includes</code> and <code>ExecCGI</code> will be 
         <strong>off</strong> in the <code>/usr/local/apache/htdocs</code>
         directory.</p>

         <p>You can usually avoid problems by either finding the 
         <code>Options</code> directive that already applies to a 
         specific directory and changing it, or by putting your
         <code>Options</code> directive inside the most specific possible
         <code>&lt;Directory&gt;</code> section.</p>

       <hr /></li>


       <li><a id="serverheader" name="serverheader"><strong>How can I change
       the information that Apache returns about itself in the
       headers?</strong></a>

    <p>When a client connects to Apache, part of the information returned in
    the headers is the name "Apache" Additional information that can be sent
    is the version number, such as "1.3.26", the operating system, and a
    list of non-standard modules you have installed.</p>

    <p>For example:</p>

<blockquote><code>
Server: Apache/1.3.26 (Unix) mod_perl/1.26
</code></blockquote>

    <p>Frequently, people want to remove this information, under the mistaken
    understanding that this will make the system more secure. This is
    probably not the case, as the same exploits will likely be attempted
    regardless of the header information you provide.</p>

    <p>There are, however, two answers to this question: the correct answer,
    and the answer that you are probably looking for.</p>

    <p>The correct answer to this question is that you should use the
    ServerTokens directive to alter the quantity of information which is
    passed in the headers. Setting this directive to <code>Prod</code> will
    pass the least possible amount of information:</p>

<blockquote><code>
Server: Apache
</code></blockquote>

    <p>The answer you are probably looking for is how to make Apache lie 
    about what what it is, ie send something like:</p>

<blockquote><code>
Server: Bob's Happy HTTPd Server
</code></blockquote>

    <p>In order to do this, you will need to modify the Apache source code and
    rebuild Apache. This is not advised, as it is almost certain not to
    provide you with the added security you think that you are gaining. The
    exact method of doing this is left as an exercise for the reader, as we
    are not keen on helping you do something that is intrinsically a bad
    idea.</p>

    <hr /></li>

         <li><a id="proxyscan" name="proxyscan"><strong>Why do I see requests
         for other sites appearing in my log files?</strong></a>

         <p>A an access_log entry showing this situation could look
         like this:</p> 

         <blockquote><code> 63.251.56.142 - -
         [25/Jul/2002:12:48:04 -0700] "GET http://www.yahoo.com/
         HTTP/1.0" 200 1456 </code></blockquote>

         <p>The question is: why did a request for
         <code>www.yahoo.com</code> come to your server instead of
         Yahoo's server?  And why does the response have a status 
         code of 200 (success)?</p>

         <p>This is usually the result of malicious clients trying to
         exploit open proxy servers to access a website without
         revealing their true location.  If you find entries like this
         in your log, the first thing to do is to make sure you have
         properly configured your server not to proxy for unknown
         clients.  If you don't need to provide a proxy server at all,
         you should simply assure that the <a
         href="../mod/mod_proxy.html#proxyrequests">ProxyRequests</a>
         directive is <strong>not</strong> set <code>on</code>.
         If you do need to run a proxy server, then you must ensure
         that you <a href="../mod/mod_proxy.html#access">secure your
         server properly</a> so that only authorized clients can use
         it.</p>

         <p>If your server is configured properly, then the attempt to
         proxy through your server will fail.  If you see a status
         code of <code>404</code> (file not found) in the log, then
         you know that the request failed.  If you see a status code
         of <code>200</code> (success), that does not necessarily mean
         that the attempt to proxy succeeded.  RFC2616 section 5.1.2
         mandates that Apache must accept requests with absolute URLs
         in the request-URI, even for non-proxy requests.  Since
         Apache has no way to know all the different names that your
         server may be known under, it cannot simply reject hostnames
         it does not recognize.  Instead, it will serve requests for
         unknown sites locally by stripping off the hostname and using
         the default server or virtual host.  Therefore you can
         compare the size of the file (1456 in the above example) to
         the size of the corresponding file in your default server.
         If they are the same, then the proxy attempt failed, since a
         document from your server was delivered, not a document from
         <code>www.yahoo.com</code>.</p>

         <p>If you wish to prevent this type of request entirely, then
         you need to let Apache know what hostnames to accept and what
         hostnames to reject.  You do this by configuring name-virtual
         hosts, where the first listed host is the default host that
         will catch and reject unknown hostnames.  For example:</p>

<blockquote>
<pre>
NameVirtualHost *

&lt;VirtualHost *&gt;
  ServerName default.only
  &lt;Location /&gt;
    Order allow,deny
    Deny from all
  &lt;/Location&gt;
&lt;/VirtualHost&gt;

&lt;VirtualHost *&gt;
  ServerName realhost1.example.com
  ServerAlias alias1.example.com alias2.example.com
  DocumentRoot /path/to/site1
&lt;/VirtualHost&gt;

...
</pre>
</blockquote>
    <hr /></li>

    </ol>
    
    
  </body>
</html>


    








      
      
    

    <h3>F. Dynamic Content (CGI and SSI)</h3>

    <ol>
      <li>
        <a id="CGIoutsideScriptAlias"
        name="CGIoutsideScriptAlias"><strong>How do I enable CGI
        execution in directories other than the
        ScriptAlias?</strong></a> 

        <p>Apache recognizes all files in a directory named as a <a
        href="../mod/mod_alias.html#scriptalias"><samp>ScriptAlias</samp></a>
        as being eligible for execution rather than processing as
        normal documents. This applies regardless of the file name,
        so scripts in a ScriptAlias directory don't need to be
        named "<samp>*.cgi</samp>" or "<samp>*.pl</samp>" or
        whatever. In other words, <em>all</em> files in a
        ScriptAlias directory are scripts, as far as Apache is
        concerned.</p>

        <p>To persuade Apache to execute scripts in other
        locations, such as in directories where normal documents
        may also live, you must tell it how to recognize them - and
        also that it's okay to execute them. For this, you need to
        use something like the <a
        href="../mod/mod_mime.html#addhandler"><samp>AddHandler</samp></a>
        directive.</p>

        <ol>
          <li>
            In an appropriate section of your server configuration
            files, add a line such as 

            <dl>
              <dd><code>AddHandler cgi-script .cgi</code></dd>
            </dl>

            <p>The server will then recognize that all files in
            that location (and its logical descendants) that end in
            "<samp>.cgi</samp>" are script files, not
            documents.</p>
          </li>

          <li>Make sure that the directory location is covered by
          an <a
          href="../mod/core.html#options"><samp>Options</samp></a>
          declaration that includes the <samp>ExecCGI</samp>
          option.</li>
        </ol>

        <p>In some situations, you might not want to actually allow
        all files named "<samp>*.cgi</samp>" to be executable.
        Perhaps all you want is to enable a particular file in a
        normal directory to be executable. This can be
        alternatively accomplished <em>via</em> <a
        href="../mod/mod_rewrite.html"><samp>mod_rewrite</samp></a>
        and the following steps:</p>

        <ol>
          <li>
            Locally add to the corresponding <samp>.htaccess</samp>
            file a ruleset similar to this one: 

            <dl>
              <dd><code>RewriteEngine on<br />
               RewriteBase /~foo/bar/<br />
               RewriteRule ^quux\.cgi$ -
              [T=application/x-httpd-cgi]</code></dd>
            </dl>
          </li>

          <li>Make sure that the directory location is covered by
          an <a
          href="../mod/core.html#options"><samp>Options</samp></a>
          declaration that includes the <samp>ExecCGI</samp> and
          <samp>FollowSymLinks</samp> option.</li>
        </ol>
        <hr />
      </li>

      <li>
        <a id="premature-script-headers"
        name="premature-script-headers"><strong>What does it mean
        when my CGIs fail with "<samp>Premature end of script
        headers</samp>"?</strong></a> 

        <p>It means just what it says: the server was expecting a
        complete set of HTTP headers (one or more followed by a
        blank line), and didn't get them.</p>

        <p>The most common cause of this problem is the script
        dying before sending the complete set of headers, or
        possibly any at all, to the server. To see if this is the
        case, try running the script standalone from an interactive
        session, rather than as a script under the server. If you
        get error messages, this is almost certainly the cause of
        the "premature end of script headers" message. Even if the
        CGI runs fine from the command line, remember that the
        environment and permissions may be different when running
        under the web server. The CGI can only access resources
        allowed for the <a
        href="../mod/core.html#user"><code>User</code></a> and <a
        href="../mod/core.html#group"><code>Group</code></a>
        specified in your Apache configuration. In addition, the
        environment will not be the same as the one provided on the
        command line, but it can be adjusted using the directives
        provided by <a href="../mod/mod_env.html">mod_env</a>.</p>

        <p>The second most common cause of this (aside from people
        not outputting the required headers at all) is a result of
        an interaction with Perl's output buffering. To make Perl
        flush its buffers after each output statement, insert the
        following statements around the <code>print</code> or
        <code>write</code> statements that send your HTTP
        headers:</p>

        <dl>
          <dd><code>{<br />
           &nbsp;local ($oldbar) = $|;<br />
           &nbsp;$cfh = select (STDOUT);<br />
           &nbsp;$| = 1;<br />
           &nbsp;#<br />
           &nbsp;# print your HTTP headers here<br />
           &nbsp;#<br />
           &nbsp;$| = $oldbar;<br />
           &nbsp;select ($cfh);<br />
           }</code></dd>
        </dl>

        <p>This is generally only necessary when you are calling
        external programs from your script that send output to
        stdout, or if there will be a long delay between the time
        the headers are sent and the actual content starts being
        emitted. To maximize performance, you should turn
        buffer-flushing back <em>off</em> (with <code>$| = 0</code>
        or the equivalent) after the statements that send the
        headers, as displayed above.</p>

        <p>If your script isn't written in Perl, do the equivalent
        thing for whatever language you <em>are</em> using
        (<em>e.g.</em>, for C, call <code>fflush()</code> after
        writing the headers).</p>

        <p>Another cause for the "premature end of script headers"
        message are the RLimitCPU and RLimitMEM directives. You may
        get the message if the CGI script was killed due to a
        resource limit.</p>

        <p>In addition, a configuration problem in <a
        href="../suexec.html">suEXEC</a>, mod_perl, or another
        third party module can often interfere with the execution
        of your CGI and cause the "premature end of script headers"
        message.</p>
        <hr />
      </li>

      <li>
        <a id="POSTnotallowed" name="POSTnotallowed"><strong>Why do
        I keep getting "Method Not Allowed" for form POST
        requests?</strong></a> 

        <p>This is almost always due to Apache not being configured
        to treat the file you are trying to POST to as a CGI
        script. You can not POST to a normal HTML file; the
        operation has no meaning. See the FAQ entry on <a
        href="#CGIoutsideScriptAlias">CGIs outside ScriptAliased
        directories</a> for details on how to configure Apache to
        treat the file in question as a CGI.</p>
        <hr />
      </li>

      <li>
        <a id="nph-scripts" name="nph-scripts"><strong>How can I
        get my script's output without Apache buffering it? Why
        doesn't my server push work?</strong></a> 

        <p>As of Apache 1.3, CGI scripts are essentially not
        buffered. Every time your script does a "flush" to output
        data, that data gets relayed on to the client. Some
        scripting languages, for example Perl, have their own
        buffering for output - this can be disabled by setting the
        <code>$|</code> special variable to 1. Of course this does
        increase the overall number of packets being transmitted,
        which can result in a sense of slowness for the end
        user.</p>

        <p>Prior to 1.3, you needed to use "nph-" scripts to
        accomplish non-buffering. Today, the only difference
        between nph scripts and normal scripts is that nph scripts
        require the full HTTP headers to be sent.</p>
        <hr />
      </li>

      <li>
        <a id="cgi-spec" name="cgi-spec"><strong>Where can I find
        the "CGI specification"?</strong></a> 

        <p>The Common Gateway Interface (CGI) specification can be
        found at the original NCSA site &lt; <a
        href="http://hoohoo.ncsa.uiuc.edu/cgi/interface.html"><samp>
        http://hoohoo.ncsa.uiuc.edu/cgi/interface.html</samp></a>&gt;.
        This version hasn't been updated since 1995, and there have
        been some efforts to update it.</p>

        <p>A new draft is being worked on with the intent of making
        it an informational RFC; you can find out more about this
        project at &lt;<a
        href="http://web.golux.com/coar/cgi/"><samp>http://web.golux.com/coar/cgi/</samp></a>&gt;.</p>
        <hr />
      </li>

      <li>
        <a id="fastcgi" name="fastcgi"><strong>Why isn't FastCGI
        included with Apache any more?</strong></a> 

        <p>The simple answer is that it was becoming too difficult
        to keep the version being included with Apache synchronized
        with the master copy at the <a
        href="http://www.fastcgi.com/">FastCGI web site</a>. When a
        new version of Apache was released, the version of the
        FastCGI module included with it would soon be out of
        date.</p>

        <p>You can still obtain the FastCGI module for Apache from
        the master FastCGI web site.</p>
        <hr />
      </li>

      <li>
        <a id="ssi-part-i" name="ssi-part-i"><strong>How do I
        enable SSI (parsed HTML)?</strong></a> 

        <p>SSI (an acronym for Server-Side Include) directives
        allow static HTML documents to be enhanced at run-time
        (<em>e.g.</em>, when delivered to a client by Apache). The
        format of SSI directives is covered in the <a
        href="../mod/mod_include.html">mod_include manual</a>;
        suffice it to say that Apache supports not only SSI but
        xSSI (eXtended SSI) directives.</p>

        <p>Processing a document at run-time is called
        <em>parsing</em> it; hence the term "parsed HTML" sometimes
        used for documents that contain SSI instructions. Parsing
        tends to be resource-consumptive compared to serving static
        files, and is not enabled by default. It can also interfere
        with the cachability of your documents, which can put a
        further load on your server. (See the <a
        href="#ssi-part-ii">next question</a> for more information
        about this.)</p>

        <p>To enable SSI processing, you need to</p>

        <ul>
          <li>Build your server with the <a
          href="../mod/mod_include.html"><samp>mod_include</samp></a>
          module. This is normally compiled in by default.</li>

          <li>Make sure your server configuration files have an <a
          href="../mod/core.html#options"><samp>Options</samp></a>
          directive which permits <samp>Includes</samp>.</li>

          <li>
            Make sure that the directory where you want the SSI
            documents to live is covered by the "server-parsed"
            content handler, either explicitly or in some ancestral
            location. That can be done with the following <a
            href="../mod/mod_mime.html#addhandler"><samp>AddHandler</samp></a>
            directive: 

            <dl>
              <dd><code>AddHandler server-parsed .shtml</code></dd>
            </dl>

            <p>This indicates that all files ending in ".shtml" in
            that location (or its descendants) should be parsed.
            Note that using ".html" will cause all normal HTML
            files to be parsed, which may put an inordinate load on
            your server.</p>
          </li>
        </ul>

        <p>For additional information, see the <cite>Apache
        Week</cite> article on <a
        href="http://www.apacheweek.com/features/ssi"
        rel="Help"><cite>Using Server Side Includes</cite></a>.</p>
        <hr />
      </li>

      <li>
        <a id="ssi-part-ii" name="ssi-part-ii"><strong>Why don't my
        parsed files get cached?</strong></a> 

        <p>Since the server is performing run-time processing of
        your SSI directives, which may change the content shipped
        to the client, it can't know at the time it starts parsing
        what the final size of the result will be, or whether the
        parsed result will always be the same. This means that it
        can't generate <samp>Content-Length</samp> or
        <samp>Last-Modified</samp> headers. Caches commonly work by
        comparing the <samp>Last-Modified</samp> of what's in the
        cache with that being delivered by the server. Since the
        server isn't sending that header for a parsed document,
        whatever's doing the caching can't tell whether the
        document has changed or not - and so fetches it again to be
        on the safe side.</p>

        <p>You can work around this in some cases by causing an
        <samp>Expires</samp> header to be generated. (See the <a
        href="../mod/mod_expires.html"
        rel="Help"><samp>mod_expires</samp></a> documentation for
        more details.) Another possibility is to use the <a
        href="../mod/mod_include.html#xbithack"
        rel="Help"><samp>XBitHack Full</samp></a> mechanism, which
        tells Apache to send (under certain circumstances detailed
        in the XBitHack directive description) a
        <samp>Last-Modified</samp> header based upon the last
        modification time of the file being parsed. Note that this
        may actually be lying to the client if the parsed file
        doesn't change but the SSI-inserted content does; if the
        included content changes often, this can result in stale
        copies being cached.</p>
        <hr />
      </li>

      <li>
        <a id="ssi-part-iii" name="ssi-part-iii"><strong>How can I
        have my script output parsed?</strong></a> 

        <p>So you want to include SSI directives in the output from
        your CGI script, but can't figure out how to do it? The
        short answer is "you can't." This is potentially a security
        liability and, more importantly, it can not be cleanly
        implemented under the current server API. The best
        workaround is for your script itself to do what the SSIs
        would be doing. After all, it's generating the rest of the
        content.</p>

        <p>This is a feature The Apache Group hopes to add in the
        next major release after 1.3.</p>
        <hr />
      </li>

      <li>
        <a id="ssi-part-iv" name="ssi-part-iv"><strong>SSIs don't
        work for VirtualHosts and/or user home
        directories.</strong></a> 

        <p>This is almost always due to having some setting in your
        config file that sets "Options Includes" or some other
        setting for your DocumentRoot but not for other
        directories. If you set it inside a Directory section, then
        that setting will only apply to that directory.</p>
        <hr />
      </li>

      <li>
        <a id="errordocssi" name="errordocssi"><strong>How can I
        use <code>ErrorDocument</code> and SSI to simplify
        customized error messages?</strong></a> 

        <p>Have a look at <a href="custom_errordocs.html">this
        document</a>. It shows in example form how you can a
        combination of XSSI and negotiation to tailor a set of
        <code>ErrorDocument</code>s to your personal taste, and
        returning different internationalized error responses based
        on the client's native language.</p>
        <hr />
      </li>

      <li>
        <a id="remote-user-var" name="remote-user-var"><strong>Why
        is the environment variable <samp>REMOTE_USER</samp> not
        set?</strong></a> 

        <p>This variable is set and thus available in SSI or CGI
        scripts <strong>if and only if</strong> the requested
        document was protected by access authentication. For an
        explanation on how to implement these restrictions, see <a
        href="http://www.apacheweek.com/"><cite>Apache
        Week</cite></a>'s articles on <a
        href="http://www.apacheweek.com/features/userauth"><cite>Using
        User Authentication</cite></a> or <a
        href="http://www.apacheweek.com/features/dbmauth"><cite>DBM
        User Authentication</cite></a>.</p>

        <p>Hint: When using a CGI script to receive the data of a
        HTML <samp>FORM</samp> notice that protecting the document
        containing the <samp>FORM</samp> is not sufficient to
        provide <samp>REMOTE_USER</samp> to the CGI script. You
        have to protect the CGI script, too. Or alternatively only
        the CGI script (then authentication happens only after
        filling out the form).</p>
        <hr />
      </li>

      <li>
        <a id="user-cgi" name="user-cgi"><strong>How do I allow
        each of my user directories to have a cgi-bin
        directory?</strong></a> 

        <p>Remember that CGI execution does not need to be
        restricted only to cgi-bin directories. You can <a
        href="#CGIoutsideScriptAlias">allow CGI script execution in
        arbitrary parts of your filesystem</a>.</p>

        <p>There are many ways to give each user directory a
        cgi-bin directory such that anything requested as
        <samp>http://example.com/~user/cgi-bin/program</samp> will
        be executed as a CGI script. Two alternatives are:</p>

        <ol>
          <li>
            Place the cgi-bin directory next to the public_html
            directory: 

            <dl>
              <dd><code>ScriptAliasMatch ^/~([^/]*)/cgi-bin/(.*)
              /home/$1/cgi-bin/$2</code></dd>
            </dl>
          </li>

          <li>
            Place the cgi-bin directory underneath the public_html
            directory: 

            <dl>
              <dd><code>&lt;Directory
              /home/*/public_html/cgi-bin&gt;<br />
               &nbsp;&nbsp;&nbsp;&nbsp;Options ExecCGI<br />
               &nbsp;&nbsp;&nbsp;&nbsp;SetHandler cgi-script<br />
               &lt;/Directory&gt;</code></dd>
            </dl>
          </li>
        </ol>
        <p>If you are using suexec, the first technique will not work
        because CGI scripts must be stored under the <code>public_html</code>
        directory.</p>

        <hr />
      </li>
    </ol>
    
    
  </body>
</html>


    








      
      
    

    <h3>G. Authentication and Access Restrictions</h3>

    <ol>
      <li>
        <a id="dnsauth" name="dnsauth"><strong>Why isn't
        restricting access by host or domain name working
        correctly?</strong></a> 

        <p>Two of the most common causes of this are:</p>

        <ol>
          <li><strong>An error, inconsistency, or unexpected
          mapping in the DNS registration</strong><br />
           This happens frequently: your configuration restricts
          access to <samp>Host.FooBar.Com</samp>, but you can't get
          in from that host. The usual reason for this is that
          <samp>Host.FooBar.Com</samp> is actually an alias for
          another name, and when Apache performs the
          address-to-name lookup it's getting the <em>real</em>
          name, not <samp>Host.FooBar.Com</samp>. You can verify
          this by checking the reverse lookup yourself. The easiest
          way to work around it is to specify the correct host name
          in your configuration.</li>

          <li>
            <strong>Inadequate checking and verification in your
            configuration of Apache</strong><br />
             If you intend to perform access checking and
            restriction based upon the client's host or domain
            name, you really need to configure Apache to
            double-check the origin information it's supplied. You
            do this by adding the <samp>-DMAXIMUM_DNS</samp> clause
            to the <samp>EXTRA_CFLAGS</samp> definition in your
            <samp>Configuration</samp> file. For example: 

            <dl>
              <dd><code>EXTRA_CFLAGS=-DMAXIMUM_DNS</code></dd>
            </dl>

            <p>This will cause Apache to be very paranoid about
            making sure a particular host address is
            <em>really</em> assigned to the name it claims to be.
            Note that this <em>can</em> incur a significant
            performance penalty, however, because of all the name
            resolution requests being sent to a nameserver.</p>
          </li>
        </ol>
        <hr />
      </li>

      <li>
        <a id="user-authentication"
        name="user-authentication"><strong>How do I set up Apache
        to require a username and password to access certain
        documents?</strong></a> 

        <p>There are several ways to do this; some of the more
        popular ones are to use the <a
        href="../mod/mod_auth.html">mod_auth</a>, <a
        href="../mod/mod_auth_db.html">mod_auth_db</a>, or <a
        href="../mod/mod_auth_dbm.html">mod_auth_dbm</a>
        modules.</p>

        <p>For an explanation on how to implement these
        restrictions, see <a
        href="http://www.apacheweek.com/"><cite>Apache
        Week</cite></a>'s articles on <a
        href="http://www.apacheweek.com/features/userauth"><cite>Using
        User Authentication</cite></a> or <a
        href="http://www.apacheweek.com/features/dbmauth"><cite>DBM
        User Authentication</cite></a>, or see the <a
        href="../howto/auth.html">authentication tutorial</a> in the
        Apache documentation.</p>
        <hr />
      </li>

      <li>
        <a id="remote-auth-only"
        name="remote-auth-only"><strong>How do I set up Apache to
        allow access to certain documents only if a site is either
        a local site <em>or</em> the user supplies a password and
        username?</strong></a> 

        <p>Use the <a href="../mod/core.html#satisfy">Satisfy</a>
        directive, in particular the <code>Satisfy Any</code>
        directive, to require that only one of the access
        restrictions be met. For example, adding the following
        configuration to a <samp>.htaccess</samp> or server
        configuration file would restrict access to people who
        either are accessing the site from a host under domain.com
        or who can supply a valid username and password:</p>

        <dl>
          <dd><code>Deny from all<br />
           Allow from .domain.com<br />
           AuthType Basic<br />
           AuthUserFile /usr/local/apache/conf/htpasswd.users<br />
           AuthName "special directory"<br />
           Require valid-user<br />
           Satisfy any</code></dd>
        </dl>

        <p>See the <a href="#user-authentication">user
        authentication</a> question and the <a
        href="../mod/mod_access.html">mod_access</a> module for
        details on how the above directives work.</p>
        <hr />
      </li>

      <li>
        <a id="authauthoritative"
        name="authauthoritative"><strong>Why does my authentication
        give me a server error?</strong></a> 

        <p>Under normal circumstances, the Apache access control
        modules will pass unrecognized user IDs on to the next
        access control module in line. Only if the user ID is
        recognized and the password is validated (or not) will it
        give the usual success or "authentication failed"
        messages.</p>

        <p>However, if the last access module in line 'declines'
        the validation request (because it has never heard of the
        user ID or because it is not configured), the
        <samp>http_request</samp> handler will give one of the
        following, confusing, errors:</p>

        <ul>
          <li><samp>check access</samp></li>

          <li><samp>check user. No user file?</samp></li>

          <li><samp>check access. No groups file?</samp></li>
        </ul>

        <p>This does <em>not</em> mean that you have to add an
        '<samp>AuthUserFile&nbsp;/dev/null</samp>' line as some
        magazines suggest!</p>

        <p>The solution is to ensure that at least the last module
        is authoritative and <strong>CONFIGURED</strong>. By
        default, <samp>mod_auth</samp> is authoritative and will
        give an OK/Denied, but only if it is configured with the
        proper <samp>AuthUserFile</samp>. Likewise, if a valid
        group is required. (Remember that the modules are processed
        in the reverse order from that in which they appear in your
        compile-time <samp>Configuration</samp> file.)</p>

        <p>A typical situation for this error is when you are using
        the <samp>mod_auth_dbm</samp>, <samp>mod_auth_msql</samp>,
        <samp>mod_auth_mysql</samp>, <samp>mod_auth_anon</samp> or
        <samp>mod_auth_cookie</samp> modules on their own. These
        are by default <strong>not</strong> authoritative, and this
        will pass the buck on to the (non-existent) next
        authentication module when the user ID is not in their
        respective database. Just add the appropriate
        '<samp><em>XXX</em>Authoritative yes</samp>' line to the
        configuration.</p>

        <p>In general it is a good idea (though not terribly
        efficient) to have the file-based <samp>mod_auth</samp> a
        module of last resort. This allows you to access the web
        server with a few special passwords even if the databases
        are down or corrupted. This does cost a file
        open/seek/close for each request in a protected area.</p>
        <hr />
      </li>

      <li>
        <a id="auth-on-same-machine"
        name="auth-on-same-machine"><strong>Do I have to keep the
        (mSQL) authentication information on the same
        machine?</strong></a> 

        <p>Some organizations feel very strongly about keeping the
        authentication information on a different machine than the
        webserver. With the <samp>mod_auth_msql</samp>,
        <samp>mod_auth_mysql</samp>, and other SQL modules
        connecting to (R)DBMses this is quite possible. Just
        configure an explicit host to contact.</p>

        <p>Be aware that with mSQL and Oracle, opening and closing
        these database connections is very expensive and time
        consuming. You might want to look at the code in the
        <samp>auth_*</samp> modules and play with the compile time
        flags to alleviate this somewhat, if your RDBMS licences
        allow for it.</p>
        <hr />
      </li>

      <li>
        <a id="msql-slow" name="msql-slow"><strong>Why is my mSQL
        authentication terribly slow?</strong></a> 

        <p>You have probably configured the Host by specifying a
        FQHN, and thus the <samp>libmsql</samp> will use a full
        blown TCP/IP socket to talk to the database, rather than a
        fast internal device. The <samp>libmsql</samp>, the mSQL
        FAQ, and the <samp>mod_auth_msql</samp> documentation warn
        you about this. If you have to use different hosts, check
        out the <samp>mod_auth_msql</samp> code for some compile
        time flags which might - or might not - suit you.</p>
        <hr />
      </li>

      <li>
        <a id="passwdauth" name="passwdauth"><strong>Can I use my
        <samp>/etc/passwd</samp> file for Web page
        authentication?</strong></a> 

        <p>Yes, you can - but it's a <strong>very bad
        idea</strong>. Here are some of the reasons:</p>

        <ul>
          <li>The Web technology provides no governors on how often
          or how rapidly password (authentication failure) retries
          can be made. That means that someone can hammer away at
          your system's <samp>root</samp> password using the Web,
          using a dictionary or similar mass attack, just as fast
          as the wire and your server can handle the requests. Most
          operating systems these days include attack detection
          (such as <em>n</em> failed passwords for the same account
          within <em>m</em> seconds) and evasion (breaking the
          connection, disabling the account under attack, disabling
          <em>all</em> logins from that source, <em>et
          cetera</em>), but the Web does not.</li>

          <li>An account under attack isn't notified (unless the
          server is heavily modified); there's no "You have 19483
          login failures" message when the legitimate owner logs
          in.</li>

          <li>Without an exhaustive and error-prone examination of
          the server logs, you can't tell whether an account has
          been compromised. Detecting that an attack has occurred,
          or is in progress, is fairly obvious, though -
          <em>if</em> you look at the logs.</li>

          <li>Web authentication passwords (at least for Basic
          authentication) generally fly across the wire, and
          through intermediate proxy systems, in what amounts to
          plain text. "O'er the net we go/Caching all the way;/O
          what fun it is to surf/Giving my password away!"</li>

          <li>Since HTTP is stateless, information about the
          authentication is transmitted <em>each and every
          time</em> a request is made to the server. Essentially,
          the client caches it after the first successful access,
          and transmits it without asking for all subsequent
          requests to the same server.</li>

          <li>It's relatively trivial for someone on your system to
          put up a page that will steal the cached password from a
          client's cache without them knowing. Can you say
          "password grabber"?</li>
        </ul>

        <p>If you still want to do this in light of the above
        disadvantages, the method is left as an exercise for the
        reader. It'll void your Apache warranty, though, and you'll
        lose all accumulated UNIX guru points.</p>
        <hr />
      </li>

      <li>
        <a id="prompted-twice" name="prompted-twice"><strong>Why
        does Apache ask for my password twice before serving a
        file?</strong></a> 

        <p>If the hostname under which you are accessing the server
        is different than the hostname specified in the <a
        href="../mod/core.html#servername"><code>ServerName</code></a>
        directive, then depending on the setting of the <a
        href="../mod/core.html#usecanonicalname"><code>UseCanonicalName</code></a>
        directive, Apache will redirect you to a new hostname when
        constructing self-referential URLs. This happens, for
        example, in the case where you request a directory without
        including the trailing slash.</p>

        <p>When this happens, Apache will ask for authentication
        once under the original hostname, perform the redirect, and
        then ask again under the new hostname. For security
        reasons, the browser must prompt again for the password
        when the host name changes.</p>

        <p>To eliminate this problem you should</p>

        <ol>
          <li>Always use the trailing slash when requesting
          directories;</li>

          <li>Change the <code>ServerName</code> to match the name
          you are using in the URL; and/or</li>

          <li>Set <code>UseCanonicalName off</code>.</li>
        </ol>
        <hr />
      </li>

      <li>
        <a id="image-theft" name="image-theft"><strong>How can I prevent
        people from "stealing" the images from my web site?</strong></a> 

        <p>The goal here is to prevent people from inlining your images
        directly from their web site, but accessing them only if they
        appear inline in your pages.<p>

        <p>This can be accomplished with a combination of SetEnvIf and
        the Deny and Allow directives. However, it is important to 
        understand that any access restriction based on the REFERER
        header is intrinsically problematic due to the fact that 
        browsers can send an incorrect REFERER, either because they 
        want to circumvent your restriction or simply because they don't
        send the right thing (or anything at all).</p>

        <p>The following configuration will produce the desired effect
        if the browser passes correct REFERER headers.</p>

<pre>
SetEnvIf REFERER "www\.mydomain\.com" linked_from_here
SetEnvIf REFERER "^$" linked_from_here

&lt;Directory /www/images&gt;
    Order deny,allow
    Deny from all
    Allow from env=linked_from_here
&lt;/Directory&gt;
</pre>

<p>Further examples can be found in the <a 
href="../env.html#examples">Environment Variables</a> documentation.</p>

        <hr />
      </li>


    </ol>
    
    
  </body>
</html>


    








      
      
    

    <h3>H. URL Rewriting</h3>

    <ol>
      <li>
        <a id="rewrite-more-config"
        name="rewrite-more-config"><strong>Where can I find
        mod_rewrite rulesets which already solve particular
        URL-related problems?</strong></a> 

        <p>There is a collection of <a
        href="http://www.engelschall.com/pw/apache/rewriteguide/">Practical
        Solutions for URL-Manipulation</a> where you can find all
        typical solutions the author of <a
        href="../mod/mod_rewrite.html"><samp>mod_rewrite</samp></a>
        currently knows of. If you have more interesting rulesets
        which solve particular problems not currently covered in
        this document, send it to <a
        href="mailto:rse@@apache.org">Ralf S. Engelschall</a> for
        inclusion. The other webmasters will thank you for avoiding
        the reinvention of the wheel.</p>
        <hr />
      </li>

      <li>
        <a id="rewrite-article"
        name="rewrite-article"><strong>Where can I find any
        published information about URL-manipulations and
        mod_rewrite?</strong></a> 

        <p>There is an article from <a
        href="mailto:rse@@apache.org">Ralf S. Engelschall</a> about
        URL-manipulations based on <a
        href="../mod/mod_rewrite.html"><samp>mod_rewrite</samp></a>
        in the "iX Multiuser Multitasking Magazin" issue #12/96.
        The german (original) version can be read online at &lt;<a
        href="http://www.heise.de/ix/artikel/9612149/">http://www.heise.de/ix/artikel/9612149/</a>&gt;,
        the English (translated) version can be found at &lt;<a
        href="http://www.heise.de/ix/artikel/E/9612149/">http://www.heise.de/ix/artikel/E/9612149/</a>&gt;.</p>
        <hr />
      </li>

      <li>
        <a id="rewrite-complexity"
        name="rewrite-complexity"><strong>Why is mod_rewrite so
        difficult to learn and seems so complicated?</strong></a> 

        <p>Hmmm... there are a lot of reasons. First, mod_rewrite
        itself is a powerful module which can help you in really
        <strong>all</strong> aspects of URL rewriting, so it can be
        no trivial module per definition. To accomplish its hard
        job it uses software leverage and makes use of a powerful
        regular expression library by Henry Spencer which is an
        integral part of Apache since its version 1.2. And regular
        expressions itself can be difficult to newbies, while
        providing the most flexible power to the advanced
        hacker.</p>

        <p>On the other hand mod_rewrite has to work inside the
        Apache API environment and needs to do some tricks to fit
        there. For instance the Apache API as of 1.x really was not
        designed for URL rewriting at the <tt>.htaccess</tt> level
        of processing. Or the problem of multiple rewrites in
        sequence, which is also not handled by the API per design.
        To provide this features mod_rewrite has to do some special
        (but API compliant!) handling which leads to difficult
        processing inside the Apache kernel. While the user usually
        doesn't see anything of this processing, it can be
        difficult to find problems when some of your RewriteRules
        seem not to work.</p>
        <hr />
      </li>

      <li>
        <a id="rewrite-dontwork"
        name="rewrite-dontwork"><strong>What can I do if my
        RewriteRules don't work as expected?</strong></a> 

        <p>Use "<samp>RewriteLog somefile</samp>" and
        "<samp>RewriteLogLevel 9</samp>" and have a precise look at
        the steps the rewriting engine performs. This is really the
        only one and best way to debug your rewriting
        configuration.</p>
        <hr />
      </li>

      <li>
        <a id="rewrite-prefixdocroot"
        name="rewrite-prefixdocroot"><strong>Why don't some of my
        URLs get prefixed with DocumentRoot when using
        mod_rewrite?</strong></a> 

        <p>If the rule starts with <samp>/somedir/...</samp> make
        sure that really no <samp>/somedir</samp> exists on the
        filesystem if you don't want to lead the URL to match this
        directory, <em>i.e.</em>, there must be no root directory
        named <samp>somedir</samp> on the filesystem. Because if
        there is such a directory, the URL will not get prefixed
        with DocumentRoot. This behavior looks ugly, but is really
        important for some other aspects of URL rewriting.</p>
        <hr />
      </li>

      <li>
        <a id="rewrite-nocase" name="rewrite-nocase"><strong>How
        can I make all my URLs case-insensitive with
        mod_rewrite?</strong></a> 

        <p>You can't! The reasons are: first, that, case
        translations for arbitrary length URLs cannot be done
        <em>via</em> regex patterns and corresponding
        substitutions. One needs a per-character pattern like the
        sed/Perl <samp>tr|..|..|</samp> feature. Second, just
        making URLs always upper or lower case does not solve the
        whole problem of case-INSENSITIVE URLs, because URLs
        actually have to be rewritten to the correct case-variant
        for the file residing on the filesystem in order to allow
        Apache to access the file. And the Unix filesystem is
        always case-SENSITIVE.</p>

        <p>But there is a module named <code><a
        href="../mod/mod_speling.html">mod_speling.c</a></code> in
        the Apache distribution. Try this module to help correct
        people who use mis-cased URLs.</p>
        <hr />
      </li>

      <li>
        <a id="rewrite-virthost"
        name="rewrite-virthost"><strong>Why are RewriteRules in my
        VirtualHost parts ignored?</strong></a> 

        <p>Because you have to enable the engine for every virtual
        host explicitly due to security concerns. Just add a
        "RewriteEngine on" to your virtual host configuration
        parts.</p>
        <hr />
      </li>

      <li>
        <a id="rewrite-envwhitespace"
        name="rewrite-envwhitespace"><strong>How can I use strings
        with whitespaces in RewriteRule's ENV flag?</strong></a> 

        <p>There is only one ugly solution: You have to surround
        the complete flag argument by quotation marks
        (<samp>"[E=...]"</samp>). Notice: The argument to quote
        here is not the argument to the E-flag, it is the argument
        of the Apache config file parser, <em>i.e.</em>, the third
        argument of the RewriteRule here. So you have to write
        <samp>"[E=any text with whitespaces]"</samp>.</p>
        <hr />
      </li>
    </ol>
    
    
  </body>
</html>


    








      
      
    

    <h3>I. Features</h3>

    <ol>
      <li>
        <a id="proxy" name="proxy"><strong>Does or will Apache act
        as a Proxy server?</strong></a> 

        <p>Apache version 1.1 and above comes with a <a
        href="../mod/mod_proxy.html">proxy module</a>. If compiled
        in, this will make Apache act as a caching-proxy
        server.</p>
        <hr />
      </li>

      <li>
        <a id="multiviews" name="multiviews"><strong>What are
        "multiviews"?</strong></a> 

        <p>"Multiviews" is the general name given to the Apache
        server's ability to provide language-specific document
        variants in response to a request. This is documented quite
        thoroughly in the <a href="../content-negotiation.html"
        rel="Help">content negotiation</a> description page. In
        addition, <cite>Apache Week</cite> carried an article on
        this subject entitled "<a
        href="http://www.apacheweek.com/features/negotiation"
        rel="Help"><cite>Content Negotiation
        Explained</cite></a>".</p>
        <hr />
      </li>

      <li>
        <a id="putsupport" name="putsupport"><strong>Why can't I
        publish to my Apache server using PUT on Netscape Gold and
        other programs?</strong></a> 

        <p>Because you need to install and configure a script to
        handle the uploaded files. This script is often called a
        "PUT" handler. There are several available, but they may
        have security problems. Using FTP uploads may be easier and
        more secure, at least for now. For more information, see
        the <cite>Apache Week</cite> article <a
        href="http://www.apacheweek.com/features/put"><cite>Publishing
        Pages with PUT</cite></a>.</p>
        <hr />
      </li>

      <li>
        <a id="SSL-i" name="SSL-i"><strong>Why doesn't Apache
        include SSL?</strong></a> 

        <p>SSL (Secure Socket Layer) data transport requires
        encryption, and many governments have restrictions upon the
        import, export, and use of encryption technology. If Apache
        included SSL in the base package, its distribution would
        involve all sorts of legal and bureaucratic issues, and it
        would no longer be freely available. Also, some of the
        technology required to talk to current clients using SSL is
        patented by <a href="http://www.rsa.com/">RSA Data
        Security</a>, who restricts its use without a license.</p>

        <p>Some SSL implementations of Apache are available,
        however; see the "<a
        href="http://httpd.apache.org/related_projects.html">related
        projects</a>" page at the main Apache web site.</p>

        <p>You can find out more about this topic in the
        <cite>Apache Week</cite> article about <a
        href="http://www.apacheweek.com/features/ssl"
        rel="Help"><cite>Apache and Secure
        Transactions</cite></a>.</p>
        <hr />
      </li>

      <li>
        <a id="footer" name="footer"><strong>How can I attach a
        footer to my documents without using SSI?</strong></a> 

        <p>You can make arbitrary changes to static documents by
        configuring an <a
        href="../mod/mod_actions.html#action">Action</a> which
        launches a CGI script. The CGI is then responsible for
        setting a content-type and delivering the requested
        document (the location of which is passed in the
        <samp>PATH_TRANSLATED</samp> environment variable), along
        with whatever footer is needed.</p>

        <p>Busy sites may not want to run a CGI script on every
        request, and should consider using an Apache module to add
        the footer. There are several third party modules available
        through the <a href="http://modules.apache.org/">Apache
        Module Registry</a> which will add footers to documents.
        These include mod_trailer, PHP
        (<samp>php3_auto_append_file</samp>), mod_layout, and
        mod_perl (<samp>Apache::Sandwich</samp>).</p>
        <hr />
      </li>

      <li>
        <a id="search" name="search"><strong>Does Apache include a
        search engine?</strong></a> 

        <p>Apache does not include a search engine, but there are
        many good commercial and free search engines which can be
        used easily with Apache. Some of them are listed on the <a
        href="http://www.searchtools.com/tools/tools.html">Web Site
        Search Tools</a> page. Open source search engines that are
        often used with Apache include <a
        href="http://www.htdig.org/">ht://Dig</a> and <a
        href="http://sunsite.berkeley.edu/SWISH-E/">SWISH-E</a>.</p>
        <hr />
      </li>

      <li>
        <a id="rotate" name="rotate"><strong>How can I rotate my
        log files?</strong></a> 

        <p>The simple answer: by piping the transfer log into an
        appropriate log file rotation utility.</p>

        <p>The longer answer: In the src/support/ directory, you
        will find a utility called <a
        href="../programs/rotatelogs.html">rotatelogs</a> which can
        be used like this:</p>
<pre>
   TransferLog "|/path/to/rotatelogs /path/to/logs/access_log 86400"
</pre>

        <p>to enable daily rotation of the log files.<br />
         A more sophisticated solution of a logfile rotation
        utility is available under the name <code>cronolog</code>
        from Andrew Ford's site at <a
        href="http://www.cronolog.org/">http://www.cronolog.org/</a>.
        It can automatically create logfile subdirectories based on
        time and date, and can have a constant symlink point to the
        rotating logfiles. (As of version 1.6.1, cronolog is
        available under the <a href="../LICENSE">Apache
        License</a>). Use it like this:</p>
<pre>
   CustomLog "|/path/to/cronolog --symlink=/usr/local/apache/logs/access_log /usr/local/apache/logs/%Y/%m/access_log" combined
</pre>
        <hr />
      </li>

      <li>
        <a id="conditional-logging"
        name="conditional-logging"><strong>How do I keep certain
        requests from appearing in my logs?</strong></a> 

        <p>The maximum flexibility for removing unwanted
        information from log files is obtained by post-processing
        the logs, or using piped-logs to feed the logs through a
        program which does whatever you want. However, Apache does
        offer the ability to prevent requests from ever appearing
        in the log files. You can do this by using the <a
        href="../mod/mod_setenvif.html#setenvif"><code>SetEnvIf</code></a>
        directive to set an environment variable for certain
        requests and then using the conditional <a
        href="../mod/mod_log_config.html#customlog-conditional"><code>
        CustomLog</code></a> syntax to prevent logging when the
        environment variable is set.</p>
        <hr />
      </li>

      <li>
        <a id="dbinteg" name="dbinteg"><b>Does Apache support any
        sort of database integration?</b></a> 

        <p>No. Apache is a Web (HTTP) server, not an application
        server. The base package does not include any such
        functionality. See the <a href="http://www.php.net/">PHP
        project</a> and the <a
        href="http://perl.apache.org/">mod_perl project</a> for
        examples of modules that allow you to work with databases
        from within the Apache environment.</p>
        <hr />
      </li>

      <li>
        <a id="asp" name="asp"><b>Can I use Active Server Pages
        (ASP) with Apache?</b></a> 

        <p>The base Apache Web server package does not include ASP
        support. However, there are a couple of after-market
        solutions that let you add this functionality; see the <a
        href="http://httpd.apache.org/related_projects.html">related
        projects</a> page to find out more.</p>
        <hr />
      </li>

      <li>
        <a id="java" name="java"><b>Does Apache come with Java
        support?</b></a> 

        <p>The base Apache Web server package does not include
        support for Java, Java Server Pages, Enterprise Java Beans,
        or Java servlets. Those features are available as add-ons
        from the Apache/Java project site, &lt;URL:<a
        href="http://jakarta.apache.org">http://jakarta.apache.org/</a>&gt;.</p>
        <hr />
      </li>
    </ol>
    
    
  </body>
</html>


@


1.12
log
@merge apache 1.3.27
@
text
@d813 14
a826 1
        <p>A cute name which stuck. Apache is "<strong>A
a829 12
        <p>For many developers it is also a reverent connotation to
        the Native American Indian tribe of Apache, <a
        href="http://www.indians.org/welker/apache.htm">well-known
        for their superior skills in warfare strategy and
        inexhaustible endurance</a>. For more information on the
        Apache Nation, we suggest searching <a
        href="http://www.google.com/search?q=Apache+Nation">Google</a>,
        <a
        href="http://www.northernlight.com/nlquery.fcg?qr=Apache+Nation">
        Northernlight</a>, or <a
        href="http://www.alltheweb.com/cgi-bin/asearch?query=Apache+Nation">
        AllTheWeb</a>.</p>
d1209 1
a1209 1
        an updated patch that incorporate all changes and
d1577 2
a1578 2
        problems or slow network links may experiences this more
        than high-capacity ones or those with large pipes to the
d1825 1
a1825 7
        Instructions for temporarily removing the Aventail Connect
        V3.x shim can be found here: "<a
        href="http://support.aventail.com/akb/article00386.html">How
        to Remove Aventail Connect v3.x from the LSP Order for
        Testing Purposes</a>."</p>

        <p>Another potential solution (not tested) is to add
d1827 1
a1827 4
        List". See this link for details: "<a
        href="http://support.aventail.com/akb/article00586.html">How
        to Add an Application to Aventail Connect's Application
        Exclusion List</a>."</p>
d1911 1
a1911 1
          rotated. Compare the time of rotation to the error menage time.
d1924 1
a1924 1
          such a way that binary compatiblity cannot be guaranteed any
d2278 28
d2629 1
a2629 1
       <li><a id="serverheader" name="servername"><strong>How can I change
d3303 3
a3305 1
        User Authentication</cite></a>.</p>
d3916 1
a3916 1
        href="../mod/mod_setenvif.html#SetEnvIf"><code>SetEnvIf</code></a>
@


1.11
log
@merge
@
text
@d323 4
d425 5
d1903 1
a1903 1
          with more information.</p>
d1906 1
a1906 1
    <li<a id="restart" name="restart"><b>Why am I getting server restart
d1921 20
a1940 1
          restart is due to your server logs being rotated.</p>
d2551 9
a2559 1
         keyword.  To turn off automatic directory indexing, remove
d2561 9
a2569 1
         <code>Options</code> line.</p>
d2607 126
@


1.10
log
@fix half baked abortion of a merge to 1.3.23 and take
tree to apache-1.3.24+mod+ssl2.8.8
@
text
@d318 5
d542 4
d1279 3
a1281 4
        href="http://www.perl.com/CPAN-local/doc/manual/html/pod/perlre.html#Regular_Expressions">
        CPAN page on regular expressions</a>, and branching out
        from there.</p>
        <hr />
d1897 17
d3017 4
d3339 38
d3701 1
a3701 1
        href="http://www.ford-mason.co.uk/resources/cronolog/">http://www.ford-mason.co.uk/resources/cronolog/</a>.
@


1.9
log
@Apache 1.3.23+mod_ssl-2.8.6-1.3.23 merge
@
text
@a24 2
    <p>$Revision: 1.149 $ ($Date: 2001/10/08 01:26:54 $)</p>

d398 3
a400 1
          trigger a save window with Netscape?</a></li>
d410 7
d698 1
a698 1
          <li>runs on Windows NT/9x, Netware 5.x, OS/2, and most
d2396 2
a2397 1
        Netscape?</strong></a> 
d2399 1
a2399 1
        <p>Internet Explorer (IE) and Netscape handle mime type
d2402 7
a2408 8
        the file extension to determine the mime type. This can
        happen when the server specifies a mime type of
        <code>application/octet-stream</code> or
        <code>text/plain</code>. (Unfortunately, this behavior
        makes it impossible to properly send plain text in some
        situations unless the file extension is <code>txt</code>.)
        There are more details available on IE's mime type
        detection behavior in an <a
d2410 7
a2416 6
        MSDN article</a>.</p>

        <p>In order to make all browsers work correctly, you should
        assure that Apache sends the correct mime type for the
        file. This is accomplished by editing the
        <code>mime.types</code> file or using an <a
d2418 6
a2423 2
        directive in the Apache configuration files.</p>
        <hr />
d2485 53
@


1.8
log
@Apache 1.3.19+mod_ssl 2.8.1 merge - also adds shared build of mod_headers
and mod_expire
@
text
@d1 424
a424 90
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
 <HEAD>
  <TITLE>Apache Server Frequently Asked Questions</TITLE>

 </HEAD>
<!-- Background white, links blue (unvisited), navy (visited), red (active) -->
 <BODY
  BGCOLOR="#FFFFFF"
  TEXT="#000000"
  LINK="#0000FF"
  VLINK="#000080"
  ALINK="#FF0000"
 >
  <DIV ALIGN="CENTER">
 <IMG SRC="../images/sub.gif" ALT="[APACHE DOCUMENTATION]">
 <H3>
  Apache HTTP Server Version 1.3
 </H3>
</DIV>

  <H1 ALIGN="CENTER">Apache Server Frequently Asked Questions</H1>
  <P>
  $Revision: 1.147 $ ($Date: 2000/11/12 00:25:31 $)
  </P>
  <P>
  The latest version of this FAQ is always available from the main
  Apache web site, at
  &lt;<A
       HREF="http://httpd.apache.org/docs/misc/FAQ.html"
       REL="Help"
      ><SAMP>http://httpd.apache.org/docs/misc/FAQ.html</SAMP></A>&gt;.
  </P>
<!-- Notes about changes:                                           -->
<!--  - If adding a relative link to another part of the            -->
<!--    documentation, *do* include the ".html" portion.  There's a -->
<!--    good chance that the user will be reading the documentation -->
<!--    on his own system, which may not be configured for          -->
<!--    multiviews.                                                 -->
<!--  - When adding items, make sure they're put in the right place -->
<!--    - verify that the numbering matches up.                     -->
<!--  - *Don't* use <PRE></PRE> blocks - they don't appear          -->
<!--    correctly in a reliable way when this is converted to text  -->
<!--    with Lynx.  Use <DL><DD><CODE>xxx<BR>xx</CODE></DD></DL>    -->
<!--    blocks inside a <P></P> instead.  This is necessary to get  -->
<!--    the horizontal and vertical indenting right.                -->
<!--  - Don't forget to include an HR tag after the last /P tag     -->
<!--    but before the /LI in an item.                              -->
  <P>
  If you are reading a text-only version of this FAQ, you may find numbers
  enclosed in brackets (such as &quot;[12]&quot;).  These refer to the list of
  reference URLs to be found at the end of the document.  These references
  do not appear, and are not needed, for the hypertext version.
  </P>
  <H2>The Questions</H2>
<!-- Stuff to Add:                                                  -->
<!-- - can't bind to port 80                                        -->
<!--   - permission denied                                          -->
<!--   - address already in use                                     -->
<!-- - mod_auth & passwd lines "user:pw:.*" - ++1st colon onward is -->
<!--   treated as pw, not just ++1st to --2nd.                      -->
<!-- - SSL:                                                         -->
<!--   - Can I use Apache-SSL for free in Canada?                   -->
<!--   - Why can't I use Apache-SSL in the U.S.?                    -->
<!-- - How can I found out how many visitors my site gets?          -->
<!-- - How do I add a counter?                                      -->
<!-- - How do I configure Apache as a proxy?                        -->
<!-- - What browsers support HTTP/1.1?                              -->
<!-- - What's the point of vhosts-by-name is there aren't any       -->
<!--   HTTP/1.1 browsers?                                           -->
<!-- - Is there an Apache for W95/WNT?                              -->
<!-- - Why does Apache die when a vhost can't be DNS-resolved?      -->
<!-- - Why do I get "send lost connection" messages in my error     -->
<!--   log?                                                         -->
<!--   - specifically consider .pdf files which seem to cause this  -->
<!--     a lot when accessed via the plugin ... and also mention    -->
<!--     how range-requests can cause bytes served < file size      -->
<!-- - Why do directory indexes appear as garbage?  (A: -lucb)      -->
<!-- - How do I add a footer to all pages offered by my server?     -->
<!-- - Fix midi question; a bigger problem than midi vs. x-midi is  -->
<!--   the simple fact that older versions of Apache (and new ones  -->
<!--   that have been upgraded without upgrading the mime.types     -->
<!--   file) don't have the type listed at all.                     -->
<!-- - RewriteRule /~fraggle/* /cgi-bin/fraggle.pl does not work    -->
<!-- - how do I disable authentication for a subdirectory?          -->
<!--   (A: you can't but "Satisfy any; Allow from all" can be close -->
<!-- - '400 malformed request' on Win32 might mean stale proxy; see -->
<!--   PR #2300.                                                    -->
<!-- - how do I tell what version of Apache I am running?           -->
<OL TYPE="A">
a425 6
 
 
 
  
  
 
d429 1
a429 24
 <LI VALUE="1"><STRONG>Background</STRONG>
  <OL>
   <LI><A HREF="#what">What is Apache?</A>
   </LI>
   <LI><A HREF="#why">How and why was Apache created?</A>
   </LI>
   <LI><A HREF="#name">Why the name &quot;Apache&quot;?</A>
   </LI>
   <LI><A HREF="#compare">OK, so how does Apache compare to other servers?</A>
   </LI>
   <LI><A HREF="#tested">How thoroughly tested is Apache?</A>
   </LI>
   <LI><A HREF="#future">What are the future plans for Apache?</A>
   </LI>
   <LI><A HREF="#support">Whom do I contact for support?</A>
   </LI>
   <LI><A HREF="#more">Is there any more information on Apache?</A>
   </LI>
   <LI><A HREF="#where">Where can I get Apache?</A>
   </LI>
   <li><a href="#logo">May I use the Apache logo on my product or Web site?</a>
   </li>
  </OL>
 </LI>
d431 2
d434 4
d439 3
d443 2
d446 3
d450 2
a451 6
 
 
 
  
  
 
d453 2
d456 2
d459 2
a460 28
 <LI value="2"><STRONG>General Technical Questions</STRONG>
  <OL>
   <LI><A HREF="#what2do">&quot;Why can't I ...?  Why won't ...
        work?&quot;  What to do in case of problems</A>
   </LI>
   <LI><A HREF="#compatible">How compatible is Apache with my existing
        NCSA 1.3 setup?</A>
   </LI>
   <LI><A HREF="#year2000">Is Apache Year 2000 compliant?</A>
   </LI>
   <LI><A HREF="#submit_patch">How do I submit a patch to the Apache Group?</A>
   </LI>
   <LI><A HREF="#domination">Why has Apache stolen my favourite site's
        Internet address?</A>
   </LI>
   <LI><A HREF="#apspam">Why am I getting spam mail from the Apache site?</A>
   </LI>
   <LI><A HREF="#redist">May I include the Apache software on a CD or other
        package I'm distributing?</A>
   </LI>
   <LI><A HREF="#zoom">What's the best hardware/operating system/... How do
        I get the most out of my Apache Web server?</A>
   </LI>
   <LI><A HREF="#regex">What are "regular expressions"?</A>
   </LI>
   <li><a href="#binaries">Why isn't there a binary for my platform?</a></li>
  </OL>
 </LI>
d462 2
d465 2
d468 3
d472 2
d475 10
a485 6
 
 
 
  
  
 
d487 1
a489 21
 <LI VALUE="3"><STRONG>Building Apache</STRONG>
  <OL>
   <LI><A HREF="#bind8.1">Why do I get an error about an undefined
        reference to &quot;<SAMP>__inet_ntoa</SAMP>&quot; or other
        <SAMP>__inet_*</SAMP> symbols?</A>
   </LI>
   <LI><A HREF="#cantbuild">Why won't Apache compile with my
        system's <SAMP>cc</SAMP>?</A>
   </LI>
   <LI><A HREF="#linuxiovec">Why do I get complaints about redefinition
        of &quot;<CODE>struct iovec</CODE>&quot; when compiling under Linux?</A>
   </LI>
   <LI><A HREF="#broken-gcc">I'm using gcc and I get some compilation errors, 
	what is wrong?</A>
   </LI>
   <LI><A HREF="#glibc-crypt">I'm using RedHat Linux 5.0, or some other
        <SAMP>glibc</SAMP>-based Linux system, and I get errors with the
        <CODE>crypt</CODE> function when I attempt to build Apache 1.2.</A>
   </LI>
  </OL>
 </LI>
d496 1
a496 6
 
 
 
  
  
 
d498 2
d501 3
d505 3
a507 52
 <LI VALUE="4"><STRONG>Error Log Messages and Problems Starting Apache</STRONG>
  <OL>
   <LI><A HREF="#setgid">Why do I get &quot;<SAMP>setgid: Invalid
        argument</SAMP>&quot; at startup?</A>
   </LI>
   <LI><A HREF="#nodelay">Why am I getting &quot;<SAMP>httpd: could not
        set socket option TCP_NODELAY</SAMP>&quot; in my error log?</A>
   </LI>
   <LI><A HREF="#peerreset">Why am I getting &quot;<SAMP>connection
        reset by peer</SAMP>&quot; in my error log?</A>
   </LI>
   <LI><A HREF="#wheres-the-dump">The errorlog says Apache dumped core,
        but where's the dump file?</A>
   </LI>
   <LI><A HREF="#linux-shmget">When I run it under Linux I get &quot;shmget:
        function not found&quot;, what should I do?</A>
   </LI>
   <LI><A HREF="#nfslocking">Server hangs, or fails to start, and/or error log
        fills with &quot;<SAMP>fcntl: F_SETLKW: No record locks
        available</SAMP>&quot; or similar messages</A>
   </LI>
   <LI><A HREF="#aixccbug">Why am I getting "<SAMP>Expected &lt;/Directory&gt;
        but saw &lt;/Directory&gt;</SAMP>" when I try to start Apache?</A>
   </LI>
   <LI><A HREF="#redhat">I'm using RedHat Linux and I have problems with httpd
        dying randomly or not restarting properly</A>
   </LI>
   <LI><A HREF="#stopping">I upgraded from an Apache version earlier
        than 1.2.0 and suddenly I have problems with Apache dying randomly
        or not restarting properly</A>
   </LI>
   <LI><A HREF="#setservername">When I try to start Apache from a DOS
        window, I get a message like "<samp>Cannot determine host name.
	Use ServerName directive to set it manually.</samp>"  What does
	this mean?</A>
   </LI>
   <LI><A HREF="#ws2_32dll">When I try to start Apache for Windows, I get
        a message like "<samp>Unable To Locate WS2_32.DLL...</samp>". What
	should I do?</A>
   </LI>
   <LI><A HREF="#WSADuplicateSocket">Apache for Windows does not start.
        Error log contains this message "<samp>[crit] (10045) The attempted
	operation is not supported for the type of object referenced: Parent:
	WSADuplicateSocket failed for socket ###</samp>".  What does this
	mean?</a>
   </LI>
   <li><a href="#err1067">When I try to start Apache on Windows, I get
        a message like &quot;<code>System error 1067 has occurred.  The process
	terminated unexpectedly.</code>&quot;  What does this mean?</a>
   </li>
  </OL>
 </LI>
d509 4
d514 2
d517 3
d521 2
d524 3
d528 10
a537 6
 
 
 
  
  
 
d540 1
a541 54
 <LI VALUE="5"><STRONG>Configuration Questions</STRONG>
  <OL>
   <LI><A HREF="#fdlim">Why can't I run more than &lt;<EM>n</EM>&gt;
        virtual hosts?</A>
   </LI>
   <LI><A HREF="#freebsd-setsize">Can I increase <SAMP>FD_SETSIZE</SAMP>
        on FreeBSD?</A>
   </LI>
   <LI><A HREF="#errordoc401">Why doesn't my <CODE>ErrorDocument
        401</CODE> work?</A>
   </LI>
   <LI><A HREF="#cookies1">Why does Apache send a cookie on every response?</A>
   </LI>
   <LI><A HREF="#cookies2">Why don't my cookies work, I even compiled in
        <SAMP>mod_cookies</SAMP>?</A>
   </LI>
   <LI><A HREF="#jdk1-and-http1.1">Why do my Java app[let]s give me plain text
        when I request an URL from an Apache server?</A>
   </LI>
   <LI><A HREF="#midi">How do I get Apache to send a MIDI file so the
        browser can play it?</A>
   </LI>
   <LI><A HREF="#addlog">How do I add browsers and referrers to my logs?</A>
   </LI>
   <LI><A HREF="#set-servername">Why does accessing directories only work
        when I include the trailing &quot;/&quot;
        (<EM>e.g.</EM>,&nbsp;<SAMP>http://foo.domain.com/~user/</SAMP>) but
        not when I omit it
        (<EM>e.g.</EM>,&nbsp;<SAMP>http://foo.domain.com/~user</SAMP>)?</A>
   </LI>
   <LI><A HREF="#no-info-directives">Why doesn't mod_info list any
        directives?</A>
   </LI>
   <LI><A HREF="#namevhost">I upgraded to Apache 1.3 and now my
        virtual hosts don't work!</A>
   </LI>
   <LI><A HREF="#redhat-htm">I'm using RedHat Linux and my .htm files are
        showing up as HTML source rather than being formatted!</A>
   </LI>
   <LI><A HREF="#htaccess-work">My <CODE>.htaccess</CODE> files are being
	ignored.</A>
   </LI>
   <LI><A HREF="#forbidden">Why do I get a 
        &quot;<SAMP>Forbidden</SAMP>&quot; message whenever I try to 
        access a particular directory?</A>
   <li><a href="#malfiles">Why do I get a 
        &quot;<samp>Forbidden/You don't have permission to access /
	on this server</samp>&quot; message whenever I try to 
        access my server?</a></li>
   <LI><A HREF="#ie-ignores-mime">Why do my files appear correctly in
        Internet Explorer, but show up as source or trigger a save
        window with Netscape?</A> 
  </OL>
 </LI>
a547 6
 
 
 
  
  
 
d549 1
d551 2
d554 4
a557 41
 <LI VALUE="6"><STRONG>Dynamic Content (CGI and SSI)</STRONG>
  <OL>
   <LI><A HREF="#CGIoutsideScriptAlias">How do I enable CGI execution
        in directories other than the ScriptAlias?</A>
   </LI>
   <LI><A HREF="#premature-script-headers">What does it mean when my
        CGIs fail with &quot;<SAMP>Premature end of script
        headers</SAMP>&quot;?</A>
   </LI>
   <LI><A HREF="#POSTnotallowed">Why do I keep getting &quot;Method Not 
        Allowed&quot; for form POST requests?</A>
   </LI>
   <LI><A HREF="#nph-scripts">How can I get my script's output without
        Apache buffering it?  Why doesn't my server push work?</A>
   </LI>
   <LI><A HREF="#cgi-spec">Where can I find the &quot;CGI
        specification&quot;?</A>
   </LI>
   <LI><A HREF="#fastcgi">Why isn't FastCGI included with Apache any
        more?</A>
   </LI>
   <LI><A HREF="#ssi-part-i">How do I enable SSI (parsed HTML)?</A>
   </LI>
   <LI><A HREF="#ssi-part-ii">Why don't my parsed files get cached?</A>
   </LI>
   <LI><A HREF="#ssi-part-iii">How can I have my script output parsed?</A>
   </LI>
   <LI><A HREF="#ssi-part-iv">SSIs don't work for VirtualHosts and/or 
        user home directories</A>
   </LI>
   <LI><A HREF="#errordocssi">How can I use <CODE>ErrorDocument</CODE>
        and SSI to simplify customized error messages?</A>
   </LI>
   <LI><A HREF="#remote-user-var">Why is the environment variable
        <SAMP>REMOTE_USER</SAMP> not set?</A>
   </LI>
   <LI><A HREF="#user-cgi">How do I allow each of my user directories
     to have a cgi-bin directory?</A>
   </LI>
  </OL>
 </LI>
d559 3
d563 2
d566 2
d569 3
d573 2
d576 2
a577 6
 
 
 
  
  
 
d579 11
d592 1
a592 28
 <LI VALUE="7"><STRONG>Authentication and Access Restrictions</STRONG>
  <OL>
   <LI><A HREF="#dnsauth">Why isn't restricting access by host or domain name
        working correctly?</A>
   </LI>
   <LI><A HREF="#user-authentication">How do I set up Apache to require
        a username and password to access certain documents?</A>
   </LI>
   <LI><A HREF="#remote-auth-only">How do I set up Apache to allow access
        to certain documents only if a site is either a local site
        <EM>or</EM> the user supplies a password and username?</A>
   </LI>
   <LI><A HREF="#authauthoritative">Why does my authentication give
        me a server error?</A>
   </LI>
   <LI><A HREF="#auth-on-same-machine">Do I have to keep the (mSQL)
        authentication information on the same machine?</A>
   </LI>
   <LI><A HREF="#msql-slow">Why is my mSQL authentication terribly slow?</A>
   </LI>
   <LI><A HREF="#passwdauth">Can I use my <SAMP>/etc/passwd</SAMP> file
        for Web page authentication?</A>
   </LI>
   <LI><A HREF="#prompted-twice">Why does Apache ask for my password
	twice before serving a file?</a>
   </LI>
  </OL>
 </LI>
a598 6
 
 
 
  
  
 
d601 1
d603 2
a604 28
 <LI VALUE="8"><STRONG>URL Rewriting</STRONG>
  <OL>
   <LI><A HREF="#rewrite-more-config">Where can I find mod_rewrite rulesets
        which already solve particular URL-related problems?</A>
   </LI>
   <LI><A HREF="#rewrite-article">Where can I find any published information
        about URL-manipulations and mod_rewrite?</A>
   </LI>
   <LI><A HREF="#rewrite-complexity">Why is mod_rewrite so difficult to learn
        and seems so complicated?</A>
   </LI>
   <LI><A HREF="#rewrite-dontwork">What can I do if my RewriteRules don't work
        as expected?</A>
   </LI>
   <LI><A HREF="#rewrite-prefixdocroot">Why don't some of my URLs get
        prefixed with DocumentRoot when using mod_rewrite?</A>
   </LI>
   <LI><A HREF="#rewrite-nocase">How can I make all my URLs case-insensitive
        with mod_rewrite?</A>
   </LI>
   <LI><A HREF="#rewrite-virthost">Why are RewriteRules in my VirtualHost
        parts ignored?</A>
   </LI>
   <LI><A HREF="#rewrite-envwhitespace">How can I use strings with whitespaces
        in RewriteRule's ENV flag?</A>
   </LI>
  </OL>
 </LI>
d606 3
d610 1
d612 3
d616 2
d619 2
d622 2
a623 6
 
 
 
  
  
 
d625 2
d628 2
d631 2
a632 29
 <LI VALUE="9"><STRONG>Features</STRONG>
  <OL>
   <LI><A HREF="#proxy">Does or will Apache act as a Proxy server?</A>
   </LI>
   <LI><A HREF="#multiviews">What are &quot;multiviews&quot;?</A>
   </LI>
   <LI><A HREF="#putsupport">Why can't I publish to my Apache server
        using PUT on Netscape Gold and other programs?</A>
   </LI>
   <LI><A HREF="#SSL-i">Why doesn't Apache include SSL?</A>
   </LI>
   <LI><A HREF="#footer">How can I attach a footer to my documents
        without using SSI?</A>
   </LI>
   <LI><A HREF="#search">Does Apache include a search engine?</A>
   </LI>
   <LI><A HREF="#rotate">How can I rotate my log files?</A>
   </LI>
   <LI><A HREF="#conditional-logging">How do I keep certain requests from
        appearing in my logs?</A>
   </LI>
   <li><a href="#dbinteg">Does Apache include any sort of database
        integration?</a>
   </li>
   <li><a href="#asp">Can I use Active Server Pages (ASP) with Apache?</a>
   </li>
   <li><a href="#java">Does Apache come with Java support?</a></li>
  </OL>
 </LI>
d634 2
d637 10
d649 2
d652 2
a653 1
</OL>
a654 1
<HR>
a655 1
  <H2>The Answers</H2>
a656 6
 
 
 
  
  
 
d662 3
a664 236
  <H3>A. Background</H3>
<OL>
 <LI><A NAME="what">
      <STRONG>What is Apache?</STRONG>
     </A>
  <p>The Apache httpd server</p>

<UL>
 <LI>is a powerful, flexible, HTTP/1.1 compliant web server
 <LI>implements the latest protocols, including HTTP/1.1 (RFC2616)
 <LI>is highly configurable and extensible with third-party modules
 <LI>can be customised by writing 'modules' using the Apache module API
 <LI>provides full source code and comes with an unrestrictive license
 <LI>runs on Windows NT/9x, Netware 5.x, OS/2, and most versions of Unix, 
     as well as several other operating systems
 <LI>is actively being developed
 <LI>encourages user feedback through new ideas, bug reports and patches
 <LI>implements many frequently requested features, including:<BR><BR>
  <DL>
    <DT>DBM databases for authentication</DT>
    <DD>allows you to easily set up password-protected pages with 
    enormous numbers of authorized users, without bogging down the server.
    <DT>Customized responses to errors and problems</DT>
     <DD>Allows you to set up files, or even CGI scripts, which are
      returned by the server in response
      to errors and problems, e.g. setup a script to intercept
      <STRONG>500 Server Error</STRONG>s and perform on-the-fly diagnostics for
      both users and yourself. </DD>
    <DT> Multiple DirectoryIndex directives </DT>
    <DD> Allows you to say <CODE>DirectoryIndex index.html
         index.cgi</CODE>, which instructs the server to either send
         back <CODE>index.html</CODE> or run <CODE>index.cgi</CODE>
         when a directory URL is requested, whichever it finds in the
          directory.
    <DT> Unlimited flexible URL rewriting and aliasing </DT>
    <DD> Apache has no fixed limit on the numbers of Aliases and
         Redirects which may be declared in the config files.  In addition,
	 a powerful rewriting engine can be used to solve most URL
         manipulation problems.
    <DT>Content negotiation</DT>
    <DD>i.e. the ability to automatically serve clients of varying
     sophistication and HTML level compliance, with documents which
     offer the best representation of information that the client is
     capable of accepting.</DD>
    <DT>Virtual Hosts</DT>
     <DD>A much requested feature, sometimes known as multi-homed servers.
      This allows the server to distinguish between requests made to
      different IP addresses or names (mapped to the same machine).  Apache
      also offers dynamically configurable mass-virtual hosting.
     </DD>
    <DT>Configurable Reliable Piped Logs</DT> 
     <DD>You can configure
     Apache to generate logs in the format that you want.  In addition, on
     most Unix architectures, Apache can send log files to a pipe, allowing
     for log rotation, hit filtering, real-time splitting of multiple vhosts
     into separate logs, and asynchronous DNS resolving on the fly.
  </DL>
</UL>

  <HR>
 </LI>

 <LI><A NAME="why">
      <STRONG>How and why was Apache created?</STRONG>
     </A>
  <P>
  The <A HREF="http://httpd.apache.org/ABOUT_APACHE.html">About Apache</A>
  document explains how the Apache project evolved from its beginnings
  as an outgrowth of the NCSA httpd project to its current status as
  one of the fastest, most efficient, and most functional web servers
  in existence.
  </P>
  <HR>
 </LI>

 <LI><A NAME="name">
      <STRONG>Why the name &quot;Apache&quot;?</STRONG>
      </A>
  <P>
  A cute name which stuck. Apache is &quot;<STRONG>A
  PA</STRONG>t<STRONG>CH</STRONG>y server&quot;.  It was
  based on some existing code and a series of &quot;patch files&quot;.
  </P>

  <P>
  For many developers it is also a reverent connotation to the Native
  American Indian tribe of Apache, <A
  HREF="http://www.indians.org/welker/apache.htm">well-known for their
  superior skills in warfare strategy and inexhaustible endurance</A>.
  Online information about the Apache Nation is tough to locate; we 
  suggest searching 
  <A HREF="http://www.google.com/search?q=Apache+Nation">Google</A>, 
  <A HREF="http://www.northernlight.com/nlquery.fcg?qr=Apache+Nation">Northernlight</A>, 
  <A HREF="http://infoseek.go.com/Titles?qt=Apache+Nation">Infoseek</A>, or 
  <A HREF="http://www.alltheweb.com/cgi-bin/asearch?query=Apache+Nation">AllTheWeb</A>.
  </P>
  <P>
  In addition, <A
  HREF="http://www.indian.org/">http://www.indian.org/</A> and <A
  HREF="http://www.nativeweb.com/">http://www.nativeweb.com/</A> are
  two excellent resources for Native American information.
  </P>
  <HR>
 </LI>

 <LI><A NAME="compare">
      <STRONG>OK, so how does Apache compare to other servers?</STRONG>
     </A>
  <P>
  For an independent assessment, see
  <A HREF="http://webcompare.internet.com/chart.html">Web Compare</A>'s
  comparison chart.
  </P>
  <P>
  Apache has been shown to be substantially faster, more stable, and
  more feature-full than many other web servers. Although certain
  commercial servers have claimed to surpass Apache's speed (it has
  not been demonstrated that any of these &quot;benchmarks&quot; are a
  good way of measuring WWW server speed at any rate), we feel that it
  is better to have a mostly-fast free server than an extremely-fast
  server that costs thousands of dollars. Apache is run on sites that
  get millions of hits per day, and they have experienced no
  performance difficulties.
  </P>
  <HR>
 </LI>

 <LI><A NAME="tested">
      <STRONG>How thoroughly tested is Apache?</STRONG>
     </A>
  <P>
  Apache is run on over 6 million Internet servers (as of February
  2000).  It has been tested thoroughly by both developers and
  users. The Apache Group maintains rigorous standards before
  releasing new versions of their server, and our server runs without
  a hitch on over one half of all WWW servers available on the
  Internet.  When bugs do show up, we release patches and new versions
  as soon as they are available.
  </P>
  <HR>
 </LI>

 <LI><A NAME="future">
      <STRONG>What are the future plans for Apache?</STRONG>
     </A>
  <P>
  <UL>
   <LI>to continue to be an "open source" no-charge-for-use HTTP server,
   </LI>
   <LI>to keep up with advances in HTTP protocol and web developments in
    general,
   </LI>
   <LI>to collect suggestions for fixes/improvements from its users,
   </LI>
   <LI>to respond to needs of large volume providers as well as
    occasional users.
   </LI>
  </UL>
  <P></P>
  <HR>
 </LI>

 <LI><A NAME="support">
      <STRONG>Whom do I contact for support?</STRONG>
     </A>
  <P>
  There is no official support for Apache. None of the developers want to
  be swamped by a flood of trivial questions that can be resolved elsewhere.
  Bug reports and suggestions should be sent <EM>via</EM>
  <A HREF="http://httpd.apache.org/bug_report.html">the bug report page</A>.
  Other questions should be directed to the
  <A HREF="news:comp.infosystems.www.servers.unix"
  >comp.infosystems.www.servers.unix</A> or <A HREF=
  "news:comp.infosystems.www.servers.ms-windows"
  >comp.infosystems.www.servers.ms-windows</A>
  newsgroup (as appropriate for the platform you use), where some of the 
  Apache team lurk, in the company of many other httpd gurus who 
  should be able to help.
  </P>
  <P>
  Commercial support for Apache is, however, available from a number
  of third parties.
  </P>
  <HR>
 </LI>

 <LI><A NAME="more">
      <STRONG>Is there any more information available on
      Apache?</STRONG>
     </A>
  <P>
  Indeed there is.  See the main
  <A HREF="http://httpd.apache.org/">Apache web site</A>.
  There is also a regular electronic publication called
  <A HREF="http://www.apacheweek.com/" REL="Help"><CITE>Apache Week</CITE></A>
  available.  Links to relevant <CITE>Apache Week</CITE> articles are
  included below where appropriate. There are also some 
  <A HREF="http://httpd.apache.org/info/apache_books.html"
  >Apache-specific books</A> available.
  </P>
  <HR>
 </LI>

 <LI><A NAME="where">
      <STRONG>Where can I get Apache?</STRONG>
     </A>
  <P>
  You can find out how to download the source for Apache at the
  project's
  <A HREF="http://httpd.apache.org/">main web page</A>.
  </P>
  <HR>
 </LI>

 <li><a name="logo">
      <b>May I use the Apache logo on my product or Web site?</b></a>
  <p>
  You may <b>NOT</b> use any original artwork from the Apache Software
  Foundation, nor make or use modified versions of such artwork, except
  under the following conditions:
  </p>
  <ul>
   <li>You may use the
    <a href="../../apache_pb.gif">'Powered by Apache' graphic</a>
    on a Web site that is being served by the Apache HTTP server software.</li>
   <li>You may use the aforementioned 'Powered by Apache' graphic or the
    <a href="http://www.apache.org/foundation/images/asf_logo.gif"
    >Apache Software Foundation logo</a> in product description and
    promotional material <b>IF and ONLY IF</b> such use can in no way
    be interpreted as anything other than an attribution.  Using the
    Apache name and artwork in a manner that implies endorsement of a
    product or service is <b>strictly forbidden</b>.</li>
  </ul>
  <hr>
 </li>
</OL>
d666 1
d668 4
d673 1
d675 3
a677 6
 
 
 
  
  
 
d679 2
d682 2
d685 2
d688 2
d691 3
d695 1
a695 2
  <H3>B. General Technical Questions</H3>
<OL>
d697 2
a698 327
 <LI><A NAME="what2do">
      <STRONG>&quot;Why can't I ...?  Why won't ... work?&quot;  What to
      do in case of problems</STRONG>
     </A>
  <P>
  If you are having trouble with your Apache server software, you should
  take the following steps:
  </P>
  <OL>
   <LI><STRONG>Check the errorlog!</STRONG>
    <P>
    Apache tries to be helpful when it encounters a problem.  In many
    cases, it will provide some details by writing one or messages to
    the server error log.  Sometimes this is enough for you to diagnose
    &amp; fix the problem yourself (such as file permissions or the like).
    The default location of the error log is
    <SAMP>/usr/local/apache/logs/error_log</SAMP>, but see the
    <A HREF="../mod/core.html#errorlog"><SAMP>ErrorLog</SAMP></A>
    directive in your config files for the location on your server.
    </P>
   </LI>
   <LI><STRONG>Check the
    <A HREF="http://httpd.apache.org/docs/misc/FAQ.html">FAQ</A>!</STRONG>
    <P>
    The latest version of the Apache Frequently-Asked Questions list can
    always be found at the main Apache web site.
    </P>
   </LI>
   <LI><STRONG>Check the Apache bug database</STRONG>
    <P>
    Most problems that get reported to The Apache Group are recorded in
    the
    <A HREF="http://bugs.apache.org/">bug database</A>.
    <EM><STRONG>Please</STRONG> check the existing reports, open
    <STRONG>and</STRONG> closed, before adding one.</EM>  If you find
    that your issue has already been reported, please <EM>don't</EM> add
    a &quot;me, too&quot; report.  If the original report isn't closed
    yet, we suggest that you check it periodically.  You might also
    consider contacting the original submitter, because there may be an
    email exchange going on about the issue that isn't getting recorded
    in the database.
    </P>
   </LI>
   <LI><STRONG>Ask in the <SAMP>comp.infosystems.www.servers.unix</SAMP>
    or <SAMP>comp.infosystems.www.servers.ms-windows</SAMP> USENET
    newsgroup (as appropriate for the platform you use).</STRONG>
    <P>
    A lot of common problems never make it to the bug database because
    there's already high Q&amp;A traffic about them in the
    <A HREF="news:comp.infosystems.www.servers.unix"
    ><SAMP>comp.infosystems.www.servers.unix</SAMP></A>
    newsgroup.  Many Apache users, and some of the developers, can be
    found roaming its virtual halls, so it is suggested that you seek
    wisdom there.  The chances are good that you'll get a faster answer
    there than from the bug database, even if you <EM>don't</EM> see
    your question already posted.
    </P>
   </LI>
   <LI><STRONG>If all else fails, report the problem in the bug
    database</STRONG>
    <P>
    If you've gone through those steps above that are appropriate and
    have obtained no relief, then please <EM>do</EM> let The Apache
    Group know about the problem by
    <A HREF="http://httpd.apache.org/bug_report.html">logging a bug report</A>.
    </P>
    <P>
    If your problem involves the server crashing and generating a core
    dump, please include a backtrace (if possible).  As an example,
    </P>
    <P>
    <DL>
     <DD><CODE># cd <EM>ServerRoot</EM><BR>
      # dbx httpd core<BR>
      (dbx) where</CODE>
     </DD>
    </DL>
    <P></P>
    <P>
    (Substitute the appropriate locations for your
    <SAMP>ServerRoot</SAMP> and your <SAMP>httpd</SAMP> and
    <SAMP>core</SAMP> files.  You may have to use <CODE>gdb</CODE>
    instead of <CODE>dbx</CODE>.)
    </P>
   </LI>
  </OL>
  <HR>
 </LI>

 <LI><A NAME="compatible">
      <STRONG>How compatible is Apache with my existing NCSA 1.3
      setup?</STRONG>
     </A>
  <P>
  Apache attempts to offer all the features and configuration options
  of NCSA httpd 1.3, as well as many of the additional features found in
  NCSA httpd 1.4 and NCSA httpd 1.5.
  </P>
  <P>
  NCSA httpd appears to be moving toward adding experimental features
  which are not generally required at the moment. Some of the experiments
  will succeed while others will inevitably be dropped. The Apache
  philosophy is to add what's needed as and when it is needed.
  </P>
  <P>
  Friendly interaction between Apache and NCSA developers should ensure
  that fundamental feature enhancements stay consistent between the two
  servers for the foreseeable future.
  </P>
  <HR>
 </LI>

 <LI><A NAME="year2000">
      <STRONG>Is Apache Year 2000 compliant?</STRONG>
     </A>
  <P>
  Yes, Apache is Year 2000 compliant.
  </P>
  <P>
  Apache internally never stores years as two digits.
  On the HTTP protocol level RFC1123-style addresses are generated
  which is the only format a HTTP/1.1-compliant server should
  generate. To be compatible with older applications Apache
  recognizes ANSI C's <CODE>asctime()</CODE> and
  RFC850-/RFC1036-style date formats, too.
  The <CODE>asctime()</CODE> format uses four-digit years,
  but the RFC850 and RFC1036 date formats only define a two-digit year.
  If Apache sees such a date with a value less than 70 it assumes that
  the century is <SAMP>20</SAMP> rather than <SAMP>19</SAMP>.
  </P>
  <P>
  Although Apache is Year 2000 compliant, you may still get problems
  if the underlying OS has problems with dates past year 2000
  (<EM>e.g.</EM>, OS calls which accept or return year numbers).
  Most (UNIX) systems store dates internally as signed 32-bit integers
  which contain the number of seconds since 1<SUP>st</SUP> January 1970, so
  the magic boundary to worry about is the year 2038 and not 2000.
  But modern operating systems shouldn't cause any trouble
  at all.
  </P>
  <P>
  Users of Apache 1.2.x should upgrade to a current version of Apache 1.3
  (see <A HREF="../new_features_1_3.html#misc">year-2000 improvements in
  Apache 1.3</A> for details).
  </P>
  <p>
  The Apache HTTP Server project is an open-source software product of
  the Apache Software Foundation.  The project and the Foundation
  <b>cannot</b> offer legal assurances regarding any suitability
  of the software for your application.  There are several commercial
  Apache support organizations and derivative server products available
  that may be able to stand behind the software and provide you with
  any assurances you may require.  You may find links to some of these
  vendors at
  <samp>&lt;<a href="http://www.apache.org/info/support.cgi"
            >http://www.apache.org/info/support.cgi</a>&gt;</samp>.
  </p>
  <p>
  The Apache HTTP server software is distributed with the following
  disclaimer, found in the software license:
  </p>
  <pre>
   THIS SOFTWARE IS PROVIDED BY THE APACHE GROUP ``AS IS'' AND ANY
   EXPRESSED OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
   PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE APACHE GROUP OR
   ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
   SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
   NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
   LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
   HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
   STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
   ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
   OF THE POSSIBILITY OF SUCH DAMAGE.
  </pre>
  <HR>
 </LI>

  <LI><A NAME="submit_patch">
       <STRONG>How do I submit a patch to the Apache Group?</STRONG></A>
   <P>
   The Apache Group encourages patches from outside developers. There
   are 2 main "types" of patches: small bugfixes and general
   improvements. Bugfixes should be submitting using the Apache <A
   HREF="http://httpd.apache.org/bug_report.html">bug report page</A>.
   Improvements, modifications, and additions should follow the
   instructions below.
   </P>
   <P>
   In general, the first course of action is to be a member of the
   <SAMP>new-httpd@@apache.org</SAMP> mailing list. This indicates to
   the Group that you are closely following the latest Apache
   developments. Your patch file should be generated using either
   '<CODE>diff&nbsp;-c</CODE>' or '<CODE>diff&nbsp;-u</CODE>' against
   the latest CVS tree. To submit your patch, send email to
   <SAMP>new-httpd@@apache.org</SAMP> with a <SAMP>Subject:</SAMP> line
   that starts with <SAMP>[PATCH]</SAMP> and includes a general
   description of the patch. In the body of the message, the patch
   should be clearly described and then included at the end of the
   message.  If the patch-file is long, you can note a URL to the file
   instead of the file itself. Use of MIME enclosures/attachments
   should be avoided.
   </P>
   <P>
   Be prepared to respond to any questions about your patches and
   possibly defend your code. If your patch results in a lot of
   discussion, you may be asked to submit an updated patch that
   incorporate all changes and suggestions.
   </P>
   <HR>
  </LI>

  <LI><A NAME="domination"><STRONG>Why has Apache stolen my favourite site's
       Internet address?</STRONG></A>
   <P>
   The simple answer is: "It hasn't."  This misconception is usually
   caused by the site in question having migrated to the Apache Web
   server software, but not having migrated the site's content yet.  When
   Apache is installed, the default page that gets installed tells the
   Webmaster the installation was successful.  The expectation is that
   this default page will be replaced with the site's real content.
   If it doesn't, complain to the Webmaster, not to the Apache project --
   we just make the software and aren't responsible for what people
   do (or don't do) with it.
   </P>
   <HR>
  </LI>

  <LI><A NAME="apspam"><STRONG>Why am I getting spam mail from the
       Apache site?</STRONG></A>
   <P>
   The short answer is: "You aren't."  Usually when someone thinks the
   Apache site is originating spam, it's because they've traced the
   spam to a Web site, and the Web site says it's using Apache.  See the
   <A HREF="#domination">previous FAQ entry</A> for more details on this
   phenomenon.
   </P>
   <P>
   No marketing spam originates from the Apache site.  The only mail
   that comes from the site goes only to addresses that have been
   <EM>requested</EM> to receive the mail.
   </P>
   <HR>
  </LI>

  <LI><A NAME="redist"><STRONG>May I include the Apache software on a
       CD or other package I'm distributing?</STRONG></A>
   <P>
   The detailed answer to this question can be found in the
   Apache license, which is included in the Apache distribution in
   the file <CODE>LICENSE</CODE>.  You can also find it on the Web at
   <SAMP>&lt;<A HREF="http://www.apache.org/LICENSE.txt"
             >http://www.apache.org/LICENSE.txt</A>&gt;</SAMP>.
   </P>
   <HR>
  </LI>

 <LI><A NAME="zoom">
      <STRONG>What's the best hardware/operating system/... How do
      I get the most out of my Apache Web server?</STRONG>
     </A>
  <P>
  Check out Dean Gaudet's
  <A HREF="perf-tuning.html">performance tuning page</A>.
  </P>
  <HR>
 </LI>

 <LI><A NAME="regex">
      <STRONG>What are "regular expressions"?</STRONG></A>
   <P>
   Regular expressions are a way of describing a pattern - for example, "all 
   the words that begin with the letter A" or "every 10-digit phone number" 
   or even "Every sentence with two commas in it, and no capital letter Q".  
   Regular expressions (aka "regex"s) are useful in Apache because they 
   let you apply certain attributes against collections of files or resources 
   in very flexible ways - for example, all .gif and .jpg files under
   any "images" directory could be written as /\/images\/.*(jpg|gif)$/.
   </P>
   <P>
   The best overview around is probably the one which comes with Perl.
   We implement a simple subset of Perl's regex support, but it's
   still a good way to learn what they mean.  You can start by going
   to the <A
   HREF="http://www.perl.com/CPAN-local/doc/manual/html/pod/perlre.html#Regular_Expressions"
   >CPAN page on regular expressions</A>, and branching out from
   there.
   </P>
  <HR>
 </LI>

 <li><a name="binaries">
      <b>Why isn't there a binary for my platform?</b></a>
   <p>
   The developers make sure that the software builds and works
   correctly on the platforms available to them; this does
   <i>not</i> necessarily mean that <i>your</i> platform
   is one of them.  In addition, the Apache HTTP server project
   is primarily source oriented, meaning that distributing
   valid and buildable source code is the purpose of a release,
   not making sure that there is a binary package for all of the
   supported platforms.
   </p>
   <p>
   If you don't see a kit for your platform listed in the
   binary distribution area
   (&lt;URL:<a href="http://httpd.apache.org/dist/binaries/"
            >http://httpd.apache.org/dist/binaries/</a>&gt;),
   it means either that the platform isn't available to any of
   the developers, or that they just haven't gotten around to
   preparing a binary for it.  As this is a voluntary project,
   they are under no obligation to do so.  Users are encouraged
   and expected to build the software themselves.
   </p>
   <p>
   The sole exception to these practices is the Windows package.
   Unlike most Unix and Unix-like platforms, Windows systems
   do not come with a bundled software development environment,
   so we <i>do</i> prepare binary kits for Windows when we make
   a release.  Again, however, it's a voluntary thing and only
   a limited number of the developers have the capability to build
   the InstallShield package, so the Windows release may lag
   somewhat behind the source release.  This lag should be
   no more than a few days at most.
   </p>
  <hr>
 </li>
d700 5
a704 1
</OL>
d706 2
d709 3
d713 1
d715 6
a720 6
 
 
 
  
  
 
d722 1
d724 5
d730 2
d733 5
d739 1
d741 5
a745 2
  <H3>C. Building Apache</H3>
<OL>
d747 1
a747 161
 <LI><A NAME="bind8.1">
      <STRONG>Why do I get an error about an undefined reference to
      &quot;<SAMP>__inet_ntoa</SAMP>&quot; or other
      <SAMP>__inet_*</SAMP> symbols?</STRONG>
     </A>
  <P>
  If you have installed <A HREF="http://www.isc.org/bind.html">BIND-8</A>
  then this is normally due to a conflict between your include files
  and your libraries.  BIND-8 installs its include files and libraries
  <CODE>/usr/local/include/</CODE> and <CODE>/usr/local/lib/</CODE>, while
  the resolver that comes with your system is probably installed in
  <CODE>/usr/include/</CODE> and <CODE>/usr/lib/</CODE>.  If
  your system uses the header files in <CODE>/usr/local/include/</CODE>
  before those in <CODE>/usr/include/</CODE> but you do not use the new
  resolver library, then the two versions will conflict.
  </P>
  <P>
  To resolve this, you can either make sure you use the include files
  and libraries that came with your system or make sure to use the
  new include files and libraries.  Adding <CODE>-lbind</CODE> to the
  <CODE>EXTRA_LDFLAGS</CODE> line in your <SAMP>Configuration</SAMP>
  file, then re-running <SAMP>Configure</SAMP>, should resolve the
  problem.  (Apache versions 1.2.* and earlier use
  <CODE>EXTRA_LFLAGS</CODE> instead.)
  </P>
  <P>
  <STRONG>Note:</STRONG>As of BIND 8.1.1, the bind libraries and files are
  installed under <SAMP>/usr/local/bind</SAMP> by default, so you
  should not run into this problem.  Should you want to use the bind
  resolvers you'll have to add the following to the respective lines:
  </P>
  <P>
  <DL>
   <DD><CODE>EXTRA_CFLAGS=-I/usr/local/bind/include
    <BR>
    EXTRA_LDFLAGS=-L/usr/local/bind/lib
    <BR>
    EXTRA_LIBS=-lbind</CODE>
   </DD>
  </DL>
  <P></P>
  <HR>
 </LI>

 <LI><A NAME="cantbuild">
      <STRONG>Why won't Apache compile with my system's
      <SAMP>cc</SAMP>?</STRONG>
     </A>
  <P>
  If the server won't compile on your system, it is probably due to one
  of the following causes:
  </P>
  <UL>
   <LI><STRONG>The <SAMP>Configure</SAMP> script doesn't recognize your system
    environment.</STRONG>
    <BR>
    This might be either because it's completely unknown or because
    the specific environment (include files, OS version, <EM>et
    cetera</EM>) isn't explicitly handled.  If this happens, you may
    need to port the server to your OS yourself.
   </LI>
   <LI><STRONG>Your system's C compiler is garbage.</STRONG>
    <BR>
    Some operating systems include a default C compiler that is either
    not ANSI C-compliant or suffers from other deficiencies.  The usual
    recommendation in cases like this is to acquire, install, and use
    <SAMP>gcc</SAMP>.
   </LI>
   <LI><STRONG>Your <SAMP>include</SAMP> files may be confused.</STRONG>
    <BR>
    In some cases, we have found that a compiler installation or system
    upgrade has left the C header files in an inconsistent state.  Make
    sure that your include directory tree is in sync with the compiler and
    the operating system.
   </LI>
   <LI><STRONG>Your operating system or compiler may be out of
    revision.</STRONG>
    <BR>
    Software vendors (including those that develop operating systems)
    issue new releases for a reason; sometimes to add functionality, but
    more often to fix bugs that have been discovered.  Try upgrading
    your compiler and/or your operating system.
   </LI>
  </UL>
  <P>
  The Apache Group tests the ability to build the server on many
  different platforms.  Unfortunately, we can't test all of the OS
  platforms there are.  If you have verified that none of the above
  issues is the cause of your problem, and it hasn't been reported
  before, please submit a
  <A HREF="http://httpd.apache.org/bug_report.html">problem report</A>.
  Be sure to include <EM>complete</EM> details, such as the compiler
  &amp; OS versions and exact error messages.
  </P>
  <HR>
 </LI>

 <LI><A NAME="linuxiovec">
      <STRONG>Why do I get complaints about redefinition
      of &quot;<CODE>struct iovec</CODE>&quot; when
      compiling under Linux?</STRONG>
     </A>
  <P>
  This is a conflict between your C library includes and your kernel
  includes.  You need to make sure that the versions of both are matched
  properly.  There are two workarounds, either one will solve the problem:
  </P>
  <P>
  <UL>
   <LI>Remove the definition of <CODE>struct iovec</CODE> from your C
    library includes.  It is located in <CODE>/usr/include/sys/uio.h</CODE>.
    <STRONG>Or,</STRONG>
   </LI>
   <LI>Add  <CODE>-DNO_WRITEV</CODE> to the <CODE>EXTRA_CFLAGS</CODE>
    line in your <SAMP>Configuration</SAMP> and reconfigure/rebuild.
    This hurts performance and should only be used as a last resort.
   </LI>
  </UL>
  <P></P>
  <HR>
 </LI>

 <LI><A NAME="broken-gcc"><STRONG>I'm using gcc and I get some
	compilation errors, what is wrong?</STRONG></A>
    <P>
    GCC parses your system header files and produces a modified subset which
    it uses for compiling.  This behaviour ties GCC tightly to the version
    of your operating system.  So, for example, if you were running IRIX 5.3
    when you built GCC and then upgrade to IRIX 6.2 later, you will have to
    rebuild GCC.  Similarly for Solaris 2.4, 2.5, or 2.5.1 when you upgrade
    to 2.6.  Sometimes you can type "gcc -v" and it will tell you the version
    of the operating system it was built against.
    </P>
    <P>
    If you fail to do this, then it is very likely that Apache will fail
    to build.  One of the most common errors is with <CODE>readv</CODE>,
    <CODE>writev</CODE>, or <CODE>uio.h</CODE>.  This is <STRONG>not</STRONG> a
    bug with Apache.  You will need to re-install GCC.
    </P>
   <HR>
  </LI>

 <LI><A NAME="glibc-crypt">
      <STRONG>I'm using RedHat Linux 5.0, or some other 
      <SAMP>glibc</SAMP>-based Linux system, and I get errors with the
      <CODE>crypt</CODE> function when I attempt to build Apache 1.2.</STRONG>
     </A>

  <P>
  <SAMP>glibc</SAMP> puts the <CODE>crypt</CODE> function into a separate
  library.  Edit your <CODE>src/Configuration</CODE> file and set this:
  </P>
  <DL>
   <DD><CODE>EXTRA_LIBS=-lcrypt</CODE>
   </DD>
  </DL>
  <P>
  Then re-run <SAMP>src/Configure</SAMP> and re-execute the make.
  </P>
  <HR>
 </LI>
d749 6
a754 1
</OL>
d756 1
d758 11
d770 3
d774 9
a782 6
 
 
 
  
  
 
d784 3
d788 3
d792 14
d807 3
d811 3
d815 12
a826 2
  <H3>D. Error Log Messages and Problems Starting Apache</H3>
<OL>
d828 3
a830 333
 <LI><A NAME="setgid">
      <STRONG>Why do I get &quot;<SAMP>setgid: Invalid
      argument</SAMP>&quot; at startup?</STRONG>
     </A>
  <P>
  Your
  <A HREF="../mod/core.html#group"><SAMP>Group</SAMP></A>
  directive (probably in <SAMP>conf/httpd.conf</SAMP>) needs to name a
  group that actually exists in the <SAMP>/etc/group</SAMP> file (or
  your system's equivalent).  This problem is also frequently seen when
  a negative number is used in the <CODE>Group</CODE> directive
  (<EM>e.g.</EM>, "<CODE>Group&nbsp;#-1</CODE>").  Using a group name
  -- not group number -- found in your system's group database should
  solve this problem in all cases.
  </P>
  <HR>
 </LI>

 <LI><A NAME="nodelay">
      <STRONG>Why am I getting &quot;<SAMP>httpd: could not set socket
      option TCP_NODELAY</SAMP>&quot; in my error log?</STRONG>
     </A>
  <P>
  This message almost always indicates that the client disconnected
  before Apache reached the point of calling <CODE>setsockopt()</CODE>
  for the connection.  It shouldn't occur for more than about 1% of the
  requests your server handles, and it's advisory only in any case.
  </P>
  <HR>
 </LI>

 <LI><A NAME="peerreset">
      <STRONG>Why am I getting &quot;<SAMP>connection reset by
      peer</SAMP>&quot; in my error log?</STRONG>
     </A>
  <P>
  This is a normal message and nothing about which to be alarmed.  It simply
  means that the client canceled the connection before it had been
  completely set up - such as by the end-user pressing the &quot;Stop&quot;
  button.  People's patience being what it is, sites with response-time
  problems or slow network links may experiences this more than
  high-capacity ones or those with large pipes to the network.
  </P>
  <HR>
 </LI>

 <LI><A NAME="wheres-the-dump">
      <STRONG>The errorlog says Apache dumped core, but where's the dump
      file?</STRONG>
     </A>
  <P>
  In Apache version 1.2, the error log message
  about dumped core includes the directory where the dump file should be
  located.  However, many Unixes do not allow a process that has
  called <CODE>setuid()</CODE> to dump core for security reasons;
  the typical Apache setup has the server started as root to bind to
  port 80, after which it changes UIDs to a non-privileged user to
  serve requests.
  </P>
  <P>
  Dealing with this is extremely operating system-specific, and may
  require rebuilding your system kernel.  Consult your operating system
  documentation or vendor for more information about whether your system
  does this and how to bypass it.  If there <EM>is</EM> a documented way
  of bypassing it, it is recommended that you bypass it only for the
  <SAMP>httpd</SAMP> server process if possible.
  </P>
  <P>
  The canonical location for Apache's core-dump files is the
  <A HREF="../mod/core.html#serverroot">ServerRoot</A>
  directory. As of Apache version 1.3, the location can be set <EM>via</EM>
  the
  <A HREF="../mod/core.html#coredumpdirectory"
  ><SAMP>CoreDumpDirectory</SAMP></A>
  directive to a different directory. Make sure that this directory is
  writable by the user the server runs as (as opposed to the user the server
  is <EM>started</EM> as).
  </P>
  <HR>
 </LI>

 <LI><A NAME="linux-shmget">
      <STRONG>When I run it under Linux I get &quot;shmget:
      function not found&quot;, what should I do?</STRONG>
     </A>
  <P>
  Your kernel has been built without SysV IPC support.  You will have
  to rebuild the kernel with that support enabled (it's under the
  &quot;General Setup&quot; submenu).  Documentation for kernel
  building is beyond the scope of this FAQ; you should consult the <A
  HREF="http://www.redhat.com/mirrors/LDP/HOWTO/Kernel-HOWTO.html">Kernel
  HOWTO</A>, or the documentation provided with your distribution, or
  a <A HREF="http://www.redhat.com/mirrors/LDP/HOWTO/META-FAQ.html">Linux
  newsgroup/mailing list</A>.  As a last-resort workaround, you can
  comment out the <CODE>#define&nbsp;USE_SHMGET_SCOREBOARD</CODE>
  definition in the <SAMP>LINUX</SAMP> section of
  <SAMP>src/conf.h</SAMP> and rebuild the server (prior to 1.3b4,
  simply removing <CODE>#define&nbsp;HAVE_SHMGET</CODE> would have
  sufficed).  This will produce a server which is slower and less
  reliable.
  </P>
  <HR>
 </LI>

 <LI><A NAME="nfslocking">
      <STRONG>Server hangs, or fails to start, and/or error log
      fills with &quot;<SAMP>fcntl: F_SETLKW: No record locks
      available</SAMP>&quot; or similar messages</STRONG>
     </A>

  <P>
  These are symptoms of a fine locking problem, which usually means that
  the server is trying to use a synchronization file on an NFS filesystem.
  </P>
  <P>
  Because of its parallel-operation model, the Apache Web server needs to
  provide some form of synchronization when accessing certain resources.
  One of these synchronization methods involves taking out locks on a file,
  which means that the filesystem whereon the lockfile resides must support
  locking.  In many cases this means it <EM>can't</EM> be kept on an
  NFS-mounted filesystem.
  </P>
  <P>
  To cause the Web server to work around the NFS locking limitations, include
  a line such as the following in your server configuration files:
  </P>
  <DL>
   <DD><CODE>LockFile /var/run/apache-lock</CODE>
   </DD>
  </DL>
  <P>
  The directory should not be generally writable (<EM>e.g.</EM>, don't use
  <SAMP>/var/tmp</SAMP>).
  See the <A HREF="../mod/core.html#lockfile"><SAMP>LockFile</SAMP></A>
  documentation for more information.
  </P>
  <HR>
 </LI>

 <LI><A NAME="aixccbug"><STRONG>Why am I getting "<SAMP>Expected
       &lt;/Directory&gt; but saw &lt;/Directory&gt;</SAMP>" when
       I try to start Apache?</STRONG></A>
   <P>
   This is a known problem with certain versions of the AIX C compiler.
   IBM are working on a solution, and the issue is being tracked by
   <A HREF="http://bugs.apache.org/index/full/2312">problem report #2312</A>.
   </P>
   <HR>
 </LI>

 <LI><A NAME="redhat">
      <STRONG>I'm using RedHat Linux and I have problems with httpd
      dying randomly or not restarting properly</STRONG>
     </A>

  <P>
  RedHat Linux versions 4.x (and possibly earlier) RPMs contain
  various nasty scripts which do not stop or restart Apache properly.
  These can affect you even if you're not running the RedHat supplied
  RPMs.
  </P>
  <P>
  If you're using the default install then you're probably running
  Apache 1.1.3, which is outdated.  From RedHat's ftp site you can
  pick up a more recent RPM for Apache 1.2.x.  This will solve one of
  the problems.
  </P>
  <P>
  If you're using a custom built Apache rather than the RedHat RPMs
  then you should <CODE>rpm -e apache</CODE>.  In particular you want
  the mildly broken <CODE>/etc/logrotate.d/apache</CODE> script to be
  removed, and you want the broken <CODE>/etc/rc.d/init.d/httpd</CODE>
  (or <CODE>httpd.init</CODE>) script to be removed.  The latter is
  actually fixed by the apache-1.2.5 RPMs but if you're building your
  own Apache then you probably don't want the RedHat files.
  </P>
  <P>
  We can't stress enough how important it is for folks, <EM>especially
  vendors</EM> to follow the <A HREF="../stopping.html">stopping Apache
  directions</A> given in our documentation.  In RedHat's defense,
  the broken scripts were necessary with Apache 1.1.x because the
  Linux support in 1.1.x was very poor, and there were various race
  conditions on all platforms.  None of this should be necessary with
  Apache 1.2 and later.
  </P>
  <HR>
 </LI>

 <LI><A NAME="stopping">
      <STRONG>I upgraded from an Apache version earlier
      than 1.2.0 and suddenly I have problems with Apache dying randomly
      or not restarting properly</STRONG>
     </A>

  <P>
  You should read <A HREF="#redhat">the previous note</A> about
  problems with RedHat installations.  It is entirely likely that your
  installation has start/stop/restart scripts which were built for
  an earlier version of Apache.  Versions earlier than 1.2.0 had
  various race conditions that made it necessary to use
  <CODE>kill -9</CODE> at times to take out all the httpd servers.
  But that should not be necessary any longer.  You should follow
  the <A HREF="../stopping.html">directions on how to stop
  and restart Apache</A>.
  </P>
  <P>As of Apache 1.3 there is a script
  <CODE>src/support/apachectl</CODE> which, after a bit of
  customization, is suitable for starting, stopping, and restarting
  your server.
  </P>
  <HR>
 </LI>

 <LI><A name="setservername">
       <b>When I try to start Apache from a DOS
       window, I get a message like "<samp>Cannot determine host name.
       Use ServerName directive to set it manually.</samp>"  What does
       this mean?</b></A>

  <p>
  It means what it says; the Apache software can't determine the
  hostname of your system.  Edit your <samp>conf\httpd.conf</samp>
  file, look for the string "ServerName", and make sure there's an
  uncommented directive such as
  </p>
  <dl>
   <dd><code>ServerName localhost</code></dd>
  </dl>
  <p>
  or
  </p>
  <dl>
   <dd><code>ServerName www.foo.com</code></dd>
  </dl>
  <p>
  in the file.  Correct it if there one there with wrong information, or
  add one if you don't already have one.
  </p>
  <p>
  Also, make sure that your Windows system has DNS enabled.  See the TCP/IP
  setup component of the Networking or Internet Options control panel.
  </p>
  <p>
  After verifying that DNS is enabled and that you have a valid hostname
  in your <samp>ServerName</samp> directive, try to start the server
  again.
  </p>
  <hr>
 </LI>
 <LI><A name="ws2_32dll">
       <b>When I try to start Apache for Windows, I get a message
	like "<samp>Unable To Locate WS2_32.DLL...</samp>". What should I do?</b></A>
  <p>
  Short answer: You need to install Winsock 2, available from
  <A HREF="http://www.microsoft.com/windows95/downloads/">http://www.microsoft.com/windows95/downloads/</A>
  </p>
  <p>
  Detailed answer: Prior to version 1.3.9, Apache for Windows used Winsock
  1.1. Beginning with version 1.3.9, Apache began using Winsock 2 features
  (specifically, WSADuplicateSocket()).
  WS2_32.DLL implements the Winsock 2 API. Winsock 2 ships with Windows
  NT 4.0 and Windows 98.  Some of the earlier releases of Windows 95 did
  not include Winsock 2.
  </p>
  <hr>
 </LI>
 <LI><A name="WSADuplicateSocket">
      <b>Apache for Windows does not start. Error log contains this message:
      "<samp>[crit] (10045) The attempted operation is not supported for
      the type of object referenced: Parent: WSADuplicateSocket failed for
      socket ###</samp>".  What does this mean?</b></A>
  <p>
  We have seen this problem when Apache is run on systems along with
  Virtual Private Networking clients like Aventail Connect. Aventail Connect
  is a Layered Service Provider (LSP) that inserts itself, as a "shim,"
  between the Winsock 2 API and Window's native Winsock 2 implementation.
  The Aventail Connect shim does not implement WSADuplicateSocket, which is
  the cause of the failure.
  </p>
  <p>
  The shim is not unloaded when Aventail Connect is shut down. Once
  observed, the problem persists until the shim is either explicitly
  unloaded or the machine is rebooted. Instructions for temporarily
  removing the Aventail Connect V3.x shim can be found here:
  "<a href="http://support.aventail.com/akb/article00386.html"
   >How to Remove Aventail Connect v3.x from the LSP Order for Testing
    Purposes</a>."
  </p>
  <p>
  Another potential solution (not tested) is to add <code>apache.exe</code>
  to the Aventail "Connect Exclusion List".  See this link for details:
  "<a href="http://support.aventail.com/akb/article00586.html"
   >How to Add an Application to Aventail Connect's Application Exclusion
    List</a>."
  </p>
  <p>
  Apache is affected in a similar way by <em>any</em> firewall program that
  isn't correctly configured.  Assure you exclude your Apache server ports
  (usually port 80) from the list of ports to block.  Refer to your firewall
  program's documentation for the how-to.
  </p>
  <hr>
 </LI>
 <li><a name="err1067"><b>When I try to start Apache on Windows, I get
      a message like &quot;<code>System error 1067 has occurred.  The process
      terminated unexpectedly</code>.&quot;  What does this mean?</b></a>
  <p>
  This message means that the Web server was unable to start correctly
  for one reason or another.  To find out why, execute the following
  commands in a DOS window:
  </p>
  <pre>
    c:
    cd "\Program Files\Apache Group\Apache"
    apache
  </pre>
  <p>
  (If you don't get the prompt back, hit Control-C to cause Apache to
  exit.)
  </p>
  <p>
  The error you see will probably be one of those preceding this question
  in the FAQ.
  </p>
  <p>
  As of Apache 1.3.14, first check the Windows NT Event Log for
  Application errors using the Windows NT/2000 Event Viewer program.
  Any errors that occur prior to opening the Apache error log will
  be stored here, if Apache is run as a Service on NT or 2000.  As with
  any error, also check your Apache error log.
  <hr>
 </li>
</OL>
d832 10
d843 3
d847 3
d851 2
a852 6
 
 
 
  
  
 
d854 2
d857 5
d863 3
d867 15
d883 4
d888 3
a890 2
  <H3>E. Configuration Questions</H3>
<OL>
d892 11
a902 511
 <LI><A NAME="fdlim">
      <STRONG>Why can't I run more than &lt;<EM>n</EM>&gt;
      virtual hosts?</STRONG>
     </A>
  <P>
  You are probably running into resource limitations in your
  operating system.  The most common limitation is the
  <EM>per</EM>-process limit on <STRONG>file descriptors</STRONG>,
  which is almost always the cause of problems seen when adding
  virtual hosts.  Apache often does not give an intuitive error
  message because it is normally some library routine (such as
  <CODE>gethostbyname()</CODE>) which needs file descriptors and
  doesn't complain intelligibly when it can't get them.
  </P>
  <P>
  Each log file requires a file descriptor, which means that if you are
  using separate access and error logs for each virtual host, each
  virtual host needs two file descriptors.  Each
  <A HREF="../mod/core.html#listen"><SAMP>Listen</SAMP></A>
  directive also needs a file descriptor.
  </P>
  <P>
  Typical values for &lt;<EM>n</EM>&gt; that we've seen are in
  the neighborhood of 128 or 250.  When the server bumps into the file
  descriptor limit, it may dump core with a SIGSEGV, it might just
  hang, or it may limp along and you'll see (possibly meaningful) errors
  in the error log.  One common problem that occurs when you run into
  a file descriptor limit is that CGI scripts stop being executed
  properly.
  </P>
  <P>
  As to what you can do about this:
  </P>
  <OL>
   <LI>Reduce the number of
    <A HREF="../mod/core.html#listen"><SAMP>Listen</SAMP></A>
    directives.  If there are no other servers running on the machine
    on the same port then you normally don't
    need any Listen directives at all.  By default Apache listens to
    all addresses on port 80.
   </LI>
   <LI>Reduce the number of log files.  You can use
    <A HREF="../mod/mod_log_config.html"><SAMP>mod_log_config</SAMP></A>
    to log all requests to a single log file while including the name
    of the virtual host in the log file.  You can then write a
    script to split the logfile into separate files later if
    necessary.  Such a script is provided with the Apache 1.3 distribution
    in the <SAMP>src/support/split-logfile</SAMP> file.
   </LI>
   <LI>Increase the number of file descriptors available to the server
    (see your system's documentation on the <CODE>limit</CODE> or
    <CODE>ulimit</CODE> commands).  For some systems, information on
    how to do this is available in the
    <A HREF="perf.html">performance hints</A> page.  There is a specific
    note for <A HREF="#freebsd-setsize">FreeBSD</A> below.
    <P>
    For Windows 95, try modifying your <SAMP>C:\CONFIG.SYS</SAMP> file to
    include a line like
    </P>
    <DL>
     <DD><CODE>FILES=300</CODE>
     </DD>
    </DL>
    <P>
    Remember that you'll need to reboot your Windows 95 system in order
    for the new value to take effect.
    </P>
   </LI>
   <LI>&quot;Don't do that&quot; - try to run with fewer virtual hosts
   </LI>
   <LI>Spread your operation across multiple server processes (using
    <A HREF="../mod/core.html#listen"><SAMP>Listen</SAMP></A>
    for example, but see the first point) and/or ports.
   </LI>
  </OL>
  <P>
  Since this is an operating-system limitation, there's not much else
  available in the way of solutions.
  </P>
  <P>
  As of 1.2.1 we have made attempts to work around various limitations
  involving running with many descriptors.
  <A HREF="descriptors.html">More information is available.</A>
  </P>
  <HR>
 </LI>

 <LI><A NAME="freebsd-setsize">
      <STRONG>Can I increase <SAMP>FD_SETSIZE</SAMP> on FreeBSD?</STRONG>
     </A>
  <P>
  On versions of FreeBSD before 3.0, the <SAMP>FD_SETSIZE</SAMP> define 
  defaults to 256.  This means that you will have trouble usefully using
  more than 256 file descriptors in Apache.  This can be increased, but
  doing so can be tricky.
  </P>
  <P>
  If you are using a version prior to 2.2, you need to recompile your
  kernel with a larger <SAMP>FD_SETSIZE</SAMP>.  This can be done by adding a 
  line such as:
  </P>
  <DL>
   <DD><CODE>options FD_SETSIZE <EM>nnn</EM></CODE>
   </DD>
  </DL>
  <P>
  to your kernel config file.  Starting at version 2.2, this is no
  longer necessary.
  </P>
  <P>
  If you are using a version of 2.1-stable from after 1997/03/10 or
  2.2 or 3.0-current from before 1997/06/28, there is a limit in
  the resolver library that prevents it from using more file descriptors
  than what <SAMP>FD_SETSIZE</SAMP> is set to when libc is compiled.  To
  increase this, you have to recompile libc with a higher
  <SAMP>FD_SETSIZE</SAMP>.
  </P>
  <P>
  In FreeBSD 3.0, the default <SAMP>FD_SETSIZE</SAMP> has been increased to
  1024 and the above limitation in the resolver library
  has been removed.
  </P>
  <P>
  After you deal with the appropriate changes above, you can increase 
  the setting of <SAMP>FD_SETSIZE</SAMP> at Apache compilation time 
  by adding &quot;<SAMP>-DFD_SETSIZE=<EM>nnn</EM></SAMP>&quot; to the
  <SAMP>EXTRA_CFLAGS</SAMP> line in your <SAMP>Configuration</SAMP>
  file.
  </P>
  <HR>
 </LI>

 <LI><A NAME="errordoc401">
      <STRONG>Why doesn't my <CODE>ErrorDocument 401</CODE> work?</STRONG>
     </A>
  <P>
  You need to use it with a URL in the form
  &quot;<SAMP>/foo/bar</SAMP>&quot; and not one with a method and
  hostname such as &quot;<SAMP>http://host/foo/bar</SAMP>&quot;.  See the
  <A HREF="../mod/core.html#errordocument"><SAMP>ErrorDocument</SAMP></A>
  documentation for details.  This was incorrectly documented in the past.
  </P>
  <HR>
 </LI>

 <LI><A NAME="cookies1">
      <STRONG>Why does Apache send a cookie on every response?</STRONG>
     </A>
  <P>
  Apache does <EM>not</EM> automatically send a cookie on every
  response, unless you have re-compiled it with the
  <A HREF="../mod/mod_usertrack.html"><SAMP>mod_usertrack</SAMP></A>
  module, and specifically enabled it with the
  <A HREF="../mod/mod_usertrack.html#cookietracking"
  ><SAMP>CookieTracking</SAMP></A>
  directive.
  This module has been in Apache since version 1.2.
  This module may help track users, and uses cookies to do this. If
  you are not using the data generated by <SAMP>mod_usertrack</SAMP>, do
  not compile it into Apache. 
  </P>
  <HR>
 </LI>

 <LI><A NAME="cookies2">
      <STRONG>Why don't my cookies work, I even compiled in
      <SAMP>mod_cookies</SAMP>?
      </STRONG>
     </A>
  <P>
  Firstly, you do <EM>not</EM> need to compile in
  <SAMP>mod_cookies</SAMP> in order for your scripts to work (see the
  <A HREF="#cookies1">previous question</A>
  for more about <SAMP>mod_cookies</SAMP>). Apache passes on your
  <SAMP>Set-Cookie</SAMP> header fine, with or without this module. If
  cookies do not work it will be because your script does not work
  properly or your browser does not use cookies or is not set-up to
  accept them.
  </P>
  <HR>
 </LI>

 <LI><A NAME="jdk1-and-http1.1">
      <STRONG>Why do my Java app[let]s give me plain text when I request
      an URL from an Apache server?</STRONG>
     </A>
  <P>
  As of version 1.2, Apache is an HTTP/1.1 (HyperText Transfer Protocol
  version 1.1) server.  This fact is reflected in the protocol version
  that's included in the response headers sent to a client when
  processing a request.  Unfortunately, low-level Web access classes
  included in the Java Development Kit (JDK) version 1.0.2 expect to see
  the version string &quot;HTTP/1.0&quot; and do not correctly interpret
  the &quot;HTTP/1.1&quot; value Apache is sending (this part of the
  response is a declaration of what the server can do rather than a
  declaration of the dialect of the response).  The result
  is that the JDK methods do not correctly parse the headers, and
  include them with the document content by mistake.
  </P>
  <P>
  This is definitely a bug in the JDK 1.0.2 foundation classes from Sun,
  and it has been fixed in version 1.1.  However, the classes in
  question are part of the virtual machine environment, which means
  they're part of the Web browser (if Java-enabled) or the Java
  environment on the client system - so even if you develop
  <EM>your</EM> classes with a recent JDK, the eventual users might
  encounter the problem.
  The classes involved are replaceable by vendors implementing the
  Java virtual machine environment, and so even those that are based
  upon the 1.0.2 version may not have this problem.
  </P>
  <P>
  In the meantime, a workaround is to tell
  Apache to &quot;fake&quot; an HTTP/1.0 response to requests that come
  from the JDK methods; this can be done by including a line such as the
  following in your server configuration files:
  </P>
  <P>
  <DL>
   <DD><CODE>BrowserMatch Java1.0 force-response-1.0
    <BR>
    BrowserMatch JDK/1.0 force-response-1.0</CODE>
   </DD>
  </DL>
  <P></P>
  <P>
  More information about this issue can be found in the
  <A HREF="http://httpd.apache.org/info/jdk-102.html"
  ><CITE>Java and HTTP/1.1</CITE></A>
  page at the Apache web site.
  </P>
  <HR>
 </LI>

 <LI><A NAME="midi">
      <STRONG>How do I get Apache to send a MIDI file so the browser can
      play it?</STRONG>
     </A>
  <P>
  Even though the registered MIME type for MIDI files is
  <SAMP>audio/midi</SAMP>, some browsers are not set up to recognize it
  as such; instead, they look for <SAMP>audio/x-midi</SAMP>.  There are
  two things you can do to address this:
  </P>
  <OL>
   <LI>Configure your browser to treat documents of type
    <SAMP>audio/midi</SAMP> correctly.  This is the type that Apache
    sends by default.  This may not be workable, however, if you have
    many client installations to change, or if some or many of the
    clients are not under your control.
   </LI>
   <LI>Instruct Apache to send a different <SAMP>Content-type</SAMP>
    header for these files by adding the following line to your server's
    configuration files:
    <P>
    <DL>
     <DD><CODE>AddType audio/x-midi .mid .midi .kar</CODE>
     </DD>
    </DL>
    <P></P>
    <P>
    Note that this may break browsers that <EM>do</EM> recognize the
    <SAMP>audio/midi</SAMP> MIME type unless they're prepared to also
    handle <SAMP>audio/x-midi</SAMP> the same way.
    </P>
   </LI>
  </OL>
  <HR>
 </LI>

 <LI><A NAME="addlog">
      <STRONG>How do I add browsers and referrers to my logs?</STRONG>
     </A>
  <P>
  Apache provides a couple of different ways of doing this.  The
  recommended method is to compile the
  <A HREF="../mod/mod_log_config.html"><SAMP>mod_log_config</SAMP></A>
  module into your configuration and use the
  <A HREF="../mod/mod_log_config.html#customlog"><SAMP>CustomLog</SAMP></A>
  directive.
  </P>
  <P>
  You can either log the additional information in files other than your
  normal transfer log, or you can add them to the records already being
  written.  For example:
  </P>
  <P>
  <CODE>
   CustomLog&nbsp;logs/access_log&nbsp;"%h&nbsp;%l&nbsp;%u&nbsp;%t&nbsp;\"%r\"&nbsp;%s&nbsp;%b&nbsp;\"%{Referer}i\"&nbsp;\"%{User-Agent}i\""
  </CODE>
  </P>
  <P>
  This will add the values of the <SAMP>User-agent:</SAMP> and
  <SAMP>Referer:</SAMP> headers, which indicate the client and the
  referring page, respectively, to the end of each line in the access
  log.
  </P>
  <P>
  You may want to check out the <CITE>Apache Week</CITE> article
  entitled:
  &quot;<A HREF="http://www.apacheweek.com/features/logfiles" REL="Help"
        ><CITE>Gathering Visitor Information: Customizing Your
         Logfiles</CITE></A>&quot;.
  </P>
  <HR>
 </LI>

 <LI><A NAME="set-servername">
      <STRONG>Why does accessing directories only work when I include
      the trailing &quot;/&quot;
      (<EM>e.g.</EM>,&nbsp;<SAMP>http://foo.domain.com/~user/</SAMP>)
      but not when I omit it
      (<EM>e.g.</EM>,&nbsp;<SAMP>http://foo.domain.com/~user</SAMP>)?</STRONG>
     </A>
  <P>
  When you access a directory without a trailing &quot;/&quot;, Apache needs
  to send what is called a redirect to the client to tell it to
  add the trailing slash.  If it did not do so, relative URLs would
  not work properly.  When it sends the redirect, it needs to know
  the name of the server so that it can include it in the redirect.
  There are two ways for Apache to find this out; either it can guess,
  or you can tell it.  If your DNS is configured correctly, it can
  normally guess without any problems.  If it is not, however, then
  you need to tell it.
  </P>
  <P>
  Add a <A HREF="../mod/core.html#servername">ServerName</A> directive
  to the config file to tell it what the domain name of the server is.
  </P>
  <HR>
 </LI>

 <LI><A NAME="no-info-directives">
      <STRONG>Why doesn't mod_info list any directives?</STRONG>
     </A>
  <P>
  The <A HREF="../mod/mod_info.html"><SAMP>mod_info</SAMP></A>
  module allows you to use a Web browser to see how your server is
  configured.  Among the information it displays is the list modules and
  their configuration directives.  The &quot;current&quot; values for
  the directives are not necessarily those of the running server; they
  are extracted from the configuration files themselves at the time of
  the request.  If the files have been changed since the server was last
  reloaded, the display will will not match the values actively in use.
  If the files and the path to the files are not readable by the user as
  which the server is running (see the
  <A HREF="../mod/core.html#user"><SAMP>User</SAMP></A>
  directive), then <SAMP>mod_info</SAMP> cannot read them in order to
  list their values.  An entry <EM>will</EM> be made in the error log in
  this event, however.
  </P>
  <HR>
 </LI>

 <LI><A NAME="namevhost">
      <STRONG>I upgraded to Apache 1.3 and now my virtual hosts don't
      work!</STRONG>
     </A>
  <P>
  In versions of Apache prior to 1.3b2, there was a lot of confusion
  regarding address-based virtual hosts and (HTTP/1.1) name-based
  virtual hosts, and the rules concerning how the server processed
  <SAMP>&lt;VirtualHost&gt;</SAMP> definitions were very complex and not
  well documented.
  </P>
  <P>
  Apache 1.3b2 introduced a new directive,
  <A HREF="../mod/core.html#namevirtualhost"
  ><SAMP>NameVirtualHost</SAMP></A>,
  which simplifies the rules quite a bit.  However, changing the rules
  like this means that your existing name-based
  <SAMP>&lt;VirtualHost&gt;</SAMP> containers probably won't work
  correctly immediately following the upgrade.
  </P>
  <P>
  To correct this problem, add the following line to the beginning of
  your server configuration file, before defining any virtual hosts:
  </P>
  <DL>
   <DD><CODE>NameVirtualHost <EM>n.n.n.n</EM></CODE>
   </DD>
  </DL>
  <P>
  Replace the &quot;<SAMP>n.n.n.n</SAMP>&quot; with the IP address to
  which the name-based virtual host names resolve; if you have multiple
  name-based hosts on multiple addresses, repeat the directive for each
  address.
  </P>
  <P>
  Make sure that your name-based <SAMP>&lt;VirtualHost&gt;</SAMP> blocks
  contain <SAMP>ServerName</SAMP> and possibly <SAMP>ServerAlias</SAMP>
  directives so Apache can be sure to tell them apart correctly.
  </P>
  <P>
  Please see the <A HREF="../vhosts/">Apache
  Virtual Host documentation</A> for further details about configuration.
  </P>
  <HR>
 </LI>

 <LI><A NAME="redhat-htm">
      <STRONG>I'm using RedHat Linux and my .htm files are showing
      up as HTML source rather than being formatted!</STRONG>
     </A>

  <P>
  RedHat messed up and forgot to put a content type for <CODE>.htm</CODE>
  files into <CODE>/etc/mime.types</CODE>.  Edit <CODE>/etc/mime.types</CODE>,
  find the line containing <CODE>html</CODE> and add <CODE>htm</CODE> to it.
  Then restart your httpd server:
  </P>
  <DL>
   <DD><CODE>kill -HUP `cat /var/run/httpd.pid`</CODE>
   </DD>
  </DL>
  <P>
  Then <STRONG>clear your browsers' caches</STRONG>.  (Many browsers won't
  re-examine the content type after they've reloaded a page.)
  </P>
  <HR>
 </LI>

 <LI><A NAME="htaccess-work">
       <STRONG>My <CODE>.htaccess</CODE> files are being ignored.</STRONG></A>
   <P>
   This is almost always due to your <A HREF="../mod/core.html#allowoverride">
   AllowOverride</A> directive being set incorrectly for the directory in 
   question.  If it is set to <CODE>None</CODE> then .htaccess files will 
   not even be looked for.  If you do have one that is set, then be certain 
   it covers the directory you are trying to use the .htaccess file in.  
   This is normally accomplished by ensuring it is inside the proper 
   <A HREF="../mod/core.html#directory">Directory</A> container.
   </P>
   <HR>
 </LI>
 <LI><A NAME="forbidden">
       <STRONG>Why do I get a &quot;<SAMP>Forbidden</SAMP>&quot; message 
       whenever I try to access a particular directory?</STRONG></A>
   <P>
   This message is generally caused because either
   </P>
   <UL>
    <LI>The underlying file system permissions do not allow the
     User/Group under which Apache is running to access the necessary
     files; or
    <LI>The Apache configuration has some access restrictions in 
     place which forbid access to the files.
   </UL>
   <P>
   You can determine which case applies to your situation by checking the
   error log.
   </P>
   <P>
   In the case where file system permission are at fault, remember
   that not only must the directory and files in question be readable,
   but also all parent directories must be at least searchable by the
   web server in order for the content to be accessible.
   </P>
   <HR>
 </LI>
 <li><a name="malfiles"><b>Why do I get a 
        &quot;<samp>Forbidden/You don't have permission to access /
	on this server</samp>&quot; message whenever I try to 
        access my server?</b></a>
   <p>
   Search your <code>conf/httpd.conf</code> file for this exact
   string:
   <code>&lt;Files ~&gt;</code>.  If you find it,
   that's your problem -- that particular &lt;Files&gt; container
   is malformed.  Delete it or replace it with 
   <code>&lt;Files ~ &quot;^\.ht&quot;&gt;</code> 
   and restart your server and things should work as expected.
   </p>
   <p>
   This error appears to be caused by a problem with the version of
   linuxconf distributed with Redhat 6.x.  It may reappear if
   you use linuxconf again.
   </p>
   <p>
   If you don't find this string, check out the
   <a href="#forbidden">previous question</a>.
   </p>
   <hr>
 </li>
 <LI><A NAME="ie-ignores-mime">
       <STRONG>Why do my files appear correctly in Internet
       Explorer, but show up as source or trigger a save window
       with Netscape?</STRONG></A> 
   <P>
   Internet Explorer (IE) and Netscape handle mime type detection in different
   ways, and therefore will display the document differently.  In particular,
   IE sometimes relies on the file extension to determine the mime type.  This
   can happen when the server specifies a mime type of
   <CODE>application/octet-stream</CODE> or <CODE>text/plain</CODE>.
   (Unfortunately, this behavior makes it impossible to properly send plain
   text in some situations unless the file extension is <CODE>txt</CODE>.)
   There are more details available on IE's mime type detection behavior in an
   <A HREF="http://msdn.microsoft.com/workshop/networking/moniker/overview/appendix_a.asp">MSDN
   article</A>.
   </P>

   <P>
   In order to make all browsers work correctly, you should assure
   that Apache sends the correct mime type for the file.  This is
   accomplished by editing the <CODE>mime.types</CODE> file or using
   an <A HREF="../mod/mod_mime.html#addtype"><CODE>AddType</CODE></A>
   directive in the Apache configuration files.
   </P>
   <HR>
  </LI>
</OL>
d904 3
d908 5
d914 3
d918 4
a921 6
 
 
 
  
  
 
d923 5
d929 17
d948 1
a950 2
  <H3>F. Dynamic Content (CGI and SSI)</H3>
<OL>
a951 430
 <LI><A NAME="CGIoutsideScriptAlias">
      <STRONG>How do I enable CGI execution in directories other than
      the ScriptAlias?</STRONG>
     </A>
  <P>
  Apache recognizes all files in a directory named as a
  <A HREF="../mod/mod_alias.html#scriptalias"><SAMP>ScriptAlias</SAMP></A>
  as being eligible for execution rather than processing as normal
  documents.  This applies regardless of the file name, so scripts in a
  ScriptAlias directory don't need to be named
  &quot;<SAMP>*.cgi</SAMP>&quot; or &quot;<SAMP>*.pl</SAMP>&quot; or
  whatever.  In other words, <EM>all</EM> files in a ScriptAlias
  directory are scripts, as far as Apache is concerned.
  </P>
  <P>
  To persuade Apache to execute scripts in other locations, such as in
  directories where normal documents may also live, you must tell it how
  to recognize them - and also that it's okay to execute them.  For
  this, you need to use something like the
  <A HREF="../mod/mod_mime.html#addhandler"><SAMP>AddHandler</SAMP></A>
  directive.
  </P>
  <P>
  <OL>
   <LI>In an appropriate section of your server configuration files, add
    a line such as
    <P>
    <DL>
     <DD><CODE>AddHandler cgi-script .cgi</CODE>
     </DD>
    </DL>
    <P></P>
    <P>
    The server will then recognize that all files in that location (and
    its logical descendants) that end in &quot;<SAMP>.cgi</SAMP>&quot;
    are script files, not documents.
    </P>
   </LI>
   <LI>Make sure that the directory location is covered by an
    <A HREF="../mod/core.html#options"><SAMP>Options</SAMP></A>
    declaration that includes the <SAMP>ExecCGI</SAMP> option.
   </LI>
  </OL>
  <P></P>
  <P>
  In some situations, you might not want to actually
  allow all files named &quot;<SAMP>*.cgi</SAMP>&quot; to be executable.
  Perhaps all you want is to enable a particular file in a normal directory to
  be executable. This can be alternatively accomplished 
  <EM>via</EM> <A HREF="../mod/mod_rewrite.html"><SAMP>mod_rewrite</SAMP></A> 
  and the following steps:
  </P>
  <P>
  <OL>
   <LI>Locally add to the corresponding <SAMP>.htaccess</SAMP> file a ruleset
    similar to this one:
    <P>
    <DL>
     <DD><CODE>RewriteEngine on
      <BR>
      RewriteBase   /~foo/bar/
      <BR>
      RewriteRule   ^quux\.cgi$  -  [T=application/x-httpd-cgi]</CODE>
     </DD>
    </DL>
    <P></P>
   </LI>
   <LI>Make sure that the directory location is covered by an
    <A HREF="../mod/core.html#options"><SAMP>Options</SAMP></A>
    declaration that includes the <SAMP>ExecCGI</SAMP> and
    <SAMP>FollowSymLinks</SAMP> option.
   </LI>
  </OL>
  <P></P>
  <HR>
 </LI>

 <LI><A NAME="premature-script-headers">
      <STRONG>What does it mean when my CGIs fail with
      &quot;<SAMP>Premature end of script headers</SAMP>&quot;?</STRONG>
     </A>
  <P>
  It means just what it says: the server was expecting a complete set of
  HTTP headers (one or more followed by a blank line), and didn't get
  them.
  </P>
  <P>
  The most common cause of this problem is the script dying before
  sending the complete set of headers, or possibly any at all, to the
  server.  To see if this is the case, try running the script standalone
  from an interactive session, rather than as a script under the server.
  If you get error messages, this is almost certainly the cause of the
  &quot;premature end of script headers&quot; message.  Even if the CGI 
  runs fine from the command line, remember that the environment and
  permissions may be different when running under the web server.  The
  CGI can only access resources allowed for the <A 
  HREF="../mod/core.html#user"><CODE>User</CODE></A> and 
  <A HREF="../mod/core.html#group"><CODE>Group</CODE></A> specified in 
  your Apache configuration.  In addition, the environment will not be 
  the same as the one provided on the command line, but it can be 
  adjusted using the directives provided by <A 
  HREF="../mod/mod_env.html">mod_env</A>.
  </P>
  <P>
  The second most common cause of this (aside from people not
  outputting the required headers at all) is a result of an interaction
  with Perl's output buffering.  To make Perl flush its buffers
  after each output statement, insert the following statements around
  the <CODE>print</CODE> or <CODE>write</CODE> statements that send your
  HTTP headers:
  </P>
  <P>
  <DL>
   <DD><CODE>{<BR>
    &nbsp;local ($oldbar) = $|;<BR>
    &nbsp;$cfh = select (STDOUT);<BR>
    &nbsp;$| = 1;<BR>
    &nbsp;#<BR>
    &nbsp;# print your HTTP headers here<BR>
    &nbsp;#<BR>
    &nbsp;$| = $oldbar;<BR>
    &nbsp;select ($cfh);<BR>
    }</CODE>
   </DD>
  </DL>
  <P></P>
  <P>
  This is generally only necessary when you are calling external
  programs from your script that send output to stdout, or if there will
  be a long delay between the time the headers are sent and the actual
  content starts being emitted.  To maximize performance, you should
  turn buffer-flushing back <EM>off</EM> (with <CODE>$| = 0</CODE> or the
  equivalent) after the statements that send the headers, as displayed
  above.
  </P>
  <P>
  If your script isn't written in Perl, do the equivalent thing for
  whatever language you <EM>are</EM> using (<EM>e.g.</EM>, for C, call
  <CODE>fflush()</CODE> after writing the headers).
  </P>
  <P>
  Another cause for the &quot;premature end of script headers&quot;
  message are the RLimitCPU and RLimitMEM directives. You may
  get the message if the CGI script was killed due to a
  resource limit.
  </P>
  <P>
  In addition, a configuration problem in <A
  HREF="../suexec.html">suEXEC</A>, mod_perl, or another third party
  module can often interfere with the execution of your CGI and cause
  the &quot;premature end of script headers&quot; message.
  </P>
  <HR>
 </LI>

 <LI><A NAME="POSTnotallowed">
      <STRONG>Why do I keep getting &quot;Method Not Allowed&quot; for 
      form POST requests?</STRONG>
     </A>
  <P>
  This is almost always due to Apache not being configured to treat the
  file you are trying to POST to as a CGI script.  You can not POST 
  to a normal HTML file; the operation has no meaning.  See the FAQ 
  entry on <A HREF="#CGIoutsideScriptAlias">CGIs outside ScriptAliased
  directories</A> for details on how to configure Apache to treat the
  file in question as a CGI.
  </P>
  <HR>
 </LI>

 <LI><A NAME="nph-scripts">
      <STRONG>How can I get my script's output without Apache buffering
      it?  Why doesn't my server push work?</STRONG>
     </A>
  <P>
  As of Apache 1.3, CGI scripts are essentially not buffered.  Every time
  your script does a "flush" to output data, that data gets relayed on to
  the client.  Some scripting languages, for example Perl, have their own
  buffering for output - this can be disabled by setting the <CODE>$|</CODE>
  special variable to 1.  Of course this does increase the overall number
  of packets being transmitted, which can result in a sense of slowness for 
  the end user.
  </P>
  <P>Prior to 1.3, you needed to use "nph-" scripts to accomplish
  non-buffering.  Today, the only difference between nph scripts and
  normal scripts is that nph scripts require the full HTTP headers to
  be sent.
  </P>
  <HR>
 </LI>

 <LI><A NAME="cgi-spec">
      <STRONG>Where can I find the &quot;CGI specification&quot;?</STRONG>
     </A>
  <P>
  The Common Gateway Interface (CGI) specification can be found at
  the original NCSA site 
  &lt;<A HREF="http://hoohoo.ncsa.uiuc.edu/cgi/interface.html">
  <SAMP>http://hoohoo.ncsa.uiuc.edu/cgi/interface.html</SAMP></A>&gt;.
  This version hasn't been updated since 1995, and there have been
  some efforts to update it.  
  </P>
  <P>
  A new draft is being worked on with the intent of making it an informational
  RFC; you can find out more about this project at
  &lt;<A HREF="http://web.golux.com/coar/cgi/"
      ><SAMP>http://web.golux.com/coar/cgi/</SAMP></A>&gt;.
  </P>
  <HR>
 </LI>

 <LI><A NAME="fastcgi">
      <STRONG>Why isn't FastCGI included with Apache any more?</STRONG>
     </A>
  <P>
  The simple answer is that it was becoming too difficult to keep the
  version being included with Apache synchronized with the master copy
  at the
  <A HREF="http://www.fastcgi.com/"
  >FastCGI web site</A>.  When a new version of Apache was released, the
  version of the FastCGI module included with it would soon be out of date.
  </P>
  <P>
  You can still obtain the FastCGI module for Apache from the master
  FastCGI web site.
  </P>
  <HR>
 </LI>

 <LI><A NAME="ssi-part-i">
      <STRONG>How do I enable SSI (parsed HTML)?</STRONG>
     </A>
  <P>
  SSI (an acronym for Server-Side Include) directives allow static HTML
  documents to be enhanced at run-time (<EM>e.g.</EM>, when delivered to
  a client by Apache).  The format of SSI directives is covered
  in the <A HREF="../mod/mod_include.html">mod_include manual</A>;
  suffice it to say that Apache supports not only SSI but
  xSSI (eXtended SSI) directives.
  </P>
  <P>
  Processing a document at run-time is called <EM>parsing</EM> it;
  hence the term &quot;parsed HTML&quot; sometimes used for documents
  that contain SSI instructions.  Parsing tends to be
  resource-consumptive compared to serving static files, and is not
  enabled by default.  It can also interfere with the cachability of
  your documents, which can put a further load on your server.  (See
  the <A HREF="#ssi-part-ii">next question</A> for more information
  about this.)
  </P>
  <P>
  To enable SSI processing, you need to
  </P>
  <UL>
   <LI>Build your server with the
    <A HREF="../mod/mod_include.html"><SAMP>mod_include</SAMP></A>
    module.  This is normally compiled in by default.
   </LI>
   <LI>Make sure your server configuration files have an
    <A HREF="../mod/core.html#options"><SAMP>Options</SAMP></A>
    directive which permits <SAMP>Includes</SAMP>.
   </LI>
   <LI>Make sure that the directory where you want the SSI documents to
    live is covered by the &quot;server-parsed&quot; content handler,
    either explicitly or in some ancestral location.  That can be done
    with the following
    <A HREF="../mod/mod_mime.html#addhandler"><SAMP>AddHandler</SAMP></A>
    directive:
    <P>
    <DL>
     <DD><CODE>AddHandler server-parsed .shtml</CODE>
     </DD>
    </DL>
    <P></P>
    <P>
    This indicates that all files ending in &quot;.shtml&quot; in that
    location (or its descendants) should be parsed.  Note that using
    &quot;.html&quot; will cause all normal HTML files to be parsed,
    which may put an inordinate load on your server.
    </P>
   </LI>
  </UL>
  <P>
  For additional information, see the <CITE>Apache Week</CITE> article on
  <A HREF="http://www.apacheweek.com/features/ssi" REL="Help"
  ><CITE>Using Server Side Includes</CITE></A>.
  </P>
  <HR>
 </LI>

 <LI><A NAME="ssi-part-ii">
      <STRONG>Why don't my parsed files get cached?</STRONG>
     </A>
  <P>
  Since the server is performing run-time processing of your SSI
  directives, which may change the content shipped to the client, it
  can't know at the time it starts parsing what the final size of the
  result will be, or whether the parsed result will always be the same.
  This means that it can't generate <SAMP>Content-Length</SAMP> or
  <SAMP>Last-Modified</SAMP> headers.  Caches commonly work by comparing
  the <SAMP>Last-Modified</SAMP> of what's in the cache with that being
  delivered by the server.  Since the server isn't sending that header
  for a parsed document, whatever's doing the caching can't tell whether
  the document has changed or not - and so fetches it again to be on the
  safe side.
  </P>
  <P>
  You can work around this in some cases by causing an
  <SAMP>Expires</SAMP> header to be generated.  (See the
  <A HREF="../mod/mod_expires.html" REL="Help"><SAMP>mod_expires</SAMP></A>
  documentation for more details.)  Another possibility is to use the
  <A HREF="../mod/mod_include.html#xbithack" REL="Help"
  ><SAMP>XBitHack Full</SAMP></A>
  mechanism, which tells Apache to send (under certain circumstances
  detailed in the XBitHack directive description) a
  <SAMP>Last-Modified</SAMP> header based upon the last modification
  time of the file being parsed.  Note that this may actually be lying
  to the client if the parsed file doesn't change but the SSI-inserted
  content does; if the included content changes often, this can result
  in stale copies being cached.
  </P>
  <HR>
 </LI>

 <LI><A NAME="ssi-part-iii">
      <STRONG>How can I have my script output parsed?</STRONG>
     </A>
  <P>
  So you want to include SSI directives in the output from your CGI
  script, but can't figure out how to do it?
  The short answer is &quot;you can't.&quot;  This is potentially
  a security liability and, more importantly, it can not be cleanly
  implemented under the current server API.  The best workaround
  is for your script itself to do what the SSIs would be doing.
  After all, it's generating the rest of the content.
  </P>
  <P>
  This is a feature The Apache Group hopes to add in the next major
  release after 1.3.
  </P>
  <HR>
 </LI>

 <LI><A NAME="ssi-part-iv">
      <STRONG>SSIs don't work for VirtualHosts and/or 
        user home directories.</STRONG>
     </A>
  <P>
  This is almost always due to having some setting in your config file that
  sets "Options Includes" or some other setting for your DocumentRoot
  but not for other directories.  If you set it inside a Directory
  section, then that setting will only apply to that directory.  
  </P>
  <HR>
 </LI>

 <LI><A NAME="errordocssi">
      <STRONG>How can I use <CODE>ErrorDocument</CODE>
      and SSI to simplify customized error messages?</STRONG>
     </A>
  <P>
  Have a look at <A HREF="custom_errordocs.html">this document</A>.
  It shows in example form how you can a combination of XSSI and
  negotiation to tailor a set of <CODE>ErrorDocument</CODE>s to your
  personal taste, and returning different internationalized error
  responses based on the client's native language.
  </P>
  <HR>
 </LI>

 <LI><A NAME="remote-user-var">
      <STRONG>Why is the environment variable 
      <SAMP>REMOTE_USER</SAMP> not set?</STRONG>
     </A>
  <P>
  This variable is set and thus available in SSI or CGI scripts <STRONG>if and
  only if</STRONG> the requested document was protected by access
  authentication.  For an explanation on how to implement these restrictions,
  see
  <A HREF="http://www.apacheweek.com/"><CITE>Apache Week</CITE></A>'s
  articles on
  <A HREF="http://www.apacheweek.com/features/userauth"
  ><CITE>Using User Authentication</CITE></A>
  or
  <A HREF="http://www.apacheweek.com/features/dbmauth"
  ><CITE>DBM User Authentication</CITE></A>.
  </P>
  <P>
  Hint: When using a CGI script to receive the data of a HTML <SAMP>FORM</SAMP>
  notice that protecting the document containing the <SAMP>FORM</SAMP> is not
  sufficient to provide <SAMP>REMOTE_USER</SAMP> to the CGI script.  You have
  to protect the CGI script, too. Or alternatively only the CGI script (then
  authentication happens only after filling out the form).
  </P>
  <HR>
 </LI>
 <LI><A NAME="user-cgi"><STRONG>How do I allow each of my user directories
     to have a cgi-bin directory?</STRONG></A>
  <P>
  Remember that CGI execution does not need to be restricted only to
  cgi-bin directories.  You can <A HREF="#CGIoutsideScriptAlias">allow
  CGI script execution in arbitrary parts of your filesystem</A>.
  </P>
  <P>
  There are many ways to give each user directory a cgi-bin directory
  such that anything requested as 
  <SAMP>http://example.com/~user/cgi-bin/program</SAMP> will be
  executed as a CGI script.
  Two alternatives are:
  <OL>
   <LI>Place the cgi-bin directory next to the public_html directory:
    <DL>
     <DD><CODE>ScriptAliasMatch ^/~([^/]*)/cgi-bin/(.*) /home/$1/cgi-bin/$2</CODE>
     </DD>
    </DL>
    </LI>
    <LI>Place the cgi-bin directory underneath the public_html directory:
     <P></p>
     <DL>
      <DD><CODE>&lt;Directory /home/*/public_html/cgi-bin&gt;<BR>
       &nbsp;&nbsp;&nbsp;&nbsp;Options ExecCGI<BR>
       &nbsp;&nbsp;&nbsp;&nbsp;SetHandler cgi-script<BR>
       &lt;/Directory&gt;</CODE>
      </DD>
     </DL>
     <p></P>
    </LI>
   </OL>
  <HR> 
 </LI>
a952 1
</OL>
d957 3
a959 6
 
 
 
  
  
 
d961 1
d963 5
d969 2
d972 3
d976 12
a987 2
  <H3>G. Authentication and Access Restrictions</H3>
<OL>
d989 4
a992 287
 <LI><A NAME="dnsauth">
      <STRONG>Why isn't restricting access by host or domain name
      working correctly?</STRONG>
     </A>
  <P>
  Two of the most common causes of this are:
  </P>
  <OL>
   <LI><STRONG>An error, inconsistency, or unexpected mapping in the DNS
    registration</STRONG>
    <BR>
    This happens frequently: your configuration restricts access to
    <SAMP>Host.FooBar.Com</SAMP>, but you can't get in from that host.
    The usual reason for this is that <SAMP>Host.FooBar.Com</SAMP> is
    actually an alias for another name, and when Apache performs the
    address-to-name lookup it's getting the <EM>real</EM> name, not
    <SAMP>Host.FooBar.Com</SAMP>.  You can verify this by checking the
    reverse lookup yourself.  The easiest way to work around it is to
    specify the correct host name in your configuration.
   </LI>
   <LI><STRONG>Inadequate checking and verification in your
    configuration of Apache</STRONG>
    <BR>
    If you intend to perform access checking and restriction based upon
    the client's host or domain name, you really need to configure
    Apache to double-check the origin information it's supplied.  You do
    this by adding the <SAMP>-DMAXIMUM_DNS</SAMP> clause to the
    <SAMP>EXTRA_CFLAGS</SAMP> definition in your
    <SAMP>Configuration</SAMP> file.  For example:
    <P>
    <DL>
     <DD><CODE>EXTRA_CFLAGS=-DMAXIMUM_DNS</CODE>
     </DD>
    </DL>
    <P></P>
    <P>
    This will cause Apache to be very paranoid about making sure a
    particular host address is <EM>really</EM> assigned to the name it
    claims to be.  Note that this <EM>can</EM> incur a significant
    performance penalty, however, because of all the name resolution
    requests being sent to a nameserver.
    </P>
   </LI>
  </OL>
  <HR>
 </LI>

 <LI><A NAME="user-authentication">
      <STRONG>How do I set up Apache to require a username and
      password to access certain documents?</STRONG>
     </A>
  <P>
  There are several ways to do this; some of the more popular
  ones are to use the <A HREF="../mod/mod_auth.html">mod_auth</A>,
  <A HREF="../mod/mod_auth_db.html">mod_auth_db</A>, or
  <A HREF="../mod/mod_auth_dbm.html">mod_auth_dbm</A> modules.
  </P>
  <P>
  For an explanation on how to implement these restrictions, see
  <A HREF="http://www.apacheweek.com/"><CITE>Apache Week</CITE></A>'s
  articles on
  <A HREF="http://www.apacheweek.com/features/userauth"
  ><CITE>Using User Authentication</CITE></A>
  or
  <A HREF="http://www.apacheweek.com/features/dbmauth"
  ><CITE>DBM User Authentication</CITE></A>.
  </P>
  <HR>
 </LI>

 <LI><A NAME="remote-auth-only">
      <STRONG>How do I set up Apache to allow access to certain
      documents only if a site is either a local site <EM>or</EM>
      the user supplies a password and username?</STRONG>
     </A>
  <P>
  Use the <A HREF="../mod/core.html#satisfy">Satisfy</A> directive,
  in particular the <CODE>Satisfy Any</CODE> directive, to require
  that only one of the access restrictions be met.  For example,
  adding the following configuration to a <SAMP>.htaccess</SAMP>
  or server configuration file would restrict access to people who
  either are accessing the site from a host under domain.com or
  who can supply a valid username and password:
  </P>
  <P>
  <DL>
   <DD><CODE>Deny from all
    <BR>
    Allow from .domain.com
    <BR>
    AuthType Basic
    <BR>
    AuthUserFile /usr/local/apache/conf/htpasswd.users
    <BR>
    AuthName "special directory"
    <BR>
    Require valid-user
    <BR>
    Satisfy any</CODE>
   </DD>
  </DL>
  <P></P>
  <P>
  See the <A HREF="#user-authentication">user authentication</A>
  question and the <A HREF="../mod/mod_access.html">mod_access</A>
  module for details on how the above directives work.
  </P>
  <HR>
 </LI>

 <LI><A NAME="authauthoritative">
      <STRONG>Why does my authentication give me a server error?</STRONG>
     </A>
  <P>
  Under normal circumstances, the Apache access control modules will
  pass unrecognized user IDs on to the next access control module in
  line.  Only if the user ID is recognized and the password is validated
  (or not) will it give the usual success or &quot;authentication
  failed&quot; messages.
  </P>
  <P>
  However, if the last access module in line 'declines' the validation
  request (because it has never heard of the user ID or because it is not
  configured), the <SAMP>http_request</SAMP> handler will give one of
  the following, confusing, errors:
  </P>
  <UL>
   <LI><SAMP>check access</SAMP>
   </LI>
   <LI><SAMP>check user.  No user file?</SAMP>
   </LI>
   <LI><SAMP>check access.  No groups file?</SAMP>
   </LI>
  </UL>
  <P>
  This does <EM>not</EM> mean that you have to add an
  '<SAMP>AuthUserFile&nbsp;/dev/null</SAMP>' line as some magazines suggest!
  </P>
  <P>
  The solution is to ensure that at least the last module is authoritative
  and <STRONG>CONFIGURED</STRONG>. By default, <SAMP>mod_auth</SAMP> is
  authoritative and will give an OK/Denied, but only if it is configured
  with the proper <SAMP>AuthUserFile</SAMP>.  Likewise, if a valid group
  is required.  (Remember that the modules are processed in the reverse
  order from that in which they appear in your compile-time
  <SAMP>Configuration</SAMP> file.)
  </P>
  <P>
  A typical situation for this error is when you are using the
  <SAMP>mod_auth_dbm</SAMP>, <SAMP>mod_auth_msql</SAMP>,
  <SAMP>mod_auth_mysql</SAMP>, <SAMP>mod_auth_anon</SAMP> or
  <SAMP>mod_auth_cookie</SAMP> modules on their own.  These are by
  default <STRONG>not</STRONG> authoritative, and this will pass the
  buck on to the (non-existent) next authentication module when the
  user ID is not in their respective database.  Just add the appropriate
  '<SAMP><EM>XXX</EM>Authoritative yes</SAMP>' line to the configuration.
  </P>
  <P>
  In general it is a good idea (though not terribly efficient) to have the
  file-based <SAMP>mod_auth</SAMP> a module of last resort. This allows
  you to access the web server with a few special passwords even if the
  databases are down or corrupted.  This does cost a
  file open/seek/close for each request in a protected area.
  </P>
  <HR>
 </LI>

 <LI><A NAME="auth-on-same-machine">
      <STRONG>Do I have to keep the (mSQL) authentication information
      on the same machine?</STRONG>
     </A>
  <P>
  Some organizations feel very strongly about keeping the authentication
  information on a different machine than the webserver. With the
  <SAMP>mod_auth_msql</SAMP>, <SAMP>mod_auth_mysql</SAMP>, and other SQL
  modules connecting to (R)DBMses this is quite possible. Just configure
  an explicit host to contact.
  </P>
  <P>
  Be aware that with mSQL and Oracle, opening and closing these database
  connections is very expensive and time consuming. You might want to
  look at the code in the <SAMP>auth_*</SAMP> modules and play with the
  compile time flags to alleviate this somewhat, if your RDBMS licences
  allow for it.
  </P>
  <HR>
 </LI>

 <LI><A NAME="msql-slow">
      <STRONG>Why is my mSQL authentication terribly slow?</STRONG>
     </A>
  <P>
  You have probably configured the Host by specifying a FQHN,
  and thus the <SAMP>libmsql</SAMP> will use a full blown TCP/IP socket
  to talk to the database, rather than a fast internal device.  The
  <SAMP>libmsql</SAMP>, the mSQL FAQ, and the <SAMP>mod_auth_msql</SAMP>
  documentation warn you about this.  If you have to use different
  hosts, check out the <SAMP>mod_auth_msql</SAMP> code for
  some compile time flags which might - or might not - suit you.
  </P>
  <HR>
 </LI>

 <LI><A NAME="passwdauth">
      <STRONG>Can I use my <SAMP>/etc/passwd</SAMP> file
      for Web page authentication?</STRONG>
     </A>
  <P>
  Yes, you can - but it's a <STRONG>very bad idea</STRONG>.  Here are
  some of the reasons:
  </P>
  <UL>
   <LI>The Web technology provides no governors on how often or how
    rapidly password (authentication failure) retries can be made.  That
    means that someone can hammer away at your system's
    <SAMP>root</SAMP> password using the Web, using a dictionary or
    similar mass attack, just as fast as the wire and your server can
    handle the requests.  Most operating systems these days include
    attack detection (such as <EM>n</EM> failed passwords for the same
    account within <EM>m</EM> seconds) and evasion (breaking the
    connection, disabling the account under attack, disabling
    <EM>all</EM> logins from that source, <EM>et cetera</EM>), but the
    Web does not.
   </LI>
   <LI>An account under attack isn't notified (unless the server is
    heavily modified); there's no &quot;You have 19483 login
    failures&quot; message when the legitimate owner logs in.
   </LI>
   <LI>Without an exhaustive and error-prone examination of the server
    logs, you can't tell whether an account has been compromised.
    Detecting that an attack has occurred, or is in progress, is fairly
    obvious, though - <EM>if</EM> you look at the logs.
   </LI>
   <LI>Web authentication passwords (at least for Basic authentication)
    generally fly across the wire, and through intermediate proxy
    systems, in what amounts to plain text.  &quot;O'er the net we
    go/Caching all the way;/O what fun it is to surf/Giving my password
    away!&quot;
   </LI>
   <LI>Since HTTP is stateless, information about the authentication is
    transmitted <EM>each and every time</EM> a request is made to the
    server.  Essentially, the client caches it after the first
    successful access, and transmits it without asking for all
    subsequent requests to the same server.
   </LI>
   <LI>It's relatively trivial for someone on your system to put up a
    page that will steal the cached password from a client's cache
    without them knowing.  Can you say &quot;password grabber&quot;?
   </LI>
  </UL>
  <P>
  If you still want to do this in light of the above disadvantages, the
  method is left as an exercise for the reader.  It'll void your Apache
  warranty, though, and you'll lose all accumulated UNIX guru points.
  </P>
  <HR>
 </LI>
 <LI><A NAME="prompted-twice"><STRONG>Why does Apache ask for my password
	      twice before serving a file?</STRONG></a>
  <P>
  If the hostname under which you are accessing the server is
  different than the hostname specified in the 
  <A HREF="../mod/core.html#servername"><CODE>ServerName</CODE></A>
  directive, then depending on the setting of the
  <A HREF="../mod/core.html#usecanonicalname"><CODE>UseCanonicalName</CODE></A>
  directive, Apache will redirect you to a new hostname when
  constructing self-referential URLs.  This happens, for example, in
  the case where you request a directory without including the
  trailing slash.
  </P>
  <P>
  When this happens, Apache will ask for authentication once under the
  original hostname, perform the redirect, and then ask again under the
  new hostname.  For security reasons, the browser must prompt again
  for the password when the host name changes.
  </P>
  <P>
  To eliminate this problem you should
  </P>
  <OL>
    <LI>Always use the trailing slash when requesting directories;
    <LI>Change the <CODE>ServerName</CODE> to match the name you are
        using in the URL; and/or
    <LI>Set <CODE>UseCanonicalName off</CODE>.
  </OL>
  <HR>
 </LI>
d994 4
a997 1
</OL>
d999 2
d1002 13
d1016 2
d1019 16
a1034 6
 
 
 
  
  
 
d1036 3
d1040 6
d1047 3
d1051 5
d1057 8
d1066 3
a1068 2
  <H3>H. URL Rewriting</H3>
<OL>
d1070 4
a1073 148
 <LI><A NAME="rewrite-more-config">
      <STRONG>Where can I find mod_rewrite rulesets which already solve
      particular URL-related problems?</STRONG>
     </A>
  <P>
  There is a collection of 
  <A HREF="http://www.engelschall.com/pw/apache/rewriteguide/"
  >Practical Solutions for URL-Manipulation</A>
  where you can
  find all typical solutions the author of 
  <A HREF="../mod/mod_rewrite.html"><SAMP>mod_rewrite</SAMP></A> 
  currently knows of. If you have more
  interesting rulesets which solve particular problems not currently covered in
  this document, send it to 
  <A HREF="mailto:rse@@apache.org">Ralf S. Engelschall</A>
  for inclusion. The
  other webmasters will thank you for avoiding the reinvention of the wheel.
  </P>
  <HR>
 </LI>

 <LI><A NAME="rewrite-article">
      <STRONG>Where can I find any published information about
      URL-manipulations and mod_rewrite?</STRONG>
     </A>
  <P>
  There is an article from 
  <A HREF="mailto:rse@@apache.org"
  >Ralf S. Engelschall</A>
  about URL-manipulations based on
  <A HREF="../mod/mod_rewrite.html"><SAMP>mod_rewrite</SAMP></A> 
  in the &quot;iX Multiuser Multitasking Magazin&quot; issue #12/96. The
  german (original) version
  can be read online at 
  &lt;<A HREF="http://www.heise.de/ix/artikel/9612149/"
      >http://www.heise.de/ix/artikel/9612149/</A>&gt;,
  the English (translated) version can be found at 
  &lt;<A HREF="http://www.heise.de/ix/artikel/E/9612149/"
      >http://www.heise.de/ix/artikel/E/9612149/</A>&gt;.
  </P>
  <HR>
 </LI>

 <LI><A NAME="rewrite-complexity">
      <STRONG>Why is mod_rewrite so difficult to learn and seems so
      complicated?</STRONG>
     </A>
  <P>
  Hmmm... there are a lot of reasons. First, mod_rewrite itself is a powerful
  module which can help you in really <STRONG>all</STRONG> aspects of URL
  rewriting, so it can be no trivial module per definition. To accomplish
  its hard job it uses software leverage and makes use of a powerful regular
  expression
  library by Henry Spencer which is an integral part of Apache since its
  version 1.2.  And regular expressions itself can be difficult to newbies,
  while providing the most flexible power to the advanced hacker. 
  </P>
  <P>
  On the other hand mod_rewrite has to work inside the Apache API environment
  and needs to do some tricks to fit there. For instance the Apache API as of
  1.x really was not designed for URL rewriting at the <TT>.htaccess</TT>
  level of processing. Or the problem of multiple rewrites in sequence, which
  is also not handled by the API per design. To provide this features
  mod_rewrite has to do some special (but API compliant!) handling which leads
  to difficult processing inside the Apache kernel. While the user usually
  doesn't see anything of this processing, it can be difficult to find
  problems when some of your RewriteRules seem not to work.
  </P>
  <HR>
 </LI>

 <LI><A NAME="rewrite-dontwork">
      <STRONG>What can I do if my RewriteRules don't work as expected?
      </STRONG>
     </A>
  <P>
  Use &quot;<SAMP>RewriteLog somefile</SAMP>&quot; and
  &quot;<SAMP>RewriteLogLevel 9</SAMP>&quot; and have a precise look at the
  steps the rewriting engine performs. This is really the only one and best
  way to debug your rewriting configuration.
  </P>
  <HR>
 </LI>

 <LI><A NAME="rewrite-prefixdocroot"><STRONG>Why don't some of my URLs
      get prefixed with DocumentRoot when using mod_rewrite?</STRONG>
     </A>
  <P>
  If the rule starts with <SAMP>/somedir/...</SAMP> make sure that
  really no <SAMP>/somedir</SAMP> exists on the filesystem if you
  don't want to lead the URL to match this directory, <EM>i.e.</EM>,
  there must be no root directory named <SAMP>somedir</SAMP> on the
  filesystem. Because if there is such a directory, the URL will not
  get prefixed with DocumentRoot. This behaviour looks ugly, but is
  really important for some other aspects of URL rewriting.
  </P>
  <HR>
 </LI>

 <LI><A NAME="rewrite-nocase">
      <STRONG>How can I make all my URLs case-insensitive with mod_rewrite?
      </STRONG>
     </A>
  <P>
  You can't! The reasons are: first, that, case translations for
  arbitrary length URLs cannot be done <EM>via</EM> regex patterns and
  corresponding substitutions.  One needs a per-character pattern like
  the sed/Perl <SAMP>tr|..|..|</SAMP> feature.  Second, just making
  URLs always upper or lower case does not solve the whole problem of
  case-INSENSITIVE URLs, because URLs actually have to be rewritten to
  the correct case-variant for the file residing on the filesystem
  in order to allow Apache to access the file.  And
  the Unix filesystem is always case-SENSITIVE.
  </P>
  <P>
  But there is a module named <CODE><A
  HREF="../mod/mod_speling.html">mod_speling.c</A></CODE> in the
  Apache distribution. Try this module to help correct people who use
  mis-cased URLs.
  </P>
  <HR>
 </LI>

 <LI><A NAME="rewrite-virthost">
      <STRONG> Why are RewriteRules in my VirtualHost parts ignored?</STRONG>
     </A>
  <P>
  Because you have to enable the engine for every virtual host explicitly due
  to security concerns. Just add a &quot;RewriteEngine on&quot; to your
  virtual host configuration parts.
  </P>
  <HR>
 </LI>

 <LI><A NAME="rewrite-envwhitespace">
      <STRONG> How can I use strings with whitespaces in RewriteRule's ENV
      flag?</STRONG>
     </A>
  <P>
  There is only one ugly solution: You have to surround the complete
  flag argument by quotation marks (<SAMP>"[E=...]"</SAMP>). Notice:
  The argument to quote here is not the argument to the E-flag, it is
  the argument of the Apache config file parser, <EM>i.e.</EM>, the
  third argument of the RewriteRule here.  So you have to write
  <SAMP>"[E=any text with whitespaces]"</SAMP>.
  </P>
  <HR>
 </LI>
d1075 5
a1079 1
</OL>
d1081 6
d1088 3
d1092 1
d1094 11
a1104 6
 
 
 
  
  
 
d1106 9
d1116 4
d1121 10
d1132 704
d1837 2
d1840 2
a1841 2
  <H3>I. Features</H3>
<OL>
d1843 1807
a3649 196
 <LI><A NAME="proxy">
      <STRONG>Does or will Apache act as a Proxy server?</STRONG>
     </A>
  <P>
  Apache version 1.1 and above comes with a
  <A HREF="../mod/mod_proxy.html">proxy module</A>.
  If compiled in, this will make Apache act as a caching-proxy server.
  </P>
  <HR>
 </LI>

 <LI><A NAME="multiviews">
      <STRONG>What are &quot;multiviews&quot;?</STRONG>
     </A>
  <P>
  &quot;Multiviews&quot; is the general name given to the Apache
  server's ability to provide language-specific document variants in
  response to a request.  This is documented quite thoroughly in the
  <A HREF="../content-negotiation.html" REL="Help">content negotiation</A>
  description page.  In addition, <CITE>Apache Week</CITE> carried an
  article on this subject entitled
  &quot;<A HREF="http://www.apacheweek.com/features/negotiation" REL="Help"
        ><CITE>Content Negotiation Explained</CITE></A>&quot;.
  </P>
  <HR>
 </LI>

 <LI><A NAME="putsupport">
      <STRONG>Why can't I publish to my Apache server using PUT on
      Netscape Gold and other programs?</STRONG>
     </A>
  <P>
  Because you need to install and configure a script to handle
  the uploaded files.  This script is often called a &quot;PUT&quot; handler.
  There are several available, but they may have security problems.
  Using FTP uploads may be easier and more secure, at least for now.
  For more information, see the <CITE>Apache Week</CITE> article
  <A HREF="http://www.apacheweek.com/features/put"
  ><CITE>Publishing Pages with PUT</CITE></A>.
  </P>
  <HR>
 </LI>

 <LI><A NAME="SSL-i">
      <STRONG>Why doesn't Apache include SSL?</STRONG>
     </A>
  <P>
  SSL (Secure Socket Layer) data transport requires encryption, and many
  governments have restrictions upon the import, export, and use of
  encryption technology.  If Apache included SSL in the base package,
  its distribution would involve all sorts of legal and bureaucratic
  issues, and it would no longer be freely available.  Also, some of
  the technology required to talk to current clients using SSL is
  patented by <A HREF="http://www.rsa.com/">RSA Data Security</A>,
  who restricts its use without a license.
  </P>
  <P>
  Some SSL implementations of Apache are available, however; see the
  &quot;<A HREF="http://httpd.apache.org/related_projects.html"
        >related projects</A>&quot;
  page at the main Apache web site.
  </P>
  <P>
  You can find out more about this topic in the <CITE>Apache Week</CITE>
  article about
  <A HREF="http://www.apacheweek.com/features/ssl" REL="Help"
  ><CITE>Apache and Secure Transactions</CITE></A>.
  </P>
  <HR>
 </LI>
 <LI><A NAME="footer">
      <STRONG>How can I attach a footer to my documents
        without using SSI?</STRONG>
     </A>
  <P>
  You can make arbitrary changes to static documents by configuring an
  <A HREF="../mod/mod_actions.html#action">
  Action</A> which launches a CGI script.  The CGI is then
  responsible for setting a content-type and delivering the requested
  document (the location of which is passed in the
  <SAMP>PATH_TRANSLATED</SAMP> environment variable), along with
  whatever footer is needed.
  </P>
  <P>
  Busy sites may not want to run a CGI script on every request, and
  should consider using an Apache module to add the footer.  There are
  several third party modules available through the <A
  HREF="http://modules.apache.org/">Apache Module Registry</A> which
  will add footers to documents.  These include mod_trailer, PHP
  (<SAMP>php3_auto_append_file</SAMP>), mod_layout, and mod_perl
  (<SAMP>Apache::Sandwich</SAMP>).
  </P>
  <HR>
 </LI>
 <LI><A NAME="search">
      <STRONG>Does Apache include a search engine?</STRONG>
     </A>
  <P>Apache does not include a search engine, but there are many good
  commercial and free search engines which can be used easily with
  Apache.  Some of them are listed on the <A
  HREF="http://www.searchtools.com/tools/tools.html">Web Site Search
  Tools</A> page.  Open source search engines that are often used with
  Apache include <A HREF="http://www.htdig.org/">ht://Dig</A> and <A
  HREF="http://sunsite.berkeley.edu/SWISH-E/">SWISH-E</A>.
  </P>
  <HR>
 </LI>
 <LI><A NAME="rotate">
      <STRONG>How can I rotate my log files?</STRONG>
     </A>
  <P>The simple answer: by piping the transfer log into an appropriate
  log file rotation utility.</P> <P>The longer answer: In the
  src/support/ directory, you will find a utility called <a
  href="../programs/rotatelogs.html">rotatelogs</a> which can be used
  like this:</p>

<PRE>   TransferLog "|/path/to/rotatelogs /path/to/logs/access_log 86400"</PRE>

  <p>to enable daily rotation of the log files.<BR>
  A more sophisticated solution of a logfile rotation utility is
  available under the name <CODE>cronolog</CODE> from Andrew Ford's site at
  <A HREF="http://www.ford-mason.co.uk/resources/cronolog/"
  >http://www.ford-mason.co.uk/resources/cronolog/</A>. It can automatically
  create logfile subdirectories based on time and date, and can have a
  constant symlink point to the rotating logfiles. (As of version 1.6.1,
  cronolog is available under the <A HREF="../LICENSE">Apache License</A>).
  Use it like this:</P>

<PRE>   CustomLog "|/path/to/cronolog --symlink=/usr/local/apache/logs/access_log /usr/local/apache/logs/%Y/%m/access_log" combined</PRE>

  <HR>
 </LI>
 <LI><A NAME="conditional-logging">
      <STRONG>How do I keep certain requests from appearing
      in my logs?</STRONG></A> 
  <P>
  The maximum flexibility for removing unwanted information from
  log files is obtained by post-processing the logs, or using
  piped-logs to feed the logs through a program which does whatever
  you want.  However, Apache does offer the ability to prevent
  requests from ever appearing in the log files.  You can do this by
  using the
  <A HREF="../mod/mod_setenvif.html#SetEnvIf"><CODE>SetEnvIf</CODE></A>
  directive to set an environment variable for certain requests and
  then using the conditional
  <A HREF="../mod/mod_log_config.html#customlog-conditional"><CODE>CustomLog</CODE></A>
  syntax to prevent logging when the environment variable is set.
  </P>
  <HR>
 </LI>

 <li><a name="dbinteg"><b>Does Apache support any sort of database
      integration?</b></a>
  <p>
  No.  Apache is a Web (HTTP) server, not an application server.  The
  base package does not include any such functionality.  See the
  <a href="http://www.php.net/">PHP project</a> and the
  <a href="http://perl.apache.org/">mod_perl project</a>
  for examples of modules that allow you to work with databases
  from within the Apache environment.
  </p>
  <hr>
 </li>

 <li><a name="asp"><b>Can I use Active Server Pages (ASP) with Apache?</b></a>
  <p>
  The base Apache Web server package does not include ASP support.
  However, there are a couple of after-market solutions that let you
  add this functionality; see the
  <a href="http://httpd.apache.org/related_projects.html"
  >related projects</a> page to find out more.
  </p>
  <hr>
 </li>

 <li><a name="java"><b>Does Apache come with Java support?</b></a>
  <p>
  The base Apache Web server package does not include support for
  Java, Java Server Pages, Enterprise Java Beans, or Java servlets.
  Those features are available as add-ons from the Apache/Java project
  site, &lt;URL:<a href="http://jakarta.apache.org"
                >http://jakarta.apache.org/</a>&gt;.
  </p>
  <hr>
 </li>

</OL>




<HR>

<H3 ALIGN="CENTER">
 Apache HTTP Server Version 1.3
</H3>
d3651 2
a3652 2
<A HREF="./"><IMG SRC="../images/index.gif" ALT="Index"></A>
<A HREF="../"><IMG SRC="../images/home.gif" ALT="Home"></A>
a3653 2
</BODY>
</HTML>
@


1.7
log
@apache 1.3.14 + mod_ssl 2.7.1 merge
@
text
@d24 1
a24 1
  $Revision: 1.6 $ ($Date: 2000/03/19 11:16:29 $)
d30 1
a30 1
       HREF="http://www.apache.org/docs/misc/FAQ.html"
d32 1
a32 1
      ><SAMP>http://www.apache.org/docs/misc/FAQ.html</SAMP></A>&gt;.
d240 1
a240 1
   <LI><A HREF="#aixccbug">Why am I getting "<SAMP>Expected &lt/Directory&gt;
d553 2
a554 1
  <P>The Apache httpd server
a606 1
  </P>
d614 1
a614 1
  The <A HREF="http://www.apache.org/ABOUT_APACHE.html">About Apache</A>
d717 1
a717 1
  <A HREF="http://www.apache.org/bug_report.html">the bug report page</A>.
d740 1
a740 1
  <A HREF="http://www.apache.org/httpd">Apache web site</A>.
d745 1
a745 1
  <A HREF="http://www.apache.org/info/apache_books.html"
d757 1
a757 1
  <A HREF="http://www.apache.org/httpd">main web page</A>.
d825 1
a825 1
    <A HREF="http://www.apache.org/docs/misc/FAQ.html">FAQ</A>!</STRONG>
d867 1
a867 1
    <A HREF="http://www.apache.org/bug_report.html">logging a bug report</A>.
d987 1
a987 1
   HREF="http://www.apache.org/bug_report.html">bug report page</A>.
d1066 1
a1066 2
  <A HREF="http://www.apache.org/docs/misc/perf-tuning.html"
  >performance tuning page</A>.
d1077 1
a1077 1
   Regular expressions (aka "regexp"s) are useful in Apache because they 
d1080 1
a1080 1
   any "images" directory could be written as /.*\/images\/.*[jpg|gif]/.
d1084 1
a1084 1
   We implement a simple subset of Perl's regexp support, but it's
d1087 1
a1087 1
   HREF="http://www.perl.com/CPAN-local/doc/manual/html/pod/perlre.html#Version_8_Regular_Expresions"
d1109 2
a1110 2
   (&lt;URL:<a href="http://www.apache.org/dist/binaries/"
            >http://www.apache.org/dist/binaries/</a>&gt;),
d1241 1
a1241 1
  <A HREF="http://www.apache.org/bug_report.html">problem report</A>.
d1423 1
a1423 1
  HREF="http://www.linuxhq.com/HOWTO/Kernel-HOWTO.html" >Kernel
d1425 1
a1425 1
  a <A HREF="http://www.linuxhq.com/HOWTO/META-FAQ.html" >Linux
d1473 1
a1473 1
       &lt/Directory&gt; but saw &lt;/Directory&gt;</SAMP>" when
d1628 6
d1657 6
d1912 1
a1912 1
  <A HREF="http://www.apache.org/info/jdk-102.html"
d2052 1
a2052 1
  <A HREF="http://www.apache.org/docs/mod/core.html#namevirtualhost"
d2243 1
a2243 1
     <DD><CODE>AddHandler cgi-script cgi</CODE>
a2625 1
    <P>
a2629 1
    </P>
d2943 1
a2949 1
  </P>
d3200 1
a3200 1
  &quot;<A HREF="http://www.apache.org/related_projects.html"
d3218 1
a3218 1
  <A HREF="http://www.apache.org/docs/mod/mod_actions.html#action">
d3253 8
a3260 5
  log file rotation utility.</P>
  <P>The longer answer: In the src/support/ directory, you will find a
  utility called <CODE>rotatelogs</CODE> which can be used like this:<PRE>
   TransferLog "|/path/to/rotatelogs /path/to/logs/access_log 86400"
  </PRE> to enable daily rotation of the log files.<BR>
d3268 4
a3271 3
  Use it like this:<PRE>
   CustomLog "|/path/to/cronolog --symlink=/usr/local/apache/logs/access_log /usr/local/apache/logs/%Y/%m/access_log" combined
  </PRE></P>
d3311 1
a3311 1
  <a href="http://www.apache.org/related_projects.html"
@


1.6
log
@apache 1.3.12 + mod_ssl 2.6.2 merge
@
text
@d24 1
a24 1
  $Revision: 1.145 $ ($Date: 1999/06/24 15:02:53 $)
d86 1
a86 1
<!--   (A: you can't but "satisfy any; allow from all" can be close -->
d105 1
a105 4
   <LI><A HREF="#why">Why was Apache created?</A>
   </LI>
   <LI><A HREF="#relate">How does The Apache Group's work relate to
    other servers?</A>
d121 2
d255 14
a268 3
   <LI><A HREF="#ws2_32dll">When I try to start Apache for Windows, I get a message
	like "<samp>Unable To Locate WS2_32.DLL...</samp>". What should I do?</A>
   </LI>
d331 7
d391 3
d434 3
d515 9
d553 53
a605 12
  <P>
  Apache was originally based on code and ideas found in the most
  popular HTTP server of the time.. NCSA httpd 1.3 (early 1995). It has
  since evolved into a far superior system which can rival (and probably
  surpass) almost any other UNIX based HTTP server in terms of functionality,
  efficiency and speed.
  </P>
  <P>
  Since it began, it has been completely rewritten, and includes many new
  features. Apache is, as of January 1997, the most popular WWW server on
  the Internet, according to the
  <A HREF="http://www.netcraft.com/Survey/">Netcraft Survey</A>.
d611 1
a611 1
      <STRONG>Why was Apache created?</STRONG>
d614 5
a618 17
  To address the concerns of a group of WWW providers and part-time httpd
  programmers that httpd didn't behave as they wanted it to behave.
  Apache is an entirely volunteer effort, completely funded by its
  members, not by commercial sales.
  </P>
  <HR>
 </LI>

 <LI><A NAME="relate">
      <STRONG>How does The Apache Group's work relate to other
      server efforts, such as NCSA's?</STRONG>
     </A>
  <P>
  We, of course, owe a great debt to NCSA and their programmers for
  making the server Apache was based on. We now, however, have our own
  server, and our project is mostly our own. The Apache Project is an
  entirely independent venture.
d633 1
a633 1
  For many developers it is also a reverant connotation to the Native
d662 9
a670 8
  Apache has been shown to be substantially faster than many other
  free servers. Although certain commercial servers have claimed to
  surpass Apache's speed (it has not been demonstrated that any of these
  &quot;benchmarks&quot; are a good way of measuring WWW server speed at any
  rate), we feel that it is better to have a mostly-fast free server
  than an extremely-fast server that costs thousands of dollars. Apache
  is run on sites that get millions of hits per day, and they have
  experienced no performance difficulties.
d679 7
a685 11
  Apache is run on over 3 million Internet servers (as of June 1999). It has
  been tested thoroughly by both developers and users. The Apache Group
  maintains rigorous standards before releasing new versions of their
  server, and our server runs without a hitch on over one half of all
  WWW servers available on the Internet.  When bugs do show up, we
  release patches and new versions as soon as they are available.
  </P>
  <P>
  The Apache project's web site includes a page with a partial list of
  <A HREF="http://www.apache.org/info/apache_users.html">sites running
  Apache</A>.
d740 1
a740 1
  <A HREF="http://www.apache.org/">Apache web site</A>.
d757 1
a757 1
  <A HREF="http://www.apache.org/">main web page</A>.
d761 22
d1591 37
a1627 4
  Detailed answer: Prior to version 1.3.9, Apache for Windows used Winsock 1.1. Beginning with
  version 1.3.9, Apache began using Winsock 2 features (specifically, WSADuplicateSocket()).
  WS2_32.DLL implements the Winsock 2 API. Winsock 2 ships with Windows NT 4.0 and Windows 98.
  Some of the earlier releases of Windows 95 did not include Winsock 2.
d1631 23
a1653 1

d2068 1
a2068 2
  Please see the
  <A HREF="http://www.apache.org/docs/vhosts/">Apache
d2133 50
d2232 1
a2232 1
     <DD><CODE>AddHandler cgi-script .cgi</CODE>
d2445 8
a2452 7
  Processing a document at run-time is called <EM>parsing</EM> it; hence
  the term &quot;parsed HTML&quot; sometimes used for documents that
  contain SSI instructions.  Parsing tends to be <EM>extremely</EM>
  resource-consumptive, and is not enabled by default.  It can also
  interfere with the cachability of your documents, which can put a
  further load on your server.  (see the
  <A HREF="#ssi-part-ii">next question</A> for more information about this.)
d2600 36
d2742 1
a2742 1
   <DD><CODE>deny from all
d2744 1
a2744 1
    allow from .domain.com
d2752 1
a2752 1
    require valid-user
d2754 1
a2754 1
    satisfy any</CODE>
d2913 31
d3068 9
a3076 9
  You can't! The reason is: First, case translations for arbitrary
  length URLs cannot be done <EM>via</EM> regex patterns and
  corresponding substitutions.  One need a per-character pattern like
  sed/Perl <SAMP>tr|..|..|</SAMP> feature.  Second, just making URLs
  always upper or lower case will not resolve the complete problem of
  case-INSENSITIVE URLs, because actually the URLs had to be rewritten
  to the correct case-variant residing on the filesystem because in
  later processing Apache needs to access the file.  And Unix
  filesystem is always case-SENSITIVE.
d3079 4
a3082 2
  But there is a module named <CODE>mod_speling.c</CODE> (yes, it is named
  this way!) out there on the net. Try this one.
d3261 54
@


1.5
log
@Apache 1.3.11 + mod_ssl 2.5.0 merge
@
text
@d166 1
d1014 38
d2968 1
a2968 1
  (<SAMP>php3_auto_append_file</SAMP>), and mod_perl
@


1.4
log
@Apache 1.3.9 + Mod_ssl 2.4.2 - now builds with apaci nastiness.
@
text
@d255 3
d489 2
d569 19
d867 30
d1451 9
a1459 1
  add one if you don't already have one.  Then try to start the server
d1464 15
d2945 21
@


1.3
log
@Apache 1.3.4 merge
@
text
@d5 1
d24 1
a24 1
  $Revision: 1.135 $ ($Date: 1998/11/07 00:10:38 $)
d89 14
a102 5
<!-- - "expected </Directory> saw </Directory" due to buggy AIX     -->
<!--   compiler.                                                    -->
<UL>
 <LI><STRONG>Background</STRONG>
  <OL START=1>
d126 17
a142 2
 <LI><STRONG>Technical Questions</STRONG>
  <OL START=11>
d149 80
a228 2
   <LI><A HREF="#CGIoutsideScriptAlias">How do I enable CGI execution
        in directories other than the ScriptAlias?</A>
d230 2
a231 3
   <LI><A HREF="#premature-script-headers">What does it mean when my
        CGIs fail with &quot;<SAMP>Premature end of script
        headers</SAMP>&quot;?</A>
d233 2
a234 1
   <LI><A HREF="#ssi-part-i">How do I enable SSI (parsed HTML)?</A>
d236 3
a238 1
   <LI><A HREF="#ssi-part-ii">Why don't my parsed files get cached?</A>
d240 2
a241 1
   <LI><A HREF="#ssi-part-iii">How can I have my script output parsed?</A>
d243 2
a244 2
   <LI><A HREF="#ssi-part-iv">SSIs don't work for VirtualHosts and/or 
        user home directories</A>
d246 3
a248 1
   <LI><A HREF="#proxy">Does or will Apache act as a Proxy server?</A>
d250 4
a253 1
   <LI><A HREF="#multiviews">What are &quot;multiviews&quot;?</A>
d255 19
a279 6
   <LI><A HREF="#POSTnotallowed">Why do I keep getting &quot;Method Not 
        Allowed&quot; for form POST requests?</A>
   </LI>
   <LI><A HREF="#passwdauth">Can I use my <SAMP>/etc/passwd</SAMP> file
        for Web page authentication?</A>
   </LI>
a282 6
   <LI><A HREF="#errordocssi">How can I use <CODE>ErrorDocument</CODE>
        and SSI to simplify customized error messages?</A>
   </LI>
   <LI><A HREF="#setgid">Why do I get &quot;<SAMP>setgid: Invalid
        argument</SAMP>&quot; at startup?</A>
   </LI>
d291 22
a312 2
   <LI><A HREF="#putsupport">Why can't I publish to my Apache server
        using PUT on Netscape Gold and other programs?</A>
d314 24
a337 2
   <LI><A HREF="#fastcgi">Why isn't FastCGI included with Apache any
        more?</A>
d339 3
a341 2
   <LI><A HREF="#nodelay">Why am I getting &quot;<SAMP>httpd: could not
        set socket option TCP_NODELAY</SAMP>&quot; in my error log?</A>
d343 2
a344 2
   <LI><A HREF="#peerreset">Why am I getting &quot;<SAMP>connection
        reset by peer</SAMP>&quot; in my error log?</A>
d349 2
a350 2
   <LI><A HREF="#linuxiovec">Why do I get complaints about redefinition
        of &quot;<CODE>struct iovec</CODE>&quot; when compiling under Linux?</A>
d352 2
a353 2
   <LI><A HREF="#wheres-the-dump">The errorlog says Apache dumped core,
        but where's the dump file?</A>
d355 1
a355 2
   <LI><A HREF="#dnsauth">Why isn't restricting access by host or domain name
        working correctly?</A>
d357 1
a357 1
   <LI><A HREF="#SSL-i">Why doesn't Apache include SSL?</A>
d359 1
a359 2
   <LI><A HREF="#midi">How do I get Apache to send a MIDI file so the
        browser can play it?</A>
d361 2
a362 2
   <LI><A HREF="#cantbuild">Why won't Apache compile with my
        system's <SAMP>cc</SAMP>?</A>
d364 2
a365 1
   <LI><A HREF="#addlog">How do I add browsers and referrers to my logs?</A>
d367 2
a368 3
   <LI><A HREF="#bind8.1">Why do I get an error about an undefined
        reference to &quot;<SAMP>__inet_ntoa</SAMP>&quot; or other
        <SAMP>__inet_*</SAMP> symbols?</A>
d370 21
a390 5
   <LI><A HREF="#set-servername">Why does accessing directories only work
        when I include the trailing &quot;/&quot;
        (<EM>e.g.</EM>,&nbsp;<SAMP>http://foo.domain.com/~user/</SAMP>) but
        not when I omit it
        (<EM>e.g.</EM>,&nbsp;<SAMP>http://foo.domain.com/~user</SAMP>)?</A>
a394 3
   <LI><A HREF="#remote-user-var">Why is the environment variable
        <SAMP>REMOTE_USER</SAMP> not set?</A>
   </LI>
a398 6
   <LI><A HREF="#no-info-directives">Why doesn't mod_info list any
        directives?</A>
   </LI>
   <LI><A HREF="#linux-shmget">When I run it under Linux I get &quot;shmget:
        function not found&quot;, what should I do?</A>
   </LI>
d407 22
d453 20
a472 2
   <LI><A HREF="#cgi-spec">Where can I find the &quot;CGI
        specification&quot;?</A>
d474 1
a474 1
   <LI><A HREF="#year2000">Is Apache Year 2000 compliant?</A>
d476 2
a477 2
   <LI><A HREF="#namevhost">I upgraded to Apache 1.3 and now my
        virtual hosts don't work!</A>
d479 1
a479 33
   <LI><A HREF="#redhat">I'm using RedHat Linux and I have problems with httpd
        dying randomly or not restarting properly</A>
   </LI>
   <LI><A HREF="#stopping">I upgraded from an Apache version earlier
        than 1.2.0 and suddenly I have problems with Apache dying randomly
        or not restarting properly</A>
   </LI>
   <LI><A HREF="#redhat-htm">I'm using RedHat Linux and my .htm files are
        showing up as HTML source rather than being formatted!</A>
   </LI>
   <LI><A HREF="#glibc-crypt">I'm using RedHat Linux 5.0, or some other
        <SAMP>glibc</SAMP>-based Linux system, and I get errors with the
        <CODE>crypt</CODE> function when I attempt to build Apache 1.2.</A>
   </LI>
   <LI><A HREF="#nfslocking">Server hangs, or fails to start, and/or error log
        fills with &quot;<SAMP>fcntl: F_SETLKW: No record locks
        available</SAMP>&quot; or similar messages</A>
   </LI>
   <LI><A HREF="#zoom">What's the best hardware/operating system/... How do
        I get the most out of my Apache Web server?</A>
   </LI>
   <LI><A HREF="#regex">What are "regular expressions"?</A>
   </LI>
   <LI><A HREF="#broken-gcc">I'm using gcc and I get some compilation errors, 
	what is wrong?</A>
   </LI>
   <LI><A HREF="#htaccess-work">My <CODE>.htaccess</CODE> files are being
	ignored.</A>
   </LI>
   <LI><A HREF="#submit_patch">How do I submit a patch to the Apache Group?</A>
   </LI>
   <LI><A HREF="#aixccbug">Why am I getting "<SAMP>Expected &lt/Directory&gt;
        but saw &lt;/Directory&gt;</SAMP>" when I try to start Apache?</A>
d481 2
a482 2
   <LI><A HREF="#domination">Why has Apache stolen my favourite site's
        Internet address?</A>
d484 1
a484 1
   <LI><A HREF="#apspam">Why am I getting spam mail from the Apache site?</A>
d488 6
a493 1
</UL>
d498 14
a511 4
  <H3>
   Background
  </H3>
<OL START=1>
d592 1
a592 1
  Apache is run on over 1.2 million Internet servers (as of July 1998). It has
d679 19
a697 2
  <H3>Technical Questions</H3>
<OL START=11>
d742 2
a743 1
    USENET newsgroup</STRONG>
d810 2
a811 3
 <LI><A NAME="CGIoutsideScriptAlias">
      <STRONG>How do I enable CGI execution in directories other than
      the ScriptAlias?</STRONG>
d814 1
a814 8
  Apache recognizes all files in a directory named as a
  <A HREF="../mod/mod_alias.html#scriptalias"><SAMP>ScriptAlias</SAMP></A>
  as being eligible for execution rather than processing as normal
  documents.  This applies regardless of the file name, so scripts in a
  ScriptAlias directory don't need to be named
  &quot;<SAMP>*.cgi</SAMP>&quot; or &quot;<SAMP>*.pl</SAMP>&quot; or
  whatever.  In other words, <EM>all</EM> files in a ScriptAlias
  directory are scripts, as far as Apache is concerned.
d817 10
a826 6
  To persuade Apache to execute scripts in other locations, such as in
  directories where normal documents may also live, you must tell it how
  to recognize them - and also that it's okay to execute them.  For
  this, you need to use something like the
  <A HREF="../mod/mod_mime.html#addhandler"><SAMP>AddHandler</SAMP></A>
  directive.
d829 9
a837 21
  <OL>
   <LI>In an appropriate section of your server configuration files, add
    a line such as
    <P>
    <DL>
     <DD><CODE>AddHandler cgi-script .cgi</CODE>
     </DD>
    </DL>
    <P></P>
    <P>
    The server will then recognize that all files in that location (and
    its logical descendants) that end in &quot;<SAMP>.cgi</SAMP>&quot;
    are script files, not documents.
    </P>
   </LI>
   <LI>Make sure that the directory location is covered by an
    <A HREF="../mod/core.html#options"><SAMP>Options</SAMP></A>
    declaration that includes the <SAMP>ExecCGI</SAMP> option.
   </LI>
  </OL>
  <P></P>
d839 3
a841 6
  In some situations, you might not want to actually
  allow all files named &quot;<SAMP>*.cgi</SAMP>&quot; to be executable.
  Perhaps all you want is to enable a particular file in a normal directory to
  be executable. This can be alternatively accomplished 
  <EM>via</EM> <A HREF="../mod/mod_rewrite.html"><SAMP>mod_rewrite</SAMP></A> 
  and the following steps:
a842 22
  <P>
  <OL>
   <LI>Locally add to the corresponding <SAMP>.htaccess</SAMP> file a ruleset
    similar to this one:
    <P>
    <DL>
     <DD><CODE>RewriteEngine on
      <BR>
      RewriteBase   /~foo/bar/
      <BR>
      RewriteRule   ^quux\.cgi$  -  [T=application/x-httpd-cgi]</CODE>
     </DD>
    </DL>
    <P></P>
   </LI>
   <LI>Make sure that the directory location is covered by an
    <A HREF="../mod/core.html#options"><SAMP>Options</SAMP></A>
    declaration that includes the <SAMP>ExecCGI</SAMP> and
    <SAMP>FollowSymLinks</SAMP> option.
   </LI>
  </OL>
  <P></P>
d846 82
a927 3
 <LI><A NAME="premature-script-headers">
      <STRONG>What does it mean when my CGIs fail with
      &quot;<SAMP>Premature end of script headers</SAMP>&quot;?</STRONG>
d930 64
a993 3
  It means just what it says: the server was expecting a complete set of
  HTTP headers (one or more followed by a blank line), and didn't get
  them.
d996 7
a1002 6
  The most common cause of this problem is the script dying before
  sending the complete set of headers, or possibly any at all, to the
  server.  To see if this is the case, try running the script standalone
  from an interactive session, rather than as a script under the server.
  If you get error messages, this is almost certainly the cause of the
  &quot;premature end of script headers&quot; message.
d1005 4
a1008 6
  The second most common cause of this (aside from people not
  outputting the required headers at all) is a result of an interaction
  with Perl's output buffering.  To make Perl flush its buffers
  after each output statement, insert the following statements around
  the <CODE>print</CODE> or <CODE>write</CODE> statements that send your
  HTTP headers:
d1012 5
a1016 10
   <DD><CODE>{<BR>
    &nbsp;local ($oldbar) = $|;<BR>
    &nbsp;$cfh = select (STDOUT);<BR>
    &nbsp;$| = 1;<BR>
    &nbsp;#<BR>
    &nbsp;# print your HTTP headers here<BR>
    &nbsp;#<BR>
    &nbsp;$| = $oldbar;<BR>
    &nbsp;select ($cfh);<BR>
    }</CODE>
a1019 20
  <P>
  This is generally only necessary when you are calling external
  programs from your script that send output to stdout, or if there will
  be a long delay between the time the headers are sent and the actual
  content starts being emitted.  To maximize performance, you should
  turn buffer-flushing back <EM>off</EM> (with <CODE>$| = 0</CODE> or the
  equivalent) after the statements that send the headers, as displayed
  above.
  </P>
  <P>
  If your script isn't written in Perl, do the equivalent thing for
  whatever language you <EM>are</EM> using (<EM>e.g.</EM>, for C, call
  <CODE>fflush()</CODE> after writing the headers).
  </P>
  <P>
  Another cause for the &quot;premature end of script headers&quot;
  message are the RLimitCPU and RLimitMEM directives. You may
  get the message if the CGI script was killed due to a
  resource limit.
  </P>
d1023 3
a1025 2
 <LI><A NAME="ssi-part-i">
      <STRONG>How do I enable SSI (parsed HTML)?</STRONG>
d1028 2
a1029 18
  SSI (an acronym for Server-Side Include) directives allow static HTML
  documents to be enhanced at run-time (<EM>e.g.</EM>, when delivered to
  a client by Apache).  The format of SSI directives is covered
  in the <A HREF="../mod/mod_include.html">mod_include manual</A>;
  suffice it to say that Apache supports not only SSI but
  xSSI (eXtended SSI) directives.
  </P>
  <P>
  Processing a document at run-time is called <EM>parsing</EM> it; hence
  the term &quot;parsed HTML&quot; sometimes used for documents that
  contain SSI instructions.  Parsing tends to be <EM>extremely</EM>
  resource-consumptive, and is not enabled by default.  It can also
  interfere with the cachability of your documents, which can put a
  further load on your server.  (see the
  <A HREF="#ssi-part-ii">next question</A> for more information about this.)
  </P>
  <P>
  To enable SSI processing, you need to
d1032 14
a1045 3
   <LI>Build your server with the
    <A HREF="../mod/mod_include.html"><SAMP>mod_include</SAMP></A>
    module.  This is normally compiled in by default.
d1047 6
a1052 3
   <LI>Make sure your server configuration files have an
    <A HREF="../mod/core.html#options"><SAMP>Options</SAMP></A>
    directive which permits <SAMP>Includes</SAMP>.
d1054 7
a1060 18
   <LI>Make sure that the directory where you want the SSI documents to
    live is covered by the &quot;server-parsed&quot; content handler,
    either explicitly or in some ancestral location.  That can be done
    with the following
    <A HREF="../mod/mod_mime.html#addhandler"><SAMP>AddHandler</SAMP></A>
    directive:
    <P>
    <DL>
     <DD><CODE>AddHandler server-parsed .shtml</CODE>
     </DD>
    </DL>
    <P></P>
    <P>
    This indicates that all files ending in &quot;.shtml&quot; in that
    location (or its descendants) should be parsed.  Note that using
    &quot;.html&quot; will cause all normal HTML files to be parsed,
    which may put an inordinate load on your server.
    </P>
d1064 8
a1071 3
  For additional information, see the <CITE>Apache Week</CITE> article on
  <A HREF="http://www.apacheweek.com/features/ssi" REL="Help"
  ><CITE>Using Server Side Includes</CITE></A>.
d1076 4
a1079 2
 <LI><A NAME="ssi-part-ii">
      <STRONG>Why don't my parsed files get cached?</STRONG>
d1082 3
a1084 11
  Since the server is performing run-time processing of your SSI
  directives, which may change the content shipped to the client, it
  can't know at the time it starts parsing what the final size of the
  result will be, or whether the parsed result will always be the same.
  This means that it can't generate <SAMP>Content-Length</SAMP> or
  <SAMP>Last-Modified</SAMP> headers.  Caches commonly work by comparing
  the <SAMP>Last-Modified</SAMP> of what's in the cache with that being
  delivered by the server.  Since the server isn't sending that header
  for a parsed document, whatever's doing the caching can't tell whether
  the document has changed or not - and so fetches it again to be on the
  safe side.
d1087 11
a1097 14
  You can work around this in some cases by causing an
  <SAMP>Expires</SAMP> header to be generated.  (See the
  <A HREF="../mod/mod_expires.html" REL="Help"><SAMP>mod_expires</SAMP></A>
  documentation for more details.)  Another possibility is to use the
  <A HREF="../mod/mod_include.html#xbithack" REL="Help"
  ><SAMP>XBitHack Full</SAMP></A>
  mechanism, which tells Apache to send (under certain circumstances
  detailed in the XBitHack directive description) a
  <SAMP>Last-Modified</SAMP> header based upon the last modification
  time of the file being parsed.  Note that this may actually be lying
  to the client if the parsed file doesn't change but the SSI-inserted
  content does; if the included content changes often, this can result
  in stale copies being cached.
  </P>
d1101 24
a1124 2
 <LI><A NAME="ssi-part-iii">
      <STRONG>How can I have my script output parsed?</STRONG>
d1126 1
d1128 2
a1129 7
  So you want to include SSI directives in the output from your CGI
  script, but can't figure out how to do it?
  The short answer is &quot;you can't.&quot;  This is potentially
  a security liability and, more importantly, it can not be cleanly
  implemented under the current server API.  The best workaround
  is for your script itself to do what the SSIs would be doing.
  After all, it's generating the rest of the content.
d1131 4
d1136 1
a1136 2
  This is a feature The Apache Group hopes to add in the next major
  release after 1.3.
d1141 128
a1268 3
 <LI><A NAME="ssi-part-iv">
      <STRONG>SSIs don't work for VirtualHosts and/or 
        user home directories.</STRONG>
d1270 21
d1292 4
a1295 4
  This is almost always due to having some setting in your config file that
  sets "Options Includes" or some other setting for your DocumentRoot
  but not for other directories.  If you set it inside a Directory
  section, then that setting will only apply to that directory.  
d1297 12
d1311 3
a1313 2
 <LI><A NAME="proxy">
      <STRONG>Does or will Apache act as a Proxy server?</STRONG>
d1315 22
d1338 7
a1344 3
  Apache version 1.1 and above comes with a
  <A HREF="../mod/mod_proxy.html">proxy module</A>.
  If compiled in, this will make Apache act as a caching-proxy server.
d1349 4
a1352 2
 <LI><A NAME="multiviews">
      <STRONG>What are &quot;multiviews&quot;?</STRONG>
d1354 1
d1356 14
a1369 8
  &quot;Multiviews&quot; is the general name given to the Apache
  server's ability to provide language-specific document variants in
  response to a request.  This is documented quite thoroughly in the
  <A HREF="../content-negotiation.html" REL="Help">content negotiation</A>
  description page.  In addition, <CITE>Apache Week</CITE> carried an
  article on this subject entitled
  &quot;<A HREF="http://www.apacheweek.com/features/negotiation" REL="Help"
        ><CITE>Content Negotiation Explained</CITE></A>&quot;.
d1374 49
d1555 2
a1556 3
 <LI><A NAME="POSTnotallowed">
      <STRONG>Why do I keep getting &quot;Method Not Allowed&quot; for 
      form POST requests?</STRONG>
d1559 5
a1563 6
  This is almost always due to Apache not being configured to treat the
  file you are trying to POST to as a CGI script.  You can not POST 
  to a normal HTML file; the operation has no meaning.  See the FAQ 
  entry on <A HREF="#CGIoutsideScriptAlias">CGIs outside ScriptAliased
  directories</A> for details on how to configure Apache to treat the
  file in question as a CGI.
d1568 2
a1569 3
 <LI><A NAME="passwdauth">
      <STRONG>Can I use my <SAMP>/etc/passwd</SAMP> file
      for Web page authentication?</STRONG>
d1572 11
a1582 2
  Yes, you can - but it's a <STRONG>very bad idea</STRONG>.  Here are
  some of the reasons:
d1584 6
a1589 110
  <UL>
   <LI>The Web technology provides no governors on how often or how
    rapidly password (authentication failure) retries can be made.  That
    means that someone can hammer away at your system's
    <SAMP>root</SAMP> password using the Web, using a dictionary or
    similar mass attack, just as fast as the wire and your server can
    handle the requests.  Most operating systems these days include
    attack detection (such as <EM>n</EM> failed passwords for the same
    account within <EM>m</EM> seconds) and evasion (breaking the
    connection, disabling the account under attack, disabling
    <EM>all</EM> logins from that source, <EM>et cetera</EM>), but the
    Web does not.
   </LI>
   <LI>An account under attack isn't notified (unless the server is
    heavily modified); there's no &quot;You have 19483 login
    failures&quot; message when the legitimate owner logs in.
   </LI>
   <LI>Without an exhaustive and error-prone examination of the server
    logs, you can't tell whether an account has been compromised.
    Detecting that an attack has occurred, or is in progress, is fairly
    obvious, though - <EM>if</EM> you look at the logs.
   </LI>
   <LI>Web authentication passwords (at least for Basic authentication)
    generally fly across the wire, and through intermediate proxy
    systems, in what amounts to plain text.  &quot;O'er the net we
    go/Caching all the way;/O what fun it is to surf/Giving my password
    away!&quot;
   </LI>
   <LI>Since HTTP is stateless, information about the authentication is
    transmitted <EM>each and every time</EM> a request is made to the
    server.  Essentially, the client caches it after the first
    successful access, and transmits it without asking for all
    subsequent requests to the same server.
   </LI>
   <LI>It's relatively trivial for someone on your system to put up a
    page that will steal the cached password from a client's cache
    without them knowing.  Can you say &quot;password grabber&quot;?
   </LI>
  </UL>
  <P>
  If you still want to do this in light of the above disadvantages, the
  method is left as an exercise for the reader.  It'll void your Apache
  warranty, though, and you'll lose all accumulated UNIX guru points.
  </P>
  <HR>
 </LI>

 <LI><A NAME="errordoc401">
      <STRONG>Why doesn't my <CODE>ErrorDocument 401</CODE> work?</STRONG>
     </A>
  <P>
  You need to use it with a URL in the form
  &quot;<SAMP>/foo/bar</SAMP>&quot; and not one with a method and
  hostname such as &quot;<SAMP>http://host/foo/bar</SAMP>&quot;.  See the
  <A HREF="../mod/core.html#errordocument"><SAMP>ErrorDocument</SAMP></A>
  documentation for details.  This was incorrectly documented in the past.
  </P>
  <HR>
 </LI>

 <LI><A NAME="errordocssi">
      <STRONG>How can I use <CODE>ErrorDocument</CODE>
      and SSI to simplify customized error messages?</STRONG>
     </A>
  <P>
  Have a look at <A HREF="custom_errordocs.html">this document</A>.
  It shows in example form how you can a combination of XSSI and
  negotiation to tailor a set of <CODE>ErrorDocument</CODE>s to your
  personal taste, and returning different internationalized error
  responses based on the client's native language.
  </P>
  <HR>
 </LI>

 <LI><A NAME="setgid">
      <STRONG>Why do I get &quot;<SAMP>setgid: Invalid
      argument</SAMP>&quot; at startup?</STRONG>
     </A>
  <P>
  Your
  <A HREF="../mod/core.html#group"><SAMP>Group</SAMP></A>
  directive (probably in <SAMP>conf/httpd.conf</SAMP>) needs to name a
  group that actually exists in the <SAMP>/etc/group</SAMP> file (or
  your system's equivalent).
  </P>
  <HR>
 </LI>

 <LI><A NAME="cookies1">
      <STRONG>Why does Apache send a cookie on every response?</STRONG>
     </A>
  <P>
  Apache does <EM>not</EM> send automatically send a cookie on every
  response, unless you have re-compiled it with the
  <A HREF="../mod/mod_usertrack.html"><SAMP>mod_usertrack</SAMP></A>
  module, and specifically enabled it with the
  <A HREF="../mod/mod_usertrack.html#cookietracking"
  ><SAMP>CookieTracking</SAMP></A>
  directive.
  This module has been in Apache since version 1.2.
  This module may help track users, and uses cookies to do this. If
  you are not using the data generated by <SAMP>mod_usertrack</SAMP>, do
  not compile it into Apache. 
  </P>
  <HR>
 </LI>

 <LI><A NAME="cookies2">
      <STRONG>Why don't my cookies work, I even compiled in
      <SAMP>mod_cookies</SAMP>?
d1635 451
a2085 4
  In the meantime, a workaround is to tell
  Apache to &quot;fake&quot; an HTTP/1.0 response to requests that come
  from the JDK methods; this can be done by including a line such as the
  following in your server configuration files:
d2087 4
a2090 13
  <P>
  <DL>
   <DD><CODE>BrowserMatch Java1.0 force-response-1.0
    <BR>
    BrowserMatch JDK/1.0 force-response-1.0</CODE>
   </DD>
  </DL>
  <P></P>
  <P>
  More information about this issue can be found in the
  <A HREF="http://www.apache.org/info/jdk-102.html"
  ><CITE>Java and HTTP/1.1</CITE></A>
  page at the Apache web site.
d2095 2
a2096 3
 <LI><A NAME="putsupport">
      <STRONG>Why can't I publish to my Apache server using PUT on
      Netscape Gold and other programs?</STRONG>
d2099 12
a2110 7
  Because you need to install and configure a script to handle
  the uploaded files.  This script is often called a &quot;PUT&quot; handler.
  There are several available, but they may have security problems.
  Using FTP uploads may be easier and more secure, at least for now.
  For more information, see the <CITE>Apache Week</CITE> article
  <A HREF="http://www.apacheweek.com/features/put"
  ><CITE>Publishing Pages with PUT</CITE></A>.
d2133 2
a2134 3
 <LI><A NAME="nodelay">
      <STRONG>Why am I getting &quot;<SAMP>httpd: could not set socket
      option TCP_NODELAY</SAMP>&quot; in my error log?</STRONG>
d2137 52
a2188 4
  This message almost always indicates that the client disconnected
  before Apache reached the point of calling <CODE>setsockopt()</CODE>
  for the connection.  It shouldn't occur for more than about 1% of the
  requests your server handles, and it's advisory only in any case.
d2193 2
a2194 3
 <LI><A NAME="peerreset">
      <STRONG>Why am I getting &quot;<SAMP>connection reset by
      peer</SAMP>&quot; in my error log?</STRONG>
d2197 26
a2222 6
  This is a normal message and nothing about which to be alarmed.  It simply
  means that the client canceled the connection before it had been
  completely set up - such as by the end-user pressing the &quot;Stop&quot;
  button.  People's patience being what it is, sites with response-time
  problems or slow network links may experiences this more than
  high-capacity ones or those with large pipes to the network.
d2227 2
a2228 3
 <LI><A NAME="nph-scripts">
      <STRONG>How can I get my script's output without Apache buffering
      it?  Why doesn't my server push work?</STRONG>
d2231 7
a2237 7
  As of Apache 1.3, CGI scripts are essentially not buffered.  Every time
  your script does a "flush" to output data, that data gets relayed on to
  the client.  Some scripting languages, for example Perl, have their own
  buffering for output - this can be disabled by setting the <CODE>$|</CODE>
  special variable to 1.  Of course this does increase the overall number
  of packets being transmitted, which can result in a sense of slowness for 
  the end user.
d2239 3
a2241 3
  <P>Prior to 1.3, you needed to use "nph-" scripts to accomplish non-buffering.
  Today, the only difference between nph scripts and normal scripts is
  that nph scripts require the full HTTP headers to be sent.
d2246 3
a2248 4
 <LI><A NAME="linuxiovec">
      <STRONG>Why do I get complaints about redefinition
      of &quot;<CODE>struct iovec</CODE>&quot; when
      compiling under Linux?</STRONG>
d2251 4
a2254 3
  This is a conflict between your C library includes and your kernel
  includes.  You need to make sure that the versions of both are matched
  properly.  There are two workarounds, either one will solve the problem:
a2255 12
  <P>
  <UL>
   <LI>Remove the definition of <CODE>struct iovec</CODE> from your C
    library includes.  It is located in <CODE>/usr/include/sys/uio.h</CODE>.
    <STRONG>Or,</STRONG>
   </LI>
   <LI>Add  <CODE>-DNO_WRITEV</CODE> to the <CODE>EXTRA_CFLAGS</CODE>
    line in your <SAMP>Configuration</SAMP> and reconfigure/rebuild.
    This hurts performance and should only be used as a last resort.
   </LI>
  </UL>
  <P></P>
d2259 3
a2261 3
 <LI><A NAME="wheres-the-dump">
      <STRONG>The errorlog says Apache dumped core, but where's the dump
      file?</STRONG>
d2264 5
a2268 7
  In Apache version 1.2, the error log message
  about dumped core includes the directory where the dump file should be
  located.  However, many Unixes do not allow a process that has
  called <CODE>setuid()</CODE> to dump core for security reasons;
  the typical Apache setup has the server started as root to bind to
  port 80, after which it changes UIDs to a non-privileged user to
  serve requests.
d2270 7
d2278 11
a2288 6
  Dealing with this is extremely operating system-specific, and may
  require rebuilding your system kernel.  Consult your operating system
  documentation or vendor for more information about whether your system
  does this and how to bypass it.  If there <EM>is</EM> a documented way
  of bypassing it, it is recommended that you bypass it only for the
  <SAMP>httpd</SAMP> server process if possible.
d2291 5
a2295 9
  The canonical location for Apache's core-dump files is the
  <A HREF="../mod/core.html#serverroot">ServerRoot</A>
  directory. As of Apache version 1.3, the location can be set <EM>via</EM>
  the
  <A HREF="../mod/core.html#coredumpdirectory"
  ><SAMP>CoreDumpDirectory</SAMP></A>
  directive to a different directory. Make sure that this directory is
  writable by the user the server runs as (as opposed to the user the server
  is <EM>started</EM> as).
d2300 19
a2365 223
 <LI><A NAME="SSL-i">
      <STRONG>Why doesn't Apache include SSL?</STRONG>
     </A>
  <P>
  SSL (Secure Socket Layer) data transport requires encryption, and many
  governments have restrictions upon the import, export, and use of
  encryption technology.  If Apache included SSL in the base package,
  its distribution would involve all sorts of legal and bureaucratic
  issues, and it would no longer be freely available.  Also, some of
  the technology required to talk to current clients using SSL is
  patented by <A HREF="http://www.rsa.com/">RSA Data Security</A>,
  who restricts its use without a license.
  </P>
  <P>
  Some SSL implementations of Apache are available, however; see the
  &quot;<A HREF="http://www.apache.org/related_projects.html"
        >related projects</A>&quot;
  page at the main Apache web site.
  </P>
  <P>
  You can find out more about this topic in the <CITE>Apache Week</CITE>
  article about
  <A HREF="http://www.apacheweek.com/features/ssl" REL="Help"
  ><CITE>Apache and Secure Transactions</CITE></A>.
  </P>
  <HR>
 </LI>

 <LI><A NAME="midi">
      <STRONG>How do I get Apache to send a MIDI file so the browser can
      play it?</STRONG>
     </A>
  <P>
  Even though the registered MIME type for MIDI files is
  <SAMP>audio/midi</SAMP>, some browsers are not set up to recognize it
  as such; instead, they look for <SAMP>audio/x-midi</SAMP>.  There are
  two things you can do to address this:
  </P>
  <OL>
   <LI>Configure your browser to treat documents of type
    <SAMP>audio/midi</SAMP> correctly.  This is the type that Apache
    sends by default.  This may not be workable, however, if you have
    many client installations to change, or if some or many of the
    clients are not under your control.
   </LI>
   <LI>Instruct Apache to send a different <SAMP>Content-type</SAMP>
    header for these files by adding the following line to your server's
    configuration files:
    <P>
    <DL>
     <DD><CODE>AddType audio/x-midi .mid .midi .kar</CODE>
     </DD>
    </DL>
    <P></P>
    <P>
    Note that this may break browsers that <EM>do</EM> recognize the
    <SAMP>audio/midi</SAMP> MIME type unless they're prepared to also
    handle <SAMP>audio/x-midi</SAMP> the same way.
    </P>
   </LI>
  </OL>
  <HR>
 </LI>

 <LI><A NAME="cantbuild">
      <STRONG>Why won't Apache compile with my system's
      <SAMP>cc</SAMP>?</STRONG>
     </A>
  <P>
  If the server won't compile on your system, it is probably due to one
  of the following causes:
  </P>
  <UL>
   <LI><STRONG>The <SAMP>Configure</SAMP> script doesn't recognize your system
    environment.</STRONG>
    <BR>
    This might be either because it's completely unknown or because
    the specific environment (include files, OS version, <EM>et
    cetera</EM>) isn't explicitly handled.  If this happens, you may
    need to port the server to your OS yourself.
   </LI>
   <LI><STRONG>Your system's C compiler is garbage.</STRONG>
    <BR>
    Some operating systems include a default C compiler that is either
    not ANSI C-compliant or suffers from other deficiencies.  The usual
    recommendation in cases like this is to acquire, install, and use
    <SAMP>gcc</SAMP>.
   </LI>
   <LI><STRONG>Your <SAMP>include</SAMP> files may be confused.</STRONG>
    <BR>
    In some cases, we have found that a compiler installation or system
    upgrade has left the C header files in an inconsistent state.  Make
    sure that your include directory tree is in sync with the compiler and
    the operating system.
   </LI>
   <LI><STRONG>Your operating system or compiler may be out of
    revision.</STRONG>
    <BR>
    Software vendors (including those that develop operating systems)
    issue new releases for a reason; sometimes to add functionality, but
    more often to fix bugs that have been discovered.  Try upgrading
    your compiler and/or your operating system.
   </LI>
  </UL>
  <P>
  The Apache Group tests the ability to build the server on many
  different platforms.  Unfortunately, we can't test all of the OS
  platforms there are.  If you have verified that none of the above
  issues is the cause of your problem, and it hasn't been reported
  before, please submit a
  <A HREF="http://www.apache.org/bug_report.html">problem report</A>.
  Be sure to include <EM>complete</EM> details, such as the compiler
  &amp; OS versions and exact error messages.
  </P>
  <HR>
 </LI>

 <LI><A NAME="addlog">
      <STRONG>How do I add browsers and referrers to my logs?</STRONG>
     </A>
  <P>
  Apache provides a couple of different ways of doing this.  The
  recommended method is to compile the
  <A HREF="../mod/mod_log_config.html"><SAMP>mod_log_config</SAMP></A>
  module into your configuration and use the
  <A HREF="../mod/mod_log_config.html#customlog"><SAMP>CustomLog</SAMP></A>
  directive.
  </P>
  <P>
  You can either log the additional information in files other than your
  normal transfer log, or you can add them to the records already being
  written.  For example:
  </P>
  <P>
  <CODE>
   CustomLog&nbsp;logs/access_log&nbsp;"%h&nbsp;%l&nbsp;%u&nbsp;%t&nbsp;\"%r\"&nbsp;%s&nbsp;%b&nbsp;\"%{Referer}i\"&nbsp;\"%{User-Agent}i\""
  </CODE>
  </P>
  <P>
  This will add the values of the <SAMP>User-agent:</SAMP> and
  <SAMP>Referer:</SAMP> headers, which indicate the client and the
  referring page, respectively, to the end of each line in the access
  log.
  </P>
  <P>
  You may want to check out the <CITE>Apache Week</CITE> article
  entitled:
  &quot;<A HREF="http://www.apacheweek.com/features/logfiles" REL="Help"
        ><CITE>Gathering Visitor Information: Customising Your
         Logfiles</CITE></A>&quot;.
  </P>
  <HR>
 </LI>

 <LI><A NAME="bind8.1">
      <STRONG>Why do I get an error about an undefined reference to
      &quot;<SAMP>__inet_ntoa</SAMP>&quot; or other
      <SAMP>__inet_*</SAMP> symbols?</STRONG>
     </A>
  <P>
  If you have installed <A HREF="http://www.isc.org/bind.html">BIND-8</A>
  then this is normally due to a conflict between your include files
  and your libraries.  BIND-8 installs its include files and libraries
  <CODE>/usr/local/include/</CODE> and <CODE>/usr/local/lib/</CODE>, while
  the resolver that comes with your system is probably installed in
  <CODE>/usr/include/</CODE> and <CODE>/usr/lib/</CODE>.  If
  your system uses the header files in <CODE>/usr/local/include/</CODE>
  before those in <CODE>/usr/include/</CODE> but you do not use the new
  resolver library, then the two versions will conflict.
  </P>
  <P>
  To resolve this, you can either make sure you use the include files
  and libraries that came with your system or make sure to use the
  new include files and libraries.  Adding <CODE>-lbind</CODE> to the
  <CODE>EXTRA_LDFLAGS</CODE> line in your <SAMP>Configuration</SAMP>
  file, then re-running <SAMP>Configure</SAMP>, should resolve the
  problem.  (Apache versions 1.2.* and earlier use
  <CODE>EXTRA_LFLAGS</CODE> instead.)
  </P>
  <P>
  <STRONG>Note:</STRONG>As of BIND 8.1.1, the bind libraries and files are
  installed under <SAMP>/usr/local/bind</SAMP> by default, so you
  should not run into this problem.  Should you want to use the bind
  resolvers you'll have to add the following to the respective lines:
  </P>
  <P>
  <DL>
   <DD><CODE>EXTRA_CFLAGS=-I/usr/local/bind/include
    <BR>
    EXTRA_LDFLAGS=-L/usr/local/bind/lib
    <BR>
    EXTRA_LIBS=-lbind</CODE>
   </DD>
  </DL>
  <P></P>
  <HR>
 </LI>

 <LI><A NAME="set-servername">
      <STRONG>Why does accessing directories only work when I include
      the trailing &quot;/&quot;
      (<EM>e.g.</EM>,&nbsp;<SAMP>http://foo.domain.com/~user/</SAMP>)
      but not when I omit it
      (<EM>e.g.</EM>,&nbsp;<SAMP>http://foo.domain.com/~user</SAMP>)?</STRONG>
     </A>
  <P>
  When you access a directory without a trailing &quot;/&quot;, Apache needs
  to send what is called a redirect to the client to tell it to
  add the trailing slash.  If it did not do so, relative URLs would
  not work properly.  When it sends the redirect, it needs to know
  the name of the server so that it can include it in the redirect.
  There are two ways for Apache to find this out; either it can guess,
  or you can tell it.  If your DNS is configured correctly, it can
  normally guess without any problems.  If it is not, however, then
  you need to tell it.
  </P>
  <P>
  Add a <A HREF="../mod/core.html#servername">ServerName</A> directive
  to the config file to tell it what the domain name of the server is.
  </P>
  <HR>
 </LI>

a2388 27
 <LI><A NAME="remote-user-var">
      <STRONG>Why is the environment variable 
      <SAMP>REMOTE_USER</SAMP> not set?</STRONG>
     </A>
  <P>
  This variable is set and thus available in SSI or CGI scripts <STRONG>if and
  only if</STRONG> the requested document was protected by access
  authentication.  For an explanation on how to implement these restrictions,
  see
  <A HREF="http://www.apacheweek.com/"><CITE>Apache Week</CITE></A>'s
  articles on
  <A HREF="http://www.apacheweek.com/features/userauth"
  ><CITE>Using User Authentication</CITE></A>
  or
  <A HREF="http://www.apacheweek.com/features/dbmauth"
  ><CITE>DBM User Authentication</CITE></A>.
  </P>
  <P>
  Hint: When using a CGI script to receive the data of a HTML <SAMP>FORM</SAMP>
  notice that protecting the document containing the <SAMP>FORM</SAMP> is not
  sufficient to provide <SAMP>REMOTE_USER</SAMP> to the CGI script.  You have
  to protect the CGI script, too. Or alternatively only the CGI script (then
  authentication happens only after filling out the form).
  </P>
  <HR>
 </LI>

a2428 48
 <LI><A NAME="no-info-directives">
      <STRONG>Why doesn't mod_info list any directives?</STRONG>
     </A>
  <P>
  The <A HREF="../mod/mod_info.html"><SAMP>mod_info</SAMP></A>
  module allows you to use a Web browser to see how your server is
  configured.  Among the information it displays is the list modules and
  their configuration directives.  The &quot;current&quot; values for
  the directives are not necessarily those of the running server; they
  are extracted from the configuration files themselves at the time of
  the request.  If the files have been changed since the server was last
  reloaded, the display will will not match the values actively in use.
  If the files and the path to the files are not readable by the user as
  which the server is running (see the
  <A HREF="../mod/core.html#user"><SAMP>User</SAMP></A>
  directive), then <SAMP>mod_info</SAMP> cannot read them in order to
  list their values.  An entry <EM>will</EM> be made in the error log in
  this event, however.
  </P>
  <HR>
 </LI>

 <LI><A NAME="linux-shmget">
      <STRONG>When I run it under Linux I get &quot;shmget:
      function not found&quot;, what should I do?</STRONG>
     </A>
  <P>
  Your kernel has been built without SysV IPC support.  You will have to
  rebuild the kernel with that support enabled (it's under the
  &quot;General Setup&quot; submenu).  Documentation for
  kernel building is beyond the scope of this FAQ; you should consult
  the
  <A HREF="http://www.linuxhq.com/HOWTO/Kernel-HOWTO.html"
  >Kernel HOWTO</A>,
  or the documentation provided with your distribution, or a
  <A HREF="http://www.linuxhq.com/HOWTO/META-FAQ.html"
  >Linux newsgroup/mailing list</A>.
  As a last-resort workaround, you can
  comment out the <CODE>#define&nbsp;USE_SHMGET_SCOREBOARD</CODE>
  definition in the
  <SAMP>LINUX</SAMP> section of
  <SAMP>src/conf.h</SAMP> and rebuild the server (prior to 1.3b4, simply
  removing <CODE>#define&nbsp;HAVE_SHMGET</CODE> would have sufficed).
  This will produce a server which is slower and less reliable.
  </P>
  <HR>
 </LI>

d2522 74
d2684 7
a2690 7
  If the rule starts with <SAMP>/somedir/...</SAMP> make sure that really no
  <SAMP>/somedir</SAMP> exists on the filesystem if you don't want to lead the
  URL to match this directory, <EM>i.e.</EM>, there must be no root directory named
  <SAMP>somedir</SAMP> on the filesystem. Because if there is such a
  directory, the URL will not get prefixed with DocumentRoot. This behaviour
  looks ugly, but is really important for some other aspects of URL
  rewriting.
d2700 9
a2708 10
  You can't! The reason is: First, case translations for arbitrary length URLs
  cannot be done <EM>via</EM> regex patterns and corresponding substitutions.
  One need
  a per-character pattern like sed/Perl <SAMP>tr|..|..|</SAMP> feature. 
  Second, just
  making URLs always upper or lower case will not resolve the complete problem
  of case-INSENSITIVE URLs, because actually the URLs had to be rewritten to
  the correct case-variant residing on the filesystem because in later
  processing Apache needs to access the file.  And Unix filesystem is always
  case-SENSITIVE.
d2717 2
a2718 177
 <LI><A NAME="rewrite-virthost">
      <STRONG> Why are RewriteRules in my VirtualHost parts ignored?</STRONG>
     </A>
  <P>
  Because you have to enable the engine for every virtual host explicitly due
  to security concerns. Just add a &quot;RewriteEngine on&quot; to your
  virtual host configuration parts.
  </P>
  <HR>
 </LI>

 <LI><A NAME="rewrite-envwhitespace">
      <STRONG> How can I use strings with whitespaces in RewriteRule's ENV
      flag?</STRONG>
     </A>
  <P>
  There is only one ugly solution: You have to surround the complete flag
  argument by quotation marks (<SAMP>"[E=...]"</SAMP>). Notice: The argument
  to quote here is not the argument to the E-flag, it is the argument of the
  Apache config file parser, <EM>i.e.</EM>, the third argument of the RewriteRule here.
  So you have to write <SAMP>"[E=any text with whitespaces]"</SAMP>.
  </P>
  <HR>
 </LI>

 <LI><A NAME="cgi-spec">
      <STRONG>Where can I find the &quot;CGI specification&quot;?</STRONG>
     </A>
  <P>
  The Common Gateway Interface (CGI) specification can be found at
  the original NCSA site 
  &lt;<A HREF="http://hoohoo.ncsa.uiuc.edu/cgi/interface.html">
  <SAMP>http://hoohoo.ncsa.uiuc.edu/cgi/interface.html</SAMP></A>&gt;.
  This version hasn't been updated since 1995, and there have been
  some efforts to update it.  
  </P>
  <P>
  A new draft is being worked on with the intent of making it an informational
  RFC; you can find out more about this project at
  &lt;<A HREF="http://web.golux.com/coar/cgi/"
      ><SAMP>http://web.golux.com/coar/cgi/</SAMP></A>&gt;.
  </P>
  <HR>
 </LI>

 <LI><A NAME="year2000">
      <STRONG>Is Apache Year 2000 compliant?</STRONG>
     </A>
  <P>
  Yes, Apache is Year 2000 compliant.
  </P>
  <P>
  Apache internally never stores years as two digits.
  On the HTTP protocol level RFC1123-style addresses are generated
  which is the only format a HTTP/1.1-compliant server should
  generate. To be compatible with older applications Apache
  recognizes ANSI C's <CODE>asctime()</CODE> and
  RFC850-/RFC1036-style date formats, too.
  The <CODE>asctime()</CODE> format uses four-digit years,
  but the RFC850 and RFC1036 date formats only define a two-digit year.
  If Apache sees such a date with a value less than 70 it assumes that
  the century is <SAMP>20</SAMP> rather than <SAMP>19</SAMP>.
  </P>
  <P>
  Some aspects of Apache's output may use two-digit years, such as the
  automatic listing of directory contents provided by
  <A HREF="../mod/mod_autoindex.html"><SAMP>mod_autoindex</SAMP></A>
  with the
  <A HREF="../mod/mod_autoindex.html#indexoptions"
  ><SAMP>FancyIndexing</SAMP></A>
  option enabled, but it is improper to depend upon such displays for
  specific syntax.  And even that issue is being addressed by the
  developers; a future version of Apache should allow you to format that
  display as you like.
  </P>
  <P>
  Although Apache is Year 2000 compliant, you may still get problems
  if the underlying OS has problems with dates past year 2000
  (<EM>e.g.</EM>, OS calls which accept or return year numbers).
  Most (UNIX) systems store dates internally as signed 32-bit integers
  which contain the number of seconds since 1<SUP>st</SUP> January 1970, so
  the magic boundary to worry about is the year 2038 and not 2000.
  But modern operating systems shouldn't cause any trouble
  at all.
  </P>
  <HR>
 </LI>

 <LI><A NAME="namevhost">
      <STRONG>I upgraded to Apache 1.3 and now my virtual hosts don't
      work!</STRONG>
     </A>
  <P>
  In versions of Apache prior to 1.3b2, there was a lot of confusion
  regarding address-based virtual hosts and (HTTP/1.1) name-based
  virtual hosts, and the rules concerning how the server processed
  <SAMP>&lt;VirtualHost&gt;</SAMP> definitions were very complex and not
  well documented.
  </P>
  <P>
  Apache 1.3b2 introduced a new directive,
  <A HREF="http://www.apache.org/docs/mod/core.html#namevirtualhost"
  ><SAMP>NameVirtualHost</SAMP></A>,
  which simplifies the rules quite a bit.  However, changing the rules
  like this means that your existing name-based
  <SAMP>&lt;VirtualHost&gt;</SAMP> containers probably won't work
  correctly immediately following the upgrade.
  </P>
  <P>
  To correct this problem, add the following line to the beginning of
  your server configuration file, before defining any virtual hosts:
  </P>
  <DL>
   <DD><CODE>NameVirtualHost <EM>n.n.n.n</EM></CODE>
   </DD>
  </DL>
  <P>
  Replace the &quot;<SAMP>n.n.n.n</SAMP>&quot; with the IP address to
  which the name-based virtual host names resolve; if you have multiple
  name-based hosts on multiple addresses, repeat the directive for each
  address.
  </P>
  <P>
  Make sure that your name-based <SAMP>&lt;VirtualHost&gt;</SAMP> blocks
  contain <SAMP>ServerName</SAMP> and possibly <SAMP>ServerAlias</SAMP>
  directives so Apache can be sure to tell them apart correctly.
  </P>
  <P>
  Please see the
  <A HREF="http://www.apache.org/docs/vhosts/">Apache
  Virtual Host documentation</A> for further details about configuration.
  </P>
  <HR>
 </LI>

 <LI><A NAME="redhat">
      <STRONG>I'm using RedHat Linux and I have problems with httpd
      dying randomly or not restarting properly</STRONG>
     </A>

  <P>
  RedHat Linux versions 4.x (and possibly earlier) RPMs contain
  various nasty scripts which do not stop or restart Apache properly.
  These can affect you even if you're not running the RedHat supplied
  RPMs.
  </P>
  <P>
  If you're using the default install then you're probably running
  Apache 1.1.3, which is outdated.  From RedHat's ftp site you can
  pick up a more recent RPM for Apache 1.2.x.  This will solve one of
  the problems.
  </P>
  <P>
  If you're using a custom built Apache rather than the RedHat RPMs
  then you should <CODE>rpm -e apache</CODE>.  In particular you want
  the mildly broken <CODE>/etc/logrotate.d/apache</CODE> script to be
  removed, and you want the broken <CODE>/etc/rc.d/init.d/httpd</CODE>
  (or <CODE>httpd.init</CODE>) script to be removed.  The latter is
  actually fixed by the apache-1.2.5 RPMs but if you're building your
  own Apache then you probably don't want the RedHat files.
  </P>
  <P>
  We can't stress enough how important it is for folks, <EM>especially
  vendors</EM> to follow the <A HREF="../stopping.html">stopping Apache
  directions</A> given in our documentation.  In RedHat's defense,
  the broken scripts were necessary with Apache 1.1.x because the
  Linux support in 1.1.x was very poor, and there were various race
  conditions on all platforms.  None of this should be necessary with
  Apache 1.2 and later.
  </P>
  <HR>
 </LI>

 <LI><A NAME="stopping">
      <STRONG>I upgraded from an Apache version earlier
      than 1.2.0 and suddenly I have problems with Apache dying randomly
      or not restarting properly</STRONG>
a2719 1

d2721 3
a2723 14
  You should read <A HREF="#redhat">the previous note</A> about
  problems with RedHat installations.  It is entirely likely that your
  installation has start/stop/restart scripts which were built for
  an earlier version of Apache.  Versions earlier than 1.2.0 had
  various race conditions that made it necessary to use
  <CODE>kill -9</CODE> at times to take out all the httpd servers.
  But that should not be necessary any longer.  You should follow
  the <A HREF="../stopping.html">directions on how to stop
  and restart Apache</A>.
  </P>
  <P>As of Apache 1.3 there is a script
  <CODE>src/support/apachectl</CODE> which, after a bit of
  customization, is suitable for starting, stopping, and restarting
  your server.
d2728 3
a2730 3
 <LI><A NAME="redhat-htm">
      <STRONG>I'm using RedHat Linux and my .htm files are showing
      up as HTML source rather than being formatted!</STRONG>
a2731 1

d2733 6
a2738 4
  RedHat messed up and forgot to put a content type for <CODE>.htm</CODE>
  files into <CODE>/etc/mime.types</CODE>.  Edit <CODE>/etc/mime.types</CODE>,
  find the line containing <CODE>html</CODE> and add <CODE>htm</CODE> to it.
  Then restart your httpd server:
d2740 26
a2765 4
  <DL>
   <DD><CODE>kill -HUP `cat /var/run/httpd.pid`</CODE>
   </DD>
  </DL>
d2767 3
a2769 2
  Then <STRONG>clear your browsers' caches</STRONG>.  (Many browsers won't
  re-examine the content type after they've reloaded a page.)
d2774 2
a2775 4
 <LI><A NAME="glibc-crypt">
      <STRONG>I'm using RedHat Linux 5.0, or some other 
      <SAMP>glibc</SAMP>-based Linux system, and I get errors with the
      <CODE>crypt</CODE> function when I attempt to build Apache 1.2.</STRONG>
a2776 1

d2778 8
a2785 2
  <SAMP>glibc</SAMP> puts the <CODE>crypt</CODE> function into a separate
  library.  Edit your <CODE>src/Configuration</CODE> file and set this:
d2787 7
a2793 4
  <DL>
   <DD><CODE>EXTRA_LIBS=-lcrypt</CODE>
   </DD>
  </DL>
d2795 7
a2801 1
  Then re-run <SAMP>src/Configure</SAMP> and re-execute the make.
d2806 2
a2807 4
 <LI><A NAME="nfslocking">
      <STRONG>Server hangs, or fails to start, and/or error log
      fills with &quot;<SAMP>fcntl: F_SETLKW: No record locks
      available</SAMP>&quot; or similar messages</STRONG>
a2808 1

d2810 8
a2817 2
  These are symptoms of a fine locking problem, which usually means that
  the server is trying to use a synchronization file on an NFS filesystem.
d2820 4
a2823 6
  Because of its parallel-operation model, the Apache Web server needs to
  provide some form of synchronization when accessing certain resources.
  One of these synchronization methods involves taking out locks on a file,
  which means that the filesystem whereon the lockfile resides must support
  locking.  In many cases this means it <EM>can't</EM> be kept on an
  NFS-mounted filesystem.
d2826 4
a2829 12
  To cause the Web server to work around the NFS locking limitations, include
  a line such as the following in your server configuration files:
  </P>
  <DL>
   <DD><CODE>LockFile /var/run/apache-lock</CODE>
   </DD>
  </DL>
  <P>
  The directory should not be generally writable (<EM>e.g.</EM>, don't use
  <SAMP>/var/tmp</SAMP>).
  See the <A HREF="../mod/core.html#lockfile"><SAMP>LockFile</SAMP></A>
  documentation for more information.
d2833 21
a2853 8
 <LI><A NAME="zoom">
      <STRONG>What's the best hardware/operating system/... How do
      I get the most out of my Apache Web server?</STRONG>
     </A>
  <P>
  Check out Dean Gaudet's
  <A HREF="http://www.apache.org/docs/misc/perf-tuning.html"
  >performance tuning page</A>.
d2857 11
a2867 20
 <LI><A NAME="regex">
      <STRONG>What are "regular expressions"?</STRONG></A>
   <P>
   Regular expressions are a way of describing a pattern - for example, "all 
   the words that begin with the letter A" or "every 10-digit phone number" 
   or even "Every sentence with two commas in it, and no capital letter Q".  
   Regular expressions (aka "regexp"s) are useful in Apache because they 
   let you apply certain attributes against collections of files or resources 
   in very flexible ways - for example, all .gif and .jpg files under
   any "images" directory could be written as /.*\/images\/.*[jpg|gif]/.
   </P>
   <P>
   The best overview around is probably the one which comes with
   Perl.  We implement a simple subset of Perl's regexp support, but
   it's still a good way to learn what they mean.  You can start by
   going to the
   <A
    HREF="http://www.perl.com/CPAN-local/doc/manual/html/pod/perlre.html#Version_8_Regular_Expresions"
   >CPAN page on regular expressions</A>, and branching out from there.
   </P>
d2870 4
a2873 110
 <LI><A NAME="broken-gcc"><STRONG>I'm using gcc and I get some
	compilation errors, what is wrong?</STRONG></A>
    <P>
    GCC parses your system header files and produces a modified subset which
    it uses for compiling.  This behaviour ties GCC tightly to the version
    of your operating system.  So, for example, if you were running IRIX 5.3
    when you built GCC and then upgrade to IRIX 6.2 later, you will have to
    rebuild GCC.  Similarly for Solaris 2.4, 2.5, or 2.5.1 when you upgrade
    to 2.6.  Sometimes you can type "gcc -v" and it will tell you the version
    of the operating system it was built against.
    </P>
    <P>
    If you fail to do this, then it is very likely that Apache will fail
    to build.  One of the most common errors is with <CODE>readv</CODE>,
    <CODE>writev</CODE>, or <CODE>uio.h</CODE>.  This is <STRONG>not</STRONG> a
    bug with Apache.  You will need to re-install GCC.
    </P>
   <HR>
  </LI>
  <LI><A NAME="htaccess-work">
       <STRONG>My <CODE>.htaccess</CODE> files are being ignored.</STRONG></A>
   <P>
   This is almost always due to your <A HREF="../mod/core.html#allowoverride">
   AllowOverride</A> directive being set incorrectly for the directory in 
   question.  If it is set to <CODE>None</CODE> then .htaccess files will 
   not even be looked for.  If you do have one that is set, then be certain 
   it covers the directory you are trying to use the .htaccess file in.  
   This is normally accomplished by ensuring it is inside the proper 
   <A HREF="../mod/core.html#directory">Directory</A> container.
   </P>
   <HR>
  </LI>
  <LI><A NAME="submit_patch">
       <STRONG>How do I submit a patch to the Apache Group?</STRONG></A>
   <P>
   The Apache Group encourages patches from outside developers. There are 2
   main "types"
   of patches: small bugfixes and general improvements. Bugfixes should be
   submitting using the
   Apache <A HREF="http://www.apache.org/bug_report.html">bug report page</A>.
   Improvements, modifications, and additions should follow the instructions
   below.
   </P>
   <P>
   In general, the first course of action is to be a member of the
   <SAMP>new-httpd@@apache.org</SAMP> mailing list. This indicates to the Group
   that
   you are closely following the latest Apache developments. Your patch file
   should be
   generated using either '<CODE>diff&nbsp;-c</CODE>' or
   '<CODE>diff&nbsp;-u</CODE>' against the
   latest CVS tree. To submit your patch, send email to
   <SAMP>new-httpd@@apache.org</SAMP>
   with a <SAMP>Subject:</SAMP> line that starts with <SAMP>[PATCH]</SAMP> and
   includes a general description of the patch. In the body of the message, the
   patch should be clearly described and then included at the end of the
   message.
   If the patch-file is long, you can note a URL to the file instead of the
   file itself. Use of MIME enclosures/attachments should be avoided.
   </P>
   <P>
   Be prepared to respond to any questions about your patches and possibly
   defend
   your code. If your patch results in a lot of discussion, you may be asked to
   submit an updated patch that incorporate all changes and suggestions.
   </P>
   <HR>
  </LI>
  <LI><A NAME="aixccbug"><STRONG>Why am I getting "<SAMP>Expected
       &lt/Directory&gt; but saw &lt;/Directory&gt;</SAMP>" when
       I try to start Apache?</STRONG></A>
   <P>
   This is a known problem with certain versions of the AIX C compiler.
   IBM are working on a solution, and the issue is being tracked by
   <A HREF="http://bugs.apache.org/index/full/2312">problem report #2312</A>.
   </P>
   <HR>
  </LI>
  <LI><A NAME="domination"><STRONG>Why has Apache stolen my favourite site's
       Internet address?</STRONG></A>
   <P>
   The simple answer is: "It hasn't."  This misconception is usually
   caused by the site in question having migrated to the Apache Web
   server software, but not having migrated the site's content yet.  When
   Apache is installed, the default page that gets installed tells the
   Webmaster the installation was successful.  The expectation is that
   this default page will be replaced with the site's real content.
   If it doesn't, complain to the Webmaster, not to the Apache project --
   we just make the software and aren't responsible for what people
   do (or don't do) with it.
   </P>
   <HR>
  </LI>
  <LI><A NAME="apspam"><STRONG>Why am I getting spam mail from the
       Apache site?</STRONG></A>
   <P>
   The short answer is: "You aren't."  Usually when someone thinks the
   Apache site is originating spam, it's because they've traced the
   spam to a Web site, and the Web site says it's using Apache.  See the
   <A HREF="#domination">previous FAQ entry</A> for more details on this
   phenomenon.
   </P>
   <P>
   No marketing spam originates from the Apache site.  The only mail
   that comes from the site goes only to addresses that have been
   <EM>requested</EM> to receive the mail.
   </P>
   <HR>
  </LI>
  <!-- Don't forget to add HR tags at the end of each list item.. -->
a2874 1
</OL>
@


1.2
log
@Apache 1.3.3 merge + proxy_segv fix
@
text
@d23 1
a23 1
  $Revision: 1.1.1.2 $ ($Date: 1998/10/01 17:20:10 $)
d88 2
a198 3
   <LI><A HREF="#HPUX-core">Why do I get core dumps under HPUX using
        HP's ANSI C compiler?</A>
   </LI>
d734 6
d1250 1
a1250 1
  <A HREF="http://www.fastcgi.com/servers/apache/"
a1443 12
 <LI><A NAME="HPUX-core">
       <STRONG>Why do I get core dumps under HPUX using HP's ANSI
       C compiler?</STRONG>
      </A>
  <P>
  We have had numerous reports of Apache dumping core when compiled
  with HP's ANSI C compiler using optimization.  Disabling the compiler
  optimization has fixed these problems.
  </P>
  <HR>
 </LI>

d1713 1
a1713 1
    AuthName special directory
@


1.1
log
@Initial revision
@
text
@d6 1
a6 2

 <!-- Background white, links blue (unvisited), navy (visited), red (active) -->
d17 1
a17 1
  Apache HTTP Server Version 1.2
d23 1
a23 1
  $Revision: 1.65 $ ($Date: 1998/02/18 21:11:03 $)
a82 1
<!-- - Why is my .htaccess ignored?                                 -->
d84 4
d120 1
a120 1
    NCSA 1.3 setup?</A>
d135 3
d143 1
a143 1
    virtual hosts?</A>
d145 2
a146 1
   <LI><A HREF="#freebsd-setsize">Can I increase FD_SETSIZE on FreeBSD?</A>
d148 2
a149 2
   <LI><A HREF="#limitGET">Why do I keep getting &quot;access denied&quot; for
    form POST requests?</A>
d152 1
a152 1
    for Web page authentication?</A>
d155 1
a155 1
    401</CODE> work?</A>
d158 1
a158 1
   and SSI to simplify customized error messages?</A>
d161 1
a161 1
    argument</SAMP>&quot; at startup?</A>
d166 1
a166 1
    <SAMP>mod_cookies</SAMP>?</A>
d169 1
a169 1
    when I request an URL from an Apache server?</A>
d172 1
a172 1
    using PUT on Netscape Gold and other programs?</A>
d175 1
a175 1
    more?</A>
d178 1
a178 1
    set socket option TCP_NODELAY</SAMP>&quot; in my error log?</A>
d181 1
a181 1
    reset by peer</SAMP>&quot; in my error log?</A>
d184 1
a184 1
    Apache buffering it?  Why doesn't my server push work?</A>
d187 1
a187 1
    of &quot;<CODE>struct iovec</CODE>&quot; when compiling under Linux?</A>
d190 1
a190 1
    but where's the dump file?</A>
d193 1
a193 1
    working correctly?</A>
d198 1
a198 1
    HP's ANSI C compiler?</A>
d201 1
a201 1
    browser can play it?</A>
d204 1
a204 1
    system's <SAMP>cc</SAMP>?</A>
d206 1
a206 2
   <LI><A HREF="#addlog">How do I add browsers and referrers to my
    logs?</A>
d209 2
a210 2
    reference to &quot;<SAMP>__inet_ntoa</SAMP>&quot; or other
    <SAMP>__inet_*</SAMP> symbols?</A>
d213 4
a216 4
    when I include the trailing "/"
    (<EM>e.g.</EM>,&nbsp;<SAMP>http://foo.domain.com/~user/</SAMP>) but
    not when I omit it
    (<EM>e.g.</EM>,&nbsp;<SAMP>http://foo.domain.com/~user</SAMP>)?</A>
d219 1
a219 1
    a username and password to access certain documents?</A>
d222 1
a222 1
   <SAMP>REMOTE_USER</SAMP> not set?</A>
d225 2
a226 2
    to certain documents only if a site is either a local site
    <EM>or</EM> the user supplies a password and username?</A>
d229 4
a232 3
    directives?</A>
   <LI><A HREF="#linux-shmget">When I run it under Linux I get "shmget:
    function not found", what should I do?</A>
d235 2
a236 1
    me a server error?</A>
d238 1
a238 1
    authentication information on the same machine?</A>
d243 1
a243 1
    which already solve particular URL-related problems?</A>
d245 2
a246 2
   <LI><A HREF="#rewrite-article">Where can I find any published information about
    URL-manipulations and mod_rewrite?</A>
d249 1
a249 1
    and seems so complicated?</A>
d252 1
a252 1
    as expected?</A>
d255 1
a255 1
    prefixed with DocumentRoot when using mod_rewrite?</A>
d258 1
a258 1
    with mod_rewrite?</A>
d261 1
a261 1
    parts ignored?</A>
d264 1
a264 1
    in RewriteRule's ENV flag?</A>
d267 1
a267 1
    specification&quot;?</A>
d271 2
a272 2
   <LI><A HREF="#namevhost">I upgraded to Apache 1.3b and now my
    virtual hosts don't work!</A>
d275 37
a311 1
    dying randomly or not restarting properly</A>
a312 11
   <li><a href="#stopping">I upgraded from an Apache version earlier
    than 1.2.0 and suddenly I have problems with Apache dying randomly
    or not restarting properly</a>
   </li>
   <li><a href="#redhat-htm">I'm using RedHat Linux and my .htm files are showing
    up as html source rather than being formatted!</a>
   </li>
   <li><a href="#glibc-crypt">I'm using RedHat Linux 5.0, or some other glibc
     based Linux system, and I get errors with the <code>crypt</code> function when
     I attempt to build Apache 1.2.</a>
    </li>
d338 1
a338 3
  <A
   HREF="http://www.netcraft.com/Survey/"
  >Netcraft Survey</A>.
d342 1
d354 1
d367 1
d378 1
d384 1
a384 3
  <A
   HREF="http://webcompare.internet.com/chart.html"
  >Web Compare</A>'s
d399 1
d404 1
a404 1
  Apache is run on over 500,000 Internet servers (as of July 1997). It has
d407 1
a407 1
  server, and our server runs without a hitch on over one third of all
d413 2
a414 3
  <A
   HREF="http://www.apache.org/info/apache_users.html"
  >sites running Apache</A>.
d418 1
d424 1
a424 1
   <LI>to continue as a public domain HTTP server,
d435 1
a435 1
  </P>
d438 1
d446 1
a446 3
  <A
   HREF="http://www.apache.org/bug_report.html"
  >the bug report page</A>.
d448 7
a454 6
  <A
   HREF="news:comp.infosystems.www.servers.unix"
  ><SAMP>comp.infosystems.www.servers.unix</SAMP></A>
  newsgroup, where some of the Apache team lurk,
  in the company of many other httpd gurus who should be able
  to help.
d462 1
d469 1
a469 3
  <A
   HREF="http://www.apache.org/"
  >Apache web site</A>.
d471 1
a471 4
  <A
   HREF="http://www.apacheweek.com/"
   REL="Help"
  ><CITE>Apache Week</CITE></A>
d474 1
a474 2
  <A
   HREF="http://www.apache.org/info/apache_books.html"
d479 1
d486 1
a486 3
  <A
   HREF="http://www.apache.org/"
  >main web page</A>.
d491 1
a491 3
  <H3>
   Technical Questions
  </H3>
d510 1
a510 3
    <A
     HREF="../mod/core.html#errorlog"
    ><SAMP>ErrorLog</SAMP></A>
d515 1
a515 3
    <A
     HREF="http://www.apache.org/docs/misc/FAQ.html"
    >FAQ</A>!</STRONG>
d525 1
a525 3
    <A
     HREF="http://bugs.apache.org/"
    >bug database</A>.
d541 1
a541 2
    <A
     HREF="news:comp.infosystems.www.servers.unix"
d556 1
a556 3
    <A
     HREF="http://www.apache.org/bug_report.html"
    >logging a bug report</A>.
d569 1
a569 1
    </P>
d580 1
d603 1
d610 1
a610 3
  <A
   HREF="../mod/mod_alias.html#scriptalias"
  ><SAMP>ScriptAlias</SAMP></A>
d623 1
a623 3
  <A
   HREF="../mod/mod_mime.html#addhandler"
  ><SAMP>AddHandler</SAMP></A>
d635 1
a635 1
    </P>
d643 1
a643 3
    <A
     HREF="../mod/core.html#options"
    ><SAMP>Options</SAMP></A>
d647 1
a647 1
  </P>
d649 1
a649 1
  In some situations it can be not conform to your local policy to actually
d653 1
a653 4
  <EM>via</EM>
  <A
   HREF="../mod/mod_rewrite.html"
  ><SAMP>mod_rewrite</SAMP></A> 
d659 1
a659 1
       similar to this one:
d669 1
a669 1
    </P>
d672 3
a674 5
    <A
     HREF="../mod/core.html#options"
    ><SAMP>Options</SAMP></A>
        declaration that includes the <SAMP>ExecCGI</SAMP> and
        <SAMP>FollowSymLinks</SAMP> option.
d677 1
a677 1
  </P>
d680 1
d720 1
a720 1
  </P>
d737 1
d756 1
a756 4
  <A
   HREF="#ssi-part-ii"
  >next question</A>
  for more information about this.)
d763 1
a763 3
    <A
     HREF="../mod/mod_include.html"
    ><SAMP>mod_include</SAMP></A>
d767 1
a767 3
    <A
     HREF="../mod/core.html#options"
    ><SAMP>Options</SAMP></A>
d774 1
a774 3
    <A
     HREF="../mod/mod_mime.html#addhandler"
    ><SAMP>AddHandler</SAMP></A>
d781 2
a782 1
    </P>
d787 1
d791 2
a792 5
  For additional information, see the <CITE>Apache Week</CITE> article
  on
  <A
   HREF="http://www.apacheweek.com/features/ssi"
   REL="Help"
d797 1
d817 1
a817 4
  <A
   HREF="../mod/mod_expires.html"
   REL="Help"
  ><SAMP>mod_expires</SAMP></A>
d819 1
a819 3
  <A
   HREF="../mod/mod_include.html#xbithack"
   REL="Help"
d831 1
d850 13
d868 2
a869 5
  <A
   HREF="../mod/mod_proxy.html"
  >proxy module</A>.
  If compiled
  in, this will make Apache act as a caching-proxy server.
d873 1
d881 1
a881 4
  <A
   HREF="../content-negotiation.html"
   REL="Help"
  >content negotiation</A>
d884 1
a884 3
  &quot;<A
         HREF="http://www.apacheweek.com/features/negotiation"
         REL="Help"
d889 1
d908 1
a908 3
  <A
   HREF="../mod/core.html#listen"
  ><SAMP>Listen</SAMP></A>
d925 5
a929 7
       <A
        HREF="../mod/core.html#listen"
       ><SAMP>Listen</SAMP></A>
       directives.  If there are no other servers running on the machine
       on the same port then you normally don't
       need any Listen directives at all.  By default Apache listens to
       all addresses on port 80.
d932 6
a937 7
       <A
        HREF="../mod/mod_log_config.html"
       ><SAMP>mod_log_config</SAMP></A>
       to log all requests to a single log file while including the name
       of the virtual host in the log file.  You can then write a
       script to split the logfile into separate files later if
       necessary.
d940 17
a956 8
       (see your system's documentation on the <CODE>limit</CODE> or
       <CODE>ulimit</CODE> commands).  For some systems, information on
       how to do this is available in the
       <A
        HREF="perf.html"
       >performance hints</A>
       page.  There is a specific note for
       <A HREF="#freebsd-setsize">FreeBSD</A> below.
d961 1
a961 3
    <A
     HREF="../mod/core.html#listen"
    ><SAMP>Listen</SAMP></A>
d985 2
a986 1

d988 1
a988 1
  kernel with a larger FD_SETSIZE.  This can be done by adding a 
d996 1
a996 1
  To your kernel config file.  Starting at version 2.2, this is no
d1003 3
a1005 2
  than what FD_SETSIZE is set to when libc is compiled.  To increase
  this, you have to recompile libc with a higher FD_SETSIZE.
d1008 1
a1008 1
  In FreeBSD 3.0, the default FD_SETSIZE has been increased to
d1022 3
a1024 3
 <LI><A NAME="limitGET">
      <STRONG>Why do I keep getting &quot;access denied&quot; for form POST
      requests?</STRONG>
d1027 6
a1032 20
  The most common cause of this is a <SAMP>&lt;Limit&gt;</SAMP> section
  that only names the <SAMP>GET</SAMP> method.  Look in your
  configuration files for something that resembles the following and
  would affect the location where the POST-handling script resides:
  </P>
  <P>
  <DL>
   <DD><CODE>&lt;Limit GET&gt;
    <BR>&nbsp;&nbsp;&nbsp;&nbsp;:</CODE>
   </DD>
  </DL>
  </P>
  <P>
  Change that to <CODE>&lt;Limit&nbsp;GET&nbsp;POST&gt;</CODE> and the problem
  will probably go away.  Better yet, remove the
  <CODE>&lt;Limit&gt;</CODE> and <CODE>&lt;/Limit&gt;</CODE> lines
  altogether unless you're <EM>specifically</EM> trying to limit by
  method (<SAMP>GET</SAMP>, <SAMP>PUT</SAMP>, <EM>et cetera</EM>).  If
  you don't have a <CODE>&lt;Limit&gt;</CODE> container, the
  restrictions apply equally to <EM>all</EM> methods.
d1036 1
d1091 1
d1099 1
a1099 3
  <A
   HREF="../mod/core.html#errordocument"
  ><SAMP>ErrorDocument</SAMP></A>
d1104 1
d1107 1
a1107 1
   and SSI to simplify customized error messages?</STRONG>
d1118 1
d1125 1
a1125 3
  <A
   HREF="../mod/core.html#group"
  ><SAMP>Group</SAMP></A>
d1132 1
d1139 3
a1141 16
  <A
   HREF="../mod/mod_cookies.html"
  ><SAMP>mod_cookies</SAMP></A>
  module.
  This module was distributed with Apache prior to 1.2.
  This module may help track users, and uses cookies to do this. If
  you are not using the data generated by <SAMP>mod_cookies</SAMP>, do
  not compile it into Apache. Note that in 1.2 this module was renamed
  to the more correct name
  <A
   HREF="../mod/mod_usertrack.html"
  ><SAMP>mod_usertrack</SAMP></A>,
  and cookies
  have to be specifically enabled with the
  <A
    HREF="../mod/mod_usertrack.html#cookietracking"
d1144 4
d1151 1
d1160 1
a1160 3
  <A
   HREF="#cookies1"
  >previous question</A>
d1169 1
d1212 1
a1212 1
  </P>
d1215 1
a1215 2
  <A
   HREF="http://www.apache.org/info/jdk-102.html"
d1221 1
d1232 1
a1232 2
  <A
   HREF="http://www.apacheweek.com/features/put"
d1237 1
d1245 1
a1245 2
  <A
   HREF="http://www.fastcgi.com/servers/apache/"
d1255 1
d1268 1
d1283 1
d1289 7
a1295 28
  In order to improve network performance, Apache buffers script output
  into relatively large chunks.  If you have a script that sends
  information in bursts (eg. as partial-done messages in a multi-commit
  database transaction or any type of server push), the client will 
  not necessarily get the output as the script is generating it.
  </P>
  <P>
  To avoid this, Apache recognizes scripts whose names begin with
  &quot;<SAMP>nph-</SAMP>&quot; as <EM>non-parsed-header</EM> scripts.
  That is, Apache won't buffer their output, but connect it directly to
  the socket going back to the client.
  </P>
  <P>
  While this will probably do what you want, there <EM>are</EM> some
  disadvantages to it:
  </P>
  <UL>
   <LI><STRONG>YOU</STRONG> (the script) are responsible for generating
     <STRONG>ALL</STRONG> of the HTTP headers, and no longer
     <EM>just</EM> the &quot;<SAMP>Content-type</SAMP>&quot; or
     &quot;<SAMP>Location</SAMP>&quot; headers
   </LI>
   <LI>Unless your script generates its output carefully, you will see a
    performance penalty as excessive numbers of packets go back and forth
   </LI>
  </UL>
  <P>
  As an example how you might handle the former (in a Perl script):
d1297 2
a1298 24
  <P>
  <DL>
   <DD><CODE>if ($0 =~ m:^(.*/)*nph-[^/]*$:) {
    <BR>
    &nbsp;&nbsp;&nbsp;&nbsp;
    $HTTP_headers&nbsp;=&nbsp;
    &quot;HTTP/1.1&nbsp;200&nbsp;OK\015\012&quot;;
    <BR>
    &nbsp;&nbsp;&nbsp;&nbsp;
    $HTTP_headers&nbsp;.=&nbsp;
    &quot;Connection:&nbsp;close\015\012&quot;;
    <BR>
    &nbsp;&nbsp;&nbsp;&nbsp;
    print&nbsp;$HTTP_headers;
    <BR>
    }</CODE>
   </DD>
  </DL>
  </P>
  <P>
  and then follow with your normal non-<SAMP>nph</SAMP> headers.
  </P>
  <P>Note that in version 1.3, all CGI scripts will be unbuffered
  so the only difference between nph scripts and normal scripts is
d1303 1
d1325 1
a1325 1
  </P>
d1328 1
d1355 1
a1355 2
  <A
   HREF="../mod/core.html#coredumpdirectory"
d1363 1
d1398 1
a1398 1
    </P>
d1410 1
d1426 1
a1426 2
  &quot;<A
         HREF="http://www.apache.org/related_projects.html"
d1433 1
a1433 3
  <A
   HREF="http://www.apacheweek.com/features/ssl"
   REL="Help"
d1438 1
d1441 1
a1441 1
               C compiler?</STRONG>
d1450 1
d1476 1
a1476 1
    </P>
d1486 1
d1488 2
a1489 2
       <STRONG>Why won't Apache compile with my system's
       <SAMP>cc</SAMP>?</STRONG>
d1533 1
a1533 3
  <A
   HREF="http://www.apache.org/bug_report.html"
  >problem report</A>.
d1539 1
d1546 1
a1546 3
  <A
   HREF="../mod/mod_log_config.html"
  ><SAMP>mod_log_config</SAMP></A>
d1548 1
a1548 3
  <A
   HREF="../mod/mod_log_config.html#customlog"
  ><SAMP>CustomLog</SAMP></A>
d1570 1
a1570 3
  &quot;<A
         HREF="http://www.apacheweek.com/features/logfiles"
         REL="Help"
d1576 1
d1617 1
a1617 1
  </P>
d1620 1
d1623 1
a1623 1
      the trailing "/"
d1629 1
a1629 1
  When you access a directory without a trailing "/", Apache needs
d1645 1
d1658 1
a1658 3
  <A
   HREF="http://www.apacheweek.com/"
  ><CITE>Apache Week</CITE></A>'s
d1660 1
a1660 2
  <A
   HREF="http://www.apacheweek.com/features/userauth"
d1663 1
a1663 2
  <A
   HREF="http://www.apacheweek.com/features/dbmauth"
d1668 1
d1670 3
a1672 3
         <STRONG>Why is the environment variable 
         <SAMP>REMOTE_USER</SAMP> not set?</STRONG>
         </A>
d1678 1
a1678 3
  <A
   HREF="http://www.apacheweek.com/"
  ><CITE>Apache Week</CITE></A>'s
d1680 1
a1680 2
  <A
   HREF="http://www.apacheweek.com/features/userauth"
d1683 1
a1683 2
  <A
   HREF="http://www.apacheweek.com/features/dbmauth"
d1695 1
d1727 1
a1727 1
  </P>
d1735 1
d1740 1
a1740 4
  The
  <A
   HREF="../mod/mod_info.html"
  ><SAMP>mod_info</SAMP></A>
d1750 1
a1750 3
  <A
   HREF="../mod/core.html#user"
  ><SAMP>User</SAMP></A>
d1757 1
d1759 2
a1760 2
      <STRONG>When I run it under Linux I get "shmget:
      function not found", what should I do?</STRONG>
d1783 1
d1840 1
d1861 1
d1876 1
d1878 2
a1879 2
          <STRONG>Where can I find mod_rewrite rulesets which already solve
          particular URL-related problems?</STRONG>
d1883 1
a1883 2
  <A
      HREF="http://www.engelschall.com/pw/apache/rewriteguide/"
d1887 1
a1887 3
  <A
   HREF="../mod/mod_rewrite.html"
  ><SAMP>mod_rewrite</SAMP></A> 
d1891 1
a1891 3
  <A
      HREF="mailto:rse@@apache.org"
  >Ralf S. Engelschall</A>
d1897 1
d1899 2
a1900 2
          <STRONG>Where can I find any published information about URL-manipulations and
          mod_rewrite?</STRONG>
d1904 1
a1904 2
  <A
      HREF="mailto:rse@@apache.org"
d1907 1
a1907 3
  <A
   HREF="../mod/mod_rewrite.html"
  ><SAMP>mod_rewrite</SAMP></A> 
d1911 2
a1912 3
  <A
      HREF="http://www.heise.de/ix/artikel/9612149/"
  >http://www.heise.de/ix/artikel/9612149/</A>,
d1914 2
a1915 3
  <A
      HREF="http://www.heise.de/ix/artikel/E/9612149/"
  >http://www.heise.de/ix/artikel/E/9612149/</A>.
d1919 1
d1921 2
a1922 2
          <STRONG>Why is mod_rewrite so difficult to learn and seems so
          complicated?</STRONG>
d1926 4
a1929 3
  module which can help you in really <STRONG>all</STRONG> aspects of URL rewriting, so
  it can be no trivial module per definition. To accomplish its hard job it
  uses software leverage and makes use of a powerful regular expression
d1947 1
d1949 2
a1950 2
          <STRONG>What can I do if my RewriteRules don't work as expected?
          </STRONG>
d1960 1
d1967 1
a1967 1
  URL to match this directory, i.e. there must be no root directory named
d1975 1
d1977 2
a1978 2
          <STRONG>How can I make all my URLs case-insensitive with mod_rewrite?
          </STRONG>
d1998 1
d2000 1
a2000 2
          <STRONG> Why are RewriteRules in my VirtualHost parts ignored?
          </STRONG>
d2009 1
d2011 2
a2012 2
          <STRONG> How can I use strings with whitespaces in RewriteRule's ENV
          flag?</STRONG>
d2018 1
a2018 1
  Apache config file parser, i.e. the third argument of the RewriteRule here.
d2023 4
a2026 2
 <LI><A NAME="cgi-spec"><STRONG>Where can I find the &quot;CGI
      specification&quot;?</STRONG></A>
d2035 6
d2043 1
d2065 1
a2065 3
  <A
   HREF="../mod/mod_autoindex.html"
  ><SAMP>mod_autoindex</SAMP></A>
d2067 1
a2067 2
  <A
   HREF="../mod/mod_autoindex.html#indexoptions"
d2086 1
d2088 1
a2088 1
      <STRONG>I upgraded to Apache 1.3b and now my virtual hosts don't
d2100 1
a2100 2
  <A
   HREF="http://www.apache.org/docs/mod/core.html#namevirtualhost"
d2134 4
a2137 2
 <li><a name="redhat"><strong>I'm using RedHat Linux and I have problems with httpd
    dying randomly or not restarting properly</strong></a>
d2139 38
a2176 78
    <p>RedHat Linux versions 4.x (and possibly earlier) rpms contain
    various nasty scripts which do not stop or restart Apache properly.
    These can affect you even if you're not running the RedHat supplied
    rpms.

    <p> If you're using the default install then you're probably running
    Apache 1.1.3, which is outdated.  From RedHat's ftp site you can
    pick up a more recent RPM for Apache 1.2.x.  This will solve one of
    the problems.

    <p> If you're using a custom built Apache rather than the RedHat rpms
    then you should <code>rpm -e apache</code>.  In particular you want
    the mildly broken <code>/etc/logrotate.d/apache</code> script to be
    removed, and you want the broken <code>/etc/rc.d/init.d/httpd</code>
    (or <code>httpd.init</code>) script to be removed.  The latter is
    actually fixed by the apache-1.2.5 rpms but if you're building your
    own Apache then you probably don't want the RedHat files.

    <p>We can't stress enough how important it is for folks, <i>especially
    vendors</i> to follow the <a href="../stopping.html">stopping Apache
    directions</a> given in our documentation.  In RedHat's defense,
    the broken scripts were necessary with Apache 1.1.x because the
    Linux support in 1.1.x was very poor, and there were various race
    conditions on all platforms.  None of this should be necessary with
    Apache 1.2 and later.
    </p>
    <hr>
  </li>

  <li><a name="stopping"><strong>I upgraded from an Apache version earlier
    than 1.2.0 and suddenly I have problems with Apache dying randomly
    or not restarting properly</strong></a>

    <p>You should read <a href="#redhat">the previous note</a> about
    problems with RedHat installations.  It is entirely likely that your
    installation has start/stop/restart scripts which were built for
    an earlier version of Apache.  Versions earlier than 1.2.0 had
    various race conditions that made it necessary to use
    <code>kill -9</code> at times to take out all the httpd servers.
    But that should not be necessary any longer.  You should follow
    the <a href="../stopping.html">directions on how to stop
    and restart Apache</a>.

    <p>As of Apache 1.3 there is a script
    <code>src/support/apachectl</code> which, after a bit of
    customization, is suitable for starting, stopping, and restarting
    your server.
    </p>
    <hr>

  </li>

  <li><a name="redhat-htm"><strong>I'm using RedHat Linux and my .htm files are showing
    up as html source rather than being formatted!</strong></a>

    <p>RedHat messed up and forgot to put a content type for <code>.htm</code>
    files into <code>/etc/mime.types</code>.  Edit <code>/etc/mime.types</code>,
    find the line containing <code>html</code> and add <code>htm</code> to it.
    Then restart your httpd server:
    <pre>
	kill -HUP `cat /var/run/httpd.pid`
    </pre>
    Then <b>clear your browsers' caches</b>.  (Many browsers won't re-examine
    the content type after they've reloaded a page.)
    </p>
    <hr>

  <li><a name="glibc-crypt"><strong>I'm using RedHat Linux 5.0, or some other glibc
    based Linux system, and I get errors with the <code>crypt</code> function when
    I attempt to build Apache 1.2.</strong></a>

    <p>glibc puts the crypt function into a separate library.  Edit your
    <code>src/Configuration</code> file and set this:
    <pre>
	EXTRA_LIBS=-lcrypt
    </pre>
    </p>
    <hr>
d2178 237
d2418 2
a2419 1
 <HR>
d2421 1
a2421 1
 Apache HTTP Server Version 1.2
@


1.1.1.1
log
@Initial import from apache 1.2.6
@
text
@@


1.1.1.2
log
@Apache 1.3.2
@
text
@d6 2
a7 1
<!-- Background white, links blue (unvisited), navy (visited), red (active) -->
d18 1
a18 1
  Apache HTTP Server Version 1.3
d24 1
a24 1
  $Revision: 1.129 $ ($Date: 1998/09/17 14:14:52 $)
d84 1
a85 4
<!-- - how do I disable authentication for a subdirectory?          -->
<!--   (A: you can't but "satisfy any; allow from all" can be close -->
<!-- - '400 malformed request' on Win32 might mean stale proxy; see -->
<!--   PR #2300.                                                    -->
d118 1
a118 1
        NCSA 1.3 setup?</A>
a132 3
   <LI><A HREF="#ssi-part-iv">SSIs don't work for VirtualHosts and/or 
        user home directories</A>
   </LI>
d138 1
a138 1
        virtual hosts?</A>
d140 1
a140 2
   <LI><A HREF="#freebsd-setsize">Can I increase <SAMP>FD_SETSIZE</SAMP>
        on FreeBSD?</A>
d142 2
a143 2
   <LI><A HREF="#POSTnotallowed">Why do I keep getting &quot;Method Not 
        Allowed&quot; for form POST requests?</A>
d146 1
a146 1
        for Web page authentication?</A>
d149 1
a149 1
        401</CODE> work?</A>
d152 1
a152 1
        and SSI to simplify customized error messages?</A>
d155 1
a155 1
        argument</SAMP>&quot; at startup?</A>
d160 1
a160 1
        <SAMP>mod_cookies</SAMP>?</A>
d163 1
a163 1
        when I request an URL from an Apache server?</A>
d166 1
a166 1
        using PUT on Netscape Gold and other programs?</A>
d169 1
a169 1
        more?</A>
d172 1
a172 1
        set socket option TCP_NODELAY</SAMP>&quot; in my error log?</A>
d175 1
a175 1
        reset by peer</SAMP>&quot; in my error log?</A>
d178 1
a178 1
        Apache buffering it?  Why doesn't my server push work?</A>
d181 1
a181 1
        of &quot;<CODE>struct iovec</CODE>&quot; when compiling under Linux?</A>
d184 1
a184 1
        but where's the dump file?</A>
d187 1
a187 1
        working correctly?</A>
d192 1
a192 1
        HP's ANSI C compiler?</A>
d195 1
a195 1
        browser can play it?</A>
d198 1
a198 1
        system's <SAMP>cc</SAMP>?</A>
d200 2
a201 1
   <LI><A HREF="#addlog">How do I add browsers and referrers to my logs?</A>
d204 2
a205 2
        reference to &quot;<SAMP>__inet_ntoa</SAMP>&quot; or other
        <SAMP>__inet_*</SAMP> symbols?</A>
d208 4
a211 4
        when I include the trailing &quot;/&quot;
        (<EM>e.g.</EM>,&nbsp;<SAMP>http://foo.domain.com/~user/</SAMP>) but
        not when I omit it
        (<EM>e.g.</EM>,&nbsp;<SAMP>http://foo.domain.com/~user</SAMP>)?</A>
d214 1
a214 1
        a username and password to access certain documents?</A>
d217 1
a217 1
        <SAMP>REMOTE_USER</SAMP> not set?</A>
d220 2
a221 2
        to certain documents only if a site is either a local site
        <EM>or</EM> the user supplies a password and username?</A>
d224 3
a226 4
        directives?</A>
   </LI>
   <LI><A HREF="#linux-shmget">When I run it under Linux I get &quot;shmget:
        function not found&quot;, what should I do?</A>
d229 1
a229 2
        me a server error?</A>
   </LI>
d231 1
a231 1
        authentication information on the same machine?</A>
d236 1
a236 1
        which already solve particular URL-related problems?</A>
d238 2
a239 2
   <LI><A HREF="#rewrite-article">Where can I find any published information
        about URL-manipulations and mod_rewrite?</A>
d242 1
a242 1
        and seems so complicated?</A>
d245 1
a245 1
        as expected?</A>
d248 1
a248 1
        prefixed with DocumentRoot when using mod_rewrite?</A>
d251 1
a251 1
        with mod_rewrite?</A>
d254 1
a254 1
        parts ignored?</A>
d257 1
a257 1
        in RewriteRule's ENV flag?</A>
d260 1
a260 1
        specification&quot;?</A>
d264 2
a265 2
   <LI><A HREF="#namevhost">I upgraded to Apache 1.3 and now my
        virtual hosts don't work!</A>
d268 1
a268 29
        dying randomly or not restarting properly</A>
   </LI>
   <LI><A HREF="#stopping">I upgraded from an Apache version earlier
        than 1.2.0 and suddenly I have problems with Apache dying randomly
        or not restarting properly</A>
   </LI>
   <LI><A HREF="#redhat-htm">I'm using RedHat Linux and my .htm files are
        showing up as HTML source rather than being formatted!</A>
   </LI>
   <LI><A HREF="#glibc-crypt">I'm using RedHat Linux 5.0, or some other
        <SAMP>glibc</SAMP>-based Linux system, and I get errors with the
        <CODE>crypt</CODE> function when I attempt to build Apache 1.2.</A>
   </LI>
   <LI><A HREF="#nfslocking">Server hangs, or fails to start, and/or error log
        fills with &quot;<SAMP>fcntl: F_SETLKW: No record locks
        available</SAMP>&quot; or similar messages</A>
   </LI>
   <LI><A HREF="#zoom">What's the best hardware/operating system/... How do
        I get the most out of my Apache Web server?</A>
   </LI>
   <LI><A HREF="#regex">What are "regular expressions"?</A>
   </LI>
   <LI><A HREF="#broken-gcc">I'm using gcc and I get some compilation errors, 
	what is wrong?</A>
   </LI>
   <LI><A HREF="#htaccess-work">My <CODE>.htaccess</CODE> files are being
	ignored.</A>
   </LI>
   <LI><A HREF="#submit_patch">How do I submit a patch to the Apache Group?</A>
d270 11
d306 3
a308 1
  <A HREF="http://www.netcraft.com/Survey/">Netcraft Survey</A>.
a311 1

a322 1

a334 1

a344 1

d350 3
a352 1
  <A HREF="http://webcompare.internet.com/chart.html">Web Compare</A>'s
a366 1

d371 1
a371 1
  Apache is run on over 1.2 million Internet servers (as of July 1998). It has
d374 1
a374 1
  server, and our server runs without a hitch on over one half of all
d380 3
a382 2
  <A HREF="http://www.apache.org/info/apache_users.html">sites running
  Apache</A>.
a385 1

d391 1
a391 1
   <LI>to continue to be an "open source" no-charge-for-use HTTP server,
d402 1
a402 1
  <P></P>
a404 1

d412 3
a414 1
  <A HREF="http://www.apache.org/bug_report.html">the bug report page</A>.
d416 6
a421 7
  <A HREF="news:comp.infosystems.www.servers.unix"
  >comp.infosystems.www.servers.unix</A> or <A HREF=
  "news:comp.infosystems.www.servers.ms-windows"
  >comp.infosystems.www.servers.ms-windows</A>
  newsgroup (as appropriate for the platform you use), where some of the 
  Apache team lurk, in the company of many other httpd gurus who 
  should be able to help.
a428 1

d435 3
a437 1
  <A HREF="http://www.apache.org/">Apache web site</A>.
d439 4
a442 1
  <A HREF="http://www.apacheweek.com/" REL="Help"><CITE>Apache Week</CITE></A>
d445 2
a446 1
  <A HREF="http://www.apache.org/info/apache_books.html"
a450 1

d457 3
a459 1
  <A HREF="http://www.apache.org/">main web page</A>.
d464 3
a466 1
  <H3>Technical Questions</H3>
d485 3
a487 1
    <A HREF="../mod/core.html#errorlog"><SAMP>ErrorLog</SAMP></A>
d492 3
a494 1
    <A HREF="http://www.apache.org/docs/misc/FAQ.html">FAQ</A>!</STRONG>
d504 3
a506 1
    <A HREF="http://bugs.apache.org/">bug database</A>.
d522 2
a523 1
    <A HREF="news:comp.infosystems.www.servers.unix"
d538 3
a540 1
    <A HREF="http://www.apache.org/bug_report.html">logging a bug report</A>.
d553 1
a553 1
    <P></P>
a563 1

a585 1

d592 3
a594 1
  <A HREF="../mod/mod_alias.html#scriptalias"><SAMP>ScriptAlias</SAMP></A>
d607 3
a609 1
  <A HREF="../mod/mod_mime.html#addhandler"><SAMP>AddHandler</SAMP></A>
d621 1
a621 1
    <P></P>
d629 3
a631 1
    <A HREF="../mod/core.html#options"><SAMP>Options</SAMP></A>
d635 1
a635 1
  <P></P>
d637 1
a637 1
  In some situations, you might not want to actually
d641 4
a644 1
  <EM>via</EM> <A HREF="../mod/mod_rewrite.html"><SAMP>mod_rewrite</SAMP></A> 
d650 1
a650 1
    similar to this one:
d660 1
a660 1
    <P></P>
d663 5
a667 3
    <A HREF="../mod/core.html#options"><SAMP>Options</SAMP></A>
    declaration that includes the <SAMP>ExecCGI</SAMP> and
    <SAMP>FollowSymLinks</SAMP> option.
d670 1
a670 1
  <P></P>
a672 1

d712 1
a712 1
  <P></P>
a728 1

d747 4
a750 1
  <A HREF="#ssi-part-ii">next question</A> for more information about this.)
d757 3
a759 1
    <A HREF="../mod/mod_include.html"><SAMP>mod_include</SAMP></A>
d763 3
a765 1
    <A HREF="../mod/core.html#options"><SAMP>Options</SAMP></A>
d772 3
a774 1
    <A HREF="../mod/mod_mime.html#addhandler"><SAMP>AddHandler</SAMP></A>
d781 1
a781 2
    <P></P>
    <P>
a785 1
    </P>
d789 5
a793 2
  For additional information, see the <CITE>Apache Week</CITE> article on
  <A HREF="http://www.apacheweek.com/features/ssi" REL="Help"
a797 1

d817 4
a820 1
  <A HREF="../mod/mod_expires.html" REL="Help"><SAMP>mod_expires</SAMP></A>
d822 3
a824 1
  <A HREF="../mod/mod_include.html#xbithack" REL="Help"
a835 1

a853 13

 <LI><A NAME="ssi-part-iv">
      <STRONG>SSIs don't work for VirtualHosts and/or 
        user home directories.</STRONG>
     </A>
  <P>
  This is almost always due to having some setting in your config file that
  sets "Options Includes" or some other setting for your DocumentRoot
  but not for other directories.  If you set it inside a Directory
  section, then that setting will only apply to that directory.  
  </P>
 </LI>

d859 5
a863 2
  <A HREF="../mod/mod_proxy.html">proxy module</A>.
  If compiled in, this will make Apache act as a caching-proxy server.
a866 1

d874 4
a877 1
  <A HREF="../content-negotiation.html" REL="Help">content negotiation</A>
d880 3
a882 1
  &quot;<A HREF="http://www.apacheweek.com/features/negotiation" REL="Help"
a886 1

d905 3
a907 1
  <A HREF="../mod/core.html#listen"><SAMP>Listen</SAMP></A>
d924 7
a930 5
    <A HREF="../mod/core.html#listen"><SAMP>Listen</SAMP></A>
    directives.  If there are no other servers running on the machine
    on the same port then you normally don't
    need any Listen directives at all.  By default Apache listens to
    all addresses on port 80.
d933 7
a939 6
    <A HREF="../mod/mod_log_config.html"><SAMP>mod_log_config</SAMP></A>
    to log all requests to a single log file while including the name
    of the virtual host in the log file.  You can then write a
    script to split the logfile into separate files later if
    necessary.  Such a script is provided with the Apache 1.3 distribution
    in the <SAMP>src/support/split-logfile</SAMP> file.
d942 8
a949 17
    (see your system's documentation on the <CODE>limit</CODE> or
    <CODE>ulimit</CODE> commands).  For some systems, information on
    how to do this is available in the
    <A HREF="perf.html">performance hints</A> page.  There is a specific
    note for <A HREF="#freebsd-setsize">FreeBSD</A> below.
    <P>
    For Windows 95, try modifying your <SAMP>C:\CONFIG.SYS</SAMP> file to
    include a line like
    </P>
    <DL>
     <DD><CODE>FILES=300</CODE>
     </DD>
    </DL>
    <P>
    Remember that you'll need to reboot your Windows 95 system in order
    for the new value to take effect.
    </P>
d954 3
a956 1
    <A HREF="../mod/core.html#listen"><SAMP>Listen</SAMP></A>
d980 1
a980 2
  </P>
  <P>
d982 1
a982 1
  kernel with a larger <SAMP>FD_SETSIZE</SAMP>.  This can be done by adding a 
d990 1
a990 1
  to your kernel config file.  Starting at version 2.2, this is no
d997 2
a998 3
  than what <SAMP>FD_SETSIZE</SAMP> is set to when libc is compiled.  To
  increase this, you have to recompile libc with a higher
  <SAMP>FD_SETSIZE</SAMP>.
d1001 1
a1001 1
  In FreeBSD 3.0, the default <SAMP>FD_SETSIZE</SAMP> has been increased to
d1015 3
a1017 3
 <LI><A NAME="POSTnotallowed">
      <STRONG>Why do I keep getting &quot;Method Not Allowed&quot; for 
      form POST requests?</STRONG>
d1020 20
a1039 6
  This is almost always due to Apache not being configured to treat the
  file you are trying to POST to as a CGI script.  You can not POST 
  to a normal HTML file; the operation has no meaning.  See the FAQ 
  entry on <A HREF="#CGIoutsideScriptAlias">CGIs outside ScriptAliased
  directories</A> for details on how to configure Apache to treat the
  file in question as a CGI.
a1042 1

a1096 1

d1104 3
a1106 1
  <A HREF="../mod/core.html#errordocument"><SAMP>ErrorDocument</SAMP></A>
a1110 1

d1113 1
a1113 1
      and SSI to simplify customized error messages?</STRONG>
a1123 1

d1130 3
a1132 1
  <A HREF="../mod/core.html#group"><SAMP>Group</SAMP></A>
a1138 1

d1145 16
a1160 3
  <A HREF="../mod/mod_usertrack.html"><SAMP>mod_usertrack</SAMP></A>
  module, and specifically enabled it with the
  <A HREF="../mod/mod_usertrack.html#cookietracking"
a1162 4
  This module has been in Apache since version 1.2.
  This module may help track users, and uses cookies to do this. If
  you are not using the data generated by <SAMP>mod_usertrack</SAMP>, do
  not compile it into Apache. 
a1165 1

d1174 3
a1176 1
  <A HREF="#cookies1">previous question</A>
a1184 1

d1227 1
a1227 1
  <P></P>
d1230 2
a1231 1
  <A HREF="http://www.apache.org/info/jdk-102.html"
a1236 1

d1247 2
a1248 1
  <A HREF="http://www.apacheweek.com/features/put"
a1252 1

d1260 2
a1261 1
  <A HREF="http://www.fastcgi.com/servers/apache/"
a1270 1

a1282 1

a1296 1

d1302 5
a1306 7
  As of Apache 1.3, CGI scripts are essentially not buffered.  Every time
  your script does a "flush" to output data, that data gets relayed on to
  the client.  Some scripting languages, for example Perl, have their own
  buffering for output - this can be disabled by setting the <CODE>$|</CODE>
  special variable to 1.  Of course this does increase the overall number
  of packets being transmitted, which can result in a sense of slowness for 
  the end user.
d1308 47
a1354 2
  <P>Prior to 1.3, you needed to use "nph-" scripts to accomplish non-buffering.
  Today, the only difference between nph scripts and normal scripts is
a1358 1

d1380 1
a1380 1
  <P></P>
a1382 1

d1409 2
a1410 1
  <A HREF="../mod/core.html#coredumpdirectory"
a1417 1

d1452 1
a1452 1
    <P></P>
a1463 1

d1479 2
a1480 1
  &quot;<A HREF="http://www.apache.org/related_projects.html"
d1487 3
a1489 1
  <A HREF="http://www.apacheweek.com/features/ssl" REL="Help"
a1493 1

d1496 1
a1496 1
       C compiler?</STRONG>
a1504 1

d1530 1
a1530 1
    <P></P>
a1539 1

d1541 2
a1542 2
      <STRONG>Why won't Apache compile with my system's
      <SAMP>cc</SAMP>?</STRONG>
d1586 3
a1588 1
  <A HREF="http://www.apache.org/bug_report.html">problem report</A>.
a1593 1

d1600 3
a1602 1
  <A HREF="../mod/mod_log_config.html"><SAMP>mod_log_config</SAMP></A>
d1604 3
a1606 1
  <A HREF="../mod/mod_log_config.html#customlog"><SAMP>CustomLog</SAMP></A>
d1628 3
a1630 1
  &quot;<A HREF="http://www.apacheweek.com/features/logfiles" REL="Help"
a1635 1

d1676 1
a1676 1
  <P></P>
a1678 1

d1681 1
a1681 1
      the trailing &quot;/&quot;
d1687 1
a1687 1
  When you access a directory without a trailing &quot;/&quot;, Apache needs
a1702 1

d1715 3
a1717 1
  <A HREF="http://www.apacheweek.com/"><CITE>Apache Week</CITE></A>'s
d1719 2
a1720 1
  <A HREF="http://www.apacheweek.com/features/userauth"
d1723 2
a1724 1
  <A HREF="http://www.apacheweek.com/features/dbmauth"
a1728 1

d1730 3
a1732 3
      <STRONG>Why is the environment variable 
      <SAMP>REMOTE_USER</SAMP> not set?</STRONG>
     </A>
d1738 3
a1740 1
  <A HREF="http://www.apacheweek.com/"><CITE>Apache Week</CITE></A>'s
d1742 2
a1743 1
  <A HREF="http://www.apacheweek.com/features/userauth"
d1746 2
a1747 1
  <A HREF="http://www.apacheweek.com/features/dbmauth"
a1758 1

d1790 1
a1790 1
  <P></P>
a1797 1

d1802 4
a1805 1
  The <A HREF="../mod/mod_info.html"><SAMP>mod_info</SAMP></A>
d1815 3
a1817 1
  <A HREF="../mod/core.html#user"><SAMP>User</SAMP></A>
a1823 1

d1825 2
a1826 2
      <STRONG>When I run it under Linux I get &quot;shmget:
      function not found&quot;, what should I do?</STRONG>
a1848 1

a1904 1

a1924 1

a1938 1

d1940 2
a1941 2
      <STRONG>Where can I find mod_rewrite rulesets which already solve
      particular URL-related problems?</STRONG>
d1945 2
a1946 1
  <A HREF="http://www.engelschall.com/pw/apache/rewriteguide/"
d1950 3
a1952 1
  <A HREF="../mod/mod_rewrite.html"><SAMP>mod_rewrite</SAMP></A> 
d1956 3
a1958 1
  <A HREF="mailto:rse@@apache.org">Ralf S. Engelschall</A>
a1963 1

d1965 2
a1966 2
      <STRONG>Where can I find any published information about
      URL-manipulations and mod_rewrite?</STRONG>
d1970 2
a1971 1
  <A HREF="mailto:rse@@apache.org"
d1974 3
a1976 1
  <A HREF="../mod/mod_rewrite.html"><SAMP>mod_rewrite</SAMP></A> 
d1980 3
a1982 2
  &lt;<A HREF="http://www.heise.de/ix/artikel/9612149/"
      >http://www.heise.de/ix/artikel/9612149/</A>&gt;,
d1984 3
a1986 2
  &lt;<A HREF="http://www.heise.de/ix/artikel/E/9612149/"
      >http://www.heise.de/ix/artikel/E/9612149/</A>&gt;.
a1989 1

d1991 2
a1992 2
      <STRONG>Why is mod_rewrite so difficult to learn and seems so
      complicated?</STRONG>
d1996 3
a1998 4
  module which can help you in really <STRONG>all</STRONG> aspects of URL
  rewriting, so it can be no trivial module per definition. To accomplish
  its hard job it uses software leverage and makes use of a powerful regular
  expression
a2015 1

d2017 2
a2018 2
      <STRONG>What can I do if my RewriteRules don't work as expected?
      </STRONG>
a2027 1

d2034 1
a2034 1
  URL to match this directory, <EM>i.e.</EM>, there must be no root directory named
a2041 1

d2043 2
a2044 2
      <STRONG>How can I make all my URLs case-insensitive with mod_rewrite?
      </STRONG>
a2063 1

d2065 2
a2066 1
      <STRONG> Why are RewriteRules in my VirtualHost parts ignored?</STRONG>
a2074 1

d2076 2
a2077 2
      <STRONG> How can I use strings with whitespaces in RewriteRule's ENV
      flag?</STRONG>
d2083 1
a2083 1
  Apache config file parser, <EM>i.e.</EM>, the third argument of the RewriteRule here.
d2088 2
a2089 4

 <LI><A NAME="cgi-spec">
      <STRONG>Where can I find the &quot;CGI specification&quot;?</STRONG>
     </A>
a2097 6
  <P>
  A new draft is being worked on with the intent of making it an informational
  RFC; you can find out more about this project at
  &lt;<A HREF="http://web.golux.com/coar/cgi/"
      ><SAMP>http://web.golux.com/coar/cgi/</SAMP></A>&gt;.
  </P>
a2099 1

d2121 3
a2123 1
  <A HREF="../mod/mod_autoindex.html"><SAMP>mod_autoindex</SAMP></A>
d2125 2
a2126 1
  <A HREF="../mod/mod_autoindex.html#indexoptions"
a2144 1

d2146 1
a2146 1
      <STRONG>I upgraded to Apache 1.3 and now my virtual hosts don't
d2158 2
a2159 1
  <A HREF="http://www.apache.org/docs/mod/core.html#namevirtualhost"
d2193 2
a2194 4
 <LI><A NAME="redhat">
      <STRONG>I'm using RedHat Linux and I have problems with httpd
      dying randomly or not restarting properly</STRONG>
     </A>
d2196 78
a2273 217
  <P>
  RedHat Linux versions 4.x (and possibly earlier) RPMs contain
  various nasty scripts which do not stop or restart Apache properly.
  These can affect you even if you're not running the RedHat supplied
  RPMs.
  </P>
  <P>
  If you're using the default install then you're probably running
  Apache 1.1.3, which is outdated.  From RedHat's ftp site you can
  pick up a more recent RPM for Apache 1.2.x.  This will solve one of
  the problems.
  </P>
  <P>
  If you're using a custom built Apache rather than the RedHat RPMs
  then you should <CODE>rpm -e apache</CODE>.  In particular you want
  the mildly broken <CODE>/etc/logrotate.d/apache</CODE> script to be
  removed, and you want the broken <CODE>/etc/rc.d/init.d/httpd</CODE>
  (or <CODE>httpd.init</CODE>) script to be removed.  The latter is
  actually fixed by the apache-1.2.5 RPMs but if you're building your
  own Apache then you probably don't want the RedHat files.
  </P>
  <P>
  We can't stress enough how important it is for folks, <EM>especially
  vendors</EM> to follow the <A HREF="../stopping.html">stopping Apache
  directions</A> given in our documentation.  In RedHat's defense,
  the broken scripts were necessary with Apache 1.1.x because the
  Linux support in 1.1.x was very poor, and there were various race
  conditions on all platforms.  None of this should be necessary with
  Apache 1.2 and later.
  </P>
  <HR>
 </LI>

 <LI><A NAME="stopping">
      <STRONG>I upgraded from an Apache version earlier
      than 1.2.0 and suddenly I have problems with Apache dying randomly
      or not restarting properly</STRONG>
     </A>

  <P>
  You should read <A HREF="#redhat">the previous note</A> about
  problems with RedHat installations.  It is entirely likely that your
  installation has start/stop/restart scripts which were built for
  an earlier version of Apache.  Versions earlier than 1.2.0 had
  various race conditions that made it necessary to use
  <CODE>kill -9</CODE> at times to take out all the httpd servers.
  But that should not be necessary any longer.  You should follow
  the <A HREF="../stopping.html">directions on how to stop
  and restart Apache</A>.
  </P>
  <P>As of Apache 1.3 there is a script
  <CODE>src/support/apachectl</CODE> which, after a bit of
  customization, is suitable for starting, stopping, and restarting
  your server.
  </P>
  <HR>
 </LI>

 <LI><A NAME="redhat-htm">
      <STRONG>I'm using RedHat Linux and my .htm files are showing
      up as HTML source rather than being formatted!</STRONG>
     </A>

  <P>
  RedHat messed up and forgot to put a content type for <CODE>.htm</CODE>
  files into <CODE>/etc/mime.types</CODE>.  Edit <CODE>/etc/mime.types</CODE>,
  find the line containing <CODE>html</CODE> and add <CODE>htm</CODE> to it.
  Then restart your httpd server:
  </P>
  <DL>
   <DD><CODE>kill -HUP `cat /var/run/httpd.pid`</CODE>
   </DD>
  </DL>
  <P>
  Then <STRONG>clear your browsers' caches</STRONG>.  (Many browsers won't
  re-examine the content type after they've reloaded a page.)
  </P>
  <HR>
 </LI>

 <LI><A NAME="glibc-crypt">
      <STRONG>I'm using RedHat Linux 5.0, or some other 
      <SAMP>glibc</SAMP>-based Linux system, and I get errors with the
      <CODE>crypt</CODE> function when I attempt to build Apache 1.2.</STRONG>
     </A>

  <P>
  <SAMP>glibc</SAMP> puts the <CODE>crypt</CODE> function into a separate
  library.  Edit your <CODE>src/Configuration</CODE> file and set this:
  </P>
  <DL>
   <DD><CODE>EXTRA_LIBS=-lcrypt</CODE>
   </DD>
  </DL>
  <P>
  Then re-run <SAMP>src/Configure</SAMP> and re-execute the make.
  </P>
  <HR>
 </LI>

 <LI><A NAME="nfslocking">
      <STRONG>Server hangs, or fails to start, and/or error log
      fills with &quot;<SAMP>fcntl: F_SETLKW: No record locks
      available</SAMP>&quot; or similar messages</STRONG>
     </A>

  <P>
  These are symptoms of a fine locking problem, which usually means that
  the server is trying to use a synchronization file on an NFS filesystem.
  </P>
  <P>
  Because of its parallel-operation model, the Apache Web server needs to
  provide some form of synchronization when accessing certain resources.
  One of these synchronization methods involves taking out locks on a file,
  which means that the filesystem whereon the lockfile resides must support
  locking.  In many cases this means it <EM>can't</EM> be kept on an
  NFS-mounted filesystem.
  </P>
  <P>
  To cause the Web server to work around the NFS locking limitations, include
  a line such as the following in your server configuration files:
  </P>
  <DL>
   <DD><CODE>LockFile /var/run/apache-lock</CODE>
   </DD>
  </DL>
  <P>
  The directory should not be generally writable (<EM>e.g.</EM>, don't use
  <SAMP>/var/tmp</SAMP>).
  See the <A HREF="../mod/core.html#lockfile"><SAMP>LockFile</SAMP></A>
  documentation for more information.
  </P>
  <HR>
 </LI>
 <LI><A NAME="zoom">
      <STRONG>What's the best hardware/operating system/... How do
      I get the most out of my Apache Web server?</STRONG>
     </A>
  <P>
  Check out Dean Gaudet's
  <A HREF="http://www.apache.org/docs/misc/perf-tuning.html"
  >performance tuning page</A>.
  </P>
  <HR>
 </LI>
 <LI><A NAME="regex">
      <STRONG>What are "regular expressions"?</STRONG></A>
   <P>
   Regular expressions are a way of describing a pattern - for example, "all 
   the words that begin with the letter A" or "every 10-digit phone number" 
   or even "Every sentence with two commas in it, and no capital letter Q".  
   Regular expressions (aka "regexp"s) are useful in Apache because they 
   let you apply certain attributes against collections of files or resources 
   in very flexible ways - for example, all .gif and .jpg files under
   any "images" directory could be written as /.*\/images\/.*[jpg|gif]/.

   <P>The best overview around is probably the one which comes with
   Perl.  We implement a simple subset of Perl's regexp support, but
   it's still a good way to learn what they mean.  You can start by
   going to the <A
   HREF="http://www.perl.com/CPAN-local/doc/manual/html/pod/perlre.html#Version_8_Regular_Expresions">CPAN
   page on regular expressions</A>, and branching out from there.

  <HR>
 </LI>
 <LI><A NAME="broken-gcc"><STRONG>I'm using gcc and I get some
	compilation errors, what is wrong?</STRONG></A>
    <P> GCC parses your system header files and produces a modified subset which
    it uses for compiling.  This behaviour ties GCC tightly to the version
    of your operating system.  So, for example, if you were running IRIX 5.3
    when you built GCC and then upgrade to IRIX 6.2 later, you will have to
    rebuild GCC.  Similarly for Solaris 2.4, 2.5, or 2.5.1 when you upgrade
    to 2.6.  Sometimes you can type "gcc -v" and it will tell you the version
    of the operating system it was built against.
    <P>
    If you fail to do this, then it is very likely that Apache will fail
    to build.  One of the most common errors is with <CODE>readv</CODE>,
    <CODE>writev</CODE>, or <CODE>uio.h</CODE>.  This is <STRONG>not</STRONG> a
    bug with Apache.  You will need to re-install GCC.
   <HR>
  </LI>
  <LI><A NAME="htaccess-work">
       <STRONG>My <CODE>.htaccess</CODE> files are being ignored.</STRONG></A>
   <P>
   This is almost always due to your <A HREF="../mod/core.html#allowoverride">
   AllowOverride</A> directive being set incorrectly for the directory in 
   question.  If it is set to <CODE>None</CODE> then .htaccess files will 
   not even be looked for.  If you do have one that is set, then be certain 
   it covers the directory you are trying to use the .htaccess file in.  
   This is normally accomplished by ensuring it is inside the proper 
   <A HREF="../mod/core.html#directory">Directory</A> container.
   <HR>
  </LI>
  <LI><A NAME="submit_patch">
       <STRONG>How do I submit a patch to the Apache Group?</STRONG></A>
   <P>
   The Apache Group encourages patches from outside developers. There are 2 main "types"
   of patches: small bugfixes and general improvements. Bugfixes should be sent to the
   Apache <A HREF="http://www.apache.org/bug_report.html">bug report page</A>.
   Improvements, modifications and additions should follow these instructions.
   <P>
   In general, the first course of action is to be a member of the
   <CODE>new-httpd@@apache.org</CODE> mailing list. This indicates to the Group that
   you are closely following the latest Apache developments. Your patch file should be
   generated using either '<CODE>diff -c</CODE>' or '<CODE>diff -u</CODE>' against the
   latest CVS tree. To submit your patch, send Email to <CODE>new-httpd@@apache.org</CODE>
   with a <CODE>Subject:</CODE> line that starts with <CODE>[PATCH]</CODE> and
   includes a general description of the patch. In the body of the message, the
   patch should be clearly described and then included at the end of the message.
   If the patch-file is long, you can note a URL to the file instead of the file
   itself. Use of MIME enclosures/attachments should be avoided.
   <P>
   Be prepared to respond to any questions about your patches and possibly defend
   your code. If your patch results in a lot of discussion, you may be asked to
   submit an updated patch that incorporate all changes and suggestions.
   <HR>
  </LI>
d2278 1
a2278 2
<HR>

d2280 1
a2280 1
 Apache HTTP Server Version 1.3
@


1.1.1.3
log
@import apache 1.3.26 + mod_ssl 2.8.10
@
text
@d1 2356
a2356 2
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
d2358 2
a2359 3781
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta name="generator" content="HTML Tidy, see www.w3.org" />

    <title>Apache Server Frequently Asked Questions</title>
    
  </head>
  <!-- Background white, links blue (unvisited), navy (visited), red (active) -->

  <body bgcolor="#FFFFFF" text="#000000" link="#0000FF"
  vlink="#000080" alink="#FF0000">
        <div align="CENTER">
      <img src="../images/sub.gif" alt="[APACHE DOCUMENTATION]" /> 

      <h3>Apache HTTP Server Version 1.3</h3>
    </div>


    <h1 align="CENTER">Apache Server Frequently Asked
    Questions</h1>

    <p>The latest version of this FAQ is always available from the
    main Apache web site, at &lt;<a
    href="http://httpd.apache.org/docs/misc/FAQ.html"
    rel="Help"><samp>http://httpd.apache.org/docs/misc/FAQ.html</samp></a>&gt;.</p>
    <!-- Notes about changes:                                           -->
    <!--  - If adding a relative link to another part of the            -->
    <!--    documentation, *do* include the ".html" portion.  There's a -->
    <!--    good chance that the user will be reading the documentation -->
    <!--    on his own system, which may not be configured for          -->
    <!--    multiviews.                                                 -->
    <!--  - When adding items, make sure they're put in the right place -->
    <!--    - verify that the numbering matches up.                     -->
    <!--  - *Don't* use <PRE></PRE> blocks - they don't appear          -->
    <!--    correctly in a reliable way when this is converted to text  -->
    <!--    with Lynx.  Use <DL><DD><CODE>xxx<BR>xx</CODE></DD></DL>    -->
    <!--    blocks inside a <P></P> instead.  This is necessary to get  -->
    <!--    the horizontal and vertical indenting right.                -->
    <!--  - Don't forget to include an HR tag after the last /P tag     -->
    <!--    but before the /LI in an item.                              -->

    <p>If you are reading a text-only version of this FAQ, you may
    find numbers enclosed in brackets (such as "[12]"). These refer
    to the list of reference URLs to be found at the end of the
    document. These references do not appear, and are not needed,
    for the hypertext version.</p>

    <h2>The Questions</h2>
    <!-- Stuff to Add:                                                  -->
    <!-- - can't bind to port 80                                        -->
    <!--   - permission denied                                          -->
    <!--   - address already in use                                     -->
    <!-- - mod_auth & passwd lines "user:pw:.*" - ++1st colon onward is -->
    <!--   treated as pw, not just ++1st to \-\-2nd.                    -->
    <!-- - SSL:                                                         -->
    <!--   - Can I use Apache-SSL for free in Canada?                   -->
    <!--   - Why can't I use Apache-SSL in the U.S.?                    -->
    <!-- - How can I found out how many visitors my site gets?          -->
    <!-- - How do I add a counter?                                      -->
    <!-- - How do I configure Apache as a proxy?                        -->
    <!-- - What browsers support HTTP/1.1?                              -->
    <!-- - What's the point of vhosts-by-name is there aren't any       -->
    <!--   HTTP/1.1 browsers?                                           -->
    <!-- - Is there an Apache for W95/WNT?                              -->
    <!-- - Why does Apache die when a vhost can't be DNS-resolved?      -->
    <!-- - Why do I get "send lost connection" messages in my error     -->
    <!--   log?                                                         -->
    <!--   - specifically consider .pdf files which seem to cause this  -->
    <!--     a lot when accessed via the plugin ... and also mention    -->
    <!--     how range-requests can cause bytes served < file size      -->
    <!-- - Why do directory indexes appear as garbage?  (A: -lucb)      -->
    <!-- - How do I add a footer to all pages offered by my server?     -->
    <!-- - Fix midi question; a bigger problem than midi vs. x-midi is  -->
    <!--   the simple fact that older versions of Apache (and new ones  -->
    <!--   that have been upgraded without upgrading the mime.types     -->
    <!--   file) don't have the type listed at all.                     -->
    <!-- - RewriteRule /~fraggle/* /cgi-bin/fraggle.pl does not work    -->
    <!-- - how do I disable authentication for a subdirectory?          -->
    <!--   (A: you can't but "Satisfy any; Allow from all" can be close -->
    <!-- - '400 malformed request' on Win32 might mean stale proxy; see -->
    <!--   PR #2300.                                                    -->
    <!-- - how do I tell what version of Apache I am running?           -->

    <ol type="A">
      








      

      <li value="1">
        <strong>Background</strong> 

        <ol>
          <li><a href="#what">What is Apache?</a></li>

          <li><a href="#why">How and why was Apache
          created?</a></li>

          <li><a href="#name">Why the name "Apache"?</a></li>

          <li><a href="#compare">OK, so how does Apache compare to
          other servers?</a></li>

          <li><a href="#tested">How thoroughly tested is
          Apache?</a></li>

          <li><a href="#future">What are the future plans for
          Apache?</a></li>

          <li><a href="#support">Whom do I contact for
          support?</a></li>

          <li><a href="#more">Is there any more information on
          Apache?</a></li>

          <li><a href="#where">Where can I get Apache?</a></li>

          <li><a href="#logo">May I use the Apache logo on my
          product or Web site?</a></li>
        </ol>
      </li>
      
      
    
    
  </body>
</html>


      








      

      <li value="2">
        <strong>General Technical Questions</strong> 

        <ol>
          <li><a href="#what2do">"Why can't I ...? Why won't ...
          work?" What to do in case of problems</a></li>

          <li><a href="#compatible">How compatible is Apache with
          my existing NCSA 1.3 setup?</a></li>

          <li><a href="#year2000">Is Apache Year 2000
          compliant?</a></li>

          <li><a href="#submit_patch">How do I submit a patch to
          the Apache Group?</a></li>

          <li><a href="#domination">Why has Apache stolen my
          favourite site's Internet address?</a></li>

          <li><a href="#apspam">Why am I getting spam mail from the
          Apache site?</a></li>

          <li><a href="#redist">May I include the Apache software
          on a CD or other package I'm distributing?</a></li>

          <li><a href="#zoom">What's the best hardware/operating
          system/... How do I get the most out of my Apache Web
          server?</a></li>

          <li><a href="#regex">What are "regular
          expressions"?</a></li>

          <li><a href="#binaries">Why isn't there a binary for my
          platform?</a></li>
        </ol>
      </li>
      
      
    
    
  </body>
</html>


      








      

      <li value="3">
        <strong>Building Apache</strong> 

        <ol>
          <li><a href="#bind8.1">Why do I get an error about an
          undefined reference to "<samp>__inet_ntoa</samp>" or
          other <samp>__inet_*</samp> symbols?</a></li>

          <li><a href="#cantbuild">Why won't Apache compile with my
          system's <samp>cc</samp>?</a></li>

          <li><a href="#linuxiovec">Why do I get complaints about
          redefinition of "<code>struct iovec</code>" when
          compiling under Linux?</a></li>

          <li><a href="#broken-gcc">I'm using gcc and I get some
          compilation errors, what is wrong?</a></li>

          <li><a href="#glibc-crypt">I'm using RedHat Linux 5.0, or
          some other <samp>glibc</samp>-based Linux system, and I
          get errors with the <code>crypt</code> function when I
          attempt to build Apache 1.2.</a></li>
        </ol>
      </li>
      
      
    
    
  </body>
</html>


      








      

      <li value="4">
        <strong>Error Log Messages and Problems Starting
        Apache</strong> 

        <ol>
          <li><a href="#setgid">Why do I get "<samp>setgid: Invalid
          argument</samp>" at startup?</a></li>

          <li><a href="#nodelay">Why am I getting "<samp>httpd:
          could not set socket option TCP_NODELAY</samp>" in my
          error log?</a></li>

          <li><a href="#peerreset">Why am I getting
          "<samp>connection reset by peer</samp>" in my error
          log?</a></li>

          <li><a href="#wheres-the-dump">The errorlog says Apache
          dumped core, but where's the dump file?</a></li>

          <li><a href="#linux-shmget">When I run it under Linux I
          get "shmget: function not found", what should I
          do?</a></li>

          <li><a href="#nfslocking">Server hangs, or fails to
          start, and/or error log fills with "<samp>fcntl:
          F_SETLKW: No record locks available</samp>" or similar
          messages</a></li>

          <li><a href="#aixccbug">Why am I getting "<samp>Expected
          &lt;/Directory&gt; but saw &lt;/Directory&gt;</samp>"
          when I try to start Apache?</a></li>

          <li><a href="#redhat">I'm using RedHat Linux and I have
          problems with httpd dying randomly or not restarting
          properly</a></li>

          <li><a href="#stopping">I upgraded from an Apache version
          earlier than 1.2.0 and suddenly I have problems with
          Apache dying randomly or not restarting properly</a></li>

          <li><a href="#setservername">When I try to start Apache
          from a DOS window, I get a message like "<samp>Cannot
          determine host name. Use ServerName directive to set it
          manually.</samp>" What does this mean?</a></li>

          <li><a href="#ws2_32dll">When I try to start Apache for
          Windows, I get a message like "<samp>Unable To Locate
          WS2_32.DLL...</samp>". What should I do?</a></li>

          <li><a href="#WSADuplicateSocket">Apache for Windows does
          not start. Error log contains this message "<samp>[crit]
          (10045) The attempted operation is not supported for the
          type of object referenced: Parent: WSADuplicateSocket
          failed for socket ###</samp>". What does this
          mean?</a></li>

          <li><a href="#err1067">When I try to start Apache on
          Windows, I get a message like "<code>System error 1067
          has occurred. The process terminated
          unexpectedly.</code>" What does this mean?</a></li>

          <li><a href="#suseFDN">On a SuSE Linux system, I try and 
          configure access control using basic authentication.
	  Although I follow the example exactly, authentication
	  fails, and an error message "<code>admin: not a valid
	  FDN: ....</code>" is logged.</a></li>

          <li><a href="#codered">Why do I have weird entries in my
          logs asking for <code>default.ida</code> and
          <code>cmd.exe</code>?</a></li>

          <li><a href="#restart">Why am I getting server restart
          messages periodically, when I did not restart the
          server?</a></li>

        </ol>
      </li>
      
      
    
    
  </body>
</html>


      








      

      <li value="5">
        <strong>Configuration Questions</strong> 

        <ol>
          <li><a href="#fdlim">Why can't I run more than
          &lt;<em>n</em>&gt; virtual hosts?</a></li>

          <li><a href="#freebsd-setsize">Can I increase
          <samp>FD_SETSIZE</samp> on FreeBSD?</a></li>

          <li><a href="#errordoc401">Why doesn't my
          <code>ErrorDocument 401</code> work?</a></li>

          <li><a href="#cookies1">Why does Apache send a cookie on
          every response?</a></li>

          <li><a href="#cookies2">Why don't my cookies work, I even
          compiled in <samp>mod_cookies</samp>?</a></li>

          <li><a href="#jdk1-and-http1.1">Why do my Java app[let]s
          give me plain text when I request an URL from an Apache
          server?</a></li>

          <li><a href="#midi">How do I get Apache to send a MIDI
          file so the browser can play it?</a></li>

          <li><a href="#addlog">How do I add browsers and referrers
          to my logs?</a></li>

          <li><a href="#set-servername">Why does accessing
          directories only work when I include the trailing "/"
          (<em>e.g.</em>,&nbsp;<samp>http://foo.domain.com/~user/</samp>)
          but not when I omit it
          (<em>e.g.</em>,&nbsp;<samp>http://foo.domain.com/~user</samp>)?</a></li>

          <li><a href="#no-info-directives">Why doesn't mod_info
          list any directives?</a></li>

          <li><a href="#namevhost">I upgraded to Apache 1.3 and now
          my virtual hosts don't work!</a></li>

          <li><a href="#redhat-htm">I'm using RedHat Linux and my
          .htm files are showing up as HTML source rather than
          being formatted!</a></li>

          <li><a href="#htaccess-work">My <code>.htaccess</code>
          files are being ignored.</a></li>

          <li><a href="#forbidden">Why do I get a
          "<samp>Forbidden</samp>" message whenever I try to access
          a particular directory?</a></li>

          <li><a href="#malfiles">Why do I get a
          "<samp>Forbidden/You don't have permission to access / on
          this server</samp>" message whenever I try to access my
          server?</a></li>

          <li><a href="#ie-ignores-mime">Why do my files appear
          correctly in Internet Explorer, but show up as source or
          trigger a save window with Netscape; or, Why doesn't
          Internet Explorer render my text/plain document
          correctly?</a></li>

	  <li><a href="#canonical-hostnames">My site is accessible
          under many different hostnames; how do I redirect clients
          so that they see only a single name?</a></li>

          <li><a href="#firewall">Why can I access my website from the
          server or from my local network, but I can't access it from
          elsewhere on the Internet?</a></li>

	  <li><a href="#indexes">How do I turn automatic directory listings
	  on or off?</a></li>

         <li><a href="#options">Why do my Options directives not have
         the desired effect?</a></li>


        </ol>
      </li>
      
      
    
    
  </body>
</html>


      








      

      <li value="6">
        <strong>Dynamic Content (CGI and SSI)</strong> 

        <ol>
          <li><a href="#CGIoutsideScriptAlias">How do I enable CGI
          execution in directories other than the
          ScriptAlias?</a></li>

          <li><a href="#premature-script-headers">What does it mean
          when my CGIs fail with "<samp>Premature end of script
          headers</samp>"?</a></li>

          <li><a href="#POSTnotallowed">Why do I keep getting
          "Method Not Allowed" for form POST requests?</a></li>

          <li><a href="#nph-scripts">How can I get my script's
          output without Apache buffering it? Why doesn't my server
          push work?</a></li>

          <li><a href="#cgi-spec">Where can I find the "CGI
          specification"?</a></li>

          <li><a href="#fastcgi">Why isn't FastCGI included with
          Apache any more?</a></li>

          <li><a href="#ssi-part-i">How do I enable SSI (parsed
          HTML)?</a></li>

          <li><a href="#ssi-part-ii">Why don't my parsed files get
          cached?</a></li>

          <li><a href="#ssi-part-iii">How can I have my script
          output parsed?</a></li>

          <li><a href="#ssi-part-iv">SSIs don't work for
          VirtualHosts and/or user home directories</a></li>

          <li><a href="#errordocssi">How can I use
          <code>ErrorDocument</code> and SSI to simplify customized
          error messages?</a></li>

          <li><a href="#remote-user-var">Why is the environment
          variable <samp>REMOTE_USER</samp> not set?</a></li>

          <li><a href="#user-cgi">How do I allow each of my user
          directories to have a cgi-bin directory?</a></li>
        </ol>
      </li>
      
      
    
    
  </body>
</html>


      








      

      <li value="7">
        <strong>Authentication and Access Restrictions</strong> 

        <ol>
          <li><a href="#dnsauth">Why isn't restricting access by
          host or domain name working correctly?</a></li>

          <li><a href="#user-authentication">How do I set up Apache
          to require a username and password to access certain
          documents?</a></li>

          <li><a href="#remote-auth-only">How do I set up Apache to
          allow access to certain documents only if a site is
          either a local site <em>or</em> the user supplies a
          password and username?</a></li>

          <li><a href="#authauthoritative">Why does my
          authentication give me a server error?</a></li>

          <li><a href="#auth-on-same-machine">Do I have to keep the
          (mSQL) authentication information on the same
          machine?</a></li>

          <li><a href="#msql-slow">Why is my mSQL authentication
          terribly slow?</a></li>

          <li><a href="#passwdauth">Can I use my
          <samp>/etc/passwd</samp> file for Web page
          authentication?</a></li>

          <li><a href="#prompted-twice">Why does Apache ask for my
          password twice before serving a file?</a></li>

          <li><a href="#image-theft">How can I prevent people from
          "stealing" the images from my web site?</a></li>

        </ol>
      </li>
      
      
    
    
  </body>
</html>


      








      

      <li value="8">
        <strong>URL Rewriting</strong> 

        <ol>
          <li><a href="#rewrite-more-config">Where can I find
          mod_rewrite rulesets which already solve particular
          URL-related problems?</a></li>

          <li><a href="#rewrite-article">Where can I find any
          published information about URL-manipulations and
          mod_rewrite?</a></li>

          <li><a href="#rewrite-complexity">Why is mod_rewrite so
          difficult to learn and seems so complicated?</a></li>

          <li><a href="#rewrite-dontwork">What can I do if my
          RewriteRules don't work as expected?</a></li>

          <li><a href="#rewrite-prefixdocroot">Why don't some of my
          URLs get prefixed with DocumentRoot when using
          mod_rewrite?</a></li>

          <li><a href="#rewrite-nocase">How can I make all my URLs
          case-insensitive with mod_rewrite?</a></li>

          <li><a href="#rewrite-virthost">Why are RewriteRules in
          my VirtualHost parts ignored?</a></li>

          <li><a href="#rewrite-envwhitespace">How can I use
          strings with whitespaces in RewriteRule's ENV
          flag?</a></li>
        </ol>
      </li>
      
      
    
    
  </body>
</html>


      








      

      <li value="9">
        <strong>Features</strong> 

        <ol>
          <li><a href="#proxy">Does or will Apache act as a Proxy
          server?</a></li>

          <li><a href="#multiviews">What are "multiviews"?</a></li>

          <li><a href="#putsupport">Why can't I publish to my
          Apache server using PUT on Netscape Gold and other
          programs?</a></li>

          <li><a href="#SSL-i">Why doesn't Apache include
          SSL?</a></li>

          <li><a href="#footer">How can I attach a footer to my
          documents without using SSI?</a></li>

          <li><a href="#search">Does Apache include a search
          engine?</a></li>

          <li><a href="#rotate">How can I rotate my log
          files?</a></li>

          <li><a href="#conditional-logging">How do I keep certain
          requests from appearing in my logs?</a></li>

          <li><a href="#dbinteg">Does Apache include any sort of
          database integration?</a></li>

          <li><a href="#asp">Can I use Active Server Pages (ASP)
          with Apache?</a></li>

          <li><a href="#java">Does Apache come with Java
          support?</a></li>
        </ol>
      </li>
      
      
    
    
  </body>
</html>


    </ol>
    <hr />

    <h2>The Answers</h2>
    








      
      
    

    <h3>A. Background</h3>

    <ol>
      <li>
        <a id="what" name="what"><strong>What is
        Apache?</strong></a> 

        <p>The Apache httpd server</p>

        <ul>
          <li>is a powerful, flexible, HTTP/1.1 compliant web
          server</li>

          <li>implements the latest protocols, including HTTP/1.1
          (RFC2616)</li>

          <li>is highly configurable and extensible with
          third-party modules</li>

          <li>can be customised by writing 'modules' using the
          Apache module API</li>

          <li>provides full source code and comes with an
          unrestrictive license</li>

          <li>runs on Windows NT/9x, Netware 5.x and above, OS/2, and most
          versions of Unix, as well as several other operating
          systems</li>

          <li>is actively being developed</li>

          <li>encourages user feedback through new ideas, bug
          reports and patches</li>

          <li>
            implements many frequently requested features,
            including:<br />
            <br />
             

            <dl>
              <dt>DBM databases for authentication</dt>

              <dd>allows you to easily set up password-protected
              pages with enormous numbers of authorized users,
              without bogging down the server.</dd>

              <dt>Customized responses to errors and problems</dt>

              <dd>Allows you to set up files, or even CGI scripts,
              which are returned by the server in response to
              errors and problems, e.g. setup a script to intercept
              <strong>500 Server Error</strong>s and perform
              on-the-fly diagnostics for both users and
              yourself.</dd>

              <dt>Multiple DirectoryIndex directives</dt>

              <dd>Allows you to say <code>DirectoryIndex index.html
              index.cgi</code>, which instructs the server to
              either send back <code>index.html</code> or run
              <code>index.cgi</code> when a directory URL is
              requested, whichever it finds in the directory.</dd>

              <dt>Unlimited flexible URL rewriting and
              aliasing</dt>

              <dd>Apache has no fixed limit on the numbers of
              Aliases and Redirects which may be declared in the
              config files. In addition, a powerful rewriting
              engine can be used to solve most URL manipulation
              problems.</dd>

              <dt>Content negotiation</dt>

              <dd>i.e. the ability to automatically serve clients
              of varying sophistication and HTML level compliance,
              with documents which offer the best representation of
              information that the client is capable of
              accepting.</dd>

              <dt>Virtual Hosts</dt>

              <dd>A much requested feature, sometimes known as
              multi-homed servers. This allows the server to
              distinguish between requests made to different IP
              addresses or names (mapped to the same machine).
              Apache also offers dynamically configurable
              mass-virtual hosting.</dd>

              <dt>Configurable Reliable Piped Logs</dt>

              <dd>You can configure Apache to generate logs in the
              format that you want. In addition, on most Unix
              architectures, Apache can send log files to a pipe,
              allowing for log rotation, hit filtering, real-time
              splitting of multiple vhosts into separate logs, and
              asynchronous DNS resolving on the fly.</dd>
            </dl>
          </li>
        </ul>
        <hr />
      </li>

      <li>
        <a id="why" name="why"><strong>How and why was Apache
        created?</strong></a> 

        <p>The <a
        href="http://httpd.apache.org/ABOUT_APACHE.html">About
        Apache</a> document explains how the Apache project evolved
        from its beginnings as an outgrowth of the NCSA httpd
        project to its current status as one of the fastest, most
        efficient, and most functional web servers in
        existence.</p>
        <hr />
      </li>

      <li>
        <a id="name" name="name"><strong>Why the name
        "Apache"?</strong></a> 

        <p>A cute name which stuck. Apache is "<strong>A
        PA</strong>t<strong>CH</strong>y server". It was based on
        some existing code and a series of "patch files".</p>

        <p>For many developers it is also a reverent connotation to
        the Native American Indian tribe of Apache, <a
        href="http://www.indians.org/welker/apache.htm">well-known
        for their superior skills in warfare strategy and
        inexhaustible endurance</a>. For more information on the
        Apache Nation, we suggest searching <a
        href="http://www.google.com/search?q=Apache+Nation">Google</a>,
        <a
        href="http://www.northernlight.com/nlquery.fcg?qr=Apache+Nation">
        Northernlight</a>, or <a
        href="http://www.alltheweb.com/cgi-bin/asearch?query=Apache+Nation">
        AllTheWeb</a>.</p>
        <hr />
      </li>

      <li>
        <a id="compare" name="compare"><strong>OK, so how does
        Apache compare to other servers?</strong></a> 

        <p>For an independent assessment, see <a
        href="http://webcompare.internet.com/">Web
        Compare</a>.</p>

        <p>Apache has been shown to be substantially faster, more
        stable, and more feature-full than many other web servers.
        Although certain commercial servers have claimed to surpass
        Apache's speed (it has not been demonstrated that any of
        these "benchmarks" are a good way of measuring WWW server
        speed at any rate), we feel that it is better to have a
        mostly-fast free server than an extremely-fast server that
        costs thousands of dollars. Apache is run on sites that get
        millions of hits per day, and they have experienced no
        performance difficulties.</p>
        <hr />
      </li>

      <li>
        <a id="tested" name="tested"><strong>How thoroughly tested
        is Apache?</strong></a> 

        <p>Apache is run on over 6 million Internet servers (as of
        February 2000). It has been tested thoroughly by both
        developers and users. The Apache Group maintains rigorous
        standards before releasing new versions of their server,
        and our server runs without a hitch on over one half of all
        WWW servers available on the Internet. When bugs do show
        up, we release patches and new versions as soon as they are
        available.</p>
        <hr />
      </li>

      <li>
        <a id="future" name="future"><strong>What are the future
        plans for Apache?</strong></a> 

        <ul>
          <li>to continue to be an "open source" no-charge-for-use
          HTTP server,</li>

          <li>to keep up with advances in HTTP protocol and web
          developments in general,</li>

          <li>to collect suggestions for fixes/improvements from
          its users,</li>

          <li>to respond to needs of large volume providers as well
          as occasional users.</li>
        </ul>
        <hr />
      </li>

      <li>
        <a id="support" name="support"><strong>Whom do I contact
        for support?</strong></a> 

        <p>There is no official support for Apache. None of the
        developers want to be swamped by a flood of trivial
        questions that can be resolved elsewhere. Bug reports and
        suggestions should be sent <em>via</em> <a
        href="http://httpd.apache.org/bug_report.html">the bug
        report page</a>. Other questions should be directed to the
        <a href="http://httpd.apache.org/userslist.html">Apache HTTP
        Server Users List</a> or the
        <a
        href="news:comp.infosystems.www.servers.unix">comp.infosystems.www.servers.unix</a>
        or <a
        href="news:comp.infosystems.www.servers.ms-windows">comp.infosystems.www.servers.ms-windows</a>
        newsgroup (as appropriate for the platform you use), where
        some of the Apache team lurk, in the company of many other
        httpd gurus who should be able to help.</p>

        <p>Commercial support for Apache is, however, available
        from a number of third parties.</p>
        <hr />
      </li>

      <li>
        <a id="more" name="more"><strong>Is there any more
        information available on Apache?</strong></a> 

        <p>Indeed there is. See the main <a
        href="http://httpd.apache.org/">Apache web site</a>. There
        is also a regular electronic publication called <a
        href="http://www.apacheweek.com/" rel="Help"><cite>Apache
        Week</cite></a> available. Links to relevant <cite>Apache
        Week</cite> articles are included below where appropriate.
        There are also some <a
        href="http://httpd.apache.org/info/apache_books.html">Apache-specific
        books</a> available.</p>
        <hr />
      </li>

      <li>
        <a id="where" name="where"><strong>Where can I get
        Apache?</strong></a> 

        <p>You can find out how to download the source for Apache
        at the project's <a href="http://httpd.apache.org/">main
        web page</a>.</p>
        <hr />
      </li>

      <li>
        <a id="logo" name="logo"><b>May I use the Apache logo on my
        product or Web site?</b></a> 

        <p>You may <b>NOT</b> use any original artwork from the
        Apache Software Foundation, nor make or use modified
        versions of such artwork, except under the following
        conditions:</p>

        <ul>
          <li>You may use the <a
          href="../../apache_pb.gif">'Powered by Apache'
          graphic</a> on a Web site that is being served by the
          Apache HTTP server software.</li>

          <li>You may use the aforementioned 'Powered by Apache'
          graphic or the <a
          href="http://www.apache.org/images/asf_logo.gif">
          Apache Software Foundation logo</a> in product
          description and promotional material <b>IF and ONLY
          IF</b> such use can in no way be interpreted as anything
          other than an attribution. Using the Apache name and
          artwork in a manner that implies endorsement of a product
          or service is <b>strictly forbidden</b>.</li>
        </ul>
        <hr />
      </li>
    </ol>
    
    
  </body>
</html>


    








      
      
    

    <h3>B. General Technical Questions</h3>

    <ol>
      <li>
        <a id="what2do" name="what2do"><strong>"Why can't I ...?
        Why won't ... work?" What to do in case of
        problems</strong></a> 

        <p>If you are having trouble with your Apache server
        software, you should take the following steps:</p>

        <ol>
          <li>
            <strong>Check the errorlog!</strong> 

            <p>Apache tries to be helpful when it encounters a
            problem. In many cases, it will provide some details by
            writing one or messages to the server error log.
            Sometimes this is enough for you to diagnose &amp; fix
            the problem yourself (such as file permissions or the
            like). The default location of the error log is
            <samp>/usr/local/apache/logs/error_log</samp>, but see
            the <a
            href="../mod/core.html#errorlog"><samp>ErrorLog</samp></a>
            directive in your config files for the location on your
            server.</p>
          </li>

          <li>
            <strong>Check the <a
            href="http://httpd.apache.org/docs/misc/FAQ.html">FAQ</a>!</strong>
            

            <p>The latest version of the Apache Frequently-Asked
            Questions list can always be found at the main Apache
            web site.</p>
          </li>

          <li>
            <strong>Check the Apache bug database</strong> 

            <p>Most problems that get reported to The Apache Group
            are recorded in the <a
            href="http://bugs.apache.org/">bug database</a>.
            <em><strong>Please</strong> check the existing reports,
            open <strong>and</strong> closed, before adding
            one.</em> If you find that your issue has already been
            reported, please <em>don't</em> add a "me, too" report.
            If the original report isn't closed yet, we suggest
            that you check it periodically. You might also consider
            contacting the original submitter, because there may be
            an email exchange going on about the issue that isn't
            getting recorded in the database.</p>
          </li>

          <li>
            <strong>Ask in a user support group.</strong> 

            <p>A lot of common problems never make it to the bug
            database because there's already high Q&amp;A traffic
            about them in the <a
            href="http://httpd.apache.org/userslist.html">Users
            mailing list</a> or <a
            href="news:comp.infosystems.www.servers.unix"><samp>comp.infosystems.www.servers.unix</samp></a>
            and related newsgroups. These newsgroups are also
            available via <a
            href="http://groups.google.com/groups?group=comp.infosystems.www.servers">
            Google</a>. Many Apache users, and some of the developers,
            can be found roaming their virtual halls, so it is suggested
            that you seek wisdom there. The chances are good that
            you'll get a faster answer there than from the bug
            database, even if you <em>don't</em> see your question
            already posted.</p>
          </li>

          <li>
            <strong>If all else fails, report the problem in the
            bug database</strong> 

            <p>If you've gone through those steps above that are
            appropriate and have obtained no relief, then please
            <em>do</em> let The Apache Group know about the problem
            by <a
            href="http://httpd.apache.org/bug_report.html">logging
            a bug report</a>.</p>

            <p>If your problem involves the server crashing and
            generating a core dump, please include a backtrace (if
            possible). As an example,</p>

            <dl>
              <dd><code># cd <em>ServerRoot</em><br />
               # dbx httpd core<br />
               (dbx) where</code></dd>
            </dl>

            <p>(Substitute the appropriate locations for your
            <samp>ServerRoot</samp> and your <samp>httpd</samp> and
            <samp>core</samp> files. You may have to use
            <code>gdb</code> instead of <code>dbx</code>.)</p>
          </li>
        </ol>
        <hr />
      </li>

      <li>
        <a id="compatible" name="compatible"><strong>How compatible
        is Apache with my existing NCSA 1.3 setup?</strong></a> 

        <p>Apache attempts to offer all the features and
        configuration options of NCSA httpd 1.3, as well as many of
        the additional features found in NCSA httpd 1.4 and NCSA
        httpd 1.5.</p>

        <p>NCSA httpd appears to be moving toward adding
        experimental features which are not generally required at
        the moment. Some of the experiments will succeed while
        others will inevitably be dropped. The Apache philosophy is
        to add what's needed as and when it is needed.</p>

        <p>Friendly interaction between Apache and NCSA developers
        should ensure that fundamental feature enhancements stay
        consistent between the two servers for the foreseeable
        future.</p>
        <hr />
      </li>

      <li>
        <a id="year2000" name="year2000"><strong>Is Apache Year
        2000 compliant?</strong></a> 

        <p>Yes, Apache is Year 2000 compliant.</p>

        <p>Apache internally never stores years as two digits. On
        the HTTP protocol level RFC1123-style addresses are
        generated which is the only format a HTTP/1.1-compliant
        server should generate. To be compatible with older
        applications Apache recognizes ANSI C's
        <code>asctime()</code> and RFC850-/RFC1036-style date
        formats, too. The <code>asctime()</code> format uses
        four-digit years, but the RFC850 and RFC1036 date formats
        only define a two-digit year. If Apache sees such a date
        with a value less than 70 it assumes that the century is
        <samp>20</samp> rather than <samp>19</samp>.</p>

        <p>Although Apache is Year 2000 compliant, you may still
        get problems if the underlying OS has problems with dates
        past year 2000 (<em>e.g.</em>, OS calls which accept or
        return year numbers). Most (UNIX) systems store dates
        internally as signed 32-bit integers which contain the
        number of seconds since 1<sup>st</sup> January 1970, so the
        magic boundary to worry about is the year 2038 and not
        2000. But modern operating systems shouldn't cause any
        trouble at all.</p>

        <p>Users of Apache 1.2.x should upgrade to a current
        version of Apache 1.3 (see <a
        href="../new_features_1_3.html#misc">year-2000 improvements
        in Apache 1.3</a> for details).</p>

        <p>The Apache HTTP Server project is an open-source
        software product of the Apache Software Foundation. The
        project and the Foundation <b>cannot</b> offer legal
        assurances regarding any suitability of the software for
        your application. There are several commercial Apache
        support organizations and derivative server products
        available that may be able to stand behind the software and
        provide you with any assurances you may require. You may
        find links to some of these vendors at <samp>&lt;<a
        href="http://www.apache.org/info/support.cgi">http://www.apache.org/info/support.cgi</a>&gt;</samp>.</p>

        <p>The Apache HTTP server software is distributed with the
        following disclaimer, found in the software license:</p>
<pre>
   THIS SOFTWARE IS PROVIDED BY THE APACHE GROUP ``AS IS'' AND ANY
   EXPRESSED OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
   PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE APACHE GROUP OR
   ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
   SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
   NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
   LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
   HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
   STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
   ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
   OF THE POSSIBILITY OF SUCH DAMAGE.
 
</pre>
        <hr />
      </li>

      <li>
        <a id="submit_patch" name="submit_patch"><strong>How do I
        submit a patch to the Apache Group?</strong></a> 

        <p>The Apache Group encourages patches from outside
        developers. There are 2 main "types" of patches: small
        bugfixes and general improvements. Bugfixes should be
        submitting using the Apache <a
        href="http://httpd.apache.org/bug_report.html">bug report
        page</a>. Improvements, modifications, and additions should
        follow the instructions below.</p>

        <p>In general, the first course of action is to be a member
        of the <samp>dev@@httpd.apache.org</samp> mailing list. This
        indicates to the Group that you are closely following the
        latest Apache developments. Your patch file should be
        generated using either '<code>diff&nbsp;-c</code>' or
        '<code>diff&nbsp;-u</code>' against the latest CVS tree. To
        submit your patch, send email to
        <samp>dev@@httpd.apache.org</samp> with a
        <samp>Subject:</samp> line that starts with
        <samp>[PATCH]</samp> and includes a general description of
        the patch. In the body of the message, the patch should be
        clearly described and then included at the end of the
        message. If the patch-file is long, you can note a URL to
        the file instead of the file itself. Use of MIME
        enclosures/attachments should be avoided.</p>

        <p>Be prepared to respond to any questions about your
        patches and possibly defend your code. If your patch
        results in a lot of discussion, you may be asked to submit
        an updated patch that incorporate all changes and
        suggestions.</p>
        <hr />
      </li>

      <li>
        <a id="domination" name="domination"><strong>Why has Apache
        stolen my favourite site's Internet address?</strong></a> 

        <p>The simple answer is: "It hasn't." This misconception is
        usually caused by the site in question having migrated to
        the Apache Web server software, but not having migrated the
        site's content yet. When Apache is installed, the default
        page that gets installed tells the Webmaster the
        installation was successful. The expectation is that this
        default page will be replaced with the site's real content.
        If it doesn't, complain to the Webmaster, not to the Apache
        project -- we just make the software and aren't responsible
        for what people do (or don't do) with it.</p>
        <hr />
      </li>

      <li>
        <a id="apspam" name="apspam"><strong>Why am I getting spam
        mail from the Apache site?</strong></a> 

        <p>The short answer is: "You aren't." Usually when someone
        thinks the Apache site is originating spam, it's because
        they've traced the spam to a Web site, and the Web site
        says it's using Apache. See the <a
        href="#domination">previous FAQ entry</a> for more details
        on this phenomenon.</p>

        <p>No marketing spam originates from the Apache site. The
        only mail that comes from the site goes only to addresses
        that have been <em>requested</em> to receive the mail.</p>
        <hr />
      </li>

      <li>
        <a id="redist" name="redist"><strong>May I include the
        Apache software on a CD or other package I'm
        distributing?</strong></a> 

        <p>The detailed answer to this question can be found in the
        Apache license, which is included in the Apache
        distribution in the file <code>LICENSE</code>. You can also
        find it on the Web at <samp>&lt;<a
        href="http://www.apache.org/LICENSE.txt">http://www.apache.org/LICENSE.txt</a>&gt;</samp>.</p>
        <hr />
      </li>

      <li>
        <a id="zoom" name="zoom"><strong>What's the best
        hardware/operating system/... How do I get the most out of
        my Apache Web server?</strong></a> 

        <p>Check out Dean Gaudet's <a
        href="perf-tuning.html">performance tuning page</a>.</p>
        <hr />
      </li>

      <li>
        <a id="regex" name="regex"><strong>What are "regular
        expressions"?</strong></a> 

        <p>Regular expressions are a way of describing a pattern -
        for example, "all the words that begin with the letter A"
        or "every 10-digit phone number" or even "Every sentence
        with two commas in it, and no capital letter Q". Regular
        expressions (aka "regex"s) are useful in Apache because
        they let you apply certain attributes against collections
        of files or resources in very flexible ways - for example,
        all .gif and .jpg files under any "images" directory could
        be written as /\/images\/.*(jpg|gif)$/.</p>

        <p>The best overview around is probably the one which comes
        with Perl. We implement a simple subset of Perl's regex
        support, but it's still a good way to learn what they mean.
        You can start by going to the <a
        href="http://www.perl.com/doc/manual/html/pod/perlre.html">CPAN
        page on regular expressions</a>, and branching out from
        there.</p> <hr />
      </li>

      <li>
        <a id="binaries" name="binaries"><b>Why isn't there a
        binary for my platform?</b></a> 

        <p>The developers make sure that the software builds and
        works correctly on the platforms available to them; this
        does <i>not</i> necessarily mean that <i>your</i> platform
        is one of them. In addition, the Apache HTTP server project
        is primarily source oriented, meaning that distributing
        valid and buildable source code is the purpose of a
        release, not making sure that there is a binary package for
        all of the supported platforms.</p>

        <p>If you don't see a kit for your platform listed in the
        binary distribution area (&lt;URL:<a
        href="http://httpd.apache.org/dist/httpd/binaries/">http://httpd.apache.org/dist/httpd/binaries/</a>&gt;),
        it means either that the platform isn't available to any of
        the developers, or that they just haven't gotten around to
        preparing a binary for it. As this is a voluntary project,
        they are under no obligation to do so. Users are encouraged
        and expected to build the software themselves.</p>

        <p>The sole exception to these practices is the Windows
        package. Unlike most Unix and Unix-like platforms, Windows
        systems do not come with a bundled software development
        environment, so we <i>do</i> prepare binary kits for
        Windows when we make a release. Again, however, it's a
        voluntary thing and only a limited number of the developers
        have the capability to build the InstallShield package, so
        the Windows release may lag somewhat behind the source
        release. This lag should be no more than a few days at
        most.</p>
        <hr />
      </li>
    </ol>
    
    
  </body>
</html>


    








      
      
    

    <h3>C. Building Apache</h3>

    <ol>
      <li>
        <a id="bind8.1" name="bind8.1"><strong>Why do I get an
        error about an undefined reference to
        "<samp>__inet_ntoa</samp>" or other <samp>__inet_*</samp>
        symbols?</strong></a> 

        <p>If you have installed <a
        href="http://www.isc.org/bind.html">BIND-8</a> then this is
        normally due to a conflict between your include files and
        your libraries. BIND-8 installs its include files and
        libraries <code>/usr/local/include/</code> and
        <code>/usr/local/lib/</code>, while the resolver that comes
        with your system is probably installed in
        <code>/usr/include/</code> and <code>/usr/lib/</code>. If
        your system uses the header files in
        <code>/usr/local/include/</code> before those in
        <code>/usr/include/</code> but you do not use the new
        resolver library, then the two versions will conflict.</p>

        <p>To resolve this, you can either make sure you use the
        include files and libraries that came with your system or
        make sure to use the new include files and libraries.
        Adding <code>-lbind</code> to the
        <code>EXTRA_LDFLAGS</code> line in your
        <samp>Configuration</samp> file, then re-running
        <samp>Configure</samp>, should resolve the problem. (Apache
        versions 1.2.* and earlier use <code>EXTRA_LFLAGS</code>
        instead.)</p>

        <p><strong>Note:</strong>As of BIND 8.1.1, the bind
        libraries and files are installed under
        <samp>/usr/local/bind</samp> by default, so you should not
        run into this problem. Should you want to use the bind
        resolvers you'll have to add the following to the
        respective lines:</p>

        <dl>
          <dd><code>EXTRA_CFLAGS=-I/usr/local/bind/include<br />
           EXTRA_LDFLAGS=-L/usr/local/bind/lib<br />
           EXTRA_LIBS=-lbind</code></dd>
        </dl>
        <hr />
      </li>

      <li>
        <a id="cantbuild" name="cantbuild"><strong>Why won't Apache
        compile with my system's <samp>cc</samp>?</strong></a> 

        <p>If the server won't compile on your system, it is
        probably due to one of the following causes:</p>

        <ul>
          <li><strong>The <samp>Configure</samp> script doesn't
          recognize your system environment.</strong><br />
           This might be either because it's completely unknown or
          because the specific environment (include files, OS
          version, <em>et cetera</em>) isn't explicitly handled. If
          this happens, you may need to port the server to your OS
          yourself.</li>

          <li><strong>Your system's C compiler is
          garbage.</strong><br />
           Some operating systems include a default C compiler that
          is either not ANSI C-compliant or suffers from other
          deficiencies. The usual recommendation in cases like this
          is to acquire, install, and use <samp>gcc</samp>.</li>

          <li><strong>Your <samp>include</samp> files may be
          confused.</strong><br />
           In some cases, we have found that a compiler
          installation or system upgrade has left the C header
          files in an inconsistent state. Make sure that your
          include directory tree is in sync with the compiler and
          the operating system.</li>

          <li><strong>Your operating system or compiler may be out
          of revision.</strong><br />
           Software vendors (including those that develop operating
          systems) issue new releases for a reason; sometimes to
          add functionality, but more often to fix bugs that have
          been discovered. Try upgrading your compiler and/or your
          operating system.</li>
        </ul>

        <p>The Apache Group tests the ability to build the server
        on many different platforms. Unfortunately, we can't test
        all of the OS platforms there are. If you have verified
        that none of the above issues is the cause of your problem,
        and it hasn't been reported before, please submit a <a
        href="http://httpd.apache.org/bug_report.html">problem
        report</a>. Be sure to include <em>complete</em> details,
        such as the compiler &amp; OS versions and exact error
        messages.</p>
        <hr />
      </li>

      <li>
        <a id="linuxiovec" name="linuxiovec"><strong>Why do I get
        complaints about redefinition of "<code>struct
        iovec</code>" when compiling under Linux?</strong></a> 

        <p>This is a conflict between your C library includes and
        your kernel includes. You need to make sure that the
        versions of both are matched properly. There are two
        workarounds, either one will solve the problem:</p>

        <ul>
          <li>Remove the definition of <code>struct iovec</code>
          from your C library includes. It is located in
          <code>/usr/include/sys/uio.h</code>.
          <strong>Or,</strong></li>

          <li>Add <code>-DNO_WRITEV</code> to the
          <code>EXTRA_CFLAGS</code> line in your
          <samp>Configuration</samp> and reconfigure/rebuild. This
          hurts performance and should only be used as a last
          resort.</li>
        </ul>
        <hr />
      </li>

      <li>
        <a id="broken-gcc" name="broken-gcc"><strong>I'm using gcc
        and I get some compilation errors, what is
        wrong?</strong></a> 

        <p>GCC parses your system header files and produces a
        modified subset which it uses for compiling. This behavior
        ties GCC tightly to the version of your operating system.
        So, for example, if you were running IRIX 5.3 when you
        built GCC and then upgrade to IRIX 6.2 later, you will have
        to rebuild GCC. Similarly for Solaris 2.4, 2.5, or 2.5.1
        when you upgrade to 2.6. Sometimes you can type "gcc -v"
        and it will tell you the version of the operating system it
        was built against.</p>

        <p>If you fail to do this, then it is very likely that
        Apache will fail to build. One of the most common errors is
        with <code>readv</code>, <code>writev</code>, or
        <code>uio.h</code>. This is <strong>not</strong> a bug with
        Apache. You will need to re-install GCC.</p>
        <hr />
      </li>

      <li>
        <a id="glibc-crypt" name="glibc-crypt"><strong>I'm using
        RedHat Linux 5.0, or some other <samp>glibc</samp>-based
        Linux system, and I get errors with the <code>crypt</code>
        function when I attempt to build Apache 1.2.</strong></a> 

        <p><samp>glibc</samp> puts the <code>crypt</code> function
        into a separate library. Edit your
        <code>src/Configuration</code> file and set this:</p>

        <dl>
          <dd><code>EXTRA_LIBS=-lcrypt</code></dd>
        </dl>

        <p>Then re-run <samp>src/Configure</samp> and re-execute
        the make.</p>
        <hr />
      </li>
    </ol>
    
    
  </body>
</html>


    








      
      
    

    <h3>D. Error Log Messages and Problems Starting Apache</h3>

    <ol>
      <li>
        <a id="setgid" name="setgid"><strong>Why do I get
        "<samp>setgid: Invalid argument</samp>" at
        startup?</strong></a> 

        <p>Your <a
        href="../mod/core.html#group"><samp>Group</samp></a>
        directive (probably in <samp>conf/httpd.conf</samp>) needs
        to name a group that actually exists in the
        <samp>/etc/group</samp> file (or your system's equivalent).
        This problem is also frequently seen when a negative number
        is used in the <code>Group</code> directive (<em>e.g.</em>,
        "<code>Group&nbsp;#-1</code>"). Using a group name -- not
        group number -- found in your system's group database
        should solve this problem in all cases.</p>
        <hr />
      </li>

      <li>
        <a id="nodelay" name="nodelay"><strong>Why am I getting
        "<samp>httpd: could not set socket option
        TCP_NODELAY</samp>" in my error log?</strong></a> 

        <p>This message almost always indicates that the client
        disconnected before Apache reached the point of calling
        <code>setsockopt()</code> for the connection. It shouldn't
        occur for more than about 1% of the requests your server
        handles, and it's advisory only in any case.</p>
        <hr />
      </li>

      <li>
        <a id="peerreset" name="peerreset"><strong>Why am I getting
        "<samp>connection reset by peer</samp>" in my error
        log?</strong></a> 

        <p>This is a normal message and nothing about which to be
        alarmed. It simply means that the client canceled the
        connection before it had been completely set up - such as
        by the end-user pressing the "Stop" button. People's
        patience being what it is, sites with response-time
        problems or slow network links may experiences this more
        than high-capacity ones or those with large pipes to the
        network.</p>
        <hr />
      </li>

      <li>
        <a id="wheres-the-dump" name="wheres-the-dump"><strong>The
        errorlog says Apache dumped core, but where's the dump
        file?</strong></a> 

        <p>In Apache version 1.2, the error log message about
        dumped core includes the directory where the dump file
        should be located. However, many Unixes do not allow a
        process that has called <code>setuid()</code> to dump core
        for security reasons; the typical Apache setup has the
        server started as root to bind to port 80, after which it
        changes UIDs to a non-privileged user to serve
        requests.</p>

        <p>Dealing with this is extremely operating
        system-specific, and may require rebuilding your system
        kernel. Consult your operating system documentation or
        vendor for more information about whether your system does
        this and how to bypass it. If there <em>is</em> a
        documented way of bypassing it, it is recommended that you
        bypass it only for the <samp>httpd</samp> server process if
        possible.</p>

        <p>The canonical location for Apache's core-dump files is
        the <a href="../mod/core.html#serverroot">ServerRoot</a>
        directory. As of Apache version 1.3, the location can be
        set <em>via</em> the <a
        href="../mod/core.html#coredumpdirectory"><samp>CoreDumpDirectory</samp></a>
        directive to a different directory. Make sure that this
        directory is writable by the user the server runs as (as
        opposed to the user the server is <em>started</em> as).</p>
        <hr />
      </li>

      <li>
        <a id="linux-shmget" name="linux-shmget"><strong>When I run
        it under Linux I get "shmget: function not found", what
        should I do?</strong></a> 

        <p>Your kernel has been built without SysV IPC support. You
        will have to rebuild the kernel with that support enabled
        (it's under the "General Setup" submenu). Documentation for
        kernel building is beyond the scope of this FAQ; you should
        consult the <a
        href="http://www.redhat.com/mirrors/LDP/HOWTO/Kernel-HOWTO.html">
        Kernel HOWTO</a>, or the documentation provided with your
        distribution, or a <a
        href="http://www.redhat.com/mirrors/LDP/HOWTO/META-FAQ.html">
        Linux newsgroup/mailing list</a>. As a last-resort
        workaround, you can comment out the
        <code>#define&nbsp;USE_SHMGET_SCOREBOARD</code> definition
        in the <samp>LINUX</samp> section of
        <samp>src/conf.h</samp> and rebuild the server (prior to
        1.3b4, simply removing
        <code>#define&nbsp;HAVE_SHMGET</code> would have sufficed).
        This will produce a server which is slower and less
        reliable.</p>
        <hr />
      </li>

      <li>
        <a id="nfslocking" name="nfslocking"><strong>Server hangs,
        or fails to start, and/or error log fills with
        "<samp>fcntl: F_SETLKW: No record locks available</samp>"
        or similar messages</strong></a> 

        <p>These are symptoms of a fine locking problem, which
        usually means that the server is trying to use a
        synchronization file on an NFS filesystem.</p>

        <p>Because of its parallel-operation model, the Apache Web
        server needs to provide some form of synchronization when
        accessing certain resources. One of these synchronization
        methods involves taking out locks on a file, which means
        that the filesystem whereon the lockfile resides must
        support locking. In many cases this means it <em>can't</em>
        be kept on an NFS-mounted filesystem.</p>

        <p>To cause the Web server to work around the NFS locking
        limitations, include a line such as the following in your
        server configuration files:</p>

        <dl>
          <dd><code>LockFile /var/run/apache-lock</code></dd>
        </dl>

        <p>The directory should not be generally writable
        (<em>e.g.</em>, don't use <samp>/var/tmp</samp>). See the
        <a
        href="../mod/core.html#lockfile"><samp>LockFile</samp></a>
        documentation for more information.</p>
        <hr />
      </li>

      <li>
        <a id="aixccbug" name="aixccbug"><strong>Why am I getting
        "<samp>Expected &lt;/Directory&gt; but saw
        &lt;/Directory&gt;</samp>" when I try to start
        Apache?</strong></a> 

        <p>This is a known problem with certain versions of the AIX
        C compiler. IBM are working on a solution, and the issue is
        being tracked by <a
        href="http://bugs.apache.org/index/full/2312">problem
        report #2312</a>.</p>
        <hr />
      </li>

      <li>
        <a id="redhat" name="redhat"><strong>I'm using RedHat Linux
        and I have problems with httpd dying randomly or not
        restarting properly</strong></a> 

        <p>RedHat Linux versions 4.x (and possibly earlier) RPMs
        contain various nasty scripts which do not stop or restart
        Apache properly. These can affect you even if you're not
        running the RedHat supplied RPMs.</p>

        <p>If you're using the default install then you're probably
        running Apache 1.1.3, which is outdated. From RedHat's ftp
        site you can pick up a more recent RPM for Apache 1.2.x.
        This will solve one of the problems.</p>

        <p>If you're using a custom built Apache rather than the
        RedHat RPMs then you should <code>rpm -e apache</code>. In
        particular you want the mildly broken
        <code>/etc/logrotate.d/apache</code> script to be removed,
        and you want the broken <code>/etc/rc.d/init.d/httpd</code>
        (or <code>httpd.init</code>) script to be removed. The
        latter is actually fixed by the apache-1.2.5 RPMs but if
        you're building your own Apache then you probably don't
        want the RedHat files.</p>

        <p>We can't stress enough how important it is for folks,
        <em>especially vendors</em> to follow the <a
        href="../stopping.html">stopping Apache directions</a>
        given in our documentation. In RedHat's defense, the broken
        scripts were necessary with Apache 1.1.x because the Linux
        support in 1.1.x was very poor, and there were various race
        conditions on all platforms. None of this should be
        necessary with Apache 1.2 and later.</p>
        <hr />
      </li>

      <li>
        <a id="stopping" name="stopping"><strong>I upgraded from an
        Apache version earlier than 1.2.0 and suddenly I have
        problems with Apache dying randomly or not restarting
        properly</strong></a> 

        <p>You should read <a href="#redhat">the previous note</a>
        about problems with RedHat installations. It is entirely
        likely that your installation has start/stop/restart
        scripts which were built for an earlier version of Apache.
        Versions earlier than 1.2.0 had various race conditions
        that made it necessary to use <code>kill -9</code> at times
        to take out all the httpd servers. But that should not be
        necessary any longer. You should follow the <a
        href="../stopping.html">directions on how to stop and
        restart Apache</a>.</p>

        <p>As of Apache 1.3 there is a script
        <code>src/support/apachectl</code> which, after a bit of
        customization, is suitable for starting, stopping, and
        restarting your server.</p>
        <hr />
      </li>

      <li>
        <a id="setservername" name="setservername"><b>When I try to
        start Apache from a DOS window, I get a message like
        "<samp>Cannot determine host name. Use ServerName directive
        to set it manually.</samp>" What does this mean?</b></a> 

        <p>It means what it says; the Apache software can't
        determine the hostname of your system. Edit your
        <samp>conf\httpd.conf</samp> file, look for the string
        "ServerName", and make sure there's an uncommented
        directive such as</p>

        <dl>
          <dd><code>ServerName localhost</code></dd>
        </dl>

        <p>or</p>

        <dl>
          <dd><code>ServerName www.foo.com</code></dd>
        </dl>

        <p>in the file. Correct it if there one there with wrong
        information, or add one if you don't already have one.</p>

        <p>Also, make sure that your Windows system has DNS
        enabled. See the TCP/IP setup component of the Networking
        or Internet Options control panel.</p>

        <p>After verifying that DNS is enabled and that you have a
        valid hostname in your <samp>ServerName</samp> directive,
        try to start the server again.</p>
        <hr />
      </li>

      <li>
        <a id="ws2_32dll" name="ws2_32dll"><b>When I try to start
        Apache for Windows, I get a message like "<samp>Unable To
        Locate WS2_32.DLL...</samp>". What should I do?</b></a> 

        <p>Short answer: You need to install Winsock 2, available
        from <a
        href="http://www.microsoft.com/windows95/downloads/">http://www.microsoft.com/windows95/downloads/</a></p>

        <p>Detailed answer: Prior to version 1.3.9, Apache for
        Windows used Winsock 1.1. Beginning with version 1.3.9,
        Apache began using Winsock 2 features (specifically,
        WSADuplicateSocket()). WS2_32.DLL implements the Winsock 2
        API. Winsock 2 ships with Windows NT 4.0 and Windows 98.
        Some of the earlier releases of Windows 95 did not include
        Winsock 2.</p>
        <hr />
      </li>

      <li>
        <a id="WSADuplicateSocket"
        name="WSADuplicateSocket"><b>Apache for Windows does not
        start. Error log contains this message: "<samp>[crit]
        (10045) The attempted operation is not supported for the
        type of object referenced: Parent: WSADuplicateSocket
        failed for socket ###</samp>". What does this mean?</b></a>
        

        <p>We have seen this problem when Apache is run on systems
        along with Virtual Private Networking clients like Aventail
        Connect. Aventail Connect is a Layered Service Provider
        (LSP) that inserts itself, as a "shim," between the Winsock
        2 API and Window's native Winsock 2 implementation. The
        Aventail Connect shim does not implement
        WSADuplicateSocket, which is the cause of the failure.</p>

        <p>The shim is not unloaded when Aventail Connect is shut
        down. Once observed, the problem persists until the shim is
        either explicitly unloaded or the machine is rebooted.
        Instructions for temporarily removing the Aventail Connect
        V3.x shim can be found here: "<a
        href="http://support.aventail.com/akb/article00386.html">How
        to Remove Aventail Connect v3.x from the LSP Order for
        Testing Purposes</a>."</p>

        <p>Another potential solution (not tested) is to add
        <code>apache.exe</code> to the Aventail "Connect Exclusion
        List". See this link for details: "<a
        href="http://support.aventail.com/akb/article00586.html">How
        to Add an Application to Aventail Connect's Application
        Exclusion List</a>."</p>

        <p>Apache is affected in a similar way by <em>any</em>
        firewall program that isn't correctly configured. Assure
        you exclude your Apache server ports (usually port 80) from
        the list of ports to block. Refer to your firewall
        program's documentation for the how-to.</p>
        <hr />
      </li>

      <li>
        <a id="err1067" name="err1067"><b>When I try to start
        Apache on Windows, I get a message like "<code>System error
        1067 has occurred. The process terminated
        unexpectedly</code>." What does this mean?</b></a> 

        <p>This message means that the Web server was unable to
        start correctly for one reason or another. To find out why,
        execute the following commands in a DOS window:</p>
<pre>
    c:
    cd "\Program Files\Apache Group\Apache"
    apache
 
</pre>

        <p>(If you don't get the prompt back, hit Control-C to
        cause Apache to exit.)</p>

        <p>The error you see will probably be one of those
        preceding this question in the FAQ.</p>

        <p>As of Apache 1.3.14, first check the Windows NT Event
        Log for Application errors using the Windows NT/2000 Event
        Viewer program. Any errors that occur prior to opening the
        Apache error log will be stored here, if Apache is run as a
        Service on NT or 2000. As with any error, also check your
        Apache error log.</p>
        <hr />
      </li>

      <li><a id="suseFDN" name="suseFDN"><b>On a SuSE Linux system, I try and 
          configure access control using basic authentication.
	  Although I follow the example exactly, authentication
	  fails, and an error message "<code>admin: not a valid
	  FDN: ....</code>" is logged.</b></a>

          <p>
	  In the SuSE distribution, additional 3rd party authentication
	  modules have been added and activated by default. These modules
	  interfere with the Apache standard modules and cause Basic
	  authentication to fail. Our recommendation is to comment all
	  those modules in <code>/etc/httpd/suse_addmodule.conf</code>
	  and <code>/etc/httpd/suse_loadmodule.conf</code> which are not
	  actually required for running your server.
          </p><hr />
      </li>

     <li><a id="codered" name="codered"><b>Why do I have weird entries in my
          logs asking for <code>default.ida</code> and
          <code>cmd.exe</code>?</b></a>
      
          <p>The host requesting pages from your website and creating
          those entries is a Windows machine running IIS that has been
          infected by an Internet worm such as Nimda or Code Red. You
          can safely ignore these error messages as they do not affect
          Apache.  ApacheWeek has an <a
          href="http://www.apacheweek.com/features/codered">article</a>
          with more information.</p>
     </li>

    <li<a id="restart" name="restart"><b>Why am I getting server restart
    messages periodically, when I did not restart the server?</b></a>

          <p>Problem: You are noticing restart messages in your error log,
          periodically, when you know you did not restart the server
          yourself:</p>

<pre>
[Thu Jun  6 04:02:01 2002] [notice] SIGHUP received.  Attempting to restart
[Thu Jun  6 04:02:02 2002] [notice] Apache configured -- resuming normal operations
</pre>

          <p>Check your cron jobs to see when/if your server logs are being
          rotated. Compare the time of rotation to the error menage time.
          If they are the same, you can somewhat safely assume that the 
          restart is due to your server logs being rotated.</p>

    </ol>
    
    
  </body>
</html>


    








      
      
    

    <h3>E. Configuration Questions</h3>

    <ol>
      <li>
        <a id="fdlim" name="fdlim"><strong>Why can't I run more
        than &lt;<em>n</em>&gt; virtual hosts?</strong></a> 

        <p>You are probably running into resource limitations in
        your operating system. The most common limitation is the
        <em>per</em>-process limit on <strong>file
        descriptors</strong>, which is almost always the cause of
        problems seen when adding virtual hosts. Apache often does
        not give an intuitive error message because it is normally
        some library routine (such as <code>gethostbyname()</code>)
        which needs file descriptors and doesn't complain
        intelligibly when it can't get them.</p>

        <p>Each log file requires a file descriptor, which means
        that if you are using separate access and error logs for
        each virtual host, each virtual host needs two file
        descriptors. Each <a
        href="../mod/core.html#listen"><samp>Listen</samp></a>
        directive also needs a file descriptor.</p>

        <p>Typical values for &lt;<em>n</em>&gt; that we've seen
        are in the neighborhood of 128 or 250. When the server
        bumps into the file descriptor limit, it may dump core with
        a SIGSEGV, it might just hang, or it may limp along and
        you'll see (possibly meaningful) errors in the error log.
        One common problem that occurs when you run into a file
        descriptor limit is that CGI scripts stop being executed
        properly.</p>

        <p>As to what you can do about this:</p>

        <ol>
          <li>Reduce the number of <a
          href="../mod/core.html#listen"><samp>Listen</samp></a>
          directives. If there are no other servers running on the
          machine on the same port then you normally don't need any
          Listen directives at all. By default Apache listens to
          all addresses on port 80.</li>

          <li>Reduce the number of log files. You can use <a
          href="../mod/mod_log_config.html"><samp>mod_log_config</samp></a>
          to log all requests to a single log file while including
          the name of the virtual host in the log file. You can
          then write a script to split the logfile into separate
          files later if necessary. Such a script is provided with
          the Apache 1.3 distribution in the
          <samp>src/support/split-logfile</samp> file.</li>

          <li>
            Increase the number of file descriptors available to
            the server (see your system's documentation on the
            <code>limit</code> or <code>ulimit</code> commands).
            For some systems, information on how to do this is
            available in the <a href="perf.html">performance
            hints</a> page. There is a specific note for <a
            href="#freebsd-setsize">FreeBSD</a> below. 

            <p>For Windows 95, try modifying your
            <samp>C:\CONFIG.SYS</samp> file to include a line
            like</p>

            <dl>
              <dd><code>FILES=300</code></dd>
            </dl>

            <p>Remember that you'll need to reboot your Windows 95
            system in order for the new value to take effect.</p>
          </li>

          <li>"Don't do that" - try to run with fewer virtual
          hosts</li>

          <li>Spread your operation across multiple server
          processes (using <a
          href="../mod/core.html#listen"><samp>Listen</samp></a>
          for example, but see the first point) and/or ports.</li>
        </ol>

        <p>Since this is an operating-system limitation, there's
        not much else available in the way of solutions.</p>

        <p>As of 1.2.1 we have made attempts to work around various
        limitations involving running with many descriptors. <a
        href="descriptors.html">More information is
        available.</a></p>
        <hr />
      </li>

      <li>
        <a id="freebsd-setsize" name="freebsd-setsize"><strong>Can
        I increase <samp>FD_SETSIZE</samp> on FreeBSD?</strong></a>
        

        <p>On versions of FreeBSD before 3.0, the
        <samp>FD_SETSIZE</samp> define defaults to 256. This means
        that you will have trouble usefully using more than 256
        file descriptors in Apache. This can be increased, but
        doing so can be tricky.</p>

        <p>If you are using a version prior to 2.2, you need to
        recompile your kernel with a larger
        <samp>FD_SETSIZE</samp>. This can be done by adding a line
        such as:</p>

        <dl>
          <dd><code>options FD_SETSIZE <em>nnn</em></code></dd>
        </dl>

        <p>to your kernel config file. Starting at version 2.2,
        this is no longer necessary.</p>

        <p>If you are using a version of 2.1-stable from after
        1997/03/10 or 2.2 or 3.0-current from before 1997/06/28,
        there is a limit in the resolver library that prevents it
        from using more file descriptors than what
        <samp>FD_SETSIZE</samp> is set to when libc is compiled. To
        increase this, you have to recompile libc with a higher
        <samp>FD_SETSIZE</samp>.</p>

        <p>In FreeBSD 3.0, the default <samp>FD_SETSIZE</samp> has
        been increased to 1024 and the above limitation in the
        resolver library has been removed.</p>

        <p>After you deal with the appropriate changes above, you
        can increase the setting of <samp>FD_SETSIZE</samp> at
        Apache compilation time by adding
        "<samp>-DFD_SETSIZE=<em>nnn</em></samp>" to the
        <samp>EXTRA_CFLAGS</samp> line in your
        <samp>Configuration</samp> file.</p>
        <hr />
      </li>

      <li>
        <a id="errordoc401" name="errordoc401"><strong>Why doesn't
        my <code>ErrorDocument 401</code> work?</strong></a> 

        <p>You need to use it with a URL in the form
        "<samp>/foo/bar</samp>" and not one with a method and
        hostname such as "<samp>http://host/foo/bar</samp>". See
        the <a
        href="../mod/core.html#errordocument"><samp>ErrorDocument</samp></a>
        documentation for details. This was incorrectly documented
        in the past.</p>
        <hr />
      </li>

      <li>
        <a id="cookies1" name="cookies1"><strong>Why does Apache
        send a cookie on every response?</strong></a> 

        <p>Apache does <em>not</em> automatically send a cookie on
        every response, unless you have re-compiled it with the <a
        href="../mod/mod_usertrack.html"><samp>mod_usertrack</samp></a>
        module, and specifically enabled it with the <a
        href="../mod/mod_usertrack.html#cookietracking"><samp>CookieTracking</samp></a>
        directive. This module has been in Apache since version
        1.2. This module may help track users, and uses cookies to
        do this. If you are not using the data generated by
        <samp>mod_usertrack</samp>, do not compile it into
        Apache.</p>
        <hr />
      </li>

      <li>
        <a id="cookies2" name="cookies2"><strong>Why don't my
        cookies work, I even compiled in
        <samp>mod_cookies</samp>?</strong></a> 

        <p>Firstly, you do <em>not</em> need to compile in
        <samp>mod_cookies</samp> in order for your scripts to work
        (see the <a href="#cookies1">previous question</a> for more
        about <samp>mod_cookies</samp>). Apache passes on your
        <samp>Set-Cookie</samp> header fine, with or without this
        module. If cookies do not work it will be because your
        script does not work properly or your browser does not use
        cookies or is not set-up to accept them.</p>
        <hr />
      </li>

      <li>
        <a id="jdk1-and-http1.1"
        name="jdk1-and-http1.1"><strong>Why do my Java app[let]s
        give me plain text when I request an URL from an Apache
        server?</strong></a> 

        <p>As of version 1.2, Apache is an HTTP/1.1 (HyperText
        Transfer Protocol version 1.1) server. This fact is
        reflected in the protocol version that's included in the
        response headers sent to a client when processing a
        request. Unfortunately, low-level Web access classes
        included in the Java Development Kit (JDK) version 1.0.2
        expect to see the version string "HTTP/1.0" and do not
        correctly interpret the "HTTP/1.1" value Apache is sending
        (this part of the response is a declaration of what the
        server can do rather than a declaration of the dialect of
        the response). The result is that the JDK methods do not
        correctly parse the headers, and include them with the
        document content by mistake.</p>

        <p>This is definitely a bug in the JDK 1.0.2 foundation
        classes from Sun, and it has been fixed in version 1.1.
        However, the classes in question are part of the virtual
        machine environment, which means they're part of the Web
        browser (if Java-enabled) or the Java environment on the
        client system - so even if you develop <em>your</em>
        classes with a recent JDK, the eventual users might
        encounter the problem. The classes involved are replaceable
        by vendors implementing the Java virtual machine
        environment, and so even those that are based upon the
        1.0.2 version may not have this problem.</p>

        <p>In the meantime, a workaround is to tell Apache to
        "fake" an HTTP/1.0 response to requests that come from the
        JDK methods; this can be done by including a line such as
        the following in your server configuration files:</p>

        <dl>
          <dd><code>BrowserMatch Java1.0 force-response-1.0<br />
           BrowserMatch JDK/1.0 force-response-1.0</code></dd>
        </dl>

        <p>More information about this issue can be found in the <a
        href="http://httpd.apache.org/info/jdk-102.html"><cite>Java
        and HTTP/1.1</cite></a> page at the Apache web site.</p>
        <hr />
      </li>

      <li>
        <a id="midi" name="midi"><strong>How do I get Apache to
        send a MIDI file so the browser can play it?</strong></a> 

        <p>Even though the registered MIME type for MIDI files is
        <samp>audio/midi</samp>, some browsers are not set up to
        recognize it as such; instead, they look for
        <samp>audio/x-midi</samp>. There are two things you can do
        to address this:</p>

        <ol>
          <li>Configure your browser to treat documents of type
          <samp>audio/midi</samp> correctly. This is the type that
          Apache sends by default. This may not be workable,
          however, if you have many client installations to change,
          or if some or many of the clients are not under your
          control.</li>

          <li>
            Instruct Apache to send a different
            <samp>Content-type</samp> header for these files by
            adding the following line to your server's
            configuration files: 

            <dl>
              <dd><code>AddType audio/x-midi .mid .midi
              .kar</code></dd>
            </dl>

            <p>Note that this may break browsers that <em>do</em>
            recognize the <samp>audio/midi</samp> MIME type unless
            they're prepared to also handle
            <samp>audio/x-midi</samp> the same way.</p>
          </li>
        </ol>
        <hr />
      </li>

      <li>
        <a id="addlog" name="addlog"><strong>How do I add browsers
        and referrers to my logs?</strong></a> 

        <p>Apache provides a couple of different ways of doing
        this. The recommended method is to compile the <a
        href="../mod/mod_log_config.html"><samp>mod_log_config</samp></a>
        module into your configuration and use the <a
        href="../mod/mod_log_config.html#customlog"><samp>CustomLog</samp></a>
        directive.</p>

        <p>You can either log the additional information in files
        other than your normal transfer log, or you can add them to
        the records already being written. For example:</p>

        <p>
        <code>CustomLog&nbsp;logs/access_log&nbsp;"%h&nbsp;%l&nbsp;%u&nbsp;%t&nbsp;\"%r\"&nbsp;%s&nbsp;%b&nbsp;\"%{Referer}i\"&nbsp;\"%{User-Agent}i\""</code></p>

        <p>This will add the values of the <samp>User-agent:</samp>
        and <samp>Referer:</samp> headers, which indicate the
        client and the referring page, respectively, to the end of
        each line in the access log.</p>

        <p>You may want to check out the <cite>Apache Week</cite>
        article entitled: "<a
        href="http://www.apacheweek.com/features/logfiles"
        rel="Help"><cite>Gathering Visitor Information: Customizing
        Your Logfiles</cite></a>".</p>
        <hr />
      </li>

      <li>
        <a id="set-servername" name="set-servername"><strong>Why
        does accessing directories only work when I include the
        trailing "/"
        (<em>e.g.</em>,&nbsp;<samp>http://foo.domain.com/~user/</samp>)
        but not when I omit it
        (<em>e.g.</em>,&nbsp;<samp>http://foo.domain.com/~user</samp>)?</strong></a>
        

        <p>When you access a directory without a trailing "/",
        Apache needs to send what is called a redirect to the
        client to tell it to add the trailing slash. If it did not
        do so, relative URLs would not work properly. When it sends
        the redirect, it needs to know the name of the server so
        that it can include it in the redirect. There are two ways
        for Apache to find this out; either it can guess, or you
        can tell it. If your DNS is configured correctly, it can
        normally guess without any problems. If it is not, however,
        then you need to tell it.</p>

        <p>Add a <a
        href="../mod/core.html#servername">ServerName</a> directive
        to the config file to tell it what the domain name of the
        server is.</p>
        <hr />
      </li>

      <li>
        <a id="no-info-directives"
        name="no-info-directives"><strong>Why doesn't mod_info list
        any directives?</strong></a> 

        <p>The <a
        href="../mod/mod_info.html"><samp>mod_info</samp></a>
        module allows you to use a Web browser to see how your
        server is configured. Among the information it displays is
        the list modules and their configuration directives. The
        "current" values for the directives are not necessarily
        those of the running server; they are extracted from the
        configuration files themselves at the time of the request.
        If the files have been changed since the server was last
        reloaded, the display will not match the values actively in
        use. If the files and the path to the files are not
        readable by the user as which the server is running (see
        the <a href="../mod/core.html#user"><samp>User</samp></a>
        directive), then <samp>mod_info</samp> cannot read them in
        order to list their values. An entry <em>will</em> be made
        in the error log in this event, however.</p>
        <hr />
      </li>

      <li>
        <a id="namevhost" name="namevhost"><strong>I upgraded to
        Apache 1.3 and now my virtual hosts don't
        work!</strong></a> 

        <p>In versions of Apache prior to 1.3b2, there was a lot of
        confusion regarding address-based virtual hosts and
        (HTTP/1.1) name-based virtual hosts, and the rules
        concerning how the server processed
        <samp>&lt;VirtualHost&gt;</samp> definitions were very
        complex and not well documented.</p>

        <p>Apache 1.3b2 introduced a new directive, <a
        href="../mod/core.html#namevirtualhost"><samp>NameVirtualHost</samp></a>,
        which simplifies the rules quite a bit. However, changing
        the rules like this means that your existing name-based
        <samp>&lt;VirtualHost&gt;</samp> containers probably won't
        work correctly immediately following the upgrade.</p>

        <p>To correct this problem, add the following line to the
        beginning of your server configuration file, before
        defining any virtual hosts:</p>

        <dl>
          <dd><code>NameVirtualHost <em>n.n.n.n</em></code></dd>
        </dl>

        <p>Replace the "<samp>n.n.n.n</samp>" with the IP address
        to which the name-based virtual host names resolve; if you
        have multiple name-based hosts on multiple addresses,
        repeat the directive for each address.</p>

        <p>Make sure that your name-based
        <samp>&lt;VirtualHost&gt;</samp> blocks contain
        <samp>ServerName</samp> and possibly
        <samp>ServerAlias</samp> directives so Apache can be sure
        to tell them apart correctly.</p>

        <p>Please see the <a href="../vhosts/">Apache Virtual Host
        documentation</a> for further details about
        configuration.</p>
        <hr />
      </li>

      <li>
        <a id="redhat-htm" name="redhat-htm"><strong>I'm using
        RedHat Linux and my .htm files are showing up as HTML
        source rather than being formatted!</strong></a> 

        <p>RedHat messed up and forgot to put a content type for
        <code>.htm</code> files into <code>/etc/mime.types</code>.
        Edit <code>/etc/mime.types</code>, find the line containing
        <code>html</code> and add <code>htm</code> to it. Then
        restart your httpd server:</p>

        <dl>
          <dd><code>kill -HUP `cat /var/run/httpd.pid`</code></dd>
        </dl>

        <p>Then <strong>clear your browsers' caches</strong>. (Many
        browsers won't re-examine the content type after they've
        reloaded a page.)</p>
        <hr />
      </li>

      <li>
        <a id="htaccess-work" name="htaccess-work"><strong>My
        <code>.htaccess</code> files are being
        ignored.</strong></a> 

        <p>This is almost always due to your <a
        href="../mod/core.html#allowoverride">AllowOverride</a>
        directive being set incorrectly for the directory in
        question. If it is set to <code>None</code> then .htaccess
        files will not even be looked for. If you do have one that
        is set, then be certain it covers the directory you are
        trying to use the .htaccess file in. This is normally
        accomplished by ensuring it is inside the proper <a
        href="../mod/core.html#directory">Directory</a>
        container.</p>
        <hr />
      </li>

      <li>
        <a id="forbidden" name="forbidden"><strong>Why do I get a
        "<samp>Forbidden</samp>" message whenever I try to access a
        particular directory?</strong></a> 

        <p>This message is generally caused because either</p>

        <ul>
          <li>The underlying file system permissions do not allow
          the User/Group under which Apache is running to access
          the necessary files; or</li>

          <li>The Apache configuration has some access restrictions
          in place which forbid access to the files.</li>
        </ul>

        <p>You can determine which case applies to your situation
        by checking the error log.</p>

        <p>In the case where file system permission are at fault,
        remember that not only must the directory and files in
        question be readable, but also all parent directories must
        be at least searchable by the web server in order for the
        content to be accessible.</p>
        <hr />
      </li>

      <li>
        <a id="malfiles" name="malfiles"><b>Why do I get a
        "<samp>Forbidden/You don't have permission to access / on
        this server</samp>" message whenever I try to access my
        server?</b></a> 

        <p>Search your <code>conf/httpd.conf</code> file for this
        exact string: <code>&lt;Files ~&gt;</code>. If you find it,
        that's your problem -- that particular &lt;Files&gt;
        container is malformed. Delete it or replace it with
        <code>&lt;Files ~ "^\.ht"&gt;</code> and restart your
        server and things should work as expected.</p>

        <p>This error appears to be caused by a problem with the
        version of linuxconf distributed with Redhat 6.x. It may
        reappear if you use linuxconf again.</p>

        <p>If you don't find this string, check out the <a
        href="#forbidden">previous question</a>.</p>
        <hr />
      </li>

      <li>
        <a id="ie-ignores-mime" name="ie-ignores-mime"><strong>Why
        do my files appear correctly in Internet Explorer, but show
        up as source or trigger a save window with
        Netscape; or, Why doesn't Internet Explorer render
        my text/plain document correctly?</strong></a> 

        <p>MS Internet Explorer (MSIE) and Netscape handle mime type
        detection in different ways, and therefore will display the
        document differently. In particular, IE sometimes relies on
        the file extension or the contents of the file to determine
        the mime type. This can happen when the server specifies a
        mime type of <code>application/octet-stream</code> or
        <code>text/plain</code>.  This behavior violates the the HTTP
        standard and makes it impossible to deliver plain text
        documents to MSIE clients in some cases.  More details are
        available on MSIE's mime type detection behavior in an <a
        href="http://msdn.microsoft.com/workshop/networking/moniker/overview/appendix_a.asp">
        MSDN article</a> and a <a
        href="http://ppewww.ph.gla.ac.uk/~flavell/www/content-type.html">note</a>
        by Alan J. Flavell.</p>

        <p>The best you can do as a server administrator is to
        accurately configure the mime type of your documents by editing
        the <code>mime.types</code> file or using an <a
        href="../mod/mod_mime.html#addtype"><code>AddType</code></a>
        directive in the Apache configuration files.  In some cases,
        you may be able to fool MSIE into rendering text/plain documents
        correctly by assuring they have a <code>.txt</code> filename
        extension, but this will not work if MSIE thinks the content
        looks like another file type.
</p> <hr />
      </li>
      <li>
	<a name="canonical-hostnames"><strong>My site is accessible
        under many different hostnames; how do I redirect clients
        so that they see only a single name?</strong></a>

        <p>Many sites map a variety of hostnames to the same content.
        For example, <code>www.example.com</code>,
        <code>example.com</code> and <code>www.example.net</code> may
        all refer to the same site.  It is best to make sure that,
        regardless of the name clients use to access the site, they
        will be redirected to a single, canonical hostname.  This
        makes the site easier to maintain and assures that there will
        be only one version of the site in proxy caches and search
        engines.</p>

        <p>There are two techniques to implement canonical hostnames:</p>

        <ol>
          <li>Use <a href="../mod/mod_rewrite.html">mod_rewrite</a>
          as described in the "Canonical Hostnames" section of the
          <a href="rewriteguide.html">URL Rewriting Guide</a>.</li>

          <li>Use <a href="../vhosts/name-based.html">name-based
          virtual hosting</a>:

<blockquote><code>
NameVirtualHost *<br />
<br />
&lt;VirtualHost *&gt;<br />
&nbsp;&nbsp;ServerName www.example.net<br />
&nbsp;&nbsp;ServerAlias example.com<br />
&nbsp;&nbsp;Redirect permanent / http://www.example.com/<br />
&lt;/VirtualHost&gt;<br />
<br />
&lt;VirtualHost *&gt;<br />
&nbsp;&nbsp;ServerName www.example.com<br />
&nbsp;&nbsp;DocumentRoot /usr/local/apache/htdocs<br />
&lt;/VirtualHost&gt;
</code></blockquote>
          </li></ol>
        <hr /></li>

         <li><a id="firewall" name="firewall"><strong>Why can I access my
         website from the server or from my local network, but I
         can't access it from elsewhere on the Internet?</strong></a>

         <p>There are many possible reasons for this, and almost all
         of them are related to the configuration of your network, not
         the configuration of the Apache HTTP Server.  One of the most
         common problems is that a firewall blocks access to the
         default HTTP port 80.  In particular, many consumer ISPs
         block access to this port.  You can see if this is the case
         by changing any <code>Port</code> and <code>Listen</code>
         directives in <code>httpd.conf</code> to use port 8000 and
         then request your site using
         <code>http://yourhost.example.com:8000/</code>.  (Of course,
         a very restrictive firewall may block this port as well.)</p>

        <hr /></li>

         <li><a id="indexes" name="indexes"><strong>How do I turn automatic
         directory listings on or off?</strong></a>

         <p>If a client requests a URL that designates a directory and
         the directory does not contain a filename that matches the <a
         href="../mod/mod_dir.html#directoryindex">DirectoryIndex</a>
         directive, then <a
         href="../mod/mod_autoindex.html">mod_autoindex</a> can be
         configured to present a listing of the directory contents.</p>

         <p>To turn on automatic directory indexing, find the 
         <a href="../mod/core.html#options">Options</a> directive that
         applies to the directory and add the <code>Indexes</code>
         keyword.  To turn off automatic directory indexing, remove
         the <code>Indexes</code> keyword from the appropriate 
         <code>Options</code> line.</p>

       <hr /></li>

         <li><a id="options" name="options"><strong>Why do my Options
         directives not have the desired effect?</strong></a>

         <p>Directives placed in the configuration files are applied
         in a very particular order, as described by <a
         href="../sections.html">How Directory, Location, and Files
         sections work</a>.  In addition, each <a
         href="../mod/core.html#options">Options</a> directive has the
         effect of resetting the options to <code>none</code> before
         adding the specified options (unless only "+" and "-" options
         are used).  The consequence is that <code>Options</code> set
         in the main server or virtual host context (outside any
         directory, location, or files section) will usually have no
         effect, because they are overridden by more specific
         <code>Options</code> directives.  For example, in the following</p>

<blockquote><code>
&lt;Directory /usr/local/apache/htdocs&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;Options Indexes<br />
&lt;/Directory&gt;<br />
Options Includes ExecCGI<br />
</code></blockquote>
    
         <p><code>Includes</code> and <code>ExecCGI</code> will be 
         <strong>off</strong> in the <code>/usr/local/apache/htdocs</code>
         directory.</p>

         <p>You can usually avoid problems by either finding the 
         <code>Options</code> directive that already applies to a 
         specific directory and changing it, or by putting your
         <code>Options</code> directive inside the most specific possible
         <code>&lt;Directory&gt;</code> section.</p>

       <hr /></li>

    </ol>
    
    
  </body>
</html>


    








      
      
    

    <h3>F. Dynamic Content (CGI and SSI)</h3>

    <ol>
      <li>
        <a id="CGIoutsideScriptAlias"
        name="CGIoutsideScriptAlias"><strong>How do I enable CGI
        execution in directories other than the
        ScriptAlias?</strong></a> 

        <p>Apache recognizes all files in a directory named as a <a
        href="../mod/mod_alias.html#scriptalias"><samp>ScriptAlias</samp></a>
        as being eligible for execution rather than processing as
        normal documents. This applies regardless of the file name,
        so scripts in a ScriptAlias directory don't need to be
        named "<samp>*.cgi</samp>" or "<samp>*.pl</samp>" or
        whatever. In other words, <em>all</em> files in a
        ScriptAlias directory are scripts, as far as Apache is
        concerned.</p>

        <p>To persuade Apache to execute scripts in other
        locations, such as in directories where normal documents
        may also live, you must tell it how to recognize them - and
        also that it's okay to execute them. For this, you need to
        use something like the <a
        href="../mod/mod_mime.html#addhandler"><samp>AddHandler</samp></a>
        directive.</p>

        <ol>
          <li>
            In an appropriate section of your server configuration
            files, add a line such as 

            <dl>
              <dd><code>AddHandler cgi-script .cgi</code></dd>
            </dl>

            <p>The server will then recognize that all files in
            that location (and its logical descendants) that end in
            "<samp>.cgi</samp>" are script files, not
            documents.</p>
          </li>

          <li>Make sure that the directory location is covered by
          an <a
          href="../mod/core.html#options"><samp>Options</samp></a>
          declaration that includes the <samp>ExecCGI</samp>
          option.</li>
        </ol>

        <p>In some situations, you might not want to actually allow
        all files named "<samp>*.cgi</samp>" to be executable.
        Perhaps all you want is to enable a particular file in a
        normal directory to be executable. This can be
        alternatively accomplished <em>via</em> <a
        href="../mod/mod_rewrite.html"><samp>mod_rewrite</samp></a>
        and the following steps:</p>

        <ol>
          <li>
            Locally add to the corresponding <samp>.htaccess</samp>
            file a ruleset similar to this one: 

            <dl>
              <dd><code>RewriteEngine on<br />
               RewriteBase /~foo/bar/<br />
               RewriteRule ^quux\.cgi$ -
              [T=application/x-httpd-cgi]</code></dd>
            </dl>
          </li>

          <li>Make sure that the directory location is covered by
          an <a
          href="../mod/core.html#options"><samp>Options</samp></a>
          declaration that includes the <samp>ExecCGI</samp> and
          <samp>FollowSymLinks</samp> option.</li>
        </ol>
        <hr />
      </li>

      <li>
        <a id="premature-script-headers"
        name="premature-script-headers"><strong>What does it mean
        when my CGIs fail with "<samp>Premature end of script
        headers</samp>"?</strong></a> 

        <p>It means just what it says: the server was expecting a
        complete set of HTTP headers (one or more followed by a
        blank line), and didn't get them.</p>

        <p>The most common cause of this problem is the script
        dying before sending the complete set of headers, or
        possibly any at all, to the server. To see if this is the
        case, try running the script standalone from an interactive
        session, rather than as a script under the server. If you
        get error messages, this is almost certainly the cause of
        the "premature end of script headers" message. Even if the
        CGI runs fine from the command line, remember that the
        environment and permissions may be different when running
        under the web server. The CGI can only access resources
        allowed for the <a
        href="../mod/core.html#user"><code>User</code></a> and <a
        href="../mod/core.html#group"><code>Group</code></a>
        specified in your Apache configuration. In addition, the
        environment will not be the same as the one provided on the
        command line, but it can be adjusted using the directives
        provided by <a href="../mod/mod_env.html">mod_env</a>.</p>

        <p>The second most common cause of this (aside from people
        not outputting the required headers at all) is a result of
        an interaction with Perl's output buffering. To make Perl
        flush its buffers after each output statement, insert the
        following statements around the <code>print</code> or
        <code>write</code> statements that send your HTTP
        headers:</p>

        <dl>
          <dd><code>{<br />
           &nbsp;local ($oldbar) = $|;<br />
           &nbsp;$cfh = select (STDOUT);<br />
           &nbsp;$| = 1;<br />
           &nbsp;#<br />
           &nbsp;# print your HTTP headers here<br />
           &nbsp;#<br />
           &nbsp;$| = $oldbar;<br />
           &nbsp;select ($cfh);<br />
           }</code></dd>
        </dl>

        <p>This is generally only necessary when you are calling
        external programs from your script that send output to
        stdout, or if there will be a long delay between the time
        the headers are sent and the actual content starts being
        emitted. To maximize performance, you should turn
        buffer-flushing back <em>off</em> (with <code>$| = 0</code>
        or the equivalent) after the statements that send the
        headers, as displayed above.</p>

        <p>If your script isn't written in Perl, do the equivalent
        thing for whatever language you <em>are</em> using
        (<em>e.g.</em>, for C, call <code>fflush()</code> after
        writing the headers).</p>

        <p>Another cause for the "premature end of script headers"
        message are the RLimitCPU and RLimitMEM directives. You may
        get the message if the CGI script was killed due to a
        resource limit.</p>

        <p>In addition, a configuration problem in <a
        href="../suexec.html">suEXEC</a>, mod_perl, or another
        third party module can often interfere with the execution
        of your CGI and cause the "premature end of script headers"
        message.</p>
        <hr />
      </li>

      <li>
        <a id="POSTnotallowed" name="POSTnotallowed"><strong>Why do
        I keep getting "Method Not Allowed" for form POST
        requests?</strong></a> 

        <p>This is almost always due to Apache not being configured
        to treat the file you are trying to POST to as a CGI
        script. You can not POST to a normal HTML file; the
        operation has no meaning. See the FAQ entry on <a
        href="#CGIoutsideScriptAlias">CGIs outside ScriptAliased
        directories</a> for details on how to configure Apache to
        treat the file in question as a CGI.</p>
        <hr />
      </li>

      <li>
        <a id="nph-scripts" name="nph-scripts"><strong>How can I
        get my script's output without Apache buffering it? Why
        doesn't my server push work?</strong></a> 

        <p>As of Apache 1.3, CGI scripts are essentially not
        buffered. Every time your script does a "flush" to output
        data, that data gets relayed on to the client. Some
        scripting languages, for example Perl, have their own
        buffering for output - this can be disabled by setting the
        <code>$|</code> special variable to 1. Of course this does
        increase the overall number of packets being transmitted,
        which can result in a sense of slowness for the end
        user.</p>

        <p>Prior to 1.3, you needed to use "nph-" scripts to
        accomplish non-buffering. Today, the only difference
        between nph scripts and normal scripts is that nph scripts
        require the full HTTP headers to be sent.</p>
        <hr />
      </li>

      <li>
        <a id="cgi-spec" name="cgi-spec"><strong>Where can I find
        the "CGI specification"?</strong></a> 

        <p>The Common Gateway Interface (CGI) specification can be
        found at the original NCSA site &lt; <a
        href="http://hoohoo.ncsa.uiuc.edu/cgi/interface.html"><samp>
        http://hoohoo.ncsa.uiuc.edu/cgi/interface.html</samp></a>&gt;.
        This version hasn't been updated since 1995, and there have
        been some efforts to update it.</p>

        <p>A new draft is being worked on with the intent of making
        it an informational RFC; you can find out more about this
        project at &lt;<a
        href="http://web.golux.com/coar/cgi/"><samp>http://web.golux.com/coar/cgi/</samp></a>&gt;.</p>
        <hr />
      </li>

      <li>
        <a id="fastcgi" name="fastcgi"><strong>Why isn't FastCGI
        included with Apache any more?</strong></a> 

        <p>The simple answer is that it was becoming too difficult
        to keep the version being included with Apache synchronized
        with the master copy at the <a
        href="http://www.fastcgi.com/">FastCGI web site</a>. When a
        new version of Apache was released, the version of the
        FastCGI module included with it would soon be out of
        date.</p>

        <p>You can still obtain the FastCGI module for Apache from
        the master FastCGI web site.</p>
        <hr />
      </li>

      <li>
        <a id="ssi-part-i" name="ssi-part-i"><strong>How do I
        enable SSI (parsed HTML)?</strong></a> 

        <p>SSI (an acronym for Server-Side Include) directives
        allow static HTML documents to be enhanced at run-time
        (<em>e.g.</em>, when delivered to a client by Apache). The
        format of SSI directives is covered in the <a
        href="../mod/mod_include.html">mod_include manual</a>;
        suffice it to say that Apache supports not only SSI but
        xSSI (eXtended SSI) directives.</p>

        <p>Processing a document at run-time is called
        <em>parsing</em> it; hence the term "parsed HTML" sometimes
        used for documents that contain SSI instructions. Parsing
        tends to be resource-consumptive compared to serving static
        files, and is not enabled by default. It can also interfere
        with the cachability of your documents, which can put a
        further load on your server. (See the <a
        href="#ssi-part-ii">next question</a> for more information
        about this.)</p>

        <p>To enable SSI processing, you need to</p>

        <ul>
          <li>Build your server with the <a
          href="../mod/mod_include.html"><samp>mod_include</samp></a>
          module. This is normally compiled in by default.</li>

          <li>Make sure your server configuration files have an <a
          href="../mod/core.html#options"><samp>Options</samp></a>
          directive which permits <samp>Includes</samp>.</li>

          <li>
            Make sure that the directory where you want the SSI
            documents to live is covered by the "server-parsed"
            content handler, either explicitly or in some ancestral
            location. That can be done with the following <a
            href="../mod/mod_mime.html#addhandler"><samp>AddHandler</samp></a>
            directive: 

            <dl>
              <dd><code>AddHandler server-parsed .shtml</code></dd>
            </dl>

            <p>This indicates that all files ending in ".shtml" in
            that location (or its descendants) should be parsed.
            Note that using ".html" will cause all normal HTML
            files to be parsed, which may put an inordinate load on
            your server.</p>
          </li>
        </ul>

        <p>For additional information, see the <cite>Apache
        Week</cite> article on <a
        href="http://www.apacheweek.com/features/ssi"
        rel="Help"><cite>Using Server Side Includes</cite></a>.</p>
        <hr />
      </li>

      <li>
        <a id="ssi-part-ii" name="ssi-part-ii"><strong>Why don't my
        parsed files get cached?</strong></a> 

        <p>Since the server is performing run-time processing of
        your SSI directives, which may change the content shipped
        to the client, it can't know at the time it starts parsing
        what the final size of the result will be, or whether the
        parsed result will always be the same. This means that it
        can't generate <samp>Content-Length</samp> or
        <samp>Last-Modified</samp> headers. Caches commonly work by
        comparing the <samp>Last-Modified</samp> of what's in the
        cache with that being delivered by the server. Since the
        server isn't sending that header for a parsed document,
        whatever's doing the caching can't tell whether the
        document has changed or not - and so fetches it again to be
        on the safe side.</p>

        <p>You can work around this in some cases by causing an
        <samp>Expires</samp> header to be generated. (See the <a
        href="../mod/mod_expires.html"
        rel="Help"><samp>mod_expires</samp></a> documentation for
        more details.) Another possibility is to use the <a
        href="../mod/mod_include.html#xbithack"
        rel="Help"><samp>XBitHack Full</samp></a> mechanism, which
        tells Apache to send (under certain circumstances detailed
        in the XBitHack directive description) a
        <samp>Last-Modified</samp> header based upon the last
        modification time of the file being parsed. Note that this
        may actually be lying to the client if the parsed file
        doesn't change but the SSI-inserted content does; if the
        included content changes often, this can result in stale
        copies being cached.</p>
        <hr />
      </li>

      <li>
        <a id="ssi-part-iii" name="ssi-part-iii"><strong>How can I
        have my script output parsed?</strong></a> 

        <p>So you want to include SSI directives in the output from
        your CGI script, but can't figure out how to do it? The
        short answer is "you can't." This is potentially a security
        liability and, more importantly, it can not be cleanly
        implemented under the current server API. The best
        workaround is for your script itself to do what the SSIs
        would be doing. After all, it's generating the rest of the
        content.</p>

        <p>This is a feature The Apache Group hopes to add in the
        next major release after 1.3.</p>
        <hr />
      </li>

      <li>
        <a id="ssi-part-iv" name="ssi-part-iv"><strong>SSIs don't
        work for VirtualHosts and/or user home
        directories.</strong></a> 

        <p>This is almost always due to having some setting in your
        config file that sets "Options Includes" or some other
        setting for your DocumentRoot but not for other
        directories. If you set it inside a Directory section, then
        that setting will only apply to that directory.</p>
        <hr />
      </li>

      <li>
        <a id="errordocssi" name="errordocssi"><strong>How can I
        use <code>ErrorDocument</code> and SSI to simplify
        customized error messages?</strong></a> 

        <p>Have a look at <a href="custom_errordocs.html">this
        document</a>. It shows in example form how you can a
        combination of XSSI and negotiation to tailor a set of
        <code>ErrorDocument</code>s to your personal taste, and
        returning different internationalized error responses based
        on the client's native language.</p>
        <hr />
      </li>

      <li>
        <a id="remote-user-var" name="remote-user-var"><strong>Why
        is the environment variable <samp>REMOTE_USER</samp> not
        set?</strong></a> 

        <p>This variable is set and thus available in SSI or CGI
        scripts <strong>if and only if</strong> the requested
        document was protected by access authentication. For an
        explanation on how to implement these restrictions, see <a
        href="http://www.apacheweek.com/"><cite>Apache
        Week</cite></a>'s articles on <a
        href="http://www.apacheweek.com/features/userauth"><cite>Using
        User Authentication</cite></a> or <a
        href="http://www.apacheweek.com/features/dbmauth"><cite>DBM
        User Authentication</cite></a>.</p>

        <p>Hint: When using a CGI script to receive the data of a
        HTML <samp>FORM</samp> notice that protecting the document
        containing the <samp>FORM</samp> is not sufficient to
        provide <samp>REMOTE_USER</samp> to the CGI script. You
        have to protect the CGI script, too. Or alternatively only
        the CGI script (then authentication happens only after
        filling out the form).</p>
        <hr />
      </li>

      <li>
        <a id="user-cgi" name="user-cgi"><strong>How do I allow
        each of my user directories to have a cgi-bin
        directory?</strong></a> 

        <p>Remember that CGI execution does not need to be
        restricted only to cgi-bin directories. You can <a
        href="#CGIoutsideScriptAlias">allow CGI script execution in
        arbitrary parts of your filesystem</a>.</p>

        <p>There are many ways to give each user directory a
        cgi-bin directory such that anything requested as
        <samp>http://example.com/~user/cgi-bin/program</samp> will
        be executed as a CGI script. Two alternatives are:</p>

        <ol>
          <li>
            Place the cgi-bin directory next to the public_html
            directory: 

            <dl>
              <dd><code>ScriptAliasMatch ^/~([^/]*)/cgi-bin/(.*)
              /home/$1/cgi-bin/$2</code></dd>
            </dl>
          </li>

          <li>
            Place the cgi-bin directory underneath the public_html
            directory: 

            <dl>
              <dd><code>&lt;Directory
              /home/*/public_html/cgi-bin&gt;<br />
               &nbsp;&nbsp;&nbsp;&nbsp;Options ExecCGI<br />
               &nbsp;&nbsp;&nbsp;&nbsp;SetHandler cgi-script<br />
               &lt;/Directory&gt;</code></dd>
            </dl>
          </li>
        </ol>
        <p>If you are using suexec, the first technique will not work
        because CGI scripts must be stored under the <code>public_html</code>
        directory.</p>

        <hr />
      </li>
    </ol>
    
    
  </body>
</html>


    








      
      
    

    <h3>G. Authentication and Access Restrictions</h3>

    <ol>
      <li>
        <a id="dnsauth" name="dnsauth"><strong>Why isn't
        restricting access by host or domain name working
        correctly?</strong></a> 

        <p>Two of the most common causes of this are:</p>

        <ol>
          <li><strong>An error, inconsistency, or unexpected
          mapping in the DNS registration</strong><br />
           This happens frequently: your configuration restricts
          access to <samp>Host.FooBar.Com</samp>, but you can't get
          in from that host. The usual reason for this is that
          <samp>Host.FooBar.Com</samp> is actually an alias for
          another name, and when Apache performs the
          address-to-name lookup it's getting the <em>real</em>
          name, not <samp>Host.FooBar.Com</samp>. You can verify
          this by checking the reverse lookup yourself. The easiest
          way to work around it is to specify the correct host name
          in your configuration.</li>

          <li>
            <strong>Inadequate checking and verification in your
            configuration of Apache</strong><br />
             If you intend to perform access checking and
            restriction based upon the client's host or domain
            name, you really need to configure Apache to
            double-check the origin information it's supplied. You
            do this by adding the <samp>-DMAXIMUM_DNS</samp> clause
            to the <samp>EXTRA_CFLAGS</samp> definition in your
            <samp>Configuration</samp> file. For example: 

            <dl>
              <dd><code>EXTRA_CFLAGS=-DMAXIMUM_DNS</code></dd>
            </dl>

            <p>This will cause Apache to be very paranoid about
            making sure a particular host address is
            <em>really</em> assigned to the name it claims to be.
            Note that this <em>can</em> incur a significant
            performance penalty, however, because of all the name
            resolution requests being sent to a nameserver.</p>
          </li>
        </ol>
        <hr />
      </li>

      <li>
        <a id="user-authentication"
        name="user-authentication"><strong>How do I set up Apache
        to require a username and password to access certain
        documents?</strong></a> 

        <p>There are several ways to do this; some of the more
        popular ones are to use the <a
        href="../mod/mod_auth.html">mod_auth</a>, <a
        href="../mod/mod_auth_db.html">mod_auth_db</a>, or <a
        href="../mod/mod_auth_dbm.html">mod_auth_dbm</a>
        modules.</p>

        <p>For an explanation on how to implement these
        restrictions, see <a
        href="http://www.apacheweek.com/"><cite>Apache
        Week</cite></a>'s articles on <a
        href="http://www.apacheweek.com/features/userauth"><cite>Using
        User Authentication</cite></a> or <a
        href="http://www.apacheweek.com/features/dbmauth"><cite>DBM
        User Authentication</cite></a>.</p>
        <hr />
      </li>

      <li>
        <a id="remote-auth-only"
        name="remote-auth-only"><strong>How do I set up Apache to
        allow access to certain documents only if a site is either
        a local site <em>or</em> the user supplies a password and
        username?</strong></a> 

        <p>Use the <a href="../mod/core.html#satisfy">Satisfy</a>
        directive, in particular the <code>Satisfy Any</code>
        directive, to require that only one of the access
        restrictions be met. For example, adding the following
        configuration to a <samp>.htaccess</samp> or server
        configuration file would restrict access to people who
        either are accessing the site from a host under domain.com
        or who can supply a valid username and password:</p>

        <dl>
          <dd><code>Deny from all<br />
           Allow from .domain.com<br />
           AuthType Basic<br />
           AuthUserFile /usr/local/apache/conf/htpasswd.users<br />
           AuthName "special directory"<br />
           Require valid-user<br />
           Satisfy any</code></dd>
        </dl>

        <p>See the <a href="#user-authentication">user
        authentication</a> question and the <a
        href="../mod/mod_access.html">mod_access</a> module for
        details on how the above directives work.</p>
        <hr />
      </li>

      <li>
        <a id="authauthoritative"
        name="authauthoritative"><strong>Why does my authentication
        give me a server error?</strong></a> 

        <p>Under normal circumstances, the Apache access control
        modules will pass unrecognized user IDs on to the next
        access control module in line. Only if the user ID is
        recognized and the password is validated (or not) will it
        give the usual success or "authentication failed"
        messages.</p>

        <p>However, if the last access module in line 'declines'
        the validation request (because it has never heard of the
        user ID or because it is not configured), the
        <samp>http_request</samp> handler will give one of the
        following, confusing, errors:</p>

        <ul>
          <li><samp>check access</samp></li>

          <li><samp>check user. No user file?</samp></li>

          <li><samp>check access. No groups file?</samp></li>
        </ul>

        <p>This does <em>not</em> mean that you have to add an
        '<samp>AuthUserFile&nbsp;/dev/null</samp>' line as some
        magazines suggest!</p>

        <p>The solution is to ensure that at least the last module
        is authoritative and <strong>CONFIGURED</strong>. By
        default, <samp>mod_auth</samp> is authoritative and will
        give an OK/Denied, but only if it is configured with the
        proper <samp>AuthUserFile</samp>. Likewise, if a valid
        group is required. (Remember that the modules are processed
        in the reverse order from that in which they appear in your
        compile-time <samp>Configuration</samp> file.)</p>

        <p>A typical situation for this error is when you are using
        the <samp>mod_auth_dbm</samp>, <samp>mod_auth_msql</samp>,
        <samp>mod_auth_mysql</samp>, <samp>mod_auth_anon</samp> or
        <samp>mod_auth_cookie</samp> modules on their own. These
        are by default <strong>not</strong> authoritative, and this
        will pass the buck on to the (non-existent) next
        authentication module when the user ID is not in their
        respective database. Just add the appropriate
        '<samp><em>XXX</em>Authoritative yes</samp>' line to the
        configuration.</p>

        <p>In general it is a good idea (though not terribly
        efficient) to have the file-based <samp>mod_auth</samp> a
        module of last resort. This allows you to access the web
        server with a few special passwords even if the databases
        are down or corrupted. This does cost a file
        open/seek/close for each request in a protected area.</p>
        <hr />
      </li>

      <li>
        <a id="auth-on-same-machine"
        name="auth-on-same-machine"><strong>Do I have to keep the
        (mSQL) authentication information on the same
        machine?</strong></a> 

        <p>Some organizations feel very strongly about keeping the
        authentication information on a different machine than the
        webserver. With the <samp>mod_auth_msql</samp>,
        <samp>mod_auth_mysql</samp>, and other SQL modules
        connecting to (R)DBMses this is quite possible. Just
        configure an explicit host to contact.</p>

        <p>Be aware that with mSQL and Oracle, opening and closing
        these database connections is very expensive and time
        consuming. You might want to look at the code in the
        <samp>auth_*</samp> modules and play with the compile time
        flags to alleviate this somewhat, if your RDBMS licences
        allow for it.</p>
        <hr />
      </li>

      <li>
        <a id="msql-slow" name="msql-slow"><strong>Why is my mSQL
        authentication terribly slow?</strong></a> 

        <p>You have probably configured the Host by specifying a
        FQHN, and thus the <samp>libmsql</samp> will use a full
        blown TCP/IP socket to talk to the database, rather than a
        fast internal device. The <samp>libmsql</samp>, the mSQL
        FAQ, and the <samp>mod_auth_msql</samp> documentation warn
        you about this. If you have to use different hosts, check
        out the <samp>mod_auth_msql</samp> code for some compile
        time flags which might - or might not - suit you.</p>
        <hr />
      </li>

      <li>
        <a id="passwdauth" name="passwdauth"><strong>Can I use my
        <samp>/etc/passwd</samp> file for Web page
        authentication?</strong></a> 

        <p>Yes, you can - but it's a <strong>very bad
        idea</strong>. Here are some of the reasons:</p>

        <ul>
          <li>The Web technology provides no governors on how often
          or how rapidly password (authentication failure) retries
          can be made. That means that someone can hammer away at
          your system's <samp>root</samp> password using the Web,
          using a dictionary or similar mass attack, just as fast
          as the wire and your server can handle the requests. Most
          operating systems these days include attack detection
          (such as <em>n</em> failed passwords for the same account
          within <em>m</em> seconds) and evasion (breaking the
          connection, disabling the account under attack, disabling
          <em>all</em> logins from that source, <em>et
          cetera</em>), but the Web does not.</li>

          <li>An account under attack isn't notified (unless the
          server is heavily modified); there's no "You have 19483
          login failures" message when the legitimate owner logs
          in.</li>

          <li>Without an exhaustive and error-prone examination of
          the server logs, you can't tell whether an account has
          been compromised. Detecting that an attack has occurred,
          or is in progress, is fairly obvious, though -
          <em>if</em> you look at the logs.</li>

          <li>Web authentication passwords (at least for Basic
          authentication) generally fly across the wire, and
          through intermediate proxy systems, in what amounts to
          plain text. "O'er the net we go/Caching all the way;/O
          what fun it is to surf/Giving my password away!"</li>

          <li>Since HTTP is stateless, information about the
          authentication is transmitted <em>each and every
          time</em> a request is made to the server. Essentially,
          the client caches it after the first successful access,
          and transmits it without asking for all subsequent
          requests to the same server.</li>

          <li>It's relatively trivial for someone on your system to
          put up a page that will steal the cached password from a
          client's cache without them knowing. Can you say
          "password grabber"?</li>
        </ul>

        <p>If you still want to do this in light of the above
        disadvantages, the method is left as an exercise for the
        reader. It'll void your Apache warranty, though, and you'll
        lose all accumulated UNIX guru points.</p>
        <hr />
      </li>

      <li>
        <a id="prompted-twice" name="prompted-twice"><strong>Why
        does Apache ask for my password twice before serving a
        file?</strong></a> 

        <p>If the hostname under which you are accessing the server
        is different than the hostname specified in the <a
        href="../mod/core.html#servername"><code>ServerName</code></a>
        directive, then depending on the setting of the <a
        href="../mod/core.html#usecanonicalname"><code>UseCanonicalName</code></a>
        directive, Apache will redirect you to a new hostname when
        constructing self-referential URLs. This happens, for
        example, in the case where you request a directory without
        including the trailing slash.</p>

        <p>When this happens, Apache will ask for authentication
        once under the original hostname, perform the redirect, and
        then ask again under the new hostname. For security
        reasons, the browser must prompt again for the password
        when the host name changes.</p>

        <p>To eliminate this problem you should</p>

        <ol>
          <li>Always use the trailing slash when requesting
          directories;</li>

          <li>Change the <code>ServerName</code> to match the name
          you are using in the URL; and/or</li>

          <li>Set <code>UseCanonicalName off</code>.</li>
        </ol>
        <hr />
      </li>

      <li>
        <a id="image-theft" name="image-theft"><strong>How can I prevent
        people from "stealing" the images from my web site?</strong></a> 

        <p>The goal here is to prevent people from inlining your images
        directly from their web site, but accessing them only if they
        appear inline in your pages.<p>

        <p>This can be accomplished with a combination of SetEnvIf and
        the Deny and Allow directives. However, it is important to 
        understand that any access restriction based on the REFERER
        header is intrinsically problematic due to the fact that 
        browsers can send an incorrect REFERER, either because they 
        want to circumvent your restriction or simply because they don't
        send the right thing (or anything at all).</p>

        <p>The following configuration will produce the desired effect
        if the browser passes correct REFERER headers.</p>

<pre>
SetEnvIf REFERER "www\.mydomain\.com" linked_from_here
SetEnvIf REFERER "^$" linked_from_here

&lt;Directory /www/images&gt;
    Order deny,allow
    Deny from all
    Allow from env=linked_from_here
&lt;/Directory&gt;
</pre>

<p>Further examples can be found in the <a 
href="../env.html#examples">Environment Variables</a> documentation.</p>

        <hr />
      </li>


    </ol>
    
    
  </body>
</html>


    








      
      
    

    <h3>H. URL Rewriting</h3>

    <ol>
      <li>
        <a id="rewrite-more-config"
        name="rewrite-more-config"><strong>Where can I find
        mod_rewrite rulesets which already solve particular
        URL-related problems?</strong></a> 

        <p>There is a collection of <a
        href="http://www.engelschall.com/pw/apache/rewriteguide/">Practical
        Solutions for URL-Manipulation</a> where you can find all
        typical solutions the author of <a
        href="../mod/mod_rewrite.html"><samp>mod_rewrite</samp></a>
        currently knows of. If you have more interesting rulesets
        which solve particular problems not currently covered in
        this document, send it to <a
        href="mailto:rse@@apache.org">Ralf S. Engelschall</a> for
        inclusion. The other webmasters will thank you for avoiding
        the reinvention of the wheel.</p>
        <hr />
      </li>

      <li>
        <a id="rewrite-article"
        name="rewrite-article"><strong>Where can I find any
        published information about URL-manipulations and
        mod_rewrite?</strong></a> 

        <p>There is an article from <a
        href="mailto:rse@@apache.org">Ralf S. Engelschall</a> about
        URL-manipulations based on <a
        href="../mod/mod_rewrite.html"><samp>mod_rewrite</samp></a>
        in the "iX Multiuser Multitasking Magazin" issue #12/96.
        The german (original) version can be read online at &lt;<a
        href="http://www.heise.de/ix/artikel/9612149/">http://www.heise.de/ix/artikel/9612149/</a>&gt;,
        the English (translated) version can be found at &lt;<a
        href="http://www.heise.de/ix/artikel/E/9612149/">http://www.heise.de/ix/artikel/E/9612149/</a>&gt;.</p>
        <hr />
      </li>

      <li>
        <a id="rewrite-complexity"
        name="rewrite-complexity"><strong>Why is mod_rewrite so
        difficult to learn and seems so complicated?</strong></a> 

        <p>Hmmm... there are a lot of reasons. First, mod_rewrite
        itself is a powerful module which can help you in really
        <strong>all</strong> aspects of URL rewriting, so it can be
        no trivial module per definition. To accomplish its hard
        job it uses software leverage and makes use of a powerful
        regular expression library by Henry Spencer which is an
        integral part of Apache since its version 1.2. And regular
        expressions itself can be difficult to newbies, while
        providing the most flexible power to the advanced
        hacker.</p>

        <p>On the other hand mod_rewrite has to work inside the
        Apache API environment and needs to do some tricks to fit
        there. For instance the Apache API as of 1.x really was not
        designed for URL rewriting at the <tt>.htaccess</tt> level
        of processing. Or the problem of multiple rewrites in
        sequence, which is also not handled by the API per design.
        To provide this features mod_rewrite has to do some special
        (but API compliant!) handling which leads to difficult
        processing inside the Apache kernel. While the user usually
        doesn't see anything of this processing, it can be
        difficult to find problems when some of your RewriteRules
        seem not to work.</p>
        <hr />
      </li>

      <li>
        <a id="rewrite-dontwork"
        name="rewrite-dontwork"><strong>What can I do if my
        RewriteRules don't work as expected?</strong></a> 

        <p>Use "<samp>RewriteLog somefile</samp>" and
        "<samp>RewriteLogLevel 9</samp>" and have a precise look at
        the steps the rewriting engine performs. This is really the
        only one and best way to debug your rewriting
        configuration.</p>
        <hr />
      </li>

      <li>
        <a id="rewrite-prefixdocroot"
        name="rewrite-prefixdocroot"><strong>Why don't some of my
        URLs get prefixed with DocumentRoot when using
        mod_rewrite?</strong></a> 

        <p>If the rule starts with <samp>/somedir/...</samp> make
        sure that really no <samp>/somedir</samp> exists on the
        filesystem if you don't want to lead the URL to match this
        directory, <em>i.e.</em>, there must be no root directory
        named <samp>somedir</samp> on the filesystem. Because if
        there is such a directory, the URL will not get prefixed
        with DocumentRoot. This behavior looks ugly, but is really
        important for some other aspects of URL rewriting.</p>
        <hr />
      </li>

      <li>
        <a id="rewrite-nocase" name="rewrite-nocase"><strong>How
        can I make all my URLs case-insensitive with
        mod_rewrite?</strong></a> 

        <p>You can't! The reasons are: first, that, case
        translations for arbitrary length URLs cannot be done
        <em>via</em> regex patterns and corresponding
        substitutions. One needs a per-character pattern like the
        sed/Perl <samp>tr|..|..|</samp> feature. Second, just
        making URLs always upper or lower case does not solve the
        whole problem of case-INSENSITIVE URLs, because URLs
        actually have to be rewritten to the correct case-variant
        for the file residing on the filesystem in order to allow
        Apache to access the file. And the Unix filesystem is
        always case-SENSITIVE.</p>

        <p>But there is a module named <code><a
        href="../mod/mod_speling.html">mod_speling.c</a></code> in
        the Apache distribution. Try this module to help correct
        people who use mis-cased URLs.</p>
        <hr />
      </li>

      <li>
        <a id="rewrite-virthost"
        name="rewrite-virthost"><strong>Why are RewriteRules in my
        VirtualHost parts ignored?</strong></a> 

        <p>Because you have to enable the engine for every virtual
        host explicitly due to security concerns. Just add a
        "RewriteEngine on" to your virtual host configuration
        parts.</p>
        <hr />
      </li>

      <li>
        <a id="rewrite-envwhitespace"
        name="rewrite-envwhitespace"><strong>How can I use strings
        with whitespaces in RewriteRule's ENV flag?</strong></a> 

        <p>There is only one ugly solution: You have to surround
        the complete flag argument by quotation marks
        (<samp>"[E=...]"</samp>). Notice: The argument to quote
        here is not the argument to the E-flag, it is the argument
        of the Apache config file parser, <em>i.e.</em>, the third
        argument of the RewriteRule here. So you have to write
        <samp>"[E=any text with whitespaces]"</samp>.</p>
        <hr />
      </li>
    </ol>
    
    
  </body>
</html>


    








      
      
    

    <h3>I. Features</h3>

    <ol>
      <li>
        <a id="proxy" name="proxy"><strong>Does or will Apache act
        as a Proxy server?</strong></a> 

        <p>Apache version 1.1 and above comes with a <a
        href="../mod/mod_proxy.html">proxy module</a>. If compiled
        in, this will make Apache act as a caching-proxy
        server.</p>
        <hr />
      </li>

      <li>
        <a id="multiviews" name="multiviews"><strong>What are
        "multiviews"?</strong></a> 

        <p>"Multiviews" is the general name given to the Apache
        server's ability to provide language-specific document
        variants in response to a request. This is documented quite
        thoroughly in the <a href="../content-negotiation.html"
        rel="Help">content negotiation</a> description page. In
        addition, <cite>Apache Week</cite> carried an article on
        this subject entitled "<a
        href="http://www.apacheweek.com/features/negotiation"
        rel="Help"><cite>Content Negotiation
        Explained</cite></a>".</p>
        <hr />
      </li>

      <li>
        <a id="putsupport" name="putsupport"><strong>Why can't I
        publish to my Apache server using PUT on Netscape Gold and
        other programs?</strong></a> 

        <p>Because you need to install and configure a script to
        handle the uploaded files. This script is often called a
        "PUT" handler. There are several available, but they may
        have security problems. Using FTP uploads may be easier and
        more secure, at least for now. For more information, see
        the <cite>Apache Week</cite> article <a
        href="http://www.apacheweek.com/features/put"><cite>Publishing
        Pages with PUT</cite></a>.</p>
        <hr />
      </li>

      <li>
        <a id="SSL-i" name="SSL-i"><strong>Why doesn't Apache
        include SSL?</strong></a> 

        <p>SSL (Secure Socket Layer) data transport requires
        encryption, and many governments have restrictions upon the
        import, export, and use of encryption technology. If Apache
        included SSL in the base package, its distribution would
        involve all sorts of legal and bureaucratic issues, and it
        would no longer be freely available. Also, some of the
        technology required to talk to current clients using SSL is
        patented by <a href="http://www.rsa.com/">RSA Data
        Security</a>, who restricts its use without a license.</p>

        <p>Some SSL implementations of Apache are available,
        however; see the "<a
        href="http://httpd.apache.org/related_projects.html">related
        projects</a>" page at the main Apache web site.</p>

        <p>You can find out more about this topic in the
        <cite>Apache Week</cite> article about <a
        href="http://www.apacheweek.com/features/ssl"
        rel="Help"><cite>Apache and Secure
        Transactions</cite></a>.</p>
        <hr />
      </li>

      <li>
        <a id="footer" name="footer"><strong>How can I attach a
        footer to my documents without using SSI?</strong></a> 

        <p>You can make arbitrary changes to static documents by
        configuring an <a
        href="../mod/mod_actions.html#action">Action</a> which
        launches a CGI script. The CGI is then responsible for
        setting a content-type and delivering the requested
        document (the location of which is passed in the
        <samp>PATH_TRANSLATED</samp> environment variable), along
        with whatever footer is needed.</p>

        <p>Busy sites may not want to run a CGI script on every
        request, and should consider using an Apache module to add
        the footer. There are several third party modules available
        through the <a href="http://modules.apache.org/">Apache
        Module Registry</a> which will add footers to documents.
        These include mod_trailer, PHP
        (<samp>php3_auto_append_file</samp>), mod_layout, and
        mod_perl (<samp>Apache::Sandwich</samp>).</p>
        <hr />
      </li>

      <li>
        <a id="search" name="search"><strong>Does Apache include a
        search engine?</strong></a> 

        <p>Apache does not include a search engine, but there are
        many good commercial and free search engines which can be
        used easily with Apache. Some of them are listed on the <a
        href="http://www.searchtools.com/tools/tools.html">Web Site
        Search Tools</a> page. Open source search engines that are
        often used with Apache include <a
        href="http://www.htdig.org/">ht://Dig</a> and <a
        href="http://sunsite.berkeley.edu/SWISH-E/">SWISH-E</a>.</p>
        <hr />
      </li>

      <li>
        <a id="rotate" name="rotate"><strong>How can I rotate my
        log files?</strong></a> 

        <p>The simple answer: by piping the transfer log into an
        appropriate log file rotation utility.</p>

        <p>The longer answer: In the src/support/ directory, you
        will find a utility called <a
        href="../programs/rotatelogs.html">rotatelogs</a> which can
        be used like this:</p>
<pre>
   TransferLog "|/path/to/rotatelogs /path/to/logs/access_log 86400"
</pre>

        <p>to enable daily rotation of the log files.<br />
         A more sophisticated solution of a logfile rotation
        utility is available under the name <code>cronolog</code>
        from Andrew Ford's site at <a
        href="http://www.cronolog.org/">http://www.cronolog.org/</a>.
        It can automatically create logfile subdirectories based on
        time and date, and can have a constant symlink point to the
        rotating logfiles. (As of version 1.6.1, cronolog is
        available under the <a href="../LICENSE">Apache
        License</a>). Use it like this:</p>
<pre>
   CustomLog "|/path/to/cronolog --symlink=/usr/local/apache/logs/access_log /usr/local/apache/logs/%Y/%m/access_log" combined
</pre>
        <hr />
      </li>

      <li>
        <a id="conditional-logging"
        name="conditional-logging"><strong>How do I keep certain
        requests from appearing in my logs?</strong></a> 

        <p>The maximum flexibility for removing unwanted
        information from log files is obtained by post-processing
        the logs, or using piped-logs to feed the logs through a
        program which does whatever you want. However, Apache does
        offer the ability to prevent requests from ever appearing
        in the log files. You can do this by using the <a
        href="../mod/mod_setenvif.html#SetEnvIf"><code>SetEnvIf</code></a>
        directive to set an environment variable for certain
        requests and then using the conditional <a
        href="../mod/mod_log_config.html#customlog-conditional"><code>
        CustomLog</code></a> syntax to prevent logging when the
        environment variable is set.</p>
        <hr />
      </li>

      <li>
        <a id="dbinteg" name="dbinteg"><b>Does Apache support any
        sort of database integration?</b></a> 

        <p>No. Apache is a Web (HTTP) server, not an application
        server. The base package does not include any such
        functionality. See the <a href="http://www.php.net/">PHP
        project</a> and the <a
        href="http://perl.apache.org/">mod_perl project</a> for
        examples of modules that allow you to work with databases
        from within the Apache environment.</p>
        <hr />
      </li>

      <li>
        <a id="asp" name="asp"><b>Can I use Active Server Pages
        (ASP) with Apache?</b></a> 

        <p>The base Apache Web server package does not include ASP
        support. However, there are a couple of after-market
        solutions that let you add this functionality; see the <a
        href="http://httpd.apache.org/related_projects.html">related
        projects</a> page to find out more.</p>
        <hr />
      </li>

      <li>
        <a id="java" name="java"><b>Does Apache come with Java
        support?</b></a> 

        <p>The base Apache Web server package does not include
        support for Java, Java Server Pages, Enterprise Java Beans,
        or Java servlets. Those features are available as add-ons
        from the Apache/Java project site, &lt;URL:<a
        href="http://jakarta.apache.org">http://jakarta.apache.org/</a>&gt;.</p>
        <hr />
      </li>
    </ol>
    
    
  </body>
</html>


        <hr />

    <h3 align="CENTER">Apache HTTP Server Version 1.3</h3>
    <a href="./"><img src="../images/index.gif" alt="Index" /></a>
    <a href="../"><img src="../images/home.gif" alt="Home" /></a>

  </body>
</html>
d2361 2
@


1.1.1.4
log
@import apache 1.3.27 and mod_ssl 2.8.11
@
text
@a322 4
          <li><a href="#modulemagic">Why am I getting &quot;module
          <em>module-name</em> is not compatible with this version of
          Apache&quot; messages in my error log?</a></li>

a420 5
         <li><a href="#serverheader">How can I change the information
         that Apache returns about itself in the headers?</a></li>

         <li><a href="#proxyscan">Why do I see requests for other sites
         appearing in my log files?</a></li>
d1894 1
a1894 1
          with more information.</p><hr />
d1897 1
a1897 1
    <li><a id="restart" name="restart"><b>Why am I getting server restart
d1912 1
a1912 20
          restart is due to your server logs being rotated.</p><hr />
     </li>

     <li><a id="modulemagic" name="modulemagic"><b>Why am I getting
          &quot;module <em>module-name</em> is not compatible with this version
          of Apache&quot; messages in my error log?</b></a>
      
          <p>Module Magic Number (MMN) is a constant defined in Apache
          source that is associated with binary compatibility of
          modules. It is changed when internal Apache structures,
          function calls and other significant parts of API change in
          such a way that binary compatiblity cannot be guaranteed any
          more. On MMN change, all third party modules have to be at
          least recompiled, sometimes even slightly changed in order
          to work with the new version of Apache.</p>

          <p>If you're getting the above error messages, contact the
          vendor of the module for the new binary, or compile it if
          you have access to the source code.</p><hr />
     </li>
d2523 1
a2523 9
         keyword. For example:</p>

         <blockquote><code>
         &lt;Directory /path/to/directory&gt;<br />
         &nbsp;&nbsp;&nbsp;Options +Indexes<br />
         &lt;/Directory&gt;
         </code></blockquote>
         
         <p>To turn off automatic directory indexing, remove
d2525 1
a2525 9
         <code>Options</code> line. To turn off directory listing
         for a particular subdirectory, you can use 
         <code>Options -Indexes</code>. For example:</p>

         <blockquote><code>
         &lt;Directory /path/to/directory&gt;<br />
         &nbsp;&nbsp;&nbsp;Options -Indexes<br />
         &lt;/Directory&gt;
         </code></blockquote>
a2562 126


       <li><a id="serverheader" name="servername"><strong>How can I change
       the information that Apache returns about itself in the
       headers?</strong></a>

    <p>When a client connects to Apache, part of the information returned in
    the headers is the name "Apache" Additional information that can be sent
    is the version number, such as "1.3.26", the operating system, and a
    list of non-standard modules you have installed.</p>

    <p>For example:</p>

<blockquote><code>
Server: Apache/1.3.26 (Unix) mod_perl/1.26
</code></blockquote>

    <p>Frequently, people want to remove this information, under the mistaken
    understanding that this will make the system more secure. This is
    probably not the case, as the same exploits will likely be attempted
    regardless of the header information you provide.</p>

    <p>There are, however, two answers to this question: the correct answer,
    and the answer that you are probably looking for.</p>

    <p>The correct answer to this question is that you should use the
    ServerTokens directive to alter the quantity of information which is
    passed in the headers. Setting this directive to <code>Prod</code> will
    pass the least possible amount of information:</p>

<blockquote><code>
Server: Apache
</code></blockquote>

    <p>The answer you are probably looking for is how to make Apache lie 
    about what what it is, ie send something like:</p>

<blockquote><code>
Server: Bob's Happy HTTPd Server
</code></blockquote>

    <p>In order to do this, you will need to modify the Apache source code and
    rebuild Apache. This is not advised, as it is almost certain not to
    provide you with the added security you think that you are gaining. The
    exact method of doing this is left as an exercise for the reader, as we
    are not keen on helping you do something that is intrinsically a bad
    idea.</p>

    <hr /></li>

         <li><a id="proxyscan" name="proxyscan"><strong>Why do I see requests
         for other sites appearing in my log files?</strong></a>

         <p>A an access_log entry showing this situation could look
         like this:</p> 

         <blockquote><code> 63.251.56.142 - -
         [25/Jul/2002:12:48:04 -0700] "GET http://www.yahoo.com/
         HTTP/1.0" 200 1456 </code></blockquote>

         <p>The question is: why did a request for
         <code>www.yahoo.com</code> come to your server instead of
         Yahoo's server?  And why does the response have a status 
         code of 200 (success)?</p>

         <p>This is usually the result of malicious clients trying to
         exploit open proxy servers to access a website without
         revealing their true location.  If you find entries like this
         in your log, the first thing to do is to make sure you have
         properly configured your server not to proxy for unknown
         clients.  If you don't need to provide a proxy server at all,
         you should simply assure that the <a
         href="../mod/mod_proxy.html#proxyrequests">ProxyRequests</a>
         directive is <strong>not</strong> set <code>on</code>.
         If you do need to run a proxy server, then you must ensure
         that you <a href="../mod/mod_proxy.html#access">secure your
         server properly</a> so that only authorized clients can use
         it.</p>

         <p>If your server is configured properly, then the attempt to
         proxy through your server will fail.  If you see a status
         code of <code>404</code> (file not found) in the log, then
         you know that the request failed.  If you see a status code
         of <code>200</code> (success), that does not necessarily mean
         that the attempt to proxy succeeded.  RFC2616 section 5.1.2
         mandates that Apache must accept requests with absolute URLs
         in the request-URI, even for non-proxy requests.  Since
         Apache has no way to know all the different names that your
         server may be known under, it cannot simply reject hostnames
         it does not recognize.  Instead, it will serve requests for
         unknown sites locally by stripping off the hostname and using
         the default server or virtual host.  Therefore you can
         compare the size of the file (1456 in the above example) to
         the size of the corresponding file in your default server.
         If they are the same, then the proxy attempt failed, since a
         document from your server was delivered, not a document from
         <code>www.yahoo.com</code>.</p>

         <p>If you wish to prevent this type of request entirely, then
         you need to let Apache know what hostnames to accept and what
         hostnames to reject.  You do this by configuring name-virtual
         hosts, where the first listed host is the default host that
         will catch and reject unknown hostnames.  For example:</p>

<blockquote>
<pre>
NameVirtualHost *

&lt;VirtualHost *&gt;
  ServerName default.only
  &lt;Location /&gt;
    Order allow,deny
    Deny from all
  &lt;/Location&gt;
&lt;/VirtualHost&gt;

&lt;VirtualHost *&gt;
  ServerName realhost1.example.com
  ServerAlias alias1.example.com alias2.example.com
  DocumentRoot /path/to/site1
&lt;/VirtualHost&gt;

...
</pre>
</blockquote>
    <hr /></li>
@


1.1.1.5
log
@import apache 1.3.28 and mod_ssl 2.8.15
@
text
@d813 1
a813 14
        <p>The name 'Apache' was chosen from respect for
        the Native American Indian tribe of Apache (Ind&eacute;),
        <a href="http://www.indians.org/welker/apache.htm">well-known
        for their superior skills in warfare strategy and their
        inexhaustible endurance</a>. For more information on the
        Apache Nation, we suggest searching
        <a href="http://www.google.com/search?q=Apache+Nation">Google</a>,
        <a href="http://www.northernlight.com/nlquery.fcg?qr=Apache+Nation"
          >Northernlight</a>, or
        <a href="http://www.alltheweb.com/cgi-bin/asearch?query=Apache+Nation"
          >AllTheWeb</a>.</p>

        <p>Secondarily, and more popularly (though incorrectly) accepted,
        it's a considered cute name which stuck. Apache is "<strong>A
d817 12
d1208 1
a1208 1
        an updated patch that incorporates all changes and
d1576 2
a1577 2
        problems or slow network links may experience this more
        than high capacity ones or those with large pipes to the
d1824 7
a1830 1
        Another potential solution (not tested) is to add
d1832 4
a1835 1
        List".</p>
d1919 1
a1919 1
          rotated. Compare the time of rotation to the error message time.
d1932 1
a1932 1
          such a way that binary compatibility cannot be guaranteed any
a2285 28

        <p>The other thing that can occasionally cause this symptom is a
        misunderstanding of the <a
        href="../mod/mod_alias.html#alias">Alias</a> directive,
        resulting in an alias working with a trailing slash, and not 
        without one. The <code>Alias</code> directive is very literal,
        and aliases what you tell it to. Consider the following
        example:</p>

        <pre>
        Alias /example/ /home/www/example/
        </pre>

        <p>The above directive creates an alias for URLs starting with
        <code>/example/</code>, but does <em>not</em> alias URLs
        starting with <code>/example</code>. That is to say, a URL such
        as <code>http://servername.com/example/</code> will get the
        desired content, but a URL such as
        <code>http://servername.com/example</code> will result in a
        "file not found" error.</p>

        <p>The following <code>Alias</code>, on the other hand, will
        work for both cases:</p>

        <pre>
        Alias /example /home/www/example
        </pre>

d2609 1
a2609 1
       <li><a id="serverheader" name="serverheader"><strong>How can I change
d3283 1
a3283 3
        User Authentication</cite></a>, or see the <a
        href="../howto/auth.html">authentication tutorial</a> in the
        Apache documentation.</p>
d3894 1
a3894 1
        href="../mod/mod_setenvif.html#setenvif"><code>SetEnvIf</code></a>
@


1.1.1.6
log
@import Apache 1.3.29 and mod_ssl 2.8.16
@
text
@d9 1
a9 1
    <!--#set var="FAQMASTER" value="YES" -->
d89 240
d331 6
d338 8
d347 86
d435 6
d442 8
a450 2
    </ol>
    <hr />
d452 50
a501 1
    <h2>The Answers</h2>
d504 55
d561 50
d613 55
d670 8
d679 3290
@


