head	1.9;
access;
symbols
	OPENBSD_3_7:1.8.0.8
	OPENBSD_3_7_BASE:1.8
	OPENBSD_3_6:1.8.0.6
	OPENBSD_3_6_BASE:1.8
	OPENBSD_3_5:1.8.0.4
	OPENBSD_3_5_BASE:1.8
	apache_1_3_29-mod_ssl_2_8_16:1.1.1.3
	OPENBSD_3_4:1.8.0.2
	OPENBSD_3_4_BASE:1.8
	apache_1_3_28-mod_ssl_2_8_15:1.1.1.3
	OPENBSD_3_3:1.7.0.2
	OPENBSD_3_3_BASE:1.7
	apache_1_3_27-mod_ssl_2_8_12:1.1.1.2
	apache_1_3_27:1.1.1.2
	OPENBSD_3_2:1.6.0.2
	OPENBSD_3_2_BASE:1.6
	apache_1_3_26:1.1.1.1
	apache:1.1.1
	OPENBSD_3_1:1.5.0.2
	OPENBSD_3_1_BASE:1.5
	OPENBSD_3_0:1.4.0.4
	OPENBSD_3_0_BASE:1.4
	OPENBSD_2_9_BASE:1.4
	OPENBSD_2_9:1.4.0.2
	OPENBSD_2_8:1.3.0.4
	OPENBSD_2_8_BASE:1.3
	OPENBSD_2_7:1.3.0.2
	OPENBSD_2_7_BASE:1.3
	OPENBSD_2_6:1.2.0.2
	OPENBSD_2_6_BASE:1.2
	OPENBSD_2_5:1.1.0.2
	OPENBSD_2_5_BASE:1.1;
locks; strict;
comment	@# @;


1.9
date	2005.07.27.20.54.44;	author jmc;	state dead;
branches;
next	1.8;

1.8
date	2003.08.21.13.11.31;	author henning;	state Exp;
branches;
next	1.7;

1.7
date	2002.10.07.21.04.43;	author henning;	state Exp;
branches;
next	1.6;

1.6
date	2002.07.19.21.31.14;	author henning;	state Exp;
branches;
next	1.5;

1.5
date	2002.02.12.07.56.47;	author beck;	state Exp;
branches;
next	1.4;

1.4
date	2000.12.15.22.17.24;	author beck;	state Exp;
branches;
next	1.3;

1.3
date	2000.01.25.18.29.21;	author beck;	state Exp;
branches;
next	1.2;

1.2
date	99.09.29.06.28.58;	author beck;	state Exp;
branches;
next	1.1;

1.1
date	99.03.01.01.17.52;	author beck;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.07.19.21.27.25;	author henning;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2002.10.07.19.48.07;	author henning;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2003.08.21.12.53.30;	author henning;	state Exp;
branches;
next	;


desc
@@


1.9
log
@from tamas tevesz:

==> remove of a number of alien platforms
==> remove broken links in sitemap.html
==> remove unreferenced install_1_1.html
@
text
@<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>

    <title>The Apache TPF Port</title>
  </head>

  <body>
    <a id="top" name="top"></a> 

    <center>
      <h2>Overview of the Apache TPF Port</h2>
    </center>
    <hr />

    <center>
      [ <a href="#configuration_files">Configuration&nbsp;Files</a>
      | <a href="#whats_available">What's&nbsp;Available</a>
      | <a href="#cgi">CGI&nbsp;Scripts</a>
      | <a href="#options">Options</a>
      | <a href="#syslog">Syslog</a>
      | <a href="#porting_notes">Porting&nbsp;Notes</a>&nbsp;]
    </center>
    <hr />

    <p>This version of Apache includes changes allowing it to run
    on IBM's EBCDIC-based <a
    href="http://www.ibm.com/software/ts/tpf/index.html">TPF</a>
    (Transaction Processing Facility) operating system.<br />
     Unless otherwise noted TPF version 4.1 PUT09 is
    required.&nbsp;</p>

    <p>Refer to <a href="install-tpf.html">install-tpf.html</a> for
    step-by-step installation instructions.&nbsp;</p>

    <p>This port builds upon the <a
    href="http://httpd.apache.org/docs/ebcdic.html">EBCDIC
    changes</a> previously made to Apache.&nbsp;<br />
     <a id="configuration_files"
    name="configuration_files"></a></p>

    <center>
      <h2>Apache Configuration Files</h2>
    </center>
    The distributed configuration files (httpd.conf-dist and
    mime.types, both located in the conf subdirectory) work on TPF.
    Performance considerations may dictate setting KeepAlive to
    "Off" (the default is "On") or lowering the Timeout value from
    the default 300 seconds (5 minutes) in order to reduce the
    number of active ECBs on your system.<br />

    <p>Apache on TPF does not support listening on multiple ports.</p>

     <a id="whats_available" name="whats_available"></a> 

    <center>
      <h2>What's Available in this Version</h2>
    </center>
    The Apache organization provides <a
    href="http://httpd.apache.org/docs/">online documentation</a>
    describing the various modules and components of the
    server.&nbsp; 

    <h3>Components/modules tested on TPF:</h3>

    <ul>
      <li>alloc.c&nbsp;</li>

      <li>ap_base64.c&nbsp;</li>

      <li>ap_checkpass.c&nbsp;</li>

      <li>ap_cpystrn.c&nbsp;</li>

      <li>ap_ebcdic.c&nbsp;</li>

      <li>ap_fnmatch.c&nbsp;</li>

      <li>ap_md5c.c&nbsp;</li>

      <li>ap_sha1.c&nbsp;</li>

      <li>ap_signal.c&nbsp;</li>

      <li>ap_slack.c&nbsp;</li>

      <li>ap_snprintf.c&nbsp;</li>

      <li>buff.c&nbsp;</li>

      <li>buildmark.c&nbsp;</li>

      <li>gen_test.char.c&nbsp;</li>

      <li>gen_uri_delims.c&nbsp;</li>

      <li>htpasswd.c <em>(requires PUT10)&nbsp;</em></li>

      <li>http_config.c&nbsp;</li>

      <li>http_core.c&nbsp;</li>

      <li>http_log.c&nbsp;</li>

      <li>http_main.c&nbsp;</li>

      <li>http_protocol.c&nbsp;</li>

      <li>http_request.c&nbsp;</li>

      <li>http_vhost.c&nbsp;</li>

      <li>logresolve.c <em>(requires PUT10)&nbsp;</em></li>

      <li>mod_access.c <em>(Use of mod_access directives
      "<tt>allow&nbsp;from</tt>" &amp; "<tt>deny&nbsp;from</tt>"
      with host <u>names</u> (versus ip addresses) requires
      PUT10)&nbsp;</em></li>

      <li>mod_actions.c&nbsp;</li>

      <li>mod_alias.c&nbsp;</li>

      <li>mod_asis.c&nbsp;</li>

      <li>mod_auth.c&nbsp;</li>

      <li>mod_auth_anon.c&nbsp;</li>

      <li>mod_autoindex.c&nbsp;</li>

      <li>mod_cern_meta.c&nbsp;</li>

      <li>mod_cgi.c <em>(requires PUT10)</em>&nbsp;</li>

      <li>mod_digest.c&nbsp;</li>

      <li>mod_dir.c&nbsp;</li>

      <li>mod_env.c&nbsp;</li>

      <li>mod_example.c&nbsp;</li>

      <li>mod_expires.c&nbsp;</li>

      <li>mod_headers.c&nbsp;</li>

      <li>mod_imap.c&nbsp;</li>

      <li>mod_include.c <em>(CGI execution requires TPF version 4.1
      PUT10)&nbsp;</em></li>

      <li>mod_info.c&nbsp;</li>

      <li>mod_log_agent.c&nbsp;</li>

      <li>mod_log_config.c&nbsp;</li>

      <li>mod_log_referer.c&nbsp;</li>

      <li>mod_mime.c&nbsp;</li>

      <li>mod_mime_magic.c&nbsp;</li>

      <li>mod_negotiation.c&nbsp;</li>

      <li><a
      href="http://hpwww.ec-lyon.fr/~vincent/apache/mod_put.html">mod_put.c</a>
      <em>(third party module)&nbsp;</em></li>

      <li>mod_proxy.c&nbsp;</li>

      <li>mod_setenvif.c&nbsp;</li>

      <li>mod_speling.c&nbsp;</li>

      <li>mod_status.c&nbsp;</li>

      <li>mod_tpf_shm_static.c <em>(third party module, requires
      PUT10)&nbsp;</em></li>

      <li>mod_unique_id.c <em>(requires PUT10)</em>&nbsp;</li>

      <li>mod_userdir.c&nbsp;</li>

      <li>mod_usertrack.c&nbsp;</li>

      <li>os.c&nbsp;</li>

      <li>os-inline.c&nbsp;</li>

      <li>proxy_cache.c&nbsp;</li>

      <li>proxy_connect.c&nbsp;</li>

      <li>proxy_ftp.c&nbsp;</li>

      <li>proxy_http.c&nbsp;</li>

      <li>proxy_util.c&nbsp;</li>

      <li>regular expression parser&nbsp;</li>

      <li>regular expression test tool <em>(requires
      PUT10)&nbsp;</em></li>

      <li>rfc1413.c&nbsp;</li>

      <li>rotatelogs.c <em>(requires PUT10; if PJ27214 implemented be sure to apply PJ28367)&nbsp;</em></li>

      <li>syslog <em>(requires PUT13; see <a href="install-tpf.html#syslog">install</a>
         and <a href="#syslog">usage</a> instructions)&nbsp;</em></li>

      <li>util.c&nbsp;</li>

      <li>util_date.c&nbsp;</li>

      <li>util_md5.c&nbsp;</li>

      <li>util_script.c&nbsp;</li>

      <li>util_uri.c&nbsp;</li>
    </ul>

    <h3>Components/modules not yet supported on TPF:</h3>

    <ul>
      <li>htdigest.c&nbsp;</li>

      <li>lib/expat-lite&nbsp;</li>

      <li>lib/sdbm&nbsp;</li>

      <li>mod_auth_digest.c&nbsp;</li>

      <li>mod_rewrite.c&nbsp;</li>

      <li>mod_vhost_alias.c&nbsp;</li>
    </ul>

    <h3>Components/modules that don't apply or that probably won't
    ever be available on TPF:</h3>

    <ul>
      <li>ab.c&nbsp;</li>

      <li>ap_getpass.c&nbsp;</li>

      <li>mod_auth_db.c&nbsp;</li>

      <li>mod_auth_dbm.c&nbsp;</li>

      <li>mod_auth_db.module&nbsp;</li>

      <li>mod_mmap_static.c&nbsp;</li>

      <li>mod_so.c&nbsp;</li>

      <li>suexec.c&nbsp;</li>
    </ul>
    <a id="cgi" name="cgi"></a> 

    <center>
      <h2>How to Use CGI Scripts</h2>
    </center>

    <p>The following is a very simple example of a CGI script
    ("Hello World") and the necessary steps to run it.<br />
     Refer to the <a
    href="http://httpd.apache.org/docs/mod/mod_cgi.html">mod_cgi
    module</a> for additional information.</p>

    <h3>Add necessary directives to httpd.conf:</h3>

    <div style="margin-left: 2em">
      Example: <tt><br />
      </tt> 

      <div style="margin-left: 2em">
        <tt>ScriptLog logs/script_log<br />
         ScriptAlias /cgi-bin/ /usr/local/apache/cgi-bin/</tt>
      </div>
      <br />
       A request for <tt>http://myserver/cgi-bin/filename.cgi</tt>
      would cause the server to run the script
      <tt>/usr/local/apache/cgi-bin/filename.cgi</tt>
    </div>

    <h3>Create the CGI script:</h3>

    <div style="margin-left: 2em">
      <p>For this example <tt>QZZ1</tt> is the name of the TPF
      program that will be executed by the CGI script.<br />
       The directory path must match what is in the httpd.conf file
      for <tt>ScriptAlias</tt> directive.</p>

      <div style="margin-left: 2em">
        <tt>zfile echo "#!QZZ1" &gt;
        /usr/local/apache/cgi-bin/filename.cgi<br />
         zfile cat
        /usr/local/apache/cgi-bin/filename.cgi&nbsp;&nbsp;&nbsp;&nbsp;</tt>
        (this should display <tt>#!QZZ1</tt>)<br />
        <br />
      </div>
    </div>

    <h3>Mark the script as executable:</h3>

    <div style="margin-left: 2em">
      <tt>zfile chmod 755
      /usr/local/apache/cgi-bin/filename.cgi<br />
      <br />
      </tt>
    </div>

    <h3>Create, load, and activate a loadset containing the CGI
    program (QZZ1xx):</h3>

    <div style="margin-left: 2em">
      <code>/** QZZ1-- simple "Hello world" program to demonstrate
      basic CGI output **/<br />
      <br />
       #include &lt;stdio.h&gt;<br />
      <br />
       void main() {<br />
      <br />
      </code> 

      <div style="margin-left: 2em">
        <code>/** Print the CGI response header, required for all
        HTML output. **/<br />
         /** Note the extra \n, to send the blank line. **/<br />
        <br />
         printf("Content-type: text/html\n\n");<br />
        <br />
         /** Print the HTML response page to stdout. **/<br />
         printf("&lt;html&gt;\n");<br />
         printf("&lt;head&gt;&lt;title&gt; CGI Output
        &lt;/title&gt;&lt;/head&gt;\n");<br />
         printf("&lt;body&gt;\n");<br />
         printf("&lt;h1&gt; Hello world &lt;/h1&gt; \n");<br />
         printf("&lt;/body&gt;\n");<br />
         printf("&lt;/html&gt;\n");<br />
        <br />
        </code>
      </div>
      <code>}<br />
      </code>
    </div>

    <h3>Request the CGI script from a browser:</h3>

    <div style="margin-left: 2em">
      <tt>http://myserver/cgi-bin/filename.cgi</tt><br />
    </div>
    <a id="options" name="options"></a> 

    <center>
      <h2>How to Use Apache's "Dash" Options</h2>
    </center>

    <h3>Overview of Apache's "dash" options:</h3>

    <p>Apache can be invoked with various options, such as "-f".
       Some of these options display information about the server or perform syntax checks
       but they don't actually start the server.
       These "information only" options are useful with TPF's ZFILE command line feature:
       -h, -l, -L, -S, -t, -T, -v, and -V.
       </p>

    <p>Another option, -X, is used when actually running the server.
       It is passed to Apache through the ZINET XPARM field since ZINET is the only way to start the server on TPF.</p>

    <p>A third group of options apply to both the informational displays (ZFILE) and
       running the server (ZINET XPARM): -d, -D and -f.</p>

    <p>The rest of Apache's options are either not applicable or are not supported on TPF.</p>

    <p>Using dash options requires PJ27277 which shipped on PUT13.</p>

    <h3>Table of supported Apache options</h3>

    <div style="margin-left: 2em">
    <table border="1" cellpadding="5">
    <tr><td><b>Option&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b>
        </td><td><b>ZFILE</b></td>
        <td><b>ZINET</b>
        </td><td><b>Description</b></td></tr>

    <tr><td valign="top"><b>-d</b> <i>path</i></td>
        <td valign="top">ZFILE</td>
        <td valign="top">ZINET</td>
        <td valign="top">Set the initial value for the ServerRoot directive.</td></tr>

    <tr><td valign="top"><b>-D</b> <i>define</i></td>
        <td valign="top">ZFILE</td>
        <td valign="top">ZINET</td>
        <td valign="top">Set a configuration parameter which can be used with &lt;IfDefine&gt;...&lt;/IfDefine&gt; sections in the configuration file to conditionally skip or process commands.</td></tr>

    <tr><td valign="top"><b>-f</b> <i>filename</i></td>
        <td valign="top">ZFILE</td>
        <td valign="top">ZINET</td>
        <td valign="top">Use an alternate configuration file instead of the default conf/httpd.conf file.</td></tr>

    <tr><td valign="top"><b>-h</b></td>
        <td valign="top">ZFILE</td>
        <td valign="top">&nbsp;</td>
        <td valign="top">List a short summary of available command line options then exit.
            Note that this outputs all options, not just those supported on TPF.</td></tr>

    <tr><td valign="top"><b>-l</b></td>
        <td valign="top">ZFILE</td>
        <td valign="top">&nbsp;</td>
        <td valign="top">List modules compiled into the server then exit.</td></tr>

    <tr><td valign="top"><b>-L</b></td>
        <td valign="top">ZFILE</td>
        <td valign="top">&nbsp;</td>
        <td valign="top">List available configuration directives then exit. Note that this outputs all configuration directives, not just those supported on TPF.</td></tr>

    <tr><td valign="top"><b>-S</b></td>
        <td valign="top">ZFILE</td>
        <td valign="top">&nbsp;</td>
        <td valign="top">Show the settings as parsed from the configuration file then exit.  Currently Apache only shows the virtual host settings.</td></tr>

    <tr><td valign="top"><b>-t</b></td>
        <td valign="top">ZFILE</td>
        <td valign="top">&nbsp;</td>
        <td valign="top">Run syntax tests for configuration files with document root checks then exit.</td></tr>

    <tr><td valign="top"><b>-T</b></td>
        <td valign="top">ZFILE</td>
        <td valign="top">&nbsp;</td>
        <td valign="top">Run syntax tests for configuration files <i>without</i> document root checks then exit.</td></tr>

    <tr><td valign="top"><b>-v</b></td>
        <td valign="top">ZFILE</td>
        <td valign="top">&nbsp;</td>
        <td valign="top">Show the version number then exit.</td></tr>

    <tr><td valign="top"><b>-V</b></td>
        <td valign="top">ZFILE</td>
        <td valign="top">&nbsp;</td>
        <td valign="top">Show the version number and various compile settings then exit.</td></tr>

    <tr><td valign="top"><b>-X</b></td>
        <td valign="top">&nbsp;</td>
        <td valign="top">ZINET</td>
        <td valign="top">Run in single-process mode for internal debugging purposes only.
                       The parent process does not fork any children.</td></tr>

    </table>

    <p>See <a href="http://httpd.apache.org/docs/programs/httpd.html">http://httpd.apache.org/docs/programs/httpd.html</a>
       for more information about these command line options.</p>
    </div>

    <h3>Setup for ZFILE examples</h3>

    <div style="margin-left: 2em">
      <p>Ensure Apache (CHTA) is loaded</p>

      <p>Create the httpd script:</p>

      <div style="margin-left: 2em">
        <tt>zfile echo "#!CHTA" &gt; /bin/httpd<br />
         zfile cat /bin/httpd&nbsp;&nbsp;</tt> (this should display
        <tt>#!CHTA</tt>)
      </div>
      <br />
      <br />
       

      <p>Mark the script as executable:<br />
      </p>

      <div style="margin-left: 2em">
        <tt>zfile chmod 755 /bin/httpd</tt>
      </div>
      <br />
       

      <p>(See "<em>ZFILE-Activate a TPF Segment or Script</em>" in
      the <em>Operations</em> guide for more information: <a
      href="http://www.ibm.com/tpf/pubs/tpfpubs.htm">http://www.ibm.com/tpf/pubs/tpfpubs.htm</a>.)</p>
    </div>

    <h3>ZFILE example 1</h3>

    <div style="margin-left: 2em">
      <p><tt>zfile httpd -v</tt></p>

      <p><tt>FILE0001I 11.43.09 START OF DISPLAY FROM httpd
      -v<br />
       Server version: Apache/1.3.20 (TPF)<br />
       Server built: May 23 2001 09:39:22<br />
       END OF DISPLAY</tt></p>
    </div>

    <h3>ZFILE example 2</h3>

    <div style="margin-left: 2em">
      <p><tt>zfile httpd -t -f
      /usr/local/apache/conf/alt.conf</tt></p>

      <p><tt>FILE0002I 11.47.26 START OF ERROR DISPLAY FROM httpd
      -t ...<br />
       Syntax OK<br />
       END OF DISPLAY</tt></p>
    </div>

    <h3>ZINET XPARM example</h3>
    <div style="margin-left: 2em">

       This example uses an alternate configuration file called /usr/local/apache/conf/alt.conf.<br />
       Transfer the alternate configuration file to your TPF test system.<br />
       <tt>zinet add s-apache pgm-chta model-daemon user-root xparm--f conf/alt.conf</tt><br />
       <tt>zinet start s-apache</tt>

      <p>(See "<em>ZINET ADD-Add an Internet Server Application Entry</em>" and
          "<em>ZINET ALTER-Change an Internet Server Application Entry</em>" in
          the <em>Operations</em> guide for more information about using the XPARM field:
          <a href="http://www.ibm.com/tpf/pubs/tpfpubs.htm">http://www.ibm.com/tpf/pubs/tpfpubs.htm</a>.)</p>
    </div>


    <a id="syslog" name="syslog"></a> 

    <center>
      <h2>Syslog Daemon</h2>
    </center>

    <h3>Syslog overview:</h3>

 <p>The syslog daemon is a server process that provides a message logging facility for application and system processes.
    It can be used to write messages to log files or to tapes.
    See <em>TPF Transmission Control Protocol/Internet Protocol</em> for detailed information about using the syslog daemon on TPF:
    <a href="http://www.ibm.com/tpf/pubs/tpfpubs.htm">http://www.ibm.com/tpf/pubs/tpfpubs.htm</a>.
    And see the Apache <a href="http://httpd.apache.org/docs/mod/core.html#errorlog">ErrorLog directive documentation</a>
    for details on how to use syslog with Apache.</p>

 <p>Syslog capabilities were added with PJ27214 which shipped with PUT13.
    You must follow the <a href="install-tpf.html#syslog">syslog specific installation instructions</a>
    in order to have the option of using syslog with Apache.</p>


    <h3>Tips on using syslog with your Apache error log:</h3>

 <p>This section provides some tips on using syslog with Apache.
    It is not meant to replace the syslog documentation in the TPF TCP/IP publication.</p>
 
 <ul>
<li>The syslog daemon will not create files.  If you are logging to a file (as specified in the <tt>syslog.conf</tt> configuration file) that file must already exist and
    have permissions that allow the syslog daemon to write to it.</li>
<li>You must restart the syslog daemon for it to recognize changes to its <tt>syslog.conf</tt> configuration file.</li>
<li>The syslog daemon must be active prior to starting Apache.</li>
<li>To indicate you want to use syslog with your Apache error log add the following directive to your <tt>httpd.conf</tt> file:
    "<tt>ErrorLog&nbsp;syslog:</tt><i>facility</i>" where <i>facility</i> is "local0" through "local7".</li>
<li>Apache will default the facility to "local7" if you omit the facility name from the ErrorLog directive (that is "<tt>ErrorLog&nbsp;syslog</tt>").</li>
<li>The syslog facility name must be one that is recognized by both Apache and the syslog.h header file.
    The facility names "local0" through "local7" are explicitly set aside for your use.</li>
<li>Although "local0" through "local7" are recommended user facility names, here is the complete list of names recognized
    by both Apache and TPF's syslog.h:  auth, cron, daemon, kern, local0, local1, local2, local3, local4, local5, local6, local7,
    lpr, mail, news, syslog, user, and uucp.</li>
<li>You won't see the normal Apache startup/shutdown messages when you use syslog with your Apache error log.</li>
<li>Syslog does not support TCP/IP Offload devices (ZCLAW)</li>
</ul>

    <a id="porting_notes" name="porting_notes"></a> 

    <center>
      <h2>Porting Notes</h2>
    </center>

    <h3>Changes made due to differences between UNIX and TPF's
    process models:</h3>

    <ul>
      <li><b>Signals</b>: On TPF a signal that is sent to a process
      remains unhandled until the process explicitly requests that
      signals be handled using the <tt>tpf_process_signals()</tt>
      function. Additionally, the default action for an alarm on
      TPF is to take an OPR-7777 dump and exit. (On UNIX the
      default is the equivalent of <tt>exit()</tt> with no dump
      taken.) These differences necessitated a few
      modifications:&nbsp;</li>

      <li style="list-style: none">
        <br />
         &nbsp; 

        <ul>
          <li>bypass the use of <tt>ap_block_alarms()</tt> &amp;
          <tt>ap_unblock_alarms()</tt>&nbsp;</li>

          <li>add <tt>tpf_process_signals()</tt> calls&nbsp;</li>

          <li>add <tt>select()</tt> calls to prevent
          blocking.&nbsp;</li>
        </ul>
      </li>
    </ul>

    <h3>Find that function...</h3>
    Some simple functions &amp; definitions initially needed to be
    added on TPF, such as <tt>FD_SET()</tt>. We've put these in
    src/os/tpf/os.h for now.&nbsp; 

    <h3>EBCDIC changes:</h3>
    TPF-specific conversion tables between US-ASCII and EBCDIC
    (character set IBM-1047 to be exact) were created.&nbsp; 

    <h3>Miscellaneous, minor changes:</h3>
    Various minor changes (such as casting) were made due to
    differences in how some functions are implemented on
    TPF.&nbsp;<br />
     
    <hr />

    <center>
      [ <a href="#top">top</a>
      | <a href="#configuration_files">Configuration&nbsp;Files</a>
      | <a href="#whats_available">What's&nbsp;Available</a>
      | <a href="#cgi">CGI&nbsp;Scripts</a>
      | <a href="#options">Options</a>
      | <a href="#syslog">Syslog</a>
      | <a href="#porting_notes">Porting&nbsp;Notes</a>&nbsp;]
    </center>
  </body>
</html>

@


1.8
log
@merge
@
text
@@


1.7
log
@merge apache 1.3.27
@
text
@d54 3
d120 1
a120 1
      with host <u>names</u> (verses ip addresses) requires
@


1.6
log
@merge
@
text
@d20 6
a25 5
      [ <a href="#configuration_files">Configuration
      Files</a>&nbsp; | <a href="#whats_available">What's
      Available</a>&nbsp; | <a href="#cgi">CGI Scripts</a>&nbsp; |
      <a href="#options">Options</a>&nbsp; | <a
      href="#porting_notes">Porting Notes</a>&nbsp; ]
d211 3
d232 2
d359 1
a359 1
      <h2>How to Use Apache Command Line Options</h2>
d362 16
a377 4
    <p>You cannot run Apache from the command line on TPF. However
    you can use those Apache command line options which don't
    actually start the server. This requires PJ27277 which shipped
    on PUT13.</p>
d379 3
a381 1
    <h3>Supported Apache options:</h3>
d384 69
a452 42
      <p>-d <i>directory</i><br />
       Specify an alternate initial ServerRoot <i>directory</i>.
      Default is <tt>/usr/local/apache</tt>.</p>

      <p>-f <i>file</i><br />
       Specify an alternate server configuration <i>file</i>.
      Default is <tt>conf/httpd.conf</tt>.</p>

      <p>-h<br />
       List a short summary of available command line options.
      (Note that this outputs all options, not just those supported
      on TPF.)</p>

      <p>-l<br />
       List modules compiled into the server.</p>

      <p>-L<br />
       List available configuration directives. (Note that this
      outputs all configuration directives, not just those
      supported on TPF.)</p>

      <p>-S<br />
       Show the settings as parsed from the configuration file.
      Currently only shows the virtualhost settings.</p>

      <p>-t<br />
       Run syntax tests for configuration files (with document root
      checks)</p>

      <p>-T<br />
       Run syntax tests for configuration files (without document
      root checks)</p>

      <p>-v<br />
       Show the version number.</p>

      <p>-V<br />
       Show the version number and various compile settings.</p>

      <p>See <a
      href="http://httpd.apache.org/docs/programs/httpd.html">http://httpd.apache.org/docs/programs/httpd.html</a>
      for more information about these command line options.</p>
d454 2
a455 2
      <p>Note: On TPF Apache arguments are supported only on the
      command line, not through the ZINET XPARM field.</p>
d458 1
a458 1
    <h3>Setup</h3>
a480 1
      <br />
d488 1
a488 1
    <h3>Example 1</h3>
d500 1
a500 1
    <h3>Example 2</h3>
d504 1
a504 1
      /usr/local/apache/conf/httpd.conf.new</tt></p>
d511 58
d621 7
a627 6
      [ <a href="#top">top</a>&nbsp; | <a
      href="#configuration_files">Configuration Files</a>&nbsp; |
      <a href="#whats_available">What's Available</a>&nbsp; | <a
      href="#cgi">CGI Scripts</a>&nbsp; | <a
      href="#options">Options</a>&nbsp; | <a
      href="#porting_notes">Porting Notes</a> ]
@


1.5
log
@Apache 1.3.23+mod_ssl-2.8.6-1.3.23 merge
@
text
@d6 1
a6 1
    <meta name="generator" content="HTML Tidy, see www.w3.org" />
d15 1
a15 1
      <h1>Overview of the Apache TPF Port</h1>
d208 1
a208 1
      <li>rotatelogs.c <em>(requires PUT10)&nbsp;</em></li>
@


1.4
log
@apache 1.3.14 + mod_ssl 2.7.1 merge
@
text
@d1 338
a338 215
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<TITLE>The Apache TPF Port</TITLE>
</HEAD>
<BODY>
<A NAME="top"></A>
<H1 align="center">Overview of the Apache TPF Port</H1>
<HR>
<CENTER>[&nbsp;<A HREF="#configuration_files">Configuration Files</A>
   &nbsp;|&nbsp;<A HREF="#whats_available">What's Available</A>
   &nbsp;|&nbsp;<A HREF="#cgi">CGI Scripts</A>
   &nbsp;|&nbsp;<A HREF="#porting_notes">Porting Notes</A>&nbsp;]
</CENTER>
<HR>
<BR>

<P>
   This version of Apache includes changes allowing it to run on
   IBM's EBCDIC-based
   <A HREF="http://www.s390.ibm.com/products/tpf/tpfhp.html">TPF</A>
   (Transaction Processing Facility) operating system.
   Unless otherwise noted TPF version 4.1 PUT09 is required.
   <BR><BR>
   Refer to htdocs/manual/<A HREF="install-tpf.html">install-tpf.html</A>
   for step-by-step installation instructions.
   <BR><BR>
   As this is the first cut at making Apache run on TPF,
   performance tuning has not been done.
   <BR><BR>
   This port builds upon the <A HREF="ebcdic.html">EBCDIC changes</A>
   previously made to Apache.
   <BR>
</P>

<A NAME="configuration_files">&nbsp;</A>
<H2 align=center>Apache Configuration Files</H2>
<P>
   The distributed configuration files (httpd.conf-dist and
   mime.types, both located in the conf subdirectory)
   work on TPF.  Performance considerations may dictate setting KeepAlive to "Off"
   (the default is "On") or lowering the Timeout value from the default
   300 seconds (5 minutes) in order to reduce the number of active ECBs on your system.
</P>

<A NAME="whats_available">&nbsp;</A>
<H2 align=center>What's Available in this Version</H2>

   (The Apache organization provides
   <A HREF="http://www.apache.org/docs/">online documentation</A>
   describing the various modules and components of the server.)

<H3>Components/modules tested on TPF:</H3>

   <multicol COLS=3><UL>
   <LI>alloc.c
   <LI>ap_base64.c
   <LI>ap_checkpass.c
   <LI>ap_cpystrn.c
   <LI>ap_fnmatch.c
   <LI>ap_md5c.c
   <LI>ap_sha1.c
   <LI>ap_signal.c
   <LI>ap_slack.c
   <LI>ap_snprintf.c
   <LI>buff.c
   <LI>buildmark.c
   <LI>ebcdic.c
   <LI>gen_test.char.c
   <LI>gen_uri_delims.c
   <LI>htpasswd.c <i><small>(requires PUT10)</small></i>
   <LI>http_config.c
   <LI>http_core.c
   <LI>http_log.c
   <LI>http_main.c
   <LI>http_protocol.c
   <LI>http_request.c
   <LI>http_vhost.c
   <LI>logresolve.c <i><small>(requires PUT10)</small></i>
   <LI>mod_access.c <A HREF="#notes"> <i><small>(see note 1)</small></i></A>
   <LI>mod_actions.c
   <LI>mod_alias.c
   <LI>mod_asis.c
   <LI>mod_auth.c
   <LI>mod_auth_anon.c
   <LI>mod_autoindex.c
   <LI>mod_cern_meta.c
   <LI>mod_cgi.c <i><small>(requires PUT10)</small></i>
   <LI>mod_digest.c
   <LI>mod_dir.c
   <LI>mod_env.c
   <LI>mod_example.c
   <LI>mod_expires.c
   <LI>mod_headers.c
   <LI>mod_imap.c
   <LI>mod_include.c <A HREF="#notes"> <i><small>(see note 2)</small></i></A>
   <LI>mod_info.c
   <LI>mod_log_agent.c
   <LI>mod_log_config.c
   <LI>mod_log_referer.c
   <LI>mod_mime.c
   <LI>mod_mime_magic.c
   <LI>mod_negotiation.c
   <LI><A HREF="http://hpwww.ec-lyon.fr/~vincent/apache/mod_put.html">mod_put.c</A>
          <i> <small>(third party module)</small></i>
   <LI>mod_proxy.c
   <LI>mod_setenvif.c
   <LI>mod_speling.c
   <LI>mod_status.c
   <LI>mod_tpf_shm_static.c <i><small>(third party module, requires PUT10)</small></i>
   <LI>mod_unique_id.c <i><small>(requires PUT10)</small></i>
   <LI>mod_userdir.c
   <LI>mod_usertrack.c
   <LI>os.c
   <LI>os-inline.c
   <LI>proxy_cache.c
   <LI>proxy_connect.c
   <LI>proxy_ftp.c
   <LI>proxy_http.c
   <LI>proxy_util.c
   <LI>regular expression parser
   <LI>regular expression test tool <i><small>(requires PUT10)</small></i>
   <LI>rfc1413.c
   <LI>rotatelogs.c <i><small>(requires PUT10)</small></i>
   <LI>util.c
   <LI>util_date.c
   <LI>util_md5.c
   <LI>util_script.c
   <LI>util_uri.c
   </UL></MULTICOL>
   <A NAME="notes"></A><b>Notes:</b>
   <ol>
      <li>Use of mod_access directives &quot;<tt>allow from</tt>&quot; &amp; &quot;<tt>deny from</tt>&quot;
          with host <i>names</i> (verses ip addresses) requires TPF version 4.1 PUT10
      <li>CGI execution requires TPF version 4.1 PUT10
   </ol>

<H3>Components/modules not yet supported on TPF:</H3>

   <multicol COLS=3><UL>
   <LI>htdigest.c
   <LI>lib/expat-lite
   <LI>mod_auth_digest.c
   <LI>mod_rewrite.c
   <LI>mod_vhost_alias.c
   </UL></MULTICOL>

<H3>Components/modules that don't apply or that probably won't ever be available on TPF:</H3>

   <multicol COLS=3><UL>
   <LI>ab.c
   <LI>ap_getpass.c
   <LI>mod_auth_db.c
   <LI>mod_auth_dbm.c
   <LI>mod_auth_db.module
   <LI>mod_mmap_static.c
   <LI>mod_so.c
   <LI>suexec.c
   </UL></MULTICOL>

<A NAME="cgi">&nbsp;</A>
<H2 align=center>How to Use CGI Scripts</H2>
<P>
   The following is a very simple example of a CGI script ("Hello World") and the necessary steps to run it.<BR>
   Refer to the <A HREF="http://www.apache.org/docs/mod/mod_cgi.html">mod_cgi module</A> for 
   additional information.<BR>
   
   <H3>Add necessary directives to httpd.conf:</H3>
   <UL>
   Example:
   <tt><BR><UL> 
         ScriptLog logs/script_log<BR>
         ScriptAlias /cgi-bin/ /usr/local/apache/cgi-bin/
   </tt></UL><BR>
   A request for <tt>http://myserver/cgi-bin/filename.cgi</tt> would cause the server to run the script
   <tt>/usr/local/apache/cgi-bin/filename.cgi</tt>
   </UL>

   <H3>Create the CGI script:</H3>
   <UL>
        For this example <tt>QZZ1</tt> is the name of the TPF program that will be executed by the CGI script.<BR>                
        The directory path must match what is in the httpd.conf file for <tt>ScriptAlias</tt> directive.<BR><BR>
        <UL>
        <tt>zfile echo "#!QZZ1" > /usr/local/apache/cgi-bin/filename.cgi <BR><BR>
        zfile cat /usr/local/apache/cgi-bin/filename.cgi&nbsp;&nbsp;&nbsp;&nbsp;</tt>
                 (this should display<tt>#!QZZ1</tt>)<BR><BR>
        </UL>
   </UL>

   <H3>Mark the script as executable:</H3>
   <UL>
        <tt>zfile chmod 755 /usr/local/apache/cgi-bin/filename.cgi<BR><BR></tt>
   </UL>

   <H3>Create, load, and activate a loadset containing the CGI program (QZZ1xx):</H3>
   <UL> 
        <code>
        /**     QZZ1-- simple "Hello world" program to demonstrate basic CGI output  **/<BR><BR>
        #include &LT;stdio.h&GT<BR><BR>
        void main() {<BR><BR>
        <UL>
             /**   Print the CGI response header, required for all HTML output.    **/<BR>
             /**   Note the extra \n, to send the blank line.                      **/<BR><BR>

             printf("Content-type: text/html\n\n");<BR><BR>

             /** Print the HTML response page to stdout. **/<BR>
             printf("&LT;html&GT\n");<BR>
             printf("&LT;head&GT&LT;title&GT CGI Output &LT;/title&GT&LT;/head&GT\n");<BR>
             printf("&LT;body&GT\n");<BR>
             printf("&LT;h1&GT Hello world &LT;/h1&GT \n");<BR>
             printf("&LT/body&GT\n");<BR>
             printf("&LT/html&GT\n");<BR><BR>
        </UL>
        }<BR>
d340 186
a525 54
    </UL>

   <H3>Request the CGI script from a browser:</H3>
   <UL>         
        <tt>http://myserver/cgi-bin/filename.cgi</tt><BR>
   </UL>

<A NAME="porting_notes">&nbsp;</A>
<H2 align=center>Porting Notes</H2>
<P>
   <H3>Changes made due to differences between UNIX and
   TPF's process models:</H3>
   <UL>
   <LI><STRONG>Signals</STRONG>: On TPF a signal that is sent to a process
      remains unhandled until the process explicitly requests that signals
      be handled using the <CODE>tpf_process_signals()</CODE> function.
      Additionally, the default action for an alarm on TPF is to take
      an OPR-7777 dump and exit.  (On UNIX the default is the equivalent
      of <CODE>exit()</CODE> with no dump taken.)
      These differences necessitated a few modifications:
      <BR><BR>
      <UL>
      <LI>bypass the use of <CODE>ap_block_alarms()</CODE> &amp;
         <CODE>ap_unblock_alarms()</CODE>
      <LI>add <CODE>tpf_process_signals()</CODE> calls
      <LI>add <CODE>select()</CODE> calls to prevent blocking.
      </UL>
   <BR>
   </UL>

   <H3>Find that function...</H3>
   <P>Some simple functions &amp; definitions initially needed to be added
      on TPF, such as <CODE>FD_SET()</CODE>.
      We've put these in src/os/tpf/os.h for now.
   </P>

   <H3>EBCDIC changes:</H3>
   <P>TPF-specific conversion tables between US-ASCII and
      EBCDIC (character set IBM-1047 to be exact) were created
      and put into ebcdic.c in the src/os/tpf directory.
   </P>

   <H3>Miscellaneous, minor changes:</H3>
   <P>Various minor changes (such as casting) were made due to
      differences in how some functions are implemented on TPF.
   </P>

<HR>
<CENTER>[&nbsp;<A HREF="#top">top</A>
   &nbsp;|&nbsp;<A HREF="#configuration_files">Configuration Files</A>
   &nbsp;|&nbsp;<A HREF="#whats_available">What's Available</A>
   &nbsp;|&nbsp;<A HREF="#cgi">CGI Scripts</A>
   &nbsp;|&nbsp;<A HREF="#porting_notes">Porting Notes</A>&nbsp;]
</CENTER>
a526 2
</BODY>
</HTML>
@


1.3
log
@Apache 1.3.11 + mod_ssl 2.5.0 merge
@
text
@d12 1
d161 63
d268 1
@


1.2
log
@Apache 1.3.9 + Mod_ssl 2.4.2 - now builds with apaci nastiness.
@
text
@d22 1
a22 1
   Unless otherwise noted TPF version 4.1 PUT08 and APAR PJ25589 are required.
d40 3
a42 8
   work on TPF with only a couple of operating system specific changes
   to httpd.conf:<BR>
   <UL>
   <LI>ServerType needs to be "inetd" on pre-PUT09 systems.
   <LI>Performance considerations may dictate setting KeepAlive to "Off"
       (the default is "On") or lowering the Timeout value from the default
       300 seconds (5 minutes) in order to reduce the number of active ECBs on your system.
   </UL>
d56 2
d60 2
d70 1
d74 1
a74 1
   <LI>http_main.c <A HREF="#note_1"> <i><small>(see note 1)</small></i></A>
d77 1
a77 1
   <LI>http_vhost.c <i><small>(requires PUT9)</small></i>
d79 1
a79 1
   <LI>mod_access.c <A HREF="#note_2"> <i><small>(see note 2)</small></i></A>
d83 1
d88 1
d95 1
a95 1
   <LI>mod_include.c <A HREF="#note_3"> <i><small>(see note 3)</small></i></A>
d104 2
d109 1
d115 5
d121 2
d126 1
d130 1
a130 2
   <br><b>Notes:</b>
      <A NAME="note_1">&nbsp;</A>
a131 2
      <li>"Standalone" mode requires TPF version 4.1 PUT09
   <A NAME="note_2">&nbsp;</A>
a133 1
      <A NAME="note_3">&nbsp;</A>
d140 3
a142 6
   <LI>ap_md5c.c
   <LI>htpasswd.c
   <LI>mod_auth.c
   <LI>mod_digest.c
   <LI>mod_mmap_static.c
   <LI>mod_proxy.c
d144 1
a144 7
   <LI>proxy_cache.c
   <LI>proxy_connect.c
   <LI>proxy_ftp.c
   <LI>proxy_http.c
   <LI>proxy_util.c
   <LI>rfc1413.c
   <LI>util_md5.c
d150 2
d155 1
d178 1
a178 1
      <LI>add <CODE>select()</CODE> calls in buff.c to prevent blocking.
d184 1
a184 1
   <P>Some simple functions &amp; definitions needed to be added
@


1.1
log
@Apache 1.3.4
@
text
@a10 1
   &nbsp;|&nbsp;<A HREF="#auto_generated_files">Auto Generated Files</A>
d43 1
a43 2
   <LI>ServerType needs to be "inetd" since TPF does not yet support
       "standalone" mode.
d69 2
d74 1
a74 1
   <LI>http_main.c
d77 4
a80 2
   <LI>http_vhost.c <A HREF="#note_2">*</A>
   <LI>mod_access.c
d83 1
d86 1
d88 1
d93 1
d99 1
d101 1
d104 2
d111 1
d114 1
d117 4
a120 3
   Please keep in mind that some major pieces are not yet in place including
   standalone mode, pipes, password/group files, CGI scripts, and MD5 support.
   <BR>
d122 5
a126 2
   <BR>
   * virtual hosting requires TPF version 4.1 PUT09
d128 1
a128 1
<H3>Components/modules not (yet?) supported on TPF:</H3>
d131 1
a132 2
   <LI>md5c.c
   <LI>mod_actions.c
a133 2
   <LI>mod_auth_anon.c
   <LI>mod_cgi.c
d135 1
a135 3
   <LI>mod_env.c
   <LI>mod_include.c
   <LI>mod_mime_magic.c
a137 2
   <LI>mod_status.c
   <LI>mod_unique_id.c
a144 1
   <LI>util_script.c
a149 2
   <LI>gen_test.char.c
   <LI>gen_uri_delims.c
a152 1
   <LI>mod_mmap_static.c
d154 1
a196 6
   <H3>Temporary changes:</H3>
   <P>Lastly, we needed to bypass sections of Apache processing
      since this first cut for TPF doesn't include
      Standalone mode, pipes, forking, et cetera.
   </P>

a199 1
   &nbsp;|&nbsp;<A HREF="#auto_generated_files">Auto Generated Files</A>
@


1.1.1.1
log
@import apache 1.3.26 + mod_ssl 2.8.10
@
text
@d1 203
a203 525
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>

    <title>The Apache TPF Port</title>
  </head>

  <body>
    <a id="top" name="top"></a> 

    <center>
      <h2>Overview of the Apache TPF Port</h2>
    </center>
    <hr />

    <center>
      [ <a href="#configuration_files">Configuration
      Files</a>&nbsp; | <a href="#whats_available">What's
      Available</a>&nbsp; | <a href="#cgi">CGI Scripts</a>&nbsp; |
      <a href="#options">Options</a>&nbsp; | <a
      href="#porting_notes">Porting Notes</a>&nbsp; ]
    </center>
    <hr />

    <p>This version of Apache includes changes allowing it to run
    on IBM's EBCDIC-based <a
    href="http://www.ibm.com/software/ts/tpf/index.html">TPF</a>
    (Transaction Processing Facility) operating system.<br />
     Unless otherwise noted TPF version 4.1 PUT09 is
    required.&nbsp;</p>

    <p>Refer to <a href="install-tpf.html">install-tpf.html</a> for
    step-by-step installation instructions.&nbsp;</p>

    <p>This port builds upon the <a
    href="http://httpd.apache.org/docs/ebcdic.html">EBCDIC
    changes</a> previously made to Apache.&nbsp;<br />
     <a id="configuration_files"
    name="configuration_files"></a></p>

    <center>
      <h2>Apache Configuration Files</h2>
    </center>
    The distributed configuration files (httpd.conf-dist and
    mime.types, both located in the conf subdirectory) work on TPF.
    Performance considerations may dictate setting KeepAlive to
    "Off" (the default is "On") or lowering the Timeout value from
    the default 300 seconds (5 minutes) in order to reduce the
    number of active ECBs on your system.<br />
     <a id="whats_available" name="whats_available"></a> 

    <center>
      <h2>What's Available in this Version</h2>
    </center>
    The Apache organization provides <a
    href="http://httpd.apache.org/docs/">online documentation</a>
    describing the various modules and components of the
    server.&nbsp; 

    <h3>Components/modules tested on TPF:</h3>

    <ul>
      <li>alloc.c&nbsp;</li>

      <li>ap_base64.c&nbsp;</li>

      <li>ap_checkpass.c&nbsp;</li>

      <li>ap_cpystrn.c&nbsp;</li>

      <li>ap_ebcdic.c&nbsp;</li>

      <li>ap_fnmatch.c&nbsp;</li>

      <li>ap_md5c.c&nbsp;</li>

      <li>ap_sha1.c&nbsp;</li>

      <li>ap_signal.c&nbsp;</li>

      <li>ap_slack.c&nbsp;</li>

      <li>ap_snprintf.c&nbsp;</li>

      <li>buff.c&nbsp;</li>

      <li>buildmark.c&nbsp;</li>

      <li>gen_test.char.c&nbsp;</li>

      <li>gen_uri_delims.c&nbsp;</li>

      <li>htpasswd.c <em>(requires PUT10)&nbsp;</em></li>

      <li>http_config.c&nbsp;</li>

      <li>http_core.c&nbsp;</li>

      <li>http_log.c&nbsp;</li>

      <li>http_main.c&nbsp;</li>

      <li>http_protocol.c&nbsp;</li>

      <li>http_request.c&nbsp;</li>

      <li>http_vhost.c&nbsp;</li>

      <li>logresolve.c <em>(requires PUT10)&nbsp;</em></li>

      <li>mod_access.c <em>(Use of mod_access directives
      "<tt>allow&nbsp;from</tt>" &amp; "<tt>deny&nbsp;from</tt>"
      with host <u>names</u> (verses ip addresses) requires
      PUT10)&nbsp;</em></li>

      <li>mod_actions.c&nbsp;</li>

      <li>mod_alias.c&nbsp;</li>

      <li>mod_asis.c&nbsp;</li>

      <li>mod_auth.c&nbsp;</li>

      <li>mod_auth_anon.c&nbsp;</li>

      <li>mod_autoindex.c&nbsp;</li>

      <li>mod_cern_meta.c&nbsp;</li>

      <li>mod_cgi.c <em>(requires PUT10)</em>&nbsp;</li>

      <li>mod_digest.c&nbsp;</li>

      <li>mod_dir.c&nbsp;</li>

      <li>mod_env.c&nbsp;</li>

      <li>mod_example.c&nbsp;</li>

      <li>mod_expires.c&nbsp;</li>

      <li>mod_headers.c&nbsp;</li>

      <li>mod_imap.c&nbsp;</li>

      <li>mod_include.c <em>(CGI execution requires TPF version 4.1
      PUT10)&nbsp;</em></li>

      <li>mod_info.c&nbsp;</li>

      <li>mod_log_agent.c&nbsp;</li>

      <li>mod_log_config.c&nbsp;</li>

      <li>mod_log_referer.c&nbsp;</li>

      <li>mod_mime.c&nbsp;</li>

      <li>mod_mime_magic.c&nbsp;</li>

      <li>mod_negotiation.c&nbsp;</li>

      <li><a
      href="http://hpwww.ec-lyon.fr/~vincent/apache/mod_put.html">mod_put.c</a>
      <em>(third party module)&nbsp;</em></li>

      <li>mod_proxy.c&nbsp;</li>

      <li>mod_setenvif.c&nbsp;</li>

      <li>mod_speling.c&nbsp;</li>

      <li>mod_status.c&nbsp;</li>

      <li>mod_tpf_shm_static.c <em>(third party module, requires
      PUT10)&nbsp;</em></li>

      <li>mod_unique_id.c <em>(requires PUT10)</em>&nbsp;</li>

      <li>mod_userdir.c&nbsp;</li>

      <li>mod_usertrack.c&nbsp;</li>

      <li>os.c&nbsp;</li>

      <li>os-inline.c&nbsp;</li>

      <li>proxy_cache.c&nbsp;</li>

      <li>proxy_connect.c&nbsp;</li>

      <li>proxy_ftp.c&nbsp;</li>

      <li>proxy_http.c&nbsp;</li>

      <li>proxy_util.c&nbsp;</li>

      <li>regular expression parser&nbsp;</li>

      <li>regular expression test tool <em>(requires
      PUT10)&nbsp;</em></li>

      <li>rfc1413.c&nbsp;</li>

      <li>rotatelogs.c <em>(requires PUT10; if PJ27214 implemented be sure to apply PJ28367)&nbsp;</em></li>

      <li>util.c&nbsp;</li>

      <li>util_date.c&nbsp;</li>

      <li>util_md5.c&nbsp;</li>

      <li>util_script.c&nbsp;</li>

      <li>util_uri.c&nbsp;</li>
    </ul>

    <h3>Components/modules not yet supported on TPF:</h3>

    <ul>
      <li>htdigest.c&nbsp;</li>

      <li>lib/expat-lite&nbsp;</li>

      <li>mod_auth_digest.c&nbsp;</li>

      <li>mod_rewrite.c&nbsp;</li>

      <li>mod_vhost_alias.c&nbsp;</li>
    </ul>

    <h3>Components/modules that don't apply or that probably won't
    ever be available on TPF:</h3>

    <ul>
      <li>ab.c&nbsp;</li>

      <li>ap_getpass.c&nbsp;</li>

      <li>mod_auth_db.c&nbsp;</li>

      <li>mod_auth_dbm.c&nbsp;</li>

      <li>mod_auth_db.module&nbsp;</li>

      <li>mod_mmap_static.c&nbsp;</li>

      <li>mod_so.c&nbsp;</li>

      <li>suexec.c&nbsp;</li>
    </ul>
    <a id="cgi" name="cgi"></a> 

    <center>
      <h2>How to Use CGI Scripts</h2>
    </center>

    <p>The following is a very simple example of a CGI script
    ("Hello World") and the necessary steps to run it.<br />
     Refer to the <a
    href="http://httpd.apache.org/docs/mod/mod_cgi.html">mod_cgi
    module</a> for additional information.</p>

    <h3>Add necessary directives to httpd.conf:</h3>

    <div style="margin-left: 2em">
      Example: <tt><br />
      </tt> 

      <div style="margin-left: 2em">
        <tt>ScriptLog logs/script_log<br />
         ScriptAlias /cgi-bin/ /usr/local/apache/cgi-bin/</tt>
      </div>
      <br />
       A request for <tt>http://myserver/cgi-bin/filename.cgi</tt>
      would cause the server to run the script
      <tt>/usr/local/apache/cgi-bin/filename.cgi</tt>
    </div>

    <h3>Create the CGI script:</h3>

    <div style="margin-left: 2em">
      <p>For this example <tt>QZZ1</tt> is the name of the TPF
      program that will be executed by the CGI script.<br />
       The directory path must match what is in the httpd.conf file
      for <tt>ScriptAlias</tt> directive.</p>

      <div style="margin-left: 2em">
        <tt>zfile echo "#!QZZ1" &gt;
        /usr/local/apache/cgi-bin/filename.cgi<br />
         zfile cat
        /usr/local/apache/cgi-bin/filename.cgi&nbsp;&nbsp;&nbsp;&nbsp;</tt>
        (this should display <tt>#!QZZ1</tt>)<br />
        <br />
      </div>
    </div>

    <h3>Mark the script as executable:</h3>

    <div style="margin-left: 2em">
      <tt>zfile chmod 755
      /usr/local/apache/cgi-bin/filename.cgi<br />
      <br />
      </tt>
    </div>

    <h3>Create, load, and activate a loadset containing the CGI
    program (QZZ1xx):</h3>

    <div style="margin-left: 2em">
      <code>/** QZZ1-- simple "Hello world" program to demonstrate
      basic CGI output **/<br />
      <br />
       #include &lt;stdio.h&gt;<br />
      <br />
       void main() {<br />
      <br />
      </code> 

      <div style="margin-left: 2em">
        <code>/** Print the CGI response header, required for all
        HTML output. **/<br />
         /** Note the extra \n, to send the blank line. **/<br />
        <br />
         printf("Content-type: text/html\n\n");<br />
        <br />
         /** Print the HTML response page to stdout. **/<br />
         printf("&lt;html&gt;\n");<br />
         printf("&lt;head&gt;&lt;title&gt; CGI Output
        &lt;/title&gt;&lt;/head&gt;\n");<br />
         printf("&lt;body&gt;\n");<br />
         printf("&lt;h1&gt; Hello world &lt;/h1&gt; \n");<br />
         printf("&lt;/body&gt;\n");<br />
         printf("&lt;/html&gt;\n");<br />
        <br />
        </code>
      </div>
      <code>}<br />
      </code>
    </div>

    <h3>Request the CGI script from a browser:</h3>

    <div style="margin-left: 2em">
      <tt>http://myserver/cgi-bin/filename.cgi</tt><br />
    </div>
    <a id="options" name="options"></a> 

    <center>
      <h2>How to Use Apache Command Line Options</h2>
    </center>

    <p>You cannot run Apache from the command line on TPF. However
    you can use those Apache command line options which don't
    actually start the server. This requires PJ27277 which shipped
    on PUT13.</p>

    <h3>Supported Apache options:</h3>

    <div style="margin-left: 2em">
      <p>-d <i>directory</i><br />
       Specify an alternate initial ServerRoot <i>directory</i>.
      Default is <tt>/usr/local/apache</tt>.</p>

      <p>-f <i>file</i><br />
       Specify an alternate server configuration <i>file</i>.
      Default is <tt>conf/httpd.conf</tt>.</p>

      <p>-h<br />
       List a short summary of available command line options.
      (Note that this outputs all options, not just those supported
      on TPF.)</p>

      <p>-l<br />
       List modules compiled into the server.</p>

      <p>-L<br />
       List available configuration directives. (Note that this
      outputs all configuration directives, not just those
      supported on TPF.)</p>

      <p>-S<br />
       Show the settings as parsed from the configuration file.
      Currently only shows the virtualhost settings.</p>

      <p>-t<br />
       Run syntax tests for configuration files (with document root
      checks)</p>

      <p>-T<br />
       Run syntax tests for configuration files (without document
      root checks)</p>

      <p>-v<br />
       Show the version number.</p>

      <p>-V<br />
       Show the version number and various compile settings.</p>

      <p>See <a
      href="http://httpd.apache.org/docs/programs/httpd.html">http://httpd.apache.org/docs/programs/httpd.html</a>
      for more information about these command line options.</p>

      <p>Note: On TPF Apache arguments are supported only on the
      command line, not through the ZINET XPARM field.</p>
    </div>

    <h3>Setup</h3>

    <div style="margin-left: 2em">
      <p>Ensure Apache (CHTA) is loaded</p>

      <p>Create the httpd script:</p>

      <div style="margin-left: 2em">
        <tt>zfile echo "#!CHTA" &gt; /bin/httpd<br />
         zfile cat /bin/httpd&nbsp;&nbsp;</tt> (this should display
        <tt>#!CHTA</tt>)
      </div>
      <br />
      <br />
       

      <p>Mark the script as executable:<br />
      </p>

      <div style="margin-left: 2em">
        <tt>zfile chmod 755 /bin/httpd</tt>
      </div>
      <br />
      <br />
       

      <p>(See "<em>ZFILE-Activate a TPF Segment or Script</em>" in
      the <em>Operations</em> guide for more information: <a
      href="http://www.ibm.com/tpf/pubs/tpfpubs.htm">http://www.ibm.com/tpf/pubs/tpfpubs.htm</a>.)</p>
    </div>

    <h3>Example 1</h3>

    <div style="margin-left: 2em">
      <p><tt>zfile httpd -v</tt></p>

      <p><tt>FILE0001I 11.43.09 START OF DISPLAY FROM httpd
      -v<br />
       Server version: Apache/1.3.20 (TPF)<br />
       Server built: May 23 2001 09:39:22<br />
       END OF DISPLAY</tt></p>
    </div>

    <h3>Example 2</h3>

    <div style="margin-left: 2em">
      <p><tt>zfile httpd -t -f
      /usr/local/apache/conf/httpd.conf.new</tt></p>

      <p><tt>FILE0002I 11.47.26 START OF ERROR DISPLAY FROM httpd
      -t ...<br />
       Syntax OK<br />
       END OF DISPLAY</tt></p>
    </div>
    <a id="porting_notes" name="porting_notes"></a> 

    <center>
      <h2>Porting Notes</h2>
    </center>

    <h3>Changes made due to differences between UNIX and TPF's
    process models:</h3>

    <ul>
      <li><b>Signals</b>: On TPF a signal that is sent to a process
      remains unhandled until the process explicitly requests that
      signals be handled using the <tt>tpf_process_signals()</tt>
      function. Additionally, the default action for an alarm on
      TPF is to take an OPR-7777 dump and exit. (On UNIX the
      default is the equivalent of <tt>exit()</tt> with no dump
      taken.) These differences necessitated a few
      modifications:&nbsp;</li>

      <li style="list-style: none">
        <br />
         &nbsp; 

        <ul>
          <li>bypass the use of <tt>ap_block_alarms()</tt> &amp;
          <tt>ap_unblock_alarms()</tt>&nbsp;</li>

          <li>add <tt>tpf_process_signals()</tt> calls&nbsp;</li>

          <li>add <tt>select()</tt> calls to prevent
          blocking.&nbsp;</li>
        </ul>
      </li>
    </ul>

    <h3>Find that function...</h3>
    Some simple functions &amp; definitions initially needed to be
    added on TPF, such as <tt>FD_SET()</tt>. We've put these in
    src/os/tpf/os.h for now.&nbsp; 

    <h3>EBCDIC changes:</h3>
    TPF-specific conversion tables between US-ASCII and EBCDIC
    (character set IBM-1047 to be exact) were created.&nbsp; 

    <h3>Miscellaneous, minor changes:</h3>
    Various minor changes (such as casting) were made due to
    differences in how some functions are implemented on
    TPF.&nbsp;<br />
     
    <hr />

    <center>
      [ <a href="#top">top</a>&nbsp; | <a
      href="#configuration_files">Configuration Files</a>&nbsp; |
      <a href="#whats_available">What's Available</a>&nbsp; | <a
      href="#cgi">CGI Scripts</a>&nbsp; | <a
      href="#options">Options</a>&nbsp; | <a
      href="#porting_notes">Porting Notes</a> ]
    </center>
  </body>
</html>
d205 2
@


1.1.1.2
log
@import apache 1.3.27 and mod_ssl 2.8.11
@
text
@d20 5
a24 6
      [ <a href="#configuration_files">Configuration&nbsp;Files</a>
      | <a href="#whats_available">What's&nbsp;Available</a>
      | <a href="#cgi">CGI&nbsp;Scripts</a>
      | <a href="#options">Options</a>
      | <a href="#syslog">Syslog</a>
      | <a href="#porting_notes">Porting&nbsp;Notes</a>&nbsp;]
a209 3
      <li>syslog <em>(requires PUT13; see <a href="install-tpf.html#syslog">install</a>
         and <a href="#syslog">usage</a> instructions)&nbsp;</em></li>

a227 2
      <li>lib/sdbm&nbsp;</li>

d353 1
a353 1
      <h2>How to Use Apache's "Dash" Options</h2>
d356 4
a359 16
    <h3>Overview of Apache's "dash" options:</h3>

    <p>Apache can be invoked with various options, such as "-f".
       Some of these options display information about the server or perform syntax checks
       but they don't actually start the server.
       These "information only" options are useful with TPF's ZFILE command line feature:
       -h, -l, -L, -S, -t, -T, -v, and -V.
       </p>

    <p>Another option, -X, is used when actually running the server.
       It is passed to Apache through the ZINET XPARM field since ZINET is the only way to start the server on TPF.</p>

    <p>A third group of options apply to both the informational displays (ZFILE) and
       running the server (ZINET XPARM): -d, -D and -f.</p>

    <p>The rest of Apache's options are either not applicable or are not supported on TPF.</p>
d361 1
a361 3
    <p>Using dash options requires PJ27277 which shipped on PUT13.</p>

    <h3>Table of supported Apache options</h3>
d364 42
a405 69
    <table border="1" cellpadding="5">
    <tr><td><b>Option&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b>
        </td><td><b>ZFILE</b></td>
        <td><b>ZINET</b>
        </td><td><b>Description</b></td></tr>

    <tr><td valign="top"><b>-d</b> <i>path</i></td>
        <td valign="top">ZFILE</td>
        <td valign="top">ZINET</td>
        <td valign="top">Set the initial value for the ServerRoot directive.</td></tr>

    <tr><td valign="top"><b>-D</b> <i>define</i></td>
        <td valign="top">ZFILE</td>
        <td valign="top">ZINET</td>
        <td valign="top">Set a configuration parameter which can be used with &lt;IfDefine&gt;...&lt;/IfDefine&gt; sections in the configuration file to conditionally skip or process commands.</td></tr>

    <tr><td valign="top"><b>-f</b> <i>filename</i></td>
        <td valign="top">ZFILE</td>
        <td valign="top">ZINET</td>
        <td valign="top">Use an alternate configuration file instead of the default conf/httpd.conf file.</td></tr>

    <tr><td valign="top"><b>-h</b></td>
        <td valign="top">ZFILE</td>
        <td valign="top">&nbsp;</td>
        <td valign="top">List a short summary of available command line options then exit.
            Note that this outputs all options, not just those supported on TPF.</td></tr>

    <tr><td valign="top"><b>-l</b></td>
        <td valign="top">ZFILE</td>
        <td valign="top">&nbsp;</td>
        <td valign="top">List modules compiled into the server then exit.</td></tr>

    <tr><td valign="top"><b>-L</b></td>
        <td valign="top">ZFILE</td>
        <td valign="top">&nbsp;</td>
        <td valign="top">List available configuration directives then exit. Note that this outputs all configuration directives, not just those supported on TPF.</td></tr>

    <tr><td valign="top"><b>-S</b></td>
        <td valign="top">ZFILE</td>
        <td valign="top">&nbsp;</td>
        <td valign="top">Show the settings as parsed from the configuration file then exit.  Currently Apache only shows the virtual host settings.</td></tr>

    <tr><td valign="top"><b>-t</b></td>
        <td valign="top">ZFILE</td>
        <td valign="top">&nbsp;</td>
        <td valign="top">Run syntax tests for configuration files with document root checks then exit.</td></tr>

    <tr><td valign="top"><b>-T</b></td>
        <td valign="top">ZFILE</td>
        <td valign="top">&nbsp;</td>
        <td valign="top">Run syntax tests for configuration files <i>without</i> document root checks then exit.</td></tr>

    <tr><td valign="top"><b>-v</b></td>
        <td valign="top">ZFILE</td>
        <td valign="top">&nbsp;</td>
        <td valign="top">Show the version number then exit.</td></tr>

    <tr><td valign="top"><b>-V</b></td>
        <td valign="top">ZFILE</td>
        <td valign="top">&nbsp;</td>
        <td valign="top">Show the version number and various compile settings then exit.</td></tr>

    <tr><td valign="top"><b>-X</b></td>
        <td valign="top">&nbsp;</td>
        <td valign="top">ZINET</td>
        <td valign="top">Run in single-process mode for internal debugging purposes only.
                       The parent process does not fork any children.</td></tr>

    </table>
d407 2
a408 2
    <p>See <a href="http://httpd.apache.org/docs/programs/httpd.html">http://httpd.apache.org/docs/programs/httpd.html</a>
       for more information about these command line options.</p>
d411 1
a411 1
    <h3>Setup for ZFILE examples</h3>
d434 1
d442 1
a442 1
    <h3>ZFILE example 1</h3>
d454 1
a454 1
    <h3>ZFILE example 2</h3>
d458 1
a458 1
      /usr/local/apache/conf/alt.conf</tt></p>
a464 58

    <h3>ZINET XPARM example</h3>
    <div style="margin-left: 2em">

       This example uses an alternate configuration file called /usr/local/apache/conf/alt.conf.<br />
       Transfer the alternate configuration file to your TPF test system.<br />
       <tt>zinet add s-apache pgm-chta model-daemon user-root xparm--f conf/alt.conf</tt><br />
       <tt>zinet start s-apache</tt>

      <p>(See "<em>ZINET ADD-Add an Internet Server Application Entry</em>" and
          "<em>ZINET ALTER-Change an Internet Server Application Entry</em>" in
          the <em>Operations</em> guide for more information about using the XPARM field:
          <a href="http://www.ibm.com/tpf/pubs/tpfpubs.htm">http://www.ibm.com/tpf/pubs/tpfpubs.htm</a>.)</p>
    </div>


    <a id="syslog" name="syslog"></a> 

    <center>
      <h2>Syslog Daemon</h2>
    </center>

    <h3>Syslog overview:</h3>

 <p>The syslog daemon is a server process that provides a message logging facility for application and system processes.
    It can be used to write messages to log files or to tapes.
    See <em>TPF Transmission Control Protocol/Internet Protocol</em> for detailed information about using the syslog daemon on TPF:
    <a href="http://www.ibm.com/tpf/pubs/tpfpubs.htm">http://www.ibm.com/tpf/pubs/tpfpubs.htm</a>.
    And see the Apache <a href="http://httpd.apache.org/docs/mod/core.html#errorlog">ErrorLog directive documentation</a>
    for details on how to use syslog with Apache.</p>

 <p>Syslog capabilities were added with PJ27214 which shipped with PUT13.
    You must follow the <a href="install-tpf.html#syslog">syslog specific installation instructions</a>
    in order to have the option of using syslog with Apache.</p>


    <h3>Tips on using syslog with your Apache error log:</h3>

 <p>This section provides some tips on using syslog with Apache.
    It is not meant to replace the syslog documentation in the TPF TCP/IP publication.</p>
 
 <ul>
<li>The syslog daemon will not create files.  If you are logging to a file (as specified in the <tt>syslog.conf</tt> configuration file) that file must already exist and
    have permissions that allow the syslog daemon to write to it.</li>
<li>You must restart the syslog daemon for it to recognize changes to its <tt>syslog.conf</tt> configuration file.</li>
<li>The syslog daemon must be active prior to starting Apache.</li>
<li>To indicate you want to use syslog with your Apache error log add the following directive to your <tt>httpd.conf</tt> file:
    "<tt>ErrorLog&nbsp;syslog:</tt><i>facility</i>" where <i>facility</i> is "local0" through "local7".</li>
<li>Apache will default the facility to "local7" if you omit the facility name from the ErrorLog directive (that is "<tt>ErrorLog&nbsp;syslog</tt>").</li>
<li>The syslog facility name must be one that is recognized by both Apache and the syslog.h header file.
    The facility names "local0" through "local7" are explicitly set aside for your use.</li>
<li>Although "local0" through "local7" are recommended user facility names, here is the complete list of names recognized
    by both Apache and TPF's syslog.h:  auth, cron, daemon, kern, local0, local1, local2, local3, local4, local5, local6, local7,
    lpr, mail, news, syslog, user, and uucp.</li>
<li>You won't see the normal Apache startup/shutdown messages when you use syslog with your Apache error log.</li>
<li>Syslog does not support TCP/IP Offload devices (ZCLAW)</li>
</ul>

d517 6
a522 7
      [ <a href="#top">top</a>
      | <a href="#configuration_files">Configuration&nbsp;Files</a>
      | <a href="#whats_available">What's&nbsp;Available</a>
      | <a href="#cgi">CGI&nbsp;Scripts</a>
      | <a href="#options">Options</a>
      | <a href="#syslog">Syslog</a>
      | <a href="#porting_notes">Porting&nbsp;Notes</a>&nbsp;]
@


1.1.1.3
log
@import apache 1.3.28 and mod_ssl 2.8.15
@
text
@a53 3

    <p>Apache on TPF does not support listening on multiple ports.</p>

d117 1
a117 1
      with host <u>names</u> (versus ip addresses) requires
@


