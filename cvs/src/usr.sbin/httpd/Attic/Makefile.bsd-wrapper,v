head	1.75;
access;
symbols
	OPENBSD_5_5:1.73.0.4
	OPENBSD_5_5_BASE:1.73
	OPENBSD_5_4:1.72.0.4
	OPENBSD_5_4_BASE:1.72
	OPENBSD_5_3:1.72.0.2
	OPENBSD_5_3_BASE:1.72
	OPENBSD_5_2:1.71.0.4
	OPENBSD_5_2_BASE:1.71
	OPENBSD_5_1_BASE:1.71
	OPENBSD_5_1:1.71.0.2
	OPENBSD_5_0:1.70.0.2
	OPENBSD_5_0_BASE:1.70
	OPENBSD_4_9:1.69.0.8
	OPENBSD_4_9_BASE:1.69
	OPENBSD_4_8:1.69.0.6
	OPENBSD_4_8_BASE:1.69
	OPENBSD_4_7:1.69.0.2
	OPENBSD_4_7_BASE:1.69
	OPENBSD_4_6:1.69.0.4
	OPENBSD_4_6_BASE:1.69
	OPENBSD_4_5:1.68.0.4
	OPENBSD_4_5_BASE:1.68
	OPENBSD_4_4:1.68.0.2
	OPENBSD_4_4_BASE:1.68
	OPENBSD_4_3:1.64.0.2
	OPENBSD_4_3_BASE:1.64
	OPENBSD_4_2:1.61.0.4
	OPENBSD_4_2_BASE:1.61
	OPENBSD_4_1:1.61.0.2
	OPENBSD_4_1_BASE:1.61
	OPENBSD_4_0:1.59.0.2
	OPENBSD_4_0_BASE:1.59
	OPENBSD_3_9:1.57.0.2
	OPENBSD_3_9_BASE:1.57
	OPENBSD_3_8:1.55.0.2
	OPENBSD_3_8_BASE:1.55
	OPENBSD_3_7:1.47.0.4
	OPENBSD_3_7_BASE:1.47
	OPENBSD_3_6:1.47.0.2
	OPENBSD_3_6_BASE:1.47
	OPENBSD_3_5:1.46.0.2
	OPENBSD_3_5_BASE:1.46
	OPENBSD_3_4:1.41.0.2
	OPENBSD_3_4_BASE:1.41
	OPENBSD_3_3:1.39.0.2
	OPENBSD_3_3_BASE:1.39
	OPENBSD_3_2:1.34.0.2
	OPENBSD_3_2_BASE:1.34
	OPENBSD_3_1:1.26.0.2
	OPENBSD_3_1_BASE:1.26
	OPENBSD_3_0:1.24.0.2
	OPENBSD_3_0_BASE:1.24
	OPENBSD_2_9_BASE:1.22
	OPENBSD_2_9:1.22.0.2
	OPENBSD_2_8:1.15.0.2
	OPENBSD_2_8_BASE:1.15
	OPENBSD_2_7:1.13.0.2
	OPENBSD_2_7_BASE:1.13
	OPENBSD_2_6:1.9.0.2
	OPENBSD_2_6_BASE:1.9;
locks; strict;
comment	@# @;


1.75
date	2014.04.22.14.47.23;	author henning;	state dead;
branches;
next	1.74;

1.74
date	2014.04.15.20.55.42;	author miod;	state Exp;
branches;
next	1.73;

1.73
date	2013.08.06.19.05.57;	author miod;	state Exp;
branches;
next	1.72;

1.72
date	2012.08.24.07.57.54;	author sthen;	state Exp;
branches;
next	1.71;

1.71
date	2012.01.29.15.05.05;	author jmc;	state Exp;
branches;
next	1.70;

1.70
date	2011.06.23.22.46.12;	author schwarze;	state Exp;
branches;
next	1.69;

1.69
date	2009.03.10.10.56.40;	author martynas;	state Exp;
branches;
next	1.68;

1.68
date	2008.07.11.00.12.35;	author martynas;	state Exp;
branches;
next	1.67;

1.67
date	2008.06.13.04.41.15;	author mbalmer;	state Exp;
branches;
next	1.66;

1.66
date	2008.06.07.01.59.36;	author jdixon;	state Exp;
branches;
next	1.65;

1.65
date	2008.05.09.08.06.27;	author mbalmer;	state Exp;
branches;
next	1.64;

1.64
date	2008.01.08.10.08.31;	author henning;	state Exp;
branches;
next	1.63;

1.63
date	2007.11.03.10.32.56;	author espie;	state Exp;
branches;
next	1.62;

1.62
date	2007.10.30.17.49.50;	author robert;	state Exp;
branches;
next	1.61;

1.61
date	2007.02.19.14.50.20;	author henning;	state Exp;
branches;
next	1.60;

1.60
date	2007.02.13.00.37.24;	author espie;	state Exp;
branches;
next	1.59;

1.59
date	2006.04.04.11.39.27;	author henning;	state Exp;
branches;
next	1.58;

1.58
date	2006.04.04.08.51.28;	author henning;	state Exp;
branches;
next	1.57;

1.57
date	2005.09.27.16.27.22;	author deraadt;	state Exp;
branches;
next	1.56;

1.56
date	2005.09.26.21.14.30;	author pedro;	state Exp;
branches;
next	1.55;

1.55
date	2005.08.12.18.40.52;	author naddy;	state Exp;
branches;
next	1.54;

1.54
date	2005.08.01.19.40.33;	author jmc;	state Exp;
branches;
next	1.53;

1.53
date	2005.07.29.23.57.17;	author jmc;	state Exp;
branches;
next	1.52;

1.52
date	2005.07.29.09.37.45;	author jmc;	state Exp;
branches;
next	1.51;

1.51
date	2005.07.28.19.37.16;	author jmc;	state Exp;
branches;
next	1.50;

1.50
date	2005.07.28.19.12.39;	author jmc;	state Exp;
branches;
next	1.49;

1.49
date	2005.07.27.21.00.33;	author jmc;	state Exp;
branches;
next	1.48;

1.48
date	2005.05.26.01.26.47;	author marcm;	state Exp;
branches;
next	1.47;

1.47
date	2004.06.07.04.17.13;	author brad;	state Exp;
branches;
next	1.46;

1.46
date	2004.02.27.17.36.18;	author deraadt;	state Exp;
branches;
next	1.45;

1.45
date	2004.02.11.23.15.50;	author deraadt;	state Exp;
branches;
next	1.44;

1.44
date	2004.02.11.17.43.44;	author drahn;	state Exp;
branches;
next	1.43;

1.43
date	2003.11.17.19.14.01;	author henning;	state Exp;
branches;
next	1.42;

1.42
date	2003.11.17.19.05.03;	author henning;	state Exp;
branches;
next	1.41;

1.41
date	2003.08.21.14.00.28;	author henning;	state Exp;
branches;
next	1.40;

1.40
date	2003.05.26.07.16.14;	author henning;	state Exp;
branches;
next	1.39;

1.39
date	2003.02.10.21.28.26;	author deraadt;	state Exp;
branches;
next	1.38;

1.38
date	2002.12.25.23.13.25;	author henning;	state Exp;
branches;
next	1.37;

1.37
date	2002.12.10.16.58.12;	author henning;	state Exp;
branches;
next	1.36;

1.36
date	2002.11.22.13.03.34;	author naddy;	state Exp;
branches;
next	1.35;

1.35
date	2002.10.07.21.00.58;	author henning;	state Exp;
branches;
next	1.34;

1.34
date	2002.09.18.16.34.52;	author henning;	state Exp;
branches;
next	1.33;

1.33
date	2002.09.09.12.09.50;	author henning;	state Exp;
branches;
next	1.32;

1.32
date	2002.09.09.11.44.58;	author henning;	state Exp;
branches;
next	1.31;

1.31
date	2002.07.22.18.17.50;	author henning;	state Exp;
branches;
next	1.30;

1.30
date	2002.07.20.00.16.21;	author henning;	state Exp;
branches;
next	1.29;

1.29
date	2002.07.19.23.39.44;	author henning;	state Exp;
branches;
next	1.28;

1.28
date	2002.07.17.11.17.00;	author henning;	state Exp;
branches;
next	1.27;

1.27
date	2002.07.08.00.38.32;	author brad;	state Exp;
branches;
next	1.26;

1.26
date	2002.03.17.04.52.14;	author brad;	state Exp;
branches;
next	1.25;

1.25
date	2002.02.15.22.49.15;	author beck;	state Exp;
branches;
next	1.24;

1.24
date	2001.10.03.01.24.22;	author millert;	state Exp;
branches;
next	1.23;

1.23
date	2001.08.06.18.45.03;	author brad;	state Exp;
branches;
next	1.22;

1.22
date	2001.04.13.19.01.55;	author beck;	state Exp;
branches;
next	1.21;

1.21
date	2001.03.29.10.21.22;	author beck;	state Exp;
branches;
next	1.20;

1.20
date	2001.01.31.04.00.43;	author brad;	state Exp;
branches;
next	1.19;

1.19
date	2001.01.30.21.04.06;	author niklas;	state Exp;
branches;
next	1.18;

1.18
date	2001.01.23.23.54.26;	author brad;	state Exp;
branches;
next	1.17;

1.17
date	2001.01.05.18.57.17;	author millert;	state Exp;
branches;
next	1.16;

1.16
date	2000.12.18.20.49.12;	author beck;	state Exp;
branches;
next	1.15;

1.15
date	2000.10.16.21.25.23;	author brad;	state Exp;
branches;
next	1.14;

1.14
date	2000.07.07.18.53.02;	author deraadt;	state Exp;
branches;
next	1.13;

1.13
date	2000.04.18.21.48.38;	author fgsch;	state Exp;
branches;
next	1.12;

1.12
date	2000.01.28.18.24.19;	author beck;	state Exp;
branches;
next	1.11;

1.11
date	2000.01.04.17.43.12;	author beck;	state Exp;
branches;
next	1.10;

1.10
date	99.11.19.23.06.20;	author brad;	state Exp;
branches;
next	1.9;

1.9
date	99.10.10.21.50.04;	author maja;	state Exp;
branches;
next	1.8;

1.8
date	99.10.07.21.57.34;	author beck;	state Exp;
branches;
next	1.7;

1.7
date	99.10.06.20.47.58;	author beck;	state Exp;
branches;
next	1.6;

1.6
date	99.10.02.00.06.50;	author beck;	state Exp;
branches;
next	1.5;

1.5
date	99.10.01.23.20.25;	author beck;	state Exp;
branches;
next	1.4;

1.4
date	99.10.01.21.54.19;	author beck;	state Exp;
branches;
next	1.3;

1.3
date	99.10.01.05.30.27;	author beck;	state Exp;
branches;
next	1.2;

1.2
date	99.09.30.21.26.45;	author beck;	state Exp;
branches;
next	1.1;

1.1
date	99.09.29.06.42.44;	author beck;	state Exp;
branches;
next	;


desc
@@


1.75
log
@this commit is really florian@@'s, since he's the one who made removal
of our forked apache possible by his work on nginx and slowcgi, but he
doesn't want it - so it is my pleasure to tedu it. I spent so much work
on chroot in it 10 years ago - and am very happy to see it go now, nginx
is a far better choice today.
Bye bye, Apache, won't miss you.
@
text
@# Build wrapper for Apache 
# $OpenBSD: Makefile.bsd-wrapper,v 1.74 2014/04/15 20:55:42 miod Exp $

# Our lndir is hacked; specify a full path to avoid potential conflicts
# with the one installed with X11.
LNDIR=	/usr/bin/lndir

.include <bsd.own.mk>

#    OpenBSD Layout
#<Layout OpenBSD>
#    prefix:        /var/www
#    exec_prefix:   /usr
#    bindir:        $exec_prefix/bin
#    sbindir:       $exec_prefix/sbin
#    libexecdir:    $exec_prefix/lib/apache/modules
#    mandir:        $exec_prefix/share/man
#    sysconfdir:    $prefix/conf
#    datadir:       $prefix
#    iconsdir:      $prefix/icons
#    htdocsdir:     $prefix/htdocs
#    manualdir:     $exec_prefix/share/doc/html/httpd
#    cgidir:        $prefix/cgi-bin
#    includedir:    $exec_prefix/lib/apache/include
#    localstatedir: $prefix
#    runtimedir:    $prefix/logs
#    logfiledir:    $prefix/logs
#    proxycachedir: $prefix/proxy
#</Layout>

HTTPD_PREFIX=		/var/www
HTTPD_EXEC_PREFIX=	/usr
HTTPD_BINDIR=		${HTTPD_EXEC_PREFIX}/bin
HTTPD_SBINDIR=		${HTTPD_EXEC_PREFIX}/sbin
HTTPD_LIBEXECDIR=	${HTTPD_EXEC_PREFIX}/lib/apache/modules
HTTPD_SYSCONFDIR=	${HTTPD_PREFIX}/conf
HTTPD_ICONSDIR=		${HTTPD_PREFIX}/icons
HTTPD_HTDOCSDIR=	${HTTPD_PREFIX}/htdocs
HTTPD_MANUALDIR=	${HTTPD_EXEC_PREFIX}/share/doc/html/httpd
HTTPD_INCLUDEDIR=	${HTTPD_EXEC_PREFIX}/lib/apache/include
HTTPD_RUNDIR=		${HTTPD_PREFIX}/logs
HTTPD_LOGDIR=		${HTTPD_PREFIX}/logs

CONFIG_ARGS=	--with-layout="OpenBSD" --enable-module="ssl" \
	--enable-module="keynote" \
	--enable-suexec --suexec-caller="www" \
	--suexec-docroot="${HTTPD_HTDOCSDIR}" \
	--suexec-logfile="/var/log/suexec_log" --suexec-userdir="public_html" \
	--suexec-uidmin="1000" --suexec-gidmin="1000" \
	--suexec-safepath="/usr/bin:/bin:/usr/local/bin" \
	--disable-rule=EXPAT --server-uid="www" --server-gid="www"

# This is stupid - to build a DSO module for Apache you not only need to
# --enable-shared, you need to --enable-module or --enable-shared doesn't
# do anything.

DSO_MODULE_ARGS=  \
	--enable-module=so \
	--enable-module=auth_anon \
	--enable-shared=auth_anon \
	--enable-module=expires \
	--enable-shared=expires \
	--enable-module=headers \
	--enable-shared=headers \
	--enable-module=auth_db \
	--enable-shared=auth_db \
	--enable-module=auth_dbm \
	--enable-shared=auth_dbm \
	--enable-module=auth_digest \
	--enable-shared=auth_digest \
	--enable-module=cern_meta \
	--enable-shared=cern_meta \
	--enable-module=define \
	--enable-shared=define \
	--enable-module=digest \
	--enable-shared=digest \
	--enable-module=info \
	--enable-shared=info \
	--enable-module=log_agent \
	--enable-shared=log_agent \
	--enable-module=log_referer \
	--enable-shared=log_referer \
	--enable-module=mime_magic \
	--enable-shared=mime_magic \
	--enable-module=mmap_static \
	--enable-shared=mmap_static \
	--enable-module=proxy \
	--enable-shared=proxy \
	--enable-module=rewrite \
	--enable-shared=rewrite \
	--enable-module=speling \
	--enable-shared=speling \
	--enable-module=unique_id \
	--enable-shared=unique_id \
	--enable-module=usertrack \
	--enable-shared=usertrack \
	--enable-module=vhost_alias \
	--enable-shared=vhost_alias \
	--enable-rule=INET6

INSTALL_MODULES=

# If you support dynamic loading, enable the so module, and build all the
# modules that come with Apache.

.if !defined(NOPIC)
CONFIG_ARGS+=  ${DSO_MODULE_ARGS}
INSTALL_MODULES= \
	src/modules/experimental/mod_mmap_static.so \
	src/modules/experimental/mod_auth_digest.so \
	src/modules/extra/mod_define.so \
	src/modules/proxy/libproxy.so \
	src/modules/standard/mod_vhost_alias.so \
	src/modules/standard/mod_log_agent.so \
	src/modules/standard/mod_info.so \
	src/modules/standard/mod_log_referer.so \
	src/modules/standard/mod_mime_magic.so \
	src/modules/standard/mod_speling.so \
	src/modules/standard/mod_rewrite.so \
	src/modules/standard/mod_auth_dbm.so \
	src/modules/standard/mod_auth_anon.so \
	src/modules/standard/mod_auth_db.so \
	src/modules/standard/mod_digest.so \
	src/modules/standard/mod_cern_meta.so \
	src/modules/standard/mod_usertrack.so \
	src/modules/standard/mod_unique_id.so \
	src/modules/standard/mod_expires.so \
	src/modules/standard/mod_headers.so
.endif

PERLPATH=	/usr/bin/perl

MUNGEDFILES =	${.OBJDIR}/src/ap/Makefile \
		${.OBJDIR}/src/include/ap_config_auto.h.new \
		${.OBJDIR}/src/lib/expat-lite/Makefile \
		${.OBJDIR}/src/lib/Makefile \
		${.OBJDIR}/src/main/Makefile \
		${.OBJDIR}/src/modules/experimental/Makefile \
		${.OBJDIR}/src/modules/extra/Makefile \
		${.OBJDIR}/src/modules/proxy/Makefile \
		${.OBJDIR}/src/modules/standard/Makefile \
		${.OBJDIR}/src/modules/keynote/Makefile \
		${.OBJDIR}/src/modules/ssl/Makefile \
		${.OBJDIR}/src/modules/ssl/ssl_expr_parse.c \
		${.OBJDIR}/src/modules/ssl/ssl_expr_parse.h \
		${.OBJDIR}/src/modules/ssl/ssl_expr_scan.c \
		${.OBJDIR}/src/modules/Makefile \
		${.OBJDIR}/src/os/unix/Makefile \
		${.OBJDIR}/src/regex/Makefile \
		${.OBJDIR}/src/support/Makefile \
		${.OBJDIR}/src/apaci \
		${.OBJDIR}/src/Makefile \
		${.OBJDIR}/src/Makefile.config \
		${.OBJDIR}/src/modules.c \
		${.OBJDIR}/src/Configuration.apaci \
		${.OBJDIR}/Makefile \
		${.OBJDIR}/config.status

BINFILES= 	src/support/htdigest src/support/htpasswd

SBINFILES= \
	src/httpd \
	src/support/logresolve src/support/rotatelogs src/support/suexec

MAN+=	src/support/dbmmanage.1 src/support/htdigest.1 src/support/htpasswd.1 \
	src/support/apachectl.8 src/support/logresolve.8 \
	httpd.8 src/support/rotatelogs.8 src/support/apxs.8 \
	src/support/suexec.8

INCFILES= \
	src/include/ap.h \
	src/include/ap_alloc.h  \
	src/include/ap_compat.h \
	src/include/ap_config.h \
	src/include/ap_config_auto.h \
	src/include/ap_ctx.h \
	src/include/ap_ctype.h \
	src/include/ap_hook.h \
	src/include/ap_md5.h \
	src/include/ap_mm.h \
	src/include/ap_mmn.h \
	src/include/ap_sha1.h \
	src/include/buff.h \
	src/include/compat.h \
	src/include/conf.h \
	src/include/explain.h \
	src/include/fnmatch.h \
	src/include/fdcache.h \
	src/include/http_conf_globals.h \
	src/include/http_config.h \
	src/include/http_core.h \
	src/include/http_log.h \
	src/include/http_main.h \
	src/include/http_protocol.h \
	src/include/http_request.h \
	src/include/http_vhost.h \
	src/include/httpd.h \
	src/include/multithread.h \
	src/include/rfc1413.h \
	src/include/scoreboard.h \
	src/include/util_date.h \
	src/include/util_md5.h \
	src/include/util_script.h \
	src/include/util_uri.h \
	src/os/unix/os-inline.c \
	src/os/unix/os.h \
	src/modules/ssl/mod_ssl.h \
	src/modules/ssl/ssl_expr.h \
	src/modules/ssl/ssl_util_ssl.h \
	src/modules/ssl/ssl_util_table.h

XMLFILES= \
	src/lib/expat-lite/asciitab.h \
	src/lib/expat-lite/hashtable.h \
	src/lib/expat-lite/iasciitab.h \
	src/lib/expat-lite/latin1tab.h \
	src/lib/expat-lite/nametab.h \
	src/lib/expat-lite/utf8tab.h \
	src/lib/expat-lite/xmldef.h \
	src/lib/expat-lite/xmlparse.h \
	src/lib/expat-lite/xmlrole.h \
	src/lib/expat-lite/xmltok.h \
	src/lib/expat-lite/xmltok_impl.h

MODCONFDIR= \
	modules \
	modules.sample

CONFFILES= \
	conf/httpd.conf conf/mime.types conf/magic

HTDOCS= \
	htdocs/apache_pb.gif htdocs/index.html htdocs/openbsdpower.gif \
	htdocs/blowfish.jpg htdocs/bsd_small.gif htdocs/lock.gif \
	htdocs/logo23.jpg htdocs/logo24.jpg htdocs/smalltitle.gif \
	htdocs/openbsd_pb.gif htdocs/mod_ssl_sb.gif htdocs/openssl_ics.gif

CGIFILES=	cgi-bin/printenv cgi-bin/test-cgi	

MANUALFILES= \
	manual/howto/auth.html \
	manual/howto/htaccess.html \
	manual/howto/cgi.html \
	manual/howto/ssi.html \
	manual/LICENSE \
	manual/bind.html \
	manual/configuring.html \
	manual/content-negotiation.html \
	manual/custom-error.html \
	manual/dns-caveats.html \
	manual/dso.html \
	manual/env.html \
	manual/handler.html \
	manual/index.html \
	manual/invoking.html \
	manual/ipv6.html \
	manual/keepalive.html \
	manual/location.html \
	manual/logs.html \
	manual/images/apache_header.gif \
	manual/images/apache_pb.gif \
	manual/images/custom_errordocs.gif \
	manual/images/feather.jpg \
	manual/images/home.gif \
	manual/images/index.gif \
	manual/images/mod_rewrite_fig1.fig \
	manual/images/mod_rewrite_fig1.gif \
	manual/images/mod_rewrite_fig2.fig \
	manual/images/mod_rewrite_fig2.gif \
	manual/images/mod_ssl_sb.gif \
	manual/images/openssl_ics.gif \
	manual/images/pixel.gif \
	manual/images/sub.gif \
	manual/multilogs.html \
	manual/process-model.html \
	manual/misc/API.html \
	manual/misc/FAQ.html \
	manual/misc/custom_errordocs.html \
	manual/misc/descriptors.html \
	manual/misc/fin_wait_2.html \
	manual/misc/howto.html \
	manual/misc/index.html \
	manual/misc/known_client_problems.html \
	manual/misc/perf-bsd44.html \
	manual/misc/perf-tuning.html \
	manual/misc/perf.html \
	manual/misc/rewriteguide.html \
	manual/misc/security_tips.html \
	manual/misc/tutorials.html \
	manual/sections.html \
	manual/server-wide.html \
	manual/sitemap.html \
	manual/stopping.html \
	manual/suexec.html \
	manual/mod/mod_ssl/index.html \
	manual/mod/mod_ssl/ssl_compat.gfont000.gif \
	manual/mod/mod_ssl/ssl_compat.html \
	manual/mod/mod_ssl/ssl_cover_logo.jpg \
	manual/mod/mod_ssl/ssl_cover_title.jpg \
	manual/mod/mod_ssl/ssl_faq.gfont000.gif \
	manual/mod/mod_ssl/ssl_faq.html \
	manual/mod/mod_ssl/ssl_glossary.html \
	manual/mod/mod_ssl/ssl_howto.gfont000.gif \
	manual/mod/mod_ssl/ssl_howto.html \
	manual/mod/mod_ssl/ssl_intro.gfont000.gif \
	manual/mod/mod_ssl/ssl_intro.html \
	manual/mod/mod_ssl/ssl_intro_fig1.gif \
	manual/mod/mod_ssl/ssl_intro_fig2.gif \
	manual/mod/mod_ssl/ssl_intro_fig3.gif \
	manual/mod/mod_ssl/ssl_overview.gfont000.gif \
	manual/mod/mod_ssl/ssl_overview.html \
	manual/mod/mod_ssl/ssl_overview_fig1.gif \
	manual/mod/mod_ssl/ssl_reference.gfont000.gif \
	manual/mod/mod_ssl/ssl_reference.html \
	manual/mod/mod_ssl/ssl_template.head-chapter.gif \
	manual/mod/mod_ssl/ssl_template.head-num-1.gif \
	manual/mod/mod_ssl/ssl_template.head-num-2.gif \
	manual/mod/mod_ssl/ssl_template.head-num-3.gif \
	manual/mod/mod_ssl/ssl_template.head-num-4.gif \
	manual/mod/mod_ssl/ssl_template.head-num-5.gif \
	manual/mod/mod_ssl/ssl_template.head-num-6.gif \
	manual/mod/mod_ssl/ssl_template.head-num-7.gif \
	manual/mod/mod_ssl/ssl_template.imgdot-1x1-000000.gif \
	manual/mod/mod_ssl/ssl_template.imgdot-1x1-transp.gif \
	manual/mod/mod_ssl/ssl_template.navbut-next-n.gif \
	manual/mod/mod_ssl/ssl_template.navbut-next-s.gif \
	manual/mod/mod_ssl/ssl_template.navbut-prev-n.gif \
	manual/mod/mod_ssl/ssl_template.navbut-prev-s.gif \
	manual/mod/mod_ssl/ssl_template.title-abstract.gif \
	manual/mod/mod_ssl/ssl_template.title-compat.gif \
	manual/mod/mod_ssl/ssl_template.title-faq.gif \
	manual/mod/mod_ssl/ssl_template.title-gloss.gif \
	manual/mod/mod_ssl/ssl_template.title-howto.gif \
	manual/mod/mod_ssl/ssl_template.title-intro.gif \
	manual/mod/mod_ssl/ssl_template.title-over.gif \
	manual/mod/mod_ssl/ssl_template.title-preface.gif \
	manual/mod/mod_ssl/ssl_template.title-ref.gif \
	manual/mod/mod_ssl/ssl_template.title-toc.gif \
	manual/mod/mod_ssl/ssl_template.title-tutor.gif \
	manual/mod/core.html \
	manual/mod/directive-dict.html \
	manual/mod/directives.html \
	manual/mod/index-bytype.html \
	manual/mod/index.html \
	manual/mod/mod_access.html \
	manual/mod/mod_actions.html \
	manual/mod/mod_alias.html \
	manual/mod/mod_asis.html \
	manual/mod/mod_auth.html \
	manual/mod/mod_auth_anon.html \
	manual/mod/mod_auth_db.html \
	manual/mod/mod_auth_dbm.html \
	manual/mod/mod_auth_digest.html \
	manual/mod/mod_autoindex.html \
	manual/mod/mod_cern_meta.html \
	manual/mod/mod_cgi.html \
	manual/mod/mod_define.html \
	manual/mod/mod_digest.html \
	manual/mod/mod_dir.html \
	manual/mod/mod_env.html \
	manual/mod/mod_expires.html \
	manual/mod/mod_headers.html \
	manual/mod/mod_imap.html \
	manual/mod/mod_include.html \
	manual/mod/mod_info.html \
	manual/mod/mod_log_agent.html \
	manual/mod/mod_log_common.html \
	manual/mod/mod_log_config.html \
	manual/mod/mod_log_referer.html \
	manual/mod/mod_mime.html \
	manual/mod/mod_mime_magic.html \
	manual/mod/mod_mmap_static.html \
	manual/mod/mod_negotiation.html \
	manual/mod/mod_proxy.html \
	manual/mod/mod_rewrite.html \
	manual/mod/mod_setenvif.html \
	manual/mod/mod_so.html \
	manual/mod/mod_speling.html \
	manual/mod/mod_status.html \
	manual/mod/mod_unique_id.html \
	manual/mod/mod_userdir.html \
	manual/mod/mod_usertrack.html \
	manual/mod/mod_vhost_alias.html \
	manual/mod/module-dict.html \
	manual/urlmapping.html \
	manual/programs/ab.html \
	manual/programs/apachectl.html \
	manual/programs/apxs.html \
	manual/programs/dbmmanage.html \
	manual/programs/htdigest.html \
	manual/programs/htpasswd.html \
	manual/programs/httpd.html \
	manual/programs/index.html \
	manual/programs/logresolve.html \
	manual/programs/other.html \
	manual/programs/rotatelogs.html \
	manual/programs/suexec.html \
	manual/vhosts/details.html \
	manual/vhosts/examples.html \
	manual/vhosts/fd-limits.html \
	manual/vhosts/host.html \
	manual/vhosts/index.html \
	manual/vhosts/ip-based.html \
	manual/vhosts/mass.html \
	manual/vhosts/name-based.html \
	manual/vhosts/vhosts-in-depth.html \
	manual/vhosts/virtual-host.html
	
ICONFILES= \
	icons/back.gif \
	icons/README \
	icons/a.gif \
	icons/a.png \
	icons/small/README.txt \
	icons/small/back.gif \
	icons/small/back.png \
	icons/small/binary.gif \
	icons/small/binary.png \
	icons/small/binhex.gif \
	icons/small/binhex.png \
	icons/small/blank.gif \
	icons/small/blank.png \
	icons/small/broken.gif \
	icons/small/broken.png \
	icons/small/burst.gif \
	icons/small/burst.png \
	icons/small/comp1.gif \
	icons/small/comp1.png \
	icons/small/comp2.gif \
	icons/small/comp2.png \
	icons/small/compressed.gif \
	icons/small/compressed.png \
	icons/small/continued.gif \
	icons/small/continued.png \
	icons/small/dir.gif \
	icons/small/dir.png \
	icons/small/dir2.gif \
	icons/small/dir2.png \
	icons/small/doc.gif \
	icons/small/doc.png \
	icons/small/forward.gif \
	icons/small/forward.png \
	icons/small/generic.gif \
	icons/small/generic.png \
	icons/small/generic2.gif \
	icons/small/generic2.png \
	icons/small/generic3.gif \
	icons/small/generic3.png \
	icons/small/image.gif \
	icons/small/image.png \
	icons/small/image2.gif \
	icons/small/image2.png \
	icons/small/index.gif \
	icons/small/index.png \
	icons/small/key.gif \
	icons/small/key.png \
	icons/small/movie.gif \
	icons/small/movie.png \
	icons/small/patch.gif \
	icons/small/patch.png \
	icons/small/ps.gif \
	icons/small/ps.png \
	icons/small/rainbow.gif \
	icons/small/rainbow.png \
	icons/small/sound.gif \
	icons/small/sound.png \
	icons/small/sound2.gif \
	icons/small/sound2.png \
	icons/small/tar.gif \
	icons/small/tar.png \
	icons/small/text.gif \
	icons/small/text.png \
	icons/small/transfer.gif \
	icons/small/transfer.png \
	icons/small/unknown.gif \
	icons/small/unknown.png \
	icons/small/uu.gif \
	icons/small/uu.png \
	icons/alert.black.gif \
	icons/alert.black.png \
	icons/alert.red.gif \
	icons/alert.red.png \
	icons/apache_pb.gif \
	icons/apache_pb.png \
	icons/back.png \
	icons/ball.gray.gif \
	icons/ball.gray.png \
	icons/ball.red.gif \
	icons/ball.red.png \
	icons/binary.gif \
	icons/binary.png \
	icons/binhex.gif \
	icons/binhex.png \
	icons/blank.gif \
	icons/blank.png \
	icons/bomb.gif \
	icons/bomb.png \
	icons/box1.gif \
	icons/box1.png \
	icons/box2.gif \
	icons/box2.png \
	icons/broken.gif \
	icons/broken.png \
	icons/burst.gif \
	icons/burst.png \
	icons/c.gif \
	icons/c.png \
	icons/comp.blue.gif \
	icons/comp.blue.png \
	icons/comp.gray.gif \
	icons/comp.gray.png \
	icons/compressed.gif \
	icons/compressed.png \
	icons/continued.gif \
	icons/continued.png \
	icons/dir.gif \
	icons/dir.png \
	icons/diskimg.gif \
	icons/diskimg.png \
	icons/dvi.gif \
	icons/down.gif \
	icons/down.png \
	icons/dvi.png \
	icons/f.gif \
	icons/f.png \
	icons/folder.gif \
	icons/folder.open.gif \
	icons/folder.open.png \
	icons/folder.png \
	icons/folder.sec.gif \
	icons/folder.sec.png \
	icons/forward.gif \
	icons/forward.png \
	icons/generic.gif \
	icons/generic.png \
	icons/generic.red.gif \
	icons/generic.red.png \
	icons/generic.sec.gif \
	icons/generic.sec.png \
	icons/hand.right.gif \
	icons/hand.right.png \
	icons/hand.up.gif \
	icons/hand.up.png \
	icons/icon.sheet.gif \
	icons/icon.sheet.png \
	icons/image1.gif \
	icons/image1.png \
	icons/image2.gif \
	icons/image2.png \
	icons/image3.gif \
	icons/image3.png \
	icons/index.gif \
	icons/index.png \
	icons/layout.gif \
	icons/layout.png \
	icons/left.gif \
	icons/left.png \
	icons/link.gif \
	icons/link.png \
	icons/movie.gif \
	icons/movie.png \
	icons/p.gif \
	icons/p.png \
	icons/patch.gif \
	icons/patch.png \
	icons/pdf.gif \
	icons/pdf.png \
	icons/pie0.gif \
	icons/pie0.png \
	icons/pie1.gif \
	icons/pie1.png \
	icons/pie2.gif \
	icons/pie2.png \
	icons/pie3.gif \
	icons/pie3.png \
	icons/pie4.gif \
	icons/pie4.png \
	icons/pie5.gif \
	icons/pie5.png \
	icons/pie6.gif \
	icons/pie6.png \
	icons/pie7.gif \
	icons/pie7.png \
	icons/pie8.gif \
	icons/pie8.png \
	icons/portal.gif \
	icons/portal.png \
	icons/ps.gif \
	icons/ps.png \
	icons/quill.gif \
	icons/quill.png \
	icons/right.gif \
	icons/right.png \
	icons/screw1.gif \
	icons/screw1.png \
	icons/screw2.gif \
	icons/screw2.png \
	icons/script.gif \
	icons/script.png \
	icons/sound1.gif \
	icons/sound1.png \
	icons/sound2.gif \
	icons/sound2.png \
	icons/sphere1.gif \
	icons/sphere1.png \
	icons/sphere2.gif \
	icons/sphere2.png \
	icons/tar.gif \
	icons/tar.png \
	icons/tex.gif \
	icons/tex.png \
	icons/text.gif \
	icons/text.png \
	icons/transfer.gif \
	icons/transfer.png \
	icons/unknown.gif \
	icons/unknown.png \
	icons/up.gif \
	icons/up.png \
	icons/uu.gif \
	icons/uu.png \
	icons/uuencoded.gif \
	icons/uuencoded.png \
	icons/world1.gif \
	icons/world1.png \
	icons/world2.gif \
	icons/world2.png

.include <bsd.own.mk>

all: 	${.OBJDIR}/config.status
	@@cd ${.OBJDIR} && ${MAKE}

BEFOREMAN=${.OBJDIR}/config.status

EXTRA_LDFLAGS=-lpthread

${.OBJDIR}/config.status : ${.OBJDIR}/config.layout 
	@@cd ${.OBJDIR} && CC="${CC}" LD_SHLIB="${CC}" \
		EXTRA_LDFLAGS="${EXTRA_LDFLAGS}" OPTIM="${CFLAGS} ${COPTS}" \
		PATH="/sbin:/usr/sbin:/bin:/usr/bin" \
			sh configure ${CONFIG_ARGS}
	diff -u ${.CURDIR}/src/include/ap_config_auto.h ${.OBJDIR}/src/include/ap_config_auto.h.new

.if !exists(${.OBJDIR}/config.layout)
${.OBJDIR}/config.layout: ${.CURDIR}/config.layout
	${LNDIR} -s -e obj -e obj.${MACHINE_ARCH} -e Makefile.bsd-wrapper ${.CURDIR}
.endif


includes:
	@@-for i in ${INCFILES}; do \
		j=`basename $$i`; \
		echo "Installing ${DESTDIR}${HTTPD_INCLUDEDIR}/$$j"; \
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 444 \
		    ${.CURDIR}/$$i ${DESTDIR}${HTTPD_INCLUDEDIR}; \
	done
	@@-for i in ${XMLFILES}; do \
		j=`basename $$i`; \
		echo "Installing ${DESTDIR}${HTTPD_INCLUDEDIR}/xml/$$j"; \
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 444 \
		    ${.CURDIR}/$$i ${DESTDIR}${HTTPD_INCLUDEDIR}/xml; \
	done

install: maninstall htmlinstall
	@@-for i in ${BINFILES}; do \
		j=`basename $$i`; \
		echo "Installing ${DESTDIR}${HTTPD_BINDIR}/$$j"; \
		${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP} -g ${BINGRP} \
		    -m 555 ${.OBJDIR}/$$i ${DESTDIR}${HTTPD_BINDIR}; \
	done
	@@-for i in ${SBINFILES}; do \
		j=`basename $$i`; \
		echo "Installing ${DESTDIR}${HTTPD_SBINDIR}/$$j"; \
		${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP} -g ${BINGRP} \
		    -m 555 ${.OBJDIR}/$$i ${DESTDIR}${HTTPD_SBINDIR}; \
	done
	@@-for i in ${INSTALL_MODULES}; do \
		j=`basename $$i`; \
		echo "Installing ${DESTDIR}${HTTPD_LIBEXECDIR}/$$j"; \
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 444 \
		    ${.OBJDIR}/$$i ${DESTDIR}${HTTPD_LIBEXECDIR}; \
	done
	@@d=`mktemp -d /tmp/httpdXXXXXXXXXX`; \
	echo "Installing ${DESTDIR}${HTTPD_SBINDIR}/apxs"; \
	j="sed -e 's;^#!/.*;#!${PERLPATH};' \
		-e 's;\@@prefix\@@;${HTTPD_PREFIX};' \
		-e 's;\@@sbindir\@@;${HTTPD_SBINDIR};' \
		-e 's;\@@libexecdir\@@;${HTTPD_LIBEXECDIR};' \
		-e 's;\@@includedir\@@;${HTTPD_INCLUDEDIR};' \
		-e 's;\@@sysconfdir\@@;${HTTPD_SYSCONFDIR};' \
		< ${.OBJDIR}/src/support/apxs > $$d/apxs && \
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 555 \
		$$d/apxs ${DESTDIR}${HTTPD_SBINDIR}"; \
		echo $$j; \
		eval $$j; \
	echo "Installing ${DESTDIR}${HTTPD_SBINDIR}/apachectl"; \
	j="sed -e 's;PIDFILE=.*;PIDFILE=${HTTPD_RUNDIR}/httpd.pid;' \
		-e 's;HTTPD=.*;HTTPD=${HTTPD_SBINDIR}/httpd;' \
		< ${.OBJDIR}/src/support/apachectl > $$d/apachectl && \
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 555 \
		$$d/apachectl ${DESTDIR}${HTTPD_SBINDIR}"; \
		echo $$j; \
		eval $$j; \
	echo "Installing ${DESTDIR}${HTTPD_BINDIR}/dbmmanage"; \
	j="sed -e 's;^#!/.*;#!${PERLPATH};' \
		< ${.OBJDIR}/src/support/dbmmanage > $$d/dbmmanage && \
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 555 \
		$$d/dbmmanage ${DESTDIR}${HTTPD_BINDIR}"; \
		echo $$j; \
		eval $$j; \
	rm -rf $$d

.if ${.OBJDIR} == ${.CURDIR}
clean:
	-@@cd ${.OBJDIR} && rm -f ${MUNGEDFILES} && ${MAKE} clean
.else
clean:
	@@cd ${.OBJDIR} && find . \! -type d -print0 | xargs -0r rm
.endif

cleandir: clean

prereq:
# nothing left

test:
	# Nothing here so far...

depend:
	# Nothing here so far...

lint:
	# Nothing here so far...

tags:
	# Nothing here so far...

.ifdef NOMAN
maninstall:
	@@echo NOMAN is set
.endif

htmlinstall:
	@@-for i in ${MANUALFILES}; do \
		j=`dirname $$i | sed 's;^manual/*;;'`; \
		k=`basename $$i`; \
		echo "Installing ${DESTDIR}${HTTPD_MANUALDIR}/$$j/$$k"; \
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 444 \
		    ${.OBJDIR}/htdocs/$$i ${DESTDIR}${HTTPD_MANUALDIR}/$$j/; \
	done

distribution:
	@@-for i in ${MODCONFDIR}; do \
		echo "Installing ${DESTDIR}${HTTPD_SYSCONFDIR}/$$i"; \
		${INSTALL} -d -m 755 ${DESTDIR}${HTTPD_SYSCONFDIR}/$$i; \
	done
	@@-for i in ${CONFFILES}; do \
		j=`dirname $$i`; \
		echo "Installing ${DESTDIR}${HTTPD_PREFIX}/$$i"; \
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 444 \
		    ${.OBJDIR}/$$i ${DESTDIR}${HTTPD_PREFIX}/$$j/; \
	done
	@@-for i in ${HTDOCS}; do \
		j=`dirname $$i`; \
		echo "Installing ${DESTDIR}${HTTPD_PREFIX}/$$i"; \
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 444 \
		    ${.OBJDIR}/$$i ${DESTDIR}${HTTPD_PREFIX}/$$j/; \
	done
	@@-for i in ${CGIFILES}; do \
		j=`dirname $$i`; \
		echo "Installing ${DESTDIR}${HTTPD_PREFIX}/$$i"; \
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 000 \
		    ${.OBJDIR}/$$i ${DESTDIR}${HTTPD_PREFIX}/$$j/; \
	done
	@@-for i in ${ICONFILES}; do \
		j=`dirname $$i`; \
		echo "Installing ${DESTDIR}${HTTPD_PREFIX}/$$i"; \
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 444 \
		    ${.OBJDIR}/$$i ${DESTDIR}${HTTPD_PREFIX}/$$j/; \
	done

.include <bsd.obj.mk>
.include <bsd.subdir.mk>
.ifndef NOMAN
.include <bsd.man.mk>
.endif
@


1.74
log
@Remove workarounds for ld reaching MAXDSIZ on vax, now that MAXDSIZ is
more comfortable.
Reminded by brad@@
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.73 2013/08/06 19:05:57 miod Exp $
@


1.73
log
@Switch vax to gcc 3.3.6.
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.72 2012/08/24 07:57:54 sthen Exp $
a636 3
.if ${MACHINE} == "vax"
EXTRA_LDFLAGS+=-Wl,--no-keep-memory
.endif
@


1.72
log
@Link httpd with -lpthread; recent pthread work enforces that a program
dlopen()ing a module which uses pthread functions is itself linked with
the thread library.  Specifically, this allows httpd to use php again
without an LD_PRELOAD hack.  ok espie@@ matthew@@
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.71 2012/01/29 15:05:05 jmc Exp $
d636 5
d643 1
a643 1
		EXTRA_LDFLAGS="-lpthread" OPTIM="${CFLAGS} ${COPTS}" \
@


1.71
log
@from Mikolaj Kucharski:
- move FAQ.html to misc/FAQ.html, since all docs point there
- change a broken link in ssl_faq.html

from Rares Aioanei:
- underlaying -> underlying

ok henning
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.70 2011/06/23 22:46:12 schwarze Exp $
d638 1
a638 1
		OPTIM="${CFLAGS} ${COPTS}" \
@


1.70
log
@switch to installing source manuals (base part)
discussed with lots of people, tested by naddy@@,
"move fast" deraadt@@
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.69 2009/03/10 10:56:40 martynas Exp $
a240 1
	manual/FAQ.html \
@


1.69
log
@by default drop privs to www/www, not nobody/nogroup if User/Group
entries are not present;  or it's being run configless
"sure" henning@@, "makes sense" merdely@@, ok sthen@@
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.68 2008/07/11 00:12:35 martynas Exp $
d714 1
a714 1
clean: cleanman
d717 1
a717 1
clean: cleanman
a739 2
	@@echo NOMAN is set
cleanman:
@


1.68
log
@add missing ssl art after manual has been moved, instead of using
src of non-existent place;  ok pval@@, okan@@, "looks good" jdixon@@
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.67 2008/06/13 04:41:15 mbalmer Exp $
d51 1
a51 1
	--disable-rule=EXPAT
@


1.67
log
@Don't install httpd.conf-dist.

from brad.
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.66 2008/06/07 01:59:36 jdixon Exp $
d236 1
a236 1
	htdocs/openbsd_pb.gif
@


1.66
log
@Move the Apache manual out of etcXX and to miscXX where it belongs.
It has also been moved to /usr/share/doc/html/httpd/.  This will
ease sysmerge upgrades and help keep htdocs clean.

Help from okan and phessler, doc tweaks by jmc
ok deraadt@@ millert@@ beck@@
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.65 2008/05/09 08:06:27 mbalmer Exp $
d230 1
a230 2
	conf/httpd.conf-dist conf/httpd.conf \
	conf/mime.types conf/magic
@


1.65
log
@Add support for IPv6 while keeping the default at IPv4 to not break
existing installations.  See the documentation for the IPv6 related
configuration.

This changes the module ABI since addresses are now struct addrinfo.

This has been tested by many people and run on production machines
for several months.

feedback many, ok todd
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.64 2008/01/08 10:08:31 henning Exp $
d22 1
d39 1
d665 1
a665 1
install: maninstall
d746 1
a746 1
man:
d748 3
a750 2
		j=`dirname $$i`; \
		echo "Installing ${DESTDIR}${HTTPD_HTDOCSDIR}/$$i"; \
d752 1
a752 1
		    htdocs/$$i ${DESTDIR}${HTTPD_HTDOCSDIR}/$$j/; \
a770 6
	done
	@@-for i in ${MANUALFILES}; do \
		j=`dirname $$i`; \
		echo "Installing ${DESTDIR}${HTTPD_HTDOCSDIR}/$$i"; \
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 444 \
		    ${.OBJDIR}/htdocs/$$i ${DESTDIR}${HTTPD_HTDOCSDIR}/$$j/; \
@


1.64
log
@sync patches in messages with reality
Matthew Mulrooney <openbsd-2008.01.07@@fm.beyonddata.net>
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.63 2007/11/03 10:32:56 espie Exp $
d96 2
a97 1
	--enable-shared=vhost_alias 
d256 1
d743 8
@


1.63
log
@make sure configure is done before we try building manpages.
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.62 2007/10/30 17:49:50 robert Exp $
d681 1
a681 1
	echo "Installing ${DESTDIR}${HTTPD_BINDIR}/apxs"; \
d693 1
a693 1
	echo "Installing ${DESTDIR}${HTTPD_BINDIR}/apachectl"; \
@


1.62
log
@Add two module configuration directories named modules and modules.sample
and include *.conf files from the modules directory by default.
The modules.sample directory will be used by some ports to place their
configuration files.

ok deraadt@@, jsign@@
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.61 2007/02/19 14:50:20 henning Exp $
d631 2
@


1.61
log
@unbreak by allowing clean in !objdir case to fail (no Makefile there in that
case), ok espie, also noticed by simon
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.60 2007/02/13 00:37:24 espie Exp $
d222 4
d741 4
@


1.60
log
@remove prereq, by using a pre-generated include file (this one should now
be MI since we removed stuff that was arch-dependent). The Configure script
still rebuilds a copy of that file, and we check it for diffs.

okay millert@@
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.59 2006/04/04 11:39:27 henning Exp $
d706 2
a707 2
	@@cd ${.OBJDIR} && ${MAKE} clean  && rm -f ${MUNGEDFILES}
.else 	
@


1.59
log
@nuke bundled regex lib, we have and always used the OpenBSD one of course
From: Daniel Ouellet <daniel@@presscom.net>
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.58 2006/04/04 08:51:28 henning Exp $
d131 1
a131 1
		${.OBJDIR}/src/include/ap_config_auto.h \
d625 1
a625 1
all: 	prereq
a627 2
prereq: ${.OBJDIR}/config.status 

d633 1
d641 1
a641 1
includes: prereq
d646 1
a646 1
		    ${.OBJDIR}/$$i ${DESTDIR}${HTTPD_INCLUDEDIR}; \
d652 1
a652 1
		    ${.OBJDIR}/$$i ${DESTDIR}${HTTPD_INCLUDEDIR}/xml; \
d705 1
a705 1
clean: prereq cleanman
d714 3
d720 1
a720 1
depend: prereq
@


1.58
log
@rip out bundled dbm, we've always used our dbm
From: Daniel Ouellet <daniel@@presscom.net>
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.57 2005/09/27 16:27:22 deraadt Exp $
a185 1
	src/include/hsregex.h \
@


1.57
log
@use xargs -r0 for our build process
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.56 2005/09/26 21:14:30 pedro Exp $
a206 1
	src/modules/ssl/ssl_util_sdbm.h \
@


1.56
log
@deal with xargs new behaviour by using -r, okay deraadt@@
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.55 2005/08/12 18:40:52 naddy Exp $
d712 1
a712 1
	@@cd ${.OBJDIR} && find . \! -type d -print | xargs -r rm
@


1.55
log
@don't try to install a page that has been removed; ok jmc@@
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.54 2005/08/01 19:40:33 jmc Exp $
d712 1
a712 1
	@@cd ${.OBJDIR} && find . \! -type d -print | xargs rm
@


1.54
log
@from tamas tevesz:
==> two more historic modules have gone away
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.53 2005/07/29 23:57:17 jmc Exp $
a288 1
	manual/sourcereorg.html \
@


1.53
log
@fro tamas tevesz:
==> de-multiviewification complete.
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.52 2005/07/29 09:37:45 jmc Exp $
a351 1
	manual/mod/mod_browser.html \
a353 1
	manual/mod/mod_cookies.html \
@


1.52
log
@from tamas tevesz:

==> some more alien platforms and obsolete info. the mod/core.html
change is because 1) the target link doesn't exist, 2) it
probably was meant to refer to misc/known_bugs.html in the
first place, which just got removed.
thanks henning for guidance.
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.51 2005/07/28 19:37:16 jmc Exp $
d240 2
a241 2
	manual/howto/cgi.html.html \
	manual/howto/ssi.html.html \
d244 4
a247 4
	manual/configuring.html.html \
	manual/content-negotiation.html.html \
	manual/custom-error.html.html \
	manual/dns-caveats.html.html \
d249 5
a253 5
	manual/env.html.html \
	manual/handler.html.html \
	manual/index.html.html \
	manual/invoking.html.html \
	manual/keepalive.html.html \
d271 1
a271 1
	manual/process-model.html.html \
d286 2
a287 2
	manual/sections.html.html \
	manual/server-wide.html.html \
d290 2
a291 2
	manual/stopping.html.html \
	manual/suexec.html.html \
d337 10
a346 10
	manual/mod/core.html.html \
	manual/mod/directive-dict.html.html \
	manual/mod/directives.html.html \
	manual/mod/index-bytype.html.html \
	manual/mod/index.html.html \
	manual/mod/mod_access.html.html \
	manual/mod/mod_actions.html.html \
	manual/mod/mod_alias.html.html \
	manual/mod/mod_asis.html.html \
	manual/mod/mod_auth.html.html \
d354 1
a354 1
	manual/mod/mod_cgi.html.html \
d358 2
a359 2
	manual/mod/mod_dir.html.html \
	manual/mod/mod_env.html.html \
d364 1
a364 1
	manual/mod/mod_info.html.html \
d367 1
a367 1
	manual/mod/mod_log_config.html.html \
d369 1
a369 1
	manual/mod/mod_mime.html.html \
d372 1
a372 1
	manual/mod/mod_negotiation.html.html \
d374 4
a377 4
	manual/mod/mod_rewrite.html.html \
	manual/mod/mod_setenvif.html.html \
	manual/mod/mod_so.html.html \
	manual/mod/mod_speling.html.html \
d379 2
a380 2
	manual/mod/mod_unique_id.html.html \
	manual/mod/mod_userdir.html.html \
d383 1
a383 1
	manual/mod/module-dict.html.html \
d386 1
a386 1
	manual/programs/apachectl.html.html \
d390 3
a392 3
	manual/programs/htpasswd.html.html \
	manual/programs/httpd.html.html \
	manual/programs/index.html.html \
d396 1
a396 1
	manual/programs/suexec.html.html \
d399 1
a399 1
	manual/vhosts/fd-limits.html.html \
d401 1
a401 1
	manual/vhosts/index.html.html \
d404 1
a404 1
	manual/vhosts/name-based.html.html \
@


1.51
log
@from tamas tevesz:
further removal of irrelevant bits...
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.50 2005/07/28 19:12:39 jmc Exp $
a251 1
	manual/install.html.html \
a269 1
	manual/man-template.html \
a273 3
	manual/misc/HTTP_Features.tsv \
	manual/misc/client_block_api.html \
	manual/misc/compat_notes.html \
a285 1
	manual/misc/windoz_keepalive.html \
a358 1
	manual/mod/mod_dld.html \
a359 1
	manual/mod/mod_example.html \
a364 1
	manual/mod/mod_isapi.html \
@


1.50
log
@from tamas tevesz:
==> some obsolete info regarding apache 1.2
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.49 2005/07/27 21:00:33 jmc Exp $
a284 1
	manual/misc/nopgp.html \
a290 1
	manual/misc/vif-info.html \
@


1.49
log
@corresponding Makefile changes for removed files...

thanks henning for pointing this out;
thanks tamas for prompt diff;
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.48 2005/05/26 01:26:47 marcm Exp $
a299 1
	manual/suexec_1_2.html \
a408 1
	manual/vhosts/details_1_2.html \
@


1.48
log
@Disable the internal expat since nothing uses it and it conflicts
with ports that use other XML parsers.

ok henning@@ beck@@
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.47 2004/06/07 04:17:13 brad Exp $
a239 1
	manual/howto/cgi.html.en \
a240 4
	manual/howto/cgi.html.ja.jis \
	manual/howto/footer.html \
	manual/howto/header.html \
	manual/howto/ssi.html.en \
a241 1
	manual/howto/ssi.html.ja.jis \
d243 1
a243 10
	manual/bind.html.en \
	manual/bind.html.fr \
	manual/bind.html.html \
	manual/bind.html.ja.jis \
	manual/cgi_path.html.en \
	manual/cgi_path.html.fr \
	manual/cgi_path.html.html \
	manual/cgi_path.html.ja.jis \
	manual/configuring.html.en \
	manual/configuring.html.fr \
a244 2
	manual/configuring.html.ja.jis \
	manual/content-negotiation.html.en \
a245 3
	manual/content-negotiation.html.ja.jis \
	manual/custom-error.html.en \
	manual/custom-error.html.fr \
a246 4
	manual/custom-error.html.ja.jis \
	manual/cygwin.html \
	manual/dns-caveats.html.en \
	manual/dns-caveats.html.fr \
a248 2
	manual/ebcdic.html \
	manual/env.html.en \
a249 3
	manual/env.html.ja.jis \
	manual/footer.html \
	manual/handler.html.en \
a250 4
	manual/handler.html.ja.jis \
	manual/header.html \
	manual/index.html.en \
	manual/index.html.fr \
a251 5
	manual/index.html.ja.jis \
	manual/install-tpf.html \
	manual/install.html.en \
	manual/install.html.es \
	manual/install.html.fr \
a252 3
	manual/install.html.ja.jis \
	manual/invoking.html.en \
	manual/invoking.html.fr \
a253 1
	manual/keepalive.html.en \
a254 1
	manual/keepalive.html.ja.jis \
a271 1
	manual/mpeix.html \
a272 9
	manual/netware.html \
	manual/new_features_1_0.html \
	manual/new_features_1_1.html \
	manual/new_features_1_2.html \
	manual/new_features_1_3.html.en \
	manual/new_features_1_3.html.html \
	manual/new_features_1_3.html.ja.jis \
	manual/new_features_2_0.html \
	manual/process-model.html.en \
a273 1
	manual/process-model.html.ja.jis \
a281 2
	manual/misc/footer.html \
	manual/misc/header.html \
a286 2
	manual/misc/perf-dec.html \
	manual/misc/perf-hp.html \
a293 2
	manual/readme-tpf.html \
	manual/sections.html.en \
a294 3
	manual/sections.html.ja.jis \
	manual/server-wide.html.en \
	manual/server-wide.html.fr \
a295 1
	manual/server-wide.html.ja.jis \
a297 2
	manual/stopping.html.en \
	manual/stopping.html.fr \
a298 1
	manual/suexec.html.en \
a299 1
	manual/suexec.html.ja.jis \
a303 2
	manual/mod/mod_ssl/ssl_compat.wml \
	manual/mod/mod_ssl/ssl_cover.wml \
a307 1
	manual/mod/mod_ssl/ssl_faq.wml \
a308 1
	manual/mod/mod_ssl/ssl_glossary.wml \
a310 1
	manual/mod/mod_ssl/ssl_howto.wml \
a312 1
	manual/mod/mod_ssl/ssl_intro.wml \
a317 1
	manual/mod/mod_ssl/ssl_overview.wml \
a320 1
	manual/mod/mod_ssl/ssl_reference.wml \
a330 1
	manual/mod/mod_ssl/ssl_template.inc \
a345 3
	manual/mod/core.html.en \
	manual/mod/core.html.fr \
	manual/mod/core.html.ja.jis \
a346 2
	manual/mod/directive-dict.html.en \
	manual/mod/directive-dict.html.fr \
a347 4
	manual/mod/directive-dict.html.ja.jis \
	manual/mod/directives.html.de \
	manual/mod/directives.html.en \
	manual/mod/directives.html.fr \
a348 6
	manual/mod/directives.html.ja.jis \
	manual/mod/footer.html \
	manual/mod/header.html \
	manual/mod/index.html.en \
	manual/mod/index-bytype.html.en \
	manual/mod/index-bytype.html.fr \
a349 2
	manual/mod/index-bytype.html.ja.jis \
	manual/mod/index.html.fr \
a350 2
	manual/mod/index.html.ja.jis \
	manual/mod/mod_access.html.en \
a351 2
	manual/mod/mod_access.html.ja.jis \
	manual/mod/mod_actions.html.en \
a352 2
	manual/mod/mod_actions.html.ja.jis \
	manual/mod/mod_alias.html.en \
a353 2
	manual/mod/mod_alias.html.ja.jis \
	manual/mod/mod_asis.html.en \
a354 2
	manual/mod/mod_asis.html.ja.jis \
	manual/mod/mod_auth.html.en \
a355 1
	manual/mod/mod_auth.html.ja.jis \
a362 1
	manual/mod/mod_cgi.html.en \
a363 1
	manual/mod/mod_cgi.html.ja.jis \
a366 1
	manual/mod/mod_dir.html.en \
a367 1
	manual/mod/mod_dir.html.ja.jis \
a368 1
	manual/mod/mod_env.html.en \
a369 1
	manual/mod/mod_env.html.ja.jis \
a374 1
	manual/mod/mod_info.html.en \
a375 1
	manual/mod/mod_info.html.ja.jis \
a378 1
	manual/mod/mod_log_config.html.en \
a379 1
	manual/mod/mod_log_config.html.ja.jis \
a380 1
	manual/mod/mod_mime.html.en \
a381 1
	manual/mod/mod_mime.html.ja.jis \
a383 1
	manual/mod/mod_negotiation.html.en \
a384 1
	manual/mod/mod_negotiation.html.ja.jis \
a385 1
	manual/mod/mod_rewrite.html.en \
a386 2
	manual/mod/mod_rewrite.html.ja.jis \
	manual/mod/mod_setenvif.html.en \
a387 2
	manual/mod/mod_so.html.en \
	manual/mod/mod_setenvif.html.ja.jis \
a388 2
	manual/mod/mod_so.html.ja.jis \
	manual/mod/mod_speling.html.en \
a389 1
	manual/mod/mod_speling.html.ja.jis \
a390 1
	manual/mod/mod_unique_id.html.en \
a391 2
	manual/mod/mod_unique_id.html.ja.jis \
	manual/mod/mod_userdir.html.en \
a392 1
	manual/mod/mod_userdir.html.ja.jis \
a394 1
	manual/mod/module-dict.html.en \
a395 3
	manual/mod/module-dict.html.ja.jis \
	manual/unixware.html \
	manual/upgrading_to_1_3.html \
a396 8
	manual/win_compiling.html.en \
	manual/win_compiling.html.html \
	manual/win_compiling.html.ja.jis \
	manual/win_service.html.en \
	manual/win_service.html.html \
	manual/win_service.html.ja.jis \
	manual/windows.html.en \
	manual/windows.html.ja.jis \
a397 1
	manual/programs/apachectl.html.en \
a398 1
	manual/programs/apachectl.html.ja.jis \
a400 2
	manual/programs/footer.html \
	manual/programs/header.html \
a401 1
	manual/programs/htpasswd.html.en \
a402 2
	manual/programs/htpasswd.html.ja.jis \
	manual/programs/httpd.html.en \
a403 2
	manual/programs/httpd.html.ja.jis \
	manual/programs/index.html.en \
a404 1
	manual/programs/index.html.ja.jis \
a407 1
	manual/programs/suexec.html.en \
a408 2
	manual/programs/suexec.html.ja.jis \
	manual/search/manual-index.cgi \
a411 1
	manual/vhosts/fd-limits.html.en \
a412 3
	manual/vhosts/fd-limits.html.ja.jis \
	manual/vhosts/footer.html \
	manual/vhosts/header.html \
a413 1
	manual/vhosts/index.html.en \
a414 1
	manual/vhosts/index.html.ja.jis \
a416 1
	manual/vhosts/name-based.html.en \
a417 1
	manual/vhosts/name-based.html.ja.jis \
@


1.47
log
@check for NOPIC instead of using a list of arch names.

ok drahn@@ henning@@
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.46 2004/02/27 17:36:18 deraadt Exp $
d48 2
a49 1
	--suexec-safepath="/usr/bin:/bin:/usr/local/bin"
@


1.46
log
@change amd64's MACHINE_ARCH from x86_64 to amd64.  There are many many
reasons for this, quite a few of them technical, and not all of them
in response to Intel's broken ia32e crud.  The gcc toolchain stays at
x86_64 for now.
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.45 2004/02/11 23:15:50 deraadt Exp $
d8 2
d102 1
a102 4
.if ${MACHINE_ARCH} == "alpha" || ${MACHINE_ARCH} == "arm" || \
    ${MACHINE_ARCH} == "i386" || ${MACHINE_ARCH} == "m68k" || \
    ${MACHINE_ARCH} == "powerpc" || ${MACHINE_ARCH} == "sparc" || \
    ${MACHINE_ARCH} == "sparc64" || ${MACHINE_ARCH} == "amd64"
@


1.45
log
@enable shared libs on amd64; from drahn
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.44 2004/02/11 17:43:44 drahn Exp $
d103 1
a103 1
    ${MACHINE_ARCH} == "sparc64" || ${MACHINE_ARCH} == "x86_64"
@


1.44
log
@ARM now supports shared libraries.
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.43 2003/11/17 19:14:01 henning Exp $
d103 1
a103 1
    ${MACHINE_ARCH} == "sparc64"
@


1.43
log
@two more dead MANUALFILES
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.42 2003/11/17 19:05:03 henning Exp $
d100 4
a103 3
.if ${MACHINE_ARCH} == "alpha" || ${MACHINE_ARCH} == "i386" || \
    ${MACHINE_ARCH} == "m68k" || ${MACHINE_ARCH} == "powerpc" || \
    ${MACHINE_ARCH} == "sparc" || ${MACHINE_ARCH} == "sparc64"
@


1.42
log
@syn manualfiles
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.41 2003/08/21 14:00:28 henning Exp $
a259 1
	manual/content-negotiation.html \
a490 1
	manual/mod/mod_log_config.html \
@


1.41
log
@sync MANUALFILES
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.40 2003/05/26 07:16:14 henning Exp $
d236 1
d506 3
a508 1
	manual/mod/mod_rewrite.html \
@


1.40
log
@install mod_ssl headers
from a discussion with and ok by naddy@@
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.39 2003/02/10 21:28:26 deraadt Exp $
d260 3
d424 1
d452 1
d458 1
d492 3
@


1.39
log
@indent
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.38 2002/12/25 23:13:25 henning Exp $
d203 6
a208 1
	src/os/unix/os.h
@


1.38
log
@no more -O1 needed on alpha
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.37 2002/12/10 16:58:12 henning Exp $
d101 2
a102 2
${MACHINE_ARCH} == "m68k" || ${MACHINE_ARCH} == "powerpc" || \
${MACHINE_ARCH} == "sparc" || ${MACHINE_ARCH} == "sparc64"
d105 20
a124 20
src/modules/experimental/mod_mmap_static.so \
src/modules/experimental/mod_auth_digest.so \
src/modules/extra/mod_define.so \
src/modules/proxy/libproxy.so \
src/modules/standard/mod_vhost_alias.so \
src/modules/standard/mod_log_agent.so \
src/modules/standard/mod_info.so \
src/modules/standard/mod_log_referer.so \
src/modules/standard/mod_mime_magic.so \
src/modules/standard/mod_speling.so \
src/modules/standard/mod_rewrite.so \
src/modules/standard/mod_auth_dbm.so \
src/modules/standard/mod_auth_anon.so \
src/modules/standard/mod_auth_db.so \
src/modules/standard/mod_digest.so \
src/modules/standard/mod_cern_meta.so \
src/modules/standard/mod_usertrack.so \
src/modules/standard/mod_unique_id.so \
src/modules/standard/mod_expires.so \
src/modules/standard/mod_headers.so
@


1.37
log
@-O1 on alpha for now

ok theo
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.36 2002/11/22 13:03:34 naddy Exp $
a789 4

.if ${MACHINE_ARCH} == "alpha"
COPTS+=-O1
.endif
@


1.36
log
@honor COPTS; ok henning@@
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.35 2002/10/07 21:00:58 henning Exp $
d790 4
@


1.35
log
@sync MANUALFILES
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.34 2002/09/18 16:34:52 henning Exp $
d797 2
a798 1
	@@cd ${.OBJDIR} && CC="${CC}" LD_SHLIB="${CC}" OPTIM="${CFLAGS}" \
@


1.34
log
@don't install srm.conf, access.conf, srm.conf-dist and access.conf-dist
They are obsolete since years and empty anyway.

ok theo
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.33 2002/09/09 12:09:50 henning Exp $
d232 1
d442 2
a443 1
	manual/mod/mod_alias.html \
d447 2
a448 1
	manual/mod/mod_auth.html \
@


1.33
log
@clean: cleanman
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.32 2002/09/09 11:44:58 henning Exp $
d219 2
a220 3
	conf/srm.conf-dist conf/access.conf-dist conf/httpd.conf-dist \
	conf/mime.types conf/access.conf conf/httpd.conf \
	conf/magic conf/srm.conf 
@


1.32
log
@add src/modules/keynote/Makefile to MUNGEDFILES
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.31 2002/07/22 18:17:50 henning Exp $
d869 1
a869 1
clean: prereq
d872 1
a872 1
clean:
d892 2
@


1.31
log
@sync ICONFILES with reality
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.30 2002/07/20 00:16:21 henning Exp $
d138 1
@


1.30
log
@remove pre-apache-1.3.26 cruft

Note for upgraders:
to actually see the current manual, you should do

find /var/www/htdocs/manual/ -type f -exec rm {} \;
cd /usr/src/usr.sbin/httpd/
make -f Makefile.bsd-wrapper distribution

you will also need a current httpd.conf, MultiViews need to be enabled in
/var/www/htdocs/manual/
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.29 2002/07/19 23:39:44 henning Exp $
d567 218
a784 39
	icons/README icons/a.gif icons/alert.black.gif \
	icons/alert.red.gif icons/apache_pb.gif icons/back.gif \
	icons/ball.gray.gif icons/ball.red.gif icons/binary.gif \
	icons/binhex.gif icons/blank.gif icons/bomb.gif icons/box1.gif \
	icons/box2.gif icons/broken.gif icons/burst.gif icons/c.gif \
	icons/comp.blue.gif icons/comp.gray.gif icons/compressed.gif \
	icons/continued.gif icons/dir.gif icons/dvi.gif icons/down.gif \
	icons/f.gif icons/folder.gif icons/folder.open.gif \
	icons/folder.sec.gif icons/forward.gif icons/generic.gif \
	icons/generic.red.gif icons/generic.sec.gif \
	icons/hand.right.gif icons/hand.up.gif icons/icon.sheet.gif \
	icons/image1.gif icons/image2.gif icons/image3.gif \
	icons/index.gif icons/layout.gif icons/left.gif icons/link.gif \
	icons/movie.gif icons/p.gif icons/patch.gif icons/pdf.gif \
	icons/pie0.gif icons/pie1.gif icons/pie2.gif icons/pie3.gif \
	icons/pie4.gif icons/pie5.gif icons/pie6.gif icons/pie7.gif \
	icons/pie8.gif icons/portal.gif icons/ps.gif icons/quill.gif \
	icons/right.gif icons/screw1.gif icons/screw2.gif \
	icons/script.gif icons/sound1.gif icons/sound2.gif \
	icons/sphere1.gif icons/sphere2.gif icons/tar.gif \
	icons/tex.gif icons/text.gif icons/transfer.gif \
	icons/unknown.gif icons/up.gif icons/uu.gif \
	icons/uuencoded.gif icons/world1.gif icons/world2.gif \
	icons/small/README.txt icons/small/back.gif \
	icons/small/binary.gif icons/small/binhex.gif \
	icons/small/blank.gif icons/small/broken.gif \
	icons/small/burst.gif icons/small/comp1.gif \
	icons/small/comp2.gif icons/small/compressed.gif \
	icons/small/continued.gif icons/small/dir.gif \
	icons/small/dir2.gif icons/small/doc.gif \
	icons/small/forward.gif icons/small/generic.gif \
	icons/small/generic2.gif icons/small/generic3.gif \
	icons/small/image.gif icons/small/image2.gif \
	icons/small/index.gif icons/small/key.gif \
	icons/small/movie.gif icons/small/patch.gif icons/small/ps.gif \
	icons/small/rainbow.gif icons/small/sound.gif \
	icons/small/sound2.gif icons/small/tar.gif \
	icons/small/text.gif icons/small/transfer.gif \
	icons/small/unknown.gif icons/small/uu.gif  
@


1.29
log
@sync MANUALPAGES with reality
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.28 2002/07/17 11:17:00 henning Exp $
a248 1
	manual/configuring.html \
a253 1
	manual/custom-error.html \
a267 1
	manual/handler.html \
a271 1
	manual/index.html \
a276 1
	manual/install.html \
a310 1
	manual/new_features_1_3.html \
a314 1
	manual/process-model.html \
a342 1
	manual/sections.html \
a415 1
	manual/mod/directive-dict.html \
a434 1
	manual/mod/mod_access.html \
a437 1
	manual/mod/mod_actions.html \
a441 2
	manual/mod/mod_asis.html \
	manual/mod/mod_so.html \
a452 1
	manual/mod/mod_cgi.html \
a462 1
	manual/mod/mod_dll.html \
a470 1
	manual/mod/mod_info.html \
a483 1
	manual/mod/mod_negotiation.html \
a494 1
	manual/mod/mod_speling.html \
a498 1
	manual/mod/mod_unique_id.html \
a501 1
	manual/mod/mod_userdir.html \
a506 1
	manual/mod/module-dict.html \
a512 1
	manual/win_compiling.html \
a518 1
	manual/windows.html \
a521 1
	manual/programs/apachectl.html \
a529 1
	manual/programs/htpasswd.html \
a532 1
	manual/programs/httpd.html \
a541 1
	manual/programs/suexec.html \
a548 1
	manual/vhosts/fd-limits.html \
a554 1
	manual/vhosts/index.html \
@


1.28
log
@introduce fdcache, a simple wrapper to keep a copy of fds outside
server_conf. needed to make the mod_log_* modules survive graceful restarts.
has to be used with great care, as of now only appropriate for logfiles.
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.27 2002/07/08 00:38:32 brad Exp $
d183 1
d200 1
d202 1
a202 3
	src/os/unix/os.h \
	src/include/util_uri.h \
	src/include/fdcache.h
d231 136
a366 32
	manual/mod/directive-dict.html \
	manual/mod/footer.html \
	manual/mod/header.html \
	manual/mod/mod_access.html \
	manual/mod/mod_actions.html \
	manual/mod/mod_alias.html \
	manual/mod/mod_asis.html \
	manual/mod/mod_auth.html \
	manual/mod/mod_auth_anon.html \
	manual/mod/mod_auth_db.html \
	manual/mod/mod_auth_dbm.html \
	manual/mod/mod_auth_digest.html \
	manual/mod/mod_autoindex.html \
	manual/mod/mod_browser.html \
	manual/mod/mod_cern_meta.html \
	manual/mod/mod_so.html \
	manual/mod/mod_cgi.html \
	manual/mod/mod_cookies.html \
	manual/mod/mod_digest.html \
	manual/mod/mod_dld.html \
	manual/mod/mod_dll.html \
	manual/mod/mod_example.html \
	manual/mod/mod_expires.html \
	manual/mod/mod_headers.html \
	manual/mod/mod_imap.html \
	manual/mod/mod_include.html \
	manual/mod/mod_info.html \
	manual/mod/mod_isapi.html \
	manual/mod/mod_log_agent.html \
	manual/mod/mod_log_common.html \
	manual/mod/mod_log_config.html \
	manual/mod/mod_log_referer.html \
a399 1
	manual/mod/mod_ssl/ssl_template.inc \
d405 1
d421 77
d501 3
d506 6
d513 3
d518 3
d522 3
d527 4
a530 25
	manual/mod/mod_define.html \
	manual/LICENSE \
	manual/content-negotiation.html \
	manual/custom-error.html \
	manual/dso.html \
	manual/ebcdic.html \
	manual/footer.html \
	manual/handler.html \
	manual/header.html \
	manual/index.html \
	manual/install-tpf.html \
	manual/install.html \
	manual/location.html \
	manual/man-template.html \
	manual/multilogs.html \
	manual/new_features_1_0.html \
	manual/new_features_1_1.html \
	manual/new_features_1_2.html \
	manual/new_features_1_3.html \
	manual/netware.html \
	manual/process-model.html \
	manual/readme-tpf.html \
	manual/sections.html \
	manual/sourcereorg.html \
	manual/suexec_1_2.html \
d533 8
d542 2
a543 94
	manual/images/custom_errordocs.gif \
	manual/images/home.gif \
	manual/images/index.gif \
	manual/images/mod_rewrite_fig1.fig \
	manual/images/mod_rewrite_fig1.gif \
	manual/images/mod_rewrite_fig2.fig \
	manual/images/mod_rewrite_fig2.gif \
	manual/images/sub.gif \
	manual/images/apache_pb.gif \
	manual/images/mod_ssl_sb.gif \
	manual/images/openssl_ics.gif \
	manual/images/feather.jpg \
	manual/misc/API.html \
	manual/misc/fin_wait_2.html \
	manual/misc/FAQ.html \
	manual/misc/known_client_problems.html \
	manual/misc/client_block_api.html \
	manual/misc/compat_notes.html \
	manual/misc/custom_errordocs.html \
	manual/misc/descriptors.html \
	manual/misc/HTTP_Features.tsv \
	manual/misc/footer.html \
	manual/misc/header.html \
	manual/misc/howto.html \
	manual/misc/index.html \
	manual/misc/perf-bsd44.html \
	manual/misc/nopgp.html \
	manual/misc/perf-tuning.html \
	manual/misc/perf-dec.html \
	manual/misc/perf-hp.html \
	manual/misc/security_tips.html \
	manual/misc/perf.html \
	manual/misc/vif-info.html \
	manual/misc/rewriteguide.html \
	manual/misc/windoz_keepalive.html \
	manual/search/manual-index.cgi \
	manual/vhosts/details.html \
	manual/vhosts/details_1_2.html \
	manual/vhosts/examples.html \
	manual/vhosts/fd-limits.html \
	manual/vhosts/footer.html \
	manual/vhosts/header.html \
	manual/vhosts/host.html \
	manual/vhosts/index.html \
	manual/vhosts/ip-based.html \
	manual/vhosts/mass.html \
	manual/vhosts/vhosts-in-depth.html \
	manual/vhosts/virtual-host.html \
	manual/configuring.html \
	manual/mpeix.html \
	manual/new_features_2_0.html \
	manual/win_compiling.html \
	manual/misc/tutorials.html \
	manual/mod/module-dict.html \
	manual/vhosts/index.html.ja.jis \
	manual/vhosts/index.html.en \
	manual/vhosts/index.html.html \
	manual/mod/module-dict.html.ja.jis \
	manual/mod/module-dict.html.html \
	manual/mod/module-dict.html.en \
	manual/mod/mod_negotiation.html.ja.jis \
	manual/mod/mod_negotiation.html.html \
	manual/mod/mod_negotiation.html.en \
	manual/mod/directive-dict.html.ja.jis \
	manual/mod/directive-dict.html.html \
	manual/mod/directive-dict.html.en \
	manual/images/apache_header.gif \
	manual/images/pixel.gif \
	manual/urlmapping.html \
	manual/configuring.html.en \
	manual/configuring.html.html \
	manual/configuring.html.ja.jis \
	manual/custom-error.html.en \
	manual/custom-error.html.html \
	manual/custom-error.html.ja.jis \
	manual/handler.html.en \
	manual/handler.html.html \
	manual/handler.html.ja.jis \
	manual/index.html.en \
	manual/index.html.fr \
	manual/index.html.html \
	manual/index.html.ja.jis \
	manual/install.html.en \
	manual/install.html.fr \
	manual/install.html.html \
	manual/install.html.ja.jis \
	manual/invoking.html.fr \
	manual/new_features_1_3.html.en \
	manual/new_features_1_3.html.html \
	manual/new_features_1_3.html.ja.jis \
	manual/server-wide.html.en \
	manual/server-wide.html.fr \
	manual/server-wide.html.html \
	manual/server-wide.html.ja.jis \
d546 3
d555 3
d559 6
d569 17
a585 8
	manual/howto/cgi.html.en \
	manual/howto/cgi.html.html \
	manual/howto/cgi.html.ja.jis \
	manual/howto/footer.html \
	manual/howto/header.html \
	manual/howto/ssi.html.en \
	manual/howto/ssi.html.html \
	manual/howto/ssi.html.ja.jis \
d587 7
a593 39
	manual/vhosts/index.html.html \
	manual/vhosts/index.html.en \
	manual/mod/module-dict.html.ja.jis \
	manual/mod/module-dict.html.html \
	manual/mod/module-dict.html.en \
	manual/mod/mod_negotiation.html.ja.jis \
	manual/mod/mod_negotiation.html.html \
	manual/mod/mod_negotiation.html.en \
	manual/mod/directive-dict.html.ja.jis \
	manual/mod/directive-dict.html.html \
	manual/mod/directive-dict.html.en \
	manual/images/apache_header.gif \
	manual/images/pixel.gif \
	manual/urlmapping.html \
	manual/configuring.html.en \
	manual/configuring.html.html \
	manual/configuring.html.ja.jis \
	manual/custom-error.html.en \
	manual/custom-error.html.html \
	manual/custom-error.html.ja.jis \
	manual/handler.html.en \
	manual/handler.html.html \
	manual/handler.html.ja.jis \
	manual/index.html.en \
	manual/index.html.fr \
	manual/index.html.html \
	manual/index.html.ja.jis \
	manual/install.html.en \
	manual/install.html.fr \
	manual/install.html.html \
	manual/install.html.ja.jis \
	manual/invoking.html.fr \
	manual/new_features_1_3.html.en \
	manual/new_features_1_3.html.html \
	manual/new_features_1_3.html.ja.jis \
	manual/server-wide.html.en \
	manual/server-wide.html.fr \
	manual/server-wide.html.html \
	manual/server-wide.html.ja.jis 
@


1.27
log
@don't install Apache bench.
--
Idea from:  Chad Loder <cloder@@acm.org> via PR 2800
Ok'd by: deraadt@@
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.26 2002/03/17 04:52:14 brad Exp $
d201 2
a202 1
	src/include/util_uri.h
@


1.26
log
@This along with the recent dynamic linker fixes allows modules to work
with Apache on our ELF-based architecures. Enable alpha, powerpc and sparc64.
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.25 2002/02/15 22:49:15 beck Exp $
d157 1
a157 1
	src/httpd src/support/ab \
d161 1
a161 1
	src/support/ab.8 src/support/apachectl.8 src/support/logresolve.8 \
@


1.25
log
@
fix htdocs pages, changed with apache 1.3.23 update, to install the right
ones and not install the old ones.
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.24 2001/10/03 01:24:22 millert Exp $
d100 3
a102 1
.if ${MACHINE_ARCH} == "i386" || ${MACHINE_ARCH} == "m68k" || ${MACHINE_ARCH} == "sparc"
@


1.24
log
@simple keynote module for apache and mod_ssl
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.23 2001/08/06 18:45:03 brad Exp $
a227 1
	manual/mod/core.html  \
a228 1
	manual/mod/directives.html \
a230 1
	manual/mod/index.html \
a246 1
	manual/mod/mod_dir.html \
a248 1
	manual/mod/mod_env.html \
a259 1
	manual/mod/mod_mime.html \
a318 1
	manual/mod/mod_setenvif.html \
a326 2
	manual/bind.html \
	manual/cgi_path.html \
a328 1
	manual/dns-caveats.html \
a330 1
	manual/env.html \
a336 2
	manual/invoking.html \
	manual/keepalive.html \
a348 2
	manual/stopping.html \
	manual/suexec.html \
a398 1
	manual/vhosts/name-based.html \
a404 1
	manual/win_service.html \
a405 1
	manual/mod/index-bytype.html \
d407 2
a408 1
	manual/vhosts/index.html.ja.jis  \
a409 1
	manual/vhosts/index.html.en \
a455 1
	manual/programs/index.html \
d467 42
a508 2
	manual/howto/ssi.html.ja.jis

@


1.23
log
@a few more files that should be munged on clean.
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.22 2001/04/13 19:01:55 beck Exp $
d41 1
@


1.22
log
@Fix clean target so it really cleans - depending on if we have a
seperate .OBJDIR or not, Now checks to see if .OBJDIR is seperate
from CURDIR, and if so, blows away the lndir tree so that we don't
get caught by stale stuff lying around.
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.21 2001/03/29 10:21:22 beck Exp $
d136 3
d144 2
a145 1
		${.OBJDIR}/src/Makefile ${.OBJDIR}/src/Makefile.config \
d147 2
a148 1
		${.OBJDIR}/src/Configuration.apaci ${.OBJDIR}/Makefile \
@


1.21
log
@Apache 1.3.19+mod_ssl 2.8.1 merge - also adds shared build of mod_headers
and mod_expire
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.20 2001/01/31 04:00:43 brad Exp $
d145 1
d528 1
a528 1
prereq: ${.OBJDIR}/config.status
d530 1
a530 1
${.OBJDIR}/config.status : ${.OBJDIR}/config.layout
d537 1
a537 1
	@@${LNDIR} -s -e obj -e obj.${MACHINE_ARCH} -e Makefile.bsd-wrapper ${.CURDIR}
d540 1
d603 2
a604 1
	
d606 5
a610 1
	@@cd ${.OBJDIR} && ${MAKE} clean
a612 1
	@@cd ${.OBJDIR} && rm -f ${MUNGEDFILES}
@


1.20
log
@silence a few more targets
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.19 2001/01/30 21:04:06 niklas Exp $
d51 42
a92 17
DSO_MODULE_ARGS= --enable-module=so --enable-shared=auth_anon \
	--enable-shared=auth_db --enable-shared=auth_dbm \
	--enable-shared=auth_digest --enable-shared=cern_meta \
	--enable-shared=define --enable-shared=digest --enable-shared=info \
	--enable-shared=log_agent --enable-shared=log_referer \
	--enable-shared=mime_magic --enable-shared=mmap_static \
	--enable-shared=proxy --enable-shared=rewrite --enable-shared=speling \
	--enable-shared=unique_id --enable-shared=usertrack \
	--enable-shared=vhost_alias --enable-module=auth_anon \
	--enable-module=auth_db --enable-module=auth_dbm \
	--enable-module=auth_digest --enable-module=cern_meta \
	--enable-module=define --enable-module=digest --enable-module=info \
	--enable-module=log_agent --enable-module=log_referer \
	--enable-module=mime_magic --enable-module=mmap_static \
	--enable-module=proxy --enable-module=rewrite --enable-module=speling \
	--enable-module=unique_id --enable-module=usertrack  \
	--enable-module=vhost_alias 
d119 3
a121 1
src/modules/standard/mod_unique_id.so
d417 64
a480 2
	manual/mod/module-dict.html
		
@


1.19
log
@Supply an always safe path to configure
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.18 2001/01/23 23:54:26 brad Exp $
d6 1
a6 1
LNDIR=          /usr/bin/lndir
d76 2
a77 1
INSTALL_MODULES= src/modules/experimental/mod_mmap_static.so \
d436 1
a436 1
	cd ${.OBJDIR} && ${MAKE}
d442 2
a443 1
		PATH=/sbin:/usr/sbin:/bin:/usr/bin sh configure ${CONFIG_ARGS}
d514 1
a514 1
	cd ${.OBJDIR} && ${MAKE} clean
d517 1
a517 1
	cd ${.OBJDIR} && rm -f ${MUNGEDFILES}
@


1.18
log
@- removed the redundant WWWROOT variable and just used HTTPD_PREFIX in
its place
- synced the paths to use the same scheme as in config.layout
- removed a redundant --enable-module=ssl from CONFIG_ARGS
- indented a few places
- removed unused KLUDGEINCFILES variable
- one step in the "distribution" target was echoing HTTPD_PREFIX but was
actually installing into HTTPD_HTDOCSDIR
--
Ok'd by beck@@
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.17 2001/01/05 18:57:17 millert Exp $
d441 1
a441 1
		sh configure ${CONFIG_ARGS}
@


1.17
log
@alloc.h was renamed ap_alloc.h so install the correct thing and kill
the zero-length alloc.h (truncated by patch no doubt).
Fixes PHP4 build; matthieu@@laas.fr.
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.16 2000/12/18 20:49:12 beck Exp $
d8 1
a8 2

#   OpenBSD apache path layout.
d12 14
a25 14
#    bindir:        /usr/bin
#    sbindir:       /usr/sbin
#    libexecdir:    /usr/lib/apache/modules
#    mandir:        /usr/share/man
#    sysconfdir:    /var/www/conf
#    datadir:       /var/www
#    iconsdir:      /var/www/icons
#    htdocsdir:     /var/www/htdocs
#    cgidir:        /var/www/cgi-bin
#    includedir:    /usr/lib/apache/include
#    localstatedir: /var/www
#    runtimedir:    /var/www/logs
#    logfiledir:    /var/www/logs
#    proxycachedir: /var/www/proxy
a26 1
#
d28 18
a45 19
WWWROOT= /var/www
HTTPD_PREFIX=	/var/www
HTTPD_BINDIR=	/usr/bin
HTTPD_SBINDIR=	/usr/sbin
HTTPD_LIBEXECDIR= /usr/lib/apache/modules
HTTPD_CONFDIR=	/var/www/conf
HTTPD_DATADIR=	/var/www
HTTPD_LOGDIR=	/var/www/logs
HTTPD_RUNDIR=	/var/www/logs
HTTPD_HTDOCSDIR= /var/www/htdocs
HTTPD_ICONSDIR=	/var/www/icons
HTTPD_INCLUDEDIR=	/usr/lib/apache/include

CONFIG_ARGS=	--with-layout=OpenBSD --enable-module=ssl \
	--enable-suexec --enable-module=ssl \
	--suexec-caller=www --suexec-docroot=/var/www/htdocs \
	--suexec-logfile=/var/log/suexec_log --suexec-userdir=public_html\
	--suexec-uidmin=1000 --suexec-gidmin=1000 \
	--suexec-safepath=/usr/bin:/bin:/usr/local/bin
d47 1
a47 1
# This is stupid - to build a DSO module for apache you not only need to
d49 1
a49 1
# do anything   
d71 4
a74 3
# If you support dynamic loading, enable the so module, and build all the 
# modules that come with apache 
.if ${MACHINE_ARCH} == "i386" || ${MACHINE_ARCH} == "m68k" || ${MACHINE_ARCH} == "sparc" 
d96 1
a96 1
PERLPATH= /usr/bin/perl
d117 1
a117 1
BINFILES= src/support/htdigest src/support/htpasswd \
d123 1
a123 2

MAN+=  src/support/dbmmanage.1 src/support/htdigest.1 src/support/htpasswd.1 \
a178 4
# This is needed because apache generates these *as* it builds
# so we can't pick them up on make includes. 
KLUDGEINCFILES = \

d190 1
a190 3

CGIFILES= \
	cgi-bin/printenv cgi-bin/test-cgi	
a431 1

a436 1

d440 1
a440 1
	cd ${.OBJDIR} && CC="${CC}" LD_SHLIB="${CC}" OPTIM="${CFLAGS}" \
d445 1
a445 1
	${LNDIR} -s -e obj -e obj.${MACHINE_ARCH} -e Makefile.bsd-wrapper ${.CURDIR}
d488 1
a488 1
		-e 's;\@@sysconfdir\@@;${HTTPD_CONFDIR};' \
d537 1
a537 1
		echo "Installing ${DESTDIR}${WWWROOT}/$$i"; \
d539 1
a539 1
		    ${.OBJDIR}/$$i ${DESTDIR}${WWWROOT}/$$j/; \
d543 1
a543 1
		echo "Installing ${DESTDIR}${WWWROOT}/$$i"; \
d545 1
a545 1
		    ${.OBJDIR}/$$i ${DESTDIR}${WWWROOT}/$$j/; \
d549 1
a549 1
		echo "Installing ${DESTDIR}${WWWROOT}/$$i"; \
d551 1
a551 1
		    ${.OBJDIR}/htdocs/$$i ${DESTDIR}${WWWROOT}/htdocs/$$j/; \
d555 1
a555 1
		echo "Installing ${DESTDIR}${WWWROOT}/$$i"; \
d557 1
a557 1
		    ${.OBJDIR}/$$i ${DESTDIR}${WWWROOT}/$$j/; \
d561 1
a561 1
		echo "Installing ${DESTDIR}${WWWROOT}/$$i"; \
d563 1
a563 1
		    ${.OBJDIR}/$$i ${DESTDIR}${WWWROOT}/$$j/; \
@


1.16
log
@Argh. this commit didn't make it when I did it earlier - apache 1.3.14 + mod_ssl 2.7.1 merge
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.15 2000/10/16 21:25:23 brad Exp $
a131 1
	src/include/alloc.h  \
d133 1
@


1.15
log
@respect CC.
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.14 2000/07/07 18:53:02 deraadt Exp $
d390 9
a398 2
	manual/vhosts/virtual-host.html
		
@


1.14
log
@pass CFLAGS to build process, so that optimization happens; js3guj@@gold.ocn.ne.jp
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.13 2000/04/18 21:48:38 fgsch Exp $
d444 2
a445 1
	cd ${.OBJDIR} && OPTIM="${CFLAGS}" sh configure ${CONFIG_ARGS}
@


1.13
log
@strip htdigest and htpasswd before installing.
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.12 2000/01/28 18:24:19 beck Exp $
d444 1
a444 1
	cd ${.OBJDIR} && sh configure ${CONFIG_ARGS}
@


1.12
log
@More apache 1.3.11 changes
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.11 2000/01/04 17:43:12 beck Exp $
d469 2
a470 2
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 555 \
		    ${.OBJDIR}/$$i ${DESTDIR}${HTTPD_BINDIR}; \
@


1.11
log
@strip on install, from fgsch@@
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.10 1999/11/19 23:06:20 brad Exp $
d331 1
d353 1
d375 1
@


1.10
log
@make sure all the generated Makefile's are removed when running "make
cleandir".

ok'd by beck@@
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.9 1999/10/10 21:50:04 maja Exp $
d472 2
a473 2
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 555 \
		    ${.OBJDIR}/$$i ${DESTDIR}${HTTPD_SBINDIR}; \
@


1.9
log
@Make mips compile. -moj
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.8 1999/10/07 21:57:34 beck Exp $
d105 3
@


1.8
log
@Fix missing includes - Thanks <Peter.Galbavy@@knowledge.com>
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.7 1999/10/06 20:47:58 beck Exp $
d76 1
a76 1
.if ${MACHINE_ARCH} == "i386" || ${MACHINE_ARCH} == "m68k" || ${MACHINE_ARCH} == "sparc" || ${MACHINE_ARCH} == "mips"
@


1.7
log
@added new spiffy htdocs/openbsd_pb.gif to distribution install target.
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.6 1999/10/02 00:06:50 beck Exp $
d134 1
d136 1
d138 1
@


1.6
log
@pick up apxs and suexec makefiles, add BUGS section to
suexec mentioning that we do not install it setuid root
and that this must be done for it to work.
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.5 1999/10/01 23:20:25 beck Exp $
d188 3
a190 1
	htdocs/logo23.jpg htdocs/logo24.jpg htdocs/smalltitle.gif 
@


1.5
log
@Man pages would be nice.
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.4 1999/10/01 21:54:19 beck Exp $
d125 2
a126 1
	httpd.8 src/support/rotatelogs.8
d454 1
a454 1
install:
@


1.4
log
@change default values in here to sane ones for OpenBSD. suexec.h stuff
gets set in config, but DEFAULT_PATH in httpd.h was an interesting polyglot
of hoary old stuff from the RiscOS days...
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.3 1999/10/01 05:30:27 beck Exp $
a121 2
MAN1SRCS= \
	src/support/dbmmanage.1 src/support/htdigest.1 src/support/htpasswd.1
d123 1
a123 1
MAN8SRCS= \
d125 1
a125 2
	src/support/httpd.8 src/support/rotatelogs.8

d559 3
a561 1

@


1.3
log
@build all the extra modules, for arch's that support DSO
(not enabled by default).
enable suexec with reasonable OpenBSD paramters, but install
555 - user must change to be setuid before use.
Change configuration to use /dev/arandom
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.2 1999/09/30 21:26:45 beck Exp $
d522 5
@


1.2
log
@get xml and os include files
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.1 1999/09/29 06:42:44 beck Exp $
d43 53
a95 14
CONFIG_ARGS=	--with-layout=OpenBSD --enable-module=ssl

# If you support dynamic loading, enable the so module
.if ${MACHINE_ARCH} == "i386"
CONFIG_ARGS+= --enable-module=so
.endif
.if ${MACHINE_ARCH} == "m68k"
CONFIG_ARGS+= --enable-module=so
.endif
.if ${MACHINE_ARCH} == "sparc"
CONFIG_ARGS+= --enable-module=so
.endif
.if ${MACHINE_ARCH} == "mips"
CONFIG_ARGS+= --enable-module=so
a97 1

d120 1
a120 1
	src/support/logresolve src/support/rotatelogs
d468 6
@


1.1
log
@add makefile.bsd-wrapper
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.9 1999/03/17 18:25:56 deraadt Exp $
d91 31
a121 1
INCFILES= 	src/include/alloc.h \
d123 20
a142 32
	src/include/util_md5.h \
	src/include/util_date.h \
	src/include/scoreboard.h \
	src/include/rfc1413.h \
	src/include/multithread.h \
	src/include/httpd.h \
	src/include/http_vhost.h \
	src/include/http_request.h \
	src/include/http_protocol.h \
	src/include/http_main.h \
	src/include/http_log.h \
	src/include/http_core.h \
	src/include/http_config.h \
	src/include/http_conf_globals.h \
	src/include/hsregex.h \
	src/include/fnmatch.h \
	src/include/explain.h \
	src/include/conf.h \
	src/include/compat.h \
	src/include/buff.h \
	src/include/ap_mm.h \
	src/include/ap_sha1.h \
	src/include/ap_mmn.h \
	src/include/ap_md5.h \
	src/include/ap_hook.h \
	src/include/ap_ctype.h \
	src/include/ap_ctx.h \
	src/include/ap_config_auto.h \
	src/include/ap_config.h \
	src/include/ap_compat.h \
	src/include/ap.h \
	src/include/util_uri.h 
d410 6
@

