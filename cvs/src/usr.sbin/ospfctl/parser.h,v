head	1.13;
access;
symbols
	OPENBSD_6_1:1.13.0.26
	OPENBSD_6_1_BASE:1.13
	OPENBSD_6_0:1.13.0.22
	OPENBSD_6_0_BASE:1.13
	OPENBSD_5_9:1.13.0.18
	OPENBSD_5_9_BASE:1.13
	OPENBSD_5_8:1.13.0.20
	OPENBSD_5_8_BASE:1.13
	OPENBSD_5_7:1.13.0.12
	OPENBSD_5_7_BASE:1.13
	OPENBSD_5_6:1.13.0.16
	OPENBSD_5_6_BASE:1.13
	OPENBSD_5_5:1.13.0.14
	OPENBSD_5_5_BASE:1.13
	OPENBSD_5_4:1.13.0.10
	OPENBSD_5_4_BASE:1.13
	OPENBSD_5_3:1.13.0.8
	OPENBSD_5_3_BASE:1.13
	OPENBSD_5_2:1.13.0.6
	OPENBSD_5_2_BASE:1.13
	OPENBSD_5_1_BASE:1.13
	OPENBSD_5_1:1.13.0.4
	OPENBSD_5_0:1.13.0.2
	OPENBSD_5_0_BASE:1.13
	OPENBSD_4_9:1.12.0.2
	OPENBSD_4_9_BASE:1.12
	OPENBSD_4_8:1.11.0.4
	OPENBSD_4_8_BASE:1.11
	OPENBSD_4_7:1.11.0.2
	OPENBSD_4_7_BASE:1.11
	OPENBSD_4_6:1.8.0.16
	OPENBSD_4_6_BASE:1.8
	OPENBSD_4_5:1.8.0.12
	OPENBSD_4_5_BASE:1.8
	OPENBSD_4_4:1.8.0.10
	OPENBSD_4_4_BASE:1.8
	OPENBSD_4_3:1.8.0.8
	OPENBSD_4_3_BASE:1.8
	OPENBSD_4_2:1.8.0.6
	OPENBSD_4_2_BASE:1.8
	OPENBSD_4_1:1.8.0.4
	OPENBSD_4_1_BASE:1.8
	OPENBSD_4_0:1.8.0.2
	OPENBSD_4_0_BASE:1.8
	OPENBSD_3_9:1.6.0.4
	OPENBSD_3_9_BASE:1.6
	OPENBSD_3_8:1.6.0.2
	OPENBSD_3_8_BASE:1.6
	OPENBSD_3_7:1.5.0.2
	OPENBSD_3_7_BASE:1.5;
locks; strict;
comment	@ * @;


1.13
date	2011.05.09.12.25.35;	author claudio;	state Exp;
branches;
next	1.12;

1.12
date	2010.09.04.21.31.04;	author tedu;	state Exp;
branches;
next	1.11;

1.11
date	2010.02.19.10.35.52;	author dlg;	state Exp;
branches;
next	1.10;

1.10
date	2009.11.13.20.09.54;	author jsg;	state Exp;
branches;
next	1.9;

1.9
date	2009.11.02.20.23.29;	author claudio;	state Exp;
branches;
next	1.8;

1.8
date	2006.03.23.18.37.34;	author norby;	state Exp;
branches;
next	1.7;

1.7
date	2006.03.22.15.37.44;	author claudio;	state Exp;
branches;
next	1.6;

1.6
date	2005.05.12.19.10.12;	author norby;	state Exp;
branches;
next	1.5;

1.5
date	2005.03.15.22.09.43;	author claudio;	state Exp;
branches;
next	1.4;

1.4
date	2005.03.14.18.21.29;	author norby;	state Exp;
branches;
next	1.3;

1.3
date	2005.03.12.11.03.05;	author norby;	state Exp;
branches;
next	1.2;

1.2
date	2005.01.28.17.26.05;	author norby;	state Exp;
branches;
next	1.1;

1.1
date	2005.01.28.14.18.46;	author claudio;	state Exp;
branches;
next	;


desc
@@


1.13
log
@ospfctl bits for opaque LSA support.
tested and OK sthen@@
@
text
@/*	$OpenBSD: parser.h,v 1.12 2010/09/04 21:31:04 tedu Exp $ */

/*
 * Copyright (c) 2004 Esben Norby <norby@@openbsd.org>
 * Copyright (c) 2003, 2004 Henning Brauer <henning@@openbsd.org>
 *
 * Permission to use, copy, modify, and distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 */

#ifndef _PARSER_H_
#define _PARSER_H_

#include <sys/types.h>
#include <net/if.h>
#include <netinet/in.h>

enum actions {
	NONE,
	FIB,
	FIB_COUPLE,
	FIB_DECOUPLE,
	FIB_RELOAD,
	LOG_VERBOSE,
	LOG_BRIEF,
	SHOW,
	SHOW_SUM,
	SHOW_IFACE,
	SHOW_IFACE_DTAIL,
	SHOW_NBR,
	SHOW_NBR_DTAIL,
	SHOW_DB,
	SHOW_DBBYAREA,
	SHOW_DBEXT,
	SHOW_DBNET,
	SHOW_DBRTR,
	SHOW_DBSELF,
	SHOW_DBSUM,
	SHOW_DBASBR,
	SHOW_DBOPAQ,
	SHOW_RIB,
	SHOW_RIB_DTAIL,
	SHOW_FIB,
	SHOW_FIB_IFACE,
	RELOAD
};

struct parse_result {
	struct in_addr	addr;
	char		ifname[IF_NAMESIZE];
	int		flags;
	enum actions	action;
	u_int8_t	prefixlen;
};

struct parse_result	*parse(int, char *[]);
int			 parse_addr(const char *, struct in_addr *);
int			 parse_prefix(const char *, struct in_addr *,
			     u_int8_t *);

#endif	/* _PARSER_H_ */
@


1.12
log
@move some things around to make intentions clear.  not really a functional
change.  ok claudio
@
text
@d1 1
a1 1
/*	$OpenBSD: parser.h,v 1.11 2010/02/19 10:35:52 dlg Exp $ */
d49 1
@


1.11
log
@implement ospfctl fib reload.

this tells the daemon to resync the kernels list of interfaces and routes
with the daemons list. this is very useful if the routing socket overflows
and you want to sync things up again.

lots and lots of help from claudio@@
ok claudio@@
@
text
@d1 1
a1 1
/*	$OpenBSD: parser.h,v 1.9 2009/11/02 20:23:29 claudio Exp $ */
a64 2
const struct token	*match_token(const char *, const struct token *);
void			 show_valid_args(const struct token *);
@


1.10
log
@Don't use [] in function arguments when dealing with arrays
we don't know the size of, otherwise gcc >= 4 will error.

ok markus@@ deraadt@@
@
text
@d32 1
@


1.9
log
@Implement "log verbose" and "log brief" to enable or disable verbose debug
logging. henning, sthen, michele like the idea
@
text
@d1 1
a1 1
/*	$OpenBSD: parser.h,v 1.8 2006/03/23 18:37:34 norby Exp $ */
d64 2
a65 2
const struct token	*match_token(const char *, const struct token []);
void			 show_valid_args(const struct token []);
@


1.8
log
@List interfaces they way we list neighbors etc.
This makes it much easier to grep in the output.
The original format of "show interface" can be seen with
"show interface detail".

help and ok claudio@@
@
text
@d1 1
a1 1
/*	$OpenBSD: parser.h,v 1.7 2006/03/22 15:37:44 claudio Exp $ */
d32 2
@


1.7
log
@ospfd has the framework to couple and decouple the FIB. Add the needed
functionality to ospfctl for it.
NOTE: decoupling the FIB one a router may totaly fuck up the complete network.
Use it with care!
OK norby@@
@
text
@d1 1
a1 1
/*	$OpenBSD: parser.h,v 1.6 2005/05/12 19:10:12 norby Exp $ */
d35 1
@


1.6
log
@Add "show database asbr/external/network/router/self-originate/summary"
to ospfctl.

Show detailed information about the LSAs in the Link State Database.

ok claudio@@
@
text
@d1 1
a1 1
/*	$OpenBSD: parser.h,v 1.5 2005/03/15 22:09:43 claudio Exp $ */
d29 3
@


1.5
log
@bgpctl parts for "show fib".
OK norby@@ deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: parser.h,v 1.4 2005/03/14 18:21:29 norby Exp $ */
d36 6
@


1.4
log
@Add "show summary" to ospfctl.

ok claudio@@ henning@@
@
text
@d1 1
a1 1
/*	$OpenBSD: parser.h,v 1.3 2005/03/12 11:03:05 norby Exp $ */
d38 2
@


1.3
log
@Add "show rib" and "show rib detail" to ospfctl.

ok henning@@
@
text
@d1 1
a1 1
/*	$OpenBSD: parser.h,v 1.2 2005/01/28 17:26:05 norby Exp $ */
d30 1
a30 1
	SHOW_SUMMARY,
@


1.2
log
@Change my email address to the OpenBSD one since Ericsson has nothing to
do with this software, just happend to be my only valid email address at
the time.
@
text
@d1 1
a1 1
/*	$OpenBSD: parser.h,v 1.1 2005/01/28 14:18:46 claudio Exp $ */
d36 2
@


1.1
log
@Control program like bgpctl but this time for ospfd.
Currently only basic show commands work.

Not yet connected to the builds.
OK henning@@
@
text
@d1 1
a1 1
/*	$OpenBSD$ */
d4 1
a4 1
 * Copyright (c) 2004 Esben Norby <esben.norby@@ericsson.com>
@

