head	1.9;
access;
symbols
	OPENBSD_6_2:1.9.0.6
	OPENBSD_6_2_BASE:1.9
	OPENBSD_6_1:1.9.0.10
	OPENBSD_6_1_BASE:1.9
	OPENBSD_6_0:1.9.0.8
	OPENBSD_6_0_BASE:1.9
	OPENBSD_5_9:1.9.0.2
	OPENBSD_5_9_BASE:1.9
	OPENBSD_5_8:1.9.0.4
	OPENBSD_5_8_BASE:1.9
	OPENBSD_5_7:1.8.0.4
	OPENBSD_5_7_BASE:1.8
	OPENBSD_5_6:1.8.0.6
	OPENBSD_5_6_BASE:1.8
	OPENBSD_5_5:1.8.0.2
	OPENBSD_5_5_BASE:1.8
	OPENBSD_5_4:1.7.0.4
	OPENBSD_5_4_BASE:1.7
	OPENBSD_5_3:1.7.0.2
	OPENBSD_5_3_BASE:1.7;
locks; strict;
comment	@.\" @;


1.9
date	2015.03.13.22.41.54;	author eric;	state Exp;
branches;
next	1.8;
commitid	hlHV1XRUm9HRGcW1;

1.8
date	2013.11.13.08.57.24;	author eric;	state Exp;
branches;
next	1.7;

1.7
date	2013.01.26.09.37.23;	author gilles;	state Exp;
branches;
next	1.6;

1.6
date	2012.09.17.05.46.06;	author jmc;	state Exp;
branches;
next	1.5;

1.5
date	2012.09.12.18.56.34;	author gilles;	state Exp;
branches;
next	1.4;

1.4
date	2012.09.12.18.36.24;	author gilles;	state Exp;
branches;
next	1.3;

1.3
date	2012.09.12.18.34.51;	author gilles;	state Exp;
branches;
next	1.2;

1.2
date	2012.09.12.18.30.38;	author gilles;	state Exp;
branches;
next	1.1;

1.1
date	2012.09.12.17.53.32;	author gilles;	state Exp;
branches;
next	;


desc
@@


1.9
log
@typo
@
text
@.\"	$OpenBSD: forward.5,v 1.8 2013/11/13 08:57:24 eric Exp $
.\"
.\" Copyright (c) 2012 Gilles Chehade <gilles@@poolp.org>
.\"
.\" Permission to use, copy, modify, and distribute this software for any
.\" purpose with or without fee is hereby granted, provided that the above
.\" copyright notice and this permission notice appear in all copies.
.\"
.\" THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
.\" WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
.\" MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
.\" ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
.\" WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
.\" ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
.\" OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
.\"
.Dd $Mdocdate: November 13 2013 $
.Dt FORWARD 5
.Os
.Sh NAME
.Nm forward
.Nd email forwarding information file
.Sh DESCRIPTION
Users may put a
.Nm .forward
file in their home directory.
If this file exists,
.Xr smtpd 8
forwards email to the destinations specified therein.
.Pp
A
.Nm .forward
file contains a list of expansion values, as described in
.Xr aliases 5 .
Each expansion value should be on a line by itself.
However, the
.Nm .forward
mechanism differs from the aliases mechanism in that it disallows
file inclusion
.Pq :include:
and it performs expansion under the user ID of the
.Nm .forward
file owner.
.Pp
Permissions on the
.Nm .forward
file are very strict and expansion is rejected if the file is
group or world-writable;
if the home directory is group writeable;
or if the file is not owned by the user.
.Pp
Users should avoid editing directly the
.Nm .forward
file to prevent delivery failures from occurring if a message
arrives while the file is not fully written.
The best option is to use a temporary file and use the
.Xr mv 1
command to atomically overwrite the former
.Nm .forward .
Alternatively, setting the
.Xr sticky 8
bit on the home directory will cause the
.Nm .forward
lookup to return a temporary failure, causing mails to be deferred.
.Sh FILES
.Bl -tag -width "~/.forwardXXX" -compact
.It Pa ~/.forward
Email forwarding information.
.El
.Sh EXAMPLES
The following file forwards mail to
.Dq user@@example.com ,
and pipes the same mail to
.Dq examplemda .
.Bd -literal -offset indent
# empty lines are ignored

user@@example.com	# anything after # is ignored
"|/path/to/examplemda"
.Ed
.Sh SEE ALSO
.Xr aliases 5 ,
.Xr smtpd 8
@


1.8
log
@disable .forward lookup if sticky bit is set on homedir
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d17 1
a17 1
.Dd $Mdocdate: January 26 2013 $
d38 1
a38 1
mechanism differs from the aliases mechanism in that is disallows
@


1.7
log
@Sync with our smtpd repo:

* first bricks of ldap and sqlite support (not finished but both working)
* new table API to replace map API, all lookups are done through tables
* improved handling of temporary errors throughout the daemon
* improved scheduler and mta logic: connection reuse, optimizes batches
* improved queue: more tolerant to admin errors, new layout, less disk-IO
* improved memory usage under high load
* SSL certs/keys isolated to lookup process to avoid facing network
* VIRTUAL support improved, fully virtual setups possible now
* runtime tracing of processes through smtpctl trace
* ssl_privsep.c sync-ed with relayd
* ssl.c no longer contains smtpd specific interfaces
* smtpd-specific ssl bits moved to ssl_smtpd.c
* update mail address in copyright

FLUSH YOUR QUEUE. FLUSH YOUR QUEUE. FLUSH YOUR QUEUE. FLUSH YOUR QUEUE.

smtpd.conf(5) simplified, it will require adaptations

ok eric@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: forward.5,v 1.6 2012/09/17 05:46:06 jmc Exp $
d17 1
a17 1
.Dd $Mdocdate: September 17 2012 $
d51 14
@


1.6
log
@various tweaks; ok gilles
@
text
@d1 1
a1 1
.\"	$OpenBSD: forward.5,v 1.5 2012/09/12 18:56:34 gilles Exp $
d3 1
a3 1
.\" Copyright (c) 2012 Gilles Chehade <gilles@@openbsd.org>
d17 1
a17 1
.Dd $Mdocdate: September 12 2012 $
@


1.5
log
@reword a bit
@
text
@d1 1
a1 1
.\"	$OpenBSD: forward.5,v 1.4 2012/09/12 18:36:24 gilles Exp $
d25 1
a25 1
.Pa .forward
d29 1
a29 1
will expand it to new delivery envelopes.
d32 1
a32 1
.Pa .forward
d37 1
a37 1
.Pa .forward
d39 4
a42 2
file inclusion and it performs expansion under the user ID of the
.Pa .forward
d46 5
a50 4
.Pa .forward
file are very strict and expansion will be rejected if file is
group or world-writable, if home directory is group writeable,
or if file is not owned by the user.
d52 1
a52 1
.Bl -tag -width ~/.forward -compact
d54 1
a54 1
email forwarding information
d57 4
a61 1
# anything after # is ignored
d64 1
a64 1
user@@example.com
@


1.4
log
@missed a word :-)
@
text
@d1 1
a1 1
.\"	$OpenBSD: forward.5,v 1.3 2012/09/12 18:34:51 gilles Exp $
d33 1
a33 2
file contains one or more lines where each line is a valid expansion
value according to
d35 1
@


1.3
log
@- e-mail -> email , as discussed with jmc@@ on aliases(5)
- reword first paragraph
- $HOME -> ~/
@
text
@d1 1
a1 1
.\"	$OpenBSD: forward.5,v 1.2 2012/09/12 18:30:38 gilles Exp $
d26 1
a26 1
in their home directory.
@


1.2
log
@- reword paragraph on ~/.forward permissions
@
text
@d1 1
a1 1
.\"	$OpenBSD: forward.5,v 1.1 2012/09/12 17:53:32 gilles Exp $
d24 1
a24 1
Users may put a file named
d49 3
a51 3
.Bl -tag -width $HOME/.forward -compact
.It Pa $HOME/.forward
e-mail forwarding information
@


1.1
log
@- we lacked man pages for the aliases and forward file formats rewrote from
  scratch using the sendmail pages as a base.

with a bit of rewording by jmc@@, we'll improve further in base
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d17 1
a17 1
.Dd $Mdocdate$
d43 1
d45 3
a47 5
files must not be group or world writable.
The user's home directory should not be group writable.
The
.Pa .forward
file must be owned by and readable by the indicated user.
@

