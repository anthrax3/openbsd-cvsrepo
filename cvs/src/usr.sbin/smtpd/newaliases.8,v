head	1.11;
access;
symbols
	OPENBSD_6_1:1.11.0.8
	OPENBSD_6_1_BASE:1.11
	OPENBSD_6_0:1.11.0.6
	OPENBSD_6_0_BASE:1.11
	OPENBSD_5_9:1.11.0.2
	OPENBSD_5_9_BASE:1.11
	OPENBSD_5_8:1.10.0.12
	OPENBSD_5_8_BASE:1.10
	OPENBSD_5_7:1.10.0.6
	OPENBSD_5_7_BASE:1.10
	OPENBSD_5_6:1.10.0.8
	OPENBSD_5_6_BASE:1.10
	OPENBSD_5_5:1.10.0.4
	OPENBSD_5_5_BASE:1.10
	OPENBSD_5_4:1.10.0.2
	OPENBSD_5_4_BASE:1.10
	OPENBSD_5_3:1.9.0.2
	OPENBSD_5_3_BASE:1.9
	OPENBSD_5_2:1.8.0.8
	OPENBSD_5_2_BASE:1.8
	OPENBSD_5_1_BASE:1.8
	OPENBSD_5_1:1.8.0.6
	OPENBSD_5_0:1.8.0.4
	OPENBSD_5_0_BASE:1.8
	OPENBSD_4_9:1.8.0.2
	OPENBSD_4_9_BASE:1.8
	OPENBSD_4_8:1.7.0.6
	OPENBSD_4_8_BASE:1.7
	OPENBSD_4_7:1.7.0.2
	OPENBSD_4_7_BASE:1.7
	OPENBSD_4_6:1.7.0.4
	OPENBSD_4_6_BASE:1.7
	OPENBSD_4_5:1.4.0.2
	OPENBSD_4_5_BASE:1.4;
locks; strict;
comment	@.\" @;


1.11
date	2015.12.22.17.52.21;	author jmc;	state Exp;
branches;
next	1.10;
commitid	sEE4ZXx1QYUm5bkH;

1.10
date	2013.07.19.12.22.58;	author eric;	state Exp;
branches;
next	1.9;

1.9
date	2013.01.26.09.37.23;	author gilles;	state Exp;
branches;
next	1.8;

1.8
date	2010.09.03.11.22.36;	author jmc;	state Exp;
branches;
next	1.7;

1.7
date	2009.04.16.20.13.13;	author sobrado;	state Exp;
branches;
next	1.6;

1.6
date	2009.03.23.21.48.40;	author jmc;	state Exp;
branches;
next	1.5;

1.5
date	2009.03.16.21.15.40;	author gilles;	state Exp;
branches;
next	1.4;

1.4
date	2009.02.17.23.46.03;	author jacekm;	state Exp;
branches;
next	1.3;

1.3
date	2008.12.17.22.59.36;	author jacekm;	state dead;
branches;
next	1.2;

1.2
date	2008.12.04.06.22.05;	author jmc;	state Exp;
branches;
next	1.1;

1.1
date	2008.12.03.21.13.18;	author gilles;	state Exp;
branches;
next	;


desc
@@


1.11
log
@make it clear this needs to be run only for db files
since smtpd has switched to using plain files by default;

ok sunil gilles
@
text
@.\"	$OpenBSD: newaliases.8,v 1.10 2013/07/19 12:22:58 eric Exp $
.\"
.\" Copyright (c) 2009 Jacek Masiulaniec <jacekm@@openbsd.org>
.\" Copyright (c) 2008-2009 Gilles Chehade <gilles@@poolp.org>
.\"
.\" Permission to use, copy, modify, and distribute this software for any
.\" purpose with or without fee is hereby granted, provided that the above
.\" copyright notice and this permission notice appear in all copies.
.\"
.\" THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
.\" WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
.\" MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
.\" ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
.\" WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
.\" ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
.\" OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
.\"
.Dd $Mdocdate: July 19 2013 $
.Dt NEWALIASES 8
.Os
.Sh NAME
.Nm newaliases
.Nd rebuild the database for the mail aliases file
.Sh SYNOPSIS
.Nm newaliases
.Op Fl f Ar file
.Sh DESCRIPTION
.Nm
rebuilds the random access database for the mail aliases file,
the location of which is defined in
.Xr smtpd.conf 5 ,
and which by default is
.Pa /etc/mail/aliases .
If using database (db) files
this utility must be run every time the
.Xr aliases 5
file is changed.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl f Ar file
Use
.Ar file
as the configuration file,
instead of the default
.Pa /etc/mail/smtpd.conf .
.El
.Pp
Note: this utility is provided for sendmail compatibility.
The preferred way of rebuilding the database is with
.Xr makemap 8 :
.Bd -literal -offset indent
# makemap -t aliases /etc/mail/aliases
.Ed
.Sh FILES
.Bl -tag -width "/etc/mail/aliasesXXX" -compact
.It Pa /etc/mail/aliases
List of local user mail aliases.
.It Pa /etc/mail/virtual
List of virtual host aliases.
.El
.Sh EXIT STATUS
.Ex -std newaliases
.Sh SEE ALSO
.Xr smtpd.conf 5 ,
.Xr makemap 8
.Sh HISTORY
The
.Nm
command first appeared in
.Ox 4.6
as a replacement for the equivalent command shipped with sendmail.
@


1.10
log
@typo in copyright
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d18 1
a18 1
.Dd $Mdocdate: January 26 2013 $
d34 4
a37 2
This utility must be run each time the aliases file is changed
in order for the change to take effect.
@


1.9
log
@Sync with our smtpd repo:

* first bricks of ldap and sqlite support (not finished but both working)
* new table API to replace map API, all lookups are done through tables
* improved handling of temporary errors throughout the daemon
* improved scheduler and mta logic: connection reuse, optimizes batches
* improved queue: more tolerant to admin errors, new layout, less disk-IO
* improved memory usage under high load
* SSL certs/keys isolated to lookup process to avoid facing network
* VIRTUAL support improved, fully virtual setups possible now
* runtime tracing of processes through smtpctl trace
* ssl_privsep.c sync-ed with relayd
* ssl.c no longer contains smtpd specific interfaces
* smtpd-specific ssl bits moved to ssl_smtpd.c
* update mail address in copyright

FLUSH YOUR QUEUE. FLUSH YOUR QUEUE. FLUSH YOUR QUEUE. FLUSH YOUR QUEUE.

smtpd.conf(5) simplified, it will require adaptations

ok eric@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: newaliases.8,v 1.8 2010/09/03 11:22:36 jmc Exp $
d4 1
a4 1
.\" Copyright (c) 2008-2009 Gilles Chechade <gilles@@poolp.org>
d18 1
a18 1
.Dd $Mdocdate: September 3 2010 $
@


1.8
log
@add an EXIT STATUS section for /usr/sbin;
@
text
@d1 1
a1 1
.\"	$OpenBSD: newaliases.8,v 1.7 2009/04/16 20:13:13 sobrado Exp $
d4 1
a4 1
.\" Copyright (c) 2008-2009 Gilles Chechade <gilles@@openbsd.org>
d18 1
a18 1
.Dd $Mdocdate: April 16 2009 $
@


1.7
log
@fix a few more typos found by spell(1); rectify a double "with" pointed out
by jmc@@ while looking at this diff.

ok jmc@@, reyk@@ (for the hostapd part)
@
text
@d1 1
a1 1
.\"	$OpenBSD: newaliases.8,v 1.6 2009/03/23 21:48:40 jmc Exp $
d18 1
a18 1
.Dd $Mdocdate: March 23 2009 $
a52 2
.Pp
.Ex -std newaliases
d60 2
@


1.6
log
@various minor improvements; ok jacekm gilles
@
text
@d1 1
a1 1
.\"	$OpenBSD: newaliases.8,v 1.5 2009/03/16 21:15:40 gilles Exp $
d18 1
a18 1
.Dd $Mdocdate: March 16 2009 $
d47 1
a47 1
Note: this utility is provided for sendmail compatibilty.
@


1.5
log
@- mention /etc/mail/virtual in FILES section
@
text
@d1 1
a1 1
.\"	$OpenBSD: newaliases.8,v 1.4 2009/02/17 23:46:03 jacekm Exp $
d18 1
a18 1
.Dd $Mdocdate: February 17 2009 $
d34 1
a34 1
This utility must be run each time aliases file is changed
d47 1
a47 1
Note: this utility is provided for Sendmail compatibilty.
d51 1
a51 1
makemap -t aliases /etc/mail/aliases
d60 1
a60 1
List of virtual hosts aliases.
d70 1
a70 1
as the replacement for equivalent command shipped with sendmail.
@


1.4
log
@sync makemap man page with the code. create separate page for newaliases
which points at makemap as the preferred utility; ok gilles@@
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d18 1
a18 1
.Dd $Mdocdate: February 14 2009 $
d58 3
a60 1
List of user mail aliases.
@


1.3
log
@Merge newaliases into makemap.

ok gilles@@
@
text
@d1 1
a1 6
.\"	$OpenBSD: newaliases.8,v 1.2 2008/12/04 06:22:05 jmc Exp $
.\" Copyright (c) 1998-2001 Sendmail, Inc. and its suppliers.
.\"	All rights reserved.
.\" Copyright (c) 1983, 1997 Eric P. Allman.  All rights reserved.
.\" Copyright (c) 1985, 1990, 1993
.\"	The Regents of the University of California.  All rights reserved.
d3 2
a4 3
.\" By using this file, you agree to the terms and conditions set
.\" forth in the LICENSE file which can be found at the top level of
.\" the sendmail distribution.
d6 3
d10 7
a16 1
.\"     $Sendmail: newaliases.1,v 8.19 2001/10/10 03:23:17 ca Exp $
d18 1
a18 1
.Dd $Mdocdate: December 4 2008 $
d26 1
d29 4
a32 1
rebuilds the random access database for the mail aliases file
d34 1
a34 1
It must be run each time this file is changed
d37 17
d58 1
a58 1
The mail aliases file.
d61 2
a62 4
.Xr aliases 5 ,
.Xr mailer.conf 5 ,
.Xr makemap 8 ,
.Xr smtpd 8
d64 1
a64 1
This
d67 2
a68 4
.Ox 4.5
as a replacement for the
.Nm
command that was shipped with sendmail.
@


1.2
log
@some basic cleanup;
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d15 1
a15 1
.Dd $Mdocdate$
@


1.1
log
@smtpd's aliases db is incompatible with sendmail's and requires a distinct
	newaliases utility. newaliases links to the aliases.c file from
	smtpd and only provides a frontend to parse aliases file.
	contains code from pyr@@, chl@@ and I, it should have been imported
	with smtpd.
@
text
@d1 1
d15 1
a15 1
.Dd October 21, 2008
d20 1
a20 1
.Nd rebuild the data base for the mail aliases file
d25 1
a25 1
rebuilds the random access data base for the mail aliases file
d30 1
a30 3
The
.Nm
utility exits 0 on success, and >0 if an error occurs.
d32 1
a32 1
.Bl -tag -width /etc/mail/aliases -compact
d34 1
a34 1
The mail aliases file
d42 1
a42 1
The
d44 1
a44 1
command appeared in
d46 1
a46 1
as a replacement for the older
d48 1
a48 2
utility that was shipped with
.Xr sendmail .
@

