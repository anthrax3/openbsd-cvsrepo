head	1.8;
access;
symbols
	OPENBSD_4_5:1.4.0.2
	OPENBSD_4_5_BASE:1.4;
locks; strict;
comment	@# @;


1.8
date	2009.03.17.00.00.16;	author gilles;	state dead;
branches;
next	1.7;

1.7
date	2009.03.16.23.40.28;	author gilles;	state Exp;
branches;
next	1.6;

1.6
date	2009.03.09.01.43.19;	author gilles;	state Exp;
branches;
next	1.5;

1.5
date	2009.03.08.21.51.22;	author gilles;	state Exp;
branches;
next	1.4;

1.4
date	2008.12.20.00.22.09;	author gilles;	state Exp;
branches;
next	1.3;

1.3
date	2008.12.06.02.04.56;	author gilles;	state Exp;
branches;
next	1.2;

1.2
date	2008.11.05.12.14.45;	author sobrado;	state Exp;
branches;
next	1.1;

1.1
date	2008.11.01.21.35.28;	author gilles;	state Exp;
branches;
next	;


desc
@@


1.8
log
@move smtpd.conf to etc/mail/ directory. it is not installed yet by the
build
@
text
@#	$OpenBSD: smtpd.conf,v 1.7 2009/03/16 23:40:28 gilles Exp $

# This is the smtpd server system-wide configuration file.
# See smtpd.conf(5) for more information.

listen on lo0

map "aliases" { source db "/etc/mail/aliases.db" }

accept for local deliver to mbox
accept for all relay
@


1.7
log
@change smtpd.conf to what it will be by default:
- only listen on lo0
- support aliases
- accept mail for "localhost" and the system hostname
- accept relaying mail for all domains
@
text
@d1 1
a1 1
#	$OpenBSD: smtpd.conf,v 1.6 2009/03/09 01:43:19 gilles Exp $
@


1.6
log
@add basic support for outgoing authentication (AUTH PLAIN over ssl) which
can be turned on by adding "enable auth" to a "relay via" rule. this made
me rework the mx resolution so that it is done by the mta process and not
the runner process anymore.
@
text
@d1 1
a1 1
#	$OpenBSD: smtpd.conf,v 1.5 2009/03/08 21:51:22 gilles Exp $
d3 2
a4 3
listen on lo0 port 25
#ssmtp listen on localhost port 465 enable auth
hostname localhost
d6 1
a6 3
#map "aliases"		{ source db "/etc/mail/aliases.db" }
#map "virtual"		{ source db "/etc/mail/virtual.db" }
#map "secrets"		{ source db "/etc/mail/secrets.db" }
d8 1
a8 3
accept for domain "localhost" deliver to mbox
#accept for domain "localhost" deliver to maildir "~/Maildir"
#accept for domain "localhost" deliver to mda "/usr/local/bin/mymda -u %u"
d10 1
a11 2
#accept for all relay via "mx.example.org"
#accept for all relay via ssl "mx.example.org" enable auth
@


1.5
log
@adapt example to reflect a recent change in parse.y
@
text
@d1 1
a1 1
#	$OpenBSD: smtpd.conf,v 1.4 2008/12/20 00:22:09 gilles Exp $
a6 2
local = "( 127.0.0.1, ::1 )"

d9 1
d12 6
a17 1
accept from $local for all relay
@


1.4
log
@- update smtpd.conf to provide an example of an auth enabled listener
- update smtpd.conf.5 just to provide an example, a better description of
	"enable auth" will come when im done implementing it ;)
@
text
@d1 1
a1 1
#	$OpenBSD: smtpd.conf,v 1.3 2008/12/06 02:04:56 gilles Exp $
d12 1
a12 1
accept for domain "localhost" deliver to mbox "/var/mail/%u"
@


1.3
log
@- it is now possible to specify an interface instead of an address or a
	hostname in a listen statement (ie: listen on lo0)
	request by deraadt@@ a while ago, ok jacekm@@
@
text
@d1 1
a1 1
#	$OpenBSD: smtpd.conf,v 1.2 2008/11/05 12:14:45 sobrado Exp $
d4 1
a4 1
#ssmtp listen on localhost port 465
@


1.2
log
@add a few missing id tags; there are a bunch of files, and developers
will probably miss this change when working on more important matters,
so it is probably better to sort them now.  there is a risk of losing
the tags if a change needs to be reverted too.

written with excellent advice from jmc@@

ok gilles@@
@
text
@d1 1
a1 1
#	$OpenBSD$
d3 1
a3 1
listen on localhost port 25
@


1.1
log
@smtpd is a smtp server implementation for OpenBSD. It is a work in progress
which still lacks many features. bringing it in tree will help working on it
more easily.

"at this stage it should go in" henning@@, "move ahead" deraadt@@
@
text
@d1 2
@

