head	1.37;
access;
symbols
	OPENBSD_6_1:1.34.0.4
	OPENBSD_6_1_BASE:1.34
	OPENBSD_6_0:1.33.0.4
	OPENBSD_6_0_BASE:1.33
	OPENBSD_5_9:1.33.0.2
	OPENBSD_5_9_BASE:1.33
	OPENBSD_5_8:1.31.0.4
	OPENBSD_5_8_BASE:1.31
	OPENBSD_5_7:1.29.0.2
	OPENBSD_5_7_BASE:1.29
	OPENBSD_5_6:1.24.0.10
	OPENBSD_5_6_BASE:1.24
	OPENBSD_5_5:1.24.0.8
	OPENBSD_5_5_BASE:1.24
	OPENBSD_5_4:1.24.0.4
	OPENBSD_5_4_BASE:1.24
	OPENBSD_5_3:1.24.0.2
	OPENBSD_5_3_BASE:1.24
	OPENBSD_5_2:1.23.0.4
	OPENBSD_5_2_BASE:1.23
	OPENBSD_5_1_BASE:1.23
	OPENBSD_5_1:1.23.0.2
	OPENBSD_5_0:1.22.0.10
	OPENBSD_5_0_BASE:1.22
	OPENBSD_4_9:1.22.0.8
	OPENBSD_4_9_BASE:1.22
	OPENBSD_4_8:1.22.0.6
	OPENBSD_4_8_BASE:1.22
	OPENBSD_4_7:1.22.0.2
	OPENBSD_4_7_BASE:1.22
	OPENBSD_4_6:1.22.0.4
	OPENBSD_4_6_BASE:1.22
	OPENBSD_4_5:1.21.0.2
	OPENBSD_4_5_BASE:1.21
	OPENBSD_4_4:1.20.0.2
	OPENBSD_4_4_BASE:1.20
	OPENBSD_4_3:1.19.0.2
	OPENBSD_4_3_BASE:1.19
	OPENBSD_4_2:1.16.0.2
	OPENBSD_4_2_BASE:1.16
	OPENBSD_4_1:1.15.0.2
	OPENBSD_4_1_BASE:1.15
	OPENBSD_4_0:1.14.0.2
	OPENBSD_4_0_BASE:1.14
	OPENBSD_3_9:1.9.0.6
	OPENBSD_3_9_BASE:1.9
	OPENBSD_3_8:1.9.0.4
	OPENBSD_3_8_BASE:1.9
	OPENBSD_3_7:1.9.0.2
	OPENBSD_3_7_BASE:1.9
	OPENBSD_3_6:1.7.0.2
	OPENBSD_3_6_BASE:1.7;
locks; strict;
comment	@.\" @;


1.37
date	2017.08.10.22.59.42;	author job;	state Exp;
branches;
next	1.36;
commitid	VMNYIAmrEkPPtNWu;

1.36
date	2017.05.31.06.23.19;	author jmc;	state Exp;
branches;
next	1.35;
commitid	algz69aIVVhQZKsm;

1.35
date	2017.05.30.23.30.48;	author benno;	state Exp;
branches;
next	1.34;
commitid	QAWRWuyNn05Y7pSZ;

1.34
date	2016.12.30.10.24.15;	author jmc;	state Exp;
branches;
next	1.33;
commitid	sIAMw1nHVcf1H5AB;

1.33
date	2015.10.23.14.52.20;	author phessler;	state Exp;
branches;
next	1.32;
commitid	37dFIvtgNCa7AEy2;

1.32
date	2015.08.28.02.59.29;	author deraadt;	state Exp;
branches;
next	1.31;
commitid	Fzb5u2zGw6GOygTE;

1.31
date	2015.05.18.11.10.03;	author dtucker;	state Exp;
branches;
next	1.30;
commitid	wB16S3VVP0gvIZFZ;

1.30
date	2015.03.26.20.34.54;	author jmc;	state Exp;
branches;
next	1.29;
commitid	EPvbYrhVzbYQPMhY;

1.29
date	2015.02.16.19.25.35;	author jmc;	state Exp;
branches;
next	1.28;
commitid	dgeCvZaHkIYWjFHK;

1.28
date	2015.02.16.12.56.43;	author reyk;	state Exp;
branches;
next	1.27;
commitid	0PrR6lh38Pu6QRxi;

1.27
date	2015.02.10.19.21.16;	author jmc;	state Exp;
branches;
next	1.26;
commitid	vnAXL7IoKvxDFE80;

1.26
date	2015.02.10.07.19.52;	author reyk;	state Exp;
branches;
next	1.25;
commitid	s04c1LJEwciKvEc1;

1.25
date	2015.02.10.06.40.08;	author reyk;	state Exp;
branches;
next	1.24;
commitid	pXoTR74Ztt0R3SV0;

1.24
date	2012.09.20.12.43.16;	author patrick;	state Exp;
branches;
next	1.23;

1.23
date	2011.09.21.15.41.30;	author phessler;	state Exp;
branches;
next	1.22;

1.22
date	2009.05.18.20.08.24;	author stevesk;	state Exp;
branches;
next	1.21;

1.21
date	2008.10.10.12.17.09;	author sthen;	state Exp;
branches;
next	1.20;

1.20
date	2008.06.09.16.37.35;	author ckuethe;	state Exp;
branches;
next	1.19;

1.19
date	2007.09.13.07.28.32;	author jmc;	state Exp;
branches;
next	1.18;

1.18
date	2007.09.13.05.17.24;	author ckuethe;	state Exp;
branches;
next	1.17;

1.17
date	2007.09.12.21.08.45;	author ckuethe;	state Exp;
branches;
next	1.16;

1.16
date	2007.05.31.19.20.26;	author jmc;	state Exp;
branches;
next	1.15;

1.15
date	2006.10.08.22.53.33;	author stevesk;	state Exp;
branches;
next	1.14;

1.14
date	2006.05.29.20.39.41;	author jmc;	state Exp;
branches;
next	1.13;

1.13
date	2006.05.29.18.47.19;	author jmc;	state Exp;
branches;
next	1.12;

1.12
date	2006.05.28.07.58.52;	author jmc;	state Exp;
branches;
next	1.11;

1.11
date	2006.05.27.17.01.36;	author henning;	state Exp;
branches;
next	1.10;

1.10
date	2006.05.23.14.29.16;	author henning;	state Exp;
branches;
next	1.9;

1.9
date	2004.11.08.19.09.19;	author otto;	state Exp;
branches;
next	1.8;

1.8
date	2004.11.07.21.42.33;	author jmc;	state Exp;
branches;
next	1.7;

1.7
date	2004.07.13.19.51.38;	author jmc;	state Exp;
branches;
next	1.6;

1.6
date	2004.07.09.14.56.57;	author jaredy;	state Exp;
branches;
next	1.5;

1.5
date	2004.07.09.10.56.35;	author henning;	state Exp;
branches;
next	1.4;

1.4
date	2004.07.07.08.36.26;	author jmc;	state Exp;
branches;
next	1.3;

1.3
date	2004.07.07.05.54.16;	author henning;	state Exp;
branches;
next	1.2;

1.2
date	2004.07.07.02.16.07;	author henning;	state Exp;
branches;
next	1.1;

1.1
date	2004.06.18.04.11.24;	author henning;	state Exp;
branches;
next	;


desc
@@


1.37
log
@naddy@@ reported confusion on why "query from" seemed to be ignored in
some cases.

OK naddy@@ henning@@
@
text
@.\" $OpenBSD: ntpd.conf.5,v 1.36 2017/05/31 06:23:19 jmc Exp $
.\"
.\" Copyright (c) 2003, 2004 Henning Brauer <henning@@openbsd.org>
.\"
.\" Permission to use, copy, modify, and distribute this software for any
.\" purpose with or without fee is hereby granted, provided that the above
.\" copyright notice and this permission notice appear in all copies.
.\"
.\" THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
.\" WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
.\" MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
.\" ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
.\" WHATSOEVER RESULTING FROM LOSS OF MIND, USE, DATA OR PROFITS, WHETHER IN
.\" AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT
.\" OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
.\"
.Dd $Mdocdate: May 31 2017 $
.Dt NTPD.CONF 5
.Os
.Sh NAME
.Nm ntpd.conf
.Nd Network Time Protocol daemon configuration file
.Sh DESCRIPTION
This manual page describes the format of the
.Xr ntpd 8
configuration file.
.Pp
.Nm
has the following format:
.Pp
Empty lines and lines beginning with the
.Sq #
character are ignored.
.Pp
Keywords may be specified multiple times within the configuration file.
The basic configuration options are as follows:
.Bl -tag -width Ds
.It Xo Ic listen on Ar address
.Op Ic rtable Ar table-id
.Xc
Specify a local IP address or a hostname the
.Xr ntpd 8
daemon should listen on.
If it appears multiple times,
.Xr ntpd 8
will listen on each given address.
If
.Sq *
is given as an address,
.Xr ntpd 8
will listen on all local addresses using the specified routing table.
.Xr ntpd 8
does not listen on any address by default.
The optional
.Ic rtable
keyword will specify which routing table to listen on.
By default
.Xr ntpd 8
will listen using the current routing table.
For example:
.Bd -literal -offset indent
listen on *
.Ed
.Pp
or
.Bd -literal -offset indent
listen on 127.0.0.1
listen on ::1
listen on 127.0.0.1 rtable 4
.Ed
.It Ic query from Ar address
Specify a local IP address the
.Xr ntpd 8
daemon should use for outgoing queries to subsequently specified servers.
For example:
.Bd -literal -offset indent
query from 192.0.2.1
query from 2001:db8::1
.Ed
.It Xo Ic sensor Ar device
.Op Ic correction Ar microseconds
.Op Ic weight Ar weight-value
.Op Ic refid Ar string
.Op Ic stratum Ar stratum-value
.Xc
Specify a timedelta sensor device
.Xr ntpd 8
should use.
The sensor can be specified multiple times:
.Xr ntpd 8
will use each given sensor that actually exists.
Non-existent sensors are ignored.
If
.Sq *
is given as device name,
.Xr ntpd 8
will use all timedelta sensors it finds.
.Xr ntpd 8
does not use any timedelta sensor by default.
For example:
.Bd -literal -offset indent
sensor *
sensor nmea0
.Ed
.Pp
An optional correction in microseconds can be given to compensate
for the sensor's offset.
The maximum correction is 127 seconds.
For example, if a DCF77 receiver is lagging 70ms behind
actual time:
.Bd -literal -offset indent
sensor udcf0 correction 70000
.Ed
.Pp
The optional
.Ic weight
keyword permits finer control over the relative importance
of time sources (servers or sensor devices).
Weights are specified in the range 1 to 10;
if no weight is given,
the default is 1.
A server with a weight of 5, for example,
will have five times more influence on time offset calculation
than a server with a weight of 1.
.Pp
An optional reference ID string - up to 4 ASCII characters - can be
given to publish the sensor type to clients.
RFC 2030 suggests some common reference identifiers, but new identifiers
"can be contrived as appropriate."
If an ID string is not given,
.Xr ntpd 8
will use a generic reference ID.
For example:
.Bd -literal -offset indent
sensor nmea0 refid GPS
.Ed
.Pp
A stratum value other than the default of 1 can be assigned using the
.Ic stratum
keyword.
.It Xo Ic server Ar address
.Op Ic weight Ar weight-value
.Xc
Specify the IP address or the hostname of an NTP
server to synchronize to.
If it appears multiple times,
.Xr ntpd 8
will try to synchronize to all of the servers specified.
If a hostname resolves to multiple IPv4 and/or IPv6 addresses,
.Xr ntpd 8
uses the first address.
If it does not get a reply,
.Xr ntpd 8
retries with the next address and continues to do so until a working address
is found.
For example:
.Bd -literal -offset indent
server 10.0.0.2 weight 5
server ntp.example.org weight 1
.Ed
.Pp
To provide redundancy, it is good practice to configure multiple servers.
In general, best accuracy is obtained by using servers that have a low
network latency.
.It Xo Ic servers Ar address
.Op Ic weight Ar weight-value
.Xc
As with
.Cm server ,
specify the IP address or hostname of an NTP server to synchronize to.
If it appears multiple times,
.Xr ntpd 8
will try to synchronize to all of the servers specified.
Should the hostname resolve to multiple IP addresses,
.Xr ntpd 8
will try to synchronize to all of them.
For example:
.Bd -literal -offset indent
servers pool.ntp.org
servers pool.ntp.org weight 5
.Ed
.El
.Sh CONSTRAINTS
.Xr ntpd 8
can be configured to query the
.Sq Date
from trusted HTTPS servers via TLS.
This time information is not used for precision but acts as an
authenticated constraint,
thereby reducing the impact of unauthenticated NTP
man-in-the-middle attacks.
Received NTP packets with time information falling outside of a range
near the constraint will be discarded and such NTP servers
will be marked as invalid.
.Bl -tag -width Ds
.It Ic constraint from Ar url
Specify the URL, IP address or the hostname of an HTTPS server to
provide a constraint.
If
.Ic constraint from
is used more than once,
.Xr ntpd 8
will calculate a median constraint from all the servers specified.
.Bd -literal -offset indent
server ntp.example.org
constraint from www.example.com
.Ed
.It Ic constraints from Ar url
As with
.Ic constraint from ,
specify the URL, IP address or the hostname of an HTTPS server to
provide a constraint.
Should the hostname resolve to multiple IP addresses,
.Xr ntpd 8
will calculate a median constraint from all of them.
For example:
.Bd -literal -offset indent
servers pool.ntp.org
constraints from "https://www.google.com/"
.Ed
.El
.Sh FILES
.Bl -tag -width "/etc/ntpd.confXXX" -compact
.It Pa /etc/ntpd.conf
default
.Xr ntpd 8
configuration file
.El
.Sh SEE ALSO
.Xr ntpctl 8 ,
.Xr ntpd 8 ,
.Xr sysctl 8
.Sh HISTORY
The
.Nm
file format first appeared in
.Ox 3.6 .
@


1.36
log
@tweak previous;
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.35 2017/05/30 23:30:48 benno Exp $
d17 1
a17 1
.Dd $Mdocdate: May 30 2017 $
d74 1
a74 1
daemon should use for outgoing queries.
@


1.35
log
@add option "query from <ip>" to ntpd.conf, to specify a local IP
address for outgoing ntp queries.
From Job Snijders, thanks!
with feedback and ok henning@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.34 2016/12/30 10:24:15 jmc Exp $
d17 1
a17 1
.Dd $Mdocdate: December 30 2016 $
d70 3
a72 3
.It Xo Ic query from Ar address
.Xc
Specify a Local IP address the
d75 1
@


1.34
log
@markup from jan stary;
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.33 2015/10/23 14:52:20 phessler Exp $
d17 1
a17 1
.Dd $Mdocdate: October 23 2015 $
d70 8
@


1.33
log
@Allowing upstream servers of ntp being in multiple routing tables is
non-sensical.  The dns lookups happened in the process routing table
(usually '0'), which is very likely to have different results from the
other routing domains.  If you do depend on having this behaviour,
you'll need to use pf to cross the rtable boundary.

"listen on * rtable X" is still supported.

Users of "server * rtable X" will need to switch to launching ntpd with
"route -T X exec /usr/sbin/ntpd"

OK deraadt@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.32 2015/08/28 02:59:29 deraadt Exp $
d17 1
a17 1
.Dd $Mdocdate: August 28 2015 $
d129 3
a131 2
A stratum value other than the default of 1 can be assigned using
the stratum keyword.
@


1.32
log
@Xr ntpctl; from Rob Pierce
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.31 2015/05/18 11:10:03 dtucker Exp $
d17 1
a17 1
.Dd $Mdocdate: May 18 2015 $
a132 1
.Op Ic rtable Ar table-id
a138 4
The
.Cm rtable
option specifies which routing table should be used for connection attempts.
Hostname resolution will still happen using the default routing table.
d149 1
a149 1
server ntp.example.org weight 1 rtable 4
a156 1
.Op Ic rtable Ar table-id
d170 1
a170 1
servers pool.ntp.org rtable 5
a227 6
.Sh CAVEATS
When using different
.Cm rtable
options,
.Xr ntpd 8
must be started in rtable 0.
@


1.31
log
@Simplify example constraints URL to reduce load on the server side.
ok henning@@, reyk@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.30 2015/03/26 20:34:54 jmc Exp $
d17 1
a17 1
.Dd $Mdocdate: March 26 2015 $
d226 1
@


1.30
log
@do not encourage random uppercasing;
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.29 2015/02/16 19:25:35 jmc Exp $
d17 1
a17 1
.Dd $Mdocdate: February 16 2015 $
d215 1
a215 1
constraints from "https://www.google.com/search?q=openntpd"
@


1.29
log
@some fixes from max fillinger, tweaked a little by myself;
ok reyk
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.28 2015/02/16 12:56:43 reyk Exp $
d187 1
a187 2
.Sq Man-In-The-Middle
attacks.
@


1.28
log
@Fix example, syntax is "constraint from www.example.com" (with "from").

Reported by Stefan Wollny.
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.27 2015/02/10 19:21:16 jmc Exp $
d17 1
a17 1
.Dd $Mdocdate: February 10 2015 $
d190 1
a190 2
near the constraint will be discarded and such NTP
.Ic servers
d196 3
a198 3
If multiple
.Ic constraint
keywords are used,
d207 1
a207 1
.Ic constraint ,
@


1.27
log
@tweak previous;
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.26 2015/02/10 07:19:52 reyk Exp $
d204 1
a204 1
constraint www.example.com
@


1.26
log
@Move the constraints in a new section and add a preamble to explain
the functionality.

Requested by henning@@
OK beck@@ deraadt@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.25 2015/02/10 06:40:08 reyk Exp $
d195 1
a195 1
Specify the URL, IP address or the hostname of a HTTPS server to
d209 1
a209 1
specify the URL, IP address or the hostname of a HTTPS server to
@


1.25
log
@Add support for "constraints": when configured, ntpd(8) will query the
time from HTTPS servers, by parsing the Date: header, and use the
median constraint time as a boundary to verify NTP responses.  This
adds some level of authentication and protection against MITM attacks
while preserving the accuracy of the NTP protocol; without relying on
authentication options for NTP that are basically unavailable at
present.  This is an initial implementation and the semantics will be
improved once it is in the tree.

Discussed with deraadt@@ and henning@@
OK henning@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.24 2012/09/20 12:43:16 patrick Exp $
d17 1
a17 1
.Dd $Mdocdate: September 20 2012 $
d36 1
a36 1
They are as follows:
a37 34
.It Ic constraint from Ar url
Specify the URL, IP address or the hostname of a HTTPS server to
provide a constraint.
.Xr ntpd 8
will connect to the server and retrieve the remote time from the
.Eq Date
header.
This time will be used as a constraint on time synchronization;
received NTP packets with time information that is more than a few
minutes off will be discarded and the NTP
.Ic server
will be marked as invalid.
If multiple
.Ic constraint
keywords are used,
.Xr ntpd 8
will calculate a median constraint from all the servers specified.
.Bd -literal -offset indent
server ntp.example.org
constraint www.example.com
.Ed
.It Ic constraints from Ar url
As with
.Ic constraint ,
specify the URL, IP address or the hostname of a HTTPS server to
provide a constraint.
Should the hostname resolve to multiple IP addresses,
.Xr ntpd 8
will calculate a median constraint from all of them.
For example:
.Bd -literal -offset indent
servers pool.ntp.org
constraints from "https://www.google.com/search?q=openntpd"
.Ed
d177 41
@


1.24
log
@Allow ntpd.conf to assign a stratum to a sensor with the syntax stratum <level>.

OK markus@@ henning@@ phessler@@ jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.23 2011/09/21 15:41:30 phessler Exp $
d17 1
a17 1
.Dd $Mdocdate: September 21 2011 $
d38 34
@


1.23
log
@Add rdomain support to NTPd.

This basically adds the "rtable %d" keyword to "listen on", "server",
"servers" keywords, to specify which routing table to use.

OK henning@@ claudio@@ sthen@@
manpage reviewed by jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.22 2009/05/18 20:08:24 stevesk Exp $
d17 1
a17 1
.Dd $Mdocdate: May 18 2009 $
d75 1
d128 3
@


1.22
log
@move text on weight to where it is first referred to;
"fine by me. it's maybe not ideal, but it's better" jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.21 2008/10/10 12:17:09 sthen Exp $
d17 1
a17 1
.Dd $Mdocdate: October 10 2008 $
d38 3
a40 1
.It Ic listen on Ar address
d51 1
a51 1
will listen on all local addresses.
d54 6
d69 1
d129 1
d136 4
d150 1
a150 1
server ntp.example.org weight 1
d158 1
d172 1
d190 6
@


1.21
log
@- use nmea(4) for general sensor example rather than udcf(4)
  which only works in w.europe
- use a more realistic value for udcf correction example
- use a GPS-only receiver for "refid GPS" example

suggested/ok mbalmer
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.20 2008/06/09 16:37:35 ckuethe Exp $
d17 1
a17 1
.Dd $Mdocdate: June 9 2008 $
a27 11
The optional
.Ic weight
keyword permits finer control over the relative importance
of time sources (servers or sensor devices).
Weights are specified in the range 1 to 10;
if no weight is given,
the default is 1.
A server with a weight of 5, for example,
will have five times more influence on time offset calculation
than a server with a weight of 1.
.Pp
d95 11
@


1.20
log
@Allow outgoing replies from sensor-driven servers to have a
user-configurable reference ID, eg. "GPS" or "DCF"...
ok mbalmer
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.18 2007/09/13 05:17:24 ckuethe Exp $
d17 1
a17 1
.Dd $Mdocdate: September 13 2007 $
d95 1
a95 1
sensor udcf0
d101 1
a101 1
For example, if a DCF77 receiver is lagging 15ms behind
d104 1
a104 1
sensor udcf0 correction 15000
d116 1
a116 1
sensor msts0 refid GPS
@


1.19
log
@one more missed change;
@
text
@d17 1
a17 1
.Dd $Mdocdate: September 12 2007 $
d76 1
d105 12
@


1.18
log
@Small style tweak, from jmc and Maurice Janssen
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.17 2007/09/12 21:08:45 ckuethe Exp $
d100 1
a100 1
For example, if a DCF77 receiver is lagging 15 ms behind
@


1.17
log
@
Add a knob to compensate for a refclock that is early or late. Based on a
diff from Maurice Janssen. Manpage help from jmc and Maurice, other nits
from deraadt and otto.
ok deraadt, otto
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.16 2007/05/31 19:20:26 jmc Exp $
d17 1
a17 1
.Dd $Mdocdate$
d100 1
a100 1
For example, if your DCF77 receiver is lagging 15 ms behind
@


1.16
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.15 2006/10/08 22:53:33 stevesk Exp $
d74 1
d95 9
@


1.15
log
@use 'weight-value' vs. 'offset' for the weight argument;
ok jmc@@ henning@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.14 2006/05/29 20:39:41 jmc Exp $
d17 1
a17 1
.Dd May 26, 2006
@


1.14
log
@better wording for the "weight" section;
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.13 2006/05/29 18:47:19 jmc Exp $
d74 1
a74 1
.Op Ic weight Ar offset
d96 1
a96 1
.Op Ic weight Ar offset
d120 1
a120 1
.Op Ic weight Ar offset
@


1.13
log
@document the optional "weight" keyword, and a little cleanup;
from henning and myself
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.12 2006/05/28 07:58:52 jmc Exp $
d32 5
a36 3
Weights are specified in the range 1 to 10:
a server with a weight of 5
will have five times more importance on time offset calculation
a37 2
If no weight is given,
the default is 1.
@


1.12
log
@small grammar improvement;
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.11 2006/05/27 17:01:36 henning Exp $
d27 14
a40 1
It has the following format:
d73 3
a75 1
.It Ic sensor Ar device
d79 1
a79 1
It can be specified multiple times:
d82 1
a82 1
Nonexistant sensors are ignored.
d95 3
a97 1
.It Ic server Ar address
d112 2
a113 2
server 10.0.0.2
server ntp.example.org
d119 3
a121 1
.It Ic servers Ar address
@


1.11
log
@document timedelat sensors. ok deraadt
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.10 2006/05/23 14:29:16 henning Exp $
d64 1
a64 1
Can be specified multiple times,
@


1.10
log
@make listen on example idiot proof
suggested by "Karsten W. Rohrbach" <karsten@@rohrbach.de>
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.9 2004/11/08 19:09:19 otto Exp $
d17 1
a17 1
.Dd June 17, 2004
d60 20
d125 2
a126 1
.Xr ntpd 8
@


1.9
log
@Advice user to use multiple servers. Prodded by Daniel Polak, help and ok jmc@@
ok henning@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.8 2004/11/07 21:42:33 jmc Exp $
d53 4
@


1.8
log
@document that keywords can be specified multiple times;
from otto and myself; prodded by henning;
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.7 2004/07/13 19:51:38 jmc Exp $
d74 4
@


1.7
log
@tweaks; ok henning@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.6 2004/07/09 14:56:57 jaredy Exp $
d33 2
a34 1
The possible keywords are as follows:
d40 1
a40 1
It can appear multiple times:
d59 4
a62 1
If the hostname resolves to multiple IPv4 and/or IPv6 addresses,
d78 3
@


1.6
log
@various cleanup:
- mention '#' comments
- fix macros for directives
- typos
- change list display
- ntp -> NTP
- slight rewording

help and ok jmc
ok henning otto
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.5 2004/07/09 10:56:35 henning Exp $
d24 1
a24 1
The
d26 2
a27 7
daemon implements the Network Time Protocol
.Pq NTP
version 4.
This manual page describes the format of its configuration file,
.Nm .
.Pp
The configuration file has the following format:
d83 1
a83 1
.Bl -tag -width "/etc/ntpd.conf" -compact
d85 1
d90 1
a90 2
.Xr ntpd 8 ,
.Xr rdate 8
@


1.5
log
@document the "servers" keyword
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.4 2004/07/07 08:36:26 jmc Exp $
d31 11
a41 4
The settings are as follows:
.Bl -tag -width "listenonXX"
.It Ar listen on
Specify a local IP address the
d60 1
a60 1
.It Ar server
d62 2
a63 2
server to syncronize to.
If the hostname resolves to multiple IPv4 and/or IPv6 adresses,
d68 1
a68 1
retries with the next address and continues to do so unless a working address
d75 1
a75 1
.It Ar servers
d77 3
a79 3
.Ar server ,
specify the IP address or hostname of an ntp server to synchronize to.
Should the hostname resolve to multiple IP adresses,
d81 1
a81 1
will try synchronize to all of them.
d90 1
a90 1
.Nm
@


1.4
log
@tweaks; ok henning@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.3 2004/07/07 05:54:16 henning Exp $
a36 5
For example:
.Bd -literal -offset indent
listen on 127.0.0.1
.Ed
.Pp
d47 6
d56 7
d66 12
a77 1
server pool.ntp.org
@


1.3
log
@document
listen on *
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.2 2004/07/07 02:16:07 henning Exp $
d25 6
a30 2
.Ar ntpd
daemon implements the Network Time Protocol version 4.
d32 1
a32 1
.Bl -tag -width xxxxxxxx
d35 1
a35 1
.Ar ntpd
d37 1
d42 2
a43 2
Can appear multiple times,
.Ar ntpd
d46 6
a51 3
.Em *
is given as address, ntpd will listen on all local addresses.
ntpd does not listen on any address by default.
d53 1
a53 2
Specify the IP address or the hostname of a
.Ar ntp
d55 1
d65 1
a65 1
configuration file.
@


1.2
log
@servers can be given as hostnames now
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.conf.5,v 1.1 2004/06/18 04:11:24 henning Exp $
d40 4
@


1.1
log
@bloody attempt at a manpage
@
text
@d1 1
a1 1
.\" $OpenBSD: bgpd.conf.5,v 1.28 2004/05/24 08:45:04 jmc Exp $
d41 1
a41 1
Specify the IP address of a
d46 1
@

