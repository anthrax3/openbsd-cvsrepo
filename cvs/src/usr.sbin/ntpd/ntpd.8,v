head	1.40;
access;
symbols
	OPENBSD_6_0:1.40.0.4
	OPENBSD_6_0_BASE:1.40
	OPENBSD_5_9:1.40.0.2
	OPENBSD_5_9_BASE:1.40
	OPENBSD_5_8:1.39.0.4
	OPENBSD_5_8_BASE:1.39
	OPENBSD_5_7:1.37.0.2
	OPENBSD_5_7_BASE:1.37
	OPENBSD_5_6:1.37.0.6
	OPENBSD_5_6_BASE:1.37
	OPENBSD_5_5:1.37.0.4
	OPENBSD_5_5_BASE:1.37
	OPENBSD_5_4:1.34.0.4
	OPENBSD_5_4_BASE:1.34
	OPENBSD_5_3:1.34.0.2
	OPENBSD_5_3_BASE:1.34
	OPENBSD_5_2:1.31.0.4
	OPENBSD_5_2_BASE:1.31
	OPENBSD_5_1_BASE:1.31
	OPENBSD_5_1:1.31.0.2
	OPENBSD_5_0:1.29.0.2
	OPENBSD_5_0_BASE:1.29
	OPENBSD_4_9:1.27.0.10
	OPENBSD_4_9_BASE:1.27
	OPENBSD_4_8:1.27.0.8
	OPENBSD_4_8_BASE:1.27
	OPENBSD_4_7:1.27.0.4
	OPENBSD_4_7_BASE:1.27
	OPENBSD_4_6:1.27.0.6
	OPENBSD_4_6_BASE:1.27
	OPENBSD_4_5:1.27.0.2
	OPENBSD_4_5_BASE:1.27
	OPENBSD_4_4:1.24.0.2
	OPENBSD_4_4_BASE:1.24
	OPENBSD_4_3:1.23.0.2
	OPENBSD_4_3_BASE:1.23
	OPENBSD_4_2:1.18.0.2
	OPENBSD_4_2_BASE:1.18
	OPENBSD_4_1:1.17.0.2
	OPENBSD_4_1_BASE:1.17
	OPENBSD_4_0:1.16.0.2
	OPENBSD_4_0_BASE:1.16
	OPENBSD_3_9:1.14.0.4
	OPENBSD_3_9_BASE:1.14
	OPENBSD_3_8:1.14.0.2
	OPENBSD_3_8_BASE:1.14
	OPENBSD_3_7:1.13.0.2
	OPENBSD_3_7_BASE:1.13
	OPENBSD_3_6:1.5.0.2
	OPENBSD_3_6_BASE:1.5;
locks; strict;
comment	@.\" @;


1.40
date	2015.10.30.16.41.53;	author reyk;	state Exp;
branches;
next	1.39;
commitid	NJCsmGWpwJSjPe6u;

1.39
date	2015.03.26.20.34.54;	author jmc;	state Exp;
branches;
next	1.38;
commitid	EPvbYrhVzbYQPMhY;

1.38
date	2015.03.14.04.11.02;	author deraadt;	state Exp;
branches;
next	1.37;
commitid	f6Ig0tzdn9SM5l7A;

1.37
date	2014.02.12.15.45.52;	author schwarze;	state Exp;
branches;
next	1.36;

1.36
date	2013.10.04.14.28.16;	author phessler;	state Exp;
branches;
next	1.35;

1.35
date	2013.08.14.06.32.37;	author jmc;	state Exp;
branches;
next	1.34;

1.34
date	2012.09.26.16.19.45;	author jmc;	state Exp;
branches;
next	1.33;

1.33
date	2012.09.19.16.30.39;	author henning;	state Exp;
branches;
next	1.32;

1.32
date	2012.08.30.06.48.33;	author jmc;	state Exp;
branches;
next	1.31;

1.31
date	2011.09.17.10.22.00;	author jmc;	state Exp;
branches;
next	1.30;

1.30
date	2011.09.17.09.53.21;	author henning;	state Exp;
branches;
next	1.29;

1.29
date	2011.07.08.07.00.30;	author jmc;	state Exp;
branches;
next	1.28;

1.28
date	2011.07.07.21.00.59;	author deraadt;	state Exp;
branches;
next	1.27;

1.27
date	2009.02.12.01.33.37;	author stevesk;	state Exp;
branches;
next	1.26;

1.26
date	2009.01.31.15.34.25;	author stevesk;	state Exp;
branches;
next	1.25;

1.25
date	2008.09.28.20.19.51;	author deraadt;	state Exp;
branches;
next	1.24;

1.24
date	2008.05.16.06.13.24;	author ckuethe;	state Exp;
branches;
next	1.23;

1.23
date	2007.12.11.11.26.27;	author jmc;	state Exp;
branches;
next	1.22;

1.22
date	2007.12.07.20.05.32;	author jmc;	state Exp;
branches;
next	1.21;

1.21
date	2007.10.15.06.59.32;	author otto;	state Exp;
branches;
next	1.20;

1.20
date	2007.09.13.14.34.36;	author pyr;	state Exp;
branches;
next	1.19;

1.19
date	2007.08.22.21.04.30;	author ckuethe;	state Exp;
branches;
next	1.18;

1.18
date	2007.05.31.19.20.26;	author jmc;	state Exp;
branches;
next	1.17;

1.17
date	2007.02.24.14.59.32;	author otto;	state Exp;
branches;
next	1.16;

1.16
date	2006.06.22.11.11.53;	author otto;	state Exp;
branches;
next	1.15;

1.15
date	2006.05.27.17.05.52;	author henning;	state Exp;
branches;
next	1.14;

1.14
date	2005.06.21.19.55.18;	author deraadt;	state Exp;
branches;
next	1.13;

1.13
date	2004.12.10.03.54.18;	author jaredy;	state Exp;
branches;
next	1.12;

1.12
date	2004.12.07.10.06.12;	author jmc;	state Exp;
branches;
next	1.11;

1.11
date	2004.12.06.20.57.17;	author mickey;	state Exp;
branches;
next	1.10;

1.10
date	2004.11.02.18.00.38;	author henning;	state Exp;
branches;
next	1.9;

1.9
date	2004.09.18.23.22.13;	author henning;	state Exp;
branches;
next	1.8;

1.8
date	2004.09.18.20.37.12;	author henning;	state Exp;
branches;
next	1.7;

1.7
date	2004.09.18.20.31.46;	author henning;	state Exp;
branches;
next	1.6;

1.6
date	2004.09.18.20.01.38;	author henning;	state Exp;
branches;
next	1.5;

1.5
date	2004.07.13.19.51.38;	author jmc;	state Exp;
branches;
next	1.4;

1.4
date	2004.07.09.19.33.09;	author jmc;	state Exp;
branches;
next	1.3;

1.3
date	2004.07.09.10.59.15;	author henning;	state Exp;
branches;
next	1.2;

1.2
date	2004.07.07.08.30.09;	author jmc;	state Exp;
branches;
next	1.1;

1.1
date	2004.05.31.13.59.55;	author henning;	state Exp;
branches;
next	;


desc
@@


1.40
log
@Remove support for sending status reports to syslog on SIGINFO;
we have ntpctl now and ntpd doesn't need redundant/obsolete features.

Pointed out by naddy@@, with input from zhuk@@ (SIGINFO doesn't need SIG_IGN)
OK deraadt@@
@
text
@.\" $OpenBSD: ntpd.8,v 1.39 2015/03/26 20:34:54 jmc Exp $
.\"
.\" Copyright (c) 2003, 2004, 2006 Henning Brauer <henning@@openbsd.org>
.\"
.\" Permission to use, copy, modify, and distribute this software for any
.\" purpose with or without fee is hereby granted, provided that the above
.\" copyright notice and this permission notice appear in all copies.
.\"
.\" THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
.\" WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
.\" MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
.\" ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
.\" WHATSOEVER RESULTING FROM LOSS OF MIND, USE, DATA OR PROFITS, WHETHER IN
.\" AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT
.\" OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
.\"
.Dd $Mdocdate: March 26 2015 $
.Dt NTPD 8
.Os
.Sh NAME
.Nm ntpd
.Nd Network Time Protocol daemon
.Sh SYNOPSIS
.Nm ntpd
.Bk -words
.Op Fl dnSsv
.Op Fl f Ar file
.Ek
.Sh DESCRIPTION
The
.Nm
daemon synchronizes the local clock to one or more remote NTP servers
or local timedelta sensors.
.Nm
can also act as an NTP server itself,
redistributing the local time.
It implements the Simple Network Time Protocol version 4,
as described in RFC 5905,
and the Network Time Protocol version 3,
as described in RFC 1305.
Time can also be fetched from TLS HTTPS servers to reduce the
impact of unauthenticated NTP
man-in-the-middle attacks.
.Pp
The options are as follows:
.Bl -tag -width "-f fileXXX"
.It Fl d
Do not daemonize.
If this option is specified,
.Nm
will run in the foreground and log to
.Em stderr .
.It Fl f Ar file
Use
.Ar file
as the configuration file,
instead of the default
.Pa /etc/ntpd.conf .
.It Fl n
Configtest mode.
Only check the configuration file for validity.
.It Fl S
Do not set the time immediately at startup.
This is the default.
.It Fl s
Try to set the time immediately at startup, as opposed to slowly adjusting the
clock.
.Nm
will stay in the foreground for up to 15 seconds waiting for one of the
configured NTP servers to reply.
.It Fl v
This option allows
.Nm
to send DEBUG priority messages to syslog.
.El
.Pp
.Nm
uses the
.Xr adjtime 2
system call to correct the local system time without causing time jumps.
Adjustments of 32ms and greater are logged using
.Xr syslog 3 .
The threshold value is chosen to avoid having local clock drift
thrash the log files.
Should
.Nm
be started with the
.Fl d
or
.Fl v
option, all calls to
.Xr adjtime 2
will be logged.
.Pp
After the local clock is synchronized,
.Nm
adjusts the clock frequency using the
.Xr adjfreq 2
system call to compensate for systematic drift.
.Pp
.Nm
is usually started at boot time, and can be enabled by
setting
.Va ntpd_flags
in
.Pa /etc/rc.conf.local .
See
.Xr rc 8
and
.Xr rc.conf 8
for more information on the boot process
and enabling daemons.
.Pp
When
.Nm
starts up, it reads settings from its configuration file,
typically
.Xr ntpd.conf 5 ,
and its initial clock drift from
.Pa /var/db/ntpd.drift .
Clock drift is periodically written to the drift file thereafter.
.Sh FILES
.Bl -tag -width "/var/db/ntpd.driftXXX" -compact
.It Pa /etc/ntpd.conf
Default configuration file.
.It Pa /var/db/ntpd.drift
Drift file.
.It Pa /var/run/ntpd.sock
Socket file for communication with
.Xr ntpctl 8 .
.El
.Sh SEE ALSO
.Xr date 1 ,
.Xr adjfreq 2 ,
.Xr adjtime 2 ,
.Xr ntpd.conf 5 ,
.Xr ntpctl 8 ,
.Xr rc 8 ,
.Xr rc.conf 8 ,
.Xr rdate 8
.Sh STANDARDS
.Rs
.%A David L. Mills
.%D March 1992
.%R RFC 1305
.%T Network Time Protocol (Version 3): Specification, Implementation and Analysis
.Re
.Pp
.Rs
.%A David L. Mills
.%A Jim Martin
.%A Jack Burbank
.%A William Kasch
.%D June 2010
.%R RFC 5905
.%T Network Time Protocol Version 4: Protocol and Algorithms Specification
.Re
.Sh HISTORY
The
.Nm
program first appeared in
.Ox 3.6 .
@


1.39
log
@do not encourage random uppercasing;
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.38 2015/03/14 04:11:02 deraadt Exp $
d17 1
a17 1
.Dd $Mdocdate: March 14 2015 $
a121 8
.Pp
When
.Nm
.Pq engine
receives a
.Dv SIGINFO
signal, it writes its peer and sensor status to
.Xr syslog 3 .
@


1.38
log
@mention TLS HTTPS here also; ok bcook
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.37 2014/02/12 15:45:52 schwarze Exp $
d17 1
a17 1
.Dd $Mdocdate: February 12 2014 $
d43 1
a43 2
.Sq Man-In-The-Middle
attacks.
@


1.37
log
@Remove the bogus author "U. Delaware" from RFC 5905
as noticed by Arto Jonsson <ajonsson at kapsi dot fi>.
While here, give the full author names, which costs no additional work
because i had to cross-check against the original documents anyway.
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.36 2013/10/04 14:28:16 phessler Exp $
d17 1
a17 1
.Dd $Mdocdate: October 4 2013 $
d41 4
@


1.36
log
@Add ntpctl(8), which allows us to query the locally running ntpd(8) process

diff from Mike Miller <mmiller mgm51 com> (many thanks!)

OK phessler@@, henning@@, todd@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.35 2013/08/14 06:32:37 jmc Exp $
d17 1
a17 1
.Dd $Mdocdate: August 14 2013 $
d148 1
a148 1
.%A D. Mills
d155 4
a158 5
.%A D. Mills
.%A U. Delaware
.%A J. Martin
.%A J. Burbank
.%A W. Kasch
@


1.35
log
@no longer any need to quote macro lines with >9 args;
From: Jan Stary
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.34 2012/09/26 16:19:45 jmc Exp $
d17 1
a17 1
.Dd $Mdocdate: September 26 2012 $
d133 3
d142 1
@


1.34
log
@last stage of rfc changes, using consistent Rs/Re blocks, and moving the
references into a STANDARDS section;
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.33 2012/09/19 16:30:39 henning Exp $
d17 1
a17 1
.Dd $Mdocdate: September 19 2012 $
d22 1
a22 1
.Nd "Network Time Protocol daemon"
@


1.33
log
@clarify which process writes out stats upong SIGINFO reception.
pointed out by Frank Brodbeck <fab at guug.de>, actual change with & ok jmc
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.31 2011/09/17 10:22:00 jmc Exp $
d17 1
a17 1
.Dd $Mdocdate: August 30 2012 $
d142 1
d149 1
@


1.32
log
@rfc 5905 replaces rfc 2030; for now, the reference to 2030 in ntpd.conf
stays;

ok henning
@
text
@d17 1
a17 1
.Dd $Mdocdate: September 17 2011 $
d122 1
@


1.31
log
@tweak previous;
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.30 2011/09/17 09:53:21 henning Exp $
d38 1
a38 1
as described in RFC 2030,
d142 2
d145 1
a145 2
.%T "Network Time Protocol (Version 3)"
.%D March 1992
d148 8
a155 3
.%R RFC 2030
.%T "Simple Network Time Protocol (SNTP) Version 4"
.%D October 1996
@


1.30
log
@improve -s description. the major points are set vs adjust and stay in
the forground until we receive a reply or hit the 15 second timeout.
with theo, evolved out of sth completely different
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.29 2011/07/08 07:00:30 jmc Exp $
d17 1
a17 1
.Dd $Mdocdate: July 8 2011 $
d67 2
a68 2
configured ntp servers to reply.
It Fl v
@


1.29
log
@tweak previous;
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.28 2011/07/07 21:00:59 deraadt Exp $
d17 1
a17 1
.Dd $Mdocdate: July 7 2011 $
d63 6
a68 5
Set the time immediately at startup.
Allows for a large time correction,
eliminating the need to run
.Xr rdate 8 .
.It Fl v
@


1.28
log
@timed's time is up.  use ntpd(8).  Even our own fossil developers
switched a while back.
ok miod, kettenis
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.27 2009/02/12 01:33:37 stevesk Exp $
d17 1
a17 1
.Dd $Mdocdate: February 12 2009 $
d139 1
a139 1
.Xr rdate 8 ,
@


1.27
log
@-v logs debug adjtime calls also; ok henning@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.26 2009/01/31 15:34:25 stevesk Exp $
d17 1
a17 1
.Dd $Mdocdate: January 31 2009 $
a139 1
.Xr timed 8
@


1.26
log
@adjtime has been logged at 32ms and greater for 2.5 years now.
ok henning@@ jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.25 2008/09/28 20:19:51 deraadt Exp $
d17 1
a17 1
.Dd $Mdocdate: September 28 2008 $
d85 2
@


1.25
log
@ntpd does not require you to run rdate -n before it -- it notices such an
event. so don't use the word "before" .. and leave the mention ambigious
ok henning
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.24 2008/05/16 06:13:24 ckuethe Exp $
d17 1
a17 1
.Dd $Mdocdate: May 16 2008 $
d77 1
a77 1
Adjustments larger than 128ms are logged using
@


1.24
log
@Allow ntpd to step the time at startup, now matter how large or small the
offset. The 180s limit doesn't help very much these days.
ok otto@@ mbalmer@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.23 2007/12/11 11:26:27 jmc Exp $
d17 1
a17 1
.Dd $Mdocdate: December 11 2007 $
d66 1
a66 3
.Xr rdate 8
before starting
.Nm .
@


1.23
log
@rearrange the page to read better; ok otto henning
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.22 2007/12/07 20:05:32 jmc Exp $
d17 1
a17 1
.Dd $Mdocdate: December 7 2007 $
d63 1
a63 2
Set the time immediately at startup if the local clock is off by more
than 180 seconds.
@


1.22
log
@document adjfreq(2);
based on an initial diff from Simon Kuhnle,
and input from Joerg Sonnenberger;

ok otto
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.21 2007/10/15 06:59:32 otto Exp $
d17 1
a17 1
.Dd $Mdocdate: October 15 2007 $
d42 34
d100 4
a103 5
setting the following in
.Pa /etc/rc.conf.local :
.Pp
.Dl ntpd_flags=\&"\&"
.Pp
d113 1
a113 1
starts up, it reads settings from a configuration file,
d115 4
a118 35
.Xr ntpd.conf 5 .
.Pp
The options are as follows:
.Bl -tag -width "-f fileXXX"
.It Fl d
Do not daemonize.
If this option is specified,
.Nm
will run in the foreground and log to
.Em stderr .
.It Fl f Ar file
Use
.Ar file
as the configuration file,
instead of the default
.Pa /etc/ntpd.conf .
.It Fl n
Configtest mode.
Only check the configuration file for validity.
.It Fl S
Do not set the time immediately at startup.
This is the default.
.It Fl s
Set the time immediately at startup if the local clock is off by more
than 180 seconds.
Allows for a large time correction,
eliminating the need to run
.Xr rdate 8
before starting
.Nm .
.It Fl v
This option allows
.Nm
to send DEBUG priority messages to syslog.
.El
d124 2
a125 1
signal, it will write its peer and sensor status to syslog.
d129 1
a129 3
default
.Nm
configuration file
d131 1
a131 3
drift file, written by
.Nm
periodically and used at startup to get the initial clock drift
@


1.21
log
@Allow ntpd to report the status of peers and sensors to syslog. This
happens when a SIGINFO is received, or when the majority of peers or
sensors is bad. The latter with a maximum of once per 24 hour.
ok henning@@ ckuethe@@ mbalmer@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.20 2007/09/13 14:34:36 pyr Exp $
d17 1
a17 1
.Dd $Mdocdate: September 13 2007 $
d57 6
@


1.20
log
@Provide the -n switch like in the other imsg daemons for testing
the configuration file.
"yes please, ok" henning@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.19 2007/08/22 21:04:30 ckuethe Exp $
d17 1
a17 1
.Dd $Mdocdate: August 22 2007 $
d111 6
@


1.19
log
@Allow ntpd to log sensor offsets and adjtime calls to syslog at LOG_DEBUG
priority.
ok gwk, mbalmer, weingart
"explicit non-ok from" henning
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.18 2007/05/31 19:20:26 jmc Exp $
d17 1
a17 1
.Dd $Mdocdate: May 31 2007 $
d26 1
a26 1
.Op Fl dSsv
d92 3
@


1.18
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.17 2007/02/24 14:59:32 otto Exp $
d17 1
a17 1
.Dd $Mdocdate$
d26 1
a26 1
.Op Fl dSs
d103 4
@


1.17
log
@xref adjfreq(2); from Igor Zinovik
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.16 2006/06/22 11:11:53 otto Exp $
d17 1
a17 1
.Dd May 26, 2006
@


1.16
log
@Document /var/db/ntpd.drift; ok jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.15 2006/05/27 17:05:52 henning Exp $
d117 1
@


1.15
log
@ntpd does timedelta sensors now too
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.14 2005/06/21 19:55:18 deraadt Exp $
d105 1
a105 1
.Bl -tag -width "/etc/ntpd.confXXX" -compact
d110 4
@


1.14
log
@we do not do -s in /etc/rc anymore.  this is because, even if -s did try to
do it's job it would have to choose between two cases:
1. either it would take a very long time to get the correct adjustment, thus,
   if you are not currently on the net right, you wait a long time (or must
   type ^C, which is ridiculous)
2. ntpd could be modified to "abort early", but then would not meet the
   promise made by -s in the manual page (note: it does not say that it
   "tries")
therefore, -s and -S must become user choices.  Sorry.  This same choice is
made in lots of other places
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.13 2004/12/10 03:54:18 jaredy Exp $
d3 1
a3 1
.\" Copyright (c) 2003, 2004 Henning Brauer <henning@@openbsd.org>
d17 1
a17 1
.Dd July 9, 2004
d32 4
a35 2
daemon synchronizes the local clock to one or more remote NTP servers,
and can also act as an NTP server itself,
@


1.13
log
@typos, then -> than, from Michael Knudsen
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.12 2004/12/07 10:06:12 jmc Exp $
a100 12
Currently, the
.Fl s
option is added unconditionally in
.Xr rc 8 .
Make sure to specify the
.Fl S
option
(add/edit
.Va ntpd_flags
in
.Xr rc.conf.local 8 )
if this behaviour is not desired.
@


1.12
log
@tweaks;
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.11 2004/12/06 20:57:17 mickey Exp $
d44 1
a44 1
Adjustments larger then 128ms are logged using
@


1.11
log
@do not log tiny local clock drifts; w/ help from Joerg Sonnenberger <joerg@@britannica.bec.de>; henning@@ ok
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.10 2004/11/02 18:00:38 henning Exp $
d46 2
a47 1
The threshold value is chosen to avoid local clock drift thrash the log files.
d50 1
a50 1
be started with
d52 1
a52 1
option all calls to
@


1.10
log
@superfluous comma, From: James Herbert <lists@@artyzan.net>
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.9 2004/09/18 23:22:13 henning Exp $
d44 10
@


1.9
log
@greatly improved by jmc with some tweaks by yours truly
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.8 2004/09/18 20:37:12 henning Exp $
d42 1
a42 1
.Xr adjtime 2 ,
@


1.8
log
@implement -S to override earlier -s, requested by theo
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.7 2004/09/18 20:31:46 henning Exp $
d26 1
a26 1
.Op Fl dsS
d44 1
a78 5
.It Fl s
Set the time immediately once at startup if the local clock is off by more
than 180 seconds. Allows for a large time correction,
eliminating the need to run rdate before starting
.Nm .
d82 20
d112 1
d114 2
@


1.7
log
@say when we run settimeofday() with -s and when not, help from bob
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.6 2004/09/18 20:01:38 henning Exp $
d26 1
a26 1
.Op Fl ds
d83 3
@


1.6
log
@add a new -s option, that tells ntpd to set the time using settimeofday()
once at startup. ntpd delays daemonizing until it has done the intial
time setting (or ran into the timeout) in this mode to make sure stuff started
later in rc is not subject to time jumps.
this eleminates the need to run rdate -n beforehands.
with some input from & ok ryan and bob, march music from mickey
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.5 2004/07/13 19:51:38 jmc Exp $
d79 3
a81 2
Set the time immediately once at startup to allow for a large time correction,
eleminating the need to run rdate before starting
@


1.5
log
@tweaks; ok henning@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.4 2004/07/09 19:33:09 jmc Exp $
d26 1
a26 1
.Op Fl d
d41 4
d78 4
@


1.4
log
@make date(1), rdate(8), ntpd(8), and timed(8) .Xr themselves;
mostly from Andreas Kahari (PR #3846);
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.3 2004/07/09 10:59:15 henning Exp $
d32 28
a59 4
daemon implements the Simple Network Time Protocol version 4 as described
in RFC 2030 and the Network Time Protocol version 3 as described in RFC 1305.
It can synchronize the local clock to one or more remote NTP servers and act
as NTP server itself, redistributing the local time.
d61 1
a61 1
.Bl -tag -width Ds
d63 4
a66 1
Do not daemonize and log to
d69 5
a73 3
Specify an alternate location,
.Ar file ,
for the configuration file.
d76 1
a76 1
.Bl -tag -width "/etc/ntpd.conf" -compact
d78 1
d80 1
a80 1
configuration file.
@


1.3
log
@soem tweaks from the Frankfurt->Hamburg flight
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.2 2004/07/07 08:30:09 jmc Exp $
d53 1
d55 2
a56 1
.Xr rdate 8
@


1.2
log
@add rdate(8) to SEE ALSO;
@
text
@d1 1
a1 1
.\" $OpenBSD: ntpd.8,v 1.1 2004/05/31 13:59:55 henning Exp $
d17 1
a17 1
.Dd May 31, 2004
d33 3
a35 1
in RFC 2030.
d55 5
@


1.1
log
@initial cut at a manpage
@
text
@d1 1
a1 1
.\" $OpenBSD: bgpd.8,v 1.9 2004/05/23 22:32:42 jmc Exp $
d51 2
a52 1
.Xr ntpd.conf 5
@

