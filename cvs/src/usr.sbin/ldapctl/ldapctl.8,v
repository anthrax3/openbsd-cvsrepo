head	1.6;
access;
symbols
	OPENBSD_6_1:1.6.0.6
	OPENBSD_6_1_BASE:1.6
	OPENBSD_6_0:1.6.0.4
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.6.0.2
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.4.0.24
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.16
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.20
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.18
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.14
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.4.0.12
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.4.0.10
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.8
	OPENBSD_5_0:1.4.0.6
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.4.0.4
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.4.0.2
	OPENBSD_4_8_BASE:1.4;
locks; strict;
comment	@.\" @;


1.6
date	2016.02.02.17.39.02;	author jmc;	state Exp;
branches;
next	1.5;
commitid	cGwaxS17VYRTigz2;

1.5
date	2016.02.02.12.47.10;	author jca;	state Exp;
branches;
next	1.4;
commitid	OTFbxEjuY4R7gDLD;

1.4
date	2010.07.21.06.32.14;	author martinh;	state Exp;
branches;
next	1.3;

1.3
date	2010.06.23.16.22.29;	author jmc;	state Exp;
branches;
next	1.2;

1.2
date	2010.06.23.13.31.30;	author martinh;	state Exp;
branches;
next	1.1;

1.1
date	2010.05.31.17.36.31;	author martinh;	state Exp;
branches;
next	;


desc
@@


1.6
log
@tweak previous;
@
text
@.\"	$OpenBSD: ldapctl.8,v 1.5 2016/02/02 12:47:10 jca Exp $
.\"
.\" Copyright (c) 2009, 2010 Martin Hedenfalk <martin@@bzero.se>
.\"
.\" Permission to use, copy, modify, and distribute this software for any
.\" purpose with or without fee is hereby granted, provided that the above
.\" copyright notice and this permission notice appear in all copies.
.\"
.\" THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
.\" WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
.\" MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
.\" ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
.\" WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
.\" ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
.\" OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
.\"
.Dd $Mdocdate: February 2 2016 $
.Dt LDAPCTL 8
.Os
.Sh NAME
.Nm ldapctl
.Nd LDAP daemon control program
.Sh SYNOPSIS
.Nm ldapctl
.Op Fl v
.Op Fl f Ar file
.Op Fl r Ar directory
.Op Fl s Ar socket
.Ar command
.Op Ar argument ...
.Sh DESCRIPTION
The
.Nm
program controls the
.Xr ldapd 8
daemon.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl f Ar file
Use
.Ar file
as the configuration file, instead of the default
.Pa /etc/ldapd.conf .
.It Fl r Ar directory
Store and read database files in
.Ar directory ,
instead of the default
.Pa /var/db/ldap .
.It Fl s Ar socket
Use
.Ar socket
instead of the default
.Pa /var/run/ldapd.sock
to communicate with
.Xr ldapd 8 .
.It Fl v
Produce more verbose output.
.El
.Pp
The commands are as follows:
.Bl -tag -width xxxxxx
.It Cm stats
Show statistics counters.
.It Cm log brief
Disable verbose debug logging.
.It Cm log verbose
Enable verbose debug logging.
.It Cm compact
Compact all databases.
.Xr ldapd 8
does not have to be running.
When compaction of a database file is complete, a special marker is appended
to the database file that tells
.Xr ldapd 8
to reopen the file and perform new requests against the compacted database.
A write transaction is opened to force other processes to buffer write
requests while performing compaction.
Read requests are handled without disruption.
.It Cm index
Re-index all databases.
.Xr ldapd 8
does not have to be running.
.El
.Sh FILES
.Bl -tag -width "/var/run/ldapd.sockXXXXXXX" -compact
.It Pa /var/run/ldapd.sock
default
.Nm
control socket
.It Pa /etc/ldapd.conf
default
.Xr ldapd 8
configuration file
.El
.Sh SEE ALSO
.Xr ldapd.conf 5 ,
.Xr ldapd 8
.Sh HISTORY
The
.Nm
program first appeared in
.Ox 4.8 .
@


1.5
log
@Implement ldapctl -r datadir; ok sthen@@ landry@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ldapctl.8,v 1.4 2010/07/21 06:32:14 martinh Exp $
d17 1
a17 1
.Dd $Mdocdate: July 21 2010 $
d27 1
a27 1
.Op Fl r Ar datadir
d47 2
a48 2
.Ar directory
, instead of the default
@


1.4
log
@Add a history section saying that ldapd/ldapctl first appeared in 4.8.
@
text
@d1 1
a1 1
.\"	$OpenBSD: ldapctl.8,v 1.3 2010/06/23 16:22:29 jmc Exp $
d17 1
a17 1
.Dd $Mdocdate: June 23 2010 $
d27 1
d45 5
@


1.3
log
@sort the options list, and add some new options to usage();
@
text
@d1 1
a1 1
.\"	$OpenBSD: ldapctl.8,v 1.2 2010/06/23 13:31:30 martinh Exp $
d93 5
@


1.2
log
@Re-implement compaction and (re-)indexing outside ldapd.
@
text
@d1 1
a1 1
.\"	$OpenBSD: ldapctl.8,v 1.1 2010/05/31 17:36:31 martinh Exp $
d17 1
a17 1
.Dd $Mdocdate: May 31 2010 $
d39 5
a50 5
.It Fl f Ar file
Use
.Ar file
as the configuration file, instead of the default
.Pa /etc/ldapd.conf .
@


1.1
log
@Initial import of ldapd, a small LDAP daemon. Work in progress.

ok deraadt@@ jacekm@@ gilles@@ back@@ henning@@ blambert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d17 1
a17 1
.Dd $Mdocdate: May 11 2010 $
d25 2
d46 7
d59 4
d64 5
a68 4
Initiate compaction of all databases.
Compaction is performed online against a running
.Xr ldapd 8 .
When compaction of a database file is complete,
d70 3
a72 2
reopens the file and new requests are performed against the new database.
Write requests are buffered until the compaction is complete.
d75 3
a77 3
Initiate re-indexing of all databases.
Indexing is performed online against a running
.Xr ldapd 8 .
d85 4
@

