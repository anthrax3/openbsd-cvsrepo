head	1.6;
access;
symbols
	OPENBSD_3_9:1.5.0.6
	OPENBSD_3_9_BASE:1.5
	OPENBSD_3_8:1.5.0.4
	OPENBSD_3_8_BASE:1.5
	OPENBSD_3_7:1.5.0.2
	OPENBSD_3_7_BASE:1.5
	OPENBSD_3_6:1.4.0.14
	OPENBSD_3_6_BASE:1.4
	OPENBSD_3_5:1.4.0.12
	OPENBSD_3_5_BASE:1.4
	OPENBSD_3_4:1.4.0.10
	OPENBSD_3_4_BASE:1.4
	OPENBSD_3_3:1.4.0.8
	OPENBSD_3_3_BASE:1.4
	OPENBSD_3_2:1.4.0.6
	OPENBSD_3_2_BASE:1.4
	OPENBSD_3_1:1.4.0.4
	OPENBSD_3_1_BASE:1.4
	OPENBSD_3_0:1.4.0.2
	OPENBSD_3_0_BASE:1.4
	OPENBSD_2_9_BASE:1.2
	OPENBSD_2_9:1.2.0.4
	OPENBSD_2_8:1.2.0.2
	OPENBSD_2_8_BASE:1.2;
locks; strict;
comment	@.\" @;


1.6
date	2006.05.18.15.44.53;	author reyk;	state dead;
branches;
next	1.5;

1.5
date	2004.11.30.18.28.20;	author jmc;	state Exp;
branches;
next	1.4;

1.4
date	2001.06.23.05.57.10;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	2001.06.23.02.33.23;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	2000.10.17.19.06.31;	author aaron;	state Exp;
branches;
next	1.1;

1.1
date	2000.10.16.22.56.39;	author chris;	state Exp;
branches;
next	;


desc
@@


1.6
log
@remove spppcontrol

sppp(4) configuration is now done with ifconfig(8)

ok canacar@@ deraadt@@ and others
@
text
@.\"	$OpenBSD: spppcontrol.8,v 1.5 2004/11/30 18:28:20 jmc Exp $
.\"
.\" Copyright (C) 1997 by Joerg Wunsch, Dresden
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR(S) ``AS IS'' AND ANY EXPRESS
.\" OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
.\" WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
.\" DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR(S) BE LIABLE FOR ANY DIRECT,
.\" INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
.\" (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
.\" SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
.\" STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
.\" IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
.\" POSSIBILITY OF SUCH DAMAGE.
.\"
.\" $FreeBSD: /c/ncvs/src/sbin/spppcontrol/spppcontrol.8,v 1.4.2.4 2000/05/10 10:01:29 sheldonh Exp $
.\"
.Dd October 11, 1997
.Os
.Dt SPPPCONTROL 8
.Sh NAME
.Nm spppcontrol
.Nd display or set parameters for an sppp interface
.Sh SYNOPSIS
.Nm spppcontrol
.Op Fl v
.Ar ifname
.Op Ar parameter Ns Op \&= Ns Ar value
.Op Ar ...
.Sh DESCRIPTION
The
.Xr sppp 4
driver might require a number of additional arguments or optional
parameters besides the settings that can be adjusted with
.Xr ifconfig 8 .
These are things like authentication protocol parameters, but also
other tunable configuration variables.
The
.Nm
utility can be used to display the current settings, or adjust these
parameters as required.
.Pp
For whatever intent
.Nm
is being called, at least the parameter
.Ar ifname
needs to be specified, naming the interface for which the settings
are to be performed or displayed.
Use
.Xr ifconfig 8
or
.Xr netstat 1
to see which interfaces are available.
.Pp
If no other parameter is given,
.Nm
will just list the current settings for
.Ar ifname
and exit.
The reported settings include the current PPP phase the
interface is in, which can be one of the names
.Em dead ,
.Em establish ,
.Em authenticate ,
.Em network ,
or
.Em terminate .
If an authentication protocol is configured for the interface, the
name of the protocol to be used, as well as the system name to be used
or expected will be displayed, plus any possible options to the
authentication protocol if applicable.
Note that the authentication secrets (sometimes called
.Em keys )
are not returned by the underlying system call, and are thus not
displayed.
.Pp
If any additional parameter is supplied, superuser privileges are
required, and the command works in
.Ql set
mode.
This is normally done quietly, unless the option
.Fl v
is also enabled, which will cause a final printout of the settings as
described above once all other actions have been taken.
Use of this mode will be rejected if the interface is currently in any other
phase than
.Em dead .
Note that you can force an interface into
.Em dead
phase by calling
.Xr ifconfig 8
with the parameter
.Ql down .
.Pp
The currently supported parameters include:
.Bl -tag -offset indent -width indent
.It Ar authproto Ns \&= Ns Em protoname
Set both, his and my authentication protocol to
.Em protoname .
The protocol name can be one of
.Ql chap ,
.Ql pap ,
or
.Ql none .
In the latter case, the use of an authentication protocol will be
turned off for the named interface.
This has the side effect of clearing the other authentication-related
parameters for this interface as well (i.e., system name and authentication
secret will be forgotten).
.It Ar myauthproto Ns \&= Ns Em protoname
Same as above, but only for my end of the link.
I.e., this is the
protocol when remote is authenticator, and I am the peer required to
authenticate.
.It Ar hisauthproto Ns \&= Ns Em protoname
Same as above, but only for his end of the link.
.It Ar myauthname Ns \&= Ns Em name
Set my system name for the authentication protocol.
.It Ar hisauthname Ns \&= Ns Em name
Set his system name for the authentication protocol.
For CHAP, this will only be used as a hint, causing a warning message if
remote did supply a different name.
For PAP, it's the name remote must use to
authenticate himself (in connection with his secret).
.It Ar myauthsecret Ns \&= Ns Em secret
Set my secret (key, password) for use in the authentication phase.
For CHAP, this will be used to compute the response hash value, based
on remote's challenge.
For PAP, it will be transmitted as plain text together with the system name.
Don't forget to quote the secrets from the shell if they contain shell
metacharacters (or whitespace).
.It Ar myauthkey Ns \&= Ns Em secret
Same as above.
.It Ar hisauthsecret Ns \&= Ns Em secret
Same as above, to be used if we are authenticator and the remote peer
needs to authenticate.
.It Ar hisauthkey Ns \&= Ns Em secret
Same as above.
.It Ar callin
Require remote to authenticate himself only when he's calling in, but
not when we are caller.
This is required for some peers that do not implement the authentication
protocols symmetrically (like Ascend routers, for example).
.It Ar always
The opposite of
.Ar callin .
Require remote to always authenticate, regardless of which side is
placing the call.
This is the default, and will not be explicitly displayed in
.Ql list
mode.
.It Ar norechallenge
Only meaningful with CHAP.
Do not re-challenge peer once the initial CHAP handshake was successful.
Used to work around broken peer implementations that can't grok being
re-challenged once the connection is up.
.It Ar rechallenge
With CHAP, send re-challenges at random intervals while the connection
is in network phase.
(The intervals are currently in the range of 300 through approximately
800 seconds.)
This is the default, and will not be explicitly displayed in
.Ql list
mode.
.El
.Sh EXAMPLES
Display the settings for bppp0.
The interface is currently in
.Em dead
phase, i.e., the LCP layer is down, and no traffic is possible.
Both ends of the connection use the CHAP protocol, my end tells remote the
system name
.Ql uriah ,
and remote is expected to authenticate by the name
.Ql ifb-gw .
Once the initial CHAP handshake was successful, no further CHAP
challenges will be transmitted.
There are supposedly some known CHAP secrets for both ends of the link
which are not displayed.
.Bd -literal -offset indent
$ spppcontrol bppp0
bppp0:	phase=dead
	myauthproto=chap myauthname="uriah"
	hisauthproto=chap hisauthname="ifb-gw" norechallenge
.Ed
.Pp
A possible call to
.Nm
that could have been used to bring the interface into the state shown
by the previous example:
.Bd -literal -offset indent
# spppcontrol bppp0 \e
	authproto=chap \e
	myauthname=uriah myauthsecret='some secret' \e
	hisauthname=ifb-gw hisauthsecret='another' \e
	norechallenge
.Ed
.Sh SEE ALSO
.Xr netstat 1 ,
.Xr pppoe 4 ,
.Xr sppp 4 ,
.Xr ifconfig 8
.Rs
.%A B. Lloyd
.%A W. Simpson
.%T "PPP Authentication Protocols"
.%O RFC 1334
.Re
.Rs
.%A W. Simpson, Editor
.%T "The Point-to-Point Protocol (PPP)"
.%O RFC 1661
.Re
.Rs
.%A W. Simpson
.%T "PPP Challenge Handshake Authentication Protocol (CHAP)"
.%O RFC 1994
.Re
.Sh HISTORY
The
.Nm
utility appeared in
.Fx 3.0 .
.Sh AUTHORS
The program was written by
.ie t J\(:org Wunsch,
.el Joerg Wunsch,
Dresden.
@


1.5
log
@- simplify grammar
- rearrange EXAMPLES somewhat
- .Xr pppoe 4
@
text
@d1 1
a1 1
.\"	$OpenBSD: spppcontrol.8,v 1.4 2001/06/23 05:57:10 deraadt Exp $
@


1.4
log
@ok, tmac is now fixed
@
text
@d1 1
a1 1
.\"	$OpenBSD: spppcontrol.8,v 1.3 2001/06/23 02:33:23 deraadt Exp $
d85 1
a85 1
are not being returned by the underlying system call, and are thus not
a177 7
.Bd -literal
# spppcontrol bppp0
bppp0:	phase=dead
	myauthproto=chap myauthname="uriah"
	hisauthproto=chap hisauthname="ifb-gw" norechallenge
.Ed
.Pp
d190 7
a196 1
which are not being shown.
d198 5
a202 1
.Bd -literal
a208 5
.Pp
A possible call to
.Nm
that could have been used to bring the interface into the state shown
by the previous example.
d211 1
@


1.3
log
@join .%A entries; most by bk@@rt.fm
@
text
@d1 1
a1 1
.\"	$OpenBSD: spppcontrol.8,v 1.2 2000/10/17 19:06:31 aaron Exp $
d216 2
a217 1
.%A B. Lloyd and W. Simpson
@


1.2
log
@- Add $OpenBSD$ tag.
- Remove hard sentence breaks.
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d216 1
a216 2
.%A B. Lloyd
.%A W. Simpson
@


1.1
log
@spppcontrol from FreeBSD

This allows users to set PAP/CHAP information for if_spppsubr (sync PPP)
when it's in PPP mode

Now working on a good way to switch between HDLC and PPP (and frame relay
soon) for sppp
@
text
@d1 2
d48 2
a49 1
other tunable configuration variables.  The
d59 3
a61 2
are to be performed or displayed.  Use
.Xr ifconfig 8 ,
d70 2
a71 1
and exit.  The reported settings include the current PPP phase the
d82 2
a83 2
authentication protocol if applicable.  Note that the authentication
secrets (sometimes also called
d91 2
a92 1
mode.  This is normally done quietly, unless the option
d95 3
a97 3
described above once all other actions have been taken.  Use of this
mode will be rejected if the interface is currently in any other phase
than
d117 4
a120 4
turned off for the named interface.  This has the side-effect of
clearing the other authentication-related parameters for this
interface as well (i.e. system name and authentication secret will
be forgotten).
d123 1
a123 1
I.e. this is the
d131 4
a134 3
Set his system name for the authentication protocol.  For CHAP, this
will only be used as a hint, causing a warning message if remote did
supply a different name.  For PAP, it's the name remote must use to
d139 4
a142 3
on remote's challenge.  For PAP, it will be transmitted as plain text
together with the system name.  Don't forget to quote the secrets from
the shell if they contain shell metacharacters (or white space).
d152 3
a154 3
not when we are caller.  This is required for some peers that do not
implement the authentication protocols symmetrically (like Ascend
routers, for example).
d159 2
a160 2
placing the call.  This is the default, and will not be explicitly
displayed in
d164 4
a167 4
Only meaningful with CHAP.  Do not re-challenge peer once the initial
CHAP handshake was successful.  Used to work around broken peer
implementations that can't grok being re-challenged once the
connection is up.
d170 4
a173 3
is in network phase.  (The intervals are currently in the range of 300
through approximately 800 seconds.)  This is the default, and will not
be explicitly displayed in
d185 2
a186 1
Display the settings for bppp0.  The interface is currently in
d188 2
a189 2
phase, i.e. the LCP layer is down, and no traffic is possible.  Both
ends of the connection use the CHAP protocol, my end tells remote the
d195 3
a197 2
challenges will be transmitted.  There are supposedly some known CHAP
secrets for both ends of the link which are not being shown.
@

