head	1.25;
access;
symbols
	OPENBSD_6_1:1.25.0.6
	OPENBSD_6_1_BASE:1.25
	OPENBSD_6_0:1.25.0.4
	OPENBSD_6_0_BASE:1.25
	OPENBSD_5_9:1.25.0.2
	OPENBSD_5_9_BASE:1.25
	OPENBSD_5_8:1.23.0.4
	OPENBSD_5_8_BASE:1.23
	OPENBSD_5_7:1.22.0.2
	OPENBSD_5_7_BASE:1.22
	OPENBSD_5_6:1.21.0.8
	OPENBSD_5_6_BASE:1.21
	OPENBSD_5_5:1.21.0.6
	OPENBSD_5_5_BASE:1.21
	OPENBSD_5_4:1.21.0.2
	OPENBSD_5_4_BASE:1.21
	OPENBSD_5_3:1.20.0.2
	OPENBSD_5_3_BASE:1.20
	OPENBSD_5_2:1.18.0.8
	OPENBSD_5_2_BASE:1.18
	OPENBSD_5_1_BASE:1.18
	OPENBSD_5_1:1.18.0.6
	OPENBSD_5_0:1.18.0.4
	OPENBSD_5_0_BASE:1.18
	OPENBSD_4_9:1.18.0.2
	OPENBSD_4_9_BASE:1.18
	OPENBSD_4_8:1.6.0.2
	OPENBSD_4_8_BASE:1.6;
locks; strict;
comment	@.\" @;


1.25
date	2015.11.02.10.27.44;	author jsg;	state Exp;
branches;
next	1.24;
commitid	oYugXczRgOhXq8hY;

1.24
date	2015.09.07.15.24.53;	author sobrado;	state Exp;
branches;
next	1.23;
commitid	uuKhuEzXVfSR96TE;

1.23
date	2015.07.27.17.28.39;	author sobrado;	state Exp;
branches;
next	1.22;
commitid	a73SHFfjDK7MTyGx;

1.22
date	2015.02.28.21.51.57;	author bentley;	state Exp;
branches;
next	1.21;
commitid	NNu2UZnsd5zmNVYD;

1.21
date	2013.07.16.11.13.33;	author schwarze;	state Exp;
branches;
next	1.20;

1.20
date	2013.01.08.10.38.19;	author reyk;	state Exp;
branches;
next	1.19;

1.19
date	2012.09.18.12.07.59;	author reyk;	state Exp;
branches;
next	1.18;

1.18
date	2011.01.20.13.58.16;	author jmc;	state Exp;
branches;
next	1.17;

1.17
date	2010.10.11.14.25.05;	author sthen;	state Exp;
branches;
next	1.16;

1.16
date	2010.10.11.13.47.20;	author sthen;	state Exp;
branches;
next	1.15;

1.15
date	2010.10.08.11.51.56;	author jsg;	state Exp;
branches;
next	1.14;

1.14
date	2010.10.08.10.13.47;	author jsg;	state Exp;
branches;
next	1.13;

1.13
date	2010.10.08.07.45.06;	author reyk;	state Exp;
branches;
next	1.12;

1.12
date	2010.10.07.13.30.50;	author reyk;	state Exp;
branches;
next	1.11;

1.11
date	2010.10.07.12.33.58;	author reyk;	state Exp;
branches;
next	1.10;

1.10
date	2010.10.07.12.23.14;	author reyk;	state Exp;
branches;
next	1.9;

1.9
date	2010.10.01.07.08.25;	author jmc;	state Exp;
branches;
next	1.8;

1.8
date	2010.09.30.10.36.24;	author reyk;	state Exp;
branches;
next	1.7;

1.7
date	2010.09.30.10.03.52;	author reyk;	state Exp;
branches;
next	1.6;

1.6
date	2010.06.23.16.01.01;	author jsg;	state Exp;
branches;
next	1.5;

1.5
date	2010.06.15.08.41.44;	author jsg;	state Exp;
branches;
next	1.4;

1.4
date	2010.06.14.17.41.18;	author jsg;	state Exp;
branches;
next	1.3;

1.3
date	2010.06.10.16.14.04;	author jsg;	state Exp;
branches;
next	1.2;

1.2
date	2010.06.10.14.08.37;	author reyk;	state Exp;
branches;
next	1.1;

1.1
date	2010.06.03.16.49.00;	author reyk;	state Exp;
branches;
next	;


desc
@@


1.25
log
@Accept an ocsp option when creating certificates to set the extended
key usage for OCSP signing.

Requested by and ok reyk@@
@
text
@.\" $OpenBSD: ikectl.8,v 1.24 2015/09/07 15:24:53 sobrado Exp $
.\"
.\" Copyright (c) 2007-2013 Reyk Floeter <reyk@@openbsd.org>
.\"
.\" Permission to use, copy, modify, and distribute this software for any
.\" purpose with or without fee is hereby granted, provided that the above
.\" copyright notice and this permission notice appear in all copies.
.\"
.\" THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
.\" WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
.\" MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
.\" ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
.\" WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
.\" ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
.\" OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
.\"
.Dd $Mdocdate: September 7 2015 $
.Dt IKECTL 8
.Os
.Sh NAME
.Nm ikectl
.Nd control the IKEv2 daemon
.Sh SYNOPSIS
.Nm
.Op Fl q
.Op Fl s Ar socket
.Ar command
.Op Ar arg ...
.Sh DESCRIPTION
The
.Nm
program controls the
.Xr iked 8
daemon and provides commands to maintain a simple X.509 certificate
authority (CA) for IKEv2 peers.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl q
Don't ask for confirmation of any default options.
.It Fl s Ar socket
Use
.Ar socket
instead of the default
.Pa /var/run/iked.sock
to communicate with
.Xr iked 8 .
.El
.Sh IKED CONTROL COMMANDS
The following commands are available to control
.Xr iked 8 :
.Bl -tag -width Ds
.It Cm active
Set
.Xr iked 8
to active mode.
.It Cm passive
Set
.Xr iked 8
to passive mode.
In passive mode no packets are sent to peers and no connections
are initiated by
.Xr iked 8 .
.It Cm couple
Load the negotiated security associations (SAs) and flows into the kernel.
.It Cm decouple
Unload the negotiated SAs and flows from the kernel.
This mode is only useful for testing and debugging.
.It Cm load Ar filename
Reload the configuration from the specified file.
.It Cm log brief
Disable verbose logging.
.It Cm log verbose
Enable verbose logging.
.It Cm monitor
Monitor internal messages of the
.Xr iked 8
subsystems.
.It Cm reload
Reload the configuration from the default configuration file.
.It Cm reset all
Reset the running state.
.It Cm reset ca
Reset the X.509 CA and certificate state.
.It Cm reset policy
Flush the configured policies.
.It Cm reset sa
Flush the running SAs.
.It Cm reset user
Flush the local user database.
.El
.Sh PKI AND CERTIFICATE AUTHORITY COMMANDS
In order to use public key based authentication with IKEv2,
a public key infrastructure (PKI) has to be set up to create and sign
the peer certificates.
.Nm
includes commands to simplify maintenance of the PKI
and to set up a simple certificate authority (CA) for
.Xr iked 8
and its peers.
.Pp
The following commands are available to control the CA:
.Bl -tag -width Ds
.It Xo
.Cm ca Ar name Cm create
.Op Cm password Ar password
.Xc
Create a new certificate authority with the specified
.Ar name .
The command will prompt for a CA password unless it is specified with
the optional
.Ar password
argument.
The password will be saved in a protected file
.Pa ikeca.passwd
in the CA directory and used for subsequent commands.
.It Cm ca Ar name Cm delete
Delete the certificate authority with the specified
.Ar name .
.It Xo
.Cm ca Ar name Cm export
.Op Cm peer Ar peer
.Op Cm password Ar password
.Xc
Export the certificate authority with the specified
.Ar name
into the current directory for transport to other systems.
This command will create a compressed tarball called
.Pa ca.tgz
in the local directory and optionally
.Pa ca.zip
if the
.Sq zip
tool is installed.
The optional
.Ar peer
argument can be used to specify the address or FQDN of the local gateway
which will be written into a text file
.Pa peer.txt
and included in the archives.
.It Xo
.Cm ca Ar name
.Cm install Op Ar path
.Xc
Install the certificate and Certificate Revocation List (CRL) for CA
.Ar name
as the currently active CA or into the specified
.Ar path .
.It Xo
.Cm ca Ar name Cm certificate Ar host
.Cm create
.Op Ic server | client | ocsp
.Xc
Create a private key and certificate for
.Ar host
and sign then with the key of certificate authority with the specified
.Ar name .
.Pp
The certificate will be valid for client and server authentication by
default by setting both flags as the extended key usage in the certificate;
this can be restricted using the optional
.Ic server
or
.Ic client
argument.
If the
.Ic ocsp
argument is specified the extended key usage will be set for OCSP signing.
.It Xo
.Cm ca Ar name Cm certificate Ar host
.Cm delete
.Xc
Deletes the private key and certificates associated with
.Ar host .
.It Xo
.Cm ca Ar name Cm certificate Ar host
.Cm export
.Op Cm peer Ar peer
.Op Cm password Ar password
.Xc
Export key files for
.Ar host
of the certificate authority with the specified
.Ar name
into the current directory for transport to other systems.
This command will create a compressed tarball
.Pa host.tgz
in the local directory and optionally
.Pa host.zip
if the
.Sq zip
tool is installed.
The optional
.Ar peer
argument can be used to specify the address or FQDN of the local gateway
which will be written into a text file
.Pa peer.txt
and included in the archives.
.It Xo
.Cm ca Ar name Cm certificate Ar host
.Cm install Op Ar path
.Xc
Install the private and public key for
.Ar host
into the active configuration or specified
.Ar path .
.It Xo
.Cm ca Ar name Cm certificate Ar host
.Cm revoke
.Xc
Revoke the certificate specified by
.Ar host
and generate a new Certificate Revocation List (CRL).
.It Xo
.Cm show Cm ca Ar name Cm certificates
.Op Ar host
.Xc
Display a listing of certificates associated with CA
.Ar name
or display certificate details if
.Ar host
is specified.
.It Xo
.Cm ca Ar name Cm key Ar host
.Cm create
.Xc
Create a private key for
.Ar host
if one does not already exist.
.It Xo
.Cm ca Ar name Cm key Ar host
.Cm install Op Ar path
.Xc
Install the private and public keys for
.Ar host
into the active configuration or specified
.Ar path .
.It Xo
.Cm ca Ar name Cm key Ar host
.Cm delete
.Xc
Delete the private key for
.Ar host .
.It Xo
.Cm ca Ar name Cm key Ar host
.Cm import
.Ar file
.Xc
Source the private key for
.Ar host
from the named
.Ar file .
.El
.Sh FILES
.Bl -tag -width "/var/run/iked.sockXX" -compact
.It Pa /etc/iked/
Active configuration.
.It Pa /etc/ssl/
Directory to store the CA files.
.It Pa /usr/share/iked/
If this optional directory exists,
.Nm
will include the contents with the
.Cm ca export
commands.
.It Pa /var/run/iked.sock
Default
.Ux Ns -domain
socket used for communication with
.Xr iked 8 .
.El
.Sh EXAMPLES
First create a new certificate authority:
.Bd -literal -offset indent
# ikectl ca vpn create
.Ed
.Pp
Now create the certificates for the VPN peers.
The specified hostname, either IP address or FQDN, will be saved in
the signed certificate and has to match the IKEv2 identity, or
.Ar srcid ,
of the peers:
.Bd -literal -offset indent
# ikectl ca vpn certificate 10.1.2.3 create
# ikectl ca vpn certificate 10.2.3.4 create
# ikectl ca vpn certificate 10.3.4.5 create
.Ed
.Pp
It is possible that the host that was used to create the CA is also
one of the VPN peers.
In this case you can install the peer and CA certificates locally:
.Bd -literal -offset indent
# ikectl ca vpn install
# ikectl ca vpn certificate 10.1.2.3 install
.Ed
.Pp
Now export the individual host key, the certificate and the CA
certificate to each other peer.
First run the
.Ic export
command to create tarballs that include the required files:
.Bd -literal -offset indent
# ikectl ca vpn certificate 10.2.3.4 export
# ikectl ca vpn certificate 10.3.4.5 export
.Ed
.Pp
These commands will produce two tarballs
.Em 10.2.3.4.tgz
and
.Em 10.3.4.5.tgz .
Copy these tarballs over to the appropriate peers and extract them
to the
.Pa /etc/iked/
directory:
.Bd -literal -offset indent
10.2.3.4# tar -C /etc/iked -xzpf 10.2.3.4.tgz
10.3.4.5# tar -C /etc/iked -xzpf 10.3.4.5.tgz
.Ed
.Pp
.Nm
will also create
.Sq zip
archives 10.2.3.4.zip and 10.3.4.5.zip
in addition to the tarballs if the zip tool is found in
.Pa /usr/local/bin/zip .
These archives can be exported to peers running Windows and will
include the certificates in a format that is supported by the OS.
The zip tool can be installed from the
.Ox
packages or ports collection before running the
.Ic export
commands, see
.Xr packages 7
for more information.
For example:
.Bd -literal -offset indent
# pkg_add zip
.Ed
.Sh SEE ALSO
.Xr packages 7 ,
.Xr iked 8 ,
.Xr ssl 8
.Sh HISTORY
The
.Nm
program first appeared in
.Ox 4.8 .
.Sh AUTHORS
The
.Nm
program was written by
.An Reyk Floeter Aq Mt reyk@@openbsd.org
and
.An Jonathan Gray Aq Mt jsg@@openbsd.org .
.Sh CAVEATS
For ease of use, the
.Ic ca
commands maintain all peers' private keys on the CA machine.
In contrast to a
.Sq real
CA, it does not support signing of public keys that have been imported
from peers that do not want to expose their private keys to the CA.
@


1.24
log
@append a slash immediately after a file system path that is a directory;
uppercase the description of /var/run/iked.sock (found by jmc@@);
add missing full stop.

ok jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ikectl.8,v 1.23 2015/07/27 17:28:39 sobrado Exp $
d17 1
a17 1
.Dd $Mdocdate: July 27 2015 $
d152 1
a152 1
.Op Ic server | client
d166 3
@


1.23
log
@use file system path (.Pa) semantic markup macros where appropriate.

ok jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ikectl.8,v 1.22 2015/02/28 21:51:57 bentley Exp $
d17 1
a17 1
.Dd $Mdocdate: February 28 2015 $
d257 1
a257 1
.It Pa /usr/share/iked
d264 1
a264 1
default
d267 1
a267 1
.Xr iked 8
@


1.22
log
@Reduce usage of predefined strings in manpages.

Predefined strings are not very portable across troff implementations,
and they make the source much harder to read. Usually the intended
character can be written directly.

No output changes, except for two instances where the incorrect escape
was used in the first place.

tweaks + ok schwarze@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ikectl.8,v 1.21 2013/07/16 11:13:33 schwarze Exp $
d17 1
a17 1
.Dd $Mdocdate: July 16 2013 $
d253 1
a253 1
.It /etc/iked/
d255 1
a255 1
.It /etc/ssl/
d257 1
a257 1
.It /usr/share/iked
d263 1
a263 1
.It /var/run/iked.sock
@


1.21
log
@use .Mt for email addresses; from Jan Stary <hans at stare dot cz>; ok jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ikectl.8,v 1.20 2013/01/08 10:38:19 reyk Exp $
d17 1
a17 1
.Dd $Mdocdate: January 8 2013 $
d152 1
a152 1
.Op Ic server \*(Ba client
@


1.20
log
@Remove private CVS tag from an obsolete repository and bump copyright
to 2013 while I'm here... this is my way of saying "happy new year!".
@
text
@d1 1
a1 1
.\" $OpenBSD: ikectl.8,v 1.19 2012/09/18 12:07:59 reyk Exp $
d17 1
a17 1
.Dd $Mdocdate: September 18 2012 $
d349 1
a349 1
.An Reyk Floeter Aq reyk@@openbsd.org
d351 1
a351 1
.An Jonathan Gray Aq jsg@@openbsd.org .
@


1.19
log
@update email addresses to match reality.
sure jsg@@ mikeb@@
@
text
@d1 1
a1 2
.\" $OpenBSD: ikectl.8,v 1.18 2011/01/20 13:58:16 jmc Exp $
.\" $vantronix: ikectl.8,v 1.11 2010/06/03 15:55:51 reyk Exp $
d3 1
a3 1
.\" Copyright (c) 2007, 2008, 2009, 2010 Reyk Floeter <reyk@@openbsd.org>
d17 1
a17 1
.Dd $Mdocdate: January 20 2011 $
@


1.18
log
@more double word removal;
@
text
@d1 1
a1 1
.\" $OpenBSD: ikectl.8,v 1.17 2010/10/11 14:25:05 sthen Exp $
d4 1
a4 1
.\" Copyright (c) 2007, 2008, 2009, 2010 Reyk Floeter <reyk@@vantronix.net>
d18 1
a18 1
.Dd $Mdocdate: October 11 2010 $
d350 1
a350 1
.An Reyk Floeter Aq reyk@@vantronix.net
d352 1
a352 1
.An Jonathan Gray Aq jsg@@vantronix.net .
@


1.17
log
@and another one... s/10.4.5.6/10.3.4.5/, also from jy-p.
@
text
@d1 1
a1 1
.\" $OpenBSD: ikectl.8,v 1.16 2010/10/11 13:47:20 sthen Exp $
d83 1
a83 1
Reset the the running state.
d171 1
a171 1
Deletes the private key and and certificates associated with
@


1.16
log
@typo, s/10.1.2.3/10.2.3.4/, from jy-p
@
text
@d1 1
a1 1
.\" $OpenBSD: ikectl.8,v 1.15 2010/10/08 11:51:56 jsg Exp $
d18 1
a18 1
.Dd $Mdocdate: October 8 2010 $
d308 1
a308 1
.Em 10.4.5.6.tgz .
@


1.15
log
@tweak for nroff
@
text
@d1 1
a1 1
.\" $OpenBSD: ikectl.8,v 1.14 2010/10/08 10:13:47 jsg Exp $
d306 1
a306 1
.Em 10.1.2.3.tgz
@


1.14
log
@allow optional paths for the install commands so we can
install into the isakmpd directory hierarchy for example.
@
text
@d1 1
a1 1
.\" $OpenBSD: ikectl.8,v 1.13 2010/10/08 07:45:06 reyk Exp $
d142 4
a145 1
.It Cm ca Ar name Cm install Op Ar path
@


1.13
log
@Allow to show certificate details (show ca x cert [y]).
@
text
@d1 1
a1 1
.\" $OpenBSD: ikectl.8,v 1.12 2010/10/07 13:30:50 reyk Exp $
d18 1
a18 1
.Dd $Mdocdate: October 7 2010 $
d142 1
a142 1
.It Cm ca Ar name Cm install
d145 2
a146 1
as the currently active CA.
d196 1
a196 1
.Cm install
d200 2
a201 1
into the active configuration.
d227 1
a227 1
.Cm install
d231 2
a232 1
into the active configuration.
@


1.12
log
@Allow to specify the export password on the command line (optionally, for
scripting).  The "peer" argument now needs to be preceded with the "peer"
keyword, eg. ... export peer 10.1.1.1 instead of export 10.1.1.1.
@
text
@d1 1
a1 1
.\" $OpenBSD: ikectl.8,v 1.11 2010/10/07 12:33:58 reyk Exp $
d207 4
a210 1
.It Cm show Cm ca Ar name Cm certificates
d212 4
a215 1
.Ar name .
@


1.11
log
@nroff doesn't like long argument lists that work fine with mandoc.
split them into Xo/Xc blocks to make nroff happy again.
@
text
@d1 1
a1 1
.\" $OpenBSD: ikectl.8,v 1.10 2010/10/07 12:23:14 reyk Exp $
d107 1
a107 1
.Op Ar password
d123 2
a124 1
.Op Ar peer
d172 2
a173 1
.Op Ar peer
@


1.10
log
@- add a -q (quiet) command line option that will be used by ikeca to
set openssl batch mode: don't ask for x509 options, use the defaults.
- allow to specify the initial ca password on the command line to also
make it scriptable.
- allow to create certificates for clientAuth or serverAuth only
(eg. ikectl ca foo certificate bar server).
- cosmetics: move double declarations of ca_*() functions to parser.h.

ok phessler@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ikectl.8,v 1.9 2010/10/01 07:08:25 jmc Exp $
d18 1
a18 1
.Dd $Mdocdate: October 1 2010 $
d105 4
a108 1
.It Cm ca Ar name Cm create Op Ar password
d121 4
a124 1
.It Cm ca Ar name Cm export Op Ar peer
d145 5
a149 1
.It Cm ca Ar name Cm certificate Ar host Cm create Op Ic server  \*(Ba client
d162 4
a165 1
.It Cm ca Ar name Cm certificate Ar host Cm delete
d168 5
a172 1
.It Cm ca Ar name Cm certificate Ar host Cm export Op Ar peer
d191 4
a194 1
.It Cm ca Ar name Cm certificate Ar host Cm install
d198 4
a201 1
.It Cm ca Ar name Cm certificate Ar host Cm revoke
d208 4
a211 1
.It Cm ca Ar name Cm key Ar host Cm create
d215 4
a218 1
.It Cm ca Ar name Cm key Ar host Cm install
d222 4
a225 1
.It Cm ca Ar name Cm key Ar host Cm delete
d228 5
a232 1
.It Cm ca Ar name Cm key Ar host Cm import Ar file
@


1.9
log
@tweak previous;
@
text
@d1 1
a1 1
.\" $OpenBSD: ikectl.8,v 1.8 2010/09/30 10:36:24 reyk Exp $
d18 1
a18 1
.Dd $Mdocdate: September 30 2010 $
d26 1
d40 2
d105 1
a105 1
.It Cm ca Ar name Cm create
d108 7
d139 1
a139 1
.It Cm ca Ar name Cm certificate Ar host Cm create
d144 8
@


1.8
log
@Add jsg@@ to the AUTHORS section of ikectl; he wrote the CA/PKI part.
@
text
@d1 1
a1 1
.\" $OpenBSD: ikectl.8,v 1.7 2010/09/30 10:03:52 reyk Exp $
d184 18
d258 3
a260 2
The zip tool can be installed from the OpenBSD packages or ports
collection before running the
a268 18
.Sh FILES
.Bl -tag -width "/var/run/iked.sockXX" -compact
.It /etc/iked/
Active configuration.
.It /etc/ssl/
Directory to store the CA files.
.It /usr/share/iked
If this optional directory exists,
.Nm
will include the contents with the
.Cm ca export
commands.
.It /var/run/iked.sock
default
.Ux Ns -domain
socket used for communication with
.Xr iked 8
.El
d270 1
d272 1
a272 2
.Xr packages 7 ,
.Xr ssl 8 ,
d286 1
a286 1
For the ease of use, the
d288 1
a288 1
commands will maintain all private keys of the peers on the CA machine.
@


1.7
log
@Add some examples about using the CA commands to create and install the
CA and peers certificates.

With input from mikeb@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ikectl.8,v 1.4 2010/06/14 17:41:18 jsg Exp $
d18 1
a18 1
.Dd $Mdocdate: June 23 2010 $
d281 3
a283 1
.An Reyk Floeter Aq reyk@@vantronix.net .
@


1.6
log
@Add a ca export command for EAP mode where we only require the CA cert,
and make both export commands optionally take an argument that will be
added to a peer.txt file in the exported output.   Additionally
include any site specific notes from /usr/share/iked if present.

man page bits and help with the parser from reyk
@
text
@d18 1
a18 1
.Dd $Mdocdate: June 14 2010 $
d112 7
d123 2
a124 1
.Pa peer.txt .
d132 1
a132 1
and sign then with the key of certificate authority with the speicified
d143 7
d154 2
a155 1
.Pa peer.txt .
d184 66
d252 2
d270 2
a271 1
.Xr ssl 8
d282 8
@


1.5
log
@fix an mdoc macro
@
text
@d108 9
d129 1
a129 1
.It Cm ca Ar name Cm certificate Ar host Cm export
d135 5
d172 6
@


1.4
log
@Add commands to create/delete/install/import keys without
involving certificates as suggested by reyk and don't
recreate private keys if a key already exists.

ok reyk@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ikectl.8,v 1.3 2010/06/10 16:14:04 jsg Exp $
d18 1
a18 1
.Dd $Mdocdate: June 10 2010 $
d148 1
a148 1
.It Cm ca Ar name Cm key Ar host Cm import Cm file
@


1.3
log
@Add a command to revoke a certificate and generate a CRL;
make the ca install command install the CRL as well.

discussed with reyk@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ikectl.8,v 1.2 2010/06/10 14:08:37 reyk Exp $
d137 16
@


1.2
log
@add new commands: the couple/decouple commands will set loading of the
learned flows and SAs to the kernel which is useful for testing and
debugging. the active/passive commands are required to use iked
with sasyncd(8);  sasyncd just needs to call "ikectl active/passive" or
send the appropriate imsg to support iked but this is not implemented yet.
@
text
@d1 1
a1 1
.\" $OpenBSD: ikectl.8,v 1.1 2010/06/03 16:49:00 reyk Exp $
d18 1
a18 1
.Dd $Mdocdate: June 3 2010 $
d109 1
a109 1
Install the certificate for CA
d130 4
@


1.1
log
@Import iked, a new implementation of the IKEv2 protocol.

iked(8) is an automatic keying daemon for IPsec, like isakmpd(8), that
IPsec creates flows and SAs automatically.  Unlike isakmpd, iked(8)
implements the newer IKEv2 protocol instead of IKEv1/ISAKMP.  The
daemon is still work-in-progress and not enabled in the builds, but is
already able to establish IKEv2 sessions with some other IKEv2
implementations as a responder.

with lots of help and debugging by jsg@@
ok deraadt@@
@
text
@d1 1
a1 1
.\" $OpenBSD: snmpctl.8,v 1.11 2009/10/22 15:02:13 sobrado Exp $
d51 16
@

