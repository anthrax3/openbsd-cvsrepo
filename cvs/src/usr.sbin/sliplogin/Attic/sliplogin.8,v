head	1.14;
access;
symbols
	OPENBSD_5_6:1.13.0.30
	OPENBSD_5_6_BASE:1.13
	OPENBSD_5_5:1.13.0.28
	OPENBSD_5_5_BASE:1.13
	OPENBSD_5_4:1.13.0.24
	OPENBSD_5_4_BASE:1.13
	OPENBSD_5_3:1.13.0.22
	OPENBSD_5_3_BASE:1.13
	OPENBSD_5_2:1.13.0.20
	OPENBSD_5_2_BASE:1.13
	OPENBSD_5_1_BASE:1.13
	OPENBSD_5_1:1.13.0.18
	OPENBSD_5_0:1.13.0.16
	OPENBSD_5_0_BASE:1.13
	OPENBSD_4_9:1.13.0.14
	OPENBSD_4_9_BASE:1.13
	OPENBSD_4_8:1.13.0.12
	OPENBSD_4_8_BASE:1.13
	OPENBSD_4_7:1.13.0.8
	OPENBSD_4_7_BASE:1.13
	OPENBSD_4_6:1.13.0.10
	OPENBSD_4_6_BASE:1.13
	OPENBSD_4_5:1.13.0.6
	OPENBSD_4_5_BASE:1.13
	OPENBSD_4_4:1.13.0.4
	OPENBSD_4_4_BASE:1.13
	OPENBSD_4_3:1.13.0.2
	OPENBSD_4_3_BASE:1.13
	OPENBSD_4_2:1.11.0.2
	OPENBSD_4_2_BASE:1.11
	OPENBSD_4_1:1.10.0.2
	OPENBSD_4_1_BASE:1.10
	OPENBSD_4_0:1.9.0.14
	OPENBSD_4_0_BASE:1.9
	OPENBSD_3_9:1.9.0.12
	OPENBSD_3_9_BASE:1.9
	OPENBSD_3_8:1.9.0.10
	OPENBSD_3_8_BASE:1.9
	OPENBSD_3_7:1.9.0.8
	OPENBSD_3_7_BASE:1.9
	OPENBSD_3_6:1.9.0.6
	OPENBSD_3_6_BASE:1.9
	OPENBSD_3_5:1.9.0.4
	OPENBSD_3_5_BASE:1.9
	OPENBSD_3_4:1.9.0.2
	OPENBSD_3_4_BASE:1.9
	OPENBSD_3_3:1.7.0.4
	OPENBSD_3_3_BASE:1.7
	OPENBSD_3_2:1.7.0.2
	OPENBSD_3_2_BASE:1.7
	OPENBSD_3_1:1.6.0.6
	OPENBSD_3_1_BASE:1.6
	OPENBSD_3_0:1.6.0.4
	OPENBSD_3_0_BASE:1.6
	OPENBSD_2_9_BASE:1.6
	OPENBSD_2_9:1.6.0.2
	OPENBSD_2_8:1.5.0.4
	OPENBSD_2_8_BASE:1.5
	OPENBSD_2_7:1.5.0.2
	OPENBSD_2_7_BASE:1.5
	OPENBSD_2_6:1.3.0.4
	OPENBSD_2_6_BASE:1.3
	OPENBSD_2_5:1.3.0.2
	OPENBSD_2_5_BASE:1.3
	OPENBSD_2_4:1.1.1.1.0.10
	OPENBSD_2_4_BASE:1.1.1.1
	OPENBSD_2_3:1.1.1.1.0.8
	OPENBSD_2_3_BASE:1.1.1.1
	OPENBSD_2_2:1.1.1.1.0.6
	OPENBSD_2_2_BASE:1.1.1.1
	OPENBSD_2_1:1.1.1.1.0.4
	OPENBSD_2_1_BASE:1.1.1.1
	OPENBSD_2_0:1.1.1.1.0.2
	OPENBSD_2_0_BASE:1.1.1.1
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@.\" @;


1.14
date	2014.10.01.09.54.52;	author mpi;	state dead;
branches;
next	1.13;
commitid	qd1wWToTuOPbZjAS;

1.13
date	2008.01.07.16.37.51;	author mbalmer;	state Exp;
branches;
next	1.12;

1.12
date	2008.01.06.09.53.17;	author mbalmer;	state Exp;
branches;
next	1.11;

1.11
date	2007.05.31.19.20.29;	author jmc;	state Exp;
branches;
next	1.10;

1.10
date	2007.02.06.20.07.16;	author jmc;	state Exp;
branches;
next	1.9;

1.9
date	2003.06.12.12.59.53;	author jmc;	state Exp;
branches;
next	1.8;

1.8
date	2003.06.02.23.36.54;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	2002.05.19.09.40.23;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	2000.12.15.14.31.18;	author aaron;	state Exp;
branches;
next	1.5;

1.5
date	2000.03.19.17.57.15;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	2000.03.04.22.19.30;	author aaron;	state Exp;
branches;
next	1.3;

1.3
date	99.04.02.15.12.21;	author aaron;	state Exp;
branches;
next	1.2;

1.2
date	99.03.11.21.08.02;	author aaron;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.48.21;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.48.21;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.14
log
@tedu sliplogin and slstats to beging with the slip, slipping out of the
tree event.

Discussed with many at EuroBSDCon, ok deraadt@@, henning@@, claudio@@
@
text
@.\"	$OpenBSD: sliplogin.8,v 1.13 2008/01/07 16:37:51 mbalmer Exp $
.\"
.\" Copyright (c) 1990, 1991 The Regents of the University of California.
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"     from: @@(#)sliplogin.8	5.4 (Berkeley) 8/5/91
.\"	$Id: sliplogin.8,v 1.13 2008/01/07 16:37:51 mbalmer Exp $
.\"
.Dd $Mdocdate: January 7 2008 $
.Dt SLIPLOGIN 8
.Os
.Sh NAME
.Nm sliplogin
.Nd attach a serial line network interface
.Sh SYNOPSIS
.Nm sliplogin
.Op Ar loginname
.Sh DESCRIPTION
.Nm
is used to turn the terminal line on standard input into
a Serial Line IP
.Pq Tn SLIP
link to a remote host.
To do this, the program searches the file
.Pa /etc/sliphome/slip.hosts
for an entry matching
.Ar loginname
(which defaults to the current login name if omitted).
If a matching entry is found, the line is configured appropriately
for slip (8-bit transparent I/O) and converted to
.Tn SLIP
line discipline.
Then a shell script is invoked to initialize the slip
interface with the appropriate local and remote
.Tn IP
address,
netmask, etc.
.Pp
The usual initialization script is
.Pa /etc/sliphome/slip.login
but, if particular hosts need special initialization, the file
.Pa /etc/sliphome/slip.login. Ns Ar loginname
will be executed instead if it exists.
The script is invoked with the parameters
.Bl -tag -width slipunit
.It Em slipunit
The unit number of the slip interface assigned to this line.
e.g.,
.Sy 0
for
.Sy sl0 .
.It Em speed
The speed of the line.
.It Em args
The arguments from the
.Pa /etc/sliphome/slip.hosts
entry, in order starting with
.Ar loginname .
.El
.Pp
Only the superuser may attach a network interface.
The interface is automatically detached when the other end hangs up or the
.Nm
process dies.
If the kernel slip
module has been configured for it, all routes through that interface will
also disappear at the same time.
If there is other processing a site
would like done on hangup, the file
.Pa /etc/sliphome/slip.logout
or
.Pa /etc/sliphome/slip.logout. Ns Ar loginname
is executed if it exists.
It is given the same arguments as the login script.
.Ss Format of /etc/sliphome/slip.hosts
Comments (lines starting with a `#') and blank lines are ignored.
Other lines must start with a
.Ar loginname
but the remaining arguments can be whatever is appropriate for the
.Pa slip.login
file that will be executed for that name.
Arguments are separated by whitespace and follow normal
.Xr sh 1
quoting conventions (however,
.Ar loginname
cannot be quoted).
Usually, lines have the form
.Bd -literal -offset indent
loginname local-address remote-address netmask opt-args
.Ed
.Pp
where
.Em local-address
and
.Em remote-address
are the IP host names or addresses of the local and remote ends of the
slip line and
.Em netmask
is the appropriate IP netmask.
These arguments are passed directly to
.Xr ifconfig 8 .
.Em Opt-args
are optional arguments used to configure the line.
.Sh EXAMPLES
The normal use of
.Nm
is to create a
.Pa /etc/passwd
entry for each legal, remote slip site with
.Nm
as the shell for that entry.
e.g.,
.Bd -literal
Sfoo:ikhuy6:2010:1:slip line to foo:/tmp:/usr/sbin/sliplogin
.Ed
.Pp
(Our convention is to name the account used by remote host
.Ar hostname
as
.Em Shostname . )
Then an entry is added to
.Pa slip.hosts
that looks like:
.Bd -literal -offset indent
Sfoo	`hostname`	foo	netmask
.Ed
.Pp
where
.Em `hostname`
will be evaluated by
.Xr sh 1
to the local host name and
.Em netmask
is the local host IP netmask.
.Pp
Note that
.Nm
must be setuid to root and is only executable by users in group
.Va network .
To permit use, place a user into that group.
Users in that group are of course also able to use
.Nm
to place terminal lines in an unusable state and/or deny
access to legitimate users of a remote slip line.
.Sh DIAGNOSTICS
.Nm
logs various information to the system log daemon,
.Xr syslogd 8 ,
with a facility code of
.Em daemon .
The messages are listed here, grouped by severity level.
.Pp
.Sy Error Severity
.Bl -tag -width Ds -compact
.It Sy ioctl (TCGETS): Em reason
A
.Dv TCGETS
.Fn ioctl
to get the line parameters failed.
.Pp
.It Sy ioctl (TCSETS): Em reason
A
.Dv TCSETS
.Fn ioctl
to set the line parameters failed.
.Pp
.It Sy /etc/sliphome/slip.hosts: Em reason
The
.Pa /etc/sliphome/slip.hosts
file could not be opened.
.Pp
.It Sy access denied for Em user
No entry for
.Em user
was found in
.Pa /etc/sliphome/slip.hosts .
.El
.Pp
.Sy Notice Severity
.Bl -tag -width Ds -compact
.It Sy "attaching slip unit" Em unit Sy for Ar loginname
.Tn SLIP
unit
.Em unit
was successfully attached.
.El
.Sh SEE ALSO
.Xr ldattach 8 ,
.Xr syslogd 8
@


1.13
log
@Remove HISTORY section that states that sliplogin "is currently in beta test"
per jmc's request.
@
text
@d1 1
a1 1
.\"	$OpenBSD: sliplogin.8,v 1.12 2008/01/06 09:53:17 mbalmer Exp $
d31 1
a31 1
.\"	$Id: sliplogin.8,v 1.12 2008/01/06 09:53:17 mbalmer Exp $
d33 1
a33 1
.Dd $Mdocdate: January 6 2008 $
@


1.12
log
@Don't reference {sl|nmea}attach(8) in the SEE ALSO section but ldattach(8)

Discussed with and ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: sliplogin.8,v 1.11 2007/05/31 19:20:29 jmc Exp $
d31 1
a31 1
.\"	$Id: sliplogin.8,v 1.11 2007/05/31 19:20:29 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate$
a213 5
.Sh HISTORY
The
.Nm
command
.Bt
@


1.11
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: sliplogin.8,v 1.10 2007/02/06 20:07:16 jmc Exp $
d31 1
a31 1
.\"	$Id: sliplogin.8,v 1.10 2007/02/06 20:07:16 jmc Exp $
d212 1
a212 1
.Xr slattach 8 ,
@


1.10
log
@fix some dodgy displays;
@
text
@d1 1
a1 1
.\"	$OpenBSD: sliplogin.8,v 1.9 2003/06/12 12:59:53 jmc Exp $
d31 1
a31 1
.\"	$Id: sliplogin.8,v 1.9 2003/06/12 12:59:53 jmc Exp $
d33 1
a33 1
.Dd August 5, 1991
@


1.9
log
@- section reorder
- macro fixes
- kill whitespace at EOL
- new sentence, new line
@
text
@d1 1
a1 1
.\"	$OpenBSD: sliplogin.8,v 1.8 2003/06/02 23:36:54 millert Exp $
d31 1
a31 1
.\"	$Id: sliplogin.8,v 1.8 2003/06/02 23:36:54 millert Exp $
d148 1
a148 2
.Pp
.Bd -literal -offset indent -compact
@


1.8
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
.\"	$OpenBSD: sliplogin.8,v 1.7 2002/05/19 09:40:23 deraadt Exp $
d31 1
a31 1
.\"	$Id: sliplogin.8,v 1.7 2002/05/19 09:40:23 deraadt Exp $
d156 1
a156 1
.Xr sh
d165 2
a166 2
To permit use, place a user into that group.  Users in that group
are of course also able to use
@


1.7
log
@move to setgid network, and doc why
@
text
@d1 1
a1 1
.\"	$OpenBSD: sliplogin.8,v 1.6 2000/12/15 14:31:18 aaron Exp $
d14 1
a14 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
d31 1
a31 1
.\"	$Id: sliplogin.8,v 1.6 2000/12/15 14:31:18 aaron Exp $
@


1.6
log
@.Sh EXAMPLE -> .Sh EXAMPLES. Even if there's only one example, at least
this is consistent.
@
text
@d1 1
a1 1
.\"	$OpenBSD: sliplogin.8,v 1.5 2000/03/19 17:57:15 aaron Exp $
d35 1
a35 1
.\"	$Id: sliplogin.8,v 1.5 2000/03/19 17:57:15 aaron Exp $
d167 6
a172 2
must be setuid to root and, while not a security hole, moral defectives
can use it to place terminal lines in an unusable state and/or deny
a173 9
To prevent this a site can create a group, say
.Em slip ,
that only the slip login accounts are put in then make sure that
.Pa /usr/sbin/sliplogin
is in group
.Em slip
and mode 4550 (setuid root, only group
.Em slip
can execute binary).
@


1.5
log
@Remove hard sentence breaks. Add $OpenBSD$ tags where appropriate. Some other
cleanup along the way.
@
text
@d1 1
a1 1
.\"	$OpenBSD: sliplogin.8,v 1.4 2000/03/04 22:19:30 aaron Exp $
d35 1
a35 1
.\"	$Id: sliplogin.8,v 1.4 2000/03/04 22:19:30 aaron Exp $
d132 1
a132 1
.Sh EXAMPLE
@


1.4
log
@In Unix land we prefer "whitespace" to "white space" or "white-space". At
least, this is the impression I get from looking at a lot of Perl docs.
@
text
@d1 2
a2 1
.\"	$OpenBSD: sliplogin.8,v 1.3 1999/04/02 15:12:21 aaron Exp $
d35 1
a35 1
.\"	$Id: sliplogin.8,v 1.3 1999/04/02 15:12:21 aaron Exp $
d51 2
a52 2
link to a remote host.  To do this, the program
searches the file
d60 2
a61 2
line
discipline.  Then a shell script is invoked to initialize the slip
d75 2
a76 1
The unit number of the slip interface assigned to this line.  E.g.,
d89 2
a90 2
Only the super-user may attach a network interface.  The interface is
automatically detached when the other end hangs up or the
d92 2
a93 1
process dies.  If the kernel slip
d95 2
a96 1
also disappear at the same time.  If there is other processing a site
d101 2
a102 1
is executed if it exists.  It is given the same arguments as the login script.
d108 1
a108 1
.Pa  slip.login
d127 2
a128 2
is the appropriate IP netmask.  These arguments are passed
directly to
d139 2
a140 1
as the shell for that entry.  E.g.,
d169 2
a170 2
access to legitimate users of a remote slip line.  To prevent this,
a site can create a group, say
@


1.3
log
@all .Nm macros should have an argument in SYNOPSIS; also misc cleanup
@
text
@d1 1
a1 1
.\"	$OpenBSD: sliplogin.8,v 1.2 1999/03/11 21:08:02 aaron Exp $
d34 1
a34 1
.\"	$Id: sliplogin.8,v 1.2 1999/03/11 21:08:02 aaron Exp $
d105 1
a105 1
Arguments are separated by white space and follow normal
@


1.2
log
@cleanup
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d34 1
a34 1
.\"	$Id: sliplogin.8,v 1.1.1.1 1995/10/18 08:48:21 deraadt Exp $
d43 1
a43 1
.Nm
@


1.1
log
@Initial revision
@
text
@d1 1
d34 1
a34 1
.\"	$Id: sliplogin.8,v 1.3 1993/12/10 14:18:04 cgd Exp $
d43 1
a43 1
.Nm sliplogin
d46 1
a46 1
.Nm Sliplogin
d57 1
a57 1
for slip (8-bit transparent i/o) and converted to
d89 1
a89 1
.Nm sliplogin
d129 1
a129 1
.Nm sliplogin
d133 1
a133 1
.Nm sliplogin
d160 1
a160 1
.Nm sliplogin
d174 1
a174 1
.Nm Sliplogin
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
