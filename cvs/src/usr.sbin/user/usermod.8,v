head	1.35;
access;
symbols
	OPENBSD_6_2:1.35.0.2
	OPENBSD_6_2_BASE:1.35
	OPENBSD_6_1:1.35.0.4
	OPENBSD_6_1_BASE:1.35
	OPENBSD_6_0:1.32.0.4
	OPENBSD_6_0_BASE:1.32
	OPENBSD_5_9:1.32.0.2
	OPENBSD_5_9_BASE:1.32
	OPENBSD_5_8:1.31.0.4
	OPENBSD_5_8_BASE:1.31
	OPENBSD_5_7:1.30.0.4
	OPENBSD_5_7_BASE:1.30
	OPENBSD_5_6:1.30.0.8
	OPENBSD_5_6_BASE:1.30
	OPENBSD_5_5:1.30.0.6
	OPENBSD_5_5_BASE:1.30
	OPENBSD_5_4:1.30.0.2
	OPENBSD_5_4_BASE:1.30
	OPENBSD_5_3:1.29.0.2
	OPENBSD_5_3_BASE:1.29
	OPENBSD_5_2:1.28.0.4
	OPENBSD_5_2_BASE:1.28
	OPENBSD_5_1_BASE:1.28
	OPENBSD_5_1:1.28.0.2
	OPENBSD_5_0:1.26.0.2
	OPENBSD_5_0_BASE:1.26
	OPENBSD_4_9:1.24.0.2
	OPENBSD_4_9_BASE:1.24
	OPENBSD_4_8:1.23.0.8
	OPENBSD_4_8_BASE:1.23
	OPENBSD_4_7:1.23.0.4
	OPENBSD_4_7_BASE:1.23
	OPENBSD_4_6:1.23.0.6
	OPENBSD_4_6_BASE:1.23
	OPENBSD_4_5:1.23.0.2
	OPENBSD_4_5_BASE:1.23
	OPENBSD_4_4:1.21.0.6
	OPENBSD_4_4_BASE:1.21
	OPENBSD_4_3:1.21.0.4
	OPENBSD_4_3_BASE:1.21
	OPENBSD_4_2:1.21.0.2
	OPENBSD_4_2_BASE:1.21
	OPENBSD_4_1:1.20.0.2
	OPENBSD_4_1_BASE:1.20
	OPENBSD_4_0:1.19.0.10
	OPENBSD_4_0_BASE:1.19
	OPENBSD_3_9:1.19.0.8
	OPENBSD_3_9_BASE:1.19
	OPENBSD_3_8:1.19.0.6
	OPENBSD_3_8_BASE:1.19
	OPENBSD_3_7:1.19.0.4
	OPENBSD_3_7_BASE:1.19
	OPENBSD_3_6:1.19.0.2
	OPENBSD_3_6_BASE:1.19
	OPENBSD_3_5:1.16.0.4
	OPENBSD_3_5_BASE:1.16
	OPENBSD_3_4:1.16.0.2
	OPENBSD_3_4_BASE:1.16
	OPENBSD_3_3:1.13.0.2
	OPENBSD_3_3_BASE:1.13
	OPENBSD_3_2:1.12.0.2
	OPENBSD_3_2_BASE:1.12
	OPENBSD_3_1:1.11.0.4
	OPENBSD_3_1_BASE:1.11
	OPENBSD_3_0:1.11.0.2
	OPENBSD_3_0_BASE:1.11
	OPENBSD_2_9_BASE:1.8
	OPENBSD_2_9:1.8.0.2
	OPENBSD_2_8:1.7.0.4
	OPENBSD_2_8_BASE:1.7
	OPENBSD_2_7:1.7.0.2
	OPENBSD_2_7_BASE:1.7
	NetBSD-20000425:1.1.1.1
	NetBSD:1.1.1;
locks; strict;
comment	@.\" @;


1.35
date	2016.11.30.20.26.37;	author jmc;	state Exp;
branches;
next	1.34;
commitid	BQwO8k3ebnN3ZEsX;

1.34
date	2016.11.29.03.59.31;	author jsg;	state Exp;
branches;
next	1.33;
commitid	ySmBMsd4swrnMjIC;

1.33
date	2016.08.16.11.33.07;	author tb;	state Exp;
branches;
next	1.32;
commitid	x3SJIQFUvKdyeEFj;

1.32
date	2015.09.12.15.14.11;	author schwarze;	state Exp;
branches;
next	1.31;
commitid	IHHxqUe6OfsrBBZ5;

1.31
date	2015.03.13.19.58.41;	author jmc;	state Exp;
branches;
next	1.30;
commitid	OcwhWBKGs3Yn7EeA;

1.30
date	2013.07.16.11.13.34;	author schwarze;	state Exp;
branches;
next	1.29;

1.29
date	2012.09.18.07.56.11;	author ajacoutot;	state Exp;
branches;
next	1.28;

1.28
date	2012.01.28.14.25.45;	author ajacoutot;	state Exp;
branches;
next	1.27;

1.27
date	2011.12.04.08.28.35;	author ajacoutot;	state Exp;
branches;
next	1.26;

1.26
date	2011.07.18.23.01.10;	author schwarze;	state Exp;
branches;
next	1.25;

1.25
date	2011.04.08.18.13.54;	author jmc;	state Exp;
branches;
next	1.24;

1.24
date	2010.09.03.11.22.36;	author jmc;	state Exp;
branches;
next	1.23;

1.23
date	2009.01.21.16.56.03;	author sobrado;	state Exp;
branches;
next	1.22;

1.22
date	2009.01.19.09.46.59;	author sobrado;	state Exp;
branches;
next	1.21;

1.21
date	2007.05.31.19.20.30;	author jmc;	state Exp;
branches;
next	1.20;

1.20
date	2007.02.06.17.44.51;	author jmc;	state Exp;
branches;
next	1.19;

1.19
date	2004.06.26.09.40.52;	author jmc;	state Exp;
branches;
next	1.18;

1.18
date	2004.06.14.17.11.46;	author millert;	state Exp;
branches;
next	1.17;

1.17
date	2004.06.04.18.04.21;	author otto;	state Exp;
branches;
next	1.16;

1.16
date	2003.09.04.08.32.15;	author jmc;	state Exp;
branches;
next	1.15;

1.15
date	2003.06.15.06.40.15;	author jmc;	state Exp;
branches;
next	1.14;

1.14
date	2003.06.08.23.32.23;	author millert;	state Exp;
branches;
next	1.13;

1.13
date	2003.02.14.23.20.36;	author jmc;	state Exp;
branches;
next	1.12;

1.12
date	2002.06.14.21.35.01;	author todd;	state Exp;
branches;
next	1.11;

1.11
date	2001.09.18.01.50.44;	author millert;	state Exp;
branches;
next	1.10;

1.10
date	2001.08.02.18.37.35;	author mpech;	state Exp;
branches;
next	1.9;

1.9
date	2001.07.20.19.09.49;	author mpech;	state Exp;
branches;
next	1.8;

1.8
date	2001.04.20.21.39.50;	author jakob;	state Exp;
branches;
next	1.7;

1.7
date	2000.05.05.23.22.39;	author ho;	state Exp;
branches;
next	1.6;

1.6
date	2000.04.25.20.58.30;	author jakob;	state Exp;
branches;
next	1.5;

1.5
date	2000.04.25.20.22.36;	author jakob;	state Exp;
branches;
next	1.4;

1.4
date	2000.04.25.20.11.06;	author jakob;	state Exp;
branches;
next	1.3;

1.3
date	2000.04.25.19.00.22;	author jakob;	state Exp;
branches;
next	1.2;

1.2
date	2000.04.24.22.31.29;	author jakob;	state Exp;
branches;
next	1.1;

1.1
date	2000.04.24.22.27.00;	author jakob;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.04.24.22.27.00;	author jakob;	state Exp;
branches;
next	;


desc
@@


1.35
log
@note that no group is created if a group already exists when using =uid;
while here, clean the text up a bit;

from mestre and myself
@
text
@.\" $OpenBSD: usermod.8,v 1.34 2016/11/29 03:59:31 jsg Exp $
.\" $NetBSD: usermod.8,v 1.17 2003/02/14 16:11:37 grant Exp $
.\"
.\" Copyright (c) 1999 Alistair G. Crooks.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. The name of the author may not be used to endorse or promote
.\"    products derived from this software without specific prior written
.\"    permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS
.\" OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
.\" WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY
.\" DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
.\" GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
.\" INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
.\" WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
.\" NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
.\" SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.\"
.Dd $Mdocdate: November 29 2016 $
.Dt USERMOD 8
.Os
.Sh NAME
.Nm usermod
.Nd modify user login information
.Sh SYNOPSIS
.Nm usermod
.Op Fl moUvZ
.Op Fl c Ar comment
.Op Fl d Ar home-directory
.Op Fl e Ar expiry-time
.Op Fl f Ar inactive-time
.Op Fl G Ar secondary-group Ns Op , Ns Ar group , Ns ...
.Op Fl g Ar gid | name | Cm =uid
.Op Fl L Ar login-class
.Op Fl l Ar new-login
.Op Fl p Ar password
.Op Fl S Ar secondary-group Ns Op , Ns Ar group , Ns ...
.Op Fl s Ar shell
.Op Fl u Ar uid
.Ar user
.Sh DESCRIPTION
The
.Nm
utility modifies user login information on the system.
.Pp
Default values are taken from the information provided in the
.Pa /etc/usermgmt.conf
file, which, if running as root, is created using the built-in defaults if
it does not exist.
.Pp
After setting any defaults, and then reading values from
.Pa /etc/usermgmt.conf ,
the following command line options are processed:
.Bl -tag -width Ds
.It Fl c Ar comment
Sets the comment field (also, for historical reasons known as the
GECOS field) which will be added for the user, and typically will include
the user's full name and, perhaps, contact information for the user.
.It Fl d Ar home-directory
Sets the home directory to
.Ar home-directory
without populating it; if the
.Fl m
option is specified, tries to move the old home directory to
.Ar home-directory .
.It Fl e Ar expiry-time
Sets the time at which the account expires.
It should be entered in the form
.Dq month day year ,
where month is the month name (the first three characters are
sufficient), day is the day of the month, and year is the year.
Time in seconds since the Epoch (UTC) is also valid.
A value of 0 can be used to disable this feature.
This value can be preset for new users using the
.Ar expire
field in the
.Pa /etc/usermgmt.conf
file.
See
.Xr usermgmt.conf 5
for more details.
.It Fl f Ar inactive-time
Sets the time at which the password expires.
See the
.Fl e
option.
.It Fl G Ar secondary-group Ns Op , Ns Ar group , Ns ...
Appends the user to the given groups in the
.Pa /etc/group
file.
.Fl G
and
.Fl S
are mutually exclusive.
.It Fl g Ar gid | name | Cm =uid
Gives the group name or identifier to be used for the user's primary group.
If this is the special string
.Cm =uid ,
.Nm
creates a group with the same ID as the UID;
if such a group already exists a warning is given
and no group is created.
Groups can be preset for all users by using the
.Ar group
field in the
.Pa /etc/usermgmt.conf
file.
See
.Xr usermgmt.conf 5
for more details.
.It Fl L Ar login-class
This option sets the login class for the user being created.
See
.Xr login.conf 5
for more information on user login classes.
This value can be preset for all users by using the
.Ar class
field in the
.Pa /etc/usermgmt.conf
file.
See
.Xr usermgmt.conf 5
for more details.
.It Fl l Ar new-login
Gives the new user name.
It must consist of alphanumeric characters, or the characters
.Ql \&. ,
.Ql \&-
or
.Ql \&_ .
.It Fl m
Moves the home directory from its old position to the new one.
If
.Fl d
is not specified, the
.Ar new-user
argument of the
.Fl l
option is used; one of
.Fl d
and
.Fl l
is needed.
.It Fl o
Allows duplicate UIDs to be given.
.It Fl p Ar password
Specifies a password encrypted with
.Xr encrypt 1
for the user.
This password can then be changed by using the
.Xr chpass 1
utility.
This value can be preset for all users
by using the
.Ar password
field in the
.Pa /etc/usermgmt.conf
file.
See
.Xr usermgmt.conf 5
for more details.
.It Fl S Ar secondary-group Ns Op , Ns Ar group , Ns ...
Sets the secondary groups the user will be a member of in the
.Pa /etc/group
file.
Setting
.Ar secondary-group
to an empty value (e.g. '') removes the user
from all secondary groups.
.Fl S
and
.Fl G
are mutually exclusive.
.It Fl s Ar shell
Specifies the login shell for the user.
This value can be preset for all users
by using the
.Ar shell
field in the
.Pa /etc/usermgmt.conf
file.
See
.Xr usermgmt.conf 5
for more details.
.It Fl U
Unlock the account by removing the trailing
.Ql \&-
from the user's shell and the
.Ql \&*
prefix from the password.
.Fl U
and
.Fl Z
are mutually exclusive and cannot be used with
.Fl p .
.It Fl u Ar uid
Specifies a new UID for the user.
Boundaries for this value can be preset for all users
by using the
.Ar range
field in the
.Pa /etc/usermgmt.conf
file.
See
.Xr usermgmt.conf 5
for more details.
.It Fl v
Enables verbose mode - explain the commands as they are executed.
.It Fl Z
Lock the account by appending a
.Ql \&-
to the user's shell and prefixing the password with
.Ql \&* .
.Fl Z
and
.Fl U
are mutually exclusive and cannot be used with
.Fl p .
.El
.Pp
Once the information has been verified,
.Nm
uses
.Xr pwd_mkdb 8
to update the user database.
This is run in the background and,
at very large sites, could take several minutes.
Until this update is completed, the password file is unavailable for other
updates and the new information is not available to programs.
.Sh FILES
.Bl -tag -width /etc/usermgmt.conf -compact
.It Pa /etc/usermgmt.conf
.El
.Sh EXIT STATUS
.Ex -std usermod
.Sh SEE ALSO
.Xr chpass 1 ,
.Xr group 5 ,
.Xr passwd 5 ,
.Xr usermgmt.conf 5 ,
.Xr pwd_mkdb 8
.Sh STANDARDS
Other implementations of the
.Nm usermod
utility use the
.Ar inactive-time
parameter to refer to the maximum number of days allowed between logins (this
is used to lock "stale" accounts that have not been used for a period of time).
However, on
.Ox
systems this parameter refers instead to the password change time.
This is due to differences in the
.Xr passwd 5
database compared to other operating systems.
.Sh HISTORY
The
.Nm
utility first appeared in
.Ox 2.7 .
.Sh AUTHORS
The
.Nm
utility was written by
.An Alistair G. Crooks Aq Mt agc@@NetBSD.org .
@


1.34
log
@Alistair Crooks rescinded the advertising clause of his user(8)
license in 2005 in NetBSD.

https://mail-index.netbsd.org/source-changes/2005/11/25/0002.html
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.33 2016/08/16 11:33:07 tb Exp $
d31 1
a31 1
.Dd $Mdocdate: August 16 2016 $
d107 1
a107 3
.It Xo
.Fl g Ar gid | name | Cm =uid
.Xc
d111 6
a116 7
then a UID and GID will be picked which are both unique
and the same, and a line added to
.Pa /etc/group
to describe the new group.
This value can be preset for all users
by using the
.Ar gid
d133 1
@


1.33
log
@Xr encrypt(1) here as well to be consistent with useradd(8).

ok jmc
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.32 2015/09/12 15:14:11 schwarze Exp $
d14 1
a14 4
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by Alistair G. Crooks.
.\" 4. The name of the author may not be used to endorse or promote
d31 1
a31 1
.Dd $Mdocdate: September 12 2015 $
@


1.32
log
@use .Cm for fixed string arguments
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.31 2015/03/13 19:58:41 jmc Exp $
d34 1
a34 1
.Dd $Mdocdate: March 13 2015 $
d164 3
a166 1
Specifies an already-encrypted password for the user.
@


1.31
log
@remove the first comma from constructs like ", and," and ", or,": you can use
"and" and "or" to join sentence clauses, and you can use commas, but both hinders
reading;
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.30 2013/07/16 11:13:34 schwarze Exp $
d34 1
a34 1
.Dd $Mdocdate: July 16 2013 $
a41 1
.Bk -words
d48 1
a48 1
.Op Fl g Ar gid | name | Li =uid
a55 1
.Ek
d111 1
a111 1
.Fl g Ar gid | name | Li =uid
d114 2
a115 2
If this is
.Ql =uid ,
@


1.30
log
@use .Mt for email addresses; from Jan Stary <hans at stare dot cz>; ok jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.29 2012/09/18 07:56:11 ajacoutot Exp $
d34 1
a34 1
.Dd $Mdocdate: September 18 2012 $
d75 1
a75 1
the user's full name, and, perhaps, contact information for the user.
d243 2
a244 2
This is run in the background, and,
at very large sites could take several minutes.
@


1.29
log
@Add 2 new knobs to usermod(8):
-U to unlock an account
-Z to lock an account

Locking means adding a '*' prefix to the encrypted password and appending
a '-' to the user's shell... and obviously the opposite for unlocking.

some inputs from sthen@@, otto@@ and deraadt@@
ok todd@@
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.28 2012/01/28 14:25:45 ajacoutot Exp $
d34 1
a34 1
.Dd $Mdocdate: January 28 2012 $
d281 1
a281 1
.An Alistair G. Crooks Aq agc@@NetBSD.org .
@


1.28
log
@Make it possible to remove a user from all secondary groups by using:
usermod -S '' username
Original patch from jca at wxcvbn dot org.
Added a comment to the man page.

man tweaks and ok jmc@@
ok miod@@
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.27 2011/12/04 08:28:35 ajacoutot Exp $
d34 1
a34 1
.Dd $Mdocdate: December 4 2011 $
d43 1
a43 1
.Op Fl mov
d202 11
d226 10
@


1.27
log
@Add a new '-S' option to _set_ the user's secondary group(s) (which also
permits to remove a user from a group).
It uses the same syntax as `-G'.

In practice this works like `-G' on Linux; it was decided not to modify
our `-G' option because people rely on the existing behavior (which
works like `-aG' on Linux, i.e. append to group).

Reworked from scratch from a submission by Frank Brodbeck.

man page bits reviewed by jmc@@
ok miod@@
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.26 2011/07/18 23:01:10 schwarze Exp $
d34 1
a34 1
.Dd $Mdocdate: July 18 2011 $
d183 4
@


1.26
log
@Sync user(8) SYNOPSIS to useradd(8) and userinfo(8)
as suggested by Glen Anderson <g dot s dot anderson at gmail dot com>;
while here, add a few missing "[,group,...]",
do not lump punctuation into .Ar, and drop useless .Li from "..".
OK jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.25 2011/04/08 18:13:54 jmc Exp $
d34 1
a34 1
.Dd $Mdocdate: April 8 2011 $
d53 1
d105 1
a105 1
Sets the secondary groups the user will be a member of in the
d108 4
d179 8
@


1.25
log
@- avoid nasty line wrap in SYNOPSIS
- put -G in the right place
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.24 2010/09/03 11:22:36 jmc Exp $
d34 1
a34 1
.Dd $Mdocdate: September 3 2010 $
d48 1
a48 1
.Op Fl G Ar secondary-group[,group,...]
d103 1
a103 1
.It Fl G Ar secondary-group[,group,...]
@


1.24
log
@add an EXIT STATUS section for /usr/sbin;
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.23 2009/01/21 16:56:03 sobrado Exp $
d34 1
a34 1
.Dd $Mdocdate: January 21 2009 $
a43 1
.Op Fl G Ar secondary-group[,group,...]
d48 2
a49 3
.Oo
.Fl g Ar gid | name | Li =uid
.Oc
@


1.23
log
@paragraphs and sentences start with uppercase letters; synchronize
the synopsis and usage of user(8) related commands; sort the options
list in the DESCRIPTION section of the manual pages; spacing.

ok jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.22 2009/01/19 09:46:59 sobrado Exp $
d34 1
a34 1
.Dd $Mdocdate: January 19 2009 $
a210 2
.Pp
.Ex -std usermod
d215 2
@


1.22
log
@replace standardized text concerning the exit values of applications
with the right mdoc macros.
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.21 2007/05/31 19:20:30 jmc Exp $
d34 1
a34 1
.Dd $Mdocdate: May 31 2007 $
d46 1
a46 1
.Op Fl d Ar home-dir
a72 4
.It Fl G Ar secondary-group[,group,...]
are the secondary groups the user will be a member of in the
.Pa /etc/group
file.
d74 1
a74 1
is the comment field (also, for historical reasons known as the
d78 1
a78 1
sets the home directory to
d85 1
a85 1
sets the time at which the account expires.
d101 1
a101 1
sets the time at which the password expires.
d105 4
d112 1
a112 1
gives the group name or identifier to be used for the user's primary group.
d129 1
a129 1
this option sets the login class for the user being created.
d140 2
a141 2
.It Fl l Ar new-user
gives the new user name.
d148 1
a148 1
moves the home directory from its old position to the new one.
d161 1
a161 1
allows duplicate UIDs to be given.
d163 1
a163 1
specifies an already-encrypted password for the user.
d177 1
a177 1
specifies the login shell for the user.
d188 1
a188 1
specifies a new UID for the user.
d199 1
a199 1
enables verbose mode - explain the commands as they are executed.
@


1.21
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.20 2007/02/06 17:44:51 jmc Exp $
d34 1
a34 1
.Dd $Mdocdate$
d212 1
a212 3
The
.Nm
utility exits 0 on success, and \*(Gt0 if an error occurs.
@


1.20
log
@discuss consistently "the Epoch";
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.19 2004/06/26 09:40:52 jmc Exp $
d34 1
a34 1
.Dd September 5, 2001
@


1.19
log
@should have updated all of these first - the same wordo in them all.
also, section order for usermgmt.conf.5 was wrong.
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.18 2004/06/14 17:11:46 millert Exp $
d94 1
a94 1
Time in seconds since the epoch (UTC) is also valid.
@


1.18
log
@Document where we diverge from other implementations (due to different
fields in passwd(5)).  OK otto@@ a while ago.
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.17 2004/06/04 18:04:21 otto Exp $
d231 1
a231 1
us used to lock "stale" accounts that have not been used for a period of time).
@


1.17
log
@Clear up some confusion: -e is account expiry flag, -f is password
expiry flag. Resolves PR 3792, though not by changing code, but by
changing docs, comments and an error message or two.
ok jmc@@ millert@@
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.16 2003/09/04 08:32:15 jmc Exp $
d225 13
@


1.16
log
@clarify that user's full name (not username) generally goes in GECOS;
from Jeff Ross.
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.15 2003/06/15 06:40:15 jmc Exp $
d89 1
a89 2
sets the time at which the current password expires.
This can be used to implement password aging.
d96 1
a96 1
This value can be preset for all users using the
d105 1
a105 1
sets the time at which the account expires.
@


1.15
log
@small mdoc fixes;
ok millert@@
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.14 2003/06/08 23:32:23 millert Exp $
d80 1
a80 1
the username, and, perhaps, contact information for the user.
@


1.14
log
@Sync man pages w/ NetBSD version
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.13 2003/02/14 23:20:36 jmc Exp $
d95 2
a96 2
Time in seconds since the epoch (UTC) is also valid.  A value of
0 can be used to disable this feature.
d116 1
a116 1
then a uid and gid will be picked which are both unique
d130 2
a131 1
this option sets the login class for the user being created.  See
d133 2
a134 2
for more information on user login classes. This value can be preset
for all users by using the
d162 1
a162 1
allows duplicate uids to be given.
d189 1
a189 1
specifies a new uid for the user.
d207 5
a211 4
to update the user database.  This is run in the background, and,
at very large sites could take several minutes.  Until this update
is completed, the password file is unavailable for other updates
and the new information is not available to programs.
d235 1
a235 2
.An Alistair G. Crooks
.Aq agc@@NetBSD.org .
@


1.13
log
@typos;

tftpd(8): tweak and ok millert@@
tokenadm(8): tweak and ok millert@@
@
text
@d1 2
a2 2
.\" $OpenBSD: usermod.8,v 1.12 2002/06/14 21:35:01 todd Exp $
.\" $NetBSD: usermod.8,v 1.10 2001/02/21 12:16:07 agc Exp $
d48 1
a48 1
.Op Fl f Ar password-change-secs
d63 2
a64 2
Default values for the user are taken from the information
provided in the
d66 2
a67 1
file.
d69 3
a71 2
After setting any defaults, and then values from that file,
the command line options are processed:
d89 9
a97 3
provides the date at which the account expires. This should be given
in a standard time format (%c). This is unset by default.
This value can be preset for all users by using the
d99 3
a101 9
field in /etc/usermgmt.conf file - it has the format:
.D1 Ic expire Ar expiry-time
.It Fl f Ar password-change-secs 
provides the number of seconds since the epoch (UTC) at
which the current password must be changed. This
can be used to implement password aging.
A value of
0 can be used to switch off this feature.
The default value for this field is 0.
d103 1
a103 1
.Xr passwd 5
d105 5
a109 7
This value can be preset for all users
by using the
.Ar inactive 
field in the
.Pa /etc/usermgmt.conf
file - it has the format:
.D1 Ic inactive Ar password-change-secs
d113 1
a113 1
gives the group name or identifier to be used for the new user's primary group.
d125 4
a128 6
file - it has the format:
.br \" XXX Shouldn't be necessary -- mdoc bug? --bjh21
.Bd -ragged -offset indent -compact
.Ic group
.Ar gid | name | Li =uid
.Ed
d137 3
a139 6
file - it has the format:
.br \" XXX skip empty line? - HF
.Bd -ragged -offset indent -compact
.Ic class
.Ar login-class
.Ed
d163 1
a163 1
specifies an already-encrypted password for the new user.
d172 4
a175 2
file - it has the format:
.D1 Ic password Ar encrypted-password
d177 1
a177 1
specifies the login shell for the new user.
d183 4
a186 2
file - it has the format:
.D1 Ic shell Ar login-shell
d194 4
a197 6
file - they have the format:
.br \" XXX
.Bd -ragged -offset indent -compact
.Ic range
.Ar starting-uid Ns Li .. Ns Ar ending_uid
.Ed
d213 1
a213 1
utility exits 0 on success, and >0 if an error occurs.
d222 1
d232 3
a234 1
utility was written by Alistair G. Crooks (agc@@netbsd.org).
@


1.12
log
@spelling; from Brian Poole <raj@@cerias.purdue.edu>
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.11 2001/09/18 01:50:44 millert Exp $
d42 1
d58 1
d80 1
a80 1
Sets the home directory to
d132 1
a132 1
This option sets the login class for the user being created.  See
d223 1
a224 1
.Xr group 5 ,
@


1.11
log
@Sync with NetBSD plus the following changes:
o use LINE_MAX for the max password entry length.  This is also what
  pwd_mkdb does.
o add more checks for lines that are too long
o kill some useless (and incorrect) casts
o check snprintf() return vals for sanity before use
o sync usage() with man pages
o slight KNF
o eliminate some silly uses of snprintf
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.10 2001/08/02 18:37:35 mpech Exp $
d132 1
a132 1
for more information on user login classes. Thie value can be preset
@


1.10
log
@o) .Sh AUTHOR -> .Sh AUTHORS;
o) .Sh EXAMPLE -> .Sh EXAMPLES;
o) Delete .Sh OPTIONS. Text moved to .Sh DESCRIPTION;

millert@@ ok
@
text
@d1 2
a2 3
.\" $OpenBSD: usermod.8,v 1.9 2001/07/20 19:09:49 mpech Exp $ */
.\" $NetBSD: usermod.8,v 1.4 2000/02/28 05:10:57 enami Exp $ */
.\"
d34 1
a34 1
.Dd April 3, 2001 
d42 1
d48 4
a51 1
.Op Fl g Ar gid/name/=uid
a52 2
.Op Fl m
.Op Fl o
a55 1
.Op Fl v
d72 1
a72 1
file. This list of groups will replace any old group memberships.
d78 6
a83 2
is the home directory which will be created and populated for the user,
should the -m option be specified.
d90 1
a90 1
.Ar expire <expiry-time> .
d93 1
a93 1
which the current password change expire. This
d107 4
a110 2
.Ar inactive <password-change-secs> .
.It Fl g Ar gid/name/=uid
d113 1
a113 1
.Ar "-g=uid" ,
d122 1
a122 1
.Xr /usr/share/adduser/defaults
d124 19
a142 1
.Ar group <groupname/groupid/=uid> .
d145 5
a149 1
It must consist of alphanumeric characters, or the characters '.', '-' or '_'.
d152 11
d176 1
a176 1
.Ar password <encrypted-password> .
d183 1
a183 1
.Xr /usr/share/adduser/defaults
d185 1
a185 1
.Ar shell <login-shell> .
d194 5
a198 1
.Ar range <starting-uid>..<ending_uid> .
d203 9
a217 1
.It Pa /etc/skel/.[A-z]*
d222 2
a223 1
.Xr group 5
@


1.9
log
@we don't like:
o) .Pp before/after .Sh;
o) .Pp before/after .Sh;
o) .Nm without argument in SYNOPSIS;
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.8 2001/04/20 21:39:50 jakob Exp $ */
d177 1
a177 1
.Sh AUTHOR
@


1.8
log
@update description of the -f option and reword the text about expire.
submitted by Brian Poole <raj@@cerias.purdue.edu>. ok deraadt@@.
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.7 2000/05/05 23:22:39 ho Exp $ */
d42 1
a42 1
.Nm
@


1.7
log
@Make -G flag work for user{add,mod}.
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.6 2000/04/25 20:58:30 jakob Exp $ */
d35 1
a35 1
.Dd November 30, 1999
d47 1
a47 1
.Op Fl f Ar inactive-secs
d80 8
a87 1
.It Fl e Ar secs-to-expiry
d99 1
a99 1
.Ar expire
d103 1
a103 1
.Ar expire <secs-to-expiry> .
@


1.6
log
@references to /usr/share/examples/usermgmt removed as we do not have that
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.5 2000/04/25 20:22:36 jakob Exp $ */
d43 1
a43 1
.Op Fl G Ar secondary-group
d69 2
a70 2
.It Fl G Ar secondary-group
is the secondary group to which the user will be added in the
d72 1
a72 1
file.
@


1.5
log
@s/.Os NetBSD/.Os/
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.4 2000/04/25 20:11:06 jakob Exp $ */
a159 1
.It Pa /usr/share/examples/usermgmt
@


1.4
log
@we are OpenBSD and HISTORY should say so
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.3 2000/04/25 19:00:22 jakob Exp $ */
d37 1
a37 1
.Os NetBSD
@


1.3
log
@remove some non-important HISTORY
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.2 2000/04/24 22:31:29 jakob Exp $ */
d170 1
a170 1
.Nx 1.5 .
@


1.2
log
@id-tags
@
text
@d1 1
a1 1
.\" $OpenBSD: usermod.8,v 1.4 2000/02/28 05:10:57 enami Exp $ */
a170 3
It is based on the
.Ar addnerd
package by the same author.
@


1.1
log
@Initial revision
@
text
@d1 1
@


1.1.1.1
log
@Initial import of user/group management tools from NetBSD.
@
text
@@
