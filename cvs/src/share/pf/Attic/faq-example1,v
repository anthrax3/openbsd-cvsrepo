head	1.6;
access;
symbols
	OPENBSD_4_2:1.5.0.4
	OPENBSD_4_2_BASE:1.5
	OPENBSD_4_1:1.5.0.2
	OPENBSD_4_1_BASE:1.5
	OPENBSD_4_0:1.4.0.2
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.3.0.4
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.3.0.2
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.2.0.8
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.2.0.6
	OPENBSD_3_6_BASE:1.2
	OPENBSD_3_5:1.2.0.4
	OPENBSD_3_5_BASE:1.2
	OPENBSD_3_4:1.2.0.2
	OPENBSD_3_4_BASE:1.2;
locks; strict;
comment	@# @;


1.6
date	2008.01.31.22.43.34;	author henning;	state dead;
branches;
next	1.5;

1.5
date	2006.10.07.04.48.01;	author mcbride;	state Exp;
branches;
next	1.4;

1.4
date	2006.06.16.17.26.59;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2005.07.02.16.16.39;	author joel;	state Exp;
branches;
next	1.2;

1.2
date	2003.08.06.16.04.45;	author henning;	state Exp;
branches;
next	1.1;

1.1
date	2003.08.02.18.25.49;	author henning;	state Exp;
branches;
next	;


desc
@@


1.6
log
@remove obsolete /usr/share/pf, agreed by many
@
text
@# $OpenBSD: faq-example1,v 1.5 2006/10/07 04:48:01 mcbride Exp $

#
# Firewall for Home or Small Office
# http://www.openbsd.org/faq/pf/example1.html
#


# macros
ext_if="fxp0"
int_if="xl0"

tcp_services="{ 22, 113 }"
icmp_types="echoreq"

comp3="192.168.0.3"

# options
set block-policy return
set loginterface $ext_if

set skip on lo

# scrub
scrub in

# nat/rdr
nat on $ext_if from !($ext_if) -> ($ext_if:0)
nat-anchor "ftp-proxy/*"
rdr-anchor "ftp-proxy/*"

rdr pass on $int_if proto tcp to port ftp -> 127.0.0.1 port 8021
rdr on $ext_if proto tcp from any to any port 80 -> $comp3

# filter rules
block in

pass out

anchor "ftp-proxy/*"
antispoof quick for { lo $int_if }

pass in on $ext_if inet proto tcp from any to ($ext_if) port $tcp_services

pass in on $ext_if inet proto tcp from any to $comp3 port 80 \
    synproxy state

pass in inet proto icmp all icmp-type $icmp_types

pass quick on $int_if no state
@


1.5
log
@remove 'flags S/SA' and 'keep state'

ok nick@@
@
text
@d1 1
a1 1
# $OpenBSD: faq-example1,v 1.4 2006/06/16 17:26:59 jasper Exp $
@


1.4
log
@sync with faq;
yayayaya henning@@
@
text
@d1 1
a1 1
# $OpenBSD: faq-example1,v 1.3 2005/07/02 16:16:39 joel Exp $
d38 1
a38 1
pass out keep state
d43 1
a43 2
pass in on $ext_if inet proto tcp from any to ($ext_if) \
   port $tcp_services flags S/SA keep state
d46 1
a46 1
    flags S/SA synproxy state
d48 1
a48 1
pass in inet proto icmp all icmp-type $icmp_types keep state
d50 1
a50 1
pass quick on $int_if
@


1.3
log
@Sync with the faq
@
text
@d1 1
a1 1
# $OpenBSD: faq-example1,v 1.2 2003/08/06 16:04:45 henning Exp $
d10 2
a11 2
int_if = "fxp0"
ext_if = "ep0"
d13 2
a14 2
tcp_services = "{ 22, 113 }"
icmp_types = "echoreq"
d16 1
a16 3
priv_nets = "{ 127.0.0.0/8, 192.168.0.0/16, 172.16.0.0/12, 10.0.0.0/8 }"

comp3 = "192.168.0.3"
d22 2
d25 1
a25 1
scrub in all
d28 5
a32 3
nat on $ext_if from $int_if:network to any -> ($ext_if)
rdr on $int_if proto tcp from any to any port 21 -> 127.0.0.1 \
   port 8021
d36 1
a36 1
block all
d38 1
a38 1
pass quick on lo0 all
d40 2
a41 2
block drop in  quick on $ext_if from $priv_nets to any
block drop out quick on $ext_if from any to $priv_nets
d46 2
a47 5
pass in on $ext_if proto tcp from any to $comp3 port 80 \
   flags S/SA synproxy state

pass in on $ext_if inet proto tcp from port 20 to ($ext_if) \
   user proxy flags S/SA keep state
d51 1
a51 5
pass in  on $int_if from $int_if:network to any keep state
pass out on $int_if from any to $int_if:network keep state

pass out on $ext_if proto tcp all modulate state flags S/SA
pass out on $ext_if proto { udp, icmp } all keep state
@


1.2
log
@include URLs to the FAQ where the examplkes appear; Joel Knight
@
text
@d1 1
a1 1
# $OpenBSD: faq-example1,v 1.1 2003/08/02 18:25:49 henning Exp $
d17 3
a19 1
        
d31 1
d43 6
@


1.1
log
@example rulesets from the pf FAQ; provided by Joel Knight
@
text
@d1 1
a1 1
# $OpenBSD$
d5 1
@

