head	1.12;
access;
symbols
	OPENBSD_6_1:1.12.0.2
	OPENBSD_6_1_BASE:1.12
	OPENBSD_6_0:1.10.0.10
	OPENBSD_6_0_BASE:1.10
	OPENBSD_5_9:1.10.0.6
	OPENBSD_5_9_BASE:1.10
	OPENBSD_5_8:1.10.0.8
	OPENBSD_5_8_BASE:1.10
	OPENBSD_5_7:1.10.0.2
	OPENBSD_5_7_BASE:1.10
	OPENBSD_5_6:1.10.0.4
	OPENBSD_5_6_BASE:1.10
	OPENBSD_5_5:1.9.0.12
	OPENBSD_5_5_BASE:1.9
	OPENBSD_5_4:1.9.0.8
	OPENBSD_5_4_BASE:1.9
	OPENBSD_5_3:1.9.0.6
	OPENBSD_5_3_BASE:1.9
	OPENBSD_5_2:1.9.0.4
	OPENBSD_5_2_BASE:1.9
	OPENBSD_5_1_BASE:1.9
	OPENBSD_5_1:1.9.0.2
	OPENBSD_5_0:1.7.0.4
	OPENBSD_5_0_BASE:1.7
	OPENBSD_4_9:1.7.0.2
	OPENBSD_4_9_BASE:1.7
	OPENBSD_4_8:1.6.0.44
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.6.0.40
	OPENBSD_4_7_BASE:1.6
	OPENBSD_4_6:1.6.0.42
	OPENBSD_4_6_BASE:1.6
	OPENBSD_4_5:1.6.0.38
	OPENBSD_4_5_BASE:1.6
	OPENBSD_4_4:1.6.0.36
	OPENBSD_4_4_BASE:1.6
	OPENBSD_4_3:1.6.0.34
	OPENBSD_4_3_BASE:1.6
	OPENBSD_4_2:1.6.0.32
	OPENBSD_4_2_BASE:1.6
	OPENBSD_4_1:1.6.0.30
	OPENBSD_4_1_BASE:1.6
	OPENBSD_4_0:1.6.0.28
	OPENBSD_4_0_BASE:1.6
	OPENBSD_3_9:1.6.0.26
	OPENBSD_3_9_BASE:1.6
	OPENBSD_3_8:1.6.0.24
	OPENBSD_3_8_BASE:1.6
	OPENBSD_3_7:1.6.0.22
	OPENBSD_3_7_BASE:1.6
	OPENBSD_3_6:1.6.0.20
	OPENBSD_3_6_BASE:1.6
	OPENBSD_3_5:1.6.0.18
	OPENBSD_3_5_BASE:1.6
	OPENBSD_3_4:1.6.0.16
	OPENBSD_3_4_BASE:1.6
	OPENBSD_3_3:1.6.0.14
	OPENBSD_3_3_BASE:1.6
	OPENBSD_3_2:1.6.0.12
	OPENBSD_3_2_BASE:1.6
	OPENBSD_3_1:1.6.0.10
	OPENBSD_3_1_BASE:1.6
	OPENBSD_3_0:1.6.0.8
	OPENBSD_3_0_BASE:1.6
	OPENBSD_2_9:1.6.0.6
	OPENBSD_2_9_BASE:1.6
	OPENBSD_2_8:1.6.0.4
	OPENBSD_2_8_BASE:1.6
	OPENBSD_2_7:1.6.0.2
	OPENBSD_2_7_BASE:1.6
	OPENBSD_2_6:1.4.0.2
	OPENBSD_2_6_BASE:1.4
	OPENBSD_2_5:1.3.0.8
	OPENBSD_2_5_BASE:1.3
	OPENBSD_2_4:1.3.0.6
	OPENBSD_2_4_BASE:1.3
	OPENBSD_2_3:1.3.0.4
	OPENBSD_2_3_BASE:1.3
	OPENBSD_2_2:1.3.0.2
	OPENBSD_2_2_BASE:1.3
	OPENBSD_2_1:1.2.0.4
	OPENBSD_2_1_BASE:1.2
	OPENBSD_2_0:1.2.0.2
	OPENBSD_2_0_BASE:1.2
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.12
date	2016.11.08.19.33.58;	author tb;	state Exp;
branches;
next	1.11;
commitid	Yoz1BvwjdFeCs7k8;

1.11
date	2016.09.25.20.44.18;	author tb;	state Exp;
branches;
next	1.10;
commitid	iXYyIulJS3cEoxHE;

1.10
date	2014.04.18.10.00.48;	author schwarze;	state Exp;
branches;
next	1.9;

1.9
date	2012.01.16.08.42.38;	author schwarze;	state Exp;
branches;
next	1.8;

1.8
date	2012.01.06.21.42.42;	author schwarze;	state Exp;
branches;
next	1.7;

1.7
date	2011.02.22.00.23.48;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2000.03.02.14.46.41;	author todd;	state Exp;
branches;
next	1.5;

1.5
date	2000.02.03.18.13.40;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	99.07.09.21.41.46;	author hugh;	state Exp;
branches;
next	1.3;

1.3
date	97.09.22.05.12.27;	author millert;	state Exp;
branches;
next	1.2;

1.2
date	95.12.14.05.41.23;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.44.22;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.44.22;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.12
log
@Set permissions of src.db and mandoc.db explicitly to 644 so
they don't depend on the umask during make build.

ok deraadt
@
text
@#	$OpenBSD: Makefile,v 1.11 2016/09/25 20:44:18 tb Exp $
#	from: @@(#)Makefile	5.9 (Berkeley) 7/1/91

SUBDIR=	man1 man3 man4 man5 man6 man7 man8 man9

afterinstall:
	${INSTALL} ${INSTALL_COPY} -o ${MANOWN} -g ${MANGRP} -m ${MANMODE} \
	    man0/COPYRIGHT ${DESTDIR}/usr/share/man/COPYRIGHT

makedb:
	/usr/sbin/makewhatis -Qv ${DESTDIR}/usr/share/man
	chown root:wheel ${DESTDIR}/usr/share/man/mandoc.db
	chmod 644 ${DESTDIR}/usr/share/man/mandoc.db

.include <bsd.subdir.mk>
@


1.11
log
@Install the copyright notice as ${MANOWN}:${MANGRP} with ${MANMODE} and
use ${INSTALL_COPY}; chown root:wheel mandoc.db for noperm builds.

ok natano
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.10 2014/04/18 10:00:48 schwarze Exp $
d13 1
@


1.10
log
@Switch to the new makewhatis(8)/apropos(1)/whatis(1) combo.
"commit the switch now" espie@@  "go for it" deraadt@@

See the apropos(1) manual for a description of what's new.
On machines where you want the full functionality,
run "sudo makewhatis" and put "MAKEWHATISARGS=' '" into weekly.local(8).
Otherwise, when upgrading via source, run "sudo makewhatis -Q".
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.9 2012/01/16 08:42:38 schwarze Exp $
d7 2
a8 2
	${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 444 man0/COPYRIGHT \
	    ${DESTDIR}/usr/share/man/COPYRIGHT
d12 1
@


1.9
log
@Backout activation of the new apropos(1)/whatis(1)/makewhatis(8).
In its current state, it causes too much slowdown, in particular
during system builds, and there are other regressions.
That cannot be fixed quickly while it's enabled.

Problems pointed out by espie@@, backout requested by deraadt@@,
diff "looks good" to espie@@.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 2012/01/06 21:42:42 schwarze Exp $
d11 1
a11 1
	/usr/libexec/makewhatis -v ${DESTDIR}/usr/share/man
@


1.8
log
@Let makewhatis(8) build the whatis.db quietly.
ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 2011/02/22 00:23:48 espie Exp $
d11 1
a11 1
	/usr/libexec/makewhatis ${DESTDIR}/usr/share/man
@


1.7
log
@run makewhatis -v
okay miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.6 2000/03/02 14:46:41 todd Exp $
d11 1
a11 1
	/usr/libexec/makewhatis -v ${DESTDIR}/usr/share/man
@


1.6
log
@$OpenBSD$
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.5 2000/02/03 18:13:40 espie Exp $
d11 1
a11 1
	/usr/libexec/makewhatis ${DESTDIR}/usr/share/man
@


1.5
log
@no longer used.
@
text
@d1 1
a2 1
#	$Id: Makefile,v 1.4 1999/07/09 21:41:46 hugh Exp $
@


1.4
log
@enable man6
@
text
@d2 1
a2 1
#	$Id: Makefile,v 1.3 1997/09/22 05:12:27 millert Exp $
a6 2
	${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 444 makewhatis.sed \
	    ${DESTDIR}/usr/share/man/makewhatis.sed
@


1.3
log
@install -> ${INSTALL}
@
text
@d2 1
a2 1
#	$Id: Makefile,v 1.2 1995/12/14 05:41:23 deraadt Exp $
d4 1
a4 1
SUBDIR=	man1 man3 man4 man5 man7 man8 man9
@


1.2
log
@update from netbsd
@
text
@d2 1
a2 1
#	$Id: Makefile,v 1.7 1995/11/25 21:26:28 perry Exp $
d7 1
a7 1
	install -c -o ${BINOWN} -g ${BINGRP} -m 444 makewhatis.sed \
d9 1
a9 1
	install -c -o ${BINOWN} -g ${BINGRP} -m 444 man0/COPYRIGHT \
@


1.1
log
@Initial revision
@
text
@d2 1
a2 1
#	$Id: Makefile,v 1.6 1994/02/09 08:00:16 cgd Exp $
d4 1
a4 1
SUBDIR=	man1 man3 man4 man5 man7 man8
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
