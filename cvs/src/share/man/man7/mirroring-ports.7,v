head	1.27;
access;
symbols
	OPENBSD_6_1:1.27.0.10
	OPENBSD_6_1_BASE:1.27
	OPENBSD_6_0:1.27.0.6
	OPENBSD_6_0_BASE:1.27
	OPENBSD_5_9:1.27.0.2
	OPENBSD_5_9_BASE:1.27
	OPENBSD_5_8:1.27.0.4
	OPENBSD_5_8_BASE:1.27
	OPENBSD_5_7:1.26.0.6
	OPENBSD_5_7_BASE:1.26
	OPENBSD_5_6:1.26.0.10
	OPENBSD_5_6_BASE:1.26
	OPENBSD_5_5:1.26.0.8
	OPENBSD_5_5_BASE:1.26
	OPENBSD_5_4:1.26.0.4
	OPENBSD_5_4_BASE:1.26
	OPENBSD_5_3:1.26.0.2
	OPENBSD_5_3_BASE:1.26
	OPENBSD_5_2:1.23.0.4
	OPENBSD_5_2_BASE:1.23
	OPENBSD_5_1_BASE:1.23
	OPENBSD_5_1:1.23.0.2
	OPENBSD_5_0:1.19.0.6
	OPENBSD_5_0_BASE:1.19
	OPENBSD_4_9:1.19.0.4
	OPENBSD_4_9_BASE:1.19
	OPENBSD_4_8:1.19.0.2
	OPENBSD_4_8_BASE:1.19
	OPENBSD_4_7:1.18.0.2
	OPENBSD_4_7_BASE:1.18
	OPENBSD_4_6:1.18.0.4
	OPENBSD_4_6_BASE:1.18
	OPENBSD_4_5:1.17.0.2
	OPENBSD_4_5_BASE:1.17
	OPENBSD_4_4:1.16.0.6
	OPENBSD_4_4_BASE:1.16
	OPENBSD_4_3:1.16.0.4
	OPENBSD_4_3_BASE:1.16
	OPENBSD_4_2:1.16.0.2
	OPENBSD_4_2_BASE:1.16
	OPENBSD_4_1:1.15.0.2
	OPENBSD_4_1_BASE:1.15
	OPENBSD_4_0:1.14.0.8
	OPENBSD_4_0_BASE:1.14
	OPENBSD_3_9:1.14.0.6
	OPENBSD_3_9_BASE:1.14
	OPENBSD_3_8:1.14.0.4
	OPENBSD_3_8_BASE:1.14
	OPENBSD_3_7:1.14.0.2
	OPENBSD_3_7_BASE:1.14
	OPENBSD_3_6:1.13.0.2
	OPENBSD_3_6_BASE:1.13
	OPENBSD_3_5:1.12.0.2
	OPENBSD_3_5_BASE:1.12
	OPENBSD_3_4:1.11.0.2
	OPENBSD_3_4_BASE:1.11
	OPENBSD_3_3:1.9.0.2
	OPENBSD_3_3_BASE:1.9
	OPENBSD_3_2:1.8.0.2
	OPENBSD_3_2_BASE:1.8
	OPENBSD_3_1:1.7.0.2
	OPENBSD_3_1_BASE:1.7
	OPENBSD_3_0:1.6.0.2
	OPENBSD_3_0_BASE:1.6
	OPENBSD_2_9:1.5.0.2
	OPENBSD_2_9_BASE:1.5
	OPENBSD_2_8:1.4.0.2
	OPENBSD_2_8_BASE:1.4
	OPENBSD_2_7:1.2.0.2
	OPENBSD_2_7_BASE:1.2;
locks; strict;
comment	@.\" @;


1.27
date	2015.03.13.19.58.41;	author jmc;	state Exp;
branches;
next	1.26;
commitid	OcwhWBKGs3Yn7EeA;

1.26
date	2013.01.10.22.52.28;	author rpe;	state Exp;
branches;
next	1.25;

1.25
date	2013.01.08.21.24.17;	author jmc;	state Exp;
branches;
next	1.24;

1.24
date	2013.01.08.19.44.13;	author rpe;	state Exp;
branches;
next	1.23;

1.23
date	2012.01.30.17.09.10;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2012.01.27.19.09.14;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2012.01.08.20.29.04;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2012.01.06.16.50.58;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2010.03.26.19.30.40;	author jmc;	state Exp;
branches;
next	1.18;

1.18
date	2009.06.12.17.27.20;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2009.02.19.21.44.24;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2007.05.31.19.19.58;	author jmc;	state Exp;
branches;
next	1.15;

1.15
date	2007.02.16.19.15.28;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2005.03.11.23.03.58;	author jmc;	state Exp;
branches;
next	1.13;

1.13
date	2004.04.27.12.00.03;	author jmc;	state Exp;
branches;
next	1.12;

1.12
date	2004.01.11.23.53.08;	author pvalchev;	state Exp;
branches;
next	1.11;

1.11
date	2003.07.31.10.53.50;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2003.06.06.13.44.30;	author jmc;	state Exp;
branches;
next	1.9;

1.9
date	2003.03.16.10.30.26;	author avsm;	state Exp;
branches;
next	1.8;

1.8
date	2002.08.29.07.34.31;	author wcobb;	state Exp;
branches;
next	1.7;

1.7
date	2001.11.13.13.54.26;	author mpech;	state Exp;
branches;
next	1.6;

1.6
date	2001.10.05.14.45.54;	author mpech;	state Exp;
branches;
next	1.5;

1.5
date	2001.03.01.16.11.22;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	2000.10.13.04.09.21;	author aaron;	state Exp;
branches;
next	1.3;

1.3
date	2000.05.17.12.46.38;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2000.04.19.11.11.50;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2000.04.19.01.39.58;	author espie;	state Exp;
branches;
next	;


desc
@@


1.27
log
@remove the first comma from constructs like ", and," and ", or,": you can use
"and" and "or" to join sentence clauses, and you can use commas, but both hinders
reading;
@
text
@.\" $OpenBSD: mirroring-ports.7,v 1.26 2013/01/10 22:52:28 rpe Exp $
.\"
.\" Copyright (c) 2000,2012 Marc Espie
.\"
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE DEVELOPERS ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE DEVELOPERS BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.Dd $Mdocdate: January 10 2013 $
.Dt MIRRORING-PORTS 7
.Os
.Sh NAME
.Nm mirroring-ports
.Nd how to build a mirror for ports distfiles
.Sh DESCRIPTION
The
.Nm OpenBSD Ports Collection
offers some powerful tools to mirror software sources.
.Pp
.Xr dpb 1
features a
.Fl F
option which is explicitly designed for mirroring distfiles.
.Pp
If run with
.Fl F Ar jobs ,
.Nm dpb
will
.Bl -bullet
.It
Limit itself to fetching distfiles, and not build any packages.
.It
Disregard any architecture or broken annotation, and try to fetch every
distfile.
.It
Fetch files to a temporary copy named
.Pa some_file.part
using
.Ic ftp -C
to resume interrupted downloads.
.It
Keep a global list of sha256 checksums as
.Pa ${DISTDIR}/distinfo ,
and use that to refetch files when the ports tree records a changing checksum.
.It
Produces a log of old distfiles in
.Pa ${DISTDIR}/history ,
.It
Create sha256 links under
.Pa ${DISTDIR}/by_cipher/sha256
as per
.Xr link-checksum 1 Ns 's
former duties.
.El
.Pp
For partial distfiles collections,
.Nm dpb
can also be run with
.Fl D Ns Ar HISTORY_ONLY
to scan the full ports tree and update
.Pa ${DISTDIR}/history
without fetching anything.
.Sh FILES
.Bl -tag -width toto
.It Pa ${DISTDIR}/distinfo
a cache of known distfiles with their respective checksums.
.It Pa ${DISTDIR}/history
List of files appearing in
.Pa ${DISTDIR}/distinfo
that seem to no longer be required by the ports tree.
.Xr dpb 1
will append to this file each time it is run on the whole tree
(option
.Fl a )
and only if the ports tree scan finishes without error.
Each line is of the form
.Bd -literal -offset indent
timestamp SHA256 (file) = sha
.Ed
.Pp
denoting the first fime a file/sha entry was no longer seen in the ports tree.
.El
.Sh SEE ALSO
.Xr clean-old-distfiles 1 ,
.Xr dpb 1 ,
.Xr ports 7
.Sh HISTORY
The new integrated
.Fl F
option to
.Xr dpb 1
was introduced in
.Ox 5.1 ,
replacing the original infrastructure introduced in
.Ox 2.7 .
.Sh CAVEATS
Changing checksums is a recurring problem that is outside the direct
control of the
.Ox
Project.
Some software distributors change distribution files without
warning, without changing the file name proper.
Once the problem has been identified, the port maintainer should usually
contact the software author to fix the problem or, if the software author
is unresponsive, the maintainer should use
.Ev DIST_SUBDIR
to provide some state to guard against shifting checksums.
.Pp
However, a more robust approach is also needed, so that ports users can
depend on distfiles mirrors to carry what they need irrespective of those
synchronization issues.
The
.Pa ${DISTFILES}/by-cipher/sha256
directory provides more persistent access to the distfiles,
indexed through the actual checksums that the files should match.
Provided mirroring is run sufficiently often,
two versions of the same distfile with respective checksums cksum1 and cksum2
will be available under the names
.Pa ${DISTFILES}/sha256/c1/cksum1/distfile
and
.Pa ${DISTFILES}/sha256/c2/cksum2/distfile .
.Pp
If
.Ev REFETCH
is set to true,
.Xr bsd.port.mk 5
will try to retrieve files under that naming scheme as a last resort.
@


1.26
log
@history file format correction

ok espie@@
@
text
@d1 1
a1 1
.\" $OpenBSD: mirroring-ports.7,v 1.25 2013/01/08 21:24:17 jmc Exp $
d27 1
a27 1
.Dd $Mdocdate: January 8 2013 $
d122 1
a122 1
contact the software author to fix the problem, or, if the software author
@


1.25
log
@fix a broken display;
@
text
@d1 1
a1 1
.\" $OpenBSD: mirroring-ports.7,v 1.24 2013/01/08 19:44:13 rpe Exp $
d96 1
a96 1
timestamp SHA256(file) = sha
@


1.24
log
@.Pa for path/filenames

ok espie@@
@
text
@d1 1
a1 1
.\" $OpenBSD: mirroring-ports.7,v 1.23 2012/01/30 17:09:10 espie Exp $
d27 1
a27 1
.Dd $Mdocdate: January 30 2012 $
d95 2
a96 2
.Bd -offset indent
.Li timestamp SHA256(file) = sha
@


1.23
log
@document the handling of partial distfiles collections
@
text
@d1 1
a1 1
.\" $OpenBSD: mirroring-ports.7,v 1.22 2012/01/27 19:09:14 espie Exp $
d27 1
a27 1
.Dd $Mdocdate: January 27 2012 $
d55 1
a55 1
.Ic some_file.part
d57 1
a57 1
.Sq ftp -C
d61 1
a61 1
.Ic ${DISTDIR}/distinfo ,
d65 1
a65 1
.Ic ${DISTDIR}/history ,
d68 1
a68 1
.Ic ${DISTDIR}/by_cipher/sha256
d79 1
a79 1
.Ic ${DISTDIR}/history
d131 2
a132 2
.Pa by-cipher/sha256
directory provides more persistant access to the distfiles,
@


1.22
log
@.Xr clean-old-distfiles 1
@
text
@d1 1
a1 1
.\" $OpenBSD: mirroring-ports.7,v 1.21 2012/01/08 20:29:04 espie Exp $
d27 1
a27 1
.Dd $Mdocdate: January 8 2012 $
d73 8
@


1.21
log
@document new ${DISTDIR}/history semantics
@
text
@d1 1
a1 1
.\" $OpenBSD: mirroring-ports.7,v 1.20 2012/01/06 16:50:58 espie Exp $
d27 1
a27 1
.Dd $Mdocdate: January 6 2012 $
d94 1
@


1.20
log
@much shorter instructions
@
text
@d1 1
a1 1
.\" $OpenBSD: mirroring-ports.7,v 1.19 2010/03/26 19:30:40 jmc Exp $
d27 1
a27 1
.Dd $Mdocdate: March 26 2010 $
d54 1
a54 1
fetch files to a temporary copy named
d64 4
a67 1
create sha256 links under
d72 20
@


1.19
log
@dispense with some wacky escape sequences;
@
text
@d1 1
a1 1
.\" $OpenBSD: mirroring-ports.7,v 1.18 2009/06/12 17:27:20 sthen Exp $
d3 1
a3 1
.\" Copyright (c) 2000 Marc Espie
d27 1
a27 1
.Dd $Mdocdate: June 12 2009 $
a36 66
The ports infrastructure provides a
.Ar mirror-maker
target that can be used to build a Makefile to facilitate mirroring
distfiles.
This target builds
.Ic ${DISTDIR}/Makefile ,
which can be used on almost any Unix-like machine to mirror
.Ox
distfiles.
Optionally, port dependencies may also be recorded in the Makefile,
which greatly increases the execution time of
.Ar mirror-maker .
The variable
.Ev RECURSIVE_FETCH_LIST
can be set to
.Sq \&Yes
to request that this is done.
.Pp
A sample Makefile entry is formatted like this:
.Bd -literal
all:: audio/tracker/tracker-5.3
\&.PHONY: audio/tracker/tracker-5.3
audio/tracker/tracker-5.3:  tracker-5.3.tgz

tracker-5.3.tgz: $F
        @@MAINTAINER="espie@@openbsd.org" \e
         SITES="ftp://ftp.uni-trier.de/pub/unix/audio/tracker/ " \e
         CIPHER="sha1" CKSUM="b0973d6a9c363caebd3a71547412f42b0681f323" \e
         exec ${FETCH} "$@@"


.Ed
This Makefile is usually invoked by the user from the directory where
they wish to mirror distfiles, with variables
.Ev FETCH
and
.Ev F
set on the command line, e.g.,
.Bd -literal -offset indent
cd mirror && make -k -j 5 -f path_to_makefile FETCH=fetch_script
.Ed
.Pp
Targets are set up so that each port is referenced by its full name, and
retrieves all its distfiles.
The
.Ar all
target can be used to retrieve all distfiles.
Targets
.Ar ftp
and
.Ar cdrom
can be used to retrieve all distfiles necessary to build ftp and CD-ROM
packages, respectively.
Default is
.Ar ftp
plus
.Ar cdrom .
Actual fetching is usually invoked with a parallel-make option, so that
several retrievals through ftp can proceed simultaneously.
.Pp
The
.Ev F
variable can be set to a dummy name, or a recent filename, to force
re-fetching of anything which is older than the filename.
Its intended use is to force re-fetching existing files,
or to checksum all files.
d38 31
a68 85
The
.Ev ${FETCH}
script should be supplied by the user, and will download and verify the
archive file.
It must obey the following variables:
.Bl -tag -width DIST_SUBDIR
.It Ev MAINTAINER
Port maintainer, used to report errors,
.It Ev ERROR
Some ports problems can be detected while building the Makefile, in which
case this variable will be set to a proper error message.
.It Ev DIST_SUBDIR
See
.Xr ports 7
for more details.
The
.Ev ${FETCH}
script is responsible for creating this subdirectory and cd'ing to it
before performing the actual fetch.
.It Ev SITES
A list of sites to try for fetching the distribution file.
.It Ev CIPHER
The checksumming utility to use for verifying the distribution file.
It will normally be set to
.Xr sha1 1
unless you tinker with
.Ev PREFERRED_CIPHER
while building the mirroring Makefile.
.It Ev CKSUM
The corresponding checksum.
If neither
.Ev CIPHER
nor
.Ev CKSUM
nor
.Ev ERROR
are set, the distribution file needs not be checked.
.El
.Pp
A standard fetch strategy is to try all sites in order: whenever the
distribution file is found, download it; verify the checksum; erase the
file and try the next site if it doesn't match.
.Pp
Mirroring sites should update their master Makefile fairly often.
Activities a proper mirror should offer (in order of decreasing importance):
.Bl -tag -width XXXXXXXXX
.It Mirror new files
Use a proper fetch script to download missing files,
.It Run Pa ${PORTSDIR}/infrastructure/fetch/link-checksums
This script creates permanent hardlinks that preserve distfiles against
checksum changes.
.It Verify all checksums
All checksums should be verified from time to time, and maintainers
notified of persistent discrepancies,
.It Check mastersites liveliness
Use a tool such as
.Sq mirror
to check that the master sites haven't fallen
off the Earth.
Even though the first site in the site list is the
most important site, good mirrors will scan all sites and report all
problems,
.It Remove old files
To gain room this, the mirror should maintain a list of
.Sq active
files (easy enough, just provide a fetch script that just lists the
file names), and remove files that are no longer active.
Since
.Ox
releases happen every six months, this delay should be longer than that.
.El
Sample scripts are provided in the
.Pa ${PORTSDIR}/infrastructure/fetch
directory.
.Sh FILES
.Bl -tag -width XXXXXXXXX -compact
.It Pa ${DISTDIR}/Makefile
Main mirroring Makefile
.It Pa ${PORTSDIR}/infrastructure/fetch/fetch-all
Sample script usable to retrieve distfiles.
.It Pa ${PORTSDIR}/infrastructure/fetch/check-all
Sample script to check all distfiles checksums.
.It Pa ${PORTSDIR}/infrastructure/fetch/link-checksums
Populating checksums subdirectories with links, to guard against shifting
checksums.
d71 1
d74 8
a81 4
This infrastructure was introduced for
.Ox 2.7
by Marc Espie, with feedback from Bob Beck, Todd Fries, Camiel Dobbelaar,
and a few other people.
d99 4
a102 5
.Pa link-checksums
script creates another access to the distfiles, indexed through the actual
checksums that the files should match.
Provided mirroring is run sufficiently often, together with
.Pa link-checksums ,
d105 1
a105 1
.Pa ${DISTFILES}/sha1/cksum1/distfile
d107 1
a107 1
.Pa ${DISTFILES}/sha1/cksum2/distfile .
d109 1
a109 1
Starting revision 1.281, if
d112 1
a112 1
.Pa bsd.port.mk
@


1.18
log
@document that RECURSIVE_FETCH_LIST is set to No by default.
ok sturm, ajacoutot, espie.
@
text
@d1 1
a1 1
.\" $OpenBSD: mirroring-ports.7,v 1.17 2009/02/19 21:44:24 espie Exp $
d27 1
a27 1
.Dd $Mdocdate: February 19 2009 $
d62 3
a64 3
        @@MAINTAINER="espie@@openbsd.org" \\
         SITES="ftp://ftp.uni-trier.de/pub/unix/audio/tracker/ " \\
         CIPHER="sha1" CKSUM="b0973d6a9c363caebd3a71547412f42b0681f323" \\
@


1.17
log
@reflect reality
@
text
@d1 1
a1 1
.\" $OpenBSD: mirroring-ports.7,v 1.16 2007/05/31 19:19:58 jmc Exp $
d27 1
a27 1
.Dd $Mdocdate: May 31 2007 $
d46 2
a47 2
By default, port dependencies will also be recorded in the Makefile,
which accounts for most of the execution time of
d52 2
a53 2
.Sq \&No
to bypass that computation.
@


1.16
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\" $OpenBSD: mirroring-ports.7,v 1.15 2007/02/16 19:15:28 espie Exp $
d27 1
a27 1
.Dd $Mdocdate$
d81 1
a81 1
The default
d83 1
a83 1
target is used to retrieve all distfiles.
d90 4
@


1.15
log
@explain about RECURSIVE_FETCH_LIST in a clear way (why is mirror-maker
taking so much time ?). Some formatting advice from jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: mirroring-ports.7,v 1.14 2005/03/11 23:03:58 jmc Exp $
d27 1
a27 1
.Dd February 19, 2000
@


1.14
log
@cdrom/CDROM -> CD-ROM;
@
text
@d1 1
a1 1
.\" $OpenBSD: mirroring-ports.7,v 1.13 2004/04/27 12:00:03 jmc Exp $
d46 3
d52 2
a53 2
.Sq Yes
if port dependencies  should also be recorded.
@


1.13
log
@irregardless -> irrespective;

ok millert@@ krw@@
derision from the rest of the world

stolen from a rejected freebsd pr;
@
text
@d1 1
a1 1
.\" $OpenBSD: mirroring-ports.7,v 1.12 2004/01/11 23:53:08 pvalchev Exp $
d85 1
a85 1
can be used to retrieve all distfiles necessary to build ftp and cdrom
@


1.12
log
@give a correct example, using make -k
(-k is needed otherwise it stops at the first unavailable distfile, which
is not what you want for a mirror)
ok espie
@
text
@d1 1
a1 1
.\" $OpenBSD: mirroring-ports.7,v 1.11 2003/07/31 10:53:50 espie Exp $
d204 1
a204 1
depend on distfiles mirrors to carry what they need irregardless of those
@


1.11
log
@Document RECURSIVE_FETCH_LIST, fix output to correspond to reality.
@
text
@d1 1
a1 1
.\" $OpenBSD: mirroring-ports.7,v 1.10 2003/06/06 13:44:30 jmc Exp $
d73 1
a73 1
cd mirror && make -j 5 -f path_to_makefile FETCH=fetch_script
@


1.10
log
@- section reorder
- macro fixes
- kill whitespace at EOL
@
text
@d1 1
a1 1
.\" $OpenBSD: mirroring-ports.7,v 1.9 2003/03/16 10:30:26 avsm Exp $
d46 5
d55 2
a56 2
.PHONY: audio/tracker/tracker-5.3
audio/tracker/tracker-5.3::  tracker-5.3.tgz
@


1.9
log
@remove a tab which isn't needed (-indent is there)
jmc@@ ok
@
text
@d1 1
a1 1
.\" $OpenBSD: mirroring-ports.7,v 1.8 2002/08/29 07:34:31 wcobb Exp $
d166 19
a217 19
.Sh FILES
.Bl -tag -width XXXXXXXXX -compact
.It Pa ${DISTDIR}/Makefile
Main mirroring Makefile
.It Pa ${PORTSDIR}/infrastructure/fetch/fetch-all
Sample script usable to retrieve distfiles.
.It Pa ${PORTSDIR}/infrastructure/fetch/check-all
Sample script to check all distfiles checksums.
.It Pa ${PORTSDIR}/infrastructure/fetch/link-checksums
Populating checksums subdirectories with links, to guard against shifting
checksums.
.El
.Sh HISTORY
This infrastructure was introduced for
.Ox 2.7
by Marc Espie, with feedback from Bob Beck, Todd Fries, Camiel Dobbelaar,
and a few other people.
.Sh SEE ALSO
.Xr ports 7
@


1.8
log
@- replace empty lines by .Pp where appropriate.
- no empty lines at end of file.
ok mpech@@
@
text
@d1 1
a1 1
.\" $OpenBSD: mirroring-ports.7,v 1.7 2001/11/13 13:54:26 mpech Exp $
d68 1
a68 1
	cd mirror && make -j 5 -f path_to_makefile FETCH=fetch_script
@


1.7
log
@o) Fix bogus .Xr usage;
o) CAVEAT -> CAVEATS;
o) AUTHOR -> AUTHORS;
o) Start new sentence on a new line;
o) For URL and path names use .Pa;
o) We don't like .Pp before .Rs;
o) Don't use .Pp before/after .Sh;
o) OpenBSD -> .Ox;

millert@@ ok and help;
@
text
@d1 1
a1 1
.\" $OpenBSD: mirroring-ports.7,v 1.6 2001/10/05 14:45:54 mpech Exp $
d70 1
a70 1

@


1.6
log
@Powered by @@mantoya:
o) start new sentence on a new line;
o) minor mdoc fixes;
millert@@ ok

Tip of the day:   www.mpechismazohist.com
@
text
@d1 1
a1 1
.\" $OpenBSD: mirroring-ports.7,v 1.5 2001/03/01 16:11:22 aaron Exp $
d166 1
a166 1
.Sh CAVEAT
@


1.5
log
@A slew of share/ man page fixes; nordin@@cse.ogi.edu. These have been sitting
in my INBOX since Nov 6, 2000, probably forgot about them since the tree was
frozen at that time.
@
text
@d1 1
a1 1
.\" $OpenBSD: mirroring-ports.7,v 1.4 2000/10/13 04:09:21 aaron Exp $
d170 6
a175 5
Project.  Some software distributors change distribution files without
warning, without changing the file name proper.  Once the problem has been
identified, the port maintainer should usually contact the software author
to fix the problem, or, if the software author is unresponsive, the
maintainer should use
d181 2
a182 1
synchronization issues.  The
d185 2
a186 2
checksums that the files should match.  Provided mirroring is run
sufficiently often, together with
@


1.4
log
@Remove unwanted trailing whitespace.
@
text
@d1 1
a1 1
.\" $OpenBSD: mirroring-ports.7,v 1.3 2000/05/17 12:46:38 espie Exp $
d145 1
a145 1
notified of persistant discrepancies,
@


1.3
log
@Synch with reality (exec ${FETCH})

Document link-checksums/REFETCH mechanism
@
text
@d1 1
a1 1
.\" $OpenBSD: mirroring-ports.7,v 1.2 2000/04/19 11:11:50 espie Exp $
d168 1
a168 1
control of the 
d180 1
a180 1
synchronization issues.  The 
d186 1
a186 1
two versions of the same distfile with respective checksums cksum1 and cksum2 
d192 1
a192 1
Starting revision 1.281, if 
d195 1
a195 1
.Pa bsd.port.mk 
@


1.2
log
@Err, oops. I know I needed to check the spelling before I committed this.
Sorry Camiel.
@
text
@d1 1
a1 1
.\" $OpenBSD: mirroring-ports.7,v 1.1 2000/04/19 01:39:58 espie Exp $
d57 1
a57 1
         ${FETCH} "$@@"
d140 3
d166 31
d205 3
@


1.1
log
@Document the way distfiles are mirrored.
Document a few things that changed in the ports tree.
@
text
@d1 1
a1 1
.\" $OpenBSD: ports.7,v 1.8 2000/01/29 20:22:30 espie Exp $
d175 1
a175 1
by Marc Espie, with feedback from Bob Beck, Todd Fries, Camiel Doobelbar,
@

