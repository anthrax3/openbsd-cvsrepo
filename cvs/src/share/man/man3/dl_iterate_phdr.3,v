head	1.4;
access;
symbols
	OPENBSD_6_2:1.4.0.20
	OPENBSD_6_2_BASE:1.4
	OPENBSD_6_1:1.4.0.18
	OPENBSD_6_1_BASE:1.4
	OPENBSD_6_0:1.4.0.14
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.10
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.12
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.4
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.8
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.6
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.2
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.3.0.24
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.22
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.20
	OPENBSD_5_0:1.3.0.18
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.3.0.16
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.14
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.10
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.12
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.8
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.6
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.4
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.3.0.2
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.2.0.10
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.8
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.6
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.2.0.4
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.2.0.2
	OPENBSD_3_7_BASE:1.2;
locks; strict;
comment	@.\" @;


1.4
date	2013.06.05.03.42.03;	author tedu;	state Exp;
branches;
next	1.3;

1.3
date	2007.05.31.19.19.48;	author jmc;	state Exp;
branches;
next	1.2;

1.2
date	2005.03.07.21.06.43;	author kettenis;	state Exp;
branches;
next	1.1;

1.1
date	2005.01.30.14.38.17;	author kettenis;	state Exp;
branches;
next	;


desc
@@


1.4
log
@use fancy .In macros for includes. from Jan Klemkow. ok jmc schwarze
@
text
@.\"   $OpenBSD: dl_iterate_phdr.3,v 1.3 2007/05/31 19:19:48 jmc Exp $
.\"
.\" Copyright (c) 2005 Mark Kettenis
.\"
.\" Permission to use, copy, modify, and distribute this software for any
.\" purpose with or without fee is hereby granted, provided that the above
.\" copyright notice and this permission notice appear in all copies.
.\"
.\" THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
.\" WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
.\" MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
.\" ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
.\" WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
.\" ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
.\" OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
.\"
.Dd $Mdocdate: May 31 2007 $
.Dt DL_ITERATE_PHDR 3
.Os
.Sh NAME
.Nm dl_iterate_phdr
.Nd iterate over program headers
.Sh SYNOPSIS
.In link.h
.Ft int
.Fn dl_iterate_phdr "int (*callback)(struct dl_phdr_info *, size_t, void*)" "void *data"
.Sh DESCRIPTION
The
.Fn dl_iterate_phdr
function iterates over all shared objects loaded into a process's
address space, calling
.Fa callback
for each shared object, passing it information about the object's
program headers and the
.Fa data
argument.
The information about the program headers is passed in a structure
that is defined as:
.Bd -literal
struct dl_phdr_info {
	Elf_Addr	dlpi_addr;
	const char	*dlpi_name;
	const Elf_Phdr	*dlpi_phdr;
	Elf_Half	dlpi_phnum;
};
.Ed
.Pp
The members of
.Li struct dl_phdr_info
have the following meaning:
.Bl -tag -width XXXdlpi_phdr
.It Fa dlpi_addr
The base address at which the shared object is mapped into the address
space of the calling process.
.It Fa dlpi_name
The name of the shared object.
.It Fa dlpi_phdr
A pointer to the shared object's program headers.
.It Fa dlpi_phnum
The number of program headers in the shared object.
.El
.Pp
Future versions of
.Ox
might add more members to this structure.
To make it possible for programs to check whether any new members have
been added, the size of the structure is passed as an argument to
.Fa callback .
.Sh SEE ALSO
.Xr ld 1 ,
.Xr ld.so 1 ,
.Xr dlfcn 3 ,
.Xr elf 5
.Sh HISTORY
The
.Nm
function first appeared in
.Ox 3.7 .
@


1.3
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"   $OpenBSD: dl_iterate_phdr.3,v 1.2 2005/03/07 21:06:43 kettenis Exp $
d17 1
a17 1
.Dd $Mdocdate$
d24 1
a24 1
.Fd #include <link.h>
@


1.2
log
@Bug is fixed now.
@
text
@d1 1
a1 1
.\"   $OpenBSD: dl_iterate_phdr.3,v 1.1 2005/01/30 14:38:17 kettenis Exp $
d17 1
a17 1
.Dd January 17, 2005
@


1.1
log
@dl_iterate_phdr man
@
text
@d1 1
a1 1
.\"   $OpenBSD$
a78 4
.Sh BUGS
The
.Fa callback
function is not called for the main executable object.
@

