head	1.15;
access;
symbols
	OPENBSD_6_1:1.15.0.22
	OPENBSD_6_1_BASE:1.15
	OPENBSD_6_0:1.15.0.18
	OPENBSD_6_0_BASE:1.15
	OPENBSD_5_9:1.15.0.14
	OPENBSD_5_9_BASE:1.15
	OPENBSD_5_8:1.15.0.16
	OPENBSD_5_8_BASE:1.15
	OPENBSD_5_7:1.15.0.8
	OPENBSD_5_7_BASE:1.15
	OPENBSD_5_6:1.15.0.12
	OPENBSD_5_6_BASE:1.15
	OPENBSD_5_5:1.15.0.10
	OPENBSD_5_5_BASE:1.15
	OPENBSD_5_4:1.15.0.6
	OPENBSD_5_4_BASE:1.15
	OPENBSD_5_3:1.15.0.4
	OPENBSD_5_3_BASE:1.15
	OPENBSD_5_2:1.15.0.2
	OPENBSD_5_2_BASE:1.15
	OPENBSD_5_1_BASE:1.14
	OPENBSD_5_1:1.14.0.12
	OPENBSD_5_0:1.14.0.10
	OPENBSD_5_0_BASE:1.14
	OPENBSD_4_9:1.14.0.8
	OPENBSD_4_9_BASE:1.14
	OPENBSD_4_8:1.14.0.6
	OPENBSD_4_8_BASE:1.14
	OPENBSD_4_7:1.14.0.2
	OPENBSD_4_7_BASE:1.14
	OPENBSD_4_6:1.14.0.4
	OPENBSD_4_6_BASE:1.14
	OPENBSD_4_5:1.12.0.4
	OPENBSD_4_5_BASE:1.12
	OPENBSD_4_4:1.12.0.2
	OPENBSD_4_4_BASE:1.12
	OPENBSD_4_3:1.11.0.4
	OPENBSD_4_3_BASE:1.11
	OPENBSD_4_2:1.11.0.2
	OPENBSD_4_2_BASE:1.11
	OPENBSD_4_1:1.10.0.14
	OPENBSD_4_1_BASE:1.10
	OPENBSD_4_0:1.10.0.12
	OPENBSD_4_0_BASE:1.10
	OPENBSD_3_9:1.10.0.10
	OPENBSD_3_9_BASE:1.10
	OPENBSD_3_8:1.10.0.8
	OPENBSD_3_8_BASE:1.10
	OPENBSD_3_7:1.10.0.6
	OPENBSD_3_7_BASE:1.10
	OPENBSD_3_6:1.10.0.4
	OPENBSD_3_6_BASE:1.10
	OPENBSD_3_5:1.10.0.2
	OPENBSD_3_5_BASE:1.10
	OPENBSD_3_4:1.9.0.2
	OPENBSD_3_4_BASE:1.9
	OPENBSD_3_3:1.7.0.12
	OPENBSD_3_3_BASE:1.7
	OPENBSD_3_2:1.7.0.10
	OPENBSD_3_2_BASE:1.7
	OPENBSD_3_1:1.7.0.8
	OPENBSD_3_1_BASE:1.7
	OPENBSD_3_0:1.7.0.6
	OPENBSD_3_0_BASE:1.7
	OPENBSD_2_9:1.7.0.4
	OPENBSD_2_9_BASE:1.7
	OPENBSD_2_8:1.7.0.2
	OPENBSD_2_8_BASE:1.7
	OPENBSD_2_7:1.6.0.2
	OPENBSD_2_7_BASE:1.6
	OPENBSD_2_6:1.5.0.2
	OPENBSD_2_6_BASE:1.5
	OPENBSD_2_5:1.3.0.2
	OPENBSD_2_5_BASE:1.3
	OPENBSD_2_4:1.1.1.1.0.10
	OPENBSD_2_4_BASE:1.1.1.1
	OPENBSD_2_3:1.1.1.1.0.8
	OPENBSD_2_3_BASE:1.1.1.1
	OPENBSD_2_2:1.1.1.1.0.6
	OPENBSD_2_2_BASE:1.1.1.1
	OPENBSD_2_1:1.1.1.1.0.4
	OPENBSD_2_1_BASE:1.1.1.1
	OPENBSD_2_0:1.1.1.1.0.2
	OPENBSD_2_0_BASE:1.1.1.1
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@.\" @;


1.15
date	2012.06.20.22.15.13;	author schwarze;	state Exp;
branches;
next	1.14;

1.14
date	2009.06.03.16.02.44;	author schwarze;	state Exp;
branches;
next	1.13;

1.13
date	2009.03.27.12.31.31;	author schwarze;	state Exp;
branches;
next	1.12;

1.12
date	2008.07.28.16.27.39;	author deraadt;	state Exp;
branches;
next	1.11;

1.11
date	2007.05.31.19.19.58;	author jmc;	state Exp;
branches;
next	1.10;

1.10
date	2003.11.07.08.50.17;	author jmc;	state Exp;
branches;
next	1.9;

1.9
date	2003.06.06.13.28.13;	author jmc;	state Exp;
branches;
next	1.8;

1.8
date	2003.06.02.23.30.14;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	2000.10.26.00.37.04;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	2000.03.19.19.25.28;	author aaron;	state Exp;
branches;
next	1.5;

1.5
date	99.10.05.20.53.11;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	99.07.09.13.35.38;	author aaron;	state Exp;
branches;
next	1.3;

1.3
date	98.11.29.15.47.23;	author aaron;	state Exp;
branches;
next	1.2;

1.2
date	98.11.26.04.25.58;	author aaron;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.44.37;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.44.37;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.15
log
@Corrent and expand passwd(5) HISTORY,
and apply some minor tweaks to group(5) HISTORY.
All facts found on http://minnie.tuhs.org/cgi-bin/utree.pl

ok jmc@@ sobrado@@
@
text
@.\"	$OpenBSD: group.5,v 1.14 2009/06/03 16:02:44 schwarze Exp $
.\"	$NetBSD: group.5,v 1.4 1995/07/28 06:41:39 phil Exp $
.\"
.\" Copyright (c) 1980, 1991, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\" Portions Copyright(c) 1994, Jason Downs. All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"     @@(#)group.5	8.3 (Berkeley) 4/19/94
.\"
.Dd $Mdocdate: June 3 2009 $
.Dt GROUP 5
.Os
.Sh NAME
.Nm group
.Nd format of the group permissions file
.Sh DESCRIPTION
The file
.Pa /etc/group
consists of newline separated
.Tn ASCII
records, one per group, containing four colon
.Pq Ql \&:
separated fields.
These fields are as follows:
.Pp
.Bl -tag -width password -offset indent -compact
.It group
Name of the group.
.It passwd
Group's encrypted password.
.It gid
The group's decimal ID.
.It member
Group members.
.El
.Pp
The
.Ar group
field is the group name used for granting file access to users
who are members of the group.
The
.Ar gid
field is the number associated with the group name.
They should both be unique across the system (and often
across a group of systems) since they control file access.
The
.Ar passwd
field is an optional encrypted password.
This field is rarely used and an asterisk is normally placed in it
rather than leaving it blank.
The
.Ar member
field contains the names of users granted the privileges of
.Ar group .
The member names are separated by commas without spaces or newlines.
A user is automatically in a group if that group was specified in their
.Xr passwd 5
entry and does not need to be added to that group in the
.Nm
file.
.\" .Pp
.\" When the system reads the file
.\" .Pa /etc/group
.\" the fields are read into the structure
.\" .Fa group
.\" declared in
.\" .Aq Pa grp.h :
.\" .Bd -literal -offset indent
.\" struct group {
.\"	char    *gr_name;        /* group name */
.\"	char    *gr_passwd;      /* group password */
.\"	int     gr_gid;          /* group id */
.\"	char    **gr_mem;        /* group members */
.\" };
.\" .Ed
.Sh YP SUPPORT
If YP is active, the
.Nm
file also supports YP exclusions and inclusions.
.Pp
Lines beginning with a
.Ql \&-
(minus sign) are entries marked as being excluded from any following
inclusions, which are marked with a `+' (plus sign).
.Pp
Lines of the format
.Bd -literal -offset indent
+name:*::
.Ed
.Pp
cause the specified group to be included from the
.Pa group.byname
YP map.
If no group name is specified, or the
.Ql +
(plus sign) appears alone on a line, all groups are included from the YP map.
.Pp
YP references may appear anywhere in the file, but the single
.Ql +
form should be on the last line, for historical reasons.
Only the first group with a specific name encountered, whether in the
.Nm
file itself, or included via YP, will be used.
.Pp
Proper YP group support requires consistent
.Pa group.byname ,
.Pa group.bygid
and
.Pa netid.byname
YP maps.
See
.Xr getgrent 3
and
.Xr getgrouplist 3
for details.
.Pp
When YP is enabled but temporarily unavailable, login becomes impossible
for all users except those having an entry in the
.Xr netid 5
file.
.Sh FILES
.Bl -tag -width /etc/group -compact
.It Pa /etc/group
.El
.Sh SEE ALSO
.Xr passwd 1 ,
.Xr setgroups 2 ,
.Xr crypt 3 ,
.Xr initgroups 3 ,
.Xr netid 5 ,
.Xr passwd 5 ,
.Xr yp 8
.Sh HISTORY
The
.Nm
file format first appeared in
.At v6 .
.Pp
The YP file format first appeared in SunOS.
.Sh BUGS
The
.Xr passwd 1
command does not change the
.Nm
passwords.
.Pp
Lines in
.Pa /etc/group
are limited to 1024 characters.
YP groups are not affected by this limit.
.Pp
Groups are limited to a maximum of 200 members per group.
@


1.14
log
@Take advantage of the surprise libc bump to bring in
YP group(5) exclusion, i.e. support -groupname:*:: in /etc/group.
Such groups will be excluded from later +:*::,
in just the same was as it is already done for passwd(5).
I have been running this since the autumn of 2008.
Discussed with several (including deraadt@@, millert@@, jmc@@).
@
text
@d1 1
a1 1
.\"	$OpenBSD: group.5,v 1.13 2009/03/27 12:31:31 schwarze Exp $
d34 1
a34 1
.Dd $Mdocdate: March 27 2009 $
d81 1
a81 1
.Pa /etc/passwd
d83 1
a83 1
.Pa /etc/group
d158 1
a158 1
A
d160 1
a160 1
file format appeared in
@


1.13
log
@getgrouplist: If YP is #defined and enabled in /etc/group(5) and /etc/netid(5)
  contains a matching entry, use that and refrain from accessing YP.
getpwnam/getpwuid: If YP is #defined and /etc/master.passwd(5) contains
  a matching entry before the first YP entry, use that and stay away from YP.

Taken together, this allows a solution to the following problem pointed
out by deraadt@@: When YP was configured but temporarily unavailable, even
root login would block, hindering you when trying to do repairs.
To avoid this, you can now provide a static entry for root in /etc/netid.

Using suggestions from miod@@ otto@@ blambert@@ jmc@@.
"commit" deraadt@@, "cool" ajacoutot@@, "looks fine" jmc@@.
@
text
@d1 1
a1 1
.\"	$OpenBSD: group.5,v 1.12 2008/07/28 16:27:39 deraadt Exp $
d34 1
a34 1
.Dd $Mdocdate: July 28 2008 $
d103 8
a110 1
file may also contain lines of the format
d115 1
a115 1
which causes the specified group to be included from the
@


1.12
log
@document which functions use which YP maps; Ingo Schwarze
@
text
@d1 1
a1 1
.\"	$OpenBSD: group.5,v 1.11 2007/05/31 19:19:58 jmc Exp $
d34 1
a34 1
.Dd $Mdocdate: May 31 2007 $
d133 5
d147 1
@


1.11
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: group.5,v 1.10 2003/11/07 08:50:17 jmc Exp $
d34 1
a34 1
.Dd $Mdocdate$
d121 12
@


1.10
log
@document line length and group membership limits;
kill a stray .Pp;

help and ok millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: group.5,v 1.9 2003/06/06 13:28:13 jmc Exp $
d34 1
a34 1
.Dd July 18, 1995
@


1.9
log
@- section reorder
- macro fixes
- kill whitespace at EOL
@
text
@d1 1
a1 1
.\"	$OpenBSD: group.5,v 1.8 2003/06/02 23:30:14 millert Exp $
a103 1
.Pp
d145 7
@


1.8
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
.\"	$OpenBSD: group.5,v 1.7 2000/10/26 00:37:04 aaron Exp $
a132 6
.Sh BUGS
The
.Xr passwd 1
command does not change the
.Nm
passwords.
d140 6
@


1.7
log
@Some share/man fleshing.
@
text
@d1 1
a1 1
.\"	$OpenBSD: group.5,v 1.6 2000/03/19 19:25:28 aaron Exp $
d16 1
a16 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
@


1.6
log
@Various cleanups.
@
text
@d1 1
a1 1
.\"	$OpenBSD: group.5,v 1.5 1999/10/05 20:53:11 aaron Exp $
d50 1
a50 1
.Pq Sq \&:
d76 3
a78 4
field
is an optional encrypted password.
This field is rarely used
and an asterisk is normally placed in it rather than leaving it blank.
d84 1
a84 2
A user is automatically in a group if that group was specified
in their
d118 1
a118 2
(plus sign) appears alone
on line, all groups are included from the YP map.
@


1.5
log
@The .Bl -tag flag expects a -width argument.
@
text
@d1 1
a1 1
.\"	$OpenBSD: group.5,v 1.4 1999/07/09 13:35:38 aaron Exp $
d51 2
a52 1
separated fields. These fields are as follows:
@


1.4
log
@- remove all trailing whitespace
     * except when it is escaped with a `\' at the end of the line
- fix remaining .Nm usage as well
- this is from a patch I received from kwesterback@@home.com, who has been
  working on some scripts for fixing formatting errors in mdoc'd man pages

Ok, so there could be a cost/benefit debate with this commit, but since I have
the patch we might as well commit it...
@
text
@d1 1
a1 1
.\"	$OpenBSD: group.5,v 1.3 1998/11/29 15:47:23 aaron Exp $
d110 1
a110 1
.Bl -tag -offset indent -compact
d112 1
a116 1
.Pp
d118 1
a118 1
.Dq +
d123 1
a123 1
.Dq +
d151 1
a151 1
YP file format first appeared in SunOS.
@


1.3
log
@kill superfluous .Nm macro arguments
@
text
@d1 1
a1 1
.\"	$OpenBSD: group.5,v 1.2 1998/11/26 04:25:58 aaron Exp $
d79 1
a79 1
The 
@


1.2
log
@share/man/man5/ man page repairs
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d143 1
a143 1
.Nm group
@


1.1
log
@Initial revision
@
text
@d1 1
d46 1
a46 1
.Aq Pa /etc/group
d50 1
a50 1
.Ql \&:
d52 1
d57 1
a57 3
Group's
.Em encrypted
password.
d76 1
a76 3
is an optional
.Em encrypted
password.
d88 2
a89 1
.Pa /etc/group file.
d117 3
a119 1
If no group name is specified, or the ``+'' (plus sign) appears alone
d122 3
a124 2
YP references may appear anywhere in the file, but the single ``+'' form
should be on the last line, for historical reasons.
d133 1
d135 1
a136 2
.Xr crypt 3 ,
.Xr passwd 1 ,
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
