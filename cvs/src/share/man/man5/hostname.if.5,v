head	1.65;
access;
symbols
	OPENBSD_6_2_BASE:1.65
	OPENBSD_6_1:1.65.0.4
	OPENBSD_6_1_BASE:1.65
	OPENBSD_6_0:1.64.0.6
	OPENBSD_6_0_BASE:1.64
	OPENBSD_5_9:1.64.0.2
	OPENBSD_5_9_BASE:1.64
	OPENBSD_5_8:1.64.0.4
	OPENBSD_5_8_BASE:1.64
	OPENBSD_5_7:1.62.0.2
	OPENBSD_5_7_BASE:1.62
	OPENBSD_5_6:1.62.0.4
	OPENBSD_5_6_BASE:1.62
	OPENBSD_5_5:1.61.0.6
	OPENBSD_5_5_BASE:1.61
	OPENBSD_5_4:1.61.0.2
	OPENBSD_5_4_BASE:1.61
	OPENBSD_5_3:1.60.0.2
	OPENBSD_5_3_BASE:1.60
	OPENBSD_5_2:1.56.0.6
	OPENBSD_5_2_BASE:1.56
	OPENBSD_5_1_BASE:1.56
	OPENBSD_5_1:1.56.0.4
	OPENBSD_5_0:1.56.0.2
	OPENBSD_5_0_BASE:1.56
	OPENBSD_4_9:1.55.0.6
	OPENBSD_4_9_BASE:1.55
	OPENBSD_4_8:1.55.0.4
	OPENBSD_4_8_BASE:1.55
	OPENBSD_4_7:1.55.0.2
	OPENBSD_4_7_BASE:1.55
	OPENBSD_4_6:1.52.0.10
	OPENBSD_4_6_BASE:1.52
	OPENBSD_4_5:1.52.0.6
	OPENBSD_4_5_BASE:1.52
	OPENBSD_4_4:1.52.0.4
	OPENBSD_4_4_BASE:1.52
	OPENBSD_4_3:1.52.0.2
	OPENBSD_4_3_BASE:1.52
	OPENBSD_4_2:1.50.0.2
	OPENBSD_4_2_BASE:1.50
	OPENBSD_4_1:1.49.0.2
	OPENBSD_4_1_BASE:1.49
	OPENBSD_4_0:1.46.0.2
	OPENBSD_4_0_BASE:1.46
	OPENBSD_3_9:1.43.0.2
	OPENBSD_3_9_BASE:1.43
	OPENBSD_3_8:1.42.0.2
	OPENBSD_3_8_BASE:1.42
	OPENBSD_3_7:1.39.0.4
	OPENBSD_3_7_BASE:1.39
	OPENBSD_3_6:1.39.0.2
	OPENBSD_3_6_BASE:1.39
	OPENBSD_3_5:1.35.0.2
	OPENBSD_3_5_BASE:1.35
	OPENBSD_3_4:1.34.0.2
	OPENBSD_3_4_BASE:1.34
	OPENBSD_3_3:1.31.0.2
	OPENBSD_3_3_BASE:1.31
	OPENBSD_3_2:1.29.0.2
	OPENBSD_3_2_BASE:1.29
	OPENBSD_3_1:1.27.0.2
	OPENBSD_3_1_BASE:1.27
	OPENBSD_3_0:1.26.0.2
	OPENBSD_3_0_BASE:1.26
	OPENBSD_2_9:1.25.0.2
	OPENBSD_2_9_BASE:1.25
	OPENBSD_2_8:1.22.0.2
	OPENBSD_2_8_BASE:1.22
	OPENBSD_2_7:1.20.0.2
	OPENBSD_2_7_BASE:1.20
	OPENBSD_2_6:1.6.0.2
	OPENBSD_2_6_BASE:1.6;
locks; strict;
comment	@.\" @;


1.65
date	2017.03.10.18.28.11;	author jmc;	state Exp;
branches;
next	1.64;
commitid	yQUpNszE9zUi4Lyt;

1.64
date	2015.06.06.13.13.07;	author florian;	state Exp;
branches;
next	1.63;
commitid	W2tnaAguWjaHgrIC;

1.63
date	2015.03.31.12.47.25;	author jmc;	state Exp;
branches;
next	1.62;
commitid	Nb6RukESvGWUMr21;

1.62
date	2014.07.12.16.59.06;	author henning;	state Exp;
branches;
next	1.61;
commitid	vCQrFDH9ecZBnP0O;

1.61
date	2013.07.14.19.44.39;	author jmc;	state Exp;
branches;
next	1.60;

1.60
date	2013.01.18.21.48.43;	author jmc;	state Exp;
branches;
next	1.59;

1.59
date	2012.12.27.08.26.43;	author jmc;	state Exp;
branches;
next	1.58;

1.58
date	2012.11.26.21.35.20;	author krw;	state Exp;
branches;
next	1.57;

1.57
date	2012.11.26.17.42.05;	author krw;	state Exp;
branches;
next	1.56;

1.56
date	2011.07.08.01.30.26;	author deraadt;	state Exp;
branches;
next	1.55;

1.55
date	2009.12.10.22.04.59;	author deraadt;	state Exp;
branches;
next	1.54;

1.54
date	2009.12.10.00.51.55;	author todd;	state Exp;
branches;
next	1.53;

1.53
date	2009.11.22.22.01.55;	author deraadt;	state Exp;
branches;
next	1.52;

1.52
date	2008.01.31.20.00.08;	author jmc;	state Exp;
branches;
next	1.51;

1.51
date	2008.01.03.11.16.45;	author jmc;	state Exp;
branches;
next	1.50;

1.50
date	2007.05.31.19.19.58;	author jmc;	state Exp;
branches;
next	1.49;

1.49
date	2007.01.10.16.17.23;	author tom;	state Exp;
branches;
next	1.48;

1.48
date	2007.01.10.15.22.55;	author tom;	state Exp;
branches;
next	1.47;

1.47
date	2006.12.20.09.12.32;	author jmc;	state Exp;
branches;
next	1.46;

1.46
date	2006.06.26.07.41.42;	author jmc;	state Exp;
branches;
next	1.45;

1.45
date	2006.05.26.04.02.59;	author deraadt;	state Exp;
branches;
next	1.44;

1.44
date	2006.05.23.13.38.49;	author jmc;	state Exp;
branches;
next	1.43;

1.43
date	2006.01.09.21.34.57;	author jsg;	state Exp;
branches;
next	1.42;

1.42
date	2005.06.10.00.01.12;	author joel;	state Exp;
branches;
next	1.41;

1.41
date	2005.04.12.13.27.11;	author jmc;	state Exp;
branches;
next	1.40;

1.40
date	2005.04.12.12.05.10;	author jmc;	state Exp;
branches;
next	1.39;

1.39
date	2004.07.26.08.53.29;	author jmc;	state Exp;
branches;
next	1.38;

1.38
date	2004.05.30.21.36.30;	author jmc;	state Exp;
branches;
next	1.37;

1.37
date	2004.05.29.17.54.46;	author jcs;	state Exp;
branches;
next	1.36;

1.36
date	2004.05.26.14.19.55;	author otto;	state Exp;
branches;
next	1.35;

1.35
date	2004.02.09.19.21.51;	author espie;	state Exp;
branches;
next	1.34;

1.34
date	2003.09.02.18.37.08;	author jmc;	state Exp;
branches;
next	1.33;

1.33
date	2003.06.06.13.28.13;	author jmc;	state Exp;
branches;
next	1.32;

1.32
date	2003.06.02.23.30.14;	author millert;	state Exp;
branches;
next	1.31;

1.31
date	2003.03.10.09.26.27;	author deraadt;	state Exp;
branches;
next	1.30;

1.30
date	2003.03.10.09.16.06;	author deraadt;	state Exp;
branches;
next	1.29;

1.29
date	2002.09.26.22.12.43;	author miod;	state Exp;
branches;
next	1.28;

1.28
date	2002.06.03.16.41.36;	author miod;	state Exp;
branches;
next	1.27;

1.27
date	2002.02.08.00.56.41;	author deraadt;	state Exp;
branches;
next	1.26;

1.26
date	2001.10.04.10.28.20;	author wilfried;	state Exp;
branches;
next	1.25;

1.25
date	2001.03.01.16.11.21;	author aaron;	state Exp;
branches;
next	1.24;

1.24
date	2001.01.10.22.17.10;	author jason;	state Exp;
branches;
next	1.23;

1.23
date	2000.11.20.08.00.03;	author deraadt;	state Exp;
branches;
next	1.22;

1.22
date	2000.10.26.00.37.04;	author aaron;	state Exp;
branches;
next	1.21;

1.21
date	2000.08.18.17.54.17;	author jason;	state Exp;
branches;
next	1.20;

1.20
date	2000.04.28.18.01.43;	author turan;	state Exp;
branches;
next	1.19;

1.19
date	2000.03.19.19.25.29;	author aaron;	state Exp;
branches;
next	1.18;

1.18
date	2000.01.18.21.49.00;	author aaron;	state Exp;
branches;
next	1.17;

1.17
date	2000.01.10.03.28.35;	author deraadt;	state Exp;
branches;
next	1.16;

1.16
date	2000.01.10.03.10.50;	author deraadt;	state Exp;
branches;
next	1.15;

1.15
date	2000.01.10.03.06.45;	author deraadt;	state Exp;
branches;
next	1.14;

1.14
date	2000.01.10.03.00.55;	author todd;	state Exp;
branches;
next	1.13;

1.13
date	2000.01.10.02.32.55;	author todd;	state Exp;
branches;
next	1.12;

1.12
date	2000.01.10.02.25.05;	author deraadt;	state Exp;
branches;
next	1.11;

1.11
date	2000.01.10.02.16.51;	author deraadt;	state Exp;
branches;
next	1.10;

1.10
date	2000.01.10.02.10.04;	author todd;	state Exp;
branches;
next	1.9;

1.9
date	2000.01.02.15.48.01;	author todd;	state Exp;
branches;
next	1.8;

1.8
date	2000.01.02.06.34.30;	author itojun;	state Exp;
branches;
next	1.7;

1.7
date	2000.01.02.05.35.30;	author itojun;	state Exp;
branches;
next	1.6;

1.6
date	99.10.04.18.30.25;	author jason;	state Exp;
branches;
next	1.5;

1.5
date	99.09.02.18.11.22;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	99.09.01.21.23.30;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	99.09.01.18.07.35;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	99.09.01.05.16.50;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	99.09.01.05.07.54;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.65
log
@update the autoconfiguration section for ip6 to use "autoconf" rather
than "rtsol": the former is the new way to do things and showing two
ways to do this is just confusing;

ok bluhm
@
text
@.\"	$OpenBSD: hostname.if.5,v 1.64 2015/06/06 13:13:07 florian Exp $
.\"	$NetBSD: hosts.5,v 1.4 1994/11/30 19:31:20 jtc Exp $
.\"
.\" Copyright (c) 1983, 1991, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"     @@(#)hosts.5	8.2 (Berkeley) 12/11/93
.\"
.Dd $Mdocdate: June 6 2015 $
.Dt HOSTNAME.IF 5
.Os
.Sh NAME
.Nm hostname.if
.Nd interface-specific configuration files
.Sh DESCRIPTION
The
.Nm hostname.*\&
files contain information regarding the configuration of each network interface.
One file should exist for each interface that is to be configured, such as
.Pa hostname.fxp0
or
.Pa hostname.bridge0 .
A configuration file is not needed for lo0.
.Pp
The configuration information is expressed in a line-by-line packed format
which makes the most common cases simpler; those dense formats are described
below.
Any lines not matching these packed formats are passed directly to
.Xr ifconfig 8 .
The packed formats are converted using a somewhat inflexible parser and
the administrator should not expect magic \(em if in doubt study
.Xr ifconfig 8
and the
per-driver manual pages to see what arguments are permitted.
.Pp
Arguments containing either whitespace or single quote
characters must be double quoted.
For example:
.Bd -literal -offset indent
inet 10.0.0.1 255.255.255.0 10.0.0.255 description "Bob's uplink"
.Ed
.Pp
Each line is processed separately and in order.
For example:
.Bd -literal -offset indent
nwid mynwid
wpakey mywpakey
dhcp
.Ed
.Pp
would run ifconfig to set the nwid of the interface, run it again to set the wpakey of the interface, and then start
.Xr dhclient 8 .
.Sh STATIC ADDRESS CONFIGURATION
The following packed formats are valid for configuring network
interfaces with static addresses:
.Pp
Regular IPv4 network setup:
.Bd -ragged -offset indent
.Li inet
.Op Li alias
.Va addr
.Va netmask
.Va broadcast_addr
.Va options
.br
.Li dest
.Va dest_addr
.Ed
.Pp
Regular IPv6 network setup:
.Bd -ragged -offset indent
.Li inet6
.Op Li alias
.Va addr
.Va prefixlen
.Va options
.br
.Li dest
.Va dest_addr
.Ed
.Pp
Other network setup:
.Bd -ragged -offset indent
.Va addr_family
.Va options
.Ed
.Pp
A typical file contains only one line, but more extensive files are possible,
for example:
.Bd -literal -offset 1n
inet 10.0.1.12 255.255.255.0 10.0.1.255 media 100baseTX description Uplink
inet alias 10.0.1.13 255.255.255.255 10.0.1.13
inet alias 10.0.1.14 255.255.255.255 NONE
inet alias 10.0.1.15 255.255.255.255
inet alias 10.0.1.16 0xffffffff
# This is an example comment line.
inet6 alias fec0::1 64
inet6 alias fec0::2 64 anycast
!route add 65.65.65.65 10.0.1.13
up
.Ed
.Pp
The above formats have the following field values:
.Bl -tag -width indent -offset indent
.It Va addr_family
The address family of the interface, generally
.Dq inet
or
.Dq inet6 .
.It Li alias
The literal string
.Dq alias
if this is an additional network address for the interface.
.It Va addr
The optional address that belongs to the interface, such as
190.191.192.1 or fe80:2::1.
It is also feasible to use a hostname as specified in
.Pa /etc/hosts .
It is recommended that an address be used instead of symbolic information,
since the latter might activate
.Xr resolver 3
library routines.
.Pp
If no address is specified, the
.Va netmask ,
.Va broadcast_addr ,
.Li dest ,
and
.Va dest_addr
options are invalid and will be ignored.
.It Va netmask
The optional network mask for the interface, e.g.,
255.255.255.0.
If
.Va addr
is specified but
.Va netmask
is not, the classful mask based on
.Va addr
is used.
.It Va broadcast_addr
The optional broadcast address for the interface, e.g.,
190.191.192.255.
The word
.Dq NONE
can also be specified in order to configure the broadcast address based
on the
.Va netmask .
The
.Va netmask
option must be present in order to use this option.
.It Va options
Miscellaneous options to set on the interface, e.g.,
.Dq media 100baseTX mediaopt full-duplex .
Valid options for a particular interface type can be found in
.Xr ifconfig 8 .
When used, the
.Va netmask
and
.Va broadcast_addr
options must also be present.
.It Li dest
If the interface needs a destination address set, this is the literal text
.Dq dest .
As shown in the example, this declaration should start on a separate line.
.It Va dest_addr
The destination address to be set on the interface, such as
190.191.192.2.
It is also feasible to use a hostname as specified in
.Pa /etc/hosts .
It is recommended that an address be used instead of symbolic information
which might activate
.Xr resolver 3
library routines.
.It Va prefixlen
The prefixlen number, or number of bits in the netmask, to be set on
the interface, such as 64.
.It Li #
Comments are allowed.
Anything following a comment character is treated as a comment.
.It Li \&! Ns Ar command
Arbitrary shell commands can be executed using this directive, as
long as they are available in the single-user environment (for
instance,
.Pa /bin
or
.Pa /sbin ) .
Useful for doing interface-specific configuration such as
setting up custom routes using
.Xr route 8
or establishing tunnels using
.Xr ifconfig 8 .
It is worth noting that
.Dq \e$if
in a command line will be replaced by the interface name.
.El
.Sh DYNAMIC ADDRESS CONFIGURATION
The following packed formats are valid for configuring network
interfaces with dynamic addresses:
.Pp
A DHCP-configured network interface setup consists of
.Bd -ragged -offset indent
.Li dhcp
.Va options
.Ed
.Pp
The above format has the following field values:
.Bl -tag -width "optionsXXX" -offset indent
.It Li dhcp
The literal string
.Dq dhcp
if the interface is to be configured using DHCP.
See
.Xr dhclient 8
and
.Xr dhclient.conf 5
for more details.
.It Va options
Miscellaneous options to set on the interface, e.g.,
.Dq media 100baseTX mediaopt full-duplex .
Valid options for a particular interface type can be found in
.Xr ifconfig 8 .
.El
.Pp
IPv6 stateless address autoconfiguration:
.Bd -ragged -offset indent
.Li inet6 autoconf
.Va options
.Ed
.Pp
The above format has the following field values:
.Bl -tag -width "optionsXXX" -offset indent
.It Li inet6
The address family.
.It Li autoconf
The literal string
.Dq autoconf ,
to configure the interface
using IPv6 stateless address autoconfiguration (SLAAC).
.It Va options
Miscellaneous options to set on the interface, e.g.,
.Dq media 100baseTX mediaopt full-duplex .
Valid options for a particular interface type can be found in
.Xr ifconfig 8 .
.El
.Sh BRIDGE INTERFACE CONFIGURATION
If the network interface is a bridge, the options described in
the bridge section of the
.Xr ifconfig 8
manual page apply.
.Pp
For example:
.Bd -literal -offset indent
add fxp0
add ep1
-learn fxp0
#
!ipsecctl -F
#
static fxp0 8:0:20:1e:2f:2b
up    # and finally enable it
.Ed
.Sh FILES
.Bl -tag -width "/etc/hostname.XXXXXX"
.It Pa /etc/hostname.XXX
Interface-specific configuration files.
.El
.Sh SEE ALSO
.Xr hosts 5 ,
.Xr dhclient 8 ,
.Xr ifconfig 8 ,
.Xr netstart 8 ,
.Xr rc 8
@


1.64
log
@Allow rtsol keyword in hostname.if(5) with net.inet6.ip6.forwarding=1.
"inet6 autoconf" was working before and rtsol should behave the same.
OK phessler
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.63 2015/03/31 12:47:25 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: March 31 2015 $
d232 1
a232 1
.Bl -tag -width indent -offset indent
d251 1
a251 1
.Li rtsol
d256 4
a259 2
.Bl -tag -width indent -offset indent
.It Li rtsol
d261 3
a263 3
.Dq rtsol
if the interface is to be configured using
IPv6 stateless address autoconfiguration.
@


1.63
log
@no more lmccontrol;
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.62 2014/07/12 16:59:06 henning Exp $
d33 1
a33 1
.Dd $Mdocdate: July 12 2014 $
a261 9
This should be used on single interface hosts only,
since the IPv6 specifications are silent about the
behavior on multi-interface hosts.
Also note that the kernel must be configured as a host (i.e. non-router).
Add the following line into
.Xr sysctl.conf 5 :
.Bd -literal -offset indent
net.inet6.ip6.forwarding=0
.Ed
@


1.62
log
@jmc points out this babbled about the accept_rtadvd sysctl which is no more
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.60 2013/01/18 21:48:43 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: July 14 2013 $
a302 1
.Xr lmccontrol 8 ,
@


1.61
log
@merge the relevant bits of dhcp(8) into dhclient(8) and dhcpd(8),
removing traces of dhcp(8)... i'm about to remove that file, since
it's essentially useless. holding off for a little, in case my commit
is greeted with howls.

help/ok krw
@
text
@d33 1
a33 1
.Dd $Mdocdate: January 18 2013 $
d265 2
a266 3
Also note that the kernel must be configured to accept IPv6
router advertisement, and configured as a host (i.e. non-router).
Add the following lines into
a269 1
net.inet6.ip6.accept_rtadv=1
@


1.60
log
@command-line (adj.) -> command line (n.);
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.59 2012/12/27 08:26:43 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: December 27 2012 $
d303 1
a303 1
.Xr dhcp 8 ,
@


1.59
log
@add a FILES section; requested by Maximo Pech
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.58 2012/11/26 21:35:20 krw Exp $
d33 1
a33 1
.Dd $Mdocdate: November 26 2012 $
d205 1
a205 1
.It Li \&! Ns Ar command-line
@


1.58
log
@Make it clear that lines are processed in the given order and provide an
example using dhcp, a common use case.

ok sthen@@ jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.57 2012/11/26 17:42:05 krw Exp $
d296 5
@


1.57
log
@The install scripts no longer create hostname.if files with 'dhcp
NONE NONE NONE'. It's just 'dhcp'.
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.56 2011/07/08 01:30:26 deraadt Exp $
d33 1
a33 1
.Dd $Mdocdate: July 8 2011 $
d66 11
@


1.56
log
@make it clear that !commands are run in the single-user environment,
so only use safe command paths like /sbin and /bin; /usr may not be
there...
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.55 2009/12/10 22:04:59 deraadt Exp $
d33 1
a33 1
.Dd $Mdocdate: December 10 2009 $
a235 9
The
.Ox
installation script will create
.Nm hostname.if
with options of
.Dq NONE NONE NONE
when DHCP configuration is chosen.
This is the same as specifying just
.Dq dhcp .
@


1.55
log
@clarify the new rules of hostname.if files.  A few special formats are
accepted which are simpler for people (or install scripts) to generate.
Anything else is passed to ifconfig, unmolested.
ok jmc todd
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.54 2009/12/10 00:51:55 todd Exp $
d195 6
a200 1
Arbitrary shell commands can be executed using this directive.
@


1.54
log
@o stop reordering ifconfig arguments (e.g. after 'up ..')
o only stop processing if inet or inet6 lines are malformed
o everything not a specially handled bit is passed to ifconfig unmangled
noticed by several after the move from bridgename.bridge0 -> hostname.bridge0
prodded by deraadt@@, tested by and feedback from several
man page bits 'look fine' jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.53 2009/11/22 22:01:55 deraadt Exp $
d33 1
a33 1
.Dd $Mdocdate: November 22 2009 $
d47 12
a58 1
However, a configuration file is not needed for lo0.
d67 2
a68 4
The following three
.Nm hostname.*\&
formats are valid for configuring network interfaces with static
addresses:
d112 2
d206 2
a207 4
The following
.Nm hostname.*\&
formats are valid for configuring network interfaces with dynamic
addresses:
a214 5
For example:
.Bd -literal -offset indent
dhcp media 100baseTX mediaopt full-duplex
.Ed
.Pp
a265 21
.It Va options
Miscellaneous options to set on the interface, e.g.,
.Dq media 100baseTX mediaopt full-duplex .
Valid options for a particular interface type can be found in
.Xr ifconfig 8 .
.El
.Sh ADDRESS-LESS CONFIGURATION
A network interface that does not require an IP address
(such as
.Xr bridge 4
member interfaces and interfaces to be used with
.Xr ppp 8
and
.Xr pppoe 8 )
consists of
.Bd -ragged -offset indent
.Va options
.Ed
.Pp
The above format has the following field values:
.Bl -tag -width indent -offset indent
@


1.53
log
@Move information describing the bridge and brconfig behaviour into
the relevant manual pages.  Functionality is described in the (4)
pages, controlling the functionality in ifconfig(8), and the hostname.if
gains the old bridgename.if(5) functionality.
ok claudio jmc
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.52 2008/01/31 20:00:08 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: January 31 2008 $
a277 1
.Va state
a282 5
.It Va state
The administrative state in which to put the interface, either
.Dq up
or
.Dq down .
@


1.52
log
@use a hyphen for "interface-specific" as a compound term. this is
not a hard and fast rule (actually it's a form i abuse) but
hostname.if.5 currently uses two conflicting forms and this keeps
it consistent;
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.51 2008/01/03 11:16:45 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: January 3 2008 $
d37 1
a37 2
.Nm hostname.if ,
.Nm bridgename.if
a41 2
and
.Nm bridgename.*\&
d46 1
a46 1
.Pa bridgename.bridge0 .
d296 4
a299 11
The final file format only applies to
.Nm bridgename.bridge*
files.
A bridge interface setup consists of
.Bd -ragged -offset indent
.Va brconfig-arguments
.br
.Va brconfig-arguments
.br
\&...
.Ed
a311 13
.Pp
The options are as follows:
.Bl -tag -width indent -offset indent
.It Va brconfig-arguments
.Xr brconfig 8
is called for each successive line.
Comments starting with
.Ql #
and commands to be executed
prefixed by
.Ql \&!
are permitted.
.El
a313 1
.Xr brconfig 8 ,
@


1.51
log
@ipv6 can handle "dest" lines too; ok marc
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.50 2007/05/31 19:19:58 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: May 31 2007 $
d188 1
a188 1
Useful for doing interface specific configuration such as
@


1.50
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.49 2007/01/10 16:17:23 tom Exp $
d33 1
a33 1
.Dd $Mdocdate$
d66 1
a66 1
.Va addr_family
d79 1
a79 1
.Va addr_family
d84 3
@


1.49
log
@Add a sentence to document the use of the "alias" literal.

ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.47 2006/12/20 09:12:32 jmc Exp $
d33 1
a33 1
.Dd September 2, 1999
@


1.48
log
@"alias" is literal text, not an argument name.

ok jmc@@
@
text
@d112 4
@


1.47
log
@remove a useless sentence;
ok deraadt ray
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.46 2006/06/26 07:41:42 jmc Exp $
d67 1
a67 1
.Op Va alias
d80 1
a80 1
.Op Va alias
@


1.46
log
@remove wicontrol stuff;
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.45 2006/05/26 04:02:59 deraadt Exp $
a50 1
Note that multiple entries can be used per configuration file.
@


1.45
log
@let us not talk about ipsecadm and vpn anymore; ok reyk
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.44 2006/05/23 13:38:49 jmc Exp $
d101 1
a103 2
# This is an example comment line.
!wicontrol \e$if -t 2  # Set to 2Mbps
d182 1
a182 2
Useful for doing interface specific configuration using commands like
.Xr wicontrol 8 ,
d184 1
a184 1
.Xr route 8 ,
d336 1
a336 2
.Xr rc 8 ,
.Xr wicontrol 8
@


1.44
log
@one more spppcontrol removal, and small tweak;
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.43 2006/01/09 21:34:57 jsg Exp $
d313 1
a313 1
!ipsecadm flush
@


1.43
log
@Remove reference to ancontrol, reminded by deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.42 2005/06/10 00:01:12 joel Exp $
d254 1
a254 1
router advertisement, and configured as a host (ie. non-router).
a338 1
.Xr spppcontrol 8 ,
@


1.42
log
@- clarify when and how to use media options
- break into distinct sections
- some wording/formatting changes

input from nick@@; input and ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.41 2005/04/12 13:27:11 jmc Exp $
a332 1
.Xr ancontrol 8 ,
@


1.41
log
@note that args w/ whitespace and single quotes must be double quoted;
requested by alexey e. suslikov;
ok henning@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.40 2005/04/12 12:05:10 jmc Exp $
d59 2
a60 2
.Pp
The following three formats are valid for
d62 2
a63 1
files:
d65 1
a65 1
Regular ipv4 network setup:
d78 1
a78 1
Regular ipv6 network setup:
d134 7
d143 9
a151 1
190.191.192.255
d153 1
a153 1
Optional miscellaneous options to set on the interface, e.g.,
d155 7
d193 5
d222 1
a222 1
Optional miscellaneous options to set on the interface, e.g.,
d224 11
d262 1
a262 1
Optional miscellaneous options to set on the interface, e.g.,
d264 2
d267 3
a269 2
.Pp
An addressless network interface setup (useful for
d277 1
a277 1
.Li up
d283 2
a284 2
.It Li up
The literal string
d286 2
a287 1
if the interface is to be simply brought up.
d289 1
a289 1
Optional miscellaneous options to set on the interface, e.g.,
d291 2
d294 1
a294 1
.Pp
@


1.40
log
@e.g., not i.e.;
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.39 2004/07/26 08:53:29 jmc Exp $
d52 7
@


1.39
log
@various tweaks;
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.38 2004/05/30 21:36:30 jmc Exp $
d124 1
a124 1
The optional network mask for the interface, i.e.,
d127 1
a127 1
The optional broadcast address for the interface, i.e.,
d130 1
a130 1
Optional miscellaneous options to set on the interface, i.e.,
d187 1
a187 1
Optional miscellaneous options to set on the interface, i.e.,
@


1.38
log
@adjust display offset to avoid linewrap;
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.37 2004/05/29 17:54:46 jcs Exp $
d42 1
a42 1
.Nm hostname.*
d44 1
a44 1
.Nm bridgename.*
d54 2
a55 2
.Nm hostname.*
files.
d108 1
a108 1
190.191.192.1 or fe80:2::1 .
d170 1
a170 1
For example,
d255 1
a255 1
For example,
@


1.37
log
@introduce SIOCSIFDESCR and SIOCGIFDESCR to maintain interface
descriptions, configurable with ifconfig

help from various, ok deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.36 2004/05/26 14:19:55 otto Exp $
d87 1
a87 1
.Bd -literal -offset indent
@


1.36
log
@Mention ppp(8) in addition to pppoe(8). Prompted by Daniel Polak.
ok henning@@ jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.35 2004/02/09 19:21:51 espie Exp $
d88 1
a88 1
inet 10.0.1.12 255.255.255.0 10.0.1.255 media 100baseTX
@


1.35
log
@help makewhatis produce correct entries.
okay deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.34 2003/09/02 18:37:08 jmc Exp $
d223 2
@


1.34
log
@escape punctuation;
ok deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.33 2003/06/06 13:28:13 jmc Exp $
d37 1
a37 2
.Nm hostname.if
and
@


1.33
log
@- section reorder
- macro fixes
- kill whitespace at EOL
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.32 2003/06/02 23:30:14 millert Exp $
d152 1
a152 1
.It Li ! Ns Ar command-line
d275 1
a275 1
.Ql !
@


1.32
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.31 2003/03/10 09:26:27 deraadt Exp $
d106 1
a106 1
.Dq inet6.
@


1.31
log
@fix offset; from jmc
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.30 2003/03/10 09:16:06 deraadt Exp $
d15 1
a15 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
@


1.30
log
@real pretty now
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.29 2002/09/26 22:12:43 miod Exp $
d63 1
a63 1
.Bd -ragged -offset xxxx
d76 1
a76 1
.Bd -ragged -offset xxxx
d85 1
a85 1
.Bd -ragged -offset xxxx
d92 1
a92 1
.Bd -literal -offset xxxx
d105 1
a105 1
.Bl -tag -width indent -offset xxxx
d170 1
a170 1
.Bd -ragged -offset xxxx
d176 1
a176 1
.Bd -literal -offset xxxx
d181 1
a181 1
.Bl -tag -width indent -offset xxxx
d197 1
a197 1
.Bd -ragged -offset xxxx
d203 1
a203 1
.Bl -tag -width indent -offset xxxx
d216 1
a216 1
.Bd -literal -offset xxxx
d230 1
a230 1
.Bd -ragged -offset xxxx
d236 1
a236 1
.Bl -tag -width indent -offset xxxx
d250 1
a250 1
.Bd -ragged -offset xxxx
d259 1
a259 1
.Bd -literal -offset xxxx
d271 1
a271 1
.Bl -tag -width indent -offset xxxx
@


1.29
log
@Add a few supposedly useful xrefs, some from mickey@@

ok deraadt@@ mickey@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.28 2002/06/03 16:41:36 miod Exp $
d63 10
a72 3
.Bd -literal -offset xxxx
.Va addr_family [ alias ] addr netmask broadcast_addr options
.Li dest Va dest_addr
d76 6
a81 2
.Bd -literal -offset xxxx
.Va addr_family [ alias ] addr prefixlen options
d85 3
a87 2
.Bd -literal -offset xxxx
.Va addr_family Va options
d116 2
a117 2
It is recommended that an address be used instead of symbolic information
which might activate
d153 1
a153 1
.It Va #
d156 1
a156 1
.It Va ! Ar command-line
d170 3
a172 3
.Pp
.Bd -literal -offset xxxx
.Li dhcp Va options
d197 3
a199 3
.Pp
.Bd -literal -offset xxxx
.Li rtsol Va options
d217 2
a218 2
.Li net.inet6.ip6.forwarding=0
.Li net.inet6.ip6.accept_rtadv=1
d230 3
a232 3
.Pp
.Bd -literal -offset xxxx
.Li up Va options
d250 1
a250 2
.Pp
.Bd -literal -offset xxxx
d252 1
d254 1
@


1.28
log
@Xref brconfig(8).
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.27 2002/02/08 00:56:41 deraadt Exp $
d271 1
d275 5
a279 1
.Xr rc 8
@


1.27
log
@fix some japanese...
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.26 2001/10/04 10:28:20 wilfried Exp $
d271 1
@


1.26
log
@e.g. and i.e. cleanup
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.25 2001/03/01 16:11:21 aaron Exp $
d197 5
a201 4
This should be used on single interface host only,
as IPv6 specifications are silent about the behavior on multi-interface case.
Also note that the kernel must be configured to accept
IPv6 router advertisement, and configured as host (non-router).
@


1.25
log
@A slew of share/ man page fixes; nordin@@cse.ogi.edu. These have been sitting
in my INBOX since Nov 6, 2000, probably forgot about them since the tree was
frozen at that time.
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.24 2001/01/10 22:17:10 jason Exp $
d208 1
a208 1
Optional miscellaneous options to set on the interface, i.e.,
d229 1
a229 1
Optional miscellaneous options to set on the interface, i.e.,
@


1.24
log
@support !command in bridgename.if files, too
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.23 2000/11/20 08:00:03 deraadt Exp $
d102 1
a102 1
It is also feasable to use a hostname as specified in
d128 1
a128 1
As shown in the example, this declaration should start on a seperate line.
d132 1
a132 1
It is also feasable to use a hostname as specified in
@


1.23
log
@various Xr fixes; nordin@@cse.ogi.edu
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.22 2000/10/26 00:37:04 aaron Exp $
d250 2
d263 3
@


1.22
log
@Some share/man fleshing.
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.21 2000/08/18 17:54:17 jason Exp $
d151 1
a151 1
.Xr gifconfig 8 .
d215 1
a215 1
.Xr pppoe 4 )
@


1.21
log
@simple 'up' configuration is nice for interfaces used with pppoe as well.
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.20 2000/04/28 18:01:43 turan Exp $
d50 2
a51 4
files contain information regarding
the configuration of each network interface.
One file should exist for each interface that is to be configured,
such as
d126 1
a126 2
If the interface needs a destination address set, this is
the literal text
d128 1
a128 2
As shown in the example, this declaration should start on a seperate
line.
d261 1
a261 1
are permitted
@


1.20
log
@typo.  hostname.* should be hostname.if.
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.19 2000/03/19 19:25:29 aaron Exp $
d218 3
a220 1
member interfaces) consists of
@


1.19
log
@Various cleanups.
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.18 2000/01/18 21:49:00 aaron Exp $
d41 1
a41 1
.Nm hostname.*
d43 1
a43 1
.Nm bridgename.*
@


1.18
log
@Repair duplicate word occurences; (as found by a Perl script sent to us from
Tom Christiansen <tchrist@@perl.com>).
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.17 2000/01/10 03:28:35 deraadt Exp $
d146 2
a147 2
Comments are allowed.  Anything following a comment 
character is treated as a comment.
d260 4
a263 2
is called for each successive line.  Comments starting with # are
permitted.
@


1.17
log
@dest should be on a seperate line
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.16 2000/01/10 03:10:50 deraadt Exp $
d128 1
a128 1
If the interface needs a destination address address set, this is
@


1.16
log
@more fluff to please newbies
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.15 2000/01/10 03:06:45 deraadt Exp $
d127 1
a127 1
.It Li Va dest
d131 2
@


1.15
log
@clarify greatly
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.14 2000/01/10 03:00:55 todd Exp $
d80 2
a81 1
For example,
@


1.14
log
@move `!' and `#' into their own section; fix dest; rm excess example
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.13 2000/01/10 02:32:55 todd Exp $
a81 2
# This is an example comment line.
# ipv4 lines
a86 1
# ipv6 lines
d89 1
d145 9
a153 4
.It Va !
Arbitrary commands allow interface specific configuration to
take place like setting wavelan parameters with 
.Xr wicontrol 8 .  It is worth note that using
d155 1
a155 1
will cause this value to be replaced by the interface name.
@


1.13
log
@clearly document comments and comment features
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.12 2000/01/10 02:25:05 deraadt Exp $
d58 1
a58 7
Note that multiple entries can be used per configuration file,
that we support comments (lines that begin with ``#''), and
arbitrary commands (lines that begin with ``!'').  Most of the
time it will be useful to use things like the network interface
name while using arbitrary commands, this can be accomplished
by placing ``\e$if'' at the appropriate place in the command.
There is an example below for clarity.
a91 3
# Below we set the mac address
# for a wavelan interface
!wicontrol \e$if -m C0:01:00:00:D4:d3
d128 1
a128 1
.It Li dest
d144 9
@


1.12
log
@nroff error
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.11 2000/01/10 02:16:51 deraadt Exp $
d58 7
a64 1
Note that multiple entries can be used per configuration file.
d88 2
d95 1
d98 4
a101 2
# comments are also possible
!wicontrol \e$if -t 2
@


1.11
log
@put the examples in the right place.  ! still needs documenting...
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.10 2000/01/10 02:10:04 todd Exp $
d97 3
a99 1
.Dq inet or inet6.
@


1.10
log
@document (through example) using hostname.* files to run arbitrary commands
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.9 2000/01/02 15:48:01 todd Exp $
a77 3
.Va # This is parsed as a comment
.Va # Below we set the mac address for a wi0 interface
.Va !wicontrol \e$if -n C0:01:00:00:D4:d3
d89 2
@


1.9
log
@fix so we don't loose words in the formatting; thanks aaron@@ for the explanation
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.8 2000/01/02 06:34:30 itojun Exp $
d78 3
@


1.8
log
@allow "options" after "rtsol".
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.7 2000/01/02 05:35:30 itojun Exp $
d66 1
a66 1
.Va addr_family Va [ alias ] Va addr Va netmask Va broadcast_addr Va options
d72 1
a72 1
.Va addr_family Va [ alias ] Va addr Va prefixlen Va options
@


1.7
log
@reflect multi-line and inet6 change from todd.
add description on "rtsol" (maybe too lengthy?)
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.6 1999/10/04 18:30:25 jason Exp $
d170 1
a170 1
.Li rtsol
d190 3
@


1.6
log
@document third case: 'up'
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.5 1999/09/02 18:11:22 aaron Exp $
d58 1
d64 1
a64 1
Regular network setup:
d66 1
a66 1
.Va addr_family Va addr Va netmask Va broadcast_addr Va options
d70 10
d83 6
d91 1
a91 1
The above format has the following field values:
d95 1
a95 1
.Dq inet .
d98 1
a98 1
190.191.192.1.
d135 3
d165 25
@


1.5
log
@Make it read a little better and add a SEE ALSO section.
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.4 1999/09/01 21:23:30 deraadt Exp $
d59 1
a59 1
The following two formats are valid for
d147 18
@


1.4
log
@make brconfig example atomic
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.3 1999/09/01 18:07:35 deraadt Exp $
d37 1
a37 1
.Dd December 11, 1993
d47 1
a47 1
.Nm
d57 1
a57 4
However, a configuration file is not needed for
.Dv lo0 .
.Pp
Three data formats are permitted for these files.
d59 1
d61 1
a61 1
files can accept the following two formats:
a63 1
.Pp
d97 1
a97 1
The optional network mask for the interface, ie.
d100 1
a100 1
The optional broadcast address for the interface, ie.
d103 1
a103 1
Optional miscellaneous options to set on the interface, ie.
d131 1
a131 1
The options are as follows:
d134 1
a134 1
The string
d143 1
a143 1
Optional miscellaneous options to set on the interface, ie.
d176 5
a180 1
.Pp
@


1.3
log
@support # characters in bridgename.* files; millert
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.2 1999/09/01 05:16:50 deraadt Exp $
a163 1
up
d167 3
@


1.2
log
@oops, described badly
@
text
@d1 1
a1 1
.\"	$OpenBSD: hostname.if.5,v 1.1 1999/09/01 05:07:54 deraadt Exp $
d174 2
a175 1
is called for each successive line.
@


1.1
log
@new pages
@
text
@d1 1
a1 1
.\"	$OpenBSD: hosts.5,v 1.7 1999/05/23 14:11:05 aaron Exp $
a156 1
.Va firstline
a171 3
.It Va firstline
The firstline of the bridge file contains a line like
.Dq up media auto .
@

