head	1.64;
access;
symbols
	OPENBSD_6_2_BASE:1.64
	OPENBSD_6_1:1.63.0.4
	OPENBSD_6_1_BASE:1.63
	OPENBSD_6_0:1.62.0.2
	OPENBSD_6_0_BASE:1.62
	OPENBSD_5_9:1.61.0.2
	OPENBSD_5_9_BASE:1.61
	OPENBSD_5_8:1.59.0.6
	OPENBSD_5_8_BASE:1.59
	OPENBSD_5_7:1.59.0.2
	OPENBSD_5_7_BASE:1.59
	OPENBSD_5_6:1.54.0.4
	OPENBSD_5_6_BASE:1.54
	OPENBSD_5_5:1.52.0.4
	OPENBSD_5_5_BASE:1.52
	OPENBSD_5_4:1.50.0.4
	OPENBSD_5_4_BASE:1.50
	OPENBSD_5_3:1.50.0.2
	OPENBSD_5_3_BASE:1.50
	OPENBSD_5_2:1.49.0.4
	OPENBSD_5_2_BASE:1.49
	OPENBSD_5_1_BASE:1.49
	OPENBSD_5_1:1.49.0.2
	OPENBSD_5_0:1.47.0.2
	OPENBSD_5_0_BASE:1.47
	OPENBSD_4_9:1.45.0.2
	OPENBSD_4_9_BASE:1.45
	OPENBSD_4_8:1.43.0.2
	OPENBSD_4_8_BASE:1.43
	OPENBSD_4_7:1.42.0.2
	OPENBSD_4_7_BASE:1.42
	OPENBSD_4_6:1.41.0.6
	OPENBSD_4_6_BASE:1.41
	OPENBSD_4_5:1.41.0.2
	OPENBSD_4_5_BASE:1.41
	OPENBSD_4_4:1.40.0.6
	OPENBSD_4_4_BASE:1.40
	OPENBSD_4_3:1.40.0.4
	OPENBSD_4_3_BASE:1.40
	OPENBSD_4_2:1.40.0.2
	OPENBSD_4_2_BASE:1.40
	OPENBSD_4_1:1.39.0.8
	OPENBSD_4_1_BASE:1.39
	OPENBSD_4_0:1.39.0.6
	OPENBSD_4_0_BASE:1.39
	OPENBSD_3_9:1.39.0.4
	OPENBSD_3_9_BASE:1.39
	OPENBSD_3_8:1.39.0.2
	OPENBSD_3_8_BASE:1.39
	OPENBSD_3_7:1.38.0.2
	OPENBSD_3_7_BASE:1.38
	OPENBSD_3_6:1.35.0.2
	OPENBSD_3_6_BASE:1.35
	OPENBSD_3_5:1.33.0.4
	OPENBSD_3_5_BASE:1.33
	OPENBSD_3_4:1.33.0.2
	OPENBSD_3_4_BASE:1.33
	OPENBSD_3_3:1.24.0.2
	OPENBSD_3_3_BASE:1.24
	OPENBSD_3_2:1.19.0.2
	OPENBSD_3_2_BASE:1.19
	OPENBSD_3_1:1.16.0.2
	OPENBSD_3_1_BASE:1.16
	OPENBSD_3_0:1.14.0.2
	OPENBSD_3_0_BASE:1.14
	OPENBSD_2_9:1.5.0.2
	OPENBSD_2_9_BASE:1.5
	OPENBSD_2_8:1.3.0.2
	OPENBSD_2_8_BASE:1.3;
locks; strict;
comment	@.\" @;


1.64
date	2017.07.13.19.16.33;	author jmc;	state Exp;
branches;
next	1.63;
commitid	JpuOPPFrvYnLU8Rv;

1.63
date	2016.08.19.10.57.24;	author danj;	state Exp;
branches;
next	1.62;
commitid	v5PhTHpnVOWwgbHn;

1.62
date	2016.03.30.06.58.06;	author jmc;	state Exp;
branches;
next	1.61;
commitid	nFeMLhYWGqPPjE4B;

1.61
date	2015.10.01.20.35.55;	author jmc;	state Exp;
branches;
next	1.60;
commitid	ew3jjCYH0OZMnCfz;

1.60
date	2015.09.24.13.24.59;	author sobrado;	state Exp;
branches;
next	1.59;
commitid	37AHetHSzSHpzNqB;

1.59
date	2015.02.11.04.03.40;	author tedu;	state Exp;
branches;
next	1.58;
commitid	SU34AdV6OHsgNiKS;

1.58
date	2015.01.16.17.20.24;	author schwarze;	state Exp;
branches;
next	1.57;
commitid	pN7rqU7E8gxKf0TG;

1.57
date	2014.11.02.05.36.10;	author tedu;	state Exp;
branches;
next	1.56;
commitid	gVSM1c6kn4lW9vZq;

1.56
date	2014.09.17.17.58.35;	author kspillner;	state Exp;
branches;
next	1.55;
commitid	JuEPe4PEA50JUrwf;

1.55
date	2014.08.11.12.57.14;	author jmc;	state Exp;
branches;
next	1.54;
commitid	r0UfbV3VrPOv5KTH;

1.54
date	2014.04.22.12.48.17;	author sobrado;	state Exp;
branches;
next	1.53;

1.53
date	2014.04.18.22.04.54;	author jmc;	state Exp;
branches;
next	1.52;

1.52
date	2014.02.18.22.54.14;	author tedu;	state Exp;
branches;
next	1.51;

1.51
date	2013.08.14.08.39.28;	author jmc;	state Exp;
branches;
next	1.50;

1.50
date	2012.11.25.21.18.13;	author jmc;	state Exp;
branches;
next	1.49;

1.49
date	2012.01.26.20.05.22;	author dhill;	state Exp;
branches;
next	1.48;

1.48
date	2011.09.03.22.59.07;	author jmc;	state Exp;
branches;
next	1.47;

1.47
date	2011.04.17.06.34.31;	author jmc;	state Exp;
branches;
next	1.46;

1.46
date	2011.04.01.19.13.58;	author jmc;	state Exp;
branches;
next	1.45;

1.45
date	2010.12.03.12.39.19;	author millert;	state Exp;
branches;
next	1.44;

1.44
date	2010.09.30.21.00.47;	author sthen;	state Exp;
branches;
next	1.43;

1.43
date	2010.03.26.19.30.40;	author jmc;	state Exp;
branches;
next	1.42;

1.42
date	2010.01.03.14.31.01;	author schwarze;	state Exp;
branches;
next	1.41;

1.41
date	2008.12.27.19.18.57;	author blambert;	state Exp;
branches;
next	1.40;

1.40
date	2007.05.31.19.19.58;	author jmc;	state Exp;
branches;
next	1.39;

1.39
date	2005.04.28.06.36.02;	author biorn;	state Exp;
branches;
next	1.38;

1.38
date	2005.03.12.12.21.08;	author jmc;	state Exp;
branches;
next	1.37;

1.37
date	2005.02.28.16.23.05;	author millert;	state Exp;
branches;
next	1.36;

1.36
date	2004.12.20.15.08.08;	author moritz;	state Exp;
branches;
next	1.35;

1.35
date	2004.08.10.15.53.31;	author millert;	state Exp;
branches;
next	1.34;

1.34
date	2004.08.09.21.15.09;	author millert;	state Exp;
branches;
next	1.33;

1.33
date	2003.09.05.19.28.04;	author jmc;	state Exp;
branches;
next	1.32;

1.32
date	2003.09.04.08.48.53;	author jmc;	state Exp;
branches;
next	1.31;

1.31
date	2003.07.25.09.30.54;	author jmc;	state Exp;
branches;
next	1.30;

1.30
date	2003.06.21.21.57.58;	author dhartmei;	state Exp;
branches;
next	1.29;

1.29
date	2003.06.06.13.28.13;	author jmc;	state Exp;
branches;
next	1.28;

1.28
date	2003.06.04.07.53.04;	author hin;	state Exp;
branches;
next	1.27;

1.27
date	2003.06.03.11.34.02;	author hin;	state Exp;
branches;
next	1.26;

1.26
date	2003.05.09.21.42.36;	author millert;	state Exp;
branches;
next	1.25;

1.25
date	2003.05.09.21.34.54;	author millert;	state Exp;
branches;
next	1.24;

1.24
date	2003.03.18.08.44.09;	author jmc;	state Exp;
branches;
next	1.23;

1.23
date	2003.03.11.08.11.08;	author jmc;	state Exp;
branches;
next	1.22;

1.22
date	2003.03.06.20.40.35;	author jmc;	state Exp;
branches;
next	1.21;

1.21
date	2003.01.19.21.02.15;	author deraadt;	state Exp;
branches;
next	1.20;

1.20
date	2002.12.09.00.45.37;	author millert;	state Exp;
branches;
next	1.19;

1.19
date	2002.07.03.23.28.49;	author miod;	state Exp;
branches;
next	1.18;

1.18
date	2002.06.13.23.22.17;	author millert;	state Exp;
branches;
next	1.17;

1.17
date	2002.05.06.23.34.33;	author millert;	state Exp;
branches;
next	1.16;

1.16
date	2002.03.13.22.30.11;	author marc;	state Exp;
branches;
next	1.15;

1.15
date	2002.02.12.02.57.31;	author hugh;	state Exp;
branches;
next	1.14;

1.14
date	2001.10.05.14.45.54;	author mpech;	state Exp;
branches;
next	1.13;

1.13
date	2001.08.20.05.57.55;	author mpech;	state Exp;
branches;
next	1.12;

1.12
date	2001.08.03.15.21.16;	author mpech;	state Exp;
branches;
next	1.11;

1.11
date	2001.08.02.22.07.24;	author hugh;	state Exp;
branches;
next	1.10;

1.10
date	2001.06.27.21.32.23;	author millert;	state Exp;
branches;
next	1.9;

1.9
date	2001.06.24.17.20.22;	author millert;	state Exp;
branches;
next	1.8;

1.8
date	2001.06.19.16.21.48;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	2001.06.18.21.09.24;	author millert;	state Exp;
branches;
next	1.6;

1.6
date	2001.05.29.21.35.44;	author millert;	state Exp;
branches;
next	1.5;

1.5
date	2000.11.27.05.59.49;	author millert;	state Exp;
branches;
next	1.4;

1.4
date	2000.11.20.08.00.03;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	2000.10.26.00.37.04;	author aaron;	state Exp;
branches;
next	1.2;

1.2
date	2000.08.20.19.11.01;	author millert;	state Exp;
branches;
next	1.1;

1.1
date	2000.08.20.18.37.21;	author millert;	state Exp;
branches;
next	;


desc
@@


1.64
log
@man pages with pseudo synopses which list filenames end up creating
very ugly output in man -k; after some discussion with ingo, we feel
the simplest fix is to remove such SYNOPSIS sections: the info is hardly
helpful at page top, is contained already in FILES, and there are
sufficiently few that just zapping them is simple;

ok schwarze, who also helpfully ran things through a build to check
output;
@
text
@.\"
.\" Copyright (c) 1995,1996,1997 Berkeley Software Design, Inc.
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by Berkeley Software Design,
.\"	Inc.
.\" 4. The name of Berkeley Software Design, Inc.  may not be used to endorse
.\"    or promote products derived from this software without specific prior
.\"    written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY BERKELEY SOFTWARE DESIGN, INC. ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL BERKELEY SOFTWARE DESIGN, INC. BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\" $OpenBSD: login.conf.5,v 1.63 2016/08/19 10:57:24 danj Exp $
.\" BSDI $From: login.conf.5,v 2.20 2000/06/26 14:50:38 prb Exp $
.\"
.Dd $Mdocdate: August 19 2016 $
.Dt LOGIN.CONF 5
.Os
.Sh NAME
.Nm login.conf
.Nd login class capability database
.Sh DESCRIPTION
The
.Nm
file describes the various attributes of login classes.
A login class determines what styles of authentication are available
as well as session resource limits and environment setup.
While designed primarily for the
.Xr login 1
program,
it is also used by other programs, such as
.Xr ftpd 8 ,
to determine what means of authentication are available.
It is also used by programs which need to set up a user environment.
.Pp
A special record,
.Dq default ,
in
.Pa /etc/login.conf
is used for any user without a valid login class in
.Pa /etc/master.passwd .
.Pp
Sites with very large
.Pa /etc/login.conf
files may wish to create a database version of the file,
.Pa /etc/login.conf.db ,
for improved performance.
Using a database version for small files does not result in a
performance improvement.
To build
.Pa /etc/login.conf.db
from
.Pa /etc/login.conf
the following command may be used:
.Pp
.Dl # cap_mkdb /etc/login.conf
.Pp
Note that
.Xr cap_mkdb 1
must be run after each edit of
.Pa /etc/login.conf
to keep the database version in sync with the plain file.
.Sh CAPABILITIES
Refer to
.Xr getcap 3
for a description of the file layout.
All entries in the
.Nm
file are either boolean or use a
.Ql =
to separate the capability from the value.
The types are described after the capability table.
.Bl -column "approve-service" "program" "blowfish,8" "Description"
.It Sy Name Ta Sy Type Ta Sy Default Ta Sy Description
.\"
.It approve Ta program Ta "" Ta
Default program to approve login.
.\"
.Pp
.It approve- Ns Ar service Ta program Ta "" Ta
Program to approve login for
.Ar service .
.\"
.Pp
.It auth Ta list Ta Dv passwd Ta
Allowed authentication styles.
The first value is the default styles.
.\"
.Pp
.It auth- Ns Ar type Ta list Ta "" Ta
Allowed authentication styles for the authentication type
.Ar type .
.\"
.Pp
.It classify Ta program Ta "" Ta
Classify type of login.
.\"
.Pp
.It copyright Ta file Ta "" Ta
File containing additional copyright information.
.\"
.Pp
.It coredumpsize Ta size Ta "" Ta
Maximum coredump size limit.
.\"
.Pp
.It cputime Ta time Ta "" Ta
CPU usage limit.
.\"
.Pp
.It datasize Ta size Ta "" Ta
Maximum data size limit.
.\"
.Pp
.It expire-warn Ta time Ta Dv 2w Ta
If the user's account will expire within this length of time then
warn the user of this.
.\"
.Pp
.It filesize Ta size Ta "" Ta
Maximum file size limit.
.\"
.Pp
.It hushlogin Ta bool Ta Dv false Ta
Same as having a
.Pa $HOME/.hushlogin
file.
See
.Xr login 1 .
.\"
.Pp
.It ignorenologin Ta bool Ta Dv false Ta
Not affected by
.Pa nologin
files.
See
.Xr login 1 .
.\"
.Pp
.It localcipher Ta string Ta blowfish,a Ta
The cipher to use for encrypting passwords.
Refer to
.Xr crypt_newhash 3
for possible values.
.\"
.Pp
.It login-backoff Ta number Ta 3 Ta
After
.Ar login-backoff
unsuccessful login attempts during a single session,
.Xr login 1
will start sleeping a bit in between attempts.
.\"
.Pp
.It login-timeout Ta time Ta 300 Ta
Number of seconds before
.Xr login 1
times out at the password prompt.
Note that this setting is only valid for the
.Li default
record.
.\"
.Pp
.It login-tries Ta number Ta 10 Ta
Number of tries a user gets to successfully login before
.Xr login 1
closes the connection.
.\"
.Pp
.It stacksize Ta size Ta "" Ta
Maximum stack size limit.
.\"
.Pp
.It maxproc Ta number Ta "" Ta
Maximum number of processes.
.\"
.Pp
.It memorylocked Ta size Ta "" Ta
Maximum locked in core memory size limit.
.\"
.Pp
.It memoryuse Ta size Ta "" Ta
Maximum in core memoryuse size limit.
.\"
.Pp
.It minpasswordlen Ta number Ta 6 Ta
The minimum length a local password may be.
If a negative value or zero, no length restrictions are enforced.
Used by the
.Xr passwd 1
utility.
.\"
.Pp
.It nologin Ta file Ta "" Ta
If the file exists it will be displayed
and the login session will be terminated.
.\"
.Pp
.It openfiles Ta number Ta "" Ta
Maximum number of open file descriptors per process.
.\"
.Pp
.It password-dead Ta time Ta Dv 0 Ta
Length of time a password may be expired but not quite dead yet.
When set (for both the client and remote server machine when doing
remote authentication), a user is allowed to log in just one more
time after their password (but not account) has expired.
This allows a grace period for updating their password.
.\"
.Pp
.It password-warn Ta time Ta Dv 2w Ta
If the user's password will expire within this length of time then
warn the user of this.
.\"
.Pp
.It passwordcheck Ta program Ta "" Ta
An external program that checks the quality of the password.
The password is passed to the program on
.Pa stdin .
An exit code of 0 indicates that the quality of the password is
sufficient, an exit code of 1 signals that the password failed the check.
.\"
.Pp
.It passwordtime Ta time Ta "" Ta
The lifetime of a password in seconds, reset every time a user
changes their password.
When this value is exceeded the user will no longer be able to
login unless the
.Li password-dead
option has been specified.
Used by the
.Xr passwd 1
utility.
.\"
.Pp
.It passwordtries Ta number Ta 3 Ta
The number of times the
.Xr passwd 1
utility enforces a check on the password.
If 0, the new password will only be accepted if it passes the password
quality check.
.\"
.Pp
.It path Ta path Ta value of Dv _PATH_DEFPATH Ta
.br
Default search path.
See
.Pa /usr/include/paths.h .
.\"
.Pp
.It priority Ta number Ta "" Ta
Initial priority (nice) level.
.\"
.Pp
.It requirehome Ta bool Ta Dv false Ta
Require home directory to login.
.\"
.Pp
.It setenv Ta envlist Ta "" Ta
A list of environment variables and associated values to be set for the class.
.\"
.Pp
.It shell Ta program Ta "" Ta
Session shell to execute rather than the shell specified in the password file.
The
.Ev SHELL
environment variable will contain the shell specified in the password file.
.\"
.Pp
.It tc Ta string Ta "" Ta
Interpolate/expands records from corresponding
.Pa login.conf .
See
.Xr getcap 3 .
.\"
.Pp
.It term Ta string Ta Dv su Ta
Default terminal type if not able to determine from other means.
.\"
.Pp
.It umask Ta number Ta Dv 022 Ta
Initial umask.
Should always have a leading
.Li 0
to ensure octal interpretation.
See
.Xr umask 2 .
.\"
.Pp
.It vmemoryuse Ta size Ta "" Ta
Maximum virtual memoryuse size limit.
.\"
.Pp
.It welcome Ta file Ta Pa /etc/motd Ta
File containing welcome message.
.El
.Pp
The resource limit entries
.Va ( cputime , filesize , datasize , stacksize , coredumpsize ,
.Va memoryuse , memorylocked , maxproc ,
and
.Va openfiles )
actually specify both the maximum and current limits (see
.Xr getrlimit 2 ) .
The current limit is the one normally used, although the user is permitted
to increase the current limit to the maximum limit.
The maximum and current limits may be specified individually by appending a
.Va \-max
or
.Va \-cur
to the capability name (e.g.,
.Va openfiles-max
and
.Va openfiles-cur ) .
.Pp
.Ox
will never define capabilities which start with
.Li x-
or
.Li X- ,
these are reserved for external use (unless included through contributed
software).
.Pp
The argument types are defined as:
.Bl -tag -width programxx
.\"
.It envlist
A comma-separated list of environment variables of the form
.Ev variable Ns No = Ns value .
If no value is specified, the
.Sq =
is optional.
A
.Li ~
in the path name is expanded to the user's home directory
if it is at the end of a string or is followed by a slash
.Pq Sq /
or the user's login name.
A
.Li $
in the path name is expanded to the user's login name.
.\"
.It file
Path name to a text file.
.\"
.It list
A comma-separated list of values.
.\"
.It number
A number.
A leading
.Li 0x
implies the number is expressed in hexadecimal.
A leading
.Li 0
implies the number is expressed in octal.
Any other number is treated as decimal.
.\"
.It path
A space-separated list of path names.
Login name and directory are substituted as for
.Em envlist .
Additionally, a
.Li ~
is only expanded at the beginning of a path name.
.\"
.It program
A path name to program.
.\"
.It size
A
.Va number
which expresses a size.
By default, the size is specified in bytes.
It may have a trailing
.Li b ,
.Li k ,
.Li m ,
.Li g
or
.Li t
to indicate that the value is in 512-byte blocks,
kilobytes, megabytes, gigabytes, or terabytes, respectively.
.\"
.It time
A time in seconds.
A time may be expressed as a series of numbers which are added together.
Each number may have a trailing character to represent time units:
.Bl -tag -width xxx
.\"
.It y
Indicates a number of 365 day years.
.\"
.It w
Indicates a number of 7 day weeks.
.\"
.It d
Indicates a number of 24 hour days.
.\"
.It h
Indicates a number of 60 minute hours.
.\"
.It m
Indicates a number of 60 second minutes.
.\"
.It s
Indicates a number of seconds.
.El
.Pp
For example, to indicate 1 and 1/2 hours, the following string could be used:
.Li 1h30m .
.El
.\"
.Sh AUTHENTICATION
.Ox
uses
.Bx
Authentication, which is made up of a variety of
authentication styles.
The authentication styles currently provided are:
.Bl -tag -width lchpassxx
.\"
.It Li activ
Authenticate using an ActivCard token.
See
.Xr login_activ 8 .
.\"
.It Li chpass
Change user's password.
See
.Xr login_chpass 8 .
.\"
.It Li crypto
Authenticate using a CRYPTOCard token.
See
.Xr login_crypto 8 .
.\"
.It Li lchpass
Change user's local password.
See
.Xr login_lchpass 8 .
.\"
.It Li passwd
Request a password and check it against the password in the master.passwd file.
See
.Xr login_passwd 8 .
.\"
.It Li radius
Normally linked to another authentication type, contact the radius server
to do authentication.
See
.Xr login_radius 8 .
.\"
.It Li reject
Request a password and reject any request.
See
.Xr login_reject 8 .
.\"
.It Li skey
Send a challenge and request a response, checking it
with S/Key (tm) authentication.
See
.Xr login_skey 8 .
.\"
.It Li snk
Authenticate using a SecureNet Key token.
See
.Xr login_snk 8 .
.\"
.It Li token
Authenticate using a generic X9.9 token.
See
.Xr login_token 8 .
.\"
.It Li yubikey
Authenticate using a Yubico YubiKey token.
See
.Xr login_yubikey 8 .
.El
.Pp
Local authentication styles may be added by creating a login script
for the style (see below).
To prevent collisions with future official
.Bx
Authentication style names, all local style names should start with a dash (-).
Current plans are for all official
.Bx
Authentication style names to begin
with a lower case alphabetic character.
For example, if you have a new style you refer to as
.Li slick
then you should create an authentication script named
.Pa /usr/libexec/auth/login_-slick
using the style name
.Li -slick .
When logging in via the
.Xr login 1
program, the syntax
.Ar user Ns Li :-slick
would be used.
.Pp
Authentication requires several pieces of information:
.Bl -tag -width usernamexx
.\"
.It Ar class
The login class being used.
.It Ar service
The type of service requesting authentication.
The service type is used to determine what information the authentication
program can provide to the user and what information the user can provide
to the authentication program.
.Pp
The service type
.Li login
is appropriate for most situations.
Two other service types,
.Li challenge
and
.Li response ,
are provided for use by programs like
.Xr ftpd 8
and
.Xr radiusd 8 .
If no service type is specified,
.Li login
is used.
.It Ar style
The authentication style being used.
.It Ar type
The authentication type,
used to determine the available authentication styles.
.It Ar username
The name of the user to authenticate.
The name may contain an instance.
If the authentication style being used does not support such instances,
the request will fail.
.El
.Pp
The program requesting authentication must specify a username and an
authentication style.
(For example,
.Xr login 1
requests a username from the user.
Users may enter usernames of the form
.Dq user:style
to optionally specify the authentication style.)
The requesting program may also specify the type of authentication
that will be done.
Most programs will only have a single type, if any at all, i.e.,
.Xr ftpd 8
will always request the
.Li ftp
type authentication, and
.Xr su 1
will always request the
.Li su
type authentication.
The
.Xr login 1
utility is special in that it may select an authentication type based
on information found in the
.Pa /etc/ttys
file for the appropriate tty (see
.Xr ttys 5 ) .
.Pp
The class to be used is normally determined by the
.Li class
field in the password file (see
.Xr passwd 5 ) .
.Pp
The class is used to look up a corresponding entry in the
.Pa login.conf
file.
If an authentication type is defined and a value for
.Li auth- Ns Ar type
exists in that entry,
it will be used as a list of potential authentication styles.
If an authentication type is not defined, or
.Li auth- Ns Ar type
is not specified for the class,
the value of
.Li auth
is used as the list of available authentication styles.
.Pp
If the user did not specify an authentication style the first style
in the list of available styles is used.
If the user did specify an authentication style and the style is in the
list of available styles it will be used, otherwise the request is
rejected.
.Pp
For any given style, the program
.Pa /usr/libexec/auth/login_ Ns Va style
is used to perform the authentication.
The synopsis of this program is:
.Pp
.Li /usr/libexec/auth/login_ Ns Va style
.Op Fl v Va name=value
.Op Fl s Va service
.Va username class
.Pp
The
.Fl v
option is used to specify arbitrary information to the authentication
programs.
Any number of
.Fl v
options may be used.
The
.Xr login 1
program provides the following through the
.Fl v
option:
.Bl -tag -width remote_addrxxx
.It Li auth_type
The type of authentication to use.
.It Li fqdn
The hostname provided to login by the
.Fl h
option.
.It Li hostname
The name
.Xr login 1
will place in the utmp file
for the remote hostname.
.It Li local_addr
The local IP address given to
.Xr login 1
by the
.Fl L
option.
.It Li lastchance
Set to
.Dq yes
when a user's password has expired but the user is being given one last
chance to login and update the password.
.It Li login
This is a new login session (as opposed to a simple identity check).
.It Li remote_addr
The remote IP address given to
.Xr login 1
by the
.Fl R
option.
.It Li style
The style of authentication used for this user
(see approval scripts below).
.El
.Pp
The
.Xr su 1
program provides the following through the
.Fl v
option:
.Bl -tag -width remote_addrxxx
.It Li wheel
Set to either
.Dq yes
or
.Dq no
to indicate if the user is in group wheel when they are trying to become root.
Some authentication types require the user to be in group wheel when using
the
.Xr su 1
program to become super user.
.El
.Pp
When the authentication program is executed,
the environment will only contain the values
.Ev PATH=/bin:/usr/bin
and
.Ev SHELL=/bin/sh .
File descriptor 3 will be open for reading and writing.
The authentication program should write one or more of the following
strings to this file descriptor:
.Bl -tag -width authorize
.\"
.It Li authorize
The user has been authorized.
.\"
.It Li authorize secure
The user has been authorized and root should be allowed to
login even if this is not a secure terminal.
This should only be sent by authentication styles that are secure
over insecure lines.
.\"
.It Li reject
Authorization is rejected.
This overrides any indication that the user was authorized (though
one would question the wisdom in sending both a
.Va reject
and an
.Va authorize
command).
.\"
.It Li reject challenge
Authorization was rejected and a challenge has been made available
via the value
.Li challenge .
.\"
.It Li reject silent
Authorization is rejected, but no error messages should be generated.
.\"
.It Li remove Va file
If the login session fails for any reason, remove
.Va file
before termination.
.\"
.It Li setenv Va name Va value
If the login session succeeds, the environment variable
.Va name
should be set to the specified
.Va value .
.\"
.It Li unsetenv Va name
If the login session succeeds, the environment variable
.Va name
should be removed.
.\"
.It Li value Va name Va value
Set the internal variable
.Va name
to the specified
.Va value .
The
.Va value
should only contain printable characters.
Several \e sequences may be used to introduce non printing characters.
These are:
.Bl -tag -width indent
.It Li \en
A newline.
.It Li \er
A carriage return.
.It Li \et
A tab.
.It Li \e Ns Va xxx
The character represented by the octal value
.Va xxx .
The value may be one, two, or three octal digits.
.It Li \e Ns Va c
The string is replaced by the value of
.Va c .
This allows quoting an initial space or the \e character itself.
.El
.Pp
The following values are currently defined:
.Bl -tag -width indent
.It Li challenge
See section on challenges below.
.It Li errormsg
If set, the value is the reason authentication failed.
The calling program may choose to display this when rejecting the user, but
display is not required.
.El
.El
.Pp
In order for authentication to be successful,
the authentication program must exit with a value of 0 as well
as provide an
.Li authorize
or
.Li "authorize root"
statement on file descriptor 3.
.Pp
An authentication program must not assume it will be called as root,
nor must it assume it will not be called as root.
If it needs special permissions to access files it should be setuid or
setgid to the appropriate user/group.
See
.Xr chmod 1 .
.Sh CHALLENGES
When an authentication program is called with a service of
.Li challenge
it should do one of three things:
.Pp
If this style of authentication supports challenge response
it should set the internal variable
.Li challenge
to be the appropriate challenge for the user.
This is done by the
.Li value
command listed above.
The program should also issue a
.Li reject challenge
and then exit with a 0 status.
See the section on responses below.
.Pp
If this style of authentication does not support challenge response,
but does support the
.Li response
service (described below) it should issue
.Li reject silent
and then exit with a 0 status.
.Pp
If this style of authentication does not support the
.Li response
service it should simply fail, complaining about an unknown service type.
It should exit with a non-zero status.
.Sh RESPONSES
When an authentication program is called with a service of
.Li response ,
and this style supports this mode of authentication,
it should read two null terminated strings from file descriptor 3.
The first string is a challenge that was issued to the user
(obtained from the
.Li challenge
service above).
The second string is the response the user gave (i.e., the password).
If the response is correct for the specified challenge, the authentication
should be accepted, else it should be rejected.
It is possible for the challenge to be an empty string, which implies
the calling program did first obtain a challenge prior to getting a
response from the user.
Not all authentication styles support empty challenges.
.Sh APPROVAL
An approval program has the synopsis of:
.Bd -filled -offset indent
.Va approve
.Op Fl v Ar name=value
.Va username class service
.Ed
.Pp
Just as with an authentication program, file descriptor 3 will be
open for writing when the approval program is executed.
The
.Fl v
option is the same as in the authentication program.
Unlike an authentication program,
the approval program need not explicitly send an
.Li authorize
or
.Li "authorize root"
statement,
it only need exit with a value of 0 or non-zero.
An exit value of 0 is equivalent to an
.Li authorize
statement, and non-zero to a
.Li reject
statement.
This allows for simple programs which have no information to provide
other than approval or denial.
.Sh CLASSIFICATION
A classify program has the synopsis of:
.Bd -filled -offset indent
.Va classify
.Op Fl v Ar name=value
.Op Fl f
.Op user
.Ed
.Pp
See
.Xr login 1
for a description of the
.Fl f ,
option.
The
.Fl v
option is the same as for the authentication programs.
The
.Va user
is the username passed to
.Xr login 1
login, if any.
.Pp
The typical job of the classify program is to determine what authentication
type should actually be used, presumably based on the remote IP address.
It might also re-specify the hostname to be included in the
.Xr utmp 5
file, reject the login attempt outright,
or even print an additional login banner (e.g.,
.Pa /etc/issue ) .
.Pp
The classify entry is only valid for the
.Li default
class as it is used prior to knowing who the user is.
The classify script may pass environment variables or other commands
back to
.Xr login 1
on file descriptor 3, just as an authentication program does.
The two variables
.Nm AUTH_TYPE
and
.Nm REMOTE_NAME
are used to specify a new authentication type (the type must have the
form
.Li auth- Ns Ar type )
and override the
.Fl h
option to login, respectively.
.Sh FILES
.Bl -tag -width "/etc/login.conf"
.It Pa /etc/login.conf
Login class capability database.
.El
.Sh SEE ALSO
.Xr cap_mkdb 1 ,
.Xr login 1 ,
.Xr auth_subr 3 ,
.Xr authenticate 3 ,
.Xr getcap 3 ,
.Xr login_cap 3 ,
.Xr passwd 5 ,
.Xr ttys 5 ,
.Xr ftpd 8
@


1.63
log
@update man pages now that login.conf uses auto rounds

better wording/ok sthen@@ ok jmc@@
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.62 2016/03/30 06:58:06 jmc Exp $
d36 1
a36 1
.Dd $Mdocdate: March 30 2016 $
a41 2
.Sh SYNOPSIS
.Nm /etc/login.conf
d910 5
@


1.62
log
@some Xr adjustment to catch up with MLINKS removal;
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.61 2015/10/01 20:35:55 jmc Exp $
d36 1
a36 1
.Dd $Mdocdate: October 1 2015 $
d162 1
a162 1
.It localcipher Ta string Ta blowfish,8 Ta
@


1.61
log
@some radiusd updates, from theo buehler
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.60 2015/09/24 13:24:59 sobrado Exp $
d36 1
a36 1
.Dd $Mdocdate: September 24 2015 $
d915 1
a916 1
.Xr bsd_auth 3 ,
@


1.60
log
@fix unit suffix.
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.59 2015/02/11 04:03:40 tedu Exp $
d36 1
a36 1
.Dd $Mdocdate: February 11 2015 $
d545 1
a545 1
.Xr radiusd .
@


1.59
log
@refer to crypt_checkpass for cipher explananation
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.58 2015/01/16 17:20:24 schwarze Exp $
d36 1
a36 1
.Dd $Mdocdate: January 16 2015 $
d405 1
a405 1
kilobytes, megabytes, gigabytes, or terrabytes, respectively.
@


1.58
log
@properly handle opening parentheses, correctly quote vertical bars,
and do not use the legacy predefined string \*(Ba
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.57 2014/11/02 05:36:10 tedu Exp $
d36 1
a36 1
.Dd $Mdocdate: November 2 2014 $
d164 3
a166 4
Possible values are:
.Dq blowfish,<rounds>
where the value of rounds can be between 4 and 31.
It specifies the base 2 logarithm of the number of rounds.
@


1.57
log
@localcipher is blowfish only. remove mention of ypcipher.
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.56 2014/09/17 17:58:35 kspillner Exp $
d36 1
a36 1
.Dd $Mdocdate: September 17 2014 $
d322 1
a322 1
.No ( Ns Va cputime , filesize , datasize , stacksize , coredumpsize ,
@


1.56
log
@Increase number of blowfish rounds to 8 by default when not specified in
login.conf.

ok deraadt@@ doug@@ millert@@
"please commit" tedu@@
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.55 2014/08/11 12:57:14 jmc Exp $
d36 1
a36 1
.Dd $Mdocdate: August 11 2014 $
d163 1
a163 1
The cipher to use for local passwords.
a164 4
.Dq old ,
.Dq newsalt,<rounds> ,
.Dq md5 ,
and
d166 1
a166 9
where
.Dq old
means classic 56-bit DES.
For
.Dq newsalt
the value of rounds is a 24-bit integer with a minimum of 7250 rounds.
For
.Dq blowfish
the value can be between 4 and 31.
a167 6
.\"
.Pp
.It ypcipher Ta string Ta old Ta
The cipher to use for YP passwords.
The possible values are the same as for
.Ar localcipher .
@


1.55
log
@document "tc";
From: Edward

ok millert
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.54 2014/04/22 12:48:17 sobrado Exp $
d36 1
a36 1
.Dd $Mdocdate: April 22 2014 $
d95 1
a95 1
.Bl -column "approve-service" "program" "blowfish,6" "Description"
d162 1
a162 1
.It localcipher Ta string Ta blowfish,6 Ta
@


1.54
log
@no more kerberos authentication styles.

ok henning@@, reyk@@
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.53 2014/04/18 22:04:54 jmc Exp $
d36 1
a36 1
.Dd $Mdocdate: April 18 2014 $
d309 7
@


1.53
log
@remove references to rshd;
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.52 2014/02/18 22:54:14 tedu Exp $
d36 1
a36 1
.Dd $Mdocdate: February 18 2014 $
d455 1
a455 1
.Bl -tag -width krb5-or-pwdxx
a471 14
.It Li krb5
Request a password and use it to request a ticket from the kerberos 5 server.
See
.Xr login_krb5 8 .
.\"
.It Li krb5-or-pwd
Request a password and first try the
.Li krb5
authentication style and if that fails use the same password with the
.Li passwd
authentication style.
See
.Xr login_krb5-or-pwd 8 .
.\"
d537 1
a537 1
.Bl -tag -width kerberosxx
d568 1
a568 3
The name may contain an instance, e.g.\&
.Dq user/root ,
as used by Kerberos authentication.
a688 3
.It Li invokinguser
Set to the name of the user being authenticated; used for Kerberos
authentication.
d740 1
a740 1
before termination (a kerberos ticket file, for example).
@


1.52
log
@small typo
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.51 2013/08/14 08:39:28 jmc Exp $
d36 1
a36 1
.Dd $Mdocdate: August 14 2013 $
d53 1
a53 1
it is also used by other programs, e.g.,
d56 1
a56 3
It is also used by programs, e.g.,
.Xr rshd 8 ,
which need to set up a user environment.
@


1.51
log
@some Bx/Ox conversion;
From: Jan Stary
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.50 2012/11/25 21:18:13 jmc Exp $
d36 1
a36 1
.Dd $Mdocdate: November 25 2012 $
d866 1
a866 1
It is possible for the challenge to be any empty string, which implies
@


1.50
log
@remove the obsolete rpasswd entry; from Michael W. Lucas
ok millert
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.49 2012/01/26 20:05:22 dhill Exp $
d36 1
a36 1
.Dd $Mdocdate: January 26 2012 $
d452 3
a454 1
uses BSD Authentication, which is made up of a variety of
d533 2
a534 1
To prevent collisions with future official BSD
d536 3
a538 1
Current plans are for all official BSD Authentication style names to begin
@


1.49
log
@mention YubiKey support.

ok jmc@@
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.48 2011/09/03 22:59:07 jmc Exp $
d36 1
a36 1
.Dd $Mdocdate: September 3 2011 $
a505 3
.\"
.It Li rpasswd
Request a password and check it against the password in the rpasswd.db file.
@


1.48
log
@make -column lists pretty again;

specifically, rewrite them to permit some markup in the column headers,
and use "Ta" instead of literal tabs; mandoc does not currently match groff
100%, but a mandoc fix may be some time off, and we've gone enough releases
with poorly formatting column lists.

in some cases i have rewritten the lists as -tag, where -column made
little sense.
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.47 2011/04/17 06:34:31 jmc Exp $
d36 1
a36 1
.Dd $Mdocdate: April 17 2011 $
d525 5
@


1.47
log
@fix a formatting bug in the list; from Michal Mazurek
ok schwarze
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.46 2011/04/01 19:13:58 jmc Exp $
d36 1
a36 1
.Dd $Mdocdate: April 1 2011 $
d97 2
a98 2
.Bl -column minpasswordlen program xetcxmotd
.It Sy Name	Type	Default	Description
@


1.46
log
@after nicm's last commit, fix some cases where non-arguments
had been left on macro lines...
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.45 2010/12/03 12:39:19 millert Exp $
d36 1
a36 1
.Dd $Mdocdate: December 3 2010 $
d287 1
a287 1
.It path Ta path Ta value of Dv _PATH_DEFPATH
@


1.45
log
@Sizes may also be specified in gigabytes or terrabytes.
OK jmc@@
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.44 2010/09/30 21:00:47 sthen Exp $
d36 1
a36 1
.Dd $Mdocdate: September 30 2010 $
d415 2
a416 1
.Li g or
@


1.44
log
@Use .Ox rather than \*(oS which mandoc (and new groff) don't expand, but
used to end up as "OpenBSD 4.7 " (with trailing space!). Discussed with jmc@@
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.43 2010/03/26 19:30:40 jmc Exp $
d36 1
a36 1
.Dd $Mdocdate: March 26 2010 $
d409 2
a410 1
which expresses a size in bytes.
d412 7
a418 6
.Li b
to multiply the value by 512, a
.Li k
to multiply the value by 1 K (1024), and an
.Li m
to multiply the value by 1 M (1048576).
@


1.43
log
@dispense with some wacky escape sequences;
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.42 2010/01/03 14:31:01 schwarze Exp $
d36 1
a36 1
.Dd $Mdocdate: January 3 2010 $
d448 2
a449 1
\*(oSuses BSD Authentication, which is made up of a variety of
@


1.42
log
@.Bl always requires .It, even in .Bl -column;
syntax errors found by mandoc(1), also required to fix the mandoc build;
feedback and ok jmc@@ and sobrado@@
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.41 2008/12/27 19:18:57 blambert Exp $
d36 1
a36 1
.Dd $Mdocdate: December 27 2008 $
d787 1
a787 1
This allows quoting an initial space or the \\ character itself.
@


1.41
log
@Add a comma to clarify a sentence.

"that's fine" jmc@@
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.40 2007/05/31 19:19:58 jmc Exp $
d36 1
a36 1
.Dd $Mdocdate: May 31 2007 $
d98 1
a98 1
.Sy Name	Type	Default	Description
@


1.40
log
@convert to new .Dd format;
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.39 2005/04/28 06:36:02 biorn Exp $
d36 1
a36 1
.Dd $Mdocdate$
d526 1
a526 1
Authentication style names all local style names should start with a dash (-).
@


1.39
log
@
Fix Xr:s and use krb5 instance style (user/root instead of user.root)

ok jmc@@ millert@@
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.38 2005/03/12 12:21:08 jmc Exp $
d36 1
a36 1
.Dd June 18, 2001
@


1.38
log
@escape `.' at eol to avoid double spacing issue;
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.37 2005/02/28 16:23:05 millert Exp $
d451 1
a451 1
.Bl -tag -width kerberosxx
d470 2
d480 1
a480 1
.Ql info heimdal .
d485 1
a485 1
.Xr login_chpass 8 .
d489 2
d510 1
a510 1
.Xr skey 1 .
d574 1
a574 1
.Dq user.root ,
@


1.37
log
@Use .Ox instead of \*(oS since we don't want the OS version displayed
Use "an m" not "a m"
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.36 2004/12/20 15:08:08 moritz Exp $
d569 1
a569 1
The name may contain an instance, e.g.
@


1.36
log
@blowfish defaults to 6 rounds.

patch from mpech@@ and ok henning@@
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.35 2004/08/10 15:53:31 millert Exp $
d352 2
a353 1
\*(oSwill never define capabilities which start with
d414 1
a414 1
to multiply the value by 1 K (1024), and a
@


1.35
log
@Only expand a tilde for strings like "~", "~/..", "~user" and "~user/".
For the PATH, only expand a tilde that is at the beginning of the path name.
This is similar to the behavior prior to my commit here yesterday.
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.34 2004/08/09 21:15:09 millert Exp $
d164 1
a164 1
.It localcipher Ta string Ta old Ta
@


1.34
log
@Support the "setenv" capability in login.conf ala FreeBSD.  Following
FreeBSD's example, a '~' in an environment variable is replaced
with the user's homedir.  A '$' is replaced by the user's login
name.  Both can be escaped with a backslash to get the literal char.
OK deraadt@@
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.33 2003/09/05 19:28:04 jmc Exp $
d326 4
d370 4
a373 1
in the path name is expanded to the user's home directory.
d397 4
a400 1
.Em envlist.
@


1.33
log
@replace some groff macros with -mdoc versions;
a .br survives until i work out what to do with it...
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.32 2003/09/04 08:48:53 jmc Exp $
d259 1
a259 1
.It passwordcheck Ta path Ta "" Ta
d302 4
d358 13
d375 1
a375 1
A comma separated list of values.
d388 3
a390 6
A space separated list of path names.
If a
.Li ~
is the first character in the path name, the
.Li ~
is expanded to the user's home directory.
@


1.32
log
@change description of `openfiles' attribute from "number of open files..."
to "number of open file descriptors...";

prompted by a misc@@ post from Olivier Cherrier;
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.31 2003/07/25 09:30:54 jmc Exp $
d79 1
d81 1
d103 1
a103 1
.sp
d108 1
a108 1
.sp
d113 1
a113 1
.sp
d118 1
a118 1
.sp
d122 1
a122 1
.sp
d126 1
a126 1
.sp
d130 1
a130 1
.sp
d134 1
a134 1
.sp
d138 1
a138 1
.sp
d143 1
a143 1
.sp
d147 1
a147 1
.sp
d155 1
a155 1
.sp
d163 1
a163 1
.sp
d183 1
a183 1
.sp
d189 1
a189 1
.sp
d197 1
a197 1
.sp
d206 1
a206 1
.sp
d212 1
a212 1
.sp
d216 1
a216 1
.sp
d220 1
a220 1
.sp
d224 1
a224 1
.sp
d228 1
a228 1
.sp
d236 1
a236 1
.sp
d241 1
a241 1
.sp
d245 1
a245 1
.sp
d253 1
a253 1
.sp
d258 1
a258 1
.sp
d266 1
a266 1
.sp
d278 1
a278 1
.sp
d286 2
a287 2
.sp
.It path Ta path Ta Dv "value of _PATH_DEFPATH" Ta
d293 1
a293 1
.sp
d297 1
a297 1
.sp
d301 1
a301 1
.sp
d308 1
a308 1
.sp
d312 1
a312 1
.sp
d321 1
a321 1
.sp
d607 1
a607 2
.sp
.ti +.5i
d612 1
a612 1
.sp
d832 1
a832 2
.sp
.ti +.5i
d836 1
d859 1
a859 2
.sp
.ti +.5i
d864 1
@


1.31
log
@no kerberos(1) so point people to info heimdal;
ok hin@@
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.30 2003/06/21 21:57:58 dhartmei Exp $
d241 1
a241 1
Maximum number of open files per process.
@


1.30
log
@s/for spall files/for small files/
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.29 2003/06/06 13:28:13 jmc Exp $
d451 1
a451 1
.Xr kerberos 1 .
@


1.29
log
@- section reorder
- macro fixes
- kill whitespace at EOL
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.28 2003/06/04 07:53:04 hin Exp $
d72 1
a72 1
Using a database version for spall files does not result in a
@


1.28
log
@Don't mention the "alwaysuseklogin" option as it has never been used
by us.

ok millert@@
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.27 2003/06/03 11:34:02 hin Exp $
d340 1
a340 1
.Va openfiles-cur Ns No ).
d427 1
a427 1
Authenticate using an ActivCard token. 
d639 1
a639 1
by the 
d652 1
a652 1
by the 
d679 1
a679 1
.El 
d814 1
a814 1
When an authentication program is called with a service of 
@


1.27
log
@Don't refer to kerberos 4
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.26 2003/05/09 21:42:36 millert Exp $
d95 1
a95 1
.Bl -column alwaysuseklogin program xetcxmotd
a97 9
.It alwaysuseklogin Ta bool Ta Dv false Ta
Always check the 
.Pa .klogin 
file for kerberos style authentication.
Normally this file is only checked if a non-null kerberos instance
is provided (e.g.,
.Li user.root ) .
.\"
.sp
@


1.26
log
@Talk about the .db version of login.conf; idea from mpech@@
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.25 2003/05/09 21:34:54 millert Exp $
a449 14
.It Li krb4
Request a password and use it to request a ticket from the kerberos 4 server.
See
.Xr kerberos 1 .
.\"
.It Li krb4-or-pwd
Request a password and first try the
.Li krb4
authentication style and if that fails use the same password with the
.Li passwd
authentication style.
See
.Xr kerberos 1 .
.\"
a451 2
See
.Xr kerberos 1 .
@


1.25
log
@Update to reflect reality.  The kerberos authentication methods listed
were out of date and there were missing -v options.
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.24 2003/03/18 08:44:09 jmc Exp $
d66 19
d930 1
@


1.24
log
@ip address -> IP address;
rtadvd.conf(5): positve -> positive;

ok miod@@
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.23 2003/03/11 08:11:08 jmc Exp $
d431 2
a432 2
.It Li kerberos
Request a password and use it to request a ticket from the kerberos server.
d436 1
a436 1
.It Li krb-or-pwd
d438 15
a452 1
.Li kerberos
d648 7
d672 3
@


1.23
log
@files with dead .Xr's;

left .Xr, but removed man page number
as suggested by mpech@@

more help and ok millert@@
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.22 2003/03/06 20:40:35 jmc Exp $
d629 1
a629 1
The local ip address given to
d635 1
a635 1
The remote ip address given to
@


1.22
log
@.Xr typos, and some dead ones;

ok deraadt@@
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.21 2003/01/19 21:02:15 deraadt Exp $
d523 1
a523 1
.Nm radiusd .
@


1.21
log
@typos; jmc@@prioris.mini.pw.edu.pl
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.20 2002/12/09 00:45:37 millert Exp $
d523 1
a523 1
.Xr radiusd 8 .
@


1.20
log
@From Andrushock, s/sucess/success/g
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.19 2002/07/03 23:28:49 miod Exp $
d174 2
a175 1
The possible values are the same as for localcipher.
d206 1
a206 1
Maximum number of process.
d469 1
a469 1
with S/Key\(tm authentication.
d484 1
a484 1
Local authentication styles may be added by creating the login script
d727 1
a727 1
A newline
d729 1
a729 1
A carriage return
d731 1
a731 1
A tab
d865 1
a865 1
file, reject the login attempt out right,
@


1.19
log
@Xr fixups, mostly from PR 2793
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.18 2002/06/13 23:22:17 millert Exp $
d180 1
a180 1
unsucessful login attempts during a single session,
@


1.18
log
@Mention that the "old" cipher just means DES; suggested by Michael Lucas
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.17 2002/05/06 23:34:33 millert Exp $
a419 6
.It Li auth
Authenticate using the remote authentication protocol.
Normally linked to another authentication type.
See
.Xr login_auth 8 .
.\"
a456 5
.\"
.It Li rchpass
Change user's rpasswd password.
See
.Xr login_rchpass 8 .
@


1.17
log
@Kill/adjust r(login|exec)d? references now that those are no longer in
the tree.
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.16 2002/03/13 22:30:11 marc Exp $
d159 4
a162 1
.Dq blowfish,<rounds> .
@


1.16
log
@login(8) -> login(1)
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.15 2002/02/12 02:57:31 hugh Exp $
d57 1
a57 1
.Xr rexecd 8 ,
@


1.15
log
@Correct cross reference. PR#2390.
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.14 2001/10/05 14:45:54 mpech Exp $
d51 1
a51 1
.Xr login 8
d504 1
a504 1
.Xr login 8
d551 1
a551 1
.Xr login 8
d568 1
a568 1
.Xr login 8
d619 1
a619 1
.Xr login 8
d632 1
a632 1
.Xr login 8
d637 1
a637 1
.Xr login 8
d643 1
a643 1
.Xr login 8
d855 1
a855 1
.Xr login 8
d865 1
a865 1
.Xr login 8
d881 1
a881 1
.Xr login 8
@


1.14
log
@Powered by @@mantoya:
o) start new sentence on a new line;
o) minor mdoc fixes;
millert@@ ok

Tip of the day:   www.mpechismazohist.com
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.13 2001/08/20 05:57:55 mpech Exp $
d899 1
a899 1
.Xr passwd 3 ,
@


1.13
log
@Powered by @@mantoya.
o) fix bogus .Xr usage;

millert@@ ok.
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.12 2001/08/03 15:21:16 mpech Exp $
d234 2
a235 2
time after their password (but not account) has expired.  This allows
a grace period for updating their password.
d408 2
a409 1
authentication styles. The authentication styles currently provided are:
d413 2
a414 1
Authenticate using an ActivCard token.  See
d419 2
a420 1
Normally linked to another authentication type.  See
d424 2
a425 1
Change user's password.  See
d429 2
a430 1
Authenticate using a CRYPTOCard token.  See
d448 2
a449 1
Change user's local password.  See
d457 2
a458 1
to do authentication.  See
d462 2
a463 1
Change user's rpasswd password.  See
d467 2
a468 1
Request a password and reject any request.  See
d476 2
a477 1
with S/Key\(tm authentication.  See
d481 2
a482 1
Authenticate using a SecureNet Key token.  See
d486 2
a487 1
Authenticate using a generic X9.9 token.  See
d492 2
a493 1
for the style (see below).  To prevent collisions with future official BSD
d558 1
a558 1
Most programs will only have a single type, if any at all, i.e.
d614 2
a615 1
programs.  Any number of
d685 3
a687 2
login even if this is not a secure terminal.  This should only be
sent by authentication styles that are secure over insecure lines.
d754 2
a755 2
If set, the value is the reason authentication failed.  The calling
program may choose to display this when rejecting the user, but
d769 4
a772 3
nor must it assume it will not be called as root.  If it needs special
permissions to access files it should be setuid or setgid to the
appropriate user/group.  See
d782 2
a783 2
to be the appropriate challenge for the user.  This is done
by the
@


1.12
log
@o) We don't like .Pp before/after .Sh;
o) .Nm always has argument in .Sh SYNOPSIS;
o) We always closes .Bl and .Bd tags;

millert@@ ok
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.11 2001/08/02 22:07:24 hugh Exp $
d316 1
a316 1
.Xr getrlimit 2 ).
d560 1
a560 1
.Xr ttys 5 ).
d565 1
a565 1
.Xr passwd 5 ).
@


1.11
log
@assure -> ensure
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.10 2001/06/27 21:32:23 millert Exp $
a406 1
.Pp
a802 1
.Pp
a829 1
.Pp
@


1.10
log
@Back out lasdt change, we no longer require login scripts to grok
instances (unless they support them natively such as for kerberos).
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.9 2001/06/24 17:20:22 millert Exp $
d301 1
a301 1
to assure octal interpretation.
@


1.9
log
@Clarify instances, esp. user.root
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.8 2001/06/19 16:21:48 millert Exp $
d532 2
a533 7
All authentication styles that support authentication by the root user
will support the
.Dq user.root
instance for compatibility with
.Xr su 1 .
However, if the authentication style being used does not support true
instances, requests for an instance other than root will fail.
@


1.8
log
@If we timeout during login and the user tried to login call badlogin()
before exit.  SUggested by <vii@@users.sourceforge.net>

Add some new login.conf variables:
o login-timeout - login prompt timeout
o login-tries - max login tries
o login-backoff - number of attempts before backing off (and sleeping)
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.7 2001/06/18 21:09:24 millert Exp $
d532 7
a538 2
If the authentication style being used does not support such instances,
the request will fail.
@


1.7
log
@o move passwd.conf variables into login.conf
o no longer install passwd.conf (but it is used if it exists and the
  needed info is not in login.conf)
o added passwordtime and minpasswordlen login.conf variables
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.6 2001/05/29 21:35:44 millert Exp $
d172 23
@


1.6
log
@update to describe BSD authentication
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.5 2000/11/27 05:59:49 millert Exp $
d36 1
a36 1
.Dd February 23, 1995
d76 1
a76 1
.Bl -column alwaysuseklogin programxx xusrxbinxbin
d152 22
d190 8
d218 28
@


1.5
log
@Fix order of SEE ALSO entries
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.4 2000/11/20 08:00:03 deraadt Exp $
d48 11
a58 5
A login class determines session resource limits and environment setup.
It is used by various programs in the system to set up a user's login
environment and to enforce local policy and restrictions.
At a future date, the login class will also determine what styles of
authentication are available to a user.
d79 36
d177 8
d325 474
d801 2
d805 1
a805 1
.Xr passwd 5 ,
@


1.4
log
@various Xr fixes; nordin@@cse.ogi.edu
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.3 2000/10/26 00:37:04 aaron Exp $
d276 1
d281 1
a281 2
.Xr ftpd 8 ,
.Xr login 1
@


1.3
log
@Some share/man fleshing.
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.2 2000/08/20 19:11:01 millert Exp $
d99 1
a99 1
.Xr login 8 .
d107 1
a107 1
.Xr login 8 .
d281 1
a281 1
.Xr login 8
@


1.2
log
@Remove reference non-existent harduserlimit variable.
@
text
@d33 1
a33 1
.\" $OpenBSD: login.conf.5,v 1.1 2000/08/20 18:37:21 millert Exp $
d41 1
a41 1
.Nd login class capability data base
d46 1
a46 1
.Nm login.conf
d65 4
a68 3
.Nm login.conf
file are either boolean or use a `=' to separate the capability
from the value.
d142 2
a143 1
Default search path.  See
d186 3
a188 5
The current limit is the one normally used,
although the user is permitted to increase the current limit to the
maximum limit.
The maximum and current limits may be specified individually by appending
a
d214 2
a215 1
A number.  A leading
d248 2
a249 4
A time may be expressed as a series of numbers
which are added together.
Each number may have a trailing character to
represent time units:
d271 1
a271 2
For example, to indicate 1 and 1/2 hours, the following string
could be used:
@


1.1
log
@login.conf code from BSDi.  This does not include the bsd auth code
which will come later.  At this stage it is primarily used for setting
resource limits.
@
text
@d33 1
a33 1
.\" $OpenBSD$
a92 5
.It harduserlimit Ta bool Ta Dv false Ta
Do not allow the user to log in if this session will be beyond
the licensed number of simultaneous users.
.\"
.sp
a98 1
.\"
@

