head	1.31;
access;
symbols
	OPENBSD_6_2:1.31.0.4
	OPENBSD_6_2_BASE:1.31
	OPENBSD_6_1:1.31.0.8
	OPENBSD_6_1_BASE:1.31
	OPENBSD_6_0:1.31.0.6
	OPENBSD_6_0_BASE:1.31
	OPENBSD_5_9:1.31.0.2
	OPENBSD_5_9_BASE:1.31
	OPENBSD_5_8:1.30.0.10
	OPENBSD_5_8_BASE:1.30
	OPENBSD_5_7:1.30.0.8
	OPENBSD_5_7_BASE:1.30
	OPENBSD_5_6:1.30.0.6
	OPENBSD_5_6_BASE:1.30
	OPENBSD_5_5:1.30.0.4
	OPENBSD_5_5_BASE:1.30
	OPENBSD_5_4:1.29.0.12
	OPENBSD_5_4_BASE:1.29
	OPENBSD_5_3:1.29.0.10
	OPENBSD_5_3_BASE:1.29
	OPENBSD_5_2:1.29.0.8
	OPENBSD_5_2_BASE:1.29
	OPENBSD_5_1_BASE:1.29
	OPENBSD_5_1:1.29.0.6
	OPENBSD_5_0:1.29.0.4
	OPENBSD_5_0_BASE:1.29
	OPENBSD_4_9:1.29.0.2
	OPENBSD_4_9_BASE:1.29
	OPENBSD_4_8:1.22.0.8
	OPENBSD_4_8_BASE:1.22
	OPENBSD_4_7:1.22.0.4
	OPENBSD_4_7_BASE:1.22
	OPENBSD_4_6:1.22.0.6
	OPENBSD_4_6_BASE:1.22
	OPENBSD_4_5:1.22.0.2
	OPENBSD_4_5_BASE:1.22
	OPENBSD_4_4:1.21.0.2
	OPENBSD_4_4_BASE:1.21
	OPENBSD_4_3:1.20.0.4
	OPENBSD_4_3_BASE:1.20
	OPENBSD_4_2:1.20.0.2
	OPENBSD_4_2_BASE:1.20
	OPENBSD_4_1:1.19.0.2
	OPENBSD_4_1_BASE:1.19
	OPENBSD_4_0:1.18.0.14
	OPENBSD_4_0_BASE:1.18
	OPENBSD_3_9:1.18.0.12
	OPENBSD_3_9_BASE:1.18
	OPENBSD_3_8:1.18.0.10
	OPENBSD_3_8_BASE:1.18
	OPENBSD_3_7:1.18.0.8
	OPENBSD_3_7_BASE:1.18
	OPENBSD_3_6:1.18.0.6
	OPENBSD_3_6_BASE:1.18
	OPENBSD_3_5:1.18.0.4
	OPENBSD_3_5_BASE:1.18
	OPENBSD_3_4:1.18.0.2
	OPENBSD_3_4_BASE:1.18
	OPENBSD_3_3:1.15.0.2
	OPENBSD_3_3_BASE:1.15
	OPENBSD_3_2:1.14.0.2
	OPENBSD_3_2_BASE:1.14
	OPENBSD_3_1:1.13.0.4
	OPENBSD_3_1_BASE:1.13
	OPENBSD_3_0:1.13.0.2
	OPENBSD_3_0_BASE:1.13
	OPENBSD_2_9:1.10.0.4
	OPENBSD_2_9_BASE:1.10
	OPENBSD_2_8:1.10.0.2
	OPENBSD_2_8_BASE:1.10
	OPENBSD_2_7:1.9.0.2
	OPENBSD_2_7_BASE:1.9
	OPENBSD_2_6:1.7.0.2
	OPENBSD_2_6_BASE:1.7
	OPENBSD_2_5:1.4.0.4
	OPENBSD_2_5_BASE:1.4
	OPENBSD_2_4:1.4.0.2
	OPENBSD_2_4_BASE:1.4
	OPENBSD_2_3:1.3.0.4
	OPENBSD_2_3_BASE:1.3
	OPENBSD_2_2:1.3.0.2
	OPENBSD_2_2_BASE:1.3
	OPENBSD_2_1:1.1.0.2
	OPENBSD_2_1_BASE:1.1;
locks; strict;
comment	@# @;


1.31
date	2015.09.10.17.55.21;	author schwarze;	state Exp;
branches;
next	1.30;
commitid	PeV7Ql0T6htfMjhP;

1.30
date	2014.01.23.05.14.44;	author tedu;	state Exp;
branches;
next	1.29;

1.29
date	2011.01.11.15.26.05;	author deraadt;	state Exp;
branches;
next	1.28;

1.28
date	2011.01.09.02.20.53;	author jmc;	state Exp;
branches;
next	1.27;

1.27
date	2011.01.09.00.06.50;	author deraadt;	state Exp;
branches;
next	1.26;

1.26
date	2011.01.07.08.23.27;	author jmc;	state Exp;
branches;
next	1.25;

1.25
date	2011.01.06.15.53.51;	author deraadt;	state Exp;
branches;
next	1.24;

1.24
date	2010.12.29.17.51.47;	author deraadt;	state Exp;
branches;
next	1.23;

1.23
date	2010.10.03.23.14.22;	author tedu;	state Exp;
branches;
next	1.22;

1.22
date	2008.10.10.20.13.29;	author deraadt;	state Exp;
branches;
next	1.21;

1.21
date	2008.05.18.06.53.56;	author jmc;	state Exp;
branches;
next	1.20;

1.20
date	2007.05.31.19.19.51;	author jmc;	state Exp;
branches;
next	1.19;

1.19
date	2006.10.26.08.37.14;	author tom;	state Exp;
branches;
next	1.18;

1.18
date	2003.06.06.10.29.41;	author jmc;	state Exp;
branches;
next	1.17;

1.17
date	2003.06.02.22.11.25;	author mickey;	state Exp;
branches;
next	1.16;

1.16
date	2003.04.03.11.02.36;	author jmc;	state Exp;
branches;
next	1.15;

1.15
date	2002.10.26.15.34.52;	author jakob;	state Exp;
branches;
next	1.14;

1.14
date	2002.09.26.07.55.40;	author miod;	state Exp;
branches;
next	1.13;

1.13
date	2001.10.05.14.45.53;	author mpech;	state Exp;
branches;
next	1.12;

1.12
date	2001.06.22.12.15.46;	author mpech;	state Exp;
branches;
next	1.11;

1.11
date	2001.06.22.11.39.21;	author mpech;	state Exp;
branches;
next	1.10;

1.10
date	2000.06.19.03.21.51;	author deraadt;	state Exp;
branches;
next	1.9;

1.9
date	2000.04.17.22.01.11;	author mickey;	state Exp;
branches;
next	1.8;

1.8
date	2000.01.22.02.17.54;	author aaron;	state Exp;
branches;
next	1.7;

1.7
date	99.06.29.22.06.11;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	99.06.05.13.18.32;	author aaron;	state Exp;
branches;
next	1.5;

1.5
date	99.05.16.19.56.35;	author alex;	state Exp;
branches;
next	1.4;

1.4
date	98.09.06.22.23.19;	author aaron;	state Exp;
branches;
next	1.3;

1.3
date	97.06.25.22.28.29;	author angelos;	state Exp;
branches;
next	1.2;

1.2
date	97.06.15.03.41.49;	author mickey;	state Exp;
branches;
next	1.1;

1.1
date	96.12.17.22.56.03;	author millert;	state Exp;
branches;
next	;


desc
@@


1.31
log
@use .In rather than .Fd #include
@
text
@.\"	$OpenBSD: random.4,v 1.30 2014/01/23 05:14:44 tedu Exp $
.\"
.\" Copyright (c) 1996, 1997 Michael Shalayeff
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.Dd $Mdocdate: January 23 2014 $
.Dt RANDOM 4
.Os
.Sh NAME
.Nm random ,
.Nm arandom
.Nd random data source devices
.Sh SYNOPSIS
.In sys/types.h
.In dev/rndvar.h
.Sh DESCRIPTION
The various
.Nm
devices produce high quality random output data.
Entropy data is collected from system activity (such as disk, network,
and clock device interrupts), and then used to key the
ChaCha stream cipher to generate the output.
All the random devices are expected to provide high quality
pseudo-random output data.
.Pp
The
.Xr arc4random 3
function in userland libraries should be used instead, as it works
without the need to access these devices every time.
.Sh FILES
.Bl -tag -width /dev/arandom -compact
.It Pa /dev/random
.It Pa /dev/arandom
.El
.Sh SEE ALSO
.Xr arc4random 3 ,
.Xr md5 3 ,
.Xr random 3 ,
.Xr amdpm 4 ,
.Xr glxsb 4 ,
.Xr pchb 4 ,
.Xr arc4random 9 ,
.Xr md5 9
.Sh HISTORY
A
.Nm
device first appeared in the Linux operating system.
This is a cloned interface.
.Pp
ARC4 routines added by David Mazieres.
Changed to use the ChaCha cipher in
.Ox 5.5 .
.Sh BUGS
No randomness testing suite provided.
@


1.30
log
@update and refine to reflect current status and best practices.
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.29 2011/01/11 15:26:05 deraadt Exp $
d26 1
a26 1
.Dd $Mdocdate: January 11 2011 $
d34 2
a35 2
.Fd #include <sys/types.h>
.Fd #include <dev/rndvar.h>
@


1.29
log
@all the devices output same types of data
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.28 2011/01/09 02:20:53 jmc Exp $
d26 1
a26 1
.Dd $Mdocdate: January 9 2011 $
d40 3
a42 3
Entropy data is collected from system activity (like disk, network,
and clock device interrupts and such), and then run through various
hash or message digest functions to generate the output.
d48 2
a49 6
function in userland libraries seeds itself from this device (or with
the
.Xr sysctl 3
interface),
providing a second level of ARC4 hashed data without the need to access
these devices every time.
d71 2
@


1.28
log
@tweak previous;
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.27 2011/01/09 00:06:50 deraadt Exp $
d39 1
a39 1
devices produce random output data with different random qualities.
@


1.27
log
@update random(4) and arc4random(9) manual pages
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.26 2011/01/07 08:23:27 jmc Exp $
d26 1
a26 1
.Dd $Mdocdate: January 7 2011 $
d66 2
a67 2
.Xr md5 9 ,
.Xr arc4random 9
@


1.26
log
@tweak previous; ok deraadt
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.25 2011/01/06 15:53:51 deraadt Exp $
d26 1
a26 1
.Dd $Mdocdate: January 6 2011 $
d67 1
a67 1
.Xr random 9
@


1.25
log
@document that all *random nodes supply data now
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.24 2010/12/29 17:51:47 deraadt Exp $
d26 1
a26 1
.Dd $Mdocdate: December 29 2010 $
d43 1
a43 1
All the random devices are expected to provide high high-quality
d51 1
a51 1
interface)
a53 1
.El
@


1.24
log
@the random ioctl stuff is not very useful.  I want to see all the
non-essential parts of rnd.c removed so that we can keep our eye on
what the code should be doing.
ok tedu who had a similar diff in the past
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.23 2010/10/03 23:14:22 tedu Exp $
d26 1
a26 1
.Dd $Mdocdate: October 3 2010 $
d40 2
a41 2
Entropy data is collected from system activity (like disk and
network device interrupts and such), and then run through various
d43 2
a44 7
.Bl -hang -width /dev/arandomX
.It Pa /dev/random
This device is reserved for future support of hardware
random generators.
.It Pa /dev/arandom
As required, entropy pool data re-seeds an ARC4 generator,
which then generates high-quality pseudo-random output data.
d48 6
a53 2
function in userland libraries seeds itself from this device,
providing a second level of ARC4 hashed data.
a73 10
.Pp
Previous versions of
.Ox
included the
.Nm srandom
and
.Nm urandom
devices.
These interfaces have been deprecated and replaced with
.Nm arandom .
@


1.23
log
@remove most mentions of the deprecated random devices. ok deraadt
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.22 2008/10/10 20:13:29 deraadt Exp $
d26 1
a26 1
.Dd $Mdocdate: October 10 2008 $
a35 1
.Fd #include <dev/rndioctl.h>
@


1.22
log
@prandom dies
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.21 2008/05/18 06:53:56 jmc Exp $
d26 1
a26 1
.Dd $Mdocdate: May 18 2008 $
a30 2
.Nm srandom ,
.Nm urandom ,
d44 1
a44 1
.Bl -hang -width /dev/srandomX
a47 12
.It Pa /dev/srandom
Strong random data.
This device returns reliable random data.
If sufficient entropy is not currently available (i.e., the entropy
pool quality starts to run low), the driver pauses while more of
such data is collected.
The entropy pool data is converted into output data using MD5.
.It Pa /dev/urandom
Same as above, but does not guarantee the data to be strong.
The entropy pool data is converted into output data using MD5.
When the entropy pool quality runs low, the driver will continue
to output data.
d58 1
a58 1
.Bl -tag -width /dev/srandom -compact
a59 2
.It Pa /dev/srandom
.It Pa /dev/urandom
d76 10
@


1.21
log
@some missing articles; from Pierre Riteau
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.20 2007/05/31 19:19:51 jmc Exp $
d26 1
a26 1
.Dd $Mdocdate: May 31 2007 $
a32 1
.Nm prandom ,
a61 2
.It Pa /dev/prandom
Simple pseudo-random generator.
a75 1
.It Pa /dev/prandom
@


1.20
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.19 2006/10/26 08:37:14 tom Exp $
d26 1
a26 1
.Dd $Mdocdate$
d94 1
a94 1
device first appeared in Linux operating system.
@


1.19
log
@Driver for the AMD Geode LX series processor security block.
Currently just uses the RNG; AES support to be added later.

ok deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.18 2003/06/06 10:29:41 jmc Exp $
d26 1
a26 1
.Dd March 25, 1996
@


1.18
log
@- section reorder
- some macro fixes
- kill whitespace at EOL
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.17 2003/06/02 22:11:25 mickey Exp $
d87 1
@


1.17
log
@three four kill...
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.16 2003/04/03 11:02:36 jmc Exp $
d74 8
a89 10
.Sh FILES
.Bl -tag -width /dev/srandom -compact
.It Pa /dev/random
.It Pa /dev/srandom
.It Pa /dev/urandom
.It Pa /dev/prandom
.It Pa /dev/arandom
.El
.Sh BUGS
No randomness testing suite provided.
d97 2
@


1.16
log
@typos;
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.15 2002/10/26 15:34:52 jakob Exp $
a12 6
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by Michael Shalayeff.
.\" 4. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
@


1.15
log
@indent section about arc4random; ok miod@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.14 2002/09/26 07:55:40 miod Exp $
d54 1
a54 1
.It /dev/random
d57 1
a57 1
.It /dev/srandom
d64 1
a64 1
.It /dev/urandom
d69 1
a69 1
.It /dev/prandom
d71 1
a71 1
.It /dev/arandom
@


1.14
log
@Incomplete section 4 mi manual page cleanup.
- make configuration lines match GENERIC files
- more Xr (hopefully usefule Xr)
- never mention intro(4) on non-physical devices (i.e. protocols), always
mention it for physical devices
- random text style and quoting fixes
- drivers ported from FreeBSD did mention rc.conf instead of hostname.if as
the place to put mediaopt
- some .Tn UNIX -> .Ox replacements
- etc, etc...

reviewd in part by deraadt@@ (until he got bored of this)
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.13 2001/10/05 14:45:53 mpech Exp $
a73 1
.El
d79 1
@


1.13
log
@Powered by @@mantoya:
o) start new sentence on a new line;
o) minor mdoc fixes;
millert@@ ok

Tip of the day:   www.mpechismazohist.com
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.12 2001/06/22 12:15:46 mpech Exp $
d84 1
@


1.12
log
@o) remove unnecessary .Pp;
o) remove unnecessary .Nm args;
o) closes .Bl;
o) .Sh AUTHOR -> .Sh AUTHORS;
o) sort SEE ALSO;
o) better -mdoc style;
o) typos;

aaron@@ ok.
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.11 2001/06/22 11:39:21 mpech Exp $
d58 2
a59 1
Strong random data.  This device returns reliable random data.
d100 2
a101 1
device first appeared in Linux operating system.  This is a cloned interface.
@


1.11
log
@o) .Sh AUTHOR -> .Sh AUTHORS;
o) sort SEE ALSO;
o) remove unnecessary .Pp;
o) split paths in .Sh FILES;

millert@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.10 2000/06/19 03:21:51 deraadt Exp $
d73 2
@


1.10
log
@rename Nm
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.9 2000/04/17 22:01:11 mickey Exp $
a52 1
.Pp
d85 6
a90 2
.Bl -tag -width /dev/srandom
.It Pa /dev/random, /dev/srandom, /dev/urandom, /dev/prandom, /dev/arandom
@


1.9
log
@Xr pchb(4)
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.8 2000/01/22 02:17:54 aaron Exp $
d33 1
a33 1
.Dt RND 4
@


1.8
log
@ie. -> i.e.,
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.7 1999/06/29 22:06:11 deraadt Exp $
d82 1
@


1.7
log
@much better
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.6 1999/06/05 13:18:32 aaron Exp $
d41 1
a41 1
.Nd random data source devices.
d60 1
a60 1
If sufficient entropy is not currently available (ie. the entropy
@


1.6
log
@more .Os cleanup, remove some trailing whitespace, cleanse some .Nm
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.5 1999/05/16 19:56:35 alex Exp $
d47 1
a47 1
The
d49 4
a52 3
device produces random data, with different random quality.
{u,s,a}random devices generates random data based on the system activity
(like disk and network devices).
d54 1
a54 1
.Bl -hang -width /dev/srandomXXX
d56 2
a57 1
reserved for nuclear noise generators.
d59 5
a63 1
strong random data.
d65 4
a68 1
same as above, but does not guarantee the data to be strong.
d70 1
a70 1
simple pseudo-random generator (as it is in the kernel).
d72 6
a77 1
aRC4 hashed data (as apposed to the {u,s}random, as they are MD5).
d91 1
a91 1
An
d93 1
a93 1
device first appeared in Linux operating system.
d95 1
a95 1
aRC4 routines added by David Mazieres.
@


1.5
log
@Cleanup xrefs under SEE ALSO.  Specifically:

  - Sort xrefs by section, and then alphabetically.
  - Add missing commas between xref items.
  - Remove commas from the last xref entry.
  - Remove duplicate entries.
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.4 1998/09/06 22:23:19 aaron Exp $
d34 1
a34 1
.Os OpenBSD
@


1.4
log
@More man page fixes. Spelling, grammar, some typos. Lots of double-word
occurrences squashed as well.
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.3 1997/06/25 22:28:29 angelos Exp $
d65 2
a66 1
.Xr random 9 ,
d69 1
a69 2
.Xr md5 3 ,
.Xr arc4random 3 .
@


1.3
log
@Typo correction.
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.2 1997/06/15 03:41:49 mickey Exp $
d59 1
a59 1
same as above, but does not guarantees the data to be strong.
@


1.2
log
@reality update
cleanup
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.1 1996/12/17 22:56:03 millert Exp $
d59 1
a59 1
same as above, but does not guaranties the data to be strong.
@


1.1
log
@rnd -> random doncha know
@
text
@d1 1
a1 1
.\"	$OpenBSD: random.4,v 1.2 1996/09/10 05:26:08 mickey Exp $
d3 1
a3 1
.\" Copyright (c) 1996 Michael Shalayeff
d36 5
a40 4
.Nm random
.Nm srandom
.Nm urandom
.Nm prandom
d43 3
a45 1
.Cd "pseudo-device random"
d50 1
a50 1
{s,u}random devices generates random data based on the system activity
d53 2
a54 2
.Bl -hang -width Ds
.It random
d56 1
a56 1
.It srandom
d58 1
a58 1
.It urandom
d60 1
a60 1
.It prandom
d62 2
d65 5
a69 1
random(9)
d71 2
a72 2
.Bl -tag -width /dev/random, /dev/srandom, /dev/urandom, /dev/prandom
.It Pa /dev/random, /dev/srandom, /dev/urandom, /dev/prandom
d74 2
d79 3
a81 1
device appeared in Linux operating system.
@
