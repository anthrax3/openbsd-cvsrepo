head	1.33;
access;
symbols
	OPENBSD_6_2:1.33.0.8
	OPENBSD_6_2_BASE:1.33
	OPENBSD_6_1:1.33.0.6
	OPENBSD_6_1_BASE:1.33
	OPENBSD_6_0:1.33.0.4
	OPENBSD_6_0_BASE:1.33
	OPENBSD_5_9:1.32.0.2
	OPENBSD_5_9_BASE:1.32
	OPENBSD_5_8:1.31.0.10
	OPENBSD_5_8_BASE:1.31
	OPENBSD_5_7:1.31.0.8
	OPENBSD_5_7_BASE:1.31
	OPENBSD_5_6:1.31.0.6
	OPENBSD_5_6_BASE:1.31
	OPENBSD_5_5:1.31.0.4
	OPENBSD_5_5_BASE:1.31
	OPENBSD_5_4:1.30.0.12
	OPENBSD_5_4_BASE:1.30
	OPENBSD_5_3:1.30.0.10
	OPENBSD_5_3_BASE:1.30
	OPENBSD_5_2:1.30.0.8
	OPENBSD_5_2_BASE:1.30
	OPENBSD_5_1_BASE:1.30
	OPENBSD_5_1:1.30.0.6
	OPENBSD_5_0:1.30.0.4
	OPENBSD_5_0_BASE:1.30
	OPENBSD_4_9:1.30.0.2
	OPENBSD_4_9_BASE:1.30
	OPENBSD_4_8:1.29.0.12
	OPENBSD_4_8_BASE:1.29
	OPENBSD_4_7:1.29.0.8
	OPENBSD_4_7_BASE:1.29
	OPENBSD_4_6:1.29.0.10
	OPENBSD_4_6_BASE:1.29
	OPENBSD_4_5:1.29.0.6
	OPENBSD_4_5_BASE:1.29
	OPENBSD_4_4:1.29.0.4
	OPENBSD_4_4_BASE:1.29
	OPENBSD_4_3:1.29.0.2
	OPENBSD_4_3_BASE:1.29
	OPENBSD_4_2:1.26.0.2
	OPENBSD_4_2_BASE:1.26
	OPENBSD_4_1:1.25.0.10
	OPENBSD_4_1_BASE:1.25
	OPENBSD_4_0:1.25.0.8
	OPENBSD_4_0_BASE:1.25
	OPENBSD_3_9:1.25.0.6
	OPENBSD_3_9_BASE:1.25
	OPENBSD_3_8:1.25.0.4
	OPENBSD_3_8_BASE:1.25
	OPENBSD_3_7:1.25.0.2
	OPENBSD_3_7_BASE:1.25
	OPENBSD_3_6:1.24.0.4
	OPENBSD_3_6_BASE:1.24
	OPENBSD_3_5:1.24.0.2
	OPENBSD_3_5_BASE:1.24
	OPENBSD_3_4:1.23.0.2
	OPENBSD_3_4_BASE:1.23
	OPENBSD_3_3:1.22.0.4
	OPENBSD_3_3_BASE:1.22
	OPENBSD_3_2:1.22.0.2
	OPENBSD_3_2_BASE:1.22
	OPENBSD_3_1:1.20.0.2
	OPENBSD_3_1_BASE:1.20
	OPENBSD_3_0:1.19.0.2
	OPENBSD_3_0_BASE:1.19
	OPENBSD_2_9:1.14.0.2
	OPENBSD_2_9_BASE:1.14
	OPENBSD_2_8:1.12.0.2
	OPENBSD_2_8_BASE:1.12
	OPENBSD_2_7:1.7.0.4
	OPENBSD_2_7_BASE:1.7
	OPENBSD_2_6:1.7.0.2
	OPENBSD_2_6_BASE:1.7
	OPENBSD_2_5:1.3.0.2
	OPENBSD_2_5_BASE:1.3
	OPENBSD_2_4:1.2.0.2
	OPENBSD_2_4_BASE:1.2;
locks; strict;
comment	@.\" @;


1.33
date	2016.02.27.20.57.32;	author natano;	state Exp;
branches;
next	1.32;
commitid	X5P6kChkxtz0ZRyu;

1.32
date	2015.11.01.21.26.48;	author jmc;	state Exp;
branches;
next	1.31;
commitid	WWHUg7NSwgnfw8Dy;

1.31
date	2014.01.21.03.15.46;	author schwarze;	state Exp;
branches;
next	1.30;

1.30
date	2010.09.19.12.32.10;	author jmc;	state Exp;
branches;
next	1.29;

1.29
date	2007.11.29.11.35.35;	author jmc;	state Exp;
branches;
next	1.28;

1.28
date	2007.11.28.13.06.57;	author tedu;	state Exp;
branches;
next	1.27;

1.27
date	2007.11.28.12.58.30;	author tedu;	state Exp;
branches;
next	1.26;

1.26
date	2007.05.31.19.19.54;	author jmc;	state Exp;
branches;
next	1.25;

1.25
date	2004.12.03.15.25.21;	author jsg;	state Exp;
branches;
next	1.24;

1.24
date	2003.11.09.16.06.07;	author jmc;	state Exp;
branches;
next	1.23;

1.23
date	2003.07.09.13.26.20;	author jmc;	state Exp;
branches;
next	1.22;

1.22
date	2002.10.01.07.14.14;	author miod;	state Exp;
branches;
next	1.21;

1.21
date	2002.08.29.07.23.46;	author wcobb;	state Exp;
branches;
next	1.20;

1.20
date	2001.12.14.17.13.10;	author mickey;	state Exp;
branches;
next	1.19;

1.19
date	2001.10.09.00.03.03;	author drahn;	state Exp;
branches;
next	1.18;

1.18
date	2001.10.05.14.45.54;	author mpech;	state Exp;
branches;
next	1.17;

1.17
date	2001.08.20.05.57.55;	author mpech;	state Exp;
branches;
next	1.16;

1.16
date	2001.08.03.14.30.26;	author mpech;	state Exp;
branches;
next	1.15;

1.15
date	2001.07.18.16.08.46;	author mickey;	state Exp;
branches;
next	1.14;

1.14
date	2001.02.13.02.23.34;	author marc;	state Exp;
branches;
next	1.13;

1.13
date	2001.01.28.19.48.44;	author marc;	state Exp;
branches;
next	1.12;

1.12
date	2000.10.18.21.11.11;	author mickey;	state Exp;
branches;
next	1.11;

1.11
date	2000.07.05.13.46.52;	author aaron;	state Exp;
branches;
next	1.10;

1.10
date	2000.07.03.15.10.57;	author mickey;	state Exp;
branches;
next	1.9;

1.9
date	2000.06.28.23.16.43;	author art;	state Exp;
branches;
next	1.8;

1.8
date	2000.06.07.22.41.58;	author mickey;	state Exp;
branches;
next	1.7;

1.7
date	99.10.05.20.53.11;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	99.07.21.01.03.07;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	99.07.09.13.35.43;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	99.05.16.19.57.02;	author alex;	state Exp;
branches;
next	1.3;

1.3
date	99.02.23.04.18.54;	author marc;	state Exp;
branches;
next	1.2;

1.2
date	98.09.01.16.38.21;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	98.07.27.23.14.11;	author marc;	state Exp;
branches;
next	;


desc
@@


1.33
log
@Add documentation for the APM_IOC_HIBERNATE ioctl.

tweaks and ok jmc@@
@
text
@.\"	$OpenBSD: apm.4,v 1.32 2015/11/01 21:26:48 jmc Exp $
.\"
.\"	Copyright (c) 1998 Marco S. Hyman
.\"
.\"	Permission to copy all or part of this material for any purpose is
.\"	granted provided that the above copyright notice and this paragraph
.\"	are duplicated in all copies.  THIS SOFTWARE IS PROVIDED ``AS IS''
.\"	AND WITHOUT ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, WITHOUT
.\"	LIMITATION, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS
.\"	FOR A PARTICULAR PURPOSE.
.\"
.Dd $Mdocdate: November 1 2015 $
.Dt APM 4 i386
.Os
.Sh NAME
.Nm apm
.Nd advanced power management device interface
.Sh SYNOPSIS
.Cd "apm0 at bios0 flags 0x0000"
.Sh DESCRIPTION
The
.Nm
driver provides an interface to the Advanced Power Management
.Pq APM
BIOS functions.
The driver supports versions 1.0, 1.1, and 1.2 interface specifications.
.Pp
This driver also provides an interface to
.Xr acpi 4
on some machines.
.Pp
The low two bytes of the flags specify the version of the specification
driver should conform to in binary decimal notation.
The value of 0x0101 would specify version 1.1 of the interface
specification to be used.
.Pp
The value of 0x10000 specifies whether to leave interrupts enabled
when calling APM BIOS routines.
This is needed for some
.Tn IBM
laptops, the symptoms are
hangs and freezes on suspend, stand by, and hibernation activities.
.Pp
The value of 0x20000 specifies to swap the bytes of the battery
life estimation (the DX register) as given from the APM BIOS.
This is needed for some
.Tn SONY VAIO
laptops, such as some 505 models.
.Pp
Configuration options:
.Pp
.Bl -tag -width DIAGNOSTIC -compact -offset indent
.It Dv APMDEBUG
Enable various driver status messages.
.It Dv DIAGNOSTIC
Enable debugging messages.
.It Dv DEBUG
Enable other debugging messages.
.El
.Pp
The
.Nm
driver implements the following
.Xr ioctl 2
calls.
They are defined in
.In machine/apmvar.h .
.Bl -tag -width Ds
.It Dv APM_IOC_REJECT
.Em Not implemented . DO NOT USE .
.It Dv APM_IOC_STANDBY
.Pq Li "no parameters"
Request
.Dq standby
mode.
.It Dv APM_IOC_SUSPEND
.Pq Li "no parameters"
Request
.Dq suspend
mode.
.It Dv APM_IOC_HIBERNATE
.Pq Li "no parameters"
Request
.Dq hibernate
mode.
.It Dv APM_IOC_GETPOWER
.Pq Li "struct apm_power_info"
Request the current power state.
The argument structure is as follows:
.Bd -literal -offset indent
struct apm_power_info {
	u_char battery_state;
	u_char ac_state;
	u_char battery_life;
	u_char spare1;
	u_int minutes_left;
	u_int spare2[6];
};
.Ed
.Pp
The following values are defined for
.Va battery_state :
.Bl -tag -width Ds
.It Dv APM_BATT_HIGH
Battery has a high state of charge.
.It Dv APM_BATT_LOW
Battery has a low state of charge.
.It Dv APM_BATT_CRITICAL
Battery has a critical state of charge.
.It Dv APM_BATT_CHARGING
Battery is not high, low, or critical and is currently charging.
.It Dv APM_BATT_UNKNOWN
Cannot read the current battery state.
.It Dv APM_BATTERY_ABSENT
No battery installed.
.El
.Pp
The following values are defined for
.Va ac_state :
.Bl -tag -width Ds
.It Dv APM_AC_OFF
External power not detected.
.It Dv APM_AC_ON
External power detected.
.It Dv APM_AC_BACKUP
Backup power in use.
.It Dv APM_AC_UNKNOWN
External power state unknown.
.El
.Pp
The
.Va battery_life
value contains the estimated percentage of battery life available.
100% indicates a full charge.
.Pp
The
.Va minutes_left
value contains the estimated number of minutes of battery life
remaining.
.It Dv APM_IOC_NEXTEVENT
.Pq Li "struct apm_event_info"
The APM driver stores up to
.Dv APM_NEVENTS
events.
This was defined as 16 at the time this documentation was written.
If the event list is full when a new event is detected the new event is lost.
.Dv APM_IOC_NEXTEVENT
ioctl returns the next event on the list or
.Er EAGAIN
if the event list is empty.
The format of the returned event is:
.Bd -literal -offset indent
struct apm_event_info {
	u_int type;
	u_int index;
	u_int spare[8];
};
.Ed
where
.Va index
is a sequential count of events that can be used to check if any
events were lost and
.Va type
is one of:
.Bl -tag -width Ds -offset indent -compact
.It Dv APM_STANDBY_REQ
.It Dv APM_SUSPEND_REQ
.It Dv APM_NORMAL_RESUME
.It Dv APM_CRIT_RESUME
.It Dv APM_BATTERY_LOW
.It Dv APM_POWER_CHANGE
.It Dv APM_UPDATE_TIME
.It Dv APM_CRIT_SUSPEND_REQ
.It Dv APM_USER_STANDBY_REQ
.It Dv APM_USER_SUSPEND_REQ
.It Dv APM_SYS_STANDBY_RESUME
.El
.It Dv APM_IOC_DEV_CTL
.Pq Li "struct apm_ctl"
Allows an application to directly set the
APM operating mode.
The argument structure is as follows:
.Bd -literal -offset indent
struct apm_ctl {
	u_int dev;
	u_int mode;
};
.Ed
.Pp
.Va dev
indicates the device, typically
.Dv APM_DEV_ALLDEVS .
.Pp
.Va mode
indicates the desired operating mode.
Possible values are
.Bl -tag -width Ds -compact -offset indent
.It Dv APM_SYS_READY
.It Dv APM_SYS_STANDBY
.It Dv APM_SYS_SUSPEND
.It Dv APM_SYS_OFF
.It Dv APM_LASTREQ_INPROG
.It Dv APM_LASTREQ_REJECTED
.El
.It Dv APM_IOC_PRN_CTL
.Pq Li "int"
This
.Xr ioctl 2
controls message output by the APM
driver when a power change event is detected.
The integer parameter is one of:
.Bl -tag -width Ds
.It Dv APM_PRINT_ON
All power change events result in a message.
This is the normal operating mode for the driver.
.It Dv APM_PRINT_OFF
Power change event messages are suppressed.
.It Dv APM_PRINT_PCT
Power change event messages are suppressed unless the estimated
battery life percentage changes.
.El
.Pp
However, in no case will power status messages be displayed until the
battery life goes below the percentage in the
.Xr sysctl 8
state variable
.Dv machdep.apmwarn .
Setting
.Dv machdep.apmwarn
to zero disables all warnings regardless of the
.Dv APM_IOC_PRN_CTL
setting.
.El
.Pp
As noted above, the operation of the APM
driver can be modified using the
.Dv machdep.apmwarn
.Xr sysctl 8
variable.
Another driver modifier is the
.Dv machdep.apmhalt
variable.
When
.Dv machdep.apmhalt
is set to 1 the APM
power down code is modified in a way necessary for correct operation on
some systems, mainly
.Tn IBM
laptops.
If your system does not power down when given the command
.Li "halt -p"
try setting
.Dv machdep.apmhalt
to 1 using
.Xr sysctl 8 .
The variable can be set at boot time in
.Xr sysctl.conf 5 .
.Sh FILES
.Bl -tag -width "/dev/apmctlXXX"
.It /dev/apm
Power management data device.
May only be opened read-only.
May be opened by multiple concurrent users.
.It /dev/apmctl
Power management control device.
May be opened read-write or write-only.
May only be opened by one user at a time.
An attempt to open the file when in use will fail, returning
.Er EBUSY .
.El
.Sh SEE ALSO
.Xr acpi 4 ,
.Xr intro 4 ,
.Xr sysctl.conf 5 ,
.Xr apm 8 ,
.Xr apmd 8 ,
.Xr halt 8 ,
.Xr sysctl 8
.Sh HISTORY
The
.Nm
driver source code contains these copyrights:
.Pp
.Bl -item -compact
.It
.Li Copyright (c) 1995 John T. Kohl.  All rights reserved.
.It
.Li Copyright (C) 1994 by HOSOKAWA Tatsumi <hosokawa@@mt.cs.keio.ac.jp>
.El
.Pp
\&...and has been hacked on by many others since.
.Sh BUGS
Not all the BIOSes support power down the way we are attempting
to execute it.
.Pp
Not all BIOS vendors even read the specification.
@


1.32
log
@replace "can not" with "cannot";
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.31 2014/01/21 03:15:46 schwarze Exp $
d12 1
a12 1
.Dd $Mdocdate: January 21 2014 $
d80 5
@


1.31
log
@obvious .Pa fixes; found with mandocdb(8)
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.30 2010/09/19 12:32:10 jmc Exp $
d12 1
a12 1
.Dd $Mdocdate: September 19 2010 $
d108 1
a108 1
Can not read the current battery state.
@


1.30
log
@- remove some silly .Tn/.Tm
- supply a missing -width to one of the lists
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.29 2007/11/29 11:35:35 jmc Exp $
d12 1
a12 1
.Dd $Mdocdate: November 29 2007 $
d67 1
a67 1
.Aq Pa machine/apmvar.h .
@


1.29
log
@- for acpi(4), document /dev/apm and /dev/apmctl
- for apm(4) pages, sync the description of these devices

ok tedu
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.28 2007/11/28 13:06:57 tedu Exp $
d12 1
a12 1
.Dd $Mdocdate: November 28 2007 $
d24 2
a25 3
.Pq Tn APM
.Tn BIOS
functions.
d38 1
a38 3
when calling
.Tn APM BIOS
routines.
d45 1
a45 2
life estimation (the DX register) as given from the
.Tn APM BIOS .
d137 1
a137 3
The
.Tn APM
driver stores up to
d176 1
a176 2
.Tm APM
operating mode.
d192 1
a192 1
.Bl -tag -compact -offset indent
d204 1
a204 2
controls message output by the
.Tn APM
d230 1
a230 2
As noted above, the operation of the
.Tn APM
d240 1
a240 2
is set to 1 the
.Tn APM
@


1.28
log
@provide a hint that apm might be acpi on some machines
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.27 2007/11/28 12:58:30 tedu Exp $
d264 3
a266 4
.Bl -tag -width /dev/apmctl -compact
.It Pa /dev/apm
.Tn APM
data device.
d269 2
a270 3
.It Pa /dev/apmctl
.Tn APM
control device.
@


1.27
log
@first attempt to consolidate some of the apm/acpi documentation.
ok deraadt
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.26 2007/05/31 19:19:54 jmc Exp $
d12 1
a12 1
.Dd $Mdocdate: May 31 2007 $
d28 4
@


1.26
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.25 2004/12/03 15:25:21 jsg Exp $
d12 1
a12 1
.Dd $Mdocdate$
d275 1
@


1.25
log
@remove commented reference to dead URL.
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.24 2003/11/09 16:06:07 jmc Exp $
d12 1
a12 1
.Dd July 17, 1998
@


1.24
log
@remove .Pp's before lists and displays;
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.23 2003/07/09 13:26:20 jmc Exp $
a280 2
.\" .Pp
.\" http://developer.intel.com/ial/powermgm/apmv12.pdf
@


1.23
log
@- fix lists/displays
- quote .Cd's
- add/remove .Pp's as necessary
- fix some .Re/.Rs's
- simplify macros
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.22 2002/10/01 07:14:14 miod Exp $
a67 1
.Pp
@


1.22
log
@Manpage cleaning police:
- more and better .Xr
- prefer "option FOO" rather than "options FOO", and put the option
  lines after the device definition lines in SYNOPSIS
- identify these manpages as section 4/i386, not section 4.
- long awaited update to intro(4/i386)
- npx(4/i386) was too NetBSD-ish - we only provide one math emulator
- random touches

ok deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.21 2002/08/29 07:23:46 wcobb Exp $
d19 1
a19 1
.Cd apm0 at bios0 flags 0x0000
@


1.21
log
@-compat -> -compact in .Bl; ok mpech@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.20 2001/12/14 17:13:10 mickey Exp $
d276 1
@


1.20
log
@document 0x20000 flag
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.19 2001/10/09 00:03:03 drahn Exp $
d261 1
a261 1
.Bl -tag -width /dev/apmctl -compat
@


1.19
log
@Subsection was left out of the manpage, i386 added.
ok miod@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.18 2001/10/05 14:45:54 mpech Exp $
d42 7
@


1.18
log
@Powered by @@mantoya:
o) start new sentence on a new line;
o) minor mdoc fixes;
millert@@ ok

Tip of the day:   www.mpechismazohist.com
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.17 2001/08/20 05:57:55 mpech Exp $
d13 1
a13 1
.Dt APM 4
@


1.17
log
@Powered by @@mantoya.
o) fix bogus .Xr usage;

millert@@ ok.
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.16 2001/08/03 14:30:26 mpech Exp $
d233 2
a234 1
variable.   Another driver modifier is the
d236 2
a237 1
variable.   When
d244 2
a245 1
laptops.   If your system does not power down when given the command
@


1.16
log
@o) Remove unneeded .Nm arguments;
o) Sort SEE ALSO;
o) Minor .Nm and .Nd fixes;
o) Typo;

millert@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.15 2001/07/18 16:08:46 mickey Exp $
d247 1
a247 1
.Xr sysctl(8) .
d249 1
a249 1
.Xr sysctl.conf(5) .
@


1.15
log
@apm12.pdf does not exist anymore
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.14 2001/02/13 02:23:34 marc Exp $
d17 1
a17 2
.Nd
advanced power management device interface
@


1.14
log
@chare -> charge; Matt Bing <matt@@anzen.com>
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.13 2001/01/28 19:48:44 marc Exp $
d272 2
a273 2
.Pp
http://developer.intel.com/ial/powermgm/apmv12.pdf
d290 2
@


1.13
log
@machdep.apmhalt docu goes here (and soon in apm.8).
Someone with better english skills than mine may want to edit the wording.
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.12 2000/10/18 21:11:11 mickey Exp $
d99 1
a99 1
Battery has a critical state of chare.
@


1.12
log
@add a BUGS section, add a bug w/ powerdown
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.11 2000/07/05 13:46:52 aaron Exp $
d228 23
d267 1
d269 3
a271 1
.Xr apmd 8
@


1.11
log
@man4.i386 repairs.
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.10 2000/07/03 15:10:57 mickey Exp $
d261 3
@


1.10
log
@remove obsolote kernel option description
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.9 2000/06/28 23:16:43 art Exp $
d27 2
a28 2
functions.  The driver supports versions 1.0, 1.1, and 1.2 interface
specifications.
d38 2
a39 1
routines. This is needed for some
d59 2
a60 1
calls.  They are defined in
d78 2
a79 1
Request the current power state. The argument structure is as follows:
d136 3
a138 3
events. This was defined as 16 at the time this documentation was written.
If the event list is full when a new event is detected the new event is
lost.
d142 2
a143 1
if the event list is empty.  The format of the returned event is:
d174 2
a175 1
operating mode.   The argument structure is as follows:
d188 2
a189 1
indicates the desired operating mode.  Possible values are
d204 2
a205 2
driver when a power change event is detected.  The integer parameter is one
of:
d208 2
a209 2
All power change events result in a message.  This is the normal
operating mode for the driver.
d232 3
a234 2
data device.  May only be opened read-only.  May be opened by multiple
concurrent users.
d237 4
a240 3
control device.  May be opened read-write or write-only.  May only be
opened by one user at a time.  An attempt to open the file when in
use will fail, returning
d252 1
d259 2
a260 1
and has been hacked on by many others since.
@


1.9
log
@Add some missing words and some other fixes.
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.8 2000/06/07 22:41:58 mickey Exp $
d45 1
a45 6
.Bl -tag -width APM_V10_ONLY -compact -offset indent
.It Dv APM_V10_ONLY
Disable support for v1.1 of the
.Tn APM
.Tn BIOS
interface.
@


1.8
log
@explain flags
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.7 1999/10/05 20:53:11 aaron Exp $
d99 1
a99 1
Battery has a low state of charge
d101 1
a101 1
Battery
d103 1
a103 1
Battery is not high, low, or critical and is current charging.
@


1.7
log
@The .Bl -tag flag expects a -width argument.
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.6 1999/07/21 01:03:07 deraadt Exp $
d20 1
a20 1
.Cd apm0 at bios0
d27 1
a27 1
functions.  The driver supports both the v1.0 and v1.1 interface
d29 13
@


1.6
log
@grammar; evanc@@concer.to
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.5 1999/07/09 13:35:43 aaron Exp $
d34 1
a34 1
Disables support for version 1.1 of the
d53 1
a53 1
.Bl -tag -width APM_IOC_NEXTEVENT
d59 1
a59 1
.Sq standby
d64 1
a64 1
.Sq suspend
d79 1
d82 1
a82 1
.Bl -tag -width APM_BATT_FLAG_NOBATTERY
d99 1
a99 1
.Bl -tag -width APM_AC_UNKNOWN
d145 1
a145 1
.Bl -tag -compact -offset indent
d192 1
a192 1
.Bl -tag -width APM_PRINT_OFF
d230 2
a231 1
.Nm http://developer.intel.com/ial/powermgm/apmv12.pdf
@


1.5
log
@- remove all trailing whitespace
     * except when it is escaped with a `\' at the end of the line
- fix remaining .Nm usage as well
- this is from a patch I received from kwesterback@@home.com, who has been
  working on some scripts for fixing formatting errors in mdoc'd man pages

Ok, so there could be a cost/benefit debate with this commit, but since I have
the patch we might as well commit it...
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.4 1999/05/16 19:57:02 alex Exp $
d222 1
a222 1
opened by a one user at a time.  An attempt to open the file when in
@


1.4
log
@Cleanup xrefs under SEE ALSO.  Specifically:

  - Sort xrefs by section, and then alphabetically.
  - Add missing commas between xref items.
  - Remove commas from the last xref entry.
  - Remove duplicate entries.
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.3 1999/02/23 04:18:54 marc Exp $
d110 1
a110 1
.Va battery_life 
@


1.3
log
@document power status messages supressed until the
battery life falls below machdep.apmwarn
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.2 1998/09/01 16:38:21 deraadt Exp $
d228 1
a228 1
.Xr apmd 8 ,
@


1.2
log
@more man page fixes; aaron@@ug.cs.dal.ca
@
text
@d1 1
a1 1
.\"	$OpenBSD: apm.4,v 1.1 1998/07/27 23:14:11 marc Exp $
d201 11
@


1.1
log
@add apm(4) man page
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d196 1
a196 1
Power change event message are suppressed.
d198 1
a198 1
Power change event message are suppressed unless the estimated
@

