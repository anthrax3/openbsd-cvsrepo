head	1.52;
access;
symbols
	OPENBSD_6_1_BASE:1.52
	OPENBSD_6_0:1.52.0.14
	OPENBSD_6_0_BASE:1.52
	OPENBSD_5_9:1.52.0.2
	OPENBSD_5_9_BASE:1.52
	OPENBSD_5_8:1.52.0.10
	OPENBSD_5_8_BASE:1.52
	OPENBSD_5_7:1.52.0.8
	OPENBSD_5_7_BASE:1.52
	OPENBSD_5_6:1.52.0.6
	OPENBSD_5_6_BASE:1.52
	OPENBSD_5_5:1.52.0.4
	OPENBSD_5_5_BASE:1.52
	OPENBSD_5_4:1.51.0.2
	OPENBSD_5_4_BASE:1.51
	OPENBSD_5_3:1.48.0.2
	OPENBSD_5_3_BASE:1.48
	OPENBSD_5_2:1.47.0.6
	OPENBSD_5_2_BASE:1.47
	OPENBSD_5_1_BASE:1.47
	OPENBSD_5_1:1.47.0.4
	OPENBSD_5_0:1.47.0.2
	OPENBSD_5_0_BASE:1.47
	OPENBSD_4_9:1.45.0.6
	OPENBSD_4_9_BASE:1.45
	OPENBSD_4_8:1.45.0.4
	OPENBSD_4_8_BASE:1.45
	OPENBSD_4_7:1.45.0.2
	OPENBSD_4_7_BASE:1.45
	OPENBSD_4_6:1.44.0.6
	OPENBSD_4_6_BASE:1.44
	OPENBSD_4_5:1.44.0.2
	OPENBSD_4_5_BASE:1.44
	OPENBSD_4_4:1.43.0.6
	OPENBSD_4_4_BASE:1.43
	OPENBSD_4_3:1.43.0.4
	OPENBSD_4_3_BASE:1.43
	OPENBSD_4_2:1.43.0.2
	OPENBSD_4_2_BASE:1.43
	OPENBSD_4_1:1.42.0.4
	OPENBSD_4_1_BASE:1.42
	OPENBSD_4_0:1.42.0.2
	OPENBSD_4_0_BASE:1.42
	OPENBSD_3_9:1.40.0.2
	OPENBSD_3_9_BASE:1.40
	OPENBSD_3_8:1.38.0.4
	OPENBSD_3_8_BASE:1.38
	OPENBSD_3_7:1.38.0.2
	OPENBSD_3_7_BASE:1.38
	OPENBSD_3_6:1.34.0.4
	OPENBSD_3_6_BASE:1.34
	OPENBSD_3_5:1.34.0.2
	OPENBSD_3_5_BASE:1.34
	OPENBSD_3_4:1.32.0.2
	OPENBSD_3_4_BASE:1.32
	OPENBSD_3_3:1.29.0.2
	OPENBSD_3_3_BASE:1.29
	OPENBSD_3_2:1.25.0.2
	OPENBSD_3_2_BASE:1.25
	OPENBSD_3_1:1.23.0.2
	OPENBSD_3_1_BASE:1.23
	OPENBSD_3_0:1.22.0.2
	OPENBSD_3_0_BASE:1.22
	OPENBSD_2_9:1.21.0.2
	OPENBSD_2_9_BASE:1.21
	OPENBSD_2_8:1.14.0.2
	OPENBSD_2_8_BASE:1.14
	OPENBSD_2_7:1.7.0.2
	OPENBSD_2_7_BASE:1.7;
locks; strict;
comment	@.\" @;


1.52
date	2013.08.14.06.32.34;	author jmc;	state Exp;
branches;
next	1.51;

1.51
date	2013.07.16.16.05.48;	author schwarze;	state Exp;
branches;
next	1.50;

1.50
date	2013.06.02.20.28.26;	author tedu;	state Exp;
branches;
next	1.49;

1.49
date	2013.06.02.20.23.33;	author tedu;	state Exp;
branches;
next	1.48;

1.48
date	2012.08.18.08.44.25;	author jmc;	state Exp;
branches;
next	1.47;

1.47
date	2011.07.27.00.50.23;	author sthen;	state Exp;
branches;
next	1.46;

1.46
date	2011.03.13.21.26.51;	author jmc;	state Exp;
branches;
next	1.45;

1.45
date	2009.10.25.18.38.18;	author sobrado;	state Exp;
branches;
next	1.44;

1.44
date	2008.09.11.17.31.26;	author brad;	state Exp;
branches;
next	1.43;

1.43
date	2007.05.31.19.19.49;	author jmc;	state Exp;
branches;
next	1.42;

1.42
date	2006.08.30.22.56.05;	author jmc;	state Exp;
branches;
next	1.41;

1.41
date	2006.07.22.02.26.34;	author brad;	state Exp;
branches;
next	1.40;

1.40
date	2006.01.08.00.00.51;	author jmc;	state Exp;
branches;
next	1.39;

1.39
date	2005.09.30.20.34.24;	author jaredy;	state Exp;
branches;
next	1.38;

1.38
date	2005.03.12.10.32.40;	author jmc;	state Exp;
branches;
next	1.37;

1.37
date	2005.02.06.10.15.00;	author jmc;	state Exp;
branches;
next	1.36;

1.36
date	2005.02.05.23.58.17;	author jsg;	state Exp;
branches;
next	1.35;

1.35
date	2004.09.30.19.59.24;	author mickey;	state Exp;
branches;
next	1.34;

1.34
date	2004.03.21.19.50.44;	author miod;	state Exp;
branches;
next	1.33;

1.33
date	2003.11.09.16.06.07;	author jmc;	state Exp;
branches;
next	1.32;

1.32
date	2003.08.23.18.42.01;	author mickey;	state Exp;
branches;
next	1.31;

1.31
date	2003.05.05.13.51.57;	author jmc;	state Exp;
branches;
next	1.30;

1.30
date	2003.04.14.06.39.23;	author jmc;	state Exp;
branches;
next	1.29;

1.29
date	2003.03.16.10.18.44;	author jmc;	state Exp;
branches;
next	1.28;

1.28
date	2002.11.08.08.08.47;	author mpech;	state Exp;
branches;
next	1.27;

1.27
date	2002.10.21.20.31.39;	author henning;	state Exp;
branches;
next	1.26;

1.26
date	2002.10.20.17.00.01;	author henning;	state Exp;
branches;
next	1.25;

1.25
date	2002.09.26.07.55.39;	author miod;	state Exp;
branches;
next	1.24;

1.24
date	2002.04.18.19.15.09;	author jason;	state Exp;
branches;
next	1.23;

1.23
date	2002.02.17.05.16.36;	author nate;	state Exp;
branches;
next	1.22;

1.22
date	2001.10.05.19.08.14;	author nate;	state Exp;
branches;
next	1.21;

1.21
date	2001.04.23.15.30.25;	author aaron;	state Exp;
branches;
next	1.20;

1.20
date	2001.04.18.14.48.15;	author aaron;	state Exp;
branches;
next	1.19;

1.19
date	2001.04.11.20.49.07;	author miod;	state Exp;
branches;
next	1.18;

1.18
date	2001.03.01.16.11.16;	author aaron;	state Exp;
branches;
next	1.17;

1.17
date	2000.12.21.21.01.15;	author aaron;	state Exp;
branches;
next	1.16;

1.16
date	2000.11.16.06.08.30;	author aaron;	state Exp;
branches;
next	1.15;

1.15
date	2000.11.06.20.01.53;	author aaron;	state Exp;
branches;
next	1.14;

1.14
date	2000.10.27.08.01.07;	author aaron;	state Exp;
branches;
next	1.13;

1.13
date	2000.10.26.22.37.03;	author aaron;	state Exp;
branches;
next	1.12;

1.12
date	2000.10.26.21.04.39;	author aaron;	state Exp;
branches;
next	1.11;

1.11
date	2000.10.18.02.38.21;	author aaron;	state Exp;
branches;
next	1.10;

1.10
date	2000.10.13.17.55.58;	author aaron;	state Exp;
branches;
next	1.9;

1.9
date	2000.09.12.01.06.50;	author aaron;	state Exp;
branches;
next	1.8;

1.8
date	2000.09.09.17.15.55;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	2000.04.12.16.17.40;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	2000.04.03.21.19.36;	author aaron;	state Exp;
branches;
next	1.5;

1.5
date	2000.02.23.18.08.55;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	2000.01.18.21.48.58;	author aaron;	state Exp;
branches;
next	1.3;

1.3
date	2000.01.10.08.15.36;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	2000.01.10.08.14.11;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	99.12.08.22.35.34;	author aaron;	state Exp;
branches;
next	;


desc
@@


1.52
log
@no longer any need to quote macro lines with >9 args;
From: Jan Stary
@
text
@.\"	$OpenBSD: dc.4,v 1.51 2013/07/16 16:05:48 schwarze Exp $
.\"
.\" Copyright (c) 1997, 1998, 1999
.\"	Bill Paul <wpaul@@ee.columbia.edu>. All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by Bill Paul.
.\" 4. Neither the name of the author nor the names of any co-contributors
.\"    may be used to endorse or promote products derived from this software
.\"   without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY Bill Paul AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL Bill Paul OR THE VOICES IN HIS HEAD
.\" BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
.\" CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
.\" SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
.\" INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
.\" CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
.\" ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF
.\" THE POSSIBILITY OF SUCH DAMAGE.
.\"
.\" $FreeBSD: src/share/man/man4/dc.4,v 1.1 1999/12/04 17:41:24 wpaul Exp $
.\"
.Dd $Mdocdate: July 16 2013 $
.Dt DC 4
.Os
.Sh NAME
.Nm dc
.Nd DEC/Intel 21140/21142/21143/21145 and clones 10/100 Ethernet device
.Sh SYNOPSIS
.Cd "dc* at pci?"
.Cd "dc* at cardbus?"
.Cd "amphy* at mii?"
.Cd "bmtphy* at mii?"
.Cd "dcphy* at mii?"
.Cd "icsphy* at mii?"
.Cd "lxtphy* at mii?"
.Cd "mtdphy* at mii?"
.Cd "nsphy* at mii?"
.Cd "nsphyter* at mii?"
.Cd "sqphy* at mii?"
.Cd "tqphy* at mii?"
.Sh DESCRIPTION
The
.Nm
driver provides support for several PCI, Mini PCI, and CardBus Fast Ethernet
adapters and embedded controllers based on the following chipsets:
.Pp
.Bl -bullet -compact -offset indent
.It
DEC 21140 PCI
.It
DEC/Intel 21143 PCI and CardBus
.It
Intel 21145 PCI
.It
Macronix 98713, 98713A, 98715, 98715A, 98725, 98727 and 98732
.It
Davicom DM9100, DM9102, and DM9102A
.It
ASIX Electronics AX88140A and AX88141
.It
ADMtek AL981 Comet, AN983 Centaur-P and ADM9511/ADM9513 Centaur-II PCI
.It
ADMtek AN985 Centaur-C CardBus
.It
Lite-On 82c168 and 82c169 PNIC
.It
Lite-On/Macronix 82c115 PNIC II
.It
Xircom X3201-based CardBus
.El
.Pp
All of these chips have the same general register layout, DMA
descriptor format and method of operation.
All of the clone chips are based on the 21143 design with
various modifications.
(The 21140 is an older version of the 21143.)
The 21143 itself has support for 10baseT, BNC, AUI, MII and symbol
media attachments, 10 and 100Mbps speeds in full or half duplex,
and built-in NWAY autonegotiation.
The 21143 also offers several receive filter programming options including
perfect filtering, inverse perfect filtering and hash table filtering.
The 21145 seems to be 10Mbps only and has an additional (unsupported)
HomePNA PHY.
.Pp
Some clone chips duplicate the 21143 fairly closely while others
only maintain superficial similarities.
Some support only MII media attachments.
Others use different receiver filter programming mechanisms.
At least one supports only chained DMA descriptors
(most support both chained descriptors and contiguously allocated
fixed size rings).
Some chips (especially the PNIC) also have peculiar bugs.
The
.Nm
driver does its best to provide generalized support for all
of these chipsets in order to keep special case code to a minimum.
.Pp
These chips are used by many vendors, which makes it
difficult to provide a complete list of all supported cards.
The following NICs are known to work with the
.Nm
driver at this time:
.Pp
.Bl -bullet -compact -offset indent
.It
Digital DE500-BA 10/100 (21143, non-MII)
.It
Built-in DE500-BA on DEC Alpha workstations (21143, non-MII)
.It
Built-in Ethernet on Linksys EtherFast 10/100 Instant GigaDrive (DM9102, MII)
.It
Kingston KNE100TX (21143, MII)
.It
D-Link DFE-570TX (21143, MII, quad port)
.It
NDC SOHOware SFA110A (98713A)
.It
NDC SOHOware SFA110A Rev B4 (98715AEC-C)
.It
SVEC PN102-TX (98713)
.It
CNet Pro120A (98715A or 98713A) and CNet Pro120B (98715)
.It
Compex RL100-TX (98713 or 98713A)
.It
Linksys LNE100TX (PNIC 82c168, 82c169)
.It
NetGear FA310-TX Rev. D1, D2 or D3 (PNIC 82c169)
.It
Matrox FastNIC 10/100 (PNIC 82c168, 82c169)
.It
Kingston KNE110TX (PNIC 82c169)
.It
Linksys LNE100TX v2.0 (PNIC II 82c115)
.It
Jaton XpressNet (Davicom DM9102)
.It
Alfa Inc GFC2204 (ASIX AX88140A)
.It
CNet Pro110B (ASIX AX88140A)
.It
Linksys LNE100TX v4.x (ADMtek AN983 Centaur-P)
.It
Xircom CardBus, including RealPort models (Xircom X3201)
.It
IBM EtherJet 10/100 CardBus (Intel 21143)
.It
Accton EN1217 (98715) and EN2242 (ADMtek Centaur)
.It
Mototech ME316 (ADMtek Centaur)
.It
Conexant LANfinity RS7112 Mini PCI
.El
.Pp
The
.Nm
driver supports the following media types:
.Bl -tag -width full-duplex
.It autoselect
Enable autoselection of the media type and options.
The user can manually override
the autoselected mode by adding media options to the
.Xr hostname.if 5
file.
.Pp
Note: the built-in NWAY autonegotiation on the original PNIC 82c168
chip is horribly broken and is not supported by the
.Nm
driver at this time: the chip will operate in any speed or duplex
mode, however these must be set manually.
The original 82c168 appears on very early revisions of the Linksys LNE100TX
and Matrox FastNIC.
.It 10baseT
Set 10Mbps operation.
The
.Ar mediaopt
option can also be used to enable
.Ar full-duplex
operation.
Not specifying
.Ar full duplex
implies
.Ar half-duplex
mode.
.It 100baseTX
Set 100Mbps (Fast Ethernet) operation.
The
.Ar mediaopt
option can also be used to enable
.Ar full-duplex
operation.
Not specifying
.Ar full duplex
implies
.Ar half-duplex
mode.
.El
.Pp
The
.Nm
driver supports the following media options:
.Bl -tag -width full-duplex
.It full-duplex
Force full duplex operation.
The interface will operate in half duplex mode if this media option
is not specified.
.El
.Pp
Note that the 100baseTX media type may not be available on certain
Intel 21143 adapters which support 10Mbps media attachments only.
The Intel 21145 supports 10Mbps half-duplex only.
.Pp
For more information on configuring this device, see
.Xr ifconfig 8 .
.Sh DIAGNOSTICS
.Bl -diag
.It "dc0: couldn't map ports/memory"
A fatal initialization error has occurred.
.It "dc0: couldn't map interrupt"
A fatal initialization error has occurred.
.It "dc0: watchdog timeout"
A packet was queued for transmission and a transmit command was
issued, however the device failed to acknowledge the transmission
before a timeout expired.
This can happen if the device is unable to deliver interrupts for some
reason, or if there is a problem with the network connection (cable).
.It "dc0: no memory for rx list"
The driver failed to allocate an mbuf for the receiver ring.
.It "dc0: TX underrun -- increasing TX threshold"
The device generated a transmit underrun error while attempting to
DMA and transmit a packet.
This happens if the host is not able to DMA the packet data into the NIC's
FIFO fast enough.
The driver will dynamically increase the transmit start threshold so that
more data must be DMAed into the FIFO before the NIC will start
transmitting it onto the wire.
.It "dc0: TX underrun -- using store and forward mode"
The device continued to generate transmit underruns even after all
possible transmit start threshold settings had been tried, so the
driver programmed the chip for store and forward mode.
In this mode, the NIC will not begin transmission until the entire packet
has been transferred into its FIFO memory.
.El
.Sh SEE ALSO
.Xr amphy 4 ,
.Xr arp 4 ,
.Xr bmtphy 4 ,
.Xr cardbus 4 ,
.Xr dcphy 4 ,
.Xr icsphy 4 ,
.Xr ifmedia 4 ,
.Xr intro 4 ,
.Xr lxtphy 4 ,
.Xr mtdphy 4 ,
.Xr netintro 4 ,
.Xr nsphy 4 ,
.Xr nsphyter 4 ,
.Xr pci 4 ,
.Xr sqphy 4 ,
.Xr tqphy 4 ,
.Xr hostname.if 5 ,
.Xr ifconfig 8
.Rs
.%T ADMtek AL981 and AL983 data sheets
.%U http://www.admtek.com.tw
.Re
.Rs
.%T ASIX Electronics AX88140A and AX88141 data sheets
.%U http://www.asix.com.tw
.Re
.Rs
.%T Davicom DM9102 data sheet
.%U http://www.davicom8.com
.Re
.Rs
.%T Intel 21143 Hardware Reference Manual
.%U http://developer.intel.com
.Re
.Rs
.%T Macronix 98713/A, 98715/A and 98725 data sheets
.%U http://www.macronix.com
.Re
.Rs
.%T Macronix 98713/A and 98715/A app notes
.%U http://www.macronix.com
.Re
.Sh HISTORY
The
.Nm
device driver first appeared in
.Fx 4.0 .
.Ox
support was added in
.Ox 2.7 .
.Sh AUTHORS
.An -nosplit
The
.Nm
driver was written by
.An Bill Paul Aq Mt wpaul@@ee.columbia.edu
and ported to
.Ox
by
.An Aaron Campbell Aq Mt aaron@@openbsd.org .
.Sh BUGS
The Macronix application notes claim that in order to put the
chips in normal operation, the driver must write a certain magic
number into the CSR16 register.
The numbers are documented in the app notes, but the exact meaning of the
bits is not.
.Pp
The 98713A seems to have a problem with 10Mbps full duplex mode.
The transmitter works but the receiver tends to produce many
unexplained errors leading to very poor overall performance.
The 98715A does not exhibit this problem.
All other modes on the 98713A seem to work correctly.
.Pp
The original 82c168 PNIC chip has built-in NWAY support which is
used on certain early Linksys LNE100TX and Matrox FastNIC cards,
however it is horribly broken and difficult to use reliably.
Consequently, autonegotiation is not currently supported for this
chipset: the driver defaults the NIC to 10baseT half duplex, and it's
up to the operator to manually select a different mode if necessary.
(Later cards use an external MII transceiver to implement NWAY
autonegotiation and work correctly.)
.Pp
The
.Nm
driver programs 82c168 and 82c169 PNIC chips to use the store and
forward setting for the transmit start threshold by default.
This is to work around problems with some NIC/PCI bus combinations where
the PNIC can transmit corrupt frames when operating at 100Mbps,
probably due to PCI DMA burst transfer errors.
.Pp
The 82c168 and 82c169 PNIC chips also have a receiver bug that
sometimes manifests during periods of heavy receive and transmit
activity, where the chip will improperly DMA received frames to
the host.
The chips appear to upload several kilobytes of garbage
data along with the received frame data, dirtying several RX buffers
instead of just the expected one.
The
.Nm
driver detects this condition and will salvage the frame, however
it incurs a serious performance penalty in the process.
.Pp
The PNIC chips also sometimes generate a transmit underrun error when
the driver attempts to download the receiver filter setup frame, which
can result in the receive filter being incorrectly programmed.
The
.Nm
driver will watch for this condition and requeue the setup frame until
it is transferred successfully.
.Pp
The ADMtek AL981 chip (and possibly the AN983 as well) has been observed
to sometimes wedge on transmit: this appears to happen when the driver
queues a sequence of frames which cause it to wrap from the end of
the transmit descriptor ring back to the beginning.
The
.Nm
driver attempts to avoid this condition by not queuing any frames past
the end of the transmit ring during a single invocation of the
.Fn dc_start
routine.
This workaround has a negligible impact on transmit performance.
.Pp
The
.Fn mii_tick
function does not currently run for ASIX boards, meaning cable disconnects
and reconnects can go unnoticed.
The AX88140A and AX88141 data sheets indicate that they don't have RX or TX
state registers (the bits are reserved).
Therefore, we can't seem to reliably detect when the adapter is idle.
.Pp
The Davicom interfaces require a grossly high PCI latency timer value to
function properly.
This means when a Davicom adapter is present in the machine, it is given
an unfairly high amount of bandwidth on the PCI bus, unnecessarily taking
time away from other devices.
Therefore, Davicom network cards are not recommended for use with
.Ox .
Be careful; some motherboards have Davicom interfaces built-in.
@


1.51
log
@use .Mt for email addresses; from Jan Stary <hans at stare dot cz>; ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.50 2013/06/02 20:28:26 tedu Exp $
d35 1
a35 1
.Dd $Mdocdate: June 2 2013 $
d40 1
a40 1
.Nd "DEC/Intel 21140/21142/21143/21145 and clones 10/100 Ethernet device"
@


1.50
log
@remove obsolete note about D3 power state. this diagnostic is not present
in any of these drivers
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.49 2013/06/02 20:23:33 tedu Exp $
d313 1
a313 1
.An Bill Paul Aq wpaul@@ee.columbia.edu
d317 1
a317 1
.An Aaron Campbell Aq aaron@@openbsd.org .
@


1.49
log
@change format strings in error messages to reasonable values more likely
to be understood by people who don't program in C.
ok everyone
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.48 2012/08/18 08:44:25 jmc Exp $
d35 1
a35 1
.Dd $Mdocdate: August 18 2012 $
a255 20
.It "dc0: chip is in D3 power state -- setting to D0"
This message applies only to adapters which support power management.
Some operating systems place the controller in low power
mode when shutting down, and some PCI BIOSes fail to bring the chip
out of this state before configuring it.
The controller loses all of its PCI configuration in the D3 state,
so if the BIOS does not set it back to full power mode in time,
it won't be able to configure it correctly.
The driver tries to detect this condition and bring
the adapter back to the D0 (full power) state, but this may not be
enough to return the driver to a fully operational condition.
If you see this message at boot time and the driver fails to attach
the device as a network interface, you will have to perform a second
warm boot to have the device properly configured.
.Pp
Note that this condition only occurs when warm booting from another
operating system.
If you power down your system prior to booting
.Ox ,
the card should be configured correctly.
@


1.48
log
@within Rs/Re reference blocks, use %U instead of %O (or any other
variants) for URLs, allowing mandoc -Thtml to properly generate links;

(sendmail.8 changes are simply using Lk, which i somehow missed in previous)

ingo reminded me to verify that gnu groff recognises %U: 1.20.1 does not,
but 1.21 does;
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.47 2011/07/27 00:50:23 sthen Exp $
d35 1
a35 1
.Dd $Mdocdate: July 27 2011 $
d230 1
a230 1
.It "dc%d: couldn't map ports/memory"
d232 1
a232 1
.It "dc%d: couldn't map interrupt"
d234 1
a234 1
.It "dc%d: watchdog timeout"
d240 1
a240 1
.It "dc%d: no memory for rx list"
d242 1
a242 1
.It "dc%d: TX underrun -- increasing TX threshold"
d250 1
a250 1
.It "dc%d: TX underrun -- using store and forward mode"
d256 1
a256 1
.It "dc%d: chip is in D3 power state -- setting to D0"
@


1.47
log
@icsphy(4) has been seen coupled with dc(4) and vr(4) so list it in the manpage.
From Brad.
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.46 2011/03/13 21:26:51 jmc Exp $
d35 1
a35 1
.Dd $Mdocdate: March 13 2011 $
d298 1
a298 1
.%O http://www.admtek.com.tw
d302 1
a302 1
.%O http://www.asix.com.tw
d306 1
a306 1
.%O http://www.davicom8.com
d310 1
a310 1
.%O http://developer.intel.com
d314 1
a314 1
.%O http://www.macronix.com
d318 1
a318 1
.%O http://www.macronix.com
@


1.46
log
@don;t discuss WoL while it's unsupported; ok stsp
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.45 2009/10/25 18:38:18 sobrado Exp $
d35 1
a35 1
.Dd $Mdocdate: October 25 2009 $
d47 1
d283 1
@


1.45
log
@write manual page description (.Nd macro) in a more usual way,
so it fits on a standard display.
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.44 2008/09/11 17:31:26 brad Exp $
d35 1
a35 1
.Dd $Mdocdate: September 11 2008 $
d91 1
a91 1
built-in NWAY autonegotiation and wake on LAN.
@


1.44
log
@- MBit/s -> Mbps
- Separate the notes about the 21143/21145 based adapters and the line
`For more information on configuring this device..'
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.43 2007/05/31 19:19:49 jmc Exp $
d35 1
a35 1
.Dd $Mdocdate: May 31 2007 $
d40 1
a40 1
.Nd "DEC/Intel 21140, 21142, 21143, 21145 and clones 10/100 Ethernet device"
@


1.43
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.42 2006/08/30 22:56:05 jmc Exp $
d35 1
a35 1
.Dd $Mdocdate$
d94 1
a94 1
The 21145 seems to be 10 MBit/s only and has an additional (unsupported)
d223 2
a224 1
The Intel 21145 supports 10 MBit/s half-duplex only.
@


1.42
log
@the start of making .Nd lines more useful for section4;
this diff addresses ethernet devices only

input from nick jsg deraadt, maybe some others
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.41 2006/07/22 02:26:34 brad Exp $
d35 1
a35 1
.Dd November 20, 1999
@


1.41
log
@add the ADMtek ADM9511/ADM9513 Centaur-II chipsets.
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.40 2006/01/08 00:00:51 jmc Exp $
d40 1
a40 1
.Nd DEC/Intel 21140, 21142, 21143, 21145 and clones 10/100 Ethernet driver
@


1.40
log
@LinkSys -> Linksys;
from jolan
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.39 2005/09/30 20:34:24 jaredy Exp $
d67 1
a67 1
Macronix 98713, 98713A, 98715, 98715A, 98725, 98727, and 98732
d73 1
a73 1
ADMtek AL981 Comet PCI and AN983 Centaur-P PCI
@


1.39
log
@deploy .An -nosplit; ok jmc
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.38 2005/03/12 10:32:40 jmc Exp $
d122 1
a122 1
Built-in Ethernet on LinkSys EtherFast 10/100 Instant GigaDrive (DM9102, MII)
d138 1
a138 1
LinkSys LNE100TX (PNIC 82c168, 82c169)
d146 1
a146 1
LinkSys LNE100TX v2.0 (PNIC II 82c115)
d154 1
a154 1
LinkSys LNE100TX v4.x (ADMtek AN983 Centaur-P)
d183 1
a183 1
The original 82c168 appears on very early revisions of the LinkSys LNE100TX
d349 1
a349 1
used on certain early LinkSys LNE100TX and Matrox FastNIC cards,
@


1.38
log
@mini-PCI/MiniPCI -> Mini PCI
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.37 2005/02/06 10:15:00 jmc Exp $
d326 1
@


1.37
log
@sort SEE ALSO;
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.36 2005/02/05 23:58:17 jsg Exp $
d56 1
a56 1
driver provides support for several PCI, MiniPCI, and CardBus Fast Ethernet
d164 1
a164 1
Conexant LANfinity RS7112 MiniPCI
@


1.36
log
@List more phys that attach to these devices.
ok brad@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.35 2004/09/30 19:59:24 mickey Exp $
d276 1
a277 1
.Xr amphy 4 ,
d288 1
a290 1
.Xr pci 4 ,
@


1.35
log
@kill default locators
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.34 2004/03/21 19:50:44 miod Exp $
d44 2
d47 2
d50 3
a52 1
.Cd "lxtphy* at mii?"
d277 2
d284 1
d287 3
@


1.34
log
@Sync hardware support with the code, and minor nits.
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.33 2003/11/09 16:06:07 jmc Exp $
d42 5
a46 5
.Cd "dc* at pci? dev ? function ?"
.Cd "dc* at cardbus? dev ? function ?"
.Cd "dcphy* at mii? phy ?"
.Cd "nsphy* at mii? phy ?"
.Cd "lxtphy* at mii? phy ?"
@


1.33
log
@remove .Pp's before lists and displays;
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.32 2003/08/23 18:42:01 mickey Exp $
d40 1
a40 1
.Nd DEC/Intel 21140, 21143, 21145 and clone 10/100 Ethernet driver
d164 1
a164 1
.Bl -tag -width xxxxxxxxxxxxxxxxxxxx
d208 1
a208 1
.Bl -tag -width xxxxxxxxxxxxxxxxxxxx
@


1.32
log
@a simple page for dcphy and some more phys for dc
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.31 2003/05/05 13:51:57 jmc Exp $
a163 1
.Pp
a207 1
.Pp
@


1.31
log
@corrections from Leandro Costa.

- corrections to tradenames
- updated URLs
- general typos

thanks Leandro!
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.30 2003/04/14 06:39:23 jmc Exp $
d45 2
d274 1
a274 1
.\" no manpage .Xr dcphy 4 ,
d277 1
d279 1
@


1.30
log
@built in -> built-in;

from NetBSD (Igor Sobrado);
smrsh(8) passed on to sendmail people;

ok millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.29 2003/03/16 10:18:44 jmc Exp $
d216 1
a216 1
Intel 21143 adapters which support 10mbps media attachments only.
@


1.29
log
@typos;

ddb(4), hilid(4), hilkbd(4), hilms(4): ok miod@@
gsckbd(4): found by miod@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.28 2002/11/08 08:08:47 mpech Exp $
d83 1
a83 1
built in NWAY autonegotiation and wake on LAN.
d112 1
a112 1
Built in DE500-BA on DEC Alpha workstations (21143, non-MII)
d114 1
a114 1
Built in Ethernet on LinkSys EtherFast 10/100 Instant GigaDrive (DM9102, MII)
d333 1
a333 1
The original 82c168 PNIC chip has built in NWAY support which is
@


1.28
log
@Time to cleanup:
o) start new sentence on a new line;
o) wrap long lines;
o) don't use .Pp before/after .Sh, .Ss;
o) OpenBSD -> .Ox;
o) typos;
o) close .Rs;
o) use space between arguments in tag, for example:
   .Xr blabla ) .

miod@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.27 2002/10/21 20:31:39 henning Exp $
d102 2
a103 2
These chips are used by many vendors which makes it
difficult provide a complete list of all supported cards.
@


1.27
log
@manual media setting no longer needed for the 21145
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.26 2002/10/20 17:00:01 henning Exp $
d79 2
a80 1
various modifications.  (The 21140 is an older version of the 21143.)
@


1.26
log
@Intel 21145 support
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.25 2002/09/26 07:55:39 miod Exp $
a319 3
The Intel 21145 seems to support 10 MBit/s halfduplex only.
An explicit media setting to 10BaseT is required.
.Pp
@


1.25
log
@Incomplete section 4 mi manual page cleanup.
- make configuration lines match GENERIC files
- more Xr (hopefully usefule Xr)
- never mention intro(4) on non-physical devices (i.e. protocols), always
mention it for physical devices
- random text style and quoting fixes
- drivers ported from FreeBSD did mention rc.conf instead of hostname.if as
the place to put mediaopt
- some .Tn UNIX -> .Ox replacements
- etc, etc...

reviewd in part by deraadt@@ (until he got bored of this)
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.24 2002/04/18 19:15:09 jason Exp $
d40 1
a40 1
.Nd DEC/Intel 21140, 21143 and clone 10/100 Ethernet driver
d57 2
d85 2
d216 1
d320 3
@


1.24
log
@add conexant lanfinity
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.23 2002/02/17 05:16:36 nate Exp $
d43 2
d265 4
d270 2
d308 3
a310 1
driver was written by Bill Paul <wpaul@@ee.columbia.edu> and ported to
d312 2
a313 1
by Aaron Campbell <aaron@@openbsd.org>.
@


1.23
log
@reflect support for 21140 based cards
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.22 2001/10/05 19:08:14 nate Exp $
d46 2
a47 2
driver provides support for several PCI and CardBus Fast Ethernet adapters
and embedded controllers based on the following chipsets:
d148 2
@


1.22
log
@Avoid confustion
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.21 2001/04/23 15:30:25 aaron Exp $
d40 1
a40 1
.Nd DEC/Intel 21143 and clone 10/100 Ethernet driver
d51 2
d75 1
a75 1
various modifications.
@


1.21
log
@Various man page fixes and improvements from gluk@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.20 2001/04/18 14:48:15 aaron Exp $
d167 1
a167 1
.It 10baseT/UTP
@


1.20
log
@Talk about CardBus a bit more.
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.19 2001/04/11 20:49:07 miod Exp $
d91 1
a91 1
of these chipsets in order to keep special case code to a minimun.
@


1.19
log
@Mention more hardware supported by these drivers (sync with i386.html
webpage), aaron@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.18 2001/03/01 16:11:16 aaron Exp $
d46 2
a47 2
driver provides support for several PCI Fast Ethernet adapters and
embedded controllers based on the following chipsets:
d51 1
a51 1
DEC/Intel 21143
@


1.18
log
@A slew of share/ man page fixes; nordin@@cse.ogi.edu. These have been sitting
in my INBOX since Nov 6, 2000, probably forgot about them since the tree was
frozen at that time.
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.17 2000/12/21 21:01:15 aaron Exp $
d144 2
@


1.17
log
@Various repairs, $Id$ tags added, etc.
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.16 2000/11/16 06:08:30 aaron Exp $
d81 1
a81 1
only maintain superficial simularities.
d353 1
a353 1
driver attempts to avoid this condition by not queing any frames past
@


1.16
log
@Note support for Accton EN1217 and EN2242 Ethernet adapters.
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.15 2000/11/06 20:01:53 aaron Exp $
d71 4
a74 3
descriptor format and method of operation. All of the clone chips
are based on the 21143 design with various modifications. The
21143 itself has support for 10baseT, BNC, AUI, MII and symbol
d76 3
a78 4
built in NWAY autonegotiation and wake on LAN. The 21143 also
offers several receive filter programming options including
perfect filtering, inverse perfect filtering and hash table
filtering.
d81 4
a84 3
only maintain superficial simularities. Some support only MII
media attachments. Others use different receiver filter programming
mechanisms. At least one supports only chained DMA descriptors
d86 3
a88 2
fixed size rings). Some chips (especially the PNIC) also have
peculiar bugs. The
d94 2
a95 2
difficult provide a complete list of all supported cards. The
following NICs are known to work with the
d139 1
a139 1
Xircom X3201-based CardBus PC Cards, including RealPort models (Xircom X3201)
d162 3
a164 2
mode, however these must be set manually. The original 82c168 appears
on very early revisions of the LinkSys LNE100TX and Matrox FastNIC.
d166 2
a167 1
Set 10Mbps operation. The
d171 2
a172 1
operation. Not specifying
d178 2
a179 1
Set 100Mbps (Fast Ethernet) operation. The
d183 2
a184 1
operation. Not specifying
d197 3
a199 2
Force full duplex operation. The interface will operate in
half duplex mode if this media option is not specified.
d215 3
a217 3
before a timeout expired. This can happen if the device is unable
to deliver interrupts for some reason, or if there is a problem with
the network connection (cable).
d222 4
a225 3
DMA and transmit a packet. This happens if the host is not able to
DMA the packet data into the NIC's FIFO fast enough. The driver
will dynamically increase the transmit start threshold so that
d231 3
a233 3
driver programmed the chip for store and forward mode. In this mode,
the NIC will not begin transmission until the entire packet has been
transferred into its FIFO memory.
d235 2
a236 2
This message applies only to adapters which support power
management. Some operating systems place the controller in low power
d238 5
a242 4
out of this state before configuring it. The controller loses all of
its PCI configuration in the D3 state, so if the BIOS does not set
it back to full power mode in time, it won't be able to configure it
correctly. The driver tries to detect this condition and bring
d244 2
a245 2
enough to return the driver to a fully operational condition. If
you see this message at boot time and the driver fails to attach
d250 2
a251 1
operating system. If you power down your system prior to booting
d300 3
a302 2
number into the CSR16 register. The numbers are documented in
the app notes, but the exact meaning of the bits is not.
d306 3
a308 3
unexplained errors leading to very poor overall performance. The
98715A does not exhibit this problem. All other modes on the
98713A seem to work correctly.
d322 2
a323 2
forward setting for the transmit start threshold by default. This
is to work around problems with some NIC/PCI bus combinations where
d330 2
a331 1
the host. The chips appear to upload several kilobytes of garbage
d333 2
a334 1
instead of just the expected one. The
d341 2
a342 1
can result in the receive filter being incorrectly programmed. The
d350 2
a351 1
the transmit descriptor ring back to the beginning. The
d356 2
a357 1
routine. This workaround has a negligible impact on transmit performance.
@


1.15
log
@Add two paragraphs to the BUGS section:

- Note that mii_tick() is not currently run for ASIX boards.
- Do not recommend Davicom adapters as they hog the PCI bus.
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.14 2000/10/27 08:01:07 aaron Exp $
d140 2
@


1.14
log
@The IBM EtherJet 10/100 CardBus card works; jason@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.13 2000/10/26 22:37:03 aaron Exp $
d59 3
a61 1
ADMtek AL981 Comet PCI, AN983 Centaur-P PCI, and AN985 Centaur-C CardBus
d339 17
a355 1

@


1.13
log
@Add support for ADMtek AN985 Centaur-C CardBus Ethernet interfaces. Thanks for
ADMtek for sending me a couple demo boards.
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.12 2000/10/26 21:04:39 aaron Exp $
d135 3
a137 1
Xircom X3201-based CardBus PC Cards, including RealPort models
@


1.12
log
@Note support for Xircom X3201-based CardBus Ethernet.
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.11 2000/10/18 02:38:21 aaron Exp $
d59 1
a59 1
ADMtek AL981 Comet and AN983 Centaur-P
d135 1
a135 1
All Xircom CardBus PC Cards, including RealPort models
@


1.11
log
@- Arguments to .Nd should go on the same line as .Nd.
- Standardize Nd format for all Ethernet man pages for easy man -k'ing.
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.10 2000/10/13 17:55:58 aaron Exp $
d64 2
d134 2
@


1.10
log
@Sync with FreeBSD, mostly to note support for newer adapters.
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.9 2000/09/12 01:06:50 aaron Exp $
d40 1
a40 2
.Nd
DEC/Intel 21143 and clone 10/100 Ethernet driver
@


1.9
log
@- Remove `device' keyword from configuration declaration.
- ADMtek AN983 is the PCI version of the Centaur chip, AN985 is CardBus.
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.8 2000/09/09 17:15:55 deraadt Exp $
d54 1
a54 1
Macronix 98713, 98713A, 98715, 98715A and 98725
d56 1
a56 1
Davicom DM9100 and DM9102
d100 2
d106 3
a108 1
NDC SOHOware SFA110 (98513A)
d112 1
a112 1
CNet Pro120A (98715A or 9713A) and CNet Pro120B (98715)
d131 2
d227 1
a227 1
the device as a network interface, you will have to perform second
@


1.8
log
@these are MI
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.7 2000/04/12 16:17:40 aaron Exp $
d43 1
a43 1
.Cd "device dc* at pci? dev ? function ?"
d60 1
a60 1
ADMtek AL981 Comet and AN985 Centaur
d234 1
a234 1
.%T ADMtek AL981, AL983 and AL985 data sheets
d317 1
a317 1
The ADMtek AL981 chip (and possibly the AN985 as well) has been observed
@


1.7
log
@Spelling error: transfered -> transferred
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.6 2000/04/03 21:19:36 aaron Exp $
d36 1
a36 1
.Dt DC 4 i386
@


1.6
log
@Remove trailing whitespace.
@
text
@d1 2
a2 1
.\"	$OpenBSD: dc.4,v 1.5 2000/02/23 18:08:55 aaron Exp $
d315 1
a315 1
it is transfered successfully.
@


1.5
log
@More accurate HISTORY and AUTHORS.
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.4 2000/01/18 21:48:58 aaron Exp $
d230 1
a230 1
.Xr netintro 4 , 
@


1.4
log
@Repair duplicate word occurences; (as found by a Perl script sent to us from
Tom Christiansen <tchrist@@perl.com>).
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.3 2000/01/10 08:15:36 deraadt Exp $
d260 3
d267 3
a269 2
driver was written by
.An Bill Paul Aq wpaul@@ee.columbia.edu .
@


1.3
log
@spelling
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.2 2000/01/10 08:14:11 deraadt Exp $
d314 1
a314 1
queues a sequence of frames which cause it to wrap from the end of the
@


1.2
log
@openbsd-ify further (surprising aaron did not catch these problems)
@
text
@d1 1
a1 1
.\"	$OpenBSD: dc.4,v 1.1 1999/12/08 22:35:34 aaron Exp $
d295 1
a295 1
The 82c168 abd 82c169 PNIC chips also have a receiver bug that
@


1.1
log
@DEC/Intel 21143 and "tulip" clone Ethernet driver. Intended to replace the
individual ax, al, pn, and mx drivers. It also supports the Davicom DM9100
and DM9102 chipsets (dm) which we previously did not have. From FreeBSD.
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d137 1
a137 1
.Pa /etc/rc.conf
d268 1
a268 1
chips in normal operation, the driver must write a certian magic
@

