head	1.47;
access;
symbols
	OPENBSD_6_1_BASE:1.47
	OPENBSD_6_0:1.45.0.6
	OPENBSD_6_0_BASE:1.45
	OPENBSD_5_9:1.45.0.2
	OPENBSD_5_9_BASE:1.45
	OPENBSD_5_8:1.44.0.6
	OPENBSD_5_8_BASE:1.44
	OPENBSD_5_7:1.44.0.4
	OPENBSD_5_7_BASE:1.44
	OPENBSD_5_6:1.40.0.6
	OPENBSD_5_6_BASE:1.40
	OPENBSD_5_5:1.40.0.4
	OPENBSD_5_5_BASE:1.40
	OPENBSD_5_4:1.39.0.2
	OPENBSD_5_4_BASE:1.39
	OPENBSD_5_3:1.38.0.2
	OPENBSD_5_3_BASE:1.38
	OPENBSD_5_2:1.37.0.10
	OPENBSD_5_2_BASE:1.37
	OPENBSD_5_1_BASE:1.37
	OPENBSD_5_1:1.37.0.8
	OPENBSD_5_0:1.37.0.6
	OPENBSD_5_0_BASE:1.37
	OPENBSD_4_9:1.37.0.4
	OPENBSD_4_9_BASE:1.37
	OPENBSD_4_8:1.37.0.2
	OPENBSD_4_8_BASE:1.37
	OPENBSD_4_7:1.35.0.4
	OPENBSD_4_7_BASE:1.35
	OPENBSD_4_6:1.35.0.6
	OPENBSD_4_6_BASE:1.35
	OPENBSD_4_5:1.35.0.2
	OPENBSD_4_5_BASE:1.35
	OPENBSD_4_4:1.34.0.4
	OPENBSD_4_4_BASE:1.34
	OPENBSD_4_3:1.34.0.2
	OPENBSD_4_3_BASE:1.34
	OPENBSD_4_2:1.32.0.2
	OPENBSD_4_2_BASE:1.32
	OPENBSD_4_1:1.30.0.2
	OPENBSD_4_1_BASE:1.30
	OPENBSD_4_0:1.29.0.2
	OPENBSD_4_0_BASE:1.29
	OPENBSD_3_9:1.25.0.4
	OPENBSD_3_9_BASE:1.25
	OPENBSD_3_8:1.25.0.2
	OPENBSD_3_8_BASE:1.25
	OPENBSD_3_7:1.24.0.6
	OPENBSD_3_7_BASE:1.24
	OPENBSD_3_6:1.24.0.4
	OPENBSD_3_6_BASE:1.24
	OPENBSD_3_5:1.24.0.2
	OPENBSD_3_5_BASE:1.24
	OPENBSD_3_4:1.23.0.2
	OPENBSD_3_4_BASE:1.23
	OPENBSD_3_3:1.21.0.4
	OPENBSD_3_3_BASE:1.21
	OPENBSD_3_2:1.21.0.2
	OPENBSD_3_2_BASE:1.21
	OPENBSD_3_1:1.19.0.4
	OPENBSD_3_1_BASE:1.19
	OPENBSD_3_0:1.19.0.2
	OPENBSD_3_0_BASE:1.19
	OPENBSD_2_9:1.15.0.6
	OPENBSD_2_9_BASE:1.15
	OPENBSD_2_8:1.15.0.4
	OPENBSD_2_8_BASE:1.15
	OPENBSD_2_7:1.15.0.2
	OPENBSD_2_7_BASE:1.15
	OPENBSD_2_6:1.14.0.2
	OPENBSD_2_6_BASE:1.14
	OPENBSD_2_5:1.11.0.2
	OPENBSD_2_5_BASE:1.11
	OPENBSD_2_4:1.9.0.2
	OPENBSD_2_4_BASE:1.9
	OPENBSD_2_3:1.7.0.2
	OPENBSD_2_3_BASE:1.7
	OPENBSD_2_2:1.5.0.4
	OPENBSD_2_2_BASE:1.5
	OPENBSD_2_1:1.5.0.2
	OPENBSD_2_1_BASE:1.5
	OPENBSD_2_0:1.4.0.2
	OPENBSD_2_0_BASE:1.4
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@.\" @;


1.47
date	2016.11.26.11.18.43;	author mpi;	state Exp;
branches;
next	1.46;
commitid	w5BGwu0VUCmpZ1gz;

1.46
date	2016.09.02.21.00.28;	author tedu;	state Exp;
branches;
next	1.45;
commitid	9iYhbZxJRvh6yLNA;

1.45
date	2015.09.10.17.55.21;	author schwarze;	state Exp;
branches;
next	1.44;
commitid	PeV7Ql0T6htfMjhP;

1.44
date	2015.01.15.00.45.20;	author deraadt;	state Exp;
branches;
next	1.43;
commitid	Nyk7sbwzGfxyq1RG;

1.43
date	2015.01.15.00.32.36;	author deraadt;	state Exp;
branches;
next	1.42;
commitid	8bDN5Bcy9uKaQ2JA;

1.42
date	2015.01.15.00.25.00;	author deraadt;	state Exp;
branches;
next	1.41;
commitid	sJQenAkWBQNrEKeT;

1.41
date	2014.12.01.21.59.06;	author nicm;	state Exp;
branches;
next	1.40;
commitid	ri8KfVHAuZz6GsDk;

1.40
date	2014.01.21.03.15.46;	author schwarze;	state Exp;
branches;
next	1.39;

1.39
date	2013.07.16.16.05.49;	author schwarze;	state Exp;
branches;
next	1.38;

1.38
date	2012.12.29.22.12.43;	author jmc;	state Exp;
branches;
next	1.37;

1.37
date	2010.07.31.20.26.21;	author jmc;	state Exp;
branches;
next	1.36;

1.36
date	2010.04.13.20.38.26;	author mk;	state Exp;
branches;
next	1.35;

1.35
date	2009.01.31.19.37.12;	author sobrado;	state Exp;
branches;
next	1.34;

1.34
date	2008.01.10.21.54.42;	author jmc;	state Exp;
branches;
next	1.33;

1.33
date	2008.01.10.17.32.54;	author mbalmer;	state Exp;
branches;
next	1.32;

1.32
date	2007.07.04.12.00.18;	author jmc;	state Exp;
branches;
next	1.31;

1.31
date	2007.05.31.19.19.52;	author jmc;	state Exp;
branches;
next	1.30;

1.30
date	2007.01.09.16.24.05;	author robert;	state Exp;
branches;
next	1.29;

1.29
date	2006.06.13.10.14.28;	author mbalmer;	state Exp;
branches;
next	1.28;

1.28
date	2006.06.01.22.06.59;	author jmc;	state Exp;
branches;
next	1.27;

1.27
date	2006.06.01.20.10.28;	author mbalmer;	state Exp;
branches;
next	1.26;

1.26
date	2006.04.27.19.30.27;	author deraadt;	state Exp;
branches;
next	1.25;

1.25
date	2005.04.08.19.48.13;	author jmc;	state Exp;
branches;
next	1.24;

1.24
date	2004.03.16.08.44.34;	author tedu;	state Exp;
branches;
next	1.23;

1.23
date	2003.06.02.23.30.13;	author millert;	state Exp;
branches;
next	1.22;

1.22
date	2003.04.09.04.29.03;	author jmc;	state Exp;
branches;
next	1.21;

1.21
date	2002.08.29.22.59.37;	author deraadt;	state Exp;
branches;
next	1.20;

1.20
date	2002.05.06.23.34.33;	author millert;	state Exp;
branches;
next	1.19;

1.19
date	2001.10.05.14.45.53;	author mpech;	state Exp;
branches;
next	1.18;

1.18
date	2001.09.11.15.32.49;	author fgsch;	state Exp;
branches;
next	1.17;

1.17
date	2001.08.20.05.57.55;	author mpech;	state Exp;
branches;
next	1.16;

1.16
date	2001.06.23.08.01.54;	author pjanzen;	state Exp;
branches;
next	1.15;

1.15
date	2000.04.17.02.32.44;	author aaron;	state Exp;
branches;
next	1.14;

1.14
date	99.07.13.01.00.08;	author aaron;	state Exp;
branches;
next	1.13;

1.13
date	99.06.05.13.18.33;	author aaron;	state Exp;
branches;
next	1.12;

1.12
date	99.05.16.19.56.39;	author alex;	state Exp;
branches;
next	1.11;

1.11
date	99.03.18.11.12.19;	author aaron;	state Exp;
branches;
next	1.10;

1.10
date	99.03.11.01.35.04;	author pjanzen;	state Exp;
branches;
next	1.9;

1.9
date	98.09.06.22.23.20;	author aaron;	state Exp;
branches;
next	1.8;

1.8
date	98.07.10.19.23.24;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	98.03.12.09.16.54;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	98.02.16.20.31.59;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	97.04.04.01.47.29;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	96.08.29.12.51.24;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	96.04.22.01.26.49;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	96.01.02.11.25.24;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.44.26;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.44.26;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.47
log
@Remove leftovers of line disciplines that are no more.

ok mikeb@@
@
text
@.\"	$OpenBSD: tty.4,v 1.46 2016/09/02 21:00:28 tedu Exp $
.\"	$NetBSD: tty.4,v 1.4 1996/03/19 04:26:01 paulus Exp $
.\"
.\" Copyright (c) 1991, 1992, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"     @@(#)tty.4	8.3 (Berkeley) 4/19/94
.\"
.Dd $Mdocdate: September 2 2016 $
.Dt TTY 4
.Os
.Sh NAME
.Nm tty ,
.Nm cua
.Nd general terminal interface
.Sh SYNOPSIS
.In sys/ioctl.h
.Sh DESCRIPTION
This section describes the interface to the terminal drivers
in the system.
.Ss Terminal Special Files
Each hardware terminal port (such as a serial port) on the system usually has a
terminal special device file associated with it in the directory
.Pa /dev/
(for
example,
.Pa /dev/tty03 ) .
When a user logs into
the system on one of these hardware terminal ports, the system has already
opened the associated device and prepared the line for normal interactive
use (see
.Xr getty 8 ) .
There is also a special case of a terminal file that connects not to
a hardware terminal port, but to another program on the other side.
These special terminal devices are called
.Em ptys
and provide the mechanism necessary to give users the same interface to the
system when logging in over a network (using
.Xr ssh 1
or
.Xr telnet 1
for example).
Even in these cases the details of how the terminal
file was opened and set up is already handled by special software
in the system.
Thus, users do not normally need to worry about the details of
how these lines are opened or used.
.Pp
For hardware terminal ports, dial-out is supported through matching
device nodes called calling units.
For instance, the terminal called
.Pa /dev/tty03
would have a matching calling unit called
.Pa /dev/cua03 .
These two devices are normally differentiated by creating the calling
unit device node with a minor number 128 greater than the dial-in
device node.
Whereas the dial-in device (the
.Em tty )
normally
requires a hardware signal to indicate to the system that it is active,
the dial-out device (the
.Em cua )
does not, and hence can communicate unimpeded
with a device such as a modem, or with another system over a serial link.
This means that a process like
.Xr getty 8
will wait on a dial-in device until a connection is established.
Meanwhile, a dial-out connection can be established on the dial-out
device (for the very same hardware terminal port) without disturbing
anything else on the system.
The
.Xr getty 8
process does not even notice that anything is happening on the terminal
port.
If a connecting call comes in after the dial-out connection has finished, the
.Xr getty 8
process will deal with it properly, without having noticed the
intervening dial-out action.
For more information on dial-out, see
.Xr cu 1 .
.Pp
When an interactive user logs in, the system prepares the line to
behave in a certain way (called a
.Em "line discipline" ) ,
the particular details of which are described in
.Xr stty 1
at the command level, and in
.Xr termios 4
at the programming level.
A user may be concerned with changing settings associated with his particular
login terminal and should refer to the preceding man pages for the common
cases.
The remainder of this man page is concerned with describing details of using
and controlling terminal devices at a low level, such as that possibly
required by a program wishing to provide features similar to those provided
by the system.
.Ss Line disciplines
A terminal file is used like any other file in the system in that
it can be opened, read, and written to using standard system
calls.
For each existing terminal file, there is a software processing module
called a
.Em "line discipline"
associated with it.
The
.Em "line discipline"
essentially glues the low level device driver code with the high
level generic interface routines (such as
.Xr read 2
and
.Xr write 2 ) ,
and is responsible for implementing the semantics associated
with the device.
When a terminal file is first opened by a program, the default
.Em "line discipline"
called the
.Dv termios
line discipline is associated with the file.
This is the primary line discipline that is used in most cases and provides
the semantics that users normally associate with a terminal.
When the
.Dv termios
line discipline is in effect, the terminal file behaves and is
operated according to the rules described in
.Xr termios 4 .
Please refer to that man page for a full description of the terminal
semantics.
The operations described here
generally represent features common
across all
.Em "line disciplines" ,
although some of these calls may not
make sense in conjunction with a line discipline other than
.Dv termios ,
and some may not be supported by the underlying
hardware (or lack thereof, as in the case of ptys).
.Ss Terminal File Operations
All of the following operations are invoked using the
.Xr ioctl 2
system call.
Refer to that man page for a description of the
.Em request
and
.Em argp
parameters.
In addition to the ioctl
.Em requests
defined here, the specific line discipline
in effect will define other
.Em requests
specific to it (actually
.Xr termios 4
defines them as function calls, not ioctl
.Em requests ) .
The following section lists the available ioctl requests.
The name of the request, a description of its purpose, and the typed
.Em argp
parameter (if any)
are listed.
For example, the first entry says
.Pp
.D1 Em "TIOCSETD int *ldisc"
.Pp
and would be called on the terminal associated with
file descriptor zero by the following code fragment:
.Bd -literal
	int ldisc;

	ldisc = TTYDISC;
	ioctl(0, TIOCSETD, &ldisc);
.Ed
.Ss Terminal File Request Descriptions
.Bl -tag -width TIOCGWINSZ
.It Dv TIOCSETD Fa int *ldisc
Change to the new line discipline pointed to by
.Fa ldisc .
The available line disciplines currently available are:
.Pp
.Bl -tag -width TIOCGWINSZ -compact
.It TTYDISC
Termios interactive line discipline.
.It PPPDISC
Point-to-Point Protocol line discipline.
.It NMEADISC
NMEA 0183 line discipline.
.It MSTSDISC
Meinberg Standard Time String line discipline.
.El
.It Dv TIOCGETD Fa int *ldisc
Return the current line discipline in the integer pointed to by
.Fa ldisc .
.It Dv TIOCSBRK Fa void
Set the terminal hardware into BREAK condition.
.It Dv TIOCCBRK Fa void
Clear the terminal hardware BREAK condition.
.It Dv TIOCSDTR Fa void
Assert data terminal ready (DTR).
.It Dv TIOCCDTR Fa void
Clear data terminal ready (DTR).
.It Dv TIOCGPGRP Fa int *tpgrp
Return the current process group the terminal is associated
with in the integer pointed to by
.Fa tpgrp .
This is the underlying call that implements the
.Xr termios 4
.Fn tcgetpgrp
call.
.It Dv TIOCSPGRP Fa int *tpgrp
Associate the terminal with the process group (as an integer) pointed to by
.Fa tpgrp .
This is the underlying call that implements the
.Xr termios 4
.Fn tcsetpgrp
call.
.It Dv TIOCGETA Fa struct termios *term
Place the current value of the termios state associated with the
device in the termios structure pointed to by
.Fa term .
This is the underlying call that implements the
.Xr termios 4
.Fn tcgetattr
call.
.It Dv TIOCSETA Fa struct termios *term
Set the termios state associated with the device immediately.
This is the underlying call that implements the
.Xr termios 4
.Fn tcsetattr
call with the
.Dv TCSANOW
option.
.It Dv TIOCSETAW Fa struct termios *term
First wait for any output to complete, then set the termios state
associated with the device.
This is the underlying call that implements the
.Xr termios 4
.Fn tcsetattr
call with the
.Dv TCSADRAIN
option.
.It Dv TIOCSETAF Fa struct termios *term
First wait for any output to complete, clear any pending input,
then set the termios state associated with the device.
This is the underlying call that implements the
.Xr termios 4
.Fn tcsetattr
call with the
.Dv TCSAFLUSH
option.
.It Dv TIOCOUTQ Fa int *num
Place the current number of characters in the output queue in the
integer pointed to by
.Fa num .
.It Dv TIOCSTI Fa char *cp
Simulate typed input.
Pretend as if the terminal received the character pointed to by
.Fa cp .
.It Dv TIOCNOTTY Fa void
This call is obsolete but left for compatibility.
In the past, when a process that didn't have a controlling terminal
(see
.Em The Controlling Terminal
in
.Xr termios 4 )
first opened a terminal device, it acquired that terminal as its
controlling terminal.
For some programs this was a hazard as they didn't want a controlling
terminal in the first place, and this provided a mechanism to disassociate
the controlling terminal from the calling process.
It
.Em must
be called by opening the file
.Pa /dev/tty
and calling
.Dv TIOCNOTTY
on that file descriptor.
.Pp
The current system does not allocate a controlling terminal to
a process on an
.Fn open
call: there is a specific ioctl called
.Dv TIOCSCTTY
to make a terminal the controlling
terminal.
In addition, a program can
.Fn fork
and call the
.Fn setsid
system call which will place the process into its own session - which
has the effect of disassociating it from the controlling terminal.
This is the new and preferred method for programs to lose their controlling
terminal.
.It Dv TIOCSETVERAUTH Fa int secs
Indicate that the current user has successfully authenticated to this session.
Future authentication checks may then be bypassed by performing a
.Dv TIOCCHKVERAUTH
check.
The verified authentication status will expire after
.Fa secs
seconds.
Only root may perform this operation.
.It Dv TIOCCLRVERAUTH Fa void
Clear any verified auth status associated with this session.
.It Dv TIOCCHKVERAUTH Fa void
Check the verified auth status of this session.
The calling process must have the same real user ID and
parent process as the process which called
.Dv TIOCSETVERAUTH .
A zero return indicates success.
.It Dv TIOCSTOP Fa void
Stop output on the terminal (like typing ^S at the keyboard).
.It Dv TIOCSTART Fa void
Start output on the terminal (like typing ^Q at the keyboard).
.It Dv TIOCSCTTY Fa void
Make the terminal the controlling terminal for the process (the process
must not currently have a controlling terminal).
.It Dv TIOCDRAIN Fa void
Wait until all output is drained.
.It Dv TIOCEXCL Fa void
Set exclusive use on the terminal.
No further opens are permitted except by root.
Of course, this means that programs that are run by root (or setuid)
will not obey the exclusive setting - which limits the usefulness
of this feature.
.It Dv TIOCNXCL Fa void
Clear exclusive use of the terminal.
Further opens are permitted.
.It Dv TIOCFLUSH Fa int *what
If the value of the int pointed to by
.Fa what
contains the
.Dv FREAD
bit as defined in
.In sys/fcntl.h ,
then all characters in the input queue are cleared.
If it contains the
.Dv FWRITE
bit, then all characters in the output queue are cleared.
If the value of the integer is zero, then it behaves as if both the
.Dv FREAD
and
.Dv FWRITE
bits were set (i.e., clears both queues).
.It Dv TIOCGWINSZ Fa struct winsize *ws
Put the window size information associated with the terminal in the
.Va winsize
structure pointed to by
.Fa ws .
The window size structure contains the number of rows and columns (and pixels
if appropriate) of the devices attached to the terminal.
It is set by user software and is the means by which most full\&-screen
oriented programs determine the screen size.
.It Dv TIOCSWINSZ Fa struct winsize *ws
Set the window size associated with the terminal to be the value in
the
.Va winsize
structure pointed to by
.Fa ws
(see above).
.It Dv TIOCCONS Fa int *on
If
.Fa on
points to a non-zero integer, redirect kernel console output
.Po
kernel
.Fn printf Ns s
.Pc
to this terminal.
If
.Fa on
points to a zero integer, redirect kernel console output back to the normal
console.
This is usually used on workstations to redirect kernel messages
to a particular window.
.It Dv TIOCMSET Fa int *state
The integer pointed to by
.Fa state
contains bits that correspond to modem state.
Following is a list of defined variables and the modem state they represent:
.Pp
.Bl -tag -width TIOCMXCTS -compact
.It TIOCM_LE
Line Enable.
.It TIOCM_DTR
Data Terminal Ready.
.It TIOCM_RTS
Request To Send.
.It TIOCM_ST
Secondary Transmit.
.It TIOCM_SR
Secondary Receive.
.It TIOCM_CTS
Clear To Send.
.It TIOCM_CAR
Carrier Detect.
.It TIOCM_CD
Carrier Detect (synonym).
.It TIOCM_RNG
Ring Indication.
.It TIOCM_RI
Ring Indication (synonym).
.It TIOCM_DSR
Data Set Ready.
.El
.Pp
This call sets the terminal modem state to that represented by
.Fa state .
Not all terminals may support this.
.It Dv TIOCMGET Fa int *state
Return the current state of the terminal modem lines as represented
above in the integer pointed to by
.Fa state .
.It Dv TIOCMBIS Fa int *state
The bits in the integer pointed to by
.Fa state
represent modem state as described above; however, the state is OR-ed
in with the current state.
.It Dv TIOCMBIC Fa int *state
The bits in the integer pointed to by
.Fa state
represent modem state as described above; however, each bit which is on
in
.Fa state
is cleared in the terminal.
.It Dv TIOCGTSTAMP Fa struct timeval *timeval
Return the (single) timestamp.
.It Dv TIOCSTSTAMP Fa struct tstamps *tstamps
Chooses the conditions which will cause the current system time to be
immediately copied to the terminal timestamp storage.
This is often used to determine exactly the moment at which one or
more of these events occurred, though only one can be monitored.
Only
.Dv TIOCM_CTS
and
.Dv TIOCM_CAR
are honoured in
.Va tstamps.ts_set
and
.Va tstamps.ts_clr ;
these indicate which raising and lowering events on the respective lines
should cause a timestamp capture.
.It Dv TIOCSFLAGS Fa int *state
The bits in the integer pointed to by
.Fa state
contain bits that correspond to serial port state.
Following is a list of defined variables and the serial port state they
represent:
.Pp
.Bl -tag -width TIOCFLAG_SOFTCAR -compact
.It TIOCFLAG_SOFTCAR
Ignore hardware carrier.
.It TIOCFLAG_CLOCAL
Set clocal on open.
.It TIOCFLAG_CRTSCTS
Set crtscts on open.
.It TIOCFLAG_MDMBUF
Set mdmbuf on open.
.El
.Pp
This call sets the serial port state to that represented by
.Fa state .
Not all serial ports may support this.
.It Dv TIOCGFLAGS Fa int *state
Return the current state of the serial port as represented
above in the integer pointed to by
.Fa state .
.El
.Sh FILES
.Bl -tag -width /dev/tty -compact
.It Pa /dev/tty
controlling terminal, if any
.El
.Sh SEE ALSO
.Xr cu 1 ,
.Xr stty 1 ,
.Xr tty 1 ,
.Xr ioctl 2 ,
.Xr pty 4 ,
.Xr termios 4 ,
.Xr ttys 5 ,
.Xr getty 8
.Sh HISTORY
The cua support is inspired by similar support in SunOS.
@


1.46
log
@document new ioctls for verified auth
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.45 2015/09/10 17:55:21 schwarze Exp $
d33 1
a33 1
.Dd $Mdocdate: September 10 2015 $
a206 4
.It TABLDISC
Tablet line discipline.
.It SLIPDISC
Serial IP line discipline.
a208 2
.It STRIPDISC
Starmode Radio IP line discipline.
@


1.45
log
@use .In rather than .Fd #include
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.44 2015/01/15 00:45:20 deraadt Exp $
d33 1
a33 1
.Dd $Mdocdate: January 15 2015 $
d323 17
@


1.44
log
@do not be specific regarding which ioctl backend .h file; the list
is good enough, and we do not want to mislead.  the file to include
is at the top of the file.
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.43 2015/01/15 00:32:36 deraadt Exp $
d41 1
a41 1
.Fd #include <sys/ioctl.h>
@


1.43
log
@wrong place to mention nmea.  cua is different, that hints at how it
works to many.
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.42 2015/01/15 00:25:00 deraadt Exp $
d202 1
a202 3
The available line disciplines are listed in
.In sys/ttycom.h
and currently are:
@


1.42
log
@delete overly-specific details that cause espie angst.
ok millert tedu
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.41 2014/12/01 21:59:06 nicm Exp $
d33 1
a33 1
.Dd $Mdocdate: December 1 2014 $
a498 4
The NMEA 0183 line discipline was added in
.Ox 4.0
by
.An Marc Balmer Aq Mt mbalmer@@openbsd.org .
@


1.41
log
@A couple of minor changes to the "Terminal Special Files" section to
help users connect that "hardware terminal ports" are usually their
serial ports. Also Xr cu(1) rather than tip(1).

ok jmc
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.40 2014/01/21 03:15:46 schwarze Exp $
d33 1
a33 1
.Dd $Mdocdate: January 21 2014 $
a367 4
The
.Va winsize
structure is defined in
.In sys/ioctl.h .
@


1.40
log
@obvious .Pa fixes; found with mandocdb(8)
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.39 2013/07/16 16:05:49 schwarze Exp $
d33 1
a33 1
.Dd $Mdocdate: July 16 2013 $
d46 2
a47 2
Each hardware terminal port on the system usually has a terminal special device
file associated with it in the directory
d89 1
a89 1
with a device such as a modem.
d105 1
a105 1
.Xr tip 1 .
d493 1
@


1.39
log
@use .Mt for email addresses; from Jan Stary <hans at stare dot cz>; ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.38 2012/12/29 22:12:43 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: December 29 2012 $
d203 1
a203 1
.Aq Pa sys/ttycom.h
d349 1
a349 1
.Aq Pa sys/fcntl.h ,
d371 1
a371 1
.Aq Pa sys/ioctl.h .
@


1.38
log
@remove unused .Pp;
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.37 2010/07/31 20:26:21 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: July 31 2010 $
d505 1
a505 1
.An Marc Balmer Aq mbalmer@@openbsd.org .
@


1.37
log
@zap a comma; from Joachim Schipper
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.36 2010/04/13 20:38:26 mk Exp $
d33 1
a33 1
.Dd $Mdocdate: April 13 2010 $
a221 1
.Pp
@


1.36
log
@TIOCSTSTAMP uses `struct tstamps', not `struct tstamp'.

Noticed almost four years ago when I wrote some code which I stumbled
upon tonight.

ok beck ckuethe millert
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.35 2009/01/31 19:37:12 sobrado Exp $
d33 1
a33 1
.Dd $Mdocdate: January 31 2009 $
d63 1
a63 1
.Xr ssh 1 ,
@


1.35
log
@write point-to-point in a consistent way.

jmc@@ has provided a complete list of manual pages to be fixed,
and suggested using uppercase (i.e., Point-to-Point) when discussing
the protocol, and lowercase (point-to-point) otherwise.

ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.34 2008/01/10 21:54:42 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: January 10 2008 $
d447 1
a447 1
.It Dv TIOCSTSTAMP Fa struct tstamp *tstamps
@


1.34
log
@punctuation fix;
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.33 2008/01/10 17:32:54 mbalmer Exp $
d214 1
a214 1
Point to Point Protocol line discipline.
@


1.33
log
@List the MSTSDISC line discipline.
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.32 2007/07/04 12:00:18 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate$
d179 1
a179 1
.Em requests . )
@


1.32
log
@add "cua" to the NAME section;
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.31 2007/05/31 19:19:52 jmc Exp $
d219 2
@


1.31
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.30 2007/01/09 16:24:05 robert Exp $
d37 2
a38 1
.Nm tty
@


1.30
log
@TIOCGPGRP and TIOCSPGRP are the underlying ioctl(2)s for tcgetpgrp and
tcsetpgrp, respectively, not tcgetattr and tcsetattr;
from "Matthew R. Dempsky" <mrd@@alkemio.org>
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.29 2006/06/13 10:14:28 mbalmer Exp $
d33 1
a33 1
.Dd August 14, 1992
@


1.29
log
@NMEA0183 is actually NMEA 0183 as discussed with jmc.
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.28 2006/06/01 22:06:59 jmc Exp $
d237 1
a237 1
.Fn tcgetattr
d244 1
a244 1
.Fn tcsetattr
@


1.28
log
@missing full stop;
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.27 2006/06/01 20:10:28 mbalmer Exp $
d217 1
a217 1
NMEA0183 line discipline.
d500 1
a500 1
The NMEA0183 line discipline was added in
@


1.27
log
@Add basic NMEA0183 support as a tty line discipline.  The line discipline
decodes NMEA messages completely transparent to userland applications, i.e.
userland can still use the NMEA stream and talk to the device.  If data
is received, a timedelta sensor suitable for ntpd is created.  The timestamp
is not very precise at the moment, use of this is experimental at best.

"get it in or we see how well the swiss people can swim" deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.26 2006/04/27 19:30:27 deraadt Exp $
d503 1
a503 1
.An Marc Balmer Aq mbalmer@@openbsd.org
@


1.26
log
@create a (very simple) method for timestamping CTS & DCD events on ttys,
using ioctl TIOCSTSTAMP & TIOCGTSTAMP.  to be used later for gps monitoring
type things; ok kettenis miod
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.25 2005/04/08 19:48:13 jmc Exp $
d216 2
d500 4
@


1.25
log
@no point telling people to read tip(1) *and* cu(1), since they
are one and the same;
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.24 2004/03/16 08:44:34 tedu Exp $
d440 17
@


1.24
log
@mention /dev/tty as controlling terminal in FILES.  ok jmc@@ millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.23 2003/06/02 23:30:13 millert Exp $
d104 1
a104 3
.Xr tip 1 ,
and
.Xr cu 1 .
@


1.23
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.22 2003/04/09 04:29:03 jmc Exp $
d467 5
@


1.22
log
@typos;

sti(4): ok mickey@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.21 2002/08/29 22:59:37 deraadt Exp $
d15 1
a15 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
@


1.21
log
@remove extra word; armihu@@utu.fi
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.20 2002/05/06 23:34:33 millert Exp $
d115 1
a115 1
the particular details of which is described in
d208 1
a208 1
.Pa Aq sys/ttycom.h
d351 1
a351 1
.Pa Aq sys/fcntl.h ,
d373 1
a373 1
.Pa Aq sys/ioctl.h .
@


1.20
log
@Kill/adjust r(login|exec)d? references now that those are no longer in
the tree.
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.19 2001/10/05 14:45:53 mpech Exp $
d134 1
a134 1
is associated with it.
@


1.19
log
@Powered by @@mantoya:
o) start new sentence on a new line;
o) minor mdoc fixes;
millert@@ ok

Tip of the day:   www.mpechismazohist.com
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.18 2001/09/11 15:32:49 fgsch Exp $
d66 1
a66 1
.Xr rlogin 1 ,
@


1.18
log
@remove uucp references, except for /var/spool/uucp*; deraadt@@ ok.
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.17 2001/08/20 05:57:55 mpech Exp $
d69 2
a70 1
for example).  Even in these cases the details of how the terminal
d77 2
a78 1
device nodes called calling units.  For instance, the terminal called
d84 2
a85 1
device node.  Whereas the dial-in device (the
d92 2
a93 1
with a device such as a modem.  This means that a process like
d98 2
a99 1
anything else on the system.  The
d102 2
a103 2
port.  If a connecting call comes in after the dial-out connection has
finished, the
d119 8
a126 7
at the programming level.  A user may be concerned with changing
settings associated with his particular login terminal and should refer
to the preceding man pages for the common cases.  The remainder of
this man page is concerned
with describing details of using and controlling terminal devices
at a low level, such as that possibly required by a program wishing
to provide features similar to those provided by the system.
d130 2
a131 1
calls.  For each existing terminal file, there is a software processing module
d134 2
a135 1
is associated with it.  The
d143 2
a144 2
with the device.  When a terminal file is first opened by a program,
the default
d148 4
a151 3
line discipline is associated with the file.  This is the primary
line discipline that is used in most cases and provides the semantics
that users normally associate with a terminal.  When the
d170 2
a171 2
system call.  Refer to that man page for a description of
the
d185 2
a186 2
The following section lists the available ioctl requests.  The
name of the request, a description of its purpose, and the typed
d189 2
a190 1
are listed.  For example, the first entry says
d289 2
a290 2
Simulate typed input.  Pretend as if the terminal received the
character pointed to by
d293 3
a295 2
This call is obsolete but left for compatibility.  In the past, when
a process that didn't have a controlling terminal (see
d300 5
a304 4
controlling terminal.  For some programs this was a hazard as they
didn't want a controlling terminal in the first place, and this
provided a mechanism to disassociate the controlling terminal from
the calling process.  It
d324 2
a325 2
has the effect of disassociating it from the controlling terminal.  This
is the new and preferred method for programs to lose their controlling
d337 5
a341 4
Set exclusive use on the terminal.  No further opens are permitted
except by root.  Of course, this means that programs that are run by
root (or setuid) will not obey the exclusive setting - which limits
the usefulness of this feature.
d343 2
a344 1
Clear exclusive use of the terminal.  Further opens are permitted.
d352 2
a353 2
then all characters in the input queue are cleared.  If it contains
the
d355 2
a356 2
bit, then all characters in the output queue are cleared.  If the
value of the integer is zero, then it behaves as if both the
d360 1
a360 1
bits were set (i.e. clears both queues).
d367 4
a370 3
if appropriate) of the devices attached to the terminal.  It is set by user software
and is the means by which most full\&-screen oriented programs determine the
screen size.  The
d393 2
a394 1
console.  This is usually used on workstations to redirect kernel messages
d399 2
a400 2
contains bits that correspond to modem state.  Following is a list
of defined variables and the modem state they represent:
d449 3
a451 2
contain bits that correspond to serial port state. Following is a list
of defined variables and the serial port state they represent:
@


1.17
log
@Powered by @@mantoya.
o) fix bogus .Xr usage;

millert@@ ok.
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.16 2001/06/23 08:01:54 pjanzen Exp $
a103 1
.Xr cu 1 ,
d105 1
a105 1
.Xr uucp 1 .
@


1.16
log
@More spelling fixes from jsyn@@nthought.com, and some formatting fixes
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.15 2000/04/17 02:32:44 aaron Exp $
d134 1
a134 1
.Xr write 2 ),
@


1.15
log
@Move some misplaced periods outside of the parentheses.
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.14 1999/07/13 01:00:08 aaron Exp $
d370 5
a374 1
points to a non-zero integer, redirect kernel console output (kernel printf's)
@


1.14
log
@more tty cross references
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.13 1999/06/05 13:18:33 aaron Exp $
d54 1
a54 1
.Pa /dev/tty03 ).
d59 1
a59 1
.Xr getty 8 .)
d69 1
a69 1
for example.)  Even in these cases the details of how the terminal
@


1.13
log
@more .Os cleanup, remove some trailing whitespace, cleanse some .Nm
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.12 1999/05/16 19:56:39 alex Exp $
d454 1
d458 1
@


1.12
log
@Cleanup xrefs under SEE ALSO.  Specifically:

  - Sort xrefs by section, and then alphabetically.
  - Add missing commas between xref items.
  - Remove commas from the last xref entry.
  - Remove duplicate entries.
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.11 1999/03/18 11:12:19 aaron Exp $
d39 1
a39 1
.Os BSD 4
@


1.11
log
@typo; nash@@mcs.net
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.10 1999/03/11 01:35:04 pjanzen Exp $
d453 1
a453 1
.Xr getty 8 ,
d456 2
a457 2
.Xr stty 1 ,
.Xr termios 4
@


1.10
log
@fix more comma splices that involve misuse of conjunctive adverbs
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.9 1998/09/06 22:23:20 aaron Exp $
d82 1
a82 1
device device node.  Whereas the dial-in device (the
@


1.9
log
@More man page fixes. Spelling, grammar, some typos. Lots of double-word
occurrences squashed as well.
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.8 1998/07/10 19:23:24 deraadt Exp $
d154 1
a154 1
however some of these calls may not
d418 1
a418 1
represent modem state as described above, however the state is OR-ed
d423 1
a423 1
represent modem state as described above, however each bit which is on
@


1.8
log
@wrong file; j.d.coleman@@ncl.ac.uk
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.7 1998/03/12 09:16:54 deraadt Exp $
d399 1
a399 1
Carier Detect (synonym).
@


1.7
log
@pretty
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.6 1998/02/16 20:31:59 deraadt Exp $
d338 1
a338 1
.Pa Aq sys/file.h ,
@


1.6
log
@s/TIOSCTTY/TIOCSCTTY/; ghudson
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.5 1997/04/04 01:47:29 deraadt Exp $
d50 5
a54 2
file associated with it in the directory ``/dev/'' (for
example, ``/dev/tty03'').
d77 3
a79 1
``/dev/tty03'' would have a matching calling unit called ``/dev/cua03''.
d82 3
a84 1
device device node.  Whereas the dial-in device (the ``tty'') normally
d86 3
a88 1
the dial-out device (``cua'') does not, and hence can communicate unimpeded
@


1.5
log
@add STRIPDISC line; kleink@@netbsd.org
@
text
@d1 1
a1 1
.\"	$OpenBSD: tty.4,v 1.4 1996/08/29 12:51:24 deraadt Exp $
d296 1
a296 1
.Dv TIOSCTTY
@


1.4
log
@document cua support in tty subsystem
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d202 2
@


1.3
log
@sync with netbsd 960418
@
text
@d70 28
a97 5
how these lines are opened or used.  Also, these lines are often used
for dialing out of a system (through an out-calling modem), but again
the system provides programs that hide the details of accessing
these terminal special files (see
.Xr tip 2 .)
d447 2
@


1.2
log
@mention ppp discipline; from kjk@@uni-trier.de; netbsd pr#1855
@
text
@d1 2
a2 1
.\"	$NetBSD: tty.4,v 1.2 1994/11/30 16:22:40 jtc Exp $
d393 24
@


1.1
log
@Initial revision
@
text
@d166 1
a166 1
.Pa Aq sys/termios.h
d176 2
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@

