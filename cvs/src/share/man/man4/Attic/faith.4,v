head	1.20;
access;
symbols
	OPENBSD_5_3:1.19.0.2
	OPENBSD_5_3_BASE:1.19
	OPENBSD_5_2:1.17.0.22
	OPENBSD_5_2_BASE:1.17
	OPENBSD_5_1_BASE:1.17
	OPENBSD_5_1:1.17.0.20
	OPENBSD_5_0:1.17.0.18
	OPENBSD_5_0_BASE:1.17
	OPENBSD_4_9:1.17.0.16
	OPENBSD_4_9_BASE:1.17
	OPENBSD_4_8:1.17.0.14
	OPENBSD_4_8_BASE:1.17
	OPENBSD_4_7:1.17.0.10
	OPENBSD_4_7_BASE:1.17
	OPENBSD_4_6:1.17.0.12
	OPENBSD_4_6_BASE:1.17
	OPENBSD_4_5:1.17.0.8
	OPENBSD_4_5_BASE:1.17
	OPENBSD_4_4:1.17.0.6
	OPENBSD_4_4_BASE:1.17
	OPENBSD_4_3:1.17.0.4
	OPENBSD_4_3_BASE:1.17
	OPENBSD_4_2:1.17.0.2
	OPENBSD_4_2_BASE:1.17
	OPENBSD_4_1:1.16.0.12
	OPENBSD_4_1_BASE:1.16
	OPENBSD_4_0:1.16.0.10
	OPENBSD_4_0_BASE:1.16
	OPENBSD_3_9:1.16.0.8
	OPENBSD_3_9_BASE:1.16
	OPENBSD_3_8:1.16.0.6
	OPENBSD_3_8_BASE:1.16
	OPENBSD_3_7:1.16.0.4
	OPENBSD_3_7_BASE:1.16
	OPENBSD_3_6:1.16.0.2
	OPENBSD_3_6_BASE:1.16
	OPENBSD_3_5:1.14.0.2
	OPENBSD_3_5_BASE:1.14
	OPENBSD_3_4:1.13.0.2
	OPENBSD_3_4_BASE:1.13
	OPENBSD_3_3:1.11.0.2
	OPENBSD_3_3_BASE:1.11
	OPENBSD_3_2:1.10.0.6
	OPENBSD_3_2_BASE:1.10
	OPENBSD_3_1:1.10.0.4
	OPENBSD_3_1_BASE:1.10
	OPENBSD_3_0:1.10.0.2
	OPENBSD_3_0_BASE:1.10
	OPENBSD_2_9:1.7.0.2
	OPENBSD_2_9_BASE:1.7
	OPENBSD_2_8:1.5.0.2
	OPENBSD_2_8_BASE:1.5
	OPENBSD_2_7:1.4.0.2
	OPENBSD_2_7_BASE:1.4;
locks; strict;
comment	@.\" @;


1.20
date	2013.03.14.11.18.37;	author mpi;	state dead;
branches;
next	1.19;

1.19
date	2012.09.26.17.34.38;	author jmc;	state Exp;
branches;
next	1.18;

1.18
date	2012.08.18.08.44.25;	author jmc;	state Exp;
branches;
next	1.17;

1.17
date	2007.05.31.19.19.50;	author jmc;	state Exp;
branches;
next	1.16;

1.16
date	2004.08.17.23.58.36;	author jaredy;	state Exp;
branches;
next	1.15;

1.15
date	2004.07.26.09.20.14;	author jmc;	state Exp;
branches;
next	1.14;

1.14
date	2003.12.08.10.03.43;	author markus;	state Exp;
branches;
next	1.13;

1.13
date	2003.08.08.09.51.53;	author jmc;	state Exp;
branches;
next	1.12;

1.12
date	2003.06.06.10.29.41;	author jmc;	state Exp;
branches;
next	1.11;

1.11
date	2003.01.18.23.53.49;	author deraadt;	state Exp;
branches;
next	1.10;

1.10
date	2001.06.30.01.05.23;	author itojun;	state Exp;
branches;
next	1.9;

1.9
date	2001.06.23.05.57.04;	author deraadt;	state Exp;
branches;
next	1.8;

1.8
date	2001.06.23.02.33.11;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	2000.11.24.10.25.12;	author itojun;	state Exp;
branches;
next	1.6;

1.6
date	2000.11.20.08.00.01;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	2000.10.18.02.38.22;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	2000.04.19.09.43.49;	author itojun;	state Exp;
branches;
next	1.3;

1.3
date	2000.04.03.21.19.36;	author aaron;	state Exp;
branches;
next	1.2;

1.2
date	2000.01.19.08.09.40;	author itojun;	state Exp;
branches;
next	1.1;

1.1
date	99.12.08.13.58.42;	author itojun;	state Exp;
branches;
next	;


desc
@@


1.20
log
@tedu faith(4), suggested by todd@@ some weeks ago after a submission by
dhill.

ok krw@@, mikeb@@, tedu@@ (implicit)
@
text
@.\"	$OpenBSD: faith.4,v 1.19 2012/09/26 17:34:38 jmc Exp $
.\"	$KAME: faith.4,v 1.10 2001/06/30 00:42:48 itojun Exp $
.\"
.\" Copyright (C) 1995, 1996, 1997, and 1998 WIDE Project.
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the project nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE PROJECT AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE PROJECT OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.Dd $Mdocdate: September 26 2012 $
.Dt FAITH 4
.Os
.Sh NAME
.Nm faith
.Nd IPv6-to-IPv4 TCP relay capturing interface
.Sh SYNOPSIS
.Cd "pseudo-device faith" Op Ar count
.Sh DESCRIPTION
The
.Nm
interface captures IPv6 TCP traffic,
for implementing userland IPv6-to-IPv4 TCP relay
similar to
.Xr faithd 8 .
.Pp
A
.Nm
interface can be created at runtime using the
.Ic ifconfig faith Ns Ar N Ic create
command or by setting up a
.Xr hostname.if 5
configuration file for
.Xr netstart 8 .
.Pp
Special action will be taken when IPv6 TCP traffic is seen on a router,
and the routing table suggests routing it to the
.Nm
interface.
In this case, the packet will be accepted by the router,
regardless of the list of IPv6 interface addresses assigned to the router.
The packet is captured by an IPv6 TCP socket, if it has the
.Dv IN6P_FAITH
flag turned on and it has matching address/port pairs.
Thus,
.Nm
allows captured IPv6 TCP traffic to be relayed to some
specific destination addresses.
Userland programs, such as
.Xr faithd 8
can use this behavior to relay IPv6 TCP traffic to IPv4 TCP traffic.
The program can accept some specific IPv6 TCP traffic, perform
.Xr getsockname 2
to get the IPv6 destination address specified by the client,
and perform application-specific address mapping to relay IPv6 TCP to IPv4 TCP.
.Pp
The
.Dv IN6P_FAITH
flag on an IPv6 TCP socket can be set by using
.Xr setsockopt 2 ,
with level set to
.Dv IPPROTO_IPV6
and optname set to
.Dv IPv6_FAITH .
.Pp
To handle error reports by ICMPv6, some of the ICMPv6 packets routed to the
.Nm
interface will be delivered to IPv6 TCP, as well.
.Pp
To understand how
.Nm
can be used, take a look at the source code of
.Xr faithd 8 .
.Pp
As the
.Nm
interface implements a potentially dangerous operation,
great care must be taken when configuring the
.Nm
interface.
To avoid possible misuse, the
.Xr sysctl 8
variable
.Li net.inet6.ip6.keepfaith
must be set to
.Li 1
prior to use of the interface.
When
.Li net.inet6.ip6.keepfaith
is
.Li 0 ,
no packet is captured by the
.Nm
interface.
.Pp
The
.Nm
interface is intended to be used on routers, not on hosts.
.\"
.Sh SEE ALSO
.Xr inet 4 ,
.Xr inet6 4 ,
.Xr hostname.if 5 ,
.Xr faithd 8 ,
.Xr netstart 8
.Sh STANDARDS
.Rs
.%A J. Hagino
.%A K. Yamamoto
.%D June 2001
.%R RFC 3142
.%T "An IPv6-to-IPv4 transport relay translator"
.Re
.Sh HISTORY
The FAITH IPv6-to-IPv4 TCP relay translator first appeared in
WIDE hydrangea IPv6 stack.
@


1.19
log
@last stage of rfc changes, using consistent Rs/Re blocks, and moving the
references into a STANDARDS section;
@
text
@d1 1
a1 1
.\"	$OpenBSD: faith.4,v 1.18 2012/08/18 08:44:25 jmc Exp $
d31 1
a31 1
.Dd $Mdocdate: August 18 2012 $
@


1.18
log
@within Rs/Re reference blocks, use %U instead of %O (or any other
variants) for URLs, allowing mandoc -Thtml to properly generate links;

(sendmail.8 changes are simply using Lk, which i somehow missed in previous)

ingo reminded me to verify that gnu groff recognises %U: 1.20.1 does not,
but 1.21 does;
@
text
@d1 1
a1 1
.\"	$OpenBSD: faith.4,v 1.17 2007/05/31 19:19:50 jmc Exp $
d31 1
a31 1
.Dd $Mdocdate: May 31 2007 $
d126 1
d128 4
a131 2
.%A Jun-ichiro itojun Hagino
.%A Kazu Yamamoto
a132 3
.%B RFC 3142
.%U ftp://ftp.isi.edu/in-notes/rfc3142.txt
.%D June 2001
@


1.17
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: faith.4,v 1.16 2004/08/17 23:58:36 jaredy Exp $
d31 1
a31 1
.Dd $Mdocdate$
d131 1
a131 1
.%O ftp://ftp.isi.edu/in-notes/rfc3142.txt
@


1.16
log
@keep all "ifconfig <cloneable> create" examples the same

ok jmc
@
text
@d1 1
a1 1
.\"	$OpenBSD: faith.4,v 1.15 2004/07/26 09:20:14 jmc Exp $
d31 1
a31 1
.Dd April 10, 1999
@


1.15
log
@.Xr hostname.if 5
.Xr netstart 8

from Alexey E. Suslikov
@
text
@d1 1
a1 1
.\"	$OpenBSD: faith.4,v 1.14 2003/12/08 10:03:43 markus Exp $
d50 1
a50 1
.Ic ifconfig faithN create
@


1.14
log
@mention ifconfig create; sync synopsis like (Op Ar count). with jmc, deraadt
@
text
@d1 1
a1 1
.\"	$OpenBSD: faith.4,v 1.13 2003/08/08 09:51:53 jmc Exp $
d123 3
a125 1
.Xr faithd 8
@


1.13
log
@refer to RFCs consistently (RFC XXXX);
@
text
@d1 1
a1 1
.\"	$OpenBSD: faith.4,v 1.12 2003/06/06 10:29:41 jmc Exp $
d46 9
@


1.12
log
@- section reorder
- some macro fixes
- kill whitespace at EOL
@
text
@d1 1
a1 1
.\"	$OpenBSD: faith.4,v 1.11 2003/01/18 23:53:49 deraadt Exp $
d119 1
a119 1
.%B RFC3142
@


1.11
log
@inet6 fixes from jmc@@prioris.mini.pw.edu.pl
@
text
@d1 1
a1 1
.\"	$OpenBSD: faith.4,v 1.10 2001/06/30 01:05:23 itojun Exp $
d58 1
a58 1
allows captured IPv6 TCP traffic to be relayed to some 
@


1.10
log
@faith(4) is now documented in RFC3142.
@
text
@d1 1
a1 1
.\"	$OpenBSD: faith.4,v 1.9 2001/06/23 05:57:04 deraadt Exp $
d44 1
a44 1
like
d48 1
a48 1
and routing table suggests to route it to
d52 2
a53 2
regardless of list of IPv6 interface addresses assigned to the router.
The packet will be captured by an IPv6 TCP socket, if it has
d56 1
a56 1
In result,
d58 2
a59 1
will let you capture IPv6 TCP traffic to some specific destination addresses.
d68 1
d70 1
a70 1
flag on IPv6 TCP socket can be set by using
d72 1
a72 1
with level equals to
d74 1
a74 1
and optname equals to
d77 1
a77 1
To handle error reports by ICMPv6, some of ICMPv6 packets routed to
d83 1
a83 1
can be used, take a look at source code of
d86 1
a86 1
As
d88 2
a89 2
interface implements potentially dangerous operation,
great care must be taken when configuring
d92 1
a92 1
To avoid possible misuse,
d98 1
a98 1
prior to the use of the interface.
d103 1
a103 1
no packet will be captured by
d107 1
d124 1
a124 1
The FAITH IPv6-to-IPv4 TCP relay translator was first appeared in
@


1.9
log
@ok, tmac is now fixed
@
text
@d1 2
a2 2
.\"	$OpenBSD: faith.4,v 1.8 2001/06/23 02:33:11 deraadt Exp $
.\"	$KAME: faith.4,v 1.7 2000/11/24 10:15:06 itojun Exp $
d116 3
a118 3
.%R internet draft
.%N draft-ietf-ngtrans-tcpudp-relay-01.txt
.%O work in progress material
@


1.8
log
@join .%A entries; most by bk@@rt.fm
@
text
@d1 1
a1 1
.\"	$OpenBSD: faith.4,v 1.7 2000/11/24 10:25:12 itojun Exp $
d113 2
a114 1
.%A Jun-ichiro itojun Hagino and Kazu Yamamoto
@


1.7
log
@sync with recent kame document.
- on AF_INET6, :: does not mean local node.
@
text
@d1 1
a1 1
.\"	$OpenBSD: faith.4,v 1.6 2000/11/20 08:00:01 deraadt Exp $
d113 1
a113 2
.%A Jun-ichiro itojun Hagino
.%A Kazu Yamamoto
@


1.6
log
@various Xr fixes; nordin@@cse.ogi.edu
@
text
@d1 2
a2 2
.\"	$OpenBSD: faith.4,v 1.5 2000/10/18 02:38:22 aaron Exp $
.\"	$KAME: faith.4,v 1.4 2000/04/19 09:39:42 itojun Exp $
a30 2
.\"     KAME Id: faith.4,v 1.2 2000/01/19 06:16:52 itojun Exp
.\"
d112 8
a119 7
.\" .Rs
.\" .%A	Jun-ichiro itojun Hagino
.\" .%A	Kazu Yamamoto
.\" .%T	``FAITH'' IPv6-to-IPv4 TCP relay translator
.\" .%D	July 1999
.\" .Re
.\"
@


1.5
log
@- Arguments to .Nd should go on the same line as .Nd.
- Standardize Nd format for all Ethernet man pages for easy man -k'ing.
@
text
@d1 1
a1 1
.\"	$OpenBSD: faith.4,v 1.4 2000/04/19 09:43:49 itojun Exp $
d65 1
a65 1
.Xr getsockname 3
@


1.4
log
@use "Op Ar count".
@
text
@d1 1
a1 1
.\"	$OpenBSD: faith.4,v 1.3 2000/04/03 21:19:36 aaron Exp $
d38 1
a38 2
.Nd
.Tn IPv6-to-IPv4 TCP relay capturing interface
@


1.3
log
@Remove trailing whitespace.
@
text
@d1 2
a2 1
.\"	$OpenBSD: faith.4,v 1.2 2000/01/19 08:09:40 itojun Exp $
d41 1
a41 1
.Cd "pseudo-device faith 1"
@


1.2
log
@cosmetic; remove trailing dot in SEE ALSO section
@
text
@d1 1
a1 1
.\"	$OpenBSD: faith.4,v 1.1 1999/12/08 13:58:42 itojun Exp $
d5 1
a5 1
.\" 
d17 1
a17 1
.\" 
@


1.1
log
@add faith(4), gif(4) and inet6(4).
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d30 1
a30 1
.\"     KAME Id: faith.4,v 1.1.1.1 1999/08/08 23:30:37 itojun Exp
d113 1
a113 1
.Xr faithd 8 .
@

