head	1.18;
access;
symbols
	OPENBSD_5_6:1.17.0.8
	OPENBSD_5_6_BASE:1.17
	OPENBSD_5_5:1.17.0.6
	OPENBSD_5_5_BASE:1.17
	OPENBSD_5_4:1.17.0.2
	OPENBSD_5_4_BASE:1.17
	OPENBSD_5_3:1.16.0.6
	OPENBSD_5_3_BASE:1.16
	OPENBSD_5_2:1.16.0.4
	OPENBSD_5_2_BASE:1.16
	OPENBSD_5_1_BASE:1.16
	OPENBSD_5_1:1.16.0.2
	OPENBSD_5_0:1.15.0.14
	OPENBSD_5_0_BASE:1.15
	OPENBSD_4_9:1.15.0.12
	OPENBSD_4_9_BASE:1.15
	OPENBSD_4_8:1.15.0.10
	OPENBSD_4_8_BASE:1.15
	OPENBSD_4_7:1.15.0.6
	OPENBSD_4_7_BASE:1.15
	OPENBSD_4_6:1.15.0.8
	OPENBSD_4_6_BASE:1.15
	OPENBSD_4_5:1.15.0.4
	OPENBSD_4_5_BASE:1.15
	OPENBSD_4_4:1.15.0.2
	OPENBSD_4_4_BASE:1.15
	OPENBSD_4_3:1.14.0.4
	OPENBSD_4_3_BASE:1.14
	OPENBSD_4_2:1.14.0.2
	OPENBSD_4_2_BASE:1.14
	OPENBSD_4_1:1.13.0.20
	OPENBSD_4_1_BASE:1.13
	OPENBSD_4_0:1.13.0.18
	OPENBSD_4_0_BASE:1.13
	OPENBSD_3_9:1.13.0.16
	OPENBSD_3_9_BASE:1.13
	OPENBSD_3_8:1.13.0.14
	OPENBSD_3_8_BASE:1.13
	OPENBSD_3_7:1.13.0.12
	OPENBSD_3_7_BASE:1.13
	OPENBSD_3_6:1.13.0.10
	OPENBSD_3_6_BASE:1.13
	OPENBSD_3_5:1.13.0.8
	OPENBSD_3_5_BASE:1.13
	OPENBSD_3_4:1.13.0.6
	OPENBSD_3_4_BASE:1.13
	OPENBSD_3_3:1.13.0.4
	OPENBSD_3_3_BASE:1.13
	OPENBSD_3_2:1.13.0.2
	OPENBSD_3_2_BASE:1.13
	OPENBSD_3_1:1.12.0.4
	OPENBSD_3_1_BASE:1.12
	OPENBSD_3_0:1.12.0.2
	OPENBSD_3_0_BASE:1.12
	OPENBSD_2_9:1.10.0.2
	OPENBSD_2_9_BASE:1.10
	OPENBSD_2_8:1.9.0.4
	OPENBSD_2_8_BASE:1.9
	OPENBSD_2_7:1.9.0.2
	OPENBSD_2_7_BASE:1.9
	OPENBSD_2_6:1.8.0.2
	OPENBSD_2_6_BASE:1.8
	OPENBSD_2_5:1.5.0.4
	OPENBSD_2_5_BASE:1.5
	OPENBSD_2_4:1.5.0.2
	OPENBSD_2_4_BASE:1.5
	OPENBSD_2_3:1.4.0.2
	OPENBSD_2_3_BASE:1.4
	OPENBSD_2_2:1.2.0.6
	OPENBSD_2_2_BASE:1.2
	OPENBSD_2_1:1.2.0.4
	OPENBSD_2_1_BASE:1.2
	OPENBSD_2_0:1.2.0.2
	OPENBSD_2_0_BASE:1.2
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@.\" @;


1.18
date	2014.10.09.04.41.36;	author tedu;	state dead;
branches;
next	1.17;
commitid	hWljKPn0SkZDiF4N;

1.17
date	2013.07.16.16.05.49;	author schwarze;	state Exp;
branches;
next	1.16;

1.16
date	2011.08.19.14.28.52;	author aschrijver;	state Exp;
branches;
next	1.15;

1.15
date	2008.08.02.09.17.46;	author jmc;	state Exp;
branches;
next	1.14;

1.14
date	2007.05.31.19.19.50;	author jmc;	state Exp;
branches;
next	1.13;

1.13
date	2002.09.26.07.55.40;	author miod;	state Exp;
branches;
next	1.12;

1.12
date	2001.10.05.14.45.53;	author mpech;	state Exp;
branches;
next	1.11;

1.11
date	2001.06.22.12.15.46;	author mpech;	state Exp;
branches;
next	1.10;

1.10
date	2000.11.10.20.02.16;	author todd;	state Exp;
branches;
next	1.9;

1.9
date	2000.04.18.21.45.14;	author aaron;	state Exp;
branches;
next	1.8;

1.8
date	99.10.05.20.53.11;	author aaron;	state Exp;
branches;
next	1.7;

1.7
date	99.06.05.13.18.32;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	99.05.16.19.56.29;	author alex;	state Exp;
branches;
next	1.5;

1.5
date	98.09.01.16.38.20;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	98.03.16.23.30.58;	author gene;	state Exp;
branches;
next	1.3;

1.3
date	98.02.15.07.11.52;	author art;	state Exp;
branches;
next	1.2;

1.2
date	96.07.08.22.09.33;	author ccappuc;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.44.24;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.44.24;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.18
log
@no more lkms
@
text
@.\"	$OpenBSD: lkm.4,v 1.17 2013/07/16 16:05:49 schwarze Exp $
.\"	$NetBSD: lkm.4,v 1.4 1994/11/30 16:22:22 jtc Exp $
.\"
.\" Copyright (c) 1993 Christopher G. Demetriou
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. The name of the author may not be used to endorse or promote products
.\"    derived from this software without specific prior written permission
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.Dd $Mdocdate: July 16 2013 $
.Dt LKM 4
.Os
.Sh NAME
.Nm LKM
.Nd Loadable Kernel Modules interface
.Sh SYNOPSIS
.Cd "option LKM"
.Sh DESCRIPTION
Loadable kernel modules allow the system administrator to
dynamically add and remove functionality from a running system.
This ability also helps software developers to develop
new parts of the kernel without constantly rebooting to
test their changes.
.Pp
Various types of modules can be loaded into the system.
There are several defined module types, listed below, which can
be added to the system in a predefined way.
In addition, there is a generic type, for which the module itself handles
loading and unloading.
.Pp
The
.Nm
interface is used by performing
.Xr ioctl 2
calls on the
.Pa /dev/lkm
device.
Normally all operations involving Loadable Kernel Modules are handled by the
.Xr modload 8 ,
.Xr modunload 8 ,
and
.Xr modstat 8
programs.
Users should never have to interact with
.Pa /dev/lkm
directly.
The loading and unloading of modules is also
dependent on the system
.Xr securelevel 7 .
.Sh MODULE TYPES
.Bl -tag -width indent
.It System Call modules
System calls may be replaced by loading
new ones via the
.Nm
interface.
All system calls may be replaced, but special care should be taken with the
.Xr ioctl 2
system call, as it is used to load and
unload modules.
.Pp
When a system call module is unloaded,
the system call which
was replaced by the loadable module
is returned to its rightful place
in the system call table.
.It Virtual File System modules
Virtual file systems may be added
via the
.Nm
interface.
.It Device Driver modules
New block and character device
drivers may be loaded into the system with
.Nm LKM .
The major problem with loading
a device driver is that the driver's
device nodes must exist for the
devices to be accessed.
They are usually created by instructing
.Xr modload 8
to run an appropriate program when
the driver has been successfully loaded.
.It Execution Interpreters
Execution interpreters allow
the loading and execution of
binaries which are normally not
usable by the operating system.
.It Miscellaneous modules
Miscellaneous modules are modules
for which there are not currently
well-defined or well-used interfaces
for extension.
The user is expected to write their own loader to manipulate
whatever kernel data structures necessary to enable and disable the new module
when it is loaded and unloaded.
.El
.Sh FILES
.Bl -tag -width "/usr/include/sys/lkm.hXXX" -compact
.It Pa /dev/lkm
.Nm
interface device.
.It Pa /usr/include/sys/lkm.h
File containing definitions of module types.
.It Pa /usr/share/lkm
Example source code implementing several of the modules types.
.El
.Sh SEE ALSO
.Xr securelevel 7 ,
.Xr modload 8 ,
.Xr modstat 8 ,
.Xr modunload 8
.Sh HISTORY
The
.Nm
facility was designed to be similar in functionality
to the loadable kernel modules facility provided by
.Tn "SunOS 4.1.3" .
.Sh AUTHORS
.An Terrence R. Lambert Aq Mt terry@@cs.weber.edu
.Sh BUGS
Loading a bogus module is likely to kill your machine.
@


1.17
log
@use .Mt for email addresses; from Jan Stary <hans at stare dot cz>; ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: lkm.4,v 1.16 2011/08/19 14:28:52 aschrijver Exp $
d29 1
a29 1
.Dd $Mdocdate: August 19 2011 $
@


1.16
log
@Don't mention loadable streams modules are lacking.

OK mikeb@@ millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: lkm.4,v 1.15 2008/08/02 09:17:46 jmc Exp $
d29 1
a29 1
.Dd $Mdocdate: August 2 2008 $
d139 1
a139 1
.An Terrence R. Lambert Aq terry@@cs.weber.edu
@


1.15
log
@fixes from Alexander Holupirek, documentation/5899:

- fix a typo in lkm.4 (different fix used)
- document securelevel(7) (again, different fix taken)

whilst here, some minor repair:

- no need to wrap section names in quotes
- tidy up FILES a little
- new sentence, new line
@
text
@d1 1
a1 1
.\"	$OpenBSD: lkm.4,v 1.14 2007/05/31 19:19:50 jmc Exp $
d29 1
a29 1
.Dd $Mdocdate: May 31 2007 $
a141 3
.Pp
Loadable streams modules should and will be implemented
when a streams implementation is written.
@


1.14
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: lkm.4,v 1.13 2002/09/26 07:55:40 miod Exp $
d29 1
a29 1
.Dd $Mdocdate$
d66 4
a69 1
.Sh "MODULE TYPES"
d97 1
a97 1
device nodes must be exist for the
d118 1
a118 1
.Bl -tag -width /usr/include/sys/lkm.h -compact
d121 1
a121 1
interface device
d123 1
a123 1
file containing definitions of module types
d125 1
a125 1
example source code implementing several of the modules types
d128 1
@


1.13
log
@Incomplete section 4 mi manual page cleanup.
- make configuration lines match GENERIC files
- more Xr (hopefully usefule Xr)
- never mention intro(4) on non-physical devices (i.e. protocols), always
mention it for physical devices
- random text style and quoting fixes
- drivers ported from FreeBSD did mention rc.conf instead of hostname.if as
the place to put mediaopt
- some .Tn UNIX -> .Ox replacements
- etc, etc...

reviewd in part by deraadt@@ (until he got bored of this)
@
text
@d1 1
a1 1
.\"	$OpenBSD: lkm.4,v 1.12 2001/10/05 14:45:53 mpech Exp $
d29 1
a29 1
.Dd September 4, 1993
@


1.12
log
@Powered by @@mantoya:
o) start new sentence on a new line;
o) minor mdoc fixes;
millert@@ ok

Tip of the day:   www.mpechismazohist.com
@
text
@d1 1
a1 1
.\"	$OpenBSD: lkm.4,v 1.11 2001/06/22 12:15:46 mpech Exp $
d135 1
a135 1
Terrence R. Lambert <terry@@cs.weber.edu>
@


1.11
log
@o) remove unnecessary .Pp;
o) remove unnecessary .Nm args;
o) closes .Bl;
o) .Sh AUTHOR -> .Sh AUTHORS;
o) sort SEE ALSO;
o) better -mdoc style;
o) typos;

aaron@@ ok.
@
text
@d1 1
a1 1
.\"	$OpenBSD: lkm.4,v 1.10 2000/11/10 20:02:16 todd Exp $
d46 3
a48 3
be added to the system in a predefined way.  In addition, there
is a generic type, for which the module itself handles loading and
unloading.
d56 2
a57 2
device.  Normally all operations involving
Loadable Kernel Modules are handled by the
d62 2
a63 1
programs.  Users should never have to interact with
d72 2
a73 3
interface.  All system calls may be
replaced, but special care should
be taken with the
d95 2
a96 2
devices to be accessed.  They are usually
created by instructing
d109 3
a111 4
for extension.  The user is expected
to write their own loader to manipulate
whatever kernel data structures necessary
to enable and disable the new module
@


1.10
log
@.Sh AUTHOR -> AUTHORS, ok aaron@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: lkm.4,v 1.9 2000/04/18 21:45:14 aaron Exp $
d124 1
@


1.9
log
@Typo: sytem -> system
@
text
@d1 1
a1 1
.\"	$OpenBSD: lkm.4,v 1.8 1999/10/05 20:53:11 aaron Exp $
d134 1
a134 1
.Sh AUTHOR
@


1.8
log
@The .Bl -tag flag expects a -width argument.
@
text
@d1 1
a1 1
.\"	$OpenBSD: lkm.4,v 1.7 1999/06/05 13:18:32 aaron Exp $
d44 1
a44 1
Various types of modules can be loaded into the sytem.
@


1.7
log
@more .Os cleanup, remove some trailing whitespace, cleanse some .Nm
@
text
@d1 1
a1 1
.\"	$OpenBSD: lkm.4,v 1.6 1999/05/16 19:56:29 alex Exp $
d135 1
a135 3
.Bl -tag
Terrence R. Lambert, terry@@cs.weber.edu
.El
@


1.6
log
@Cleanup xrefs under SEE ALSO.  Specifically:

  - Sort xrefs by section, and then alphabetically.
  - Add missing commas between xref items.
  - Remove commas from the last xref entry.
  - Remove duplicate entries.
@
text
@d1 1
a1 1
.\"	$OpenBSD: lkm.4,v 1.5 1998/09/01 16:38:20 deraadt Exp $
d31 1
a31 1
.Os OpenBSD
@


1.5
log
@more man page fixes; aaron@@ug.cs.dal.ca
@
text
@d1 1
a1 1
.\"	$OpenBSD: lkm.4,v 1.4 1998/03/16 23:30:58 gene Exp $
d126 2
a127 2
.Xr modunload 8 ,
.Xr modstat 8
@


1.4
log
@"options" -> "option" for kernel config options.  Also, add OpenBSD rcsid.
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d121 1
a121 1
file containing defitions of module types
@


1.3
log
@update of old info.
@
text
@d1 1
d36 1
a36 1
.Cd "options LKM"
@


1.2
log
@kernel is /bsd, os is OpenBSD
@
text
@d86 1
a86 6
interface.  At this time, only
file systems which are already
known to the system can be added,
because of the way the
.Xr mount 2
system call is implemented.
@


1.1
log
@Initial revision
@
text
@d30 1
a30 1
.Os NetBSD 0.9a
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@

