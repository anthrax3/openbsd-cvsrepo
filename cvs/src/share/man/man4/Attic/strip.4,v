head	1.25;
access;
symbols
	OPENBSD_4_6:1.24.0.10
	OPENBSD_4_6_BASE:1.24
	OPENBSD_4_5:1.24.0.6
	OPENBSD_4_5_BASE:1.24
	OPENBSD_4_4:1.24.0.4
	OPENBSD_4_4_BASE:1.24
	OPENBSD_4_3:1.24.0.2
	OPENBSD_4_3_BASE:1.24
	OPENBSD_4_2:1.22.0.2
	OPENBSD_4_2_BASE:1.22
	OPENBSD_4_1:1.21.0.12
	OPENBSD_4_1_BASE:1.21
	OPENBSD_4_0:1.21.0.10
	OPENBSD_4_0_BASE:1.21
	OPENBSD_3_9:1.21.0.8
	OPENBSD_3_9_BASE:1.21
	OPENBSD_3_8:1.21.0.6
	OPENBSD_3_8_BASE:1.21
	OPENBSD_3_7:1.21.0.4
	OPENBSD_3_7_BASE:1.21
	OPENBSD_3_6:1.21.0.2
	OPENBSD_3_6_BASE:1.21
	OPENBSD_3_5:1.18.0.2
	OPENBSD_3_5_BASE:1.18
	OPENBSD_3_4:1.17.0.2
	OPENBSD_3_4_BASE:1.17
	OPENBSD_3_3:1.14.0.6
	OPENBSD_3_3_BASE:1.14
	OPENBSD_3_2:1.14.0.4
	OPENBSD_3_2_BASE:1.14
	OPENBSD_3_1:1.14.0.2
	OPENBSD_3_1_BASE:1.14
	OPENBSD_3_0:1.13.0.2
	OPENBSD_3_0_BASE:1.13
	OPENBSD_2_9:1.11.0.2
	OPENBSD_2_9_BASE:1.11
	OPENBSD_2_8:1.8.0.6
	OPENBSD_2_8_BASE:1.8
	OPENBSD_2_7:1.8.0.4
	OPENBSD_2_7_BASE:1.8
	OPENBSD_2_6:1.8.0.2
	OPENBSD_2_6_BASE:1.8
	OPENBSD_2_5:1.5.0.2
	OPENBSD_2_5_BASE:1.5
	OPENBSD_2_4:1.4.0.2
	OPENBSD_2_4_BASE:1.4
	OPENBSD_2_3:1.3.0.6
	OPENBSD_2_3_BASE:1.3
	OPENBSD_2_2:1.3.0.4
	OPENBSD_2_2_BASE:1.3
	OPENBSD_2_1:1.3.0.2
	OPENBSD_2_1_BASE:1.3
	OPENBSD_2_0:1.2.0.2
	OPENBSD_2_0_BASE:1.2;
locks; strict;
comment	@# @;


1.25
date	2009.08.25.16.16.34;	author jsg;	state dead;
branches;
next	1.24;

1.24
date	2008.01.06.18.40.24;	author jmc;	state Exp;
branches;
next	1.23;

1.23
date	2008.01.06.09.53.17;	author mbalmer;	state Exp;
branches;
next	1.22;

1.22
date	2007.05.31.19.19.52;	author jmc;	state Exp;
branches;
next	1.21;

1.21
date	2004.06.26.14.13.18;	author jmc;	state Exp;
branches;
next	1.20;

1.20
date	2004.06.20.17.37.15;	author aaron;	state Exp;
branches;
next	1.19;

1.19
date	2004.04.04.13.19.36;	author jmc;	state Exp;
branches;
next	1.18;

1.18
date	2004.03.21.19.47.59;	author miod;	state Exp;
branches;
next	1.17;

1.17
date	2003.07.09.13.26.20;	author jmc;	state Exp;
branches;
next	1.16;

1.16
date	2003.06.06.10.29.41;	author jmc;	state Exp;
branches;
next	1.15;

1.15
date	2003.04.07.16.03.32;	author jmc;	state Exp;
branches;
next	1.14;

1.14
date	2001.11.13.13.54.25;	author mpech;	state Exp;
branches;
next	1.13;

1.13
date	2001.10.05.14.45.53;	author mpech;	state Exp;
branches;
next	1.12;

1.12
date	2001.08.03.15.21.16;	author mpech;	state Exp;
branches;
next	1.11;

1.11
date	2001.03.06.19.56.50;	author brad;	state Exp;
branches;
next	1.10;

1.10
date	2001.03.01.16.11.19;	author aaron;	state Exp;
branches;
next	1.9;

1.9
date	2000.12.21.21.01.19;	author aaron;	state Exp;
branches;
next	1.8;

1.8
date	99.07.09.13.35.47;	author aaron;	state Exp;
branches;
next	1.7;

1.7
date	99.07.03.02.11.12;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	99.05.16.19.56.38;	author alex;	state Exp;
branches;
next	1.5;

1.5
date	99.04.02.16.21.36;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	98.09.06.22.23.19;	author aaron;	state Exp;
branches;
next	1.3;

1.3
date	97.04.20.23.34.17;	author millert;	state Exp;
branches;
next	1.2;

1.2
date	96.10.08.01.20.30;	author michaels;	state Exp;
branches;
next	1.1;

1.1
date	96.07.27.10.50.09;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.25
log
@Remove support for packet mode of Metricom Ricochet radios.
It currently doesn't compile and this is unlikely to change
as there are many alternatives now since we no longer live
in the early 1990s and Metricom went bankrupt some time ago.

ok many @@
@
text
@.\"	$OpenBSD: strip.4,v 1.24 2008/01/06 18:40:24 jmc Exp $
.\"
.\" Copyright 1996 The Board of Trustees of The Leland Stanford
.\" Junior University. All Rights Reserved.
.\"
.\" Author: Jonathan Stone
.\"
.\" Permission to use, copy, modify, and distribute this
.\" software and its documentation for any purpose and without
.\" fee is hereby granted, provided that the above copyright
.\" notice and the above authorship notice appear in all copies.
.\" Stanford University makes no representations about the suitability
.\" of this software for any purpose.  It is provided "as is" without
.\" express or implied warranty.
.Dd $Mdocdate: January 6 2008 $
.Dt STRIP 4
.Os
.Sh NAME
.Nm strip
.Nd packet-mode network device driver for the Metricom Ricochet radio
.Sh SYNOPSIS
.Cd "pseudo-device strip" Op Ar count
.Sh DESCRIPTION
Configures
.Ar count
.Nm
interfaces, named
.Sy st Ns Ar 0 ,
.Sy st Ns Ar 1 ,
etc., into a kernel built from a config file containing the
given entry.
.Pp
Each
.Nm
interface is a pseudo-device driver for the Metricom Ricochet radio,
operating in peer-to-peer packet mode.
.Pp
The
.Nm
driver takes outbound network packets, encapsulates them using the
Metricom "starmode" framing, and sends the packets out an RS-232
interface to a Metricom
.Em Ricochet
radio.
Packets arriving from the radio via the serial link are decapsulated and then
passed up to the local host's networking stack.
.Pp
.Nm
is an acronym for
.Sy \&St Ns armode
.Sy R Ns adio
.Sy IP .
.Pp
In many ways,
the
.Nm
driver is very much like the
.Nm sl
SLIP pseudo-device driver.
A
.Nm
device is attached to a tty line with
.Xr ldattach 8 .
Once attached, the interface is configured via
.Xr ifconfig 8 .
The major difference between the
.Xr sl 4
SLIP pseudo-device driver and the
.Nm
driver is that SLIP works only between two hosts over
a dedicated point-to-point connection.
In contrast,
.Nm
sends
packets to a frequency-hopping radio, which can address packets to
any peer Metricom radio rather than just to a single host at the
other end of a point-to-point line.
Thus, one
.Nm
pseudo-device is usually sufficient for any kernel.
.Pp
In other respects, a
.Nm
interface is rather like an Ethernet interface.
Packets are individually addressed, and subsequent packets can
be sent independently to different MAC addresses.
However, the "Star-mode" framing and MAC addressing are not in any way
compatible with Ethernet.
Broadcast or multicast to more than one radio is not possible, due to the
independent frequency-hopping operation of the radios.
The interface flags
.Dv IFF_POINTOPOINT
and
.Dv IFF_BROADCAST
are not supported on
.Nm
interface.
.Pp
In other words,
.Nm
implements a multiple-access, non-broadcast device, accessed via
an RS-232 serial line, using a proprietary packet framing scheme.
.Pp
This version
.Nm
driver maps IP addresses to Metricom radio addresses using
statically configured entries in the normal routing table.
These entries map IP addresses of peer radios to the MAC-level addresses.
The exact syntax of this mapping and an example are discussed below.
The Internet Assigned Numbers Authority (IANA) has allocated an ARP
type code for use with STRIP.
A future version of this driver will support
.Xr arp 4
to obtain the IP address of reachable peer radios dynamically.
.Sh ADDRESS CONFIGURATION
This version of the
.Nm
driver requires static pre-configuration of
the mapping from IP addresses to radio MAC addresses.
The
.Xr route 8
command should be used to bind a peer STRIP host's radio IP address
to the peer's link-level radio address.
Radio addresses are encoded using the hex equivalent of the radio's
decimal ASCII address.
For example, the following route command will
configure a routing entry to a radio with a MAC address of 1234-5678,
and an IP address 10.11.12.13:
.Pp
.Dl "# route add -host 10.11.12.13 -link 1:2:3:4:5:6:7:8"
.Pp
Generalising from this example to other IP addresses and to other 8-digit MAC addresses
should be clear.
.Sh RADIO CONFIGURATION
The Metricom radios can auto-baud at speeds up to 38.4k baud.
At higher speeds \(em 57600 or 115200 \(em the radio cannot autobaud.
When running at high speeds, the radio's serial port should be
manually configured to permanently run at the desired speed.
Use a terminal emulator and the Hayes command
.Em ATS304=115200
to set the serial baudrate to the specified number (or 0 for autobaud).
The command
.Em AT&w
will then save the current radio state in non-volatile memory.
.Pp
Metricom radios can operate in either "modem-emulation" mode
or in packet mode (Starmode).
The
.Nm
driver automatically detects if the radio has fallen out of starmode,
and resets it back into starmode, if the baud rate was set correctly
by
.Xr ldattach 8 .
.\" .Sh DIAGNOSTICS
.Sh SEE ALSO
.Xr arp 4 ,
.Xr inet 4 ,
.Xr ldattach 8 ,
.Xr route 8 ,
.Xr slip 8
.Sh HISTORY
.Nm
was originally developed for the Linux kernel by Stuart
Cheshire of Stanford's Operating Systems and Networking group,
as part of Mary Baker's MosquitoNet
.Sy http://mosquitonet.stanford.edu/mosquitonet.html
project.
This
.Nm
driver was ported to BSD by Jonathan Stone at Stanford's Distributed
Systems Group and first distributed with
.Nx 1.2 .
.Sh BUGS
Currently is IP-only.
Encapsulations for AppleTalk and ARP have been defined,
but are not yet implemented in this driver.
.Pp
.Nm
has not been widely tested on a variety of lower-level tty drivers.
.P
The detection and resetting of radios that crash out of Starmode does
not always work in this version of the driver.
One workaround is to kill the
.Xr ldattach 8
process, ifconfig the
.Nm
interface down, and then start a new ldattach and rerun ifconfig.
@


1.24
log
@two more slattach -> ldattach;
@
text
@d1 1
a1 1
.\"	$OpenBSD: strip.4,v 1.23 2008/01/06 09:53:17 mbalmer Exp $
@


1.23
log
@Don't reference {sl|nmea}attach(8) in the SEE ALSO section but ldattach(8)

Discussed with and ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: strip.4,v 1.22 2007/05/31 19:19:52 jmc Exp $
d15 1
a15 1
.Dd $Mdocdate$
d63 1
a63 1
.Xr slattach 8 .
d153 1
a153 1
.Xr slattach 8 .
@


1.22
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: strip.4,v 1.21 2004/06/26 14:13:18 jmc Exp $
d158 1
a159 1
.Xr slattach 8 ,
d184 1
a184 1
.Xr slattach 8
d187 1
a187 1
interface down, and then start a new slattach and rerun ifconfig.
@


1.21
log
@- full stop after etc
- better example
- -- -> \(em
- remove false comment

from jared yanovich;
@
text
@d1 1
a1 1
.\"	$OpenBSD: strip.4,v 1.20 2004/06/20 17:37:15 aaron Exp $
d15 1
a15 1
.Dd March 10, 1996
@


1.20
log
@The pseudo-device keyword takes only one count as an argument.
@
text
@d1 1
a1 1
.\"	$OpenBSD: strip.4,v 1.19 2004/04/04 13:19:36 jmc Exp $
d30 1
a30 1
etc, into a kernel built from a config file containing the
d130 1
a130 1
.Dl route add -host 10.11.12.13 -link 1:2:3:4:5:6:7:8
d136 1
a136 1
At higher speeds -- 57600 or 115200 -- the radio cannot autobaud.
a153 1
.\" Why isn't .Ss documented in mdoc(7) and mdoc.samples(7)?
@


1.19
log
@.br workaround no longer necessary;
@
text
@d1 1
a1 1
.\"	$OpenBSD: strip.4,v 1.18 2004/03/21 19:47:59 miod Exp $
a22 1
.Op Ar count
@


1.18
log
@Homogeneize config lines for pseudo-devices, and do not put fixed values.
@
text
@d1 1
a1 1
.\"	$OpenBSD: strip.4,v 1.17 2003/07/09 13:26:20 jmc Exp $
d131 1
a131 5
.br
.in 10
route add -host 10.11.12.13 -link 1:2:3:4:5:6:7:8
.br
.in 5
@


1.17
log
@- fix lists/displays
- quote .Cd's
- add/remove .Pp's as necessary
- fix some .Re/.Rs's
- simplify macros
@
text
@d1 1
a1 1
.\"	$OpenBSD: strip.4,v 1.16 2003/06/06 10:29:41 jmc Exp $
a19 2
.\" Why doesn't this work right? mdoc(7) nor mdoc.samples(7) lists
.\" .Nd, except for a passing reference in the latter.
d22 1
a22 7
.\" want to write
.\" .Sy pseudo-device
.\" .Nm tun
.\" .Op Ar count
.\" so that .Nm is just "tun", but if we do that we get a line break
.\" after "pseudo-device", ick.
.Nm pseudo-device strip
@


1.16
log
@- section reorder
- some macro fixes
- kill whitespace at EOL
@
text
@d1 1
a1 1
.\"	$OpenBSD: strip.4,v 1.15 2003/04/07 16:03:32 jmc Exp $
d59 1
a59 1
.Sy St Ns armode
@


1.15
log
@typos;
@
text
@d1 1
a1 1
.\"	$OpenBSD: strip.4,v 1.14 2001/11/13 13:54:25 mpech Exp $
d175 12
a201 12
.Sh HISTORY
.Nm
was originally developed for the Linux kernel by Stuart
Cheshire of Stanford's Operating Systems and Networking group,
as part of Mary Baker's MosquitoNet
.Sy http://mosquitonet.stanford.edu/mosquitonet.html
project.
This
.Nm
driver was ported to BSD by Jonathan Stone at Stanford's Distributed
Systems Group and first distributed with
.Nx 1.2 .
@


1.14
log
@o) Fix bogus .Xr usage;
o) CAVEAT -> CAVEATS;
o) AUTHOR -> AUTHORS;
o) Start new sentence on a new line;
o) For URL and path names use .Pa;
o) We don't like .Pp before .Rs;
o) Don't use .Pp before/after .Sh;
o) OpenBSD -> .Ox;

millert@@ ok and help;
@
text
@d1 1
a1 1
.\"	$OpenBSD: strip.4,v 1.13 2001/10/05 14:45:53 mpech Exp $
d20 1
a20 1
.\" Why doesn't this work right?  mdoc(7) nor mdoc.samples(7) lists
d36 1
a36 1
interfaces,   named
d47 3
a49 1
The STRIP  driver takes outbound network packets, encapsulates them using the
d60 2
a61 2
.Sy  R  Ns adio
.Sy IP.
d125 3
a127 1
This version of the STRIP driver requires static pre-configuration of
@


1.13
log
@Powered by @@mantoya:
o) start new sentence on a new line;
o) minor mdoc fixes;
millert@@ ok

Tip of the day:   www.mpechismazohist.com
@
text
@d1 1
a1 1
.\"	$OpenBSD: strip.4,v 1.12 2001/08/03 15:21:16 mpech Exp $
d82 2
a83 2
packets to a frequency-hopping radio, which  can address packets to
any peer Metricom radio. rather than just to a single host at the
d182 1
a182 1
.Xr slattach
@


1.12
log
@o) We don't like .Pp before/after .Sh;
o) .Nm always has argument in .Sh SYNOPSIS;
o) We always closes .Bl and .Bd tags;

millert@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: strip.4,v 1.11 2001/03/06 19:56:50 brad Exp $
d51 3
a53 3
radio.   Packets arriving from the radio
via the serial link are decapsulated and then passed up to the local
host's networking stack.
d66 2
a67 1
SLIP pseudo-device driver.  A
d78 2
a79 1
a dedicated point-to-point connection. In contrast,
d84 2
a85 1
other end of a point-to-point line.  Thus,  one
d92 6
a97 5
Packets are  individually  addressed, and subsequent packets can
be sent independently to different MAC addresses.  However,
the "Star-mode" framing and MAC addressing are not in any way
compatible with Ethernet.  Broadcast or multicast to more than one radio is not
possible, due to the independent frequency-hopping operation of the radios.
d114 2
a115 2
statically configured entries in the normal routing table. These entries
map IP addresses of peer radios to the MAC-level addresses.
d118 2
a119 2
type code for use with STRIP. A future version of this driver will
support
d128 3
a130 2
to the peer's  link-level radio address.   Radio addresses are encoded
using the hex equivalent of the radio's decimal ASCII address.
d146 1
a146 1
When running at  high speeds, the radio's serial port should be
d150 2
a151 1
to set the serial baudrate to the specified number (or 0 for autobaud).  The command
d153 1
a153 1
will then save the current radio  state in non-volatile memory.
d156 2
a157 1
or in packet mode (Starmode). The
d172 2
a173 1
Currently is IP-only.  Encapsulations for AppleTalk and ARP have been defined,
d180 2
a181 2
not always work in this version of the driver.  One workaround
is to kill the
d188 3
a190 3
was originally developed  for the Linux kernel by Stuart
Cheshire of  Stanford's Operating Systems and Networking group,
as part of Mary Baker's  MosquitoNet
@


1.11
log
@first sweep ...
OpenBSD -> .Ox
NetBSD -> .Nx
FreeBSD -> .Fx
--
Ok'd by aaron@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: strip.4,v 1.10 2001/03/01 16:11:19 aaron Exp $
a155 1
.Pp
@


1.10
log
@A slew of share/ man page fixes; nordin@@cse.ogi.edu. These have been sitting
in my INBOX since Nov 6, 2000, probably forgot about them since the tree was
frozen at that time.
@
text
@d1 1
a1 1
.\"	$OpenBSD: strip.4,v 1.9 2000/12/21 21:01:19 aaron Exp $
d189 2
a190 1
Systems Group and first distributed with NetBSD 1.2.
@


1.9
log
@Various repairs, $Id$ tags added, etc.
@
text
@d1 1
a1 1
.\"	$OpenBSD$
a161 1
.Xr slip 4 ,
d163 2
a164 1
.Xr slattach 8 .
@


1.8
log
@- remove all trailing whitespace
     * except when it is escaped with a `\' at the end of the line
- fix remaining .Nm usage as well
- this is from a patch I received from kwesterback@@home.com, who has been
  working on some scripts for fixing formatting errors in mdoc'd man pages

Ok, so there could be a cost/benefit debate with this commit, but since I have
the patch we might as well commit it...
@
text
@d1 2
@


1.7
log
@remove redundant .Pp macros
@
text
@d92 1
a92 1
The interface flags 
d103 1
a103 1
an RS-232 serial line, using a proprietary packet framing scheme. 
d113 1
a113 1
support 
d119 1
a119 1
The 
d172 1
a172 1
is to kill the 
d181 1
a181 1
as part of Mary Baker's  MosquitoNet 
@


1.6
log
@Cleanup xrefs under SEE ALSO.  Specifically:

  - Sort xrefs by section, and then alphabetically.
  - Add missing commas between xref items.
  - Remove commas from the last xref entry.
  - Remove duplicate entries.
@
text
@d33 1
a33 1
.Nm strip
d41 1
a41 1
.Nm strip
d53 1
a53 1
.Nm STRIP
d61 1
a61 1
.Nm strip
d65 1
a65 1
.Nm strip
d73 1
a73 1
.Nm strip
d76 1
a76 1
.Nm strip
d81 1
a81 1
.Nm strip
d85 1
a85 1
.Nm strip
d97 1
a97 1
.Nm strip
d101 1
a101 1
.Nm strip
d106 1
a106 1
.Nm strip
d116 1
a116 2
.Pp
.Sh Address configuration.
d136 1
a136 2
.Pp
.Sh Radio configuration.
d149 1
a149 1
.Nm strip
d167 1
a167 1
.Nm Strip
d175 1
a175 1
.Nm strip
d178 1
a178 1
.Nm Strip
d185 1
a185 1
.Nm strip
@


1.5
log
@.Pp macros do not belong immiedately after .Sh section header lines
@
text
@d160 1
d162 1
a162 1
.Xr arp 4 ,
a163 1
.Xr slip 4 ,
@


1.4
log
@More man page fixes. Spelling, grammar, some typos. Lots of double-word
occurrences squashed as well.
@
text
@a158 1
.Pp
@


1.3
log
@fix typo (jtc@@netbsd.org)
@
text
@d135 1
a135 1
Generalising from this example to other IP addresses and to other 8-digit MAC addreses
d163 1
a163 1
.Xr route 8 .
d165 1
a165 1
.Xr slattach 8 ,
@


1.2
log
@Attempt at cleanup.
@
text
@d179 1
a179 1
interface down, and then starti a new slattach and rerun ifconfig.
@


1.1
log
@+ahc, +strip
@
text
@d15 1
a15 1
.Os NetBSD 1.1
@
