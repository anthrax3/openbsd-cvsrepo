head	1.13;
access;
symbols
	OPENBSD_5_1_BASE:1.12
	OPENBSD_5_1:1.12.0.20
	OPENBSD_5_0:1.12.0.18
	OPENBSD_5_0_BASE:1.12
	OPENBSD_4_9:1.12.0.16
	OPENBSD_4_9_BASE:1.12
	OPENBSD_4_8:1.12.0.14
	OPENBSD_4_8_BASE:1.12
	OPENBSD_4_7:1.12.0.10
	OPENBSD_4_7_BASE:1.12
	OPENBSD_4_6:1.12.0.12
	OPENBSD_4_6_BASE:1.12
	OPENBSD_4_5:1.12.0.8
	OPENBSD_4_5_BASE:1.12
	OPENBSD_4_4:1.12.0.6
	OPENBSD_4_4_BASE:1.12
	OPENBSD_4_3:1.12.0.4
	OPENBSD_4_3_BASE:1.12
	OPENBSD_4_2:1.12.0.2
	OPENBSD_4_2_BASE:1.12
	OPENBSD_4_1:1.11.0.4
	OPENBSD_4_1_BASE:1.11
	OPENBSD_4_0:1.11.0.2
	OPENBSD_4_0_BASE:1.11
	OPENBSD_3_9:1.10.0.2
	OPENBSD_3_9_BASE:1.10
	OPENBSD_3_8:1.9.0.8
	OPENBSD_3_8_BASE:1.9
	OPENBSD_3_7:1.9.0.6
	OPENBSD_3_7_BASE:1.9
	OPENBSD_3_6:1.9.0.4
	OPENBSD_3_6_BASE:1.9
	OPENBSD_3_5:1.9.0.2
	OPENBSD_3_5_BASE:1.9
	OPENBSD_3_4:1.8.0.2
	OPENBSD_3_4_BASE:1.8
	OPENBSD_3_3:1.7.0.4
	OPENBSD_3_3_BASE:1.7
	OPENBSD_3_2:1.7.0.2
	OPENBSD_3_2_BASE:1.7
	OPENBSD_3_1:1.6.0.2
	OPENBSD_3_1_BASE:1.6
	OPENBSD_3_0:1.5.0.2
	OPENBSD_3_0_BASE:1.5
	OPENBSD_2_9:1.3.0.8
	OPENBSD_2_9_BASE:1.3
	OPENBSD_2_8:1.3.0.6
	OPENBSD_2_8_BASE:1.3
	OPENBSD_2_7:1.3.0.4
	OPENBSD_2_7_BASE:1.3
	OPENBSD_2_6:1.3.0.2
	OPENBSD_2_6_BASE:1.3
	OPENBSD_2_5:1.1.0.6
	OPENBSD_2_5_BASE:1.1
	OPENBSD_2_4:1.1.0.4
	OPENBSD_2_4_BASE:1.1
	OPENBSD_2_3:1.1.0.2
	OPENBSD_2_3_BASE:1.1;
locks; strict;
comment	@# @;


1.13
date	2012.06.20.18.45.44;	author matthew;	state dead;
branches;
next	1.12;

1.12
date	2007.05.31.19.19.55;	author jmc;	state Exp;
branches;
next	1.11;

1.11
date	2006.09.14.18.52.46;	author jmc;	state Exp;
branches;
next	1.10;

1.10
date	2006.01.10.07.37.31;	author miod;	state Exp;
branches;
next	1.9;

1.9
date	2004.03.20.22.13.48;	author miod;	state Exp;
branches;
next	1.8;

1.8
date	2003.06.06.10.29.42;	author jmc;	state Exp;
branches;
next	1.7;

1.7
date	2002.10.01.20.58.12;	author miod;	state Exp;
branches;
next	1.6;

1.6
date	2001.11.13.13.54.26;	author mpech;	state Exp;
branches;
next	1.5;

1.5
date	2001.10.05.14.45.54;	author mpech;	state Exp;
branches;
next	1.4;

1.4
date	2001.10.04.10.28.20;	author wilfried;	state Exp;
branches;
next	1.3;

1.3
date	99.07.07.10.50.09;	author aaron;	state Exp;
branches;
next	1.2;

1.2
date	99.06.05.13.18.36;	author aaron;	state Exp;
branches;
next	1.1;

1.1
date	98.02.04.00.21.51;	author gene;	state Exp;
branches;
next	;


desc
@@


1.13
log
@more mac68k bits for the attic
@
text
@.\"
.\" Copyright (c) 1997 Colin Wood
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"      This product includes software developed by Colin Wood
.\"      for the NetBSD Project.
.\" 4. The name of the author may not be used to endorse or promote products
.\"    derived from this software without specific prior written permission
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.\"	$OpenBSD: adb.4,v 1.12 2007/05/31 19:19:55 jmc Exp $
.\"	$NetBSD: adb.4,v 1.1 1997/07/18 02:13:42 ender Exp $
.\"
.Dd $Mdocdate: May 31 2007 $
.Dt ADB 4 mac68k
.Os
.Sh NAME
.Nm adb
.Nd Apple Desktop Bus driver
.Sh SYNOPSIS
.Cd "adb0 at obio?"
.Cd "akbd* at adb?"
.Cd "ams* at adb?"
.Sh DESCRIPTION
The Apple Desktop Bus
.Pq Tn ADB
is the single-master, multiple-slave, low-speed serial bus
interface used by Macintosh computers to connect input devices
such as keyboards, mice, trackballs, and graphics tablets
to the machine.
.Pp
.Ox
provides support for the following devices:
.Pp
.Bl -tag -width 12n -offset indent -compact
.It Xr akbd 4
Apple Keyboard Device
.It Xr ams 4
Apple Mouse Support
.El
.Sh SEE ALSO
.Xr intro 4
.Sh HISTORY
The
.Nm
interface first appeared in
.Nx 0.9 .
.Sh AUTHORS
Bradley A. Grantham wrote the original
.Nm
driver, including the
.Tn MRG
support.
The hardware direct interface was written by
John P. Wittkowski.
The PowerManager interface was written by Takashi Hamada.
.Sh BUGS
.Bl -bullet -compact
.It
Not every class of
.Tn ADB
hardware is supported yet.
.It
The talk command is currently unimplemented.
.It
The listen command is not implemented yet.
.El
@


1.12
log
@convert to new .Dd format;
@
text
@d31 1
a31 1
.\"	$OpenBSD: adb.4,v 1.11 2006/09/14 18:52:46 jmc Exp $
d34 1
a34 1
.Dd $Mdocdate$
@


1.11
log
@move the device list into the main body;
@
text
@d31 1
a31 1
.\"	$OpenBSD: adb.4,v 1.10 2006/01/10 07:37:31 miod Exp $
d34 1
a34 1
.Dd January 10, 2006
@


1.10
log
@Manpage updates for recent wscons developments.
@
text
@d31 1
a31 1
.\"	$OpenBSD: adb.4,v 1.9 2004/03/20 22:13:48 miod Exp $
d51 10
a61 2
.Xr akbd 4 ,
.Xr ams 4 ,
d78 1
a78 1
.Bl -bullet
@


1.9
log
@Don't explicitely mention these drivers are ``still under developement''.
All the tree is, until people get tired...
@
text
@d31 1
a31 1
.\"	$OpenBSD: adb.4,v 1.8 2003/06/06 10:29:42 jmc Exp $
d34 1
a34 1
.Dd July 17, 1997
d39 1
a39 1
.Nd Apple Desktop Bus event interface
d42 2
a43 2
.Cd "#option MRG_ADB" Pq "use ROM-based ADB driver"
.Fd #include <machine/adbsys.h>
a50 195
.Pp
The
.Nm
device is the sole interface to user input.
It combines both keyboard and mouse drivers into one event driver.
All user input is obtained by doing a
.Xr read 2
on the
.Nm
device.
Since most Macintosh mice have only one button, the
.Nm
driver will emulate a second and third mouse button with
the keyboard.
The
.Nm
device only supports being opened by one process at a time.
.Pp
There are two interfaces to the
.Tn ADB
hardware supported by the
.Nm
driver.
The older of the two relies on information in the Macintosh
.Tn ROM
to interface with the hardware.
This method is only available if the
.Dv MRG_ADB
option is defined in the kernel configuration file.
The newer method interfaces directly with the
.Tn VIA
hardware and with the Power Manager hardware if it is
present
.Pq e.g. on the PowerBooks .
The default configuration currently uses the
Macintosh
.Tn ROM
Glue
.Pq Tn MRG
method.
.Pp
The
.Xr ioctl 2
call is used to control the
.Tn ADB
event device.
The following is a list of available
.Xr ioctl 2
commands:
.Bl -tag -width ADBIOC_GETREPEAT
.It Dv ADBIOC_DEVSINFO
Get
.Tn ADB
Device Info
.Pp
The
.Nm
event device will return an array of information containing an entry
for each device connected to the bus.
Each entry contains the current address, default address, and handler ID for
the corresponding
.Tn ADB
device.
.It Dv ADBIOC_GETREPEAT
Get Keyboard Repeat Info
.Pp
Returns a structure containing the current keyboard repeat delay
and keyboard repeat interval.
.It Dv ADBIOC_SETREPEAT
Set Keyboard Repeat Rate
.Pp
Sets the keyboard repeat delay and interval to the values specified
by
.Ar argp .
.It Dv ADBIOC_RESET
.Tn ADB
Reset
.Pp
Perform a reset of the
.Tn ADB
which will reinitialize all of the devices attached to the bus.
.It Dv ADBIOC_LISTENCMD
ADB Listen Command
.Pp
Send data to the register of the
.Tn ADB
device specified by
.Ar argp .
This command is not fully implemented at this time.
.El
.Sh HARDWARE
The
.Nm
device supports the ADB hardware of most m68k-based
Macintosh models,
including the II-series, Centris- and Quadra-series, PowerBook-
and Duo-series, LC-series, and Performa-series models.
.Pp
Most standard
.Tn ADB
devices are supported by the
.Nm
driver, including mice which follow Apple's
Extended Mouse Protocol.
Many multi-button mice which follow a proprietary protocol are
not currently supported in multi-button mode.
The following is a partial list of supported
.Tn ADB
devices:
.Bd -filled -offset indent
.Bl -item -compact
.It
Apple Standard Keyboard
.It
Apple Extended Keyboard
.It
Apple Adjustable Keyboard
.It
Apple Desktop Bus Mouse
.It
Logitech TrackMan
.It
Logitech MouseMan
.It
Microspeed Mouse Deluxe
.It
Mouse Systems A3 Mouse
.El
.Ed
.Sh FILES
.Bl -tag -width /dev/adb -compact
.It Pa /dev/adb
The
.Tn ADB
event device.
.El
.Sh DIAGNOSTICS
.Bl -diag -compact
.It adb0 at obio0 (ADB event device).
This is a normal autoconfiguration message noting the presence of the
.Nm
event device.
.It adb: bus subsystem.
A standard autoconfiguration message indicating the initialization
of the
.Tn ADB
subsystem.
.It adb: no devices found.
No
.Tn ADB
devices were found to be connected to the bus during autoconfiguration.
.It adb: using %s series hardware support.
Indicates the class of
.Tn ADB
hardware support the machine uses.
.It adb: hardware type unknown for this machine.
The
.Tn ADB
hardware in this machine is currently unsupported.
.It "adb: no ROM ADB driver in this kernel for this machine."
The kernel lacks the necessary Macintosh ROM Glue
.Pq Tn MRG
support for accessing the
.Tn ADB
hardware on this machine.
.It adb: using serial console.
A serial console will be used for user input rather than the
.Tn ADB
event device.
.It adb: %s at %d.
An
.Tn ADB
device of the type specified by
.Em %s
has been found at location
.Em %d .
.El
.Sh ERRORS
.Bl -tag -width Er
.It Bq Er ENXIO
No such
.Tn ADB
event device.
.It Bq Er EBUSY
Another process has the device open.
.It Bq Er EINVAL
Invalid
.Xr ioctl 2
specification.
.It Bq Er EMSGSIZE
The size of the
.Tn ADB
event being read is too large to fit into the buffer
allocated to it.
.El
d52 2
a78 9
.It
Not all multi-button mice are currently supported.
.It
Only mapped and relative-position
.Tn ADB
devices
.Pq i.e. keyboards and mice
are supported.
Thus absolute-position and other exotic devices will not work.
@


1.8
log
@- section reorder
- some macro fixes
- kill whitespace at EOL
@
text
@d31 1
a31 1
.\"	$OpenBSD: adb.4,v 1.7 2002/10/01 20:58:12 miod Exp $
a252 2
It is
.Ud .
@


1.7
log
@Last minute cleanings for the release. Nothing fancy there.

ok deraadt@@
@
text
@d31 1
a31 1
.\"	$OpenBSD: adb.4,v 1.6 2001/11/13 13:54:26 mpech Exp $
d180 7
a244 7
.El
.Sh FILES
.Bl -tag -width /dev/adb -compact
.It Pa /dev/adb
The
.Tn ADB
event device.
@


1.6
log
@o) Fix bogus .Xr usage;
o) CAVEAT -> CAVEATS;
o) AUTHOR -> AUTHORS;
o) Start new sentence on a new line;
o) For URL and path names use .Pa;
o) We don't like .Pp before .Rs;
o) Don't use .Pp before/after .Sh;
o) OpenBSD -> .Ox;

millert@@ ok and help;
@
text
@d31 1
a31 1
.\"	$OpenBSD: adb.4,v 1.5 2001/10/05 14:45:54 mpech Exp $
d42 2
a43 2
.Cd "option MRG_ADB"
.Cd "#include <machine/adbsys.h>"
d246 2
d253 2
a254 1
It has been under development ever since.
@


1.5
log
@Powered by @@mantoya:
o) start new sentence on a new line;
o) minor mdoc fixes;
millert@@ ok

Tip of the day:   www.mpechismazohist.com
@
text
@d31 1
a31 1
.\"	$OpenBSD: adb.4,v 1.4 2001/10/04 10:28:20 wilfried Exp $
d98 1
a98 1
.Xr ioctl
d231 1
a231 1
.Xr ioctl
@


1.4
log
@e.g. and i.e. cleanup
@
text
@d31 1
a31 1
.\"	$OpenBSD: adb.4,v 1.3 1999/07/07 10:50:09 aaron Exp $
d109 3
a111 2
for each device connected to the bus.  Each entry contains the
current address, default address, and handler ID for the corresponding
@


1.3
log
@The proper order of the ``introductory'' macros in a man page is .Dd/.Dt/.Os.
Out of the approximately 1450 man pages, only about 90 of them were wrong.
Thanks to kwesterback@@home.com for coming up with a script and patch to repair
this. The patch also inserted a .Os macro in the few man pages that were
missing one.
@
text
@d31 1
a31 1
.\"	$OpenBSD: adb.4,v 1.2 1999/06/05 13:18:36 aaron Exp $
d84 1
a84 1
.Pq i.e. on the PowerBooks .
@


1.2
log
@more .Os cleanup, remove some trailing whitespace, cleanse some .Nm
@
text
@d31 1
a31 1
.\"	$OpenBSD: adb.4,v 1.1 1998/02/04 00:21:51 gene Exp $
d35 1
a36 1
.Dt ADB 4 mac68k
@


1.1
log
@Several new mac68k man pages from Colin Wood.
With some semantic and OpenBSD-specific tweaks from me.
@
text
@d2 1
a2 1
.\" Copyright (c) 1997 Colin Wood              
d16 1
a16 1
.\"      for the NetBSD Project.              
d31 1
a31 1
.\"	$OpenBSD$
d35 1
a35 1
.Os OpenBSD
d97 1
a97 1
The following is a list of available 
d107 1
a107 1
.Nm 
@

