head	1.38;
access;
symbols
	OPENBSD_6_2:1.38.0.18
	OPENBSD_6_2_BASE:1.38
	OPENBSD_6_1:1.38.0.16
	OPENBSD_6_1_BASE:1.38
	OPENBSD_6_0:1.38.0.14
	OPENBSD_6_0_BASE:1.38
	OPENBSD_5_9:1.38.0.2
	OPENBSD_5_9_BASE:1.38
	OPENBSD_5_8:1.38.0.10
	OPENBSD_5_8_BASE:1.38
	OPENBSD_5_7:1.38.0.8
	OPENBSD_5_7_BASE:1.38
	OPENBSD_5_6:1.38.0.6
	OPENBSD_5_6_BASE:1.38
	OPENBSD_5_5:1.38.0.4
	OPENBSD_5_5_BASE:1.38
	OPENBSD_5_4:1.35.0.2
	OPENBSD_5_4_BASE:1.35
	OPENBSD_5_3:1.33.0.2
	OPENBSD_5_3_BASE:1.33
	OPENBSD_5_2:1.30.0.6
	OPENBSD_5_2_BASE:1.30
	OPENBSD_5_1_BASE:1.30
	OPENBSD_5_1:1.30.0.4
	OPENBSD_5_0:1.30.0.2
	OPENBSD_5_0_BASE:1.30
	OPENBSD_4_9:1.29.0.2
	OPENBSD_4_9_BASE:1.29
	OPENBSD_4_8:1.28.0.2
	OPENBSD_4_8_BASE:1.28
	OPENBSD_4_7:1.26.0.2
	OPENBSD_4_7_BASE:1.26
	OPENBSD_4_6:1.24.0.4
	OPENBSD_4_6_BASE:1.24
	OPENBSD_4_5:1.23.0.2
	OPENBSD_4_5_BASE:1.23
	OPENBSD_4_4:1.19.0.2
	OPENBSD_4_4_BASE:1.19
	OPENBSD_4_3:1.16.0.2
	OPENBSD_4_3_BASE:1.16
	OPENBSD_4_2:1.13.0.2
	OPENBSD_4_2_BASE:1.13
	OPENBSD_4_1:1.8.0.2
	OPENBSD_4_1_BASE:1.8
	OPENBSD_4_0:1.6.0.2
	OPENBSD_4_0_BASE:1.6;
locks; strict;
comment	@.\" @;


1.38
date	2014.02.15.20.28.19;	author tedu;	state Exp;
branches;
next	1.37;

1.37
date	2014.02.15.01.41.17;	author tedu;	state Exp;
branches;
next	1.36;

1.36
date	2013.08.20.13.46.54;	author millert;	state Exp;
branches;
next	1.35;

1.35
date	2013.07.16.16.05.49;	author schwarze;	state Exp;
branches;
next	1.34;

1.34
date	2013.06.02.20.23.34;	author tedu;	state Exp;
branches;
next	1.33;

1.33
date	2013.02.14.07.40.42;	author jmc;	state Exp;
branches;
next	1.32;

1.32
date	2012.09.17.11.04.24;	author sthen;	state Exp;
branches;
next	1.31;

1.31
date	2012.08.15.19.17.02;	author jmc;	state Exp;
branches;
next	1.30;

1.30
date	2011.06.09.14.21.12;	author deraadt;	state Exp;
branches;
next	1.29;

1.29
date	2010.11.01.17.59.09;	author jmc;	state Exp;
branches;
next	1.28;

1.28
date	2010.04.29.09.20.17;	author jmc;	state Exp;
branches;
next	1.27;

1.27
date	2010.03.28.17.27.10;	author jasper;	state Exp;
branches;
next	1.26;

1.26
date	2009.11.17.20.35.53;	author damien;	state Exp;
branches;
next	1.25;

1.25
date	2009.09.02.07.00.24;	author jmc;	state Exp;
branches;
next	1.24;

1.24
date	2009.04.29.16.29.15;	author damien;	state Exp;
branches;
next	1.23;

1.23
date	2009.02.16.08.15.22;	author jmc;	state Exp;
branches;
next	1.22;

1.22
date	2008.12.08.08.38.29;	author jmc;	state Exp;
branches;
next	1.21;

1.21
date	2008.12.03.18.57.12;	author damien;	state Exp;
branches;
next	1.20;

1.20
date	2008.11.08.11.02.59;	author damien;	state Exp;
branches;
next	1.19;

1.19
date	2008.07.29.16.44.19;	author jmc;	state Exp;
branches;
next	1.18;

1.18
date	2008.07.28.20.10.28;	author damien;	state Exp;
branches;
next	1.17;

1.17
date	2008.04.17.14.01.22;	author jmc;	state Exp;
branches;
next	1.16;

1.16
date	2007.09.11.18.10.15;	author damien;	state Exp;
branches;
next	1.15;

1.15
date	2007.09.10.20.54.22;	author damien;	state Exp;
branches;
next	1.14;

1.14
date	2007.08.29.20.09.30;	author damien;	state Exp;
branches;
next	1.13;

1.13
date	2007.07.10.18.31.01;	author damien;	state Exp;
branches;
next	1.12;

1.12
date	2007.07.10.18.29.38;	author damien;	state Exp;
branches;
next	1.11;

1.11
date	2007.06.06.18.17.14;	author damien;	state Exp;
branches;
next	1.10;

1.10
date	2007.06.05.19.49.40;	author damien;	state Exp;
branches;
next	1.9;

1.9
date	2007.05.31.19.19.53;	author jmc;	state Exp;
branches;
next	1.8;

1.8
date	2006.11.10.20.06.58;	author mk;	state Exp;
branches;
next	1.7;

1.7
date	2006.09.30.03.02.45;	author jsg;	state Exp;
branches;
next	1.6;

1.6
date	2006.08.30.23.14.30;	author jmc;	state Exp;
branches;
next	1.5;

1.5
date	2006.05.21.15.52.59;	author jmc;	state Exp;
branches;
next	1.4;

1.4
date	2006.05.20.14.02.04;	author damien;	state Exp;
branches;
next	1.3;

1.3
date	2006.05.14.19.05.43;	author miod;	state Exp;
branches;
next	1.2;

1.2
date	2006.05.14.19.03.46;	author damien;	state Exp;
branches;
next	1.1;

1.1
date	2006.05.14.19.00.51;	author damien;	state Exp;
branches;
next	;


desc
@@


1.38
log
@jmc notes that the previous commit made for some funny wording.
WPA is the current standard, but not the only one. ok krw
@
text
@.\" $OpenBSD: wpi.4,v 1.37 2014/02/15 01:41:17 tedu Exp $
.\"
.\" Copyright (c) 2006, 2007
.\"	Damien Bergamini <damien.bergamini@@free.fr>. All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice unmodified, this list of conditions, and the following
.\"    disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.Dd $Mdocdate: February 15 2014 $
.Dt WPI 4
.Os
.Sh NAME
.Nm wpi
.Nd Intel PRO/Wireless 3945ABG IEEE 802.11a/b/g wireless network device
.Sh SYNOPSIS
.Cd "wpi* at pci?"
.Sh DESCRIPTION
The
.Nm
driver provides support for
.Tn Intel
PRO/Wireless 3945ABG Mini PCI Express network adapters.
.Pp
These are the modes the
.Nm
driver can operate in:
.Bl -tag -width "IBSS-masterXX"
.It BSS mode
Also known as
.Em infrastructure
mode, this is used when associating with an access point, through
which all traffic passes.
This mode is the default.
.It monitor mode
In this mode the driver is able to receive packets without
associating with an access point.
This disables the internal receive filter and enables the card to
capture packets from networks which it wouldn't normally have access to,
or to scan for access points.
.El
.Pp
The
.Nm
driver can be configured to use
Wired Equivalent Privacy (WEP) or
Wi-Fi Protected Access (WPA-PSK and WPA2-PSK).
WPA is the current encryption standard for wireless networks.
It is strongly recommended that WEP
not be used as the sole mechanism
to secure wireless communication,
due to serious weaknesses in it.
The
.Nm
driver offloads both encryption and decryption of unicast data frames to the
hardware for the CCMP cipher.
.Pp
The
.Nm
driver can be configured at runtime with
.Xr ifconfig 8
or on boot with
.Xr hostname.if 5 .
.Sh FILES
The driver needs at least version 3.1 of the following firmware file,
which is loaded when an interface is brought up:
.Pp
.Bl -tag -width Ds -offset indent -compact
.It Pa /etc/firmware/wpi-3945abg
.El
.Pp
This firmware file is not free because Intel refuses to grant
distribution rights without contractual obligations.
As a result, even though
.Ox
includes the driver, the firmware file cannot be included and
users have to download this file on their own.
.Pp
A prepackaged version of the firmware can be installed using
.Xr fw_update 1 .
.Sh EXAMPLES
The following example scans for available networks:
.Pp
.Dl # ifconfig wpi0 scan
.Pp
The following
.Xr hostname.if 5
example configures wpi0 to join network
.Dq mynwid ,
using WPA key
.Dq mywpakey ,
obtaining an IP address using DHCP:
.Bd -literal -offset indent
nwid mynwid
wpakey mywpakey
dhcp
.Ed
.Sh DIAGNOSTICS
.Bl -diag
.It "wpi0: device timeout"
A frame dispatched to the hardware for transmission did not complete in time.
The driver will reset the hardware.
This should not happen.
.It "wpi0: fatal firmware error"
For some reason, the firmware crashed.
The driver will reset the hardware.
This should not happen.
.It "wpi0: Radio transmitter is off"
The radio transmitter is off and thus no packet can go out.
The driver will reset the hardware.
Make sure the laptop radio switch is on.
.It "wpi0: error N, could not read firmware ..."
For some reason, the driver was unable to read the firmware image from the
filesystem.
The file might be missing or corrupted.
.It "wpi0: firmware file too short: N bytes"
The firmware image is corrupted and can't be loaded into the adapter.
.It "wpi0: could not load firmware"
An attempt to load the firmware into the adapter failed.
The driver will reset the hardware.
.El
.Sh SEE ALSO
.Xr arp 4 ,
.Xr ifmedia 4 ,
.Xr intro 4 ,
.Xr netintro 4 ,
.Xr pci 4 ,
.Xr hostname.if 5 ,
.Xr ifconfig 8
.Sh AUTHORS
The
.Nm
driver was written by
.An Damien Bergamini Aq Mt damien.bergamini@@free.fr .
@


1.37
log
@WPA is a real standard, not only a de facto one.
(these man pages do like their copy and paste.)
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.36 2013/08/20 13:46:54 millert Exp $
d28 1
a28 1
.Dd $Mdocdate: August 20 2013 $
d66 1
a66 1
WPA is the encryption standard for wireless networks.
@


1.36
log
@Update Damien Bergamini's email address, as requested.
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.35 2013/07/16 16:05:49 schwarze Exp $
d28 1
a28 1
.Dd $Mdocdate: July 16 2013 $
d66 1
a66 1
WPA is the de facto encryption standard for wireless networks.
@


1.35
log
@use .Mt for email addresses; from Jan Stary <hans at stare dot cz>; ok jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.34 2013/06/02 20:23:34 tedu Exp $
d28 1
a28 1
.Dd $Mdocdate: June 2 2013 $
d152 1
a152 1
.An Damien Bergamini Aq Mt damien@@openbsd.org .
@


1.34
log
@change format strings in error messages to reasonable values more likely
to be understood by people who don't program in C.
ok everyone
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.33 2013/02/14 07:40:42 jmc Exp $
d28 1
a28 1
.Dd $Mdocdate: February 14 2013 $
d152 1
a152 1
.An Damien Bergamini Aq damien@@openbsd.org .
@


1.33
log
@rework EXAMPLES somewhat, and remove the obsolete NONE NONE NONE dhcp
stuff; ok krw
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.32 2012/09/17 11:04:24 sthen Exp $
d28 1
a28 1
.Dd $Mdocdate: September 17 2012 $
d118 1
a118 1
.It "wpi%d: device timeout"
d122 1
a122 1
.It "wpi%d: fatal firmware error"
d126 1
a126 1
.It "wpi%d: Radio transmitter is off"
d130 1
a130 1
.It "wpi%d: error %d, could not read firmware %s"
d134 1
a134 1
.It "wpi%d: firmware file too short: %d bytes"
d136 1
a136 1
.It "wpi%d: could not load firmware"
@


1.32
log
@Update wording for device firmware to talk update fw_update(1).
Noticed by jcs, discussed with jmc, ok jmc ajacoutot dcoppa deraadt
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.31 2012/08/15 19:17:02 jmc Exp $
d28 1
a28 1
.Dd $Mdocdate: August 15 2012 $
d100 4
d106 5
a110 18
example configures wpi0 to join whatever network is available on boot,
using WEP key
.Dq 0x1deadbeef1 ,
channel 11, obtaining an IP address using DHCP:
.Bd -literal -offset indent
dhcp NONE NONE NONE nwkey 0x1deadbeef1 chan 11
.Ed
.Pp
Configure wpi0 to join network
.Dq my_net
using WPA with passphrase
.Dq my_passphrase :
.Bd -literal -offset indent
# ifconfig wpi0 nwid my_net wpakey my_passphrase
.Ed
.Pp
Join an existing BSS network,
.Dq my_net :
d112 3
a114 1
# ifconfig wpi0 192.168.1.1 netmask 0xffffff00 nwid my_net
@


1.31
log
@use Lk for links;
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.30 2011/06/09 14:21:12 deraadt Exp $
d28 1
a28 1
.Dd $Mdocdate: June 9 2011 $
d97 2
a98 4
A prepackaged version of the firmware, designed to be used with
.Xr pkg_add 1 ,
can be found at
.Lk http://firmware.openbsd.org/firmware/wpi-firmware-3.2.tgz
a147 1
.Xr pkg_add 1 ,
@


1.30
log
@firmwares move to a new url, backed by many addresses
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.29 2010/11/01 17:59:09 jmc Exp $
d28 1
a28 1
.Dd $Mdocdate: November 1 2010 $
d99 2
a100 4
can be found at:
.Bd -literal -offset 3n
http://firmware.openbsd.org/firmware/wpi-firmware-3.2.tgz
.Ed
@


1.29
log
@- switch from wpapsk to wpakey
- remove the "return device to default settings" example, which theo says
is rubbish

ok deraadt
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.28 2010/04/29 09:20:17 jmc Exp $
d28 1
a28 1
.Dd $Mdocdate: April 29 2010 $
d101 1
a101 1
http://damien.bergamini.free.fr/packages/openbsd/wpi-firmware-3.2.tgz
@


1.28
log
@crikey! all our wireless pages had the Os macro out of place;
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.27 2010/03/28 17:27:10 jasper Exp $
d28 1
a28 1
.Dd $Mdocdate: March 28 2010 $
d116 1
a116 1
using WPA-PSK with passphrase
d119 1
a119 8
# ifconfig wpi0 nwid my_net wpa wpapsk \e
	`wpa-psk my_net my_passphrase`
.Ed
.Pp
Return wpi0 to its default settings:
.Bd -literal -offset indent
# ifconfig wpi0 -bssid -chan media autoselect \e
	nwid "" -nwkey -wpa -wpapsk
d159 1
a159 2
.Xr ifconfig 8 ,
.Xr wpa-psk 8
@


1.27
log
@- tweak the way firmware links are displayed

with and ok jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.26 2009/11/17 20:35:53 damien Exp $
d28 2
a29 1
.Dd $Mdocdate: November 17 2009 $
a30 1
.Dt WPI 4
@


1.26
log
@nuke the temperature sensor.
it is totally useless since (contrary to the one in iwn(4)) it
is not in any known unit (can't be converted to degK or degC).
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.25 2009/09/02 07:00:24 jmc Exp $
d28 1
a28 1
.Dd $Mdocdate: September 2 2009 $
d100 1
a100 1
.Bd -literal
@


1.25
log
@the `W' in WEP apparently stands for wired, not wireless;
from Scott Radvan
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.24 2009/04/29 16:29:15 damien Exp $
d28 1
a28 1
.Dd $Mdocdate: April 29 2009 $
a74 4
.Pp
The device has one temperature sensor.
Its value is in the range from 0 (coolest) to 285 (warmest).
Sensor data is updated every 500 milliseconds.
@


1.24
log
@new wpi-firmware package for iwlwifi-3945-ucode-15.32.2.9.tgz

change log from Intel:
-- More protection against NMIs
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.23 2009/02/16 08:15:22 jmc Exp $
d28 1
a28 1
.Dd $Mdocdate: February 16 2009 $
d64 1
a64 1
Wireless Equivalent Privacy (WEP) or
@


1.23
log
@use `` instead of $(), since the former works for both csh and ksh; as
pointed out by claudio
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.22 2008/12/08 08:38:29 jmc Exp $
d28 1
a28 1
.Dd $Mdocdate: December 8 2008 $
d105 1
a105 1
http://damien.bergamini.free.fr/packages/openbsd/wpi-firmware-3.1.tgz
@


1.22
log
@remove links to the ipw web page, as damien no longer maintains it;
ok damien
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.21 2008/12/03 18:57:12 damien Exp $
d28 1
a28 1
.Dd $Mdocdate: December 3 2008 $
d124 1
a124 1
	$(wpa-psk my_net my_passphrase)
@


1.21
log
@new wpi(4) firmware package version 3.1 corresponding to
"iwlwifi-3945-ucode-15.28.2.8" found on
http://intellinuxwireless.org/?n=Downloads

enhance scanning of 5GHz passive channels.
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.20 2008/11/08 11:02:59 damien Exp $
d28 1
a28 1
.Dd $Mdocdate: November 8 2008 $
a171 4
.Rs
.%T The IPW Web Page
.%O http://damien.bergamini.free.fr/ipw/
.Re
@


1.20
log
@new firmware & HW CCMP crypto
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.19 2008/07/29 16:44:19 jmc Exp $
d28 1
a28 1
.Dd $Mdocdate: July 29 2008 $
d87 1
a87 1
The driver needs at least version 3.0 of the following firmware file,
d105 1
a105 1
http://damien.bergamini.free.fr/packages/openbsd/wpi-firmware-3.0.tgz
@


1.19
log
@- beef up the text on wep/wpa
- simplify wpa example

help/ok damien
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.18 2008/07/28 20:10:28 damien Exp $
d28 1
a28 1
.Dd $Mdocdate: July 28 2008 $
d73 2
a74 2
driver relies on the software 802.11 stack for both encryption and decryption
of data frames.
d87 1
a87 1
The driver needs at least version 2.14.1.5 of the following firmware file,
a99 2
The official person to state your views to about this issue is
majid.awad@@intel.com.
d105 1
a105 1
http://damien.bergamini.free.fr/packages/openbsd/wpi-firmware-2.14.1.5.tgz
@


1.18
log
@document WPA-PSK support.

"i would really appreciate just something going in" jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.17 2008/04/17 14:01:22 jmc Exp $
d28 1
a28 1
.Dd $Mdocdate: April 17 2008 $
d63 8
a70 1
driver can be configured to use the WEP, WPA-PSK and WPA2-PSK protocols.
d125 2
a126 2
# _psk=$(wpa-psk my_net my_passphrase)
# ifconfig wpi0 nwid my_net wpa wpapsk ${_psk}
@


1.17
log
@remove the CONFIGURATION section from the wireless pages:
the addition of the wpa options have shown just how unwieldy it had
become, it's already in ifconfig(8) anyway, and "ifconfig -m" will
get the relevant ones.

ok dlg jsg
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.16 2007/09/11 18:10:15 damien Exp $
d28 1
a28 1
.Dd $Mdocdate: September 11 2007 $
d61 4
d66 2
a67 9
supports software WEP.
Wired Equivalent Privacy (WEP) is the de facto encryption standard
for wireless networks.
It can be typically configured in one of three modes:
no encryption; 40-bit encryption; or 104-bit encryption.
Unfortunately, due to serious weaknesses in WEP protocol
it is strongly recommended that it not be used as the
sole mechanism to secure wireless communication.
WEP is not enabled by default.
d113 4
a116 2
Configure wpi0 for WEP, using hex key
.Dq 0x1deadbeef1 :
d118 2
a119 1
# ifconfig wpi0 nwkey 0x1deadbeef1
d125 1
a125 1
	nwid "" -nwkey
d165 2
a166 1
.Xr ifconfig 8
@


1.16
log
@fix firmware package version number.  it's 2.14.1.5 not 2.14.1.15.
and yes 2.14.1.5 is more recent than 2.14.4.
don't ask me why, i'm just following Intel's numbering scheme.

pointed out by jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.15 2007/09/10 20:54:22 damien Exp $
d28 1
a28 1
.Dd $Mdocdate: September 10 2007 $
d75 1
a75 1
.Sh CONFIGURATION
d81 1
a81 98
.Xr hostname.if 5
using the following parameters:
.Bl -tag -width Ds
.It Cm bssid Ar bssid
Set the desired BSSID.
.It Fl bssid
Unset the desired BSSID.
The interface will automatically select a BSSID in this mode, which is
the default.
.It Cm chan Ar n
Set the channel (radio frequency) to be used by the driver based on
the given channel ID
.Ar n .
.It Fl chan
Unset the desired channel to be used by the driver.
The driver will automatically select a channel in this mode, which is
the default.
.It Cm media Ar media
The
.Nm
driver supports the following
.Ar media
types:
.Pp
.Bl -tag -width autoselect -compact
.It Cm autoselect
Enable autoselection of the media type and options.
.El
.It Cm mediaopt Ar opts
The
.Nm
driver supports the following media options:
.Pp
.Bl -tag -width monitor -compact
.It Cm monitor
Select monitor mode.
.El
.It Fl mediaopt Ar opts
Disable the specified media options on the driver and return it to the
default mode of operation (BSS).
.It Cm mode Ar mode
The
.Nm
driver supports the following modes:
.Pp
.Bl -tag -width 11b -compact
.It Cm 11a
Force 802.11a operation.
.It Cm 11b
Force 802.11b operation.
.It Cm 11g
Force 802.11g operation.
.El
.It Cm nwid Ar id
Set the network ID.
The
.Ar id
can either be any text string up to 32 characters in length,
or a series of hexadecimal digits up to 64 digits.
An empty
.Ar id
string allows the interface to connect to any available access points.
By default the
.Nm
driver uses an empty string.
Note that network ID is synonymous with Extended Service Set ID (ESSID).
.It Fl nwid
Set the network ID to the empty string to allow the interface to connect
to any available access point.
.It Cm nwkey Ar key
Enable WEP encryption using the specified
.Ar key .
The
.Ar key
can either be a string, a series of hexadecimal digits (preceded by
.Sq 0x ) ,
or a set of keys of the form
.Dq n:k1,k2,k3,k4 ,
where
.Sq n
specifies which of the keys will be used for transmitted packets,
and the four keys,
.Dq k1
through
.Dq k4 ,
are configured as WEP keys.
If a set of keys is specified, a comma
.Pq Sq \&,
within the key must be escaped with a backslash.
Note that if multiple keys are used, their order must be the same within
the network.
.Nm
is capable of using both 40-bit (5 characters or 10 hexadecimal digits)
or 104-bit (13 characters or 26 hexadecimal digits) keys.
.It Fl nwkey
Disable WEP encryption.
This is the default mode of operation.
.El
@


1.15
log
@point to new 2.14.1.15 firmware (-current only).
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.14 2007/08/29 20:09:30 damien Exp $
d28 1
a28 1
.Dd $Mdocdate: August 29 2007 $
d180 1
a180 1
The driver needs at least version 2.14.1.15 of the following firmware file,
@


1.14
log
@update the DIAGNOSTICS section to reflect the new firmware load failure
message.
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.13 2007/07/10 18:31:01 damien Exp $
d28 1
a28 1
.Dd $Mdocdate: July 10 2007 $
d180 1
a180 1
The driver needs at least version 2.14.4 of the following firmware file,
d199 3
a201 2
.Pp
.Pa http://damien.bergamini.free.fr/packages/openbsd/wpi-firmware-2.14.4.tgz
@


1.13
log
@fix firmware file name to match reality.
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.12 2007/07/10 18:29:38 damien Exp $
d243 1
a243 1
.It "wpi%d: could not read firmware file"
@


1.12
log
@change firmware loading code to adopt the new 2.14.4 firmware layout.
while i'm here, fix allocation of the Rx ring descriptors so we don't
waste memory.

IMPORTANT: you must upgrade your wpi-firmware package to rev. 2.14.4
or the driver will stop working.
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.11 2007/06/06 18:17:14 damien Exp $
d28 1
a28 1
.Dd $Mdocdate: June 6 2007 $
d184 1
a184 1
.It Pa /etc/firmware/wpi-ucode
@


1.11
log
@fix firmware number in description (the package name was ok.)
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.10 2007/06/05 19:49:40 damien Exp $
d28 1
a28 1
.Dd $Mdocdate: June 5 2007 $
d73 1
d180 1
a180 1
The driver needs at least version 2.14.3 of the following firmware file,
d200 1
a200 1
.Pa http://damien.bergamini.free.fr/packages/openbsd/wpi-firmware-2.14.3.tgz
@


1.10
log
@Major wpi(4) update:

1/ Update the driver to use the new firmware images from Intel (2.14.3.)
2/ Read the list of supported channels from the EEPROM instead of having
   it hard-coded in the driver.
3/ Limit output power to what is specified in EEPROM.
4/ Decrease output power for highest OFDM rates to reduce distortion.
5/ Automatically adjust output power to temperature changes for increased
   throughput and range.
6/ Attach the adapter's onboard thermal sensor to the sensor framework.
7/ Replace 'magic' fields in structures with their correct definitions.

NOTE1: you must upgrade your wpi-firmware package to rev 2.14.3 or the
driver will stop working.

NOTE2: if you are using a channel not allowed by the regulatory domain
of your adapter, you will no longer be able to associate.
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.9 2007/05/31 19:19:53 jmc Exp $
d28 1
a28 1
.Dd $Mdocdate: May 31 2007 $
d179 1
a179 1
The driver needs at least version 1.13 of the following firmware file,
@


1.9
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.8 2006/11/10 20:06:58 mk Exp $
d3 1
a3 1
.\" Copyright (c) 2006
d28 1
a28 1
.Dd $Mdocdate$
d71 3
d199 1
a199 1
.Pa http://damien.bergamini.free.fr/packages/openbsd/wpi-firmware-1.13.tgz
@


1.8
log
@Mention -nwid here too, reminded by reyk.

Having to edit all these files makes me realise how many wireless
drivers we actually have.
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.7 2006/09/30 03:02:45 jsg Exp $
d28 1
a28 1
.Dd May 14, 2006
@


1.7
log
@We have again tried to talk to Intel about being able
to redistribute firmware and they are being totally
unhelpful.

If you'd like to tell Intel how screwed up this
situation is, you should mail majid.awad@@intel.com
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.6 2006/08/30 23:14:30 jmc Exp $
d143 3
@


1.6
log
@concentrate on `device', not `driver'; from deraadt
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.5 2006/05/21 15:52:59 jmc Exp $
d187 1
a187 1
peter.engelbrecht@@intel.com at (858) 391 1857.
@


1.5
log
@tweak;
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.4 2006/05/20 14:02:04 damien Exp $
d33 1
a33 1
.Nd Intel PRO/Wireless 3945ABG IEEE 802.11a/b/g wireless network driver
@


1.4
log
@- monitor mode for wpi(4)
- document more DIAGNOSTICS messages for wpi(4)
- the firmware is loaded when the interface is brought up, not during
  attachment of the device (ipw, iwi, wpi)
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.3 2006/05/14 19:05:43 miod Exp $
d235 1
a235 1
Make sure your laptop radio switch is on.
@


1.3
log
@Fix date.
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.2 2006/05/14 19:03:46 damien Exp $
d53 6
d174 1
a174 1
which is loaded on demand when the device is attached:
d225 1
d228 17
@


1.2
log
@wpi(4) adapters are Mini PCI Express.
@
text
@d1 1
a1 1
.\" $OpenBSD: wpi.4,v 1.1 2006/05/14 19:00:51 damien Exp $
d28 1
a28 1
.Dd May 26, 2006
@


1.1
log
@Initial import of wpi(4), a blob-free driver for Intel PRO/Wireless 3945ABG
802.11 adapters as found in Centrino Duo laptops.
More to come but works well enough for me to commit this over a wpi(4).

go for it deraadt@@
@
text
@d1 1
a1 1
.\" $OpenBSD$
d41 1
a41 1
PRO/Wireless 3945ABG Mini PCI network adapters.
@

