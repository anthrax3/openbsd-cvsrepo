head	1.16;
access;
symbols
	OPENBSD_6_1:1.16.0.8
	OPENBSD_6_1_BASE:1.16
	OPENBSD_6_0:1.16.0.6
	OPENBSD_6_0_BASE:1.16
	OPENBSD_5_9:1.16.0.2
	OPENBSD_5_9_BASE:1.16
	OPENBSD_5_8:1.15.0.10
	OPENBSD_5_8_BASE:1.15
	OPENBSD_5_7:1.15.0.8
	OPENBSD_5_7_BASE:1.15
	OPENBSD_5_6:1.15.0.6
	OPENBSD_5_6_BASE:1.15
	OPENBSD_5_5:1.15.0.4
	OPENBSD_5_5_BASE:1.15
	OPENBSD_5_4:1.14.0.26
	OPENBSD_5_4_BASE:1.14
	OPENBSD_5_3:1.14.0.24
	OPENBSD_5_3_BASE:1.14
	OPENBSD_5_2:1.14.0.22
	OPENBSD_5_2_BASE:1.14
	OPENBSD_5_1_BASE:1.14
	OPENBSD_5_1:1.14.0.20
	OPENBSD_5_0:1.14.0.18
	OPENBSD_5_0_BASE:1.14
	OPENBSD_4_9:1.14.0.16
	OPENBSD_4_9_BASE:1.14
	OPENBSD_4_8:1.14.0.14
	OPENBSD_4_8_BASE:1.14
	OPENBSD_4_7:1.14.0.10
	OPENBSD_4_7_BASE:1.14
	OPENBSD_4_6:1.14.0.12
	OPENBSD_4_6_BASE:1.14
	OPENBSD_4_5:1.14.0.8
	OPENBSD_4_5_BASE:1.14
	OPENBSD_4_4:1.14.0.6
	OPENBSD_4_4_BASE:1.14
	OPENBSD_4_3:1.14.0.4
	OPENBSD_4_3_BASE:1.14
	OPENBSD_4_2:1.14.0.2
	OPENBSD_4_2_BASE:1.14
	OPENBSD_4_1:1.12.0.16
	OPENBSD_4_1_BASE:1.12
	OPENBSD_4_0:1.12.0.14
	OPENBSD_4_0_BASE:1.12
	OPENBSD_3_9:1.12.0.12
	OPENBSD_3_9_BASE:1.12
	OPENBSD_3_8:1.12.0.10
	OPENBSD_3_8_BASE:1.12
	OPENBSD_3_7:1.12.0.8
	OPENBSD_3_7_BASE:1.12
	OPENBSD_3_6:1.12.0.6
	OPENBSD_3_6_BASE:1.12
	OPENBSD_3_5:1.12.0.4
	OPENBSD_3_5_BASE:1.12
	OPENBSD_3_4:1.12.0.2
	OPENBSD_3_4_BASE:1.12
	OPENBSD_3_3:1.11.0.2
	OPENBSD_3_3_BASE:1.11
	OPENBSD_3_2:1.10.0.2
	OPENBSD_3_2_BASE:1.10
	OPENBSD_3_1:1.9.0.4
	OPENBSD_3_1_BASE:1.9
	OPENBSD_3_0:1.9.0.2
	OPENBSD_3_0_BASE:1.9
	OPENBSD_2_9:1.6.0.6
	OPENBSD_2_9_BASE:1.6
	OPENBSD_2_8:1.6.0.4
	OPENBSD_2_8_BASE:1.6
	OPENBSD_2_7:1.6.0.2
	OPENBSD_2_7_BASE:1.6
	OPENBSD_2_6:1.5.0.2
	OPENBSD_2_6_BASE:1.5
	OPENBSD_2_5:1.2.0.4
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.2.0.2
	OPENBSD_2_4_BASE:1.2;
locks; strict;
comment	@.\" @;


1.16
date	2015.09.10.17.55.21;	author schwarze;	state Exp;
branches;
next	1.15;
commitid	PeV7Ql0T6htfMjhP;

1.15
date	2014.01.21.03.15.46;	author schwarze;	state Exp;
branches;
next	1.14;

1.14
date	2007.05.31.19.19.51;	author jmc;	state Exp;
branches;
next	1.13;

1.13
date	2007.05.28.02.49.19;	author krw;	state Exp;
branches;
next	1.12;

1.12
date	2003.06.02.23.30.12;	author millert;	state Exp;
branches;
next	1.11;

1.11
date	2003.03.20.07.26.33;	author jmc;	state Exp;
branches;
next	1.10;

1.10
date	2002.09.26.07.52.09;	author miod;	state Exp;
branches;
next	1.9;

1.9
date	2001.10.05.14.45.53;	author mpech;	state Exp;
branches;
next	1.8;

1.8
date	2001.08.25.15.40.31;	author aaron;	state Exp;
branches;
next	1.7;

1.7
date	2001.06.20.16.49.43;	author millert;	state Exp;
branches;
next	1.6;

1.6
date	2000.04.01.22.45.09;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	99.07.09.13.35.46;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	99.07.03.02.11.12;	author aaron;	state Exp;
branches;
next	1.3;

1.3
date	99.05.16.19.56.31;	author alex;	state Exp;
branches;
next	1.2;

1.2
date	98.09.05.17.41.48;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	98.07.03.06.58.23;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.16
log
@use .In rather than .Fd #include
@
text
@.\"	$OpenBSD: mtio.4,v 1.15 2014/01/21 03:15:46 schwarze Exp $
.\"	$NetBSD: mtio.4,v 1.4 1996/03/03 17:13:54 thorpej Exp $
.\"
.\" Copyright (c) 1983, 1991 The Regents of the University of California.
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"     from: @@(#)mtio.4	6.5 (Berkeley) 3/27/91
.\"
.Dd $Mdocdate: January 21 2014 $
.Dt MTIO 4
.Os
.Sh NAME
.Nm mtio
.Nd magtape interface
.Sh SYNOPSIS
.In sys/mtio.h
.Sh DESCRIPTION
This interface concerns devices which are typical tape block devices,
see
.Xr physio 9 .
.Pp
The conventional device letters/numbers
is applicable to any of the transport/controller pairs.
(But note that only 1600
.Tn BPI
is available with the
.Tn TS11 ,
and that 800
.Tn BPI
is not applicable to
.Tn TM78 . )
.Pp
When the device last number is between
.Em 0-7
the device will operate at 800
.Tn BPI
(or its lowest density), between
.Em 8-15
it will operate at 1600
.Tn BPI
(or its second density), and between
.Em 16-23
it will operate at 6250
.Tn BPI .
.Pp
The rewind devices automatically rewind
when the last requested read, write or seek has finished, or the end of the tape
has been reached.
The letter
.Ql n
is usually prepended to
the name of the no-rewind devices.
.Pp
Unix tapes are written in multiples of 1024 byte block
records.
Two end-of-file markers mark the end of a tape, and
one end-of-file marker marks the end of a tape file.
If the tape is not to be rewound it is positioned with the
head in between the two tape marks, where the next write
will overwrite the second end-of-file marker.
.Pp
All of the magtape devices may be manipulated with the
.Xr mt 1
command.
.Pp
The include file
.In sys/mtio.h
defines the various
.Xr ioctl 2
operations available on raw magnetic tape.
.Sh FILES
.Bl -tag -width /dev/rmt? -compact
.It Pa /dev/mt?
.It Pa /dev/rmt?
.El
.Sh SEE ALSO
.Xr mt 1 ,
.Xr tar 1 ,
.Xr intro 4 ,
.Xr st 4
.Sh HISTORY
The
.Nm
manual appeared in
.Bx 4.2 .
.Sh BUGS
The status should be returned in a device independent format.
@


1.15
log
@obvious .Pa fixes; found with mandocdb(8)
@
text
@d1 1
a1 1
.\"	$OpenBSD: mtio.4,v 1.14 2007/05/31 19:19:51 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: May 31 2007 $
d40 1
a40 1
.Fd #include <sys/mtio.h>
@


1.14
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: mtio.4,v 1.13 2007/05/28 02:49:19 krw Exp $
d33 1
a33 1
.Dd $Mdocdate$
d91 1
a91 1
.Aq Pa sys/mtio.h
@


1.13
log
@Remove references to wt(4). Don't install wt.4 anymore.
@
text
@d1 1
a1 1
.\"	$OpenBSD: mtio.4,v 1.12 2003/06/02 23:30:12 millert Exp $
d33 1
a33 1
.Dd January 7, 1996
@


1.12
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
.\"	$OpenBSD: mtio.4,v 1.11 2003/03/20 07:26:33 jmc Exp $
d104 1
a104 2
.Xr st 4 ,
.Xr wt 4
@


1.11
log
@typos;

ok millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: mtio.4,v 1.10 2002/09/26 07:52:09 miod Exp $
d15 1
a15 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
@


1.10
log
@Point to <sys/mtio.h> rather than contain an old version of it.
@
text
@d1 1
a1 1
.\"	$OpenBSD: mtio.4,v 1.9 2001/10/05 14:45:53 mpech Exp $
d88 1
a88 1
will over write the second end-of-file marker.
@


1.9
log
@Powered by @@mantoya:
o) start new sentence on a new line;
o) minor mdoc fixes;
millert@@ ok

Tip of the day:   www.mpechismazohist.com
@
text
@d1 1
a1 1
.\"	$OpenBSD: mtio.4,v 1.8 2001/08/25 15:40:31 aaron Exp $
d43 2
d94 3
a96 1
A number of
d98 1
a98 88
operations are available
on raw magnetic tape.
The following definitions are from
.Aq Pa sys/mtio.h :
.Bd  -literal
/*
 * Structures and definitions for mag tape io control commands
 */

/* structure for MTIOCTOP - mag tape op command */
struct	mtop	{
	short	mt_op;		/* operations defined below */
	daddr_t	mt_count;	/* how many of them */
};

/* operations */
#define MTWEOF	0	/* write an end-of-file record */
#define MTFSF	1	/* forward space file */
#define MTBSF	2	/* backward space file */
#define MTFSR	3	/* forward space record */
#define MTBSR	4	/* backward space record */
#define MTREW	5	/* rewind */
#define MTOFFL	6	/* rewind and put the drive offline */
#define MTNOP	7	/* no operation, sets status only */
#define MTCACHE 8	/* enable controller cache */
#define MTNOCACHE 9	/* disable controller cache */

/* structure for MTIOCGET - mag tape get status command */

struct	mtget	{
	short	mt_type;	/* type of magtape device */
/* the following two registers are grossly device dependent */
	short	mt_dsreg;	/* ``drive status'' register */
	short	mt_erreg;	/* ``error'' register */
/* end device-dependent registers */
	short	mt_resid;	/* residual count */
/* the following two are not yet implemented */
	daddr_t	mt_fileno;	/* file number of current position */
	daddr_t	mt_blkno;	/* block number of current position */
/* end not yet implemented */
};

/*
 * Constants for mt_type byte.  These are the same
 * for controllers compatible with the types listed.
 */
#define	MT_ISTS		0x01		/* TS-11 */
#define	MT_ISHT		0x02		/* TM03 Massbus: TE16, TU45, TU77 */
#define	MT_ISTM		0x03		/* TM11/TE10 Unibus */
#define	MT_ISMT		0x04		/* TM78/TU78 Massbus */
#define	MT_ISUT		0x05		/* SI TU-45 emulation on Unibus */
#define	MT_ISCPC	0x06		/* SUN */
#define	MT_ISAR		0x07		/* SUN */
#define	MT_ISTMSCP	0x08		/* DEC TMSCP protocol (TU81, TK50) */
#define MT_ISCY 	0x09		/* CCI Cipher */
#define MT_ISCT 	0x0a		/* HP 1/4 tape */
#define MT_ISFHP	0x0b		/* HP 7980 1/2 tape */
#define MT_ISEXABYTE	0x0c		/* Exabyte */
#define MT_ISEXA8200	0x0c		/* Exabyte EXB-8200 */
#define MT_ISEXA8500	0x0d		/* Exabyte EXB-8500 */
#define MT_ISVIPER1	0x0e		/* Archive Viper-150 */
#define MT_ISPYTHON	0x0f		/* Archive Python (DAT) */
#define MT_ISHPDAT	0x10		/* HP 35450A DAT drive */

/* mag tape io control commands */
#define	MTIOCTOP	_IOW('m', 1, struct mtop)	/* do a mag tape op */
#define	MTIOCGET	_IOR('m', 2, struct mtget)	/* get tape status */
#define MTIOCIEOT	_IO('m', 3)			/* ignore EOT error */
#define MTIOCEEOT	_IO('m', 4)			/* enable EOT error */

#ifndef KERNEL
#define	DEFTAPE	"/dev/rmt12"
#endif

#ifdef	KERNEL
/*
 * minor device number
 */

#define	T_UNIT		003		/* unit selection */
#define	T_NOREWIND	004		/* no rewind on close */
#define	T_DENSEL	030		/* density select */
#define	T_800BPI	000		/* select  800 bpi */
#define	T_1600BPI	010		/* select 1600 bpi */
#define	T_6250BPI	020		/* select 6250 bpi */
#define	T_BADBPI	030		/* undefined selection */
#endif
.Ed
d107 3
a109 1
.Xr st 4
@


1.8
log
@Remove a dangling comma.
@
text
@d1 1
a1 1
.\"	$OpenBSD: mtio.4,v 1.7 2001/06/20 16:49:43 millert Exp $
d74 2
a75 1
has been reached. The letter
d81 2
a82 1
records. Two end-of-file markers mark the end of a tape, and
@


1.7
log
@physio(9) not physio(4)
@
text
@d1 1
a1 1
.\"	$OpenBSD: mtio.4,v 1.6 2000/04/01 22:45:09 deraadt Exp $
d188 1
a188 1
.Xr st 4 ,
@


1.6
log
@modernize Xr
@
text
@d1 1
a1 1
.\"	$OpenBSD: mtio.4,v 1.5 1999/07/09 13:35:46 aaron Exp $
d46 1
a46 1
.Xr physio 4 .
@


1.5
log
@- remove all trailing whitespace
     * except when it is escaped with a `\' at the end of the line
- fix remaining .Nm usage as well
- this is from a patch I received from kwesterback@@home.com, who has been
  working on some scripts for fixing formatting errors in mdoc'd man pages

Ok, so there could be a cost/benefit debate with this commit, but since I have
the patch we might as well commit it...
@
text
@d1 1
a1 1
.\"	$OpenBSD: mtio.4,v 1.4 1999/07/03 02:11:12 aaron Exp $
d188 1
a188 6
.Xr tp 1 ,
.Xr ht 4 ,
.Xr mt 4 ,
.Xr tm 4 ,
.Xr ts 4 ,
.Xr ut 4
@


1.4
log
@remove redundant .Pp macros
@
text
@d1 1
a1 1
.\"	$OpenBSD: mtio.4,v 1.3 1999/05/16 19:56:31 alex Exp $
d63 1
a63 1
(or its lowest density), between 
@


1.3
log
@Cleanup xrefs under SEE ALSO.  Specifically:

  - Sort xrefs by section, and then alphabetically.
  - Add missing commas between xref items.
  - Remove commas from the last xref entry.
  - Remove duplicate entries.
@
text
@d1 1
a1 1
.\"	$OpenBSD: mtio.4,v 1.2 1998/09/05 17:41:48 deraadt Exp $
d42 1
a42 3
.Nd
.Tn OpenBSD
magtape interface
a179 1
.Pp
d196 1
a196 1
.Nm mtio
@


1.2
log
@more man page repairs; aaron@@ug.cs.dal.ca
@
text
@d1 1
a1 1
.\"	$OpenBSD: mtio.4,v 1.1 1998/07/03 06:58:23 deraadt Exp $
d193 1
a195 1
.Xr mt 4 ,
@


1.1
log
@first cut at MI mtio(4)
@
text
@d1 1
a1 1
.\"	$OpenBSD: mtio.4,v 1.4 1996/10/08 01:20:51 michaels Exp $
d46 1
a46 1
These interface concerns devices which are typical tape block devices,
@

