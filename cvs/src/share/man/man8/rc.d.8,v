head	1.34;
access;
symbols
	OPENBSD_6_2:1.34.0.4
	OPENBSD_6_2_BASE:1.34
	OPENBSD_6_1:1.31.0.6
	OPENBSD_6_1_BASE:1.31
	OPENBSD_6_0:1.31.0.2
	OPENBSD_6_0_BASE:1.31
	OPENBSD_5_9:1.30.0.2
	OPENBSD_5_9_BASE:1.30
	OPENBSD_5_8:1.28.0.6
	OPENBSD_5_8_BASE:1.28
	OPENBSD_5_7:1.28.0.2
	OPENBSD_5_7_BASE:1.28
	OPENBSD_5_6:1.26.0.4
	OPENBSD_5_6_BASE:1.26
	OPENBSD_5_5:1.24.0.4
	OPENBSD_5_5_BASE:1.24
	OPENBSD_5_4:1.22.0.4
	OPENBSD_5_4_BASE:1.22
	OPENBSD_5_3:1.22.0.2
	OPENBSD_5_3_BASE:1.22
	OPENBSD_5_2:1.21.0.2
	OPENBSD_5_2_BASE:1.21
	OPENBSD_5_1_BASE:1.20
	OPENBSD_5_1:1.20.0.2
	OPENBSD_5_0:1.16.0.2
	OPENBSD_5_0_BASE:1.16
	OPENBSD_4_9:1.2.0.2
	OPENBSD_4_9_BASE:1.2;
locks; strict;
comment	@.\" @;


1.34
date	2017.07.27.07.49.05;	author tb;	state Exp;
branches;
next	1.33;
commitid	bYqR9NYZqwvuT1Mn;

1.33
date	2017.05.27.13.51.52;	author ajacoutot;	state Exp;
branches;
next	1.32;
commitid	6HzyJoXIH34lggdk;

1.32
date	2017.05.25.09.40.18;	author ajacoutot;	state Exp;
branches;
next	1.31;
commitid	pNjFE7B5dTG5mzU5;

1.31
date	2016.04.26.17.43.12;	author ajacoutot;	state Exp;
branches;
next	1.30;
commitid	84F9HhfKn82n0pNP;

1.30
date	2015.10.30.11.04.56;	author sthen;	state Exp;
branches;
next	1.29;
commitid	6RFnXvxE8xJCXqCh;

1.29
date	2015.09.21.09.23.35;	author jmc;	state Exp;
branches;
next	1.28;
commitid	nA9bz3w8ki0Cdhlp;

1.28
date	2015.02.25.23.01.28;	author rpe;	state Exp;
branches;
next	1.27;
commitid	JmzWoe3zU9ZFn2lp;

1.27
date	2015.01.15.09.20.37;	author ajacoutot;	state Exp;
branches;
next	1.26;
commitid	DkaMvTTPk0odkX34;

1.26
date	2014.07.22.08.48.07;	author ajacoutot;	state Exp;
branches;
next	1.25;
commitid	x57kAgQP4fls1TEF;

1.25
date	2014.07.09.14.19.22;	author ajacoutot;	state Exp;
branches;
next	1.24;
commitid	y0ghT5LJiLgElOXd;

1.24
date	2013.09.29.13.17.43;	author jmc;	state Exp;
branches;
next	1.23;

1.23
date	2013.09.29.10.11.14;	author sthen;	state Exp;
branches;
next	1.22;

1.22
date	2012.09.01.07.08.37;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2012.02.22.10.38.24;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2011.10.09.08.54.29;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2011.09.29.17.58.31;	author jmc;	state Exp;
branches;
next	1.18;

1.18
date	2011.09.20.07.48.20;	author schwarze;	state Exp;
branches;
next	1.17;

1.17
date	2011.09.19.21.20.45;	author robert;	state Exp;
branches;
next	1.16;

1.16
date	2011.07.08.17.43.58;	author sthen;	state Exp;
branches;
next	1.15;

1.15
date	2011.07.08.02.14.13;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2011.07.06.23.46.10;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2011.06.10.08.46.56;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2011.05.26.14.38.47;	author jmc;	state Exp;
branches;
next	1.11;

1.11
date	2011.05.26.13.25.57;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2011.03.24.11.15.40;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2011.03.17.21.37.27;	author jmc;	state Exp;
branches;
next	1.8;

1.8
date	2011.03.17.17.32.31;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2011.03.15.12.21.08;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2011.03.13.02.00.28;	author schwarze;	state Exp;
branches;
next	1.5;

1.5
date	2011.03.10.16.49.48;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2011.03.06.07.03.49;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2011.03.05.12.56.33;	author schwarze;	state Exp;
branches;
next	1.2;

1.2
date	2011.02.24.07.06.35;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2011.02.17.18.22.44;	author espie;	state Exp;
branches;
next	;


desc
@@


1.34
log
@The -d flag prevents redirection of stdout (not stdin) and stderr
to /dev/null.

noticed by Matthew <chohag () jtan ! com>
@
text
@.\"	$OpenBSD: rc.d.8,v 1.33 2017/05/27 13:51:52 ajacoutot Exp $
.\"
.\" Copyright (c) 2011 Robert Nagy, Antoine Jacoutot, Ingo Schwarze
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\"
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHORS ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHORS BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.Dd $Mdocdate: May 27 2017 $
.Dt RC.D 8
.Os
.Sh NAME
.Nm rc.d
.Nd daemon control scripts
.Sh SYNOPSIS
.Nm /etc/rc.d/ Ns Ar daemon
.Op Fl df
.Ar action
.Sh DESCRIPTION
The
.Pa /etc/rc.d
directory contains shell scripts to start, stop, and reconfigure daemon
programs
.Pq Dq services .
.Pp
Services installed from
.Xr packages 7
may be started at boot time in the order specified by the
.Va pkg_scripts
variable from
.Xr rc.conf 8 ;
the order will be reversed during shutdown.
Services comprising
.Ox
base are started by
.Xr rc 8 .
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl d
Setting this option will print the function names as they are called
and prevent the
.Xr rc.subr 8
framework from redirecting stdout and stderr to /dev/null.
This is used to allow debugging of failed
.Ar actions .
.It Fl f
This option only affects the
.Cm start
action.
It will forcibly start the daemon whatever value
.Va daemon_flags
is set to.
If
.Va daemon_flags
is set to
.Dq NO ,
execution will continue with the script's own defaults unless other
flags are specified.
.El
.Pp
Each such script responds to the following
.Ar actions :
.Pp
.Bl -tag -width restart -offset indent -compact
.It Cm start
Start the service, if not already running.
.It Cm stop
Stop the service.
.It Cm reload
Tell the daemon to reload its configuration.
.It Cm restart
Perform a stop, then a start.
.It Cm check
Return 0 if the daemon is running or 1 if it is not.
.El
.Sh ENVIRONMENT
Daemon control scripts use a fixed number of
.Xr sh 1
variables when starting a daemon.
The following can be overridden by site-specific values provided in
.Xr rc.conf.local 8 :
.Bl -tag -width daemon_timeout -offset indent
.It Ar daemon Ns _flags
Additional arguments to call the daemon with.
These will be appended to any mandatory arguments already contained in the
.Va daemon
variable defined in the control script.
If
.Ar daemon Ns _flags
is set to
.Dq NO ,
it will prevent the daemon from starting even when listed in
.Va pkg_scripts .
.It Ar daemon Ns _rtable
Routing table to run the daemon under, using
.Xr route 8 .
.It Ar daemon Ns _timeout
Maximum time in seconds to wait for the
.Cm start ,
.Cm stop
and
.Cm reload
actions to return.
This is only guaranteed with the default
.Ic rc_start ,
.Ic rc_stop
and
.Ic rc_reload
functions.
.It Ar daemon Ns _user
User to run the daemon as, using
.Xr su 1 .
.El
.Pp
To obtain the actual variable names, replace
.Ar daemon
with the name of the script.
For example, postgres is managed through
.Pa /etc/rc.d/postgresql :
.Pp
.Dl daemon_flags=-w -l /var/postgresql/logfile
.Pp
To override this and increase the debug log level (keeping the existing
flags), define the following in
.Xr rc.conf.local 8 :
.Pp
.Dl postgresql_flags=-w -l /var/postgresql/logfile -d 5
.Pp
Each script may define its own defaults, as explained in
.Xr rc.subr 8 .
.Pp
.Va daemon_class
is a special read-only variable.
It is set to
.Dq daemon
unless there is a login class configured in
.Xr login.conf 5
with the same name as the
.Nm rc.d
script itself,
in which case it will be set to that login class.
This allows setting many initial process properties, for example
environment variables, scheduling priority, and process limits
such as maximum memory use and number of files.
.Sh FILES
.Bl -tag -width Ds
.It Pa /etc/rc.d/
Directory containing daemon control scripts.
.It Pa /etc/rc.d/rc.subr
Functions and variables used by
.Nm rc.d
scripts.
.It Pa /var/run/rc.d/
Directory containing files recording the variables of currently running daemons.
Some are informational and some are for matching daemons using
.Xr pgrep 1
and
.Xr pkill 1 .
.El
.Sh SEE ALSO
.Xr rc 8 ,
.Xr rc.conf 8 ,
.Xr rc.subr 8 ,
.Xr rcctl 8
.Sh HISTORY
The
.Pa /etc/rc.d
directory
first appeared in
.Ox 4.9 .
@


1.33
log
@Add an ALRM timer to cope with 2 annoying issues in rc.d(8):
- prevent a daemon from hanging the boot
(typo in your flagsm e.g. httpd_flags=-d)
- make sure we can get the status of a backgrounded daemon instead of always
returning success

Side effect of this is that we can kill a knob! rip rc_bg :-)
Ports will need love, and a second commit is coming for that.

The diff is small yet not trivial so I am committing early in the release
process in one shot so it can easily be reverted if needed. I started working on
this during g2k16 in Cambridge then finished it in Brisbane for a2k17 where
robert@@, beck@@ and sthen@@ agreed it was the correct way to go and I should move
ahead with it post 6.1.

If you see any regression, please talk to me!
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.d.8,v 1.32 2017/05/25 09:40:18 ajacoutot Exp $
d27 1
a27 1
.Dd $Mdocdate: May 25 2017 $
d62 1
a62 1
framework from redirecting stdin and stderr to /dev/null.
@


1.32
log
@Four, not three variables can be overriden. But the number is not important
so just drop it.
reported by thelocals_job_applicant at protonmail
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.d.8,v 1.31 2016/04/26 17:43:12 ajacoutot Exp $
d27 1
a27 1
.Dd $Mdocdate: April 26 2016 $
d118 1
a118 4
.Cm start
(only if
.Va rc_bg
is set),
@


1.31
log
@Document recent rc.subr/rc.d changes.

ok sthen@@ robert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.d.8,v 1.30 2015/10/30 11:04:56 sthen Exp $
d27 1
a27 1
.Dd $Mdocdate: October 30 2015 $
d99 1
a99 1
The following three can be overridden by site-specific values provided in
@


1.30
log
@Point out that daemon class, via login.conf, can be used to set more than
just the process limits - show that, in particular, environment variables and
scheduling priority can be set in this way. Discussed with ajacoutot, robert,
schwarze, I went with wording suggested by schwarze@@ which was much better
than mine.
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.d.8,v 1.29 2015/09/21 09:23:35 jmc Exp $
d27 1
a27 1
.Dd $Mdocdate: September 21 2015 $
d113 3
a115 3
.It Ar daemon Ns _user
User to run the daemon as, using
.Xr su 1 .
d132 3
d176 5
a180 5
Directory containing files recording the
.Va pexp
variable used by
.Xr pkill 1
for currently running daemons.
@


1.29
log
@scatter some rcctl refs; from rob pierce
discussed with ajacoutot
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.d.8,v 1.28 2015/02/25 23:01:28 rpe Exp $
d27 1
a27 1
.Dd $Mdocdate: February 25 2015 $
d161 3
@


1.28
log
@Synchronize daemon_flags and postgresql_flags examples with rcscript.

OK sthen ajacoutot
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.d.8,v 1.27 2015/01/15 09:20:37 ajacoutot Exp $
d27 1
a27 1
.Dd $Mdocdate: January 15 2015 $
d179 2
a180 1
.Xr rc.subr 8
@


1.27
log
@Extend the description of _timeout.
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.d.8,v 1.26 2014/07/22 08:48:07 ajacoutot Exp $
d27 1
a27 1
.Dd $Mdocdate: July 22 2014 $
d140 1
a140 1
.Dl daemon_flags=-l /var/postgresql/logfile
d143 1
a143 1
logfile path), define the following in
d146 1
a146 1
.Dl postgresql_flags=-l /var/postgresql/logfile -d 5
@


1.26
log
@Drop quotes and mention that 3 and not 2 variables can be overridden.

ok robert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.d.8,v 1.25 2014/07/09 14:19:22 ajacoutot Exp $
d27 1
a27 1
.Dd $Mdocdate: July 9 2014 $
d118 4
a121 1
.Cm start ,
d126 6
@


1.25
log
@Add a daemon_timeout variable for rc_wait().
It represents the maximum time in seconds to wait for the start, stop
and reload actions to return. Defaults to "30".
No default behavior is changed.

ok beck@@ sthen@@ jasper@@ giovanni@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.d.8,v 1.24 2013/09/29 13:17:43 jmc Exp $
d27 1
a27 1
.Dd $Mdocdate: September 29 2013 $
d99 1
a99 1
The following two can be overridden by site-specific values provided in
d131 1
a131 1
.Dl daemon_flags="-l /var/postgresql/logfile"
d137 1
a137 1
.Dl postgresql_flags="-l /var/postgresql/logfile -d 5"
@


1.24
log
@fix some formatting warnings;
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.d.8,v 1.23 2013/09/29 10:11:14 sthen Exp $
d101 1
a101 1
.Bl -tag -width daemon_flags -offset indent
d116 7
@


1.23
log
@Instead of demonstrating the method to override rc.d variables with a
(relatively uncommon) change of uid, demonstrate changing flags instead,
as this is more common (and hoping that this reduces the chance of users
editing the rc.d script directly which can cause problems at upgrade time).
Feedback from jmc, tweaks from schwarze, ok jmc schwarze ajacoutot
@
text
@d1 1
a1 1
.\" 	$OpenBSD: rc.d.8,v 1.22 2012/09/01 07:08:37 ajacoutot Exp $
d27 1
a27 1
.Dd $Mdocdate: September 1 2012 $
a100 1
.Pp
d107 1
a107 1
If 
@


1.22
log
@Make '-f' only affects the "start" action.
There is no reason we couldn't reload|stop a daemon even when _flags is
set to NO.
As a bonus side effect, we can now see usage() on disabled scripts.

discussed with sthen@@ and espie@@
ok sthen@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: rc.d.8,v 1.21 2012/02/22 10:38:24 ajacoutot Exp $
d27 1
a27 1
.Dd $Mdocdate: February 22 2012 $
d102 1
a102 1
.Bl -tag -width daemon_flags -offset indent -compact
d104 7
a110 2
Arguments to call the daemon with.
If set to
d123 6
a128 2
.Pa /etc/rc.d/postgresql .
To run the daemon using a site-specific user account, define the following in
d131 1
a131 1
.Dl postgresql_user=mypgsqluser
@


1.21
log
@Mention and explain the /var/run/rc.d/ directory.

ok sthen@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: rc.d.8,v 1.20 2011/10/09 08:54:29 ajacoutot Exp $
d27 1
a27 1
.Dd $Mdocdate: October 9 2011 $
d66 6
a71 1
Setting this option will force operations with the given action.
d73 1
a73 1
.Ar daemon Ns _flags
@


1.20
log
@Remove the BUGS section, it's been taken care of.
@
text
@d1 1
a1 1
.\" 	$OpenBSD: rc.d.8,v 1.19 2011/09/29 17:58:31 jmc Exp $
d27 1
a27 1
.Dd $Mdocdate: September 29 2011 $
d140 6
@


1.19
log
@tweak previous;
@
text
@d1 1
a1 1
.\" 	$OpenBSD: rc.d.8,v 1.18 2011/09/20 07:48:20 schwarze Exp $
d27 1
a27 1
.Dd $Mdocdate: September 20 2011 $
a150 10
.Sh BUGS
Changing
.Ar daemon Ns _flags
in
.Xr rc.conf.local 8
will change the corresponding pattern used with
.Xr pkill 1 ,
so that
.Ar actions
may not work on already running processes.
@


1.18
log
@tweak previous
@
text
@d1 1
a1 1
.\" 	$OpenBSD: rc.d.8,v 1.17 2011/09/19 21:20:45 robert Exp $
d27 1
a27 1
.Dd $Mdocdate: September 19 2011 $
d67 1
a67 1
In case
d69 1
a69 1
if set to
@


1.17
log
@document the new rc.d script arguments and remove the reference
to the old-style RC_DEBUG environment variable
@
text
@d1 1
a1 1
.\" 	$OpenBSD: rc.d.8,v 1.16 2011/07/08 17:43:58 sthen Exp $
d27 1
a27 1
.Dd $Mdocdate: July 8 2011 $
a34 1
.Bk -words
d36 1
a36 1
action
@


1.16
log
@Make a distinction between base/pkg rc scripts. ok aja@@ schwarze@@ jmc@@
(with a tweak from jmc).
@
text
@d1 1
a1 1
.\" 	$OpenBSD: rc.d.8,v 1.15 2011/07/08 02:14:13 ajacoutot Exp $
d34 4
a37 1
.Nm /etc/rc.d/ Ns Ar daemon action
d57 19
a132 9
.Bl -tag -width "RC_DEBUG"
.It Va RC_DEBUG
Setting this variable will print the function names as they are called
and prevent the
.Xr rc.subr 8
framework from redirecting stdin and stderr to /dev/null.
This is used to allow debugging of failed
.Ar actions .
.El
@


1.15
log
@Rename 'rc_scripts' to 'pkg_scripts' to make it clear this variable is for
packages _only_. One is not supposed to add any base scripts in it.

naddy@@ doesn't care (I think he does care but he won't admit it)
ok robert@@

(I'll add something to current.html in a few)
@
text
@d1 1
a1 1
.\" 	$OpenBSD: rc.d.8,v 1.14 2011/07/06 23:46:10 ajacoutot Exp $
d27 1
a27 1
.Dd $Mdocdate: July 6 2011 $
d42 3
a44 1
Those services may be started at boot time in the order specified by the
d47 1
a47 1
.Xr rc.conf 8 ,
d49 4
@


1.14
log
@rc.d(8) now handle some base daemons as well.

ok robert@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: rc.d.8,v 1.13 2011/06/10 08:46:56 ajacoutot Exp $
d27 1
a27 1
.Dd $Mdocdate: June 10 2011 $
d43 1
a43 1
.Va rc_scripts
d76 1
a76 1
.Va rc_scripts .
@


1.13
log
@One less entry in BUGS.
@
text
@d1 1
a1 1
.\" 	$OpenBSD: rc.d.8,v 1.12 2011/05/26 14:38:47 jmc Exp $
d27 1
a27 1
.Dd $Mdocdate: May 26 2011 $
a40 5
Currently, it is only used for daemons installed from
.Xr packages 7 ,
and not for the
.Ox
base system.
@


1.12
log
@no .Pp before/after .S{s,h};
@
text
@d1 1
a1 1
.\" 	$OpenBSD: rc.d.8,v 1.11 2011/05/26 13:25:57 ajacoutot Exp $
a147 6
.Pp
There is currently no way to know whether a background process
.Pq Va rc_bg
was successfully started so
.Fn rc_start
will always succeed in this case.
@


1.11
log
@BUGS: there is currently no way to know whether a background process was
successfully started so rc_start will always succeed.

ok robert@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: rc.d.8,v 1.10 2011/03/24 11:15:40 ajacoutot Exp $
d27 1
a27 1
.Dd $Mdocdate: March 24 2011 $
a138 1
.Pp
@


1.10
log
@Document daemon_flags=NO.

ok robert@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: rc.d.8,v 1.9 2011/03/17 21:37:27 jmc Exp $
d27 1
a27 1
.Dd $Mdocdate: March 17 2011 $
d139 1
d149 6
@


1.9
log
@add missing .El;
@
text
@d1 1
a1 1
.\" 	$OpenBSD: rc.d.8,v 1.8 2011/03/17 17:32:31 ajacoutot Exp $
d78 4
@


1.8
log
@Document RC_DEBUG.

"I love having slaves" && ok robert@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: rc.d.8,v 1.7 2011/03/15 12:21:08 ajacoutot Exp $
d27 1
a27 1
.Dd $Mdocdate: March 15 2011 $
d114 1
@


1.7
log
@Document daemon_class, with wording help from jmc@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: rc.d.8,v 1.6 2011/03/13 02:00:28 schwarze Exp $
d27 1
a27 1
.Dd $Mdocdate: March 13 2011 $
d106 8
@


1.6
log
@Some cleanup of the discussion of rc.d variables:
A bit more precision, insert the proper section header,
and avoid remarks in parentheses.
ok ajacoutot@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: rc.d.8,v 1.5 2011/03/10 16:49:48 ajacoutot Exp $
d27 1
a27 1
.Dd $Mdocdate: March 10 2011 $
d95 11
@


1.5
log
@Changing daemon_flags on already running processes can make any kind of
action fail, not just reload and stop.

ok sthen@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: rc.d.8,v 1.4 2011/03/06 07:03:49 ajacoutot Exp $
d27 1
a27 1
.Dd $Mdocdate: March 6 2011 $
d68 6
a73 9
.Pp
Each script defines its own defaults, some of which can be overridden
by site-specific values provided in
.Xr rc.conf.local 8
.Po
variable names are obtained by replacing
.Ar daemon
with the name of the actual script
.Pc :
d83 3
d92 3
d115 3
a117 1
Changing flag values in
@


1.4
log
@Clarify.

ok schwarze@@ jmc@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: rc.d.8,v 1.3 2011/03/05 12:56:33 schwarze Exp $
d27 1
a27 1
.Dd $Mdocdate: March 5 2011 $
d117 1
a117 3
.Ar stop
or
.Ar reload
@


1.3
log
@Minor polishing that was missed during the recent rc.subr(8) split:
* Avoid markup of "daemon" when not explicitly referring to the variable.
* Improve some wording, remove one typo and one useless .Pp.
Reminded by jmc@@, ok jmc@@ ajacoutot@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: rc.d.8,v 1.2 2011/02/24 07:06:35 ajacoutot Exp $
d27 1
a27 1
.Dd $Mdocdate: February 24 2011 $
d120 1
a120 1
may not work afterwards.
@


1.2
log
@Fix several documentation bugs (including a typo fix from schwarze@@).
Missing documentation about the naming policy for rc scripts.
Document rcexec.
Remove daemon_shell, it's proved useless at best and can introduce
issues we don't want to deal with.

prodded by, discussed with and ok espie@@
ok robert@@ miod@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: rc.d.8,v 1.1 2011/02/17 18:22:44 espie Exp $
d27 1
a27 1
.Dd $Mdocdate: February 17 2011 $
d34 1
a34 1
.Nm /etc/rc.d/ Ns Ar daemond action
d80 1
a80 3
Arguments to call
.Nm daemon
with.
d82 1
a82 3
User to run
.Nm daemon
as, using
d112 3
a114 1
Changing flag values will change the corresponding pattern used with
@


1.1
log
@split along user/implementation lines.
After lots of back and forth with jmc@@ and schwarze.

okay miod@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD$
d27 1
a27 1
.Dd $Mdocdate: February 12 2011 $
d75 1
a75 1
with the name of the actual service
d91 1
a91 1
.Pa /etc/rc.d/postgresqld .
@

