head	1.14;
access;
symbols
	OPENBSD_6_0:1.14.0.28
	OPENBSD_6_0_BASE:1.14
	OPENBSD_5_9:1.14.0.24
	OPENBSD_5_9_BASE:1.14
	OPENBSD_5_8:1.14.0.26
	OPENBSD_5_8_BASE:1.14
	OPENBSD_5_7:1.14.0.18
	OPENBSD_5_7_BASE:1.14
	OPENBSD_5_6:1.14.0.22
	OPENBSD_5_6_BASE:1.14
	OPENBSD_5_5:1.14.0.20
	OPENBSD_5_5_BASE:1.14
	OPENBSD_5_4:1.14.0.16
	OPENBSD_5_4_BASE:1.14
	OPENBSD_5_3:1.14.0.14
	OPENBSD_5_3_BASE:1.14
	OPENBSD_5_2:1.14.0.12
	OPENBSD_5_2_BASE:1.14
	OPENBSD_5_1_BASE:1.14
	OPENBSD_5_1:1.14.0.10
	OPENBSD_5_0:1.14.0.8
	OPENBSD_5_0_BASE:1.14
	OPENBSD_4_9:1.14.0.6
	OPENBSD_4_9_BASE:1.14
	OPENBSD_4_8:1.14.0.4
	OPENBSD_4_8_BASE:1.14
	OPENBSD_4_7:1.14.0.2
	OPENBSD_4_7_BASE:1.14
	OPENBSD_4_6:1.13.0.12
	OPENBSD_4_6_BASE:1.13
	OPENBSD_4_5:1.13.0.8
	OPENBSD_4_5_BASE:1.13
	OPENBSD_4_4:1.13.0.6
	OPENBSD_4_4_BASE:1.13
	OPENBSD_4_3:1.13.0.4
	OPENBSD_4_3_BASE:1.13
	OPENBSD_4_2:1.13.0.2
	OPENBSD_4_2_BASE:1.13
	OPENBSD_4_1:1.12.0.10
	OPENBSD_4_1_BASE:1.12
	OPENBSD_4_0:1.12.0.8
	OPENBSD_4_0_BASE:1.12
	OPENBSD_3_9:1.12.0.6
	OPENBSD_3_9_BASE:1.12
	OPENBSD_3_8:1.12.0.4
	OPENBSD_3_8_BASE:1.12
	OPENBSD_3_7:1.12.0.2
	OPENBSD_3_7_BASE:1.12
	OPENBSD_3_6:1.11.0.2
	OPENBSD_3_6_BASE:1.11
	OPENBSD_3_5:1.10.0.2
	OPENBSD_3_5_BASE:1.10
	OPENBSD_3_4:1.7.0.2
	OPENBSD_3_4_BASE:1.7
	OPENBSD_3_3:1.3.0.2
	OPENBSD_3_3_BASE:1.3;
locks; strict;
comment	@.\" @;


1.14
date	2010.01.03.16.43.45;	author schwarze;	state Exp;
branches;
next	1.13;

1.13
date	2007.05.31.19.19.59;	author jmc;	state Exp;
branches;
next	1.12;

1.12
date	2004.12.27.16.41.12;	author miod;	state Exp;
branches;
next	1.11;

1.11
date	2004.05.25.22.27.44;	author jmc;	state Exp;
branches;
next	1.10;

1.10
date	2004.03.22.00.11.01;	author mickey;	state Exp;
branches;
next	1.9;

1.9
date	2004.03.17.10.18.38;	author jmc;	state Exp;
branches;
next	1.8;

1.8
date	2004.03.17.03.18.50;	author mickey;	state Exp;
branches;
next	1.7;

1.7
date	2003.07.10.08.30.36;	author jmc;	state Exp;
branches;
next	1.6;

1.6
date	2003.06.19.18.51.08;	author mickey;	state Exp;
branches;
next	1.5;

1.5
date	2003.06.19.00.57.47;	author mickey;	state Exp;
branches;
next	1.4;

1.4
date	2003.06.06.19.28.06;	author jmc;	state Exp;
branches;
next	1.3;

1.3
date	2003.03.17.10.06.07;	author jmc;	state Exp;
branches;
next	1.2;

1.2
date	2003.02.01.16.38.39;	author jmc;	state Exp;
branches;
next	1.1;

1.1
date	2002.10.17.23.18.51;	author miod;	state Exp;
branches;
next	;


desc
@@


1.14
log
@Neither .Pp nor unqualified text are allowed at the top level of .Bl;
instead, .It is required.  Thus, move .Pp and text before the .Bl,
and remove the .Pp altogether where it is not needed.

Syntax errors found by mandoc(1), also required to fix the mandoc build;
feedback and ok jmc@@, and sobrado@@ also supports the direction.
@
text
@.\"	$OpenBSD: boot_hppa.8,v 1.13 2007/05/31 19:19:59 jmc Exp $
.\"
.\" Copyright (c) 2002, Miodrag Vallat.
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
.\" WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.Dd $Mdocdate: May 31 2007 $
.Dt BOOT_HPPA 8 hppa
.Os
.Sh NAME
.Nm boot_hppa
.Nd hppa system bootstrapping procedures
.Sh DESCRIPTION
.Ss System starts
When powered on, after a panic, or if the system is rebooted via
.Xr reboot 8
or
.Xr shutdown 8 ,
the hppa firmware
.Pq Dq PDC
will proceed to its initialization, and will boot an operating system
if autoboot is enabled.
.\"
.Ss Boot process description
System boot blocks are provided as a
.Dq LIF
.Pq Logical Interchange Format
archive, either on a disk device, or via the network, using the
.Em bootp
or
.Em rboot
protocols, depending on the PDC version.
A small
.Xr mkboot 8
utility
is provided for combining primary boot and a number
of images (OS kernels or standalone binaries)
into one
.Dq LIF
volume suitable for booting.
.Ss PDC concepts
If autoboot is enabled, the PDC will attempt to boot from the specified
.Dq boot path
value.
If no
.Dq boot path
has been specified, the PDC will then scan for bootable devices and
boot from the first found, after a few seconds allowing the user to
interrupt the boot process.
If autoboot is disabled, the PDC will enter interactive mode, after an
optional device scan.
In all cases, it is possible to enter interactive mode by holding the
escape key during the selftests, or when prompted to do so to abort
the current operation, unless the PDC has been configured in
.Dq secure mode .
.\"
.Ss ISL interaction
.Dq ISL
stands for
.Dq Initial System Loader
and is the
.Xr boot 8
program in
.Ox .
On all versions of the PDC except for the 712 and 725 models the
.Dq boot
command (see below) will be followed by the question:
.Dq Interact with IPL (Y, N, or Cancel)?>
where a positive answer will invoke an interactive prompt in the
.Xr boot 8
program later and negative will thus suppress it.
A cancellation will abort the boot process.
.Pp
On the 712 and 725 models firmware an additional
.Dq isl
argument should be given to the
.Dq boot
command to invoke the
.Xr boot 8
interactive prompt.
With the default behaviour being a non-interactive boot process.
.\"
.Ss Old PDC operation
This version is used on the following models:
705, 7x0, 715/33/50/75, 725/50/75, 735, 755.
There are two levels of interactive commands in this version.
The first level is a short menu:
.Bd -literal -offset indent
b)   Boot from specified device
s)   Search for bootable device
a)   Enter Boot Administration mode
x)   Exit and continue boot sequence

Select from menu:
.Ed
.Pp
which provides the following commands:
.Pp
.Bl -tag -width "XXX" -offset indent -compact
.It Cm b
boot from a device found during the scan,
either with its short
.Dq P#
form, or a complete name specification.
For example, to boot from the
.Tn SCSI
disk with id 6 off the built-in (first) controller,
one would enter
.Ic b Ar scsi.6.0 .
.It Cm s
rescan for bootable devices.
.It Cm a
enter the second part of interactive mode.
.It Cm x
resume an interrupted boot sequence.
.El
.Pp
The
.Dq Boot Administration
mode, recognizable with its
.Em BOOT_ADMIN>
prompt, controls the various boot options.
The complete list of commands depends on the machine and PDC version.
The following list only mentions commands impacting the boot process.
.Bl -tag -width AUTOSELECT -offset indent
.It AUTOSELECT
Displays or changes the autoboot setting.
If autoselect is set to
.Dq on ,
the PDC will always attempt to boot the first bootable device found in
this order:
.Bl -enum -offset indent -compact
.It
Boot device
.Em path
setting.
.It
.Tn SCSI
devices connected to the built-in
.Tn SCSI
controller,
the highest ID numbers being preferred.
.It
Network
.Em rboot
server (see also
.Xr rbootd 8 ) .
.It
Other
.Tn SCSI
devices connected to secondary controllers,
the highest ID numbers being preferred.
.El
If the
.Em primary path
setting defines a bootable device, no device scan will occur.
.It BOOT
Boots off the specified device.
It is similar to the
.Ic b
command from the short menu above.
The
.Dq primary
and
.Dq alternate
path settings may be booted with
.Ic boot Ar pri
and
.Ic boot Ar alt
respectively.
.It PATH
Displays or changes the boot and console devices.
The boot device is defined as the
.Dq primary
path, and another setting may be stored as the
.Dq alternate
path for rescue purposes.
For example, to define the primary boot path to the
.Tn SCSI
disk with ID 5 connected to the built-in controller, one would enter
.Ic path primary Ar scsi.5
.Pp
When invoked without parameters,
.Ic path
will list the various path settings.
.El
.\"
.Ss Modern PDC operation
Machines equipped with 7100LC, 7200 or 7300LC CPU types are
usually blessed with a different kind of PDC.
There is only one interactive mode, with a
.Em BOOT_ADMIN>
prompt, which provides both boot settings and commands.
The complete list of commands depends on the machine and PDC version.
The following list only mentions commands impacting the boot process.
.Bl -tag -width auto\ search -offset indent
.It Ic auto boot
Displays or changes the autoboot setting.
If
.Ic auto boot
is set to
.Dq on ,
the PDC will always attempt to boot.
The booted device chosen will depend on the
.Ic auto search
setting.
.It Ic auto search
Displays or changes the device scan setting.
If
.Ic auto search
is set to
.Dq on ,
the PDC will attempt to boot the first bootable device found in
this order:
.Bl -enum -offset indent -compact
.It
Boot device
.Em path
setting.
.It
.Tn SCSI
devices connected to the built-in
.Tn SCSI
controller,
the highest ID numbers being preferred.
.It
Network
.Em bootp
server (see also
.Xr dhcpd 8 ) .
.It
Other
.Tn SCSI
devices connected to secondary controllers,
the highest ID numbers being preferred.
.El
If
.Ic auto search
is set to
.Dq off
and the primary boot path points to a bootable device,
no device scan will occur.
.Pp
Note that setting
.Ic auto search
to
.Dq on
will force autoboot, regardless of the
.Ic auto boot
value.
.It Ic boot
Boots off the specified device.
The
.Dq primary
and
.Dq alternate
path settings may be booted with
.Ic boot Ar pri
and
.Ic boot Ar alt
respectively.
.It Ic path
Displays or changes the boot and console devices.
The boot device is defined as the
.Dq primary
path, and another setting may be stored as the
.Dq alternate
path for rescue purposes.
For example, to define the primary boot path to the
.Tn SCSI
disk with ID 5 connected to the built-in controller, one would enter
.Ic path pri Ar scsi.5 .
.Pp
When invoked without parameters,
.Ic path
will list the various path settings.
.El
.\"
.Ss Boot process options
The
.Ox
hppa boot loader program is extensively described in a separate document,
.Xr boot 8 .
.Ss Abnormal system termination
If the system crashes, it will enter the kernel debugger,
.Xr ddb 4 ,
if it is configured in the kernel.
If the crash occurred during
initialization and the debugger is not present or is exited, the
kernel will halt the system.
If the crash occurred during normal operation and the debugger
is not present or is exited, the system will attempt a dump to the
configured dump device (which will be automatically recovered with
.Xr savecore 8
during the next multi-user boot cycle), and after the dump is complete
(successful or not) the kernel will attempt a reboot.
.Sh FILES
.Bl -tag -width /usr/mdec/xxbootxx -compact
.It Pa /bsd
default system kernel
.It Pa /bsd.rd
standalone installation kernel, suitable for disaster recovery
.It Pa boot.lif
network bootstrap and kernel combined image
.It Pa /usr/mdec/cdboot
primary bootstrap for
.Dq cd9660
file system
.It Pa /usr/mdec/xxboot
primary bootstrap for
.Dq ffs
file system
.It Pa /usr/mdec/boot
system bootstrap (usually also installed as
.Pa /boot )
.El
.Sh SEE ALSO
.Xr ddb 4 ,
.Xr boot 8 ,
.Xr dhcpd 8 ,
.Xr halt 8 ,
.Xr init 8 ,
.Xr rbootd 8 ,
.Xr reboot 8 ,
.Xr savecore 8 ,
.Xr shutdown 8
@


1.13
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: boot_hppa.8,v 1.12 2004/12/27 16:41:12 miod Exp $
d27 1
a27 1
.Dd $Mdocdate$
d118 1
a119 1
.Pp
@


1.12
log
@Mention bsd.rd in the FILES section.
@
text
@d1 1
a1 1
.\"	$OpenBSD: boot_hppa.8,v 1.11 2004/05/25 22:27:44 jmc Exp $
d27 1
a27 1
.Dd October 16, 2002
@


1.11
log
@replace obsolete references to bootpd(8) and bootptab(5) w/ dhcpd(8);
from jared yanovich;
@
text
@d1 1
a1 1
.\"	$OpenBSD: boot_hppa.8,v 1.10 2004/03/22 00:11:01 mickey Exp $
d321 2
@


1.10
log
@725 does boot isl too
@
text
@d1 1
a1 1
.\"	$OpenBSD: boot_hppa.8,v 1.9 2004/03/17 10:18:38 jmc Exp $
a249 2
.Xr bootpd 8
and
a337 1
.Xr bootpd 8 ,
@


1.9
log
@typos;
@
text
@d1 1
a1 1
.\"	$OpenBSD: boot_hppa.8,v 1.8 2004/03/17 03:18:50 mickey Exp $
d85 1
a85 1
On all versions of the PDC except for the 712 models the
d94 1
a94 1
On the 712 models firmware an additional
@


1.8
log
@more kosher meats
@
text
@d1 1
a1 1
.\"	$OpenBSD: boot_hppa.8,v 1.7 2003/07/10 08:30:36 jmc Exp $
d167 1
a167 1
.Xr rbootd 8 ).
d210 1
a210 1
usually blessed with a diffrent kind of PDC.
d252 1
a252 1
.Xr dhcpd 8 ).
d294 1
a294 1
.Ic path pri Ar scsi.5
@


1.7
log
@fix some lists and macros;
@
text
@d1 1
a1 1
.\"	$OpenBSD: boot_hppa.8,v 1.6 2003/06/19 18:51:08 mickey Exp $
d53 8
d104 2
a105 2
PDC ROM v1.4 and below are easily recognizable,
as they will start with a text banner.
d166 2
a167 1
server.
d209 2
a210 2
PDC ROM 1.5 and above will start with a small graphics window at the
screen center (unless you are using a serial console).
d249 4
a252 1
server.
d320 1
a320 1
.Bl -tag -width boot.lif -compact
d325 11
a335 3
.\" .It Pa /usr/mdec/boot
.\" system bootstrap (usually also installed as
.\" .Pa /boot )
d340 2
d344 1
a344 1
.\" .Xr installboot 8 ,
@


1.6
log
@a few grammer fixens from jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: boot_hppa.8,v 1.5 2003/06/19 00:57:47 mickey Exp $
d211 1
a211 1
.Ev Ic auto boot
d216 1
a216 1
.Ev Ic auto search
d221 1
a221 1
.Ev Ic auto search
d248 1
a248 1
.Ev Ic auto search
d255 1
a255 1
.Ev Ic auto search
d259 1
a259 1
.Ev Ic auto boot
@


1.5
log
@add a section on th4e isl interaction
@
text
@d1 1
a1 1
.\"	$OpenBSD: boot_hppa.8,v 1.4 2003/06/06 19:28:06 jmc Exp $
d81 1
a81 2
where a positive answer will invoke an interactive prompt
in the
d83 2
a84 2
program later and negative thus suppress such.
Cancelation will abort the boot process.
@


1.4
log
@- section reorder
- macro fixes
- kill whitespace at EOL
@
text
@d1 1
a1 1
.\"	$OpenBSD: boot_hppa.8,v 1.3 2003/03/17 10:06:07 jmc Exp $
d68 27
@


1.3
log
@more small typos;
@
text
@d1 1
a1 1
.\"	$OpenBSD: boot_hppa.8,v 1.2 2003/02/01 16:38:39 jmc Exp $
d41 1
a41 1
will proceed to its initialization, and will boot an operating system 
@


1.2
log
@typos;
added .Fl to flags for boot_*

ok deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: boot_hppa.8,v 1.1 2002/10/17 23:18:51 miod Exp $
d189 1
a189 1
The booted device choosen will depend on the
@


1.1
log
@Overhaul of boot_`arch`(8) manual pages (unfinished).

Attempt to factorize some texts, remove old or false stuff, try to be
more {help,use}ful, etc.

boot_alpha and boot_hp300 rewritten on the occasion, and boot_hppa is new.
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d52 1
a52 1
protocols, depening on the PDC version.
d85 2
a86 1
.It b
d96 1
a96 1
.It s
d98 1
a98 1
.It a
d100 1
a100 1
.It x
d109 1
a109 1
The complete list of commands depends of the machine and PDC version.
d117 1
a117 1
that order:
d120 1
a120 1
boot device
d179 1
a179 1
The complete list of commands depends of the machine and PDC version.
d182 1
a182 1
.It auto\ boot
d185 1
a185 1
.Ev auto\ boot
d189 2
a190 2
The booted device choosen will depend of the
.Ev auto\ search
d192 1
a192 1
.It auto\ search
d195 1
a195 1
.Ev auto\ search
d199 1
a199 1
that order:
d202 1
a202 1
boot device
d222 1
a222 1
.Ev auto\ search
d229 1
a229 1
.Ev auto\ search
d233 1
a233 1
.Ev auto\ boot
d235 1
a235 1
.It boot
d246 1
a246 1
.It path
d266 1
a266 1
hppa boot loader program is extensively described is a separate document,
@

