head	1.13;
access;
symbols
	OPENBSD_5_9:1.12.0.8
	OPENBSD_5_9_BASE:1.12
	OPENBSD_5_8:1.12.0.10
	OPENBSD_5_8_BASE:1.12
	OPENBSD_5_7:1.12.0.2
	OPENBSD_5_7_BASE:1.12
	OPENBSD_5_6:1.12.0.6
	OPENBSD_5_6_BASE:1.12
	OPENBSD_5_5:1.12.0.4
	OPENBSD_5_5_BASE:1.12
	OPENBSD_5_4:1.11.0.10
	OPENBSD_5_4_BASE:1.11
	OPENBSD_5_3:1.11.0.8
	OPENBSD_5_3_BASE:1.11
	OPENBSD_5_2:1.11.0.6
	OPENBSD_5_2_BASE:1.11
	OPENBSD_5_1_BASE:1.11
	OPENBSD_5_1:1.11.0.4
	OPENBSD_5_0:1.11.0.2
	OPENBSD_5_0_BASE:1.11
	OPENBSD_4_9:1.9.0.16
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.9.0.14
	OPENBSD_4_8_BASE:1.9
	OPENBSD_4_7:1.9.0.10
	OPENBSD_4_7_BASE:1.9
	OPENBSD_4_6:1.9.0.12
	OPENBSD_4_6_BASE:1.9
	OPENBSD_4_5:1.9.0.8
	OPENBSD_4_5_BASE:1.9
	OPENBSD_4_4:1.9.0.6
	OPENBSD_4_4_BASE:1.9
	OPENBSD_4_3:1.9.0.4
	OPENBSD_4_3_BASE:1.9
	OPENBSD_4_2:1.9.0.2
	OPENBSD_4_2_BASE:1.9
	OPENBSD_4_1:1.8.0.2
	OPENBSD_4_1_BASE:1.8
	OPENBSD_4_0:1.7.0.8
	OPENBSD_4_0_BASE:1.7
	OPENBSD_3_9:1.7.0.6
	OPENBSD_3_9_BASE:1.7
	OPENBSD_3_8:1.7.0.4
	OPENBSD_3_8_BASE:1.7
	OPENBSD_3_7:1.7.0.2
	OPENBSD_3_7_BASE:1.7
	OPENBSD_3_6:1.6.0.4
	OPENBSD_3_6_BASE:1.6
	OPENBSD_3_5:1.6.0.2
	OPENBSD_3_5_BASE:1.6
	OPENBSD_3_4:1.5.0.2
	OPENBSD_3_4_BASE:1.5
	OPENBSD_3_3:1.4.0.4
	OPENBSD_3_3_BASE:1.4
	OPENBSD_3_2:1.4.0.2
	OPENBSD_3_2_BASE:1.4
	OPENBSD_3_1:1.3.0.2
	OPENBSD_3_1_BASE:1.3
	OPENBSD_3_0:1.2.0.2
	OPENBSD_3_0_BASE:1.2
	OPENBSD_2_9:1.1.0.2
	OPENBSD_2_9_BASE:1.1;
locks; strict;
comment	@.\" @;


1.13
date	2016.03.09.16.28.47;	author deraadt;	state dead;
branches;
next	1.12;
commitid	OSDG2O3Cgeifnf1W;

1.12
date	2014.01.19.22.01.48;	author schwarze;	state Exp;
branches;
next	1.11;

1.11
date	2011.07.07.20.26.57;	author jmc;	state Exp;
branches;
next	1.10;

1.10
date	2011.07.07.19.27.44;	author miod;	state Exp;
branches;
next	1.9;

1.9
date	2007.05.31.19.20.00;	author jmc;	state Exp;
branches;
next	1.8;

1.8
date	2007.02.06.20.07.15;	author jmc;	state Exp;
branches;
next	1.7;

1.7
date	2004.12.27.16.41.16;	author miod;	state Exp;
branches;
next	1.6;

1.6
date	2004.02.09.19.21.52;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2003.06.02.23.30.16;	author millert;	state Exp;
branches;
next	1.4;

1.4
date	2002.07.04.17.36.17;	author miod;	state Exp;
branches;
next	1.3;

1.3
date	2001.11.13.13.54.26;	author mpech;	state Exp;
branches;
next	1.2;

1.2
date	2001.10.04.16.56.52;	author mpech;	state Exp;
branches;
next	1.1;

1.1
date	2000.11.09.03.57.35;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.13
log
@We are done providing support for the vax.
lots of agreement.
@
text
@.\"	$OpenBSD: boot_vax.8,v 1.12 2014/01/19 22:01:48 schwarze Exp $
.\"	$NetBSD: boot_vax.8,v 1.3 1995/04/23 10:33:39 cgd Exp $
.\"
.\" Copyright (c) 1980, 1991, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"     @@(#)boot_vax.8	8.2 (Berkeley) 4/19/94
.\"
.Dd $Mdocdate: January 19 2014 $
.Dt BOOT_VAX 8 vax
.Os
.Sh NAME
.Nm boot_vax
.Nd VAX-specific system bootstrapping procedures
.Sh DESCRIPTION
.Ss Power fail and crash recovery
Normally, the system will reboot itself at power-up or after crashes.
Provided the auto-restart is enabled on the machine's front panel,
an automatic consistency check of the file systems will be performed,
and unless this fails, the system will resume multi-user operations.
.Ss Cold starts
The system boot procedure loads a boot parameter block
from block 0 of the disk configured as the boot device.
The
.Nm boot
program
finds the corresponding file on the given device
.Pf ( Pa bsd
by default), loads that file
into memory location zero, and starts the program at the entry address
specified in the program header (after clearing off the high bit
of the specified entry address).
.Pp
The file specifications used with
.Dq BOOT ANY
or
.Dq \&B/3
are of the form:
.Pp
.Dl device(adaptor,controller,unit,minor)
.Pp
where
.Ar device
is the type of the device to be searched,
.Ar adaptor
is the number of the adaptor to which the device is attached,
.Ar controller
is the unit number of the controller or
tape formatter on that adaptor,
.Ar unit
is the unit number of the disk or transport slave unit of the tape,
and
.Ar minor
is the disk partition or tape file number.
Leading adaptor or controller numbers default to 0.
Normal line editing characters can be used when typing the file specification.
The following list of supported devices may vary from installation to
installation:
.Bd -unfilled -offset indent
hd	MFM disk connected to the MFM controller on some VAXstation systems
mt	tape drive connected to an MSCP-compatible controller
ra	disk drive connected to an MSCP-compatible controller
sd	SCSI disk
st	SCSI tape
.Ed
.Pp
For example,
to boot from a file system in partition
.Sq a
of unit 0 of a SCSI disk, type
.Dq sd(0,0)bsd
at the boot prompt;
.Dq sd(2,0,1,0)bsd
would specify drive 1 on the second SCSI controller.
For tapes, the minor device number gives a file offset;
.Dq mt(1,2,3,4)
would specify the fifth file on slave 3 of the formatter
at
.Dq drive
2 on mba 1.
.Sh FILES
.Bl -tag -width /usr/mdec/xxboot -compact
.It Pa /bsd
default system kernel
.It Pa /bsd.rd
standalone installation kernel, suitable for disaster recovery
.It Pa /usr/mdec/xxboot
primary boot block, xx is disk type
.It Pa /usr/mdec/boot
secondary bootstrap (usually also installed as
.Pa /boot )
.El
.Sh SEE ALSO
.Xr disklabel 8 ,
.Xr halt 8 ,
.Xr reboot 8 ,
.Xr shutdown 8
@


1.12
log
@Remove bogus .Tn; found with mandocdb(8).
@
text
@d1 1
a1 1
.\"	$OpenBSD: boot_vax.8,v 1.11 2011/07/07 20:26:57 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: July 7 2011 $
@


1.11
log
@no Pp before/after Ss/Sh;
@
text
@d1 1
a1 1
.\"	$OpenBSD: boot_vax.8,v 1.10 2011/07/07 19:27:44 miod Exp $
d38 1
a38 3
.Nd
.Tn vax-specific
system bootstrapping procedures
@


1.10
log
@Remove no longer relevant manpages; attempt to modernize boot_vax(8) a bit
as well. Prodded by jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: boot_vax.8,v 1.9 2007/05/31 19:20:00 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate$
a47 1
.Pp
@


1.9
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: boot_vax.8,v 1.8 2007/02/06 20:07:15 jmc Exp $
a47 86
These are processor-type dependent.
On an 11/780, there are two floppy files for each disk controller,
both of which cause boots from unit 0 of the root file system
of a controller located on mba0 or uba0.
One gives a single-user shell, while the other invokes the multi-user
automatic reboot.
Thus these files are
.Tn HPS
and
.Tn HPM
for the single
and multi-user boot from
.Tn MASSBUS
RP06/RM03/RM05 disks,
.Tn UPS
and
.Tn UPM
for
.Tn UNIBUS
storage module controller and disks
such as the
.Tn EMULEX
SC-21
and
.Tn AMPEX
9300 pair,
.Tn RAS
and
.Tn RAM
to boot from
.Tn MSCP
controllers and disks such as the RA81,
or
.Tn HKS
and
.Tn HKM
for RK07 disks.
There is also a script for booting from the default device,
which is normally a copy of one of the standard multi-user boot scripts,
but which may be modified to perform other actions
or to boot from a different unit.
The situation on the 8600 is similar, with scripts loaded from the console RL02.
.Pp
Giving the command
.Pp
.Dl >>>BOOT HPM
.Pp
would boot the system from (e.g.) an RP06 and run the automatic consistency
check as described in
.Xr fsck 8 .
(Note that it may
be necessary to type control-P
and halt the processor
to gain the attention of the
.Tn LSI-11
before getting the >>> prompt.)
The command
.Pp
.Dl >>>BOOT ANY
.Pp
invokes a version of the boot program in a way which allows you to
specify any system as the system to be booted.
It reads from the console a device specification (see below) followed
immediately by a pathname.
.Pp
The scripts may be modified for local configuration if necessary.
The flags are placed in register 11 (as defined in
.Aq Pa sys/reboot.h ) .
The boot device is specified in register 10.
The encoding of this register is also defined in
.Aq Pa sys/reboot.h .
The current encoding has a historical basis, and is shown in the following
table:
.Bd -unfilled -offset indent
bits		usage
0-7		boot device type (the device major number)
8-15		disk partition
16-19	drive unit
20-23	controller number
24-27	adaptor number (UNIBUS or MASSBUS as appropriate)
.Ed
.Pp
The adaptor number corresponds to the normal configuration on the 11/750,
and to the order in which adaptors are found on the 11/780 and 8600
(generally the same as the numbers used by
.Tn UNIX ) .
d49 2
a50 61
On an 11/750, the reset button will boot from the device
selected by the front panel boot device switch.
In systems with RK07's, position B normally selects the RK07 for boot.
This will boot multi-user.
To boot from RK07 with boot flags you may specify
.Bd -unfilled -offset indent
.Li \&>>>B/ Ns Fl n No DMA0
.Ed
.Pp
where, giving an
.Ar n
of 1 causes the boot program
to ask for the name of the system to be bootstrapped,
giving an
.Ar n
of 2 causes the boot program to come up single-user,
and an
.Ar n
of 3 causes both of these actions to occur.
The
.Dq DM
specifies RK07, the
.Dq A
represents the adaptor number
.Pf ( Tn UNIBUS
or
.Tn MASSBUS ) ,
and the
.Dq 0
is the drive unit number.
Other disk types which may be used are DB
.Pq Tn MASSBUS ,
DD (TU58),
and DU
.Pf ( Tn UDA-50/RA
disk).
A non-zero disk partition can be used by adding (partition times 1000 hex)
to
.Ar n .
.Pp
The boot procedure on the Micro
.Tn VAX
II
is similar.
A switch on the back panel sets the power-up action
to autoboot or to halt.
When halted, the processor may be booted using the same syntax
as on the 11/750.
.Pp
The 11/750 boot procedure uses the boot ROMs to load block 0 off
the specified device.
The
.Pa /usr/mdec
directory contains a number
of bootstrap programs for the various disks which should be placed
in a new pack by
.Xr disklabel 8 .
Similarly, the Micro
.Tn VAX
II boot procedure loads a boot parameter block
from block 0 of the disk.
a51 8
.Em rdboot
.Dq bootstrap
contains the correct parameters for an
.Tn MSCP
disk such
as the RD53.
.Pp
On any processor, the
d73 1
a73 5
is the
.Tn UNIBUS
or
.Tn MASSBUS
number of the adaptor to which the device is attached,
a75 1
.Tn MASSBUS
d87 5
a91 13
hp	MASSBUS disk drive
up	UNIBUS storage module drive
ht	TE16,TU45,TU77 on MASSBUS
kra	storage module on a KDB50
mt	TU78 on MASSBUS
hk	RK07 on UNIBUS
ra	storage module on a MSCP-compatible UNIBUS controller
rb	storage module on a 730 IDC
rl	RL02 on UNIBUS
tm	TM11 emulation tape drives on UNIBUS
tms	TMSCP-compatible tape
ts	TS11 on UNIBUS
ut	UNIBUS TU45 emulator
d95 4
a98 5
to boot from a file system which starts at cylinder 0
of unit 0 of a
.Tn MASSBUS
disk, type
.Dq hp(0,0)bsd
d100 2
a101 21
.Dq hp(2,0,1,0)bsd
would specify drive 1 on
.Tn MASSBUS
adaptor 2;
.Dq up(0,0)bsd
would specify a
.Tn UNIBUS
drive,
.Dq hk(0,0)bsd
would specify
an RK07 disk drive,
.Dq ra(1,0,0,0)bsd
would specify a
.Tn UDA50
disk drive on a second
.Tn UNIBUS ,
and
.Dq rb(0,0)bsd
would specify a
disk on a 730
.Tn IDC .
a107 11
.Pp
On an 11/750 with patchable control store,
microcode patches will be installed by
.Nm boot
if the file
.Pa psc750.bin
exists in the root of the filesystem from which the system is booted.
.Pp
In an emergency, the bootstrap methods described in the paper
.%T Installing and Operating 4.3bsd
can be used to boot from a distribution tape.
a113 2
.It Pa /boot
system bootstrap
d115 4
a118 5
sector-0 boot block for 750, xx is disk type
.It Pa /usr/mdec/bootxx
second-stage boot for 750, xx is disk type
.It Pa /pcs750.bin
microcode patch file on 750
d121 1
a124 5
.Sh HISTORY
The
.Nm
command appeared in
.Bx 4.0 .
@


1.8
log
@fix some dodgy displays;
@
text
@d1 1
a1 1
.\"	$OpenBSD: boot_vax.8,v 1.7 2004/12/27 16:41:16 miod Exp $
d33 1
a33 1
.Dd April 19, 1994
@


1.7
log
@Mention bsd.rd in the FILES section.
@
text
@d1 1
a1 1
.\"	$OpenBSD: boot_vax.8,v 1.6 2004/02/09 19:21:52 espie Exp $
d121 1
a121 2
.Pp
.Bd -unfilled -offset indent -compact
d140 1
a140 2
.Pp
.Bd -unfilled -offset indent -compact
d244 1
a244 2
.Pp
.Bd -unfilled -offset indent -compact
@


1.6
log
@help makewhatis produce correct entries.
okay deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: boot_vax.8,v 1.5 2003/06/02 23:30:16 millert Exp $
d311 3
a313 1
system code
@


1.5
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
.\"	$OpenBSD: boot_vax.8,v 1.4 2002/07/04 17:36:17 miod Exp $
d37 1
a37 1
.Nm boot
@


1.4
log
@Fix invalid .Xr's; from PR 2804
@
text
@d1 1
a1 1
.\"	$OpenBSD: boot_vax.8,v 1.3 2001/11/13 13:54:26 mpech Exp $
d15 1
a15 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
@


1.3
log
@o) Fix bogus .Xr usage;
o) CAVEAT -> CAVEATS;
o) AUTHOR -> AUTHORS;
o) Start new sentence on a new line;
o) For URL and path names use .Pa;
o) We don't like .Pp before .Rs;
o) Don't use .Pp before/after .Sh;
o) OpenBSD -> .Ox;

millert@@ ok and help;
@
text
@d1 1
a1 1
.\"	$OpenBSD: boot_vax.8,v 1.2 2001/10/04 16:56:52 mpech Exp $
a325 1
.Xr arff 8 ,
@


1.2
log
@we don't like .Pp and blank lines before/after .Ss;

millert@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: boot_vax.8,v 1.1 2000/11/09 03:57:35 deraadt Exp $
d203 1
a203 1
.Xr rdboot
@


1.1
log
@incomplete work.  moved them, repaired some, it is a giant mess
@
text
@d1 1
a1 1
.\"	$OpenBSD: boot_vax.8,v 1.10 2000/03/18 22:56:03 aaron Exp $
a50 1
.Pp
@

