head	1.10;
access;
symbols
	OPENBSD_6_2:1.10.0.14
	OPENBSD_6_2_BASE:1.10
	OPENBSD_6_1:1.10.0.16
	OPENBSD_6_1_BASE:1.10
	OPENBSD_6_0:1.10.0.12
	OPENBSD_6_0_BASE:1.10
	OPENBSD_5_9:1.10.0.8
	OPENBSD_5_9_BASE:1.10
	OPENBSD_5_8:1.10.0.10
	OPENBSD_5_8_BASE:1.10
	OPENBSD_5_7:1.10.0.2
	OPENBSD_5_7_BASE:1.10
	OPENBSD_5_6:1.10.0.6
	OPENBSD_5_6_BASE:1.10
	OPENBSD_5_5:1.10.0.4
	OPENBSD_5_5_BASE:1.10
	OPENBSD_5_4:1.9.0.26
	OPENBSD_5_4_BASE:1.9
	OPENBSD_5_3:1.9.0.24
	OPENBSD_5_3_BASE:1.9
	OPENBSD_5_2:1.9.0.22
	OPENBSD_5_2_BASE:1.9
	OPENBSD_5_1_BASE:1.9
	OPENBSD_5_1:1.9.0.20
	OPENBSD_5_0:1.9.0.18
	OPENBSD_5_0_BASE:1.9
	OPENBSD_4_9:1.9.0.16
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.9.0.14
	OPENBSD_4_8_BASE:1.9
	OPENBSD_4_7:1.9.0.10
	OPENBSD_4_7_BASE:1.9
	OPENBSD_4_6:1.9.0.12
	OPENBSD_4_6_BASE:1.9
	OPENBSD_4_5:1.9.0.8
	OPENBSD_4_5_BASE:1.9
	OPENBSD_4_4:1.9.0.6
	OPENBSD_4_4_BASE:1.9
	OPENBSD_4_3:1.9.0.4
	OPENBSD_4_3_BASE:1.9
	OPENBSD_4_2:1.9.0.2
	OPENBSD_4_2_BASE:1.9
	OPENBSD_4_1:1.8.0.14
	OPENBSD_4_1_BASE:1.8
	OPENBSD_4_0:1.8.0.12
	OPENBSD_4_0_BASE:1.8
	OPENBSD_3_9:1.8.0.10
	OPENBSD_3_9_BASE:1.8
	OPENBSD_3_8:1.8.0.8
	OPENBSD_3_8_BASE:1.8
	OPENBSD_3_7:1.8.0.6
	OPENBSD_3_7_BASE:1.8
	OPENBSD_3_6:1.8.0.4
	OPENBSD_3_6_BASE:1.8
	OPENBSD_3_5:1.8.0.2
	OPENBSD_3_5_BASE:1.8
	OPENBSD_3_4:1.7.0.2
	OPENBSD_3_4_BASE:1.7
	OPENBSD_3_3:1.5.0.10
	OPENBSD_3_3_BASE:1.5
	OPENBSD_3_2:1.5.0.8
	OPENBSD_3_2_BASE:1.5
	OPENBSD_3_1:1.5.0.6
	OPENBSD_3_1_BASE:1.5
	OPENBSD_3_0:1.5.0.4
	OPENBSD_3_0_BASE:1.5
	OPENBSD_2_9:1.5.0.2
	OPENBSD_2_9_BASE:1.5
	OPENBSD_2_8:1.4.0.4
	OPENBSD_2_8_BASE:1.4
	OPENBSD_2_7:1.4.0.2
	OPENBSD_2_7_BASE:1.4
	OPENBSD_2_6:1.3.0.2
	OPENBSD_2_6_BASE:1.3
	OPENBSD_2_5:1.1.1.1.0.12
	OPENBSD_2_5_BASE:1.1.1.1
	OPENBSD_2_4:1.1.1.1.0.10
	OPENBSD_2_4_BASE:1.1.1.1
	OPENBSD_2_3:1.1.1.1.0.8
	OPENBSD_2_3_BASE:1.1.1.1
	OPENBSD_2_2:1.1.1.1.0.6
	OPENBSD_2_2_BASE:1.1.1.1
	OPENBSD_2_1:1.1.1.1.0.4
	OPENBSD_2_1_BASE:1.1.1.1
	OPENBSD_2_0:1.1.1.1.0.2
	OPENBSD_2_0_BASE:1.1.1.1
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@.\" @;


1.10
date	2014.02.14.17.27.58;	author schwarze;	state Exp;
branches;
next	1.9;

1.9
date	2007.05.31.19.19.59;	author jmc;	state Exp;
branches;
next	1.8;

1.8
date	2003.12.20.09.09.46;	author jmc;	state Exp;
branches;
next	1.7;

1.7
date	2003.06.06.19.28.06;	author jmc;	state Exp;
branches;
next	1.6;

1.6
date	2003.06.02.23.30.15;	author millert;	state Exp;
branches;
next	1.5;

1.5
date	2000.12.22.16.54.38;	author avsm;	state Exp;
branches;
next	1.4;

1.4
date	2000.04.15.11.45.52;	author aaron;	state Exp;
branches;
next	1.3;

1.3
date	99.05.23.14.11.23;	author aaron;	state Exp;
branches;
next	1.2;

1.2
date	99.05.12.13.26.50;	author aaron;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.44.39;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.44.39;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.10
log
@use .At where appropriate; from Jan Stary <hans at stare dot cz>
@
text
@.\"	$OpenBSD: sticky.8,v 1.9 2007/05/31 19:19:59 jmc Exp $
.\"	$NetBSD: sticky.8,v 1.3 1994/11/30 19:36:27 jtc Exp $
.\"
.\" Copyright (c) 1980, 1991, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"     @@(#)sticky.8	8.1 (Berkeley) 6/5/93
.\"
.Dd $Mdocdate: May 31 2007 $
.Dt STICKY 8
.Os
.Sh NAME
.Nm sticky
.Nd sticky text and append-only directories
.Sh DESCRIPTION
A special file mode, called the
.Em sticky bit
(mode S_ISVTX),
is used to indicate special treatment for files and directories.
See
.Xr chmod 2
or
the file
.Pa /usr/include/sys/stat.h
for an explanation of file modes.
.Sh STICKY FILES
Historically, an executable shareable file which had the sticky bit set
was not immediately discarded from swap space after execution.
The kernel hoarded the text segment of the file for future reuse,
thus avoiding having to reload the program.
This is no longer true on modern systems;
the current virtual memory system keeps track of recently used executables,
making the sticky bit for files redundant.
The sticky bit can still be set on files, but without any effect.
.Pp
Only the superuser can set the sticky bit on a file,
though the owner of the file may clear the sticky bit.
.Sh STICKY DIRECTORIES
A directory with the
.Sq sticky bit
set places restrictions on file deletion:
a file in a sticky directory may only be removed or renamed
by a user if the user has write permission for the directory and
the user is the owner of the file, the owner of the directory,
or the superuser.
This feature is usefully applied to directories such as
.Pa /tmp
which must be publicly writable but
should deny users the license to arbitrarily
delete or rename each others' files.
.Pp
Any user may create a sticky directory.
See
.Xr chmod 1
for details about modifying file modes.
.Sh HISTORY
A
.Nm
command appeared in
.At 32v .
.Sh BUGS
Neither
.Xr open 2
nor
.Xr mkdir 2
will create a file with the sticky bit set.
@


1.9
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: sticky.8,v 1.8 2003/12/20 09:09:46 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate$
d83 2
a84 1
command appeared in Version 32V AT&T UNIX.
@


1.8
log
@update sticky: note that setting the sticky bit on files is still possible,
but has no effect. Retain description of sticky files, but note that it is
historical.

Add small description of how current system works. Improve description of
sticky directories. Remove references to ld(1).

Remove no longer relevant BUG.

much assistance and ok otto@@ and tedu@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: sticky.8,v 1.7 2003/06/06 19:28:06 jmc Exp $
d33 1
a33 1
.Dd June 5, 1993
@


1.7
log
@- section reorder
- macro fixes
- kill whitespace at EOL
@
text
@d1 1
a1 1
.\"	$OpenBSD: sticky.8,v 1.6 2003/06/02 23:30:15 millert Exp $
d43 1
a43 2
is used to indicate special treatment
for shareable executable files and directories.
d50 9
a58 8
.Sh STICKY TEXT EXECUTABLE FILES
An executable shareable file whose sticky bit is set
will not be immediately discarded from swap space after execution.
The kernel will hoard the text segment of the file for future
reuse and avoid having to reload the program.
Shareable text segments are normally placed
in a least-frequently used cache after use,
and thus the `sticky bit' has little effect on commonly used text images.
d60 2
a61 10
Sharable executable files are created with the
.Fl n
and
.Fl z
options of
the loader
.Xr ld 1 .
.Pp
Only the superuser can set the sticky bit
on a sharable executable file.
d63 4
a66 4
A directory whose `sticky bit' is set
becomes an append-only directory, or, more accurately,
a directory in which the deletion of files is restricted.
A file in a sticky directory may only be removed or renamed
a84 3
Since the text areas of sticky text executables are stashed in the swap area,
abuse of the feature can cause a system to run out of swap.
.Pp
@


1.6
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
.\"	$OpenBSD: sticky.8,v 1.5 2000/12/22 16:54:38 avsm Exp $
d88 4
a100 4
.Sh HISTORY
A
.Nm
command appeared in Version 32V AT&T UNIX.
@


1.5
log
@smite typos, and add RCS tags where missing; aaron@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d15 1
a15 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
@


1.4
log
@- For consistency, `super-user' -> `superuser' in all cases.
- Some punctuation fixes.
- Some `id' -> `ID'.
@
text
@d1 1
@


1.3
log
@remove argument from .Os macros so value in /usr/share/tmac/mdoc/doc-common
is used instead; kwesterback@@home.com
@
text
@d71 1
a71 1
Only the super-user can set the sticky bit
d80 1
a80 1
or the super-user.
@


1.2
log
@grammar police: do not hyphenate compound words that act as adjectives if the
first word ends in -ly

i.e., fully-qualified, newly-created, globally-visible, etc. are wrong
@
text
@d38 1
a38 1
.Os BSD 4
@


1.1
log
@Initial revision
@
text
@d60 2
a61 2
in a least-frequently-used cache after use,
and thus the `sticky bit' has little effect on commonly-used text images.
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
