head	1.25;
access;
symbols
	OPENBSD_5_4:1.24.0.22
	OPENBSD_5_4_BASE:1.24
	OPENBSD_5_3:1.24.0.20
	OPENBSD_5_3_BASE:1.24
	OPENBSD_5_2:1.24.0.18
	OPENBSD_5_2_BASE:1.24
	OPENBSD_5_1_BASE:1.24
	OPENBSD_5_1:1.24.0.16
	OPENBSD_5_0:1.24.0.14
	OPENBSD_5_0_BASE:1.24
	OPENBSD_4_9:1.24.0.12
	OPENBSD_4_9_BASE:1.24
	OPENBSD_4_8:1.24.0.10
	OPENBSD_4_8_BASE:1.24
	OPENBSD_4_7:1.24.0.6
	OPENBSD_4_7_BASE:1.24
	OPENBSD_4_6:1.24.0.8
	OPENBSD_4_6_BASE:1.24
	OPENBSD_4_5:1.24.0.4
	OPENBSD_4_5_BASE:1.24
	OPENBSD_4_4:1.24.0.2
	OPENBSD_4_4_BASE:1.24
	OPENBSD_4_3:1.23.0.4
	OPENBSD_4_3_BASE:1.23
	OPENBSD_4_2:1.23.0.2
	OPENBSD_4_2_BASE:1.23
	OPENBSD_4_1:1.22.0.2
	OPENBSD_4_1_BASE:1.22
	OPENBSD_4_0:1.21.0.4
	OPENBSD_4_0_BASE:1.21
	OPENBSD_3_9:1.21.0.2
	OPENBSD_3_9_BASE:1.21
	OPENBSD_3_8:1.20.0.2
	OPENBSD_3_8_BASE:1.20
	OPENBSD_3_7:1.17.0.2
	OPENBSD_3_7_BASE:1.17
	OPENBSD_3_6:1.15.0.2
	OPENBSD_3_6_BASE:1.15
	OPENBSD_3_5:1.13.0.4
	OPENBSD_3_5_BASE:1.13
	OPENBSD_3_4:1.13.0.2
	OPENBSD_3_4_BASE:1.13
	OPENBSD_3_3:1.11.0.2
	OPENBSD_3_3_BASE:1.11
	OPENBSD_3_2:1.10.0.2
	OPENBSD_3_2_BASE:1.10
	OPENBSD_3_1:1.9.0.4
	OPENBSD_3_1_BASE:1.9
	OPENBSD_3_0:1.9.0.2
	OPENBSD_3_0_BASE:1.9
	OPENBSD_2_9:1.7.0.2
	OPENBSD_2_9_BASE:1.7
	OPENBSD_2_8:1.5.0.4
	OPENBSD_2_8_BASE:1.5
	OPENBSD_2_7:1.5.0.2
	OPENBSD_2_7_BASE:1.5
	OPENBSD_2_6:1.4.0.2
	OPENBSD_2_6_BASE:1.4;
locks; strict;
comment	@.\" @;


1.25
date	2013.08.08.06.43.03;	author jmc;	state dead;
branches;
next	1.24;

1.24
date	2008.06.08.03.03.37;	author jdixon;	state Exp;
branches;
next	1.23;

1.23
date	2007.05.31.19.19.59;	author jmc;	state Exp;
branches;
next	1.22;

1.22
date	2006.12.16.15.41.25;	author stevesk;	state Exp;
branches;
next	1.21;

1.21
date	2006.02.09.12.08.58;	author jaredy;	state Exp;
branches;
next	1.20;

1.20
date	2005.08.30.19.33.26;	author david;	state Exp;
branches;
next	1.19;

1.19
date	2005.08.27.06.43.13;	author deraadt;	state Exp;
branches;
next	1.18;

1.18
date	2005.08.25.16.38.02;	author henning;	state Exp;
branches;
next	1.17;

1.17
date	2004.12.23.15.19.56;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2004.11.21.22.16.55;	author henning;	state Exp;
branches;
next	1.15;

1.15
date	2004.08.15.23.06.02;	author jaredy;	state Exp;
branches;
next	1.14;

1.14
date	2004.07.06.02.44.11;	author henning;	state Exp;
branches;
next	1.13;

1.13
date	2003.06.04.19.36.33;	author deraadt;	state Exp;
branches;
next	1.12;

1.12
date	2003.05.10.21.53.04;	author jmc;	state Exp;
branches;
next	1.11;

1.11
date	2003.02.15.09.32.30;	author jmc;	state Exp;
branches;
next	1.10;

1.10
date	2002.08.29.07.34.31;	author wcobb;	state Exp;
branches;
next	1.9;

1.9
date	2001.10.05.14.45.54;	author mpech;	state Exp;
branches;
next	1.8;

1.8
date	2001.10.04.10.28.20;	author wilfried;	state Exp;
branches;
next	1.7;

1.7
date	2000.12.22.16.54.38;	author avsm;	state Exp;
branches;
next	1.6;

1.6
date	2000.11.20.08.00.04;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	2000.03.12.02.59.01;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	99.09.23.04.12.06;	author alex;	state Exp;
branches;
next	1.3;

1.3
date	99.09.20.04.44.17;	author form;	state Exp;
branches;
next	1.2;

1.2
date	99.09.01.16.48.26;	author aaron;	state Exp;
branches;
next	1.1;

1.1
date	99.07.08.13.54.36;	author aaron;	state Exp;
branches;
next	;


desc
@@


1.25
log
@no need for this file: all relevant info found in dhclient(8)
and dhcpd(8);

ok krw
@
text
@.\"     $OpenBSD: dhcp.8,v 1.24 2008/06/08 03:03:37 jdixon Exp $
.\"
.\"
.\" Copyright (c) 1999 Aaron Campbell
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\"
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.Dd $Mdocdate: June 8 2008 $
.Dt DHCP 8
.Os
.Sh NAME
.Nm dhcp
.Nd configuring
.Ox
for DHCP
.Sh DESCRIPTION
The Dynamic Host Configuration Protocol (DHCP) allows hosts on a TCP/IP network
to configure one or more network interfaces based on information collected from
a DHCP server in response to a DHCP request.
This mechanism is often used, for example, by cable modem and DSL network
providers to simplify network configurations for their clients/customers.
.Pp
Information typically contained within a DHCP response includes an IP
address for the interface, subnet mask, broadcast address, router (gateway)
listing, domain name server listing, and the interface's MTU.
.Pp
To set up
.Ox
as a DHCP client:
.Bl -enum -offset indent
.It
For each interface that is to be configured via DHCP, create a
.Pa /etc/hostname.XXX
file (where XXX is the interface's identifier, e.g., ep1) that starts with
the word
.Dq dhcp ,
optionally followed by additional interface options.
See
.Xr hostname.if 5
for more information on the format of these files.
.Pp
The
.Pa /etc/netstart
script reads each of these hostname files at boot-time and runs the
.Xr dhclient 8
program for each interface that is to be configured via DHCP.
.It
[Optional] To tweak settings, edit
.Pa /etc/dhclient.conf .
This file is shipped with the system.
See
.Xr dhclient.conf 5
and
.Xr dhclient 8
for details.
.El
.Pp
To set up
.Ox
as a DHCP server:
.Bl -enum -offset indent
.It
Edit
.Pa /etc/dhcpd.conf .
This file is shipped with the system.
See
.Xr dhcpd.conf 5
and
.Xr dhcpd 8
for details.
.It
Edit
.Pa /etc/rc.conf.local
and set
.Cm dhcpd_flags="" .
This will cause
.Ox
to start the
.Xr dhcpd 8
daemon at boot-time and listen for DHCP requests on the local network.
To start it manually, execute the following command:
.Pp
.Dl # /usr/sbin/dhcpd [netif1 netif2 ...]
.El
.Pp
The DHCP client and server use the Berkeley Packet Filter (BPF).
Ensure the kernel has been compiled with BPF support
and at least one
.Pa /dev/bpf*
file exists per broadcast network interface that is attached to the system.
This is almost always the case and should only be considered if all other
troubleshooting options have failed.
.Pp
See
.Xr dhcpd 8
for information on other available options.
Note, however, that most of the flags are useful only for debugging purposes.
.Sh FILES
.Bl -tag -width /etc/dhcpd.interfaces -compact
.It Pa /etc/dhcpd.conf
DHCP server configuration file
.It Pa /etc/rc.conf.local
configuration file where
.Cm dhcpd_flags
must be set
.It Pa /etc/dhclient.conf
DHCP client configuration file
.It Pa /etc/hostname.XXX
interface-specific configuration files
.El
.Sh SEE ALSO
.Xr dhclient.conf 5 ,
.Xr dhcpd.conf 5 ,
.Xr hostname.if 5 ,
.Xr dhclient 8 ,
.Xr dhcpd 8 ,
.Xr dhcrelay 8
@


1.24
log
@Deprecate /etc/dhcpd.interfaces.  This is made unnecessary by dhcpd_flags.

ok deraadt@@ beck@@ reyk@@ phessler@@
@
text
@d1 1
a1 1
.\"     $OpenBSD: dhcp.8,v 1.23 2007/05/31 19:19:59 jmc Exp $
d28 1
a28 1
.Dd $Mdocdate: May 31 2007 $
@


1.23
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"     $OpenBSD: dhcp.8,v 1.22 2006/12/16 15:41:25 stevesk Exp $
d28 1
a28 1
.Dd $Mdocdate$
a92 8
.Pa /etc/dhcpd.interfaces .
This file should contain a list of interfaces you wish to serve by
.Xr dhcpd 8 .
If you have only one broadcast network interface or you wish to serve all
interfaces, this step is not required.
Be sure to leave this file empty (or even delete it) if this is the case.
.It
Edit
a121 3
.It Pa /etc/dhcpd.interfaces
list of network interfaces served by
.Xr dhcpd 8
@


1.22
log
@make the section on BPF standalone and clarify it applies to client
and server; ok henning@@ help and ok jmc@@
@
text
@d1 1
a1 1
.\"     $OpenBSD: dhcp.8,v 1.21 2006/02/09 12:08:58 jaredy Exp $
d28 1
a28 1
.Dd July 8, 1999
@


1.21
log
@No longer need to touch the dhcpd.leases file before running dhcpd.

From Mike Pechkin <mike.pechkin@@gmail.com>.

OK henning, jmc
@
text
@d1 1
a1 1
.\"     $OpenBSD: dhcp.8,v 1.20 2005/08/30 19:33:26 david Exp $
d112 4
a115 2
.It
Ensure the kernel has been compiled with BPF (Berkeley Packet Filter) support
a120 1
.El
@


1.20
log
@dhcpd has no -q switch any more to behave, it just behaves
From: Matthias Kilian <kili@@outback.escape.de> via henning@@
ok deraadt@@
@
text
@d1 1
a1 1
.\"     $OpenBSD: dhcp.8,v 1.19 2005/08/27 06:43:13 deraadt Exp $
d109 1
a109 1
To start it manually, execute the following commands:
a110 1
.Dl # touch /var/db/dhcpd.leases
@


1.19
log
@backout unapproved diff
@
text
@d1 1
a1 1
.\"     $OpenBSD: dhcp.8,v 1.17 2004/12/23 15:19:56 espie Exp $
d112 1
a112 1
.Dl # /usr/sbin/dhcpd -q [netif1 netif2 ...]
@


1.18
log
@dhcpd has no -q switch any more to behave, it just behaves
From: Matthias Kilian <kili@@outback.escape.de>
@
text
@d112 1
a112 1
.Dl # /usr/sbin/dhcpd [netif1 netif2 ...]
@


1.17
log
@.Xr dhcrelay, okay henning@@
@
text
@d1 1
a1 1
.\"     $OpenBSD: dhcp.8,v 1.16 2004/11/21 22:16:55 henning Exp $
d112 1
a112 1
.Dl # /usr/sbin/dhcpd -q [netif1 netif2 ...]
@


1.16
log
@no more -q, spotted by Tom Schutter <t.schutter@@comcast.net>
@
text
@d1 1
a1 1
.\"     $OpenBSD: dhcp.8,v 1.15 2004/08/15 23:06:02 jaredy Exp $
d147 2
a148 1
.Xr dhcpd 8
@


1.15
log
@-p was removed from dhcpd

ok deraadt
@
text
@d1 1
a1 1
.\"     $OpenBSD: dhcp.8,v 1.14 2004/07/06 02:44:11 henning Exp $
d103 1
a103 1
.Cm dhcpd_flags="-q" .
@


1.14
log
@point pplz to rc.conf.local instead of rc.conf, from Bernd Ahlers <ba@@bsws.de>
jmc ok
@
text
@d1 1
a1 1
.\"     $OpenBSD: dhcp.8,v 1.13 2003/06/04 19:36:33 deraadt Exp $
d124 2
a125 4
for information on other available options; for example,
.Fl p ,
which allows specification of a port to listen on other than the default (67).
However, most of the flags are useful only for debugging purposes.
@


1.13
log
@3/4 cleanup for aaron
@
text
@d1 1
a1 1
.\"     $OpenBSD: dhcp.8,v 1.12 2003/05/10 21:53:04 jmc Exp $
d101 1
a101 1
.Pa /etc/rc.conf
d135 1
a135 1
.It Pa /etc/rc.conf
@


1.12
log
@typos;
@
text
@d1 1
a1 1
.\"     $OpenBSD: dhcp.8,v 1.11 2003/02/15 09:32:30 jmc Exp $
a15 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by Aaron Campbell.
.\" 4. The name of the author may not be used to endorse or promote products
.\"    derived from this software without specific prior written permission.
@


1.11
log
@copyrights added;

these are all (c) aaron@@
ok aaron@@
@
text
@d1 1
a1 1
.\"     $OpenBSD: dhcp.8,v 1.10 2002/08/29 07:34:31 wcobb Exp $
d52 1
a52 1
To setup
d83 1
a83 1
To setup
@


1.10
log
@- replace empty lines by .Pp where appropriate.
- no empty lines at end of file.
ok mpech@@
@
text
@d1 31
a31 1
.\"     $OpenBSD: dhcp.8,v 1.9 2001/10/05 14:45:54 mpech Exp $
@


1.9
log
@Powered by @@mantoya:
o) start new sentence on a new line;
o) minor mdoc fixes;
millert@@ ok

Tip of the day:   www.mpechismazohist.com
@
text
@d1 1
a1 1
.\"     $OpenBSD: dhcp.8,v 1.8 2001/10/04 10:28:20 wilfried Exp $
a50 1

@


1.8
log
@e.g. and i.e. cleanup
@
text
@d1 1
a1 1
.\"     $OpenBSD: dhcp.8,v 1.7 2000/12/22 16:54:38 avsm Exp $
d14 3
a16 3
a DHCP server in response to a DHCP request. This mechanism is often used, for
example, by cable modem and DSL network providers to simplify network
configurations for their clients/customers.
d32 2
a33 1
optionally followed by additional interface options. See
d61 2
a62 1
This file is shipped with the system. See
d73 2
a74 2
interfaces, this step is not required. Be sure to leave this file empty (or
even delete it) if this is the case.
d84 2
a85 2
daemon at boot-time and listen for DHCP requests on the local network. To
start it manually, execute the following commands:
@


1.7
log
@smite typos, and add RCS tags where missing; aaron@@ ok
@
text
@d1 1
a1 1
.\"     $OpenBSD$
d29 1
a29 1
file (where XXX is the interface's identifier, i.e., ep1) that starts with
@


1.6
log
@various Xr fixes; nordin@@cse.ogi.edu
@
text
@d1 2
@


1.5
log
@grammar
@
text
@d118 1
d121 1
a121 2
.Xr dhcpd 8 ,
.Xr dhcpd.conf 8
@


1.4
log
@Typo fixes.
@
text
@d98 1
a98 1
which allows specification of a port to listen on other then the default (67).
@


1.3
log
@touch /var/db/dhcp.leases -> touch /var/db/dhcpd.leases
@
text
@d27 1
a27 1
file (where XXX is the interface's indentifier, i.e., ep1) that starts with
@


1.2
log
@finally fix this man page, which was just plain wrong before
@
text
@d83 1
a83 1
.D1 # touch /var/db/dhcp.leases
@


1.1
log
@add a man page meant for helping new users configure their systems for DHCP
@
text
@d20 30
a49 6
In
.Ox ,
DHCP is handled mostly by the
.Xr dhcpd 8
daemon, which issues DHCP requests and configures the local network based on
information gleaned from the replies it receives from a DHCP server.
d51 3
a53 1
To get started, follow these steps:
d57 16
d79 6
a84 14
.Nm dhcpd
daemon at boot-time and configure any interfaces with their address family
set to
.Dq dhcp .
.It
For each interface that is to be configured via DHCP, create a
.Pa /etc/hostname.XXX
file (where XXX is the interface's identifier, i.e., ep1) that contains only
the word
.Dq dhcp .
.It
Ensure a
.Pa /etc/dhcpd.conf
file exists. This file is shipped with the system and should not be removed.
d99 1
a99 8
However, most of the flags are only useful for debugging purposes.
.Sh NOTES
In addition to
.Xr dhcpd 8 ,
the
.Xr dhclient 8
program may be used for one-time manual DHCP configurations. See its man page
for more information.
d101 6
a106 1
.Bl -tag -width /etc/hostname.XXX -compact
d111 2
d117 2
a121 1

@

