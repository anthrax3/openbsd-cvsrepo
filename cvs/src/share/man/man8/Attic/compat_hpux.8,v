head	1.11;
access;
symbols
	OPENBSD_4_7:1.10.0.10
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.10.0.12
	OPENBSD_4_6_BASE:1.10
	OPENBSD_4_5:1.10.0.8
	OPENBSD_4_5_BASE:1.10
	OPENBSD_4_4:1.10.0.6
	OPENBSD_4_4_BASE:1.10
	OPENBSD_4_3:1.10.0.4
	OPENBSD_4_3_BASE:1.10
	OPENBSD_4_2:1.10.0.2
	OPENBSD_4_2_BASE:1.10
	OPENBSD_4_1:1.9.0.4
	OPENBSD_4_1_BASE:1.9
	OPENBSD_4_0:1.9.0.2
	OPENBSD_4_0_BASE:1.9
	OPENBSD_3_9:1.8.0.4
	OPENBSD_3_9_BASE:1.8
	OPENBSD_3_8:1.8.0.2
	OPENBSD_3_8_BASE:1.8
	OPENBSD_3_7:1.6.0.8
	OPENBSD_3_7_BASE:1.6
	OPENBSD_3_6:1.6.0.6
	OPENBSD_3_6_BASE:1.6
	OPENBSD_3_5:1.6.0.4
	OPENBSD_3_5_BASE:1.6
	OPENBSD_3_4:1.6.0.2
	OPENBSD_3_4_BASE:1.6
	OPENBSD_3_3:1.4.0.2
	OPENBSD_3_3_BASE:1.4
	OPENBSD_3_2:1.2.0.2
	OPENBSD_3_2_BASE:1.2;
locks; strict;
comment	@.\" @;


1.11
date	2010.06.29.20.30.31;	author guenther;	state dead;
branches;
next	1.10;

1.10
date	2007.05.31.19.19.58;	author jmc;	state Exp;
branches;
next	1.9;

1.9
date	2006.07.10.12.21.25;	author martin;	state Exp;
branches;
next	1.8;

1.8
date	2005.03.27.06.29.16;	author jmc;	state Exp;
branches;
next	1.7;

1.7
date	2005.03.26.20.20.57;	author mickey;	state Exp;
branches;
next	1.6;

1.6
date	2003.08.23.19.26.25;	author tedu;	state Exp;
branches;
next	1.5;

1.5
date	2003.08.06.12.06.55;	author jmc;	state Exp;
branches;
next	1.4;

1.4
date	2003.03.18.13.01.36;	author david;	state Exp;
branches;
next	1.3;

1.3
date	2003.02.19.09.10.36;	author jmc;	state Exp;
branches;
next	1.2;

1.2
date	2002.05.22.08.46.05;	author mpech;	state Exp;
branches;
next	1.1;

1.1
date	2002.05.22.07.35.31;	author miod;	state Exp;
branches;
next	;


desc
@@


1.11
log
@Remove COMPAT_HPUX.  No one wanted to support it and its fewmets were
blocking other cleanups
ok miod@@
@
text
@.\"	$OpenBSD: compat_hpux.8,v 1.10 2007/05/31 19:19:58 jmc Exp $
.\"	$NetBSD: compat_hpux.8,v 1.2 2001/12/16 23:47:19 wiz Exp $
.\"     from: compat_linux.8,v 1.23 2001/10/07 10:12:05 mbw Exp
.\"
.\" Copyright (c) 1995 Frank van der Linden
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"      This product includes software developed for the NetBSD Project
.\"      by Frank van der Linden
.\" 4. The name of the author may not be used to endorse or promote products
.\"    derived from this software without specific prior written permission
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.Dd $Mdocdate: May 31 2007 $
.Dt COMPAT_HPUX 8
.Os
.Sh NAME
.Nm compat_hpux
.Nd setup for running HP-UX binaries under emulation
.Sh DESCRIPTION
.Ox
supports running HP-UX binaries.
This applies to m68k (such as hp300) and hppa systems.
Most programs should work, such as Matlab 4.2c on m68k platforms.
Programs that will not work are fairly uncommon, and often involve very low
level hardware access, such as the X11 server on hppa machines.
.Pp
The HP-UX compatibility feature is active
for kernels compiled with the
.Nm COMPAT_HPUX
and
.Nm COMPAT_M68K4K
options and the kern.emul.hpux
.Xr sysctl 8
enabled.
The
.Nm COMPAT_M68K4K
option is only required for m68k platforms.
HP-UX for m68k uses 4 KB page sizes, and
.Ox
for all m68k platforms now uses 8 KB page sizes.
.Pp
A lot of programs are dynamically linked.
This means that the HP-UX shared libraries that the programs
depend on are also needed.
Additionally, a "shadow root"
directory for HP-UX binaries on the
.Ox
system will have to be created.
This directory is named
.Pa /emul/hpux .
Any file operations done by HP-UX programs run under
.Ox
will look in this directory first.
So, if a HP-UX program opens, for example,
.Pa /etc/passwd ,
.Ox
will first try to open
.Pa /emul/hpux/etc/passwd ,
and if that does not exist open the
.Sq real
.Pa /etc/passwd
file.
It is recommended that HP-UX packages that include configuration
files, etc., be installed under
.Pa /emul/hpux ,
to avoid naming conflicts with possible
.Ox
counterparts.
Shared libraries should also be installed in the shadow tree.
.Pp
Generally, it will only be necessary to look for the shared libraries that
HP-UX binaries depend on the first few times that HP-UX programs are
installed on the
.Ox
system.
After a while, there will be a sufficient set of HP-UX shared libraries on the
system to be able to run newly imported HP-UX binaries without any extra work.
.Ss Setting up shared libraries
How to get to know which shared libraries HP-UX binaries need, and where to get
them?
Basically, there are 2 possibilities.
(When following these instructions, root privileges are required on the
.Ox
system to perform the necessary installation steps).
.Bl -enum
.It
Access to an HP-UX system:
These instructions apply to HP-UX 9.10 (the latest version of HP-UX available
for m68k-based systems), although the instructions should be similar for earlier
versions of HP-UX.
By far, the easiest method is to copy the essential files locally to the
.Ox
system.
.Pp
Use
.Xr tar 1 ,
or a similar utility, to collect the following files:
.Pp
.Bl -item -compact
.It
All files in the
.Pa /usr/lib
directory ending in
.Li ".sl" .
There should be about 46 files and two soft links.
.It
All files in the
.Pa /lib
directory ending in
.Li ".sl" .
There should be 5 files.
.El
.Pp
Copy these files to the
.Ox
system, and extract them into
.Pa /emul/hpux .
The following files should be present:
.Bd -unfilled -offset indent
/emul/hpux/lib/dld.sl
/emul/hpux/lib/libc.sl
/emul/hpux/lib/libm.sl
/emul/hpux/lib/libM.sl
/emul/hpux/lib/libcurses.sl
.Ed
.Pp
And a whole bunch of files in
.Pa /emul/hpux/usr/lib .
Overall, HP-UX 9.10 has about 10 MB of shared libraries that will need to
be copied to the
.Ox
system.
.It
Access to an HP-UX system with its entire root drive exported via NFS:
In this case, simply mount the entire HP-UX system under
.Pa /emul/hpux .
For example, on the
.Ox
system, mount it as:
.Pp
.Dl $ mount -t nfs hpux-host.test.net:/ /emul/hpux
.Pp
Note that, in this case, the HP-UX emulation will use the configuration files
from the HP-UX system
.Po
.Pa /etc/passwd ,
for example,
.Pc
and that might not be desirable.
.El
.Sh SEE ALSO
.Xr options 4 ,
.Xr config 8
.Sh BUGS
It might not be possible to run the X server on multiple framebuffers,
even though both the X server and
.Ox
support them.
@


1.10
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: compat_hpux.8,v 1.9 2006/07/10 12:21:25 martin Exp $
d34 1
a34 1
.Dd $Mdocdate$
@


1.9
log
@because of the switch to wscons it is no longer possible running the
HP-UX X-server on m68k platforms

reminded by miod@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: compat_hpux.8,v 1.8 2005/03/27 06:29:16 jmc Exp $
d34 1
a34 1
.Dd March 26, 2005
@


1.8
log
@tweaks;
@
text
@d1 1
a1 1
.\"	$OpenBSD: compat_hpux.8,v 1.7 2005/03/26 20:20:57 mickey Exp $
d44 1
a44 2
Most programs should work, such as Matlab 4.2c and the HP-UX X11R5 server
on m68k platforms.
a170 55
.El
.Ss Setting up X11R5
Although the
.Ox
based X11R5 server is the preferred way to run X, it is
possible to run the HP-UX X11R5 server instead.
To do so, a few additional files are necessary:
.Bd -unfilled -offset indent
/usr/bin/X11/X
/usr/lib/grmd
The shared libraries in /usr/lib/X11R5.
/usr/lib/Motif1.2/libXm.sl
All the subdirectories and files in /usr/lib/X11/fonts.
All the files in /usr/lib/X11/nls/Xhp.
All the files in /usr/lib/X11/extensions.
/usr/lib/X11/XHPKeymaps
/usr/lib/X11/XHPmodmap
/usr/lib/X11/XPCmodmap
/usr/lib/X11/XKeysymDB
/usr/lib/X11/Xconsoles
/usr/lib/X11/X0screens
/usr/lib/X11/X0devices
/usr/lib/X11/X0pointerkeys
/usr/lib/X11/rgb.txt
/usr/lib/X11/rgb.dir
/usr/lib/X11/rgb.pag
.Ed
.Pp
The following configuration steps will also need to be performed:
.Bl -enum
.It
Get and extract the
.Pa xbase.tgz
set for
.Ox
to provide the X11R6 clients which are going to be used with the new X server.
.It
Create the following directory for the X server to deposit its socket files
in:
.Pp
.Dl $ mkdir -p /usr/spool/sockets/X11
.Dl $ chmod 777 /usr/spool/sockets/X11
.It
Add the following lines to
.Pa /etc/rc.local
to create the necessary directories for the X server to deposit its files in,
when the system boots:
.Pp
.Dl $ mkdir /tmp/.X11-unix
.Dl $ chmod 777 /tmp/.X11-unix
.Dl $ ln -s /usr/spool/sockets/X11/0 /tmp/.X11-unix/X0
.It
It's also possible to link the X server to a more convenient location, such as:
.Pp
.Dl $ ln -s /emul/hpux/usr/bin/X /usr/X11R6/bin/X
@


1.7
log
@some minimalistic hppa/hpux additions
@
text
@d1 1
a1 1
.\"	$OpenBSD: compat_hpux.8,v 1.6 2003/08/23 19:26:25 tedu Exp $
d47 1
a47 1
level hardware access and that includes X11 server on hppa machines.
d57 1
@


1.6
log
@document necessity for sysctl to enable compat code. ok deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: compat_hpux.8,v 1.5 2003/08/06 12:06:55 jmc Exp $
d34 1
a34 1
.Dd November 29, 2001
d43 3
a45 2
This applies only to m68k systems (such as hp300 systems).
Most programs should work, such as Matlab 4.2c and the HP-UX X11R5 server.
d47 1
a47 1
level hardware access.
d57 2
@


1.5
log
@- remove old groff macros
- tidy up lists/displays
- indent for readability
@
text
@d1 1
a1 1
.\"	$OpenBSD: compat_hpux.8,v 1.4 2003/03/18 13:01:36 david Exp $
d53 3
a55 1
options enabled.
@


1.4
log
@newsentence, newline
ok miod@@ jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: compat_hpux.8,v 1.3 2003/02/19 09:10:36 jmc Exp $
d135 7
a141 13
.Pp
.Bl -item -compact
.It
.Pa /emul/hpux/lib/dld.sl
.It
.Pa /emul/hpux/lib/libc.sl
.It
.Pa /emul/hpux/lib/libm.sl
.It
.Pa /emul/hpux/lib/libM.sl
.It
.Pa /emul/hpux/lib/libcurses.sl
.It
a144 1
.El
d173 20
a192 43
.Pp
.Bl -item -compact
.It
.Pa /usr/bin/X11/X
.It
.Pa /usr/lib/grmd
.It
The shared libraries in
.Pa /usr/lib/X11R5 .
.It
.Pa /usr/lib/Motif1.2/libXm.sl
.It
All the subdirectories and files in
.Pa /usr/lib/X11/fonts .
.It
All the files in
.Pa /usr/lib/X11/nls/Xhp .
.It
All the files in
.Pa /usr/lib/X11/extensions .
.It
.Pa /usr/lib/X11/XHPKeymaps
.It
.Pa /usr/lib/X11/XHPmodmap
.It
.Pa /usr/lib/X11/XPCmodmap
.It
.Pa /usr/lib/X11/XKeysymDB
.It
.Pa /usr/lib/X11/Xconsoles
.It
.Pa /usr/lib/X11/X0screens
.It
.Pa /usr/lib/X11/X0devices
.It
.Pa /usr/lib/X11/X0pointerkeys
.It
.Pa /usr/lib/X11/rgb.txt
.It
.Pa /usr/lib/X11/rgb.dir
.It
.Pa /usr/lib/X11/rgb.pag
.El
@


1.3
log
@changes to compat:

* extensive use of .Pa for paths
* .Nm for kernel options
* `procedure' chopped from .Nd
* 2nd person -> passive
* updated instructions on getting freebsd/linux binaries
* various typos

thanks millert@@ and Grzegorz Czaplinski for help with FreeBSD stuff
prompts and ok deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: compat_hpux.8,v 1.2 2002/05/22 08:46:05 mpech Exp $
d97 2
a98 2
Basically, there are 2 possibilities. (When following these instructions, root
privileges are required on the
@


1.2
log
@Small fix: - Start new sentence on a new line.

miod@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: compat_hpux.8,v 1.1 2002/05/22 07:35:31 miod Exp $
d39 1
a39 1
.Nd setup procedure for running HP-UX binaries
d50 1
a50 1
.Dv COMPAT_HPUX
d52 1
a52 1
.Dv COMPAT_M68K4K
d56 1
a56 1
for all m68k platforms now use 8 KB page sizes.
d59 4
a62 5
This means that you will need the HP-UX shared libraries that the program
depends on.
Also, you will need to create a
.Dq shadow root
directory for HP-UX binaries on your
d64 1
a64 1
system.
d79 2
a80 2
It is recommended that you install hpux packages that include configuration
files, etc, under
d87 3
a89 3
Generally, you will need to look for the shared libraries that HP-UX
binaries depend on only the first few times that you install a HP-UX
program on your
d92 1
a92 1
After a while, you will have a sufficient set of HP-UX shared libraries on your
d97 2
a98 2
Basically, there are 2 possibilities (when following these instructions: you
will need to be root on your
d100 1
a100 1
system to do the necessary installation steps).
d103 1
a103 1
You must have login access to an HP-UX system.
d107 1
a107 1
By far, the easiest method is to copy the essential files locally to your
d111 4
a114 1
Use tar, or a similar utility to collect the following files:
d130 1
a130 1
Now, you need to copy these files to your
d133 3
a135 2
.Pa /emul/hpux ,
for example, you should end up with the following files:
d148 1
d152 4
a155 2
Overall, HP-UX 9.10 has about 10 MB of shared libraries that you will have
ended up copying to your system.
d157 2
a158 2
You have access to an HP-UX system with its entire root drive exported via NFS.
In this case, you simply mount the entire HP-UX system under
d160 1
a160 1
For example, on your
d162 4
a165 2
system, you might mount it as:
.Dl mount -t nfs hpux-host.test.net:/ /emul/hpux
d168 5
a172 2
.Pq Pa /etc/passwd , for example
and this might not be what you want.
d177 4
a180 3
based X11R5 server is the preferred way to run X on your system, you might
want to run the HP-UX X11R5 server instead.
To do so, you will need to grab a few additional files:
d188 1
a188 1
.Pa /usr/lib/X11R5
d193 1
a193 1
.Pa /usr/lib/X11/fonts
d196 1
a196 1
.Pa /usr/lib/X11/nls/Xhp
d199 1
a199 1
.Pa /usr/lib/X11/extensions
d224 1
a224 1
You'll also need to perform a few configuration steps:
d229 1
a229 1
set for your version of
d231 1
a231 1
to provide the X11R6 clients you'll be using with your new X server.
d235 3
a237 2
.Dl mkdir -p /usr/spool/sockets/X11
.Dl chmod 777 /usr/spool/sockets/X11
d239 1
a239 1
Add the following lines to your
d242 5
a246 4
when your system boots:
.Dl mkdir /tmp/.X11-unix
.Dl chmod 777 /tmp/.X11-unix
.Dl ln -s /usr/spool/sockets/X11/0 /tmp/.X11-unix/X0
d248 3
a250 2
You may also want to link your X server to a more convenient location, such as:
.Dl ln -s /emul/hpux/usr/bin/X /usr/X11R6/bin/X
d256 2
a257 2
You may not be able to run the X server on multiple framebuffers, even though
both the X server and
@


1.1
log
@Add a compat_hpux(8) manual page, from NetBSD with corrections.
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d70 2
a71 1
will look in this directory first. So, if a HP-UX program opens, for example,
@

