head	1.158;
access;
symbols
	OPENBSD_6_1:1.158.0.2
	OPENBSD_6_1_BASE:1.158
	OPENBSD_6_0:1.154.0.2
	OPENBSD_6_0_BASE:1.154
	OPENBSD_5_9:1.153.0.2
	OPENBSD_5_9_BASE:1.153
	OPENBSD_5_8:1.147.0.4
	OPENBSD_5_8_BASE:1.147
	OPENBSD_5_7:1.146.0.2
	OPENBSD_5_7_BASE:1.146
	OPENBSD_5_6:1.145.0.4
	OPENBSD_5_6_BASE:1.145
	OPENBSD_5_5:1.142.0.4
	OPENBSD_5_5_BASE:1.142
	OPENBSD_5_4:1.141.0.2
	OPENBSD_5_4_BASE:1.141
	OPENBSD_5_3:1.140.0.2
	OPENBSD_5_3_BASE:1.140
	OPENBSD_5_2:1.136.0.2
	OPENBSD_5_2_BASE:1.136
	OPENBSD_5_1_BASE:1.135
	OPENBSD_5_1:1.135.0.4
	OPENBSD_5_0:1.135.0.2
	OPENBSD_5_0_BASE:1.135
	OPENBSD_4_9:1.133.0.2
	OPENBSD_4_9_BASE:1.133
	OPENBSD_4_8:1.127.0.4
	OPENBSD_4_8_BASE:1.127
	OPENBSD_4_7:1.127.0.2
	OPENBSD_4_7_BASE:1.127
	OPENBSD_4_6:1.124.0.4
	OPENBSD_4_6_BASE:1.124
	OPENBSD_4_5:1.120.0.6
	OPENBSD_4_5_BASE:1.120
	OPENBSD_4_4:1.120.0.4
	OPENBSD_4_4_BASE:1.120
	OPENBSD_4_3:1.120.0.2
	OPENBSD_4_3_BASE:1.120
	OPENBSD_4_2:1.119.0.2
	OPENBSD_4_2_BASE:1.119
	OPENBSD_4_1:1.113.0.4
	OPENBSD_4_1_BASE:1.113
	OPENBSD_4_0:1.113.0.2
	OPENBSD_4_0_BASE:1.113
	OPENBSD_3_9:1.112.0.2
	OPENBSD_3_9_BASE:1.112
	OPENBSD_3_8:1.110.0.2
	OPENBSD_3_8_BASE:1.110
	OPENBSD_3_7:1.106.0.2
	OPENBSD_3_7_BASE:1.106
	OPENBSD_3_6:1.99.0.2
	OPENBSD_3_6_BASE:1.99
	OPENBSD_3_5:1.88.0.2
	OPENBSD_3_5_BASE:1.88
	OPENBSD_3_4:1.86.0.2
	OPENBSD_3_4_BASE:1.86
	OPENBSD_3_3:1.78.0.2
	OPENBSD_3_3_BASE:1.78
	OPENBSD_3_2:1.75.0.2
	OPENBSD_3_2_BASE:1.75
	OPENBSD_3_1:1.72.0.2
	OPENBSD_3_1_BASE:1.72
	OPENBSD_3_0:1.66.0.2
	OPENBSD_3_0_BASE:1.66
	OPENBSD_2_9:1.61.0.2
	OPENBSD_2_9_BASE:1.61
	OPENBSD_2_8:1.57.0.2
	OPENBSD_2_8_BASE:1.57
	OPENBSD_2_7:1.45.0.2
	OPENBSD_2_7_BASE:1.45
	OPENBSD_2_6:1.25.0.2
	OPENBSD_2_6_BASE:1.25
	OPENBSD_2_5:1.14.0.2
	OPENBSD_2_5_BASE:1.14
	OPENBSD_2_4:1.12.0.2
	OPENBSD_2_4_BASE:1.12
	OPENBSD_2_3:1.7.0.2
	OPENBSD_2_3_BASE:1.7
	OPENBSD_2_2:1.1.0.2
	OPENBSD_2_2_BASE:1.1;
locks; strict;
comment	@# @;


1.158
date	2017.03.01.17.08.01;	author jmc;	state Exp;
branches;
next	1.157;
commitid	YUHMT39I1oRCp83P;

1.157
date	2016.09.05.12.58.17;	author jmc;	state Exp;
branches;
next	1.156;
commitid	lU2HmDLaVz3pdCg9;

1.156
date	2016.09.02.12.17.33;	author tb;	state Exp;
branches;
next	1.155;
commitid	Z6hUPnAcS0GtAGum;

1.155
date	2016.08.01.18.20.19;	author jmc;	state Exp;
branches;
next	1.154;
commitid	9ibsLi0vFTzBVL7g;

1.154
date	2016.06.09.09.33.17;	author stsp;	state Exp;
branches;
next	1.153;
commitid	131ePtCOPCvZNbeF;

1.153
date	2015.12.08.13.36.05;	author tedu;	state Exp;
branches;
next	1.152;
commitid	AYShDEy58RMqU4t1;

1.152
date	2015.11.20.18.43.25;	author mmcc;	state Exp;
branches;
next	1.151;
commitid	hUf49gaaG1kkC3Js;

1.151
date	2015.11.20.15.51.26;	author deraadt;	state Exp;
branches;
next	1.150;
commitid	2QKDjjcfeyYlHxt9;

1.150
date	2015.09.30.14.40.52;	author sobrado;	state Exp;
branches;
next	1.149;
commitid	BqnxTIL2TBrMT1KB;

1.149
date	2015.09.24.15.07.55;	author jmc;	state Exp;
branches;
next	1.148;
commitid	UEZRCryq6Hl7EIhs;

1.148
date	2015.09.21.09.23.35;	author jmc;	state Exp;
branches;
next	1.147;
commitid	nA9bz3w8ki0Cdhlp;

1.147
date	2015.07.30.08.03.49;	author jmc;	state Exp;
branches;
next	1.146;
commitid	jvvdSOl8gxNBg4aJ;

1.146
date	2014.12.07.23.05.30;	author schwarze;	state Exp;
branches;
next	1.145;
commitid	KLKbizTylFdntt6U;

1.145
date	2014.04.29.13.48.18;	author jmc;	state Exp;
branches;
next	1.144;

1.144
date	2014.04.22.14.15.55;	author jmc;	state Exp;
branches;
next	1.143;

1.143
date	2014.04.22.11.15.05;	author henning;	state Exp;
branches;
next	1.142;

1.142
date	2014.01.22.01.29.33;	author juanfra;	state Exp;
branches;
next	1.141;

1.141
date	2013.07.14.19.44.39;	author jmc;	state Exp;
branches;
next	1.140;

1.140
date	2012.10.30.18.39.44;	author krw;	state Exp;
branches;
next	1.139;

1.139
date	2012.08.18.16.25.20;	author jmc;	state Exp;
branches;
next	1.138;

1.138
date	2012.08.15.19.07.30;	author jmc;	state Exp;
branches;
next	1.137;

1.137
date	2012.08.15.18.04.23;	author jmc;	state Exp;
branches;
next	1.136;

1.136
date	2012.03.01.04.38.10;	author lum;	state Exp;
branches;
next	1.135;

1.135
date	2011.06.11.17.52.00;	author lum;	state Exp;
branches;
next	1.134;

1.134
date	2011.04.17.19.32.06;	author deraadt;	state Exp;
branches;
next	1.133;

1.133
date	2011.02.16.22.35.08;	author schwarze;	state Exp;
branches;
next	1.132;

1.132
date	2011.01.30.15.37.17;	author schwarze;	state Exp;
branches;
next	1.131;

1.131
date	2011.01.29.08.49.17;	author lum;	state Exp;
branches;
next	1.130;

1.130
date	2011.01.21.12.20.04;	author lum;	state Exp;
branches;
next	1.129;

1.129
date	2011.01.21.08.17.50;	author lum;	state Exp;
branches;
next	1.128;

1.128
date	2010.10.18.14.42.16;	author jmc;	state Exp;
branches;
next	1.127;

1.127
date	2010.02.25.01.14.04;	author schwarze;	state Exp;
branches;
next	1.126;

1.126
date	2010.01.02.20.09.54;	author schwarze;	state Exp;
branches;
next	1.125;

1.125
date	2009.10.22.12.44.36;	author schwarze;	state Exp;
branches;
next	1.124;

1.124
date	2009.05.09.16.29.55;	author schwarze;	state Exp;
branches;
next	1.123;

1.123
date	2009.05.09.14.21.24;	author schwarze;	state Exp;
branches;
next	1.122;

1.122
date	2009.05.06.01.33.14;	author deraadt;	state Exp;
branches;
next	1.121;

1.121
date	2009.03.05.08.27.03;	author ajacoutot;	state Exp;
branches;
next	1.120;

1.120
date	2007.11.30.09.49.20;	author jmc;	state Exp;
branches;
next	1.119;

1.119
date	2007.05.31.19.19.58;	author jmc;	state Exp;
branches;
next	1.118;

1.118
date	2007.05.29.15.40.13;	author sobrado;	state Exp;
branches;
next	1.117;

1.117
date	2007.04.08.16.32.30;	author jmc;	state Exp;
branches;
next	1.116;

1.116
date	2007.03.21.22.11.54;	author jmc;	state Exp;
branches;
next	1.115;

1.115
date	2007.03.20.20.55.22;	author jmc;	state Exp;
branches;
next	1.114;

1.114
date	2007.03.20.20.51.08;	author jmc;	state Exp;
branches;
next	1.113;

1.113
date	2006.05.19.13.13.52;	author jmc;	state Exp;
branches;
next	1.112;

1.112
date	2005.11.28.19.43.00;	author jmc;	state Exp;
branches;
next	1.111;

1.111
date	2005.10.31.19.37.52;	author jmc;	state Exp;
branches;
next	1.110;

1.110
date	2005.07.14.21.12.17;	author jmc;	state Exp;
branches;
next	1.109;

1.109
date	2005.06.01.10.23.29;	author jmc;	state Exp;
branches;
next	1.108;

1.108
date	2005.04.23.08.59.16;	author jmc;	state Exp;
branches;
next	1.107;

1.107
date	2005.04.05.21.18.39;	author jmc;	state Exp;
branches;
next	1.106;

1.106
date	2005.03.02.16.08.47;	author jmc;	state Exp;
branches;
next	1.105;

1.105
date	2005.03.02.14.53.07;	author jmc;	state Exp;
branches;
next	1.104;

1.104
date	2005.03.02.11.59.18;	author jmc;	state Exp;
branches;
next	1.103;

1.103
date	2005.02.18.08.58.56;	author jmc;	state Exp;
branches;
next	1.102;

1.102
date	2005.02.17.14.47.36;	author espie;	state Exp;
branches;
next	1.101;

1.101
date	2004.12.13.14.00.07;	author jmc;	state Exp;
branches;
next	1.100;

1.100
date	2004.12.01.16.25.20;	author jmc;	state Exp;
branches;
next	1.99;

1.99
date	2004.09.09.10.23.43;	author jmc;	state Exp;
branches;
next	1.98;

1.98
date	2004.08.14.17.37.27;	author david;	state Exp;
branches;
next	1.97;

1.97
date	2004.07.23.17.27.40;	author jaredy;	state Exp;
branches;
next	1.96;

1.96
date	2004.07.21.13.48.25;	author jaredy;	state Exp;
branches;
next	1.95;

1.95
date	2004.07.09.19.01.45;	author jmc;	state Exp;
branches;
next	1.94;

1.94
date	2004.07.08.11.02.03;	author jmc;	state Exp;
branches;
next	1.93;

1.93
date	2004.07.08.10.56.22;	author jmc;	state Exp;
branches;
next	1.92;

1.92
date	2004.07.07.06.01.02;	author henning;	state Exp;
branches;
next	1.91;

1.91
date	2004.06.04.14.03.06;	author jmc;	state Exp;
branches;
next	1.90;

1.90
date	2004.05.25.22.27.43;	author jmc;	state Exp;
branches;
next	1.89;

1.89
date	2004.04.20.06.39.04;	author tedu;	state Exp;
branches;
next	1.88;

1.88
date	2003.12.05.23.55.07;	author jmc;	state Exp;
branches;
next	1.87;

1.87
date	2003.11.06.12.22.10;	author jmc;	state Exp;
branches;
next	1.86;

1.86
date	2003.08.08.09.51.54;	author jmc;	state Exp;
branches;
next	1.85;

1.85
date	2003.07.25.09.36.20;	author jmc;	state Exp;
branches;
next	1.84;

1.84
date	2003.07.10.04.24.07;	author jmc;	state Exp;
branches;
next	1.83;

1.83
date	2003.07.08.12.02.35;	author espie;	state Exp;
branches;
next	1.82;

1.82
date	2003.06.27.11.00.39;	author henning;	state Exp;
branches;
next	1.81;

1.81
date	2003.05.10.06.33.38;	author jmc;	state Exp;
branches;
next	1.80;

1.80
date	2003.04.14.06.51.48;	author jmc;	state Exp;
branches;
next	1.79;

1.79
date	2003.04.13.11.41.10;	author jmc;	state Exp;
branches;
next	1.78;

1.78
date	2003.03.15.23.10.32;	author avsm;	state Exp;
branches;
next	1.77;

1.77
date	2003.02.15.09.44.42;	author jmc;	state Exp;
branches;
next	1.76;

1.76
date	2003.01.29.16.53.36;	author jmc;	state Exp;
branches;
next	1.75;

1.75
date	2002.10.02.17.38.38;	author miod;	state Exp;
branches;
next	1.74;

1.74
date	2002.09.26.07.26.19;	author deraadt;	state Exp;
branches;
next	1.73;

1.73
date	2002.08.22.20.28.01;	author stevesk;	state Exp;
branches;
next	1.72;

1.72
date	2002.02.22.02.02.33;	author miod;	state Exp;
branches;
next	1.71;

1.71
date	2002.02.19.01.19.02;	author deraadt;	state Exp;
branches;
next	1.70;

1.70
date	2002.02.18.00.09.59;	author millert;	state Exp;
branches;
next	1.69;

1.69
date	2002.02.14.13.14.20;	author deraadt;	state Exp;
branches;
next	1.68;

1.68
date	2002.02.10.01.07.05;	author deraadt;	state Exp;
branches;
next	1.67;

1.67
date	2001.10.30.01.03.19;	author miod;	state Exp;
branches;
next	1.66;

1.66
date	2001.10.14.17.24.19;	author millert;	state Exp;
branches;
next	1.65;

1.65
date	2001.10.14.02.14.13;	author millert;	state Exp;
branches;
next	1.64;

1.64
date	2001.10.05.14.45.54;	author mpech;	state Exp;
branches;
next	1.63;

1.63
date	2001.10.04.16.56.52;	author mpech;	state Exp;
branches;
next	1.62;

1.62
date	2001.08.25.14.57.44;	author aaron;	state Exp;
branches;
next	1.61;

1.61
date	2001.03.11.05.56.43;	author aaron;	state Exp;
branches;
next	1.60;

1.60
date	2001.03.06.19.56.52;	author brad;	state Exp;
branches;
next	1.59;

1.59
date	2001.03.01.16.11.23;	author aaron;	state Exp;
branches;
next	1.58;

1.58
date	2000.11.20.08.00.04;	author deraadt;	state Exp;
branches;
next	1.57;

1.57
date	2000.10.30.18.22.31;	author deraadt;	state Exp;
branches;
next	1.56;

1.56
date	2000.10.30.18.21.37;	author espie;	state Exp;
branches;
next	1.55;

1.55
date	2000.10.26.22.23.45;	author deraadt;	state Exp;
branches;
next	1.54;

1.54
date	2000.10.26.00.23.33;	author deraadt;	state Exp;
branches;
next	1.53;

1.53
date	2000.10.20.23.27.21;	author obecian;	state Exp;
branches;
next	1.52;

1.52
date	2000.10.18.16.38.27;	author aaron;	state Exp;
branches;
next	1.51;

1.51
date	2000.10.18.16.34.02;	author deraadt;	state Exp;
branches;
next	1.50;

1.50
date	2000.10.13.04.09.22;	author aaron;	state Exp;
branches;
next	1.49;

1.49
date	2000.10.06.18.18.39;	author aaron;	state Exp;
branches;
next	1.48;

1.48
date	2000.07.18.01.27.41;	author deraadt;	state Exp;
branches;
next	1.47;

1.47
date	2000.06.17.15.19.01;	author deraadt;	state Exp;
branches;
next	1.46;

1.46
date	2000.06.11.21.03.40;	author millert;	state Exp;
branches;
next	1.45;

1.45
date	2000.04.28.00.54.29;	author itojun;	state Exp;
branches;
next	1.44;

1.44
date	2000.04.27.19.44.17;	author millert;	state Exp;
branches;
next	1.43;

1.43
date	2000.04.24.04.34.31;	author todd;	state Exp;
branches;
next	1.42;

1.42
date	2000.04.18.17.27.17;	author kjell;	state Exp;
branches;
next	1.41;

1.41
date	2000.04.18.16.57.14;	author kjell;	state Exp;
branches;
next	1.40;

1.40
date	2000.04.18.15.14.36;	author millert;	state Exp;
branches;
next	1.39;

1.39
date	2000.04.16.20.19.45;	author deraadt;	state Exp;
branches;
next	1.38;

1.38
date	2000.04.16.17.56.57;	author aaron;	state Exp;
branches;
next	1.37;

1.37
date	2000.04.16.17.51.52;	author aaron;	state Exp;
branches;
next	1.36;

1.36
date	2000.04.16.16.00.45;	author todd;	state Exp;
branches;
next	1.35;

1.35
date	2000.04.03.19.47.24;	author deraadt;	state Exp;
branches;
next	1.34;

1.34
date	2000.03.27.22.40.08;	author aaron;	state Exp;
branches;
next	1.33;

1.33
date	2000.03.06.21.46.56;	author aaron;	state Exp;
branches;
next	1.32;

1.32
date	2000.03.04.17.54.06;	author louis;	state Exp;
branches;
next	1.31;

1.31
date	2000.03.04.17.41.36;	author louis;	state Exp;
branches;
next	1.30;

1.30
date	2000.03.01.02.46.48;	author deraadt;	state Exp;
branches;
next	1.29;

1.29
date	2000.03.01.02.35.38;	author ericj;	state Exp;
branches;
next	1.28;

1.28
date	2000.01.05.08.09.35;	author chris;	state Exp;
branches;
next	1.27;

1.27
date	99.10.26.22.55.19;	author deraadt;	state Exp;
branches;
next	1.26;

1.26
date	99.10.25.19.34.43;	author deraadt;	state Exp;
branches;
next	1.25;

1.25
date	99.10.18.06.43.19;	author provos;	state Exp;
branches;
next	1.24;

1.24
date	99.10.18.06.37.09;	author provos;	state Exp;
branches;
next	1.23;

1.23
date	99.10.18.06.25.13;	author provos;	state Exp;
branches;
next	1.22;

1.22
date	99.10.16.23.50.02;	author deraadt;	state Exp;
branches;
next	1.21;

1.21
date	99.10.14.19.31.14;	author beck;	state Exp;
branches;
next	1.20;

1.20
date	99.09.02.15.59.39;	author aaron;	state Exp;
branches;
next	1.19;

1.19
date	99.07.09.13.35.36;	author aaron;	state Exp;
branches;
next	1.18;

1.18
date	99.07.08.18.42.52;	author deraadt;	state Exp;
branches;
next	1.17;

1.17
date	99.07.08.14.00.59;	author aaron;	state Exp;
branches;
next	1.16;

1.16
date	99.06.18.22.28.22;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	99.05.23.14.11.23;	author aaron;	state Exp;
branches;
next	1.14;

1.14
date	98.11.25.03.30.55;	author aaron;	state Exp;
branches;
next	1.13;

1.13
date	98.11.03.03.53.02;	author aaron;	state Exp;
branches;
next	1.12;

1.12
date	98.09.21.14.14.03;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	98.09.07.16.44.37;	author aaron;	state Exp;
branches;
next	1.10;

1.10
date	98.06.29.05.10.58;	author angelos;	state Exp;
branches;
next	1.9;

1.9
date	98.06.12.12.01.53;	author d;	state Exp;
branches;
next	1.8;

1.8
date	98.05.19.17.03.33;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	97.11.30.08.20.07;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	97.11.18.18.03.11;	author provos;	state Exp;
branches;
next	1.5;

1.5
date	97.11.12.07.50.11;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	97.11.12.07.47.06;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	97.11.12.07.39.49;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	97.11.12.07.38.43;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	97.10.20.20.18.36;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.158
log
@xdm -> xenodm; from jan stary
@
text
@.\"	$OpenBSD: afterboot.8,v 1.157 2016/09/05 12:58:17 jmc Exp $
.\"
.\" Copyright (c) 1997 Marshall M. Midden
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\"
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by Marshall M. Midden.
.\" 4. The name of the author may not be used to endorse or promote products
.\"    derived from this software without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.Dd $Mdocdate: September 5 2016 $
.Dt AFTERBOOT 8
.\" Originally created by Marshall M. Midden -- 1997-10-20, m4@@umn.edu
.Os
.Sh NAME
.Nm afterboot
.Nd things to check after the first complete boot
.Sh DESCRIPTION
.Ss Starting out
This document attempts to list items for the system administrator
to check and set up after the installation and first complete boot of the
system.
The idea is to create a list of items that can be checked off so that you have
a warm fuzzy feeling that something obvious has not been missed.
A basic knowledge of
.Ux
is assumed, otherwise type:
.Pp
.Dl $ help
.Pp
Complete instructions for correcting and fixing items is not provided.
There are manual pages and other methodologies available for doing that.
For example, to view the man page for the
.Xr ls 1
command, type:
.Pp
.Dl $ man 1 ls
.Pp
Administrators will rapidly become more familiar with
.Ox
if they get used to using the high quality manual pages.
.Ss Errata
By the time that you have installed your system, it is quite likely that
bugs in the release have been found.
Any security or reliability fixes can be found at
.Lk https://www.openbsd.org/errata.html .
It is recommended to check this page regularly.
.Ss Login
Log in on the console, or over the network using
.Xr ssh 1 .
For security reasons, it is bad practice to log in as root during regular use
and maintenance of the system.
Instead, administrators are encouraged to add a
.Dq regular
user, add said user to the
.Dq wheel
group, then use the
.Xr su 1
and
.Xr doas 1
commands when root privileges are required.
.Pp
The installation process provides an option to set up a user account.
By default, accounts created via this method are automatically added to
the
.Dq wheel
group.
If that option was not used, see the paragraph
.Sx Add new users
below.
.Pp
To deny root logins over the network, edit the
.Pa /etc/ssh/sshd_config
file and set
.Cm PermitRootLogin
to
.Dq no
(see
.Xr sshd_config 5 ) .
.Ss Root password
Change the password for the root user.
(Note that throughout the documentation, the term
.Dq superuser
is a synonym for the root user.)
Choose a password that has digits and special characters
as well as from the upper and lower case alphabet.
Do not choose any word in any language.
It is common for an intruder to use dictionary attacks.
Type the following command to change it:
.Pp
.Dl $ doas passwd root
.Pp
To avoid the possibility of rogue files placed in
the superuser's
.Ev PATH ,
it should never contain the current directory
.Pq Dq \&. .
.Ss System date
.Xr ntpd 8
is used to automatically synchronize clocks with remote NTP servers.
You can use
.Xr ntpctl 8
to check the status.
To change the NTP server see
.Xr ntpd.conf 5 .
.Pp
Check the system date with the
.Xr date 1
command.
If needed, change the date, and/or change the symbolic link of
.Pa /etc/localtime
to the correct time zone in the
.Pa /usr/share/zoneinfo
directory.
.Pp
Examples:
.Pp
Set the current date to January 27th, 2016 3:04pm:
.Dl # date 201601271504
.Pp
Set the time zone to Atlantic Standard Time:
.Dl # ln -fs /usr/share/zoneinfo/Canada/Atlantic /etc/localtime
.Ss Check hostname
Use the
.Ic hostname
command to verify that the name of your machine is correct.
See the man page for
.Xr hostname 1
if it needs to be changed.
You will also need to edit the
.Pa /etc/myname
file to have it stick around for the next reboot.
.Ss Verify network interface configuration
The first thing to do is an
.Ic ifconfig -a
to see if the network interfaces are properly configured.
Correct by editing
.Pa /etc/hostname. Ns Ar interface
(where
.Ar interface
is the interface name, e.g.,
.Dq em0 )
and then using
.Xr ifconfig 8
to manually configure it
if you do not wish to reboot.
Read the
.Xr hostname.if 5
man page for more information on the format of
.Pa /etc/hostname. Ns Ar interface
files.
The loopback interface will look something like:
.Bd -literal -offset indent
lo0: flags=8009<UP,LOOPBACK,MULTICAST> mtu 32972
	inet6 fe80::1%lo0 prefixlen 64 scopeid 0x3
	inet6 ::1 prefixlen 128
	inet 127.0.0.1 netmask 0xff000000
.Ed
.Pp
an Ethernet interface something like:
.Bd -literal -offset indent
em0: flags=9863<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST>
	inet 192.168.4.52 netmask 0xffffff00 broadcast 192.168.4.255
	inet6 fe80::5ef0:f0f0%em0 prefixlen 64 scopeid 0x1
.Ed
.Pp
and a PPP interface something like:
.Bd -literal -offset indent
ppp0: flags=8051<UP,POINTOPOINT,RUNNING,MULTICAST>
        inet 203.3.131.108 --> 198.181.0.253 netmask 0xffff0000
.Ed
.Pp
See
.Xr netstart 8
for instructions on configuring multicast routing.
.Pp
See
.Xr hostname.if 5
for instructions on configuring interfaces with DHCP.
.Ss Check routing tables
Issue a
.Ic netstat -rn
command.
The output will look something like:
.Bd -literal -offset indent
Routing tables

Internet:
Destination    Gateway           Flags  Refs     Use  Mtu  Interface
default        192.168.4.254     UGS      0 11098028    -  em0
127            127.0.0.1         UGRS     0        0    -  lo0
127.0.0.1      127.0.0.1         UH       3       24    -  lo0
192.168.4      link#1            UC       0        0    -  em0
192.168.4.52   8:0:20:73:b8:4a   UHL      1     6707    -  em0
192.168.4.254  0:60:3e:99:67:ea  UHL      1        0    -  em0

Internet6:
Destination        Gateway       Flags  Refs  Use     Mtu  Interface
::/96              ::1           UGRS     0     0   32972  lo0 =>
::1                ::1           UH       4     0   32972  lo0
::ffff:0.0.0.0/96  ::1           UGRS     0     0   32972  lo0
fc80::/10          ::1           UGRS     0     0   32972  lo0
fe80::/10          ::1           UGRS     0     0   32972  lo0
fe80::%em0/64      link#1        UC       0     0    1500  em0
fe80::%lo0/64      fe80::1%lo0   U        0     0   32972  lo0
ff01::/32          ::1           U        0     0   32972  lo0
ff02::%em0/32      link#1        UC       0     0    1500  em0
ff02::%lo0/32      fe80::1%lo0   UC       0     0   32972  lo0
.Ed
.Pp
The default gateway address is stored in the
.Pa /etc/mygate
file.
If you need to edit this file, a painless way to reconfigure the network
afterwards is
.Ic route flush
followed by a
.Ic sh -x /etc/netstart
command.
Or, you may prefer to manually configure using a series of
.Ic route add
and
.Ic route delete
commands (see
.Xr route 8 ) .
If you run
.Xr dhclient 8
you will have to kill it by running
.Ic pkill dhclient
after you flush the routes.
.Pp
If you wish to route packets between interfaces, add one or both
of the following directives (depending on whether IPv4 or IPv6 routing
is required) to
.Pa /etc/sysctl.conf :
.Pp
.Dl net.inet.ip.forwarding=1
.Dl net.inet6.ip6.forwarding=1
.Pp
Packets are not forwarded by default, due to RFC requirements.
.Ss Check DNS
Use
.Xr host 1
or
.Xr dig 1
to check that domain name resolution is working properly.
.Pp
Most likely, the IP address of at least one domain name server
was added to
.Xr resolv.conf 5
while installing the system.
If DHCP is in use, it will overwrite
.Pa /etc/resolv.conf
every time
.Xr dhclient 8
is run but
.Pa /etc/resolv.conf.tail
can be used to add options and extra name servers to those received
dynamically.
.Pp
A
.Xr hosts 5
file can be used if there is a need for system specific name
resolution entries.
.Ss Check disk mounts
Check that the disks are mounted correctly by
comparing the
.Pa /etc/fstab
file against the output of the
.Xr mount 8
and
.Xr df 1
commands.
Example:
.Bd -literal -offset indent
# cat /etc/fstab
/dev/sd0a / ffs rw 1 1
/dev/sd0d /usr ffs rw,nodev 1 2
/dev/sd0e /var ffs rw,nodev,nosuid 1 3
/dev/sd0g /tmp ffs rw,nodev,nosuid 1 4
/dev/sd0h /home ffs rw,nodev,nosuid 1 5

# mount
/dev/sd0a on / type ffs (local)
/dev/sd0d on /usr type ffs (local, nodev)
/dev/sd0e on /var type ffs (local, nodev, nosuid)
/dev/sd0g on /tmp type ffs (local, nodev, nosuid)
/dev/sd0h on /home type ffs (local, nodev, nosuid)

# df
Filesystem  1024-blocks     Used    Avail Capacity  Mounted on
/dev/sd0a         22311    14589     6606    69%    /
/dev/sd0d        203399   150221    43008    78%    /usr
/dev/sd0e         10447      682     9242     7%    /var
/dev/sd0g         18823        2    17879     0%    /tmp
/dev/sd0h          7519     5255     1888    74%    /home

# pstat -s
Device      512-blocks     Used    Avail Capacity  Priority
/dev/sd0b       131072    84656    46416    65%    0
.Ed
.Pp
Edit
.Pa /etc/fstab
and use the
.Xr mount 8
and
.Xr umount 8
commands as appropriate.
Refer to the above example and
.Xr fstab 5
for information on the format of this file.
.Pp
You may wish to do NFS partitions now too, or you can do them later.
.Ss Check the running system
You can use
.Xr ps 1 ,
.Xr netstat 1 ,
and
.Xr fstat 1
to check on running processes, network connections, and opened files,
respectively.
.Sh FURTHER CHANGES
The system should be usable now, but you may wish to do more customizing,
such as adding users, etc.
Many of the following sections may be skipped
if you are not using that package.
We suggest that you
.Ic cd /etc
and edit any files in that directory as necessary.
.Pp
Note that the
.Pa /etc/motd
file is modified by
.Pa /etc/rc
whenever the system is booted.
To keep any custom message intact, ensure that you leave two blank lines
at the top, or your message will be overwritten.
.Ss Add new users
Add users.
There is an
.Xr adduser 8
script.
You may use
.Xr vipw 8
to add users to the
.Pa /etc/passwd
file
and edit
.Pa /etc/group
by hand to add new groups.
You may also wish to edit
.Pa /etc/login.conf
and tune some of the limits documented in
.Xr login.conf 5 .
The manual page for
.Xr su 1
tells you to make sure to put people in
the
.Sq wheel
group if they need root access.
For example:
.Pp
.Dl wheel:*:0:root,myself
.Ss System command scripts
The
.Pa /etc/rc.*\&
scripts are invoked at boot time, after single-user mode has exited,
and at shutdown.
The whole process is controlled, more or less, by the master script
.Pa /etc/rc .
This script should not be changed by administrators.
.Pp
.Pa /etc/rc
is in turn influenced by the configuration variables present in
.Pa /etc/rc.conf .
Again this script should not be changed by administrators:
site-specific changes should be made to
.Pq freshly created if necessary
.Pa /etc/rc.conf.local
or by using the
.Xr rcctl 8
utility.
.Pp
Any commands which should be run before the system sets its
secure level should be made to
.Pa /etc/rc.securelevel ,
and commands to be run after the system sets its
secure level should be made to
.Pa /etc/rc.local .
Commands to be run before system shutdown should be set in
.Pa /etc/rc.shutdown .
.Pp
For more information about system startup/shutdown files, see
.Xr rc 8 ,
.Xr rc.conf 8 ,
.Xr securelevel 7 ,
and
.Xr rc.shutdown 8 .
.Pp
If you've installed X, you may want to turn on
.Xr xenodm 1 ,
the X Display Manager.
To do this, change the value of
.Va xenodm_flags
in
.Pa /etc/rc.conf.local .
.Ss Set keyboard type
Some architectures permit keyboard type control.
Use the
.Xr kbd 8
command to change the keyboard encoding.
.Ic kbd -l
will list all available encodings.
.Ic kbd xxx
will select the
.Ic xxx
encoding.
Store the encoding in
.Pa /etc/kbdtype
to make sure it is set automatically at boot time.
.Ss Printers
Edit
.Pa /etc/printcap
and
.Pa /etc/hosts.lpd
to get any printers set up.
Consult
.Xr lpd 8
and
.Xr printcap 5
if needed.
.Ss Mail aliases
Edit
.Pa /etc/mail/aliases
and set the three standard aliases to go to either a mailing list, or
the system administrator.
.Bd -literal -offset indent
# Well-known aliases -- these should be filled in!
root:		sysadm
manager:	root
dumper:		root
.Ed
.Ss Mail
The default mail agent on
.Ox
is
.Xr smtpd 8 .
Details on how to configure an alternative mailer are documented in
.Xr mailer.conf 5 .
.Pp
.Ox
ships with a default
.Pa /etc/mail/smtpd.conf
file that will work for simple installations.
See
.Xr smtpd.conf 5
for information on configuring more complex setups.
For the default installation,
.Xr smtpd 8
is configured to only accept connections from the local host.
This makes it possible to send mail locally, but not receive mail from remote
servers, which is ideal if you have one central incoming mail machine and
several clients.
To cause smtpd to accept external network connections, modify the
.Va listen
directive in
.Pa /etc/mail/smtpd.conf
to include the interfaces to listen on.
.Ss Daily, weekly, monthly scripts
Review
.Xr daily 8
to understand what the periodic system maintenance scripts do and
how to customize them:
For example, to enable
.Ev ROOTBACKUP
or to disable
.Ev VERBOSESTATUS ,
or to add local maintenance code to
.Pa /etc/daily.local , /etc/weekly.local ,
or
.Pa /etc/monthly.local .
.Ss Tighten up security
You might wish to tighten up security more by editing
.Pa /etc/fbtab
as when installing X.
Look at the other files in
.Pa /etc
and edit them as needed.
(Do not edit files ending in
.Pa .db
\(em like
.Pa pwd.db , spwd.db ,
nor
.Pa localtime ,
nor
.Pa rmt ,
nor any directories.)
.Ss Crontab (background running processes)
Check what is running by typing
.Ic crontab -l
as root
and see if anything unexpected is present.
Do you need anything else?
Do you wish to change things?
See
.Xr crontab 5 .
.Ss Next day cleanup
After the first night's
.Xr security 8
run, change ownerships and permissions
on files, directories, and devices; root may have received mail
with subject: "<hostname> daily insecurity output".
This mail contains a set of security recommendations,
presented as a list looking something like this:
.Bd -literal -offset indent
var/mail:
        permissions (0755, 0775)
etc/daily:
        user (0, 3)
.Ed
.Pp
The best bet is to follow the advice in that list.
The recommended setting is the first item in parentheses, while
the current setting is the second one.
This list is generated by
.Xr mtree 8
using
.Pa /etc/mtree/special .
Use
.Xr chmod 1 ,
.Xr chgrp 1 ,
and
.Xr chown 8
as needed.
.Ss Daemons
Enable/disable any daemon processes as necessary.
.Xr intro 8
contains a comprehensive guide to the various daemons available on the
.Ox
system.
.Ss Packages
Install your own packages.
The
.Ox
ports collection includes a large set of third-party software.
A lot of it is available as binary packages that you can install using
.Xr pkg_add 1 .
See
.Xr ports 7
and
.Xr packages 7
for more details.
To start daemons installed from packages, see
.Xr rc.d 8 .
.Pp
There is also other third-party software that is available
in source form only, either because it has not been ported to
.Ox
yet, or because licensing restrictions make binary redistribution
impossible.
Sometimes checking the mailing lists for
past problems that people have encountered will result in a fix posted.
.Ss Compiling a kernel
Information on building and modifying kernels
is contained within
.Xr config 8 .
.Sh SEE ALSO
.Xr doas 1 ,
.Xr ksh 1 ,
.Xr man 1 ,
.Xr pkg_add 1 ,
.Xr ps 1 ,
.Xr vi 1 ,
.Xr hier 7 ,
.Xr config 8 ,
.Xr dmesg 8 ,
.Xr ifconfig 8 ,
.Xr intro 8 ,
.Xr rcctl 8 ,
.Xr sysctl 8
.Sh HISTORY
This document first appeared in
.Ox 2.2 .
@


1.157
log
@for consistency, hyphenate "single-user";
from rob pierce
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.156 2016/09/02 12:17:33 tb Exp $
d32 1
a32 1
.Dd $Mdocdate: September 2 2016 $
d423 1
a423 1
.Xr xdm 1 ,
d426 1
a426 1
.Va xdm_flags
@


1.156
log
@move links from http to https://www.openbsd.org/

ok beck
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.155 2016/08/01 18:20:19 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate: August 1 2016 $
d389 1
a389 1
scripts are invoked at boot time, after single user mode has exited,
@


1.155
log
@the default smtpd setup does not require newaliases be run;
noted by consus

ok gilles
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.154 2016/06/09 09:33:17 stsp Exp $
d32 1
a32 1
.Dd $Mdocdate: June 9 2016 $
d67 1
a67 1
.Lk http://www.openbsd.org/errata.html .
@


1.154
log
@In afterboot(8), replace le0 with em0. lo0 and le0 are too close with tiny font.
ok jmc mpi kettenis deraadt
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.153 2015/12/08 13:36:05 tedu Exp $
d32 1
a32 1
.Dd $Mdocdate: December 8 2015 $
a464 4
.Pp
Run
.Xr newaliases 8
after changes.
@


1.153
log
@NOTRAILERS is unlikely to show up in future ifconfig output
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.152 2015/11/20 18:43:25 mmcc Exp $
d32 1
a32 1
.Dd $Mdocdate: November 20 2015 $
d163 1
a163 1
.Dq le0 )
d183 1
a183 1
le0: flags=9863<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST>
d185 1
a185 1
	inet6 fe80::5ef0:f0f0%le0 prefixlen 64 scopeid 0x1
d211 1
a211 1
default        192.168.4.254     UGS      0 11098028    -  le0
d214 3
a216 3
192.168.4      link#1            UC       0        0    -  le0
192.168.4.52   8:0:20:73:b8:4a   UHL      1     6707    -  le0
192.168.4.254  0:60:3e:99:67:ea  UHL      1        0    -  le0
d225 1
a225 1
fe80::%le0/64      link#1        UC       0     0    1500  le0
d228 1
a228 1
ff02::%le0/32      link#1        UC       0     0    1500  le0
@


1.152
log
@Don't specify full paths for doas and path, and don't suggest that users
do so.

"good" deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.151 2015/11/20 15:51:26 deraadt Exp $
d183 1
a183 1
le0: flags=9863<UP,BROADCAST,NOTRAILERS,RUNNING,SIMPLEX,MULTICAST>
@


1.151
log
@ntpd ison by default; from rob pierce
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.150 2015/09/30 14:40:52 sobrado Exp $
d32 1
a32 1
.Dd $Mdocdate: September 30 2015 $
d112 1
a112 1
.Dl $ /usr/bin/doas /usr/bin/passwd root
d114 4
a117 11
It is a good idea to always specify the full path name for the
.Xr passwd 1 ,
.Xr su 1
and
.Xr doas 1
commands as this inhibits the possibility of rogue files placed in your
.Ev PATH
being executed for most shells.
Furthermore, the superuser's
.Ev PATH
should never contain the current directory
@


1.150
log
@fix typo; cross-reference smtpd(8).
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.149 2015/09/24 15:07:55 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate: September 24 2015 $
d127 8
a142 3
Alternatively,
.Xr ntpd 8
can be used to automatically synchronize clocks with remote NTP servers.
d146 2
a147 2
Set the current date to January 27th, 1999 3:04pm:
.Dl # date 199901271504
@


1.149
log
@the inetd text is no longer relevant; from rob pierce
while here, knock out a section header to avoid a one sentence section;
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.148 2015/09/21 09:23:35 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate: September 21 2015 $
d486 3
a488 2
For the default installation, smptd is configured to only accept
connections from the local host.
@


1.148
log
@scatter some rcctl refs; from rob pierce
discussed with ajacoutot
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.147 2015/07/30 08:03:49 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate: July 30 2015 $
a512 5
In
.Pa /etc/inetd.conf
comment out any extra entries you do not need,
and only add things that are really needed.
.Ss Other files in /etc
@


1.147
log
@switch references from sudo to doas;
ok deraadt
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.146 2014/12/07 23:05:30 schwarze Exp $
d32 1
a32 1
.Dd $Mdocdate: December 7 2014 $
d403 4
a406 1
.Pa /etc/rc.conf.local .
d611 1
@


1.146
log
@Since rev. 1.1, we discouraged space characters in passwords -
but even after repeated enquiries on misc@@, nobody can explain why,
so tedu the two confusing words; ok tedu@@.
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.145 2014/04/29 13:48:18 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate: April 29 2014 $
d81 1
a81 1
.Xr sudo 8
d112 1
a112 1
.Dl $ /usr/bin/sudo /usr/bin/passwd root
d118 1
a118 1
.Xr sudo 8
d597 1
a607 1
.Xr sudo 8 ,
@


1.145
log
@smtpd is the default mailer now;
From: Jan Stary

ok gilles
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.144 2014/04/22 14:15:55 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate: April 22 2014 $
d106 1
a106 1
Choose a password that has digits and special characters (not space)
@


1.144
log
@zap stray Pp;
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.143 2014/04/22 11:15:05 henning Exp $
d468 1
a468 1
.Ss Sendmail
d472 1
a472 1
.Xr sendmail 8 .
d478 6
a483 9
.Pa /etc/mail/localhost.cf
file that will work for simple installations; it was generated from
.Pa openbsd-localhost.mc
in
.Pa /usr/share/sendmail/cf .
Please see
.Pa /usr/share/sendmail/README
for information on generating your own sendmail configuration files.
For the default installation, sendmail is configured to only accept
d488 5
a492 18
To cause sendmail to accept external network connections, modify the
.Va sendmail_flags
variable in
.Pa /etc/rc.conf.local
to use the
.Pa /etc/mail/sendmail.cf
file in accordance with the comments therein.
This file was generated from
.Pa openbsd-proto.mc .
.Pp
Note that sendmail now also listens on port 587 by default.
This is to implement the RFC 6409 message submission protocol.
You may disable this via the
.Ic no_default_msa
option in your sendmail .mc file.
See
.Pa /usr/share/sendmail/README
for more information.
@


1.143
log
@no more kerberos, ok theo reyk
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.141 2013/07/14 19:44:39 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate: January 22 2014 $
a387 1
.Pp
@


1.142
log
@Fix the ambigous text in afterboot. For a newbie, the text really
said: "download the packages from a mirror and install these with
pkg_add". Also add a mention to pkg.conf in pkg_add.1.

Help and suggestions from jmc@@ and sthen@@. OK from both.
@
text
@d32 1
a32 1
.Dd $Mdocdate: July 14 2013 $
d384 1
a384 1
group if they need root access (non-Kerberos).
a388 5
Follow instructions for
.Xr login_krb5 8
if using
Kerberos
for authentication.
@


1.141
log
@merge the relevant bits of dhcp(8) into dhclient(8) and dhcpd(8),
removing traces of dhcp(8)... i'm about to remove that file, since
it's essentially useless. holding off for a little, in case my commit
is greeted with howls.

help/ok krw
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.140 2012/10/30 18:39:44 krw Exp $
d32 1
a32 1
.Dd $Mdocdate: October 30 2012 $
d597 1
a597 3
A lot of it is available as binary packages that you can download from
.Lk ftp://ftp.openbsd.org
or a mirror, and install using
@


1.140
log
@Nuke dhclient-script and dhclient.conf 'script' directive. Do all
interface and route configuration via ioctl's and routing sockets.

This will break configurations using local enhancements of
dhclient-script, which will now require alternate arrangements.

Committing early to allow time to identify and develop required
alternatives.

Several proddings by deraadt@@.
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.139 2012/08/18 16:25:20 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate: August 18 2012 $
d201 1
a201 1
.Xr dhcp 8
@


1.139
log
@RFC updates:
5322 obsoletes 2822
5321 obsoletes 821 and 2821
6409 obsoletes 2476 and 4409
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.138 2012/08/15 19:07:30 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate: August 15 2012 $
d278 1
a278 1
.Xr dhclient-script 8
@


1.138
log
@- use Lk for links

because i already have a trivial addition in afterboot, to briefly document
rc.d(8), i have committed that bit also. that saves me making (even more)
trivial changes to this file, however the text was suggested by ingo and
i'm still waiting for his reply which, to be fair, has only been a wait of
some 30 mins so far. so, the rc.d blurb was requested by ross richardson,
suggested by ingo, and probably ok ingo. but if he objects, we can tweak
it further.
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.137 2012/08/15 18:04:23 jmc Exp $
d508 1
a508 1
This is to implement the RFC 2476 message submission protocol.
@


1.137
log
@- remove some redundancy within the sendmail text
- remove the compat_* text: there's only one left, and the text makes little
  sense here

from Ross Richardson
ok schwarze
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.136 2012/03/01 04:38:10 lum Exp $
d32 1
a32 1
.Dd $Mdocdate: March 1 2012 $
d67 1
a67 1
.Pa http://www.openbsd.org/errata.html .
d598 1
a598 1
.Pa ftp://ftp.openbsd.org
d606 2
@


1.136
log
@Add sentence about ntpd. ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.135 2011/06/11 17:52:00 lum Exp $
d32 1
a32 1
.Dd $Mdocdate: June 11 2011 $
d493 1
a493 2
connections from the local host and to not accept connections on
any external interfaces.
a605 5
.Pp
Copy vendor binaries and install them.
You will need to install any shared libraries, etc.
Read the compat_* man pages
to find out how to install and use compatibility mode.
@


1.135
log
@Don't split sentence with a command.
help from jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.134 2011/04/17 19:32:06 deraadt Exp $
d32 1
a32 1
.Dd $Mdocdate: April 17 2011 $
d135 3
@


1.134
log
@the pstat(8) sample line will now contain a real device name
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.133 2011/02/16 22:35:08 schwarze Exp $
d32 1
a32 1
.Dd $Mdocdate: February 16 2011 $
d110 1
a110 1
Type the command
a112 2
.Pp
to change it.
@


1.133
log
@Recommend checking DNS.
Joint work of lum@@, jmc@@ and myself;
committing on behalf of lum@@ who is short on time.
ok jmc@@ lum@@ miod@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.132 2011/01/30 15:37:17 schwarze Exp $
d32 1
a32 1
.Dd $Mdocdate: January 30 2011 $
d322 1
a322 1
swap_device     131072    84656    46416    65%    0
@


1.132
log
@As reminded by deraadt@@, we don't usually use "you" in manuals, so use
a bit less of it here, even though this page is a bit special.  Not a full
sweep of the page, just cleaning up the paragraph we recently touched.
ok jmc@@ lum@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.131 2011/01/29 08:49:17 lum Exp $
d32 1
a32 1
.Dd $Mdocdate: January 29 2011 $
d263 24
@


1.131
log
@Amend "Login" section to reflect the fact that a user account
can be created during installation.
Suggestions from schwarze@@
ok for first version miod@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.130 2011/01/21 12:20:04 lum Exp $
d32 1
a32 1
.Dd $Mdocdate: January 21 2011 $
d68 1
a68 1
It is recommended that you check this page regularly.
d83 2
a84 1
During the installation you were given the option to set up a user account.
d89 1
a89 1
If you did not use this option see the paragraph
d91 1
a91 1
below for details.
d93 1
a93 1
If you wish to deny root logins over the network, edit the
@


1.130
log
@Simplify reference to errata.html
ok and help jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.129 2011/01/21 08:17:50 lum Exp $
d50 1
a50 1
.Dl # help
d58 1
a58 1
.Dl # man 1 ls
d70 1
a70 3
Log in as
.Dq root .
You can do so on the console, or over the network using
a71 9
If you wish to deny root logins over the network, edit the
.Pa /etc/ssh/sshd_config
file and set
.Cm PermitRootLogin
to
.Dq no
(see
.Xr sshd_config 5 ) .
.Pp
d83 17
a99 1
This process is described in more detail later.
d110 3
a112 1
.Ic /usr/bin/passwd
@


1.129
log
@Help description of PATH liability a bit.
ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.128 2010/10/18 14:42:16 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate: October 18 2010 $
d66 1
a66 1
All significant and easily fixed problems will be reported at
a67 1
The web page will mention if a problem is security related.
@


1.128
log
@remove references to now removed usd/psd/smm docs;
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.127 2010/02/25 01:14:04 schwarze Exp $
d32 1
a32 1
.Dd $Mdocdate: February 25 2010 $
d114 1
a114 1
commands as this inhibits the possibility of files placed in your execution
d116 1
a116 1
for most shells.
@


1.127
log
@some minor tweaks to the "next day cleanup": in particular,
reference security(8) and make it clear that mail is not always sent;
discussed some time ago with jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d32 1
a32 1
.Dd $Mdocdate$
a458 2
and
.Pa /usr/share/doc/smm/08.sendmailop/op.me
@


1.126
log
@Igor Sobrado found out that roff regards '\!' as the "transparent line
indicator".  Even groff(1) does not in general seem very well-behaved
with respect to it, and it is not clear what advantage it might have
compared to '\"', the good old "beginning of comment" escape sequence.

Regarding the case at hand, it is breaking the mandoc(1) build,
and i checked that we get no output change from groff(1).

ok jmc@@
@
text
@d530 7
a536 5
After the first night's security run, change ownerships and permissions
on files, directories, and devices; root should have received mail
with subject: "<hostname> daily insecurity output.".
This mail contains
a set of security recommendations, presented as a list looking like this:
@


1.125
log
@Since etc/daily rev. 1.58, there is no more output redirection in crontab(5).
Consequently, clean up the related instructions, this is now simpler.
While here, make the discussion of daily(8) more concise.
Thanks to Rene Maroufi <info at maroufi dot net> for reporting
the outdated documentation.
Wording tweaked by jmc@@,  OK jmc@@ sobrado@@
@
text
@d34 1
a34 1
\!\" Originally created by Marshall M. Midden -- 1997-10-20, m4@@umn.edu
@


1.124
log
@revert previous, requested by kettenis@@ and deraadt@@
@
text
@d487 9
a495 6
Look at and possibly edit the
.Pa /etc/daily , /etc/weekly ,
and
.Pa /etc/monthly
scripts.
Your site specific things should go into
d497 1
a497 1
and
a498 11
.Pp
These scripts have been limited so as to keep the system running without
filling up disk space from normal running processes and database updates.
(You probably do not need to understand them.)
.Pp
The
.Pa /etc/daily
script provides a means to perform a daily backup of the root filesystem.
See
.Xr daily 8
for more information.
a526 11
For example, if you do not
like root getting standard output of the daily scripts, and want only
the security scripts that are mailed internally, you can type
.Ic crontab -e
and change some of the lines to read:
.Bd -literal -offset indent
30  1  *  *  *   /bin/sh /etc/daily 2>&1 > /var/log/daily.out
30  3  *  *  6   /bin/sh /etc/weekly 2>&1 > /var/log/weekly.out
30  5  1  *  *   /bin/sh /etc/monthly 2>&1 > /var/log/monthly.out
.Ed
.Pp
@


1.123
log
@remove the empty script /etc/monthly
in preparation for improvements in /etc/daily and /etc/weekly
using feedback and suggestions from jmc@@ and sthen@@
ok jmc@@, and sthen@@ agreed with the general direction
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.122 2009/05/06 01:33:14 deraadt Exp $
d32 1
a32 1
.Dd $Mdocdate: May 6 2009 $
d486 3
a488 3
.Ss Daily and weekly scripts
Look at the
.Pa /etc/daily
d490 1
a490 1
.Pa /etc/weekly
d493 1
a493 1
.Pa /etc/daily.local
d495 1
a495 1
.Pa /etc/weekly.local .
d543 1
@


1.122
log
@tell people to pkill dhclient; spotted by Rodolfo Gouveia
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.121 2009/03/05 08:27:03 ajacoutot Exp $
d32 1
a32 1
.Dd $Mdocdate: March 5 2009 $
d486 3
a488 3
.Ss Daily, weekly, monthly scripts
Look at and possibly edit the
.Pa /etc/daily , /etc/weekly ,
d490 1
a490 1
.Pa /etc/monthly
d493 1
a493 1
.Pa /etc/daily.local , /etc/weekly.local ,
d495 1
a495 1
.Pa /etc/monthly.local .
a542 1
30  5  1  *  *   /bin/sh /etc/monthly 2>&1 > /var/log/monthly.out
@


1.121
log
@Besides su(1) and passwd(1), also advise specifying the full path to
sudo(8).

"it makes sense" jmc@@, ok deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.120 2007/11/30 09:49:20 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate: November 30 2007 $
d244 1
a244 1
.Ic kill `cat /var/run/dhclient.pid`
@


1.120
log
@make mailer.conf(5) more visible.
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.119 2007/05/31 19:19:58 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate: May 31 2007 $
d109 3
a111 2
It is a good idea to always specify the full path name for both the
.Xr passwd 1
d113 1
a113 1
.Xr su 1
@


1.119
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.118 2007/05/29 15:40:13 sobrado Exp $
d32 1
a32 1
.Dd $Mdocdate$
d442 7
@


1.118
log
@a `number' is a certain combination of `digits';
`/etc/mail/localhost.cf' does not has RFC 2476 support disabled by default

ok jmc@@ and millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.117 2007/04/08 16:32:30 jmc Exp $
d32 1
a32 1
.Dd October 20, 1997
@


1.117
log
@since both daily(8) and afterboot(8) contain instructions for
/altroot daily backup, remove the (obviously) duplicated text
from this page and point instead to daily(8);

from jared r r spiegel
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.116 2007/03/21 22:11:54 jmc Exp $
d101 1
a101 1
Choose a password that has numbers, digits, and special characters (not space)
a477 3
The
.Pa /etc/mail/localhost.cf
file already has this disabled.
@


1.116
log
@remove the various sections on enabling daemons: the page was getting overly
big and out of date; this way we can make intro(8) do some work;
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.115 2007/03/20 20:55:22 jmc Exp $
a496 20
.Pa /altroot
filesystem can optionally be used to provide a backup of the
root filesystem on a daily basis.
To take advantage of this, you must have an entry in
.Pa /etc/fstab
with
.Dq xx
for the mount option:
.Pp
.Dl /dev/wd0j /altroot ffs xx 0 0
.Pp
and the environment variable
.Ev ROOTBACKUP
must be set.
For example, the following can be added to root's
.Xr crontab 5 :
.Pp
.Dl ROOTBACKUP=1
.Pp
The
d498 4
a501 1
script will then make a daily backup of the root filesystem.
@


1.115
log
@cut SEE ALSO down to a sane size;
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.114 2007/03/20 20:51:08 jmc Exp $
d48 1
a48 1
is assumed, otherwise type
d313 1
a313 1
.Sh CHANGING /etc FILES
d317 1
a317 2
if you are not using that package (for example, skip the
Kerberos section if you won't be using Kerberos).
d320 1
a320 1
and edit most of the files in that directory.
a480 164
.Ss Automounter daemon (AMD)
If using the
.Xr amd 8
package,
go into the
.Pa /etc/amd
directory and set it up by
renaming
.Pa master.sample
to
.Pa master
and editing it and creating other maps as needed.
Alternatively, you can get your maps with YP.
.Ss BIND name server (DNS)
If you are using the BIND name server, check the
.Pa /etc/resolv.conf
file.
It may look something like:
.Bd -literal -offset indent
domain nts.umn.edu
nameserver 128.101.101.101
nameserver 134.84.84.84
search nts.umn.edu. umn.edu.
lookup file bind
.Ed
.Pp
If using a caching name server, add the line "nameserver 127.0.0.1" first.
To get a local caching name server to run
you will need to set
.Va named_flags
in
.Pa /etc/rc.conf.local .
The same holds true if the machine is going to be a
name server for your domain.
In both these cases, make sure that
.Xr named 8
is running
(otherwise there are long waits for resolver timeouts).
.Ss Clock synchronisation
In order to make sure the system clock is synchronised
to that of a publicly accessible NTP server,
make sure that
.Pa /etc/rc.conf.local
contains the following:
.Pp
.Dl ntpd_flags=\&"\&"
.Pp
See
.Xr ntpd 8 ,
.Xr rdate 8 ,
and
.Xr timed 8
for more information on setting the system's date.
.Ss Concatenated disks (ccd)
If you are using
.Xr ccd 4
concatenated disks, edit
.Pa /etc/ccd.conf .
Use the
.Ic ccdconfig -U
command to unload and the
.Ic ccdconfig -C
command to create tables internal to the kernel for the concatenated disks.
You then
.Xr mount 8 ,
.Xr umount 8 ,
and edit
.Pa /etc/fstab
as needed.
.Ss BOOTP/DHCP server
If this is a
BOOTP or DHCP
server, edit
.Pa /etc/dhcpd.conf
and
.Pa /etc/dhcpd.interfaces
as needed.
You will have to make sure
.Pa /etc/rc.conf.local
has:
.Pp
.Dl dhcpd_flags=\&"\&"
.Pp
or run
.Xr dhcpd 8
manually.
See also
.Xr diskless 8 .
.Ss HP remote boot server
Edit
.Pa /etc/rbootd.conf
if needed for remote booting.
If you do not have HP computers doing remote booting, do not enable this.
See also
.Xr diskless 8 .
.Ss Kerberos
If you are going to use
.Xr kerberos 8
for authentication, and you already have a
Kerberos
master, change directory to
.Pa /etc/kerberosV
and configure.
Remember to get a
.Pa srvtab
from the master so that the remote commands work.
.Ss NFS server
If this is an NFS server
make sure
.Pa /etc/rc.conf.local
has:
.Pp
.Dl nfs_server=YES
.Pp
Edit
.Pa /etc/exports
and get it correct.
It is probably easier to reboot than to get the daemons running manually,
but you can get the order correct by looking at
.Pa /etc/rc .
.Ss RPC-based network services
Several services depend on the RPC portmapper,
.Xr portmap 8 ,
being running for proper operation.
This includes YP and NFS exports, among other services.
To get the RPC portmapper to start automatically on boot,
you will need to have this line in
.Pa /etc/rc.conf.local :
.Pp
.Dl portmap=YES
.Ss YP setup
Check the YP domain name with the
.Xr domainname 1
command.
If necessary, correct it by editing the
.Pa /etc/defaultdomain
file (see
.Xr defaultdomain 5 ) .
The
.Pa /etc/netstart
script reads this file on bootup to determine and set the domain name.
You may also set the running system's domain name with the
.Xr domainname 1
command.
To start YP client services, simply run
.Ic ypbind ,
then perform the remaining
YP activation as described in
.Xr passwd 5
and
.Xr group 5 .
.Pp
In particular, to enable YP passwd support, you'll need to add the following
line to
.Pa /etc/master.passwd :
.Pp
.Dl +:*::::::::
.Pp
You do this by using
.Xr vipw 8 .
.Pp
There are many more YP man pages available to help you.
You can find more information by starting with
.Xr yp 8 .
d586 6
d609 2
a610 3
(Hint:
.Ic man -k compat
to find out how to install and use compatibility mode.)
d624 1
d628 1
a628 1
.Xr intro 3 ,
d633 1
@


1.114
log
@steps on kernel building + modifying are already contained in
config(8). instead of duplicating them here, just point people to
config(8).
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.113 2006/05/19 13:13:52 jmc Exp $
a783 10
.Xr chgrp 1 ,
.Xr chmod 1 ,
.Xr crontab 1 ,
.Xr date 1 ,
.Xr df 1 ,
.Xr domainname 1 ,
.Xr fstat 1 ,
.Xr hostname 1 ,
.Xr ls 1 ,
.Xr make 1 ,
a784 2
.Xr netstat 1 ,
.Xr passwd 1 ,
d787 1
a787 19
.Xr ssh 1 ,
.Xr su 1 ,
.Xr xdm 1 ,
.Xr ccd 4 ,
.Xr aliases 5 ,
.Xr crontab 5 ,
.Xr defaultdomain 5 ,
.Xr dhcpd.conf 5 ,
.Xr exports 5 ,
.Xr fbtab 5 ,
.Xr fstab 5 ,
.Xr group 5 ,
.Xr hostname.if 5 ,
.Xr login.conf 5 ,
.Xr passwd 5 ,
.Xr printcap 5 ,
.Xr resolv.conf 5 ,
.Xr ssh_config 5 ,
.Xr sysctl.conf 5 ,
a788 7
.Xr hostname 7 ,
.Xr packages 7 ,
.Xr ports 7 ,
.Xr adduser 8 ,
.Xr amd 8 ,
.Xr ccdconfig 8 ,
.Xr chown 8 ,
a789 4
.Xr dhclient 8 ,
.Xr dhcp 8 ,
.Xr dhcpd 8 ,
.Xr diskless 8 ,
a790 1
.Xr ftpd 8 ,
a791 17
.Xr inetd 8 ,
.Xr kbd 8 ,
.Xr kerberos 8 ,
.Xr lpd 8 ,
.Xr mount 8 ,
.Xr mtree 8 ,
.Xr named 8 ,
.Xr netstart 8 ,
.Xr newaliases 8 ,
.Xr ntpd 8 ,
.Xr portmap 8 ,
.Xr rbootd 8 ,
.Xr rc 8 ,
.Xr rdate 8 ,
.Xr rmt 8 ,
.Xr route 8 ,
.Xr sendmail 8 ,
d793 1
a793 6
.Xr sysctl 8 ,
.Xr timed 8 ,
.Xr umount 8 ,
.Xr vipw 8 ,
.Xr yp 8 ,
.Xr ypbind 8
@


1.113
log
@- merge BOOTP and DHCP sections
- point to diskless(8)

based on a mail from alexey e. suslikov;
ok henning mk
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.112 2005/11/28 19:43:00 jmc Exp $
d779 4
a782 67
.Sh COMPILING A KERNEL
Note:
The standard
.Ox
kernel configuration (GENERIC) is suitable for most purposes.
Use of an alternative kernel configuration is not recommended.
.Pp
First, review the system message buffer using the
.Xr dmesg 8
command to find out information on your system's devices as probed by the
kernel at boot.
In particular, note which devices were not configured.
This information will prove useful when editing kernel configuration files.
.Pp
To compile a kernel inside a writable source tree, do the following:
.Bd -literal -offset indent
# cd /usr/src/sys/arch/somearch/conf
# vi SOMEFILE  (to make any changes)
# config SOMEFILE
# cd ../compile/SOMEFILE
# make depend
# make
.Ed
.Pp
where
.Ar somearch
is the architecture (e.g. i386), and
.Ar SOMEFILE
should be a name indicative of a particular configuration
(often that of the hostname).
.Pp
If you are building your kernel again, before you do a
.Ic make
you should do a
.Ic make depend
after making changes (including updates or patches) to your kernel source,
or a
.Ic make clean
after making changes to your kernel options.
.Pp
The new kernel (called
.Pa bsd )
can be placed in
.Pa /
(i.e.\&
.Pa /bsd )
and the system will boot it next time.
Many people save their backup kernels as
.Pa /bsd.1 ,
.Pa /bsd.2 ,
etc.
.Pp
It is not always necessary to recompile the kernel if only
configuration changes are required.
With
.Xr config 8 ,
you can change the device configuration in the kernel file directly:
.Bd -literal -offset indent
# config -e -o bsd.new /bsd
OpenBSD 2.7-beta (GENERIC.rz0) #0: Mon Oct  4 03:57:22 MEST 1999
    root@@winona:/usr/src/sys/arch/pmax/compile/GENERIC.rz0
Enter 'help' for information
ukc>
.Ed
.Pp
Additionally, you can permanently save the changes made with UKC during
boot time in the kernel image.
@


1.112
log
@setting ROOTBACKUP need not be done in crontab: alter the text to
explain better (it must be set in the environment) and use the
crontab text as a valid example;

based on a diff from nick@@
ok nick@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.111 2005/10/31 19:37:52 jmc Exp $
a519 7
.Ss BOOTP server
If this is a BOOTP server, edit
.Pa /etc/dhcpd.conf
as needed.
.Xr dhcpd 8
will have to be turned on in
.Xr rc.conf.local 8 .
d551 1
a551 1
.Ss DHCP server
d553 1
a553 1
DHCP
d568 2
d575 2
d893 1
@


1.111
log
@clean up the COMPILING A KERNEL section:
in particular, show `make depend' as the norm.

started by a diff from mpech@@; ok otto@@ millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.110 2005/07/14 21:12:17 jmc Exp $
d676 4
a679 1
and you must add a line to root's
d684 1
a684 1
so that the
d686 1
a686 1
script will make a daily backup of the root filesystem.
@


1.110
log
@refer to kerberos(8) rather than `info heimdal' now that we install the
man page...
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.109 2005/06/01 10:23:29 jmc Exp $
d799 1
a808 3
You can also do a
.Ic make depend
so that you will have dependencies there the next time you do a compile.
d819 1
a819 1
After either of these two methods, you can place the new kernel (called
d821 1
a821 1
in
d826 1
a826 1
Most people save their backup kernels as
@


1.109
log
@shuffle the sections of this page into a more logical order:
initial checks, changing stuff in /etc, daemons, and kernel builds.

also avoids a problem noted by walter goulet, that the page was discussing
rc.conf.local changes before noting that it may have to be created.
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.108 2005/04/23 08:59:16 jmc Exp $
d581 2
a582 4
If you are going to use Kerberos
.Po see\ \&
.Ql info heimdal
.Pc
d900 1
@


1.108
log
@add some Xr to sysctl stuff;
from alexey e. suslikov;
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.107 2005/04/05 21:18:39 jmc Exp $
d40 1
a40 1
.Ss Starting Out
a254 69
.Ss BIND Name Server (DNS)
If you are using the BIND Name Server, check the
.Pa /etc/resolv.conf
file.
It may look something like:
.Bd -literal -offset indent
domain nts.umn.edu
nameserver 128.101.101.101
nameserver 134.84.84.84
search nts.umn.edu. umn.edu.
lookup file bind
.Ed
.Pp
If using a caching name server, add the line "nameserver 127.0.0.1" first.
To get a local caching name server to run
you will need to set
.Va named_flags
in
.Pa /etc/rc.conf.local .
The same holds true if the machine is going to be a
name server for your domain.
In both these cases, make sure that
.Xr named 8
is running
(otherwise there are long waits for resolver timeouts).
.Ss RPC-based network services
Several services depend on the RPC portmapper,
.Xr portmap 8 ,
being running for proper operation.
This includes YP and NFS exports, among other services.
To get the RPC portmapper to start automatically on boot,
you will need to have this line in
.Pa /etc/rc.conf.local :
.Pp
.Dl portmap=YES
.Ss YP Setup
Check the YP domain name with the
.Xr domainname 1
command.
If necessary, correct it by editing the
.Pa /etc/defaultdomain
file (see
.Xr defaultdomain 5 ) .
The
.Pa /etc/netstart
script reads this file on bootup to determine and set the domain name.
You may also set the running system's domain name with the
.Xr domainname 1
command.
To start YP client services, simply run
.Ic ypbind ,
then perform the remaining
YP activation as described in
.Xr passwd 5
and
.Xr group 5 .
.Pp
In particular, to enable YP passwd support, you'll need to add the following
line to
.Pa /etc/master.passwd :
.Pp
.Dl +:*::::::::
.Pp
You do this by using
.Xr vipw 8 .
.Pp
There are many more YP man pages available to help you.
You can find more information by starting with
.Xr yp 8 .
d305 4
a308 41
.Ss Concatenated disks (ccd)
If you are using
.Xr ccd 4
concatenated disks, edit
.Pa /etc/ccd.conf .
Use the
.Ic ccdconfig -U
command to unload and the
.Ic ccdconfig -C
command to create tables internal to the kernel for the concatenated disks.
You then
.Xr mount 8 ,
.Xr umount 8 ,
and edit
.Pa /etc/fstab
as needed.
.Ss Automounter daemon (AMD)
If using the
.Xr amd 8
package,
go into the
.Pa /etc/amd
directory and set it up by
renaming
.Pa master.sample
to
.Pa master
and editing it and creating other maps as needed.
Alternatively, you can get your maps with YP.
.Ss Clock synchronisation
In order to make sure the system clock is synchronised
to that of a publicly accessible NTP server,
make sure that
.Pa /etc/rc.conf.local
contains the following:
.Pp
.Dl ntpd_flags=\&"\&"
.Pp
See
.Xr ntpd 8 ,
.Xr rdate 8 ,
d310 3
a312 2
.Xr timed 8
for more information on setting the system's date.
d318 1
a318 2
.Sx Kerberos
section if you won't be using Kerberos).
a401 11
.Ss Printers
Edit
.Pa /etc/printcap
and
.Pa /etc/hosts.lpd
to get any printers set up.
Consult
.Xr lpd 8
and
.Xr printcap 5
if needed.
d416 8
a423 10
.Ss Tighten up security
You might wish to tighten up security more by editing
.Pa /etc/fbtab
as when installing X.
In
.Pa /etc/inetd.conf
comment out any extra entries you do not need,
and only add things that are really needed.
Note that by default the
.Xr telnetd 8
d425 3
a427 16
.Xr ftpd 8
daemons are not enabled in favor of SSH (Secure Shell).
.Ss Kerberos
If you are going to use Kerberos
.Po see\ \&
.Ql info heimdal
.Pc
for authentication, and you already have a
Kerberos
master, change directory to
.Pa /etc/kerberosV
and configure.
Remember to get a
.Pa srvtab
from the master so that the remote commands work.
.Ss Mail Aliases
d470 1
d482 76
d575 18
a592 7
.Ss BOOTP server
If this is a BOOTP server, edit
.Pa /etc/dhcpd.conf
as needed.
.Xr dhcpd 8
will have to be turned on in
.Xr rc.conf.local 8 .
d607 44
a650 5
.Ss HP remote boot server
Edit
.Pa /etc/rbootd.conf
if needed for remote booting.
If you do not have HP computers doing remote booting, do not enable this.
d686 8
a780 8
.Ss Check the running system
You can use
.Xr ps 1 ,
.Xr netstat 1 ,
and
.Xr fstat 1
to check on running processes, network connections, and opened files,
respectively.
d915 1
a917 1
.Xr telnetd 8 ,
@


1.107
log
@since csh is no longer the default root shell, and advice to not log in as
`root' was removed in dot.login -r1.11, remove text which says it happens;

tweak the rest while i'm in here;

spotted by david@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.106 2005/03/02 16:08:47 jmc Exp $
d889 1
d921 1
@


1.106
log
@back out sendbug rejection line;
requested by deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.105 2005/03/02 14:53:07 jmc Exp $
d71 2
a72 2
Login as
.Dq Ic root .
d84 1
a84 3
Upon successful login on the console, you may see the message
.Dq Don't login as root, use su .
For security reasons, it is bad practice to login as root during regular use
@


1.105
log
@note that non-generic kernels not advised;

diff originally from stuart henderson,
reworded by krw@@

ok ian@@ krw@@ hshoexer@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.104 2005/03/02 11:59:18 jmc Exp $
a793 2
.Xr sendbug 1
reports for non-GENERIC kernels will be rejected.
a872 1
.Xr sendbug 1 ,
@


1.104
log
@clarify section on packet forwarding;
kill redundant blurb about virtual interfaces;

ok hshoexer@@ deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.103 2005/02/18 08:58:56 jmc Exp $
d789 8
d875 1
@


1.103
log
@update SEE ALSO, and a tweak;
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.102 2005/02/17 14:47:36 espie Exp $
d248 4
a251 1
If you wish to route packets between interfaces, add the directive
a253 1
or
a255 2
to
.Pa /etc/sysctl.conf .
a256 5
.Pp
You can add new
.Dq virtual interfaces
by adding the required entries to
.Pa /etc/hostname.if .
@


1.102
log
@Xr fstat, netstat, ps

after discussion with henning/otto, okay various people...
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.101 2004/12/13 14:00:07 jmc Exp $
d789 1
d863 1
d871 1
@


1.101
log
@make hier(7) more visible;
tweak some stuff while i'm in here;
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.100 2004/12/01 16:25:20 jmc Exp $
d785 7
@


1.100
log
@Xr crontab;
from han boetes;
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.99 2004/09/09 10:23:43 jmc Exp $
a250 1
.Pp
a251 1
.Pp
d880 1
@


1.99
log
@nfs daemons started from rc, not netstart;
from jrrs (pr #3917);

ok deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.98 2004/08/14 17:37:27 david Exp $
d692 2
a693 1
and you must add a line to root's crontab:
@


1.98
log
@dhcpd doesn't have a -q flag now; ok henning@@ deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.97 2004/07/23 17:27:40 jaredy Exp $
d659 1
a659 1
.Pa /etc/netstart .
@


1.97
log
@add a manpage for /etc/defaultdomain

help and ok jmc, miod, millert, and others
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.96 2004/07/21 13:48:25 jaredy Exp $
d634 1
a634 1
.Dl dhcpd_flags=-q
@


1.96
log
@slight fixes:
- use .Va for rc.conf* variables
- use .Ic for internal commands in configuration files
- e.g. -> For example
- other small mdoc fixes

ok jmc
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.95 2004/07/09 19:01:45 jmc Exp $
d305 2
a306 1
file.
d869 1
@


1.95
log
@add section on ntpd;
ok henning@@ deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.94 2004/07/08 11:02:03 jmc Exp $
d279 3
a281 1
you will need to set "named_flags" in
d512 3
a514 1
To do this, change the value of xdm_flags in
d602 1
a602 1
.Dq sendmail_flags
d613 1
a613 1
.Dq no_default_msa
d718 1
a718 1
e.g., if you do not
d825 1
a825 1
(i.e.
@


1.94
log
@change `Mail aliases' entry to minimise config for user;
ok millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.93 2004/07/08 10:56:22 jmc Exp $
d409 15
d897 1
d901 1
d906 1
@


1.93
log
@clarify which of the rc.* files should/should not be edited;

- remove redundant (duplicate) section in afterboot(8)
- limit rc(8) SYNOPSIS to what the page actually describes
- grammar, formatting, etc.
- add FILES to rc(8)
- add securelevel(7) .Xr to SEE ALSO in rc(8)

requested by and ok henning@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.92 2004/07/07 06:01:02 henning Exp $
d556 2
a557 2
manager:	sysadm
dumper:		sysadm
@


1.92
log
@remove what is now a lie about NTP
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.91 2004/06/04 14:03:06 jmc Exp $
a138 9
.Ss System daemon configuration database
The file
.Pa /etc/rc.conf
is used to configure the system daemons.
Administrators should make changes to the default settings by editing a
separate file,
.Pa /etc/rc.conf.local
.Pq this may need to be created from scratch .
Values can then be added in as desired.
d459 19
a477 4
.Ss rc.conf, rc.conf.local, rc.local, rc.securelevel, rc.shutdown
Check for any local changes needed in the files
.Pa /etc/rc.conf ,
.Pa /etc/rc.local ,
d479 10
d490 1
a490 1
.Pa /etc/rc.shutdown .
@


1.91
log
@edit rc.conf.local, not rc.conf;
from Bernd Ahlers;
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.90 2004/05/25 22:27:43 jmc Exp $
a474 3
Turning on something like the Network Time Protocol in
.Pa /etc/rc.conf.local
requires making sure the package is installed.
@


1.90
log
@replace obsolete references to bootpd(8) and bootptab(5) w/ dhcpd(8);
from jared yanovich;
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.89 2004/04/20 06:39:04 tedu Exp $
d616 1
a616 1
.Pa /etc/rc.conf
@


1.89
log
@GATEWAY and NMBCLUSTERS are dead.  ok beck@@ deraadt@@ jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.88 2003/12/05 23:55:07 jmc Exp $
d607 2
a608 4
If this is a
BOOTP
server, edit
.Pa /etc/bootptab
d610 3
a612 5
You will have to turn it on in
.Pa /etc/inetd.conf
or run
.Xr bootpd 8
in its stand-alone mode.
a834 1
.Xr bootptab 5 ,
d836 1
a851 1
.Xr bootpd 8 ,
@


1.88
log
@encourage people to add in values to rc.conf.local rather than copy
rc.conf blindly, since install can now create rc.conf.local;

thanks nick@@ for pointing this out;
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.87 2003/11/06 12:22:10 jmc Exp $
d266 1
a266 4
.Pa /etc/sysctl.conf ,
or by compiling a new kernel with the
.Cm GATEWAY
option.
@


1.87
log
@named.boot no longer necessary;
from George Pontis (PR 3555);

ok jakob@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.86 2003/08/08 09:51:54 jmc Exp $
d143 1
a143 1
Administrators should make changes to the default settings by creating a
a144 5
.Pa /etc/rc.conf.local .
There are two possible strategies:
Copy
.Pa /etc/rc.conf
to
d146 2
a147 11
and directly edit the local file.
Note: the last thing
.Pa /etc/rc.conf
does is source the local file.
If you copy this file directly you
.Em must
remove the final line from
.Pa /etc/rc.conf.local .
A second possibility is to start with an empty
.Pa /etc/rc.conf.local ,
and add in values as desired.
@


1.86
log
@refer to RFCs consistently (RFC XXXX);
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.85 2003/07/25 09:36:20 jmc Exp $
d306 1
a306 5
.Pa /etc/rc.conf.local
and create the
.Pa named.boot
file in the appropriate place for
.Xr named 8 .
@


1.85
log
@no kerberos(1) so point people to info heimdal;
ok hin@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.84 2003/07/10 04:24:07 jmc Exp $
d600 1
a600 1
This is to implement the RFC2476 message submission protocol.
@


1.84
log
@- add some missing .Xr's and kill some dead ones
- .Dl for one-line displays

ok millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.83 2003/07/08 12:02:35 espie Exp $
d544 4
a547 2
If you are going to use
.Xr kerberos
@


1.83
log
@Document tuning limits in login.conf.
Pointed out by lerman@@quatramaran.ens.fr (`can't find it')

ok millert@@
nitpicking by jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.82 2003/06/27 11:00:39 henning Exp $
d121 1
a121 2
.Po Dq \&.
.Pc .
a247 1

d272 2
a273 3
.Bd -literal -offset indent
net.inet.ip.forwarding=1
.Ed
d276 2
a277 3
.Bd -literal -offset indent
net.inet6.ip6.forwarding=1
.Ed
d325 2
a326 3
.Bd -literal -offset indent
portmap=YES
.Ed
d352 1
a352 1
+:*::::::::
d481 2
a482 3
.Bd -literal -offset indent
wheel:*:0:root,myself
.Ed
a607 1
.br
d619 2
a620 3
.Bd -literal -offset indent
dhcpd_flags=-q
.Ed
d641 2
a642 3
.Bd -literal -offset indent
nfs_server=YES
.Ed
d679 2
a680 3
.Bd -literal -offset indent
/dev/wd0j /altroot ffs xx 0 0
.Ed
d683 2
a684 3
.Bd -literal -offset indent
ROOTBACKUP=1
.Ed
d847 1
d852 2
d855 1
d864 1
a864 2
.Xr krb.conf 5 ,
.Xr krb.realms 5 ,
d867 1
d869 1
d879 1
d882 2
a883 1
.Xr ext_srvtab 8 ,
d886 2
d893 1
d898 2
d902 1
@


1.82
log
@no more kerberos IV, PR3335
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.81 2003/05/10 06:33:38 jmc Exp $
d475 4
d873 1
@


1.81
log
@document that kernel automatically handles first swap partition
("swap_device" in swapctl -l) and does not need to be added to /etc/fstab.

krw@@, fries@@, rohee@@, millert@@, henning@@ ok.
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.80 2003/04/14 06:51:48 jmc Exp $
a486 2
.Xr login_krb4 8
or
a550 2
.Pa /etc/kerberosIV
or
a551 1
depending on the kerberos version used,
@


1.80
log
@standalone/stand alone -> stand-alone;

from NetBSD (Igor Sobrado);
httpd stuff passed to apache people;

ok millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.79 2003/04/13 11:41:10 jmc Exp $
a377 1
/dev/sd0b none swap sw 0 0
d400 1
a400 1
/dev/sd0b       131072    84656    46416    65%    0
@


1.79
log
@update for afterboot(8):

- changes should be made to rc.conf.local
- show prompts and use literal
- typos

rc.conf(8) also updated to reflect these changes

ok millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.78 2003/03/15 23:10:32 avsm Exp $
d645 1
a645 1
in its standalone mode.
@


1.78
log
@- "Third-Party [Ss]oftware" -> "third-party software"
- Xr to ports(7) instead of external web-page

ok pvalchev@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.77 2003/02/15 09:44:42 jmc Exp $
d50 1
a50 1
.Dl Ic # help
d58 1
a58 1
.Dl Ic man 1 ls
d93 1
a93 1
.Ic su
d95 1
a95 1
.Ic sudo
d134 29
a162 6
.Bl -tag -width date
.It Cm date 199901271504
Set the current date to January 27th, 1999 3:04pm.
.It Cm ln -fs /usr/share/zoneinfo/Canada/Atlantic /etc/localtime
Set the time zone to Atlantic Standard Time.
.El
d307 1
a307 1
If using a caching name server add the line "nameserver 127.0.0.1" first.
d310 1
a310 1
.Pa /etc/rc.conf
d328 1
a328 2
.Pa /etc/rc.conf
:
d376 1
a376 1
.Li # Ic cat /etc/fstab
d383 2
a384 1
.Li # Ic mount
d390 2
a391 1
.Li # Ic df
d398 2
a399 1
.Li # Ic pstat -s
d488 3
a490 1
.Xr kerberos 1
d494 1
a494 1
.Ss rc.conf, rc.local, rc.securelevel, rc.shutdown
d502 1
a502 1
.Pa /etc/rc.conf
d509 1
a509 1
.Pa /etc/rc.conf .
d550 1
a550 1
.Xr kerberos 1
d599 1
a599 1
.Pa /etc/rc.conf
d626 1
a626 1
.Pa /etc/rc.conf
d681 3
a683 1
The /altroot filesystem can optionally be used to provide a backup of the
a797 1
.Sm off
d799 5
a803 21
.Li #\  Xo
.Ic cd\ /usr/src/sys/arch/
.Ar somearch
.Ic /conf
.Xc
.Li #\  Xo
.Ic vi\ \&
.Ar SOMEFILE
.No \ \ \ (to\ make\ any\ changes)
.Xc
.Li #\  Xo
.Ic config\ \&
.Ar SOMEFILE
.Xc
.Li #\  Xo
.Ic cd\ ../compile/
.Ar SOMEFILE
.Xc
.Li #\  Xo
.Ic make
.Xc
a804 1
.Sm on
a806 2
.Ar somedir
is a writable directory,
d808 1
a808 3
is the architecture (e.g.
.Ic i386 ) ,
and
d810 2
a811 2
should be a name indicative of a particular configuration (often
that of the hostname).
d842 2
a843 2
.Bd -literal
.Li #\  Ic config Fl e o Ar bsd.new /bsd
d848 1
a851 1
.Ed
a859 1
.Xr kerberos 1 ,
@


1.77
log
@copyrights added;

file(1), magic(5): Ian F. Darwin
afterboot(8): Marshall M. Midden
x99token(1): Paul Borman
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.76 2003/01/29 16:53:36 jmc Exp $
d736 1
a736 1
ports collection includes a large set of Third-Party software.
d742 1
a742 1
.Pa http://www.openbsd.org/ports.html
d753 1
a753 1
There is also other Third-Party Software that is available
d873 1
@


1.76
log
@typos;

many tweaks by millert@@ (thanks)
thanks mpech@@ for help with adduser(8)

ok millert@@
@
text
@d1 31
a31 1
.\"	$OpenBSD: afterboot.8,v 1.75 2002/10/02 17:38:38 miod Exp $
@


1.75
log
@Add a small blurb about portmap being disabled by default, yet necessary
for YP operation.

ok deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.74 2002/09/26 07:26:19 deraadt Exp $
d154 1
a154 1
and, a PPP interface something like:
d422 1
a422 1
.Xr su 1 ,
d559 1
d707 1
a707 1
A lot of it is available as binary packages, that you can download from
@


1.74
log
@show nodev,nosuid lines; openbsd@@davidkrause.com
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.73 2002/08/22 20:28:01 stevesk Exp $
d268 12
d498 3
@


1.73
log
@sshd_config(5) now; ok markus@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.72 2002/02/22 02:02:33 miod Exp $
d315 4
a318 4
/dev/sd0d /usr ffs rw 1 2
/dev/sd0e /var ffs rw 1 3
/dev/sd0g /tmp ffs rw 1 4
/dev/sd0h /home ffs rw 1 5
d321 4
a324 4
/dev/sd0d on /usr type ffs (local)
/dev/sd0e on /var type ffs (local)
/dev/sd0g on /tmp type ffs (local)
/dev/sd0h on /home type ffs (local)
@


1.72
log
@Xr netstat(8)
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.71 2002/02/19 01:19:02 deraadt Exp $
d52 1
a52 1
.Xr sshd 8 ) .
@


1.71
log
@kbd command crud; private@@claudio.ch
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.70 2002/02/18 00:09:59 millert Exp $
d160 3
a162 4
If you wish to turn on multicast routing, see the section titled
.Dq Multicast routing.
in
.Pa /etc/netstart .
d841 1
@


1.70
log
@Mention that dhclient may need to be killed before re-running /etc/netstart.
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.69 2002/02/14 13:14:20 deraadt Exp $
d453 14
@


1.69
log
@no, i think the pr from s@@msmith.net was right
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.68 2002/02/10 01:07:05 deraadt Exp $
d215 5
@


1.68
log
@more /etc/ssh; openbsd@@davidkrause.com
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.67 2001/10/30 01:03:19 miod Exp $
d374 1
a374 1
.Sh CHANGING /ETC FILES
@


1.67
log
@vipw(8) invokes pwd_mkdb(8) automagically.
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.66 2001/10/14 17:24:19 millert Exp $
d46 1
a46 1
.Pa /etc/sshd_config
@


1.66
log
@Fix misplaced word; David Krause
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.65 2001/10/14 02:14:13 millert Exp $
d292 1
a292 4
.Xr vipw 8 ,
once this is done, you'll need to run
.Ic pwd_mkdb /etc/master.passwd
to regenerate the password databases.
@


1.65
log
@Update for new sendmail setup, based on a patch from David Krause
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.64 2001/10/05 14:45:54 mpech Exp $
d514 2
a515 2
.Pa /etc/mail/sendmail.cf file
in accordance with the comments therein.
@


1.64
log
@Powered by @@mantoya:
o) start new sentence on a new line;
o) minor mdoc fixes;
millert@@ ok

Tip of the day:   www.mpechismazohist.com
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.63 2001/10/04 16:56:52 mpech Exp $
d493 1
a493 1
.Pa /etc/mail/sendmail.cf
d495 1
a495 1
.Pa openbsd-proto.mc
d503 3
a505 2
For the default installation, sendmail is configured to only process
jobs that have been the queued and to not accept messages over the network.
d509 1
a509 1
To cause sendmail to accept network connections, modify the
d513 2
d516 2
d526 3
@


1.63
log
@we don't like .Pp and blank lines before/after .Ss;

millert@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.62 2001/08/25 14:57:44 aaron Exp $
d392 3
a394 3
whenever the system is booted. To keep any custom message intact, ensure
that you leave two blank lines at the top, or your message will be
overwritten.
d513 3
a515 3
Note that sendmail now also listens on port 587 by default.  This
is to implement the RFC2476 message submission protocol.  You may
disable this via the
d517 2
a518 1
option in your sendmail .mc file.  See
d586 2
a587 2
root filesystem on a daily basis.  To take advantage of this, you must
have an entry in
@


1.62
log
@Various fixes from mpech@@ which I've been sitting on for 4 months. Slacker
slacker lazy bum bum bum slacker!
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.61 2001/03/11 05:56:43 aaron Exp $
a32 1
.Pp
@


1.61
log
@"netstat -r -n" -> "netstat -rn", it's shorter.
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.60 2001/03/06 19:56:52 brad Exp $
d429 1
a429 1
.Pa rc.securelevel ,
d431 1
a431 1
.Pa rc.shutdown.
d587 5
a591 1
have an entry in /etc/fstab with 'xx' for the mount option:
d601 3
a603 1
so that the /etc/daily script will make a daily backup of the root filesystem.
d669 1
a669 1
.Pa ftp://ftp.openbsd.org/
d815 1
a816 1
.Xr mount 8 ,
@


1.60
log
@first sweep ...
OpenBSD -> .Ox
NetBSD -> .Nx
FreeBSD -> .Fx
--
Ok'd by aaron@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.59 2001/03/01 16:11:23 aaron Exp $
d171 1
a171 1
.Ic netstat -r -n
@


1.59
log
@A slew of share/ man page fixes; nordin@@cse.ogi.edu. These have been sitting
in my INBOX since Nov 6, 2000, probably forgot about them since the tree was
frozen at that time.
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.58 2000/11/20 08:00:04 deraadt Exp $
d659 3
a661 1
The OpenBSD ports collection includes a large set of Third-Party software.
@


1.58
log
@various Xr fixes; nordin@@cse.ogi.edu
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.57 2000/10/30 18:22:31 deraadt Exp $
d774 1
a792 1
.Xr rbootd 8 ,
a803 1
.Xr domainname 1 ,
d811 1
@


1.57
log
@src not unpacked on CD-ROM anymore
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.56 2000/10/30 18:21:37 espie Exp $
d410 1
a410 1
.Xr su 8 ,
d792 1
a792 1
.Xr rbootd 5 ,
d804 1
a804 1
.Xr domainname 8 ,
@


1.56
log
@packages, not ports. Ok'd deraadt@@, aaron@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.55 2000/10/26 22:23:45 deraadt Exp $
a689 29
.Pp
To compile your own kernel off a CD-ROM do the following:
.Sm off
.Bd -literal -offset indent
.Li #\  Xo
.Ic cd\ /
.Ar somedir
.Xc
.Li #\  Xo
.Ic cp\ /usr/src/sys/arch/
.Ar somearch
.Ic /conf/
.Ar SOMEFILE
.Ic \ .
.Xc
.Li #\  Xo
.Ic vi\ \&
.Ar SOMEFILE
.No \ \ \ (to\ make\ any\ changes)
.Xc
.Li #\  Xo
.Ic config\ -s\ /usr/src/sys\ -b\ .\ \&
.Ar SOMEFILE
.Xc
.Li #\  Xo
.Ic make
.Xc
.Ed
.Sm on
@


1.55
log
@put back the motd gets modified message; pjanzen
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.54 2000/10/26 00:23:33 deraadt Exp $
d659 10
a668 1
The simple way is to copy source and compile and link/load.
d676 5
a680 9
Install any of a large group of Third-Party Software that is available
in source form.
See
.Pa http://www.openbsd.org
under
.Sq Ports: a Nice Way to Get Third-Party Software .
.Pp
You may have some difficulty installing due to various compiling errors.
Don't get discouraged easily!
a682 5
One recent item says to delete
.Pa -lcrypt
from
.Pa Makefile Ns No s
as the crypt routines are now present in the standard libraries.
d824 1
@


1.54
log
@delete absolutely ridiculous crap
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.53 2000/10/20 23:27:21 obecian Exp $
d388 8
@


1.53
log
@typo - s/sshd.conf/sshd_config  for where to permit/deny root logins
found by john@@maKintosh.com
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.52 2000/10/18 16:38:27 aaron Exp $
a387 12
.Ss /etc/motd
Edit
.Pa motd
to make lawyers comfortable and make sure that no mention
of the word "Welcome" appears.
(Some U.S. lawyers have stated that
the word "Welcome" is an invitation to come on in.)
Note that this file is modified by
.Pa /etc/rc
whenever the system is booted. To keep any custom message intact, ensure
that you leave two blank lines at the top, or your message will be
overwritten.
@


1.52
log
@People shouldn't need to edit /etc/netstart, but they can change rc.shutdown.
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.51 2000/10/18 16:34:02 deraadt Exp $
d47 1
a47 1
.Pa /etc/sshd.conf
@


1.51
log
@do not say NIS
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.50 2000/10/13 04:09:22 aaron Exp $
d429 1
a429 1
.Ss rc.conf, netstart, rc.local, rc.securelevel
a431 1
.Pa /etc/netstart ,
d433 1
d435 1
a435 1
.Pa rc.securelevel .
@


1.50
log
@Remove unwanted trailing whitespace.
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.49 2000/10/06 18:18:39 aaron Exp $
d265 1
a265 1
.Ss YP verification (NIS)
@


1.49
log
@Root logins are now permitted over ssh by default (this has been discussed
over and over).
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.48 2000/07/18 01:27:41 deraadt Exp $
d135 1
a135 1
Read the 
d145 1
a145 1
	inet 127.0.0.1 netmask 0xff000000 
d161 1
a161 1
If you wish to turn on multicast routing, see the section titled 
d639 1
a639 1
This mail contains 
d652 1
a652 1
.Xr mtree 8 
d765 1
a765 1
If you are building your kernel again, before you do a 
d791 1
a791 1
.Bd -literal 
d799 1
a799 1
boot time in the kernel image. 
@


1.48
log
@do not show a custom fstab file; espie
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.47 2000/06/17 15:19:01 deraadt Exp $
d42 1
a42 1
Login on the console as
d44 10
a53 7
You will not be able to login over the network \(em only on the console.
This behavior is controlled through the
.Pa /etc/ttys
file.
See
.Xr ttys 5
for more information.
d55 1
a55 1
Upon successful login, you may see the message
@


1.47
log
@in current, no need to talk about ssl packages
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.46 2000/06/11 21:03:40 millert Exp $
d312 4
a315 4
/dev/sd0d /usr ffs rw,nodev 1 2
/dev/sd0e /var ffs rw,nodev,noexec 1 2
/dev/sd0g /tmp ffs rw,nodev,noexec,nosuid 1 2
/dev/sd0h /home ffs rw,nodev,nosuid 1 2
d318 4
a321 4
/dev/sd0d on /usr type ffs (local, nodev)
/dev/sd0e on /var type ffs (local, nodev, noexec)
/dev/sd0g on /tmp type ffs (local, nodev, noexec, nosuid)
/dev/sd0h on /home type ffs (local, nodev, nosuid)
@


1.46
log
@newaliases(1) -> newaliases(8)
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.45 2000/04/28 00:54:29 itojun Exp $
a374 83
.Sh INSTALLING SHARED CRYPTO LIBRARIES WITH RSA INCLUDED
Two
.Ox
libraries
.Pf ( Pa libssl
and 
.Pa libcrypto ,
based on OpenSSL) implement many
cryptographic functions which are used by OpenBSD programs like 
.Xr ssh 1 ,
.Xr httpd 8 ,
and
.Xr isakmpd 8 .
Due to patent licensing reasons, those libraries may not be included
on the CD -- instead the base distribution contains libraries which have had
the troublesome code removed -- the programs listed above will not be fully
functional as a result.
Libraries which _include_ the troublesome routines
are available and can be FTP installed, as long as you meet the following
(legal) criteria:
.Ss Outside the USA, no restrictions apply
Since the RSA algorithm patent by RSA Inc. only applies in the United States
you can use the free
.Pa ssl27.tgz
package.
System install scripts on machine architectures that support
shared libraries will offer to let you install this package when you
are installing your system.
To see if you have it installed, type:
.Bl -tag -width Ds
.It Ic pkg_info ssl27
.El
.Pp
If the
.Pa ssl27
package is not installed, 
.Xr pkg_info 8 
will display a message that it can't find package `ssl27'.
If you did not install the package when you installed your system, 
You can install it with a 
.Xr pkg_add 8
command similar to:
.Bl -tag -width Ds
.It Ic pkg_add ftp://ftp.openbsd.org/pub/OpenBSD/2.7/packages/<a>/ssl27.tgz
.El
.Pp
replacing
.Dq <a>
with your machine architechture, e.g.,
.Dq i386
for Intel-based machines.
.Ss Inside the USA, non-commercial use of RSAREF is permitted
Non-commercial entities in the USA may install the
.Pa sslUSA27.tgz
package, which uses RSAREF.
You install this with a 
.Xr pkg_add 8
command similar to: 
.Bl -tag -width Ds
.It Ic pkg_add ftp://ftp.openbsd.org/pub/OpenBSD/2.7/packages/<a>/sslUSA27.tgz
.El
.Pp
replacing
.Dq <a>
with your machine architechture, e.g.,
.Dq i386
for Intel-based machines.
.Ss "Commercial entities in the USA are left in the cold."
While unfortunate, this is due to the way RSA Inc. licences their patent
in the USA. (This is how the USA crypto export policy feels to the
rest of the world).
.Ss Shared library support is required
These packages update your system by installing shared libraries in
.Pa /usr/local/lib. 
This only works if your machine architecture supports shared libraries.
The
.Pa ssl27
and 
.Pa sslUSA27
packages are only available for machines which support shared libraries.
If your architecture does not support shared libraries and you wish it
did, consider donating hardware, cash, or quality time to the project
to assist developers in supporting your platform better.
@


1.45
log
@sync with reality. (1) lo0 has IPv6 address.
(2) typo in sysctl mib (ipv6 forwarding)
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.44 2000/04/27 19:44:17 millert Exp $
d573 1
a573 1
.Xr newaliases 1
a891 1
.Xr newaliases 1 ,
d923 1
@


1.44
log
@Mention that sendmail listens on port 587 too now
Tell user that sendmail is not set to listen on any ports by default
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.43 2000/04/24 04:34:31 todd Exp $
d139 4
a142 2
lo0: flags=8009<UP,LOOPBACK,MULTICAST>
	inet 127.0.0.1 netmask 0xff000000
d221 1
a221 1
net.inet6.ip6.forward=1
@


1.43
log
@add descriptions for ipv6, dhcpd, and others to bring this uptodate
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.42 2000/04/18 17:27:17 kjell Exp $
d586 17
@


1.42
log
@operator alias points to root by default.
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.41 2000/04/18 16:57:14 kjell Exp $
d147 1
d173 1
a173 2
Destination    Gateway           Flags  Refs     Use  Mtu
Interface
d180 14
d217 5
d232 1
a232 1
.Pa /etc/ifaliases .
d586 18
d649 14
d859 2
a860 2
Additionally, you can permanently save the changes made with UKC during boot
time in the kernel image. 
d897 1
@


1.41
log
@Answer the motd FAQ here, too.  ok aaron@@.
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.40 2000/04/18 15:14:36 millert Exp $
d542 1
a542 1
and set the four standard aliases to go to either a mailing list, or
a548 1
operator:	sysadm
@


1.40
log
@sendmail.cf and aliases live in /etc/mail now; reinhard@@sammer.net
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.39 2000/04/16 20:19:45 deraadt Exp $
d454 5
@


1.39
log
@2.7
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.38 2000/04/16 17:56:57 aaron Exp $
d536 1
a536 1
.Pa /etc/aliases
d553 1
a553 1
.Pa /etc/sendmail.cf
d615 1
a615 1
.Pa aliases.db , pwd.db , spwd.db ,
@


1.38
log
@Use .Ox, not .Os, when referring to ``OpenBSD'' in the general text domain.
@
text
@d1 1
a1 1
.\"	$OpenBSD: afterboot.8,v 1.37 2000/04/16 17:51:52 aaron Exp $
d377 1
a377 1
.Pa ssl26.tgz
d384 1
a384 1
.It Ic pkg_info ssl26
d388 1
a388 1
.Pa ssl26
d391 1
a391 1
will display a message that it can't find package `ssl26'.
d397 1
a397 1
.It Ic pkg_add ftp://ftp.openbsd.org/pub/OpenBSD/2.6/packages/<a>/ssl26.tgz
d407 1
a407 1
.Pa sslUSA26.tgz
d413 1
a413 1
.It Ic pkg_add ftp://ftp.openbsd.org/pub/OpenBSD/2.6/packages/<a>/sslUSA26.tgz
d430 1
a430 1
.Pa ssl26
d432 1
a432 1
.Pa sslUSA26
d799 1
a799 1
OpenBSD 2.6-beta (GENERIC.rz0) #0: Mon Oct  4 03:57:22 MEST 1999
@


1.37
log
@RCSid
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d31 1
a31 1
.Os
@


1.36
log
@typo
@
text
@d1 1
@


1.35
log
@again, remind admins how to read man pages
@
text
@d590 1
a590 1
.Pa /etc/rbootd.config
@


1.34
log
@Improve; deraadt@@ ok
@
text
@d9 1
d17 3
a19 1
is assumed.
d26 7
a32 4
.Ic man 1 ls .
.\"
.\" XXX This should be an enumerated list
.\"
@


1.33
log
@Do not leave `(' characters dangling at the end of lines; instead, use the
appropriate mdoc macros to handle these cases.
@
text
@d14 3
d19 2
a20 2
There are man pages and other methodologies available for doing that.
For example, to view the manual page on the
d29 2
a30 2
bugs in the release have been found.  All significant and easily fixed
problems will be reported at
d32 2
a33 2
The web page will mention if a problem is security related.  And it
is good advice to check this page regularly.
d37 2
a38 2
You will not be able to login over the network \(em only on the console. This
behavior is controlled through the
d40 2
a41 1
file. See
a43 9
.Ss System Date
Check the system date with the
.Xr date 1
command.
If needed, change the date, and/or change the symbolic link of
.Pa /etc/localtime
to the correct time zone in the
.Pa /usr/share/zoneinfo
directory.
d45 14
a58 7
Examples:
.Bl -tag -width date
.It Cm date 199901271504
Set the current date to January 27th, 1999 3:04pm.
.It Cm ln -fs /usr/share/zoneinfo/Canada/Atlantic /etc/localtime
Set the time zone to Atlantic Standard Time.
.El
d60 4
a63 1
Check the password for the root user.
d66 2
a67 2
Do not choose any word in any
language.  It is common for an intruder to use dictionary attacks.
d78 2
a79 1
for most shells. Furthermore, the super-user's
d84 17
d103 1
a103 1
.Xr hostname 1
d106 2
a107 2
.Xr hostname
if you need to change it.
d111 1
a111 1
.Ss Verify network interfaces configured correctly
d119 1
a119 1
is the interface name, e.g.
d124 2
a125 1
if you do not wish to reboot. Read the 
d127 3
a129 2
for more information on the format of the
.Pa /etc/hostname. Ns Ar interface .
d136 1
a136 1
an ethernet interface something like:
a146 3
\!\"--------------------------------------------------------------------------
\!\" Will someone else fill in the slip interface.
\!\"--------------------------------------------------------------------------
d156 2
a157 2
.Ss Check for correct routing
Do a
d159 2
a160 1
command.  The output will look something like:
d175 1
a175 1
Fix by editing the file
d177 10
a186 1
and using
d188 2
a189 5
and
.Ic route add
if you do not wish to reboot.
See
.Xr route 8 .
d191 1
a191 1
If you wish to route packets between interfaces put
d196 1
a196 1
in
d198 3
a200 1
or by compiling a new kernel with the GATEWAY option.
d203 3
a205 1
You can add new "virtual interfaces" by adding the required entries to
d210 2
a211 1
file.  It may look something like:
d229 2
a230 1
name server for your domain.  In both these cases, make sure that
d237 2
a238 1
command. If necessary, correct it by editing the
d240 2
a241 1
file. The
d267 2
a268 2
There are many more YP man pages available to help you. You can find more
information by starting with
d270 1
a270 1
.Ss Check disks are mounted correctly
d272 1
a272 1
comparing the file
d274 1
a274 1
against the output of the
d313 3
d322 2
a323 2
.Pa /etc/ccd.conf
and use the
d325 1
a325 1
command to unload, and the
d330 1
a330 1
.Xr umount 8
d363 2
a364 1
functional as a result.  Libraries which _include_ the troublesome routines
d368 1
a368 1
Since the RSA algorithm patent by RSA inc. only applies in the United States
d371 2
a372 1
package. System install scripts on machine architectures that support
d375 3
a377 3
To see if you have it installed, type
.Bl -tag -width pkg_add
.It pkg_info ssl26
d384 2
a385 2
will display a message that it can't find package `ssl26'. If you did
not install the package when you installed your system, 
d388 3
a390 3
command similar to: 
.Bl -tag -width pkg_add
.It pkg_add ftp://ftp.openbsd.org/pub/OpenBSD/2.6/packages/<a>/ssl26.tgz
d392 7
a398 3

replacing <a> with your machine architechture, e.g. i386.
.Ss Inside the USA, non-commercial use of RSAREF is permitted.
d401 2
a402 1
package, which uses RSAREF. You install this with a 
d405 2
a406 2
.Bl -tag -width pkg_add
.It pkg_add ftp://ftp.openbsd.org/pub/OpenBSD/2.6/packages/<a>/sslUSA26.tgz
d408 6
a413 1
replacing <a> with your machine architechture, e.g. i386.
d415 1
a415 1
While unfortunate, this is due to the way RSA inc. licences their patent
d418 1
a418 1
.Ss Shared Library Support is Required.
d422 1
a422 1
the
d432 2
a433 1
such as adding users, etc.  Many of the following sections may be skipped
d436 2
a437 1
section if you won't be using Kerberos). We suggest that you
d444 2
a445 1
of the word "Welcome" appears.  (Some U.S. lawyers have stated that
d448 2
a449 1
Add users.  There is an
d465 2
a466 1
group if they need root access (non-Kerberos).  For example:
d477 6
a482 2
Check for any local changes needed in the files:
.Pa /etc/rc.conf , /etc/netstart , /etc/rc.local , rc.securelevel .
d484 1
a484 1
.Pa /etc/rc.securelevel
d489 2
a490 1
the X Display Manager. To do this, change the value of xdm_flags in
d509 1
a509 1
turn off extra stuff that you do not need,
d511 5
d521 1
a521 1
master, go into the directory
d561 2
a562 1
as needed.  You will have to turn it on in
d587 1
a587 1
.Ss Daily, Weekly, Monthly scripts
d592 2
a593 1
scripts.  Your site specific things should go into
d619 3
a621 1
Do you need anything else?  Do you wish to change things?  e.g. if you do not
d636 3
a638 2
on files, directories, and devices;  root should have received email
with subject: "<hostname> daily insecurity output.". This email contains 
d647 4
a650 3
The best bet is to follow the advice in that list. The
recommended setting is the first item in parentheses, while
the current setting is the second one. This list is generated by
d653 2
a654 2
.Ic /etc/mtree/special 
.  Use
d664 2
a665 2
Copy vendor binaries and install them.  You will need to install any
shared libraries, etc.
d671 2
a672 1
in source form.  See
d678 2
a679 1
Don't get discouraged easily!  Sometimes checking the mailing lists for
d684 1
a684 2
.Pa Makefile
.Ns s
d690 3
a692 2
kernel at boot. In particular, note which devices were not configured. This
information will prove useful when editing kernel configuration files.
d694 1
a694 1
To compile your own kernel off a CDROM do the following:
d797 1
a797 1
Additionally, you can permantly save the changes made with UKC during boot
@


1.32
log
@Typo
@
text
@d308 4
a311 2
Two OpenBSD libraries (
.Pa libssl
d313 2
a314 2
.Pa libcrypto
, based on OpenSSL) implement many
@


1.31
log
@Clearer note about the daily security report.
@
text
@d579 1
a579 1
).  Use
@


1.30
log
@argh, fix the new formatting errors
@
text
@d558 1
d563 17
a579 4
on things.  The best bet is to have permissions as in the security list.
(The first of the two listed permissions, and the first group number of
the two).
Use
d762 1
@


1.29
log
@Mention a few more helpful man pages
@
text
@d102 2
a103 1
.Xr hostname.if 5 for more information on the format of the
@


1.28
log
@Fix other half of PR 1047
@
text
@d101 3
a103 1
if you do not wish to reboot.
d161 1
a161 1
If you wish to route packets between interfaces you do that by putting
d186 1
a186 1
For a local caching name server to run
d223 3
a225 1
Once this is done, you'll need to run
@


1.27
log
@repair multicast routing description block; op21@@squish.org
@
text
@d668 9
@


1.26
log
@fix heading; post-2.6 src is unlocked
@
text
@d123 4
a126 6
You may wish to turn off multicast routing in
.Pa /etc/netstart
by commenting it out, i.e. by placing a # sign at the start of the line:
.Bd -literal -offset indent
# route add -net 224.0.0.0 -interface $hostname
.Ed
@


1.25
log
@typos
@
text
@d357 1
a357 1
.Ss Commercial entities in the USA are left in the cold.
@


1.24
log
@check errata.html after installing
@
text
@d322 2
a323 2
since the RSA algorithm patent by RSA inc. only applies in the United States
so you can use the free
@


1.23
log
@talk about config -e
@
text
@d24 7
@


1.22
log
@commit pstat chunk; tony@@polarcap.org
@
text
@d674 16
@


1.21
log
@Add section on adding ssl26 library packages where appropriate
@
text
@d255 2
a256 2
Device      512-blocks     Used    Avail Capacity  Type
/dev/sd0b       131072    84656    46416    65%    Interleaved
@


1.20
log
@ttys(5), not tty(5)
@
text
@d297 69
@


1.19
log
@- remove all trailing whitespace
     * except when it is escaped with a `\' at the end of the line
- fix remaining .Nm usage as well
- this is from a patch I received from kwesterback@@home.com, who has been
  working on some scripts for fixing formatting errors in mdoc'd man pages

Ok, so there could be a cost/benefit debate with this commit, but since I have
the patch we might as well commit it...
@
text
@d31 1
a31 1
.Xr tty 5
@


1.18
log
@use ln -fs
@
text
@d21 1
a21 1
.\" 
d470 1
a470 1
like root getting standard output of the daily scripts, and want only 
d651 1
a651 1
.Xr ypbind 8 
@


1.17
log
@Xr dhcp(8)
@
text
@d47 1
a47 1
.It Cm ln -s /usr/share/zoneinfo/Canada/Atlantic /etc/localtime
@


1.16
log
@rc.securelevel ships with uncommented xntp lines
@
text
@d123 3
d639 1
@


1.15
log
@remove argument from .Os macros so value in /usr/share/tmac/mdoc/doc-common
is used instead; kwesterback@@home.com
@
text
@d340 1
a340 11
requires:
a) making sure the package is installed,
b) uncommenting the lines in
.Pa rc.securelevel ,
i.e. delete the leading # signs of:
.Bd -literal -offset indent
if [ -x /usr/local/sbin/ntpd ]; then
     /usr/local/sbin/tickadj -Aq
     echo -n ' ntpd';       /usr/local/sbin/ntpd
fi
.Ed
@


1.14
log
@minor cleanups; d@@
@
text
@d4 1
a4 1
.Os OpenBSD
@


1.13
log
@be a little more helpful in regards to setting the date and enabling yp
services; note how to get xdm going; note to check dmesg before compiling
new kernel; other misc cleanups
@
text
@d297 1
a297 1
if you are not using that package (for example the
d299 1
a299 1
section).  My suggestion is to
@


1.12
log
@
The install script now prompts for a root password.
@
text
@d20 1
a20 1
.Ic man 1 ls
a23 1
\!\"--------------------------------------------------------------------------
d26 7
a32 3
.Ql Ic root .
You will not be able to login over the network \(em only on the console.
\!\"--------------------------------------------------------------------------
d42 8
a49 1
\!\"--------------------------------------------------------------------------
d51 1
a51 1
Check the password for the root login.
d58 3
a60 2
to change it.  It is a good idea to always specify the full path
name for both the
d62 1
a62 1
and the
d66 5
a70 2
for most shells.
\!\"--------------------------------------------------------------------------
a80 1
\!\"--------------------------------------------------------------------------
d90 1
a90 1
.Ic le0 )
a122 1
\!\"--------------------------------------------------------------------------
a162 1
\!\"--------------------------------------------------------------------------
a187 1
\!\"--------------------------------------------------------------------------
d191 1
a191 1
command, and edit
d193 5
a197 2
to correct it.  You may change the running system's YP domain name with the
.Xr domainname
d203 1
a203 1
.Xr passwd 5 ,
d206 13
a218 2
There are many more YP man pages on the system.  You can find more information
by starting with
a219 1
\!\"--------------------------------------------------------------------------
d259 2
a261 2
and
.Xr mount 8
a264 1
\!\"--------------------------------------------------------------------------
a280 1
\!\"--------------------------------------------------------------------------
a293 1
\!\"--------------------------------------------------------------------------
a301 1
\!\"--------------------------------------------------------------------------
a307 1
\!\"--------------------------------------------------------------------------
a334 1
\!\"--------------------------------------------------------------------------
d346 1
a346 1
if [ -x /usr/local/sbin/xntpd ]; then
d348 1
a348 1
     echo -n ' xntpd';       /usr/local/sbin/xntpd
d351 5
a355 1
\!\"--------------------------------------------------------------------------
d357 5
a361 1
Edit /etc/printcap and /etc/hosts.lpd to get any printers set up.
a366 1
\!\"--------------------------------------------------------------------------
a374 1
\!\"--------------------------------------------------------------------------
a385 1
\!\"--------------------------------------------------------------------------
a401 1
\!\"--------------------------------------------------------------------------
a414 1
\!\"--------------------------------------------------------------------------
a424 1
\!\"--------------------------------------------------------------------------
a439 1
\!\"--------------------------------------------------------------------------
a444 1
\!\"--------------------------------------------------------------------------
a457 1
\!\"--------------------------------------------------------------------------
a470 1
\!\"--------------------------------------------------------------------------
a487 1
\!\"--------------------------------------------------------------------------
a498 1
\!\"--------------------------------------------------------------------------
a523 1
\!\"--------------------------------------------------------------------------
d525 6
d596 1
a596 1
that of the hostname.)
a611 1
\!\"--------------------------------------------------------------------------
a612 7
.Xr adduser 8 ,
.Xr aliases 5 ,
.Xr amd 8 ,
.Xr bootpd 8 ,
.Xr bootptab 5 ,
.Xr ccd 4 ,
.Xr ccdconfig 8 ,
a614 2
.Xr chown 8 ,
.Xr config 8 ,
a615 1
.Xr crontab 5 ,
d618 12
a629 1
.Xr domainname 8 ,
a630 1
.Xr ext_srvtab 8 ,
d634 5
a638 1
.Xr hostname 1 ,
d640 8
a649 5
.Xr kerberos 1 ,
.Xr krb.conf 5 ,
.Xr krb.realms 5 ,
.Xr make 1 ,
.Xr man 1 ,
a651 5
.Xr netstat 1 ,
.Xr newaliases 1 ,
.Xr passwd 1 ,
.Xr passwd 5 ,
.Xr rbootd 5 ,
a652 1
.Xr resolv.conf 5 ,
a654 1
.Xr su 1 ,
@


1.11
log
@More man page fixes. Particularly fix uses of it's/its, affect/effect,
then/than and such. Other miscellaneous problems fixed across these source
files.
@
text
@a27 1
There is no password initially.
d41 1
a41 1
Set the password for the root login.
@


1.10
log
@Typo.
@
text
@d147 1
a147 1
or by compiling a new kernel with the GATEWAY option.)
d641 1
a641 1
.Xr ypbind 8 .
@


1.9
log
@clean, reorder
@
text
@d643 1
a643 1
This document first appeared
@


1.8
log
@point people to /usr/share/sendmail and sendmail docs.  This could be better.
@
text
@d17 7
d26 2
a27 2
Login on console as
.Ql Xr root .
d29 1
a29 1
You will not be able to login over the network, only the console.
d33 1
a33 1
.Nm date
d35 1
a35 1
If needed, set the system date, and/or change the symbolic link of
d44 2
a45 1
as well as the upper and lower case alphabet.  Do not choose any word in any
d47 3
a49 3
Use the
.Nm /usr/bin/passwd
command to change it.  It is a good idea to always specify the full path
d51 1
a51 1
.Nm passwd
d53 2
a54 2
.Nm su
commands.  This inhibits the possibility of files placed in your execution
d59 2
a60 2
Type the
.Nm hostname
d63 1
a63 1
.Nm hostname
d71 1
a71 1
.Nm ifconfig -a
d74 8
a81 3
.Pa /etc/hostname.{INTERFACE}
and via
.Nm ifconfig
d89 1
a89 1
An ethernet interface something like:
d94 6
d101 1
a101 1
\!\" Will someone else fill in the ppp and slip interfaces.
d106 1
a106 1
by commenting out the line (placing a # sign at the start of a line):
d112 1
a112 1
.Ss Check for routing correct
d114 1
a114 1
.Nm netstat -r -n
d133 1
a133 1
.Nm route delete
d135 1
a135 1
.Nm route add
d137 2
d142 1
a142 1
# sysctl -w net.inet.ip.forwarding=1
d145 3
a147 3
early on in the boot process (ie. start of
.Pa /etc/netstart ,
or by compiling a new kernel with the option GATEWAY.
d153 2
a154 2
.Ss Bind Name Server
If you are using the Bind Name Server (DNS), check the
d166 2
a167 1
(Of course, you need to change "named_flags" in
d169 1
a169 1
and add the
d171 11
a181 9
file in the appropriate place.  The same holds true if this is the
name server for your domain.  In addition, make sure that
.Nm named
is running.
[Otherwise there are long waits while timeouts happen.])
\!\"--------------------------------------------------------------------------
.Ss YP verification
Check the domainname with the
.Nm domainname
d184 2
a185 2
to correct.  You may change the running system with the
.Nm domainname
d188 2
a189 2
.Nm ypbind .
Then perform the remaining
d195 1
a195 1
by starting at
d197 2
a198 1
.Ss Check disks are mounted correctly.
d200 1
a200 1
checking file
d203 3
a205 3
.Nm mount
and the
.Nm df
d209 1
a209 1
# cat /etc/fstab
d216 1
a216 1
# mount
d222 1
a222 1
# df
d229 3
d237 1
a237 1
.Nm umount
d239 2
a240 2
.Nm mount
commands as appropriate.  (See man pages.)
d242 1
a242 1
You may wish to do NFS partitions later, but you may do them now.
d245 3
a247 1
If you are using concatenated disks, edit
d250 1
a250 1
.Nm ccdconfig -U
d252 1
a252 1
.Nm ccdconfig -C
d255 2
a256 3
.Nm mount
and
.Nm umount
d261 5
a265 2
.Ss AMD
Go into the
d267 1
a267 1
directory if using this package and set it up by
d269 1
a269 1
.Pa amd.home.sample
d271 3
a273 36
.Pa amd.home .
You may wish to create a file
.Pa amd.home
in this directory, or alternatively supply your amd.home map via YP.
\!\"--------------------------------------------------------------------------
.Sh COMPILING A KERNEL
To compile your own kernel off a CDROM do the following:
.Bd -literal -offset indent
# cd /somewhere
# cp /usr/src/sys/arch/$ARCH/conf/SOMEFILE .
# edit SOMEFILE (to make any changes you want)
# config -s /usr/src/sys -b . SOMEFILE
# make
.Ed
.Pp
To compile a kernel inside a writable source tree, do the following:
.Bd -literal -offset indent
# cd /sys/arch/$ARCH/conf
# edit SOMEFILE (to make any changes you want)
# config SOMEFILE
# cd ../compile/SOMEFILE
# make
.Ed
.Pp
$ARCH should be the architecture (e.g. i386).  You can do a
.Nm make depend
so that you will have dependencies there the next time you do a compile.
.Pp
After either of these two steps, you can place the new kernel (called
.Pa bsd )
in
.Pa /
(i.e. /bsd) and the system will boot it next time.
Most people save their backup kernels as
.Pa /bsd.1 ,
.Pa /bsd.2 ...
d277 6
a282 6
such as adding of users, etc.  Many of the following sections may be skipped
if you are not using that package (for example
.Pa kerberos
section).  My suggestions are to
.Nm cd /etc
and edit most files.
d285 3
a287 1
Edit motd to make lawyers comfortable and make sure that no mention
d292 2
a293 2
Add users.  There is a
.Nm adduser
d296 1
a296 1
.Nm vipw
d302 2
a303 1
by hand if you desire.
d306 3
a308 4
.Pa /etc/group
under the
.Pa wheel
group if they need root access (non-kerberos).  Something like:
d314 1
a314 1
.Pa kerberos
d316 1
a316 1
.Pa kerberos
d321 1
a321 1
.Pa /etc/rc.conf, /etc/netstart, /etc/rc.local, rc.securelevel.
d327 2
a328 2
.Pa rc.securelevel
(delete the # signs):
d338 5
d355 1
a355 1
.Pa kerberos
d357 1
a357 1
.Pa kerberos
d360 1
a360 2
and configure
.Pa kerberos.
d379 1
a379 1
.Nm newaliases
d396 1
a396 1
.Ss Bootp server
d398 1
a398 1
.Pa bootp
d404 2
a405 2
.Nm bootpd
in stand-a-lone mode.
d419 1
a419 1
It is probably easier to reboot than get the daemons running, manually,
d421 1
a421 1
.Pa /etc/netstart.
d431 1
a431 1
.Pa /etc/daily, /etc/weekly,
d435 1
a435 1
.Pa /etc/daily.local, /etc/weekly.local,
d437 1
a437 1
.Pa /etc/monthly.local.
d446 1
a446 1
and edit as needed.
d449 2
a450 2
-- like
.Pa aliases.db, pwd.db, spwd.db,
d452 1
a452 1
.Pa localtime,
d454 1
a454 1
.Pa rmt,
d458 9
a466 6
Check what is running via
.Nm crontab -l
to see if anything unexpected is present.
Do you need anything else?  Do you wish to change things?  I do not
like root getting standard output of the daily scripts, only the security
scripts that are mailed internally:
d472 2
d476 1
a476 1
After the first nights security run, change ownerships and permissions
d481 2
a482 2
.Nm chmod ,
.Nm chgrp ,
d484 1
a484 1
.Nm chown
d487 1
a487 1
.Ss Install packages
d494 1
a494 1
.Nm man -k compat
d501 1
a501 1
.Pa Ports: a Nice Way to Get Third-Party Software.
d509 87
a595 2
.Pa Makefiles
as the routines are present in the normal libraries.
@


1.7
log
@Xr config 8
@
text
@d377 14
@


1.6
log
@beautifiaction from m4@@umn.edu. pr #349
@
text
@d498 1
@


1.5
log
@mention ifaliases
@
text
@d46 1
a46 1
commands.  This inhibits the possibility files placed in your execution
d119 1
a119 1
If you wish to route packets between interfaces you do that by doing
d126 2
a127 2
or by compiling a new kernel with the option GATEWAY.  By default,
packets are not forwarded due to RFC requirements.
d145 8
a152 3
(Of course, you need to change "named_flags" in /etc/rc.conf and add
the named.boot file in the appropriate place.  Same holds true if this
is the name server for you domain.  Also make sure "named" is running.
d163 3
a165 1
To start YP client services, simply run ypbind.  The perform the remaining
d170 2
a171 1
There are many more YP manpages on the system, more information start at
d263 3
a265 3
$ARCH should be the architecture (e.g. i386).  If you like, do a
"make depend" too so you'll have your dependencies there next time
you do a compile.
d271 2
a272 2
and the system will boot it next time.  Most people save their backup
kernels as
d301 1
a301 1
by hand if you desire.  As described in
d303 1
a303 1
make sure to put people in
d306 2
a307 1
.Pa wheel group if they need root access (non-kerberos).  Something like:
d339 1
a339 1
You might wish to tighten up security by editing:
d341 1
a341 1
as for example when installing X.
d420 2
a421 2
These scripts have been limited to keeping the system running without
filling up disk space from normal running processes and updating databases.
d457 2
a458 1
.Nm chmod
d460 1
a460 1
.Nm chgrp
d469 1
a469 1
(hint:
d471 1
a471 1
to find out about compatibily mode.
d490 1
d497 1
d504 1
d518 1
d530 2
a531 1
.Xr vipw 8 .
d533 1
a533 1
This document first appeared 
@


1.4
log
@describing building kernels
@
text
@d128 3
@


1.3
log
@recommend "lookup file bind"
@
text
@d232 33
@


1.2
log
@mention net.inet.ip.forwarding
@
text
@d138 1
@


1.1
log
@new afterboot man page, and root logins will be told about it
@
text
@d118 10
@
