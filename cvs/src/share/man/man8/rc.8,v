head	1.43;
access;
symbols
	OPENBSD_6_1_BASE:1.43
	OPENBSD_6_0:1.42.0.4
	OPENBSD_6_0_BASE:1.42
	OPENBSD_5_9:1.42.0.2
	OPENBSD_5_9_BASE:1.42
	OPENBSD_5_8:1.40.0.8
	OPENBSD_5_8_BASE:1.40
	OPENBSD_5_7:1.40.0.2
	OPENBSD_5_7_BASE:1.40
	OPENBSD_5_6:1.40.0.4
	OPENBSD_5_6_BASE:1.40
	OPENBSD_5_5:1.38.0.14
	OPENBSD_5_5_BASE:1.38
	OPENBSD_5_4:1.38.0.10
	OPENBSD_5_4_BASE:1.38
	OPENBSD_5_3:1.38.0.8
	OPENBSD_5_3_BASE:1.38
	OPENBSD_5_2:1.38.0.6
	OPENBSD_5_2_BASE:1.38
	OPENBSD_5_1_BASE:1.38
	OPENBSD_5_1:1.38.0.4
	OPENBSD_5_0:1.38.0.2
	OPENBSD_5_0_BASE:1.38
	OPENBSD_4_9:1.30.0.2
	OPENBSD_4_9_BASE:1.30
	OPENBSD_4_8:1.25.0.14
	OPENBSD_4_8_BASE:1.25
	OPENBSD_4_7:1.25.0.10
	OPENBSD_4_7_BASE:1.25
	OPENBSD_4_6:1.25.0.12
	OPENBSD_4_6_BASE:1.25
	OPENBSD_4_5:1.25.0.8
	OPENBSD_4_5_BASE:1.25
	OPENBSD_4_4:1.25.0.6
	OPENBSD_4_4_BASE:1.25
	OPENBSD_4_3:1.25.0.4
	OPENBSD_4_3_BASE:1.25
	OPENBSD_4_2:1.25.0.2
	OPENBSD_4_2_BASE:1.25
	OPENBSD_4_1:1.24.0.2
	OPENBSD_4_1_BASE:1.24
	OPENBSD_4_0:1.22.0.10
	OPENBSD_4_0_BASE:1.22
	OPENBSD_3_9:1.22.0.8
	OPENBSD_3_9_BASE:1.22
	OPENBSD_3_8:1.22.0.6
	OPENBSD_3_8_BASE:1.22
	OPENBSD_3_7:1.22.0.4
	OPENBSD_3_7_BASE:1.22
	OPENBSD_3_6:1.22.0.2
	OPENBSD_3_6_BASE:1.22
	OPENBSD_3_5:1.21.0.4
	OPENBSD_3_5_BASE:1.21
	OPENBSD_3_4:1.21.0.2
	OPENBSD_3_4_BASE:1.21
	OPENBSD_3_3:1.19.0.6
	OPENBSD_3_3_BASE:1.19
	OPENBSD_3_2:1.19.0.4
	OPENBSD_3_2_BASE:1.19
	OPENBSD_3_1:1.19.0.2
	OPENBSD_3_1_BASE:1.19
	OPENBSD_3_0:1.17.0.2
	OPENBSD_3_0_BASE:1.17
	OPENBSD_2_9:1.15.0.2
	OPENBSD_2_9_BASE:1.15
	OPENBSD_2_8:1.13.0.2
	OPENBSD_2_8_BASE:1.13
	OPENBSD_2_7:1.10.0.2
	OPENBSD_2_7_BASE:1.10
	OPENBSD_2_6:1.8.0.2
	OPENBSD_2_6_BASE:1.8
	OPENBSD_2_5:1.3.0.4
	OPENBSD_2_5_BASE:1.3
	OPENBSD_2_4:1.3.0.2
	OPENBSD_2_4_BASE:1.3
	OPENBSD_2_3:1.1.1.1.0.8
	OPENBSD_2_3_BASE:1.1.1.1
	OPENBSD_2_2:1.1.1.1.0.6
	OPENBSD_2_2_BASE:1.1.1.1
	OPENBSD_2_1:1.1.1.1.0.4
	OPENBSD_2_1_BASE:1.1.1.1
	OPENBSD_2_0:1.1.1.1.0.2
	OPENBSD_2_0_BASE:1.1.1.1
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@.\" @;


1.43
date	2016.09.05.12.23.11;	author jmc;	state Exp;
branches;
next	1.42;
commitid	5pi3gixetN9aAQvy;

1.42
date	2015.11.21.19.43.50;	author jmc;	state Exp;
branches;
next	1.41;
commitid	BLIpVU02Vbh7iC7F;

1.41
date	2015.09.21.09.23.35;	author jmc;	state Exp;
branches;
next	1.40;
commitid	nA9bz3w8ki0Cdhlp;

1.40
date	2014.07.22.07.38.52;	author ajacoutot;	state Exp;
branches;
next	1.39;
commitid	ag5cb295hdaa6SDL;

1.39
date	2014.07.14.09.21.04;	author ajacoutot;	state Exp;
branches;
next	1.38;
commitid	ZS2bkZQN85bChvhG;

1.38
date	2011.07.31.12.46.17;	author jmc;	state Exp;
branches;
next	1.37;

1.37
date	2011.07.31.10.58.58;	author schwarze;	state Exp;
branches;
next	1.36;

1.36
date	2011.04.29.07.08.27;	author jmc;	state Exp;
branches;
next	1.35;

1.35
date	2011.04.27.12.31.02;	author jmc;	state Exp;
branches;
next	1.34;

1.34
date	2011.04.27.00.03.42;	author jmc;	state Exp;
branches;
next	1.33;

1.33
date	2011.04.25.12.46.00;	author jmc;	state Exp;
branches;
next	1.32;

1.32
date	2011.04.25.08.25.44;	author jmc;	state Exp;
branches;
next	1.31;

1.31
date	2011.04.22.14.11.08;	author ajacoutot;	state Exp;
branches;
next	1.30;

1.30
date	2011.01.16.14.59.19;	author jmc;	state Exp;
branches;
next	1.29;

1.29
date	2011.01.16.14.27.21;	author jasper;	state Exp;
branches;
next	1.28;

1.28
date	2011.01.16.14.20.54;	author robert;	state Exp;
branches;
next	1.27;

1.27
date	2010.09.26.06.27.45;	author jmc;	state Exp;
branches;
next	1.26;

1.26
date	2010.09.25.23.14.14;	author schwarze;	state Exp;
branches;
next	1.25;

1.25
date	2007.05.31.19.19.59;	author jmc;	state Exp;
branches;
next	1.24;

1.24
date	2007.01.29.17.31.43;	author jmc;	state Exp;
branches;
next	1.23;

1.23
date	2007.01.29.17.23.44;	author jmc;	state Exp;
branches;
next	1.22;

1.22
date	2004.07.08.10.56.22;	author jmc;	state Exp;
branches;
next	1.21;

1.21
date	2003.07.29.12.42.37;	author jmc;	state Exp;
branches;
next	1.20;

1.20
date	2003.06.02.23.30.15;	author millert;	state Exp;
branches;
next	1.19;

1.19
date	2002.02.21.02.36.09;	author miod;	state Exp;
branches;
next	1.18;

1.18
date	2001.12.28.16.21.04;	author millert;	state Exp;
branches;
next	1.17;

1.17
date	2001.10.05.14.45.54;	author mpech;	state Exp;
branches;
next	1.16;

1.16
date	2001.08.03.15.21.17;	author mpech;	state Exp;
branches;
next	1.15;

1.15
date	2001.04.18.20.58.54;	author jakob;	state Exp;
branches;
next	1.14;

1.14
date	2001.03.11.05.46.51;	author aaron;	state Exp;
branches;
next	1.13;

1.13
date	2000.10.13.04.09.22;	author aaron;	state Exp;
branches;
next	1.12;

1.12
date	2000.08.20.18.42.39;	author millert;	state Exp;
branches;
next	1.11;

1.11
date	2000.06.18.17.04.52;	author aaron;	state Exp;
branches;
next	1.10;

1.10
date	2000.01.08.01.58.31;	author hugh;	state Exp;
branches;
next	1.9;

1.9
date	99.12.09.01.13.44;	author aaron;	state Exp;
branches;
next	1.8;

1.8
date	99.07.26.00.55.00;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	99.07.20.06.20.03;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	99.07.09.13.35.36;	author aaron;	state Exp;
branches;
next	1.5;

1.5
date	99.05.23.14.11.23;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	99.05.16.19.57.39;	author alex;	state Exp;
branches;
next	1.3;

1.3
date	98.09.07.16.44.37;	author aaron;	state Exp;
branches;
next	1.2;

1.2
date	98.06.26.03.30.14;	author millert;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.44.39;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.44.39;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.43
log
@consistency fix; from rob pierce
@
text
@.\"	$OpenBSD: rc.8,v 1.42 2015/11/21 19:43:50 jmc Exp $
.\"
.\" Copyright (c) 1980, 1991, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"     @@(#)rc.8	8.2 (Berkeley) 12/11/93
.\"
.Dd $Mdocdate: November 21 2015 $
.Dt RC 8
.Os
.Sh NAME
.Nm rc ,
.Nm rc.firsttime ,
.Nm rc.local ,
.Nm rc.securelevel
.Nd command scripts for system startup
.Sh SYNOPSIS
.Nm /etc/rc
.Nm /etc/rc.firsttime
.Nm /etc/rc.local
.Nm /etc/rc.securelevel
.Sh DESCRIPTION
.Nm rc
is the command script that is invoked by
.Xr init 8
when the system starts up.
It performs system housekeeping chores and starts up system daemons.
Additionally,
.Nm rc
is intricately tied to the
.Xr netstart 8
script, which runs commands and daemons pertaining to the network.
.Nm rc
is also used to execute any
.Xr rc.d 8
scripts defined in
.Xr rc.conf.local 8 .
The
.Nm rc.securelevel ,
.Nm rc.firsttime ,
and
.Nm rc.local
scripts hold commands which are pertinent only to a specific site.
.Pp
All of these startup scripts are controlled to some
extent by variables defined in
.Xr rc.conf 8 ,
which specify which daemons and services to run.
.Pp
Before
.Xr init 8
starts
.Nm rc ,
it sets the process priority, umask, and resource limits according to the
.Dq daemon
login class as described in
.Xr login.conf 5 .
It then starts
.Nm rc
and attempts to execute the sequence of commands therein.
.Pp
The first part of
.Nm rc
runs an
.Xr fsck 8
with option
.Fl p
to
.Dq preen
all disks of minor inconsistencies resulting
from the last system shutdown and to check for serious inconsistencies
caused by hardware or software failure.
If this auto-check and repair succeeds, then the second part of
.Nm rc
is run.
However, if the file
.Pa /fastboot
exists,
fsck will not be invoked.
The file is then removed so that fsck will be run on subsequent boots.
.Pp
The second part of
.Nm rc
then asks
.Xr rc.conf 8
for configuration variables,
mounts filesystems, saves
.Xr dmesg 8
output to the file
.Pa /var/run/dmesg.boot ,
starts system daemons,
preserves editor files,
clears the scratch directory
.Pa /tmp ,
and saves any possible core image that might have been
generated as a result of a system crash, with
.Xr savecore 8 .
.Pp
If at any point the boot script fails,
.Xr init 8
enters single-user mode,
allowing the superuser a shell on the console.
On exiting this mode,
init again invokes
.Nm rc ,
but this time without performing the file system preen.
.Pp
Before
.Nm rc
starts most system daemons,
.Xr netstart 8
is executed.
.Pp
.Nm rc.securelevel
is executed by
.Nm rc
to start daemons that must be run before the security level changes.
Following this,
.Nm rc
then sets the security level to '1' if it wasn't set already by
.Nm rc.securelevel .
See
.Xr securelevel 7
for the effects of setting the security level.
.Pp
If
.Nm rc.firsttime
exists, it is executed once and then deleted.
Any output is mailed to root.
.Pp
.Nm rc.local
is executed towards the end of
.Nm rc
(it is not the very last as there are a few services that must be
started at the very end).
Normally,
.Nm rc.local
contains commands and daemons that are not part of the
stock installation.
.Sh FILES
.Bl -tag -width "/etc/rc.securelevelXX" -compact
.It Pa /etc/netstart
Command script for network startup.
.It Pa /etc/rc
Command scripts for system startup.
.It Pa /etc/rc.conf
System daemon configuration database.
.It Pa /etc/rc.conf.local
Site specific daemon configuration database.
.It Pa /etc/rc.d
Directory to hold
.Xr rc.d 8
scripts.
.It Pa /etc/rc.d/rc.subr
Functions used by the
.Xr rc.d 8
scripts.
.It Pa /etc/rc.firsttime
Commands run on the first boot after creation.
.It Pa /etc/rc.local
Site specific command scripts for system startup.
.It Pa /etc/rc.securelevel
Commands run before the security level changes.
.It Pa /etc/rc.shutdown
Commands run at system shutdown.
.It Pa /fastboot
Tells
.Nm rc
not to run
.Xr fsck 8
during the next boot.
.It Pa /var/run/dmesg.boot
Copy of
.Xr dmesg 8
saved by
.Nm rc
at boot time.
.El
.Sh SEE ALSO
.Xr sysctl.conf 5 ,
.Xr securelevel 7 ,
.Xr init 8 ,
.Xr netstart 8 ,
.Xr rc.conf 8 ,
.Xr rc.d 8 ,
.Xr rc.shutdown 8 ,
.Xr rcctl 8
.Sh HISTORY
The
.Nm
command appeared in
.Bx 4.0 .
@


1.42
log
@add missing NAME entries; ok schwarze
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.41 2015/09/21 09:23:35 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate: September 21 2015 $
d197 1
a197 1
copy of
d201 1
a201 1
at boot time
@


1.41
log
@scatter some rcctl refs; from rob pierce
discussed with ajacoutot
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.40 2014/07/22 07:38:52 ajacoutot Exp $
d32 1
a32 1
.Dd $Mdocdate: July 22 2014 $
d36 4
a39 1
.Nm rc
@


1.40
log
@Tweak after recebt rc.securelevel change.
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.39 2014/07/14 09:21:04 ajacoutot Exp $
d32 1
a32 1
.Dd $Mdocdate: July 14 2014 $
d207 2
a208 1
.Xr rc.shutdown 8
@


1.39
log
@No more "securelevel" variable.
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.38 2011/07/31 12:46:17 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate: July 31 2011 $
d141 2
a142 1
then sets the security level to '1'.
@


1.38
log
@zap trailing whitespace;
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.37 2011/07/31 10:58:58 schwarze Exp $
d141 1
a141 3
then sets the security level to the value specified in the
.Va securelevel
variable in that file.
@


1.37
log
@mention creation of /var/run/dmesg.boot
feedback and ok jmc@@, ok deraadt@@ on an earlier version
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.36 2011/04/29 07:08:27 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate: April 29 2011 $
d108 1
a108 1
mounts filesystems, saves 
@


1.36
log
@it seems in fifteen years, and eleven revisions of this page, we have never
actually had an update command; make one more, final, edit...

ok krw ian deraadt
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.35 2011/04/27 12:31:02 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate: April 27 2011 $
d108 5
a112 1
mounts filesystems, starts system daemons,
d194 6
@


1.35
log
@remove the blurb on siteXX.tgz and install.site: we can just drop this
text in without explaining what it is, and that is beyond the remit of this
(or currently any) man page; the pertinent info has been moved to faq4

as discussed with schwarze and ajacoutot...
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.34 2011/04/27 00:03:42 jmc Exp $
d47 1
a47 2
when booting into multi-user mode,
and after single user mode is exited.
d68 1
a68 3
.Xr rc.conf 8
and
.Xr rc.conf.local 8 ,
d79 3
d83 1
a83 5
When booting into multi-user mode
.Nm rc
is invoked with the argument
.Em autoboot .
The first portion of
d100 2
a101 3
.Xr fsck 8
will not be invoked during this boot.
This file is then removed so that fsck will be run on subsequent boots.
d104 1
a104 4
.Nm rc ,
which is also run by
.Xr init 8
after a single user shell terminates,
d115 9
@


1.34
log
@no need for rc(8) to do the job of rc.conf(8): remove the examples section;
ok ajacoutot schwarze
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.33 2011/04/25 12:46:00 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate: April 25 2011 $
a146 9
Do not install
.Nm rc.firsttime
from
.Pa siteXX.tgz
during a system install since the installer may write to it too.
Rather, install an
.Pa install.site
script and let that script append the required commands to
.Nm rc.firsttime .
@


1.33
log
@no need for a separate ENVIRONMENT section;
ok ajacoutot schwarze
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.32 2011/04/25 08:25:44 jmc Exp $
a165 47
.Sh CONFIGURATION EXAMPLES
The
.Xr rc.conf 8
file contains a series of Bourne shell syntax assignments that
are used to configure the kernel, the network,
and various other system daemons.
This file is then sourced by
.Pa /etc/rc .
Various comments in
.Xr rc.conf 8
make it clear what each variable does.
Refer to the specific man pages for each daemon to determine what that
subsystem does.
.Pp
For example, the
.Xr lpd 8
daemon is controlled by the following line:
.Bd -literal -offset indent
lpd_flags=NO        # for normal use: "" (or "-l" for debugging)
.Ed
.Pp
This does not start
.Xr lpd 8
at system startup.
To start
.Xr lpd 8 ,
the following entry can be used:
.Bd -literal -offset indent
lpd_flags=""        # for normal use: "" (or "-l" for debugging)
.Ed
.Pp
Alternately,
.Xr lpd 8
can be started with the
.Fl l
flag (to log remote connections):
.Bd -literal -offset indent
lpd_flags="-l"      # for normal use: "" (or "-l" for debugging)
.Ed
.Pp
To start the a and b
.Xr rc.d 8
scripts in reverse order, one could specify rc_scripts in the
the following way:
.Bd -literal -offset indent
rc_scripts="b a"
.Ed
@


1.32
log
@various small improvements, with some help from ingo;
ok schwarze ajacoutot
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.31 2011/04/22 14:11:08 ajacoutot Exp $
d32 1
a32 1
.Dd $Mdocdate: April 22 2011 $
d74 9
a212 9
.Sh ENVIRONMENT
Before
.Xr init 8
starts
.Nm rc ,
it sets the process priority, umask, and resource limits according to the
.Dq daemon
login class as described in
.Xr login.conf 5 .
@


1.31
log
@Move things around after recent rc(8) changes.

ok robert@@ jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.30 2011/01/16 14:59:19 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate: January 16 2011 $
d47 3
a49 2
during an automatic reboot and after single user mode is exited;
it performs system housekeeping chores and starts up system daemons.
d56 1
a56 1
is also used to execute
d58 2
a59 3
scripts defined in the rc_scripts variable in
.Nm rc.conf.local
in the specified order.
d67 1
a67 1
All of these startup scripts are (or can be) controlled to some
d74 1
a74 1
When an automatic reboot is in progress,
a91 1
.Pp
d101 3
a103 4
which is run after an auto-reboot succeeds and also if
.Nm rc
is invoked when a single user shell terminates (see
.Xr init 8 ) ,
d160 2
a161 2
file contains a series of Bourne-shell syntax assignments that
are used to configure kernel configurations, network configuration,
d163 1
a163 3
As described above, this file is sourced (using
.Xr sh 1
of course) by
d199 1
a199 1
scripts in a reserved order, one could specify rc_scripts in the
d204 1
a204 1
.Sh EXTERNAL INFLUENCES
d215 2
d219 4
d228 1
a228 1
File that contains functions used by the
d231 2
a234 6
.It Pa /etc/rc.conf
System daemon configuration database.
.It Pa /etc/rc.conf.local
Site specific daemon configuration database.
.It Pa /etc/rc.firsttime
Commands run on the first boot after creation.
a238 4
.It Pa /etc/login.conf
Login class capability database.
.It Pa /etc/netstart
Command script for network startup.
a246 1
.Xr login.conf 5 ,
d253 1
a253 3
.Xr rc.shutdown 8 ,
.Xr reboot 8 ,
.Xr savecore 8
@


1.30
log
@tweak previous;
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.29 2011/01/16 14:27:21 jasper Exp $
d54 6
a154 6
.Nm rc.local
is also used to execute
.Xr rc.d 8
scripts defined in the rc_scripts variable in
.Xr rc.conf 8
in the specified order.
d157 1
a157 1
also contains commands and daemons that are not part of the
@


1.29
log
@- remove double word
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.28 2011/01/16 14:20:54 robert Exp $
d153 1
a153 1
.Nm rc.conf
@


1.28
log
@hook rc.subr.8 to the build and create a link to rc.d.8 and
document the missing pieces in rc(8) and rc.shutdown(8)
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.27 2010/09/26 06:27:45 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate: September 26 2010 $
d201 1
a201 1
To start the the a and b
@


1.27
log
@avoid Xr to self;
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.26 2010/09/25 23:14:14 schwarze Exp $
d32 1
a32 1
.Dd $Mdocdate: September 25 2010 $
d149 6
d157 1
a157 1
contains commands and daemons that are not part of the
d200 8
d221 8
d259 1
@


1.26
log
@Document rc.firsttime; while here, sprinkle some .Pa in FILES.
Based on patches from Tilo Stritzky <t dot stritzky at arcor dot de>
FILES wording provided by oga@@; feedback and ok jmc@@; "go ahead" deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.25 2007/05/31 19:19:59 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate: May 31 2007 $
d225 1
a225 1
.Xr rc 8
@


1.25
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.24 2007/01/29 17:31:43 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate$
d40 1
d55 2
a56 1
.Nm rc.securelevel
d61 1
a61 1
All four of these startup scripts are (or can be) controlled to some
d130 14
d205 1
a205 1
.It /etc/rc
d207 1
a207 1
.It /etc/rc.local
d209 1
a209 1
.It /etc/rc.conf
d211 1
a211 1
.It /etc/rc.conf.local
d213 3
a215 1
.It /etc/rc.securelevel
d217 1
a217 1
.It /etc/rc.shutdown
d219 1
a219 1
.It /etc/login.conf
d221 1
a221 1
.It /etc/netstart
@


1.24
log
@add /fastboot to FILES, since these pages discuss that file;
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.23 2007/01/29 17:23:44 jmc Exp $
d32 1
a32 1
.Dd December 11, 1993
@


1.23
log
@avoid ambiguous wording; from Mark Lumsden
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.22 2004/07/08 10:56:22 jmc Exp $
d205 6
@


1.22
log
@clarify which of the rc.* files should/should not be edited;

- remove redundant (duplicate) section in afterboot(8)
- limit rc(8) SYNOPSIS to what the page actually describes
- grammar, formatting, etc.
- add FILES to rc(8)
- add securelevel(7) .Xr to SEE ALSO in rc(8)

requested by and ok henning@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.21 2003/07/29 12:42:37 jmc Exp $
d90 1
a90 1
This file is then removed so that it will be run on subsequent boots.
@


1.21
log
@add a space, and correct some lists;
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.20 2003/06/02 23:30:15 millert Exp $
a39 1
.Nm /etc/rc.conf
a41 2
.Nm /etc/netstart
.Nm /etc/rc.shutdown
d48 1
a48 1
As well,
d51 1
a51 1
.Nm netstart
d61 4
a64 2
.Nm rc.conf ,
which specifies which daemons and services are to be run.
d99 1
a99 1
.Nm rc.conf
d118 1
a118 1
to start daemons that must run before the security level changes.
d124 3
d132 1
a132 1
the started at the very end).
d139 1
a139 1
.Nm rc.conf
d148 1
a148 1
.Nm rc.conf
d155 1
a155 1
daemon is controlled by the line
d165 1
a165 1
the following entry can be used.
d174 1
a174 1
flag (to log remote connections).
d186 20
a205 1
.Pa /etc/login.conf .
d209 1
@


1.20
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.19 2002/02/21 02:36:09 miod Exp $
d154 2
a155 2
.Bd -literal
    lpd_flags=NO        # for normal use: "" (or "-l" for debugging)
d164 2
a165 2
.Bd -literal
    lpd_flags=""        # for normal use: "" (or "-l" for debugging)
d167 1
d173 2
a174 2
.Bd -literal
    lpd_flags="-l"      # for normal use: "" (or "-l" for debugging)
@


1.19
log
@With the recent changes to /etc/netstart, split the part of rc.8 covering
it into a full-blown manual page, and document the new behaviour, in
particular, what I forgot to add in the previous commit message.

Add more Xrefs to network-related configuration files in netstart.8.

There is still room for improvement: multicast routing ought to be documented
in netstart.8 now, and afterboot.8 modified accordingly.

ok chris@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.18 2001/12/28 16:21:04 millert Exp $
d14 1
a14 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
@


1.18
log
@Use lpd as an example, not sendmail.  This has been sitting in my
tree for some time and I don't recall whether it is home-grown or
came from someone else.
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.17 2001/10/05 14:45:54 mpech Exp $
d117 1
a117 1
.Nm netstart
a118 4
.Nm netstart
defines the machine's name, configures various  network interfaces
and system features, initializes the routing table, and numerous
other tasks.
d192 1
@


1.17
log
@Powered by @@mantoya:
o) start new sentence on a new line;
o) minor mdoc fixes;
millert@@ ok

Tip of the day:   www.mpechismazohist.com
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.16 2001/08/03 15:21:17 mpech Exp $
d160 1
a160 1
.Xr sendmail 8
d163 1
a163 1
    sendmail_flags=NO       # for normal use: sendmail_flags="-bd -q30m"
d167 1
a167 1
.Xr sendmail 8
d169 3
a171 3
But
.Xr sendmail 8
is started with the specified flags if the specification is modified to be
d173 9
a181 1
    sendmail_flags="-bd -q30m"      # for 'normal' use: sendmail_flags="-bd -q30m"
@


1.16
log
@o) We don't like .Pp before/after .Sh;
o) .Nm always has argument in .Sh SYNOPSIS;
o) We always closes .Bl and .Bd tags;

millert@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.15 2001/04/18 20:58:54 jakob Exp $
d155 3
a157 2
make it clear what each variable does.  Refer to the specific man pages
for each daemon to determine what that subsystem does.
d168 2
a169 1
at system startup.  But
@


1.15
log
@xref rc.conf(8) and rc.shutdown(8). ok aaron@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.14 2001/03/11 05:46:51 aaron Exp $
a142 1
.Pp
@


1.14
log
@.Pp directly before .Sh does nothing.
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.13 2000/10/13 04:09:22 aaron Exp $
d187 2
@


1.13
log
@Remove unwanted trailing whitespace.
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.12 2000/08/20 18:42:39 millert Exp $
a173 1
.Pp
@


1.12
log
@Add calls to setusercontext() and login_get*().  We basically call
setusercontext() in most places where previously we did a setlogin().
Add default login.conf file and put root in the "daemon" login class.
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.11 2000/06/18 17:04:52 aaron Exp $
d159 1
a159 1
For example, the 
@


1.11
log
@Document the /fastboot feature. If this file exists at boot-time, rc(8) will
not invoke fsck(8).
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.10 2000/01/08 01:58:31 hugh Exp $
d175 9
d185 1
@


1.10
log
@securelevel is specified in rc.securelevel, not rc.conf
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.9 1999/12/09 01:13:44 aaron Exp $
d81 3
a83 1
to ``preen'' all the disks of minor inconsistencies resulting
d89 7
@


1.9
log
@Remove extra SEE ALSO section.
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.8 1999/07/26 00:55:00 deraadt Exp $
d121 3
a123 2
then sets the security level to the values specified in
.Nm rc.conf .
@


1.8
log
@doc what rc.conf is for, partially
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.7 1999/07/20 06:20:03 deraadt Exp $
a163 7
.Pp
.Sh SEE ALSO
.Xr init 8 ,
.Xr rc 8 .
.Pp
.. and the detailed documentation given for each server that is
configurable in this fashion.
@


1.7
log
@some cleanup..
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.6 1999/07/09 13:35:36 aaron Exp $
d41 1
a41 1
.Nd command script for auto\-reboot and daemons
d44 1
d68 1
a68 1
.Xr rc.conf 8 , Ns
d95 1
a95 1
.Xr rc.conf 8
d122 1
a122 1
.Xr rc.conf 8 .
d134 38
a174 1
.Xr rc.conf 8 ,
@


1.6
log
@- remove all trailing whitespace
     * except when it is escaped with a `\' at the end of the line
- fix remaining .Nm usage as well
- this is from a patch I received from kwesterback@@home.com, who has been
  working on some scripts for fixing formatting errors in mdoc'd man pages

Ok, so there could be a cost/benefit debate with this commit, but since I have
the patch we might as well commit it...
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.5 1999/05/23 14:11:23 aaron Exp $
d43 5
a47 4
.Nm rc
.Nm rc.local
.Nm rc.securelevel
.Nm netstart
d54 8
d63 5
a67 9
is the script holding commands which are pertinent only
to a specific site.
.Nm rc.securelevel
is the script which runs commands that must be run before the
security level changes.
.Nm netstart
is the script which commands and daemons pertaining to the network.
All of these are controlled in part by
.Xr rc.conf 8
d93 5
a97 1
and then mounts filesystems, starts system daemons, preserves editor files,
d104 5
d110 5
d117 5
a121 5
before the system daemons are run.
.Nm netstart
defines the machine's name, configures any network interfaces,
initializes the routing table, and optionally, starts the ip filter
daemon.
a132 15
.Nm rc.securelevel
is executed by
.Nm rc
to start daemons that must run before the security level changes.
It then sets the security level to the values specified in
.Xr rc.conf 8 .
.Pp
Following tradition, the startup files
.Nm rc ,
.Nm rc.local ,
.Nm rc.securelevel ,
and
.Nm netstart
reside in
.Pa /etc .
@


1.5
log
@remove argument from .Os macros so value in /usr/share/tmac/mdoc/doc-common
is used instead; kwesterback@@home.com
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.4 1999/05/16 19:57:39 alex Exp $
d53 1
a53 1
.Nm rc.local 
@


1.4
log
@Cleanup xrefs under SEE ALSO.  Specifically:

  - Sort xrefs by section, and then alphabetically.
  - Add missing commas between xref items.
  - Remove commas from the last xref entry.
  - Remove duplicate entries.
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.3 1998/09/07 16:44:37 aaron Exp $
d38 1
a38 1
.Os BSD 4
@


1.3
log
@More man page fixes. Particularly fix uses of it's/its, affect/effect,
then/than and such. Other miscellaneous problems fixed across these source
files.
@
text
@d1 1
a1 1
.\"	$OpenBSD: rc.8,v 1.2 1998/06/26 03:30:14 millert Exp $
d130 1
d134 1
a134 2
.Xr savecore 8 ,
.Xr sysctl.conf 5
@


1.2
log
@come a bit closer to describing reality
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d115 1
a115 1
is executable by
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
.\"	$NetBSD: rc.8,v 1.3 1994/11/30 19:36:26 jtc Exp $
d45 2
d48 6
a53 3
.Nm Rc
is the command script which controls the automatic reboot and
.Nm rc.local
d56 8
d88 4
a91 12
starts all the daemons on the system, preserves editor files
and clears the scratch directory
.Pa /tmp .
.Pp
.Nm Rc.local
is executed immediately before any other commands after a successful
.Xr fsck .
Normally, the first commands placed in the
.Nm rc.local
file define the machine's name, using
.Xr hostname 1 ,
and save any possible core image that might have been
d94 10
a103 1
The latter command is included in the
d105 15
a119 2
file because the directory in which core dumps are saved
is usually site specific.
d122 3
a124 1
.Nm rc
d126 1
a126 1
.Nm rc.local
d131 1
d133 2
a134 1
.Xr savecore 8
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
