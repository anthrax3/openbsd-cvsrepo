head	1.6;
access;
symbols
	OPENBSD_2_9:1.5.0.10
	OPENBSD_2_9_BASE:1.5
	OPENBSD_2_8:1.5.0.8
	OPENBSD_2_8_BASE:1.5
	OPENBSD_2_7:1.5.0.6
	OPENBSD_2_7_BASE:1.5
	OPENBSD_2_6:1.5.0.4
	OPENBSD_2_6_BASE:1.5
	OPENBSD_2_5:1.5.0.2
	OPENBSD_2_5_BASE:1.5
	OPENBSD_2_4:1.4.0.2
	OPENBSD_2_4_BASE:1.4
	OPENBSD_2_3:1.3.0.2
	OPENBSD_2_3_BASE:1.3
	OPENBSD_2_2:1.2.0.2
	OPENBSD_2_2_BASE:1.2;
locks; strict;
comment	@# @;


1.6
date	2001.05.30.02.12.09;	author deraadt;	state dead;
branches;
next	1.5;

1.5
date	99.02.17.23.27.09;	author kstailey;	state Exp;
branches;
next	1.4;

1.4
date	98.06.12.11.53.02;	author d;	state Exp;
branches;
next	1.3;

1.3
date	97.12.08.20.04.59;	author kstailey;	state Exp;
branches;
next	1.2;

1.2
date	97.10.15.19.27.00;	author kstailey;	state Exp;
branches;
next	1.1;

1.1
date	97.09.26.14.58.57;	author kstailey;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Remove ipf.  Darren Reed has interpreted his (old, new, whichever)
licence in a way that makes ipf not free according to the rules we
established over 5 years ago, at www.openbsd.org/goals.html (and those
same basic rules govern the other *BSD projects too).  Specifically,
Darren says that modified versions are not permitted.  But software
which OpenBSD uses and redistributes must be free to all (be they
people or companies), for any purpose they wish to use it, including
modification, use, peeing on, or even integration into baby mulching
machines or atomic bombs to be dropped on Australia.  Furthermore, we
know of a number of companies using ipf with modification like us, who
are now in the same situation, and we hope that some of them will work
with us to fill this gap that now exists in OpenBSD (temporarily, we
hope).
@
text
@		 Miscellaneous NAT Configuration Tips

Don't forget to add "net.inet.ip.forwarding=1" to /etc/sysctl.conf or NAT will
not work.  NAT requires IP packet forwarding.

Don't forget to add "option IPFILTER" (and maybe "option IPFILTER_LOG"
if you want ipmon(8) to work) to the kernel config file or NAT will
not work.  NAT requires the IPF packet filter.

You must have IPF enabled even if you aren't using it for anything or
NAT will not work.  The standard way to do this is to make sure
/etc/ipf.rules is installed and edit /etc/rc.conf changing
"ipfilter=NO" to "ipfilter=YES" then reboot.

When you bring up NAT it needs the interface to have an address.  If you are
using the ppp0 interface unless you start pppd from /etc/rc you cannot start
NAT there.  Instead, in the /etc/ppp/ip-up shell script add

/sbin/ipnat -CF -f /etc/ipnat.rules

to start NAT when the link comes up and the interface has an address.
@


1.5
log
@reflect new behavior
@
text
@@


1.4
log
@talk about using /etc/sysctl to control ip forwarding
@
text
@d14 8
@


1.3
log
@mention "option IPFILTER"
@
text
@d3 1
a3 1
Don't forget to add "option GATEWAY" to the kernel config file or NAT will
@


1.2
log
@Mention that IPF is a NAT pre-requisite.
Add title.
@
text
@d6 4
@


1.1
log
@another note about NAT
@
text
@d1 2
d4 6
a9 1
not work.
@
