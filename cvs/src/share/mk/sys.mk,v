head	1.77;
access;
symbols
	OPENBSD_6_0:1.76.0.2
	OPENBSD_6_0_BASE:1.76
	OPENBSD_5_9:1.74.0.2
	OPENBSD_5_9_BASE:1.74
	OPENBSD_5_8:1.73.0.4
	OPENBSD_5_8_BASE:1.73
	OPENBSD_5_7:1.71.0.2
	OPENBSD_5_7_BASE:1.71
	OPENBSD_5_6:1.69.0.4
	OPENBSD_5_6_BASE:1.69
	OPENBSD_5_5:1.68.0.4
	OPENBSD_5_5_BASE:1.68
	OPENBSD_5_4:1.67.0.2
	OPENBSD_5_4_BASE:1.67
	OPENBSD_5_3:1.66.0.2
	OPENBSD_5_3_BASE:1.66
	OPENBSD_5_2:1.64.0.2
	OPENBSD_5_2_BASE:1.64
	OPENBSD_5_1_BASE:1.62
	OPENBSD_5_1:1.62.0.2
	OPENBSD_5_0:1.61.0.2
	OPENBSD_5_0_BASE:1.61
	OPENBSD_4_9:1.60.0.2
	OPENBSD_4_9_BASE:1.60
	OPENBSD_4_8:1.59.0.2
	OPENBSD_4_8_BASE:1.59
	OPENBSD_4_7:1.58.0.2
	OPENBSD_4_7_BASE:1.58
	OPENBSD_4_6:1.57.0.4
	OPENBSD_4_6_BASE:1.57
	OPENBSD_4_5:1.56.0.2
	OPENBSD_4_5_BASE:1.56
	OPENBSD_4_4:1.55.0.2
	OPENBSD_4_4_BASE:1.55
	OPENBSD_4_3:1.54.0.2
	OPENBSD_4_3_BASE:1.54
	OPENBSD_4_2:1.53.0.2
	OPENBSD_4_2_BASE:1.53
	OPENBSD_4_1:1.52.0.2
	OPENBSD_4_1_BASE:1.52
	OPENBSD_4_0:1.51.0.2
	OPENBSD_4_0_BASE:1.51
	OPENBSD_3_9:1.47.0.2
	OPENBSD_3_9_BASE:1.47
	OPENBSD_3_8:1.46.0.2
	OPENBSD_3_8_BASE:1.46
	OPENBSD_3_7:1.45.0.2
	OPENBSD_3_7_BASE:1.45
	OPENBSD_3_6:1.38.0.2
	OPENBSD_3_6_BASE:1.38
	OPENBSD_3_5:1.36.0.2
	OPENBSD_3_5_BASE:1.36
	OPENBSD_3_4:1.35.0.2
	OPENBSD_3_4_BASE:1.35
	OPENBSD_3_3:1.33.0.2
	OPENBSD_3_3_BASE:1.33
	OPENBSD_3_2:1.30.0.2
	OPENBSD_3_2_BASE:1.30
	OPENBSD_3_1:1.29.0.2
	OPENBSD_3_1_BASE:1.29
	OPENBSD_3_0:1.27.0.2
	OPENBSD_3_0_BASE:1.27
	OPENBSD_2_9:1.26.0.2
	OPENBSD_2_9_BASE:1.26
	OPENBSD_2_8:1.25.0.2
	OPENBSD_2_8_BASE:1.25
	OPENBSD_2_7:1.22.0.2
	OPENBSD_2_7_BASE:1.22
	OPENBSD_2_6:1.21.0.2
	OPENBSD_2_6_BASE:1.21
	OPENBSD_2_5:1.20.0.2
	OPENBSD_2_5_BASE:1.20
	OPENBSD_2_4:1.17.0.2
	OPENBSD_2_4_BASE:1.17
	OPENBSD_2_3:1.12.0.2
	OPENBSD_2_3_BASE:1.12
	OPENBSD_2_2:1.11.0.4
	OPENBSD_2_2_BASE:1.11
	OPENBSD_2_1:1.11.0.2
	OPENBSD_2_1_BASE:1.11
	OPENBSD_2_0:1.7.0.2
	OPENBSD_2_0_BASE:1.7
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.77
date	2017.03.04.16.52.47;	author deraadt;	state Exp;
branches;
next	1.76;
commitid	OCYhy9zgDPavjkFM;

1.76
date	2016.05.26.20.13.44;	author zhuk;	state Exp;
branches;
next	1.75;
commitid	DqSFQLNM4KDfsYaI;

1.75
date	2016.05.11.18.01.33;	author deraadt;	state Exp;
branches;
next	1.74;
commitid	8HrfPuesPACD8eHr;

1.74
date	2015.12.19.19.48.24;	author deraadt;	state Exp;
branches;
next	1.73;
commitid	SOCTAf8DgstmgExw;

1.73
date	2015.06.17.22.32.08;	author deraadt;	state Exp;
branches;
next	1.72;
commitid	t9SY77H32y4EhYfI;

1.72
date	2015.05.14.02.56.01;	author jsg;	state Exp;
branches;
next	1.71;
commitid	gKxrs8uC9DvCRIXP;

1.71
date	2015.01.01.15.50.27;	author deraadt;	state Exp;
branches;
next	1.70;
commitid	aUXY4nvORi8fzhu0;

1.70
date	2014.11.20.09.43.17;	author pascal;	state Exp;
branches;
next	1.69;
commitid	NuOsXkGInkBcXhor;

1.69
date	2014.07.15.21.59.16;	author deraadt;	state Exp;
branches;
next	1.68;
commitid	beUIljsE6tZdLJr8;

1.68
date	2014.01.12.11.26.09;	author deraadt;	state Exp;
branches;
next	1.67;

1.67
date	2013.07.07.18.11.49;	author deraadt;	state Exp;
branches;
next	1.66;

1.66
date	2013.01.31.23.30.40;	author miod;	state Exp;
branches;
next	1.65;

1.65
date	2012.10.15.11.14.38;	author espie;	state Exp;
branches;
next	1.64;

1.64
date	2012.06.20.21.40.55;	author deraadt;	state Exp;
branches;
next	1.63;

1.63
date	2012.04.08.15.56.28;	author jsg;	state Exp;
branches;
next	1.62;

1.62
date	2012.01.11.22.11.34;	author deraadt;	state Exp;
branches;
next	1.61;

1.61
date	2011.07.18.07.07.52;	author deraadt;	state Exp;
branches;
next	1.60;

1.60
date	2011.01.13.23.17.50;	author deraadt;	state Exp;
branches;
next	1.59;

1.59
date	2010.07.24.15.31.19;	author deraadt;	state Exp;
branches;
next	1.58;

1.58
date	2010.01.26.23.04.28;	author miod;	state Exp;
branches;
next	1.57;

1.57
date	2009.06.20.23.38.12;	author miod;	state Exp;
branches;
next	1.56;

1.56
date	2009.02.08.21.02.22;	author miod;	state Exp;
branches;
next	1.55;

1.55
date	2008.07.02.00.13.32;	author deraadt;	state Exp;
branches;
next	1.54;

1.54
date	2008.02.20.17.46.51;	author miod;	state Exp;
branches;
next	1.53;

1.53
date	2007.07.25.20.07.27;	author deraadt;	state Exp;
branches;
next	1.52;

1.52
date	2007.02.12.13.10.02;	author henning;	state Exp;
branches;
next	1.51;

1.51
date	2006.07.26.20.34.11;	author deraadt;	state Exp;
branches;
next	1.50;

1.50
date	2006.05.28.23.54.59;	author cloder;	state Exp;
branches;
next	1.49;

1.49
date	2006.05.27.23.01.21;	author deraadt;	state Exp;
branches;
next	1.48;

1.48
date	2006.04.01.05.53.39;	author deraadt;	state Exp;
branches;
next	1.47;

1.47
date	2006.01.19.03.30.04;	author deraadt;	state Exp;
branches;
next	1.46;

1.46
date	2005.08.09.00.46.09;	author deraadt;	state Exp;
branches;
next	1.45;

1.45
date	2005.03.07.00.06.00;	author deraadt;	state Exp;
branches;
next	1.44;

1.44
date	2004.12.28.19.35.02;	author jolan;	state Exp;
branches;
next	1.43;

1.43
date	2004.12.11.16.29.05;	author miod;	state Exp;
branches;
next	1.42;

1.42
date	2004.11.22.18.51.23;	author miod;	state Exp;
branches;
next	1.41;

1.41
date	2004.11.08.21.58.59;	author deraadt;	state Exp;
branches;
next	1.40;

1.40
date	2004.11.07.17.55.47;	author deraadt;	state Exp;
branches;
next	1.39;

1.39
date	2004.09.20.18.52.37;	author espie;	state Exp;
branches;
next	1.38;

1.38
date	2004.08.09.18.08.51;	author deraadt;	state Exp;
branches;
next	1.37;

1.37
date	2004.04.05.19.17.25;	author miod;	state Exp;
branches;
next	1.36;

1.36
date	2004.02.27.18.02.47;	author deraadt;	state Exp;
branches;
next	1.35;

1.35
date	2003.08.11.14.52.42;	author deraadt;	state Exp;
branches;
next	1.34;

1.34
date	2003.08.08.22.32.13;	author miod;	state Exp;
branches;
next	1.33;

1.33
date	2003.02.12.23.07.28;	author deraadt;	state Exp;
branches;
next	1.32;

1.32
date	2003.02.12.04.45.19;	author mickey;	state Exp;
branches;
next	1.31;

1.31
date	2003.01.14.22.41.38;	author mickey;	state Exp;
branches;
next	1.30;

1.30
date	2002.09.10.21.36.57;	author deraadt;	state Exp;
branches;
next	1.29;

1.29
date	2002.03.22.23.29.28;	author deraadt;	state Exp;
branches;
next	1.28;

1.28
date	2002.02.23.18.34.50;	author deraadt;	state Exp;
branches;
next	1.27;

1.27
date	2001.09.11.13.11.18;	author deraadt;	state Exp;
branches;
next	1.26;

1.26
date	2001.04.15.02.35.09;	author deraadt;	state Exp;
branches;
next	1.25;

1.25
date	2000.10.27.07.57.43;	author hugh;	state Exp;
branches;
next	1.24;

1.24
date	2000.08.21.21.13.40;	author deraadt;	state Exp;
branches;
next	1.23;

1.23
date	2000.05.15.06.10.21;	author niklas;	state Exp;
branches;
next	1.22;

1.22
date	2000.04.08.05.06.25;	author deraadt;	state Exp;
branches;
next	1.21;

1.21
date	99.09.23.08.25.01;	author deraadt;	state Exp;
branches;
next	1.20;

1.20
date	99.03.03.05.50.19;	author smurph;	state Exp;
branches;
next	1.19;

1.19
date	99.02.28.06.25.34;	author deraadt;	state Exp;
branches;
next	1.18;

1.18
date	98.12.31.23.49.46;	author millert;	state Exp;
branches;
next	1.17;

1.17
date	98.09.15.21.36.24;	author deraadt;	state Exp;
branches;
next	1.16;

1.16
date	98.06.09.19.29.46;	author downsj;	state Exp;
branches;
next	1.15;

1.15
date	98.05.14.16.31.39;	author millert;	state Exp;
branches;
next	1.14;

1.14
date	98.05.02.20.53.54;	author todd;	state Exp;
branches;
next	1.13;

1.13
date	98.04.30.06.43.23;	author deraadt;	state Exp;
branches;
next	1.12;

1.12
date	97.11.05.09.51.06;	author deraadt;	state Exp;
branches;
next	1.11;

1.11
date	97.02.06.10.49.16;	author niklas;	state Exp;
branches;
next	1.10;

1.10
date	97.01.08.07.35.04;	author niklas;	state Exp;
branches;
next	1.9;

1.9
date	96.11.24.02.47.42;	author niklas;	state Exp;
branches;
next	1.8;

1.8
date	96.11.23.00.28.38;	author niklas;	state Exp;
branches;
next	1.7;

1.7
date	96.04.22.01.28.38;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	96.03.29.10.17.55;	author niklas;	state Exp;
branches;
next	1.5;

1.5
date	96.03.09.01.33.31;	author niklas;	state Exp;
branches;
next	1.4;

1.4
date	96.03.05.11.13.06;	author mickey;	state Exp;
branches;
next	1.3;

1.3
date	96.02.25.19.02.37;	author mickey;	state Exp;
branches;
next	1.2;

1.2
date	96.01.01.07.41.34;	author davem;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.44.47;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.44.47;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.77
log
@crank to 6.1-beta
@
text
@#	$OpenBSD: sys.mk,v 1.76 2016/05/26 20:13:44 zhuk Exp $
#	$NetBSD: sys.mk,v 1.27 1996/04/10 05:47:19 mycroft Exp $
#	@@(#)sys.mk	5.11 (Berkeley) 3/13/91

.if defined(EXTRA_SYS_MK_INCLUDES)
.for __SYS_MK_INCLUDE in ${EXTRA_SYS_MK_INCLUDES}
.include ${__SYS_MK_INCLUDE}
.endfor
.endif

unix=		We run OpenBSD.
OSMAJOR=	6
OSMINOR=	1
OSREV=		$(OSMAJOR).$(OSMINOR)
OSrev=		$(OSMAJOR)$(OSMINOR)

.SUFFIXES: .out .a .o .c .cc .C .cxx .cpp .F .f .r .y .l .s .S .cl .p .h .sh .m4

AR?=		ar
ARFLAGS?=	r
RANLIB?=	ranlib
LORDER?=	lorder

AS?=		as
AFLAGS?=	${DEBUG}
COMPILE.s?=	${CC} ${AFLAGS} -c
LINK.s?=	${CC} ${AFLAGS} ${LDFLAGS}
COMPILE.S?=	${CC} ${AFLAGS} ${CPPFLAGS} -c
LINK.S?=	${CC} ${AFLAGS} ${CPPFLAGS} ${LDFLAGS}

CC?=		cc

PIPE?=		-pipe

CFLAGS?=	-O2 ${PIPE} ${DEBUG}
COMPILE.c?=	${CC} ${CFLAGS} ${CPPFLAGS} -c
LINK.c?=	${CC} ${CFLAGS} ${CPPFLAGS} ${LDFLAGS}

HOSTCC?=	cc

CXX?=		c++
CXXFLAGS?=	-O2 ${PIPE} ${DEBUG}
COMPILE.cc?=	${CXX} ${CXXFLAGS} ${CPPFLAGS} -c
LINK.cc?=	${CXX} ${CXXFLAGS} ${CPPFLAGS} ${LDFLAGS}

CPP?=		cpp
CPPFLAGS?=	

FC?=		f77
FFLAGS?=	-O2
RFLAGS?=
COMPILE.f?=	${FC} ${FFLAGS} -c
LINK.f?=	${FC} ${FFLAGS} ${LDFLAGS}
COMPILE.F?=	${FC} ${FFLAGS} ${CPPFLAGS} -c
LINK.F?=	${FC} ${FFLAGS} ${CPPFLAGS} ${LDFLAGS}
COMPILE.r?=	${FC} ${FFLAGS} ${RFLAGS} -c
LINK.r?=	${FC} ${FFLAGS} ${RFLAGS} ${LDFLAGS}

LEX?=		lex
LFLAGS?=
LEX.l?=		${LEX} ${LFLAGS}

LD?=		ld
LDFLAGS+=	${DEBUG}

MAKE?=		make

PC?=		pc
PFLAGS?=
COMPILE.p?=	${PC} ${PFLAGS} ${CPPFLAGS} -c
LINK.p?=	${PC} ${PFLAGS} ${CPPFLAGS} ${LDFLAGS}

SHELL?=		sh

YACC?=		yacc
YFLAGS?=	-d
YACC.y?=	${YACC} ${YFLAGS}

INSTALL?=	install

CTAGS?=		/usr/bin/ctags

# C
.c:
	${LINK.c} -o ${.TARGET} ${.IMPSRC} ${LDLIBS}
.c.o:
	${COMPILE.c} ${.IMPSRC}
.c.a:
	${COMPILE.c} ${.IMPSRC}
	${AR} ${ARFLAGS} $@@ $*.o
	rm -f $*.o

# C++
.cc:
	${LINK.cc} -o ${.TARGET} ${.IMPSRC} ${LDLIBS}
.cc.o:
	${COMPILE.cc} ${.IMPSRC}
.cc.a:
	${COMPILE.cc} ${.IMPSRC}
	${AR} ${ARFLAGS} $@@ $*.o
	rm -f $*.o

.C:
	${LINK.cc} -o ${.TARGET} ${.IMPSRC} ${LDLIBS}
.C.o:
	${COMPILE.cc} ${.IMPSRC}
.C.a:
	${COMPILE.cc} ${.IMPSRC}
	${AR} ${ARFLAGS} $@@ $*.o
	rm -f $*.o

.cxx:
	${LINK.cc} -o ${.TARGET} ${.IMPSRC} ${LDLIBS}
.cxx.o:
	${COMPILE.cc} ${.IMPSRC}
.cxx.a:
	${COMPILE.cc} ${.IMPSRC}
	${AR} ${ARFLAGS} $@@ $*.o
	rm -f $*.o

.cpp:
	${LINK.cc} -o ${.TARGET} ${.IMPSRC} ${LDLIBS}
.cpp.o:
	${COMPILE.cc} ${.IMPSRC}
.cpp.a:
	${COMPILE.cc} ${.IMPSRC}
	${AR} ${ARFLAGS} $@@ $*.o
	rm -f $*.o

# Fortran/Ratfor
.f:
	${LINK.f} -o ${.TARGET} ${.IMPSRC} ${LDLIBS}
.f.o:
	${COMPILE.f} ${.IMPSRC}
.f.a:
	${COMPILE.f} ${.IMPSRC}
	${AR} ${ARFLAGS} $@@ $*.o
	rm -f $*.o

.F:
	${LINK.F} -o ${.TARGET} ${.IMPSRC} ${LDLIBS}
.F.o:
	${COMPILE.F} ${.IMPSRC}
.F.a:
	${COMPILE.F} ${.IMPSRC}
	${AR} ${ARFLAGS} $@@ $*.o
	rm -f $*.o

.r:
	${LINK.r} -o ${.TARGET} ${.IMPSRC} ${LDLIBS}
.r.o:
	${COMPILE.r} ${.IMPSRC}
.r.a:
	${COMPILE.r} ${.IMPSRC}
	${AR} ${ARFLAGS} $@@ $*.o
	rm -f $*.o

# Pascal
.p:
	${LINK.p} -o ${.TARGET} ${.IMPSRC} ${LDLIBS}
.p.o:
	${COMPILE.p} ${.IMPSRC}
.p.a:
	${COMPILE.p} ${.IMPSRC}
	${AR} ${ARFLAGS} $@@ $*.o
	rm -f $*.o

# Assembly
.s:
	${LINK.s} -o ${.TARGET} ${.IMPSRC} ${LDLIBS}
.s.o:
	${COMPILE.s} ${.IMPSRC}
.s.a:
	${COMPILE.s} ${.IMPSRC}
	${AR} ${ARFLAGS} $@@ $*.o
	rm -f $*.o
.S:
	${LINK.S} -o ${.TARGET} ${.IMPSRC} ${LDLIBS}
.S.o:
	${COMPILE.S} ${.IMPSRC}
.S.a:
	${COMPILE.S} ${.IMPSRC}
	${AR} ${ARFLAGS} $@@ $*.o
	rm -f $*.o

# Lex
.l:
	${LEX.l} ${.IMPSRC}
	${LINK.c} -o ${.TARGET} lex.yy.c ${LDLIBS} -ll
	rm -f lex.yy.c
.l.c:
	${LEX.l} ${.IMPSRC}
	mv lex.yy.c ${.TARGET}
.l.o:
	${LEX.l} ${.IMPSRC}
	${COMPILE.c} -o ${.TARGET} lex.yy.c 
	rm -f lex.yy.c

# Yacc
.y:
	${YACC.y} ${.IMPSRC}
	${LINK.c} -o ${.TARGET} y.tab.c ${LDLIBS}
	rm -f y.tab.c
.y.c:
	${YACC.y} ${.IMPSRC}
	mv y.tab.c ${.TARGET}
.y.o:
	${YACC.y} ${.IMPSRC}
	${COMPILE.c} -o ${.TARGET} y.tab.c
	rm -f y.tab.c

# Shell
.sh:
	rm -f ${.TARGET}
	cp ${.IMPSRC} ${.TARGET}
@


1.76
log
@Zap the 'l' from ARFLAGS, totally useless these days.

Found while comparing qmake specs of different *BSDs.

okay deraadt@@ and millert@@
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.75 2016/05/11 18:01:33 deraadt Exp $
d13 1
a13 1
OSMINOR=	0
@


1.75
log
@crank to 6.0-beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.74 2015/12/19 19:48:24 deraadt Exp $
d20 1
a20 1
ARFLAGS?=	rl
@


1.74
log
@move to 5.9-beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.73 2015/06/17 22:32:08 deraadt Exp $
d12 2
a13 2
OSMAJOR=	5
OSMINOR=	9
@


1.73
log
@crank to 5.8-beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.72 2015/05/14 02:56:01 jsg Exp $
d13 1
a13 1
OSMINOR=	8
@


1.72
log
@Stop including CFLAGS in CXXFLAGS it creates problems when mixing
C and C++ when wanting to pass flags to only the C compiler.

Tested in a ports bulk build by naddy and the handful of problems
found were fixed by naddy, jca and pascal.
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.71 2015/01/01 15:50:27 deraadt Exp $
d13 1
a13 1
OSMINOR=	7
@


1.71
log
@move to 5.7-beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.70 2014/11/20 09:43:17 pascal Exp $
d42 1
a42 1
CXXFLAGS?=	${CFLAGS}
@


1.70
log
@Add .cpp.o suffix rules.  Survived a full src + X + ports build.

ok miod@@ some time ago
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.69 2014/07/15 21:59:16 deraadt Exp $
d13 1
a13 1
OSMINOR=	6
@


1.69
log
@crank to 5.6-beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.68 2014/01/12 11:26:09 deraadt Exp $
d17 1
a17 1
.SUFFIXES: .out .a .o .c .cc .C .cxx .F .f .r .y .l .s .S .cl .p .h .sh .m4
d117 9
@


1.68
log
@crank to 5.5beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.67 2013/07/07 18:11:49 deraadt Exp $
d13 1
a13 1
OSMINOR=	5
@


1.67
log
@move to 5.4-beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.66 2013/01/31 23:30:40 miod Exp $
d13 1
a13 1
OSMINOR=	4
@


1.66
log
@welcome to 5.3-BETA
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.65 2012/10/15 11:14:38 espie Exp $
d13 1
a13 1
OSMINOR=	3
@


1.65
log
@old stuff:
- moved to realdepend with success, finish the old subdirdepend.
- .LIBS: doesn't mean anything any more, and it had broken semantics
when it meant something anyways.

okay millert@@
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.64 2012/06/20 21:40:55 deraadt Exp $
d13 1
a13 1
OSMINOR=	2
@


1.64
log
@move to 5.2-beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.63 2012/04/08 15:56:28 jsg Exp $
a18 2
.LIBS:		.a

d50 1
a50 1
FFLAGS?=		-O2
@


1.63
log
@unhook lint from the tree.  The parser is incomplete and difficult
to fix and there are several alternatives that don't tell quite so many
dangerous lies.

enthusiastic agreement from a bunch of people
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.62 2012/01/11 22:11:34 deraadt Exp $
d13 1
a13 1
OSMINOR=	1
@


1.62
log
@crank to 5.1-beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.61 2011/07/18 07:07:52 deraadt Exp $
d17 1
a17 1
.SUFFIXES: .out .a .ln .o .c .cc .C .cxx .F .f .r .y .l .s .S .cl .p .h .sh .m4
a67 3
LINT?=		lint
LINTFLAGS?=	-hx

a93 2
.c.ln:
	${LINT} ${LINTFLAGS} ${CFLAGS:M-[IDU]*} ${CPPFLAGS:M-[IDU]*} -i ${.IMPSRC}
a190 5
.l.ln:
	${LEX.l} ${.IMPSRC}
	mv lex.yy.c ${.TARGET:R}.c
	${LINT} ${LINTFLAGS} ${CFLAGS:M-[IDU]*} ${CPPFLAGS:M-[IDU]*} -i ${.TARGET:R}.c
	rm -f ${.TARGET:R}.c
a203 5
.y.ln:
	${YACC.y} ${.IMPSRC}
	mv y.tab.c ${.TARGET:R}.c
	${LINT} ${LINTFLAGS} ${CFLAGS:M-[IDU]*} ${CPPFLAGS:M-[IDU]*} -i ${.TARGET:R}.c
	rm -f ${.TARGET:R}.c
@


1.61
log
@take us to 5.0-beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.60 2011/01/13 23:17:50 deraadt Exp $
d13 1
a13 1
OSMINOR=	0
@


1.60
log
@move to 4.9-current
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.59 2010/07/24 15:31:19 deraadt Exp $
d12 2
a13 2
OSMAJOR=	4
OSMINOR=	9
@


1.59
log
@move to 4.8-beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.58 2010/01/26 23:04:28 miod Exp $
d13 1
a13 1
OSMINOR=	8
@


1.58
log
@4.7-BETA (also, lo-carb and ozone layer friendly)
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.57 2009/06/20 23:38:12 miod Exp $
d13 1
a13 1
OSMINOR=	7
@


1.57
log
@4.6-BETA
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.56 2009/02/08 21:02:22 miod Exp $
d13 1
a13 1
OSMINOR=	6
@


1.56
log
@Move to 4.5-BETA
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.55 2008/07/02 00:13:32 deraadt Exp $
d13 1
a13 1
OSMINOR=	5
@


1.55
log
@move to 4.4-beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.54 2008/02/20 17:46:51 miod Exp $
d13 1
a13 1
OSMINOR=	4
@


1.54
log
@4.3-beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.53 2007/07/25 20:07:27 deraadt Exp $
d13 1
a13 1
OSMINOR=	3
@


1.53
log
@crank to 4.2-beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.52 2007/02/12 13:10:02 henning Exp $
d13 1
a13 1
OSMINOR=	2
@


1.52
log
@4.1-beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.51 2006/07/26 20:34:11 deraadt Exp $
d13 1
a13 1
OSMINOR=	1
@


1.51
log
@crank to 4.0-beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.50 2006/05/28 23:54:59 cloder Exp $
d13 1
a13 1
OSMINOR=	0
@


1.50
log
@Change LINTFLAGS to '-hx', now that 'a' and 'b' are gone and 'c' really
only produces a 'pointer casts may be troublesome' warning that everyone
ignores.
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.49 2006/05/27 23:01:21 deraadt Exp $
d12 2
a13 2
OSMAJOR=	3
OSMINOR=	9
@


1.49
log
@support 'make lint' in dirs which contain .y and .l files, help from naddy
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.48 2006/04/01 05:53:39 deraadt Exp $
d69 1
a69 1
LINTFLAGS?=	-chabx
@


1.48
log
@default LINTFLAGS add -p; from cloder
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.47 2006/01/19 03:30:04 deraadt Exp $
d196 5
d214 5
@


1.47
log
@crank to 3.8-beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.46 2005/08/09 00:46:09 deraadt Exp $
d69 1
a69 1
LINTFLAGS?=	-chapbx
@


1.46
log
@move to 3.8-beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.45 2005/03/07 00:06:00 deraadt Exp $
d13 1
a13 1
OSMINOR=	8
@


1.45
log
@move to 3.7-beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.44 2004/12/28 19:35:02 jolan Exp $
d13 1
a13 1
OSMINOR=	7
@


1.44
log
@let alpha have a .c.a rule, oll korrect miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.43 2004/12/11 16:29:05 miod Exp $
d13 1
a13 1
OSMINOR=	6
@


1.43
log
@-pipe for everyone.

mac68k users, be sure to upgrade to the latest snapshot first
[or upgrade as(1)].
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.42 2004/11/22 18:51:23 miod Exp $
a92 1
.if (${MACHINE_ARCH} != "alpha")
a96 1
.endif
@


1.42
log
@mac68k is not so happy with -pipe, disable for now.
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.41 2004/11/08 21:58:59 deraadt Exp $
a34 1
.if ${MACHINE_ARCH} != "m88k" && ${MACHINE} != "mac68k"
a35 1
.endif
@


1.41
log
@conditional override of PIPE, from markus
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.40 2004/11/07 17:55:47 deraadt Exp $
d35 1
a35 1
.if ${MACHINE_ARCH} != "m88k"
@


1.40
log
@use cc -pipe on most architectures; agreed by a lot
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.39 2004/09/20 18:52:37 espie Exp $
d36 1
a36 1
PIPE=		-pipe
@


1.39
log
@pass CPPFLAGS to CLINT. ok deraadt@@, millert@@
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.38 2004/08/09 18:08:51 deraadt Exp $
d34 4
@


1.38
log
@move to 3.6-beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.37 2004/04/05 19:17:25 miod Exp $
d98 1
a98 1
	${LINT} ${LINTFLAGS} ${CFLAGS:M-[IDU]*} -i ${.IMPSRC}
@


1.37
log
@Switch mvme88k to -O2 optimization by default.
(the perl chunk discussed with millert@@ and pushed upstream)
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.36 2004/02/27 18:02:47 deraadt Exp $
d13 1
a13 1
OSMINOR=	5
@


1.36
log
@move to 3.5-beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.35 2003/08/11 14:52:42 deraadt Exp $
a34 3
.if (${MACHINE_ARCH} == "m88k")
CFLAGS?=	-O1 ${PIPE} ${DEBUG}
.else
a35 1
.endif
@


1.35
log
@move to 3.4-beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.34 2003/08/08 22:32:13 miod Exp $
d13 1
a13 1
OSMINOR=	4
@


1.34
log
@Enable the first level of compiler optimizations on mvme88k by default,
now that is getting stable.
ksh(1) still has to be builh at -O0 for now, though.

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.33 2003/02/12 23:07:28 deraadt Exp $
d13 1
a13 1
OSMINOR=	3
@


1.33
log
@move to 3.3-beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.32 2003/02/12 04:45:19 mickey Exp $
d36 1
a36 1
CFLAGS?=	-O0 ${PIPE} ${DEBUG}
@


1.32
log
@gcc knows about hppa alergy to propolice now. 10x to etoh@@
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.31 2003/01/14 22:41:38 mickey Exp $
d13 1
a13 1
OSMINOR=	2
@


1.31
log
@have to disable pp on hppa now
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.30 2002/09/10 21:36:57 deraadt Exp $
a36 2
.elif (${MACHINE_ARCH} == "hppa")
CFLAGS?=	-O2 -fno-stack-protector ${PIPE} ${DEBUG}
@


1.30
log
@move to 3.2-beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.29 2002/03/22 23:29:28 deraadt Exp $
d37 2
@


1.29
log
@move to 3.1-beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.28 2002/02/23 18:34:50 deraadt Exp $
d13 1
a13 1
OSMINOR=	1
@


1.28
log
@switch vax to -O2, from hugh
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.27 2001/09/11 13:11:18 deraadt Exp $
d13 1
a13 1
OSMINOR=	0
@


1.27
log
@move to 3.0-beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.26 2001/04/15 02:35:09 deraadt Exp $
d35 1
a35 1
.if (${MACHINE_ARCH} == "m88k") || (${MACHINE_ARCH} == "vax")
@


1.26
log
@move to 2.9-beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.25 2000/10/27 07:57:43 hugh Exp $
d12 2
a13 2
OSMAJOR=	2
OSMINOR=	9
@


1.25
log
@Default to building at -O0 on vax until gcc problems can be worked out.
Hopefully only the short-term fix.
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.24 2000/08/21 21:13:40 deraadt Exp $
d13 1
a13 1
OSMINOR=	8
@


1.24
log
@2.8-beta (so that X11 can distinguish login.conf)
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.23 2000/05/15 06:10:21 niklas Exp $
d35 1
a35 1
.if (${MACHINE_ARCH} == "m88k")
@


1.23
log
@Add support for building libraries with debugging information in them.
Enable by setting DEBUGLIBS=yes in /etc/mk.conf, then -g libraries will get
installed in /usr/lib/debug.  This directory will be searched first if
gcc is given the -g flag during the link stage.
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.22 2000/04/08 05:06:25 deraadt Exp $
d13 1
a13 1
OSMINOR=	7
@


1.22
log
@2.7-beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.21 1999/09/23 08:25:01 deraadt Exp $
d68 1
a68 1
LDFLAGS?=
@


1.21
log
@move towards 2.6-beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.20 1999/03/03 05:50:19 smurph Exp $
d13 1
a13 1
OSMINOR=	6
@


1.20
log
@Temporary disable AFS and Optimizations for m88k.
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.19 1999/02/28 06:25:34 deraadt Exp $
d13 1
a13 1
OSMINOR=	5
@


1.19
log
@moving to 2.5-beta
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.18 1998/12/31 23:49:46 millert Exp $
d34 4
d39 1
@


1.18
log
@Add ${PIPE} in sys.mk so we do no need to add all over the places; evanc@@concer.to
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.17 1998/09/15 21:36:24 deraadt Exp $
d13 1
a13 1
OSMINOR=	4
@


1.17
log
@hello 2.4
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.16 1998/06/09 19:29:46 downsj Exp $
d34 1
a34 1
CFLAGS?=	-O2 ${DEBUG}
@


1.16
log
@Add CTAGS, with a full pathname, and use it.
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.15 1998/05/14 16:31:39 millert Exp $
d13 1
a13 1
OSMINOR=	3
@


1.15
log
@Use -O2, not -O
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.14 1998/05/02 20:53:54 todd Exp $
d82 2
@


1.14
log
@4 new definitions .. look to using these definitions for revision information
throughout the tree so we have 1 place to update instead of many.
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.13 1998/04/30 06:43:23 deraadt Exp $
d34 1
a34 1
CFLAGS?=	-O ${DEBUG}
d49 1
a49 1
FFLAGS?=		-O
@


1.13
log
@c++ compiler is called c++, of course
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.12 1997/11/05 09:51:06 deraadt Exp $
d12 4
@


1.12
log
@.cxx support from Mathieu.Herrb@@mipnet.fr
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.11 1997/02/06 10:49:16 niklas Exp $
d36 1
a36 1
CXX?=		g++
@


1.11
log
@Add a LORDER make symbol and use it
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.10 1997/01/08 07:35:04 niklas Exp $
d13 1
a13 1
.SUFFIXES: .out .a .ln .o .c .cc .C .F .f .r .y .l .s .S .cl .p .h .sh .m4
d108 9
@


1.10
log
@Include mk files specified in EXTRA_SYS_MK_FILES.  Needed for the ports
mechanism.  This was the least intrusive way we found to solve the problem
of getting ports' Makefiles have bsd.own.mk included.
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.9 1996/11/24 02:47:42 niklas Exp $
d20 1
@


1.9
log
@Add a new knob called DEBUG.  Define to -g to have it turn off STRIP=-s
 and add itself to CFLAGS and ASFLAGS
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.8 1996/11/23 00:28:38 niklas Exp $
d4 6
@


1.8
log
@Add overrideable INSTALL variable
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.7 1996/04/22 01:28:38 deraadt Exp $
d16 1
a16 1
AFLAGS?=
d23 1
a23 1
CFLAGS?=	-O
@


1.7
log
@sync with netbsd 960418
@
text
@d1 1
a1 1
#	$OpenBSD: sys.mk,v 1.6 1996/03/29 10:17:55 niklas Exp $
d69 2
@


1.6
log
@From NetBSD: merge of 960317
@
text
@d1 2
a2 2
#	$OpenBSD: sys.mk,v 1.5 1996/03/09 01:33:31 niklas Exp $
#	$NetBSD: sys.mk,v 1.25 1996/02/29 19:06:57 jtc Exp $
d17 1
a17 1
COMPILE.s?=	${AS} ${AFLAGS}
d145 1
a145 1
	${COMPILE.s} -o ${.TARGET} ${.IMPSRC} 
d153 1
a153 1
	${COMPILE.S} -o ${.TARGET} ${.IMPSRC}
@


1.5
log
@Rudimentary support for compilation in a cross environment
Host tools will be compiled with HOSTCC instead of CC.
Note, these are not complete in *any* way\!
@
text
@d1 2
a2 2
#	$OpenBSD: sys.mk,v 1.4 1996/03/05 11:13:06 mickey Exp $
#	$NetBSD: sys.mk,v 1.22 1995/09/24 23:49:09 christos Exp $
d35 1
a35 3
.if defined(DESTDIR)
CPPFLAGS+=	-nostdinc -idirafter ${DESTDIR}/usr/include
.endif
d75 1
d80 1
d145 1
a145 1
	${COMPILE.s} ${.IMPSRC}
d153 1
a153 1
	${COMPILE.S} ${.IMPSRC}
@


1.4
log
@Labeling style changed ($OpenBSD$).
POSTINSTALL added to the <bsd.lkm.mk> (see bsd.README for details).
@
text
@d1 1
a1 1
#	$OpenBSD$
d26 2
@


1.3
log
@Added <bsd.lkm.mk> file. Correspondent changes made to the bsd.README.
All the rest changed to be $OpenBSD$.
Dedicated to Suzi Quatro (she must be alive still, so best wishes to here).
@
text
@d1 2
a2 1
#	$OpenBSD: sys.mk,v 1.22 1995/09/24 23:49:09 christos Exp $
@


1.2
log
@s/NetBSD/OpenBSD/
@
text
@d1 1
a1 1
#	$NetBSD: sys.mk,v 1.22 1995/09/24 23:49:09 christos Exp $
@


1.1
log
@Initial revision
@
text
@d4 1
a4 1
unix=		We run NetBSD.
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
