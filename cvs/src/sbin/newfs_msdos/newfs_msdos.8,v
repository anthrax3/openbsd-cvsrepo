head	1.25;
access;
symbols
	OPENBSD_6_2:1.25.0.12
	OPENBSD_6_2_BASE:1.25
	OPENBSD_6_1:1.25.0.14
	OPENBSD_6_1_BASE:1.25
	OPENBSD_6_0:1.25.0.10
	OPENBSD_6_0_BASE:1.25
	OPENBSD_5_9:1.25.0.6
	OPENBSD_5_9_BASE:1.25
	OPENBSD_5_8:1.25.0.8
	OPENBSD_5_8_BASE:1.25
	OPENBSD_5_7:1.25.0.2
	OPENBSD_5_7_BASE:1.25
	OPENBSD_5_6:1.25.0.4
	OPENBSD_5_6_BASE:1.25
	OPENBSD_5_5:1.24.0.6
	OPENBSD_5_5_BASE:1.24
	OPENBSD_5_4:1.24.0.2
	OPENBSD_5_4_BASE:1.24
	OPENBSD_5_3:1.23.0.14
	OPENBSD_5_3_BASE:1.23
	OPENBSD_5_2:1.23.0.12
	OPENBSD_5_2_BASE:1.23
	OPENBSD_5_1_BASE:1.23
	OPENBSD_5_1:1.23.0.10
	OPENBSD_5_0:1.23.0.8
	OPENBSD_5_0_BASE:1.23
	OPENBSD_4_9:1.23.0.6
	OPENBSD_4_9_BASE:1.23
	OPENBSD_4_8:1.23.0.4
	OPENBSD_4_8_BASE:1.23
	OPENBSD_4_7:1.23.0.2
	OPENBSD_4_7_BASE:1.23
	OPENBSD_4_6:1.22.0.10
	OPENBSD_4_6_BASE:1.22
	OPENBSD_4_5:1.22.0.6
	OPENBSD_4_5_BASE:1.22
	OPENBSD_4_4:1.22.0.4
	OPENBSD_4_4_BASE:1.22
	OPENBSD_4_3:1.22.0.2
	OPENBSD_4_3_BASE:1.22
	OPENBSD_4_2:1.21.0.2
	OPENBSD_4_2_BASE:1.21
	OPENBSD_4_1:1.20.0.16
	OPENBSD_4_1_BASE:1.20
	OPENBSD_4_0:1.20.0.14
	OPENBSD_4_0_BASE:1.20
	OPENBSD_3_9:1.20.0.12
	OPENBSD_3_9_BASE:1.20
	OPENBSD_3_8:1.20.0.10
	OPENBSD_3_8_BASE:1.20
	OPENBSD_3_7:1.20.0.8
	OPENBSD_3_7_BASE:1.20
	OPENBSD_3_6:1.20.0.6
	OPENBSD_3_6_BASE:1.20
	OPENBSD_3_5:1.20.0.4
	OPENBSD_3_5_BASE:1.20
	OPENBSD_3_4:1.20.0.2
	OPENBSD_3_4_BASE:1.20
	OPENBSD_3_3:1.19.0.2
	OPENBSD_3_3_BASE:1.19
	OPENBSD_3_2:1.18.0.4
	OPENBSD_3_2_BASE:1.18
	OPENBSD_3_1:1.18.0.2
	OPENBSD_3_1_BASE:1.18
	OPENBSD_3_0:1.17.0.4
	OPENBSD_3_0_BASE:1.17
	OPENBSD_2_9:1.17.0.2
	OPENBSD_2_9_BASE:1.17
	OPENBSD_2_8:1.16.0.2
	OPENBSD_2_8_BASE:1.16
	OPENBSD_2_7:1.15.0.2
	OPENBSD_2_7_BASE:1.15
	OPENBSD_2_6:1.12.0.2
	OPENBSD_2_6_BASE:1.12
	OPENBSD_2_5:1.8.0.2
	OPENBSD_2_5_BASE:1.8
	OPENBSD_2_4:1.5.0.2
	OPENBSD_2_4_BASE:1.5
	OPENBSD_2_3:1.4.0.6
	OPENBSD_2_3_BASE:1.4
	OPENBSD_2_2:1.4.0.4
	OPENBSD_2_2_BASE:1.4
	OPENBSD_2_1:1.4.0.2
	OPENBSD_2_1_BASE:1.4
	OPENBSD_2_0:1.2.0.2
	OPENBSD_2_0_BASE:1.2;
locks; strict;
comment	@# @;


1.25
date	2014.07.10.19.31.07;	author tobias;	state Exp;
branches;
next	1.24;
commitid	KV1FGZS0cSWxDW7c;

1.24
date	2013.07.16.09.45.28;	author schwarze;	state Exp;
branches;
next	1.23;

1.23
date	2009.07.27.18.11.07;	author halex;	state Exp;
branches;
next	1.22;

1.22
date	2007.09.28.09.57.01;	author jmc;	state Exp;
branches;
next	1.21;

1.21
date	2007.05.31.19.19.46;	author jmc;	state Exp;
branches;
next	1.20;

1.20
date	2003.06.03.13.16.08;	author jmc;	state Exp;
branches;
next	1.19;

1.19
date	2003.02.07.07.45.13;	author jmc;	state Exp;
branches;
next	1.18;

1.18
date	2001.12.21.11.41.50;	author mpech;	state Exp;
branches;
next	1.17;

1.17
date	2000.11.09.17.53.04;	author aaron;	state Exp;
branches;
next	1.16;

1.16
date	2000.07.05.14.01.21;	author aaron;	state Exp;
branches;
next	1.15;

1.15
date	2000.03.18.22.56.02;	author aaron;	state Exp;
branches;
next	1.14;

1.14
date	2000.02.07.09.02.43;	author deraadt;	state Exp;
branches;
next	1.13;

1.13
date	2000.02.06.22.52.13;	author imp;	state Exp;
branches;
next	1.12;

1.12
date	99.07.07.10.50.11;	author aaron;	state Exp;
branches;
next	1.11;

1.11
date	99.07.04.18.59.41;	author aaron;	state Exp;
branches;
next	1.10;

1.10
date	99.06.04.02.45.19;	author aaron;	state Exp;
branches;
next	1.9;

1.9
date	99.05.28.23.00.01;	author aaron;	state Exp;
branches;
next	1.8;

1.8
date	98.12.15.01.20.40;	author aaron;	state Exp;
branches;
next	1.7;

1.7
date	98.11.28.19.56.29;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	98.11.11.22.19.59;	author aaron;	state Exp;
branches;
next	1.5;

1.5
date	98.09.17.04.14.57;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	97.01.10.19.04.09;	author kstailey;	state Exp;
branches;
next	1.3;

1.3
date	97.01.03.16.45.38;	author kstailey;	state Exp;
branches;
next	1.2;

1.2
date	96.06.23.14.31.50;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	96.06.10.06.37.15;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.25
log
@Put boot signature always at end of 512 byte sector, even on disks with
larger sector sizes.  512 bytes is also the smallest valid sector size.

Merged from NetBSD's revision 1.24.

ok krw@@, tedu@@
@
text
@.\"	$OpenBSD: newfs_msdos.8,v 1.24 2013/07/16 09:45:28 schwarze Exp $
.\"
.\" Copyright (c) 1998 Robert Nordier
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in
.\"    the documentation and/or other materials provided with the
.\"    distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR(S) ``AS IS'' AND ANY EXPRESS
.\" OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
.\" WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR(S) BE LIABLE FOR ANY
.\" DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
.\" GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
.\" INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER
.\" IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
.\" OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN
.\" IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.\" $FreeBSD: src/sbin/newfs_msdos/newfs_msdos.8,v 1.6 1999/08/28 00:13:52 peter Exp $
.\"
.Dd $Mdocdate: July 16 2013 $
.Dt NEWFS_MSDOS 8
.Os
.Sh NAME
.Nm newfs_msdos
.Nd construct a new MS-DOS (FAT) file system
.Sh SYNOPSIS
.Nm newfs_msdos
.Bk -words
.Op Fl N
.Op Fl a Ar FAT-size
.Op Fl B Ar boot
.Op Fl b Ar block-size
.Op Fl c Ar cluster-size
.Op Fl e Ar dirents
.Op Fl F Ar FAT-type
.Op Fl f Ar format
.Op Fl h Ar heads
.Op Fl I Ar volid
.Op Fl i Ar info
.Op Fl k Ar backup
.Op Fl L Ar label
.Op Fl m Ar media
.Op Fl n Ar FATs
.Op Fl O Ar OEM
.Op Fl o Ar hidden
.Op Fl r Ar reserved
.Op Fl S Ar sector-size
.Op Fl s Ar total
.Op Fl u Ar track-size
.Ar special
.Op Ar disktype
.Ek
.Sh DESCRIPTION
The
.Nm
utility creates a FAT12, FAT16, or FAT32 file system on device
.Ar special ,
using
.Xr disktab 5
entry
.Ar disktype
to determine geometry, if required.
.Pp
The
.Ar special
file should be a raw device,
for example
.Pa /dev/rsd0i ;
if a relative path like
.Pa sd0i
is specified,
the corresponding raw device is used.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl a Ar FAT-size
Number of sectors per FAT.
.It Fl B Ar boot
Get bootstrap from file.
.It Fl b Ar block-size
File system block size (bytes per cluster).
This should resolve to an acceptable number of sectors per cluster (see below).
.It Fl c Ar cluster-size
Sectors per cluster.
Acceptable values are powers of 2 in the range 1 through 128.
.It Fl e Ar dirents
Number of root directory entries (FAT12 and FAT16 only).
.It Fl F Ar FAT-type
FAT type (one of 12, 16, or 32).
.It Fl f Ar format
Specify a standard (floppy disk) format.
The eight standard formats
are (capacities in kilobytes): 160, 180, 320, 360, 720, 1200, 1440,
2880.
.It Fl h Ar heads
Number of drive heads.
.It Fl I Ar volid
Volume ID.
.It Fl i Ar info
Location of the file system info sector (FAT32 only).
A value of 0xffff signifies no info sector.
.It Fl k Ar backup
Location of the backup boot sector (FAT32 only).
A value of 0xffff signifies no backup sector.
.It Fl L Ar label
Volume label (up to 11 characters).
The label should consist of
only those characters permitted in regular DOS (8+3) filenames.
.It Fl m Ar media
Media descriptor (acceptable range 0xf0 to 0xff).
.It Fl N
Don't create a file system: just print out parameters.
.It Fl n Ar FATs
Number of FATs.
Acceptable values are 1 to 16 inclusive.
The default is 2.
.It Fl O Ar OEM
OEM string (up to 8 characters).
The default is
"BSD  4.4".
.It Fl o Ar hidden
Number of hidden sectors.
.It Fl r Ar reserved
Number of reserved sectors.
.It Fl S Ar sector-size
Number of bytes per sector.
Acceptable values are powers of 2 in the range 512 through 32768.
.It Fl s Ar total
File system size.
.It Fl u Ar track-size
Number of sectors per track.
.El
.Sh NOTES
FAT file system parameters occupy a "Boot Sector BPB (BIOS Parameter
Block)" in the first of the "reserved" sectors which precede the actual
file system.
For reference purposes, this structure is presented below.
.Bd -literal
struct bsbpb {
	u_int16_t	bps;		/* [-S] bytes per sector */
	u_int8_t	spc;		/* [-c] sectors per cluster */
	u_int16_t	res;		/* [-r] reserved sectors */
	u_int8_t	nft;		/* [-n] number of FATs */
	u_int16_t	rde;		/* [-e] root directory entries */
	u_int16_t	sec;		/* [-s] total sectors */
	u_int8_t	mid;		/* [-m] media descriptor */
	u_int16_t	spf;		/* [-a] sectors per FAT */
	u_int16_t	spt;		/* [-u] sectors per track */
	u_int16_t	hds;		/* [-h] drive heads */
	u_int32_t	hid;		/* [-o] hidden sectors */
	u_int32_t	bsec;		/* [-s] big total sectors */
};

/* FAT32 extensions */
struct bsxbpb {
	u_int32_t	bspf;		/* [-a] big sectors per FAT */
	u_int16_t	xflg;		/* control flags */
	u_int16_t	vers;		/* file system version */
	u_int32_t	rdcl;		/* root directory start cluster */
	u_int16_t	infs;		/* [-i] file system info sector */
	u_int16_t	bkbs;		/* [-k] backup boot sector */
};
.Ed
.Sh EXAMPLES
Create a file system, using default parameters, on /dev/rwd0i.
.Dl newfs_msdos /dev/rwd0i
.Pp
Create a standard 1.44M file system, with volume label "foo", on
/dev/rfd0c.
.Dl newfs_msdos -f 1440 -L foo fd0c
.Sh DIAGNOSTICS
Exit status is 0 on success and 1 on error.
.Sh SEE ALSO
.Xr disktab 5 ,
.Xr disklabel 8 ,
.Xr fdisk 8 ,
.Xr newfs 8
.Sh HISTORY
The
.Nm
command first appeared in
.Ox 2.1 .
.Sh AUTHORS
.An Robert Nordier Aq Mt rnordier@@FreeBSD.org .
@


1.24
log
@Add missing .Mt macros for AUTHORS email addresses.
From Jan Stary <hans at stare dot cz>.
ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: newfs_msdos.8,v 1.23 2009/07/27 18:11:07 halex Exp $
d30 1
a30 1
.Dd $Mdocdate: July 27 2009 $
d137 1
a137 1
Acceptable values are powers of 2 in the range 128 through 32768.
@


1.23
log
@As is already the case for ffs, do not allow creation of msdos file systems
on block devices

ok marco@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: newfs_msdos.8,v 1.22 2007/09/28 09:57:01 jmc Exp $
d30 1
a30 1
.Dd $Mdocdate: September 28 2007 $
d194 1
a194 1
.An Robert Nordier Aq rnordier@@FreeBSD.org .
@


1.22
log
@sort options;
@
text
@d1 1
a1 1
.\"	$OpenBSD: newfs_msdos.8,v 1.21 2007/05/31 19:19:46 jmc Exp $
d30 1
a30 1
.Dd $Mdocdate$
d73 10
@


1.21
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: newfs_msdos.8,v 1.20 2003/06/03 13:16:08 jmc Exp $
d40 1
a41 6
.Op Fl F Ar FAT-type
.Op Fl I Ar volid
.Op Fl L Ar label
.Op Fl O Ar OEM
.Op Fl S Ar sector-size
.Op Fl a Ar FAT-size
d45 1
d48 1
d51 1
d54 1
d57 1
d76 2
a77 2
.It Fl N
Don't create a file system: just print out parameters.
a79 17
.It Fl F Ar FAT-type
FAT type (one of 12, 16, or 32).
.It Fl I Ar volid
Volume ID.
.It Fl L Ar label
Volume label (up to 11 characters).
The label should consist of
only those characters permitted in regular DOS (8+3) filenames.
.It Fl O Ar OEM
OEM string (up to 8 characters).
The default is
"BSD  4.4".
.It Fl S Ar sector-size
Number of bytes per sector.
Acceptable values are powers of 2 in the range 128 through 32768.
.It Fl a Ar FAT-size
Number of sectors per FAT.
d88 2
d97 2
d105 4
d111 2
d117 4
d125 3
@


1.20
log
@- section reorder
- some mdoc fixes
@
text
@d1 1
a1 1
.\"	$OpenBSD: newfs_msdos.8,v 1.19 2003/02/07 07:45:13 jmc Exp $
d30 1
a30 1
.Dd July 6, 1998
@


1.19
log
@typos;
@
text
@d1 1
a1 1
.\"	$OpenBSD: newfs_msdos.8,v 1.18 2001/12/21 11:41:50 mpech Exp $
d171 2
a177 2
.Sh DIAGNOSTICS
Exit status is 0 on success and 1 on error.
@


1.18
log
@Initial patch for a new mdoc issue.
Powered by @@mantoya:
o) kill extra line in the end of file;
o) kill extra space in the end of line;
o) replace blank lines with .Pp;

millert@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: newfs_msdos.8,v 1.17 2000/11/09 17:53:04 aaron Exp $
d38 1
d62 1
@


1.17
log
@Change all option list specifications to ".Bl -tag -width Ds". Most man
pages just needed their -width parameter tweaked to "Ds", which provides
a nice width of 6 constant characters. For consistency more than anything.
@
text
@d1 1
a1 1
.\"	$OpenBSD: newfs_msdos.8,v 1.16 2000/07/05 14:01:21 aaron Exp $
a162 3

	newfs_msdos /dev/rwd0i

d164 2
a165 3

	newfs_msdos -f 1440 -L foo fd0c

d168 1
@


1.16
log
@Correct minor formatting errors/typos.
@
text
@d1 1
a1 1
.\"	$OpenBSD: newfs_msdos.8,v 1.15 2000/03/18 22:56:02 aaron Exp $
d73 1
a73 1
.Bl -tag -width indent
@


1.15
log
@Remove hard sentence breaks, and some other cleanup along the way.
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d72 1
a72 1
The options are as follow:
@


1.14
log
@various minor cleanups of uglies
@
text
@d1 2
d83 2
a84 1
Volume label (up to 11 characters).  The label should consist of
d87 2
a88 1
OEM string (up to 8 characters).  The default is
d91 2
a92 2
Number of bytes per sector.  Acceptable values are powers of 2
in the range 128 through 32768.
d96 2
a97 2
File system block size (bytes per cluster).  This should resolve to an
acceptable number of sectors per cluster (see below).
d99 2
a100 2
Sectors per cluster.  Acceptable values are powers of 2 in the range
1 through 128.
d104 2
a105 1
Specify a standard (floppy disk) format.  The eight standard formats
d114 2
a115 2
Location of the backup boot sector (FAT32 only).  A value
of 0xffff signifies no backup sector.
d119 3
a121 2
Number of FATs.  Acceptable values are 1 to 16 inclusive. The default
is 2.
d134 2
a135 2
file system.  For reference purposes, this structure is presented
below.
@


1.13
log
@Upgrade newfs_msdos to latest freebsd version.  This one knows how to handle
msdos on hard disk as well as floppies.  ok millert@@
@
text
@d132 12
a143 12
    u_int16_t	bps;		/* [-S] bytes per sector */
    u_int8_t	spc;		/* [-c] sectors per cluster */
    u_int16_t	res;		/* [-r] reserved sectors */
    u_int8_t	nft;		/* [-n] number of FATs */
    u_int16_t	rde;		/* [-e] root directory entries */
    u_int16_t	sec;		/* [-s] total sectors */
    u_int8_t	mid;		/* [-m] media descriptor */
    u_int16_t	spf;		/* [-a] sectors per FAT */
    u_int16_t	spt;		/* [-u] sectors per track */
    u_int16_t	hds;		/* [-h] drive heads */
    u_int32_t	hid;		/* [-o] hidden sectors */
    u_int32_t	bsec;		/* [-s] big total sectors */
d145 1
d148 6
a153 6
    u_int32_t	bspf;		/* [-a] big sectors per FAT */
    u_int16_t	xflg;		/* control flags */
    u_int16_t	vers;		/* file system version */
    u_int32_t	rdcl;		/* root directory start cluster */
    u_int16_t	infs;		/* [-i] file system info sector */
    u_int16_t	bkbs;		/* [-k] backup boot sector */
d177 1
a177 1
.Fx 3.0 .
@


1.12
log
@The proper order of the ``introductory'' macros in a man page is .Dd/.Dt/.Os.
Out of the approximately 1450 man pages, only about 90 of them were wrong.
Thanks to kwesterback@@home.com for coming up with a script and patch to repair
this. The patch also inserted a .Os macro in the few man pages that were
missing one.
@
text
@d1 1
a1 4
.\" $OpenBSD: newfs_msdos.8,v 1.11 1999/07/04 18:59:41 aaron Exp $
.\"
.\" Copyright (c) 1995, 1996 Joerg Wunsch
.\"
a3 2
.\" This program is free software.
.\"
d10 15
a24 13
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE DEVELOPERS ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE DEVELOPERS BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
d26 1
d28 2
a29 2
.Dd November 5, 1995
.Dt NEWFS_MSDOS 1
d33 1
a33 1
.Nd create an MS-DOS (FAT) file system
d36 23
a58 3
.Bq Fl s Ar kilobytes
.Bq Fl L Ar vollabel
.Ar device
d60 1
d62 7
a68 33
establishes a file system structure on
.Ar device
that is understood by
.Xr mount_msdos 8
and some ancient program loaders.
.Ar device
will typically be the character device node for a floppy disk drive,
.Pq e.g. Pa /dev/rfd0 ,
although any existing writable file or device is acceptable.  In case
of a regular file it is treated as a dumped image of an MS-DOS file
system; only the file system structure will be written to it, and it
won't be truncated.
.Pp
The options are as follows:
.Bl -tag -width 10n -offset indent
.It Fl s Ar kilobytes
Use defaults for a typical file system with
.Ar capacity
kilobytes.  Currently, the values 360, 720, 1200, and 1440 are
recognized.
.Pp
If this option is not specified,
.Nm
attempts to determine the size of the
.Ar device .
This is not reliably possible in all cases, but is believed to work
for the more common situations.
.It Fl L Ar vollabel
Use
.Ar vollabel
to describe the file system, instead of the default
.Dq 4.4BSD .
.El
d70 54
a123 28
The file system structure consists of three major areas:
.Bl -tag -width 10n -offset indent
.It Em The bootsector
This is the very first (512-byte) sector.  It contains executable
code that normally would bootstrap an operating system when loaded.
Since it's beyond the scope of
.Nm
to install an operating system on the medium, this boot code will only
print a message that the disk does not contain a bootable system.
Inside the
.Em bootsector
is the
.Em BIOS parameter block (BPB) ,
where several statistical parameters of the file system are being
held.
.It Em The file allocation table(s) (FAT)
Sectors next to the
.Em bootsector
hold the FAT, which is used to register file system allocation,
as well as keeping pointer chains for the chunks constituting
one file.  There are usually two identical copies of the FAT.
.It Em The root directory
The final structure is the root directory for this medium.  It is
merely a space reservation, padded with 0s, and unfortunately fixed
in its size.
.Nm
initializes it to empty, and enters a volume label record into the
very first directory slot.
d125 40
a164 5
.Sh DIAGNOSTICS
An exit status of 0 is returned upon successful operation. Exit status
1 is returned on any errors during file system creation, and an exit status
of 2 reflects invalid arguments given to the program (along with an
appropriate information written to diagnostic output).
d166 3
a168 2
.Xr fdformat 1 ,
.Xr mount_msdos 8 ,
d170 2
a171 13
.Sh BUGS
There is currently no way to specify obscure file system parameters.
Thus, only media with one of the supported capacity values can be
formatted.  For the same reason, it's not possible to handle hard disk
partitions.  More options should be added to allow this.  More entries
should be added to the table of known formats, too.
.Pp
No attempt is made to handle media defects.  However, this is beyond
the scope of
.Nm
and should better be handled by the (nonexistent)
.Xr dosfsck 1
utility.
d173 1
d175 4
a178 4
appeared in
.Fx 2.2 .
.Sh AUTHOR
The program has been contributed by Joerg Wunsch, Dresden.
@


1.11
log
@trash some old leftover macros and replace them with -mdoc macros
@
text
@d1 1
a1 1
.\" $OpenBSD: newfs_msdos.8,v 1.10 1999/06/04 02:45:19 aaron Exp $
d31 1
a32 1
.Dt NEWFS_MSDOS 1
@


1.10
log
@start to remove non-escaped trailing whitespace, it can confuse troff; pjanzen@@
@
text
@d1 1
a1 1
.\" $OpenBSD: newfs_msdos.8,v 1.9 1999/05/28 23:00:01 aaron Exp $
d131 1
a131 1
.Em FreeBSD 2.2 .
d133 1
a133 4
The program has been contributed by
.if n Joerg Wunsch,
.if t J\(:org Wunsch,
Dresden.
@


1.9
log
@more .El madness
@
text
@d1 1
a1 1
.\" $OpenBSD: newfs_msdos.8,v 1.8 1998/12/15 01:20:40 aaron Exp $
d38 1
a38 1
.Bq Fl s Ar kilobytes 
@


1.8
log
@always give .Nm macros an argument in SYNOPSIS sections; krw@@tcn.net
@
text
@d1 1
a1 1
.\" $OpenBSD: newfs_msdos.8,v 1.7 1998/11/28 19:56:29 aaron Exp $
d105 1
@


1.7
log
@kill redundant .Nm macro arguments; other misc fixes
@
text
@d1 1
a1 1
.\" $OpenBSD: newfs_msdos.8,v 1.6 1998/11/11 22:19:59 aaron Exp $
d37 1
a37 1
.Nm
@


1.6
log
@more `` '' -> .Dq sillyness; remove redundant .Pp macros; other misc fixes
@
text
@d1 1
a1 1
.\" $OpenBSD: newfs_msdos.8,v 1.5 1998/09/17 04:14:57 aaron Exp $
d37 1
a37 1
.Nm newfs_msdos
d42 1
a42 1
.Nm newfs_msdos
d102 1
a102 1
.Nm newfs_msdos
d123 1
a123 1
.Nm newfs_msdos
d128 1
a128 1
.Nm newfs_msdos
@


1.5
log
@sbin/ man page fixes
@
text
@d1 1
a1 1
.\" $OpenBSD: newfs_msdos.8,v 1.4 1997/01/10 19:04:09 kstailey Exp $
d74 1
a74 1
.Ql 4.4BSD .
@


1.4
log
@use opendev(3) + man page correction
@
text
@d1 1
a1 1
.\" $OpenBSD: newfs_msdos.8,v 1.3 1997/01/03 16:45:38 kstailey Exp $
d46 3
a48 3
.Xr mount_msdos
and some ancient program loader.
.Ar Device
d50 1
a50 1
.Pq e.\ g. Pa /dev/rfd0 ,
d100 1
a100 1
merely a space reservation, padded with 0's, and unfortunately fixed
d113 1
a113 1
.Xr newfs 8 .
@


1.3
log
@change all refs from mkdosfs to newfs_msdos
@
text
@d1 1
a1 1
.\" $OpenBSD: newfs_msdos.8,v 1.2 1996/06/23 14:31:50 deraadt Exp $
d38 1
a38 1
.Bq Fl f Ar capacity
d58 1
a58 1
.It Fl f Ar capacity
@


1.2
log
@update rcsid
@
text
@d1 1
a1 1
.\" $OpenBSD: newfs_msdos.8,v 1.1 1996/06/10 06:37:15 deraadt Exp $
d32 1
a32 1
.Dt MKDOSFS 1
d34 1
a34 1
.Nm mkdosfs
d37 1
a37 1
.Nm mkdosfs
d42 1
a42 1
.Nm Mkdosfs
d102 1
a102 1
.Nm mkdosfs
d123 1
a123 1
.Nm mkdosfs
d128 1
a128 1
.Nm Mkdosfs
@


1.1
log
@add newfs_msdos (from freebsd); does not know how to make non-floppy filesystems yet
@
text
@d1 1
a28 1
.\" $Id: mkdosfs.1,v 1.2 1996/01/30 02:35:04 joerg Exp $
@
