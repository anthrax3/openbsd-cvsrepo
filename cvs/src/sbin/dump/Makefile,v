head	1.13;
access;
symbols
	OPENBSD_6_1:1.13.0.6
	OPENBSD_6_1_BASE:1.13
	OPENBSD_6_0:1.13.0.2
	OPENBSD_6_0_BASE:1.13
	OPENBSD_5_9:1.12.0.6
	OPENBSD_5_9_BASE:1.12
	OPENBSD_5_8:1.12.0.8
	OPENBSD_5_8_BASE:1.12
	OPENBSD_5_7:1.12.0.2
	OPENBSD_5_7_BASE:1.12
	OPENBSD_5_6:1.12.0.4
	OPENBSD_5_6_BASE:1.12
	OPENBSD_5_5:1.11.0.8
	OPENBSD_5_5_BASE:1.11
	OPENBSD_5_4:1.11.0.4
	OPENBSD_5_4_BASE:1.11
	OPENBSD_5_3:1.11.0.2
	OPENBSD_5_3_BASE:1.11
	OPENBSD_5_2:1.10.0.48
	OPENBSD_5_2_BASE:1.10
	OPENBSD_5_1_BASE:1.10
	OPENBSD_5_1:1.10.0.46
	OPENBSD_5_0:1.10.0.44
	OPENBSD_5_0_BASE:1.10
	OPENBSD_4_9:1.10.0.42
	OPENBSD_4_9_BASE:1.10
	OPENBSD_4_8:1.10.0.40
	OPENBSD_4_8_BASE:1.10
	OPENBSD_4_7:1.10.0.36
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.10.0.38
	OPENBSD_4_6_BASE:1.10
	OPENBSD_4_5:1.10.0.34
	OPENBSD_4_5_BASE:1.10
	OPENBSD_4_4:1.10.0.32
	OPENBSD_4_4_BASE:1.10
	OPENBSD_4_3:1.10.0.30
	OPENBSD_4_3_BASE:1.10
	OPENBSD_4_2:1.10.0.28
	OPENBSD_4_2_BASE:1.10
	OPENBSD_4_1:1.10.0.26
	OPENBSD_4_1_BASE:1.10
	OPENBSD_4_0:1.10.0.24
	OPENBSD_4_0_BASE:1.10
	OPENBSD_3_9:1.10.0.22
	OPENBSD_3_9_BASE:1.10
	OPENBSD_3_8:1.10.0.20
	OPENBSD_3_8_BASE:1.10
	OPENBSD_3_7:1.10.0.18
	OPENBSD_3_7_BASE:1.10
	OPENBSD_3_6:1.10.0.16
	OPENBSD_3_6_BASE:1.10
	OPENBSD_3_5:1.10.0.14
	OPENBSD_3_5_BASE:1.10
	OPENBSD_3_4:1.10.0.12
	OPENBSD_3_4_BASE:1.10
	OPENBSD_3_3:1.10.0.10
	OPENBSD_3_3_BASE:1.10
	OPENBSD_3_2:1.10.0.8
	OPENBSD_3_2_BASE:1.10
	OPENBSD_3_1:1.10.0.6
	OPENBSD_3_1_BASE:1.10
	OPENBSD_3_0:1.10.0.4
	OPENBSD_3_0_BASE:1.10
	OPENBSD_2_9:1.10.0.2
	OPENBSD_2_9_BASE:1.10
	OPENBSD_2_8:1.9.0.12
	OPENBSD_2_8_BASE:1.9
	OPENBSD_2_7:1.9.0.10
	OPENBSD_2_7_BASE:1.9
	OPENBSD_2_6:1.9.0.8
	OPENBSD_2_6_BASE:1.9
	OPENBSD_2_5:1.9.0.6
	OPENBSD_2_5_BASE:1.9
	OPENBSD_2_4:1.9.0.4
	OPENBSD_2_4_BASE:1.9
	OPENBSD_2_3:1.9.0.2
	OPENBSD_2_3_BASE:1.9
	OPENBSD_2_2:1.8.0.2
	OPENBSD_2_2_BASE:1.8
	OPENBSD_2_1:1.6.0.2
	OPENBSD_2_1_BASE:1.6
	OPENBSD_2_0:1.4.0.2
	OPENBSD_2_0_BASE:1.4
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.13
date	2016.03.30.06.38.43;	author jmc;	state Exp;
branches;
next	1.12;
commitid	LN9ijdk9SEnzWAbM;

1.12
date	2014.07.11.16.01.41;	author halex;	state Exp;
branches;
next	1.11;
commitid	gCk3OFggNKp4mxan;

1.11
date	2013.01.06.21.59.28;	author martynas;	state Exp;
branches;
next	1.10;

1.10
date	2001.04.10.20.52.10;	author naddy;	state Exp;
branches;
next	1.9;

1.9
date	98.02.08.19.24.05;	author deraadt;	state Exp;
branches;
next	1.8;

1.8
date	97.09.21.11.36.18;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	97.07.05.05.35.53;	author millert;	state Exp;
branches;
next	1.6;

1.6
date	97.02.04.10.06.18;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	97.02.03.11.53.23;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	96.09.14.19.26.56;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	96.09.01.15.31.01;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	96.06.23.14.30.09;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.43.28;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.43.28;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.13
log
@for some time now mandoc has not required MLINKS to function
correctly - logically complete that now by removing MLINKS from base;

authors need only to ensure there is an entry in NAME for any function/
util being added. MLINKS will still work, and remain for perl to ease
upgrades;

ok nicm (curses) bcook (ssl)
ok schwarze, who provided a lot of feedback and assistance
ok tb natano jung
@
text
@#	$OpenBSD: Makefile,v 1.12 2014/07/11 16:01:41 halex Exp $

#	dump.h			header file
#	itime.c			reads /etc/dumpdates
#	main.c			driver
#	optr.c			operator interface
#	dumprmt.c		handles remote tape via rmt(8)
#	tape.c			handles the mag tape and opening/closing
#	traverse.c		traverses the file system
#
#	DEBUG			use local directory to find ddate and dumpdates
#	TDEBUG			trace out the process forking

PROG=	dump
LINKS=	${BINDIR}/dump ${BINDIR}/rdump
CFLAGS+=-DRDUMP
DPADD+=	${LIBUTIL}
LDADD+=	-lutil
SRCS=	itime.c main.c optr.c dumprmt.c tape.c traverse.c
MAN=	dump.8

.include <bsd.prog.mk>
@


1.12
log
@make dump support DUIDs for command line arguments and /etc/dumpdates (using
the new shiny -U switch)

dumpdates part originating from, and discussed with, Maximilian Fillinger

seems reasonable to krw@@, "get it in" deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.11 2013/01/06 21:59:28 martynas Exp $
a20 1
MLINKS+=dump.8 rdump.8
@


1.11
log
@The sparc optimization bug is believed to be fixed.  OK naddy@@.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.10 2001/04/10 20:52:10 naddy Exp $
d17 2
@


1.10
log
@Disable optimization on sparc; ok deraadt@@

If tape.c is compiled with -O or higher, dump runs on _some_ systems
will _sometimes_ become stuck.  All five dump processes (tty, master,
slaves) will just sleep.

This has been observed on some sun4c and sun4m systems.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.9 1998/02/08 19:24:05 deraadt Exp $
a19 4

.if (${MACHINE_ARCH} == "sparc")
CFLAGS+= -O0
.endif
@


1.9
log
@y2k fixes; netbsd & Andreas.Gunnarsson@@emw.ericsson.se
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 1997/09/21 11:36:18 deraadt Exp $
d20 4
@


1.8
log
@$OpenBSD$
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 1997/07/05 05:35:53 millert Exp $
a9 1
#	unctime.c		undo ctime
d17 1
a17 1
SRCS=	itime.c main.c optr.c dumprmt.c tape.c traverse.c unctime.c
@


1.7
log
@Fix some incorrect strncpy usage.

From NetBSD (luke@@netbsd.org)
* verbosity additions displaying total & per-volume transfer times and rates
* Add the ability to dump specific files & directories of a single
  filesystem. This uses fts(3) to access the directory structure (and
  not the raw device), so the standard access permissions are adhered
  to (unlike dumping an entire filesystem, which just requires read
  access to the raw disk device).
* Support SIGINFO status reporting.
* Remove now unused variables that previously stored the (e)uid.
* Be more informative in a couple of error messages.

From NetBSD (mrg)
* fix NetBSD PR#3710, reported by Tatoku Ogaito <tacha@@trap.fukui-med.ac.jp>.
  don't pass pw->pw_name into functions; make a copy.
@
text
@d1 1
a1 3
#	$OpenBSD: Makefile,v 1.6 1997/02/04 10:06:18 deraadt Exp $
#	$NetBSD: Makefile,v 1.17 1997/05/27 08:35:25 mrg Exp $
#	@@(#)Makefile	8.1 (Berkeley) 6/5/93
@


1.6
log
@maxbsize hack i did was not portable
@
text
@d1 3
a3 2
#	$OpenBSD: Makefile,v 1.5 1997/02/03 11:53:23 deraadt Exp $
#	$NetBSD: Makefile,v 1.16 1995/03/18 14:54:53 cgd Exp $
@


1.5
log
@new -a option autosizes, meaning it runs till it hits EOM (no need for
pesky sizing options) -- from FreeBSD.
also make -b option aware of MAXPHYS issues (via a little hack)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 1996/09/14 19:26:56 deraadt Exp $
d19 1
a19 1
SRCS=	itime.c main.c optr.c dumprmt.c tape.c traverse.c unctime.c maxbsize.c
@


1.4
log
@not setgid tty anymore.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.3 1996/09/01 15:31:01 deraadt Exp $
d19 1
a19 1
SRCS=	itime.c main.c optr.c dumprmt.c tape.c traverse.c unctime.c
@


1.3
log
@kill setuid, fix setgid hole
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.2 1996/06/23 14:30:09 deraadt Exp $
a19 2
BINGRP=	tty
BINMODE=2555
@


1.2
log
@update rcsid
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.16 1995/03/18 14:54:53 cgd Exp $
a19 1
BINOWN=	root
d21 1
a21 1
BINMODE=6555
@


1.1
log
@Initial revision
@
text
@d1 1
a2 1
#	@@(#)Makefile	8.1 (Berkeley) 6/5/93
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
