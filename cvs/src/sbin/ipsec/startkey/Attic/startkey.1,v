head	1.8;
access;
symbols
	OPENBSD_2_4:1.6.0.2
	OPENBSD_2_4_BASE:1.6
	OPENBSD_2_3:1.4.0.2
	OPENBSD_2_3_BASE:1.4
	OPENBSD_2_2:1.3.0.2
	OPENBSD_2_2_BASE:1.3;
locks; strict;
comment	@# @;


1.8
date	98.11.14.23.37.20;	author deraadt;	state dead;
branches;
next	1.7;

1.7
date	98.11.11.22.19.58;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	98.05.14.10.46.23;	author niklas;	state Exp;
branches;
next	1.5;

1.5
date	98.05.13.12.29.36;	author niklas;	state Exp;
branches;
next	1.4;

1.4
date	98.03.05.09.30.56;	author provos;	state Exp;
branches;
next	1.3;

1.3
date	97.07.24.23.47.21;	author provos;	state Exp;
branches;
next	1.2;

1.2
date	97.07.23.12.28.57;	author provos;	state Exp;
branches;
next	1.1;

1.1
date	97.07.22.11.19.22;	author provos;	state Exp;
branches;
next	;


desc
@@


1.8
log
@move ipsec tools into .
@
text
@.\" $OpenBSD: startkey.1,v 1.7 1998/11/11 22:19:58 aaron Exp $
.\" Copyright 1997 Niels Provos <provos@@physnet.uni-hamburg.de>
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"      This product includes software developed by Niels Provos.
.\" 4. The name of the author may not be used to endorse or promote products
.\"    derived from this software without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.\" Manual page, using -mandoc macros
.\"
.Dd July 18, 1997
.Dt STARTKEY 1
.Os
.Sh NAME
.Nm startkey
.Nd start keying with photurisd
.Sh SYNOPSIS
.Nm startkey
.Op Fl d Ar directory
.Ar options ...
.Sh DESCRIPTION
The
.Nm startkey
utility attemps to contact the
.Xr photurisd 8
daemon and initalize a key exchange. The flags are: 
.Bl -tag -width Ds
.It Fl d
The
.Fl d
option specifies the directory in which
.Nm photurisd
looks for its startup files. The default is
.Pa /etc/photuris/ .
.El
.Pp
The options 
.Nm dst ,
.Nm port ,
.Nm options ,
.Nm tsrc ,
.Nm tdst ,
.Nm exchange_lifetime ,
.Nm spi_lifetime
and
.Nm user
are understood by the daemon.
The meanings are as follows:
.Bl -tag -width options -offset indent
.It dst
The destination IP address with which the exchange is to be established.
.It port
The port number of the destination
.Nm photuris
daemon.
.It options
The options to be used in the exchange. Possible values are
.Nm enc
and
.Nm auth .
.It tsrc
If both
.Nm tsrc
and
.Nm tdst
(see below) are specified, a tunnel (IP over IP) is setup.  The
.Nm tsrc
option is a network address with netmask used for matching the source
IP address of a packet.  When both the source and the destination
addresses match their respective options the packet will be routed into the
tunnel.
.It tdst
If both
.Nm tsrc
(see above) and
.Nm tdst
are specified, a tunnel (IP over IP) is setup.  The
.Nm tdst
option is a network address with netmask used for matching the destination
IP address of a packet.  When both the source and the destination
addresses match their respective options the packet will be routed into the
tunnel.
.It exchange_lifetime
Determines the lifetime of the exchange. After an exchange expires
no new SPIs are created, which means the transport or tunnel is torn down
as soon as the current SPI times out (see
.Nm spi_lifetime
below).  The default value is gotten from the
.Nm exchange_lifetime
parameter given in
.Pa photuris.conf .
If it is not given there the default is 1800 seconds.
.It spi_lifetime
Determines the lifetime of each created SPI in the exchange.
.It user
The user name for whom the keying shall be done. Preconfigured
secrets are taken from the users secret file.
.El
.Sh EXAMPLE
startkey dst=169.200.12.23 options=auth
.Sh FILES
.Bl -tag -width /etc/photuris/photuris.pipe -compact
.It /etc/photuris/photuris.pipe
The FIFO in which keying requests are written.
.El
.Sh SEE ALSO
.Xr photurisd 8 .
@


1.7
log
@more `` '' -> .Dq sillyness; remove redundant .Pp macros; other misc fixes
@
text
@d1 1
a1 1
.\" $OpenBSD: startkey.1,v 1.6 1998/05/14 10:46:23 niklas Exp $
@


1.6
log
@Explain exchange_lifetime a bit more
@
text
@d1 1
a1 1
.\" $OpenBSD: startkey.1,v 1.5 1998/05/13 12:29:36 niklas Exp $
a47 1
.Pp
@


1.5
log
@Clarify tunnel options
@
text
@d1 1
a1 1
.\" $OpenBSD: startkey.1,v 1.4 1998/03/05 09:30:56 provos Exp $
d107 8
a114 1
no new SPIs are created.
@


1.4
log
@correct reference to photurisd.
@
text
@d1 1
a1 1
.\" $OpenBSD: startkey.1,v 1.3 1997/07/24 23:47:21 provos Exp $
d64 1
a64 1
.Nm tdsr ,
d84 10
a93 2
The source address with netmask from which packets are accepted
for the tunnel to be created.
d95 10
a104 2
The destination address with netmask for which packets are
accepted for the tunnel being created.
@


1.3
log
@new symmetric identity choice. fix bug with expired exchange values on
multiple exchanges. a bit more documentation. drop -f flag and have -c
with opposite meaning instead. include responder offered schemes into
responder cookie calculation.
@
text
@d1 1
a1 1
.\" $OpenBSD: startkey.1,v 1.2 1997/07/23 12:28:57 provos Exp $
d46 1
a46 1
.Xr photurisd 1
d106 1
a106 1
.Xr photurisd 1 .
@


1.2
log
@tunnel,lifetimes,hostname via startkey/startup
errors to stderr before daemon, to syslog afterwards
@
text
@d1 1
a1 1
.\" $OpenBSD: startkey.1,v 1.1 1997/07/22 11:19:22 provos Exp $
d64 3
a66 1
.Nm tdsr
d89 5
@


1.1
log
@talk about grok
@
text
@d1 1
a1 1
.\" $OpenBSD: photurisd.1,v 1.3 1997/07/19 12:07:52 provos Exp $
d53 1
a53 1
option specifies the directory in wich
@

