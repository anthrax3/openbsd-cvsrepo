head	1.33;
access;
symbols
	OPENBSD_6_2:1.33.0.2
	OPENBSD_6_2_BASE:1.33
	OPENBSD_6_1:1.29.0.4
	OPENBSD_6_1_BASE:1.29
	OPENBSD_6_0:1.27.0.4
	OPENBSD_6_0_BASE:1.27
	OPENBSD_5_9:1.26.0.4
	OPENBSD_5_9_BASE:1.26
	OPENBSD_5_8:1.26.0.6
	OPENBSD_5_8_BASE:1.26
	OPENBSD_5_7:1.26.0.2
	OPENBSD_5_7_BASE:1.26
	OPENBSD_5_6:1.25.0.4
	OPENBSD_5_6_BASE:1.25
	OPENBSD_5_5:1.24.0.4
	OPENBSD_5_5_BASE:1.24
	OPENBSD_5_4:1.23.0.2
	OPENBSD_5_4_BASE:1.23
	OPENBSD_5_3:1.20.0.2
	OPENBSD_5_3_BASE:1.20
	OPENBSD_5_2:1.8.0.8
	OPENBSD_5_2_BASE:1.8
	OPENBSD_5_1_BASE:1.8
	OPENBSD_5_1:1.8.0.4
	OPENBSD_5_0:1.8.0.2
	OPENBSD_5_0_BASE:1.8
	OPENBSD_4_9:1.7.0.2
	OPENBSD_4_9_BASE:1.7
	OPENBSD_4_8:1.6.0.14
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.6.0.10
	OPENBSD_4_7_BASE:1.6
	OPENBSD_4_6:1.6.0.12
	OPENBSD_4_6_BASE:1.6
	OPENBSD_4_5:1.6.0.8
	OPENBSD_4_5_BASE:1.6
	OPENBSD_4_4:1.6.0.6
	OPENBSD_4_4_BASE:1.6
	OPENBSD_4_3:1.6.0.4
	OPENBSD_4_3_BASE:1.6
	OPENBSD_4_2:1.6.0.2
	OPENBSD_4_2_BASE:1.6
	OPENBSD_4_1:1.5.0.6
	OPENBSD_4_1_BASE:1.5
	OPENBSD_4_0:1.5.0.4
	OPENBSD_4_0_BASE:1.5
	OPENBSD_3_9:1.5.0.2
	OPENBSD_3_9_BASE:1.5
	OPENBSD_3_8:1.4.0.2
	OPENBSD_3_8_BASE:1.4
	OPENBSD_3_7:1.3.0.4
	OPENBSD_3_7_BASE:1.3
	OPENBSD_3_6:1.3.0.2
	OPENBSD_3_6_BASE:1.3
	OPENBSD_3_5:1.1.0.2
	OPENBSD_3_5_BASE:1.1;
locks; strict;
comment	@.\" @;


1.33
date	2017.09.22.14.04.13;	author krw;	state Exp;
branches;
next	1.32;
commitid	L2L2fVnHnhlyG1pz;

1.32
date	2017.07.17.15.05.03;	author krw;	state Exp;
branches;
next	1.31;
commitid	71kVBKSsGPwJWydJ;

1.31
date	2017.06.28.17.54.31;	author jmc;	state Exp;
branches;
next	1.30;
commitid	sy530A09MQuYLjmR;

1.30
date	2017.06.28.14.35.43;	author krw;	state Exp;
branches;
next	1.29;
commitid	3nygEKTzwCipdpn4;

1.29
date	2017.02.15.19.36.24;	author krw;	state Exp;
branches;
next	1.28;
commitid	qoet1rRM6Rzp1k4R;

1.28
date	2017.02.02.20.01.38;	author jmc;	state Exp;
branches;
next	1.27;
commitid	OkmbzvXtJYSzYsOy;

1.27
date	2016.05.03.07.47.26;	author natano;	state Exp;
branches;
next	1.26;
commitid	GaHdPfTlwWV99MZx;

1.26
date	2014.11.15.00.12.52;	author krw;	state Exp;
branches;
next	1.25;
commitid	kM0Hf8zKOzmkvwDF;

1.25
date	2014.04.20.21.25.07;	author krw;	state Exp;
branches;
next	1.24;

1.24
date	2013.08.22.19.15.41;	author jmc;	state Exp;
branches;
next	1.23;

1.23
date	2013.07.16.09.45.28;	author schwarze;	state Exp;
branches;
next	1.22;

1.22
date	2013.07.14.19.44.38;	author jmc;	state Exp;
branches;
next	1.21;

1.21
date	2013.07.11.15.15.46;	author jmc;	state Exp;
branches;
next	1.20;

1.20
date	2013.02.23.22.00.37;	author krw;	state Exp;
branches;
next	1.19;

1.19
date	2013.02.23.11.51.53;	author krw;	state Exp;
branches;
next	1.18;

1.18
date	2013.02.22.22.28.15;	author krw;	state Exp;
branches;
next	1.17;

1.17
date	2013.02.22.14.14.45;	author krw;	state Exp;
branches;
next	1.16;

1.16
date	2013.02.09.23.37.21;	author krw;	state Exp;
branches;
next	1.15;

1.15
date	2013.01.19.07.15.19;	author jmc;	state Exp;
branches;
next	1.14;

1.14
date	2013.01.18.21.19.46;	author jmc;	state Exp;
branches;
next	1.13;

1.13
date	2013.01.18.08.07.32;	author jmc;	state Exp;
branches;
next	1.12;

1.12
date	2013.01.18.05.50.32;	author krw;	state Exp;
branches;
next	1.11;

1.11
date	2012.12.09.20.28.03;	author krw;	state Exp;
branches;
next	1.10;

1.10
date	2012.11.08.21.19.34;	author krw;	state Exp;
branches;
next	1.9;

1.9
date	2012.10.30.18.39.44;	author krw;	state Exp;
branches;
next	1.8;

1.8
date	2011.03.02.07.44.42;	author jmc;	state Exp;
branches;
next	1.7;

1.7
date	2010.10.08.15.43.45;	author sobrado;	state Exp;
branches;
next	1.6;

1.6
date	2007.05.31.19.19.43;	author jmc;	state Exp;
branches;
next	1.5;

1.5
date	2005.09.30.20.34.23;	author jaredy;	state Exp;
branches;
next	1.4;

1.4
date	2005.06.27.17.18.12;	author jmc;	state Exp;
branches;
next	1.3;

1.3
date	2004.04.09.18.30.15;	author jmc;	state Exp;
branches;
next	1.2;

1.2
date	2004.04.07.20.53.09;	author henning;	state Exp;
branches;
next	1.1;

1.1
date	2004.01.18.01.26.20;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.33
log
@Remove the '-u' command line option to
ignore offers containing unknown DHCP
options. Broken in 2013 and nobody
noticed.

ok mpi@@
@
text
@.\" $OpenBSD: dhclient.8,v 1.32 2017/07/17 15:05:03 krw Exp $
.\"
.\" Copyright (c) 1997 The Internet Software Consortium.
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\"
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of The Internet Software Consortium nor the names
.\"    of its contributors may be used to endorse or promote products derived
.\"    from this software without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE INTERNET SOFTWARE CONSORTIUM AND
.\" CONTRIBUTORS ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES,
.\" INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
.\" MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
.\" DISCLAIMED.  IN NO EVENT SHALL THE INTERNET SOFTWARE CONSORTIUM OR
.\" CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
.\" SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
.\" LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
.\" USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
.\" ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
.\" OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
.\" OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\" This software has been written for the Internet Software Consortium
.\" by Ted Lemon <mellon@@fugue.com> in cooperation with Vixie
.\" Enterprises.  To learn more about the Internet Software Consortium,
.\" see ``http://www.isc.org/isc''.  To learn more about Vixie
.\" Enterprises, see ``http://www.vix.com''.
.Dd $Mdocdate: July 17 2017 $
.Dt DHCLIENT 8
.Os
.Sh NAME
.Nm dhclient
.Nd Dynamic Host Configuration Protocol (DHCP) client
.Sh SYNOPSIS
.Nm
.Op Fl d | q
.Op Fl c Ar file
.Op Fl i Ar options
.Op Fl L Ar file
.Op Fl l Ar file
.Ar interface
.Sh DESCRIPTION
The Dynamic Host Configuration Protocol (DHCP) allows hosts on a TCP/IP network
to configure one or more network interfaces based on information collected from
a DHCP server.
DHCP is often used, for example, by cable modem and DSL network
providers to automate network configuration for their customers.
.Pp
Information typically provided via DHCP includes
address and subnet mask for the interface,
default route,
and domain name server.
.Pp
To have
.Ox
configure an interface using DHCP
(or its predecessor, BOOTP)
the
.Nm
utility is used.
.Nm
is run on the command line with the name of the
.Ar interface
to be configured.
.Nm
can also be run at boot time from
.Xr hostname.if 5 ,
in which case
.Xr netstart 8
reads the hostname files and runs
.Nm
for each interface that is to be configured via DHCP.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl c Ar file
Specify an alternate location to
.Pa /etc/dhclient.conf
for the configuration file.
.It Fl d
Do not daemonize.
If this option is specified,
.Nm
will run in the foreground and log to
.Em stderr .
.It Fl i Ar options
.Nm
will ignore any values provided by leases for the options specified.
This list will override any ignore statements in
.Xr dhclient.conf 5 .
.Ar options
must be a comma separated list of valid option names.
Invalid option names will cause the entire list to be discarded.
.It Fl L Ar file
Specify a
.Ar file
to write the option data to.
This causes
.Nm
to write two pseudo-leases,
.Dq offered
and
.Dq effective ,
to the specified file.
.Dq offered
will be the lease offered by the DHCP server;
.Dq effective
will be the modified lease bound to the interface.
.It Fl l Ar file
Specify an alternate location to
.Pa /var/db/dhclient.leases. Ns Aq Ar IFNAME
for the leases file.
.It Fl q
Forces
.Nm
to be less verbose on startup.
.El
.Pp
The DHCP protocol allows a host to contact a central server which
maintains a list of IP addresses which may be assigned on one or more
subnets.
A DHCP client may request an address from this pool, and
then use it on a temporary basis for communication on the network.
The DHCP protocol also provides a mechanism whereby a client can learn
important details about the network to which it is attached, such as
the location of a default router, the location of a name server, and
so on.
.Pp
On startup,
.Nm
reads
.Pa /etc/dhclient.conf
for configuration instructions.
It then attempts to configure the network interface
.Ar interface
with DHCP.
The special value
.Dq egress
may be used instead of a network interface name.
In this case
.Nm
will look for the network interface currently in the interface group
.Dq egress
and configure it with DHCP.
If there is more than one network interface in the egress group
.Nm
will exit with an error.
.Pp
When configuring the interface,
.Nm
attempts to remove any existing addresses, gateway routes that use
the interface, and non-permanent
.Xr arp 8
entries.
.Nm
automatically exits whenever a new
.Nm
is run on the same interface.
.Pp
Once the interface is configured,
.Nm
constructs a
.Xr resolv.conf 5
file.
It does this only when one or both of the options
.Cm domain-name
and
.Cm domain-name-servers
are present
(note that these options may be offered by the DHCP server but suppressed by
.Xr dhclient.conf 5 ) .
If a resolv.conf is constructed,
.Nm
appends any contents of the
.Xr resolv.conf.tail 5
file, which are read once at start up.
The constructed resolv.conf is copied into
.Pa /etc/resolv.conf
whenever the default route goes out the interface
.Nm
is running on.
.Nm
monitors the system for changes to the default route and re-checks
whether it should write its resolv.conf when possible changes are
detected.
.Pp
In order to keep track of leases across system reboots and server
restarts,
.Nm
keeps a list of leases it has been assigned in the
.Pa /var/db/dhclient.leases. Ns Aq Ar IFNAME
file.
.Ar IFNAME
represents the network interface of the DHCP client
.Pq e.g. em0 ,
one for each interface.
On startup, after reading the
.Xr dhclient.conf 5
file,
.Nm
reads the leases file to refresh its memory about what leases it has been
assigned.
.Pp
Old leases are kept around in case the DHCP server is unavailable when
.Nm
is first invoked (generally during the initial system boot
process).
In that event, old leases from the
.Pa dhclient.leases. Ns Aq Ar IFNAME
file which have not yet expired are tested, and if they are determined to
be valid, they are used until either they expire or the DHCP server
becomes available.
.Pp
A mobile host which may sometimes need to access a network on which no
DHCP server exists may be preloaded with a lease for a fixed
address on that network.
When all attempts to contact a DHCP server have failed,
.Nm
will try to validate the static lease, and if it
succeeds, it will use that lease until it is restarted.
.Pp
A mobile host may also travel to some networks on which DHCP is not
available but BOOTP is.
In that case, it may be advantageous to
arrange with the network administrator for an entry on the BOOTP
database, so that the host can boot quickly on that network rather
than cycling through the list of old leases.
.Sh SIGNALS
.Bl -tag -width "HUP"
.It Dv HUP
On receiving
.Dv HUP
.Nm
will restart itself, reading
.Xr dhclient.conf 5
and obtaining a new lease.
.El
.Sh FILES
.Bl -tag -width "/var/db/dhclient.leases.<IFNAME>XXX" -compact
.It Pa /etc/dhclient.conf
DHCP client configuration file
.It Pa /etc/hostname.XXX
interface-specific configuration files
.It Pa /var/db/dhclient.leases. Ns Aq Ar IFNAME
database of acquired leases
.El
.Sh SEE ALSO
.Xr dhclient.conf 5 ,
.Xr dhclient.leases 5 ,
.Xr hostname.if 5 ,
.Xr dhcpd 8 ,
.Xr dhcrelay 8
.Sh STANDARDS
.Rs
.%A R. Droms
.%D October 1993
.%R RFC 1534
.%T Interoperation Between DHCP and BOOTP
.Re
.Pp
.Rs
.%A R. Droms
.%D March 1997
.%R RFC 2131
.%T Dynamic Host Configuration Protocol
.Re
.Pp
.Rs
.%A S. Alexander
.%A R. Droms
.%D March 1997
.%R RFC 2132
.%T DHCP Options and BOOTP Vendor Extensions
.Re
.Pp
.Rs
.%A T. Lemon
.%A S. Cheshire
.%D November 2002
.%R RFC 3396
.%T Encoding Long Options in the Dynamic Host Configuration Protocol (DHCPv4)
.Re
.Pp
.Rs
.%A T. Lemon
.%A S. Cheshire
.%A B. Volz
.%D December 2002
.%R RFC 3442
.%T The Classless Static Route Option for Dynamic Host Configuration Protocol (DHCP) version 4
.Re
.Sh AUTHORS
.An -nosplit
.Nm
was written by
.An Ted Lemon Aq Mt mellon@@fugue.com
and
.An Elliot Poger Aq Mt elliot@@poger.com .
.Pp
The current implementation was reworked by
.An Henning Brauer Aq Mt henning@@openbsd.org .
@


1.32
log
@Remove some magic formerly used to detect the presence of another
dhclient taking control of the interface.

In particular do not exit when addresses are manually added to or
deleted from the interface dhclient(8) is concerned about. Note that
such changes will still be removed whenever dhclient(8) is re-started
or gets a different lease during renewal.
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.31 2017/06/28 17:54:31 jmc Exp $
d38 1
a38 1
.Dd $Mdocdate: June 28 2017 $
a46 1
.Op Fl u
a126 5
.It Fl u
Forces
.Nm
to reject leases with unknown options in them.
The default behaviour is to accept such lease offers.
@


1.31
log
@reinstate .El removed in previous;
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.30 2017/06/28 14:35:43 krw Exp $
a170 2
Conversely, if the interface is later manipulated to add or delete
addresses then
d172 1
a172 2
will automatically exit.
It thus automatically exits whenever a new
@


1.30
log
@Stop trying to clean up addresses, routes and "-L" file
whenever dhclient dies. Eliminates differences in handling
and thus need to intercept signals INT, TERM, USR1,
USR2. Eliminates need for 'zapzombies' field and thus
entire struct imsg_flushroutes. Eliminates need for 'imsg'
parameter to and associated logic in priv_flush_routes().

Address, routes and '-L' file are still cleaned out when
binding a lease.
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.29 2017/02/15 19:36:24 krw Exp $
d38 1
a38 1
.Dd $Mdocdate: February 15 2017 $
d256 1
@


1.29
log
@Adopt the common verbiage other log.[ch] daemons use to describe '-d'.

Point out that dhcpd(8) -f is an alias for -d.
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.28 2017/02/02 20:01:38 jmc Exp $
d38 1
a38 1
.Dd $Mdocdate: February 2 2017 $
a119 3
.Ar file
will be truncated when a lease is no longer bound to the interface or the
link goes down.
d248 1
a248 4
While running,
.Nm
reacts to a few different signals:
.Bl -tag -width "USR1, USR2XXX"
a255 27
.It Dv INT
On receiving
.Dv INT
.Nm
will exit after attempting to remove any routes, interface addresses
or temporary files it created.
.It Dv QUIT
On receiving
.Dv QUIT
.Nm
will dump core and exit without attempting to remove any routes, interface
addresses or temporary files it created.
.It Dv TERM
On receiving
.Dv TERM
.Nm
will exit without attempting to remove any routes, interface addresses
or temporary files it created.
.It Dv USR1, USR2
On receiving either
.Dv USR1
or
.Dv USR2 ,
.Nm
will exit after attempting to remove any routes, interface addresses
or temporary files it created.
.El
@


1.28
log
@grammar fix; from tinker
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.27 2016/05/03 07:47:26 natano Exp $
d38 1
a38 1
.Dd $Mdocdate: May 3 2016 $
d92 2
a93 1
Forces
d95 2
a96 5
to always run as a foreground process.
By default,
.Nm
runs in the foreground until it has configured the interface, and then
will revert to running in the background.
@


1.27
log
@Move to /dev/bpf; ok tb jmc
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.26 2014/11/15 00:12:52 krw Exp $
d38 1
a38 1
.Dd $Mdocdate: November 15 2014 $
d193 1
a193 1
is present
@


1.26
log
@Make -q (quiet) and -d (don't daemonize) options mutually exclusive.
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.25 2014/04/20 21:25:07 krw Exp $
d38 1
a38 1
.Dd $Mdocdate: April 20 2014 $
a251 8
.Pp
.Nm
requires at least one
.Pa /dev/bpf*
file for each broadcast network interface.
See
.Xr bpf 4
for more information.
a300 1
.Xr bpf 4 ,
@


1.25
log
@Make -L even more useful to monitoring processes. Truncate and
refill the file rather than creating a new one, which preserves
an fd being monitored. And truncate file on losing link.

Things like sysutils/ertn should now be able to see new leases, lease
renewals and cable unplugs.

tweaks by and ok sthen@@
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.24 2013/08/22 19:15:41 jmc Exp $
d38 1
a38 1
.Dd $Mdocdate: August 22 2013 $
d46 2
a47 1
.Op Fl dqu
@


1.24
log
@this full stop has lost its way...
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.23 2013/07/16 09:45:28 schwarze Exp $
d38 1
a38 1
.Dd $Mdocdate: July 16 2013 $
d117 7
a123 3
The offered block will contain the lease offered by the DHCP server;
the effective block will contain the modified lease used to configure the
interface.
@


1.23
log
@Add missing .Mt macros for AUTHORS email addresses.
From Jan Stary <hans at stare dot cz>.
ok jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.22 2013/07/14 19:44:38 jmc Exp $
d38 1
a38 1
.Dd $Mdocdate: July 14 2013 $
d188 1
a188 1
is present.
@


1.22
log
@merge the relevant bits of dhcp(8) into dhclient(8) and dhcpd(8),
removing traces of dhcp(8)... i'm about to remove that file, since
it's essentially useless. holding off for a little, in case my commit
is greeted with howls.

help/ok krw
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.21 2013/07/11 15:15:46 jmc Exp $
d38 1
a38 1
.Dd $Mdocdate: July 11 2013 $
d353 1
a353 1
.An Ted Lemon Aq mellon@@fugue.com
d355 1
a355 1
.An Elliot Poger Aq elliot@@poger.com .
d358 1
a358 1
.An Henning Brauer Aq henning@@openbsd.org .
@


1.21
log
@update (or add) STANDARDS;
help/ok krw
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.20 2013/02/23 22:00:37 krw Exp $
d38 1
a38 1
.Dd $Mdocdate: February 23 2013 $
d53 16
a68 1
The
d70 11
a80 4
utility provides a means for configuring network interfaces using DHCP, BOOTP,
or if these protocols fail, by statically assigning an address.
.Pp
The name of the network interface that
d82 1
a82 2
should attempt to
configure must be specified on the command line.
d298 2
d307 1
a307 1
.Xr dhcp 8 ,
@


1.20
log
@'contructed' -> 'constructed'. Spotted by zinke@@.
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.19 2013/02/23 11:51:53 krw Exp $
d287 39
@


1.19
log
@Attempt a short explanation of the resolv.conf dance. A few other
verbiage adjustments.

Fixes from & ok jmc@@.
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.18 2013/02/22 22:28:15 krw Exp $
d38 1
a38 1
.Dd $Mdocdate: February 22 2013 $
d170 1
a170 1
If a resolv.conf is contructed,
@


1.18
log
@Attempt a short explanation of what happens on start up and when
external configuration occurs on a interface with an associated
dhclient. Also add INT to SIGNALS section and alphabetize the
list of signals.

Tweaks from & ok jmc@@.
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.17 2013/02/22 14:14:45 krw Exp $
d133 1
a133 1
.Sq egress
d138 1
a138 1
.Sq egress
d140 1
a140 3
If there is more than one network interface in the
.Sq egress
group
d147 1
a147 1
the interface and non-permanent
d158 27
d238 1
a238 1
.Bl -tag -width "USR[12]XXX"
d264 1
a264 1
.It Dv USR[12]
@


1.17
log
@Document signals dhclient currently pays attention to.

Much help from jmc@@, positive feedback from sthen@@
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.16 2013/02/09 23:37:21 krw Exp $
d38 1
a38 1
.Dd $Mdocdate: February 9 2013 $
d146 14
d221 3
a223 5
.It Dv USR[12]
On receiving either
.Dv USR1
or
.Dv USR2 ,
d227 6
d239 5
a243 3
.It Dv QUIT
On receiving
.Dv QUIT
d245 2
a246 2
will dump core and exit without attempting to remove any routes, interface
addresses or temporary files it created.
@


1.16
log
@As tedu@@ pointed out a while ago, it makes little sense to discard
an option list if it contains duplicate option names. Just ignore
the duplicates.
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.15 2013/01/19 07:15:19 jmc Exp $
d38 1
a38 1
.Dd $Mdocdate: January 19 2013 $
d195 33
@


1.15
log
@be more explicit about default file locations; ok krw
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.14 2013/01/18 21:19:46 jmc Exp $
d38 1
a38 1
.Dd $Mdocdate: January 18 2013 $
d84 1
a84 2
Invalid or duplicated option names will cause the entire list to
be discarded.
@


1.14
log
@tweak -L; ok krw
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.13 2013/01/18 08:07:32 jmc Exp $
d66 2
a67 2
Specify an alternate location,
.Ar file ,
d87 3
a89 3
Specify a location,
.Ar file ,
for the option data file.
d101 2
a102 2
Specify an alternate location,
.Ar file ,
d151 1
a151 1
.Pa /var/db/dhclient.leases.IFNAME
d153 1
a153 1
.Qq IFNAME
d169 1
a169 1
.Pa dhclient.leases.IFNAME
d197 1
a197 1
.Bl -tag -width /var/db/dhclient.leases.IFNAME~ -compact
d200 1
a200 1
.It Pa /var/db/dhclient.leases.IFNAME
@


1.13
log
@-L before -l;
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.12 2013/01/18 05:50:32 krw Exp $
d92 7
a98 4
to write two pseudo-leases, offered {} and effective {} to the
specified file.
offered {} will contain the lease offered by the DHCP server.
effective {} will contain the modified lease used to configure the
@


1.12
log
@Add command line option '-L' that specifies an optional file into which
the most recent offer and effective leases will be written. Intended
to allow access to dhcp option information that was formerly
passed to dhclient-script.
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.11 2012/12/09 20:28:03 krw Exp $
d38 1
a38 1
.Dd $Mdocdate: December 9 2012 $
d49 1
a50 1
.Op Fl L Ar file
d64 1
a64 1
.Bl -tag -width "-p port"
a85 4
.It Fl l Ar file
Specify an alternate location,
.Ar file ,
for the leases file.
d97 4
@


1.11
log
@Add a new option to the dhclient command line interface. '-i' takes
a list of option names, and any values provided for those options
in leases will be ignored.

Requested by phessler@@ and djm@@. Tested by phessler@@. Possible
non-optimality of ignoring list in case of error pointed out by
tedu@@.

ok phessler@@ todd@@ beck@@
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.10 2012/11/08 21:19:34 krw Exp $
d38 1
a38 1
.Dd $Mdocdate: November 8 2012 $
d50 1
d90 11
@


1.10
log
@Remove lie about dhclient configuring all interfaces. Mention
'egress' as a special interface name.
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.9 2012/10/30 18:39:44 krw Exp $
d38 1
a38 1
.Dd $Mdocdate: October 30 2012 $
d48 1
d76 9
@


1.9
log
@Nuke dhclient-script and dhclient.conf 'script' directive. Do all
interface and route configuration via ioctl's and routing sockets.

This will break configurations using local enhancements of
dhclient-script, which will now require alternate arrangements.

Committing early to allow time to identify and develop required
alternatives.

Several proddings by deraadt@@.
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.8 2011/03/02 07:44:42 jmc Exp $
d38 1
a38 1
.Dd $Mdocdate: March 2 2011 $
d105 16
a120 3
It then gets a list of all the
network interfaces that are configured in the current system.
It then attempts to configure each interface with DHCP.
@


1.8
log
@no need for a separate NOTES section; ok henning
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.7 2010/10/08 15:43:45 sobrado Exp $
d38 1
a38 1
.Dd $Mdocdate: October 8 2010 $
a168 1
.Xr dhclient-script 8 ,
@


1.7
log
@use the right capitalization in the Nd strings.

ok jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.6 2007/05/31 19:19:43 jmc Exp $
d38 1
a38 1
.Dd $Mdocdate: May 31 2007 $
d150 1
a150 2
.Sh NOTES
You must have the Berkeley Packet Filter (BPF) configured in your kernel.
d154 1
a154 1
file for each broadcast network interface that is attached to your system.
@


1.6
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.5 2005/09/30 20:34:23 jaredy Exp $
d38 1
a38 1
.Dd $Mdocdate$
d43 1
a43 1
.Nd Dynamic Host Configuration Protocol (DHCP) Client
@


1.5
log
@deploy .An -nosplit; ok jmc
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.4 2005/06/27 17:18:12 jmc Exp $
d38 1
a38 1
.Dd April 7, 2004
@


1.4
log
@reference bpf(4); from alexey e. suslikov;
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.3 2004/04/09 18:30:15 jmc Exp $
d175 1
@


1.3
log
@remove some excess from AUTHORS, and slight update;

requested by henning, and discussed w/ him and deraadt;
ok henning@@
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.2 2004/04/07 20:53:09 henning Exp $
d167 1
@


1.2
log
@reflect reality. with lots of help from jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.1 2004/01/18 01:26:20 deraadt Exp $
d175 7
a181 25
has been written for the Internet Software Consortium
by Ted Lemon <mellon@@fugue.com> in cooperation with Vixie
Enterprises.
To learn more about the Internet Software Consortium, see
.Pp
.Dl http://www.vix.com/isc.
.Pp
To learn more about Vixie Enterprises, see
.Pp
.Dl http://www.vix.com.
.Pp
This client was substantially modified and enhanced by Elliot Poger
for use on Linux while he was working on the MosquitoNet project at
Stanford.
.Pp
The current version owes much to Elliot's Linux enhancements, but
was substantially reorganized and partially rewritten by Ted Lemon
so as to use the same networking framework that the Internet Software
Consortium DHCP server uses.
Much system-specific configuration code
was moved into a shell script so that as support for more operating
systems is added, it will not be necessary to port and maintain
system-specific configuration code to these operating systems \- instead,
the shell script can invoke the native tools to accomplish the same
purpose.
@


1.1
log
@this is where dhclient will start surgery
@
text
@d1 1
a1 1
.\" $OpenBSD: dhclient.8,v 1.16 2003/12/22 15:58:30 jmc Exp $
d38 1
a38 1
.Dd October 1, 1999
d46 4
a49 3
.Op Fl 1dqu
.Op Fl p Ar port
.Op Ar interface ...
d56 1
a56 1
The names of the network interfaces that
d59 1
a59 6
configure may be specified on the command line.
If no interface names are given,
.Nm
will identify all network
interfaces, eliminating non-broadcast interfaces if possible, and
attempt to configure each one.
d63 4
a66 4
.It Fl 1
Forces
.Nm
to exit if it failed to configure an interface.
d73 1
a73 1
runs in the foreground until it has configured an interface, and then
d75 4
a78 5
.It Fl p Ar port
Specifies the UDP
.Ar port
.Nm
should listen on, instead of the default (68).
d113 1
a113 1
.Pa /var/db/dhclient.leases
d115 4
d120 1
a120 1
.Pa dhclient.conf
a125 13
When a new lease is acquired, it is appended to the end of
.Pa /var/db/dhclient.leases .
In order to prevent the file from becoming arbitrarily large, from time to time
.Nm
creates a new
.Pa dhclient.leases
file from its in-core lease database.
The old version of the file is retained under the name
.Pa /var/db/dhclient.leases~
until the next time
.Nm
rewrites the database.
.Pp
d131 1
a131 1
.Pa dhclient.leases
d160 1
a160 1
.Bl -tag -width /var/db/dhclient.leases~ -compact
d163 1
a163 1
.It Pa /var/db/dhclient.leases
a164 5
.It Pa /var/db/dhclient.leases~
backup of dhclient.leases
.It Pa /var/run/dhclient.pid
process ID of
.Nm
d197 1
a197 1
system-specific configuration code to these operating systems - instead,
@

