head	1.46;
access;
symbols
	OPENBSD_6_1:1.46.0.12
	OPENBSD_6_1_BASE:1.46
	OPENBSD_6_0:1.46.0.8
	OPENBSD_6_0_BASE:1.46
	OPENBSD_5_9:1.46.0.4
	OPENBSD_5_9_BASE:1.46
	OPENBSD_5_8:1.46.0.6
	OPENBSD_5_8_BASE:1.46
	OPENBSD_5_7:1.46.0.2
	OPENBSD_5_7_BASE:1.46
	OPENBSD_5_6:1.43.0.10
	OPENBSD_5_6_BASE:1.43
	OPENBSD_5_5:1.43.0.8
	OPENBSD_5_5_BASE:1.43
	OPENBSD_5_4:1.43.0.4
	OPENBSD_5_4_BASE:1.43
	OPENBSD_5_3:1.43.0.2
	OPENBSD_5_3_BASE:1.43
	OPENBSD_5_2:1.42.0.12
	OPENBSD_5_2_BASE:1.42
	OPENBSD_5_1_BASE:1.42
	OPENBSD_5_1:1.42.0.10
	OPENBSD_5_0:1.42.0.8
	OPENBSD_5_0_BASE:1.42
	OPENBSD_4_9:1.42.0.6
	OPENBSD_4_9_BASE:1.42
	OPENBSD_4_8:1.42.0.4
	OPENBSD_4_8_BASE:1.42
	OPENBSD_4_7:1.42.0.2
	OPENBSD_4_7_BASE:1.42
	OPENBSD_4_6:1.41.0.6
	OPENBSD_4_6_BASE:1.41
	OPENBSD_4_5:1.41.0.2
	OPENBSD_4_5_BASE:1.41
	OPENBSD_4_4:1.39.0.2
	OPENBSD_4_4_BASE:1.39
	OPENBSD_4_3:1.37.0.4
	OPENBSD_4_3_BASE:1.37
	OPENBSD_4_2:1.37.0.2
	OPENBSD_4_2_BASE:1.37
	OPENBSD_4_1:1.36.0.2
	OPENBSD_4_1_BASE:1.36
	OPENBSD_4_0:1.28.0.6
	OPENBSD_4_0_BASE:1.28
	OPENBSD_3_9:1.28.0.4
	OPENBSD_3_9_BASE:1.28
	OPENBSD_3_8:1.28.0.2
	OPENBSD_3_8_BASE:1.28
	OPENBSD_3_7:1.27.0.6
	OPENBSD_3_7_BASE:1.27
	OPENBSD_3_6:1.27.0.4
	OPENBSD_3_6_BASE:1.27
	OPENBSD_3_5:1.27.0.2
	OPENBSD_3_5_BASE:1.27
	OPENBSD_3_4:1.24.0.2
	OPENBSD_3_4_BASE:1.24
	OPENBSD_3_3:1.23.0.2
	OPENBSD_3_3_BASE:1.23
	OPENBSD_3_2:1.17.0.2
	OPENBSD_3_2_BASE:1.17
	OPENBSD_3_1:1.12.0.2
	OPENBSD_3_1_BASE:1.12
	OPENBSD_3_0:1.9.0.2
	OPENBSD_3_0_BASE:1.9
	OPENBSD_2_9:1.6.0.2
	OPENBSD_2_9_BASE:1.6
	OPENBSD_2_8:1.4.0.4
	OPENBSD_2_8_BASE:1.4
	OPENBSD_2_7:1.4.0.2
	OPENBSD_2_7_BASE:1.4
	OPENBSD_2_6:1.1.0.2
	OPENBSD_2_6_BASE:1.1;
locks; strict;
comment	@.\" @;


1.46
date	2015.02.28.21.51.57;	author bentley;	state Exp;
branches;
next	1.45;
commitid	NNu2UZnsd5zmNVYD;

1.45
date	2014.11.15.14.41.03;	author bentley;	state Exp;
branches;
next	1.44;
commitid	HuCemPIiOkto0SJD;

1.44
date	2014.09.08.01.27.55;	author schwarze;	state Exp;
branches;
next	1.43;
commitid	cPoapLAXYNe1fcgV;

1.43
date	2012.12.10.21.35.52;	author jmc;	state Exp;
branches;
next	1.42;

1.42
date	2010.01.03.16.43.45;	author schwarze;	state Exp;
branches;
next	1.41;

1.41
date	2008.09.24.06.43.45;	author jmc;	state Exp;
branches;
next	1.40;

1.40
date	2008.08.10.17.40.10;	author sobrado;	state Exp;
branches;
next	1.39;

1.39
date	2008.06.26.05.42.06;	author ray;	state Exp;
branches;
next	1.38;

1.38
date	2008.06.03.19.51.02;	author jmc;	state Exp;
branches;
next	1.37;

1.37
date	2007.05.31.19.19.43;	author jmc;	state Exp;
branches;
next	1.36;

1.36
date	2006.10.04.14.19.32;	author jmc;	state Exp;
branches;
next	1.35;

1.35
date	2006.10.04.14.15.18;	author jmc;	state Exp;
branches;
next	1.34;

1.34
date	2006.10.03.19.05.10;	author jmc;	state Exp;
branches;
next	1.33;

1.33
date	2006.10.03.14.36.29;	author jmc;	state Exp;
branches;
next	1.32;

1.32
date	2006.10.03.14.19.34;	author jmc;	state Exp;
branches;
next	1.31;

1.31
date	2006.10.02.19.47.12;	author jmc;	state Exp;
branches;
next	1.30;

1.30
date	2006.10.02.19.38.51;	author jmc;	state Exp;
branches;
next	1.29;

1.29
date	2006.10.02.19.30.19;	author jmc;	state Exp;
branches;
next	1.28;

1.28
date	2005.03.28.18.52.38;	author kurt;	state Exp;
branches;
next	1.27;

1.27
date	2004.03.18.16.03.51;	author jmc;	state Exp;
branches;
next	1.26;

1.26
date	2004.02.02.08.30.26;	author grange;	state Exp;
branches;
next	1.25;

1.25
date	2004.01.13.22.44.58;	author grange;	state Exp;
branches;
next	1.24;

1.24
date	2003.06.03.13.16.07;	author jmc;	state Exp;
branches;
next	1.23;

1.23
date	2003.03.12.20.12.36;	author deraadt;	state Exp;
branches;
next	1.22;

1.22
date	2003.01.29.16.53.37;	author jmc;	state Exp;
branches;
next	1.21;

1.21
date	2003.01.14.23.53.25;	author avsm;	state Exp;
branches;
next	1.20;

1.20
date	2002.12.19.01.42.02;	author grange;	state Exp;
branches;
next	1.19;

1.19
date	2002.12.19.01.14.45;	author deraadt;	state Exp;
branches;
next	1.18;

1.18
date	2002.11.14.02.57.27;	author deraadt;	state Exp;
branches;
next	1.17;

1.17
date	2002.08.04.14.11.41;	author gluk;	state Exp;
branches;
next	1.16;

1.16
date	2002.07.06.14.46.57;	author gluk;	state Exp;
branches;
next	1.15;

1.15
date	2002.06.09.08.13.05;	author todd;	state Exp;
branches;
next	1.14;

1.14
date	2002.06.08.12.50.42;	author gluk;	state Exp;
branches;
next	1.13;

1.13
date	2002.04.30.04.25.28;	author fgsch;	state Exp;
branches;
next	1.12;

1.12
date	2002.02.11.18.43.51;	author mpech;	state Exp;
branches;
next	1.11;

1.11
date	2001.12.21.11.41.50;	author mpech;	state Exp;
branches;
next	1.10;

1.10
date	2001.12.13.20.16.48;	author mpech;	state Exp;
branches;
next	1.9;

1.9
date	2001.09.03.21.24.07;	author deraadt;	state Exp;
branches;
next	1.8;

1.8
date	2001.08.02.18.37.34;	author mpech;	state Exp;
branches;
next	1.7;

1.7
date	2001.07.20.18.07.11;	author mpech;	state Exp;
branches;
next	1.6;

1.6
date	2001.04.23.15.30.26;	author aaron;	state Exp;
branches;
next	1.5;

1.5
date	2001.03.23.02.16.42;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	2000.04.12.16.50.52;	author aaron;	state Exp;
branches;
next	1.3;

1.3
date	2000.03.18.22.55.53;	author aaron;	state Exp;
branches;
next	1.2;

1.2
date	2000.02.02.02.52.05;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	99.09.21.04.58.14;	author csapuntz;	state Exp;
branches;
next	;


desc
@@


1.46
log
@Reduce usage of predefined strings in manpages.

Predefined strings are not very portable across troff implementations,
and they make the source much harder to read. Usually the intended
character can be written directly.

No output changes, except for two instances where the incorrect escape
was used in the first place.

tweaks + ok schwarze@@
@
text
@.\"	$OpenBSD: atactl.8,v 1.45 2014/11/15 14:41:03 bentley Exp $
.\"	$NetBSD: atactl.8,v 1.5 1999/02/24 18:49:14 jwise Exp $
.\"
.\" Copyright (c) 1998 The NetBSD Foundation, Inc.
.\" All rights reserved.
.\"
.\" This code is derived from software contributed to The NetBSD Foundation
.\" by Ken Hornstein.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE NETBSD FOUNDATION, INC. AND CONTRIBUTORS
.\" ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
.\" TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
.\" PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE FOUNDATION OR CONTRIBUTORS
.\" BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
.\" CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
.\" SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
.\" INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
.\" CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
.\" ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
.\" POSSIBILITY OF SUCH DAMAGE.
.\"
.Dd $Mdocdate: November 15 2014 $
.Dt ATACTL 8
.Os
.Sh NAME
.Nm atactl
.Nd a program to manipulate ATA (IDE) devices
.Sh SYNOPSIS
.Nm atactl
.Ar device
.Op Ar command Op Ar arg ...
.Sh DESCRIPTION
.Nm
allows a user or system administrator to issue commands to and otherwise
control devices which reside on standard IDE and ATA controllers.
It is used by specifying
a device to manipulate, a command to perform, and any arguments
the command may require.
.Pp
.Nm
supports the following commands:
acousticdisable,
acousticset,
apmdisable,
apmset,
checkpower,
dump,
identify (the default),
idle,
poddisable,
podenable,
puisdisable,
puisenable,
puisspinup,
readaheaddisable,
readaheadenable,
readattr,
secdisablepass,
secerase,
secfreeze,
secsetpass,
secunlock,
setidle,
setstandby,
sleep,
smartautosave,
smartdisable,
smartenable,
smartoffline,
smartread,
smartreadlog,
smartstatus,
standby,
writecachedisable,
and
writecacheenable.
.Pp
Support for
Self-Monitoring, Analysis, and Reporting Technology (SMART) functionality
is indicated by the device with
.Sq SMART feature set
in the output of the
.Li identify
command.
SMART commands and the
.Li readattr
command are for experts only.
.Pp
Support for
Security Mode functionality
is indicated by the device with
.Sq Security Mode feature set
in the output of the
.Li identify
command.
.Em Be very careful
while playing with these commands:
loss of the user and master passwords for the device will result
in an inaccessible device.
.Pp
A full description of the commands follows:
.Pp
.Bl -tag -width xxxxxxx -compact
.It Li acousticdisable
Disables support for automatic acoustic management on the specified device.
Note that devices supporting automatic acoustic management may refuse to
disable it, resulting in an
.Sq ATA device returned Aborted Command
warning.
.Pp
.It Li acousticset Ar acoustic-management-level
Enables and sets the automatic acoustic management level to the requested
level on the specified device (if supported).
Device performance may
increase with increasing automatic acoustic management levels at the cost of
potentially generating more noise and requiring more power.
Valid values are 0 up to and including 126.
Support for automatic acoustic management is indicated by the device with
.Sq Automatic Acoustic Management feature set
in the output of the
.Li identify
command.
.Pp
.It Li apmdisable
Disables support for advanced power management on the specified device.
Note that devices supporting advanced power management may refuse to
disable it, resulting in an
.Sq ATA device returned Aborted Command
warning.
.Pp
.It Li apmset Ar power-management-level
Enables and sets the advanced power management level to the requested
level on the specified device (if supported).
Device performance may
increase with increasing power management levels at the cost of
potentially requiring more power.
Values up to and including 126 allow
the device to go into standby mode and spin-down the disk.
This
.Em may cause disk time-outs
and is therefore
.Em not
recommended.
These values are more suitable optimization for low power
usage on infrequently used devices.
Values 127 up to and including 253 do not allow the device to go to
standby mode and are more suitable for optimization for performance.
Support for advanced power management is indicated by the device with
.Sq Advanced Power Management feature set
in the output of the
.Li identify
command.
.Pp
.It Li checkpower
Will print out if the device is in Active, Idle, or Standby power
management mode.
.Pp
.It Li dump
Extracts the records about issued ATA commands from the log buffer.
The log buffer is cleared after extraction.
.Pp
.It Li identify
Identify the specified device, displaying the device's vendor, product,
revision strings, supported capabilities and enabled capabilities.
This command is the default.
.Pp
.It Li idle
Place the specified device into Idle mode.
This mode may consume less power than Active mode.
.Pp
.It Li poddisable
Disallows the specified device to revert to power-on default (pod) settings
after a software reset.
In other words this permits the settings that have been modified since
power-on to remain after a software reset.
.Pp
.It Li podenable
Allows the specified device to revert to power-on default (pod) settings
after a software reset.
.Pp
.It Li puisdisable
Disables power-up in standby (puis) on the specified device, causing the
device to spin up the disks after power-up.
This should be the factory
default setting of the device and it is recommended to leave this
setting disabled.
.Pp
.It Li puisenable
Enables power-up in standby (puis) on the specified device, causing the
device to wait while spinning up the disks after power-up.
This may cause problems at boot if the device is too slow in spin-up.
This option is therefore
.Em not recommended
unless the implications are understood.
Note that the power-up in standby mode stays enabled over power-downs,
hardware and software resets.
Support for power-up in standby is indicated by the device with
.Sq Power-up in standby feature set
in the output of the
.Li identify
command.
.Pp
.It Li puisspinup
Explicitly spins up the device if power-up in standby (puis) mode
is enabled.
.Pp
.It Li readaheaddisable
Disables read look-ahead on the specified device.
This may decrease performance.
Note that the device may use
.Sq vendor specific
behaviour in implementing this, so it is
.Em not
recommended to issue this command on a disk containing any currently
mounted filesystems.
.Pp
.It Li readaheadenable
Enables read look-ahead on the specified device.
This may increase performance.
Support for and status of read look-ahead is indicated by
the device with
.Sq read look-ahead
in the output of the
.Li identify
command.
.Pp
.It Li readattr
Displays attribute thresholds and values for the specified device.
Besides attribute values, device vendors may provide additional information
shown in the last column,
.Dq Raw .
Attributes names can be completely wrong since they vary between vendors and
even models, so don't rely on it.
SMART must be enabled while executing this command or the device will return
an error.
.Pp
.It Li secdisablepass Ar user | master
Disables the lock mode for the specified device with user or master password.
This command won't change the master password.
The master password will be reactivated when a user password is set.
.Pp
.It Li secerase Ar user | master Oo
.Ar enhanced
.Oc
Erases all user data and unlocks the specified device.
Execution of this command with the master password is the only way to unlock a
device locked at maximum security level with the
.Li secsetpass
command if the user's password is lost or unknown.
There are two erase modes: normal and enhanced.
Default erase mode is normal.
In the normal erase mode this command will write binary zeroes to
all user data areas.
The enhanced erase mode is optional and may not be supported by the device.
When enhanced erase mode is specified, the device will write predetermined
data patterns to all user data areas.
In enhanced erase mode, all previously written user data will be overwritten,
including sectors that are no longer in use due to reallocation.
This command will disable the device lock mode, however, the master password
will still be stored internally within the device and may be reactivated later
when a new user password is set.
.Pp
.It Li secfreeze
Prevents changes to passwords until a following power cycle.
The purpose of this command is to prevent password setting attacks on the
security system.
After command completion any other commands that update the device lock mode
will be aborted.
.Pp
.It Li secsetpass Ar user Ar high | maximum
.It Li secsetpass Ar master
Sets password and security level for the specified device.
There are two passwords, user and master, and two security levels, high and
maximum.
The maximum password length is 32 symbols.
The security system is enabled by sending a user password to the device with
this command.
When the security system is enabled, access to user data on the device is
denied after a power cycle until the user password is sent to the device with
the
.Li secunlock
command.
A master password may be set in addition to the user password.
The purpose of the master password is to allow an administrator to establish
a password that is kept secret from the user, and which may be used to unlock
the device if the user password is lost.
Setting the master password does not enable security system.
Each master password change decrements the master password revision
code value which is displayed in the
.Li identify
command output if supported.
After value 0x0001 is reached the next value will be 0xfffe.
The security level determines device behavior when the master password is used
to unlock the device.
When the security level is set to high the device requires the
.Li secunlock
command if the master password is used to unlock.
When the security level is set to maximum the device requires a
.Li secerase
command if the master password is used to unlock it.
Execution of the
.Li secerase
command erases all user data on the device.
.Pp
.It Li secunlock Ar user | master
Unlocks the specified device with user or master password.
The device will always unlock if a valid user password is received.
If the security level was set to high during the last
.Li secsetpass
command, the device will unlock if the master password is received.
If the security level was set to maximum during the last
.Li secsetpass
command, the device won't unlock even if the master password is received.
.Pp
.It Li setidle Ar idle-timer
Places the specified device into Idle mode, and sets the Idle timer to
.Ar idle-timer
seconds.
A value of 0 will disable the Idle timer.
.Pp
.It Li setstandby Ar standby-timer
Places the specified device into Standby mode, and sets the Standby timer
to
.Ar standby-timer
seconds.
A value of 0 will disable the Standby timer.
.Pp
.It Li sleep
Place the specified device into Sleep mode.
This mode will consume less power than Standby mode,
but requires a device reset to resume operation.
Typically the
.Xr wd 4
driver performs this reset automatically, but this should still be
used with caution.
.Pp
.It Li smartautosave Ar enable | disable
Enables/disables attribute autosave feature on the specified device.
.Pp
.It Li smartdisable
Disables support for SMART on the specified device.
Note that this means that the device will no longer record any SMART
information.
.Pp
Note that SMART
.Em must
be enabled while executing the following commands or the device will
return an error.
.Pp
.It Li smartenable
Enables SMART (Self-Monitoring, Analysis, and Reporting Technology) on the
specified device (if supported).
This causes the device to record information
for prediction of device degradation and/or faults.
.Pp
.It Li smartoffline Ar subcommand
Causes the specified device to immediately initiate the optional set of
activities that collect SMART data in off-line mode and then save this data
to the device's non-volatile memory, or execute self-diagnostic test
routines in either captive or off-line mode.
The
.Ar subcommand
may be one of the following:
.Pp
.Bl -tag -width indent -compact
.It Em abort
Abort off-line mode self-test routine.
.Pp
.It Em collect
Start SMART off-line data collection immediately.
.Pp
.It Em extencaptive
Execute SMART extended self-test routine immediately in captive mode.
.Pp
.It Em extenoffline
Execute SMART extended self-test routine immediately in off-line mode.
.Pp
.It Em shortcaptive
Execute SMART short self-test routine immediately in captive mode.
.Pp
.It Em shortoffline
Execute SMART short self-test routine immediately in off-line mode.
.El
.Pp
Note that executing self-test routines in captive mode causes the device to
be not accessible until the routine completes.
This option is therefore
.Em not recommended
unless the implications are understood.
.Pp
.It Li smartread
Reads various SMART information from the specified device and prints it to
stdout.
.Pp
.It Li smartreadlog Ar log
Reads specified
.Ar log
and prints it to stdout.
The
.Ar log
may be one of the following:
.Pp
.Bl -tag -width "directoryXX" -offset indent -compact
.It Em comp
The comprehensive error log.
.It Em directory
The error log directory.
.It Em selftest
The self-test log.
.It Em summary
The summary error log.
.El
.Pp
.It Li smartstatus
Reads the reliability status of the specified device.
If the device reports
that one of its thresholds is exceeded (a strong indication of imminent
failure), the warning
.Sq SMART threshold exceeded!\&
is printed to stderr and a status of 2 is returned.
.Pp
.It Li standby
Place the specified device into Standby mode.
This mode will consume less power than Idle mode.
.Pp
.It Li writecachedisable
Disable the write cache on the specified device (if supported).
This may decrease performance.
Support for and status of write caching is indicated by the device with
.Sq write cache
in the output of the
.Li identify
command.
.Pp
.It Li writecacheenable
Enables the write cache on the specified device (if supported).
This may increase performance, however data still in the device's cache at
powerdown
.Em may be lost .
The
.Xr wd 4
driver performs a cache flush automatically before shutdown.
.El
.Sh EXAMPLES
Display the vendor, product, revision strings, and capabilities (such as
SMART support) as reported by
.Pa /dev/wd0 :
.Pp
.Dl # atactl /dev/wd0c identify
.Pp
Enable SMART support on
.Pa /dev/wd0
for detection of early warning signs of device failure:
.Pp
.Dl # atactl /dev/wd0c smartenable
.Pp
A
.Xr crontab 5
entry which queries
.Pa /dev/wd0
each hour for early warning signs of failure.
If the device exceeds one of the SMART thresholds,
.Nm
will output
.Sq SMART threshold exceeded!\&
to stderr and
.Xr cron 8
will mail it.
.Pp
.Dl 0 * * * * /sbin/atactl /dev/wd0c smartstatus \*(Gt/dev/null
.Sh SEE ALSO
.Xr ioctl 2 ,
.Xr wd 4
.Sh HISTORY
The
.Nm
command first appeared in
.Ox 2.6 .
Support for acoustic management, advanced power management, power-up in
standby, read look-ahead, and SMART was added in
.Ox 2.9 .
.Sh AUTHORS
.An -nosplit
The
.Nm
command was written by
.An Ken Hornstein .
It was based heavily on the scsictl command written by
.An Jason R. Thorpe .
Support for acoustic management, advanced power management, power-up in
standby, read look-ahead, and SMART was added by
.An Wouter Slegers .
.Sh CAVEATS
Not all devices are created equally.
Some may not support the feature sets
and/or commands needed to perform the requested action, even when the
.Li identify
command indicates support for the requested action.
The device will typically respond with an
.Sq ATA device returned Aborted Command
if the requested action is not supported.
Similarly a device might not implement all commands in a feature set,
so even though disabling a feature works, enabling might not.
.Sh BUGS
The output from the
.Li identify
command is rather ugly.
.Pp
Disabling read look-ahead with
.Li readaheaddisable
might cause problems with mounted filesystems on that device.
@


1.45
log
@Reduce instances of `` '' in manuals.

troff displays these as typographic quotes, but nroff implementations
almost always print them literally, which rarely has the intended effect
with modern fonts, even in stock xterm.

These uses of `` '' can be replaced either with more semantic alternatives
or with Dq, which prints typographic quotes in a UTF-8 locale (but will
automatically fall back to `` '' in an ASCII locale).

improvements and ok schwarze@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.44 2014/09/08 01:27:55 schwarze Exp $
d31 1
a31 1
.Dd $Mdocdate: September 8 2014 $
d246 1
a246 1
.It Li secdisablepass Ar user \*(Ba master
d251 1
a251 1
.It Li secerase Ar user \*(Ba master Oo
d279 1
a279 1
.It Li secsetpass Ar user Ar high \*(Ba maximum
d314 1
a314 1
.It Li secunlock Ar user \*(Ba master
d346 1
a346 1
.It Li smartautosave Ar enable \*(Ba disable
@


1.44
log
@obvious cases of missing .An;
found with the new mandoc(1) MANDOCERR_AN_MISSING warning;
no text changes
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.43 2012/12/10 21:35:52 jmc Exp $
d31 1
a31 1
.Dd $Mdocdate: December 10 2012 $
d239 2
a240 1
shown in the last column, ``Raw''.
@


1.43
log
@escape some exclamation marks to avoid unwanted double spacing;
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.42 2010/01/03 16:43:45 schwarze Exp $
d31 1
a31 1
.Dd $Mdocdate: January 3 2010 $
d491 1
d494 4
a497 2
command was written by Ken Hornstein.
It was based heavily on the scsictl command written by Jason R. Thorpe.
d499 2
a500 1
standby, read look-ahead, and SMART was added by Wouter Slegers.
@


1.42
log
@Neither .Pp nor unqualified text are allowed at the top level of .Bl;
instead, .It is required.  Thus, move .Pp and text before the .Bl,
and remove the .Pp altogether where it is not needed.

Syntax errors found by mandoc(1), also required to fix the mandoc build;
feedback and ok jmc@@, and sobrado@@ also supports the direction.
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.41 2008/09/24 06:43:45 jmc Exp $
d31 1
a31 1
.Dd $Mdocdate: September 24 2008 $
d427 1
a427 1
.Sq SMART threshold exceeded!
d473 1
a473 1
.Sq SMART threshold exceeded!
@


1.41
log
@remove duplicate command;
from Daniel Roethlisberge, documentation/5936;
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.40 2008/08/10 17:40:10 sobrado Exp $
d31 1
a31 1
.Dd $Mdocdate: August 10 2008 $
d372 1
a373 1
.Pp
@


1.40
log
@add missing ellipsis; spacing.
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.39 2008/06/26 05:42:06 ray Exp $
d31 1
a31 1
.Dd $Mdocdate: June 26 2008 $
a69 1
secsetpass,
@


1.39
log
@First pass at removing clauses 3 and 4 from NetBSD licenses.

Not sure what's more surprising: how long it took for NetBSD to
catch up to the rest of the BSDs (including UCB), or the amount of
code that NetBSD has claimed for itself without attributing to the
actual authors.

OK deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.38 2008/06/03 19:51:02 jmc Exp $
d31 1
a31 1
.Dd $Mdocdate: June 3 2008 $
d40 1
a40 1
.Op Ar command Op Ar arg
d246 1
a246 1
.It Li secdisablepass Ar user\*(Bamaster
d251 3
a253 1
.It Li secerase Ar user\*(Bamaster Op Ar enhanced
d279 1
a279 1
.It Li secsetpass Ar user Ar high\*(Bamaximum
d314 1
a314 1
.It Li secunlock Ar user\*(Bamaster
d346 1
a346 1
.It Li smartautosave Ar enable\*(Badisable
@


1.38
log
@fix some spacing issues;
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.37 2007/05/31 19:19:43 jmc Exp $
a17 7
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"        This product includes software developed by the NetBSD
.\"        Foundation, Inc. and its contributors.
.\" 4. Neither the name of The NetBSD Foundation nor the names of its
.\"    contributors may be used to endorse or promote products derived
.\"    from this software without specific prior written permission.
d31 1
a31 1
.Dd $Mdocdate: May 31 2007 $
@


1.37
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.36 2006/10/04 14:19:32 jmc Exp $
d38 1
a38 1
.Dd $Mdocdate$
d465 1
a465 1
Enable  SMART support on
@


1.36
log
@sort the smartoffline subcommands;
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.35 2006/10/04 14:15:18 jmc Exp $
d38 1
a38 1
.Dd November 18, 1998
@


1.35
log
@DIAGNOSTICS -> CAVEATS because:
1) this section discusses caveats, not diagnostics
2) DIAGNOSTICS is not standard for section 1

ok grange
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.34 2006/10/03 19:05:10 jmc Exp $
d380 3
d386 2
a387 2
.It Em shortoffline
Execute SMART short self-test routine immediately in off-line mode.
a391 3
.It Em abort
Abort off-line mode self-test routine.
.Pp
d395 2
a396 2
.It Em extencaptive
Execute SMART extended self-test routine immediately in captive mode.
@


1.34
log
@move the advice about smart, readattr, and sec* to before the command
list, since it doesn;t make sense to put these in any one single
command description (nor indeed to repeat them for every command);

ok grange
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.33 2006/10/03 14:36:29 jmc Exp $
a484 11
.Sh DIAGNOSTICS
Not all devices are created equally.
Some may not support the feature sets
and/or commands needed to perform the requested action, even when the
.Li identify
command indicates support for the requested action.
The device will typically respond with an
.Sq ATA device returned Aborted Command
if the requested action is not supported.
Similarly a device might not implement all commands in a feature set,
so even though disabling a feature works, enabling might not.
d503 11
@


1.33
log
@provide a summary of the available commands, since there's a ton of
them;
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.32 2006/10/03 14:19:34 jmc Exp $
d64 1
a64 1
identify,
d95 16
a110 4
If
.Ar command
is not specified,
the
d112 6
a117 1
command is implied.
d182 1
a252 4
SMART commands and
.Li readattr
command are for experts only.
.Pp
a257 12
Support for the security commands is indicated by the device with
.Sq Security Mode feature set
in the output of the
.Li identify
command.
.Pp
.Em WARNING
.br
Be very careful while playing with these commands.
Loss of the user and master passwords for the device will result
in an inaccessible device.
.Pp
a368 9
Support for SMART is indicated by the device with
.Sq SMART feature set
in the output of the
.Li identify
command.
.Pp
SMART commands and
.Li readattr
command are for experts only.
@


1.32
log
@put the command list into some semblance of order;
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.31 2006/10/02 19:47:12 jmc Exp $
d53 1
a53 1
a device to manipulate, the command to perform, and any arguments
d56 39
d101 1
a101 1
The following commands may be used:
@


1.31
log
@various tweaks to smarten this page up a bit;
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.30 2006/10/02 19:38:51 jmc Exp $
d65 6
a70 3
.It Li identify
Identify the specified device, displaying the device's vendor, product,
revision strings, supported capabilities and enabled capabilities.
d72 12
a83 3
.It Li idle
Place the specified device into Idle mode.
This mode may consume less power than Active mode.
d85 6
a90 29
.It Li standby
Place the specified device into Standby mode.
This mode will consume less power than Idle mode.
.Pp
.It Li sleep
Place the specified device into Sleep mode.
This mode will consume less power than Standby mode,
but requires a device reset to resume operation.
Typically the
.Xr wd 4
driver performs this reset automatically, but this should still be
used with caution.
.Pp
.It Li setidle Ar idle-timer
Places the specified device into Idle mode, and sets the Idle timer to
.Ar idle-timer
seconds.
A value of 0 will disable the Idle timer.
.Pp
.It Li setstandby Ar standby-timer
Places the specified device into Standby mode, and sets the Standby timer
to
.Ar standby-timer
seconds.
A value of 0 will disable the Standby timer.
.Pp
.It Li checkpower
Will print out if the device is in Active, Idle, or Standby power
management mode.
d115 3
a117 6
.It Li apmdisable
Disables support for advanced power management on the specified device.
Note that devices supporting advanced power management may refuse to
disable it, resulting in an
.Sq ATA device returned Aborted Command
warning.
d119 3
a121 12
.It Li acousticset Ar acoustic-management-level
Enables and sets the automatic acoustic management level to the requested
level on the specified device (if supported).
Device performance may
increase with increasing automatic acoustic management levels at the cost of
potentially generating more noise and requiring more power.
Valid values are 0 up to and including 126.
Support for automatic acoustic management is indicated by the device with
.Sq Automatic Acoustic Management feature set
in the output of the
.Li identify
command.
d123 3
a125 6
.It Li acousticdisable
Disables support for automatic acoustic management on the specified device.
Note that devices supporting automatic acoustic management may refuse to
disable it, resulting in an
.Sq ATA device returned Aborted Command
warning.
d127 3
a129 3
.It Li podenable
Allows the specified device to revert to power-on default (pod) settings
after a software reset.
d137 11
a162 7
.It Li puisdisable
Disables power-up in standby (puis) on the specified device, causing the
device to spin up the disks after power-up.
This should be the factory
default setting of the device and it is recommended to leave this
setting disabled.
.Pp
d167 10
d187 55
a241 9
.It Li readaheaddisable
Disables read look-ahead on the specified device.
This may decrease performance.
Note that the device may use
.Sq vendor specific
behaviour in implementing this, so it is
.Em not
recommended to issue this command on a disk containing any currently
mounted filesystems.
d288 12
a299 18
.It Li secerase Ar user\*(Bamaster Op Ar enhanced
Erases all user data and unlocks the specified device.
Execution of this command with the master password is the only way to unlock a
device locked at maximum security level with the
.Li secsetpass
command if the user's password is lost or unknown.
There are two erase modes: normal and enhanced.
Default erase mode is normal.
In the normal erase mode this command will write binary zeroes to
all user data areas.
The enhanced erase mode is optional and may not be supported by the device.
When enhanced erase mode is specified, the device will write predetermined
data patterns to all user data areas.
In enhanced erase mode, all previously written user data will be overwritten,
including sectors that are no longer in use due to reallocation.
This command will disable the device lock mode, however, the master password
will still be stored internally within the device and may be reactivated later
when a new user password is set.
d301 8
a308 6
.It Li secfreeze
Prevents changes to passwords until a following power cycle.
The purpose of this command is to prevent password setting attacks on the
security system.
After command completion any other commands that update the device lock mode
will be aborted.
d310 2
a311 4
.It Li secdisablepass Ar user\*(Bamaster
Disables the lock mode for the specified device with user or master password.
This command won't change the master password.
The master password will be reactivated when a user password is set.
d313 4
a316 5
Support for the security commands is indicated by the device with
.Sq Security Mode feature set
in the output of the
.Li identify
command.
d318 4
a321 5
.Em WARNING
.br
Be very careful while playing with these commands.
Loss of the user and master passwords for the device will result
in an inaccessible device.
d334 3
a336 20
.It Li smartdisable
Disables support for SMART on the specified device.
Note that this means that the device will no longer record any SMART
information.
.Pp
Note that SMART
.Em must
be enabled while executing the following commands or the device will
return an error.
.Pp
.It Li smartstatus
Reads the reliability status of the specified device.
If the device reports
that one of its thresholds is exceeded (a strong indication of imminent
failure), the warning
.Sq SMART threshold exceeded!
is printed to stderr and a status of 2 is returned.
.Pp
.It Li smartautosave Ar enable\*(Badisable
Enables/disables attribute autosave feature on the specified device.
d396 7
a402 8
.It Li readattr
Displays attribute thresholds and values for the specified device.
Besides attribute values, device vendors may provide additional information
shown in the last column, ``Raw''.
Attributes names can be completely wrong since they vary between vendors and
even models, so don't rely on it.
SMART must be enabled while executing this command or the device will return
an error.
d404 3
a406 3
SMART commands and
.Li readattr
command are for experts only.
a424 4
.Pp
.It Li dump
Extracts the records about issued ATA commands from the log buffer.
The log buffer is cleared after extraction.
@


1.30
log
@standard EXAMPLES;
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.29 2006/10/02 19:30:19 jmc Exp $
d56 3
a58 4
If the
.Ar device
is specified without a
.Ar command ,
a61 1
.Pp
d209 1
a209 1
.It Li secsetpass Ar user Ar high|maximum
d244 1
a244 1
.It Li secunlock Ar user|master
d254 1
a254 1
.It Li secerase Ar user|master Op Ar enhanced
d280 1
a280 1
.It Li secdisablepass Ar user|master
d326 1
a326 1
.It Li smartautosave Ar enable|disable
a374 1
.Bl -tag -width indent
d376 3
d381 2
a382 1
.Pp
a384 6
.Pp
.It Em comp
The comprehensive error log.
.Pp
.It Em selftest
The self-test log.
d469 1
a469 1
standby, read look-ahead and SMART was added in
d477 1
a477 1
standby, read look-ahead and SMART was added by Wouter Slegers.
d483 1
a483 1
Disabling read look-ahead with the
@


1.29
log
@simplify SYNOPSIS and sync usage();
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.28 2005/03/28 18:52:38 kurt Exp $
d428 3
a430 1
.Li # atactl /dev/wd0c identify
d432 1
a432 3
Displays the vendor, product, revision strings and capabilities (such as
support for SMART) as reported by
.Pa /dev/wd0 .
d434 1
a434 3
.Li # atactl /dev/wd0c smartenable
.Pp
Enables the SMART support on
d436 1
a436 1
for detection of early warning signs of device failure.
d438 1
a438 1
.Li 0 * * * * /sbin/atactl /dev/wd0c smartstatus >/dev/null
d440 1
a440 1
In a
d442 1
a442 1
entry queries
d445 1
a445 1
If the device exceeded one of the SMART thresholds,
d452 2
@


1.28
log
@Fix obvious copy/paste typo.

okay jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.27 2004/03/18 16:03:51 jmc Exp $
d47 1
a47 5
.Ar command
.Oo
.Ar arg Oo ...
.Oc
.Oc
@


1.27
log
@typo;
ok grange@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.26 2004/02/02 08:30:26 grange Exp $
d92 3
a94 4
.It Li setidle Ar standby-timer
Places the specified device into Idle mode, and sets the Standby timer
to
.Ar standby-timer
d96 1
a96 1
A value of 0 will disable the Standby timer.
@


1.26
log
@A little better explanation about pod from gluk@@
help and ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.25 2004/01/13 22:44:58 grange Exp $
d493 1
a493 1
Disabling read look-head with the
@


1.25
log
@s/wd1/wd0/; from Andrey Matveev <andrushock@@korovino.net>
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.24 2003/06/03 13:16:07 jmc Exp $
d162 1
a162 1
after a reset.
d166 3
a168 1
after a reset.
@


1.24
log
@- section reorder
- some mdoc fixes
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.23 2003/03/12 20:12:36 deraadt Exp $
d437 1
a437 1
.Li # atactl /dev/wd1c smartenable
d440 1
a440 1
.Pa /dev/wd1
@


1.23
log
@more .Li
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.22 2003/01/29 16:53:37 jmc Exp $
d299 1
a299 1
Loss of the user and master passwords for the device will result 
d421 1
a421 1
.Em may be lost.
a429 1
.Pp
a470 7
.Sh AUTHORS
The
.Nm
command was written by Ken Hornstein.
It was based heavily on the scsictl command written by Jason R. Thorpe.
Support for acoustic management, advanced power management, power-up in
standby, read look-ahead and SMART was added by Wouter Slegers.
d479 7
@


1.22
log
@typos;

many tweaks by millert@@ (thanks)
thanks mpech@@ for help with adduser(8)

ok millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.21 2003/01/14 23:53:25 avsm Exp $
d65 1
a65 1
.Cm identify
d71 1
a71 1
.It Cm identify
d75 1
a75 1
.It Cm idle
d79 1
a79 1
.It Cm standby
d83 1
a83 1
.It Cm sleep
d92 1
a92 1
.It Cm setidle Ar standby-timer
d99 1
a99 1
.It Cm setstandby Ar standby-timer
d106 1
a106 1
.It Cm checkpower
d110 1
a110 1
.It Cm apmset Ar power-management-level
d130 1
a130 1
.Cm identify
d133 1
a133 1
.It Cm apmdisable
d140 1
a140 1
.It Cm acousticset Ar acoustic-management-level
d150 1
a150 1
.Cm identify
d153 1
a153 1
.It Cm acousticdisable
d160 1
a160 1
.It Cm podenable
d164 1
a164 1
.It Cm poddisable
d168 1
a168 1
.It Cm puisenable
d180 1
a180 1
.Cm identify
d183 1
a183 1
.It Cm puisdisable
d190 1
a190 1
.It Cm puisspinup
d194 1
a194 1
.It Cm readaheadenable
d201 1
a201 1
.Cm identify
d204 1
a204 1
.It Cm readaheaddisable
d214 2
a215 2
.It Cm secsetpass Ar user Ar high|maximum
.It Cm secsetpass Ar master
d225 1
a225 1
.Cm secunlock
d234 1
a234 1
.Cm identify
d240 1
a240 1
.Cm secunlock
d243 1
a243 1
.Cm secerase
d246 1
a246 1
.Cm secerase
d249 1
a249 1
.It Cm secunlock Ar user|master
d253 1
a253 1
.Cm secsetpass
d256 1
a256 1
.Cm secsetpass
d259 1
a259 1
.It Cm secerase Ar user|master Op Ar enhanced
d263 1
a263 1
.Cm secsetpass
d278 1
a278 1
.It Cm secfreeze
d285 1
a285 1
.It Cm secdisablepass Ar user|master
d293 1
a293 1
.Cm identify
d302 1
a302 1
.It Cm smartenable
d310 1
a310 1
.Cm identify
d313 1
a313 1
.It Cm smartdisable
d323 1
a323 1
.It Cm smartstatus
d331 1
a331 1
.It Cm smartautosave Ar enable|disable
d334 1
a334 1
.It Cm smartoffline Ar subcommand
d369 1
a369 1
.It Cm smartread
d373 1
a373 1
.It Cm smartreadlog Ar log
d395 1
a395 1
.It Cm readattr
d405 1
a405 1
.Cm readattr
d408 1
a408 1
.It Cm writecachedisable
d414 1
a414 1
.Cm identify
d417 1
a417 1
.It Cm writecacheenable
d426 1
a426 1
.It Cm dump
d432 1
a432 1
.Cm # atactl /dev/wd0c identify
d438 1
a438 1
.Cm # atactl /dev/wd1c smartenable
d444 1
a444 1
.Cm 0 * * * * /sbin/atactl /dev/wd0c smartstatus >/dev/null
d462 1
a462 1
.Cm identify
d489 1
a489 1
.Cm identify
d493 1
a493 1
.Cm readaheaddisable
@


1.21
log
@consistent output and typo, grange@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.20 2002/12/19 01:42:02 grange Exp $
d170 2
a171 2
device to wait with spinning up the disks after power-up.
This may cause problems at boot if the device is to slow in spin-up.
d191 2
a192 2
Explicitly spins up the device if it powered-up into standby mode (i.e.
power-up in standby was enabled).
d227 1
a227 1
A master password may be set in a addition to the user password.
d244 1
a244 1
command if the master password is used to unlock.
d257 1
a257 1
command, the device won't unlock if the master password is received.
d261 2
a262 2
Execution of this command with master password is the only way to unlock a
device locked at maximum security level with
d264 1
a264 1
command if user password is lost or unknown.
d270 1
a270 1
When enhanced erase mode specified, the device will write predetermined
d299 2
a300 2
Loss of the user and master passwords the device will result in an unaccessible
device.
d320 1
a320 1
be enabled while executing the next described commands or the device will
d337 1
a337 1
to the device's non-volatile memory, or execute a self-diagnostic test
d379 1
a379 1
may by one of the following:
d396 3
a398 3
Displays attributes thresholds and values for the specified device.
Besides attributes values device vendor can provide additional information
shown in the last column ``Raw''.
@


1.20
log
@Document atactl dump command; thanks to nick@@ for pointing this out.
ok deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.19 2002/12/19 01:14:45 deraadt Exp $
d135 1
a135 1
Note that devices supporting advanced powermanagement may refuse to
@


1.19
log
@much prettier
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.18 2002/11/14 02:57:27 deraadt Exp $
d425 4
@


1.18
log
@use $ or # before commands in examples
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.17 2002/08/04 14:11:41 gluk Exp $
a59 3
The following commands may be used on IDE and ATA devices.
Note that not all devices support all commands.
.Pp
a66 1
.Sh COMMANDS
d68 1
a68 1
.Cm # atactl identify
d70 2
d75 1
a75 2
.Cm # atactl idle
.Pp
d79 1
a79 2
.Cm # atactl standby
.Pp
d83 1
a83 2
.Cm # atactl sleep
.Pp
d92 1
a92 3
.Cm # atactl setidle
.Ar standby-timer
.Pp
d99 1
a99 3
.Cm # atactl setstandby
.Ar standby-timer
.Pp
d106 1
a106 2
.Cm # atactl checkpower
.Pp
d110 1
a110 3
.Cm # atactl apmset
.Ar power-management-level
.Pp
d133 1
a133 2
.Cm # atactl apmdisable
.Pp
d140 1
a140 3
.Cm # atactl acousticset
.Ar acoustic-management-level
.Pp
d153 1
a153 2
.Cm # atactl acousticdisable
.Pp
d160 1
a160 2
.Cm # atactl podenable
.Pp
d164 1
a164 2
.Cm # atactl poddisable
.Pp
d168 1
a168 2
.Cm # atactl puisenable
.Pp
d183 1
a183 2
.Cm # atactl puisdisable
.Pp
d190 1
a190 2
.Cm # atactl puisspinup
.Pp
d194 1
a194 2
.Cm # atactl readaheadenable
.Pp
d204 1
a204 2
.Cm # atactl readaheaddisable
.Pp
d214 2
a215 7
.Cm # atactl secsetpass
.Ar user
.Ar high | maximum
.br
.Cm # atactl secsetpass
.Ar master
.Pp
d249 1
a249 3
.Cm # atactl secunlock
.Ar user | master
.Pp
d259 1
a259 4
.Cm # atactl secerase
.Ar user | master
.Op Ar enhanced
.Pp
d269 1
a269 1
The enhanced erase mode is optional and may not be supported by your device.
d278 1
a278 2
.Cm # atactl secfreeze
.Pp
d285 1
a285 3
.Cm # atactl secdisablepass
.Ar user | master
.Pp
d299 2
a300 5
If you lose the user and master passwords the device will not be accessible
at all.
Don't use it unless the implications are completely understood.
.Pp
.Cm # atactl smartenable
d302 1
d313 1
a313 2
.Cm # atactl smartdisable
.Pp
d323 1
a323 2
.Cm # atactl smartstatus
.Pp
d331 1
a331 3
.Cm # atactl smartautosave
.Ar enable | disable
.Pp
d334 1
a334 3
.Cm # atactl smartoffline
.Ar subcommand
.Pp
d342 2
a343 1
.Bl -inset -offset indent
d345 2
a346 1
start SMART off-line data collection immediately;
d348 2
a349 1
execute SMART short self-test routine immediately in off-line mode;
d351 2
a352 1
execute SMART extended self-test routine immediately in off-line mode;
d354 2
a355 1
abort off-line mode self-test routine;
d357 2
a358 1
execute SMART short self-test routine immediately in captive mode;
d360 1
a360 1
execute SMART extended self-test routine immediately in captive mode.
d369 1
a369 2
.Cm # atactl smartread
.Pp
d373 1
a373 3
.Cm # atactl smartreadlog
.Ar log
.Pp
d380 2
a381 1
.Bl -inset -offset indent
d383 2
a384 1
error log directory;
d386 2
a387 1
summary error log;
d389 2
a390 1
comprehensive error log;
d392 1
a392 1
self-test log.
d395 1
a395 2
.Cm # atactl readattr
.Pp
a406 3
If you can't understand its meaning don't ask us, read ATA working drafts.
.Pp
.Cm # atactl writecachedisable
d408 1
d417 1
a417 2
.Cm # atactl writecacheenable
.Pp
d425 2
@


1.17
log
@- grammar cleanup.
- check for the failure of strdup().

from tedu <grendel@@zeitbombe.org>
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.16 2002/07/06 14:46:57 gluk Exp $
d72 1
a72 1
.Cm identify
d77 1
a77 1
.Cm idle
d82 1
a82 1
.Cm standby
d87 1
a87 1
.Cm sleep
d97 1
a97 1
.Cm setidle
d106 1
a106 1
.Cm setstandby
d115 1
a115 1
.Cm checkpower
d120 1
a120 1
.Cm apmset
d145 1
a145 1
.Cm apmdisable
d153 1
a153 1
.Cm acousticset
d168 1
a168 1
.Cm acousticdisable
d176 1
a176 1
.Cm podenable
d181 1
a181 1
.Cm poddisable
d186 1
a186 1
.Cm puisenable
d202 1
a202 1
.Cm puisdisable
d210 1
a210 1
.Cm puisspinup
d215 1
a215 1
.Cm readaheadenable
d226 1
a226 1
.Cm readaheaddisable
d237 1
a237 1
.Cm secsetpass
d241 1
a241 1
.Cm secsetpass
d277 1
a277 1
.Cm secunlock
d289 1
a289 1
.Cm secerase
d311 1
a311 1
.Cm secfreeze
d319 1
a319 1
.Cm secdisablepass
d339 1
a339 1
.Cm smartenable
d351 1
a351 1
.Cm smartdisable
d362 1
a362 1
.Cm smartstatus
d371 1
a371 1
.Cm smartautosave
d376 1
a376 1
.Cm smartoffline
d407 1
a407 1
.Cm smartread
d412 1
a412 1
.Cm smartreadlog
d432 1
a432 1
.Cm readattr
d447 1
a447 1
.Cm writecachedisable
d457 1
a457 1
.Cm writecacheenable
@


1.16
log
@Security Mode feature set.
From Alexander Yurchenko <grange@@rt.mipt.ru>

Approved by csapuntz@@ and me.
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.15 2002/06/09 08:13:05 todd Exp $
d260 1
a260 1
Each master password change causes decrement of the master password revision
d281 1
a281 1
The device will always unlock if valid user password is received.
d294 2
a295 2
Execution of this command with master password is the only way to unlock the
device being locked at maximum security level with
d297 1
a297 1
command if user password lost or unknown.
d334 3
a336 2
Be very carefull while playing with theese commands.
If you lose user and master passwords the device will be inaccessible at all.
@


1.15
log
@rm trailing whitespace
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.14 2002/06/08 12:50:42 gluk Exp $
d237 101
a528 3
.Pp
There is no support for the Secure Mode commands (in particular the
Security Erase Unit).
@


1.14
log
@- extended SMART support.
- style, typos.
- Big part of program redesigned and become more clean and simple.

Work done by Alexander Yurchenko <grange@@openbsd.ru>.
Readattr command implementation and some cleanups by me.

Costa@@ ok.
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.13 2002/04/30 04:25:28 fgsch Exp $
d166 1
a166 1
command. 
@


1.13
log
@use scsictl, not scsictl(8); closes pr/2577.
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.12 2002/02/11 18:43:51 mpech Exp $
d70 1
d255 5
d268 76
a343 3
Note that SMART
.Em must
be enabled or the device will return an error.
a427 3
.Pp
There is no support for reading SMART logs or initiating a SMART
selftest.
@


1.12
log
@Initial patch.
When you give command examples in a manual page prefix them with
	$ command
or
	# command

deraadt@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.11 2001/12/21 11:41:50 mpech Exp $
d330 1
a330 3
It was based heavily on the
.Xr scsictl 8
command written by Jason R. Thorpe.
@


1.11
log
@Initial patch for a new mdoc issue.
Powered by @@mantoya:
o) kill extra line in the end of file;
o) kill extra space in the end of line;
o) replace blank lines with .Pp;

millert@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.10 2001/12/13 20:16:48 mpech Exp $
d286 1
a286 1
.Cm atactl /dev/wd0c identify
d292 1
a292 1
.Cm atactl /dev/wd1c smartenable
@


1.10
log
@o) start new sentence on a new line;
o) wrap long lines;
o) fix bogus .Xr usage;
o) we don't like blank lines;
o) always close .Bl tags;
o) OpenBSD -> .Ox;
o) don't like .Pp before .Ss;

millert@@ ok;
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.9 2001/09/03 21:24:07 deraadt Exp $
d129 1
a129 1
This 
d142 1
a142 1
command. 
d148 1
a148 1
disable it, resulting in an 
d187 1
a187 1
Enables power-up in standby (puis) on the specified device, causing the 
d194 1
a194 1
hardware and software resets. 
d199 1
a199 1
command. 
d203 1
a203 1
Disables power-up in standby (puis) on the specified device, causing the 
d223 1
a223 1
command. 
d246 1
a246 1
command. 
d252 1
a252 1
information. 
d274 1
a274 1
command. 
d309 1
a309 1
to stderr and 
d314 1
a314 1
Some may not support the feature sets 
@


1.9
log
@fix spellings
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.9 2001/09/03 16:10:26 deraadt Exp $
d123 2
a124 1
level on the specified device (if supported). Device performance may
d126 4
a129 2
potentially requiring more power. Values up to and including 126 allow
the device to go into standby mode and spin-down the disk. This 
d133 6
a138 5
recommended. These values are more suitable optimization for low power
usage on infrequently used devices. Values 127 up to and including 253
do not allow the device to go to standby mode and are more suitable for
optimization for performance. Support for advanced power management is
indicated by the device with
d156 2
a157 1
level on the specified device (if supported). Device performance may
d159 3
a161 3
potentially generating more noise and requiring more power. Valid values are
0 up to and including 126. Support for automatic acoustic management is
indicated by the device with
d188 3
a190 3
device to wait with spinning up the disks after power-up. This may cause
problems at boot if the device is to slow in spin-up. This option is
therefore
d192 3
a194 3
unless the implications are understood. Note that the power-up in
standby mode stays enabled over power-downs, hardware and software
resets. 
d204 2
a205 1
device to spin up the disks after power-up. This should be the factory
d216 3
a218 2
Enables read look-ahead on the specified device. This may increase
performance. Support for and status of read look-ahead is indicated by
d227 3
a229 2
Disables read look-ahead on the specified device. This may decrease
performance. Note that the device may use
d239 4
a242 3
specified device (if supported). This causes the device to record information
for prediction of device degradation and/or faults. Support for SMART is
indicated by the device with
d250 3
a252 2
Disables support for SMART on the specified device. Note that this means that
the device will no longer record any SMART information. 
d256 2
a257 1
Reads the reliability status of the specified device. If the device reports
d261 2
a262 1
is printed to stderr and a status of 2 is returned. Note that SMART
d268 3
a270 3
Disable the write cache on the specified device (if supported). This may
decrease performance.  Support for and status of write caching is
indicated by the device with
d278 2
a279 2
Enables the write cache on the specified device (if supported). This may
increase performance, however data still in the device's cache at
d304 2
a305 2
each hour for early warning signs of failure. If the device exceeded one
of the SMART thresholds,
d313 2
a314 1
Not all devices are created equally. Some may not support the feature sets 
d317 2
a318 2
command indicates support for the requested action. The device will
typically respond with an
d320 3
a322 3
if the requested action is not supported. Similarly a device might
not implement all commands in a feature set, so even though disabling a
feature works, enabling might not.
@


1.8
log
@o) .Sh AUTHOR -> .Sh AUTHORS;
o) .Sh EXAMPLE -> .Sh EXAMPLES;
o) Delete .Sh OPTIONS. Text moved to .Sh DESCRIPTION;

millert@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.7 2001/07/20 18:07:11 mpech Exp $
d128 1
a128 1
and is therefor
d184 2
a185 2
problems at boot if the device is to slow in spin-up. This options is
therefor
d187 1
a187 1
unless really understand the implications. Note that the power-up in
@


1.7
log
@we don't like:
o) .Pp before/after .Sh;
o) .Pp before/after .Rs/.Re;
o) .Nm without argument in SYNOPSIS;
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.6 2001/04/23 15:30:26 aaron Exp $
d313 1
a313 1
.Sh AUTHOR
@


1.6
log
@Various man page fixes and improvements from gluk@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.5 2001/03/23 02:16:42 deraadt Exp $
d45 1
a45 1
.Nm
a300 1
.Pp
@


1.5
log
@atactl SMART support; wouter@@yourcreativesolutions.nl
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.4 2000/04/12 16:50:52 aaron Exp $
d299 1
a299 1
wil mail it.
@


1.4
log
@Remove all arguments to the .Os macro so that all of 2.7's man pages will
correctly say "OpenBSD 2.7".
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.3 2000/03/18 22:55:53 aaron Exp $
d74 1
a74 1
revision strings, and the device's capabilities.
d88 1
a88 1
Place he specified device into Sleep mode.
d118 193
d321 2
d328 3
d335 10
@


1.3
log
@Remove hard sentence breaks, and some other cleanup along the way.
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.2 2000/02/02 02:52:05 deraadt Exp $
d40 1
a40 1
.Os NetBSD
@


1.2
log
@without a command, identify is implied
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.1 1999/09/21 04:58:14 csapuntz Exp $
d55 2
a56 2
control devices which reside on standard IDE and ATA controllers.  It is
used by specifying
d59 3
a61 3
.Sh DEVICE COMMANDS
The following commands may be used on IDE and ATA devices.  Note
that not all devices support all commands.
d69 1
a69 1
command is implied. 
d78 2
a79 2
Place the specified device into Idle mode.  This mode may consume less
power than Active mode.
d83 2
a84 2
Place the specified device into Standby mode.  This mode will consume
less power than Idle mode.
d88 4
a91 3
Place he specified device into Sleep mode.  This mode will consume
less power than Standby mode, but requires a device reset to resume
operation.  Typically the
d102 2
a103 1
seconds.  A value of 0 will disable the Standby timer.
d111 2
a112 1
seconds.  A value of 0 will disable the Standby timer.
a117 4
.Sh BUGS
The output from the
.Cm identify
command is rather ugly.
d124 2
a125 1
command was written by Ken Hornstein.  It was based heavily on the
d133 4
@


1.1
log
@

Add atactl utility from NetBSD. This utility gives detailed inquiry info as
well as letting you spin down disks, set standby times, etc.
@
text
@d1 1
a1 1
.\"	$OpenBSD: atactl.8,v 1.5 1999/02/24 18:49:14 jwise Exp $
d63 8
d132 1
a132 1
.Nx 1.4 .
@

