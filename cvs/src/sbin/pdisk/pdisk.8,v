head	1.31;
access;
symbols
	OPENBSD_6_1:1.31.0.6
	OPENBSD_6_1_BASE:1.31
	OPENBSD_6_0:1.31.0.4
	OPENBSD_6_0_BASE:1.31
	OPENBSD_5_9:1.31.0.2
	OPENBSD_5_9_BASE:1.31
	OPENBSD_5_8:1.18.0.22
	OPENBSD_5_8_BASE:1.18
	OPENBSD_5_7:1.18.0.14
	OPENBSD_5_7_BASE:1.18
	OPENBSD_5_6:1.18.0.18
	OPENBSD_5_6_BASE:1.18
	OPENBSD_5_5:1.18.0.16
	OPENBSD_5_5_BASE:1.18
	OPENBSD_5_4:1.18.0.12
	OPENBSD_5_4_BASE:1.18
	OPENBSD_5_3:1.18.0.10
	OPENBSD_5_3_BASE:1.18
	OPENBSD_5_2:1.18.0.8
	OPENBSD_5_2_BASE:1.18
	OPENBSD_5_1_BASE:1.18
	OPENBSD_5_1:1.18.0.6
	OPENBSD_5_0:1.18.0.4
	OPENBSD_5_0_BASE:1.18
	OPENBSD_4_9:1.18.0.2
	OPENBSD_4_9_BASE:1.18
	OPENBSD_4_8:1.16.0.2
	OPENBSD_4_8_BASE:1.16
	OPENBSD_4_7:1.14.0.10
	OPENBSD_4_7_BASE:1.14
	OPENBSD_4_6:1.14.0.12
	OPENBSD_4_6_BASE:1.14
	OPENBSD_4_5:1.14.0.8
	OPENBSD_4_5_BASE:1.14
	OPENBSD_4_4:1.14.0.6
	OPENBSD_4_4_BASE:1.14
	OPENBSD_4_3:1.14.0.4
	OPENBSD_4_3_BASE:1.14
	OPENBSD_4_2:1.14.0.2
	OPENBSD_4_2_BASE:1.14
	OPENBSD_4_1:1.13.0.4
	OPENBSD_4_1_BASE:1.13
	OPENBSD_4_0:1.13.0.2
	OPENBSD_4_0_BASE:1.13
	OPENBSD_3_9:1.12.0.4
	OPENBSD_3_9_BASE:1.12
	OPENBSD_3_8:1.12.0.2
	OPENBSD_3_8_BASE:1.12
	OPENBSD_3_7:1.11.0.8
	OPENBSD_3_7_BASE:1.11
	OPENBSD_3_6:1.11.0.6
	OPENBSD_3_6_BASE:1.11
	OPENBSD_3_5:1.11.0.4
	OPENBSD_3_5_BASE:1.11
	OPENBSD_3_4:1.11.0.2
	OPENBSD_3_4_BASE:1.11
	OPENBSD_3_3:1.10.0.2
	OPENBSD_3_3_BASE:1.10
	OPENBSD_3_2:1.7.0.4
	OPENBSD_3_2_BASE:1.7
	OPENBSD_3_1:1.7.0.2
	OPENBSD_3_1_BASE:1.7
	OPENBSD_3_0:1.4.0.2
	OPENBSD_3_0_BASE:1.4
	OPENBSD_2_9:1.2.0.2
	OPENBSD_2_9_BASE:1.2
	ver1:1.1.1.1
	apple19980218:1.1.1;
locks; strict;
comment	@.\" @;


1.31
date	2016.02.23.03.34.17;	author krw;	state Exp;
branches;
next	1.30;
commitid	9jnycNADeNQq2BDQ;

1.30
date	2016.01.28.07.57.19;	author jmc;	state Exp;
branches;
next	1.29;
commitid	qRDyudPLCvFaWv8Q;

1.29
date	2016.01.28.01.07.39;	author krw;	state Exp;
branches;
next	1.28;
commitid	6za2KPUMnp0PYP7o;

1.28
date	2016.01.27.20.24.50;	author krw;	state Exp;
branches;
next	1.27;
commitid	IEBtkikjPO73vv6L;

1.27
date	2016.01.27.20.11.00;	author krw;	state Exp;
branches;
next	1.26;
commitid	nG5oL7pLOwgdVHKs;

1.26
date	2016.01.27.17.21.19;	author jmc;	state Exp;
branches;
next	1.25;
commitid	MHq0xrG1cbVMRqz6;

1.25
date	2016.01.27.15.56.47;	author krw;	state Exp;
branches;
next	1.24;
commitid	A4p5gwShAATRRK4K;

1.24
date	2016.01.27.14.19.59;	author krw;	state Exp;
branches;
next	1.23;
commitid	EqZjPBGHnNBMYpZq;

1.23
date	2016.01.22.07.41.14;	author jmc;	state Exp;
branches;
next	1.22;
commitid	QIP6xjVupw9iM4XD;

1.22
date	2016.01.22.00.38.53;	author krw;	state Exp;
branches;
next	1.21;
commitid	x0tMj8kuzhFIVdU1;

1.21
date	2016.01.12.20.09.39;	author krw;	state Exp;
branches;
next	1.20;
commitid	WFEddFcNLm6A2VYQ;

1.20
date	2016.01.12.15.32.08;	author krw;	state Exp;
branches;
next	1.19;
commitid	jkbr5rI0RhKaoKmr;

1.19
date	2016.01.11.18.43.06;	author krw;	state Exp;
branches;
next	1.18;
commitid	qS6fX5yqWMkDVbPr;

1.18
date	2010.08.26.17.55.10;	author jmc;	state Exp;
branches;
next	1.17;

1.17
date	2010.08.21.06.46.52;	author ray;	state Exp;
branches;
next	1.16;

1.16
date	2010.05.25.20.57.07;	author jmc;	state Exp;
branches;
next	1.15;

1.15
date	2010.05.25.19.01.32;	author deraadt;	state Exp;
branches;
next	1.14;

1.14
date	2007.05.31.19.19.46;	author jmc;	state Exp;
branches;
next	1.13;

1.13
date	2006.04.27.19.52.21;	author martin;	state Exp;
branches;
next	1.12;

1.12
date	2005.04.25.01.32.16;	author martin;	state Exp;
branches;
next	1.11;

1.11
date	2003.06.03.13.16.08;	author jmc;	state Exp;
branches;
next	1.10;

1.10
date	2003.02.18.07.51.09;	author jmc;	state Exp;
branches;
next	1.9;

1.9
date	2003.02.09.07.26.45;	author jmc;	state Exp;
branches;
next	1.8;

1.8
date	2003.01.06.07.00.10;	author cloder;	state Exp;
branches;
next	1.7;

1.7
date	2001.12.21.16.59.43;	author mpech;	state Exp;
branches;
next	1.6;

1.6
date	2001.12.21.11.41.50;	author mpech;	state Exp;
branches;
next	1.5;

1.5
date	2001.12.13.20.16.48;	author mpech;	state Exp;
branches;
next	1.4;

1.4
date	2001.10.12.05.17.01;	author drahn;	state Exp;
branches;
next	1.3;

1.3
date	2001.08.02.18.37.34;	author mpech;	state Exp;
branches;
next	1.2;

1.2
date	2001.04.22.14.02.00;	author drahn;	state Exp;
branches;
next	1.1;

1.1
date	2001.03.24.00.13.49;	author drahn;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.03.24.00.13.49;	author drahn;	state Exp;
branches;
next	;


desc
@@


1.31
log
@A disk name of /dev/wd0c doesn't work. Correct verbiage and example.

Discovered by rpe@@. Tweaked by schwarze@@.

ok rpe@@ schwarze@@ jmc@@ deraadt@@
@
text
@.\"	$OpenBSD: pdisk.8,v 1.30 2016/01/28 07:57:19 jmc Exp $
.\"
.\" Copyright 1996,1997,1998 by Apple Computer, Inc.
.\"              All Rights Reserved
.\"
.\" Permission to use, copy, modify, and distribute this software and
.\" its documentation for any purpose and without fee is hereby granted,
.\" provided that the above copyright notice appears in all copies and
.\" that both the copyright notice and this permission notice appear in
.\" supporting documentation.
.\"
.\" APPLE COMPUTER DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE
.\" INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS
.\" FOR A PARTICULAR PURPOSE.
.\"
.\" IN NO EVENT SHALL APPLE COMPUTER BE LIABLE FOR ANY SPECIAL, INDIRECT, OR
.\" CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
.\" LOSS OF USE, DATA OR PROFITS, WHETHER IN ACTION OF CONTRACT,
.\" NEGLIGENCE, OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION
.\" WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
.\"
.Dd $Mdocdate: January 28 2016 $
.Dt PDISK 8
.Os
.Sh NAME
.Nm pdisk
.Nd HFS(DPME) partition maintenance program
.Sh SYNOPSIS
.Nm pdisk
.Op Fl lr
.Ar disk
.Sh DESCRIPTION
.Nm
is a menu driven program which partitions disks using the standard Apple
disk partitioning scheme described in
.Dq Inside Macintosh: Devices .
It does not support the Intel/DOS partitioning scheme supported by
.Xr fdisk 8 .
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl l
List the partition map for the specified
.Ar disk .
.It Fl r
Prevents
.Nm
from writing to the disk.
.It Ar disk
Specify the
.Ar disk
to operate on.
It can be specified either by its full pathname or an abbreviated disk form.
In its abbreviated form, the path to the device and the
.Sq r
denoting
.Dq raw device
are omitted, with the partition letter being optional.
For example, the first IDE disk can be specified as either
.Pa /dev/rwd0c ,
.Pa wd0c ,
or
.Pa wd0 .
.El
.Sh COMMAND MODE
The list of commands and their explanations are given below.
.Bl -tag -width "update"
.It Em ?\&
verbose command help
.It Em C
create a partition of a specified type
.It Em c
create an
.Ox
partition
.It Em d
delete a partition
.It Em f
full display of a partition
.It Em h
command help
.It Em i
(re)initialize the partition map
.It Em n
(re)name a partition
.It Em P
show the partition map's data structures
.It Em p
print the partition map
.It Em q
quit editing
.It Em r
reorder (swap) disk positions of two entries in the partition map
.It Em s
change the size of the partition map
.It Em t
change the type of a partition
.It Em w
write the partition map to disk
.El
.Pp
Commands which take arguments prompt for each argument not specified
in the original command.
You can type any number of the arguments separated by spaces.
.Pp
Partitions are always specified by their number,
which is the index of the partition entry in the partition map.
.Pp
The index numbers of partitions will change if partitions are created,
deleted or reordered.
.Pp
Creating more than fifteen partitions is not advised, for
compatibility reasons.
.Pp
The
.Em c
(create an
.Ox
partition) and
.Em C
(create a partition of a specified type)
commands are the only ones with complicated arguments.
.Pp
The first argument is the base address (in blocks) of the partition.
Besides a raw number, you can also specify a partition number followed
by the letter 'p' to indicate that the first block of the new partition should
be the same as the first block of that existing free space partition.
.Pp
The second argument is the length of the partition in blocks.
This can be a raw number or can be a partition number followed by the
letter 'p' to use the size of that partition or can be a number followed
by 'k', 'm', 'g', or 't' to indicate the size in kilobytes, megabytes,
gigabytes or terabytes respectively.
(These are powers of 1024, of course, not powers of 1000.)
.Pp
The third argument is the name of the partition.
This can be a single word without quotes, or a string surrounded by
single or double quotes.
.Pp
For the
.Em C
command only, the fourth argument is the partition type.
This can be a single word without quotes, or a string surrounded by
single or double quotes.
The
.Em c
command automatically uses the type
.Ox .
.Pp
The
.Em n
(name) command allows the name of a partition to be changed.
Note that the various "Apple_Driver" partitions depend
on the name field for proper functioning.
.Sh SEE ALSO
.Xr disklabel 8 ,
.Xr fdisk 8 ,
.Xr newfs 8
.Sh HISTORY
The
.Nm
was originally developed for MkLinux.
.Pp
It was ported to
.Ox
2.9 by Dale Rahn.
.Sh AUTHORS
.An Eryk Vershen
@


1.30
log
@more tweaks; ok krw
@
text
@d1 1
a1 1
.\"	$OpenBSD: pdisk.8,v 1.29 2016/01/28 01:07:39 krw Exp $
d54 1
a54 1
In its abbreviated form, the path to the device, the
d57 2
a58 2
.Dq raw device ,
and the partition letter, can all be omitted.
d61 1
a61 1
.Pa /dev/wd0c ,
d63 1
a63 1
.Ar wd0 .
@


1.29
log
@Tweak verbiage for 'r' (reorder) command.
@
text
@d1 1
a1 1
.\"	$OpenBSD: pdisk.8,v 1.28 2016/01/27 20:24:50 krw Exp $
d22 1
a22 1
.Dd $Mdocdate: January 27 2016 $
d117 3
a119 1
(create an OpenBSD partition) and
d122 1
a122 1
are the only one with complicated arguments.
d147 2
a148 1
command automatically uses the type OpenBSD.
@


1.28
log
@Clear out some repetitive and pointless verbiage. Shuffle other
verbiage around to make things clearer.
@
text
@d1 1
a1 1
.\"	$OpenBSD: pdisk.8,v 1.27 2016/01/27 20:11:00 krw Exp $
d93 1
a93 1
reorder an entry in the partition map
@


1.27
log
@Tweak some verbiage.
@
text
@d1 1
a1 1
.\"	$OpenBSD: pdisk.8,v 1.26 2016/01/27 17:21:19 jmc Exp $
d102 3
a104 10
Commands which take arguments prompt for each argument in turn.
You can also type any number of the arguments separated by spaces
and those prompts will be skipped.
The only exception to typeahead are the confirmation prompts on the
.Em i
and
.Em w
commands.
The idea being that if we expect you to confirm the decision we
shouldn't undermine that by allowing you to be precipitate about it.
d108 3
a110 3
Most of the commands will change the index numbers of all partitions
after the affected partition.
You are advised to print the partition map as frequently as necessary.
d117 5
a121 1
(create new partition) command is the only one with complicated arguments.
d126 1
d133 2
a134 1
The last argument is the name of the partition.
a136 2
The type of the created partition is the correct type for
.Ox .
d138 5
a143 2
.Em C
command is identical to the
d145 1
a145 2
command, with the addition of a partition type argument after the
other arguments.
a151 18
.Pp
The
.Em r
(reorder) command allows the index number of partitions to be changed.
The index numbers are constrained to be a contiguous sequence.
.Pp
The
.Em t
(change type) command allows the type of an existing partition to be changed.
Examples of valid partition types are: Apple_Free, Apple_HFS, and
.Ox .
The
.Em i
(initialize) command initializes the partition map.
.Pp
The
.Em w
(write) command writes the partition map out.
d159 1
a159 1
utility was originally developed for MkLinux.
@


1.26
log
@tweak previous; ok krw
@
text
@d1 1
a1 1
.\"	$OpenBSD: pdisk.8,v 1.25 2016/01/27 15:56:47 krw Exp $
d71 1
a71 1
create a partition of the specified type
d79 1
a79 1
full display of the specified entry
d97 1
a97 1
change the specified partition's type
d99 1
a99 1
write the partition map
@


1.25
log
@Remove some lies and pointless verbiage. Tweak HISTORY.
@
text
@d1 1
a1 1
.\"	$OpenBSD: pdisk.8,v 1.24 2016/01/27 14:19:59 krw Exp $
d164 1
@


1.24
log
@Check block 0 signature, physical block size and physical block count when
reading partition map.

Check for unmapped physical blocks and overlapping partitions when reading
partition map.

No need for duplicate checks in validate_map(), so remove validate.c from
build and 'v' command from code and docs.
@
text
@d1 1
a1 1
.\"	$OpenBSD: pdisk.8,v 1.23 2016/01/22 07:41:14 jmc Exp $
d22 1
a22 1
.Dd $Mdocdate: January 22 2016 $
d132 2
a133 2
by 'k', 'm', or 'g' to indicate the size in kilobytes, megabytes, or gigabytes
respectively.
a150 1
The name must not contain any spaces.
a152 1
I am not aware of any other partition types with this limitation.
a163 2
.Pp
The
d165 1
a165 3
(initialize) command prompts for the size of the disk.
This was done to get around a bug in the kernel where it reports the wrong
size for the disk.
d169 1
a169 7
(write) command does write the partition map out,
but there is currently a bug in the interaction between the
disk and the kernel where
.Nm disklabel
.Fl c
.Ar disk
must be issued to cause the kernel to reinterpret the new label.
d178 4
a183 11
.Sh BUGS
Some people believe there should really be just one disk partitioning utility.
.Pp
.Nm
should be able to create HFS partitions that work.
.Pp
Filesystem volume names are out of place in a partition utility.
This utility supports HFS volume names, but not volume names
of any other filesystem types.
.Pp
Even more help should be available during user input.
@


1.23
log
@escape punctuation to have it mark up properly;
@
text
@d1 1
a1 1
.\"	$OpenBSD: pdisk.8,v 1.22 2016/01/22 00:38:53 krw Exp $
a97 2
.It Em v
validate the partition map
@


1.22
log
@Nuke 'expert' mode and the enabling, undocumented, '-d' flag by
just making all the commands available all the time. Document the
newly available commands.

Remove the former 'P' command (list partitions in base address
order) and use 'P' from expert mode (show map data structures).

Stop accepting uppercase aliases for commands documented as lower
case.

Bring the 'h' help text and man pages into agreement.

ok jasper@@ millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: pdisk.8,v 1.21 2016/01/12 20:09:39 krw Exp $
d22 1
a22 1
.Dd $Mdocdate: January 12 2016 $
d68 1
a68 1
.It Em ?
@


1.21
log
@Use normal err/errx/warn/warnx rather than handrolling new ones. Move
usage() to pdisk.c and nuke do_help() and '-h'.

ok jasper@@ deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: pdisk.8,v 1.20 2016/01/12 15:32:08 krw Exp $
d43 1
a43 1
List the partition tables for the specified
d68 12
a81 4
.It Em p
print the partition table
.It Em P
print ordered by base address
d83 1
a83 9
initialize partition map
.It Em s
change size of partition map
.It Em c
create new partition (standard
.Ox
type)
.It Em C
create with type also specified
d86 6
a91 2
.It Em d
delete a partition
d93 3
a95 1
reorder partition entry in map
d97 3
a99 1
change the type of an existing partition
d101 1
a101 3
write the partition table
.It Em q
quit editing (don't save changes)
d119 1
a119 1
You are advised to print the table as frequently as necessary.
@


1.20
log
@Retire '-i', a poorly documented interactive mode that tries to
mimic the 20th century MacOS version of pdisk more closely than the
usual interactive editor. One set of commands is enough for anyone.

ok jasper@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: pdisk.8,v 1.19 2016/01/11 18:43:06 krw Exp $
d22 1
a22 1
.Dd $Mdocdate: January 11 2016 $
d30 1
a30 1
.Op Fl hlr
a41 4
.It Fl h
Prints a rather lame set of help messages for the
.Nm
program.
@


1.19
log
@Remove '-v' and related version handling. Use strncasecmp() instead
of handrolled local istrncmp(). No need to compile util.c anymore.

ok deraadt@@ jasper@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: pdisk.8,v 1.18 2010/08/26 17:55:10 jmc Exp $
d22 1
a22 1
.Dd $Mdocdate: August 26 2010 $
d30 1
a30 1
.Op Fl hilr
a45 4
.It Fl i
Causes
.Nm
to go into an interactive mode similar to the Mac OS version of the program.
@


1.18
log
@- fdisk(8), not fdisk(1)
- zap trailing whitespace
@
text
@d1 1
a1 1
.\"	$OpenBSD: pdisk.8,v 1.17 2010/08/21 06:46:52 ray Exp $
d22 1
a22 1
.Dd $Mdocdate: August 21 2010 $
d30 1
a30 1
.Op Fl hilrv
a56 2
.It Fl v
Prints version number of the program.
@


1.17
log
@Use .Dq for double quotes and properly .Xr fdisk(1).

OK jmc
@
text
@d1 1
a1 1
.\"	$OpenBSD: pdisk.8,v 1.16 2010/05/25 20:57:07 jmc Exp $
d22 1
a22 1
.Dd $Mdocdate: May 25 2010 $
d35 1
a35 1
disk partitioning scheme described in 
d38 1
a38 1
.Xr fdisk 1 .
@


1.16
log
@no Pp before/after Sh/Ss;
@
text
@d1 1
a1 1
.\"	$OpenBSD: pdisk.8,v 1.15 2010/05/25 19:01:32 deraadt Exp $
d35 2
a36 1
disk partitioning scheme described in "Inside Macintosh: Devices".
d38 1
a38 1
.Em fdisk .
d67 1
a67 1
.Qq raw device ,
@


1.15
log
@use opendev(), as requested in 6373.  document this using text borrowed from
disklabel(8), and while at it, fix the usage code to not be utterly distasteful
ok drahn
@
text
@d1 1
a1 1
.\"	$OpenBSD: pdisk.8,v 1.14 2007/05/31 19:19:46 jmc Exp $
d22 1
a22 1
.Dd $Mdocdate: May 31 2007 $
a73 1
.Pp
@


1.14
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: pdisk.8,v 1.13 2006/04/27 19:52:21 martin Exp $
d22 1
a22 1
.Dd $Mdocdate$
d30 2
a31 6
.Op Fl h
.Op Fl i
.Op Fl l
.Op Fl r
.Op Fl v
.Ar device
a37 15
The
.Ar device
is usually one of the following:
.Pp
.Pa /dev/sd0c
.Pa /dev/sd1c
.Pa /dev/sd2c
.Pa /dev/sd3c
.Pa /dev/sd4c
.Pa /dev/sd5c
.Pa /dev/sd6c
.Pa /dev/wd0c
.Pa /dev/wd1c
.Pa /dev/wd2c
.Pa /dev/wd3c
d51 1
a51 1
.Ar devices .
d55 1
a55 1
from writing to the device.
d58 15
a74 5
An argument which is simply the name of a
.Ar device
indicates that
.Nm
should edit the partition table of that device.
d175 1
a175 1
(initialize) command prompts for the size of the device.
d177 1
a177 1
size for the device.
d186 1
a186 1
.Ar device
@


1.13
log
@update for pdisk 0.8a2, from NetBSD, retaining our local changes;
summing it up:

- Clean up sources - fix naming, delete old email addresses
- Added support for display of Mac volume names
- Fix block 0 display to show logical offset of drivers
- Require confirmation of quit without write
- Fix iteration to not complain about missing devices
- Warn when creating/writing a map with more than 15 entries

and, most important, add do_update_dpme() which allows us to partition
OpenBSD slices without previous MacOS setup.

Tested with shared MacOS install on macppc, procedure there remains the
same.

grammer and spelling help and ok jmc@@

ok miod@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: pdisk.8,v 1.12 2005/04/25 01:32:16 martin Exp $
d22 1
a22 1
.Dd April 11, 2006
@


1.12
log
@- no longer macppc only
- intel/dos->Intel/DOS
- standard way of writing 'Mac OS'
@
text
@d1 1
a1 1
.\"	$OpenBSD: pdisk.8,v 1.11 2003/06/03 13:16:08 jmc Exp $
d22 1
a22 1
.Dd September 26, 1997
a29 1
.Op Fl c
a59 5
.It Fl c
Causes
.Nm
to always ignore the device size listed in the partition table
and compute the device size by other means.
d166 1
d199 6
a204 1
.Xr fdisk 8
d206 1
a206 1
.An Eryk Vershen Aq eryk@@apple.com .
d212 4
@


1.11
log
@- section reorder
- some mdoc fixes
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d23 1
a23 1
.Dt PDISK 8 macppc
d41 1
a41 1
It does not support the intel/dos partitioning scheme supported by
d73 1
a73 1
to go into an interactive mode similar to the MacOS version of the program.
@


1.10
log
@copyrights added;

bootpef(8), pppd(8): Carnegie Mellon
map-mbone(8), mrinfo(8): Xerox
pdisk(8): Apple
awk(1): Lucent
sectok(3): University of Michigan
@
text
@d1 1
d21 1
a21 1
.\" 
d149 1
a149 1
be the same as the first block of that existing free  space partition.
d159 2
a160 1
The type of the created partition is the correct type for OpenBSD.
d184 2
a185 1
Examples of valid partition types are: Apple_Free, Apple_HFS, and OpenBSD.
d202 5
a213 5
.Sh SEE ALSO
.Xr disklabel 8 ,
.Xr fdisk 8
.Sh AUTHORS
.An Eryk Vershen Aq eryk@@apple.com .
@


1.9
log
@typos;
@
text
@d1 20
@


1.8
log
@typo: s/initalize/initialize
@
text
@d26 11
a36 11
/dev/sd0c
/dev/sd1c
/dev/sd2c
/dev/sd3c
/dev/sd4c
/dev/sd5c
/dev/sd6c
/dev/wd0c
/dev/wd1c
/dev/wd2c
/dev/wd3c
d77 1
a77 1
(print ordered by base address)
d114 1
a114 1
which the index of the partition entry in the partition map.
@


1.7
log
@Finish mdoc convert (while i'm here):
o) add arch name do .Dt tag;
o) sort arguments in .SYNOPSIS and .DESCRIPTION;
o) sort SEE ALSO;
o) .BR -> .Em;
o) .br -> .Pp;
o) our email format is: .An ... Aq <...>;
o) minor mdoc changes;

millert@@ ok;
@
text
@d166 1
a166 1
(initalize) command prompts for the size of the device.
@


1.6
log
@Initial patch for a new mdoc issue.
Powered by @@mantoya:
o) kill extra line in the end of file;
o) kill extra space in the end of line;
o) replace blank lines with .Pp;

millert@@ ok
@
text
@d2 1
a2 1
.Dt PDISK 8
d9 1
d14 1
a14 1
.Op Fl c
d21 1
a21 1
.BR fdisk .
d40 5
a44 2
.It Fl v
Prints version number of the program.
d55 1
a55 3
.Ar devices
.
.Tp
d60 4
a63 7
.TP
.It Fl c
Causes
.Nm
to always ignore the device size listed in the partition table
and compute the device size by other means.
.SH "Editing Partition Tables"
d65 1
a65 1
.I device
a68 1
.El
a70 1
.Pp
d184 1
a184 1
.br
d187 2
a188 2
.Xr fdisk 8 , 
.Xr disklabel 8
d190 1
a190 1
Eryk Vershen (eryk@@apple.com)
@


1.5
log
@o) start new sentence on a new line;
o) wrap long lines;
o) fix bogus .Xr usage;
o) we don't like blank lines;
o) always close .Bl tags;
o) OpenBSD -> .Ox;
o) don't like .Pp before .Ss;

millert@@ ok;
@
text
@d19 1
a19 1
It does not support the intel/dos partitioning scheme supported by 
d24 1
a24 1

a35 1

d104 1
a104 1

d115 1
a115 1

d121 1
a121 1

d124 1
a124 1

d142 1
a142 1

d149 1
a149 1

d156 1
a156 1

d161 1
a161 1

d166 1
a166 1

d172 1
a172 1

a181 1

@


1.4
log
@Manpage changes to go with addition of the 't' command, and cleanup
By Alexander Guy.
@
text
@d87 3
a89 1
create new partition (standard OpenBSD type)
@


1.3
log
@o) .Sh AUTHOR -> .Sh AUTHORS;
o) .Sh EXAMPLE -> .Sh EXAMPLES;
o) Delete .Sh OPTIONS. Text moved to .Sh DESCRIPTION;

millert@@ ok
@
text
@d87 1
a87 1
create new partition (standard MkLinux type)
d96 2
d121 2
a122 3
Creating more than fifteen partitions is not advised.
There is currently a bug in the some (all?) of the kernels which causes
access to the whole disk fail if more than fifteen partitions are in the map.
d140 1
a140 1
The type of the created partition is the correct type for MkLinux.
d160 5
@


1.2
log
@Update pdisk manpage to match formatting for other manpages, corrections
appropriate for openbsd.
@
text
@d186 1
a186 1
.Sh AUTHOR
@


1.1
log
@Initial revision
@
text
@d1 16
a16 20
.TH PDISK 8 "26 September 1997" "MkLinux DR2" "Linux Programmer's Manual"
.SH NAME
pdisk \- Apple partition table editor for Linux
.SH SYNOPSIS
.B pdisk
.B "[\-h|\--help]"
.br
.B pdisk
.B "[\-i|\--interactive]"
.br
.B pdisk
.B "[\-l|\--list [name ...]]"
.br
.B pdisk
device ...
.br
.B pdisk
.B "[\-v|\--version] [\-r|\--readonly] [\-abbr] [\--logical] [\-c|\--compute_size]"
.SH DESCRIPTION
.B pdisk
d22 1
a22 1
.I device
d25 18
a42 38
.nf
.RS
/dev/sda
/dev/sdb
/dev/sdc
/dev/sdd
/dev/sde
/dev/sdf
/dev/sdg
/dev/hda
/dev/hdb

.RE
.fi
MkLinux interprets device names differently than standard Linux.
In MkLinux /dev/sda is the device at SCSI id 0, /dev/sdb is the device at SCSI
id 1, and so on.
In standard Linux /dev/sda is the first hard disk on the SCSI bus (i.e. the
one with the lowest id), /dev/sdb is the second hard disk, and so on.
The
.I partition
is a
.I device
name followed by a partition number.
The partition number is the index (starting from one) of the partition
map entry in the partition map.
For example,
.B /dev/sda2
is the partition described by the second entry in the partiton map on /dev/sda.

.SH OPTIONS
.TP
.B \-v | \--version
Prints version number of the
.B pdisk
program.
.TP
.B \-h | \--help
d44 1
a44 1
.B pdisk
d46 1
a46 2
.TP
.B \-i | \--interactive
d48 1
a48 1
.B pdisk
d50 6
a55 17
.TP
.B \-l | \--list
If no
.IR name s
are present then lists the partition tables for
.BR /dev/sda ,
.BR /dev/sdb ,
.BR /dev/sdc ,
.BR /dev/sdd ,
.BR /dev/sde ,
.BR /dev/sdf ,
and
.BR /dev/sdg .
Otherwise, lists the partition tables for the specified
.IR name s.
.TP
.B \-r | \--readonly
d57 1
a57 1
.B pdisk
d60 1
a60 1
.B \-c | \--compute_size
d62 1
a62 1
.B pdisk
d69 1
a69 1
.B pdisk
d71 30
a101 19
The current top level editing commands are:

.nf
.RS
h    command help
p    print the partition table
P    (print ordered by base address)
i    initialize partition map
s    change size of partition map
c    create new partition (standard MkLinux type)
C    (create with type also specified)
n    (re)name a partition
d    delete a partition
r    reorder partition entry in map
w    write the partition table
q    quit editing (don't save changes)

.RE
.fi
d106 1
a106 1
.B i
d108 1
a108 1
.B w
d124 1
a124 1
.B c
d142 1
a142 1
.B C
d144 1
a144 1
.B c
d149 1
a149 1
.B n
d156 1
a156 1
.B r
d161 1
a161 1
.B i
d167 1
a167 1
.B w
d169 6
a174 3
but there is currently a bug in the interaction between MkLinux and Mach
which causes the partition map not to be reinterpreted.
In order to use the new partition map you must reboot.
d176 1
a176 1
.SH BUGS
d178 2
a179 2
.br
.B pdisk
d183 4
a186 5
.SH "SEE ALSO"
.BR fdisk (8), 
.BR mkswap (8),
.BR mkfs (8)
.SH AUTHOR
@


1.1.1.1
log
@Import of pdisk from apple, BSD licensed code. Archive dated Feb 18 1998 
This is a HFS partition editing tool.
@
text
@@
