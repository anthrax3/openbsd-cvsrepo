head	1.32;
access;
symbols
	OPENBSD_6_1:1.31.0.4
	OPENBSD_6_1_BASE:1.31
	OPENBSD_6_0:1.29.0.4
	OPENBSD_6_0_BASE:1.29
	OPENBSD_5_9:1.29.0.2
	OPENBSD_5_9_BASE:1.29
	OPENBSD_5_8:1.28.0.4
	OPENBSD_5_8_BASE:1.28
	OPENBSD_5_7:1.27.0.2
	OPENBSD_5_7_BASE:1.27
	OPENBSD_5_6:1.26.0.6
	OPENBSD_5_6_BASE:1.26
	OPENBSD_5_5:1.26.0.4
	OPENBSD_5_5_BASE:1.26
	OPENBSD_5_4:1.25.0.12
	OPENBSD_5_4_BASE:1.25
	OPENBSD_5_3:1.25.0.10
	OPENBSD_5_3_BASE:1.25
	OPENBSD_5_2:1.25.0.8
	OPENBSD_5_2_BASE:1.25
	OPENBSD_5_1_BASE:1.25
	OPENBSD_5_1:1.25.0.6
	OPENBSD_5_0:1.25.0.4
	OPENBSD_5_0_BASE:1.25
	OPENBSD_4_9:1.25.0.2
	OPENBSD_4_9_BASE:1.25
	OPENBSD_4_8:1.24.0.4
	OPENBSD_4_8_BASE:1.24
	OPENBSD_4_7:1.24.0.2
	OPENBSD_4_7_BASE:1.24
	OPENBSD_4_6:1.22.0.8
	OPENBSD_4_6_BASE:1.22
	OPENBSD_4_5:1.22.0.4
	OPENBSD_4_5_BASE:1.22
	OPENBSD_4_4:1.22.0.2
	OPENBSD_4_4_BASE:1.22
	OPENBSD_4_3:1.19.0.4
	OPENBSD_4_3_BASE:1.19
	OPENBSD_4_2:1.19.0.2
	OPENBSD_4_2_BASE:1.19
	OPENBSD_4_1:1.18.0.4
	OPENBSD_4_1_BASE:1.18
	OPENBSD_4_0:1.18.0.2
	OPENBSD_4_0_BASE:1.18
	OPENBSD_3_9:1.17.0.4
	OPENBSD_3_9_BASE:1.17
	OPENBSD_3_8:1.17.0.2
	OPENBSD_3_8_BASE:1.17
	OPENBSD_3_7:1.11.0.2
	OPENBSD_3_7_BASE:1.11
	OPENBSD_3_6:1.9.0.2
	OPENBSD_3_6_BASE:1.9
	OPENBSD_3_5:1.5.0.16
	OPENBSD_3_5_BASE:1.5
	OPENBSD_3_4:1.5.0.14
	OPENBSD_3_4_BASE:1.5
	OPENBSD_3_3:1.5.0.12
	OPENBSD_3_3_BASE:1.5
	OPENBSD_3_2:1.5.0.10
	OPENBSD_3_2_BASE:1.5
	OPENBSD_3_1:1.5.0.8
	OPENBSD_3_1_BASE:1.5
	OPENBSD_3_0:1.5.0.6
	OPENBSD_3_0_BASE:1.5
	OPENBSD_2_9:1.5.0.4
	OPENBSD_2_9_BASE:1.5
	OPENBSD_2_8:1.5.0.2
	OPENBSD_2_8_BASE:1.5
	OPENBSD_2_7:1.4.0.2
	OPENBSD_2_7_BASE:1.4
	OPENBSD_2_6:1.3.0.10
	OPENBSD_2_6_BASE:1.3
	OPENBSD_2_5:1.3.0.8
	OPENBSD_2_5_BASE:1.3
	OPENBSD_2_4:1.3.0.6
	OPENBSD_2_4_BASE:1.3
	OPENBSD_2_3:1.3.0.4
	OPENBSD_2_3_BASE:1.3
	OPENBSD_2_2:1.3.0.2
	OPENBSD_2_2_BASE:1.3
	OPENBSD_2_1:1.1.0.2
	OPENBSD_2_1_BASE:1.1;
locks; strict;
comment	@# @;


1.32
date	2017.08.10.13.44.48;	author benno;	state Exp;
branches;
next	1.31;
commitid	JAyLG49m6E46ZhNd;

1.31
date	2016.09.04.09.41.03;	author claudio;	state Exp;
branches;
next	1.30;
commitid	YKJFJUlkAumMxHj6;

1.30
date	2016.09.03.14.23.14;	author phessler;	state Exp;
branches;
next	1.29;
commitid	rJW7JJ1v8NrTSfc8;

1.29
date	2015.10.24.11.53.41;	author bluhm;	state Exp;
branches;
next	1.28;
commitid	KcsrivahFDkSPLJZ;

1.28
date	2015.07.18.00.05.02;	author phessler;	state Exp;
branches;
next	1.27;
commitid	w4H9LC8cbuDZ9nOJ;

1.27
date	2015.02.06.03.22.00;	author reyk;	state Exp;
branches;
next	1.26;
commitid	2ShTul7wSa8iiu5L;

1.26
date	2014.01.22.06.23.37;	author claudio;	state Exp;
branches;
next	1.25;

1.25
date	2010.09.04.08.06.09;	author blambert;	state Exp;
branches;
next	1.24;

1.24
date	2009.12.01.16.16.46;	author reyk;	state Exp;
branches;
next	1.23;

1.23
date	2009.10.30.17.32.34;	author jsg;	state Exp;
branches;
next	1.22;

1.22
date	2008.05.07.06.06.25;	author claudio;	state Exp;
branches;
next	1.21;

1.21
date	2008.05.06.03.40.31;	author claudio;	state Exp;
branches;
next	1.20;

1.20
date	2008.04.28.11.36.14;	author norby;	state Exp;
branches;
next	1.19;

1.19
date	2007.06.04.12.23.43;	author henning;	state Exp;
branches;
next	1.18;

1.18
date	2006.03.30.12.11.37;	author claudio;	state Exp;
branches;
next	1.17;

1.17
date	2005.05.27.04.55.27;	author mcbride;	state Exp;
branches;
next	1.16;

1.16
date	2005.03.30.08.02.34;	author deraadt;	state Exp;
branches;
next	1.15;

1.15
date	2005.03.30.07.59.52;	author henning;	state Exp;
branches;
next	1.14;

1.14
date	2005.03.30.06.12.38;	author henning;	state Exp;
branches;
next	1.13;

1.13
date	2005.03.30.06.02.52;	author henning;	state Exp;
branches;
next	1.12;

1.12
date	2005.03.30.05.20.18;	author henning;	state Exp;
branches;
next	1.11;

1.11
date	2004.09.24.01.13.04;	author jaredy;	state Exp;
branches;
next	1.10;

1.10
date	2004.09.22.01.07.10;	author jaredy;	state Exp;
branches;
next	1.9;

1.9
date	2004.08.03.11.23.11;	author henning;	state Exp;
branches;
next	1.8;

1.8
date	2004.06.25.01.26.01;	author henning;	state Exp;
branches;
next	1.7;

1.7
date	2004.06.19.19.55.53;	author cedric;	state Exp;
branches;
next	1.6;

1.6
date	2004.06.06.17.08.23;	author cedric;	state Exp;
branches;
next	1.5;

1.5
date	2000.07.27.20.12.25;	author angelos;	state Exp;
branches;
next	1.4;

1.4
date	99.12.08.07.55.54;	author itojun;	state Exp;
branches;
next	1.3;

1.3
date	97.08.26.13.49.37;	author niklas;	state Exp;
branches;
next	1.2;

1.2
date	97.08.26.13.47.47;	author niklas;	state Exp;
branches;
next	1.1;

1.1
date	96.12.14.17.23.53;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.32
log
@allow "del" in addition to "delete"
from Denis Fondras, positive feedback from sthen@@ and deraadt@@
ok jca@@
@
text
@#!/bin/sh
# $OpenBSD: keywords.sh,v 1.31 2016/09/04 09:41:03 claudio Exp $
# $NetBSD: keywords.sh,v 1.2 1996/11/15 18:57:21 gwr Exp $
# @@(#)keywords	8.2 (Berkeley) 3/19/94
#
# WARNING!  If you change this file, re-run it!

# This program requires "new" awk (or GNU awk).
awk=${AWK:-awk}

# the following must be sorted
cat << _EOF_ | sort > _keywords.t1
add
bfd
blackhole
bgp
change
cloning
connected
del
delete
dst
exec
expire
flush
gateway
get
host
hopcount
iface
interface
ifa
ifp
in
inet
inet6
jumbo
label
link
llinfo
local
lock
lockrest
monitor
mpath
mpls
mplslabel
mtu
net
netmask
nobfd
nojumbo
nostatic
ospf
out
pop
prefixlen
priority
proto1
proto2
push
recvpipe
reject
rip
rtt
rttvar
sa
sendpipe
show
ssthresh
static
swap
_EOF_


################################################################
# Setup
################################################################

# This creates a stream of:
#	keyword KEYWORD
# (lower case, upper case).
tr a-z A-Z < _keywords.t1 |
paste _keywords.t1 - > _keywords.t2

################################################################
# Generate the h file
################################################################
exec > keywords.h

echo '/* $'OpenBSD'$ */

/* WARNING!  This file was generated by keywords.sh  */

struct keytab {
	char	*kt_cp;
	int	kt_i;
};

enum {
	K_NULL,'

$awk '{
	printf("\tK_%s,\n", $2);
}' < _keywords.t2

echo '};

struct keytab keywords[] = {'

$awk '{
	printf("\t{ \"%s\",\tK_%s },\n", $1, $2);
}' < _keywords.t2

echo '};
' # tail


################################################################
# Cleanup
################################################################

rm -f _keywords.t1 _keywords.t2
exit 0
@


1.31
log
@Make it possible to set the RTF_BFD flag in a change request. Also add a
nobfd option to turn it off again. While here also print the fmask in the
rtmsg dump so it is possible to figure out why something happens (or not).
OK phessler@@
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.30 2016/09/03 14:23:14 phessler Exp $
d20 1
@


1.30
log
@Add userland parts for BFD.  Can't work if you don't have it enabled in
the kernel.

OK claudio@@, henning@@
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.29 2015/10/24 11:53:41 bluhm Exp $
d50 1
@


1.29
log
@Removing xresolve from generating script has been forgotten.
OK mpi@@
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.28 2015/07/18 00:05:02 phessler Exp $
d14 1
@


1.28
log
@On systems with a full routing table (550k+), we often want to be able to
look at the routes with a priority, or to display all routes that do not
have a specific priority (normally, don't show bgp).

We are intentionally not updating netstat -r yet, as we do not have a
good flag to use.

first version from, and OK benno@@
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.27 2015/02/06 03:22:00 reyk Exp $
a69 1
xresolve
@


1.27
log
@Remove route/netstat -f encap in favor of ipsecctl -s flow.

OK deraadt@@
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.26 2014/01/22 06:23:37 claudio Exp $
d15 1
d18 1
d39 1
d51 1
d61 1
@


1.26
log
@Remove genmask support from route(8). It still will show them in monitor
or get but you can no longer set it. genmask will die soon since nobody
needs it. OK benno@@ and agreed by dlg@@
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.25 2010/09/04 08:06:09 blambert Exp $
a18 1
encap
@


1.25
log
@sort generated keywords in order to replace linear probe with bsearch(3)
(more people should know about how to properly use libc-provided tools)

make keywords.h depend upon keywords.sh, so that it gets automatically
rebuilt when keywords.sh is edited

ok claudio@@
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.24 2009/12/01 16:16:46 reyk Exp $
a23 1
genmask
@


1.24
log
@add "exec" keyword

ok jsg@@
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.23 2009/10/30 17:32:34 jsg Exp $
d11 2
a12 1
cat << _EOF_ > _keywords.t1
d110 1
a110 2
echo '	{ 0, 0 }
};
@


1.23
log
@The script that generates keywords.h wasn't updated when
mplslabel label was added, fix.
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.22 2008/05/07 06:06:25 claudio Exp $
d19 1
@


1.22
log
@Add support to show and modify rtm_priority.
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.21 2008/05/06 03:40:31 claudio Exp $
d42 1
@


1.21
log
@Add pop, push and swap options used by MPLS. OK norby@@
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.20 2008/04/28 11:36:14 norby Exp $
d50 1
@


1.20
log
@It is now possible to enter static MPLS routes into the kernel.

It is still not possible to set the desired opration for an entry.

ok claudio@@ laurent@@ dlg@@
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.19 2007/06/04 12:23:43 henning Exp $
d48 1
d52 1
d62 1
@


1.19
log
@remove IPX, agreed by many
libc and kernel side awaiting a libc major bump to piggyback to
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.18 2006/03/30 12:11:37 claudio Exp $
d30 1
d41 1
d47 1
@


1.18
log
@If an address family is specified do not print IPSec "routes". Additionally
add a -encap option to show only the IPSec part. OK hshoexer@@, henning@@
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.17 2005/05/27 04:55:27 mcbride Exp $
a31 1
ipx
@


1.17
log
@Experimental support for opportunitic use of jumbograms where only some hosts
on the local network support them.

This adds a new socket option, SO_JUMBO, and a new route flag,
RTF_JUMBO. If _both_ the socket option is set and the route for the host
has RTF_JUMBO set, ip_output will fragment the packet to the largest
possible size for the link, ignoring the card's MTU.

The semantics of this feature will be evolving rapidly; talk to us
if you intend to use it.

ok deraadt@@ marius@@
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.16 2005/03/30 08:02:34 deraadt Exp $
d18 1
@


1.16
log
@generated a .h file with spacing bugs
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.15 2005/03/30 07:59:52 henning Exp $
d32 1
d43 1
@


1.15
log
@make keywords.sh generate an enum for the keys
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.14 2005/03/30 06:12:38 henning Exp $
d79 2
a80 2
        char    *kt_cp;
        int      kt_i;
@


1.14
log
@nicer output
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.13 2005/03/30 06:02:52 henning Exp $
d82 3
a84 1
'
d87 1
a87 1
	printf("#define\tK_%s\t%d\n", $2, NR);
d90 2
a91 1
echo '
@


1.13
log
@get rid of the twisted keywords.[c|h] interaction and just let keywords.sh
put the defines and the table into the .h
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.12 2005/03/30 05:20:18 henning Exp $
d80 1
a80 1
        int     kt_i;
d92 1
a92 1
	printf("\t{ \"%s\", K_%s },\n", $1, $2);
@


1.12
log
@remove ccitt x.25 traces, ok theo
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.11 2004/09/24 01:13:04 jaredy Exp $
a68 1

d78 5
a82 6
extern struct keytab {
	char	*kt_cp;
	int	kt_i;
} keywords[];

' # defines follow
d88 2
a89 14

################################################################
# Generate the c file
################################################################
exec > keywords.c

echo '/* $'OpenBSD'$ */

/* WARNING!  This file was generated by keywords.sh  */

#include "keywords.h"

struct keytab keywords[] = {
' # initializers follow
d92 1
a92 1
	printf("\t{\"%s\", K_%s},\n", $1, $2);
d95 1
a95 1
echo '	{0, 0}
@


1.11
log
@kill osi and mask, ok henning
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.10 2004/09/22 01:07:10 jaredy Exp $
a54 1
x25
@


1.10
log
@remove -S, -src, -srcmask, and other source routing stuff.  ok henning
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.9 2004/08/03 11:23:11 henning Exp $
a36 1
mask
a42 1
osi
@


1.9
log
@display route labels with "route get", and allow them to be set
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.8 2004/06/25 01:26:01 henning Exp $
a54 2
src
srcmask
@


1.8
log
@remove netiso and netns code
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.7 2004/06/19 19:55:53 cedric Exp $
d32 1
@


1.7
log
@require RTF_MPATH to enter a multipath route with RTM_ADD.
route(8) takes a new -mpath modifier to enter a multipath route.
requested deraadt@@, ok itojun@@ mcbride@@ millert@@
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.6 2004/06/06 17:08:23 cedric Exp $
a31 1
iso
a58 1
xns
@


1.6
log
@add new "-src" and "-srcmask" modifiers to make it possible to add a source
selector part to the routing table entry. complements existing "-dst" and
"-dstmask". typical use:

   route add -src 20.20.20.22 20.20.20.21
   route add -src 192.168.1.0/24 -dst 192.168.2.0/24 20.20.20.21

useful for example to implement symetrical routing on multihomed boxes,
or to better select which packets to send to gif/tun/... tunnels.
new '-S' flag similar to netstat one. ok deraadt@@ mcbride@@
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.5 2000/07/27 20:12:25 angelos Exp $
d39 1
@


1.5
log
@Don't show or delete IPsec flows with the route command -- this was a
kludge to begin with, and it's about time we get rid of it.
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.4 1999/12/08 07:55:54 itojun Exp $
d54 2
@


1.4
log
@ipv6 support from KAME (needs no libc upgrade).  regen keywords.[ch].
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.3 1997/08/26 13:49:37 niklas Exp $
a17 1
encap
@


1.3
log
@Forgot about keyword.c's tag, regenned again
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.2 1997/08/26 13:47:47 niklas Exp $
d31 1
d45 1
@


1.2
log
@Move over -encap change to keywords.sh only made to keywords.h,
$OpenBSD$ tagging.  Added a missing extern specifier. Regenerated keywords.h
@
text
@d2 1
a2 1
# $OpenBSD: keywords.sh,v 1.2 1996/11/15 18:57:21 gwr Exp $
d98 1
a98 1
echo '/* $'NetBSD'$ */
@


1.1
log
@merge netbsd changes for show command
yet more buf oflows (provided by netbsd!)
an attempt at 64 bit cleanliness
-Wall
@
text
@d2 1
d18 1
d77 1
a77 1
echo '/* $'NetBSD'$ */
d81 1
a81 1
struct keytab {
@
