head	1.21;
access;
symbols
	OPENBSD_2_9:1.20.0.2
	OPENBSD_2_9_BASE:1.20
	OPENBSD_2_8:1.19.0.4
	OPENBSD_2_8_BASE:1.19
	OPENBSD_2_7:1.19.0.2
	OPENBSD_2_7_BASE:1.19
	OPENBSD_2_6:1.18.0.2
	OPENBSD_2_6_BASE:1.18
	OPENBSD_2_5:1.11.0.2
	OPENBSD_2_5_BASE:1.11
	OPENBSD_2_4:1.10.0.2
	OPENBSD_2_4_BASE:1.10
	OPENBSD_2_3:1.8.0.2
	OPENBSD_2_3_BASE:1.8
	OPENBSD_2_2:1.7.0.4
	OPENBSD_2_2_BASE:1.7
	OPENBSD_2_1:1.7.0.2
	OPENBSD_2_1_BASE:1.7
	OPENBSD_2_0:1.6.0.2
	OPENBSD_2_0_BASE:1.6;
locks; strict;
comment	@# @;


1.21
date	2001.05.30.02.11.45;	author deraadt;	state dead;
branches;
next	1.20;

1.20
date	2000.11.14.18.55.56;	author aaron;	state Exp;
branches;
next	1.19;

1.19
date	2000.03.18.22.55.58;	author aaron;	state Exp;
branches;
next	1.18;

1.18
date	99.10.05.20.08.03;	author aaron;	state Exp;
branches;
next	1.17;

1.17
date	99.07.08.05.20.14;	author kjell;	state Exp;
branches;
next	1.16;

1.16
date	99.07.08.00.05.21;	author deraadt;	state Exp;
branches;
next	1.15;

1.15
date	99.07.08.00.02.26;	author deraadt;	state Exp;
branches;
next	1.14;

1.14
date	99.07.07.10.50.10;	author aaron;	state Exp;
branches;
next	1.13;

1.13
date	99.07.04.16.06.38;	author aaron;	state Exp;
branches;
next	1.12;

1.12
date	99.07.04.15.34.52;	author aaron;	state Exp;
branches;
next	1.11;

1.11
date	99.02.10.22.12.53;	author deraadt;	state Exp;
branches;
next	1.10;

1.10
date	98.09.15.09.58.34;	author pattonme;	state Exp;
branches;
next	1.9;

1.9
date	98.05.18.03.36.46;	author art;	state Exp;
branches;
next	1.8;

1.8
date	98.01.26.04.13.42;	author dgregor;	state Exp;
branches;
next	1.7;

1.7
date	97.02.11.22.23.43;	author kstailey;	state Exp;
branches;
next	1.6;

1.6
date	96.07.18.05.08.09;	author dm;	state Exp;
branches;
next	1.5;

1.5
date	96.07.10.03.58.41;	author ccappuc;	state Exp;
branches;
next	1.4;

1.4
date	96.07.10.03.53.50;	author ccappuc;	state Exp;
branches;
next	1.3;

1.3
date	96.06.23.14.30.57;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	96.01.25.05.41.30;	author dm;	state Exp;
branches;
next	1.1;

1.1
date	96.01.07.02.33.36;	author dm;	state Exp;
branches;
next	;


desc
@@


1.21
log
@Remove ipf.  Darren Reed has interpreted his (old, new, whichever)
licence in a way that makes ipf not free according to the rules we
established over 5 years ago, at www.openbsd.org/goals.html (and those
same basic rules govern the other *BSD projects too).  Specifically,
Darren says that modified versions are not permitted.  But software
which OpenBSD uses and redistributes must be free to all (be they
people or companies), for any purpose they wish to use it, including
modification, use, peeing on, or even integration into baby mulching
machines or atomic bombs to be dropped on Australia.  Furthermore, we
know of a number of companies using ipf with modification like us, who
are now in the same situation, and we hope that some of them will work
with us to fill this gap that now exists in OpenBSD (temporarily, we
hope).
@
text
@.\"     $OpenBSD: ipfstat.8,v 1.20 2000/11/14 18:55:56 aaron Exp $
.Dd June 13, 1999
.Dt IPFSTAT 8
.Os
.Sh NAME
.Nm ipfstat
.Nd reports on packet filter statistics and filter lists
.Sh SYNOPSIS
.Nm ipfstat
.Op Fl aAfghIinosv
.Op Fl d Ar device
.Op Fl M Ar core
.Sh DESCRIPTION
By default,
.Nm
displays current kernel statistics gathered
as a result of applying the filters in place (if any) to packets going through
the kernel.
.Pp
When supplied with either
.Fl i
or
.Fl o ,
it will retrieve and display
the appropriate list of filter rules currently installed and in use by the
kernel.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl a
Display the accounting filter list and show bytes counted against each rule.
Used with
.Fl i
or
.Fl o .
.It Fl A
Display packet authentication statistics.
.It Fl d Ar device
Use
.Ar device
instead of
.Pa /dev/ipl
for interfacing with the kernel.
.It Fl f
Show fragment state information (statistics) and held state information (in
the kernel) if any is present.
.It Fl g
Show group information for active and inactive filter, accounting, and
authentication groups.
.It Fl h
Show per-rule the number of times each one scores a
.Dq hit .
For use in
combination with
.Fl i
or
.Fl o .
.It Fl i
Display the filter list used for the input side of the kernel IP processing.
.It Fl I
Swap between retrieving
.Dq inactive
and
.Dq active
filter list details.
For use in combination with
.Fl h .
.It Fl n
Show the rule number for each rule as it is printed.
.It Fl M Ar core
Extract values associated with the name list from the specified core
instead of the default
.Pa /dev/kmem .
.It Fl o
Display the filter list used for the output side of the kernel IP processing.
.It Fl s
Show packet/flow state information (statistics) and held state information (in
the kernel) if any is present.
.It Fl v
Turn verbose mode on.
Displays more debugging information.
.El
.Sh FILES
.Bl -tag -width /dev/ipstate -compact
.It Pa /dev/kmem
default kernel memory
.It Pa /dev/ipl
IP packet logging pseudo-device
.It Pa /dev/ipstate
IP filter state device
.El
.Sh SEE ALSO
.Xr ipftest 1 ,
.Xr ipf 4 ,
.Xr ipl 4 ,
.Xr ipnat 4 ,
.Xr ipf 5 ,
.Xr ipnat 5 ,
.Xr ipf 8 ,
.Xr ipmon 8 ,
.Xr ipnat 8 ,
.Pp
http://coombs.anu.edu.au/ipfilter/
.Sh BUGS
If you find any, please send email to me at darrenr@@pobox.com.
@


1.20
log
@Document the -g option; closes PR/1509 from mpech@@prosoft.org.lv.
@
text
@d1 1
a1 1
.\"     $OpenBSD: ipfstat.8,v 1.19 2000/03/18 22:55:58 aaron Exp $
@


1.19
log
@Remove hard sentence breaks, and some other cleanup along the way.
@
text
@d1 1
a1 1
.\"     $OpenBSD: ipfstat.8,v 1.18 1999/10/05 20:08:03 aaron Exp $
d10 1
a10 1
.Op Fl aAfhIinosv
d47 3
a105 1

@


1.18
log
@.Sh OPTIONS -> "The options are as follows:"
@
text
@d1 1
a1 1
.\"     $OpenBSD: ipfstat.8,v 1.17 1999/07/08 05:20:14 kjell Exp $
d62 2
a63 1
filter list details. For use in combination with
d77 2
a78 1
Turn verbose mode on. Displays more debugging information.
@


1.17
log
@Fix references to -i, -o and -h.
@
text
@d1 1
a1 1
.\"     $OpenBSD: ipfstat.8,v 1.16 1999/07/08 00:05:21 deraadt Exp $
d28 2
a29 2
.Sh OPTIONS
.Bl -tag -width "-d device"
@


1.16
log
@poof
@
text
@d1 1
a1 1
.\"     $OpenBSD: ipfstat.8,v 1.15 1999/07/08 00:02:26 deraadt Exp $
d52 3
a54 1
.Fl i .
d63 1
a63 1
.Fl i .
@


1.15
log
@cleanup; still needs kmem removal (terrible)
@
text
@d1 1
a1 1
.\"     $OpenBSD: ipfstat.8,v 1.14 1999/07/07 10:50:10 aaron Exp $
a12 1
.Op Fl N Ar system
a63 3
.It Fl N Ar system
Extract the name list from the specified system instead of the default
.Pa /bsd .
a77 2
.It Pa /bsd
default system
@


1.14
log
@The proper order of the ``introductory'' macros in a man page is .Dd/.Dt/.Os.
Out of the approximately 1450 man pages, only about 90 of them were wrong.
Thanks to kwesterback@@home.com for coming up with a script and patch to repair
this. The patch also inserted a .Os macro in the few man pages that were
missing one.
@
text
@d1 1
a1 1
.\"     $OpenBSD: ipfstat.8,v 1.13 1999/07/04 16:06:38 aaron Exp $
d3 1
a3 1
.Dt ipfstat 8
d12 2
a28 12
.Nm
examines
.Pa /dev/kmem
using the symbols
.Sy _fr_flags ,
.Sy _frstats ,
.Sy _filterin ,
and
.Sy _filterout .
To run and work, it needs to be able to read both
.Pa /dev/kmem
and the kernel itself.
d65 7
@


1.13
log
@some repairs
@
text
@d1 1
a1 1
.\"     $OpenBSD: ipfstat.8,v 1.12 1999/07/04 15:34:52 aaron Exp $
d3 1
a4 1
.Dt ipfstat 8
@


1.12
log
@new -mdoc man pages; kwesterback@@home.com
@
text
@d1 2
a2 2
.\"     $OpenBSD: ipfstat.8,v 1.11 1999/02/10 22:12:53 deraadt Exp $
.Dd 13 June, 1999
d13 1
a13 1
By default
d42 2
a43 2
Display the accounting filter list and show bytes counted against each rule. Used
with
d60 1
a60 1
.Sq hit .
d68 3
a70 3
.Sq inactive
/
.Sq active
d84 10
a93 7
.Pa /dev/kmem
.br
.Pa /dev/ipl
.br
.Pa /dev/ipstate
.br
.Pa /bsd
d108 1
@


1.11
log
@Xr repairs
@
text
@d1 47
a47 28
.\"     $OpenBSD: ipfstat.8,v 1.10 1998/09/15 09:58:34 pattonme Exp $
.TH ipfstat 8
.SH NAME
ipfstat \- reports on packet filter statistics and filter list
.SH SYNOPSIS
.B ipfstat
[
.B \-aAfhIinosv
] [
.B \-d
<device>
]
.SH DESCRIPTION
.PP
\fBipfstat\fP examines /dev/kmem using the symbols \fB_fr_flags\fP,
\fB_frstats\fP, \fB_filterin\fP, and \fB_filterout\fP.
To run and work, it needs to be able to read both /dev/kmem and the
kernel itself.
.PP
The default behaviour of \fBipfstat\fP
is to retrieve and display the accumulated statistics which have been
accumulated over time as the kernel has put packets through the filter.
.SH OPTIONS
.TP
.B \-a
Display the accounting filter list and show bytes counted against each rule.
.TP
.B \-A
d49 7
a55 5
.TP
.BR \-d \0<device>
Use a device other than \fB/dev/ipl\fP for interfacing with the kernel.
.TP
.B \-f
d58 7
a64 6
.TP
.B \-h
Show per-rule the number of times each one scores a "hit".  For use in
combination with \fB\-i\fP.
.TP
.B \-i
d66 10
a75 9
.TP
.B \-I
Swap between retrieving "inactive"/"active" filter list details.  For use
in combination with \fB\-i\fP.
.TP
.B \-n
Show the "rule number" for each rule as it is printed.
.TP
.B \-o
d77 1
a77 2
.TP
.B \-s
d80 5
a84 16
.TP
.B \-v
Turn verbose mode on.  Displays more debugging information.
.SH SYNOPSIS
The role of \fBipfstat\fP is to display current kernel statistics gathered
as a result of applying the filters in place (if any) to packets going in and
out of the kernel.  This is the default operation when no command line
parameters are present.
.PP
When supplied with either \fB\-i\fP or \fB\-o\fP, it will retrieve and display
the appropriate list of filter rules currently installed and in use by the
kernel.
.SH FILES
/dev/kmem
.br
/dev/ipl
d86 1
a86 1
/dev/ipstate
d88 1
a88 3
/bsd
.SH SEE ALSO
ipf(8), ipftest(1), ipnat(8), ipf(4), ipl(4), ipnat(4), ipf(5), ipnat(5), ipmon(8)
d90 12
d103 1
a103 1
.SH BUGS
@


1.10
log
@Updated to v3.2.9 of Darren's codebase. His code reimplements variable
locking, replaces u_long's with u_32_t to properly handle 64bit archs.
Wrapped OpenBSD specific preprocessor logic.
@
text
@d1 1
a1 1
.\"     $OpenBSD: ipfstat.8,v 1.9 1998/05/18 03:36:46 art Exp $
d79 1
a79 1
ipf(1), ipftest(1), ipnat(1), ipf(4), ipl(4), ipnat(4), ipf(5), ipnat(5), ipmon(8)
@


1.9
log
@ipfstat does not read from /vmunix
@
text
@d1 1
a1 1
.\"     $OpenBSD: ipfstat.8,v 1.8 1998/01/26 04:13:42 dgregor Exp $
d73 5
a77 1
/vmunix
d79 3
a81 1
ipf(1), ipfstat(1)
d83 1
a83 1
none known.
@


1.8
log
@IPF 3.2.3
@
text
@d1 1
a1 1
.\"     $OpenBSD$
d18 1
a18 1
kernel itself.  The kernel name defaults to \fB/vmunix\fP.
@


1.7
log
@IPF 1.3.7
@
text
@d1 1
d8 1
a8 1
.B \-hIinov
d27 3
@


1.6
log
@ipfilter 3.1.0
@
text
@a0 1
.LP
d3 1
a3 1
ipfstat - reports on packet filter statistics and filter list
d5 7
a11 1
ipfstat [-hIiovd:]
a12 1
.LP
d14 1
a14 1
\fBipfstat examines /dev/kmem using the symbols \fB_fr_flags\fP,
d23 9
a31 6
.IP -a
display the accounting filter list and show bytes counted against each rule.
.IP -d <device>
use a device other than \fB/dev/ipl\fP for interfacing with the kernel.
.IP -f
show fragment state information (statistics) and held state information (in
d33 20
a52 12
.IP -h
show per-rule the number of times each one scores a "hit".  For use in
combination with \fB-i\fP.
.IP -i
display the filter list used for the input side of the kernel IP processing.
.IP -I
swap between retrieving "inactive"/"active" filter list details.  For use
in combination with \fB-i\fP.
.IP -o
display the filter list used for the output side of the kernel IP processing.
.IP -s
show packet/flow state information (statistics) and held state information (in
d54 3
a56 2
.IP -v
turn verbose mode on.  Displays more debugging information.
d63 1
a63 1
When supplied with either \fB-i\fP or \fB-o\fP, it will retrieve and display
d68 1
@


1.5
log
@slight cosmetic fix
@
text
@a0 2
.\"	$OpenBSD: ipfstat.8,v 1.4 1996/07/10 03:53:50 ccappuc Exp $
.\"
d10 1
a10 1
\fBipfstat\fP examines /dev/kmem using the symbols \fB_fr_flags\fP,
d13 1
a13 2
kernel itself.  The kernel name defaults to \fB_PATH_UNIX\fP and then
to \fB/bsd\fP if \fB_PATH_UNIX\fP isn't defined.
d52 1
a52 1
/bsd
@


1.4
log
@no vmunix here, kernel is /bsd...
@
text
@d1 1
a1 1
.\"	$OpenBSD: ipfstat.8,v 1.3 1996/06/23 14:30:57 deraadt Exp $
d12 1
a12 1
\fBipfstat examines /dev/kmem using the symbols \fB_fr_flags\fP,
@


1.3
log
@update rcsid
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d15 2
a16 1
kernel itself.  The kernel name defaults to \fB/vmunix\fP.
d55 1
a55 1
/vmunix
@


1.2
log
@IP filter 3.0.1
@
text
@d1 2
@


1.1
log
@from beurton@@fnet.fr:  Darren Reed's IP filter
@
text
@d19 10
a28 2
.IP -o
display the filter list used for the output side of the kernel IP processing.
a30 4
.IP -v
turn verbose mode on.  Displays more debugging information.
.IP -d <device>
use a device other than \fB/dev/ipl\fP for interfacing with the kernel.
d34 7
a40 3
.IP -h
show per-rule the number of times each one scores a "hit".  For use in
combination with \fB-i\fP.
@
