head	1.5;
access;
symbols
	OPENBSD_5_8:1.4.0.36
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.28
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.32
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.30
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.26
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.4.0.24
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.4.0.22
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.20
	OPENBSD_5_0:1.4.0.18
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.4.0.16
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.4.0.14
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.4.0.10
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.4.0.12
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.8
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.4.0.6
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.4.0.4
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_2:1.4.0.2
	OPENBSD_4_2_BASE:1.4
	OPENBSD_4_1:1.3.0.16
	OPENBSD_4_1_BASE:1.3
	OPENBSD_4_0:1.3.0.14
	OPENBSD_4_0_BASE:1.3
	OPENBSD_3_9:1.3.0.12
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.3.0.10
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.3.0.8
	OPENBSD_3_7_BASE:1.3
	OPENBSD_3_6:1.3.0.6
	OPENBSD_3_6_BASE:1.3
	OPENBSD_3_5:1.3.0.4
	OPENBSD_3_5_BASE:1.3
	OPENBSD_3_4:1.3.0.2
	OPENBSD_3_4_BASE:1.3;
locks; strict;
comment	@ * @;


1.5
date	2015.11.23.18.35.18;	author mmcc;	state dead;
branches;
next	1.4;
commitid	tzGJfQvw5OfoVhiq;

1.4
date	2007.07.07.08.22.55;	author millert;	state Exp;
branches;
next	1.3;

1.3
date	2003.08.25.23.28.15;	author tedu;	state Exp;
branches;
next	1.2;

1.2
date	2003.08.07.16.37.52;	author fgsch;	state Exp;
branches;
next	1.1;

1.1
date	2003.07.28.21.09.28;	author tedu;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Remove the debugging infrastructure, which was ~1/3 of the code. Makes
pledging easier, and it was excessive complicated stuff.

"Good." deraadt@@
@
text
@/*	$OpenBSD: debug.h,v 1.4 2007/07/07 08:22:55 millert Exp $	*/
/*
 * Copyright (c) 2000 Christoph Herrmann, Thomas-Henning von Kamptz
 * Copyright (c) 1980, 1989, 1993 The Regents of the University of California.
 * All rights reserved.
 *
 * This code is derived from software contributed to Berkeley by
 * Christoph Herrmann and Thomas-Henning von Kamptz, Munich and Frankfurt.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. All advertising materials mentioning features or use of this software
 *    must display the following acknowledgment:
 *      This product includes software developed by the University of
 *      California, Berkeley and its contributors, as well as Christoph
 *      Herrmann and Thomas-Henning von Kamptz.
 * 4. Neither the name of the University nor the names of its contributors
 *    may be used to endorse or promote products derived from this software
 *    without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
 * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 *
 * $TSHeader: src/sbin/growfs/debug.h,v 1.2 2000/11/16 18:43:50 tom Exp $
 * $FreeBSD: src/sbin/growfs/debug.h,v 1.3 2004/07/06 17:48:34 stefanf Exp $
 *
 */

#ifdef FS_DEBUG

void dbg_open(const char *);
void dbg_close(void);
void dbg_dump_hex(struct fs *, const char *, unsigned char *);
void dbg_dump_fs(struct fs *, const char *);
void dbg_dump_cg(const char *, struct cg *);
void dbg_dump_csum(const char *, struct csum *);
void dbg_dump_csum_total(const char *, struct csum_total *);
void dbg_dump_ufs1_ino(struct fs *, const char *, struct ufs1_dinode *);
void dbg_dump_ufs2_ino(struct fs *, const char *, struct ufs2_dinode *);
void dbg_dump_iblk(struct fs *, const char *, char *, size_t);
void dbg_dump_inmap(struct fs *, const char *, struct cg *);
void dbg_dump_frmap(struct fs *, const char *, struct cg *);
void dbg_dump_clmap(struct fs *, const char *, struct cg *);
void dbg_dump_clsum(struct fs *, const char *, struct cg *);
void dbg_dump_sptbl(struct fs *, const char *, struct cg *);

#define DBG_OPEN(P) dbg_open((P))
#define DBG_CLOSE dbg_close()
#define DBG_DUMP_HEX(F,C,M) dbg_dump_hex((F),(C),(M))
#define DBG_DUMP_FS(F,C) dbg_dump_fs((F),(C))
#define DBG_DUMP_CG(F,C,M) dbg_dump_cg((C),(M))
#define DBG_DUMP_CSUM(F,C,M) dbg_dump_csum((C),(M))
#define DBG_DUMP_INO(F,C,M) (F)->fs_magic == FS_UFS1_MAGIC \
	? dbg_dump_ufs1_ino((F),(C),(struct ufs1_dinode *)(M)) \
	: dbg_dump_ufs2_ino((F),(C),(struct ufs2_dinode *)(M))
#define DBG_DUMP_IBLK(F,C,M,L) dbg_dump_iblk((F),(C),(M),(L))
#define DBG_DUMP_INMAP(F,C,M) dbg_dump_inmap((F),(C),(M))
#define DBG_DUMP_FRMAP(F,C,M) dbg_dump_frmap((F),(C),(M))
#define DBG_DUMP_CLMAP(F,C,M) dbg_dump_clmap((F),(C),(M))
#define DBG_DUMP_CLSUM(F,C,M) dbg_dump_clsum((F),(C),(M))
#ifdef NOT_CURRENTLY
#define DBG_DUMP_SPTBL(F,C,M) dbg_dump_sptbl((F),(C),(M))
#endif

#define DL_TRC	0x01
#define DL_INFO	0x02
extern int _dbg_lvl_;

#define DBG_FUNC(N) char __FKT__[] = {N};
#define DBG_ENTER if(_dbg_lvl_ & DL_TRC) {                                    \
	fprintf(stderr, "~>%s: %s\n", __FILE__, __FKT__ );                    \
	}
#define DBG_LEAVE if(_dbg_lvl_ & DL_TRC) {                                    \
	fprintf(stderr, "~<%s[%d]: %s\n", __FILE__, __LINE__, __FKT__ );      \
	}
#define DBG_TRC if(_dbg_lvl_ & DL_TRC) {                                      \
	fprintf(stderr, "~=%s[%d]: %s\n", __FILE__, __LINE__, __FKT__ );      \
	}
#define DBG_PRINT0(A) if(_dbg_lvl_ & DL_INFO) {                               \
	fprintf(stderr, "~ %s", (A));                                         \
	}
#define DBG_PRINT1(A,B) if(_dbg_lvl_ & DL_INFO) {                             \
	fprintf(stderr, "~ ");                                                \
	fprintf(stderr, (A), (B));                                            \
	}
#define DBG_PRINT2(A,B,C) if(_dbg_lvl_ & DL_INFO) {                           \
	fprintf(stderr, "~ ");                                                \
	fprintf(stderr, (A), (B), (C));                                       \
	}
#define DBG_PRINT3(A,B,C,D) if(_dbg_lvl_ & DL_INFO) {                         \
	fprintf(stderr, "~ ");                                                \
	fprintf(stderr, (A), (B), (C), (D));                                  \
	}
#define DBG_PRINT4(A,B,C,D,E) if(_dbg_lvl_ & DL_INFO) {                       \
	fprintf(stderr, "~ ");                                                \
	fprintf(stderr, (A), (B), (C), (D), (E));                             \
	}
#else /* not FS_DEBUG */

#define DBG_OPEN(P)
#define DBG_CLOSE
#define DBG_DUMP_HEX(F,C,M)
#define DBG_DUMP_FS(F,C)
#define DBG_DUMP_CG(F,C,M)
#define DBG_DUMP_CSUM(F,C,M)
#define DBG_DUMP_INO(F,C,M)
#define DBG_DUMP_IBLK(F,C,M,L)
#define DBG_DUMP_INMAP(F,C,M)
#define DBG_DUMP_FRMAP(F,C,M)
#define DBG_DUMP_CLMAP(F,C,M)
#define DBG_DUMP_CLSUM(F,C,M)
#define DBG_DUMP_SPTBL(F,C,M)
#define DBG_FUNC(N)
#define DBG_ENTER
#define DBG_TRC
#define DBG_LEAVE
#define DBG_PRINT0(A)
#define DBG_PRINT1(A,B)
#define DBG_PRINT2(A,B,C)
#define DBG_PRINT3(A,B,C,D)
#define DBG_PRINT4(A,B,C,D,E)

#endif /* FS_DEBUG */
@


1.4
log
@Pull in ffs2 support and other updates from FreeBSD.  OK deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: debug.h,v 1.3 2003/08/25 23:28:15 tedu Exp $	*/
@


1.3
log
@rename struct dinode to ufs1_dinode.  clears the namespace and makes
way for some future work.  no function changes yet.
help testing otto@@ and markus@@
@
text
@d1 1
a1 1
/*	$OpenBSD: debug.h,v 1.2 2003/08/07 16:37:52 fgsch Exp $	*/
d6 1
a6 1
 * 
d9 1
a9 1
 * 
d26 1
a26 1
 * 
d40 1
a40 1
 * $FreeBSD: src/sbin/growfs/debug.h,v 1.1 2000/12/09 15:27:35 tomsoft Exp $
a45 5
/* ********************************************************** INCLUDES ***** */
#include <sys/param.h>

#include <ufs/ufs/dinode.h>

d52 3
a54 1
void dbg_dump_ino(struct fs *, const char *, struct ufs1_dinode *);
d68 3
a70 1
#define DBG_DUMP_INO(F,C,M) dbg_dump_ino((F),(C),(M))
d76 1
d78 1
d84 1
a84 1
#define DBG_FUNC(N) char __FKT__[] = (N);
@


1.2
log
@add missing tags and make this compile with debug.
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
d57 1
a57 1
void dbg_dump_ino(struct fs *, const char *, struct dinode *);
@


1.1
log
@introducing growfs, compliments of freebsd.  cleaned up slightly to obey knf.
requests/oks from many.
@
text
@d1 1
a49 1
#include <ufs/ffs/fs.h>
@

