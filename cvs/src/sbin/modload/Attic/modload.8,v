head	1.28;
access;
symbols
	OPENBSD_5_6:1.27.0.8
	OPENBSD_5_6_BASE:1.27
	OPENBSD_5_5:1.27.0.6
	OPENBSD_5_5_BASE:1.27
	OPENBSD_5_4:1.27.0.2
	OPENBSD_5_4_BASE:1.27
	OPENBSD_5_3:1.26.0.10
	OPENBSD_5_3_BASE:1.26
	OPENBSD_5_2:1.26.0.8
	OPENBSD_5_2_BASE:1.26
	OPENBSD_5_1_BASE:1.26
	OPENBSD_5_1:1.26.0.6
	OPENBSD_5_0:1.26.0.4
	OPENBSD_5_0_BASE:1.26
	OPENBSD_4_9:1.26.0.2
	OPENBSD_4_9_BASE:1.26
	OPENBSD_4_8:1.25.0.10
	OPENBSD_4_8_BASE:1.25
	OPENBSD_4_7:1.25.0.6
	OPENBSD_4_7_BASE:1.25
	OPENBSD_4_6:1.25.0.8
	OPENBSD_4_6_BASE:1.25
	OPENBSD_4_5:1.25.0.4
	OPENBSD_4_5_BASE:1.25
	OPENBSD_4_4:1.25.0.2
	OPENBSD_4_4_BASE:1.25
	OPENBSD_4_3:1.24.0.2
	OPENBSD_4_3_BASE:1.24
	OPENBSD_4_2:1.23.0.2
	OPENBSD_4_2_BASE:1.23
	OPENBSD_4_1:1.22.0.2
	OPENBSD_4_1_BASE:1.22
	OPENBSD_4_0:1.21.0.20
	OPENBSD_4_0_BASE:1.21
	OPENBSD_3_9:1.21.0.18
	OPENBSD_3_9_BASE:1.21
	OPENBSD_3_8:1.21.0.16
	OPENBSD_3_8_BASE:1.21
	OPENBSD_3_7:1.21.0.14
	OPENBSD_3_7_BASE:1.21
	OPENBSD_3_6:1.21.0.12
	OPENBSD_3_6_BASE:1.21
	OPENBSD_3_5:1.21.0.10
	OPENBSD_3_5_BASE:1.21
	OPENBSD_3_4:1.21.0.8
	OPENBSD_3_4_BASE:1.21
	OPENBSD_3_3:1.21.0.6
	OPENBSD_3_3_BASE:1.21
	OPENBSD_3_2:1.21.0.4
	OPENBSD_3_2_BASE:1.21
	OPENBSD_3_1:1.21.0.2
	OPENBSD_3_1_BASE:1.21
	OPENBSD_3_0:1.18.0.2
	OPENBSD_3_0_BASE:1.18
	OPENBSD_2_9:1.16.0.2
	OPENBSD_2_9_BASE:1.16
	OPENBSD_2_8:1.15.0.4
	OPENBSD_2_8_BASE:1.15
	OPENBSD_2_7:1.15.0.2
	OPENBSD_2_7_BASE:1.15
	OPENBSD_2_6:1.13.0.2
	OPENBSD_2_6_BASE:1.13
	OPENBSD_2_5:1.9.0.2
	OPENBSD_2_5_BASE:1.9
	OPENBSD_2_4:1.6.0.2
	OPENBSD_2_4_BASE:1.6
	OPENBSD_2_3:1.5.0.8
	OPENBSD_2_3_BASE:1.5
	OPENBSD_2_2:1.5.0.6
	OPENBSD_2_2_BASE:1.5
	OPENBSD_2_1:1.5.0.4
	OPENBSD_2_1_BASE:1.5
	OPENBSD_2_0:1.5.0.2
	OPENBSD_2_0_BASE:1.5
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@.\" @;


1.28
date	2014.10.09.03.43.34;	author tedu;	state dead;
branches;
next	1.27;
commitid	Qvco95xx2Lj9qjX9;

1.27
date	2013.07.16.09.45.28;	author schwarze;	state Exp;
branches;
next	1.26;

1.26
date	2010.09.03.10.08.22;	author jmc;	state Exp;
branches;
next	1.25;

1.25
date	2008.08.02.09.17.47;	author jmc;	state Exp;
branches;
next	1.24;

1.24
date	2007.11.25.19.21.37;	author mikeb;	state Exp;
branches;
next	1.23;

1.23
date	2007.05.31.19.19.45;	author jmc;	state Exp;
branches;
next	1.22;

1.22
date	2007.02.20.14.01.15;	author jmc;	state Exp;
branches;
next	1.21;

1.21
date	2002.01.09.18.23.31;	author mpech;	state Exp;
branches;
next	1.20;

1.20
date	2002.01.08.21.51.50;	author ericj;	state Exp;
branches;
next	1.19;

1.19
date	2002.01.08.21.28.38;	author ericj;	state Exp;
branches;
next	1.18;

1.18
date	2001.09.17.11.45.20;	author assar;	state Exp;
branches;
next	1.17;

1.17
date	2001.08.02.18.37.34;	author mpech;	state Exp;
branches;
next	1.16;

1.16
date	2000.11.09.17.52.58;	author aaron;	state Exp;
branches;
next	1.15;

1.15
date	2000.03.18.22.55.59;	author aaron;	state Exp;
branches;
next	1.14;

1.14
date	2000.03.05.00.28.56;	author aaron;	state Exp;
branches;
next	1.13;

1.13
date	99.10.05.20.53.10;	author aaron;	state Exp;
branches;
next	1.12;

1.12
date	99.06.05.04.16.05;	author aaron;	state Exp;
branches;
next	1.11;

1.11
date	99.06.04.02.45.18;	author aaron;	state Exp;
branches;
next	1.10;

1.10
date	99.05.28.23.00.00;	author aaron;	state Exp;
branches;
next	1.9;

1.9
date	98.12.15.01.20.33;	author aaron;	state Exp;
branches;
next	1.8;

1.8
date	98.11.28.19.56.21;	author aaron;	state Exp;
branches;
next	1.7;

1.7
date	98.11.11.22.19.58;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	98.09.17.04.14.54;	author aaron;	state Exp;
branches;
next	1.5;

1.5
date	96.10.08.01.20.24;	author michaels;	state Exp;
branches;
next	1.4;

1.4
date	96.08.05.11.01.15;	author mickey;	state Exp;
branches;
next	1.3;

1.3
date	96.07.08.22.09.31;	author ccappuc;	state Exp;
branches;
next	1.2;

1.2
date	96.06.23.14.31.05;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.43.36;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.43.36;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.28
log
@no more modules
@
text
@.\" $OpenBSD: modload.8,v 1.27 2013/07/16 09:45:28 schwarze Exp $
.\" $NetBSD: modload.8,v 1.17 2001/11/16 11:57:16 wiz Exp $
.\"
.\" Copyright (c) 1993 Christopher G. Demetriou
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"          This product includes software developed for the
.\"          NetBSD Project.  See http://www.netbsd.org/ for
.\"          information about NetBSD.
.\" 4. The name of the author may not be used to endorse or promote products
.\"    derived from this software without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.\" <<Id: LICENSE,v 1.2 2000/06/14 15:57:33 cgd Exp>>
.\"
.Dd $Mdocdate: July 16 2013 $
.Dt MODLOAD 8
.Os
.Sh NAME
.Nm modload
.Nd load a kernel module
.Sh SYNOPSIS
.Nm modload
.Op Fl dnSsv
.Op Fl A Ar kernel
.Op Fl e Ar entry
.Op Fl o Ar output_file
.Op Fl p Ar postinstall
.Ar input_file
.Sh DESCRIPTION
The
.Nm
utility loads a loadable kernel module into a running system.
The input file is an object file (.o file).
.Pp
The options to
.Nm
are as follows:
.Bl -tag -width Ds
.It Fl A Ar kernel
Specify the file that is passed to the linker
to resolve module references to external symbols.
The symbol file must be for the currently running
kernel or the module is likely to crash the system.
.It Fl d
Debug.
Used to debug
.Nm
itself.
.It Fl e Ar entry
Specify the module entry point.
This is passed by
.Nm
to
.Xr ld 1
when the module is linked.
The default module entry point name is `xxxinit'.
If `xxxinit' cannot be found, an attempt to use `<module_name>_lkmentry'
will be made, where <module_name> is the filename being loaded without
the `.o'.
.It Fl n
Do everything, except calling the module entry point (and any
post-install program).
.It Fl o Ar output_file
Specify the name of the output file that is produced by
the linker.
.It Fl p Ar postinstall
Specify the name of a shell script or program that will
be executed if the module is successfully loaded.
It is always passed the module id (in decimal) and module
type (in hexadecimal) as the first two arguments.
For loadable drivers, the third argument is
the block or character major device number.
For a loadable system call, the third argument is the system
call number.
.It Fl S
Do not remove the temporary object file.
By default, the
.Xr ld 1
output is removed after being loaded into the kernel.
.It Fl s
Do not load symbols from the kernel module.
.It Fl v
Print comments about the loading process.
.El
.Sh FILES
.Bl -tag -width "/usr/include/sys/lkm.hXXX" -compact
.It Pa /dev/ksyms
Default file passed to the linker to resolve external
references in the module.
.It Pa /usr/include/sys/lkm.h
File containing definitions of module types.
.El
.Sh EXIT STATUS
The
.Nm
utility exits with a status of 0 on success
and with a nonzero status if an error occurs.
.Sh SEE ALSO
.Xr ld 1 ,
.Xr lkm 4 ,
.Xr securelevel 7 ,
.Xr modstat 8 ,
.Xr modunload 8
.Sh HISTORY
The
.Nm
command was designed to be similar in functionality
to the corresponding command in
.Tn "SunOS 4.1.3" .
.Sh AUTHORS
.An Terrence R. Lambert Aq Mt terry@@cs.weber.edu
.Sh BUGS
.Bl -bullet
.It
The loadable device driver framework can
only reserve either a character or block device entry, not both.
.It
Loading the symbol table is expensive in terms of space:
it presently duplicates all the kernel symbols for each lkm loaded
with
.Fl s .
.El
@


1.27
log
@Add missing .Mt macros for AUTHORS email addresses.
From Jan Stary <hans at stare dot cz>.
ok jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: modload.8,v 1.26 2010/09/03 10:08:22 jmc Exp $
d36 1
a36 1
.Dd $Mdocdate: September 3 2010 $
@


1.26
log
@add an EXIT STATUS section for /sbin;
@
text
@d1 1
a1 1
.\" $OpenBSD: modload.8,v 1.25 2008/08/02 09:17:47 jmc Exp $
d36 1
a36 1
.Dd $Mdocdate: August 2 2008 $
d132 1
a132 1
.An Terrence R. Lambert Aq terry@@cs.weber.edu
@


1.25
log
@fixes from Alexander Holupirek, documentation/5899:

- fix a typo in lkm.4 (different fix used)
- document securelevel(7) (again, different fix taken)

whilst here, some minor repair:

- no need to wrap section names in quotes
- tidy up FILES a little
- new sentence, new line
@
text
@d1 1
a1 1
.\" $OpenBSD: modload.8,v 1.24 2007/11/25 19:21:37 mikeb Exp $
d36 1
a36 1
.Dd $Mdocdate: November 25 2007 $
d114 1
a114 1
.Sh DIAGNOSTICS
@


1.24
log
@Make modload use /dev/ksyms as a kernel file by default.

Idea from form@@, suggestions from miod@@.

ok miod
@
text
@d1 1
a1 1
.\" $OpenBSD: modload.8,v 1.23 2007/05/31 19:19:45 jmc Exp $
d36 1
a36 1
.Dd $Mdocdate: May 31 2007 $
d107 1
a107 1
.Bl -tag -width /usr/include/sys/lkm.h -compact
d109 2
a110 2
default file passed to the linker to resolve external
references in the module
d112 1
a112 1
file containing definitions of module types
d122 1
@


1.23
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\" $OpenBSD: modload.8,v 1.22 2007/02/20 14:01:15 jmc Exp $
d36 1
a36 1
.Dd $Mdocdate$
d108 1
a108 1
.It Pa /bsd
@


1.22
log
@sort options and sync usage(); from Igor Sobrado
@
text
@d1 1
a1 1
.\" $OpenBSD: modload.8,v 1.21 2002/01/09 18:23:31 mpech Exp $
d36 1
a36 1
.Dd April 30, 1999
@


1.21
log
@check&fix. Request from ericj@@.
o) start new sentence on a new line;
o) .SYNOPSIS always have .Nm;
@
text
@d1 1
a1 1
.\" $OpenBSD: modload.8,v 1.20 2002/01/08 21:51:50 ericj Exp $
d44 1
a44 1
.Op Fl dnvsS
d47 1
a48 1
.Op Fl o Ar output_file
d60 5
a69 17
.It Fl n
Do everything, except calling the module entry point (and any
post-install program).
.It Fl v
Print comments about the loading process.
.It Fl s
Do not load symbols from the kernel module.
.It Fl S
Do not remove the temporary object file.
By default, the
.Xr ld 1
output is removed after being loaded into the kernel.
.It Fl A Ar kernel
Specify the file that is passed to the linker
to resolve module references to external symbols.
The symbol file must be for the currently running
kernel or the module is likely to crash the system.
d81 6
d96 9
a104 3
.It Fl o Ar output_file
Specify the name of the output file that is produced by
the linker.
@


1.20
log
@
change back to old behavior, where we load debugging symbols by default.
@
text
@d1 1
a1 1
.\" $OpenBSD: modload.8,v 1.19 2002/01/08 21:28:38 ericj Exp $
d43 1
a43 1
.Nm ""
d61 2
a62 1
Debug.  Used to debug
d73 2
a74 1
Do not remove the temporary object file.  By default, the
d95 2
a96 2
be executed if the module is successfully loaded. It
is always passed the module id (in decimal) and module
@


1.19
log
@
add support in modload for ELF
from NetBSD
miod@@ ok.
@
text
@d1 1
a1 1
.\" $OpenBSD$
d70 1
a70 1
Load the symbol table.
@


1.18
log
@sync actual with flags with usage and man page

art@@ ok
@
text
@d1 2
a2 2
.\"	$OpenBSD: modload.8,v 1.17 2001/08/02 18:37:34 mpech Exp $
.\"	$NetBSD: modload.8,v 1.5 1995/03/18 14:56:43 cgd Exp $
d15 7
a21 2
.\" 3. The name of the author may not be used to endorse or promote products
.\"    derived from this software without specific prior written permission
d34 3
a36 1
.Dd June 7, 1993
d43 2
a44 2
.Nm modload
.Op Fl dvsqu
d56 3
a58 1
The options are as follows:
d61 1
a61 2
Debug.
Used to debug
d64 3
d70 5
a74 9
Do not load symbols from the kernel module.
.It Fl q
Be very quiet.
.It Fl u
Delete the loaded module
.Pq Ar output_file
after loading.
If the output file was not specified, this option causes the
temporary file to be kept rather than deleted.
d87 4
a90 2
The default module entry point name is
.Dq xxxinit .
d93 2
a94 2
be executed if the module is successfully loaded.
It is always passed the module ID (in decimal) and module
a102 6
If this option is not specified, a file in the
.Pa /tmp
directory
is used with the name generated from the module name with a
.Dq .out
extension.
a110 2
.\" .It Pa output file.
.\" default output file name
d115 2
a116 1
utility exits 0 on success or with a non-zero status if an error occurred.
d129 1
a129 1
Terrence R. Lambert <terry@@cs.weber.edu>
d131 2
d135 6
@


1.17
log
@o) .Sh AUTHOR -> .Sh AUTHORS;
o) .Sh EXAMPLE -> .Sh EXAMPLES;
o) Delete .Sh OPTIONS. Text moved to .Sh DESCRIPTION;

millert@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: modload.8,v 1.16 2000/11/09 17:52:58 aaron Exp $
d37 1
a37 1
.Op Fl dvuv
d56 4
a67 2
.It Fl v
Print comments about the loading process.
@


1.16
log
@Change all option list specifications to ".Bl -tag -width Ds". Most man
pages just needed their -width parameter tweaked to "Ds", which provides
a nice width of 6 constant characters. For consistency more than anything.
@
text
@d1 1
a1 1
.\"	$OpenBSD: modload.8,v 1.15 2000/03/18 22:55:59 aaron Exp $
d124 1
a124 1
.Sh AUTHOR
@


1.15
log
@Remove hard sentence breaks, and some other cleanup along the way.
@
text
@d1 1
a1 1
.\"	$OpenBSD: modload.8,v 1.14 2000/03/05 00:28:56 aaron Exp $
d50 1
a50 1
.Bl -tag -width indent
@


1.14
log
@Finish standardizing options list introduction.
@
text
@d1 1
a1 1
.\"	$OpenBSD: modload.8,v 1.13 1999/10/05 20:53:10 aaron Exp $
d52 2
a53 1
Debug.  Used to debug
d61 2
a62 1
after loading.  If the output file was not specified, this option causes the
d82 2
a83 2
be executed if the module is successfully loaded. It
is always passed the module ID (in decimal) and module
d91 2
a92 1
the linker.  If this option is not specified, a file in the
@


1.13
log
@The .Bl -tag flag expects a -width argument.
@
text
@d1 1
a1 1
.\"	$OpenBSD: modload.8,v 1.12 1999/06/05 04:16:05 aaron Exp $
d49 1
a49 3
The options to
.Nm
are as follows:
@


1.12
log
@capitalize the acronym ID
@
text
@d1 1
a1 1
.\"	$OpenBSD: modload.8,v 1.11 1999/06/04 02:45:18 aaron Exp $
d124 1
a124 3
.Bl -tag
Terrence R. Lambert, terry@@cs.weber.edu
.El
@


1.11
log
@start to remove non-escaped trailing whitespace, it can confuse troff; pjanzen@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: modload.8,v 1.10 1999/05/28 23:00:00 aaron Exp $
d83 1
a83 1
is always passed the module id (in decimal) and module
@


1.10
log
@more .El madness
@
text
@d1 1
a1 1
.\"	$OpenBSD: modload.8,v 1.9 1998/12/15 01:20:33 aaron Exp $
d68 1
a68 1
to resolve module references to external symbols. 
@


1.9
log
@always give .Nm macros an argument in SYNOPSIS sections; krw@@tcn.net
@
text
@d1 1
a1 1
.\"	$OpenBSD: modload.8,v 1.8 1998/11/28 19:56:21 aaron Exp $
d107 1
@


1.8
log
@kill redundant .Nm macro arguments; other misc fixes
@
text
@d1 1
a1 1
.\"	$OpenBSD: modload.8,v 1.7 1998/11/11 22:19:58 aaron Exp $
d36 1
a36 1
.Nm
@


1.7
log
@more `` '' -> .Dq sillyness; remove redundant .Pp macros; other misc fixes
@
text
@d1 1
a1 1
.\"	$OpenBSD: modload.8,v 1.6 1998/09/17 04:14:54 aaron Exp $
d36 1
a36 1
.Nm modload
@


1.6
log
@sbin/ man page fixes
@
text
@d1 1
a1 1
.\"	$OpenBSD: modload.8,v 1.5 1996/10/08 01:20:24 michaels Exp $
d78 2
a79 1
The default module entry point name is `xxxinit'.
d91 6
a96 2
the linker.  If this option is not specified, a file in the /tmp directory
is used with the name generated from the module name with a `.out' extension.
@


1.5
log
@Attempt at cleanup.
@
text
@d1 1
a1 1
.\"	$OpenBSD: modload.8,v 1.3 1996/07/08 22:09:31 ccappuc Exp $
d105 1
a105 2
utility exits with a status of 0 on success
and with a nonzero status if an error occurs.
@


1.4
log
@new options, hole fixes, user friendly. (from FreeBSD)
@
text
@d31 1
a31 1
.Os NetBSD 0.8a
@


1.3
log
@kernel is /bsd, os is OpenBSD
@
text
@d1 1
a1 1
.\"	$OpenBSD: modload.8,v 1.2 1996/06/23 14:31:05 deraadt Exp $
d37 1
a37 1
.Op Fl dv
d57 7
d90 2
a91 1
the linker.
@


1.2
log
@update rcsid
@
text
@d1 1
a1 1
.\"	$OpenBSD: modload.8,v 1.5 1995/03/18 14:56:43 cgd Exp $
d87 1
a87 1
.It Pa /netbsd
@


1.1
log
@Initial revision
@
text
@d1 1
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
