head	1.20;
access;
symbols
	OPENBSD_6_1:1.20.0.2
	OPENBSD_6_1_BASE:1.20
	OPENBSD_6_0:1.19.0.56
	OPENBSD_6_0_BASE:1.19
	OPENBSD_5_9:1.19.0.52
	OPENBSD_5_9_BASE:1.19
	OPENBSD_5_8:1.19.0.54
	OPENBSD_5_8_BASE:1.19
	OPENBSD_5_7:1.19.0.46
	OPENBSD_5_7_BASE:1.19
	OPENBSD_5_6:1.19.0.50
	OPENBSD_5_6_BASE:1.19
	OPENBSD_5_5:1.19.0.48
	OPENBSD_5_5_BASE:1.19
	OPENBSD_5_4:1.19.0.44
	OPENBSD_5_4_BASE:1.19
	OPENBSD_5_3:1.19.0.42
	OPENBSD_5_3_BASE:1.19
	OPENBSD_5_2:1.19.0.40
	OPENBSD_5_2_BASE:1.19
	OPENBSD_5_1_BASE:1.19
	OPENBSD_5_1:1.19.0.38
	OPENBSD_5_0:1.19.0.36
	OPENBSD_5_0_BASE:1.19
	OPENBSD_4_9:1.19.0.34
	OPENBSD_4_9_BASE:1.19
	OPENBSD_4_8:1.19.0.32
	OPENBSD_4_8_BASE:1.19
	OPENBSD_4_7:1.19.0.28
	OPENBSD_4_7_BASE:1.19
	OPENBSD_4_6:1.19.0.30
	OPENBSD_4_6_BASE:1.19
	OPENBSD_4_5:1.19.0.26
	OPENBSD_4_5_BASE:1.19
	OPENBSD_4_4:1.19.0.24
	OPENBSD_4_4_BASE:1.19
	OPENBSD_4_3:1.19.0.22
	OPENBSD_4_3_BASE:1.19
	OPENBSD_4_2:1.19.0.20
	OPENBSD_4_2_BASE:1.19
	OPENBSD_4_1:1.19.0.18
	OPENBSD_4_1_BASE:1.19
	OPENBSD_4_0:1.19.0.16
	OPENBSD_4_0_BASE:1.19
	OPENBSD_3_9:1.19.0.14
	OPENBSD_3_9_BASE:1.19
	OPENBSD_3_8:1.19.0.12
	OPENBSD_3_8_BASE:1.19
	OPENBSD_3_7:1.19.0.10
	OPENBSD_3_7_BASE:1.19
	OPENBSD_3_6:1.19.0.8
	OPENBSD_3_6_BASE:1.19
	OPENBSD_3_5:1.19.0.6
	OPENBSD_3_5_BASE:1.19
	OPENBSD_3_4:1.19.0.4
	OPENBSD_3_4_BASE:1.19
	OPENBSD_3_3:1.19.0.2
	OPENBSD_3_3_BASE:1.19
	OPENBSD_3_2:1.17.0.6
	OPENBSD_3_2_BASE:1.17
	OPENBSD_3_1:1.17.0.4
	OPENBSD_3_1_BASE:1.17
	OPENBSD_3_0:1.17.0.2
	OPENBSD_3_0_BASE:1.17
	OPENBSD_2_9:1.16.0.2
	OPENBSD_2_9_BASE:1.16
	OPENBSD_2_8:1.15.0.4
	OPENBSD_2_8_BASE:1.15
	OPENBSD_2_7:1.15.0.2
	OPENBSD_2_7_BASE:1.15
	OPENBSD_2_6:1.14.0.2
	OPENBSD_2_6_BASE:1.14
	OPENBSD_2_5:1.9.0.2
	OPENBSD_2_5_BASE:1.9
	NIKLAS_981114:1.1.1.1
	NIKLAS:1.1.1;
locks; strict;
comment	@# @;


1.20
date	2016.09.02.12.17.32;	author tb;	state Exp;
branches;
next	1.19;
commitid	Z6hUPnAcS0GtAGum;

1.19
date	2003.02.22.06.57.07;	author kjell;	state Exp;
branches;
next	1.18;

1.18
date	2003.01.04.22.36.12;	author deraadt;	state Exp;
branches;
next	1.17;

1.17
date	2001.06.27.03.31.39;	author angelos;	state Exp;
branches;
next	1.16;

1.16
date	2001.01.27.11.16.16;	author niklas;	state Exp;
branches;
next	1.15;

1.15
date	2000.01.26.15.23.45;	author niklas;	state Exp;
branches
	1.15.4.1;
next	1.14;

1.14
date	99.08.26.22.31.24;	author niklas;	state Exp;
branches;
next	1.13;

1.13
date	99.06.02.06.31.08;	author niklas;	state Exp;
branches;
next	1.12;

1.12
date	99.05.02.19.18.07;	author niklas;	state Exp;
branches;
next	1.11;

1.11
date	99.04.30.11.48.06;	author niklas;	state Exp;
branches;
next	1.10;

1.10
date	99.04.19.20.01.04;	author niklas;	state Exp;
branches;
next	1.9;

1.9
date	99.04.05.21.03.26;	author niklas;	state Exp;
branches;
next	1.8;

1.8
date	99.03.24.14.58.45;	author niklas;	state Exp;
branches;
next	1.7;

1.7
date	99.03.02.15.01.09;	author niklas;	state Exp;
branches;
next	1.6;

1.6
date	99.02.26.03.30.11;	author niklas;	state Exp;
branches;
next	1.5;

1.5
date	98.12.21.01.02.22;	author niklas;	state Exp;
branches;
next	1.4;

1.4
date	98.11.17.11.10.06;	author niklas;	state Exp;
branches;
next	1.3;

1.3
date	98.11.15.00.43.48;	author niklas;	state Exp;
branches;
next	1.2;

1.2
date	98.11.15.00.15.04;	author niklas;	state Exp;
branches;
next	1.1;

1.1
date	98.11.15.00.03.48;	author niklas;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.11.15.00.03.48;	author niklas;	state Exp;
branches;
next	;

1.15.4.1
date	2001.05.08.12.45.21;	author ho;	state Exp;
branches;
next	;


desc
@@


1.20
log
@move links from http to https://www.openbsd.org/

ok beck
@
text
@$OpenBSD: README,v 1.19 2003/02/22 06:57:07 kjell Exp $
$EOM: README,v 1.28 1999/10/10 22:53:24 angelos Exp $

This is isakmpd, a BSD-licensed ISAKMP/Oakley (a.k.a. IKE)
implementation.  It's written by Niklas Hallqvist and Niels Provos,
funded by Ericsson Radio Systems AB.  Isakmpd's home is in the
OpenBSD main source tree under src/sbin/isakmpd.  Look at
https://www.openbsd.org/ for details on how to get OpenBSD source.

Isakmpd is being developed under OpenBSD, with OpenBSD as its primary
target, however, it is ported to Linux with FreeS/WAN IPsec.  The
makefile support assumes a BSD environment nonetheless as it is not too
hard to get such an environment to work under other operating systems.
For example, Red Hat 5.2 shipped with pmake installed.  Read sysdep/README
for further details about this issue.  Other systems isakmpd has been
ported to, but no code has been made available for, includes Solaris
and Win32s.  I mention this just because it shows that the code is
fairly portable.

First edit the Makefile in a manner you see fit.  Specifically the OS
define is important to get right of course.
Assuming you have an OpenBSD /usr/share/mk and use the OpenBSD (or
similar) make(1), you build isakmpd this way:

make obj && make depend && make

Then obj/isakmpd will be the daemon.  I suggest you try it by running
under gdb with args similar to:
	-d -n -p5000 -DA=99 -f/tmp/isakmpd.fifo -csamples/VPN-east.conf

That will run isakmpd in the foreground, not connected to any application
(like an IPsec implementation) logging to stderr with full debugging output,
listening on UDP port 5000, accepting control commands via the named pipe
called /tmp/isakmpd.fifo and reading its configuration from the
VPN-east.conf file (found in the isakmpd/samples directory).

If you are root you can try to run without -n -p5000 thus getting it to
talk to your IPsec stack and use the standard port 500 instead.

The logging classes are Miscellaneous = 0, Transports = 1, Messages = 2,
Crypto = 3, Timers = 4, System Dependencies = 5, Security Associations = 6,
and Exchanges = 7.  The debug levels increase in verbosity from 0 (off) to
99 (max). Read log.[ch] and ui.c to see how to alter the debugging levels.

Now you have setup your daemon and can watch incoming negotiations.
But how do you get such?  Either use http://isakmp-test.ssh.fi/,
there's an excellent service, just waiting for you.  Or you can try to
start another isakmpd on another port (say -p5001 or so, instead)
and another fifo (let's say /tmp/other.fifo).  Then edit the config
file to have some peer descriptions that fit your need and issue a
command like this:

$ echo "c IPsec-east-west" >/tmp/other.fifo

and watch.  You can turn on debugging on that isakmpd too of course, for
greater fun.  This rudimentary user interface is slightly described in
DESIGN-NOTES.  If you are going to look at the config file, don't be scared,
the man page isakmpd.conf(5) covers every detail, and the flexibility will
be hidden under a userfriendlier layer in a later release.  I did this
first config-file syntax just because it should be easy to parse. The man
page isakmpd.policy(5) describes the policy model used in conjunction with
KeyNote.

Happy IKEing!

Niklas Hallqvist <niklas@@openbsd.org>
Niels Provos <provos@@openbsd.org>
Håkan Olsson <ho@@openbsd.org>
@


1.19
log
@typo: noneheless->nontheless
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.18 2003/01/04 22:36:12 deraadt Exp $
d8 1
a8 1
http://www.openbsd.org/ for details on how to get OpenBSD source.
@


1.18
log
@spelling
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.17 2001/06/27 03:31:39 angelos Exp $
d12 1
a12 1
makefile support assumes a BSD environment noneheless as it is not too
@


1.17
log
@Consistently use "IPsec" capitalization (jsyn@@nthought.com)
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.16 2001/01/27 11:16:16 niklas Exp $
d32 1
a32 1
(like an IPsec implementation) logging to stderr with full debugging ouput,
@


1.16
log
@Tell about OpenBSD being isakmpd's home.
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.15 2000/01/26 15:23:45 niklas Exp $
d32 1
a32 1
(like an IPSEC implementation) logging to stderr with full debugging ouput,
d38 1
a38 1
talk to your IPSec stack and use the standard port 500 instead.
@


1.15
log
@Merge with EOM 1.28

author: angelos
Manpage support in the Makefiles, mention in README.

author: niklas
Up-to-date

author: niklas
Typo + mail change for ho
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.14 1999/08/26 22:31:24 niklas Exp $
d6 3
a8 12
funded by Ericsson Radio Systems AB.  Currently it is work in
progress, although it can be used for real setups.  There are
releases, but this distribution is not a release and is not named with
ordinary version numbers.  When you got the source, hopefully the
archive was named with a date which reflects when it was created.
These archives are also known as snapshots and will be created at
irregular intervals and put up on ftp.gsnig.net and ftp.appli.se in
/pub/isakmpd.  From Nov 14, 1998 isakmpd is also available in the
OpenBSD main source tree under src/sbin/isakmpd, though slightly
modified because I don't want to carry support files for other OSes in
that distribution.  Look at http://www.openbsd.org/ for details on how
to get OpenBSD source.
@


1.15.4.1
log
@Pull in isakmpd from 2.9 to 2.8 branch.
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.16 2001/01/27 11:16:16 niklas Exp $
d6 12
a17 3
funded by Ericsson Radio Systems AB.  Isakmpd's home is in the
OpenBSD main source tree under src/sbin/isakmpd.  Look at
http://www.openbsd.org/ for details on how to get OpenBSD source.
@


1.14
log
@Merge with EOM 1.25

author: niklas
up-to-date
@
text
@d1 2
a2 2
$OpenBSD: README,v 1.13 1999/06/02 06:31:08 niklas Exp $
$EOM: README,v 1.25 1999/08/12 22:33:03 niklas Exp $
d7 11
a17 10
progress, although it can be used for real setups.  It is not
released, thus I won't bother calling it any version numbers.  When
you got the source, hopefully the archive was named with a date which
reflects when it was created.  These archives are also known as
snapshots and will be created at irregular intervals and put up on
ftp.gsnig.net and ftp.appli.se in /pub/isakmpd.  From Nov 14, 1998
isakmpd is also available in the OpenBSD main source tree under
src/sbin/isakmpd, though slightly modified because I don't want to
carry support files for other OSes in that distribution.  Look at
http://www.openbsd.org/ for details on how to get OpenBSD source.
d23 1
a23 1
For example, Red Hat 5.2 ships with pmake installed.  Read sysdep/README
d25 1
a25 1
ported to, but no code has been made available for, inlcudes Solaris
d38 1
a38 2
	-d -n -p5000 -D0=99 -D1=99 -D2=99 -D3=99 -D4=99 -D5=99 -D6=99 -D7=99 \
	-f/tmp/isakmpd.fifo -csamples/VPN-east.conf
d69 3
a71 1
first config-file syntax just because it should be easy to parse.
d77 1
a77 1
Håkan Olsson <ho@@netman.se>
@


1.13
log
@Merge with EOM 1.24

author: niklas
Style nits

author: ho
Describe debug logging classes in some detail.
@
text
@d1 2
a2 2
$OpenBSD: README,v 1.12 1999/05/02 19:18:07 niklas Exp $
$EOM: README,v 1.24 1999/05/25 07:52:00 niklas Exp $
d7 8
a14 8
progress, although it can be used for real setups.  It is not released,
thus I won't bother calling it any version numbers.  When you got the
source, hopefully the archive was named with a date which reflects when
it was created.  These archives are also known as snapshots and will be
created at irregular intervals and put up on ftp.gsnig.net and
ftp.appli.se in /pub/isakmpd.  From Nov 14, 1998 isakmpd is also
available in the OpenBSD main source tree under src/sbin/isakmpd,
though slightly modified for patent reasons, and because I don't want to
@


1.12
log
@Merge with EOM 1.22

author: niklas
Talk about the config file
@
text
@d1 2
a2 2
$OpenBSD: README,v 1.11 1999/04/30 11:48:06 niklas Exp $
$EOM: README,v 1.22 1999/05/02 13:39:37 niklas Exp $
d49 5
a53 1
Read log.[ch] and ui.c to see how to alter the debugging levels.
@


1.11
log
@BUGS: Merge with EOM 1.29
README: Merge with EOM 1.21
TO-DO: Merge with EOM 1.35

author: niklas
Up-to-date
@
text
@d1 2
a2 2
$OpenBSD: README,v 1.10 1999/04/19 20:01:04 niklas Exp $
$EOM: README,v 1.21 1999/04/30 11:37:42 niklas Exp $
d62 4
a65 1
DESIGN-NOTES.
@


1.10
log
@./README: Merge with EOM 1.20

Up-to-date
@
text
@d1 2
a2 2
$OpenBSD: README,v 1.9 1999/04/05 21:03:26 niklas Exp $
$EOM: README,v 1.20 1999/04/16 21:32:43 niklas Exp $
d19 8
a26 5
target, however, a Linux effort has been started.  The makefile support
assumes a BSD environment noneheless as it is not too hard to get such
an environment to work under other operating systems.  For example,
Red Hat 5.2 ships with pmake installed.  Read sysdep/README for further
details about this issue.
d61 2
a62 5
greater fun.

You may by now have noticed that this implementation is incomplete, but
who cares?  You are here because you want to read code, start porting work
or help us out fixing what need's to be fixed.
@


1.9
log
@Merge with EOM 1.19
up-to-date
@
text
@d1 2
a2 2
$OpenBSD: README,v 1.8 1999/03/24 14:58:45 niklas Exp $
$EOM: README,v 1.19 1999/04/02 01:08:56 niklas Exp $
d34 1
a34 1
	-d -n -p5000 -D0=99 -D1=99 -D2=99 -D3=99 -D4=99 -D5=99 \
d68 1
@


1.8
log
@Merge with EOM 1.18
old connect has disappeared
@
text
@d1 2
a2 2
$OpenBSD: README,v 1.7 1999/03/02 15:01:09 niklas Exp $
$EOM: README,v 1.18 1999/03/08 00:39:25 niklas Exp $
d7 10
a16 11
progress, although it can be used for real setups if some features are
not used.  For example it does not renegotiate SAs when an application
says they have expired.  It is not released, thus I won't bother
calling it any version numbers.  When you got the source, hopefully
the archive was named with a date which reflects when it was created.
These archives are also known as snapshots and will be created at
irregular intervals and put up on ftp.gsnig.net and ftp.appli.se in
/pub/isakmpd.  From Nov 14, 1998 isakmpd is also available in the
OpenBSD main source tree under src/sbin/isakmpd, though slightly
modified for patent reasons.  Look at http://www.openbsd.org/ for
details on how to get OpenBSD source.
d19 1
a19 1
target, however, a Linux effort has be started.  The makefile support
d35 1
a35 1
	-f/tmp/isakmpd.fifo -cisakmpd.conf.sample
d41 1
a41 1
isakmpd.conf.sample file (found in the isakmpd directory).
d55 1
a55 1
$ echo "c IPsec-peer-1" >/tmp/other.fifo
d60 1
a60 1
You will by now have noticed that this implementation is incomplete, but
@


1.7
log
@README: Merge with EOM 1.17
I changed my mind: other OS support files ships separately

Mention the OS define in Makefile

sysdep/README: Merge with EOM 1.1
I changed my mind: other OS support files ships separately

sysdep/linux/*: Removed
@
text
@d1 2
a2 2
$OpenBSD: README,v 1.6 1999/02/26 03:30:11 niklas Exp $
$EOM: README,v 1.17 1999/03/02 14:44:01 niklas Exp $
d56 1
a56 1
$ echo "C IPsec-peer-1" >/tmp/other.fifo
@


1.6
log
@Merge from the Ericsson repository
| revision 1.15
| date: 1999/02/25 14:18:33;  author: niklas;  state: Exp;  lines: +1 -3
| Better OS-dependency layout
| ----------------------------
| revision 1.14
| date: 1999/02/25 11:21:53;  author: niklas;  state: Exp;  lines: +2 -1
| sysdep-os.h addition
| ----------------------------
| revision 1.13
| date: 1998/12/20 11:48:33;  author: niklas;  state: Exp;  lines: +5 -2
| Mention OpenBSD loc
| ----------------------------
@
text
@d1 2
a2 2
$OpenBSD: README,v 1.5 1998/12/21 01:02:22 niklas Exp $
$EOM: README,v 1.15 1999/02/25 14:18:33 niklas Exp $
d20 5
a24 2
target, soon enough however, a Linux effort will be started.  Until
then the makefile support assumes a BSD environment.
d26 2
@


1.5
log
@Last months worth of work on isakmpd, lots done
@
text
@d1 2
a2 2
$OpenBSD: README,v 1.4 1998/11/17 11:10:06 niklas Exp $
$EOM: README,v 1.12 1998/12/19 09:18:18 niklas Exp $
a25 1
ln -s sysdep-openbsd.c sysdep.c
@


1.4
log
@Add RCS Ids from the EOM repository
@
text
@d1 2
a2 2
$OpenBSD: README,v 1.3 1998/11/15 00:43:48 niklas Exp $
$EOM: README,v 1.10 1998/10/15 11:13:35 niklas Exp $
d6 12
a17 10
funded by Ericsson Radio Systems AB.  Currently it is just work in
progress, it cannot be used for anything real.  For example it does not
renegotiate SAs when an application says they have expired.  It is not
released, thus I won't bother calling it any version numbers.  When you
got the source, hopefully the archive was named with a date which
reflects when it was created.  These archives are also known as snapshots
and will be created at irregular intervals and put up on ftp.gsnig.net
and ftp.appli.se in /pub/isakmpd.  From Nov 14, 1998 isakmpd is also
available in the OpenBSD main source tree under src/sbin/isakmpd.  Look
at http://www.openbsd.org/ for details on how to get OpenBSD source.
d48 3
a50 1
and another fifo (let's say /tmp/other.fifo), then issue this command:
d52 1
a52 1
$ echo "c udp 127.0.0.1:5000 2 1" >/tmp/other.fifo
d55 1
a55 6
greater fun.  When the ISAKMP SA is setup you can try quick mode too:

$ echo "c isakmp <icookie+rcookie> 32 1" >/tmp/other.fifo

The cookie string you can get by sending the "r" command to the FIFO and
watching the log.
@


1.3
log
@openBSD RCS IDs
@
text
@d1 2
a2 1
$OpenBSD: README,v 1.2 1998/11/15 00:15:04 niklas Exp $
@


1.2
log
@Reflect reality
@
text
@d1 1
a1 1
$Id: README,v 1.1.1.1 1998/11/15 00:03:48 niklas Exp $
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$Id: README,v 1.10 1998/10/15 11:13:35 niklas Exp $
d12 3
a14 1
and ftp.appli.se in /pub/isakmpd.
d52 4
a55 1
$ echo "c udp 127.0.0.1:5000 32 1" >/tmp/other.fifo
@


1.1.1.1
log
@Initial import of isakmpd, an IKE (ISAKMP/Oakley) implementation for the
OpenBSD IPSEC stack by me, Niklas Hallqvist and Niels Provos, funded by
Ericsson Radio Systems.  It is not yet complete or usable in a real scenario
but the missing pieces will soon be there.  The early commit is for people
who wants early access and who are not afraid of looking at source.
isakmpd interops with Cisco, Timestep, SSH & Pluto (Linux FreeS/WAN) so
far, so it is not that incomplete.  It is really mostly configuration that
is lacking.
@
text
@@
