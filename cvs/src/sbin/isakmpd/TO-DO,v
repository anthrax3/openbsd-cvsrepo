head	1.26;
access;
symbols
	OPENBSD_6_2:1.26.0.56
	OPENBSD_6_2_BASE:1.26
	OPENBSD_6_1:1.26.0.58
	OPENBSD_6_1_BASE:1.26
	OPENBSD_6_0:1.26.0.54
	OPENBSD_6_0_BASE:1.26
	OPENBSD_5_9:1.26.0.50
	OPENBSD_5_9_BASE:1.26
	OPENBSD_5_8:1.26.0.52
	OPENBSD_5_8_BASE:1.26
	OPENBSD_5_7:1.26.0.44
	OPENBSD_5_7_BASE:1.26
	OPENBSD_5_6:1.26.0.48
	OPENBSD_5_6_BASE:1.26
	OPENBSD_5_5:1.26.0.46
	OPENBSD_5_5_BASE:1.26
	OPENBSD_5_4:1.26.0.42
	OPENBSD_5_4_BASE:1.26
	OPENBSD_5_3:1.26.0.40
	OPENBSD_5_3_BASE:1.26
	OPENBSD_5_2:1.26.0.38
	OPENBSD_5_2_BASE:1.26
	OPENBSD_5_1_BASE:1.26
	OPENBSD_5_1:1.26.0.36
	OPENBSD_5_0:1.26.0.34
	OPENBSD_5_0_BASE:1.26
	OPENBSD_4_9:1.26.0.32
	OPENBSD_4_9_BASE:1.26
	OPENBSD_4_8:1.26.0.30
	OPENBSD_4_8_BASE:1.26
	OPENBSD_4_7:1.26.0.26
	OPENBSD_4_7_BASE:1.26
	OPENBSD_4_6:1.26.0.28
	OPENBSD_4_6_BASE:1.26
	OPENBSD_4_5:1.26.0.24
	OPENBSD_4_5_BASE:1.26
	OPENBSD_4_4:1.26.0.22
	OPENBSD_4_4_BASE:1.26
	OPENBSD_4_3:1.26.0.20
	OPENBSD_4_3_BASE:1.26
	OPENBSD_4_2:1.26.0.18
	OPENBSD_4_2_BASE:1.26
	OPENBSD_4_1:1.26.0.16
	OPENBSD_4_1_BASE:1.26
	OPENBSD_4_0:1.26.0.14
	OPENBSD_4_0_BASE:1.26
	OPENBSD_3_9:1.26.0.12
	OPENBSD_3_9_BASE:1.26
	OPENBSD_3_8:1.26.0.10
	OPENBSD_3_8_BASE:1.26
	OPENBSD_3_7:1.26.0.8
	OPENBSD_3_7_BASE:1.26
	OPENBSD_3_6:1.26.0.6
	OPENBSD_3_6_BASE:1.26
	OPENBSD_3_5:1.26.0.4
	OPENBSD_3_5_BASE:1.26
	OPENBSD_3_4:1.26.0.2
	OPENBSD_3_4_BASE:1.26
	OPENBSD_3_3:1.25.0.8
	OPENBSD_3_3_BASE:1.25
	OPENBSD_3_2:1.25.0.6
	OPENBSD_3_2_BASE:1.25
	OPENBSD_3_1:1.25.0.4
	OPENBSD_3_1_BASE:1.25
	OPENBSD_3_0:1.25.0.2
	OPENBSD_3_0_BASE:1.25
	OPENBSD_2_9:1.20.0.2
	OPENBSD_2_9_BASE:1.20
	OPENBSD_2_8:1.19.0.4
	OPENBSD_2_8_BASE:1.19
	OPENBSD_2_7:1.19.0.2
	OPENBSD_2_7_BASE:1.19
	OPENBSD_2_6:1.18.0.2
	OPENBSD_2_6_BASE:1.18
	OPENBSD_2_5:1.7.0.2
	OPENBSD_2_5_BASE:1.7
	NIKLAS_981114:1.1.1.1
	NIKLAS:1.1.1;
locks; strict;
comment	@# @;


1.26
date	2003.08.28.14.43.35;	author markus;	state Exp;
branches;
next	1.25;

1.25
date	2001.08.23.23.01.29;	author angelos;	state Exp;
branches;
next	1.24;

1.24
date	2001.07.06.09.35.57;	author ho;	state Exp;
branches;
next	1.23;

1.23
date	2001.07.01.20.43.39;	author niklas;	state Exp;
branches;
next	1.22;

1.22
date	2001.06.27.03.31.40;	author angelos;	state Exp;
branches;
next	1.21;

1.21
date	2001.06.12.21.53.19;	author niklas;	state Exp;
branches;
next	1.20;

1.20
date	2001.04.12.15.51.33;	author ho;	state Exp;
branches;
next	1.19;

1.19
date	2000.04.07.22.49.46;	author niklas;	state Exp;
branches;
next	1.18;

1.18
date	99.08.26.22.30.46;	author niklas;	state Exp;
branches;
next	1.17;

1.17
date	99.08.05.22.41.53;	author niklas;	state Exp;
branches;
next	1.16;

1.16
date	99.07.18.09.33.06;	author niklas;	state Exp;
branches;
next	1.15;

1.15
date	99.07.17.21.48.51;	author niklas;	state Exp;
branches;
next	1.14;

1.14
date	99.07.07.22.14.56;	author niklas;	state Exp;
branches;
next	1.13;

1.13
date	99.06.02.06.31.54;	author niklas;	state Exp;
branches;
next	1.12;

1.12
date	99.05.03.22.45.24;	author niklas;	state Exp;
branches;
next	1.11;

1.11
date	99.05.01.22.58.02;	author niklas;	state Exp;
branches;
next	1.10;

1.10
date	99.04.30.11.48.06;	author niklas;	state Exp;
branches;
next	1.9;

1.9
date	99.04.27.21.13.28;	author niklas;	state Exp;
branches;
next	1.8;

1.8
date	99.04.19.19.55.56;	author niklas;	state Exp;
branches;
next	1.7;

1.7
date	99.03.31.20.29.21;	author niklas;	state Exp;
branches;
next	1.6;

1.6
date	98.12.21.01.02.23;	author niklas;	state Exp;
branches;
next	1.5;

1.5
date	98.11.20.07.41.30;	author niklas;	state Exp;
branches;
next	1.4;

1.4
date	98.11.17.11.10.06;	author niklas;	state Exp;
branches;
next	1.3;

1.3
date	98.11.15.00.43.48;	author niklas;	state Exp;
branches;
next	1.2;

1.2
date	98.11.15.00.15.04;	author niklas;	state Exp;
branches;
next	1.1;

1.1
date	98.11.15.00.03.48;	author niklas;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.11.15.00.03.48;	author niklas;	state Exp;
branches;
next	;


desc
@@


1.26
log
@support AES in phase 1, too. switch to OpenSSL EVP interface;
with Hans-Joerg.Hoexer at yerbouti.franken.de; ok ho@@
@
text
@$OpenBSD: TO-DO,v 1.25 2001/08/23 23:01:29 angelos Exp $
$EOM: TO-DO,v 1.45 2000/04/07 22:47:38 niklas Exp $

This file mixes small nitpicks with large projects to be done.

* Add debugging messages, maybe possible to control asynchronously. [done]

* Implement the local policy governing logging and notification of exceptional
  conditions.

* A field description mechanism used for things like making packet dumps
  readable etc.  Both Photurisd and Pluto does this. [done]

* Fix the cookies. <Niels> [done]

* Garbage collect transports (ref-counting?). [done]

* Retransmission/dup packet handling. [done]

* Generic payload checks. [mostly done]

* For math, speed up multiplication and division functions.

* Cleanup of SAs when dropping messages. [done]

* Look over message resource tracking. [done]

* Retransmission timing & count adaptivity and configurability.
  [configurability done]

* Quick mode exchanges [done]

* Aggressive mode exchange. [done]

* Finish main mode exchange [done]

* Separation of key exchange from the IPsec DOI, i.e. factor out IKE details.

* Setup the IPsec situation field in the main mode. [done]

* Kernel interface for IPsec parameter passing. [done]

* Notify of unsupported situations.

* Set/get field macros generated from the field descriptions. [done]

* SIGHUP handler with reparsing of config file. [done]

* RSA signature authentication. <Niels> [done]

* DSS signature authentication.

* RSA encryption authentication.

* New group mode.

* DELETE payload handling, and generation from ui. [generation done]

* Deal well with incoming informational exchanges. [done]

* Generate all possible SA attributes in quick mode. [done]

* Validate incoming attribute according to policy, main mode. [done]

* Validate incoming attribute according to policy, quick mode. [done]

* Cleanup reserved SPIs on cleanup of associated SAs. [done]

* Validate attribute types (i.e. that what the specs tells should be
  basic).

* Cleanup reserved SPIs in proposals never chosen. [done]

* Add time measuring and reporting to the exchange code for catching of
  bottlenecks.

* Rescan interfaces on SIGHUP and on reception of messages on the INADDR_ANY
  listener socket. [done]

* Validate the configuration file.

* Do a soft-limit on ISAKMP SA lifetime. [done]

* Let the hard-limit on ISAKMP SA lifetime destroy the SA ASAP. [done]

* IPsec rekeying. [done]

* Store tunnels into SPD, and handle acquire SA events. [done]

* If an exchange is on-going when a rekey event happens, drop the request.
  [done]

* INITIAL CONTACT notification sending when appropriate. [done]

* INITIAL CONTACT notification handling. [done]

* IPsec SAs could also do with timers protecting its lifetime, if say,
  someone changed the lifetime of the IPsec SA in stack under us. [done]

* Handle notifications showing the peer did not want to continue this exchange.

* Flexible identification.

* Remove referring flows when a SPI is removed. [done]

* IPCOMP.

* Acknowledged notification exchange.

* Tiger hash.

* El-Gamal public key encryption.

* Check of attributes not being changed by the responder in phase 2.

* See to the commit bit will never be used in phase 1.  Give INVALID-FLAGS
  if seeing it.

* Base mode.

* IKECFG [protocol done, configuration controls remain]

* XAUTH framework.

* PKCS#11

* XAUTH hybrid frame work.

* Specify extra certificates to send somehow.

* Handle CERTs anywhere in an exchange.

* Add a way to do multiple configuration commands via ui.

* Replace ui's fifo with a slightly more versatile interface.

* Report current configuration. [done]

* IPv6 [done]

* AES in phase 1 [done]

* x509_certreq_validate needs implementing.

* Smartcard support.
@


1.25
log
@Update (SPD entries are deleted when SPI is removed, and new addresses
are identified on a SIGUP or INADDR_ANY packet).
@
text
@d1 1
a1 1
$OpenBSD: TO-DO,v 1.24 2001/07/06 09:35:57 ho Exp $
d141 1
a141 1
* AES in phase 1
@


1.24
log
@Remove support for PF_ENCAP (deprecated since OpenBSD2.5).
@
text
@d1 1
a1 1
$OpenBSD: TO-DO,v 1.23 2001/07/01 20:43:39 niklas Exp $
d78 1
a78 1
  listener socket.
d104 1
a104 1
* Remove referring flows when a SPI is removed.
@


1.23
log
@ISAKMP configuration, a.k.a IKECFG or "mode-config", protocol implementation.
Disabled, has no configuration mechanism yet.  This will be used for roaming
users, who are going to get parameters like IP-address and nameserver from its
peer, very much like DHCP, but securily inside an ISAKMP connection and still
in time before negotiation of IPsec connections.  You may see stylistic fixes
in this commit too.  Add some not yet used Makefile magic to deal with DNSSEC-
enabled OpenSSL too.  The IKECFG code work was sponsered by Gatespace Inc.
Thank you!  Configuration will come very soon, btw.
@
text
@d1 1
a1 1
$OpenBSD: TO-DO,v 1.22 2001/06/27 03:31:40 angelos Exp $
d88 1
a88 1
* Store tunnels into SPD, and handle acquire SA events. [pf_encap done]
@


1.22
log
@Consistently use "IPsec" capitalization (jsyn@@nthought.com)
@
text
@d1 1
a1 1
$OpenBSD: TO-DO,v 1.21 2001/06/12 21:53:19 niklas Exp $
d121 1
a121 1
* IKECFG
d137 1
a137 1
* Report current configuration.
d139 1
a139 1
* IPv6
d144 2
@


1.21
log
@more to do
@
text
@d1 1
a1 1
$OpenBSD: TO-DO,v 1.20 2001/04/12 15:51:33 ho Exp $
d37 1
a37 1
* Separation of key exchange from the IPSEC DOI, i.e. factor out IKE details.
d39 1
a39 1
* Setup the IPSEC situation field in the main mode. [done]
d41 1
a41 1
* Kernel interface for IPSEC parameter passing. [done]
@


1.20
log
@More.
@
text
@d1 1
a1 1
$OpenBSD: TO-DO,v 1.19 2000/04/07 22:49:46 niklas Exp $
d142 2
@


1.19
log
@Merge with EOM 1.45

author: niklas
Remove the log_fatal point
@
text
@d1 1
a1 1
$OpenBSD: TO-DO,v 1.18 1999/08/26 22:30:46 niklas Exp $
d138 4
@


1.18
log
@regress/rsakeygen/rsakeygen.c: Merge with EOM 1.9
regress/x509/x509test.c: Merge with EOM 1.7
DESIGN-NOTES: Merge with EOM 1.48
README.PKI: Merge with EOM 1.6
TO-DO: Merge with EOM 1.44
cert.c: Merge with EOM 1.12

author: niklas
Add support for dynamic loading of optional facilities, libcrypto first.
@
text
@d1 2
a2 2
$OpenBSD: TO-DO,v 1.17 1999/08/05 22:41:53 niklas Exp $
$EOM: TO-DO,v 1.44 1999/08/12 22:34:26 niklas Exp $
a106 3

* Remove log_fatals from policy code, if error in policy file reading fall
  back to check policy against connections.
@


1.17
log
@TO-DO: Merge with EOM 1.43
BUGS: Merge with EOM 1.32

author: niklas
Up-to-date
@
text
@d1 2
a2 2
$OpenBSD: TO-DO,v 1.16 1999/07/18 09:33:06 niklas Exp $
$EOM: TO-DO,v 1.43 1999/08/05 14:58:14 niklas Exp $
a120 2

* Can we do the X.509 stuff optional for systems without libcrypto?
@


1.16
log
@Merge with EOM 1.42

author: niklas
More stuff to do
@
text
@d1 2
a2 2
$OpenBSD: TO-DO,v 1.15 1999/07/17 21:48:51 niklas Exp $
$EOM: TO-DO,v 1.42 1999/07/18 09:12:57 niklas Exp $
d4 1
a4 2
This file is pretty lame as it should really contain a lot more given that
the program is far from ready in any area.
d137 6
@


1.15
log
@Merge with EOM 1.41

author: niklas
More stuff
@
text
@d1 2
a2 2
$OpenBSD: TO-DO,v 1.14 1999/07/07 22:14:56 niklas Exp $
$EOM: TO-DO,v 1.41 1999/07/16 09:21:16 niklas Exp $
d122 16
@


1.14
log
@DESIGN-NOTES: Merge with EOM 1.45
TO-DO: Merge with EOM 1.40

author: niklas
Up-to-date
@
text
@d1 2
a2 2
$OpenBSD: TO-DO,v 1.13 1999/06/02 06:31:54 niklas Exp $
$EOM: TO-DO,v 1.40 1999/06/15 11:33:36 niklas Exp $
d111 11
@


1.13
log
@Merge with EOM 1.39

author: niklas
Style nits

author: ho
Perhaps look into IPCOMP soon?
@
text
@d1 2
a2 2
$OpenBSD: TO-DO,v 1.12 1999/05/03 22:45:24 niklas Exp $
$EOM: TO-DO,v 1.39 1999/05/25 07:52:01 niklas Exp $
d66 1
a66 1
* Validate incoming attribute according to policy, quick mode.
d99 1
a99 2
  someone changed the lifetime of the IPsec SA in stack under us.
  [done for KLIPS]
d107 4
a110 1
* IPCOMP?  (PGP's new client defaults to using this...)
@


1.12
log
@Merge with EOM 1.37

author: niklas
Mention flow cleanup
@
text
@d1 2
a2 2
$OpenBSD: TO-DO,v 1.11 1999/05/01 22:58:02 niklas Exp $
$EOM: TO-DO,v 1.37 1999/05/03 07:59:34 niklas Exp $
d107 2
@


1.11
log
@TO-DO: Merge with EOM 1.36
sa.c: Merge with EOM 1.90
message.c: Merge with EOM 1.131
message.h: Merge with EOM 1.47

author: niklas
Send DELETE payloads in informational exchanges
@
text
@d1 2
a2 2
$OpenBSD: TO-DO,v 1.10 1999/04/30 11:48:06 niklas Exp $
$EOM: TO-DO,v 1.36 1999/05/01 22:37:29 niklas Exp $
d105 2
@


1.10
log
@BUGS: Merge with EOM 1.29
README: Merge with EOM 1.21
TO-DO: Merge with EOM 1.35

author: niklas
Up-to-date
@
text
@d1 2
a2 2
$OpenBSD: TO-DO,v 1.9 1999/04/27 21:13:28 niklas Exp $
$EOM: TO-DO,v 1.35 1999/04/30 11:37:43 niklas Exp $
d58 1
a58 1
* DELETE payload handling, and generation from ui.
@


1.9
log
@TO-DO: Merge with EOM 1.34
DESIGN-NOTES: Merge with EOM 1.41

author: niklas
Up-to-date
@
text
@d1 2
a2 2
$OpenBSD: TO-DO,v 1.8 1999/04/19 19:55:56 niklas Exp $
$EOM: TO-DO,v 1.34 1999/04/27 09:39:06 niklas Exp $
d60 1
a60 1
* Deal well with incoming informational exchanges.
@


1.8
log
@./TO-DO: Merge with EOM 1.33

Up-to-date

Up-to-date

Garbage collect transports via refcounting.  Fix commentary.

up-to-date
@
text
@d1 2
a2 2
$OpenBSD: TO-DO,v 1.7 1999/03/31 20:29:21 niklas Exp $
$EOM: TO-DO,v 1.33 1999/04/17 15:48:23 niklas Exp $
d50 1
a50 1
* RSA signature authentication <Niels> [done]
d52 1
a52 1
* DSS signature authentication
d54 1
a54 1
* RSA encryption authentication
d56 1
a56 1
* New group mode
d94 1
a94 1
* INITIAL CONTACT notification sending when appropriate.
d96 1
a96 1
* INITIAL CONTACT notification handling.
d100 1
@


1.7
log
@Merge with EOM 1.29
Reflect reality
@
text
@d1 2
a2 2
$OpenBSD: TO-DO,v 1.6 1998/12/21 01:02:23 niklas Exp $
$EOM: TO-DO,v 1.29 1999/03/31 20:24:49 niklas Exp $
d17 1
a17 1
* Garbage collect transports (ref-counting?).
d27 1
a27 1
* Look over message resource tracking.
d34 1
a34 1
* Aggressive mode exchange. <Niels>
d97 7
@


1.6
log
@Last months worth of work on isakmpd, lots done
@
text
@d1 2
a2 2
$OpenBSD: TO-DO,v 1.5 1998/11/20 07:41:30 niklas Exp $
$EOM: TO-DO,v 1.28 1998/12/17 07:50:49 niklas Exp $
d83 1
a83 1
* Do a soft-limit on ISAKMP SA lifetime.
d85 1
a85 1
* Let the hard-limit on ISAKMP SA lifetime destroy the SA ASAP.
d87 1
a87 1
* IPsec rekeying.
d89 1
a89 1
* Store tunnels into SPD, and handle acquire SA events.
d92 5
@


1.5
log
@update
@
text
@d1 2
a2 2
$OpenBSD: TO-DO,v 1.4 1998/11/17 11:10:06 niklas Exp $
$EOM: TO-DO,v 1.27 1998/11/20 07:19:49 niklas Exp $
d82 10
@


1.4
log
@Add RCS Ids from the EOM repository
@
text
@d1 2
a2 2
$OpenBSD: TO-DO,v 1.3 1998/11/15 00:43:48 niklas Exp $
$EOM: TO-DO,v 1.25 1998/10/11 16:17:01 niklas Exp $
d64 1
a64 1
* Validate incoming attribute according to policy, main mode.
d80 2
@


1.3
log
@openBSD RCS IDs
@
text
@d1 2
a2 1
$OpenBSD: TO-DO,v 1.2 1998/11/15 00:15:04 niklas Exp $
@


1.2
log
@Reflect reality
@
text
@d1 1
a1 1
$Id: TO-DO,v 1.1.1.1 1998/11/15 00:03:48 niklas Exp $
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$Id: TO-DO,v 1.25 1998/10/11 16:17:01 niklas Exp $
d41 1
a41 1
* Kernel interface for IPSEC parameter passing.
@


1.1.1.1
log
@Initial import of isakmpd, an IKE (ISAKMP/Oakley) implementation for the
OpenBSD IPSEC stack by me, Niklas Hallqvist and Niels Provos, funded by
Ericsson Radio Systems.  It is not yet complete or usable in a real scenario
but the missing pieces will soon be there.  The early commit is for people
who wants early access and who are not afraid of looking at source.
isakmpd interops with Cisco, Timestep, SSH & Pluto (Linux FreeS/WAN) so
far, so it is not that incomplete.  It is really mostly configuration that
is lacking.
@
text
@@
