head	1.26;
access;
symbols
	OPENBSD_6_0:1.25.0.4
	OPENBSD_6_0_BASE:1.25
	OPENBSD_5_9:1.25.0.2
	OPENBSD_5_9_BASE:1.25
	OPENBSD_5_8:1.24.0.4
	OPENBSD_5_8_BASE:1.24
	OPENBSD_5_7:1.23.0.6
	OPENBSD_5_7_BASE:1.23
	OPENBSD_5_6:1.23.0.10
	OPENBSD_5_6_BASE:1.23
	OPENBSD_5_5:1.23.0.8
	OPENBSD_5_5_BASE:1.23
	OPENBSD_5_4:1.23.0.4
	OPENBSD_5_4_BASE:1.23
	OPENBSD_5_3:1.23.0.2
	OPENBSD_5_3_BASE:1.23
	OPENBSD_5_2:1.22.0.12
	OPENBSD_5_2_BASE:1.22
	OPENBSD_5_1_BASE:1.22
	OPENBSD_5_1:1.22.0.10
	OPENBSD_5_0:1.22.0.8
	OPENBSD_5_0_BASE:1.22
	OPENBSD_4_9:1.22.0.6
	OPENBSD_4_9_BASE:1.22
	OPENBSD_4_8:1.22.0.4
	OPENBSD_4_8_BASE:1.22
	OPENBSD_4_7:1.22.0.2
	OPENBSD_4_7_BASE:1.22
	OPENBSD_4_6:1.19.0.12
	OPENBSD_4_6_BASE:1.19
	OPENBSD_4_5:1.19.0.8
	OPENBSD_4_5_BASE:1.19
	OPENBSD_4_4:1.19.0.6
	OPENBSD_4_4_BASE:1.19
	OPENBSD_4_3:1.19.0.4
	OPENBSD_4_3_BASE:1.19
	OPENBSD_4_2:1.19.0.2
	OPENBSD_4_2_BASE:1.19
	OPENBSD_4_1:1.18.0.10
	OPENBSD_4_1_BASE:1.18
	OPENBSD_4_0:1.18.0.8
	OPENBSD_4_0_BASE:1.18
	OPENBSD_3_9:1.18.0.6
	OPENBSD_3_9_BASE:1.18
	OPENBSD_3_8:1.18.0.4
	OPENBSD_3_8_BASE:1.18
	OPENBSD_3_7:1.18.0.2
	OPENBSD_3_7_BASE:1.18
	OPENBSD_3_6:1.16.0.6
	OPENBSD_3_6_BASE:1.16
	OPENBSD_3_5:1.16.0.4
	OPENBSD_3_5_BASE:1.16
	OPENBSD_3_4:1.16.0.2
	OPENBSD_3_4_BASE:1.16
	OPENBSD_3_3:1.13.0.10
	OPENBSD_3_3_BASE:1.13
	OPENBSD_3_2:1.13.0.8
	OPENBSD_3_2_BASE:1.13
	OPENBSD_3_1:1.13.0.6
	OPENBSD_3_1_BASE:1.13
	OPENBSD_3_0:1.13.0.4
	OPENBSD_3_0_BASE:1.13
	OPENBSD_2_9:1.13.0.2
	OPENBSD_2_9_BASE:1.13
	OPENBSD_2_8:1.12.0.4
	OPENBSD_2_8_BASE:1.12
	OPENBSD_2_7:1.12.0.2
	OPENBSD_2_7_BASE:1.12
	OPENBSD_2_6:1.10.0.2
	OPENBSD_2_6_BASE:1.10
	OPENBSD_2_5:1.7.0.2
	OPENBSD_2_5_BASE:1.7
	OPENBSD_2_4:1.4.0.2
	OPENBSD_2_4_BASE:1.4
	OPENBSD_2_3:1.2.0.6
	OPENBSD_2_3_BASE:1.2
	OPENBSD_2_2:1.2.0.4
	OPENBSD_2_2_BASE:1.2
	OPENBSD_2_1:1.2.0.2
	OPENBSD_2_1_BASE:1.2;
locks; strict;
comment	@# @;


1.26
date	2016.09.01.13.48.15;	author otto;	state Exp;
branches;
next	1.25;
commitid	E91BgziS5plHyhOY;

1.25
date	2015.10.14.14.33.45;	author deraadt;	state Exp;
branches;
next	1.24;
commitid	BweGlCJbPgfbxjH9;

1.24
date	2015.07.27.18.46.19;	author jmc;	state Exp;
branches;
next	1.23;
commitid	U6t1VbVNqdg9vGTD;

1.23
date	2013.02.11.17.35.46;	author jmc;	state Exp;
branches;
next	1.22;

1.22
date	2010.03.03.15.05.38;	author otto;	state Exp;
branches;
next	1.21;

1.21
date	2010.01.10.10.53.33;	author jmc;	state Exp;
branches;
next	1.20;

1.20
date	2010.01.03.16.43.45;	author schwarze;	state Exp;
branches;
next	1.19;

1.19
date	2007.05.31.19.19.44;	author jmc;	state Exp;
branches;
next	1.18;

1.18
date	2005.02.03.09.10.32;	author jmc;	state Exp;
branches;
next	1.17;

1.17
date	2005.02.03.05.00.08;	author jaredy;	state Exp;
branches;
next	1.16;

1.16
date	2003.07.08.18.50.40;	author jmc;	state Exp;
branches;
next	1.15;

1.15
date	2003.06.03.13.16.08;	author jmc;	state Exp;
branches;
next	1.14;

1.14
date	2003.06.02.20.06.15;	author millert;	state Exp;
branches;
next	1.13;

1.13
date	2001.04.23.15.30.26;	author aaron;	state Exp;
branches;
next	1.12;

1.12
date	2000.03.28.23.53.17;	author deraadt;	state Exp;
branches;
next	1.11;

1.11
date	2000.03.18.22.55.57;	author aaron;	state Exp;
branches;
next	1.10;

1.10
date	99.07.21.01.07.53;	author deraadt;	state Exp;
branches;
next	1.9;

1.9
date	99.06.04.02.45.16;	author aaron;	state Exp;
branches;
next	1.8;

1.8
date	99.05.23.14.11.15;	author aaron;	state Exp;
branches;
next	1.7;

1.7
date	98.12.15.01.20.31;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	98.11.28.19.56.19;	author aaron;	state Exp;
branches;
next	1.5;

1.5
date	98.11.11.22.19.57;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	98.09.23.01.20.23;	author aaron;	state Exp;
branches;
next	1.3;

1.3
date	98.09.17.04.14.52;	author aaron;	state Exp;
branches;
next	1.2;

1.2
date	97.03.27.16.28.52;	author kstailey;	state Exp;
branches;
next	1.1;

1.1
date	96.10.20.08.36.33;	author tholo;	state Exp;
branches;
next	;


desc
@@


1.26
log
@better words for -b, wiyh help from jmc@@
@
text
@.\"	$OpenBSD: fsck_ffs.8,v 1.25 2015/10/14 14:33:45 deraadt Exp $
.\"	$NetBSD: fsck_ffs.8,v 1.12 1996/09/23 16:18:34 christos Exp $
.\"
.\" Copyright (c) 1980, 1989, 1991, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"	@@(#)fsck.8	8.3 (Berkeley) 11/29/94
.\"
.Dd $Mdocdate: October 14 2015 $
.Dt FSCK_FFS 8
.Os
.Sh NAME
.Nm fsck_ffs
.Nd Fast File System consistency check and interactive repair
.Sh SYNOPSIS
.Nm fsck_ffs
.Op Fl fnpy
.Op Fl b Ar block#
.Op Fl c Ar level
.Op Fl m Ar mode
.Ar filesystem
.Sh DESCRIPTION
.Nm
performs interactive file system consistency checks and repairs the
file system specified.
It is normally invoked from
.Xr fsck 8 .
.Pp
The kernel takes care that only a restricted class of innocuous file system
inconsistencies can happen unless hardware or software failures intervene.
These are limited to the following:
.Pp
.Bl -item -compact -offset indent
.It
Unreferenced inodes
.It
Link counts in inodes too large
.It
Missing blocks in the free map
.It
Blocks in the free map also in files
.It
Counts in the super-block wrong
.El
.Pp
These are the only inconsistencies that
.Nm
with the
.Fl p
option will correct; if it encounters other inconsistencies, it exits
with an abnormal return status and an automatic reboot will then fail.
For each corrected inconsistency, one or more lines will be printed
identifying the file system on which the correction will take place
along with the nature of the correction.
After successfully correcting a file system,
.Nm
will print the number of files on that file system,
the number of used and free blocks,
and the percentage of fragmentation.
.Pp
If sent a
.Dv QUIT
signal,
.Nm
will finish the file system checks, then exit with an abnormal
return status that causes an automatic reboot to fail.
This is useful when you want to finish the file system checks during an
automatic reboot,
but do not want the machine to come up multiuser after the checks complete.
.Pp
If sent an
.Dv INFO
signal,
.Nm
will print a line to standard error indicating the name of the device
currently being checked, the current phase number, and phase-specific
progress information.
.Pp
Without the
.Fl p
option,
.Nm
audits and interactively repairs inconsistent conditions for the filesystem.
If the file system is inconsistent, the operator is prompted for concurrence
before each correction is attempted.
It should be noted that some of the corrective actions which are not
correctable under the
.Fl p
option will result in some loss of data.
The amount and severity of data lost may be determined from the diagnostic
output.
The default action for each consistency correction
is to wait for the operator to respond
.Dq yes
or
.Dq no .
If the operator does not have write permission on the file system,
.Nm
will default to a
.Fl n
action.
.Pp
.Nm fsck
has more consistency checks than
its predecessors
.Em check , dcheck , fcheck ,
and
.Em icheck
combined.
.Pp
The following flags are interpreted by
.Nm fsck_ffs :
.Bl -tag -width indent
.It Fl b Ar block#
Use the
.Ar block#
specified as
the super block for the file system.
If the primary superblock is corrupted
.Nm
tries to find a valid alternate superblock based on the
information in the disklabel.
If that fails, a number printed by
.Nm newfs
(using
.Fl N
combined with the original flags used to create the filesystem)
can be used as a value to this argument.
.It Fl c Ar level
Convert the file system to the specified
.Ar level .
Note that the level of a file system can only be raised.
There are currently four levels defined:
.Bl -tag -width indent
.It 0
The file system is in the old (static table) format.
.It 1
The file system is in the new (dynamic table) format.
.It 2
The file system supports 32-bit UIDs and GIDs,
short symbolic links are stored in the inode,
and directories have an added field showing the file type.
.It 3
If
.Va maxcontig
is greater than one,
build the free segment maps to aid in finding contiguous sets of blocks.
If
.Va maxcontig
is equal to one, delete any existing segment maps.
.El
.It Fl f
Force checking of the filesystem.
Normally, if a file system is cleanly unmounted, the kernel will set a
.Dq clean flag
in the file system superblock and
.Nm
will not check the file system.
This option forces
.Nm
to check the file system, regardless of the state of the clean flag.
.It Fl m Ar mode
Use the
.Ar mode
specified in octal as the
permission bits to use when creating the
.Pa lost+found
directory rather than the default 1700.
In particular, systems that wish to have lost files accessible
by all users on the system should use a less restrictive
set of permissions such as 755.
.It Fl n
Assume a
.Dq no
response to all questions asked by
.Nm
except for
.Dq CONTINUE? ,
which is assumed to be affirmative.
The filesystem will not be opened for writing.
This is the default for file systems to be checked that are
concurrently mounted writable.
.It Fl p
Enter preen mode:
.Nm
will check the filesystem on the
special (raw) device listed on the command line
and will make minor repairs without
human intervention.
Any major problems will cause
.Nm
to exit with a non-zero exit code,
so as to alert any invoking program or script
that human intervention is required.
.It Fl y
Assume a
.Dq yes
response to all questions asked by
.Nm fsck_ffs ;
this should be used with great caution as this is a free license
to continue after essentially unlimited trouble has been encountered.
.El
.Pp
If neither of the
.Fl y
or
.Fl n
options are specified, the user may force
.Nm
to assume an answer of
.Dq yes
to all the remaining questions by replying to a question with a value of
.Dq F .
.Pp
In interactive mode,
.Nm
will list the conversion to be made
and ask whether the conversion should be done.
If a negative answer is given,
no further operations are done on the file system.
In preen mode,
the conversion is listed and done if
possible without user interaction.
Conversion in preen mode is best used when all the file systems
are being converted at once.
The format of a file system can be determined from the
first line of output from
.Xr dumpfs 8 .
.Pp
Inconsistencies checked are as follows:
.Pp
.Bl -enum -compact
.It
Blocks claimed more than once by inodes or the free map.
.It
Blocks claimed by an inode outside the range of the file system.
.It
Incorrect link counts.
.It
Size checks:
.Bl -item -compact -offset indent
.It
Directory size not a multiple of
.Dv DIRBLKSIZ .
.It
Partially truncated file.
.El
.It
Bad inode format.
.It
Blocks not accounted for anywhere.
.It
Directory checks:
.Bl -item -compact -offset indent
.It
File pointing to unallocated inode.
.It
Inode number out of range.
.It
Dot or dot-dot not the first two entries of a directory
or having the wrong inode number.
.El
.It
Super Block checks:
.Bl -item -compact -offset indent
.It
More blocks for inodes than there are in the file system.
.It
Bad free block map format.
.It
Total free block and/or free inode count incorrect.
.El
.El
.Pp
Orphaned files and directories (allocated but unreferenced) are,
with the operator's concurrence, reconnected by
placing them in the
.Pa lost+found
directory.
The name assigned is the inode number.
If the
.Pa lost+found
directory does not exist, it is created.
If there is insufficient space its size is increased.
.Pp
Because of inconsistencies between the block device and the buffer cache,
the raw device should always be used.
.Sh DIAGNOSTICS
The diagnostics produced by
.Nm
are fully enumerated and explained in Appendix A of
.Rs
.%T "Fsck_ffs \- The UNIX File System Check Program"
.Re
.Sh SEE ALSO
.Xr fs 5 ,
.Xr fstab 5 ,
.Xr fsck 8 ,
.Xr fsdb 8 ,
.Xr growfs 8 ,
.Xr mount_ffs 8 ,
.Xr newfs 8 ,
.Xr rc 8 ,
.Xr scan_ffs 8
@


1.25
log
@Only accept one filesystem/device as argument for checking.  Few people
will be calling these directly, and not for the multiple filesystem case.
fsck(8) is generally the parent and will handle things.
ok semarie; this change will also help a goal jsing has
@
text
@d1 1
a1 1
.\"	$OpenBSD: fsck_ffs.8,v 1.24 2015/07/27 18:46:19 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: July 27 2015 $
d143 10
a152 1
Block 32 is usually an alternate super block.
@


1.24
log
@document "F" in interactive mode, like for fsck.8;
from michael mcconville

ok deraadt
@
text
@d1 1
a1 1
.\"	$OpenBSD: fsck_ffs.8,v 1.23 2013/02/11 17:35:46 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: February 11 2013 $
d45 1
a45 1
.Ar filesystem ...
d48 1
a48 1
performs interactive file system consistency checks and repairs for each
d107 1
a107 1
audits and interactively repairs inconsistent conditions for file systems.
d168 1
a168 1
Force checking of file systems.
d195 1
a195 1
File systems will not be opened for writing.
d201 2
a202 2
will check the file systems on the
special (raw) devices listed on the command line
@


1.23
log
@Xr scan_ffs 8; requested by Scott McEachern
@
text
@d1 1
a1 1
.\"	$OpenBSD: fsck_ffs.8,v 1.22 2010/03/03 15:05:38 otto Exp $
d33 1
a33 1
.Dd $Mdocdate: March 3 2010 $
d218 11
@


1.22
log
@Add description of -p and remove reference to fstab processing.
Prompted by J.C. Robers; ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: fsck_ffs.8,v 1.21 2010/01/10 10:53:33 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: January 10 2010 $
d307 2
a308 1
.Xr rc 8
@


1.21
log
@remove references to docs we no longer install;
@
text
@d1 1
a1 1
.\"	$OpenBSD: fsck_ffs.8,v 1.20 2010/01/03 16:43:45 schwarze Exp $
d33 1
a33 1
.Dd $Mdocdate: January 3 2010 $
d198 12
a232 6
.Pp
If no file systems are given to
.Nm
then a default list of file systems is read from
the file
.Pa /etc/fstab .
@


1.20
log
@Neither .Pp nor unqualified text are allowed at the top level of .Bl;
instead, .It is required.  Thus, move .Pp and text before the .Bl,
and remove the .Pp altogether where it is not needed.

Syntax errors found by mandoc(1), also required to fix the mandoc build;
feedback and ok jmc@@, and sobrado@@ also supports the direction.
@
text
@d1 1
a1 1
.\"	$OpenBSD: fsck_ffs.8,v 1.19 2007/05/31 19:19:44 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: May 31 2007 $
a301 4
.Rs
.%T "Fsck_ffs \- The UNIX File System Check Program"
.%O /usr/share/doc/smm/03.fsck_ffs
.Re
@


1.19
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: fsck_ffs.8,v 1.18 2005/02/03 09:10:32 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate$
d148 1
a149 1
There are currently four levels defined:
@


1.18
log
@misplaced .El marker;
@
text
@d1 1
a1 1
.\"	$OpenBSD: fsck_ffs.8,v 1.17 2005/02/03 05:00:08 jaredy Exp $
d33 1
a33 1
.Dd November 29, 1994
@


1.17
log
@- simplify, normalize, and sync usage/synopsis forms
- filesystem -> file system, for consistency
- indent sections where applicable
- mdoc, punctuation, grammar, etc. fixes
- document SIGINFO to fsck_ffs
- unify description of -n among documents
- sprinkle xrefs all around
- move parts relevant to fsck.8 from fsck_ffs.8

parts from NetBSD

ok jmc
@
text
@d1 1
a1 1
.\"	$OpenBSD: fsck_ffs.8,v 1.16 2003/07/08 18:50:40 jmc Exp $
d166 1
a220 1
.El
@


1.16
log
@- fix some lists/displays
- use .Dl for one-liners, rather than .Bd
@
text
@d1 1
a1 1
.\"	$OpenBSD: fsck_ffs.8,v 1.15 2003/06/03 13:16:08 jmc Exp $
d41 1
a41 5
.Fl p
.Op Fl f
.Op Fl m Ar mode
.Nm fsck_ffs
.Op Fl f
a43 2
.Op Fl y
.Op Fl n
d45 1
a45 2
.Op Ar filesystem
.Ar ...
a46 1
The first form of
d48 4
a51 22
preens a standard set of filesystems or the specified filesystems.
It is normally used in the script
.Pa /etc/rc
during automatic reboot.
Here
.Nm
reads the table
.Pa /etc/fstab
to determine which filesystems to check.
Only partitions in fstab that are mounted
.Dq rw ,
.Dq rq ,
or
.Dq ro
and have non-zero pass numbers are checked.
Filesystems with pass number 1 (normally just the root filesystem)
are checked one at a time.
When pass 1 completes, all remaining filesystems are checked,
running one process per disk drive.
The disk drive containing each filesystem is inferred from the longest prefix
of the device name that ends in a digit; the remaining characters are assumed
to be the partition designator.
d53 1
a53 1
The kernel takes care that only a restricted class of innocuous filesystem
d57 1
a57 1
.Bl -item -compact
d76 4
a79 4
For each corrected inconsistency one or more lines will be printed
identifying the filesystem on which the correction will take place,
and the nature of the correction.
After successfully correcting a filesystem,
d81 1
a81 1
will print the number of files on that filesystem,
d89 1
a89 1
will finish the filesystem checks, then exit with an abnormal
d91 1
a91 1
This is useful when you want to finish the filesystem checks during an
d95 8
d107 2
a108 2
audits and interactively repairs inconsistent conditions for filesystems.
If the filesystem is inconsistent the operator is prompted for concurrence
d121 1
a121 1
If the operator does not have write permission on the filesystem,
d138 28
a175 6
.It Fl b Ar block#
Use the
.Ar block
specified as
the super block for the filesystem.
Block 32 is usually an alternate super block.
d186 11
a203 31
.It Fl n
Assume a
.Dq no
response to all questions asked by
.Nm
except for
.Dq CONTINUE? ,
which is assumed to be affirmative;
do not open the filesystem for writing.
.It Fl c Ar level
Convert the filesystem to the specified
.Ar level .
Note that the level of a filesystem can only be raised.
.Bl -tag -width indent
There are currently four levels defined:
.It 0
The filesystem is in the old (static table) format.
.It 1
The filesystem is in the new (dynamic table) format.
.It 2
The filesystem supports 32-bit UIDs and GIDs,
short symbolic links are stored in the inode,
and directories have an added field showing the file type.
.It 3
If
.Va maxcontig
is greater than one,
build the free segment maps to aid in finding contiguous sets of blocks.
If
.Va maxcontig
is equal to one, delete any existing segment maps.
d211 1
a211 1
no further operations are done on the filesystem.
d215 1
a215 1
Conversion in preen mode is best used when all the filesystems
d217 1
a217 1
The format of a filesystem can be determined from the
d222 1
a222 1
If no filesystems are given to
d224 1
a224 1
then a default list of filesystems is read from
d232 1
a232 1
Blocks claimed by more than one inode or the free map.
d234 1
a234 1
Blocks claimed by an inode outside the range of the filesystem.
d239 1
a239 1
.Bl -item -compact
d241 2
a242 1
Directory size not a multiple of DIRBLKSIZ.
d252 1
a252 1
.Bl -item -compact
d263 1
a263 1
.Bl -item -compact
d265 1
a265 1
More blocks for inodes than there are in the filesystem.
a285 5
.Sh FILES
.Bl -tag -width /etc/fstab -compact
.It Pa /etc/fstab
contains default list of filesystems to check
.El
d291 1
a291 1
.%T "Fsck \- The UNIX File System Check Program"
d298 2
d301 5
a305 1
.Xr reboot 8
@


1.15
log
@- section reorder
- some mdoc fixes
@
text
@d1 1
a1 1
.\"	$OpenBSD: fsck_ffs.8,v 1.14 2003/06/02 20:06:15 millert Exp $
a243 1
.Bl -enum -indent indent -compact
d246 1
d255 1
a255 1
.Bl -item -indent indent -compact
d267 1
a267 1
.Bl -item -indent indent -compact
d278 1
a278 1
.Bl -item -indent indent -compact
@


1.14
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
.\"	$OpenBSD: fsck_ffs.8,v 1.13 2001/04/23 15:30:26 aaron Exp $
d316 1
a317 1
.Xr fsck 8 ,
@


1.13
log
@Various man page fixes and improvements from gluk@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: fsck_ffs.8,v 1.12 2000/03/28 23:53:17 deraadt Exp $
d15 1
a15 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
@


1.12
log
@mkfs(8) died a long time ago
@
text
@d1 1
a1 1
.\"	$OpenBSD: fsck_ffs.8,v 1.11 2000/03/18 22:55:57 aaron Exp $
d41 1
a41 1
.Nm fsck_ffs , fsck
d321 1
@


1.11
log
@Remove hard sentence breaks, and some other cleanup along the way.
@
text
@d1 1
a1 1
.\"	$OpenBSD: fsck_ffs.8,v 1.10 1999/07/21 01:07:53 deraadt Exp $
a320 1
.Xr mkfs 8 ,
@


1.10
log
@use .Ar on later .It Fl lines
@
text
@d1 1
a1 1
.\"	$OpenBSD: fsck_ffs.8,v 1.9 1999/06/04 02:45:16 aaron Exp $
d108 2
a109 1
and the nature of the correction.  After successfully correcting a filesystem,
d161 2
a162 2
Force checking of file systems.  Normally, if a file system is cleanly
unmounted, the kernel will set a
d166 2
a167 1
will not check the file system.  This option forces
d174 2
a175 2
the super block for the filesystem.  Block 32 is usually
an alternate super block.
@


1.9
log
@start to remove non-escaped trailing whitespace, it can confuse troff; pjanzen@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: fsck_ffs.8,v 1.8 1999/05/23 14:11:15 aaron Exp $
d168 4
a171 2
.It Fl b
Use the block specified immediately after the flag as
d174 4
a177 2
.It Fl m
Use the mode specified in octal immediately after the flag as the
d200 3
a202 2
.It Fl c
Convert the filesystem to the specified level.
@


1.8
log
@remove argument from .Os macros so value in /usr/share/tmac/mdoc/doc-common
is used instead; kwesterback@@home.com
@
text
@d1 1
a1 1
.\"	$OpenBSD: fsck_ffs.8,v 1.7 1998/12/15 01:20:31 aaron Exp $
d128 1
a128 1
audits and interactively repairs inconsistent conditions for filesystems. 
d144 1
a144 1
will default to a 
d183 1
a183 1
response to all questions asked by 
d190 1
a190 1
response to all questions asked by 
d207 1
a207 1
short symbolic links are stored in the inode, 
d231 1
a231 1
first line of output from 
d235 1
a235 1
If no filesystems are given to 
d253 1
a253 1
.It 
d265 1
a265 1
.It 
d276 1
a276 1
.It 
d287 1
a287 1
placing them in the 
d304 1
a304 1
The diagnostics produced by 
@


1.7
log
@always give .Nm macros an argument in SYNOPSIS sections; krw@@tcn.net
@
text
@d1 1
a1 1
.\"	$OpenBSD: fsck_ffs.8,v 1.6 1998/11/28 19:56:19 aaron Exp $
d39 1
a39 1
.Os BSD 4
@


1.6
log
@kill redundant .Nm macro arguments; other misc fixes
@
text
@d1 1
a1 1
.\"	$OpenBSD: fsck_ffs.8,v 1.5 1998/11/11 22:19:57 aaron Exp $
d44 1
a44 1
.Nm
d48 1
a48 1
.Nm
@


1.5
log
@more `` '' -> .Dq sillyness; remove redundant .Pp macros; other misc fixes
@
text
@d1 1
a1 1
.\"	$OpenBSD: fsck_ffs.8,v 1.4 1998/09/23 01:20:23 aaron Exp $
d41 1
a41 1
.Nm fsck_ffs, fsck
d44 1
a44 1
.Nm fsck_ffs
d48 1
a48 1
.Nm fsck_ffs
d59 1
a59 1
.Nm fsck_ffs
d65 1
a65 1
.Nm fsck_ffs
d101 1
a101 1
.Nm fsck_ffs
d109 1
a109 1
.Nm fsck_ffs
d117 1
a117 1
.Nm fsck_ffs
d127 1
a127 1
.Nm fsck_ffs
d143 1
a143 1
.Nm fsck_ffs
d157 1
a157 1
.Nm fsck_ffs .
d164 1
a164 1
.Nm fsck_ffs
d166 1
a166 1
.Nm fsck_ffs
d191 1
a191 1
.Nm fsck_ffs
d220 1
a220 1
.Nm fsck_ffs
d236 1
a236 1
.Nm fsck_ffs
d305 1
a305 1
.Nm fsck_ffs
@


1.4
log
@alphabetize SEE ALSO entries and order them numerically according to section
@
text
@d1 1
a1 1
.\"	$OpenBSD: fsck_ffs.8,v 1.3 1998/09/17 04:14:52 aaron Exp $
d69 5
a73 1
Only partitions in fstab that are mounted ``rw'', ``rq'' or ``ro''
d193 1
a193 1
.Ql CONTINUE? ,
@


1.3
log
@sbin/ man page fixes
@
text
@d1 1
a1 1
.\"	$OpenBSD: fsck_ffs.8,v 1.2 1997/03/27 16:28:52 kstailey Exp $
d307 1
a308 1
.Xr fs 5 ,
d310 1
a311 1
.Xr mkfs 8 ,
@


1.2
log
@use 700 not 777 for new lost+found dirs
@
text
@d1 1
a1 1
.\"	$OpenBSD: fsck_ffs.8,v 1.1 1996/10/20 08:36:33 tholo Exp $
d69 2
a70 2
Only partitions in fstab that are mounted ``rw,'' ``rq'' or ``ro''
and that have non-zero pass number are checked.
d82 1
d135 1
a135 1
.Li yes
d137 2
a138 2
.Li no .
If the operator does not have write permission on the filesystem
d144 1
a144 1
.Nm Fsck
d159 2
a160 2
in the file system superblock, and
.Nm
d162 1
a162 1
.Nm
d177 3
a179 1
Assume a yes response to all questions asked by 
d184 3
a186 1
Assume a no response to all questions asked by 
d202 1
a202 1
The filesystem supports 32-bit uid's and gid's,
d206 3
a208 1
If maxcontig is greater than one,
d210 3
a212 1
If maxcontig is equal to one, delete any existing segment maps.
d239 1
d297 1
a297 1
contains default list of filesystems to check.
@


1.1
log
@Sync with NetBSD 961019
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d171 4
a174 4
directory rather than the default 1777.
In particular, systems that do not wish to have lost files accessible
by all users on the system should use a more restrictive
set of permissions such as 700.
@
