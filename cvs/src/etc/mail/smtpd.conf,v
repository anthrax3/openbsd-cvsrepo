head	1.9;
access;
symbols
	OPENBSD_6_1:1.9.0.2
	OPENBSD_6_1_BASE:1.9
	OPENBSD_6_0:1.9.0.4
	OPENBSD_6_0_BASE:1.9
	OPENBSD_5_9:1.8.0.2
	OPENBSD_5_9_BASE:1.8
	OPENBSD_5_8:1.7.0.8
	OPENBSD_5_8_BASE:1.7
	OPENBSD_5_7:1.7.0.2
	OPENBSD_5_7_BASE:1.7
	OPENBSD_5_6:1.7.0.4
	OPENBSD_5_6_BASE:1.7
	OPENBSD_5_5:1.6.0.8
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.6.0.4
	OPENBSD_5_4_BASE:1.6
	OPENBSD_5_3:1.6.0.2
	OPENBSD_5_3_BASE:1.6
	OPENBSD_5_2:1.4.0.2
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.10
	OPENBSD_5_0:1.2.0.8
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.6
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.4
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.2
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.1.0.4
	OPENBSD_4_6_BASE:1.1;
locks; strict;
comment	@# @;


1.9
date	2016.05.03.18.43.45;	author jung;	state Exp;
branches;
next	1.8;
commitid	gvlv4gzjODZygYCL;

1.8
date	2015.12.21.16.25.44;	author sunil;	state Exp;
branches;
next	1.7;
commitid	ViuFmraiyF1oyiR1;

1.7
date	2014.03.12.18.21.34;	author tedu;	state Exp;
branches;
next	1.6;

1.6
date	2013.01.26.09.38.25;	author gilles;	state Exp;
branches;
next	1.5;

1.5
date	2012.10.11.21.16.28;	author gilles;	state Exp;
branches;
next	1.4;

1.4
date	2012.07.16.05.56.16;	author jmc;	state Exp;
branches;
next	1.3;

1.3
date	2012.05.12.18.47.41;	author gilles;	state Exp;
branches;
next	1.2;

1.2
date	2009.11.03.22.32.10;	author gilles;	state Exp;
branches;
next	1.1;

1.1
date	2009.03.17.00.00.16;	author gilles;	state Exp;
branches;
next	;


desc
@@


1.9
log
@listen directive may use a table for authentication, to make this work the
table has to be defined BEFORE
consequently move all tables in the examples to the beginning and before the
listen directive to avoid tables not being found

no functional change

ran into this myself earlier, also reported by cjones via irc

ok gilles
@
text
@#	$OpenBSD: smtpd.conf,v 1.8 2015/12/21 16:25:44 sunil Exp $

# This is the smtpd server system-wide configuration file.
# See smtpd.conf(5) for more information.

table aliases file:/etc/mail/aliases

# To accept external mail, replace with: listen on all
#
listen on lo0

# Uncomment the following to accept external mail for domain "example.org"
#
# accept from any for domain "example.org" alias <aliases> deliver to mbox
accept for local alias <aliases> deliver to mbox
accept from local for any relay
@


1.8
log
@Switch to 'file' backend for aliases table for default configuration.

Ok gilles@@ jung@@ millert@@
@
text
@d1 1
a1 1
#	$OpenBSD: smtpd.conf,v 1.7 2014/03/12 18:21:34 tedu Exp $
d6 2
a10 2

table aliases file:/etc/mail/aliases
@


1.7
log
@switch over to smtpd by default.
ok deraadt gilles todd
@
text
@d1 1
a1 1
#	$OpenBSD: smtpd.conf,v 1.6 2013/01/26 09:38:25 gilles Exp $
d10 1
a10 1
table aliases db:/etc/mail/aliases.db
@


1.6
log
@update smtpd.conf, map API gone and replaced with table API
@
text
@d1 1
a1 1
#	$OpenBSD: smtpd.conf,v 1.5 2012/10/11 21:16:28 gilles Exp $
d16 1
a16 1
accept for any relay
@


1.5
log
@- replace "all" with "any"
- add examples for how to accept mail from external source and for a
	specific domain
@
text
@d1 1
a1 1
#	$OpenBSD: smtpd.conf,v 1.4 2012/07/16 05:56:16 jmc Exp $
d10 1
a10 1
map aliases source db "/etc/mail/aliases.db"
d14 2
a15 2
# accept from any for domain "example.org" alias aliases deliver to mbox
accept for local alias aliases deliver to mbox
@


1.4
log
@don;t quote things unneccessarily; ok gilles
@
text
@d1 1
a1 1
#	$OpenBSD: smtpd.conf,v 1.3 2012/05/12 18:47:41 gilles Exp $
d6 2
d12 3
d16 1
a16 1
accept for all relay
@


1.3
log
@remove the brackets in aliases map declaration, they look ugly
@
text
@d1 1
a1 1
#	$OpenBSD: smtpd.conf,v 1.2 2009/11/03 22:32:10 gilles Exp $
d8 1
a8 1
map "aliases" source db "/etc/mail/aliases.db"
@


1.2
log
@to resolve aliases, a rule must now provide the alias parameter with the
name of the map to use for resolution
@
text
@d1 1
a1 1
#	$OpenBSD: smtpd.conf,v 1.1 2009/03/17 00:00:16 gilles Exp $
d8 1
a8 1
map "aliases" { source db "/etc/mail/aliases.db" }
@


1.1
log
@move smtpd.conf to etc/mail/ directory. it is not installed yet by the
build
@
text
@d1 1
a1 1
#	$OpenBSD: smtpd.conf,v 1.7 2009/03/16 23:40:28 gilles Exp $
d10 1
a10 1
accept for local deliver to mbox
@

