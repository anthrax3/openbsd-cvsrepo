head	1.7;
access;
symbols
	OPENBSD_6_1_BASE:1.7
	OPENBSD_6_0:1.7.0.14
	OPENBSD_6_0_BASE:1.7
	OPENBSD_5_9:1.7.0.8
	OPENBSD_5_9_BASE:1.7
	OPENBSD_5_8:1.7.0.10
	OPENBSD_5_8_BASE:1.7
	OPENBSD_5_7:1.7.0.2
	OPENBSD_5_7_BASE:1.7
	OPENBSD_5_6:1.7.0.6
	OPENBSD_5_6_BASE:1.7
	OPENBSD_5_5:1.7.0.4
	OPENBSD_5_5_BASE:1.7
	OPENBSD_5_4:1.4.0.2
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.3.0.6
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.4
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.2
	OPENBSD_5_0:1.1.0.2
	OPENBSD_5_0_BASE:1.1;
locks; strict;
comment	@# @;


1.7
date	2013.12.11.16.25.48;	author jca;	state Exp;
branches;
next	1.6;

1.6
date	2013.08.08.15.41.28;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2013.08.07.22.07.35;	author dlg;	state Exp;
branches;
next	1.4;

1.4
date	2013.03.24.07.43.32;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2011.12.21.09.26.29;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2011.09.19.20.42.24;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2011.07.06.18.55.36;	author robert;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Use a correct pexp and unbreak stop/reload.  The old and wrong pexp
in /var/run/rc.d/identd has to be manually removed.
Reported by Adam Jeanguenat (avj at voyager dot 6v6 dot org).
ok dcoppa@@ lteo@@
@
text
@#!/bin/sh
#
# $OpenBSD: identd,v 1.6 2013/08/08 15:41:28 ajacoutot Exp $

daemon="/usr/sbin/identd"
daemon_flags="-e"

. /etc/rc.d/rc.subr

pexp="identd: (listen|resolver)"
rc_reload=NO

rc_cmd $1
@


1.6
log
@Re-add `-e' to default daemon_flags like the previous identd did.

ok dlg@@
@
text
@d3 1
a3 1
# $OpenBSD: identd,v 1.5 2013/08/07 22:07:35 dlg Exp $
d10 1
@


1.5
log
@disable libexec/identd and enable usr.sbin/identd.

ok sthen@@ deraadt@@
@
text
@d3 1
a3 1
# $OpenBSD: identd,v 1.4 2013/03/24 07:43:32 ajacoutot Exp $
d6 1
a6 1
daemon_flags=""
@


1.4
log
@Match documented rc.conf(5) flags.

ok deraadt@@
@
text
@d3 1
a3 1
# $OpenBSD: identd,v 1.3 2011/12/21 09:26:29 ajacoutot Exp $
d5 2
a6 2
daemon="/usr/libexec/identd -b"
daemon_flags="-el"
@


1.3
log
@Move mandatory flags from daemon_flags to daemon.

ok sthen@@
@
text
@d3 1
a3 1
# $OpenBSD: identd,v 1.2 2011/09/19 20:42:24 ajacoutot Exp $
d6 1
a6 1
daemon_flags="-elo"
@


1.2
log
@Set defaults daemon_flags (same as advertised in rc.conf.local(5) so
that we can use these scripts right away with /etc/rc.d/XXX -f without
having to manually set _flags.

ok robert@@
@
text
@d3 1
a3 1
# $OpenBSD: identd,v 1.1 2011/07/06 18:55:36 robert Exp $
d5 2
a6 2
daemon="/usr/libexec/identd"
daemon_flags="-b -elo"
@


1.1
log
@Add rc.d(8) script for the system daemons that are restartable.
From now on rc(8) is going to call these scripts to start them up on boot
in the same order than before.
In addition the inetd and rwhod variables in rc.conf are deprecated so that
inetd_flags and rwhod_flags should be used. The old flags are still going
to be used for some time to allow users to switch.
There are more rc modifications to come later so let's put this in so
we can base more work on this.
It is important to mention that you can still keep using rc.local just
like the way you did before, and we have no intention to remove that either.

I'd also like to thank ajacoutot@@, halex@@, sthen@@ and schwarze@@ for working
on this with me.
@
text
@d3 1
a3 1
# $OpenBSD$
d6 1
@

