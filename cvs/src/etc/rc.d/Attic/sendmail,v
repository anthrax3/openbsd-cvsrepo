head	1.7;
access;
symbols
	OPENBSD_5_8:1.6.0.16
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.8
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.6.0.12
	OPENBSD_5_6_BASE:1.6
	OPENBSD_5_5:1.6.0.10
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.6.0.6
	OPENBSD_5_4_BASE:1.6
	OPENBSD_5_3:1.6.0.4
	OPENBSD_5_3_BASE:1.6
	OPENBSD_5_2:1.6.0.2
	OPENBSD_5_2_BASE:1.6
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.2
	OPENBSD_5_0:1.4.0.2
	OPENBSD_5_0_BASE:1.4;
locks; strict;
comment	@# @;


1.7
date	2015.08.17.05.22.53;	author jsg;	state dead;
branches;
next	1.6;
commitid	efm7qx3gozjrhWoo;

1.6
date	2012.07.10.15.00.02;	author halex;	state Exp;
branches;
next	1.5;

1.5
date	2012.01.20.22.27.30;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2011.07.12.05.40.55;	author robert;	state Exp;
branches;
next	1.3;

1.3
date	2011.07.07.05.15.45;	author robert;	state Exp;
branches;
next	1.2;

1.2
date	2011.07.07.05.00.19;	author robert;	state Exp;
branches;
next	1.1;

1.1
date	2011.07.06.18.55.36;	author robert;	state Exp;
branches;
next	;


desc
@@


1.7
log
@sendmail in ports has it's own rc.d file no need to keep this one
ok jca@@ aja@@
@
text
@#!/bin/sh
#
# $OpenBSD: sendmail,v 1.6 2012/07/10 15:00:02 halex Exp $

daemon="/usr/sbin/sendmail"

. /etc/rc.d/rc.subr

pexp="(sendmail: (accepting|rejecting).*|${daemon}.* -(q[0-9]|bd)*)"

rc_bg=YES

rc_cmd $1
@


1.6
log
@fix regexp in pexp

ok robert@@
@
text
@d3 1
a3 1
# $OpenBSD: sendmail,v 1.5 2012/01/20 22:27:30 sthen Exp $
@


1.5
log
@Fix pexp for sendmail; it can be "sendmail: rejecting" as well as accepting.
From danh@@, ok aja@@ giovanni@@
@
text
@d3 1
a3 1
# $OpenBSD: sendmail,v 1.4 2011/07/12 05:40:55 robert Exp $
d9 1
a9 1
pexp="(sendmail: (accepting|rejecting).*|${daemon}* -(q[0-9]|bd)*)"
@


1.4
log
@use a better regexp provided by guenther@@
@
text
@d3 1
a3 1
# $OpenBSD: sendmail,v 1.3 2011/07/07 05:15:45 robert Exp $
d9 1
a9 1
pexp="(sendmail: accepting.*|${daemon}* -(q[0-9]|bd)*)"
@


1.3
log
@use the "official" pexp, from antoine@@
@
text
@d3 1
a3 1
# $OpenBSD: sendmail,v 1.2 2011/07/07 05:00:19 robert Exp $
d9 1
a9 1
pexp="(sendmail: accepting.*|${daemon}${daemon_flags:+ ${daemon_flags}})"
@


1.2
log
@sendmail stalls for at least a minute if it cannot resolve or connect
to the machine's hostname either because there is a network problem
or because /etc/hosts is wrong. while trying to resolve it also does
not change it's process name so let's cope with that in the rc script
@
text
@d3 1
a3 1
# $OpenBSD: sendmail,v 1.1 2011/07/06 18:55:36 robert Exp $
d9 1
a9 1
pexp="(sendmail: accepting.*|${daemon} ${daemon_flags})"
@


1.1
log
@Add rc.d(8) script for the system daemons that are restartable.
From now on rc(8) is going to call these scripts to start them up on boot
in the same order than before.
In addition the inetd and rwhod variables in rc.conf are deprecated so that
inetd_flags and rwhod_flags should be used. The old flags are still going
to be used for some time to allow users to switch.
There are more rc modifications to come later so let's put this in so
we can base more work on this.
It is important to mention that you can still keep using rc.local just
like the way you did before, and we have no intention to remove that either.

I'd also like to thank ajacoutot@@, halex@@, sthen@@ and schwarze@@ for working
on this with me.
@
text
@d3 1
a3 1
# $OpenBSD$
d9 3
a11 1
pexp="sendmail: accepting.*"
@

