head	1.8;
access;
symbols
	OPENBSD_6_1:1.8.0.22
	OPENBSD_6_1_BASE:1.8
	OPENBSD_6_0:1.8.0.24
	OPENBSD_6_0_BASE:1.8
	OPENBSD_5_9:1.8.0.18
	OPENBSD_5_9_BASE:1.8
	OPENBSD_5_8:1.8.0.20
	OPENBSD_5_8_BASE:1.8
	OPENBSD_5_7:1.8.0.12
	OPENBSD_5_7_BASE:1.8
	OPENBSD_5_6:1.8.0.16
	OPENBSD_5_6_BASE:1.8
	OPENBSD_5_5:1.8.0.14
	OPENBSD_5_5_BASE:1.8
	OPENBSD_5_4:1.8.0.10
	OPENBSD_5_4_BASE:1.8
	OPENBSD_5_3:1.8.0.8
	OPENBSD_5_3_BASE:1.8
	OPENBSD_5_2:1.8.0.6
	OPENBSD_5_2_BASE:1.8
	OPENBSD_5_1_BASE:1.8
	OPENBSD_5_1:1.8.0.4
	OPENBSD_5_0:1.8.0.2
	OPENBSD_5_0_BASE:1.8
	OPENBSD_4_9:1.6.0.2
	OPENBSD_4_9_BASE:1.6
	OPENBSD_4_8:1.5.0.6
	OPENBSD_4_8_BASE:1.5
	OPENBSD_4_7:1.5.0.2
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.5.0.4
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.2.0.10
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.8
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.6
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.4
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.2
	OPENBSD_4_1_BASE:1.2;
locks; strict;
comment	@# @;


1.8
date	2011.07.22.09.30.54;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2011.04.15.03.11.38;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	2010.08.17.19.17.14;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	2009.04.21.09.12.26;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	2009.04.17.04.24.15;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	2009.04.17.03.58.54;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	2006.11.12.21.45.19;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	2006.10.25.01.47.41;	author drahn;	state Exp;
branches;
next	;


desc
@@


1.8
log
@unify kernel building on various platforms.
feedback from miod@@ and deraadt@@
@
text
@#	$OpenBSD: Makefile.inc,v 1.7 2011/04/15 03:11:38 deraadt Exp $

bootblocks:
	cp ${DESTDIR}/usr/mdec/mbr ${RELEASEDIR}
	cp ${DESTDIR}/usr/mdec/xxboot ${RELEASEDIR}
	cp ${DESTDIR}/usr/mdec/boot ${RELEASEDIR}

MDEXT=	mbr bsd.rd xxboot boot miniroot${OSrev}.fs
@


1.7
log
@No need to make depend kernels
@
text
@d1 1
a1 10
#	$OpenBSD: Makefile.inc,v 1.6 2010/08/17 19:17:14 deraadt Exp $

kernels: bsd bootblocks
	cp ${.CURDIR}/../sys/arch/landisk/compile/GENERIC/bsd \
	    ${RELEASEDIR}/bsd

bsd:
	cd ${.CURDIR}/../sys/arch/landisk/conf && config GENERIC
	cd ${.CURDIR}/../sys/arch/landisk/compile/GENERIC && \
	    ${MAKE} clean && exec ${MAKE}
d8 1
a8 3
MDEXT=	bsd mbr bsd.rd xxboot boot miniroot${OSrev}.fs

.PHONY: bsd bootblocks
@


1.6
log
@MDEXT missed some files (result was they are not listed in the build-time
SHA256 file).  Issue spotted by claudio.
ok miod
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.5 2009/04/21 09:12:26 deraadt Exp $
d10 1
a10 1
	    ${MAKE} clean && ${MAKE} depend && exec ${MAKE}
@


1.5
log
@move bsd and bsd.rd and all such other MD "sets" into the MD files,
since we perhaps cannot assume that is what kernels will be in the
pathetically stupid world that SGI created
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.4 2009/04/17 04:24:15 deraadt Exp $
d17 1
a17 1
MDEXT=	bsd mbr bsd.rd xxboot boot
@


1.4
log
@remove some junk
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.3 2009/04/17 03:58:54 deraadt Exp $
d17 1
a17 1
MDEXT=	
@


1.3
log
@For SHA256 hashes to be ready to go onto the install media, we must
build the sets before we build the media.  While there we can get rid
of DESTDIR/snapshot too, and simply install straight into RELEASEDIR.
(This also ends up saving an astounding amount of traffic/latency in a nfs
environment)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.2 2006/11/12 21:45:19 deraadt Exp $
a11 1
# probably will be replaced by procedure to build 'miniroot' image
@


1.2
log
@names have changed
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.1 2006/10/25 01:47:41 drahn Exp $
d3 1
a3 2
.ifdef DESTDIR
snap_md: bsd bootblocks distrib
d5 1
a5 1
	    ${DESTDIR}/snapshot/bsd
d14 5
a18 3
	cp ${DESTDIR}/usr/mdec/mbr ${DESTDIR}/snapshot
	cp ${DESTDIR}/usr/mdec/xxboot ${DESTDIR}/snapshot
	cp ${DESTDIR}/usr/mdec/boot ${DESTDIR}/snapshot
a20 2

.endif	# DESTDIR check
@


1.1
log
@more landisk bits.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.5 2006/08/30 21:40:05 deraadt Exp $
d16 1
a16 1
	cp ${DESTDIR}/usr/mdec/bootxx ${DESTDIR}/snapshot
@

