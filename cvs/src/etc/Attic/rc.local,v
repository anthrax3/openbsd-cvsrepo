head	1.45;
access;
symbols
	OPENBSD_5_5:1.44.0.14
	OPENBSD_5_5_BASE:1.44
	OPENBSD_5_4:1.44.0.10
	OPENBSD_5_4_BASE:1.44
	OPENBSD_5_3:1.44.0.8
	OPENBSD_5_3_BASE:1.44
	OPENBSD_5_2:1.44.0.6
	OPENBSD_5_2_BASE:1.44
	OPENBSD_5_1_BASE:1.44
	OPENBSD_5_1:1.44.0.4
	OPENBSD_5_0:1.44.0.2
	OPENBSD_5_0_BASE:1.44
	OPENBSD_4_9:1.41.0.2
	OPENBSD_4_9_BASE:1.41
	OPENBSD_4_8:1.39.0.18
	OPENBSD_4_8_BASE:1.39
	OPENBSD_4_7:1.39.0.14
	OPENBSD_4_7_BASE:1.39
	OPENBSD_4_6:1.39.0.16
	OPENBSD_4_6_BASE:1.39
	OPENBSD_4_5:1.39.0.12
	OPENBSD_4_5_BASE:1.39
	OPENBSD_4_4:1.39.0.10
	OPENBSD_4_4_BASE:1.39
	OPENBSD_4_3:1.39.0.8
	OPENBSD_4_3_BASE:1.39
	OPENBSD_4_2:1.39.0.6
	OPENBSD_4_2_BASE:1.39
	OPENBSD_4_1:1.39.0.4
	OPENBSD_4_1_BASE:1.39
	OPENBSD_4_0:1.39.0.2
	OPENBSD_4_0_BASE:1.39
	OPENBSD_3_9:1.38.0.4
	OPENBSD_3_9_BASE:1.38
	OPENBSD_3_8:1.38.0.2
	OPENBSD_3_8_BASE:1.38
	OPENBSD_3_7:1.37.0.2
	OPENBSD_3_7_BASE:1.37
	OPENBSD_3_6:1.36.0.2
	OPENBSD_3_6_BASE:1.36
	OPENBSD_3_5:1.34.0.2
	OPENBSD_3_5_BASE:1.34
	OPENBSD_3_4:1.33.0.10
	OPENBSD_3_4_BASE:1.33
	OPENBSD_3_3:1.33.0.8
	OPENBSD_3_3_BASE:1.33
	OPENBSD_3_2:1.33.0.6
	OPENBSD_3_2_BASE:1.33
	OPENBSD_3_1:1.33.0.4
	OPENBSD_3_1_BASE:1.33
	OPENBSD_3_0:1.33.0.2
	OPENBSD_3_0_BASE:1.33
	OPENBSD_2_9:1.32.0.2
	OPENBSD_2_9_BASE:1.32
	OPENBSD_2_8:1.30.0.2
	OPENBSD_2_8_BASE:1.30
	OPENBSD_2_7:1.27.0.4
	OPENBSD_2_7_BASE:1.27
	OPENBSD_2_6:1.27.0.2
	OPENBSD_2_6_BASE:1.27
	OPENBSD_2_5:1.24.0.2
	OPENBSD_2_5_BASE:1.24
	OPENBSD_2_4:1.23.0.2
	OPENBSD_2_4_BASE:1.23
	OPENBSD_2_3:1.22.0.2
	OPENBSD_2_3_BASE:1.22
	OPENBSD_2_2:1.14.0.2
	OPENBSD_2_2_BASE:1.14
	OPENBSD_2_1:1.11.0.2
	OPENBSD_2_1_BASE:1.11
	OPENBSD_2_0:1.7.0.2
	OPENBSD_2_0_BASE:1.7
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.45
date	2014.07.14.09.04.02;	author deraadt;	state dead;
branches;
next	1.44;
commitid	YUSo98CdDPeK0I4d;

1.44
date	2011.04.22.06.08.14;	author ajacoutot;	state Exp;
branches;
next	1.43;

1.43
date	2011.04.18.18.08.20;	author robert;	state Exp;
branches;
next	1.42;

1.42
date	2011.03.17.16.43.51;	author robert;	state Exp;
branches;
next	1.41;

1.41
date	2010.11.05.10.03.00;	author ajacoutot;	state Exp;
branches;
next	1.40;

1.40
date	2010.10.26.20.56.03;	author robert;	state Exp;
branches;
next	1.39;

1.39
date	2006.07.28.20.19.46;	author sturm;	state Exp;
branches;
next	1.38;

1.38
date	2005.03.29.21.41.59;	author uwe;	state Exp;
branches;
next	1.37;

1.37
date	2005.02.07.06.08.10;	author david;	state Exp;
branches;
next	1.36;

1.36
date	2004.07.06.04.03.41;	author henning;	state Exp;
branches;
next	1.35;

1.35
date	2004.04.07.19.23.39;	author david;	state Exp;
branches;
next	1.34;

1.34
date	2004.03.17.01.33.50;	author deraadt;	state Exp;
branches;
next	1.33;

1.33
date	2001.06.05.23.01.55;	author naddy;	state Exp;
branches;
next	1.32;

1.32
date	2001.02.12.04.32.24;	author deraadt;	state Exp;
branches;
next	1.31;

1.31
date	2000.12.10.03.02.23;	author deraadt;	state Exp;
branches;
next	1.30;

1.30
date	2000.07.11.22.30.56;	author matt;	state Exp;
branches;
next	1.29;

1.29
date	2000.06.24.19.37.33;	author jakob;	state Exp;
branches;
next	1.28;

1.28
date	2000.06.13.18.29.48;	author deraadt;	state Exp;
branches;
next	1.27;

1.27
date	99.09.28.07.19.41;	author deraadt;	state Exp;
branches;
next	1.26;

1.26
date	99.06.12.21.17.23;	author angelos;	state Exp;
branches;
next	1.25;

1.25
date	99.05.30.01.37.56;	author angelos;	state Exp;
branches;
next	1.24;

1.24
date	99.03.01.04.41.48;	author fgsch;	state Exp;
branches;
next	1.23;

1.23
date	98.06.15.18.41.12;	author deraadt;	state Exp;
branches;
next	1.22;

1.22
date	98.04.07.16.32.55;	author deraadt;	state Exp;
branches;
next	1.21;

1.21
date	98.04.07.06.11.55;	author deraadt;	state Exp;
branches;
next	1.20;

1.20
date	98.03.25.07.25.22;	author deraadt;	state Exp;
branches;
next	1.19;

1.19
date	98.02.02.00.29.14;	author dima;	state Exp;
branches;
next	1.18;

1.18
date	98.02.01.22.30.33;	author dima;	state Exp;
branches;
next	1.17;

1.17
date	98.01.12.00.32.45;	author mickey;	state Exp;
branches;
next	1.16;

1.16
date	98.01.11.02.02.08;	author angelos;	state Exp;
branches;
next	1.15;

1.15
date	97.11.04.09.15.32;	author deraadt;	state Exp;
branches;
next	1.14;

1.14
date	97.10.18.10.37.47;	author deraadt;	state Exp;
branches;
next	1.13;

1.13
date	97.07.28.07.44.40;	author deraadt;	state Exp;
branches;
next	1.12;

1.12
date	97.06.12.14.52.24;	author millert;	state Exp;
branches;
next	1.11;

1.11
date	97.05.04.20.46.07;	author millert;	state Exp;
branches;
next	1.10;

1.10
date	97.04.15.09.26.47;	author deraadt;	state Exp;
branches;
next	1.9;

1.9
date	97.01.03.07.48.50;	author deraadt;	state Exp;
branches;
next	1.8;

1.8
date	97.01.01.20.14.03;	author graichen;	state Exp;
branches;
next	1.7;

1.7
date	96.09.21.07.23.55;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	96.09.06.09.47.35;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	96.08.26.22.31.35;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	96.06.18.15.30.02;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	96.05.26.10.49.40;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	96.05.26.10.25.28;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.37.57;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.37.57;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.45
log
@rc.{local,securelevel,shutdown} become examples.  If versions of them
are created in /etc, they are executed (they used to be sourced) to
avoid polluting the rc variable space.  The powerdown= and securelevel=
features are removed; they are likely only used by 2 people.  the
secureleve is now always raised; this is the only sensible default.
ok ajacoutot
@
text
@#	$OpenBSD: rc.local,v 1.44 2011/04/22 06:08:14 ajacoutot Exp $

# Site-specific startup actions, daemons, and other things which
# can be done AFTER your system goes into securemode.  For actions
# which should be done BEFORE your system has gone into securemode
# please see /etc/rc.securelevel.
@


1.44
log
@Move the rc.d(8) bits from rc.{local,shutdown} directly into /etc/rc.
By default, rc.{local,shutdown} don't output anything anymore.

original idea from schwarze@@
discussed with deraadt@@ and no objection from millert@@
ok schwarze@@ robert@@
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.43 2011/04/18 18:08:20 robert Exp $
@


1.43
log
@do not print 'starting local daemons' if rc_scripts is empty
asked by/ok deraadt@@, ajacoutot@@
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.42 2011/03/17 16:43:51 robert Exp $
a6 12

if [ -n "${rc_scripts}" ]; then
	echo -n 'starting local daemons:'

	for _r in $rc_scripts; do
		[ -x /etc/rc.d/${_r} ] && /etc/rc.d/${_r} start
	done

	echo '.'
fi

# Add your local startup actions here.
@


1.42
log
@- introduce the INRC environment variable so that rc.subr(8) knows if it
  gets called from rc.local or rc.shutdown
- notify the user if a given operation was successfull or not by appending
  the (ok) or (failed) strings to the end of the daemon name
- hide stdout and stdin unless RC_DEBUG=1 is set, otherwise all the function
  names will be printed out and all output sent to stdin or stdout
- since from now on rc.subr is taking care of printing out the daemon names
  on startup, we don't need to do this from rc.{local,shutdown} anymore

brainkilling work done by me and ajacoutot@@, ok ajacoutot@@
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.41 2010/11/05 10:03:00 ajacoutot Exp $
d8 2
a9 1
echo -n 'starting local daemons:'
d11 6
a16 3
for _r in $rc_scripts; do
	[ -x /etc/rc.d/${_r} ] && /etc/rc.d/${_r} start
done
a18 2

echo '.'
@


1.41
log
@Print the daemon name _before_ starting the corresponding rc script.

"makes sense" schwarze@@, ok robert@@
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.40 2010/10/26 20:56:03 robert Exp $
d11 1
a11 1
	[ -x /etc/rc.d/${_r} ] && echo -n " ${_r}" && /etc/rc.d/${_r} start
@


1.40
log
@Add a simple 'rc' system to base in order to start/stop/restart/reload
services installed by the ports system (for now).
It only uses pgrep/pkill to handle these processes. A manual page will
come later.

'put it in' deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.39 2006/07/28 20:19:46 sturm Exp $
d11 1
a11 1
	[ -x /etc/rc.d/${_r} ] && /etc/rc.d/${_r} start && echo -n " ${_r}"
@


1.39
log
@remove port startup code, it's all moved to the respective port

ok deraadt, toby, pedro, david
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.38 2005/03/29 21:41:59 uwe Exp $
d10 4
a16 1

@


1.38
log
@comment fix; ok beck@@
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.37 2005/02/07 06:08:10 david Exp $
d3 1
a3 1
# site-specific startup actions, daemons, and other things which
d6 1
a6 4
# please see /etc/rc.securelevel

# site-specific startup actions, daemons which can be run
# Add your local startup actions to this file
d10 1
a10 12
if [ -x /usr/local/sbin/cfsd ]; then
	if ps auxc | grep -q '^ *root .* mountd$'; then
		echo -n ' cfsd';	/usr/local/sbin/cfsd >/dev/null 2>&1
		mount -o port=3049,nfsv2,intr localhost:/null /crypt
	else
		echo -n ' cfsd (failed, no mountd running)'
	fi
fi

#if [ -x /usr/local/sbin/snmpd ]; then
#	echo -n ' snmpd';	/usr/local/sbin/snmpd
#fi
a12 5

# Netatalk stuff
#if [ -f /etc/netatalk/rc.atalk ]; then
#	. /etc/netatalk/rc.atalk
#fi
@


1.37
log
@indentation whitespace nits
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.36 2004/07/06 04:03:41 henning Exp $
d9 1
a9 1
# Add your local changes additions to this file
@


1.36
log
@remove startup code for that other ntpd from ports and use the one
in base instead. theo ok & rush to go for beer
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.35 2004/04/07 19:23:39 david Exp $
d15 1
a15 1
		echo -n ' cfsd';        /usr/local/sbin/cfsd >/dev/null 2>&1
@


1.35
log
@repair ntpd_flags; from Jeff Ito <jeffi@@rcn.com>
ok miod@@ krw@@
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.34 2004/03/17 01:33:50 deraadt Exp $
a11 16

# run ntpdate prior to ntpd
if [ $securelevel -le 1 -a X"${ntpdate_flags}" != X"NO" \
    -a -x /usr/local/sbin/ntpdate ]; then
	echo -n ' ntpdate'
	/usr/local/sbin/ntpdate -b ${ntpdate_flags} >/dev/null
fi

if [ X"${ntpd}" == X"YES" -a -x /usr/local/sbin/ntpd \
    -a -e /etc/ntp.conf ]; then
	ntpd_flags="-p /var/run/ntpd.pid"
	if [ $securelevel -ge 1 ]; then
		ntpd_flags="${ntpd_flags} -x"
	fi
	echo -n ' ntpd';       /usr/local/sbin/ntpd ${ntpd_flags}
fi
@


1.34
log
@If you are running securelevel 2, and you do not sync the clock before
switching to that securelevel, and the clock is off by more than
128ms, ntpd will attempt to correct by stepping the clock instead of
slewing it. So use -x in that case; from tholo
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.33 2001/06/05 23:01:55 naddy Exp $
d24 1
a24 1
		ntpd_flags="${ntpdflags} -x"
@


1.33
log
@comment out automatic startup of netatalk if installed; pointed out by deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.32 2001/02/12 04:32:24 deraadt Exp $
d22 5
a26 1
       echo -n ' ntpd';       /usr/local/sbin/ntpd -p /var/run/ntpd.pid
@


1.32
log
@delete pcvt stuff
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.31 2000/12/10 03:02:23 deraadt Exp $
d41 3
a43 3
if [ -f /etc/netatalk/rc.atalk ]; then
	. /etc/netatalk/rc.atalk
fi
@


1.31
log
@provide a font-loading stub; smat@@acm.org
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.30 2000/07/11 22:30:56 matt Exp $
a35 11
#fi

# set pcvt screen saver time to 5min (see scon(1) for more options)
#if [ -x /usr/sbin/ispcvt -a -x /usr/sbin/scon ] && /usr/sbin/ispcvt; then
#	echo -n ' scon';	/usr/sbin/scon -t 300
#fi

#if [ -x /usr/sbin/ispcvt -a -x /usr/sbin/loadfont -a -f /etc/pcvtfont ] &&
#    /usr/sbin/ispcvt; then
#	echo -n ' loadfont';
#	/usr/sbin/loadfont -c0 -f`cat /etc/pcvtfont`
@


1.30
log
@- Move ntpd out of rc.securelevel
- Add ntpdate and rdate rc knobs

Approved-And-Assisted-By: millert
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.29 2000/06/24 19:37:33 jakob Exp $
d41 6
@


1.29
log
@Do not start snmpd by default just because it is installed. ok theo@@.
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.28 2000/06/13 18:29:48 deraadt Exp $
d12 12
@


1.28
log
@normalize test vs [; form
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.27 1999/09/28 07:19:41 deraadt Exp $
d22 3
a24 3
if [ -x /usr/local/sbin/snmpd ]; then
	echo -n ' snmpd';	/usr/local/sbin/snmpd
fi
@


1.27
log
@ssh part of base system
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.26 1999/06/12 21:17:23 angelos Exp $
d27 1
a27 1
#if test -x /usr/sbin/ispcvt -a -x /usr/sbin/scon && /usr/sbin/ispcvt; then
@


1.26
log
@Fix typo in netatalk startup
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.25 1999/05/30 01:37:56 angelos Exp $
a11 5

if [ X"${sshd}" == X"YES" -a -x /usr/local/sbin/sshd ]; then
	echo -n ' sshd';	/usr/local/sbin/sshd
	#echo -n ' sshd2022';	/usr/local/sbin/sshd -p 2022
fi
@


1.25
log
@Add netatalk start-up support.
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.24 1999/03/01 04:41:48 fgsch Exp $
d39 1
a39 1
if [ -f /etc/netatalk/rc.conf ]; then
@


1.24
log
@Don't print cfsd output on start.
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.23 1998/06/15 18:41:12 deraadt Exp $
d37 6
@


1.23
log
@rc.conf control sshd
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.22 1998/04/07 16:32:55 deraadt Exp $
d20 1
a20 1
		echo -n ' cfsd';        /usr/local/sbin/cfsd
@


1.22
log
@add commented 2022 sshd startup
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.21 1998/04/07 06:11:55 deraadt Exp $
d13 1
a13 1
if [ -x /usr/local/sbin/sshd ]; then
@


1.21
log
@add xdm control to /etc/rc.conf; X11 docs need updating
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.20 1998/03/25 07:25:22 deraadt Exp $
d15 1
@


1.20
log
@httpd is now in the tree, and an rc.conf flag turns it on
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.19 1998/02/02 00:29:14 dima Exp $
a32 5
#fi

# Alternatively, xdm may be started in /etc/ttys.
#if [ -x /usr/X11R6/bin/xdm ]; then
#	echo -n ' xdm';		/usr/X11R6/bin/xdm
@


1.19
log
@Don't start cfsd if mountd is not running, instead give an error message.
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.18 1998/02/01 22:30:33 dima Exp $
a11 4

if [ -x /usr/local/etc/httpd/httpd ]; then
	echo -n ' httpd';	/usr/local/etc/httpd/httpd
fi
@


1.18
log
@"if [ -f" --> "if [ -x"
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.17 1998/01/12 00:32:45 mickey Exp $
d22 6
a27 2
	echo -n ' cfsd';	/usr/local/sbin/cfsd
	mount -o port=3049,nfsv2,intr localhost:/null /crypt
@


1.17
log
@to those who wants snmpd
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.16 1998/01/11 02:02:08 angelos Exp $
d13 1
a13 1
if [ -f /usr/local/etc/httpd/httpd ]; then
d17 1
a17 1
if [ -f /usr/local/sbin/sshd ]; then
d21 1
a21 1
if [ -f /usr/local/sbin/cfsd ]; then
d26 1
a26 1
if [ -f /usr/local/sbin/snmpd ]; then
@


1.16
log
@cfsd
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.15 1997/11/04 09:15:32 deraadt Exp $
d24 4
@


1.15
log
@kill spaces at ends of lines; m4
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.14 1997/10/18 10:37:47 deraadt Exp $
d21 6
a26 1
# Set pcvt screen saver time to 5min (see scon(1) for more options)
@


1.14
log
@presume sshd or httpd, if installed, are on
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.13 1997/07/28 07:44:40 deraadt Exp $
d29 1
a29 1
#fi                                                                            
@


1.13
log
@typo; wojtek@@tryc.on.ca
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.12 1997/06/12 14:52:24 millert Exp $
d13 3
a15 3
#if [ -f /usr/local/etc/httpd/httpd ]; then
#	echo -n ' httpd';	/usr/local/etc/httpd/httpd
#fi
d17 3
a19 3
#if [ -f /usr/local/sbin/sshd ]; then
#	echo -n ' sshd';	/usr/local/sbin/sshd
#fi
@


1.12
log
@Add commented out entry for scon (pcvt console setup)
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.11 1997/05/04 20:46:07 millert Exp $
d13 1
a13 1
#if [ -f /usr/local/etc/httpd/http ]; then
@


1.11
log
@Move xntpd -> rc.securelevel since tickadj need to twiddle /dev/mem
Move xdm back to rc.local; if your X server need access to /dev/mem
    and you do not use the ap driver starting xdm from rc.securelevel
    will only help the first time.
Add other rc.securelevel examples that are not daemons.
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.10 1997/04/15 09:26:47 deraadt Exp $
d19 5
@


1.10
log
@split rc.local, creating rc.securelevel. Read the comments. If you believe
in securelevels, follow them religiously. Problem found by millert...
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.9 1997/01/03 07:48:50 deraadt Exp $
d21 4
a24 4
#if [ -x /usr/local/bin/xntpd ]; then
#	/usr/local/sbin/tickadj -Aq
#	echo -n ' xntpd';	/usr/local/sbin/xntpd
#fi
@


1.9
log
@minimize comment
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.8 1997/01/01 20:14:03 graichen Exp $
d3 6
a8 1
# site-specific startup actions, daemons
a18 5
#fi

# Alternatively, xdm smay be started in /etc/ttys.
#if [ -x /usr/X11R6/bin/xdm ]; then
#	echo -n ' xdm';		/usr/X11R6/bin/xdm
@


1.8
log
@add a comment about the comment in ttys about how to start xdm via init
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.7 1996/09/21 07:23:55 deraadt Exp $
d16 1
a16 5
#
# you may also look at /etc/ttys on some architectures
# (i386 for example) - there is an commented out example
# how to start xdm via init 
#
@


1.7
log
@tickadj example from thorsten; closes netbsd pr#1887, banshee@@gabriella.resort.com more flexibly
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.6 1996/09/06 09:47:35 deraadt Exp $
d16 5
@


1.6
log
@commented xntpd stub
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.5 1996/08/26 22:31:35 deraadt Exp $
d21 2
a22 1
#	echo -n ' xntpd';	/usr/local/bin/xntpd
@


1.5
log
@show xdm example, from graichen
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.4 1996/06/18 15:30:02 deraadt Exp $
d18 4
@


1.4
log
@move std stuff from rc.local to rc
@
text
@d1 1
a1 1
#	$OpenBSD: rc.local,v 1.3 1996/05/26 10:49:40 deraadt Exp $
d14 4
@


1.3
log
@ldconfig /usr/X11R6/lib on all machines (comments?)
@
text
@d1 2
a2 1
#
d4 1
a4 3
#
#	$OpenBSD: rc.local,v 1.2 1996/05/26 10:25:28 deraadt Exp $
#
d6 1
a6 10
if [ ! -f /etc/motd ]; then
	install -c -o root -g wheel -m 664 /dev/null /etc/motd
fi
T=/tmp/_motd
rm -f $T
sysctl -n kern.version | sed 1q > $T
echo "" >> $T
sed '1,/^$/d' < /etc/motd >> $T
cmp -s $T /etc/motd || cp $T /etc/motd
rm -f $T
d8 3
a10 6
if [ -f /sbin/ldconfig ]; then
	echo 'creating runtime link editor directory cache.'
	ldconfig /usr/X11R6/lib
fi 

echo -n 'starting local daemons:'
d12 3
a14 4
# Kerberos runs ONLY on the Kerberos server machine
if [ X${kerberos_server} = X"YES" ]; then
	echo -n ' kerberos';	kerberos >> /var/log/kerberos.log &
fi
@


1.2
log
@sync & label
@
text
@d4 1
a4 1
#	$OpenBSD$
d20 1
a20 1
	ldconfig
@


1.1
log
@Initial revision
@
text
@d4 1
a4 2
#	From: @@(#)rc.local	5.4 (Berkeley) 12/14/90
#	$Id: rc.local,v 1.13 1995/08/02 19:29:30 cgd Exp $
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
