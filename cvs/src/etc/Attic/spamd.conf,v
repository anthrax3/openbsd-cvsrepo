head	1.23;
access;
symbols
	OPENBSD_4_0:1.19.0.2
	OPENBSD_4_0_BASE:1.19
	OPENBSD_3_9:1.17.0.2
	OPENBSD_3_9_BASE:1.17
	OPENBSD_3_8:1.16.0.2
	OPENBSD_3_8_BASE:1.16
	OPENBSD_3_7:1.12.0.2
	OPENBSD_3_7_BASE:1.12
	OPENBSD_3_6:1.9.0.4
	OPENBSD_3_6_BASE:1.9
	OPENBSD_3_5:1.9.0.2
	OPENBSD_3_5_BASE:1.9
	OPENBSD_3_4:1.7.0.2
	OPENBSD_3_4_BASE:1.7
	OPENBSD_3_3:1.5.0.2
	OPENBSD_3_3_BASE:1.5;
locks; strict;
comment	@# @;


1.23
date	2007.02.27.02.22.01;	author beck;	state dead;
branches;
next	1.22;

1.22
date	2007.02.25.04.45.28;	author marc;	state Exp;
branches;
next	1.21;

1.21
date	2007.02.22.23.11.19;	author beck;	state Exp;
branches;
next	1.20;

1.20
date	2007.02.22.19.49.18;	author beck;	state Exp;
branches;
next	1.19;

1.19
date	2006.07.11.05.40.33;	author djm;	state Exp;
branches;
next	1.18;

1.18
date	2006.04.10.18.47.46;	author dhartmei;	state Exp;
branches;
next	1.17;

1.17
date	2006.02.01.20.22.43;	author dhartmei;	state Exp;
branches;
next	1.16;

1.16
date	2005.08.29.15.52.45;	author millert;	state Exp;
branches;
next	1.15;

1.15
date	2005.06.06.16.03.33;	author jmc;	state Exp;
branches;
next	1.14;

1.14
date	2005.06.05.13.51.39;	author jmc;	state Exp;
branches;
next	1.13;

1.13
date	2005.05.11.20.27.58;	author jmc;	state Exp;
branches;
next	1.12;

1.12
date	2005.01.16.17.16.44;	author deraadt;	state Exp;
branches;
next	1.11;

1.11
date	2004.11.06.22.14.37;	author david;	state Exp;
branches;
next	1.10;

1.10
date	2004.11.04.13.29.35;	author otto;	state Exp;
branches;
next	1.9;

1.9
date	2004.01.21.08.07.39;	author deraadt;	state Exp;
branches;
next	1.8;

1.8
date	2003.12.04.18.59.29;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	2003.08.21.08.19.41;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	2003.08.21.08.18.00;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	2003.03.11.10.13.16;	author david;	state Exp;
branches;
next	1.4;

1.4
date	2003.03.10.22.39.51;	author dhartmei;	state Exp;
branches;
next	1.3;

1.3
date	2003.03.09.19.22.25;	author beck;	state Exp;
branches;
next	1.2;

1.2
date	2003.03.08.21.39.50;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	2003.03.08.19.03.44;	author beck;	state Exp;
branches;
next	;


desc
@@


1.23
log
@/etc/spamd.conf moves to /etc/mail/spamd.conf
@
text
@# $OpenBSD: spamd.conf,v 1.22 2007/02/25 04:45:28 marc Exp $
#
# spamd config file, read by spamd-setup(8) for spamd(8)
#
# See spamd.conf(5)
#
# Configures whitelists and blacklists for spamd
#
# Strings follow getcap(3) convention escapes, other than you
# can have a bare colon (:) inside a quoted string and it
# will deal with it. See spamd-setup(8) for more details.
#
# "all" must be here, and defines the order in which lists are applied.
# Whitelists apply to the previous blacklist. More than one whitelist
# may be applied to each blacklist.
#
# As of November 2004, a place to search for black lists is
#     http://spamlinks.net/filter-bl.htm
#
# Some of the URLs below point to www.openbsd.org locations.  Those
# files are likely to be mirrored to other OpenBSD www mirrors located
# around the world.  Hence, it is possible to edit this file and rewrite
# www.openbsd.org with, for instance, to www.de.openbsd.org

all:\
	:uatraps:nixspam:china:korea:

# University of Alberta greytrap hits
# Addresses stay in it for 24 hours from time they misbehave.
uatraps:\
	:black:\
	:msg="Your address %A has sent mail to a ualberta.ca spamtrap\n\
	within the last 24 hours":\
	:method=http:\
	:file=www.openbsd.org/spamd/traplist.gz

# Nixspam recent sources list.
# Mirrored from http://www.heise.de/ix/nixspam
nixspam:\
	:black:\
	:msg="Your address %A is in the nixspam list\n\
	See http://www.heise.de/ix/nixspam/dnsbl_en/ for details":\
	:method=http:\
	:file=www.openbsd.org/spamd/nixspam.gz

# Mirrored from http://www.okean.com/chinacidr.txt
china:\
	:black:\
	:msg="SPAM. Your address %A appears to be from China\n\
	See http://www.okean.com/asianspamblocks.html for more details":\
	:method=http:\
	:file=www.openbsd.org/spamd/chinacidr.txt.gz:

# Mirrored from http://www.okean.com/koreacidr.txt
korea:\
	:black:\
	:msg="SPAM. Your address %A appears to be from Korea\n\
	See http://www.okean.com/asianspamblocks.html for more details":\
	:method=http:\
	:file=www.openbsd.org/spamd/koreacidr.txt.gz:

# Whitelists are done like this, and must be added to "all" after each
# blacklist from which you want the addresses in the whitelist removed.
#
#whitelist:\
#	:white:\
#	:method=file:\
#	:file=/var/db/whitelist.txt:
@


1.22
log
@spaces -> tab; "of course" deraadt@@
@
text
@d1 1
a1 1
# $OpenBSD: spamd.conf,v 1.21 2007/02/22 23:11:19 beck Exp $
@


1.21
log
@in in, spotted by toby
@
text
@d1 1
a1 1
# $OpenBSD: spamd.conf,v 1.20 2007/02/22 19:49:18 beck Exp $
d31 5
a35 5
        :black:\
        :msg="Your address %A has sent mail to a ualberta.ca spamtrap\n\
        within the last 24 hours":\
        :method=http:\
        :file=www.openbsd.org/spamd/traplist.gz
d40 2
a41 2
        :black:\
        :msg="Your address %A is in the nixspam list\n\
d43 2
a44 3
        :method=http:\
        :file=www.openbsd.org/spamd/nixspam.gz

@


1.20
log
@Modernize the spamd.conf blacklist examples:
 - Nuke SPEWS which is no longer maintained.
 - Provide link to U of A traplist
 - Provide link to reformatted Nixspam suspicious sources list

ok deraadt@@
@
text
@d1 1
a1 1
# $OpenBSD: spamd.conf,v 1.19 2006/07/11 05:40:33 djm Exp $
d41 1
a41 1
        :msg="Your address %A is in in the nixspam list\n\
@


1.19
log
@remove the spamhaus SBL entry

SpamHaus no longer publish their SBL in a free, downloadable form
suitable for use with spamd. They obviously care more about
subscription dollars than really fighting spam - very sad.

ok deraadt@@
@
text
@d1 1
a1 1
# $OpenBSD: spamd.conf,v 1.18 2006/04/10 18:47:46 dhartmei Exp $
d26 1
a26 1
	:spews1:china:korea:
d28 17
a44 7
# Mirrored from http://www.spews.org/spews_list_level1.txt
spews1:\
	:black:\
	:msg="SPAM. Your address %A is in the spews level 1 database\n\
	See http://www.spews.org/ask.cgi?x=%A for more details":\
	:method=http:\
	:file=www.openbsd.org/spamd/spews_list_level1.txt.gz:
a45 7
# Mirrored from http://www.spews.org/spews_list_level2.txt
spews2:\
	:black:\
	:msg="SPAM. Your address %A is in the spews level 2 database\n\
	See http://www.spews.org/ask.cgi?x=%A for more details":\
	:method=http:\
	:file=www.openbsd.org/spamd/spews_list_level2.txt.gz:
a61 11

#relaydb-black:\
#	:black:\
#	:msg="SPAM. Your address %A is in my relaydb list.":\
#	:method=exec:\
#	:file=/usr/local/bin/relaydb -4lb:

#relaydb-white:\
#	:white:\
#	:method=exec:\
#	:file=/usr/local/bin/relaydb -4lw:
@


1.18
log
@move the commented example /var/mail/whitelist.txt to /var/db, so it
doesn't trigger security(8)'s ownership checks. ok bob@@
@
text
@d1 1
a1 1
# $OpenBSD: spamd.conf,v 1.17 2006/02/01 20:22:43 dhartmei Exp $
a26 9

# Mirrored from http://spfilter.openrbl.org/data/sbl/SBL.cidr.bz2
spamhaus:\
	:black:\
	:msg="SPAM. Your address %A is in the Spamhaus Block List\n\
	See http://www.spamhaus.org/sbl and\
	http://www.abuse.net/sbl.phtml?IP=%A for more details":\
	:method=http:\
	:file=www.openbsd.org/spamd/SBL.cidr.gz:
@


1.17
log
@use full path to binary in (commented) relaydb example,
from jared rr spiegel, closes PR 4982, ok beck@@
@
text
@d1 1
a1 1
# $OpenBSD: spamd.conf,v 1.16 2005/08/29 15:52:45 millert Exp $
d86 1
a86 1
#	:file=/var/mail/whitelist.txt:
@


1.16
log
@spamhaus not longer allows free downloads of its blacklist so make
spews1 the default.  OK deraadt@@
@
text
@d1 1
a1 1
# $OpenBSD: spamd.conf,v 1.15 2005/06/06 16:03:33 jmc Exp $
d73 1
a73 1
#	:file=relaydb -4lb:
d78 1
a78 1
#	:file=relaydb -4lw:
@


1.15
log
@slight reshuffle to make this less confusing;
ok beck@@
@
text
@d1 1
a1 1
# $OpenBSD: spamd.conf,v 1.14 2005/06/05 13:51:39 jmc Exp $
d26 1
a26 1
	:spamhaus:china:korea:
@


1.14
log
@- comment out relaydb entry, since it is not available by default
- add a `method' capability to the whitelist example

ok beck@@
@
text
@d1 1
a1 1
# $OpenBSD: spamd.conf,v 1.13 2005/05/11 20:27:58 jmc Exp $
a68 8
# Whitelists are done like this, and must be added to "all" after each
# blacklist from which you want the addresses in the whitelist removed.
#
#whitelist:\
#	:white:\
#	:method=file:\
#	:file=/var/mail/whitelist.txt:

d79 8
@


1.13
log
@some punctuation/whitespace cleanup from stuart henderson (pr #4183);
@
text
@d1 1
a1 1
# $OpenBSD: spamd.conf,v 1.12 2005/01/16 17:16:44 deraadt Exp $
d74 1
d77 10
a86 10
relaydb-black:\
	:black:\
	:msg="SPAM. Your address %A is in my relaydb list.":\
	:method=exec:\
	:file=relaydb -4lb:

relaydb-white:\
	:white:\
	:method=exec:\
	:file=relaydb -4lw:
@


1.12
log
@: terminate records, spotted by listen@@witworx.com; ok millert
@
text
@d1 1
a1 1
# $OpenBSD: spamd.conf,v 1.11 2004/11/06 22:14:37 david Exp $
d13 3
a15 3
# "all" must be here, and defines the order in which lists are applied
# whitelists apply to the previous blacklist. more than one whitelist
# may be applied to each blacklist
a67 1

@


1.11
log
@remove extra http://
ok otto@@
@
text
@d1 1
a1 1
# $OpenBSD: spamd.conf,v 1.10 2004/11/04 13:29:35 otto Exp $
d35 1
a35 1
	:file=www.openbsd.org/spamd/SBL.cidr.gz
d43 1
a43 1
	:file=www.openbsd.org/spamd/spews_list_level1.txt.gz
d51 1
a51 1
	:file=www.openbsd.org/spamd/spews_list_level2.txt.gz
d59 1
a59 1
	:file=www.openbsd.org/spamd/chinacidr.txt.gz
d67 1
a67 1
	:file=www.openbsd.org/spamd/koreacidr.txt.gz
d75 1
a75 1
#	:file=/var/mail/whitelist.txt
@


1.10
log
@fix url (submitter by maintainer of site)
@
text
@d1 1
a1 1
# $OpenBSD: spamd.conf,v 1.9 2004/01/21 08:07:39 deraadt Exp $
d18 1
a18 1
#     http://http://spamlinks.net/filter-bl.htm
@


1.9
log
@New spamd configuration method.  Many people have trouble with the spam
RBL sites being slow, so now we will provide the maps ourselves through
our www mirrors around the world.  We can also now write our own internal
translators for maps that are in bad formats, and place them into the www
space in the correct format.  tested by beck, djm
@
text
@d1 1
a1 1
# $OpenBSD: spamd.conf,v 1.8 2003/12/04 18:59:29 deraadt Exp $
d17 2
a18 2
# As of Aug 2003, a place to search for black lists is
#     http://spamlinks.port5.com/filter-bl.htm#ip
@


1.8
log
@spacing
@
text
@d1 1
a1 1
# $OpenBSD: spamd.conf,v 1.7 2003/08/21 08:19:41 deraadt Exp $
d20 4
d28 1
d32 2
a33 1
	See http://www.spamhaus.org/sbl for more details":\
d35 1
a35 1
	:file=spfilter.openrbl.org/data/sbl/SBL.cidr
d37 1
d43 1
a43 1
	:file=www.spews.org/spews_list_level1.txt:
d45 1
d51 1
a51 1
	:file=www.spews.org/spews_list_level2.txt:
d53 1
d59 1
a59 1
	:file=www.okean.com/chinacidr.txt:
d61 1
d67 1
a67 1
	:file=www.okean.com/koreacidr.txt:
@


1.7
log
@link to list of lists; ppruett@@webengr.com
@
text
@d1 1
a1 1
# $OpenBSD: spamd.conf,v 1.6 2003/08/21 08:18:00 deraadt Exp $
d32 2
a33 2
        :black:\
        :msg="SPAM. Your address %A is in the spews level 1 database\n\
d35 2
a36 2
        :method=http:\
        :file=www.spews.org/spews_list_level1.txt:
d39 2
a40 2
        :black:\
        :msg="SPAM. Your address %A is in the spews level 2 database\n\
d42 2
a43 2
        :method=http:\
        :file=www.spews.org/spews_list_level2.txt:
d46 1
a46 1
        :black:\
d49 2
a50 2
        :method=http:\
        :file=www.okean.com/chinacidr.txt:
d53 1
a53 1
        :black:\
d56 2
a57 2
        :method=http:\
        :file=www.okean.com/koreacidr.txt:
d64 2
a65 2
#        :white:\
#        :file=/var/mail/whitelist.txt
@


1.6
log
@use spamhaus instead of spews; ppruett@@webengr.com
@
text
@d1 1
a1 1
# $OpenBSD: spamd.conf,v 1.5 2003/03/11 10:13:16 david Exp $
d16 4
@


1.5
log
@eol whitespace nit
ok henning@@
@
text
@d1 1
a1 1
# $OpenBSD: spamd.conf,v 1.4 2003/03/10 22:39:51 dhartmei Exp $
d18 8
a25 1
	:spews1:china:korea:
@


1.4
log
@Add (inactive) relaydb examples, ok deraadt@@
@
text
@d1 1
a1 1
# $OpenBSD: spamd.conf,v 1.3 2003/03/09 19:22:25 beck Exp $
d15 1
a15 1
# may be applied to each blacklist 
@


1.3
log
@Fix a few typos, Make spamd and spamd-setup use /etc/services to find
their ports. Adds "spamd" and "spamd-cfg" services to /etc/services.
Mostly from Daniel Lucq <daniel@@lucq.org>.
@
text
@d1 1
a1 1
# $OpenBSD: spamd.conf,v 1.2 2003/03/08 21:39:50 deraadt Exp $
d55 11
@


1.2
log
@tweak
@
text
@d1 1
a1 1
# $OpenBSD: spamd.conf,v 1.1 2003/03/08 19:03:44 beck Exp $
d3 3
a5 1
# spamd config file, read by spamd.conf(5) and spamd-setup(8)
d36 1
a36 1
	:msg="SPAM. Your address %A appears to be from china\n\
d43 1
a43 1
	:msg="SPAM. Your address %A appears to be from korea\n\
@


1.1
log
@default spamd.conf file, with entries for spews 1, spews 2, china and korea
@
text
@d1 1
a1 1
# $OpenBSD$
d3 1
a3 1
# spamd config file, read by spamd-setup(8)
d16 1
a16 1
	:spews1:spews2:china:korea:
@

