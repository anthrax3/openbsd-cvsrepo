head	1.14;
access;
symbols
	OPENBSD_6_1_BASE:1.14
	OPENBSD_6_0:1.14.0.10
	OPENBSD_6_0_BASE:1.14
	OPENBSD_5_9:1.14.0.4
	OPENBSD_5_9_BASE:1.14
	OPENBSD_5_8:1.14.0.6
	OPENBSD_5_8_BASE:1.14
	OPENBSD_5_7:1.14.0.2
	OPENBSD_5_7_BASE:1.14
	OPENBSD_5_6:1.11.0.16
	OPENBSD_5_6_BASE:1.11
	OPENBSD_5_5:1.11.0.14
	OPENBSD_5_5_BASE:1.11
	OPENBSD_5_4:1.11.0.10
	OPENBSD_5_4_BASE:1.11
	OPENBSD_5_3:1.11.0.8
	OPENBSD_5_3_BASE:1.11
	OPENBSD_5_2:1.11.0.6
	OPENBSD_5_2_BASE:1.11
	OPENBSD_5_1_BASE:1.11
	OPENBSD_5_1:1.11.0.4
	OPENBSD_5_0:1.11.0.2
	OPENBSD_5_0_BASE:1.11
	OPENBSD_4_9:1.9.0.2
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.7.0.6
	OPENBSD_4_8_BASE:1.7
	OPENBSD_4_7:1.7.0.2
	OPENBSD_4_7_BASE:1.7
	OPENBSD_4_6:1.7.0.4
	OPENBSD_4_6_BASE:1.7
	OPENBSD_4_5:1.5.0.6
	OPENBSD_4_5_BASE:1.5
	OPENBSD_4_4:1.5.0.4
	OPENBSD_4_4_BASE:1.5
	OPENBSD_4_3:1.5.0.2
	OPENBSD_4_3_BASE:1.5
	OPENBSD_4_2:1.3.0.6
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.3.0.4
	OPENBSD_4_1_BASE:1.3
	OPENBSD_4_0:1.3.0.2
	OPENBSD_4_0_BASE:1.3
	OPENBSD_3_9:1.2.0.16
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.2.0.14
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.2.0.12
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.2.0.10
	OPENBSD_3_6_BASE:1.2
	OPENBSD_3_5:1.2.0.8
	OPENBSD_3_5_BASE:1.2
	OPENBSD_3_4:1.2.0.6
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.2.0.4
	OPENBSD_3_3_BASE:1.2
	OPENBSD_3_2:1.2.0.2
	OPENBSD_3_2_BASE:1.2
	OPENBSD_3_1:1.1.0.4
	OPENBSD_3_1_BASE:1.1
	OPENBSD_3_0:1.1.0.2
	OPENBSD_3_0_BASE:1.1;
locks; strict;
comment	@# @;


1.14
date	2014.11.27.12.36.49;	author stsp;	state Exp;
branches;
next	1.13;
commitid	rqvH15WVCNzDAoBm;

1.13
date	2014.11.26.08.21.03;	author stsp;	state Exp;
branches;
next	1.12;
commitid	RzxZHxPaUuwxpl5H;

1.12
date	2014.11.24.11.27.57;	author stsp;	state Exp;
branches;
next	1.11;
commitid	Wik5wVL37XkEaiA9;

1.11
date	2011.07.22.09.30.54;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2011.04.15.03.11.38;	author deraadt;	state Exp;
branches;
next	1.9;

1.9
date	2011.01.14.17.18.50;	author deraadt;	state Exp;
branches;
next	1.8;

1.8
date	2010.08.17.19.17.14;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	2009.04.21.09.12.29;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	2009.04.17.03.58.54;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	2007.11.09.18.14.33;	author miod;	state Exp;
branches;
next	1.4;

1.4
date	2007.10.17.21.32.01;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	2006.07.27.01.58.21;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	2002.05.13.07.22.43;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2001.09.11.15.51.50;	author jason;	state Exp;
branches;
next	;


desc
@@


1.14
log
@Remove ofwbootfd from sparc64 release dir since nobody will need it.
Requested by deraadt.
@
text
@#	$OpenBSD: Makefile.inc,v 1.13 2014/11/26 08:21:03 stsp Exp $

KERNELS += GENERIC.MP bsd.mp

bootblocks:
	cp ${DESTDIR}/usr/mdec/{bootblk,ofwboot,ofwboot.net} ${RELEASEDIR}

MDEXT=	bsd.rd cd${OSrev}.iso \
	miniroot${OSrev}.fs floppy${OSrev}.fs floppyB${OSrev}.fs \
	bootblk ofwboot ofwboot.net
@


1.13
log
@Add ofwbootfd to list of sparc64 release files to checksum.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.12 2014/11/24 11:27:57 stsp Exp $
d6 1
a6 1
	cp ${DESTDIR}/usr/mdec/*boot* ${RELEASEDIR}
d10 1
a10 1
	bootblk ofwboot ofwboot.net ofwbootfd
@


1.12
log
@Remove another sparc64 md installboot reference that was hiding in here.
ok deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.11 2011/07/22 09:30:54 espie Exp $
d10 1
a10 1
	bootblk ofwboot ofwboot.net
@


1.11
log
@unify kernel building on various platforms.
feedback from miod@@ and deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.10 2011/04/15 03:11:38 deraadt Exp $
d10 1
a10 1
	bootblk installboot ofwboot ofwboot.net
@


1.10
log
@No need to make depend kernels
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.9 2011/01/14 17:18:50 deraadt Exp $
d3 1
a3 15
kernels: bsd bsd.mp bootblocks
	cp ${.CURDIR}/../sys/arch/sparc64/compile/GENERIC/bsd \
	    ${RELEASEDIR}/bsd
	cp ${.CURDIR}/../sys/arch/sparc64/compile/GENERIC.MP/bsd \
	    ${RELEASEDIR}/bsd.mp

bsd:
	cd ${.CURDIR}/../sys/arch/sparc64/conf && config GENERIC
	cd ${.CURDIR}/../sys/arch/sparc64/compile/GENERIC && \
	    ${MAKE} clean && exec ${MAKE}

bsd.mp:
	cd ${.CURDIR}/../sys/arch/sparc64/conf && config GENERIC.MP
	cd ${.CURDIR}/../sys/arch/sparc64/compile/GENERIC.MP && \
	    ${MAKE} clean && ${MAKE} depend && exec ${MAKE}
d8 1
a8 1
MDEXT=	bsd bsd.mp bsd.rd cd${OSrev}.iso \
a10 2

.PHONY: bsd bsd.mp bootblocks
@


1.9
log
@We should not sum the install*.iso file, since it is not created at build
time.  We've been summing the one from the previous build (then additional
goo I run has been cleaning it up..)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.8 2010/08/17 19:17:14 deraadt Exp $
d12 1
a12 1
	    ${MAKE} clean && ${MAKE} depend && exec ${MAKE}
@


1.8
log
@MDEXT missed some files (result was they are not listed in the build-time
SHA256 file).  Issue spotted by claudio.
ok miod
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.7 2009/04/21 09:12:29 deraadt Exp $
d22 1
a22 1
MDEXT=	bsd bsd.mp bsd.rd cd${OSrev}.iso install${OSrev}.iso \
@


1.7
log
@move bsd and bsd.rd and all such other MD "sets" into the MD files,
since we perhaps cannot assume that is what kernels will be in the
pathetically stupid world that SGI created
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.6 2009/04/17 03:58:54 deraadt Exp $
d22 2
a23 2
MDEXT=	bsd bsd.mp bsd.rd cd${OSrev}.iso miniroot${OSrev}.fs \
	floppy${OSrev}.fs floppyB${OSrev}.fs \
@


1.6
log
@For SHA256 hashes to be ready to go onto the install media, we must
build the sets before we build the media.  While there we can get rid
of DESTDIR/snapshot too, and simply install straight into RELEASEDIR.
(This also ends up saving an astounding amount of traffic/latency in a nfs
environment)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.5 2007/11/09 18:14:33 miod Exp $
d22 1
a22 1
MDEXT=	bsd.mp cd${OSrev}.iso miniroot${OSrev}.fs \
@


1.5
log
@Missing PHONY target.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.4 2007/10/17 21:32:01 deraadt Exp $
d3 1
a3 2
.ifdef DESTDIR
snap_md: bsd bsd.mp bootblocks distrib
d5 1
a5 1
	    ${DESTDIR}/snapshot/bsd
d7 1
a7 1
	    ${DESTDIR}/snapshot/bsd.mp
d20 5
a24 1
	cp ${DESTDIR}/usr/mdec/*boot* ${DESTDIR}/snapshot
a26 2

.endif	# DESTDIR check
@


1.4
log
@build sparc64 bsd.mp too
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.3 2006/07/27 01:58:21 deraadt Exp $
d23 1
a23 1
.PHONY: bsd bootblocks
@


1.3
log
@make these more similar (few steps to that)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.2 2002/05/13 07:22:43 espie Exp $
d4 1
a4 1
snap_md: bsd bootblocks distrib
d7 2
d13 5
@


1.2
log
@move common distrib rules to main Makefile,
make -> ${MAKE}
add phony targets
remove unnecessary subshells
install kernel in a separate target from building.
some SUDO.

okay deraadt@@

(checked bootstrap on i386, should be safe elsewhere, and trivial to fix
anyways)
@
text
@d1 1
a1 2
#	$OpenBSD: Makefile.inc,v 1.1 2001/09/11 15:51:50 jason Exp $
#	etc.sparc64/Makefile.inc -- sparc64-specific etc Makefile targets
@


1.1
log
@getting close to where this might be useful...
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.9 1998/09/23 07:27:06 todd Exp $
d12 1
a12 1
	    make clean && make depend && make
d17 1
a17 3
distrib:
	cd ${.CURDIR}/../distrib && make cleandir && \
	    make && make install
@

