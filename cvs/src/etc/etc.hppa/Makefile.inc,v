head	1.13;
access;
symbols
	OPENBSD_6_2:1.13.0.2
	OPENBSD_6_2_BASE:1.13
	OPENBSD_6_1:1.12.0.26
	OPENBSD_6_1_BASE:1.12
	OPENBSD_6_0:1.12.0.24
	OPENBSD_6_0_BASE:1.12
	OPENBSD_5_9:1.12.0.18
	OPENBSD_5_9_BASE:1.12
	OPENBSD_5_8:1.12.0.20
	OPENBSD_5_8_BASE:1.12
	OPENBSD_5_7:1.12.0.12
	OPENBSD_5_7_BASE:1.12
	OPENBSD_5_6:1.12.0.16
	OPENBSD_5_6_BASE:1.12
	OPENBSD_5_5:1.12.0.14
	OPENBSD_5_5_BASE:1.12
	OPENBSD_5_4:1.12.0.10
	OPENBSD_5_4_BASE:1.12
	OPENBSD_5_3:1.12.0.8
	OPENBSD_5_3_BASE:1.12
	OPENBSD_5_2:1.12.0.6
	OPENBSD_5_2_BASE:1.12
	OPENBSD_5_1_BASE:1.12
	OPENBSD_5_1:1.12.0.4
	OPENBSD_5_0:1.12.0.2
	OPENBSD_5_0_BASE:1.12
	OPENBSD_4_9:1.10.0.2
	OPENBSD_4_9_BASE:1.10
	OPENBSD_4_8:1.7.0.6
	OPENBSD_4_8_BASE:1.7
	OPENBSD_4_7:1.7.0.2
	OPENBSD_4_7_BASE:1.7
	OPENBSD_4_6:1.7.0.4
	OPENBSD_4_6_BASE:1.7
	OPENBSD_4_5:1.5.0.12
	OPENBSD_4_5_BASE:1.5
	OPENBSD_4_4:1.5.0.10
	OPENBSD_4_4_BASE:1.5
	OPENBSD_4_3:1.5.0.8
	OPENBSD_4_3_BASE:1.5
	OPENBSD_4_2:1.5.0.6
	OPENBSD_4_2_BASE:1.5
	OPENBSD_4_1:1.5.0.4
	OPENBSD_4_1_BASE:1.5
	OPENBSD_4_0:1.5.0.2
	OPENBSD_4_0_BASE:1.5
	OPENBSD_3_9:1.4.0.12
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.4.0.10
	OPENBSD_3_8_BASE:1.4
	OPENBSD_3_7:1.4.0.8
	OPENBSD_3_7_BASE:1.4
	OPENBSD_3_6:1.4.0.6
	OPENBSD_3_6_BASE:1.4
	OPENBSD_3_5:1.4.0.4
	OPENBSD_3_5_BASE:1.4
	OPENBSD_3_4:1.4.0.2
	OPENBSD_3_4_BASE:1.4
	OPENBSD_3_3:1.3.0.2
	OPENBSD_3_3_BASE:1.3
	OPENBSD_3_2:1.2.0.2
	OPENBSD_3_2_BASE:1.2
	OPENBSD_3_1:1.1.0.10
	OPENBSD_3_1_BASE:1.1
	OPENBSD_3_0:1.1.0.8
	OPENBSD_3_0_BASE:1.1
	OPENBSD_2_9:1.1.0.6
	OPENBSD_2_9_BASE:1.1
	OPENBSD_2_8:1.1.0.4
	OPENBSD_2_8_BASE:1.1
	OPENBSD_2_7:1.1.0.2
	OPENBSD_2_7_BASE:1.1;
locks; strict;
comment	@# @;


1.13
date	2017.04.04.00.03.12;	author deraadt;	state Exp;
branches;
next	1.12;
commitid	61pPYoYUL03WPhGd;

1.12
date	2011.07.22.09.30.54;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2011.04.15.03.11.38;	author deraadt;	state Exp;
branches;
next	1.10;

1.10
date	2011.01.14.17.18.50;	author deraadt;	state Exp;
branches;
next	1.9;

1.9
date	2010.12.30.19.22.26;	author deraadt;	state Exp;
branches;
next	1.8;

1.8
date	2010.08.17.19.17.14;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	2009.04.21.09.12.26;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	2009.04.17.03.58.53;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	2006.07.27.02.53.55;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	2003.03.28.23.20.51;	author mickey;	state Exp;
branches;
next	1.3;

1.3
date	2003.01.16.19.13.36;	author mickey;	state Exp;
branches;
next	1.2;

1.2
date	2002.05.13.07.22.42;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	99.11.30.21.25.38;	author mickey;	state Exp;
branches;
next	;


desc
@@


1.13
log
@cp -p the bootblocks to RELEASEDIR; ok tb
@
text
@#	$OpenBSD: Makefile.inc,v 1.12 2011/07/22 09:30:54 espie Exp $

KERNELS += GENERIC.MP bsd.mp

bootblocks:
	cp -p ${DESTDIR}/usr/mdec/xxboot ${RELEASEDIR}

MDEXT=	bsd.rd cd${OSrev}.iso lif${OSrev}.fs xxboot
@


1.12
log
@unify kernel building on various platforms.
feedback from miod@@ and deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.11 2011/04/15 03:11:38 deraadt Exp $
d6 1
a6 1
	cp ${DESTDIR}/usr/mdec/xxboot ${RELEASEDIR}
@


1.11
log
@No need to make depend kernels
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.10 2011/01/14 17:18:50 deraadt Exp $
d3 1
a3 15
kernels: bootblocks bsd bsd.mp
	cp ${.CURDIR}/../sys/arch/hppa/compile/GENERIC/bsd \
	    ${RELEASEDIR}/bsd
	cp ${.CURDIR}/../sys/arch/hppa/compile/GENERIC.MP/bsd \
	    ${RELEASEDIR}/bsd.mp

bsd:
	cd ${.CURDIR}/../sys/arch/hppa/conf && config GENERIC
	cd ${.CURDIR}/../sys/arch/hppa/compile/GENERIC && \
	    ${MAKE} clean && exec ${MAKE}

bsd.mp:
	cd ${.CURDIR}/../sys/arch/hppa/conf && config GENERIC.MP
	cd ${.CURDIR}/../sys/arch/hppa/compile/GENERIC.MP && \
	    ${MAKE} clean && exec ${MAKE}
d8 1
a8 4
MDEXT=	bsd bsd.mp bsd.rd cd${OSrev}.iso lif${OSrev}.fs \
	xxboot

.PHONY: bsd bsd.mp bootblocks
@


1.10
log
@We should not sum the install*.iso file, since it is not created at build
time.  We've been summing the one from the previous build (then additional
goo I run has been cleaning it up..)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.9 2010/12/30 19:22:26 deraadt Exp $
d12 1
a12 1
	    ${MAKE} clean && ${MAKE} depend && exec ${MAKE}
d17 1
a17 1
	    ${MAKE} clean && ${MAKE} depend && exec ${MAKE}
@


1.9
log
@Start shipping bsd.mp for hppa; ok miod
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.8 2010/08/17 19:17:14 deraadt Exp $
d22 1
a22 1
MDEXT=	bsd bsd.mp bsd.rd cd${OSrev}.iso install${OSrev}.iso lif${OSrev}.fs \
@


1.8
log
@MDEXT missed some files (result was they are not listed in the build-time
SHA256 file).  Issue spotted by claudio.
ok miod
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.7 2009/04/21 09:12:26 deraadt Exp $
d3 1
a3 1
kernels: bootblocks bsd
d6 2
d14 5
d22 1
a22 1
MDEXT=	bsd bsd.rd cd${OSrev}.iso install${OSrev}.iso lif${OSrev}.fs \
d25 1
a25 1
.PHONY: bsd bootblocks
@


1.7
log
@move bsd and bsd.rd and all such other MD "sets" into the MD files,
since we perhaps cannot assume that is what kernels will be in the
pathetically stupid world that SGI created
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.6 2009/04/17 03:58:53 deraadt Exp $
d15 2
a16 1
MDEXT=	bsd bsd.rd cd${OSrev}.iso xxboot
@


1.6
log
@For SHA256 hashes to be ready to go onto the install media, we must
build the sets before we build the media.  While there we can get rid
of DESTDIR/snapshot too, and simply install straight into RELEASEDIR.
(This also ends up saving an astounding amount of traffic/latency in a nfs
environment)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.5 2006/07/27 02:53:55 deraadt Exp $
d15 1
a15 1
MDEXT=	cd${OSrev}.iso xxboot
@


1.5
log
@unify these damnit!
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.4 2003/03/28 23:20:51 mickey Exp $
d3 1
a3 2
.ifdef DESTDIR
snap_md: bootblocks bsd distrib
d5 1
a5 1
	    ${DESTDIR}/snapshot/bsd
d13 3
a15 1
	cp ${DESTDIR}/usr/mdec/xxboot ${DESTDIR}/snapshot
a17 2

.endif	# DESTDIR check
@


1.4
log
@empty line between the targets
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.3 2003/01/16 19:13:36 mickey Exp $
d4 1
a4 1
snap_md: boot bsd distrib
d13 1
a13 1
boot:
d16 1
a16 1
.PHONY: bsd
@


1.3
log
@include boots into the snap
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.2 2002/05/13 07:22:42 espie Exp $
d12 1
@


1.2
log
@move common distrib rules to main Makefile,
make -> ${MAKE}
add phony targets
remove unnecessary subshells
install kernel in a separate target from building.
some SUDO.

okay deraadt@@

(checked bootstrap on i386, should be safe elsewhere, and trivial to fix
anyways)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.1 1999/11/30 21:25:38 mickey Exp $
d4 1
a4 1
snap_md: bsd distrib
d12 2
@


1.1
log
@initial /etc files
@
text
@d1 1
a1 1
#	$OpenBSD$
d5 2
d11 1
a11 3
	    make clean && make depend && make
	cp ${.CURDIR}/../sys/arch/hppa/compile/GENERIC/bsd \
	    ${DESTDIR}/snapshot/bsd
d13 1
a13 3
distrib:
	cd ${.CURDIR}/../distrib && make cleandir && \
	    make && make install
@

