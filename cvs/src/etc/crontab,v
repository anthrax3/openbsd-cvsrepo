head	1.22;
access;
symbols
	OPENBSD_6_1:1.22.0.4
	OPENBSD_6_1_BASE:1.22
	OPENBSD_6_0:1.21.0.10
	OPENBSD_6_0_BASE:1.21
	OPENBSD_5_9:1.21.0.4
	OPENBSD_5_9_BASE:1.21
	OPENBSD_5_8:1.21.0.6
	OPENBSD_5_8_BASE:1.21
	OPENBSD_5_7:1.21.0.2
	OPENBSD_5_7_BASE:1.21
	OPENBSD_5_6:1.20.0.4
	OPENBSD_5_6_BASE:1.20
	OPENBSD_5_5:1.19.0.4
	OPENBSD_5_5_BASE:1.19
	OPENBSD_5_4:1.18.0.18
	OPENBSD_5_4_BASE:1.18
	OPENBSD_5_3:1.18.0.16
	OPENBSD_5_3_BASE:1.18
	OPENBSD_5_2:1.18.0.14
	OPENBSD_5_2_BASE:1.18
	OPENBSD_5_1_BASE:1.18
	OPENBSD_5_1:1.18.0.12
	OPENBSD_5_0:1.18.0.10
	OPENBSD_5_0_BASE:1.18
	OPENBSD_4_9:1.18.0.8
	OPENBSD_4_9_BASE:1.18
	OPENBSD_4_8:1.18.0.6
	OPENBSD_4_8_BASE:1.18
	OPENBSD_4_7:1.18.0.2
	OPENBSD_4_7_BASE:1.18
	OPENBSD_4_6:1.18.0.4
	OPENBSD_4_6_BASE:1.18
	OPENBSD_4_5:1.15.0.10
	OPENBSD_4_5_BASE:1.15
	OPENBSD_4_4:1.15.0.8
	OPENBSD_4_4_BASE:1.15
	OPENBSD_4_3:1.15.0.6
	OPENBSD_4_3_BASE:1.15
	OPENBSD_4_2:1.15.0.4
	OPENBSD_4_2_BASE:1.15
	OPENBSD_4_1:1.15.0.2
	OPENBSD_4_1_BASE:1.15
	OPENBSD_4_0:1.12.0.16
	OPENBSD_4_0_BASE:1.12
	OPENBSD_3_9:1.12.0.14
	OPENBSD_3_9_BASE:1.12
	OPENBSD_3_8:1.12.0.12
	OPENBSD_3_8_BASE:1.12
	OPENBSD_3_7:1.12.0.10
	OPENBSD_3_7_BASE:1.12
	OPENBSD_3_6:1.12.0.8
	OPENBSD_3_6_BASE:1.12
	OPENBSD_3_5:1.12.0.6
	OPENBSD_3_5_BASE:1.12
	OPENBSD_3_4:1.12.0.4
	OPENBSD_3_4_BASE:1.12
	OPENBSD_3_3:1.12.0.2
	OPENBSD_3_3_BASE:1.12
	OPENBSD_3_2:1.10.0.2
	OPENBSD_3_2_BASE:1.10
	OPENBSD_3_1:1.9.0.4
	OPENBSD_3_1_BASE:1.9
	OPENBSD_3_0:1.9.0.2
	OPENBSD_3_0_BASE:1.9
	OPENBSD_2_9:1.8.0.2
	OPENBSD_2_9_BASE:1.8
	OPENBSD_2_8:1.7.0.14
	OPENBSD_2_8_BASE:1.7
	OPENBSD_2_7:1.7.0.12
	OPENBSD_2_7_BASE:1.7
	OPENBSD_2_6:1.7.0.10
	OPENBSD_2_6_BASE:1.7
	OPENBSD_2_5:1.7.0.8
	OPENBSD_2_5_BASE:1.7
	OPENBSD_2_4:1.7.0.6
	OPENBSD_2_4_BASE:1.7
	OPENBSD_2_3:1.7.0.4
	OPENBSD_2_3_BASE:1.7
	OPENBSD_2_2:1.7.0.2
	OPENBSD_2_2_BASE:1.7
	OPENBSD_2_1:1.5.0.2
	OPENBSD_2_1_BASE:1.5
	OPENBSD_2_0:1.3.0.2
	OPENBSD_2_0_BASE:1.3
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.22
date	2016.09.04.09.37.26;	author tb;	state Exp;
branches;
next	1.21;
commitid	KE0WBxB24ypm4qUm;

1.21
date	2014.09.15.22.28.58;	author matthieu;	state Exp;
branches;
next	1.20;
commitid	KGd36IP2Igl01unI;

1.20
date	2014.03.12.18.21.34;	author tedu;	state Exp;
branches;
next	1.19;

1.19
date	2013.10.19.15.26.06;	author halex;	state Exp;
branches;
next	1.18;

1.18
date	2009.05.09.17.15.49;	author schwarze;	state Exp;
branches;
next	1.17;

1.17
date	2009.05.09.16.29.54;	author schwarze;	state Exp;
branches;
next	1.16;

1.16
date	2009.05.09.14.21.24;	author schwarze;	state Exp;
branches;
next	1.15;

1.15
date	2007.02.27.16.04.16;	author beck;	state Exp;
branches;
next	1.14;

1.14
date	2007.02.24.19.30.59;	author millert;	state Exp;
branches;
next	1.13;

1.13
date	2006.10.06.23.56.18;	author ray;	state Exp;
branches;
next	1.12;

1.12
date	2003.03.10.01.05.28;	author deraadt;	state Exp;
branches;
next	1.11;

1.11
date	2002.12.27.01.30.19;	author deraadt;	state Exp;
branches;
next	1.10;

1.10
date	2002.07.15.19.13.28;	author millert;	state Exp;
branches;
next	1.9;

1.9
date	2001.09.11.19.03.55;	author millert;	state Exp;
branches;
next	1.8;

1.8
date	2000.12.29.14.38.45;	author angelos;	state Exp;
branches;
next	1.7;

1.7
date	97.08.18.06.12.51;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	97.07.07.23.19.41;	author downsj;	state Exp;
branches;
next	1.5;

1.5
date	97.04.03.20.12.07;	author gene;	state Exp;
branches;
next	1.4;

1.4
date	96.12.07.07.50.33;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	96.05.26.10.25.18;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	96.03.28.18.24.33;	author niklas;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.37.56;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.37.56;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.22
log
@bump the random timeout to taking % 2048 sec to avoid modulus bias

ok phessler
@
text
@#	$OpenBSD: crontab,v 1.21 2014/09/15 22:28:58 matthieu Exp $
#
# /var/cron/tabs/root - root's crontab
#
SHELL=/bin/sh
PATH=/bin:/sbin:/usr/bin:/usr/sbin
HOME=/var/log
#
#minute	hour	mday	month	wday	command
#
# rotate log files every hour, if necessary
0	*	*	*	*	/usr/bin/newsyslog
# send log file notifications, if necessary
#1-59	*	*	*	*	/usr/bin/newsyslog -m
#
# do daily/weekly/monthly maintenance
30	1	*	*	*	/bin/sh /etc/daily
30	3	*	*	6	/bin/sh /etc/weekly
30	5	1	*	*	/bin/sh /etc/monthly
#0	*	*	*	*	sleep $((RANDOM \% 2048)) && /usr/libexec/spamd-setup
@


1.21
log
@Remove sendmail tentacles. ok krw@@ ajacoutot@@
@
text
@d1 1
a1 1
#	$OpenBSD: crontab,v 1.20 2014/03/12 18:21:34 tedu Exp $
d20 1
a20 1
#0	*	*	*	*	sleep $((RANDOM \% 1800)) && /usr/libexec/spamd-setup
@


1.20
log
@switch over to smtpd by default.
ok deraadt gilles todd
@
text
@d1 1
a1 1
#	$OpenBSD: crontab,v 1.19 2013/10/19 15:26:06 halex Exp $
a9 3
#
# sendmail clientmqueue runner
#*/30	*	*	*	*	/usr/sbin/sendmail -L sm-msp-queue -Ac -q
@


1.19
log
@add a random sleep of up to half an hour to distribute the server
load from spamd-setup. Brought up by phessler@@ who also pointed out
that the percent sign must be escaped in the command.

ok ajacoutot@@ joerg@@ phessler@@ and sort of @@blambert
@
text
@d1 1
a1 1
#	$OpenBSD: crontab,v 1.18 2009/05/09 17:15:49 schwarze Exp $
d12 1
a12 1
*/30	*	*	*	*	/usr/sbin/sendmail -L sm-msp-queue -Ac -q
@


1.18
log
@make weekly and monthly silent by default
add the same infrastructure to daily; silencing daily needs another step
discussed with ajacoutot@@ okan@@ todd@@ sthen@@ deraadt@@ jmc@@
"immediately commit" deraadt@@ (without seeing the final diff)
@
text
@d1 1
a1 1
#	$OpenBSD: crontab,v 1.15 2007/02/27 16:04:16 beck Exp $
d23 1
a23 1
#0	*	*	*	*	/usr/libexec/spamd-setup
@


1.17
log
@revert previous, requested by kettenis@@ and deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: crontab,v 1.16 2009/05/09 14:21:24 schwarze Exp $
d20 3
a22 3
30	1	*	*	*	umask 077; /bin/sh /etc/daily 2>&1 | tee /var/log/daily.out | mail -s "`/bin/hostname` daily output" root
30	3	*	*	6	umask 077; /bin/sh /etc/weekly 2>&1 | tee /var/log/weekly.out | mail -s "`/bin/hostname` weekly output" root
30	5	1	*	*	umask 077; /bin/sh /etc/monthly 2>&1 | tee /var/log/monthly.out | mail -s "`/bin/hostname` monthly output" root
@


1.16
log
@remove the empty script /etc/monthly
in preparation for improvements in /etc/daily and /etc/weekly
using feedback and suggestions from jmc@@ and sthen@@
ok jmc@@, and sthen@@ agreed with the general direction
@
text
@d1 1
a1 1
#	$OpenBSD: crontab,v 1.15 2007/02/27 16:04:16 beck Exp $
d19 1
a19 1
# do daily and weekly maintenance
d22 1
@


1.15
log
@spamd-setup now doesn't take -g - this is the new default.
noticed by jmc@@
@
text
@d1 1
a1 1
#	$OpenBSD: crontab,v 1.14 2007/02/24 19:30:59 millert Exp $
d19 1
a19 1
# do daily/weekly/monthly maintenance
a21 1
30	5	1	*	*	umask 077; /bin/sh /etc/monthly 2>&1 | tee /var/log/monthly.out | mail -s "`/bin/hostname` monthly output" root
@


1.14
log
@Make greylisting the default when spamd is enabled.  Uses the new -g flag
for spamd-setup.  OK beck@@
@
text
@d1 1
a1 1
#	$OpenBSD: crontab,v 1.13 2006/10/06 23:56:18 ray Exp $
d23 1
a23 1
#0	*	*	*	*	/usr/libexec/spamd-setup -g
@


1.13
log
@Don't allow anyone but root to read /var/log/{daily,weekly,monthly}.out.
Unfortunately this does not fix existing file permissions.

Spotted by Antti Harri <iku at openbsd dot fi>.

OK millert@@.
@
text
@d1 1
a1 1
#	$OpenBSD: crontab,v 1.12 2003/03/10 01:05:28 deraadt Exp $
d23 1
a23 1
#0	*	*	*	*	/usr/libexec/spamd-setup
@


1.12
log
@commented hourly spamd-setup run
@
text
@d1 1
a1 1
#	$OpenBSD: crontab,v 1.11 2002/12/27 01:30:19 deraadt Exp $
d20 3
a22 3
30	1	*	*	*	/bin/sh /etc/daily 2>&1 | tee /var/log/daily.out | mail -s "`/bin/hostname` daily output" root
30	3	*	*	6	/bin/sh /etc/weekly 2>&1 | tee /var/log/weekly.out | mail -s "`/bin/hostname` weekly output" root
30	5	1	*	*	/bin/sh /etc/monthly 2>&1 | tee /var/log/monthly.out | mail -s "`/bin/hostname` monthly output" root
@


1.11
log
@spamd startup stuff
@
text
@d1 1
a1 1
#	$OpenBSD: crontab,v 1.10 2002/07/15 19:13:28 millert Exp $
d23 1
a23 1
#*/4	*	*	*	*	/usr/libexec/spamd-setup -s
@


1.10
log
@Move atrun(8) functionality into cron(8) proper.  This fixes the
long-standing annoyance that atrun's granularity is 10 minutes.
Most at jobs run with a 1 minute granularity.  Jobs submitted via
"at now" or "batch" will run immediately.  Includes a rewritten
cron(8) man page.  at(1) will be integrated more closely into
cron at a future date.

Upgrading notes:
    the atrun job in root's crontab should be removed.
    the /var/at/spool directory is no longer used
@
text
@d1 1
a1 1
#	$OpenBSD: crontab,v 1.9 2001/09/11 19:03:55 millert Exp $
d23 1
@


1.9
log
@Scaffolding to support sendmail 8.12.  Note that the new smmsp user/group
are *required*.
@
text
@d1 1
a1 1
#	$OpenBSD: crontab,v 1.8 2000/12/29 14:38:45 angelos Exp $
a9 2
#
*/10	*	*	*	*	/usr/libexec/atrun
@


1.8
log
@newsyslog/newsyslog -m shouldn't conflict in scheduling.
@
text
@d1 1
a1 1
#	$OpenBSD: crontab,v 1.7 1997/08/18 06:12:51 deraadt Exp $
d12 3
@


1.7
log
@put hostname in mail subject; jbernard@@tater.mines.edu
@
text
@d1 1
a1 1
#	$OpenBSD: crontab,v 1.6 1997/07/07 23:19:41 downsj Exp $
d16 1
a16 1
#*/1	*	*	*	*	/usr/bin/newsyslog -m
@


1.6
log
@Example (commented out) entry for running newsyslog -m.
@
text
@d1 1
a1 1
#	$OpenBSD: crontab,v 1.5 1997/04/03 20:12:07 gene Exp $
d19 3
a21 3
30	1	*	*	*	/bin/sh /etc/daily 2>&1 | tee /var/log/daily.out | mail -s "daily output" root
30	3	*	*	6	/bin/sh /etc/weekly 2>&1 | tee /var/log/weekly.out | mail -s "weekly output" root
30	5	1	*	*	/bin/sh /etc/monthly 2>&1 | tee /var/log/monthly.out | mail -s "monthly output" root
@


1.5
log
@Avoid confusion on running /etc/daily on daylight-savings change days.
@
text
@d1 1
a1 1
#	$OpenBSD: crontab,v 1.4 1996/12/07 07:50:33 deraadt Exp $
d15 2
@


1.4
log
@/etc does not contain bins
@
text
@d1 1
a1 1
#	$OpenBSD: crontab,v 1.3 1996/05/26 10:25:18 deraadt Exp $
d17 1
a17 1
0	2	*	*	*	/bin/sh /etc/daily 2>&1 | tee /var/log/daily.out | mail -s "daily output" root
@


1.3
log
@sync & label
@
text
@d1 1
a1 1
#	$OpenBSD$
d6 1
a6 1
PATH=/etc:/bin:/sbin:/usr/bin:/usr/sbin
@


1.2
log
@From NetBSD: merge of 960317
@
text
@a1 1
#	$NetBSD: crontab,v 1.10 1996/02/18 12:08:26 mycroft Exp $
d3 1
a3 1
# /var/cron/tabs/root - root's crontab for NetBSD
@


1.1
log
@Initial revision
@
text
@d1 3
a4 1
# $Id: crontab,v 1.8 1994/02/19 11:04:48 cgd Exp $
d12 1
a12 1
0-59/10	*	*	*	*	/usr/libexec/atrun
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
