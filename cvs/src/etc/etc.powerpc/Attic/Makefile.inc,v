head	1.17;
access;
symbols
	OPENBSD_2_9:1.16.0.4
	OPENBSD_2_9_BASE:1.16
	OPENBSD_2_8:1.16.0.2
	OPENBSD_2_8_BASE:1.16
	OPENBSD_2_7:1.15.0.2
	OPENBSD_2_7_BASE:1.15
	OPENBSD_2_6:1.14.0.6
	OPENBSD_2_6_BASE:1.14
	OPENBSD_2_5:1.14.0.4
	OPENBSD_2_5_BASE:1.14
	OPENBSD_2_4:1.14.0.2
	OPENBSD_2_4_BASE:1.14
	OPENBSD_2_3:1.5.0.2
	OPENBSD_2_3_BASE:1.5
	OPENBSD_2_2:1.4.0.2
	OPENBSD_2_2_BASE:1.4
	OPENBSD_2_1:1.3.0.2
	OPENBSD_2_1_BASE:1.3;
locks; strict;
comment	@# @;


1.17
date	2001.09.01.16.13.47;	author drahn;	state dead;
branches;
next	1.16;

1.16
date	2000.08.08.01.08.07;	author deraadt;	state Exp;
branches;
next	1.15;

1.15
date	2000.02.03.03.06.55;	author rahnds;	state Exp;
branches;
next	1.14;

1.14
date	98.10.20.23.22.17;	author rahnds;	state Exp;
branches;
next	1.13;

1.13
date	98.09.17.13.43.07;	author rahnds;	state Exp;
branches;
next	1.12;

1.12
date	98.09.17.05.56.08;	author rahnds;	state Exp;
branches;
next	1.11;

1.11
date	98.09.16.20.27.26;	author rahnds;	state Exp;
branches;
next	1.10;

1.10
date	98.09.16.03.39.02;	author rahnds;	state Exp;
branches;
next	1.9;

1.9
date	98.09.12.20.07.36;	author rahnds;	state Exp;
branches;
next	1.8;

1.8
date	98.09.09.13.54.58;	author rahnds;	state Exp;
branches;
next	1.7;

1.7
date	98.07.19.19.42.54;	author rahnds;	state Exp;
branches;
next	1.6;

1.6
date	98.05.29.04.22.19;	author rahnds;	state Exp;
branches;
next	1.5;

1.5
date	98.04.06.20.17.19;	author pefo;	state Exp;
branches;
next	1.4;

1.4
date	97.09.21.11.50.36;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	97.05.13.19.46.10;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	97.05.03.07.48.38;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	97.01.21.23.18.06;	author rahnds;	state Exp;
branches;
next	;


desc
@@


1.17
log
@The "powerpc" port which has supported the newer Apple Macintosh powerpc based
is being renamed to macppc. This is to allow sharing of common code
between different powerpc base platforms.

Files moved from etc/etc.powerpc to etc/etc.macppc
@
text
@#	$OpenBSD: Makefile.inc,v 1.16 2000/08/08 01:08:07 deraadt Exp $
#	etc.powerpc/Makefile.inc -- powerpc-specific etc Makefile targets

.ifdef DESTDIR
snap_md: bsd distrib

bsd:
	cd ${.CURDIR}/../sys/arch/powerpc/conf && config GENERIC
	cd ${.CURDIR}/../sys/arch/powerpc/compile/GENERIC && \
	    make clean && make depend && make
	cp ${.CURDIR}/../sys/arch/powerpc/compile/GENERIC/bsd \
	    ${DESTDIR}/snapshot/bsd

# knows about  bsd.rd and bsdofw.rd
distrib:
	cp ${DESTDIR}/usr/mdec/ofwboot ${DESTDIR}/snapshot/ofwboot
	cd ${.CURDIR}/../distrib && make cleandir && \
		make && make install
	mkdir ${DESTDIR}/snapshot/boot
	cp ${DESTDIR}/snapshot/bsd.rd ${DESTDIR}/snapshot/boot/bsd.rd
	strip ${DESTDIR}/snapshot/boot/bsd.rd
	gzip -9 ${DESTDIR}/snapshot/boot/bsd.rd
	mv ${DESTDIR}/snapshot/boot/bsd.rd.gz ${DESTDIR}/snapshot/boot/bsd
	cp ${DESTDIR}/usr/mdec/ofwboot ${DESTDIR}/snapshot/boot
	mkisofs -r ${DESTDIR}/snapshot/boot > ${DESTDIR}/snapshot/boot.fs
	rm -rf ${DESTDIR}/snapshot/boot
	#
	# compress the bsd.rd files but keep original naming,
	# bootloader can deal with it.
	gzip -9 ${DESTDIR}/snapshot/bsd.rd
	mv ${DESTDIR}/snapshot/bsd.rd.gz ${DESTDIR}/snapshot/bsd.rd


.endif	# DESTDIR check
@


1.16
log
@use GENERIC and RAMDISK
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.15 2000/02/03 03:06:55 rahnds Exp $
@


1.15
log
@Use the correct terminal entry for Openfirmware console.
Allows visual editors to be used.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.14 1998/10/20 23:22:17 rahnds Exp $
d8 2
a9 2
	cd ${.CURDIR}/../sys/arch/powerpc/conf && config GENERICMAC
	cd ${.CURDIR}/../sys/arch/powerpc/compile/GENERICMAC && \
d11 1
a11 1
	cp ${.CURDIR}/../sys/arch/powerpc/compile/GENERICMAC/bsd \
@


1.14
log
@Mix kernels are no longer necessary, Generic will work sufficiently.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.13 1998/09/17 13:43:07 rahnds Exp $
d8 2
a9 2
	cd ${.CURDIR}/../sys/arch/powerpc/conf && config GENERIC
	cd ${.CURDIR}/../sys/arch/powerpc/compile/GENERIC && \
d11 1
a11 1
	cp ${.CURDIR}/../sys/arch/powerpc/compile/GENERIC/bsd \
a12 5
	cd ${.CURDIR}/../sys/arch/powerpc/conf && config DDBOFW
	cd ${.CURDIR}/../sys/arch/powerpc/compile/DDBOFW && \
	    make clean && make depend && make
	(cd  ${.CURDIR}/../sys/arch/powerpc/compile/DDBOFW/ && \
		tar czf ${DESTDIR}/snapshot/bsdofw${OSrev}.tar.gz bsd )
a27 10
	mkdir ${DESTDIR}/snapshot/bootofw
	cp ${DESTDIR}/snapshot/bsdofw.rd ${DESTDIR}/snapshot/bootofw/bsdofw.rd
	strip ${DESTDIR}/snapshot/bootofw/bsdofw.rd
	gzip -9 ${DESTDIR}/snapshot/bootofw/bsdofw.rd
	mv ${DESTDIR}/snapshot/bootofw/bsdofw.rd.gz ${DESTDIR}/snapshot/bootofw/bsd
	cp ${DESTDIR}/usr/mdec/ofwboot ${DESTDIR}/snapshot/bootofw
	cp ${DESTDIR}/usr/mdec/boot.mac ${DESTDIR}/snapshot/bootofw
	mkisofs -r ${DESTDIR}/snapshot/bootofw > ${DESTDIR}/snapshot/bootofw.fs
	rm -rf ${DESTDIR}/snapshot/bootofw
	#
a31 2
	gzip -9 ${DESTDIR}/snapshot/bsdofw.rd
	mv ${DESTDIR}/snapshot/bsdofw.rd.gz ${DESTDIR}/snapshot/bsdofw.rd
@


1.13
log
@Fix typo in powerpc distrib target.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.12 1998/09/17 05:56:08 rahnds Exp $
a17 5
	cd ${.CURDIR}/../sys/arch/powerpc/conf && config MIX
	cd ${.CURDIR}/../sys/arch/powerpc/compile/MIX && \
	    make clean && make depend && make
	(cd  ${.CURDIR}/../sys/arch/powerpc/compile/MIX/ && \
		tar czf ${DESTDIR}/snapshot/bsdmix${OSrev}.tar.gz bsd )
d19 1
a19 1
# knows about  bsd.rd, bsdofw.rd and bsdmix.rd
a42 8
	mkdir ${DESTDIR}/snapshot/bootmix
	cp ${DESTDIR}/snapshot/bsdmix.rd ${DESTDIR}/snapshot/bootmix/bsdmix.rd
	strip ${DESTDIR}/snapshot/bootmix/bsdmix.rd
	gzip -9 ${DESTDIR}/snapshot/bootmix/bsdmix.rd
	mv ${DESTDIR}/snapshot/bootmix/bsdmix.rd.gz ${DESTDIR}/snapshot/bootmix/bsd
	cp ${DESTDIR}/usr/mdec/ofwboot ${DESTDIR}/snapshot/bootmix
	mkisofs -r ${DESTDIR}/snapshot/bootmix > ${DESTDIR}/snapshot/bootmix.fs
	rm -rf ${DESTDIR}/snapshot/bootmix
a48 2
	gzip -9 ${DESTDIR}/snapshot/bsdmix.rd
	mv ${DESTDIR}/snapshot/bsdmix.rd.gz ${DESTDIR}/snapshot/bsdmix.rd
@


1.12
log
@Compress the ramdisk images, bootloader can deal with it and
it will save disk space (cd and ftp.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.11 1998/09/16 20:27:26 rahnds Exp $
d61 1
a61 1
	mv ${DESTDIR}/snapshot/bsd.rdofw.gz ${DESTDIR}/snapshot/bsdofw.rd
d63 1
a63 1
	mv ${DESTDIR}/snapshot/bsd.rdmix.gz ${DESTDIR}/snapshot/bsdmix.rd
@


1.11
log
@Remove ugly hack, use system defined variables.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.10 1998/09/16 03:39:02 rahnds Exp $
d56 8
@


1.10
log
@deal with version number bump.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.9 1998/09/12 20:07:36 rahnds Exp $
a3 4
# HACK ALERT 
REL=24
# unhack

d17 1
a17 1
		tar czf ${DESTDIR}/snapshot/bsdofw${REL}.tar.gz bsd )
d22 1
a22 1
		tar czf ${DESTDIR}/snapshot/bsdmix${REL}.tar.gz bsd )
@


1.9
log
@Put additional kernels in installation directory as filesets, so they can
be selected on install instead of necessitating a manual step.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.8 1998/09/09 13:54:58 rahnds Exp $
d5 1
a5 1
REL=23
@


1.8
log
@build third kernel/boot floppy (for now).
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.7 1998/07/19 19:42:54 rahnds Exp $
d4 4
d20 2
a21 2
	cp ${.CURDIR}/../sys/arch/powerpc/compile/DDBOFW/bsd \
	    ${DESTDIR}/snapshot/bsdofw
d25 2
a26 2
	cp ${.CURDIR}/../sys/arch/powerpc/compile/MIX/bsd \
	    ${DESTDIR}/snapshot/bsdmix
@


1.7
log
@include ofwboot as one of the release files.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.6 1998/05/29 04:22:19 rahnds Exp $
d18 5
d24 1
a24 1
# knows about bsdofw.rd and bsd.rd
d47 9
@


1.6
log
@configuration (/etc) changes causes with the changes to ofw support in
powerpc port.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.5 1998/04/06 20:17:19 pefo Exp $
d5 1
a5 5
snap_md: binutils bsd distrib

binutils:
	cd ${DESTDIR} && tar cf - usr/*openbsd* \
	    | ${GZIP} ${GZIPFLAGS} > snapshot/usr.binutils.tar${GZIPEXT}
d21 1
@


1.5
log
@reality check
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.4 1997/09/21 11:50:36 deraadt Exp $
d17 5
d23 1
d26 20
a45 1
	    make && make install
@


1.4
log
@$OpenBSD
@
text
@d1 1
a1 1
#	$OpenBSD$
d5 1
a5 1
snap_md: binutils bsd bootblocks
d18 3
a20 2
bootblocks:
	cp ${DESTDIR}/usr/mdec/*boot* ${DESTDIR}/snapshot
@


1.3
log
@bootblocks in snap/release too
@
text
@d1 1
a1 1
#
a2 2
#
#	$Id: Makefile.inc,v 1.2 1997/05/03 07:48:38 deraadt Exp $
@


1.2
log
@put generic kernel in snap too
@
text
@d4 1
a4 1
#	$Id: Makefile.inc,v 1.1 1997/01/21 23:18:06 rahnds Exp $
d7 1
a7 1
snap_md: binutils bsd
d19 3
@


1.1
log
@Build bsd and binutils for powerpc ala alpha and pmax.
@
text
@d4 1
a4 1
#	$Id: Makefile.inc,v 1.2 1997/01/21 12:02:52 graichen Exp $
d7 1
a7 1
snap_md: binutils
@
