head	1.21;
access;
symbols
	OPENBSD_6_1:1.21.0.4
	OPENBSD_6_1_BASE:1.21
	OPENBSD_6_0:1.20.0.4
	OPENBSD_6_0_BASE:1.20
	OPENBSD_5_9:1.18.0.2
	OPENBSD_5_9_BASE:1.18
	OPENBSD_5_8:1.18.0.4
	OPENBSD_5_8_BASE:1.18
	OPENBSD_5_7:1.17.0.2
	OPENBSD_5_7_BASE:1.17
	OPENBSD_5_6:1.16.0.6
	OPENBSD_5_6_BASE:1.16
	OPENBSD_5_5:1.16.0.2
	OPENBSD_5_5_BASE:1.16
	OPENBSD_5_4:1.15.0.10
	OPENBSD_5_4_BASE:1.15
	OPENBSD_5_3:1.15.0.8
	OPENBSD_5_3_BASE:1.15
	OPENBSD_5_2:1.15.0.6
	OPENBSD_5_2_BASE:1.15
	OPENBSD_5_1_BASE:1.15
	OPENBSD_5_1:1.15.0.4
	OPENBSD_5_0:1.15.0.2
	OPENBSD_5_0_BASE:1.15
	OPENBSD_4_9:1.13.0.4
	OPENBSD_4_9_BASE:1.13
	OPENBSD_4_8:1.13.0.2
	OPENBSD_4_8_BASE:1.13
	OPENBSD_4_7:1.10.0.2
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.9.0.26
	OPENBSD_4_6_BASE:1.9
	OPENBSD_4_5:1.9.0.22
	OPENBSD_4_5_BASE:1.9
	OPENBSD_4_4:1.9.0.20
	OPENBSD_4_4_BASE:1.9
	OPENBSD_4_3:1.9.0.18
	OPENBSD_4_3_BASE:1.9
	OPENBSD_4_2:1.9.0.16
	OPENBSD_4_2_BASE:1.9
	OPENBSD_4_1:1.9.0.14
	OPENBSD_4_1_BASE:1.9
	OPENBSD_4_0:1.9.0.12
	OPENBSD_4_0_BASE:1.9
	OPENBSD_3_9:1.9.0.10
	OPENBSD_3_9_BASE:1.9
	OPENBSD_3_8:1.9.0.8
	OPENBSD_3_8_BASE:1.9
	OPENBSD_3_7:1.9.0.6
	OPENBSD_3_7_BASE:1.9
	OPENBSD_3_6:1.9.0.4
	OPENBSD_3_6_BASE:1.9
	OPENBSD_3_5:1.9.0.2
	OPENBSD_3_5_BASE:1.9
	OPENBSD_3_4:1.8.0.2
	OPENBSD_3_4_BASE:1.8
	OPENBSD_3_3:1.6.0.10
	OPENBSD_3_3_BASE:1.6
	OPENBSD_3_2:1.6.0.8
	OPENBSD_3_2_BASE:1.6
	OPENBSD_3_1:1.6.0.6
	OPENBSD_3_1_BASE:1.6
	OPENBSD_3_0:1.6.0.4
	OPENBSD_3_0_BASE:1.6
	OPENBSD_2_9:1.6.0.2
	OPENBSD_2_9_BASE:1.6
	OPENBSD_2_8:1.4.0.6
	OPENBSD_2_8_BASE:1.4
	OPENBSD_2_7:1.4.0.4
	OPENBSD_2_7_BASE:1.4
	OPENBSD_2_6:1.4.0.2
	OPENBSD_2_6_BASE:1.4
	OPENBSD_2_5:1.2.0.2
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.1.0.2
	OPENBSD_2_4_BASE:1.1;
locks; strict;
comment	@# @;


1.21
date	2017.03.02.10.38.09;	author natano;	state Exp;
branches;
next	1.20;
commitid	EeVoCYFCx2tYicZQ;

1.20
date	2016.03.03.12.41.29;	author naddy;	state Exp;
branches;
next	1.19;
commitid	Ykztt9UU7jxBEqeD;

1.19
date	2016.02.29.19.44.07;	author naddy;	state Exp;
branches;
next	1.18;
commitid	Tzte6JKABMyG38MY;

1.18
date	2015.06.16.20.30.24;	author miod;	state Exp;
branches;
next	1.17;
commitid	I1lkcq8SFdiBupko;

1.17
date	2015.01.20.07.00.05;	author miod;	state Exp;
branches;
next	1.16;
commitid	a0COb6b3SwhOvUu2;

1.16
date	2013.10.17.10.21.59;	author deraadt;	state Exp;
branches;
next	1.15;

1.15
date	2011.07.04.23.03.06;	author tedu;	state Exp;
branches;
next	1.14;

1.14
date	2011.04.05.15.36.26;	author guenther;	state Exp;
branches;
next	1.13;

1.13
date	2010.08.06.02.43.57;	author deraadt;	state Exp;
branches;
next	1.12;

1.12
date	2010.07.05.22.26.20;	author tedu;	state Exp;
branches;
next	1.11;

1.11
date	2010.07.01.17.26.52;	author tedu;	state Exp;
branches;
next	1.10;

1.10
date	2009.08.04.18.45.44;	author jmc;	state Exp;
branches;
next	1.9;

1.9
date	2004.03.15.02.48.46;	author mcbride;	state Exp;
branches;
next	1.8;

1.8
date	2003.08.24.06.21.56;	author tedu;	state Exp;
branches;
next	1.7;

1.7
date	2003.03.28.00.49.09;	author miod;	state Exp;
branches;
next	1.6;

1.6
date	2001.03.13.21.23.13;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	2001.01.05.04.27.22;	author marc;	state Exp;
branches;
next	1.4;

1.4
date	99.07.24.23.58.20;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	99.07.06.08.03.28;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	99.02.23.04.23.26;	author marc;	state Exp;
branches;
next	1.1;

1.1
date	98.05.05.21.52.02;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.21
log
@Add a new sysctl machdep.lidaction. The sysctl works as follows:

machdep.lidaction=0	# do nothing
machdep.lidaction=1	# suspend
machdep.lidaction=2	# hibernate

lidsuspend is just an alias for lidaction, so if you change one, the
other one will have the same value. The plan is to remove
machdep.lidsuspend eventually when people have upgraded their
/ets/sysctl.conf.

discussed with deraadt, who came up with the new MIB name
no objections mlarkin
ok stsp halex jcs
@
text
@#machdep.allowaperture=2	# See xf86(4)
#machdep.apmhalt=1		# 1=powerdown hack, try if halt -p doesn't work
#machdep.kbdreset=1		# permit console CTRL-ALT-DEL to do a nice halt
#machdep.lidaction=0		# 1=suspend, 2=hibernate laptop upon lid closing
@


1.20
log
@Remove option USER_LDT and everything depending on it.
Remove machdep.userldt sysctl.
Remove i386_[gs]et_ldt syscall stub from libi386.
Remove i386_[gs]et_ldt regression test.

ok mlarkin@@ millert@@ guenther@@
@
text
@d4 1
a4 1
#machdep.lidsuspend=0		# do not suspend laptop upon lid closing
@


1.19
log
@delete the kern.emul/KERN_EMUL sysctl bits since there are no
emulations left; ok millert@@ deraadt@@, jmc@@ (man pages)
@
text
@a4 2
#machdep.userldt=1		# allow userland programs to play with ldt,
				# required by some ports
@


1.18
log
@Typos in comments; Ville Valkonen
@
text
@a6 1
#kern.emul.linux=1		# enable running Linux binaries
@


1.17
log
@Change the machdep.lidsupsend example now that the default setting has been
inverted.
@
text
@d4 1
a4 1
#machdep.lidsuspend=0		# do not supsend laptop upon lid closing
@


1.16
log
@a.out emulation went away
@
text
@d4 1
a4 1
#machdep.lidsuspend=1		# laptop lid closes cause a suspend
@


1.15
log
@remove svr4 compat references
@
text
@a6 1
#kern.emul.aout=1		# enable running dynamic OpenBSD a.out bins
@


1.14
log
@Bye bye, kern.emul.freebsd
Pointed out by aja@@
@
text
@a8 1
#kern.emul.svr4=1		# enable running SVR4 binaries
@


1.13
log
@document machdep.lidsuspend by example
@
text
@a7 1
#kern.emul.freebsd=1		# enable running FreeBSD binaries
@


1.12
log
@compat_bsdos is gone
@
text
@d4 1
@


1.11
log
@another day, another compat gets removed.  today is ibcs2's turn
@
text
@a6 1
#kern.emul.bsdos=1		# enable running BSD/OS binaries
@


1.10
log
@zap the rather useless machdep.apmwarn entries (see apm(4));
ok deraadt
@
text
@a8 1
#kern.emul.ibcs2=1		# enable running iBCS2 binaries
@


1.9
log
@Uncommenting machdep.apmhalt should have an effect.

ok marc@@ fgsch@@
@
text
@a1 1
#machdep.apmwarn=10		# battery % when apm status messages enabled
@


1.8
log
@put emul sysctls in appropriate arch.  also fix up the comments.
problems noted by fgsch@@ and deraadt@@
@
text
@d3 1
a3 1
#machdep.apmhalt=0		# 1=powerdown hack, try if halt -p doesn't work
@


1.7
log
@Add a sysctl to option USER_LDT, to control its behaviour, which will be
disabled by default.

Enable with sysctl -w machdep.userldt=1

This will allow people to use the few ports that require this functionality
to work without requiring the user to recompile a kernel.

The option USER_LDT remains in order to not increase size on the
installation media. It is now enabled in GENERIC.

Per espie@@'s idea, but my diff was much simpler than his; ok deraadt@@
@
text
@d7 6
@


1.6
log
@at install time, if X is chosen, set machdep.aperature to 2 instead of 1.
@
text
@d5 2
@


1.5
log
@
Add i386 specific sysctl to modify halt -p processing, required to make
powerdown work correctly on some processors.   Idea from mickey@@ and
smcho@@tsp.korea.ac.kr.   Tested my me and angelos@@.

Note: If you want to try these out you'll need to

  cd /sys/arch/i386/include &&
sudo install -m 444 -o root -g root cpu.h /usr/include/i386
cd /usr/src/sbin/sysctl && make obj && make && sudo make install

to get a sysctl that understands the new variable (machdep.apmhalt).
@
text
@d1 1
a1 1
#machdep.allowaperture=1	# 1=permit access to aperture driver (XFree86)
@


1.4
log
@shorter lines
@
text
@d3 1
@


1.3
log
@document machdep.kbdreset
@
text
@d1 1
a1 1
#machdep.allowaperture=1	# 1=On i386, permit access to aperture driver for XFree86
d3 1
a3 1
#machdep.kbdreset=1		# permit CTRL-ALT-DEL on console to do a nice halt
@


1.2
log
@add machdep.apmwarc (commented out) so people know where
to change it if they so desire
@
text
@d3 1
@


1.1
log
@split sysctl.conf into MD and MI parts
@
text
@d2 1
@

