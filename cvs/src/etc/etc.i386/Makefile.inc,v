head	1.24;
access;
symbols
	OPENBSD_6_1:1.24.0.8
	OPENBSD_6_1_BASE:1.24
	OPENBSD_6_0:1.24.0.10
	OPENBSD_6_0_BASE:1.24
	OPENBSD_5_9:1.24.0.4
	OPENBSD_5_9_BASE:1.24
	OPENBSD_5_8:1.24.0.6
	OPENBSD_5_8_BASE:1.24
	OPENBSD_5_7:1.24.0.2
	OPENBSD_5_7_BASE:1.24
	OPENBSD_5_6:1.23.0.4
	OPENBSD_5_6_BASE:1.23
	OPENBSD_5_5:1.22.0.2
	OPENBSD_5_5_BASE:1.22
	OPENBSD_5_4:1.20.0.10
	OPENBSD_5_4_BASE:1.20
	OPENBSD_5_3:1.20.0.8
	OPENBSD_5_3_BASE:1.20
	OPENBSD_5_2:1.20.0.6
	OPENBSD_5_2_BASE:1.20
	OPENBSD_5_1_BASE:1.20
	OPENBSD_5_1:1.20.0.4
	OPENBSD_5_0:1.20.0.2
	OPENBSD_5_0_BASE:1.20
	OPENBSD_4_9:1.18.0.8
	OPENBSD_4_9_BASE:1.18
	OPENBSD_4_8:1.18.0.6
	OPENBSD_4_8_BASE:1.18
	OPENBSD_4_7:1.18.0.2
	OPENBSD_4_7_BASE:1.18
	OPENBSD_4_6:1.18.0.4
	OPENBSD_4_6_BASE:1.18
	OPENBSD_4_5:1.16.0.12
	OPENBSD_4_5_BASE:1.16
	OPENBSD_4_4:1.16.0.10
	OPENBSD_4_4_BASE:1.16
	OPENBSD_4_3:1.16.0.8
	OPENBSD_4_3_BASE:1.16
	OPENBSD_4_2:1.16.0.6
	OPENBSD_4_2_BASE:1.16
	OPENBSD_4_1:1.16.0.4
	OPENBSD_4_1_BASE:1.16
	OPENBSD_4_0:1.16.0.2
	OPENBSD_4_0_BASE:1.16
	OPENBSD_3_9:1.15.0.6
	OPENBSD_3_9_BASE:1.15
	OPENBSD_3_8:1.15.0.4
	OPENBSD_3_8_BASE:1.15
	OPENBSD_3_7:1.15.0.2
	OPENBSD_3_7_BASE:1.15
	OPENBSD_3_6:1.14.0.2
	OPENBSD_3_6_BASE:1.14
	OPENBSD_3_5:1.12.0.2
	OPENBSD_3_5_BASE:1.12
	OPENBSD_3_4:1.11.0.6
	OPENBSD_3_4_BASE:1.11
	OPENBSD_3_3:1.11.0.4
	OPENBSD_3_3_BASE:1.11
	OPENBSD_3_2:1.11.0.2
	OPENBSD_3_2_BASE:1.11
	OPENBSD_3_1:1.10.0.20
	OPENBSD_3_1_BASE:1.10
	OPENBSD_3_0:1.10.0.18
	OPENBSD_3_0_BASE:1.10
	OPENBSD_2_9:1.10.0.16
	OPENBSD_2_9_BASE:1.10
	OPENBSD_2_8:1.10.0.14
	OPENBSD_2_8_BASE:1.10
	OPENBSD_2_7:1.10.0.12
	OPENBSD_2_7_BASE:1.10
	OPENBSD_2_6:1.10.0.10
	OPENBSD_2_6_BASE:1.10
	OPENBSD_2_5:1.10.0.8
	OPENBSD_2_5_BASE:1.10
	OPENBSD_2_4:1.10.0.6
	OPENBSD_2_4_BASE:1.10
	OPENBSD_2_3:1.10.0.4
	OPENBSD_2_3_BASE:1.10
	OPENBSD_2_2:1.10.0.2
	OPENBSD_2_2_BASE:1.10
	OPENBSD_2_1:1.5.0.2
	OPENBSD_2_1_BASE:1.5
	OPENBSD_2_0:1.3.0.2
	OPENBSD_2_0_BASE:1.3
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.24
date	2015.01.12.17.10.38;	author deraadt;	state Exp;
branches;
next	1.23;
commitid	YnC5MZEzOuyYFUOV;

1.23
date	2014.03.07.22.50.31;	author tedu;	state Exp;
branches;
next	1.22;

1.22
date	2014.03.05.14.47.34;	author deraadt;	state Exp;
branches;
next	1.21;

1.21
date	2014.03.03.01.37.36;	author deraadt;	state Exp;
branches;
next	1.20;

1.20
date	2011.07.22.09.30.54;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2011.04.15.03.11.38;	author deraadt;	state Exp;
branches;
next	1.18;

1.18
date	2009.04.21.09.12.26;	author deraadt;	state Exp;
branches;
next	1.17;

1.17
date	2009.04.17.03.58.53;	author deraadt;	state Exp;
branches;
next	1.16;

1.16
date	2006.07.27.02.53.38;	author deraadt;	state Exp;
branches;
next	1.15;

1.15
date	2005.02.07.06.08.10;	author david;	state Exp;
branches;
next	1.14;

1.14
date	2004.08.26.03.34.16;	author deraadt;	state Exp;
branches;
next	1.13;

1.13
date	2004.06.13.22.05.14;	author deraadt;	state Exp;
branches;
next	1.12;

1.12
date	2004.03.19.18.12.02;	author deraadt;	state Exp;
branches;
next	1.11;

1.11
date	2002.05.13.07.22.42;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	97.09.26.19.51.28;	author deraadt;	state Exp;
branches;
next	1.9;

1.9
date	97.09.25.02.01.53;	author deraadt;	state Exp;
branches;
next	1.8;

1.8
date	97.09.25.02.00.51;	author weingart;	state Exp;
branches;
next	1.7;

1.7
date	97.09.21.11.50.25;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	97.09.18.17.17.36;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	97.04.20.12.42.26;	author niklas;	state Exp;
branches;
next	1.4;

1.4
date	97.04.16.22.27.19;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	96.06.11.10.20.33;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	95.11.18.15.44.24;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.38.00;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.38.00;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.24
log
@Due to recent savings with instbin, we can take i386 to one install
floppy. A few drivers are missing, but the world has moved on (the drivers
included are always a work in progress)
Speeds up make release substantially, of course.
@
text
@#	$OpenBSD: Makefile.inc,v 1.23 2014/03/07 22:50:31 tedu Exp $

KERNELS += GENERIC.MP bsd.mp

bootblocks:
	cp ${DESTDIR}/usr/mdec/pxeboot ${RELEASEDIR}
	cp ${DESTDIR}/usr/mdec/cdboot ${RELEASEDIR}
	cp ${DESTDIR}/usr/mdec/cdbr ${RELEASEDIR}

MDEXT=	bsd.rd cd${OSrev}.iso floppy${OSrev}.fs miniroot${OSrev}.fs \
	pxeboot cdboot cdbr
@


1.23
log
@too old, undermaintained
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.22 2014/03/05 14:47:34 deraadt Exp $
d10 1
a10 2
MDEXT=	bsd.rd cd${OSrev}.iso floppy${OSrev}.fs floppyB${OSrev}.fs \
	floppyC${OSrev}.fs miniroot${OSrev}.fs \
@


1.22
log
@some files were not being hashes, because they were missing from MDEXT
noticed by jsg, and important enough to make release
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.21 2014/03/03 01:37:36 deraadt Exp $
a4 2
kernels: linux-notes

a9 3
linux-notes:
	cp ${.CURDIR}/etc.i386/INSTALL.* ${RELEASEDIR}

d12 1
a12 1
	pxeboot cdboot cdbr INSTALL.linux
@


1.21
log
@cdemu is no more
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.20 2011/07/22 09:30:54 espie Exp $
d16 2
a17 1
	floppyC${OSrev}.fs pxeboot cdboot cdbr INSTALL.linux
@


1.20
log
@unify kernel building on various platforms.
feedback from miod@@ and deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.19 2011/04/15 03:11:38 deraadt Exp $
d15 2
a16 3
MDEXT=	bsd.rd cd${OSrev}.iso cdemu${OSrev}.iso \
	floppy${OSrev}.fs floppyB${OSrev}.fs floppyC${OSrev}.fs \
	pxeboot cdboot cdbr INSTALL.linux
@


1.19
log
@No need to make depend kernels
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.18 2009/04/21 09:12:26 deraadt Exp $
d3 1
a3 5
kernels: bsd bsd.mp bootblocks linux-notes
	cp ${.CURDIR}/../sys/arch/i386/compile/GENERIC/bsd \
	    ${RELEASEDIR}/bsd
	cp ${.CURDIR}/../sys/arch/i386/compile/GENERIC.MP/bsd \
	    ${RELEASEDIR}/bsd.mp
d5 1
a5 9
bsd:
	cd ${.CURDIR}/../sys/arch/i386/conf && config GENERIC
	cd ${.CURDIR}/../sys/arch/i386/compile/GENERIC && \
	    ${MAKE} clean && exec ${MAKE}

bsd.mp:
	cd ${.CURDIR}/../sys/arch/i386/conf && config GENERIC.MP
	cd ${.CURDIR}/../sys/arch/i386/compile/GENERIC.MP && \
	    ${MAKE} clean && exec ${MAKE}
d15 1
a15 1
MDEXT=	bsd bsd.mp bsd.rd cd${OSrev}.iso cdemu${OSrev}.iso \
a17 2

.PHONY: bsd bsd.mp bootblocks
@


1.18
log
@move bsd and bsd.rd and all such other MD "sets" into the MD files,
since we perhaps cannot assume that is what kernels will be in the
pathetically stupid world that SGI created
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.17 2009/04/17 03:58:53 deraadt Exp $
d12 1
a12 1
	    ${MAKE} clean && ${MAKE} depend && exec ${MAKE}
d17 1
a17 1
	    ${MAKE} clean && ${MAKE} depend && exec ${MAKE}
@


1.17
log
@For SHA256 hashes to be ready to go onto the install media, we must
build the sets before we build the media.  While there we can get rid
of DESTDIR/snapshot too, and simply install straight into RELEASEDIR.
(This also ends up saving an astounding amount of traffic/latency in a nfs
environment)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.16 2006/07/27 02:53:38 deraadt Exp $
d27 1
a27 1
MDEXT=	bsd.mp cd${OSrev}.iso cdemu${OSrev}.iso \
@


1.16
log
@rearrange to be more like the others
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.15 2005/02/07 06:08:10 david Exp $
d3 1
a3 2
.ifdef DESTDIR
snap_md: bsd bsd.mp bootblocks notes distrib
d5 1
a5 1
	    ${DESTDIR}/snapshot/bsd
d7 1
a7 1
	    ${DESTDIR}/snapshot/bsd.mp
d20 10
a29 3
	cp ${DESTDIR}/usr/mdec/pxeboot ${DESTDIR}/snapshot
	cp ${DESTDIR}/usr/mdec/cdboot ${DESTDIR}/snapshot
	cp ${DESTDIR}/usr/mdec/cdbr ${DESTDIR}/snapshot
d31 1
a31 6
notes:
	cp ${.CURDIR}/etc.i386/INSTALL.* ${DESTDIR}/snapshot

.PHONY: bsd bsd.mp bootblocks notes

.endif	# DESTDIR check
@


1.15
log
@indentation whitespace nits
@
text
@d1 1
a1 2
#	$OpenBSD: Makefile.inc,v 1.14 2004/08/26 03:34:16 deraadt Exp $
#	etc.i386/Makefile.inc -- i386-specific etc Makefile targets
d4 1
a4 1
snap_md: bsd bsd.mp notes bootblocks distrib
a19 3
notes:
	cp ${.CURDIR}/etc.i386/INSTALL.* ${DESTDIR}/snapshot

d25 4
a28 1
.PHONY: bsd notes bootblocks
@


1.14
log
@install cdbr and cdboot for those that have it, too
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.13 2004/06/13 22:05:14 deraadt Exp $
d5 1
a5 1
snap_md: bsd bsd.mp notes bootblocks distrib 
@


1.13
log
@build bsd.md, and put it into the snaps
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.12 2004/03/19 18:12:02 deraadt Exp $
d26 2
@


1.12
log
@put pxeboot into DESTDIR/snapshot too
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.11 2002/05/13 07:22:42 espie Exp $
d5 1
a5 1
snap_md: bsd notes bootblocks distrib
d8 2
d14 5
@


1.11
log
@move common distrib rules to main Makefile,
make -> ${MAKE}
add phony targets
remove unnecessary subshells
install kernel in a separate target from building.
some SUDO.

okay deraadt@@

(checked bootstrap on i386, should be safe elsewhere, and trivial to fix
anyways)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.10 1997/09/26 19:51:28 deraadt Exp $
d5 1
a5 1
snap_md: bsd notes distrib
d17 4
a20 1
.PHONY: bsd notes
@


1.10
log
@get INSTALL.* from correct place
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.9 1997/09/25 02:01:53 deraadt Exp $
d6 2
d12 1
a12 3
	    make clean && make depend && make
	cp ${.CURDIR}/../sys/arch/i386/compile/GENERIC/bsd \
	    ${DESTDIR}/snapshot/bsd
d17 1
a17 3
distrib:
	cd ${.CURDIR}/../distrib && make cleandir && \
	    make && make install
@


1.9
log
@nope
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.8 1997/09/25 02:00:51 weingart Exp $
d15 1
a15 1
	cp ${.CURDIR}/INSTALL.* ${DESTDIR}/snapshot
@


1.8
log
@Sorry 'bout the previous commit, I'm much too tired to be
mucking with the tree.  Basically some extra information
that I found very helpfull in understanding the CHS
translation issues present with the PC BIOS stuff.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.7 1997/09/21 11:50:25 deraadt Exp $
d15 1
a15 1
	cp ${.CURDIR}/INSTALL.* ${DESTDIR}
@


1.7
log
@$OpenBSD
@
text
@d1 1
a1 1
#	$OpenBSD$
d5 1
a5 1
snap_md: bsd distrib
d13 3
@


1.6
log
@for architectures which go into src/distrib automatically, start at the
top level there...
@
text
@d1 1
a1 1
#
a2 2
#
#	$Id: Makefile.inc,v 1.5 1997/04/20 12:42:26 niklas Exp $
@


1.5
log
@typo
@
text
@d4 1
a4 1
#	$Id: Makefile.inc,v 1.4 1997/04/16 22:27:19 deraadt Exp $
d7 1
a7 1
snap_md: bsd floppy
d16 3
a18 4
floppy:
	cd ${.CURDIR}/../distrib/i386/floppies/ramdisk && \
	    make cleandir && make && make install

@


1.4
log
@make install floppy for snapshot
@
text
@d4 1
a4 1
#	$Id: Makefile.inc,v 1.3 1996/06/11 10:20:33 deraadt Exp $
d7 1
a7 1
snap_md: bsd floppy.fs
@


1.3
log
@only need one GENERIC kernel
@
text
@d4 1
a4 1
#	$Id: Makefile.inc,v 1.2 1995/11/18 15:44:24 deraadt Exp $
d7 1
a7 2
snap_md: bsd
#snap_md: kc.fs		# too big?
d16 4
a19 6
kc.fs:
	make -f ${.CURDIR}/etc.i386/Makefile.kc \
	    IMAGE=${DESTDIR}/snapshot/kc.fs \
	    KERNEL=${DESTDIR}/snapshot/bsd || \
	make -f ${.CURDIR}/etc.i386/Makefile.kc \
	    IMAGE=${DESTDIR}/snapshot/kc.fs unconfig
@


1.2
log
@snapshot kernels have changed..
@
text
@d4 1
a4 1
#	$Id: Makefile.inc,v 1.1.1.1 1995/10/18 08:38:00 deraadt Exp $
d7 2
a8 2
snap_md: bsd.adp bsd.other
#snap_md: kcadp.fs kcother.fs
d10 3
a12 3
bsd.adp:
	cd ${.CURDIR}/../sys/arch/i386/conf && config GENERICADP
	cd ${.CURDIR}/../sys/arch/i386/compile/GENERICADP && \
d14 2
a15 2
	cp ${.CURDIR}/../sys/arch/i386/compile/GENERICADP/bsd \
	    ${DESTDIR}/snapshot/bsd.adp
d17 1
a17 15
bsd.other:
	cd ${.CURDIR}/../sys/arch/i386/conf && config GENERICOTHER
	cd ${.CURDIR}/../sys/arch/i386/compile/GENERICOTHER && \
	    make clean && make depend && make
	cp ${.CURDIR}/../sys/arch/i386/compile/GENERICOTHER/bsd \
	    ${DESTDIR}/snapshot/bsd.other

kcadp.fs:
	make -f ${.CURDIR}/etc.i386/Makefile.kc \
	    IMAGE=${DESTDIR}/snapshot/kcadp.fs \
	    KERNEL=${DESTDIR}/snapshot/bsd.adp || \
	make -f ${.CURDIR}/etc.i386/Makefile.kc \
	    IMAGE=${DESTDIR}/snapshot/kcadp.fs unconfig

kcother.fs:
d19 2
a20 2
	    IMAGE=${DESTDIR}/snapshot/kcother.fs \
	    KERNEL=${DESTDIR}/snapshot/bsd.other || \
d22 1
a22 1
	    IMAGE=${DESTDIR}/snapshot/kcother.fs unconfig
@


1.1
log
@Initial revision
@
text
@d4 1
a4 1
#	$Id: Makefile.inc,v 1.5 1994/05/01 07:50:20 cgd Exp $
d7 2
a8 2
snap_md: netbsd-aha netbsd-bt
#snap_md: kc_aha.fs kc_bt.fs
d10 3
a12 3
netbsd-aha:
	cd ${.CURDIR}/../sys/arch/i386/conf && config GENERICAHA
	cd ${.CURDIR}/../sys/arch/i386/compile/GENERICAHA && \
d14 2
a15 2
	cp ${.CURDIR}/../sys/arch/i386/compile/GENERICAHA/netbsd \
	    ${DESTDIR}/snapshot/netbsd-aha
d17 3
a19 3
netbsd-bt:
	cd ${.CURDIR}/../sys/arch/i386/conf && config GENERICBT
	cd ${.CURDIR}/../sys/arch/i386/compile/GENERICBT && \
d21 2
a22 2
	cp ${.CURDIR}/../sys/arch/i386/compile/GENERICBT/netbsd \
	    ${DESTDIR}/snapshot/netbsd-bt
d24 1
a24 1
kc_aha.fs:
d26 2
a27 2
	    IMAGE=${DESTDIR}/snapshot/kc_aha.fs \
	    KERNEL=${DESTDIR}/snapshot/netbsd-aha || \
d29 1
a29 1
	    IMAGE=${DESTDIR}/snapshot/kc_aha.fs unconfig
d31 1
a31 1
kc_bt.fs:
d33 2
a34 2
	    IMAGE=${DESTDIR}/snapshot/kc_bt.fs \
	    KERNEL=${DESTDIR}/snapshot/netbsd-bt || \
d36 1
a36 1
	    IMAGE=${DESTDIR}/snapshot/kc_bt.fs unconfig
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
