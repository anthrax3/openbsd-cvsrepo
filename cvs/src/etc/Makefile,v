head	1.453;
access;
symbols
	OPENBSD_6_1:1.453.0.2
	OPENBSD_6_1_BASE:1.453
	OPENBSD_6_0:1.425.0.4
	OPENBSD_6_0_BASE:1.425
	OPENBSD_5_9:1.420.0.2
	OPENBSD_5_9_BASE:1.420
	OPENBSD_5_8:1.406.0.4
	OPENBSD_5_8_BASE:1.406
	OPENBSD_5_7:1.400.0.2
	OPENBSD_5_7_BASE:1.400
	OPENBSD_5_6:1.388.0.4
	OPENBSD_5_6_BASE:1.388
	OPENBSD_5_5:1.345.0.4
	OPENBSD_5_5_BASE:1.345
	OPENBSD_5_4:1.333.0.2
	OPENBSD_5_4_BASE:1.333
	OPENBSD_5_3:1.328.0.2
	OPENBSD_5_3_BASE:1.328
	OPENBSD_5_2:1.319.0.2
	OPENBSD_5_2_BASE:1.319
	OPENBSD_5_1_BASE:1.313
	OPENBSD_5_1:1.313.0.2
	OPENBSD_5_0:1.309.0.2
	OPENBSD_5_0_BASE:1.309
	OPENBSD_4_9:1.294.0.2
	OPENBSD_4_9_BASE:1.294
	OPENBSD_4_8:1.290.0.2
	OPENBSD_4_8_BASE:1.290
	OPENBSD_4_7:1.286.0.2
	OPENBSD_4_7_BASE:1.286
	OPENBSD_4_6:1.278.0.4
	OPENBSD_4_6_BASE:1.278
	OPENBSD_4_5:1.268.0.4
	OPENBSD_4_5_BASE:1.268
	OPENBSD_4_4:1.268.0.2
	OPENBSD_4_4_BASE:1.268
	OPENBSD_4_3:1.260.0.2
	OPENBSD_4_3_BASE:1.260
	OPENBSD_4_2:1.253.0.2
	OPENBSD_4_2_BASE:1.253
	OPENBSD_4_1:1.250.0.2
	OPENBSD_4_1_BASE:1.250
	OPENBSD_4_0:1.239.0.2
	OPENBSD_4_0_BASE:1.239
	OPENBSD_3_9:1.232.0.2
	OPENBSD_3_9_BASE:1.232
	OPENBSD_3_8:1.227.0.2
	OPENBSD_3_8_BASE:1.227
	OPENBSD_3_7:1.219.0.2
	OPENBSD_3_7_BASE:1.219
	OPENBSD_3_6:1.211.0.2
	OPENBSD_3_6_BASE:1.211
	OPENBSD_3_5:1.201.0.2
	OPENBSD_3_5_BASE:1.201
	OPENBSD_3_4:1.184.0.2
	OPENBSD_3_4_BASE:1.184
	OPENBSD_3_3:1.181.0.2
	OPENBSD_3_3_BASE:1.181
	OPENBSD_3_2:1.171.0.2
	OPENBSD_3_2_BASE:1.171
	OPENBSD_3_1:1.155.0.2
	OPENBSD_3_1_BASE:1.155
	OPENBSD_3_0:1.132.0.2
	OPENBSD_3_0_BASE:1.132
	OPENBSD_2_9:1.119.0.2
	OPENBSD_2_9_BASE:1.119
	OPENBSD_2_8:1.116.0.2
	OPENBSD_2_8_BASE:1.116
	OPENBSD_2_7:1.111.0.2
	OPENBSD_2_7_BASE:1.111
	OPENBSD_2_6:1.103.0.2
	OPENBSD_2_6_BASE:1.103
	OPENBSD_2_5:1.96.0.2
	OPENBSD_2_5_BASE:1.96
	OPENBSD_2_4:1.92.0.2
	OPENBSD_2_4_BASE:1.92
	OPENBSD_2_3:1.85.0.2
	OPENBSD_2_3_BASE:1.85
	OPENBSD_2_2:1.77.0.2
	OPENBSD_2_2_BASE:1.77
	OPENBSD_2_1:1.60.0.2
	OPENBSD_2_1_BASE:1.60
	OPENBSD_2_0:1.27.0.2
	OPENBSD_2_0_BASE:1.27
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.453
date	2017.03.17.17.57.40;	author rzalamena;	state Exp;
branches;
next	1.452;
commitid	WPwzVehr6B5opXNq;

1.452
date	2017.02.27.21.53.11;	author rpe;	state Exp;
branches;
next	1.451;
commitid	7XQfqtkSXX43wr6R;

1.451
date	2017.02.26.16.51.18;	author matthieu;	state Exp;
branches;
next	1.450;
commitid	P2dlZXDE2JznJMG3;

1.450
date	2017.02.12.08.56.17;	author landry;	state Exp;
branches;
next	1.449;
commitid	34hXICl5XnpmhEqk;

1.449
date	2017.02.02.21.35.05;	author rpe;	state Exp;
branches;
next	1.448;
commitid	A6XKXlB4RwAoSmUc;

1.448
date	2017.01.25.03.24.52;	author patrick;	state Exp;
branches;
next	1.447;
commitid	r0AlEHTsQxwmamYd;

1.447
date	2017.01.23.23.54.01;	author tb;	state Exp;
branches;
next	1.446;
commitid	of1obpnNTcp92T96;

1.446
date	2016.11.20.11.00.19;	author tb;	state Exp;
branches;
next	1.445;
commitid	ZGfCotfRGHjInYrv;

1.445
date	2016.11.19.14.20.58;	author tb;	state Exp;
branches;
next	1.444;
commitid	cJjw851oyvO56iNN;

1.444
date	2016.11.05.09.14.37;	author rpe;	state Exp;
branches;
next	1.443;
commitid	hAyarSHmswnwilJu;

1.443
date	2016.10.14.18.45.12;	author deraadt;	state Exp;
branches;
next	1.442;
commitid	JU3WzGSYE5sdAAxf;

1.442
date	2016.10.09.20.55.16;	author natano;	state Exp;
branches;
next	1.441;
commitid	5dxHSomFS2bTHKTM;

1.441
date	2016.10.09.14.23.10;	author natano;	state Exp;
branches;
next	1.440;
commitid	P70wIrHuEPiiFUJB;

1.440
date	2016.10.06.20.20.41;	author reyk;	state Exp;
branches;
next	1.439;
commitid	S3DUkDNXB4zfM0xB;

1.439
date	2016.10.06.18.56.17;	author natano;	state Exp;
branches;
next	1.438;
commitid	ItpgpvOL7BC3XEZJ;

1.438
date	2016.10.06.15.37.42;	author natano;	state Exp;
branches;
next	1.437;
commitid	fsgSdqDRcCNgJEI5;

1.437
date	2016.10.05.21.39.57;	author deraadt;	state Exp;
branches;
next	1.436;
commitid	3Vj4MIDKsYzwuL49;

1.436
date	2016.10.05.18.00.41;	author natano;	state Exp;
branches;
next	1.435;
commitid	6NqQgOcrjHcdPwol;

1.435
date	2016.10.04.16.54.31;	author deraadt;	state Exp;
branches;
next	1.434;
commitid	7alnoUOYVuBq9PaO;

1.434
date	2016.09.18.21.47.19;	author deraadt;	state Exp;
branches;
next	1.433;
commitid	VLTSVaJL3zyrxGsb;

1.433
date	2016.09.18.20.18.25;	author benno;	state Exp;
branches;
next	1.432;
commitid	aNA1IkqJB7MlJKGl;

1.432
date	2016.09.11.19.44.32;	author natano;	state Exp;
branches;
next	1.431;
commitid	AdaC9jAKbRHou4Eq;

1.431
date	2016.09.11.06.51.17;	author natano;	state Exp;
branches;
next	1.430;
commitid	hMBnLWgFKPAjBlsJ;

1.430
date	2016.09.03.13.37.40;	author guenther;	state Exp;
branches;
next	1.429;
commitid	6T3r4QcMFKe3Fo5T;

1.429
date	2016.09.03.11.58.32;	author pirofti;	state Exp;
branches;
next	1.428;
commitid	NdWRvZTcjX2TCLQW;

1.428
date	2016.09.01.09.54.17;	author deraadt;	state Exp;
branches;
next	1.427;
commitid	UDb5g1CK90e9N52n;

1.427
date	2016.08.10.14.27.15;	author deraadt;	state Exp;
branches;
next	1.426;
commitid	nJ2GKPOeS3xtih2N;

1.426
date	2016.08.09.21.24.31;	author halex;	state Exp;
branches;
next	1.425;
commitid	WY6YtdDRYUausnWh;

1.425
date	2016.05.26.16.29.51;	author deraadt;	state Exp;
branches;
next	1.424;
commitid	Mb7C6XnYoQIeDqBg;

1.424
date	2016.05.14.14.44.35;	author ajacoutot;	state Exp;
branches;
next	1.423;
commitid	PoOLTNRkFJ5FLSGp;

1.423
date	2016.05.11.21.52.48;	author deraadt;	state Exp;
branches;
next	1.422;
commitid	VpgRpYXqYSJy4P7J;

1.422
date	2016.04.25.20.38.10;	author tedu;	state Exp;
branches;
next	1.421;
commitid	uHJtGi0GRWT0rGuM;

1.421
date	2016.03.09.16.28.46;	author deraadt;	state Exp;
branches;
next	1.420;
commitid	OSDG2O3Cgeifnf1W;

1.420
date	2016.02.15.17.19.56;	author millert;	state Exp;
branches;
next	1.419;
commitid	Agvr9yXOUpR0ROff;

1.419
date	2016.01.27.20.52.41;	author sthen;	state Exp;
branches;
next	1.418;
commitid	aJo8bOt3TIN40Y3U;

1.418
date	2015.12.07.13.58.48;	author reyk;	state Exp;
branches;
next	1.417;
commitid	vbiT7yIXOvXDyYm3;

1.417
date	2015.12.05.09.55.18;	author jasper;	state Exp;
branches;
next	1.416;
commitid	BDIjpYbNGByke3hj;

1.416
date	2015.12.01.07.50.03;	author deraadt;	state Exp;
branches;
next	1.415;
commitid	Rh8AZFtVMVCiwPts;

1.415
date	2015.11.30.23.35.29;	author jturner;	state Exp;
branches;
next	1.414;
commitid	lItHIoG8eOUlqp9B;

1.414
date	2015.11.27.03.53.28;	author deraadt;	state Exp;
branches;
next	1.413;
commitid	UAVzkTcfrd4ODMgq;

1.413
date	2015.11.10.04.33.02;	author jsg;	state Exp;
branches;
next	1.412;
commitid	TtCBGRStb3tVxpHb;

1.412
date	2015.10.23.06.42.53;	author tedu;	state Exp;
branches;
next	1.411;
commitid	D5d4EMv83hjhijF3;

1.411
date	2015.10.19.19.08.44;	author schwarze;	state Exp;
branches;
next	1.410;
commitid	tw4epKZF2iii8zHQ;

1.410
date	2015.10.16.15.54.55;	author schwarze;	state Exp;
branches;
next	1.409;
commitid	8aJOUUDgPPrjTkJi;

1.409
date	2015.10.03.18.57.11;	author renato;	state Exp;
branches;
next	1.408;
commitid	0rggjTKo2BkzYtPe;

1.408
date	2015.09.12.14.48.06;	author sthen;	state Exp;
branches;
next	1.407;
commitid	WPPwrl8t4dQOWRuY;

1.407
date	2015.08.24.10.41.11;	author ajacoutot;	state Exp;
branches;
next	1.406;
commitid	FOxg7563yuuySklf;

1.406
date	2015.08.04.04.24.08;	author jsg;	state Exp;
branches;
next	1.405;
commitid	5sQ8X9WW5WU5uUVF;

1.405
date	2015.08.03.04.19.25;	author yasuoka;	state Exp;
branches;
next	1.404;
commitid	UMhaBLtmLfa9I0dg;

1.404
date	2015.07.03.22.05.53;	author millert;	state Exp;
branches;
next	1.403;
commitid	U5JeTzsYoFT86Kur;

1.403
date	2015.05.18.15.17.29;	author ajacoutot;	state Exp;
branches;
next	1.402;
commitid	6KUK1hdJ2N0Y19Xe;

1.402
date	2015.05.18.13.48.38;	author deraadt;	state Exp;
branches;
next	1.401;
commitid	cjVIf2Z4Y6BU1kqx;

1.401
date	2015.03.27.18.49.50;	author schwarze;	state Exp;
branches;
next	1.400;
commitid	Jn7qAr79wVWGg9WR;

1.400
date	2014.12.03.20.13.49;	author florian;	state Exp;
branches;
next	1.399;
commitid	tpsqJ5xr3Ojj3kiE;

1.399
date	2014.11.17.18.19.08;	author deraadt;	state Exp;
branches;
next	1.398;
commitid	1QNngz3xwKZzl4NA;

1.398
date	2014.10.03.19.22.38;	author deraadt;	state Exp;
branches;
next	1.397;
commitid	1sDMtqRs0HqMOm1h;

1.397
date	2014.10.01.10.11.03;	author mpi;	state Exp;
branches;
next	1.396;
commitid	sNHB1XdKaKLE96oD;

1.396
date	2014.09.22.00.03.48;	author rpe;	state Exp;
branches;
next	1.395;
commitid	sAvJ7oUYeTq9XXcy;

1.395
date	2014.09.15.22.28.58;	author matthieu;	state Exp;
branches;
next	1.394;
commitid	KGd36IP2Igl01unI;

1.394
date	2014.09.15.20.26.32;	author rpe;	state Exp;
branches;
next	1.393;
commitid	FX3UREQrZ7rohUhu;

1.393
date	2014.09.05.07.22.29;	author ajacoutot;	state Exp;
branches;
next	1.392;
commitid	ccN4Si6d1wRdxTWe;

1.392
date	2014.08.29.18.05.39;	author ajacoutot;	state Exp;
branches;
next	1.391;
commitid	TRUc9EUIgpeqjprR;

1.391
date	2014.08.26.20.19.26;	author rpe;	state Exp;
branches;
next	1.390;
commitid	2uCZGoLImpFRV5IL;

1.390
date	2014.08.26.19.33.48;	author robert;	state Exp;
branches;
next	1.389;
commitid	d4aMPQgs0Avz1qdr;

1.389
date	2014.08.22.19.19.25;	author deraadt;	state Exp;
branches;
next	1.388;
commitid	DjPuiMfLSQV3ARle;

1.388
date	2014.07.23.11.49.06;	author reyk;	state Exp;
branches;
next	1.387;
commitid	v8gTFnakQFrdLPvM;

1.387
date	2014.07.23.08.01.15;	author ajacoutot;	state Exp;
branches;
next	1.386;
commitid	8Gr2d1z4BeTr23EH;

1.386
date	2014.07.22.17.37.15;	author reyk;	state Exp;
branches;
next	1.385;
commitid	blKdCTJTR88a8iuc;

1.385
date	2014.07.22.17.05.45;	author deraadt;	state Exp;
branches;
next	1.384;
commitid	ZOYMktKgO7yyemqD;

1.384
date	2014.07.16.19.08.54;	author deraadt;	state Exp;
branches;
next	1.383;
commitid	wrMc8YLRogKsxUXD;

1.383
date	2014.07.16.15.18.35;	author okan;	state Exp;
branches;
next	1.382;
commitid	bLbaSlIn488d9MSX;

1.382
date	2014.07.16.14.34.33;	author okan;	state Exp;
branches;
next	1.381;
commitid	noDhQWrMJahDrm2M;

1.381
date	2014.07.16.13.21.33;	author deraadt;	state Exp;
branches;
next	1.380;
commitid	z5oU1969eumtWeeu;

1.380
date	2014.07.16.12.50.42;	author deraadt;	state Exp;
branches;
next	1.379;
commitid	nZVsTUPXj36IbtMe;

1.379
date	2014.07.16.12.46.16;	author deraadt;	state Exp;
branches;
next	1.378;
commitid	WvOkorMRHwuBW3Rv;

1.378
date	2014.07.16.12.25.52;	author deraadt;	state Exp;
branches;
next	1.377;
commitid	rxkpMoeIvkE8myST;

1.377
date	2014.07.16.10.25.38;	author deraadt;	state Exp;
branches;
next	1.376;
commitid	TR0obO4jNpQsihYA;

1.376
date	2014.07.15.10.09.36;	author deraadt;	state Exp;
branches;
next	1.375;
commitid	mI7yrrgpTrbeedMo;

1.375
date	2014.07.15.09.27.04;	author ajacoutot;	state Exp;
branches;
next	1.374;
commitid	y5g5q0ndqFZgnXb1;

1.374
date	2014.07.15.09.11.18;	author deraadt;	state Exp;
branches;
next	1.373;
commitid	DEApgqmxnkOKm9jk;

1.373
date	2014.07.15.08.28.43;	author deraadt;	state Exp;
branches;
next	1.372;
commitid	MuSa7uEqe7ky7CuP;

1.372
date	2014.07.14.09.11.27;	author ajacoutot;	state Exp;
branches;
next	1.371;
commitid	pNG3e0wlPUEvL9xH;

1.371
date	2014.07.14.09.04.02;	author deraadt;	state Exp;
branches;
next	1.370;
commitid	YUSo98CdDPeK0I4d;

1.370
date	2014.07.13.13.53.36;	author rpe;	state Exp;
branches;
next	1.369;
commitid	emU4wiE9pJnmRk71;

1.369
date	2014.07.13.13.01.48;	author ajacoutot;	state Exp;
branches;
next	1.368;
commitid	xTGAIrY5HHIQKVsf;

1.368
date	2014.07.13.12.14.37;	author ajacoutot;	state Exp;
branches;
next	1.367;
commitid	OTq3ec9vwihjX8LQ;

1.367
date	2014.07.13.12.07.40;	author claudio;	state Exp;
branches;
next	1.366;
commitid	jMpW63iupyMGwSjN;

1.366
date	2014.07.12.22.05.16;	author ajacoutot;	state Exp;
branches;
next	1.365;
commitid	KQrG3W7AqFnFS0pm;

1.365
date	2014.07.12.22.03.44;	author ajacoutot;	state Exp;
branches;
next	1.364;
commitid	TwF7zGIkMEWJCh3v;

1.364
date	2014.07.12.16.00.27;	author ajacoutot;	state Exp;
branches;
next	1.363;
commitid	BIoF8qVLPRjJRYwk;

1.363
date	2014.07.12.15.38.42;	author ajacoutot;	state Exp;
branches;
next	1.362;
commitid	EM0JL17Nwz4csBsZ;

1.362
date	2014.07.12.03.52.39;	author deraadt;	state Exp;
branches;
next	1.361;
commitid	iVHNAmbTZBklwqEX;

1.361
date	2014.07.11.21.30.21;	author deraadt;	state Exp;
branches;
next	1.360;
commitid	ImBofqYLqgUPCChy;

1.360
date	2014.07.11.21.20.10;	author deraadt;	state Exp;
branches;
next	1.359;
commitid	Vm2B1hCfxkTm4s9s;

1.359
date	2014.07.11.17.10.30;	author henning;	state Exp;
branches;
next	1.358;
commitid	Ss8oCxVxOZaeRa5k;

1.358
date	2014.07.11.16.59.03;	author deraadt;	state Exp;
branches;
next	1.357;
commitid	2DByp33KRDBIzQYk;

1.357
date	2014.04.29.21.30.20;	author dcoppa;	state Exp;
branches;
next	1.356;

1.356
date	2014.04.24.15.05.10;	author tedu;	state Exp;
branches;
next	1.355;

1.355
date	2014.04.23.09.56.56;	author ajacoutot;	state Exp;
branches;
next	1.354;

1.354
date	2014.04.22.10.24.29;	author reyk;	state Exp;
branches;
next	1.353;

1.353
date	2014.04.20.18.06.37;	author tedu;	state Exp;
branches;
next	1.352;

1.352
date	2014.04.11.22.51.51;	author miod;	state Exp;
branches;
next	1.351;

1.351
date	2014.03.26.20.17.00;	author tedu;	state Exp;
branches;
next	1.350;

1.350
date	2014.03.24.20.40.03;	author sthen;	state Exp;
branches;
next	1.349;

1.349
date	2014.03.18.22.36.29;	author miod;	state Exp;
branches;
next	1.348;

1.348
date	2014.03.17.17.07.45;	author deraadt;	state Exp;
branches;
next	1.347;

1.347
date	2014.03.15.22.13.36;	author sthen;	state Exp;
branches;
next	1.346;

1.346
date	2014.03.13.10.11.01;	author florian;	state Exp;
branches;
next	1.345;

1.345
date	2014.01.25.20.23.53;	author deraadt;	state Exp;
branches;
next	1.344;

1.344
date	2014.01.24.03.36.07;	author deraadt;	state Exp;
branches;
next	1.343;

1.343
date	2014.01.10.14.06.18;	author deraadt;	state Exp;
branches;
next	1.342;

1.342
date	2014.01.10.03.53.44;	author deraadt;	state Exp;
branches;
next	1.341;

1.341
date	2014.01.09.20.15.55;	author deraadt;	state Exp;
branches;
next	1.340;

1.340
date	2014.01.09.18.51.30;	author deraadt;	state Exp;
branches;
next	1.339;

1.339
date	2013.12.15.17.40.45;	author tedu;	state Exp;
branches;
next	1.338;

1.338
date	2013.11.26.20.11.51;	author sthen;	state Exp;
branches;
next	1.337;

1.337
date	2013.11.03.18.28.34;	author deraadt;	state Exp;
branches;
next	1.336;

1.336
date	2013.10.10.00.59.18;	author dtucker;	state Exp;
branches;
next	1.335;

1.335
date	2013.09.04.16.53.38;	author patrick;	state Exp;
branches;
next	1.334;

1.334
date	2013.08.09.16.24.54;	author ajacoutot;	state Exp;
branches;
next	1.333;

1.333
date	2013.07.10.05.12.15;	author ajacoutot;	state Exp;
branches;
next	1.332;

1.332
date	2013.06.01.14.06.20;	author naddy;	state Exp;
branches;
next	1.331;

1.331
date	2013.03.31.21.46.53;	author espie;	state Exp;
branches;
next	1.330;

1.330
date	2013.03.26.18.06.00;	author jasper;	state Exp;
branches;
next	1.329;

1.329
date	2013.03.25.17.22.11;	author deraadt;	state Exp;
branches;
next	1.328;

1.328
date	2013.02.01.09.06.40;	author phessler;	state Exp;
branches;
next	1.327;

1.327
date	2013.01.11.05.18.50;	author miod;	state Exp;
branches;
next	1.326;

1.326
date	2012.11.04.17.12.36;	author kettenis;	state Exp;
branches;
next	1.325;

1.325
date	2012.10.05.00.16.35;	author dtucker;	state Exp;
branches;
next	1.324;

1.324
date	2012.09.20.12.51.43;	author yasuoka;	state Exp;
branches;
next	1.323;

1.323
date	2012.08.29.04.04.15;	author dtucker;	state Exp;
branches;
next	1.322;

1.322
date	2012.08.23.07.02.49;	author todd;	state Exp;
branches;
next	1.321;

1.321
date	2012.08.23.06.17.58;	author deraadt;	state Exp;
branches;
next	1.320;

1.320
date	2012.08.20.12.37.52;	author dlg;	state Exp;
branches;
next	1.319;

1.319
date	2012.06.20.18.33.58;	author matthew;	state Exp;
branches;
next	1.318;

1.318
date	2012.04.13.10.47.16;	author espie;	state Exp;
branches;
next	1.317;

1.317
date	2012.04.12.22.06.59;	author espie;	state Exp;
branches;
next	1.316;

1.316
date	2012.04.01.18.32.51;	author deraadt;	state Exp;
branches;
next	1.315;

1.315
date	2012.03.16.22.42.51;	author sthen;	state Exp;
branches;
next	1.314;

1.314
date	2012.02.19.11.34.36;	author robert;	state Exp;
branches;
next	1.313;

1.313
date	2012.02.09.04.39.32;	author david;	state Exp;
branches;
next	1.312;

1.312
date	2011.12.09.14.52.26;	author ratchov;	state Exp;
branches;
next	1.311;

1.311
date	2011.10.29.14.29.33;	author ajacoutot;	state Exp;
branches;
next	1.310;

1.310
date	2011.10.06.20.49.25;	author deraadt;	state Exp;
branches;
next	1.309;

1.309
date	2011.07.22.09.30.54;	author espie;	state Exp;
branches;
next	1.308;

1.308
date	2011.07.17.00.28.04;	author david;	state Exp;
branches;
next	1.307;

1.307
date	2011.07.08.20.21.01;	author ajacoutot;	state Exp;
branches;
next	1.306;

1.306
date	2011.07.08.02.15.34;	author robert;	state Exp;
branches;
next	1.305;

1.305
date	2011.07.08.00.54.04;	author ajacoutot;	state Exp;
branches;
next	1.304;

1.304
date	2011.07.08.00.50.09;	author robert;	state Exp;
branches;
next	1.303;

1.303
date	2011.07.07.23.29.45;	author robert;	state Exp;
branches;
next	1.302;

1.302
date	2011.07.07.22.30.37;	author robert;	state Exp;
branches;
next	1.301;

1.301
date	2011.07.07.22.23.56;	author robert;	state Exp;
branches;
next	1.300;

1.300
date	2011.07.07.21.00.59;	author deraadt;	state Exp;
branches;
next	1.299;

1.299
date	2011.07.07.02.22.11;	author ajacoutot;	state Exp;
branches;
next	1.298;

1.298
date	2011.07.07.01.52.57;	author robert;	state Exp;
branches;
next	1.297;

1.297
date	2011.07.06.18.55.36;	author robert;	state Exp;
branches;
next	1.296;

1.296
date	2011.07.06.18.32.58;	author miod;	state Exp;
branches;
next	1.295;

1.295
date	2011.04.17.21.26.38;	author schwarze;	state Exp;
branches;
next	1.294;

1.294
date	2010.10.26.20.56.03;	author robert;	state Exp;
branches;
next	1.293;

1.293
date	2010.10.18.14.54.47;	author deraadt;	state Exp;
branches;
next	1.292;

1.292
date	2010.10.08.23.35.42;	author david;	state Exp;
branches;
next	1.291;

1.291
date	2010.09.22.13.01.10;	author deraadt;	state Exp;
branches;
next	1.290;

1.290
date	2010.06.29.17.17.53;	author nicm;	state Exp;
branches;
next	1.289;

1.289
date	2010.06.07.10.09.05;	author reyk;	state Exp;
branches;
next	1.288;

1.288
date	2010.06.05.17.29.14;	author martinh;	state Exp;
branches;
next	1.287;

1.287
date	2010.03.23.21.31.02;	author espie;	state Exp;
branches;
next	1.286;

1.286
date	2010.02.22.15.15.54;	author claudio;	state Exp;
branches;
next	1.285;

1.285
date	2010.01.23.19.27.59;	author matthieu;	state Exp;
branches;
next	1.284;

1.284
date	2009.12.27.19.28.27;	author ajacoutot;	state Exp;
branches;
next	1.283;

1.283
date	2009.12.22.14.13.14;	author ajacoutot;	state Exp;
branches;
next	1.282;

1.282
date	2009.10.25.05.23.58;	author dtucker;	state Exp;
branches;
next	1.281;

1.281
date	2009.10.01.19.01.28;	author matthieu;	state Exp;
branches;
next	1.280;

1.280
date	2009.09.24.21.45.58;	author miod;	state Exp;
branches;
next	1.279;

1.279
date	2009.09.23.20.33.23;	author matthieu;	state Exp;
branches;
next	1.278;

1.278
date	2009.05.24.10.45.21;	author ajacoutot;	state Exp;
branches;
next	1.277;

1.277
date	2009.05.15.16.26.53;	author deraadt;	state Exp;
branches;
next	1.276;

1.276
date	2009.05.09.16.29.54;	author schwarze;	state Exp;
branches;
next	1.275;

1.275
date	2009.05.09.14.21.24;	author schwarze;	state Exp;
branches;
next	1.274;

1.274
date	2009.04.25.17.36.46;	author deraadt;	state Exp;
branches;
next	1.273;

1.273
date	2009.04.21.09.12.24;	author deraadt;	state Exp;
branches;
next	1.272;

1.272
date	2009.04.17.03.58.52;	author deraadt;	state Exp;
branches;
next	1.271;

1.271
date	2009.04.14.23.09.04;	author deraadt;	state Exp;
branches;
next	1.270;

1.270
date	2009.03.18.01.56.52;	author jacekm;	state Exp;
branches;
next	1.269;

1.269
date	2009.03.17.00.13.59;	author gilles;	state Exp;
branches;
next	1.268;

1.268
date	2008.06.15.01.52.19;	author todd;	state Exp;
branches;
next	1.267;

1.267
date	2008.06.14.23.13.01;	author deraadt;	state Exp;
branches;
next	1.266;

1.266
date	2008.06.14.23.09.05;	author todd;	state Exp;
branches;
next	1.265;

1.265
date	2008.06.08.03.03.37;	author jdixon;	state Exp;
branches;
next	1.264;

1.264
date	2008.05.25.14.17.51;	author sobrado;	state Exp;
branches;
next	1.263;

1.263
date	2008.05.13.21.29.36;	author miod;	state Exp;
branches;
next	1.262;

1.262
date	2008.05.13.20.44.54;	author miod;	state Exp;
branches;
next	1.261;

1.261
date	2008.03.19.12.22.09;	author sobrado;	state Exp;
branches;
next	1.260;

1.260
date	2008.02.09.12.10.53;	author mcbride;	state Exp;
branches;
next	1.259;

1.259
date	2008.01.31.14.18.03;	author reyk;	state Exp;
branches;
next	1.258;

1.258
date	2008.01.03.21.20.24;	author jakob;	state Exp;
branches;
next	1.257;

1.257
date	2007.12.16.21.34.56;	author jakob;	state Exp;
branches;
next	1.256;

1.256
date	2007.12.07.17.13.35;	author deraadt;	state Exp;
branches;
next	1.255;

1.255
date	2007.11.05.23.46.12;	author merdely;	state Exp;
branches;
next	1.254;

1.254
date	2007.10.08.12.16.35;	author norby;	state Exp;
branches;
next	1.253;

1.253
date	2007.08.01.21.23.25;	author miod;	state Exp;
branches;
next	1.252;

1.252
date	2007.05.04.07.31.43;	author deraadt;	state Exp;
branches;
next	1.251;

1.251
date	2007.05.04.03.49.17;	author deraadt;	state Exp;
branches;
next	1.250;

1.250
date	2007.02.27.02.25.13;	author deraadt;	state Exp;
branches;
next	1.249;

1.249
date	2007.02.27.02.22.01;	author beck;	state Exp;
branches;
next	1.248;

1.248
date	2007.02.22.16.55.32;	author henning;	state Exp;
branches;
next	1.247;

1.247
date	2007.02.16.16.56.22;	author tsi;	state Exp;
branches;
next	1.246;

1.246
date	2007.01.31.08.32.16;	author pyr;	state Exp;
branches;
next	1.245;

1.245
date	2006.12.14.18.49.44;	author kettenis;	state Exp;
branches;
next	1.244;

1.244
date	2006.12.12.16.37.32;	author reyk;	state Exp;
branches;
next	1.243;

1.243
date	2006.11.10.21.22.30;	author deraadt;	state Exp;
branches;
next	1.242;

1.242
date	2006.10.29.18.58.57;	author norby;	state Exp;
branches;
next	1.241;

1.241
date	2006.10.10.12.45.58;	author todd;	state Exp;
branches;
next	1.240;

1.240
date	2006.10.06.22.11.30;	author deraadt;	state Exp;
branches;
next	1.239;

1.239
date	2006.07.27.17.59.51;	author deraadt;	state Exp;
branches;
next	1.238;

1.238
date	2006.07.27.03.52.55;	author deraadt;	state Exp;
branches;
next	1.237;

1.237
date	2006.07.24.22.24.56;	author miod;	state Exp;
branches;
next	1.236;

1.236
date	2006.06.06.00.01.49;	author drahn;	state Exp;
branches;
next	1.235;

1.235
date	2006.06.03.19.33.35;	author deraadt;	state Exp;
branches;
next	1.234;

1.234
date	2006.06.01.16.43.23;	author norby;	state Exp;
branches;
next	1.233;

1.233
date	2006.05.09.21.17.13;	author miod;	state Exp;
branches;
next	1.232;

1.232
date	2006.01.04.20.38.59;	author miod;	state Exp;
branches;
next	1.231;

1.231
date	2005.12.28.04.55.35;	author david;	state Exp;
branches;
next	1.230;

1.230
date	2005.12.27.23.16.28;	author naddy;	state Exp;
branches;
next	1.229;

1.229
date	2005.11.21.16.13.44;	author beck;	state Exp;
branches;
next	1.228;

1.228
date	2005.11.17.21.28.05;	author jakob;	state Exp;
branches;
next	1.227;

1.227
date	2005.08.15.00.40.17;	author millert;	state Exp;
branches;
next	1.226;

1.226
date	2005.05.26.23.06.06;	author mcbride;	state Exp;
branches;
next	1.225;

1.225
date	2005.05.15.23.41.37;	author david;	state Exp;
branches;
next	1.224;

1.224
date	2005.05.02.06.47.32;	author david;	state Exp;
branches;
next	1.223;

1.223
date	2005.04.14.10.22.37;	author henning;	state Exp;
branches;
next	1.222;

1.222
date	2005.04.13.21.47.07;	author henning;	state Exp;
branches;
next	1.221;

1.221
date	2005.04.01.15.50.14;	author deraadt;	state Exp;
branches;
next	1.220;

1.220
date	2005.03.20.20.11.42;	author deraadt;	state Exp;
branches;
next	1.219;

1.219
date	2005.03.19.00.11.21;	author deraadt;	state Exp;
branches;
next	1.218;

1.218
date	2005.03.18.20.31.00;	author deraadt;	state Exp;
branches;
next	1.217;

1.217
date	2005.02.19.11.56.54;	author henning;	state Exp;
branches;
next	1.216;

1.216
date	2005.02.05.20.40.53;	author henning;	state Exp;
branches;
next	1.215;

1.215
date	2005.01.17.02.45.46;	author deraadt;	state Exp;
branches;
next	1.214;

1.214
date	2005.01.14.22.39.12;	author miod;	state Exp;
branches;
next	1.213;

1.213
date	2005.01.13.19.27.13;	author drahn;	state Exp;
branches;
next	1.212;

1.212
date	2004.12.31.00.18.20;	author miod;	state Exp;
branches;
next	1.211;

1.211
date	2004.08.26.03.34.15;	author deraadt;	state Exp;
branches;
next	1.210;

1.210
date	2004.08.16.17.39.21;	author deraadt;	state Exp;
branches;
next	1.209;

1.209
date	2004.08.06.21.59.11;	author pefo;	state Exp;
branches;
next	1.208;

1.208
date	2004.07.06.04.01.49;	author henning;	state Exp;
branches;
next	1.207;

1.207
date	2004.05.18.16.45.46;	author drahn;	state Exp;
branches;
next	1.206;

1.206
date	2004.05.04.23.37.04;	author deraadt;	state Exp;
branches;
next	1.205;

1.205
date	2004.05.04.19.35.25;	author deraadt;	state Exp;
branches;
next	1.204;

1.204
date	2004.05.03.15.18.19;	author drahn;	state Exp;
branches;
next	1.203;

1.203
date	2004.05.01.18.16.45;	author miod;	state Exp;
branches;
next	1.202;

1.202
date	2004.04.21.18.23.40;	author miod;	state Exp;
branches;
next	1.201;

1.201
date	2004.02.29.18.02.14;	author deraadt;	state Exp;
branches;
next	1.200;

1.200
date	2004.02.27.17.36.13;	author deraadt;	state Exp;
branches;
next	1.199;

1.199
date	2004.02.16.19.03.30;	author miod;	state Exp;
branches;
next	1.198;

1.198
date	2004.02.13.14.14.52;	author miod;	state Exp;
branches;
next	1.197;

1.197
date	2004.02.10.23.07.37;	author henning;	state Exp;
branches;
next	1.196;

1.196
date	2004.02.07.23.26.56;	author deraadt;	state Exp;
branches;
next	1.195;

1.195
date	2004.01.30.07.48.14;	author dtucker;	state Exp;
branches;
next	1.194;

1.194
date	2004.01.30.03.02.26;	author dtucker;	state Exp;
branches;
next	1.193;

1.193
date	2004.01.28.02.24.28;	author mickey;	state Exp;
branches;
next	1.192;

1.192
date	2004.01.12.23.58.00;	author todd;	state Exp;
branches;
next	1.191;

1.191
date	2004.01.12.23.32.24;	author todd;	state Exp;
branches;
next	1.190;

1.190
date	2004.01.12.22.31.34;	author todd;	state Exp;
branches;
next	1.189;

1.189
date	2004.01.11.22.00.23;	author deraadt;	state Exp;
branches;
next	1.188;

1.188
date	2003.12.24.20.37.03;	author henning;	state Exp;
branches;
next	1.187;

1.187
date	2003.10.31.04.04.05;	author drahn;	state Exp;
branches;
next	1.186;

1.186
date	2003.10.08.20.30.04;	author grange;	state Exp;
branches;
next	1.185;

1.185
date	2003.09.23.21.37.11;	author millert;	state Exp;
branches;
next	1.184;

1.184
date	2003.08.21.19.10.19;	author frantzen;	state Exp;
branches;
next	1.183;

1.183
date	2003.06.27.21.26.19;	author david;	state Exp;
branches;
next	1.182;

1.182
date	2003.03.30.07.43.02;	author deraadt;	state Exp;
branches;
next	1.181;

1.181
date	2003.03.24.18.15.27;	author drahn;	state Exp;
branches;
next	1.180;

1.180
date	2003.03.10.21.08.44;	author millert;	state Exp;
branches;
next	1.179;

1.179
date	2003.03.08.19.03.44;	author beck;	state Exp;
branches;
next	1.178;

1.178
date	2003.03.04.09.49.22;	author deraadt;	state Exp;
branches;
next	1.177;

1.177
date	2003.02.19.22.11.42;	author millert;	state Exp;
branches;
next	1.176;

1.176
date	2003.02.06.16.34.51;	author henning;	state Exp;
branches;
next	1.175;

1.175
date	2003.02.04.01.35.08;	author deraadt;	state Exp;
branches;
next	1.174;

1.174
date	2002.12.31.16.22.25;	author miod;	state Exp;
branches;
next	1.173;

1.173
date	2002.12.15.15.39.49;	author fgsch;	state Exp;
branches;
next	1.172;

1.172
date	2002.11.07.23.43.40;	author pvalchev;	state Exp;
branches;
next	1.171;

1.171
date	2002.09.06.21.30.22;	author deraadt;	state Exp;
branches;
next	1.170;

1.170
date	2002.08.31.07.28.32;	author miod;	state Exp;
branches;
next	1.169;

1.169
date	2002.07.18.20.57.50;	author provos;	state Exp;
branches;
next	1.168;

1.168
date	2002.07.18.20.37.47;	author provos;	state Exp;
branches;
next	1.167;

1.167
date	2002.06.17.00.09.44;	author deraadt;	state Exp;
branches;
next	1.166;

1.166
date	2002.06.01.05.22.08;	author deraadt;	state Exp;
branches;
next	1.165;

1.165
date	2002.05.23.22.44.48;	author deraadt;	state Exp;
branches;
next	1.164;

1.164
date	2002.05.22.00.10.34;	author deraadt;	state Exp;
branches;
next	1.163;

1.163
date	2002.05.21.01.41.04;	author deraadt;	state Exp;
branches;
next	1.162;

1.162
date	2002.05.16.15.00.48;	author millert;	state Exp;
branches;
next	1.161;

1.161
date	2002.05.14.18.05.38;	author millert;	state Exp;
branches;
next	1.160;

1.160
date	2002.05.13.07.22.42;	author espie;	state Exp;
branches;
next	1.159;

1.159
date	2002.05.12.13.51.38;	author espie;	state Exp;
branches;
next	1.158;

1.158
date	2002.05.11.18.41.19;	author millert;	state Exp;
branches;
next	1.157;

1.157
date	2002.04.28.14.56.38;	author miod;	state Exp;
branches;
next	1.156;

1.156
date	2002.04.17.22.54.20;	author miod;	state Exp;
branches;
next	1.155;

1.155
date	2002.04.03.20.56.36;	author deraadt;	state Exp;
branches;
next	1.154;

1.154
date	2002.04.03.19.20.10;	author deraadt;	state Exp;
branches;
next	1.153;

1.153
date	2002.03.31.17.30.52;	author deraadt;	state Exp;
branches;
next	1.152;

1.152
date	2002.03.07.00.11.40;	author millert;	state Exp;
branches;
next	1.151;

1.151
date	2002.02.26.19.08.05;	author deraadt;	state Exp;
branches;
next	1.150;

1.150
date	2002.02.16.01.20.42;	author deraadt;	state Exp;
branches;
next	1.149;

1.149
date	2002.02.14.19.40.54;	author deraadt;	state Exp;
branches;
next	1.148;

1.148
date	2002.02.14.13.24.45;	author todd;	state Exp;
branches;
next	1.147;

1.147
date	2002.02.14.04.37.15;	author todd;	state Exp;
branches;
next	1.146;

1.146
date	2002.02.13.20.23.01;	author todd;	state Exp;
branches;
next	1.145;

1.145
date	2002.02.13.20.04.57;	author todd;	state Exp;
branches;
next	1.144;

1.144
date	2002.02.09.14.13.37;	author deraadt;	state Exp;
branches;
next	1.143;

1.143
date	2002.02.08.20.13.36;	author todd;	state Exp;
branches;
next	1.142;

1.142
date	2002.01.23.08.21.22;	author todd;	state Exp;
branches;
next	1.141;

1.141
date	2002.01.22.02.28.37;	author itojun;	state Exp;
branches;
next	1.140;

1.140
date	2002.01.08.06.32.15;	author todd;	state Exp;
branches;
next	1.139;

1.139
date	2002.01.08.05.29.13;	author todd;	state Exp;
branches;
next	1.138;

1.138
date	2002.01.08.01.06.44;	author todd;	state Exp;
branches;
next	1.137;

1.137
date	2002.01.07.07.54.15;	author todd;	state Exp;
branches;
next	1.136;

1.136
date	2002.01.04.09.34.35;	author todd;	state Exp;
branches;
next	1.135;

1.135
date	2001.12.25.01.30.22;	author deraadt;	state Exp;
branches;
next	1.134;

1.134
date	2001.12.24.09.41.31;	author deraadt;	state Exp;
branches;
next	1.133;

1.133
date	2001.12.19.02.26.41;	author form;	state Exp;
branches;
next	1.132;

1.132
date	2001.09.21.22.13.51;	author deraadt;	state Exp;
branches;
next	1.131;

1.131
date	2001.09.20.22.17.41;	author hin;	state Exp;
branches;
next	1.130;

1.130
date	2001.09.01.16.15.19;	author drahn;	state Exp;
branches;
next	1.129;

1.129
date	2001.07.04.06.34.18;	author mickey;	state Exp;
branches;
next	1.128;

1.128
date	2001.06.26.18.00.18;	author brad;	state Exp;
branches;
next	1.127;

1.127
date	2001.06.26.16.52.39;	author kjell;	state Exp;
branches;
next	1.126;

1.126
date	2001.06.26.13.29.11;	author dhartmei;	state Exp;
branches;
next	1.125;

1.125
date	2001.06.25.03.32.50;	author hin;	state Exp;
branches;
next	1.124;

1.124
date	2001.06.22.22.07.54;	author provos;	state Exp;
branches;
next	1.123;

1.123
date	2001.06.18.21.09.22;	author millert;	state Exp;
branches;
next	1.122;

1.122
date	2001.05.30.02.11.04;	author deraadt;	state Exp;
branches;
next	1.121;

1.121
date	2001.05.14.14.39.39;	author hin;	state Exp;
branches;
next	1.120;

1.120
date	2001.05.04.16.00.05;	author millert;	state Exp;
branches;
next	1.119;

1.119
date	2001.04.01.19.40.16;	author deraadt;	state Exp;
branches;
next	1.118;

1.118
date	2001.02.10.18.03.16;	author mickey;	state Exp;
branches;
next	1.117;

1.117
date	2001.01.21.15.11.18;	author itojun;	state Exp;
branches;
next	1.116;

1.116
date	2000.10.10.15.34.31;	author provos;	state Exp;
branches;
next	1.115;

1.115
date	2000.08.20.18.42.36;	author millert;	state Exp;
branches;
next	1.114;

1.114
date	2000.07.18.18.46.05;	author deraadt;	state Exp;
branches;
next	1.113;

1.113
date	2000.06.25.16.04.03;	author naddy;	state Exp;
branches;
next	1.112;

1.112
date	2000.06.19.17.38.44;	author todd;	state Exp;
branches;
next	1.111;

1.111
date	2000.04.29.22.04.55;	author deraadt;	state Exp;
branches;
next	1.110;

1.110
date	2000.04.25.21.17.29;	author jakob;	state Exp;
branches;
next	1.109;

1.109
date	2000.04.25.20.52.47;	author jakob;	state Exp;
branches;
next	1.108;

1.108
date	2000.04.07.02.33.38;	author deraadt;	state Exp;
branches;
next	1.107;

1.107
date	2000.04.06.18.26.04;	author millert;	state Exp;
branches;
next	1.106;

1.106
date	2000.01.11.13.50.03;	author peter;	state Exp;
branches;
next	1.105;

1.105
date	2000.01.05.20.16.36;	author angelos;	state Exp;
branches;
next	1.104;

1.104
date	99.11.26.21.29.37;	author millert;	state Exp;
branches;
next	1.103;

1.103
date	99.10.08.11.33.51;	author espie;	state Exp;
branches;
next	1.102;

1.102
date	99.10.08.10.51.34;	author espie;	state Exp;
branches;
next	1.101;

1.101
date	99.09.29.21.50.23;	author deraadt;	state Exp;
branches;
next	1.100;

1.100
date	99.09.28.07.19.27;	author deraadt;	state Exp;
branches;
next	1.99;

1.99
date	99.08.02.19.50.08;	author jakob;	state Exp;
branches;
next	1.98;

1.98
date	99.07.06.07.55.03;	author deraadt;	state Exp;
branches;
next	1.97;

1.97
date	99.04.30.00.46.25;	author art;	state Exp;
branches;
next	1.96;

1.96
date	99.03.17.18.26.07;	author deraadt;	state Exp;
branches;
next	1.95;

1.95
date	99.01.04.02.12.09;	author millert;	state Exp;
branches;
next	1.94;

1.94
date	98.12.01.04.33.27;	author form;	state Exp;
branches;
next	1.93;

1.93
date	98.10.30.18.44.47;	author millert;	state Exp;
branches;
next	1.92;

1.92
date	98.09.19.00.48.33;	author todd;	state Exp;
branches;
next	1.91;

1.91
date	98.09.15.18.18.14;	author art;	state Exp;
branches;
next	1.90;

1.90
date	98.09.08.20.26.40;	author marc;	state Exp;
branches;
next	1.89;

1.89
date	98.08.20.03.21.45;	author form;	state Exp;
branches;
next	1.88;

1.88
date	98.07.05.12.53.30;	author art;	state Exp;
branches;
next	1.87;

1.87
date	98.05.23.19.22.30;	author millert;	state Exp;
branches;
next	1.86;

1.86
date	98.05.05.21.51.51;	author deraadt;	state Exp;
branches;
next	1.85;

1.85
date	98.04.07.23.24.06;	author ryker;	state Exp;
branches;
next	1.84;

1.84
date	98.04.07.22.48.50;	author deraadt;	state Exp;
branches;
next	1.83;

1.83
date	98.03.31.17.41.18;	author deraadt;	state Exp;
branches;
next	1.82;

1.82
date	98.03.26.01.00.21;	author deraadt;	state Exp;
branches;
next	1.81;

1.81
date	98.03.25.23.03.27;	author deraadt;	state Exp;
branches;
next	1.80;

1.80
date	98.03.11.22.39.03;	author maja;	state Exp;
branches;
next	1.79;

1.79
date	98.02.19.03.31.16;	author deraadt;	state Exp;
branches;
next	1.78;

1.78
date	97.12.11.03.03.04;	author brian;	state Exp;
branches;
next	1.77;

1.77
date	97.10.24.15.57.13;	author deraadt;	state Exp;
branches;
next	1.76;

1.76
date	97.10.24.15.36.42;	author deraadt;	state Exp;
branches;
next	1.75;

1.75
date	97.10.24.12.42.28;	author downsj;	state Exp;
branches;
next	1.74;

1.74
date	97.10.21.15.31.18;	author millert;	state Exp;
branches;
next	1.73;

1.73
date	97.10.21.01.32.31;	author millert;	state Exp;
branches;
next	1.72;

1.72
date	97.10.20.04.47.17;	author downsj;	state Exp;
branches;
next	1.71;

1.71
date	97.09.24.02.52.01;	author deraadt;	state Exp;
branches;
next	1.70;

1.70
date	97.09.24.02.05.17;	author deraadt;	state Exp;
branches;
next	1.69;

1.69
date	97.09.11.22.38.46;	author downsj;	state Exp;
branches;
next	1.68;

1.68
date	97.09.10.07.19.12;	author deraadt;	state Exp;
branches;
next	1.67;

1.67
date	97.09.04.01.12.22;	author deraadt;	state Exp;
branches;
next	1.66;

1.66
date	97.09.03.23.50.55;	author deraadt;	state Exp;
branches;
next	1.65;

1.65
date	97.09.03.23.44.07;	author deraadt;	state Exp;
branches;
next	1.64;

1.64
date	97.07.28.10.01.11;	author deraadt;	state Exp;
branches;
next	1.63;

1.63
date	97.07.27.23.35.38;	author downsj;	state Exp;
branches;
next	1.62;

1.62
date	97.07.27.22.23.40;	author downsj;	state Exp;
branches;
next	1.61;

1.61
date	97.07.22.10.02.46;	author provos;	state Exp;
branches;
next	1.60;

1.60
date	97.05.19.19.31.22;	author deraadt;	state Exp;
branches;
next	1.59;

1.59
date	97.05.18.20.29.39;	author pefo;	state Exp;
branches;
next	1.58;

1.58
date	97.05.18.13.42.36;	author pefo;	state Exp;
branches;
next	1.57;

1.57
date	97.05.16.18.02.22;	author deraadt;	state Exp;
branches;
next	1.56;

1.56
date	97.05.12.22.21.50;	author deraadt;	state Exp;
branches;
next	1.55;

1.55
date	97.05.12.19.29.53;	author deraadt;	state Exp;
branches;
next	1.54;

1.54
date	97.05.11.10.11.03;	author deraadt;	state Exp;
branches;
next	1.53;

1.53
date	97.05.10.23.19.04;	author graichen;	state Exp;
branches;
next	1.52;

1.52
date	97.05.07.06.30.57;	author deraadt;	state Exp;
branches;
next	1.51;

1.51
date	97.05.03.19.51.10;	author deraadt;	state Exp;
branches;
next	1.50;

1.50
date	97.05.03.19.47.18;	author deraadt;	state Exp;
branches;
next	1.49;

1.49
date	97.05.03.08.06.30;	author deraadt;	state Exp;
branches;
next	1.48;

1.48
date	97.05.02.15.34.25;	author deraadt;	state Exp;
branches;
next	1.47;

1.47
date	97.04.25.18.50.01;	author deraadt;	state Exp;
branches;
next	1.46;

1.46
date	97.04.20.10.19.24;	author maja;	state Exp;
branches;
next	1.45;

1.45
date	97.04.15.12.32.17;	author graichen;	state Exp;
branches;
next	1.44;

1.44
date	97.04.15.09.26.44;	author deraadt;	state Exp;
branches;
next	1.43;

1.43
date	97.04.09.10.59.56;	author kstailey;	state Exp;
branches;
next	1.42;

1.42
date	97.04.09.02.41.55;	author kstailey;	state Exp;
branches;
next	1.41;

1.41
date	97.03.02.04.41.53;	author millert;	state Exp;
branches;
next	1.40;

1.40
date	97.02.17.21.58.49;	author deraadt;	state Exp;
branches;
next	1.39;

1.39
date	97.02.16.23.11.55;	author provos;	state Exp;
branches;
next	1.38;

1.38
date	97.01.23.03.41.24;	author millert;	state Exp;
branches;
next	1.37;

1.37
date	97.01.22.11.13.53;	author niklas;	state Exp;
branches;
next	1.36;

1.36
date	97.01.21.12.02.41;	author graichen;	state Exp;
branches;
next	1.35;

1.35
date	97.01.19.22.26.19;	author graichen;	state Exp;
branches;
next	1.34;

1.34
date	97.01.03.04.04.52;	author etheisen;	state Exp;
branches;
next	1.33;

1.33
date	97.01.03.03.19.17;	author etheisen;	state Exp;
branches;
next	1.32;

1.32
date	97.01.02.23.14.13;	author deraadt;	state Exp;
branches;
next	1.31;

1.31
date	96.12.19.02.38.08;	author millert;	state Exp;
branches;
next	1.30;

1.30
date	96.12.10.21.11.16;	author deraadt;	state Exp;
branches;
next	1.29;

1.29
date	96.12.08.21.27.11;	author tholo;	state Exp;
branches;
next	1.28;

1.28
date	96.11.30.16.40.22;	author michaels;	state Exp;
branches;
next	1.27;

1.27
date	96.09.23.05.04.37;	author downsj;	state Exp;
branches;
next	1.26;

1.26
date	96.09.17.07.18.15;	author deraadt;	state Exp;
branches;
next	1.25;

1.25
date	96.09.06.17.26.58;	author deraadt;	state Exp;
branches;
next	1.24;

1.24
date	96.08.24.20.52.22;	author deraadt;	state Exp;
branches;
next	1.23;

1.23
date	96.08.16.22.05.36;	author michaels;	state Exp;
branches;
next	1.22;

1.22
date	96.08.14.08.28.03;	author downsj;	state Exp;
branches;
next	1.21;

1.21
date	96.08.10.12.30.27;	author deraadt;	state Exp;
branches;
next	1.20;

1.20
date	96.08.03.20.44.17;	author millert;	state Exp;
branches;
next	1.19;

1.19
date	96.07.31.12.29.16;	author deraadt;	state Exp;
branches;
next	1.18;

1.18
date	96.07.28.09.00.45;	author deraadt;	state Exp;
branches;
next	1.17;

1.17
date	96.06.21.21.20.49;	author dm;	state Exp;
branches;
next	1.16;

1.16
date	96.06.17.07.19.27;	author deraadt;	state Exp;
branches;
next	1.15;

1.15
date	96.06.16.12.57.30;	author deraadt;	state Exp;
branches;
next	1.14;

1.14
date	96.06.03.07.20.41;	author mickey;	state Exp;
branches;
next	1.13;

1.13
date	96.06.03.07.03.41;	author mickey;	state Exp;
branches;
next	1.12;

1.12
date	96.06.02.05.05.36;	author tholo;	state Exp;
branches;
next	1.11;

1.11
date	96.05.26.10.25.16;	author deraadt;	state Exp;
branches;
next	1.10;

1.10
date	96.05.04.11.31.29;	author deraadt;	state Exp;
branches;
next	1.9;

1.9
date	96.05.04.08.13.51;	author deraadt;	state Exp;
branches;
next	1.8;

1.8
date	96.04.23.21.54.36;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	95.12.26.17.24.58;	author david;	state Exp;
branches;
next	1.6;

1.6
date	95.12.18.15.25.09;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	95.12.18.15.18.16;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	95.12.16.21.12.06;	author tholo;	state Exp;
branches;
next	1.3;

1.3
date	95.12.14.01.19.40;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	95.11.01.16.42.45;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.37.55;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.37.55;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.453
log
@Enable dhcrelay6(8).

ok deraadt@@
@
text
@#	$OpenBSD: Makefile,v 1.452 2017/02/27 21:53:11 rpe Exp $

.include <bsd.own.mk>

TZDIR=		/usr/share/zoneinfo
LOCALTIME=	Canada/Mountain
MTREEDIR=	/etc/mtree

NOOBJ=

KERNELS = GENERIC bsd

.if exists(etc.${MACHINE}/Makefile.inc)
.include "etc.${MACHINE}/Makefile.inc"
.endif

.for CONF K in ${KERNELS}
.  if !target($K)
$K:
	cd ../sys/arch/${MACHINE}/compile/${CONF} && \
		{ [[ -n "${KEEPKERNELS}" ]] || ${MAKE} cleandir; } && \
		${MAKE} config && ${MAKE} clean && exec ${MAKE};
.  endif
ALL_KERNELS += $K
.endfor

kernels: ${ALL_KERNELS}
.for CONF K in ${KERNELS}
	cp ../sys/arch/${MACHINE}/compile/${CONF}/obj/bsd ${RELEASEDIR}/$K
.endfor

# -rw-r--r--
BINOWN= root
BINGRP= wheel
MUTABLE=acme-client.conf changelist daily etc.${MACHINE}/disktab \
	etc.${MACHINE}/login.conf ftpusers gettytab group ksh.kshrc locate.rc \
	mailer.conf moduli monthly netstart networks newsyslog.conf ntpd.conf \
	pf.os protocols rc rc.conf rpc services shells syslog.conf weekly

# -rw-r--r--
EXAMPLES=chio.conf dhclient.conf dhcpd.conf exports \
	httpd.conf ifstated.conf inetd.conf man.conf mixerctl.conf \
	mrouted.conf ntpd.conf printcap rbootd.conf \
	remote sensorsd.conf wsconsctl.conf

# -rw-------
EXAMPLES_600=bgpd.conf doas.conf dvmrpd.conf eigrpd.conf hostapd.conf \
	iked.conf ipsec.conf ldapd.conf ldpd.conf ospf6d.conf ospfd.conf \
	pf.conf radiusd.conf rc.local rc.securelevel rc.shutdown relayd.conf \
	ripd.conf sasyncd.conf snmpd.conf vm.conf ypldap.conf

# -r-xr-xr-x
RCDAEMONS=amd apmd bgpd bootparamd cron dhcpd dhcrelay dhcrelay6 dvmrpd \
	eigrpd ftpd ftpproxy ftpproxy6 hostapd hotplugd httpd identd ifstated \
	iked inetd isakmpd iscsid ldapd ldattach ldomd ldpd lockd \
	lpd mopd mountd mrouted nfsd npppd nsd ntpd ospf6d ospfd \
	pflogd portmap radiusd rarpd rbootd rebound relayd ripd route6d \
	rtadvd sasyncd sensorsd slowcgi smtpd sndiod snmpd spamd \
	spamlogd sshd statd switchd syslogd tftpd tftpproxy unbound \
	vmd watchdogd wsmoused xenodm ypbind ypldap ypserv

MISETS=	base${OSrev}.tgz comp${OSrev}.tgz man${OSrev}.tgz game${OSrev}.tgz

all clean cleandir depend etc install lint:

install-mtree:
	${INSTALL} -c -o root -g wheel -m 600 mtree/special \
	    ${DESTDIR}${MTREEDIR}
	${INSTALL} -c -o root -g wheel -m 444 mtree/4.4BSD.dist \
	    ${DESTDIR}${MTREEDIR}
	${INSTALL} -c -o root -g wheel -m 444 mtree/BSD.x11.dist \
	    ${DESTDIR}${MTREEDIR}

.ifndef DESTDIR
distribution-etc-root-var distribution distrib-dirs release:
	@@echo setenv DESTDIR before doing that!
	@@false
.else
distribution-etc-root-var: distrib-dirs
	${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 644 ${MUTABLE} ${DESTDIR}/etc
	sh ttys.pty | cat etc.${MACHINE}/ttys - > ${DESTDIR}/etc/ttys && \
	    chown ${BINOWN}:${BINGRP} ${DESTDIR}/etc/ttys && \
	    chmod 644 ${DESTDIR}/etc/ttys
	cat examples/sysctl.conf etc.${MACHINE}/sysctl.conf > \
	    ${DESTDIR}/etc/examples/sysctl.conf && \
	    chown ${BINOWN}:${BINGRP} ${DESTDIR}/etc/examples/sysctl.conf && \
	    chmod 644 ${DESTDIR}/etc/examples/sysctl.conf
	cat fbtab.head etc.${MACHINE}/fbtab fbtab.tail > ${DESTDIR}/etc/fbtab && \
	    chown ${BINOWN}:${BINGRP} ${DESTDIR}/etc/fbtab && \
	    chmod 644 ${DESTDIR}/etc/fbtab
	${INSTALL} -c -o ${BINOWN} -g operator -m 664 motd ${DESTDIR}/etc
	${INSTALL} -c -o root -g crontab -m 600 crontab ${DESTDIR}/var/cron/tabs/root
	${INSTALL} -c -o root -g wheel -m 600 master.passwd ${DESTDIR}/etc
	pwd_mkdb -p -d ${DESTDIR}/etc /etc/master.passwd
	chown root:wheel ${DESTDIR}/etc/passwd ${DESTDIR}/etc/pwd.db
	chown root:_shadow ${DESTDIR}/etc/spwd.db
	${INSTALL} -c -o root -g wheel -m 600 pf.conf ${DESTDIR}/etc
	${INSTALL} -c -o root -g _nsd -m 640 nsd.conf ${DESTDIR}/var/nsd/etc
	${INSTALL} -c -o root -g wheel -m 644 unbound.conf ${DESTDIR}/var/unbound/etc
	${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 555 \
	    etc.${MACHINE}/MAKEDEV ${DESTDIR}/dev
	cd root; \
		${INSTALL} -c -o root -g wheel -m 644 dot.cshrc \
		    ${DESTDIR}/root/.cshrc; \
		${INSTALL} -c -o root -g wheel -m 644 dot.login \
		    ${DESTDIR}/root/.login; \
		${INSTALL} -c -o root -g wheel -m 644 dot.profile \
		    ${DESTDIR}/root/.profile; \
		${INSTALL} -c -o root -g wheel -m 644 dot.Xdefaults \
		    ${DESTDIR}/root/.Xdefaults; \
		${INSTALL} -c -o root -g wheel -m 644 dot.cvsrc \
		    ${DESTDIR}/root/.cvsrc; \
		${INSTALL} -c -o root -g wheel -m 600 /dev/null \
		    ${DESTDIR}/root/.ssh/authorized_keys; \
		rm -f ${DESTDIR}/.cshrc ${DESTDIR}/.profile; \
		${INSTALL} -c -o root -g wheel -m 644 dot.cshrc \
		    ${DESTDIR}/.cshrc; \
		${INSTALL} -c -o root -g wheel -m 644 dot.profile \
		    ${DESTDIR}/.profile
	cd skel; \
		${INSTALL} -c -o root -g wheel -m 644 dot.cshrc \
		    ${DESTDIR}/etc/skel/.cshrc; \
		${INSTALL} -c -o root -g wheel -m 644 dot.login \
		    ${DESTDIR}/etc/skel/.login; \
		${INSTALL} -c -o root -g wheel -m 644 dot.mailrc \
		    ${DESTDIR}/etc/skel/.mailrc; \
		${INSTALL} -c -o root -g wheel -m 644 dot.profile \
		    ${DESTDIR}/etc/skel/.profile; \
		${INSTALL} -c -o root -g wheel -m 644 dot.Xdefaults \
		    ${DESTDIR}/etc/skel/.Xdefaults; \
		${INSTALL} -c -o root -g wheel -m 644 dot.cvsrc \
		    ${DESTDIR}/etc/skel/.cvsrc; \
		${INSTALL} -c -o root -g wheel -m 600 /dev/null \
		    ${DESTDIR}/etc/skel/.ssh/authorized_keys
	cd amd; \
		${INSTALL} -c -o root -g wheel -m 644 master.sample \
		    ${DESTDIR}/etc/amd
	cd ppp; \
		${INSTALL} -c -o root -g wheel -m 600 chap-secrets \
		    ${DESTDIR}/etc/ppp; \
		${INSTALL} -c -o root -g wheel -m 600 options \
		    ${DESTDIR}/etc/ppp; \
		${INSTALL} -c -o root -g wheel -m 600 options.sample \
		    ${DESTDIR}/etc/ppp; \
		${INSTALL} -c -o root -g wheel -m 600 chatscript.sample \
		    ${DESTDIR}/etc/ppp; \
		${INSTALL} -c -o root -g wheel -m 600 pap-secrets \
		    ${DESTDIR}/etc/ppp
	cd examples; \
		${INSTALL} -c -o root -g wheel -m 644 ${EXAMPLES} \
		    ${DESTDIR}/etc/examples; \
		${INSTALL} -c -o root -g wheel -m 600 ${EXAMPLES_600} \
		    ${DESTDIR}/etc/examples; \
		chgrp operator ${DESTDIR}/etc/examples/chio.conf
	cd signify; \
		${INSTALL} -c -o root -g wheel -m 644 *.pub \
		    ${DESTDIR}/etc/signify
	ln -fs ${TZDIR}/${LOCALTIME} ${DESTDIR}/etc/localtime
	chown -h root:wheel ${DESTDIR}/etc/localtime
	ln -fs /usr/sbin/rmt ${DESTDIR}/etc/rmt
	chown -h root:wheel ${DESTDIR}/etc/rmt
	${INSTALL} -c -o root -g wheel -m 644 minfree \
	    ${DESTDIR}/var/crash
	${INSTALL} -c -o ${BINOWN} -g operator -m 664 /dev/null \
	    ${DESTDIR}/etc/dumpdates
	${INSTALL} -c -o root -g crontab -m 660 /dev/null \
	    ${DESTDIR}/var/cron/at.deny
	${INSTALL} -c -o root -g crontab -m 660 /dev/null \
	    ${DESTDIR}/var/cron/cron.deny
	${INSTALL} -c -o root -g wheel -m 600 /dev/null \
	    ${DESTDIR}/var/cron/log
	${INSTALL} -c -o root -g wheel -m 444 /dev/null \
	    ${DESTDIR}/var/db/locate.database
	${INSTALL} -c -o ${BINOWN} -g wheel -m 640 /dev/null \
	    ${DESTDIR}/var/log/authlog
	${INSTALL} -c -o ${BINOWN} -g wheel -m 640 /dev/null \
	    ${DESTDIR}/var/log/daemon
	${INSTALL} -c -o ${BINOWN} -g wheel -m 600 /dev/null \
	    ${DESTDIR}/var/log/failedlogin
	${INSTALL} -c -o ${BINOWN} -g wheel -m 640 /dev/null \
	    ${DESTDIR}/var/log/ftpd
	${INSTALL} -c -o ${BINOWN} -g wheel -m 644 /dev/null \
	    ${DESTDIR}/var/log/lastlog
	${INSTALL} -c -o ${BINOWN} -g wheel -m 640 /dev/null \
	    ${DESTDIR}/var/log/lpd-errs
	${INSTALL} -c -o ${BINOWN} -g wheel -m 640 /dev/null \
	    ${DESTDIR}/var/log/maillog
	${INSTALL} -c -o ${BINOWN} -g wheel -m 644 /dev/null \
	    ${DESTDIR}/var/log/messages
	${INSTALL} -c -o ${BINOWN} -g wheel -m 600 /dev/null \
	    ${DESTDIR}/var/log/secure
	${INSTALL} -c -o ${BINOWN} -g wheel -m 644 /dev/null \
	    ${DESTDIR}/var/log/wtmp
	${INSTALL} -c -o ${BINOWN} -g wheel -m 640 /dev/null \
	    ${DESTDIR}/var/log/xferlog
	cd ../usr.sbin/ypserv/ypinit && exec ${MAKE} distribution
	cd ../usr.bin/ssh && exec ${MAKE} distribution
	cd ../lib/libcrypto && exec ${MAKE} distribution
	cd ../usr.bin/bgplg && exec ${MAKE} distribution
	cd ../usr.bin/mail && exec ${MAKE} distribution
	cd ../usr.sbin/ikectl && exec ${MAKE} distribution
	cd ../usr.sbin/ldapd && exec ${MAKE} distribution
	cd ../usr.sbin/npppd && exec ${MAKE} distribution
	cd mail && exec ${MAKE} distribution
	${INSTALL} -c -o root -g wheel -m 600 root/root.mail \
	    ${DESTDIR}/var/mail/root
	cd rc.d; \
		${INSTALL} -c -o root -g wheel -m 644 rc.subr \
		    ${DESTDIR}/etc/rc.d && \
		${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 555 ${RCDAEMONS} \
		    ${DESTDIR}/etc/rc.d
	cd ${DESTDIR}/var; ln -fs ../tmp
	chown -h root:wheel ${DESTDIR}/var/tmp
	touch ${DESTDIR}/var/sysmerge/etcsum
	chown root:wheel ${DESTDIR}/var/sysmerge/etcsum
	chmod 644 ${DESTDIR}/var/sysmerge/etcsum
	cd ${DESTDIR}/ && \
		sort ${.CURDIR}/../distrib/sets/lists/etc/{mi,md.${MACHINE}} | \
		xargs sha256 -h ${DESTDIR}/var/sysmerge/etcsum || true
	cd ${DESTDIR}/ && \
		sort ${.CURDIR}/../distrib/sets/lists/etc/{mi,md.${MACHINE}} | \
		pax -w -d | gzip -9 > ${DESTDIR}/var/sysmerge/etc.tgz
	chown root:wheel ${DESTDIR}/var/sysmerge/etc.tgz
	chmod 644 ${DESTDIR}/var/sysmerge/etc.tgz

distribution:
	exec ${MAKE} distribution-etc-root-var
	cd .. && exec ${MAKE} install

distrib-dirs:
	if [ ! -d ${DESTDIR}/. ]; then \
		${INSTALL} -d -o root -g wheel -m 755 ${DESTDIR}; \
	fi
	mtree -qdef mtree/4.4BSD.dist -p ${DESTDIR}/ -U
	cd ${DESTDIR}/; ln -fhs usr/src/sys sys
	chown -h root:wheel ${DESTDIR}/sys

.ifndef RELEASEDIR
release:
	@@echo setenv RELEASEDIR before building a release.
	@@false
.else
release:
	umask ${WOBJUMASK}; exec ${MAKE} do-release

do-release:
	@@if [[ `id -u` -ne 0 ]]; then \
		echo $@@ must be called by root >&2; \
		false; \
	fi
	@@destmp=`df -P ${DESTDIR} | awk 'END { print $$6 }'`; \
	if ! mount | grep -q " $${destmp} .*noperm"; then \
		echo ${DESTDIR} must be on a noperm filesystem >&2; \
		false; \
	fi; \
	if [[ `stat -f '%Su %Lp' $${destmp}` != '${BUILDUSER} 700' ]]; then \
		echo $${destmp} must have owner BUILDUSER and mode 700 >&2; \
		false; \
	fi
	${MAKE} release-sets
	${MAKE} distrib
	su ${BUILDUSER} -c 'exec ${MAKE} sha'
	-cd ${RELEASEDIR} && chmod g-w,a+rX *

release-sets:
	su ${BUILDUSER} -c 'exec ${MAKE} distribution'
	su ${BUILDUSER} -c 'exec ${MAKE} kernels'
	${MAKE} bootblocks
	cd ${RELEASEDIR} && rm -f SHA256
	cd ../distrib/sets && exec su ${BUILDUSER} -c 'exec sh maketars ${OSrev}'

sha:
	-cd ${RELEASEDIR}; \
	    date -u "+Build date: %s - %+" > BUILDINFO; \
	    cksum -a sha256 BUILDINFO INSTALL.`arch -ks` \
	    ${ALL_KERNELS} ${MDEXT} ${MISETS} | sort > SHA256

.endif

.endif	# DESTDIR check

distrib:
	umask 022; cd ../distrib && \
	    ${MAKE} && exec ${MAKE} install

.PHONY: distribution-etc-root-var distribution distrib-dirs \
	release allarchs kernels release-sets m4 install-mtree \
	bootblocks ${ALL_KERNELS}

SUBDIR+= etc.alpha etc.amd64 etc.arm64 etc.armv7
SUBDIR+= etc.hppa etc.i386 etc.landisk etc.loongson etc.luna88k
SUBDIR+= etc.macppc etc.octeon
SUBDIR+= etc.sgi etc.socppc etc.sparc64

.include <bsd.subdir.mk>
.include <bsd.prog.mk>
@


1.452
log
@Remove support for pkg.conf in light of the consolidation towards
a single configuration file for the OpenBSD repository location.

The pkg_* tools now use installurl(5) to find the package repository.

NOTE:
/etc/installurl only contains a single URL pointing to a mirror.
Use the PKG_PATH environment variable to specify more than one
package repository.

prodded by and OK deraadt@@ aja@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.451 2017/02/26 16:51:18 matthieu Exp $
d53 2
a54 2
RCDAEMONS=amd apmd bgpd bootparamd cron dhcpd dhcrelay dvmrpd eigrpd ftpd \
	ftpproxy ftpproxy6 hostapd hotplugd httpd identd ifstated \
@


1.451
log
@Switch to xenodm(1).

Do it now deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.450 2017/02/12 08:56:17 landry Exp $
d43 1
a43 1
	mrouted.conf ntpd.conf pkg.conf printcap rbootd.conf \
@


1.450
log
@As it's done in /etc/skel for new regular users, create an empty
/root/.ssh/authorized_keys file with correct permissions (0600 for the
file, 0700 for /root/.ssh dir). Since we encourage administrators to use
public keys only if they want to access root account via ssh, might
aswell make it easier, this will be particularly useful in
managed/provisioned environments (think ansible & others).

Note that administrators might get an e-mail from security(8) if the
file suddenly appears after an update - this is of course expected :)

ok tb@@ sthen@@ rpe@@ ajacoutot@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.449 2017/02/02 21:35:05 rpe Exp $
d60 1
a60 1
	vmd watchdogd wsmoused xdm ypbind ypldap ypserv
@


1.449
log
@Use a single chown user:group instead of separate chown and chgrp.

OK tb@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.448 2017/01/25 03:24:52 patrick Exp $
d113 2
@


1.448
log
@+arm64
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.447 2017/01/23 23:54:01 tb Exp $
d82 1
a82 2
	    chown ${BINOWN} ${DESTDIR}/etc/ttys && \
	    chgrp ${BINGRP} ${DESTDIR}/etc/ttys && \
d86 1
a86 2
	    chown ${BINOWN} ${DESTDIR}/etc/examples/sysctl.conf && \
	    chgrp ${BINGRP} ${DESTDIR}/etc/examples/sysctl.conf && \
d89 1
a89 2
	    chown ${BINOWN} ${DESTDIR}/etc/fbtab && \
	    chgrp ${BINGRP} ${DESTDIR}/etc/fbtab && \
@


1.447
log
@Interpolate a 'make cleandir' if KEEPKERNELS is set to a non-empty string,
right before building kernels. This should unbreak 'make release' for
people having this setting.

ok deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.446 2016/11/20 11:00:19 tb Exp $
d291 1
a291 1
SUBDIR+= etc.alpha etc.amd64 etc.armv7
@


1.446
log
@Fix up some permissions in RELEASEDIR and /var/sysmerge.

help, testing & ok rpe
@
text
@d1 3
a3 1
#	$OpenBSD: Makefile,v 1.445 2016/11/19 14:20:58 tb Exp $
d20 3
a22 2
	cd ../sys/arch/${MACHINE}/compile/${CONF} && ${MAKE} config && \
	    ${MAKE} clean && exec ${MAKE}
a243 1

@


1.445
log
@Enable builds with a dedicated user that cannot elevate privileges or write
to /usr/src or /usr/xenocara.

Change /usr/{,x}obj to owner build:wobj with mode 770 and install the
systemwide makefiles before starting a build.  The root of the noperm fs
containing DESTDIR should also be owned by build:wobj.

Developers will need to add their users to group wobj to be able to write
to /usr/{,x}obj/.

"push forward" deraadt; testing, input & ok rpe
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.444 2016/11/05 09:14:37 rpe Exp $
d214 1
d222 1
d262 1
@


1.444
log
@Remove the obj, xobj and src directories from the base set.
The installer will create these directories during install.
So local setups will not get overwritten during upgrades.

idea from and OK deraadt@@
with help from and OK tb@@
feedback from and no objections halex@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.443 2016/10/14 18:45:12 deraadt Exp $
d241 3
d279 1
a279 1
	cd ../distrib && \
@


1.443
log
@Build the bundle of GENERIC* kernels in using the new compile metods,
and de-escalate to $BUILDUSER.
Much help from natano and tb.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.442 2016/10/09 20:55:16 natano Exp $
a230 9
	if [ ! -d ${DESTDIR}/usr/src ]; then \
		${INSTALL} -d -o root -g wsrc -m 775 ${DESTDIR}/usr/src; \
	fi
	if [ ! -d ${DESTDIR}/usr/obj ]; then \
		${INSTALL} -d -o root -g wsrc -m 775 ${DESTDIR}/usr/obj; \
	fi
	if [ ! -d ${DESTDIR}/usr/xobj ]; then \
		${INSTALL} -d -o root -g wsrc -m 775 ${DESTDIR}/usr/xobj; \
	fi
@


1.442
log
@Remove check for RELEASEDIR permissions, there are usecases where other
filesystem permissions are required.

requested by deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.441 2016/10/09 14:23:10 natano Exp $
d18 1
a18 2
	cd ../sys/arch/${MACHINE}/conf && config ${CONF}
	cd ../sys/arch/${MACHINE}/compile/${CONF} && \
d24 1
a24 1
kernels: bootblocks ${ALL_KERNELS}
d26 1
a26 1
	cp ../sys/arch/${MACHINE}/compile/${CONF}/bsd ${RELEASEDIR}/$K
d269 2
a270 1
	${MAKE} kernels
@


1.441
log
@Check that DESTDIR is on a noperm filesystem that's properly locked
down and enforce reasonable permissions for RELEASEDIR.

prodded by and ok deraadt
ok tb
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.440 2016/10/06 20:20:41 reyk Exp $
a261 4
		false; \
	fi
	@@if [[ `stat -f '%Su %Lp' ${RELEASEDIR}` != '${BUILDUSER} 700' ]]; then \
		echo ${RELEASEDIR} must have owner BUILDUSER and mode 700 >&2; \
@


1.440
log
@Add switchd

OK deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.439 2016/10/06 18:56:17 natano Exp $
d253 13
@


1.439
log
@Print the root check error message to stderr. While there add the name
of the target to the message to be more descriptive.

ok deraadt tb
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.438 2016/10/06 15:37:42 natano Exp $
d57 1
a57 1
	spamlogd sshd statd syslogd tftpd tftpproxy unbound \
@


1.438
log
@Build kernels as root for now. Otherwise we run into permission issues
when the source tree is not owned by ${BUILDUSER}.

ok deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.437 2016/10/05 21:39:57 deraadt Exp $
d252 1
a252 1
		echo 'must be called by root' 2>&1; \
@


1.437
log
@conditionally create obj & xobj same way that src is handled
ok natano
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.436 2016/10/05 18:00:41 natano Exp $
d255 1
a255 1
	su ${BUILDUSER} -c 'exec ${MAKE} release-sets'
d260 2
d263 1
a263 1
	cd ../distrib/sets && exec sh maketars ${OSrev}
a269 2

release-sets: distribution kernels
@


1.436
log
@De-escalate to an unprivileged users during 'make build' and 'make release'.

- If you start make build as root, everything will be run as root.
  Nothing new here. New is, that you can set BUILDUSER=somebody and the
  unprived parts will be run as somebody.
- If you start make build with sudo, the unprived parts will be run as
  the real user (meaning YOU). You can still set BUILDUSER=somebody and
  the uprived parts will run as somebody.
- If you start make build as a normal user it will error out. "I'm sorry
  Dave."

Note that DESTDIR must be on partition with the noperm flag set for make
release to work correctly as an unprivileged user.

idea and ok deraadt
input and ok tb ratchov millert
rpe, halex and probably others where part of the conversation to make
this happen, thanks!
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.435 2016/10/04 16:54:31 deraadt Exp $
d234 6
@


1.435
log
@stop supporting SUDO builds.  Something better is coming, so let's
align everyone who is using SUDO builds towards the new strategy.
ok natano
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.434 2016/09/18 21:47:19 deraadt Exp $
d244 9
a262 3
release: sha
sha: distrib
distrib: release-sets kernels
@


1.434
log
@fix build
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.433 2016/09/18 20:18:25 benno Exp $
d224 2
a225 2
	exec ${SUDO} ${MAKE} distribution-etc-root-var
	cd .. && exec ${SUDO} ${MAKE} install
d246 1
a246 1
	cd ../distrib/sets && exec ${SUDO} sh maketars ${OSrev}
d265 1
a265 1
	    ${MAKE} && exec ${SUDO} ${MAKE} install
@


1.433
log
@add a config file parser to acme-client (unused at the moment, so that
it can be worked on in the tree).
ok florian@@ deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.432 2016/09/11 19:44:32 natano Exp $
d39 1
a39 1
EXAMPLES=acme-client.conf chio.conf dhclient.conf dhcpd.conf exports \
@


1.432
log
@Set owner for /etc/{passwd,pwd.db,spwd.db} and /var/sysmerge/etcsum.
from rpe
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.431 2016/09/11 06:51:17 natano Exp $
d33 3
a35 3
MUTABLE=changelist daily etc.${MACHINE}/disktab etc.${MACHINE}/login.conf \
	ftpusers gettytab group ksh.kshrc locate.rc mailer.conf \
	moduli monthly netstart networks newsyslog.conf ntpd.conf \
d39 3
a41 4
EXAMPLES=chio.conf dhclient.conf dhcpd.conf exports \
	httpd.conf ifstated.conf inetd.conf \
	man.conf mixerctl.conf mrouted.conf \
	ntpd.conf pkg.conf printcap rbootd.conf \
@


1.431
log
@The /etc/{localtime,rmt}, /var/tmp and /sys symlinks and the etc tarball
should be owned by root.

ok deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.430 2016/09/03 13:37:40 guenther Exp $
d97 2
d215 1
@


1.430
log
@Retire zaurus, as it hasn't made the EABI jump and will be permanently broken
shortly when we use the hardware thread register in userland
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.429 2016/09/03 11:58:32 pirofti Exp $
d157 1
d159 1
d211 1
d219 1
d234 1
@


1.429
log
@Add doas.conf example configuration file.

Discussed with and loved by many.

OK tedu@@, tom@@, deraadt@@.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.428 2016/09/01 09:54:17 deraadt Exp $
d267 1
a267 1
SUBDIR+= etc.sgi etc.socppc etc.sparc64 etc.zaurus
@


1.428
log
@remove sparc pieces
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.427 2016/08/10 14:27:15 deraadt Exp $
d46 3
a48 3
EXAMPLES_600=bgpd.conf dvmrpd.conf eigrpd.conf hostapd.conf iked.conf \
	ipsec.conf ldapd.conf ldpd.conf ospf6d.conf ospfd.conf pf.conf \
	radiusd.conf rc.local rc.securelevel rc.shutdown relayd.conf \
@


1.427
log
@armish handled some early-gen arm machines, which required tons of
workarounds.  Some of them will soon stand in the way of armv7.
Off to the attic you go.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.426 2016/08/09 21:24:31 halex Exp $
d267 1
a267 1
SUBDIR+= etc.sgi etc.socppc etc.sparc etc.sparc64 etc.zaurus
@


1.426
log
@remove pointless csh placeholder files from /etc

ok jung@@ (some time ago) phessler@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.425 2016/05/26 16:29:51 deraadt Exp $
d264 1
a264 1
SUBDIR+= etc.alpha etc.amd64 etc.armish etc.armv7
@


1.425
log
@whitespace found during review
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.424 2016/05/14 14:44:35 ajacoutot Exp $
d33 2
a34 3
MUTABLE=changelist csh.cshrc csh.login csh.logout daily \
	etc.${MACHINE}/disktab etc.${MACHINE}/login.conf ftpusers \
	gettytab group ksh.kshrc locate.rc mailer.conf \
@


1.424
log
@Remove handling of /etc/examples/ files by sysmerge(8). Getting regular messages
about pkg.conf isn't really that helpful and if a big syntax change comes along
well we have current.html.

it was disabled during p2k16 and no one complained so far
discussed with and ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.423 2016/05/11 21:52:48 deraadt Exp $
d50 1
a50 1
	ripd.conf sasyncd.conf snmpd.conf vm.conf ypldap.conf 
d216 1
a216 1
	    	pax -w -d | gzip -9 > ${DESTDIR}/var/sysmerge/etc.tgz
@


1.423
log
@remove hppa64 port, which we never got going beyond broken single users.
hppa reverse-stack gives us a valuable test case, but most developers don't
have a 2nd one to proceed further with this.
ok kettenis
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.422 2016/04/25 20:38:10 tedu Exp $
a210 1
	touch ${DESTDIR}/var/sysmerge/examplessum
a213 5
	cd ${DESTDIR}/ && \
		grep -h '/etc/examples/' \
		    ${.CURDIR}/../distrib/sets/lists/base/{mi,md.${MACHINE}} | \
		sort | \
		xargs sha256 -h ${DESTDIR}/var/sysmerge/examplessum || true
@


1.422
log
@burn down the systrace
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.421 2016/03/09 16:28:46 deraadt Exp $
d272 1
a272 1
SUBDIR+= etc.hppa etc.hppa64 etc.i386 etc.landisk etc.loongson etc.luna88k
@


1.421
log
@We are done providing support for the vax.
lots of agreement.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.420 2016/02/15 17:19:56 millert Exp $
a156 3
	cd systrace; \
		${INSTALL} -c -o root -g wheel -m 600 usr_sbin_lpd \
		    ${DESTDIR}/etc/systrace; \
@


1.420
log
@When the default mode on /var/log/maillog was changed to 640 the
creation of maillog as part of the distribution-etc-root-var target
was missed.  From Nathanael Rensen
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.419 2016/01/27 20:52:41 sthen Exp $
d277 1
a277 1
SUBDIR+= etc.sgi etc.socppc etc.sparc etc.sparc64 etc.vax etc.zaurus
@


1.419
log
@Add /etc/examples/pkg.conf, generated from mirrors.dat over in www/.
Positive feedback and/or OKs from benno millert jcs aja jasper
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.418 2015/12/07 13:58:48 reyk Exp $
d186 1
a186 1
	${INSTALL} -c -o ${BINOWN} -g wheel -m 600 /dev/null \
@


1.418
log
@Add initial vm.conf(5) example.  But please note that the grammar is
not fixed yet.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.417 2015/12/05 09:55:18 jasper Exp $
d43 2
a44 1
	ntpd.conf printcap rbootd.conf remote sensorsd.conf wsconsctl.conf
@


1.417
log
@add rcscript for vmd

ok mlarkin@@
prompted by deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.416 2015/12/01 07:50:03 deraadt Exp $
d49 1
a49 1
	ripd.conf sasyncd.conf snmpd.conf ypldap.conf 
@


1.416
log
@Send Aviion to same place as Nova II
discussed with jsg
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.415 2015/11/30 23:35:29 jturner Exp $
d59 1
a59 1
	watchdogd wsmoused xdm ypbind ypldap ypserv
@


1.415
log
@Add rebound rc.d script.

ok benno@@ requested by tedu@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.414 2015/11/27 03:53:28 deraadt Exp $
d43 1
a43 4
	ntpd.conf printcap rbootd.conf remote sensorsd.conf
.if ${MACHINE} != "aviion" 
EXAMPLES+= wsconsctl.conf
.endif
d273 1
a273 1
SUBDIR+= etc.alpha etc.amd64 etc.armish etc.armv7 etc.aviion
@


1.414
log
@yppasswd went away
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.413 2015/11/10 04:33:02 jsg Exp $
d59 1
a59 1
	pflogd portmap radiusd rarpd rbootd relayd ripd route6d \
@


1.413
log
@With ikectl now requiring ca specific sections not present in the
general openssl cnf files install the ikeca.cnf file.

ok sthen@@ requested by reyk@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.412 2015/10/23 06:42:53 tedu Exp $
d62 1
a62 1
	watchdogd wsmoused xdm ypbind ypldap yppasswdd ypserv
@


1.412
log
@add BUILDINFO file. currently contains a timestamp. ok deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.411 2015/10/19 19:08:44 schwarze Exp $
d203 1
@


1.411
log
@Delete the empty example file "ftpchroot"; no example is needed.
Move the one useful bit of information contained in the file ("one
user name per line") to the ftpd(8) manual page where it belongs.
OK deraadt@@ sthen@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.410 2015/10/16 15:54:55 schwarze Exp $
d254 2
a255 1
	    cksum -a sha256 INSTALL.`arch -ks` \
@


1.410
log
@The hosts.lpd examples file does not contain a single example.
The file format is so simple that no example is needed.
All relevant documentation is already available
from the proper place, which is the lpd(8) manual.
Consequently, delete the empty file.
OK millert@@ dcoppa@@ beck@@ deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.409 2015/10/03 18:57:11 renato Exp $
d40 1
a40 1
EXAMPLES=chio.conf dhclient.conf dhcpd.conf exports ftpchroot \
@


1.409
log
@Enable eigrpd(8) and eigrpctl(8) in the builds

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.408 2015/09/12 14:48:06 sthen Exp $
d40 1
a40 1
EXAMPLES=chio.conf dhclient.conf dhcpd.conf exports ftpchroot hosts.lpd \
@


1.408
log
@Provide an ftpproxy6 rc script. ftp-proxy can only open one listening socket
at a time, so a second instance of the daemon is required.

OK mikeb stsp ajacoutot
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.407 2015/08/24 10:41:11 ajacoutot Exp $
d49 4
a52 4
EXAMPLES_600=bgpd.conf dvmrpd.conf hostapd.conf iked.conf ipsec.conf \
	ldapd.conf ldpd.conf ospf6d.conf ospfd.conf pf.conf radiusd.conf \
	rc.local rc.securelevel rc.shutdown relayd.conf ripd.conf \
	sasyncd.conf snmpd.conf ypldap.conf 
d55 1
a55 1
RCDAEMONS=amd apmd bgpd bootparamd cron dhcpd dhcrelay dvmrpd ftpd \
@


1.407
log
@/usr/share/sysmerge -> /var/sysmerge

requested by several
discussed with deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.406 2015/08/04 04:24:08 jsg Exp $
d55 7
a61 6
RCDAEMONS=amd apmd bgpd bootparamd cron dhcpd dhcrelay dvmrpd ftpd ftpproxy \
	hostapd hotplugd httpd identd ifstated iked inetd isakmpd iscsid \
	ldapd ldattach ldomd ldpd lockd lpd mopd mountd mrouted nfsd \
	npppd nsd ntpd ospf6d ospfd pflogd portmap radiusd rarpd rbootd relayd \
	ripd route6d rtadvd sasyncd sensorsd slowcgi smtpd sndiod \
	snmpd spamd spamlogd sshd statd syslogd tftpd tftpproxy unbound \
@


1.406
log
@install the radiusd rc.d file
ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.405 2015/08/03 04:19:25 yasuoka Exp $
d213 2
a214 2
	touch ${DESTDIR}/usr/share/sysmerge/etcsum
	touch ${DESTDIR}/usr/share/sysmerge/examplessum
d217 1
a217 1
		xargs sha256 -h ${DESTDIR}/usr/share/sysmerge/etcsum || true
d222 1
a222 1
		xargs sha256 -h ${DESTDIR}/usr/share/sysmerge/examplessum || true
d225 1
a225 1
	    	pax -w -d | gzip -9 > ${DESTDIR}/usr/share/sysmerge/etc.tgz
@


1.405
log
@Place etc/defaults/radiusd.conf and etc/rc.d/radiusd.  Modify etc/rc
to hook the rc script and modify etc/rc.conf to make it disable by
default.  Also add an entry for /etc/radiusd.conf to etc/changelist
and etc/mtree/special.

ok deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.404 2015/07/03 22:05:53 millert Exp $
d58 1
a58 1
	npppd nsd ntpd ospf6d ospfd pflogd portmap rarpd rbootd relayd \
@


1.404
log
@Remove sudoers
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.403 2015/05/18 15:17:29 ajacoutot Exp $
d50 2
a51 2
	ldapd.conf ldpd.conf ospf6d.conf ospfd.conf pf.conf rc.local \
	rc.securelevel rc.shutdown relayd.conf ripd.conf \
@


1.403
log
@Put ntpd.conf in MUTABLE so it's installed with 0644 mode.

discussed by deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.402 2015/05/18 13:48:38 deraadt Exp $
a206 2
	${INSTALL} -c -o root -g wheel -m 440 ../usr.bin/sudo/sudoers \
	    ${DESTDIR}/etc/sudoers
@


1.402
log
@enable ntpd by default at install time.  We use pools and a reliable
constraint to keep them in check.  in the worst case of being on a
dark net, nothing changes.

this is being enabled by default to allow gathering of more operational
information from users.  and if the operational heuristics in ntpd can be
suitable refined, this may stay the default into the future.  if not, ntpd
will become even more awesome along the way.

with reyk rpe
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.401 2015/03/27 18:49:50 schwarze Exp $
d36 1
a36 1
	moduli monthly netstart networks newsyslog.conf \
a99 1
	${INSTALL} -c -o root -g wheel -m 640 ntpd.conf ${DESTDIR}/etc
@


1.401
log
@Move man.conf from /etc to /etc/examples, deleting what's no longer supported.
Discussed with many and OK ajacoutot@@.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.400 2014/12/03 20:13:49 florian Exp $
d100 1
@


1.400
log
@Unhook rtsol(8) and rtsold(8) from the build.
OK deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.399 2014/11/17 18:19:08 deraadt Exp $
d35 1
a35 1
	gettytab group ksh.kshrc locate.rc mailer.conf man.conf \
d41 2
a42 1
	httpd.conf ifstated.conf inetd.conf mixerctl.conf mrouted.conf \
@


1.399
log
@Make /var/tmp a symbolic link to /tmp.  The creation of /var/tmp in the
often space-constrained /var filesystem was a historical mistake.  There
are big implications for the daemons which assume they won't run out of
space, and this is a first step towards trying to improve the situation.

Move /tmp to the same 7-day expiration rules that /var/tmp had.
vi.recover works just as well as before, except on memory filesystems;
indicating that vi should be repaired to write files into homedirs or
something.

done with rpe
ok many
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.398 2014/10/03 19:22:38 deraadt Exp $
d58 1
a58 1
	ripd route6d rtadvd rtsold sasyncd sensorsd slowcgi smtpd sndiod \
@


1.398
log
@sort RCDAEMONS
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.397 2014/10/01 10:11:03 mpi Exp $
d213 1
@


1.397
log
@sliphome et sliplogin(8) are gone.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.396 2014/09/22 00:03:48 rpe Exp $
d54 7
a60 8
RCDAEMONS=	amd apmd bgpd bootparamd cron dhcpd dhcrelay dvmrpd \
		ftpd ftpproxy hostapd hotplugd httpd identd ifstated iked \
		inetd isakmpd ldapd npppd ldattach ldpd lpd mopd mrouted \
		nsd ntpd ospfd ospf6d portmap pflogd rarpd rbootd \
		relayd ripd route6d rtadvd rtsold sasyncd \
		sensorsd slowcgi smtpd snmpd spamd sshd syslogd watchdogd \
		wsmoused xdm ypbind ypldap yppasswdd ypserv nfsd mountd lockd \
		statd spamlogd sndiod tftpd tftpproxy ldomd unbound iscsid
@


1.396
log
@Get rid of intermediate file handling during sumfile creation
by first changing to $DESTDIR and then simply piping to xargs.

OK deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.395 2014/09/15 22:28:58 matthieu Exp $
a201 1
	cd ../usr.sbin/sliplogin && exec ${MAKE} distribution
@


1.395
log
@Remove sendmail tentacles. ok krw@@ ajacoutot@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.394 2014/09/15 20:26:32 rpe Exp $
d217 11
a227 13
	ETCLIST=`mktemp /tmp/_etclist.XXXXXXXXXX` || exit 1; \
	sort ${.CURDIR}/../distrib/sets/lists/etc/{mi,md.${MACHINE}} > $${ETCLIST}; \
	cd ${DESTDIR} && \
		xargs sha256 -h ${DESTDIR}/usr/share/sysmerge/etcsum < $${ETCLIST} || true; \
	rm -f $${ETCLIST}
	EGLIST=`mktemp /tmp/_eglist.XXXXXXXXXX` || exit 1; \
	grep -h '/etc/examples/' ../distrib/sets/lists/base/{mi,md.${MACHINE}} | sort > $${EGLIST}; \
	cd ${DESTDIR} && \
		xargs sha256 -h ${DESTDIR}/usr/share/sysmerge/examplessum < $${EGLIST} || true; \
	rm -f $${EGLIST}
	cd ${DESTDIR} && \
	sort ${.CURDIR}/../distrib/sets/lists/etc/{mi,md.${MACHINE}} | \
	    pax -w -d | gzip -9 > ${DESTDIR}/usr/share/sysmerge/etc.tgz
@


1.394
log
@Ensure proper group ID for chio.conf example.

Noted by and OK ajacoutot@@
Positive feedback halex@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.393 2014/09/05 07:22:29 ajacoutot Exp $
d58 1
a58 1
		relayd ripd route6d rtadvd rtsold sasyncd sendmail \
a192 2
	${INSTALL} -c -o ${BINOWN} -g wheel -m 664 /dev/null \
	    ${DESTDIR}/var/log/sendmail.st
a196 1
	cd ../gnu/usr.sbin/sendmail/cf/cf && exec ${MAKE} distribution
@


1.393
log
@Remove /etc/{hosts,myname} from etc.tgz.
Make the installer create the /etc/hosts template. While here, re-add a
missing 'echo' from install.sh.

ok miod@@ krw@@ halex@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.392 2014/08/29 18:05:39 ajacoutot Exp $
d153 2
a154 1
		    ${DESTDIR}/etc/examples
@


1.392
log
@Move dhclient.conf(5) to examples.

no objections from todd@@ millert@@ rpe@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.391 2014/08/26 20:19:26 rpe Exp $
d35 2
a36 2
	gettytab group hosts ksh.kshrc locate.rc mailer.conf man.conf \
	moduli monthly myname netstart networks newsyslog.conf \
@


1.391
log
@Create etc set during 'make build' and embed it in base set to make
it available during a regular install or upgrade so that it doesn't
need to be independently fetched.

Idea, directions and OK deraadt@@
Feedback and Ok halex@@ and aja@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.390 2014/08/26 19:33:48 robert Exp $
d33 1
a33 1
MUTABLE=changelist csh.cshrc csh.login csh.logout daily dhclient.conf \
d40 3
a42 3
EXAMPLES=chio.conf dhcpd.conf exports ftpchroot hosts.lpd httpd.conf \
	ifstated.conf inetd.conf mixerctl.conf mrouted.conf ntpd.conf \
	printcap rbootd.conf remote sensorsd.conf
@


1.390
log
@usr.sbin
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.389 2014/08/22 19:19:25 deraadt Exp $
d63 1
a63 2
MISETS=	base${OSrev}.tgz comp${OSrev}.tgz \
	man${OSrev}.tgz game${OSrev}.tgz etc${OSrev}.tgz
a216 4

distribution:
	exec ${SUDO} ${MAKE} distribution-etc-root-var
	cd .. && exec ${SUDO} ${MAKE} install
d220 1
a220 1
	sort ../distrib/sets/lists/etc/{mi,md.${MACHINE}} > $${ETCLIST}; \
d229 7
@


1.389
log
@disable use of bind in base; in the base use nsd/unbound instead.
a proper & complete bind port will show up.
discussed with many for years
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.388 2014/07/23 11:49:06 reyk Exp $
d57 1
a57 1
		nginx nsd ntpd ospfd ospf6d portmap pflogd rarpd rbootd \
a206 1
	cd ../usr.sbin/nginx && exec ${MAKE} -f Makefile.bsd-wrapper distribution
@


1.388
log
@httpd.conf can be installed 0644 instead of 0600 like relayd.conf.

ok ajacoutot@@ benno@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.387 2014/07/23 08:01:15 ajacoutot Exp $
d57 1
a57 1
		named nginx nsd ntpd ospfd ospf6d portmap pflogd rarpd rbootd \
a160 15
		${INSTALL} -c -o root -g wheel -m 600 usr_sbin_named \
		    ${DESTDIR}/etc/systrace
	cd bind; \
		${INSTALL} -c -o root -g named -m 640 named-simple.conf \
		    ${DESTDIR}/var/named/etc/named.conf; \
		${INSTALL} -c -o root -g named -m 640 named-*.conf \
		    ${DESTDIR}/var/named/etc; \
		${INSTALL} -c -o root -g wheel -m 644 root.hint \
		    ${DESTDIR}/var/named/etc; \
		${INSTALL} -c -o root -g wheel -m 644 db.localhost \
		    ${DESTDIR}/var/named/standard/localhost; \
		${INSTALL} -c -o root -g wheel -m 644 db.loopback \
		    ${DESTDIR}/var/named/standard/loopback; \
		${INSTALL} -c -o root -g wheel -m 644 db.loopback6.arpa \
		    ${DESTDIR}/var/named/standard/loopback6.arpa
@


1.387
log
@Trailing whitespace.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.386 2014/07/22 17:37:15 reyk Exp $
d40 3
a42 3
EXAMPLES=chio.conf dhcpd.conf exports ftpchroot hosts.lpd ifstated.conf \
	inetd.conf mixerctl.conf mrouted.conf ntpd.conf printcap \
	rbootd.conf remote sensorsd.conf
d48 4
a51 4
EXAMPLES_600=bgpd.conf dvmrpd.conf hostapd.conf httpd.conf iked.conf \
	ipsec.conf ldapd.conf ldpd.conf ospf6d.conf ospfd.conf pf.conf \
	rc.local rc.securelevel rc.shutdown relayd.conf ripd.conf \
	sasyncd.conf snmpd.conf ypldap.conf
@


1.386
log
@Enable httpd(8) in the builds to get more testing, feedback and
improvements.  It is not "finished" but serves static files.

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.385 2014/07/22 17:05:45 deraadt Exp $
d51 1
a51 1
	sasyncd.conf snmpd.conf ypldap.conf 
@


1.385
log
@Repair two deep targets mistakenly called as afterinstall, rather
than distribution. These would modify files in /etc, part of the base
set, but still... that makes it harder to discern their sets placement.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.384 2014/07/16 19:08:54 deraadt Exp $
d48 3
a50 3
EXAMPLES_600=bgpd.conf dvmrpd.conf hostapd.conf iked.conf ipsec.conf \
	ldapd.conf ldpd.conf ospf6d.conf ospfd.conf pf.conf rc.local \
	rc.securelevel rc.shutdown relayd.conf ripd.conf \
d55 1
a55 1
		ftpd ftpproxy hostapd hotplugd identd ifstated iked \
@


1.384
log
@remove ancient unused NOGZIP support
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.383 2014/07/16 15:18:35 okan Exp $
d220 1
@


1.383
log
@prefer ln -f over rm + ln

OK deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.382 2014/07/16 14:34:33 okan Exp $
a64 13

# Use NOGZIP on architectures where the gzip'ing would take too much time
# (pmax or slower :-)).  This way you get only tar'ed snap files and you can
# gzip them on a faster machine
.ifndef NOGZIP
GZIPCMD?=	gzip
GZIPFLAGS?=	-9
GZIPEXT?=	.gz
.else
GZIPCMD=	cat
GZIPFLAGS=
GZIPEXT=
.endif
@


1.382
log
@use /bin/sh instead of /bin/ksh and add cvs id.

OK deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.381 2014/07/16 13:21:33 deraadt Exp $
d189 2
a190 4
	/bin/rm -f ${DESTDIR}/etc/localtime
	ln -s ${TZDIR}/${LOCALTIME} ${DESTDIR}/etc/localtime
	/bin/rm -f ${DESTDIR}/etc/rmt
	ln -s /usr/sbin/rmt ${DESTDIR}/etc/rmt
d271 1
a271 1
	cd ${DESTDIR}/; rm -f sys; ln -s usr/src/sys sys
@


1.381
log
@mixerctl.conf wsconsctl.conf can properly become examples.
As discussed a few days ago with aja
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.378 2014/07/16 12:25:52 deraadt Exp $
d96 1
a96 1
	ksh ttys.pty | cat etc.${MACHINE}/ttys - > ${DESTDIR}/etc/ttys && \
@


1.380
log
@the files listed under BIN1 are not binaries in any way.  Let's call
them what they are: MUTABLE, as in these are the specific files that
admins do edit in /etc
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.379 2014/07/16 12:46:16 deraadt Exp $
d34 9
a42 5
	etc.${MACHINE}/disktab etc.${MACHINE}/login.conf \
	ftpusers gettytab group hosts ksh.kshrc locate.rc \
	mailer.conf man.conf mixerctl.conf moduli monthly motd \
	myname netstart networks newsyslog.conf pf.os protocols \
	rc rc.conf rpc services shells syslog.conf weekly
d44 1
a44 1
MUTABLE+=wsconsctl.conf
d47 1
a47 4
EXAMPLES=chio.conf dhcpd.conf exports ftpchroot hosts.lpd ifstated.conf \
	inetd.conf mrouted.conf ntpd.conf printcap rbootd.conf remote \
	sensorsd.conf

@


1.379
log
@create examples/pf.conf which is a clone of the existing file.  Now
the existing file can start losing... examples...
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.378 2014/07/16 12:25:52 deraadt Exp $
d33 1
a33 1
BIN1=	changelist csh.cshrc csh.login csh.logout daily dhclient.conf \
d40 1
a40 1
BIN1+=	wsconsctl.conf
d94 1
a94 1
	${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 644 ${BIN1} ${DESTDIR}/etc
@


1.378
log
@BIN2 is now just motd; install it direct without the abstractions.  While
there, let's make it operator writeable.  Or let's do a commit changing it
to operator writeable and see the pro and con camps rise up.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.377 2014/07/16 10:25:38 deraadt Exp $
d48 1
a48 1
	ldapd.conf ldpd.conf ospf6d.conf ospfd.conf rc.local \
@


1.377
log
@more lynx bits
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.376 2014/07/15 10:09:36 deraadt Exp $
a51 3
# -rw-rw-r--
BIN2=	motd

d108 1
a108 1
	${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 664 ${BIN2} ${DESTDIR}/etc
@


1.376
log
@BSD.local.dist went away
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.375 2014/07/15 09:27:04 ajacoutot Exp $
a234 1
	cd ../gnu/usr.bin/lynx && exec ${MAKE} -f Makefile.bsd-wrapper distribution
@


1.375
log
@/var/db/sysmerge -> /usr/share/sysmerge

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.374 2014/07/15 09:11:18 deraadt Exp $
a86 2
	    ${DESTDIR}${MTREEDIR}
	${INSTALL} -c -o root -g wheel -m 444 mtree/BSD.local.dist \
@


1.374
log
@correct dir
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.373 2014/07/15 08:28:43 deraadt Exp $
d257 2
a258 2
	touch ${DESTDIR}/var/db/sysmerge/etcsum
	touch ${DESTDIR}/var/db/sysmerge/examplessum
d262 1
a262 1
		xargs sha256 -h ${DESTDIR}/var/db/sysmerge/etcsum < $${ETCLIST} || true; \
d267 1
a267 1
		xargs sha256 -h ${DESTDIR}/var/db/sysmerge/examplessum < $${EGLIST} || true; \
@


1.373
log
@sysctl.conf moves to etc/examples
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.372 2014/07/14 09:11:27 ajacoutot Exp $
d104 1
a104 1
	cat sysctl.conf etc.${MACHINE}/sysctl.conf > \
@


1.372
log
@/etc/rc already takes care of creating /var/run/utmp.

ok deraadt@@ giovanni@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.371 2014/07/14 09:04:02 deraadt Exp $
d104 5
a108 4
	cat sysctl.conf etc.${MACHINE}/sysctl.conf > ${DESTDIR}/etc/sysctl.conf && \
	    chown ${BINOWN} ${DESTDIR}/etc/sysctl.conf && \
	    chgrp ${BINGRP} ${DESTDIR}/etc/sysctl.conf && \
	    chmod 644 ${DESTDIR}/etc/sysctl.conf
@


1.371
log
@rc.{local,securelevel,shutdown} become examples.  If versions of them
are created in /etc, they are executed (they used to be sourced) to
avoid polluting the rc variable space.  The powerdown= and securelevel=
features are removed; they are likely only used by 2 people.  the
secureleve is now always raised; this is the only sensible default.
ok ajacoutot
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.370 2014/07/13 13:53:36 rpe Exp $
a231 2
	${INSTALL} -c -o ${BINOWN} -g utmp -m 664 /dev/null \
	    ${DESTDIR}/var/run/utmp
@


1.370
log
@- move the ntpd.conf file to examples directory
- move it from BIN1 to EXAMPLES in src/etc/Makefile
- change the installer to create the file instead of editing it
- add a '+' to the corresponding changelist entry

suggested by and OK deraadt@@
OK for the installer change krw@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.369 2014/07/13 13:01:48 ajacoutot Exp $
d33 2
a34 1
BIN1=	changelist csh.cshrc csh.login csh.logout daily \
d36 6
a41 5
	man.conf monthly motd myname netstart networks \
	newsyslog.conf protocols rc rc.conf rc.local \
	rc.securelevel rc.shutdown rpc services shells syslog.conf \
	weekly etc.${MACHINE}/login.conf etc.${MACHINE}/disktab \
	dhclient.conf mailer.conf moduli pf.os mixerctl.conf
d48 3
a50 6
	ldapd.conf ldpd.conf ospf6d.conf ospfd.conf relayd.conf ripd.conf \
	sasyncd.conf snmpd.conf ypldap.conf

.if ${MACHINE} != "aviion" 
BIN1+=	wsconsctl.conf
.endif
@


1.369
log
@Mismatch between the sets list and what's in DESTDIR should not be fatal
to sysmerge sum files generation.

discussed by deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.368 2014/07/13 12:14:37 ajacoutot Exp $
d39 1
a39 1
	dhclient.conf mailer.conf ntpd.conf moduli pf.os mixerctl.conf
d42 2
a43 1
	inetd.conf mrouted.conf printcap rbootd.conf remote sensorsd.conf
@


1.368
log
@Install some config files with mode 0600 as they were before the move to
/etc/examples.

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.367 2014/07/13 12:07:40 claudio Exp $
d263 1
a263 1
		xargs sha256 -h ${DESTDIR}/var/db/sysmerge/etcsum < $${ETCLIST}
d268 1
a268 1
		xargs sha256 -h ${DESTDIR}/var/db/sysmerge/examplessum < $${EGLIST}; \
@


1.367
log
@Add iscsid to the rc.d files to install
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.366 2014/07/12 22:05:16 ajacoutot Exp $
d41 6
a46 6
EXAMPLES=bgpd.conf chio.conf dhcpd.conf dvmrpd.conf exports ftpchroot \
	hostapd.conf hosts.lpd ifstated.conf iked.conf \
	inetd.conf ipsec.conf ldapd.conf ldpd.conf mrouted.conf \
	ospf6d.conf ospfd.conf printcap rbootd.conf relayd.conf \
	remote ripd.conf sasyncd.conf sensorsd.conf snmpd.conf \
	ypldap.conf
d168 2
@


1.366
log
@egsum -> examplessum to make it more obvious.

req. by deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.365 2014/07/12 22:03:44 ajacoutot Exp $
d63 1
a63 1
		statd spamlogd sndiod tftpd tftpproxy ldomd unbound
@


1.365
log
@Simplify checksum generation for sysmerge.

no objection from deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.364 2014/07/12 16:00:27 ajacoutot Exp $
d257 1
a257 1
	touch ${DESTDIR}/var/db/sysmerge/egsum
d266 1
a266 1
		xargs sha256 -h ${DESTDIR}/var/db/sysmerge/egsum < $${EGLIST}; \
@


1.364
log
@cksum -> sha256
That means sysmerge(8) may be a little more interactive the next time you
run it.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.363 2014/07/12 15:38:42 ajacoutot Exp $
d258 2
a259 4
	TMPSUM=`mktemp /tmp/_etcsum.XXXXXXXXXX` || exit 1; \
	EGSUM=`mktemp /tmp/_egsum.XXXXXXXXXX` || exit 1; \
	sort ../distrib/sets/lists/etc/{mi,md.${MACHINE}} > $${TMPSUM}; \
	grep -h '/etc/examples/' ../distrib/sets/lists/base/{mi,md.${MACHINE}} > $${EGSUM}; \
d261 4
a264 1
		xargs sha256 < $${TMPSUM} > ${DESTDIR}/var/db/sysmerge/etcsum; \
d266 2
a267 2
		xargs sha256 < $${EGSUM} > ${DESTDIR}/var/db/sysmerge/egsum; \
	rm -f $${TMPSUM} $${EGSUM}
@


1.363
log
@Create the examples checksum for sysmerge at release time.

"move ahead" deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.362 2014/07/12 03:52:39 deraadt Exp $
d263 1
a263 1
		xargs cksum < $${TMPSUM} > ${DESTDIR}/var/db/sysmerge/etcsum; \
@


1.362
log
@move exports, ftpchroot, hosts.lpd, printcap, and remote to the examples
directory.
ok robert
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.361 2014/07/11 21:30:21 deraadt Exp $
d257 1
d259 1
d261 1
d264 3
a266 1
	rm -f $${TMPSUM}
@


1.361
log
@oops, nsd.conf cannot be an example... yet
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.360 2014/07/11 21:20:10 deraadt Exp $
d34 12
a45 13
	exports ftpusers ftpchroot gettytab group hosts hosts.lpd \
	ksh.kshrc locate.rc man.conf monthly motd myname \
	netstart networks newsyslog.conf printcap protocols \
	rc rc.conf rc.local rc.securelevel rc.shutdown \
	remote rpc services shells syslog.conf weekly \
	etc.${MACHINE}/login.conf \
	etc.${MACHINE}/disktab dhclient.conf mailer.conf ntpd.conf \
	moduli pf.os mixerctl.conf

EXAMPLES=bgpd.conf chio.conf dhcpd.conf dvmrpd.conf hostapd.conf \
	ifstated.conf iked.conf inetd.conf ipsec.conf ldapd.conf ldpd.conf \
	mrouted.conf ospf6d.conf ospfd.conf rbootd.conf \
	relayd.conf ripd.conf sasyncd.conf sensorsd.conf snmpd.conf \
@


1.360
log
@Move more files into the examples directory...
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.359 2014/07/11 17:10:30 henning Exp $
d45 1
a45 1
	mrouted.conf nsd.conf ospf6d.conf ospfd.conf rbootd.conf \
d118 1
@


1.359
log
@my pleasure to move bgpd.conf to examples. ok theo
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.358 2014/07/11 16:59:03 deraadt Exp $
d33 3
a35 3
BIN1=	changelist csh.cshrc csh.login csh.logout daily dhcpd.conf \
	exports ftpusers ftpchroot gettytab group hosts hosts.lpd inetd.conf \
	ksh.kshrc locate.rc man.conf monthly motd mrouted.conf myname \
d37 1
a37 1
	rbootd.conf rc rc.conf rc.local rc.securelevel rc.shutdown \
d41 1
a41 1
	moduli pf.os sensorsd.conf mixerctl.conf
d43 5
a47 2
EXAMPLES=bgpd.conf chio.conf dvmrpd.conf hostapd.conf ifstated.conf ldpd.conf \
	ospf6d.conf ospfd.conf
a116 1
	${INSTALL} -c -o root -g wheel -m 600 ripd.conf ${DESTDIR}/etc
a117 8
	${INSTALL} -c -o root -g wheel -m 600 relayd.conf ${DESTDIR}/etc
	${INSTALL} -c -o root -g wheel -m 600 iked.conf ${DESTDIR}/etc
	${INSTALL} -c -o root -g wheel -m 600 ipsec.conf ${DESTDIR}/etc
	${INSTALL} -c -o root -g wheel -m 600 sasyncd.conf ${DESTDIR}/etc
	${INSTALL} -c -o root -g wheel -m 600 snmpd.conf ${DESTDIR}/etc
	${INSTALL} -c -o root -g wheel -m 600 ldapd.conf ${DESTDIR}/etc
	${INSTALL} -c -o root -g wheel -m 600 ypldap.conf ${DESTDIR}/etc
	${INSTALL} -c -o root -g _nsd -m 640 nsd.conf ${DESTDIR}/var/nsd/etc
@


1.358
log
@handle the movement of the first few files to /etc/examples.  They are
still managed by changelist, as long as the marker is + and they are in
the correct distrib/sets/* files
Bit of help from ajacoutot
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.357 2014/04/29 21:30:20 dcoppa Exp $
d43 1
a43 1
EXAMPLES=chio.conf dvmrpd.conf hostapd.conf ifstated.conf ldpd.conf \
a113 1
	${INSTALL} -c -o root -g wheel -m 600 bgpd.conf ${DESTDIR}/etc
@


1.357
log
@
tedu ~/.klogin

ok henning@@ deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.356 2014/04/24 15:05:10 tedu Exp $
d41 4
a44 1
	moduli pf.os sensorsd.conf ifstated.conf mixerctl.conf
a114 2
	${INSTALL} -c -o root -g wheel -m 600 ospfd.conf ${DESTDIR}/etc
	${INSTALL} -c -o root -g wheel -m 600 ospf6d.conf ${DESTDIR}/etc
a115 2
	${INSTALL} -c -o root -g wheel -m 600 dvmrpd.conf ${DESTDIR}/etc
	${INSTALL} -c -o root -g wheel -m 600 ldpd.conf ${DESTDIR}/etc
a116 2
	${INSTALL} -c -o root -g operator -m 644 chio.conf ${DESTDIR}/etc
	${INSTALL} -c -o root -g wheel -m 600 hostapd.conf ${DESTDIR}/etc
d173 3
@


1.356
log
@rm rwhod tentacles
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.355 2014/04/23 09:56:56 ajacoutot Exp $
a133 2
		${INSTALL} -c -o root -g wheel -m 600 dot.klogin \
		    ${DESTDIR}/root/.klogin; \
@


1.355
log
@Remove krb5 bits from rc(8).

ok reyk@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.354 2014/04/22 10:24:29 reyk Exp $
d55 1
a55 1
		relayd ripd route6d rtadvd rtsold rwhod sasyncd sendmail \
@


1.354
log
@Remove kerberosV from etc/

ok deraadt@@ guenther@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.353 2014/04/20 18:06:37 tedu Exp $
d57 2
a58 3
		wsmoused xdm ypbind ypldap yppasswdd ypserv kdc kadmind \
		kpasswdd nfsd mountd lockd statd spamlogd sndiod \
		tftpd tftpproxy ldomd ipropd_master ipropd_slave unbound
@


1.353
log
@hosts.equiv is a ghost from bsd past
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.352 2014/04/11 22:51:51 miod Exp $
a164 3
	cd kerberosV; \
		${INSTALL} -c -o root -g wheel -m 644 krb5.conf.example \
		    ${DESTDIR}/etc/kerberosV
@


1.352
log
@Move build machinery for libcrypto from libssl/crypto to libcrypto, as well
as configuration files; split manpages and .pc files between libcrypto and
libssl.
No functional change, only there to make engineering easier, and libcrypto
sources are still found in libssl/src/crypto at the moment.

ok reyk@@, also discussed with deraadt@@ beck@@ and the usual crypto suspects.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.351 2014/03/26 20:17:00 tedu Exp $
a108 1
	${INSTALL} -c -o root -g wheel -m 600 hosts.equiv ${DESTDIR}/etc
@


1.351
log
@end experimental login.conf template support. one file per machine.
ok deraadt millert
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.350 2014/03/24 20:40:03 sthen Exp $
d249 1
a249 1
	cd ../lib/libssl && exec ${MAKE} distribution
@


1.350
log
@sum -> cksum, ok deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.349 2014/03/18 22:36:29 miod Exp $
d39 1
a107 4
	awk -f mklogin.conf `test -f etc.${MACHINE}/login.conf.overrides && echo etc.${MACHINE}/login.conf.overrides` < login.conf.in > \
	    ${DESTDIR}/etc/login.conf && \
	    chown ${BINOWN}:${BINGRP} ${DESTDIR}/etc/login.conf && \
	    chmod 644 ${DESTDIR}/etc/login.conf
@


1.349
log
@Retire hp300, mvme68k and mvme88k ports. These ports have no users, keeping
this hardware alive is becoming increasingly difficult, and I should heed the
message sent by the three disks which have died on me over the last few days.

Noone sane will mourn these ports anyway. So long, and thanks for the fish.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.348 2014/03/17 17:07:45 deraadt Exp $
d302 1
a302 1
	    sum -a sha256 INSTALL.`arch -ks` \
@


1.348
log
@the userland ppp(9) code goes awa.  Having too much ppp choice in the
tree results in one-true-ppp not coming into existance.  This code is
essentially un-audited and quite dangerous.
ok claudio sthen
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.347 2014/03/15 22:13:36 sthen Exp $
d42 1
a42 2
.if ${MACHINE} != "aviion" && ${MACHINE} != "mvme68k" && \
    ${MACHINE} != "mvme88k"
d322 1
a322 1
SUBDIR+= etc.alpha etc.amd64 etc.armish etc.armv7 etc.aviion etc.hp300
d324 1
a324 1
SUBDIR+= etc.macppc etc.mvme68k etc.mvme88k etc.octeon
@


1.347
log
@Enable Unbound in base, ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.346 2014/03/13 10:11:01 florian Exp $
a185 8
		    ${DESTDIR}/etc/ppp; \
		${INSTALL} -c -o root -g wheel -m 600 ppp.conf.sample \
		    ${DESTDIR}/etc/ppp; \
		${INSTALL} -c -o root -g wheel -m 644 ppp.linkup.sample \
		    ${DESTDIR}/etc/ppp; \
		${INSTALL} -c -o root -g wheel -m 644 ppp.linkdown.sample \
		    ${DESTDIR}/etc/ppp; \
		${INSTALL} -c -o root -g wheel -m 644 ppp.secret.sample \
@


1.346
log
@Unhook httpd(8) from build; etc bits
OK krw@@, gilles@@, lteo@@, tedu@@, todd@@, benno@@, sthen@@
"The time is right." and much help getting the show on
the road deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.345 2014/01/25 20:23:53 deraadt Exp $
d59 1
a59 1
		tftpd tftpproxy ldomd ipropd_master ipropd_slave
d134 1
@


1.345
log
@delete junk file
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.344 2014/01/24 03:36:07 deraadt Exp $
d52 1
a52 1
		ftpd ftpproxy hostapd hotplugd httpd identd ifstated iked \
a259 1
	cd ../usr.sbin/httpd && exec ${MAKE} -f Makefile.bsd-wrapper distribution
@


1.344
log
@sort the SHA256 file
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.343 2014/01/10 14:06:18 deraadt Exp $
a178 2
		    ${DESTDIR}/etc/ppp; \
		${INSTALL} -c -o root -g wheel -m 600 options.leaf \
@


1.343
log
@be a bit more careful
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.342 2014/01/10 03:53:44 deraadt Exp $
d313 2
a314 1
	    sum -a sha256 INSTALL.`arch -ks` ${ALL_KERNELS} ${MDEXT} ${MISETS} > SHA256
@


1.342
log
@be forceful with removing the SHA256 file
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.341 2014/01/09 20:15:55 deraadt Exp $
d308 1
a308 1
	cd ${RELEASEDIR}; rm -f SHA256
@


1.341
log
@remove the SHA256 file as soon as we start creating sets
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.340 2014/01/09 18:51:30 deraadt Exp $
d308 1
a308 1
	cd ${RELEASEDIR}; rm SHA256
@


1.340
log
@install signify keys
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.339 2013/12/15 17:40:45 tedu Exp $
d308 1
@


1.339
log
@remove popa3d etc tendrils
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.338 2013/11/26 20:11:51 sthen Exp $
d196 3
@


1.338
log
@install sample nsd config file to /var/nsd/etc not /etc, spotted by/ok deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.337 2013/11/03 18:28:34 deraadt Exp $
d58 1
a58 1
		kpasswdd nfsd mountd lockd statd spamlogd sndiod popa3d \
@


1.337
log
@ugly spaces
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.336 2013/10/10 00:59:18 dtucker Exp $
d133 1
a133 1
	${INSTALL} -c -o root -g _nsd -m 640 nsd.conf ${DESTDIR}/etc
@


1.336
log
@Move moduli generation to usr.bin/ssh/moduli-gen and keep track of
the fragments separately.  "No substantive objection" djm@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.335 2013/09/04 16:53:38 patrick Exp $
d29 1
a29 1
	
a326 1
	
@


1.335
log
@Beagle has been replaced by armv7.

ok rapha@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.334 2013/08/09 16:24:54 ajacoutot Exp $
a322 23

# Because the moduli sizes > 4096 are not commonly used, and because they
# take a long time to generate we update the <= 4096 ones more frequently.
DHSIZE=1024 1536 2048 3072 4096
update-moduli: moduli.6144 moduli.8192
	( \
		echo -n '#    $$Open'; echo 'BSD$$'; \
		echo '# Time Type Tests Tries Size Generator Modulus'; \
		( for i in ${DHSIZE}; do \
			ssh-keygen -b $$i -G /dev/stdout; \
		done) | \
		ssh-keygen -T /dev/stdout ; \
		cat moduli.6144 ; \
		cat moduli.8192 ; \
	) > moduli

# These two will probably take days, so if you're going to regen them
# run it in a tmux session or something.
moduli.6144:
	ssh-keygen -b 6144 -G /dev/stdout | ssh-keygen -T moduli.6144

moduli.8192:
	ssh-keygen -b 8192 -G /dev/stdout | ssh-keygen -T moduli.8192
@


1.334
log
@Add rc.d(8) scripts for ipropd-master and ipropd-slave.

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.333 2013/07/10 05:12:15 ajacoutot Exp $
d352 1
a352 1
SUBDIR+= etc.alpha etc.amd64 etc.armish etc.aviion etc.beagle etc.hp300
@


1.333
log
@Ship a simpler krb5.conf which logs to syslog(3) by default.
Remove useless README -- the info(1) and man(1) pages contains all the
required information.

ok dcoppa@@ robert@@ beck@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.332 2013/06/01 14:06:20 naddy Exp $
d59 1
a59 1
		tftpd tftpproxy ldomd
@


1.332
log
@hook up slowcgi to the tree, including /etc glue and a sample configuration
snippet; ok florian@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.331 2013/03/31 21:46:53 espie Exp $
a169 2
		${INSTALL} -c -o root -g wheel -m 644 README \
		    ${DESTDIR}/etc/kerberosV; \
@


1.331
log
@a default .cvsrc for skel.
okay deraadt@@
some other people like that too.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.330 2013/03/26 18:06:00 jasper Exp $
d56 4
a59 4
		sensorsd smtpd snmpd spamd sshd syslogd watchdogd wsmoused \
		xdm ypbind ypldap yppasswdd ypserv kdc kadmind kpasswdd nfsd \
		mountd lockd statd spamlogd sndiod popa3d tftpd tftpproxy \
		ldomd
@


1.330
log
@hookup octeon

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.329 2013/03/25 17:22:11 deraadt Exp $
d147 2
d165 2
@


1.329
log
@the unused palm code goes away.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.328 2013/02/01 09:06:40 phessler Exp $
d351 2
a352 2
SUBDIR+= etc.hppa etc.hppa64 etc.i386 etc.landisk etc.loongson etc.luna88k 
SUBDIR+= etc.macppc etc.mvme68k etc.mvme88k
@


1.328
log
@rev 1.318 made this MI parallel-make clean, however it inadvertantly
changed the build order.

Have release-sets depend on the kernels target, which restores the
order.

OK espie@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.327 2013/01/11 05:18:50 miod Exp $
d352 1
a352 1
SUBDIR+= etc.macppc etc.mvme68k etc.mvme88k etc.palm
@


1.327
log
@typo
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.326 2012/11/04 17:12:36 kettenis Exp $
d312 1
a312 1
release-sets: distribution
@


1.326
log
@Script for ldomd(8).

ok dcoppa@@, deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.325 2012/10/05 00:16:35 dtucker Exp $
d322 1
a322 1
# Becasue the moduli sizes > 4096 are not commonly used, and because they
@


1.325
log
@Add targets for the 6k and 8k bit moduli components
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.324 2012/09/20 12:51:43 yasuoka Exp $
d58 2
a59 1
		mountd lockd statd spamlogd sndiod popa3d tftpd tftpproxy
@


1.324
log
@Enable npppd and npppctl in default build.  Add npppd to rc and
install sample configs to /etc/.

ok claudio deraadt henning mcbride
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.323 2012/08/29 04:04:15 dtucker Exp $
d335 8
@


1.323
log
@Make the update-moduli rule append the 6kbit and 8kbit params so that we
can trivially regen the <=4k bit ones.  ok djm@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.322 2012/08/23 07:02:49 todd Exp $
d53 6
a58 6
		inetd isakmpd ldapd ldattach ldpd lpd mopd mrouted named nginx \
		nsd ntpd ospfd ospf6d portmap pflogd rarpd rbootd relayd ripd \
		route6d rtadvd rtsold rwhod sasyncd sendmail sensorsd smtpd \
		snmpd spamd sshd syslogd watchdogd wsmoused xdm ypbind ypldap \
		yppasswdd ypserv kdc kadmind kpasswdd nfsd mountd lockd statd \
		spamlogd sndiod popa3d tftpd tftpproxy
d263 1
@


1.322
log
@enter etc.beagle so MAKEDEV.8 can be generated properly during builds
prompted by deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.321 2012/08/23 06:17:58 deraadt Exp $
d320 2
d323 1
a323 1
update-moduli:
d330 3
a332 1
		ssh-keygen -T /dev/stdout \
@


1.321
log
@stop installing the etc/afs
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.320 2012/08/20 12:37:52 dlg Exp $
d336 2
a337 2
SUBDIR+= etc.alpha etc.amd64 etc.armish etc.aviion etc.hp300 etc.hppa
SUBDIR+= etc.hppa64 etc.i386 etc.landisk etc.loongson etc.luna88k 
@


1.320
log
@wire up the bits for tftp-proxy, which is called tftpproxy from rc.d's
point of view.

mostly ok sthen@@ ajacoutot@@, who were discussing the feng shui of the
start_daemons chunk
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.319 2012/06/20 18:33:58 matthew Exp $
a192 11
	cd afs; \
		${INSTALL} -c -o root -g wheel -m 644 afsd.conf \
		    ${DESTDIR}/etc/afs; \
		${INSTALL} -c -o root -g wheel -m 644 ThisCell \
		    ${DESTDIR}/etc/afs; \
		${INSTALL} -c -o root -g wheel -m 644 CellServDB \
		    ${DESTDIR}/etc/afs; \
		${INSTALL} -c -o root -g wheel -m 644 SuidCells \
		    ${DESTDIR}/etc/afs; \
		${INSTALL} -c -o root -g wheel -m 644 README \
		    ${DESTDIR}/etc/afs
d338 1
a338 1
SUBDIR+= etc.macppc etc.mvme68k etc.mvme88k etc.palm 
@


1.319
log
@Delete some more SUBDIR += mac68k.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.318 2012/04/13 10:47:16 espie Exp $
d58 1
a58 1
		spamlogd sndiod popa3d tftpd
@


1.318
log
@clean-up release dependency tree, so that release is "MI parallel-make clean"
(yeah, the md parts are NOT, not yet).

okay miod@@, deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.317 2012/04/12 22:06:59 espie Exp $
d349 1
a349 1
SUBDIR+= etc.mac68k etc.macppc etc.mvme68k etc.mvme88k etc.palm 
@


1.317
log
@NOOBJ -> zap unneeded ${.CURDIR} for clarity.
ok miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.316 2012/04/01 18:32:51 deraadt Exp $
d318 4
a321 1
release: distribution kernels release-sets distrib sha
@


1.316
log
@btd went away
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.315 2012/03/16 22:42:51 sthen Exp $
d79 1
a79 1
	${INSTALL} -c -o root -g wheel -m 600 ${.CURDIR}/mtree/special \
d81 1
a81 1
	${INSTALL} -c -o root -g wheel -m 444 ${.CURDIR}/mtree/4.4BSD.dist \
d83 1
a83 1
	${INSTALL} -c -o root -g wheel -m 444 ${.CURDIR}/mtree/BSD.local.dist \
d85 1
a85 1
	${INSTALL} -c -o root -g wheel -m 444 ${.CURDIR}/mtree/BSD.x11.dist \
d107 1
a107 1
	awk -f ${.CURDIR}/mklogin.conf `test -f etc.${MACHINE}/login.conf.overrides && echo etc.${MACHINE}/login.conf.overrides` < ${.CURDIR}/login.conf.in > \
d312 1
a312 1
	cd ${.CURDIR}/../distrib/sets && exec ${SUDO} sh maketars ${OSrev}
d325 1
a325 1
	cd ${.CURDIR}/../distrib && \
@


1.315
log
@install the rc.d script for tftpd, ok dlg@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.314 2012/02/19 11:34:36 robert Exp $
d51 1
a51 1
RCDAEMONS=	amd apmd bgpd bootparamd btd cron dhcpd dhcrelay dvmrpd \
@


1.314
log
@enable nginx
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.313 2012/02/09 04:39:32 david Exp $
d58 1
a58 1
		spamlogd sndiod popa3d
@


1.313
log
@install popa3d script; ok robert@@ deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.312 2011/12/09 14:52:26 ratchov Exp $
d53 2
a54 2
		inetd isakmpd ldapd ldattach ldpd lpd mopd mrouted named nsd \
		ntpd ospfd ospf6d portmap pflogd rarpd rbootd relayd ripd \
d273 1
@


1.312
log
@Handle aucat -> sndiod name change, and enable sndiod by default. Mostly
from ajacoutot@@.

ok deraadt ajacoutot
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.311 2011/10/29 14:29:33 ajacoutot Exp $
d58 1
a58 1
		spamlogd sndiod
@


1.311
log
@Add a sample mixerctl.conf(5).
Pretty terse for now but will eventually come with some more complex
examples when ratchov@@ finishes some ongoing work on aucat(1).

ok ratchov@@ jmc@@ deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.310 2011/10/06 20:49:25 deraadt Exp $
d51 1
a51 1
RCDAEMONS=	amd apmd aucat bgpd bootparamd btd cron dhcpd dhcrelay dvmrpd \
d58 1
a58 1
		spamlogd
@


1.310
log
@ccd goes to the attic
discussed with jsing and millert
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.309 2011/07/22 09:30:54 espie Exp $
d40 1
a40 1
	moduli pf.os sensorsd.conf ifstated.conf
@


1.309
log
@unify kernel building on various platforms.
feedback from miod@@ and deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.308 2011/07/17 00:28:04 david Exp $
d33 1
a33 1
BIN1=	changelist ccd.conf csh.cshrc csh.login csh.logout daily dhcpd.conf \
@


1.308
log
@add ospfd ospf6d to RCDAEMONS so they get installed; ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.307 2011/07/08 20:21:01 ajacoutot Exp $
d9 2
d15 15
d315 1
a315 1
	    sum -a sha256 INSTALL.`arch -ks` ${MDEXT} ${MISETS} > SHA256
d339 3
a341 1
	release allarchs kernels release-sets m4 install-mtree
@


1.307
log
@Sort RC_DAEMONS.

ok robert@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.306 2011/07/08 02:15:34 robert Exp $
d35 1
a35 1
		ftpd  ftpproxy hostapd hotplugd httpd identd ifstated iked \
d37 5
a41 4
		ntpd portmap pflogd rarpd rbootd relayd ripd route6d rtadvd \
		rtsold rwhod sasyncd sendmail sensorsd smtpd snmpd spamd sshd \
		syslogd watchdogd wsmoused xdm ypbind ypldap yppasswdd ypserv \
		kdc kadmind kpasswdd nfsd mountd lockd statd spamlogd
@


1.306
log
@Switch amd and spamlogd to rc scripts and make sure that the
rc_pre() functions are returning correctly. This change
also simplyfies the changes because false || return 1 can be replaced
with false if that's the last call. thanks halex@@!
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.305 2011/07/08 00:54:04 ajacoutot Exp $
d34 7
a40 7
RCDAEMONS=	amd apmd aucat bgpd bootparamd btd cron dhcpd dhcrelay dvmrpd ftpd  \
		ftpproxy hostapd hotplugd httpd identd ifstated iked inetd isakmpd \
		ldapd ldattach ldpd lpd mopd mrouted named nsd ntpd portmap pflogd \
		rarpd rbootd relayd ripd route6d rtadvd rtsold rwhod sasyncd \
		sendmail sensorsd smtpd snmpd spamd sshd syslogd watchdogd wsmoused \
		xdm ypbind ypldap yppasswdd ypserv kdc kadmind kpasswdd nfsd mountd \
		lockd statd spamlogd
@


1.305
log
@Add the nfs startup scripts.

ok robert@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.304 2011/07/08 00:50:09 robert Exp $
d34 1
a34 1
RCDAEMONS=	apmd aucat bgpd bootparamd btd cron dhcpd dhcrelay dvmrpd ftpd  \
d40 1
a40 1
		lockd statd
@


1.304
log
@switch pflogd to rc.d
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.303 2011/07/07 23:29:45 robert Exp $
d39 2
a40 1
		xdm ypbind ypldap yppasswdd ypserv
@


1.303
log
@add scripts for aucat and spamd and switch rc to use them
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.302 2011/07/07 22:30:37 robert Exp $
d36 1
a36 1
		ldapd ldattach ldpd lpd mopd mrouted named nsd ntpd portmap \
@


1.302
log
@add a script for btd and replace the rc parts
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.301 2011/07/07 22:23:56 robert Exp $
d34 2
a35 2
RCDAEMONS=	apmd bgpd bootparamd btd cron dhcpd dhcrelay dvmrpd ftpd ftpproxy \
		hostapd hotplugd httpd identd ifstated iked inetd isakmpd \
d38 1
a38 1
		sendmail sensorsd smtpd snmpd sshd syslogd watchdogd wsmoused \
@


1.301
log
@add wsmoused script and switch xdm and wsmoused in rc
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.300 2011/07/07 21:00:59 deraadt Exp $
d34 1
a34 1
RCDAEMONS=	apmd bgpd bootparamd cron dhcpd dhcrelay dvmrpd ftpd ftpproxy \
@


1.300
log
@timed's time is up.  use ntpd(8).  Even our own fossil developers
switched a while back.
ok miod, kettenis
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.299 2011/07/07 02:22:11 ajacoutot Exp $
d38 2
a39 2
		sendmail sensorsd smtpd snmpd sshd syslogd watchdogd ypbind \
		ypldap yppasswdd ypserv
@


1.299
log
@Install a default ypldap.conf(5) based on the one from the man page
(which we remove now) with a couple of tweaks; use the same base DN and
admin user as our default ldap.conf(5).
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.298 2011/07/07 01:52:57 robert Exp $
d35 5
a39 5
		hostapd hotplugd httpd identd ifstated iked inetd isakmpd ldapd \
		ldattach ldpd lpd mopd mrouted named nsd ntpd portmap rarpd \
		rbootd relayd  ripd route6d rtadvd rtsold rwhod sasyncd sendmail \
		sensorsd smtpd snmpd sshd syslogd timed watchdogd ypbind ypldap \
		yppasswdd ypserv
@


1.298
log
@add scripts for portmap and the yp daemons
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.297 2011/07/06 18:55:36 robert Exp $
d112 1
@


1.297
log
@Add rc.d(8) script for the system daemons that are restartable.
From now on rc(8) is going to call these scripts to start them up on boot
in the same order than before.
In addition the inetd and rwhod variables in rc.conf are deprecated so that
inetd_flags and rwhod_flags should be used. The old flags are still going
to be used for some time to allow users to switch.
There are more rc modifications to come later so let's put this in so
we can base more work on this.
It is important to mention that you can still keep using rc.local just
like the way you did before, and we have no intention to remove that either.

I'd also like to thank ajacoutot@@, halex@@, sthen@@ and schwarze@@ for working
on this with me.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.296 2011/07/06 18:32:58 miod Exp $
d36 4
a39 3
		ldattach ldpd lpd mopd mrouted named nsd ntpd rarpd rbootd relayd \
		ripd route6d rtadvd rtsold rwhod sasyncd sendmail sensorsd smtpd \
		snmpd sshd syslogd timed watchdogd
@


1.296
log
@Remove support for non-microVAX, non-VAXstation, non-VXT hardware in the
VAX port. This means, 11/7xx, VAX6000 and VAX8x00 systems, as well as SBI,
CMI, BI, XMI and MASSBUS drivers.
Most of these files were not being compiled or kept in compilable state over
the years anyway.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.295 2011/04/17 21:26:38 schwarze Exp $
d33 7
d259 2
@


1.295
log
@Switch from the old shell script /etc/security
to the new Perl script /usr/libexec/security.
The new script was tested by sthen@@ and ajacoutot@@.
Committing now due to repeated prodding from deraadt@@.
In case problems show up, they will be fixed in tree.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.294 2010/10/26 20:56:03 robert Exp $
a35 2
PCS=	pcs750.bin

a235 6
.if ${MACHINE} == "vax"
	uudecode -p etc.vax/${PCS}.uu > ${DESTDIR}/${PCS} && \
	    chown ${BINOWN} ${DESTDIR}/${PCS} && \
	    chgrp ${BINGRP} ${DESTDIR}/${PCS} && \
	    chmod 644 ${DESTDIR}/${PCS}
.endif
@


1.294
log
@Add a simple 'rc' system to base in order to start/stop/restart/reload
services installed by the ports system (for now).
It only uses pgrep/pkill to handle these processes. A manual page will
come later.

'put it in' deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.293 2010/10/18 14:54:47 deraadt Exp $
d21 1
a21 1
	remote rpc security services shells syslog.conf weekly \
@


1.293
log
@no more misc set
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.292 2010/10/08 23:35:42 david Exp $
d258 3
@


1.292
log
@install nsd.conf; ok jakob@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.291 2010/09/22 13:01:10 deraadt Exp $
d33 1
a33 1
MISETS=	base${OSrev}.tgz comp${OSrev}.tgz misc${OSrev}.tgz \
@


1.291
log
@Kill msgs.  Noone uses it, and it has a longjmp in it.
Lots of agreement.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.290 2010/06/29 17:17:53 nicm Exp $
d106 1
@


1.290
log
@No more phones(5), /etc/phones, or dial up bits in remote.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.289 2010/06/07 10:09:05 reyk Exp $
a234 2
	${INSTALL} -c -o daemon -g staff -m 664 /dev/null \
	    ${DESTDIR}/var/msgs/bounds
@


1.289
log
@add iked.conf default configuration file example.

ok jsg@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.288 2010/06/05 17:29:14 martinh Exp $
d19 1
a19 1
	netstart networks newsyslog.conf phones printcap protocols \
@


1.288
log
@Install a default ldapd.conf, and standard schema files in /etc/ldap.

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.287 2010/03/23 21:31:02 espie Exp $
d101 1
@


1.287
log
@install mtree always
okay deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.286 2010/02/22 15:15:54 claudio Exp $
d104 1
d252 1
@


1.286
log
@Install a sample ldpd.conf file. OK dlg, deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.285 2010/01/23 19:27:59 matthieu Exp $
d5 1
d53 10
a142 9
	cd mtree; \
		${INSTALL} -c -o root -g wheel -m 600 special \
		    ${DESTDIR}/etc/mtree; \
		${INSTALL} -c -o root -g wheel -m 444 4.4BSD.dist \
		    ${DESTDIR}/etc/mtree; \
		${INSTALL} -c -o root -g wheel -m 444 BSD.local.dist \
		    ${DESTDIR}/etc/mtree; \
		${INSTALL} -c -o root -g wheel -m 444 BSD.x11.dist \
		    ${DESTDIR}/etc/mtree
d312 1
a312 1
	release allarchs kernels release-sets m4
@


1.285
log
@Add etc.loongson. ok miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.284 2009/12/27 19:28:27 ajacoutot Exp $
d85 1
@


1.284
log
@Create an empty etcsum file so that cksum can run without error (as
var/db/sysmerge/etcsum is created after the cksum calls and etcsum is
part of the etc set).

"sure" deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.283 2009/12/22 14:13:14 ajacoutot Exp $
d312 3
a314 3
SUBDIR+= etc.hppa64 etc.i386 etc.landisk etc.luna88k etc.mac68k etc.macppc
SUBDIR+= etc.mvme68k etc.mvme88k etc.palm etc.sgi etc.socppc etc.sparc
SUBDIR+= etc.sparc64 etc.vax etc.zaurus
@


1.283
log
@Create sysmerge etcsum file at release time for etc set inclusion.
This way, the first time sysmerge is run on a new box, it will already
have reference sums needed for automatic processing.

Original idea from and discussed with deraadt@@
"commit it" deraadt@@, tweaks and ok millert
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.282 2009/10/25 05:23:58 dtucker Exp $
d257 1
@


1.282
log
@fix syntax error in 'make update-moduli'; ok deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.281 2009/10/01 19:01:28 matthieu Exp $
d257 5
@


1.281
log
@Bring BSD.x11.dist back here. It's needed by the ports subsystem.
Update the BSD.x11.dist version to the one in xenocara.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.280 2009/09/24 21:45:58 miod Exp $
d294 1
a294 1
		echo -n '#    $Open'; echo 'BSD$'; \
@


1.280
log
@Reach palm MAKEDEV bits.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.279 2009/09/23 20:33:23 matthieu Exp $
d137 2
@


1.279
log
@remove unused and outdated BSD.x11.dist file. ok miod@@, krw@@.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.278 2009/05/24 10:45:21 ajacoutot Exp $
d305 2
a306 2
SUBDIR+= etc.mvme68k etc.mvme88k etc.sgi etc.socppc etc.sparc etc.sparc64
SUBDIR+= etc.vax etc.zaurus
@


1.278
log
@Install root's crontab with gid "crontab" to be consistent with what
crontab(1) does.

ok miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.277 2009/05/15 16:26:53 deraadt Exp $
a136 2
		    ${DESTDIR}/etc/mtree; \
		${INSTALL} -c -o root -g wheel -m 444 BSD.x11.dist \
@


1.277
log
@install wsconsctl.conf on more machines
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.276 2009/05/09 16:29:54 schwarze Exp $
d77 1
a77 1
	${INSTALL} -c -o root -g wheel -m 600 crontab ${DESTDIR}/var/cron/tabs/root
@


1.276
log
@revert previous, requested by kettenis@@ and deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.275 2009/05/09 14:21:24 schwarze Exp $
d24 2
a25 3
.if ${MACHINE} != "aviion" && ${MACHINE} != "landisk" && \
    ${MACHINE} != "mvme68k" && ${MACHINE} != "mvme88k" && \
    ${MACHINE} != "socppc"
@


1.275
log
@remove the empty script /etc/monthly
in preparation for improvements in /etc/daily and /etc/weekly
using feedback and suggestions from jmc@@ and sthen@@
ok jmc@@, and sthen@@ agreed with the general direction
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.274 2009/04/25 17:36:46 deraadt Exp $
d17 1
a17 1
	ksh.kshrc locate.rc man.conf motd mrouted.conf myname \
@


1.274
log
@Provide users by default with XTerm*loginShell:true.  This situation just is
ridiculous; xdm is totally broken since it never starts anything which resembles
a "login shell".  As a result, no configuration is brought into a process
context to give to future xterms or *sh shells and thus cause them to run their
.profile or .kshrc or such a thing, to get futher configuration.  Therefore
people are left with a totally bland unconfigured Unix environment in their
xterms, and don't know how to change this since .profile is ignored.  This
problem shows hundreds of thousands of google hits.  xdm is fundamentally
broken, but we must solve this also for the startx methods, too, and for people
running csh.  It is clear that .xsession is not a solution to this problem at
all (that is, assuming the people who suggest such a thing really mean a
.xsession file with the execute bit set).  This now becomes the recommended
way for new users to get out of this stupid situation; if someone does not
like it they can change it or delete it.  Few will.  Just watch.
ok kettenis guenther millert
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.273 2009/04/21 09:12:24 deraadt Exp $
d17 1
a17 1
	ksh.kshrc locate.rc man.conf monthly motd mrouted.conf myname \
@


1.273
log
@move bsd and bsd.rd and all such other MD "sets" into the MD files,
since we perhaps cannot assume that is what kernels will be in the
pathetically stupid world that SGI created
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.272 2009/04/17 03:58:52 deraadt Exp $
d104 2
d120 2
@


1.272
log
@For SHA256 hashes to be ready to go onto the install media, we must
build the sets before we build the media.  While there we can get rid
of DESTDIR/snapshot too, and simply install straight into RELEASEDIR.
(This also ends up saving an astounding amount of traffic/latency in a nfs
environment)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.271 2009/04/14 23:09:04 deraadt Exp $
d33 1
a33 1
MISETS=	bsd base${OSrev}.tgz comp${OSrev}.tgz misc${OSrev}.tgz \
d276 1
a276 1
	    sum -a sha256 bsd.rd INSTALL.`arch -ks` ${MDEXT} ${MISETS} > SHA256
@


1.271
log
@build release sets before kernels (so that bsd.rd can know about at least
some of the sets)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.270 2009/03/18 01:56:52 jacekm Exp $
d33 3
d270 1
a271 1
	cd ${.CURDIR}/../distrib/notes && ${MAKE} && exec ${SUDO} ${MAKE} install
d274 1
a274 9
release: distribution snap_pre release-sets snap_md
	-cp ${DESTDIR}/snapshot/*bsd* ${RELEASEDIR}
	-cp ${DESTDIR}/snapshot/*boot* ${RELEASEDIR}
	-cp ${DESTDIR}/snapshot/cdbr ${RELEASEDIR}
	-cp ${DESTDIR}/snapshot/*BOOT* ${RELEASEDIR}
	-cp ${DESTDIR}/snapshot/cd*.iso ${RELEASEDIR}
	-cp ${DESTDIR}/snapshot/Packages ${RELEASEDIR}
	-cp ${DESTDIR}/snapshot/INSTALL.* ${RELEASEDIR}
	-cp ${DESTDIR}/snapshot/*.fs ${DESTDIR}/snapshot/*.fs.gz ${RELEASEDIR}
d276 3
a278 7
		md5 *bsd!(*.gz) *boot* cdbr *BOOT* INSTALL.* Packages *.fs \
		    *.iso *.gz *.tgz > MD5
	-cd ${RELEASEDIR} && sort -o MD5 MD5

snap_pre:
	${SUDO} /bin/rm -rf ${DESTDIR}/snapshot
	${SUDO} ${INSTALL} -d -o root -g wheel -m 755 ${DESTDIR}/snapshot
d300 1
a300 1
	release allarchs snap_md m4 snap_pre
@


1.270
log
@unbreak make release, spotted by todd and kurt
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.269 2009/03/17 00:13:59 gilles Exp $
d267 1
a267 1
release: distribution snap_pre snap_md
d270 2
@


1.269
log
@enable smtpd in the build

"please enable it" deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.268 2008/06/15 01:52:19 todd Exp $
a89 1
	${INSTALL} -c -o root -g _smtpd -m 644 smtpd.conf ${DESTDIR}/etc/mail
@


1.268
log
@clean
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.267 2008/06/14 23:13:01 deraadt Exp $
d90 1
@


1.267
log
@shorten SUBDIR list
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.266 2008/06/14 23:09:05 todd Exp $
d6 1
a6 1
NOOBJ=	oobj
@


1.266
log
@redo the way MAKEDEV files are generated
get it in, deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.265 2008/06/08 03:03:37 jdixon Exp $
d309 4
a312 20
SUBDIR+= etc.alpha
SUBDIR+= etc.amd64
SUBDIR+= etc.armish
SUBDIR+= etc.aviion
SUBDIR+= etc.hp300
SUBDIR+= etc.hppa
SUBDIR+= etc.hppa64
SUBDIR+= etc.i386
SUBDIR+= etc.landisk
SUBDIR+= etc.luna88k
SUBDIR+= etc.mac68k
SUBDIR+= etc.macppc
SUBDIR+= etc.mvme68k
SUBDIR+= etc.mvme88k
SUBDIR+= etc.sgi
SUBDIR+= etc.socppc
SUBDIR+= etc.sparc
SUBDIR+= etc.sparc64
SUBDIR+= etc.vax
SUBDIR+= etc.zaurus
@


1.265
log
@Deprecate /etc/dhcpd.interfaces.  This is made unnecessary by dhcpd_flags.

ok deraadt@@ beck@@ reyk@@ phessler@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.264 2008/05/25 14:17:51 sobrado Exp $
a290 47
MAKEDEVARCHS+= alpha
MAKEDEVARCHS+= amd64
MAKEDEVARCHS+= armish
MAKEDEVARCHS+= hp300
MAKEDEVARCHS+= hppa
MAKEDEVARCHS+= hppa64
MAKEDEVARCHS+= i386
MAKEDEVARCHS+= landisk
MAKEDEVARCHS+= luna88k
MAKEDEVARCHS+= mac68k
MAKEDEVARCHS+= macppc
MAKEDEVARCHS+= mvme68k
MAKEDEVARCHS+= mvme88k
#MAKEDEVARCHS+= mvmeppc
MAKEDEVARCHS+= sgi
MAKEDEVARCHS+= socppc
MAKEDEVARCHS+= sparc
MAKEDEVARCHS+= sparc64
MAKEDEVARCHS+= vax
MAKEDEVARCHS+= zaurus

clean:
	rm -f etc.${MACHINE}/MAKEDEV

cleandir:
	cd ${.CURDIR}; for m in ${MAKEDEVARCHS}; do \
	    ${MAKE} MACHINE=$$m clean; done

MAKEDEVSRC=	MAKEDEV.mi MAKEDEV.sub MAKEDEV.common
MAKEDEVDOC=	MAKEDEV.man MAKEDEV.mansub MAKEDEV.common
m4: etc.${M}/MAKEDEV
man: ${.CURDIR}/../share/man/man8/man.${M}/MAKEDEV.8

etc.${M}/MAKEDEV: ${MAKEDEVSRC} etc.${M}/MAKEDEV.md
	@@echo "==> etc.${M}/MAKEDEV"
	m4 -DMACHINE=${M} MAKEDEV.mi > etc.${M}/.MAKEDEV.tmp && \
	    mv etc.${M}/.MAKEDEV.tmp etc.${M}/MAKEDEV || \
	    rm etc.${M}/.MAKEDEV.tmp

${.CURDIR}/../share/man/man8/man.${M}/MAKEDEV.8: ${MAKEDEVDOC} etc.${M}/MAKEDEV.md
	m4 -DMACHINE=${M} MAKEDEV.man > \
	    ${.CURDIR}/../share/man/man8/man8.${M}/MAKEDEV.8

allarchs: ${MAKEDEVSRC} ${MAKEDEVDOC}
	cd ${.CURDIR}; for m in ${MAKEDEVARCHS}; do \
	    ${MAKE} M=$$m m4 man; done

d308 23
@


1.264
log
@improve indentation.

ok jsing@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.263 2008/05/13 21:29:36 miod Exp $
d16 4
a19 4
	dhcpd.interfaces exports ftpusers ftpchroot gettytab group hosts \
	hosts.lpd inetd.conf ksh.kshrc locate.rc man.conf monthly motd \
	mrouted.conf myname netstart networks newsyslog.conf phones printcap \
	protocols rbootd.conf rc rc.conf rc.local rc.securelevel rc.shutdown \
@


1.263
log
@Disable more wscons bits on socppc.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.262 2008/05/13 20:44:54 miod Exp $
d189 1
a189 1
		${DESTDIR}/var/crash
d191 1
a191 1
		${DESTDIR}/etc/dumpdates
d193 1
a193 1
		${DESTDIR}/var/cron/at.deny
d195 1
a195 1
		${DESTDIR}/var/cron/cron.deny
d197 1
a197 1
		${DESTDIR}/var/cron/log
d199 1
a199 1
		${DESTDIR}/var/db/locate.database
d201 1
a201 1
		${DESTDIR}/var/log/authlog
d203 1
a203 1
		${DESTDIR}/var/log/daemon
d205 1
a205 1
		${DESTDIR}/var/log/failedlogin
d207 1
a207 1
		${DESTDIR}/var/log/ftpd
d209 1
a209 1
		${DESTDIR}/var/log/lastlog
d211 1
a211 1
		${DESTDIR}/var/log/lpd-errs
d213 1
a213 1
		${DESTDIR}/var/log/maillog
d215 1
a215 1
		${DESTDIR}/var/log/messages
d217 1
a217 1
		${DESTDIR}/var/log/secure
d219 1
a219 1
		${DESTDIR}/var/log/sendmail.st
d221 1
a221 1
		${DESTDIR}/var/log/wtmp
d223 1
a223 1
		${DESTDIR}/var/log/xferlog
d225 1
a225 1
		${DESTDIR}/var/msgs/bounds
d227 1
a227 1
		${DESTDIR}/var/run/utmp
d244 1
a244 1
		${DESTDIR}/var/mail/root
d246 1
a246 1
		${DESTDIR}/etc/sudoers
d280 1
a280 1
		*.iso *.gz *.tgz > MD5
@


1.262
log
@Plumb socppc in MAKEDEV machinery.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.261 2008/03/19 12:22:09 sobrado Exp $
d24 3
a26 2
.if ${MACHINE} != "aviion" && ${MACHINE} != "mvme68k" && \
    ${MACHINE} != "mvme88k" && ${MACHINE} != "landisk"
@


1.261
log
@remove superfluous backslashes and semicolons

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.260 2008/02/09 12:10:53 mcbride Exp $
d305 1
@


1.260
log
@Add .ssh and authorized keys to /etc/skel, makes setting up new
pubkey authentication users with the correct file permissions a bit easier.

ok djm krw henning miod and many others
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.259 2008/01/31 14:18:03 reyk Exp $
d104 1
a104 1
		    ${DESTDIR}/.profile;
d169 1
a169 1
		    ${DESTDIR}/etc/systrace;
d182 1
a182 1
		    ${DESTDIR}/var/named/standard/loopback6.arpa; \
@


1.259
log
@enable snmpd in the build

approved by deraadt@@, ok thib@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.258 2008/01/03 21:20:24 jakob Exp $
d113 3
a115 1
		    ${DESTDIR}/etc/skel/.profile
@


1.258
log
@revert back to using local zones for localhost. and IPv4/IPv6 reverse until
we've found a better solution for chrooted applications.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.257 2007/12/16 21:34:56 jakob Exp $
d88 1
@


1.257
log
@remove localhost. zone (localhost. queries are handled by /etc/hosts)
replace IPv4 and IPv6 loopback zones with BIND's autogenerated empty zones.
move root.hint to /var/named/etc
remove empty directory /var/named/standard
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.256 2007/12/07 17:13:35 deraadt Exp $
d174 6
@


1.256
log
@hoststated gets renamed to relayd.  easier to type, and actually says
what the daemon does - it is a relayer that pays attention to the status
of pools of hosts; not a status checkers that happens to do some relaying
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.255 2007/11/05 23:46:12 merdely Exp $
a171 6
		${INSTALL} -c -o root -g wheel -m 644 db.localhost \
		    ${DESTDIR}/var/named/standard/localhost; \
		${INSTALL} -c -o root -g wheel -m 644 db.loopback \
		    ${DESTDIR}/var/named/standard/loopback; \
		${INSTALL} -c -o root -g wheel -m 644 db.loopback6.arpa \
		    ${DESTDIR}/var/named/standard/loopback6.arpa; \
d173 1
a173 1
		    ${DESTDIR}/var/named/standard; \
@


1.255
log
@Change chio.conf's group ownership to operator and mode to 644.
At this time, there is no sensitive information in that file.

ok beck@@, millert@@, jdixon@@, deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.254 2007/10/08 12:16:35 norby Exp $
d85 1
a85 1
	${INSTALL} -c -o root -g wheel -m 600 hoststated.conf ${DESTDIR}/etc
@


1.254
log
@Add a sample configuration file for the newly imported ospf6d(8) daemon.

ok dlg@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.253 2007/08/01 21:23:25 miod Exp $
d83 1
a83 1
	${INSTALL} -c -o root -g wheel -m 600 chio.conf ${DESTDIR}/etc
@


1.253
log
@Retire OpenBSD/cats. Hardware is nice but prone to catch fire, and the firmware
is anything but useful. Nevertheless this was a very good platform to use as
an OpenBSD/*arm* starting point, but nowadays this platform is not necessary
anymore.

Somehow these CATS motherboard are just like AUI hubs, with the difference that,
when my AUI hub caught fire, 10base5 support was not removed from the networking
code.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.252 2007/05/04 07:31:43 deraadt Exp $
d79 1
@


1.252
log
@incompletely killed the cksum bits
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.251 2007/05/04 03:49:17 deraadt Exp $
a288 1
MAKEDEVARCHS+= cats
@


1.251
log
@stop shipping CKSUM files; people can use the MD5 files
(this decreases build time a bit too)
ok todd (and i assume legacy-architecture-miod would not object either)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.250 2007/02/27 02:25:13 deraadt Exp $
a275 2
	-cd ${RELEASEDIR}; \
		cksum *bsd!(*.gz) *boot* cdbr *BOOT* INSTALL.* Packages *.fs \
@


1.250
log
@avoid messing with the cvs tag expansion
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.249 2007/02/27 02:22:01 beck Exp $
a277 1
		*.iso *.gz *.tgz > CKSUM
a278 1
	-cd ${RELEASEDIR} && sort -o CKSUM -k 3 CKSUM
@


1.249
log
@/etc/spamd.conf moves to /etc/mail/spamd.conf
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.248 2007/02/22 16:55:32 henning Exp $
d344 1
a344 1
		echo '#    $$OpenBSD: Makefile,v 1.248 2007/02/22 16:55:32 henning Exp $$'; \
@


1.248
log
@sample sasyncd.conf, PR5387 sthen at symphytum.spacehopper.org, ok theo
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.247 2007/02/16 16:56:22 tsi Exp $
d20 1
a20 1
	remote rpc security services shells spamd.conf syslog.conf weekly \
d344 1
a344 1
		echo '#    $$OpenBSD: Makefile,v 1.247 2007/02/16 16:56:22 tsi Exp $$'; \
@


1.247
log
@s/GZIP/GZIPCMD/g in `make release` structure to avoid conflict with gzip's
use of a GZIP environment variable for extra command flags.

ok deraadt@@, millert@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.246 2007/01/31 08:32:16 pyr Exp $
d86 1
d344 1
a344 1
		echo '#    $$OpenBSD: Makefile,v 1.246 2007/01/31 08:32:16 pyr Exp $$'; \
@


1.246
log
@link hoststated to the builds.
ok miod@@, henning@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.245 2006/12/14 18:49:44 kettenis Exp $
d38 1
a38 1
GZIP?=		gzip
d42 1
a42 1
GZIP=		cat
d343 1
a343 1
		echo '#    $$OpenBSD: Makefile,v 1.245 2006/12/14 18:49:44 kettenis Exp $$'; \
@


1.245
log
@Uncomment MAKEDEVARCH+=landisk.
ok drahn@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.244 2006/12/12 16:37:32 reyk Exp $
d84 1
d343 1
a343 1
		echo '#    $$OpenBSD: Makefile,v 1.244 2006/12/12 16:37:32 reyk Exp $$'; \
@


1.244
log
@enable bgplg, the bgp looking glass

ok henning@@ deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.243 2006/11/10 21:22:30 deraadt Exp $
d296 1
a296 1
#MAKEDEVARCHS+= landisk
d342 1
a342 1
		echo '#    $$OpenBSD: Makefile,v 1.243 2006/11/10 21:22:30 deraadt Exp $$'; \
@


1.243
log
@landisk has no wsconsctl.conf
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.242 2006/10/29 18:58:57 norby Exp $
d233 1
d342 1
a342 1
		echo '#    $$OpenBSD: Makefile,v 1.242 2006/10/29 18:58:57 norby Exp $$'; \
@


1.242
log
@Add the _ripd user and startup stuff.

ok claudio@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.241 2006/10/10 12:45:58 todd Exp $
d25 1
a25 1
    ${MACHINE} != "mvme88k"
d341 1
a341 1
		echo '#    $$OpenBSD: Makefile,v 1.241 2006/10/10 12:45:58 todd Exp $$'; \
@


1.241
log
@etc.landisk does not exist yet, dont try to build MAKEDEV for it yet either
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.240 2006/10/06 22:11:30 deraadt Exp $
d79 1
d341 1
a341 1
		echo '#    $$OpenBSD: Makefile,v 1.240 2006/10/06 22:11:30 deraadt Exp $$'; \
@


1.240
log
@enable landisk MAKEDEV building later
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.239 2006/07/27 17:59:51 deraadt Exp $
d294 1
a294 1
MAKEDEVARCHS+= landisk
d340 1
a340 1
		echo '#    $$OpenBSD: Makefile,v 1.239 2006/07/27 17:59:51 deraadt Exp $$'; \
@


1.239
log
@remove unused WCS stuff
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.238 2006/07/27 03:52:55 deraadt Exp $
a288 1
MAKEDEVARCHS+= aviion
d294 1
d340 1
a340 1
		echo '#    $$OpenBSD: Makefile,v 1.238 2006/07/27 03:52:55 deraadt Exp $$'; \
@


1.238
log
@remove "snapshot" code, now that our snapshots are always actually
releases...
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.237 2006/07/24 22:24:56 miod Exp $
a32 2
WCS1=	wcs fppwcs poc poc1 poc2 fppoc
WCS2=	fpevent fppwcs fppwcs_dual hdcwcs load_diags start_fpp wcs wcs_dual
d340 1
a340 1
		echo '#    $$OpenBSD: Makefile,v 1.237 2006/07/24 22:24:56 miod Exp $$'; \
@


1.237
log
@Build wscons stuff on vax (but no for bsd.rd yet)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.236 2006/06/06 00:01:49 drahn Exp $
d52 1
a52 1
distribution-etc-root-var distribution distrib-dirs release snapshot:
a276 6
.if defined(MACHINE_HAS_TOOLS)
	mkdir -p ${RELEASEDIR}/tools
	cp ${DESTDIR}/snapshot/tools/* ${RELEASEDIR}/tools
	cd ${RELEASEDIR} && md5 tools/* >>MD5
	cd ${RELEASEDIR} && cksum tools/* >>CKSUM
.endif
a278 5
.endif

snapshot: distribution snap_pre snap_tar snap_md
	cd ${DESTDIR}/snapshot && cksum * > CKSUMS
	cd ${DESTDIR}/snapshot && md5 * > MD5
d284 1
a284 33
snap_tar:
	cd ${DESTDIR} && tar cf - bin \
	    | ${GZIP} ${GZIPFLAGS} > snapshot/bin.tar${GZIPEXT}
	cd ${DESTDIR} && tar cf - dev \
	    | ${GZIP} ${GZIPFLAGS} > snapshot/dev.tar${GZIPEXT}
	cd ${DESTDIR} && tar cf - .profile .cshrc altroot etc home mnt \
	    root stand sys tmp | ${GZIP} ${GZIPFLAGS} \
	    > snapshot/etc.tar${GZIPEXT}
	cd ${DESTDIR} && tar cf - sbin \
	    | ${GZIP} ${GZIPFLAGS} > snapshot/sbin.tar${GZIPEXT}
	cd ${DESTDIR} && tar cf - usr/bin \
	    | ${GZIP} ${GZIPFLAGS} > snapshot/usr.bin.tar${GZIPEXT}
	cd ${DESTDIR} && tar cf - usr/games \
	    | ${GZIP} ${GZIPFLAGS} > snapshot/usr.games.tar${GZIPEXT}
	cd ${DESTDIR} && tar cf - usr/include \
	    | ${GZIP} ${GZIPFLAGS} > snapshot/usr.include.tar${GZIPEXT}
	cd ${DESTDIR} && tar cf - usr/lib \
	    | ${GZIP} ${GZIPFLAGS} > snapshot/usr.lib.tar${GZIPEXT}
	cd ${DESTDIR} && tar cf - usr/libexec \
	    | ${GZIP} ${GZIPFLAGS} > snapshot/usr.libexec.tar${GZIPEXT}
	cd ${DESTDIR} && tar cf - usr/mdec usr/libdata usr/lkm usr/local \
	    usr/src usr/obj | ${GZIP} ${GZIPFLAGS} \
	    > snapshot/usr.misc.tar${GZIPEXT}
	cd ${DESTDIR} && tar cf - usr/sbin \
	    | ${GZIP} ${GZIPFLAGS} > snapshot/usr.sbin.tar${GZIPEXT}
	cd ${DESTDIR} && tar cf - usr/share \
	    | ${GZIP} ${GZIPFLAGS} > snapshot/usr.share.tar${GZIPEXT}
	cd ${DESTDIR} && tar cf - var \
	    | ${GZIP} ${GZIPFLAGS} > snapshot/var.tar${GZIPEXT}
	cd ../distrib/notes; ${MAKE}; ${MAKE} install

snap_md:
# nothing here -- look in the machine-dependent Makefile.inc
d342 1
a342 1
		echo '#    $$OpenBSD: Makefile,v 1.236 2006/06/06 00:01:49 drahn Exp $$'; \
d351 1
a351 1
	release snapshot allarchs snap_pre snap_tar snap_md m4
@


1.236
log
@System build pieces for armish arch.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.235 2006/06/03 19:33:35 deraadt Exp $
d25 1
a25 1
    ${MACHINE} != "mvme88k" && ${MACHINE} != "vax"
d385 1
a385 1
		echo '#    $$OpenBSD: Makefile,v 1.235 2006/06/03 19:33:35 deraadt Exp $$'; \
@


1.235
log
@do chio.conf install from right place
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.234 2006/06/01 16:43:23 norby Exp $
d333 1
d385 1
a385 1
		echo '#    $$OpenBSD: Makefile,v 1.234 2006/06/01 16:43:23 norby Exp $$'; \
@


1.234
log
@add all the goo to hook dvmrp into the system

ok derradt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.233 2006/05/09 21:17:13 miod Exp $
d83 1
d384 1
a384 1
		echo '#    $$OpenBSD: Makefile,v 1.233 2006/05/09 21:17:13 miod Exp $$'; \
@


1.233
log
@Administrative changes for aviion, ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.232 2006/01/04 20:38:59 miod Exp $
d81 1
d383 1
a383 1
		echo '#    $$OpenBSD: Makefile,v 1.232 2006/01/04 20:38:59 miod Exp $$'; \
@


1.232
log
@Import NetBSD's direct adb code on mac68k, switching to real keyboard and mouse
drivers, and to wscons as the console; a few parts borrowed from OpenBSD/macppc
as well.

Currently only working with displays configured in 1bpp or 8bpp modes; this
limitation will be worked on ASAP.

Tested by claudio@@ kettenis@@ martin@@ nick@@ and I on various models. X11 changes
coming soon.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.231 2005/12/28 04:55:35 david Exp $
d24 2
a25 2
.if ${MACHINE} != "mvme68k" && ${MACHINE} != "mvme88k" && \
    ${MACHINE} != "vax"
d331 1
d382 1
a382 1
		echo '#    $$OpenBSD: Makefile,v 1.231 2005/12/28 04:55:35 david Exp $$'; \
@


1.231
log
@nuke extra whitespace
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.230 2005/12/27 23:16:28 naddy Exp $
d24 2
a25 6
.if ${MACHINE} == "alpha" || ${MACHINE} == "amd64" || \
    ${MACHINE} == "cats" || ${MACHINE} == "hp300" || \
    ${MACHINE} == "hppa" || ${MACHINE} == "hppa64" || \
    ${MACHINE} == "luna88k" || ${MACHINE} == "macppc" || \
    ${MACHINE} == "sparc" || ${MACHINE} == "sparc64" || \
    ${MACHINE} == "zaurus" || ${MACHINE} == "i386"
d381 1
a381 1
		echo '#    $$OpenBSD: Makefile,v 1.230 2005/12/27 23:16:28 naddy Exp $$'; \
@


1.230
log
@install sample ipsec.conf; ok hshoexer@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.229 2005/11/21 16:13:44 beck Exp $
d77 1
a77 1
	    chmod 644 ${DESTDIR}/etc/login.conf 
d385 1
a385 1
		echo '#    $$OpenBSD: Makefile,v 1.229 2005/11/21 16:13:44 beck Exp $$'; \
@


1.229
log
@Make the rc files in / be copies of the ones given by default to root in
/root instead of hard links to them.  This way multiuser only changes
a user makes to the to the ones in /root do not screw them over for
getting into single user easily when the have to.

ok millert@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.228 2005/11/17 21:28:05 jakob Exp $
d87 1
d385 1
a385 1
		echo '#    $$OpenBSD: Makefile,v 1.228 2005/11/17 21:28:05 jakob Exp $$'; \
@


1.228
log
@remove stale NAMEDB; ok theo
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.227 2005/08/15 00:40:17 millert Exp $
d99 4
a102 2
		ln ${DESTDIR}/root/.cshrc ${DESTDIR}/.cshrc; \
		ln ${DESTDIR}/root/.profile ${DESTDIR}/.profile
d384 1
a384 1
		echo '#    $$OpenBSD: Makefile,v 1.227 2005/08/15 00:40:17 millert Exp $$'; \
@


1.227
log
@Generate login.conf from a template with optional per-architecture overrides
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.226 2005/05/26 23:06:06 mcbride Exp $
a35 1
NAMEDB=	localhost.rev localhost.v6.rev localhost.zone root.cache
d382 1
a382 1
		echo '#    $$OpenBSD: Makefile,v 1.226 2005/05/26 23:06:06 mcbride Exp $$'; \
@


1.226
log
@Enable ifstated in the builds. This still does not mean that ifstated is
necessary for regular carp setups. There are situations where you need this,
but if you're going to use it, think hard about redesigning your network so
you don't have to.

ok deraadt@@ mpf@@ henning@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.225 2005/05/15 23:41:37 david Exp $
d22 1
a22 1
	login.conf moduli pf.os sensorsd.conf ifstated.conf
d75 4
d383 1
a383 1
		echo '#    $$OpenBSD: Makefile,v 1.225 2005/05/15 23:41:37 david Exp $$'; \
@


1.225
log
@no need to install and checksum *.ipk since *bsd* will already catch it
ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.224 2005/05/02 06:47:32 david Exp $
d22 1
a22 1
	login.conf moduli pf.os sensorsd.conf
d379 1
a379 1
		echo '#    $$OpenBSD: Makefile,v 1.224 2005/05/02 06:47:32 david Exp $$'; \
@


1.224
log
@include zbsdmod, Packages, and ipk in the checksums; ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.223 2005/04/14 10:22:37 henning Exp $
a263 1
	-cp ${DESTDIR}/snapshot/*.ipk ${RELEASEDIR}
d269 1
a269 1
		*.ipk *.iso *.gz *.tgz > MD5
d272 1
a272 1
		*.ipk *.iso *.gz *.tgz > CKSUM
d379 1
a379 1
		echo '#    $$OpenBSD: Makefile,v 1.223 2005/04/14 10:22:37 henning Exp $$'; \
@


1.223
log
@move the few needlessly special-cased root:wheel 0644 files to BIN1
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.222 2005/04/13 21:47:07 henning Exp $
d269 2
a270 2
		md5 bsd!(*.gz) *boot* cdbr *BOOT* INSTALL.* *.fs *.iso *.gz *.tgz \
		    > MD5
d272 2
a273 2
		cksum bsd!(*.gz) *boot* cdbr *BOOT* INSTALL.* *.fs *.iso *.gz *.tgz \
		    > CKSUM
d380 1
a380 1
		echo '#    $$OpenBSD: Makefile,v 1.222 2005/04/13 21:47:07 henning Exp $$'; \
@


1.222
log
@sample hostapd.conf from reyk, to be tweaked
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.221 2005/04/01 15:50:14 deraadt Exp $
d21 2
a22 1
	etc.${MACHINE}/disktab dhclient.conf mailer.conf ntpd.conf
a77 1
	${INSTALL} -c -o root -g wheel -m 644 login.conf ${DESTDIR}/etc
a79 1
	${INSTALL} -c -o root -g wheel -m 644 moduli ${DESTDIR}/etc
a82 2
	${INSTALL} -c -o root -g wheel -m 644 pf.os ${DESTDIR}/etc
	${INSTALL} -c -o root -g wheel -m 644 sensorsd.conf ${DESTDIR}/etc
d380 1
a380 1
		echo '#    $$OpenBSD: Makefile,v 1.221 2005/04/01 15:50:14 deraadt Exp $$'; \
@


1.221
log
@hppa64 chunkies
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.220 2005/03/20 20:11:42 deraadt Exp $
d86 1
d383 1
a383 1
		echo '#    $$OpenBSD: Makefile,v 1.220 2005/03/20 20:11:42 deraadt Exp $$'; \
@


1.220
log
@during make release install *bsd* not just bsd*, so we pick up zaurus zbsdmod.o too
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.219 2005/03/19 00:11:21 deraadt Exp $
d25 1
a25 1
    ${MACHINE} == "hppa" || ${MACHINE} == "i386" || \
d28 1
a28 1
    ${MACHINE} == "zaurus"
d335 1
d382 1
a382 1
		echo '#    $$OpenBSD: Makefile,v 1.219 2005/03/19 00:11:21 deraadt Exp $$'; \
@


1.219
log
@Packages for zaurus - yuck yuck; for uwe
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.218 2005/03/18 20:31:00 deraadt Exp $
d261 1
a261 1
	-cp ${DESTDIR}/snapshot/bsd* ${RELEASEDIR}
d381 1
a381 1
		echo '#    $$OpenBSD: Makefile,v 1.218 2005/03/18 20:31:00 deraadt Exp $$'; \
@


1.218
log
@also copy *.ipk files to RELEASEDIR
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.217 2005/02/19 11:56:54 henning Exp $
d267 1
d381 1
a381 1
		echo '#    $$OpenBSD: Makefile,v 1.217 2005/02/19 11:56:54 henning Exp $$'; \
@


1.217
log
@ospfd.conf mode 0600, requested by norby
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.216 2005/02/05 20:40:53 henning Exp $
d266 1
d380 1
a380 1
		echo '#    $$OpenBSD: Makefile,v 1.216 2005/02/05 20:40:53 henning Exp $$'; \
@


1.216
log
@ospfd.conf
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.215 2005/01/17 02:45:46 deraadt Exp $
d21 1
a21 1
	etc.${MACHINE}/disktab dhclient.conf mailer.conf ntpd.conf ospfd.conf
d82 1
d379 1
a379 1
		echo '#    $$OpenBSD: Makefile,v 1.215 2005/01/17 02:45:46 deraadt Exp $$'; \
@


1.215
log
@cleaning distrib twice is useless
committed from the ship while drinking a trad, from a zaurus on beck's birthday
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.214 2005/01/14 22:39:12 miod Exp $
d21 1
a21 1
	etc.${MACHINE}/disktab dhclient.conf mailer.conf ntpd.conf
d378 1
a378 1
		echo '#    $$OpenBSD: Makefile,v 1.214 2005/01/14 22:39:12 miod Exp $$'; \
@


1.214
log
@Switch OpenBSD/hp300 to wscons, still using on-board ROM fonts for now.

Main features:
- MI hil drivers, allowing live plug/unplug of devices, and the keyboard
  does not need to be at id 1 anymore.
- SGC bus support on 4xx models. SGC frame buffers are supported too, but
  not as console, though you can use them as a regular glass terminal if
  you run a getty on ttyC0. Currently not compiled-in, awaiting for an sti(4)
  fix to be commited.
- HP-UX compatibility interfaces are removed. grfinfo and hilinfo are removed.

X11 support is currently broken by these changes; X.org X11R6 support will
be available very soon.

Tested on hyperion and 4 different flavours of catseye/topcat/kathmandu; other,
older frame buffers (davinci, gatorbox and renaissance) could not been tested
but should work; please report any regression.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.213 2005/01/13 19:27:13 drahn Exp $
d373 1
a373 1
	    ${MAKE} cleandir && ${MAKE} && exec ${SUDO} ${MAKE} install
d378 1
a378 1
		echo '#    $$OpenBSD: Makefile,v 1.213 2005/01/13 19:27:13 drahn Exp $$'; \
@


1.213
log
@wsconsctl.conf on zaurus too.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.212 2004/12/31 00:18:20 miod Exp $
d24 5
a28 4
    ${MACHINE} == "cats" || ${MACHINE} == "hppa" || \
    ${MACHINE} == "i386" || ${MACHINE} == "luna88k" || \
    ${MACHINE} == "macppc" || ${MACHINE} == "sparc" || \
    ${MACHINE} == "sparc64" || ${MACHINE} == "zaurus"
d378 1
a378 1
		echo '#    $$OpenBSD: Makefile,v 1.212 2004/12/31 00:18:20 miod Exp $$'; \
@


1.212
log
@Add zaurus to MAKEDEV machinery.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.211 2004/08/26 03:34:15 deraadt Exp $
d27 1
a27 1
    ${MACHINE} == "sparc64"
d377 1
a377 1
		echo '#    $$OpenBSD: Makefile,v 1.211 2004/08/26 03:34:15 deraadt Exp $$'; \
@


1.211
log
@install cdbr and cdboot for those that have it, too
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.210 2004/08/16 17:39:21 deraadt Exp $
d342 1
d377 1
a377 1
		echo '#    $$OpenBSD: Makefile,v 1.210 2004/08/16 17:39:21 deraadt Exp $$'; \
@


1.210
log
@fix the tree after jakob broke it
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.209 2004/08/06 21:59:11 pefo Exp $
d261 1
d267 1
a267 1
		md5 bsd!(*.gz) *boot* *BOOT* INSTALL.* *.fs *.iso *.gz *.tgz \
d270 1
a270 1
		cksum bsd!(*.gz) *boot* *BOOT* INSTALL.* *.fs *.iso *.gz *.tgz \
d376 1
a376 1
		echo '#    $$OpenBSD: Makefile,v 1.209 2004/08/06 21:59:11 pefo Exp $$'; \
@


1.209
log
@add sgi to MAKEDEV build.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.208 2004/07/06 04:01:49 henning Exp $
a171 2
		${INSTALL} -c -o root -g wheel -m 644 db.loopback6.int \
		    ${DESTDIR}/var/named/standard/loopback6.int; \
d375 1
a375 1
		echo '#    $$OpenBSD: Makefile,v 1.208 2004/07/06 04:01:49 henning Exp $$'; \
@


1.208
log
@sample ntpd config file
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.207 2004/05/18 16:45:46 drahn Exp $
d339 1
d377 1
a377 1
		echo '#    $$OpenBSD: Makefile,v 1.207 2004/05/18 16:45:46 drahn Exp $$'; \
@


1.207
log
@generate entries for all of the ptys after more were added, ok deraadt millert
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.206 2004/05/04 23:37:04 deraadt Exp $
d21 1
a21 1
	etc.${MACHINE}/disktab dhclient.conf mailer.conf
d376 1
a376 1
		echo '#    $$OpenBSD: Makefile,v 1.206 2004/05/04 23:37:04 deraadt Exp $$'; \
@


1.206
log
@bye bye bootpd.  You will not be missed.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.205 2004/05/04 19:35:25 deraadt Exp $
d61 1
a61 1
	cat etc.${MACHINE}/ttys ttys.pty > ${DESTDIR}/etc/ttys && \
d376 1
a376 1
		echo '#    $$OpenBSD: Makefile,v 1.205 2004/05/04 19:35:25 deraadt Exp $$'; \
@


1.205
log
@nuke default .rhosts file; from S@@mSmith.net, ok millert
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.204 2004/05/03 15:18:19 drahn Exp $
d15 7
a21 9
BIN1=	bootptab changelist ccd.conf csh.cshrc csh.login csh.logout \
	daily dhcpd.conf dhcpd.interfaces exports ftpusers \
	ftpchroot gettytab group hosts hosts.lpd inetd.conf \
	ksh.kshrc locate.rc man.conf monthly motd mrouted.conf \
	myname netstart networks newsyslog.conf \
	phones printcap protocols rbootd.conf rc rc.conf rc.local \
	rc.securelevel rc.shutdown remote rpc security services \
	shells spamd.conf syslog.conf weekly etc.${MACHINE}/disktab \
	dhclient.conf mailer.conf
d376 1
a376 1
		echo '#    $$OpenBSD: Makefile,v 1.204 2004/05/03 15:18:19 drahn Exp $$'; \
@


1.204
log
@Remove OpenBSD/pegaos, this has been announced before but delayed until
the tree was stable. No point in code supporting a company which screws
its employees being in the OpenBSD tree.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.202 2004/04/21 18:23:40 miod Exp $
d108 1
a108 3
		    ${DESTDIR}/etc/skel/.profile; \
		${INSTALL} -c -o root -g wheel -m 600 dot.rhosts \
		    ${DESTDIR}/etc/skel/.rhosts
d378 1
a378 1
		echo '#    $$OpenBSD: Makefile,v 1.202 2004/04/21 18:23:40 miod Exp $$'; \
@


1.203
log
@Install /etc/wsconsctl.conf on luna88k.
@
text
@d29 1
a29 1
    ${MACHINE} == "sparc64" || ${MACHINE} == "pegasos"
a342 1
MAKEDEVARCHS+= pegasos
@


1.202
log
@Populate /etc for luna88k
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.201 2004/02/29 18:02:14 deraadt Exp $
d25 5
a29 5
.if ${MACHINE} == "alpha" || ${MACHINE} == "hppa" || \
    ${MACHINE} == "i386" || ${MACHINE} == "macppc" || \
    ${MACHINE} == "pegasos" || ${MACHINE} == "sparc" || \
    ${MACHINE} == "sparc64" || ${MACHINE} == "amd64" || \
    ${MACHINE} == "cats"
d381 1
a381 1
		echo '#    $$OpenBSD: Makefile,v 1.201 2004/02/29 18:02:14 deraadt Exp $$'; \
@


1.201
log
@oops
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.200 2004/02/27 17:36:13 deraadt Exp $
d337 1
d381 1
a381 1
		echo '#    $$OpenBSD: Makefile,v 1.200 2004/02/27 17:36:13 deraadt Exp $$'; \
@


1.200
log
@change amd64's MACHINE_ARCH from x86_64 to amd64.  There are many many
reasons for this, quite a few of them technical, and not all of them
in response to Intel's broken ia32e crud.  The gcc toolchain stays at
x86_64 for now.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.199 2004/02/16 19:03:30 miod Exp $
d29 1
a29 1
    ${MACHINE} == "cats" || 
d380 1
a380 1
		echo '#    $$OpenBSD: Makefile,v 1.199 2004/02/16 19:03:30 miod Exp $$'; \
@


1.199
log
@Introduce MAKEDEV.man*, an equivalent of MAKEDEV.mi and MAKEDEV.sub
designed to output mdoc rather than shell script, and use them to produce
much better MAKEDEV.8 manual pages.

Note that MAKEDEV.man relies upon BSD m4 behaviour, which all m4 binaries
might not follow.

mdoc help and comments jmc@@, disabused ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.198 2004/02/13 14:14:52 miod Exp $
d28 2
a29 2
    ${MACHINE} == "sparc64" || ${MACHINE_ARCH} == "x86_64" || \
    ${MACHINE} == "cats"
d380 1
a380 1
		echo '#    $$OpenBSD: Makefile,v 1.198 2004/02/13 14:14:52 miod Exp $$'; \
@


1.198
log
@Add cats to MAKEDEVARCHS
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.197 2004/02/10 23:07:37 henning Exp $
d354 2
d357 1
d359 2
a360 2
etc.${M}/MAKEDEV: MAKEDEV.sub MAKEDEV.mi etc.${M}/MAKEDEV.md
	echo "==> etc.${M}/MAKEDEV"
d365 5
a369 1
allarchs: MAKEDEV.sub MAKEDEV.mi
d371 1
a371 1
	    ${MAKE} M=$$m m4; done
d380 1
a380 1
		echo '#    $$OpenBSD: Makefile,v 1.197 2004/02/10 23:07:37 henning Exp $$'; \
@


1.197
log
@install bgpd.conf mode 600, theo ok
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.196 2004/02/07 23:26:56 deraadt Exp $
d333 1
d373 1
a373 1
		echo '#    $$OpenBSD: Makefile,v 1.196 2004/02/07 23:26:56 deraadt Exp $$'; \
@


1.196
log
@add cats and amd64
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.195 2004/01/30 07:48:14 dtucker Exp $
d23 1
a23 1
	dhclient.conf mailer.conf bgpd.conf
d82 1
d372 1
a372 1
		echo '#    $$OpenBSD: Makefile,v 1.195 2004/01/30 07:48:14 dtucker Exp $$'; \
@


1.195
log
@Fix tab damage in Makefile introduced in previous commit, pointed out by
STeve Andre
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.194 2004/01/30 03:02:26 dtucker Exp $
d25 5
a29 4
.if (${MACHINE} == "alpha" || ${MACHINE} == "hppa" || \
     ${MACHINE} == "i386" || ${MACHINE} == "macppc" || \
     ${MACHINE} == "pegasos" || ${MACHINE} == "sparc" || \
     ${MACHINE} == "sparc64")
d371 1
a371 1
		echo '#    $$OpenBSD: Makefile,v 1.194 2004/01/30 03:02:26 dtucker Exp $$'; \
@


1.194
log
@Add update-moduli target for regenerating ssh moduli file;  from markus@@
ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.193 2004/01/28 02:24:28 mickey Exp $
d369 8
a376 8
    ( \
        echo '#    $$OpenBSD: $$'; \
        echo '# Time Type Tests Tries Size Generator Modulus'; \
            ( for i in ${DHSIZE}; do \
                ssh-keygen -b $$i -G /dev/stdout; \
            done) | \
        ssh-keygen -T /dev/stdout \
        ) > moduli
@


1.193
log
@amd64 hook ups
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.192 2004/01/12 23:58:00 todd Exp $
d366 11
@


1.192
log
@vax joins the club; ok miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.191 2004/01/12 23:32:24 todd Exp $
d330 1
@


1.191
log
@catch pegasos up with the rest; ok deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.190 2004/01/12 22:31:34 todd Exp $
d341 1
a341 1
#MAKEDEVARCHS+= vax
@


1.190
log
@+ alph2d() (thanks dr!), allow ttyU's a-zA-Z to be created
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.189 2004/01/11 22:00:23 deraadt Exp $
d338 1
@


1.189
log
@support new MAKEDEV for pegasos; from todd
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.188 2003/12/24 20:37:03 henning Exp $
a337 1
MAKEDEVARCHS+= pegasos
@


1.188
log
@+bgpd.conf
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.187 2003/10/31 04:04:05 drahn Exp $
d338 1
@


1.187
log
@Pegasos port and dirs.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.186 2003/10/08 20:30:04 grange Exp $
d23 1
a23 1
	dhclient.conf mailer.conf
@


1.186
log
@Sample sensorsd.conf file.
ok henning@@ millert@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.185 2003/09/23 21:37:11 millert Exp $
d27 2
a28 1
     ${MACHINE} == "sparc" || ${MACHINE} == "sparc64")
@


1.185
log
@Sample files for /etc/mail, installed at 'make distribution' time.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.184 2003/08/21 19:10:19 frantzen Exp $
d82 1
@


1.184
log
@Add derivative of Michal Zalewski's p0f v2 passive OS fingerprint database
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.183 2003/06/27 21:26:19 david Exp $
d233 1
a233 5
	${INSTALL} -c -o root -g ${BINGRP} -m 644 aliases \
	    ${DESTDIR}/etc/mail/aliases
	/usr/libexec/sendmail/sendmail -C${DESTDIR}/etc/mail/sendmail.cf \
	    -bi -O AliasFile=${DESTDIR}/etc/mail/aliases \
	    -O DontBlameSendmail=mapinunsafedirpath
@


1.183
log
@remove kerberosIV configuration files
ok hin@@ deraadt@@ pb@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.182 2003/03/30 07:43:02 deraadt Exp $
d81 1
@


1.182
log
@default timezone: Canada/Mountain
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.181 2003/03/24 18:15:27 drahn Exp $
a105 11
	cd kerberosIV; \
		${INSTALL} -c -o root -g wheel -m 644 README \
		    ${DESTDIR}/etc/kerberosIV; \
		${INSTALL} -c -o root -g wheel -m 644 krb.conf \
		    ${DESTDIR}/etc/kerberosIV; \
		${INSTALL} -c -o root -g wheel -m 644 krb.realms \
		    ${DESTDIR}/etc/kerberosIV; \
		${INSTALL} -c -o root -g wheel -m 644 krb.extra \
		    ${DESTDIR}/etc/kerberosIV; \
		${INSTALL} -c -o root -g wheel -m 644 krb.equiv \
		    ${DESTDIR}/etc/kerberosIV
@


1.181
log
@Add *.iso to list of files in CKSUM/MD5 spotted by A.Farber.
ok millert@@ miod@@ deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.180 2003/03/10 21:08:44 millert Exp $
d4 1
a4 1
LOCALTIME=	US/Pacific
@


1.180
log
@Move /var/log/sendmail.st creation to etc/Makefile where it belongs;
noticed by grange@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.179 2003/03/08 19:03:44 beck Exp $
d282 2
a283 1
		md5 bsd!(*.gz) *boot* *BOOT* INSTALL.* *.fs *.gz *.tgz > MD5
d285 2
a286 1
		cksum bsd!(*.gz) *boot* *BOOT* INSTALL.* *.fs *.gz *.tgz > CKSUM
@


1.179
log
@default spamd.conf file, with entries for spews 1, spews 2, china and korea
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.178 2003/03/04 09:49:22 deraadt Exp $
d220 2
@


1.178
log
@copy cd*.iso also, for snapshots
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.177 2003/02/19 22:11:42 millert Exp $
d22 2
a23 2
	shells syslog.conf weekly etc.${MACHINE}/disktab dhclient.conf \
	mailer.conf
@


1.177
log
@Move contents of /var/at into /var/cron since at is now intergrated into
cron.  When ISC cron 5.0 is out the integration will be even tighter.

Also rename /var/cron/{allow,deny} -> /var/cron/cron.{allow,deny}
for consistency with POSIX and at.{allow,deny} and install an empty
cron.deny file (as we do at.deny) since crontab will require this
in the near future for POSIX compliance.

After a "make build" you can update your system as follows:
# mv /var/at/* /var/cron
# mv /var/cron/jobs /var/cron/atjobs
# mv /var/cron.allow /var/cron/cron.allow
# mv /var/cron.deny /var/cron/cron.deny
# rm -rf /var/at
# kill `cat /var/run/cron.pid` ; cron
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.176 2003/02/06 16:34:51 henning Exp $
d276 1
@


1.176
log
@make pf.conf 0600 by default

discussed and agreed theo and daniel
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.175 2003/02/04 01:35:08 deraadt Exp $
d195 3
a197 1
		${DESTDIR}/var/at/at.deny
@


1.175
log
@enable bind now; some diffs from jakob, some from me
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.174 2002/12/31 16:22:25 miod Exp $
d19 1
a19 1
	myname netstart networks newsyslog.conf pf.conf \
d34 1
d80 1
@


1.174
log
@Prepare for the removal of amiga and sun3 platforms from the tree.
There has not been enough activity and interest towards these platform
to keep them lying in the tree.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.173 2002/12/15 15:39:49 fgsch Exp $
a33 1
NAMEDB=	localhost.rev localhost.v6.rev localhost.zone root.cache
d169 15
a183 5
	cd namedb; \
	    ${INSTALL} -c -o root -g ${BINGRP} -m 644 named.boot \
		${DESTDIR}/var/named; \
	    ${INSTALL} -c -o named -g ${BINGRP} -m 644 ${NAMEDB} \
		${DESTDIR}/var/named/namedb
@


1.173
log
@record failed login attemps by default, aka enable /var/log/failedlogin.
pval@@ millert@@ ok.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.171 2002/09/06 21:30:22 deraadt Exp $
a323 1
MAKEDEVARCHS+= amiga
a333 1
MAKEDEVARCHS+= sun3
@


1.172
log
@Install /var/log/message 644 since the beginning and change back
newsyslog.conf to reflect that.  More people seem to prefer that,
and it can be easily changed if you like it another way.
millert, fgs and others verbally agree
@
text
@d193 2
@


1.171
log
@more photuris bits by bye bye
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.170 2002/08/31 07:28:32 miod Exp $
d201 1
a201 1
	${INSTALL} -c -o ${BINOWN} -g wheel -m 640 /dev/null \
@


1.170
log
@Install /etc/wsconsctl.conf on sparc.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.169 2002/07/18 20:57:50 provos Exp $
a132 9
	cd photuris; \
		${INSTALL} -c -o root -g wheel -m 600 secrets.conf \
		    ${DESTDIR}/etc/photuris; \
		${INSTALL} -c -o root -g wheel -m 600 attributes.conf \
		    ${DESTDIR}/etc/photuris; \
		${INSTALL} -c -o root -g wheel -m 600 photuris.conf \
		    ${DESTDIR}/etc/photuris; \
		${INSTALL} -c -o root -g wheel -m 600 photuris.startup \
		    ${DESTDIR}/etc/photuris
@


1.169
log
@policy for lpd
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.168 2002/07/18 20:37:47 provos Exp $
d26 2
a27 1
     ${MACHINE} == "i386" || ${MACHINE} == "macppc" || ${MACHINE} == "sparc64")
@


1.168
log
@named policy for systrace
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.167 2002/06/17 00:09:44 deraadt Exp $
d174 2
@


1.167
log
@we no longer do this.  why was it edited incorrectly?
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.166 2002/06/01 05:22:08 deraadt Exp $
d173 3
@


1.166
log
@fix mkr for libssl changes
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.165 2002/05/23 22:44:48 deraadt Exp $
d19 1
a19 1
	myname netstart networks newsyslog.conf pf.conf nat.conf \
@


1.165
log
@more dm parts going away; pjanzen
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.164 2002/05/22 00:10:34 deraadt Exp $
d226 1
a226 1
	cd ../lib/libssl && exec ${MAKE} -f Makefile.bsd-wrapper distribution
@


1.164
log
@oops, missed another file
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.163 2002/05/21 01:41:04 deraadt Exp $
d16 1
a16 1
	daily dhcpd.conf dhcpd.interfaces dm.conf exports ftpusers \
@


1.163
log
@remove MAKEDEV.local finally
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.162 2002/05/16 15:00:48 millert Exp $
d79 2
@


1.162
log
@No more /etc/skeykeys; brad@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.161 2002/05/14 18:05:38 millert Exp $
a78 2
	${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 555 \
	     MAKEDEV.local etc.${MACHINE}/MAKEDEV ${DESTDIR}/dev
@


1.161
log
@Major changes:

Job names are now "runtime.queue" where runtime is when the job will run
in Unix time format.  This is what SysV at does and allows us to nuke
the .SEQ file.

Historic BSD options for atq and atrm are now implemented;
atq and atrm get their own man pages.

At no longer does anything with the -v flag.  We print the execution
time when jobs are submitted so there is no need.

Most *scanf() usage is gone (one remains in atrun).

Better sanity checks in atrun.

Random style/cleanup.

With these changes we have the best of both worlds; POSIX compliance with
the traditional BSD features.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.160 2002/05/13 07:22:42 espie Exp $
a185 2
	${INSTALL} -c -o ${BINOWN} -g wheel -m 600 /dev/null \
		${DESTDIR}/etc/skeykeys
@


1.160
log
@move common distrib rules to main Makefile,
make -> ${MAKE}
add phony targets
remove unnecessary subshells
install kernel in a separate target from building.
some SUDO.

okay deraadt@@

(checked bootstrap on i386, should be safe elsewhere, and trivial to fix
anyways)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.159 2002/05/12 13:51:38 espie Exp $
a189 2
	${INSTALL} -c -o root -g crontab -m 660 /dev/null \
		${DESTDIR}/var/at/.SEQ
@


1.159
log
@Remove unnecessary subshells
make -> ${MAKE}
add exec at end of lines
sprinkle with SUDO where needed (not enough for a full release yet)
PHONY targets.

ok millert@@, deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.158 2002/05/11 18:41:19 millert Exp $
a342 3
all:
#	make M=${MACHINE} m4

d348 1
a348 1
	    make MACHINE=$$m clean; done
d361 4
@


1.158
log
@at(1) is no longer setuid root, it is setgid crontab.
This means that /var/at/at.{allow,deny} must be readable by group
crontab, /var/at/jobs is mode 01770, and /var/at/.SEQ is mode 0660.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.157 2002/04/28 14:56:38 miod Exp $
d81 1
a81 1
	(cd root; \
d92 2
a93 2
		ln ${DESTDIR}/root/.profile ${DESTDIR}/.profile)
	(cd skel; \
d103 2
a104 2
		    ${DESTDIR}/etc/skel/.rhosts)
	(cd kerberosIV; \
d114 2
a115 2
		    ${DESTDIR}/etc/kerberosIV)
	(cd kerberosV; \
d119 2
a120 2
		    ${DESTDIR}/etc/kerberosV)
	(cd amd; \
d122 2
a123 2
		    ${DESTDIR}/etc/amd)
	(cd mtree; \
d131 2
a132 2
		    ${DESTDIR}/etc/mtree)
	(cd photuris; \
d140 2
a141 2
		    ${DESTDIR}/etc/photuris)
	(cd ppp; \
d161 2
a162 2
		    ${DESTDIR}/etc/ppp)
	(cd afs; \
d172 2
a173 2
		    ${DESTDIR}/etc/afs)
	(cd namedb; \
d177 1
a177 1
		${DESTDIR}/var/named/namedb)
d226 7
a232 7
	(cd ../gnu/usr.sbin/sendmail/cf/cf; ${MAKE} distribution)
	(cd ../usr.sbin/ypserv/ypinit; ${MAKE} distribution)
	(cd ../usr.bin/ssh; ${MAKE} distribution)
	(cd ../usr.sbin/httpd; ${MAKE} -f Makefile.bsd-wrapper distribution)
	(cd ../lib/libssl; ${MAKE} -f Makefile.bsd-wrapper distribution)
	(cd ../gnu/usr.bin/lynx; ${MAKE} -f Makefile.bsd-wrapper distribution)
	(cd ../usr.bin/mail; ${MAKE} distribution)
d243 3
a245 2
distribution: distribution-etc-root-var
	(cd ..; ${MAKE} install)
d263 2
a264 2
	cd ${.CURDIR}/../distrib/notes; ${MAKE}; ${MAKE} install
	cd ${.CURDIR}/../distrib/sets; sh maketars ${OSrev}
d289 2
a290 2
	/bin/rm -rf ${DESTDIR}/snapshot
	${INSTALL} -d -o root -g wheel -m 755 ${DESTDIR}/snapshot
d363 1
a363 1
	    make M=$$m m4; done
d365 2
@


1.157
log
@Move mvme88k to the joys of the m4-generated MAKEDEV world.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.156 2002/04/17 22:54:20 miod Exp $
d188 1
a188 1
	${INSTALL} -c -o root -g wheel -m 600 /dev/null \
d190 2
@


1.156
log
@Regen mvme68k MAKEDEV, and add it to the list of m4 MAKEDEV enabled arches.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.155 2002/04/03 20:56:36 deraadt Exp $
d333 1
a333 1
#MAKEDEVARCHS+= mvme88k
@


1.155
log
@oops
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.154 2002/04/03 19:20:10 deraadt Exp $
d332 1
a332 1
#MAKEDEVARCHS+= mvme68k
@


1.154
log
@wsconsctl.conf for sparc64 too; mickey ok
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.153 2002/03/31 17:30:52 deraadt Exp $
d26 1
a26 1
     ${MACHINE} == "i386" || ${MACHINE} == "macppc") || ${MACHINE} == "sparc64")
@


1.153
log
@vax is not m4 yet
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.152 2002/03/07 00:11:40 millert Exp $
d26 1
a26 1
     ${MACHINE} == "i386" || ${MACHINE} == "macppc")
@


1.152
log
@Do not ignore mtree's exit value when updating via 4.4BSD.dist.
Use the -U flag instead of -u so mtree doesn't exit with non-zero
when fixing up existing permissions/owners.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.151 2002/02/26 19:08:05 deraadt Exp $
d338 1
a338 1
MAKEDEVARCHS+= vax
@


1.151
log
@if ${DESTDIR} exists, do not modify the mode
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.150 2002/02/16 01:20:42 deraadt Exp $
d248 1
a248 1
	-mtree -qdef mtree/4.4BSD.dist -p ${DESTDIR}/ -u
@


1.150
log
@hidden magic is stupid
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.149 2002/02/14 19:40:54 deraadt Exp $
d245 3
a247 1
	${INSTALL} -d -o root -g wheel -m 755 ${DESTDIR}
@


1.149
log
@install PCS on vax from here
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.148 2002/02/14 13:24:45 todd Exp $
d339 1
a339 1
	@@make M=${MACHINE} m4
d345 1
a345 1
	@@cd ${.CURDIR}; for m in ${MAKEDEVARCHS}; do \
d351 2
a352 2
	@@echo "==> etc.${M}/MAKEDEV"
	@@m4 -DMACHINE=${M} MAKEDEV.mi > etc.${M}/.MAKEDEV.tmp && \
d357 1
a357 1
	@@cd ${.CURDIR}; for m in ${MAKEDEVARCHS}; do \
@


1.148
log
@vax joins the fun.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.147 2002/02/14 04:37:15 todd Exp $
d219 4
a222 2
	(cd etc.vax; ${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 444 ${PCS} \
	    ${DESTDIR}/)
@


1.147
log
@hp300 joins the party; ok millert@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.146 2002/02/13 20:23:01 todd Exp $
d334 1
a334 1
#MAKEDEVARCHS+= vax
@


1.146
log
@hppa is in.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.145 2002/02/13 20:04:57 todd Exp $
d323 1
a323 1
#MAKEDEVARCHS+= hp300
@


1.145
log
@enable amiga
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.144 2002/02/09 14:13:37 deraadt Exp $
d324 1
a324 1
#MAKEDEVARCHS+= hppa
@


1.144
log
@indent
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.143 2002/02/08 20:13:36 todd Exp $
d322 1
a322 1
#MAKEDEVARCHS+= amiga
@


1.143
log
@No automatic in-tree modification. my bad!
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.142 2002/01/23 08:21:22 todd Exp $
d344 1
a344 1
		make MACHINE=$$m clean; done
d351 2
a352 2
	mv etc.${M}/.MAKEDEV.tmp etc.${M}/MAKEDEV || \
	rm etc.${M}/.MAKEDEV.tmp
d356 1
a356 1
	make M=$$m m4; done
@


1.142
log
@add vme, commented out at this point
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.141 2002/01/22 02:28:37 itojun Exp $
d58 1
a58 1
distribution-etc-root-var: distrib-dirs allarchs
@


1.141
log
@add files under etc/namedb.  noted by openbsd@@davidkrause.com
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.140 2002/01/08 06:32:15 todd Exp $
d328 3
@


1.140
log
@sync
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.139 2002/01/08 05:29:13 todd Exp $
d33 1
a33 1
NAMEDB=	localhost.rev root.cache
@


1.139
log
@sync
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.138 2002/01/08 01:06:44 todd Exp $
d328 1
a328 1
#MAKEDEVARCHS+= sparc
@


1.138
log
@enable sun3; ok miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.137 2002/01/07 07:54:15 todd Exp $
d321 1
a321 1
#MAKEDEVARCHS+= alpha
d326 2
a327 2
#MAKEDEVARCHS+= mac68k
#MAKEDEVARCHS+= macppc
@


1.137
log
@generate i386 (regress diff = more devices than before, ugen, etc..)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.136 2002/01/04 09:34:35 todd Exp $
d321 8
d330 2
a331 2
#MAKEDEVARCHS+= macppc
MAKEDEVARCHS+= i386
@


1.136
log
@rules to build the MAKEDEV files:

all       -> builds 'this' arch  (etc.$(uname -m)/MAKEDEV)
allarchs  -> builds all archs    (etc.*/MAKEDEV)
clean     -> cleans 'this' arch  (etc.$(uname -m)/MAKEDEV)
cleandirs -> cleans all archs    (etc.*/MAKEDEV)

also, build the MAKEDEV files during the release process
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.135 2001/12/25 01:30:22 deraadt Exp $
d321 3
a323 1
MAKEDEVARCHS+=sparc64
@


1.135
log
@convert mkr/ckr to shell scripts, use mktemp(1)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.133 2001/12/19 02:26:41 form Exp $
d58 1
a58 1
distribution-etc-root-var: distrib-dirs
d320 24
@


1.134
log
@close ppp.conf.sample file as requested
@
text
@d257 1
a257 1
	cd ${.CURDIR}/../distrib/sets; csh -f maketars ${OSrev}
@


1.133
log
@csh maketars -> csh -f maketars
ok millert@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.132 2001/09/21 22:13:51 deraadt Exp $
d154 1
a154 1
		${INSTALL} -c -o root -g wheel -m 644 ppp.conf.sample \
@


1.132
log
@do not run MAKEDEV
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.131 2001/09/20 22:17:41 hin Exp $
d257 1
a257 1
	cd ${.CURDIR}/../distrib/sets; csh maketars ${OSrev}
@


1.131
log
@Install etc/kerberosV/krb5.conf.example
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.130 2001/09/01 16:15:19 drahn Exp $
a217 3
.ifndef NOMAKEDEV
	(cd ${DESTDIR}/dev; ./MAKEDEV all)
.endif
@


1.130
log
@powerpc -> macppc port rename changes
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.129 2001/07/04 06:34:18 mickey Exp $
d117 2
@


1.129
log
@wsconsctl.conf support, wsconsctl accepts saner var names now; raadtified
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.128 2001/06/26 18:00:18 brad Exp $
d26 1
a26 1
     ${MACHINE} == "i386" || ${MACHINE} == "powerpc")
@


1.128
log
@bye bye MIPS related bits and pieces.
--
Ok'd by deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.127 2001/06/26 16:52:39 kjell Exp $
d24 5
@


1.127
log
@change default pf configuration files to pf.conf and nat.conf. ok theo
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.126 2001/06/26 13:29:11 dhartmei Exp $
a210 4
.if (${MACHINE_ARCH} == "mips")
	(cd etc.${MACHINE}; ${INSTALL} -c -o ${BINOWN} -g wheel -m 444 \
	    ld.so.conf ${DESTDIR}/etc)
.endif
@


1.126
log
@add pf.filter and pf.nat; ok @@deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.125 2001/06/25 03:32:50 hin Exp $
d19 1
a19 1
	myname netstart networks newsyslog.conf pf.filter pf.nat \
@


1.125
log
@Install /etc/kerberosV/README
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.124 2001/06/22 22:07:54 provos Exp $
d19 1
a19 1
	myname netstart networks newsyslog.conf \
@


1.124
log
@install new moduli
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.123 2001/06/18 21:09:22 millert Exp $
d110 3
@


1.123
log
@o move passwd.conf variables into login.conf
o no longer install passwd.conf (but it is used if it exists and the
  needed info is not in login.conf)
o added passwordtime and minpasswordlen login.conf variables
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.122 2001/05/30 02:11:04 deraadt Exp $
d73 1
a73 1
	${INSTALL} -c -o root -g wheel -m 644 primes ${DESTDIR}/etc
@


1.122
log
@Remove ipf.  Darren Reed has interpreted his (old, new, whichever)
licence in a way that makes ipf not free according to the rules we
established over 5 years ago, at www.openbsd.org/goals.html (and those
same basic rules govern the other *BSD projects too).  Specifically,
Darren says that modified versions are not permitted.  But software
which OpenBSD uses and redistributes must be free to all (be they
people or companies), for any purpose they wish to use it, including
modification, use, peeing on, or even integration into baby mulching
machines or atomic bombs to be dropped on Australia.  Furthermore, we
know of a number of companies using ipf with modification like us, who
are now in the same situation, and we hope that some of them will work
with us to fill this gap that now exists in OpenBSD (temporarily, we
hope).
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.121 2001/05/14 14:39:39 hin Exp $
d19 1
a19 1
	myname netstart networks newsyslog.conf passwd.conf \
@


1.121
log
@Install /etc/kerberosIV/krb.extra and /etc/kerberosIV/krb.equiv
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.120 2001/05/04 16:00:05 millert Exp $
d18 2
a19 2
	ipf.rules ksh.kshrc locate.rc man.conf monthly motd mrouted.conf \
	myname ipnat.rules netstart networks newsyslog.conf passwd.conf \
a189 2
	${INSTALL} -c -o ${BINOWN} -g wheel -m 640 /dev/null \
		${DESTDIR}/var/log/ipflog
@


1.120
log
@Install empty sudoers file in /etc
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.119 2001/04/01 19:40:16 deraadt Exp $
d105 4
@


1.119
log
@no longer install those now
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.118 2001/02/10 18:03:16 mickey Exp $
d231 2
@


1.118
log
@install wscons.conf and rc.wscons on alpha/hppa/i386/powerpc and call it from rc
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.117 2001/01/21 15:11:18 itojun Exp $
a23 4
.if ${MACHINE} == "alpha" || ${MACHINE} == "hppa" || \
    ${MACHINE} == "i386" || ${MACHINE} == "powerpc"
BIN1+=rc.wscons wscons.conf
.endif
@


1.117
log
@do not intsall rtadvd.conf into /etc, it is not required to use it
(rtadvd will derive the configuration from kernel settings).

make it clearer that rtadvd.conf is not necessary, in manpage.

sync with kame.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.116 2000/10/10 15:34:31 provos Exp $
d24 4
@


1.116
log
@add primes that can be used for diffie-hellman key exchange
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.115 2000/08/20 18:42:36 millert Exp $
d21 1
a21 1
	rc.securelevel rc.shutdown remote rpc rtadvd.conf security services \
@


1.115
log
@Add calls to setusercontext() and login_get*().  We basically call
setusercontext() in most places where previously we did a setlogin().
Add default login.conf file and put root in the "daemon" login class.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.114 2000/07/18 18:46:05 deraadt Exp $
d73 1
@


1.114
log
@chmod proper file; chouanard@@parc.xerox.com
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.113 2000/06/25 16:04:03 naddy Exp $
d70 1
@


1.113
log
@increase flexibility of distribution-etc-root-var:
- NOMAKEDEV to optionally skip making devices
- allow building aliases.db under /var/tmp
will come in handy with mergemaster; ok millert@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.112 2000/06/19 17:38:44 todd Exp $
d62 1
a62 1
	    chmod 644 ${DESTDIR}/etc/ttys
@


1.112
log
@cvs strikes again!; thanks to Oleg Safiullin <form@@openbsd.ru>
for pointing out this evaded the last commit
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.111 2000/04/29 22:04:55 deraadt Exp $
d208 1
d210 1
d225 2
a226 1
	    -bi -O AliasFile=${DESTDIR}/etc/mail/aliases
@


1.111
log
@handle .tgz files too
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.110 2000/04/25 21:17:29 jakob Exp $
d17 1
a17 1
	ftpchroot gettytab group hosts hosts.lpd ifaliases inetd.conf \
@


1.110
log
@fix install mode for skel/dot.rhosts
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.109 2000/04/25 20:52:47 jakob Exp $
d252 1
a252 1
		md5 bsd!(*.gz) *boot* *BOOT* INSTALL.* *.fs *.gz > MD5
d254 1
a254 1
		cksum bsd!(*.gz) *boot* *BOOT* INSTALL.* *.fs *.gz > CKSUM
@


1.109
log
@skeletal login directory into /etc/skel
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.108 2000/04/07 02:33:38 deraadt Exp $
d95 1
a95 1
		${INSTALL} -c -o root -g wheel -m 644 dot.rhosts \
@


1.108
log
@install correct cf distribution
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.107 2000/04/06 18:26:04 millert Exp $
d86 11
@


1.107
log
@Enable sendmail 8.10.0.  Things like sendmail.* and aliases now live
in /etc/mail.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.106 2000/01/11 13:50:03 peter Exp $
d202 1
a202 1
	(cd ../usr.sbin/sendmail/cf/cf; ${MAKE} distribution)
@


1.106
log
@sendmail is really /usr/libexec/sendmail/sendmail now - not /usr/sbin
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.105 2000/01/05 20:16:36 angelos Exp $
d15 1
a15 1
BIN1=	aliases bootptab changelist ccd.conf csh.cshrc csh.login csh.logout \
d209 4
a212 1
	/usr/libexec/sendmail/sendmail -C${DESTDIR}/etc/sendmail.cf -bi -O AliasFile=${DESTDIR}/etc/aliases
@


1.105
log
@rtadvd.conf
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.104 1999/11/26 21:29:37 millert Exp $
d209 1
a209 1
	/usr/sbin/sendmail -C${DESTDIR}/etc/sendmail.cf -bi -O AliasFile=${DESTDIR}/etc/aliases
@


1.104
log
@/var/db/locate.database should be owned by root, not nobody.  While
/usr/libexec/locate.updatedb does run as nobody the redirection is
done as root so the resulting file is owned by root.

sync log file owner/mode with what is is newsyslog.conf
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.103 1999/10/08 11:33:51 espie Exp $
d21 3
a23 2
	rc.securelevel rc.shutdown remote rpc security services shells \
	syslog.conf weekly etc.${MACHINE}/disktab dhclient.conf mailer.conf
@


1.103
log
@Oops... CKSUM should hold cksum results, and be sorted on 3rd field
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.102 1999/10/08 10:51:34 espie Exp $
d164 1
a164 1
	${INSTALL} -c -o nobody -g ${BINGRP} -m 664 /dev/null \
d166 1
a166 1
	${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 640 /dev/null \
d168 1
a168 1
	${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 664 /dev/null \
d170 1
a170 1
	${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 664 /dev/null \
d172 1
a172 1
	${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 664 /dev/null \
d174 1
a174 1
	${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 644 /dev/null \
d176 1
a176 1
	${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 664 /dev/null \
d178 1
a178 1
	${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 664 /dev/null \
d180 1
a180 1
	${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 664 /dev/null \
d182 1
a182 1
	${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 600 /dev/null \
d184 1
a184 1
	${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 644 /dev/null \
d186 1
a186 1
	${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 664 /dev/null \
d193 1
a193 1
	(cd etc.${MACHINE}; ${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 444 \
@


1.102
log
@Final framework for amiga tools.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.101 1999/09/29 21:50:23 deraadt Exp $
d244 1
a244 1
	cd ${RELEASEDIR} && md5 tools/* >>CKSUM
d247 1
a247 1
	-cd ${RELEASEDIR} && sort -o CKSUM CKSUM
@


1.101
log
@httpd has a Makefile.bsd-wrapper now
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.100 1999/09/28 07:19:27 deraadt Exp $
d240 8
@


1.100
log
@make distribution in ssh
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.99 1999/08/02 19:50:08 jakob Exp $
d204 1
a204 1
	(cd ../usr.sbin/httpd; ${MAKE} distribution)
@


1.99
log
@Integration of mailwrapper (from NetBSD)

"The mailwrapper program is designed to replace /usr/sbin/sendmail and to
invoke an appropriate MTA instead of sendmail(8) based on configuration
information placed in /etc/mailer.conf. This permits the administrator to
configure which MTA is to be invoked on the system at run time."

OK deraadt, millert
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.98 1999/07/06 07:55:03 deraadt Exp $
d203 1
@


1.98
log
@your basic rc.shutdown file
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.97 1999/04/30 00:46:25 art Exp $
d22 1
a22 1
	syslog.conf weekly etc.${MACHINE}/disktab dhclient.conf
@


1.97
log
@install afs/SuidCells
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.96 1999/03/17 18:26:07 deraadt Exp $
d21 2
a22 2
	rc.securelevel remote rpc security services shells syslog.conf weekly \
	etc.${MACHINE}/disktab dhclient.conf
@


1.96
log
@run libssl distribution target
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.95 1999/01/04 02:12:09 millert Exp $
d140 2
@


1.95
log
@namedb files go in /var/named/named
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.94 1998/12/01 04:33:27 form Exp $
d202 1
@


1.94
log
@chdir to ${DESTDIR}/ to create sys -> usr/src/sys link.
This avoids creating of incorrect symlink ${HOME}/sys -> usr/src/sys when
DESTDIR="".
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.93 1998/10/30 18:44:47 millert Exp $
d27 1
a27 1
NAMEDB=	localhost.rev named.boot root.cache
d143 5
a147 2
	cd namedb; ${INSTALL} -c -o named -g ${BINGRP} -m 644 ${NAMEDB} \
	    ${DESTDIR}/var/named
@


1.93
log
@Run mtree with -q in distrib-dirs target
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.92 1998/09/19 00:48:33 todd Exp $
d214 1
a214 1
	cd ${DESTDIR}; rm -f sys; ln -s usr/src/sys sys
@


1.92
log
@use OSrev
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.91 1998/09/15 18:18:14 art Exp $
d210 1
a210 1
	-mtree -def mtree/4.4BSD.dist -p ${DESTDIR}/ -u
@


1.91
log
@install afs configuration
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.90 1998/09/08 20:26:40 marc Exp $
d223 1
a223 1
	cd ${.CURDIR}/../distrib/sets; csh maketars
@


1.90
log
@dhcp client stuff. "Angelos D. Keromytis" <angelos@@dsl.cis.upenn.edu>
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.89 1998/08/20 03:21:45 form Exp $
d134 9
@


1.89
log
@add dhcpd.* to makefile
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.88 1998/07/05 12:53:30 art Exp $
d22 1
a22 1
	etc.${MACHINE}/disktab
@


1.88
log
@install krb.realms with 644 perms
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.87 1998/05/23 19:22:30 millert Exp $
d16 6
a21 6
	daily dm.conf exports ftpusers ftpchroot gettytab group hosts \
	hosts.lpd ifaliases inetd.conf ipf.rules ksh.kshrc \
	locate.rc man.conf monthly motd mrouted.conf myname ipnat.rules \
	netstart networks newsyslog.conf passwd.conf phones printcap \
	protocols rbootd.conf rc rc.conf rc.local rc.securelevel remote rpc \
	security services shells syslog.conf weekly \
@


1.87
log
@add named user and use /var/named, not /etc/namedb as the named dir
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.86 1998/05/05 21:51:51 deraadt Exp $
d90 1
a90 1
		${INSTALL} -c -o root -g wheel -m 444 krb.realms \
@


1.86
log
@split sysctl.conf into MD and MI parts
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.85 1998/04/07 23:24:06 ryker Exp $
d134 2
a135 2
	cd namedb; ${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 644 ${NAMEDB} \
	    ${DESTDIR}/etc/namedb
@


1.85
log
@Don't duplicate bsd*.gz in MD5 and CKSUM files.  Preserve CKSUM order.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.84 1998/04/07 22:48:50 deraadt Exp $
d21 1
a21 1
	security services shells sysctl.conf syslog.conf weekly \
d57 4
@


1.84
log
@solve a bsd*gz problem noted by ryker
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.83 1998/03/31 17:41:18 deraadt Exp $
d216 4
a219 4
	-cd ${RELEASEDIR}; md5 bsd* *boot* *BOOT* INSTALL.* *.fs *.gz | \
	    sort | uniq > MD5
	-cd ${RELEASEDIR}; cksum bsd* *boot* *BOOT* INSTALL.* *.fs *.gz | \
	    sort | uniq > CKSUM
@


1.83
log
@give root mail after install
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.82 1998/03/26 01:00:21 deraadt Exp $
d216 4
a219 2
	-cd ${RELEASEDIR}; md5 bsd* *boot* *BOOT* INSTALL.* *.fs *.gz > MD5
	-cd ${RELEASEDIR}; cksum bsd* *boot* *BOOT* INSTALL.* *.fs *.gz > CKSUM
@


1.82
log
@install sysctl.conf
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.81 1998/03/25 23:03:27 deraadt Exp $
d189 2
@


1.81
log
@distribution build in httpd
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.80 1998/03/11 22:39:03 maja Exp $
d20 3
a22 2
	protocols rbootd.conf rc rc.conf rc.local rc.securelevel remote rpc security \
	services shells syslog.conf weekly etc.${MACHINE}/disktab
@


1.80
log
@add lynx. -moj
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.79 1998/02/19 03:31:16 deraadt Exp $
d184 1
@


1.79
log
@oops
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.78 1997/12/11 03:03:04 brian Exp $
d184 1
@


1.78
log
@Hook the sample ppp configuration files.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.77 1997/10/24 15:57:13 deraadt Exp $
d18 1
a18 1
	locate.rc man.conf monthly motd mrouted.conf myname nat.rules \
@


1.77
log
@copy *BOOT* too for destdir building
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.76 1997/10/24 15:36:42 deraadt Exp $
d120 8
@


1.76
log
@wrong, Jason, wrong
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.74 1997/10/21 15:31:18 millert Exp $
d200 1
@


1.75
log
@Copy all of snapshot/ into ${RELEASEDIR}, and produce correct checksum
files.
@
text
@d198 6
a203 3
	-cp ${DESTDIR}/snapshot/* ${RELEASEDIR}
	-cd ${RELEASEDIR}; md5 * > .MD5; cksum * > .CKSUM; \
	    mv .MD5 MD5; mv .CKSUM CKSUM
d207 1
a207 1
	cd ${DESTDIR}/snapshot && cksum * > CKSUM
@


1.74
log
@Sync mode of authlog to what mtree/special says.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.73 1997/10/21 01:32:31 millert Exp $
d198 3
a200 6
	-cp ${DESTDIR}/snapshot/bsd* ${RELEASEDIR}
	-cp ${DESTDIR}/snapshot/*boot* ${RELEASEDIR}
	-cp ${DESTDIR}/snapshot/INSTALL.* ${RELEASEDIR}
	-cp ${DESTDIR}/snapshot/*.fs ${DESTDIR}/snapshot/*.fs.gz ${RELEASEDIR}
	-cd ${RELEASEDIR}; md5 bsd* *boot* *BOOT* INSTALL.* *.fs *.gz > MD5
	-cd ${RELEASEDIR}; cksum bsd* *boot* *BOOT* INSTALL.* *.fs *.gz > CKSUM
d204 1
a204 1
	cd ${DESTDIR}/snapshot && cksum * > CKSUMS
@


1.73
log
@Bring some file owner/group/mode's into sync with mtree/special.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.72 1997/10/20 04:47:17 downsj Exp $
d139 1
a139 1
	${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 660 /dev/null \
@


1.72
log
@cksum *BOOT*, too.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.71 1997/09/24 02:52:01 deraadt Exp $
d17 1
a17 1
	hosts.equiv hosts.lpd ifaliases inetd.conf ipf.rules ksh.kshrc \
d62 1
d71 1
a71 1
		${INSTALL} -c -o root -g wheel -m 644 dot.klogin \
d131 1
a131 1
	${INSTALL} -c -o ${BINOWN} -g operator -m 664 /dev/null \
d139 1
a139 1
	${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 664 /dev/null \
d147 1
a147 1
	${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 664 /dev/null \
d155 1
a155 1
	${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 664 /dev/null \
d157 1
a157 1
	${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 664 /dev/null \
d163 1
a163 1
	${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 664 /dev/null \
@


1.71
log
@oops
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.70 1997/09/24 02:05:17 deraadt Exp $
d201 2
a202 2
	-cd ${RELEASEDIR}; md5 bsd* *boot* INSTALL.* *.fs *.gz > MD5
	-cd ${RELEASEDIR}; cksum bsd* *boot* INSTALL.* *.fs *.gz > CKSUM
@


1.70
log
@sure would be nice to install those new mtree files that ports requires...
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.69 1997/09/11 22:38:46 downsj Exp $
d93 1
a93 1
		    ${DESTDIR}/etc/mtree)
d95 1
a95 1
		    ${DESTDIR}/etc/mtree)
@


1.69
log
@Make the sendmail aliases build actually work.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.68 1997/09/10 07:19:12 deraadt Exp $
d93 4
@


1.68
log
@operator can fiddle with dumpdates
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.67 1997/09/04 01:12:22 deraadt Exp $
a52 1
	/usr/sbin/sendmail -bi -O AliasFile=${DESTDIR}/etc/aliases
d172 1
@


1.67
log
@fork netstart; new child is rc.conf
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.66 1997/09/03 23:50:55 deraadt Exp $
d127 1
a127 1
	${INSTALL} -c -o ${BINOWN} -g operator -m 644 /dev/null \
@


1.66
log
@no more need for the fstab.* files
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.65 1997/09/03 23:44:07 deraadt Exp $
d20 1
a20 1
	protocols rbootd.conf rc rc.local rc.securelevel remote rpc security \
@


1.65
log
@build a aliases.db file into the distribution
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.64 1997/07/28 10:01:11 deraadt Exp $
a160 2
	(cd etc.${MACHINE}; ${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 444 \
	    fstab.* ${DESTDIR}/etc)
@


1.64
log
@install mail.rc at distribution time; bug found by explorer@@flame.org
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.63 1997/07/27 23:35:38 downsj Exp $
d53 1
@


1.63
log
@Remove refs to hcx9 and add usr/lkm to misc.tar.gz.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.62 1997/07/27 22:23:40 downsj Exp $
d173 1
@


1.62
log
@Don't install virc.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.61 1997/07/22 10:02:46 provos Exp $
a11 1
# disktab may be wrong -- hcx9 is a tahoe, but gets its own.
a176 4
hcx9-distribution:
	(cd etc.tahoe; ${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 444 ${WCS2} \
	    ${DESTDIR}/)

d229 2
a230 2
	cd ${DESTDIR} && tar cf - usr/mdec usr/libdata usr/local usr/src \
	    usr/obj | ${GZIP} ${GZIPFLAGS} \
@


1.61
log
@start the photuris daemon per default. hilfe.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.60 1997/05/19 19:31:22 deraadt Exp $
d22 1
a22 1
	services shells syslog.conf virc weekly etc.${MACHINE}/disktab
@


1.60
log
@oops
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.59 1997/05/18 20:29:39 pefo Exp $
d95 9
@


1.59
log
@Back out arc fiddling, wrong place...
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.58 1997/05/18 13:42:36 pefo Exp $
d187 1
@


1.58
log
@ARC ramdisk install stuff
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.57 1997/05/16 18:02:22 deraadt Exp $
a156 4
.endif
.if ${MACHINE} == "arc"
	(cd etc.${MACHINE}; ${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 444 \
	    mbr msdos5mb.gz ${DESTDIR}/usr/mdec)
@


1.57
log
@split release target off from snapshot targ
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.56 1997/05/12 22:21:50 deraadt Exp $
d48 1
a48 1
distribution-etc-root-var distribution distrib-dirs snapshot:
d157 4
@


1.56
log
@copy *boot* from snapshot too, if they exist
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.55 1997/05/12 19:29:53 deraadt Exp $
d186 1
a186 2
release:
	cd ${.CURDIR}; ${MAKE} snapshot
@


1.55
log
@gene asked
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.54 1997/05/11 10:11:03 deraadt Exp $
d190 1
d193 2
a194 2
	-cd ${RELEASEDIR}; md5 bsd* INSTALL.* *.fs *.gz > MD5
	-cd ${RELEASEDIR}; cksum bsd* INSTALL.* *.fs *.gz > CKSUM
@


1.54
log
@for release; copy bsd.* too -- ecoff/elf issue
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.53 1997/05/10 23:19:04 graichen Exp $
d189 1
a189 2
	-cp ${DESTDIR}/snapshot/bsd ${RELEASEDIR}
	-cp ${DESTDIR}/snapshot/bsd.* ${RELEASEDIR}
d192 2
a193 2
	-cd ${RELEASEDIR}; md5 bsd bsd.* INSTALL.* *.fs *.gz > MD5
	-cd ${RELEASEDIR}; cksum bsd bsd.* INSTALL.* *.fs *.gz > CKSUM
@


1.53
log
@install ld.so.conf on all mips machines too
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.52 1997/05/07 06:30:57 deraadt Exp $
d190 1
d193 2
a194 2
	-cd ${RELEASEDIR}; md5 bsd INSTALL.* *.fs *.gz > MD5
	-cd ${RELEASEDIR}; cksum bsd INSTALL.* *.fs *.gz > CKSUM
@


1.52
log
@more careful release build
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.51 1997/05/03 19:51:10 deraadt Exp $
d154 4
@


1.51
log
@arg
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.50 1997/05/03 19:47:18 deraadt Exp $
d185 5
a189 5
	cp ${DESTDIR}/snapshot/bsd ${RELEASEDIR}
	cp ${DESTDIR}/snapshot/INSTALL.* ${RELEASEDIR}
	cp ${DESTDIR}/snapshot/*.fs *.fs.gz ${RELEASEDIR}
	cd ${RELEASEDIR}; md5 bsd INSTALL.* *.fs *.gz > MD5
	cd ${RELEASEDIR}; cksum bsd INSTALL.* *.fs *.gz > CKSUM
@


1.50
log
@cleanup sets gen for release
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.49 1997/05/03 08:06:30 deraadt Exp $
d186 1
a186 1
	cp ${DESTDIR}/snapshot/RELEASE.* ${RELEASEDIR}
d188 2
a189 2
	cd ${RELEASEDIR}; md5 bsd RELEASE.* *.fs *.gz > MD5
	cd ${RELEASEDIR}; cksum bsd RELEASE.* *.fs *.gz > CKSUM
@


1.49
log
@release target. This is one monster target
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.48 1997/05/02 15:34:25 deraadt Exp $
d184 1
a184 1
	csh ${.CURDIR}/../distrib/sets/maketars
d187 3
a189 3
	cp ${DESTDIR}/snapshot/*.fs ${RELEASEDIR}
	cd ${RELEASEDIR}; md5 bsd *gz RELEASE.* *.fs > MD5
	cd ${RELEASEDIR}; cksum bsd *gz RELEASE.* *.fs > CKSUM
@


1.48
log
@build notes automatically
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.46 1997/04/20 10:19:24 maja Exp $
d176 15
@


1.47
log
@md5 too (yeah, i know this is not perfect)
@
text
@d214 1
@


1.46
log
@Added ${MAKE} distribution for ypinit in distribution-etc-root-var. -moj
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.45 1997/04/15 12:32:17 graichen Exp $
d179 1
@


1.45
log
@create empty /var/log/ipflog, sort the /var/log file creations
alphabetical :-) and remove the entry for tahoe (is the vax entry
still used ?)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.44 1997/04/15 09:26:44 deraadt Exp $
d160 1
@


1.44
log
@split rc.local, creating rc.securelevel. Read the comments. If you believe
in securelevels, follow them religiously. Problem found by millert...
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.43 1997/04/09 10:59:56 kstailey Exp $
d131 4
a142 2
		${DESTDIR}/var/log/ftpd
	${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 664 /dev/null \
a154 4
.if ${MACHINE} == "tahoe"
	(cd etc.tahoe; ${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 444 ${WCS1} \
	    ${DESTDIR}/)
.endif
@


1.43
log
@fix syntax errors
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.42 1997/04/09 02:41:55 kstailey Exp $
d21 2
a22 2
	protocols rbootd.conf rc rc.local remote rpc security services \
	shells syslog.conf virc weekly etc.${MACHINE}/disktab
@


1.42
log
@NAT example rules file
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.41 1997/03/02 04:41:53 millert Exp $
d20 2
a21 2
	netstart networks newsyslog.conf passwd.conf phones printcap
	protocols rbootd.conf rc rc.local remote rpc security services
@


1.41
log
@Install zero-length /var/at/at.deny to allow users to use at(1).
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.40 1997/02/17 21:58:49 deraadt Exp $
d19 4
a22 4
	locate.rc man.conf monthly motd mrouted.conf myname netstart \
	networks newsyslog.conf passwd.conf phones printcap protocols \
	rbootd.conf rc rc.local remote rpc security services shells \
	syslog.conf virc weekly etc.${MACHINE}/disktab
@


1.40
log
@do not put a space after a backslash
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.39 1997/02/16 23:11:55 provos Exp $
d120 2
@


1.39
log
@install passwd.conf
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.38 1997/01/23 03:41:24 millert Exp $
d21 1
a21 1
	rbootd.conf rc rc.local remote rpc security services shells \ 
@


1.38
log
@Don't mess with /usr/src if it already exists.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.37 1997/01/22 11:13:53 niklas Exp $
d20 3
a22 3
	networks newsyslog.conf phones printcap protocols rbootd.conf rc \
	rc.local remote rpc security services shells syslog.conf virc weekly \
	etc.${MACHINE}/disktab
@


1.37
log
@Redo the GZIP somewhat.  Use NOGZIP= to get no compression at all.
if NOGZIP is not set, these three vars are overidable: GZIP, GZIPFLAGS &
GZIPEXT.  Also do some s/install/\${INSTALL}/ edits
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.36 1997/01/21 12:02:41 graichen Exp $
d171 1
a171 1
	if [ ! -f ${DESTDIR}/usr/src ]; then \
@


1.36
log
@changing SNAP_GZIP_CMD to GZIP + GZIPEXT etc.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.35 1997/01/19 22:26:19 graichen Exp $
d32 13
d53 1
a53 1
	install -c -o ${BINOWN} -g ${BINGRP} -m 644 ${BIN1} ${DESTDIR}/etc
d62 3
a64 3
	install -c -o ${BINOWN} -g ${BINGRP} -m 664 ${BIN2} ${DESTDIR}/etc
	install -c -o root -g wheel -m 600 crontab ${DESTDIR}/var/cron/tabs/root
	install -c -o root -g wheel -m 600 master.passwd ${DESTDIR}/etc
d66 1
a66 1
	install -c -o ${BINOWN} -g ${BINGRP} -m 555 \
d69 1
a69 1
		install -c -o root -g wheel -m 644 dot.cshrc \
d71 1
a71 1
		install -c -o root -g wheel -m 644 dot.klogin \
d73 1
a73 1
		install -c -o root -g wheel -m 644 dot.login \
d75 1
a75 1
		install -c -o root -g wheel -m 644 dot.profile \
d81 1
a81 1
		install -c -o root -g wheel -m 644 README \
d83 1
a83 1
		install -c -o root -g wheel -m 644 krb.conf \
d85 1
a85 1
		install -c -o root -g wheel -m 444 krb.realms \
d88 1
a88 1
		install -c -o root -g wheel -m 644 master.sample \
d91 1
a91 1
		install -c -o root -g wheel -m 600 special \
d93 1
a93 1
		install -c -o root -g wheel -m 444 4.4BSD.dist \
d96 1
a96 1
		install -c -o root -g wheel -m 600 chap-secrets \
d98 1
a98 1
		install -c -o root -g wheel -m 600 options \
d100 1
a100 1
		install -c -o root -g wheel -m 600 options.leaf \
d102 1
a102 1
		install -c -o root -g wheel -m 600 options.sample \
d104 1
a104 1
		install -c -o root -g wheel -m 600 chatscript.sample \
d106 1
a106 1
		install -c -o root -g wheel -m 600 pap-secrets \
d108 1
a108 1
	cd namedb; install -c -o ${BINOWN} -g ${BINGRP} -m 644 ${NAMEDB} \
d114 1
a114 1
	install -c -o root -g wheel -m 644 minfree \
d116 1
a116 1
	install -c -o ${BINOWN} -g operator -m 664 /dev/null \
d118 1
a118 1
	install -c -o ${BINOWN} -g operator -m 644 /dev/null \
d120 1
a120 1
	install -c -o root -g wheel -m 600 /dev/null \
d122 1
a122 1
	install -c -o nobody -g ${BINGRP} -m 664 /dev/null \
d124 1
a124 1
	install -c -o ${BINOWN} -g ${BINGRP} -m 664 /dev/null \
d126 1
a126 1
	install -c -o ${BINOWN} -g ${BINGRP} -m 664 /dev/null \
d128 1
a128 1
	install -c -o ${BINOWN} -g ${BINGRP} -m 664 /dev/null \
d130 1
a130 1
	install -c -o ${BINOWN} -g ${BINGRP} -m 664 /dev/null \
d132 1
a132 1
	install -c -o ${BINOWN} -g ${BINGRP} -m 664 /dev/null \
d134 1
a134 1
	install -c -o ${BINOWN} -g ${BINGRP} -m 664 /dev/null \
d136 1
a136 1
	install -c -o ${BINOWN} -g ${BINGRP} -m 664 /dev/null \
d138 1
a138 1
	install -c -o ${BINOWN} -g ${BINGRP} -m 664 /dev/null \
d140 1
a140 1
	install -c -o ${BINOWN} -g ${BINGRP} -m 664 /dev/null \
d142 1
a142 1
	install -c -o ${BINOWN} -g ${BINGRP} -m 664 /dev/null \
d144 1
a144 1
	install -c -o daemon -g staff -m 664 /dev/null \
d146 1
a146 1
	install -c -o ${BINOWN} -g ${BINGRP} -m 664 /dev/null \
d148 1
a148 1
	(cd etc.${MACHINE}; install -c -o ${BINOWN} -g ${BINGRP} -m 444 \
d152 1
a152 1
	(cd etc.tahoe; install -c -o ${BINOWN} -g ${BINGRP} -m 444 ${WCS1} \
d156 1
a156 1
	(cd etc.vax; install -c -o ${BINOWN} -g ${BINGRP} -m 444 ${PCS} \
d165 1
a165 1
	(cd etc.tahoe; install -c -o ${BINOWN} -g ${BINGRP} -m 444 ${WCS2} \
d169 1
a169 1
	install -d -o root -g wheel -m 755 ${DESTDIR}
d172 1
a172 1
		install -d -o root -g wsrc -m 775 ${DESTDIR}/usr/src; \
d181 1
a181 13
	install -d -o root -g wheel -m 755 ${DESTDIR}/snapshot

# check if GZIP is set - else set it to "gzip"
# you may set it to "cat" alternatively for architectures
# where the gzip'ing would take too much time (pmax or slower :-)
# this way you get only tar'ed snap files and you can gzip
# them on a faster machine

.ifndef GZIP
GZIP=		gzip
GZIPFLAGS=	-9
GZIPEXT=	.gz
.endif
@


1.35
log
@add a variable SNAP_GZIP_CMD to the snap_tar target - here my comment
in the Makefile:

# check if SNAP_GZIP_CMD is set - else set it to "gzip -9"
# you may set it to "cat" alternatively for architectures
# where the gzip'ing would take too much time (pmax or slower :-)
# this way you get only tar'ed snap files and you can gzip
# them on a faster machine
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.34 1997/01/03 04:04:52 etheisen Exp $
d170 1
a170 1
# check if SNAP_GZIP_CMD is set - else set it to "gzip -9"
d176 4
a179 3
.ifndef SNAP_GZIP_CMD
SNAP_GZIP_CMD=	gzip -9
SNAP_GZIP_EXT=	.gz
d184 1
a184 1
	    | ${SNAP_GZIP_CMD} > snapshot/bin.tar${SNAP_GZIP_EXT}
d186 1
a186 1
	    | ${SNAP_GZIP_CMD} > snapshot/dev.tar${SNAP_GZIP_EXT}
d188 2
a189 2
	    root stand sys tmp | ${SNAP_GZIP_CMD} \
	    > snapshot/etc.tar${SNAP_GZIP_EXT}
d191 1
a191 1
	    | ${SNAP_GZIP_CMD} > snapshot/sbin.tar${SNAP_GZIP_EXT}
d193 1
a193 1
	    | ${SNAP_GZIP_CMD} > snapshot/usr.bin.tar${SNAP_GZIP_EXT}
d195 1
a195 1
	    | ${SNAP_GZIP_CMD} > snapshot/usr.games.tar${SNAP_GZIP_EXT}
d197 1
a197 1
	    | ${SNAP_GZIP_CMD} > snapshot/usr.include.tar${SNAP_GZIP_EXT}
d199 1
a199 1
	    | ${SNAP_GZIP_CMD} > snapshot/usr.lib.tar${SNAP_GZIP_EXT}
d201 1
a201 1
	    | ${SNAP_GZIP_CMD} > snapshot/usr.libexec.tar${SNAP_GZIP_EXT}
d203 2
a204 2
	    usr/obj | ${SNAP_GZIP_CMD} \
	    > snapshot/usr.misc.tar${SNAP_GZIP_EXT}
d206 1
a206 1
	    | ${SNAP_GZIP_CMD} > snapshot/usr.sbin.tar${SNAP_GZIP_EXT}
d208 1
a208 1
	    | ${SNAP_GZIP_CMD} > snapshot/usr.share.tar${SNAP_GZIP_EXT}
d210 1
a210 1
	    | ${SNAP_GZIP_CMD} > snapshot/var.tar${SNAP_GZIP_EXT}
@


1.34
log
@Install etc/amd/master.sample NOT master.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.33 1997/01/03 03:19:17 etheisen Exp $
d170 11
d182 19
a200 13
	cd ${DESTDIR} && tar cf - bin | gzip -9 > snapshot/bin.tar.gz
	cd ${DESTDIR} && tar cf - dev | gzip -9 > snapshot/dev.tar.gz
	cd ${DESTDIR} && tar cf - .profile .cshrc etc mnt root sys tmp | \
	    gzip -9 > snapshot/etc.tar.gz
	cd ${DESTDIR} && tar cf - sbin | gzip -9 > snapshot/sbin.tar.gz
	cd ${DESTDIR} && tar cf - usr/bin | gzip -9 > snapshot/usr.bin.tar.gz
	cd ${DESTDIR} && tar cf - usr/games | gzip -9 > \
	    snapshot/usr.games.tar.gz
	cd ${DESTDIR} && tar cf - usr/include | gzip -9 > \
	    snapshot/usr.include.tar.gz
	cd ${DESTDIR} && tar cf - usr/lib | gzip -9 > snapshot/usr.lib.tar.gz
	cd ${DESTDIR} && tar cf - usr/libexec | gzip -9 > \
	    snapshot/usr.libexec.tar.gz
d202 8
a209 5
	    usr/obj | gzip -9 > snapshot/usr.misc.tar.gz
	cd ${DESTDIR} && tar cf - usr/sbin | gzip -9 > snapshot/usr.sbin.tar.gz
	cd ${DESTDIR} && tar cf - usr/share | gzip -9 > \
	    snapshot/usr.share.tar.gz
	cd ${DESTDIR} && tar cf - var | gzip -9 > snapshot/var.tar.gz
@


1.33
log
@More /var/log 'placeholder' log files.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.32 1997/01/02 23:14:13 deraadt Exp $
d75 1
a75 1
		install -c -o root -g wheel -m 644 master \
@


1.32
log
@better perms for ppp stuff
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.31 1996/12/19 02:38:08 millert Exp $
d112 4
d126 2
d129 2
@


1.31
log
@make mode/group on /usr/src/ consistent with mtree/special
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.30 1996/12/10 21:11:16 deraadt Exp $
d83 1
a83 1
		install -c -o root -g wheel -m 644 chap-secrets \
d85 1
a85 1
		install -c -o root -g wheel -m 644 options \
d87 1
a87 1
		install -c -o root -g wheel -m 644 options.leaf \
d89 5
a93 1
		install -c -o root -g wheel -m 644 pap-secrets \
@


1.30
log
@uhm...zap that column shit
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.29 1996/12/08 21:27:11 tholo Exp $
d147 1
a147 1
		install -d -o root -g wheel -m 755 ${DESTDIR}/usr/src; \
@


1.29
log
@Install more files when making distribution
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.28 1996/11/30 16:40:22 michaels Exp $
a15 1
123456789012345678901234567890123456789012345678901234567890123456789012
@


1.28
log
@install locate.rc, noted by millert.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.26 1996/09/17 07:18:15 deraadt Exp $
d16 1
d18 4
a21 3
	daily dm.conf ftpusers ftpchroot gettytab group hosts hosts.equiv \
	hosts.lpd ifaliases inetd.conf ksh.kshrc locate.rc man.conf monthly \
	motd myname netstart newsyslog.conf phones printcap protocols rc \
@


1.27
log
@virc is sourced by vim when invoked as vi.
@
text
@d18 2
a19 2
	hosts.lpd ifaliases inetd.conf ksh.kshrc man.conf monthly motd \
	myname netstart newsyslog.conf phones printcap protocols rc \
a105 2
	install -c -o root -g wheel -m 644 /dev/null \
		${DESTDIR}/etc/locate.rc			
@


1.26
log
@split off distribution-etc-root-var target, which is useful; from graichen
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.25 1996/09/06 17:26:58 deraadt Exp $
d20 1
a20 1
	rc.local remote rpc security services shells syslog.conf weekly \
@


1.25
log
@sample amd/master file; idea from graichen
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.24 1996/08/24 20:52:22 deraadt Exp $
d34 1
a34 1
distribution distrib-dirs snapshot:
d38 1
a38 2
distribution: distrib-dirs
	(cd ..; ${MAKE} install)
d136 3
@


1.24
log
@provide sample /etc/ccd.conf; idea from graichen@@axp5.physik.fu-berlin.de
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.23 1996/08/16 22:05:36 michaels Exp $
d74 3
@


1.23
log
@install locate.rc.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.22 1996/08/14 08:28:03 downsj Exp $
d16 5
a20 5
BIN1=	aliases bootptab changelist csh.cshrc csh.login csh.logout daily \
	dm.conf ftpusers ftpchroot gettytab group hosts hosts.equiv hosts.lpd \
	ifaliases inetd.conf ksh.kshrc man.conf monthly motd myname netstart \
	newsyslog.conf phones printcap protocols rc rc.local remote rpc \
	security services shells syslog.conf weekly \
@


1.22
log
@Add /etc/ksh.kshrc.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.21 1996/08/10 12:30:27 deraadt Exp $
d104 2
@


1.21
log
@ftpd -US; create /var/log/ftpd for wu-style log files
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.20 1996/08/03 20:44:17 millert Exp $
d18 1
a18 1
	ifaliases inetd.conf man.conf monthly motd myname netstart \
@


1.20
log
@chgrp ${BINGRP} not ${BINOWN}
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.19 1996/07/31 12:29:16 deraadt Exp $
d112 2
@


1.19
log
@generate fbtab for each architecture
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.18 1996/07/28 09:00:45 deraadt Exp $
d43 1
a43 1
	    chgrp ${BINOWN} ${DESTDIR}/etc/ttys && \
d47 1
a47 1
	    chgrp ${BINOWN} ${DESTDIR}/etc/fbtab && \
@


1.18
log
@create pty component of /etc/ttys automatically
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.17 1996/06/21 21:20:49 dm Exp $
d45 4
@


1.17
log
@missing semi-colon
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.16 1996/06/17 07:19:27 deraadt Exp $
d20 1
a20 1
	security services shells syslog.conf weekly etc.${MACHINE}/ttys \
d41 4
@


1.16
log
@create /usr/src if it does not exist (but mtree did chown which is bad
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.15 1996/06/16 12:57:30 deraadt Exp $
d131 1
a131 1
		install -d -o root -g wheel -m 755 ${DESTDIR}/usr/src \
@


1.15
log
@install sample commented /etc/ifaliases file; which can now contain #
comments and blank lines. new format is "interface address netmask"
(yes, i changed the order of the entries). inspired by netbsd pr#2474;
gillhaa@@ghost.whirlpool.com
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.14 1996/06/03 07:20:41 mickey Exp $
d130 3
@


1.14
log
@reverse last change.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.13 1996/06/03 07:03:41 mickey Exp $
d18 4
a21 3
	inetd.conf man.conf monthly motd myname netstart newsyslog.conf \
	phones printcap protocols rc rc.local remote rpc security services \
	shells syslog.conf weekly etc.${MACHINE}/ttys etc.${MACHINE}/disktab
@


1.13
log
@add missed ${DESTDIR}
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.12 1996/06/02 05:05:36 tholo Exp $
d43 1
a43 1
	pwd_mkdb -p -d ${DESTDIR}/etc ${DESTDIR}/etc/master.passwd
@


1.12
log
@Don't install krb.equiv; it is no longer used
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.11 1996/05/26 10:25:16 deraadt Exp $
d43 1
a43 1
	pwd_mkdb -p -d ${DESTDIR}/etc /etc/master.passwd
@


1.11
log
@sync & label
@
text
@d1 1
a1 1
#	$OpenBSD$
a61 2
		    ${DESTDIR}/etc/kerberosIV; \
		install -c -o root -g wheel -m 644 krb.equiv \
@


1.10
log
@this is installed from elsewhere now..
@
text
@d1 1
a1 2
#	$NetBSD: Makefile,v 1.51 1995/11/01 13:52:40 pk Exp $
#	from: @@(#)Makefile	5.11 (Berkeley) 5/21/91
@


1.9
log
@strdup re-generated path in pwd_mkdb; "make distribution" passwd files with
proper arguments
@
text
@a89 2
	install -c -o root -g wheel -m 644 Makefile.yp \
		${DESTDIR}/var/yp.no/Makefile
@


1.8
log
@add "-d basedir" flag to pwd_mkdb. the use of "chroot" is incompatible
with our cross compilation/installation goals...
@
text
@d44 1
a44 1
	pwd_mkdb -p -d ${DESTDIR} /etc/master.passwd
@


1.7
log
@Fix pasto that caused 'make distribution' to break when installing ppp.
@
text
@d44 1
a44 1
	chroot ${DESTDIR}/ pwd_mkdb -p /etc/master.passwd
@


1.6
log
@add ppp stuff from distribution; someone should look at integrating what
the freebsd people have (way nicer)
@
text
@a80 1
		    ${DESTDIR}/etc/ppp; \
@


1.5
log
@install a /var/crash/minfree, of 4096, as suggested by david@@city.ac.uk
@
text
@d73 10
@


1.4
log
@Add sample kerberosIV configuration files
@
text
@d79 2
@


1.3
log
@install yp Makefile from here
@
text
@d59 9
@


1.2
log
@snapshot missing usr/libdata; from arnej@@imf.unit.no
@
text
@d1 1
a2 1
#	$Id: Makefile,v 1.1.1.1 1995/10/18 08:37:55 deraadt Exp $
d70 2
@


1.1
log
@Initial revision
@
text
@d2 1
a2 1
#	$Id: Makefile,v 1.49 1995/10/08 04:09:06 tls Exp $
d135 2
a136 2
	cd ${DESTDIR} && tar cf - usr/mdec usr/local usr/src usr/obj | \
	    gzip -9 > snapshot/usr.misc.tar.gz
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@

