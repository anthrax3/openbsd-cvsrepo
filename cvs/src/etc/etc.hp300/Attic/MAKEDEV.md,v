head	1.48;
access;
symbols
	OPENBSD_5_5:1.47.0.4
	OPENBSD_5_5_BASE:1.47
	OPENBSD_5_4:1.46.0.2
	OPENBSD_5_4_BASE:1.46
	OPENBSD_5_3:1.45.0.2
	OPENBSD_5_3_BASE:1.45
	OPENBSD_5_2:1.44.0.4
	OPENBSD_5_2_BASE:1.44
	OPENBSD_5_1_BASE:1.44
	OPENBSD_5_1:1.44.0.2
	OPENBSD_5_0:1.42.0.4
	OPENBSD_5_0_BASE:1.42
	OPENBSD_4_9:1.42.0.2
	OPENBSD_4_9_BASE:1.42
	OPENBSD_4_8:1.39.0.2
	OPENBSD_4_8_BASE:1.39
	OPENBSD_4_7:1.36.0.2
	OPENBSD_4_7_BASE:1.36
	OPENBSD_4_6:1.35.0.4
	OPENBSD_4_6_BASE:1.35
	OPENBSD_4_5:1.34.0.2
	OPENBSD_4_5_BASE:1.34
	OPENBSD_4_4:1.33.0.2
	OPENBSD_4_4_BASE:1.33
	OPENBSD_4_3:1.30.0.4
	OPENBSD_4_3_BASE:1.30
	OPENBSD_4_2:1.30.0.2
	OPENBSD_4_2_BASE:1.30
	OPENBSD_4_1:1.27.0.4
	OPENBSD_4_1_BASE:1.27
	OPENBSD_4_0:1.27.0.2
	OPENBSD_4_0_BASE:1.27
	OPENBSD_3_9:1.26.0.2
	OPENBSD_3_9_BASE:1.26
	OPENBSD_3_8:1.24.0.2
	OPENBSD_3_8_BASE:1.24
	OPENBSD_3_7:1.23.0.2
	OPENBSD_3_7_BASE:1.23
	OPENBSD_3_6:1.22.0.2
	OPENBSD_3_6_BASE:1.22
	OPENBSD_3_5:1.20.0.2
	OPENBSD_3_5_BASE:1.20
	OPENBSD_3_4:1.13.0.2
	OPENBSD_3_4_BASE:1.13
	OPENBSD_3_3:1.12.0.2
	OPENBSD_3_3_BASE:1.12
	OPENBSD_3_2:1.9.0.2
	OPENBSD_3_2_BASE:1.9
	OPENBSD_3_1:1.6.0.2
	OPENBSD_3_1_BASE:1.6;
locks; strict;
comment	@# @;


1.48
date	2014.03.18.22.36.29;	author miod;	state dead;
branches;
next	1.47;

1.47
date	2014.01.05.01.16.52;	author deraadt;	state Exp;
branches;
next	1.46;

1.46
date	2013.06.03.16.06.42;	author tedu;	state Exp;
branches;
next	1.45;

1.45
date	2012.08.23.06.15.28;	author deraadt;	state Exp;
branches;
next	1.44;

1.44
date	2011.12.21.23.12.24;	author miod;	state Exp;
branches;
next	1.43;

1.43
date	2011.10.06.20.49.27;	author deraadt;	state Exp;
branches;
next	1.42;

1.42
date	2010.11.19.20.55.48;	author miod;	state Exp;
branches;
next	1.41;

1.41
date	2010.09.30.15.27.54;	author claudio;	state Exp;
branches;
next	1.40;

1.40
date	2010.09.04.12.18.03;	author miod;	state Exp;
branches;
next	1.39;

1.39
date	2010.07.03.03.59.15;	author krw;	state Exp;
branches;
next	1.38;

1.38
date	2010.06.26.23.49.50;	author jsing;	state Exp;
branches;
next	1.37;

1.37
date	2010.06.09.16.10.25;	author todd;	state Exp;
branches;
next	1.36;

1.36
date	2009.08.13.15.12.36;	author deraadt;	state Exp;
branches;
next	1.35;

1.35
date	2009.06.03.14.45.39;	author jj;	state Exp;
branches;
next	1.34;

1.34
date	2009.01.25.17.30.48;	author miod;	state Exp;
branches;
next	1.33;

1.33
date	2008.06.14.23.09.05;	author todd;	state Exp;
branches;
next	1.32;

1.32
date	2008.06.13.21.07.28;	author todd;	state Exp;
branches;
next	1.31;

1.31
date	2008.06.12.18.52.46;	author todd;	state Exp;
branches;
next	1.30;

1.30
date	2007.05.28.22.26.02;	author todd;	state Exp;
branches;
next	1.29;

1.29
date	2007.05.27.01.50.35;	author todd;	state Exp;
branches;
next	1.28;

1.28
date	2007.05.26.19.54.23;	author todd;	state Exp;
branches;
next	1.27;

1.27
date	2006.04.16.02.49.52;	author todd;	state Exp;
branches;
next	1.26;

1.26
date	2005.12.27.18.50.26;	author miod;	state Exp;
branches;
next	1.25;

1.25
date	2005.10.06.18.02.29;	author otto;	state Exp;
branches;
next	1.24;

1.24
date	2005.08.01.22.22.13;	author deraadt;	state Exp;
branches;
next	1.23;

1.23
date	2005.01.14.22.39.15;	author miod;	state Exp;
branches;
next	1.22;

1.22
date	2004.08.03.21.46.46;	author miod;	state Exp;
branches;
next	1.21;

1.21
date	2004.04.11.18.05.23;	author millert;	state Exp;
branches;
next	1.20;

1.20
date	2004.03.12.18.25.18;	author miod;	state Exp;
branches;
next	1.19;

1.19
date	2004.02.20.19.13.08;	author miod;	state Exp;
branches;
next	1.18;

1.18
date	2004.02.17.11.18.06;	author miod;	state Exp;
branches;
next	1.17;

1.17
date	2004.02.16.19.01.01;	author miod;	state Exp;
branches;
next	1.16;

1.16
date	2004.02.14.17.24.31;	author todd;	state Exp;
branches;
next	1.15;

1.15
date	2004.02.10.01.31.20;	author millert;	state Exp;
branches;
next	1.14;

1.14
date	2004.01.13.15.13.14;	author todd;	state Exp;
branches;
next	1.13;

1.13
date	2003.06.18.18.08.59;	author todd;	state Exp;
branches;
next	1.12;

1.12
date	2002.12.25.20.20.20;	author miod;	state Exp;
branches;
next	1.11;

1.11
date	2002.12.05.04.30.21;	author kjc;	state Exp;
branches;
next	1.10;

1.10
date	2002.10.16.15.48.31;	author todd;	state Exp;
branches;
next	1.9;

1.9
date	2002.09.06.21.48.34;	author miod;	state Exp;
branches;
next	1.8;

1.8
date	2002.05.16.21.11.20;	author miod;	state Exp;
branches;
next	1.7;

1.7
date	2002.04.18.23.16.00;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	2002.04.14.23.26.45;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	2002.03.26.00.57.46;	author miod;	state Exp;
branches;
next	1.4;

1.4
date	2002.02.14.13.29.20;	author todd;	state Exp;
branches;
next	1.3;

1.3
date	2002.02.14.04.37.15;	author todd;	state Exp;
branches;
next	1.2;

1.2
date	2002.02.09.16.59.50;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	2002.02.08.20.26.36;	author todd;	state Exp;
branches;
next	;


desc
@@


1.48
log
@Retire hp300, mvme68k and mvme88k ports. These ports have no users, keeping
this hardware alive is becoming increasingly difficult, and I should heed the
message sent by the three disks which have died on me over the last few days.

Noone sane will mourn these ports anyway. So long, and thanks for the fish.
@
text
@define(MACHINE,hp300)dnl
vers(__file__,
	{-$OpenBSD: MAKEDEV.md,v 1.47 2014/01/05 01:16:52 deraadt Exp $-},
etc.MACHINE)dnl
dnl
dnl Copyright (c) 2001-2006 Todd T. Fries <todd@@OpenBSD.org>
dnl
dnl Permission to use, copy, modify, and distribute this software for any
dnl purpose with or without fee is hereby granted, provided that the above
dnl copyright notice and this permission notice appear in all copies.
dnl
dnl THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
dnl WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
dnl MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
dnl ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
dnl WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
dnl ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
dnl OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
dnl
dnl *** hp300 specific device scripts/descriptions
dnl
__devitem(ct, ct*, HP300 HP-IB cartridge tape drives,{-\&ct-})dnl
__devitem(hd, {-hd*-}, HP300 HP-IB disks)dnl
_mkdev(ct, ct*|mt*,
{-case $i in
	ct*) name=ct blk=major_ct_b chr=major_ct_c;;
	mt*) name=mt blk=major_mt_b chr=major_mt_c;;
	esac
	case $U in
	[0-7])
		four=Add($U, 4) eight=Add($U, 8)
		twelve=Add($U, 12) twenty=Add($U, 20)
		M r$name$U	c $chr $U 660 operator
		M r$name$four	c $chr $four 660 operator
		M r$name$eight	c $chr $eight 660 operator
		M r$name$twelve	c $chr $twelve 660 operator
		MKlist[${#MKlist[*]}]=";ln r$name$four nr$name$U";: sanity w/pdp11 v7
		MKlist[${#MKlist[*]}]=";ln r$name$twelve nr$name$eight";: ditto
		RMlist[${#RMlist[*]}]="nr$name$U nr$name$eight"
		;;
	*)
		echo bad unit for tape in: $1
		;;
	esac-})dnl
dnl
dnl
_TITLE(make)
_DEV(all)
_DEV(ramdisk)
_DEV(std)
_DEV(local)
_TITLE(dis)
_DEV(cd, 18, 9)
_DEV(hd, 9, 2)
_DEV(rd, 34, 8)
_DEV(sd, 8, 4)
_DEV(vnd, 19, 6)
_TITLE(tap)
_DEV(ch, 39)
_DEV(ct, 7, 0)
_DEV(mt, 16, 1)
_DEV(st, 20, 7)
_TITLE(term)
_DEV(apci)
_DEV(dca, 12)
_DEV(dcm, 15)
dnl _TITLE(call)
_TITLE(pty)
_DEV(ptm, 52)
_DEV(pty, 5)
_DEV(tty, 4)
_TITLE(cons)
_DEV(wsdisp, 40)
_DEV(wscons)
_DEV(wskbd, 41)
_DEV(wsmux, 43)
_TITLE(point)
_DEV(wsmouse, 42)
_TITLE(prn)
_DEV(ppi, 11)
_TITLE(spec)
_DEV(au, 44)
_DEV(bio, 49)
_DEV(bpf, 22)
_DEV(diskmap, 54)
_DEV(fdesc, 21)
_DEV(fuse, 57)
_DEV(hotplug, 56)
_DEV(lkm, 24)
_DEV(pf, 33)
_DEV(pppx, 55)
_DEV(rnd, 32)
_DEV(systrace, 50)
_DEV(tun, 23)
_DEV(uk, 37)
_DEV(vscsi, 53)
dnl
divert(__mddivert)dnl
dnl
ramdisk)
	_recurse std ct0 ct1 st0 st1 hd0 hd1 hd2 hd3 hd4
	_recurse sd0 sd1 sd2 sd3 sd4 cd0 cd1 rd0 pty0
	_recurse apci0 dca0 dcm0 dcm1 bio diskmap random
	_recurse bpf0 bpf1 tun0 tun1
	;;

_std(1, 2, 36, 6)
	;;

dca*)
	case $U in
	0|1|2|3)
		M tty$U c major_dca_c $U 660 dialer uucp
		M cua$U c major_dca_c Add($U, 128) 660 dialer uucp
		;;
	*)
		echo bad unit for dca in: $i
		;;
	esac
	;;

dcm*)
	case $U in
	0|1|2|3)
		u="$(( $U * 4 ))"
		i=0
		while [ $i -lt 4 ]
		do
			n="$(( $u + $i ))"
			ext=`hex $n`

			M tty0${ext} c 15 ${n} 660 dialer uucp
			M cua0${ext} c 15 "$(( $n + 128 ))" 660 dialer uucp

			i="$(( $i + 1 ))"
		done
		;;
	*)
		echo bad unit for dcm in: $i
		;;
	esac
	;;

apci*)
	# There exists only one Frodo ASIC per HP9000/400 SPU.
	case $U in
	0)
		for i in 0 1 2 3; do
			M ttya${i} c 35 ${i} 660 dialer uucp
			M cuaa${i} c 35 Add($i, 128) 660 dialer uucp
		done
		;;
	*)
		echo bad unit for apci in: $i
		;;
	esac
	;;

ppi*)
	case $U in
	0|1|2|3)
		M ppi$U c major_ppi_c $U 600
		;;
	*)
		echo bad unit for ppi in: $i
		;;
	esac
	;;

dnl
twrget(all, au, audio, 0)
target(all, ch, 0)dnl
target(all, vscsi, 0)dnl
target(all, diskmap)dnl
twrget(all, flo, fd, 0, 0B, 0C, 0D, 0E, 0F, 0G, 0H)dnl
twrget(all, flo, fd, 1, 1B, 1C, 1D, 1E, 1F, 1G, 1H)dnl
target(all, pty, 0)dnl
target(all, bpf, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9)dnl
target(all, bio)dnl
target(all, tun, 0, 1, 2, 3)dnl
target(all, xy, 0, 1, 2, 3)dnl
target(all, rd, 0)dnl
target(all, cd, 0, 1)dnl
target(all, sd, 0, 1, 2, 3, 4)dnl
target(all, st, 0, 1)dnl
target(all, uk, 0)dnl
target(all, vnd, 0, 1, 2, 3)dnl
target(all, dca, 0, 1)dnl
target(all, dcm, 0, 1, 2, 3)dnl
target(all, hd, 0, 1, 2)dnl
target(all, ct, 0, 1)dnl
target(ramd, ct, 0, 1)dnl
target(ramd, hd, 0, 1, 2)dnl
target(ramd, pty, 0)dnl
target(ramd, apci, 0)dnl
target(ramd, dca, 0)dnl
target(ramd, dcm, 0, 1)dnl
target(ramd, tun, 0, 1)dnl
@


1.47
log
@We need /dev/random on the install media
discussed with rpe and halex
@
text
@d3 1
a3 1
	{-$OpenBSD: MAKEDEV.md,v 1.46 2013/06/03 16:06:42 tedu Exp $-},
@


1.46
log
@userland fuse support, but not attaching libfuse yet. ok beck deraadt
from Sylvestre Gallon ccna.syl gmail.com
@
text
@d3 1
a3 1
	{-$OpenBSD: MAKEDEV.md,v 1.45 2012/08/23 06:15:28 deraadt Exp $-},
d103 2
a104 2
	_recurse apci0 dca0 dcm0 dcm1 bio diskmap
	_recurse bpf0 bpf1 tun0 tun1 lkm
@


1.45
log
@get rid of the nnpfs nodes
@
text
@d3 1
a3 1
	{-$OpenBSD: MAKEDEV.md,v 1.44 2011/12/21 23:12:24 miod Exp $-},
d87 1
@


1.44
log
@Add audio nodes on hp300.
@
text
@d3 1
a3 1
	{-$OpenBSD: MAKEDEV.md,v 1.43 2011/10/06 20:49:27 deraadt Exp $-},
a88 1
_DEV(nnpfs, 51)
a171 1
target(all, nnpfs, 0)dnl
@


1.43
log
@ccd goes to the attic
discussed with jsing and millert
@
text
@d3 1
a3 1
	{-$OpenBSD: MAKEDEV.md,v 1.42 2010/11/19 20:55:48 miod Exp $-},
d82 1
d171 1
@


1.42
log
@Sync MAKEDEV against conf.c, and both against GENERIC.
@
text
@d3 1
a3 1
	{-$OpenBSD: MAKEDEV.md,v 1.41 2010/09/30 15:27:54 claudio Exp $-},
a52 1
_DEV(ccd, 17, 5)
d187 4
a190 5
target(all, ccd, 0, 1, 2, 3)dnl
target( all, dca, 0, 1)dnl
target( all, dcm, 0, 1, 2, 3)dnl
target( all, hd, 0, 1, 2)dnl
target( all, ct, 0, 1)dnl
@


1.41
log
@Add pppx(4) to MAKEDEV but do not create the device unless requested
explicitly. OK dlg@@ & todd@@
@
text
@d3 1
a3 1
	{-$OpenBSD: MAKEDEV.md,v 1.40 2010/09/04 12:18:03 miod Exp $-},
d87 1
@


1.40
log
@Reorder device entries within sections, for MAKEDEV.8 to have them sorted.
Prodded by jmc@@.
@
text
@d3 1
a3 1
	{-$OpenBSD: MAKEDEV.md,v 1.39 2010/07/03 03:59:15 krw Exp $-},
d90 1
@


1.39
log
@No more ss(4) or usscanner(4). Unused, unloved and unmaintained.
General huzzahs.

"go for it" deraadt@@
@
text
@d3 1
a3 1
	{-$OpenBSD: MAKEDEV.md,v 1.38 2010/06/26 23:49:50 jsing Exp $-},
d74 1
a75 1
_DEV(wsdisp, 40)
d85 1
d88 1
a93 1
_DEV(nnpfs, 51)
a94 1
_DEV(diskmap, 54)
@


1.38
log
@Add /dev/diskmap to ramdisks.

ok todd@@ krw@@ deraadt@@
@
text
@d3 1
a3 1
	{-$OpenBSD: MAKEDEV.md,v 1.36 2009/08/13 15:12:36 deraadt Exp $-},
a88 1
_DEV(ss, 38)
a169 1
target(all, ss, 0)dnl
@


1.37
log
@add diskmap entries, not on ramdisks yet
get it in! jsing@@
@
text
@d102 1
a102 1
	_recurse apci0 dca0 dcm0 dcm1 bio
@


1.36
log
@Add nodes for vscsi0; ok dlg
@
text
@d3 1
a3 1
	{-$OpenBSD: MAKEDEV.md,v 1.35 2009/06/03 14:45:39 jj Exp $-},
d95 1
d174 1
@


1.35
log
@Arla client rename from xfs to nnpfs for later upgrades. Tested on various arches. ok todd@@ beck@@
@
text
@d3 1
a3 1
	{-$OpenBSD: MAKEDEV.md,v 1.34 2009/01/25 17:30:48 miod Exp $-},
d94 1
d172 1
@


1.34
log
@Remove /dev/drum and related code.
@
text
@d3 1
a3 1
	{-$OpenBSD: MAKEDEV.md,v 1.33 2008/06/14 23:09:05 todd Exp $-},
d93 1
a93 1
_DEV(xfs, 51)
d170 1
a170 1
target(all, xfs, 0)dnl
@


1.33
log
@redo the way MAKEDEV files are generated
get it in, deraadt@@
@
text
@d3 1
a3 1
	{-$OpenBSD: MAKEDEV.md,v 1.32 2008/06/13 21:07:28 todd Exp $-},
d104 1
a104 1
_std(1, 2, 36, 3, 6)
@


1.32
log
@/dev/bio on ramdisks, it is safe and small
ok deraadt@@, marco@@
@
text
@d1 1
d3 1
a3 1
	{-$OpenBSD: MAKEDEV.md,v 1.31 2008/06/12 18:52:46 todd Exp $-},
@


1.31
log
@no /dev/*random on ramdisks, libc uses the sysctl
please commit from deraadt@@
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.30 2007/05/28 22:26:02 todd Exp $-},
d99 1
a99 1
	_recurse apci0 dca0 dcm0 dcm1
@


1.30
log
@bio for all archs, ok krw@@ kettenis@@ sounds good marco@@ go for it deraadt@@
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.29 2007/05/27 01:50:35 todd Exp $-},
d100 1
a100 1
	_recurse bpf0 bpf1 tun0 tun1 lkm random
@


1.29
log
@back out bio, breaks dlg's sparc64 v215
prompted by/ok dlg@@ deraadt@@
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.28 2007/05/26 19:54:23 todd Exp $-},
d82 1
d174 1
@


1.28
log
@prodded by marco, enable bio everywhere
grudgingly ok deraadt@@
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.27 2006/04/16 02:49:52 todd Exp $-},
a81 1
_DEV(bio, 10)
a172 1
target(all, bio)dnl
@


1.27
log
@shuffle ramdisk device targets to MAKEDEV.common to avoid duplication and
pave the way for future work; ok since this does not change the generated
MAKEDEV
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.26 2005/12/27 18:50:26 miod Exp $-},
d82 1
d174 1
@


1.26
log
@Remove orphaned ttye nodes. No change in generated output.
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.25 2005/10/06 18:02:29 otto Exp $-},
d5 1
a5 1
dnl Copyright (c) 2001-2004 Todd T. Fries <todd@@OpenBSD.org>
a185 1
target(ramd, cd, 0, 1)dnl
a187 3
target(ramd, sd, 0, 1, 2)dnl
target(ramd, st, 0, 1)dnl
target(ramd, rd, 0, 1)dnl
a191 1
target(ramd, bpf, 0, 1)dnl
@


1.25
log
@Forgat this one, as noted by deraadt@@
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.24 2005/08/01 22:22:13 deraadt Exp $-},
a185 1
target( all, ttye, 0, 1, 2, 3, 4, 5, 6)dnl
@


1.24
log
@old ses device goes away
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.23 2005/01/14 22:39:15 miod Exp $-},
d36 3
a38 3
		MKlist="$MKlist;ln r$name$four nr$name$U";: sanity w/pdp11 v7
		MKlist="$MKlist;ln r$name$twelve nr$name$eight";: ditto
		RMlist="$RMlist nr$name$U nr$name$eight"
@


1.23
log
@Switch OpenBSD/hp300 to wscons, still using on-board ROM fonts for now.

Main features:
- MI hil drivers, allowing live plug/unplug of devices, and the keyboard
  does not need to be at id 1 anymore.
- SGC bus support on 4xx models. SGC frame buffers are supported too, but
  not as console, though you can use them as a regular glass terminal if
  you run a getty on ttyC0. Currently not compiled-in, awaiting for an sti(4)
  fix to be commited.
- HP-UX compatibility interfaces are removed. grfinfo and hilinfo are removed.

X11 support is currently broken by these changes; X.org X11R6 support will
be available very soon.

Tested on hyperion and 4 different flavours of catseye/topcat/kathmandu; other,
older frame buffers (davinci, gatorbox and renaissance) could not been tested
but should work; please report any regression.
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.22 2004/08/03 21:46:46 miod Exp $-},
a165 1
target(all, ses, 0)dnl
@


1.22
log
@Replace the old 4.4BSD scsi code used on hp300 with a ``real'' driver
interfaced with the MI scsi code.

Adapted from NetBSD with some changes (especially to get tape and old
cd-rom drives to not cause the driver to spin during probe).

Tested by millert@@ and I, ok millert@@
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.21 2004/04/11 18:05:23 millert Exp $-},
a43 1
__devitem(grf, grf*, Raw interface to HP300 graphics devices)dnl
d73 6
a78 2
_DEV(grf, 10)
_DEV(ite)
a83 1
_DEV(hil, 14)
d98 1
a98 1
	_recurse hil grf0 apci0 ite0 dca0 dcm0 dcm1
a164 31
ite*)
	case $U in
	0|1|2|3)
		M ttye$U c 13 $U 600
		;;
	*)
		echo bad unit for ite in: $i
		;;
	esac
	;;

grf*)
	case $U in
	0|1|2|3)
		M grf$U c major_grf_c $U 600
		;;
	*)
		echo bad unit for grf in: $i
		;;
	esac
	;;

hil)
	for U in 0 1 2 3 4 5 6 7
	do
		M hil$U c 14 $U 600
	done
	MKlist="$MKlist;ln hil1 keyboard"
	MKlist="$MKlist;ln hil3 locator"
	RMlist="$RMlist keyboard locator"
	;;
a182 3
target( all, grf, 0)dnl
dnl XXX target( all, hil, 0, 1, 2, 3, 4, 5, 6, 7)dnl
target( all, hil, )dnl
a186 1
target( all, ite, 0)dnl
a194 2
target(ramd, hil, )dnl
target(ramd, grf, 0)dnl
a195 1
target(ramd, ite, 0)dnl
@


1.21
log
@Update for pty changes (62 per letter instead of just 16)
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.20 2004/03/12 18:25:18 miod Exp $-},
d23 1
a23 1
_mkdev(st_hp300, ct*|mt*|st*,
a26 1
	st*) name=st blk=major_st_hp300_b chr=major_st_hp300_c;;
a43 1
__devitem(st_hp300, st*, Exabyte tape,st)dnl
d54 1
d60 1
d63 1
a63 1
_DEV(st_hp300, 20, 7)
d85 2
d88 1
a88 1
_DEV(systrace, 50)
d95 1
a95 1
	_recurse sd0 sd1 sd2 sd3 sd4 rd0 pty0
d197 1
a197 1
target(all, ss, 0, 1)dnl
d208 2
a214 1
twrget( all, st_hp300, st, 0, 1)dnl
d221 1
d225 1
@


1.20
log
@Cause ct to be escaped in nroff output; spotted by jmc.
No regen necessary except for hp300 MAKEDEV.8
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.19 2004/02/20 19:13:08 miod Exp $-},
d199 1
a199 1
target(all, pty, 0, 1, 2)dnl
@


1.19
log
@MAKEDEV.8 improvement pack:
- refer to the section 4 manual page for every device target, whenever
possible
- repair a few minor quoting errors
- repair a few sorting errors
- fix a few device descriptions (ideally they would be synched with the
  .Nd line of their manpages, but we are not there... yet)
- minor mdoc fixes

Thanks to jmc@@ for review and a lot of constructive criticism.
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.18 2004/02/17 11:18:06 miod Exp $-},
d21 1
@


1.18
log
@Move conflicting hd(4) definitions to MD files.
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.17 2004/02/16 19:01:01 miod Exp $-},
d44 1
a44 1
__devitem(st_hp300, st*, Exabyte tape)dnl
@


1.17
log
@Harmonize MAKEDEV sources:
- homogenize section order
- sort devices inside sections
- make sure all platforms provide a local target (sigh)
- remove a few dead devices not worth mentioning on a few arches while there.

disabused ok deraadt@@
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.16 2004/02/14 17:24:31 todd Exp $-},
d21 1
@


1.16
log
@copyright 2004 as well, prompted/reminded by miod
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.15 2004/02/10 01:31:20 millert Exp $-},
d44 1
a44 2
__devitem(grf, grf*, raw interface to HP300 graphics devices)dnl
__devitem(ttye, ttye*, ite bitmapped consoles)dnl
d49 1
a51 4
_TITLE(tap)
_DEV(ct, 7, 0)
_DEV(mt, 16, 1)
_DEV(st_hp300, 20, 7)
d55 1
d58 6
a63 2
_DEV(rd, 34, 8)
_TITLE(termp)
d66 1
a66 1
_DEV(apci)
d68 2
d71 3
a73 2
_DEV(pty, 5)
_DEV(ptm, 52)
a75 1
_TITLE(call)
d77 1
a78 2
_DEV(grf, 10)
_DEV(ite)
d80 1
a80 2
_DEV(bpf, 22)
_DEV(tun, 23)
a81 1
_DEV(lkm, 24)
d83 2
a85 1
_DEV(systrace, 50)
d87 1
a87 1
divert(7)dnl
@


1.15
log
@Add the ptm device to pty(4).  By opening /dev/ptm and using the PTMGET
ioctl(2), an unprivileged process may allocate a pty and have its owner
and mode set appropriately.  This means that programs such as xterm and
screen no longer need to be setuid.  Programs using the openpty()
function require zero changes and will "just work".

Designed by beck@@ and deraadt@@; changes by beck@@ with cleanup (and
a rewrite of the vnode bits) by art@@ and tweaks/bugfixes by me.
Tested by many.
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.14 2004/01/13 15:13:14 todd Exp $-},
d5 1
a5 1
dnl Copyright (c) 2001,2002,2003 Todd T. Fries <todd@@OpenBSD.org>
@


1.14
log
@shovel ttye to md; ok miod@@
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.13 2003/06/18 18:08:59 todd Exp $-},
d69 1
@


1.13
log
@switch to share/misc/license.template
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.12 2002/12/25 20:20:20 miod Exp $-},
d45 1
d213 1
@


1.12
log
@Fix st(4) block major. Gasp.
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.11 2002/12/05 04:30:21 kjc Exp $-},
d5 1
a5 2
dnl Copyright (c) 2001 Todd T. Fries <todd@@OpenBSD.org>
dnl All rights reserved.
d7 3
a9 7
dnl Redistribution and use in source and binary forms, with or without
dnl modification, are permitted provided that the following conditions
dnl are met:
dnl 1. Redistributions of source code must retain the above copyright
dnl    notice, this list of conditions and the following disclaimer.
dnl 2. The name of the author may not be used to endorse or promote products
dnl    derived from this software without specific prior written permission.
d11 7
a17 10
dnl THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES,
dnl INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY
dnl AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL
dnl THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
dnl EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
dnl PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
dnl OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
dnl WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
dnl OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
dnl ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
@


1.11
log
@remove altq entries.  I should have done these before MAKEDEV.
pointed out by todd@@
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.10 2002/10/16 15:48:31 todd Exp $-},
d62 1
a62 1
_DEV(st_hp300, 20, 6)
@


1.10
log
@move md things into md files (pass 1) as discussed a long time ago
ok miod@@
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.9 2002/09/06 21:48:34 miod Exp $-},
a89 1
_DEV(altq, 52)
@


1.9
log
@Stricter permission on hil and grf devices, and use fbtab to relax them
whenever necessary.
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.8 2002/05/16 21:11:20 miod Exp $-},
d27 27
d196 38
@


1.8
log
@Add systrace support to all the remaining architectures.

Tested by various people on various platforms, I'm willing to fix any
breakage this causes.

ok niels@@ deraadt@@ and mickey@@ (after his comments were applied)
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.7 2002/04/18 23:16:00 deraadt Exp $-},
d152 1
a152 2
		M grf$U c major_grf_c $U
#		echo "grf$U: use MAKEDEV.hpux to make HP-UX names for device"
d160 1
a160 1
hil*)
d163 1
a163 1
		M hil$U c 14 $U
@


1.7
log
@oops, there is no cd0 on hp300
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.6 2002/04/14 23:26:45 deraadt Exp $-},
d64 1
@


1.6
log
@add missing cd0 devices to ramdisk targets
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.5 2002/03/26 00:57:46 miod Exp $-},
d68 1
a68 1
	_recurse std ct0 ct1 st0 st1 hd0 hd1 hd2 hd3 hd4 cd0
@


1.5
log
@Always create the hp-ux compatibility hil devices with the same numbers,
rather than probing the current system to find them.
This is bad, but not as worse as depending on hilinfo for proper operation.
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.4 2002/02/14 13:29:20 todd Exp $-},
d68 1
a68 1
	_recurse std ct0 ct1 st0 st1 hd0 hd1 hd2 hd3 hd4
@


1.4
log
@complete the function arg KNF spacing
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.3 2002/02/14 04:37:15 todd Exp $-},
a163 21
		if [ -f /usr/sbin/hilinfo ]
		then
			case `/usr/sbin/hilinfo -t hil$U` in
			mouse)
				if [ ! -f locator ]
				then
					MKlist="$MKlist;ln hil$U locator"
					RMlist="$RMlist locator"
				fi
				;;
			keyboard)
				if [ ! -f keyboard ]
				then
					MKlist="$MKlist;ln hil$U keyboard"
					RMlist="$RMlist keyboard"
				fi
				;;
			*)
				;;
			esac
		fi
d165 3
a167 7
	if [ ! -f /usr/sbin/hilinfo ]
	then
		MKlist="$MKlist;ln hil1 keyboard"
		MKlist="$MKlist;ln hil3 locator"
		RMlist="$RMlist keyboard locator"
	fi
#	echo "hil: use MAKEDEV.hpux to make HP-UX names for devices"
@


1.3
log
@hp300 joins the party; ok millert@@
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.2 2002/02/09 16:59:50 deraadt Exp $-},
d33 3
a35 3
_DEV(ct,7,0)
_DEV(mt,16,1)
_DEV(st_hp300,20,6)
d37 5
a41 5
_DEV(ccd,17,5)
_DEV(hd,9,2)
_DEV(sd,8,4)
_DEV(vnd,19,6)
_DEV(rd,34,8)
d43 2
a44 2
_DEV(dca,12)
_DEV(dcm,15)
d47 2
a48 2
_DEV(tty,4)
_DEV(pty,5)
d50 1
a50 1
_DEV(ppi,11)
d53 2
a54 2
_DEV(fdesc,21)
_DEV(grf,10)
d56 8
a63 8
_DEV(hil,14)
_DEV(bpf,22)
_DEV(tun,23)
_DEV(pf,33)
_DEV(lkm,24)
_DEV(rnd,32)
_DEV(xfs,51)
_DEV(altq,52)
d74 1
a74 1
_std(1,2,36,3,6)
d81 1
a81 1
		M cua$U c major_dca_c Add($U,128) 660 dialer uucp
d117 1
a117 1
			M cuaa${i} c 35 Add($i,128) 660 dialer uucp
@


1.2
log
@use "ramdisk" for the ramdisk target, always
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.1 2002/02/08 20:26:36 todd Exp $-},
d43 2
a44 2
_DEV(dca)
_DEV(dcm)
d54 1
a54 1
_DEV(grf_hp300)
d56 1
a56 1
_DEV(hil,)
d80 2
a81 2
		M tty$U c 12 $U 660 dialer uucp
		M cua$U c 12 Add($U,128) 660 dialer uucp
d129 1
a129 1
		M ppi$U c MACHINE_ppi_maj $U 600
d151 1
a151 1
		M grf$U c 10 $U
@


1.1
log
@prepare for invasion, sparc64 gets major number fix wrt tty[a-d]
order a few places
provide '[ "$DEBUG" ] && set -x' inside R() for debugging help ..
@
text
@d2 1
a2 1
	{-$OpenBSD: MAKEDEV.md,v 1.29 1998/11/19 08:18:56 dugsong Exp$-},
d67 1
a67 1
raminst)
d69 1
a69 1
	_recurse sd0 sd1 sd2 sd3 sd4 rd0 rd1 pty0
@

