head	1.24;
access;
symbols
	OPENBSD_5_5:1.23.0.14
	OPENBSD_5_5_BASE:1.23
	OPENBSD_5_4:1.23.0.10
	OPENBSD_5_4_BASE:1.23
	OPENBSD_5_3:1.23.0.8
	OPENBSD_5_3_BASE:1.23
	OPENBSD_5_2:1.23.0.6
	OPENBSD_5_2_BASE:1.23
	OPENBSD_5_1_BASE:1.23
	OPENBSD_5_1:1.23.0.4
	OPENBSD_5_0:1.23.0.2
	OPENBSD_5_0_BASE:1.23
	OPENBSD_4_9:1.21.0.8
	OPENBSD_4_9_BASE:1.21
	OPENBSD_4_8:1.21.0.6
	OPENBSD_4_8_BASE:1.21
	OPENBSD_4_7:1.21.0.2
	OPENBSD_4_7_BASE:1.21
	OPENBSD_4_6:1.21.0.4
	OPENBSD_4_6_BASE:1.21
	OPENBSD_4_5:1.19.0.12
	OPENBSD_4_5_BASE:1.19
	OPENBSD_4_4:1.19.0.10
	OPENBSD_4_4_BASE:1.19
	OPENBSD_4_3:1.19.0.8
	OPENBSD_4_3_BASE:1.19
	OPENBSD_4_2:1.19.0.6
	OPENBSD_4_2_BASE:1.19
	OPENBSD_4_1:1.19.0.4
	OPENBSD_4_1_BASE:1.19
	OPENBSD_4_0:1.19.0.2
	OPENBSD_4_0_BASE:1.19
	OPENBSD_3_9:1.18.0.6
	OPENBSD_3_9_BASE:1.18
	OPENBSD_3_8:1.18.0.4
	OPENBSD_3_8_BASE:1.18
	OPENBSD_3_7:1.18.0.2
	OPENBSD_3_7_BASE:1.18
	OPENBSD_3_6:1.17.0.10
	OPENBSD_3_6_BASE:1.17
	OPENBSD_3_5:1.17.0.8
	OPENBSD_3_5_BASE:1.17
	OPENBSD_3_4:1.17.0.6
	OPENBSD_3_4_BASE:1.17
	OPENBSD_3_3:1.17.0.4
	OPENBSD_3_3_BASE:1.17
	OPENBSD_3_2:1.17.0.2
	OPENBSD_3_2_BASE:1.17
	OPENBSD_3_1:1.16.0.12
	OPENBSD_3_1_BASE:1.16
	OPENBSD_3_0:1.16.0.10
	OPENBSD_3_0_BASE:1.16
	OPENBSD_2_9:1.16.0.8
	OPENBSD_2_9_BASE:1.16
	OPENBSD_2_8:1.16.0.6
	OPENBSD_2_8_BASE:1.16
	OPENBSD_2_7:1.16.0.4
	OPENBSD_2_7_BASE:1.16
	OPENBSD_2_6:1.16.0.2
	OPENBSD_2_6_BASE:1.16
	OPENBSD_2_5:1.15.0.8
	OPENBSD_2_5_BASE:1.15
	OPENBSD_2_4:1.15.0.6
	OPENBSD_2_4_BASE:1.15
	OPENBSD_2_3:1.15.0.4
	OPENBSD_2_3_BASE:1.15
	OPENBSD_2_2:1.15.0.2
	OPENBSD_2_2_BASE:1.15
	OPENBSD_2_1:1.4.0.2
	OPENBSD_2_1_BASE:1.4
	OPENBSD_2_0:1.2.0.2
	OPENBSD_2_0_BASE:1.2
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.24
date	2014.03.18.22.36.29;	author miod;	state dead;
branches;
next	1.23;

1.23
date	2011.07.22.09.30.54;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2011.04.15.03.11.38;	author deraadt;	state Exp;
branches;
next	1.21;

1.21
date	2009.04.21.09.12.26;	author deraadt;	state Exp;
branches;
next	1.20;

1.20
date	2009.04.17.03.58.53;	author deraadt;	state Exp;
branches;
next	1.19;

1.19
date	2006.07.27.02.53.55;	author deraadt;	state Exp;
branches;
next	1.18;

1.18
date	2005.03.08.20.03.04;	author miod;	state Exp;
branches;
next	1.17;

1.17
date	2002.05.13.07.22.42;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	99.08.18.17.27.14;	author downsj;	state Exp;
branches;
next	1.15;

1.15
date	97.10.24.12.38.41;	author downsj;	state Exp;
branches;
next	1.14;

1.14
date	97.10.20.13.26.49;	author downsj;	state Exp;
branches;
next	1.13;

1.13
date	97.10.20.04.15.24;	author downsj;	state Exp;
branches;
next	1.12;

1.12
date	97.10.20.03.47.20;	author downsj;	state Exp;
branches;
next	1.11;

1.11
date	97.10.19.20.36.13;	author deraadt;	state Exp;
branches;
next	1.10;

1.10
date	97.10.19.20.25.08;	author deraadt;	state Exp;
branches;
next	1.9;

1.9
date	97.10.19.20.22.21;	author deraadt;	state Exp;
branches;
next	1.8;

1.8
date	97.10.19.20.19.03;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	97.10.19.10.35.29;	author downsj;	state Exp;
branches;
next	1.6;

1.6
date	97.10.13.07.45.34;	author downsj;	state Exp;
branches;
next	1.5;

1.5
date	97.09.21.11.50.23;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	97.02.19.10.07.26;	author downsj;	state Exp;
branches;
next	1.3;

1.3
date	97.02.03.07.02.10;	author downsj;	state Exp;
branches;
next	1.2;

1.2
date	96.04.23.03.18.40;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.37.59;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.37.59;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.24
log
@Retire hp300, mvme68k and mvme88k ports. These ports have no users, keeping
this hardware alive is becoming increasingly difficult, and I should heed the
message sent by the three disks which have died on me over the last few days.

Noone sane will mourn these ports anyway. So long, and thanks for the fish.
@
text
@#	$OpenBSD: Makefile.inc,v 1.23 2011/07/22 09:30:54 espie Exp $

bootblocks:
	cp ${DESTDIR}/usr/mdec/uboot.lif ${RELEASEDIR}/SYS_UBOOT
	cp ${DESTDIR}/usr/mdec/cdboot.lif ${RELEASEDIR}/SYS_CDBOOT

MDEXT=	bsd.rd SYS_UBOOT SYS_CDBOOT
@


1.23
log
@unify kernel building on various platforms.
feedback from miod@@ and deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.22 2011/04/15 03:11:38 deraadt Exp $
@


1.22
log
@No need to make depend kernels
@
text
@d1 1
a1 10
#	$OpenBSD: Makefile.inc,v 1.21 2009/04/21 09:12:26 deraadt Exp $

kernels: bsd bootblocks
	cp ${.CURDIR}/../sys/arch/hp300/compile/GENERIC/bsd \
	    ${RELEASEDIR}/bsd

bsd:
	cd ${.CURDIR}/../sys/arch/hp300/conf && config GENERIC
	cd ${.CURDIR}/../sys/arch/hp300/compile/GENERIC && \
	    ${MAKE} clean && exec ${MAKE}
d7 1
a7 3
MDEXT=	bsd bsd.rd SYS_UBOOT SYS_CDBOOT

.PHONY: bsd bootblocks
@


1.21
log
@move bsd and bsd.rd and all such other MD "sets" into the MD files,
since we perhaps cannot assume that is what kernels will be in the
pathetically stupid world that SGI created
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.20 2009/04/17 03:58:53 deraadt Exp $
d10 1
a10 1
	    ${MAKE} clean && ${MAKE} depend && exec ${MAKE}
@


1.20
log
@For SHA256 hashes to be ready to go onto the install media, we must
build the sets before we build the media.  While there we can get rid
of DESTDIR/snapshot too, and simply install straight into RELEASEDIR.
(This also ends up saving an astounding amount of traffic/latency in a nfs
environment)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.19 2006/07/27 02:53:55 deraadt Exp $
d16 1
a16 1
MDEXT=	
@


1.19
log
@unify these damnit!
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.18 2005/03/08 20:03:04 miod Exp $
d3 1
a3 2
.ifdef DESTDIR
snap_md: bsd bootblocks distrib
d5 1
a5 1
	    ${DESTDIR}/snapshot/bsd
d13 4
a16 2
	cp ${DESTDIR}/usr/mdec/uboot.lif ${DESTDIR}/snapshot/SYS_UBOOT
	cp ${DESTDIR}/usr/mdec/cdboot.lif ${DESTDIR}/snapshot/SYS_CDBOOT
a18 2

.endif	# DESTDIR check
@


1.18
log
@Kill hp300 DISKLESS kernel, not worth using against GENERIC for diskless
systems since it still has all the filesystems for vnd usage and thus
does not save much memory...

ok deraadt@@
@
text
@d1 1
a1 2
#	$OpenBSD: Makefile.inc,v 1.17 2002/05/13 07:22:42 espie Exp $
#	etc.hp300/Makefile.inc -- hp300-specific etc Makefile targets
@


1.17
log
@move common distrib rules to main Makefile,
make -> ${MAKE}
add phony targets
remove unnecessary subshells
install kernel in a separate target from building.
some SUDO.

okay deraadt@@

(checked bootstrap on i386, should be safe elsewhere, and trivial to fix
anyways)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.16 1999/08/18 17:27:14 downsj Exp $
d5 1
a5 1
snap_md: bsd bsd.dl bootblocks distrib
a7 2
	cp ${.CURDIR}/../sys/arch/hp300/compile/DISKLESS/bsd \
	    ${DESTDIR}/snapshot/bsd.dl
a13 5
bsd.dl:
	cd ${.CURDIR}/../sys/arch/hp300/conf && config DISKLESS
	cd ${.CURDIR}/../sys/arch/hp300/compile/DISKLESS && \
	    ${MAKE} clean && ${MAKE} depend && exec ${MAKE}

d18 1
a18 1
.PHONY: bsd bsd.dl bootblocks
@


1.16
log
@Boot block changes.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.15 1997/10/24 12:38:41 downsj Exp $
d6 4
d14 1
a14 3
	    make clean && make depend && make
	cp ${.CURDIR}/../sys/arch/hp300/compile/GENERIC/bsd \
	    ${DESTDIR}/snapshot/bsd
d19 1
a19 3
	    make clean && make depend && make
	cp ${.CURDIR}/../sys/arch/hp300/compile/DISKLESS/bsd \
	    ${DESTDIR}/snapshot/bsd.dl
d25 1
a25 3
distrib:
	cd ${.CURDIR}/../distrib && make cleandir && \
	    make && make install
@


1.15
log
@s/bsd-dl/bsd.dl/g
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.14 1997/10/20 13:26:49 downsj Exp $
a21 1
	cp ${DESTDIR}/usr/mdec/uboot.raw ${DESTDIR}/snapshot
d23 1
@


1.14
log
@.lif, god damnit.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.13 1997/10/20 04:15:24 downsj Exp $
d5 1
a5 1
snap_md: bsd bsd-dl bootblocks distrib
d14 1
a14 1
bsd-dl:
d19 1
a19 1
	    ${DESTDIR}/snapshot/bsd-dl
@


1.13
log
@Copy SYS_UBOOT as well.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.12 1997/10/20 03:47:20 downsj Exp $
d23 1
a23 1
	cp ${DESTDIR}/usr/mdec/uboot ${DESTDIR}/snapshot/SYS_UBOOT
@


1.12
log
@Consistant.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.11 1997/10/19 20:36:13 deraadt Exp $
d23 1
@


1.11
log
@run distrib. bet this bombs still
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.10 1997/10/19 20:25:08 deraadt Exp $
d22 1
a22 1
	-cp -R ${DESTDIR}/usr/mdec/uboot.raw ${DESTDIR}/snapshot
@


1.10
log
@actually, only uboot.raw
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.9 1997/10/19 20:22:21 deraadt Exp $
d5 1
a5 1
snap_md: bsd bsd-dl bootblocks
d23 4
@


1.9
log
@but not installboot
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.8 1997/10/19 20:19:03 deraadt Exp $
d22 1
a22 1
	-cp -R ${DESTDIR}/usr/mdec/?boot* ??boot boot?? ${DESTDIR}/snapshot
@


1.8
log
@install bootblocks there too
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.7 1997/10/19 10:35:29 downsj Exp $
d22 1
a22 1
	-cp -R ${DESTDIR}/usr/mdec/*boot* ${DESTDIR}/snapshot
@


1.7
log
@Missed a ref to bsd-gen.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.6 1997/10/13 07:45:34 downsj Exp $
d5 1
a5 1
snap_md: bsd bsd-dl
d20 3
@


1.6
log
@Don't compress kernels.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.5 1997/09/21 11:50:23 deraadt Exp $
d12 1
a12 1
	    ${DESTDIR}/snapshot/bsd-gen
@


1.5
log
@$OpenBSD
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.4 1997/02/19 10:07:26 downsj Exp $
d5 1
a5 1
snap_md: bsd-gen.gz bsd-dl.gz
d7 1
a7 1
bsd-gen:
a19 6

bsd-gen.gz: bsd-gen
	gzip -f9 ${DESTDIR}/snapshot/bsd-gen

bsd-dl.gz: bsd-dl
	gzip -f9 ${DESTDIR}/snapshot/bsd-dl
@


1.4
log
@Update.
@
text
@d1 1
a1 3
#	$OpenBSD: Makefile.inc,v 1.3 1997/02/03 07:02:10 downsj Exp $
#	$NetBSD: Makefile.inc,v 1.2 1996/03/22 05:14:27 scottr Exp $
#
@


1.3
log
@rd -> hd, OpenBSD ids.
@
text
@d1 1
a1 1
#	$OpenBSD$
d7 1
a7 1
snap_md: netbsd-gen.gz netbsd-dl.gz
d9 2
a10 2
netbsd-gen:
	cd ${.CURDIR}/../sys/arch/hp300/conf && config.old GENERIC
d13 2
a14 2
	cp ${.CURDIR}/../sys/arch/hp300/compile/GENERIC/netbsd \
	    ${DESTDIR}/snapshot/netbsd-gen
d16 2
a17 2
netbsd-dl:
	cd ${.CURDIR}/../sys/arch/hp300/conf && config.old DISKLESS
d20 2
a21 2
	cp ${.CURDIR}/../sys/arch/hp300/compile/DISKLESS/netbsd \
	    ${DESTDIR}/snapshot/netbsd-dl
d23 2
a24 2
netbsd-gen.gz: netbsd-gen
	gzip -f9 ${DESTDIR}/snapshot/netbsd-gen
d26 2
a27 2
netbsd-dl.gz: netbsd-dl
	gzip -f9 ${DESTDIR}/snapshot/netbsd-dl
@


1.2
log
@sync with netbsd 960418
@
text
@d1 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
#	$NetBSD: Makefile.inc,v 1.1 1995/09/06 16:17:41 thorpej Exp $
d23 1
a23 1
	gzip -9 ${DESTDIR}/snapshot/netbsd-gen
d26 1
a26 1
	gzip -9 ${DESTDIR}/snapshot/netbsd-dl
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
