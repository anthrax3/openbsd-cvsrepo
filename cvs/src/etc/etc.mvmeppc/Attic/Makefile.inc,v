head	1.8;
access;
symbols
	OPENBSD_4_9:1.6.0.8
	OPENBSD_4_9_BASE:1.6
	OPENBSD_4_8:1.6.0.6
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.6.0.2
	OPENBSD_4_7_BASE:1.6
	OPENBSD_4_6:1.6.0.4
	OPENBSD_4_6_BASE:1.6
	OPENBSD_4_5:1.4.0.12
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.4.0.10
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.4.0.8
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_2:1.4.0.6
	OPENBSD_4_2_BASE:1.4
	OPENBSD_4_1:1.4.0.4
	OPENBSD_4_1_BASE:1.4
	OPENBSD_4_0:1.4.0.2
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.2.0.16
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.2.0.14
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.2.0.12
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.2.0.10
	OPENBSD_3_6_BASE:1.2
	OPENBSD_3_5:1.2.0.8
	OPENBSD_3_5_BASE:1.2
	OPENBSD_3_4:1.2.0.6
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.2.0.4
	OPENBSD_3_3_BASE:1.2
	OPENBSD_3_2:1.2.0.2
	OPENBSD_3_2_BASE:1.2
	OPENBSD_3_1:1.1.0.4
	OPENBSD_3_1_BASE:1.1
	OPENBSD_3_0:1.1.0.2
	OPENBSD_3_0_BASE:1.1;
locks; strict;
comment	@# @;


1.8
date	2011.07.07.19.16.43;	author deraadt;	state dead;
branches;
next	1.7;

1.7
date	2011.04.15.03.11.38;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	2009.04.21.09.12.27;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	2009.04.17.03.58.54;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	2006.07.27.02.51.15;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	2006.07.27.02.50.22;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	2002.05.13.07.22.43;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2001.06.26.22.37.37;	author smurph;	state Exp;
branches;
next	;


desc
@@


1.8
log
@remove mvmeppc; it is really rough shape.  ok drahn miod
@
text
@#	$OpenBSD: Makefile.inc,v 1.7 2011/04/15 03:11:38 deraadt Exp $

kernels: bsd bootblocks
	cp ${.CURDIR}/../sys/arch/mvmeppc/compile/GENERIC/bsd \
	    ${RELEASEDIR}/bsd

bsd:
	cd ${.CURDIR}/../sys/arch/mvmeppc/conf && config GENERIC
	cd ${.CURDIR}/../sys/arch/mvmeppc/compile/GENERIC && \
	    ${MAKE} clean && exec ${MAKE}

bootblocks:
	cp ${DESTDIR}/usr/mdec/bootxx ${RELEASEDIR}/bootxx
	cp ${DESTDIR}/usr/mdec/bootsd ${RELEASEDIR}/bootsd
	cp ${DESTDIR}/usr/mdec/installboot ${RELEASEDIR}/installboot

MDEXT=	bsd bsd.rd bootxx bootsd installboot

.PHONY: bsd bootblocks
@


1.7
log
@No need to make depend kernels
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.6 2009/04/21 09:12:27 deraadt Exp $
@


1.6
log
@move bsd and bsd.rd and all such other MD "sets" into the MD files,
since we perhaps cannot assume that is what kernels will be in the
pathetically stupid world that SGI created
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.5 2009/04/17 03:58:54 deraadt Exp $
d10 1
a10 1
	    ${MAKE} clean && ${MAKE} depend && exec ${MAKE}
@


1.5
log
@For SHA256 hashes to be ready to go onto the install media, we must
build the sets before we build the media.  While there we can get rid
of DESTDIR/snapshot too, and simply install straight into RELEASEDIR.
(This also ends up saving an astounding amount of traffic/latency in a nfs
environment)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.4 2006/07/27 02:51:15 deraadt Exp $
d17 1
a17 1
MDEXT=	
@


1.4
log
@sorry, but proper boot cd building should be done in distrib/mvmeppc
when the time comes (not here!)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.3 2006/07/27 02:50:22 deraadt Exp $
d3 1
a3 2
.ifdef DESTDIR
snap_md: bsd bootblocks distrib
d5 1
a5 1
	    ${DESTDIR}/snapshot/bsd
d13 5
a17 3
	cp ${DESTDIR}/usr/mdec/bootxx ${DESTDIR}/snapshot/bootxx
	cp ${DESTDIR}/usr/mdec/bootsd ${DESTDIR}/snapshot/bootsd
	cp ${DESTDIR}/usr/mdec/installboot ${DESTDIR}/snapshot/installboot
a19 2

.endif	# DESTDIR check
@


1.3
log
@unify
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.2 2002/05/13 07:22:43 espie Exp $
d4 1
a4 1
snap_md: bsd bootblocks distrib1
d18 1
a18 18
# knows about  bsd.rd and bsdofw.rd
distrib1:
	${MAKE} distrib
	mkdir ${DESTDIR}/snapshot/boot
	cp ${DESTDIR}/snapshot/bsd.rd ${DESTDIR}/snapshot/boot/bsd.rd
	strip ${DESTDIR}/snapshot/boot/bsd.rd
	gzip -9 ${DESTDIR}/snapshot/boot/bsd.rd
	mv ${DESTDIR}/snapshot/boot/bsd.rd.gz ${DESTDIR}/snapshot/boot/bsd
	cp ${DESTDIR}/usr/mdec/bootxx ${DESTDIR}/snapshot/boot
	mkisofs -r ${DESTDIR}/snapshot/boot > ${DESTDIR}/snapshot/boot.fs
	rm -rf ${DESTDIR}/snapshot/boot
	#
	# compress the bsd.rd files but keep original naming,
	# bootloader can deal with it.
	gzip -9 ${DESTDIR}/snapshot/bsd.rd
	mv ${DESTDIR}/snapshot/bsd.rd.gz ${DESTDIR}/snapshot/bsd.rd

.PHONY: bsd bootblocks distrib1
@


1.2
log
@move common distrib rules to main Makefile,
make -> ${MAKE}
add phony targets
remove unnecessary subshells
install kernel in a separate target from building.
some SUDO.

okay deraadt@@

(checked bootstrap on i386, should be safe elsewhere, and trivial to fix
anyways)
@
text
@d1 1
a1 2
#	$OpenBSD: Makefile.inc,v 1.1 2001/06/26 22:37:37 smurph Exp $
#	etc.mvmeppc/Makefile.inc -- mvmeppc-specific etc Makefile targets
d4 1
a4 1
snap_md: bsd distrib1
d13 1
a13 2
# knows about  bsd.rd and bsdofw.rd
distrib1:
d17 3
d35 1
a35 2

.PHONY: bsd distrib1
@


1.1
log
@Initial import for mvmeppc
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.16 2000/08/08 01:08:07 deraadt Exp $
d5 3
a7 1
snap_md: bsd distrib
d12 1
a12 3
	    make clean && make depend && make
	cp ${.CURDIR}/../sys/arch/mvmeppc/compile/GENERIC/bsd \
	    ${DESTDIR}/snapshot/bsd
d15 1
a15 1
distrib:
d19 1
a19 2
	cd ${.CURDIR}/../distrib && make cleandir && \
		make && make install
d34 2
@

