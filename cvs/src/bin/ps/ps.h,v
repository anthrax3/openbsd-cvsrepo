head	1.10;
access;
symbols
	OPENBSD_6_2:1.10.0.8
	OPENBSD_6_2_BASE:1.10
	OPENBSD_6_1:1.10.0.10
	OPENBSD_6_1_BASE:1.10
	OPENBSD_6_0:1.10.0.6
	OPENBSD_6_0_BASE:1.10
	OPENBSD_5_9:1.10.0.2
	OPENBSD_5_9_BASE:1.10
	OPENBSD_5_8:1.10.0.4
	OPENBSD_5_8_BASE:1.10
	OPENBSD_5_7:1.9.0.12
	OPENBSD_5_7_BASE:1.9
	OPENBSD_5_6:1.9.0.16
	OPENBSD_5_6_BASE:1.9
	OPENBSD_5_5:1.9.0.14
	OPENBSD_5_5_BASE:1.9
	OPENBSD_5_4:1.9.0.10
	OPENBSD_5_4_BASE:1.9
	OPENBSD_5_3:1.9.0.8
	OPENBSD_5_3_BASE:1.9
	OPENBSD_5_2:1.9.0.6
	OPENBSD_5_2_BASE:1.9
	OPENBSD_5_1_BASE:1.9
	OPENBSD_5_1:1.9.0.4
	OPENBSD_5_0:1.9.0.2
	OPENBSD_5_0_BASE:1.9
	OPENBSD_4_9:1.8.0.12
	OPENBSD_4_9_BASE:1.8
	OPENBSD_4_8:1.8.0.10
	OPENBSD_4_8_BASE:1.8
	OPENBSD_4_7:1.8.0.6
	OPENBSD_4_7_BASE:1.8
	OPENBSD_4_6:1.8.0.8
	OPENBSD_4_6_BASE:1.8
	OPENBSD_4_5:1.8.0.4
	OPENBSD_4_5_BASE:1.8
	OPENBSD_4_4:1.8.0.2
	OPENBSD_4_4_BASE:1.8
	OPENBSD_4_3:1.7.0.6
	OPENBSD_4_3_BASE:1.7
	OPENBSD_4_2:1.7.0.4
	OPENBSD_4_2_BASE:1.7
	OPENBSD_4_1:1.7.0.2
	OPENBSD_4_1_BASE:1.7
	OPENBSD_4_0:1.6.0.12
	OPENBSD_4_0_BASE:1.6
	OPENBSD_3_9:1.6.0.10
	OPENBSD_3_9_BASE:1.6
	OPENBSD_3_8:1.6.0.8
	OPENBSD_3_8_BASE:1.6
	OPENBSD_3_7:1.6.0.6
	OPENBSD_3_7_BASE:1.6
	OPENBSD_3_6:1.6.0.4
	OPENBSD_3_6_BASE:1.6
	OPENBSD_3_5:1.6.0.2
	OPENBSD_3_5_BASE:1.6
	OPENBSD_3_4:1.5.0.2
	OPENBSD_3_4_BASE:1.5
	OPENBSD_3_3:1.4.0.6
	OPENBSD_3_3_BASE:1.4
	OPENBSD_3_2:1.4.0.4
	OPENBSD_3_2_BASE:1.4
	OPENBSD_3_1:1.4.0.2
	OPENBSD_3_1_BASE:1.4
	OPENBSD_3_0:1.3.0.18
	OPENBSD_3_0_BASE:1.3
	OPENBSD_2_9:1.3.0.16
	OPENBSD_2_9_BASE:1.3
	OPENBSD_2_8:1.3.0.14
	OPENBSD_2_8_BASE:1.3
	OPENBSD_2_7:1.3.0.12
	OPENBSD_2_7_BASE:1.3
	OPENBSD_2_6:1.3.0.10
	OPENBSD_2_6_BASE:1.3
	OPENBSD_2_5:1.3.0.8
	OPENBSD_2_5_BASE:1.3
	OPENBSD_2_4:1.3.0.6
	OPENBSD_2_4_BASE:1.3
	OPENBSD_2_3:1.3.0.4
	OPENBSD_2_3_BASE:1.3
	OPENBSD_2_2:1.3.0.2
	OPENBSD_2_2_BASE:1.3
	OPENBSD_2_1:1.2.0.4
	OPENBSD_2_1_BASE:1.2
	OPENBSD_2_0:1.2.0.2
	OPENBSD_2_0_BASE:1.2
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@ * @;


1.10
date	2015.05.03.06.23.28;	author guenther;	state Exp;
branches;
next	1.9;
commitid	JssVLt5LQr7yl4Eo;

1.9
date	2011.04.10.03.20.58;	author guenther;	state Exp;
branches;
next	1.8;

1.8
date	2008.03.08.19.20.12;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	2006.10.16.15.00.10;	author millert;	state Exp;
branches;
next	1.6;

1.6
date	2004.01.08.18.18.35;	author millert;	state Exp;
branches;
next	1.5;

1.5
date	2003.06.02.23.32.09;	author millert;	state Exp;
branches;
next	1.4;

1.4
date	2002.02.16.21.27.07;	author millert;	state Exp;
branches;
next	1.3;

1.3
date	97.08.08.19.30.10;	author millert;	state Exp;
branches;
next	1.2;

1.2
date	96.06.23.14.20.52;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.37.19;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.37.19;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.10
log
@struct usave is unused, and eproc is gone; delete the former and
stop referencing them in comments
@
text
@/*	$OpenBSD: ps.h,v 1.9 2011/04/10 03:20:58 guenther Exp $	*/
/*	$NetBSD: ps.h,v 1.11 1995/09/29 21:57:03 cgd Exp $	*/

/*-
 * Copyright (c) 1990, 1993
 *	The Regents of the University of California.  All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. Neither the name of the University nor the names of its contributors
 *    may be used to endorse or promote products derived from this software
 *    without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
 * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 *
 *	@@(#)ps.h	8.1 (Berkeley) 5/31/93
 */

#define	UNLIMITED	0	/* unlimited terminal width */
enum type {
	INT8, UINT8, INT16, UINT16, INT32, UINT32, INT64, UINT64
};

/* Variables. */
typedef struct varent {
	struct varent *next;
	struct var *var;
} VARENT;

struct kinfo_proc;
typedef struct var {
	char	*name;		/* name(s) of variable */
	char	*header;	/* default header */
	char	*alias;		/* aliases */
#define	COMM	0x01		/* needs exec arguments and environment (XXX) */
#define	LJUST	0x02		/* left adjust on output (trailing blanks) */
#define	USER	0x04		/* needs user structure */
#define	INF127	0x08		/* 127 = infinity: if > 127, print 127. */
#define	NLIST	0x10		/* needs nlist info from kernel */
	u_int	flag;
				/* output routine */
	void	(*oproc)(const struct kinfo_proc *, struct varent *);
	short	width;		/* printing width */
	char	parsed;		/* have we been parsed yet? (avoid dupes) */
	/*
	 * The following (optional) elements are hooks for passing information
	 * to the generic output routine, pvar(), which prints simple elements
	 * from struct kinfo_proc
	 */
	int	off;		/* offset in structure */
	enum	type type;	/* type of element */
	char	*fmt;		/* printf format */
	char	*time;		/* time format */
	/*
	 * glue to link selected fields together
	 */
} VAR;

#ifdef __LP64__
#define	PTRWIDTH	16
#else
#define	PTRWIDTH	8
#endif

#include "extern.h"
@


1.9
log
@Switch back from KERN_PROC2/kinfo_proc2 to KERN_PROC/kinfo_proc now
that we've got name we want for the API we want

"ZAP!" deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: ps.h,v 1.8 2008/03/08 19:20:12 millert Exp $	*/
a39 8
struct usave {
	struct	timeval u_start;
	struct	rusage u_ru;
	struct	rusage u_cru;
	char	u_acflag;
	char	u_valid;
};

d63 2
a64 2
	 * to the generic output routines: pvar, evar, uvar (those which print
	 * simple elements from well known structures: proc, eproc, usave)
@


1.8
log
@Instead of calling donlist() in the format print routines, call it
a single time before we print anything, if needed.  Uses a flag to
specify which formats need the kernel info donlist() provides.
OK deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: ps.h,v 1.7 2006/10/16 15:00:10 millert Exp $	*/
d54 1
a54 1
struct kinfo_proc2;
d66 1
a66 1
	void	(*oproc)(const struct kinfo_proc2 *, struct varent *);
@


1.7
log
@The session field is a pointer and so should be 8 chars for
32-bit CPUs and 16 chars for 64-bit ones.  Also, left-justify
the state field name to match the justification of the state data.
OK jmc@@
@
text
@d1 1
a1 1
/*	$OpenBSD: ps.h,v 1.6 2004/01/08 18:18:35 millert Exp $	*/
d63 1
@


1.6
log
@Convert to kinfo_proc2.  The sort order for -u and -m will be different
due to a bug fix in the sort routine.
@
text
@d1 1
a1 1
/*	$OpenBSD: ps.h,v 1.5 2003/06/02 23:32:09 millert Exp $	*/
d81 6
@


1.5
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
/*	$OpenBSD: ps.h,v 1.4 2002/02/16 21:27:07 millert Exp $	*/
d37 1
a37 2
	CHAR, UCHAR, SHORT, USHORT, INT, UINT, LONG, ULONG, KPTR,
	INT32, UINT32
a47 8
#define KI_PROC(ki) (&(ki)->ki_p->kp_proc)
#define KI_EPROC(ki) (&(ki)->ki_p->kp_eproc)

typedef struct kinfo {
	struct kinfo_proc *ki_p;	/* proc structure */
	struct usave ki_u;	/* interesting parts of user */
} KINFO;

d54 1
d65 1
a65 1
	void	(*oproc)(struct kinfo *, struct varent *);
@


1.4
log
@Part one of userland __P removal.  Done with a simple regexp with some minor hand editing to make comments line up correctly.  Another pass is forthcoming that handles the cases that could not be done automatically.
@
text
@d1 1
a1 1
/*	$OpenBSD: ps.h,v 1.3 1997/08/08 19:30:10 millert Exp $	*/
d16 1
a16 5
 * 3. All advertising materials mentioning features or use of this software
 *    must display the following acknowledgement:
 *	This product includes software developed by the University of
 *	California, Berkeley and its contributors.
 * 4. Neither the name of the University nor the names of its contributors
@


1.3
log
@Add a "parsed" flag for ps fields so we don't print the same field
multiple times.  Fixes PR #298 from Carsten Hammer <chammer@@vogon.party.de>
@
text
@d1 1
a1 1
/*	$OpenBSD: ps.h,v 1.2 1996/06/23 14:20:52 deraadt Exp $	*/
d77 1
a77 1
	void	(*oproc) __P((struct kinfo *, struct varent *));
@


1.2
log
@update rcsid
@
text
@d1 1
a1 1
/*	$OpenBSD: ps.h,v 1.11 1995/09/29 21:57:03 cgd Exp $	*/
d79 1
@


1.1
log
@Initial revision
@
text
@d1 1
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
