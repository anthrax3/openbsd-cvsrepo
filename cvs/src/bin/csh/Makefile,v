head	1.16;
access;
symbols
	OPENBSD_6_1:1.14.0.8
	OPENBSD_6_1_BASE:1.14
	OPENBSD_6_0:1.14.0.4
	OPENBSD_6_0_BASE:1.14
	OPENBSD_5_9:1.14.0.2
	OPENBSD_5_9_BASE:1.14
	OPENBSD_5_8:1.12.0.4
	OPENBSD_5_8_BASE:1.12
	OPENBSD_5_7:1.11.0.4
	OPENBSD_5_7_BASE:1.11
	OPENBSD_5_6:1.11.0.8
	OPENBSD_5_6_BASE:1.11
	OPENBSD_5_5:1.11.0.6
	OPENBSD_5_5_BASE:1.11
	OPENBSD_5_4:1.11.0.2
	OPENBSD_5_4_BASE:1.11
	OPENBSD_5_3:1.10.0.14
	OPENBSD_5_3_BASE:1.10
	OPENBSD_5_2:1.10.0.12
	OPENBSD_5_2_BASE:1.10
	OPENBSD_5_1_BASE:1.10
	OPENBSD_5_1:1.10.0.10
	OPENBSD_5_0:1.10.0.8
	OPENBSD_5_0_BASE:1.10
	OPENBSD_4_9:1.10.0.6
	OPENBSD_4_9_BASE:1.10
	OPENBSD_4_8:1.10.0.4
	OPENBSD_4_8_BASE:1.10
	OPENBSD_4_7:1.10.0.2
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.9.0.10
	OPENBSD_4_6_BASE:1.9
	OPENBSD_4_5:1.9.0.6
	OPENBSD_4_5_BASE:1.9
	OPENBSD_4_4:1.9.0.4
	OPENBSD_4_4_BASE:1.9
	OPENBSD_4_3:1.9.0.2
	OPENBSD_4_3_BASE:1.9
	OPENBSD_4_2:1.8.0.10
	OPENBSD_4_2_BASE:1.8
	OPENBSD_4_1:1.8.0.8
	OPENBSD_4_1_BASE:1.8
	OPENBSD_4_0:1.8.0.6
	OPENBSD_4_0_BASE:1.8
	OPENBSD_3_9:1.8.0.4
	OPENBSD_3_9_BASE:1.8
	OPENBSD_3_8:1.8.0.2
	OPENBSD_3_8_BASE:1.8
	OPENBSD_3_7:1.7.0.8
	OPENBSD_3_7_BASE:1.7
	OPENBSD_3_6:1.7.0.6
	OPENBSD_3_6_BASE:1.7
	OPENBSD_3_5:1.7.0.4
	OPENBSD_3_5_BASE:1.7
	OPENBSD_3_4:1.7.0.2
	OPENBSD_3_4_BASE:1.7
	OPENBSD_3_3:1.6.0.6
	OPENBSD_3_3_BASE:1.6
	OPENBSD_3_2:1.6.0.4
	OPENBSD_3_2_BASE:1.6
	OPENBSD_3_1:1.6.0.2
	OPENBSD_3_1_BASE:1.6
	OPENBSD_3_0:1.5.0.16
	OPENBSD_3_0_BASE:1.5
	OPENBSD_2_9:1.5.0.14
	OPENBSD_2_9_BASE:1.5
	OPENBSD_2_8:1.5.0.12
	OPENBSD_2_8_BASE:1.5
	OPENBSD_2_7:1.5.0.10
	OPENBSD_2_7_BASE:1.5
	OPENBSD_2_6:1.5.0.8
	OPENBSD_2_6_BASE:1.5
	OPENBSD_2_5:1.5.0.6
	OPENBSD_2_5_BASE:1.5
	OPENBSD_2_4:1.5.0.4
	OPENBSD_2_4_BASE:1.5
	OPENBSD_2_3:1.5.0.2
	OPENBSD_2_3_BASE:1.5
	OPENBSD_2_2:1.4.0.2
	OPENBSD_2_2_BASE:1.4
	OPENBSD_2_1:1.2.0.4
	OPENBSD_2_1_BASE:1.2
	OPENBSD_2_0:1.2.0.2
	OPENBSD_2_0_BASE:1.2
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.16
date	2017.07.10.21.30.37;	author espie;	state Exp;
branches;
next	1.15;
commitid	XYfTVJ6bHQf1fCDD;

1.15
date	2017.06.16.10.25.54;	author espie;	state Exp;
branches;
next	1.14;
commitid	Yn1L9TuGVODhqMDI;

1.14
date	2015.10.26.21.57.42;	author naddy;	state Exp;
branches;
next	1.13;
commitid	czPxwIHp6VIIfGKO;

1.13
date	2015.10.26.15.01.15;	author naddy;	state Exp;
branches;
next	1.12;
commitid	gs7LRmKw8OfepnU6;

1.12
date	2015.06.17.03.48.21;	author deraadt;	state Exp;
branches;
next	1.11;
commitid	oHdhnDXEPqwM6LiV;

1.11
date	2013.07.13.16.34.43;	author miod;	state Exp;
branches;
next	1.10;

1.10
date	2010.01.04.17.50.36;	author deraadt;	state Exp;
branches;
next	1.9;

1.9
date	2008.01.11.20.16.02;	author jmc;	state Exp;
branches;
next	1.8;

1.8
date	2005.05.24.22.25.46;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	2003.06.23.16.42.15;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	2002.02.17.07.52.38;	author hugh;	state Exp;
branches;
next	1.5;

1.5
date	98.03.06.05.40.01;	author millert;	state Exp;
branches;
next	1.4;

1.4
date	97.09.22.05.09.13;	author millert;	state Exp;
branches;
next	1.3;

1.3
date	97.09.21.11.34.50;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	96.06.23.14.19.11;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.37.02;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.37.02;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.16
log
@remove misc. depend and yacc nits that no longer matter.
okay millert@@
@
text
@#	$OpenBSD: Makefile,v 1.15 2017/06/16 10:25:54 espie Exp $
#
# C Shell with process control; VM/UNIX VAX Makefile
# Bill Joy UC Berkeley; Jim Kulp IIASA, Austria

PROG=	csh
CFLAGS+=-I${.CURDIR} -I.
SRCS=	alloc.c char.c const.c csh.c dir.c dol.c error.c exec.c exp.c file.c \
	func.c glob.c hist.c init.c lex.c misc.c parse.c proc.c \
	sem.c set.c str.c time.c

CLEANFILES+=error.h const.h

const.h: error.h

error.h: error.c
	@@rm -f $@@
	@@echo '/* Do not edit this file, make creates it. */' > $@@
	@@echo '#ifndef _h_sh_err' >> $@@
	@@echo '#define _h_sh_err' >> $@@
	egrep 'ERR_' ${.CURDIR}/$*.c | egrep '^#define' >> $@@
	@@echo '#endif /* _h_sh_err */' >> $@@

const.h: const.c
	@@rm -f $@@
	@@echo '/* Do not edit this file, make creates it. */' > $@@
	${CC} -E ${CFLAGS} ${.CURDIR}/$*.c | egrep 'Char STR' | \
	    sed -e 's/Char \([a-zA-Z0-9_]*\)\(.*\)/extern Char \1[];/' | \
	    sort >> $@@

BUILDFIRST = const.h error.h

.include <bsd.prog.mk>
@


1.15
log
@mark files as BUILDFIRST, or write explicit dependencies, so that most
programs will build even without a make depend first.
okay tb@@ millert@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.14 2015/10/26 21:57:42 naddy Exp $
a30 1
.depend alloc.o: const.h error.h 
@


1.14
log
@remove the profiling and debugging ifdefs; ok zhuk@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.13 2015/10/26 15:01:15 naddy Exp $
d32 1
@


1.13
log
@unifdef BUILTIN (unused), NLS (always set), SHORT_STRINGS (always set)
and remove a few unused defines; no binary changes; ok tedu@@ zhuk@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.12 2015/06/17 03:48:21 deraadt Exp $
a4 2
#
# To profile, put -DPROF in DEFS and -pg in CFLAGS, and recompile.
a6 2
#CFLAGS+=-g
#CFLAGS+=-Wall
@


1.12
log
@remove -DFILEC; code does not compile for the -UFILEC case, and anyways,
who wants csh without FILEC??
from Peter Brottveit Bock, but redone using unifdef
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.11 2013/07/13 16:34:43 miod Exp $
a8 1
DFLAGS=-DBUILTIN -DNLS -DSHORT_STRINGS
d11 1
a11 1
CFLAGS+=-I${.CURDIR} -I. ${DFLAGS}
@


1.11
log
@Remove no longer needed vax CFLAGS workarounds.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.10 2010/01/04 17:50:36 deraadt Exp $
d9 1
a9 1
DFLAGS=-DBUILTIN -DFILEC -DNLS -DSHORT_STRINGS
@


1.10
log
@Stop installing many of the incredibly dated and un-authoritative share/doc
files.  If any information found in these documents is worthwhile and you
miss it, please make the time to work it into the manual pages (which people
actually do read).
ok guenther
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.9 2008/01/11 20:16:02 jmc Exp $
a17 5

.if (${MACHINE_ARCH} == "vax")
alloc.o:
	${CC} ${CFLAGS} ${CPPFLAGS} -O0 -c $<
.endif
@


1.9
log
@providing MLINKS for shell builtins makes little sense: what we had was out
of date for ever (no ksh builtins), and since we have two shells, pointing
to one page or the other is never going to work; so remove MLINKS for
csh(1); the cd(1) and wait(1) pages (also builtins); and update any trailing
Xr's;

please, there are tools like whence, man, and locate for finding this stuff;

ok deraadt miod
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 2005/05/24 22:25:46 millert Exp $
a41 4

.if make(install)
SUBDIR+= USD.doc
.endif
@


1.8
log
@-ansi considered harmful, even in comments
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 2003/06/23 16:42:15 deraadt Exp $
a16 4
MLINKS=	csh.1 limit.1 csh.1 alias.1 csh.1 bg.1 csh.1 dirs.1 csh.1 fg.1 \
	csh.1 foreach.1 csh.1 history.1 csh.1 jobs.1 csh.1 popd.1 \
	csh.1 pushd.1 csh.1 rehash.1 csh.1 repeat.1 csh.1 suspend.1 \
	csh.1 stop.1 csh.1 source.1 csh.1 unlimit.1
@


1.7
log
@kill printf builtin.  no reason to be a builtin, but furthermore, the
handling of format strings is quite non-compliant.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.6 2002/02/17 07:52:38 hugh Exp $
d11 1
a11 1
#CFLAGS+=-Wall -ansi -pedantic
@


1.6
log
@A couple temporary workarounds for vax toolchain bugs.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.5 1998/03/06 05:40:01 millert Exp $
d14 1
a14 1
	func.c glob.c hist.c init.c lex.c misc.c parse.c printf.c proc.c \
a15 1
#.PATH:	${.CURDIR}/../../usr.bin/printf
@


1.5
log
@Add unlimit man link for csh and ulimit man link for sh.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 1997/09/22 05:09:13 millert Exp $
d23 5
@


1.4
log
@err.[ch] -> error.[ch] and fix err/warn usage.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.3 1997/09/21 11:34:50 deraadt Exp $
d21 1
a21 1
	csh.1 stop.1 csh.1 source.1
@


1.3
log
@$OpenBSD$
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.2 1996/06/23 14:19:11 deraadt Exp $
d13 1
a13 1
SRCS=	alloc.c char.c const.c csh.c dir.c dol.c err.c exec.c exp.c file.c \
d22 1
a22 1
CLEANFILES+=err.h const.h
d24 1
a24 1
const.h: err.h
d26 1
a26 1
err.h: err.c
d41 1
a41 1
.depend alloc.o: const.h err.h 
@


1.2
log
@update rcsid
@
text
@d1 1
a1 2
#	$OpenBSD: Makefile,v 1.9 1995/03/21 09:02:21 cgd Exp $
#	$NetBSD: Makefile,v 1.9 1995/03/21 09:02:21 cgd Exp $
@


1.1
log
@Initial revision
@
text
@d1 1
a2 1
#	@@(#)Makefile	8.1 (Berkeley) 5/31/93
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@

