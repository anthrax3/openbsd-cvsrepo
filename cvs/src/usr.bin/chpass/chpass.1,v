head	1.41;
access;
symbols
	OPENBSD_6_1:1.41.0.8
	OPENBSD_6_1_BASE:1.41
	OPENBSD_6_0:1.41.0.4
	OPENBSD_6_0_BASE:1.41
	OPENBSD_5_9:1.41.0.2
	OPENBSD_5_9_BASE:1.41
	OPENBSD_5_8:1.40.0.6
	OPENBSD_5_8_BASE:1.40
	OPENBSD_5_7:1.40.0.2
	OPENBSD_5_7_BASE:1.40
	OPENBSD_5_6:1.39.0.6
	OPENBSD_5_6_BASE:1.39
	OPENBSD_5_5:1.39.0.4
	OPENBSD_5_5_BASE:1.39
	OPENBSD_5_4:1.37.0.6
	OPENBSD_5_4_BASE:1.37
	OPENBSD_5_3:1.37.0.4
	OPENBSD_5_3_BASE:1.37
	OPENBSD_5_2:1.37.0.2
	OPENBSD_5_2_BASE:1.37
	OPENBSD_5_1_BASE:1.35
	OPENBSD_5_1:1.35.0.10
	OPENBSD_5_0:1.35.0.8
	OPENBSD_5_0_BASE:1.35
	OPENBSD_4_9:1.35.0.6
	OPENBSD_4_9_BASE:1.35
	OPENBSD_4_8:1.35.0.4
	OPENBSD_4_8_BASE:1.35
	OPENBSD_4_7:1.35.0.2
	OPENBSD_4_7_BASE:1.35
	OPENBSD_4_6:1.34.0.12
	OPENBSD_4_6_BASE:1.34
	OPENBSD_4_5:1.34.0.8
	OPENBSD_4_5_BASE:1.34
	OPENBSD_4_4:1.34.0.6
	OPENBSD_4_4_BASE:1.34
	OPENBSD_4_3:1.34.0.4
	OPENBSD_4_3_BASE:1.34
	OPENBSD_4_2:1.34.0.2
	OPENBSD_4_2_BASE:1.34
	OPENBSD_4_1:1.32.0.14
	OPENBSD_4_1_BASE:1.32
	OPENBSD_4_0:1.32.0.12
	OPENBSD_4_0_BASE:1.32
	OPENBSD_3_9:1.32.0.10
	OPENBSD_3_9_BASE:1.32
	OPENBSD_3_8:1.32.0.8
	OPENBSD_3_8_BASE:1.32
	OPENBSD_3_7:1.32.0.6
	OPENBSD_3_7_BASE:1.32
	OPENBSD_3_6:1.32.0.4
	OPENBSD_3_6_BASE:1.32
	OPENBSD_3_5:1.32.0.2
	OPENBSD_3_5_BASE:1.32
	OPENBSD_3_4:1.31.0.2
	OPENBSD_3_4_BASE:1.31
	OPENBSD_3_3:1.27.0.6
	OPENBSD_3_3_BASE:1.27
	OPENBSD_3_2:1.27.0.4
	OPENBSD_3_2_BASE:1.27
	OPENBSD_3_1:1.27.0.2
	OPENBSD_3_1_BASE:1.27
	OPENBSD_3_0:1.26.0.2
	OPENBSD_3_0_BASE:1.26
	OPENBSD_2_9_BASE:1.20
	OPENBSD_2_9:1.20.0.4
	OPENBSD_2_8:1.20.0.2
	OPENBSD_2_8_BASE:1.20
	OPENBSD_2_7:1.18.0.2
	OPENBSD_2_7_BASE:1.18
	OPENBSD_2_6:1.13.0.2
	OPENBSD_2_6_BASE:1.13
	OPENBSD_2_5:1.9.0.4
	OPENBSD_2_5_BASE:1.9
	OPENBSD_2_4:1.9.0.2
	OPENBSD_2_4_BASE:1.9
	OPENBSD_2_3:1.6.0.2
	OPENBSD_2_3_BASE:1.6
	OPENBSD_2_2:1.3.0.6
	OPENBSD_2_2_BASE:1.3
	OPENBSD_2_1:1.3.0.4
	OPENBSD_2_1_BASE:1.3
	OPENBSD_2_0:1.3.0.2
	OPENBSD_2_0_BASE:1.3
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@.\" @;


1.41
date	2015.11.26.19.01.47;	author deraadt;	state Exp;
branches;
next	1.40;
commitid	0NbTNVgy2y455HVw;

1.40
date	2014.11.15.14.41.01;	author bentley;	state Exp;
branches;
next	1.39;
commitid	HuCemPIiOkto0SJD;

1.39
date	2014.02.16.19.20.26;	author schwarze;	state Exp;
branches;
next	1.38;

1.38
date	2013.08.14.08.39.26;	author jmc;	state Exp;
branches;
next	1.37;

1.37
date	2012.06.20.21.32.27;	author schwarze;	state Exp;
branches;
next	1.36;

1.36
date	2012.06.19.10.53.40;	author jmc;	state Exp;
branches;
next	1.35;

1.35
date	2009.10.22.12.35.53;	author sobrado;	state Exp;
branches;
next	1.34;

1.34
date	2007.05.31.19.20.08;	author jmc;	state Exp;
branches;
next	1.33;

1.33
date	2007.03.27.07.22.33;	author jmc;	state Exp;
branches;
next	1.32;

1.32
date	2003.10.20.05.02.58;	author jmc;	state Exp;
branches;
next	1.31;

1.31
date	2003.07.01.13.55.58;	author avsm;	state Exp;
branches;
next	1.30;

1.30
date	2003.07.01.01.01.28;	author avsm;	state Exp;
branches;
next	1.29;

1.29
date	2003.06.10.09.12.09;	author jmc;	state Exp;
branches;
next	1.28;

1.28
date	2003.06.03.02.56.06;	author millert;	state Exp;
branches;
next	1.27;

1.27
date	2002.02.13.08.33.47;	author mpech;	state Exp;
branches;
next	1.26;

1.26
date	2001.08.27.02.57.07;	author millert;	state Exp;
branches;
next	1.25;

1.25
date	2001.08.20.05.57.55;	author mpech;	state Exp;
branches;
next	1.24;

1.24
date	2001.08.16.19.22.55;	author millert;	state Exp;
branches;
next	1.23;

1.23
date	2001.08.15.20.47.53;	author millert;	state Exp;
branches;
next	1.22;

1.22
date	2001.06.23.05.57.07;	author deraadt;	state Exp;
branches;
next	1.21;

1.21
date	2001.06.23.02.33.15;	author deraadt;	state Exp;
branches;
next	1.20;

1.20
date	2000.10.17.18.52.19;	author aaron;	state Exp;
branches;
next	1.19;

1.19
date	2000.10.07.14.07.08;	author aaron;	state Exp;
branches;
next	1.18;

1.18
date	2000.04.15.11.45.55;	author aaron;	state Exp;
branches;
next	1.17;

1.17
date	2000.03.23.21.10.13;	author aaron;	state Exp;
branches;
next	1.16;

1.16
date	2000.03.22.02.42.34;	author aaron;	state Exp;
branches;
next	1.15;

1.15
date	2000.03.21.14.19.46;	author aaron;	state Exp;
branches;
next	1.14;

1.14
date	2000.03.05.19.20.36;	author aaron;	state Exp;
branches;
next	1.13;

1.13
date	99.08.21.19.34.40;	author niklas;	state Exp;
branches;
next	1.12;

1.12
date	99.07.04.11.53.51;	author aaron;	state Exp;
branches;
next	1.11;

1.11
date	99.06.05.01.21.20;	author aaron;	state Exp;
branches;
next	1.10;

1.10
date	99.05.16.19.57.55;	author alex;	state Exp;
branches;
next	1.9;

1.9
date	98.09.23.04.32.36;	author aaron;	state Exp;
branches;
next	1.8;

1.8
date	98.06.14.18.12.23;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	98.05.29.16.37.48;	author millert;	state Exp;
branches;
next	1.6;

1.6
date	98.03.24.05.42.00;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	98.03.18.12.28.00;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	98.03.15.11.53.23;	author gene;	state Exp;
branches;
next	1.3;

1.3
date	96.06.26.05.31.54;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	96.05.22.11.35.17;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.44.59;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.44.59;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.41
log
@Delete YP password related code.  As a result, these can also be
pledged.  Keep an eye out for regressions, because they could be
uncomfortable.
ok beck semarie
@
text
@.\"	$OpenBSD: chpass.1,v 1.40 2014/11/15 14:41:01 bentley Exp $
.\"	$NetBSD: chpass.1,v 1.7 1996/05/15 21:50:40 jtc Exp $
.\"
.\" Copyright (c) 1988, 1990, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"     @@(#)chpass.1	8.2 (Berkeley) 12/30/93
.\"
.Dd $Mdocdate: November 15 2014 $
.Dt CHPASS 1
.Os
.Sh NAME
.Nm chpass ,
.Nm chfn ,
.Nm chsh
.Nd add or change user database information
.Sh SYNOPSIS
.Nm chpass
.Op Fl s Ar newshell
.Op Ar user
.Nm chpass
.Fl a Ar list
.Sh DESCRIPTION
.Nm chpass
allows editing of the user database information associated
with
.Ar user ,
or, by default, the current user.
The information is formatted and supplied to an editor for changes.
.Pp
Only the information that the user is allowed to change is displayed.
.Pp
.Nm chfn
and
.Nm chsh
are synonyms for
.Nm chpass .
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl a Ar list
The superuser is allowed to directly supply a user database
entry, in the format specified by
.Xr passwd 5 ,
as an argument.
This argument must be a colon
.Pq Sq \&:
separated list of all the
user database fields, although they may be empty.
.It Fl s Ar newshell
Attempts to change the user's shell to
.Ar newshell .
.El
.Pp
Possible display items are as follows:
.Pp
.Bl -tag -width "Office Location:" -compact -offset indent
.It Login:
user's login name
.It Password:
user's encrypted password
.It Uid:
user's login
.It Gid:
user's login group
.It Change:
password change time
.It Expire:
account expiration time
.It Class:
user's general classification
.It Home Directory:
user's home directory
.It Shell:
user's login shell
.It Full Name:
user's real name
.It Office Location:
user's office location
.It Office Phone:
user's office phone
.It Home Phone:
user's home phone
.El
.Pp
The
.Ar login
field is the user name used to access the computer account.
.Pp
The
.Ar password
field contains the encrypted form of the user's password.
.Pp
The
.Ar uid
field is the number associated with the
.Ar login
field.
Both of these fields should be unique across the system (and often
across a group of systems) as they control file access.
.Pp
While it is possible to have multiple entries with identical login names
and/or identical user IDs, it is usually a mistake to do so.
Routines that manipulate these files will often return only one of the multiple
entries, and that one by random selection.
.Pp
The
.Ar group
field is the group that the user will be placed in at login.
Since
.Bx
supports multiple groups (see
.Xr groups 1 ) ,
this field currently has little special meaning.
This field may be filled in with either a number or a group name (see
.Xr group 5 ) .
.Pp
The
.Ar change
field is the date by which the password must be changed.
.Pp
The
.Ar expire
field is the date on which the account expires.
.Pp
Both the
.Ar change
and
.Ar expire
fields should be entered in the form
.Ar month day year
where
.Ar month
is the month name (the first three characters are sufficient),
.Ar day
is the day of the month, and
.Ar year
is the year.
.Pp
The
.Ar class
field specifies a key in the
.Xr login.conf 5
database of login class attributes.
If empty, the
.Dq default
record is used.
.Pp
The user's
.Ar home directory
is the full
.Ux
path name where the user will be placed at login.
.Pp
The
.Ar shell
field is the command interpreter the user prefers.
If the
.Ar shell
field is empty, the Bourne shell
.Pq Pa /bin/sh
is assumed.
When altering a login shell, and not the superuser, the user
may not change from a non-standard shell or to a non-standard
shell.
Non-standard is defined as a shell not found in
.Pa /etc/shells .
.Pp
The last four fields are for storing the user's
.Ar full name , office location ,
and
.Ar work
and
.Ar home telephone
numbers.
.Pp
Once the information has been verified,
.Nm
uses
.Xr pwd_mkdb 8
to update the user database.
.Sh ENVIRONMENT
The
.Xr vi 1
editor will be used unless the environment variable
.Ev EDITOR
is set to
an alternate editor.
When the editor terminates, the information is re-read and used to
update the user database itself.
Only the user, or the superuser, may edit the information associated
with the user.
.Sh FILES
.Bl -tag -width /var/tmp/pw.XXXXXXXXXX -compact
.It Pa /etc/master.passwd
user database
.It Pa /etc/passwd
user database, with confidential information removed
.It Pa /etc/ptmp
lock file for the passwd database
.It Pa /etc/shells
list of approved shells
.It Pa /var/tmp/pw.XXXXXXXXXX
temporary copy of the user passwd information
.El
.Sh DIAGNOSTICS
.Bl -diag
.It "Attempting to lock password file, please wait or press ^C to abort"
.Pp
The password file is currently locked by another process;
.Nm
will keep trying to lock the password file until it succeeds or
the user hits the interrupt character (control-C by default).
If
.Nm
is interrupted while trying to gain the lock any changes made will be lost.
.Pp
If the process holding the lock was prematurely terminated the lock
file may be stale and
.Nm
will wait forever trying to lock the password file.
To determine whether a live process is actually holding the lock, the
admin may run the following:
.Bd -literal -offset indent
$ fstat /etc/ptmp
.Ed
.Pp
If no process is listed, it is safe to remove the
.Pa /etc/ptmp
file to clear the error.
.El
.Sh SEE ALSO
.Xr finger 1 ,
.Xr login 1 ,
.Xr passwd 1 ,
.Xr getusershell 3 ,
.Xr login.conf 5 ,
.Xr passwd 5 ,
.Xr pwd_mkdb 8 ,
.Xr vipw 8
.Rs
.%A Robert Morris
.%A Ken Thompson
.%T Password security: a case history
.%J Communications of the ACM
.%V Volume 22
.%N Issue 11
.%D Nov. 1979
.%P 594\(en597
.Re
.Sh HISTORY
The
.Nm
command appeared in
.Bx 4.3 Reno .
@


1.40
log
@Reduce instances of `` '' in manuals.

troff displays these as typographic quotes, but nroff implementations
almost always print them literally, which rarely has the intended effect
with modern fonts, even in stock xterm.

These uses of `` '' can be replaced either with more semantic alternatives
or with Dq, which prints typographic quotes in a UTF-8 locale (but will
automatically fall back to `` '' in an ASCII locale).

improvements and ok schwarze@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.39 2014/02/16 19:20:26 schwarze Exp $
d33 1
a33 1
.Dd $Mdocdate: February 16 2014 $
a42 1
.Op Fl ly
a45 1
.Op Fl l
a56 3
If YP is enabled change requests are first tried in the local database,
and then in the YP database, if there was no entry to change locally.
.Pp
a73 7
This operation is not supported in YP environments; only local additions
can be performed which requires the
.Fl l
flag to be specified.
.It Fl l
In environments where YP is enabled, always alter local information as
opposed to information in YP.
a76 3
.It Fl y
In environments where YP is enabled, always change the YP entry, even if this
is a modification request and there is a local entry for the specified user.
@


1.39
log
@fix bibliographical references; from Jan Stary <hans at stare dot cz>
feedback and ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.38 2013/08/14 08:39:26 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: August 14 2013 $
d169 3
a171 1
fields should be entered in the form ``month day year'' where
@


1.38
log
@some Bx/Ox conversion;
From: Jan Stary
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.37 2012/06/20 21:32:27 schwarze Exp $
d33 1
a33 1
.Dd $Mdocdate: June 20 2012 $
d281 6
a286 1
.%T "UNIX Password Security"
@


1.37
log
@Correct English just like jsing@@ did it in passwd/local_passwd.c rev. 1.38
on April 27, 2008.  While here, fix a typo and drop an obsolete BUGS section.

"my typo so OK millert@@ :-)" and OK jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.36 2012/06/19 10:53:40 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: June 19 2012 $
d149 3
a151 1
Since BSD supports multiple groups (see
@


1.36
log
@sync the descriptions of /etc/passwd;

issue spotted by f5b
help/ok schwarze
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.35 2009/10/22 12:35:53 sobrado Exp $
d33 1
a33 1
.Dd $Mdocdate: October 22 2009 $
d243 1
a243 1
.It "Attempting lock password file, please wait or press ^C to abort"
a285 2
.Sh BUGS
User information should (and eventually will) be stored elsewhere.
@


1.35
log
@use the UNIX-related macros (.At and .Ux) where appropriate.

ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.34 2007/05/31 19:20:08 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: May 31 2007 $
d233 1
a233 1
a Version 7 format password file
@


1.34
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.33 2007/03/27 07:22:33 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate$
d186 3
a188 2
is the full UNIX path name where the user
will be placed at login.
@


1.33
log
@-a requires a separate synopsis;
from Daniel Polak via henning

ok henning
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.32 2003/10/20 05:02:58 jmc Exp $
d33 1
a33 1
.Dd December 30, 1993
@


1.32
log
@typos from Jared Yanovich;
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.31 2003/07/01 13:55:58 avsm Exp $
a43 1
.Op Fl a Ar list
d46 3
@


1.31
log
@update the table contents as well as the table width
pointed out by Dr. Mdoc jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.30 2003/07/01 01:01:28 avsm Exp $
d245 1
a245 1
the user hits the interupt character (control-C by default).
@


1.30
log
@- no need for pathnames.h, just use <paths.h> instead
- bump mktemp randomness slightly from 8 -> 10
millert@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.29 2003/06/10 09:12:09 jmc Exp $
d235 1
a235 1
.It Pa /var/tmp/pw.XXXXXXXX
@


1.29
log
@- section reorder
- COMPATIBILITY merge
- macro cleanup
- kill whitespace at EOL
- new sentence, new line

ssh pages ok markus@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.28 2003/06/03 02:56:06 millert Exp $
d226 1
a226 1
.Bl -tag -width /var/tmp/pw.XXXXXXXX -compact
@


1.28
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.27 2002/02/13 08:33:47 mpech Exp $
d180 1
a180 1
record is used. 
d214 24
a262 24
.El
.Sh ENVIRONMENT
The
.Xr vi 1
editor will be used unless the environment variable
.Ev EDITOR
is set to
an alternate editor.
When the editor terminates, the information is re-read and used to
update the user database itself.
Only the user, or the superuser, may edit the information associated
with the user.
.Sh FILES
.Bl -tag -width /var/tmp/pw.XXXXXXXX -compact
.It Pa /etc/master.passwd
user database
.It Pa /etc/passwd
a Version 7 format password file
.It Pa /etc/ptmp
lock file for the passwd database
.It Pa /etc/shells
list of approved shells
.It Pa /var/tmp/pw.XXXXXXXX
temporary copy of the user passwd information
@


1.27
log
@When you give command examples and etc., in a manual page prefix them with:
$ command
or
# command

deraadt@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.26 2001/08/27 02:57:07 millert Exp $
d15 1
a15 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
@


1.26
log
@Instead of prompting the user whether or not they wish to continue to
wait for the lock on password file just tell the user to interrupt with
^C.  This simplifies the locking loop a bit.

Update man page to this effect.
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.25 2001/08/20 05:57:55 mpech Exp $
d237 1
a237 1
fstat /etc/ptmp
@


1.25
log
@Powered by @@mantoya.
o) fix bogus .Xr usage;

millert@@ ok.
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.24 2001/08/16 19:22:55 millert Exp $
d220 15
a234 4
.It "The passwd file is busy..."
The password file is currently locked by another process, or a
process previously holding the lock was prematurely terminated.
To determine whether another process is holding the lock, the
d242 1
a242 1
file to get rid of this error.
@


1.24
log
@Fix a typo and document login class field correctly.
Based on a patch from andrew.hoerter@@NeuStar.com
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.23 2001/08/15 20:47:53 millert Exp $
d152 1
a152 1
.Xr groups 1 ),
@


1.23
log
@Move locking of the passwd file *after* we have gotten a new password
from the user.  Set real/effective/saved uids to 0 and block all signals
so the lock cannot be kept longer than necessary.  If we cannot lock,
try again every 1/4 second for 2 seconds and then ask the user what
they wish to do (keep trying, quit).

Same as in local_passwd.c but here we need to remove a temp file
in the SIGINT handler because _exit() doesn't call atexit() routines.
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.22 2001/06/23 05:57:07 deraadt Exp $
d61 1
a61 1
If YP in enabled change requests are first tried in the local database,
d179 6
a184 4
field is currently unused.
In the near future it will be a key to a
.Xr termcap 5
style database of user attributes.
d262 1
@


1.22
log
@ok, tmac is now fixed
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.21 2001/06/23 02:33:15 deraadt Exp $
d218 1
a218 1
.It "the passwd file is busy"
d221 7
a227 1
In the latter case, it is safe to remove the
@


1.21
log
@join .%A entries; most by bk@@rt.fm
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.20 2000/10/17 18:52:19 aaron Exp $
d258 2
a259 1
.%A Robert Morris and Ken Thompson
@


1.20
log
@- Add a DIAGNOSTICS section explaining "the passwd file is busy".
- Some other cleanups.
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.19 2000/10/07 14:07:08 aaron Exp $
d258 1
a258 2
.%A Robert Morris
.%A Ken Thompson
@


1.19
log
@Reword a sentence to correct bad grammar.
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.18 2000/04/15 11:45:55 aaron Exp $
d216 9
d244 2
a247 2
.It Pa /etc/shells
list of approved shells
@


1.18
log
@- For consistency, `super-user' -> `superuser' in all cases.
- Some punctuation fixes.
- Some `id' -> `ID'.
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.17 2000/03/23 21:10:13 aaron Exp $
d81 2
a82 2
In YP environments this operation is not supported, only local additions
can be done and that requires use of the
d84 1
a84 1
flag.
@


1.17
log
@Fix some formatting problems I missed before.
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.16 2000/03/22 02:42:34 aaron Exp $
d73 1
a73 1
The super-user is allowed to directly supply a user database
d197 1
a197 1
When altering a login shell, and not the super-user, the user
d225 1
a225 1
Only the user, or the super-user, may edit the information associated
@


1.16
log
@Note that ``chfn'' and ``chsh'' are synonyms for ``chpass'', and reflect this
in the NAME section as well; d@@, deraadt@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.15 2000/03/21 14:19:46 aaron Exp $
d144 2
a145 2
and/or identical user IDs, it is usually a mistake to do so.  Routines
that manipulate these files will often return only one of the multiple
d179 2
a180 2
field is currently unused.  In the near future it will be a key to
a
@


1.15
log
@The BUGS section comes after HISTORY, usually.
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.14 2000/03/05 19:20:36 aaron Exp $
d41 3
a43 1
.Nm chpass
d52 1
a52 1
.Nm
d63 6
@


1.14
log
@Change prompt string from "Location:" to "Office Location:", to disambiguate
from what is expected, and to be consistent with finger(1); from FreeBSD.
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.13 1999/08/21 19:34:40 niklas Exp $
a244 2
.Sh BUGS
User information should (and eventually will) be stored elsewhere.
d250 2
@


1.13
log
@Document the YP options
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.12 1999/07/04 11:53:51 aaron Exp $
d90 1
a90 1
.Bl -tag -width "Home Directory:" -compact -offset indent
d111 4
a114 2
.It Location:
user's normal location
a116 2
.It Office Phone:
user's office phone
@


1.12
log
@correct use of .Nm; some other formatting nits
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.11 1999/06/05 01:21:20 aaron Exp $
d45 1
d59 3
d73 7
d83 3
@


1.11
log
@- remove trailing white space
- remove arguments from .Os macros
- remove arguments from .Nm macros, where appropriate
- some more Dq/Sq/Ql insanity
- still lots to do in the usr.bin tree... :/
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.10 1999/05/16 19:57:55 alex Exp $
d49 1
a49 1
.Nm chpass
d190 1
a190 1
.Nm chpass
@


1.10
log
@Cleanup xrefs under SEE ALSO.  Specifically:

  - Sort xrefs by section, and then alphabetically.
  - Add missing commas between xref items.
  - Remove commas from the last xref entry.
  - Remove duplicate entries.
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.9 1998/09/23 04:32:36 aaron Exp $
d236 1
a236 1
command appeared in 
@


1.9
log
@usr.bin/ man page repairs, a - e
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.8 1998/06/14 18:12:23 deraadt Exp $
d219 1
a220 1
.Xr finger 1 ,
@


1.8
log
@fix gecos subfield description
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.7 1998/05/29 16:37:48 millert Exp $
d47 1
a47 1
.Op user
d49 1
a49 1
.Nm Chpass
d52 1
a52 1
.Ar user
d65 3
a67 1
This argument must be a colon (``:'') separated list of all the
d70 1
a70 3
The
.Fl s
option attempts to change the user's shell to
d122 1
a122 1
and/or identical user id's, it is usually a mistake to do so.  Routines
d130 1
a130 1
.Xr groups 1 )
d172 2
a173 2
field is empty, the Bourne shell,
.Pa /bin/sh ,
d206 1
a206 1
.Bl -tag -width /etc/master.passwd -compact
d208 1
a208 1
The user database
d210 1
a210 1
A Version 7 format password file
d212 1
a212 1
Lock file for the passwd database
d214 1
a214 1
Temporary copy of the user passwd information
d216 1
a216 1
The list of approved shells
@


1.7
log
@put temp file _PATH_VARTMP
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.6 1998/03/24 05:42:00 deraadt Exp $
d184 1
a184 1
.Ar home
d186 1
a186 1
.Ar work telephone
@


1.6
log
@pretty
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.5 1998/03/18 12:28:00 deraadt Exp $
d213 1
a213 1
.It Pa /etc/pw.XXXXXX
@


1.5
log
@.Ev EDITOR
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.4 1998/03/15 11:53:23 gene Exp $
d60 1
a60 1
.It Fl a
d67 1
a67 1
.It Fl s
@


1.4
log
@Capitalize the title of Unix Password Security correctly.
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.3 1996/06/26 05:31:54 deraadt Exp $
d197 3
a199 1
editor will be used unless the environment variable EDITOR is set to
@


1.3
log
@rcsid
@
text
@d1 1
a1 1
.\"	$OpenBSD: chpass.1,v 1.7 1996/05/15 21:50:40 jtc Exp $
d227 1
a227 1
.%T "UNIX Password security"
@


1.2
log
@libutil
@
text
@d1 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
.\"	$NetBSD: chpass.1,v 1.6 1995/09/14 06:10:53 jtc Exp $
d208 4
a211 2
.It Pa /etc/chpass.XXXXXX
Temporary copy of the password file
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@

