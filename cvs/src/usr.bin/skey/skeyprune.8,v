head	1.12;
access;
symbols
	OPENBSD_6_0:1.12.0.12
	OPENBSD_6_0_BASE:1.12
	OPENBSD_5_9:1.12.0.8
	OPENBSD_5_9_BASE:1.12
	OPENBSD_5_8:1.12.0.10
	OPENBSD_5_8_BASE:1.12
	OPENBSD_5_7:1.12.0.2
	OPENBSD_5_7_BASE:1.12
	OPENBSD_5_6:1.12.0.6
	OPENBSD_5_6_BASE:1.12
	OPENBSD_5_5:1.12.0.4
	OPENBSD_5_5_BASE:1.12
	OPENBSD_5_4:1.11.0.26
	OPENBSD_5_4_BASE:1.11
	OPENBSD_5_3:1.11.0.24
	OPENBSD_5_3_BASE:1.11
	OPENBSD_5_2:1.11.0.22
	OPENBSD_5_2_BASE:1.11
	OPENBSD_5_1_BASE:1.11
	OPENBSD_5_1:1.11.0.20
	OPENBSD_5_0:1.11.0.18
	OPENBSD_5_0_BASE:1.11
	OPENBSD_4_9:1.11.0.16
	OPENBSD_4_9_BASE:1.11
	OPENBSD_4_8:1.11.0.14
	OPENBSD_4_8_BASE:1.11
	OPENBSD_4_7:1.11.0.10
	OPENBSD_4_7_BASE:1.11
	OPENBSD_4_6:1.11.0.12
	OPENBSD_4_6_BASE:1.11
	OPENBSD_4_5:1.11.0.8
	OPENBSD_4_5_BASE:1.11
	OPENBSD_4_4:1.11.0.6
	OPENBSD_4_4_BASE:1.11
	OPENBSD_4_3:1.11.0.4
	OPENBSD_4_3_BASE:1.11
	OPENBSD_4_2:1.11.0.2
	OPENBSD_4_2_BASE:1.11
	OPENBSD_4_1:1.10.0.14
	OPENBSD_4_1_BASE:1.10
	OPENBSD_4_0:1.10.0.12
	OPENBSD_4_0_BASE:1.10
	OPENBSD_3_9:1.10.0.10
	OPENBSD_3_9_BASE:1.10
	OPENBSD_3_8:1.10.0.8
	OPENBSD_3_8_BASE:1.10
	OPENBSD_3_7:1.10.0.6
	OPENBSD_3_7_BASE:1.10
	OPENBSD_3_6:1.10.0.4
	OPENBSD_3_6_BASE:1.10
	OPENBSD_3_5:1.10.0.2
	OPENBSD_3_5_BASE:1.10
	OPENBSD_3_4:1.9.0.2
	OPENBSD_3_4_BASE:1.9
	OPENBSD_3_3:1.7.0.4
	OPENBSD_3_3_BASE:1.7
	OPENBSD_3_2:1.7.0.2
	OPENBSD_3_2_BASE:1.7
	OPENBSD_3_1:1.6.0.4
	OPENBSD_3_1_BASE:1.6
	OPENBSD_3_0:1.6.0.2
	OPENBSD_3_0_BASE:1.6
	OPENBSD_2_9_BASE:1.5
	OPENBSD_2_9:1.5.0.6
	OPENBSD_2_8:1.5.0.4
	OPENBSD_2_8_BASE:1.5
	OPENBSD_2_7:1.5.0.2
	OPENBSD_2_7_BASE:1.5
	OPENBSD_2_6:1.4.0.2
	OPENBSD_2_6_BASE:1.4
	OPENBSD_2_5:1.3.0.4
	OPENBSD_2_5_BASE:1.3
	OPENBSD_2_4:1.3.0.2
	OPENBSD_2_4_BASE:1.3
	OPENBSD_2_3:1.2.0.4
	OPENBSD_2_3_BASE:1.2
	OPENBSD_2_2:1.2.0.2
	OPENBSD_2_2_BASE:1.2
	OPENBSD_2_1:1.1.0.4
	OPENBSD_2_1_BASE:1.1
	OPENBSD_2_0:1.1.0.2
	OPENBSD_2_0_BASE:1.1;
locks; strict;
comment	@# @;


1.12
date	2014.02.12.16.58.44;	author schwarze;	state Exp;
branches;
next	1.11;

1.11
date	2007.05.31.19.20.16;	author jmc;	state Exp;
branches;
next	1.10;

1.10
date	2003.10.20.21.10.19;	author jmc;	state Exp;
branches;
next	1.9;

1.9
date	2003.06.10.18.25.33;	author millert;	state Exp;
branches;
next	1.8;

1.8
date	2003.06.10.09.12.11;	author jmc;	state Exp;
branches;
next	1.7;

1.7
date	2002.05.16.18.27.34;	author millert;	state Exp;
branches;
next	1.6;

1.6
date	2001.06.20.22.19.58;	author millert;	state Exp;
branches;
next	1.5;

1.5
date	2000.03.23.21.10.18;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	99.07.02.20.11.46;	author aaron;	state Exp;
branches;
next	1.3;

1.3
date	98.09.27.16.57.53;	author aaron;	state Exp;
branches;
next	1.2;

1.2
date	97.09.22.05.15.05;	author millert;	state Exp;
branches;
next	1.1;

1.1
date	96.09.28.00.00.41;	author millert;	state Exp;
branches;
next	;


desc
@@


1.12
log
@.Sh ERRORS is only used in sections 2, 3, and 9, so use DIAGNOSTICS instead;
from Jan Stary <hans at stare dot cz>;
jmc@@ doesn't know of any upstream, so just commit it locally
@
text
@.\" $OpenBSD: skeyprune.8,v 1.11 2007/05/31 19:20:16 jmc Exp $
.\"
.\" Copyright (c) 1996, 2001, 2002 Todd C. Miller <Todd.Miller@@courtesan.com>
.\"
.\" Permission to use, copy, modify, and distribute this software for any
.\" purpose with or without fee is hereby granted, provided that the above
.\" copyright notice and this permission notice appear in all copies.
.\"
.\" THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
.\" WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
.\" MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
.\" ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
.\" WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
.\" ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
.\" OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
.\"
.Dd $Mdocdate: May 31 2007 $
.Dt SKEYPRUNE 8
.Os
.Sh NAME
.Nm skeyprune
.Nd prune zeroed and old entries from S/Key database
.Sh SYNOPSIS
.Nm skeyprune
.Op Ar days
.Sh DESCRIPTION
.Nm skeyprune
searches through the S/Key database,
.Pa /etc/skey ,
and prunes out entries that have been zeroed out via
.Xr skeyinit 1
as well as entries that have not been modified in
.Ar days
days.
If
.Ar days
is not specified, only invalid entries are pruned.
.Pp
If a malformed entry is encountered, or if the file mode/type is incorrect,
an error is printed to the standard error.
.Sh FILES
.Bl -tag -width /etc/skey
.It Pa /etc/skey
directory containing S/Key user entries
.El
.Sh DIAGNOSTICS
The following errors are cause for concern.
.Bl -tag -width Ds
.It Can't cd to /etc/skey
The S/Key database directory,
.Pa /etc/skey ,
does not exist.
The superuser may create it by running
.Dq skeyinit -E .
.It Can't open user
The user's entry was found in
.Pa /etc/skey
but it could not be opened.
.It user is not a regular file
The user's entry is not a regular file.
.It Bad mode for user
The user's entry had a bad file mode (should be 0600).
.It Bad link count for user.
The user's entry had a bad link count (should be 1).
.It Invalid entry for user
The user's entry was not of the correct format, as specified by
.Xr skey 5 .
.El
.Sh SEE ALSO
.Xr skey 1 ,
.Xr skeyinit 1 ,
.Xr skey 5
@


1.11
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\" $OpenBSD: skeyprune.8,v 1.10 2003/10/20 21:10:19 jmc Exp $
d17 1
a17 1
.Dd $Mdocdate$
d46 1
a46 1
.Sh ERRORS
@


1.10
log
@typos from Jared Yanovich, slightly ammended;
@
text
@d1 1
a1 1
.\" $OpenBSD: skeyprune.8,v 1.9 2003/06/10 18:25:33 millert Exp $
d17 1
a17 1
.Dd May 16, 2002
@


1.9
log
@add missing copyright notice
@
text
@d1 1
a1 1
.\" $OpenBSD: skeyprune.8,v 1.8 2003/06/10 09:12:11 jmc Exp $
d22 1
a22 1
.Nd prune zeroed and old entries from S/Key databse
@


1.8
log
@- section reorder
- COMPATIBILITY merge
- macro cleanup
- kill whitespace at EOL
- new sentence, new line

ssh pages ok markus@@
@
text
@d1 1
a1 1
.\" $OpenBSD: skeyprune.8,v 1.7 2002/05/16 18:27:34 millert Exp $
d3 13
@


1.7
log
@Update for new S/Key file format
@
text
@d1 1
a1 1
.\" $OpenBSD: skeyprune.8,v 1.6 2001/06/20 22:19:58 millert Exp $
d28 5
a54 5
.El
.Sh FILES
.Bl -tag -width /etc/skey
.It Pa /etc/skey
directory containing S/Key user entries
@


1.6
log
@o perl5'ified
o We now lock the skeys database as we ought to avoid problems.
o Safe temp file handling
o Weed out bogus records instead of ignoring them
o Add a hash type to old md4 entries w/o a hash type listed
@
text
@d1 1
a1 1
.\" $OpenBSD: skeyprune.8,v 1.5 2000/03/23 21:10:18 aaron Exp $
d4 1
a4 1
.Dd September 27, 1996
d9 1
a9 1
.Nd prune commented out and old entries from keys file
d16 3
a18 4
.Dq Pa /etc/skeykeys ,
and prunes out invalid entries (including users who have zeroed out their)
entries via
.Xr skeyinit 1 )
d25 26
d52 3
a54 3
.Bl -tag -width /etc/skeykeys -compact
.It Pa /etc/skeykeys
S/Key key information database
d58 2
a59 1
.Xr skeyinit 1
@


1.5
log
@Fix some formatting problems I missed before.
@
text
@d1 1
a1 1
.\" $OpenBSD: skeyprune.8,v 1.4 1999/07/02 20:11:46 aaron Exp $
d15 5
a19 4
searches through the file
.Dq Pa /etc/skeykeys
and prunes out users who have zeroed their entries via
.Xr skeyinit 1
d25 1
a25 1
is not specified only commented out entries are pruned.
a33 9
.Sh BUGS
Since
.Nm skeyprune
rewrites
.Dq Pa /etc/skeykeys ,
there is a window where S/Key changes could get lost.
It is therefore suggested that
.Nm skeyprune
be run at a time when users are unlikely to be active.
@


1.4
log
@consistent .Dd usage; proper format is: .Dd Month DD, YYYY
@
text
@d1 1
a1 1
.\" $OpenBSD: skeyprune.8,v 1.3 1998/09/27 16:57:53 aaron Exp $
d21 2
a22 1
days.  If
@


1.3
log
@usr.bin/ man page cleanups, n-s
@
text
@d1 1
a1 1
.\" $OpenBSD: skeyprune.8,v 1.2 1997/09/22 05:15:05 millert Exp $
d4 1
a4 1
.Dd 27 Sep 1996
@


1.2
log
@Fix .Os
@
text
@d1 1
a1 1
.\" $OpenBSD: skeyprune.8,v 1.1 1996/09/28 00:00:41 millert Exp $
d17 1
a17 1
and prunes out users who have zeroed they entries via
d27 1
a27 1
The S/Key key information database
d30 2
a31 2
.Xr skeyinit 1 ,
.Xr skey 1
@


1.1
log
@skeyprune -- new command to prune commented (zero'd) and crufty skey entries.
@
text
@d1 1
a1 1
.\" $OpenBSD: skeyprune.8,v 1.2 1996/06/26 05:39:20 millert Exp $
d6 1
a6 1
.Os OpenBSD 4
@
