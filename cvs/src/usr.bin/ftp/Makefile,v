head	1.30;
access;
symbols
	OPENBSD_6_0:1.30.0.2
	OPENBSD_6_0_BASE:1.30
	OPENBSD_5_9:1.29.0.2
	OPENBSD_5_9_BASE:1.29
	OPENBSD_5_8:1.28.0.6
	OPENBSD_5_8_BASE:1.28
	OPENBSD_5_7:1.28.0.2
	OPENBSD_5_7_BASE:1.28
	OPENBSD_5_6:1.26.0.4
	OPENBSD_5_6_BASE:1.26
	OPENBSD_5_5:1.25.0.20
	OPENBSD_5_5_BASE:1.25
	OPENBSD_5_4:1.25.0.18
	OPENBSD_5_4_BASE:1.25
	OPENBSD_5_3:1.25.0.16
	OPENBSD_5_3_BASE:1.25
	OPENBSD_5_2:1.25.0.14
	OPENBSD_5_2_BASE:1.25
	OPENBSD_5_1_BASE:1.25
	OPENBSD_5_1:1.25.0.12
	OPENBSD_5_0:1.25.0.10
	OPENBSD_5_0_BASE:1.25
	OPENBSD_4_9:1.25.0.8
	OPENBSD_4_9_BASE:1.25
	OPENBSD_4_8:1.25.0.6
	OPENBSD_4_8_BASE:1.25
	OPENBSD_4_7:1.25.0.2
	OPENBSD_4_7_BASE:1.25
	OPENBSD_4_6:1.25.0.4
	OPENBSD_4_6_BASE:1.25
	OPENBSD_4_5:1.24.0.2
	OPENBSD_4_5_BASE:1.24
	OPENBSD_4_4:1.23.0.2
	OPENBSD_4_4_BASE:1.23
	OPENBSD_4_3:1.22.0.4
	OPENBSD_4_3_BASE:1.22
	OPENBSD_4_2:1.22.0.2
	OPENBSD_4_2_BASE:1.22
	OPENBSD_4_1:1.21.0.4
	OPENBSD_4_1_BASE:1.21
	OPENBSD_4_0:1.21.0.2
	OPENBSD_4_0_BASE:1.21
	OPENBSD_3_9:1.20.0.10
	OPENBSD_3_9_BASE:1.20
	OPENBSD_3_8:1.20.0.8
	OPENBSD_3_8_BASE:1.20
	OPENBSD_3_7:1.20.0.6
	OPENBSD_3_7_BASE:1.20
	OPENBSD_3_6:1.20.0.4
	OPENBSD_3_6_BASE:1.20
	OPENBSD_3_5:1.20.0.2
	OPENBSD_3_5_BASE:1.20
	OPENBSD_3_4:1.19.0.4
	OPENBSD_3_4_BASE:1.19
	OPENBSD_3_3:1.19.0.2
	OPENBSD_3_3_BASE:1.19
	OPENBSD_3_2:1.18.0.10
	OPENBSD_3_2_BASE:1.18
	OPENBSD_3_1:1.18.0.8
	OPENBSD_3_1_BASE:1.18
	OPENBSD_3_0:1.18.0.6
	OPENBSD_3_0_BASE:1.18
	OPENBSD_2_9_BASE:1.18
	OPENBSD_2_9:1.18.0.4
	OPENBSD_2_8:1.18.0.2
	OPENBSD_2_8_BASE:1.18
	OPENBSD_2_7:1.16.0.2
	OPENBSD_2_7_BASE:1.16
	OPENBSD_2_6:1.15.0.6
	OPENBSD_2_6_BASE:1.15
	OPENBSD_2_5:1.15.0.4
	OPENBSD_2_5_BASE:1.15
	OPENBSD_2_4:1.15.0.2
	OPENBSD_2_4_BASE:1.15
	OPENBSD_2_3:1.14.0.4
	OPENBSD_2_3_BASE:1.14
	OPENBSD_2_2:1.14.0.2
	OPENBSD_2_2_BASE:1.14
	OPENBSD_2_1:1.9.0.2
	OPENBSD_2_1_BASE:1.9
	OPENBSD_2_0:1.4.0.2
	OPENBSD_2_0_BASE:1.4
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.30
date	2016.05.06.22.06.09;	author jca;	state Exp;
branches;
next	1.29;
commitid	ivkrTCmMssc36Xjc;

1.29
date	2015.10.12.16.39.07;	author deraadt;	state Exp;
branches;
next	1.28;
commitid	RkOb3lXwosgwalRx;

1.28
date	2015.02.09.08.24.20;	author tedu;	state Exp;
branches;
next	1.27;
commitid	Ab1pEJVaQayQbO7E;

1.27
date	2014.10.31.13.48.21;	author jsing;	state Exp;
branches;
next	1.26;
commitid	JZSdm092LMmDs9NJ;

1.26
date	2014.07.14.09.26.27;	author jsing;	state Exp;
branches;
next	1.25;
commitid	BJRfx2HJ6v6eQobV;

1.25
date	2009.05.05.19.35.30;	author martynas;	state Exp;
branches;
next	1.24;

1.24
date	2009.01.05.18.51.49;	author martynas;	state Exp;
branches;
next	1.23;

1.23
date	2008.07.08.21.07.57;	author martynas;	state Exp;
branches;
next	1.22;

1.22
date	2007.06.13.13.52.26;	author pyr;	state Exp;
branches;
next	1.21;

1.21
date	2006.05.16.16.20.42;	author deraadt;	state Exp;
branches;
next	1.20;

1.20
date	2003.11.20.23.32.26;	author tedu;	state Exp;
branches;
next	1.19;

1.19
date	2002.11.08.03.30.17;	author fgsch;	state Exp;
branches;
next	1.18;

1.18
date	2000.09.07.01.57.35;	author todd;	state Exp;
branches;
next	1.17;

1.17
date	2000.09.03.18.41.23;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	99.12.08.12.57.06;	author itojun;	state Exp;
branches;
next	1.15;

1.15
date	98.07.24.00.10.54;	author millert;	state Exp;
branches;
next	1.14;

1.14
date	97.10.02.04.22.39;	author imp;	state Exp;
branches;
next	1.13;

1.13
date	97.09.21.11.49.09;	author deraadt;	state Exp;
branches;
next	1.12;

1.12
date	97.09.05.03.53.23;	author millert;	state Exp;
branches;
next	1.11;

1.11
date	97.09.04.04.37.12;	author millert;	state Exp;
branches;
next	1.10;

1.10
date	97.07.25.21.56.16;	author millert;	state Exp;
branches;
next	1.9;

1.9
date	97.04.10.00.17.06;	author millert;	state Exp;
branches;
next	1.8;

1.8
date	97.03.26.00.35.23;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	97.03.21.20.59.26;	author millert;	state Exp;
branches;
next	1.6;

1.6
date	97.02.03.01.05.31;	author millert;	state Exp;
branches;
next	1.5;

1.5
date	97.02.03.01.02.31;	author millert;	state Exp;
branches;
next	1.4;

1.4
date	96.09.03.18.00.05;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	96.06.26.05.33.32;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	95.12.14.03.29.08;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.45.17;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.45.17;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.30
log
@Remove #ifdef INET6 bits, missed in a commit earlier this week

This probably broke passive FTP on IPv6 and [ip::v6]:port syntax in
RAMDISK ftp(1), sorry about that.

The diff was initially ok millert@@
@
text
@#	$OpenBSD: Makefile,v 1.29 2015/10/12 16:39:07 deraadt Exp $

# Define SMALL to disable command line editing and https support
#CFLAGS+=-DSMALL

PROG=	ftp
SRCS=	cmds.c cmdtab.c complete.c cookie.c domacro.c fetch.c ftp.c \
	list.c main.c ruserpass.c small.c stringlist.c util.c

LDADD+=	-ledit -lcurses -lutil -ltls -lssl -lcrypto
DPADD+=	${LIBEDIT} ${LIBCURSES} ${LIBUTIL} ${LIBTLS} ${LIBSSL} ${LIBCRYPTO}

#COPTS+= -Wall -Wconversion -Wstrict-prototypes -Wmissing-prototypes

.include <bsd.prog.mk>
@


1.29
log
@ftp(1) was static for years, as a recovery seatbelt.  These days
reliability has improved, and other repair methods are easier from
bsd.rd or whatnot.  As a static binary ftp has limited ASLR, yet it has
7 libraries...  Making it non-static means the ASLR picture improves.
Let's see who moans first.
ok miod daniel
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.28 2015/02/09 08:24:20 tedu Exp $
a8 2

CPPFLAGS+= -DINET6
@


1.28
log
@various defines always exist, so delete the ifdef test.
the socks support seems to be dead, since there are no other references.
also, redeclaring a standard function? that's a no-no.
custom compiles with gate-ftp servers don't need to be supported either.
ok deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.27 2014/10/31 13:48:21 jsing Exp $
a13 1
LDSTATIC= ${STATIC}
@


1.27
log
@Update ftp(1) to use libtls instead of libressl.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.26 2014/07/14 09:26:27 jsing Exp $
a4 8

# Uncomment the following to provide defaults for gate-ftp operation
#CFLAGS+=-DGATE_SERVER=\"ftp-gw.host\" # -DGATE_PORT=21

.if (defined(USE_SOCKS) && ${USE_SOCKS:L} == "yes")
CFLAGS += -DSOCKS -I/usr/local/include
LDADD += -L/usr/local/lib -lsocks
.endif
@


1.26
log
@Convert ftp(1) to libressl, rather than rolling in^W^Whand rolling libssl.

ok beck@@ deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.24 2009/01/05 18:51:49 martynas Exp $
d20 2
a21 2
LDADD+=	-ledit -lcurses -lutil -lressl -lssl -lcrypto
DPADD+=	${LIBEDIT} ${LIBCURSES} ${LIBUTIL} ${LIBRESSL} ${LIBSSL} ${LIBCRYPTO}
@


1.25
log
@make it clean removing the ifdef SMALL maze.  separate cmds and
small stuff.  make it a fetcher.  shrinks quite a bit
agreed by millert@@, krw@@
ok theo, sthen@@
@
text
@d20 2
a21 2
LDADD+=	-ledit -lcurses -lutil -lssl -lcrypto
DPADD+=	${LIBEDIT} ${LIBCURSES} ${LIBUTIL}
@


1.24
log
@since socks5 has been removed from ports recently, switch ftp to
dante instead.  "makes sense" sthen@@, ajacoutot@@, "no objections"
millert@@; "i agree" jakob@@.  tested by Simon Kuhnle and myself
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.23 2008/07/08 21:07:57 martynas Exp $
d15 2
a16 2
SRCS=	cmds.c cmdtab.c complete.c cookie.c domacro.c fetch.c ftp.c list.c \
	main.c ruserpass.c stringlist.c util.c
@


1.23
log
@- add support for recursive transfers (but not for floppies), e.g.
'mget -cr 4.*' would recursively fetch (-r), and resume the previous
transfers (-c) of 4.X release directories
uses local matching (fnmatch), but only for recursive transfers.
current behavior is not changed in any way.
- while here, ifndef SMALL debugging stuff, this saves some space,
for floppies
- some debugging code was enabled for non-debugging mode, checks
assume debug is set to zero, but it's not initially set
- all "Confirm with" prompts are forced, remove redundant argument
- fix usage: -C and -c are not available for SMALL

discussed a year ago w/ pyr@@
looks good to millert@@
previous version looked good to pyr@@
man page tweaks & ok jmc@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.22 2007/06/13 13:52:26 pyr Exp $
d11 1
a11 1
LDADD += -lsocks5
@


1.22
log
@Enable cookie support. This allows parsing of netscape-like cookie jars
and sending of appropriate cookies. No retrieval of new cookies is done.
Careful review and lots of input by millert and ray.

ok millert@@, ray@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.21 2006/05/16 16:20:42 deraadt Exp $
d15 2
a16 2
SRCS=	cmds.c cmdtab.c complete.c domacro.c fetch.c ftp.c main.c ruserpass.c \
	cookie.c stringlist.c util.c
@


1.21
log
@https URL support; rototilled by a few people including me; originally
from Rainer_Giedat@@genua.de
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.20 2003/11/20 23:32:26 tedu Exp $
d16 1
a16 1
	stringlist.c util.c
@


1.20
log
@build statically, to ease disaster recovery in some situations.
ok david@@ grange@@ henning@@ ian@@ jakob@@ lebel@@ markus@@ and possibly a few others.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.19 2002/11/08 03:30:17 fgsch Exp $
d3 1
a3 1
# Define SMALL to disable command line editing
d20 1
a20 1
LDADD+=	-ledit -lcurses -lutil
@


1.19
log
@http redirect support; adapted from NetBSD.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.17 2000/09/03 18:41:23 espie Exp $
d22 1
@


1.18
log
@bogus comment police
@
text
@d20 2
a21 2
LDADD+=	-ledit -lcurses
DPADD+=	${LIBEDIT} ${LIBCURSES}
@


1.17
log
@Boring...  Add :L modifier to all tweakable variables tests.

Closes PR 1246
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.16 1999/12/08 12:57:06 itojun Exp $
a17 1
# not really used at this moment
@


1.16
log
@ftp(1) from KAME, should be good for testing.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.15 1998/07/24 00:10:54 millert Exp $
d9 1
a9 1
.if (defined(USE_SOCKS) && ${USE_SOCKS} == "YES")
@


1.15
log
@-lcurses, not termcap/termlib
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.14 1997/10/02 04:22:39 imp Exp $
d17 3
@


1.14
log
@Fix CFLAGS in SOCKS case, and automatically use USE_SOCKS to compile socks in
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.13 1997/09/21 11:49:09 deraadt Exp $
d18 2
a19 2
LDADD+=	-ledit -ltermcap
DPADD+=	${LIBEDIT} ${LIBTERMCAP}
@


1.13
log
@$OpenBSD$
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.12 1997/09/05 03:53:23 millert Exp $
d9 4
a12 3
# Uncomment the following for socks5 support.
#CFLAGS += -DSOCKS -include /usr/local/include/socks.h
#LDADD += -lsocks5
@


1.12
log
@Add commented out support for building with socks5.
@
text
@d1 1
a1 3
#	$OpenBSD: Makefile,v 1.11 1997/09/04 04:37:12 millert Exp $
#	$NetBSD: Makefile,v 1.13 1997/08/18 10:20:13 lukem Exp $
#	from: @@(#)Makefile	8.2 (Berkeley) 4/3/94
@


1.11
log
@Updtaes from NetBSD (lukem)
    bugs fixed:
      * don't interpret '-' or '|' when a local filename is determined from
        the remote name (i.e, in mget, and in get with only one argument).
        This is implemented using an extra argument to recvrequest().
        Fixes a major security hole.
      * clean up memory leak when using globulize()
      * clean up a couple of comments
      * fix wording in TNF copyright

    features added:
      * support for TIS fwtk gate-ftp servers:
        * read defaults from $FTPSERVER && $FTPSERVERPORT
        * start in gate-ftp mode if invoked as 'gate-ftp'
        * toggle or set with 'gate [host [port]]'

Other changes:
    * use symbolic flags in access(2)
    * Use USHRT_MAX, not 0xffff
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.10 1997/07/25 21:56:16 millert Exp $
d10 4
@


1.10
log
@Updates from NetBSD (lukem) include -Wall cleanup.
More -W* cleanup and in_port_t usage by me.
@
text
@d1 2
a2 2
#	$OpenBSD: Makefile,v 1.9 1997/04/10 00:17:06 millert Exp $
#	$NetBSD: Makefile,v 1.12 1997/07/20 09:45:35 lukem Exp $
d5 1
a5 1
# define SMALL to disable command line editing
d7 3
@


1.9
log
@Sync with NetBSD (lukem)
    * support $ftp_proxy for ftp:// transfers [bin/3245]
    * add "more" & "less" as synonyms for "page"
    * move editline setup code into controlediting(), and call appropriately.
      only setup setup terminal if going into interactive mode.
@
text
@d1 2
a2 2
#	$OpenBSD: Makefile,v 1.8 1997/03/26 00:35:23 deraadt Exp $
#	$NetBSD: Makefile,v 1.11 1997/03/24 21:59:36 christos Exp $
d14 2
@


1.8
log
@no libcrypt, fix DPADD
@
text
@d1 2
a2 2
#	$OpenBSD: Makefile,v 1.7 1997/03/21 20:59:26 millert Exp $
#	$NetBSD: Makefile,v 1.10 1997/03/14 01:39:31 christos Exp $
@


1.7
log
@Add in recent NetBSD changes we didn't already have:
    Always compile complete.c but ifdef out the bits if -DSMALL (christos)
    reset interactive mode correctly in auto_fetch() mget mode (lukem)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.6 1997/02/03 01:05:31 millert Exp $
d13 1
@


1.6
log
@Add back ``-r'' option and fix strncpy() usage and other nits because
I'm anal.  Closer to KNF now.
@
text
@d1 2
a2 2
#	$OpenBSD: Makefile,v 1.8 1997/01/19 14:19:02 lukem Exp $
#	$NetBSD: Makefile,v 1.8 1997/01/19 14:19:02 lukem Exp $
d5 2
a6 2
# define SMALLFTP if editing is to be disabled
#SMALLFTP=yes
d9 1
a9 1
SRCS=	cmds.c cmdtab.c domacro.c fetch.c ftp.c main.c ruserpass.c \
a11 4
.if defined(SMALLFTP)
CFLAGS+=-DSMALLFTP
.else
SRCS+=	complete.c
a12 1
.endif
@


1.5
log
@Sync with NetBSD
@
text
@d1 1
d9 2
a10 1
SRCS=	cmds.c cmdtab.c domacro.c fetch.c ftp.c main.c ruserpass.c util.c
@


1.4
log
@http:// support for the command line fetches; useful for the ports subsystem
and other scripts. written by brian@@saturn.net (and then i clawed at it for
a bit..)
@
text
@d1 5
a5 2
#       $OpenBSD: Makefile,v 1.3 1996/06/26 05:33:32 deraadt Exp $
#       $NetBSD: Makefile,v 1.6 1995/11/22 21:52:48 cgd Exp $
d8 8
a15 2
SRCS=	cmds.c cmdtab.c ftp.c main.c ruserpass.c domacro.c http.c
CFLAGS+= -Dunix
@


1.3
log
@rcsid
@
text
@d1 1
a1 1
#       $OpenBSD: Makefile,v 1.6 1995/11/22 21:52:48 cgd Exp $
d5 1
a5 1
SRCS=	cmds.c cmdtab.c ftp.c main.c ruserpass.c domacro.c
@


1.2
log
@from netbsd; declare ourself as unix so that binary is assumed
@
text
@d1 1
a1 1
#	@@(#)Makefile	8.2 (Berkeley) 4/3/94
@


1.1
log
@Initial revision
@
text
@d2 1
a2 1
#       $NetBSD: Makefile,v 1.5 1995/09/08 01:05:59 tls Exp $
d6 1
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
