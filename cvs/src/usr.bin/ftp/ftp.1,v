head	1.107;
access;
symbols
	OPENBSD_6_2_BASE:1.107
	OPENBSD_6_1:1.107.0.4
	OPENBSD_6_1_BASE:1.107
	OPENBSD_6_0:1.101.0.4
	OPENBSD_6_0_BASE:1.101
	OPENBSD_5_9:1.101.0.2
	OPENBSD_5_9_BASE:1.101
	OPENBSD_5_8:1.98.0.4
	OPENBSD_5_8_BASE:1.98
	OPENBSD_5_7:1.97.0.2
	OPENBSD_5_7_BASE:1.97
	OPENBSD_5_6:1.93.0.4
	OPENBSD_5_6_BASE:1.93
	OPENBSD_5_5:1.91.0.2
	OPENBSD_5_5_BASE:1.91
	OPENBSD_5_4:1.88.0.2
	OPENBSD_5_4_BASE:1.88
	OPENBSD_5_3:1.87.0.2
	OPENBSD_5_3_BASE:1.87
	OPENBSD_5_2:1.82.0.2
	OPENBSD_5_2_BASE:1.82
	OPENBSD_5_1_BASE:1.81
	OPENBSD_5_1:1.81.0.8
	OPENBSD_5_0:1.81.0.6
	OPENBSD_5_0_BASE:1.81
	OPENBSD_4_9:1.81.0.4
	OPENBSD_4_9_BASE:1.81
	OPENBSD_4_8:1.81.0.2
	OPENBSD_4_8_BASE:1.81
	OPENBSD_4_7:1.79.0.2
	OPENBSD_4_7_BASE:1.79
	OPENBSD_4_6:1.77.0.4
	OPENBSD_4_6_BASE:1.77
	OPENBSD_4_5:1.74.0.2
	OPENBSD_4_5_BASE:1.74
	OPENBSD_4_4:1.72.0.2
	OPENBSD_4_4_BASE:1.72
	OPENBSD_4_3:1.65.0.2
	OPENBSD_4_3_BASE:1.65
	OPENBSD_4_2:1.61.0.2
	OPENBSD_4_2_BASE:1.61
	OPENBSD_4_1:1.57.0.2
	OPENBSD_4_1_BASE:1.57
	OPENBSD_4_0:1.56.0.2
	OPENBSD_4_0_BASE:1.56
	OPENBSD_3_9:1.53.0.2
	OPENBSD_3_9_BASE:1.53
	OPENBSD_3_8:1.52.0.2
	OPENBSD_3_8_BASE:1.52
	OPENBSD_3_7:1.49.0.2
	OPENBSD_3_7_BASE:1.49
	OPENBSD_3_6:1.42.0.4
	OPENBSD_3_6_BASE:1.42
	OPENBSD_3_5:1.42.0.2
	OPENBSD_3_5_BASE:1.42
	OPENBSD_3_4:1.41.0.2
	OPENBSD_3_4_BASE:1.41
	OPENBSD_3_3:1.37.0.2
	OPENBSD_3_3_BASE:1.37
	OPENBSD_3_2:1.36.0.2
	OPENBSD_3_2_BASE:1.36
	OPENBSD_3_1:1.34.0.4
	OPENBSD_3_1_BASE:1.34
	OPENBSD_3_0:1.34.0.2
	OPENBSD_3_0_BASE:1.34
	OPENBSD_2_9_BASE:1.33
	OPENBSD_2_9:1.33.0.2
	OPENBSD_2_8:1.31.0.2
	OPENBSD_2_8_BASE:1.31
	OPENBSD_2_7:1.29.0.2
	OPENBSD_2_7_BASE:1.29
	OPENBSD_2_6:1.27.0.2
	OPENBSD_2_6_BASE:1.27
	OPENBSD_2_5:1.24.0.2
	OPENBSD_2_5_BASE:1.24
	OPENBSD_2_4:1.22.0.2
	OPENBSD_2_4_BASE:1.22
	OPENBSD_2_3:1.18.0.2
	OPENBSD_2_3_BASE:1.18
	OPENBSD_2_2:1.15.0.2
	OPENBSD_2_2_BASE:1.15
	OPENBSD_2_1:1.12.0.2
	OPENBSD_2_1_BASE:1.12
	OPENBSD_2_0:1.3.0.2
	OPENBSD_2_0_BASE:1.3
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@.\" @;


1.107
date	2017.01.25.07.21.18;	author jmc;	state Exp;
branches;
next	1.106;
commitid	T1yEpeV4HZQiLc1W;

1.106
date	2017.01.24.23.47.34;	author beck;	state Exp;
branches;
next	1.105;
commitid	bJ7cpsloOiZinRoH;

1.105
date	2017.01.03.17.00.04;	author deraadt;	state Exp;
branches;
next	1.104;
commitid	9X2MbmZeyJX7O96R;

1.104
date	2016.12.22.17.26.18;	author jmc;	state Exp;
branches;
next	1.103;
commitid	7DjJaa0kLMTnFJ9U;

1.103
date	2016.12.22.16.30.03;	author beck;	state Exp;
branches;
next	1.102;
commitid	y1kvl8nyimUOdLfQ;

1.102
date	2016.07.28.21.37.45;	author tedu;	state Exp;
branches;
next	1.101;
commitid	mWujHdKL90lJ6y6i;

1.101
date	2015.11.05.16.25.57;	author schwarze;	state Exp;
branches;
next	1.100;
commitid	aI2VAeUhBnefrqur;

1.100
date	2015.09.25.20.32.39;	author schwarze;	state Exp;
branches;
next	1.99;
commitid	8dua5DyVr4uUmFUX;

1.99
date	2015.09.25.13.51.52;	author schwarze;	state Exp;
branches;
next	1.98;
commitid	1IVY5z3ydC2Bzrk6;

1.98
date	2015.03.13.19.58.41;	author jmc;	state Exp;
branches;
next	1.97;
commitid	OcwhWBKGs3Yn7EeA;

1.97
date	2015.02.17.22.39.32;	author tedu;	state Exp;
branches;
next	1.96;
commitid	rmPzrj0TBnBpQiAq;

1.96
date	2015.01.31.19.33.45;	author jmc;	state Exp;
branches;
next	1.95;
commitid	dcTJ3JLmqdSpu4uX;

1.95
date	2015.01.30.04.45.45;	author tedu;	state Exp;
branches;
next	1.94;
commitid	AzhkSUz6nBmdvJNd;

1.94
date	2014.11.15.14.41.02;	author bentley;	state Exp;
branches;
next	1.93;
commitid	HuCemPIiOkto0SJD;

1.93
date	2014.07.11.03.31.52;	author lteo;	state Exp;
branches;
next	1.92;
commitid	TgWHWtjz2JHTa3XV;

1.92
date	2014.06.25.06.57.42;	author jmc;	state Exp;
branches;
next	1.91;
commitid	Ofe8melW4UESM5uk;

1.91
date	2014.01.23.08.09.08;	author jmc;	state Exp;
branches;
next	1.90;

1.90
date	2014.01.23.00.39.15;	author deraadt;	state Exp;
branches;
next	1.89;

1.89
date	2013.12.24.13.00.59;	author jca;	state Exp;
branches;
next	1.88;

1.88
date	2013.04.28.18.03.40;	author lteo;	state Exp;
branches;
next	1.87;

1.87
date	2013.02.19.03.02.34;	author lteo;	state Exp;
branches;
next	1.86;

1.86
date	2013.02.15.04.31.59;	author lteo;	state Exp;
branches;
next	1.85;

1.85
date	2012.10.15.21.20.05;	author bluhm;	state Exp;
branches;
next	1.84;

1.84
date	2012.08.26.02.16.02;	author lteo;	state Exp;
branches;
next	1.83;

1.83
date	2012.08.14.20.47.08;	author haesbaert;	state Exp;
branches;
next	1.82;

1.82
date	2012.04.30.13.41.26;	author haesbaert;	state Exp;
branches;
next	1.81;

1.81
date	2010.07.26.21.31.34;	author jmc;	state Exp;
branches;
next	1.80;

1.80
date	2010.07.15.20.51.38;	author schwarze;	state Exp;
branches;
next	1.79;

1.79
date	2009.08.09.20.16.39;	author jmc;	state Exp;
branches;
next	1.78;

1.78
date	2009.08.09.18.36.11;	author sobrado;	state Exp;
branches;
next	1.77;

1.77
date	2009.06.06.12.07.33;	author martynas;	state Exp;
branches;
next	1.76;

1.76
date	2009.04.26.21.26.03;	author martynas;	state Exp;
branches;
next	1.75;

1.75
date	2009.04.13.01.47.04;	author deraadt;	state Exp;
branches;
next	1.74;

1.74
date	2008.09.08.19.31.16;	author martynas;	state Exp;
branches;
next	1.73;

1.73
date	2008.08.22.08.52.35;	author sobrado;	state Exp;
branches;
next	1.72;

1.72
date	2008.07.16.14.57.27;	author martynas;	state Exp;
branches;
next	1.71;

1.71
date	2008.07.08.21.07.57;	author martynas;	state Exp;
branches;
next	1.70;

1.70
date	2008.06.25.18.07.00;	author martynas;	state Exp;
branches;
next	1.69;

1.69
date	2008.06.16.19.56.04;	author martynas;	state Exp;
branches;
next	1.68;

1.68
date	2008.03.10.22.56.43;	author espie;	state Exp;
branches;
next	1.67;

1.67
date	2008.03.09.15.35.42;	author jmc;	state Exp;
branches;
next	1.66;

1.66
date	2008.03.08.11.37.33;	author espie;	state Exp;
branches;
next	1.65;

1.65
date	2007.11.28.16.21.25;	author jmc;	state Exp;
branches;
next	1.64;

1.64
date	2007.11.28.06.41.12;	author jmc;	state Exp;
branches;
next	1.63;

1.63
date	2007.11.26.12.39.00;	author martynas;	state Exp;
branches;
next	1.62;

1.62
date	2007.11.05.13.10.59;	author jmc;	state Exp;
branches;
next	1.61;

1.61
date	2007.06.16.08.58.33;	author espie;	state Exp;
branches;
next	1.60;

1.60
date	2007.06.13.18.43.16;	author jmc;	state Exp;
branches;
next	1.59;

1.59
date	2007.06.13.13.52.26;	author pyr;	state Exp;
branches;
next	1.58;

1.58
date	2007.05.31.19.20.10;	author jmc;	state Exp;
branches;
next	1.57;

1.57
date	2006.11.02.08.24.48;	author jmc;	state Exp;
branches;
next	1.56;

1.56
date	2006.05.25.03.35.58;	author ray;	state Exp;
branches;
next	1.55;

1.55
date	2006.05.19.16.43.07;	author jmc;	state Exp;
branches;
next	1.54;

1.54
date	2006.05.16.16.20.42;	author deraadt;	state Exp;
branches;
next	1.53;

1.53
date	2005.09.21.22.31.47;	author fgsch;	state Exp;
branches;
next	1.52;

1.52
date	2005.07.06.10.35.36;	author jmc;	state Exp;
branches;
next	1.51;

1.51
date	2005.07.06.08.22.07;	author jmc;	state Exp;
branches;
next	1.50;

1.50
date	2005.07.06.08.15.00;	author jmc;	state Exp;
branches;
next	1.49;

1.49
date	2005.01.07.11.11.28;	author jmc;	state Exp;
branches;
next	1.48;

1.48
date	2005.01.07.11.07.40;	author jmc;	state Exp;
branches;
next	1.47;

1.47
date	2005.01.07.10.36.29;	author jmc;	state Exp;
branches;
next	1.46;

1.46
date	2005.01.03.15.01.34;	author jmc;	state Exp;
branches;
next	1.45;

1.45
date	2005.01.03.14.47.52;	author jmc;	state Exp;
branches;
next	1.44;

1.44
date	2005.01.03.13.23.23;	author jmc;	state Exp;
branches;
next	1.43;

1.43
date	2005.01.02.18.10.26;	author jmc;	state Exp;
branches;
next	1.42;

1.42
date	2003.11.20.12.43.55;	author jmc;	state Exp;
branches;
next	1.41;

1.41
date	2003.09.02.18.50.06;	author jmc;	state Exp;
branches;
next	1.40;

1.40
date	2003.07.15.10.53.02;	author jmc;	state Exp;
branches;
next	1.39;

1.39
date	2003.06.03.02.56.08;	author millert;	state Exp;
branches;
next	1.38;

1.38
date	2003.03.31.19.40.44;	author jmc;	state Exp;
branches;
next	1.37;

1.37
date	2003.03.18.08.37.35;	author jmc;	state Exp;
branches;
next	1.36;

1.36
date	2002.07.04.10.08.51;	author jakob;	state Exp;
branches;
next	1.35;

1.35
date	2002.05.30.06.51.46;	author deraadt;	state Exp;
branches;
next	1.34;

1.34
date	2001.08.22.17.26.34;	author beck;	state Exp;
branches;
next	1.33;

1.33
date	2001.03.09.16.59.38;	author millert;	state Exp;
branches;
next	1.32;

1.32
date	2000.11.09.17.52.12;	author aaron;	state Exp;
branches;
next	1.31;

1.31
date	2000.06.21.19.22.54;	author itojun;	state Exp;
branches;
next	1.30;

1.30
date	2000.06.13.21.28.38;	author millert;	state Exp;
branches;
next	1.29;

1.29
date	2000.03.07.21.11.09;	author aaron;	state Exp;
branches;
next	1.28;

1.28
date	2000.02.29.04.52.37;	author aaron;	state Exp;
branches;
next	1.27;

1.27
date	99.07.04.11.53.54;	author aaron;	state Exp;
branches;
next	1.26;

1.26
date	99.06.10.22.38.02;	author pjanzen;	state Exp;
branches;
next	1.25;

1.25
date	99.06.05.01.21.26;	author aaron;	state Exp;
branches;
next	1.24;

1.24
date	99.02.09.17.43.04;	author deraadt;	state Exp;
branches;
next	1.23;

1.23
date	98.12.16.02.38.49;	author aaron;	state Exp;
branches;
next	1.22;

1.22
date	98.09.26.19.54.48;	author aaron;	state Exp;
branches;
next	1.21;

1.21
date	98.09.19.20.47.16;	author millert;	state Exp;
branches;
next	1.20;

1.20
date	98.09.19.20.12.31;	author millert;	state Exp;
branches;
next	1.19;

1.19
date	98.06.12.12.12.52;	author d;	state Exp;
branches;
next	1.18;

1.18
date	98.04.13.00.58.15;	author millert;	state Exp;
branches;
next	1.17;

1.17
date	98.02.17.23.22.55;	author millert;	state Exp;
branches;
next	1.16;

1.16
date	97.12.17.16.03.01;	author millert;	state Exp;
branches;
next	1.15;

1.15
date	97.09.04.04.42.34;	author millert;	state Exp;
branches;
next	1.14;

1.14
date	97.09.04.04.37.15;	author millert;	state Exp;
branches;
next	1.13;

1.13
date	97.07.25.21.56.20;	author millert;	state Exp;
branches;
next	1.12;

1.12
date	97.04.23.20.33.09;	author deraadt;	state Exp;
branches;
next	1.11;

1.11
date	97.04.16.05.02.50;	author millert;	state Exp;
branches;
next	1.10;

1.10
date	97.04.10.00.17.09;	author millert;	state Exp;
branches;
next	1.9;

1.9
date	97.03.14.04.32.15;	author millert;	state Exp;
branches;
next	1.8;

1.8
date	97.02.18.18.04.28;	author kstailey;	state Exp;
branches;
next	1.7;

1.7
date	97.02.03.01.05.38;	author millert;	state Exp;
branches;
next	1.6;

1.6
date	97.02.03.01.02.38;	author millert;	state Exp;
branches;
next	1.5;

1.5
date	96.11.09.19.56.23;	author kstailey;	state Exp;
branches;
next	1.4;

1.4
date	96.10.31.14.36.55;	author mickey;	state Exp;
branches;
next	1.3;

1.3
date	96.09.13.03.21.18;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	96.06.26.05.33.36;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.45.17;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.45.17;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.107
log
@cetificate -> certificate;
@
text
@.\"	$OpenBSD: ftp.1,v 1.106 2017/01/24 23:47:34 beck Exp $
.\"	$NetBSD: ftp.1,v 1.22 1997/08/18 10:20:22 lukem Exp $
.\"
.\" Copyright (c) 1985, 1989, 1990, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"	@@(#)ftp.1	8.3 (Berkeley) 10/9/94
.\"
.Dd $Mdocdate: January 24 2017 $
.Dt FTP 1
.Os
.Sh NAME
.Nm ftp
.Nd Internet file transfer program
.Sh SYNOPSIS
.Nm ftp
.Op Fl 46AadEegiMmnptVv
.Op Fl D Ar title
.Op Fl k Ar seconds
.Op Fl P Ar port
.Op Fl r Ar seconds
.Op Fl s Ar srcaddr
.Op Ar host Op Ar port
.Nm ftp
.Op Fl C
.Op Fl o Ar output
.Op Fl s Ar srcaddr
.Sm off
.Pf ftp:// Op Ar user : password No @@
.Ar host Op : Ar port
.No / Ar file Op /
.Sm on
.Ar ...
.Nm ftp
.Op Fl C
.Op Fl c Ar cookie
.Op Fl o Ar output
.Op Fl S Ar ssl_options
.Op Fl s Ar srcaddr
.Op Fl U Ar useragent
.Op Fl w Ar seconds
.Sm off
.Pf http Oo s Oc ://
.Op Ar user : password No @@
.Ar host Op : Ar port
.No / Ar file
.Sm on
.Ar ...
.Nm ftp
.Op Fl C
.Op Fl o Ar output
.Op Fl s Ar srcaddr
.Pf file: Ar
.Nm ftp
.Op Fl C
.Op Fl o Ar output
.Op Fl s Ar srcaddr
.Ar host : Ns / Ns Ar file Ns Op /
.Ar ...
.Sh DESCRIPTION
.Nm
is the user interface to the Internet standard File Transfer
Protocol (FTP).
The program allows a user to transfer files to and from a
remote network site.
.Pp
The latter four usage formats will fetch a file using either the
FTP, HTTP, or HTTPS protocols into the current directory.
This is ideal for scripts.
Refer to
.Sx AUTO-FETCHING FILES
below for more information.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl 4
Forces
.Nm
to use IPv4 addresses only.
.It Fl 6
Forces
.Nm
to use IPv6 addresses only.
.It Fl A
Force active mode FTP.
By default,
.Nm
will try to use passive mode FTP and fall back to active mode
if passive is not supported by the server.
This option causes
.Nm
to always use an active connection.
It is only useful for connecting
to very old servers that do not implement passive mode properly.
.It Fl a
Causes
.Nm
to bypass the normal login procedure and use an anonymous login instead.
.It Fl C
Continue a previously interrupted file transfer.
.Nm
will continue transferring from an offset equal to the length of
.Ar file .
.Pp
Resuming HTTP(S) transfers are only supported
if the remote server supports the
.Dq Range
header.
.It Fl c Ar cookie
Load a Netscape-like cookiejar file
for HTTP and HTTPS transfers.
With this option relevant cookies from the jar are sent with each HTTP(S)
request.
Setting the
.Ev http_cookies
environment variable has the same effect.
If both the
.Ev http_cookies
environment variable is set and the
.Fl c
argument is given, the latter takes precedence.
.It Fl D Ar title
Specify a short
.Ar title
for the start of the progress bar.
.It Fl d
Enables debugging.
.It Fl E
Disables EPSV/EPRT command on IPv4 connections.
.It Fl e
Disables command line editing.
Useful for Emacs ange-ftp.
.It Fl g
Disables file name globbing.
.It Fl i
Turns off interactive prompting during
multiple file transfers.
.It Fl k Ar seconds
When greater than zero,
sends a byte after each
.Ar seconds
period over the control connection during long transfers,
so that incorrectly configured network equipment won't
aggressively drop it.
The FTP protocol supports a
.Dv NOOP
command that can be used for that purpose.
This assumes the FTP server can deal with extra commands coming over
the control connection during a transfer.
Well-behaved servers queue those commands, and process them after the
transfer.
By default,
.Nm
will send a byte every 60 seconds.
.It Fl M
Causes
.Nm
to never display the progress meter in cases where it would do
so by default.
.It Fl m
Causes
.Nm
to always display the progress meter in cases where it would not do
so by default.
.It Fl n
Restrains
.Nm
from attempting
.Dq auto-login
upon initial connection.
If auto-login is enabled,
.Nm
will check the
.Pa .netrc
file (see below) in the user's home directory for an entry describing
an account on the remote machine.
If no entry exists,
.Nm
will prompt for the remote machine login name (default is the user
identity on the local machine) and, if necessary, prompt for a password
and an account with which to log in.
.It Fl o Ar output
When fetching a single file or URL, save the contents in
.Ar output .
To make the contents go to stdout,
use
.Sq -
for
.Ar output .
.It Fl P Ar port
Sets the port number to
.Ar port .
.It Fl p
Enable passive mode operation for use behind connection filtering firewalls.
This option has been deprecated as
.Nm
now tries to use passive mode by default, falling back to active mode
if the server does not support passive connections.
.It Fl r Ar seconds
Retry to connect if failed, pausing for number of
.Ar seconds .
.It Fl S Ar ssl_options
SSL/TLS options to use with HTTPS transfers.
The following settings are available:
.Bl -tag -width Ds
.It Cm cafile Ns = Ns Ar /path/to/cert.pem
PEM encoded file containing CA certificates used for certificate
validation.
.It Cm capath Ns = Ns Ar /path/to/certs/
Directory containing PEM encoded CA certificates used for certificate
validation.
Such a directory can be prepared using the c_rehash script distributed with
OpenSSL.
.It Cm ciphers Ns = Ns Ar cipher_list
Specify the list of ciphers that will be used by
.Nm .
See the
.Xr openssl 1
.Cm ciphers
subcommand.
.It Cm depth Ns = Ns Ar max_depth
Maximum depth of the certificate chain allowed when performing
validation.
.It Cm do
Perform server certificate validation.
.It Cm dont
Don't perform server certificate validation.
.It Cm muststaple
Require the server to present a valid OCSP stapling in the TLS handshake.
.It Cm noverifytime
Disable validation of certificate times and OCSP validation.
.El
.Pp
By default, server certificate validation is performed, and if it fails
.Nm
will abort.
If no
.Cm cafile
or
.Cm capath
setting is provided,
.Pa /etc/ssl/cert.pem
will be used.
.It Fl s Ar srcaddr
Use
.Ar srcaddr
on the local machine as the source address
of the connection.
Only useful on systems with more than one address.
.It Fl t
Enables packet tracing.
.It Fl U Ar useragent
Set
.Ar useragent
as the User-Agent for HTTP(S) URL requests.
If not specified, the default User-Agent is
.Dq OpenBSD ftp .
.It Fl V
Disable verbose mode, overriding the default of enabled when input
is from a terminal.
.It Fl v
Enable verbose mode.
This is the default if input is from a terminal.
Forces
.Nm
to show all responses from the remote server, as well
as report on data transfer statistics.
.It Fl w Ar seconds
For URL format connections to HTTP/HTTPS servers, abort a
slow connection after
.Ar seconds .
.El
.Pp
The host with which
.Nm
is to communicate may be specified on the command line.
If this is done,
.Nm
will immediately attempt to establish a connection to an
FTP server on that host; otherwise,
.Nm
will enter its command interpreter and await instructions
from the user.
When
.Nm
is awaiting commands, the prompt
.Dq ftp\*(Gt
is provided to the user.
The following commands are recognized
by
.Nm :
.Bl -tag -width Fl
.It Ic \&! Oo Ar command
.Op Ar arg ...
.Oc
Invoke an interactive shell on the local machine.
If there are arguments, the first is taken to be a command to execute
directly, with the rest of the arguments as its arguments.
.It Ic \&$ Ar macro-name Op Ar arg ...
Execute the macro
.Ar macro-name
that was defined with the
.Ic macdef
command.
Arguments are passed to the macro unglobbed.
.It Ic \&? Op Ar command
A synonym for
.Ic help .
.It Ic account Op Ar password
Supply a supplemental password required by a remote system for access
to resources once a login has been successfully completed.
If no argument is included, the user will be prompted for an account
password in a non-echoing input mode.
.It Ic append Ar local-file Op Ar remote-file
Append a local file to a file on the remote machine.
If
.Ar remote-file
is left unspecified, the local file name is used in naming the
remote file after being altered by any
.Ic ntrans
or
.Ic nmap
setting.
File transfer uses the current settings for
.Ic type ,
.Ic format ,
.Ic mode ,
and
.Ic structure .
.It Ic ascii
Set the file transfer
.Ic type
to network
.Tn ASCII .
.It Ic bell Op Ic on | off
Arrange that a bell be sounded after each file transfer
command is completed.
.It Ic binary
Set the file transfer
.Ic type
to support binary image transfer.
This is the default type.
.It Ic bye
Terminate the FTP session with the remote server and exit
.Nm .
An end-of-file will also terminate the session and exit.
.It Ic case Op Ic on | off
Toggle remote computer file name case mapping during
.Ic mget
commands.
When
.Ic case
is on (default is off), remote computer file names with all letters in
upper case are written in the local directory with the letters mapped
to lower case.
.It Ic cd Ar remote-directory
Change the working directory on the remote machine
to
.Ar remote-directory .
.It Ic cdup
Change the remote machine working directory to the parent of the
current remote machine working directory.
.It Ic chmod Ar mode file
Change the permission modes of
.Ar file
on the remote
system to
.Ar mode .
.It Ic close
Terminate the FTP session with the remote server and
return to the command interpreter.
Any defined macros are erased.
.It Ic cr Op Ic on | off
Toggle carriage return stripping during
ASCII type file retrieval.
Records are denoted by a carriage return/linefeed sequence
during ASCII type file transfer.
When
.Ic cr
is on (the default), carriage returns are stripped from this
sequence to conform with the
.Ux
single linefeed record delimiter.
Records on non-UNIX
remote systems may contain single linefeeds;
when an ASCII type transfer is made, these linefeeds may be
distinguished from a record delimiter only when
.Ic cr
is off.
.It Ic debug Oo Ic on | off |
.Ar debuglevel
.Oc
Toggle debugging mode.
If an optional
.Ar debuglevel
is specified, it is used to set the debugging level.
When debugging is on,
.Nm
prints each command sent to the remote machine,
preceded by the string
.Ql --\*(Gt .
.It Ic delete Ar remote-file
Delete the file
.Ar remote-file
on the remote machine.
.It Ic dir Op Ar remote-directory Op Ar local-file
A synonym for
.Ic ls .
.It Ic disconnect
A synonym for
.Ic close .
.It Ic edit Op Ic on | off
Toggle command line editing, and context sensitive command and file
completion.
This is automatically enabled if input is from a terminal, and
disabled otherwise.
.It Ic epsv4 Op Ic on | off
Toggle use of EPSV/EPRT command on IPv4 connection.
.It Ic exit
A synonym for
.Ic bye .
.It Ic form Ar format
Set the file transfer
.Ic form
to
.Ar format .
The default format is
.Dq file .
.It Ic ftp Ar host Op Ar port
A synonym for
.Ic open .
.It Ic gate Oo Ic on | off |
.Ar host Op Ar port
.Oc
Toggle gate-ftp mode.
This will not be permitted if the gate-ftp server hasn't been set
(either explicitly by the user, or from the
.Ev FTPSERVER
environment variable).
If
.Ar host
is given,
then gate-ftp mode will be enabled, and the gate-ftp server will be set to
.Ar host .
If
.Ar port
is also given, that will be used as the port to connect to on the
gate-ftp server.
.It Ic get Ar remote-file Op Ar local-file
Retrieve the
.Ar remote-file
and store it on the local machine.
If the local
file name is not specified, it is given the same
name it has on the remote machine, subject to
alteration by the current
.Ic case ,
.Ic ntrans ,
and
.Ic nmap
settings.
The current settings for
.Ic type ,
.Ic form ,
.Ic mode ,
and
.Ic structure
are used while transferring the file.
.It Ic glob Op Ic on | off
Toggle filename expansion for
.Ic mdelete ,
.Ic mget
and
.Ic mput .
If globbing is turned off with
.Ic glob ,
the file name arguments
are taken literally and not expanded.
Globbing for
.Ic mput
is done as in
.Xr csh 1 .
For
.Ic mdelete
and
.Ic mget ,
each remote file name is expanded
separately on the remote machine and the lists are not merged.
Expansion of a directory name is likely to be
different from expansion of the name of an ordinary file:
the exact result depends on the foreign operating system and FTP server,
and can be previewed by doing
.Dq mls remote-files - .
Note:
.Ic mget
and
.Ic mput
are not meant to transfer
entire directory subtrees of files.
That can be done by
transferring a
.Xr tar 1
archive of the subtree (in binary mode).
.It Ic hash Oo Ic on | off |
.Ar size
.Oc
Toggle hash mark
.Pq Ql #
printing for each data block transferred.
The size of a data block defaults to 1024 bytes.
This can be changed by specifying
.Ar size
in bytes.
.It Ic help Op Ar command
Print an informative message about the meaning of
.Ar command .
If no argument is given,
.Nm
prints a list of the known commands.
.It Ic idle Op Ar seconds
Set the inactivity timer on the remote server to
.Ar seconds
seconds.
If
.Ar seconds
is omitted, the current inactivity timer is printed.
.It Ic lcd Op Ar local-directory
Change the working directory on the local machine.
If
no
.Ar local-directory
is specified, the user's home directory is used.
.It Ic less Ar file
A synonym for
.Ic page .
.It Ic lpwd
Print the working directory on the local machine.
.It Ic ls Op Ar remote-directory Op Ar local-file
Print a listing of the contents of a directory on the remote machine.
The listing includes any system-dependent information that the server
chooses to include; for example, most
.Ux
systems will produce output from the command
.Ql ls -l .
If
.Ar remote-directory
is left unspecified, the current working directory is used.
If interactive prompting is on,
.Nm
will prompt the user to verify that the last argument is indeed the
target local file for receiving
.Ic ls
output.
If no local file is specified, or if
.Ar local-file
is
.Sq - ,
the output is sent to the terminal.
.It Ic macdef Ar macro-name
Define a macro.
Subsequent lines are stored as the macro
.Ar macro-name ;
a null line (consecutive newline characters
in a file or
carriage returns from the terminal) terminates macro input mode.
There is a limit of 16 macros and 4096 total characters in all
defined macros.
Macro names can be a maximum of 8 characters.
Macros are only applicable to the current session they are
defined in (or if defined outside a session, to the session
invoked with the next
.Ic open
command), and remain defined until a
.Ic close
command is executed.
To invoke a macro,
use the
.Ic $
command (see above).
.Pp
The macro processor interprets
.Ql $
and
.Ql \e
as special characters.
A
.Ql $
followed by a number (or numbers) is replaced by the
corresponding argument on the macro invocation command line.
A
.Ql $
followed by an
.Sq i
tells the macro processor that the
executing macro is to be looped.
On the first pass
.Ql $i
is
replaced by the first argument on the macro invocation command line,
on the second pass it is replaced by the second argument, and so on.
A
.Ql \e
followed by any character is replaced by that character.
Use the
.Ql \e
to prevent special treatment of the
.Ql $ .
.It Ic mdelete Op Ar remote-files
Delete the
.Ar remote-files
on the remote machine.
.It Ic mdir Ar remote-files local-file
A synonym for
.Ic mls .
.It Xo Ic mget
.Op Fl cnr
.Op Fl d Ar depth
.Ar remote-files
.Xc
Expand the
.Ar remote-files
on the remote machine
and do a
.Ic get
for each file name thus produced.
See
.Ic glob
for details on the filename expansion.
Resulting file names will then be processed according to
.Ic case ,
.Ic ntrans ,
and
.Ic nmap
settings.
Files are transferred into the local working directory,
which can be changed with
.Ql lcd directory ;
new local directories can be created with
.Ql "\&! mkdir directory" .
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl c
Use
.Ic reget
instead of
.Ic get .
.It Fl d Ar depth
Specify the maximum recursion level
.Ar depth .
The default is 0, which means unlimited.
.It Fl n
Use
.Ic newer
instead of
.Ic get .
.It Fl r
Recursively descend the directory tree, transferring all files and
directories.
.El
.It Ic mkdir Ar directory-name
Make a directory on the remote machine.
.It Ic mls Ar remote-files local-file
Like
.Ic ls ,
except multiple remote files may be specified,
and the
.Ar local-file
must be specified.
If interactive prompting is on,
.Nm
will prompt the user to verify that the last argument is indeed the
target local file for receiving
.Ic mls
output.
.It Ic mode Op Ar mode-name
Set the file transfer
.Ic mode
to
.Ar mode-name .
The default mode is
.Dq stream
mode.
.It Ic modtime Ar file
Show the last modification time of
.Ar file
on the remote machine.
.It Ic more Ar file
A synonym for
.Ic page .
.It Xo Ic mput
.Op Fl cr
.Op Fl d Ar depth
.Ar local-files
.Xc
Expand wild cards in the list of local files given as arguments
and do a
.Ic put
for each file in the resulting list.
See
.Ic glob
for details of filename expansion.
Resulting file names will then be processed according to
.Ic ntrans
and
.Ic nmap
settings.
.Pp
If the
.Fl c
flag is specified then
The options are as follows:
.Bl -tag -width Ds
.It Fl c
Use
.Ic reput
instead of
.Ic put .
.It Fl d Ar depth
Specify the maximum recursion level
.Ar depth .
The default is 0, which means unlimited.
.It Fl r
Recursively descend the directory tree, transferring all files and
directories.
.El
.It Xo Ic msend
.Op Fl c
.Ar local-files
.Xc
A synonym for
.Ic mput .
.It Ic newer Ar remote-file Op Ar local-file
Get the file only if the modification time of the remote file is more
recent than the file on the current system.
If the file does not
exist on the current system, the remote file is considered
.Ic newer .
Otherwise, this command is identical to
.Ar get .
.It Ic nlist Op Ar remote-directory Op Ar local-file
Print a list of the files in a
directory on the remote machine.
If
.Ar remote-directory
is left unspecified, the current working directory is used.
If interactive prompting is on,
.Nm
will prompt the user to verify that the last argument is indeed the
target local file for receiving
.Ic nlist
output.
If no local file is specified, or if
.Ar local-file
is
.Sq - ,
the output is sent to the terminal.
Note that on some servers, the
.Ic nlist
command will only return information on normal files (not directories
or special files).
.It Ic nmap Op Ar inpattern outpattern
Set or unset the filename mapping mechanism.
If no arguments are specified, the filename mapping mechanism is unset.
If arguments are specified, remote filenames are mapped during
.Ic mput
commands and
.Ic put
commands issued without a specified remote target filename.
If arguments are specified, local filenames are mapped during
.Ic mget
commands and
.Ic get
commands issued without a specified local target filename.
This command is useful when connecting to a non-UNIX remote computer
with different file naming conventions or practices.
.Pp
The mapping follows the pattern set by
.Ar inpattern
and
.Ar outpattern .
.Ar inpattern
is a template for incoming filenames (which may have already been
processed according to the
.Ic ntrans
and
.Ic case
settings).
Variable templating is accomplished by including the
sequences
.Ql $1 ,
.Ql $2 ,
\&...,
.Ql $9
in
.Ar inpattern .
Use
.Ql \e
to prevent this special treatment of the
.Ql $
character.
All other characters are treated literally, and are used to determine the
.Ic nmap
.Ar inpattern
variable values.
.Pp
For example, given
.Ar inpattern
$1.$2 and the remote file name "mydata.data", $1 would have the value
"mydata", and $2 would have the value "data".
The
.Ar outpattern
determines the resulting mapped filename.
The sequences
.Ql $1 ,
.Ql $2 ,
\&...,
.Ql $9
are replaced by any value resulting from the
.Ar inpattern
template.
The sequence
.Ql $0
is replaced by the original filename.
Additionally, the sequence
.Sq Op Ar seq1 , Ar seq2
is replaced by
.Ar seq1
if
.Ar seq1
is not a null string; otherwise it is replaced by
.Ar seq2 .
For example:
.Pp
.Dl nmap $1.$2.$3 [$1,$2].[$2,file]
.Pp
This command would yield the output filename
.Pa myfile.data
for input filenames
.Pa myfile.data
and
.Pa myfile.data.old ;
.Pa myfile.file
for the input filename
.Pa myfile ;
and
.Pa myfile.myfile
for the input filename
.Pa .myfile .
Spaces may be included in
.Ar outpattern
by quoting them,
as in the following example:
.Bd -literal -offset indent
nmap $1.$2 "$1 $2"
.Ed
.Pp
Use the
.Ql \e
character to prevent special treatment
of the
.Ql $ ,
.Ql \&[ ,
.Ql \&] ,
and
.Ql \&,
characters.
.It Ic ntrans Op Ar inchars Op Ar outchars
Set or unset the filename character translation mechanism.
If no arguments are specified, the filename character
translation mechanism is unset.
If arguments are specified, characters in
remote filenames are translated during
.Ic mput
commands and
.Ic put
commands issued without a specified remote target filename.
If arguments are specified, characters in
local filenames are translated during
.Ic mget
commands and
.Ic get
commands issued without a specified local target filename.
This command is useful when connecting to a non-UNIX remote computer
with different file naming conventions or practices.
Characters in a filename matching a character in
.Ar inchars
are replaced with the corresponding character in
.Ar outchars .
If the character's position in
.Ar inchars
is longer than the length of
.Ar outchars ,
the character is deleted from the file name.
.It Ic open Ar host Op Ar port
Establish a connection to the specified
.Ar host
FTP server.
An optional port number may be supplied,
in which case
.Nm
will attempt to contact an FTP server at that port.
If the
.Ic auto-login
option is on (default),
.Nm
will also attempt to automatically log the user in to
the FTP server (see below).
.It Ic page Ar file
Retrieve
.Ic file
and display with the program defined in
.Ev PAGER
(defaulting to
.Xr more 1
if
.Ev PAGER
is null or not defined).
.It Ic passive Op Ic on | off
Toggle passive mode.
If passive mode is turned on (default is on),
.Nm
will send a
.Dv EPSV
command for all data connections instead of the usual
.Dv PORT
command.
The
.Dv PASV
command requests that the remote server open a port for the data connection
and return the address of that port.
The remote server listens on that port and the client connects to it.
When using the more traditional
.Dv PORT
command, the client listens on a port and sends that address to the remote
server, who connects back to it.
Passive mode is useful when using
.Nm
through a gateway router or host that controls the directionality of
traffic.
(Note that though FTP servers are required to support the
.Dv PASV
command by RFC 1123, some do not.)
.It Ic preserve Op Ic on | off
Toggle preservation of modification times on retrieved files.
.It Ic progress Op Ic on | off
Toggle display of transfer progress bar.
The progress bar will be disabled for a transfer that has
.Ar local-file
as
.Sq -
or a command that starts with
.Sq \&| .
Refer to
.Sx FILE NAMING CONVENTIONS
for more information.
.It Ic prompt Op Ic on | off
Toggle interactive prompting.
Interactive prompting
occurs during multiple file transfers to allow the
user to selectively retrieve or store files.
If prompting is turned off (default is on), any
.Ic mget
or
.Ic mput
will transfer all files, and any
.Ic mdelete
will delete all files.
.Pp
When prompting is on, the following commands are available at a prompt:
.Bl -tag -width 2n -offset indent
.It Ic ?\&
Print help message.
.It Ic a
Answer
.Dq yes
to the current file and automatically answer
.Dq yes
to any remaining files for the current command.
.It Ic n
Do not transfer the file.
.It Ic p
Answer
.Dq yes
to the current file and turn off prompt mode
(as if
.Dq prompt off
had been given).
.It Ic q
Answer
.Dq no
to the current file and automatically answer
.Dq no
to any remaining files for the current command.
.It Ic y
Transfer the file.
.El
.It Ic proxy Ar command
Execute an FTP command on a secondary control connection.
This command allows simultaneous connection to two remote FTP
servers for transferring files between the two servers.
The first
.Ic proxy
command should be an
.Ic open ,
to establish the secondary control connection.
Enter the command
.Ic proxy ?\&
to see other FTP commands executable on the
secondary connection.
The following commands behave differently when prefaced by
.Ic proxy :
.Ic open
will not define new macros during the auto-login process;
.Ic close
will not erase existing macro definitions;
.Ic get
and
.Ic mget
transfer files from the host on the primary control connection
to the host on the secondary control connection; and
.Ic put ,
.Ic mput ,
and
.Ic append
transfer files from the host on the secondary control connection
to the host on the primary control connection.
Third party file transfers depend upon support of the FTP protocol
.Dv PASV
command by the server on the secondary control connection.
.It Ic put Ar local-file Op Ar remote-file
Store a local file on the remote machine.
If
.Ar remote-file
is left unspecified, the local file name is used
after processing according to any
.Ic ntrans
or
.Ic nmap
settings
in naming the remote file.
File transfer uses the
current settings for
.Ic type ,
.Ic format ,
.Ic mode ,
and
.Ic structure .
.It Ic pwd
Print the name of the current working directory on the remote
machine.
.It Ic quit
A synonym for
.Ic bye .
.It Ic quote Ar arg ...
The arguments specified are sent, verbatim, to the remote FTP server.
.It Ic recv Ar remote-file Op Ar local-file
A synonym for
.Ic get .
.It Ic reget Ar remote-file Op Ar local-file
Reget acts like get, except that if
.Ar local-file
exists and is
smaller than
.Ar remote-file ,
.Ar local-file
is presumed to be
a partially transferred copy of
.Ar remote-file
and the transfer
is continued from the apparent point of failure.
This command
is useful when transferring very large files over networks that
are prone to dropping connections.
.It Ic rename Ar from-name to-name
Rename the file
.Ar from-name
on the remote machine to the file
.Ar to-name .
.It Ic reput Ar local-file Op Ar remote-file
Reput acts like put, except that if
.Ar remote-file
exists and is
smaller than
.Ar local-file ,
.Ar remote-file
is presumed to be
a partially transferred copy of
.Ar local-file
and the transfer
is continued from the apparent point of failure.
This command
is useful when transferring very large files over networks that
are prone to dropping connections.
.It Ic reset
Clear reply queue.
This command re-synchronizes command/reply sequencing with the remote
FTP server.
Resynchronization may be necessary following a violation of the FTP protocol
by the remote server.
.It Ic restart Ar marker
Restart the immediately following
.Ic get
or
.Ic put
at the
indicated
.Ar marker .
On
.Ux
systems,
.Ar marker
is usually a byte
offset into the file.
.It Ic rhelp Op Ar command-name
Request help from the remote FTP server.
If a
.Ar command-name
is specified, it is supplied to the server as well.
.It Ic rmdir Ar directory-name
Delete a directory on the remote machine.
.It Ic rstatus Op Ar file
With no arguments, show status of remote machine.
If
.Ar file
is specified, show status of
.Ar file
on remote machine.
.It Ic runique Op Ic on | off
Toggle storing of files on the local system with unique filenames.
If a file already exists with a name equal to the target
local filename for a
.Ic get
or
.Ic mget
command, a
.Dq .1
is appended to the name.
If the resulting name matches another existing file,
a
.Dq .2
is appended to the original name.
If this process continues up to
.Dq .99 ,
an error message is printed, and the transfer does not take place.
The generated unique filename will be reported.
Note that
.Ic runique
will not affect local files generated from a shell command
(see below).
The default value is off.
.It Ic send Ar local-file Op Ar remote-file
A synonym for
.Ic put .
.It Ic sendport Op Ic on | off
Toggle the use of
.Dv PORT
commands.
By default,
.Nm
will attempt to use a
.Dv PORT
command when establishing
a connection for each data transfer.
The use of
.Dv PORT
commands can prevent delays
when performing multiple file transfers.
If the
.Dv PORT
command fails,
.Nm
will use the default data port.
When the use of
.Dv PORT
commands is disabled, no attempt will be made to use
.Dv PORT
commands for each data transfer.
This is useful for certain FTP implementations which do ignore
.Dv PORT
commands but, incorrectly, indicate they've been accepted.
.It Ic site Ar arg ...
The arguments specified are sent, verbatim, to the remote FTP server as a
.Dv SITE
command.
.It Ic size Ar file
Return size of
.Ar file
on remote machine.
.It Ic status
Show the current status of
.Nm .
.\" .It Ic struct Op Ar struct-name
.\" Set the file transfer
.\" .Ar structure
.\" to
.\" .Ar struct-name .
.\" By default,
.\" .Dq file
.\" structure is used.
.It Ic sunique Op Ic on | off
Toggle storing of files on remote machine under unique file names.
The remote FTP server must support the FTP protocol
.Dv STOU
command for
successful completion.
The remote server will report the unique name.
Default value is off.
.It Ic system
Show the type of operating system running on the remote machine.
.It Ic trace Op Ic on | off
Toggle packet tracing.
.It Ic type Op Ar type-name
Set the file transfer
.Ic type
to
.Ar type-name .
If no type is specified, the current type
is printed.
The default type is
.Dq binary .
.It Ic umask Op Ar newmask
Set the default umask on the remote server to
.Ar newmask .
If
.Ar newmask
is omitted, the current umask is printed.
.It Xo
.Ic user Ar username
.Op Ar password Op Ar account
.Xc
Identify yourself to the remote FTP server.
If the
.Ar password
is not specified and the server requires it,
.Nm
will prompt the user for it (after disabling local echo).
If an
.Ar account
field is not specified, and the FTP server requires it,
the user will be prompted for it.
If an
.Ar account
field is specified, an account command will
be relayed to the remote server after the login sequence
is completed if the remote server did not require it
for logging in.
Unless
.Nm
is invoked with
.Dq auto-login
disabled, this process is done automatically on initial connection to the
FTP server.
.It Ic verbose Op Ic on | off
Toggle verbose mode.
In verbose mode, all responses from
the FTP server are displayed to the user.
In addition,
if verbose is on, when a file transfer completes, statistics
regarding the efficiency of the transfer are reported.
By default,
verbose is on.
.El
.Pp
Command arguments which have embedded spaces may be quoted with
quote
.Pq Ql \&"
marks.
.Pp
Commands which toggle settings can take an explicit
.Ic on
or
.Ic off
argument to force the setting appropriately.
.Pp
If
.Nm
receives a
.Dv SIGINFO
(see the
.Dq status
argument of
.Xr stty 1 )
signal whilst a transfer is in progress, the current transfer rate
statistics will be written to the standard error output, in the
same format as the standard completion message.
.Sh AUTO-FETCHING FILES
In addition to standard commands, this version of
.Nm
supports an auto-fetch feature.
To enable auto-fetch, simply pass the list of hostnames/files
on the command line.
.Pp
The following formats are valid syntax for an auto-fetch element:
.Bl -tag -width Ds
.It Ar host : Ns / Ns Ar file Ns Op /
.Dq Classic
.Nm
format.
.Sm off
.It Xo
.Pf ftp:// Op Ar user : password No @@
.Ar host Op : Ar port
.No / Ar file Op /
.Xc
.Sm on
An FTP URL, retrieved using the FTP protocol if
.Ev ftp_proxy
isn't defined.
Otherwise, transfer using HTTP via the proxy defined in
.Ev ftp_proxy .
If a
.Ar user
and
.Ar password
are given and
.Ev ftp_proxy
isn't defined,
log in as
.Ar user
with a password of
.Ar password .
.Sm off
.It Xo
.Pf http:// Op Ar user : password No @@
.Ar host Op : Ar port
.No / Ar file
.Xc
.Sm on
An HTTP URL, retrieved using the HTTP protocol.
If
.Ev http_proxy
is defined, it is used as a URL to an HTTP proxy server.
If a
.Ar user
and
.Ar password
are given and
.Ev http_proxy
isn't defined,
log in as
.Ar user
with a password of
.Ar password
using Basic authentication.
.Sm off
.It Xo
.Pf https:// Op Ar user : password No @@
.Ar host Op : Ar port
.No / Ar file
.Xc
.Sm on
An HTTPS URL, retrieved using the HTTPS protocol.
If
.Ev http_proxy
is defined, this HTTPS proxy server will be used to fetch the
file using the CONNECT method.
If a
.Ar user
and
.Ar password
are given and
.Ev http_proxy
isn't defined,
log in as
.Ar user
with a password of
.Ar password
using Basic authentication.
.It Pf file: Ar file
.Ar file
is retrieved from a mounted file system.
.El
.Pp
If a classic format or an FTP URL format has a trailing
.Sq / ,
then
.Nm
will connect to the site and
.Ic cd
to the directory given as the path, and leave the user in interactive
mode ready for further input.
.Pp
If successive auto-fetch FTP elements refer to the same host, then
the connection is maintained between transfers, reducing overhead on
connection creation and deletion.
.Pp
If
.Ar file
contains a glob character and globbing is enabled
(see
.Ic glob ) ,
then the equivalent of
.Ic mget Ar file
is performed.
.Pp
If no
.Fl o
option is specified, and
the directory component of
.Ar file
contains no globbing characters,
then
it is stored in the current directory as the
.Xr basename 1
of
.Ar file .
If
.Fl o Ar output
is specified, then
.Ar file
is stored as
.Ar output .
Otherwise, the remote name is used as the local name.
.Sh ABORTING A FILE TRANSFER
To abort a file transfer, use the terminal interrupt key
(usually Ctrl-C).
Sending transfers will be immediately halted.
Receiving transfers will be halted by sending an FTP protocol
.Dv ABOR
command to the remote server, and discarding any further data received.
The speed at which this is accomplished depends upon the remote
server's support for
.Dv ABOR
processing.
If the remote server does not support the
.Dv ABOR
command, an
.Ql ftp\*(Gt
prompt will not appear until the remote server has completed
sending the requested file.
.Pp
The terminal interrupt key sequence will be ignored when
.Nm
has completed any local processing and is awaiting a reply
from the remote server.
A long delay in this mode may result from the ABOR processing described
above, or from unexpected behavior by the remote server, including
violations of the FTP protocol.
If the delay results from unexpected remote server behavior, the local
.Nm
program must be killed by hand.
.Sh FILE NAMING CONVENTIONS
Files specified as arguments to
.Nm
commands are processed according to the following rules.
.Bl -enum
.It
If
.Sq -
is specified as a local file name, the standard input (for reading)
or standard output (for writing)
is used.
.It
If the first character of a local file name is
.Sq \&| ,
the
remainder of the argument is interpreted as a shell command.
.Nm
then forks a shell, using
.Xr popen 3
with the argument supplied, and reads (writes) from the standard output
(standard input).
If the shell command includes spaces, the argument
must be quoted; e.g.,
.Qq ls -lt .
A particularly
useful example of this mechanism is:
.Qq ls \&. |more .
.It
Failing the above checks, if
.Dq globbing
is enabled,
local file names are expanded
according to the rules used in the
.Xr csh 1
.Ic glob
command.
If the
.Nm
command expects a single local file (e.g.,
.Ic put ) ,
only the first filename generated by the
.Dq globbing
operation is used.
.It
For
.Ic mget
commands and
.Ic get
commands with unspecified local file names, the local filename is
the remote filename, which may be altered by a
.Ic case ,
.Ic ntrans ,
or
.Ic nmap
setting.
The resulting filename may then be altered if
.Ic runique
is on.
.It
For
.Ic mput
commands and
.Ic put
commands with unspecified remote file names, the remote filename is
the local filename, which may be altered by a
.Ic ntrans
or
.Ic nmap
setting.
The resulting filename may then be altered by the remote server if
.Ic sunique
is on.
.El
.Sh FILE TRANSFER PARAMETERS
The FTP specification specifies many parameters which may
affect a file transfer.
The
.Ic type
may be one of
.Dq ascii ,
.Dq binary ,
or
.Dq image .
.Nm
supports the ASCII and image types of file transfer.
.Pp
.Nm
supports only the default values for the remaining
file transfer parameters:
.Ic mode ,
.Ic form ,
and
.Ic struct .
.Sh THE .netrc FILE
The
.Pa .netrc
file contains login and initialization information
used by the auto-login process.
It resides in the user's home directory.
The following tokens are recognized; they may be separated by spaces,
tabs, or new-lines:
.Bl -tag -width password
.It Ic machine Ar name
Identify a remote machine
.Ar name .
The auto-login process searches the
.Pa .netrc
file for a
.Ic machine
token that matches the remote machine specified on the
.Nm
command line or as an
.Ic open
command argument.
Once a match is made, the subsequent
.Pa .netrc
tokens are processed,
stopping when the end of file is reached or another
.Ic machine
or a
.Ic default
token is encountered.
.It Ic default
This is the same as
.Ic machine
.Ar name
except that
.Ic default
matches any name.
There can be only one
.Ic default
token, and it must be after all
.Ic machine
tokens.
This is normally used as:
.Pp
.Dl default login anonymous password user@@site
.Pp
thereby giving the user
.Ar automatic
anonymous FTP login to
machines not specified in
.Pa .netrc .
This can be overridden
by using the
.Fl n
flag to disable auto-login.
.It Ic login Ar name
Identify a user on the remote machine.
If this token is present, the auto-login process will initiate
a login using the specified
.Ar name .
.It Ic password Ar string
Supply a password.
If this token is present, the auto-login process will supply the
specified string if the remote server requires a password as part
of the login process.
Note that if this token is present in the
.Pa .netrc
file for any user other
than
.Ar anonymous ,
.Nm
will abort the auto-login process if the
.Pa .netrc
is readable by
anyone besides the user.
.It Ic account Ar string
Supply an additional account password.
If this token is present, the auto-login process will supply the
specified string if the remote server requires an additional
account password, or the auto-login process will initiate an
.Dv ACCT
command if it does not.
.It Ic macdef Ar name
Define a macro.
This token functions like the
.Nm
.Ic macdef
command functions.
A macro is defined with the specified name; its contents begin with the
next
.Pa .netrc
line and continue until a null line (consecutive new-line
characters) is encountered.
Like the other tokens in the
.Pa .netrc
file, a
.Ic macdef
is applicable only to the
.Ic machine
definition preceding it.
A
.Ic macdef
entry cannot be utilized by multiple
.Ic machine
definitions; rather, it must be defined following each
.Ic machine
it is intended to be used with.
If a macro named
.Ic init
is defined, it is automatically executed as the last step in the
auto-login process.
.El
.Sh COMMAND LINE EDITING
.Nm
supports interactive command line editing, via the
.Xr editline 3
library.
It is enabled with the
.Ic edit
command, and is enabled by default if input is from a tty.
Previous lines can be recalled and edited with the arrow keys,
and other GNU Emacs-style editing keys may be used as well.
.Pp
The
.Xr editline 3
library is configured with a
.Pa .editrc
file \- refer to
.Xr editrc 5
for more information.
.Pp
An extra key binding is available to
.Nm
to provide context sensitive command and filename completion
(including remote file completion).
To use this, bind a key to the
.Xr editline 3
command
.Ic ftp-complete .
By default, this is bound to the TAB key.
.Sh ENVIRONMENT
.Nm
utilizes the following environment variables:
.Bl -tag -width "FTPSERVERPORT"
.It Ev FTPMODE
Overrides the default operation mode.
Recognized values are:
.Pp
.Bl -tag -width "passive  " -offset indent -compact
.It passive
passive mode FTP only
.It active
active mode FTP only
.It auto
automatic determination of passive or active (this is the default)
.It gate
gate-ftp mode
.El
.It Ev FTPSERVER
Host to use as gate-ftp server when
.Ic gate
is enabled.
.It Ev FTPSERVERPORT
Port to use when connecting to gate-ftp server when
.Ic gate
is enabled.
Default is port returned by a
.Fn getservbyname
lookup of
.Dq ftpgate/tcp .
.It Ev HOME
For default location of a
.Pa .netrc
file, if one exists.
.It Ev PAGER
Used by
.Ic page
to display files.
.It Ev SHELL
For default shell.
.It Ev ftp_proxy
URL of FTP proxy to use when making FTP URL requests
(if not defined, use the standard FTP protocol).
.It Ev http_proxy
URL of HTTP proxy to use when making HTTP or HTTPS URL requests.
.It Ev http_cookies
Path of a Netscape-like cookiejar file to use when making
HTTP or HTTPS URL requests.
.El
.Sh PORT ALLOCATION
For active mode data connections,
.Nm
will listen to a random high TCP port.
The interval of ports used are configurable using
.Xr sysctl 8
variables
.Va net.inet.ip.porthifirst
and
.Va net.inet.ip.porthilast .
.Sh SEE ALSO
.Xr basename 1 ,
.Xr csh 1 ,
.Xr more 1 ,
.Xr stty 1 ,
.Xr tar 1 ,
.Xr tftp 1 ,
.Xr editline 3 ,
.Xr getservbyname 3 ,
.Xr popen 3 ,
.Xr editrc 5 ,
.Xr services 5 ,
.Xr ftp-proxy 8 ,
.Xr ftpd 8
.Sh STANDARDS
.Rs
.%A J. Postel
.%A J. Reynolds
.%D October 1985
.%R RFC 959
.%T FILE TRANSFER PROTOCOL (FTP)
.Re
.Pp
.Rs
.%A P. Hethmon
.%D March 2007
.%R RFC 3659
.%T Extensions to FTP
.Re
.Sh HISTORY
The
.Nm
command appeared in
.Bx 4.2 .
.Sh BUGS
Correct execution of many commands depends upon proper behavior
by the remote server.
.Pp
In the recursive mode of
.Ic mget ,
files and directories starting with whitespace are ignored
because the list cannot be parsed any other way.
@


1.106
log
@Add -S noverifytime to ftp to permit an unvalidated TLS connection when
you don't knwo what time it is
@
text
@d1 1
a1 1
.\"	$OpenBSD: ftp.1,v 1.105 2017/01/03 17:00:04 deraadt Exp $
d33 1
a33 1
.Dd $Mdocdate: January 3 2017 $
d255 1
a255 1
Disable validation of cetificate times and OCSP validation.
@


1.105
log
@Add a "-w connect_timeout" option in support of URL-fetching.  This allows
slow / failing connects to be identified.  The install script needs this
functionaly.
ok jca rpe millert
@
text
@d1 1
a1 1
.\"	$OpenBSD: ftp.1,v 1.104 2016/12/22 17:26:18 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: December 22 2016 $
d254 2
@


1.104
log
@missing full stop;
@
text
@d1 1
a1 1
.\"	$OpenBSD: ftp.1,v 1.103 2016/12/22 16:30:03 beck Exp $
d65 1
d290 4
@


1.103
log
@add muststaple option so that oscp stapling can be required for sites you
expect to provide it.
ok jsing@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ftp.1,v 1.102 2016/07/28 21:37:45 tedu Exp $
d33 1
a33 1
.Dd $Mdocdate: July 28 2016 $
d252 1
a252 1
Require the server to present a valid OCSP stapling in the TLS handshake
@


1.102
log
@these programs probably do not need to use TMPDIR. ok florian
@
text
@d1 1
a1 1
.\"	$OpenBSD: ftp.1,v 1.101 2015/11/05 16:25:57 schwarze Exp $
d33 1
a33 1
.Dd $Mdocdate: November 5 2015 $
d251 2
@


1.101
log
@Fix the example "ls . |more"; from Frederic Nowak <fnwk at mailbox dot org>.
While here, make it clear that `-' and `|' are only special in local,
not in remote filenames.

Probably, `|' support should be removed from ftp(1), but let's fix one
thing at a time.

OK jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ftp.1,v 1.100 2015/09/25 20:32:39 schwarze Exp $
d33 1
a33 1
.Dd $Mdocdate: September 25 2015 $
a1729 2
.It Ev TMPDIR
Directory in which temporary files are stored.
@


1.100
log
@Tweak previous (suggested by and ok jmc@@):
While .Cm isn't wrong markup for ftp:// and http://,
it simply looks better in this case to not mark them up at all.
@
text
@d1 1
a1 1
.\"	$OpenBSD: ftp.1,v 1.99 2015/09/25 13:51:52 schwarze Exp $
d1464 1
a1464 1
If the file name
d1466 1
a1466 1
is specified, the standard input (for reading)
d1470 1
a1470 1
If the first character of the file name is
d1484 1
a1484 1
.Qq dir |more .
@


1.99
log
@Clean up SYNOPSIS formatting:
* Use .Cm for keywords rather than .No.
* Simplify by using .Op rather than .Oo where it's easily possible.
* Shorten code by using .Ns rather than .Sm where it's easily possible.
* Also mark up URIs in the description, not just in the synopsis.
@
text
@d1 1
a1 1
.\"	$OpenBSD: ftp.1,v 1.98 2015/03/13 19:58:41 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: March 13 2015 $
d53 1
a53 2
.Cm ftp No ://
.Op Ar user : password No @@
d66 1
a66 1
.Cm http Oo Cm s Oc ://
d76 1
a76 1
.Cm file : Ns Ar
d1317 1
a1317 2
.Cm ftp No ://
.Op Ar user : password No @@
d1340 1
a1340 2
.Cm http No ://
.Op Ar user : password No @@
d1363 1
a1363 2
.Cm https No ://
.Op Ar user : password No @@
d1385 1
a1385 1
.It Cm file : Ns Ar file
@


1.98
log
@remove the first comma from constructs like ", and," and ", or,": you can use
"and" and "or" to join sentence clauses, and you can use commas, but both hinders
reading;
@
text
@d1 1
a1 1
.\"	$OpenBSD: ftp.1,v 1.97 2015/02/17 22:39:32 tedu Exp $
d33 1
a33 1
.Dd $Mdocdate: February 17 2015 $
d53 4
a56 4
.No ftp:// Oo Ar user : password No @@
.Oc Ar host Oo : Ar port
.Oc No / Ar file Oo /
.Oc
d67 4
a70 3
.No http[s]:// Oo Ar user : password No @@
.Oc Ar host Oo : Ar port
.Oc No / Ar file
d77 1
a77 4
.Sm off
.No file: Ar file
.Sm on
.Ar ...
d82 1
a82 4
.Sm off
.Ar host : No / Ar file Oo /
.Oc
.Sm on
d1312 1
a1312 1
.It host:/file[/]
d1316 8
a1323 1
.It ftp://[user:password@@]host[:port]/file[/]
d1340 8
a1347 1
.It http://[user:password@@]host[:port]/file
d1364 8
a1371 1
.It https://[user:password@@]host[:port]/file
d1389 1
a1389 1
.It file:file
@


1.97
log
@add -M to disable progressmeter. ok dlg halex millert
@
text
@d1 1
a1 1
.\"	$OpenBSD: ftp.1,v 1.96 2015/01/31 19:33:45 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: January 31 2015 $
d209 1
a209 1
identity on the local machine), and, if necessary, prompt for a password
@


1.96
log
@removing two instances of "c.f." - it seems actually "cf." is correct, but
i removed/reworded these as in the case of ftp.1 it read badly anyway, and
for fstat.1 it meant i could zap an escape sequence; while here i replaced
some sequences of <space><tab> where a single <tab> was sufficient;
@
text
@d1 1
a1 1
.\"	$OpenBSD: ftp.1,v 1.95 2015/01/30 04:45:45 tedu Exp $
d33 1
a33 1
.Dd $Mdocdate: January 30 2015 $
d41 1
a41 1
.Op Fl 46AadEegimnptVv
d184 5
@


1.95
log
@remove tenex transfer support. if you still have TOPS20 machines in
service, you'll need to stick with openbsd 5.6.
bonus: remove references to ebcdic.
ok deraadt
@
text
@d1 2
a2 2
.\" 	$OpenBSD: ftp.1,v 1.94 2014/11/15 14:41:02 bentley Exp $
.\" 	$NetBSD: ftp.1,v 1.22 1997/08/18 10:20:22 lukem Exp $
d33 1
a33 1
.Dd $Mdocdate: November 15 2014 $
d1474 1
a1474 2
.Xr csh 1 ;
c.f. the
@


1.94
log
@Reduce instances of `` '' in manuals.

troff displays these as typographic quotes, but nroff implementations
almost always print them literally, which rarely has the intended effect
with modern fonts, even in stock xterm.

These uses of `` '' can be replaced either with more semantic alternatives
or with Dq, which prints typographic quotes in a UTF-8 locale (but will
automatically fall back to `` '' in an ASCII locale).

improvements and ok schwarze@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.93 2014/07/11 03:31:52 lteo Exp $
d33 1
a33 1
.Dd $Mdocdate: July 11 2014 $
a1226 5
.It Ic tenex
Set the file transfer type to that needed to
talk to
.Tn TENEX
machines.
a1522 3
.Dq image ,
.Dq ebcdic
.Pq currently not supported
d1524 1
a1524 2
.Dq tenex
(local byte size 8, for PDP-10's and PDP-20's mostly).
d1526 1
a1526 4
supports the ASCII and image types of file transfer,
plus local byte size 8 for
.Ic tenex
mode transfers.
@


1.93
log
@Allow ftp(1) to change its User-Agent for HTTP(S) URL requests using a
-U command-line option.

feedback from deraadt@@, halex@@, and Adam Thompson
ok deraadt@@ sthen@@, man page changes ok jmc@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.92 2014/06/25 06:57:42 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: June 25 2014 $
d276 2
a277 1
If not specified, the default User-Agent is ``OpenBSD ftp''.
@


1.92
log
@Alexander Schrijver posted a diff to remove references to the c_rehash script,
which we don;t have in base. after some discussion with jca, i've not removed
these references, but tried to make it clearer it's distributed with openssl
and not included in base;
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.91 2014/01/23 08:09:08 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: January 23 2014 $
d65 1
d272 5
@


1.91
log
@tweak previous;
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.90 2014/01/23 00:39:15 deraadt Exp $
d235 2
a236 1
Such a directory can be prepared using the c_rehash OpenSSL utility.
@


1.90
log
@Add -D shorttitle support, so that the progress meter can show some sort
of reason why it is processing a certain file.  This will be used by the
installer for that purpose.
ok krw rpe
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.89 2013/12/24 13:00:59 jca Exp $
d33 1
a33 1
.Dd $Mdocdate: December 24 2013 $
d42 1
a42 1
.Op Fl D Ar action
d150 4
a155 2
.It Fl D
Specify a short title for the start of the progress bar.
@


1.89
log
@Add support for SSL/TLS server certificate validation, enabled by
default.  See the documentation for the `-S' switch.  This also allows
setting the preferred ciphers for the communication.  Documentation bits
ok'ed by jmc@@, ok beck@@ sthen@@.
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.88 2013/04/28 18:03:40 lteo Exp $
d33 1
a33 1
.Dd $Mdocdate: April 28 2013 $
d42 1
d152 2
@


1.88
log
@Remove an obsolete paragraph in the BUGS section about using ftp(1) with
4.2BSD servers.

ok jmc nick tedu
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.87 2013/02/19 03:02:34 lteo Exp $
d33 1
a33 1
.Dd $Mdocdate: February 19 2013 $
d62 1
d220 37
@


1.87
log
@Add a STANDARDS section to list RFC's related to the FTP protocol
(matches the STANDARDS section on the ftpd(8) man page); suggested by
jmc@@ in a discussion about this man page with Sebastian Rother and
myself.

ok jmc phessler
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.86 2013/02/15 04:31:59 lteo Exp $
d33 1
a33 1
.Dd $Mdocdate: February 15 2013 $
a1732 11
.Pp
An error in the treatment of carriage returns
in the
.Bx 4.2
ASCII-mode transfer code
has been corrected.
This correction may result in incorrect transfers of binary files
to and from
.Bx 4.2
servers using the ASCII type.
Avoid this problem by using the binary image type.
@


1.86
log
@ARPANET -> Internet

ok jmc
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.85 2012/10/15 21:20:05 bluhm Exp $
d33 1
a33 1
.Dd $Mdocdate: October 15 2012 $
d1710 15
@


1.85
log
@Add support for recursive ftp upload.  The mput command of the ftp
client got the -r switch and -d depth option.
From Jan Klemkow <j.klemkow AT wemelug DOT de>
OK haesbaert@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.84 2012/08/26 02:16:02 lteo Exp $
d33 1
a33 1
.Dd $Mdocdate: August 26 2012 $
d38 1
a38 1
.Nd ARPANET file transfer program
d88 2
a89 3
is the user interface to the
.Tn ARPANET
standard File Transfer Protocol (FTP).
@


1.84
log
@Make a few ftp(1) usage/man page changes related to Basic
authentication:

- Combine the http and https usage formats into a single http[s] format
  to make it more concise.

- In the AUTO-FETCHING FILES section of the ftp(1) man page, mention
  that specifying "user" and "password" with HTTP and HTTPS URLs will
  log in using Basic authentication (if http_proxy is not defined).

- When compiled with -DSMALL, fix ftp(1) usage so that
  "[user:password@@]" is not shown for http[s] since Basic authentication
  is not supported with -DSMALL.

Done with a lot of discussion with and help from jmc@@ (thank you!).

ok deraadt haesbaert jmc
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.83 2012/08/14 20:47:08 haesbaert Exp $
d33 1
a33 1
.Dd $Mdocdate: August 14 2012 $
d658 2
a659 1
.Op Fl c
d678 4
d683 1
a683 1
is used instead of
d685 8
@


1.83
log
@Add support for basic HTTP authentication as described on RFC 2617 and
RFC 3986. This allows the following idiom in ftp:

ftp http[s]://user:pass@@host/file

With some pointers from halex a lot of testing and feedback from lteo,
thanks a lot.

ok lteo@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.82 2012/04/30 13:41:26 haesbaert Exp $
d33 1
a33 1
.Dd $Mdocdate: April 30 2012 $
d64 1
a64 12
.No http:// Oo Ar user : password No @@
.Oc Ar host Oo : Ar port
.Oc No / Ar file
.Sm on
.Ar ...
.Nm ftp
.Op Fl C
.Op Fl c Ar cookie
.Op Fl o Ar output
.Op Fl s Ar srcaddr
.Sm off
.No https:// Oo Ar user : password No @@
d94 1
a94 1
The latter five usage formats will fetch a file using either the
d1264 5
a1268 3
If
.Ar user : Ns Ar password Ns @@
is given and
d1270 2
a1271 1
isn't defined, log in as
d1280 12
d1298 12
@


1.82
log
@Add a -s flag to ftp(1) to let the user specify the source IP address
of the connection. This is useful for testing ftp(1) over VPN tunnels.

This -s flag is present in the other BSDs, including OS X.

All work was done by Lawrence Teo, thanks (-:.

ok myself mikeb
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.81 2010/07/26 21:31:34 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: July 26 2010 $
d64 2
a65 1
.No http:// Ar host Oo : Ar port
d75 2
a76 1
.No https:// Ar host Oo : Ar port
d1283 1
a1283 1
.It http://host[:port]/file
d1288 1
a1288 1
.It https://host[:port]/file
@


1.81
log
@fix SYNOPSIS (yes, there are still some issues here);
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.80 2010/07/15 20:51:38 schwarze Exp $
d33 1
a33 1
.Dd $Mdocdate: July 15 2010 $
d45 1
d50 1
d62 1
d72 1
d81 1
d89 1
d229 6
@


1.80
log
@More delimiters that need quoting inside macros, hunted down by jmc@@,
who asked me to commit because he is just running out of the door.
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.79 2009/08/09 20:16:39 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: August 9 2009 $
d54 1
a55 1
.Sm on
d63 1
a64 1
.Sm on
d72 1
a73 1
.Sm on
d78 1
a78 1
.No file: Ar
d80 1
d87 1
a88 1
.Sm on
@


1.79
log
@zap trailing whitespace;
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.78 2009/08/09 18:36:11 sobrado Exp $
d812 1
a812 1
.Ql [ ,
@


1.78
log
@document the "file:file" auto-fetching mode.

based on a conversation with martynas@@; diff tweaked by jmc@@ and martynas@@

ok jmc@@, martynas@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.77 2009/06/06 12:07:33 martynas Exp $
d33 1
a33 1
.Dd $Mdocdate: June 6 2009 $
d78 1
a78 1
.No file: Ar 
@


1.77
log
@it fetches multiple urls;  so usage was wrong.  ok sthen@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.76 2009/04/26 21:26:03 martynas Exp $
d33 1
a33 1
.Dd $Mdocdate: April 26 2009 $
d78 6
d96 1
a96 1
The latter four usage formats will fetch a file using either the
d1279 3
@


1.76
log
@figure out titles automatically by using remote file name.  remove
-T and just show titles by default for non-verbose transfers;
discussed with, ok theo, sthen@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.74 2008/09/08 19:31:16 martynas Exp $
d33 1
a33 1
.Dd $Mdocdate: September 8 2008 $
d54 1
d63 1
d72 1
d80 1
@


1.75
log
@add a "-T title" option to ftp; this is is used in progress bar mode to
show which filename is being used. ok krw, mdoc repair from jmc
@
text
@a44 1
.Op Fl T Ar title
a211 4
.It Fl T Ar title
Set a filename
.Ar title
which will appear in the transfer progress bar.
@


1.74
log
@- simplify mget(): remove the duplicate code and just use getit(),
as a result it can do nice things getit() does such as:
- -n: use 'newer' for transfers (fetches files that are newer on
the server, than locally), this can be used for e.g. mirroring (mget
-cnr 4.* would fetch missing files, continue interrupted transfers,
and replace newer files of 4.X dirs)
- -d: spedify depth of the recurrence.  e.g. 'mget -rd 2 patches'
in pub/openbsd would fetch only archive files, not going further
into dirs
- use static restartit, max_depth instead of doing the magic
tested/requested&ok merdely@@;  ok pyr@@, millert@@
man page tweaks&ok jmc@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.73 2008/08/22 08:52:35 sobrado Exp $
d33 1
a33 1
.Dd $Mdocdate: August 22 2008 $
d45 1
d213 4
@


1.73
log
@default file transfer type is binary, not ascii;
commands which toggle settings can take an explicit on or off argument
to force the setting appropiately, show these arguments in usage;
synchronize synopsis and usage of commands; spacing; KNF;
other minor documentation tweaks.

written with help by jmc@@

ok jmc@@ (documentation), martynas@@ (type usage and default file transfer type)
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.72 2008/07/16 14:57:27 martynas Exp $
d33 1
a33 1
.Dd $Mdocdate: July 16 2008 $
d568 2
a569 1
.Op Fl cr
d593 4
a596 3
If the
.Fl c
flag is specified then
d598 1
a598 1
is used instead of
d600 13
a612 6
If the
.Fl r
flag is specified,
.Nm
recursively descends the directory tree,
transferring all files and directories.
@


1.72
log
@better description for TMPDIR.  from millert@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.71 2008/07/08 21:07:57 martynas Exp $
d33 1
a33 1
.Dd $Mdocdate: July 8 2008 $
d245 3
a247 1
.It Ic \&! Op Ar command Op Ar args
d251 1
a251 1
.It Ic \&$ Ar macro-name Op Ar args
d261 1
a261 1
.It Ic account Op Ar passwd
d287 1
a287 2
This is the default type.
.It Ic bell
d294 1
d299 1
a299 1
.It Ic case
d315 3
a317 3
.It Ic chmod Ar mode file-name
Change the permission modes of the file
.Ar file-name
d325 1
a325 1
.It Ic cr
d342 3
a344 1
.It Ic debug Op Ar debug-value
d347 1
a347 1
.Ar debug-value
d364 1
a364 1
.It Ic edit
d369 1
a369 1
.It Ic epsv4
d384 3
a386 1
.It Ic gate Op Ar host Op Ar port
d421 1
a421 1
.It Ic glob
d456 3
a458 1
.It Ic hash Op Ar size
d479 1
a479 1
.It Ic lcd Op Ar directory
d483 1
a483 1
.Ar directory
d627 4
a630 2
.It Ic modtime Ar file-name
Show the last modification time of the file on the remote machine.
d657 4
a660 1
.It Ic msend Ar local-files
d663 1
a663 1
.It Ic newer Ar file-name
d849 1
a849 1
.It Ic passive
d874 1
a874 1
.It Ic preserve
d876 1
a876 1
.It Ic progress
d887 1
a887 1
.It Ic prompt
d928 1
a928 1
.It Ic proxy Ar ftp-command
d985 1
a985 1
.It Ic quote Ar arg1 arg2 ...
d1005 1
a1005 1
.It Ic rename Op Ar from Op Ar to
d1007 1
a1007 1
.Ar from
d1009 1
a1009 1
.Ar to .
d1052 1
a1052 1
.It Ic rstatus Op Ar file-name
d1055 1
a1055 1
.Ar file-name
d1057 1
a1057 1
.Ar file-name
d1059 1
a1059 1
.It Ic runique
d1085 1
a1085 1
.It Ic sendport
d1112 1
a1112 1
.It Ic site Ar arg1 arg2 ...
d1116 1
a1116 1
.It Ic size Ar file-name
d1118 1
a1118 1
.Ar file-name
d1131 1
a1131 1
.It Ic sunique
d1146 1
a1146 1
.It Ic trace
d1164 1
a1164 1
.Ic user Ar user-name
d1189 1
a1189 1
.It Ic verbose
@


1.71
log
@- add support for recursive transfers (but not for floppies), e.g.
'mget -cr 4.*' would recursively fetch (-r), and resume the previous
transfers (-c) of 4.X release directories
uses local matching (fnmatch), but only for recursive transfers.
current behavior is not changed in any way.
- while here, ifndef SMALL debugging stuff, this saves some space,
for floppies
- some debugging code was enabled for non-debugging mode, checks
assume debug is set to zero, but it's not initially set
- all "Confirm with" prompts are forced, remove redundant argument
- fix usage: -C and -c are not available for SMALL

discussed a year ago w/ pyr@@
looks good to millert@@
previous version looked good to pyr@@
man page tweaks & ok jmc@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.70 2008/06/25 18:07:00 martynas Exp $
d33 1
a33 1
.Dd $Mdocdate: June 25 2008 $
d1598 1
a1598 1
Directory to put temporary files.
@


1.70
log
@- fix -Wall (no behavior change, a || b && c = a || (b && c) anyway)
- use argv[0] for "Confirm with", as other confirm()s do
- fix confirm cases, pass force=1 for mdelete and mabort too, fixes
a bug when you end up deleting all files when you ^C, instead of
getting a confirmation
- add reput command, that will allow to continue transfer uploads
- add -c for mget and mput, that will allow to continue multiple
transfers
- fix a bug when you use restart command together with put.  the
progressmeter would start from zero, and eta would show fictional
time.  this actually allows reput/put -c to have correct progressmeter
too
- document everything
discussed with, suggestions, reminded to ifdef SMALL the code so
we're able to fit in floppies, and ok millert@@, and jmc@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.69 2008/06/16 19:56:04 martynas Exp $
d33 1
a33 1
.Dd $Mdocdate: June 16 2008 $
d560 1
a560 1
.Op Fl c
a568 5
If the
.Fl c
flag is specified, then
.Ic reget
is used instead for the partially transferred files.
d583 13
a631 5
If the
.Fl c
flag is specified, then
.Ic reput
is used instead for the partially transferred files.
d640 7
d1651 5
@


1.69
log
@- add 'q', which does the same as eof
- add '?', which will help
- make use of mflag, instead of special-case interactive
- change mflag++ to mflag = 1, because theoretically it can go out
of range
"i like it" millert@@.  man page help and ok jmc@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.68 2008/03/10 22:56:43 espie Exp $
d33 1
a33 1
.Dd $Mdocdate: March 10 2008 $
d559 4
a562 1
.It Ic mget Ar remote-files
d569 5
d616 4
a619 1
.It Ic mput Ar local-files
d624 5
d987 15
@


1.68
log
@turn on keepalive by default (one byte every 60 seconds)
okay beck@@, deraadt@@, krw@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.67 2008/03/09 15:35:42 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: March 9 2008 $
d863 2
d880 6
@


1.67
log
@tweak previous;
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.66 2008/03/08 11:37:33 espie Exp $
d33 1
a33 1
.Dd $Mdocdate: March 8 2008 $
d167 3
@


1.66
log
@Document that -k 0 does not do anything, instead of sending bytes every
0 seconds.
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.65 2007/11/28 16:21:25 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: November 28 2007 $
d154 1
a154 4
If
.Ar k
is not 
.Ar 0 ,
@


1.65
log
@- [-C] and [-c cookie] do not belong in the first synopsis/usage();
after some discussion with martynas
- tweak the description of -C a little more, for readability
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.64 2007/11/28 06:41:12 jmc Exp $
d154 5
a158 1
Sends a byte after each
@


1.64
log
@expand the description of -C; from martynas and myself
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.63 2007/11/26 12:39:00 martynas Exp $
d33 1
a33 1
.Dd $Mdocdate: November 26 2007 $
d41 1
a41 2
.Op Fl 46AaCdEegimnptVv
.Op Fl c Ar cookie
d47 1
d56 2
d64 2
d72 1
d119 1
a119 1
Continue a previously interrupted FTP transfer.
d123 1
@


1.63
log
@implement -C for continuing ftp, http(s), and file transfers
ok millert@@, pyr@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.62 2007/11/05 13:10:59 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: November 5 2007 $
d114 8
a121 1
Continue file transfer.
@


1.62
log
@agressively -> aggressively;
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.61 2007/06/16 08:58:33 espie Exp $
d33 1
a33 1
.Dd $Mdocdate: June 13 2007 $
d41 1
a41 1
.Op Fl 46AadEegimnptVv
d113 2
@


1.61
log
@implement a `keep-alive' option that sends bytes over an inactive
connection. The FTP protocol provides us with a NOOP operation that
is perfectly suitable for that, and so far servers are happy with it.
Sending the command slowly is an idea I borrowed from spamd.
No change for people not using the option, so it can't break normal ftp.

okay beck@@, jmc@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.60 2007/06/13 18:43:16 jmc Exp $
d143 1
a143 1
agressively drop it.
@


1.60
log
@- shorten -c's argument name to avoid ugly line split
- tidy up the description of -c and http_cookies
- add -c to usage()
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.59 2007/06/13 13:52:26 pyr Exp $
d33 1
a33 1
.Dd $Mdocdate: May 31 2007 $
d43 1
d138 13
@


1.59
log
@Enable cookie support. This allows parsing of netscape-like cookie jars
and sending of appropriate cookies. No retrieval of new cookies is done.
Careful review and lots of input by millert and ray.

ok millert@@, ray@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.58 2007/05/31 19:20:10 jmc Exp $
d42 1
a42 1
.Op Fl c Ar cookiefile
d112 3
a114 3
.It Fl c
Load a Netscape type cookiejar file.
This option is only useful for HTTP and HTTPS transfers.
d117 6
a122 2
Setting the http_cookies environment variable has the same effect.
If both the http_cookies environment variable is set and the
d124 1
a124 1
argument is given, the latter will take precedence.
d1523 1
a1523 1
Path of a Netscape like cookiejar to use when making
@


1.58
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.57 2006/11/02 08:24:48 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate$
d42 1
d112 9
d1518 3
@


1.57
log
@ftp(1) sends EPSV by default, not PASV;

from daniel wade
ok deraadt
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.56 2006/05/25 03:35:58 ray Exp $
d33 1
a33 1
.Dd August 18, 1997
@


1.56
log
@Better example URL spacing.

OK jmc@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.55 2006/05/19 16:43:07 jmc Exp $
d768 1
a768 1
.Dv PASV
@


1.55
log
@be more explicit about HTTPS;
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.54 2006/05/16 16:20:42 deraadt Exp $
d1121 1
a1121 1
.Bl -tag -width "ftp://[user:password@@]host[:port]/file[/]"
@


1.54
log
@https URL support; rototilled by a few people including me; originally
from Rainer_Giedat@@genua.de
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.53 2005/09/21 22:31:47 fgsch Exp $
d79 2
a80 2
The latter three usage formats will fetch a file using either the
HTTP or FTP protocols into the current directory.
@


1.53
log
@add ability to disable EPSV/EPRT from command-line.
from Thorsten Glaser via Matt Van Mater < matt dot vanmater at gmail dot com >
with some minor mods. deraadt@@ jmc@@ ok
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.52 2005/07/06 10:35:36 jmc Exp $
d62 6
d1145 6
d1507 1
a1507 1
URL of HTTP proxy to use when making HTTP URL requests.
@


1.52
log
@oops, $macro was documented, just not where i expected it; reword and
make it a bit easier to find;
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.51 2005/07/06 08:22:07 jmc Exp $
d41 1
a41 1
.Op Fl 46AadegimnptVv
d107 2
@


1.51
log
@- now that `macdef' is nicely documented, tell people how to use it
- replace `>' w/ groff char
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.50 2005/07/06 08:15:00 jmc Exp $
d466 3
a468 2
use the following syntax:
.Pf $ Ar macro-name .
@


1.50
log
@improve the description of `macdef';

from netbsd -r1.110: patch from david h. gutteridge, pr #24296;
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.49 2005/01/07 11:11:28 jmc Exp $
d184 1
a184 1
.Dq ftp>
d294 1
a294 1
.Ql --> .
d465 4
d1192 1
a1192 1
.Ql ftp>
@


1.49
log
@oops - 2 more .Dq -> .Sq;
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.48 2005/01/07 11:07:40 jmc Exp $
d457 6
a462 1
Macros remain defined until a
d1395 14
@


1.48
log
@- distinguish between client (ftp) and protocol (FTP)
- uppercase http
- use .Sq for single characters, rather than .Dq
- adjust a list
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.47 2005/01/07 10:36:29 jmc Exp $
d446 1
a446 1
.Dq - ,
d582 1
a582 1
.Dq - ,
@


1.47
log
@`login'(n) -> `log in'(v);
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.46 2005/01/03 15:01:34 jmc Exp $
d69 1
a69 1
standard File Transfer Protocol.
d91 1
a91 1
Force active mode ftp.
d94 1
a94 1
will try to use passive mode ftp and fall back to active mode
d142 1
a142 1
.Dq -
d177 1
a177 2
.Tn FTP
server on that host; otherwise,
d188 1
a188 1
.Nm ftp :
d239 2
a240 5
Terminate the
.Tn FTP
session with the remote server
and exit
.Nm ftp .
d265 1
a265 3
Terminate the
.Tn FTP
session with the remote server and
d382 1
a382 1
the exact result depends on the foreign operating system and ftp server,
d724 1
a724 2
.Tn FTP
server.
d728 1
a728 3
will attempt to contact an
.Tn FTP
server at that port.
d734 1
a734 3
the
.Tn FTP
server (see below).
d747 3
a749 2
If passive mode is turned on (default is on), the ftp client will
send a
d767 1
a767 1
(Note that though ftp servers are required to support the
d777 1
a777 1
.Dq -
d817 2
a818 2
Execute an ftp command on a secondary control connection.
This command allows simultaneous connection to two remote ftp
d827 1
a827 1
to see other ftp commands executable on the
d846 1
a846 1
Third party file transfers depend upon support of the ftp protocol
d874 1
a874 3
The arguments specified are sent, verbatim, to the remote
.Tn FTP
server.
d901 2
a902 2
ftp server.
Resynchronization may be necessary following a violation of the ftp protocol
d919 1
a919 3
Request help from the remote
.Tn FTP
server.
d982 1
a982 4
This is useful
for certain
.Tn FTP
implementations which do ignore
d986 1
a986 3
The arguments specified are sent, verbatim, to the remote
.Tn FTP
server as a
d995 1
a995 1
.Nm ftp .
d1006 1
a1006 1
The remote ftp server must support the ftp protocol
d1040 1
a1040 3
Identify yourself to the remote
.Tn FTP
server.
d1048 2
a1049 4
field is not specified, and the
.Tn FTP
server
requires it, the user will be prompted for it.
d1061 1
a1061 2
.Tn FTP
server.
d1065 1
a1065 3
the
.Tn FTP
server are displayed to the user.
d1106 2
a1107 1
ftp format.
d1109 1
a1109 1
An ftp URL, retrieved using the ftp protocol if
d1112 1
a1112 1
Otherwise, transfer using http via the proxy defined in
d1123 1
a1123 1
An http URL, retrieved using the http protocol.
d1129 1
a1129 1
If a classic format or an ftp URL format has a trailing
d1138 1
a1138 1
If successive auto-fetch ftp elements refer to the same host, then
d1173 1
a1173 1
Receiving transfers will be halted by sending an ftp protocol
d1193 1
a1193 1
violations of the ftp protocol.
d1204 1
a1204 1
.Dq -
d1345 1
a1345 1
anonymous ftp login to
d1430 2
a1431 1
.Bl -tag -width "passive  "
d1433 1
a1433 1
passive mode ftp only
d1435 1
a1435 1
active mode ftp only
d1467 1
a1467 1
(if not defined, use the standard ftp protocol).
@


1.46
log
@use an example of nmap `outpattern' containing spaces that works;
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.45 2005/01/03 14:47:52 jmc Exp $
d136 1
a136 1
and an account with which to login.
d1143 1
a1143 1
isn't defined, login as
@


1.45
log
@a little cleanup in the nmap description;
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.44 2005/01/03 13:23:23 jmc Exp $
d683 3
a685 2
.Ar outpattern ,
as in the example
d687 1
a687 1
nmap $1 sed "s/  *$//" > $1
@


1.44
log
@need to escape lines starting w/ `...';
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.43 2005/01/02 18:10:26 jmc Exp $
d638 1
d660 1
a660 1
.Op Ar seq1
@


1.43
log
@remove misleading "client host" string;

from matthias kilian pr# 4057;
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.42 2003/11/20 12:43:55 jmc Exp $
d625 1
a625 1
...,
@


1.42
log
@ftp.1:
- simpler macros
- sort options
- some updates
- remove some old groff stuff

main.c:
sync usage()
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.41 2003/09/02 18:50:06 jmc Exp $
d171 1
a171 1
The client host with which
@


1.41
log
@escape punctuation;
ok deraadt@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.40 2003/07/15 10:53:02 jmc Exp $
d38 1
a38 3
.Nd
.Tn ARPANET
file transfer program
d41 1
a41 2
.Op Fl AVadegimnptv46
.Op Fl o Ar output
d46 7
a52 1
ftp://[\fIuser\fR:\fIpassword\fR@@]\fIhost\fR[:\fIport\fR]/\fIfile\fR[/]
d54 5
a58 1
http://\fIhost\fR[:\fIport\fR]/\fIfile\fR
d60 5
a64 1
\fIhost\fR:[/\fIpath\fR/]\fIfile\fR[/]
d82 8
d130 1
a130 1
(see below) file in the user's home directory for an entry describing
d138 1
a138 1
When fetching a single file or url, save the contents in
d145 3
d154 3
a156 7
.It Fl P Ar port
Sets the port number to
.Ar port .
.It Fl r Ar number
Retry to connect if failed, pausing for
.Ar number
of seconds.
d159 3
a168 11
.It Fl V
Disable verbose mode, overriding the default of enabled when input
is from a terminal.
.It Fl 4
Forces
.Nm
to use IPv4 addresses only.
.It Fl 6
Forces
.Nm
to use IPv6 addresses only.
d184 1
a184 1
is awaiting commands the prompt
d202 3
d255 1
a255 1
.It Ic \&cd Ar remote-directory
d274 1
a274 1
.It Ic \&cr
d280 1
a280 1
.Ic \&cr
d284 2
a285 4
single linefeed record
delimiter.
Records on
non\-UNIX
d289 1
a289 1
.Ic \&cr
a290 4
.It Ic delete Ar remote-file
Delete the file
.Ar remote-file
on the remote machine.
d295 1
a295 1
is specified it is used to set the debugging level.
d300 5
a304 1
.Ql \-\-> .
a320 3
.It Ic ftp Ar host Op Ar port
A synonym for
.Ic open .
d326 20
a345 1
The default format is \*(Lqfile\*(Rq.
a365 15
.It Ic gate Op Ar host Op Ar port
Toggle gate-ftp mode.
This will not be permitted if the gate-ftp server hasn't been set
(either explicitly by the user, or from the
.Ev FTPSERVER
environment variable).
If
.Ar host
is given,
then gate-ftp mode will be enabled, and the gate-ftp server will be set to
.Ar host .
If
.Ar port
is also given, that will be used as the port to connect to on the
gate-ftp server.
d390 1
a390 1
.Dq mls remote-files \- .
d433 2
a434 3
.It Ic \&ls Op Ar remote-directory Op Ar local-file
Print a listing of the contents of a
directory on the remote machine.
d438 2
a439 3
systems will produce
output from the command
.Ql ls \-l .
d541 3
a543 1
The default mode is \*(Lqstream\*(Rq mode.
d607 1
a607 3
This command is useful when connecting to a
.No non\- Ns Ux
remote computer
d609 1
d648 1
a648 1
...,
d664 1
a664 1
For example, the command
d666 1
a666 3
.Bd -literal -offset indent -compact
nmap $1.$2.$3 [$1,$2].[$2,file]
.Ed
d668 2
a669 3
would yield
the output filename
.Pa myfile.data ,
d673 1
a673 1
.Pa myfile.data.old ,
d676 1
a676 1
.Pa myfile ,
d680 1
a680 1
.Pa \&.myfile .
d684 2
a685 3
.Pp
.Bd -literal -offset indent -compact
nmap $1 sed "s/  *$//" > $1 .
d714 1
a714 3
This command is useful when connecting to a
.No non\- Ns Ux
remote computer
d730 1
a730 1
An optional port number may be supplied
a805 2
.It Ic n
Do not transfer the file.
d812 2
d821 2
a823 4
.Pp
Any other response will answer
.Dq yes
to the current file.
d840 1
a840 1
will not define new macros during the auto-login process,
d842 1
a842 1
will not erase existing macro definitions,
d847 1
a847 1
to the host on the secondary control connection, and
a902 14
.It Ic remotehelp Op Ar command-name
Request help from the remote
.Tn FTP
server.
If a
.Ar command-name
is specified it is supplied to the server as well.
.It Ic rstatus Op Ar file-name
With no arguments, show status of remote machine.
If
.Ar file-name
is specified, show status of
.Ar file-name
on remote machine.
d928 7
d937 7
d952 1
a952 1
.Dq \&.1
d956 1
a956 1
.Dq \&.2
d959 2
a960 3
.Dq \&.99 ,
an error
message is printed, and the transfer does not take place.
d1013 8
a1020 6
.It Ic struct Op Ar struct-name
Set the file transfer
.Ar structure
to
.Ar struct-name .
By default \*(Lqstream\*(Rq structure is used.
d1023 1
a1023 1
Remote ftp server must support ftp protocol
d1027 1
a1027 1
The remote server will report unique name.
d1045 2
a1046 2
The default type is network
.Tn ASCII .
d1079 3
a1081 3
is invoked with \*(Lqauto-login\*(Rq disabled, this
process is done automatically on initial connection to
the
a1094 3
.It Ic \&? Op Ar command
A synonym for
.Ic help .
d1099 1
a1099 1
.Pq Ql "
d1127 2
a1128 2
.Bl -tag -width "ftp://[user:password@@]host[:port]/file"
.It host:/file
d1130 2
a1131 2
ftp format
.It ftp://[user:password@@]host[:port]/file
d1138 1
a1138 1
.Ar user:password@@
d1152 1
a1152 1
If a classic format or a ftp URL format has a trailing
d1166 2
a1167 2
.Ic file
contains a glob character and globbing is enabled,
d1171 1
a1171 1
.Ic "mget file"
d1178 1
a1178 1
.Ic file
d1184 7
a1190 1
.Ic file .
d1243 1
a1243 1
\*(Lq" ls -lt"\*(Rq.
d1245 2
a1246 1
useful example of this mechanism is: \*(Lqdir \&|more\*(Rq.
d1299 9
a1307 6
may be one of \*(Lqascii\*(Rq, \*(Lqimage\*(Rq (binary),
\*(Lqebcdic\*(Rq, and \*(Lqlocal byte size\*(Rq (for
.Tn PDP Ns -10's
and
.Tn PDP Ns -20's
mostly).
d1433 1
a1433 1
file - refer to
d1496 1
a1496 1
will listen to a random high tcp port.
d1500 1
a1500 1
.Li net.inet.ip.porthifirst
d1502 1
a1502 1
.Li net.inet.ip.porthilast .
d1504 5
d1510 1
d1512 1
@


1.40
log
@.Ql Fl -> .Sq Fl  where literal doesn't make sense;
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.39 2003/06/03 02:56:08 millert Exp $
d831 1
a831 1
.Ic proxy ?
d1091 1
a1091 1
.It Ic ? Op Ar command
@


1.39
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.38 2003/03/31 19:40:44 jmc Exp $
d646 1
a646 1
.Ql Op Ar seq1 , Ar seq2
@


1.38
log
@ascii -> ASCII
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.37 2003/03/18 08:37:35 jmc Exp $
d15 1
a15 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
@


1.37
log
@small typos;

ok miod@@
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.36 2002/07/04 10:08:51 jakob Exp $
d278 1
a278 1
.Pf non\- Ns Ux
d581 2
a582 1
the output is sent to the terminal.  Note that on some servers, the
d1302 1
a1302 1
supports the ascii and image types of file transfer,
d1487 1
a1487 1
For active mode data connections, 
d1491 1
a1491 1
.Xr sysctl 8 
@


1.36
log
@document port allocation
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.35 2002/05/30 06:51:46 deraadt Exp $
d821 1
a821 1
Any other reponse will answer
@


1.35
log
@-4 and -6 options; kanai@@big.or.jp; itojun ok
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.34 2001/08/22 17:26:34 beck Exp $
d1485 10
@


1.34
log
@ftp-proxy
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.33 2001/03/09 16:59:38 millert Exp $
d47 1
a47 1
.Op Fl AVadegimnptv
d155 8
@


1.33
log
@Typo in Synopsis; there's a -v option, not -u
"Brian J. Kifiak" <bk@@rt.fm>
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.32 2000/11/09 17:52:12 aaron Exp $
d1482 1
@


1.32
log
@Change all option list specifications to ".Bl -tag -width Ds". Most man
pages just needed their -width parameter tweaked to "Ds", which provides
a nice width of 6 constant characters. For consistency more than anything.
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.31 2000/06/21 19:22:54 itojun Exp $
d47 1
a47 1
.Op Fl AVadegimnptu
@


1.31
log
@add epsv4 command, which turns off epsv on ipv4 (off by dfeault)
automagicaslly disable epsv on ipv4, if epsv fails for single connection.
merge from netbsd-current.

req from fgs.
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.30 2000/06/13 21:28:38 millert Exp $
d74 1
a74 1
.Bl -tag -width "port    "
@


1.30
log
@Make both ls and dir send a LIST command.  Perviously, ls would use
NLST but some ftp server (notably wu-ftpd 2.6.x) only list files
in the output of NLST.  This behavior appears to be RFC conforming
and it makes things like "mget *" behave more sanely.  To get just
the file list you can still use the "nlist" command.
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.29 2000/03/07 21:11:09 aaron Exp $
d301 2
@


1.29
log
@Various cleanup.
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.28 2000/02/29 04:52:37 aaron Exp $
d291 2
a292 24
Print a listing of the contents of a
directory on the remote machine.
The listing includes any system-dependent information that the server
chooses to include; for example, most
.Ux
systems will produce
output from the command
.Ql ls \-l .
(See also
.Ic ls . )
If
.Ar remote-directory
is left unspecified, the current working directory is used.
If interactive prompting is on,
.Nm
will prompt the user to verify that the last argument is indeed the
target local file for receiving
.Ic dir
output.
If no local file is specified, or if
.Ar local-file
is
.Dq - ,
the output is sent to the terminal.
d416 1
a416 1
Print a list of the files in a
d418 6
d482 2
a483 9
Like
.Ic dir ,
except multiple remote files may be specified.
If interactive prompting is on,
.Nm
will prompt the user to verify that the last argument is indeed the
target local file for receiving
.Ic mdir
output.
d556 19
a574 2
A synonym for
.Ic ls .
@


1.28
log
@Various cleanup.
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.27 1999/07/04 11:53:54 aaron Exp $
d68 2
a69 1
This is ideal for scripts.  Refer to
d76 2
a77 1
Force active mode ftp.  By default,
d80 2
a81 1
if passive is not supported by the server.  This option causes
d83 2
a84 1
to always use an active connection.  It is only useful for connecting
d93 2
a94 1
Disables command line editing.  Useful for Emacs ange-ftp.
d171 1
a171 1
.Ql ftp>
d204 1
a204 1
.Ic type  ,
d206 1
a206 1
.Ic mode  ,
d289 1
a289 1
.Ql \-\->
d313 1
a313 1
.Sq Fl ,
d343 1
a343 1
.Ic case  ,
d349 1
a349 1
.Ic type  ,
d351 1
a351 1
.Ic mode  ,
d372 1
a372 1
.Ic mdelete  ,
d377 1
a377 1
.Ic glob  ,
d387 1
a387 1
.Ic mget  ,
d406 3
a408 2
Toggle hash-sign (``#'') printing for each data block
transferred.
d452 1
a452 1
.Fl  ,
d457 1
a457 1
.Ar macro-name  ;
d466 8
a473 2
The macro processor interprets `$' and `\e' as special characters.
A `$' followed by a number (or numbers) is replaced by the
d475 5
a479 1
A `$' followed by an `i' tells the macro processor that the
d481 3
a483 1
On the first pass `$i' is
d486 7
a492 2
A `\e' followed by any character is replaced by that character.
Use the `\e' to prevent special treatment of the `$'.
d499 1
a499 1
.Ic dir  ,
d518 1
a518 1
.Ic case  ,
d532 1
a532 1
.Ic ls  ,
d610 6
a615 1
sequences `$1', `$2', ..., `$9' in
d617 5
a621 1
Use `\\' to prevent this special treatment of the `$' character.
d633 6
a638 2
The sequences `$1', `$2', ...., `$9' are replaced by any value resulting
from the
d641 3
a643 1
The sequence `$0' is replaced by the original filename.
d659 13
a671 3
the output filename "myfile.data" for input filenames "myfile.data" and
"myfile.data.old", "myfile.file" for the input filename "myfile", and
"myfile.myfile" for the input filename ".myfile".
d673 17
a689 4
.Ar outpattern  ,
as in the example: `nmap $1 sed "s/  *$//" > $1' .
Use the `\e' character to prevent special treatment
of the `$','[','[', and `,' characters.
d717 1
a717 1
.Ar outchars  ,
d749 2
a750 2
Toggle passive mode.  If passive mode is turned on
(default is on), the ftp client will
d755 2
a756 1
command.  The
d759 3
a761 2
and return the address of that port.  The remote server listens on that
port and the client connects to it.  When using the more traditional
d764 2
a765 1
server, who connects back to it.  Passive mode is useful when using
d779 1
a779 1
.Sq Fl
d827 1
a827 1
.Ic open  ,
d829 3
a831 1
Enter the command "proxy ?" to see other ftp commands executable on the
d834 1
a834 1
.Ic proxy  :
d844 1
a844 1
.Ic put  ,
d866 1
a866 1
.Ic type  ,
d868 1
a868 1
.Ic mode  ,
d889 1
a889 1
.Ar remote-file  ,
d947 3
a949 1
command, a ".1" is appended to the name.
d951 6
a956 2
a ".2" is appended to the original name.
If this process continues up to ".99", an error
d1096 3
a1098 1
quote `"' marks.
d1219 4
a1222 4
.Sq Fl
is specified, the stdin
(for reading) or stdout
(for writing) is used.
d1231 2
a1232 2
with the argument supplied, and reads (writes) from the stdout
(stdin).
d1234 1
a1234 1
must be quoted; e.g.
d1239 3
a1241 1
Failing the above checks, if ``globbing'' is enabled,
d1244 1
a1244 1
.Xr csh  1  ;
d1250 5
a1254 3
command expects a single local file (.e.g.
.Ic put  ) ,
only the first filename generated by the "globbing" operation is used.
d1262 1
a1262 1
.Ic case  ,
d1305 1
a1305 1
.Ic mode  ,
d1377 1
a1377 1
.Ar anonymous  ,
d1439 2
a1440 1
Overrides the default operation mode.  Recognized values are:
@


1.27
log
@correct use of .Nm; some other formatting nits
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.26 1999/06/10 22:38:02 pjanzen Exp $
d72 1
a72 2
Options may be specified at the command line, or to the
command interpreter.
d1403 1
@


1.26
log
@Handle PAGER in a manner consistent with the Single Unix Specification:
that is, use PAGER rather than "more" if it is defined and non-null, not
just if it is defined.
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.25 1999/06/05 01:21:26 aaron Exp $
d59 1
a59 1
.Nm ftp
@


1.25
log
@- remove trailing white space
- remove arguments from .Os macros
- remove arguments from .Nm macros, where appropriate
- some more Dq/Sq/Ql insanity
- still lots to do in the usr.bin tree... :/
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.24 1999/02/09 17:43:04 deraadt Exp $
d683 5
a687 2
(which defaults to
.Xr more 1 ).
@


1.24
log
@correct a default; js3guj@@gold.ocn.ne.jp
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.23 1998/12/16 02:38:49 aaron Exp $
d39 1
a39 1
.Os BSD 4.2
d351 1
a351 1
.It Ic gate Op Ar host Op Ar port 
d355 1
a355 1
.Ev FTPSERVER 
d682 1
a682 1
.Ev PAGER 
d1050 1
a1050 1
.It host:/file 
d1089 1
a1089 1
contains a glob character and globbing is enabled, 
d1328 1
a1328 1
supports interactive command line editing, via the 
d1380 1
a1380 1
lookup of 
@


1.23
log
@more .Nm fixes
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.22 1998/09/26 19:54:48 aaron Exp $
d687 1
a687 1
(default is off), the ftp client will
@


1.22
log
@usr.bin/ man page fixes, f-m.
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.21 1998/09/19 20:47:16 millert Exp $
d46 1
a46 1
.Nm
@


1.21
log
@Make -m flag turn on progress meter in all situations
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.20 1998/09/19 20:12:31 millert Exp $
d47 1
a47 8
.Op Fl A
.Op Fl a
.Op Fl d
.Op Fl e
.Op Fl g
.Op Fl i
.Op Fl m
.Op Fl n
a48 1
.Op Fl p
a50 3
.Op Fl t
.Op Fl v
.Op Fl V
d59 1
a59 1
.Nm Ftp
d86 1
a86 1
to bypass normal login procedure, and use an anonymous login instead.
d121 1
a121 2
To make the contents go to
.Ar stdout ,
d123 1
a123 1
.Qq -
d166 1
a166 1
is awaiting commands from the user the prompt
d171 1
a171 1
.Nm ftp  :
d224 1
a224 1
An end of file will also terminate the session and exit.
d250 1
a250 1
session with the remote server, and
d255 1
a255 1
ascii type file retrieval.
d257 1
a257 1
during ascii type file transfer.
d268 1
a268 1
when an ascii type transfer is made, these linefeeds may be
d390 1
a390 1
.Ql mls remote-files \-
d464 1
a464 1
A `$' followed by an `i' signals that macro processor that the
d550 1
a550 1
recent that the file on the current system.
d580 1
a580 1
.Op Ar Inpattern
d593 1
a593 1
.Op Ar inpattern
d606 1
a606 1
The sequence `$0' is replace by the original filename.
d664 2
a665 2
An optional port number may be supplied,
in which case,
d738 3
a740 3
.Sq yes
to the current file, and automatically answer
.Sq yes
d744 3
a746 3
.Sq yes
to the current file, and turn off prompt mode
(as is
d752 1
a752 1
.Sq yes
d848 1
a848 1
on the remote machine, to the file
d866 3
a868 1
systems, marker is usually a byte
d1112 1
a1112 1
Receiving transfers will be halted by sending a ftp protocol
d1144 2
a1145 4
is specified, the
.Ar stdin
(for reading) or
.Ar stdout
d1356 1
a1356 1
utilizes the following environment variables.
d1417 1
a1417 1
ascii-mode transfer code
d1422 1
a1422 1
servers using the ascii type.
@


1.20
log
@add -m option to turn on progress meter in non-verbose mode
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.19 1998/06/12 12:12:52 d Exp $
d110 2
a111 1
to display the progress meter even if in non-verbose mode.
@


1.19
log
@make -o semantics obvious
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.17 1998/02/17 23:22:55 millert Exp $
d53 1
d107 4
@


1.18
log
@To change output, we use -o.  Noted by David Leonard <leonard@@csee.uq.edu.au>
@
text
@d1100 4
a1103 1
If the directory component of
d1106 1
@


1.17
log
@Add a new option "-o filename" for autofetch mode.  Allows use of
"-" to mean stdout.  This replaces the old (unreliable) hueristic
of checking if stdout is a tty and if not make the output go to stdout.
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.16 1997/12/17 16:03:01 millert Exp $
d1100 1
a1100 4
If standard output is redirected to a non-tty device, ftp will write
the data file out to standard output.  This can be used to pipe data
directly to another process.
Otherwise if the directory component of
@


1.16
log
@By default, use passive mode and fall back to active as needed.
The user can specify active only with the -A flag, or use the
new FTPMODE envariable.
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.15 1997/09/04 04:42:34 millert Exp $
d54 1
d123 9
@


1.15
log
@mention $TMPDIR in man page
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.14 1997/09/04 04:37:15 millert Exp $
d47 1
d84 8
d124 4
d1353 12
@


1.14
log
@Updtaes from NetBSD (lukem)
    bugs fixed:
      * don't interpret '-' or '|' when a local filename is determined from
        the remote name (i.e, in mget, and in get with only one argument).
        This is implemented using an extra argument to recvrequest().
        Fixes a major security hole.
      * clean up memory leak when using globulize()
      * clean up a couple of comments
      * fix wording in TNF copyright

    features added:
      * support for TIS fwtk gate-ftp servers:
        * read defaults from $FTPSERVER && $FTPSERVERPORT
        * start in gate-ftp mode if invoked as 'gate-ftp'
        * toggle or set with 'gate [host [port]]'

Other changes:
    * use symbolic flags in access(2)
    * Use USHRT_MAX, not 0xffff
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.13 1997/07/25 21:56:20 millert Exp $
d1339 1
a1339 1
.Bl -tag -width "http_proxy"
d1362 2
@


1.13
log
@Updates from NetBSD (lukem) include -Wall cleanup.
More -W* cleanup and in_port_t usage by me.
@
text
@d1 2
a2 2
.\" 	$OpenBSD: ftp.1,v 1.12 1997/04/23 20:33:09 deraadt Exp $
.\" 	$NetBSD: ftp.1,v 1.21 1997/06/10 21:59:58 lukem Exp $
d37 1
a37 1
.Dd February 23, 1997
d334 15
d1340 12
d1369 1
d1371 1
@


1.12
log
@allow "ftp -aV ftp://host/foo.tar.gz | tar xvfpz -" to work
@
text
@d1 2
a2 2
.\" 	$OpenBSD: ftp.1,v 1.11 1997/04/16 05:02:50 millert Exp $
.\" 	$NetBSD: ftp.1,v 1.20 1997/04/14 09:09:20 lukem Exp $
d1057 1
a1057 1
.Ic glob ),
@


1.11
log
@Sync with NetBSD (lukem):
 * differentiate between being connected, and being logged in
 * cleanup some text messages
 * support username & password ftp URLs (ftp://user:pass@@host/) in non-proxy
   situations; assume proxy supports it for proxy situations.
 * cd to / before performing any autofetch transfers
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.10 1997/04/10 00:17:09 millert Exp $
d1062 4
a1065 1
If the directory component of
@


1.10
log
@Sync with NetBSD (lukem)
    * support $ftp_proxy for ftp:// transfers [bin/3245]
    * add "more" & "less" as synonyms for "page"
    * move editline setup code into controlediting(), and call appropriately.
      only setup setup terminal if going into interactive mode.
@
text
@d1 2
a2 2
.\" 	$OpenBSD: ftp.1,v 1.9 1997/03/14 04:32:15 millert Exp $
.\" 	$NetBSD: ftp.1,v 1.19 1997/04/05 03:27:37 lukem Exp $
d61 1
a61 1
ftp://\fIhost\fR[:\fIport\fR]/\fIfile\fR[/]
d1015 1
a1015 1
.Bl -tag -width "http://host[:port]/file"
d1019 2
a1020 2
.It ftp://host[:port]/file
FTP URL, using the ftp protocol if
d1025 8
d1034 1
a1034 1
HTTP URL, using the http protocol.
@


1.9
log
@Sync with NetBSD and fix "get foo.txt /dev/tty" wrt progress meter
and setting times.
@
text
@d1 2
a2 2
.\" 	$OpenBSD: ftp.1,v 1.8 1997/02/18 18:04:28 kstailey Exp $
.\" 	$NetBSD: ftp.1,v 1.18 1997/03/13 06:23:16 lukem Exp $
d395 3
d497 3
d1020 5
a1024 1
FTP URL, using the ftp protocol.
d1324 3
d1328 1
a1328 1
URL of HTTP proxy to use when making HTTP requests.
@


1.8
log
@add -e command line option to suppress use of editline(3)\
this is useful for Emacs ange-ftp
@
text
@d1 2
a2 2
.\" 	$OpenBSD: ftp.1,v 1.7 1997/02/03 01:05:38 millert Exp $
.\" 	$NetBSD: ftp.1,v 1.17 1997/02/01 10:45:01 lukem Exp $
d37 1
a37 1
.Dd January 20, 1997
d65 1
a65 1
\fIhost\fR:\fI/path/file\fR[/]
d76 3
a78 1
This is ideal for scripts.
d90 1
a90 1
Suppress the use of editline(3).  Useful for Emacs ange-ftp.
d640 7
d672 9
d1034 18
d1279 1
a1279 1
command, and is enabled by default.
d1308 4
@


1.7
log
@Add back ``-r'' option and fix strncpy() usage and other nits because
I'm anal.  Closer to KNF now.
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.17 1997/02/01 10:45:01 lukem Exp $
d49 1
d87 2
@


1.6
log
@Sync with NetBSD
@
text
@d1 1
d54 1
d64 1
a64 1
\fIhost\fR:\fIfile\fR[/]
d66 1
a66 1
.Nm
d73 4
d113 4
d261 2
a262 2
prints each command sent to the remote machine, preceded
by the string
a1281 7
.Pp
Various features such as command line editing, context sensitive 
command and file completion, dynamic progress bar, automatic
fetching of files, ftp and http URLs, and modification time
preservation were implemented in
.Nx 1.2b
by Luke Mewburn, with assistance from Jason Thorpe.
@


1.5
log
@optional size argument to hash command
@
text
@d1 1
a1 2
.\" 	$OpenBSD: ftp.1,v 1.4 1996/10/31 14:36:55 mickey Exp $
.\" 	$NetBSD: ftp.1,v 1.11 1995/09/08 01:06:24 tls Exp $
d36 1
a36 1
.Dd October 9, 1994
d45 2
a46 3
.Nm ftp
.Op Fl t
.Op Fl v
d48 1
d51 6
a56 3
.Op Fl g
.Op Fl r Ar seconds
.Op Ar host
d58 1
a58 1
.Ar http://host/path/file.html
d60 1
a60 1
.Ar ftp://host/path/file.tar.gz
d62 1
a62 1
.Ar host:/path/file.tar.gz
d64 1
a64 1
.Nm Ftp
a70 4
The latter three usage formats will fetch a file using either the
HTTP or FTP protocols into the current directory.
This is ideal for scripts.
.Pp
d73 12
a84 8
.Bl -tag -width flag
.It Fl t
Enables packet tracing.
.It Fl v
Verbose option forces
.Nm ftp
to show all responses from the remote server, as well
as report on data transfer statistics.
d87 4
a90 2
.Nm ftp
from attempting \*(Lqauto-login\*(Rq upon initial connection.
d92 1
a92 1
.Nm ftp
d98 1
a98 1
.Nm ftp
d102 17
a118 11
.It Fl i
Turns off interactive prompting during
multiple file transfers.
.It Fl d
Enables debugging.
.It Fl g
Disables file name globbing.
.It Fl r Ar number
Retry to connect if failed, pausing for
.Ar number
of seconds.
d122 1
a122 1
.Nm ftp
d125 1
a125 1
.Nm ftp
d129 1
a129 1
.Nm ftp
d133 1
a133 1
.Nm ftp
d191 1
a191 1
.Nm ftp  .
d205 1
a205 1
.Ar remote-directory  .
d213 2
a214 2
sytem to
.Ar mode  .
d250 1
a250 1
.Nm ftp
d254 14
a267 10
.It Xo
.Ic dir
.Op Ar remote-directory
.Op Ar local-file
.Xc
Print a listing of the directory contents in the
directory,
.Ar remote-directory  ,
and, optionally, placing the output in
.Ar local-file  .
d269 1
a269 1
.Nm ftp
d274 1
a274 4
If no directory is specified, the current working
directory on the remote machine is used.
If no local
file is specified, or
d277 2
a278 2
.Fl  ,
output comes to the terminal.
d281 12
a292 1
.Ar close  .
d297 1
a297 1
.Ar format  .
d324 1
a324 1
.Ic mput  .
d358 3
a360 1
This can be changed by specifying a size in bytes.
d363 1
a363 1
.Ar command  .
d365 1
a365 1
.Nm ftp
d380 4
a383 6
.It Xo
.Ic \&ls
.Op Ar remote-directory
.Op Ar local-file
.Xc
Print a listing of the contents of a
a384 8
The listing includes any system-dependent information that the server
chooses to include; for example, most
.Ux
systems will produce
output from the command
.Ql ls \-l .
(See also
.Ic nlist . )
d389 1
a389 1
.Nm ftp
d392 1
a392 1
.Ic \&ls
d397 1
a397 1
.Sq Fl ,
d430 1
a430 1
.Nm ftp
d460 1
a460 1
.Ic nlist  ,
d466 1
a466 1
.Nm ftp
d475 1
a475 1
.Ar mode-name  .
d492 3
d500 1
a500 1
.Ic newer  .
d502 4
a505 22
.Ar get  .
.It Xo
.Ic nlist
.Op Ar remote-directory
.Op Ar local-file
.Xc
Print a  list of the files in a
directory on the remote machine.
If
.Ar remote-directory
is left unspecified, the current working directory is used.
If interactive prompting is on,
.Nm ftp
will prompt the user to verify that the last argument is indeed the
target local file for receiving
.Ic nlist
output.
If no local file is specified, or if
.Ar local-file
is
.Fl  ,
the output is sent to the terminal.
d526 1
a526 1
.Ar outpattern  .
d536 1
a536 1
.Ar inpattern  .
d600 1
a600 1
.Ar outchars  .
d613 1
a613 1
.Nm ftp
d620 1
a620 1
.Nm ftp
d640 1
a640 1
.Nm ftp
d646 4
d662 23
d733 1
a733 1
.Ic structure  .
d739 1
a739 1
.Ic bye  .
d745 2
a746 1
A synonym for get.
d769 1
a769 1
.It Ic remotestatus Op Ar file-name
d776 1
a776 5
.It Xo
.Ic rename
.Op Ar from
.Op Ar to
.Xc
d780 1
a780 1
.Ar to  .
d794 1
a794 1
.Ar marker  .
d820 2
a821 1
A synonym for put.
d827 1
a827 1
.Nm ftp
d839 1
a839 1
.Nm ftp
d864 1
a864 1
.Nm ftp  .
d892 1
a892 1
.Ar type-name  .
d899 1
a899 1
.Ar newmask  .
d905 1
a905 2
.Op Ar password
.Op Ar account
d913 1
a913 1
.Nm ftp
d928 1
a928 1
.Nm ftp
d946 2
a947 1
A synonym for help.
d952 51
d1022 1
a1022 1
.Nm ftp
d1029 1
a1029 1
.Nm ftp
d1033 1
a1033 1
.Nm ftp
d1049 1
a1049 1
.Nm Ftp
d1058 1
a1058 1
useful example of this mechanism is: \*(Lqdir more\*(Rq.
d1068 1
a1068 1
.Nm ftp
d1113 1
a1113 1
.Nm Ftp
d1119 1
a1119 1
.Nm Ftp
d1125 1
a1125 1
.Ic struct  .
d1143 1
a1143 1
.Nm ftp
d1195 1
a1195 1
.Nm ftp
d1210 1
a1210 1
.Nm ftp
d1223 28
d1252 1
a1252 1
.Nm Ftp
d1254 1
a1254 1
.Bl -tag -width Fl
d1261 2
d1265 1
d1269 1
a1269 1
.Nm ftp
d1272 7
@


1.4
log
@add -r<seconds> option to retry connection.
dunno how to do optional argument.
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.3 1996/09/13 03:21:18 deraadt Exp $
d332 1
a332 1
.It Ic hash
d335 2
a336 1
The size of a data block is 1024 bytes.
@


1.3
log
@document our extensions
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.2 1996/06/26 05:33:36 deraadt Exp $
d53 1
d105 4
@


1.2
log
@rcsid
@
text
@d1 1
a1 1
.\" 	$OpenBSD: ftp.1,v 1.11 1995/09/08 01:06:24 tls Exp $
d54 6
d67 4
@


1.1
log
@Initial revision
@
text
@d1 1
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
