head	1.16;
access;
symbols
	OPENBSD_4_8:1.15.0.22
	OPENBSD_4_8_BASE:1.15
	OPENBSD_4_7:1.15.0.18
	OPENBSD_4_7_BASE:1.15
	OPENBSD_4_6:1.15.0.20
	OPENBSD_4_6_BASE:1.15
	OPENBSD_4_5:1.15.0.16
	OPENBSD_4_5_BASE:1.15
	OPENBSD_4_4:1.15.0.14
	OPENBSD_4_4_BASE:1.15
	OPENBSD_4_3:1.15.0.12
	OPENBSD_4_3_BASE:1.15
	OPENBSD_4_2:1.15.0.10
	OPENBSD_4_2_BASE:1.15
	OPENBSD_4_1:1.15.0.8
	OPENBSD_4_1_BASE:1.15
	OPENBSD_4_0:1.15.0.6
	OPENBSD_4_0_BASE:1.15
	OPENBSD_3_9:1.15.0.4
	OPENBSD_3_9_BASE:1.15
	OPENBSD_3_8:1.15.0.2
	OPENBSD_3_8_BASE:1.15
	OPENBSD_3_7:1.14.0.8
	OPENBSD_3_7_BASE:1.14
	OPENBSD_3_6:1.14.0.6
	OPENBSD_3_6_BASE:1.14
	OPENBSD_3_5:1.14.0.4
	OPENBSD_3_5_BASE:1.14
	OPENBSD_3_4:1.14.0.2
	OPENBSD_3_4_BASE:1.14
	OPENBSD_3_3:1.13.0.12
	OPENBSD_3_3_BASE:1.13
	OPENBSD_3_2:1.13.0.10
	OPENBSD_3_2_BASE:1.13
	OPENBSD_3_1:1.13.0.8
	OPENBSD_3_1_BASE:1.13
	OPENBSD_3_0:1.13.0.6
	OPENBSD_3_0_BASE:1.13
	OPENBSD_2_9_BASE:1.13
	OPENBSD_2_9:1.13.0.4
	OPENBSD_2_8:1.13.0.2
	OPENBSD_2_8_BASE:1.13
	OPENBSD_2_7:1.12.0.8
	OPENBSD_2_7_BASE:1.12
	OPENBSD_2_6:1.12.0.6
	OPENBSD_2_6_BASE:1.12
	OPENBSD_2_5:1.12.0.4
	OPENBSD_2_5_BASE:1.12
	OPENBSD_2_4:1.12.0.2
	OPENBSD_2_4_BASE:1.12
	OPENBSD_2_3:1.11.0.2
	OPENBSD_2_3_BASE:1.11
	OPENBSD_2_2:1.8.0.4
	OPENBSD_2_2_BASE:1.8
	OPENBSD_2_1:1.8.0.2
	OPENBSD_2_1_BASE:1.8
	OPENBSD_2_0:1.7.0.2
	OPENBSD_2_0_BASE:1.7
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.16
date	2010.09.23.18.59.35;	author pirofti;	state dead;
branches;
next	1.15;

1.15
date	2005.06.28.20.56.37;	author martin;	state Exp;
branches;
next	1.14;

1.14
date	2003.05.14.01.46.51;	author hin;	state Exp;
branches;
next	1.13;

1.13
date	2000.10.11.19.28.02;	author millert;	state Exp;
branches;
next	1.12;

1.12
date	98.07.24.00.11.02;	author millert;	state Exp;
branches;
next	1.11;

1.11
date	98.03.23.21.18.22;	author pefo;	state Exp;
branches;
next	1.10;

1.10
date	98.03.19.15.20.03;	author graichen;	state Exp;
branches;
next	1.9;

1.9
date	98.03.12.17.31.44;	author deraadt;	state Exp;
branches;
next	1.8;

1.8
date	97.03.26.00.35.41;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	96.06.26.05.41.33;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	96.06.02.20.22.33;	author tholo;	state Exp;
branches;
next	1.5;

1.5
date	96.06.02.20.11.00;	author tholo;	state Exp;
branches;
next	1.4;

1.4
date	96.06.02.05.54.38;	author tholo;	state Exp;
branches;
next	1.3;

1.3
date	96.02.15.05.02.29;	author etheisen;	state Exp;
branches;
next	1.2;

1.2
date	95.12.14.03.31.40;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.46.23;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.46.23;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.16
log
@Kill tn3270.

Okay deraadt@@, millert@@ and all around general approval.
@
text
@#	$OpenBSD: Makefile,v 1.15 2005/06/28 20:56:37 martin Exp $

.include "../../Makefile.inc"

CFLAGS += -I${.CURDIR} -I.
CFLAGS += -I${.CURDIR}/../../telnet
LDADD += -lcurses
DPADD += ${LIBCURSES}

SRCS += apilib.c api_bsd.c api_exch.c asc_ebc.c astosc.c dctype.c
SRCS += disp_asc.c ebc_disp.c
SRCS += map3270.c termin.c
SRCS += api.c function.c inbound.c oia.c options.c outbound.c
SRCS += genbsubs.c globals.c system.c termout.c
SRCS += commands.c main.c network.c ring.c sys_bsd.c telnet.c terminal.c
SRCS += tn3270.c utilities.c
SRCS += auth.c encrypt.c genget.c misc.c

# this and the dependency hacks below to make 'depend' target
# work right...

DEPSRCS += astosc.OUT asc_disp.OUT disp_asc.OUT kbd.OUT
DEPSRCS += apilib.c api_bsd.c api_exch.c asc_ebc.c dctype.c
DEPSRCS += ebc_disp.c
DEPSRCS += map3270.c termin.c
DEPSRCS += api.c function.c inbound.c oia.c options.c outbound.c
DEPSRCS += genbsubs.c globals.c system.c termout.c
DEPSRCS += commands.c main.c network.c ring.c sys_bsd.c telnet.c terminal.c
DEPSRCS += tn3270.c utilities.c

PROG = tn3270

MKASTOSC!=cd $(.CURDIR)/../tools/mkastosc; \
	printf "xxx:\n\techo \$${.OBJDIR}/mkastosc\n" | \
	${MAKE} -r -s -f - xxx | grep mkastosc

MKASTODS!=cd $(.CURDIR)/../tools/mkastods; \
	printf "xxx:\n\techo \$${.OBJDIR}/mkastods\n" | \
	${MAKE} -r -s -f - xxx | grep mkastods

MKDSTOAS!=cd $(.CURDIR)/../tools/mkdstoas; \
	printf "xxx:\n\techo \$${.OBJDIR}/mkdstoas\n" | \
	${MAKE} -r -s -f - xxx | grep mkdstoas

MKHITS!=cd $(.CURDIR)/../tools/mkhits; \
	printf "xxx:\n\techo \$${.OBJDIR}/mkhits\n" | \
	${MAKE} -r -s -f - xxx | grep mkhits

astosc.o: astosc.OUT
CLEANFILES += astosc.OUT astosc.out
astosc.OUT: ${.CURDIR}/../ctlr/hostctlr.h ${.CURDIR}/../ctlr/function.h \
	    ${.CURDIR}/../ctlr/${KBD} ${MKASTOSC}
	${MKASTOSC} ${.CURDIR}/../ctlr/hostctlr.h \
		${.CURDIR}/../ctlr/function.h < ${.CURDIR}/../ctlr/${KBD} \
		> ${.TARGET}
	/bin/rm -f astosc.out
	ln -s astosc.OUT astosc.out

disp_asc.o: asc_disp.OUT disp_asc.OUT
CLEANFILES += asc_disp.OUT asc_disp.out disp_asc.OUT disp_asc.out
asc_disp.OUT: ${MKASTODS}
	${MKASTODS} > ${.TARGET}
	/bin/rm -f asc_disp.out
	ln -s asc_disp.OUT asc_disp.out
disp_asc.OUT: ${MKDSTOAS}
	${MKDSTOAS} > ${.TARGET}
	/bin/rm -f disp_asc.out
	ln -s disp_asc.OUT disp_asc.out

inbound.o: kbd.OUT
CLEANFILES += TMPfunc.out kbd.OUT kbd.out
kbd.OUT: ${.CURDIR}/../ctlr/hostctlr.h ${.CURDIR}/../ctlr/${KBD} \
	 ${MKHITS}
	${CC} ${CFLAGS} -E ${.CURDIR}/../ctlr/function.c > TMPfunc.out
	${MKHITS} ${.CURDIR}/../ctlr/hostctlr.h \
		TMPfunc.out < ${.CURDIR}/../ctlr/${KBD} > ${.TARGET}
	/bin/rm -f kbd.out
	ln -s kbd.OUT kbd.out

# astosc.out
# asc_disp.out disp_asc.out
# default.map
# kbd.out

${MKASTOSC}:
	cd ${.CURDIR}/../tools/mkastosc; ${MAKE}
${MKASTODS}:
	cd ${.CURDIR}/../tools/mkastods; ${MAKE}
${MKDSTOAS}:
	cd ${.CURDIR}/../tools/mkdstoas; ${MAKE}
${MKHITS}:
	cd ${.CURDIR}/../tools/mkhits; ${MAKE}


depend: .depend
.depend: ${DEPSRCS}
	mkdep ${MKDEP} ${CFLAGS:M-[ID]*} ${.ALLSRC:M*.c}

.include <bsd.prog.mk>

.PATH: ${.CURDIR}/../api ${.CURDIR}/../ascii ${.CURDIR}/../ctlr
.PATH: ${.CURDIR}/../general ${.CURDIR}/../sys_curses ${.CURDIR}/../../telnet
@


1.15
log
@don't include telnetd, it's gone anyway

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.14 2003/05/14 01:46:51 hin Exp $
@


1.14
log
@Get rid of libtelnet, it is compiled into the tree programs
(telnetd, telnet and tn3270) that use them instead.
This gets rid of a really hairy dependency between telnet and libtelnet.

ok millert@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.13 2000/10/11 19:28:02 millert Exp $
a4 2
.PATH:	${.CURDIR}/../../../libexec/telnetd

d6 1
a6 2
CFLAGS +=-I${.CURDIR}/../../../libexec/telnetd
CFLAGS +=-I${.CURDIR}/../../telnet
@


1.13
log
@Use terminfo, not termcap interfaces.
Link with curses, not ocurses
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.12 1998/07/24 00:11:02 millert Exp $
d5 2
d8 1
a8 1
CFLAGS +=-I${.CURDIR}/../../../lib
d10 2
a11 2
LDADD += -lcurses -ltelnet
DPADD += ${LIBCURSES} ${LIBTELNET}
d20 1
@


1.12
log
@-lcurses, not termcap/termlib
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.11 1998/03/23 21:18:22 pefo Exp $
d8 2
a9 2
LDADD += -locurses -ltelnet
DPADD += ${LIBOLDCURSES} ${LIBTELNET}
@


1.11
log
@Back out the previous change. Wrong fix.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.10 1998/03/19 15:20:03 graichen Exp $
d8 2
a9 2
LDADD += -locurses -ltermcap -ltelnet
DPADD += ${LIBOLDCURSES} ${LIBTERMCAP} ${LIBTELNET}
@


1.10
log
@add some kerberos specific defines (after discussion with art) to fix
a building problem on the pmax - will investigate further with art@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.9 1998/03/12 17:31:44 deraadt Exp $
a9 9

.include <bsd.own.mk> # for KERBEROS

.if (${KERBEROS} == "yes")
CFLAGS+=-DENCRYPTION -DAUTHENTICATION -DKRB4
LDADD+= -lkrb -ldes
DPADD+= ${LIBDES} ${LIBKRB}
SRCS += authenc.c
.endif
@


1.9
log
@repair tn3270
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 1997/03/26 00:35:41 deraadt Exp $
d10 9
@


1.8
log
@no libcrypt, fix DPADD
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 1996/06/26 05:41:33 deraadt Exp $
d6 2
@


1.7
log
@rcsid
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.6 1996/06/02 20:22:33 tholo Exp $
a5 1
#LDADD += -locurses -ltermcap -ltelnet -lcrypt
d7 1
a7 2
#DPADD += ${LIBOLDCURSES} ${LIBTERMCAP} /usr/lib/libtelnet.a ${LIBCRYPT}
DPADD += ${LIBOLDCURSES} ${LIBTERMCAP} /usr/lib/libtelnet.a
@


1.6
log
@Depend on old curses library too
@
text
@d1 1
a1 1
#	$Id: Makefile,v 1.5 1996/06/02 20:11:00 tholo Exp $
@


1.5
log
@Use old curses library for now
@
text
@d1 1
a1 1
#	$Id: Makefile,v 1.4 1996/06/02 05:54:38 tholo Exp $
d8 2
a9 2
#DPADD += ${LIBCURSES} ${LIBTERMCAP} /usr/lib/libtelnet.a ${LIBCRYPT}
DPADD += ${LIBCURSES} ${LIBTERMCAP} /usr/lib/libtelnet.a
@


1.4
log
@Always use -ltermlib when linking with -lcurses
Be consistent in use of LIBTERMCAP and LIBTERMLIB when depending
@
text
@d1 1
a1 1
#	$Id: Makefile,v 1.3 1996/02/15 05:02:29 etheisen Exp $
d6 4
a9 4
#LDADD += -lcurses -ltermlib -ltelnet -lcrypt
LDADD += -lcurses -ltermlib -ltelnet
#DPADD += ${LIBCURSES} ${LIBTERMLIB} /usr/lib/libtelnet.a ${LIBCRYPT}
DPADD += ${LIBCURSES} ${LIBTERMLIB} /usr/lib/libtelnet.a
@


1.3
log
@libcrypt no longer a link dependancy.
@
text
@d1 1
a1 1
#	$Id: Makefile,v 1.2 1995/12/14 03:31:40 deraadt Exp $
d6 4
a9 4
#LDADD += -lcurses -ltermcap -ltelnet -lcrypt
LDADD += -lcurses -ltermcap -ltelnet
#DPADD += ${LIBCURSES} ${LIBTERMCAP} /usr/lib/libtelnet.a ${LIBCRYPT}
DPADD += ${LIBCURSES} ${LIBTERMCAP} /usr/lib/libtelnet.a
@


1.2
log
@update from netbsd
@
text
@d1 1
a1 1
#	$Id: Makefile,v 1.13 1995/10/22 00:13:46 christos Exp $
d6 4
a9 2
LDADD += -lcurses -ltermcap -ltelnet -lcrypt
DPADD += ${LIBCURSES} ${LIBTERMCAP} /usr/lib/libtelnet.a ${LIBCRYPT}
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
#	$Id: Makefile,v 1.12 1995/01/02 22:33:28 cgd Exp $
d32 2
a33 1
	printf "xxx:\n\techo \$${.OBJDIR}/mkastosc\n" | ${MAKE} -r -s -f - xxx
d36 2
a37 1
	printf "xxx:\n\techo \$${.OBJDIR}/mkastods\n" | ${MAKE} -r -s -f - xxx
d40 2
a41 1
	printf "xxx:\n\techo \$${.OBJDIR}/mkdstoas\n" | ${MAKE} -r -s -f - xxx
d44 2
a45 1
	printf "xxx:\n\techo \$${.OBJDIR}/mkhits\n" | ${MAKE} -r -s -f - xxx
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@

