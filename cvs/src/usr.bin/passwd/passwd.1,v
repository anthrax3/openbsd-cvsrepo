head	1.45;
access;
symbols
	OPENBSD_6_2:1.45.0.2
	OPENBSD_6_2_BASE:1.45
	OPENBSD_6_1:1.45.0.4
	OPENBSD_6_1_BASE:1.45
	OPENBSD_6_0:1.44.0.4
	OPENBSD_6_0_BASE:1.44
	OPENBSD_5_9:1.44.0.2
	OPENBSD_5_9_BASE:1.44
	OPENBSD_5_8:1.43.0.4
	OPENBSD_5_8_BASE:1.43
	OPENBSD_5_7:1.41.0.2
	OPENBSD_5_7_BASE:1.41
	OPENBSD_5_6:1.40.0.4
	OPENBSD_5_6_BASE:1.40
	OPENBSD_5_5:1.37.0.4
	OPENBSD_5_5_BASE:1.37
	OPENBSD_5_4:1.36.0.2
	OPENBSD_5_4_BASE:1.36
	OPENBSD_5_3:1.35.0.4
	OPENBSD_5_3_BASE:1.35
	OPENBSD_5_2:1.35.0.2
	OPENBSD_5_2_BASE:1.35
	OPENBSD_5_1_BASE:1.33
	OPENBSD_5_1:1.33.0.20
	OPENBSD_5_0:1.33.0.18
	OPENBSD_5_0_BASE:1.33
	OPENBSD_4_9:1.33.0.16
	OPENBSD_4_9_BASE:1.33
	OPENBSD_4_8:1.33.0.14
	OPENBSD_4_8_BASE:1.33
	OPENBSD_4_7:1.33.0.10
	OPENBSD_4_7_BASE:1.33
	OPENBSD_4_6:1.33.0.12
	OPENBSD_4_6_BASE:1.33
	OPENBSD_4_5:1.33.0.8
	OPENBSD_4_5_BASE:1.33
	OPENBSD_4_4:1.33.0.6
	OPENBSD_4_4_BASE:1.33
	OPENBSD_4_3:1.33.0.4
	OPENBSD_4_3_BASE:1.33
	OPENBSD_4_2:1.33.0.2
	OPENBSD_4_2_BASE:1.33
	OPENBSD_4_1:1.32.0.6
	OPENBSD_4_1_BASE:1.32
	OPENBSD_4_0:1.32.0.4
	OPENBSD_4_0_BASE:1.32
	OPENBSD_3_9:1.32.0.2
	OPENBSD_3_9_BASE:1.32
	OPENBSD_3_8:1.30.0.4
	OPENBSD_3_8_BASE:1.30
	OPENBSD_3_7:1.30.0.2
	OPENBSD_3_7_BASE:1.30
	OPENBSD_3_6:1.28.0.2
	OPENBSD_3_6_BASE:1.28
	OPENBSD_3_5:1.27.0.4
	OPENBSD_3_5_BASE:1.27
	OPENBSD_3_4:1.27.0.2
	OPENBSD_3_4_BASE:1.27
	OPENBSD_3_3:1.23.0.2
	OPENBSD_3_3_BASE:1.23
	OPENBSD_3_2:1.22.0.4
	OPENBSD_3_2_BASE:1.22
	OPENBSD_3_1:1.22.0.2
	OPENBSD_3_1_BASE:1.22
	OPENBSD_3_0:1.20.0.2
	OPENBSD_3_0_BASE:1.20
	OPENBSD_2_9_BASE:1.14
	OPENBSD_2_9:1.14.0.2
	OPENBSD_2_8:1.13.0.2
	OPENBSD_2_8_BASE:1.13
	OPENBSD_2_7:1.11.0.2
	OPENBSD_2_7_BASE:1.11
	OPENBSD_2_6:1.8.0.2
	OPENBSD_2_6_BASE:1.8
	OPENBSD_2_5:1.7.0.4
	OPENBSD_2_5_BASE:1.7
	OPENBSD_2_4:1.7.0.2
	OPENBSD_2_4_BASE:1.7
	OPENBSD_2_3:1.6.0.2
	OPENBSD_2_3_BASE:1.6
	OPENBSD_2_2:1.4.0.4
	OPENBSD_2_2_BASE:1.4
	OPENBSD_2_1:1.4.0.2
	OPENBSD_2_1_BASE:1.4
	OPENBSD_2_0:1.3.0.2
	OPENBSD_2_0_BASE:1.3
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@.\" @;


1.45
date	2016.08.19.10.57.24;	author danj;	state Exp;
branches;
next	1.44;
commitid	v5PhTHpnVOWwgbHn;

1.44
date	2015.11.26.19.01.47;	author deraadt;	state Exp;
branches;
next	1.43;
commitid	0NbTNVgy2y455HVw;

1.43
date	2015.07.27.17.28.39;	author sobrado;	state Exp;
branches;
next	1.42;
commitid	a73SHFfjDK7MTyGx;

1.42
date	2015.07.15.16.09.25;	author millert;	state Exp;
branches;
next	1.41;
commitid	EjABxyYT55KnRSzT;

1.41
date	2014.11.02.05.25.09;	author tedu;	state Exp;
branches;
next	1.40;
commitid	2RhFJEh0PtfJfVNh;

1.40
date	2014.05.19.17.07.16;	author jmc;	state Exp;
branches;
next	1.39;

1.39
date	2014.05.19.15.05.13;	author tedu;	state Exp;
branches;
next	1.38;

1.38
date	2014.04.24.19.07.54;	author jmc;	state Exp;
branches;
next	1.37;

1.37
date	2014.02.16.19.20.26;	author schwarze;	state Exp;
branches;
next	1.36;

1.36
date	2013.04.20.19.02.52;	author tedu;	state Exp;
branches;
next	1.35;

1.35
date	2012.06.20.21.32.27;	author schwarze;	state Exp;
branches;
next	1.34;

1.34
date	2012.06.19.10.53.40;	author jmc;	state Exp;
branches;
next	1.33;

1.33
date	2007.05.31.19.20.14;	author jmc;	state Exp;
branches;
next	1.32;

1.32
date	2005.12.18.12.29.26;	author biorn;	state Exp;
branches;
next	1.31;

1.31
date	2005.12.12.22.46.51;	author jmc;	state Exp;
branches;
next	1.30;

1.30
date	2005.03.07.22.51.46;	author jmc;	state Exp;
branches;
next	1.29;

1.29
date	2004.10.12.16.28.33;	author millert;	state Exp;
branches;
next	1.28;

1.28
date	2004.07.13.21.09.48;	author millert;	state Exp;
branches;
next	1.27;

1.27
date	2003.08.04.07.29.22;	author hin;	state Exp;
branches;
next	1.26;

1.26
date	2003.07.25.09.58.45;	author jmc;	state Exp;
branches;
next	1.25;

1.25
date	2003.06.10.09.12.11;	author jmc;	state Exp;
branches;
next	1.24;

1.24
date	2003.06.03.02.56.14;	author millert;	state Exp;
branches;
next	1.23;

1.23
date	2003.01.06.08.50.11;	author deraadt;	state Exp;
branches;
next	1.22;

1.22
date	2002.02.13.08.33.47;	author mpech;	state Exp;
branches;
next	1.21;

1.21
date	2002.01.24.20.33.45;	author mickey;	state Exp;
branches;
next	1.20;

1.20
date	2001.08.27.02.57.07;	author millert;	state Exp;
branches;
next	1.19;

1.19
date	2001.08.03.16.03.02;	author mpech;	state Exp;
branches;
next	1.18;

1.18
date	2001.07.06.17.16.35;	author millert;	state Exp;
branches;
next	1.17;

1.17
date	2001.06.26.20.22.52;	author hin;	state Exp;
branches;
next	1.16;

1.16
date	2001.06.23.05.57.07;	author deraadt;	state Exp;
branches;
next	1.15;

1.15
date	2001.06.23.02.33.16;	author deraadt;	state Exp;
branches;
next	1.14;

1.14
date	2000.11.09.17.52.28;	author aaron;	state Exp;
branches;
next	1.13;

1.13
date	2000.10.17.18.52.18;	author aaron;	state Exp;
branches;
next	1.12;

1.12
date	2000.08.01.22.30.53;	author provos;	state Exp;
branches;
next	1.11;

1.11
date	2000.04.15.11.45.55;	author aaron;	state Exp;
branches;
next	1.10;

1.10
date	2000.03.28.23.44.40;	author deraadt;	state Exp;
branches;
next	1.9;

1.9
date	2000.03.10.20.17.49;	author aaron;	state Exp;
branches;
next	1.8;

1.8
date	99.06.05.01.21.36;	author aaron;	state Exp;
branches;
next	1.7;

1.7
date	98.09.27.16.57.49;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	98.01.20.19.51.58;	author art;	state Exp;
branches;
next	1.5;

1.5
date	98.01.20.15.32.20;	author art;	state Exp;
branches;
next	1.4;

1.4
date	97.02.25.18.19.35;	author provos;	state Exp;
branches;
next	1.3;

1.3
date	96.06.26.05.37.47;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	96.01.16.07.22.14;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.45.54;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.45.54;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.45
log
@update man pages now that login.conf uses auto rounds

better wording/ok sthen@@ ok jmc@@
@
text
@.\"	$OpenBSD: passwd.1,v 1.44 2015/11/26 19:01:47 deraadt Exp $
.\"
.\" Copyright (c) 1990 The Regents of the University of California.
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"	from: @@(#)passwd.1	6.11 (Berkeley) 7/24/91
.\"
.Dd $Mdocdate: November 26 2015 $
.Dt PASSWD 1
.Os
.Sh NAME
.Nm passwd
.Nd modify a user's password
.Sh SYNOPSIS
.Nm passwd
.Op Ar user
.Sh DESCRIPTION
.Nm
changes the user's password.
If no
.Ar user
is specified, the user's login name is used (see
.Xr logname 1 ) .
First, the user is prompted for their current password.
If the current password is correctly typed, a new password is requested.
The new password must be entered twice to avoid typing errors.
.Pp
The new password should be at least six characters long and not
purely alphabetic.
Its total length must be less than
.Dv _PASSWORD_LEN
(currently 128 characters).
A mixture of both lower and uppercase letters, numbers, and
meta-characters is encouraged.
.Pp
The quality of the password can be enforced by specifying an external
checking program via the
.Dq passwordcheck
variable in
.Xr login.conf 5 .
.Pp
The superuser is not required to provide a user's current password
if only the local password is modified.
.Pp
Password encryption parameters depend on the configuration of the
.Dq localcipher
capability in
.Xr login.conf 5 .
If none is specified then blowfish is used, with the number of
rounds selected based on system performance.
.Sh FILES
.Bl -tag -width /etc/master.passwd -compact
.It Pa /etc/login.conf
configuration options
.It Pa /etc/master.passwd
user database
.It Pa /etc/passwd
user database, with confidential information removed
.It Pa /etc/passwd.XXXXXX
temporary copy of the password file
.It Pa /etc/ptmp
lock file for the passwd database
.El
.Sh DIAGNOSTICS
.Bl -diag
.It "Attempting to lock password file, please wait or press ^C to abort"
.Pp
The password file is currently locked by another process;
.Nm
will keep trying to lock the password file until it succeeds or
you hit the interrupt character (control-C by default).
If
.Nm
is interrupted while trying to gain the lock the password change will
be lost.
.Pp
If the process holding the lock was prematurely terminated the lock
file may be stale and
.Nm
will wait forever trying to lock the password file.
To determine whether a live process is actually holding the lock, the
admin may run the following:
.Bd -literal -offset indent
$ fstat /etc/ptmp
.Ed
.Pp
If no process is listed, it is safe to remove the
.Pa /etc/ptmp
file to clear the error.
.El
.Sh SEE ALSO
.Xr chpass 1 ,
.Xr encrypt 1 ,
.Xr logname 1 ,
.Xr login.conf 5 ,
.Xr passwd 5 ,
.Xr pwd_mkdb 8 ,
.Xr vipw 8
.Rs
.%A Robert Morris
.%A Ken Thompson
.%T Password security: a case history
.%J Communications of the ACM
.%V Volume 22
.%N Issue 11
.%D Nov. 1979
.%P 594\(en597
.Re
.Sh HISTORY
A
.Nm
command appeared in
.At v3 .
@


1.44
log
@Delete YP password related code.  As a result, these can also be
pledged.  Keep an eye out for regressions, because they could be
uncomfortable.
ok beck semarie
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.43 2015/07/27 17:28:39 sobrado Exp $
d32 1
a32 1
.Dd $Mdocdate: July 27 2015 $
d73 2
a74 1
If none is specified, then blowfish with 8 rounds is used.
@


1.43
log
@use file system path (.Pa) semantic markup macros where appropriate.

ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.42 2015/07/15 16:09:25 millert Exp $
d32 1
a32 1
.Dd $Mdocdate: July 15 2015 $
a39 1
.Op Fl l | y
d43 1
a43 1
changes the user's local or YP password.
a64 18
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl l
Causes the password to be updated only in the local password file.
When changing only the local password,
.Xr pwd_mkdb 8
is used to update the password databases.
.It Fl y
Forces the YP password database entry to be changed, even if
the user has an entry in the local database.
The
.Xr rpc.yppasswdd 8
daemon should be running on the YP master server.
.El
.Pp
If no flags are specified and the password is not in the local password
database, then an attempt is made to use the YP database.
@


1.42
log
@Describe the behavior when no user is specified.  OK jca@@ deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.41 2014/11/02 05:25:09 tedu Exp $
d32 1
a32 1
.Dd $Mdocdate: November 2 2014 $
d95 1
a95 1
.It /etc/login.conf
d103 1
a103 1
.It /etc/ptmp
@


1.41
log
@update documentation regarding localcipher only
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.40 2014/05/19 17:07:16 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate: May 19 2014 $
d45 4
d136 1
a136 1
.Xr login 1 ,
@


1.40
log
@no more -K;
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.39 2014/05/19 15:05:13 tedu Exp $
d84 3
a86 2
Which type of cipher is used to encrypt the password information
depends on the configuration in
d88 1
a88 10
It can be different for local
.Pq Dq localcipher
and YP
.Pq Dq ypcipher
passwords.
If none is specified, then blowfish with 6 rounds is used for local
.Pq Dq localcipher
and old is used for YP
.Pq Dq ypcipher
by default.
@


1.39
log
@kerberos leftovers
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.38 2014/04/24 19:07:54 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate: April 24 2014 $
d40 1
a40 1
.Op Fl K | l | y
@


1.38
log
@no more kinit(1);
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.37 2014/02/16 19:20:26 schwarze Exp $
d32 1
a32 1
.Dd $Mdocdate: February 16 2014 $
d44 1
a44 1
changes the user's local, Kerberos, or YP password.
a64 11
.It Fl K
Forces the change to affect the Kerberos 5 database, even
if the user has a password in the local database.
Once the password has been verified,
.Nm
communicates the new password information to the Kerberos authenticating host.
.Pp
The
.Ar user
argument specifies a principal and optional realm, for example
.Dq user@@DOMAIN.COM .
d78 2
a79 7
This is the behavior if no flags are specified:
if Kerberos is active then
.Nm
will talk to the Kerberos server (even if the user has an entry
in the local database).
If the password is not in the local password database, then
an attempt is made to use the YP database.
@


1.37
log
@fix bibliographical references; from Jan Stary <hans at stare dot cz>
feedback and ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.36 2013/04/20 19:02:52 tedu Exp $
d32 1
a32 1
.Dd $Mdocdate: April 20 2013 $
a155 1
.Xr kinit 1 ,
@


1.36
log
@Xr encrypt(1) to give people a hint if they just want a password string
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.35 2012/06/20 21:32:27 schwarze Exp $
d32 1
a32 1
.Dd $Mdocdate: June 20 2012 $
d165 6
a170 1
.%T "UNIX password security"
@


1.35
log
@Correct English just like jsing@@ did it in passwd/local_passwd.c rev. 1.38
on April 27, 2008.  While here, fix a typo and drop an obsolete BUGS section.

"my typo so OK millert@@ :-)" and OK jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.34 2012/06/19 10:53:40 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate: June 19 2012 $
d155 1
@


1.34
log
@sync the descriptions of /etc/passwd;

issue spotted by f5b
help/ok schwarze
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.33 2007/05/31 19:20:14 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate: May 31 2007 $
d128 1
a128 1
.It "Attempting lock password file, please wait or press ^C to abort"
d136 1
a136 1
is interrupted while trying to gain the lock the password changed will
@


1.33
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.32 2005/12/18 12:29:26 biorn Exp $
d32 1
a32 1
.Dd $Mdocdate$
d120 1
a120 1
a 6th Edition-style password file
@


1.32
log
@Indicate that the flags are exclusive, mention realm in the description
for K and remove an error case for kerberos that doesn't apply nowdays.

with jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.31 2005/12/12 22:46:51 jmc Exp $
d32 1
a32 1
.Dd July 24, 1991
@


1.31
log
@- simplify synopsis
- remove some .Bk/.Ek clutter
- sort options list
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.30 2005/03/07 22:51:46 jmc Exp $
d40 1
a40 1
.Op Fl Kly
d71 5
@


1.30
log
@simplify macro calls;
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.29 2004/10/12 16:28:33 millert Exp $
d40 1
a40 4
.Bk -words
.Op Fl l
.Op Fl y
.Op Fl K
a41 1
.Ek
d65 6
a81 6
.It Fl K
Forces the change to affect the Kerberos 5 database, even
if the user has a password in the local database.
Once the password has been verified,
.Nm
communicates the new password information to the Kerberos authenticating host.
@


1.29
log
@Actually, /etc/passwd is 6th Edition-style, not 7th.  The only real
diff between /etc/passwd in 6th and 7th was the crypt() algorithm
used and we no longer put encrypted passwords in /etc/passwd.
From Matthew Gregan; OK otto@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.28 2004/07/13 21:09:48 millert Exp $
d103 1
a103 1
.Po Do localcipher Dc Pc
d105 1
a105 1
.Po Do ypcipher Dc Pc
d108 1
a108 1
.Po Do localcipher Dc Pc
d110 1
a110 1
.Po Do ypcipher Dc Pc
@


1.28
log
@passwd.conf has been deprecated since login.conf was imported.
Today it finally dies.  Based on a diff from Gabriel Kihlman.
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.27 2003/08/04 07:29:22 hin Exp $
d119 1
a119 1
a Version 7 format password file
@


1.27
log
@Remove Kerberos 4 stuff.

ok deraadt@@ millert@@ henning@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.26 2003/07/25 09:58:45 jmc Exp $
d107 5
@


1.26
log
@remove some obsolete kerberosIV references;
ok hin@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.25 2003/06/10 09:12:11 jmc Exp $
a42 1
.Op Fl k
a43 4
.Op Fl n Ar name
.Op Fl i Ar instance
.Op Fl r Ar realm
.Op Fl u Ar username[.instance][@@realm]
a45 1
.\" This should really be: passwd [-l] [-y] [-k [-n name] [-i instance] [-r realm] [-u username[.instance][@@realm]]] [user]
d80 2
a81 2
.It Fl k
Forces the change to affect the Kerberos database, even
a87 26
The following flags are only used when the
.Fl k
flag is specified:
.Bl -tag -width flag
.It Fl n Ar name
Specifies a
.Ar name
that will be used as the principal name rather than the username
of the user running
.Nm passwd .
(This is determined from the ticket file if it exists; otherwise,
it is determined from the Unix user ID.)
.It Fl i Ar instance
Specifies an
.Ar instance
to use rather than a null instance.
.It Fl r Ar realm
Specifies a
.Ar realm
instead of the local realm.
.It Fl u Ar username[.instance][@@realm]
Specifies a fully qualified Kerberos principal.
.It Fl K Ar principal@@REALM
Changes a user's Kerberos password.
.El
.Pp
a95 4
To change another user's Kerberos password, one must first run
.Xr kinit 1
followed by
.Nm passwd .
@


1.25
log
@- section reorder
- COMPATIBILITY merge
- macro cleanup
- kill whitespace at EOL
- new sentence, new line

ssh pages ok markus@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.24 2003/06/03 02:56:14 millert Exp $
d54 1
a54 1
changes the user's local, KerberosIV, KerberosV, or YP password.
d87 1
a87 1
Forces the change to affect the KerberosIV database, even
d91 1
a91 1
communicates the new password information to the KerberosIV authenticating host.
d115 1
a115 1
Specifies a fully qualified KerberosIV principal.
d117 1
a117 1
Changes a users KerberosV password.
d121 1
a121 1
if KerberosIV is active then
d123 1
a123 1
will talk to the KerberosIV server (even if the user has an entry
d128 1
a128 1
To change another user's KerberosIV password, one must first run
a184 1
.Xr kerberos 1 ,
@


1.24
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.23 2003/01/06 08:50:11 deraadt Exp $
d40 1
d50 1
d131 1
a131 1
.Xr passwd 1 .
d143 13
a181 13
.El
.Sh FILES
.Bl -tag -width /etc/master.passwd -compact
.It /etc/login.conf
configuration options
.It Pa /etc/master.passwd
user database
.It Pa /etc/passwd
a Version 7 format password file
.It Pa /etc/passwd.XXXXXX
temporary copy of the password file
.It /etc/ptmp
lock file for the passwd database
@


1.23
log
@typo; jmc@@prioris.mini.pw.edu.pl
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.22 2002/02/13 08:33:47 mpech Exp $
d14 1
a14 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
@


1.22
log
@When you give command examples and etc., in a manual page prefix them with:
$ command
or
# command

deraadt@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.21 2002/01/24 20:33:45 mickey Exp $
d152 1
a152 1
you hit the interupt character (control-C by default).
@


1.21
log
@fix the history refs
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.20 2001/08/27 02:57:07 millert Exp $
d165 1
a165 1
fstat /etc/ptmp
@


1.20
log
@Instead of prompting the user whether or not they wish to continue to
wait for the lock on password file just tell the user to interrupt with
^C.  This simplifies the locking loop a bit.

Update man page to this effect.
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.19 2001/08/03 16:03:02 mpech Exp $
d203 1
a203 1
.At v6 .
@


1.19
log
@o) We always closes .Bl and .Bd tags;

millert@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.18 2001/07/06 17:16:35 millert Exp $
d147 16
a162 4
.It "The passwd file is busy..."
The password file is currently locked by another process, or a
process previously holding the lock was prematurely terminated.
To determine whether another process is holding the lock, the
d170 1
a170 1
file to get rid of this error.
@


1.18
log
@o We use login.conf for passwd(1) variables now, not passwd.conf
o Give detailed instructions on how to find a process holding the ptmp lock
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.17 2001/06/26 20:22:52 hin Exp $
d159 1
@


1.17
log
@KerberosV
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.16 2001/06/23 05:57:07 deraadt Exp $
d69 5
a73 3
The quality of the password can be enforced by providing an external
checking program in 
.Xr passwd.conf 5 .
d139 6
a144 2
.Xr passwd.conf 5 .
It can be different for local and YP passwords.
d147 1
a147 1
.It "the passwd file is busy"
d150 7
a156 1
In the latter case, it is safe to remove the
d161 2
a168 2
.It /etc/passwd.conf
configuration options
d177 1
a178 1
.Xr passwd.conf 5 ,
@


1.16
log
@ok, tmac is now fixed
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.15 2001/06/23 02:33:16 deraadt Exp $
d47 1
d56 1
a56 1
changes the user's local, Kerberos, or YP password.
d87 1
a87 1
Forces the change to affect the Kerberos database, even
d91 1
a91 1
communicates the new password information to the Kerberos authenticating host.
d115 3
a117 1
Specifies a fully qualified Kerberos principal.
d121 1
a121 1
if Kerberos is active then
d123 1
a123 1
will talk to the Kerberos server (even if the user has an entry
d128 1
a128 1
To change another user's Kerberos password, one must first run
@


1.15
log
@join .%A entries; most by bk@@rt.fm
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.14 2000/11/09 17:52:28 aaron Exp $
d167 2
a168 1
.%A Robert Morris and Ken Thompson
@


1.14
log
@Change all option list specifications to ".Bl -tag -width Ds". Most man
pages just needed their -width parameter tweaked to "Ds", which provides
a nice width of 6 constant characters. For consistency more than anything.
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.13 2000/10/17 18:52:18 aaron Exp $
d167 1
a167 2
.%A Robert Morris
.%A Ken Thompson
@


1.13
log
@- Add a DIAGNOSTICS section explaining "the passwd file is busy".
- Some other cleanups.
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.12 2000/08/01 22:30:53 provos Exp $
d73 1
a73 1
.Bl -tag -width flag
@


1.12
log
@talk about password checking
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.11 2000/04/15 11:45:55 aaron Exp $
d54 1
a54 1
.Nm passwd
d57 1
a57 2
If the current password is correctly typed, a new password is
requested.
d65 2
a66 2
Numbers, upper case letters and meta-characters
are encouraged.
d75 1
a75 2
Causes the password to be updated only in the local
password file.
d89 2
a90 3
.Nm passwd
communicates the new password information to
the Kerberos authenticating host.
d119 1
a119 1
.Nm passwd
d125 1
a125 2
To change another user's Kerberos password, one must first
run
d136 8
d154 2
d173 1
a173 1
.Nm passwd
@


1.11
log
@- For consistency, `super-user' -> `superuser' in all cases.
- Some punctuation fixes.
- Some `id' -> `ID'.
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.10 2000/03/28 23:44:40 deraadt Exp $
d68 4
@


1.10
log
@no kpasswdd
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.9 2000/03/10 20:17:49 aaron Exp $
d129 1
a129 1
The super-user is not required to provide a user's current password
@


1.9
log
@Various cleanups and standardization.
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.8 1999/06/05 01:21:36 aaron Exp $
a153 1
.Xr kpasswdd 8 ,
@


1.8
log
@- remove trailing white space
- remove arguments from .Os macros
- remove arguments from .Nm macros, where appropriate
- some more Dq/Sq/Ql insanity
- still lots to do in the usr.bin tree... :/
@
text
@d1 2
a2 1
.\"	$OpenBSD: passwd.1,v 1.7 1998/09/27 16:57:49 aaron Exp $
d55 2
a56 2
changes the user's local, Kerberos, or YP password.  First, the user is prompted
for their current password.
d68 2
d73 3
a75 2
password file.  When changing only the local password,
.Xr pwd_mkdb  8
d79 2
a80 1
the user has an entry in the local database.  The
d99 1
a99 1
that will be used as the principal name rather  than  the  username
d102 1
a102 1
(This is determined from the ticket file  if  it exists;  otherwise,
d113 1
a113 1
Specifies a fully qualified kerberos principal.
@


1.7
log
@usr.bin/ man page cleanups, n-s
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.6 1998/01/20 19:51:58 art Exp $
d37 1
a37 1
.Os BSD 4
d87 1
a87 1
The following flags are only used when the 
d92 1
a92 1
Specifies a 
d97 1
a97 1
(This is determined from the ticket file  if  it exists;  otherwise,  
d100 2
a101 2
Specifies an 
.Ar instance 
d129 1
a129 1
.Xr passwd.conf 5 . 
d135 1
a135 1
.It Pa /etc/passwd 
@


1.6
log
@specify the missing kerberos options.
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.5 1998/01/20 15:32:20 art Exp $
d53 1
a53 1
.Nm Passwd
d65 1
a65 1
Numbers, upper case letters and meta characters
d69 1
a69 1
This option causes the password to be updated only in the local
d74 1
a74 1
This forces the YP password database entry to be changed, even if
d79 1
a79 1
This option forces the change to affect the Kerberos database, even
d89 1
a89 1
flag is specified.
d91 3
a93 3
.It Fl n
This option lets you specify a 
.Nm name
d96 1
a96 1
.Nm passwd.
d98 4
a101 4
it is determined from the unix user id.)
.It Fl i
This option lets you specify an 
.Nm instance 
d103 3
a105 3
.It Fl r
This option lets you use
.Nm realm
d107 2
a108 2
.It Fl u
This option lets you specify a fully qualified kerberos principal.
d115 1
a115 1
in the local database.)
d134 1
a134 1
The user database
d136 1
a136 1
A Version 7 format password file
d138 1
a138 1
Temporary copy of the password file
d140 1
a140 1
Configuration options
@


1.5
log
@Use new method to change kerberos passwords.
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.4 1997/02/25 18:19:35 provos Exp $
d73 5
d85 24
a108 5
.It Fl y
This forces the YP password database entry to be changed, even if
the user has an entry in the local database.  The
.Xr rpc.yppasswdd 8
daemon should be running on the YP master server.
@


1.4
log
@include link to passwd.conf
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.3 1996/06/26 05:37:47 deraadt Exp $
d44 1
d46 4
a49 1
.Op Fl y
d51 1
@


1.3
log
@rcsid
@
text
@d1 1
a1 1
.\"	$OpenBSD: passwd.1,v 1.2 1996/01/16 07:22:14 deraadt Exp $
d97 5
d110 2
d119 1
@


1.2
log
@the yppasswd command is not needed. the user should always let the
passwd command figure out where their password is located. if they
really need to change a specific one, they can use the flags - bet
noone ever needs to use that.
@
text
@d1 1
a33 1
.\"	$Id: passwd.1,v 1.1.1.1 1995/10/18 08:45:54 deraadt Exp $
@


1.1
log
@Initial revision
@
text
@d33 1
a33 1
.\"	$Id: passwd.1,v 1.5 1995/02/12 17:45:56 phil Exp $
a46 2
.Nm yppasswd
.Op Ar user
a79 6
.Nm yppasswd
is the equivalent of
.Nm passwd
with the
.Fl y
flag.
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
