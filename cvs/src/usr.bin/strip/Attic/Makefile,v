head	1.13;
access;
symbols
	OPENBSD_5_3:1.11.0.36
	OPENBSD_5_3_BASE:1.11
	OPENBSD_5_2:1.11.0.34
	OPENBSD_5_2_BASE:1.11
	OPENBSD_5_1_BASE:1.11
	OPENBSD_5_1:1.11.0.32
	OPENBSD_5_0:1.11.0.30
	OPENBSD_5_0_BASE:1.11
	OPENBSD_4_9:1.11.0.28
	OPENBSD_4_9_BASE:1.11
	OPENBSD_4_8:1.11.0.26
	OPENBSD_4_8_BASE:1.11
	OPENBSD_4_7:1.11.0.22
	OPENBSD_4_7_BASE:1.11
	OPENBSD_4_6:1.11.0.24
	OPENBSD_4_6_BASE:1.11
	OPENBSD_4_5:1.11.0.20
	OPENBSD_4_5_BASE:1.11
	OPENBSD_4_4:1.11.0.18
	OPENBSD_4_4_BASE:1.11
	OPENBSD_4_3:1.11.0.16
	OPENBSD_4_3_BASE:1.11
	OPENBSD_4_2:1.11.0.14
	OPENBSD_4_2_BASE:1.11
	OPENBSD_4_1:1.11.0.12
	OPENBSD_4_1_BASE:1.11
	OPENBSD_4_0:1.11.0.10
	OPENBSD_4_0_BASE:1.11
	OPENBSD_3_9:1.11.0.8
	OPENBSD_3_9_BASE:1.11
	OPENBSD_3_8:1.11.0.6
	OPENBSD_3_8_BASE:1.11
	OPENBSD_3_7:1.11.0.4
	OPENBSD_3_7_BASE:1.11
	OPENBSD_3_6:1.11.0.2
	OPENBSD_3_6_BASE:1.11
	OPENBSD_3_5:1.9.0.18
	OPENBSD_3_5_BASE:1.9
	OPENBSD_3_4:1.9.0.16
	OPENBSD_3_4_BASE:1.9
	OPENBSD_3_3:1.9.0.14
	OPENBSD_3_3_BASE:1.9
	OPENBSD_3_2:1.9.0.12
	OPENBSD_3_2_BASE:1.9
	OPENBSD_3_1:1.9.0.10
	OPENBSD_3_1_BASE:1.9
	OPENBSD_3_0:1.9.0.8
	OPENBSD_3_0_BASE:1.9
	OPENBSD_2_9_BASE:1.9
	OPENBSD_2_9:1.9.0.6
	OPENBSD_2_8:1.9.0.4
	OPENBSD_2_8_BASE:1.9
	OPENBSD_2_7:1.9.0.2
	OPENBSD_2_7_BASE:1.9
	OPENBSD_2_6:1.8.0.2
	OPENBSD_2_6_BASE:1.8
	OPENBSD_2_5:1.7.0.4
	OPENBSD_2_5_BASE:1.7
	OPENBSD_2_4:1.7.0.2
	OPENBSD_2_4_BASE:1.7
	OPENBSD_2_3:1.6.0.6
	OPENBSD_2_3_BASE:1.6
	OPENBSD_2_2:1.6.0.4
	OPENBSD_2_2_BASE:1.6
	OPENBSD_2_1:1.6.0.2
	OPENBSD_2_1_BASE:1.6
	OPENBSD_2_0:1.2.0.2
	OPENBSD_2_0_BASE:1.2
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.13
date	2013.07.05.21.38.37;	author miod;	state dead;
branches;
next	1.12;

1.12
date	2013.03.15.06.01.42;	author deraadt;	state Exp;
branches;
next	1.11;

1.11
date	2004.07.12.10.44.11;	author miod;	state Exp;
branches;
next	1.10;

1.10
date	2004.03.31.21.22.06;	author mickey;	state Exp;
branches;
next	1.9;

1.9
date	2000.02.05.08.43.17;	author niklas;	state Exp;
branches;
next	1.8;

1.8
date	99.05.10.16.14.07;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	98.05.11.07.41.23;	author niklas;	state Exp;
branches;
next	1.6;

1.6
date	97.04.27.20.56.54;	author millert;	state Exp;
branches;
next	1.5;

1.5
date	97.02.13.00.12.07;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	97.02.11.17.42.51;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	96.12.08.14.32.35;	author downsj;	state Exp;
branches;
next	1.2;

1.2
date	96.06.26.05.39.31;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.46.09;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.46.09;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.13
log
@Remove usr.bin/strip and usr.bin/strings, no longer built.
@
text
@#	$OpenBSD: Makefile,v 1.12 2013/03/15 06:01:42 deraadt Exp $

.include <bsd.own.mk>
.if (${ELF_TOOLCHAIN:L} == "no")

TARGET_MACHINE_ARCH?=	${MACHINE_ARCH}

PROG=	strip

CFLAGS+=-I${.CURDIR}/../nm
.if ${TARGET_MACHINE_ARCH} != ${MACHINE_ARCH}
# XXX should make this automatic
.if ${TARGET_MACHINE_ARCH} == "i386"
CFLAGS+=	-DMID_MACHINE_OVERRIDE=MID_I386
.elif ${TARGET_MACHINE_ARCH} == "m68k"
CFLAGS+=	-DMID_MACHINE_OVERRIDE=MID_M68K
CPPFLAGS+=-I.
beforedepend:
	ln -sf ${.CURDIR}/../../sys/arch/m68k/include m68k
.elif ${TARGET_MACHINE_ARCH} == "m88k"
CFLAGS+=	-DMID_MACHINE_OVERRIDE=MID_M88K
CPPFLAGS+=-I.
beforedepend:
	ln -sf ${.CURDIR}/../../sys/arch/m88k/include m88k
.elif ${TARGET_MACHINE_ARCH} == "ns32k"
CFLAGS+=	-DMID_MACHINE_OVERRIDE=MID_NS32K
.elif ${TARGET_MACHINE_ARCH} == "sparc"
CFLAGS+=	-DMID_MACHINE_OVERRIDE=MID_SPARC
.elif ${TARGET_MACHINE_ARCH} == "vax"
CFLAGS+=	-DMID_MACHINE_OVERRIDE=MID_VAX
.endif
STRIP=	/usr/bin/strip

.elif ${HOSTCC} != ${CC}
STRIP=./hoststrip

realinstall strip: hoststrip

hoststrip: strip.c
	${HOSTCC} -I${.CURDIR}/../nm ${.CURDIR}/strip.c -o hoststrip
.else
STRIP=./strip
.endif

realinstall:
	${INSTALL} ${INSTALL_COPY} -o ${BINOWN} -g ${BINGRP} -m 600 strip \
	    ${DESTDIR}${BINDIR}
	${STRIP} ${DESTDIR}${BINDIR}/strip
	chmod ${BINMODE} ${DESTDIR}${BINDIR}/strip
	-if [ "${INSTALL_COPY}" = "" ]; then rm -f ${STRIP}; fi

.endif

.include <bsd.prog.mk>
@


1.12
log
@Enter more directories, and put the conditional down below.  This is
for obj dirs...
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.11 2004/07/12 10:44:11 miod Exp $
@


1.11
log
@m88k cross-compile goo.
@
text
@d1 4
a4 1
#	$OpenBSD: Makefile,v 1.10 2004/03/31 21:22:06 mickey Exp $
d51 2
@


1.10
log
@allow cross-compiling for m68k and better usage(); miod@@ ok
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.9 2000/02/05 08:43:17 niklas Exp $
d17 5
@


1.9
log
@Make hoststrip build correctly if cross-compiling
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 1999/05/10 16:14:07 espie Exp $
d14 3
@


1.8
log
@Fixes endianess problems with old a.out tools. This makes building
some cross toolchains possible.

This also changes some utilities's behavior slightly:
- nm, strip, size now handle any a.out format they know about.
- ranlib complains if it detects mixed archives (several object
formats for different boxes).

In the presence of mixed objects, you still have file, ranlib or ld
to prevent you from getting too confused...
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 1998/05/11 07:41:23 niklas Exp $
d26 1
a26 1
realinstall: hoststrip
d29 1
a29 1
	${HOSTCC} ${.CURDIR}/strip.c -o hoststrip
@


1.7
log
@Support building for cross purposes
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.6 1997/04/27 20:56:54 millert Exp $
d7 1
@


1.6
log
@COPY -> INSTALL_COPY and STRIP -> INSTALL_STRIP
This fixes namespace problems where STRIP is sometimes used as
the name of the strip(1) to use and other times used as
the flag to send install(1) when stripping (or not).
COPY doesn't have this problem (yet) but was poorly named.
@
text
@d1 3
a3 1
#	$OpenBSD: Makefile,v 1.5 1997/02/13 00:12:07 deraadt Exp $
d6 17
a22 1
.if ${HOSTCC} != ${CC}
@


1.5
log
@ok, this time the $HOSTCC stuff works correctly
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 1997/02/11 17:42:51 deraadt Exp $
d16 1
a16 1
	${INSTALL} ${COPY} -o ${BINOWN} -g ${BINGRP} -m 600 strip \
d20 1
a20 1
	-if [ "${COPY}" = "" ]; then rm -f ${STRIP}; fi
@


1.4
log
@build hoststrip for install purposes; noted by tv@@slack.iag.net, pr #88
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.3 1996/12/08 14:32:35 downsj Exp $
d7 1
a7 1
realinstall:: hoststrip
d10 1
a10 1
	${HOSTCC} strip.c -o hoststrip
@


1.3
log
@install -> ${INSTALL}, -c -> ${COPY}
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.2 1996/06/26 05:39:31 deraadt Exp $
d4 10
d18 1
a18 1
	./strip ${DESTDIR}${BINDIR}/strip
d20 1
a20 1
	-if [ "${COPY}" = "" ]; then rm -f ./strip; fi
@


1.2
log
@rcsid
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.1.1.1 1995/10/18 08:46:09 deraadt Exp $
d6 1
a6 1
	install -c -o ${BINOWN} -g ${BINGRP} -m 600 strip \
@


1.1
log
@Initial revision
@
text
@d1 1
a1 2
#	from: @@(#)Makefile	5.4 (Berkeley) 5/11/90
#	$Id: Makefile,v 1.10 1995/06/10 20:56:34 mycroft Exp $
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
