head	1.9;
access;
symbols
	OPENBSD_6_2:1.9.0.28
	OPENBSD_6_2_BASE:1.9
	OPENBSD_6_1:1.9.0.30
	OPENBSD_6_1_BASE:1.9
	OPENBSD_6_0:1.9.0.26
	OPENBSD_6_0_BASE:1.9
	OPENBSD_5_9:1.9.0.22
	OPENBSD_5_9_BASE:1.9
	OPENBSD_5_8:1.9.0.24
	OPENBSD_5_8_BASE:1.9
	OPENBSD_5_7:1.9.0.16
	OPENBSD_5_7_BASE:1.9
	OPENBSD_5_6:1.9.0.20
	OPENBSD_5_6_BASE:1.9
	OPENBSD_5_5:1.9.0.18
	OPENBSD_5_5_BASE:1.9
	OPENBSD_5_4:1.9.0.14
	OPENBSD_5_4_BASE:1.9
	OPENBSD_5_3:1.9.0.12
	OPENBSD_5_3_BASE:1.9
	OPENBSD_5_2:1.9.0.10
	OPENBSD_5_2_BASE:1.9
	OPENBSD_5_1_BASE:1.9
	OPENBSD_5_1:1.9.0.8
	OPENBSD_5_0:1.9.0.6
	OPENBSD_5_0_BASE:1.9
	OPENBSD_4_9:1.9.0.4
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.9.0.2
	OPENBSD_4_8_BASE:1.9
	OPENBSD_4_7:1.8.0.2
	OPENBSD_4_7_BASE:1.8
	OPENBSD_4_6:1.7.0.12
	OPENBSD_4_6_BASE:1.7
	OPENBSD_4_5:1.7.0.8
	OPENBSD_4_5_BASE:1.7
	OPENBSD_4_4:1.7.0.6
	OPENBSD_4_4_BASE:1.7
	OPENBSD_4_3:1.7.0.4
	OPENBSD_4_3_BASE:1.7
	OPENBSD_4_2:1.7.0.2
	OPENBSD_4_2_BASE:1.7
	OPENBSD_4_1:1.6.0.2
	OPENBSD_4_1_BASE:1.6
	OPENBSD_4_0:1.4.0.2
	OPENBSD_4_0_BASE:1.4;
locks; strict;
comment	@ * @;


1.9
date	2010.07.23.21.46.05;	author ray;	state Exp;
branches;
next	1.8;

1.8
date	2009.07.14.14.09.46;	author jsg;	state Exp;
branches;
next	1.7;

1.7
date	2007.07.03.00.56.23;	author ray;	state Exp;
branches;
next	1.6;

1.6
date	2007.02.27.07.59.13;	author xsa;	state Exp;
branches;
next	1.5;

1.5
date	2006.09.21.15.30.07;	author millert;	state Exp;
branches;
next	1.4;

1.4
date	2006.05.15.06.58.03;	author xsa;	state Exp;
branches;
next	1.3;

1.3
date	2006.05.08.18.36.04;	author xsa;	state Exp;
branches;
next	1.2;

1.2
date	2006.05.05.15.47.36;	author xsa;	state Exp;
branches;
next	1.1;

1.1
date	2006.04.26.02.55.13;	author joris;	state Exp;
branches;
next	;


desc
@@


1.9
log
@Reduce variable/function name and whitespace differences between
cvs/rcs.

OK xsa zinovik
@
text
@/*	$OpenBSD: diff.h,v 1.8 2009/07/14 14:09:46 jsg Exp $	*/
/*
 * Copyright (C) Caldera International Inc.  2001-2002.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code and documentation must retain the above
 *    copyright notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. All advertising materials mentioning features or use of this software
 *    must display the following acknowledgement:
 *	This product includes software developed or owned by Caldera
 *	International, Inc.
 * 4. Neither the name of Caldera International, Inc. nor the names of other
 *    contributors may be used to endorse or promote products derived from
 *    this software without specific prior written permission.
 *
 * USE OF THE SOFTWARE PROVIDED FOR UNDER THIS LICENSE BY CALDERA
 * INTERNATIONAL, INC. AND CONTRIBUTORS ``AS IS'' AND ANY EXPRESS OR
 * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
 * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL CALDERA INTERNATIONAL, INC. BE LIABLE FOR ANY DIRECT,
 * INDIRECT INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
 * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
 * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */
/*-
 * Copyright (c) 1991, 1993
 *	The Regents of the University of California.  All rights reserved.
 * Copyright (c) 2004 Jean-Francois Brousseau.  All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. Neither the name of the University nor the names of its contributors
 *    may be used to endorse or promote products derived from this software
 *    without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
 * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 *
 *	@@(#)diffreg.c   8.1 (Berkeley) 6/6/93
 */
#ifndef DIFF_H
#define DIFF_H

#include <sys/queue.h>

#include <regex.h>

#include "buf.h"
#include "rcs.h"

/*
 * Output format options
 */
#define	D_NORMAL	0	/* Normal output */
#define	D_CONTEXT	1	/* Diff with context */
#define	D_UNIFIED	2	/* Unified context diff */
#define	D_IFDEF		3	/* Diff with merged #ifdef's */
#define	D_BRIEF		4	/* Say if the files differ */
#define	D_RCSDIFF	5       /* Reverse editor output: RCS format */

/*
 * Command line flags
 */
#define	D_FORCEASCII	0x01	/* Treat file as ascii regardless of content */
#define	D_FOLDBLANKS	0x02	/* Treat all white space as equal */
#define	D_MINIMAL	0x04	/* Make diff as small as possible */
#define	D_IGNORECASE	0x08	/* Case-insensitive matching */
#define	D_PROTOTYPE	0x10	/* Display C function prototype */
#define	D_EXPANDTABS	0x20	/* Expand tabs to spaces */
#define	D_IGNOREBLANKS	0x40	/* Ignore white space changes */

/*
 * Status values for diffreg() return values
 */
#define	D_SAME		0	/* Files are the same */
#define	D_DIFFER	1	/* Files are different */
#define	D_ERROR		2	/* An error occurred */

/*
 * Status values for rcs_diff3() return values
 */
#define D_OVERLAPS	1	/* Overlaps during merge */

struct rcs_lines;

BUF		*rcs_diff3(RCSFILE *, char *, RCSNUM *, RCSNUM *, int);
BUF		*merge_diff3(char **, int);
void		diff_output(const char *, ...);
int		diffreg(const char *, const char *, BUF *, int);
int		ed_patch_lines(struct rcs_lines *, struct rcs_lines *);

extern int       diff_context;
extern int       diff_format;
extern int	 diff3_conflicts;
extern char	*diff_file;
extern char	 diffargs[512]; /* XXX */
extern BUF	*diffbuf;
extern RCSNUM	*diff_rev1;
extern RCSNUM	*diff_rev2;
extern regex_t	*diff_ignore_re;

#endif	/* DIFF_H */
@


1.8
log
@don't use both extern and static decls for a variable.
ok millert@@
@
text
@d1 1
a1 1
/*	$OpenBSD: diff.h,v 1.7 2007/07/03 00:56:23 ray Exp $	*/
d66 2
a67 3

#ifndef RCS_DIFF_H
#define RCS_DIFF_H
d127 1
a127 1
#endif	/* RCS_DIFF_H */
@


1.7
log
@Rename rcs_diffreg() to diffreg().

OK joris@@
@
text
@d1 1
a1 1
/*	$OpenBSD: diff.h,v 1.6 2007/02/27 07:59:13 xsa Exp $	*/
d121 1
a121 1
extern char	*diff_file, *diff_ignore_pats;
@


1.6
log
@As done in OpenCVS, general includes cleanup sweep. OK otto@@.
@
text
@d1 1
a1 1
/*	$OpenBSD: diff.h,v 1.5 2006/09/21 15:30:07 millert Exp $	*/
d99 1
a99 1
 * Status values for rcs_diffreg() return values
d115 1
a115 1
int		rcs_diffreg(const char *, const char *, BUF *, int);
@


1.5
log
@Add support to rcsdiff for all the other diff flags that
are pertinent to files (not directories) and that do not
conflict with rcsdiff-specific flags.  OK xsa@@
@
text
@d1 1
a1 1
/*	$OpenBSD: diff.h,v 1.4 2006/05/15 06:58:03 xsa Exp $	*/
d69 4
@


1.4
log
@missing bits for a working merge(1). Built and enabled.
OK joris@@ ray@@.
@
text
@d1 1
a1 1
/*	$OpenBSD: diff.h,v 1.3 2006/05/08 18:36:04 xsa Exp $	*/
d84 11
d111 1
a111 1
int		rcs_diffreg(const char *, const char *, BUF *);
d114 1
d117 2
a118 2
extern char	*diff_file;
extern char	 diffargs[128];
d122 1
@


1.3
log
@properly handle exit code 1; OK ray@@.
@
text
@d1 1
a1 1
/*	$OpenBSD: diff.h,v 1.2 2006/05/05 15:47:36 xsa Exp $	*/
d98 1
@


1.2
log
@- fix rcsdiff exit status on success/errors; now matches gnu/usr.bin/rcs.
- add DIAGNOSTICS section to rcsdiff.1 wrt exit codes.
ok ray@@ and jmc@@ for man page bits.
@
text
@d1 1
a1 1
/*	$OpenBSD: diff.h,v 1.1 2006/04/26 02:55:13 joris Exp $	*/
d89 5
@


1.1
log
@fork our code we shared between openrcs/cvs into the openrcs dir.

this was starting to become inhuman to maintain without
ugly ugly hacks in the shared code, and it will be easier
to make specific changes for openrcs without touching the
soon-to-be-replaced opencvs code.
@
text
@d1 1
a1 1
/*	$OpenBSD: diff.h,v 1.10 2006/04/14 23:29:01 joris Exp $	*/
d67 2
a68 2
#ifndef CVS_DIFF_H
#define CVS_DIFF_H
a72 2
#define CVS_DIFF_DEFCTX	3	/* default context length */

d88 1
a88 8
#define	D_BINARY	2	/* Binary files are different */
#define	D_COMMON	3	/* Subdirectory common to both dirs */
#define	D_ONLY		4	/* Only exists in one directory */
#define	D_MISMATCH1	5	/* path1 was a dir, path2 a file */
#define	D_MISMATCH2	6	/* path1 was a file, path2 a dir */
#define	D_ERROR		7	/* An error occurred */
#define	D_SKIPPED1	8	/* path1 was a special file */
#define	D_SKIPPED2	9	/* path2 was a special file */
d105 1
a105 1
#endif
@

