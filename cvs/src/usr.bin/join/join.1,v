head	1.23;
access;
symbols
	OPENBSD_6_2_BASE:1.23
	OPENBSD_6_1:1.23.0.16
	OPENBSD_6_1_BASE:1.23
	OPENBSD_6_0:1.23.0.12
	OPENBSD_6_0_BASE:1.23
	OPENBSD_5_9:1.23.0.8
	OPENBSD_5_9_BASE:1.23
	OPENBSD_5_8:1.23.0.10
	OPENBSD_5_8_BASE:1.23
	OPENBSD_5_7:1.23.0.2
	OPENBSD_5_7_BASE:1.23
	OPENBSD_5_6:1.23.0.6
	OPENBSD_5_6_BASE:1.23
	OPENBSD_5_5:1.23.0.4
	OPENBSD_5_5_BASE:1.23
	OPENBSD_5_4:1.22.0.12
	OPENBSD_5_4_BASE:1.22
	OPENBSD_5_3:1.22.0.10
	OPENBSD_5_3_BASE:1.22
	OPENBSD_5_2:1.22.0.8
	OPENBSD_5_2_BASE:1.22
	OPENBSD_5_1_BASE:1.22
	OPENBSD_5_1:1.22.0.6
	OPENBSD_5_0:1.22.0.4
	OPENBSD_5_0_BASE:1.22
	OPENBSD_4_9:1.22.0.2
	OPENBSD_4_9_BASE:1.22
	OPENBSD_4_8:1.21.0.8
	OPENBSD_4_8_BASE:1.21
	OPENBSD_4_7:1.21.0.4
	OPENBSD_4_7_BASE:1.21
	OPENBSD_4_6:1.21.0.6
	OPENBSD_4_6_BASE:1.21
	OPENBSD_4_5:1.21.0.2
	OPENBSD_4_5_BASE:1.21
	OPENBSD_4_4:1.20.0.6
	OPENBSD_4_4_BASE:1.20
	OPENBSD_4_3:1.20.0.4
	OPENBSD_4_3_BASE:1.20
	OPENBSD_4_2:1.20.0.2
	OPENBSD_4_2_BASE:1.20
	OPENBSD_4_1:1.17.0.2
	OPENBSD_4_1_BASE:1.17
	OPENBSD_4_0:1.16.0.2
	OPENBSD_4_0_BASE:1.16
	OPENBSD_3_9:1.15.0.10
	OPENBSD_3_9_BASE:1.15
	OPENBSD_3_8:1.15.0.8
	OPENBSD_3_8_BASE:1.15
	OPENBSD_3_7:1.15.0.6
	OPENBSD_3_7_BASE:1.15
	OPENBSD_3_6:1.15.0.4
	OPENBSD_3_6_BASE:1.15
	OPENBSD_3_5:1.15.0.2
	OPENBSD_3_5_BASE:1.15
	OPENBSD_3_4:1.13.0.2
	OPENBSD_3_4_BASE:1.13
	OPENBSD_3_3:1.11.0.10
	OPENBSD_3_3_BASE:1.11
	OPENBSD_3_2:1.11.0.8
	OPENBSD_3_2_BASE:1.11
	OPENBSD_3_1:1.11.0.6
	OPENBSD_3_1_BASE:1.11
	OPENBSD_3_0:1.11.0.4
	OPENBSD_3_0_BASE:1.11
	OPENBSD_2_9_BASE:1.11
	OPENBSD_2_9:1.11.0.2
	OPENBSD_2_8:1.9.0.4
	OPENBSD_2_8_BASE:1.9
	OPENBSD_2_7:1.9.0.2
	OPENBSD_2_7_BASE:1.9
	OPENBSD_2_6:1.6.0.2
	OPENBSD_2_6_BASE:1.6
	OPENBSD_2_5:1.5.0.4
	OPENBSD_2_5_BASE:1.5
	OPENBSD_2_4:1.5.0.2
	OPENBSD_2_4_BASE:1.5
	OPENBSD_2_3:1.4.0.6
	OPENBSD_2_3_BASE:1.4
	OPENBSD_2_2:1.4.0.4
	OPENBSD_2_2_BASE:1.4
	OPENBSD_2_1:1.4.0.2
	OPENBSD_2_1_BASE:1.4
	OPENBSD_2_0:1.3.0.2
	OPENBSD_2_0_BASE:1.3
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@.\" @;


1.23
date	2014.01.19.23.56.06;	author schwarze;	state Exp;
branches;
next	1.22;

1.22
date	2010.09.03.11.09.29;	author jmc;	state Exp;
branches;
next	1.21;

1.21
date	2009.02.08.17.15.10;	author jmc;	state Exp;
branches;
next	1.20;

1.20
date	2007.05.31.19.20.11;	author jmc;	state Exp;
branches;
next	1.19;

1.19
date	2007.05.30.04.41.34;	author jmc;	state Exp;
branches;
next	1.18;

1.18
date	2007.05.29.18.29.26;	author jmc;	state Exp;
branches;
next	1.17;

1.17
date	2006.12.28.11.27.41;	author jmc;	state Exp;
branches;
next	1.16;

1.16
date	2006.05.02.05.21.41;	author hugh;	state Exp;
branches;
next	1.15;

1.15
date	2003.12.28.19.53.23;	author otto;	state Exp;
branches;
next	1.14;

1.14
date	2003.12.12.10.38.44;	author otto;	state Exp;
branches;
next	1.13;

1.13
date	2003.06.10.09.12.10;	author jmc;	state Exp;
branches;
next	1.12;

1.12
date	2003.06.03.02.56.09;	author millert;	state Exp;
branches;
next	1.11;

1.11
date	2000.11.10.05.10.30;	author aaron;	state Exp;
branches;
next	1.10;

1.10
date	2000.11.09.17.52.15;	author aaron;	state Exp;
branches;
next	1.9;

1.9
date	2000.03.08.03.11.29;	author aaron;	state Exp;
branches;
next	1.8;

1.8
date	2000.03.05.00.28.53;	author aaron;	state Exp;
branches;
next	1.7;

1.7
date	2000.03.04.22.19.24;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	99.07.04.11.53.55;	author aaron;	state Exp;
branches;
next	1.5;

1.5
date	98.09.26.19.54.55;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	97.01.15.00.01.22;	author millert;	state Exp;
branches;
next	1.3;

1.3
date	96.08.12.02.32.32;	author michaels;	state Exp;
branches;
next	1.2;

1.2
date	96.06.26.05.34.39;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.45.26;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.45.26;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.23
log
@Fix .Ar macro abuse; found with mandocdb(8).
@
text
@.\"	$OpenBSD: join.1,v 1.22 2010/09/03 11:09:29 jmc Exp $
.\"
.\" Copyright (c) 1990, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" This code is derived from software contributed to Berkeley by
.\" the Institute of Electrical and Electronics Engineers, Inc.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"	@@(#)join.1	8.3 (Berkeley) 4/28/95
.\"
.Dd $Mdocdate: September 3 2010 $
.Dt JOIN 1
.Os
.Sh NAME
.Nm join
.Nd relational database operator
.Sh SYNOPSIS
.Nm join
.Op Fl 1 Ar field
.Op Fl 2 Ar field
.Oo
.Fl a Ar file_number | Fl v Ar file_number
.Oc
.Op Fl e Ar string
.Op Fl o Ar list
.Op Fl t Ar char
.Ar file1
.Ar file2
.Sh DESCRIPTION
The
.Nm
utility performs an
.Dq equality join
on the specified files
and writes the result to the standard output.
The
.Dq join field
is the field in each file by which the files are compared.
The first field in each line is used by default.
There is one line in the output for each pair of lines in
.Ar file1
and
.Ar file2
which have identical join fields.
Each output line consists of the join field, the remaining fields from
.Ar file1
and then the remaining fields from
.Ar file2 .
.Pp
The default field separators are tab and space characters.
In this case, multiple tabs and spaces count as a single field separator,
and leading tabs and spaces are ignored.
The default output field separator is a single space character.
.Pp
Many of the options use file and field numbers.
Both file numbers and field numbers are 1 based, i.e., the first file on
the command line is file number 1 and the first field is field number 1.
.Pp
When the default field delimiter characters are used, the files to be joined
should be ordered in the collating sequence of
.Xr sort 1 ,
using the
.Fl b
option, on the fields on which they are to be joined, otherwise
.Nm
may not report all field matches.
When the field delimiter characters are specified by the
.Fl t
option, the collating sequence should be the same as
.Xr sort 1
without the
.Fl b
option.
.Pp
If one of the arguments
.Ar file1
or
.Ar file2
is
.Sq - ,
the standard input is used.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl 1 Ar field
Join on the
.Ar field Ns 'th
field of
.Ar file1 .
.It Fl 2 Ar field
Join on the
.Ar field Ns 'th
field of
.Ar file2 .
.It Fl a Ar file_number
In addition to the default output, produce a line for each unpairable
line in file
.Ar file_number .
.It Fl e Ar string
Replace empty output fields with
.Ar string .
.It Fl o Ar list
Specifies the fields that will be output from each file for
each line with matching join fields.
Each element of
.Ar list
has the form
.Dq file_number.field ,
where
.Ar file_number
is a file number and
.Ar field
is a field number,
or the form
.Dq 0
(zero),
representing the join field.
The elements of list must be either comma
.Pq Ql \&,
or whitespace separated.
(The latter requires quoting to protect it from the shell, or a simpler
approach is to use multiple
.Fl o
options.)
.It Fl t Ar char
Use character
.Ar char
as a field delimiter for both input and output.
Every occurrence of
.Ar char
in a line is significant.
.It Fl v Ar file_number
Do not display the default output, but display a line for each unpairable
line in file
.Ar file_number .
The options
.Fl v Cm 1
and
.Fl v Cm 2
may be specified at the same time.
.El
.Sh EXIT STATUS
.Ex -std join
.Sh SEE ALSO
.Xr awk 1 ,
.Xr comm 1 ,
.Xr lam 1 ,
.Xr paste 1 ,
.Xr sort 1 ,
.Xr uniq 1
.Sh STANDARDS
The
.Nm
utility is compliant with the
.St -p1003.1-2008
specification.
.Pp
In the absence of the
.Fl o
option,
historical versions of
.Nm
wrote non-matching lines without reordering the fields.
The current version writes the join field first, followed by the
remaining fields.
.Pp
For compatibility with historical versions of
.Nm join ,
the following options are available:
.Bl -tag -width Fl
.It Fl a
In addition to the default output, produce a line for each unpairable line
in both
.Ar file1
and
.Ar file2 .
.It Fl j Ar field
Join on the
.Ar field Ns 'th
field of both
.Ar file1
and
.Ar file2 .
.It Fl j1 Ar field
Join on the
.Ar field Ns 'th
field of
.Ar file1 .
.It Fl j2 Ar field
Join on the
.Ar field Ns 'th
field of
.Ar file2 .
.It Fl o Ar list ...
Historical implementations of
.Nm
permitted multiple arguments to the
.Fl o
option.
These arguments were of the form
.Dq file_number.field_number
as described for the current
.Fl o
option.
This has obvious difficulties in the presence of files named
.Dq 1.2 .
.El
.Pp
These options are available only so historical shell scripts don't require
modification and should not be used.
.Sh HISTORY
A
.Nm
utility appeared in
.At v7 .
@


1.22
log
@add an EXIT STATUS section for /usr/bin;
@
text
@d1 1
a1 1
.\"	$OpenBSD: join.1,v 1.21 2009/02/08 17:15:10 jmc Exp $
d35 1
a35 1
.Dd $Mdocdate: February 8 2009 $
d161 1
a161 1
.Fl v Ar 1
d163 1
a163 1
.Fl v Ar 2
@


1.21
log
@bump the posix reference in STANDARDS to IEEE Std 1003.1-2008, with a few
updates to follow;
@
text
@d1 1
a1 1
.\"	$OpenBSD: join.1,v 1.20 2007/05/31 19:20:11 jmc Exp $
d35 1
a35 1
.Dd $Mdocdate: May 31 2007 $
d166 1
a166 1
.Pp
@


1.20
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: join.1,v 1.19 2007/05/30 04:41:34 jmc Exp $
d35 1
a35 1
.Dd $Mdocdate$
d179 1
a179 1
.St -p1003.1-2004
@


1.19
log
@- use a consistent text for STANDARDS
- note which options are extensions to POSIX
@
text
@d1 1
a1 1
.\"	$OpenBSD: join.1,v 1.18 2007/05/29 18:29:26 jmc Exp $
d35 1
a35 1
.Dd April 28, 1995
@


1.18
log
@remove -j from SYNOPSIS and usage(); it's deprecated and already
documented in STANDARDS;

ok otto
@
text
@d1 1
a1 1
.\"	$OpenBSD: join.1,v 1.17 2006/12/28 11:27:41 jmc Exp $
d178 3
a180 3
command is expected to be
.St -p1003.2
compatible.
@


1.17
log
@- rearrange text
- sort options
- some markup fixes
@
text
@d1 1
a1 1
.\"	$OpenBSD: join.1,v 1.16 2006/05/02 05:21:41 hugh Exp $
a48 1
.Op Fl j Ar file_number field
@


1.16
log
@Spread some .Xr for the hard to stumble across lam(1).
jmc yeps.
@
text
@d1 1
a1 1
.\"	$OpenBSD: join.1,v 1.15 2003/12/28 19:53:23 otto Exp $
d43 2
a50 2
.Bk -words
.Ek
a51 2
.Op Fl \&1 Ar field
.Op Fl \&2 Ar field
d84 24
d110 10
d146 1
a146 1
(The latter requires quoting to protect it from the shell, or, a simpler
a165 8
.It Fl 1 Ar field
Join on the
.Ar field Ns 'th
field of file 1.
.It Fl 2 Ar field
Join on the
.Ar field Ns 'th
field of file 2.
d168 1
a168 27
When the default field delimiter characters are used, the files to be joined
should be ordered in the collating sequence of
.Xr sort 1 ,
using the
.Fl b
option, on the fields on which they are to be joined, otherwise
.Nm
may not report all field matches.
When the field delimiter characters are specified by the
.Fl t
option, the collating sequence should be the same as
.Xr sort 1
without the
.Fl b
option.
.Pp
If one of the arguments
.Ar file1
or
.Ar file2
is
.Dq - ,
the standard input is used.
.Pp
The
.Nm
utility exits 0 on success or >0 if an error occurred.
d198 11
a208 1
in both file 1 and file 2.
d212 2
a213 1
field of file 1.
d217 2
a218 5
field of file 2.
.It Fl j Ar field
Join on the
.Ar field Ns 'th
field of both file 1 and file 2.
@


1.15
log
@Follow Posix when writing non-matching lines. Historically, join(1)
did not change the order of fields of non-matching lines if no -o
option was used, but -a or -v was specified.  This update writes
the join field first, followed by the remaining fields of a
non-matching line.

This change breaks the old security(8), so don't forget to update
/etc/security. From PR 2208. Testing and man page help and ok by jmc@@

ok millert@@ deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: join.1,v 1.14 2003/12/12 10:38:44 otto Exp $
d174 1
@


1.14
log
@Update, mostly from FreeBSD:

o Realloc cleanup.
o Some long vs int cleanup.
o Implement the Posix defined 0 as -o field value, meaning the join field.
o Allow both -a 1 and -a1, and warn if the backward compatibility "-a without
  a number" is used.

ok millert@@ deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: join.1,v 1.13 2003/06/10 09:12:10 jmc Exp $
a166 2
.\" XXX - use .br as a work-around for an apparent bug in mdoc
.br
d178 16
a193 1
For compatibility with historic versions of
d227 1
a227 1
These options are available only so historic shell scripts don't require
d229 2
a230 2
.Pp
The
d232 2
a233 3
command is expected to be
.St -p1003.2
compatible.
@


1.13
log
@- section reorder
- COMPATIBILITY merge
- macro cleanup
- kill whitespace at EOL
- new sentence, new line

ssh pages ok markus@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: join.1,v 1.12 2003/06/03 02:56:09 millert Exp $
a91 5
(The argument to
.Fl a
must not be preceded by a space; see the
.Sx STANDARDS
section.)
d106 5
a110 1
is a field number.
a186 4
(To distinguish between this and
.Fl a Ar file_number ,
.Nm
currently requires that the latter not include any whitespace.)
@


1.12
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
.\"	$OpenBSD: join.1,v 1.11 2000/11/10 05:10:30 aaron Exp $
d95 1
a95 1
.Sx COMPATIBILITY
d156 1
a156 1
.Xr sort
d180 1
a180 1
.Sh COMPATIBILITY
d221 1
a221 1
.Sh STANDARDS
@


1.11
log
@- Section shuffling: comply to the section ordering outlined in mdoc(7).
- Some .Nm trimming.
- .Sh AUTHOR -> .Sh AUTHORS
- Other miscellaneous fixes here and there.
@
text
@d1 1
a1 1
.\"	$OpenBSD: join.1,v 1.10 2000/11/09 17:52:15 aaron Exp $
d17 1
a17 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
@


1.10
log
@Change all option list specifications to ".Bl -tag -width Ds". Most man
pages just needed their -width parameter tweaked to "Ds", which provides
a nice width of 6 constant characters. For consistency more than anything.
@
text
@d1 1
a1 1
.\"	$OpenBSD: join.1,v 1.9 2000/03/08 03:11:29 aaron Exp $
d178 6
a224 6
.Sh SEE ALSO
.Xr awk 1 ,
.Xr comm 1 ,
.Xr paste 1 ,
.Xr sort 1 ,
.Xr uniq 1
@


1.9
log
@Various cleanups and improvements.
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d91 1
a91 1
.Bl -tag -width Fl
@


1.8
log
@Finish standardizing options list introduction.
@
text
@d1 2
d110 1
a110 1
.Ql file_number.field ,
d170 1
a170 1
.Ql \&- ,
d172 2
@


1.7
log
@In Unix land we prefer "whitespace" to "white space" or "white-space". At
least, this is the impression I get from looking at a lot of Perl docs.
@
text
@d87 2
a88 1
The following options are available:
d215 6
a226 6
.Sh SEE ALSO
.Xr awk 1 ,
.Xr comm 1 ,
.Xr paste 1 ,
.Xr sort 1 ,
.Xr uniq 1
@


1.6
log
@correct use of .Nm; some other formatting nits
@
text
@d184 1
a184 1
currently requires that the latter not include any white space.)
@


1.5
log
@usr.bin/ man page fixes, f-m.
@
text
@d59 5
a63 1
The join utility performs an ``equality join'' on the specified files
d65 3
a67 1
The ``join field'' is the field in each file by which the files are compared.
d85 1
a85 1
Both file numbers and field numbers are 1 based, i.e. the first file on
d113 3
a115 1
The elements of list must be either comma (``,'') or whitespace separated.
d152 1
a152 1
.Nm join
d166 3
a168 1
is ``-'', the standard input is used.
d171 1
a171 1
.Nm join
d183 1
a183 1
.Nm join
d199 1
a199 1
.Nm join
d203 3
a205 2
These arguments were of the form ``file_number.field_number'' as described
for the current
d208 2
a209 1
This has obvious difficulties in the presence of files named ``1.2''.
d216 1
a216 1
.Nm join
@


1.4
log
@Clarification.  From NetBSD.
@
text
@d96 1
a96 3
The
.Fl o
option specifies the fields that will be output from each file for
d162 1
a162 1
utility exits 0 on success, and >0 if an error occurs.
d200 1
a200 1
These options are available only so historic shellscripts don't require
@


1.3
log
@"the remaining fields" -> "the other fields"
@
text
@d68 1
a68 1
Each output line consists of the join field, the other fields from
d70 1
a70 1
and then the other fields from
@


1.2
log
@rcsid
@
text
@d1 2
a2 3
.\"	$OpenBSD: join.1,v 1.1.1.1 1995/10/18 08:45:26 deraadt Exp $
.\" Copyright (c) 1990 The Regents of the University of California.
.\" All rights reserved.
d35 1
a35 1
.\"	from: @@(#)join.1	6.8 (Berkeley) 11/18/91
d37 1
a37 1
.Dd November 18, 1991
d68 1
a68 1
Each output line consists of the join field, the remaining fields from
d70 1
a70 1
and then the remaining fields from
d87 5
d110 1
a110 1
(This will require quoting to protect it from the shell, or, a simpler
d173 4
@


1.1
log
@Initial revision
@
text
@d1 1
a36 1
.\"	$Id: join.1,v 1.2 1993/08/01 07:32:01 mycroft Exp $
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
