head	1.5;
access;
symbols
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.14
	OPENBSD_5_0:1.4.0.12
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.4.0.10
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.4.0.8
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.4.0.4
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.4.0.6
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.2
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.3.0.4
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.2
	OPENBSD_4_3_BASE:1.3;
locks; strict;
comment	@# @;


1.5
date	2012.04.12.11.51.12;	author pirofti;	state dead;
branches;
next	1.4;

1.4
date	2008.08.21.16.39.54;	author ragge;	state Exp;
branches;
next	1.3;

1.3
date	2007.10.15.01.05.25;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	2007.10.07.18.34.41;	author otto;	state Exp;
branches;
next	1.1;

1.1
date	2007.10.07.17.58.51;	author otto;	state Exp;
branches;
next	;


desc
@@


1.5
log
@tedu(tm) pcc.

Message sent. Okay deraadt@@.
@
text
@#	$OpenBSD: Makefile.inc,v 1.4 2008/08/21 16:39:54 ragge Exp $
#
# Makefile for the ccom part of pcc.
#

PROG=   	ccom_${TARGMACH}
MAN=		ccom.1

PREFIX=		/usr/local
BINDIR=		${PREFIX}/libexec
MANDIR=		${PREFIX}/man/man
TARGOS=		openbsd
CLEANFILES=	external.h external.c mkext

CFLAGS+=	-DPCC_DEBUG -DGCC_COMPAT
CFLAGS+=	-Wall -Wmissing-prototypes -Wstrict-prototypes -Werror
CFLAGS+=	-DLIBEXECDIR=\"${PREFIX}/libexec\"
CPPFLAGS+=	-I. -I${.CURDIR}/.. -I${.CURDIR} -I${.CURDIR}/../../mip
CPPFLAGS+=	-I${.CURDIR}/../../${TARGMACH}
CPPFLAGS+=	-I${.CURDIR}/../..

.PATH:	${.CURDIR}/../../${TARGMACH}
.PATH:	${.CURDIR}/../../mip
.PATH:	${.CURDIR}/..

SRCS=optim.c pftn.c scan.l trees.c cgram.y inline.c symtabs.c \
	gcc_compat.c init.c local.c code.c stabs.c match.c reader.c optim2.c \
	regs.c local2.c order.c table.c common.c main.c external.c

cgram.c: cgram.y
	$(YACC) $(YFLAGS) -d $<
	mv y.tab.c cgram.c
	mv y.tab.h cgram.h

mkext: mkext.c table.c common.c
	$(CC) $(CPPFLAGS) $(CFLAGS) -DMKEXT -o mkext \
	    ${.CURDIR}/../../mip/mkext.c ${.CURDIR}/../../${TARGMACH}/table.c \
	    ${.CURDIR}/../../mip/common.c

external.h external.c: mkext
	./mkext

pftn.o: cgram.c

reader.o regs.o match.o trees.o: external.h

cleandepend:
	rm -f .depend ${.CURDIR}/tags cgram.h
@


1.4
log
@Add missing dependency for external.h, from Don Hiatt.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.3 2007/10/15 01:05:25 deraadt Exp $
@


1.3
log
@prettier when running make depend (just tabs and spaces)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.2 2007/10/07 18:34:41 otto Exp $
d44 2
@


1.2
log
@Merge from ragge's repo:
Add initial support for packed/aligned/rename pragmas.
Still missing:  Support for architectures with strict alignment.
TODO: Cleanup the rename stuff so that it's not depending on gcc
compat.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.1 2007/10/07 17:58:51 otto Exp $
d36 3
a38 4
	$(CC) $(CPPFLAGS) $(CFLAGS) -DMKEXT -o mkext 		\
		${.CURDIR}/../../mip/mkext.c			\
		${.CURDIR}/../../${TARGMACH}/table.c		\
		${.CURDIR}/../../mip/common.c
@


1.1
log
@reorg pcc tree; requested by and ok deraadt@@; ok ragge@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.1 2007/09/19 15:21:07 todd Exp $
d43 2
@

