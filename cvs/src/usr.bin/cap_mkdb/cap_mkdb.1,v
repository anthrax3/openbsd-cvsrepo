head	1.20;
access;
symbols
	OPENBSD_6_2:1.20.0.10
	OPENBSD_6_2_BASE:1.20
	OPENBSD_6_1:1.20.0.8
	OPENBSD_6_1_BASE:1.20
	OPENBSD_6_0:1.20.0.4
	OPENBSD_6_0_BASE:1.20
	OPENBSD_5_9:1.20.0.2
	OPENBSD_5_9_BASE:1.20
	OPENBSD_5_8:1.17.0.22
	OPENBSD_5_8_BASE:1.17
	OPENBSD_5_7:1.17.0.14
	OPENBSD_5_7_BASE:1.17
	OPENBSD_5_6:1.17.0.18
	OPENBSD_5_6_BASE:1.17
	OPENBSD_5_5:1.17.0.16
	OPENBSD_5_5_BASE:1.17
	OPENBSD_5_4:1.17.0.12
	OPENBSD_5_4_BASE:1.17
	OPENBSD_5_3:1.17.0.10
	OPENBSD_5_3_BASE:1.17
	OPENBSD_5_2:1.17.0.8
	OPENBSD_5_2_BASE:1.17
	OPENBSD_5_1_BASE:1.17
	OPENBSD_5_1:1.17.0.6
	OPENBSD_5_0:1.17.0.4
	OPENBSD_5_0_BASE:1.17
	OPENBSD_4_9:1.17.0.2
	OPENBSD_4_9_BASE:1.17
	OPENBSD_4_8:1.16.0.8
	OPENBSD_4_8_BASE:1.16
	OPENBSD_4_7:1.16.0.4
	OPENBSD_4_7_BASE:1.16
	OPENBSD_4_6:1.16.0.6
	OPENBSD_4_6_BASE:1.16
	OPENBSD_4_5:1.16.0.2
	OPENBSD_4_5_BASE:1.16
	OPENBSD_4_4:1.15.0.6
	OPENBSD_4_4_BASE:1.15
	OPENBSD_4_3:1.15.0.4
	OPENBSD_4_3_BASE:1.15
	OPENBSD_4_2:1.15.0.2
	OPENBSD_4_2_BASE:1.15
	OPENBSD_4_1:1.13.0.16
	OPENBSD_4_1_BASE:1.13
	OPENBSD_4_0:1.13.0.14
	OPENBSD_4_0_BASE:1.13
	OPENBSD_3_9:1.13.0.12
	OPENBSD_3_9_BASE:1.13
	OPENBSD_3_8:1.13.0.10
	OPENBSD_3_8_BASE:1.13
	OPENBSD_3_7:1.13.0.8
	OPENBSD_3_7_BASE:1.13
	OPENBSD_3_6:1.13.0.6
	OPENBSD_3_6_BASE:1.13
	OPENBSD_3_5:1.13.0.4
	OPENBSD_3_5_BASE:1.13
	OPENBSD_3_4:1.13.0.2
	OPENBSD_3_4_BASE:1.13
	OPENBSD_3_3:1.12.0.10
	OPENBSD_3_3_BASE:1.12
	OPENBSD_3_2:1.12.0.8
	OPENBSD_3_2_BASE:1.12
	OPENBSD_3_1:1.12.0.6
	OPENBSD_3_1_BASE:1.12
	OPENBSD_3_0:1.12.0.4
	OPENBSD_3_0_BASE:1.12
	OPENBSD_2_9_BASE:1.12
	OPENBSD_2_9:1.12.0.2
	OPENBSD_2_8:1.11.0.4
	OPENBSD_2_8_BASE:1.11
	OPENBSD_2_7:1.11.0.2
	OPENBSD_2_7_BASE:1.11
	OPENBSD_2_6:1.10.0.2
	OPENBSD_2_6_BASE:1.10
	OPENBSD_2_5:1.7.0.2
	OPENBSD_2_5_BASE:1.7
	OPENBSD_2_4:1.6.0.2
	OPENBSD_2_4_BASE:1.6
	OPENBSD_2_3:1.4.0.4
	OPENBSD_2_3_BASE:1.4
	OPENBSD_2_2:1.4.0.2
	OPENBSD_2_2_BASE:1.4
	OPENBSD_2_1:1.3.0.2
	OPENBSD_2_1_BASE:1.3
	OPENBSD_2_0:1.2.0.2
	OPENBSD_2_0_BASE:1.2
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@.\" @;


1.20
date	2015.12.04.19.15.54;	author jmc;	state Exp;
branches;
next	1.19;
commitid	ZURRPRECi6APlQuz;

1.19
date	2015.12.04.13.58.09;	author nicm;	state Exp;
branches;
next	1.18;
commitid	KGw4skw7jdcj3Exj;

1.18
date	2015.12.03.11.32.34;	author nicm;	state Exp;
branches;
next	1.17;
commitid	agfINMxwxpFOJHOg;

1.17
date	2010.09.03.11.09.28;	author jmc;	state Exp;
branches;
next	1.16;

1.16
date	2009.01.04.11.19.55;	author sobrado;	state Exp;
branches;
next	1.15;

1.15
date	2007.05.31.19.20.08;	author jmc;	state Exp;
branches;
next	1.14;

1.14
date	2007.03.29.11.31.01;	author jmc;	state Exp;
branches;
next	1.13;

1.13
date	2003.06.03.02.56.06;	author millert;	state Exp;
branches;
next	1.12;

1.12
date	2000.11.09.17.52.04;	author aaron;	state Exp;
branches;
next	1.11;

1.11
date	2000.03.04.21.12.01;	author aaron;	state Exp;
branches;
next	1.10;

1.10
date	99.07.03.02.11.08;	author aaron;	state Exp;
branches;
next	1.9;

1.9
date	99.07.02.20.11.44;	author aaron;	state Exp;
branches;
next	1.8;

1.8
date	99.06.05.01.21.20;	author aaron;	state Exp;
branches;
next	1.7;

1.7
date	99.03.05.04.47.45;	author tholo;	state Exp;
branches;
next	1.6;

1.6
date	98.09.23.04.32.36;	author aaron;	state Exp;
branches;
next	1.5;

1.5
date	98.09.06.22.23.16;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	97.05.30.07.49.15;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	96.12.10.09.06.27;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	96.06.26.05.31.48;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.44.58;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.44.58;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.20
log
@remove -i from SYNOPSIS and usage();
@
text
@.\"	$OpenBSD: cap_mkdb.1,v 1.19 2015/12/04 13:58:09 nicm Exp $
.\"	$NetBSD: cap_mkdb.1,v 1.4 1995/03/26 03:59:36 glass Exp $
.\"
.\" Copyright (c) 1992, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"	@@(#)cap_mkdb.1	8.1 (Berkeley) 6/6/93
.\"
.Dd $Mdocdate: December 4 2015 $
.Dt CAP_MKDB 1
.Os
.Sh NAME
.Nm cap_mkdb
.Nd create capability database
.Sh SYNOPSIS
.Nm cap_mkdb
.Op Fl v
.Op Fl f Ar outfile
.Ar file1
.Op Ar file2 ...
.Sh DESCRIPTION
.Nm
builds a hashed database out of the
.Xr getcap 3
logical database constructed by the concatenation of the specified
files.
.Pp
The database is named by the basename of the first file argument and
the string
.Dq .db .
The
.Xr getcap 3
routines can access the database in this form much more quickly
than they can the original text file(s).
.Pp
The
.Dq tc
capabilities of the records are expanded before the
record is stored into the database.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl f Ar outfile
Specify a different database basename.
.It Fl v
Print out the number of capability records in the database.
.El
.Pp
Each record is stored in the database using two different types of keys.
.Pp
The first type is a key which consists of the first capability of
the record (not including the trailing colon
.Pq Ql \&: )
with a data
field consisting of a special byte followed by the rest of the record.
The special byte is either a 0 or 1, where a 0 means that the record
is okay, and a 1 means that there was a
.Dq tc
capability in the record
that couldn't be expanded.
.Pp
The second type is a key which consists of one of the names from the
first capability of the record with a data field consisting a special
byte followed by the first capability of the record.
The special byte is a 2.
.Pp
In normal operation names are looked up in the database, resulting
in a key/data pair of the second type.
The data field of this key/data pair is used to look up a key/data
pair of the first type which has the real data associated with the
name.
.Sh EXIT STATUS
.Ex -std cap_mkdb
.Sh SEE ALSO
.Xr dbopen 3 ,
.Xr getcap 3 ,
.Xr termcap 5
@


1.19
log
@cap_mkdb no longer needs to understand terminfo files, so remove -i.

ok tedu millert
@
text
@d1 1
a1 1
.\"	$OpenBSD: cap_mkdb.1,v 1.18 2015/12/03 11:32:34 nicm Exp $
d33 1
a33 1
.Dd $Mdocdate: December 3 2015 $
d41 1
a41 1
.Op Fl iv
@


1.18
log
@Change /usr/share/misc/terminfo.db to /usr/share/terminfo.

ok millert
@
text
@d1 1
a1 1
.\"	$OpenBSD: cap_mkdb.1,v 1.17 2010/09/03 11:09:28 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: September 3 2010 $
a48 2
or
.Xr terminfo 5
a68 4
.It Fl i
Expect the capability records to be parsed to be in
.Xr terminfo 5
format.
a95 12
.Sh FILES
.Bl -tag -width /usr/share/misc/termcap.db -compact
.It Pa /usr/share/misc/termcap
uncompiled terminal capabilities file
.It Pa /usr/share/misc/termcap.db
terminal capabilities database
.It Pa /usr/share/terminfo
terminal information database
.It Pa /etc/termcap
symbolic link to
.Pa /usr/share/misc/termcap
.El
d101 1
a101 2
.Xr termcap 5 ,
.Xr terminfo 5
@


1.17
log
@add an EXIT STATUS section for /usr/bin;
@
text
@d1 1
a1 1
.\"	$OpenBSD: cap_mkdb.1,v 1.16 2009/01/04 11:19:55 sobrado Exp $
d33 1
a33 1
.Dd $Mdocdate: January 4 2009 $
d103 1
a103 1
.Bl -tag -width /usr/share/misc/terminfo.db -compact
d108 1
a108 1
.It Pa /usr/share/misc/terminfo.db
@


1.16
log
@replace hardcoded exit values with .Ex macros;

ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: cap_mkdb.1,v 1.15 2007/05/31 19:20:08 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: May 31 2007 $
a101 2
.Pp
.Ex -std cap_mkdb
d114 2
@


1.15
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: cap_mkdb.1,v 1.14 2007/03/29 11:31:01 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate$
d103 1
a103 3
The
.Nm
utility exits 0 on success or >0 if an error occurred.
@


1.14
log
@tidy up SYNOPSIS; from Igor Sobrado
@
text
@d1 1
a1 1
.\"	$OpenBSD: cap_mkdb.1,v 1.13 2003/06/03 02:56:06 millert Exp $
d33 1
a33 1
.Dd June 6, 1993
@


1.13
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
.\"	$OpenBSD: cap_mkdb.1,v 1.12 2000/11/09 17:52:04 aaron Exp $
d41 1
a41 2
.Op Fl i
.Op Fl v
@


1.12
log
@Change all option list specifications to ".Bl -tag -width Ds". Most man
pages just needed their -width parameter tweaked to "Ds", which provides
a nice width of 6 constant characters. For consistency more than anything.
@
text
@d1 1
a1 1
.\"	$OpenBSD: cap_mkdb.1,v 1.11 2000/03/04 21:12:01 aaron Exp $
d15 1
a15 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
@


1.11
log
@Many improvements and general cleanup/standardization.
@
text
@d1 1
a1 1
.\"	$OpenBSD: cap_mkdb.1,v 1.10 1999/07/03 02:11:08 aaron Exp $
d73 1
a73 1
.Bl -tag -width XXXXXX -indent
@


1.10
log
@remove redundant .Pp macros
@
text
@d1 1
a1 1
.\"	$OpenBSD: cap_mkdb.1,v 1.9 1999/07/02 20:11:44 aaron Exp $
d83 1
a83 1
.Sh FORMAT
d107 1
a107 1
.Sh RETURN VALUE
d111 12
@


1.9
log
@consistent .Dd usage; proper format is: .Dd Month DD, YYYY
@
text
@d1 1
a1 1
.\"	$OpenBSD: cap_mkdb.1,v 1.8 1999/06/05 01:21:20 aaron Exp $
a42 1
.Pp
a49 1
.Pp
a82 1
.Pp
d88 1
a88 1
.Pq Sq \&: )
@


1.8
log
@- remove trailing white space
- remove arguments from .Os macros
- remove arguments from .Nm macros, where appropriate
- some more Dq/Sq/Ql insanity
- still lots to do in the usr.bin tree... :/
@
text
@d1 1
a1 1
.\"	$OpenBSD: cap_mkdb.1,v 1.7 1999/03/05 04:47:45 tholo Exp $
d37 1
a37 1
.Dd June, 6, 1993
@


1.7
log
@Merge cap_mkdb(1) and info_mkdb(1)
@
text
@d1 1
a1 1
.\"	$OpenBSD: cap_mkdb.1,v 1.6 1998/09/23 04:32:36 aaron Exp $
d53 1
a53 1
.Nm cap_mkdb 
d55 1
a55 1
.Xr getcap 3 
d63 1
a63 1
.Dq .db .  
d69 3
a71 1
The ``tc'' capabilities of the records are expanded before the
d95 3
a97 1
is okay, and a 1 means that there was a ``tc'' capability in the record
d112 1
a112 1
.Nm cap_mkdb 
@


1.6
log
@usr.bin/ man page repairs, a - e
@
text
@d1 1
a1 1
.\"	$OpenBSD: cap_mkdb.1,v 1.5 1998/09/06 22:23:16 aaron Exp $
d46 1
d56 2
d76 4
d113 2
a114 1
.Xr termcap 5
@


1.5
log
@More man page fixes. Spelling, grammar, some typos. Lots of double-word
occurrences squashed as well.
@
text
@d1 1
a1 1
.\"	$OpenBSD: cap_mkdb.1,v 1.4 1997/05/30 07:49:15 deraadt Exp $
d52 1
a52 1
.Nm Cap_mkdb 
d81 3
a83 1
the record (not including the trailing colon (``:'')) with a data
d102 1
a102 1
utility exits 0 on success and >0 if an error occurs.
@


1.4
log
@for i in `find . -name \*.[123456789] -exec grep '^.Dd ' {} /dev/null \; | \
	grep '"' | cut -d':' -f1`; do
sed -e '/^.Dd /s/"//g' -e '/^.Dd /s/\(^.Dd [A-Za-z]*\) \(.*\)$/\1, \2/' <$i >x
cat x > $i
done
@
text
@d1 1
a1 1
.\"	$OpenBSD: cap_mkdb.1,v 1.3 1996/12/10 09:06:27 deraadt Exp $
d56 1
a56 1
files .
d69 1
a69 1
The options as as follows:
@


1.3
log
@"the the" purge
@
text
@d1 1
a1 1
.\"	$OpenBSD: cap_mkdb.1,v 1.2 1996/06/26 05:31:48 deraadt Exp $
d37 1
a37 1
.Dd "June 6, 1993"
@


1.2
log
@rcsid
@
text
@d1 1
a1 1
.\"	$OpenBSD: cap_mkdb.1,v 1.4 1995/03/26 03:59:36 glass Exp $
d89 1
a89 1
byte followed by the the first capability of the record.
@


1.1
log
@Initial revision
@
text
@d1 1
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
