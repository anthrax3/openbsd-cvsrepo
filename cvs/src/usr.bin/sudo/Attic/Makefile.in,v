head	1.50;
access;
symbols
	OPENBSD_5_7:1.49.0.16
	OPENBSD_5_7_BASE:1.49
	OPENBSD_5_6:1.49.0.20
	OPENBSD_5_6_BASE:1.49
	OPENBSD_5_5:1.49.0.18
	OPENBSD_5_5_BASE:1.49
	OPENBSD_5_4:1.49.0.14
	OPENBSD_5_4_BASE:1.49
	OPENBSD_5_3:1.49.0.12
	OPENBSD_5_3_BASE:1.49
	OPENBSD_5_2:1.49.0.10
	OPENBSD_5_2_BASE:1.49
	OPENBSD_5_1_BASE:1.49
	OPENBSD_5_1:1.49.0.8
	OPENBSD_5_0:1.49.0.6
	OPENBSD_5_0_BASE:1.49
	OPENBSD_4_9:1.49.0.4
	OPENBSD_4_9_BASE:1.49
	OPENBSD_4_8:1.49.0.2
	OPENBSD_4_8_BASE:1.49
	OPENBSD_4_7:1.47.0.2
	OPENBSD_4_7_BASE:1.47
	OPENBSD_4_6:1.45.0.4
	OPENBSD_4_6_BASE:1.45
	OPENBSD_4_5:1.43.0.2
	OPENBSD_4_5_BASE:1.43
	OPENBSD_4_4:1.41.0.2
	OPENBSD_4_4_BASE:1.41
	OPENBSD_4_3:1.40.0.2
	OPENBSD_4_3_BASE:1.40
	OPENBSD_4_2:1.32.0.2
	OPENBSD_4_2_BASE:1.32
	OPENBSD_4_1:1.28.0.8
	OPENBSD_4_1_BASE:1.28
	OPENBSD_4_0:1.28.0.6
	OPENBSD_4_0_BASE:1.28
	OPENBSD_3_9:1.28.0.4
	OPENBSD_3_9_BASE:1.28
	OPENBSD_3_8:1.28.0.2
	OPENBSD_3_8_BASE:1.28
	OPENBSD_3_7:1.26.0.2
	OPENBSD_3_7_BASE:1.26
	OPENBSD_3_6:1.21.0.4
	OPENBSD_3_6_BASE:1.21
	OPENBSD_3_5:1.21.0.2
	OPENBSD_3_5_BASE:1.21
	OPENBSD_3_4:1.19.0.2
	OPENBSD_3_4_BASE:1.19
	OPENBSD_3_3:1.14.0.2
	OPENBSD_3_3_BASE:1.14
	OPENBSD_3_2:1.13.0.2
	OPENBSD_3_2_BASE:1.13
	OPENBSD_3_1:1.12.0.2
	OPENBSD_3_1_BASE:1.12
	OPENBSD_3_0:1.7.0.4
	OPENBSD_3_0_BASE:1.7
	OPENBSD_2_9_BASE:1.7
	OPENBSD_2_9:1.7.0.2
	OPENBSD_2_8:1.6.0.4
	OPENBSD_2_8_BASE:1.6
	OPENBSD_2_7:1.6.0.2
	OPENBSD_2_7_BASE:1.6
	SUDO_1_6_0:1.1.1.1
	COURTESAN:1.1.1;
locks; strict;
comment	@# @;


1.50
date	2015.07.03.21.51.54;	author millert;	state dead;
branches;
next	1.49;
commitid	8ra5qnWqy2bUhcZn;

1.49
date	2010.06.02.19.30.10;	author millert;	state Exp;
branches;
next	1.48;

1.48
date	2010.04.13.23.22.01;	author millert;	state Exp;
branches;
next	1.47;

1.47
date	2010.03.04.12.21.36;	author millert;	state Exp;
branches;
next	1.46;

1.46
date	2009.12.07.18.43.10;	author millert;	state Exp;
branches;
next	1.45;

1.45
date	2009.06.21.14.48.41;	author millert;	state Exp;
branches;
next	1.44;

1.44
date	2009.04.11.11.48.06;	author millert;	state Exp;
branches;
next	1.43;

1.43
date	2008.12.09.22.20.32;	author millert;	state Exp;
branches;
next	1.42;

1.42
date	2008.11.14.11.53.05;	author millert;	state Exp;
branches;
next	1.41;

1.41
date	2008.07.31.16.44.03;	author millert;	state Exp;
branches;
next	1.40;

1.40
date	2008.01.21.19.44.29;	author millert;	state Exp;
branches;
next	1.39;

1.39
date	2008.01.07.14.10.08;	author millert;	state Exp;
branches;
next	1.38;

1.38
date	2007.12.21.01.16.52;	author millert;	state Exp;
branches;
next	1.37;

1.37
date	2007.12.03.15.09.47;	author millert;	state Exp;
branches;
next	1.36;

1.36
date	2007.11.02.19.16.47;	author millert;	state Exp;
branches;
next	1.35;

1.35
date	2007.10.25.16.08.12;	author millert;	state Exp;
branches;
next	1.34;

1.34
date	2007.10.17.04.26.04;	author millert;	state Exp;
branches;
next	1.33;

1.33
date	2007.09.05.23.55.56;	author millert;	state Exp;
branches;
next	1.32;

1.32
date	2007.08.15.14.22.39;	author millert;	state Exp;
branches;
next	1.31;

1.31
date	2007.08.02.15.52.42;	author millert;	state Exp;
branches;
next	1.30;

1.30
date	2007.07.29.22.51.12;	author millert;	state Exp;
branches;
next	1.29;

1.29
date	2007.07.26.16.10.15;	author millert;	state Exp;
branches;
next	1.28;

1.28
date	2005.06.19.22.00.08;	author millert;	state Exp;
branches;
next	1.27;

1.27
date	2005.05.31.21.13.43;	author millert;	state Exp;
branches;
next	1.26;

1.26
date	2005.02.05.23.31.52;	author millert;	state Exp;
branches;
next	1.25;

1.25
date	2004.11.29.17.29.04;	author millert;	state Exp;
branches;
next	1.24;

1.24
date	2004.11.17.18.14.06;	author millert;	state Exp;
branches;
next	1.23;

1.23
date	2004.11.12.16.37.38;	author millert;	state Exp;
branches;
next	1.22;

1.22
date	2004.09.28.15.10.50;	author millert;	state Exp;
branches;
next	1.21;

1.21
date	2004.01.12.19.13.20;	author millert;	state Exp;
branches;
next	1.20;

1.20
date	2004.01.05.00.23.57;	author millert;	state Exp;
branches;
next	1.19;

1.19
date	2003.05.08.20.55.05;	author millert;	state Exp;
branches;
next	1.18;

1.18
date	2003.04.19.21.57.17;	author millert;	state Exp;
branches;
next	1.17;

1.17
date	2003.04.07.03.31.09;	author millert;	state Exp;
branches;
next	1.16;

1.16
date	2003.04.03.19.15.34;	author millert;	state Exp;
branches;
next	1.15;

1.15
date	2003.04.01.15.47.51;	author millert;	state Exp;
branches;
next	1.14;

1.14
date	2003.03.15.21.23.53;	author millert;	state Exp;
branches;
next	1.13;

1.13
date	2002.04.25.15.49.03;	author millert;	state Exp;
branches;
next	1.12;

1.12
date	2002.01.23.23.03.24;	author millert;	state Exp;
branches;
next	1.11;

1.11
date	2002.01.17.01.03.21;	author millert;	state Exp;
branches;
next	1.10;

1.10
date	2002.01.14.00.11.44;	author millert;	state Exp;
branches;
next	1.9;

1.9
date	2002.01.08.15.44.25;	author millert;	state Exp;
branches;
next	1.8;

1.8
date	2002.01.03.03.49.16;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	2000.11.21.17.58.43;	author millert;	state Exp;
branches
	1.7.2.1
	1.7.4.1;
next	1.6;

1.6
date	2000.03.27.03.44.37;	author millert;	state Exp;
branches;
next	1.5;

1.5
date	2000.01.28.01.10.19;	author millert;	state Exp;
branches;
next	1.4;

1.4
date	2000.01.24.04.22.52;	author millert;	state Exp;
branches;
next	1.3;

1.3
date	99.12.10.06.45.10;	author millert;	state Exp;
branches;
next	1.2;

1.2
date	99.11.25.00.51.19;	author millert;	state Exp;
branches;
next	1.1;

1.1
date	99.11.18.16.29.01;	author millert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	99.11.18.16.29.01;	author millert;	state Exp;
branches;
next	;

1.7.2.1
date	2002.01.18.17.20.22;	author millert;	state Exp;
branches;
next	;

1.7.4.1
date	2002.01.18.16.14.44;	author millert;	state Exp;
branches;
next	;


desc
@@


1.50
log
@Remove sudo, it is now in ports.
@
text
@#
# Copyright (c) 1996, 1998-2005, 2007-2009
#	Todd C. Miller <Todd.Miller@@courtesan.com>
#
# Permission to use, copy, modify, and distribute this software for any
# purpose with or without fee is hereby granted, provided that the above
# copyright notice and this permission notice appear in all copies.
#
# THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
# WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
# MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
# ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
# WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
# ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
# OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
# ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
#
# Sponsored in part by the Defense Advanced Research Projects
# Agency (DARPA) and Air Force Research Laboratory, Air Force
# Materiel Command, USAF, under agreement number F39502-99-1-0512.
#
# @@configure_input@@
#

#### Start of system configuration section. ####

srcdir = @@srcdir@@
devdir = @@devdir@@
authdir = $(srcdir)/auth
top_builddir = .

# Compiler & tools to use
CC = @@CC@@
FLEX = @@FLEX@@
YACC = @@YACC@@
NROFF = nroff -Tascii
LIBTOOL = @@LIBTOOL@@

# Our install program supports extra flags...
INSTALL = $(SHELL) $(srcdir)/install-sh -c

# Libraries
LIBS = @@LIBS@@
NET_LIBS = @@NET_LIBS@@
SUDO_LIBS = @@SUDO_LIBS@@ @@AFS_LIBS@@ @@GETGROUPS_LIB@@ $(LIBS) $(NET_LIBS)

# C preprocessor flags
CPPFLAGS = -I. -I$(srcdir) @@CPPFLAGS@@

# Usually -O and/or -g
CFLAGS = @@CFLAGS@@

# Flags to pass to the link stage
LDFLAGS = @@LDFLAGS@@
SUDO_LDFLAGS = @@SUDO_LDFLAGS@@ $(LDFLAGS)

# Where to install things...
prefix = @@prefix@@
exec_prefix = @@exec_prefix@@
bindir = @@bindir@@
sbindir = @@sbindir@@
sysconfdir = @@sysconfdir@@
libexecdir = @@libexecdir@@
datarootdir = @@datarootdir@@
mandir = @@mandir@@
noexecfile = @@NOEXECFILE@@
noexecdir = @@NOEXECDIR@@

# Directory in which to install sudo.
sudodir = $(bindir)

# Directory in which to install visudo
visudodir = $(sbindir)

# Directory in which to install the sudoers file
sudoersdir = $(sysconfdir)

# Directory in which to install the man page
mantype = @@MANTYPE@@
mansectsu = @@mansectsu@@
mansectform = @@mansectform@@
mandirsu = $(mandir)/$(mantype)$(mansectsu)
mandirform = $(mandir)/$(mantype)$(mansectform)

# User and group ids the installed files should be "owned" by
install_uid = 0
install_gid = 0

# User, group, and mode the sudoers file should be "owned" by (configure)
sudoers_uid = @@SUDOERS_UID@@
sudoers_gid = @@SUDOERS_GID@@
sudoers_mode = @@SUDOERS_MODE@@

# Pass in paths and uid/gid + OS dependent defined
DEFS = @@OSDEFS@@ -D_PATH_SUDOERS=\"$(sudoersdir)/sudoers\" -DSUDOERS_UID=$(sudoers_uid) -DSUDOERS_GID=$(sudoers_gid) -DSUDOERS_MODE=$(sudoers_mode)

#### End of system configuration section. ####

SHELL = @@SHELL@@

PROGS = @@PROGS@@

SRCS = aix.c alias.c alloc.c audit.c bsm_audit.c check.c closefrom.c \
       def_data.c defaults.c env.c error.c fileops.c find_path.c fnmatch.c \
       getcwd.c getprogname.c getspwuid.c gettime.c glob.c goodpath.c gram.c \
       gram.y interfaces.c isblank.c lbuf.c ldap.c list.c logging.c match.c \
       mkstemp.c memrchr.c parse.c pwutil.c  set_perms.c sigaction.c \
       snprintf.c strcasecmp.c strerror.c strlcat.c strlcpy.c sudo.c \
       sudo_noexec.c sudo_edit.c sudo_nss.c term.c testsudoers.c tgetpass.c \
       toke.c toke.l tsgetgrpw.c utimes.c vasgroups.c visudo.c zero_bytes.c \
       redblack.c selinux.c sesh.c $(AUTH_SRCS)

AUTH_SRCS = auth/afs.c auth/aix_auth.c auth/bsdauth.c auth/dce.c auth/fwtk.c \
	    auth/kerb4.c auth/kerb5.c auth/pam.c auth/passwd.c auth/rfc1938.c \
	    auth/secureware.c auth/securid.c auth/securid5.c auth/sia.c \
	    auth/sudo_auth.c

HDRS = bsm_audit.h compat.h def_data.h defaults.h error.h ins_2001.h \
       ins_classic.h ins_csops.h ins_goons.h insults.h interfaces.h lbuf.h \
       list.h logging.h nonunix.h redblack.h parse.h sudo.h sudo_nss.h gram.h \
       auth/sudo_auth.h emul/charclass.h emul/fnmatch.h emul/glob.h \
       emul/timespec.h emul/utime.h

AUTH_OBJS = sudo_auth.o @@AUTH_OBJS@@

# Note: gram.o must come first here
COMMON_OBJS = gram.o alias.o alloc.o defaults.o error.o list.o match.o \
	      toke.o redblack.o zero_bytes.o @@NONUNIX_GROUPS_IMPL@@

SUDO_OBJS = $(COMMON_OBJS) $(AUTH_OBJS) @@SUDO_OBJS@@ audit.o check.o env.o \
	    getspwuid.o gettime.o goodpath.o fileops.o find_path.o \
	    interfaces.o lbuf.o logging.o parse.o pwutil.o set_perms.o \
	    sudo.o sudo_edit.o sudo_nss.o term.o tgetpass.o

VISUDO_OBJS = $(COMMON_OBJS) visudo.o fileops.o gettime.o goodpath.o \
	      find_path.o pwutil.o

TEST_OBJS = $(COMMON_OBJS) interfaces.o testsudoers.o tsgetgrpw.o tspwutil.o

LIB_OBJS = @@LIBOBJS@@

VERSION = @@PACKAGE_VERSION@@

DISTFILES = $(SRCS) $(HDRS) ChangeLog HISTORY INSTALL INSTALL.configure \
            LICENSE Makefile.in PORTING README README.LDAP TROUBLESHOOTING \
	    UPGRADE WHATSNEW aclocal.m4 acsite.m4 aixcrypt.exp config.guess \
	    config.h.in config.sub configure configure.in def_data.in \
	    indent.pro install-sh ltmain.sh mkdefaults mkinstalldirs \
	    pathnames.h.in sample.pam sample.syslog.conf sample.sudoers \
	    schema.ActiveDirectory schema.OpenLDAP schema.iPlanet sudo.cat \
	    sudo.man.in sudo.pod sudo.psf sudo_usage.h.in sudoers sudoers.cat \
            sudoers.man.in sudoers.pod sudoers.ldap.cat sudoers.ldap.man.in \
	    sudoers.ldap.pod sudoers2ldif visudo.cat visudo.man.in visudo.pod \
	    auth/API sudo.man.pl sudoers.man.pl

BINFILES= ChangeLog HISTORY LICENSE README TROUBLESHOOTING \
	  UPGRADE install-sh mkinstalldirs sample.syslog.conf sample.sudoers \
	  sudo sudo.cat sudo.man sudo.pod sudoers sudoers.cat sudoers.man \
	  sudoers.pod visudo visudo.cat visudo.man visudo.pod

BINSPECIAL= INSTALL.binary Makefile.binary.in libtool

SUDODEP = $(srcdir)/sudo.h $(srcdir)/compat.h $(srcdir)/defaults.h \
	  $(srcdir)/error.h $(srcdir)/list.h $(srcdir)/logging.h \
	  $(srcdir)/sudo_nss.h $(devdir)/def_data.h pathnames.h config.h

AUTHDEP = $(SUDODEP) $(authdir)/sudo_auth.h

INSDEP = $(srcdir)/ins_2001.h $(srcdir)/ins_classic.h $(srcdir)/ins_csops.h \
	 $(srcdir)/ins_goons.h $(srcdir)/insults.h

all: $(PROGS)

.SUFFIXES: .o .c .h .l .y .man .cat .lo

.c.o:
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $<

.c.lo:
	$(LIBTOOL) --mode=compile $(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $<

.man.cat:
	@@rm -f $@@
	sed '1s/^/.if n .ll 78n/' $< | $(NROFF) -man > $@@

sudo: $(SUDO_OBJS) $(LIB_OBJS)
	$(CC) -o $@@ $(SUDO_OBJS) $(LIB_OBJS) $(SUDO_LDFLAGS) $(SUDO_LIBS)

visudo: $(VISUDO_OBJS) $(LIB_OBJS)
	$(CC) -o $@@ $(VISUDO_OBJS) $(LIB_OBJS) $(LDFLAGS) $(LIBS) $(NET_LIBS)

testsudoers: $(TEST_OBJS) $(LIB_OBJS)
	$(CC) -o $@@ $(TEST_OBJS) $(LIB_OBJS) $(LDFLAGS) $(LIBS) $(NET_LIBS)

sudo_noexec.lo: $(srcdir)/sudo_noexec.c
	$(LIBTOOL) --mode=compile $(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/sudo_noexec.c

sudo_noexec.la: sudo_noexec.lo
	$(LIBTOOL) --mode=link $(CC) $(LDFLAGS) -o $@@ sudo_noexec.lo -avoid-version -rpath $(noexecdir)

# Uncomment the following if you want "make distclean" to clean the parser
@@DEV@@GENERATED = gram.h gram.c toke.c def_data.c def_data.h

# Uncomment the lines before -@@true if you intend to modify gram.y
$(devdir)/gram.c: $(srcdir)/gram.y
@@DEV@@	$(YACC) -d $(srcdir)/gram.y
@@DEV@@	mv -f y.tab.c gram.c
@@DEV@@	if cmp -s y.tab.h gram.h; then rm -f y.tab.h; else mv -f y.tab.h gram.h; fi
	-@@true

# Uncomment the lines before -@@true if you intend to modify toke.l
$(devdir)/toke.c: $(srcdir)/toke.l
@@DEV@@	$(FLEX) $(srcdir)/toke.l
@@DEV@@	mv -f lex.yy.c toke.c
	-@@true

# Uncomment the following if you intend to modify def_data.in
@@DEV@@$(devdir)/def_data.h $(devdir)/def_data.c: $(srcdir)/def_data.in
@@DEV@@	perl $(srcdir)/mkdefaults -o def_data $(srcdir)/def_data.in

# Dependencies (not counting auth functions)
aix.o: $(srcdir)/aix.c
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/aix.c
alias.o: $(srcdir)/alias.c $(SUDODEP) $(srcdir)/parse.h $(srcdir)/list.h $(srcdir)/redblack.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/alias.c
alloc.o: $(srcdir)/alloc.c $(SUDODEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/alloc.c
audit.o: $(srcdir)/audit.c $(SUDODEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/audit.c
bsm_audit.o: $(srcdir)/bsm_audit.c $(SUDODEP) bsm_audit.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/bsm_audit.c
check.o: $(srcdir)/check.c $(SUDODEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/check.c
closefrom.o: $(srcdir)/closefrom.c config.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/closefrom.c
defaults.o: $(srcdir)/defaults.c $(SUDODEP) $(srcdir)/def_data.c $(authdir)/sudo_auth.h $(devdir)/gram.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/defaults.c
env.o: $(srcdir)/env.c $(SUDODEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/env.c
error.o: $(srcdir)/error.c $(srcdir)/compat.h $(srcdir)/error.h config.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/error.c
fileops.o: $(srcdir)/fileops.c $(SUDODEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/fileops.c
find_path.o: $(srcdir)/find_path.c $(SUDODEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/find_path.c
fnmatch.o: $(srcdir)/fnmatch.c $(srcdir)/emul/fnmatch.h $(srcdir)/compat.h config.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/fnmatch.c
getcwd.o: $(srcdir)/getcwd.c $(srcdir)/compat.h config.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/getcwd.c
getprogname.o: $(srcdir)/getprogname.c config.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/getprogname.c
getspwuid.o: $(srcdir)/getspwuid.c $(SUDODEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/getspwuid.c
gettime.o: $(srcdir)/gettime.c $(SUDODEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/gettime.c
glob.o: $(srcdir)/glob.c $(srcdir)/emul/glob.h $(srcdir)/compat.h config.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/glob.c
goodpath.o: $(srcdir)/goodpath.c $(SUDODEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/goodpath.c
gram.o: $(devdir)/gram.c $(SUDODEP) $(srcdir)/parse.h $(srcdir)/list.h $(devdir)/gram.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(devdir)/gram.c
interfaces.o: $(srcdir)/interfaces.c $(SUDODEP) $(srcdir)/interfaces.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/interfaces.c
isblank.o: $(srcdir)/isblank.c $(srcdir)/compat.h config.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/isblank.c
lbuf.o: $(srcdir)/lbuf.c $(SUDODEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/lbuf.c
ldap.o: $(srcdir)/ldap.c $(SUDODEP) $(srcdir)/parse.h $(srcdir)/list.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/ldap.c
list.o: $(srcdir)/list.c $(SUDODEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/list.c
logging.o: $(srcdir)/logging.c $(SUDODEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/logging.c
match.o: $(srcdir)/match.c $(SUDODEP) $(srcdir)/parse.h $(srcdir)/list.h $(srcdir)/interfaces.h $(devdir)/gram.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/match.c
memrchr.o: $(srcdir)/memrchr.c $(SUDODEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/memrchr.c
mkstemp.o: $(srcdir)/mkstemp.c $(SUDODEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/mkstemp.c
parse.o: $(srcdir)/parse.c $(SUDODEP) $(srcdir)/parse.h $(srcdir)/list.h $(devdir)/gram.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/parse.c
pwutil.o: $(srcdir)/pwutil.c $(SUDODEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/pwutil.c
redblack.o: $(srcdir)/redblack.c $(SUDODEP) $(srcdir)/redblack.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/redblack.c
set_perms.o: $(srcdir)/set_perms.c $(SUDODEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/set_perms.c
sigaction.o: $(srcdir)/sigaction.c $(srcdir)/compat.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/sigaction.c
snprintf.o: $(srcdir)/snprintf.c $(srcdir)/compat.h config.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/snprintf.c
strcasecmp.o: $(srcdir)/strcasecmp.c $(srcdir)/compat.h  config.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/strcasecmp.c
strerror.o: $(srcdir)/strerror.c $(srcdir)/compat.h config.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/strerror.c
strlcat.o: $(srcdir)/strlcat.c $(srcdir)/compat.h config.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/strlcat.c
strlcpy.o: $(srcdir)/strlcpy.c $(srcdir)/compat.h config.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/strlcpy.c
selinux.o: $(srcdir)/selinux.c $(SUDODEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/selinux.c
sudo.o: $(srcdir)/sudo.c $(SUDODEP) sudo_usage.h $(srcdir)/interfaces.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/sudo.c
sudo_edit.o: $(srcdir)/sudo_edit.c $(SUDODEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/sudo_edit.c
sudo_noexec.o: $(srcdir)/sudo_noexec.c $(srcdir)/compat.h config.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/sudo_noexec.c
sudo_nss.o: $(srcdir)/sudo_nss.c $(SUDODEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/sudo_nss.c
term.o: $(srcdir)/term.c $(SUDODEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/term.c
testsudoers.o: $(srcdir)/testsudoers.c $(SUDODEP) $(srcdir)/parse.h $(srcdir)/list.h $(srcdir)/interfaces.h $(devdir)/gram.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/testsudoers.c
tgetpass.o: $(srcdir)/tgetpass.c $(SUDODEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/tgetpass.c
toke.o: $(devdir)/toke.c $(SUDODEP) $(srcdir)/parse.h $(srcdir)/list.h $(devdir)/gram.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(devdir)/toke.c
tsgetgrpw.o: $(srcdir)/tsgetgrpw.c $(SUDODEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/tsgetgrpw.c
utimes.o: $(srcdir)/utimes.c $(srcdir)/compat.h $(srcdir)/emul/utime.h config.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/utimes.c
vasgroups.o: $(srcdir)/vasgroups.c $(srcdir)/nonunix.h $(SUDODEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/vasgroups.c
visudo.o: $(srcdir)/visudo.c $(SUDODEP) $(devdir)/gram.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/visudo.c
zero_bytes.o: $(srcdir)/zero_bytes.c $(srcdir)/compat.h config.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(srcdir)/zero_bytes.c

# Private copy of pwutil.o with MYPW defined for testsudoers
tspwutil.o: $(srcdir)/pwutil.c $(SUDODEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) -DMYPW -o tspwutil.o $(srcdir)/pwutil.c

sudo_auth.o: $(authdir)/sudo_auth.c $(AUTHDEP) $(INSDEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(authdir)/sudo_auth.c
afs.o: $(authdir)/afs.c $(AUTHDEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(authdir)/afs.c
aix_auth.o: $(authdir)/aix_auth.c $(AUTHDEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(authdir)/aix_auth.c
bsdauth.o: $(authdir)/bsdauth.c $(AUTHDEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(authdir)/bsdauth.c
dce.o: $(authdir)/dce.c $(AUTHDEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(authdir)/dce.c
fwtk.o: $(authdir)/fwtk.c $(AUTHDEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(authdir)/fwtk.c
kerb4.o: $(authdir)/kerb4.c $(AUTHDEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(authdir)/kerb4.c
kerb5.o: $(authdir)/kerb5.c $(AUTHDEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(authdir)/kerb5.c
pam.o: $(authdir)/pam.c $(AUTHDEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(authdir)/pam.c
passwd.o: $(authdir)/passwd.c $(AUTHDEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(authdir)/passwd.c
rfc1938.o: $(authdir)/rfc1938.c $(AUTHDEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(authdir)/rfc1938.c
secureware.o: $(authdir)/secureware.c $(AUTHDEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(authdir)/secureware.c
securid.o: $(authdir)/securid.c $(AUTHDEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(authdir)/securid.c
securid5.o: $(authdir)/securid5.c $(AUTHDEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(authdir)/securid5.c
sia.o: $(authdir)/sia.c $(AUTHDEP)
	$(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(OPTIONS) $(authdir)/sia.c

sudo.man.in: $(srcdir)/sudo.pod
	@@rm -f $(srcdir)/$@@
	( cd $(srcdir); mansectsu=`echo @@MANSECTSU@@|tr A-Z a-z`; mansectform=`echo @@MANSECTFORM@@|tr A-Z a-z`; sed -n -e '/^=pod/q' -e 's/^/.\\" /p' sudo.pod > $@@; pod2man --quotes=none --date="`date '+%B %e, %Y'`" --section=$$mansectsu --release=$(VERSION) --center="MAINTENANCE COMMANDS" sudo.pod | sed -e "s/(5)/($$mansectform)/" -e "s/(8)/($$mansectsu)/" | perl -p sudo.man.pl >> $@@ )

sudo.man: sudo.man.in
	CONFIG_FILES=$@@ CONFIG_HEADERS= sh ./config.status

sudo.cat: sudo.man

visudo.man.in: $(srcdir)/visudo.pod
	@@rm -f $(srcdir)/$@@
	( cd $(srcdir); mansectsu=`echo @@MANSECTSU@@|tr A-Z a-z`; mansectform=`echo @@MANSECTFORM@@|tr A-Z a-z`; sed -n -e '/^=pod/q' -e 's/^/.\\" /p' visudo.pod > $@@; pod2man --quotes=none --date="`date '+%B %e, %Y'`" --section=$$mansectsu --release=$(VERSION) --center="MAINTENANCE COMMANDS" visudo.pod | sed -e "s/(5)/($$mansectform)/" -e "s/(8)/($$mansectsu)/" -e 's|\\fI\\f\((CW*\)*I@@\([^@@]*\)\\fI@@|\\fI@@\2@@|g' >> $@@ )

visudo.man: visudo.man.in
	CONFIG_FILES=$@@ CONFIG_HEADERS= sh ./config.status

visudo.cat: visudo.man

sudoers.man.in: $(srcdir)/sudoers.pod
	@@rm -f $(srcdir)/$@@
	( cd $(srcdir); mansectsu=`echo @@MANSECTSU@@|tr A-Z a-z`; mansectform=`echo @@MANSECTFORM@@|tr A-Z a-z`; sed -n -e '/^=pod/q' -e 's/^/.\\" /p' sudoers.pod > $@@; pod2man --quotes=none --date="`date '+%B %e, %Y'`" --section=$$mansectform --release=$(VERSION) --center="MAINTENANCE COMMANDS" sudoers.pod | sed -e "s/(5)/($$mansectform)/" -e "s/(8)/($$mansectsu)/" | perl -p sudoers.man.pl >> $@@ )

sudoers.man:: sudoers.man.in
	CONFIG_FILES=$@@ CONFIG_HEADERS= sh ./config.status

sudoers.cat: sudoers.man

sudoers.ldap.man.in: $(srcdir)/sudoers.ldap.pod
	@@rm -f $(srcdir)/$@@
	( cd $(srcdir); mansectsu=`echo @@MANSECTSU@@|tr A-Z a-z`; mansectform=`echo @@MANSECTFORM@@|tr A-Z a-z`; sed -n -e '/^=pod/q' -e 's/^/.\\" /p' sudoers.ldap.pod > $@@; pod2man --quotes=none --date="`date '+%B %e, %Y'`" --section=$$mansectform --release=$(VERSION) --center="MAINTENANCE COMMANDS" sudoers.ldap.pod | sed -e "s/(5)/($$mansectform)/" -e "s/(8)/($$mansectsu)/" -e 's|\\fI\\f\((CW*\)*I@@\([^@@]*\)\\fI@@|\\fI@@\2@@|g' >> $@@ )

sudoers.ldap.man:: sudoers.ldap.man.in
	CONFIG_FILES=$@@ CONFIG_HEADERS= sh ./config.status

sudoers.ldap.cat: sudoers.ldap.man

@@DEV@@HISTORY: history.pod
@@DEV@@	pod2text -l -i0 $> > $@@
@@DEV@@
@@DEV@@LICENSE: license.pod
@@DEV@@	pod2text -l -i0 $> | sed '1,2d' > $@@

install: install-dirs install-binaries @@INSTALL_NOEXEC@@ install-sudoers install-man

install-dirs:
	$(SHELL) $(srcdir)/mkinstalldirs $(DESTDIR)$(sudodir) \
	    $(DESTDIR)$(visudodir) $(DESTDIR)$(sudoersdir) \
	    $(DESTDIR)$(mandirsu) $(DESTDIR)$(mandirform) \
	    $(DESTDIR)$(noexecdir)

install-binaries: install-dirs $(PROGS)
	$(INSTALL) -O $(install_uid) -G $(install_gid) -M 4111 -s sudo $(DESTDIR)$(sudodir)/sudo
	rm -f $(DESTDIR)$(sudodir)/sudoedit
	ln $(DESTDIR)$(sudodir)/sudo $(DESTDIR)$(sudodir)/sudoedit
	$(INSTALL) -O $(install_uid) -G $(install_gid) -M 0111 -s visudo $(DESTDIR)$(visudodir)/visudo
@@SELINUX@@	$(INSTALL) -O $(install_uid) -G $(install_gid) -M 0111 -s sesh $(DESTDIR)$(libexecdir)/sesh

install-noexec: install-dirs sudo_noexec.la
	test -f .libs/$(noexecfile) && $(INSTALL) -O $(install_uid) -G $(install_gid) -M 0755 .libs/$(noexecfile) $(DESTDIR)$(noexecdir)

install-sudoers: install-dirs
	test -f $(DESTDIR)$(sudoersdir)/sudoers || \
	    $(INSTALL) -O $(sudoers_uid) -G $(sudoers_gid) -M $(sudoers_mode) \
		$(srcdir)/sudoers $(DESTDIR)$(sudoersdir)/sudoers

install-man: install-dirs
	$(INSTALL) -O $(install_uid) -G $(install_gid) -M 0444 @@mansrcdir@@/sudo.$(mantype) $(DESTDIR)$(mandirsu)/sudo.$(mansectsu)
	@@rm -f $(DESTDIR)$(mandirsu)/sudoedit.$(mansectsu)
	ln $(DESTDIR)$(mandirsu)/sudo.$(mansectsu) $(DESTDIR)$(mandirsu)/sudoedit.$(mansectsu)
	$(INSTALL) -O $(install_uid) -G $(install_gid) -M 0444 @@mansrcdir@@/visudo.$(mantype) $(DESTDIR)$(mandirsu)/visudo.$(mansectsu)
	$(INSTALL) -O $(install_uid) -G $(install_gid) -M 0444 @@mansrcdir@@/sudoers.$(mantype) $(DESTDIR)$(mandirform)/sudoers.$(mansectform)
	@@LDAP@@$(INSTALL) -O $(install_uid) -G $(install_gid) -M 0444 @@mansrcdir@@/sudoers.ldap.$(mantype) $(DESTDIR)$(mandirform)/sudoers.ldap.$(mansectform)
@@MAN_POSTINSTALL@@

check:
	@@echo nothing to check

clean:
	-rm -f *.o *.lo stamp-* $(PROGS) testsudoers core *.core core.*

mostlyclean: clean

distclean: clean
	-rm -rf Makefile pathnames.h config.h config.status config.cache \
		config.log libtool sudo_noexec.lo .libs $(GENERATED) \
		sudo.man sudoers.man sudoers.ldap.man visudo.man sudo_usage.h \
		Makefile.binary

clobber: distclean

realclean: distclean
	rm -f TAGS tags

cleandir: realclean

dist:
	pax -w -x ustar -s '/^/sudo-$(VERSION)\//' -f ../sudo-$(VERSION).tar \
		$(DISTFILES)
	gzip -9f ../sudo-$(VERSION).tar
	ls -l ../sudo-$(VERSION).tar.gz

bindist:
	( \
	  ARCH=`uname -m|sed 's:/:_:g'`+`uname -sr|sed 's/ /_/g'` ; \
	  mkdir tmp.$$ARCH ; \
	  tdir=tmp.$$ARCH/sudo-$(VERSION) ; \
	  mkdir $$tdir ; \
	  for i in $(BINFILES) ; do \
	    if [ -f $$i ]; then \
	      cp $$i $$tdir ; \
	    elif [ -f $(srcdir)/$$i ]; then \
	      cp $(srcdir)/$$i $$tdir ; \
	    else \
	      echo cannot find $$i ; \
	      exit 1 ; \
	    fi ; \
	  done ; \
	  if [ -f sudo_noexec.la ]; then \
	    cp libtool $$tdir ; \
	    $(LIBTOOL) --mode=install $(INSTALL) sudo_noexec.la `pwd`/$$tdir ; \
	    ln $$tdir/sudo_noexec.la $$tdir/sudo_noexec.lai ; \
	    ln -s . $$tdir/.libs ; \
	  fi ; \
	  cp $(srcdir)/INSTALL.binary $$tdir/INSTALL ; \
	  sh ./config.status --file=Makefile.binary && cp Makefile.binary $$tdir/Makefile ; \
	  strip $$tdir/sudo ; \
	  strip $$tdir/visudo ; \
	  cd tmp.$$ARCH && tar Ocf ../sudo-$(VERSION)-$$ARCH.tar sudo-$(VERSION) && cd .. ; \
	  gzip -f --best sudo-$(VERSION)-$$ARCH.tar ; \
	  rm -rf tmp.$$ARCH ; \
	)

depot:
	( \
	  tdir=tmp.depot ; \
	  mkdir $$tdir ; \
	  for i in sudo visudo sudo.man visudo.man sudoers.man sudoers ChangeLog HISTORY LICENSE README TROUBLESHOOTING UPGRADE sample.syslog.conf sample.sudoers; do \
	    if [ -f $$i ]; then \
	      cp $$i $$tdir ; \
	    elif [ -f $(srcdir)/$$i ]; then \
	      cp $(srcdir)/$$i $$tdir ; \
	    else \
	      echo cannot find $$i ; \
	      exit 1 ; \
	    fi ; \
	  done ; \
	  if [ -f sudo_noexec.la ]; then \
	    cp libtool $$tdir ; \
	    $(LIBTOOL) --mode=install $(INSTALL) sudo_noexec.la `pwd`/$$tdir ; \
	  fi ; \
	  sed 's/@@VERSION@@/$(VERSION)/g' <$(srcdir)/sudo.psf >$$tdir/sudo.psf ; \
	  printf '#!/sbin/sh\nrm -f /usr/local/bin/sudoedit\nln /usr/local/bin/sudo /usr/local/bin/sudoedit\n' > $$tdir/sudo-exec.postinstall ; \
	  printf '#!/sbin/sh\nrm -f /usr/local/man/man1m/sudoedit.1m\nln /usr/local/man/man1m/sudo.1m /usr/local/man/man1m/sudoedit.1m\n' > $$tdir/sudo-man.postinstall ; \
	  printf '#!/sbin/sh\nif [ ! -s /etc/sudoers ]; then\n\techo installing /usr/local/doc/sudo/sudoers as /etc/sudoers\n\techo use /usr/local/sbin/visudo to configure sudo\n\tcp /usr/local/doc/sudo/sudoers /etc/sudoers\n\tchmod 440 /etc/sudoers\n\tchown root:root /etc/sudoers\nfi\n' > $$tdir/sudo-config.postinstall ; \
	  chmod 755 $$tdir/sudo-exec.postinstall $$tdir/sudo-man.postinstall $$tdir/sudo-config.postinstall ; \
	  strip $$tdir/sudo ; \
	  strip $$tdir/visudo ; \
	  cd $$tdir ; \
	  swpackage -x target_type=tape -d ../sudo-$(VERSION).depot -s sudo.psf ; \
	  cd .. ; \
	  gzip -f --best sudo-$(VERSION).depot; \
	  rm -rf tmp.depot ; \
	)
@


1.49
log
@Update to sudo 1.7.2p7
@
text
@@


1.48
log
@Update to sudo 1.7.2p6
@
text
@d99 1
a99 1
SHELL = /bin/sh
@


1.47
log
@Remove old $Sudo$ tags; the main sudo tree no longer lives in cvs.
@
text
@d460 3
a462 5
	rm -f ../sudo-$(VERSION).tar.gz
	( cd .. ; TF="/tmp/sudo.dist$$$$" ; rm -f $$TF ; for i in $(DISTFILES) ; \
	  do echo sudo-$(VERSION)/$$i >> $$TF ; done ; \
	  tar Ocf sudo-$(VERSION).tar \
	  `cat $$TF` && gzip --best sudo-$(VERSION).tar && rm -f $$TF)
@


1.46
log
@update to sudo 1.7.2p2
@
text
@a23 2
# $Sudo: Makefile.in,v 1.340 2009/06/15 21:18:53 millert Exp $
#
a405 3
ChangeLog:
	cvs2cl --follow-only trunk

a528 2

.PHONY:	ChangeLog
@


1.45
log
@Upgrade to sudo 1.7.2
@
text
@d156 1
a156 1
	    auth/API
@


1.44
log
@Update to sudo 1.7.1
@
text
@d2 1
a2 1
# Copyright (c) 1996, 1998-2005, 2007-2008
d24 1
a24 1
# $Sudo: Makefile.in,v 1.334 2009/03/11 23:19:56 millert Exp $
d36 1
a36 1
LEX = flex
d112 2
a113 2
       toke.c toke.l tsgetgrpw.c utimes.c visudo.c zero_bytes.c redblack.c \
       selinux.c sesh.c $(AUTH_SRCS)
d122 1
a122 1
       list.h logging.h parse.h sudo.h sudo_nss.h gram.h version.h \
d124 1
a124 1
       emul/timespec.h emul/utime.h redblack.h
d130 1
a130 1
	      toke.o redblack.o zero_bytes.o
d144 1
a144 1
VERSION = 1.7.1
d185 2
a186 2
	@@rm -f $(srcdir)/$@@
	sed '1s/^/.if n .ll 78n/' $< | $(NROFF) -man > $(srcdir)/$@@
d215 1
a215 1
@@DEV@@	$(LEX) $(srcdir)/toke.l
d304 1
a304 1
sudo.o: $(srcdir)/sudo.c $(SUDODEP) sudo_usage.h $(srcdir)/interfaces.h $(srcdir)/version.h
d324 3
a326 1
visudo.o: $(srcdir)/visudo.c $(SUDODEP) $(srcdir)/version.h $(devdir)/gram.h
@


1.43
log
@sync with sudo cvs repo
@
text
@d24 1
a24 1
# $Sudo: Makefile.in,v 1.326 2008/12/03 20:40:47 millert Exp $
d105 9
a113 8
SRCS = aix.c alias.c alloc.c check.c closefrom.c def_data.c defaults.c env.c \
       error.c fileops.c find_path.c fnmatch.c getcwd.c getprogname.c \
       getspwuid.c gettime.c glob.c goodpath.c gram.c gram.y interfaces.c \
       isblank.c lbuf.c ldap.c list.c logging.c match.c mkstemp.c memrchr.c \
       parse.c pwutil.c  set_perms.c sigaction.c snprintf.c strcasecmp.c \
       strerror.c strlcat.c strlcpy.c sudo.c sudo_noexec.c sudo_edit.c \
       sudo_nss.c testsudoers.c tgetpass.c toke.c toke.l tsgetgrpw.c utimes.c \
       visudo.c zero_bytes.c redblack.c selinux.c sesh.c $(AUTH_SRCS)
d120 5
a124 5
HDRS = compat.h def_data.h defaults.h error.h ins_2001.h ins_classic.h \
       ins_csops.h ins_goons.h insults.h interfaces.h lbuf.h list.h \
       logging.h parse.h sudo.h sudo_nss.h gram.h version.h auth/sudo_auth.h \
       emul/charclass.h emul/fnmatch.h emul/glob.h emul/timespec.h \
       emul/utime.h redblack.h
d132 1
a132 1
SUDO_OBJS = $(COMMON_OBJS) $(AUTH_OBJS) @@SUDO_OBJS@@ check.o env.o \
d135 1
a135 1
	    sudo.o sudo_edit.o sudo_nss.o tgetpass.o
d144 1
a144 1
VERSION = 1.7.0
d230 4
d312 2
d375 1
a375 1
	( cd $(srcdir); mansectsu=`echo @@MANSECTSU@@|tr A-Z a-z`; mansectform=`echo @@MANSECTFORM@@|tr A-Z a-z`; sed -n -e '/^=pod/q' -e 's/^/.\\" /p' visudo.pod > $@@; pod2man --quotes=none --date="`date '+%B %e, %Y'`" --section=$$mansectsu --release=$(VERSION) --center="MAINTENANCE COMMANDS" visudo.pod | sed -e "s/(5)/($$mansectform)/" -e "s/(8)/($$mansectsu)/" >> $@@ )
d393 1
a393 1
	( cd $(srcdir); mansectsu=`echo @@MANSECTSU@@|tr A-Z a-z`; mansectform=`echo @@MANSECTFORM@@|tr A-Z a-z`; sed -n -e '/^=pod/q' -e 's/^/.\\" /p' sudoers.ldap.pod > $@@; pod2man --quotes=none --date="`date '+%B %e, %Y'`" --section=$$mansectform --release=$(VERSION) --center="MAINTENANCE COMMANDS" sudoers.ldap.pod | sed -e "s/(5)/($$mansectform)/" -e "s/(8)/($$mansectsu)/" >> $@@ )
d417 1
a417 1
install-binaries: $(PROGS)
d424 1
a424 1
install-noexec: sudo_noexec.la
d427 1
a427 1
install-sudoers:
d432 1
a432 1
install-man:
@


1.42
log
@Upgrade to sudo 1.7.  See the WHATSNEW files for details.
@
text
@d24 1
a24 1
# $Sudo: Makefile.in,v 1.325 2008/11/03 18:19:14 millert Exp $
d438 1
a438 2
	-rm -f *.o *.lo $(PROGS) testsudoers core sudo.core visudo.core \
	       testsudoers.core
@


1.41
log
@Update to sudo 1.6.9p17
@
text
@d2 2
a3 1
# Copyright (c) 1996, 1998-2007 Todd C. Miller <Todd.Miller@@courtesan.com>
d24 1
a24 1
# $Sudo: Makefile.in,v 1.246.2.32 2008/06/22 20:29:03 millert Exp $
d30 1
a32 1
VPATH = @@srcdir@@
d38 1
a38 1
NROFF = nroff
d65 2
a69 2
libexecdir = @@libexecdir@@
datarootdir = @@datarootdir@@
d97 1
a97 1
DEFS = @@OSDEFS@@ -D_PATH_SUDOERS=\"$(sudoersdir)/sudoers\" -D_PATH_SUDOERS_TMP=\"$(sudoersdir)/sudoers.tmp\" -DSUDOERS_UID=$(sudoers_uid) -DSUDOERS_GID=$(sudoers_gid) -DSUDOERS_MODE=$(sudoers_mode)
d105 8
a112 7
SRCS = alloc.c alloca.c check.c closefrom.c def_data.c defaults.c env.c err.c \
       fileops.c find_path.c fnmatch.c getcwd.c getprogname.c getspwuid.c \
       gettime.c glob.c goodpath.c interfaces.c ldap.c lex.yy.c lsearch.c \
       logging.c memrchr.c mkstemp.c parse.c parse.lex parse.yacc set_perms.c \
       sigaction.c snprintf.c strcasecmp.c strerror.c strlcat.c strlcpy.c \
       sudo.c sudo_noexec.c sudo.tab.c sudo_edit.c testsudoers.c tgetpass.c \
       utimes.c visudo.c zero_bytes.c selinux.c sesh.c $(AUTH_SRCS)
d119 5
a123 4
HDRS = compat.h def_data.h defaults.h ins_2001.h ins_classic.h ins_csops.h \
       ins_goons.h insults.h interfaces.h logging.h parse.h sudo.h sudo.tab.h \
       version.h auth/sudo_auth.h emul/err.h emul/fnmatch.h emul/search.h \
       emul/utime.h emul/glob.h emul/timespec.h
d127 29
a155 24
PARSEOBJS = sudo.tab.o lex.yy.o alloc.o defaults.o

SUDOBJS = check.o env.o getspwuid.o gettime.o goodpath.o fileops.o find_path.o \
	  interfaces.o logging.o parse.o set_perms.o sudo.o sudo_edit.o \
	  tgetpass.o zero_bytes.o @@SUDO_OBJS@@ $(AUTH_OBJS) $(PARSEOBJS)

VISUDOBJS = visudo.o fileops.o gettime.o goodpath.o find_path.o $(PARSEOBJS)

TESTOBJS = interfaces.o testsudoers.o $(PARSEOBJS)

LIBOBJS = @@LIBOBJS@@ @@ALLOCA@@

VERSION = 1.6.9p17

DISTFILES = $(SRCS) $(HDRS) BUGS CHANGES HISTORY INSTALL INSTALL.configure \
            LICENSE Makefile.in PORTING README README.LDAP \
            TROUBLESHOOTING UPGRADE aclocal.m4 acsite.m4 aixcrypt.exp \
            config.guess config.h.in config.sub configure configure.in \
            def_data.in fnmatch.3 indent.pro install-sh ltmain.sh \
            mkdefaults mkinstalldirs pathnames.h.in sample.pam \
            sample.syslog.conf sample.sudoers schema.OpenLDAP \
            schema.iPlanet sudo.cat sudo.man.in sudo.pod sudoers \
            sudoers.cat sudoers.man.in sudoers.pod sudoers2ldif \
            visudo.cat visudo.man.in visudo.pod auth/API
d157 1
a157 1
BINFILES= BUGS CHANGES HISTORY LICENSE README TROUBLESHOOTING \
d162 1
a162 1
BINSPECIAL= INSTALL.binary Makefile.binary libtool
d165 2
a166 1
	  $(srcdir)/logging.h config.h def_data.h pathnames.h
d175 1
a175 1
.SUFFIXES: .o .c .h .lex .yacc .man .cat .lo
d185 1
a185 1
	$(NROFF) -man $< > $(srcdir)/$@@
d187 2
a188 2
sudo: $(SUDOBJS) $(LIBOBJS)
	$(CC) -o $@@ $(SUDOBJS) $(LIBOBJS) $(SUDO_LDFLAGS) $(SUDO_LIBS)
d190 2
a191 2
visudo: $(VISUDOBJS) $(LIBOBJS)
	$(CC) -o $@@ $(VISUDOBJS) $(LIBOBJS) $(LDFLAGS) $(LIBS) $(NET_LIBS)
d193 2
a194 2
testsudoers: $(TESTOBJS) $(LIBOBJS)
	$(CC) -o $@@ $(TESTOBJS) $(LIBOBJS) $(LDFLAGS) $(LIBS) $(NET_LIBS)
d203 1
a203 1
@@DEV@@PARSESRCS = sudo.tab.h sudo.tab.c lex.yy.c def_data.c def_data.h
d205 12
a216 9
# Uncomment the following if you intend to modify parse.yacc
@@DEV@@sudo.tab.c sudo.tab.h: parse.yacc
@@DEV@@	rm -f sudo.tab.h sudo.tab.c
@@DEV@@	$(YACC) -d -b sudo $(srcdir)/parse.yacc

# Uncomment the following if you intend to modify parse.lex
@@DEV@@lex.yy.c: parse.lex
@@DEV@@	rm -f lex.yy.c
@@DEV@@	$(LEX) $(srcdir)/parse.lex
d219 1
a219 1
@@DEV@@def_data.h def_data.c: def_data.in
d223 102
a324 36
alloc.o: alloc.c $(SUDODEP)
check.o: check.c $(SUDODEP)
closefrom.o: closefrom.c config.h
env.o: env.c $(SUDODEP)
err.o: err.c config.h compat.h emul/err.h
fileops.o: fileops.c $(SUDODEP)
find_path.o: find_path.c $(SUDODEP)
getprogname.o: getprogname.c config.h
getspwuid.o: getspwuid.c $(SUDODEP)
goodpath.o: goodpath.c $(SUDODEP)
logging.o: logging.c $(SUDODEP)
set_perms.o: set_perms.c $(SUDODEP)
tgetpass.o: tgetpass.c $(SUDODEP)
visudo.o: visudo.c $(SUDODEP) version.h
sudo.o: sudo.c $(SUDODEP) interfaces.h version.h
interfaces.o: interfaces.c $(SUDODEP) interfaces.h
testsudoers.o: testsudoers.c $(SUDODEP) parse.h interfaces.h
parse.o: parse.c $(SUDODEP) parse.h interfaces.h
lex.yy.o: lex.yy.c $(SUDODEP) parse.h sudo.tab.h
sudo.tab.o: sudo.tab.c $(SUDODEP) parse.h sudo.tab.c sudo.tab.h
defaults.o: defaults.c $(SUDODEP) def_data.c auth/sudo_auth.h
fnmatch.o: fnmatch.c config.h compat.h emul/fnmatch.h
getcwd.o: getcwd.c config.h compat.h
glob.o: glob.c config.h compat.h emul/glob.h
lsearch.o: lsearch.c config.h compat.h emul/search.h
memrchr.o: memrchr.c config.h compat.h
mkstemp.o: mkstemp.c config.h compat.h
selinux.o: selinux.c $(SUDODEP)
snprintf.o: snprintf.c config.h compat.h
strcasecmp.o: strcasecmp.c config.h
strlcat.o: strlcat.c config.h
strlcpy.o: strlcpy.c config.h
strerror.o: strerror.c config.h
utime.o: utime.c config.h pathnames.h compat.h emul/utime.h
ldap.o: ldap.c $(SUDODEP) parse.h
sudo_edit.o: sudo_edit.c $(SUDODEP)
a325 1
# Authentication functions live in "auth" dir and so need extra care
d384 18
d431 1
a436 6
tags: $(SRCS)
	ctags $(SRCS)

TAGS: $(SRCS)
	etags $(SRCS)

d438 1
a438 1
	-rm -f *.o $(PROGS) testsudoers core sudo.core visudo.core \
d445 3
a447 2
		config.log libtool sudo_noexec.lo .libs $(PARSESRCS) \
		sudo.man sudoers.man visudo.man
d488 2
a489 2
	  strip sudo ; \
	  strip visudo ; \
d491 1
a491 1
	  gzip --best sudo-$(VERSION)-$$ARCH.tar ; \
d494 34
@


1.40
log
@update to sudo 1.6.9p12
@
text
@d23 1
a23 1
# $Sudo: Makefile.in,v 1.246.2.23 2008/01/14 12:22:57 millert Exp $
d65 1
d67 1
d110 1
a110 1
       utimes.c visudo.c zero_bytes.c $(AUTH_SRCS)
d136 1
a136 1
VERSION = 1.6.9p12
d238 1
d282 1
a282 1
	( cd $(srcdir); mansectsu=`echo @@MANSECTSU@@|tr A-Z a-z`; mansectform=`echo @@MANSECTFORM@@|tr A-Z a-z`; sed -n -e 1d -e '/^=pod/q' -e 's/^/.\\" /p' sudo.pod > $@@; pod2man --quotes=none --date="`date '+%B %e, %Y'`" --section=$$mansectsu --release=$(VERSION) --center="MAINTENANCE COMMANDS" sudo.pod | sed -e "s/(5)/($$mansectform)/" -e "s/(8)/($$mansectsu)/" >> $@@ )
d291 1
a291 1
	( cd $(srcdir); mansectsu=`echo @@MANSECTSU@@|tr A-Z a-z`; mansectform=`echo @@MANSECTFORM@@|tr A-Z a-z`; sed -n -e 1d -e '/^=pod/q' -e 's/^/.\\" /p' visudo.pod > $@@; pod2man --quotes=none --date="`date '+%B %e, %Y'`" --section=$$mansectsu --release=$(VERSION) --center="MAINTENANCE COMMANDS" visudo.pod | sed -e "s/(5)/($$mansectform)/" -e "s/(8)/($$mansectsu)/" >> $@@ )
d300 1
a300 1
	( cd $(srcdir); mansectsu=`echo @@MANSECTSU@@|tr A-Z a-z`; mansectform=`echo @@MANSECTFORM@@|tr A-Z a-z`; sed -n -e 1d -e '/^=pod/q' -e 's/^/.\\" /p' sudoers.pod > $@@; pod2man --quotes=none --date="`date '+%B %e, %Y'`" --section=$$mansectform --release=$(VERSION) --center="MAINTENANCE COMMANDS" sudoers.pod | sed -e "s/(5)/($$mansectform)/" -e "s/(8)/($$mansectsu)/" >> $@@ )
a318 1

d320 1
d323 1
a323 4
	$(LIBTOOL) --mode=install $(INSTALL) sudo_noexec.la $(DESTDIR)$(noexecdir)

bininst-noexec: sudo_noexec.la
	$(LIBTOOL) --mode=install $(INSTALL) sudo_noexec.la $(DESTDIR)$(noexecdir)
@


1.39
log
@Update to sudo 1.6.9p11
@
text
@d23 1
a23 1
# $Sudo: Makefile.in,v 1.246.2.22 2008/01/05 23:31:51 millert Exp $
d134 1
a134 1
VERSION = 1.6.9p11
@


1.38
log
@update to sudo 1.6.9p10
@
text
@d23 1
a23 1
# $Sudo: Makefile.in,v 1.246.2.21 2007/12/17 19:18:14 millert Exp $
d134 1
a134 1
VERSION = 1.6.9p10
@


1.37
log
@update to sudo 1.6.9p9
@
text
@d23 1
a23 1
# $Sudo: Makefile.in,v 1.246.2.20 2007/12/03 10:34:32 millert Exp $
d134 1
a134 1
VERSION = 1.6.9p9
@


1.36
log
@update to sudo 1.6.9p8
@
text
@d23 1
a23 1
# $Sudo: Makefile.in,v 1.246.2.18 2007/11/02 19:15:16 millert Exp $
d46 1
a46 1
SUDO_LIBS = @@SUDO_LIBS@@ @@AFS_LIBS@@ $(LIBS) $(NET_LIBS)
d134 1
a134 1
VERSION = 1.6.9p8
@


1.35
log
@Update to sudo 1.6.9p7
@
text
@d23 1
a23 1
# $Sudo: Makefile.in,v 1.246.2.17 2007/10/25 15:52:02 millert Exp $
d134 1
a134 1
VERSION = 1.6.9p7
@


1.34
log
@Update to sudo 1.6.9p6
@
text
@d23 1
a23 1
# $Sudo: Makefile.in,v 1.246.2.16 2007/10/09 13:29:20 millert Exp $
d134 1
a134 1
VERSION = 1.6.9p6
@


1.33
log
@update to sudo 1.6.9p5
@
text
@d23 1
a23 1
# $Sudo: Makefile.in,v 1.246.2.15 2007/09/05 23:23:44 millert Exp $
d134 1
a134 1
VERSION = 1.6.9p5
@


1.32
log
@Update to sudo 1.6.9p4.  Basically IPv6 support and improved man pages.
@
text
@d23 1
a23 1
# $Sudo: Makefile.in,v 1.246.2.13 2007/08/15 14:16:57 millert Exp $
d66 1
d134 1
a134 1
VERSION = 1.6.9p4
d137 1
a137 1
            LICENSE Makefile.in PORTING README README.LDAP TODO \
d147 1
a147 1
BINFILES= BUGS CHANGES HISTORY LICENSE README TODO TROUBLESHOOTING \
@


1.31
log
@bump sudo version to 1.6.9p3
@
text
@d23 1
a23 1
# $Sudo: Makefile.in,v 1.246.2.10 2007/07/26 14:05:55 millert Exp $
d133 1
a133 1
VERSION = 1.6.9p3
@


1.30
log
@Update to sudo 1.6.9p2
@
text
@d133 1
a133 1
VERSION = 1.6.9p2
@


1.29
log
@Update to sudo 1.6.9p1.  Note that the environment handling in sudo
1.6.9 has changed relative to older versions.  Sudo now starts
commands with a minimal environment containing the variables in the
env_keep and env_check lists.  This behavior is configurable in the
sudoers file.  Please see the "SECURITY NOTES" section in the sudo
manual.
@
text
@d133 1
a133 1
VERSION = 1.6.9p1
@


1.28
log
@Update to sudo 1.6.8p9
@
text
@d2 1
a2 1
# Copyright (c) 1996, 1998-2004 Todd C. Miller <Todd.Miller@@courtesan.com>
d23 1
a23 1
# $Sudo: Makefile.in,v 1.253 2004/09/15 20:11:22 millert Exp $
d103 5
a107 5
       gettime.c goodpath.c interfaces.c ldap.c lex.yy.c lsearch.c logging.c \
       parse.c parse.lex parse.yacc set_perms.c sigaction.c snprintf.c \
       strcasecmp.c strerror.c strlcat.c strlcpy.c sudo.c sudo_noexec.c \
       sudo.tab.c sudo_edit.c testsudoers.c tgetpass.c utimes.c visudo.c \
       zero_bytes.c $(AUTH_SRCS)
d117 1
a117 1
       emul/utime.h
d133 1
a133 1
VERSION = 1.6.8p9
d136 9
a144 8
	    LICENSE Makefile.in PORTING README README.LDAP RUNSON TODO \
	    TROUBLESHOOTING UPGRADE aclocal.m4 acsite.m4 aixcrypt.exp \
	    config.guess config.h.in config.sub configure configure.in \
	    def_data.in fnmatch.3 indent.pro install-sh ltmain.sh mkdefaults \
	    mkinstalldirs pathnames.h.in sample.pam sample.syslog.conf \
	    sample.sudoers sudo.cat sudo.man.in sudo.pod sudoers sudoers.cat \
	    sudoers.man.in sudoers.pod sudoers2ldif visudo.cat visudo.man.in \
	    visudo.pod auth/API
d184 3
d231 1
d233 2
d242 1
@


1.27
log
@update to sudo 1.6.8p8
@
text
@d133 1
a133 1
VERSION = 1.6.8p8
@


1.26
log
@Update to Sudo 1.6.8p7
@
text
@d133 1
a133 1
VERSION = 1.6.8p7
@


1.25
log
@update to sudo 1.6.8p5
@
text
@d133 1
a133 1
VERSION = 1.6.8p5
@


1.24
log
@Update to sudo 1.6.8p4
@
text
@d133 1
a133 1
VERSION = 1.6.8p4
@


1.23
log
@Update to sudo 1.6.8p2
@
text
@d133 1
a133 1
VERSION = 1.6.8p2
@


1.22
log
@Update to sudo 1.6.8p1
@
text
@d133 1
a133 1
VERSION = 1.6.8p1
@


1.21
log
@Use closefrom() if it exists; from the sudo cvs repo
@
text
@d2 1
a2 2
# Copyright (c) 1996, 1998-2003 Todd C. Miller <Todd.Miller@@courtesan.com>
# All rights reserved.
d4 3
a6 3
# Redistribution and use in source and binary forms, with or without
# modification, are permitted provided that the following conditions
# are met:
d8 7
a14 24
# 1. Redistributions of source code must retain the above copyright
#    notice, this list of conditions and the following disclaimer.
#
# 2. Redistributions in binary form must reproduce the above copyright
#    notice, this list of conditions and the following disclaimer in the
#    documentation and/or other materials provided with the distribution.
#
# 3. The name of the author may not be used to endorse or promote products
#    derived from this software without specific prior written permission
#    from the author.
#
# 4. Products derived from this software may not be called "Sudo" nor
#    may "Sudo" appear in their names without specific prior written
#    permission from the author.
#
# THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES,
# INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY
# AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL
# THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
# EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
# PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
# OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
# WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
# OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
d23 1
a23 1
# $Sudo: Makefile.in,v 1.233 2003/04/16 00:42:09 millert Exp $
d30 1
d38 1
d65 1
d103 5
a107 4
       goodpath.c interfaces.c lex.yy.c lsearch.c logging.c parse.c parse.lex \
       parse.yacc set_perms.c sigaction.c snprintf.c strcasecmp.c strerror.c \
       strlcat.c strlcpy.c sudo.c sudo.tab.c testsudoers.c tgetpass.c utime.c \
       visudo.c zero_bytes.c $(AUTH_SRCS)
d123 3
a125 3
SUDOBJS = check.o env.o getspwuid.o goodpath.o fileops.o find_path.o \
	  interfaces.o logging.o parse.o set_perms.o sudo.o tgetpass.o \
	  zero_bytes.o $(AUTH_OBJS) $(PARSEOBJS)
d127 1
a127 1
VISUDOBJS = visudo.o fileops.o goodpath.o find_path.o $(PARSEOBJS)
d133 1
a133 1
VERSION = 1.6.7p5
d136 8
a143 7
	    LICENSE Makefile.in PORTING README RUNSON TODO TROUBLESHOOTING \
	    UPGRADE aclocal.m4 aixcrypt.exp config.guess config.h.in \
            config.sub configure configure.in def_data.in fnmatch.3 indent.pro \
	    install-sh mkdefaults mkinstalldirs pathnames.h.in sample.pam \
	    sample.syslog.conf sample.sudoers sudo.cat sudo.man.in sudo.pod \
	    sudoers sudoers.cat sudoers.man.in sudoers.pod visudo.cat \
	    visudo.man.in visudo.pod auth/API
d150 1
a150 1
BINSPECIAL= INSTALL.binary Makefile.binary
d162 1
a162 1
.SUFFIXES: .o .c .h .lex .yacc .man .cat
d167 3
d183 5
a187 2
# Uncomment the following if you want "make clean" to clean the parser
@@DEV@@PARSESRCS = sudo.tab.h sudo.tab.c lex.yy.c
d234 1
d295 1
a295 1
install: install-dirs install-binaries install-sudoers install-man
d300 2
a301 1
	    $(DESTDIR)$(mandirsu) $(DESTDIR)$(mandirform)
d305 3
d310 6
d323 2
d345 3
a347 2
	-rm -f Makefile *.man pathnames.h config.h config.status config.cache \
	       config.log $(PARSESRCS)
a364 2
	@@mkdir tmp.`arch -l`
	@@mkdir tmp.`arch -l`/sudo-$(VERSION)
d366 4
a369 1
	  tdir=tmp.`arch -l`/sudo-$(VERSION) ; \
d380 6
d387 7
a393 9
	  sed -e 's/@@_MANTYPE@@/$(mantype)/g' -e 's/@@_mansectsu@@/$(mansectsu)/g' \
	      -e 's/@@_mansectform@@/$(mansectform)/g' $(srcdir)/Makefile.binary \
	      > $$tdir/Makefile ; \
	)  
	strip sudo
	strip visudo
	( cd tmp.`arch -l` && tar Ocf ../sudo-$(VERSION)-`arch -l`.tar sudo-$(VERSION) )
	gzip --best sudo-$(VERSION)-`arch -l`.tar
	rm -rf tmp.`arch -l`
@


1.20
log
@Get rid of volatile variables that were a vain attempt to prevent the
compiler from optimizing away memset() calls.  Instead, add a new function,
zero_bytes(), to clear buffers with sensitive contents.
Taken from the sudo cvs repo, man.
@
text
@d116 3
a118 3
SRCS = alloc.c alloca.c check.c def_data.c defaults.c env.c err.c fileops.c \
       find_path.c fnmatch.c getcwd.c getprogname.c getspwuid.c goodpath.c \
       interfaces.c lex.yy.c lsearch.c logging.c parse.c parse.lex \
d213 1
@


1.19
log
@Update to 1.6.7p5
@
text
@d121 1
a121 1
       visudo.c $(AUTH_SRCS)
d139 1
a139 1
	  $(AUTH_OBJS) $(PARSEOBJS)
@


1.18
log
@sync w/ the sudo cvs tree and sudo 1.6.7p4
@
text
@d147 1
a147 1
VERSION = 1.6.7p4
@


1.17
log
@Sync with sudo 1.6.7p3; fixes kerberos 5 compilation issues w/ MIT kerberos.
@
text
@d35 4
d41 1
a41 1
# $Sudo: Makefile.in,v 1.232 2003/04/02 18:45:35 millert Exp $
d147 1
a147 1
VERSION = 1.6.7p3
@


1.16
log
@Sync with my sudo cvs repo:
 o update to sudo 1.6.7p2
 o use warn/err throughout
@
text
@d143 1
a143 1
VERSION = 1.6.7p2
@


1.15
log
@Update to sudo 1.6.7p1; fixes false positives in the oflow detection
of expand_prompt() introduced in sudo 1.6.7.
@
text
@d37 1
a37 1
# $Sudo: Makefile.in,v 1.230 2003/03/15 20:31:02 millert Exp $
d112 2
a113 2
SRCS = alloc.c alloca.c check.c def_data.c defaults.c env.c fileops.c \
       find_path.c fnmatch.c getcwd.c getspwuid.c goodpath.c \
d126 2
a127 1
       version.h auth/sudo_auth.h emul/fnmatch.h emul/search.h emul/utime.h
d143 1
a143 1
VERSION = 1.6.7p1
d210 1
d213 1
@


1.14
log
@update to what will soon be sudo 1.6.7
@
text
@d142 1
a142 1
VERSION = 1.6.7
@


1.13
log
@Update to sudo 1.6.6
@
text
@d2 1
a2 1
# Copyright (c) 1996, 1998-2002 Todd C. Miller <Todd.Miller@@courtesan.com>
d37 1
a37 1
# $Sudo: Makefile.in,v 1.225 2002/04/18 15:41:30 millert Exp $
d116 2
a117 2
       sudo.c sudo.tab.c testsudoers.c tgetpass.c utime.c visudo.c \
       $(AUTH_SRCS)
d121 2
a122 1
	    auth/secureware.c auth/securid.c auth/sia.c auth/sudo_auth.c
d142 1
a142 1
VERSION = 1.6.6
d229 2
d261 2
d268 1
a268 1
	( cd $(srcdir); mansectsu=`echo @@MANSECTSU@@|tr A-Z a-z`; mansectform=`echo @@MANSECTFORM@@|tr A-Z a-z`; pod2man --quotes=none --date="`date '+%B %e, %Y'`" --section=$$mansectsu --release=$(VERSION) --center="MAINTENANCE COMMANDS" sudo.pod | sed -e "s/(5)/($$mansectform)/" -e "s/(8)/($$mansectsu)/" > $@@ )
d277 1
a277 1
	( cd $(srcdir); mansectsu=`echo @@MANSECTSU@@|tr A-Z a-z`; mansectform=`echo @@MANSECTFORM@@|tr A-Z a-z`; pod2man --quotes=none --date="`date '+%B %e, %Y'`" --section=$$mansectsu --release=$(VERSION) --center="MAINTENANCE COMMANDS" visudo.pod | sed -e "s/(5)/($$mansectform)/" -e "s/(8)/($$mansectsu)/" > $@@ )
d286 1
a286 1
	( cd $(srcdir); mansectsu=`echo @@MANSECTSU@@|tr A-Z a-z`; mansectform=`echo @@MANSECTFORM@@|tr A-Z a-z`; pod2man --quotes=none --date="`date '+%B %e, %Y'`" --section=$$mansectform --release=$(VERSION) --center="MAINTENANCE COMMANDS" sudoers.pod | sed -e "s/(5)/($$mansectform)/" -e "s/(8)/($$mansectsu)/" > $@@ )
@


1.12
log
@update to sudo 1.6.5p2
@
text
@d37 1
a37 1
# $Sudo: Makefile.in,v 1.224 2002/01/20 00:43:16 millert Exp $
d141 1
a141 1
VERSION = 1.6.5
@


1.11
log
@update to sudo 1.6.5
@
text
@d37 1
a37 1
# $Sudo: Makefile.in,v 1.223 2002/01/16 23:37:33 millert Exp $
d291 3
a293 3
	$(SHELL) $(srcdir)/mkinstalldirs $(DESTDIR)/$(sudodir) \
	    $(DESTDIR)/$(visudodir) $(DESTDIR)/$(sudoersdir) \
	    $(DESTDIR)/$(mandirsu) $(DESTDIR)/$(mandirform)
d296 2
a297 2
	$(INSTALL) -O $(install_uid) -G $(install_gid) -M 4111 -s sudo $(DESTDIR)/$(sudodir)/sudo
	$(INSTALL) -O $(install_uid) -G $(install_gid) -M 0111 -s visudo $(DESTDIR)/$(visudodir)/visudo
d300 1
a300 1
	test -f $(DESTDIR)/$(sudoersdir)/sudoers || \
d302 1
a302 1
		$(srcdir)/sudoers $(DESTDIR)/$(sudoersdir)/sudoers
d305 3
a307 3
	$(INSTALL) -O $(install_uid) -G $(install_gid) -M 0444 @@mansrcdir@@/sudo.$(mantype) $(DESTDIR)/$(mandirsu)/sudo.$(mansectsu)
	$(INSTALL) -O $(install_uid) -G $(install_gid) -M 0444 @@mansrcdir@@/visudo.$(mantype) $(DESTDIR)/$(mandirsu)/visudo.$(mansectsu)
	$(INSTALL) -O $(install_uid) -G $(install_gid) -M 0444 @@mansrcdir@@/sudoers.$(mantype) $(DESTDIR)/$(mandirform)/sudoers.$(mansectform)
@


1.10
log
@sync with sudo 1.6.4-final
@
text
@d37 1
a37 1
# $Sudo: Makefile.in,v 1.222 2002/01/12 19:00:14 millert Exp $
d141 1
a141 1
VERSION = 1.6.4
@


1.9
log
@sync with sudo 1.6.4rc2
@
text
@d37 1
a37 1
# $Sudo: Makefile.in,v 1.219 2002/01/08 15:00:17 millert Exp $
d347 2
a348 1
	( cd tmp.`arch -l`/sudo-$(VERSION) ; \
d350 2
a351 2
	    if [ -f ../../$$i ]; then \
	      cp ../../$$i . ; \
d353 1
a353 1
	      cp $(srcdir)/$$i . ; \
d355 2
a356 1
	      cp ../../$(srcdir)/$$i . ; \
d359 4
a362 3
	  strip sudo ; \
	  strip visudo ; \
	  cd .. ; tar Ocf ../sudo-$(VERSION)-`arch -l`.tar sudo-$(VERSION) ; \
d364 3
@


1.8
log
@Update to sudo 1.6.4
@
text
@d2 1
a2 1
# Copyright (c) 1996, 1998-2001 Todd C. Miller <Todd.Miller@@courtesan.com>
d37 1
a37 1
# $Sudo: Makefile.in,v 1.218 2002/01/01 21:53:12 millert Exp $
@


1.7
log
@A few updates from the sudo developement tree:
- Add bsd authentication support (currently disabled)
- Always check setenv() return value
- Fix umask disabling
@
text
@d2 1
a2 1
# Copyright (c) 1996, 1998-2000 Todd C. Miller <Todd.Miller@@courtesan.com>
d37 1
a37 1
# $Sudo: Makefile.in,v 1.200 2000/03/27 02:57:52 millert Exp $
d52 1
a52 1
# Which install program?
d112 6
a117 5
SRCS = alloc.c alloca.c check.c defaults.c fileops.c find_path.c fnmatch.c \
       getcwd.c getspwuid.c goodpath.c interfaces.c lex.yy.c lsearch.c \
       logging.c parse.c parse.lex parse.yacc putenv.c snprintf.c strcasecmp.c \
       strerror.c sudo.c sudo.tab.c sudo_setenv.c testsudoers.c tgetpass.c \
       utime.c visudo.c $(AUTH_SRCS)
d123 3
a125 3
HDRS = compat.h defaults.h ins_2001.h ins_classic.h ins_csops.h ins_goons.h \
       insults.h interfaces.h logging.h parse.h sudo.h sudo.tab.h version.h \
       auth/sudo_auth.h emul/fnmatch.h emul/search.h emul/utime.h
d131 2
a132 2
SUDOBJS = check.o getspwuid.o goodpath.o fileops.o find_path.o interfaces.o \
	  logging.o parse.o sudo.o sudo_setenv.o tgetpass.o \
d135 1
a135 1
VISUDOBJS = visudo.o fileops.o $(PARSEOBJS)
d141 1
a141 1
VERSION = 1.6.3
d143 1
a143 1
DISTFILES = $(SRCS) $(HDRS) BUGS CHANGES FAQ HISTORY INSTALL INSTALL.configure \
d145 6
a150 6
	    UPGRADE acsite.m4 aixcrypt.exp config.guess config.h.in config.sub \
	    configure configure.in fnmatch.3 indent.pro install-sh \
	    mkinstalldirs pathnames.h.in sample.pam sample.syslog.conf \
	    sample.sudoers sudo.cat sudo.man.in sudo.pod sudoers sudoers.cat \
	    sudoers.man.in sudoers.pod visudo.cat visudo.man.in visudo.pod \
	    auth/API
d160 1
a160 1
	  $(srcdir)/logging.h config.h pathnames.h
d200 4
d207 1
d213 1
a213 1
sudo_setenv.o: sudo_setenv.c $(SUDODEP)
d221 2
a222 2
sudo.tab.o: sudo.tab.c $(SUDODEP) parse.h
defaults.o: defaults.c $(SUDODEP) auth/sudo_auth.h
a225 1
putenv.o: putenv.c config.h compat.h
d263 1
a263 1
	(cd $(srcdir); pod2man --section=`echo @@MANSECTSU@@|tr A-Z a-z` --release=$(VERSION) --center="MAINTENANCE COMMANDS" sudo.pod > $(srcdir)/$@@)
d272 1
a272 1
	(cd $(srcdir); pod2man --section=`echo @@MANSECTSU@@|tr A-Z a-z` --release=$(VERSION) --center="MAINTENANCE COMMANDS" visudo.pod > $(srcdir)/$@@)
d281 1
a281 1
	(cd $(srcdir); pod2man --section=`echo @@MANSECTFORM@@|tr A-Z a-z` --release=$(VERSION) --center="FILE FORMATS" sudoers.pod | sed 's/"\\f(CW""\\fR"/\\f(CW""\\fR/' > $(srcdir)/$@@)
d291 3
a293 1
	$(SHELL) $(srcdir)/mkinstalldirs $(sudodir) $(visudodir) $(sudoersdir) $(mandirsu) $(mandirform)
d296 2
a297 2
	$(INSTALL) -o $(install_uid) -g $(install_gid) -m 4111 -s sudo $(sudodir)/sudo
	$(INSTALL) -o $(install_uid) -g $(install_gid) -m 0111 -s visudo $(visudodir)/visudo
d300 3
a302 9
	@@if [ -f $(sudoersdir)/sudoers ]; then \
	    echo "Setting user/group and mode on existing $(sudoersdir)/sudoers file."; \
	    chown $(sudoers_uid) $(sudoersdir)/sudoers; \
	    chgrp $(sudoers_gid) $(sudoersdir)/sudoers; \
	    chmod $(sudoers_mode) $(sudoersdir)/sudoers; \
	else \
	    $(INSTALL) -o $(sudoers_uid) -g $(sudoers_gid) -m $(sudoers_mode) \
		$(srcdir)/sudoers $(sudoersdir)/sudoers; \
	fi
d305 3
a307 3
	$(INSTALL) -o $(install_uid) -g $(install_gid) -m 0444 @@mansrcdir@@/sudo.$(mantype) $(mandirsu)/sudo.$(mansectsu)
	$(INSTALL) -o $(install_uid) -g $(install_gid) -m 0444 @@mansrcdir@@/visudo.$(mantype) $(mandirsu)/visudo.$(mansectsu)
	$(INSTALL) -o $(install_uid) -g $(install_gid) -m 0444 @@mansrcdir@@/sudoers.$(mantype) $(mandirform)/sudoers.$(mansectform)
d357 2
a358 10
	  ln -s TROUBLESHOOTING FAQ ; \
	  for i in $(BINSPECIAL) ; do \
	    if [ -f ../../$$i ]; then \
	      cp ../../$$i `basename $$i .binary` ; \
	    elif [ -f $(srcdir)/$$i ]; then \
	      cp $(srcdir)/$$i `basename $$i .binary` ; \
	    else \
	      cp ../../$(srcdir)/$$i `basename $$i .binary` ; \
	    fi ; \
	  done ; \
@


1.7.2.1
log
@update to sudo 1.6.5p1
@
text
@d2 1
a2 1
# Copyright (c) 1996, 1998-2002 Todd C. Miller <Todd.Miller@@courtesan.com>
d37 1
a37 1
# $Sudo: Makefile.in,v 1.223 2002/01/16 23:37:33 millert Exp $
d52 1
a52 1
# Our install program supports extra flags...
d112 5
a116 6
SRCS = alloc.c alloca.c check.c def_data.c defaults.c env.c fileops.c \
       find_path.c fnmatch.c getcwd.c getspwuid.c goodpath.c \
       interfaces.c lex.yy.c lsearch.c logging.c parse.c parse.lex \
       parse.yacc set_perms.c sigaction.c snprintf.c strcasecmp.c strerror.c \
       sudo.c sudo.tab.c testsudoers.c tgetpass.c utime.c visudo.c \
       $(AUTH_SRCS)
d122 3
a124 3
HDRS = compat.h def_data.h defaults.h ins_2001.h ins_classic.h ins_csops.h \
       ins_goons.h insults.h interfaces.h logging.h parse.h sudo.h sudo.tab.h \
       version.h auth/sudo_auth.h emul/fnmatch.h emul/search.h emul/utime.h
d130 2
a131 2
SUDOBJS = check.o env.o getspwuid.o goodpath.o fileops.o find_path.o \
	  interfaces.o logging.o parse.o set_perms.o sudo.o tgetpass.o \
d134 1
a134 1
VISUDOBJS = visudo.o fileops.o goodpath.o find_path.o $(PARSEOBJS)
d140 1
a140 1
VERSION = 1.6.5
d142 1
a142 1
DISTFILES = $(SRCS) $(HDRS) BUGS CHANGES HISTORY INSTALL INSTALL.configure \
d144 6
a149 6
	    UPGRADE aclocal.m4 aixcrypt.exp config.guess config.h.in \
            config.sub configure configure.in def_data.in fnmatch.3 indent.pro \
	    install-sh mkdefaults mkinstalldirs pathnames.h.in sample.pam \
	    sample.syslog.conf sample.sudoers sudo.cat sudo.man.in sudo.pod \
	    sudoers sudoers.cat sudoers.man.in sudoers.pod visudo.cat \
	    visudo.man.in visudo.pod auth/API
d159 1
a159 1
	  $(srcdir)/logging.h config.h def_data.h pathnames.h
a198 4
# Uncomment the following if you intend to modify def_data.in
@@DEV@@def_data.h def_data.c: def_data.in
@@DEV@@	perl $(srcdir)/mkdefaults -o def_data $(srcdir)/def_data.in

a201 1
env.o: env.c $(SUDODEP)
d207 1
a207 1
set_perms.o: set_perms.c $(SUDODEP)
d215 2
a216 2
sudo.tab.o: sudo.tab.c $(SUDODEP) parse.h sudo.tab.c sudo.tab.h
defaults.o: defaults.c $(SUDODEP) def_data.c auth/sudo_auth.h
d220 1
d258 1
a258 1
	( cd $(srcdir); mansectsu=`echo @@MANSECTSU@@|tr A-Z a-z`; mansectform=`echo @@MANSECTFORM@@|tr A-Z a-z`; pod2man --quotes=none --date="`date '+%B %e, %Y'`" --section=$$mansectsu --release=$(VERSION) --center="MAINTENANCE COMMANDS" sudo.pod | sed -e "s/(5)/($$mansectform)/" -e "s/(8)/($$mansectsu)/" > $@@ )
d267 1
a267 1
	( cd $(srcdir); mansectsu=`echo @@MANSECTSU@@|tr A-Z a-z`; mansectform=`echo @@MANSECTFORM@@|tr A-Z a-z`; pod2man --quotes=none --date="`date '+%B %e, %Y'`" --section=$$mansectsu --release=$(VERSION) --center="MAINTENANCE COMMANDS" visudo.pod | sed -e "s/(5)/($$mansectform)/" -e "s/(8)/($$mansectsu)/" > $@@ )
d276 1
a276 1
	( cd $(srcdir); mansectsu=`echo @@MANSECTSU@@|tr A-Z a-z`; mansectform=`echo @@MANSECTFORM@@|tr A-Z a-z`; pod2man --quotes=none --date="`date '+%B %e, %Y'`" --section=$$mansectform --release=$(VERSION) --center="MAINTENANCE COMMANDS" sudoers.pod | sed -e "s/(5)/($$mansectform)/" -e "s/(8)/($$mansectsu)/" > $@@ )
d286 1
a286 3
	$(SHELL) $(srcdir)/mkinstalldirs $(DESTDIR)/$(sudodir) \
	    $(DESTDIR)/$(visudodir) $(DESTDIR)/$(sudoersdir) \
	    $(DESTDIR)/$(mandirsu) $(DESTDIR)/$(mandirform)
d289 2
a290 2
	$(INSTALL) -O $(install_uid) -G $(install_gid) -M 4111 -s sudo $(DESTDIR)/$(sudodir)/sudo
	$(INSTALL) -O $(install_uid) -G $(install_gid) -M 0111 -s visudo $(DESTDIR)/$(visudodir)/visudo
d293 9
a301 3
	test -f $(DESTDIR)/$(sudoersdir)/sudoers || \
	    $(INSTALL) -O $(sudoers_uid) -G $(sudoers_gid) -M $(sudoers_mode) \
		$(srcdir)/sudoers $(DESTDIR)/$(sudoersdir)/sudoers
d304 3
a306 3
	$(INSTALL) -O $(install_uid) -G $(install_gid) -M 0444 @@mansrcdir@@/sudo.$(mantype) $(DESTDIR)/$(mandirsu)/sudo.$(mansectsu)
	$(INSTALL) -O $(install_uid) -G $(install_gid) -M 0444 @@mansrcdir@@/visudo.$(mantype) $(DESTDIR)/$(mandirsu)/visudo.$(mansectsu)
	$(INSTALL) -O $(install_uid) -G $(install_gid) -M 0444 @@mansrcdir@@/sudoers.$(mantype) $(DESTDIR)/$(mandirform)/sudoers.$(mansectform)
d346 1
a346 2
	( \
	  tdir=tmp.`arch -l`/sudo-$(VERSION) ; \
d348 12
a359 2
	    if [ -f $$i ]; then \
	      cp $$i $$tdir ; \
d361 1
a361 1
	      cp $(srcdir)/$$i $$tdir ; \
d363 1
a363 2
	      echo cannot find $$i ; \
	      exit 1 ; \
d366 1
a366 4
	  cp $(srcdir)/INSTALL.binary $$tdir/INSTALL ; \
	  sed -e 's/@@_MANTYPE@@/$(mantype)/g' -e 's/@@_mansectsu@@/$(mansectsu)/g' \
	      -e 's/@@_mansectform@@/$(mansectform)/g' $(srcdir)/Makefile.binary \
	      > $$tdir/Makefile ; \
a367 3
	strip sudo
	strip visudo
	( cd tmp.`arch -l` && tar Ocf ../sudo-$(VERSION)-`arch -l`.tar sudo-$(VERSION) )
@


1.7.4.1
log
@update to sudo 1.6.5p1
@
text
@d2 1
a2 1
# Copyright (c) 1996, 1998-2002 Todd C. Miller <Todd.Miller@@courtesan.com>
d37 1
a37 1
# $Sudo: Makefile.in,v 1.223 2002/01/16 23:37:33 millert Exp $
d52 1
a52 1
# Our install program supports extra flags...
d112 5
a116 6
SRCS = alloc.c alloca.c check.c def_data.c defaults.c env.c fileops.c \
       find_path.c fnmatch.c getcwd.c getspwuid.c goodpath.c \
       interfaces.c lex.yy.c lsearch.c logging.c parse.c parse.lex \
       parse.yacc set_perms.c sigaction.c snprintf.c strcasecmp.c strerror.c \
       sudo.c sudo.tab.c testsudoers.c tgetpass.c utime.c visudo.c \
       $(AUTH_SRCS)
d122 3
a124 3
HDRS = compat.h def_data.h defaults.h ins_2001.h ins_classic.h ins_csops.h \
       ins_goons.h insults.h interfaces.h logging.h parse.h sudo.h sudo.tab.h \
       version.h auth/sudo_auth.h emul/fnmatch.h emul/search.h emul/utime.h
d130 2
a131 2
SUDOBJS = check.o env.o getspwuid.o goodpath.o fileops.o find_path.o \
	  interfaces.o logging.o parse.o set_perms.o sudo.o tgetpass.o \
d134 1
a134 1
VISUDOBJS = visudo.o fileops.o goodpath.o find_path.o $(PARSEOBJS)
d140 1
a140 1
VERSION = 1.6.5
d142 1
a142 1
DISTFILES = $(SRCS) $(HDRS) BUGS CHANGES HISTORY INSTALL INSTALL.configure \
d144 6
a149 6
	    UPGRADE aclocal.m4 aixcrypt.exp config.guess config.h.in \
            config.sub configure configure.in def_data.in fnmatch.3 indent.pro \
	    install-sh mkdefaults mkinstalldirs pathnames.h.in sample.pam \
	    sample.syslog.conf sample.sudoers sudo.cat sudo.man.in sudo.pod \
	    sudoers sudoers.cat sudoers.man.in sudoers.pod visudo.cat \
	    visudo.man.in visudo.pod auth/API
d159 1
a159 1
	  $(srcdir)/logging.h config.h def_data.h pathnames.h
a198 4
# Uncomment the following if you intend to modify def_data.in
@@DEV@@def_data.h def_data.c: def_data.in
@@DEV@@	perl $(srcdir)/mkdefaults -o def_data $(srcdir)/def_data.in

a201 1
env.o: env.c $(SUDODEP)
d207 1
a207 1
set_perms.o: set_perms.c $(SUDODEP)
d215 2
a216 2
sudo.tab.o: sudo.tab.c $(SUDODEP) parse.h sudo.tab.c sudo.tab.h
defaults.o: defaults.c $(SUDODEP) def_data.c auth/sudo_auth.h
d220 1
d258 1
a258 1
	( cd $(srcdir); mansectsu=`echo @@MANSECTSU@@|tr A-Z a-z`; mansectform=`echo @@MANSECTFORM@@|tr A-Z a-z`; pod2man --quotes=none --date="`date '+%B %e, %Y'`" --section=$$mansectsu --release=$(VERSION) --center="MAINTENANCE COMMANDS" sudo.pod | sed -e "s/(5)/($$mansectform)/" -e "s/(8)/($$mansectsu)/" > $@@ )
d267 1
a267 1
	( cd $(srcdir); mansectsu=`echo @@MANSECTSU@@|tr A-Z a-z`; mansectform=`echo @@MANSECTFORM@@|tr A-Z a-z`; pod2man --quotes=none --date="`date '+%B %e, %Y'`" --section=$$mansectsu --release=$(VERSION) --center="MAINTENANCE COMMANDS" visudo.pod | sed -e "s/(5)/($$mansectform)/" -e "s/(8)/($$mansectsu)/" > $@@ )
d276 1
a276 1
	( cd $(srcdir); mansectsu=`echo @@MANSECTSU@@|tr A-Z a-z`; mansectform=`echo @@MANSECTFORM@@|tr A-Z a-z`; pod2man --quotes=none --date="`date '+%B %e, %Y'`" --section=$$mansectform --release=$(VERSION) --center="MAINTENANCE COMMANDS" sudoers.pod | sed -e "s/(5)/($$mansectform)/" -e "s/(8)/($$mansectsu)/" > $@@ )
d286 1
a286 3
	$(SHELL) $(srcdir)/mkinstalldirs $(DESTDIR)/$(sudodir) \
	    $(DESTDIR)/$(visudodir) $(DESTDIR)/$(sudoersdir) \
	    $(DESTDIR)/$(mandirsu) $(DESTDIR)/$(mandirform)
d289 2
a290 2
	$(INSTALL) -O $(install_uid) -G $(install_gid) -M 4111 -s sudo $(DESTDIR)/$(sudodir)/sudo
	$(INSTALL) -O $(install_uid) -G $(install_gid) -M 0111 -s visudo $(DESTDIR)/$(visudodir)/visudo
d293 9
a301 3
	test -f $(DESTDIR)/$(sudoersdir)/sudoers || \
	    $(INSTALL) -O $(sudoers_uid) -G $(sudoers_gid) -M $(sudoers_mode) \
		$(srcdir)/sudoers $(DESTDIR)/$(sudoersdir)/sudoers
d304 3
a306 3
	$(INSTALL) -O $(install_uid) -G $(install_gid) -M 0444 @@mansrcdir@@/sudo.$(mantype) $(DESTDIR)/$(mandirsu)/sudo.$(mansectsu)
	$(INSTALL) -O $(install_uid) -G $(install_gid) -M 0444 @@mansrcdir@@/visudo.$(mantype) $(DESTDIR)/$(mandirsu)/visudo.$(mansectsu)
	$(INSTALL) -O $(install_uid) -G $(install_gid) -M 0444 @@mansrcdir@@/sudoers.$(mantype) $(DESTDIR)/$(mandirform)/sudoers.$(mansectform)
d346 1
a346 2
	( \
	  tdir=tmp.`arch -l`/sudo-$(VERSION) ; \
d348 12
a359 2
	    if [ -f $$i ]; then \
	      cp $$i $$tdir ; \
d361 1
a361 1
	      cp $(srcdir)/$$i $$tdir ; \
d363 1
a363 2
	      echo cannot find $$i ; \
	      exit 1 ; \
d366 1
a366 4
	  cp $(srcdir)/INSTALL.binary $$tdir/INSTALL ; \
	  sed -e 's/@@_MANTYPE@@/$(mantype)/g' -e 's/@@_mansectsu@@/$(mansectsu)/g' \
	      -e 's/@@_mansectform@@/$(mansectform)/g' $(srcdir)/Makefile.binary \
	      > $$tdir/Makefile ; \
a367 3
	strip sudo
	strip visudo
	( cd tmp.`arch -l` && tar Ocf ../sudo-$(VERSION)-`arch -l`.tar sudo-$(VERSION) )
@


1.6
log
@sudo 1.6.3; see http://www.courtesan.com/sudo/current.html for a list
of changes.
@
text
@d118 2
a119 2
AUTH_SRCS = auth/afs.c auth/aix_auth.c auth/dce.c auth/fwtk.c auth/kerb4.c \
	    auth/kerb5.c auth/pam.c auth/passwd.c auth/rfc1938.c \
d233 2
@


1.5
log
@1.6.2p1
@
text
@d37 1
a37 1
# $Sudo: Makefile.in,v 1.194 2000/01/24 15:48:46 millert Exp $
a87 1
# set mansect5 to 4 on sysV machines.
d89 4
a92 4
mansect8 = 8
mansect5 = 5
mandir8 = $(mandir)/$(mantype)$(mansect8)
mandir5 = $(mandir)/$(mantype)$(mansect5)
d140 1
a140 1
VERSION = 1.6.2
d147 3
a149 2
	    sample.sudoers sudo.cat sudo.man sudo.pod sudoers sudoers.cat \
	    sudoers.man sudoers.pod visudo.cat visudo.man visudo.pod auth/API
d181 1
a181 1
	$(CC) -o $@@ $(VISUDOBJS) $(LIBOBJS) $(LDFLAGS) $(LIBS)
d254 1
a254 1
sudo.man: $(srcdir)/sudo.pod
d256 4
a259 1
	(cd $(srcdir); pod2man --section=$(mansect8) --release=$(VERSION) --center="MAINTENANCE COMMANDS" sudo.pod > $(srcdir)/$@@)
d263 1
a263 1
visudo.man: $(srcdir)/visudo.pod
d265 4
a268 1
	(cd $(srcdir); pod2man --section=$(mansect8) --release=$(VERSION) --center="MAINTENANCE COMMANDS" visudo.pod > $(srcdir)/$@@)
d272 1
a272 1
sudoers.man: $(srcdir)/sudoers.pod
d274 4
a277 1
	(cd $(srcdir); pod2man --section=$(mansect5) --release=$(VERSION) --center="FILE FORMATS" sudoers.pod > $(srcdir)/$@@)
d284 1
a284 1
	$(SHELL) $(srcdir)/mkinstalldirs $(sudodir) $(visudodir) $(sudoersdir) $(mandir8) $(mandir5)
d291 1
a291 1
	@@ if [ -f $(sudoersdir)/sudoers ]; then  \
d302 3
a304 3
	$(INSTALL) -o $(install_uid) -g $(install_gid) -m 0444 $(srcdir)/sudo.$(mantype) $(mandir8)/sudo.$(mansect8)
	$(INSTALL) -o $(install_uid) -g $(install_gid) -m 0444 $(srcdir)/visudo.$(mantype) $(mandir8)/visudo.$(mansect8)
	$(INSTALL) -o $(install_uid) -g $(install_gid) -m 0444 $(srcdir)/sudoers.$(mantype) $(mandir5)/sudoers.$(mansect5)
d323 1
a323 1
	-rm -f Makefile pathnames.h config.h config.status config.cache \
d333 1
a333 1
dist: $(DISTFILES)
@


1.4
log
@sudo 1.6.2
@
text
@d37 1
a37 1
# $Sudo: Makefile.in,v 1.193 2000/01/17 23:46:24 millert Exp $
d151 1
a151 1
BINFILES= BUGS CHANGES FAQ HISTORY LICENSE README TODO TROUBLESHOOTING \
d345 1
@


1.3
log
@sudo 1.6.1
@
text
@d2 1
a2 1
# Copyright (c) 1996, 1998, 1999 Todd C. Miller <Todd.Miller@@courtesan.com>
d37 1
a37 1
# $Sudo: Makefile.in,v 1.190 1999/12/05 02:18:45 millert Exp $
d141 1
a141 1
VERSION = 1.6.1
d297 3
@


1.2
log
@Pull in latest files from the sudo cvs tree.  We now wrap scripts with
a call to /bin/sh for the benefit of ctm.  Closes PR 989
@
text
@d37 1
a37 1
# $Sudo: Makefile.in,v 1.188 1999/11/25 00:43:44 millert Exp $
d141 1
a141 1
VERSION = 1.6
a253 4
sudo.html: $(srcdir)/sudo.pod
	@@rm -f $(srcdir)/$@@
	(cd $(srcdir); pod2html --title="Sudo Manual" --infile=sudo.pod --outfile=$(srcdir)/$@@)

a259 4
visudo.html: $(srcdir)/visudo.pod
	@@rm -f $(srcdir)/$@@
	(cd $(srcdir); pod2html --title="Visudo Manual" --infile=visudo.pod --outfile=$(srcdir)/$@@)

a265 4
sudoers.html: $(srcdir)/sudoers.pod
	@@rm -f $(srcdir)/$@@
	(cd $(srcdir); pod2html --title="Sudoers Manual" --infile=sudoers.pod --outfile=$(srcdir)/$@@)

d312 1
a312 1
	       config.log pod2html-dircache pod2html-itemcache $(PARSESRCS)
@


1.1
log
@Initial revision
@
text
@d37 1
a37 1
# $Sudo: Makefile.in,v 1.185 1999/09/08 08:06:03 millert Exp $
d53 1
a53 1
INSTALL = $(srcdir)/install-sh -c
d147 10
a156 3
	    mkinstalldirs pathnames.h.in sample.pam sample.sudoers sudo.cat \
	    sudo.man sudo.pod sudoers sudoers.cat sudoers.man sudoers.pod \
	    visudo.cat visudo.man visudo.pod auth/API
d287 1
a287 1
	$(srcdir)/mkinstalldirs $(sudodir) $(visudodir) $(sudoersdir) $(mandir8) $(mandir5)
d340 27
@


1.1.1.1
log
@sudo 1.6, now with a BSD license
@
text
@@
