head	1.23;
access;
symbols
	OPENBSD_4_1:1.22.0.2
	OPENBSD_4_1_BASE:1.22
	OPENBSD_4_0:1.20.0.6
	OPENBSD_4_0_BASE:1.20
	OPENBSD_3_9:1.20.0.4
	OPENBSD_3_9_BASE:1.20
	OPENBSD_3_8:1.20.0.2
	OPENBSD_3_8_BASE:1.20
	OPENBSD_3_7:1.18.0.2
	OPENBSD_3_7_BASE:1.18
	OPENBSD_3_6:1.13.0.8
	OPENBSD_3_6_BASE:1.13
	OPENBSD_3_5:1.13.0.6
	OPENBSD_3_5_BASE:1.13
	OPENBSD_3_4:1.13.0.4
	OPENBSD_3_4_BASE:1.13
	OPENBSD_3_3:1.13.0.2
	OPENBSD_3_3_BASE:1.13
	OPENBSD_3_2:1.10.0.2
	OPENBSD_3_2_BASE:1.10
	OPENBSD_3_1:1.9.0.2
	OPENBSD_3_1_BASE:1.9
	OPENBSD_3_0:1.6.0.2
	OPENBSD_3_0_BASE:1.6
	OPENBSD_2_9_BASE:1.5
	OPENBSD_2_9:1.5.0.2
	OPENBSD_2_8:1.4.0.4
	OPENBSD_2_8_BASE:1.4
	OPENBSD_2_7:1.4.0.2
	OPENBSD_2_7_BASE:1.4
	SUDO_1_6_0:1.1.1.1
	COURTESAN:1.1.1;
locks; strict;
comment	@.\" @;


1.23
date	2007.07.26.16.10.16;	author millert;	state dead;
branches;
next	1.22;

1.22
date	2007.02.22.14.35.33;	author millert;	state Exp;
branches;
next	1.21;

1.21
date	2007.02.06.18.30.04;	author jmc;	state Exp;
branches;
next	1.20;

1.20
date	2005.06.19.22.00.08;	author millert;	state Exp;
branches;
next	1.19;

1.19
date	2005.05.31.21.13.43;	author millert;	state Exp;
branches;
next	1.18;

1.18
date	2005.02.05.23.31.52;	author millert;	state Exp;
branches;
next	1.17;

1.17
date	2004.11.29.17.29.05;	author millert;	state Exp;
branches;
next	1.16;

1.16
date	2004.11.17.18.14.06;	author millert;	state Exp;
branches;
next	1.15;

1.15
date	2004.11.12.16.37.38;	author millert;	state Exp;
branches;
next	1.14;

1.14
date	2004.09.28.15.10.51;	author millert;	state Exp;
branches;
next	1.13;

1.13
date	2003.03.15.21.23.54;	author millert;	state Exp;
branches;
next	1.12;

1.12
date	2003.03.07.06.30.38;	author david;	state Exp;
branches;
next	1.11;

1.11
date	2003.02.14.17.18.29;	author millert;	state Exp;
branches;
next	1.10;

1.10
date	2002.04.25.15.49.03;	author millert;	state Exp;
branches;
next	1.9;

1.9
date	2002.01.17.01.03.21;	author millert;	state Exp;
branches;
next	1.8;

1.8
date	2002.01.14.00.11.44;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	2002.01.03.03.49.16;	author millert;	state Exp;
branches;
next	1.6;

1.6
date	2001.09.17.23.49.21;	author pjanzen;	state Exp;
branches
	1.6.2.1;
next	1.5;

1.5
date	2000.11.21.17.58.44;	author millert;	state Exp;
branches
	1.5.2.1;
next	1.4;

1.4
date	2000.04.10.02.28.36;	author millert;	state Exp;
branches;
next	1.3;

1.3
date	2000.03.27.03.44.38;	author millert;	state Exp;
branches;
next	1.2;

1.2
date	2000.01.24.04.22.53;	author millert;	state Exp;
branches;
next	1.1;

1.1
date	99.11.18.16.29.01;	author millert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	99.11.18.16.29.01;	author millert;	state Exp;
branches;
next	;

1.5.2.1
date	2002.01.18.17.20.23;	author millert;	state Exp;
branches;
next	;

1.6.2.1
date	2002.01.18.16.14.46;	author millert;	state Exp;
branches;
next	;


desc
@@


1.23
log
@Update to sudo 1.6.9p1.  Note that the environment handling in sudo
1.6.9 has changed relative to older versions.  Sudo now starts
commands with a minimal environment containing the variables in the
env_keep and env_check lists.  This behavior is configurable in the
sudoers file.  Please see the "SECURITY NOTES" section in the sudo
manual.
@
text
@.\" Copyright (c) 1994-1996,1998-2003 Todd C. Miller <Todd.Miller@@courtesan.com>
.\" 
.\" Permission to use, copy, modify, and distribute this software for any
.\" purpose with or without fee is hereby granted, provided that the above
.\" copyright notice and this permission notice appear in all copies.
.\" 
.\" THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
.\" WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
.\" MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
.\" ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
.\" WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
.\" ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
.\" OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
.\" ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\" 
.\" Sponsored in part by the Defense Advanced Research Projects
.\" Agency (DARPA) and Air Force Research Laboratory, Air Force
.\" Materiel Command, USAF, under agreement number F39502-99-1-0512.
.\" 
.\" $Sudo: sudo.pod,v 1.73 2004/09/08 18:34:38 millert Exp $
.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.14
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  | will give a
.\" real vertical bar.  \*(C+ will give a nicer C++.  Capital omega is used to
.\" do unbreakable dashes and therefore won't be available.  \*(C` and \*(C'
.\" expand to `' in nroff, nothing in troff, for use with C<>.
.tr \(*W-|\(bv\*(Tr
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` 
.    ds C' 
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "SUDO 8"
.TH SUDO 8 "June 20, 2005" "1.6.8p9" "MAINTENANCE COMMANDS"
.SH "NAME"
sudo, sudoedit \- execute a command as another user
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBsudo\fR \fB\-K\fR | \fB\-L\fR | \fB\-V\fR | \fB\-h\fR | \fB\-k\fR | \fB\-l\fR | \fB\-v\fR
.PP
\&\fBsudo\fR [\fB\-HPSb\fR] [\fB\-a\fR\ \fIauth_type\fR] [\fB\-c\fR\ \fIclass\fR|\fI\-\fR]
[\fB\-p\fR\ \fIprompt\fR] [\fB\-u\fR\ \fIusername\fR|\fI#uid\fR]
{\fB\-e\fR\ file\ [...]\ |\ \fB\-i\fR\ |\ \fB\-s\fR\ |\ \fIcommand\fR}
.PP
\&\fBsudoedit\fR [\fB\-S\fR] [\fB\-a\fR\ \fIauth_type\fR]
[\fB\-p\fR\ \fIprompt\fR] [\fB\-u\fR\ \fIusername\fR|\fI#uid\fR]
file [...]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
\&\fBsudo\fR allows a permitted user to execute a \fIcommand\fR as the
superuser or another user, as specified in the \fIsudoers\fR file.
The real and effective uid and gid are set to match those of the
target user as specified in the passwd file and the group vector
is initialized based on the group file (unless the \fB\-P\fR option was
specified).  If the invoking user is root or if the target user is
the same as the invoking user, no password is required.  Otherwise,
\&\fBsudo\fR requires that users authenticate themselves with a password
by default (\s-1NOTE:\s0 in the default configuration this is the user's
password, not the root password).  Once a user has been authenticated,
a timestamp is updated and the user may then use sudo without a
password for a short period of time (\f(CW\*(C`5\*(C'\fR minutes unless
overridden in \fIsudoers\fR).
.PP
When invoked as \fBsudoedit\fR, the \fB\-e\fR option (described below),
is implied.
.PP
\&\fBsudo\fR determines who is an authorized user by consulting the file
\&\fI/etc/sudoers\fR.  By giving \fBsudo\fR the \fB\-v\fR flag a user
can update the time stamp without running a \fIcommand.\fR The password
prompt itself will also time out if the user's password is not
entered within \f(CW\*(C`5\*(C'\fR minutes (unless overridden via
\&\fIsudoers\fR).
.PP
If a user who is not listed in the \fIsudoers\fR file tries to run a
command via \fBsudo\fR, mail is sent to the proper authorities, as
defined at configure time or in the \fIsudoers\fR file (defaults to
\&\f(CW\*(C`root\*(C'\fR).  Note that the mail will not be sent if an unauthorized
user tries to run sudo with the \fB\-l\fR or \fB\-v\fR flags.  This allows
users to determine for themselves whether or not they are allowed
to use \fBsudo\fR.
.PP
If \fBsudo\fR is run by root and the \f(CW\*(C`SUDO_USER\*(C'\fR environment variable
is set, \fBsudo\fR will use this value to determine who the actual
user is.  This can be used by a user to log commands through sudo
even when a root shell has been invoked.  It also allows the \fB\-e\fR
flag to remain useful even when being run via a sudo-run script or
program.  Note however, that the sudoers lookup is still done for
root, not the user specified by \f(CW\*(C`SUDO_USER\*(C'\fR.
.PP
\&\fBsudo\fR can log both successful and unsuccessful attempts (as well
as errors) to \fIsyslog\fR\|(3), a log file, or both.  By default \fBsudo\fR
will log via \fIsyslog\fR\|(3) but this is changeable at configure time
or via the \fIsudoers\fR file.
.SH "OPTIONS"
.IX Header "OPTIONS"
\&\fBsudo\fR accepts the following command line options:
.IP "\-H" 4
.IX Item "-H"
The \fB\-H\fR (\fI\s-1HOME\s0\fR) option sets the \f(CW\*(C`HOME\*(C'\fR environment variable
to the homedir of the target user (root by default) as specified
in passwd(5).  By default, \fBsudo\fR does not modify \f(CW\*(C`HOME\*(C'\fR
(see \fIset_home\fR and \fIalways_set_home\fR in sudoers(5)).
.IP "\-K" 4
.IX Item "-K"
The \fB\-K\fR (sure \fIkill\fR) option is like \fB\-k\fR except that it removes
the user's timestamp entirely.  Like \fB\-k\fR, this option does not
require a password.
.IP "\-L" 4
.IX Item "-L"
The \fB\-L\fR (\fIlist\fR defaults) option will list out the parameters
that may be set in a \fIDefaults\fR line along with a short description
for each.  This option is useful in conjunction with \fIgrep\fR\|(1).
.IP "\-P" 4
.IX Item "-P"
The \fB\-P\fR (\fIpreserve group vector\fR) option causes \fBsudo\fR to
preserve the invoking user's group vector unaltered.  By default,
\&\fBsudo\fR will initialize the group vector to the list of groups the
target user is in.  The real and effective group IDs, however, are
still set to match the target user.
.IP "\-S" 4
.IX Item "-S"
The \fB\-S\fR (\fIstdin\fR) option causes \fBsudo\fR to read the password from
the standard input instead of the terminal device.
.IP "\-V" 4
.IX Item "-V"
The \fB\-V\fR (\fIversion\fR) option causes \fBsudo\fR to print the version
number and exit.  If the invoking user is already root the \fB\-V\fR
option will print out a list of the defaults \fBsudo\fR was compiled
with as well as the machine's local network addresses.
.IP "\-a" 4
.IX Item "-a"
The \fB\-a\fR (\fIauthentication type\fR) option causes \fBsudo\fR to use the
specified authentication type when validating the user, as allowed
by /etc/login.conf.  The system administrator may specify a list
of sudo-specific authentication methods by adding an \*(L"auth\-sudo\*(R"
entry in /etc/login.conf.  This option is only available on systems
that support \s-1BSD\s0 authentication where \fBsudo\fR has been configured
with the \-\-with\-bsdauth option.
.IP "\-b" 4
.IX Item "-b"
The \fB\-b\fR (\fIbackground\fR) option tells \fBsudo\fR to run the given
command in the background.  Note that if you use the \fB\-b\fR
option you cannot use shell job control to manipulate the process.
.IP "\-c" 4
.IX Item "-c"
The \fB\-c\fR (\fIclass\fR) option causes \fBsudo\fR to run the specified command
with resources limited by the specified login class.  The \fIclass\fR
argument can be either a class name as defined in /etc/login.conf,
or a single '\-' character.  Specifying a \fIclass\fR of \f(CW\*(C`\-\*(C'\fR indicates
that the command should be run restricted by the default login
capabilities for the user the command is run as.  If the \fIclass\fR
argument specifies an existing user class, the command must be run
as root, or the \fBsudo\fR command must be run from a shell that is already
root.  This option is only available on systems with \s-1BSD\s0 login classes
where \fBsudo\fR has been configured with the \-\-with\-logincap option.
.IP "\-e" 4
.IX Item "-e"
The \fB\-e\fR (\fIedit\fR) option indicates that, instead of running
a command, the user wishes to edit one or more files.  In lieu
of a command, the string \*(L"sudoedit\*(R" is used when consulting
the \fIsudoers\fR file.  If the user is authorized by \fIsudoers\fR
the following steps are taken:
.RS 4
.IP "1." 8
Temporary copies are made of the files to be edited with the owner
set to the invoking user.
.IP "2." 8
The editor specified by the \f(CW\*(C`VISUAL\*(C'\fR or \f(CW\*(C`EDITOR\*(C'\fR environment
variables is run to edit the temporary files.  If neither \f(CW\*(C`VISUAL\*(C'\fR
nor \f(CW\*(C`EDITOR\*(C'\fR are set, the program listed in the \fIeditor\fR \fIsudoers\fR
variable is used.
.IP "3." 8
If they have been modified, the temporary files are copied back to
their original location and the temporary versions are removed.
.RE
.RS 4
.Sp
If the specified file does not exist, it will be created.  Note
that unlike most commands run by \fBsudo\fR, the editor is run with
the invoking user's environment unmodified.  If, for some reason,
\&\fBsudo\fR is unable to update a file with its edited version, the
user will receive a warning and the edited copy will remain in a
temporary file.
.RE
.IP "\-h" 4
.IX Item "-h"
The \fB\-h\fR (\fIhelp\fR) option causes \fBsudo\fR to print a usage message and exit.
.IP "\-i" 4
.IX Item "-i"
The \fB\-i\fR (\fIsimulate initial login\fR) option runs the shell specified
in the passwd(5) entry of the user that the command is
being run as.  The command name argument given to the shell begins
with a \f(CW\*(C`\-\*(C'\fR to tell the shell to run as a login shell.  \fBsudo\fR
attempts to change to that user's home directory before running the
shell.  It also initializes the environment, leaving \fI\s-1TERM\s0\fR
unchanged, setting \fI\s-1HOME\s0\fR, \fI\s-1SHELL\s0\fR, \fI\s-1USER\s0\fR, \fI\s-1LOGNAME\s0\fR, and
\&\fI\s-1PATH\s0\fR, and unsetting all other environment variables.  Note that
because the shell to use is determined before the \fIsudoers\fR file
is parsed, a \fIrunas_default\fR setting in \fIsudoers\fR will specify
the user to run the shell as but will not affect which shell is
actually run.
.IP "\-k" 4
.IX Item "-k"
The \fB\-k\fR (\fIkill\fR) option to \fBsudo\fR invalidates the user's timestamp
by setting the time on it to the Epoch.  The next time \fBsudo\fR is
run a password will be required.  This option does not require a password
and was added to allow a user to revoke \fBsudo\fR permissions from a .logout
file.
.IP "\-l" 4
.IX Item "-l"
The \fB\-l\fR (\fIlist\fR) option will list out the allowed (and
forbidden) commands for the user on the current host.
.IP "\-p" 4
.IX Item "-p"
The \fB\-p\fR (\fIprompt\fR) option allows you to override the default
password prompt and use a custom one.  The following percent (`\f(CW\*(C`%\*(C'\fR')
escapes are supported:
.RS 4
.ie n .IP "%u" 8
.el .IP "\f(CW%u\fR" 8
.IX Item "%u"
expanded to the invoking user's login name
.ie n .IP "%U" 8
.el .IP "\f(CW%U\fR" 8
.IX Item "%U"
expanded to the login name of the user the command will
be run as (defaults to root)
.ie n .IP "%h" 8
.el .IP "\f(CW%h\fR" 8
.IX Item "%h"
expanded to the local hostname without the domain name
.ie n .IP "%H" 8
.el .IP "\f(CW%H\fR" 8
.IX Item "%H"
expanded to the local hostname including the domain name
(on if the machine's hostname is fully qualified or the \fIfqdn\fR
sudoers option is set)
.ie n .IP "\*(C`%%\*(C'" 8
.el .IP "\f(CW\*(C`%%\*(C'\fR" 8
.IX Item "%%"
two consecutive \f(CW\*(C`%\*(C'\fR characters are collapsed into a single \f(CW\*(C`%\*(C'\fR character
.RE
.RS 4
.RE
.IP "\-s" 4
.IX Item "-s"
The \fB\-s\fR (\fIshell\fR) option runs the shell specified by the \fI\s-1SHELL\s0\fR
environment variable if it is set or the shell as specified
in passwd(5).
.IP "\-u" 4
.IX Item "-u"
The \fB\-u\fR (\fIuser\fR) option causes \fBsudo\fR to run the specified command
as a user other than \fIroot\fR.  To specify a \fIuid\fR instead of a
\&\fIusername\fR, use \fI#uid\fR.  Note that if the \fItargetpw\fR Defaults
option is set (see sudoers(5)) it is not possible
to run commands with a uid not listed in the password database.
.IP "\-v" 4
.IX Item "-v"
If given the \fB\-v\fR (\fIvalidate\fR) option, \fBsudo\fR will update the
user's timestamp, prompting for the user's password if necessary.
This extends the \fBsudo\fR timeout for another \f(CW\*(C`5\*(C'\fR minutes
(or whatever the timeout is set to in \fIsudoers\fR) but does not run
a command.
.IP "\-\-" 4
The \fB\-\-\fR flag indicates that \fBsudo\fR should stop processing command
line arguments.  It is most useful in conjunction with the \fB\-s\fR flag.
.SH "RETURN VALUES"
.IX Header "RETURN VALUES"
Upon successful execution of a program, the return value from \fBsudo\fR
will simply be the return value of the program that was executed.
.PP
Otherwise, \fBsudo\fR quits with an exit value of 1 if there is a
configuration/permission problem or if \fBsudo\fR cannot execute the
given command.  In the latter case the error string is printed to
stderr.  If \fBsudo\fR cannot \fIstat\fR\|(2) one or more entries in the user's
\&\f(CW\*(C`PATH\*(C'\fR an error is printed on stderr.  (If the directory does not
exist or if it is not really a directory, the entry is ignored and
no error is printed.)  This should not happen under normal
circumstances.  The most common reason for \fIstat\fR\|(2) to return
\&\*(L"permission denied\*(R" is if you are running an automounter and one
of the directories in your \f(CW\*(C`PATH\*(C'\fR is on a machine that is currently
unreachable.
.SH "SECURITY NOTES"
.IX Header "SECURITY NOTES"
\&\fBsudo\fR tries to be safe when executing external commands.  Variables
that control how dynamic loading and binding is done can be used
to subvert the program that \fBsudo\fR runs.  To combat this the
\&\f(CW\*(C`LD_*\*(C'\fR, \f(CW\*(C`_RLD_*\*(C'\fR, \f(CW\*(C`SHLIB_PATH\*(C'\fR (\s-1HP\-UX\s0 only), and \f(CW\*(C`LIBPATH\*(C'\fR (\s-1AIX\s0
only) environment variables are removed from the environment passed
on to all commands executed.  \fBsudo\fR will also remove the \f(CW\*(C`IFS\*(C'\fR,
\&\f(CW\*(C`CDPATH\*(C'\fR, \f(CW\*(C`ENV\*(C'\fR, \f(CW\*(C`BASH_ENV\*(C'\fR, \f(CW\*(C`KRB_CONF\*(C'\fR, \f(CW\*(C`KRBCONFDIR\*(C'\fR, \f(CW\*(C`KRBTKFILE\*(C'\fR,
\&\f(CW\*(C`KRB5_CONFIG\*(C'\fR, \f(CW\*(C`LOCALDOMAIN\*(C'\fR, \f(CW\*(C`RES_OPTIONS\*(C'\fR, \f(CW\*(C`HOSTALIASES\*(C'\fR,
\&\f(CW\*(C`NLSPATH\*(C'\fR, \f(CW\*(C`PATH_LOCALE\*(C'\fR, \f(CW\*(C`TERMINFO\*(C'\fR, \f(CW\*(C`TERMINFO_DIRS\*(C'\fR and
\&\f(CW\*(C`TERMPATH\*(C'\fR variables as they too can pose a threat.  If the
\&\f(CW\*(C`TERMCAP\*(C'\fR variable is set and is a pathname, it too is ignored.
Additionally, if the \f(CW\*(C`LC_*\*(C'\fR or \f(CW\*(C`LANGUAGE\*(C'\fR variables contain the
\&\f(CW\*(C`/\*(C'\fR or \f(CW\*(C`%\*(C'\fR characters, they are ignored.  Environment variables
with a value beginning with \f(CW\*(C`()\*(C'\fR are also removed as they could
be interpreted as \fBbash\fR functions.  If \fBsudo\fR has been
compiled with SecurID support, the \f(CW\*(C`VAR_ACE\*(C'\fR, \f(CW\*(C`USR_ACE\*(C'\fR and
\&\f(CW\*(C`DLC_ACE\*(C'\fR variables are cleared as well.  The list of environment
variables that \fBsudo\fR clears is contained in the output of
\&\f(CW\*(C`sudo \-V\*(C'\fR when run as root.
.PP
To prevent command spoofing, \fBsudo\fR checks \*(L".\*(R" and "" (both denoting
current directory) last when searching for a command in the user's
\&\s-1PATH\s0 (if one or both are in the \s-1PATH\s0).  Note, however, that the
actual \f(CW\*(C`PATH\*(C'\fR environment variable is \fInot\fR modified and is passed
unchanged to the program that \fBsudo\fR executes.
.PP
For security reasons, if your \s-1OS\s0 supports shared libraries and does
not disable user-defined library search paths for setuid programs
(most do), you should either use a linker option that disables this
behavior or link \fBsudo\fR statically.
.PP
\&\fBsudo\fR will check the ownership of its timestamp directory
(\fI/var/run/sudo\fR by default) and ignore the directory's contents if
it is not owned by root and only writable by root.  On systems that
allow non-root users to give away files via \fIchown\fR\|(2), if the timestamp
directory is located in a directory writable by anyone (e.g.: \fI/tmp\fR),
it is possible for a user to create the timestamp directory before
\&\fBsudo\fR is run.  However, because \fBsudo\fR checks the ownership and
mode of the directory and its contents, the only damage that can
be done is to \*(L"hide\*(R" files by putting them in the timestamp dir.
This is unlikely to happen since once the timestamp dir is owned
by root and inaccessible by any other user the user placing files
there would be unable to get them back out.  To get around this
issue you can use a directory that is not world-writable for the
timestamps (\fI/var/adm/sudo\fR for instance) or create \fI/var/run/sudo\fR
with the appropriate owner (root) and permissions (0700) in the
system startup files.
.PP
\&\fBsudo\fR will not honor timestamps set far in the future.
Timestamps with a date greater than current_time + 2 * \f(CW\*(C`TIMEOUT\*(C'\fR
will be ignored and sudo will log and complain.  This is done to
keep a user from creating his/her own timestamp with a bogus
date on systems that allow users to give away files.
.PP
Please note that \fBsudo\fR will only log the command it explicitly
runs.  If a user runs a command such as \f(CW\*(C`sudo su\*(C'\fR or \f(CW\*(C`sudo sh\*(C'\fR,
subsequent commands run from that shell will \fInot\fR be logged, nor
will \fBsudo\fR's access control affect them.  The same is true for
commands that offer shell escapes (including most editors).  Because
of this, care must be taken when giving users access to commands
via \fBsudo\fR to verify that the command does not inadvertently give
the user an effective root shell.
.SH "ENVIRONMENT"
.IX Header "ENVIRONMENT"
\&\fBsudo\fR utilizes the following environment variables:
.PP
.Vb 2
\& EDITOR                 Default editor to use in -e (sudoedit) mode if
\&                        VISUAL is not set
.Ve
.PP
.Vb 3
\& HOME                   In -s or -H mode (or if sudo was configured with
\&                        the --enable-shell-sets-home option), set to
\&                        homedir of the target user
.Ve
.PP
.Vb 2
\& PATH                   Set to a sane value if sudo was configured with
\&                        the --with-secure-path option
.Ve
.PP
.Vb 1
\& SHELL                  Used to determine shell to run with -s option
.Ve
.PP
.Vb 1
\& SUDO_PROMPT            Used as the default password prompt
.Ve
.PP
.Vb 1
\& SUDO_COMMAND           Set to the command run by sudo
.Ve
.PP
.Vb 1
\& SUDO_USER              Set to the login of the user who invoked sudo
.Ve
.PP
.Vb 1
\& SUDO_UID               Set to the uid of the user who invoked sudo
.Ve
.PP
.Vb 1
\& SUDO_GID               Set to the gid of the user who invoked sudo
.Ve
.PP
.Vb 1
\& SUDO_PS1               If set, PS1 will be set to its value
.Ve
.PP
.Vb 2
\& USER                   Set to the target user (root unless the -u option
\&                        is specified)
.Ve
.PP
.Vb 1
\& VISUAL                 Default editor to use in -e (sudoedit) mode
.Ve
.SH "FILES"
.IX Header "FILES"
.Vb 2
\& /etc/sudoers           List of who can run what
\& /var/run/sudo              Directory containing timestamps
.Ve
.SH "EXAMPLES"
.IX Header "EXAMPLES"
Note: the following examples assume suitable sudoers(5) entries.
.PP
To get a file listing of an unreadable directory:
.PP
.Vb 1
\& $ sudo ls /usr/local/protected
.Ve
.PP
To list the home directory of user yazza on a machine where the
file system holding ~yazza is not exported as root:
.PP
.Vb 1
\& $ sudo -u yazza ls ~yazza
.Ve
.PP
To edit the \fIindex.html\fR file as user www:
.PP
.Vb 1
\& $ sudo -u www vi ~www/htdocs/index.html
.Ve
.PP
To shutdown a machine:
.PP
.Vb 1
\& $ sudo shutdown -r +15 "quick reboot"
.Ve
.PP
To make a usage listing of the directories in the /home
partition.  Note that this runs the commands in a sub-shell
to make the \f(CW\*(C`cd\*(C'\fR and file redirection work.
.PP
.Vb 1
\& $ sudo sh -c "cd /home ; du -s * | sort -rn > USAGE"
.Ve
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIgrep\fR\|(1), \fIsu\fR\|(1), \fIstat\fR\|(2), \fIlogin_cap\fR\|(3), sudoers(5),
passwd(5), visudo(8)
.SH "AUTHORS"
.IX Header "AUTHORS"
Many people have worked on \fBsudo\fR over the years; this
version consists of code written primarily by:
.PP
.Vb 2
\&        Todd Miller
\&        Chris Jepeway
.Ve
.PP
See the \s-1HISTORY\s0 file in the \fBsudo\fR distribution or visit
http://www.sudo.ws/sudo/history.html for a short history
of \fBsudo\fR.
.SH "CAVEATS"
.IX Header "CAVEATS"
There is no easy way to prevent a user from gaining a root shell
if that user is allowed to run arbitrary commands via \fBsudo\fR.
Also, many programs (such as editors) allow the user to run commands
via shell escapes, thus avoiding \fBsudo\fR's checks.  However, on
most systems it is possible to prevent shell escapes with \fBsudo\fR's
\&\fInoexec\fR functionality.  See the sudoers(5) manual
for details.
.PP
It is not meaningful to run the \f(CW\*(C`cd\*(C'\fR command directly via sudo, e.g.
.PP
.Vb 1
\& $ sudo cd /usr/local/protected
.Ve
.PP
since when the command exits the parent process (your shell) will
still be the same.  Please see the \s-1EXAMPLES\s0 section for more information.
.PP
If users have sudo \f(CW\*(C`ALL\*(C'\fR there is nothing to prevent them from
creating their own program that gives them a root shell regardless
of any '!' elements in the user specification.
.PP
Running shell scripts via \fBsudo\fR can expose the same kernel bugs that
make setuid shell scripts unsafe on some operating systems (if your \s-1OS\s0
has a /dev/fd/ directory, setuid shell scripts are generally safe).
.SH "BUGS"
.IX Header "BUGS"
If you feel you have found a bug in \fBsudo\fR, please submit a bug report
at http://www.sudo.ws/sudo/bugs/
.SH "SUPPORT"
.IX Header "SUPPORT"
Commercial support is available for \fBsudo\fR, see
http://www.sudo.ws/sudo/support.html for details.
.PP
Limited free support is available via the sudo-users mailing list,
see http://www.sudo.ws/mailman/listinfo/sudo\-users to subscribe or
search the archives.
.SH "DISCLAIMER"
.IX Header "DISCLAIMER"
\&\fBSudo\fR is provided ``\s-1AS\s0 \s-1IS\s0'' and any express or implied warranties,
including, but not limited to, the implied warranties of merchantability
and fitness for a particular purpose are disclaimed.  See the \s-1LICENSE\s0
file distributed with \fBsudo\fR or http://www.sudo.ws/sudo/license.html
for complete details.
@


1.22
log
@Fix typo; from Stephane Chausson.
@
text
@@


1.21
log
@one more epoch -> Epoch and a grammar fix; ok millert
@
text
@d596 1
a596 1
since when whe command exits the parent process (your shell) will
@


1.20
log
@Update to sudo 1.6.8p9
@
text
@d323 1
a323 1
by setting the time on it to the epoch.  The next time \fBsudo\fR is
@


1.19
log
@update to sudo 1.6.8p8
@
text
@d152 1
a152 1
.TH SUDO 8 "March 12, 2005" "1.6.8p8" "MAINTENANCE COMMANDS"
@


1.18
log
@Update to Sudo 1.6.8p7
@
text
@d20 1
a20 1
.\" $Sudo: sudo.man.in,v 1.31 2004/09/08 18:35:53 millert Exp $
d152 1
a152 1
.TH SUDO 8 "February 5, 2005" "1.6.8p7" "MAINTENANCE COMMANDS"
@


1.17
log
@update to sudo 1.6.8p5
@
text
@d152 1
a152 1
.TH SUDO 8 "November 26, 2004" "1.6.8p5" "MAINTENANCE COMMANDS"
@


1.16
log
@Update to sudo 1.6.8p4
@
text
@d152 1
a152 1
.TH SUDO 8 "November 17, 2004" "1.6.8p4" "MAINTENANCE COMMANDS"
@


1.15
log
@Update to sudo 1.6.8p2
@
text
@d152 1
a152 1
.TH SUDO 8 "November 11, 2004" "1.6.8p2" "MAINTENANCE COMMANDS"
@


1.14
log
@Update to sudo 1.6.8p1
@
text
@d152 1
a152 1
.TH SUDO 8 "September  8, 2004" "1.6.8" "MAINTENANCE COMMANDS"
d409 1
a409 1
\&\f(CW\*(C`ENV\*(C'\fR, \f(CW\*(C`BASH_ENV\*(C'\fR, \f(CW\*(C`KRB_CONF\*(C'\fR, \f(CW\*(C`KRBCONFDIR\*(C'\fR, \f(CW\*(C`KRBTKFILE\*(C'\fR,
d415 3
a417 1
\&\f(CW\*(C`/\*(C'\fR or \f(CW\*(C`%\*(C'\fR characters, they are ignored.  If \fBsudo\fR has been
@


1.13
log
@update to what will soon be sudo 1.6.7
@
text
@a1 1
.\" All rights reserved.
d3 3
a5 3
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
d7 8
a14 6
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
d16 3
a18 3
.\" 3. The name of the author may not be used to endorse or promote products
.\"    derived from this software without specific prior written permission
.\"    from the author.
d20 2
a21 17
.\" 4. Products derived from this software may not be called "Sudo" nor
.\"    may "Sudo" appear in their names without specific prior written
.\"    permission from the author.
.\" 
.\" THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES,
.\" INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY
.\" AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL
.\" THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
.\" EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
.\" PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
.\" OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
.\" WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
.\" OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
.\" ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\" 
.\" $Sudo: sudo.man.in,v 1.16 2003/03/15 20:33:31 millert Exp $
.\" Automatically generated by Pod::Man v1.34, Pod::Parser v1.13
d152 1
a152 1
.TH SUDO 8 "March 13, 2003" "1.6.7" "MAINTENANCE COMMANDS"
d154 1
a154 1
sudo \- execute a command as another user
d157 9
a165 4
\&\fBsudo\fR \fB\-V\fR | \fB\-h\fR | \fB\-l\fR | \fB\-L\fR | \fB\-v\fR | \fB\-k\fR | \fB\-K\fR | \fB\-s\fR |
[ \fB\-H\fR ] [\fB\-P\fR ] [\fB\-S\fR ] [ \fB\-b\fR ] | [ \fB\-p\fR \fIprompt\fR ]
[ \fB\-c\fR \fIclass\fR|\fI\-\fR ] [ \fB\-a\fR \fIauth_type\fR ]
[ \fB\-u\fR \fIusername\fR|\fI#uid\fR ] \fIcommand\fR
d171 4
a174 2
target user as specified in the passwd file (the group vector is
also initialized when the target user is not root).  By default,
d176 8
a183 4
(\s-1NOTE:\s0 by default this is the user's password, not the root password).
Once a user has been authenticated, a timestamp is updated and the
user may then use sudo without a password for a short period of
time (\f(CW\*(C`5\*(C'\fR minutes unless overridden in \fIsudoers\fR).
d194 13
a206 5
defined at configure time or the \fIsudoers\fR file (defaults to root).
Note that the mail will not be sent if an unauthorized user tries
to run sudo with the \fB\-l\fR or \fB\-v\fR flags.  This allows users to
determine for themselves whether or not they are allowed to use
\&\fBsudo\fR.
d215 11
a225 10
.IP "\-V" 4
.IX Item "-V"
The \fB\-V\fR (\fIversion\fR) option causes \fBsudo\fR to print the
version number and exit.  If the invoking user is already root
the \fB\-V\fR option will print out a list of the defaults \fBsudo\fR
was compiled with as well as the machine's local network addresses.
.IP "\-l" 4
.IX Item "-l"
The \fB\-l\fR (\fIlist\fR) option will list out the allowed (and
forbidden) commands for the user on the current host.
d231 72
d306 14
a319 7
.IP "\-v" 4
.IX Item "-v"
If given the \fB\-v\fR (\fIvalidate\fR) option, \fBsudo\fR will update the
user's timestamp, prompting for the user's password if necessary.
This extends the \fBsudo\fR timeout for another \f(CW\*(C`5\*(C'\fR minutes
(or whatever the timeout is set to in \fIsudoers\fR) but does not run
a command.
d327 4
a330 9
.IP "\-K" 4
.IX Item "-K"
The \fB\-K\fR (sure \fIkill\fR) option to \fBsudo\fR removes the user's timestamp
entirely.  Likewise, this option does not require a password.
.IP "\-b" 4
.IX Item "-b"
The \fB\-b\fR (\fIbackground\fR) option tells \fBsudo\fR to run the given
command in the background.  Note that if you use the \fB\-b\fR
option you cannot use shell job control to manipulate the process.
d359 1
a359 1
two consecutive \f(CW\*(C`%\*(C'\fR characters are collaped into a single \f(CW\*(C`%\*(C'\fR character
d363 5
a367 21
.IP "\-c" 4
.IX Item "-c"
The \fB\-c\fR (\fIclass\fR) option causes \fBsudo\fR to run the specified command
with resources limited by the specified login class.  The \fIclass\fR
argument can be either a class name as defined in /etc/login.conf,
or a single '\-' character.  Specifying a \fIclass\fR of \f(CW\*(C`\-\*(C'\fR indicates
that the command should be run restricted by the default login
capabilities for the user the command is run as.  If the \fIclass\fR
argument specifies an existing user class, the command must be run
as root, or the \fBsudo\fR command must be run from a shell that is already
root.  This option is only available on systems with \s-1BSD\s0 login classes
where \fBsudo\fR has been configured with the \-\-with\-logincap option.
.IP "\-a" 4
.IX Item "-a"
The \fB\-a\fR (\fIauthentication type\fR) option causes \fBsudo\fR to use the
specified authentication type when validating the user, as allowed
by /etc/login.conf.  The system administrator may specify a list
of sudo-specific authentication methods by adding an \*(L"auth\-sudo\*(R"
entry in /etc/login.conf.  This option is only available on systems
that support \s-1BSD\s0 authentication where \fBsudo\fR has been configured
with the \-\-with\-bsdauth option.
d372 10
a381 22
\&\fIusername\fR, use \fI#uid\fR.
.IP "\-s" 4
.IX Item "-s"
The \fB\-s\fR (\fIshell\fR) option runs the shell specified by the \fI\s-1SHELL\s0\fR
environment variable if it is set or the shell as specified
in \fIpasswd\fR\|(5).
.IP "\-H" 4
.IX Item "-H"
The \fB\-H\fR (\fI\s-1HOME\s0\fR) option sets the \f(CW\*(C`HOME\*(C'\fR environment variable
to the homedir of the target user (root by default) as specified
in \fIpasswd\fR\|(5).  By default, \fBsudo\fR does not modify \f(CW\*(C`HOME\*(C'\fR.
.IP "\-P" 4
.IX Item "-P"
The \fB\-P\fR (\fIpreserve group vector\fR) option causes \fBsudo\fR to preserve
the user's group vector unaltered.  By default, \fBsudo\fR will initialize
the group vector to the list of groups the target user is in.
The real and effective group IDs, however, are still set to match
the target user.
.IP "\-S" 4
.IX Item "-S"
The \fB\-S\fR (\fIstdin\fR) option causes \fBsudo\fR to read the password from
standard input instead of the terminal device.
d463 62
d527 1
a527 1
Note: the following examples assume suitable \fIsudoers\fR\|(5) entries.
d532 1
a532 1
\& % sudo ls /usr/local/protected
d536 1
a536 1
filesystem holding ~yazza is not exported as root:
d539 1
a539 1
\& % sudo -u yazza ls ~yazza
d545 1
a545 1
\& % sudo -u www vi ~www/htdocs/index.html
d551 1
a551 1
\& % sudo shutdown -r +15 "quick reboot"
d559 1
a559 26
\& % sudo sh -c "cd /home ; du -s * | sort -rn > USAGE"
.Ve
.SH "ENVIRONMENT"
.IX Header "ENVIRONMENT"
\&\fBsudo\fR utilizes the following environment variables:
.PP
.Vb 13
\& PATH                   Set to a sane value if SECURE_PATH is set
\& SHELL                  Used to determine shell to run with -s option
\& USER                   Set to the target user (root unless the -u option
\&                        is specified)
\& HOME                   In -s or -H mode (or if sudo was configured with
\&                        the --enable-shell-sets-home option), set to
\&                        homedir of the target user.
\& SUDO_PROMPT            Used as the default password prompt
\& SUDO_COMMAND           Set to the command run by sudo
\& SUDO_USER              Set to the login of the user who invoked sudo
\& SUDO_UID               Set to the uid of the user who invoked sudo
\& SUDO_GID               Set to the gid of the user who invoked sudo
\& SUDO_PS1               If set, PS1 will be set to its value
.Ve
.SH "FILES"
.IX Header "FILES"
.Vb 2
\& /etc/sudoers           List of who can run what
\& /var/run/sudo              Directory containing timestamps
d561 4
d578 26
d606 1
a606 1
If you feel you have found a bug in sudo, please submit a bug report
d608 8
d620 3
a622 18
and fitness for a particular purpose are disclaimed.
See the \s-1LICENSE\s0 file distributed with \fBsudo\fR for complete details.
.SH "CAVEATS"
.IX Header "CAVEATS"
There is no easy way to prevent a user from gaining a root shell if
that user has access to commands allowing shell escapes.
.PP
If users have sudo \f(CW\*(C`ALL\*(C'\fR there is nothing to prevent them from creating
their own program that gives them a root shell regardless of any '!'
elements in the user specification.
.PP
Running shell scripts via \fBsudo\fR can expose the same kernel bugs
that make setuid shell scripts unsafe on some operating systems
(if your \s-1OS\s0 supports the /dev/fd/ directory, setuid shell scripts
are generally safe).
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIgrep\fR\|(1), \fIsu\fR\|(1), \fIstat\fR\|(2), \fIlogin_cap\fR\|(3), \fIsudoers\fR\|(5), \fIpasswd\fR\|(5), \fIvisudo\fR\|(8)
@


1.12
log
@spelling errors/typos
ok jmc@@
@
text
@d1 1
a1 4
.\" Automatically generated by Pod::Man version 1.15
.\" Thu Apr 25 09:34:52 2002
.\"
.\" Copyright (c) 1994-1996,1998-2002 Todd C. Miller <Todd.Miller@@courtesan.com>
d3 1
a3 1
.\"
d7 1
a7 1
.\"
d10 1
a10 1
.\"
d14 1
a14 1
.\"
d18 1
a18 1
.\"
d22 1
a22 1
.\"
d33 3
d38 1
a38 1
.\" ======================================================================
a50 6
.de Ip \" List item
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
a57 1

d63 3
a65 3
.\" real vertical bar.  \*(C+ will give a nicer C++.  Capital omega is used
.\" to do unbreakable dashes and therefore won't be available.  \*(C` and
.\" \*(C' expand to `' in nroff, nothing in troff, for use with C<>
d85 4
a88 4
.\" If the F register is turned on, we'll generate index entries on stderr
.\" for titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and
.\" index entries marked with X<> in POD.  Of course, you'll have to process
.\" the output yourself in some meaningful fashion.
d97 2
a98 2
.\" For nroff, turn off justification.  Always turn off hyphenation; it
.\" makes way too many mistakes in technical documents.
a103 1
.bd B 3
d163 1
a163 1
.\" ======================================================================
d165 2
a166 3
.IX Title "sudo 8"
.TH sudo 8 "1.6.6" "April 25, 2002" "MAINTENANCE COMMANDS"
.UC
d173 1
a173 1
[ \fB\-c\fR \fIclass\fR|\fI-\fR ] [ \fB\-a\fR \fIauth_type\fR ]
d210 1
a210 1
.Ip "\-V" 4
d216 1
a216 1
.Ip "\-l" 4
d220 1
a220 1
.Ip "\-L" 4
d225 1
a225 1
.Ip "\-h" 4
d228 1
a228 1
.Ip "\-v" 4
d235 1
a235 1
.Ip "\-k" 4
d242 1
a242 1
.Ip "\-K" 4
d246 1
a246 1
.Ip "\-b" 4
d251 1
a251 1
.Ip "\-p" 4
d254 30
a283 5
password prompt and use a custom one.  If the password prompt
contains the \f(CW\*(C`%u\*(C'\fR escape, \f(CW\*(C`%u\*(C'\fR will be replaced with the user's
login name.  Similarly, \f(CW\*(C`%h\*(C'\fR will be replaced with the local
hostname.
.Ip "\-c" 4
d294 2
a295 2
where \fBsudo\fR has been configured with the \-\-with-logincap option.
.Ip "\-a" 4
d300 1
a300 1
of sudo-specific authentication methods by adding an \*(L"auth-sudo\*(R"
d303 2
a304 2
with the \-\-with-bsdauth option.
.Ip "\-u" 4
d309 1
a309 1
.Ip "\-s" 4
d314 1
a314 1
.Ip "\-H" 4
d319 1
a319 1
.Ip "\-P" 4
d326 1
a326 1
.Ip "\-S" 4
d330 2
a331 2
.Ip "\-\-" 4
The \fB\--\fR flag indicates that \fBsudo\fR should stop processing command
d354 1
a354 1
\&\f(CW\*(C`LD_*\*(C'\fR, \f(CW\*(C`_RLD_*\*(C'\fR, \f(CW\*(C`SHLIB_PATH\*(C'\fR (\s-1HP-UX\s0 only), and \f(CW\*(C`LIBPATH\*(C'\fR (\s-1AIX\s0
d420 1
d427 1
d433 1
d439 1
d481 1
d510 1
a510 1
\&\fIstat\fR\|(2), \fIlogin_cap\fR\|(3), \fIsudoers\fR\|(5), \fIpasswd\fR\|(5), \fIvisudo\fR\|(8), \fIgrep\fR\|(1), \fIsu\fR\|(1).
@


1.11
log
@Pull in copyright info from the respective .pod files which gets lost
in the conversion from pod -> man (since it is just a comment).
This will probably get lost again the next time I update sudo but
all the copyright info is in the LICENSE file anyway...
@
text
@d393 1
a393 1
via \fBsudo\fR to verify that the command does not inadvertantly give
@


1.10
log
@Update to sudo 1.6.6
@
text
@d4 33
@


1.9
log
@update to sudo 1.6.5
@
text
@d2 1
a2 1
.\" Wed Jan 16 16:36:09 2002
d141 1
a141 1
.TH sudo 8 "1.6.5" "January 16, 2002" "MAINTENANCE COMMANDS"
@


1.8
log
@sync with sudo 1.6.4-final
@
text
@d2 1
a2 1
.\" Sat Jan 12 15:54:24 2002
d141 1
a141 1
.TH sudo 8 "1.6.4" "January 12, 2002" "MAINTENANCE COMMANDS"
@


1.7
log
@Update to sudo 1.6.4
@
text
@d2 1
a2 1
.\" Fri Dec 14 17:27:57 2001
d141 1
a141 1
.TH sudo 8 "1.6.4" "December 14, 2001" "MAINTENANCE COMMANDS"
d429 1
a429 1
http://www.courtesan.com/sudo/history.html for a short history
d434 1
a434 1
at http://www.courtesan.com/sudo/bugs/
@


1.6
log
@Typo and grammar fixes, one from PR/2058 (Dennis Schwarz); ok millert@@
@
text
@d1 6
a6 22
.rn '' }`
''' $RCSfile: sudo.8,v $$Revision: 1.5 $$Date: 2000/11/21 17:58:44 $
'''
''' $Log: sudo.8,v $
''' Revision 1.5  2000/11/21 17:58:44  millert
''' A few updates from the sudo developement tree:
''' - Add bsd authentication support (currently disabled)
''' - Always check setenv() return value
''' - Fix umask disabling
'''
''' Revision 1.4  2000/04/10 02:28:36  millert
''' Remove extra backslash, noted by marc@@snafu.org
'''
''' Revision 1.3  2000/03/27 03:44:38  millert
''' sudo 1.6.3; see http://www.courtesan.com/sudo/current.html for a list
''' of changes.
'''
''' Revision 1.3  2000/03/27 03:26:23  millert
''' Use 8 and 5 in the man page bodies as well.
'''
'''
.de Sh
d14 1
a14 1
.de Sp
d18 1
a18 1
.de Ip
d24 1
a24 1
.de Vb
d29 1
a29 1
.de Ve
d34 6
a39 6
'''
'''
'''     Set up \*(-- to give an unbreakable dash;
'''     string Tr holds user defined translation string.
'''     Bell System Logo is used as a dummy character.
'''
d41 1
d43 8
a50 20
.ds -- \(*W-
.ds PI pi
.if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\" diablo 12 pitch
.ds L" ""
.ds R" ""
'''   \*(M", \*(S", \*(N" and \*(T" are the equivalent of
'''   \*(L" and \*(R", except that they are used on ".xx" lines,
'''   such as .IP and .SH, which do another additional levels of
'''   double-quote interpretation
.ds M" """
.ds S" """
.ds N" """""
.ds T" """""
.ds L' '
.ds R' '
.ds M' '
.ds S' '
.ds N' '
.ds T' '
d53 4
a56 15
.ds -- \(em\|
.tr \*(Tr
.ds L" ``
.ds R" ''
.ds M" ``
.ds S" ''
.ds N" ``
.ds T" ''
.ds L' `
.ds R' '
.ds M' `
.ds S' '
.ds N' `
.ds T' '
.ds PI \(*p
d58 8
a65 12
.\"	If the F register is turned on, we'll generate
.\"	index entries out stderr for the following things:
.\"		TH	Title 
.\"		SH	Header
.\"		Sh	Subsection 
.\"		Ip	Item
.\"		X<>	Xref  (embedded
.\"	Of course, you have to process the output yourself
.\"	in some meaningful fashion.
.if \nF \{
.de IX
.tm Index:\\$1\t\\n%\t"\\$2"
d67 2
a68 2
.nr % 0
.rr F
d70 4
a73 3
.TH sudo 8 "1.6.3" "26/Mar/2000" "MAINTENANCE COMMANDS"
.UC
.if n .hy 0
d75 3
a77 12
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.de CQ          \" put $1 in typewriter font
.ft CW
'if n "\c
'if t \\&\\$1\c
'if n \\&\\$1\c
'if n \&"
\\&\\$2 \\$3 \\$4 \\$5 \\$6 \\$7
'.ft R
..
.\" @@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2
.	\" AM - accent mark definitions
d79 1
a79 1
.	\" fudge factors for nroff and troff
d81 5
a85 5
.	ds #H 0
.	ds #V .8m
.	ds #F .3m
.	ds #[ \f1
.	ds #] \fP
d88 5
a92 5
.	ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.	ds #V .6m
.	ds #F 0
.	ds #[ \&
.	ds #] \&
d94 1
a94 1
.	\" simple accents for nroff and troff
d96 6
a101 9
.	ds ' \&
.	ds ` \&
.	ds ^ \&
.	ds , \&
.	ds ~ ~
.	ds ? ?
.	ds ! !
.	ds /
.	ds q
d104 6
a109 9
.	ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.	ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.	ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.	ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.	ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.	ds ? \s-2c\h'-\w'c'u*7/10'\u\h'\*(#H'\zi\d\s+2\h'\w'c'u*8/10'
.	ds ! \s-2\(or\s+2\h'-\w'\(or'u'\v'-.8m'.\v'.8m'
.	ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.	ds q o\h'-\w'o'u*8/10'\s-4\v'.4m'\z\(*i\v'-.4m'\s+4\h'\w'o'u*8/10'
d111 1
a111 1
.	\" troff and (daisy-wheel) nroff accents
a113 4
.ds v \\k:\h'-(\\n(.wu*9/10-\*(#H)'\v'-\*(#V'\*(#[\s-4v\s0\v'\*(#V'\h'|\\n:u'\*(#]
.ds _ \\k:\h'-(\\n(.wu*9/10-\*(#H+(\*(#F*2/3))'\v'-.4m'\z\(hy\v'.4m'\h'|\\n:u'
.ds . \\k:\h'-(\\n(.wu*8/10)'\v'\*(#V*4/10'\z.\v'-\*(#V*4/10'\h'|\\n:u'
.ds 3 \*(#[\v'.2m'\s-2\&3\s0\v'-.2m'\*(#]
d121 1
a121 3
.ds oe o\h'-(\w'o'u*4/10)'e
.ds Oe O\h'-(\w'O'u*4/10)'E
.	\" corrections for vroff
d124 1
a124 1
.	\" for low resolution devices (crt and lpr)
d127 9
a135 15
.	ds : e
.	ds 8 ss
.	ds v \h'-1'\o'\(aa\(ga'
.	ds _ \h'-1'^
.	ds . \h'-1'.
.	ds 3 3
.	ds o a
.	ds d- d\h'-1'\(ga
.	ds D- D\h'-1'\(hy
.	ds th \o'bp'
.	ds Th \o'LP'
.	ds ae ae
.	ds Ae AE
.	ds oe oe
.	ds Oe OE
d138 5
d146 5
a150 4
\fBsudo\fR \fB\-V\fR | \fB\-h\fR | \fB\-l\fR | \fB\-L\fR | \fB\-v\fR | \fB\-k\fR | \fB\-K\fR | \fB\-s\fR |
[ \fB\-H\fR ] [\fB\-S\fR ] [ \fB\-b\fR ] | [ \fB\-p\fR prompt ] [ \fB\-c\fR \fIclass\fR|\fI-\fR ]
[ \fB\-a\fR \fIauth_type\fR ]
[ \fB\-u\fR username/#uid ] \fIcommand\fR
d152 26
a177 24
\fBsudo\fR allows a permitted user to execute a \fIcommand\fR as the
superuser or another user, as specified in the sudoers file.  The
real and effective uid and gid are set to match those of the target
user as specified in the passwd file (the group vector is also
initialized when the target user is not root).  By default, \fBsudo\fR
requires that users authenticate themselves with a password
(NOTE: this is the user's password, not the root password).  Once
a user has been authenticated, a timestamp is updated and the
user may then use sudo without a password for a short period of time
(five minutes by default).
.PP
\fBsudo\fR determines who is an authorized user by consulting the
file \fI/etc/sudoers\fR.  By giving \fBsudo\fR the \f(CW-v\fR flag a user
can update the time stamp without running a \fIcommand.\fR
The password prompt itself will also time out if the user's password is
not entered with N minutes (again, this is defined at configure
time and defaults to 5 minutes).
.PP
If a user that is not listed in the \fIsudoers\fR file tries to run
a command via \fBsudo\fR, mail is sent to the proper authorities,
as defined at configure time (defaults to root).  Note that the
mail will not be sent if an unauthorized user tries to run sudo
with the \f(CW-l\fR or \f(CW-v\fR flags.  This allows users to determine
for themselves whether or not they are allowed to use \fBsudo\fR.
d179 1
a179 1
\fBsudo\fR can log both successful and unsuccessful attempts (as well
d181 2
a182 1
will log via \fIsyslog\fR\|(3) but this is changeable at configure time.
d184 11
a194 6
\fBsudo\fR accepts the following command line options:
.Ip "-V" 4
The \f(CW-V\fR (\fIversion\fR) option causes \fBsudo\fR to print the
version number and exit.
.Ip "-l" 4
The \f(CW-l\fR (\fIlist\fR) option will list out the allowed (and
d196 3
a198 2
.Ip "-L" 4
The \f(CW-L\fR (\fIlist\fR defaults) option will list out the parameters
d201 6
a206 4
.Ip "-h" 4
The \f(CW-h\fR (\fIhelp\fR) option causes \fBsudo\fR to print a usage message and exit.
.Ip "-v" 4
If given the \f(CW-v\fR (\fIvalidate\fR) option, \fBsudo\fR will update the
d208 6
a213 5
This extends the \fBsudo\fR timeout to for another N minutes
(where N is defined at installation time and defaults to 5
minutes) but does not run a command.
.Ip "-k" 4
The \f(CW-k\fR (\fIkill\fR) option to \fBsudo\fR invalidates the user's timestamp
d218 12
a229 9
.Ip "-K" 4
The \f(CW-K\fR (sure \fIkill\fR) option to \fBsudo\fR removes the user's timestamp
entirely.  This option does not require a password.
.Ip "-b" 4
The \f(CW-b\fR (\fIbackground\fR) option tells \fBsudo\fR to run the given
command in the background.  Note that if you use the \f(CW-b\fR
option you cannot use shell job control to manipulate the command.
.Ip "-p" 4
The \f(CW-p\fR (\fIprompt\fR) option allows you to override the default
d231 2
a232 2
contains the \f(CW%u\fR escape, \f(CW%u\fR will be replaced with the user's
login name.  Similarly, \f(CW%h\fR will be replaced with the local
d255 3
a257 2
.Ip "-u" 4
The \f(CW-u\fR (\fIuser\fR) option causes \fBsudo\fR to run the specified command
d259 4
a262 3
\fIusername\fR, use \*(L"#uid\*(R".
.Ip "-s" 4
The \f(CW-s\fR (\fIshell\fR) option runs the shell specified by the \fI\s-1SHELL\s0\fR
d265 3
a267 2
.Ip "-H" 4
The \f(CW-H\fR (\fI\s-1HOME\s0\fR) option sets the \fI\s-1HOME\s0\fR environment variable
d269 11
a279 3
in \fIpasswd\fR\|(5).  By default, \fBsudo\fR does not modify \fI\s-1HOME\s0\fR.
.Ip "-S" 4
The \f(CW-S\fR (\fIstdin\fR) option causes \fBsudo\fR to read the password from
d281 3
a283 3
.Ip "--" 4
The \f(CW--\fR flag indicates that \fBsudo\fR should stop processing command
line arguments.  It is most useful in conjunction with the \f(CW-s\fR flag.
d285 5
a289 1
\fBsudo\fR quits with an exit value of 1 if there is a
d293 1
a293 1
\f(CWPATH\fR an error is printed on stderr.  (If the directory does not
d297 2
a298 2
\*(L"permission denied\*(R" is if you are running an automounter and one
of the directories in your \f(CWPATH\fR is on a machine that is currently
d301 2
a302 1
\fBsudo\fR tries to be safe when executing external commands.  Variables
d305 1
a305 1
\f(CWLD_*\fR, \f(CW_RLD_*\fR, \f(CWSHLIB_PATH\fR (HP\-UX only), and \f(CWLIBPATH\fR (AIX
d307 12
a318 4
on to all commands executed.  \fBsudo\fR will also remove the \f(CWIFS\fR,
\f(CWENV\fR, \f(CWBASH_ENV\fR, \f(CWKRB_CONF\fR, \f(CWKRB5_CONFIG\fR, \f(CWLOCALDOMAIN\fR,
\f(CWRES_OPTIONS\fR and \f(CWHOSTALIASES\fR variables as they too can pose a
threat.
d320 1
a320 1
To prevent command spoofing, \fBsudo\fR checks "." and "" (both denoting
d322 2
a323 2
PATH (if one or both are in the PATH).  Note, however, that the
actual \f(CWPATH\fR environment variable is \fInot\fR modified and is passed
d326 1
a326 1
For security reasons, if your OS supports shared libraries and does
d331 1
a331 1
\fBsudo\fR will check the ownership of its timestamp directory
d337 1
a337 1
\fBsudo\fR is run.  However, because \fBsudo\fR checks the ownership and
d348 2
a349 2
\fBsudo\fR will not honor timestamps set far in the future.
Timestamps with a date greater than current_time + 2 * \f(CWTIMEOUT\fR
d352 10
a361 1
date on system that allow users to give away files.
d363 1
d389 1
a389 1
to make the \f(CWcd\fR and file redirection work.
d395 2
a396 1
\fBsudo\fR utilizes the following environment variables:
d414 1
a414 1
.PP
d420 2
a421 1
Many people have worked on \fBsudo\fR over the years.  This
d428 2
a429 1
See the HISTORY file in the \fBsudo\fR distribution for a short history
d432 1
d436 2
a437 1
\fBSudo\fR is provided ``AS IS'\*(R' and any express or implied warranties,
d440 1
a440 1
See the LICENSE file distributed with \fBsudo\fR for complete details.
d442 1
d446 2
a447 2
If users have sudo \f(CWALL\fR there is nothing to prevent them from creating
their own program that gives them a root shell regardless of any \*(L'!\*(R'
d452 1
a452 1
(if your OS supports the /dev/fd/ directory, setuid shell scripts
a454 60
\fIsudoers\fR\|(5), \fIvisudo\fR\|(8), \fIsu\fR\|(1).

.rn }` ''
.IX Title "sudo 8"
.IX Name "sudo - execute a command as another user"

.IX Header "NAME"

.IX Header "SYNOPSIS"

.IX Header "DESCRIPTION"

.IX Header "OPTIONS"

.IX Item "-V"

.IX Item "-l"

.IX Item "-L"

.IX Item "-h"

.IX Item "-v"

.IX Item "-k"

.IX Item "-K"

.IX Item "-b"

.IX Item "-p"

.IX Item "-u"

.IX Item "-s"

.IX Item "-H"

.IX Item "-S"

.IX Item "--"

.IX Header "RETURN VALUES"

.IX Header "SECURITY NOTES"

.IX Header "EXAMPLES"

.IX Header "ENVIRONMENT"

.IX Header "FILES"

.IX Header "AUTHORS"

.IX Header "BUGS"

.IX Header "DISCLAIMER"

.IX Header "CAVEATS"

d456 1
a456 1

@


1.6.2.1
log
@update to sudo 1.6.5p1
@
text
@d1 22
a22 6
.\" Automatically generated by Pod::Man version 1.15
.\" Wed Jan 16 16:36:09 2002
.\"
.\" Standard preamble:
.\" ======================================================================
.de Sh \" Subsection heading
d30 1
a30 1
.de Sp \" Vertical space (when we can't use .PP)
d34 1
a34 1
.de Ip \" List item
d40 1
a40 1
.de Vb \" Begin verbatim text
d45 1
a45 1
.de Ve \" End verbatim text
d50 6
a55 6
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  | will give a
.\" real vertical bar.  \*(C+ will give a nicer C++.  Capital omega is used
.\" to do unbreakable dashes and therefore won't be available.  \*(C` and
.\" \*(C' expand to `' in nroff, nothing in troff, for use with C<>
a56 1
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
d58 20
a77 8
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` 
.    ds C' 
d80 15
a94 4
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
d96 12
a107 8
.\"
.\" If the F register is turned on, we'll generate index entries on stderr
.\" for titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and
.\" index entries marked with X<> in POD.  Of course, you'll have to process
.\" the output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
d109 2
a110 2
.    nr % 0
.    rr F
d112 3
a114 4
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it
.\" makes way too many mistakes in technical documents.
.hy 0
d116 12
a127 3
.\"
.\" Accent mark definitions (@@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
d129 1
a129 1
.    \" fudge factors for nroff and troff
d131 5
a135 5
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
d138 5
a142 5
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
d144 1
a144 1
.    \" simple accents for nroff and troff
d146 9
a154 6
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
d157 9
a165 6
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
d167 1
a167 1
.    \" troff and (daisy-wheel) nroff accents
d170 4
d181 3
a183 1
.    \" corrections for vroff
d186 1
a186 1
.    \" for low resolution devices (crt and lpr)
d189 15
a203 9
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
a205 5
.\" ======================================================================
.\"
.IX Title "sudo 8"
.TH sudo 8 "1.6.5" "January 16, 2002" "MAINTENANCE COMMANDS"
.UC
d209 4
a212 5
.IX Header "SYNOPSIS"
\&\fBsudo\fR \fB\-V\fR | \fB\-h\fR | \fB\-l\fR | \fB\-L\fR | \fB\-v\fR | \fB\-k\fR | \fB\-K\fR | \fB\-s\fR |
[ \fB\-H\fR ] [\fB\-P\fR ] [\fB\-S\fR ] [ \fB\-b\fR ] | [ \fB\-p\fR \fIprompt\fR ]
[ \fB\-c\fR \fIclass\fR|\fI-\fR ] [ \fB\-a\fR \fIauth_type\fR ]
[ \fB\-u\fR \fIusername\fR|\fI#uid\fR ] \fIcommand\fR
d214 24
a237 26
.IX Header "DESCRIPTION"
\&\fBsudo\fR allows a permitted user to execute a \fIcommand\fR as the
superuser or another user, as specified in the \fIsudoers\fR file.
The real and effective uid and gid are set to match those of the
target user as specified in the passwd file (the group vector is
also initialized when the target user is not root).  By default,
\&\fBsudo\fR requires that users authenticate themselves with a password
(\s-1NOTE:\s0 by default this is the user's password, not the root password).
Once a user has been authenticated, a timestamp is updated and the
user may then use sudo without a password for a short period of
time (\f(CW\*(C`5\*(C'\fR minutes unless overridden in \fIsudoers\fR).
.PP
\&\fBsudo\fR determines who is an authorized user by consulting the file
\&\fI/etc/sudoers\fR.  By giving \fBsudo\fR the \fB\-v\fR flag a user
can update the time stamp without running a \fIcommand.\fR The password
prompt itself will also time out if the user's password is not
entered within \f(CW\*(C`5\*(C'\fR minutes (unless overridden via
\&\fIsudoers\fR).
.PP
If a user who is not listed in the \fIsudoers\fR file tries to run a
command via \fBsudo\fR, mail is sent to the proper authorities, as
defined at configure time or the \fIsudoers\fR file (defaults to root).
Note that the mail will not be sent if an unauthorized user tries
to run sudo with the \fB\-l\fR or \fB\-v\fR flags.  This allows users to
determine for themselves whether or not they are allowed to use
\&\fBsudo\fR.
d239 1
a239 1
\&\fBsudo\fR can log both successful and unsuccessful attempts (as well
d241 1
a241 2
will log via \fIsyslog\fR\|(3) but this is changeable at configure time
or via the \fIsudoers\fR file.
d243 6
a248 11
.IX Header "OPTIONS"
\&\fBsudo\fR accepts the following command line options:
.Ip "\-V" 4
.IX Item "-V"
The \fB\-V\fR (\fIversion\fR) option causes \fBsudo\fR to print the
version number and exit.  If the invoking user is already root
the \fB\-V\fR option will print out a list of the defaults \fBsudo\fR
was compiled with as well as the machine's local network addresses.
.Ip "\-l" 4
.IX Item "-l"
The \fB\-l\fR (\fIlist\fR) option will list out the allowed (and
d250 2
a251 3
.Ip "\-L" 4
.IX Item "-L"
The \fB\-L\fR (\fIlist\fR defaults) option will list out the parameters
d254 4
a257 6
.Ip "\-h" 4
.IX Item "-h"
The \fB\-h\fR (\fIhelp\fR) option causes \fBsudo\fR to print a usage message and exit.
.Ip "\-v" 4
.IX Item "-v"
If given the \fB\-v\fR (\fIvalidate\fR) option, \fBsudo\fR will update the
d259 5
a263 6
This extends the \fBsudo\fR timeout for another \f(CW\*(C`5\*(C'\fR minutes
(or whatever the timeout is set to in \fIsudoers\fR) but does not run
a command.
.Ip "\-k" 4
.IX Item "-k"
The \fB\-k\fR (\fIkill\fR) option to \fBsudo\fR invalidates the user's timestamp
d268 9
a276 12
.Ip "\-K" 4
.IX Item "-K"
The \fB\-K\fR (sure \fIkill\fR) option to \fBsudo\fR removes the user's timestamp
entirely.  Likewise, this option does not require a password.
.Ip "\-b" 4
.IX Item "-b"
The \fB\-b\fR (\fIbackground\fR) option tells \fBsudo\fR to run the given
command in the background.  Note that if you use the \fB\-b\fR
option you cannot use shell job control to manipulate the process.
.Ip "\-p" 4
.IX Item "-p"
The \fB\-p\fR (\fIprompt\fR) option allows you to override the default
d278 2
a279 2
contains the \f(CW\*(C`%u\*(C'\fR escape, \f(CW\*(C`%u\*(C'\fR will be replaced with the user's
login name.  Similarly, \f(CW\*(C`%h\*(C'\fR will be replaced with the local
d302 2
a303 3
.Ip "\-u" 4
.IX Item "-u"
The \fB\-u\fR (\fIuser\fR) option causes \fBsudo\fR to run the specified command
d305 3
a307 4
\&\fIusername\fR, use \fI#uid\fR.
.Ip "\-s" 4
.IX Item "-s"
The \fB\-s\fR (\fIshell\fR) option runs the shell specified by the \fI\s-1SHELL\s0\fR
d310 2
a311 3
.Ip "\-H" 4
.IX Item "-H"
The \fB\-H\fR (\fI\s-1HOME\s0\fR) option sets the \f(CW\*(C`HOME\*(C'\fR environment variable
d313 3
a315 11
in \fIpasswd\fR\|(5).  By default, \fBsudo\fR does not modify \f(CW\*(C`HOME\*(C'\fR.
.Ip "\-P" 4
.IX Item "-P"
The \fB\-P\fR (\fIpreserve group vector\fR) option causes \fBsudo\fR to preserve
the user's group vector unaltered.  By default, \fBsudo\fR will initialize
the group vector to the list of groups the target user is in.
The real and effective group IDs, however, are still set to match
the target user.
.Ip "\-S" 4
.IX Item "-S"
The \fB\-S\fR (\fIstdin\fR) option causes \fBsudo\fR to read the password from
d317 3
a319 3
.Ip "\-\-" 4
The \fB\--\fR flag indicates that \fBsudo\fR should stop processing command
line arguments.  It is most useful in conjunction with the \fB\-s\fR flag.
d321 1
a321 5
.IX Header "RETURN VALUES"
Upon successful execution of a program, the return value from \fBsudo\fR
will simply be the return value of the program that was executed.
.PP
Otherwise, \fBsudo\fR quits with an exit value of 1 if there is a
d325 1
a325 1
\&\f(CW\*(C`PATH\*(C'\fR an error is printed on stderr.  (If the directory does not
d329 2
a330 2
\&\*(L"permission denied\*(R" is if you are running an automounter and one
of the directories in your \f(CW\*(C`PATH\*(C'\fR is on a machine that is currently
d333 1
a333 2
.IX Header "SECURITY NOTES"
\&\fBsudo\fR tries to be safe when executing external commands.  Variables
d336 1
a336 1
\&\f(CW\*(C`LD_*\*(C'\fR, \f(CW\*(C`_RLD_*\*(C'\fR, \f(CW\*(C`SHLIB_PATH\*(C'\fR (\s-1HP-UX\s0 only), and \f(CW\*(C`LIBPATH\*(C'\fR (\s-1AIX\s0
d338 4
a341 12
on to all commands executed.  \fBsudo\fR will also remove the \f(CW\*(C`IFS\*(C'\fR,
\&\f(CW\*(C`ENV\*(C'\fR, \f(CW\*(C`BASH_ENV\*(C'\fR, \f(CW\*(C`KRB_CONF\*(C'\fR, \f(CW\*(C`KRBCONFDIR\*(C'\fR, \f(CW\*(C`KRBTKFILE\*(C'\fR,
\&\f(CW\*(C`KRB5_CONFIG\*(C'\fR, \f(CW\*(C`LOCALDOMAIN\*(C'\fR, \f(CW\*(C`RES_OPTIONS\*(C'\fR, \f(CW\*(C`HOSTALIASES\*(C'\fR,
\&\f(CW\*(C`NLSPATH\*(C'\fR, \f(CW\*(C`PATH_LOCALE\*(C'\fR, \f(CW\*(C`TERMINFO\*(C'\fR, \f(CW\*(C`TERMINFO_DIRS\*(C'\fR and
\&\f(CW\*(C`TERMPATH\*(C'\fR variables as they too can pose a threat.  If the
\&\f(CW\*(C`TERMCAP\*(C'\fR variable is set and is a pathname, it too is ignored.
Additionally, if the \f(CW\*(C`LC_*\*(C'\fR or \f(CW\*(C`LANGUAGE\*(C'\fR variables contain the
\&\f(CW\*(C`/\*(C'\fR or \f(CW\*(C`%\*(C'\fR characters, they are ignored.  If \fBsudo\fR has been
compiled with SecurID support, the \f(CW\*(C`VAR_ACE\*(C'\fR, \f(CW\*(C`USR_ACE\*(C'\fR and
\&\f(CW\*(C`DLC_ACE\*(C'\fR variables are cleared as well.  The list of environment
variables that \fBsudo\fR clears is contained in the output of
\&\f(CW\*(C`sudo \-V\*(C'\fR when run as root.
d343 1
a343 1
To prevent command spoofing, \fBsudo\fR checks \*(L".\*(R" and "" (both denoting
d345 2
a346 2
\&\s-1PATH\s0 (if one or both are in the \s-1PATH\s0).  Note, however, that the
actual \f(CW\*(C`PATH\*(C'\fR environment variable is \fInot\fR modified and is passed
d349 1
a349 1
For security reasons, if your \s-1OS\s0 supports shared libraries and does
d354 1
a354 1
\&\fBsudo\fR will check the ownership of its timestamp directory
d360 1
a360 1
\&\fBsudo\fR is run.  However, because \fBsudo\fR checks the ownership and
d371 2
a372 2
\&\fBsudo\fR will not honor timestamps set far in the future.
Timestamps with a date greater than current_time + 2 * \f(CW\*(C`TIMEOUT\*(C'\fR
d375 1
a375 10
date on systems that allow users to give away files.
.PP
Please note that \fBsudo\fR will only log the command it explicitly
runs.  If a user runs a command such as \f(CW\*(C`sudo su\*(C'\fR or \f(CW\*(C`sudo sh\*(C'\fR,
subsequent commands run from that shell will \fInot\fR be logged, nor
will \fBsudo\fR's access control affect them.  The same is true for
commands that offer shell escapes (including most editors).  Because
of this, care must be taken when giving users access to commands
via \fBsudo\fR to verify that the command does not inadvertantly give
the user an effective root shell.
a376 1
.IX Header "EXAMPLES"
d402 1
a402 1
to make the \f(CW\*(C`cd\*(C'\fR and file redirection work.
d408 1
a408 2
.IX Header "ENVIRONMENT"
\&\fBsudo\fR utilizes the following environment variables:
d426 1
a426 1
.IX Header "FILES"
d432 1
a432 2
.IX Header "AUTHORS"
Many people have worked on \fBsudo\fR over the years; this
d439 1
a439 2
See the \s-1HISTORY\s0 file in the \fBsudo\fR distribution or visit
http://www.sudo.ws/sudo/history.html for a short history
a441 1
.IX Header "BUGS"
d443 1
a443 1
at http://www.sudo.ws/sudo/bugs/
d445 1
a445 2
.IX Header "DISCLAIMER"
\&\fBSudo\fR is provided ``\s-1AS\s0 \s-1IS\s0'' and any express or implied warranties,
d448 1
a448 1
See the \s-1LICENSE\s0 file distributed with \fBsudo\fR for complete details.
a449 1
.IX Header "CAVEATS"
d453 2
a454 2
If users have sudo \f(CW\*(C`ALL\*(C'\fR there is nothing to prevent them from creating
their own program that gives them a root shell regardless of any '!'
d459 1
a459 1
(if your \s-1OS\s0 supports the /dev/fd/ directory, setuid shell scripts
d462 60
d523 1
a523 1
\&\fIstat\fR\|(2), \fIlogin_cap\fR\|(3), \fIsudoers\fR\|(5), \fIpasswd\fR\|(5), \fIvisudo\fR\|(8), \fIgrep\fR\|(1), \fIsu\fR\|(1).
@


1.5
log
@A few updates from the sudo developement tree:
- Add bsd authentication support (currently disabled)
- Always check setenv() return value
- Fix umask disabling
@
text
@d2 1
a2 1
''' $RCSfile: sudo.8,v $$Revision: 1.4 $$Date: 2000/04/10 02:28:36 $
d5 6
d104 1
a104 1
.\"	in some meaninful fashion.
d239 1
a239 1
\fBsudo\fR can log both successful an unsuccessful attempts (as well
d288 1
a288 1
capibilities for the user the command is run as.  If the \fIclass\fR
d358 1
a358 1
directory is located in a directory writable by anyone (eg: \fI/tmp\fR),
d432 1
a432 1
Many people have worked on \fBsudo\fR over the years, this
@


1.5.2.1
log
@update to sudo 1.6.5p1
@
text
@d1 16
a16 6
.\" Automatically generated by Pod::Man version 1.15
.\" Wed Jan 16 16:36:09 2002
.\"
.\" Standard preamble:
.\" ======================================================================
.de Sh \" Subsection heading
d24 1
a24 1
.de Sp \" Vertical space (when we can't use .PP)
d28 1
a28 1
.de Ip \" List item
d34 1
a34 1
.de Vb \" Begin verbatim text
d39 1
a39 1
.de Ve \" End verbatim text
d44 6
a49 6
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  | will give a
.\" real vertical bar.  \*(C+ will give a nicer C++.  Capital omega is used
.\" to do unbreakable dashes and therefore won't be available.  \*(C` and
.\" \*(C' expand to `' in nroff, nothing in troff, for use with C<>
a50 1
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
d52 20
a71 8
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` 
.    ds C' 
d74 15
a88 4
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
d90 12
a101 8
.\"
.\" If the F register is turned on, we'll generate index entries on stderr
.\" for titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and
.\" index entries marked with X<> in POD.  Of course, you'll have to process
.\" the output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
d103 2
a104 2
.    nr % 0
.    rr F
d106 3
a108 4
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it
.\" makes way too many mistakes in technical documents.
.hy 0
d110 12
a121 3
.\"
.\" Accent mark definitions (@@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
d123 1
a123 1
.    \" fudge factors for nroff and troff
d125 5
a129 5
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
d132 5
a136 5
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
d138 1
a138 1
.    \" simple accents for nroff and troff
d140 9
a148 6
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
d151 9
a159 6
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
d161 1
a161 1
.    \" troff and (daisy-wheel) nroff accents
d164 4
d175 3
a177 1
.    \" corrections for vroff
d180 1
a180 1
.    \" for low resolution devices (crt and lpr)
d183 15
a197 9
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
a199 5
.\" ======================================================================
.\"
.IX Title "sudo 8"
.TH sudo 8 "1.6.5" "January 16, 2002" "MAINTENANCE COMMANDS"
.UC
d203 4
a206 5
.IX Header "SYNOPSIS"
\&\fBsudo\fR \fB\-V\fR | \fB\-h\fR | \fB\-l\fR | \fB\-L\fR | \fB\-v\fR | \fB\-k\fR | \fB\-K\fR | \fB\-s\fR |
[ \fB\-H\fR ] [\fB\-P\fR ] [\fB\-S\fR ] [ \fB\-b\fR ] | [ \fB\-p\fR \fIprompt\fR ]
[ \fB\-c\fR \fIclass\fR|\fI-\fR ] [ \fB\-a\fR \fIauth_type\fR ]
[ \fB\-u\fR \fIusername\fR|\fI#uid\fR ] \fIcommand\fR
d208 24
a231 26
.IX Header "DESCRIPTION"
\&\fBsudo\fR allows a permitted user to execute a \fIcommand\fR as the
superuser or another user, as specified in the \fIsudoers\fR file.
The real and effective uid and gid are set to match those of the
target user as specified in the passwd file (the group vector is
also initialized when the target user is not root).  By default,
\&\fBsudo\fR requires that users authenticate themselves with a password
(\s-1NOTE:\s0 by default this is the user's password, not the root password).
Once a user has been authenticated, a timestamp is updated and the
user may then use sudo without a password for a short period of
time (\f(CW\*(C`5\*(C'\fR minutes unless overridden in \fIsudoers\fR).
.PP
\&\fBsudo\fR determines who is an authorized user by consulting the file
\&\fI/etc/sudoers\fR.  By giving \fBsudo\fR the \fB\-v\fR flag a user
can update the time stamp without running a \fIcommand.\fR The password
prompt itself will also time out if the user's password is not
entered within \f(CW\*(C`5\*(C'\fR minutes (unless overridden via
\&\fIsudoers\fR).
.PP
If a user who is not listed in the \fIsudoers\fR file tries to run a
command via \fBsudo\fR, mail is sent to the proper authorities, as
defined at configure time or the \fIsudoers\fR file (defaults to root).
Note that the mail will not be sent if an unauthorized user tries
to run sudo with the \fB\-l\fR or \fB\-v\fR flags.  This allows users to
determine for themselves whether or not they are allowed to use
\&\fBsudo\fR.
d233 1
a233 1
\&\fBsudo\fR can log both successful and unsuccessful attempts (as well
d235 1
a235 2
will log via \fIsyslog\fR\|(3) but this is changeable at configure time
or via the \fIsudoers\fR file.
d237 6
a242 11
.IX Header "OPTIONS"
\&\fBsudo\fR accepts the following command line options:
.Ip "\-V" 4
.IX Item "-V"
The \fB\-V\fR (\fIversion\fR) option causes \fBsudo\fR to print the
version number and exit.  If the invoking user is already root
the \fB\-V\fR option will print out a list of the defaults \fBsudo\fR
was compiled with as well as the machine's local network addresses.
.Ip "\-l" 4
.IX Item "-l"
The \fB\-l\fR (\fIlist\fR) option will list out the allowed (and
d244 2
a245 3
.Ip "\-L" 4
.IX Item "-L"
The \fB\-L\fR (\fIlist\fR defaults) option will list out the parameters
d248 4
a251 6
.Ip "\-h" 4
.IX Item "-h"
The \fB\-h\fR (\fIhelp\fR) option causes \fBsudo\fR to print a usage message and exit.
.Ip "\-v" 4
.IX Item "-v"
If given the \fB\-v\fR (\fIvalidate\fR) option, \fBsudo\fR will update the
d253 5
a257 6
This extends the \fBsudo\fR timeout for another \f(CW\*(C`5\*(C'\fR minutes
(or whatever the timeout is set to in \fIsudoers\fR) but does not run
a command.
.Ip "\-k" 4
.IX Item "-k"
The \fB\-k\fR (\fIkill\fR) option to \fBsudo\fR invalidates the user's timestamp
d262 9
a270 12
.Ip "\-K" 4
.IX Item "-K"
The \fB\-K\fR (sure \fIkill\fR) option to \fBsudo\fR removes the user's timestamp
entirely.  Likewise, this option does not require a password.
.Ip "\-b" 4
.IX Item "-b"
The \fB\-b\fR (\fIbackground\fR) option tells \fBsudo\fR to run the given
command in the background.  Note that if you use the \fB\-b\fR
option you cannot use shell job control to manipulate the process.
.Ip "\-p" 4
.IX Item "-p"
The \fB\-p\fR (\fIprompt\fR) option allows you to override the default
d272 2
a273 2
contains the \f(CW\*(C`%u\*(C'\fR escape, \f(CW\*(C`%u\*(C'\fR will be replaced with the user's
login name.  Similarly, \f(CW\*(C`%h\*(C'\fR will be replaced with the local
d282 1
a282 1
capabilities for the user the command is run as.  If the \fIclass\fR
d296 2
a297 3
.Ip "\-u" 4
.IX Item "-u"
The \fB\-u\fR (\fIuser\fR) option causes \fBsudo\fR to run the specified command
d299 3
a301 4
\&\fIusername\fR, use \fI#uid\fR.
.Ip "\-s" 4
.IX Item "-s"
The \fB\-s\fR (\fIshell\fR) option runs the shell specified by the \fI\s-1SHELL\s0\fR
d304 2
a305 3
.Ip "\-H" 4
.IX Item "-H"
The \fB\-H\fR (\fI\s-1HOME\s0\fR) option sets the \f(CW\*(C`HOME\*(C'\fR environment variable
d307 3
a309 11
in \fIpasswd\fR\|(5).  By default, \fBsudo\fR does not modify \f(CW\*(C`HOME\*(C'\fR.
.Ip "\-P" 4
.IX Item "-P"
The \fB\-P\fR (\fIpreserve group vector\fR) option causes \fBsudo\fR to preserve
the user's group vector unaltered.  By default, \fBsudo\fR will initialize
the group vector to the list of groups the target user is in.
The real and effective group IDs, however, are still set to match
the target user.
.Ip "\-S" 4
.IX Item "-S"
The \fB\-S\fR (\fIstdin\fR) option causes \fBsudo\fR to read the password from
d311 3
a313 3
.Ip "\-\-" 4
The \fB\--\fR flag indicates that \fBsudo\fR should stop processing command
line arguments.  It is most useful in conjunction with the \fB\-s\fR flag.
d315 1
a315 5
.IX Header "RETURN VALUES"
Upon successful execution of a program, the return value from \fBsudo\fR
will simply be the return value of the program that was executed.
.PP
Otherwise, \fBsudo\fR quits with an exit value of 1 if there is a
d319 1
a319 1
\&\f(CW\*(C`PATH\*(C'\fR an error is printed on stderr.  (If the directory does not
d323 2
a324 2
\&\*(L"permission denied\*(R" is if you are running an automounter and one
of the directories in your \f(CW\*(C`PATH\*(C'\fR is on a machine that is currently
d327 1
a327 2
.IX Header "SECURITY NOTES"
\&\fBsudo\fR tries to be safe when executing external commands.  Variables
d330 1
a330 1
\&\f(CW\*(C`LD_*\*(C'\fR, \f(CW\*(C`_RLD_*\*(C'\fR, \f(CW\*(C`SHLIB_PATH\*(C'\fR (\s-1HP-UX\s0 only), and \f(CW\*(C`LIBPATH\*(C'\fR (\s-1AIX\s0
d332 4
a335 12
on to all commands executed.  \fBsudo\fR will also remove the \f(CW\*(C`IFS\*(C'\fR,
\&\f(CW\*(C`ENV\*(C'\fR, \f(CW\*(C`BASH_ENV\*(C'\fR, \f(CW\*(C`KRB_CONF\*(C'\fR, \f(CW\*(C`KRBCONFDIR\*(C'\fR, \f(CW\*(C`KRBTKFILE\*(C'\fR,
\&\f(CW\*(C`KRB5_CONFIG\*(C'\fR, \f(CW\*(C`LOCALDOMAIN\*(C'\fR, \f(CW\*(C`RES_OPTIONS\*(C'\fR, \f(CW\*(C`HOSTALIASES\*(C'\fR,
\&\f(CW\*(C`NLSPATH\*(C'\fR, \f(CW\*(C`PATH_LOCALE\*(C'\fR, \f(CW\*(C`TERMINFO\*(C'\fR, \f(CW\*(C`TERMINFO_DIRS\*(C'\fR and
\&\f(CW\*(C`TERMPATH\*(C'\fR variables as they too can pose a threat.  If the
\&\f(CW\*(C`TERMCAP\*(C'\fR variable is set and is a pathname, it too is ignored.
Additionally, if the \f(CW\*(C`LC_*\*(C'\fR or \f(CW\*(C`LANGUAGE\*(C'\fR variables contain the
\&\f(CW\*(C`/\*(C'\fR or \f(CW\*(C`%\*(C'\fR characters, they are ignored.  If \fBsudo\fR has been
compiled with SecurID support, the \f(CW\*(C`VAR_ACE\*(C'\fR, \f(CW\*(C`USR_ACE\*(C'\fR and
\&\f(CW\*(C`DLC_ACE\*(C'\fR variables are cleared as well.  The list of environment
variables that \fBsudo\fR clears is contained in the output of
\&\f(CW\*(C`sudo \-V\*(C'\fR when run as root.
d337 1
a337 1
To prevent command spoofing, \fBsudo\fR checks \*(L".\*(R" and "" (both denoting
d339 2
a340 2
\&\s-1PATH\s0 (if one or both are in the \s-1PATH\s0).  Note, however, that the
actual \f(CW\*(C`PATH\*(C'\fR environment variable is \fInot\fR modified and is passed
d343 1
a343 1
For security reasons, if your \s-1OS\s0 supports shared libraries and does
d348 1
a348 1
\&\fBsudo\fR will check the ownership of its timestamp directory
d352 1
a352 1
directory is located in a directory writable by anyone (e.g.: \fI/tmp\fR),
d354 1
a354 1
\&\fBsudo\fR is run.  However, because \fBsudo\fR checks the ownership and
d365 2
a366 2
\&\fBsudo\fR will not honor timestamps set far in the future.
Timestamps with a date greater than current_time + 2 * \f(CW\*(C`TIMEOUT\*(C'\fR
d369 1
a369 10
date on systems that allow users to give away files.
.PP
Please note that \fBsudo\fR will only log the command it explicitly
runs.  If a user runs a command such as \f(CW\*(C`sudo su\*(C'\fR or \f(CW\*(C`sudo sh\*(C'\fR,
subsequent commands run from that shell will \fInot\fR be logged, nor
will \fBsudo\fR's access control affect them.  The same is true for
commands that offer shell escapes (including most editors).  Because
of this, care must be taken when giving users access to commands
via \fBsudo\fR to verify that the command does not inadvertantly give
the user an effective root shell.
a370 1
.IX Header "EXAMPLES"
d396 1
a396 1
to make the \f(CW\*(C`cd\*(C'\fR and file redirection work.
d402 1
a402 2
.IX Header "ENVIRONMENT"
\&\fBsudo\fR utilizes the following environment variables:
d420 1
a420 1
.IX Header "FILES"
d426 1
a426 2
.IX Header "AUTHORS"
Many people have worked on \fBsudo\fR over the years; this
d433 1
a433 2
See the \s-1HISTORY\s0 file in the \fBsudo\fR distribution or visit
http://www.sudo.ws/sudo/history.html for a short history
a435 1
.IX Header "BUGS"
d437 1
a437 1
at http://www.sudo.ws/sudo/bugs/
d439 1
a439 2
.IX Header "DISCLAIMER"
\&\fBSudo\fR is provided ``\s-1AS\s0 \s-1IS\s0'' and any express or implied warranties,
d442 1
a442 1
See the \s-1LICENSE\s0 file distributed with \fBsudo\fR for complete details.
a443 1
.IX Header "CAVEATS"
d447 2
a448 2
If users have sudo \f(CW\*(C`ALL\*(C'\fR there is nothing to prevent them from creating
their own program that gives them a root shell regardless of any '!'
d453 1
a453 1
(if your \s-1OS\s0 supports the /dev/fd/ directory, setuid shell scripts
d456 60
d517 1
a517 1
\&\fIstat\fR\|(2), \fIlogin_cap\fR\|(3), \fIsudoers\fR\|(5), \fIpasswd\fR\|(5), \fIvisudo\fR\|(8), \fIgrep\fR\|(1), \fIsu\fR\|(1).
@


1.4
log
@Remove extra backslash, noted by marc@@snafu.org
@
text
@d2 1
a2 1
''' $RCSfile: sudo.8,v $$Revision: 1.3 $$Date: 2000/03/27 03:44:38 $
d5 3
d204 2
a205 1
[ \fB\-H\fR ] [\fB\-S\fR ] [ \fB\-b\fR ] | [ \fB\-p\fR prompt ]
d275 21
@


1.3
log
@sudo 1.6.3; see http://www.courtesan.com/sudo/current.html for a list
of changes.
@
text
@d2 6
a7 1
''' $RCSfile: sudo.man.in,v $$Revision: 1.3 $$Date: 2000/03/27 03:26:23 $
a8 1
''' $Log: sudo.man.in,v $
d431 1
a431 1
\\fIsudoers\fR\|(5), \fIvisudo\fR\|(8), \fIsu\fR\|(1).
@


1.2
log
@sudo 1.6.2
@
text
@d2 1
a2 1
''' $RCSfile: sudo.man,v $$Revision: 1.43 $$Date: 2000/01/17 17:28:41 $
d4 3
a6 3
''' $Log: sudo.man,v $
''' Revision 1.43  2000/01/17 17:28:41  millert
''' Crank version to 1.6.2
d99 1
a99 1
.TH sudo 8 "1.6.2" "4/Dec/1999" "MAINTENANCE COMMANDS"
d196 3
a198 2
\fBsudo\fR \fB\-V\fR | \fB\-h\fR | \fB\-l\fR | \fB\-L\fR | \fB\-v\fR | \fB\-k\fR | \fB\-K\fR | \fB\-s\fR | \fB\-H\fR |
[ \fB\-b\fR ] | [ \fB\-p\fR prompt ] [ \fB\-u\fR username/#uid] \fIcommand\fR
d268 1
a268 1
The \f(CW-u\fR (\fIuser\fR) option causes sudo to run the specified command
d279 3
d320 15
a334 15
(\fI/var/run/sudo\fR or \fI/tmp/.odus\fR by default) and ignore the
directory's contents if it is not owned by root and only writable
by root.  On systems that allow non-root users to give away files
via \fIchown\fR\|(2), if the timestamp directory is located in a directory
writable by anyone (ie: \fI/tmp\fR), it is possible for a user to
create the timestamp directory before \fBsudo\fR is run.  However,
because \fBsudo\fR checks the ownership and mode of the directory and
its contents, the only damage that can be done is to \*(L"hide\*(R" files
by putting them in the timestamp dir.  This is unlikely to happen
since once the timestamp dir is owned by root and inaccessible by
any other user the user placing files there would be unable to get
them back out.  To get around this issue you can use a directory
that is not world-writable for the timestamps (\fI/var/adm/sudo\fR for
instance) or create /tmp/.odus with the appropriate owner (root)
and permissions (0700) in the system startup files.
d394 1
a394 25
\& /var/run/sudo          Directory containing timestamps
.Ve
\fBsudo\fR utilizes the following environment variables:
.PP
.Vb 13
\& PATH                   Set to a sane value if SECURE_PATH is set
\& SHELL                  Used to determine shell to run with -s option
\& USER                   Set to the target user (root unless the -u option
\&                        is specified)
\& HOME                   In -s or -H mode (or if sudo was configured with
\&                        the --enable-shell-sets-home option), set to
\&                        homedir of the target user.
\& SUDO_PROMPT            Used as the default password prompt
\& SUDO_COMMAND           Set to the command run by sudo
\& SUDO_USER              Set to the login of the user who invoked sudo
\& SUDO_UID               Set to the uid of the user who invoked sudo
\& SUDO_GID               Set to the gid of the user who invoked sudo
\& SUDO_PS1               If set, PS1 will be set to its value
.Ve
.SH "FILES"
.PP
.Vb 3
\& /etc/sudoers           List of who can run what
\& /var/run/sudo          Directory containing timestamps
\& /tmp/.odus             Same as above if no /var/run exists
d427 1
a427 1
\fIsudoers\fR\|(5), \fIvisudo\fR\|(8), \fIsu\fR\|(1).
d465 2
a475 2

.IX Header "FILES"
@


1.1
log
@Initial revision
@
text
@d2 1
a2 1
''' $RCSfile: sudo.man,v $$Revision: 1.39 $$Date: 1999/11/16 05:42:28 $
d5 2
a6 2
''' Revision 1.39  1999/11/16 05:42:28  millert
''' get rid of references to sudo-bugs.  Now mention the web site or the sudo@@ alias
d99 1
a99 1
.TH sudo 8 "1.6" "15/Nov/1999" "MAINTENANCE COMMANDS"
d203 6
a208 1
initialized when the target user is not root).
d428 1
a428 1
at http://www.courtesan.com/sudo/bugs/.
@


1.1.1.1
log
@sudo 1.6, now with a BSD license
@
text
@@
