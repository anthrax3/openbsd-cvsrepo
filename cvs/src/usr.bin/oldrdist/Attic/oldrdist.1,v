head	1.22;
access;
symbols
	OPENBSD_5_5:1.21.0.6
	OPENBSD_5_5_BASE:1.21
	OPENBSD_5_4:1.21.0.2
	OPENBSD_5_4_BASE:1.21
	OPENBSD_5_3:1.20.0.6
	OPENBSD_5_3_BASE:1.20
	OPENBSD_5_2:1.20.0.4
	OPENBSD_5_2_BASE:1.20
	OPENBSD_5_1_BASE:1.20
	OPENBSD_5_1:1.20.0.2
	OPENBSD_5_0:1.19.0.6
	OPENBSD_5_0_BASE:1.19
	OPENBSD_4_9:1.19.0.4
	OPENBSD_4_9_BASE:1.19
	OPENBSD_4_8:1.19.0.2
	OPENBSD_4_8_BASE:1.19
	OPENBSD_4_7:1.18.0.2
	OPENBSD_4_7_BASE:1.18
	OPENBSD_4_6:1.17.0.12
	OPENBSD_4_6_BASE:1.17
	OPENBSD_4_5:1.17.0.8
	OPENBSD_4_5_BASE:1.17
	OPENBSD_4_4:1.17.0.6
	OPENBSD_4_4_BASE:1.17
	OPENBSD_4_3:1.17.0.4
	OPENBSD_4_3_BASE:1.17
	OPENBSD_4_2:1.17.0.2
	OPENBSD_4_2_BASE:1.17
	OPENBSD_4_1:1.15.0.2
	OPENBSD_4_1_BASE:1.15
	OPENBSD_4_0:1.14.0.12
	OPENBSD_4_0_BASE:1.14
	OPENBSD_3_9:1.14.0.10
	OPENBSD_3_9_BASE:1.14
	OPENBSD_3_8:1.14.0.8
	OPENBSD_3_8_BASE:1.14
	OPENBSD_3_7:1.14.0.6
	OPENBSD_3_7_BASE:1.14
	OPENBSD_3_6:1.14.0.4
	OPENBSD_3_6_BASE:1.14
	OPENBSD_3_5:1.14.0.2
	OPENBSD_3_5_BASE:1.14
	OPENBSD_3_4:1.13.0.2
	OPENBSD_3_4_BASE:1.13
	OPENBSD_3_3:1.9.0.10
	OPENBSD_3_3_BASE:1.9
	OPENBSD_3_2:1.9.0.8
	OPENBSD_3_2_BASE:1.9
	OPENBSD_3_1:1.9.0.6
	OPENBSD_3_1_BASE:1.9
	OPENBSD_3_0:1.9.0.4
	OPENBSD_3_0_BASE:1.9
	OPENBSD_2_9_BASE:1.9
	OPENBSD_2_9:1.9.0.2
	OPENBSD_2_8:1.8.0.4
	OPENBSD_2_8_BASE:1.8
	OPENBSD_2_7:1.8.0.2
	OPENBSD_2_7_BASE:1.8
	OPENBSD_2_6:1.5.0.2
	OPENBSD_2_6_BASE:1.5
	OPENBSD_2_5:1.4.0.2
	OPENBSD_2_5_BASE:1.4
	OPENBSD_2_4:1.3.0.2
	OPENBSD_2_4_BASE:1.3
	OPENBSD_2_3:1.2.0.8
	OPENBSD_2_3_BASE:1.2
	OPENBSD_2_2:1.2.0.6
	OPENBSD_2_2_BASE:1.2
	OPENBSD_2_1:1.2.0.4
	OPENBSD_2_1_BASE:1.2
	OPENBSD_2_0:1.2.0.2
	OPENBSD_2_0_BASE:1.2;
locks; strict;
comment	@# @;


1.22
date	2014.07.10.14.26.16;	author tedu;	state dead;
branches;
next	1.21;
commitid	Hzb21S9Xr5CMEb0F;

1.21
date	2013.07.16.06.48.36;	author jmc;	state Exp;
branches;
next	1.20;

1.20
date	2011.09.03.22.59.07;	author jmc;	state Exp;
branches;
next	1.19;

1.19
date	2010.07.15.20.51.38;	author schwarze;	state Exp;
branches;
next	1.18;

1.18
date	2010.02.18.13.39.21;	author schwarze;	state Exp;
branches;
next	1.17;

1.17
date	2007.05.31.19.20.14;	author jmc;	state Exp;
branches;
next	1.16;

1.16
date	2007.04.14.21.44.06;	author sobrado;	state Exp;
branches;
next	1.15;

1.15
date	2007.02.06.20.07.15;	author jmc;	state Exp;
branches;
next	1.14;

1.14
date	2004.02.09.20.53.11;	author jmc;	state Exp;
branches;
next	1.13;

1.13
date	2003.09.02.18.50.06;	author jmc;	state Exp;
branches;
next	1.12;

1.12
date	2003.07.14.12.47.37;	author jmc;	state Exp;
branches;
next	1.11;

1.11
date	2003.06.10.09.12.11;	author jmc;	state Exp;
branches;
next	1.10;

1.10
date	2003.06.03.02.56.14;	author millert;	state Exp;
branches;
next	1.9;

1.9
date	2000.11.10.05.10.38;	author aaron;	state Exp;
branches;
next	1.8;

1.8
date	2000.04.12.21.47.50;	author aaron;	state Exp;
branches;
next	1.7;

1.7
date	2000.03.10.20.17.48;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	2000.03.04.22.19.25;	author aaron;	state Exp;
branches;
next	1.5;

1.5
date	99.06.05.01.21.35;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	98.11.11.23.01.46;	author aaron;	state Exp;
branches;
next	1.3;

1.3
date	98.09.27.16.57.49;	author aaron;	state Exp;
branches;
next	1.2;

1.2
date	96.06.26.05.37.40;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	96.02.03.12.12.01;	author dm;	state Exp;
branches;
next	;


desc
@@


1.22
log
@Snakes. Why'd it have to be snakes?
@
text
@.\"	$OpenBSD: oldrdist.1,v 1.21 2013/07/16 06:48:36 jmc Exp $
.\"
.\" Copyright (c) 1985, 1990, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"	from: @@(#)rdist.1	8.2 (Berkeley) 12/30/93
.\"
.Dd $Mdocdate: July 16 2013 $
.Dt OLDRDIST 1
.Os
.Sh NAME
.Nm oldrdist
.Nd remote file distribution program
.Sh SYNOPSIS
.Nm oldrdist
.Op Fl bhinqRvwy
.Op Fl d Ar var=value
.Op Fl f Ar distfile
.Op Fl m Ar host
.Op Ar name ...
.Nm oldrdist
.Op Fl bhinqRvwy
.Fl c
.Ar name ...
.Oo login@@ Oc Ns Ar host Ns Op :dest
.Sh DESCRIPTION
.Nm
is a program to maintain identical copies of files over multiple hosts.
It preserves the owner, group, mode, and mtime of files if possible and
can update programs that are executing.
.Nm
reads commands from
.Ar distfile
to direct the updating of files and/or directories.
.Pp
Options specific to the first SYNOPSIS form:
.Bl -tag -width "-f distfile"
.It Fl f Ar distfile
Use the specified
.Ar distfile .
If
.Ar distfile
is
.Sq - ,
the standard input is used.
.El
.Pp
If the
.Fl f
option is not specified, the program looks first for
.Dq Pa distfile ,
then
.Dq Pa Distfile
to use as the input.
If no names are specified on the command line,
.Nm
will update all of the files and directories listed in
.Ar distfile .
Otherwise, the argument is taken to be the name of a file to be updated
or the label of a command to execute.
If label and file names conflict, it is assumed to be a label.
These may be used together to update specific files
using specific commands.
.Pp
Options specific to the second SYNOPSIS form:
.Bl -tag -width "Fl c"
.It Fl c
Forces
.Nm
to interpret the remaining arguments as a small
.Ar distfile .
.Pp
The equivalent distfile is as follows:
.Bd -filled -offset indent
.Pq Ar name ...
.Li ->
.Op Ar login@@
.Ar host
.Ed
.Bd -filled -offset indent-two -compact
.Li install
.Op Ar dest ;
.Ed
.El
.Pp
Options common to both forms:
.Bl -tag -width "Fl b"
.It Fl b
Binary comparison.
Perform a binary comparison and update files if they differ
rather than comparing dates and sizes.
.It Fl d Ar var=value
Define
.Ar var
to have
.Ar value .
The
.Fl d
option is used to define or override variable definitions in the
.Ar distfile .
.Ar Value
can be the empty string, one name, or a list of names surrounded by
parentheses and separated by tabs and/or spaces.
.It Fl h
Follow symbolic links.
Copy the file that the link points to rather than the link itself.
.It Fl i
Ignore unresolved links.
.Nm
will normally try to maintain the link structure of files being transferred
and warn the user if all the links cannot be found.
.It Fl m Ar host
Limit which machines are to be updated.
Multiple
.Fl m
arguments can be given to limit updates to a subset of the hosts listed in the
.Ar distfile .
.It Fl n
Print the commands without executing them.
This option is useful for debugging
.Ar distfile .
.It Fl q
Quiet mode.
Files that are being modified are normally printed on standard output.
The
.Fl q
option suppresses this.
.It Fl R
Remove extraneous files.
If a directory is being updated, any files that exist
on the remote host that do not exist in the master directory are removed.
This is useful for maintaining truly identical copies of directories.
.It Fl v
Verify that the files are up to date on all the hosts.
Any files
that are out of date will be displayed but no files will be changed
nor any mail sent.
.It Fl w
Whole mode.
The whole file name is appended to the destination directory
name.
Normally, only the last component of a name is used when renaming files.
This will preserve the directory structure of the files being
copied instead of flattening the directory structure.
For example,
renaming a list of files such as ( dir1/f1 dir2/f2 ) to dir3 would create
files dir3/dir1/f1 and dir3/dir2/f2 instead of dir3/f1 and dir3/f2.
.It Fl y
Younger mode.
Files are normally updated if their
.Ar mtime
and
.Ar size
(see
.Xr stat 2 )
disagree.
The
.Fl y
option causes
.Nm
not to update files that are younger than the master copy.
This can be used
to prevent newer copies on other hosts from being replaced.
A warning message is printed for files which are newer than the master copy.
.El
.Pp
.Ar distfile
contains a sequence of entries that specify the files
to be copied, the destination hosts, and what operations to perform
to do the updating.
Each entry has one of the following formats:
.Bd -literal -offset indent
<variable name> `=' <name list>
[label:]<source list> `\->' <destination list> <command list>
[label:]<source list> `::' <time_stamp file> <command list>
.Ed
.Pp
The first format is used for defining variables.
The second format is used for distributing files to other hosts.
The third format is used for making lists of files that have been changed
since some given date.
The
.Ar source list
specifies a
list of files and/or directories on the local host which are to be used
as the master copy for distribution.
The
.Ar destination list
is the list of hosts to which these files are to be
copied.
Each file in the source list is added to a list of changes
if the file is out of date on the host which is being updated (second format) or
the file is newer than the time stamp file (third format).
.Pp
Labels are optional.
They are used to identify a command for partial updates.
.Pp
Newlines, tabs, and blanks are only used as separators and are
otherwise ignored.
Comments begin with
.Ql #
and end with a newline.
.Pp
Variables to be expanded begin with
.Ql $
followed by one character or
a name enclosed in curly braces (see the examples at the end).
.Pp
The source and destination lists have the following format:
.Bd -literal -offset indent
<name>
.Ed
or
.Bd -literal -offset indent -compact
`(' <zero or more names separated by whitespace> `)'
.Ed
.Pp
The shell meta-characters
.Ql \&[ ,
.Ql \&] ,
.Ql { ,
.Ql } ,
.Ql * ,
and
.Ql \&?
are recognized and expanded (on the local host only) in the same way as
.Xr csh 1 .
They can be escaped with a backslash.
The
.Ql ~
character is also expanded in the same way as
.Xr csh 1
but is expanded separately on the local and destination hosts.
When the
.Fl w
option is used with a file name that begins with
.Ql ~ ,
everything except the
home directory is appended to the destination name.
File names which do not begin with
.Ql /
or
.Ql ~
use the destination user's
home directory as the root directory for the rest of the file name.
.Pp
The command list consists of zero or more commands of the following
format:
.Bl -column "`except_pat'" "<pattern list>" "opt_dest_name" "`;'" -offset indent
.It `install' Ta "<options>" Ta opt_dest_name Ta `;'
.It `notify' Ta "<name list>" Ta "" Ta `;'
.It `except' Ta "<name list>" Ta "" Ta `;'
.It `except_pat' Ta "<pattern list>" Ta "" Ta `;'
.It `special' Ta "<name list>" Ta string Ta `;'
.El
.Pp
The
.Ic install
command is used to copy out of date files and/or directories.
Each source file is copied to each host in the destination list.
Directories are recursively copied in the same way.
.Ar opt_dest_name
is an optional parameter to rename files.
If no
.Ic install
command appears in the command list or
the destination name is not specified,
the source file name is used.
Directories in the path name will be created if they
do not exist on the remote host.
.Pp
To help prevent disasters, a non-empty directory on a target host will
never be replaced with a regular file or a symbolic link.
However, under the
.Fl R
option a non-empty directory will be removed
if the corresponding filename is completely absent on the master host.
The
.Ar options
are
.Fl R ,
.Fl h ,
.Fl i ,
.Fl v ,
.Fl w ,
.Fl y ,
and
.Fl b
and have the same semantics as
options on the command line except they only apply to the files
in the source list.
The login name used on the destination host is the same as the local host
unless the destination name is of the format
.Dq login@@host .
.Pp
The
.Ic notify
command is used to mail the list of files updated (and any errors
that may have occurred) to the listed names.
If no
.Ql @@
appears in the name, the destination host is appended to the name
(e.g., name1@@host, name2@@host, ...).
.Pp
The
.Ic except
command is used to update all of the files in the source list except
for the files listed in
.Ar name list .
This is usually used to copy everything in a directory except certain files.
.Pp
The
.Ic except_pat
command is like the
.Ic except
command except that
.Ar pattern list
is a list of regular expressions
(see
.Xr ed 1
for details).
If one of the patterns matches some string within a file name, that file will
be ignored.
Note that since
.Ql \e
is a quote character, it must be doubled to become
part of the regular expression.
Variables are expanded in
.Ar pattern list
but not shell file pattern matching characters.
To include a
.Ql $ ,
it must be escaped with
.Ql \e .
.Pp
The
.Ic special
command is used to specify
.Xr sh 1
commands that are to be executed on the
remote host after the file in
.Ar name list
is updated or installed.
If the
.Ar name list
is omitted then the shell commands will be executed
for every file updated or installed.
The shell variable FILE is set
to the current filename before executing the commands in
.Ar string .
.Ar string
starts and ends with
.Ql \&"
and can cross multiple lines in
.Ar distfile .
Multiple commands to the shell should be separated by
.Ql \&; .
Commands are executed in the user's home directory on the host
being updated.
The
.Ar special
command can be used to rebuild private databases, etc.
after a program has been updated.
.Pp
The following is a small example:
.Bd -literal -offset indent
HOSTS = ( matisse root@@arpa )

FILES = ( /bin /lib /usr/bin /usr/games
\t/usr/include/{*.h,{stand,sys,vax*,pascal,machine}/*.h}
\t/usr/lib /usr/man/man? /usr/ucb /usr/local/rdist )

EXLIB = ( Mail.rc aliases aliases.dir aliases.pag crontab dshrc
\tsendmail.cf sendmail.fc sendmail.hf sendmail.st uucp vfont )

${FILES} -> ${HOSTS}
\tinstall -R ;
\texcept /usr/lib/${EXLIB} ;
\texcept /usr/games/lib ;
\tspecial /usr/lib/sendmail "/usr/lib/sendmail -bz" ;

srcs:
/usr/src/bin -> arpa
\texcept_pat ( \e\e.o\e$ /SCCS\e$ ) ;

IMAGEN = (ips dviimp catdvi)

imagen:
/usr/local/${IMAGEN} -> arpa
\tinstall /usr/local/lib ;
\tnotify ralph ;

${FILES} :: stamp.cory
\tnotify root@@cory ;
.Ed
.Sh FILES
.Bl -tag -width /tmp/rdist* -compact
.It Pa distfile
input command file
.It Pa /tmp/rdist*
temporary file for update lists
.El
.Sh DIAGNOSTICS
A complaint about mismatch of
.Nm
version numbers may really stem
from some problem with starting your shell, e.g., you are in too many groups.
.Sh SEE ALSO
.Xr csh 1 ,
.Xr sh 1 ,
.Xr stat 2
.Sh HISTORY
The
.Nm
command appeared in
.Bx 4.3 .
.Sh BUGS
Source files must reside on the local host where
.Nm
is executed.
.Pp
There is no easy way to have a special command executed after all files
in a directory have been updated.
.Pp
Variable expansion only works for name lists; there should be a general macro
facility.
.Pp
.Nm
aborts on files which have a negative mtime (before Jan 1, 1970).
.Pp
There should be a
.Dq force
option to allow replacement of non-empty directories
by regular files or symlinks.
A means of updating file modes and owners
of otherwise identical files is also needed.
@


1.21
log
@"-" is not an option - it is an argument to -f; whilst here, use Sq
instead of Dq for "-";

from Jan Stary
@
text
@d1 1
a1 1
.\"	$OpenBSD: oldrdist.1,v 1.20 2011/09/03 22:59:07 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate: September 3 2011 $
@


1.20
log
@make -column lists pretty again;

specifically, rewrite them to permit some markup in the column headers,
and use "Ta" instead of literal tabs; mandoc does not currently match groff
100%, but a mandoc fix may be some time off, and we've gone enough releases
with poorly formatting column lists.

in some cases i have rewritten the lists as -tag, where -column made
little sense.
@
text
@d1 1
a1 1
.\"	$OpenBSD: oldrdist.1,v 1.19 2010/07/15 20:51:38 schwarze Exp $
d32 1
a32 1
.Dd $Mdocdate: July 15 2010 $
d68 1
a68 1
.Dq - ,
d72 1
a72 1
If either the
a73 2
or
.Sq Fl
@


1.19
log
@More delimiters that need quoting inside macros, hunted down by jmc@@,
who asked me to commit because he is just running out of the door.
@
text
@d1 1
a1 1
.\"	$OpenBSD: oldrdist.1,v 1.18 2010/02/18 13:39:21 schwarze Exp $
d32 1
a32 1
.Dd $Mdocdate: February 18 2010 $
d275 6
a280 7
.Bd -ragged -offset indent -compact
.Bl -column except_patx pattern\ listx
.It `install'	<options>	opt_dest_name `;'
.It `notify'	<name list>	`;'
.It `except'	<name list>	`;'
.It `except_pat'	<pattern list>	`;'
.It `special'	<name list>	string `;'
a281 1
.Ed
@


1.18
log
@Our groff does not handle all cases of nested displays properly, so
resolve the contradiction in the manual whether it's allowed or not
in favour of "not allowed" for now, shelving my diff to support
nested displays in mandoc(1) for later consideration.
Found by and unbreaking the build with mandoc(1).
Feedback and OK jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: oldrdist.1,v 1.17 2007/05/31 19:20:14 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate: May 31 2007 $
d245 1
a245 1
.Ql [ ,
@


1.17
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: oldrdist.1,v 1.16 2007/04/14 21:44:06 sobrado Exp $
d32 1
a32 1
.Dd $Mdocdate$
d105 2
a106 1
.Bd -filled -offset indent -compact
a108 1
.Ed
@


1.16
log
@sorts the options in both the synopsis and usage()

ok by jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: oldrdist.1,v 1.15 2007/02/06 20:07:15 jmc Exp $
d32 1
a32 1
.Dd December 30, 1993
@


1.15
log
@fix some dodgy displays;
@
text
@d1 1
a1 1
.\"	$OpenBSD: oldrdist.1,v 1.14 2004/02/09 20:53:11 jmc Exp $
d40 2
a41 1
.Op Fl nqbRhivwy
a42 1
.Op Fl d Ar var=value
d46 1
a46 1
.Op Fl nqbRhivwy
@


1.14
log
@make Nm match Dt; found by pb@@

some of this ok espie@@, all of it ok deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: oldrdist.1,v 1.13 2003/09/02 18:50:06 jmc Exp $
d99 2
a100 3
The equivalent distfile is as follows.
.Pp
.Bd -filled -offset indent -compact
d198 1
a198 2
.Pp
.Bd -literal -offset indent -compact
@


1.13
log
@escape punctuation;
ok deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: oldrdist.1,v 1.12 2003/07/14 12:47:37 jmc Exp $
d33 1
a33 1
.Dt RDIST 1
d36 1
a36 1
.Nm rdist
d39 1
a39 1
.Nm rdist
d45 1
a45 1
.Nm rdist
@


1.12
log
@fix the width of lists;
@
text
@d1 1
a1 1
.\"	$OpenBSD: oldrdist.1,v 1.11 2003/06/10 09:12:11 jmc Exp $
d253 1
a253 1
.Ql ?
@


1.11
log
@- section reorder
- COMPATIBILITY merge
- macro cleanup
- kill whitespace at EOL
- new sentence, new line

ssh pages ok markus@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: oldrdist.1,v 1.10 2003/06/03 02:56:14 millert Exp $
d61 1
a61 1
.Bl -tag -width indent
d92 1
a92 1
.Bl -tag -width Fl c
d114 1
a114 1
.Bl -tag -width Ic
@


1.10
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
.\"	$OpenBSD: oldrdist.1,v 1.9 2000/11/10 05:10:38 aaron Exp $
a425 5
.Sh DIAGNOSTICS
A complaint about mismatch of
.Nm
version numbers may really stem
from some problem with starting your shell, e.g., you are in too many groups.
d433 5
@


1.9
log
@- Section shuffling: comply to the section ordering outlined in mdoc(7).
- Some .Nm trimming.
- .Sh AUTHOR -> .Sh AUTHORS
- Other miscellaneous fixes here and there.
@
text
@d1 1
a1 1
.\"	$OpenBSD: oldrdist.1,v 1.8 2000/04/12 21:47:50 aaron Exp $
d14 1
a14 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
@


1.8
log
@Trailing whitespace begone!
@
text
@d1 1
a1 1
.\"	$OpenBSD: oldrdist.1,v 1.7 2000/03/10 20:17:48 aaron Exp $
d55 1
a55 1
.Nm rdist
d59 1
a59 1
.Nm rdist
d86 1
a86 1
.Nm rdist
d99 1
a99 1
.Nm rdist
d140 1
a140 1
.Nm rdist
d191 1
a191 1
.Nm rdist
d430 5
d448 1
a448 1
.Nm rdist
a450 5
.Sh DIAGNOSTICS
A complaint about mismatch of
.Nm rdist
version numbers may really stem
from some problem with starting your shell, e.g., you are in too many groups.
d453 1
a453 1
.Nm rdist
d462 1
a462 1
.Nm rdist
@


1.7
log
@Various cleanups and standardization.
@
text
@d1 1
a1 1
.\"	$OpenBSD: oldrdist.1,v 1.6 2000/03/04 22:19:25 aaron Exp $
d465 1
a465 1
There should be a 
@


1.6
log
@In Unix land we prefer "whitespace" to "white space" or "white-space". At
least, this is the impression I get from looking at a lot of Perl docs.
@
text
@d1 2
a2 1
.\"	$OpenBSD: oldrdist.1,v 1.5 1999/06/05 01:21:35 aaron Exp $
d71 3
a73 1
is `-', the standard input is used.
d88 1
a88 1
.Ar distfile  .
d90 2
a91 2
or the label of a command to execute. If label and file names conflict,
it is assumed to be a label.
d101 1
a101 1
.Ar distfile  .
d120 2
a121 1
Binary comparison. Perform a binary comparison and update files if they differ
d127 1
a127 1
.Ar value  .
d131 1
a131 1
.Ar distfile  .
d136 2
a137 2
Follow symbolic links. Copy the file that the link points to rather than the
link itself.
d144 2
a145 1
Limit which machines are to be updated. Multiple
d148 1
a148 1
.Ar distfile  .
d150 3
a152 3
Print the commands without executing them. This option is
useful for debugging
.Ar distfile  .
d154 3
a156 2
Quiet mode. Files that are being modified are normally
printed on standard output. The
d160 2
a161 1
Remove extraneous files. If a directory is being updated, any files that exist
d165 2
a166 1
Verify that the files are up to date on all the hosts. Any files
d170 4
a173 2
Whole mode. The whole file name is appended to the destination directory
name. Normally, only the last component of a name is used when renaming files.
d175 2
a176 1
copied instead of flattening the directory structure. For example,
d180 2
a181 1
Younger mode. Files are normally updated if their
d186 3
a188 2
.Xr stat  2  )
disagree. The
d201 2
a202 1
to do the updating. Each entry has one of the following formats:
d222 2
a223 1
copied.  Each file in the source list is added to a list of changes
d227 2
a228 1
Labels are optional. They are used to identify a command for partial updates.
d231 8
a238 3
otherwise ignored. Comments begin with `#' and end with a newline.
.Pp
Variables to be expanded begin with `$' followed by one character or
d250 8
a257 1
The shell meta-characters `[', `]', `{', `}', `*', and `?'
d259 1
a259 1
.Xr csh  1  .
d261 3
a263 1
The `~' character is also expanded in the same way as
d268 3
a270 1
option is used with a file name that begins with `~', everything except the
d272 5
a276 1
File names which do not begin with `/' or `~' use the destination user's
d305 1
d308 3
a310 1
However, under the `\-R' option a non-empty directory will be removed
d314 9
a322 1
are `\-R', `\-h', `\-i', `\-v', `\-w', `\-y', and `\-b'
d327 2
a328 1
unless the destination name is of the format ``login@@host''.
d334 3
a336 2
If no `@@' appears in the name, the destination host is appended to
the name
d343 1
a343 1
.Ar name list  .
d354 1
a354 1
.Xr ed  1
d358 5
a362 2
Note that since `\e' is a quote character, it must be doubled to become
part of the regular expression.  Variables are expanded in
d364 5
a368 2
but not shell file pattern matching characters.  To include a `$', it
must be escaped with `\e'.
d373 1
a373 1
.Xr sh  1
d381 2
a382 1
for every file updated or installed.  The shell variable FILE is set
d384 1
a384 1
.Ar string  .
d386 3
a388 1
starts and ends with `"' and can cross multiple lines in
d390 2
a391 1
Multiple commands to the shell should be separated by `;'.
d465 5
a469 2
There should be a `force' option to allow replacement of non-empty directories
by regular files or symlinks.  A means of updating file modes and owners
@


1.5
log
@- remove trailing white space
- remove arguments from .Os macros
- remove arguments from .Nm macros, where appropriate
- some more Dq/Sq/Ql insanity
- still lots to do in the usr.bin tree... :/
@
text
@d1 1
a1 1
.\"	$OpenBSD: oldrdist.1,v 1.4 1998/11/11 23:01:46 aaron Exp $
d226 1
a226 1
`(' <zero or more names separated by white-space> `)'
@


1.4
log
@remove redundant .Pp macros
@
text
@d1 1
a1 1
.\"	$OpenBSD: oldrdist.1,v 1.3 1998/09/27 16:57:49 aaron Exp $
d37 1
a37 1
.Os BSD 4.3
@


1.3
log
@usr.bin/ man page cleanups, n-s
@
text
@d1 1
a1 1
.\"	$OpenBSD: oldrdist.1,v 1.2 1996/06/26 05:37:40 deraadt Exp $
a63 1
.Pp
a92 1
.Pp
a114 1
.Pp
@


1.2
log
@rcsid
@
text
@d1 1
a1 1
.\"	$OpenBSD: oldrdist.1,v 1.1 1996/02/03 12:12:01 dm Exp $
d54 1
a54 1
.Nm Rdist
d58 1
a58 1
.Nm Rdist
d66 3
a68 1
.It Fl
d71 1
a71 6
is
.Sq Fl ,
the standard input is used.
.It Fl f Ar distfile
Use the specified
.Ar distfile.
d139 1
a139 1
.Nm Rdist
d188 1
a188 1
.Ar Distfile
d191 1
a191 1
to do the updating. Each entry has one of the following formats.
d247 1
a247 1
format.
d263 1
a263 1
.Ar Opt_dest_name
d283 1
a283 1
unless the destination name is of the format ``login@@host".
d295 1
a295 2
command is used to update all of the files in the source list
.Ic except
d329 1
a329 1
for every file updated or installed.  The shell variable `FILE' is set
d332 1
a332 1
.Ar String
d382 1
a383 1
.Xr csh 1 ,
d391 3
a393 1
A complaint about mismatch of rdist version numbers may really stem
d406 1
a406 1
.Nm Rdist
@


1.1
log
@rdist 6.1.1
@
text
@d1 1
a33 1
.\"	$Id: rdist.1,v 1.1.1.1 1995/10/18 08:45:59 deraadt Exp $
@
