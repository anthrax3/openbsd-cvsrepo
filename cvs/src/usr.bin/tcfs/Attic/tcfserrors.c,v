head	1.7;
access;
symbols
	OPENBSD_3_2:1.6.0.10
	OPENBSD_3_2_BASE:1.6
	OPENBSD_3_1:1.6.0.8
	OPENBSD_3_1_BASE:1.6
	OPENBSD_3_0:1.6.0.6
	OPENBSD_3_0_BASE:1.6
	OPENBSD_2_9_BASE:1.6
	OPENBSD_2_9:1.6.0.4
	OPENBSD_2_8:1.6.0.2
	OPENBSD_2_8_BASE:1.6
	TCFS00:1.1.1.1
	PROVOS001:1.1.1;
locks; strict;
comment	@ * @;


1.7
date	2003.02.24.02.13.14;	author deraadt;	state dead;
branches;
next	1.6;

1.6
date	2000.06.20.06.45.16;	author fgsch;	state Exp;
branches;
next	1.5;

1.5
date	2000.06.19.22.42.28;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	2000.06.19.20.35.47;	author fgsch;	state Exp;
branches;
next	1.3;

1.3
date	2000.06.19.20.25.30;	author fgsch;	state Exp;
branches;
next	1.2;

1.2
date	2000.06.18.22.31.02;	author provos;	state Exp;
branches;
next	1.1;

1.1
date	2000.06.18.22.07.24;	author provos;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.06.18.22.07.24;	author provos;	state Exp;
branches;
next	;


desc
@@


1.7
log
@bye bye
@
text
@/*	$OpenBSD: tcfserrors.c,v 1.6 2000/06/20 06:45:16 fgsch Exp $	*/

/*
 *	Transparent Cryptographic File System (TCFS) for NetBSD 
 *	Author and mantainer: 	Luigi Catuogno [luicat@@tcfs.unisa.it]
 *	
 *	references:		http://tcfs.dia.unisa.it
 *				tcfs-bsd@@tcfs.unisa.it
 */

/*
 *	Base utility set v0.1
 */

#include <stdio.h>
#include <unistd.h>
#include "tcfserrors.h"

static char *tcfs_errors_strings[]=
{
	"Ok",
	NULL,
	"unknow option.",
	"authentication error.",
	"out of memory.",
	"you do not have a TCFS key.",
	"Who are you?!",
	"ioctl error while setting permanent flag.",
	"ioctl error while sending.",
	"ioctl error while removing key.",
	"ioctl error while getting key counter."
};

void tcfs_error(int error_type, char *custom_message)
{
	if (error_type != ER_CUSTOM && error_type != OK)
		fprintf(stderr, "Error: ");
	
	switch (error_type) {
	case ER_AUTH:
	case ER_MEM:
	case ER_TCFS:
	case ER_PERM:
	case ER_ENABLE:
	case ER_DISABLE:
	case ER_COUNT:
	case ER_USER:
	case OK:
		fprintf(stderr, "%s\n", tcfs_errors_strings[error_type]);
		exit(error_type);
	case ER_CUSTOM:
		fprintf(stderr, "%s\n", custom_message);
		exit(1);
	case ER_UNKOPT:
		if (custom_message)
			fprintf(stderr, "%s: %s\n", tcfs_errors_strings[error_type], custom_message);
		else
			fprintf(stderr, "%s\n", tcfs_errors_strings[error_type]);
			
		exit(error_type);
		break; /* Useless code */
	default:
		fprintf(stderr, "internal error.\n");
		exit(1);
	}
}
@


1.6
log
@kill show_usage, it's only a printf. i'll replace this by err and friends
@
text
@d1 1
a1 1
/*	$OpenBSD: tcfserrors.c,v 1.5 2000/06/19 22:42:28 aaron Exp $	*/
@


1.5
log
@KNF
@
text
@d1 1
a1 1
/*	$OpenBSD: tcfserrors.c,v 1.4 2000/06/19 20:35:47 fgsch Exp $	*/
a65 5
}

void show_usage(char *fmt, char *arg)
{
	printf(fmt, arg);
@


1.4
log
@add openbsd tag
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
d34 1
a34 1
void tcfs_error (int error_type, char *custom_message)
d36 2
a37 2
	if (error_type!=ER_CUSTOM && error_type!=OK)
		fprintf (stderr, "Error: ");
d39 20
a58 21
	switch (error_type)
	{
		case ER_AUTH:
		case ER_MEM:
		case ER_TCFS:
		case ER_PERM:
		case ER_ENABLE:
		case ER_DISABLE:
		case ER_COUNT:
		case ER_USER:
		case OK:
			fprintf (stderr, "%s\n", tcfs_errors_strings[error_type]);
			exit (error_type);
		case ER_CUSTOM:
			fprintf (stderr, "%s\n", custom_message);
			exit (1);
		case ER_UNKOPT:
			if (custom_message)
				fprintf (stderr, "%s: %s\n", tcfs_errors_strings[error_type], custom_message);
			else
				fprintf (stderr, "%s\n", tcfs_errors_strings[error_type]);
d60 5
a64 5
			exit (error_type);
			break; /* Useless code */
		default:
			fprintf (stderr, "internal error.\n");
			exit (1);
d68 1
a68 1
void show_usage (char *fmt, char *arg)
d70 1
a70 1
	printf (fmt, arg);
@


1.3
log
@more cleaning. KNF
@
text
@d1 2
@


1.2
log
@remove RCS entries.
@
text
@d17 15
@


1.1
log
@Initial revision
@
text
@a10 7
 *
 *	  $Source: /usr/src/tcfs-utils_0.1/lib/RCS/tcfserrors.c,v $
 *	   $State: Exp $
 *	$Revision: 1.1 $
 *	  $Author: luicat $
 *	    $Date: 2000/01/14 13:44:51 $
 *
a11 6

static const char *RCSid="$id: $";

/* RCS_HEADER_ENDS_HERE */


@


1.1.1.1
log
@Initial import of very much rewritten TCFS userland.  This code is still
nasty.
@
text
@@
