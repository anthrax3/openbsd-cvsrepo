head	1.12;
access;
symbols
	OPENBSD_6_0:1.12.0.2
	OPENBSD_6_0_BASE:1.12
	OPENBSD_5_9:1.11.0.2
	OPENBSD_5_9_BASE:1.11
	OPENBSD_5_8:1.9.0.6
	OPENBSD_5_8_BASE:1.9
	OPENBSD_5_7:1.9.0.2
	OPENBSD_5_7_BASE:1.9
	OPENBSD_5_6:1.8.0.50
	OPENBSD_5_6_BASE:1.8
	OPENBSD_5_5:1.8.0.48
	OPENBSD_5_5_BASE:1.8
	OPENBSD_5_4:1.8.0.44
	OPENBSD_5_4_BASE:1.8
	OPENBSD_5_3:1.8.0.42
	OPENBSD_5_3_BASE:1.8
	OPENBSD_5_2:1.8.0.40
	OPENBSD_5_2_BASE:1.8
	OPENBSD_5_1_BASE:1.8
	OPENBSD_5_1:1.8.0.38
	OPENBSD_5_0:1.8.0.36
	OPENBSD_5_0_BASE:1.8
	OPENBSD_4_9:1.8.0.34
	OPENBSD_4_9_BASE:1.8
	OPENBSD_4_8:1.8.0.32
	OPENBSD_4_8_BASE:1.8
	OPENBSD_4_7:1.8.0.28
	OPENBSD_4_7_BASE:1.8
	OPENBSD_4_6:1.8.0.30
	OPENBSD_4_6_BASE:1.8
	OPENBSD_4_5:1.8.0.26
	OPENBSD_4_5_BASE:1.8
	OPENBSD_4_4:1.8.0.24
	OPENBSD_4_4_BASE:1.8
	OPENBSD_4_3:1.8.0.22
	OPENBSD_4_3_BASE:1.8
	OPENBSD_4_2:1.8.0.20
	OPENBSD_4_2_BASE:1.8
	OPENBSD_4_1:1.8.0.18
	OPENBSD_4_1_BASE:1.8
	OPENBSD_4_0:1.8.0.16
	OPENBSD_4_0_BASE:1.8
	OPENBSD_3_9:1.8.0.14
	OPENBSD_3_9_BASE:1.8
	OPENBSD_3_8:1.8.0.12
	OPENBSD_3_8_BASE:1.8
	OPENBSD_3_7:1.8.0.10
	OPENBSD_3_7_BASE:1.8
	OPENBSD_3_6:1.8.0.8
	OPENBSD_3_6_BASE:1.8
	OPENBSD_3_5:1.8.0.6
	OPENBSD_3_5_BASE:1.8
	OPENBSD_3_4:1.8.0.4
	OPENBSD_3_4_BASE:1.8
	OPENBSD_3_3:1.8.0.2
	OPENBSD_3_3_BASE:1.8
	OPENBSD_3_2:1.7.0.2
	OPENBSD_3_2_BASE:1.7
	OPENBSD_3_1:1.4.0.20
	OPENBSD_3_1_BASE:1.4
	OPENBSD_3_0:1.4.0.18
	OPENBSD_3_0_BASE:1.4
	OPENBSD_2_9_BASE:1.4
	OPENBSD_2_9:1.4.0.16
	OPENBSD_2_8:1.4.0.14
	OPENBSD_2_8_BASE:1.4
	OPENBSD_2_7:1.4.0.12
	OPENBSD_2_7_BASE:1.4
	OPENBSD_2_6:1.4.0.10
	OPENBSD_2_6_BASE:1.4
	OPENBSD_2_5:1.4.0.8
	OPENBSD_2_5_BASE:1.4
	OPENBSD_2_4:1.4.0.6
	OPENBSD_2_4_BASE:1.4
	OPENBSD_2_3:1.4.0.4
	OPENBSD_2_3_BASE:1.4
	OPENBSD_2_2:1.4.0.2
	OPENBSD_2_2_BASE:1.4
	OPENBSD_2_1:1.3.0.2
	OPENBSD_2_1_BASE:1.3
	OPENBSD_2_0:1.2.0.2
	OPENBSD_2_0_BASE:1.2
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.12
date	2016.03.30.06.38.45;	author jmc;	state Exp;
branches;
next	1.11;
commitid	LN9ijdk9SEnzWAbM;

1.11
date	2015.11.12.21.12.05;	author millert;	state Exp;
branches;
next	1.10;
commitid	6PlWoK7FsQNDGZmn;

1.10
date	2015.10.31.12.19.41;	author millert;	state Exp;
branches;
next	1.9;
commitid	AJsPrwJ9fd3llOTq;

1.9
date	2015.01.23.01.58.20;	author tedu;	state Exp;
branches;
next	1.8;
commitid	ylkn2XSGWYFiZo36;

1.8
date	2003.02.20.20.38.08;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	2002.07.15.19.13.29;	author millert;	state Exp;
branches;
next	1.6;

1.6
date	2002.05.14.18.05.39;	author millert;	state Exp;
branches;
next	1.5;

1.5
date	2002.05.11.18.41.20;	author millert;	state Exp;
branches;
next	1.4;

1.4
date	97.09.21.11.48.22;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	97.03.01.23.40.08;	author millert;	state Exp;
branches;
next	1.2;

1.2
date	96.06.26.05.31.26;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.44.54;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.44.54;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.12
log
@for some time now mandoc has not required MLINKS to function
correctly - logically complete that now by removing MLINKS from base;

authors need only to ensure there is an entry in NAME for any function/
util being added. MLINKS will still work, and remain for perl to ease
upgrades;

ok nicm (curses) bcook (ssl)
ok schwarze, who provided a lot of feedback and assistance
ok tb natano jung
@
text
@#	$OpenBSD: Makefile,v 1.11 2015/11/12 21:12:05 millert Exp $

PROG=	at
SRCS=	at.c client.c parsetime.c
CRONDIR=${.CURDIR}/../../usr.sbin/cron
CFLAGS+=-I${CRONDIR}
MAN=	at.1 atrm.1 atq.1
LINKS=	${BINDIR}/at ${BINDIR}/atq \
	${BINDIR}/at ${BINDIR}/atrm \
	${BINDIR}/at ${BINDIR}/batch
BINGRP=	crontab
BINMODE= 2555

.PATH: ${CRONDIR}

.include <bsd.prog.mk>
@


1.11
log
@Use absolute paths in pathnames.h.  There is no longer a need to
chdir(2) to the cron dir and cron(8) now changes to / via daemon(3).
We no longer try to create/chmod the spool directories as they
should be set correctly at install time.  The setegid(crontab)
has been moved to open_socket() so it is closer to the chmod(2)
call that needs it.  OK deraadt@@ tedu@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.10 2015/10/31 12:19:41 millert Exp $
a10 1
MLINKS=	at.1 batch.1
@


1.10
log
@Split client-only (at, crontab) functions out of misc.c and into
client.c.  Move truly common functions into common.c.  This avoids
dead code in the at and crontab commands.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.9 2015/01/23 01:58:20 tedu Exp $
d4 1
a4 1
SRCS=	at.c client.c common.c parsetime.c
@


1.9
log
@don't need to define debugging 0 anymore
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 2003/02/20 20:38:08 millert Exp $
d4 1
a4 1
SRCS=	at.c misc.c parsetime.c
@


1.8
log
@Sync with ISC cron-current + my at(1) integration.
The at(1) code is now more tightly integrated into the cron codebase.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 2002/07/15 19:13:29 millert Exp $
d6 1
a6 1
CFLAGS+=-I${CRONDIR} -DDEBUGGING=0
@


1.7
log
@Move atrun(8) functionality into cron(8) proper.  This fixes the
long-standing annoyance that atrun's granularity is 10 minutes.
Most at jobs run with a 1 minute granularity.  Jobs submitted via
"at now" or "batch" will run immediately.  Includes a rewritten
cron(8) man page.  at(1) will be integrated more closely into
cron at a future date.

Upgrading notes:
    the atrun job in root's crontab should be removed.
    the /var/at/spool directory is no longer used
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.6 2002/05/14 18:05:39 millert Exp $
d4 3
a6 2
SRCS=	at.c panic.c parsetime.c perm.c
CFLAGS+=-I${.CURDIR}/../../usr.sbin/cron
a11 1

d14 2
@


1.6
log
@Major changes:

Job names are now "runtime.queue" where runtime is when the job will run
in Unix time format.  This is what SysV at does and allows us to nuke
the .SEQ file.

Historic BSD options for atq and atrm are now implemented;
atq and atrm get their own man pages.

At no longer does anything with the -v flag.  We print the execution
time when jobs are submitted so there is no need.

Most *scanf() usage is gone (one remains in atrun).

Better sanity checks in atrun.

Random style/cleanup.

With these changes we have the best of both worlds; POSIX compliance with
the traditional BSD features.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.5 2002/05/11 18:41:20 millert Exp $
d5 1
@


1.5
log
@at(1) is no longer setuid root, it is setgid crontab.
This means that /var/at/at.{allow,deny} must be readable by group
crontab, /var/at/jobs is mode 01770, and /var/at/.SEQ is mode 0660.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 1997/09/21 11:48:22 deraadt Exp $
d5 1
d9 1
a9 3
MLINKS=	at.1 batch.1 \
	at.1 atq.1 \
	at.1 atrm.1
a12 5

afterinstall:
	test -f ${DESTDIR}/var/at/.SEQ || touch ${DESTDIR}/var/at/.SEQ
	chown ${BINOWN}:${BINGRP} ${DESTDIR}/var/at/.SEQ; \
	chmod 0660 ${DESTDIR}/var/at/.SEQ; \
@


1.4
log
@$OpenBSD$
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.3 1997/03/01 23:40:08 millert Exp $
d12 7
a18 2
BINOWN=	root
BINMODE= 4555
@


1.3
log
@Merge in changes from at 2.9
@
text
@d1 1
a1 2
#	$OpenBSD: Makefile,v 1.2 1996/06/26 05:31:26 deraadt Exp $
#	$NetBSD: Makefile,v 1.2 1995/03/25 18:13:27 glass Exp $
@


1.2
log
@rcsid
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.2 1995/03/25 18:13:27 glass Exp $
d5 1
a5 1
SRCS=	at.c panic.c parsetime.c
@


1.1
log
@Initial revision
@
text
@d1 1
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
