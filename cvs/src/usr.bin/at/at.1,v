head	1.53;
access;
symbols
	OPENBSD_6_1:1.53.0.8
	OPENBSD_6_1_BASE:1.53
	OPENBSD_6_0:1.53.0.4
	OPENBSD_6_0_BASE:1.53
	OPENBSD_5_9:1.53.0.2
	OPENBSD_5_9_BASE:1.53
	OPENBSD_5_8:1.52.0.6
	OPENBSD_5_8_BASE:1.52
	OPENBSD_5_7:1.52.0.2
	OPENBSD_5_7_BASE:1.52
	OPENBSD_5_6:1.51.0.4
	OPENBSD_5_6_BASE:1.51
	OPENBSD_5_5:1.50.0.4
	OPENBSD_5_5_BASE:1.50
	OPENBSD_5_4:1.46.0.2
	OPENBSD_5_4_BASE:1.46
	OPENBSD_5_3:1.45.0.6
	OPENBSD_5_3_BASE:1.45
	OPENBSD_5_2:1.45.0.4
	OPENBSD_5_2_BASE:1.45
	OPENBSD_5_1_BASE:1.45
	OPENBSD_5_1:1.45.0.2
	OPENBSD_5_0:1.42.0.4
	OPENBSD_5_0_BASE:1.42
	OPENBSD_4_9:1.42.0.2
	OPENBSD_4_9_BASE:1.42
	OPENBSD_4_8:1.41.0.2
	OPENBSD_4_8_BASE:1.41
	OPENBSD_4_7:1.39.0.2
	OPENBSD_4_7_BASE:1.39
	OPENBSD_4_6:1.38.0.6
	OPENBSD_4_6_BASE:1.38
	OPENBSD_4_5:1.38.0.2
	OPENBSD_4_5_BASE:1.38
	OPENBSD_4_4:1.37.0.4
	OPENBSD_4_4_BASE:1.37
	OPENBSD_4_3:1.37.0.2
	OPENBSD_4_3_BASE:1.37
	OPENBSD_4_2:1.36.0.2
	OPENBSD_4_2_BASE:1.36
	OPENBSD_4_1:1.33.0.6
	OPENBSD_4_1_BASE:1.33
	OPENBSD_4_0:1.33.0.4
	OPENBSD_4_0_BASE:1.33
	OPENBSD_3_9:1.33.0.2
	OPENBSD_3_9_BASE:1.33
	OPENBSD_3_8:1.32.0.2
	OPENBSD_3_8_BASE:1.32
	OPENBSD_3_7:1.31.0.8
	OPENBSD_3_7_BASE:1.31
	OPENBSD_3_6:1.31.0.6
	OPENBSD_3_6_BASE:1.31
	OPENBSD_3_5:1.31.0.4
	OPENBSD_3_5_BASE:1.31
	OPENBSD_3_4:1.31.0.2
	OPENBSD_3_4_BASE:1.31
	OPENBSD_3_3:1.30.0.2
	OPENBSD_3_3_BASE:1.30
	OPENBSD_3_2:1.26.0.2
	OPENBSD_3_2_BASE:1.26
	OPENBSD_3_1:1.18.0.4
	OPENBSD_3_1_BASE:1.18
	OPENBSD_3_0:1.18.0.2
	OPENBSD_3_0_BASE:1.18
	OPENBSD_2_9_BASE:1.17
	OPENBSD_2_9:1.17.0.2
	OPENBSD_2_8:1.15.0.2
	OPENBSD_2_8_BASE:1.15
	OPENBSD_2_7:1.14.0.2
	OPENBSD_2_7_BASE:1.14
	OPENBSD_2_6:1.12.0.2
	OPENBSD_2_6_BASE:1.12
	OPENBSD_2_5:1.9.0.2
	OPENBSD_2_5_BASE:1.9
	OPENBSD_2_4:1.7.0.2
	OPENBSD_2_4_BASE:1.7
	OPENBSD_2_3:1.5.0.2
	OPENBSD_2_3_BASE:1.5
	OPENBSD_2_2:1.4.0.4
	OPENBSD_2_2_BASE:1.4
	OPENBSD_2_1:1.4.0.2
	OPENBSD_2_1_BASE:1.4
	OPENBSD_2_0:1.3.0.2
	OPENBSD_2_0_BASE:1.3
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@.\" @;


1.53
date	2015.11.16.16.43.06;	author millert;	state Exp;
branches;
next	1.52;
commitid	BeMjivqs84LhFBct;

1.52
date	2014.09.16.15.56.36;	author jmc;	state Exp;
branches;
next	1.51;
commitid	brIxTeCreUIrOv7f;

1.51
date	2014.03.17.21.48.51;	author jmc;	state Exp;
branches;
next	1.50;

1.50
date	2014.02.15.18.29.08;	author schwarze;	state Exp;
branches;
next	1.49;

1.49
date	2014.01.30.13.31.28;	author jmc;	state Exp;
branches;
next	1.48;

1.48
date	2014.01.13.23.18.57;	author millert;	state Exp;
branches;
next	1.47;

1.47
date	2014.01.09.21.22.49;	author jmc;	state Exp;
branches;
next	1.46;

1.46
date	2013.07.16.00.07.51;	author schwarze;	state Exp;
branches;
next	1.45;

1.45
date	2011.09.04.10.24.46;	author jmc;	state Exp;
branches;
next	1.44;

1.44
date	2011.08.31.08.45.52;	author jmc;	state Exp;
branches;
next	1.43;

1.43
date	2011.08.31.07.36.37;	author guenther;	state Exp;
branches;
next	1.42;

1.42
date	2010.09.03.11.09.28;	author jmc;	state Exp;
branches;
next	1.41;

1.41
date	2010.07.21.20.02.29;	author jmc;	state Exp;
branches;
next	1.40;

1.40
date	2010.07.02.23.40.09;	author krw;	state Exp;
branches;
next	1.39;

1.39
date	2009.12.07.08.14.58;	author jmc;	state Exp;
branches;
next	1.38;

1.38
date	2009.02.08.17.15.09;	author jmc;	state Exp;
branches;
next	1.37;

1.37
date	2008.01.03.07.52.24;	author jmc;	state Exp;
branches;
next	1.36;

1.36
date	2007.05.31.19.20.07;	author jmc;	state Exp;
branches;
next	1.35;

1.35
date	2007.05.30.04.41.33;	author jmc;	state Exp;
branches;
next	1.34;

1.34
date	2007.03.26.13.55.42;	author jmc;	state Exp;
branches;
next	1.33;

1.33
date	2005.09.30.20.34.25;	author jaredy;	state Exp;
branches;
next	1.32;

1.32
date	2005.06.23.14.39.35;	author jmc;	state Exp;
branches;
next	1.31;

1.31
date	2003.06.10.09.12.09;	author jmc;	state Exp;
branches;
next	1.30;

1.30
date	2003.02.19.22.11.42;	author millert;	state Exp;
branches;
next	1.29;

1.29
date	2003.02.19.20.47.09;	author millert;	state Exp;
branches;
next	1.28;

1.28
date	2003.02.14.17.21.48;	author millert;	state Exp;
branches;
next	1.27;

1.27
date	2003.01.23.14.31.19;	author avsm;	state Exp;
branches;
next	1.26;

1.26
date	2002.07.15.19.13.29;	author millert;	state Exp;
branches;
next	1.25;

1.25
date	2002.05.14.18.05.39;	author millert;	state Exp;
branches;
next	1.24;

1.24
date	2002.05.13.18.43.53;	author millert;	state Exp;
branches;
next	1.23;

1.23
date	2002.05.13.16.12.07;	author millert;	state Exp;
branches;
next	1.22;

1.22
date	2002.05.11.23.02.33;	author millert;	state Exp;
branches;
next	1.21;

1.21
date	2002.05.11.22.14.48;	author millert;	state Exp;
branches;
next	1.20;

1.20
date	2002.05.11.21.56.54;	author millert;	state Exp;
branches;
next	1.19;

1.19
date	2002.05.11.18.41.20;	author millert;	state Exp;
branches;
next	1.18;

1.18
date	2001.07.20.19.09.45;	author mpech;	state Exp;
branches;
next	1.17;

1.17
date	2000.11.10.05.10.21;	author aaron;	state Exp;
branches;
next	1.16;

1.16
date	2000.11.09.17.52.02;	author aaron;	state Exp;
branches;
next	1.15;

1.15
date	2000.07.06.04.06.54;	author aaron;	state Exp;
branches;
next	1.14;

1.14
date	2000.03.23.21.10.12;	author aaron;	state Exp;
branches;
next	1.13;

1.13
date	2000.03.04.21.12.00;	author aaron;	state Exp;
branches;
next	1.12;

1.12
date	99.09.14.05.28.23;	author deraadt;	state Exp;
branches;
next	1.11;

1.11
date	99.07.04.11.53.51;	author aaron;	state Exp;
branches;
next	1.10;

1.10
date	99.06.05.01.21.17;	author aaron;	state Exp;
branches;
next	1.9;

1.9
date	99.03.21.04.04.41;	author alex;	state Exp;
branches;
next	1.8;

1.8
date	98.11.04.22.36.40;	author aaron;	state Exp;
branches;
next	1.7;

1.7
date	98.09.23.04.32.34;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	98.06.05.00.47.46;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	98.02.12.18.24.50;	author marc;	state Exp;
branches;
next	1.4;

1.4
date	97.03.01.23.40.08;	author millert;	state Exp;
branches;
next	1.3;

1.3
date	96.10.08.01.20.52;	author michaels;	state Exp;
branches;
next	1.2;

1.2
date	96.06.26.05.31.26;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.44.54;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.44.54;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.53
log
@Make "at -l" comply with POSIX.  Our "at -l" currently acts like
the historic BSD atq which takes a list of users instead of a list
of jobs.  We now accept either a user or a job number for "at -l".
The "at -l user" syntax is still accepted but no longer documented.
This is similar to how we handle differences in "at -r" vs. atrm.
OK deraadt@@ jmc@@
@
text
@.\" $OpenBSD: at.1,v 1.52 2014/09/16 15:56:36 jmc Exp $
.\"
.\" Copyright (C) 1993, 1994  Thomas Koenig
.\" Copyright (C) 1993  David Parsons
.\" Copyright (C) 2002  Todd C. Miller
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. The name of the author(s) may not be used to endorse or promote
.\"    products derived from this software without specific prior written
.\"    permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR(S) ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR(S) BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.Dd $Mdocdate: September 16 2014 $
.Dt AT 1
.Os
.Sh NAME
.Nm at ,
.Nm batch
.Nd queue, examine or delete jobs for later execution
.Sh SYNOPSIS
.Nm at
.Op Fl bm
.Op Fl f Ar file
.Op Fl l Op Ar job ...
.Op Fl q Ar queue
.Fl t Ar time_arg | timespec
.Nm at
.Fl c | r
.Ar job ...
.Nm batch
.Op Fl m
.Op Fl f Ar file
.Op Fl q Ar queue
.Op Ar timespec
.Sh DESCRIPTION
.Nm at
and
.Nm batch
read commands from standard input or a specified file which
are to be executed at a later time, via the user's shell as
specified by the
.Ev SHELL
environment variable.
If
.Ev SHELL
is not set, the shell in the user's password database entry is used
instead.
If all else fails,
.Xr sh 1
will be used.
.Pp
The related programs are as follows:
.Bl -tag -width Ds
.It Nm at
Executes commands at a specified time.
.It Nm batch
Executes commands when system load levels permit.
In other words, when
the load average drops below 1.5, or the value specified in the invocation of
.Xr cron 8 .
.El
.Pp
The options are as follows:
.Bl -tag -width indent
.It Fl b
An alias for
.Nm batch .
.It Fl c Ar job ...
Prints the jobs listed on the command line to standard output.
.It Fl f Ar file
Reads the job from
.Ar file
rather than standard input.
.It Fl l Op Ar job ...
Displays the queue of jobs which are currently awaiting execution.
If a
.Ar job
argument is specified, only the specified jobs will be displayed.
Unless the user is the superuser, only the user's own jobs will be
displayed.
.It Fl m
Send mail to the user when the job has completed, even if there was no
output.
.It Fl q Ar queue
Uses the specified queue.
A queue designation consists of a single letter.
Valid queue designations range from
.Sy a
to
.Sy z
and
.Sy A
to
.Sy Z .
The
.Sy c
queue is the default for
.Nm at
and the
.Sy E
queue for
.Nm batch .
Queues with higher letters run with increased niceness.
If a job is submitted to a queue designated with an uppercase letter, it
is treated as if it had been submitted to batch at that time.
If the user specified the
.Fl l
option and
.Nm at
is given a specific queue, only jobs pending in that queue will be shown.
.It Fl r Ar job ...
Remove the specified job(s) from the
.Nm at
queue.
.It Fl t Ar time_arg
Specify the job time.
The argument should be of the form
.Oo Oo Ar cc Oc Ns Ar yy Oc Ns Ar mmddHHMM Ns Op \&. Ns Ar SS ,
where the parts of the argument represent the following:
.Pp
.Bl -tag -width Ds -compact -offset indent
.It Ar ccyy
Year.
If yy is specified, but cc is not,
a value for yy between 69 and 99 results in a cc value of 19.
Otherwise, a cc value of 20 is used.
.It Ar mm
Month:
a number from 1 to 12.
.It Ar dd
Day:
a number from 1 to 31.
.It Ar HH
Hour:
a number from 0 to 23.
.It Ar MM
Minute:
a number from 0 to 59.
.It Ar SS
Second:
a number from 0 to 60
(permitting a leap second),
preceded by a period.
The default is 0.
.El
.El
.Pp
.Nm at
allows some moderately complex
.Ar timespec
specifications.
It accepts times of the form
.Ar HHMM
or
.Ar HH:MM
to run a job at a specific time of day.
(If that time is already past, the next day is assumed.)
You may also specify
.Cm midnight ,
.Cm noon ,
or
.Cm teatime
(4pm)
and you can have a time-of-day suffixed with
.Cm AM
or
.Cm PM
for running in the morning or the evening.
You can also say what day the job will be run,
by giving a date in the form
.Ar \%month-name day
with an optional
.Ar year ,
or giving a date of the form
.Ar dd.mm.ccyy ,
.Ar dd.mm.yy ,
.Ar mm/dd/ccyy ,
.Ar mm/dd/yy ,
.Ar mmddccyy ,
or
.Ar mmddyy .
.Pp
The year may be given as two or four digits.
If the year is given as two digits, it is taken to occur as soon as
possible in the future, which may be in the next century --
unless it's last year, in which case it's considered to be
a typo.
.Pp
The specification of a date must follow the specification of
the time of day.
You can also give times like
.Oo Cm now Oc Cm + Ar count time-units ,
where the time-units can be
.Cm minutes ,
.Cm hours ,
.Cm days ,
.Cm weeks ,
.Cm months ,
or
.Cm years
(the singular forms are also accepted).
You can tell
.Nm at
to run the job today by suffixing the time with
.Cm today
and to run the job tomorrow by suffixing the time with
.Cm tomorrow .
The
.Cm next
keyword may be used as an alias for
.Cm + 1 .
.Pp
For example, to run a job at 4pm three days from now, you would do
.Ic at 4pm + 3 days .
To run a job at 10:00am on July 31, you would do
.Ic at 10am Jul 31 .
To run a job at 1am tomorrow, you would do
.Ic at 1am tomorrow .
To run a job at midnight in one week's time, you would do
.Ic at midnight next week .
.Pp
The
.Nm at
utility also supports the time format used by
.Xr touch 1
(see the
.Fl t
option).
.Pp
For both
.Nm at
and
.Nm batch ,
commands are read from standard input (or the file specified
with the
.Fl f
option) and executed.
The working directory, the environment (except for the variables
.Ev TERM ,
.Ev TERMCAP ,
.Ev DISPLAY ,
and
.Ev _ ) ,
and the
.Ar umask
are retained from the time of invocation.
An
.Nm at
or
.Nm batch
command invoked from a
.Xr su 1
shell will retain the current user ID.
The user will be mailed standard error and standard output from his
commands, if any.
If
.Nm at
is executed from a
.Xr su 1
shell, the owner of the login shell will receive the mail.
.Pp
For non-root users, permission to run
.Nm
is determined by the files
.Pa /var/cron/at.allow
and
.Pa /var/cron/at.deny .
.Em Note :
these files must be readable by group crontab (if they exist).
.Pp
If the file
.Pa /var/cron/at.allow
exists, only usernames mentioned in it are allowed to use
.Nm at .
If
.Pa /var/cron/at.allow
does not exist,
.Pa /var/cron/at.deny
is checked.
Every username not mentioned in it is then allowed to use
.Nm at .
If neither exists, only the superuser is allowed to run
.Nm at .
.Pp
An empty
.Pa /var/cron/at.deny
means that every user is allowed to use these commands.
This is the default configuration.
.Sh FILES
.Bl -tag -width /var/cron/at.allow -compact
.It Pa /var/cron/atjobs
directory containing job files
.It Pa /var/cron/at.allow
allow permission control
.It Pa /var/cron/at.deny
deny permission control
.El
.Sh EXIT STATUS
The
.Nm
utility exits with one of the following values:
.Pp
.Bl -tag -width Ds -offset indent -compact
.It 0
Jobs were successfully submitted, removed, or listed.
.It >0
An error occurred.
.El
.Sh SEE ALSO
.Xr atq 1 ,
.Xr atrm 1 ,
.Xr nice 1 ,
.Xr sh 1 ,
.Xr touch 1 ,
.Xr umask 2 ,
.Xr cron 8
.Sh STANDARDS
The
.Nm
and
.Nm batch
utilities are compliant with the
.St -p1003.1-2008
specification.
.Pp
The
.Nm
flags
.Op Fl bc
and the
.Nm batch
flags
.Op Fl fmq ,
as well as
the
.Cm teatime
keyword,
are extensions to that specification.
.Pp
.St -p1003.1-2008
states that
.Nm batch
jobs are submitted to the queue
.Qq with no time constraints ;
this implementation permits a
.Ar timespec
argument.
.Pp
The at.allow/deny mechanism is marked by
.St -p1003.1-2008
as being an
X/Open System Interfaces
option.
.Sh AUTHORS
.An -nosplit
.Nm at
was mostly written by
.An Thomas Koenig Aq Mt ig25@@rz.uni-karlsruhe.de .
The time parsing routines are by
.An David Parsons Aq Mt orc@@pell.chi.il.us .
.Sh BUGS
.Nm at
and
.Nm batch
as presently implemented are not suitable when users are competing for
resources.
If this is the case for your site, you might want to consider another
batch system, such as
.Nm nqs .
@


1.52
log
@no need to discuss sendmail (or any particular mailer) here;
while here, \*(Gt -> >, per ingo;
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.51 2014/03/17 21:48:51 jmc Exp $
d27 1
a27 1
.Dd $Mdocdate: March 17 2014 $
d38 1
a38 1
.Op Fl l Op Ar user ...
d88 1
a88 1
.It Fl l Op Ar user ...
d91 2
a92 3
.Ar user
argument is specified, only jobs belonging to that user will
be displayed.
d338 1
a338 4
specification,
except behaviour for the
.Fl l
flag differs.
@


1.51
log
@as suggested by schwarze, reshuffle STANDARDS text detailing posix features
we don;t support next to the posix compat blurb, in order to make things a bit
clearer; this also makes the text more concise;

ok millert schwarze sobrado
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.50 2014/02/15 18:29:08 schwarze Exp $
d27 1
a27 1
.Dd $Mdocdate: February 15 2014 $
a270 2
Mail will be sent using
.Xr sendmail 8 .
d321 1
a321 1
.It \*(Gt0
d331 1
a331 2
.Xr cron 8 ,
.Xr sendmail 8
@


1.50
log
@macro cleanup, mostly to use .Cm for fixed strings
to be passed as command line arguments;
from Jan Stary <hans at stare dot cz>, tweaked by me
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.49 2014/01/30 13:31:28 jmc Exp $
d27 1
a27 1
.Dd $Mdocdate: January 30 2014 $
d342 4
a345 1
specification.
d354 5
a358 1
.Op Fl fmq
a360 5
Behaviour for the
.Fl l
flag differs between this implementation and
.St -p1003.1-2008 .
.Pp
a368 3
The
.Cm teatime
keyword is an extension to the specification.
@


1.49
log
@STANDARDS: at.allow/deny is xsi (same as cron);
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.48 2014/01/13 23:18:57 millert Exp $
d27 1
a27 1
.Dd $Mdocdate: January 13 2014 $
d133 1
a133 1
[[cc]yy]mmddHHMM[.SS],
d174 2
a175 2
.Sy midnight ,
.Sy noon ,
d177 1
a177 1
.Sy teatime
d180 1
a180 1
.Dq AM
d182 1
a182 1
.Dq PM
d207 1
a207 2
.Op Sq now
.Sy + Ar count \%time-units ,
d209 5
a213 5
.Sy minutes ,
.Sy hours ,
.Sy days ,
.Sy weeks ,
.Sy months ,
d215 1
a215 1
.Sy years
d220 1
a220 1
.Sy today
d222 1
a222 1
.Sy tomorrow .
d224 1
a224 1
.Sy next
d226 1
a226 1
.Sy + 1 .
d368 1
a368 1
.Sy teatime
@


1.48
log
@Add the "next" keyword as an alias for "+ 1" for relative times.
Also support "months" and "years" keywords when specified as relative
time units.  All as per POSIX.  Man page changes OK jmc@@ sobrado@@
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.47 2014/01/09 21:22:49 jmc Exp $
d27 1
a27 1
.Dd $Mdocdate: January 9 2014 $
d371 6
@


1.47
log
@flesh out some details in STANDARDS regarding timespec;
ok sobrado millert
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.46 2013/07/16 00:07:51 schwarze Exp $
d27 1
a27 1
.Dd $Mdocdate: July 16 2013 $
d213 2
d216 3
a218 2
.Sy weeks
and you can tell
d224 4
d235 2
d370 1
a370 4
keyword is an extension to the specification,
and this implementation does not support the
.Sy next
keyword.
@


1.46
log
@use .Mt for email addresses; from Jan Stary <hans at stare dot cz>; ok jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.45 2011/09/04 10:24:46 jmc Exp $
d27 1
a27 1
.Dd $Mdocdate: September 4 2011 $
d350 15
@


1.45
log
@have the -t argument name in the options list match that of SYNOPSIS;
ok millert
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.44 2011/08/31 08:45:52 jmc Exp $
d27 1
a27 1
.Dd $Mdocdate: August 31 2011 $
d354 1
a354 1
.An Thomas Koenig Aq ig25@@rz.uni-karlsruhe.de .
d356 1
a356 1
.An David Parsons Aq orc@@pell.chi.il.us .
@


1.44
log
@have the timespec arguments match in case those of time_arg;
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.43 2011/08/31 07:36:37 guenther Exp $
d130 1
a130 1
.It Fl t Oo Ns Oo Ar cc Oc Ns Ar yy Oc Ns Ar mmddHHMM Ns Op \&. Ns Ar SS
@


1.43
log
@Copy description of the -t option and its argument with revised text
from the touch(1) manpage after much discussion with jmc@@ and miller@@
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.42 2010/09/03 11:09:28 jmc Exp $
d27 1
a27 1
.Dd $Mdocdate: September 3 2010 $
d190 5
a194 5
.Ar DD.MM.CCYY ,
.Ar DD.MM.YY ,
.Ar MM/DD/CCYY ,
.Ar MM/DD/YY ,
.Ar MMDDCCYY ,
d196 1
a196 1
.Ar MMDDYY .
@


1.42
log
@add an EXIT STATUS section for /usr/bin;
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.41 2010/07/21 20:02:29 jmc Exp $
d27 1
a27 1
.Dd $Mdocdate: July 21 2010 $
d130 5
a134 6
.It Fl t Ar time_arg
Specify the job time using the format specified by
.Xr touch 1 .
The argument should be in the form
.Ar [[CC]YY]MMDDhhmm[.SS]
where each pair of letters represents the following:
d137 14
a150 4
.It Ar CC
The first two digits of the year (the century).
.It Ar YY
The second two digits of the year.
d152 2
a153 7
The month of the year, from 1 to 12.
.It Ar DD
the day of the month, from 1 to 31.
.It Ar hh
The hour of the day, from 0 to 23.
.It Ar mm
The minute of the hour, from 0 to 59.
d155 5
a159 1
The second of the minute, from 0 to 61.
a160 10
.Pp
If the
.Ar CC
and
.Ar YY
letter pairs are not specified, the values default to the current
year.
If the
.Ar SS
letter pair is not specified, the value defaults to 0.
@


1.41
log
@document exit values; from daniel dickman
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.40 2010/07/02 23:40:09 krw Exp $
d27 1
a27 1
.Dd $Mdocdate: July 2 2010 $
d300 10
a309 1
.Pp
d314 1
a314 1
.Bl -tag -width Ds -compact -offset indent
a318 9
.El
.Sh FILES
.Bl -tag -width /var/cron/at.allow -compact
.It Pa /var/cron/atjobs
directory containing job files
.It Pa /var/cron/at.allow
allow permission control
.It Pa /var/cron/at.deny
deny permission control
@


1.40
log
@'wether' -> 'whether' typo in license text.

ok deraadt@@
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.39 2009/12/07 08:14:58 jmc Exp $
d27 1
a27 1
.Dd $Mdocdate: December 7 2009 $
d300 11
@


1.39
log
@behaviour for the -l flag differs between this implementation and posix;
spotted by millert
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.38 2009/02/08 17:15:09 jmc Exp $
d23 1
a23 1
.\" THEORY OF LIABILITY, WETHER IN CONTRACT, STRICT LIABILITY, OR TORT
d27 1
a27 1
.Dd $Mdocdate: February 8 2009 $
@


1.38
log
@bump the posix reference in STANDARDS to IEEE Std 1003.1-2008, with a few
updates to follow;
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.37 2008/01/03 07:52:24 jmc Exp $
d27 1
a27 1
.Dd $Mdocdate: January 3 2008 $
d336 5
@


1.37
log
@missing word; from Jason Filley
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.36 2007/05/31 19:20:07 jmc Exp $
d27 1
a27 1
.Dd $Mdocdate: May 31 2007 $
d324 1
a324 1
.St -p1003.1-2004
@


1.36
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.35 2007/05/30 04:41:33 jmc Exp $
d27 1
a27 1
.Dd $Mdocdate$
d298 1
a298 1
means that every user is allowed use these commands.
@


1.35
log
@- use a consistent text for STANDARDS
- note which options are extensions to POSIX
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.34 2007/03/26 13:55:42 jmc Exp $
d27 1
a27 1
.Dd May 13, 2002
@


1.34
log
@indicate that -l takes an optional argument;
whilst here, clean up the -cr descriptions, add some refs to
SEE ALSO, and merge the first two synopses into one

based on a diff from J.C. Roberts
help/ok millert
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.33 2005/09/30 20:34:25 jaredy Exp $
d318 18
@


1.33
log
@deploy .An -nosplit; ok jmc
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.32 2005/06/23 14:39:35 jmc Exp $
d36 1
a36 1
.Op Fl blm
d38 1
d40 1
a40 6
.Fl t Ar time_arg
.Nm at
.Op Fl blm
.Op Fl f Ar file
.Op Fl q Ar queue
.Ar timespec
d43 1
a43 1
.Ar job Op Ar job ...
d82 1
a82 1
.It Fl c
d88 8
a95 4
.It Fl l
Lists the user's pending jobs, unless the user is the superuser.
In that case, all users' jobs are listed.
.\" XXX - should document that user names may be specified (like atq)
d126 1
a126 1
.It Fl r
d310 2
@


1.32
log
@- at(1) synopsis: -r expects a `job' arg, not a timespec
- remove description of -v: it is only for use with atq(1), and is
correctly documented there
- sync usage()
- correctly format synopis for atrm(1)
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.31 2003/06/10 09:12:09 jmc Exp $
d317 1
@


1.31
log
@- section reorder
- COMPATIBILITY merge
- macro cleanup
- kill whitespace at EOL
- new sentence, new line

ssh pages ok markus@@
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.30 2003/02/19 22:11:42 millert Exp $
d36 1
a36 1
.Op Fl blmr
d41 1
a41 1
.Op Fl blmr
d46 2
a47 1
.Fl c Ar job Op Ar job ...
a162 4
.It Fl v
When used in conjunction with the
.Fl l
option, shows completed but not yet deleted jobs in the queue.
@


1.30
log
@Move contents of /var/at into /var/cron since at is now intergrated into
cron.  When ISC cron 5.0 is out the integration will be even tighter.

Also rename /var/cron/{allow,deny} -> /var/cron/cron.{allow,deny}
for consistency with POSIX and at.{allow,deny} and install an empty
cron.deny file (as we do at.deny) since crontab will require this
in the near future for POSIX compliance.

After a "make build" you can update your system as follows:
# mv /var/at/* /var/cron
# mv /var/cron/jobs /var/cron/atjobs
# mv /var/cron.allow /var/cron/cron.allow
# mv /var/cron.deny /var/cron/cron.deny
# rm -rf /var/at
# kill `cat /var/run/cron.pid` ; cron
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.29 2003/02/19 20:47:09 millert Exp $
d62 1
a62 1
.Ev SHELL   
d321 4
a324 2
was mostly written by Thomas Koenig <ig25@@rz.uni-karlsruhe.de>.
The time parsing routines are by David Parsons <orc@@pell.chi.il.us>.
@


1.29
log
@sequence file is no longer used
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.28 2003/02/14 17:21:48 millert Exp $
d279 1
a279 1
.Pa /var/at/at.allow
d281 1
a281 1
.Pa /var/at/at.deny .
d286 1
a286 1
.Pa /var/at/at.allow
d290 1
a290 1
.Pa /var/at/at.allow
d292 1
a292 1
.Pa /var/at/at.deny
d300 1
a300 1
.Pa /var/at/at.deny
d304 2
a305 2
.Bl -tag -width /var/at/at.allow -compact
.It Pa /var/at/jobs
d307 1
a307 1
.It Pa /var/at/at.allow
d309 1
a309 1
.It Pa /var/at/at.deny
@


1.28
log
@man page is under same license as the program
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.27 2003/01/23 14:31:19 avsm Exp $
a310 2
.It Pa /var/at/.SEQ
job sequence file
@


1.27
log
@'conjunction' typos
@
text
@d1 26
a26 2
.\" $OpenBSD: at.1,v 1.26 2002/07/15 19:13:29 millert Exp $
.\" $FreeBSD: at.man,v 1.6 1997/02/22 19:54:05 peter Exp $
@


1.26
log
@Move atrun(8) functionality into cron(8) proper.  This fixes the
long-standing annoyance that atrun's granularity is 10 minutes.
Most at jobs run with a 1 minute granularity.  Jobs submitted via
"at now" or "batch" will run immediately.  Includes a rewritten
cron(8) man page.  at(1) will be integrated more closely into
cron at a future date.

Upgrading notes:
    the atrun job in root's crontab should be removed.
    the /var/at/spool directory is no longer used
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.25 2002/05/14 18:05:39 millert Exp $
d139 1
a139 1
When used in conjuction with the
@


1.25
log
@Major changes:

Job names are now "runtime.queue" where runtime is when the job will run
in Unix time format.  This is what SysV at does and allows us to nuke
the .SEQ file.

Historic BSD options for atq and atrm are now implemented;
atq and atrm get their own man pages.

At no longer does anything with the -v flag.  We print the execution
time when jobs are submitted so there is no need.

Most *scanf() usage is gone (one remains in atrun).

Better sanity checks in atrun.

Random style/cleanup.

With these changes we have the best of both worlds; POSIX compliance with
the traditional BSD features.
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.24 2002/05/13 18:43:53 millert Exp $
d53 1
a53 1
.Nm atrun .
a282 2
.It Pa /var/at/spool
directory containing output spool files
a294 1
.Xr atrun 8 ,
@


1.24
log
@Execute job with user's shell, not /bin/sh as per POSIX and historic
BSD behavior.

Add some bash-specific and ssh agent variables to the no_export list.

Print the message after job submission the way POSIX wants.

When cat'ing or removing non-existent jobs, exit with an error if
the specified job does not exist.
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.23 2002/05/13 16:12:07 millert Exp $
d3 1
a3 1
.Dd April 12, 1995
a7 2
.Nm atq ,
.Nm atrm ,
d12 1
a12 1
.Op Fl blmrv
d17 1
a17 1
.Op Fl blmrv
a22 6
.Nm atq
.Op Fl q Ar queue
.Op Fl v
.Nm atrm
.Ar job
.Op Ar job ...
d24 1
a24 1
.Op Fl mv
a48 5
.It Nm atq
Lists the user's pending jobs, unless the user is the superuser.
In that case, all users' jobs are listed.
.It Nm atrm
Deletes jobs.
d68 3
a70 2
An alias for
.Nm atq .
d96 5
a100 3
If
.Nm atq
is given a specific queue, it will only show jobs pending in that queue.
d102 3
a104 2
An alias for
.Nm atrm .
d139 3
a141 4
For
.Nm atq ,
shows completed but not yet deleted jobs in the queue.
Otherwise shows the time the job will be executed.
@


1.23
log
@Only print usage for the command that was run (at, atq, atrm, batch), not
all four.  Also differentiate between the touch(1) style time as time_arg
and the at(1) style time as timespec (which is what SUS3 does).
Instead of referring to the touch time format as POSIX time, reference
touch.  This is what SUS3 does and it is what users will know.
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.22 2002/05/11 23:02:33 millert Exp $
d41 11
a51 2
are to be executed at a later time, using
.Xr sh 1 .
a322 7
.Pp
.Nm atq
always prints the year as two digits.
Since
.Nm at
only permits submission of jobs in the future, it is somewhat
clear which century the job will run in.
@


1.22
log
@Add POSIX -r and -t flags from FreeBSD.  The old -d option is now
deprecated and no longer documented.
Also, use __progname instead of examining argv and clean up a few minor
warnings.
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.21 2002/05/11 22:14:48 millert Exp $
d17 1
a17 1
.Fl t Ar [[CC]YY]MMDDhhmm[.SS]
d22 1
a22 1
.Ar time
d35 1
a35 1
.Op Ar time
d105 3
a107 2
.It Fl t
Specify the job time using the \*[Px] time format.
d112 1
a112 1
.Bl -tag -width indent -compact -offset indent
d147 1
a147 1
.Ar time
d213 3
a215 1
utility also supports the \*[Px] time format (see the
d296 1
@


1.21
log
@sort command line options lexigraphically and remove lies about looking
in utmp (our getlogin() doesn't look at utmp).
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.20 2002/05/11 21:56:54 millert Exp $
d14 6
a19 1
.Op Fl bdlmv
a66 3
.It Fl d
An alias for
.Nm atrm .
d102 35
d171 5
a175 2
.Ar MMDDYY ,
.Ar MM/DD/YY
d177 1
a177 1
.Ar DD.MM.YY .
d210 6
d220 1
a220 1
commands are read from standard input or the file specified
d223 1
a223 1
option and executed.
d242 1
a242 1
Mail will be sent using the command
@


1.20
log
@Kill -V (version) option since it has no relation to reality any more.
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.19 2002/05/11 18:41:20 millert Exp $
d14 2
a16 2
.Op Fl f Ar file
.Op Fl mldbv
d27 2
a29 2
.Op Fl f Ar file
.Op Fl mv
d57 18
a99 16
.It Fl m
Send mail to the user when the job has completed, even if there was no
output.
.It Fl f Ar file
Reads the job from
.Ar file
rather than standard input.
.It Fl l
An alias for
.Nm atq .
.It Fl d
An alias for
.Nm atrm .
.It Fl b
An alias for
.Nm batch .
a104 2
.It Fl c
Prints the jobs listed on the command line to standard output.
a236 2
.It Pa /var/run/utmp
login records
a255 10
If the file
.Pa /var/run/utmp
is not available or corrupted, or if the user is not logged on at the
time
.Nm at
is invoked, the mail is sent to the user ID found
in the environment variable
.Ev LOGNAME .
If that is undefined or empty, the current user ID is assumed.
.Pp
@


1.19
log
@at(1) is no longer setuid root, it is setgid crontab.
This means that /var/at/at.{allow,deny} must be readable by group
crontab, /var/at/jobs is mode 01770, and /var/at/.SEQ is mode 0660.
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.18 2001/07/20 19:09:45 mpech Exp $
a13 1
.Op Fl V
a18 1
.Op Fl V
a20 1
.Op Fl V
a23 1
.Op Fl V
a26 1
.Op Fl V
a56 2
.It Fl V
Prints the version number to standard error.
@


1.18
log
@we don't like:
o) .Pp before/after .Sh;
o) .Pp before/after .Sh;
o) .Nm without argument in SYNOPSIS;
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.17 2000/11/10 05:10:21 aaron Exp $
d211 3
a213 2
The superuser may use these commands in any case.
For other users, permission to use at is determined by the files
d217 2
d231 1
a231 1
If neither exists, only the superuser is allowed use of
d239 1
a239 1
.Bl -tag -width /var/at/.lockfile -compact
d250 2
a251 2
.It Pa /var/at/.lockfile
job-creation lock file
@


1.17
log
@- Section shuffling: comply to the section ordering outlined in mdoc(7).
- Some .Nm trimming.
- .Sh AUTHOR -> .Sh AUTHORS
- Other miscellaneous fixes here and there.
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.16 2000/11/09 17:52:02 aaron Exp $
a234 1
.Pp
@


1.16
log
@Change all option list specifications to ".Bl -tag -width Ds". Most man
pages just needed their -width parameter tweaked to "Ds", which provides
a nice width of 6 constant characters. For consistency more than anything.
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.15 2000/07/06 04:06:54 aaron Exp $
d258 4
a287 4
.Sh AUTHORS
.Nm at
was mostly written by Thomas Koenig <ig25@@rz.uni-karlsruhe.de>.
The time parsing routines are by David Parsons <orc@@pell.chi.il.us>.
@


1.15
log
@Insert more missing .El directives. Our troff really should identify these and
spit out a warning.
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.14 2000/03/23 21:10:12 aaron Exp $
d45 1
a45 1
.Bl -tag -width indent
@


1.14
log
@Fix some formatting problems I missed before.
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.13 2000/03/04 21:12:00 aaron Exp $
d250 1
@


1.13
log
@Many improvements and general cleanup/standardization.
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.12 1999/09/14 05:28:23 deraadt Exp $
d49 1
a49 1
Lists the user's pending jobs, unless the user is the super-user.
d54 2
a55 1
Executes commands when system load levels permit.  In other words, when
d66 2
a67 2
A queue designation consists of a single letter.  Valid queue designations
range from
d108 2
a109 2
shows completed but not yet deleted jobs in the queue.  Otherwise
shows the time the job will be executed.
d117 2
a118 1
specifications.  It accepts times of the form
d202 2
a203 1
commands, if any. Mail will be sent using the command
d211 1
a211 1
The super-user may use these commands in any case.
d225 2
a226 2
is checked. Every username not mentioned in it is then allowed
to use
d228 1
a228 1
If neither exists, only the super-user is allowed use of
d278 2
a279 1
always prints the year as two digits.  Since
@


1.12
log
@atq prints 2 digits for year
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.11 1999/07/04 11:53:51 aaron Exp $
d37 1
a37 1
.Nm
d43 2
d49 1
a49 1
Lists the user's pending jobs, unless the user is the superuser.
d59 55
a113 1
.Nm
d123 2
a124 2
.Nm midnight ,
.Nm noon ,
d126 1
a126 1
.Nm teatime
d129 1
a129 1
.Nm AM
d131 1
a131 1
.Nm PM
d143 2
a144 1
The year may be given as two digits or four digits.
d149 1
d153 2
a154 2
.Op Nm now
.Nm + Ar count \%time-units ,
d156 3
a158 3
.Nm minutes ,
.Nm hours ,
.Nm days ,
d160 1
a160 1
.Nm weeks
d162 1
a162 1
.Nm
d164 1
a164 1
.Nm today
d166 1
a166 1
.Nm tomorrow .
d169 1
a169 1
.Nm at 4pm + 3 days .
d171 1
a171 1
.Nm at 10am Jul 31 .
d173 1
a173 1
.Nm at 1am tomorrow .
d176 1
a176 1
.Nm
d188 1
a188 1
.Ev _ )
d193 1
a193 1
.Nm
d203 1
a203 1
.Nm
d208 1
a208 1
The superuser may use these commands in any case.
a217 1
.Pp
d225 1
a225 2
.Pp
If neither exists, only the superuser is allowed use of
d232 1
a232 52
.Sh OPTIONS
.Bl -tag -width indent
.It Fl V
Prints the version number to standard error.
.It Fl q Ar queue
Uses the specified queue.
A queue designation consists of a single letter.  Valid queue designations
range from
.Nm a
to
.Nm z
and
.Nm A
to
.Nm Z .
The
.Nm c
queue is the default for
.Nm
and the
.Nm E
queue for
.Nm batch .
Queues with higher letters run with increased niceness.
If a job is submitted to a queue designated with an uppercase letter, it
is treated as if it had been submitted to batch at that time.
If
.Nm atq
is given a specific queue, it will only show jobs pending in that queue.
.It Fl m
Send mail to the user when the job has completed, even if there was no
output.
.It Fl f Ar file
Reads the job from
.Ar file
rather than standard input.
.It Fl l
Is an alias for
.Nm atq .
.It Fl d
Is an alias for
.Nm atrm .
.It Fl b
Is an alias for
.Nm batch .
.It Fl v
For
.Nm atq ,
shows completed but not yet deleted jobs in the queue.  Otherwise
shows the time the job will be executed.
.It Fl c
Prints the jobs listed on the command line to standard output.
a253 1
.El
d259 1
a259 1
.Nm
d265 1
a265 1
.Nm
d280 1
a280 1
.Nm
@


1.11
log
@correct use of .Nm; some other formatting nits
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.10 1999/06/05 01:21:17 aaron Exp $
d269 6
@


1.10
log
@- remove trailing white space
- remove arguments from .Os macros
- remove arguments from .Nm macros, where appropriate
- some more Dq/Sq/Ql insanity
- still lots to do in the usr.bin tree... :/
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.9 1999/03/21 04:04:41 alex Exp $
d7 4
a10 1
.Nm at, atq, atrm, batch
d37 1
a37 1
.Nm at
d57 1
a57 1
.Nm at
d104 1
a104 1
.Nm at
d118 1
a118 1
.Nm at
d135 1
a135 1
.Nm at
d145 1
a145 1
.Nm at
d194 1
a194 1
.Nm at
d255 1
a255 1
.Nm at
d261 1
a261 1
.Nm at
d270 1
a270 1
.Nm at
@


1.9
log
@PR 778: Handle 2-digit year values post-Y2K.  Improvements to PR 778
provided by pjanzen.
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.8 1998/11/04 22:36:40 aaron Exp $
d135 1
a135 1
command invoked from a 
d143 1
a143 1
is executed from a 
d169 1
a169 1
An empty 
d182 1
a182 1
to 
d251 1
a251 1
time 
@


1.8
log
@be really pedantic about punctuation following -mdoc macro'd text
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.7 1998/09/23 04:32:34 aaron Exp $
d84 5
@


1.7
log
@usr.bin/ man page repairs, a - e
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.6 1998/06/05 00:47:46 deraadt Exp $
d100 1
a100 1
.Nm tomorrow.
d107 1
a107 1
.Nm at 1am tomorrow.
@


1.6
log
@spelling
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.5 1998/02/12 18:24:50 marc Exp $
d4 1
a4 1
.Dt "AT" 1
d7 1
a7 1
.Nm at, batch, atq, atrm
a15 1
.Pp
a18 1
.Pp
a22 1
.Pp
a26 1
.Pp
d34 1
a34 1
.Nm At
d45 1
a45 1
In that case, everybody's jobs are listed.
d54 1
a54 1
.Nm At
d80 1
a80 2
.Ar MMDDYY
or
d103 4
a106 4
.Nm at 4pm + 3 days ,
to run a job at 10:00am on July 31, you would do
.Nm at 10am Jul 31
and to run a job at 1am tomorrow, you would do
d118 3
a120 3
.Nm TERM ,
.Nm TERMCAP ,
.Nm DISPLAY
d122 1
a122 1
.Nm _ )
d132 1
a132 1
shell will retain the current userid.
d157 1
a157 1
is checked, every username not mentioned in it is then allowed
d198 1
a198 1
Send mail to the user when the job has completed even if there was no
d206 1
a206 1
.Nm atq.
d209 1
a209 1
.Nm atrm.
d212 1
a212 1
.Nm batch.
d219 1
a219 1
Cats the jobs listed on the command line to standard output.
d223 1
a223 1
Directory containing job files
d225 1
a225 1
Directory containing output spool files
d227 1
a227 1
Login records
d229 1
a229 1
Allow permission control
d231 1
a231 1
Deny permission control
d233 1
a233 1
Job-creation lock file.
a234 1
.Xr cron 8 ,
d236 1
d238 3
a240 3
.Xr sh 1 ,
.Xr sendmail 8 ,
.Xr atrun 8 .
a242 1
.Pp
d248 1
a248 1
is invoked, the mail is sent to the userid found
d250 2
a251 2
.Nm LOGNAME .
If that is undefined or empty, the current userid is assumed.
d253 1
a253 1
.Nm At
d262 2
a263 1
At was mostly written by Thomas Koenig <ig25@@rz.uni-karlsruhe.de>.
@


1.5
log
@Make man page agree with installation as to default config.
@
text
@d1 1
a1 1
.\" $OpenBSD: at.1,v 1.4 1997/03/01 23:40:08 millert Exp $
d224 1
a224 1
Cats the jobs listed on the command line to standart output.
@


1.4
log
@Merge in changes from at 2.9
@
text
@d1 1
a1 1
.\" $OpenBSD: at.man,v 1.6 1997/02/22 19:54:05 peter Exp $
a167 1
This is the default configuration.
d172 1
@


1.3
log
@Attempt at cleanup.
@
text
@d1 3
a3 34
.\"	$OpenBSD: at.1,v 1.6 1995/03/25 18:13:29 glass Exp $
.\"	$NetBSD: at.1,v 1.6 1995/03/25 18:13:29 glass Exp $
.\"
.\"
.\" Copyright (c) 1993 Christopher G. Demetriou
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"      This product includes software developed by Christopher G. Demetriou.
.\" 3. The name of the author may not be used to endorse or promote products
.\"    derived from this software without specific prior written permission
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.\"
.Dd December 5, 1993
d8 1
a8 2
.Nd queue, examine, or delete jobs for later execution
.\"
d11 1
d14 1
a14 1
.Op Fl m
d17 4
d22 1
d27 1
d32 2
d35 2
a36 1
.Op Fl m
d38 1
a38 2
The
.Nm at
d41 2
a42 2
utilities read commands from the standard input or a specified file
which are to be executed at a later time, using
a43 2
.Pp
The functions of the commands are as follows:
d48 2
a49 3
Lists the user's pending jobs, unless the user is
the superuser.  In that case, everybody's jobs are
listed.
d53 3
a55 3
executes commands when system load levels  permit.
In other words, it executes the commands when the load
average drops below a specified level.
a57 45
For both
.Nm at
and
.Nm batch ,
the working directory, environment (except for the variables
.Nm TERM ,
.Nm TERMCAP ,
.Nm DISPLAY ,
and
.Nm _ )
and the umask are retained from the time of invocation.  The user
will be mailed the standard output and standard error from
his commands if any output is generated.  If
.Nm at
is executed from a
.Xr su 1
shell, the owner of the login shell will receive the mail.
.Sh OPTIONS
.Bl -tag -width indent
The available options are as follows:
.It Fl q Ar queue
Use the specified queue.  A queue designation consists
of a single letter; valid queue designation range from
.Ar a
to
.Ar l .
The
.Ar a
queue is the default, and
.Ar b
is the batch queue.  Queues with higher letters run with
increased niceness.  If
.Nm atq
is given a specific queue, it will only show jobs pending
in that queue.
.It Fl m
Send mail to the user when the job has completed, even if
there was no output.
.It Fl f Ar file
Reads the job from
.Ar file
rather than the standard input.
.It Fl v
Shows completed but not yet deleted jobs in the queue.
.Sh TIME SPECIFICATION
d59 3
a61 2
allows some moderately complex time specifications.
It accepts times of the form
d65 2
a66 2
to run a job at a specific time of day.  If
that time is already passed, the next day is assumed.
d72 2
a73 1
(4PM) and you can give a time of day suffixed with
d77 2
a78 2
for running in the morning or the evening.  You can
also specify the date on which the job will be run
d80 1
a80 1
.Ar month-name day
d84 2
a85 1
.Ar MMDDYY ,
d89 2
d92 6
a97 4
.Nm now +
.Ar count time-units ,
where the time units can be
.Nm minutes, hours, days,
d100 3
a102 1
You can suffix the time with
d104 121
a224 13
to run the job today, or
.Nm tomorrow
to run the job tomorrow.
.Pp
For example, to run a job at 4PM three days from now, you
would specify a time of
.Nm 4PM + 3 days .
To run a job at 10:00AM on on July 31, you would specify
a time of
.Nm 10AM Jul 31 .
Finally, to run a job at 1AM tomorrow, you would specify
a time of
.Nm 1AM tomorrow .
d226 1
a226 1
.Bl -tag -width /var/at/lockfile -compact
d231 7
a237 1
.It Pa /var/at/lockfile
a238 2
.It Pa /var/run/utmp
.El
d242 1
d244 2
a245 4
.Xr atrun 8
.Sh AUTHOR
.Bl -tag
Thomas Koenig, ig25@@rz.uni-karlsruhe.de
a247 9
Traditional access control to
.Nm at
and
.Nm batch
via the files
.Pa /var/at/at.allow
and
.Pa /var/at/at.deny
is not implemented.
d251 2
a252 2
is not available or corrupted, or if the user is not
logged in at the time
d254 2
a255 2
is invoked, the mail is sent to the userid found in the
environment variable
d258 12
@


1.2
log
@rcsid
@
text
@d36 1
a36 1
.Os NetBSD 0.9a
@


1.1
log
@Initial revision
@
text
@d1 1
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
