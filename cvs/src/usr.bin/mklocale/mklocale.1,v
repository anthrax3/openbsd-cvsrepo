head	1.6;
access;
symbols
	OPENBSD_6_1:1.6.0.6
	OPENBSD_6_1_BASE:1.6
	OPENBSD_6_0:1.6.0.2
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.4.0.20
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.22
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.14
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.18
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.16
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.12
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.4.0.10
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.4.0.8
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.6
	OPENBSD_5_0:1.4.0.4
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.4.0.2
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.3.0.14
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.10
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.12
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.8
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.6
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.4
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.3.0.2
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.2.0.8
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.6
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.4
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.2.0.2
	OPENBSD_3_8_BASE:1.2;
locks; strict;
comment	@.\" @;


1.6
date	2016.05.29.01.02.21;	author millert;	state Exp;
branches;
next	1.5;
commitid	d7CpNMj45QAyNDSA;

1.5
date	2016.05.08.15.25.44;	author schwarze;	state Exp;
branches;
next	1.4;
commitid	xgs9olPImRMCyrk1;

1.4
date	2010.09.19.21.30.05;	author jmc;	state Exp;
branches;
next	1.3;

1.3
date	2007.05.31.19.20.13;	author jmc;	state Exp;
branches;
next	1.2;

1.2
date	2005.08.11.14.30.53;	author jmc;	state Exp;
branches;
next	1.1;

1.1
date	2005.08.07.10.06.25;	author espie;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Eat all blanks between the VARIABLE keywords and the definition,
not just the first one.  Otherwise we end up storing the blanks.
Now the file generated by mklocale(1) is the same regardless of
whether or not the input is sent through the C preprocessor.
OK deraadt@@ jca@@ schwarze@@
@
text
@.\"	$OpenBSD: mklocale.1,v 1.5 2016/05/08 15:25:44 schwarze Exp $
.\"
.\" $NetBSD: mklocale.1,v 1.13 2004/01/24 17:03:26 wiz Exp $
.\" FreeBSD: src/usr.bin/mklocale/mklocale.1,v 1.6 1999/09/20 09:15:21 phantom Exp
.\"
.\" Copyright (c) 1993, 1994
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" This code is derived from software contributed to Berkeley by
.\" Paul Borman at Krystal Technologies.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"	@@(#)mklocale.1	8.2 (Berkeley) 4/18/94
.\"
.Dd $Mdocdate: May 8 2016 $
.Dt MKLOCALE 1
.Os
.Sh NAME
.Nm mklocale
.Nd make LC_CTYPE locale files
.Sh SYNOPSIS
.Nm mklocale
.Op Fl d
.Op Ar src-file
.Ar language/LC_CTYPE
.Nm mklocale
.Op Fl d
.Fl o
.Ar language/LC_CTYPE
.Ar src-file
.Sh DESCRIPTION
The
.Nm mklocale
utility reads an
.Dv LC_CTYPE
source file from standard input and produces an
.Dv LC_CTYPE
binary file on standard output suitable for placement in
.Pa /usr/share/locale/\*(Ltlanguage\*(Gt/LC_CTYPE .
.Pp
The format of
.Ar src-file
is quite simple:
it consists of a series of lines which start with a keyword and have
associated data following.
C-style comments are used
to place comments in the file.
.Pp
The following options are available:
.Bl -tag -width Ds
.It Fl d
Turns on debugging messages.
.It Fl o
Specify an output file.
.El
.Pp
Besides the keywords which will be listed below,
the following are valid tokens in
.Ar src-file :
.Bl -tag -width literal
.It Dv RUNE
A
.Dv RUNE
may be any of the following:
.Bl -tag -width 0x[0-9a-z]*
.It Ar 'x'
The ASCII character
.Ar x .
.It Ar '\ex'
The ANSI C character
.Ar \ex
where
.Ar \ex
is one of
.Dv \ea ,
.Dv \eb ,
.Dv \ef ,
.Dv \en ,
.Dv \er ,
.Dv \et ,
or
.Dv \ev .
.It Ar 0x[0-9a-z]*
A hexadecimal number representing a rune code.
.It Ar 0[0-7]*
An octal number representing a rune code.
.It Ar [1-9][0-9]*
A decimal number representing a rune code.
.El
.It Dv STRING
A string enclosed in double quotes (").
.It Dv THRU
Either
.Sq ...
or
.Sq - .
Used to indicate ranges.
.It Ar literal
The follow characters are taken literally:
.Pp
.Bl -tag -width XXXXXXXXXX -compact
.It Dv "\*(Lt \*(Ba ( \*(Ba ["
Used to start a mapping.
All are equivalent.
.It Dv "\*(Gt \*(Ba ) \*(Ba ]"
Used to end a mapping.
All are equivalent.
.It Dv \&:
Used as a delimiter in mappings.
.El
.El
.Pp
Key words which should only appear once are:
.Bl -tag -width PHONOGRAM
.It Dv ENCODING
Followed by a
.Dv STRING
which indicates the encoding mechanism to be used for this locale.
The current encodings are:
.Bl -tag -width NONE
.It Dv NONE
No translation and the default.
.It Dv UTF2
.Dv "Universal character set Transformation Format"
adopted from Plan 9 from Bell Labs.
.It Dv EUC
.Dv EUC
encoding as used by several
vendors of
.Ux
systems.
.El
.It Dv VARIABLE
This keyword must be followed by one or more tab or space characters,
after which encoding specific data is placed.
Currently only the
.Dv "EUC"
encoding requires variable data.
.\" See
.\" .Xr euc 4
.\" for further details.
.It Dv INVALID
A single
.Dv RUNE
follows and is used as the invalid rune for this locale.
.El
.Pp
The following keywords may appear multiple times and have the following
format for data:
.Bl -tag -width "XXRUNE1 THRU RUNEn : RUNE2XX" -offset indent
.It Aq Dv RUNE1 RUNE2
.Dv RUNE1
is mapped to
.Dv RUNE2 .
.It Aq Dv RUNE1 THRU RUNEn : RUNE2
Runes
.Dv RUNE1
through
.Dv RUNEn
are mapped to
.Dv RUNE2
through
.Dv RUNE2
.El
.Bl -tag -width PHONOGRAM
.It Dv MAPLOWER
Defines the tolower mappings.
.Dv RUNE2
is the lower case representation of
.Dv RUNE1 .
.It Dv MAPUPPER
Defines the toupper mappings.
.Dv RUNE2
is the upper case representation of
.Dv RUNE1 .
.It Dv TODIGIT
Defines a map from runes to their digit value.
.Dv RUNE2
is the integer value represented by
.Dv RUNE1 .
For example, the ASCII character
.Sq 0
would map to the decimal value 0.
On
.Ox ,
this information is ignored and not put into the binary output file.
.El
.Pp
The following keywords may appear multiple times and have the following
format for data:
.Bl -tag -width "RUNE1 THRU RUNEn"
.It Dv RUNE
This rune has the property defined by the keyword.
.It Dv "RUNE1 THRU RUNEn"
All the runes between and including
.Dv RUNE1
and
.Dv RUNEn
have the property defined by the keyword.
.El
.Bl -tag -width PHONOGRAM
.It Dv ALPHA
Defines runes which are alphabetic, printable, and graphic.
.It Dv CONTROL
Defines runes which are control characters.
.It Dv DIGIT
Defines runes which are decimal digits, printable, and graphic.
.It Dv GRAPH
Defines runes which are graphic and printable.
.It Dv LOWER
Defines runes which are lower case, printable, and graphic.
.It Dv PUNCT
Defines runes which are punctuation, printable, and graphic.
.It Dv SPACE
Defines runes which are spaces.
.It Dv UPPER
Defines runes which are upper case, printable, and graphic.
.It Dv XDIGIT
Defines runes which are hexadecimal digits, printable, and graphic.
.It Dv BLANK
Defines runes which are blank.
.It Dv PRINT
Defines runes which are printable.
.It Dv IDEOGRAM
Defines runes which are ideograms, printable, and graphic.
.It Dv SPECIAL
Defines runes which are special characters, printable, and graphic.
.It Dv PHONOGRAM
Defines runes which are phonograms, printable, and graphic.
.It Dv SWIDTHn
Defines runes with specific glyph width.
.Ar n
takes 0 to 3.
.It Dv CHARSET
Controls character set for subsequent runes.
.\" To support
.\" .Xr iso2022 4
.\" locale definitions.
.El
.Sh SEE ALSO
.\"Xr colldef 1 ,
.Xr setlocale 3
.\" .Xr euc 4 ,
.\" .Xr utf8 4
.\" .Xr nls 7
.Sh HISTORY
The
.Nm mklocale
utility first appeared in
.Bx 4.4 .
.Sh BUGS
The
.Nm mklocale
utility is overly simplistic.
.Pp
We should switch to
.Nm localedef
and its file format, which is more standard.
@


1.5
log
@Delete encoding code for the unused TODIGIT information.
I'm not aware of plans to add any TODIGIT support,
and when shown on tech@@, people were more or less indifferent
and showed confusion about what this code even did.

But the encoding code was buggy, in particular lacking validity
checks, and hence clobbered other important data, in particular
character type and character width data, with consequences that
are hard to judge.
@
text
@d1 1
a1 1
.\"	$OpenBSD: mklocale.1,v 1.4 2010/09/19 21:30:05 jmc Exp $
d38 1
a38 1
.Dd $Mdocdate: September 19 2010 $
d157 1
a157 1
This keyword must be followed by a single tab or space character,
@


1.4
log
@more wacky macro fixing;
@
text
@d1 1
a1 1
.\"	$OpenBSD: mklocale.1,v 1.3 2007/05/31 19:20:13 jmc Exp $
d38 1
a38 1
.Dd $Mdocdate: May 31 2007 $
d207 3
a209 1
Only values up to 255 are allowed.
@


1.3
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: mklocale.1,v 1.2 2005/08/11 14:30:53 jmc Exp $
d38 1
a38 1
.Dd $Mdocdate$
d131 1
a131 1
.It Dv :
@


1.2
log
@- replace/remove some gnu-isms
- use -mdoc macros
- grammar
- some formatting fixups
- add rcsid
- comment out Xr to non-existent nls(7): pointed out by ulrich kahl
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d38 1
a38 1
.Dd April 18, 1994
@


1.1
log
@mklocale tool, from NetBSD/citrus, not yet linked in.
okay deraadt@@
@
text
@d1 2
d47 1
a47 3
\*[Lt]
.Ar src-file
\*[Gt]
d62 1
a62 1
.Pa /usr/share/locale/\*[Lt]language\*[Gt]/LC_CTYPE .
d66 2
a67 2
is quite simple.
It consists of a series of lines which start with a keyword and have
d69 1
a69 1
C style comments are used
d72 2
a73 2
Following options are available:
.Bl -tag -width XXX
d77 1
a77 1
Specify output file.
d117 1
a117 1
.Dv ...
d119 1
a119 1
.Dv - .
d123 3
a125 2
.Bl -tag -width "\*[Lt]\|\|(\|\|["
.It Dv "\*[Lt]\|(\|["
d128 1
a128 1
.It Dv "\*[Gt]\|\^)\|]"
d148 1
a148 2
adopted from
.Nm "Plan 9 from Bell Labs" .
d173 1
a173 2
.in +.5i
.Bl -tag -width "XXRUNE1 THRU RUNEn : RUNE2XX"
a186 1
+ n-1.
a187 1
.in -.5i
d263 1
a263 1
.Xr setlocale 3 ,
d266 1
a266 1
.Xr nls 7
@

