head	1.15;
access;
symbols
	OPENBSD_6_0:1.15.0.6
	OPENBSD_6_0_BASE:1.15
	OPENBSD_5_9:1.15.0.2
	OPENBSD_5_9_BASE:1.15
	OPENBSD_5_8:1.15.0.4
	OPENBSD_5_8_BASE:1.15
	OPENBSD_5_7:1.13.0.2
	OPENBSD_5_7_BASE:1.13
	OPENBSD_5_6:1.11.0.4
	OPENBSD_5_6_BASE:1.11
	OPENBSD_5_5:1.9.0.6
	OPENBSD_5_5_BASE:1.9
	OPENBSD_5_4:1.9.0.2
	OPENBSD_5_4_BASE:1.9
	OPENBSD_5_3:1.7.0.4
	OPENBSD_5_3_BASE:1.7
	OPENBSD_5_2:1.7.0.2
	OPENBSD_5_2_BASE:1.7;
locks; strict;
comment	@.\" @;


1.15
date	2015.05.18.09.35.05;	author nicm;	state Exp;
branches;
next	1.14;
commitid	ZSzhtZZMK6qpE1AN;

1.14
date	2015.04.24.18.06.31;	author deraadt;	state Exp;
branches;
next	1.13;
commitid	oxDlbiJ5tyrpfdPA;

1.13
date	2015.02.28.21.51.56;	author bentley;	state Exp;
branches;
next	1.12;
commitid	NNu2UZnsd5zmNVYD;

1.12
date	2015.02.08.17.33.35;	author nicm;	state Exp;
branches;
next	1.11;
commitid	wqoh6bToIYeV9NHc;

1.11
date	2014.03.31.09.09.19;	author nicm;	state Exp;
branches;
next	1.10;

1.10
date	2014.03.26.13.00.50;	author nicm;	state Exp;
branches;
next	1.9;

1.9
date	2013.03.11.12.47.49;	author nicm;	state Exp;
branches;
next	1.8;

1.8
date	2013.03.09.19.27.48;	author nicm;	state Exp;
branches;
next	1.7;

1.7
date	2012.07.15.06.55.28;	author nicm;	state Exp;
branches;
next	1.6;

1.6
date	2012.07.12.13.11.46;	author nicm;	state Exp;
branches;
next	1.5;

1.5
date	2012.07.10.12.47.23;	author nicm;	state Exp;
branches;
next	1.4;

1.4
date	2012.07.10.11.42.02;	author nicm;	state Exp;
branches;
next	1.3;

1.3
date	2012.07.10.09.10.04;	author nicm;	state Exp;
branches;
next	1.2;

1.2
date	2012.07.10.08.16.27;	author nicm;	state Exp;
branches;
next	1.1;

1.1
date	2012.07.10.08.02.27;	author nicm;	state Exp;
branches;
next	;


desc
@@


1.15
log
@Add -d flag and dc capability to open devices non-blocking, used for the
few drivers that do not support cua* so tty* must be used.

ok miod millert
@
text
@.\"	$OpenBSD: cu.1,v 1.14 2015/04/24 18:06:31 deraadt Exp $
.\"
.\" Copyright (c) 1980, 1990, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.Dd $Mdocdate: April 24 2015 $
.Dt CU 1
.Os
.Sh NAME
.Nm cu
.Nd serial terminal emulator
.Sh SYNOPSIS
.Nm
.Op Fl d
.Op Fl l Ar line
.Op Fl s Ar speed | Fl Ar speed
.Nm
.Op Ar host
.Sh DESCRIPTION
.Nm
is used to connect to another system over a serial link.
In the era before modern networks, it was typically used to
connect to a modem in order to dial in to a remote host.
It is now frequently used for tasks such as attaching to the
serial console of another machine for administrative or
debugging purposes.
.Pp
The options are as follows:
.Bl -tag -width 4n
.It Fl d
Specify that the line is directly connected and
.Nm
should not allow the driver to block waiting for a carrier to be detected.
.It Fl l Ar line
Specify the line to use.
Either of the forms like
.Pa cua00
or
.Pa /dev/cua00
are permitted.
The default is
.Pa /dev/cua00 .
See
.Xr cua 4
for information on terminal devices.
Users in group
.Dq dialer
are permitted to use
.Xr cua 4
devices by default.
.It Fl s Ar speed | Fl Ar speed
Set the speed of the connection.
The default is 9600.
.El
.Pp
If
.Ar host
is given,
.Nm
uses the
.Xr remote 5
database to retrieve the
.Sy dc Pq directly connected ,
.Sy dv Pq device
and
.Sy br Pq baud rate
capabilities for that host.
The
.Nm
utility ignores other capabilities found in that database.
.Pp
Typed characters are normally transmitted directly to the remote
machine (which does the echoing as well).
A tilde
.Pq Ql ~
appearing as the first character of a line is an escape signal; the
following are recognized:
.Bl -tag -offset indent -width Fl
.It Ic ~^D No or Ic ~.
Drop the connection and exit.
Only the connection is dropped \(en the login session is not terminated.
.It Ic ~\*(Gt
Copy file from local to remote.
.Nm
prompts for the name of a local file to transmit.
.It Ic ~$
Pipe the output from a local
.Ux
process to the remote host.
The command string sent to the local
.Ux
system is processed by the shell.
.It Ic ~#
Send a
.Dv BREAK
to the remote system.
.It Ic ~^Z
Stop
.Nm
(only available with job control).
.It Ic ~C
Fork a child process on the local system to perform special protocols
such as XMODEM.
The child program will be run with the following arrangement of
file descriptors:
.Bd -literal -offset indent
0 \*(Lt-\*(Gt remote tty in
1 \*(Lt-\*(Gt remote tty out
2 \*(Lt-\*(Gt local tty stderr
.Ed
.It Ic ~D
Deassert the data terminal ready (DTR) line briefly.
.It Ic ~R
Record all output from the remote system to a file.
If the given file already exists, it is appended to.
If no file is specified, any existing recording is stopped.
.It Ic ~S
Change the speed of the connection.
.It Ic ~X
Send a file with the XMODEM protocol.
.It Ic ~?
Get a summary of the tilde escapes.
.El
.Pp
When
.Nm
prompts for an argument, for example during setup of a file transfer,
the line typed may be edited with the standard erase and kill characters.
A null line in response to a prompt, or an interrupt, will abort the
dialogue and return the user to the remote machine.
.Pp
.Nm
guards against multiple users connecting to a remote system by opening
modems and terminal lines with exclusive access.
.Sh ENVIRONMENT
.Bl -tag -width REMOTEXXX
.It Ev HOST
The default value for
.Ar host
if none is specified via the command line.
.It Ev REMOTE
A system description, or an absolute path to a
.Xr remote 5
system description database.
.El
.Sh FILES
.Bl -tag -width /etc/remote
.It Pa /etc/remote
host description file
.El
.Sh EXIT STATUS
.Ex -std cu
.Sh SEE ALSO
.Xr remote 5
.Sh HISTORY
The
.Nm
command appeared in
.Bx 4.2 .
This version was written for
.Ox 5.4
by Nicholas Marriott.
@


1.14
log
@remove the old tip SCCS note
@
text
@d1 1
a1 1
.\"	$OpenBSD: cu.1,v 1.13 2015/02/28 21:51:56 bentley Exp $
d30 1
a30 1
.Dd $Mdocdate: February 28 2015 $
d38 1
d54 4
d87 1
@


1.13
log
@Reduce usage of predefined strings in manpages.

Predefined strings are not very portable across troff implementations,
and they make the source much harder to read. Usually the intended
character can be written directly.

No output changes, except for two instances where the incorrect escape
was used in the first place.

tweaks + ok schwarze@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: cu.1,v 1.12 2015/02/08 17:33:35 nicm Exp $
d30 1
a30 3
.\"	@@(#)tip.1	8.4 (Berkeley) 4/18/94
.\"
.Dd $Mdocdate: February 8 2015 $
@


1.12
log
@Separate the two usages for cu so you can either give it -l and -s (like
cu) or you can give it a host to look up in /etc/remote (like
tip). Mixing the two was unclear and caused mixups with -l and the HOST
environment variable.

So usage is now:

usage: cu [-l line] [-s speed | -speed]
       cu [host]

And HOST and REMOTE are ignored for the first form.

ok deraadt claudio
@
text
@d1 1
a1 1
.\"	$OpenBSD: cu.1,v 1.11 2014/03/31 09:09:19 nicm Exp $
d32 1
a32 1
.Dd $Mdocdate: March 31 2014 $
d41 1
a41 1
.Op Fl s Ar speed \*(Ba Fl Ar speed
d72 1
a72 1
.It Fl s Ar speed \*(Ba Fl Ar speed
@


1.11
log
@Fix REMOTE to work like tip(1) - it can be either a path to a remote(5)
database or a description (for example "foo:dv=/dev/bar"). Add support
for HOST which works as I thought REMOTE did.

Manpage help from jmc@@.
@
text
@d1 1
a1 1
.\"	$OpenBSD: cu.1,v 1.10 2014/03/26 13:00:50 nicm Exp $
d32 1
a32 1
.Dd $Mdocdate: March 26 2014 $
d42 1
@


1.10
log
@Add support for retrieving the line and speed from the /etc/remote dv
and br capabilities like tip(1). No other capabilities are supported.

Also handle REMOTE in the environment as either a separate remote(5)
file or a host.

Discussed with and approval from several, man page help from schwarze@@.
@
text
@d1 1
a1 1
.\"	$OpenBSD: cu.1,v 1.9 2013/03/11 12:47:49 nicm Exp $
d32 1
a32 1
.Dd $Mdocdate: March 11 2013 $
d82 1
a82 1
host description file to retrieve the
d155 7
a161 3
If
.Ev REMOTE
is set and begins with a slash, the named file is searched before the
d163 2
a164 1
host description file; otherwise it is searched for as a host.
d170 4
@


1.9
log
@Simplify text about -l and use cua not tty in examples.
@
text
@d1 1
a1 1
.\"	$OpenBSD: cu.1,v 1.8 2013/03/09 19:27:48 nicm Exp $
d32 1
a32 1
.Dd $Mdocdate: March 9 2013 $
d42 1
d76 15
d154 11
@


1.8
log
@Add new cu to the build and disable tip. Also bump "first appeared in"
to .Ox 5.4 in cu.1.

New cu is a libevent-based implementation of the useful features of the
old tip/cu, plus a few new things like basic xmodem support.

ok deraadt
@
text
@d1 1
a1 1
.\"	$OpenBSD: cu.1,v 1.7 2012/07/15 06:55:28 nicm Exp $
d32 1
a32 1
.Dd $Mdocdate: July 15 2012 $
d56 1
a56 1
.Pa tty00
d58 1
a58 1
.Pa /dev/tty00
d62 1
a62 3
.Pp
For reasons outlined in
.Xr tty 4 ,
d64 1
a64 4
devices should be used on architectures which have them.
For those which do not,
.Xr tty 4
devices can be used.
d69 1
a69 8
devices by default;
permissions on
.Pa /dev/tty00
or
.Pa /dev/ttya
can be changed,
but they will revert to their defaults
after an upgrade or (re)install.
@


1.7
log
@Add a command (~D) to drop the DTR line for a second (similar to using
~# for a BREAK). This is useful as it makes some microcontroller boards
reset. From Visa Hankala.
@
text
@d1 1
a1 1
.\"	$OpenBSD: cu.1,v 1.6 2012/07/12 13:11:46 nicm Exp $
d32 1
a32 1
.Dd $Mdocdate: July 12 2012 $
d156 1
a156 1
.Ox 5.2
@


1.6
log
@Describe ~X as "send" not "transfer" to be clearer.
@
text
@d1 1
a1 1
.\"	$OpenBSD: cu.1,v 1.5 2012/07/10 12:47:23 nicm Exp $
d32 1
a32 1
.Dd $Mdocdate: July 10 2012 $
d126 2
@


1.5
log
@Add ~R command to start recording output to a file.
@
text
@d1 1
a1 1
.\"	$OpenBSD: cu.1,v 1.4 2012/07/10 11:42:02 nicm Exp $
d133 1
a133 1
Transfer a file with the XMODEM protocol.
@


1.4
log
@Add builtin XMODEM send support with ~X, only tested with lrz -X so far.
@
text
@d1 1
a1 1
.\"	$OpenBSD: cu.1,v 1.3 2012/07/10 09:10:04 nicm Exp $
d126 4
@


1.3
log
@Implement ~C.
@
text
@d1 1
a1 1
.\"	$OpenBSD: cu.1,v 1.2 2012/07/10 08:16:27 nicm Exp $
d128 2
@


1.2
log
@Add a ~S escape to change the speed interactively (not using ~s since
may want to use it for variables later).
@
text
@d1 1
a1 1
.\"	$OpenBSD: cu.1,v 1.1 2012/07/10 08:02:27 nicm Exp $
d116 10
@


1.1
log
@Add first cut of replacement for tip/cu. Not linked to the build.

Currently supports only -l and -s (no parity), no variables and ~., ~>,
~$, ~#, ~^Z, ~?. More to come.

Tested by naddy, otto. ok miod deraadt
@
text
@d1 1
a1 1
.\"	$OpenBSD: cu.1,v 1.13 2010/07/22 08:32:58 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate: July 22 2010 $
d116 2
@

