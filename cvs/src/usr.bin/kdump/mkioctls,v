head	1.38;
access;
symbols
	OPENBSD_6_1:1.37.0.6
	OPENBSD_6_1_BASE:1.37
	OPENBSD_6_0:1.37.0.2
	OPENBSD_6_0_BASE:1.37
	OPENBSD_5_9:1.35.0.2
	OPENBSD_5_9_BASE:1.35
	OPENBSD_5_8:1.34.0.6
	OPENBSD_5_8_BASE:1.34
	OPENBSD_5_7:1.34.0.2
	OPENBSD_5_7_BASE:1.34
	OPENBSD_5_6:1.33.0.4
	OPENBSD_5_6_BASE:1.33
	OPENBSD_5_5:1.31.0.4
	OPENBSD_5_5_BASE:1.31
	OPENBSD_5_4:1.29.0.2
	OPENBSD_5_4_BASE:1.29
	OPENBSD_5_3:1.27.0.6
	OPENBSD_5_3_BASE:1.27
	OPENBSD_5_2:1.27.0.4
	OPENBSD_5_2_BASE:1.27
	OPENBSD_5_1_BASE:1.27
	OPENBSD_5_1:1.27.0.2
	OPENBSD_5_0:1.25.0.2
	OPENBSD_5_0_BASE:1.25
	OPENBSD_4_9:1.23.0.2
	OPENBSD_4_9_BASE:1.23
	OPENBSD_4_8:1.22.0.14
	OPENBSD_4_8_BASE:1.22
	OPENBSD_4_7:1.22.0.10
	OPENBSD_4_7_BASE:1.22
	OPENBSD_4_6:1.22.0.12
	OPENBSD_4_6_BASE:1.22
	OPENBSD_4_5:1.22.0.8
	OPENBSD_4_5_BASE:1.22
	OPENBSD_4_4:1.22.0.6
	OPENBSD_4_4_BASE:1.22
	OPENBSD_4_3:1.22.0.4
	OPENBSD_4_3_BASE:1.22
	OPENBSD_4_2:1.22.0.2
	OPENBSD_4_2_BASE:1.22
	OPENBSD_4_1:1.21.0.8
	OPENBSD_4_1_BASE:1.21
	OPENBSD_4_0:1.21.0.6
	OPENBSD_4_0_BASE:1.21
	OPENBSD_3_9:1.21.0.4
	OPENBSD_3_9_BASE:1.21
	OPENBSD_3_8:1.21.0.2
	OPENBSD_3_8_BASE:1.21
	OPENBSD_3_7:1.20.0.2
	OPENBSD_3_7_BASE:1.20
	OPENBSD_3_6:1.16.0.2
	OPENBSD_3_6_BASE:1.16
	OPENBSD_3_5:1.15.0.2
	OPENBSD_3_5_BASE:1.15
	OPENBSD_3_4:1.14.0.2
	OPENBSD_3_4_BASE:1.14
	OPENBSD_3_3:1.10.0.2
	OPENBSD_3_3_BASE:1.10
	OPENBSD_3_2:1.6.0.6
	OPENBSD_3_2_BASE:1.6
	OPENBSD_3_1:1.6.0.4
	OPENBSD_3_1_BASE:1.6
	OPENBSD_3_0:1.6.0.2
	OPENBSD_3_0_BASE:1.6
	OPENBSD_2_9_BASE:1.5
	OPENBSD_2_9:1.5.0.6
	OPENBSD_2_8:1.5.0.4
	OPENBSD_2_8_BASE:1.5
	OPENBSD_2_7:1.5.0.2
	OPENBSD_2_7_BASE:1.5
	OPENBSD_2_6:1.4.0.4
	OPENBSD_2_6_BASE:1.4
	OPENBSD_2_5:1.4.0.2
	OPENBSD_2_5_BASE:1.4
	OPENBSD_2_4:1.3.0.8
	OPENBSD_2_4_BASE:1.3
	OPENBSD_2_3:1.3.0.6
	OPENBSD_2_3_BASE:1.3
	OPENBSD_2_2:1.3.0.4
	OPENBSD_2_2_BASE:1.3
	OPENBSD_2_1:1.3.0.2
	OPENBSD_2_1_BASE:1.3
	OPENBSD_2_0:1.2.0.2
	OPENBSD_2_0_BASE:1.2
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.38
date	2017.05.29.13.30.35;	author tedu;	state Exp;
branches;
next	1.37;
commitid	sYyd3aM3s9MxYCDs;

1.37
date	2016.04.25.19.18.41;	author tedu;	state Exp;
branches;
next	1.36;
commitid	gkGRXuaZYSQDVf3h;

1.36
date	2016.03.13.11.37.42;	author natano;	state Exp;
branches;
next	1.35;
commitid	uFzKUFDHQcf1OC9x;

1.35
date	2016.01.05.19.41.15;	author robert;	state Exp;
branches;
next	1.34;
commitid	16p7eSLI1GEptquC;

1.34
date	2014.08.20.11.23.42;	author mikeb;	state Exp;
branches;
next	1.33;
commitid	vzc4wz1s3pDevb7K;

1.33
date	2014.07.11.13.08.03;	author deraadt;	state Exp;
branches;
next	1.32;
commitid	RKml0vZKchkAAlSy;

1.32
date	2014.03.18.09.11.31;	author kettenis;	state Exp;
branches;
next	1.31;

1.31
date	2013.12.13.19.59.03;	author naddy;	state Exp;
branches;
next	1.30;

1.30
date	2013.11.22.07.50.36;	author mpi;	state Exp;
branches;
next	1.29;

1.29
date	2013.07.16.00.41.03;	author guenther;	state Exp;
branches;
next	1.28;

1.28
date	2013.03.15.09.10.52;	author ratchov;	state Exp;
branches;
next	1.27;

1.27
date	2011.10.06.21.16.01;	author deraadt;	state Exp;
branches;
next	1.26;

1.26
date	2011.10.06.20.49.28;	author deraadt;	state Exp;
branches;
next	1.25;

1.25
date	2011.06.25.19.00.41;	author deraadt;	state Exp;
branches;
next	1.24;

1.24
date	2011.06.23.20.51.20;	author matthew;	state Exp;
branches;
next	1.23;

1.23
date	2010.12.29.17.51.48;	author deraadt;	state Exp;
branches;
next	1.22;

1.22
date	2007.06.02.15.14.36;	author deraadt;	state Exp;
branches;
next	1.21;

1.21
date	2005.07.31.10.11.19;	author deraadt;	state Exp;
branches;
next	1.20;

1.20
date	2004.12.14.13.45.09;	author mickey;	state Exp;
branches;
next	1.19;

1.19
date	2004.12.14.02.05.00;	author mickey;	state Exp;
branches;
next	1.18;

1.18
date	2004.12.12.17.06.51;	author naddy;	state Exp;
branches;
next	1.17;

1.17
date	2004.11.24.18.11.15;	author fgsch;	state Exp;
branches;
next	1.16;

1.16
date	2004.06.07.20.36.07;	author mickey;	state Exp;
branches;
next	1.15;

1.15
date	2004.01.09.17.10.07;	author brad;	state Exp;
branches;
next	1.14;

1.14
date	2003.07.02.20.54.17;	author deraadt;	state Exp;
branches;
next	1.13;

1.13
date	2003.06.26.21.44.26;	author deraadt;	state Exp;
branches;
next	1.12;

1.12
date	2003.06.23.16.53.06;	author mickey;	state Exp;
branches;
next	1.11;

1.11
date	2003.06.03.02.56.09;	author millert;	state Exp;
branches;
next	1.10;

1.10
date	2002.12.04.17.41.00;	author mickey;	state Exp;
branches;
next	1.9;

1.9
date	2002.11.26.18.26.04;	author mickey;	state Exp;
branches;
next	1.8;

1.8
date	2002.11.26.13.45.17;	author mickey;	state Exp;
branches;
next	1.7;

1.7
date	2002.10.17.15.14.57;	author jason;	state Exp;
branches;
next	1.6;

1.6
date	2001.08.18.00.48.57;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	99.12.28.06.02.34;	author angelos;	state Exp;
branches;
next	1.4;

1.4
date	99.02.26.17.01.33;	author jason;	state Exp;
branches;
next	1.3;

1.3
date	97.04.16.04.26.20;	author millert;	state Exp;
branches;
next	1.2;

1.2
date	96.06.26.05.34.44;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.45.27;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.45.27;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.38
log
@zap scanio.h, found by deraadt
@
text
@#!/bin/sh -
#	$OpenBSD: mkioctls,v 1.37 2016/04/25 19:18:41 tedu Exp $

#
# Copyright (c) 1994
#	The Regents of the University of California.  All rights reserved.
#
# Redistribution and use in source and binary forms, with or without
# modification, are permitted provided that the following conditions
# are met:
# 1. Redistributions of source code must retain the above copyright
#    notice, this list of conditions and the following disclaimer.
# 2. Redistributions in binary form must reproduce the above copyright
#    notice, this list of conditions and the following disclaimer in the
#    documentation and/or other materials provided with the distribution.
# 3. Neither the name of the University nor the names of its contributors
#    may be used to endorse or promote products derived from this software
#    without specific prior written permission.
#
# THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
# ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
# IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
# ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
# FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
# DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
# OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
# HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
# LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
# OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
# SUCH DAMAGE.
#
#	@@(#)mkioctls	8.2 (Berkeley) 4/28/95
#
${CC:-cc} -E -dM ${1+"$@@"} | awk '
BEGIN {
	print "#include <sys/param.h>"
	print "#include <sys/socket.h>"
	print "#include <sys/socketvar.h>"
	print "#include <miscfs/fuse/fusefs.h>"
	print "#include <net/route.h>"
	print "#include <net/if.h>"
	print "#include <net/bpf.h>"
	print "#include <netinet/in.h>"
	print "#include <netinet/ip_mroute.h>"
	print "#include <netinet/if_ether.h>"
	print "#include <netinet6/in6_var.h>"
	print "#include <netinet6/nd6.h>"
	print "#include <netinet6/ip6_mroute.h>"
	print "#include <net/if_bridge.h>"
	print "#include <sys/termios.h>"
	print "#include <netinet/ip_ipsp.h>"
	print "#include <net/if_enc.h>"
	print "#include <net80211/ieee80211.h>"
	print "#include <net80211/ieee80211_ioctl.h>"
	print "#include <net/ppp_defs.h>"
	print "#include <net/if_ppp.h>"
	print "#include <net/if_pppoe.h>"
	print "#include <net/if_trunk.h>"
	print "#include <net/if_tun.h>"
	print "#include <net/pfvar.h>"
	print "#include <net/pipex.h>"
	print "#include <sys/disklabel.h>"
	print "#include <sys/ataio.h>"
	print "#include <sys/audioio.h>"
	print "#include <sys/cdio.h>"
	print "#include <sys/chio.h>"
	print "#include <sys/disk.h>"
	print "#include <sys/dkbad.h>"
	print "#include <sys/dkio.h>"
	print "#include <sys/filio.h>"
	print "#include <sys/gpio.h>"
	print "#include <sys/memrange.h>"
	print "#include <sys/mtio.h>"
	print "#include <sys/pciio.h>"
	print "#include <sys/radioio.h>"
	print "#include <sys/scsiio.h>"
	print "#include <sys/tty.h>"
	print "#include <sys/syslog.h>"
	print "#include <sys/videoio.h>"
	print "#include <dev/biovar.h>"
	print "#include <dev/ipmi.h>"
	print "#include <dev/wscons/wsconsio.h>"
	print "#include <dev/vndioctl.h>"
	print "#include <scsi/scsi_all.h>"
	print "#include <dev/vscsivar.h>"
	print "#include <dev/pci/drm/i915_drm.h>"
	print "#include <dev/pv/pvvar.h>"
	print "#include <dev/usb/udlio.h>"
	print "#include <dev/usb/usb.h>"
	print "#include <sys/ioctl.h>"
	print "#include \"kdump.h\""
	print ""
	print "struct drm_i915_gem_execbuffer {};"
	print ""
	print "const char *"
	print "ioctlname(unsigned long val)"
	print "{"
	print "\tswitch (val) {"
	print ""
}

/^[ 	]*#[ 	]*define[ 	]+(ATAIO|AUDIO_|BIOC|CDIO|CHIO|DIOC|DRM|GPIO|IPMICTL|TIO|FIO|MEMRANGE|MTIOC|LIOC|SIO|OSIO|SESIOC_|SIOC|PCIOC|PIPEX|PPPIOC|PPPOE|PVBUSIOC|RIOC|RND|STRIOC|SCIOC|OSCIOC|TUN|UDLIO|USB|VIDIOC|VNDIOC|VSCSI|WSKBD|WSMOUSE|WSDISPLAY|WSMUX|PTM)[A-Z_0-9]*[ 	]+(DRM)?_IO/ {

	# find where the name starts
	for (i = 1; i <= NF; i++)
		if ($i ~ /define/)
			break;
	++i;
	ioc[$i] = 0;
}

END {
	for(i in ioc)
		printf("\tcase %s:\t\treturn (\"%s\");\n", i, i);
	print "\tdefault:\t\treturn (NULL);\n\t}"
	print "}"
}
'
@


1.37
log
@remove systrace support
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.36 2016/03/13 11:37:42 natano Exp $
a75 1
	print "#include <sys/scanio.h>"
@


1.36
log
@Recognize ipmi, vscsi, pvbus, udl, fuse, trunk, pipex and memrange
ioctl requests.
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.35 2016/01/05 19:41:15 robert Exp $
a82 1
	print "#include <dev/systrace.h>"
@


1.35
log
@include all i915 drm ioctls on top of the common drm ones

ok deraadt@@, kettenos@@, guenther@@
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.34 2014/08/20 11:23:42 mikeb Exp $
d39 1
d58 1
d61 1
d72 1
d82 1
d86 2
d89 2
d104 1
a104 1
/^[ 	]*#[ 	]*define[ 	]+(ATAIO|AUDIO_|BIOC|CDIO|CHIO|DIOC|DRM|GPIO|TIO|FIO|MTIOC|LIOC|SIO|OSIO|SESIOC_|SIOC|PCIOC|PPPIOC|PPPOE|RIOC|RND|STRIOC|SCIOC|OSCIOC|TUN|USB|VIDIOC|VNDIOC|WSKBD|WSMOUSE|WSDISPLAY|WSMUX|PTM)[A-Z_0-9]*[ 	]+(DRM)?_IO/ {
@


1.34
log
@Remove userland bits related to the crypto(4) interface;  ok deraadt
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.33 2014/07/11 13:08:03 deraadt Exp $
d81 1
a81 1
	print "#include <dev/pci/drm/drm.h>"
d85 2
@


1.33
log
@Grok the new /dev/klog LIOCSFD ioctl associated with sendsyslog(2)
ok matthew guenther miod tedu
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.32 2014/03/18 09:11:31 kettenis Exp $
a76 1
	print "#include <crypto/cryptodev.h>"
d93 1
a93 1
/^[ 	]*#[ 	]*define[ 	]+(ATAIO|AUDIO_|BIOC|CDIO|CIOC|CHIO|DIOC|DRM|GPIO|TIO|FIO|MTIOC|LIOC|SIO|OSIO|SESIOC_|SIOC|PCIOC|PPPIOC|PPPOE|RIOC|RND|STRIOC|SCIOC|OSCIOC|TUN|USB|VIDIOC|VNDIOC|WSKBD|WSMOUSE|WSDISPLAY|WSMUX|PTM)[A-Z_0-9]*[ 	]+(DRM)?_IO/ {
@


1.32
log
@<sys/agpio.h> is gone; pointed out by Benoit Lecocq.
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.31 2013/12/13 19:59:03 naddy Exp $
d75 1
d94 1
a94 1
/^[ 	]*#[ 	]*define[ 	]+(ATAIO|AUDIO_|BIOC|CDIO|CIOC|CHIO|DIOC|DRM|GPIO|TIO|FIO|MTIOC|SIO|OSIO|SESIOC_|SIOC|PCIOC|PPPIOC|PPPOE|RIOC|RND|STRIOC|SCIOC|OSCIOC|TUN|USB|VIDIOC|VNDIOC|WSKBD|WSMOUSE|WSDISPLAY|WSMUX|PTM)[A-Z_0-9]*[ 	]+(DRM)?_IO/ {
@


1.31
log
@4.3BSD tty compatibility and the associated ioctls are gone
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.30 2013/11/22 07:50:36 mpi Exp $
a59 1
	print "#include <sys/agpio.h>"
d93 1
a93 1
/^[ 	]*#[ 	]*define[ 	]+(AGPIOC_|ATAIO|AUDIO_|BIOC|CDIO|CIOC|CHIO|DIOC|DRM|GPIO|TIO|FIO|MTIOC|SIO|OSIO|SESIOC_|SIOC|PCIOC|PPPIOC|PPPOE|RIOC|RND|STRIOC|SCIOC|OSCIOC|TUN|USB|VIDIOC|VNDIOC|WSKBD|WSMOUSE|WSDISPLAY|WSMUX|PTM)[A-Z_0-9]*[ 	]+(DRM)?_IO/ {
@


1.30
log
@Teach kdump(1) about USB, VIDIOC and generic DRM ioctls.

ok deraadt@@, guenther@@
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.29 2013/07/16 00:41:03 guenther Exp $
a83 1
	print "#define COMPAT_43"
@


1.29
log
@Tighten the pattern for matching ioctl definitions in header files and
recognize the PTMGET ioctl()

ok millert@@
(earlier version ok otto@@)
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.28 2013/03/15 09:10:52 ratchov Exp $
d76 1
d82 2
d95 1
a95 1
/^[ 	]*#[ 	]*define[ 	]+(AGPIOC_|ATAIO|AUDIO_|BIOC|CDIO|CIOC|CHIO|DIOC|GPIO|TIO|FIO|MTIOC|SIO|OSIO|SESIOC_|SIOC|PCIOC|PPPIOC|PPPOE|RIOC|RND|STRIOC|SCIOC|OSCIOC|TUN|VNDIOC|WSKBD|WSMOUSE|WSDISPLAY|WSMUX|PTM)[A-Z_0-9]*[ 	]+_IO/ {
@


1.28
log
@Delete the sequencer(4) driver, since its not used any longer. Diff
mostly from armani.
ok miod, mpi, jsg and help from sthen
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.27 2011/10/06 21:16:01 deraadt Exp $
d75 1
d92 1
a92 1
/^#[ 	]*define[ 	]*(AGPIOC_|ATAIO|AUDIO_|BIOC|CDIO|CIOC|CHIO|DIOC|GPIO|TIO|FIO|MTIOC|SIO|OSIO|SESIOC_|SIOC|PCIOC|PPPIOC|PPPOE|RIOC|RND|STRIOC|SCIOC|OSCIOC|TUN|VNDIOC|WSKBD|WSMOUSE|WSDISPLAY|WSMUX)[A-Z_0-9]*[ 	]*_IO/ {
@


1.27
log
@mark ccd(4) deprecated in a few more places
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.26 2011/10/06 20:49:28 deraadt Exp $
a69 1
	print "#include <sys/midiio.h>"
d91 1
a91 1
/^#[ 	]*define[ 	]*(AGPIOC_|ATAIO|AUDIO_|BIOC|CDIO|CIOC|CHIO|DIOC|MIDI_|GPIO|SEQUENCER_|TIO|FIO|MTIOC|SIO|OSIO|SESIOC_|SIOC|PCIOC|PPPIOC|PPPOE|RIOC|RND|STRIOC|SCIOC|OSCIOC|TUN|VNDIOC|WSKBD|WSMOUSE|WSDISPLAY|WSMUX)[A-Z_0-9]*[ 	]*_IO/ {
@


1.26
log
@ccd goes to the attic
discussed with jsing and millert
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.25 2011/06/25 19:00:41 deraadt Exp $
d92 1
a92 1
/^#[ 	]*define[ 	]*(AGPIOC_|ATAIO|AUDIO_|BIOC|CCDIOC|CDIO|CIOC|CHIO|DIOC|MIDI_|GPIO|SEQUENCER_|TIO|FIO|MTIOC|SIO|OSIO|SESIOC_|SIOC|PCIOC|PPPIOC|PPPOE|RIOC|RND|STRIOC|SCIOC|OSCIOC|TUN|VNDIOC|WSKBD|WSMOUSE|WSDISPLAY|WSMUX)[A-Z_0-9]*[ 	]*_IO/ {
@


1.25
log
@DESTDIR handling does not belong here.  This is built live.
ok otto
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.24 2011/06/23 20:51:20 matthew Exp $
a77 1
	print "#include <dev/ccdvar.h>"
@


1.24
log
@Don't check dev/ramdisk.h for ioctl(2) commands as it doesn't exist
anymore.

Noticed by and ok claudio@@
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.23 2010/12/29 17:51:48 deraadt Exp $
d34 1
a34 1
${CC:-cc} -E -nostdinc -idirafter $DESTDIR/usr/include -dM ${1+"$@@"} | awk '
@


1.23
log
@the random ioctl stuff is not very useful.  I want to see all the
non-essential parts of rnd.c removed so that we can keep our eye on
what the code should be doing.
ok tedu who had a similar diff in the past
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.22 2007/06/02 15:14:36 deraadt Exp $
a78 1
	print "#include <dev/ramdisk.h>"
d93 1
a93 1
/^#[ 	]*define[ 	]*(AGPIOC_|ATAIO|AUDIO_|BIOC|CCDIOC|CDIO|CIOC|CHIO|DIOC|MIDI_|GPIO|SEQUENCER_|TIO|FIO|MTIOC|SIO|OSIO|SESIOC_|SIOC|PCIOC|PPPIOC|PPPOE|RD_|RIOC|RND|STRIOC|SCIOC|OSCIOC|TUN|VNDIOC|WSKBD|WSMOUSE|WSDISPLAY|WSMUX)[A-Z_0-9]*[ 	]*_IO/ {
@


1.22
log
@knock out FIBMAP (which we got rid of)
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.21 2005/07/31 10:11:19 deraadt Exp $
a79 1
	print "#include <dev/rndioctl.h>"
@


1.21
log
@scsi/ses.h goes away
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.20 2004/12/14 13:45:09 mickey Exp $
d95 1
a95 1
/^#[ 	]*define[ 	]*(AGPIOC_|ATAIO|AUDIO_|BIOC|CCDIOC|CDIO|CIOC|CHIO|DIOC|MIDI_|GPIO|SEQUENCER_|TIO|FIO|FIBMAP|MTIOC|SIO|OSIO|SESIOC_|SIOC|PCIOC|PPPIOC|PPPOE|RD_|RIOC|RND|STRIOC|SCIOC|OSCIOC|TUN|VNDIOC|WSKBD|WSMOUSE|WSDISPLAY|WSMUX)[A-Z_0-9]*[ 	]*_IO/ {
@


1.20
log
@no need for pfsync.h here
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.19 2004/12/14 02:05:00 mickey Exp $
a83 1
	print "#include <scsi/ses.h>"
@


1.19
log
@no need to look into ip_carp.h anymore
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.18 2004/12/12 17:06:51 naddy Exp $
a48 1
	print "#include <net/if_pfsync.h>"
@


1.18
log
@pick up missing ioctls for ieee80211, carp, pfsync, and pppoe; ok fgsch@@
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.17 2004/11/24 18:11:15 fgsch Exp $
a50 1
	print "#include <netinet/ip_carp.h>"
@


1.17
log
@replace old net/if_ieee80211.h header with the net80211 ones, userland part.
millert@@ mcbride@@ jsg@@
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.16 2004/06/07 20:36:07 mickey Exp $
d49 1
d51 1
d55 1
d58 1
a58 1
	print "#include <net/if_pppvar.h>"
d98 1
a98 1
/^#[ 	]*define[ 	]*(AGPIOC_|ATAIO|AUDIO_|BIOC|CCDIOC|CDIO|CIOC|CHIO|DIOC|MIDI_|GPIO|SEQUENCER_|TIO|FIO|FIBMAP|MTIOC|SIO|OSIO|SESIOC_|SIOC|PCIOC|PPPIOC|RD_|RIOC|RND|STRIOC|SCIOC|OSCIOC|TUN|VNDIOC|WSKBD|WSMOUSE|WSDISPLAY|WSMUX)[A-Z_0-9]*[ 	]*_IO/ {
@


1.16
log
@dig gpio ioctls
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.15 2004/01/09 17:10:07 brad Exp $
d52 1
a52 1
	print "#include <net/if_ieee80211.h>"
@


1.15
log
@use cc -E for the preprocessor instead of cpp.

ok espie@@ millert@@
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.14 2003/07/02 20:54:17 deraadt Exp $
d68 1
d95 1
a95 1
/^#[ 	]*define[ 	]*(AGPIOC_|ATAIO|AUDIO_|BIOC|CCDIOC|CDIO|CIOC|CHIO|DIOC|MIDI_|SEQUENCER_|TIO|FIO|FIBMAP|MTIOC|SIO|OSIO|SESIOC_|SIOC|PCIOC|PPPIOC|RD_|RIOC|RND|STRIOC|SCIOC|OSCIOC|TUN|VNDIOC|WSKBD|WSMOUSE|WSDISPLAY|WSMUX)[A-Z_0-9]*[ 	]*_IO/ {
@


1.14
log
@ioctlname() proto
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.13 2003/06/26 21:44:26 deraadt Exp $
d34 1
a34 1
cpp -nostdinc -idirafter $DESTDIR/usr/include -dM ${1+"$@@"} | awk '
@


1.13
log
@change awk script to generate ansi code
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.12 2003/06/23 16:53:06 mickey Exp $
d85 1
@


1.12
log
@grok more of the dev/ and net*/ and crypto/ ioctls
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.11 2003/06/03 02:56:09 millert Exp $
d87 1
a87 2
	print "ioctlname(val)"
	print "\tunsigned long val;"
@


1.11
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.10 2002/12/04 17:41:00 mickey Exp $
d41 1
d45 3
d52 6
d59 1
d64 1
d74 6
d81 2
a82 1
	print "#include <dev/systrace.h>"
d94 2
a95 2
/^#[ 	]*define[ 	]*(ATAIO|AUDIO_|CDIO|CHIO|DIOC|MIDI_|SEQUENCER_|TIO|FIO|FIBMAP|MTIOC|SIO|OSIO|PCIOC|RIOC|STRIOC|SCIOC|OSCIOC|WSKBD|WSMOUSE|WSDISPLAY|WSMUX)[A-Z]*[ 	]*_IO/ {
	
@


1.10
log
@grok systrace ioctl names
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.9 2002/11/26 18:26:04 mickey Exp $
d16 1
a16 5
# 3. All advertising materials mentioning features or use of this software
#    must display the following acknowledgement:
#	This product includes software developed by the University of
#	California, Berkeley and its contributors.
# 4. Neither the name of the University nor the names of its contributors
@


1.9
log
@i've comitted from the wrong tree the previous, needs dkbad
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.8 2002/11/26 13:45:17 mickey Exp $
d67 1
d79 1
a79 1
/^#[ 	]*define[ 	]*(ATAIO|AUDIO_|CDIO|CHIO|DIOC|MIDI_|SEQUENCER_|TIO|FIO|FIBMAP|MTIOC|SIO|OSIO|PCIOC|RIOC|SCIOC|OSCIOC|WSKBD|WSMOUSE|WSDISPLAY|WSMUX)[A-Z]*[ 	]*_IO/ {
@


1.8
log
@parse all the usefull files in sys for ioctls, change if() return to a switch(), makes it much smaller on most architectures
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.7 2002/10/17 15:14:57 jason Exp $
d57 1
@


1.7
log
@Add support for printing the AUDIO_* ioctls, too.
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.6 2001/08/18 00:48:57 espie Exp $
d52 2
d55 11
d73 1
d77 1
a77 1
/^#[ 	]*define[ 	]*(TIO|FIO|SIO|OSIO)[A-Z]*[ 	]*_IO/ {
d84 1
a84 14
	# 
	printf("\tif (val == %s)\n\t\treturn (\"%s\");\n", $i, $i);

}

/^#[ 	]*define[ 	]*(AUDIO_)[A-Z]*[ 	]*_IO/ {
	
	# find where the name starts
	for (i = 1; i <= NF; i++)
		if ($i ~ /define/)
			break;
	++i;
	# 
	printf("\tif (val == %s)\n\t\treturn (\"%s\");\n", $i, $i);
d88 3
a90 1
	print "\n\treturn (NULL);"
@


1.6
log
@Add lots of missing prototypes, constify a few things. Add explicit ints.
Makes gcc much happier, less warnings.
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.5 1999/12/28 06:02:34 angelos Exp $
d52 1
d74 12
@


1.5
log
@Add necessary include files.
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.4 1999/02/26 17:01:33 jason Exp $
d55 1
a55 1
	print "char *"
d57 1
a57 1
	print "\tlong val;"
@


1.4
log
@Ethernet bridge/IP firewall driver.
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.3 1997/04/16 04:26:20 millert Exp $
d50 2
@


1.3
log
@Make mkioctls obey the DESTDIR environment variable.
From NetBSD (leo).
@
text
@d2 1
a2 1
#	$OpenBSD: mkioctls,v 1.2 1996/06/26 05:34:44 deraadt Exp $
d47 2
@


1.2
log
@rcsid
@
text
@d2 1
a2 1
#	$OpenBSD$
d38 1
a38 1
cpp -dM ${1+"$@@"} | awk '
@


1.1
log
@Initial revision
@
text
@d2 2
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
