head	1.31;
access;
symbols
	OPENBSD_6_2:1.31.0.8
	OPENBSD_6_2_BASE:1.31
	OPENBSD_6_1:1.31.0.10
	OPENBSD_6_1_BASE:1.31
	OPENBSD_6_0:1.31.0.6
	OPENBSD_6_0_BASE:1.31
	OPENBSD_5_9:1.31.0.2
	OPENBSD_5_9_BASE:1.31
	OPENBSD_5_8:1.31.0.4
	OPENBSD_5_8_BASE:1.31
	OPENBSD_5_7:1.30.0.2
	OPENBSD_5_7_BASE:1.30
	OPENBSD_5_6:1.30.0.4
	OPENBSD_5_6_BASE:1.30
	OPENBSD_5_5:1.28.0.16
	OPENBSD_5_5_BASE:1.28
	OPENBSD_5_4:1.28.0.12
	OPENBSD_5_4_BASE:1.28
	OPENBSD_5_3:1.28.0.10
	OPENBSD_5_3_BASE:1.28
	OPENBSD_5_2:1.28.0.8
	OPENBSD_5_2_BASE:1.28
	OPENBSD_5_1_BASE:1.28
	OPENBSD_5_1:1.28.0.6
	OPENBSD_5_0:1.28.0.4
	OPENBSD_5_0_BASE:1.28
	OPENBSD_4_9:1.28.0.2
	OPENBSD_4_9_BASE:1.28
	OPENBSD_4_8:1.24.0.14
	OPENBSD_4_8_BASE:1.24
	OPENBSD_4_7:1.24.0.10
	OPENBSD_4_7_BASE:1.24
	OPENBSD_4_6:1.24.0.12
	OPENBSD_4_6_BASE:1.24
	OPENBSD_4_5:1.24.0.8
	OPENBSD_4_5_BASE:1.24
	OPENBSD_4_4:1.24.0.6
	OPENBSD_4_4_BASE:1.24
	OPENBSD_4_3:1.24.0.4
	OPENBSD_4_3_BASE:1.24
	OPENBSD_4_2:1.24.0.2
	OPENBSD_4_2_BASE:1.24
	OPENBSD_4_1:1.23.0.8
	OPENBSD_4_1_BASE:1.23
	OPENBSD_4_0:1.23.0.6
	OPENBSD_4_0_BASE:1.23
	OPENBSD_3_9:1.23.0.4
	OPENBSD_3_9_BASE:1.23
	OPENBSD_3_8:1.23.0.2
	OPENBSD_3_8_BASE:1.23
	OPENBSD_3_7:1.21.0.2
	OPENBSD_3_7_BASE:1.21
	OPENBSD_3_6:1.20.0.6
	OPENBSD_3_6_BASE:1.20
	OPENBSD_3_5:1.20.0.4
	OPENBSD_3_5_BASE:1.20
	OPENBSD_3_4:1.20.0.2
	OPENBSD_3_4_BASE:1.20
	OPENBSD_3_3:1.17.0.2
	OPENBSD_3_3_BASE:1.17
	OPENBSD_3_2:1.15.0.4
	OPENBSD_3_2_BASE:1.15
	OPENBSD_3_1:1.15.0.2
	OPENBSD_3_1_BASE:1.15
	OPENBSD_3_0:1.13.0.2
	OPENBSD_3_0_BASE:1.13
	OPENBSD_2_9_BASE:1.10
	OPENBSD_2_9:1.10.0.4
	OPENBSD_2_8:1.10.0.2
	OPENBSD_2_8_BASE:1.10
	OPENBSD_2_7:1.9.0.2
	OPENBSD_2_7_BASE:1.9
	OPENBSD_2_6:1.8.0.2
	OPENBSD_2_6_BASE:1.8
	OPENBSD_2_5:1.7.0.4
	OPENBSD_2_5_BASE:1.7
	OPENBSD_2_4:1.7.0.2
	OPENBSD_2_4_BASE:1.7
	OPENBSD_2_3:1.6.0.4
	OPENBSD_2_3_BASE:1.6
	OPENBSD_2_2:1.6.0.2
	OPENBSD_2_2_BASE:1.6
	OPENBSD_2_1:1.5.0.2
	OPENBSD_2_1_BASE:1.5
	OPENBSD_2_0:1.3.0.2
	OPENBSD_2_0_BASE:1.3
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@.\" @;


1.31
date	2015.07.30.08.03.49;	author jmc;	state Exp;
branches;
next	1.30;
commitid	jvvdSOl8gxNBg4aJ;

1.30
date	2014.04.24.14.14.08;	author jmc;	state Exp;
branches;
next	1.29;

1.29
date	2014.04.22.12.53.48;	author henning;	state Exp;
branches;
next	1.28;

1.28
date	2010.12.10.19.32.21;	author millert;	state Exp;
branches;
next	1.27;

1.27
date	2010.12.10.19.29.52;	author millert;	state Exp;
branches;
next	1.26;

1.26
date	2010.12.09.22.34.04;	author sobrado;	state Exp;
branches;
next	1.25;

1.25
date	2010.12.09.15.45.30;	author millert;	state Exp;
branches;
next	1.24;

1.24
date	2007.05.31.19.20.17;	author jmc;	state Exp;
branches;
next	1.23;

1.23
date	2005.04.18.21.23.24;	author jmc;	state Exp;
branches;
next	1.22;

1.22
date	2005.04.18.21.13.36;	author jmc;	state Exp;
branches;
next	1.21;

1.21
date	2005.01.22.16.29.40;	author jmc;	state Exp;
branches;
next	1.20;

1.20
date	2003.07.25.09.37.45;	author jmc;	state Exp;
branches;
next	1.19;

1.19
date	2003.06.10.09.12.12;	author jmc;	state Exp;
branches;
next	1.18;

1.18
date	2003.06.03.02.56.17;	author millert;	state Exp;
branches;
next	1.17;

1.17
date	2002.11.14.02.57.28;	author deraadt;	state Exp;
branches;
next	1.16;

1.16
date	2002.10.16.01.06.32;	author millert;	state Exp;
branches;
next	1.15;

1.15
date	2002.03.27.20.29.38;	author millert;	state Exp;
branches;
next	1.14;

1.14
date	2002.02.17.23.59.20;	author millert;	state Exp;
branches;
next	1.13;

1.13
date	2001.08.26.19.11.45;	author heko;	state Exp;
branches;
next	1.12;

1.12
date	2001.05.29.21.40.36;	author millert;	state Exp;
branches;
next	1.11;

1.11
date	2001.05.01.17.58.04;	author aaron;	state Exp;
branches;
next	1.10;

1.10
date	2000.08.20.18.42.41;	author millert;	state Exp;
branches;
next	1.9;

1.9
date	2000.03.11.21.40.03;	author aaron;	state Exp;
branches;
next	1.8;

1.8
date	99.06.05.01.21.41;	author aaron;	state Exp;
branches;
next	1.7;

1.7
date	98.09.27.16.57.54;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	97.09.04.08.16.22;	author provos;	state Exp;
branches;
next	1.5;

1.5
date	96.10.26.03.19.30;	author millert;	state Exp;
branches;
next	1.4;

1.4
date	96.10.12.20.40.38;	author millert;	state Exp;
branches;
next	1.3;

1.3
date	96.06.26.05.39.34;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	96.01.07.09.51.21;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.46.09;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.46.09;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.31
log
@switch references from sudo to doas;
ok deraadt
@
text
@.\"	$OpenBSD: su.1,v 1.30 2014/04/24 14:14:08 jmc Exp $
.\"
.\" Copyright (c) 1988, 1990 The Regents of the University of California.
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"	from: @@(#)su.1	6.12 (Berkeley) 7/29/91
.\"
.Dd $Mdocdate: April 24 2014 $
.Dt SU 1
.Os
.Sh NAME
.Nm su
.Nd substitute user identity
.Sh SYNOPSIS
.Nm su
.Bk -words
.Op Fl fKLlm
.Op Fl a Ar auth-type
.Op Fl c Ar login-class
.Op Fl s Ar login-shell
.Op Ar login Op Ar "shell arguments"
.Ek
.Sh DESCRIPTION
The
.Nm
utility allows a user to run a shell with the user and group ID of another user
without having to log out and in as that other user.
.Pp
By default, the environment is unmodified with the exception of
.Ev LOGNAME ,
.Ev HOME ,
.Ev SHELL ,
and
.Ev USER .
.Ev HOME
and
.Ev SHELL
are set to the target login's default values.
.Ev LOGNAME
and
.Ev USER
are set to the target login, unless the target login has a user ID of 0
and the
.Fl l
flag was not specified,
in which case it is unmodified.
The invoked shell is the target login's.
This is the traditional behavior of
.Nm su .
.Pp
If not using
.Fl m
and the target login has a user ID of 0 then the
.Ev PATH
variable and umask value
(see
.Xr umask 2 )
are always set according to the
.Pa /etc/login.conf
file (see
.Xr login.conf 5 ) .
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl
Same as the
.Fl l
option (deprecated).
.It Fl a Ar auth-type
Specify an authentication type such as
.Dq skey
or
.Dq radius .
.It Fl c Ar login-class
Specify a login class.
You may only override the default class if you're already root.
.It Fl f
If the invoked shell is
.Xr csh 1 ,
this option prevents it from reading the
.Dq Pa .cshrc
file.
.It Fl K
This is shorthand for
.Dq Nm Fl a Ar passwd ,
provided for backwards compatibility.
.It Fl L
Loop until a correct username and password combination is entered,
similar to
.Xr login 1 .
Note that in this mode target
.Ar login
must be specified explicitly, either on the command line or interactively.
Additionally,
.Nm
will prompt for the password even when invoked by root.
.It Fl l
Simulate a full login.
The environment is discarded except for
.Ev HOME ,
.Ev SHELL ,
.Ev PATH ,
.Ev TERM ,
.Ev LOGNAME ,
and
.Ev USER .
.Ev HOME
and
.Ev SHELL
are modified as above.
.Ev LOGNAME
and
.Ev USER
are set to the target login.
.Ev PATH
is set to the value specified by the
.Dq path
entry in
.Xr login.conf 5 .
.Ev TERM
is imported from your current environment.
The invoked shell is the target login's, and
.Nm
will change directory to the target login's home directory.
.It Fl m
Leave the environment unmodified.
The invoked shell is your login shell, and no directory changes are made.
As a security precaution, if the target user's shell is a non-standard
shell (as defined by
.Xr getusershell 3 )
and the caller's real UID is
non-zero,
.Nm
will fail.
.It Fl s Ar login-shell
Specify the path to an alternate login shell.
You may only override the shell if you're already root.
This option will override the shell even if the
.Fl m
option is specified.
.El
.Pp
The
.Fl l
and
.Fl m
options are mutually exclusive; the last one specified
overrides any previous ones.
.Pp
If the optional
.Ar "shell arguments"
are provided on the command line, they are passed to the login shell of
the target login.
This allows it to pass arbitrary commands via the
.Fl c
option as understood by most shells.
Note that
.Fl c
usually expects a single argument only; you have to quote it when
passing multiple words.
.Pp
If group 0 (normally
.Dq wheel )
has users listed then only those users can
.Nm
to
.Dq root .
It is not sufficient to change a user's
.Pa /etc/passwd
entry to add them to the
.Dq wheel
group; they must explicitly be listed in
.Pa /etc/group .
If no one is in the
.Dq wheel
group, it is ignored, and anyone who knows the root password is permitted to
.Nm
to
.Dq root .
.Pp
By default (unless the prompt is reset by a startup file) the superuser
prompt is set to
.Dq Sy \&#
to remind one of its awesome power.
.Sh ENVIRONMENT
.Bl -tag -width LOGNAME
.It Ev HOME
Default home directory of real user ID unless modified as
specified above.
.It Ev LOGNAME
The user ID is always the effective ID (the target user ID) after an
.Nm
unless the user ID is 0 (root).
.It Ev PATH
Default search path of real user ID unless modified as specified above.
.It Ev TERM
Provides terminal type which may be retained for the substituted
user ID.
.It Ev USER
Same as
.Ev LOGNAME .
.El
.Sh EXAMPLES
Run the command
.Dq makewhatis
as user
.Dq bin .
You will be asked for bin's password unless your real UID is 0.
.Pp
.Dl $ su bin -c makewhatis
.Pp
Same as above, but the target command consists of more than a
single word:
.Pp
.Dl $ su bin -c 'makewhatis /usr/local/man'
.Pp
Same as above, but the target command is run with the resource
limits of the login class
.Dq staff .
Note that the first
.Fl c
option applies to
.Nm
while the second is an argument to the shell.
.Pp
.Dl $ su -c staff bin -c 'makewhatis /usr/local/man'
.Pp
Pretend a login for user
.Dq foo :
.Pp
.Dl $ su -l foo
.Pp
Same as above, but use S/Key for authentication:
.Pp
.Dl $ su -a skey -l foo
.Sh SEE ALSO
.Xr doas 1 ,
.Xr login 1 ,
.Xr setusercontext 3 ,
.Xr group 5 ,
.Xr login.conf 5 ,
.Xr passwd 5 ,
.Xr environ 7
.Sh HISTORY
A
.Nm
command appeared in
.At v7 .
.Sh BUGS
The login name is not optional for root if there are shell arguments.
@


1.30
log
@remove kerberos reference, and knock some fairly useless Xr out;
@
text
@d1 1
a1 1
.\"	$OpenBSD: su.1,v 1.29 2014/04/22 12:53:48 henning Exp $
d32 1
a32 1
.Dd $Mdocdate: April 22 2014 $
d261 1
d267 1
a267 2
.Xr environ 7 ,
.Xr sudo 8
@


1.29
log
@no more kerb, ok kettenis
@
text
@d1 1
a1 1
.\"	$OpenBSD: su.1,v 1.27 2010/12/10 19:29:52 millert Exp $
d32 1
a32 1
.Dd $Mdocdate: December 10 2010 $
d95 1
a95 2
.Dq skey ,
.Dq securid ,
d97 1
a97 1
.Dq krb5 .
a260 2
.Xr csh 1 ,
.Xr kinit 1 ,
a261 2
.Xr sh 1 ,
.Xr skey 1 ,
@


1.28
log
@It is user/root not user.root for kerberos 5.
@
text
@a52 22
If Kerberos is in use, the password for
.Ar login
(or for
.Dq Ar login Ns /root ,
if no login is provided) is requested, and
.Nm
switches to
that user and group ID after obtaining a Kerberos ticket granting access.
A shell is then executed, and any additional
.Ar "shell arguments"
after the login name
are passed to the shell.
If Kerberos is not configured or if there is a Kerberos error,
.Nm
falls back to local password authentication to validate the password for
.Ar login .
If
.Nm
is executed by root, no password is requested and a shell
with the appropriate user ID is executed; no additional Kerberos tickets
are obtained.
.Pp
a108 1
Do not attempt to use Kerberos to authenticate the user.
@


1.27
log
@Try to make this a little less kerberos-centric and remove a BUGS
entry now that we have the -s option.  OK jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: su.1,v 1.26 2010/12/09 22:34:04 sobrado Exp $
d32 1
a32 1
.Dd $Mdocdate: December 9 2010 $
d56 1
a56 1
.Dq Ar login Ns .root ,
@


1.26
log
@.Bk/.Ek is required now to keep the output generated from each macro
input line together on one single output line.

ok jmc@@ and millert@@, who also noticed the ugly break.
@
text
@d1 1
a1 1
.\"	$OpenBSD: su.1,v 1.25 2010/12/09 15:45:30 millert Exp $
d48 1
d50 4
a53 1
requests the Kerberos password for
d57 3
a59 1
if no login is provided), and switches to
d65 1
d67 2
a68 3
will resort to the local password file to find the password for
.Ar login
if there is a Kerberos error or if Kerberos is not installed.
d132 3
a301 2
There is no direct way to force a particular shell to be used.
.Pp
@


1.25
log
@Add support for "-s shell" to su(1).  This can be used by the superuser
to run a different shell than what the password database contains.
Based on a diff from robert@@.  OK robert@@ deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: su.1,v 1.24 2007/05/31 19:20:17 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate: May 31 2007 $
d40 1
d46 1
@


1.24
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: su.1,v 1.23 2005/04/18 21:23:24 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate$
d43 1
d172 6
@


1.23
log
@use a standard EXAMPLES format;
also there's no need for a list in here;
@
text
@d1 1
a1 1
.\"	$OpenBSD: su.1,v 1.22 2005/04/18 21:13:36 jmc Exp $
d32 1
a32 1
.Dd July 29, 1991
@


1.22
log
@add an example using both -c login_class and -c shell_arg;

requested by stuart henderson (pr #4178);
ok millert@@ deraadt@@ beck@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: su.1,v 1.21 2005/01/22 16:29:40 jmc Exp $
d234 2
a235 4
.Bl -tag -width 5n -compact
.It Li "$ su bin -c makewhatis"
Runs the command
.Li makewhatis
d237 1
a237 1
.Li bin .
d240 2
a241 1
.It Li "$ su bin -c 'makewhatis /usr/local/man'"
d243 3
a245 1
single word.
a246 1
.It Li "$ su -c staff bin -c 'makewhatis /usr/local/man'"
d256 2
a257 1
.It Li "$ su -l foo"
d259 1
a259 1
.Li foo .
d261 5
a265 3
.It Li "$ su -a skey -l foo"
Same as above, but use S/Key for authentication.
.El
@


1.21
log
@put -K in the right place;
-a and -c take args;
@
text
@d1 1
a1 1
.\"	$OpenBSD: su.1,v 1.20 2003/07/25 09:37:45 jmc Exp $
d245 10
@


1.20
log
@remove obsolete kerberos references;
ok hin@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: su.1,v 1.19 2003/06/10 09:12:12 jmc Exp $
d106 1
a106 1
.It Fl a
d112 1
a112 1
.It Fl c
d121 2
a132 2
.It Fl K
Do not attempt to use Kerberos to authenticate the user.
@


1.19
log
@- section reorder
- COMPATIBILITY merge
- macro cleanup
- kill whitespace at EOL
- new sentence, new line

ssh pages ok markus@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: su.1,v 1.18 2003/06/03 02:56:17 millert Exp $
d111 1
a111 1
.Dq krb4 .
a254 1
.Xr kerberos 1 ,
@


1.18
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
.\"	$OpenBSD: su.1,v 1.17 2002/11/14 02:57:28 deraadt Exp $
d93 1
a93 1
(see 
d215 18
a251 18
.El
.Sh ENVIRONMENT
.Bl -tag -width LOGNAME
.It Ev HOME
Default home directory of real user ID unless modified as
specified above.
.It Ev LOGNAME
The user ID is always the effective ID (the target user ID) after an
.Nm
unless the user ID is 0 (root).
.It Ev PATH
Default search path of real user ID unless modified as specified above.
.It Ev TERM
Provides terminal type which may be retained for the substituted
user ID.
.It Ev USER
Same as
.Ev LOGNAME .
@


1.17
log
@use $ or # before commands in examples
@
text
@d1 1
a1 1
.\"	$OpenBSD: su.1,v 1.16 2002/10/16 01:06:32 millert Exp $
d14 1
a14 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
@


1.16
log
@Add a new flag, -L, to cause su(1) to loop asking for a login/password
repeatedly until the user authenticates or interrupts things.
This will be used to make login(1) no longer setuid.
@
text
@d1 1
a1 1
.\"	$OpenBSD: su.1,v 1.15 2002/03/27 20:29:38 millert Exp $
d221 1
a221 1
.It Li "su bin -c makewhatis"
d228 1
a228 1
.It Li "su bin -c 'makewhatis /usr/local/man'"
d232 1
a232 1
.It Li "su -l foo"
d236 1
a236 1
.It Li "su -a skey -l foo"
@


1.15
log
@We uyse 'krb4', not 'kerberos' for the authentication type.  Also
provide an example for -a usage.  Closes PR 2423.
@
text
@d1 1
a1 1
.\"	$OpenBSD: su.1,v 1.14 2002/02/17 23:59:20 millert Exp $
d44 1
a44 1
.Op Fl fKlm
d125 10
@


1.14
log
@mention that '-' is the deprecated form of '-l'
@
text
@d1 1
a1 1
.\"	$OpenBSD: su.1,v 1.13 2001/08/26 19:11:45 heko Exp $
d115 1
a115 1
.Dq kerberos .
d225 3
@


1.13
log
@su(1) see also: sudo(8) - users coming fron other UNIX environments may
be using su for purposes where sudo would serve better.
Suggested by <allenwc@@home.com>.
Ok millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: su.1,v 1.11 2001/05/01 17:58:04 aaron Exp $
d106 4
@


1.12
log
@add support for BSD authentication
@
text
@d251 2
a252 1
.Xr environ 7
@


1.11
log
@Remove completely redundant introductory sentences in ENVIRONMENT sections.
@
text
@d1 1
a1 1
.\"	$OpenBSD: su.1,v 1.10 2000/08/20 18:42:41 millert Exp $
d44 2
a45 1
.Op Fl Kflm
a69 5
Alternately, if the user enters the password "s/key", they will be
authenticated using the S/Key one-time password system as described in
.Xr skey 1 .
S/Key is a Trademark of Bellcore.
.Pp
a71 1
.Ev USER ,
d73 1
d75 1
a75 1
.Ev SHELL .
d83 4
a86 1
are set to the target login, unless the target login has a user ID of 0,
d92 12
d106 6
a111 2
.It Fl K
Do not attempt to use Kerberos to authenticate the user.
d121 2
d142 4
a145 2
is set to
.Dq Pa /usr/bin:/bin .
d227 4
a235 4
.It Ev LOGNAME
The user ID is always the effective ID (the target user ID) after an
.Nm
unless the user ID is 0 (root).
d257 4
a260 4
The version described
here is an adaptation of the
.Tn MIT
Athena Kerberos command.
@


1.10
log
@Add calls to setusercontext() and login_get*().  We basically call
setusercontext() in most places where previously we did a setlogin().
Add default login.conf file and put root in the "daemon" login class.
@
text
@d1 1
a1 1
.\"	$OpenBSD: su.1,v 1.9 2000/03/11 21:40:03 aaron Exp $
a203 2
The following environment variables affect the execution of
.Nm su :
@


1.9
log
@Various cleanups and standardizations.
@
text
@d1 1
a1 1
.\"	$OpenBSD: su.1,v 1.8 1999/06/05 01:21:41 aaron Exp $
d45 1
d97 3
d230 1
d232 1
@


1.8
log
@- remove trailing white space
- remove arguments from .Os macros
- remove arguments from .Nm macros, where appropriate
- some more Dq/Sq/Ql insanity
- still lots to do in the usr.bin tree... :/
@
text
@d1 2
a2 1
.\"	$OpenBSD: su.1,v 1.7 1998/09/27 16:57:54 aaron Exp $
d150 2
a151 2
the target login.  This allows it to pass arbitrary commands via
the
d153 2
a154 1
option as understood by most shells.  Note that
d178 1
a178 1
By default (unless the prompt is reset by a startup file) the super-user
a198 10
.Sh SEE ALSO
.Xr csh 1 ,
.Xr kerberos 1 ,
.Xr kinit 1 ,
.Xr login 1 ,
.Xr sh 1 ,
.Xr skey 1 ,
.Xr group 5 ,
.Xr passwd 5 ,
.Xr environ 7
d200 1
a200 1
Environment variables used by
d202 1
a202 1
.Bl -tag -width HOME
d219 10
@


1.7
log
@usr.bin/ man page cleanups, n-s
@
text
@d1 1
a1 1
.\"	$OpenBSD: su.1,v 1.6 1997/09/04 08:16:22 provos Exp $
d46 1
a46 1
.Nm su
d57 1
a57 1
.Nm su
d62 1
a62 1
.Nm su
d125 1
a125 1
.Nm su
d135 1
a135 1
.Nm su
d145 2
a146 2
.Pp                                                                     
If the optional                                                              
d148 1
a148 1
are provided on the command line, they are passed to the login shell of 
d150 2
a151 2
the                                                                        
.Fl c                                                                 
d153 1
a153 1
.Fl c                                                                
d155 1
a155 1
passing multiple words.                               
d160 1
a160 1
.Nm su
d172 1
a172 1
.Nm su
d180 8
a187 8
.Sh EXAMPLES                                   
.Bl -tag -width 5n -compact                                          
.It Li "su bin -c makewhatis"                                        
Runs the command                                      
.Li makewhatis                                                                  
as user                                        
.Li bin .                                                
You will be asked for bin's password unless your real UID is 0.            
d190 2
a191 2
Same as above, but the target command consists of more than a              
single word.                                                                
d193 4
a196 4
.It Li "su -l foo"                                                             
Pretend a login for user                                                       
.Li foo .                                                                      
.El                                                                            
d221 1
a221 1
.Nm su
@


1.6
log
@clarify usage of wheel group; twp@@tezcat.com
@
text
@d1 1
a1 1
.\"	$OpenBSD: su.1,v 1.5 1996/10/26 03:19:30 millert Exp $
d46 1
a46 1
.Nm Su
d52 1
a52 1
that user and group ID after obtaining a Kerberos ticket granting ticket.
d57 1
a57 1
.Nm Su
d133 1
a133 1
and the caller's real uid is
d199 2
d204 1
a204 2
.Xr kinit 1 ,
.Xr kerberos 1 ,
a205 1
.Xr group 5 ,
@


1.5
log
@Now sets $LOGNAME as per POSIX.
@
text
@d1 1
a1 1
.\"	$OpenBSD: su.1,v 1.4 1996/10/12 20:40:38 millert Exp $
d163 9
a171 1
Otherwise, anyone can
@


1.4
log
@su.c: minor cleanup, some from FreeBSD
su.1: Examples from FreeBSD + minor nits fixed.
@
text
@d1 1
a1 1
.\"	$OpenBSD: su.1,v 1.3 1996/06/26 05:39:34 deraadt Exp $
d73 1
d82 2
d85 1
a85 1
is set to the target login, unless the target login has a user ID of 0,
d108 1
d115 2
d118 1
a118 1
is set to the target login.
d211 1
a211 1
.It Ev USER
d215 3
@


1.3
log
@rcsid
@
text
@d1 1
a1 1
.\"	$OpenBSD: su.1,v 1.2 1996/01/07 09:51:21 deraadt Exp $
d60 1
a60 1
if there is a Kerberos error.
d115 1
a115 1
.Dq Pa /bin:/usr/bin .
d139 11
d166 17
@


1.2
log
@more traditional semantics. if wheel group has no listed users, anyone
can su to root. default wheel group lists "root" as a user, thus
defaulting to a secure envirment. from arnej@@pvv.unit.no; netbsd pr#1894
@
text
@d1 1
a33 1
.\"	$Id: su.1,v 1.1.1.1 1995/10/18 08:46:09 deraadt Exp $
@


1.1
log
@Initial revision
@
text
@d33 1
a33 1
.\"	$Id: su.1,v 1.7 1994/09/05 00:27:10 mycroft Exp $
d140 1
a140 1
Only users in group 0 (normally
d142 5
a146 1
can
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
