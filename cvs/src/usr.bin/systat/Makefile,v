head	1.27;
access;
symbols
	OPENBSD_6_0:1.27.0.6
	OPENBSD_6_0_BASE:1.27
	OPENBSD_5_9:1.27.0.2
	OPENBSD_5_9_BASE:1.27
	OPENBSD_5_8:1.27.0.4
	OPENBSD_5_8_BASE:1.27
	OPENBSD_5_7:1.26.0.2
	OPENBSD_5_7_BASE:1.26
	OPENBSD_5_6:1.26.0.4
	OPENBSD_5_6_BASE:1.26
	OPENBSD_5_5:1.25.0.4
	OPENBSD_5_5_BASE:1.25
	OPENBSD_5_4:1.24.0.14
	OPENBSD_5_4_BASE:1.24
	OPENBSD_5_3:1.24.0.12
	OPENBSD_5_3_BASE:1.24
	OPENBSD_5_2:1.24.0.10
	OPENBSD_5_2_BASE:1.24
	OPENBSD_5_1_BASE:1.24
	OPENBSD_5_1:1.24.0.8
	OPENBSD_5_0:1.24.0.6
	OPENBSD_5_0_BASE:1.24
	OPENBSD_4_9:1.24.0.4
	OPENBSD_4_9_BASE:1.24
	OPENBSD_4_8:1.24.0.2
	OPENBSD_4_8_BASE:1.24
	OPENBSD_4_7:1.23.0.2
	OPENBSD_4_7_BASE:1.23
	OPENBSD_4_6:1.23.0.4
	OPENBSD_4_6_BASE:1.23
	OPENBSD_4_5:1.22.0.2
	OPENBSD_4_5_BASE:1.22
	OPENBSD_4_4:1.20.0.2
	OPENBSD_4_4_BASE:1.20
	OPENBSD_4_3:1.19.0.2
	OPENBSD_4_3_BASE:1.19
	OPENBSD_4_2:1.18.0.2
	OPENBSD_4_2_BASE:1.18
	OPENBSD_4_1:1.17.0.2
	OPENBSD_4_1_BASE:1.17
	OPENBSD_4_0:1.16.0.8
	OPENBSD_4_0_BASE:1.16
	OPENBSD_3_9:1.16.0.6
	OPENBSD_3_9_BASE:1.16
	OPENBSD_3_8:1.16.0.4
	OPENBSD_3_8_BASE:1.16
	OPENBSD_3_7:1.16.0.2
	OPENBSD_3_7_BASE:1.16
	OPENBSD_3_6:1.14.0.12
	OPENBSD_3_6_BASE:1.14
	OPENBSD_3_5:1.14.0.10
	OPENBSD_3_5_BASE:1.14
	OPENBSD_3_4:1.14.0.8
	OPENBSD_3_4_BASE:1.14
	OPENBSD_3_3:1.14.0.6
	OPENBSD_3_3_BASE:1.14
	OPENBSD_3_2:1.14.0.4
	OPENBSD_3_2_BASE:1.14
	OPENBSD_3_1:1.14.0.2
	OPENBSD_3_1_BASE:1.14
	OPENBSD_3_0:1.13.0.2
	OPENBSD_3_0_BASE:1.13
	OPENBSD_2_9_BASE:1.12
	OPENBSD_2_9:1.12.0.4
	OPENBSD_2_8:1.12.0.2
	OPENBSD_2_8_BASE:1.12
	OPENBSD_2_7:1.11.0.2
	OPENBSD_2_7_BASE:1.11
	OPENBSD_2_6:1.8.0.6
	OPENBSD_2_6_BASE:1.8
	OPENBSD_2_5:1.8.0.4
	OPENBSD_2_5_BASE:1.8
	OPENBSD_2_4:1.8.0.2
	OPENBSD_2_4_BASE:1.8
	OPENBSD_2_3:1.7.0.2
	OPENBSD_2_3_BASE:1.7
	OPENBSD_2_2:1.5.0.2
	OPENBSD_2_2_BASE:1.5
	OPENBSD_2_1:1.4.0.4
	OPENBSD_2_1_BASE:1.4
	OPENBSD_2_0:1.4.0.2
	OPENBSD_2_0_BASE:1.4
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.27
date	2015.03.12.01.03.00;	author claudio;	state Exp;
branches;
next	1.26;
commitid	0MoFRWiboJGvZpKs;

1.26
date	2014.07.16.20.06.27;	author okan;	state Exp;
branches;
next	1.25;
commitid	EH3G9Uvsm0Q07c0P;

1.25
date	2013.09.07.11.43.49;	author reyk;	state Exp;
branches;
next	1.24;

1.24
date	2010.07.22.12.33.29;	author giovanni;	state Exp;
branches;
next	1.23;

1.23
date	2009.06.19.07.48.45;	author jasper;	state Exp;
branches;
next	1.22;

1.22
date	2008.11.08.06.38.27;	author canacar;	state Exp;
branches;
next	1.21;

1.21
date	2008.11.02.06.23.28;	author canacar;	state Exp;
branches;
next	1.20;

1.20
date	2008.06.12.22.26.01;	author canacar;	state Exp;
branches;
next	1.19;

1.19
date	2007.12.15.17.46.23;	author deraadt;	state Exp;
branches;
next	1.18;

1.18
date	2007.03.23.01.39.39;	author deraadt;	state Exp;
branches;
next	1.17;

1.17
date	2007.02.23.22.02.58;	author deanna;	state Exp;
branches;
next	1.16;

1.16
date	2004.11.16.09.52.33;	author markus;	state Exp;
branches;
next	1.15;

1.15
date	2004.09.29.21.59.28;	author deraadt;	state Exp;
branches;
next	1.14;

1.14
date	2002.02.17.07.52.38;	author hugh;	state Exp;
branches;
next	1.13;

1.13
date	2001.06.27.07.13.39;	author art;	state Exp;
branches;
next	1.12;

1.12
date	2000.09.03.18.41.20;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2000.01.05.11.04.21;	author itojun;	state Exp;
branches;
next	1.10;

1.10
date	99.10.28.12.09.32;	author art;	state Exp;
branches;
next	1.9;

1.9
date	99.10.26.15.13.53;	author art;	state Exp;
branches;
next	1.8;

1.8
date	98.07.24.00.10.58;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	98.01.05.00.01.55;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	97.12.15.00.05.28;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	97.09.21.11.51.02;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	96.06.02.05.54.36;	author tholo;	state Exp;
branches;
next	1.3;

1.3
date	96.05.22.11.35.28;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	96.04.18.11.24.56;	author mickey;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.46.10;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.46.10;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.27
log
@Switch the netstat view of systat to use the same kvm_getfiles()
function similar to netstat(1). The output still shows the same
info but may be a bit differently sorted. Also it will now show
connections that are not UDP or TCP.  This was the last bit of
systat that needed kvm access and so now systat no longer needs
to be setgid kmem.
With this commit OpenBSD is officially setgid kmem free and an
almost 10 year journey finally comes to an end.
OK deraadt@@
@
text
@#	$OpenBSD: Makefile,v 1.26 2014/07/16 20:06:27 okan Exp $

PROG=	systat

.PATH:	${.CURDIR}/../../usr.bin/vmstat

CFLAGS+=-DNOKVM
CPPFLAGS+=-I${.CURDIR}/../../usr.bin/vmstat
CPPFLAGS+=-I${.CURDIR}/../../sbin/pfctl
SRCS=	dkstats.c engine.c if.c inetname.c iostat.c main.c mbufs.c netstat.c \
	nfs.c pigs.c sensors.c swap.c vmstat.c pftop.c cache.c pf.c \
	pool.c malloc.c cpu.c

DPADD=	${LIBCURSES} ${LIBM} ${LIBKVM}
LDADD=	-lcurses -lm -lkvm

.include <bsd.prog.mk>
@


1.26
log
@zap trailing newlines; "go for it" deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.25 2013/09/07 11:43:49 reyk Exp $
a15 2
BINGRP=	kmem
BINMODE=2555
@


1.25
log
@Add a new screen "cpu" that simply lists the usage of each CPU core.
Also add a new -B command line flag that works like -b but waits some
cycles before dumping anything to the console.

With much help from jmc@@
OK jj@@ lambert@@ jmc@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.24 2010/07/22 12:33:29 giovanni Exp $
a19 1

@


1.24
log
@
Let systat -N states resolve network addresses
help and ok sthen@@ lum@@
ok canacar@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.23 2009/06/19 07:48:45 jasper Exp $
d12 1
a12 1
	pool.c malloc.c
@


1.23
log
@- add two new views to systat, 'nfsserver' and 'nfsclient'.
output is similar to nfsstat(1), but it allows for better monitoring/debugging

tricked into by and "i love this" thib@@
ok canacar@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.22 2008/11/08 06:38:27 canacar Exp $
d10 1
a10 1
SRCS=	dkstats.c engine.c if.c iostat.c main.c mbufs.c netstat.c \
@


1.22
log
@Add malloc and buckets views that display kernel malloc statistics similar
to vmstat -m
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.21 2008/11/02 06:23:28 canacar Exp $
d11 2
a12 2
	pigs.c sensors.c swap.c vmstat.c pftop.c cache.c pf.c pool.c \
	malloc.c
@


1.21
log
@Add a view that displays pool(9) information. Idea and ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.20 2008/06/12 22:26:01 canacar Exp $
d11 2
a12 1
	pigs.c sensors.c swap.c vmstat.c pftop.c cache.c pf.c pool.c
@


1.20
log
@New display engine for systat, based on pftop. Adds new views for pf
(status, state, rule, queue). While all displays work, some keyboard
comands are not implemented yet. Other features include better handling
of display resize and scrolling for long views. Committing now to fix
the remaining issues in the tree.
Testing and comments by otto@@ and harding@@, ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.19 2007/12/15 17:46:23 deraadt Exp $
d11 1
a11 1
	pigs.c sensors.c swap.c vmstat.c pftop.c cache.c pf.c
@


1.19
log
@-DNOKVM will compile iostat.c without kvm support, which it does not need
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.18 2007/03/23 01:39:39 deraadt Exp $
d9 4
a12 2
SRCS=	cmds.c cmdtab.c disks.c dkstats.c fetch.c if.c iostat.c keyboard.c \
	main.c mbufs.c netcmds.c netstat.c pigs.c sensors.c swap.c vmstat.c
@


1.18
log
@cannot remember what the vax -O0 workaround in 2002 was for.  wish the
commit message had explained the problem at least vaguely.  disable the
workaround so that if the bug exists, it can rear it's head again
(in 10 minutes of playing around, i could not find any unusual behaviour)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.17 2007/02/23 22:02:58 deanna Exp $
d7 1
@


1.17
log
@Add a display for hardware sensors, available with :sensors.

ok deraadt, jmc
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.16 2004/11/16 09:52:33 markus Exp $
a13 5

.if (${MACHINE_ARCH} == "vax")
cmds.o:
	${CC} ${CFLAGS} ${CPPFLAGS} -O0 -c $<
.endif
@


1.16
log
@print network interface stats with 'systat ifstat'; ok deraadt, mickey
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.15 2004/09/29 21:59:28 deraadt Exp $
d9 1
a9 1
	main.c mbufs.c netcmds.c netstat.c pigs.c swap.c vmstat.c
@


1.15
log
@always compile in INET6 support
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.14 2002/02/17 07:52:38 hugh Exp $
d8 1
a8 1
SRCS=	cmds.c cmdtab.c disks.c dkstats.c fetch.c iostat.c keyboard.c \
@


1.14
log
@A couple temporary workarounds for vax toolchain bugs.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.13 2001/06/27 07:13:39 art Exp $
a13 2

CPPFLAGS+=-DINET6
@


1.13
log
@UVM is no longer an option
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.12 2000/09/03 18:41:20 espie Exp $
d16 5
@


1.12
log
@Boring...  Add :L modifier to all tweakable variables tests.

Closes PR 1246
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.11 2000/01/05 11:04:21 itojun Exp $
a18 3
.if (${UVM:L} == "yes")
CFLAGS+=-DUVM
.endif
@


1.11
log
@IPv6 support.  commands under "netstat" are all IPv6-aware.
const checks in netstat.c.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.10 1999/10/28 12:09:32 art Exp $
d19 1
a19 1
.if (${UVM} == "yes")
@


1.10
log
@Add newline to the end of Makefile to unbreak non-uvm builds
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.9 1999/10/26 15:13:53 art Exp $
d7 1
a7 1
CFLAGS+=-I${.CURDIR}/../../usr.bin/vmstat
d14 2
@


1.9
log
@support UVM. (much code from NetBSD)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 1998/07/24 00:10:58 millert Exp $
d19 1
a19 1
.endif@


1.8
log
@-lcurses, not termcap/termlib
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 1998/01/05 00:01:55 deraadt Exp $
d16 4
@


1.7
log
@trust restored a bit more
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.5 1997/09/21 11:51:02 deraadt Exp $
d10 2
a11 2
DPADD=	${LIBCURSES} ${LIBTERMLIB} ${LIBM} ${LIBKVM}
LDADD=	-lcurses -ltermlib -lm -lkvm
@


1.6
log
@fix curses first
@
text
@d13 1
a13 2
#BINMODE=2555
BINMODE=555
@


1.5
log
@$OpenBSD$
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 1996/06/02 05:54:36 tholo Exp $
d13 2
a14 1
BINMODE=2555
@


1.4
log
@Always use -ltermlib when linking with -lcurses
Be consistent in use of LIBTERMCAP and LIBTERMLIB when depending
@
text
@d1 1
a1 2
#	$OpenBSD: Makefile,v 1.3 1996/05/22 11:35:28 deraadt Exp $
#	$NetBSD: Makefile,v 1.5 1996/05/10 23:16:30 thorpej Exp $
@


1.3
log
@libutil
@
text
@d1 1
a1 1
#	$OpenBSD$
d11 2
a12 2
DPADD=	${LIBCURSES} ${LIBTERMCAP} ${LIBM} ${LIBKVM}
LDADD=	-lcurses -ltermcap -lm -lkvm
@


1.2
log
@Make it compile now (another commit needed in ../vmstat)
@
text
@d1 2
a2 2
#	$NetBSD: Makefile,v 1.3 1995/03/22 15:26:42 mycroft Exp $
#	@@(#)Makefile	8.1 (Berkeley) 6/6/93
a4 4
.if (${MACHINE_ARCH} == "m68k")
CFLAGS+=-D${MACHINE}
.endif
CFLAGS+=-I${.CURDIR}/../../sys/arch -I${.CURDIR}/../vmstat
d6 6
a11 2
SRCS=	cmds.c cmdtab.c disks.c fetch.c iostat.c keyboard.c main.c mbufs.c \
	netcmds.c netstat.c pigs.c swap.c vmstat.c
a12 1
DPADD=	${LIBCURSES} ${LIBTERMCAP} ${LIBM} ${LIBKVM}
@


1.1
log
@Initial revision
@
text
@d5 5
a9 1
CFLAGS+=-I/sys -I${.CURDIR}/../vmstat
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
