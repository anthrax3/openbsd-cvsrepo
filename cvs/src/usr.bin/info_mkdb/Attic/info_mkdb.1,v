head	1.7;
access;
symbols
	OPENBSD_2_4:1.5.0.2
	OPENBSD_2_4_BASE:1.5
	OPENBSD_2_3:1.3.0.4
	OPENBSD_2_3_BASE:1.3
	OPENBSD_2_2:1.3.0.2
	OPENBSD_2_2_BASE:1.3
	OPENBSD_2_1:1.2.0.2
	OPENBSD_2_1_BASE:1.2
	OPENBSD_2_0:1.1.0.2
	OPENBSD_2_0_BASE:1.1;
locks; strict;
comment	@# @;


1.7
date	99.03.05.04.47.46;	author tholo;	state dead;
branches;
next	1.6;

1.6
date	99.01.23.18.40.54;	author millert;	state Exp;
branches;
next	1.5;

1.5
date	98.09.26.19.54.53;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	98.09.06.22.23.17;	author aaron;	state Exp;
branches;
next	1.3;

1.3
date	97.05.30.07.49.21;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	96.12.10.09.06.31;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	96.07.22.03.16.30;	author tholo;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Merge cap_mkdb(1) and info_mkdb(1)
@
text
@.\"	$OpenBSD: info_mkdb.1,v 1.6 1999/01/23 18:40:54 millert Exp $
.\"
.\" Copyright (c) 1996 SigmaSoft, Th. Lockert
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"      This product includes software developed by SigmaSoft, Th. Lockert.
.\" 4. The name of the author may not be used to endorse or promote products
.\"    derived from this software without specific prior written permission
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.Dd July, 21, 1996
.Dt INFO_MKDB 1
.Os
.Sh NAME
.Nm info_mkdb
.Nd create capability database
.Pp
.Sh SYNOPSIS
.Nm info_mkdb
.Op Fl v
.Op Fl f Ar outfile
.Ar file1
.Op Ar file2 ...
.Pp
.Sh DESCRIPTION
.Nm info_mkdb 
builds a hashed database out of the
.Xr terminfo 5 
logical database constructed by the concatenation of the specified
files.
.Pp
The database is named by the basename of the first file argument and
the string
.Dq .db .  
The
.Xr getcap 3
routines can access the database in this form much more quickly
than they can the original text file(s).
.Pp
The ``tc'' capabilities of the records are expanded before the
record is stored into the database.
.Pp
The options are as follows:
.Bl -tag -width XXXXXX -indent
.It Fl f Ar outfile
Specify a different database basename.
.It Fl v
Print out the number of capability records in the database.
.El
.Pp
.Sh FORMAT
Each record is stored in the database using two different types of keys.
.Pp
The first type is a key which consists of the first capability of
the record (not including the trailing colon (``:'')) with a data
field consisting of a special byte followed by the rest of the record.
The special byte is either a 0 or 1, where a 0 means that the record
is okay, and a 1 means that there was a ``tc'' capability in the record
that couldn't be expanded.
.Pp
The second type is a key which consists of one of the names from the
first capability of the record with a data field consisting a special
byte followed by the first capability of the record.
The special byte is a 2.
.Pp
In normal operation names are looked up in the database, resulting
in a key/data pair of the second type.
The data field of this key/data pair is used to look up a key/data
pair of the first type which has the real data associated with the
name.
.Sh RETURN VALUE
The
.Nm info_mkdb 
utility exits 0 on success or >0 if an error occurred.
.Sh SEE ALSO
.Xr dbopen 3 ,
.Xr getcap 3 ,
.Xr terminfo 5
.Sh HISTORY
The
.Nm info_mkdb
utility appeared in
.Ox 2.0 .
@


1.6
log
@add HISTORY section
@
text
@d1 1
a1 1
.\"	$OpenBSD: info_mkdb.1,v 1.5 1998/09/26 19:54:53 aaron Exp $
@


1.5
log
@usr.bin/ man page fixes, f-m.
@
text
@d1 1
a1 1
.\"	$OpenBSD: info_mkdb.1,v 1.4 1998/09/06 22:23:17 aaron Exp $
d99 5
@


1.4
log
@More man page fixes. Spelling, grammar, some typos. Lots of double-word
occurrences squashed as well.
@
text
@d1 1
a1 1
.\"	$OpenBSD: info_mkdb.1,v 1.3 1997/05/30 07:49:21 deraadt Exp $
d94 1
a94 1
utility exits 0 on success and >0 if an error occurs.
@


1.3
log
@for i in `find . -name \*.[123456789] -exec grep '^.Dd ' {} /dev/null \; | \
	grep '"' | cut -d':' -f1`; do
sed -e '/^.Dd /s/"//g' -e '/^.Dd /s/\(^.Dd [A-Za-z]*\) \(.*\)$/\1, \2/' <$i >x
cat x > $i
done
@
text
@d1 1
a1 1
.\"	$OpenBSD: info_mkdb.1,v 1.2 1996/12/10 09:06:31 deraadt Exp $
d50 1
a50 1
files .
d63 1
a63 1
The options as as follows:
@


1.2
log
@"the the" purge
@
text
@d1 1
a1 1
.\"	$OpenBSD: info_mkdb.1,v 1.1 1996/07/22 03:16:30 tholo Exp $
d31 1
a31 1
.Dd "July 21, 1996"
@


1.1
log
@Add support for compiling a terminfo source file into terminfo.db (using
the same format as termcap.db)
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d83 1
a83 1
byte followed by the the first capability of the record.
@
