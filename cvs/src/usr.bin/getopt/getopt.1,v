head	1.18;
access;
symbols
	OPENBSD_6_1:1.18.0.14
	OPENBSD_6_1_BASE:1.18
	OPENBSD_6_0:1.18.0.12
	OPENBSD_6_0_BASE:1.18
	OPENBSD_5_9:1.18.0.8
	OPENBSD_5_9_BASE:1.18
	OPENBSD_5_8:1.18.0.10
	OPENBSD_5_8_BASE:1.18
	OPENBSD_5_7:1.18.0.2
	OPENBSD_5_7_BASE:1.18
	OPENBSD_5_6:1.18.0.6
	OPENBSD_5_6_BASE:1.18
	OPENBSD_5_5:1.18.0.4
	OPENBSD_5_5_BASE:1.18
	OPENBSD_5_4:1.17.0.4
	OPENBSD_5_4_BASE:1.17
	OPENBSD_5_3:1.17.0.2
	OPENBSD_5_3_BASE:1.17
	OPENBSD_5_2:1.16.0.8
	OPENBSD_5_2_BASE:1.16
	OPENBSD_5_1_BASE:1.16
	OPENBSD_5_1:1.16.0.6
	OPENBSD_5_0:1.16.0.4
	OPENBSD_5_0_BASE:1.16
	OPENBSD_4_9:1.16.0.2
	OPENBSD_4_9_BASE:1.16
	OPENBSD_4_8:1.15.0.6
	OPENBSD_4_8_BASE:1.15
	OPENBSD_4_7:1.15.0.2
	OPENBSD_4_7_BASE:1.15
	OPENBSD_4_6:1.15.0.4
	OPENBSD_4_6_BASE:1.15
	OPENBSD_4_5:1.14.0.8
	OPENBSD_4_5_BASE:1.14
	OPENBSD_4_4:1.14.0.6
	OPENBSD_4_4_BASE:1.14
	OPENBSD_4_3:1.14.0.4
	OPENBSD_4_3_BASE:1.14
	OPENBSD_4_2:1.14.0.2
	OPENBSD_4_2_BASE:1.14
	OPENBSD_4_1:1.13.0.2
	OPENBSD_4_1_BASE:1.13
	OPENBSD_4_0:1.11.0.4
	OPENBSD_4_0_BASE:1.11
	OPENBSD_3_9:1.11.0.2
	OPENBSD_3_9_BASE:1.11
	OPENBSD_3_8:1.8.0.12
	OPENBSD_3_8_BASE:1.8
	OPENBSD_3_7:1.8.0.10
	OPENBSD_3_7_BASE:1.8
	OPENBSD_3_6:1.8.0.8
	OPENBSD_3_6_BASE:1.8
	OPENBSD_3_5:1.8.0.6
	OPENBSD_3_5_BASE:1.8
	OPENBSD_3_4:1.8.0.4
	OPENBSD_3_4_BASE:1.8
	OPENBSD_3_3:1.8.0.2
	OPENBSD_3_3_BASE:1.8
	OPENBSD_3_2:1.7.0.12
	OPENBSD_3_2_BASE:1.7
	OPENBSD_3_1:1.7.0.10
	OPENBSD_3_1_BASE:1.7
	OPENBSD_3_0:1.7.0.8
	OPENBSD_3_0_BASE:1.7
	OPENBSD_2_9_BASE:1.7
	OPENBSD_2_9:1.7.0.6
	OPENBSD_2_8:1.7.0.4
	OPENBSD_2_8_BASE:1.7
	OPENBSD_2_7:1.7.0.2
	OPENBSD_2_7_BASE:1.7
	OPENBSD_2_6:1.4.0.2
	OPENBSD_2_6_BASE:1.4
	OPENBSD_2_5:1.3.0.4
	OPENBSD_2_5_BASE:1.3
	OPENBSD_2_4:1.3.0.2
	OPENBSD_2_4_BASE:1.3
	OPENBSD_2_3:1.2.0.8
	OPENBSD_2_3_BASE:1.2
	OPENBSD_2_2:1.2.0.6
	OPENBSD_2_2_BASE:1.2
	OPENBSD_2_1:1.2.0.4
	OPENBSD_2_1_BASE:1.2
	OPENBSD_2_0:1.2.0.2
	OPENBSD_2_0_BASE:1.2
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@.\" @;


1.18
date	2014.01.19.09.15.08;	author schwarze;	state Exp;
branches;
next	1.17;

1.17
date	2012.11.14.09.55.28;	author sobrado;	state Exp;
branches;
next	1.16;

1.16
date	2010.10.28.18.33.28;	author jmc;	state Exp;
branches;
next	1.15;

1.15
date	2009.04.12.23.13.36;	author okan;	state Exp;
branches;
next	1.14;

1.14
date	2007.05.31.19.20.10;	author jmc;	state Exp;
branches;
next	1.13;

1.13
date	2007.01.26.17.42.53;	author jmc;	state Exp;
branches;
next	1.12;

1.12
date	2007.01.24.19.11.14;	author otto;	state Exp;
branches;
next	1.11;

1.11
date	2006.01.14.09.37.24;	author jmc;	state Exp;
branches;
next	1.10;

1.10
date	2006.01.14.09.29.51;	author jmc;	state Exp;
branches;
next	1.9;

1.9
date	2006.01.13.22.13.53;	author jmc;	state Exp;
branches;
next	1.8;

1.8
date	2003.02.17.13.39.37;	author jmc;	state Exp;
branches;
next	1.7;

1.7
date	2000.04.15.02.15.11;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	2000.03.07.21.11.09;	author aaron;	state Exp;
branches;
next	1.5;

1.5
date	2000.03.04.22.19.23;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	99.07.04.11.53.54;	author aaron;	state Exp;
branches;
next	1.3;

1.3
date	98.09.26.19.54.50;	author aaron;	state Exp;
branches;
next	1.2;

1.2
date	96.06.26.05.33.44;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.45.19;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.45.19;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.18
log
@A SYNOPSIS should not attempt to provide examples, so trim it;
a better example already exists in the EXAMPLES section.
The DESCRIPTION should not provide examples either,
in particular not bad ones, so move that to CAVEATS.
Also fix various markup.
OK jmc.
@
text
@.\"	$OpenBSD: getopt.1,v 1.17 2012/11/14 09:55:28 sobrado Exp $
.\"
.\" This material, written by Henry Spencer, was released by him
.\" into the public domain and is thus not subject to any copyright.
.\"
.Dd $Mdocdate: November 14 2012 $
.Dt GETOPT 1
.Os
.Sh NAME
.Nm getopt
.Nd parse command options
.Sh SYNOPSIS
.Nm
.Ar optstring
.Va $*
.Sh DESCRIPTION
.Nm
is used to break up options in command lines for easy parsing by
shell procedures, and to check for legal options.
.Ar optstring
is a string of recognized option letters (see
.Xr getopt 3 ) ;
if a letter is followed by a colon, the option
is expected to have an argument which may or may not be
separated from it by whitespace.
However, if a letter is followed by two colons, the argument is optional
and may not be separated by whitespace \- this is an extension not
covered by POSIX.
The special option
.Sq --
is used to delimit the end of the options.
.Nm
will place
.Sq --
in the arguments at the end of the options,
or recognize it if used explicitly.
The shell arguments
.Pf ( Va $1 , $2 , ... )
are reset so that each option is
preceded by a
.Sq -
and in its own shell argument;
each option argument is also in its own shell argument.
.Sh EXAMPLES
The following code fragment shows how one might process the arguments
for a command that can take the options
.Fl a
and
.Fl b ,
and the option
.Fl o ,
which requires an argument.
.Bd -literal -offset indent
args=`getopt abo: $*`
if [ $? -ne 0 ]
then
	echo 'Usage: ...'
	exit 2
fi
set -- $args
while [ $# -ne 0 ]
do
	case "$1"
	in
		-a|-b)
			flag="$1"; shift;;
		-o)
			oarg="$2"; shift; shift;;
		--)
			shift; break;;
	esac
done
.Ed
.Pp
This code will accept any of the following as equivalent:
.Bd -literal -offset indent
cmd -aoarg file file
cmd -a -o arg file file
cmd -oarg -a file file
cmd -a -oarg -- file file
.Ed
.Sh DIAGNOSTICS
.Nm
prints an error message on the standard error output when it
encounters an option letter not included in
.Ar optstring .
.Sh SEE ALSO
.Xr sh 1 ,
.Xr getopt 3
.Sh HISTORY
Written by Henry Spencer, working from a Bell Labs manual page.
Behavior believed identical to the Bell version.
.Sh CAVEATS
Note that the construction
.Sy set -- `getopt optstring $*`
is not recommended, as the exit value from
.Sy set
will prevent the exit value from
.Nm
from being determined.
.Sh BUGS
Whatever
.Xr getopt 3
has.
.Pp
Arguments containing whitespace or embedded shell metacharacters
generally will not survive intact; this looks easy to fix but isn't.
.Pp
The error message for an invalid option is identified as coming
from
.Nm
rather than from the shell procedure containing the invocation
of
.Nm getopt ;
this again is hard to fix.
.Pp
The precise best way to use the
.Sy set
command to set the arguments without disrupting the value(s) of
shell options varies from one shell version to another.
@


1.17
log
@fix a bug, hidden by the break statement in the special option case,
in the example code.

millert@@ suggested using -ne instead of -gt since $# can't be negative.

ok millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: getopt.1,v 1.16 2010/10/28 18:33:28 jmc Exp $
d6 1
a6 1
.Dd $Mdocdate: October 28 2010 $
d13 3
a15 1
.Nm args=`getopt optstring $*`; set -- $args
d20 1
a20 1
.Op optstring
a43 9
.Pp
Note that the construction
.Cm set -- `getopt optstring $*`
is not recommended,
as the exit value from
.Dq set
will prevent the exit value from
.Nm
from being determined.
d86 1
a86 1
.Op optstring .
d93 8
d118 1
a118 1
.Nm set
@


1.16
log
@knock out some "-*- nroff -*-" lines;
@
text
@d1 1
a1 1
.\"	$OpenBSD: getopt.1,v 1.15 2009/04/12 23:13:36 okan Exp $
d6 1
a6 1
.Dd $Mdocdate: April 12 2009 $
d68 1
a68 1
while [ $# -ge 0 ]
@


1.15
log
@document that no leading whitespace is permitted between the option and
argument if the argument is deemed to be optional ('::').

feedback and ok jmc@@ and millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: getopt.1,v 1.14 2007/05/31 19:20:10 jmc Exp $	-*- nroff -*-
d6 1
a6 1
.Dd $Mdocdate: May 31 2007 $
@


1.14
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: getopt.1,v 1.13 2007/01/26 17:42:53 jmc Exp $	-*- nroff -*-
d6 1
a6 1
.Dd $Mdocdate$
d24 3
@


1.13
log
@after some discussion with otto, remove "errcode=$?;" from getopt's
synopsis: it is really not central to its usage;

ok otto millert
@
text
@d1 1
a1 1
.\"	$OpenBSD: getopt.1,v 1.12 2007/01/24 19:11:14 otto Exp $	-*- nroff -*-
d6 1
a6 1
.Dd June 21, 1993
@


1.12
log
@The example is not correct and uses non-idiomatic scripting. So fix it.
ok espie@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: getopt.1,v 1.11 2006/01/14 09:37:24 jmc Exp $	-*- nroff -*-
d13 1
a13 1
.Nm args=`getopt optstring $*`; errcode=$?; set -- $args
@


1.11
log
@document why we avoid: set -- `getopt optstring $*`
@
text
@d1 1
a1 1
.\"	$OpenBSD: getopt.1,v 1.10 2006/01/14 09:29:51 jmc Exp $	-*- nroff -*-
d65 1
a65 1
for i
d67 1
a67 1
	case "$i"
d70 1
a70 1
			flag=$i; shift;;
d72 1
a72 1
			oarg=$2; shift; shift;;
@


1.10
log
@update the example and synopsis so that we are checking the
exit value of getopt itself, not `set';

example merged from current freebsd page;
problem reported by nordin; ok millert
@
text
@d1 1
a1 1
.\"	$OpenBSD: getopt.1,v 1.9 2006/01/13 22:13:53 jmc Exp $	-*- nroff -*-
d39 9
@


1.9
log
@- kill some of the mad escaping;
@
text
@d1 1
a1 1
.\"	$OpenBSD: getopt.1,v 1.8 2003/02/17 13:39:37 jmc Exp $	-*- nroff -*-
d13 1
a13 1
.Nm set -- `getopt optstring $*`
d49 2
a50 2
set -- `getopt abo: $*`
if test $? != 0
d55 1
@


1.8
log
@copyrights added;

des_crypt(3): Eric Young
aac(4): Michael Smith, BSDi, Niklas Hallqvist; ok niklas@@
bktr(4): Amancio Hasty, Roger Hardiman
getopt(1): Henry Spencer (public domain)
pcnfds(8): Sun
@
text
@d1 1
a1 1
.\"	$OpenBSD: getopt.1,v 1.7 2000/04/15 02:15:11 aaron Exp $	-*- nroff -*-
d13 1
a13 1
.Nm set \-\- \`getopt optstring $*\`
d25 1
a25 1
.Dq \-\-
d29 1
a29 1
.Dq \-\-
d33 2
a34 1
(\fB$1 $2\fR ...) are reset so that each option is
d36 1
a36 1
.Dq \-
a47 1
.Pp
d49 1
a49 1
set \-\- \`getopt abo: $*\`
d59 1
a59 1
		\-a|\-b)
d61 1
a61 1
		\-o)
d63 1
a63 1
		\-\-)
a69 1
.Pp
d71 4
a74 4
cmd \-aoarg file file
cmd \-a \-o arg file file
cmd \-oarg -a file file
cmd \-a \-oarg \-\- file file
@


1.7
log
@Mostly punctuation fixes.
@
text
@d1 5
a5 1
.\"	$OpenBSD: getopt.1,v 1.6 2000/03/07 21:11:09 aaron Exp $	-*- nroff -*-
@


1.6
log
@Various cleanup.
@
text
@d1 1
a1 1
.\"	$OpenBSD: getopt.1,v 1.5 2000/03/04 22:19:23 aaron Exp $	-*- nroff -*-
d16 1
a16 2
.Xr getopt 3
);
@


1.5
log
@In Unix land we prefer "whitespace" to "white space" or "white-space". At
least, this is the impression I get from looking at a lot of Perl docs.
@
text
@d1 1
a1 1
.\"	$OpenBSD: getopt.1,v 1.4 1999/07/04 11:53:54 aaron Exp $	-*- nroff -*-
d35 1
a35 1
.Sh EXAMPLE
d38 1
a38 1
.Op a
d40 1
a40 1
.Op b ,
d42 1
a42 1
.Op o ,
a73 3
.Sh SEE ALSO
.Xr sh 1 ,
.Xr getopt 3
d79 3
d91 1
a91 1
generally will not survive intact;  this looks easy to fix but isn't.
@


1.4
log
@correct use of .Nm; some other formatting nits
@
text
@d1 1
a1 1
.\"	$OpenBSD: getopt.1,v 1.3 1998/09/26 19:54:50 aaron Exp $	-*- nroff -*-
d20 1
a20 1
separated from it by white space.
d90 1
a90 1
Arguments containing white space or embedded shell metacharacters
@


1.3
log
@usr.bin/ man page fixes, f-m.
@
text
@d1 1
a1 1
.\"	$OpenBSD: getopt.1,v 1.2 1996/06/26 05:33:44 deraadt Exp $	-*- nroff -*-
d11 1
a11 1
.Nm getopt
d14 1
a14 1
.Op Optstring
d24 1
a24 1
.Nm getopt
d78 1
a78 1
.Nm getopt
d95 1
a95 1
.Nm getopt
@


1.2
log
@rcsid
@
text
@d1 1
a1 1
.\"	$OpenBSD: getopt.1,v 1.1.1.1 1995/10/18 08:45:19 deraadt Exp $	-*- nroff -*-
d11 1
a11 1
.Nm Getopt
d24 1
a24 1
.Nm Getopt
d78 1
a78 1
.Nm Getopt
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
.\"	$Id: getopt.1,v 1.5 1995/07/07 22:41:30 jtc Exp $	-*- nroff -*-
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
