head	1.7;
access;
symbols
	OPENBSD_6_1:1.7.0.12
	OPENBSD_6_1_BASE:1.7
	OPENBSD_6_0:1.7.0.8
	OPENBSD_6_0_BASE:1.7
	OPENBSD_5_9:1.7.0.4
	OPENBSD_5_9_BASE:1.7
	OPENBSD_5_8:1.7.0.6
	OPENBSD_5_8_BASE:1.7
	OPENBSD_5_7:1.7.0.2
	OPENBSD_5_7_BASE:1.7
	OPENBSD_5_6:1.5.0.4
	OPENBSD_5_6_BASE:1.5;
locks; strict;
comment	@.\" @;


1.7
date	2014.08.26.21.50.38;	author jmc;	state Exp;
branches;
next	1.6;
commitid	J0YmIP7d8NcHB9AZ;

1.6
date	2014.08.26.20.03.31;	author robert;	state Exp;
branches;
next	1.5;
commitid	0N4tl7kab9mwJF7M;

1.5
date	2014.03.24.20.33.01;	author florian;	state Exp;
branches;
next	1.4;

1.4
date	2014.03.18.17.47.04;	author florian;	state Exp;
branches;
next	1.3;

1.3
date	2014.03.17.21.45.07;	author jmc;	state Exp;
branches;
next	1.2;

1.2
date	2014.03.17.13.42.02;	author jmc;	state Exp;
branches;
next	1.1;

1.1
date	2014.03.17.12.49.13;	author florian;	state Exp;
branches;
next	;


desc
@@


1.7
log
@fix SEE ALSO;
@
text
@.\"   $OpenBSD: htpasswd.1,v 1.6 2014/08/26 20:03:31 robert Exp $
.\"
.\" Copyright (c) 2014 Florian Obser <florian@@openbsd.org>
.\"
.\" Permission to use, copy, modify, and distribute this software for any
.\" purpose with or without fee is hereby granted, provided that the above
.\" copyright notice and this permission notice appear in all copies.
.\"
.\" THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
.\" WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
.\" MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
.\" ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
.\" WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
.\" ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
.\" OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
.\"
.Dd $Mdocdate: August 26 2014 $
.Dt HTPASSWD 1
.Os
.Sh NAME
.Nm htpasswd
.Nd create and update user authentication files
.Sh SYNOPSIS
.Nm
.Op Ar file
.Ar login
.Nm
.Fl I
.Op Ar file
.Sh DESCRIPTION
.Nm
is used to create and update user authentication files for
HTTP daemons.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl I
Switch to batch mode.
.Nm
reads exactly one line from standard input and splits it at the first
.Qo : Qc .
The first part is the login, the second part is the password which
.Nm
then hashes using
.Xr bcrypt 3 .
.El
.Pp
.Nm
prompts for a password and generates a hash using
.Xr bcrypt 3 .
A line suitable for a password file is written to the standard output.
If invoked with two arguments
.Po
or one argument if the
.Fl I
flag is used
.Pc
user authentication
.Ar file
is updated.
.Sh SEE ALSO
.Xr bcrypt 3
.Sh HISTORY
This reimplemented version of
.Nm
has been available since
.Ox 5.6 .
.Sh AUTHORS
.An Florian Obser Aq Mt florian@@openbsd.org
implemented
.Nm
from scratch after httpd was removed from
.Ox
base.
@


1.6
log
@remove nginx references
@
text
@d1 1
a1 1
.\"   $OpenBSD: htpasswd.1,v 1.5 2014/03/24 20:33:01 florian Exp $
d17 1
a17 1
.Dd $Mdocdate: March 24 2014 $
d62 1
a62 1
.Xr bcrypt 3 ,
@


1.5
log
@sf@@ pointed out that the -B flag is already in use by apache's
htpasswd (since version 2.4); change it to -I. The -B flag was not in
use for a long time so this change should not cause too much trouble.
OK sf@@, jmc@@
no objections from sthen@@
"kein problem damit" benno@@
@
text
@d1 1
a1 1
.\"   $OpenBSD: htpasswd.1,v 1.4 2014/03/18 17:47:04 florian Exp $
d17 1
a17 1
.Dd $Mdocdate: March 18 2014 $
d33 1
a33 2
HTTP daemons such as
.Xr nginx 8 .
d51 1
a51 6
A line suitable for a password file,
such as
.Ic auth_basic_user_file
in
.Xr nginx 8 ,
is written to standard output.
a62 2
.Xr nginx.conf 5 ,
.Xr nginx 8
@


1.4
log
@Batch mode; read exactly one line "login:unencrypted-password" from
stdin.
OK benno
man page tweak and OK sthen
@
text
@d1 1
a1 1
.\"   $OpenBSD: htpasswd.1,v 1.3 2014/03/17 21:45:07 jmc Exp $
d17 1
a17 1
.Dd $Mdocdate: March 17 2014 $
d28 1
a28 1
.Fl B
d38 1
a38 1
.It Fl B
d61 1
a61 1
.Fl B
@


1.3
log
@reword to make it clearer this is not nginx-specific;
requested by sthen/florian; ok florian
@
text
@d1 1
a1 1
.\"   $OpenBSD: htpasswd.1,v 1.2 2014/03/17 13:42:02 jmc Exp $
d27 3
d36 13
d59 5
@


1.2
log
@tweak previous;
@
text
@d1 1
a1 1
.\"   $OpenBSD: htpasswd.1,v 1.1 2014/03/17 12:49:13 florian Exp $
d30 3
a32 2
.Xr nginx 8
and other HTTP daemons.
d36 2
a37 2
A line suitable for
.Xr nginx 8
d39 5
a43 4
is written on standard output if
.Nm
is invoked with one argument.
If invoked with two arguments the
d45 1
a45 1
user authentication file is updated.
@


1.1
log
@Re-implement htpasswd from scratch. There is so much bad advice on the
internet that it's better to have a known tool in base.
Intentionally not switch compatible with the old htpasswd. The only
switch really needed would be for batch mode, but that was inherently
insecure in the old htpasswd. Batch mode will be coming shortly.
OK sthen, tedu, benno
@
text
@d1 1
a1 1
.\"   $OpenBSD$
d17 1
a17 1
.Dd $Mdocdate$
d31 1
a31 1
and other http daemons.
d35 1
a35 1
A line suitable for e.g.
d46 2
a47 2
.Xr nginx 8 ,
.Xr nginx.conf 5
@

