head	1.24;
access;
symbols
	OPENBSD_6_2:1.24.0.10
	OPENBSD_6_2_BASE:1.24
	OPENBSD_6_1:1.24.0.12
	OPENBSD_6_1_BASE:1.24
	OPENBSD_6_0:1.24.0.8
	OPENBSD_6_0_BASE:1.24
	OPENBSD_5_9:1.24.0.4
	OPENBSD_5_9_BASE:1.24
	OPENBSD_5_8:1.24.0.6
	OPENBSD_5_8_BASE:1.24
	OPENBSD_5_7:1.24.0.2
	OPENBSD_5_7_BASE:1.24
	OPENBSD_5_6:1.21.0.10
	OPENBSD_5_6_BASE:1.21
	OPENBSD_5_5:1.21.0.8
	OPENBSD_5_5_BASE:1.21
	OPENBSD_5_4:1.21.0.4
	OPENBSD_5_4_BASE:1.21
	OPENBSD_5_3:1.21.0.2
	OPENBSD_5_3_BASE:1.21
	OPENBSD_5_2:1.20.0.6
	OPENBSD_5_2_BASE:1.20
	OPENBSD_5_1_BASE:1.20
	OPENBSD_5_1:1.20.0.4
	OPENBSD_5_0:1.20.0.2
	OPENBSD_5_0_BASE:1.20
	OPENBSD_4_9:1.19.0.14
	OPENBSD_4_9_BASE:1.19
	OPENBSD_4_8:1.19.0.12
	OPENBSD_4_8_BASE:1.19
	OPENBSD_4_7:1.19.0.8
	OPENBSD_4_7_BASE:1.19
	OPENBSD_4_6:1.19.0.10
	OPENBSD_4_6_BASE:1.19
	OPENBSD_4_5:1.19.0.6
	OPENBSD_4_5_BASE:1.19
	OPENBSD_4_4:1.19.0.4
	OPENBSD_4_4_BASE:1.19
	OPENBSD_4_3:1.19.0.2
	OPENBSD_4_3_BASE:1.19
	OPENBSD_4_2:1.18.0.2
	OPENBSD_4_2_BASE:1.18
	OPENBSD_4_1:1.17.0.4
	OPENBSD_4_1_BASE:1.17
	OPENBSD_4_0:1.17.0.2
	OPENBSD_4_0_BASE:1.17
	OPENBSD_3_9:1.16.0.4
	OPENBSD_3_9_BASE:1.16
	OPENBSD_3_8:1.16.0.2
	OPENBSD_3_8_BASE:1.16
	OPENBSD_3_7:1.14.0.2
	OPENBSD_3_7_BASE:1.14
	OPENBSD_3_6:1.12.0.2
	OPENBSD_3_6_BASE:1.12
	OPENBSD_3_5:1.11.0.4
	OPENBSD_3_5_BASE:1.11
	OPENBSD_3_4:1.11.0.2
	OPENBSD_3_4_BASE:1.11
	OPENBSD_3_3:1.10.0.8
	OPENBSD_3_3_BASE:1.10
	OPENBSD_3_2:1.10.0.6
	OPENBSD_3_2_BASE:1.10
	OPENBSD_3_1:1.10.0.4
	OPENBSD_3_1_BASE:1.10
	OPENBSD_3_0:1.10.0.2
	OPENBSD_3_0_BASE:1.10
	OPENBSD_2_9_BASE:1.9
	OPENBSD_2_9:1.9.0.4
	OPENBSD_2_8:1.9.0.2
	OPENBSD_2_8_BASE:1.9
	OPENBSD_2_7:1.7.0.2
	OPENBSD_2_7_BASE:1.7
	OPENBSD_2_6:1.5.0.10
	OPENBSD_2_6_BASE:1.5
	OPENBSD_2_5:1.5.0.8
	OPENBSD_2_5_BASE:1.5
	OPENBSD_2_4:1.5.0.6
	OPENBSD_2_4_BASE:1.5
	OPENBSD_2_3:1.5.0.4
	OPENBSD_2_3_BASE:1.5
	OPENBSD_2_2:1.5.0.2
	OPENBSD_2_2_BASE:1.5
	OPENBSD_2_1:1.3.0.4
	OPENBSD_2_1_BASE:1.3
	OPENBSD_2_0:1.3.0.2
	OPENBSD_2_0_BASE:1.3
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.24
date	2015.02.12.01.49.02;	author claudio;	state Exp;
branches;
next	1.23;
commitid	EszVZ4RtthRFw1UZ;

1.23
date	2015.02.08.02.02.21;	author claudio;	state Exp;
branches;
next	1.22;
commitid	BeiHMEAxvdCSt8SK;

1.22
date	2015.02.06.03.22.00;	author reyk;	state Exp;
branches;
next	1.21;
commitid	2ShTul7wSa8iiu5L;

1.21
date	2012.08.22.00.11.57;	author tedu;	state Exp;
branches;
next	1.20;

1.20
date	2011.07.09.00.45.40;	author henning;	state Exp;
branches;
next	1.19;

1.19
date	2007.12.14.18.35.46;	author deraadt;	state Exp;
branches;
next	1.18;

1.18
date	2007.06.04.12.20.24;	author henning;	state Exp;
branches;
next	1.17;

1.17
date	2006.05.27.19.16.37;	author claudio;	state Exp;
branches;
next	1.16;

1.16
date	2005.06.08.04.47.03;	author henning;	state Exp;
branches;
next	1.15;

1.15
date	2005.04.12.14.11.49;	author reyk;	state Exp;
branches;
next	1.14;

1.14
date	2005.02.10.14.25.08;	author itojun;	state Exp;
branches;
next	1.13;

1.13
date	2005.02.10.05.28.58;	author itojun;	state Exp;
branches;
next	1.12;

1.12
date	2004.06.25.20.05.40;	author henning;	state Exp;
branches;
next	1.11;

1.11
date	2003.05.14.23.37.05;	author itojun;	state Exp;
branches;
next	1.10;

1.10
date	2001.07.30.11.42.09;	author hugh;	state Exp;
branches;
next	1.9;

1.9
date	2000.06.14.01.05.04;	author itojun;	state Exp;
branches;
next	1.8;

1.8
date	2000.06.13.22.27.06;	author angelos;	state Exp;
branches;
next	1.7;

1.7
date	99.12.30.16.19.32;	author itojun;	state Exp;
branches;
next	1.6;

1.6
date	99.12.08.12.30.17;	author itojun;	state Exp;
branches;
next	1.5;

1.5
date	97.09.21.11.50.15;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	97.07.23.04.38.32;	author denny;	state Exp;
branches;
next	1.3;

1.3
date	96.08.16.09.29.31;	author mickey;	state Exp;
branches;
next	1.2;

1.2
date	96.06.26.05.37.19;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.45.50;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.45.50;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.24
log
@Switch the printing of open sockets from ugly KVM internals to use
kvm_getfiles. This allows to run netstat without any extra privileges
and removes another setgid program from base..
There is still kvm reader code in there which is used for debugging
purposes (crashdump). netstat should still behave mostly the same.
deraadt@@ and sthen@@ agree that it is time to get this puppy in.
@
text
@#	$OpenBSD: Makefile,v 1.23 2015/02/08 02:02:21 claudio Exp $

PROG=	netstat
SRCS=	if.c inet.c inet6.c main.c mbuf.c mroute.c route.c \
	unix.c mroute6.c net80211.c show.c
LDADD=	-lkvm -lutil
DPADD=	${LIBKVM} ${LIBUTIL}
CFLAGS+=	-Wall

.include <bsd.prog.mk>
@


1.23
log
@Do extend CFLAGS instead of assigning it so that DEBUG=-g works
OK deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.22 2015/02/06 03:22:00 reyk Exp $
a5 2
BINGRP=	kmem
BINMODE=2555
@


1.22
log
@Remove route/netstat -f encap in favor of ipsecctl -s flow.

OK deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.21 2012/08/22 00:11:57 tedu Exp $
d10 1
a10 1
CFLAGS=	-Wall
@


1.21
log
@-h flag to print human numbers in conjunction with -w -b
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.20 2011/07/09 00:45:40 henning Exp $
d10 1
@


1.20
log
@rmove rotten netatalk bits
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.19 2007/12/14 18:35:46 deraadt Exp $
d8 2
a9 2
LDADD=	-lkvm
DPADD=	${LIBKVM}
@


1.19
log
@remove 21 nlist variables, and instead use sysctl to query the kernel
turn on INET6 the default (remove the #ifdef's)
ok claudio reyk
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.18 2007/06/04 12:20:24 henning Exp $
d5 1
a5 1
	unix.c atalk.c mroute6.c net80211.c show.c
@


1.18
log
@remove IPX support, agreed by many
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.17 2006/05/27 19:16:37 claudio Exp $
a9 5
INET6?=	yes

.if (${INET6} != "no")
CPPFLAGS+=	-DINET6
.endif
@


1.17
log
@Moving netstat from kvm snooping to retrieving the routing tables via
sysctl. Most code is stolen from route -- which was stolen from netstat.
kvm snooping code is still in and useable. Put it in deraadt@@ henning@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.16 2005/06/08 04:47:03 henning Exp $
d4 1
a4 1
SRCS=	if.c inet.c inet6.c ipx.c main.c mbuf.c mroute.c route.c \
@


1.16
log
@bye bye, Xerox NS protocols
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.15 2005/04/12 14:11:49 reyk Exp $
d5 1
a5 1
	unix.c atalk.c mroute6.c net80211.c
@


1.15
log
@add '-W interface' for 802.11 wireless statistics of the net80211 stack.

ok dlg@@ deraadt@@ jmc@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.14 2005/02/10 14:25:08 itojun Exp $
d4 1
a4 1
SRCS=	if.c inet.c inet6.c ipx.c main.c mbuf.c mroute.c ns.c route.c \
@


1.14
log
@backout previous; i committed to wrong repository (i meant to commit kame)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.12 2004/06/25 20:05:40 henning Exp $
d5 1
a5 1
	unix.c atalk.c mroute6.c
@


1.13
log
@dccp support
@
text
@a15 2
CPPFLAGS+=	-DDCCP

@


1.12
log
@remove netiso
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.11 2003/05/14 23:37:05 itojun Exp $
d15 2
@


1.11
log
@use __KAME__ to determine kame-based kernel.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.10 2001/07/30 11:42:09 hugh Exp $
d4 2
a5 3
SRCS=	if.c inet.c inet6.c ipx.c iso.c main.c mbuf.c mroute.c ns.c route.c \
	tp_astring.c unix.c atalk.c mroute6.c
.PATH:	${.CURDIR}/../../sys/netiso
@


1.10
log
@another vax inspired object shuffle
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.9 2000/06/14 01:05:04 itojun Exp $
a15 2

CPPFLAGS+=	-DKAME_SCOPEID
@


1.9
log
@KAME_SCOPEID is necessary
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 2000/06/13 22:27:06 angelos Exp $
d4 2
a5 2
SRCS=	if.c inet.c ipx.c iso.c main.c mbuf.c mroute.c ns.c route.c \
	tp_astring.c unix.c atalk.c inet6.c mroute6.c
@


1.8
log
@Conditional INET6 inclusion (for crunchgen uses) -- default yes.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 1999/12/30 16:19:32 itojun Exp $
d17 1
a17 1
#CPPFLAGS+=	-DKAME_SCOPEID
@


1.7
log
@enable KAME scopeid hack (print link-local addresses with scope identifier
like "fe80::1@@de0").
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.6 1999/12/08 12:30:17 itojun Exp $
d11 1
d13 1
d15 3
a17 1
CPPFLAGS+=	-DKAME_SCOPEID
@


1.6
log
@add IPv6 support from KAME.  cleanup type matches with printf() format.
KAME_SCOPEID should be enabled after KAME get{addr,name}info(3) merge.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.5 1997/09/21 11:50:15 deraadt Exp $
d13 1
a13 1
#CPPFLAGS+=	-DKAME_SCOPEID
@


1.5
log
@$OpenBSD$
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 1997/07/23 04:38:32 denny Exp $
d5 1
a5 1
	tp_astring.c unix.c atalk.c
d11 3
@


1.4
log
@Add AppleTalk support. TODO: route.c does not handle netranges.
@
text
@d1 1
a1 2
#	$OpenBSD: Makefile,v 1.3 1996/08/16 09:29:31 mickey Exp $
#	$NetBSD: Makefile,v 1.11 1995/10/03 21:42:34 thorpej Exp $
@


1.3
log
@ipx.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.2 1996/06/26 05:37:19 deraadt Exp $
d6 1
a6 1
	tp_astring.c unix.c
@


1.2
log
@rcsid
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.11 1995/10/03 21:42:34 thorpej Exp $
d5 1
a5 1
SRCS=	if.c inet.c iso.c main.c mbuf.c mroute.c ns.c route.c \
@


1.1
log
@Initial revision
@
text
@d1 1
a2 1
#	from: @@(#)Makefile	8.1 (Berkeley) 6/12/93
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
