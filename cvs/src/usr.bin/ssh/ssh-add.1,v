head	1.64;
access;
symbols
	OPENBSD_6_1:1.62.0.10
	OPENBSD_6_1_BASE:1.62
	OPENBSD_6_0:1.62.0.8
	OPENBSD_6_0_BASE:1.62
	OPENBSD_5_9:1.62.0.4
	OPENBSD_5_9_BASE:1.62
	OPENBSD_5_8:1.62.0.2
	OPENBSD_5_8_BASE:1.62
	OPENBSD_5_7:1.61.0.2
	OPENBSD_5_7_BASE:1.61
	OPENBSD_5_6:1.59.0.6
	OPENBSD_5_6_BASE:1.59
	OPENBSD_5_5:1.59.0.4
	OPENBSD_5_5_BASE:1.59
	OPENBSD_5_4:1.58.0.4
	OPENBSD_5_4_BASE:1.58
	OPENBSD_5_3:1.58.0.2
	OPENBSD_5_3_BASE:1.58
	OPENBSD_5_2:1.56.0.4
	OPENBSD_5_2_BASE:1.56
	OPENBSD_5_1_BASE:1.56
	OPENBSD_5_1:1.56.0.2
	OPENBSD_5_0:1.55.0.4
	OPENBSD_5_0_BASE:1.55
	OPENBSD_4_9:1.55.0.2
	OPENBSD_4_9_BASE:1.55
	OPENBSD_4_8:1.52.0.4
	OPENBSD_4_8_BASE:1.52
	OPENBSD_4_7:1.52.0.2
	OPENBSD_4_7_BASE:1.52
	OPENBSD_4_6:1.46.0.12
	OPENBSD_4_6_BASE:1.46
	OPENBSD_4_5:1.46.0.8
	OPENBSD_4_5_BASE:1.46
	OPENBSD_4_4:1.46.0.6
	OPENBSD_4_4_BASE:1.46
	OPENBSD_4_3:1.46.0.4
	OPENBSD_4_3_BASE:1.46
	OPENBSD_4_2:1.46.0.2
	OPENBSD_4_2_BASE:1.46
	OPENBSD_4_1:1.43.0.6
	OPENBSD_4_1_BASE:1.43
	OPENBSD_4_0:1.43.0.8
	OPENBSD_4_0_BASE:1.43
	OPENBSD_3_9:1.43.0.4
	OPENBSD_3_9_BASE:1.43
	OPENBSD_3_8:1.43.0.2
	OPENBSD_3_8_BASE:1.43
	OPENBSD_3_7:1.42.0.2
	OPENBSD_3_7_BASE:1.42
	OPENBSD_3_6:1.41.0.2
	OPENBSD_3_6_BASE:1.41
	OPENBSD_3_5:1.40.0.2
	OPENBSD_3_5_BASE:1.40
	OPENBSD_3_4:1.39.0.2
	OPENBSD_3_4_BASE:1.39
	OPENBSD_3_3:1.37.0.2
	OPENBSD_3_3_BASE:1.37
	OPENBSD_3_2:1.35.0.2
	OPENBSD_3_2_BASE:1.35
	OPENBSD_3_1:1.30.0.2
	OPENBSD_3_1_BASE:1.30
	OPENBSD_3_0:1.27.0.2
	OPENBSD_3_0_BASE:1.27
	OPENBSD_2_9_BASE:1.24
	OPENBSD_2_9:1.24.0.2
	OPENBSD_2_8:1.17.0.2
	OPENBSD_2_8_BASE:1.17
	OPENBSD_2_7:1.13.0.2
	OPENBSD_2_7_BASE:1.13
	OPENBSD_2_6:1.6.0.2
	OPENBSD_2_6_BASE:1.6;
locks; strict;
comment	@.\" @;


1.64
date	2017.05.05.10.41.58;	author naddy;	state Exp;
branches;
next	1.63;
commitid	VIW7SWpf7IS4KFdz;

1.63
date	2017.05.03.06.32.02;	author jmc;	state Exp;
branches;
next	1.62;
commitid	NNIlzHLJ71CXYS5g;

1.62
date	2015.03.30.18.28.37;	author jmc;	state Exp;
branches;
next	1.61;
commitid	EfJyusjKmmOZx4cS;

1.61
date	2014.12.21.22.27.56;	author djm;	state Exp;
branches;
next	1.60;
commitid	EbtriidyZdsmXksl;

1.60
date	2014.08.30.15.33.50;	author sobrado;	state Exp;
branches;
next	1.59;
commitid	qDOCDATnMVba0efh;

1.59
date	2013.12.07.11.58.46;	author naddy;	state Exp;
branches;
next	1.58;

1.58
date	2012.12.03.08.33.02;	author jmc;	state Exp;
branches;
next	1.57;

1.57
date	2012.12.02.20.42.15;	author djm;	state Exp;
branches;
next	1.56;

1.56
date	2011.10.18.05.00.48;	author djm;	state Exp;
branches;
next	1.55;

1.55
date	2010.10.28.18.33.28;	author jmc;	state Exp;
branches;
next	1.54;

1.54
date	2010.09.04.09.38.34;	author jmc;	state Exp;
branches;
next	1.53;

1.53
date	2010.08.31.11.54.45;	author djm;	state Exp;
branches;
next	1.52;

1.52
date	2010.03.05.10.28.21;	author djm;	state Exp;
branches;
next	1.51;

1.51
date	2010.02.10.23.20.38;	author markus;	state Exp;
branches;
next	1.50;

1.50
date	2010.02.08.22.03.05;	author jmc;	state Exp;
branches;
next	1.49;

1.49
date	2010.02.08.10.50.20;	author markus;	state Exp;
branches;
next	1.48;

1.48
date	2009.10.22.15.02.12;	author sobrado;	state Exp;
branches;
next	1.47;

1.47
date	2009.10.22.12.35.53;	author sobrado;	state Exp;
branches;
next	1.46;

1.46
date	2007.06.12.13.41.03;	author jmc;	state Exp;
branches;
next	1.45;

1.45
date	2007.06.12.07.41.00;	author djm;	state Exp;
branches;
next	1.44;

1.44
date	2007.05.31.19.20.16;	author jmc;	state Exp;
branches;
next	1.43;

1.43
date	2005.04.21.06.17.50;	author djm;	state Exp;
branches;
next	1.42;

1.42
date	2005.03.01.17.32.19;	author jmc;	state Exp;
branches
	1.42.2.1;
next	1.41;

1.41
date	2004.08.30.21.22.49;	author jmc;	state Exp;
branches
	1.41.2.1;
next	1.40;

1.40
date	2003.11.25.23.10.08;	author matthieu;	state Exp;
branches
	1.40.2.1;
next	1.39;

1.39
date	2003.06.10.09.12.11;	author jmc;	state Exp;
branches
	1.39.2.1;
next	1.38;

1.38
date	2003.03.28.10.11.43;	author jmc;	state Exp;
branches;
next	1.37;

1.37
date	2003.02.10.11.51.47;	author markus;	state Exp;
branches
	1.37.2.1;
next	1.36;

1.36
date	2003.01.23.13.50.27;	author markus;	state Exp;
branches;
next	1.35;

1.35
date	2002.06.19.00.27.55;	author deraadt;	state Exp;
branches
	1.35.2.1;
next	1.34;

1.34
date	2002.06.10.17.36.22;	author stevesk;	state Exp;
branches;
next	1.33;

1.33
date	2002.06.05.21.55.44;	author markus;	state Exp;
branches;
next	1.32;

1.32
date	2002.06.05.19.57.12;	author markus;	state Exp;
branches;
next	1.31;

1.31
date	2002.06.05.16.35.45;	author markus;	state Exp;
branches;
next	1.30;

1.30
date	2002.02.04.20.41.16;	author stevesk;	state Exp;
branches
	1.30.2.1;
next	1.29;

1.29
date	2002.01.29.16.41.19;	author markus;	state Exp;
branches;
next	1.28;

1.28
date	2001.12.21.10.06.43;	author djm;	state Exp;
branches;
next	1.27;

1.27
date	2001.08.23.18.08.59;	author stevesk;	state Exp;
branches
	1.27.2.1;
next	1.26;

1.26
date	2001.08.03.10.31.19;	author jakob;	state Exp;
branches;
next	1.25;

1.25
date	2001.05.05.13.42.52;	author stevesk;	state Exp;
branches;
next	1.24;

1.24
date	2001.04.10.09.13.21;	author itojun;	state Exp;
branches
	1.24.2.1;
next	1.23;

1.23
date	2001.04.09.15.19.49;	author markus;	state Exp;
branches;
next	1.22;

1.22
date	2001.03.02.18.54.31;	author deraadt;	state Exp;
branches;
next	1.21;

1.21
date	2001.02.08.19.22.38;	author itojun;	state Exp;
branches;
next	1.20;

1.20
date	2001.01.29.01.58.18;	author niklas;	state Exp;
branches;
next	1.19;

1.19
date	2001.01.28.10.24.04;	author markus;	state Exp;
branches;
next	1.18;

1.18
date	2000.11.10.05.10.40;	author aaron;	state Exp;
branches;
next	1.17;

1.17
date	2000.09.07.20.27.53;	author deraadt;	state Exp;
branches
	1.17.2.1;
next	1.16;

1.16
date	2000.09.03.15.23.28;	author itojun;	state Exp;
branches;
next	1.15;

1.15
date	2000.08.25.16.16.15;	author deraadt;	state Exp;
branches;
next	1.14;

1.14
date	2000.08.19.21.34.43;	author markus;	state Exp;
branches;
next	1.13;

1.13
date	2000.05.03.18.04.38;	author markus;	state Exp;
branches
	1.13.2.1;
next	1.12;

1.12
date	2000.04.12.21.47.50;	author aaron;	state Exp;
branches;
next	1.11;

1.11
date	2000.03.23.21.11.38;	author aaron;	state Exp;
branches;
next	1.10;

1.10
date	2000.01.22.02.17.50;	author aaron;	state Exp;
branches;
next	1.9;

1.9
date	99.12.02.20.05.40;	author markus;	state Exp;
branches;
next	1.8;

1.8
date	99.11.24.16.13.45;	author markus;	state Exp;
branches;
next	1.7;

1.7
date	99.11.16.22.49.28;	author markus;	state Exp;
branches;
next	1.6;

1.6
date	99.10.17.20.35.46;	author aaron;	state Exp;
branches;
next	1.5;

1.5
date	99.10.17.00.31.06;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	99.10.11.20.40.07;	author markus;	state Exp;
branches;
next	1.3;

1.3
date	99.10.02.13.10.26;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	99.09.26.22.30.06;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	99.09.26.20.53.37;	author deraadt;	state Exp;
branches;
next	;

1.13.2.1
date	2000.09.01.18.23.23;	author jason;	state Exp;
branches;
next	1.13.2.2;

1.13.2.2
date	2000.11.08.21.31.19;	author jason;	state Exp;
branches;
next	1.13.2.3;

1.13.2.3
date	2001.03.12.15.44.15;	author jason;	state Exp;
branches;
next	1.13.2.4;

1.13.2.4
date	2001.03.21.18.53.07;	author jason;	state Exp;
branches;
next	;

1.17.2.1
date	2001.02.16.20.13.16;	author jason;	state Exp;
branches;
next	1.17.2.2;

1.17.2.2
date	2001.02.19.17.19.26;	author jason;	state Exp;
branches;
next	1.17.2.3;

1.17.2.3
date	2001.03.21.19.46.29;	author jason;	state Exp;
branches;
next	1.17.2.4;

1.17.2.4
date	2001.05.07.21.09.35;	author jason;	state Exp;
branches;
next	1.17.2.5;

1.17.2.5
date	2001.09.27.00.15.42;	author miod;	state Exp;
branches;
next	1.17.2.6;

1.17.2.6
date	2002.03.08.17.04.43;	author brad;	state Exp;
branches;
next	;

1.24.2.1
date	2001.09.27.19.03.55;	author jason;	state Exp;
branches;
next	1.24.2.2;

1.24.2.2
date	2002.03.09.00.20.45;	author miod;	state Exp;
branches;
next	;

1.27.2.1
date	2002.03.07.17.37.47;	author jason;	state Exp;
branches;
next	1.27.2.2;

1.27.2.2
date	2002.06.22.07.23.17;	author miod;	state Exp;
branches;
next	;

1.30.2.1
date	2002.06.26.15.30.39;	author jason;	state Exp;
branches;
next	1.30.2.2;

1.30.2.2
date	2003.04.03.22.35.17;	author miod;	state Exp;
branches;
next	;

1.35.2.1
date	2003.04.01.00.12.14;	author margarida;	state Exp;
branches;
next	1.35.2.2;

1.35.2.2
date	2003.04.03.23.27.12;	author margarida;	state Exp;
branches;
next	1.35.2.3;

1.35.2.3
date	2003.09.16.21.20.27;	author brad;	state Exp;
branches;
next	;

1.37.2.1
date	2003.05.11.12.01.52;	author margarida;	state Exp;
branches;
next	1.37.2.2;

1.37.2.2
date	2003.09.16.20.50.43;	author brad;	state Exp;
branches;
next	1.37.2.3;

1.37.2.3
date	2004.03.04.18.18.16;	author brad;	state Exp;
branches;
next	;

1.39.2.1
date	2004.02.28.03.51.34;	author brad;	state Exp;
branches;
next	1.39.2.2;

1.39.2.2
date	2004.08.19.22.37.32;	author brad;	state Exp;
branches;
next	;

1.40.2.1
date	2005.03.10.17.15.04;	author brad;	state Exp;
branches;
next	;

1.41.2.1
date	2005.03.10.16.28.28;	author brad;	state Exp;
branches;
next	1.41.2.2;

1.41.2.2
date	2005.09.02.03.45.00;	author brad;	state Exp;
branches;
next	;

1.42.2.1
date	2005.09.04.18.40.07;	author brad;	state Exp;
branches;
next	;


desc
@@


1.64
log
@remove superfluous protocol 2 mentions; ok jmc@@
@
text
@.\"	$OpenBSD: ssh-add.1,v 1.63 2017/05/03 06:32:02 jmc Exp $
.\"
.\" Author: Tatu Ylonen <ylo@@cs.hut.fi>
.\" Copyright (c) 1995 Tatu Ylonen <ylo@@cs.hut.fi>, Espoo, Finland
.\"                    All rights reserved
.\"
.\" As far as I am concerned, the code I have written for this software
.\" can be used freely for any purpose.  Any derived versions of this
.\" software must be clearly marked as such, and if the derived work is
.\" incompatible with the protocol description in the RFC file, it must be
.\" called by a name other than "ssh" or "Secure Shell".
.\"
.\"
.\" Copyright (c) 1999,2000 Markus Friedl.  All rights reserved.
.\" Copyright (c) 1999 Aaron Campbell.  All rights reserved.
.\" Copyright (c) 1999 Theo de Raadt.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.Dd $Mdocdate: May 3 2017 $
.Dt SSH-ADD 1
.Os
.Sh NAME
.Nm ssh-add
.Nd adds private key identities to the authentication agent
.Sh SYNOPSIS
.Nm ssh-add
.Op Fl cDdkLlXx
.Op Fl E Ar fingerprint_hash
.Op Fl t Ar life
.Op Ar
.Nm ssh-add
.Fl s Ar pkcs11
.Nm ssh-add
.Fl e Ar pkcs11
.Sh DESCRIPTION
.Nm
adds private key identities to the authentication agent,
.Xr ssh-agent 1 .
When run without arguments, it adds the files
.Pa ~/.ssh/id_rsa ,
.Pa ~/.ssh/id_dsa ,
.Pa ~/.ssh/id_ecdsa ,
and
.Pa ~/.ssh/id_ed25519 .
After loading a private key,
.Nm
will try to load corresponding certificate information from the
filename obtained by appending
.Pa -cert.pub
to the name of the private key file.
Alternative file names can be given on the command line.
.Pp
If any file requires a passphrase,
.Nm
asks for the passphrase from the user.
The passphrase is read from the user's tty.
.Nm
retries the last passphrase if multiple identity files are given.
.Pp
The authentication agent must be running and the
.Ev SSH_AUTH_SOCK
environment variable must contain the name of its socket for
.Nm
to work.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl c
Indicates that added identities should be subject to confirmation before
being used for authentication.
Confirmation is performed by
.Xr ssh-askpass 1 .
Successful confirmation is signaled by a zero exit status from
.Xr ssh-askpass 1 ,
rather than text entered into the requester.
.It Fl D
Deletes all identities from the agent.
.It Fl d
Instead of adding identities, removes identities from the agent.
If
.Nm
has been run without arguments, the keys for the default identities and
their corresponding certificates will be removed.
Otherwise, the argument list will be interpreted as a list of paths to
public key files to specify keys and certificates to be removed from the agent.
If no public key is found at a given path,
.Nm
will append
.Pa .pub
and retry.
.It Fl E Ar fingerprint_hash
Specifies the hash algorithm used when displaying key fingerprints.
Valid options are:
.Dq md5
and
.Dq sha256 .
The default is
.Dq sha256 .
.It Fl e Ar pkcs11
Remove keys provided by the PKCS#11 shared library
.Ar pkcs11 .
.It Fl k
When loading keys into or deleting keys from the agent, process plain private
keys only and skip certificates.
.It Fl L
Lists public key parameters of all identities currently represented
by the agent.
.It Fl l
Lists fingerprints of all identities currently represented by the agent.
.It Fl s Ar pkcs11
Add keys provided by the PKCS#11 shared library
.Ar pkcs11 .
.It Fl t Ar life
Set a maximum lifetime when adding identities to an agent.
The lifetime may be specified in seconds or in a time format
specified in
.Xr sshd_config 5 .
.It Fl X
Unlock the agent.
.It Fl x
Lock the agent with a password.
.El
.Sh ENVIRONMENT
.Bl -tag -width Ds
.It Ev "DISPLAY" and "SSH_ASKPASS"
If
.Nm
needs a passphrase, it will read the passphrase from the current
terminal if it was run from a terminal.
If
.Nm
does not have a terminal associated with it but
.Ev DISPLAY
and
.Ev SSH_ASKPASS
are set, it will execute the program specified by
.Ev SSH_ASKPASS
(by default
.Dq ssh-askpass )
and open an X11 window to read the passphrase.
This is particularly useful when calling
.Nm
from a
.Pa .xsession
or related script.
(Note that on some machines it
may be necessary to redirect the input from
.Pa /dev/null
to make this work.)
.It Ev SSH_AUTH_SOCK
Identifies the path of a
.Ux Ns -domain
socket used to communicate with the agent.
.El
.Sh FILES
.Bl -tag -width Ds
.It Pa ~/.ssh/id_dsa
Contains the DSA authentication identity of the user.
.It Pa ~/.ssh/id_ecdsa
Contains the ECDSA authentication identity of the user.
.It Pa ~/.ssh/id_ed25519
Contains the Ed25519 authentication identity of the user.
.It Pa ~/.ssh/id_rsa
Contains the RSA authentication identity of the user.
.El
.Pp
Identity files should not be readable by anyone but the user.
Note that
.Nm
ignores identity files if they are accessible by others.
.Sh EXIT STATUS
Exit status is 0 on success, 1 if the specified command fails,
and 2 if
.Nm
is unable to contact the authentication agent.
.Sh SEE ALSO
.Xr ssh 1 ,
.Xr ssh-agent 1 ,
.Xr ssh-askpass 1 ,
.Xr ssh-keygen 1 ,
.Xr sshd 8
.Sh AUTHORS
OpenSSH is a derivative of the original and free
ssh 1.2.12 release by Tatu Ylonen.
Aaron Campbell, Bob Beck, Markus Friedl, Niels Provos,
Theo de Raadt and Dug Song
removed many bugs, re-added newer features and
created OpenSSH.
Markus Friedl contributed the support for SSH
protocol versions 1.5 and 2.0.
@


1.63
log
@more protocol 1 stuff to go; ok djm
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.62 2015/03/30 18:28:37 jmc Exp $
d38 1
a38 1
.Dd $Mdocdate: March 30 2015 $
d177 1
a177 1
Contains the protocol version 2 DSA authentication identity of the user.
d179 1
a179 1
Contains the protocol version 2 ECDSA authentication identity of the user.
d181 1
a181 1
Contains the protocol version 2 Ed25519 authentication identity of the user.
d183 1
a183 1
Contains the protocol version 2 RSA authentication identity of the user.
@


1.62
log
@ssh-askpass(1) is the default, overridden by SSH_ASKPASS;
diff originally from jiri b;
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.61 2014/12/21 22:27:56 djm Exp $
d38 1
a38 1
.Dd $Mdocdate: December 21 2014 $
a61 1
.Pa ~/.ssh/id_ed25519
d63 1
a63 1
.Pa ~/.ssh/identity .
a175 2
.It Pa ~/.ssh/identity
Contains the protocol version 1 RSA authentication identity of the user.
@


1.61
log
@Add FingerprintHash option to control algorithm used for key
fingerprints. Default changes from MD5 to SHA256 and format
from hex to base64.

Feedback and ok naddy@@ markus@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.60 2014/08/30 15:33:50 sobrado Exp $
d38 1
a38 1
.Dd $Mdocdate: August 30 2014 $
d91 5
a95 6
Confirmation is performed by the
.Ev SSH_ASKPASS
program mentioned below.
Successful confirmation is signaled by a zero exit status from the
.Ev SSH_ASKPASS
program, rather than text entered into the requester.
d158 2
d201 1
@


1.60
log
@improve capitalization for the Ed25519 public-key signature system.

ok djm@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.59 2013/12/07 11:58:46 naddy Exp $
d38 1
a38 1
.Dd $Mdocdate: December 7 2013 $
d47 1
d112 8
@


1.59
log
@add missing mentions of ed25519; ok djm@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.58 2012/12/03 08:33:02 jmc Exp $
d38 1
a38 1
.Dd $Mdocdate: December 3 2012 $
d174 1
a174 1
Contains the protocol version 2 ED25519 authentication identity of the user.
@


1.58
log
@tweak previous;
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.57 2012/12/02 20:42:15 djm Exp $
d38 1
a38 1
.Dd $Mdocdate: December 2 2012 $
d60 2
a61 1
.Pa ~/.ssh/id_ecdsa
d173 2
@


1.57
log
@make deleting explicit keys "ssh-add -d" symmetric with adding keys -
try to delete the corresponding certificate too and respect the -k option
to allow deleting of the key only; feedback and ok markus@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.56 2011/10/18 05:00:48 djm Exp $
d38 1
a38 1
.Dd $Mdocdate: October 18 2011 $
d102 1
a102 1
their corresponding certificateswill be removed.
@


1.56
log
@new "ssh-add -k" option to load plain keys (skipping certificates);
"looks ok" markus@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.55 2010/10/28 18:33:28 jmc Exp $
d38 1
a38 1
.Dd $Mdocdate: October 28 2010 $
d101 2
a102 2
has been run without arguments, the keys for the default identities will
be removed.
d104 1
a104 1
public key files and matching keys will be removed from the agent.
d114 2
a115 2
When loading keys into the agent, load plain private keys only and skip
certificates.
@


1.55
log
@knock out some "-*- nroff -*-" lines;
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.54 2010/09/04 09:38:34 jmc Exp $
d38 1
a38 1
.Dd $Mdocdate: September 4 2010 $
d46 1
a46 1
.Op Fl cDdLlXx
d113 3
@


1.54
log
@two more EXIT STATUS sections;
@
text
@d1 1
a1 3
.\"	$OpenBSD: ssh-add.1,v 1.53 2010/08/31 11:54:45 djm Exp $
.\"
.\"  -*- nroff -*-
d38 1
a38 1
.Dd $Mdocdate: August 31 2010 $
@


1.53
log
@Implement Elliptic Curve Cryptography modes for key exchange (ECDH) and
host/user keys (ECDSA) as specified by RFC5656. ECDH and ECDSA offer
better performance than plain DH and DSA at the same equivalent symmetric
key length, as well as much shorter keys.

Only the mandatory sections of RFC5656 are implemented, specifically the
three REQUIRED curves nistp256, nistp384 and nistp521 and only ECDH and
ECDSA. Point compression (optional in RFC5656 is NOT implemented).

Certificate host and user keys using the new ECDSA key types are supported.

Note that this code has not been tested for interoperability and may be
subject to change.

feedback and ok markus@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.52 2010/03/05 10:28:21 djm Exp $
d40 1
a40 1
.Dd $Mdocdate: March 5 2010 $
d179 1
a179 1
.Sh DIAGNOSTICS
@


1.52
log
@mention loading of certificate files from [private]-cert.pub when
they are present; feedback and ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.51 2010/02/10 23:20:38 markus Exp $
d40 1
a40 1
.Dd $Mdocdate: February 10 2010 $
d45 1
a45 1
.Nd adds RSA or DSA identities to the authentication agent
d57 1
a57 1
adds RSA or DSA identities to the authentication agent,
d61 2
a62 1
.Pa ~/.ssh/id_dsa
d169 2
@


1.51
log
@pkcs#11 is no longer optional; improve wording; ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.50 2010/02/08 22:03:05 jmc Exp $
d40 1
a40 1
.Dd $Mdocdate: February 8 2010 $
d64 6
d71 1
@


1.50
log
@tweak previous; ok markus
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.49 2010/02/08 10:50:20 markus Exp $
d105 1
a105 1
Remove key provided by
d113 1
a113 1
Add key provided by
@


1.49
log
@replace our obsolete smartcard code with PKCS#11.
	ftp://ftp.rsasecurity.com/pub/pkcs/pkcs-11/v2-20/pkcs-11v2-20.pdf
ssh(1) and ssh-keygen(1) use dlopen(3) directly to talk to a PKCS#11
provider (shared library) while ssh-agent(1) delegates PKCS#11 to
a forked a ssh-pkcs11-helper process.
PKCS#11 is currently a compile time option.
feedback and ok djm@@; inspired by patches from Alon Bar-Lev
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.48 2009/10/22 15:02:12 sobrado Exp $
d40 1
a40 1
.Dd $Mdocdate: October 22 2009 $
d52 1
a52 1
.Fl s Ar reader
d54 1
a54 1
.Fl e Ar reader
d113 1
a113 1
Add key provider by
@


1.48
log
@write UNIX-domain in a more consistent way; while here, replace a
few remaining ".Tn UNIX" macros with ".Ux" ones.

pointed out by ratchov@@, thanks!

ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.47 2009/10/22 12:35:53 sobrado Exp $
d104 3
a106 3
.It Fl e Ar reader
Remove key in smartcard
.Ar reader .
d112 3
a114 3
.It Fl s Ar reader
Add key in smartcard
.Ar reader .
@


1.47
log
@use the UNIX-related macros (.At and .Ux) where appropriate.

ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.46 2007/06/12 13:41:03 jmc Exp $
d40 1
a40 1
.Dd $Mdocdate: June 12 2007 $
d152 2
a153 2
.Ux
domain socket used to communicate with the agent.
@


1.46
log
@identies -> identities;
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.45 2007/06/12 07:41:00 djm Exp $
d40 1
a40 1
.Dd $Mdocdate: May 31 2007 $
d151 3
a153 2
Identifies the path of a unix-domain socket used to communicate with the
agent.
@


1.45
log
@better document ssh-add's -d option (delete identies from agent), bz#1224
new text based on some provided by andrewmc-debian AT celt.dias.ie;
ok dtucker@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.44 2007/05/31 19:20:16 jmc Exp $
d92 1
a92 1
Instead of adding identies, removes identities from the agent.
d95 1
a95 1
has been run without arguments, the keys for the default identies will
@


1.44
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.43 2005/04/21 06:17:50 djm Exp $
d40 1
a40 1
.Dd $Mdocdate$
d92 12
a103 1
Instead of adding the identity, removes the identity from the agent.
@


1.43
log
@OpenSSH doesn't ever look at the $HOME environment variable, so don't say
that we do (bz #623); ok deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.42 2005/03/01 17:32:19 jmc Exp $
d40 1
a40 1
.Dd September 25, 1999
@


1.42
log
@sort options;
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.41 2004/08/30 21:22:49 jmc Exp $
d60 2
a61 2
.Pa $HOME/.ssh/id_rsa ,
.Pa $HOME/.ssh/id_dsa
d63 1
a63 1
.Pa $HOME/.ssh/identity .
d145 1
a145 1
.It Pa $HOME/.ssh/identity
d147 1
a147 1
.It Pa $HOME/.ssh/id_dsa
d149 1
a149 1
.It Pa $HOME/.ssh/id_rsa
@


1.42.2.1
log
@upgrade to OpenSSH 4.2
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.43 2005/04/21 06:17:50 djm Exp $
d60 2
a61 2
.Pa ~/.ssh/id_rsa ,
.Pa ~/.ssh/id_dsa
d63 1
a63 1
.Pa ~/.ssh/identity .
d145 1
a145 1
.It Pa ~/.ssh/identity
d147 1
a147 1
.It Pa ~/.ssh/id_dsa
d149 1
a149 1
.It Pa ~/.ssh/id_rsa
@


1.41
log
@.Xsession -> .xsession;
originally from a pr from f at obiit dot org, but missed by myself;

ok markus@@ matthieu@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.40 2003/11/25 23:10:08 matthieu Exp $
d48 1
a48 1
.Op Fl lLdDxXc
a79 17
.It Fl l
Lists fingerprints of all identities currently represented by the agent.
.It Fl L
Lists public key parameters of all identities currently represented by the agent.
.It Fl d
Instead of adding the identity, removes the identity from the agent.
.It Fl D
Deletes all identities from the agent.
.It Fl x
Lock the agent with a password.
.It Fl X
Unlock the agent.
.It Fl t Ar life
Set a maximum lifetime when adding identities to an agent.
The lifetime may be specified in seconds or in a time format
specified in
.Xr sshd_config 5 .
d89 12
d104 9
a112 3
.It Fl e Ar reader
Remove key in smartcard
.Ar reader .
@


1.41.2.1
log
@upgrade to OpenSSH 4.0
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.42 2005/03/01 17:32:19 jmc Exp $
d48 1
a48 1
.Op Fl cDdLlXx
d80 17
d106 3
a108 4
.It Fl D
Deletes all identities from the agent.
.It Fl d
Instead of adding the identity, removes the identity from the agent.
a111 17
.It Fl L
Lists public key parameters of all identities currently represented
by the agent.
.It Fl l
Lists fingerprints of all identities currently represented by the agent.
.It Fl s Ar reader
Add key in smartcard
.Ar reader .
.It Fl t Ar life
Set a maximum lifetime when adding identities to an agent.
The lifetime may be specified in seconds or in a time format
specified in
.Xr sshd_config 5 .
.It Fl X
Unlock the agent.
.It Fl x
Lock the agent with a password.
@


1.41.2.2
log
@upgrade to OpenSSH 4.2
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.43 2005/04/21 06:17:50 djm Exp $
d60 2
a61 2
.Pa ~/.ssh/id_rsa ,
.Pa ~/.ssh/id_dsa
d63 1
a63 1
.Pa ~/.ssh/identity .
d145 1
a145 1
.It Pa ~/.ssh/identity
d147 1
a147 1
.It Pa ~/.ssh/id_dsa
d149 1
a149 1
.It Pa ~/.ssh/id_rsa
@


1.40
log
@ssh-add doesn't need to be a descendant of ssh-agent. Ok markus@@, jmc@@.
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.39 2003/06/10 09:12:11 jmc Exp $
d132 1
a132 1
.Pa .Xsession
@


1.40.2.1
log
@upgrade to OpenSSH 4.0
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.42 2005/03/01 17:32:19 jmc Exp $
d48 1
a48 1
.Op Fl cDdLlXx
d80 17
d106 3
a108 4
.It Fl D
Deletes all identities from the agent.
.It Fl d
Instead of adding the identity, removes the identity from the agent.
a111 17
.It Fl L
Lists public key parameters of all identities currently represented
by the agent.
.It Fl l
Lists fingerprints of all identities currently represented by the agent.
.It Fl s Ar reader
Add key in smartcard
.Ar reader .
.It Fl t Ar life
Set a maximum lifetime when adding identities to an agent.
The lifetime may be specified in seconds or in a time format
specified in
.Xr sshd_config 5 .
.It Fl X
Unlock the agent.
.It Fl x
Lock the agent with a password.
d132 1
a132 1
.Pa .xsession
@


1.39
log
@- section reorder
- COMPATIBILITY merge
- macro cleanup
- kill whitespace at EOL
- new sentence, new line

ssh pages ok markus@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.38 2003/03/28 10:11:43 jmc Exp $
d72 3
a74 2
The authentication agent must be running and must be an ancestor of
the current process for
@


1.39.2.1
log
@upgrade to OpenSSH 3.8
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.40 2003/11/25 23:10:08 matthieu Exp $
d72 2
a73 3
The authentication agent must be running and the
.Ev SSH_AUTH_SOCK
environment variable must contain the name of its socket for
@


1.39.2.2
log
@upgrade to OpenSSH 3.9
@
text
@@


1.38
log
@- killed whitespace
- new sentence new line
- .Bk for arguments

ok markus@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.37 2003/02/10 11:51:47 markus Exp $
a111 14
.Sh FILES
.Bl -tag -width Ds
.It Pa $HOME/.ssh/identity
Contains the protocol version 1 RSA authentication identity of the user.
.It Pa $HOME/.ssh/id_dsa
Contains the protocol version 2 DSA authentication identity of the user.
.It Pa $HOME/.ssh/id_rsa
Contains the protocol version 2 RSA authentication identity of the user.
.El
.Pp
Identity files should not be readable by anyone but the user.
Note that
.Nm
ignores identity files if they are accessible by others.
d141 14
d160 5
a173 5
.Sh SEE ALSO
.Xr ssh 1 ,
.Xr ssh-agent 1 ,
.Xr ssh-keygen 1 ,
.Xr sshd 8
@


1.37
log
@xref sshd_config.5 (not sshd.8); mark@@summersault.com; bug #490
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.36 2003/01/23 13:50:27 markus Exp $
d98 2
a99 1
being used for authentication. Confirmation is performed by the 
d101 2
a102 2
program mentioned below. Successful confirmation is signaled by a zero
exit status from the 
@


1.37.2.1
log
@Update OpenSSH to version 3.6.1
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.35.2.2 2003/04/03 23:27:12 margarida Exp $
d98 1
a98 2
being used for authentication.
Confirmation is performed by the
d100 2
a101 2
program mentioned below.
Successful confirmation is signaled by a zero exit status from the
@


1.37.2.2
log
@upgrade to OpenSSH 3.7
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.39 2003/06/10 09:12:11 jmc Exp $
d112 14
a154 14
.Sh FILES
.Bl -tag -width Ds
.It Pa $HOME/.ssh/identity
Contains the protocol version 1 RSA authentication identity of the user.
.It Pa $HOME/.ssh/id_dsa
Contains the protocol version 2 DSA authentication identity of the user.
.It Pa $HOME/.ssh/id_rsa
Contains the protocol version 2 RSA authentication identity of the user.
.El
.Pp
Identity files should not be readable by anyone but the user.
Note that
.Nm
ignores identity files if they are accessible by others.
a159 5
.Sh SEE ALSO
.Xr ssh 1 ,
.Xr ssh-agent 1 ,
.Xr ssh-keygen 1 ,
.Xr sshd 8
d169 5
@


1.37.2.3
log
@upgrade to OpenSSH 3.8upgrade to OpenSSH 3.8upgrade to OpenSSH 3.8
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.40 2003/11/25 23:10:08 matthieu Exp $
d72 2
a73 3
The authentication agent must be running and the
.Ev SSH_AUTH_SOCK
environment variable must contain the name of its socket for
@


1.36
log
@ssh-add -c, prompt user for confirmation (using ssh-askpass) when
private agent key is used; with djm@@; test by dugsong@@, djm@@; ok deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.35 2002/06/19 00:27:55 deraadt Exp $
d95 1
a95 1
.Xr sshd 8 .
@


1.35
log
@KNF done automatically while reading....
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.34 2002/06/10 17:36:22 stevesk Exp $
d48 1
a48 1
.Op Fl lLdDxX
d96 8
@


1.35.2.1
log
@Update to OpenSSH 3.6
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.37 2003/02/10 11:51:47 markus Exp $
d48 1
a48 1
.Op Fl lLdDxXc
d95 1
a95 9
.Xr sshd_config 5 .
.It Fl c
Indicates that added identities should be subject to confirmation before
being used for authentication. Confirmation is performed by the 
.Ev SSH_ASKPASS
program mentioned below. Successful confirmation is signaled by a zero
exit status from the 
.Ev SSH_ASKPASS
program, rather than text entered into the requester.
@


1.35.2.2
log
@Update to OpenSSH 3.6.1
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.38 2003/03/28 10:11:43 jmc Exp $
d98 1
a98 2
being used for authentication.
Confirmation is performed by the
d100 2
a101 2
program mentioned below.
Successful confirmation is signaled by a zero exit status from the
@


1.35.2.3
log
@upgrade to OpenSSH 3.7
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.39 2003/06/10 09:12:11 jmc Exp $
d112 14
a154 14
.Sh FILES
.Bl -tag -width Ds
.It Pa $HOME/.ssh/identity
Contains the protocol version 1 RSA authentication identity of the user.
.It Pa $HOME/.ssh/id_dsa
Contains the protocol version 2 DSA authentication identity of the user.
.It Pa $HOME/.ssh/id_rsa
Contains the protocol version 2 RSA authentication identity of the user.
.El
.Pp
Identity files should not be readable by anyone but the user.
Note that
.Nm
ignores identity files if they are accessible by others.
a159 5
.Sh SEE ALSO
.Xr ssh 1 ,
.Xr ssh-agent 1 ,
.Xr ssh-keygen 1 ,
.Xr sshd 8
d169 5
@


1.34
log
@use convtime() to parse and validate key lifetime.  can now
use '-t 2h' etc.  ok markus@@ provos@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.33 2002/06/05 21:55:44 markus Exp $
d61 1
a61 1
.Pa $HOME/.ssh/id_dsa 
@


1.33
log
@ssh-add -t life,  Set lifetime (in seconds) when adding identities; ok provos@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.32 2002/06/05 19:57:12 markus Exp $
d93 3
a95 1
The lifetime is specified in seconds.
@


1.32
log
@ssh-add -x for lock and -X for unlocking the agent.
todo: encrypt private keys with locked...
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.31 2002/06/05 16:35:45 markus Exp $
d49 1
d91 3
@


1.31
log
@mention $SSH_AUTH_SOCK; dave@@ugc.org.uk
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.30 2002/02/04 20:41:16 stevesk Exp $
d48 1
a48 1
.Op Fl lLdD
d86 4
@


1.30
log
@more sync for default ssh-add identities; ok markus@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.29 2002/01/29 16:41:19 markus Exp $
d132 3
@


1.30.2.1
log
@Pull in OpenSSH-3.4
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.35 2002/06/19 00:27:55 deraadt Exp $
d48 1
a48 2
.Op Fl lLdDxX
.Op Fl t Ar life
d60 1
a60 1
.Pa $HOME/.ssh/id_dsa
a85 9
.It Fl x
Lock the agent with a password.
.It Fl X
Unlock the agent.
.It Fl t Ar life
Set a maximum lifetime when adding identities to an agent.
The lifetime may be specified in seconds or in a time format
specified in
.Xr sshd 8 .
a131 3
.It Ev SSH_AUTH_SOCK
Identifies the path of a unix-domain socket used to communicate with the
agent.
@


1.30.2.2
log
@Merge OpenSSH 3.6.1
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.38 2003/03/28 10:11:43 jmc Exp $
d48 1
a48 1
.Op Fl lLdDxXc
d95 1
a95 10
.Xr sshd_config 5 .
.It Fl c
Indicates that added identities should be subject to confirmation before
being used for authentication.
Confirmation is performed by the
.Ev SSH_ASKPASS
program mentioned below.
Successful confirmation is signaled by a zero exit status from the
.Ev SSH_ASKPASS
program, rather than text entered into the requester.
@


1.29
log
@add DIAGNOSTICS; ok stevesk@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.28 2001/12/21 10:06:43 djm Exp $
a96 10
This file should not be readable by anyone but the user.
Note that
.Nm
ignores this file if it is accessible by others.
It is possible to
specify a passphrase when generating the key; that passphrase will be
used to encrypt the private part of this file.
This is the default file added by
.Nm
when no other files have been specified.
d102 5
@


1.28
log
@Try all standard key files (id_rsa, id_dsa, identity) when invoked with
no arguments; ok markus@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.27 2001/08/23 18:08:59 stevesk Exp $
d138 5
@


1.27
log
@minor cleanup
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.26 2001/08/03 10:31:19 jakob Exp $
d58 4
a61 1
When run without arguments, it adds the file
@


1.27.2.1
log
@Update to OpenSSH-3.1 on 3.0-stable branch
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.30 2002/02/04 20:41:16 stevesk Exp $
d58 1
a58 4
When run without arguments, it adds the files
.Pa $HOME/.ssh/id_rsa ,
.Pa $HOME/.ssh/id_dsa 
and
d94 10
a108 5
.Pp
Identity files should not be readable by anyone but the user.
Note that
.Nm
ignores identity files if they are accessible by others.
a134 5
.Sh DIAGNOSTICS
Exit status is 0 on success, 1 if the specified command fails,
and 2 if
.Nm
is unable to contact the authentication agent.
@


1.27.2.2
log
@Update OpenSSH to version 3.3 (with local changes, configuration files still
living in /etc and privsep user being nobody).
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.27.2.1 2002/03/07 17:37:47 jason Exp $
d48 1
a48 2
.Op Fl lLdDxX
.Op Fl t Ar life
d60 1
a60 1
.Pa $HOME/.ssh/id_dsa
a85 9
.It Fl x
Lock the agent with a password.
.It Fl X
Unlock the agent.
.It Fl t Ar life
Set a maximum lifetime when adding identities to an agent.
The lifetime may be specified in seconds or in a time format
specified in
.Xr sshd 8 .
a131 3
.It Ev SSH_AUTH_SOCK
Identifies the path of a unix-domain socket used to communicate with the
agent.
@


1.26
log
@document smartcard options. ok markus@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.25 2001/05/05 13:42:52 stevesk Exp $
d45 1
a45 1
.Nd adds RSA or DSA identities for the authentication agent
@


1.25
log
@typos, grammar
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.24 2001/04/10 09:13:21 itojun Exp $
d50 4
d83 6
@


1.24
log
@document id_rsa{.pub,}.  markus ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.23 2001/04/09 15:19:49 markus Exp $
d60 1
a60 1
The Passphrase it is read from the user's tty.
@


1.24.2.1
log
@Pull in OpenSSH-2.9.9
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.27 2001/08/23 18:08:59 stevesk Exp $
d45 1
a45 1
.Nd adds RSA or DSA identities to the authentication agent
a49 4
.Nm ssh-add
.Fl s Ar reader
.Nm ssh-add
.Fl e Ar reader
d60 1
a60 1
The passphrase is read from the user's tty.
a78 6
.It Fl s Ar reader
Add key in smartcard
.Ar reader .
.It Fl e Ar reader
Remove key in smartcard
.Ar reader .
@


1.24.2.2
log
@Merge OpenSSH 3.1, keeping /etc as configuration files directory.
(i.e. OpenSSH 3.1 + openbsd29_3.1.patch)
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.30 2002/02/04 20:41:16 stevesk Exp $
d58 1
a58 4
When run without arguments, it adds the files
.Pa $HOME/.ssh/id_rsa ,
.Pa $HOME/.ssh/id_dsa 
and
d94 10
a108 5
.Pp
Identity files should not be readable by anyone but the user.
Note that
.Nm
ignores identity files if they are accessible by others.
a134 5
.Sh DIAGNOSTICS
Exit status is 0 on success, 1 if the specified command fails,
and 2 if
.Nm
is unable to contact the authentication agent.
@


1.23
log
@ssh-add retries the last passphrase...
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.22 2001/03/02 18:54:31 deraadt Exp $
d83 1
a83 1
Contains the RSA authentication identity of the user.
d95 3
a97 1
Contains the DSA authentication identity of the user.
@


1.22
log
@make copyright lines the same format
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.21 2001/02/08 19:22:38 itojun Exp $
d61 2
@


1.21
log
@drop references to ssl(8).  markus ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.20 2001/01/29 01:58:18 niklas Exp $
d16 3
a18 3
.\" Copyright (c) 1999,2000 Markus Friedl. All rights reserved.
.\" Copyright (c) 1999 Aaron Campbell. All rights reserved.
.\" Copyright (c) 1999 Theo de Raadt. All rights reserved.
@


1.20
log
@$OpenBSD$
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d134 1
a134 2
.Xr sshd 8 ,
.Xr ssl 8
@


1.19
log
@cleanup AUTHORS sections
@
text
@d1 2
@


1.18
log
@- Section shuffling: comply to the section ordering outlined in mdoc(7).
- Some .Nm trimming.
- .Sh AUTHOR -> .Sh AUTHORS
- Other miscellaneous fixes here and there.
@
text
@d120 8
a127 25
Tatu Ylonen <ylo@@cs.hut.fi>
.Pp
OpenSSH
is a derivative of the original (free) ssh 1.2.12 release, but with bugs
removed and newer features re-added.
Rapidly after the 1.2.12 release,
newer versions bore successively more restrictive licenses.
This version of OpenSSH
.Bl -bullet
.It
has all components of a restrictive nature (i.e., patents, see
.Xr ssl 8 )
directly removed from the source code; any licensed or patented components
are chosen from
external libraries.
.It
has been updated to support ssh protocol 1.5.
.It
contains added support for
.Xr kerberos 8
authentication and ticket passing.
.It
supports one-time password authentication with
.Xr skey 1 .
.El
@


1.17
log
@cleanup copyright notices on all files.  I have attempted to be accurate with
the details.  everything is now under Tatu's licence (which I copied from his
readme), and/or the core-sdi bsd-ish thing for deattack, or various openbsd
developers under a 2-term bsd licence.  We're not changing any rules, just
being accurate.
@
text
@d119 1
a119 1
.Sh AUTHOR
@


1.17.2.1
log
@Pull in OpenSSH 2.5.0
@
text
@a0 2
.\"	$OpenBSD: ssh-add.1,v 1.21 2001/02/08 19:22:38 itojun Exp $
.\"
d119 26
a144 9
.Sh AUTHORS
OpenSSH is a derivative of the original and free
ssh 1.2.12 release by Tatu Ylonen.
Aaron Campbell, Bob Beck, Markus Friedl, Niels Provos,
Theo de Raadt and Dug Song
removed many bugs, re-added newer features and
created OpenSSH.
Markus Friedl contributed the support for SSH
protocol versions 1.5 and 2.0.
d149 2
a150 1
.Xr sshd 8
@


1.17.2.2
log
@Pull in OpenSSH-2.5.1
@
text
@@


1.17.2.3
log
@Pull in OpenSSH-2.5.2 for 2.8 branch.
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.22 2001/03/02 18:54:31 deraadt Exp $
d16 3
a18 3
.\" Copyright (c) 1999,2000 Markus Friedl.  All rights reserved.
.\" Copyright (c) 1999 Aaron Campbell.  All rights reserved.
.\" Copyright (c) 1999 Theo de Raadt.  All rights reserved.
@


1.17.2.4
log
@Pull in OpenSSH-2.9 to 2.8 branch.
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.24 2001/04/10 09:13:21 itojun Exp $
a60 2
.Nm
retries the last passphrase if multiple identity files are given.
d81 1
a81 1
Contains the protocol version 1 RSA authentication identity of the user.
d93 1
a93 3
Contains the protocol version 2 DSA authentication identity of the user.
.It Pa $HOME/.ssh/id_rsa
Contains the protocol version 2 RSA authentication identity of the user.
@


1.17.2.5
log
@Pull in OpenSSH 2.9.9 to the 2.8 branch.
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.27 2001/08/23 18:08:59 stevesk Exp $
d45 1
a45 1
.Nd adds RSA or DSA identities to the authentication agent
a49 4
.Nm ssh-add
.Fl s Ar reader
.Nm ssh-add
.Fl e Ar reader
d60 1
a60 1
The passphrase is read from the user's tty.
a78 6
.It Fl s Ar reader
Add key in smartcard
.Ar reader .
.It Fl e Ar reader
Remove key in smartcard
.Ar reader .
@


1.17.2.6
log
@Merge OpenSSH 3.1.
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.30 2002/02/04 20:41:16 stevesk Exp $
d58 1
a58 4
When run without arguments, it adds the files
.Pa $HOME/.ssh/id_rsa ,
.Pa $HOME/.ssh/id_dsa 
and
d94 10
a108 5
.Pp
Identity files should not be readable by anyone but the user.
Note that
.Nm
ignores identity files if they are accessible by others.
a134 5
.Sh DIAGNOSTICS
Exit status is 0 on success, 1 if the specified command fails,
and 2 if
.Nm
is unable to contact the authentication agent.
@


1.16
log
@add missing .El against .Bl.
@
text
@a2 2
.\" ssh-add.1
.\"
a3 1
.\"
d7 19
a25 1
.\" Created: Sat Apr 22 23:55:14 1995 ylo
d27 10
a36 1
.\" $Id: ssh-add.1,v 1.15 2000/08/25 16:16:15 deraadt Exp $
@


1.15
log
@no need for those dynamic libraries anymore
@
text
@d12 1
a12 1
.\" $Id: ssh-add.1,v 1.14 2000/08/19 21:34:43 markus Exp $
d68 1
a68 1
.Pp
d94 1
@


1.14
log
@add SSH2/DSA support to the agent and some other DSA related cleanups.
(note that we cannot talk to ssh.com's ssh2 agents)
@
text
@d12 1
a12 1
.\" $Id: ssh-add.1,v 1.13 2000/05/03 18:04:38 markus Exp $
a119 4
.Pp
The libraries described in
.Xr ssl 8
are required for proper operation.
@


1.13
log
@more doc on: DSA, id_dsa, known_hosts2, authorized_keys2
@
text
@d12 1
a12 1
.\" $Id: ssh-add.1,v 1.12 2000/04/12 21:47:50 aaron Exp $
d19 1
a19 1
.Nd adds RSA identities for the authentication agent
d26 1
a26 1
adds RSA identities to the authentication agent,
d66 2
@


1.13.2.1
log
@Pull in the rest of openssh-2.2.0 to 2.7 branch (luvin' cvs...)
@
text
@d12 1
a12 1
.\" $Id: ssh-add.1,v 1.15 2000/08/25 16:16:15 deraadt Exp $
d19 1
a19 1
.Nd adds RSA or DSA identities for the authentication agent
d26 1
a26 1
adds RSA or DSA identities to the authentication agent,
a65 2
.It Pa $HOME/.ssh/id_dsa
Contains the DSA authentication identity of the user.
d118 4
@


1.13.2.2
log
@openssh-2.3.0 (again) for 2.7 branch
@
text
@d3 2
d6 1
d10 1
a10 10
.\" As far as I am concerned, the code I have written for this software
.\" can be used freely for any purpose.  Any derived versions of this
.\" software must be clearly marked as such, and if the derived work is
.\" incompatible with the protocol description in the RFC file, it must be
.\" called by a name other than "ssh" or "Secure Shell".
.\"
.\"
.\" Copyright (c) 1999,2000 Markus Friedl. All rights reserved.
.\" Copyright (c) 1999 Aaron Campbell. All rights reserved.
.\" Copyright (c) 1999 Theo de Raadt. All rights reserved.
d12 1
a12 19
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
d68 1
a68 1
.El
a93 1
.El
@


1.13.2.3
log
@OpenSSH-2.5.1 for 2.7 patch branch
@
text
@a0 2
.\"	$OpenBSD: ssh-add.1,v 1.21 2001/02/08 19:22:38 itojun Exp $
.\"
d119 26
a144 9
.Sh AUTHORS
OpenSSH is a derivative of the original and free
ssh 1.2.12 release by Tatu Ylonen.
Aaron Campbell, Bob Beck, Markus Friedl, Niels Provos,
Theo de Raadt and Dug Song
removed many bugs, re-added newer features and
created OpenSSH.
Markus Friedl contributed the support for SSH
protocol versions 1.5 and 2.0.
d149 2
a150 1
.Xr sshd 8
@


1.13.2.4
log
@Pull in OpenSSH-2.5.2 for 2.7 branch.
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-add.1,v 1.22 2001/03/02 18:54:31 deraadt Exp $
d16 3
a18 3
.\" Copyright (c) 1999,2000 Markus Friedl.  All rights reserved.
.\" Copyright (c) 1999 Aaron Campbell.  All rights reserved.
.\" Copyright (c) 1999 Theo de Raadt.  All rights reserved.
@


1.12
log
@Trailing whitespace begone!
@
text
@d12 1
a12 1
.\" $Id: ssh-add.1,v 1.11 2000/03/23 21:11:38 aaron Exp $
d19 1
a19 1
.Nd adds identities for the authentication agent
d26 1
a26 1
adds identities to the authentication agent,
@


1.11
log
@Fix some formatting problems I missed before.
@
text
@d12 1
a12 1
.\" $Id: ssh-add.1,v 1.10 2000/01/22 02:17:50 aaron Exp $
d24 1
a24 1
.Sh DESCRIPTION 
d33 1
a33 1
asks for the passphrase from the user. 
d111 1
a111 1
contains added support for 
@


1.10
log
@ie. -> i.e.,
@
text
@d12 1
a12 1
.\" $Id: ssh-add.1,v 1.9 1999/12/02 20:05:40 markus Exp $
d30 2
a31 2
Alternative file names can be given on the
command line.  If any file requires a passphrase,
d34 1
a34 1
The Passphrase it is read from the user's tty.  
d55 2
a56 2
Contains the RSA authentication identity of the user.  This file
should not be readable by anyone but the user.
d62 2
a63 2
used to encrypt the private part of this file.  This is the
default file added by
d73 2
a74 1
terminal if it was run from a terminal.  If
d82 2
a83 2
and open an X11 window to read the passphrase.  This is particularly
useful when calling
d87 2
a88 1
or related script.  (Note that on some machines it
d97 4
a100 3
removed and newer features re-added.   Rapidly after the 1.2.12 release,
newer versions bore successively more restrictive licenses.  This version
of OpenSSH
@


1.9
log
@document $SSH_ASKPASS, reasonable default
@
text
@d12 1
a12 1
.\" $Id: ssh-add.1,v 1.8 1999/11/24 16:13:45 markus Exp $
d100 1
a100 1
has all components of a restrictive nature (ie. patents, see
@


1.8
log
@SSH_ASKPASS support
@
text
@d12 1
a12 1
.\" $Id: ssh-add.1,v 1.7 1999/11/16 22:49:28 markus Exp $
d54 1
a54 1
.Pa $HOME/.ssh/identity
d67 3
@


1.7
log
@rsa key fingerprints, idea from Bjoern Groenvall <bg@@sics.se>
@
text
@d12 1
a12 1
.\" $Id: ssh-add.1,v 1.6 1999/10/17 20:35:46 aaron Exp $
d74 5
a78 2
is set, it
will open an X11 window to read the passphrase.  This is particularly
@


1.6
log
@Remove some redundant .Pp.
@
text
@d12 1
a12 1
.\" $Id: ssh-add.1,v 1.5 1999/10/17 00:31:06 deraadt Exp $
d22 1
a22 1
.Op Fl ldD
d44 3
a46 1
Lists all identities currently represented by the agent.
@


1.5
log
@update trailer, and copy to other pages
@
text
@d12 1
a12 1
.\" $Id: ssh-add.1,v 1.4 1999/10/11 20:40:07 markus Exp $
a41 1
.Pp
@


1.4
log
@document reality (no askpass, ignore group-world-accessible private keys)
@
text
@d12 1
a12 1
.\" $Id: ssh-add.1,v 1.3 1999/10/02 13:10:26 deraadt Exp $
d86 24
a109 8
This version of
.Nm
is a derivative of the original 1.2.12 release, but with bugs removed and
newer features re-added.   Rapidly after the 1.2.12 release, newer versions
bore successively more restrictive licenses.  In this version, all components
of a restrictive nature (ie. patents) have been directly removed from the
source code; any licensed or patented components are chosen from external
libraries.  The libraries described in
@


1.3
log
@detail how we manage to not include RSA, and point people at ssl(8)
@
text
@d12 1
a12 1
.\" $Id: ssh-add.1,v 1.2 1999/09/26 22:30:06 deraadt Exp $
d33 2
a34 6
asks for the passphrase from the user.  If the user is using X11, the
passphrase is requested using a small X11 program; otherwise it is
read from the user's tty.  (Note: it may be necessary to redirect
stdin from
.Pa /dev/null
to get the passphrase requested using X11.)
d55 5
a59 1
should not be readable by anyone but the user.  It is possible to
@


1.2
log
@first cut of mandoc man pages from aaron
@
text
@d12 1
a12 1
.\" $Id: ssh-add.1,v 1.2 1999/05/04 11:59:11 bg Exp $
d85 11
d100 2
a101 1
.Xr sshd 8
@


1.1
log
@i bet a lot of people didn't know what ssh 1.2.16 had a nice license.
well, except for the patent issues.  someone in sweden (forget their
name at the moment) cleaned out most of the patented code, and now
this code removes rsa code.  when this is done, it will link against
libssl, but the work isn't completely done yet.  then we need to bring
this up to modern days, featurewise.
@
text
@d14 12
a25 23
.TH SSH-ADD 1 "November 8, 1995" "SSH" "SSH"

.SH NAME
ssh-add \- adds identities for the authentication agent

.SH SYNOPSIS
.B ssh-add
[\c
.B \-l\c
]
[\c
.B \-d\c
]
[\c
.B \-D\c
]
[\c
.B file\c
\&.\|.\|.\|]

.SH DESCRIPTION 
.LP
.B Ssh-add
d27 1
a27 1
.B ssh-agent.
d29 1
a29 1
.IR $HOME/\s+2.\s0ssh/identity ".
d32 1
a32 1
.B ssh-add
d36 4
a39 2
stdin from /dev/null to get the passphrase requested using X11.)
.LP
d42 1
a42 1
.B ssh-add
d44 5
a48 4

.SH OPTIONS
.TP 0.5i
.B \-l
d50 1
a50 2
.TP
.B \-d
d52 1
a52 2
.TP
.B \-D
d54 4
a57 4

.SH FILES
.TP 
.I \&$HOME/\s+2.\s0ssh/identity
d63 1
a63 1
.B ssh-add
d65 1
a65 1
.IP
d67 1
a67 1
.B ssh-add
d70 1
a70 1
.B ssh-add
d72 1
a72 1
.SM DISPLAY\s0
d76 8
a83 6
.B ssh-add
from a .Xsession or related script.  (Note that on some machines it
may be necessary to redirect the input from /dev/null to make this work.)

.SH AUTHOR
.LP
d85 5
a89 6

.SH SEE ALSO
.BR ssh-agent (1),
.BR ssh-keygen (1),
.BR ssh (1),
.BR sshd (8)
@

