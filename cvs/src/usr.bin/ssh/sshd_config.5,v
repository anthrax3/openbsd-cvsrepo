head	1.252;
access;
symbols
	OPENBSD_6_1:1.243.0.4
	OPENBSD_6_1_BASE:1.243
	OPENBSD_6_0:1.227.0.4
	OPENBSD_6_0_BASE:1.227
	OPENBSD_5_9:1.220.0.2
	OPENBSD_5_9_BASE:1.220
	OPENBSD_5_8:1.210.0.4
	OPENBSD_5_8_BASE:1.210
	OPENBSD_5_7:1.194.0.2
	OPENBSD_5_7_BASE:1.194
	OPENBSD_5_6:1.176.0.4
	OPENBSD_5_6_BASE:1.176
	OPENBSD_5_5:1.172.0.4
	OPENBSD_5_5_BASE:1.172
	OPENBSD_5_4:1.162.0.2
	OPENBSD_5_4_BASE:1.162
	OPENBSD_5_3:1.156.0.2
	OPENBSD_5_3_BASE:1.156
	OPENBSD_5_2:1.144.0.2
	OPENBSD_5_2_BASE:1.144
	OPENBSD_5_1_BASE:1.136
	OPENBSD_5_1:1.136.0.2
	OPENBSD_5_0:1.135.0.2
	OPENBSD_5_0_BASE:1.135
	OPENBSD_4_9:1.131.0.2
	OPENBSD_4_9_BASE:1.131
	OPENBSD_4_8:1.125.0.2
	OPENBSD_4_8_BASE:1.125
	OPENBSD_4_7:1.120.0.2
	OPENBSD_4_7_BASE:1.120
	OPENBSD_4_6:1.106.0.4
	OPENBSD_4_6_BASE:1.106
	OPENBSD_4_5:1.102.0.2
	OPENBSD_4_5_BASE:1.102
	OPENBSD_4_4:1.96.0.2
	OPENBSD_4_4_BASE:1.96
	OPENBSD_4_3:1.83.0.2
	OPENBSD_4_3_BASE:1.83
	OPENBSD_4_2:1.77.0.2
	OPENBSD_4_2_BASE:1.77
	OPENBSD_4_1:1.74.0.2
	OPENBSD_4_1_BASE:1.74
	OPENBSD_4_0:1.70.0.4
	OPENBSD_4_0_BASE:1.70
	OPENBSD_3_9:1.55.0.2
	OPENBSD_3_9_BASE:1.55
	OPENBSD_3_8:1.44.0.2
	OPENBSD_3_8_BASE:1.44
	OPENBSD_3_7:1.40.0.2
	OPENBSD_3_7_BASE:1.40
	OPENBSD_3_6:1.35.0.2
	OPENBSD_3_6_BASE:1.35
	OPENBSD_3_5:1.29.0.2
	OPENBSD_3_5_BASE:1.29
	OPENBSD_3_4:1.25.0.2
	OPENBSD_3_4_BASE:1.25
	OPENBSD_3_3:1.14.0.2
	OPENBSD_3_3_BASE:1.14
	OPENBSD_3_2:1.13.0.2
	OPENBSD_3_2_BASE:1.13
	OPENBSD_3_1:1.4.0.2
	OPENBSD_3_0:1.3.0.2;
locks; strict;
comment	@.\" @;


1.252
date	2017.09.01.15.41.26;	author jmc;	state Exp;
branches;
next	1.251;
commitid	ghk0C4gyQroRnwxv;

1.251
date	2017.09.01.05.50.48;	author djm;	state Exp;
branches;
next	1.250;
commitid	SOIELLD7BLbLQa3t;

1.250
date	2017.07.23.23.37.02;	author djm;	state Exp;
branches;
next	1.249;
commitid	gvUphOb1CiLq8U7C;

1.249
date	2017.07.13.19.16.33;	author jmc;	state Exp;
branches;
next	1.248;
commitid	JpuOPPFrvYnLU8Rv;

1.248
date	2017.06.24.07.08.57;	author djm;	state Exp;
branches;
next	1.247;
commitid	q8XiplUJuNMFqN7k;

1.247
date	2017.06.24.06.57.04;	author jmc;	state Exp;
branches;
next	1.246;
commitid	kXH2ploQDyT23lVi;

1.246
date	2017.06.24.06.34.38;	author djm;	state Exp;
branches;
next	1.245;
commitid	t1sqOvl7ysAY3CkV;

1.245
date	2017.05.17.01.24.17;	author djm;	state Exp;
branches;
next	1.244;
commitid	eeQm0WTdCYidaM5F;

1.244
date	2017.05.07.23.12.57;	author djm;	state Exp;
branches;
next	1.243;
commitid	rjagy2MdppXCAqQE;

1.243
date	2017.03.14.07.19.07;	author djm;	state Exp;
branches;
next	1.242;
commitid	8voftiXioCcRXNLn;

1.242
date	2017.02.03.23.01.19;	author djm;	state Exp;
branches;
next	1.241;
commitid	0GOZFYpYrdIWnKZ0;

1.241
date	2017.01.06.16.28.12;	author jmc;	state Exp;
branches;
next	1.240;
commitid	V8OTxqlpITYU0TEy;

1.240
date	2017.01.06.02.34.54;	author dtucker;	state Exp;
branches;
next	1.239;
commitid	GjgYjy6aoChrbuRC;

1.239
date	2016.11.30.03.00.05;	author djm;	state Exp;
branches;
next	1.238;
commitid	JiLWdRxWiRohf4cK;

1.238
date	2016.11.23.23.14.15;	author markus;	state Exp;
branches;
next	1.237;
commitid	oBjoddV5KGDr8Ojg;

1.237
date	2016.10.07.14.41.52;	author jmc;	state Exp;
branches;
next	1.236;
commitid	20xlOLcSPVBk9kJz;

1.236
date	2016.09.28.20.32.42;	author djm;	state Exp;
branches;
next	1.235;
commitid	TvNoQIkfkdH4jhbD;

1.235
date	2016.09.22.19.19.01;	author jmc;	state Exp;
branches;
next	1.234;
commitid	0yDVbNOdJin8VIES;

1.234
date	2016.09.22.17.55.13;	author djm;	state Exp;
branches;
next	1.233;
commitid	7sJgQ3D4NjzaQpqt;

1.233
date	2016.09.21.01.34.45;	author djm;	state Exp;
branches;
next	1.232;
commitid	VjrwAHvAyLA1IUg3;

1.232
date	2016.09.14.05.42.25;	author djm;	state Exp;
branches;
next	1.231;
commitid	TkKjivV9qAbf7Zj1;

1.231
date	2016.09.07.18.39.24;	author jmc;	state Exp;
branches;
next	1.230;
commitid	KRvJCr0sXpp1WLVO;

1.230
date	2016.08.19.03.18.07;	author djm;	state Exp;
branches;
next	1.229;
commitid	o9ZQ52UJzA8fd7BT;

1.229
date	2016.08.15.12.32.04;	author naddy;	state Exp;
branches;
next	1.228;
commitid	YPoPgBRLUcNjB56L;

1.228
date	2016.08.12.19.19.04;	author jca;	state Exp;
branches;
next	1.227;
commitid	TZ0HL5tFTb6Masfq;

1.227
date	2016.07.19.12.59.16;	author jmc;	state Exp;
branches;
next	1.226;
commitid	B5V9SaEj4ttbomR5;

1.226
date	2016.07.19.11.38.53;	author dtucker;	state Exp;
branches;
next	1.225;
commitid	irR1fmaEKVFxN0Xr;

1.225
date	2016.06.17.06.33.30;	author jmc;	state Exp;
branches;
next	1.224;
commitid	W4iT1AistkTMBS8r;

1.224
date	2016.06.17.05.03.40;	author djm;	state Exp;
branches;
next	1.223;
commitid	Hgqc707nYXAjPP1S;

1.223
date	2016.05.04.14.29.58;	author markus;	state Exp;
branches;
next	1.222;
commitid	9ydzI4x49mjHtEkc;

1.222
date	2016.04.27.13.53.48;	author jmc;	state Exp;
branches;
next	1.221;
commitid	ZaypwHA0i4gHnJcR;

1.221
date	2016.03.17.17.19.43;	author djm;	state Exp;
branches;
next	1.220;
commitid	nHiAljMLYTyyKMcn;

1.220
date	2016.02.17.08.57.34;	author djm;	state Exp;
branches;
next	1.219;
commitid	GessVGrQJZD6O6T6;

1.219
date	2016.02.17.07.38.19;	author jmc;	state Exp;
branches;
next	1.218;
commitid	EioSSmAAduCymkBM;

1.218
date	2016.02.16.05.11.04;	author djm;	state Exp;
branches;
next	1.217;
commitid	GecgNm76VKv0Y3TT;

1.217
date	2016.02.11.02.56.32;	author djm;	state Exp;
branches;
next	1.216;
commitid	IMbbMAq14cHgFXVw;

1.216
date	2016.02.05.02.37.56;	author djm;	state Exp;
branches;
next	1.215;
commitid	07VvCnfEChZFLyA1;

1.215
date	2015.11.13.04.38.06;	author djm;	state Exp;
branches;
next	1.214;
commitid	b3QitcgFmOdfJbLp;

1.214
date	2015.11.13.02.57.46;	author djm;	state Exp;
branches;
next	1.213;
commitid	uXPuSpz2Vbx6pEhp;

1.213
date	2015.10.07.14.45.30;	author sobrado;	state Exp;
branches;
next	1.212;
commitid	GCa6MO0rIe1vL6ze;

1.212
date	2015.09.11.03.13.36;	author djm;	state Exp;
branches;
next	1.211;
commitid	p1Ec568siVPAeAXr;

1.211
date	2015.08.14.15.32.41;	author jmc;	state Exp;
branches;
next	1.210;
commitid	I1k6D5RlVKvoaql8;

1.210
date	2015.08.06.14.53.21;	author deraadt;	state Exp;
branches;
next	1.209;
commitid	Mw9TxvBajPRImAX3;

1.209
date	2015.07.30.19.23.02;	author deraadt;	state Exp;
branches;
next	1.208;
commitid	nDkcBheb37MVyV72;

1.208
date	2015.07.30.00.01.34;	author djm;	state Exp;
branches;
next	1.207;
commitid	YReS3Mui4FCZvL7z;

1.207
date	2015.07.20.00.30.01;	author djm;	state Exp;
branches;
next	1.206;
commitid	vaxX77thkJxhYAzK;

1.206
date	2015.07.10.06.21.53;	author markus;	state Exp;
branches;
next	1.205;
commitid	iQTtbsbSVdO9zivU;

1.205
date	2015.07.03.03.49.45;	author djm;	state Exp;
branches;
next	1.204;
commitid	XxrOOTFUKuLzoQb7;

1.204
date	2015.06.05.03.44.14;	author djm;	state Exp;
branches;
next	1.203;
commitid	JtQonCrPQTZd4eAN;

1.203
date	2015.05.22.03.50.02;	author djm;	state Exp;
branches;
next	1.202;
commitid	FvDetWtDGSVa4xnt;

1.202
date	2015.05.21.06.43.31;	author djm;	state Exp;
branches;
next	1.201;
commitid	0jtBXwojTXMGT6Vz;

1.201
date	2015.05.21.06.38.35;	author djm;	state Exp;
branches;
next	1.200;
commitid	fwi980a5NURyJELN;

1.200
date	2015.04.29.03.48.56;	author dtucker;	state Exp;
branches;
next	1.199;
commitid	8c7S03ez3xfusEB2;

1.199
date	2015.04.28.13.47.38;	author jmc;	state Exp;
branches;
next	1.198;
commitid	YjrQgLfyp0yOfDQ0;

1.198
date	2015.04.28.10.25.15;	author dtucker;	state Exp;
branches;
next	1.197;
commitid	GHQzgdwWlbIVcO8n;

1.197
date	2015.04.28.10.17.58;	author dtucker;	state Exp;
branches;
next	1.196;
commitid	GAkwis4LnRvmwQ9s;

1.196
date	2015.04.27.21.42.48;	author djm;	state Exp;
branches;
next	1.195;
commitid	l1H7sxJoWUTQsdIC;

1.195
date	2015.04.16.23.25.50;	author dtucker;	state Exp;
branches;
next	1.194;
commitid	ddhleYlJjB5GvU86;

1.194
date	2015.02.20.23.46.01;	author djm;	state Exp;
branches;
next	1.193;
commitid	51WvWoZgTkhyQ8Kx;

1.193
date	2015.02.20.22.40.32;	author djm;	state Exp;
branches;
next	1.192;
commitid	rbYGGpwnX1WQz3mg;

1.192
date	2015.02.02.01.57.44;	author deraadt;	state Exp;
branches;
next	1.191;
commitid	6iy2nlrHaRwvSwhx;

1.191
date	2015.01.22.21.00.42;	author jmc;	state Exp;
branches;
next	1.190;
commitid	3XAFJfXc16kOfnVv;

1.190
date	2015.01.22.20.24.41;	author deraadt;	state Exp;
branches;
next	1.189;
commitid	ft9pwWJzRcF3myy2;

1.189
date	2015.01.13.07.39.19;	author djm;	state Exp;
branches;
next	1.188;
commitid	oriBpre3xTnTQZ4b;

1.188
date	2014.12.22.09.05.17;	author djm;	state Exp;
branches;
next	1.187;
commitid	gAEldZk6Nvvllwul;

1.187
date	2014.12.22.08.24.17;	author jmc;	state Exp;
branches;
next	1.186;
commitid	ke77V2EDY9Yxv0Wj;

1.186
date	2014.12.22.08.04.23;	author djm;	state Exp;
branches;
next	1.185;
commitid	GUvlwbDWDq69eUhh;

1.185
date	2014.12.22.07.51.30;	author djm;	state Exp;
branches;
next	1.184;
commitid	CoaZC6mJ1akW0s9F;

1.184
date	2014.12.21.23.35.14;	author jmc;	state Exp;
branches;
next	1.183;
commitid	X5Oj8Q22f6kzmo94;

1.183
date	2014.12.21.22.27.55;	author djm;	state Exp;
branches;
next	1.182;
commitid	EbtriidyZdsmXksl;

1.182
date	2014.12.12.00.02.17;	author djm;	state Exp;
branches;
next	1.181;
commitid	DlU1wErnXFAoLNg9;

1.181
date	2014.12.11.05.25.06;	author djm;	state Exp;
branches;
next	1.180;
commitid	Nbie4jGWflNkyAeI;

1.180
date	2014.11.22.19.21.03;	author jmc;	state Exp;
branches;
next	1.179;
commitid	YEcqA9takeO8GhQc;

1.179
date	2014.11.22.18.15.41;	author deraadt;	state Exp;
branches;
next	1.178;
commitid	3NByYuO1tptMzbXx;

1.178
date	2014.09.09.09.45.36;	author djm;	state Exp;
branches;
next	1.177;
commitid	vZy2k3muOSluAbVk;

1.177
date	2014.08.30.16.32.25;	author sobrado;	state Exp;
branches;
next	1.176;
commitid	Er0oUR7S2ospAwQ5;

1.176
date	2014.07.28.15.40.08;	author schwarze;	state Exp;
branches;
next	1.175;
commitid	R4PqBL3TtI00SjyQ;

1.175
date	2014.07.15.15.54.14;	author millert;	state Exp;
branches;
next	1.174;
commitid	z7plx8Gkj6l2sxem;

1.174
date	2014.07.03.22.40.43;	author djm;	state Exp;
branches;
next	1.173;
commitid	cw6lnAok4n9rxQzD;

1.173
date	2014.03.28.05.17.11;	author naddy;	state Exp;
branches;
next	1.172;

1.172
date	2014.02.27.22.47.07;	author djm;	state Exp;
branches;
next	1.171;

1.171
date	2014.01.29.14.04.51;	author jmc;	state Exp;
branches;
next	1.170;

1.170
date	2013.12.08.09.53.27;	author dtucker;	state Exp;
branches;
next	1.169;

1.169
date	2013.12.07.11.58.46;	author naddy;	state Exp;
branches;
next	1.168;

1.168
date	2013.11.21.08.05.09;	author jmc;	state Exp;
branches;
next	1.167;

1.167
date	2013.11.21.00.45.44;	author djm;	state Exp;
branches;
next	1.166;

1.166
date	2013.11.02.22.39.19;	author markus;	state Exp;
branches;
next	1.165;

1.165
date	2013.10.29.18.49.32;	author jmc;	state Exp;
branches;
next	1.164;

1.164
date	2013.10.29.09.48.02;	author djm;	state Exp;
branches;
next	1.163;

1.163
date	2013.10.24.00.51.48;	author dtucker;	state Exp;
branches;
next	1.162;

1.162
date	2013.07.19.07.37.48;	author markus;	state Exp;
branches;
next	1.161;

1.161
date	2013.06.27.14.05.37;	author jmc;	state Exp;
branches;
next	1.160;

1.160
date	2013.05.16.06.30.06;	author jmc;	state Exp;
branches;
next	1.159;

1.159
date	2013.05.16.04.09.14;	author dtucker;	state Exp;
branches;
next	1.158;

1.158
date	2013.04.19.01.00.10;	author djm;	state Exp;
branches;
next	1.157;

1.157
date	2013.03.07.19.27.25;	author markus;	state Exp;
branches;
next	1.156;

1.156
date	2013.02.06.00.20.42;	author dtucker;	state Exp;
branches;
next	1.155;

1.155
date	2013.01.18.08.00.49;	author jmc;	state Exp;
branches;
next	1.154;

1.154
date	2013.01.17.23.00.01;	author djm;	state Exp;
branches;
next	1.153;

1.153
date	2013.01.08.18.49.04;	author markus;	state Exp;
branches;
next	1.152;

1.152
date	2012.12.11.22.31.18;	author markus;	state Exp;
branches;
next	1.151;

1.151
date	2012.12.03.08.33.03;	author jmc;	state Exp;
branches;
next	1.150;

1.150
date	2012.12.02.20.46.11;	author djm;	state Exp;
branches;
next	1.149;

1.149
date	2012.11.04.11.09.15;	author djm;	state Exp;
branches;
next	1.148;

1.148
date	2012.11.04.10.38.43;	author djm;	state Exp;
branches;
next	1.147;

1.147
date	2012.10.31.08.04.50;	author jmc;	state Exp;
branches;
next	1.146;

1.146
date	2012.10.30.21.29.55;	author djm;	state Exp;
branches;
next	1.145;

1.145
date	2012.10.04.13.21.50;	author markus;	state Exp;
branches;
next	1.144;

1.144
date	2012.06.29.13.57.25;	author naddy;	state Exp;
branches;
next	1.143;

1.143
date	2012.06.28.05.07.45;	author dtucker;	state Exp;
branches;
next	1.142;

1.142
date	2012.06.19.21.35.54;	author jmc;	state Exp;
branches;
next	1.141;

1.141
date	2012.06.19.18.25.28;	author markus;	state Exp;
branches;
next	1.140;

1.140
date	2012.05.19.06.30.30;	author dtucker;	state Exp;
branches;
next	1.139;

1.139
date	2012.05.13.01.42.32;	author dtucker;	state Exp;
branches;
next	1.138;

1.138
date	2012.04.12.02.43.55;	author djm;	state Exp;
branches;
next	1.137;

1.137
date	2012.04.12.02.42.32;	author djm;	state Exp;
branches;
next	1.136;

1.136
date	2011.09.09.00.43.00;	author djm;	state Exp;
branches;
next	1.135;

1.135
date	2011.08.02.01.22.11;	author djm;	state Exp;
branches;
next	1.134;

1.134
date	2011.06.22.21.57.01;	author djm;	state Exp;
branches;
next	1.133;

1.133
date	2011.05.23.07.10.21;	author jmc;	state Exp;
branches;
next	1.132;

1.132
date	2011.05.23.03.30.07;	author djm;	state Exp;
branches;
next	1.131;

1.131
date	2010.12.08.04.02.47;	author djm;	state Exp;
branches;
next	1.130;

1.130
date	2010.11.18.15.01.00;	author jmc;	state Exp;
branches;
next	1.129;

1.129
date	2010.11.13.23.27.51;	author djm;	state Exp;
branches;
next	1.128;

1.128
date	2010.10.28.18.33.28;	author jmc;	state Exp;
branches;
next	1.127;

1.127
date	2010.09.22.05.01.30;	author djm;	state Exp;
branches;
next	1.126;

1.126
date	2010.08.31.11.54.45;	author djm;	state Exp;
branches;
next	1.125;

1.125
date	2010.06.30.07.28.34;	author jmc;	state Exp;
branches;
next	1.124;

1.124
date	2010.06.29.23.16.46;	author djm;	state Exp;
branches;
next	1.123;

1.123
date	2010.06.22.04.22.59;	author djm;	state Exp;
branches;
next	1.122;

1.122
date	2010.05.07.12.49.17;	author jmc;	state Exp;
branches;
next	1.121;

1.121
date	2010.05.07.11.30.30;	author djm;	state Exp;
branches;
next	1.120;

1.120
date	2010.03.04.23.17.25;	author djm;	state Exp;
branches;
next	1.119;

1.119
date	2010.03.04.12.51.25;	author jmc;	state Exp;
branches;
next	1.118;

1.118
date	2010.03.04.10.36.03;	author djm;	state Exp;
branches;
next	1.117;

1.117
date	2010.02.26.20.29.54;	author djm;	state Exp;
branches;
next	1.116;

1.116
date	2010.01.09.23.04.13;	author dtucker;	state Exp;
branches;
next	1.115;

1.115
date	2009.12.29.18.03.32;	author jmc;	state Exp;
branches;
next	1.114;

1.114
date	2009.12.29.16.38.41;	author stevesk;	state Exp;
branches;
next	1.113;

1.113
date	2009.12.19.16.53.13;	author stevesk;	state Exp;
branches;
next	1.112;

1.112
date	2009.11.10.02.58.56;	author djm;	state Exp;
branches;
next	1.111;

1.111
date	2009.10.28.21.45.08;	author jmc;	state Exp;
branches;
next	1.110;

1.110
date	2009.10.28.16.38.18;	author reyk;	state Exp;
branches;
next	1.109;

1.109
date	2009.10.08.20.42.13;	author jmc;	state Exp;
branches;
next	1.108;

1.108
date	2009.10.08.14.03.41;	author markus;	state Exp;
branches;
next	1.107;

1.107
date	2009.08.16.23.29.26;	author dtucker;	state Exp;
branches;
next	1.106;

1.106
date	2009.04.21.15.13.17;	author stevesk;	state Exp;
branches;
next	1.105;

1.105
date	2009.04.18.18.39.10;	author jmc;	state Exp;
branches;
next	1.104;

1.104
date	2009.04.17.19.40.17;	author stevesk;	state Exp;
branches;
next	1.103;

1.103
date	2009.04.13.19.07.44;	author stevesk;	state Exp;
branches;
next	1.102;

1.102
date	2009.02.22.23.59.25;	author djm;	state Exp;
branches;
next	1.101;

1.101
date	2009.02.22.23.50.57;	author djm;	state Exp;
branches;
next	1.100;

1.100
date	2009.01.24.17.10.22;	author naddy;	state Exp;
branches;
next	1.99;

1.99
date	2008.12.30.00.46.56;	author okan;	state Exp;
branches;
next	1.98;

1.98
date	2008.11.04.08.22.13;	author djm;	state Exp;
branches;
next	1.97;

1.97
date	2008.10.09.03.50.54;	author djm;	state Exp;
branches;
next	1.96;

1.96
date	2008.07.02.02.24.18;	author djm;	state Exp;
branches;
next	1.95;

1.95
date	2008.06.15.16.58.40;	author dtucker;	state Exp;
branches;
next	1.94;

1.94
date	2008.06.15.16.55.38;	author dtucker;	state Exp;
branches;
next	1.93;

1.93
date	2008.06.10.07.12.00;	author jmc;	state Exp;
branches;
next	1.92;

1.92
date	2008.06.10.04.17.46;	author djm;	state Exp;
branches;
next	1.91;

1.91
date	2008.06.10.03.57.27;	author djm;	state Exp;
branches;
next	1.90;

1.90
date	2008.05.08.12.21.16;	author djm;	state Exp;
branches;
next	1.89;

1.89
date	2008.05.07.08.00.14;	author jmc;	state Exp;
branches;
next	1.88;

1.88
date	2008.05.07.05.49.37;	author pyr;	state Exp;
branches;
next	1.87;

1.87
date	2008.04.05.02.46.02;	author djm;	state Exp;
branches;
next	1.86;

1.86
date	2008.04.04.06.44.26;	author djm;	state Exp;
branches;
next	1.85;

1.85
date	2008.04.04.05.14.38;	author djm;	state Exp;
branches;
next	1.84;

1.84
date	2008.03.25.11.58.02;	author djm;	state Exp;
branches;
next	1.83;

1.83
date	2008.02.11.07.58.28;	author jmc;	state Exp;
branches;
next	1.82;

1.82
date	2008.02.10.09.55.37;	author djm;	state Exp;
branches;
next	1.81;

1.81
date	2008.02.09.08.04.31;	author jmc;	state Exp;
branches;
next	1.80;

1.80
date	2008.02.08.23.24.07;	author djm;	state Exp;
branches;
next	1.79;

1.79
date	2008.01.01.09.27.33;	author dtucker;	state Exp;
branches;
next	1.78;

1.78
date	2007.08.23.03.22.16;	author djm;	state Exp;
branches;
next	1.77;

1.77
date	2007.06.08.07.48.09;	author jmc;	state Exp;
branches;
next	1.76;

1.76
date	2007.06.07.19.37.34;	author pvalchev;	state Exp;
branches;
next	1.75;

1.75
date	2007.05.31.19.20.17;	author jmc;	state Exp;
branches;
next	1.74;

1.74
date	2007.03.01.16.19.33;	author jmc;	state Exp;
branches;
next	1.73;

1.73
date	2007.03.01.10.28.02;	author dtucker;	state Exp;
branches;
next	1.72;

1.72
date	2007.02.19.10.45.58;	author dtucker;	state Exp;
branches;
next	1.71;

1.71
date	2007.01.02.09.57.25;	author jmc;	state Exp;
branches;
next	1.70;

1.70
date	2006.08.21.08.14.01;	author dtucker;	state Exp;
branches;
next	1.69;

1.69
date	2006.08.14.12.40.25;	author dtucker;	state Exp;
branches;
next	1.68;

1.68
date	2006.07.21.12.43.36;	author dtucker;	state Exp;
branches;
next	1.67;

1.67
date	2006.07.19.13.07.10;	author dtucker;	state Exp;
branches;
next	1.66;

1.66
date	2006.07.19.08.56.41;	author dtucker;	state Exp;
branches;
next	1.65;

1.65
date	2006.07.18.08.22.23;	author dtucker;	state Exp;
branches;
next	1.64;

1.64
date	2006.07.18.08.03.09;	author jmc;	state Exp;
branches;
next	1.63;

1.63
date	2006.07.18.07.50.40;	author jmc;	state Exp;
branches;
next	1.62;

1.62
date	2006.07.17.12.06.00;	author dtucker;	state Exp;
branches;
next	1.61;

1.61
date	2006.07.12.13.39.55;	author jmc;	state Exp;
branches;
next	1.60;

1.60
date	2006.07.12.11.34.58;	author dtucker;	state Exp;
branches;
next	1.59;

1.59
date	2006.07.06.10.47.05;	author djm;	state Exp;
branches;
next	1.58;

1.58
date	2006.07.02.17.12.58;	author stevesk;	state Exp;
branches;
next	1.57;

1.57
date	2006.03.14.16.32.48;	author markus;	state Exp;
branches;
next	1.56;

1.56
date	2006.03.13.10.14.29;	author dtucker;	state Exp;
branches;
next	1.55;

1.55
date	2006.02.26.18.01.13;	author jmc;	state Exp;
branches
	1.55.2.1;
next	1.54;

1.54
date	2006.02.25.12.28.34;	author jmc;	state Exp;
branches;
next	1.53;

1.53
date	2006.02.24.23.51.17;	author jmc;	state Exp;
branches;
next	1.52;

1.52
date	2006.02.24.23.43.57;	author jmc;	state Exp;
branches;
next	1.51;

1.51
date	2006.02.24.20.31.31;	author jmc;	state Exp;
branches;
next	1.50;

1.50
date	2006.02.24.20.22.16;	author jmc;	state Exp;
branches;
next	1.49;

1.49
date	2006.02.24.10.33.54;	author jmc;	state Exp;
branches;
next	1.48;

1.48
date	2006.01.02.17.09.49;	author jmc;	state Exp;
branches;
next	1.47;

1.47
date	2005.12.08.18.34.11;	author reyk;	state Exp;
branches;
next	1.46;

1.46
date	2005.12.06.22.38.28;	author reyk;	state Exp;
branches;
next	1.45;

1.45
date	2005.09.21.23.36.54;	author djm;	state Exp;
branches;
next	1.44;

1.44
date	2005.07.25.11.59.40;	author markus;	state Exp;
branches
	1.44.2.1;
next	1.43;

1.43
date	2005.05.23.23.32.46;	author djm;	state Exp;
branches;
next	1.42;

1.42
date	2005.05.19.02.39.55;	author djm;	state Exp;
branches;
next	1.41;

1.41
date	2005.04.21.06.17.50;	author djm;	state Exp;
branches;
next	1.40;

1.40
date	2005.03.18.17.05.00;	author jmc;	state Exp;
branches
	1.40.2.1;
next	1.39;

1.39
date	2005.03.01.10.09.52;	author djm;	state Exp;
branches;
next	1.38;

1.38
date	2005.01.08.00.41.19;	author jmc;	state Exp;
branches;
next	1.37;

1.37
date	2004.12.23.23.11.00;	author djm;	state Exp;
branches;
next	1.36;

1.36
date	2004.09.15.03.25.41;	author jaredy;	state Exp;
branches;
next	1.35;

1.35
date	2004.06.26.09.14.40;	author jmc;	state Exp;
branches
	1.35.2.1;
next	1.34;

1.34
date	2004.06.13.14.01.42;	author dtucker;	state Exp;
branches;
next	1.33;

1.33
date	2004.05.23.23.59.53;	author dtucker;	state Exp;
branches;
next	1.32;

1.32
date	2004.04.28.07.02.56;	author jmc;	state Exp;
branches;
next	1.31;

1.31
date	2004.04.28.05.17.10;	author djm;	state Exp;
branches;
next	1.30;

1.30
date	2004.04.27.09.46.37;	author djm;	state Exp;
branches;
next	1.29;

1.29
date	2004.03.08.10.18.57;	author dtucker;	state Exp;
branches
	1.29.2.1;
next	1.28;

1.28
date	2004.02.17.19.35.21;	author jmc;	state Exp;
branches;
next	1.27;

1.27
date	2003.12.09.21.53.37;	author markus;	state Exp;
branches;
next	1.26;

1.26
date	2003.11.21.11.57.03;	author djm;	state Exp;
branches;
next	1.25;

1.25
date	2003.09.01.09.50.04;	author markus;	state Exp;
branches
	1.25.2.1;
next	1.24;

1.24
date	2003.08.28.12.54.34;	author markus;	state Exp;
branches;
next	1.23;

1.23
date	2003.08.22.10.56.09;	author markus;	state Exp;
branches;
next	1.22;

1.22
date	2003.08.13.08.46.31;	author markus;	state Exp;
branches;
next	1.21;

1.21
date	2003.07.22.13.35.22;	author markus;	state Exp;
branches;
next	1.20;

1.20
date	2003.06.20.05.47.58;	author djm;	state Exp;
branches;
next	1.19;

1.19
date	2003.06.10.09.12.12;	author jmc;	state Exp;
branches;
next	1.18;

1.18
date	2003.06.02.09.17.34;	author markus;	state Exp;
branches;
next	1.17;

1.17
date	2003.05.20.12.09.32;	author jmc;	state Exp;
branches;
next	1.16;

1.16
date	2003.04.30.01.16.20;	author mouring;	state Exp;
branches;
next	1.15;

1.15
date	2003.03.28.10.11.43;	author jmc;	state Exp;
branches;
next	1.14;

1.14
date	2003.01.23.08.58.47;	author jmc;	state Exp;
branches
	1.14.2.1;
next	1.13;

1.13
date	2002.09.16.20.12.11;	author stevesk;	state Exp;
branches
	1.13.2.1;
next	1.12;

1.12
date	2002.09.04.18.52.42;	author stevesk;	state Exp;
branches;
next	1.11;

1.11
date	2002.08.29.22.54.10;	author stevesk;	state Exp;
branches;
next	1.10;

1.10
date	2002.08.21.19.38.06;	author stevesk;	state Exp;
branches;
next	1.9;

1.9
date	2002.08.12.17.30.35;	author stevesk;	state Exp;
branches;
next	1.8;

1.8
date	2002.08.09.17.41.12;	author stevesk;	state Exp;
branches;
next	1.7;

1.7
date	2002.08.09.17.21.42;	author stevesk;	state Exp;
branches;
next	1.6;

1.6
date	2002.07.30.17.03.55;	author markus;	state Exp;
branches;
next	1.5;

1.5
date	2002.07.09.17.46.25;	author stevesk;	state Exp;
branches;
next	1.4;

1.4
date	2002.06.22.16.45.29;	author stevesk;	state Exp;
branches
	1.4.2.1;
next	1.3;

1.3
date	2002.06.20.23.37.12;	author markus;	state Exp;
branches
	1.3.2.1;
next	1.2;

1.2
date	2002.06.20.20.21.23;	author stevesk;	state Exp;
branches;
next	1.1;

1.1
date	2002.06.20.19.56.07;	author stevesk;	state Exp;
branches;
next	;

1.3.2.1
date	2002.06.22.07.23.18;	author miod;	state Exp;
branches;
next	1.3.2.2;

1.3.2.2
date	2002.06.26.18.22.37;	author miod;	state Exp;
branches;
next	1.3.2.3;

1.3.2.3
date	2002.10.11.14.53.07;	author miod;	state Exp;
branches;
next	;

1.4.2.1
date	2002.06.26.15.30.39;	author jason;	state Exp;
branches;
next	1.4.2.2;

1.4.2.2
date	2002.10.11.14.51.53;	author miod;	state Exp;
branches;
next	1.4.2.3;

1.4.2.3
date	2003.04.03.22.35.18;	author miod;	state Exp;
branches;
next	;

1.13.2.1
date	2003.04.01.00.12.14;	author margarida;	state Exp;
branches;
next	1.13.2.2;

1.13.2.2
date	2003.04.03.23.27.13;	author margarida;	state Exp;
branches;
next	1.13.2.3;

1.13.2.3
date	2003.09.16.21.20.29;	author brad;	state Exp;
branches;
next	;

1.14.2.1
date	2003.05.11.12.01.52;	author margarida;	state Exp;
branches;
next	1.14.2.2;

1.14.2.2
date	2003.09.16.20.50.44;	author brad;	state Exp;
branches;
next	1.14.2.3;

1.14.2.3
date	2004.03.04.18.18.17;	author brad;	state Exp;
branches;
next	;

1.25.2.1
date	2004.02.28.03.51.34;	author brad;	state Exp;
branches;
next	1.25.2.2;

1.25.2.2
date	2004.08.19.22.37.33;	author brad;	state Exp;
branches;
next	;

1.29.2.1
date	2004.08.19.04.13.28;	author brad;	state Exp;
branches;
next	1.29.2.2;

1.29.2.2
date	2005.03.10.17.15.05;	author brad;	state Exp;
branches;
next	;

1.35.2.1
date	2005.03.10.16.28.28;	author brad;	state Exp;
branches;
next	1.35.2.2;

1.35.2.2
date	2005.09.02.03.45.01;	author brad;	state Exp;
branches;
next	;

1.40.2.1
date	2005.09.04.18.40.11;	author brad;	state Exp;
branches;
next	1.40.2.2;

1.40.2.2
date	2006.02.03.02.53.46;	author brad;	state Exp;
branches;
next	;

1.44.2.1
date	2006.02.03.03.01.58;	author brad;	state Exp;
branches;
next	1.44.2.2;

1.44.2.2
date	2006.10.06.03.19.33;	author brad;	state Exp;
branches;
next	;

1.55.2.1
date	2006.09.30.04.06.51;	author brad;	state Exp;
branches;
next	;


desc
@@


1.252
log
@remove blank line;
@
text
@.\"
.\" Author: Tatu Ylonen <ylo@@cs.hut.fi>
.\" Copyright (c) 1995 Tatu Ylonen <ylo@@cs.hut.fi>, Espoo, Finland
.\"                    All rights reserved
.\"
.\" As far as I am concerned, the code I have written for this software
.\" can be used freely for any purpose.  Any derived versions of this
.\" software must be clearly marked as such, and if the derived work is
.\" incompatible with the protocol description in the RFC file, it must be
.\" called by a name other than "ssh" or "Secure Shell".
.\"
.\" Copyright (c) 1999,2000 Markus Friedl.  All rights reserved.
.\" Copyright (c) 1999 Aaron Campbell.  All rights reserved.
.\" Copyright (c) 1999 Theo de Raadt.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.\" $OpenBSD: sshd_config.5,v 1.251 2017/09/01 05:50:48 djm Exp $
.Dd $Mdocdate: September 1 2017 $
.Dt SSHD_CONFIG 5
.Os
.Sh NAME
.Nm sshd_config
.Nd OpenSSH SSH daemon configuration file
.Sh DESCRIPTION
.Xr sshd 8
reads configuration data from
.Pa /etc/ssh/sshd_config
(or the file specified with
.Fl f
on the command line).
The file contains keyword-argument pairs, one per line.
Lines starting with
.Ql #
and empty lines are interpreted as comments.
Arguments may optionally be enclosed in double quotes
.Pq \&"
in order to represent arguments containing spaces.
.Pp
The possible
keywords and their meanings are as follows (note that
keywords are case-insensitive and arguments are case-sensitive):
.Bl -tag -width Ds
.It Cm AcceptEnv
Specifies what environment variables sent by the client will be copied into
the session's
.Xr environ 7 .
See
.Cm SendEnv
in
.Xr ssh_config 5
for how to configure the client.
The
.Ev TERM
environment variable is always sent whenever the client
requests a pseudo-terminal as it is required by the protocol.
Variables are specified by name, which may contain the wildcard characters
.Ql *
and
.Ql \&? .
Multiple environment variables may be separated by whitespace or spread
across multiple
.Cm AcceptEnv
directives.
Be warned that some environment variables could be used to bypass restricted
user environments.
For this reason, care should be taken in the use of this directive.
The default is not to accept any environment variables.
.It Cm AddressFamily
Specifies which address family should be used by
.Xr sshd 8 .
Valid arguments are
.Cm any
(the default),
.Cm inet
(use IPv4 only), or
.Cm inet6
(use IPv6 only).
.It Cm AllowAgentForwarding
Specifies whether
.Xr ssh-agent 1
forwarding is permitted.
The default is
.Cm yes .
Note that disabling agent forwarding does not improve security
unless users are also denied shell access, as they can always install
their own forwarders.
.It Cm AllowGroups
This keyword can be followed by a list of group name patterns, separated
by spaces.
If specified, login is allowed only for users whose primary
group or supplementary group list matches one of the patterns.
Only group names are valid; a numerical group ID is not recognized.
By default, login is allowed for all groups.
The allow/deny directives are processed in the following order:
.Cm DenyUsers ,
.Cm AllowUsers ,
.Cm DenyGroups ,
and finally
.Cm AllowGroups .
.Pp
See PATTERNS in
.Xr ssh_config 5
for more information on patterns.
.It Cm AllowStreamLocalForwarding
Specifies whether StreamLocal (Unix-domain socket) forwarding is permitted.
The available options are
.Cm yes
(the default)
or
.Cm all
to allow StreamLocal forwarding,
.Cm no
to prevent all StreamLocal forwarding,
.Cm local
to allow local (from the perspective of
.Xr ssh 1 )
forwarding only or
.Cm remote
to allow remote forwarding only.
Note that disabling StreamLocal forwarding does not improve security unless
users are also denied shell access, as they can always install their
own forwarders.
.It Cm AllowTcpForwarding
Specifies whether TCP forwarding is permitted.
The available options are
.Cm yes
(the default)
or
.Cm all
to allow TCP forwarding,
.Cm no
to prevent all TCP forwarding,
.Cm local
to allow local (from the perspective of
.Xr ssh 1 )
forwarding only or
.Cm remote
to allow remote forwarding only.
Note that disabling TCP forwarding does not improve security unless
users are also denied shell access, as they can always install their
own forwarders.
.It Cm AllowUsers
This keyword can be followed by a list of user name patterns, separated
by spaces.
If specified, login is allowed only for user names that
match one of the patterns.
Only user names are valid; a numerical user ID is not recognized.
By default, login is allowed for all users.
If the pattern takes the form USER@@HOST then USER and HOST
are separately checked, restricting logins to particular
users from particular hosts.
HOST criteria may additionally contain addresses to match in CIDR
address/masklen format.
The allow/deny directives are processed in the following order:
.Cm DenyUsers ,
.Cm AllowUsers ,
.Cm DenyGroups ,
and finally
.Cm AllowGroups .
.Pp
See PATTERNS in
.Xr ssh_config 5
for more information on patterns.
.It Cm AuthenticationMethods
Specifies the authentication methods that must be successfully completed
for a user to be granted access.
This option must be followed by one or more comma-separated lists of
authentication method names, or by the single string
.Cm any
to indicate the default behaviour of accepting any single authentication
method.
If the default is overridden, then successful authentication requires
completion of every method in at least one of these lists.
.Pp
For example,
.Qq publickey,password publickey,keyboard-interactive
would require the user to complete public key authentication, followed by
either password or keyboard interactive authentication.
Only methods that are next in one or more lists are offered at each stage,
so for this example it would not be possible to attempt password or
keyboard-interactive authentication before public key.
.Pp
For keyboard interactive authentication it is also possible to
restrict authentication to a specific device by appending a
colon followed by the device identifier
.Cm bsdauth ,
.Cm pam ,
or
.Cm skey ,
depending on the server configuration.
For example,
.Qq keyboard-interactive:bsdauth
would restrict keyboard interactive authentication to the
.Cm bsdauth
device.
.Pp
If the publickey method is listed more than once,
.Xr sshd 8
verifies that keys that have been used successfully are not reused for
subsequent authentications.
For example,
.Qq publickey,publickey
requires successful authentication using two different public keys.
.Pp
Note that each authentication method listed should also be explicitly enabled
in the configuration.
.Pp
The available authentication methods are:
.Qq gssapi-with-mic ,
.Qq hostbased ,
.Qq keyboard-interactive ,
.Qq none
(used for access to password-less accounts when
.Cm PermitEmptyPassword
is enabled),
.Qq password
and
.Qq publickey .
.It Cm AuthorizedKeysCommand
Specifies a program to be used to look up the user's public keys.
The program must be owned by root, not writable by group or others and
specified by an absolute path.
Arguments to
.Cm AuthorizedKeysCommand
accept the tokens described in the
.Sx TOKENS
section.
If no arguments are specified then the username of the target user is used.
.Pp
The program should produce on standard output zero or
more lines of authorized_keys output (see
.Sx AUTHORIZED_KEYS
in
.Xr sshd 8 ) .
If a key supplied by
.Cm AuthorizedKeysCommand
does not successfully authenticate
and authorize the user then public key authentication continues using the usual
.Cm AuthorizedKeysFile
files.
By default, no
.Cm AuthorizedKeysCommand
is run.
.It Cm AuthorizedKeysCommandUser
Specifies the user under whose account the
.Cm AuthorizedKeysCommand
is run.
It is recommended to use a dedicated user that has no other role on the host
than running authorized keys commands.
If
.Cm AuthorizedKeysCommand
is specified but
.Cm AuthorizedKeysCommandUser
is not, then
.Xr sshd 8
will refuse to start.
.It Cm AuthorizedKeysFile
Specifies the file that contains the public keys used for user authentication.
The format is described in the
.Sx AUTHORIZED_KEYS FILE FORMAT
section of
.Xr sshd 8 .
Arguments to
.Cm AuthorizedKeysFile
accept the tokens described in the
.Sx TOKENS
section.
After expansion,
.Cm AuthorizedKeysFile
is taken to be an absolute path or one relative to the user's home
directory.
Multiple files may be listed, separated by whitespace.
Alternately this option may be set to
.Cm none
to skip checking for user keys in files.
The default is
.Qq .ssh/authorized_keys .ssh/authorized_keys2 .
.It Cm AuthorizedPrincipalsCommand
Specifies a program to be used to generate the list of allowed
certificate principals as per
.Cm AuthorizedPrincipalsFile .
The program must be owned by root, not writable by group or others and
specified by an absolute path.
Arguments to
.Cm AuthorizedPrincipalsCommand
accept the tokens described in the
.Sx TOKENS
section.
If no arguments are specified then the username of the target user is used.
.Pp
The program should produce on standard output zero or
more lines of
.Cm AuthorizedPrincipalsFile
output.
If either
.Cm AuthorizedPrincipalsCommand
or
.Cm AuthorizedPrincipalsFile
is specified, then certificates offered by the client for authentication
must contain a principal that is listed.
By default, no
.Cm AuthorizedPrincipalsCommand
is run.
.It Cm AuthorizedPrincipalsCommandUser
Specifies the user under whose account the
.Cm AuthorizedPrincipalsCommand
is run.
It is recommended to use a dedicated user that has no other role on the host
than running authorized principals commands.
If
.Cm AuthorizedPrincipalsCommand
is specified but
.Cm AuthorizedPrincipalsCommandUser
is not, then
.Xr sshd 8
will refuse to start.
.It Cm AuthorizedPrincipalsFile
Specifies a file that lists principal names that are accepted for
certificate authentication.
When using certificates signed by a key listed in
.Cm TrustedUserCAKeys ,
this file lists names, one of which must appear in the certificate for it
to be accepted for authentication.
Names are listed one per line preceded by key options (as described in
.Sx AUTHORIZED_KEYS FILE FORMAT
in
.Xr sshd 8 ) .
Empty lines and comments starting with
.Ql #
are ignored.
.Pp
Arguments to
.Cm AuthorizedPrincipalsFile
accept the tokens described in the
.Sx TOKENS
section.
After expansion,
.Cm AuthorizedPrincipalsFile
is taken to be an absolute path or one relative to the user's home directory.
The default is
.Cm none ,
i.e. not to use a principals file \(en in this case, the username
of the user must appear in a certificate's principals list for it to be
accepted.
.Pp
Note that
.Cm AuthorizedPrincipalsFile
is only used when authentication proceeds using a CA listed in
.Cm TrustedUserCAKeys
and is not consulted for certification authorities trusted via
.Pa ~/.ssh/authorized_keys ,
though the
.Cm principals=
key option offers a similar facility (see
.Xr sshd 8
for details).
.It Cm Banner
The contents of the specified file are sent to the remote user before
authentication is allowed.
If the argument is
.Cm none
then no banner is displayed.
By default, no banner is displayed.
.It Cm ChallengeResponseAuthentication
Specifies whether challenge-response authentication is allowed.
All authentication styles from
.Xr login.conf 5
are supported.
The default is
.Cm yes .
.It Cm ChrootDirectory
Specifies the pathname of a directory to
.Xr chroot 2
to after authentication.
At session startup
.Xr sshd 8
checks that all components of the pathname are root-owned directories
which are not writable by any other user or group.
After the chroot,
.Xr sshd 8
changes the working directory to the user's home directory.
Arguments to
.Cm ChrootDirectory
accept the tokens described in the
.Sx TOKENS
section.
.Pp
The
.Cm ChrootDirectory
must contain the necessary files and directories to support the
user's session.
For an interactive session this requires at least a shell, typically
.Xr sh 1 ,
and basic
.Pa /dev
nodes such as
.Xr null 4 ,
.Xr zero 4 ,
.Xr stdin 4 ,
.Xr stdout 4 ,
.Xr stderr 4 ,
and
.Xr tty 4
devices.
For file transfer sessions using SFTP
no additional configuration of the environment is necessary if the in-process
sftp-server is used,
though sessions which use logging may require
.Pa /dev/log
inside the chroot directory on some operating systems (see
.Xr sftp-server 8
for details).
.Pp
For safety, it is very important that the directory hierarchy be
prevented from modification by other processes on the system (especially
those outside the jail).
Misconfiguration can lead to unsafe environments which
.Xr sshd 8
cannot detect.
.Pp
The default is
.Cm none ,
indicating not to
.Xr chroot 2 .
.It Cm Ciphers
Specifies the ciphers allowed.
Multiple ciphers must be comma-separated.
If the specified value begins with a
.Sq +
character, then the specified ciphers will be appended to the default set
instead of replacing them.
If the specified value begins with a
.Sq -
character, then the specified ciphers (including wildcards) will be removed
from the default set instead of replacing them.
.Pp
The supported ciphers are:
.Pp
.Bl -item -compact -offset indent
.It
3des-cbc
.It
aes128-cbc
.It
aes192-cbc
.It
aes256-cbc
.It
aes128-ctr
.It
aes192-ctr
.It
aes256-ctr
.It
aes128-gcm@@openssh.com
.It
aes256-gcm@@openssh.com
.It
chacha20-poly1305@@openssh.com
.El
.Pp
The default is:
.Bd -literal -offset indent
chacha20-poly1305@@openssh.com,
aes128-ctr,aes192-ctr,aes256-ctr,
aes128-gcm@@openssh.com,aes256-gcm@@openssh.com
.Ed
.Pp
The list of available ciphers may also be obtained using
.Qq ssh -Q cipher .
.It Cm ClientAliveCountMax
Sets the number of client alive messages which may be sent without
.Xr sshd 8
receiving any messages back from the client.
If this threshold is reached while client alive messages are being sent,
sshd will disconnect the client, terminating the session.
It is important to note that the use of client alive messages is very
different from
.Cm TCPKeepAlive .
The client alive messages are sent through the encrypted channel
and therefore will not be spoofable.
The TCP keepalive option enabled by
.Cm TCPKeepAlive
is spoofable.
The client alive mechanism is valuable when the client or
server depend on knowing when a connection has become inactive.
.Pp
The default value is 3.
If
.Cm ClientAliveInterval
is set to 15, and
.Cm ClientAliveCountMax
is left at the default, unresponsive SSH clients
will be disconnected after approximately 45 seconds.
.It Cm ClientAliveInterval
Sets a timeout interval in seconds after which if no data has been received
from the client,
.Xr sshd 8
will send a message through the encrypted
channel to request a response from the client.
The default
is 0, indicating that these messages will not be sent to the client.
.It Cm Compression
Specifies whether compression is enabled after
the user has authenticated successfully.
The argument must be
.Cm yes ,
.Cm delayed
(a legacy synonym for
.Cm yes )
or
.Cm no .
The default is
.Cm yes .
.It Cm DenyGroups
This keyword can be followed by a list of group name patterns, separated
by spaces.
Login is disallowed for users whose primary group or supplementary
group list matches one of the patterns.
Only group names are valid; a numerical group ID is not recognized.
By default, login is allowed for all groups.
The allow/deny directives are processed in the following order:
.Cm DenyUsers ,
.Cm AllowUsers ,
.Cm DenyGroups ,
and finally
.Cm AllowGroups .
.Pp
See PATTERNS in
.Xr ssh_config 5
for more information on patterns.
.It Cm DenyUsers
This keyword can be followed by a list of user name patterns, separated
by spaces.
Login is disallowed for user names that match one of the patterns.
Only user names are valid; a numerical user ID is not recognized.
By default, login is allowed for all users.
If the pattern takes the form USER@@HOST then USER and HOST
are separately checked, restricting logins to particular
users from particular hosts.
HOST criteria may additionally contain addresses to match in CIDR
address/masklen format.
The allow/deny directives are processed in the following order:
.Cm DenyUsers ,
.Cm AllowUsers ,
.Cm DenyGroups ,
and finally
.Cm AllowGroups .
.Pp
See PATTERNS in
.Xr ssh_config 5
for more information on patterns.
.It Cm DisableForwarding
Disables all forwarding features, including X11,
.Xr ssh-agent 1 ,
TCP and StreamLocal.
This option overrides all other forwarding-related options and may
simplify restricted configurations.
.It Cm ExposeAuthInfo
Enables writing a file containing a list of authentication methods and
public credentials (e.g. keys) used to authenticate the user.
The location of the file is exposed to the user session through the
.Ev SSH_USER_AUTH
environment variable.
.It Cm FingerprintHash
Specifies the hash algorithm used when logging key fingerprints.
Valid options are:
.Cm md5
and
.Cm sha256 .
The default is
.Cm sha256 .
.It Cm ForceCommand
Forces the execution of the command specified by
.Cm ForceCommand ,
ignoring any command supplied by the client and
.Pa ~/.ssh/rc
if present.
The command is invoked by using the user's login shell with the -c option.
This applies to shell, command, or subsystem execution.
It is most useful inside a
.Cm Match
block.
The command originally supplied by the client is available in the
.Ev SSH_ORIGINAL_COMMAND
environment variable.
Specifying a command of
.Cm internal-sftp
will force the use of an in-process SFTP server that requires no support
files when used with
.Cm ChrootDirectory .
The default is
.Cm none .
.It Cm GatewayPorts
Specifies whether remote hosts are allowed to connect to ports
forwarded for the client.
By default,
.Xr sshd 8
binds remote port forwardings to the loopback address.
This prevents other remote hosts from connecting to forwarded ports.
.Cm GatewayPorts
can be used to specify that sshd
should allow remote port forwardings to bind to non-loopback addresses, thus
allowing other hosts to connect.
The argument may be
.Cm no
to force remote port forwardings to be available to the local host only,
.Cm yes
to force remote port forwardings to bind to the wildcard address, or
.Cm clientspecified
to allow the client to select the address to which the forwarding is bound.
The default is
.Cm no .
.It Cm GSSAPIAuthentication
Specifies whether user authentication based on GSSAPI is allowed.
The default is
.Cm no .
.It Cm GSSAPICleanupCredentials
Specifies whether to automatically destroy the user's credentials cache
on logout.
The default is
.Cm yes .
.It Cm GSSAPIStrictAcceptorCheck
Determines whether to be strict about the identity of the GSSAPI acceptor
a client authenticates against.
If set to
.Cm yes
then the client must authenticate against the host
service on the current hostname.
If set to
.Cm no
then the client may authenticate against any service key stored in the
machine's default store.
This facility is provided to assist with operation on multi homed machines.
The default is
.Cm yes .
.It Cm HostbasedAcceptedKeyTypes
Specifies the key types that will be accepted for hostbased authentication
as a comma-separated pattern list.
Alternately if the specified value begins with a
.Sq +
character, then the specified key types will be appended to the default set
instead of replacing them.
If the specified value begins with a
.Sq -
character, then the specified key types (including wildcards) will be removed
from the default set instead of replacing them.
The default for this option is:
.Bd -literal -offset 3n
ecdsa-sha2-nistp256-cert-v01@@openssh.com,
ecdsa-sha2-nistp384-cert-v01@@openssh.com,
ecdsa-sha2-nistp521-cert-v01@@openssh.com,
ssh-ed25519-cert-v01@@openssh.com,
ssh-rsa-cert-v01@@openssh.com,
ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,
ssh-ed25519,ssh-rsa
.Ed
.Pp
The list of available key types may also be obtained using
.Qq ssh -Q key .
.It Cm HostbasedAuthentication
Specifies whether rhosts or /etc/hosts.equiv authentication together
with successful public key client host authentication is allowed
(host-based authentication).
The default is
.Cm no .
.It Cm HostbasedUsesNameFromPacketOnly
Specifies whether or not the server will attempt to perform a reverse
name lookup when matching the name in the
.Pa ~/.shosts ,
.Pa ~/.rhosts ,
and
.Pa /etc/hosts.equiv
files during
.Cm HostbasedAuthentication .
A setting of
.Cm yes
means that
.Xr sshd 8
uses the name supplied by the client rather than
attempting to resolve the name from the TCP connection itself.
The default is
.Cm no .
.It Cm HostCertificate
Specifies a file containing a public host certificate.
The certificate's public key must match a private host key already specified
by
.Cm HostKey .
The default behaviour of
.Xr sshd 8
is not to load any certificates.
.It Cm HostKey
Specifies a file containing a private host key
used by SSH.
The defaults are
.Pa /etc/ssh/ssh_host_dsa_key ,
.Pa /etc/ssh/ssh_host_ecdsa_key ,
.Pa /etc/ssh/ssh_host_ed25519_key
and
.Pa /etc/ssh/ssh_host_rsa_key .
.Pp
Note that
.Xr sshd 8
will refuse to use a file if it is group/world-accessible
and that the
.Cm HostKeyAlgorithms
option restricts which of the keys are actually used by
.Xr sshd 8 .
.Pp
It is possible to have multiple host key files.
It is also possible to specify public host key files instead.
In this case operations on the private key will be delegated
to an
.Xr ssh-agent 1 .
.It Cm HostKeyAgent
Identifies the UNIX-domain socket used to communicate
with an agent that has access to the private host keys.
If the string
.Qq SSH_AUTH_SOCK
is specified, the location of the socket will be read from the
.Ev SSH_AUTH_SOCK
environment variable.
.It Cm HostKeyAlgorithms
Specifies the host key algorithms
that the server offers.
The default for this option is:
.Bd -literal -offset 3n
ecdsa-sha2-nistp256-cert-v01@@openssh.com,
ecdsa-sha2-nistp384-cert-v01@@openssh.com,
ecdsa-sha2-nistp521-cert-v01@@openssh.com,
ssh-ed25519-cert-v01@@openssh.com,
ssh-rsa-cert-v01@@openssh.com,
ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,
ssh-ed25519,ssh-rsa
.Ed
.Pp
The list of available key types may also be obtained using
.Qq ssh -Q key .
.It Cm IgnoreRhosts
Specifies that
.Pa .rhosts
and
.Pa .shosts
files will not be used in
.Cm HostbasedAuthentication .
.Pp
.Pa /etc/hosts.equiv
and
.Pa /etc/shosts.equiv
are still used.
The default is
.Cm yes .
.It Cm IgnoreUserKnownHosts
Specifies whether
.Xr sshd 8
should ignore the user's
.Pa ~/.ssh/known_hosts
during
.Cm HostbasedAuthentication .
The default is
.Cm no .
.It Cm IPQoS
Specifies the IPv4 type-of-service or DSCP class for the connection.
Accepted values are
.Cm af11 ,
.Cm af12 ,
.Cm af13 ,
.Cm af21 ,
.Cm af22 ,
.Cm af23 ,
.Cm af31 ,
.Cm af32 ,
.Cm af33 ,
.Cm af41 ,
.Cm af42 ,
.Cm af43 ,
.Cm cs0 ,
.Cm cs1 ,
.Cm cs2 ,
.Cm cs3 ,
.Cm cs4 ,
.Cm cs5 ,
.Cm cs6 ,
.Cm cs7 ,
.Cm ef ,
.Cm lowdelay ,
.Cm throughput ,
.Cm reliability ,
a numeric value, or
.Cm none
to use the operating system default.
This option may take one or two arguments, separated by whitespace.
If one argument is specified, it is used as the packet class unconditionally.
If two values are specified, the first is automatically selected for
interactive sessions and the second for non-interactive sessions.
The default is
.Cm lowdelay
for interactive sessions and
.Cm throughput
for non-interactive sessions.
.It Cm KbdInteractiveAuthentication
Specifies whether to allow keyboard-interactive authentication.
The argument to this keyword must be
.Cm yes
or
.Cm no .
The default is to use whatever value
.Cm ChallengeResponseAuthentication
is set to
(by default
.Cm yes ) .
.It Cm KerberosAuthentication
Specifies whether the password provided by the user for
.Cm PasswordAuthentication
will be validated through the Kerberos KDC.
To use this option, the server needs a
Kerberos servtab which allows the verification of the KDC's identity.
The default is
.Cm no .
.It Cm KerberosGetAFSToken
If AFS is active and the user has a Kerberos 5 TGT, attempt to acquire
an AFS token before accessing the user's home directory.
The default is
.Cm no .
.It Cm KerberosOrLocalPasswd
If password authentication through Kerberos fails then
the password will be validated via any additional local mechanism
such as
.Pa /etc/passwd .
The default is
.Cm yes .
.It Cm KerberosTicketCleanup
Specifies whether to automatically destroy the user's ticket cache
file on logout.
The default is
.Cm yes .
.It Cm KexAlgorithms
Specifies the available KEX (Key Exchange) algorithms.
Multiple algorithms must be comma-separated.
Alternately if the specified value begins with a
.Sq +
character, then the specified methods will be appended to the default set
instead of replacing them.
If the specified value begins with a
.Sq -
character, then the specified methods (including wildcards) will be removed
from the default set instead of replacing them.
The supported algorithms are:
.Pp
.Bl -item -compact -offset indent
.It
curve25519-sha256
.It
curve25519-sha256@@libssh.org
.It
diffie-hellman-group1-sha1
.It
diffie-hellman-group14-sha1
.It
diffie-hellman-group-exchange-sha1
.It
diffie-hellman-group-exchange-sha256
.It
ecdh-sha2-nistp256
.It
ecdh-sha2-nistp384
.It
ecdh-sha2-nistp521
.El
.Pp
The default is:
.Bd -literal -offset indent
curve25519-sha256,curve25519-sha256@@libssh.org,
ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,
diffie-hellman-group-exchange-sha256,
diffie-hellman-group14-sha1
.Ed
.Pp
The list of available key exchange algorithms may also be obtained using
.Qq ssh -Q kex .
.It Cm ListenAddress
Specifies the local addresses
.Xr sshd 8
should listen on.
The following forms may be used:
.Pp
.Bl -item -offset indent -compact
.It
.Cm ListenAddress
.Sm off
.Ar host | Ar IPv4_addr | Ar IPv6_addr
.Sm on
.It
.Cm ListenAddress
.Sm off
.Ar host | Ar IPv4_addr : Ar port
.Sm on
.It
.Cm ListenAddress
.Sm off
.Oo
.Ar host | Ar IPv6_addr Oc : Ar port
.Sm on
.El
.Pp
If
.Ar port
is not specified,
sshd will listen on the address and all
.Cm Port
options specified.
The default is to listen on all local addresses.
Multiple
.Cm ListenAddress
options are permitted.
.It Cm LoginGraceTime
The server disconnects after this time if the user has not
successfully logged in.
If the value is 0, there is no time limit.
The default is 120 seconds.
.It Cm LogLevel
Gives the verbosity level that is used when logging messages from
.Xr sshd 8 .
The possible values are:
QUIET, FATAL, ERROR, INFO, VERBOSE, DEBUG, DEBUG1, DEBUG2, and DEBUG3.
The default is INFO.
DEBUG and DEBUG1 are equivalent.
DEBUG2 and DEBUG3 each specify higher levels of debugging output.
Logging with a DEBUG level violates the privacy of users and is not recommended.
.It Cm MACs
Specifies the available MAC (message authentication code) algorithms.
The MAC algorithm is used for data integrity protection.
Multiple algorithms must be comma-separated.
If the specified value begins with a
.Sq +
character, then the specified algorithms will be appended to the default set
instead of replacing them.
If the specified value begins with a
.Sq -
character, then the specified algorithms (including wildcards) will be removed
from the default set instead of replacing them.
.Pp
The algorithms that contain
.Qq -etm
calculate the MAC after encryption (encrypt-then-mac).
These are considered safer and their use recommended.
The supported MACs are:
.Pp
.Bl -item -compact -offset indent
.It
hmac-md5
.It
hmac-md5-96
.It
hmac-sha1
.It
hmac-sha1-96
.It
hmac-sha2-256
.It
hmac-sha2-512
.It
umac-64@@openssh.com
.It
umac-128@@openssh.com
.It
hmac-md5-etm@@openssh.com
.It
hmac-md5-96-etm@@openssh.com
.It
hmac-sha1-etm@@openssh.com
.It
hmac-sha1-96-etm@@openssh.com
.It
hmac-sha2-256-etm@@openssh.com
.It
hmac-sha2-512-etm@@openssh.com
.It
umac-64-etm@@openssh.com
.It
umac-128-etm@@openssh.com
.El
.Pp
The default is:
.Bd -literal -offset indent
umac-64-etm@@openssh.com,umac-128-etm@@openssh.com,
hmac-sha2-256-etm@@openssh.com,hmac-sha2-512-etm@@openssh.com,
hmac-sha1-etm@@openssh.com,
umac-64@@openssh.com,umac-128@@openssh.com,
hmac-sha2-256,hmac-sha2-512,hmac-sha1
.Ed
.Pp
The list of available MAC algorithms may also be obtained using
.Qq ssh -Q mac .
.It Cm Match
Introduces a conditional block.
If all of the criteria on the
.Cm Match
line are satisfied, the keywords on the following lines override those
set in the global section of the config file, until either another
.Cm Match
line or the end of the file.
If a keyword appears in multiple
.Cm Match
blocks that are satisfied, only the first instance of the keyword is
applied.
.Pp
The arguments to
.Cm Match
are one or more criteria-pattern pairs or the single token
.Cm All
which matches all criteria.
The available criteria are
.Cm User ,
.Cm Group ,
.Cm Host ,
.Cm LocalAddress ,
.Cm LocalPort ,
and
.Cm Address .
The match patterns may consist of single entries or comma-separated
lists and may use the wildcard and negation operators described in the
.Sx PATTERNS
section of
.Xr ssh_config 5 .
.Pp
The patterns in an
.Cm Address
criteria may additionally contain addresses to match in CIDR
address/masklen format,
such as 192.0.2.0/24 or 2001:db8::/32.
Note that the mask length provided must be consistent with the address -
it is an error to specify a mask length that is too long for the address
or one with bits set in this host portion of the address.
For example, 192.0.2.0/33 and 192.0.2.0/8, respectively.
.Pp
Only a subset of keywords may be used on the lines following a
.Cm Match
keyword.
Available keywords are
.Cm AcceptEnv ,
.Cm AllowAgentForwarding ,
.Cm AllowGroups ,
.Cm AllowStreamLocalForwarding ,
.Cm AllowTcpForwarding ,
.Cm AllowUsers ,
.Cm AuthenticationMethods ,
.Cm AuthorizedKeysCommand ,
.Cm AuthorizedKeysCommandUser ,
.Cm AuthorizedKeysFile ,
.Cm AuthorizedPrincipalsCommand ,
.Cm AuthorizedPrincipalsCommandUser ,
.Cm AuthorizedPrincipalsFile ,
.Cm Banner ,
.Cm ChrootDirectory ,
.Cm ClientAliveCountMax ,
.Cm ClientAliveInterval ,
.Cm DenyGroups ,
.Cm DenyUsers ,
.Cm ForceCommand ,
.Cm GatewayPorts ,
.Cm GSSAPIAuthentication ,
.Cm HostbasedAcceptedKeyTypes ,
.Cm HostbasedAuthentication ,
.Cm HostbasedUsesNameFromPacketOnly ,
.Cm IPQoS ,
.Cm KbdInteractiveAuthentication ,
.Cm KerberosAuthentication ,
.Cm LogLevel ,
.Cm MaxAuthTries ,
.Cm MaxSessions ,
.Cm PasswordAuthentication ,
.Cm PermitEmptyPasswords ,
.Cm PermitOpen ,
.Cm PermitRootLogin ,
.Cm PermitTTY ,
.Cm PermitTunnel ,
.Cm PermitUserRC ,
.Cm PubkeyAcceptedKeyTypes ,
.Cm PubkeyAuthentication ,
.Cm RekeyLimit ,
.Cm RevokedKeys ,
.Cm StreamLocalBindMask ,
.Cm StreamLocalBindUnlink ,
.Cm TrustedUserCAKeys ,
.Cm X11DisplayOffset ,
.Cm X11Forwarding
and
.Cm X11UseLocalHost .
.It Cm MaxAuthTries
Specifies the maximum number of authentication attempts permitted per
connection.
Once the number of failures reaches half this value,
additional failures are logged.
The default is 6.
.It Cm MaxSessions
Specifies the maximum number of open shell, login or subsystem (e.g. sftp)
sessions permitted per network connection.
Multiple sessions may be established by clients that support connection
multiplexing.
Setting
.Cm MaxSessions
to 1 will effectively disable session multiplexing, whereas setting it to 0
will prevent all shell, login and subsystem sessions while still permitting
forwarding.
The default is 10.
.It Cm MaxStartups
Specifies the maximum number of concurrent unauthenticated connections to the
SSH daemon.
Additional connections will be dropped until authentication succeeds or the
.Cm LoginGraceTime
expires for a connection.
The default is 10:30:100.
.Pp
Alternatively, random early drop can be enabled by specifying
the three colon separated values
start:rate:full (e.g. "10:30:60").
.Xr sshd 8
will refuse connection attempts with a probability of rate/100 (30%)
if there are currently start (10) unauthenticated connections.
The probability increases linearly and all connection attempts
are refused if the number of unauthenticated connections reaches full (60).
.It Cm PasswordAuthentication
Specifies whether password authentication is allowed.
The default is
.Cm yes .
.It Cm PermitEmptyPasswords
When password authentication is allowed, it specifies whether the
server allows login to accounts with empty password strings.
The default is
.Cm no .
.It Cm PermitOpen
Specifies the destinations to which TCP port forwarding is permitted.
The forwarding specification must be one of the following forms:
.Pp
.Bl -item -offset indent -compact
.It
.Cm PermitOpen
.Sm off
.Ar host : port
.Sm on
.It
.Cm PermitOpen
.Sm off
.Ar IPv4_addr : port
.Sm on
.It
.Cm PermitOpen
.Sm off
.Ar \&[ IPv6_addr \&] : port
.Sm on
.El
.Pp
Multiple forwards may be specified by separating them with whitespace.
An argument of
.Cm any
can be used to remove all restrictions and permit any forwarding requests.
An argument of
.Cm none
can be used to prohibit all forwarding requests.
The wildcard
.Sq *
can be used for host or port to allow all hosts or ports, respectively.
By default all port forwarding requests are permitted.
.It Cm PermitRootLogin
Specifies whether root can log in using
.Xr ssh 1 .
The argument must be
.Cm yes ,
.Cm prohibit-password ,
.Cm without-password ,
.Cm forced-commands-only ,
or
.Cm no .
The default is
.Cm prohibit-password .
.Pp
If this option is set to
.Cm prohibit-password
or
.Cm without-password ,
password and keyboard-interactive authentication are disabled for root.
.Pp
If this option is set to
.Cm forced-commands-only ,
root login with public key authentication will be allowed,
but only if the
.Ar command
option has been specified
(which may be useful for taking remote backups even if root login is
normally not allowed).
All other authentication methods are disabled for root.
.Pp
If this option is set to
.Cm no ,
root is not allowed to log in.
.It Cm PermitTTY
Specifies whether
.Xr pty 4
allocation is permitted.
The default is
.Cm yes .
.It Cm PermitTunnel
Specifies whether
.Xr tun 4
device forwarding is allowed.
The argument must be
.Cm yes ,
.Cm point-to-point
(layer 3),
.Cm ethernet
(layer 2), or
.Cm no .
Specifying
.Cm yes
permits both
.Cm point-to-point
and
.Cm ethernet .
The default is
.Cm no .
.Pp
Independent of this setting, the permissions of the selected
.Xr tun 4
device must allow access to the user.
.It Cm PermitUserEnvironment
Specifies whether
.Pa ~/.ssh/environment
and
.Cm environment=
options in
.Pa ~/.ssh/authorized_keys
are processed by
.Xr sshd 8 .
The default is
.Cm no .
Enabling environment processing may enable users to bypass access
restrictions in some configurations using mechanisms such as
.Ev LD_PRELOAD .
.It Cm PermitUserRC
Specifies whether any
.Pa ~/.ssh/rc
file is executed.
The default is
.Cm yes .
.It Cm PidFile
Specifies the file that contains the process ID of the
SSH daemon, or
.Cm none
to not write one.
The default is
.Pa /var/run/sshd.pid .
.It Cm Port
Specifies the port number that
.Xr sshd 8
listens on.
The default is 22.
Multiple options of this type are permitted.
See also
.Cm ListenAddress .
.It Cm PrintLastLog
Specifies whether
.Xr sshd 8
should print the date and time of the last user login when a user logs
in interactively.
The default is
.Cm yes .
.It Cm PrintMotd
Specifies whether
.Xr sshd 8
should print
.Pa /etc/motd
when a user logs in interactively.
(On some systems it is also printed by the shell,
.Pa /etc/profile ,
or equivalent.)
The default is
.Cm yes .
.It Cm PubkeyAcceptedKeyTypes
Specifies the key types that will be accepted for public key authentication
as a comma-separated pattern list.
Alternately if the specified value begins with a
.Sq +
character, then the specified key types will be appended to the default set
instead of replacing them.
If the specified value begins with a
.Sq -
character, then the specified key types (including wildcards) will be removed
from the default set instead of replacing them.
The default for this option is:
.Bd -literal -offset 3n
ecdsa-sha2-nistp256-cert-v01@@openssh.com,
ecdsa-sha2-nistp384-cert-v01@@openssh.com,
ecdsa-sha2-nistp521-cert-v01@@openssh.com,
ssh-ed25519-cert-v01@@openssh.com,
ssh-rsa-cert-v01@@openssh.com,
ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,
ssh-ed25519,ssh-rsa
.Ed
.Pp
The list of available key types may also be obtained using
.Qq ssh -Q key .
.It Cm PubkeyAuthentication
Specifies whether public key authentication is allowed.
The default is
.Cm yes .
.It Cm RekeyLimit
Specifies the maximum amount of data that may be transmitted before the
session key is renegotiated, optionally followed a maximum amount of
time that may pass before the session key is renegotiated.
The first argument is specified in bytes and may have a suffix of
.Sq K ,
.Sq M ,
or
.Sq G
to indicate Kilobytes, Megabytes, or Gigabytes, respectively.
The default is between
.Sq 1G
and
.Sq 4G ,
depending on the cipher.
The optional second value is specified in seconds and may use any of the
units documented in the
.Sx TIME FORMATS
section.
The default value for
.Cm RekeyLimit
is
.Cm default none ,
which means that rekeying is performed after the cipher's default amount
of data has been sent or received and no time based rekeying is done.
.It Cm RevokedKeys
Specifies revoked public keys file, or
.Cm none
to not use one.
Keys listed in this file will be refused for public key authentication.
Note that if this file is not readable, then public key authentication will
be refused for all users.
Keys may be specified as a text file, listing one public key per line, or as
an OpenSSH Key Revocation List (KRL) as generated by
.Xr ssh-keygen 1 .
For more information on KRLs, see the KEY REVOCATION LISTS section in
.Xr ssh-keygen 1 .
.It Cm StreamLocalBindMask
Sets the octal file creation mode mask
.Pq umask
used when creating a Unix-domain socket file for local or remote
port forwarding.
This option is only used for port forwarding to a Unix-domain socket file.
.Pp
The default value is 0177, which creates a Unix-domain socket file that is
readable and writable only by the owner.
Note that not all operating systems honor the file mode on Unix-domain
socket files.
.It Cm StreamLocalBindUnlink
Specifies whether to remove an existing Unix-domain socket file for local
or remote port forwarding before creating a new one.
If the socket file already exists and
.Cm StreamLocalBindUnlink
is not enabled,
.Nm sshd
will be unable to forward the port to the Unix-domain socket file.
This option is only used for port forwarding to a Unix-domain socket file.
.Pp
The argument must be
.Cm yes
or
.Cm no .
The default is
.Cm no .
.It Cm StrictModes
Specifies whether
.Xr sshd 8
should check file modes and ownership of the
user's files and home directory before accepting login.
This is normally desirable because novices sometimes accidentally leave their
directory or files world-writable.
The default is
.Cm yes .
Note that this does not apply to
.Cm ChrootDirectory ,
whose permissions and ownership are checked unconditionally.
.It Cm Subsystem
Configures an external subsystem (e.g. file transfer daemon).
Arguments should be a subsystem name and a command (with optional arguments)
to execute upon subsystem request.
.Pp
The command
.Cm sftp-server
implements the SFTP file transfer subsystem.
.Pp
Alternately the name
.Cm internal-sftp
implements an in-process SFTP server.
This may simplify configurations using
.Cm ChrootDirectory
to force a different filesystem root on clients.
.Pp
By default no subsystems are defined.
.It Cm SyslogFacility
Gives the facility code that is used when logging messages from
.Xr sshd 8 .
The possible values are: DAEMON, USER, AUTH, LOCAL0, LOCAL1, LOCAL2,
LOCAL3, LOCAL4, LOCAL5, LOCAL6, LOCAL7.
The default is AUTH.
.It Cm TCPKeepAlive
Specifies whether the system should send TCP keepalive messages to the
other side.
If they are sent, death of the connection or crash of one
of the machines will be properly noticed.
However, this means that
connections will die if the route is down temporarily, and some people
find it annoying.
On the other hand, if TCP keepalives are not sent,
sessions may hang indefinitely on the server, leaving
.Qq ghost
users and consuming server resources.
.Pp
The default is
.Cm yes
(to send TCP keepalive messages), and the server will notice
if the network goes down or the client host crashes.
This avoids infinitely hanging sessions.
.Pp
To disable TCP keepalive messages, the value should be set to
.Cm no .
.It Cm TrustedUserCAKeys
Specifies a file containing public keys of certificate authorities that are
trusted to sign user certificates for authentication, or
.Cm none
to not use one.
Keys are listed one per line; empty lines and comments starting with
.Ql #
are allowed.
If a certificate is presented for authentication and has its signing CA key
listed in this file, then it may be used for authentication for any user
listed in the certificate's principals list.
Note that certificates that lack a list of principals will not be permitted
for authentication using
.Cm TrustedUserCAKeys .
For more details on certificates, see the CERTIFICATES section in
.Xr ssh-keygen 1 .
.It Cm UseDNS
Specifies whether
.Xr sshd 8
should look up the remote host name, and to check that
the resolved host name for the remote IP address maps back to the
very same IP address.
.Pp
If this option is set to
.Cm no
(the default) then only addresses and not host names may be used in
.Pa ~/.ssh/authorized_keys
.Cm from
and
.Nm
.Cm Match
.Cm Host
directives.
.It Cm VersionAddendum
Optionally specifies additional text to append to the SSH protocol banner
sent by the server upon connection.
The default is
.Cm none .
.It Cm X11DisplayOffset
Specifies the first display number available for
.Xr sshd 8 Ns 's
X11 forwarding.
This prevents sshd from interfering with real X11 servers.
The default is 10.
.It Cm X11Forwarding
Specifies whether X11 forwarding is permitted.
The argument must be
.Cm yes
or
.Cm no .
The default is
.Cm no .
.Pp
When X11 forwarding is enabled, there may be additional exposure to
the server and to client displays if the
.Xr sshd 8
proxy display is configured to listen on the wildcard address (see
.Cm X11UseLocalhost ) ,
though this is not the default.
Additionally, the authentication spoofing and authentication data
verification and substitution occur on the client side.
The security risk of using X11 forwarding is that the client's X11
display server may be exposed to attack when the SSH client requests
forwarding (see the warnings for
.Cm ForwardX11
in
.Xr ssh_config 5 ) .
A system administrator may have a stance in which they want to
protect clients that may expose themselves to attack by unwittingly
requesting X11 forwarding, which can warrant a
.Cm no
setting.
.Pp
Note that disabling X11 forwarding does not prevent users from
forwarding X11 traffic, as users can always install their own forwarders.
.It Cm X11UseLocalhost
Specifies whether
.Xr sshd 8
should bind the X11 forwarding server to the loopback address or to
the wildcard address.
By default,
sshd binds the forwarding server to the loopback address and sets the
hostname part of the
.Ev DISPLAY
environment variable to
.Cm localhost .
This prevents remote hosts from connecting to the proxy display.
However, some older X11 clients may not function with this
configuration.
.Cm X11UseLocalhost
may be set to
.Cm no
to specify that the forwarding server should be bound to the wildcard
address.
The argument must be
.Cm yes
or
.Cm no .
The default is
.Cm yes .
.It Cm XAuthLocation
Specifies the full pathname of the
.Xr xauth 1
program, or
.Cm none
to not use one.
The default is
.Pa /usr/X11R6/bin/xauth .
.El
.Sh TIME FORMATS
.Xr sshd 8
command-line arguments and configuration file options that specify time
may be expressed using a sequence of the form:
.Sm off
.Ar time Op Ar qualifier ,
.Sm on
where
.Ar time
is a positive integer value and
.Ar qualifier
is one of the following:
.Pp
.Bl -tag -width Ds -compact -offset indent
.It Aq Cm none
seconds
.It Cm s | Cm S
seconds
.It Cm m | Cm M
minutes
.It Cm h | Cm H
hours
.It Cm d | Cm D
days
.It Cm w | Cm W
weeks
.El
.Pp
Each member of the sequence is added together to calculate
the total time value.
.Pp
Time format examples:
.Pp
.Bl -tag -width Ds -compact -offset indent
.It 600
600 seconds (10 minutes)
.It 10m
10 minutes
.It 1h30m
1 hour 30 minutes (90 minutes)
.El
.Sh TOKENS
Arguments to some keywords can make use of tokens,
which are expanded at runtime:
.Pp
.Bl -tag -width XXXX -offset indent -compact
.It %%
A literal
.Sq % .
.It %F
The fingerprint of the CA key.
.It %f
The fingerprint of the key or certificate.
.It %h
The home directory of the user.
.It %i
The key ID in the certificate.
.It %K
The base64-encoded CA key.
.It %k
The base64-encoded key or certificate for authentication.
.It %s
The serial number of the certificate.
.It \&%T
The type of the CA key.
.It %t
The key or certificate type.
.It %u
The username.
.El
.Pp
.Cm AuthorizedKeysCommand
accepts the tokens %%, %f, %h, %k, %t, and %u.
.Pp
.Cm AuthorizedKeysFile
accepts the tokens %%, %h, and %u.
.Pp
.Cm AuthorizedPrincipalsCommand
accepts the tokens %%, %F, %f, %h, %i, %K, %k, %s, %T, %t, and %u.
.Pp
.Cm AuthorizedPrincipalsFile
accepts the tokens %%, %h, and %u.
.Pp
.Cm ChrootDirectory
accepts the tokens %%, %h, and %u.
.Sh FILES
.Bl -tag -width Ds
.It Pa /etc/ssh/sshd_config
Contains configuration data for
.Xr sshd 8 .
This file should be writable by root only, but it is recommended
(though not necessary) that it be world-readable.
.El
.Sh SEE ALSO
.Xr sftp-server 8 ,
.Xr sshd 8
.Sh AUTHORS
.An -nosplit
OpenSSH is a derivative of the original and free
ssh 1.2.12 release by
.An Tatu Ylonen .
.An Aaron Campbell , Bob Beck , Markus Friedl , Niels Provos ,
.An Theo de Raadt
and
.An Dug Song
removed many bugs, re-added newer features and
created OpenSSH.
.An Markus Friedl
contributed the support for SSH protocol versions 1.5 and 2.0.
.An Niels Provos
and
.An Markus Friedl
contributed support for privilege separation.
@


1.251
log
@document available AuthenticationMethods; bz#2453 ok dtucker@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.250 2017/07/23 23:37:02 djm Exp $
.Dd $Mdocdate: July 23 2017 $
a237 1

@


1.250
log
@Allow IPQoS=none in ssh/sshd to not set an explicit ToS/DSCP value
and just use the operating system default; ok dtucker@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.249 2017/07/13 19:16:33 jmc Exp $
.Dd $Mdocdate: July 13 2017 $
d226 13
@


1.249
log
@man pages with pseudo synopses which list filenames end up creating
very ugly output in man -k; after some discussion with ingo, we feel
the simplest fix is to remove such SYNOPSIS sections: the info is hardly
helpful at page top, is contained already in FILES, and there are
sufficiently few that just zapping them is simple;

ok schwarze, who also helpfully ran things through a build to check
output;
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.248 2017/06/24 07:08:57 djm Exp $
.Dd $Mdocdate: June 24 2017 $
d796 3
a798 1
or a numeric value.
@


1.248
log
@correct env var name
@
text
@d36 1
a36 1
.\" $OpenBSD: sshd_config.5,v 1.247 2017/06/24 06:57:04 jmc Exp $
a42 2
.Sh SYNOPSIS
.Nm /etc/ssh/sshd_config
@


1.247
log
@spelling;
@
text
@d36 1
a36 1
.\" $OpenBSD: sshd_config.5,v 1.246 2017/06/24 06:34:38 djm Exp $
d572 1
a572 1
.Ev SSH_AUTH_INFO
@


1.246
log
@refactor authentication logging

optionally record successful auth methods and public credentials
used in a file accessible to user sessions

feedback and ok markus@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.245 2017/05/17 01:24:17 djm Exp $
.Dd $Mdocdate: May 17 2017 $
d571 1
a571 1
The location of the file is exposed to the user session though the
d573 1
a573 1
enviornment variable.
@


1.245
log
@allow LogLevel in sshd_config Match blocks; ok dtucker bz#2717
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.244 2017/05/07 23:12:57 djm Exp $
.Dd $Mdocdate: May 7 2017 $
d568 6
@


1.244
log
@As promised in last release announcement: remove support for
Blowfish, RC4 and CAST ciphers. ok markus@@ deraadt@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.243 2017/03/14 07:19:07 djm Exp $
.Dd $Mdocdate: March 14 2017 $
d1070 1
@


1.243
log
@Mark the sshd_config UsePrivilegeSeparation option as deprecated,
effectively making privsep mandatory in sandboxing mode.
ok markus@@ deraadt@@

(note: this doesn't remove the !privsep code paths, though that will
happen eventually).
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.242 2017/02/03 23:01:19 djm Exp $
.Dd $Mdocdate: February 3 2017 $
a467 10
arcfour
.It
arcfour128
.It
arcfour256
.It
blowfish-cbc
.It
cast128-cbc
.It
a955 2
hmac-ripemd160
.It
a970 2
.It
hmac-ripemd160-etm@@openssh.com
@


1.242
log
@support =- for removing methods from algorithms lists, e.g.
Ciphers=-*cbc; suggested by Cristian Ionescu-Idbohrn in bz#2671
"I like it" markus@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.241 2017/01/06 16:28:12 jmc Exp $
.Dd $Mdocdate: January 6 2017 $
a1473 22
.It Cm UsePrivilegeSeparation
Specifies whether
.Xr sshd 8
separates privileges by creating an unprivileged child process
to deal with incoming network traffic.
After successful authentication, another process will be created that has
the privilege of the authenticated user.
The goal of privilege separation is to prevent privilege
escalation by containing any corruption within the unprivileged processes.
The argument must be
.Cm yes ,
.Cm no ,
or
.Cm sandbox .
If
.Cm UsePrivilegeSeparation
is set to
.Cm sandbox
then the pre-authentication unprivileged process is subject to additional
restrictions.
The default is
.Cm sandbox .
@


1.241
log
@keep the tokens list sorted;
@
text
@d36 1
a36 1
.\" $OpenBSD: sshd_config.5,v 1.240 2017/01/06 02:34:54 dtucker Exp $
d441 4
d657 4
d855 4
d949 4
d1300 4
@


1.240
log
@Re-add '%k' token for AuthorizedKeysCommand which was lost during the
re-org in rev 1.235.  bz#2656, from jboning at gmail.com.
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.239 2016/11/30 03:00:05 djm Exp $
.Dd $Mdocdate: November 30 2016 $
d1624 1
a1624 1
accepts the tokens %%, %f, %k, %h, %t, and %u.
d1630 1
a1630 1
accepts the tokens %%, %F, %f, %K, %k, %h, %i, %s, %T, %t, and %u.
@


1.239
log
@Add a sshd_config DisableForwaring option that disables X11, agent,
TCP, tunnel and Unix domain socket forwarding, as well as anything
else we might implement in the future.

This, like the 'restrict' authorized_keys flag, is intended to be a
simple and future-proof way of restricting an account. Suggested as
a complement to 'restrict' by Jann Horn; ok markus@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.238 2016/11/23 23:14:15 markus Exp $
.Dd $Mdocdate: November 23 2016 $
d1624 1
a1624 1
accepts the tokens %%, %f, %h, %t, and %u.
@


1.238
log
@allow ClientAlive{Interval,CountMax} in Match; ok dtucker, djm
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.237 2016/10/07 14:41:52 jmc Exp $
.Dd $Mdocdate: October 7 2016 $
d568 6
@


1.237
log
@tidy up the formatting in this file. more specifically, replace
.Dq, which looks appalling, with .Cm, where appropriate;
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.236 2016/09/28 20:32:42 djm Exp $
.Dd $Mdocdate: September 28 2016 $
d1049 2
@


1.236
log
@restore pre-auth compression support in the client -- the previous
commit was intended to remove it from the server only.

remove a few server-side pre-auth compression bits that escaped

adjust wording of Compression directive in sshd_config(5)

pointed out by naddy@@ ok markus@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.235 2016/09/22 19:19:01 jmc Exp $
.Dd $Mdocdate: September 22 2016 $
d93 3
a95 2
.Dq any ,
.Dq inet
d97 1
a97 1
.Dq inet6
a98 2
The default is
.Dq any .
d104 1
a104 1
.Dq yes .
d128 2
a129 1
.Dq yes
d131 1
a131 1
.Dq all
d133 1
a133 1
.Dq no
d135 1
a135 1
.Dq local
d139 1
a139 1
.Dq remote
a140 2
The default is
.Dq yes .
d147 2
a148 1
.Dq yes
d150 1
a150 1
.Dq all
d152 1
a152 1
.Dq no
d154 1
a154 1
.Dq local
d158 1
a158 1
.Dq remote
a159 2
The default is
.Dq yes .
d190 1
a190 1
.Dq any
d193 1
a193 1
if the default is overridden, then successful authentication requires
d196 2
a197 2
For example, an argument of
.Dq publickey,password publickey,keyboard-interactive
d201 1
a201 1
so for this example, it would not be possible to attempt password or
d207 2
a208 2
.Dq bsdauth ,
.Dq pam ,
d210 1
a210 1
.Dq skey ,
d213 1
a213 1
.Dq keyboard-interactive:bsdauth
d215 1
a215 1
.Dq bsdauth
d218 1
a218 3
If the
.Dq publickey
method is listed more than once,
d222 3
a224 5
For example, an
.Cm AuthenticationMethods
of
.Dq publickey,publickey
will require successful authentication using two different public keys.
a227 4
The default
.Dq any
is not to require multiple authentication; successful completion
of a single authentication method is sufficient.
d250 3
a252 1
By default, no AuthorizedKeysCommand is run.
d254 3
a256 1
Specifies the user under whose account the AuthorizedKeysCommand is run.
d283 1
a283 1
.Dq none
d286 1
a286 1
.Dq .ssh/authorized_keys .ssh/authorized_keys2 .
d350 1
a350 1
.Dq none ,
d370 1
a370 1
.Dq none
d379 1
a379 1
.Dq yes .
d414 3
a416 4
For file transfer sessions using
.Dq sftp ,
no additional configuration of the environment is necessary if the
in-process sftp server is used,
d431 1
a431 1
.Dq none ,
d484 2
a485 6
The list of available ciphers may also be obtained using the
.Fl Q
option of
.Xr ssh 1
with an argument of
.Dq cipher .
d487 1
a487 2
Sets the number of client alive messages (see below) which may be
sent without
d494 1
a494 2
.Cm TCPKeepAlive
(below).
d506 1
a506 1
(see below) is set to 15, and
d522 2
a523 2
.Dq yes ,
.Dq delayed
d525 1
a525 1
.Dq yes )
d527 1
a527 1
.Dq no .
d529 1
a529 1
.Dq yes .
d571 1
a571 1
.Dq md5
d573 1
a573 1
.Dq sha256 .
d575 1
a575 1
.Dq sha256 .
d591 2
a592 2
.Dq internal-sftp
will force the use of an in-process sftp server that requires no support
d596 1
a596 1
.Dq none .
d609 1
a609 1
.Dq no
d611 1
a611 1
.Dq yes
d613 1
a613 1
.Dq clientspecified
d616 1
a616 1
.Dq no .
d620 1
a620 1
.Dq no .
d625 1
a625 1
.Dq yes .
d630 2
a631 3
.Dq yes
then the client must authenticate against the
.Pa host
d634 1
a634 1
.Dq no
d639 1
a639 1
.Dq yes .
d658 2
a659 5
The
.Fl Q
option of
.Xr ssh 1
may be used to list supported key types.
d665 1
a665 1
.Dq no .
d676 1
a676 1
.Dq yes
d682 1
a682 1
.Dq no .
d718 1
a718 1
.Dq SSH_AUTH_SOCK
d736 2
a737 6
The list of available key types may also be obtained using the
.Fl Q
option of
.Xr ssh 1
with an argument of
.Dq key .
d751 1
a751 1
.Dq yes .
d760 1
a760 1
.Dq no .
d764 24
a787 24
.Dq af11 ,
.Dq af12 ,
.Dq af13 ,
.Dq af21 ,
.Dq af22 ,
.Dq af23 ,
.Dq af31 ,
.Dq af32 ,
.Dq af33 ,
.Dq af41 ,
.Dq af42 ,
.Dq af43 ,
.Dq cs0 ,
.Dq cs1 ,
.Dq cs2 ,
.Dq cs3 ,
.Dq cs4 ,
.Dq cs5 ,
.Dq cs6 ,
.Dq cs7 ,
.Dq ef ,
.Dq lowdelay ,
.Dq throughput ,
.Dq reliability ,
d794 1
a794 1
.Dq lowdelay
d796 1
a796 1
.Dq throughput
d801 1
a801 1
.Dq yes
d803 1
a803 1
.Dq no .
d808 1
a808 1
.Dq yes ) .
d816 1
a816 1
.Dq no .
d821 1
a821 1
.Dq no .
d828 1
a828 1
.Dq yes .
d833 1
a833 1
.Dq yes .
d872 2
a873 6
The list of available key exchange algorithms may also be obtained using the
.Fl Q
option of
.Xr ssh 1
with an argument of
.Dq kex .
d933 1
a933 1
.Dq -etm
d986 2
a987 6
The list of available MAC algorithms may also be obtained using the
.Fl Q
option of
.Xr ssh 1
with an argument of
.Dq mac .
d1016 2
a1017 1
PATTERNS section of
d1023 2
a1024 4
address/masklen format, e.g.\&
.Dq 192.0.2.0/24
or
.Dq 2001:db8::/32 .
d1028 1
a1028 5
For example,
.Dq 192.0.2.0/33
and
.Dq 192.0.2.0/8
respectively.
d1107 1
a1107 2
.Dq start:rate:full
(e.g. "10:30:60").
d1109 2
a1110 7
will refuse connection attempts with a probability of
.Dq rate/100
(30%)
if there are currently
.Dq start
(10)
unauthenticated connections.
d1112 1
a1112 3
are refused if the number of unauthenticated connections reaches
.Dq full
(60).
d1116 1
a1116 1
.Dq yes .
d1121 1
a1121 1
.Dq no .
d1146 1
a1146 1
.Dq any
d1149 1
a1149 1
.Dq none
d1152 1
a1152 1
.Dq *
d1159 4
a1162 4
.Dq yes ,
.Dq prohibit-password ,
.Dq without-password ,
.Dq forced-commands-only ,
d1164 1
a1164 1
.Dq no .
d1166 1
a1166 1
.Dq prohibit-password .
d1169 1
a1169 1
.Dq prohibit-password
d1171 1
a1171 1
.Dq without-password ,
d1175 1
a1175 1
.Dq forced-commands-only ,
d1185 1
a1185 1
.Dq no ,
d1192 1
a1192 1
.Dq yes .
d1198 2
a1199 2
.Dq yes ,
.Dq point-to-point
d1201 1
a1201 1
.Dq ethernet
d1203 1
a1203 1
.Dq no .
d1205 1
a1205 1
.Dq yes
d1207 1
a1207 1
.Dq point-to-point
d1209 1
a1209 1
.Dq ethernet .
d1211 1
a1211 1
.Dq no .
d1226 1
a1226 1
.Dq no .
d1235 1
a1235 1
.Dq yes .
d1239 1
a1239 1
.Dq none
d1257 1
a1257 1
.Dq yes .
d1268 1
a1268 1
.Dq yes .
d1287 2
a1288 5
The
.Fl Q
option of
.Xr ssh 1
may be used to list supported key types.
d1292 1
a1292 1
.Dq yes .
d1315 1
a1315 1
.Dq default none ,
d1320 1
a1320 1
.Dq none
d1352 1
a1352 1
.Dq yes
d1354 1
a1354 1
.Dq no .
d1356 1
a1356 1
.Dq no .
d1365 1
a1365 1
.Dq yes .
d1375 2
a1376 4
.Xr sftp-server 8
implements the
.Dq sftp
file transfer subsystem.
d1379 2
a1380 4
.Dq internal-sftp
implements an in-process
.Dq sftp
server.
d1402 1
a1402 1
.Dq ghost
d1406 1
a1406 1
.Dq yes
d1412 1
a1412 1
.Dq no .
d1416 1
a1416 1
.Dq none
d1437 1
a1437 1
.Dq no
d1456 2
a1457 2
.Dq yes ,
.Dq no ,
d1459 1
a1459 1
.Dq sandbox .
d1463 1
a1463 1
.Dq sandbox
d1467 1
a1467 1
.Dq sandbox .
d1472 1
a1472 1
.Dq none .
d1482 1
a1482 1
.Dq yes
d1484 1
a1484 1
.Dq no .
d1486 1
a1486 1
.Dq no .
d1492 2
a1493 2
.Cm X11UseLocalhost
below), though this is not the default.
d1505 1
a1505 1
.Dq no
d1520 1
a1520 1
.Dq localhost .
d1526 1
a1526 1
.Dq no
d1530 1
a1530 1
.Dq yes
d1532 1
a1532 1
.Dq no .
d1534 1
a1534 1
.Dq yes .
d1539 1
a1539 1
.Dq none
d1638 1
d1641 1
d1643 6
a1648 3
ssh 1.2.12 release by Tatu Ylonen.
Aaron Campbell, Bob Beck, Markus Friedl, Niels Provos,
Theo de Raadt and Dug Song
d1651 6
a1656 4
Markus Friedl contributed the support for SSH
protocol versions 1.5 and 2.0.
Niels Provos and Markus Friedl contributed support
for privilege separation.
@


1.235
log
@organise the token stuff into a separate section;
ok markus for an earlier version of the diff
ok/tweaks djm
@
text
@d36 1
a36 1
.\" $OpenBSD: sshd_config.5,v 1.234 2016/09/22 17:55:13 djm Exp $
d533 1
a533 1
Specifies whether compression is allowed, or delayed until
d537 3
a539 1
.Dq delayed ,
d543 1
a543 1
.Dq delayed .
@


1.234
log
@mention curve25519-sha256 KEX
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.233 2016/09/21 01:34:45 djm Exp $
.Dd $Mdocdate: September 21 2016 $
a242 1
.Pp
d245 4
a248 8
may be provided using the following tokens, which will be expanded
at runtime: %% is replaced by a literal '%', %u is replaced by the
username being authenticated, %h is replaced by the home directory
of the user being authenticated, %t is replaced with the key type
offered for authentication, %f is replaced with the fingerprint of
the key, and %k is replaced with the key being offered for authentication.
If no arguments are specified then the username of the target user
will be supplied.
d251 3
a253 1
more lines of authorized_keys output (see AUTHORIZED_KEYS in
d255 3
a257 1
If a key supplied by AuthorizedKeysCommand does not successfully authenticate
d274 1
a274 2
Specifies the file that contains the public keys that can be used
for user authentication.
d276 1
a276 1
AUTHORIZED_KEYS FILE FORMAT
d279 1
d281 3
a283 5
may contain tokens of the form %T which are substituted during connection
setup.
The following tokens are defined: %% is replaced by a literal '%',
%h is replaced by the home directory of the user being authenticated, and
%u is replaced by the username of that user.
a299 1
.Pp
d302 4
a305 15
may be provided using the following tokens, which will be expanded
at runtime:
%% is replaced by a literal '%',
%F with the fingerprint of the CA key,
%f is replaced with certificate fingerprint,
%K is replaced with the base-64 encoded CA key.
%k is replaced with the full base-64 encoded certificate,
%h is replaced with the home directory of the user being authenticated,
%i is replaced with key ID in the certificate,
%s is replaced with the serial number of the certificate,
%T with the type of the CA key,
%t is replaced with type of the certificate being offered, and
%u is replaced by the username being authenticated,
If no arguments are specified then the username of the target user
will be supplied.
d317 3
a319 1
By default, no AuthorizedPrincipalsCommand is run.
d321 3
a323 1
Specifies the user under whose account the AuthorizedPrincipalsCommand is run.
d340 3
a342 2
Names are listed one per line preceded by key options (as described
in AUTHORIZED_KEYS FILE FORMAT in
d348 1
d350 3
a352 5
may contain tokens of the form %T which are substituted during connection
setup.
The following tokens are defined: %% is replaced by a literal '%',
%h is replaced by the home directory of the user being authenticated, and
%u is replaced by the username of that user.
d355 1
a355 3
is taken to be an absolute path or one relative to the user's home
directory.
.Pp
d361 1
d398 5
a402 5
.Pp
The pathname may contain the following tokens that are expanded at runtime once
the connecting user has been authenticated: %% is replaced by a literal '%',
%h is replaced by the home directory of the user being authenticated, and
%u is replaced by the username of that user.
d1633 44
@


1.233
log
@add a way for principals command to get see key ID and serial too
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.232 2016/09/14 05:42:25 djm Exp $
.Dd $Mdocdate: September 14 2016 $
d877 2
d898 1
a898 1
curve25519-sha256@@libssh.org,
@


1.232
log
@add %-escapes to AuthorizedPrincipalsCommand to match those supported
for AuthorizedKeysCommand (key, key type, fingerprint, etc) and a
few more to provide access to the certificate's CA key;
'looks ok' dtucker@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.231 2016/09/07 18:39:24 jmc Exp $
.Dd $Mdocdate: September 7 2016 $
d309 1
a309 4
%u is replaced by the username being authenticated,
%h is replaced by the home directory of the user being authenticated,
%t is replaced with type of the certificate being offered,
%T with the type of the CA key,
a310 2
%F with the fingerprint of the CA key,
%k is replaced with the full base-64 encoded certificate and
d312 7
@


1.231
log
@sort; from matthew martin
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.230 2016/08/19 03:18:07 djm Exp $
.Dd $Mdocdate: August 19 2016 $
d307 12
a318 3
at runtime: %% is replaced by a literal '%', %u is replaced by the
username being authenticated and %h is replaced by the home directory
of the user being authenticated.
@


1.230
log
@remove UseLogin option and support for having /bin/login manage
login sessions; ok deraadt markus dtucker
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.229 2016/08/15 12:32:04 naddy Exp $
.Dd $Mdocdate: August 15 2016 $
d126 2
a127 2
.It Cm AllowTcpForwarding
Specifies whether TCP forwarding is permitted.
d132 1
a132 1
to allow TCP forwarding,
d134 1
a134 1
to prevent all TCP forwarding,
d143 1
a143 1
Note that disabling TCP forwarding does not improve security unless
d146 2
a147 2
.It Cm AllowStreamLocalForwarding
Specifies whether StreamLocal (Unix-domain socket) forwarding is permitted.
d152 1
a152 1
to allow StreamLocal forwarding,
d154 1
a154 1
to prevent all StreamLocal forwarding,
d163 1
a163 1
Note that disabling StreamLocal forwarding does not improve security unless
d1227 6
a1255 6
.It Cm PermitTTY
Specifies whether
.Xr pty 4
allocation is permitted.
The default is
.Dq yes .
@


1.229
log
@Catch up with the SSH1 code removal and delete all mention of
protocol 1 particularities, key files and formats, command line
options, and configuration keywords from the server documentation
and examples.  ok jmc@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.228 2016/08/12 19:19:04 jca Exp $
.Dd $Mdocdate: August 12 2016 $
a1492 19
.It Cm UseLogin
Specifies whether
.Xr login 1
is used for interactive login sessions.
The default is
.Dq no .
Note that
.Xr login 1
is never used for remote command execution.
Note also, that if this is enabled,
.Cm X11Forwarding
will be disabled because
.Xr login 1
does not know how to handle
.Xr xauth 1
cookies.
If
.Cm UsePrivilegeSeparation
is specified, it will be disabled after authentication.
a1556 3
X11 forwarding is automatically disabled if
.Cm UseLogin
is enabled.
@


1.228
log
@Use 2001:db8::/32, the official IPv6 subnet for configuration examples.

This makes the IPv6 example consistent with IPv4, and removes a dubious
mention of a 6bone subnet.

ok sthen@@ millert@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.227 2016/07/19 12:59:16 jmc Exp $
.Dd $Mdocdate: July 19 2016 $
a232 2
This option will yield a fatal
error if enabled if protocol 1 is also enabled.
d711 1
a711 3
The default is
.Pa /etc/ssh/ssh_host_key
for protocol version 1, and
d716 1
a716 2
.Pa /etc/ssh/ssh_host_rsa_key
for protocol version 2.
a726 8
.Dq rsa1
keys are used for version 1 and
.Dq dsa ,
.Dq ecdsa ,
.Dq ed25519
or
.Dq rsa
are used for version 2 of the SSH protocol.
a764 2
.Cm RhostsRSAAuthentication
or
a778 2
.Cm RhostsRSAAuthentication
or
a896 9
.It Cm KeyRegenerationInterval
In protocol version 1, the ephemeral server key is automatically regenerated
after this many seconds (if it has been used).
The purpose of regeneration is to prevent
decrypting captured sessions by later breaking into the machine and
stealing the keys.
The key is never stored anywhere.
If the value is 0, the key is never regenerated.
The default is 3600 (seconds).
a1104 2
.Cm RhostsRSAAuthentication ,
.Cm RSAAuthentication ,
a1308 22
.It Cm Protocol
Specifies the protocol versions
.Xr sshd 8
supports.
The possible values are
.Sq 1
and
.Sq 2 .
Multiple versions must be comma-separated.
The default is
.Sq 2 .
Protocol 1 suffers from a number of cryptographic weaknesses and should
not be used.
It is only offered to support legacy devices.
.Pp
Note that the order of the protocol list does not indicate preference,
because the client selects among multiple protocol versions offered
by the server.
Specifying
.Dq 2,1
is identical to
.Dq 1,2 .
a1372 14
.It Cm RhostsRSAAuthentication
Specifies whether rhosts or /etc/hosts.equiv authentication together
with successful RSA host authentication is allowed.
The default is
.Dq no .
This option applies to protocol version 1 only.
.It Cm RSAAuthentication
Specifies whether pure RSA authentication is allowed.
The default is
.Dq yes .
This option applies to protocol version 1 only.
.It Cm ServerKeyBits
Defines the number of bits in the ephemeral protocol version 1 server key.
The default and minimum value is 1024.
@


1.227
log
@tweak previous;
@
text
@d36 1
a36 1
.\" $OpenBSD: sshd_config.5,v 1.226 2016/07/19 11:38:53 dtucker Exp $
d1078 1
a1078 1
.Dq 3ffe:ffff::/32 .
@


1.226
log
@Allow wildcard for PermitOpen hosts as well as ports.  bz#2582, patch from
openssh at mzpqnxow.com and jjelen at redhat.com.  ok markus@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.225 2016/06/17 06:33:30 jmc Exp $
.Dd $Mdocdate: June 17 2016 $
d1219 1
a1219 1
Wildcard
d1221 1
a1221 1
can be used for host or port to allow all hosts or port respectively.
@


1.225
log
@grammar fix;
@
text
@d36 1
a36 1
.\" $OpenBSD: sshd_config.5,v 1.224 2016/06/17 05:03:40 djm Exp $
d1219 3
@


1.224
log
@ban AuthenticationMethods="" and accept AuthenticationMethods=any
for the default behaviour of not requiring multiple authentication

bz#2398 from Jakub Jelen; ok dtucker@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.223 2016/05/04 14:29:58 markus Exp $
.Dd $Mdocdate: May 4 2016 $
d195 1
a195 1
methods.
@


1.223
log
@allow setting IdentityAgent to SSH_AUTH_SOCK; ok djm@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.222 2016/04/27 13:53:48 jmc Exp $
.Dd $Mdocdate: April 27 2016 $
d192 6
a197 3
authentication method names.
Successful authentication requires completion of every method in at least
one of these lists.
d237 3
a239 1
The default is not to require multiple authentication; successful completion
@


1.222
log
@cidr permitted for {allow,deny}users; from lars nooden
ok djm
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.221 2016/03/17 17:19:43 djm Exp $
.Dd $Mdocdate: March 17 2016 $
d742 1
a742 1
If
@


1.221
log
@UseDNS affects ssh hostname processing in authorized_keys, not
known_hosts; bz#2554 reported by jjelen AT redhat.com
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.220 2016/02/17 08:57:34 djm Exp $
.Dd $Mdocdate: February 17 2016 $
d176 2
d566 2
@


1.220
log
@rsa-sha2-512,rsa-sha2-256 cannot be selected explicitly in
*KeyTypes options yet. Remove them from the lists of algorithms
for now. committing on behalf of markus@@ ok djm@@
@
text
@d36 1
a36 1
.\" $OpenBSD: sshd_config.5,v 1.219 2016/02/17 07:38:19 jmc Exp $
d1538 1
a1538 1
.Pa ~/.ssh/known_hosts
@


1.219
log
@since these pages now clearly tell folks to avoid v1, normalise
the docs from a v2 perspective (i.e. stop pointing out which bits
are v2 only);

ok/tweaks djm ok markus
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.218 2016/02/16 05:11:04 djm Exp $
.Dd $Mdocdate: February 16 2016 $
d662 1
a662 1
ssh-ed25519,rsa-sha2-512,rsa-sha2-256,ssh-rsa
d754 1
a754 1
ssh-ed25519,rsa-sha2-512,rsa-sha2-256,ssh-rsa
d1362 1
a1362 1
ssh-ed25519,rsa-sha2-512,rsa-sha2-256,ssh-rsa
@


1.218
log
@Replace list of ciphers and MACs adjacent to -1/-2 flag descriptions in
ssh(1) with a strong recommendation not to use protocol 1. Add a similar
warning to the Protocol option descriptions in ssh_config(5) and
sshd_config(5);

prompted by and ok mmcc@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.217 2016/02/11 02:56:32 djm Exp $
.Dd $Mdocdate: February 11 2016 $
d73 1
a73 2
Note that environment passing is only supported for protocol 2, and
that the
d228 1
a228 1
This option is only available for SSH protocol 2 and will yield a fatal
a374 1
This option is only available for protocol version 2.
d439 1
a439 1
Specifies the ciphers allowed for protocol version 2.
a519 1
This option applies to protocol version 2 only.
a527 1
This option applies to protocol version 2 only.
a626 1
Note that this option applies to protocol version 2 only.
a631 1
Note that this option applies to protocol version 2 only.
a673 3
This option is similar to
.Cm RhostsRSAAuthentication
and applies to protocol version 2 only.
d744 1
a744 1
Specifies the protocol version 2 host key algorithms
d965 1
a965 2
The MAC algorithm is used in protocol version 2
for data integrity protection.
a1373 1
Note that this option applies to protocol version 2 only.
a1398 1
This option applies to protocol version 2 only.
a1484 1
Note that this option applies to protocol version 2 only.
@


1.217
log
@sync crypto algorithm lists in ssh_config(5) and sshd_config(5)
with current reality. bz#2527
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.216 2016/02/05 02:37:56 djm Exp $
.Dd $Mdocdate: February 5 2016 $
d1346 4
@


1.216
log
@better description for MaxSessions; bz#2531
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.215 2015/11/13 04:38:06 djm Exp $
.Dd $Mdocdate: November 13 2015 $
d668 1
a668 1
ssh-ed25519,ssh-rsa
d763 1
a763 1
ssh-ed25519,ssh-rsa
d1031 1
d1033 1
a1033 1
hmac-sha2-256,hmac-sha2-512
d1368 1
a1368 1
ssh-ed25519,ssh-rsa
@


1.215
log
@Support "none" as an argument for sshd_config ForceCommand and
ChrootDirectory. Useful inside Match blocks to override a global
default. bz#2486 ok dtucker@@
@
text
@d36 1
a36 1
.\" $OpenBSD: sshd_config.5,v 1.214 2015/11/13 02:57:46 djm Exp $
d1147 9
a1155 1
Specifies the maximum number of open sessions permitted per network connection.
@


1.214
log
@list a couple more options usable in Match blocks; bz#2489
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.213 2015/10/07 14:45:30 sobrado Exp $
.Dd $Mdocdate: October 7 2015 $
d436 3
a438 1
The default is not to
d605 2
@


1.213
log
@UsePrivilegeSeparation defaults to sandbox now.

ok djm@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.212 2015/09/11 03:13:36 djm Exp $
.Dd $Mdocdate: September 11 2015 $
d1098 2
@


1.212
log
@more clarity on what AuthorizedKeysFile=none does;
based on diff by Thiebaud Weksteen
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.211 2015/08/14 15:32:41 jmc Exp $
.Dd $Mdocdate: August 14 2015 $
d1567 5
a1571 2
The default is
.Dq yes .
d1578 2
@


1.211
log
@match myproposal.h order; from brian conway
(i snuck in a tweak while here)

ok dtucker
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.210 2015/08/06 14:53:21 deraadt Exp $
.Dd $Mdocdate: August 6 2015 $
d288 3
@


1.210
log
@add prohibit-password as a synonymn for without-password, since the
without-password is causing too many questions.  Harden it to ban all
but pubkey, hostbased, and GSSAPI auth (when the latter is enabled)
from djm, ok markus
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.209 2015/07/30 19:23:02 deraadt Exp $
.Dd $Mdocdate: July 30 2015 $
d480 1
d482 1
a482 2
aes128-gcm@@openssh.com,aes256-gcm@@openssh.com,
chacha20-poly1305@@openssh.com
d1532 1
a1532 1
.Xr sshd_config 5
@


1.209
log
@change default: PermitRootLogin without-password
matching install script changes coming as well
ok djm markus
@
text
@d36 1
a36 1
.\" $OpenBSD: sshd_config.5,v 1.208 2015/07/30 00:01:34 djm Exp $
d1208 1
d1214 1
a1214 1
.Dq without-password .
d1217 2
d1220 1
a1220 1
password authentication is disabled for root.
@


1.208
log
@Allow ssh_config and sshd_config kex parameters options be prefixed
by a '+' to indicate that the specified items be appended to the
default rather than replacing it.

approach suggested by dtucker@@, feedback dlg@@, ok markus@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.207 2015/07/20 00:30:01 djm Exp $
.Dd $Mdocdate: July 20 2015 $
d1213 1
a1213 1
.Dq no .
@


1.207
log
@mention that the default of UseDNS=no implies that hostnames cannot
be used for host matching in sshd_config and authorized_keys;
bz#2045, ok dtucker@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.206 2015/07/10 06:21:53 markus Exp $
.Dd $Mdocdate: July 10 2015 $
d438 5
d649 4
d868 4
d970 5
d1335 4
@


1.206
log
@Turn off DSA by default; add HostKeyAlgorithms to the server and
PubkeyAcceptedKeyTypes to the client side, so it still can be
tested or turned back on; feedback and ok djm@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.205 2015/07/03 03:49:45 djm Exp $
.Dd $Mdocdate: July 3 2015 $
d1497 1
a1497 1
should look up the remote host name and check that
d1500 11
a1510 2
The default is
.Dq no .
@


1.205
log
@refuse to generate or accept RSA keys smaller than 1024 bits;
feedback and ok dtucker@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.204 2015/06/05 03:44:14 djm Exp $
.Dd $Mdocdate: June 5 2015 $
d644 11
a654 3
The default
.Dq *
will allow all key types.
d706 1
d709 6
a714 1
will refuse to use a file if it is group/world-accessible.
d736 20
d1317 11
a1327 3
The default
.Dq *
will allow all key types.
@


1.204
log
@typo: accidental repetition; bz#2386
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.203 2015/05/22 03:50:02 djm Exp $
.Dd $Mdocdate: May 22 2015 $
d1347 1
a1347 1
The minimum value is 512, and the default is 1024.
@


1.203
log
@add knob to relax GSSAPI host credential check for multihomed hosts
bz#928, patch by Simon Wilkinson; ok dtucker
(kerberos/GSSAPI is not compiled by default on OpenBSD)
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.202 2015/05/21 06:43:31 djm Exp $
.Dd $Mdocdate: May 21 2015 $
d77 1
a77 1
requests a pseudo-terminal is requested as it is required by the protocol.
@


1.202
log
@add AuthorizedPrincipalsCommand that allows getting authorized_principals
from a subprocess rather than a file, which is quite useful in
deployments with large userbases

feedback and ok markus@@
@
text
@d36 1
a36 1
.\" $OpenBSD: sshd_config.5,v 1.201 2015/05/21 06:38:35 djm Exp $
d626 15
@


1.201
log
@support arguments to AuthorizedKeysCommand

bz#2081 loosely based on patch by Sami Hartikainen
feedback and ok markus@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.200 2015/04/29 03:48:56 dtucker Exp $
.Dd $Mdocdate: April 29 2015 $
d290 36
@


1.200
log
@Allow ListenAddress, Port and AddressFamily in any order.  bz#68,
ok djm@@, jmc@@ (for the man page bit).
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.199 2015/04/28 13:47:38 jmc Exp $
.Dd $Mdocdate: April 28 2015 $
d237 15
a251 3
The program must be owned by root and not writable by group or others.
It will be invoked with a single argument of the username
being authenticated, and should produce on standard output zero or
@


1.199
log
@enviroment -> environment: apologies to darren for not spotting that first
time round...
@
text
@d36 1
a36 1
.\" $OpenBSD: sshd_config.5,v 1.198 2015/04/28 10:25:15 dtucker Exp $
d834 1
a834 1
sshd will listen on the address and all prior
a840 3
Additionally, any
.Cm Port
options must precede this option for non-port qualified addresses.
@


1.198
log
@Fix typo in previous
@
text
@d36 1
a36 1
.\" $OpenBSD: sshd_config.5,v 1.197 2015/04/28 10:17:58 dtucker Exp $
d76 1
a76 1
enviroment variable is always sent whenever the client
@


1.197
log
@Document that the TERM environment variable is not subject to SendEnv
and AcceptEnv.  bz#2386, based loosely on a patch from jjelen at redhat,
help and ok jmc@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.196 2015/04/27 21:42:48 djm Exp $
.Dd $Mdocdate: April 27 2015 $
d77 1
a77 1
requests  apseudo-terminal is requested as it is required by the protocol.
@


1.196
log
@Make sshd default to PermitRootLogin=no;
ok deraadt@@ rpe@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.195 2015/04/16 23:25:50 dtucker Exp $
.Dd $Mdocdate: April 16 2015 $
d73 5
a77 1
Note that environment passing is only supported for protocol 2.
@


1.195
log
@Document "none" for PidFile XAuthLocation TrustedUserCAKeys and RevokedKeys.
bz#2382, feedback from jmc@@, ok djm@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.194 2015/02/20 23:46:01 djm Exp $
.Dd $Mdocdate: February 20 2015 $
d1097 1
a1097 1
.Dq yes .
@


1.194
log
@sort options useable under Match case-insensitively;
prodded jmc@@
@
text
@d36 1
a36 1
.\" $OpenBSD: sshd_config.5,v 1.193 2015/02/20 22:40:32 djm Exp $
d1167 3
a1169 1
SSH daemon.
d1259 3
a1261 1
Specifies revoked public keys.
d1374 3
a1376 1
trusted to sign user certificates for authentication.
d1505 3
a1507 1
program.
@


1.193
log
@more options that are available under Match;
bz#2353 reported by calestyo AT scientia.net
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.192 2015/02/02 01:57:44 deraadt Exp $
.Dd $Mdocdate: February 2 2015 $
d985 1
a986 1
.Cm GatewayPorts ,
a1003 1
.Cm RSAAuthentication ,
d1007 1
@


1.192
log
@increasing encounters with difficult DNS setups in darknets has
convinced me UseDNS off by default is better
ok djm
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.191 2015/01/22 21:00:42 jmc Exp $
.Dd $Mdocdate: January 22 2015 $
d972 1
d985 1
a986 1
.Cm GSSAPIAuthentication ,
d990 1
d1004 1
d1006 1
d1008 3
a1010 1
.Cm RSAAuthentication ,
@


1.191
log
@heirarchy -> hierarchy;
@
text
@d36 1
a36 1
.\" $OpenBSD: sshd_config.5,v 1.190 2015/01/22 20:24:41 deraadt Exp $
d1383 1
a1383 1
.Dq yes .
@


1.190
log
@Provide a warning about chroot misuses (which sadly, seem to have become
quite popular because shiny).  sshd cannot detect/manage/do anything
about these cases, best we can do is warn in the right spot in the man page.
ok markus
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.189 2015/01/13 07:39:19 djm Exp $
.Dd $Mdocdate: January 13 2015 $
d374 1
a374 1
For safety, it is very important that the directory heirarchy be
@


1.189
log
@add sshd_config HostbasedAcceptedKeyTypes and PubkeyAcceptedKeyTypes
options to allow sshd to control what public key types will be
accepted. Currently defaults to all. Feedback & ok markus@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.188 2014/12/22 09:05:17 djm Exp $
.Dd $Mdocdate: December 22 2014 $
d334 4
a337 2
All components of the pathname must be root-owned directories that are
not writable by any other user or group.
d373 7
@


1.188
log
@mention ssh -Q feature to list supported { MAC, cipher, KEX, key }
algorithms in more places and include the query string used to
list the relevant information; bz#2288
@
text
@d36 1
a36 1
.\" $OpenBSD: sshd_config.5,v 1.187 2014/12/22 08:24:17 jmc Exp $
d565 11
d977 1
d991 1
d1199 11
@


1.187
log
@tweak previous;
@
text
@d36 1
a36 1
.\" $OpenBSD: sshd_config.5,v 1.186 2014/12/22 08:04:23 djm Exp $
d422 3
a424 1
.Xr ssh 1 .
d766 7
d891 7
@


1.186
log
@correct description of what will happen when a AuthorizedKeysCommand is
specified but AuthorizedKeysCommandUser is not (sshd will refuse to start)
@
text
@d36 1
a36 1
.\" $OpenBSD: sshd_config.5,v 1.185 2014/12/22 07:51:30 djm Exp $
d215 1
a215 1
method is listed more than one,
@


1.185
log
@remember which public keys have been used for authentication and
refuse to accept previously-used keys.

This allows AuthenticationMethods=publickey,publickey to require
that users authenticate using two _different_ pubkeys.

ok markus@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.184 2014/12/21 23:35:14 jmc Exp $
.Dd $Mdocdate: December 21 2014 $
d247 1
a247 1
If no user is specified then
d249 5
a253 1
is ignored.
@


1.184
log
@tweak previous;
@
text
@d36 1
a36 1
.\" $OpenBSD: sshd_config.5,v 1.183 2014/12/21 22:27:55 djm Exp $
d212 12
@


1.183
log
@Add FingerprintHash option to control algorithm used for key
fingerprints. Default changes from MD5 to SHA256 and format
from hex to base64.

Feedback and ok naddy@@ markus@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.182 2014/12/12 00:02:17 djm Exp $
.Dd $Mdocdate: December 12 2014 $
a496 1
.Pp
@


1.182
log
@revert chunk I didn't mean to commit yet; via jmc@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.181 2014/12/11 05:25:06 djm Exp $
.Dd $Mdocdate: December 11 2014 $
d489 9
@


1.181
log
@mention AuthorizedKeysCommandUser must be set for
AuthorizedKeysCommand to be run; bz#2287
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.180 2014/11/22 19:21:03 jmc Exp $
.Dd $Mdocdate: November 22 2014 $
a211 12
.Pp
If the
.Dq publickey
method is listed more than one,
.Xr sshd 8
verifies that keys that have been successfully are not reused for subsequent
authentications.
For example, an
.Cm AuthenticationMethods
of
.Dq publickey,publickey
will require successful authentication using two different public keys.
@


1.180
log
@restore word zapped in previous, and remove some useless "No" macros;
@
text
@d36 1
a36 1
.\" $OpenBSD: sshd_config.5,v 1.179 2014/11/22 18:15:41 deraadt Exp $
d213 12
d247 3
@


1.179
log
@/dev/random has created the same effect as /dev/arandom (and /dev/urandom)
for quite some time.  Mop up the last few, by using /dev/random where we
actually want it, or not even mentioning arandom where it is irrelevant.
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.178 2014/09/09 09:45:36 djm Exp $
.Dd $Mdocdate: September 9 2014 $
d340 1
d756 1
a756 1
.Ar host No | Ar IPv4_addr No | Ar IPv6_addr
d761 1
a761 1
.Ar host No | Ar IPv4_addr No : Ar port
d767 1
a767 1
.Ar host No | Ar IPv6_addr Oc : Ar port
@


1.178
log
@mention permissions on tun(4) devices in PermitTunnel documentation;
bz#2273
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.177 2014/08/30 16:32:25 sobrado Exp $
.Dd $Mdocdate: August 30 2014 $
a339 2
.Xr arandom 4
and
@


1.177
log
@typo.
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.176 2014/07/28 15:40:08 schwarze Exp $
.Dd $Mdocdate: July 28 2014 $
d1065 4
@


1.176
log
@some systems no longer need /dev/log;
issue noticed by jirib;
ok deraadt
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.175 2014/07/15 15:54:14 millert Exp $
.Dd $Mdocdate: July 15 2014 $
d866 1
a866 1
blocks that are satisified, only the first instance of the keyword is
@


1.175
log
@Add support for Unix domain socket forwarding.  A remote TCP port
may be forwarded to a local Unix domain socket and vice versa or
both ends may be a Unix domain socket.  This is a reimplementation
of the streamlocal patches by William Ahern from:
    http://www.25thandclement.com/~william/projects/streamlocal.html
OK djm@@ markus@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.174 2014/07/03 22:40:43 djm Exp $
.Dd $Mdocdate: July 3 2014 $
d348 1
a348 1
though sessions which use logging do require
d350 1
a350 1
inside the chroot directory (see
@


1.174
log
@Add a sshd_config PermitUserRC option to control whether ~/.ssh/rc is
executed, mirroring the no-user-rc authorized_keys option;
bz#2160; ok markus@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.173 2014/03/28 05:17:11 naddy Exp $
.Dd $Mdocdate: March 28 2014 $
d143 20
d1195 27
@


1.173
log
@sync available and default algorithms, improve algorithm list formatting
help from jmc@@ and schwarze@@, ok deraadt@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.172 2014/02/27 22:47:07 djm Exp $
.Dd $Mdocdate: February 27 2014 $
d916 1
d1065 6
@


1.172
log
@bz#2184 clarify behaviour of a keyword that appears in multiple
matching Match blocks; ok dtucker@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.171 2014/01/29 14:04:51 jmc Exp $
.Dd $Mdocdate: January 29 2014 $
d341 32
a372 16
.Dq 3des-cbc ,
.Dq aes128-cbc ,
.Dq aes192-cbc ,
.Dq aes256-cbc ,
.Dq aes128-ctr ,
.Dq aes192-ctr ,
.Dq aes256-ctr ,
.Dq aes128-gcm@@openssh.com ,
.Dq aes256-gcm@@openssh.com ,
.Dq arcfour128 ,
.Dq arcfour256 ,
.Dq arcfour ,
.Dq blowfish-cbc ,
.Dq cast128-cbc ,
and
.Dq chacha20-poly1305@@openssh.com .
d375 2
a376 2
.Bd -literal -offset 3n
aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,
d378 1
a378 3
chacha20-poly1305@@openssh.com,
aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,
aes256-cbc,arcfour
d690 22
a711 1
The default is
d716 1
a716 3
diffie-hellman-group-exchange-sha1,
diffie-hellman-group14-sha1,
diffie-hellman-group1-sha1
d788 41
a830 1
hmac-md5-etm@@openssh.com,hmac-sha1-etm@@openssh.com,
d833 2
a834 5
hmac-ripemd160-etm@@openssh.com,hmac-sha1-96-etm@@openssh.com,
hmac-md5-96-etm@@openssh.com,
hmac-md5,hmac-sha1,umac-64@@openssh.com,umac-128@@openssh.com,
hmac-sha2-256,hmac-sha2-512,hmac-ripemd160,
hmac-sha1-96,hmac-md5-96
@


1.171
log
@document kbdinteractiveauthentication;
requested From: Ross L Richardson

dtucker/markus helped explain its workings;
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.170 2013/12/08 09:53:27 dtucker Exp $
.Dd $Mdocdate: December 8 2013 $
d774 4
@


1.170
log
@Use a literal for the default value of KEXAlgorithms.  ok deraadt jmc
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.169 2013/12/07 11:58:46 naddy Exp $
.Dd $Mdocdate: December 7 2013 $
d637 11
@


1.169
log
@add missing mentions of ed25519; ok djm@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.168 2013/11/21 08:05:09 jmc Exp $
.Dd $Mdocdate: November 21 2013 $
d666 8
a673 8
.Dq curve25519-sha256@@libssh.org ,
.Dq ecdh-sha2-nistp256 ,
.Dq ecdh-sha2-nistp384 ,
.Dq ecdh-sha2-nistp521 ,
.Dq diffie-hellman-group-exchange-sha256 ,
.Dq diffie-hellman-group-exchange-sha1 ,
.Dq diffie-hellman-group14-sha1 ,
.Dq diffie-hellman-group1-sha1 .
@


1.168
log
@no need for .Pp before displays;
@
text
@d36 1
a36 1
.\" $OpenBSD: sshd_config.5,v 1.167 2013/11/21 00:45:44 djm Exp $
d544 2
a545 1
.Pa /etc/ssh/ssh_host_ecdsa_key
d556 2
a557 1
.Dq ecdsa
@


1.167
log
@Add a new protocol 2 transport cipher "chacha20-poly1305@@openssh.com"
that combines Daniel Bernstein's ChaCha20 stream cipher and Poly1305 MAC
to build an authenticated encryption mode.

Inspired by and similar to Adam Langley's proposal for TLS:
http://tools.ietf.org/html/draft-agl-tls-chacha20poly1305-03
but differs in layout used for the MAC calculation and the use of a
second ChaCha20 instance to separately encrypt packet lengths.
Details are in the PROTOCOL.chacha20poly1305 file.

Feedback markus@@, naddy@@; manpage bits Loganden Velvindron @@ AfriNIC
ok markus@@ naddy@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.166 2013/11/02 22:39:19 markus Exp $
.Dd $Mdocdate: November 2 2013 $
a358 1
.Pp
@


1.166
log
@the default kex is now curve25519-sha256@@libssh.org
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.165 2013/10/29 18:49:32 jmc Exp $
.Dd $Mdocdate: October 29 2013 $
d339 2
a340 1
The supported ciphers are
d354 1
d356 2
a357 1
.Dq cast128-cbc .
d359 1
d363 1
d367 5
@


1.165
log
@pty(4), not pty(7);
@
text
@d36 1
a36 1
.\" $OpenBSD: sshd_config.5,v 1.164 2013/10/29 09:48:02 djm Exp $
d655 1
@


1.164
log
@shd_config PermitTTY to disallow TTY allocation, mirroring the
longstanding no-pty authorized_keys option;
bz#2070, patch from Teran McKinney; ok markus@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.163 2013/10/24 00:51:48 dtucker Exp $
.Dd $Mdocdate: October 24 2013 $
d949 1
a949 1
.Xr pty 7
@


1.163
log
@Disallow empty Match statements and add "Match all" which matches everything.
ok djm, man page help jmc@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.162 2013/07/19 07:37:48 markus Exp $
.Dd $Mdocdate: July 19 2013 $
d817 1
d947 6
@


1.162
log
@add ssh-agent(1) support to sshd(8); allows encrypted hostkeys,
or hostkeys on smartcards; most of the work by Zev Weiss; bz #1974
ok djm@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.161 2013/06/27 14:05:37 jmc Exp $
.Dd $Mdocdate: June 27 2013 $
d754 3
a756 1
are one or more criteria-pattern pairs.
@


1.161
log
@do not use Sx for sections outwith the man page - ingo informs me that
stuff like html will render with broken links;

issue reported by Eric S. Raymond, via djm
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.160 2013/05/16 06:30:06 jmc Exp $
.Dd $Mdocdate: May 16 2013 $
d550 12
@


1.160
log
@oops! avoid Xr to self;
@
text
@d36 1
a36 1
.\" $OpenBSD: sshd_config.5,v 1.159 2013/05/16 04:09:14 dtucker Exp $
d120 1
a120 3
See
.Sx PATTERNS
in
d160 1
a160 3
See
.Sx PATTERNS
in
d204 1
a204 3
more lines of authorized_keys output (see
.Sx AUTHORIZED_KEYS
in
d219 1
a219 1
.Sx AUTHORIZED_KEYS FILE FORMAT
d243 1
a243 3
in
.Sx AUTHORIZED_KEYS FILE FORMAT
in
d422 1
a422 3
See
.Sx PATTERNS
in
d441 1
a441 3
See
.Sx PATTERNS
in
d753 1
a753 2
.Sx PATTERNS
section of
d1034 1
a1034 3
For more information on KRLs, see the
.Sx KEY REVOCATION LISTS
section in
d1123 1
a1123 3
For more details on certificates, see the
.Sx CERTIFICATES
section in
@


1.159
log
@Add RekeyLimit to sshd with the same syntax as the client allowing rekeying
based on traffic volume or time.  ok djm@@, help & ok jmc@@ for the man page.
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.158 2013/04/19 01:00:10 djm Exp $
.Dd $Mdocdate: April 19 2013 $
d1031 1
a1031 2
section of
.Xr sshd_config 5 .
@


1.158
log
@document the requirment that the AuthorizedKeysCommand be owned by root;
ok dtucker@@ markus@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.157 2013/03/07 19:27:25 markus Exp $
.Dd $Mdocdate: March 7 2013 $
d818 1
d1013 27
@


1.157
log
@add submethod support to AuthenticationMethods; ok and freedback djm@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.156 2013/02/06 00:20:42 dtucker Exp $
.Dd $Mdocdate: February 6 2013 $
d205 2
a206 1
The program will be invoked with a single argument of the username
@


1.156
log
@Change default of MaxStartups to 10:30:100 to start doing random early
drop at 10 connections up to 100 connections.  This will make it harder
to DoS as CPUs have come a long way since the original value was set
back in 2000.  Prompted by nion at debian org, ok markus@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.155 2013/01/18 08:00:49 jmc Exp $
.Dd $Mdocdate: January 18 2013 $
d182 14
@


1.155
log
@tweak previous;
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.154 2013/01/17 23:00:01 djm Exp $
.Dd $Mdocdate: January 17 2013 $
d824 1
a824 1
The default is 10.
@


1.154
log
@add support for Key Revocation Lists (KRLs). These are a compact way to
represent lists of revoked keys and certificates, taking as little as
a single bit of incremental cost to revoke a certificate by serial number.
KRLs are loaded via the existing RevokedKeys sshd_config option.

feedback and ok markus@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.153 2013/01/08 18:49:04 markus Exp $
.Dd $Mdocdate: January 8 2013 $
d1004 1
a1004 1
.Xr ssh-keygen 1
@


1.153
log
@support AES-GCM as defined in RFC 5647 (but with simpler KEX handling)
ok and feedback djm@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.152 2012/12/11 22:31:18 markus Exp $
.Dd $Mdocdate: December 11 2012 $
d998 1
a998 1
Specifies a list of revoked public keys.
d1002 7
@


1.152
log
@add encrypt-then-mac (EtM) modes to openssh by defining new mac algorithms
that change the packet format and compute the MAC over the encrypted
message (including the packet size) instead of the plaintext data;
these EtM modes are considered more secure and used by default.
feedback and ok djm@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.151 2012/12/03 08:33:03 jmc Exp $
.Dd $Mdocdate: December 3 2012 $
d340 2
d351 1
@


1.151
log
@tweak previous;
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.150 2012/12/02 20:46:11 djm Exp $
.Dd $Mdocdate: December 2 2012 $
d710 4
d716 5
@


1.150
log
@make AllowTcpForwarding accept "local" and "remote" in addition to its
current "yes"/"no" to allow the server to specify whether just local or
remote TCP forwarding is enabled. ok markus@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.149 2012/11/04 11:09:15 djm Exp $
.Dd $Mdocdate: November 4 2012 $
d136 2
a137 1
.Xr ssh 1 ) forwarding only or
@


1.149
log
@Support multiple required authentication via an AuthenticationMethods
option. This option lists one or more comma-separated lists of
authentication method names. Successful completion of all the methods in
any list is required for authentication to complete;
feedback and ok markus@@
@
text
@d36 1
a36 1
.\" $OpenBSD: sshd_config.5,v 1.148 2012/11/04 10:38:43 djm Exp $
d127 12
@


1.148
log
@Remove default of AuthorizedCommandUser. Administrators are now expected
to explicitly specify a user. feedback and ok markus@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.147 2012/10/31 08:04:50 jmc Exp $
.Dd $Mdocdate: October 31 2012 $
d154 22
d754 1
@


1.147
log
@tweak previous;
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.146 2012/10/30 21:29:55 djm Exp $
.Dd $Mdocdate: October 30 2012 $
a168 1
The default is the user being authenticated.
@


1.146
log
@new sshd_config option AuthorizedKeysCommand to support fetching
authorized_keys from a command in addition to (or instead of) from
the filesystem. The command is run as the target server user unless
another specified via a new AuthorizedKeysCommandUser option.

patch originally by jchadima AT redhat.com, reworked by me; feedback
and ok markus@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.145 2012/10/04 13:21:50 markus Exp $
.Dd $Mdocdate: October 4 2012 $
d155 1
a155 1
Specifies a program to be used for lookup of the user's public keys.
d158 4
a161 2
more lines of authorized_keys output (see AUTHORIZED_KEYS in
.Xr sshd 8 )
a732 1
.Cm AuthorizedKeysFile ,
d735 1
@


1.145
log
@add umac128 variant; ok djm@@ at n2k12
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.144 2012/06/29 13:57:25 naddy Exp $
.Dd $Mdocdate: June 29 2012 $
d154 16
d732 2
@


1.144
log
@match the documented MAC order of preference to the actual one; ok dtucker@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.143 2012/06/28 05:07:45 dtucker Exp $
.Dd $Mdocdate: June 28 2012 $
d660 1
a660 1
hmac-md5,hmac-sha1,umac-64@@openssh.com,
@


1.143
log
@Remove hmac-sha2-256-96 and hmac-sha2-512-96 MACs since they were removed
from draft6 of the spec and will not be in the RFC when published.  Patch
from mdb at juniper net via bz#2023, ok markus.
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.142 2012/06/19 21:35:54 jmc Exp $
.Dd $Mdocdate: June 19 2012 $
d661 2
a662 2
hmac-ripemd160,hmac-sha1-96,hmac-md5-96,
hmac-sha2-256,hmac-sha2-512
@


1.142
log
@tweak previous; ok markus
@
text
@d36 1
a36 1
.\" $OpenBSD: sshd_config.5,v 1.141 2012/06/19 18:25:28 markus Exp $
d662 1
a662 2
hmac-sha2-256,hmac-sha256-96,hmac-sha2-512,
hmac-sha2-512-96
@


1.141
log
@sshd_config: extend Match to allow AcceptEnv and {Allow,Deny}{Users,Groups}
this allows 'Match LocalPort 1022' combined with 'AllowUser bauer'
ok djm@@ (back in March)
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.140 2012/05/19 06:30:30 dtucker Exp $
.Dd $Mdocdate: May 19 2012 $
d711 1
a711 1
.Cm AcceptEnv
d713 1
a713 1
.Cm AllowGroups .
d723 1
a724 1
.Cm GatewayPorts ,
d737 1
a738 1
.Cm RhostsRSAAuthentication ,
@


1.140
log
@Document PermitOpen none.  bz#2001, patch from Loganaden Velvindron
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.139 2012/05/13 01:42:32 dtucker Exp $
.Dd $Mdocdate: May 13 2012 $
d711 1
d713 1
d715 1
d720 2
d723 1
a724 1
.Cm GSSAPIAuthentication ,
d737 1
a738 1
.Cm RSAAuthentication ,
@


1.139
log
@Add "Match LocalAddress" and "Match LocalPort" to sshd and adjust tests
to match.  Feedback and ok djm@@ markus@@.
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.138 2012/04/12 02:43:55 djm Exp $
.Dd $Mdocdate: April 12 2012 $
d806 3
@


1.138
log
@mention AuthorizedPrincipalsFile=none default
@
text
@d36 1
a36 1
.\" $OpenBSD: sshd_config.5,v 1.137 2012/04/12 02:42:32 djm Exp $
d681 2
@


1.137
log
@VersionAddendum option to allow server operators to append some arbitrary
text to the SSH-... banner; ok deraadt@@ "don't care" markus@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.136 2011/09/09 00:43:00 djm Exp $
.Dd $Mdocdate: September 9 2011 $
d201 3
a203 1
The default is not to use a principals file \(en in this case, the username
@


1.136
log
@fix typo in IPQoS parsing: there is no "AF14" class, but there is
an "AF21" class. Spotted by giesen AT snickers.org; ok markus stevesk
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.135 2011/08/02 01:22:11 djm Exp $
.Dd $Mdocdate: August 2 2011 $
d1059 5
@


1.135
log
@Add new SHA256 and SHA512 based HMAC modes from
http://www.ietf.org/id/draft-dbider-sha2-mac-for-ssh-02.txt

feedback and ok markus@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.134 2011/06/22 21:57:01 djm Exp $
.Dd $Mdocdate: June 22 2011 $
d523 1
a523 1
.Dq af14 ,
@


1.134
log
@introduce sandboxing of the pre-auth privsep child using systrace(4).

This introduces a new "UsePrivilegeSeparation=sandbox" option for
sshd_config that applies mandatory restrictions on the syscalls the
privsep child can perform. This prevents a compromised privsep child
from being used to attack other hosts (by opening sockets and proxying)
or probing local kernel attack surface.

The sandbox is implemented using systrace(4) in unsupervised "fast-path"
mode, where a list of permitted syscalls is supplied. Any syscall not
on the list results in SIGKILL being sent to the privsep child. Note
that this requires a kernel with the new SYSTR_POLICY_KILL option.

UsePrivilegeSeparation=sandbox will become the default in the future
so please start testing it now.

feedback dtucker@@; ok markus@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.133 2011/05/23 07:10:21 jmc Exp $
.Dd $Mdocdate: May 23 2011 $
d659 3
a661 1
hmac-ripemd160,hmac-sha1-96,hmac-md5-96
@


1.133
log
@tweak previous; ok djm
@
text
@d36 1
a36 1
.\" $OpenBSD: sshd_config.5,v 1.132 2011/05/23 03:30:07 djm Exp $
d1051 6
@


1.132
log
@allow AuthorizedKeysFile to specify multiple files, separated by spaces.
Bring back authorized_keys2 as a default search path (to avoid breaking
existing users of this file), but override this in sshd_config so it will
be no longer used on fresh installs. Maybe in 2015 we can remove it
entierly :)

feedback and ok markus@@ dtucker@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.131 2010/12/08 04:02:47 djm Exp $
.Dd $Mdocdate: December 8 2010 $
d171 3
a173 5
The default is both
.Dq .ssh/authorized_keys
and
.Dq .ssh/authorized_keys2 .
Multiple files may be listed separated by whitespace.
@


1.131
log
@explain that IPQoS arguments are separated by whitespace; iirc requested
by jmc@@ a while back
CVS ----------------------------------------------------------------------
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.130 2010/11/18 15:01:00 jmc Exp $
.Dd $Mdocdate: November 18 2010 $
d171 5
a175 2
The default is
.Dq .ssh/authorized_keys .
@


1.130
log
@add IPQoS to the various -o lists, and zap some trailing whitespace;
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.129 2010/11/13 23:27:51 djm Exp $
.Dd $Mdocdate: November 13 2010 $
d544 1
a544 1
This option may take one or two arguments.
@


1.129
log
@allow ssh and sshd to set arbitrary TOS/DSCP/QoS values instead of
hardcoding lowdelay/throughput.

bz#1733 patch from philipp AT redfish-solutions.com; ok markus@@ deraadt@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.128 2010/10/28 18:33:28 jmc Exp $
.Dd $Mdocdate: October 28 2010 $
d585 1
a585 1
.Dq diffie-hellman-group-exchange-sha256 , 
@


1.128
log
@knock out some "-*- nroff -*-" lines;
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.127 2010/09/22 05:01:30 djm Exp $
.Dd $Mdocdate: September 22 2010 $
d516 37
@


1.127
log
@add a KexAlgorithms knob to the client and server configuration to allow
selection of which key exchange methods are used by ssh(1) and sshd(8)
and their order of preference.

ok markus@@
@
text
@a0 1
.\"  -*- nroff -*-
d36 2
a37 2
.\" $OpenBSD: sshd_config.5,v 1.126 2010/08/31 11:54:45 djm Exp $
.Dd $Mdocdate: August 31 2010 $
@


1.126
log
@Implement Elliptic Curve Cryptography modes for key exchange (ECDH) and
host/user keys (ECDSA) as specified by RFC5656. ECDH and ECDSA offer
better performance than plain DH and DSA at the same equivalent symmetric
key length, as well as much shorter keys.

Only the mandatory sections of RFC5656 are implemented, specifically the
three REQUIRED curves nistp256, nistp384 and nistp521 and only ECDH and
ECDSA. Point compression (optional in RFC5656 is NOT implemented).

Certificate host and user keys using the new ECDSA key types are supported.

Note that this code has not been tested for interoperability and may be
subject to change.

feedback and ok markus@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.125 2010/06/30 07:28:34 jmc Exp $
.Dd $Mdocdate: June 30 2010 $
d542 11
@


1.125
log
@tweak previous;
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.124 2010/06/29 23:16:46 djm Exp $
.Dd $Mdocdate: June 29 2010 $
d474 3
a477 2
and
.Pa /etc/ssh/ssh_host_dsa_key
d485 2
a486 1
.Dq dsa
@


1.124
log
@allow key options (command="..." and friends) in AuthorizedPrincipals;
ok markus@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.123 2010/06/22 04:22:59 djm Exp $
.Dd $Mdocdate: June 22 2010 $
d181 1
a181 1
Names are listed one per line preceeded by key options (as described
d185 1
a185 1
.Xr sshd 8 ).
@


1.123
log
@expose some more sshd_config options inside Match blocks:
  AuthorizedKeysFile AuthorizedPrincipalsFile
  HostbasedUsesNameFromPacketOnly PermitTunnel
bz#1764; feedback from imorgan AT nas.nasa.gov; ok dtucker@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.122 2010/05/07 12:49:17 jmc Exp $
.Dd $Mdocdate: May 7 2010 $
d158 4
d181 6
a186 1
Names are listed one per line; empty lines and comments starting with
@


1.122
log
@tweak previous;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.121 2010/05/07 11:30:30 djm Exp $
d648 2
d656 1
d665 1
@


1.121
log
@add some optional indirection to matching of principal names listed
in certificates. Currently, a certificate must include the a user's name
to be accepted for authentication. This change adds the ability to
specify a list of certificate principal names that are acceptable.

When authenticating using a CA trusted through ~/.ssh/authorized_keys,
this adds a new principals="name1[,name2,...]" key option.

For CAs listed through sshd_config's TrustedCAKeys option, a new config
option "AuthorizedPrincipalsFile" specifies a per-user file containing
the list of acceptable names.

If either option is absent, the current behaviour of requiring the
username to appear in principals continues to apply.

These options are useful for role accounts, disjoint account namespaces
and "user@@realm"-style naming policies in certificates.

feedback and ok markus@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.120 2010/03/04 23:17:25 djm Exp $
.Dd $Mdocdate: March 4 2010 $
d192 1
a192 1
The default is not to use a principals file - in this case, the username
a205 1
.Pp
@


1.120
log
@missing word; spotted by jmc@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.119 2010/03/04 12:51:25 jmc Exp $
d170 37
@


1.119
log
@tweak previous;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.118 2010/03/04 10:36:03 djm Exp $
d900 1
a900 1
trusted sign user certificates for authentication.
@


1.118
log
@Add a TrustedUserCAKeys option to sshd_config to specify CA keys that
are trusted to authenticate users (in addition than doing it per-user
in authorized_keys).

Add a RevokedKeys option to sshd_config and a @@revoked marker to
known_hosts to allow keys to me revoked and banned for user or host
authentication.

feedback and ok markus@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.117 2010/02/26 20:29:54 djm Exp $
.Dd $Mdocdate: February 26 2010 $
d901 1
a901 1
Keys are listed one per line, empty lines and comments starting with
d910 1
a910 1
For more details in certificates, please see the
@


1.117
log
@Add support for certificate key types for users and hosts.

OpenSSH certificate key types are not X.509 certificates, but a much
simpler format that encodes a public key, identity information and
some validity constraints and signs it with a CA key. CA keys are
regular SSH keys. This certificate style avoids the attack surface
of X.509 certificates and is very easy to deploy.

Certified host keys allow automatic acceptance of new host keys
when a CA certificate is marked as trusted in ~/.ssh/known_hosts.
see VERIFYING HOST KEYS in ssh(1) for details.

Certified user keys allow authentication of users when the signing
CA key is marked as trusted in authorized_keys. See "AUTHORIZED_KEYS
FILE FORMAT" in sshd(8) for details.

Certificates are minted using ssh-keygen(1), documentation is in
the "CERTIFICATES" section of that manpage.

Documentation on the format of certificates is in the file
PROTOCOL.certkeys

feedback and ok markus@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.116 2010/01/09 23:04:13 dtucker Exp $
.Dd $Mdocdate: January 9 2010 $
d818 5
d898 16
@


1.116
log
@Remove RoutingDomain from ssh since it's now not needed.  It can be replaced
with "route exec" or "nc -V" as a proxycommand.  "route exec" also ensures
that trafic such as DNS lookups stays withing the specified routingdomain.

For example (from reyk):
# route -T 2 exec /usr/sbin/sshd
or inherited from the parent process
$ route -T 2 exec sh
$ ssh 10.1.2.3

ok deraadt@@ markus@@ stevesk@@ reyk@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.115 2009/12/29 18:03:32 jmc Exp $
.Dd $Mdocdate: December 29 2009 $
d415 8
@


1.115
log
@sort previous;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.114 2009/12/29 16:38:41 stevesk Exp $
a815 3
.It Cm RoutingDomain
Set the routing domain number.
The default routing domain is set by the system.
@


1.114
log
@Rename RDomain config option to RoutingDomain to be more clear and
consistent with other options.

NOTE: if you currently use RDomain in the ssh client or server config,
or ssh/sshd -o, you must update to use RoutingDomain.

ok markus@@ djm@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.113 2009/12/19 16:53:13 stevesk Exp $
.Dd $Mdocdate: December 19 2009 $
a809 3
.It Cm RoutingDomain
Set the routing domain number.
The default routing domain is set by the system.
d816 3
@


1.113
log
@try to clarify ChrootDirectory pathname argument a bit; resulting from
a question on openssh-unix-dev.  ok jmc@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.112 2009/11/10 02:58:56 djm Exp $
.Dd $Mdocdate: November 10 2009 $
d810 1
a810 1
.It Cm RDomain
@


1.112
log
@clarify that StrictModes does not apply to ChrootDirectory. Permissions
and ownership are always checked when chrooting. bz#1532
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.111 2009/10/28 21:45:08 jmc Exp $
.Dd $Mdocdate: October 28 2009 $
d186 1
a186 1
Specifies a path to
d189 1
a189 1
This path, and all its components, must be root-owned directories that are
d195 1
a195 1
The path may contain the following tokens that are expanded at runtime once
@


1.111
log
@tweak previous;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.110 2009/10/28 16:38:18 reyk Exp $
d836 3
@


1.110
log
@Allow to set the rdomain in ssh/sftp/scp/sshd and ssh-keyscan.

ok markus@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.109 2009/10/08 20:42:13 jmc Exp $
.Dd $Mdocdate: October 8 2009 $
d810 3
a818 3
.It Cm RDomain
Set the routing domain number.
The default routing domain is set by the system.
@


1.109
log
@some tweaks now that protocol 1 is not offered by default; ok markus
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.108 2009/10/08 14:03:41 markus Exp $
d816 3
@


1.108
log
@disable protocol 1 by default (after a transition period of about 10 years)
ok deraadt
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.107 2009/08/16 23:29:26 dtucker Exp $
.Dd $Mdocdate: August 16 2009 $
d797 1
a797 1
.Dq 2 .
@


1.107
log
@Add PubkeyAuthentication to the list allowed in a Match block (bz #1577)
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.106 2009/04/21 15:13:17 stevesk Exp $
.Dd $Mdocdate: April 21 2009 $
d797 1
a797 1
.Dq 2,1 .
@


1.106
log
@clarify we cd to user's home after chroot; ok markus@@ on
earlier version; tweaks and ok jmc@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.105 2009/04/18 18:39:10 jmc Exp $
.Dd $Mdocdate: April 18 2009 $
d618 1
@


1.105
log
@tweak previous; ok stevesk
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.104 2009/04/17 19:40:17 stevesk Exp $
.Dd $Mdocdate: April 17 2009 $
d191 3
@


1.104
log
@clarify that even internal-sftp needs /dev/log for logging to work; ok
markus@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.103 2009/04/13 19:07:44 stevesk Exp $
.Dd $Mdocdate: April 13 2009 $
d216 1
a216 2
.Dq sftp
which do not use logging,
d218 2
a219 4
in-process sftp server is used (see
.Cm Subsystem
for details).
sftp sessions which do use logging require
@


1.103
log
@fix possessive; ok djm@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.102 2009/02/22 23:59:25 djm Exp $
.Dd $Mdocdate: February 22 2009 $
d216 2
a217 1
.Dq sftp ,
d221 5
@


1.102
log
@missing period
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.101 2009/02/22 23:50:57 djm Exp $
d200 1
a200 1
users' session.
@


1.101
log
@don't advertise experimental options
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.100 2009/01/24 17:10:22 naddy Exp $
.Dd $Mdocdate: January 24 2009 $
d617 1
a617 1
.Cm X11UseLocalHost
@


1.100
log
@sync list of preferred ciphers; ok djm@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.99 2008/12/30 00:46:56 okan Exp $
.Dd $Mdocdate: December 30 2008 $
d615 1
a615 2
.Cm X11Forwarding ,
.Cm X11UseLocalHost ,
d617 1
a617 1
.Cm ZeroKnowledgePasswordAuthentication .
a983 11
.It Cm ZeroKnowledgePasswordAuthentication
Specifies whether to use zero knowledge password authentication.
This authentication method avoids exposure of password to untrusted
hosts.
The argument to this keyword must be
.Dq yes
or
.Dq no .
The default is currently
.Dq no
as this method is considered experimental.
@


1.99
log
@add AllowAgentForwarding to available Match keywords list

ok djm
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.98 2008/11/04 08:22:13 djm Exp $
.Dd $Mdocdate: November 4 2008 $
d243 3
a245 3
aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour128,
arcfour256,arcfour,aes192-cbc,aes256-cbc,aes128-ctr,
aes192-ctr,aes256-ctr
@


1.98
log
@Add support for an experimental zero-knowledge password authentication
method using the J-PAKE protocol described in F. Hao, P. Ryan,
"Password Authenticated Key Exchange by Juggling", 16th Workshop on
Security Protocols, Cambridge, April 2008.

This method allows password-based authentication without exposing
the password to the server. Instead, the client and server exchange
cryptographic proofs to demonstrate of knowledge of the password while
revealing nothing useful to an attacker or compromised endpoint.

This is experimental, work-in-progress code and is presently
compiled-time disabled (turn on -DJPAKE in Makefile.inc).

"just commit it.  It isn't too intrusive." deraadt@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.97 2008/10/09 03:50:54 djm Exp $
.Dd $Mdocdate: October 9 2008 $
d596 1
@


1.97
log
@support setting PermitEmptyPasswords in a Match block
requested in PR3891; ok dtucker@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.96 2008/07/02 02:24:18 djm Exp $
.Dd $Mdocdate: July 2 2008 $
d615 1
d617 1
a617 1
.Cm X11UseLocalHost .
d984 11
@


1.96
log
@increase default size of ssh protocol 1 ephemeral key from 768 to 1024
bits; prodded by & ok dtucker@@ ok deraadt@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.95 2008/06/15 16:58:40 dtucker Exp $
.Dd $Mdocdate: June 15 2008 $
d608 1
@


1.95
log
@Allow MaxAuthTries within a Match block.  ok djm@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.94 2008/06/15 16:54:30 dtucker Exp $
d814 1
a814 1
The minimum value is 512, and the default is 768.
@


1.94
log
@MaxSessions is allowed in a Match block too
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.93 2008/06/10 07:12:00 jmc Exp $
.Dd $Mdocdate: June 10 2008 $
d605 1
@


1.93
log
@tweak previous;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.92 2008/06/10 04:17:46 djm Exp $
d605 1
@


1.92
log
@better reference for pattern-list
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.91 2008/06/10 03:57:27 djm Exp $
d579 1
a579 1
address/masklen format, e.g.
d585 2
a586 1
or one with bits set in this host portion of the address. For example,
d589 1
a589 1
.Dq 192.0.2.0/8 
@


1.91
log
@support CIDR address matching in sshd_config "Match address" blocks, with
full support for negation and fall-back to classic wildcard matching.
For example:

Match address 192.0.2.0/24,3ffe:ffff::/32,!10.*
    PasswordAuthentication yes

addrmatch.c code mostly lifted from flowd's addr.c

feedback and ok dtucker@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.90 2008/05/08 12:21:16 djm Exp $
.Dd $Mdocdate: May 8 2008 $
d572 1
a572 1
.Sx SSH_KNOWN_HOSTS FILE FORMAT
d574 1
a574 1
.Xr sshd 8 .
@


1.90
log
@Make the maximum number of sessions run-time controllable via
a sshd_config MaxSessions knob. This is useful for disabling
login/shell/subsystem access while leaving port-forwarding working
(MaxSessions 0), disabling connection multiplexing (MaxSessions 1) or
simply increasing the number of allows multiplexed sessions.

Because some bozos are sure to configure MaxSessions in excess of the
number of available file descriptors in sshd (which, at peak, might be
as many as 9*MaxSessions), audit sshd to ensure that it doesn't leak fds
on error paths, and make it fail gracefully on out-of-fd conditions -
sending channel errors instead of than exiting with fatal().

bz#1090; MaxSessions config bits and manpage from junyer AT gmail.com

ok markus@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.89 2008/05/07 08:00:14 jmc Exp $
.Dd $Mdocdate: May 7 2008 $
d560 1
d570 21
@


1.89
log
@sort;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.88 2008/05/07 05:49:37 pyr Exp $
d597 3
@


1.88
log
@Enable the AllowAgentForwarding option in sshd_config (global and match
context), to specify if agents should be permitted on the server.
As the man page states:

``Note that disabling Agent forwarding does not improve security
unless users are also denied shell access, as they can always install
their own forwarders.''

ok djm@@, ok and a mild frown markus@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.87 2008/04/05 02:46:02 djm Exp $
.Dd $Mdocdate: April 5 2008 $
d98 9
a125 9
.It Cm AllowAgentForwarding
Specifies whether
.Xr ssh-agent 1
forwarding is permitted.
The default is
.Dq yes .
Note that disabling Agent forwarding does not improve security
unless users are also denied shell access, as they can always install
their own forwarders.
@


1.87
log
@HostbasedAuthentication is supported under Match too
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.86 2008/04/04 06:44:26 djm Exp $
.Dd $Mdocdate: April 4 2008 $
d117 9
@


1.86
log
@oops, some unrelated stuff crept into that commit - backout.
spotted by jmc@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.85 2008/04/04 05:14:38 djm Exp $
d569 2
a570 1
.Cm GSSApiAuthentication ,
@


1.85
log
@ChrootDirectory is supported in Match blocks (in fact, it is most useful
there). Spotted by Minstrel AT minstrel.org.uk
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.84 2008/03/25 11:58:02 djm Exp $
.Dd $Mdocdate: March 25 2008 $
a212 23
Please note that there are many ways to misconfigure a chroot environment
in ways that compromise security.
These include:
.Pp
.Bl -dash -offset indent -compact
.It
Making unsafe setuid binaries available;
.It
Having missing or incorrect configuration files in the chroot's
.Pa /etc
directory;
.It
Hard-linking files between the chroot and outside;
.It
Leaving unnecessary
.Pa /dev
nodes accessible inside the chroot (especially those for physical drives);
.It
Executing scripts or binaries inside the chroot from outside, either
directly or through facilities such as
.Xr cron 8 .
.El
.Pp
a342 5
Note that
.Dq internal-sftp
is only supported when
.Cm UsePrivilegeSeparation
is enabled.
a804 5
Note that
.Dq internal-sftp
is only supported when
.Cm UsePrivilegeSeparation
is enabled.
@


1.84
log
@ignore ~/.ssh/rc if a sshd_config ForceCommand is specified;
from dtucker@@ ok deraadt@@ djm@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.83 2008/02/11 07:58:28 jmc Exp $
.Dd $Mdocdate: February 11 2008 $
d213 23
d366 5
d594 1
d833 5
@


1.83
log
@bump Mdocdate for pages committed in "febuary", necessary because
of a typo in rcs.c;
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.82 2008/02/10 09:55:37 djm Exp $
.Dd $Mdocdate$
d327 3
a329 1
ignoring any command supplied by the client.
@


1.82
log
@mantion that "internal-sftp" is useful with ForceCommand too
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.81 2008/02/09 08:04:31 jmc Exp $
.Dd $Mdocdate: February 9 2008 $
@


1.81
log
@missing `)';
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.80 2008/02/08 23:24:07 djm Exp $
.Dd $Mdocdate: Febuary 8 2008 $
d336 5
@


1.80
log
@add sshd_config ChrootDirectory option to chroot(2) users to a directory and
tweak internal sftp server to work with it (no special files in chroot
required). ok markus@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.79 2008/01/01 09:27:33 dtucker Exp $
.Dd $Mdocdate: January 1 2008 $
d211 1
a211 1
for details.
@


1.79
log
@Allow PermitRootLogin in a Match block.  Allows for, eg, permitting root
only from the local network.  ok markus@@, man page bit ok jmc@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.78 2007/08/23 03:22:16 djm Exp $
.Dd $Mdocdate: August 23 2007 $
d176 39
d782 1
d788 10
@


1.78
log
@Support "Banner=none" to disable displaying of the pre-login banner;
ok dtucker@@ deraadt@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.77 2007/06/08 07:48:09 jmc Exp $
.Dd $Mdocdate: June 8 2007 $
d527 1
@


1.77
log
@oops, here too: put the MAC list into a display, like we do for
ciphers, since groff has trouble with wide lines;
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.76 2007/06/07 19:37:34 pvalchev Exp $
.Dd $Mdocdate$
a161 2
In some jurisdictions, sending a warning message before authentication
may be relevant for getting legal protection.
d164 3
@


1.76
log
@Add a new MAC algorithm for data integrity, UMAC-64 (not default yet, must
specify umac-64@@openssh.com). Provides about 20% end-to-end speedup
compared to hmac-md5. Represents a different approach to message
authentication to that of HMAC that may be beneficial if HMAC based on one
of its underlying hash algorithms is found to be vulnerable to a new attack.
http://www.ietf.org/rfc/rfc4418.txt

in conjunction with and OK djm@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.75 2007/05/31 19:20:17 jmc Exp $
d492 4
a495 1
.Dq hmac-md5,hmac-sha1,umac-64@@openssh.com,hmac-ripemd160,hmac-sha1-96,hmac-md5-96 .
@


1.75
log
@convert to new .Dd format;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.74 2007/03/01 16:19:33 jmc Exp $
d492 1
a492 1
.Dq hmac-md5,hmac-sha1,hmac-ripemd160,hmac-sha1-96,hmac-md5-96 .
@


1.74
log
@sort the `match' keywords;
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd_config.5,v 1.73 2007/03/01 10:28:02 dtucker Exp $
.Dd September 25, 1999
@


1.73
log
@Remove ChallengeResponseAuthentication support inside a Match
block as its interaction with KbdInteractive makes it difficult to
support.  Also, relocate the CR/kbdint option special-case code into
servconf.  "please commit" djm@@, ok markus@@ for the relocation.
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.72 2007/02/19 10:45:58 dtucker Exp $
d519 1
a520 1
.Cm KbdInteractiveAuthentication ,
@


1.72
log
@Teach Match how handle config directives that are used before authentication.
This allows configurations such as permitting password authentication from
the local net only while requiring pubkey from offsite.  ok djm@@, man page
bits ok jmc@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.71 2007/01/02 09:57:25 jmc Exp $
a515 1
.Cm ChallengeResponseAuthentication ,
d520 1
a520 1
.Cm KeyboardInteractiveAuthentication ,
@


1.71
log
@do not use lists for SYNOPSIS;
from eric s. raymond via brad
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.70 2006/08/21 08:14:01 dtucker Exp $
d515 2
d519 4
d524 2
@


1.70
log
@Document HostbasedUsesNameFromPacketOnly.  Corrections from jmc@@, ok jmc@@ djm@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.69 2006/08/14 12:40:25 dtucker Exp $
d45 1
a45 3
.Bl -tag -width Ds -compact
.It Pa /etc/ssh/sshd_config
.El
@


1.69
log
@Add ability to match groups to Match keyword in sshd_config.  Feedback djm@@,
stevesk@@, ok stevesk@@.
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.68 2006/07/21 12:43:36 dtucker Exp $
d336 17
@


1.68
log
@Make PermitOpen take a list of permitted ports and act more like most other
keywords (ie the first match is the effective setting).  This also makes it
easier to override a previously set PermitOpen.  ok djm@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.67 2006/07/19 13:07:10 dtucker Exp $
d491 1
@


1.67
log
@Add ForceCommand keyword to sshd_config, equivalent to the "command="
key option, man page entry and example in sshd_config.  Feedback & ok djm@@,
man page corrections & ok jmc@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.66 2006/07/19 08:56:41 dtucker Exp $
d567 1
a567 3
Multiple instances of
.Cm PermitOpen
are permitted.
@


1.66
log
@Add support for X11Forwaring, X11DisplayOffset and X11UseLocalhost to
Match.  ok djm@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.65 2006/07/18 08:22:23 dtucker Exp $
d286 12
d499 1
@


1.65
log
@Clarify description of Match, with minor correction from jmc@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.64 2006/07/18 08:03:09 jmc Exp $
d488 3
d492 1
a492 1
.Cm PermitOpen .
@


1.64
log
@mark up angle brackets;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.63 2006/07/18 07:50:40 jmc Exp $
d468 1
a468 1
Keywords on lines following a
d470 2
a471 1
block are only applied if all of the criteria on the
d473 1
a473 1
are satisfied.
d476 1
a476 1
block are one or more criteria-pattern pairs.
@


1.63
log
@tweak; ok dtucker
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.62 2006/07/17 12:06:00 dtucker Exp $
d858 1
a858 1
.It Cm <none>
@


1.62
log
@Add PermitOpen directive to sshd_config which is equivalent to the
"permitopen" key option.  Allows server admin to allow TCP port forwarding
only two specific host/port pairs.  Useful when combined with Match.

If permitopen is used in both sshd_config and a key option, both must allow
a given connection before it will be permitted.

Note that users can still use external forwarders such as netcat, so to be
those must be controlled too for the limits to be effective.

Feedback & ok djm@@, man page corrections & ok jmc@@.
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.61 2006/07/12 13:39:55 jmc Exp $
d556 1
a556 1
By default all port forward requests are permitted.
@


1.61
log
@ - new sentence, new line
 - s/The the/The/
 - kill a bad comma
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.60 2006/07/12 11:34:58 dtucker Exp $
d485 2
a486 1
.Cm AllowTcpForwarding
d488 1
a488 1
.Cm GatewayPorts .
d528 29
@


1.60
log
@Add support for conditional directives to sshd_config via a "Match" keyword,
which works similarly to the "Host" directive in ssh_config.

Lines after a Match line override the default set in the main section
if the condition on the Match line is true, eg

AllowTcpForwarding yes
Match User anoncvs
        AllowTcpForwarding no

will allow port forwarding by all users except "anoncvs".

Currently only a very small subset of directives are supported.

ok djm@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.59 2006/07/06 10:47:05 djm Exp $
d467 2
a468 1
Introduces a conditional block.  Keywords on lines following a
d473 1
a473 1
The the arguments to
d485 1
a485 1
.Cm AllowTcpForwarding ,
@


1.59
log
@support arguments to Subsystem commands; ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.58 2006/07/02 17:12:58 stevesk Exp $
d466 21
@


1.58
log
@more details and clarity for tun(4) device forwarding; ok and help
jmc@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.57 2006/03/14 16:32:48 markus Exp $
d646 2
a647 2
Arguments should be a subsystem name and a command to execute upon subsystem
request.
@


1.57
log
@*AliveCountMax applies to protcol v2 only; ok dtucker, djm
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.56 2006/03/13 10:14:29 dtucker Exp $
d540 4
a543 3
.Dq point-to-point ,
.Dq ethernet ,
or
d545 6
@


1.56
log
@Allow config directives to contain whitespace by surrounding them by double
quotes.  mindrot #482, man page help from jmc@@, ok djm@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.55 2006/02/26 18:01:13 jmc Exp $
d226 1
@


1.55
log
@subsection is pointless here;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.54 2006/02/25 12:28:34 jmc Exp $
d59 3
@


1.55.2.1
log
@upgrade to OpenSSH 4.4
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.70 2006/08/21 08:14:01 dtucker Exp $
a58 3
Arguments may optionally be enclosed in double quotes
.Pq \&"
in order to represent arguments containing spaces.
a222 1
This option applies to protocol version 2 only.
a281 12
.It Cm ForceCommand
Forces the execution of the command specified by
.Cm ForceCommand ,
ignoring any command supplied by the client.
The command is invoked by using the user's login shell with the -c option.
This applies to shell, command, or subsystem execution.
It is most useful inside a
.Cm Match
block.
The command originally supplied by the client is available in the
.Ev SSH_ORIGINAL_COMMAND
environment variable.
a321 17
.It Cm HostbasedUsesNameFromPacketOnly
Specifies whether or not the server will attempt to perform a reverse
name lookup when matching the name in the
.Pa ~/.shosts ,
.Pa ~/.rhosts ,
and
.Pa /etc/hosts.equiv
files during
.Cm HostbasedAuthentication .
A setting of
.Dq yes
means that
.Xr sshd 8
uses the name supplied by the client rather than
attempting to resolve the name from the TCP connection itself.
The default is
.Dq no .
a461 29
.It Cm Match
Introduces a conditional block.
If all of the criteria on the
.Cm Match
line are satisfied, the keywords on the following lines override those
set in the global section of the config file, until either another
.Cm Match
line or the end of the file.
The arguments to
.Cm Match
are one or more criteria-pattern pairs.
The available criteria are
.Cm User ,
.Cm Group ,
.Cm Host ,
and
.Cm Address .
Only a subset of keywords may be used on the lines following a
.Cm Match
keyword.
Available keywords are
.Cm AllowTcpForwarding ,
.Cm ForceCommand ,
.Cm GatewayPorts ,
.Cm PermitOpen ,
.Cm X11DisplayOffset ,
.Cm X11Forwarding ,
and
.Cm X11UseLocalHost .
a500 27
.It Cm PermitOpen
Specifies the destinations to which TCP port forwarding is permitted.
The forwarding specification must be one of the following forms:
.Pp
.Bl -item -offset indent -compact
.It
.Cm PermitOpen
.Sm off
.Ar host : port
.Sm on
.It
.Cm PermitOpen
.Sm off
.Ar IPv4_addr : port
.Sm on
.It
.Cm PermitOpen
.Sm off
.Ar \&[ IPv6_addr \&] : port
.Sm on
.El
.Pp
Multiple forwards may be specified by separating them with whitespace.
An argument of
.Dq any
can be used to remove all restrictions and permit any forwarding requests.
By default all port forwarding requests are permitted.
d536 3
a538 4
.Dq point-to-point
(layer 3),
.Dq ethernet
(layer 2), or
a539 6
Specifying
.Dq yes
permits both
.Dq point-to-point
and
.Dq ethernet .
d635 2
a636 2
Arguments should be a subsystem name and a command (with optional arguments)
to execute upon subsystem request.
d795 1
a795 1
.It Aq Cm none
@


1.54
log
@document the order in which allow/deny directives are processed;
help/ok dtucker
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.53 2006/02/24 23:51:17 jmc Exp $
d781 1
a781 1
.Ss Time Formats
@


1.53
log
@oops - bits i missed;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.52 2006/02/24 23:43:57 jmc Exp $
d104 6
d133 6
d249 6
d270 6
@


1.52
log
@some grammar/wording fixes;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.51 2006/02/24 20:31:31 jmc Exp $
d49 1
a49 1
.Nm sshd
d88 1
a88 1
.Nm sshd .
d424 1
a424 1
.Nm sshd .
d456 1
a456 1
.Nm sshd
d534 1
a534 2
.Nm sshd
daemon.
d622 1
a622 1
.Nm sshd .
d758 1
a758 1
.Nm sshd
d802 1
a802 1
.Nm sshd .
@


1.51
log
@more consistency fixes;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.50 2006/02/24 20:22:16 jmc Exp $
d92 1
a92 1
(use IPv4 only) or
d138 1
a138 1
set-up.
d140 1
a140 1
%h is replaced by the home directory of the user being authenticated and
d179 5
a183 5
The default is
.Bd -literal
  ``aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour128,
    arcfour256,arcfour,aes192-cbc,aes256-cbc,aes128-ctr,
    aes192-ctr,aes256-ctr''
d188 1
a188 1
.Nm sshd
d191 1
a191 2
.Nm sshd
will disconnect the client, terminating the session.
d209 1
a209 1
is left at the default, unresponsive ssh clients
d214 1
a214 1
.Nm sshd
d262 1
a262 1
.Nm sshd
d266 1
a266 2
can be used to specify that
.Nm sshd
d309 1
a309 1
.Nm sshd
d336 1
a336 1
.Nm sshd
d351 1
a351 1
Default is
d356 1
a356 1
Default is
d359 1
a359 1
If set then if password authentication through Kerberos fails then
d363 1
a363 1
Default is
d368 1
a368 1
Default is
d381 1
a381 1
.Nm sshd
d407 1
a407 2
.Nm sshd
will listen on the address and all prior
d416 1
a416 1
options must precede this option for non port qualified addresses.
d426 1
a426 1
QUIET, FATAL, ERROR, INFO, VERBOSE, DEBUG, DEBUG1, DEBUG2 and DEBUG3.
d436 1
a436 1
The default is
d446 1
a446 2
.Nm sshd
daemon.
d483 1
a483 1
.Dq forced-commands-only
d490 1
a490 1
.Dq without-password
d494 1
a494 1
.Dq forced-commands-only
d504 1
a504 1
.Dq no
d513 1
a513 1
.Dq ethernet
d526 1
a526 1
.Nm sshd .
d540 1
a540 1
.Nm sshd
d548 1
a548 1
.Nm sshd
d555 1
a555 1
.Nm sshd
d566 1
a566 1
.Nm sshd
d569 1
a569 1
.Dq 1
d571 1
a571 1
.Dq 2 .
d603 1
a603 1
.Nm sshd
d650 1
a650 1
.Nm sshd
d677 1
a677 1
.Nm sshd
d688 1
a688 1
.Nm sshd Ns 's
d690 1
a690 3
This prevents
.Nm sshd
from interfering with real X11 servers.
d703 1
a703 1
.Nm sshd
d706 1
a706 1
below), however this is not the default.
d710 1
a710 1
display server may be exposed to attack when the ssh client requests
d728 1
a728 1
.Nm sshd
d732 1
a732 2
.Nm sshd
binds the forwarding server to the loopback address and sets the
@


1.50
log
@some consistency fixes;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.49 2006/02/24 10:33:54 jmc Exp $
d75 1
a75 1
.Ql \&*
d459 1
a459 1
(e.g., "10:30:60").
d615 1
a615 1
Configures an external subsystem (e.g., file transfer daemon).
@


1.49
log
@signpost to PATTERNS;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.48 2006/01/02 17:09:49 jmc Exp $
d156 1
a156 1
Specifies whether challenge response authentication is allowed.
d294 1
a294 1
(hostbased authentication).
@


1.48
log
@some corrections from michael knudsen;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.47 2005/12/08 18:34:11 reyk Exp $
a101 5
.Ql \&*
and
.Ql \&?
can be used as
wildcards in the patterns.
d104 6
a121 5
.Ql \&*
and
.Ql \&?
can be used as
wildcards in the patterns.
d127 6
a235 5
.Ql \&*
and
.Ql \&?
can be used as
wildcards in the patterns.
d238 6
a247 4
.Ql \&*
and
.Ql \&?
can be used as wildcards in the patterns.
d253 6
@


1.47
log
@two changes to the new ssh tunnel support. this breaks compatibility
with the initial commit but is required for a portable approach.
- make the tunnel id u_int and platform friendly, use predefined types.
- support configuration of layer 2 (ethernet) or layer 3
(point-to-point, default) modes. configuration is done using the
Tunnel (yes|point-to-point|ethernet|no) option is ssh_config(5) and
restricted by the PermitTunnel (yes|point-to-point|ethernet|no) option
in sshd_config(5).

ok djm@@, man page bits by jmc@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.46 2005/12/06 22:38:28 reyk Exp $
d184 1
a184 1
Sets the number of client alive messages (see above) which may be
d206 1
a206 1
(above) is set to 15, and
@


1.46
log
@Add support for tun(4) forwarding over OpenSSH, based on an idea and
initial channel code bits by markus@@. This is a simple and easy way to
use OpenSSH for ad hoc virtual private network connections, e.g.
administrative tunnels or secure wireless access. It's based on a new
ssh channel and works similar to the existing TCP forwarding support,
except that it depends on the tun(4) network interface on both ends of
the connection for layer 2 or layer 3 tunneling. This diff also adds
support for LocalCommand in the ssh(1) client.

ok djm@@, markus@@, jmc@@ (manpages), tested and discussed with others
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.45 2005/09/21 23:36:54 djm Exp $
d509 6
@


1.45
log
@aquire -> acquire, from stevesk@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.44 2005/07/25 11:59:40 markus Exp $
d505 6
@


1.44
log
@add a new compression method that delays compression until the user
has been authenticated successfully and set compression to 'delayed'
for sshd.

this breaks older openssh clients (< 3.5) if they insist on
compression, so you have to re-enable compression in sshd_config.
ok djm@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.43 2005/05/23 23:32:46 djm Exp $
d351 1
a351 1
If AFS is active and the user has a Kerberos 5 TGT, attempt to aquire
@


1.44.2.1
log
@upgrade to OpenSSH 4.3
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.48 2006/01/02 17:09:49 jmc Exp $
d184 1
a184 1
Sets the number of client alive messages (see below) which may be
d206 1
a206 1
(see below) is set to 15, and
d351 1
a351 1
If AFS is active and the user has a Kerberos 5 TGT, attempt to acquire
a504 12
.It Cm PermitTunnel
Specifies whether
.Xr tun 4
device forwarding is allowed.
The argument must be
.Dq yes ,
.Dq point-to-point ,
.Dq ethernet
or
.Dq no .
The default is
.Dq no .
@


1.44.2.2
log
@upgrade to OpenSSH 4.4
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.70 2006/08/21 08:14:01 dtucker Exp $
d49 1
a49 1
.Xr sshd 8
a58 3
Arguments may optionally be enclosed in double quotes
.Pq \&"
in order to represent arguments containing spaces.
d75 1
a75 1
.Ql *
d88 1
a88 1
.Xr sshd 8 .
d92 1
a92 1
(use IPv4 only), or
d102 5
a108 12
The allow/deny directives are processed in the following order:
.Cm DenyUsers ,
.Cm AllowUsers ,
.Cm DenyGroups ,
and finally
.Cm AllowGroups .
.Pp
See
.Sx PATTERNS
in
.Xr ssh_config 5
for more information on patterns.
d121 5
a130 12
The allow/deny directives are processed in the following order:
.Cm DenyUsers ,
.Cm AllowUsers ,
.Cm DenyGroups ,
and finally
.Cm AllowGroups .
.Pp
See
.Sx PATTERNS
in
.Xr ssh_config 5
for more information on patterns.
d136 1
a136 1
setup.
d138 1
a138 1
%h is replaced by the home directory of the user being authenticated, and
d154 1
a154 1
Specifies whether challenge-response authentication is allowed.
d177 5
a181 5
The default is:
.Bd -literal -offset 3n
aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour128,
arcfour256,arcfour,aes192-cbc,aes256-cbc,aes128-ctr,
aes192-ctr,aes256-ctr
d186 1
a186 1
.Xr sshd 8
d189 2
a190 1
sshd will disconnect the client, terminating the session.
d208 1
a208 1
is left at the default, unresponsive SSH clients
a209 1
This option applies to protocol version 2 only.
d213 1
a213 1
.Xr sshd 8
d234 5
a240 12
The allow/deny directives are processed in the following order:
.Cm DenyUsers ,
.Cm AllowUsers ,
.Cm DenyGroups ,
and finally
.Cm AllowGroups .
.Pp
See
.Sx PATTERNS
in
.Xr ssh_config 5
for more information on patterns.
d245 4
a253 24
The allow/deny directives are processed in the following order:
.Cm DenyUsers ,
.Cm AllowUsers ,
.Cm DenyGroups ,
and finally
.Cm AllowGroups .
.Pp
See
.Sx PATTERNS
in
.Xr ssh_config 5
for more information on patterns.
.It Cm ForceCommand
Forces the execution of the command specified by
.Cm ForceCommand ,
ignoring any command supplied by the client.
The command is invoked by using the user's login shell with the -c option.
This applies to shell, command, or subsystem execution.
It is most useful inside a
.Cm Match
block.
The command originally supplied by the client is available in the
.Ev SSH_ORIGINAL_COMMAND
environment variable.
d258 1
a258 1
.Xr sshd 8
d262 2
a263 1
can be used to specify that sshd
d289 1
a289 1
(host-based authentication).
a294 17
.It Cm HostbasedUsesNameFromPacketOnly
Specifies whether or not the server will attempt to perform a reverse
name lookup when matching the name in the
.Pa ~/.shosts ,
.Pa ~/.rhosts ,
and
.Pa /etc/hosts.equiv
files during
.Cm HostbasedAuthentication .
A setting of
.Dq yes
means that
.Xr sshd 8
uses the name supplied by the client rather than
attempting to resolve the name from the TCP connection itself.
The default is
.Dq no .
d306 1
a306 1
.Xr sshd 8
d333 1
a333 1
.Xr sshd 8
d348 1
a348 1
The default is
d353 1
a353 1
The default is
d356 1
a356 1
If password authentication through Kerberos fails then
d360 1
a360 1
The default is
d365 1
a365 1
The default is
d378 1
a378 1
.Xr sshd 8
d404 2
a405 1
sshd will listen on the address and all prior
d414 1
a414 1
options must precede this option for non-port qualified addresses.
d422 1
a422 1
.Xr sshd 8 .
d424 1
a424 1
QUIET, FATAL, ERROR, INFO, VERBOSE, DEBUG, DEBUG1, DEBUG2, and DEBUG3.
d434 1
a434 1
The default is:
a435 29
.It Cm Match
Introduces a conditional block.
If all of the criteria on the
.Cm Match
line are satisfied, the keywords on the following lines override those
set in the global section of the config file, until either another
.Cm Match
line or the end of the file.
The arguments to
.Cm Match
are one or more criteria-pattern pairs.
The available criteria are
.Cm User ,
.Cm Group ,
.Cm Host ,
and
.Cm Address .
Only a subset of keywords may be used on the lines following a
.Cm Match
keyword.
Available keywords are
.Cm AllowTcpForwarding ,
.Cm ForceCommand ,
.Cm GatewayPorts ,
.Cm PermitOpen ,
.Cm X11DisplayOffset ,
.Cm X11Forwarding ,
and
.Cm X11UseLocalHost .
d444 2
a445 1
SSH daemon.
d454 2
a455 2
(e.g. "10:30:60").
.Xr sshd 8
a475 27
.It Cm PermitOpen
Specifies the destinations to which TCP port forwarding is permitted.
The forwarding specification must be one of the following forms:
.Pp
.Bl -item -offset indent -compact
.It
.Cm PermitOpen
.Sm off
.Ar host : port
.Sm on
.It
.Cm PermitOpen
.Sm off
.Ar IPv4_addr : port
.Sm on
.It
.Cm PermitOpen
.Sm off
.Ar \&[ IPv6_addr \&] : port
.Sm on
.El
.Pp
Multiple forwards may be specified by separating them with whitespace.
An argument of
.Dq any
can be used to remove all restrictions and permit any forwarding requests.
By default all port forwarding requests are permitted.
d482 1
a482 1
.Dq forced-commands-only ,
d489 1
a489 1
.Dq without-password ,
d493 1
a493 1
.Dq forced-commands-only ,
d503 1
a503 1
.Dq no ,
d511 1
a511 2
.Dq point-to-point
(layer 3),
d513 1
a513 1
(layer 2), or
a514 6
Specifying
.Dq yes
permits both
.Dq point-to-point
and
.Dq ethernet .
d525 1
a525 1
.Xr sshd 8 .
d533 2
a534 1
SSH daemon.
d539 1
a539 1
.Xr sshd 8
d547 1
a547 1
.Xr sshd 8
d554 1
a554 1
.Xr sshd 8
d565 1
a565 1
.Xr sshd 8
d568 1
a568 1
.Sq 1
d570 1
a570 1
.Sq 2 .
d602 1
a602 1
.Xr sshd 8
d610 3
a612 3
Configures an external subsystem (e.g. file transfer daemon).
Arguments should be a subsystem name and a command (with optional arguments)
to execute upon subsystem request.
d622 1
a622 1
.Xr sshd 8 .
d649 1
a649 1
.Xr sshd 8
d676 1
a676 1
.Xr sshd 8
d687 1
a687 1
.Xr sshd 8 Ns 's
d689 3
a691 1
This prevents sshd from interfering with real X11 servers.
d704 1
a704 1
.Xr sshd 8
d707 1
a707 1
below), though this is not the default.
d711 1
a711 1
display server may be exposed to attack when the SSH client requests
d729 1
a729 1
.Xr sshd 8
d733 2
a734 1
sshd binds the forwarding server to the loopback address and sets the
d760 2
a761 2
.Sh TIME FORMATS
.Xr sshd 8
d774 1
a774 1
.It Aq Cm none
d805 1
a805 1
.Xr sshd 8 .
@


1.43
log
@add support for draft-harris-ssh-arcfour-fixes-02 improved arcfour modes;
ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.42 2005/05/19 02:39:55 djm Exp $
d220 2
a221 1
Specifies whether compression is allowed.
d223 2
a224 1
.Dq yes
d228 1
a228 1
.Dq yes .
@


1.42
log
@sort config options, from grunk AT pestilenz.org; ok jmc@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.41 2005/04/21 06:17:50 djm Exp $
d171 2
d179 3
a181 2
  ``aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour,
    aes192-cbc,aes256-cbc,aes128-ctr,aes192-ctr,aes256-ctr''
@


1.41
log
@OpenSSH doesn't ever look at the $HOME environment variable, so don't say
that we do (bz #623); ok deraadt@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.40 2005/03/18 17:05:00 jmc Exp $
a179 9
.It Cm ClientAliveInterval
Sets a timeout interval in seconds after which if no data has been received
from the client,
.Nm sshd
will send a message through the encrypted
channel to request a response from the client.
The default
is 0, indicating that these messages will not be sent to the client.
This option applies to protocol version 2 only.
d207 9
@


1.40
log
@typo;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.39 2005/03/01 10:09:52 djm Exp $
d330 1
a330 1
.Pa $HOME/.ssh/known_hosts
@


1.40.2.1
log
@upgrade to OpenSSH 4.2
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.44 2005/07/25 11:59:40 markus Exp $
a170 2
.Dq arcfour128 ,
.Dq arcfour256 ,
d177 2
a178 3
  ``aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour128,
    arcfour256,arcfour,aes192-cbc,aes256-cbc,aes128-ctr,
    aes192-ctr,aes256-ctr''
d180 9
a215 9
.It Cm ClientAliveInterval
Sets a timeout interval in seconds after which if no data has been received
from the client,
.Nm sshd
will send a message through the encrypted
channel to request a response from the client.
The default
is 0, indicating that these messages will not be sent to the client.
This option applies to protocol version 2 only.
d217 1
a217 2
Specifies whether compression is allowed, or delayed until
the user has authenticated successfully.
d219 1
a219 2
.Dq yes ,
.Dq delayed ,
d223 1
a223 1
.Dq delayed .
d330 1
a330 1
.Pa ~/.ssh/known_hosts
@


1.40.2.2
log
@upgrade to OpenSSH 4.3
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.48 2006/01/02 17:09:49 jmc Exp $
d184 1
a184 1
Sets the number of client alive messages (see below) which may be
d206 1
a206 1
(see below) is set to 15, and
d351 1
a351 1
If AFS is active and the user has a Kerberos 5 TGT, attempt to acquire
a504 12
.It Cm PermitTunnel
Specifies whether
.Xr tun 4
device forwarding is allowed.
The argument must be
.Dq yes ,
.Dq point-to-point ,
.Dq ethernet
or
.Dq no .
The default is
.Dq no .
@


1.39
log
@bz#413: allow optional specification of bind address for port forwardings.
Patch originally by Dan Astorian, but worked on by several people
Adds GatewayPorts=clientspecified option on server to allow remote forwards
to bind to client-specified ports.

ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.38 2005/01/08 00:41:19 jmc Exp $
d633 1
a633 1
should lookup the remote host name and check that
@


1.38
log
@`login'(n) -> `log in'(v);
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.37 2004/12/23 23:11:00 djm Exp $
d259 5
a263 3
should bind remote port forwardings to the wildcard address,
thus allowing remote hosts to connect to forwarded ports.
The argument must be
d265 3
a267 2
or
.Dq no .
@


1.37
log
@bz #898: support AddressFamily in sshd_config. from peak@@argo.troja.mff.cuni.cz
ok deraadt@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.36 2004/09/15 03:25:41 jaredy Exp $
d469 1
a469 1
Specifies whether root can login using
d496 1
a496 1
root is not allowed to login.
@


1.36
log
@mention PrintLastLog only prints last login time for interactive
sessions, like PrintMotd mentions.

From Michael Knudsen, with wording changed slightly to match the
PrintMotd description.

ok djm
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.35 2004/06/26 09:14:40 jmc Exp $
d86 11
@


1.35
log
@new sentence, new line;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.34 2004/06/13 14:01:42 dtucker Exp $
d517 2
a518 1
should print the date and time when the user last logged in.
@


1.35.2.1
log
@upgrade to OpenSSH 4.0
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.39 2005/03/01 10:09:52 djm Exp $
a85 11
.It Cm AddressFamily
Specifies which address family should be used by
.Nm sshd .
Valid arguments are
.Dq any ,
.Dq inet
(use IPv4 only) or
.Dq inet6
(use IPv6 only).
The default is
.Dq any .
d248 3
a250 5
should allow remote port forwardings to bind to non-loopback addresses, thus
allowing other hosts to connect.
The argument may be
.Dq no
to force remote port forwardings to be available to the local host only,
d252 2
a253 3
to force remote port forwardings to bind to the wildcard address, or
.Dq clientspecified
to allow the client to select the address to which the forwarding is bound.
d458 1
a458 1
Specifies whether root can log in using
d485 1
a485 1
root is not allowed to log in.
d517 1
a517 2
should print the date and time of the last user login when a user logs
in interactively.
@


1.35.2.2
log
@upgrade to OpenSSH 4.2
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.44 2005/07/25 11:59:40 markus Exp $
a170 2
.Dq arcfour128 ,
.Dq arcfour256 ,
d177 2
a178 3
  ``aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour128,
    arcfour256,arcfour,aes192-cbc,aes256-cbc,aes128-ctr,
    aes192-ctr,aes256-ctr''
d180 9
a215 9
.It Cm ClientAliveInterval
Sets a timeout interval in seconds after which if no data has been received
from the client,
.Nm sshd
will send a message through the encrypted
channel to request a response from the client.
The default
is 0, indicating that these messages will not be sent to the client.
This option applies to protocol version 2 only.
d217 1
a217 2
Specifies whether compression is allowed, or delayed until
the user has authenticated successfully.
d219 1
a219 2
.Dq yes ,
.Dq delayed ,
d223 1
a223 1
.Dq delayed .
d330 1
a330 1
.Pa ~/.ssh/known_hosts
d633 1
a633 1
should look up the remote host name and check that
@


1.34
log
@List supported ciphers in man pages, tidy up ssh -c;
"looks fine" jmc@@, ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.33 2004/05/23 23:59:53 dtucker Exp $
d419 4
a422 2
connection.  Once the number of failures reaches half this value, additional
failures are logged.  The default is 6.
@


1.33
log
@Add MaxAuthTries sshd config option; ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.32 2004/04/28 07:02:56 jmc Exp $
d152 12
@


1.32
log
@remove unnecessary .Pp;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.31 2004/04/28 05:17:10 djm Exp $
d405 4
@


1.31
log
@manpage fixes in envpass stuff from Brian Poole (raj AT cerias.purdue.edu)
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.30 2004/04/27 09:46:37 djm Exp $
a85 1
.Pp
a97 1
.Pp
a104 1
.Pp
a119 1
.Pp
a141 1
.Pp
a152 1
.Pp
a212 1
.Pp
@


1.30
log
@bz #815: implement ability to pass specified environment variables from the
client to the server; ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.29 2004/03/08 10:18:57 dtucker Exp $
d73 1
a73 1
Note that environment passingis only supported for protocol 2.
d78 1
a78 1
Multiple environment variables may be seperated by whitespace or spread
d82 1
a82 1
Be warned that some enviornment variables could be used to bypass restricted
@


1.29
log
@Document KerberosGetAFSToken;  ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.28 2004/02/17 19:35:21 jmc Exp $
d64 23
@


1.29.2.1
log
@upgrade to OpenSSH 3.9
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.35 2004/06/26 09:14:40 jmc Exp $
a63 22
.It Cm AcceptEnv
Specifies what environment variables sent by the client will be copied into
the session's
.Xr environ 7 .
See
.Cm SendEnv
in
.Xr ssh_config 5
for how to configure the client.
Note that environment passing is only supported for protocol 2.
Variables are specified by name, which may contain the wildcard characters
.Ql \&*
and
.Ql \&? .
Multiple environment variables may be separated by whitespace or spread
across multiple
.Cm AcceptEnv
directives.
Be warned that some environment variables could be used to bypass restricted
user environments.
For this reason, care should be taken in the use of this directive.
The default is not to accept any environment variables.
d76 1
d84 1
d100 1
d123 1
a133 12
The supported ciphers are
.Dq 3des-cbc ,
.Dq aes128-cbc ,
.Dq aes192-cbc ,
.Dq aes256-cbc ,
.Dq aes128-ctr ,
.Dq aes192-ctr ,
.Dq aes256-ctr ,
.Dq arcfour ,
.Dq blowfish-cbc ,
and
.Dq cast128-cbc .
d135 1
d196 1
a388 6
.It Cm MaxAuthTries
Specifies the maximum number of authentication attempts permitted per
connection.
Once the number of failures reaches half this value,
additional failures are logged.
The default is 6.
@


1.29.2.2
log
@upgrade to OpenSSH 4.0
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.39 2005/03/01 10:09:52 djm Exp $
a85 11
.It Cm AddressFamily
Specifies which address family should be used by
.Nm sshd .
Valid arguments are
.Dq any ,
.Dq inet
(use IPv4 only) or
.Dq inet6
(use IPv6 only).
The default is
.Dq any .
d248 3
a250 5
should allow remote port forwardings to bind to non-loopback addresses, thus
allowing other hosts to connect.
The argument may be
.Dq no
to force remote port forwardings to be available to the local host only,
d252 2
a253 3
to force remote port forwardings to bind to the wildcard address, or
.Dq clientspecified
to allow the client to select the address to which the forwarding is bound.
d458 1
a458 1
Specifies whether root can log in using
d485 1
a485 1
root is not allowed to log in.
d517 1
a517 2
should print the date and time of the last user login when a user logs
in interactively.
@


1.28
log
@remove cruft left over from RhostsAuthentication removal;
ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.27 2003/12/09 21:53:37 markus Exp $
d301 5
@


1.27
log
@rename keepalive to tcpkeepalive; the old name causes too much
confusion; ok djm, dtucker; with help from jmc@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.26 2003/11/21 11:57:03 djm Exp $
a514 7
.Cm RhostsRSAAuthentication
should be used
instead, because it performs RSA-based host authentication in addition
to normal rhosts or /etc/hosts.equiv authentication.
The default is
.Dq no .
This option applies to protocol version 1 only.
@


1.26
log
@unexpand and delete whitespace at EOL; ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.25 2003/09/01 09:50:04 markus Exp $
d159 1
a159 1
.Cm KeepAlive
d164 1
a164 1
.Cm KeepAlive
a294 21
.It Cm KeepAlive
Specifies whether the system should send TCP keepalive messages to the
other side.
If they are sent, death of the connection or crash of one
of the machines will be properly noticed.
However, this means that
connections will die if the route is down temporarily, and some people
find it annoying.
On the other hand, if keepalives are not sent,
sessions may hang indefinitely on the server, leaving
.Dq ghost
users and consuming server resources.
.Pp
The default is
.Dq yes
(to send keepalives), and the server will notice
if the network goes down or the client host crashes.
This avoids infinitely hanging sessions.
.Pp
To disable keepalives, the value should be set to
.Dq no .
d562 21
@


1.25
log
@gss kex is not supported; sxw@@inf.ed.ac.uk
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.24 2003/08/28 12:54:34 markus Exp $
d230 1
a230 1
The default is 
@


1.25.2.1
log
@upgrade to OpenSSH 3.8
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.28 2004/02/17 19:35:21 jmc Exp $
d159 1
a159 1
.Cm TCPKeepAlive
d164 1
a164 1
.Cm TCPKeepAlive
d230 1
a230 1
The default is
d295 21
d536 7
a582 21
.It Cm TCPKeepAlive
Specifies whether the system should send TCP keepalive messages to the
other side.
If they are sent, death of the connection or crash of one
of the machines will be properly noticed.
However, this means that
connections will die if the route is down temporarily, and some people
find it annoying.
On the other hand, if TCP keepalives are not sent,
sessions may hang indefinitely on the server, leaving
.Dq ghost
users and consuming server resources.
.Pp
The default is
.Dq yes
(to send TCP keepalive messages), and the server will notice
if the network goes down or the client host crashes.
This avoids infinitely hanging sessions.
.Pp
To disable TCP keepalive messages, the value should be set to
.Dq no .
@


1.25.2.2
log
@upgrade to OpenSSH 3.9
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.35 2004/06/26 09:14:40 jmc Exp $
a63 22
.It Cm AcceptEnv
Specifies what environment variables sent by the client will be copied into
the session's
.Xr environ 7 .
See
.Cm SendEnv
in
.Xr ssh_config 5
for how to configure the client.
Note that environment passing is only supported for protocol 2.
Variables are specified by name, which may contain the wildcard characters
.Ql \&*
and
.Ql \&? .
Multiple environment variables may be separated by whitespace or spread
across multiple
.Cm AcceptEnv
directives.
Be warned that some environment variables could be used to bypass restricted
user environments.
For this reason, care should be taken in the use of this directive.
The default is not to accept any environment variables.
d76 1
d84 1
d100 1
d123 1
a133 12
The supported ciphers are
.Dq 3des-cbc ,
.Dq aes128-cbc ,
.Dq aes192-cbc ,
.Dq aes256-cbc ,
.Dq aes128-ctr ,
.Dq aes192-ctr ,
.Dq aes256-ctr ,
.Dq arcfour ,
.Dq blowfish-cbc ,
and
.Dq cast128-cbc .
d135 1
d196 1
a302 5
.It Cm KerberosGetAFSToken
If AFS is active and the user has a Kerberos 5 TGT, attempt to aquire
an AFS token before accessing the user's home directory.
Default is
.Dq no .
a383 6
.It Cm MaxAuthTries
Specifies the maximum number of authentication attempts permitted per
connection.
Once the number of failures reaches half this value,
additional failures are logged.
The default is 6.
@


1.24
log
@remove kerberos support from ssh1, since it has been replaced with GSSAPI;
but keep kerberos passwd auth for ssh1 and 2; ok djm, hin, henning, ...
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.23 2003/08/22 10:56:09 markus Exp $
d229 1
a229 3
Specifies whether authentication based on GSSAPI may be used, either using
the result of a successful key exchange, or using GSSAPI user
authentication.
@


1.23
log
@support GSS API user authentication; patches from Simon Wilkinson,
stripped down and tested by Jakob and myself.
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.22 2003/08/13 08:46:31 markus Exp $
d319 1
a319 2
Specifies whether Kerberos authentication is allowed.
This can be in the form of a Kerberos ticket, or if
d321 1
a321 2
is yes, the password provided by the user will be validated through
the Kerberos KDC.
a332 4
.It Cm KerberosTgtPassing
Specifies whether a Kerberos TGT may be forwarded to the server.
Default is
.Dq no .
@


1.22
log
@remove RhostsAuthentication; suggested by djm@@ before; ok djm@@, deraadt@@,
fgsch@@, miod@@, henning@@, jakob@@ and others
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.21 2003/07/22 13:35:22 markus Exp $
d228 13
@


1.21
log
@remove (already disabled) KRB4/AFS support, re-enable -k in ssh(1);
test+ok henning@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.20 2003/06/20 05:47:58 djm Exp $
a262 1
.Cm RhostsAuthentication ,
a530 4
.It Cm RhostsAuthentication
Specifies whether authentication using rhosts or /etc/hosts.equiv
files is sufficient.
Normally, this method should not be permitted because it is insecure.
@


1.20
log
@sync description of protocol 2 cipher proposal; ok markus
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.19 2003/06/10 09:12:12 jmc Exp $
a63 4
.It Cm AFSTokenPassing
Specifies whether an AFS token may be forwarded to the server.
Default is
.Dq no .
d326 1
a326 2
.Dq no ,
as this only works when the Kerberos KDC is actually an AFS kaserver.
@


1.19
log
@- section reorder
- COMPATIBILITY merge
- macro cleanup
- kill whitespace at EOL
- new sentence, new line

ssh pages ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.18 2003/06/02 09:17:34 markus Exp $
d142 1
a142 1
    aes192-cbc,aes256-cbc''
@


1.18
log
@deprecate VerifyReverseMapping since it's dangerous if combined
with IP based access control as noted by Mike Harding; replace with
a UseDNS option, UseDNS is on by default and includes the
VerifyReverseMapping check; with itojun@@, provos@@, jakob@@ and deraadt@@
ok deraadt@@, djm@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.17 2003/05/20 12:09:32 jmc Exp $
d656 1
a656 1
.Xr ssh_config 5 ).
a701 1
.Pp
d750 2
a762 2
.Sh SEE ALSO
.Xr sshd 8
@


1.17
log
@new sentence, new line
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.16 2003/04/30 01:16:20 mouring Exp $
d588 8
a625 8
.It Cm VerifyReverseMapping
Specifies whether
.Nm sshd
should try to verify the remote host name and check that
the resolved host name for the remote IP address maps back to the
very same IP address.
The default is
.Dq no .
@


1.16
log
@Escape ?, * and ! in .Ql for nroff compatibility.  OpenSSH Portable Bug #550
and * escaping suggested by jmc@@.
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.15 2003/03/28 10:11:43 jmc Exp $
d110 2
a111 1
set-up. The following tokens are defined: %% is replaced by a literal '%',
d157 2
a158 2
receiving any messages back from the client. If this threshold is
reached while client alive messages are being sent,
d160 3
a162 2
will disconnect the client, terminating the session. It is important
to note that the use of client alive messages is very different from
d164 4
a167 3
(below). The client alive messages are sent through the
encrypted channel and therefore will not be spoofable. The TCP keepalive
option enabled by
d169 2
a170 1
is spoofable. The client alive mechanism is valuable when the client or
d173 2
a174 1
The default value is 3. If
d377 2
a378 2
options specified. The default is to listen on all local
addresses.
d381 2
a382 1
options are permitted. Additionally, any
d463 2
a464 2
normally not allowed). All other authentication methods are disabled
for root.
@


1.15
log
@- killed whitespace
- new sentence new line
- .Bk for arguments

ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.14 2003/01/23 08:58:47 jmc Exp $
d75 1
a75 1
.Ql ?
d96 1
a96 1
.Ql ?
d190 1
a190 1
.Ql ?
d202 1
a202 1
.Ql ?
@


1.14
log
@typos;
ok millert@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.13 2002/09/16 20:12:11 stevesk Exp $
d214 2
a215 2
binds remote port forwardings to the loopback address.  This
prevents other remote hosts from connecting to forwarded ports.
d373 2
a374 1
addresses.  Multiple
d389 4
a392 4
The default is INFO.  DEBUG and DEBUG1 are equivalent.  DEBUG2
and DEBUG3 each specify higher levels of debugging output.
Logging with a DEBUG level violates the privacy of users
and is not recommended.
d597 2
a598 1
cookies.  If
d605 4
a608 3
to deal with incoming network traffic.  After successful authentication,
another process will be created that has the privilege of the authenticated
user.  The goal of privilege separation is to prevent privilege
d666 2
a667 1
the wildcard address.  By default,
@


1.14.2.1
log
@Update OpenSSH to version 3.6.1
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.13.2.2 2003/04/03 23:27:13 margarida Exp $
d214 2
a215 2
binds remote port forwardings to the loopback address.
This prevents other remote hosts from connecting to forwarded ports.
d373 1
a373 2
addresses.
Multiple
d388 4
a391 4
The default is INFO.
DEBUG and DEBUG1 are equivalent.
DEBUG2 and DEBUG3 each specify higher levels of debugging output.
Logging with a DEBUG level violates the privacy of users and is not recommended.
d596 1
a596 2
cookies.
If
d603 3
a605 4
to deal with incoming network traffic.
After successful authentication, another process will be created that has
the privilege of the authenticated user.
The goal of privilege separation is to prevent privilege
d663 1
a663 2
the wildcard address.
By default,
@


1.14.2.2
log
@upgrade to OpenSSH 3.7
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.25 2003/09/01 09:50:04 markus Exp $
d64 4
d75 1
a75 1
.Ql \&?
d96 1
a96 1
.Ql \&?
d110 1
a110 2
set-up.
The following tokens are defined: %% is replaced by a literal '%',
d141 1
a141 1
    aes192-cbc,aes256-cbc,aes128-ctr,aes192-ctr,aes256-ctr''
d156 2
a157 2
receiving any messages back from the client.
If this threshold is reached while client alive messages are being sent,
d159 2
a160 3
will disconnect the client, terminating the session.
It is important to note that the use of client alive messages is very
different from
d162 3
a164 4
(below).
The client alive messages are sent through the encrypted channel
and therefore will not be spoofable.
The TCP keepalive option enabled by
d166 1
a166 2
is spoofable.
The client alive mechanism is valuable when the client or
d169 1
a169 2
The default value is 3.
If
d190 1
a190 1
.Ql \&?
d202 1
a202 1
.Ql \&?
a226 11
.It Cm GSSAPIAuthentication
Specifies whether user authentication based on GSSAPI is allowed.
The default is 
.Dq no .
Note that this option applies to protocol version 2 only.
.It Cm GSSAPICleanupCredentials
Specifies whether to automatically destroy the user's credentials cache
on logout.
The default is
.Dq yes .
Note that this option applies to protocol version 2 only.
d262 1
d306 2
a307 1
Specifies whether the password provided by the user for
d309 2
a310 1
will be validated through the Kerberos KDC.
d322 5
d372 2
a373 2
options specified.
The default is to listen on all local addresses.
d376 1
a376 2
options are permitted.
Additionally, any
d457 2
a458 2
normally not allowed).
All other authentication methods are disabled for root.
d531 4
a581 8
.It Cm UseDNS
Specifies whether
.Nm sshd
should lookup the remote host name and check that
the resolved host name for the remote IP address maps back to the
very same IP address.
The default is
.Dq yes .
d612 8
d650 1
a650 1
.Xr ssh_config 5 ) .
d696 1
a744 2
.Sh SEE ALSO
.Xr sshd 8
d756 2
@


1.14.2.3
log
@upgrade to OpenSSH 3.8upgrade to OpenSSH 3.8upgrade to OpenSSH 3.8
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.28 2004/02/17 19:35:21 jmc Exp $
d159 1
a159 1
.Cm TCPKeepAlive
d164 1
a164 1
.Cm TCPKeepAlive
d230 1
a230 1
The default is
d295 21
d536 7
a582 21
.It Cm TCPKeepAlive
Specifies whether the system should send TCP keepalive messages to the
other side.
If they are sent, death of the connection or crash of one
of the machines will be properly noticed.
However, this means that
connections will die if the route is down temporarily, and some people
find it annoying.
On the other hand, if TCP keepalives are not sent,
sessions may hang indefinitely on the server, leaving
.Dq ghost
users and consuming server resources.
.Pp
The default is
.Dq yes
(to send TCP keepalive messages), and the server will notice
if the network goes down or the client host crashes.
This avoids infinitely hanging sessions.
.Pp
To disable TCP keepalive messages, the value should be set to
.Dq no .
@


1.13
log
@more details on X11Forwarding security issues and threats; ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.12 2002/09/04 18:52:42 stevesk Exp $
d92 1
a92 1
If specified, login is allowed only for users names that
@


1.13.2.1
log
@Update to OpenSSH 3.6
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.14 2003/01/23 08:58:47 jmc Exp $
d92 1
a92 1
If specified, login is allowed only for user names that
@


1.13.2.2
log
@Update to OpenSSH 3.6.1
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.15 2003/03/28 10:11:43 jmc Exp $
d214 2
a215 2
binds remote port forwardings to the loopback address.
This prevents other remote hosts from connecting to forwarded ports.
d373 1
a373 2
addresses.
Multiple
d388 4
a391 4
The default is INFO.
DEBUG and DEBUG1 are equivalent.
DEBUG2 and DEBUG3 each specify higher levels of debugging output.
Logging with a DEBUG level violates the privacy of users and is not recommended.
d596 1
a596 2
cookies.
If
d603 3
a605 4
to deal with incoming network traffic.
After successful authentication, another process will be created that has
the privilege of the authenticated user.
The goal of privilege separation is to prevent privilege
d663 1
a663 2
the wildcard address.
By default,
@


1.13.2.3
log
@upgrade to OpenSSH 3.7
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.25 2003/09/01 09:50:04 markus Exp $
d64 4
d75 1
a75 1
.Ql \&?
d96 1
a96 1
.Ql \&?
d110 1
a110 2
set-up.
The following tokens are defined: %% is replaced by a literal '%',
d141 1
a141 1
    aes192-cbc,aes256-cbc,aes128-ctr,aes192-ctr,aes256-ctr''
d156 2
a157 2
receiving any messages back from the client.
If this threshold is reached while client alive messages are being sent,
d159 2
a160 3
will disconnect the client, terminating the session.
It is important to note that the use of client alive messages is very
different from
d162 3
a164 4
(below).
The client alive messages are sent through the encrypted channel
and therefore will not be spoofable.
The TCP keepalive option enabled by
d166 1
a166 2
is spoofable.
The client alive mechanism is valuable when the client or
d169 1
a169 2
The default value is 3.
If
d190 1
a190 1
.Ql \&?
d202 1
a202 1
.Ql \&?
a226 11
.It Cm GSSAPIAuthentication
Specifies whether user authentication based on GSSAPI is allowed.
The default is 
.Dq no .
Note that this option applies to protocol version 2 only.
.It Cm GSSAPICleanupCredentials
Specifies whether to automatically destroy the user's credentials cache
on logout.
The default is
.Dq yes .
Note that this option applies to protocol version 2 only.
d262 1
d306 2
a307 1
Specifies whether the password provided by the user for
d309 2
a310 1
will be validated through the Kerberos KDC.
d322 5
d372 2
a373 2
options specified.
The default is to listen on all local addresses.
d376 1
a376 2
options are permitted.
Additionally, any
d457 2
a458 2
normally not allowed).
All other authentication methods are disabled for root.
d531 4
a581 8
.It Cm UseDNS
Specifies whether
.Nm sshd
should lookup the remote host name and check that
the resolved host name for the remote IP address maps back to the
very same IP address.
The default is
.Dq yes .
d612 8
d650 1
a650 1
.Xr ssh_config 5 ) .
d696 1
a744 2
.Sh SEE ALSO
.Xr sshd 8
d756 2
@


1.12
log
@default LoginGraceTime to 2m; 1m may be too short for slow systems.
ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.11 2002/08/29 22:54:10 stevesk Exp $
d627 4
d633 23
a655 2
Note that disabling X11 forwarding does not improve security in any
way, as users can always install their own forwarders.
@


1.11
log
@state XAuthLocation is a full pathname
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.10 2002/08/21 19:38:06 stevesk Exp $
d382 1
a382 1
The default is 60 seconds.
@


1.10
log
@change LoginGraceTime default to 1 minute; ok mouring@@ markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.9 2002/08/12 17:30:35 stevesk Exp $
d660 1
a660 1
Specifies the location of the
@


1.9
log
@more PermitUserEnvironment; ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.8 2002/08/09 17:41:12 stevesk Exp $
d382 1
a382 1
The default is 600 (seconds).
@


1.8
log
@proxy vs. fake display
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.7 2002/08/09 17:21:42 stevesk Exp $
d465 1
a465 3
is read by
.Nm sshd
and whether
d469 2
a470 1
files are permitted.
d473 3
a475 3
This option is useful for locked-down installations where
.Ev LD_PRELOAD
and suchlike can cause security problems.
@


1.7
log
@use Op for mdoc conformance; from esr@@golux.thyrsus.com
ok aaron@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.6 2002/07/30 17:03:55 markus Exp $
d646 1
a646 1
This prevents remote hosts from connecting to the fake display.
@


1.6
log
@add PermitUserEnvironment (off by default!); from dot@@dotat.at; ok provos, deraadt
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.5 2002/07/09 17:46:25 stevesk Exp $
d673 1
a673 1
.Ar time Oo Ar qualifier Oc ,
@


1.5
log
@clarify no preference ordering in protocol list; ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.4 2002/06/22 16:45:29 stevesk Exp $
d462 15
@


1.4
log
@use process ID vs. pid/PID/process identifier
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.3 2002/06/20 23:37:12 markus Exp $
d496 1
a496 1
should support.
d504 7
@


1.4.2.1
log
@Pull in OpenSSH-3.4
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.4 2002/06/22 16:45:29 stevesk Exp $
@


1.4.2.2
log
@Update to OpenSSH 3.5
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.13 2002/09/16 20:12:11 stevesk Exp $
d382 1
a382 1
The default is 120 seconds.
a461 14
.It Cm PermitUserEnvironment
Specifies whether
.Pa ~/.ssh/environment
and
.Cm environment=
options in
.Pa ~/.ssh/authorized_keys
are processed by
.Nm sshd .
The default is
.Dq no .
Enabling environment processing may enable users to bypass access
restrictions in some configurations using mechanisms such as
.Ev LD_PRELOAD .
d496 1
a496 1
supports.
a503 7
Note that the order of the protocol list does not indicate preference,
because the client selects among multiple protocol versions offered
by the server.
Specifying
.Dq 2,1
is identical to
.Dq 1,2 .
a605 4
The argument must be
.Dq yes
or
.Dq no .
d608 2
a609 23
.Pp
When X11 forwarding is enabled, there may be additional exposure to
the server and to client displays if the
.Nm sshd
proxy display is configured to listen on the wildcard address (see
.Cm X11UseLocalhost
below), however this is not the default.
Additionally, the authentication spoofing and authentication data
verification and substitution occur on the client side.
The security risk of using X11 forwarding is that the client's X11
display server may be exposed to attack when the ssh client requests
forwarding (see the warnings for
.Cm ForwardX11
in
.Xr ssh_config 5 ).
A system administrator may have a stance in which they want to
protect clients that may expose themselves to attack by unwittingly
requesting X11 forwarding, which can warrant a
.Dq no
setting.
.Pp
Note that disabling X11 forwarding does not prevent users from
forwarding X11 traffic, as users can always install their own forwarders.
d624 1
a624 1
This prevents remote hosts from connecting to the proxy display.
d639 1
a639 1
Specifies the full pathname of the
d651 1
a651 1
.Ar time Op Ar qualifier ,
@


1.4.2.3
log
@Merge OpenSSH 3.6.1
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.15 2003/03/28 10:11:43 jmc Exp $
d92 1
a92 1
If specified, login is allowed only for user names that
d214 2
a215 2
binds remote port forwardings to the loopback address.
This prevents other remote hosts from connecting to forwarded ports.
d373 1
a373 2
addresses.
Multiple
d388 4
a391 4
The default is INFO.
DEBUG and DEBUG1 are equivalent.
DEBUG2 and DEBUG3 each specify higher levels of debugging output.
Logging with a DEBUG level violates the privacy of users and is not recommended.
d596 1
a596 2
cookies.
If
d603 3
a605 4
to deal with incoming network traffic.
After successful authentication, another process will be created that has
the privilege of the authenticated user.
The goal of privilege separation is to prevent privilege
d663 1
a663 2
the wildcard address.
By default,
@


1.3
log
@add Compression
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.2 2002/06/20 20:21:23 stevesk Exp $
d463 1
a463 1
Specifies the file that contains the process identifier of the
@


1.3.2.1
log
@Update OpenSSH to version 3.3 (with local changes, configuration files still
living in /etc and privsep user being nobody).
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.3 2002/06/20 23:37:12 markus Exp $
d46 1
a46 1
.It Pa /etc/sshd_config
d51 1
a51 1
.Pa /etc/sshd_config
d240 1
a240 1
.Pa /etc/ssh_host_key
d242 1
a242 1
.Pa /etc/ssh_host_rsa_key
d244 1
a244 1
.Pa /etc/ssh_host_dsa_key
d689 1
a689 1
.It Pa /etc/sshd_config
@


1.3.2.2
log
@There was an update to OpenSSH 3.4, and people rejoiced.
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.3.2.1 2002/06/22 07:23:18 miod Exp $
d463 1
a463 1
Specifies the file that contains the process ID of the
@


1.3.2.3
log
@Update to OpenSSH 3.5
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.13 2002/09/16 20:12:11 stevesk Exp $
d382 1
a382 1
The default is 120 seconds.
a461 14
.It Cm PermitUserEnvironment
Specifies whether
.Pa ~/.ssh/environment
and
.Cm environment=
options in
.Pa ~/.ssh/authorized_keys
are processed by
.Nm sshd .
The default is
.Dq no .
Enabling environment processing may enable users to bypass access
restrictions in some configurations using mechanisms such as
.Ev LD_PRELOAD .
d496 1
a496 1
supports.
a503 7
Note that the order of the protocol list does not indicate preference,
because the client selects among multiple protocol versions offered
by the server.
Specifying
.Dq 2,1
is identical to
.Dq 1,2 .
a605 4
The argument must be
.Dq yes
or
.Dq no .
d608 2
a609 23
.Pp
When X11 forwarding is enabled, there may be additional exposure to
the server and to client displays if the
.Nm sshd
proxy display is configured to listen on the wildcard address (see
.Cm X11UseLocalhost
below), however this is not the default.
Additionally, the authentication spoofing and authentication data
verification and substitution occur on the client side.
The security risk of using X11 forwarding is that the client's X11
display server may be exposed to attack when the ssh client requests
forwarding (see the warnings for
.Cm ForwardX11
in
.Xr ssh_config 5 ).
A system administrator may have a stance in which they want to
protect clients that may expose themselves to attack by unwittingly
requesting X11 forwarding, which can warrant a
.Dq no
setting.
.Pp
Note that disabling X11 forwarding does not prevent users from
forwarding X11 traffic, as users can always install their own forwarders.
d624 1
a624 1
This prevents remote hosts from connecting to the proxy display.
d639 1
a639 1
Specifies the full pathname of the
d651 1
a651 1
.Ar time Op Ar qualifier ,
@


1.2
log
@typo
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd_config.5,v 1.1 2002/06/20 19:56:07 stevesk Exp $
d175 8
@


1.1
log
@move configuration file options from ssh.1/sshd.8 to
ssh_config.5/sshd_config.5; ok deraadt@@ millert@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.183 2002/05/29 03:06:30 stevesk Exp $
d573 1
a573 1
separated privileges by creating an unprivileged child process
@

