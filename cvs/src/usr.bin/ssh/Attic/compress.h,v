head	1.13;
access;
symbols
	OPENBSD_5_6:1.12.0.36
	OPENBSD_5_6_BASE:1.12
	OPENBSD_5_5:1.12.0.34
	OPENBSD_5_5_BASE:1.12
	OPENBSD_5_4:1.12.0.30
	OPENBSD_5_4_BASE:1.12
	OPENBSD_5_3:1.12.0.28
	OPENBSD_5_3_BASE:1.12
	OPENBSD_5_2:1.12.0.26
	OPENBSD_5_2_BASE:1.12
	OPENBSD_5_1_BASE:1.12
	OPENBSD_5_1:1.12.0.24
	OPENBSD_5_0:1.12.0.22
	OPENBSD_5_0_BASE:1.12
	OPENBSD_4_9:1.12.0.20
	OPENBSD_4_9_BASE:1.12
	OPENBSD_4_8:1.12.0.18
	OPENBSD_4_8_BASE:1.12
	OPENBSD_4_7:1.12.0.14
	OPENBSD_4_7_BASE:1.12
	OPENBSD_4_6:1.12.0.16
	OPENBSD_4_6_BASE:1.12
	OPENBSD_4_5:1.12.0.12
	OPENBSD_4_5_BASE:1.12
	OPENBSD_4_4:1.12.0.10
	OPENBSD_4_4_BASE:1.12
	OPENBSD_4_3:1.12.0.8
	OPENBSD_4_3_BASE:1.12
	OPENBSD_4_2:1.12.0.6
	OPENBSD_4_2_BASE:1.12
	OPENBSD_4_1:1.12.0.2
	OPENBSD_4_1_BASE:1.12
	OPENBSD_4_0:1.12.0.4
	OPENBSD_4_0_BASE:1.12
	OPENBSD_3_9:1.11.0.18
	OPENBSD_3_9_BASE:1.11
	OPENBSD_3_8:1.11.0.16
	OPENBSD_3_8_BASE:1.11
	OPENBSD_3_7:1.11.0.14
	OPENBSD_3_7_BASE:1.11
	OPENBSD_3_6:1.11.0.12
	OPENBSD_3_6_BASE:1.11
	OPENBSD_3_5:1.11.0.10
	OPENBSD_3_5_BASE:1.11
	OPENBSD_3_4:1.11.0.8
	OPENBSD_3_4_BASE:1.11
	OPENBSD_3_3:1.11.0.6
	OPENBSD_3_3_BASE:1.11
	OPENBSD_3_2:1.11.0.4
	OPENBSD_3_2_BASE:1.11
	OPENBSD_3_1:1.11.0.2
	OPENBSD_3_1_BASE:1.11
	OPENBSD_3_0:1.10.0.2
	OPENBSD_3_0_BASE:1.10
	OPENBSD_2_9_BASE:1.8
	OPENBSD_2_9:1.8.0.2
	OPENBSD_2_8:1.6.0.2
	OPENBSD_2_8_BASE:1.6
	OPENBSD_2_7:1.4.0.2
	OPENBSD_2_7_BASE:1.4
	OPENBSD_2_6:1.1.0.2
	OPENBSD_2_6_BASE:1.1;
locks; strict;
comment	@ * @;


1.13
date	2015.01.19.19.52.16;	author markus;	state dead;
branches;
next	1.12;
commitid	UHlhoIB5NMb8eAPm;

1.12
date	2006.03.25.22.22.43;	author djm;	state Exp;
branches;
next	1.11;

1.11
date	2002.03.04.17.27.39;	author stevesk;	state Exp;
branches
	1.11.16.1
	1.11.18.1;
next	1.10;

1.10
date	2001.06.26.17.27.23;	author markus;	state Exp;
branches
	1.10.2.1;
next	1.9;

1.9
date	2001.06.26.06.32.50;	author itojun;	state Exp;
branches;
next	1.8;

1.8
date	2001.04.05.10.39.02;	author markus;	state Exp;
branches
	1.8.2.1;
next	1.7;

1.7
date	2000.12.20.19.37.22;	author markus;	state Exp;
branches;
next	1.6;

1.6
date	2000.09.07.20.27.50;	author deraadt;	state Exp;
branches
	1.6.2.1;
next	1.5;

1.5
date	2000.06.20.01.39.40;	author markus;	state Exp;
branches;
next	1.4;

1.4
date	2000.04.14.10.30.31;	author markus;	state Exp;
branches
	1.4.2.1;
next	1.3;

1.3
date	99.11.24.19.53.46;	author markus;	state Exp;
branches;
next	1.2;

1.2
date	99.11.24.00.26.01;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	99.09.26.20.53.34;	author deraadt;	state Exp;
branches;
next	;

1.4.2.1
date	2000.09.01.18.23.19;	author jason;	state Exp;
branches;
next	1.4.2.2;

1.4.2.2
date	2000.11.08.21.30.40;	author jason;	state Exp;
branches;
next	1.4.2.3;

1.4.2.3
date	2001.03.12.15.44.09;	author jason;	state Exp;
branches;
next	1.4.2.4;

1.4.2.4
date	2001.03.21.18.52.43;	author jason;	state Exp;
branches;
next	;

1.6.2.1
date	2001.02.16.20.13.00;	author jason;	state Exp;
branches;
next	1.6.2.2;

1.6.2.2
date	2001.02.19.17.18.51;	author jason;	state Exp;
branches;
next	1.6.2.3;

1.6.2.3
date	2001.03.21.19.46.24;	author jason;	state Exp;
branches;
next	1.6.2.4;

1.6.2.4
date	2001.05.07.21.09.29;	author jason;	state Exp;
branches;
next	1.6.2.5;

1.6.2.5
date	2001.09.27.00.15.41;	author miod;	state Exp;
branches;
next	1.6.2.6;

1.6.2.6
date	2002.03.08.17.04.42;	author brad;	state Exp;
branches;
next	;

1.8.2.1
date	2001.09.27.19.03.54;	author jason;	state Exp;
branches;
next	1.8.2.2;

1.8.2.2
date	2002.03.09.00.20.44;	author miod;	state Exp;
branches;
next	;

1.10.2.1
date	2002.03.07.17.37.46;	author jason;	state Exp;
branches;
next	;

1.11.16.1
date	2006.10.06.03.19.32;	author brad;	state Exp;
branches;
next	;

1.11.18.1
date	2006.09.30.04.06.50;	author brad;	state Exp;
branches;
next	;


desc
@@


1.13
log
@update packet.c & isolate, introduce struct ssh
a) switch packet.c to buffer api and isolate per-connection info into struct ssh
b) (de)serialization of the state is moved from monitor to packet.c
c) the old packet.c API is implemented in opacket.[ch]
d) compress.c/h is removed and integrated into packet.c
with and ok djm@@
@
text
@/* $OpenBSD: compress.h,v 1.12 2006/03/25 22:22:43 djm Exp $ */

/*
 * Author: Tatu Ylonen <ylo@@cs.hut.fi>
 * Copyright (c) 1995 Tatu Ylonen <ylo@@cs.hut.fi>, Espoo, Finland
 *                    All rights reserved
 * Interface to packet compression for ssh.
 *
 * As far as I am concerned, the code I have written for this software
 * can be used freely for any purpose.  Any derived versions of this
 * software must be clearly marked as such, and if the derived work is
 * incompatible with the protocol description in the RFC file, it must be
 * called by a name other than "ssh" or "Secure Shell".
 */

#ifndef COMPRESS_H
#define COMPRESS_H

void	 buffer_compress_init_send(int);
void	 buffer_compress_init_recv(void);
void     buffer_compress_uninit(void);
void     buffer_compress(Buffer *, Buffer *);
void     buffer_uncompress(Buffer *, Buffer *);

#endif				/* COMPRESS_H */
@


1.12
log
@standardise spacing in $OpenBSD$ tags; requested by deraadt@@
@
text
@d1 1
a1 1
/* $OpenBSD: compress.h,v 1.11 2002/03/04 17:27:39 stevesk Exp $ */
@


1.11
log
@$OpenBSD$ and RCSID() cleanup: don't use RCSID() in .h files; add
missing RCSID() to .c files and remove dup /*$OpenBSD$*/ from .c
files.  ok markus@@
@
text
@d1 1
a1 1
/*	$OpenBSD: compress.h,v 1.10 2001/06/26 17:27:23 markus Exp $	*/
@


1.11.16.1
log
@upgrade to OpenSSH 4.4
@
text
@d1 1
a1 1
/* $OpenBSD: compress.h,v 1.12 2006/03/25 22:22:43 djm Exp $ */
@


1.11.18.1
log
@upgrade to OpenSSH 4.4
@
text
@d1 1
a1 1
/* $OpenBSD: compress.h,v 1.12 2006/03/25 22:22:43 djm Exp $ */
@


1.10
log
@remove comments from .h, since they are cut&paste from the .c files
and out of sync
@
text
@d1 2
a14 2

/* RCSID("$OpenBSD: compress.h,v 1.9 2001/06/26 06:32:50 itojun Exp $"); */
@


1.10.2.1
log
@Update to OpenSSH-3.1 on 3.0-stable branch
@
text
@a0 2
/*	$OpenBSD: compress.h,v 1.11 2002/03/04 17:27:39 stevesk Exp $	*/

d13 2
@


1.9
log
@prototype pedant.  not very creative...
- () -> (void)
- no variable names
@
text
@d14 1
a14 1
/* RCSID("$OpenBSD: compress.h,v 1.8 2001/04/05 10:39:02 markus Exp $"); */
d19 5
a23 29
/*
 * Initializes compression; level is compression level from 1 to 9 (as in
 * gzip).
 */
void	buffer_compress_init_send(int);
void	buffer_compress_init_recv(void);

/* Frees any data structures allocated by buffer_compress_init. */
void    buffer_compress_uninit(void);

/*
 * Compresses the contents of input_buffer into output_buffer.  All packets
 * compressed using this function will form a single compressed data stream;
 * however, data will be flushed at the end of every call so that each
 * output_buffer can be decompressed independently (but in the appropriate
 * order since they together form a single compression stream) by the
 * receiver.  This appends the compressed data to the output buffer.
 */
void    buffer_compress(Buffer *, Buffer *);

/*
 * Uncompresses the contents of input_buffer into output_buffer.  All packets
 * uncompressed using this function will form a single compressed data
 * stream; however, data will be flushed at the end of every call so that
 * each output_buffer.  This must be called for the same size units that the
 * buffer_compress was called, and in the same order that buffers compressed
 * with that.  This appends the uncompressed data to the output buffer.
 */
void    buffer_uncompress(Buffer *, Buffer *);
@


1.8
log
@reset compress state per direction when rekeying.
@
text
@d14 1
a14 1
/* RCSID("$OpenBSD: compress.h,v 1.7 2000/12/20 19:37:22 markus Exp $"); */
d23 1
a23 1
void	buffer_compress_init_send(int level);
d37 1
a37 1
void    buffer_compress(Buffer * input_buffer, Buffer * output_buffer);
d47 1
a47 1
void    buffer_uncompress(Buffer * input_buffer, Buffer * output_buffer);
@


1.8.2.1
log
@Pull in OpenSSH-2.9.9
@
text
@d14 1
a14 1
/* RCSID("$OpenBSD: compress.h,v 1.10 2001/06/26 17:27:23 markus Exp $"); */
d19 29
a47 5
void	 buffer_compress_init_send(int);
void	 buffer_compress_init_recv(void);
void     buffer_compress_uninit(void);
void     buffer_compress(Buffer *, Buffer *);
void     buffer_uncompress(Buffer *, Buffer *);
@


1.8.2.2
log
@Merge OpenSSH 3.1, keeping /etc as configuration files directory.
(i.e. OpenSSH 3.1 + openbsd29_3.1.patch)
@
text
@a0 2
/*	$OpenBSD: compress.h,v 1.11 2002/03/04 17:27:39 stevesk Exp $	*/

d13 2
@


1.7
log
@fix prototypes; from  stevesk@@pobox.com
@
text
@d14 1
a14 1
/* RCSID("$OpenBSD: compress.h,v 1.6 2000/09/07 20:27:50 deraadt Exp $"); */
d23 2
a24 1
void    buffer_compress_init(int level);
@


1.6
log
@cleanup copyright notices on all files.  I have attempted to be accurate with
the details.  everything is now under Tatu's licence (which I copied from his
readme), and/or the core-sdi bsd-ish thing for deattack, or various openbsd
developers under a 2-term bsd licence.  We're not changing any rules, just
being accurate.
@
text
@d14 1
a14 1
/* RCSID("$OpenBSD: compress.h,v 1.5 2000/06/20 01:39:40 markus Exp $"); */
d26 1
a26 1
void    buffer_compress_uninit();
@


1.6.2.1
log
@Pull in OpenSSH 2.5.0
@
text
@d14 1
a14 1
/* RCSID("$OpenBSD: compress.h,v 1.7 2000/12/20 19:37:22 markus Exp $"); */
d26 1
a26 1
void    buffer_compress_uninit(void);
@


1.6.2.2
log
@Pull in OpenSSH-2.5.1
@
text
@@


1.6.2.3
log
@Pull in OpenSSH-2.5.2 for 2.8 branch.
@
text
@@


1.6.2.4
log
@Pull in OpenSSH-2.9 to 2.8 branch.
@
text
@d14 1
a14 1
/* RCSID("$OpenBSD: compress.h,v 1.8 2001/04/05 10:39:02 markus Exp $"); */
d23 1
a23 2
void	buffer_compress_init_send(int level);
void	buffer_compress_init_recv(void);
@


1.6.2.5
log
@Pull in OpenSSH 2.9.9 to the 2.8 branch.
@
text
@d14 1
a14 1
/* RCSID("$OpenBSD: compress.h,v 1.10 2001/06/26 17:27:23 markus Exp $"); */
d19 29
a47 5
void	 buffer_compress_init_send(int);
void	 buffer_compress_init_recv(void);
void     buffer_compress_uninit(void);
void     buffer_compress(Buffer *, Buffer *);
void     buffer_uncompress(Buffer *, Buffer *);
@


1.6.2.6
log
@Merge OpenSSH 3.1.
@
text
@a0 2
/*	$OpenBSD: compress.h,v 1.11 2002/03/04 17:27:39 stevesk Exp $	*/

d13 2
@


1.5
log
@OpenBSD tag
@
text
@a1 3
 *
 * compress.h
 *
a2 1
 *
a4 3
 *
 * Created: Wed Oct 25 22:12:46 1995 ylo
 *
d7 5
d14 1
a14 1
/* RCSID("$OpenBSD: compress.h,v 1.4 2000/04/14 10:30:31 markus Exp $"); */
@


1.4
log
@whitespace cleanup
@
text
@d16 1
a16 1
/* RCSID("$Id: compress.h,v 1.3 1999/11/24 19:53:46 markus Exp $"); */
@


1.4.2.1
log
@Pull in the rest of openssh-2.2.0 to 2.7 branch (luvin' cvs...)
@
text
@d16 1
a16 1
/* RCSID("$OpenBSD: compress.h,v 1.5 2000/06/20 01:39:40 markus Exp $"); */
@


1.4.2.2
log
@openssh-2.3.0 (again) for 2.7 branch
@
text
@d2 3
d6 1
d9 3
a13 5
 * As far as I am concerned, the code I have written for this software
 * can be used freely for any purpose.  Any derived versions of this
 * software must be clearly marked as such, and if the derived work is
 * incompatible with the protocol description in the RFC file, it must be
 * called by a name other than "ssh" or "Secure Shell".
d16 1
a16 1
/* RCSID("$OpenBSD: compress.h,v 1.6 2000/09/07 20:27:50 deraadt Exp $"); */
@


1.4.2.3
log
@OpenSSH-2.5.1 for 2.7 patch branch
@
text
@d14 1
a14 1
/* RCSID("$OpenBSD: compress.h,v 1.7 2000/12/20 19:37:22 markus Exp $"); */
d26 1
a26 1
void    buffer_compress_uninit(void);
@


1.4.2.4
log
@Pull in OpenSSH-2.5.2 for 2.7 branch.
@
text
@@


1.3
log
@KNF, final part 3
@
text
@d2 1
a2 1
 * 
d4 1
a4 1
 * 
d6 1
a6 1
 * 
d9 1
a9 1
 * 
d11 1
a11 1
 * 
d13 1
a13 1
 * 
d16 1
a16 1
/* RCSID("$Id: compress.h,v 1.2 1999/11/24 00:26:01 deraadt Exp $"); */
@


1.2
log
@much more KNF
@
text
@d16 1
a16 1
/* RCSID("$Id: compress.h,v 1.1 1999/09/26 20:53:34 deraadt Exp $"); */
d21 4
a24 2
/* Initializes compression; level is compression level from 1 to 9 (as in
   gzip). */
d30 8
a37 7
/* Compresses the contents of input_buffer into output_buffer.  All
   packets compressed using this function will form a single
   compressed data stream; however, data will be flushed at the end of
   every call so that each output_buffer can be decompressed
   independently (but in the appropriate order since they together
   form a single compression stream) by the receiver.  This appends
   the compressed data to the output buffer. */
d40 8
a47 7
/* Uncompresses the contents of input_buffer into output_buffer.  All
   packets uncompressed using this function will form a single
   compressed data stream; however, data will be flushed at the end of
   every call so that each output_buffer.  This must be called for the
   same size units that the buffer_compress was called, and in the
   same order that buffers compressed with that.  This appends the
   uncompressed data to the output buffer. */
@


1.1
log
@i bet a lot of people didn't know what ssh 1.2.16 had a nice license.
well, except for the patent issues.  someone in sweden (forget their
name at the moment) cleaned out most of the patented code, and now
this code removes rsa code.  when this is done, it will link against
libssl, but the work isn't completely done yet.  then we need to bring
this up to modern days, featurewise.
@
text
@d2 13
d16 1
a16 14
compress.h

Author: Tatu Ylonen <ylo@@cs.hut.fi>

Copyright (c) 1995 Tatu Ylonen <ylo@@cs.hut.fi>, Espoo, Finland
                   All rights reserved

Created: Wed Oct 25 22:12:46 1995 ylo

Interface to packet compression for ssh.

*/

/* RCSID("$Id: compress.h,v 1.2 1999/05/04 11:58:39 bg Exp $"); */
d23 1
a23 1
void buffer_compress_init(int level);
d26 1
a26 1
void buffer_compress_uninit();
d35 1
a35 1
void buffer_compress(Buffer *input_buffer, Buffer *output_buffer);
d44 1
a44 1
void buffer_uncompress(Buffer *input_buffer, Buffer *output_buffer);
d46 1
a46 1
#endif /* COMPRESS_H */
@

