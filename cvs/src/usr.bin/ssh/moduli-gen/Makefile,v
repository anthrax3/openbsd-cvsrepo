head	1.5;
access;
symbols
	OPENBSD_6_2:1.5.0.10
	OPENBSD_6_2_BASE:1.5
	OPENBSD_6_1:1.5.0.8
	OPENBSD_6_1_BASE:1.5
	OPENBSD_6_0:1.5.0.6
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.2
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.4.0.2
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.2.0.2
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.6
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.4
	OPENBSD_5_5_BASE:1.2;
locks; strict;
comment	@# @;


1.5
date	2015.10.21.06.37.25;	author doug;	state Exp;
branches;
next	1.4;
commitid	isKvlbTVzg087Im5;

1.4
date	2015.05.28.00.54.01;	author dtucker;	state Exp;
branches;
next	1.3;
commitid	DMCzxGwvXZ7B9ubi;

1.3
date	2015.05.28.00.00.24;	author dtucker;	state Exp;
branches;
next	1.2;
commitid	IL75cZKhUcT7c3gA;

1.2
date	2013.10.14.02.57.59;	author dtucker;	state Exp;
branches;
next	1.1;

1.1
date	2013.10.10.00.59.18;	author dtucker;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Remove Diffie-Hellman moduli entries below 2048.

OpenSSH requires a 2048 minimum for DH in the client and server.

input and ok sthen@@
ok dtucker@@, djm@@
@
text
@#	$OpenBSD: Makefile,v 1.4 2015/05/28 00:54:01 dtucker Exp $

.include <bsd.own.mk>

# The larger ones will take many days, so if you're going to regen them run
# it in a tmux session or something.  The checkpoints should make it safe
# to stop and restart.
DHSIZE=2048 3072 4096 6144 7680 8192

.for bits in ${DHSIZE}
MODULI_PARTS+=moduli.${bits}

all:	${MODULI_PARTS}

moduli.${bits}:
	sh ${.CURDIR}/moduli-gen.sh ${.CURDIR} ${.CURDIR}/work ${bits}
.endfor

update-moduli:	${MODULI_PARTS}
	( \
		echo -n '#    $$Open'; echo 'BSD$$'; \
		echo '# Time Type Tests Tries Size Generator Modulus'; \
		cat ${MODULI_PARTS} \
	) > ${BSDSRCDIR}/etc/moduli

clean:
.for bits in ${DHSIZE}
	rm -f ${.OBJDIR}/moduli.${bits}.sieved.gz
.endfor
@


1.4
log
@Remove intermediate copy of the moduli file.  "make" will rebuild any
missing moduli fragment files (which will be a no-op unless you have
explicitly deleted them) and "make update-moduli" will update the
main file under ${BSDSRCDIR}/etc/moduli.  ok djm@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.3 2015/05/28 00:00:24 dtucker Exp $
d8 1
a8 1
DHSIZE=1536 2048 3072 4096 6144 7680 8192
@


1.3
log
@Remove 1k bit groups.  ok deraadt@@, markus@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.2 2013/10/14 02:57:59 dtucker Exp $
a4 2
all:	moduli

d13 2
d19 1
a19 1
moduli:	${MODULI_PARTS}
d24 1
a24 4
	) > moduli

update-moduli:
	cp moduli ${BSDSRCDIR}/etc/moduli
@


1.2
log
@add 7.5kbit DH groups
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.1 2013/10/10 00:59:18 dtucker Exp $
d10 1
a10 1
DHSIZE=1024 1536 2048 3072 4096 6144 7680 8192
@


1.1
log
@Move moduli generation to usr.bin/ssh/moduli-gen and keep track of
the fragments separately.  "No substantive objection" djm@@
@
text
@d1 1
a1 1
#	$OpenBSD$
d10 1
a10 1
DHSIZE=1024 1536 2048 3072 4096 6144 8192
@

