head	1.291;
access;
symbols
	OPENBSD_6_2:1.291.0.2
	OPENBSD_6_2_BASE:1.291
	OPENBSD_6_1:1.288.0.4
	OPENBSD_6_1_BASE:1.288
	OPENBSD_6_0:1.284.0.6
	OPENBSD_6_0_BASE:1.284
	OPENBSD_5_9:1.284.0.2
	OPENBSD_5_9_BASE:1.284
	OPENBSD_5_8:1.280.0.2
	OPENBSD_5_8_BASE:1.280
	OPENBSD_5_7:1.278.0.2
	OPENBSD_5_7_BASE:1.278
	OPENBSD_5_6:1.276.0.4
	OPENBSD_5_6_BASE:1.276
	OPENBSD_5_5:1.273.0.4
	OPENBSD_5_5_BASE:1.273
	OPENBSD_5_4:1.270.0.2
	OPENBSD_5_4_BASE:1.270
	OPENBSD_5_3:1.267.0.2
	OPENBSD_5_3_BASE:1.267
	OPENBSD_5_2:1.266.0.2
	OPENBSD_5_2_BASE:1.266
	OPENBSD_5_1_BASE:1.264
	OPENBSD_5_1:1.264.0.2
	OPENBSD_5_0:1.263.0.2
	OPENBSD_5_0_BASE:1.263
	OPENBSD_4_9:1.260.0.2
	OPENBSD_4_9_BASE:1.260
	OPENBSD_4_8:1.258.0.2
	OPENBSD_4_8_BASE:1.258
	OPENBSD_4_7:1.255.0.2
	OPENBSD_4_7_BASE:1.255
	OPENBSD_4_6:1.248.0.4
	OPENBSD_4_6_BASE:1.248
	OPENBSD_4_5:1.247.0.2
	OPENBSD_4_5_BASE:1.247
	OPENBSD_4_4:1.246.0.2
	OPENBSD_4_4_BASE:1.246
	OPENBSD_4_3:1.239.0.2
	OPENBSD_4_3_BASE:1.239
	OPENBSD_4_2:1.237.0.2
	OPENBSD_4_2_BASE:1.237
	OPENBSD_4_1:1.234.0.2
	OPENBSD_4_1_BASE:1.234
	OPENBSD_4_0:1.234.0.4
	OPENBSD_4_0_BASE:1.234
	OPENBSD_3_9:1.230.0.2
	OPENBSD_3_9_BASE:1.230
	OPENBSD_3_8:1.208.0.2
	OPENBSD_3_8_BASE:1.208
	OPENBSD_3_7:1.206.0.2
	OPENBSD_3_7_BASE:1.206
	OPENBSD_3_6:1.202.0.2
	OPENBSD_3_6_BASE:1.202
	OPENBSD_3_5:1.200.0.2
	OPENBSD_3_5_BASE:1.200
	OPENBSD_3_4:1.199.0.2
	OPENBSD_3_4_BASE:1.199
	OPENBSD_3_3:1.194.0.2
	OPENBSD_3_3_BASE:1.194
	OPENBSD_3_2:1.193.0.2
	OPENBSD_3_2_BASE:1.193
	OPENBSD_3_1:1.176.0.2
	OPENBSD_3_1_BASE:1.176
	OPENBSD_3_0:1.153.0.2
	OPENBSD_3_0_BASE:1.153
	OPENBSD_2_9_BASE:1.120
	OPENBSD_2_9:1.120.0.2
	OPENBSD_2_8:1.70.0.2
	OPENBSD_2_8_BASE:1.70
	OPENBSD_2_7:1.51.0.2
	OPENBSD_2_7_BASE:1.51
	OPENBSD_2_6:1.20.0.2
	OPENBSD_2_6_BASE:1.20;
locks; strict;
comment	@.\" @;


1.291
date	2017.06.24.06.28.50;	author jmc;	state Exp;
branches;
next	1.290;
commitid	ZJKf70OkGUN2gUe4;

1.290
date	2017.06.24.05.35.05;	author djm;	state Exp;
branches;
next	1.289;
commitid	VtruzyuGSzyL7HVs;

1.289
date	2017.05.07.23.12.57;	author djm;	state Exp;
branches;
next	1.288;
commitid	rjagy2MdppXCAqQE;

1.288
date	2017.01.30.23.27.39;	author dtucker;	state Exp;
branches;
next	1.287;
commitid	O8r3dotGQALfAMTQ;

1.287
date	2016.11.30.02.57.40;	author djm;	state Exp;
branches;
next	1.286;
commitid	RBXxsfvp5NR7LTy5;

1.286
date	2016.08.19.03.18.06;	author djm;	state Exp;
branches;
next	1.285;
commitid	o9ZQ52UJzA8fd7BT;

1.285
date	2016.08.15.12.32.04;	author naddy;	state Exp;
branches;
next	1.284;
commitid	YPoPgBRLUcNjB56L;

1.284
date	2016.02.17.07.38.19;	author jmc;	state Exp;
branches;
next	1.283;
commitid	EioSSmAAduCymkBM;

1.283
date	2016.02.05.03.07.06;	author djm;	state Exp;
branches;
next	1.282;
commitid	HIeggcJLLA4w9c1V;

1.282
date	2015.11.16.00.30.02;	author djm;	state Exp;
branches;
next	1.281;
commitid	hT0bGFTnDnms93C3;

1.281
date	2015.09.11.03.13.36;	author djm;	state Exp;
branches;
next	1.280;
commitid	p1Ec568siVPAeAXr;

1.280
date	2015.07.03.03.49.45;	author djm;	state Exp;
branches;
next	1.279;
commitid	XxrOOTFUKuLzoQb7;

1.279
date	2015.05.01.07.11.47;	author djm;	state Exp;
branches;
next	1.278;
commitid	B4T9jCDmHgYrlSn3;

1.278
date	2014.11.15.14.41.03;	author bentley;	state Exp;
branches;
next	1.277;
commitid	HuCemPIiOkto0SJD;

1.277
date	2014.08.30.15.33.50;	author sobrado;	state Exp;
branches;
next	1.276;
commitid	qDOCDATnMVba0efh;

1.276
date	2014.07.03.22.40.43;	author djm;	state Exp;
branches;
next	1.275;
commitid	cw6lnAok4n9rxQzD;

1.275
date	2014.04.19.18.15.16;	author tedu;	state Exp;
branches;
next	1.274;

1.274
date	2014.03.26.19.58.37;	author tedu;	state Exp;
branches;
next	1.273;

1.273
date	2013.12.07.11.58.46;	author naddy;	state Exp;
branches;
next	1.272;

1.272
date	2013.12.06.15.29.07;	author jmc;	state Exp;
branches;
next	1.271;

1.271
date	2013.12.06.13.39.49;	author markus;	state Exp;
branches;
next	1.270;

1.270
date	2013.06.27.14.05.37;	author jmc;	state Exp;
branches;
next	1.269;

1.269
date	2013.04.07.09.40.27;	author dtucker;	state Exp;
branches;
next	1.268;

1.268
date	2013.04.07.02.10.33;	author dtucker;	state Exp;
branches;
next	1.267;

1.267
date	2012.10.04.13.21.50;	author markus;	state Exp;
branches;
next	1.266;

1.266
date	2012.06.18.12.07.07;	author dtucker;	state Exp;
branches;
next	1.265;

1.265
date	2012.05.13.01.42.32;	author dtucker;	state Exp;
branches;
next	1.264;

1.264
date	2011.09.23.00.22.04;	author dtucker;	state Exp;
branches;
next	1.263;

1.263
date	2011.08.02.01.22.11;	author djm;	state Exp;
branches;
next	1.262;

1.262
date	2011.05.23.07.10.21;	author jmc;	state Exp;
branches;
next	1.261;

1.261
date	2011.05.23.03.30.07;	author djm;	state Exp;
branches;
next	1.260;

1.260
date	2010.10.28.18.33.28;	author jmc;	state Exp;
branches;
next	1.259;

1.259
date	2010.08.31.11.54.45;	author djm;	state Exp;
branches;
next	1.258;

1.258
date	2010.08.08.19.36.30;	author jmc;	state Exp;
branches;
next	1.257;

1.257
date	2010.08.04.05.37.01;	author djm;	state Exp;
branches;
next	1.256;

1.256
date	2010.05.07.11.30.30;	author djm;	state Exp;
branches;
next	1.255;

1.255
date	2010.03.05.06.50.35;	author jmc;	state Exp;
branches;
next	1.254;

1.254
date	2010.03.04.23.19.29;	author djm;	state Exp;
branches;
next	1.253;

1.253
date	2010.03.03.22.49.50;	author djm;	state Exp;
branches;
next	1.252;

1.252
date	2010.02.26.22.09.28;	author jmc;	state Exp;
branches;
next	1.251;

1.251
date	2010.02.26.20.29.54;	author djm;	state Exp;
branches;
next	1.250;

1.250
date	2010.01.30.21.08.33;	author djm;	state Exp;
branches;
next	1.249;

1.249
date	2009.10.08.20.42.13;	author jmc;	state Exp;
branches;
next	1.248;

1.248
date	2009.03.26.08.38.39;	author sobrado;	state Exp;
branches;
next	1.247;

1.247
date	2008.10.03.13.08.12;	author jmc;	state Exp;
branches;
next	1.246;

1.246
date	2008.07.02.02.24.18;	author djm;	state Exp;
branches;
next	1.245;

1.245
date	2008.06.11.07.30.37;	author jmc;	state Exp;
branches;
next	1.244;

1.244
date	2008.06.10.23.06.19;	author djm;	state Exp;
branches;
next	1.243;

1.243
date	2008.06.10.08.17.40;	author jmc;	state Exp;
branches;
next	1.242;

1.242
date	2008.06.10.04.50.25;	author dtucker;	state Exp;
branches;
next	1.241;

1.241
date	2008.03.27.22.37.57;	author jmc;	state Exp;
branches;
next	1.240;

1.240
date	2008.03.26.21.28.14;	author djm;	state Exp;
branches;
next	1.239;

1.239
date	2008.02.11.07.58.28;	author jmc;	state Exp;
branches;
next	1.238;

1.238
date	2008.02.09.12.15.43;	author mcbride;	state Exp;
branches;
next	1.237;

1.237
date	2007.06.07.19.37.34;	author pvalchev;	state Exp;
branches;
next	1.236;

1.236
date	2007.05.31.19.20.16;	author jmc;	state Exp;
branches;
next	1.235;

1.235
date	2007.03.20.15.57.15;	author jmc;	state Exp;
branches;
next	1.234;

1.234
date	2006.08.21.08.15.57;	author dtucker;	state Exp;
branches;
next	1.233;

1.233
date	2006.07.19.13.07.10;	author dtucker;	state Exp;
branches;
next	1.232;

1.232
date	2006.07.10.16.04.21;	author jmc;	state Exp;
branches;
next	1.231;

1.231
date	2006.07.10.12.46.52;	author dtucker;	state Exp;
branches;
next	1.230;

1.230
date	2006.02.24.20.31.31;	author jmc;	state Exp;
branches
	1.230.2.1;
next	1.229;

1.229
date	2006.02.24.10.39.52;	author jmc;	state Exp;
branches;
next	1.228;

1.228
date	2006.02.19.20.05.00;	author jmc;	state Exp;
branches;
next	1.227;

1.227
date	2006.02.19.20.02.17;	author jmc;	state Exp;
branches;
next	1.226;

1.226
date	2006.02.19.19.52.10;	author jmc;	state Exp;
branches;
next	1.225;

1.225
date	2006.02.16.09.05.34;	author jmc;	state Exp;
branches;
next	1.224;

1.224
date	2006.02.15.16.55.33;	author jmc;	state Exp;
branches;
next	1.223;

1.223
date	2006.02.13.11.27.25;	author jmc;	state Exp;
branches;
next	1.222;

1.222
date	2006.02.13.11.08.43;	author jmc;	state Exp;
branches;
next	1.221;

1.221
date	2006.02.13.11.02.26;	author jmc;	state Exp;
branches;
next	1.220;

1.220
date	2006.02.13.10.21.25;	author jmc;	state Exp;
branches;
next	1.219;

1.219
date	2006.02.13.10.16.39;	author jmc;	state Exp;
branches;
next	1.218;

1.218
date	2006.02.12.17.57.19;	author jmc;	state Exp;
branches;
next	1.217;

1.217
date	2006.02.12.10.52.41;	author jmc;	state Exp;
branches;
next	1.216;

1.216
date	2006.02.09.10.10.47;	author jmc;	state Exp;
branches;
next	1.215;

1.215
date	2006.02.01.09.11.41;	author jmc;	state Exp;
branches;
next	1.214;

1.214
date	2006.02.01.09.06.50;	author jmc;	state Exp;
branches;
next	1.213;

1.213
date	2006.01.25.09.07.22;	author jmc;	state Exp;
branches;
next	1.212;

1.212
date	2006.01.25.09.04.34;	author jmc;	state Exp;
branches;
next	1.211;

1.211
date	2006.01.12.22.20.00;	author jmc;	state Exp;
branches;
next	1.210;

1.210
date	2005.12.21.22.44.26;	author stevesk;	state Exp;
branches;
next	1.209;

1.209
date	2005.12.06.22.38.28;	author reyk;	state Exp;
branches;
next	1.208;

1.208
date	2005.06.08.03.50.00;	author djm;	state Exp;
branches
	1.208.2.1;
next	1.207;

1.207
date	2005.04.21.06.17.50;	author djm;	state Exp;
branches;
next	1.206;

1.206
date	2005.03.01.14.59.49;	author jmc;	state Exp;
branches
	1.206.2.1;
next	1.205;

1.205
date	2005.03.01.10.40.27;	author djm;	state Exp;
branches;
next	1.204;

1.204
date	2005.02.25.10.55.13;	author jmc;	state Exp;
branches;
next	1.203;

1.203
date	2004.12.06.11.41.03;	author dtucker;	state Exp;
branches;
next	1.202;

1.202
date	2004.08.26.16.00.55;	author markus;	state Exp;
branches
	1.202.2.1;
next	1.201;

1.201
date	2004.05.02.11.54.31;	author dtucker;	state Exp;
branches;
next	1.200;

1.200
date	2003.10.08.08.27.36;	author jmc;	state Exp;
branches
	1.200.2.1;
next	1.199;

1.199
date	2003.08.13.08.46.31;	author markus;	state Exp;
branches
	1.199.2.1;
next	1.198;

1.198
date	2003.06.10.09.12.12;	author jmc;	state Exp;
branches;
next	1.197;

1.197
date	2003.05.20.12.09.32;	author jmc;	state Exp;
branches;
next	1.196;

1.196
date	2003.04.30.20.41.07;	author david;	state Exp;
branches;
next	1.195;

1.195
date	2003.04.30.01.16.20;	author mouring;	state Exp;
branches;
next	1.194;

1.194
date	2003.01.31.21.54.40;	author jmc;	state Exp;
branches
	1.194.2.1;
next	1.193;

1.193
date	2002.09.24.20.59.44;	author todd;	state Exp;
branches
	1.193.2.1;
next	1.192;

1.192
date	2002.09.16.22.03.13;	author stevesk;	state Exp;
branches;
next	1.191;

1.191
date	2002.09.04.18.52.42;	author stevesk;	state Exp;
branches;
next	1.190;

1.190
date	2002.08.21.19.38.06;	author stevesk;	state Exp;
branches;
next	1.189;

1.189
date	2002.08.21.11.20.59;	author espie;	state Exp;
branches;
next	1.188;

1.188
date	2002.08.12.17.30.35;	author stevesk;	state Exp;
branches;
next	1.187;

1.187
date	2002.08.02.16.00.07;	author marc;	state Exp;
branches;
next	1.186;

1.186
date	2002.06.22.16.45.29;	author stevesk;	state Exp;
branches;
next	1.185;

1.185
date	2002.06.22.16.32.54;	author stevesk;	state Exp;
branches;
next	1.184;

1.184
date	2002.06.20.19.56.07;	author stevesk;	state Exp;
branches;
next	1.183;

1.183
date	2002.05.29.03.06.30;	author stevesk;	state Exp;
branches;
next	1.182;

1.182
date	2002.05.15.21.56.38;	author markus;	state Exp;
branches;
next	1.181;

1.181
date	2002.05.15.21.02.53;	author markus;	state Exp;
branches;
next	1.180;

1.180
date	2002.05.06.23.34.33;	author millert;	state Exp;
branches;
next	1.179;

1.179
date	2002.05.04.02.39.35;	author deraadt;	state Exp;
branches;
next	1.178;

1.178
date	2002.04.22.16.16.53;	author markus;	state Exp;
branches;
next	1.177;

1.177
date	2002.04.21.16.19.27;	author stevesk;	state Exp;
branches;
next	1.176;

1.176
date	2002.04.05.20.56.21;	author stevesk;	state Exp;
branches
	1.176.2.1;
next	1.175;

1.175
date	2002.03.29.19.16.22;	author stevesk;	state Exp;
branches;
next	1.174;

1.174
date	2002.03.26.11.34.49;	author markus;	state Exp;
branches;
next	1.173;

1.173
date	2002.03.19.05.23.08;	author stevesk;	state Exp;
branches;
next	1.172;

1.172
date	2002.03.18.17.59.09;	author provos;	state Exp;
branches;
next	1.171;

1.171
date	2002.03.18.17.53.08;	author provos;	state Exp;
branches;
next	1.170;

1.170
date	2002.02.28.20.46.10;	author stevesk;	state Exp;
branches;
next	1.169;

1.169
date	2002.02.28.20.36.42;	author stevesk;	state Exp;
branches;
next	1.168;

1.168
date	2002.02.10.01.07.05;	author deraadt;	state Exp;
branches;
next	1.167;

1.167
date	2002.02.09.17.37.34;	author deraadt;	state Exp;
branches;
next	1.166;

1.166
date	2002.02.03.22.35.57;	author stevesk;	state Exp;
branches;
next	1.165;

1.165
date	2002.01.29.14.32.03;	author markus;	state Exp;
branches;
next	1.164;

1.164
date	2002.01.27.14.57.46;	author stevesk;	state Exp;
branches;
next	1.163;

1.163
date	2002.01.18.20.46.34;	author stevesk;	state Exp;
branches;
next	1.162;

1.162
date	2002.01.18.17.14.16;	author stevesk;	state Exp;
branches;
next	1.161;

1.161
date	2002.01.05.21.51.56;	author stevesk;	state Exp;
branches;
next	1.160;

1.160
date	2002.01.04.18.14.16;	author stevesk;	state Exp;
branches;
next	1.159;

1.159
date	2001.12.28.22.37.48;	author stevesk;	state Exp;
branches;
next	1.158;

1.158
date	2001.12.27.18.22.53;	author stevesk;	state Exp;
branches;
next	1.157;

1.157
date	2001.12.19.07.18.56;	author deraadt;	state Exp;
branches;
next	1.156;

1.156
date	2001.12.06.13.30.06;	author markus;	state Exp;
branches;
next	1.155;

1.155
date	2001.12.01.21.41.48;	author markus;	state Exp;
branches;
next	1.154;

1.154
date	2001.11.07.22.12.01;	author markus;	state Exp;
branches;
next	1.153;

1.153
date	2001.09.27.17.53.24;	author camield;	state Exp;
branches
	1.153.2.1;
next	1.152;

1.152
date	2001.09.20.00.15.54;	author stevesk;	state Exp;
branches;
next	1.151;

1.151
date	2001.09.19.21.41.57;	author stevesk;	state Exp;
branches;
next	1.150;

1.150
date	2001.09.19.21.04.53;	author stevesk;	state Exp;
branches;
next	1.149;

1.149
date	2001.09.19.10.08.51;	author markus;	state Exp;
branches;
next	1.148;

1.148
date	2001.09.14.18.56.04;	author markus;	state Exp;
branches;
next	1.147;

1.147
date	2001.09.05.06.23.07;	author deraadt;	state Exp;
branches;
next	1.146;

1.146
date	2001.08.30.20.36.34;	author stevesk;	state Exp;
branches;
next	1.145;

1.145
date	2001.08.29.23.39.40;	author stevesk;	state Exp;
branches;
next	1.144;

1.144
date	2001.08.29.23.02.21;	author stevesk;	state Exp;
branches;
next	1.143;

1.143
date	2001.08.22.16.30.02;	author stevesk;	state Exp;
branches;
next	1.142;

1.142
date	2001.08.21.21.47.42;	author stevesk;	state Exp;
branches;
next	1.141;

1.141
date	2001.08.16.20.14.57;	author stevesk;	state Exp;
branches;
next	1.140;

1.140
date	2001.08.16.19.18.34;	author jakob;	state Exp;
branches;
next	1.139;

1.139
date	2001.08.01.22.16.45;	author markus;	state Exp;
branches;
next	1.138;

1.138
date	2001.07.28.09.21.15;	author markus;	state Exp;
branches;
next	1.137;

1.137
date	2001.07.26.17.18.22;	author stevesk;	state Exp;
branches;
next	1.136;

1.136
date	2001.07.22.22.24.16;	author markus;	state Exp;
branches;
next	1.135;

1.135
date	2001.06.27.04.48.53;	author markus;	state Exp;
branches;
next	1.134;

1.134
date	2001.06.26.05.48.07;	author mpech;	state Exp;
branches;
next	1.133;

1.133
date	2001.06.23.17.48.19;	author itojun;	state Exp;
branches;
next	1.132;

1.132
date	2001.06.23.03.03.59;	author markus;	state Exp;
branches;
next	1.131;

1.131
date	2001.06.23.02.34.33;	author markus;	state Exp;
branches;
next	1.130;

1.130
date	2001.06.22.21.55.50;	author markus;	state Exp;
branches;
next	1.129;

1.129
date	2001.06.22.21.28.53;	author provos;	state Exp;
branches;
next	1.128;

1.128
date	2001.06.22.10.17.51;	author mpech;	state Exp;
branches;
next	1.127;

1.127
date	2001.06.19.14.09.45;	author markus;	state Exp;
branches;
next	1.126;

1.126
date	2001.06.11.16.04.38;	author markus;	state Exp;
branches;
next	1.125;

1.125
date	2001.05.20.17.20.35;	author markus;	state Exp;
branches;
next	1.124;

1.124
date	2001.05.19.19.43.57;	author stevesk;	state Exp;
branches;
next	1.123;

1.123
date	2001.05.19.16.46.19;	author markus;	state Exp;
branches;
next	1.122;

1.122
date	2001.05.19.16.08.43;	author markus;	state Exp;
branches;
next	1.121;

1.121
date	2001.05.04.14.21.56;	author stevesk;	state Exp;
branches;
next	1.120;

1.120
date	2001.04.22.23.58.36;	author markus;	state Exp;
branches
	1.120.2.1;
next	1.119;

1.119
date	2001.04.22.13.32.27;	author markus;	state Exp;
branches;
next	1.118;

1.118
date	2001.04.15.21.41.29;	author deraadt;	state Exp;
branches;
next	1.117;

1.117
date	2001.04.15.21.05.49;	author stevesk;	state Exp;
branches;
next	1.116;

1.116
date	2001.04.15.19.41.21;	author stevesk;	state Exp;
branches;
next	1.115;

1.115
date	2001.04.13.22.46.54;	author beck;	state Exp;
branches;
next	1.114;

1.114
date	2001.04.11.16.25.31;	author lebel;	state Exp;
branches;
next	1.113;

1.113
date	2001.04.10.09.13.22;	author itojun;	state Exp;
branches;
next	1.112;

1.112
date	2001.04.09.18.00.15;	author stevesk;	state Exp;
branches;
next	1.111;

1.111
date	2001.04.08.23.28.27;	author stevesk;	state Exp;
branches;
next	1.110;

1.110
date	2001.04.08.16.01.36;	author stevesk;	state Exp;
branches;
next	1.109;

1.109
date	2001.04.02.14.15.31;	author stevesk;	state Exp;
branches;
next	1.108;

1.108
date	2001.03.25.13.16.11;	author stevesk;	state Exp;
branches;
next	1.107;

1.107
date	2001.03.19.12.10.17;	author djm;	state Exp;
branches;
next	1.106;

1.106
date	2001.03.07.01.19.06;	author deraadt;	state Exp;
branches;
next	1.105;

1.105
date	2001.03.05.16.07.15;	author deraadt;	state Exp;
branches;
next	1.104;

1.104
date	2001.03.05.14.28.47;	author deraadt;	state Exp;
branches;
next	1.103;

1.103
date	2001.03.04.18.21.28;	author deraadt;	state Exp;
branches;
next	1.102;

1.102
date	2001.03.04.12.54.04;	author stevesk;	state Exp;
branches;
next	1.101;

1.101
date	2001.03.04.11.16.06;	author stevesk;	state Exp;
branches;
next	1.100;

1.100
date	2001.03.04.11.04.41;	author stevesk;	state Exp;
branches;
next	1.99;

1.99
date	2001.03.02.18.54.31;	author deraadt;	state Exp;
branches;
next	1.98;

1.98
date	2001.03.02.09.42.49;	author deraadt;	state Exp;
branches;
next	1.97;

1.97
date	2001.03.02.06.21.01;	author deraadt;	state Exp;
branches;
next	1.96;

1.96
date	2001.02.22.21.57.27;	author markus;	state Exp;
branches;
next	1.95;

1.95
date	2001.02.17.23.48.48;	author deraadt;	state Exp;
branches;
next	1.94;

1.94
date	2001.02.12.16.16.24;	author markus;	state Exp;
branches;
next	1.93;

1.93
date	2001.02.11.12.59.25;	author markus;	state Exp;
branches;
next	1.92;

1.92
date	2001.02.09.23.38.11;	author deraadt;	state Exp;
branches;
next	1.91;

1.91
date	2001.02.08.19.22.38;	author itojun;	state Exp;
branches;
next	1.90;

1.90
date	2001.02.04.11.11.55;	author djm;	state Exp;
branches;
next	1.89;

1.89
date	2001.02.03.10.43.09;	author markus;	state Exp;
branches;
next	1.88;

1.88
date	2001.02.03.10.19.50;	author markus;	state Exp;
branches;
next	1.87;

1.87
date	2001.02.03.10.08.37;	author markus;	state Exp;
branches;
next	1.86;

1.86
date	2001.01.28.20.43.25;	author stevesk;	state Exp;
branches;
next	1.85;

1.85
date	2001.01.28.10.37.25;	author markus;	state Exp;
branches;
next	1.84;

1.84
date	2001.01.28.10.24.04;	author markus;	state Exp;
branches;
next	1.83;

1.83
date	2001.01.19.16.48.14;	author markus;	state Exp;
branches;
next	1.82;

1.82
date	2001.01.18.16.20.22;	author markus;	state Exp;
branches;
next	1.81;

1.81
date	2001.01.13.18.56.48;	author markus;	state Exp;
branches;
next	1.80;

1.80
date	2001.01.08.22.29.05;	author markus;	state Exp;
branches;
next	1.79;

1.79
date	2001.01.07.11.28.07;	author markus;	state Exp;
branches;
next	1.78;

1.78
date	2001.01.04.22.35.32;	author djm;	state Exp;
branches;
next	1.77;

1.77
date	2001.01.04.22.25.58;	author markus;	state Exp;
branches;
next	1.76;

1.76
date	2000.12.28.12.03.57;	author markus;	state Exp;
branches;
next	1.75;

1.75
date	2000.12.27.11.41.31;	author markus;	state Exp;
branches;
next	1.74;

1.74
date	2000.11.29.21.11.59;	author markus;	state Exp;
branches;
next	1.73;

1.73
date	2000.11.22.15.38.30;	author provos;	state Exp;
branches;
next	1.72;

1.72
date	2000.11.12.19.50.38;	author markus;	state Exp;
branches;
next	1.71;

1.71
date	2000.11.10.05.10.40;	author aaron;	state Exp;
branches;
next	1.70;

1.70
date	2000.10.16.09.38.44;	author djm;	state Exp;
branches
	1.70.2.1;
next	1.69;

1.69
date	2000.10.14.12.12.09;	author markus;	state Exp;
branches;
next	1.68;

1.68
date	2000.10.13.19.10.53;	author markus;	state Exp;
branches;
next	1.67;

1.67
date	2000.10.13.17.20.44;	author aaron;	state Exp;
branches;
next	1.66;

1.66
date	2000.09.21.10.55.10;	author markus;	state Exp;
branches;
next	1.65;

1.65
date	2000.09.12.20.53.10;	author markus;	state Exp;
branches;
next	1.64;

1.64
date	2000.09.07.20.27.55;	author deraadt;	state Exp;
branches;
next	1.63;

1.63
date	2000.08.31.21.52.23;	author markus;	state Exp;
branches;
next	1.62;

1.62
date	2000.08.25.16.16.15;	author deraadt;	state Exp;
branches;
next	1.61;

1.61
date	2000.08.17.20.06.34;	author markus;	state Exp;
branches;
next	1.60;

1.60
date	2000.08.02.17.27.04;	author provos;	state Exp;
branches;
next	1.59;

1.59
date	2000.08.02.16.27.16;	author provos;	state Exp;
branches;
next	1.58;

1.58
date	2000.08.01.17.46.10;	author deraadt;	state Exp;
branches;
next	1.57;

1.57
date	2000.07.22.09.14.36;	author markus;	state Exp;
branches;
next	1.56;

1.56
date	2000.07.06.04.06.56;	author aaron;	state Exp;
branches;
next	1.55;

1.55
date	2000.06.26.21.59.18;	author markus;	state Exp;
branches;
next	1.54;

1.54
date	2000.06.17.22.52.34;	author jakob;	state Exp;
branches;
next	1.53;

1.53
date	2000.06.05.19.59.46;	author markus;	state Exp;
branches;
next	1.52;

1.52
date	2000.05.31.06.36.40;	author markus;	state Exp;
branches;
next	1.51;

1.51
date	2000.05.08.17.42.31;	author hugh;	state Exp;
branches
	1.51.2.1;
next	1.50;

1.50
date	2000.05.08.17.12.16;	author markus;	state Exp;
branches;
next	1.49;

1.49
date	2000.05.06.17.45.37;	author markus;	state Exp;
branches;
next	1.48;

1.48
date	2000.05.03.22.19.29;	author markus;	state Exp;
branches;
next	1.47;

1.47
date	2000.05.03.18.03.07;	author markus;	state Exp;
branches;
next	1.46;

1.46
date	2000.05.03.10.21.49;	author markus;	state Exp;
branches;
next	1.45;

1.45
date	2000.05.03.07.22.09;	author markus;	state Exp;
branches;
next	1.44;

1.44
date	2000.05.02.23.41.31;	author deraadt;	state Exp;
branches;
next	1.43;

1.43
date	2000.05.01.18.50.59;	author markus;	state Exp;
branches;
next	1.42;

1.42
date	2000.05.01.08.19.58;	author hugh;	state Exp;
branches;
next	1.41;

1.41
date	2000.04.12.23.00.28;	author markus;	state Exp;
branches;
next	1.40;

1.40
date	2000.04.12.21.47.51;	author aaron;	state Exp;
branches;
next	1.39;

1.39
date	2000.03.29.20.17.56;	author deraadt;	state Exp;
branches;
next	1.38;

1.38
date	2000.03.29.07.12.39;	author deraadt;	state Exp;
branches;
next	1.37;

1.37
date	2000.03.24.03.04.46;	author brad;	state Exp;
branches;
next	1.36;

1.36
date	2000.03.23.21.10.10;	author aaron;	state Exp;
branches;
next	1.35;

1.35
date	2000.03.14.21.31.41;	author aaron;	state Exp;
branches;
next	1.34;

1.34
date	2000.02.24.18.22.16;	author markus;	state Exp;
branches;
next	1.33;

1.33
date	2000.02.21.14.19.09;	author deraadt;	state Exp;
branches;
next	1.32;

1.32
date	2000.01.22.02.17.50;	author aaron;	state Exp;
branches;
next	1.31;

1.31
date	2000.01.15.20.56.39;	author provos;	state Exp;
branches;
next	1.30;

1.30
date	2000.01.14.09.47.26;	author markus;	state Exp;
branches;
next	1.29;

1.29
date	2000.01.04.16.57.16;	author markus;	state Exp;
branches;
next	1.28;

1.28
date	2000.01.04.00.08.00;	author markus;	state Exp;
branches;
next	1.27;

1.27
date	99.11.22.21.02.39;	author markus;	state Exp;
branches;
next	1.26;

1.26
date	99.11.22.20.02.45;	author markus;	state Exp;
branches;
next	1.25;

1.25
date	99.11.19.09.46.49;	author markus;	state Exp;
branches;
next	1.24;

1.24
date	99.11.11.22.58.39;	author markus;	state Exp;
branches;
next	1.23;

1.23
date	99.11.10.23.36.45;	author markus;	state Exp;
branches;
next	1.22;

1.22
date	99.11.09.23.09.58;	author markus;	state Exp;
branches;
next	1.21;

1.21
date	99.10.25.21.35.25;	author markus;	state Exp;
branches;
next	1.20;

1.20
date	99.10.17.23.09.16;	author dugsong;	state Exp;
branches;
next	1.19;

1.19
date	99.10.17.20.48.07;	author dugsong;	state Exp;
branches;
next	1.18;

1.18
date	99.10.17.20.35.46;	author aaron;	state Exp;
branches;
next	1.17;

1.17
date	99.10.17.00.31.06;	author deraadt;	state Exp;
branches;
next	1.16;

1.16
date	99.10.14.20.17.23;	author markus;	state Exp;
branches;
next	1.15;

1.15
date	99.10.14.19.56.02;	author markus;	state Exp;
branches;
next	1.14;

1.14
date	99.10.12.19.36.40;	author markus;	state Exp;
branches;
next	1.13;

1.13
date	99.10.12.18.11.54;	author markus;	state Exp;
branches;
next	1.12;

1.12
date	99.10.11.22.24.33;	author markus;	state Exp;
branches;
next	1.11;

1.11
date	99.10.11.21.48.29;	author markus;	state Exp;
branches;
next	1.10;

1.10
date	99.10.11.21.07.37;	author markus;	state Exp;
branches;
next	1.9;

1.9
date	99.10.11.20.40.08;	author markus;	state Exp;
branches;
next	1.8;

1.8
date	99.10.07.22.46.33;	author markus;	state Exp;
branches;
next	1.7;

1.7
date	99.10.07.21.45.02;	author markus;	state Exp;
branches;
next	1.6;

1.6
date	99.10.03.18.46.12;	author aaron;	state Exp;
branches;
next	1.5;

1.5
date	99.10.02.13.10.26;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	99.10.01.22.23.48;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	99.09.29.18.16.21;	author dugsong;	state Exp;
branches;
next	1.2;

1.2
date	99.09.26.22.30.06;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	99.09.26.20.53.38;	author deraadt;	state Exp;
branches;
next	;

1.51.2.1
date	2000.06.12.02.37.38;	author jason;	state Exp;
branches;
next	1.51.2.2;

1.51.2.2
date	2000.09.01.18.23.24;	author jason;	state Exp;
branches;
next	1.51.2.3;

1.51.2.3
date	2000.11.08.21.31.31;	author jason;	state Exp;
branches;
next	1.51.2.4;

1.51.2.4
date	2001.03.12.15.44.17;	author jason;	state Exp;
branches;
next	1.51.2.5;

1.51.2.5
date	2001.03.21.18.53.16;	author jason;	state Exp;
branches;
next	;

1.70.2.1
date	2001.02.16.20.13.22;	author jason;	state Exp;
branches;
next	1.70.2.2;

1.70.2.2
date	2001.02.19.17.19.38;	author jason;	state Exp;
branches;
next	1.70.2.3;

1.70.2.3
date	2001.03.21.19.46.31;	author jason;	state Exp;
branches;
next	1.70.2.4;

1.70.2.4
date	2001.05.07.21.09.37;	author jason;	state Exp;
branches;
next	1.70.2.5;

1.70.2.5
date	2001.09.27.00.15.43;	author miod;	state Exp;
branches;
next	1.70.2.6;

1.70.2.6
date	2001.11.15.00.15.00;	author miod;	state Exp;
branches;
next	1.70.2.7;

1.70.2.7
date	2001.11.15.22.50.30;	author miod;	state Exp;
branches;
next	1.70.2.8;

1.70.2.8
date	2002.03.08.17.04.43;	author brad;	state Exp;
branches;
next	;

1.120.2.1
date	2001.09.27.19.03.55;	author jason;	state Exp;
branches;
next	1.120.2.2;

1.120.2.2
date	2001.11.15.00.15.19;	author miod;	state Exp;
branches;
next	1.120.2.3;

1.120.2.3
date	2001.11.15.22.51.15;	author miod;	state Exp;
branches;
next	1.120.2.4;

1.120.2.4
date	2001.12.03.00.36.34;	author miod;	state Exp;
branches;
next	1.120.2.5;

1.120.2.5
date	2002.03.09.00.20.45;	author miod;	state Exp;
branches;
next	1.120.2.6;

1.120.2.6
date	2002.06.02.22.56.11;	author miod;	state Exp;
branches;
next	;

1.153.2.1
date	2001.11.14.03.24.39;	author jason;	state Exp;
branches;
next	1.153.2.2;

1.153.2.2
date	2001.12.05.19.31.48;	author jason;	state Exp;
branches;
next	1.153.2.3;

1.153.2.3
date	2002.03.07.17.37.48;	author jason;	state Exp;
branches;
next	1.153.2.4;

1.153.2.4
date	2002.03.08.15.17.18;	author brad;	state Exp;
branches;
next	1.153.2.5;

1.153.2.5
date	2002.05.17.00.03.24;	author miod;	state Exp;
branches;
next	1.153.2.6;

1.153.2.6
date	2002.06.22.07.23.18;	author miod;	state Exp;
branches;
next	1.153.2.7;

1.153.2.7
date	2002.06.26.18.22.36;	author miod;	state Exp;
branches;
next	1.153.2.8;

1.153.2.8
date	2002.10.11.14.53.07;	author miod;	state Exp;
branches;
next	;

1.176.2.1
date	2002.05.18.04.12.11;	author jason;	state Exp;
branches;
next	1.176.2.2;

1.176.2.2
date	2002.05.18.04.50.38;	author jason;	state Exp;
branches;
next	1.176.2.3;

1.176.2.3
date	2002.06.22.04.33.15;	author jason;	state Exp;
branches;
next	1.176.2.4;

1.176.2.4
date	2002.06.26.15.30.39;	author jason;	state Exp;
branches;
next	1.176.2.5;

1.176.2.5
date	2002.10.11.14.51.53;	author miod;	state Exp;
branches;
next	1.176.2.6;

1.176.2.6
date	2003.04.03.22.35.18;	author miod;	state Exp;
branches;
next	;

1.193.2.1
date	2003.04.01.00.12.14;	author margarida;	state Exp;
branches;
next	1.193.2.2;

1.193.2.2
date	2003.09.16.21.20.29;	author brad;	state Exp;
branches;
next	;

1.194.2.1
date	2003.09.16.20.50.44;	author brad;	state Exp;
branches;
next	1.194.2.2;

1.194.2.2
date	2004.03.04.18.18.17;	author brad;	state Exp;
branches;
next	;

1.199.2.1
date	2004.02.28.03.51.34;	author brad;	state Exp;
branches;
next	1.199.2.2;

1.199.2.2
date	2004.08.19.22.37.33;	author brad;	state Exp;
branches;
next	;

1.200.2.1
date	2004.08.19.04.13.28;	author brad;	state Exp;
branches;
next	1.200.2.2;

1.200.2.2
date	2005.03.10.17.15.05;	author brad;	state Exp;
branches;
next	;

1.202.2.1
date	2005.03.10.16.28.28;	author brad;	state Exp;
branches;
next	1.202.2.2;

1.202.2.2
date	2005.09.02.03.45.01;	author brad;	state Exp;
branches;
next	;

1.206.2.1
date	2005.09.04.18.40.11;	author brad;	state Exp;
branches;
next	1.206.2.2;

1.206.2.2
date	2006.02.03.02.53.45;	author brad;	state Exp;
branches;
next	;

1.208.2.1
date	2006.02.03.03.01.58;	author brad;	state Exp;
branches;
next	1.208.2.2;

1.208.2.2
date	2006.10.06.03.19.33;	author brad;	state Exp;
branches;
next	;

1.230.2.1
date	2006.09.30.04.06.51;	author brad;	state Exp;
branches;
next	;


desc
@@


1.291
log
@word fix;
@
text
@.\"
.\" Author: Tatu Ylonen <ylo@@cs.hut.fi>
.\" Copyright (c) 1995 Tatu Ylonen <ylo@@cs.hut.fi>, Espoo, Finland
.\"                    All rights reserved
.\"
.\" As far as I am concerned, the code I have written for this software
.\" can be used freely for any purpose.  Any derived versions of this
.\" software must be clearly marked as such, and if the derived work is
.\" incompatible with the protocol description in the RFC file, it must be
.\" called by a name other than "ssh" or "Secure Shell".
.\"
.\" Copyright (c) 1999,2000 Markus Friedl.  All rights reserved.
.\" Copyright (c) 1999 Aaron Campbell.  All rights reserved.
.\" Copyright (c) 1999 Theo de Raadt.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.\" $OpenBSD: sshd.8,v 1.290 2017/06/24 05:35:05 djm Exp $
.Dd $Mdocdate: June 24 2017 $
.Dt SSHD 8
.Os
.Sh NAME
.Nm sshd
.Nd OpenSSH SSH daemon
.Sh SYNOPSIS
.Nm sshd
.Bk -words
.Op Fl 46DdeiqTt
.Op Fl C Ar connection_spec
.Op Fl c Ar host_certificate_file
.Op Fl E Ar log_file
.Op Fl f Ar config_file
.Op Fl g Ar login_grace_time
.Op Fl h Ar host_key_file
.Op Fl o Ar option
.Op Fl p Ar port
.Op Fl u Ar len
.Ek
.Sh DESCRIPTION
.Nm
(OpenSSH Daemon) is the daemon program for
.Xr ssh 1 .
Together these programs replace rlogin and rsh,
and provide secure encrypted communications between two untrusted hosts
over an insecure network.
.Pp
.Nm
listens for connections from clients.
It is normally started at boot from
.Pa /etc/rc .
It forks a new
daemon for each incoming connection.
The forked daemons handle
key exchange, encryption, authentication, command execution,
and data exchange.
.Pp
.Nm
can be configured using command-line options or a configuration file
(by default
.Xr sshd_config 5 ) ;
command-line options override values specified in the
configuration file.
.Nm
rereads its configuration file when it receives a hangup signal,
.Dv SIGHUP ,
by executing itself with the name and options it was started with, e.g.\&
.Pa /usr/sbin/sshd .
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl 4
Forces
.Nm
to use IPv4 addresses only.
.It Fl 6
Forces
.Nm
to use IPv6 addresses only.
.It Fl C Ar connection_spec
Specify the connection parameters to use for the
.Fl T
extended test mode.
If provided, any
.Cm Match
directives in the configuration file
that would apply to the specified user, host, and address will be set before
the configuration is written to standard output.
The connection parameters are supplied as keyword=value pairs.
The keywords are
.Dq user ,
.Dq host ,
.Dq laddr ,
.Dq lport ,
and
.Dq addr .
All are required and may be supplied in any order, either with multiple
.Fl C
options or as a comma-separated list.
.It Fl c Ar host_certificate_file
Specifies a path to a certificate file to identify
.Nm
during key exchange.
The certificate file must match a host key file specified using the
.Fl h
option or the
.Cm HostKey
configuration directive.
.It Fl D
When this option is specified,
.Nm
will not detach and does not become a daemon.
This allows easy monitoring of
.Nm sshd .
.It Fl d
Debug mode.
The server sends verbose debug output to standard error,
and does not put itself in the background.
The server also will not fork and will only process one connection.
This option is only intended for debugging for the server.
Multiple
.Fl d
options increase the debugging level.
Maximum is 3.
.It Fl E Ar log_file
Append debug logs to
.Ar log_file
instead of the system log.
.It Fl e
Write debug logs to standard error instead of the system log.
.It Fl f Ar config_file
Specifies the name of the configuration file.
The default is
.Pa /etc/ssh/sshd_config .
.Nm
refuses to start if there is no configuration file.
.It Fl g Ar login_grace_time
Gives the grace time for clients to authenticate themselves (default
120 seconds).
If the client fails to authenticate the user within
this many seconds, the server disconnects and exits.
A value of zero indicates no limit.
.It Fl h Ar host_key_file
Specifies a file from which a host key is read.
This option must be given if
.Nm
is not run as root (as the normal
host key files are normally not readable by anyone but root).
The default is
.Pa /etc/ssh/ssh_host_dsa_key ,
.Pa /etc/ssh/ssh_host_ecdsa_key ,
.Pa /etc/ssh/ssh_host_ed25519_key
and
.Pa /etc/ssh/ssh_host_rsa_key .
It is possible to have multiple host key files for
the different host key algorithms.
.It Fl i
Specifies that
.Nm
is being run from
.Xr inetd 8 .
.It Fl o Ar option
Can be used to give options in the format used in the configuration file.
This is useful for specifying options for which there is no separate
command-line flag.
For full details of the options, and their values, see
.Xr sshd_config 5 .
.It Fl p Ar port
Specifies the port on which the server listens for connections
(default 22).
Multiple port options are permitted.
Ports specified in the configuration file with the
.Cm Port
option are ignored when a command-line port is specified.
Ports specified using the
.Cm ListenAddress
option override command-line ports.
.It Fl q
Quiet mode.
Nothing is sent to the system log.
Normally the beginning,
authentication, and termination of each connection is logged.
.It Fl T
Extended test mode.
Check the validity of the configuration file, output the effective configuration
to stdout and then exit.
Optionally,
.Cm Match
rules may be applied by specifying the connection parameters using one or more
.Fl C
options.
.It Fl t
Test mode.
Only check the validity of the configuration file and sanity of the keys.
This is useful for updating
.Nm
reliably as configuration options may change.
.It Fl u Ar len
This option is used to specify the size of the field
in the
.Li utmp
structure that holds the remote host name.
If the resolved host name is longer than
.Ar len ,
the dotted decimal value will be used instead.
This allows hosts with very long host names that
overflow this field to still be uniquely identified.
Specifying
.Fl u0
indicates that only dotted decimal addresses
should be put into the
.Pa utmp
file.
.Fl u0
may also be used to prevent
.Nm
from making DNS requests unless the authentication
mechanism or configuration requires it.
Authentication mechanisms that may require DNS include
.Cm HostbasedAuthentication
and using a
.Cm from="pattern-list"
option in a key file.
Configuration options that require DNS include using a
USER@@HOST pattern in
.Cm AllowUsers
or
.Cm DenyUsers .
.El
.Sh AUTHENTICATION
The OpenSSH SSH daemon supports SSH protocol 2 only.
Each host has a host-specific key,
used to identify the host.
Whenever a client connects, the daemon responds with its public
host key.
The client compares the
host key against its own database to verify that it has not changed.
Forward security is provided through a Diffie-Hellman key agreement.
This key agreement results in a shared session key.
The rest of the session is encrypted using a symmetric cipher, currently
128-bit AES, Blowfish, 3DES, CAST128, Arcfour, 192-bit AES, or 256-bit AES.
The client selects the encryption algorithm
to use from those offered by the server.
Additionally, session integrity is provided
through a cryptographic message authentication code
(hmac-md5, hmac-sha1, umac-64, umac-128,
hmac-sha2-256 or hmac-sha2-512).
.Pp
Finally, the server and the client enter an authentication dialog.
The client tries to authenticate itself using
host-based authentication,
public key authentication,
challenge-response authentication,
or password authentication.
.Pp
If the client successfully authenticates itself, a dialog for
preparing the session is entered.
At this time the client may request
things like allocating a pseudo-tty, forwarding X11 connections,
forwarding TCP connections, or forwarding the authentication agent
connection over the secure channel.
.Pp
After this, the client either requests a shell or execution of a command.
The sides then enter session mode.
In this mode, either side may send
data at any time, and such data is forwarded to/from the shell or
command on the server side, and the user terminal in the client side.
.Pp
When the user program terminates and all forwarded X11 and other
connections have been closed, the server sends command exit status to
the client, and both sides exit.
.Sh LOGIN PROCESS
When a user successfully logs in,
.Nm
does the following:
.Bl -enum -offset indent
.It
If the login is on a tty, and no command has been specified,
prints last login time and
.Pa /etc/motd
(unless prevented in the configuration file or by
.Pa ~/.hushlogin ;
see the
.Sx FILES
section).
.It
If the login is on a tty, records login time.
.It
Checks
.Pa /etc/nologin ;
if it exists, prints contents and quits
(unless root).
.It
Changes to run with normal user privileges.
.It
Sets up basic environment.
.It
Reads the file
.Pa ~/.ssh/environment ,
if it exists, and users are allowed to change their environment.
See the
.Cm PermitUserEnvironment
option in
.Xr sshd_config 5 .
.It
Changes to user's home directory.
.It
If
.Pa ~/.ssh/rc
exists and the
.Xr sshd_config 5
.Cm PermitUserRC
option is set, runs it; else if
.Pa /etc/ssh/sshrc
exists, runs
it; otherwise runs xauth.
The
.Dq rc
files are given the X11
authentication protocol and cookie in standard input.
See
.Sx SSHRC ,
below.
.It
Runs user's shell or command.
All commands are run under the user's login shell as specified in the
system password database.
.El
.Sh SSHRC
If the file
.Pa ~/.ssh/rc
exists,
.Xr sh 1
runs it after reading the
environment files but before starting the user's shell or command.
It must not produce any output on stdout; stderr must be used
instead.
If X11 forwarding is in use, it will receive the "proto cookie" pair in
its standard input (and
.Ev DISPLAY
in its environment).
The script must call
.Xr xauth 1
because
.Nm
will not run xauth automatically to add X11 cookies.
.Pp
The primary purpose of this file is to run any initialization routines
which may be needed before the user's home directory becomes
accessible; AFS is a particular example of such an environment.
.Pp
This file will probably contain some initialization code followed by
something similar to:
.Bd -literal -offset 3n
if read proto cookie && [ -n "$DISPLAY" ]; then
	if [ `echo $DISPLAY | cut -c1-10` = 'localhost:' ]; then
		# X11UseLocalhost=yes
		echo add unix:`echo $DISPLAY |
		    cut -c11-` $proto $cookie
	else
		# X11UseLocalhost=no
		echo add $DISPLAY $proto $cookie
	fi | xauth -q -
fi
.Ed
.Pp
If this file does not exist,
.Pa /etc/ssh/sshrc
is run, and if that
does not exist either, xauth is used to add the cookie.
.Sh AUTHORIZED_KEYS FILE FORMAT
.Cm AuthorizedKeysFile
specifies the files containing public keys for
public key authentication;
if this option is not specified, the default is
.Pa ~/.ssh/authorized_keys
and
.Pa ~/.ssh/authorized_keys2 .
Each line of the file contains one
key (empty lines and lines starting with a
.Ql #
are ignored as
comments).
Public keys consist of the following space-separated fields:
options, keytype, base64-encoded key, comment.
The options field is optional.
The keytype is
.Dq ecdsa-sha2-nistp256 ,
.Dq ecdsa-sha2-nistp384 ,
.Dq ecdsa-sha2-nistp521 ,
.Dq ssh-ed25519 ,
.Dq ssh-dss
or
.Dq ssh-rsa ;
the comment field is not used for anything (but may be convenient for the
user to identify the key).
.Pp
Note that lines in this file can be several hundred bytes long
(because of the size of the public key encoding) up to a limit of
8 kilobytes, which permits DSA keys up to 8 kilobits and RSA
keys up to 16 kilobits.
You don't want to type them in; instead, copy the
.Pa id_dsa.pub ,
.Pa id_ecdsa.pub ,
.Pa id_ed25519.pub ,
or the
.Pa id_rsa.pub
file and edit it.
.Pp
.Nm
enforces a minimum RSA key modulus size of 768 bits.
.Pp
The options (if present) consist of comma-separated option
specifications.
No spaces are permitted, except within double quotes.
The following option specifications are supported (note
that option keywords are case-insensitive):
.Bl -tag -width Ds
.It Cm agent-forwarding
Enable authentication agent forwarding previously disabled by the
.Cm restrict
option.
.It Cm cert-authority
Specifies that the listed key is a certification authority (CA) that is
trusted to validate signed certificates for user authentication.
.Pp
Certificates may encode access restrictions similar to these key options.
If both certificate restrictions and key options are present, the most
restrictive union of the two is applied.
.It Cm command="command"
Specifies that the command is executed whenever this key is used for
authentication.
The command supplied by the user (if any) is ignored.
The command is run on a pty if the client requests a pty;
otherwise it is run without a tty.
If an 8-bit clean channel is required,
one must not request a pty or should specify
.Cm no-pty .
A quote may be included in the command by quoting it with a backslash.
.Pp
This option might be useful
to restrict certain public keys to perform just a specific operation.
An example might be a key that permits remote backups but nothing else.
Note that the client may specify TCP and/or X11
forwarding unless they are explicitly prohibited, e.g. using the
.Cm restrict
key option.
.Pp
The command originally supplied by the client is available in the
.Ev SSH_ORIGINAL_COMMAND
environment variable.
Note that this option applies to shell, command or subsystem execution.
Also note that this command may be superseded by a
.Xr sshd_config 5
.Cm ForceCommand
directive.
.Pp
If a command is specified and a forced-command is embedded in a certificate
used for authentication, then the certificate will be accepted only if the
two commands are identical.
.It Cm environment="NAME=value"
Specifies that the string is to be added to the environment when
logging in using this key.
Environment variables set this way
override other default environment values.
Multiple options of this type are permitted.
Environment processing is disabled by default and is
controlled via the
.Cm PermitUserEnvironment
option.
.It Cm from="pattern-list"
Specifies that in addition to public key authentication, either the canonical
name of the remote host or its IP address must be present in the
comma-separated list of patterns.
See PATTERNS in
.Xr ssh_config 5
for more information on patterns.
.Pp
In addition to the wildcard matching that may be applied to hostnames or
addresses, a
.Cm from
stanza may match IP addresses using CIDR address/masklen notation.
.Pp
The purpose of this option is to optionally increase security: public key
authentication by itself does not trust the network or name servers or
anything (but the key); however, if somebody somehow steals the key, the key
permits an intruder to log in from anywhere in the world.
This additional option makes using a stolen key more difficult (name
servers and/or routers would have to be compromised in addition to
just the key).
.It Cm no-agent-forwarding
Forbids authentication agent forwarding when this key is used for
authentication.
.It Cm no-port-forwarding
Forbids TCP forwarding when this key is used for authentication.
Any port forward requests by the client will return an error.
This might be used, e.g. in connection with the
.Cm command
option.
.It Cm no-pty
Prevents tty allocation (a request to allocate a pty will fail).
.It Cm no-user-rc
Disables execution of
.Pa ~/.ssh/rc .
.It Cm no-X11-forwarding
Forbids X11 forwarding when this key is used for authentication.
Any X11 forward requests by the client will return an error.
.It Cm permitopen="host:port"
Limit local port forwarding with
.Xr ssh 1
.Fl L
such that it may only connect to the specified host and port.
IPv6 addresses can be specified by enclosing the address in square brackets.
Multiple
.Cm permitopen
options may be applied separated by commas.
No pattern matching is performed on the specified hostnames,
they must be literal domains or addresses.
A port specification of
.Cm *
matches any port.
.It Cm port-forwarding
Enable port forwarding previously disabled by the
.Cm restrict
.It Cm principals="principals"
On a
.Cm cert-authority
line, specifies allowed principals for certificate authentication as a
comma-separated list.
At least one name from the list must appear in the certificate's
list of principals for the certificate to be accepted.
This option is ignored for keys that are not marked as trusted certificate
signers using the
.Cm cert-authority
option.
.It Cm pty
Permits tty allocation previously disabled by the
.Cm restrict
option.
.It Cm restrict
Enable all restrictions, i.e. disable port, agent and X11 forwarding,
as well as disabling PTY allocation
and execution of
.Pa ~/.ssh/rc .
If any future restriction capabilities are added to authorized_keys files
they will be included in this set.
.It Cm tunnel="n"
Force a
.Xr tun 4
device on the server.
Without this option, the next available device will be used if
the client requests a tunnel.
.It Cm user-rc
Enables execution of
.Pa ~/.ssh/rc
previously disabled by the
.Cm restrict
option.
.It Cm X11-forwarding
Permits X11 forwarding previously disabled by the
.Cm restrict
option.
.El
.Pp
An example authorized_keys file:
.Bd -literal -offset 3n
# Comments allowed at start of line
ssh-rsa AAAAB3Nza...LiPk== user@@example.net
from="*.sales.example.net,!pc.sales.example.net" ssh-rsa
AAAAB2...19Q== john@@example.net
command="dump /home",no-pty,no-port-forwarding ssh-dss
AAAAC3...51R== example.net
permitopen="192.0.2.1:80",permitopen="192.0.2.2:25" ssh-dss
AAAAB5...21S==
tunnel="0",command="sh /etc/netstart tun0" ssh-rsa AAAA...==
jane@@example.net
restrict,command="uptime" ssh-rsa AAAA1C8...32Tv==
user@@example.net
restrict,pty,command="nethack" ssh-rsa AAAA1f8...IrrC5==
user@@example.net
.Ed
.Sh SSH_KNOWN_HOSTS FILE FORMAT
The
.Pa /etc/ssh/ssh_known_hosts
and
.Pa ~/.ssh/known_hosts
files contain host public keys for all known hosts.
The global file should
be prepared by the administrator (optional), and the per-user file is
maintained automatically: whenever the user connects to an unknown host,
its key is added to the per-user file.
.Pp
Each line in these files contains the following fields: markers (optional),
hostnames, keytype, base64-encoded key, comment.
The fields are separated by spaces.
.Pp
The marker is optional, but if it is present then it must be one of
.Dq @@cert-authority ,
to indicate that the line contains a certification authority (CA) key,
or
.Dq @@revoked ,
to indicate that the key contained on the line is revoked and must not ever
be accepted.
Only one marker should be used on a key line.
.Pp
Hostnames is a comma-separated list of patterns
.Pf ( Ql *
and
.Ql \&?
act as
wildcards); each pattern in turn is matched against the host name.
When
.Nm sshd
is authenticating a client, such as when using
.Cm HostbasedAuthentication ,
this will be the canonical client host name.
When
.Xr ssh 1
is authenticating a server, this will be the host name
given by the user, the value of the
.Xr ssh 1
.Cm HostkeyAlias
if it was specified, or the canonical server hostname if the
.Xr ssh 1
.Cm CanonicalizeHostname
option was used.
.Pp
A pattern may also be preceded by
.Ql \&!
to indicate negation: if the host name matches a negated
pattern, it is not accepted (by that line) even if it matched another
pattern on the line.
A hostname or address may optionally be enclosed within
.Ql \&[
and
.Ql \&]
brackets then followed by
.Ql \&:
and a non-standard port number.
.Pp
Alternately, hostnames may be stored in a hashed form which hides host names
and addresses should the file's contents be disclosed.
Hashed hostnames start with a
.Ql |
character.
Only one hashed hostname may appear on a single line and none of the above
negation or wildcard operators may be applied.
.Pp
The keytype and base64-encoded key are taken directly from the host key; they
can be obtained, for example, from
.Pa /etc/ssh/ssh_host_rsa_key.pub .
The optional comment field continues to the end of the line, and is not used.
.Pp
Lines starting with
.Ql #
and empty lines are ignored as comments.
.Pp
When performing host authentication, authentication is accepted if any
matching line has the proper key; either one that matches exactly or,
if the server has presented a certificate for authentication, the key
of the certification authority that signed the certificate.
For a key to be trusted as a certification authority, it must use the
.Dq @@cert-authority
marker described above.
.Pp
The known hosts file also provides a facility to mark keys as revoked,
for example when it is known that the associated private key has been
stolen.
Revoked keys are specified by including the
.Dq @@revoked
marker at the beginning of the key line, and are never accepted for
authentication or as certification authorities, but instead will
produce a warning from
.Xr ssh 1
when they are encountered.
.Pp
It is permissible (but not
recommended) to have several lines or different host keys for the same
names.
This will inevitably happen when short forms of host names
from different domains are put in the file.
It is possible
that the files contain conflicting information; authentication is
accepted if valid information can be found from either file.
.Pp
Note that the lines in these files are typically hundreds of characters
long, and you definitely don't want to type in the host keys by hand.
Rather, generate them by a script,
.Xr ssh-keyscan 1
or by taking, for example,
.Pa /etc/ssh/ssh_host_rsa_key.pub
and adding the host names at the front.
.Xr ssh-keygen 1
also offers some basic automated editing for
.Pa ~/.ssh/known_hosts
including removing hosts matching a host name and converting all host
names to their hashed representations.
.Pp
An example ssh_known_hosts file:
.Bd -literal -offset 3n
# Comments allowed at start of line
closenet,...,192.0.2.53 1024 37 159...93 closenet.example.net
cvs.example.net,192.0.2.10 ssh-rsa AAAA1234.....=
# A hashed hostname
|1|JfKTdBh7rNbXkVAQCRp4OQoPfmI=|USECr3SWf1JUPsms5AqfD5QfxkM= ssh-rsa
AAAA1234.....=
# A revoked key
@@revoked * ssh-rsa AAAAB5W...
# A CA key, accepted for any host in *.mydomain.com or *.mydomain.org
@@cert-authority *.mydomain.org,*.mydomain.com ssh-rsa AAAAB5W...
.Ed
.Sh FILES
.Bl -tag -width Ds -compact
.It Pa ~/.hushlogin
This file is used to suppress printing the last login time and
.Pa /etc/motd ,
if
.Cm PrintLastLog
and
.Cm PrintMotd ,
respectively,
are enabled.
It does not suppress printing of the banner specified by
.Cm Banner .
.Pp
.It Pa ~/.rhosts
This file is used for host-based authentication (see
.Xr ssh 1
for more information).
On some machines this file may need to be
world-readable if the user's home directory is on an NFS partition,
because
.Nm
reads it as root.
Additionally, this file must be owned by the user,
and must not have write permissions for anyone else.
The recommended
permission for most machines is read/write for the user, and not
accessible by others.
.Pp
.It Pa ~/.shosts
This file is used in exactly the same way as
.Pa .rhosts ,
but allows host-based authentication without permitting login with
rlogin/rsh.
.Pp
.It Pa ~/.ssh/
This directory is the default location for all user-specific configuration
and authentication information.
There is no general requirement to keep the entire contents of this directory
secret, but the recommended permissions are read/write/execute for the user,
and not accessible by others.
.Pp
.It Pa ~/.ssh/authorized_keys
Lists the public keys (DSA, ECDSA, Ed25519, RSA)
that can be used for logging in as this user.
The format of this file is described above.
The content of the file is not highly sensitive, but the recommended
permissions are read/write for the user, and not accessible by others.
.Pp
If this file, the
.Pa ~/.ssh
directory, or the user's home directory are writable
by other users, then the file could be modified or replaced by unauthorized
users.
In this case,
.Nm
will not allow it to be used unless the
.Cm StrictModes
option has been set to
.Dq no .
.Pp
.It Pa ~/.ssh/environment
This file is read into the environment at login (if it exists).
It can only contain empty lines, comment lines (that start with
.Ql # ) ,
and assignment lines of the form name=value.
The file should be writable
only by the user; it need not be readable by anyone else.
Environment processing is disabled by default and is
controlled via the
.Cm PermitUserEnvironment
option.
.Pp
.It Pa ~/.ssh/known_hosts
Contains a list of host keys for all hosts the user has logged into
that are not already in the systemwide list of known host keys.
The format of this file is described above.
This file should be writable only by root/the owner and
can, but need not be, world-readable.
.Pp
.It Pa ~/.ssh/rc
Contains initialization routines to be run before
the user's home directory becomes accessible.
This file should be writable only by the user, and need not be
readable by anyone else.
.Pp
.It Pa /etc/hosts.equiv
This file is for host-based authentication (see
.Xr ssh 1 ) .
It should only be writable by root.
.Pp
.It Pa /etc/moduli
Contains Diffie-Hellman groups used for the "Diffie-Hellman Group Exchange"
key exchange method.
The file format is described in
.Xr moduli 5 .
If no usable groups are found in this file then fixed internal groups will
be used.
.Pp
.It Pa /etc/motd
See
.Xr motd 5 .
.Pp
.It Pa /etc/nologin
If this file exists,
.Nm
refuses to let anyone except root log in.
The contents of the file
are displayed to anyone trying to log in, and non-root connections are
refused.
The file should be world-readable.
.Pp
.It Pa /etc/shosts.equiv
This file is used in exactly the same way as
.Pa hosts.equiv ,
but allows host-based authentication without permitting login with
rlogin/rsh.
.Pp
.It Pa /etc/ssh/ssh_host_dsa_key
.It Pa /etc/ssh/ssh_host_ecdsa_key
.It Pa /etc/ssh/ssh_host_ed25519_key
.It Pa /etc/ssh/ssh_host_rsa_key
These files contain the private parts of the host keys.
These files should only be owned by root, readable only by root, and not
accessible to others.
Note that
.Nm
does not start if these files are group/world-accessible.
.Pp
.It Pa /etc/ssh/ssh_host_dsa_key.pub
.It Pa /etc/ssh/ssh_host_ecdsa_key.pub
.It Pa /etc/ssh/ssh_host_ed25519_key.pub
.It Pa /etc/ssh/ssh_host_rsa_key.pub
These files contain the public parts of the host keys.
These files should be world-readable but writable only by
root.
Their contents should match the respective private parts.
These files are not
really used for anything; they are provided for the convenience of
the user so their contents can be copied to known hosts files.
These files are created using
.Xr ssh-keygen 1 .
.Pp
.It Pa /etc/ssh/ssh_known_hosts
Systemwide list of known host keys.
This file should be prepared by the
system administrator to contain the public host keys of all machines in the
organization.
The format of this file is described above.
This file should be writable only by root/the owner and
should be world-readable.
.Pp
.It Pa /etc/ssh/sshd_config
Contains configuration data for
.Nm sshd .
The file format and configuration options are described in
.Xr sshd_config 5 .
.Pp
.It Pa /etc/ssh/sshrc
Similar to
.Pa ~/.ssh/rc ,
it can be used to specify
machine-specific login-time initializations globally.
This file should be writable only by root, and should be world-readable.
.Pp
.It Pa /var/empty
.Xr chroot 2
directory used by
.Nm
during privilege separation in the pre-authentication phase.
The directory should not contain any files and must be owned by root
and not group or world-writable.
.Pp
.It Pa /var/run/sshd.pid
Contains the process ID of the
.Nm
listening for connections (if there are several daemons running
concurrently for different ports, this contains the process ID of the one
started last).
The content of this file is not sensitive; it can be world-readable.
.El
.Sh SEE ALSO
.Xr scp 1 ,
.Xr sftp 1 ,
.Xr ssh 1 ,
.Xr ssh-add 1 ,
.Xr ssh-agent 1 ,
.Xr ssh-keygen 1 ,
.Xr ssh-keyscan 1 ,
.Xr chroot 2 ,
.Xr login.conf 5 ,
.Xr moduli 5 ,
.Xr sshd_config 5 ,
.Xr inetd 8 ,
.Xr sftp-server 8
.Sh AUTHORS
OpenSSH is a derivative of the original and free
ssh 1.2.12 release by Tatu Ylonen.
Aaron Campbell, Bob Beck, Markus Friedl, Niels Provos,
Theo de Raadt and Dug Song
removed many bugs, re-added newer features and
created OpenSSH.
Markus Friedl contributed the support for SSH
protocol versions 1.5 and 2.0.
Niels Provos and Markus Friedl contributed support
for privilege separation.
@


1.290
log
@use HostKeyAlias if specified instead of hostname for matching host
certificate principal names; bz#2728; ok dtucker@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd.8,v 1.289 2017/05/07 23:12:57 djm Exp $
.Dd $Mdocdate: May 7 2017 $
d636 1
a636 1
is authenticating a server, this will be the either the host name
@


1.289
log
@As promised in last release announcement: remove support for
Blowfish, RC4 and CAST ciphers. ok markus@@ deraadt@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd.8,v 1.288 2017/01/30 23:27:39 dtucker Exp $
.Dd $Mdocdate: January 30 2017 $
d628 17
a644 3
wildcards); each pattern in turn is matched against the canonical host
name (when authenticating a client) or against the user-supplied
name (when authenticating a server).
@


1.288
log
@Small correction to the known_hosts section on when it is updated.
Patch from lkppo at free.fr some time ago, pointed out by smallm at sdf.org
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd.8,v 1.287 2016/11/30 02:57:40 djm Exp $
.Dd $Mdocdate: November 30 2016 $
d263 1
a263 1
(hmac-md5, hmac-sha1, umac-64, umac-128, hmac-ripemd160,
@


1.287
log
@When a forced-command appears in both a certificate and an
authorized keys/principals command= restriction, refuse to accept
the certificate unless they are identical.

The previous (documented) behaviour of having the certificate forced-
command override the other could be a bit confused and more error-prone.

Pointed out by Jann Horn of Project Zero; ok dtucker@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd.8,v 1.286 2016/08/19 03:18:06 djm Exp $
.Dd $Mdocdate: August 19 2016 $
d607 1
a607 1
maintained automatically: whenever the user connects from an unknown host,
@


1.286
log
@remove UseLogin option and support for having /bin/login manage
login sessions; ok deraadt markus dtucker
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd.8,v 1.285 2016/08/15 12:32:04 naddy Exp $
.Dd $Mdocdate: August 15 2016 $
d457 1
d462 4
a465 1
forwarding unless they are explicitly prohibited.
d470 1
a470 1
Also note that this command may be superseded by either a
d473 5
a477 1
directive or a command embedded in a certificate.
@


1.285
log
@Catch up with the SSH1 code removal and delete all mention of
protocol 1 particularities, key files and formats, command line
options, and configuration keywords from the server documentation
and examples.  ok jmc@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd.8,v 1.284 2016/02/17 07:38:19 jmc Exp $
.Dd $Mdocdate: February 17 2016 $
a479 3
This option is automatically disabled if
.Cm UseLogin
is enabled.
@


1.284
log
@since these pages now clearly tell folks to avoid v1, normalise
the docs from a v2 perspective (i.e. stop pointing out which bits
are v2 only);

ok/tweaks djm ok markus
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd.8,v 1.283 2016/02/05 03:07:06 djm Exp $
.Dd $Mdocdate: February 5 2016 $
a46 1
.Op Fl b Ar bits
a52 1
.Op Fl k Ar key_gen_time
a96 3
.It Fl b Ar bits
Specifies the number of bits in the ephemeral protocol version 1
server key (default 1024).
a166 2
.Pa /etc/ssh/ssh_host_key
for protocol version 1, and
d168 1
a168 1
.Pa /etc/ssh/ssh_host_ecdsa_key .
d171 1
a171 2
.Pa /etc/ssh/ssh_host_rsa_key
for protocol version 2.
d173 1
a173 1
the different protocol versions and host key algorithms.
a178 15
If SSH protocol 1 is enabled,
.Nm
should not  normally be run
from inetd because it needs to generate the server key before it can
respond to the client, and this may take some time.
Clients may have to wait too long if the key was regenerated every time.
.It Fl k Ar key_gen_time
Specifies how often the ephemeral protocol version 1 server key is
regenerated (default 3600 seconds, or one hour).
The motivation for regenerating the key fairly
often is that the key is not stored anywhere, and after about an hour
it becomes impossible to recover the key for decrypting intercepted
communications even if the machine is cracked into or physically
seized.
A value of zero indicates that the key will never be regenerated.
d237 1
a237 2
.Cm RhostsRSAAuthentication ,
.Cm HostbasedAuthentication ,
d248 1
a248 9
The OpenSSH SSH daemon supports SSH protocols 1 and 2.
The default is to use protocol 2 only,
though this can be changed via the
.Cm Protocol
option in
.Xr sshd_config 5 .
Protocol 1 should not be used
and is only offered to support legacy devices.
.Pp
a250 6
Partial forward security for protocol 1 is provided through
an additional server key,
normally 1024 bits,
generated when the server starts.
This key is normally regenerated every hour if it has been used, and
is never stored on disk.
d252 1
a252 1
host and server keys.
d254 2
a255 16
RSA host key against its own database to verify that it has not changed.
The client then generates a 256-bit random number.
It encrypts this
random number using both the host key and the server key, and sends
the encrypted number to the server.
Both sides then use this
random number as a session key which is used to encrypt all further
communications in the session.
The rest of the session is encrypted
using a conventional cipher, currently Blowfish or 3DES, with 3DES
being used by default.
The client selects the encryption algorithm
to use from those offered by the server.
.Pp
For protocol 2,
forward security is provided through a Diffie-Hellman key agreement.
d401 1
a401 3
Protocol 1 public keys consist of the following space-separated fields:
options, bits, exponent, modulus, comment.
Protocol 2 public key consist of:
d403 2
a404 8
The options field is optional;
its presence is determined by whether the line starts
with a number or not (the options field never starts with a number).
The bits, exponent, modulus, and comment fields give the RSA key for
protocol version 1; the
comment field is not used for anything (but may be convenient for the
user to identify the key).
For protocol version 2 the keytype is
d411 3
a413 1
.Dq ssh-rsa .
d415 1
a415 1
Note that lines in this file are usually several hundred bytes long
a419 1
.Pa identity.pub ,
d428 1
a428 2
enforces a minimum RSA key modulus size for protocol 1
and protocol 2 keys of 768 bits.
d606 1
a606 1
hostnames, bits, exponent, modulus, comment.
d647 1
a647 1
Bits, exponent, and modulus are taken directly from the RSA host key; they
d649 1
a649 1
.Pa /etc/ssh/ssh_host_key.pub .
d688 2
a689 2
or by taking
.Pa /etc/ssh/ssh_host_key.pub
a827 1
.It Pa /etc/ssh/ssh_host_key
a838 1
.It Pa /etc/ssh/ssh_host_key.pub
@


1.283
log
@mention internal DH-GEX fallback groups; bz#2302
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd.8,v 1.282 2015/11/16 00:30:02 djm Exp $
.Dd $Mdocdate: November 16 2015 $
d278 4
a281 5
Protocol 2 supports DSA, ECDSA, Ed25519 and RSA keys;
protocol 1 only supports RSA keys.
For both protocols,
each host has a host-specific key,
normally 2048 bits,
d283 1
a283 2
.Pp
Forward security for protocol 1 is provided through
@


1.282
log
@Add a new authorized_keys option "restrict" that includes all current
and future key restrictions (no-*-forwarding, etc). Also add permissive
versions of the existing restrictions, e.g. "no-pty" -> "pty". This
simplifies the task of setting up restricted keys and ensures they are
maximally-restricted, regardless of any permissions we might implement
in the future.

Example:

restrict,pty,command="nethack" ssh-ed25519 AAAAC3NzaC1lZDI1...

Idea from Jann Horn; ok markus@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd.8,v 1.281 2015/09/11 03:13:36 djm Exp $
.Dd $Mdocdate: September 11 2015 $
d864 2
a865 1
Contains Diffie-Hellman groups used for the "Diffie-Hellman Group Exchange".
d868 2
@


1.281
log
@more clarity on what AuthorizedKeysFile=none does;
based on diff by Thiebaud Weksteen
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd.8,v 1.280 2015/07/03 03:49:45 djm Exp $
.Dd $Mdocdate: July 3 2015 $
d498 4
d596 3
d610 11
d627 10
d651 4
@


1.280
log
@refuse to generate or accept RSA keys smaller than 1024 bits;
feedback and ok dtucker@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd.8,v 1.279 2015/05/01 07:11:47 djm Exp $
.Dd $Mdocdate: May 1 2015 $
d446 1
a446 1
if none is specified, the default is
@


1.279
log
@mention that the user's shell from /etc/passwd is used for commands
too; bz#1459 ok dtucker@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd.8,v 1.278 2014/11/15 14:41:03 bentley Exp $
.Dd $Mdocdate: November 15 2014 $
d187 1
d189 1
a189 1
is normally not run
d191 2
a192 6
respond to the client, and this may take tens of seconds.
Clients would have to wait too long if the key was regenerated every time.
However, with small key sizes (e.g. 512) using
.Nm
from inetd may
be feasible.
d287 1
a287 1
normally 768 bits,
@


1.278
log
@Reduce instances of `` '' in manuals.

troff displays these as typographic quotes, but nroff implementations
almost always print them literally, which rarely has the intended effect
with modern fonts, even in stock xterm.

These uses of `` '' can be replaced either with more semantic alternatives
or with Dq, which prints typographic quotes in a UTF-8 locale (but will
automatically fall back to `` '' in an ASCII locale).

improvements and ok schwarze@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd.8,v 1.277 2014/08/30 15:33:50 sobrado Exp $
.Dd $Mdocdate: August 30 2014 $
d400 2
@


1.277
log
@improve capitalization for the Ed25519 public-key signature system.

ok djm@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd.8,v 1.276 2014/07/03 22:40:43 djm Exp $
.Dd $Mdocdate: July 3 2014 $
d580 4
a583 4
Limit local
.Li ``ssh -L''
port forwarding such that it may only connect to the specified host and
port.
@


1.276
log
@Add a sshd_config PermitUserRC option to control whether ~/.ssh/rc is
executed, mirroring the no-user-rc authorized_keys option;
bz#2160; ok markus@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd.8,v 1.275 2014/04/19 18:15:16 tedu Exp $
.Dd $Mdocdate: April 19 2014 $
d281 1
a281 1
Protocol 2 supports DSA, ECDSA, ED25519 and RSA keys;
d784 1
a784 1
Lists the public keys (DSA, ECDSA, ED25519, RSA)
@


1.275
log
@remove some really old rsh references
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd.8,v 1.274 2014/03/26 19:58:37 tedu Exp $
.Dd $Mdocdate: March 26 2014 $
d384 4
a387 1
exists, runs it; else if
@


1.274
log
@remove libwrap support. ok deraadt djm mfriedl
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd.8,v 1.273 2013/12/07 11:58:46 naddy Exp $
.Dd $Mdocdate: December 7 2013 $
d63 1
a63 4
Together these programs replace
.Xr rlogin 1
and
.Xr rsh 1 ,
a942 11
.Sh CAVEATS
System security is not improved unless
.Nm rshd ,
.Nm rlogind ,
and
.Nm rexecd
are disabled (thus completely disabling
.Xr rlogin
and
.Xr rsh
into the machine).
@


1.273
log
@add missing mentions of ed25519; ok djm@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd.8,v 1.272 2013/12/06 15:29:07 jmc Exp $
.Dd $Mdocdate: December 6 2013 $
a826 6
.It Pa /etc/hosts.allow
.It Pa /etc/hosts.deny
Access controls that should be enforced by tcp-wrappers are defined here.
Further details are described in
.Xr hosts_access 5 .
.Pp
a929 1
.Xr hosts_access 5 ,
@


1.272
log
@missing comma;
@
text
@d36 1
a36 1
.\" $OpenBSD: sshd.8,v 1.271 2013/12/06 13:39:49 markus Exp $
d178 2
a179 1
.Pa /etc/ssh/ssh_host_ecdsa_key
d284 1
a284 1
Protocol 2 supports DSA, ECDSA and RSA keys;
d484 1
d784 2
a785 2
Lists the public keys (DSA/ECDSA/RSA) that can be used for logging in
as this user.
d865 1
d877 1
@


1.271
log
@support ed25519 keys (hostkeys and user identities) using the public domain
ed25519 reference code from SUPERCOP, see http://ed25519.cr.yp.to/software.html
feedback, help & ok djm@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd.8,v 1.270 2013/06/27 14:05:37 jmc Exp $
.Dd $Mdocdate: June 27 2013 $
d470 1
a470 1
.Dq ssh-ed25519
@


1.270
log
@do not use Sx for sections outwith the man page - ingo informs me that
stuff like html will render with broken links;

issue reported by Eric S. Raymond, via djm
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd.8,v 1.269 2013/04/07 09:40:27 dtucker Exp $
.Dd $Mdocdate: April 7 2013 $
d470 1
@


1.269
log
@clarify -e text. suggested by & ok jmc@@
@
text
@d36 1
a36 1
.\" $OpenBSD: sshd.8,v 1.268 2013/04/07 02:10:33 dtucker Exp $
d543 1
a543 3
See
.Sx PATTERNS
in
@


1.268
log
@Add -E option to ssh and sshd to append debugging logs to a specified file
instead of stderr or syslog.  ok markus@@, man page help jmc@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd.8,v 1.267 2012/10/04 13:21:50 markus Exp $
.Dd $Mdocdate: October 4 2012 $
d155 1
a155 3
When this option is specified,
.Nm
will send the output to the standard error instead of the system log.
@


1.267
log
@add umac128 variant; ok djm@@ at n2k12
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd.8,v 1.266 2012/06/18 12:07:07 dtucker Exp $
.Dd $Mdocdate: June 18 2012 $
d50 1
d150 4
@


1.266
log
@Remove mention of 'three' key files since there are now four.  From
Steve.McClellan at radisys com.
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd.8,v 1.265 2012/05/13 01:42:32 dtucker Exp $
.Dd $Mdocdate: May 13 2012 $
d319 1
a319 1
(hmac-md5, hmac-sha1, umac-64, hmac-ripemd160,
@


1.265
log
@Add "Match LocalAddress" and "Match LocalPort" to sshd and adjust tests
to match.  Feedback and ok djm@@ markus@@.
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd.8,v 1.264 2011/09/23 00:22:04 dtucker Exp $
.Dd $Mdocdate: September 23 2011 $
d862 1
a862 1
These three files contain the private parts of the host keys.
d873 1
a873 1
These three files contain the public parts of the host keys.
@


1.264
log
@Add wildcard support to PermitOpen, allowing things like "PermitOpen
localhost:*".  bz #1857, ok djm markus.
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd.8,v 1.263 2011/08/02 01:22:11 djm Exp $
.Dd $Mdocdate: August 2 2011 $
d117 2
@


1.263
log
@Add new SHA256 and SHA512 based HMAC modes from
http://www.ietf.org/id/draft-dbider-sha2-mac-for-ssh-02.txt

feedback and ok markus@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd.8,v 1.262 2011/05/23 07:10:21 jmc Exp $
.Dd $Mdocdate: May 23 2011 $
d584 3
@


1.262
log
@tweak previous; ok djm
@
text
@d36 1
a36 1
.\" $OpenBSD: sshd.8,v 1.261 2011/05/23 03:30:07 djm Exp $
d317 2
a318 1
(hmac-md5, hmac-sha1, umac-64 or hmac-ripemd160).
@


1.261
log
@allow AuthorizedKeysFile to specify multiple files, separated by spaces.
Bring back authorized_keys2 as a default search path (to avoid breaking
existing users of this file), but override this in sshd_config so it will
be no longer used on fresh installs. Maybe in 2015 we can remove it
entierly :)

feedback and ok markus@@ dtucker@@
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd.8,v 1.260 2010/10/28 18:33:28 jmc Exp $
.Dd $Mdocdate: October 28 2010 $
d438 1
a438 1
specifies the file or files containing public keys for
d440 1
a440 1
if none is specified, the default is both
@


1.260
log
@knock out some "-*- nroff -*-" lines;
@
text
@d36 2
a37 2
.\" $OpenBSD: sshd.8,v 1.259 2010/08/31 11:54:45 djm Exp $
.Dd $Mdocdate: August 31 2010 $
d438 1
a438 1
specifies the file containing public keys for
d440 4
a443 2
if none is specified, the default is
.Pa ~/.ssh/authorized_keys .
@


1.259
log
@Implement Elliptic Curve Cryptography modes for key exchange (ECDH) and
host/user keys (ECDSA) as specified by RFC5656. ECDH and ECDSA offer
better performance than plain DH and DSA at the same equivalent symmetric
key length, as well as much shorter keys.

Only the mandatory sections of RFC5656 are implemented, specifically the
three REQUIRED curves nistp256, nistp384 and nistp521 and only ECDH and
ECDSA. Point compression (optional in RFC5656 is NOT implemented).

Certificate host and user keys using the new ECDSA key types are supported.

Note that this code has not been tested for interoperability and may be
subject to change.

feedback and ok markus@@
@
text
@a0 1
.\"  -*- nroff -*-
d36 2
a37 2
.\" $OpenBSD: sshd.8,v 1.258 2010/08/08 19:36:30 jmc Exp $
.Dd $Mdocdate: August 8 2010 $
@


1.258
log
@use the same template for all FILES sections; i.e. -compact/.Pp where we
have multiple items, and .Pa for path names;
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd.8,v 1.257 2010/08/04 05:37:01 djm Exp $
.Dd $Mdocdate: August 4 2010 $
d173 3
a176 2
and
.Pa /etc/ssh/ssh_host_dsa_key
d279 1
a279 1
Protocol 2 supports both RSA and DSA keys;
d460 3
d474 1
d773 2
a774 1
Lists the public keys (RSA/DSA) that can be used for logging in as this user.
d853 1
d864 1
@


1.257
log
@Remove mentions of weird "addr/port" alternate address format for IPv6
addresses combinations. It hasn't worked for ages and we have supported
the more commen "[addr]:port" format for a long time. ok jmc@@ markus@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd.8,v 1.256 2010/05/07 11:30:30 djm Exp $
.Dd $Mdocdate: May 7 2010 $
d727 1
a727 1
.It ~/.hushlogin
d739 1
a739 1
.It ~/.rhosts
d754 1
a754 1
.It ~/.shosts
d760 1
a760 1
.It ~/.ssh/
d767 1
a767 1
.It ~/.ssh/authorized_keys
d785 1
a785 1
.It ~/.ssh/environment
d797 1
a797 1
.It ~/.ssh/known_hosts
d804 1
a804 1
.It ~/.ssh/rc
d810 2
a811 2
.It /etc/hosts.allow
.It /etc/hosts.deny
d816 1
a816 1
.It /etc/hosts.equiv
d821 1
a821 1
.It /etc/moduli
d826 1
a826 1
.It /etc/motd
d830 1
a830 1
.It /etc/nologin
d839 1
a839 1
.It /etc/shosts.equiv
d845 3
a847 3
.It /etc/ssh/ssh_host_key
.It /etc/ssh/ssh_host_dsa_key
.It /etc/ssh/ssh_host_rsa_key
d855 3
a857 3
.It /etc/ssh/ssh_host_key.pub
.It /etc/ssh/ssh_host_dsa_key.pub
.It /etc/ssh/ssh_host_rsa_key.pub
d868 1
a868 1
.It /etc/ssh/ssh_known_hosts
d877 1
a877 1
.It /etc/ssh/sshd_config
d883 1
a883 1
.It /etc/ssh/sshrc
d890 1
a890 1
.It /var/empty
d898 1
a898 1
.It /var/run/sshd.pid
@


1.256
log
@add some optional indirection to matching of principal names listed
in certificates. Currently, a certificate must include the a user's name
to be accepted for authentication. This change adds the ability to
specify a list of certificate principal names that are acceptable.

When authenticating using a CA trusted through ~/.ssh/authorized_keys,
this adds a new principals="name1[,name2,...]" key option.

For CAs listed through sshd_config's TrustedCAKeys option, a new config
option "AuthorizedPrincipalsFile" specifies a per-user file containing
the list of acceptable names.

If either option is absent, the current behaviour of requiring the
username to appear in principals continues to apply.

These options are useful for role accounts, disjoint account namespaces
and "user@@realm"-style naming policies in certificates.

feedback and ok markus@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd.8,v 1.255 2010/03/05 06:50:35 jmc Exp $
.Dd $Mdocdate: March 5 2010 $
d571 1
a571 2
IPv6 addresses can be specified with an alternative syntax:
.Ar host Ns / Ns Ar port .
@


1.255
log
@tweak previous;
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd.8,v 1.254 2010/03/04 23:19:29 djm Exp $
.Dd $Mdocdate: March 4 2010 $
d578 11
@


1.254
log
@move section on CA and revoked keys from ssh.1 to sshd.8's known hosts
format section and rework it a bit; requested by jmc@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd.8,v 1.253 2010/03/03 22:49:50 djm Exp $
.Dd $Mdocdate: March 3 2010 $
d697 1
a697 1
also offers some basic automated editing for 
@


1.253
log
@the authorized_keys option for CA keys is "cert-authority", not
"from=cert-authority". spotted by imorgan AT nas.nasa.gov
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd.8,v 1.252 2010/02/26 22:09:28 jmc Exp $
.Dd $Mdocdate: February 26 2010 $
d610 2
a611 2
Each line in these files contains the following fields: hostnames,
bits, exponent, modulus, comment.
d614 9
d662 19
a680 2
matching line has the proper key.
It is thus permissible (but not
d691 2
a692 1
Rather, generate them by a script
d696 5
d710 4
@


1.252
log
@tweak previous;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.251 2010/02/26 20:29:54 djm Exp $
d484 1
a484 1
.It Cm from="cert-authority"
@


1.251
log
@Add support for certificate key types for users and hosts.

OpenSSH certificate key types are not X.509 certificates, but a much
simpler format that encodes a public key, identity information and
some validity constraints and signs it with a CA key. CA keys are
regular SSH keys. This certificate style avoids the attack surface
of X.509 certificates and is very easy to deploy.

Certified host keys allow automatic acceptance of new host keys
when a CA certificate is marked as trusted in ~/.ssh/known_hosts.
see VERIFYING HOST KEYS in ssh(1) for details.

Certified user keys allow authentication of users when the signing
CA key is marked as trusted in authorized_keys. See "AUTHORIZED_KEYS
FILE FORMAT" in sshd(8) for details.

Certificates are minted using ssh-keygen(1), documentation is in
the "CERTIFICATES" section of that manpage.

Documentation on the format of certificates is in the file
PROTOCOL.certkeys

feedback and ok markus@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd.8,v 1.250 2010/01/30 21:08:33 djm Exp $
.Dd $Mdocdate: January 30 2010 $
a104 9
.It Fl c Ar host_certificate_file
Specifies a path to a certificate file to identify
.Nm
during key exchange.
The certificate file must match a host key file specified using the
.Fl -h
option or the
.Cm HostKey
configuration directive.
d123 9
@


1.250
log
@debug output goes to stderr, not "the system log"; ok markus dtucker
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd.8,v 1.249 2009/10/08 20:42:13 jmc Exp $
.Dd $Mdocdate: October 8 2009 $
d50 1
d105 9
d484 7
d510 4
@


1.249
log
@some tweaks now that protocol 1 is not offered by default; ok markus
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd.8,v 1.248 2009/03/26 08:38:39 sobrado Exp $
.Dd $Mdocdate: March 26 2009 $
d130 2
a131 2
The server sends verbose debug output to the system
log, and does not put itself in the background.
@


1.248
log
@fix a few typographical errors found by spell(1).

ok dtucker@@, jmc@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd.8,v 1.247 2008/10/03 13:08:12 jmc Exp $
.Dd $Mdocdate: October 3 2008 $
d263 1
a263 1
Both protocols are supported by default,
@


1.247
log
@do not give an example of how to chmod files: we can presume the user
knows that. removes an ambiguity in the permission of authorized_keys;

ok deraadt
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd.8,v 1.246 2008/07/02 02:24:18 djm Exp $
.Dd $Mdocdate: July 2 2008 $
d519 1
a519 1
stanza may match IP addressess using CIDR address/masklen notation.
@


1.246
log
@increase default size of ssh protocol 1 ephemeral key from 768 to 1024
bits; prodded by & ok dtucker@@ ok deraadt@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd.8,v 1.245 2008/06/11 07:30:37 jmc Exp $
.Dd $Mdocdate: June 11 2008 $
a716 2
The recommended permissions can be set by executing
.Dq chmod go-w ~/ ~/.ssh ~/.ssh/authorized_keys .
@


1.245
log
@kill trailing whitespace;
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd.8,v 1.244 2008/06/10 23:06:19 djm Exp $
.Dd $Mdocdate: June 10 2008 $
d103 1
a103 1
server key (default 768).
@


1.244
log
@support CIDR address matching in .ssh/authorized_keys from="..." stanzas

ok and extensive testing dtucker@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.243 2008/06/10 08:17:40 jmc Exp $
d508 1
a508 1
name of the remote host or its IP address must be present in the 
@


1.243
log
@- update usage()
- fix SYNOPSIS, and sort options
- some minor additional fixes
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.242 2008/06/10 04:50:25 dtucker Exp $
d507 3
a509 12
Specifies that in addition to public key authentication, the canonical name
of the remote host must be present in the comma-separated list of
patterns.
The purpose
of this option is to optionally increase security: public key authentication
by itself does not trust the network or name servers or anything (but
the key); however, if somebody somehow steals the key, the key
permits an intruder to log in from anywhere in the world.
This additional option makes using a stolen key more difficult (name
servers and/or routers would have to be compromised in addition to
just the key).
.Pp
d515 13
@


1.242
log
@Add extended test mode (-T) and connection parameters for test mode (-C).
-T causes sshd to write its effective configuration to stdout and exit.
-C causes any relevant Match rules to be applied before output.  The
combination allows tesing of the parser and config files.  ok deraadt djm
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd.8,v 1.241 2008/03/27 22:37:57 jmc Exp $
.Dd $Mdocdate: March 27 2008 $
d47 1
a47 1
.Op Fl 46DTdeiqt
d104 18
a212 6
.It Fl t
Test mode.
Only check the validity of the configuration file and sanity of the keys.
This is useful for updating
.Nm
reliably as configuration options may change.
d222 6
a227 18
.It Fl C
Specify the connection parameters to use for the the
.Fl T
extended test mode.
If provided, any
.Cm Match
directives in the configuration file
that would apply to the specified user, host and address will be set before
the configuration is written to standard output.
The connection parameters are supplied as keyword=value pairs.
The keywords are
.Dq user ,
.Dq host
and 
.Dq addr
All are required and may be supplied in any order, either with multiple
.Fl C
options or as a comma-separated list.
@


1.241
log
@remove trailing whitespace;
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd.8,v 1.240 2008/03/26 21:28:14 djm Exp $
.Dd $Mdocdate: March 26 2008 $
d47 1
a47 1
.Op Fl 46Ddeiqt
d49 1
d201 27
@


1.240
log
@add no-user-rc authorized_keys option to disable execution of ~/.ssh/rc
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd.8,v 1.239 2008/02/11 07:58:28 jmc Exp $
.Dd $Mdocdate: February 11 2008 $
d508 1
a508 1
Disables execution of 
@


1.239
log
@bump Mdocdate for pages committed in "febuary", necessary because
of a typo in rcs.c;
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd.8,v 1.238 2008/02/09 12:15:43 mcbride Exp $
.Dd $Mdocdate$
d507 3
@


1.238
log
@Document the correct permissions for the ~/.ssh/ directory.

ok jmc
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd.8,v 1.237 2007/06/07 19:37:34 pvalchev Exp $
.Dd $Mdocdate: June 7 2007 $
@


1.237
log
@Add a new MAC algorithm for data integrity, UMAC-64 (not default yet, must
specify umac-64@@openssh.com). Provides about 20% end-to-end speedup
compared to hmac-md5. Represents a different approach to message
authentication to that of HMAC that may be beneficial if HMAC based on one
of its underlying hash algorithms is found to be vulnerable to a new attack.
http://www.ietf.org/rfc/rfc4418.txt

in conjunction with and OK djm@@
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd.8,v 1.236 2007/05/31 19:20:16 jmc Exp $
.Dd $Mdocdate$
d657 7
@


1.236
log
@convert to new .Dd format;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.235 2007/03/20 15:57:15 jmc Exp $
d279 1
a279 1
(hmac-sha1 or hmac-md5).
@


1.235
log
@- let synopsis and description agree for -f
- sort FILES
- +.Xr ssh-keyscan 1 ,

from Igor Sobrado
@
text
@d37 2
a38 2
.\" $OpenBSD: sshd.8,v 1.234 2006/08/21 08:15:57 dtucker Exp $
.Dd September 25, 1999
@


1.234
log
@Add more detail about what permissions are and aren't accepted for
authorized_keys files.  Corrections jmc@@, ok djm@@, "looks good" jmc@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.233 2006/07/19 13:07:10 dtucker Exp $
d61 5
a65 2
Together these programs replace rlogin and rsh, and
provide secure encrypted communications between two untrusted hosts
d123 1
a123 1
.It Fl f Ar configuration_file
a737 9
.It /etc/ssh/ssh_known_hosts
Systemwide list of known host keys.
This file should be prepared by the
system administrator to contain the public host keys of all machines in the
organization.
The format of this file is described above.
This file should be writable only by root/the owner and
should be world-readable.
.Pp
d761 9
d806 1
@


1.233
log
@Add ForceCommand keyword to sshd_config, equivalent to the "command="
key option, man page entry and example in sshd_config.  Feedback & ok djm@@,
man page corrections & ok jmc@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.232 2006/07/10 16:04:21 jmc Exp $
d658 1
a658 1
This file is not highly sensitive, but the recommended
d660 14
@


1.232
log
@s/and and/and/
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.231 2006/07/10 12:46:52 dtucker Exp $
d458 3
@


1.231
log
@Add port identifier to known_hosts for non-default ports, based originally
on a patch from Devin Nate in bz#910.

For any connection using the default port or using a HostKeyAlias the
format is unchanged, otherwise the host name or address is enclosed
within square brackets in the same format as sshd's ListenAddress.

Tested by many, ok markus@@.
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.230 2006/02/24 20:31:31 jmc Exp $
d571 1
a571 1
and and a non-standard port number.
@


1.230
log
@more consistency fixes;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.229 2006/02/24 10:39:52 jmc Exp $
d565 7
@


1.230.2.1
log
@upgrade to OpenSSH 4.4
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.234 2006/08/21 08:15:57 dtucker Exp $
a457 3
The command originally supplied by the client is available in the
.Ev SSH_ORIGINAL_COMMAND
environment variable.
a564 7
A hostname or address may optionally be enclosed within
.Ql \&[
and
.Ql \&]
brackets then followed by
.Ql \&:
and a non-standard port number.
d648 1
a648 1
The content of the file is not highly sensitive, but the recommended
a649 14
.Pp
If this file, the
.Pa ~/.ssh
directory, or the user's home directory are writable
by other users, then the file could be modified or replaced by unauthorized
users.
In this case,
.Nm
will not allow it to be used unless the
.Cm StrictModes
option has been set to
.Dq no .
The recommended permissions can be set by executing
.Dq chmod go-w ~/ ~/.ssh ~/.ssh/authorized_keys .
@


1.229
log
@signpost to PATTERNS section;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.228 2006/02/19 20:05:00 jmc Exp $
d84 1
a84 1
by executing itself with the name and options it was started with, e.g.,
d157 1
a157 1
However, with small key sizes (e.g., 512) using
d496 1
a496 1
This might be used, e.g., in connection with the
@


1.228
log
@grammar;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.227 2006/02/19 20:02:17 jmc Exp $
d475 1
a475 9
patterns
.Pf ( Ql *
and
.Ql \&?
serve as wildcards).
The list may also contain
patterns negated by prefixing them with
.Ql \&! ;
if the canonical host name matches a negated pattern, the key is not accepted.
d484 6
@


1.227
log
@sync the (s)hosts.equiv FILES entries w/ those from ssh.1;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.226 2006/02/19 19:52:10 jmc Exp $
d730 1
a730 1
does not start if this file is group/world-accessible.
@


1.226
log
@move the sshrc stuff out of FILES, and into its own section:
FILES is not a good place to document how stuff works;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.225 2006/02/16 09:05:34 jmc Exp $
d685 3
a687 37
This file is used during
.Cm RhostsRSAAuthentication
and
.Cm HostbasedAuthentication
authentication.
In the simplest form, this file contains host names, one per line.
Users on
those hosts are permitted to log in without a password, provided they
have the same user name on both machines.
The host name may also be
followed by a user name; such users are permitted to log in as
.Em any
user on this machine (except root).
Additionally, the syntax
.Dq +@@group
can be used to specify netgroups.
Negated entries start with
.Ql \&- .
.Pp
If the client host/user is successfully matched in this file, login is
automatically permitted provided the client and server user names are the
same.
Additionally, successful client host key authentication is required.
This file must be writable only by root; it is recommended
that it be world-readable.
.Pp
.Sy "Warning: It is almost never a good idea to use user names in"
.Pa hosts.equiv .
Beware that it really means that the named user(s) can log in as
.Em anybody ,
which includes bin, daemon, adm, and other accounts that own critical
binaries and directories.
Using a user name practically grants the user root access.
The only valid use for user names that I can think
of is in negative entries.
.Pp
Note that this warning also applies to rsh/rlogin.
d708 4
a711 4
This is processed exactly as
.Pa /etc/hosts.equiv .
However, this file may be useful in environments that want to run both
rsh/rlogin and ssh.
@


1.225
log
@sync some of the FILES entries w/ ssh.1;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.224 2006/02/15 16:55:33 jmc Exp $
d347 3
d353 42
d673 2
a674 40
If this file exists, it is run with
.Pa /bin/sh
after reading the
environment files but before starting the user's shell or command.
It must not produce any output on stdout; stderr must be used
instead.
If X11 forwarding is in use, it will receive the "proto cookie" pair in
its standard input (and
.Ev DISPLAY
in its environment).
The script must call
.Xr xauth 1
because
.Nm
will not run xauth automatically to add X11 cookies.
.Pp
The primary purpose of this file is to run any initialization routines
which may be needed before the user's home directory becomes
accessible; AFS is a particular example of such an environment.
.Pp
This file will probably contain some initialization code followed by
something similar to:
.Bd -literal
if read proto cookie && [ -n "$DISPLAY" ]; then
	if [ `echo $DISPLAY | cut -c1-10` = 'localhost:' ]; then
		# X11UseLocalhost=yes
		echo add unix:`echo $DISPLAY |
		    cut -c11-` $proto $cookie
	else
		# X11UseLocalhost=no
		echo add $DISPLAY $proto $cookie
	fi | xauth -q -
fi
.Ed
.Pp
If this file does not exist,
.Pa /etc/ssh/sshrc
is run, and if that
does not exist either, xauth is used to add the cookie.
.Pp
d786 3
a788 3
Like
.Pa ~/.ssh/rc .
This can be used to specify
@


1.224
log
@remove ietf draft references; RFC list now maintained in ssh.1;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.223 2006/02/13 11:27:25 jmc Exp $
d582 12
a593 11
This file is used during
.Cm RhostsRSAAuthentication
and
.Cm HostbasedAuthentication
and contains host-username pairs, separated by a space, one per
line.
The given user on the corresponding host is permitted to log in
without a password.
The same file is used by rlogind and rshd.
The file must
be writable only by the user; it is recommended that it not be
a595 5
It is also possible to use netgroups in the file.
Either host or user
name may be of the form +@@groupname to specify all hosts or all users
in the group.
.Pp
d597 4
a600 5
For ssh,
this file is exactly the same as for
.Pa .rhosts .
However, this file is
not used by rlogin and rshd, so using this permits access using SSH only.
d603 1
a603 5
Lists the public keys (RSA or DSA) that can be used to log into the user's account.
This file must be readable by root (which may on some machines imply
it being world-readable if the user's home directory resides on an NFS
volume).
It is recommended that it not be accessible by others.
d605 2
a606 7
Users will place the contents of their
.Pa identity.pub ,
.Pa id_dsa.pub
and/or
.Pa id_rsa.pub
files into this file, as described in
.Xr ssh-keygen 1 .
d621 4
a624 11
.It /etc/ssh/ssh_known_hosts
These files are consulted when using rhosts with RSA host
authentication or protocol version 2 hostbased authentication
to check the public key of the host.
The key must be listed in one of these files to be accepted.
The client uses the same files
to verify that it is connecting to the correct remote host.
These files should be writable only by root/the owner.
.Pa /etc/ssh/ssh_known_hosts
should be world-readable, and
.Pa ~/.ssh/known_hosts
d739 9
@


1.223
log
@sort FILES and use a -compact list;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.222 2006/02/13 11:08:43 jmc Exp $
a826 20
.Rs
.%A T. Ylonen
.%A T. Kivinen
.%A M. Saarinen
.%A T. Rinne
.%A S. Lehtinen
.%T "SSH Protocol Architecture"
.%N draft-ietf-secsh-architecture-12.txt
.%D January 2002
.%O work in progress material
.Re
.Rs
.%A M. Friedl
.%A N. Provos
.%A W. A. Simpson
.%T "Diffie-Hellman Group Exchange for the SSH Transport Layer Protocol"
.%N draft-ietf-secsh-dh-group-exchange-02.txt
.%D January 2002
.%O work in progress material
.Re
@


1.222
log
@- avoid nasty line split
- `*' does not need to be escaped
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.221 2006/02/13 11:02:26 jmc Exp $
d568 2
a569 71
.Bl -tag -width Ds
.It Pa /etc/ssh/sshd_config
Contains configuration data for
.Nm sshd .
The file format and configuration options are described in
.Xr sshd_config 5 .
.It Pa /etc/ssh/ssh_host_key, /etc/ssh/ssh_host_dsa_key, /etc/ssh/ssh_host_rsa_key
These three files contain the private parts of the host keys.
These files should only be owned by root, readable only by root, and not
accessible to others.
Note that
.Nm
does not start if this file is group/world-accessible.
.It Pa /etc/ssh/ssh_host_key.pub, /etc/ssh/ssh_host_dsa_key.pub, /etc/ssh/ssh_host_rsa_key.pub
These three files contain the public parts of the host keys.
These files should be world-readable but writable only by
root.
Their contents should match the respective private parts.
These files are not
really used for anything; they are provided for the convenience of
the user so their contents can be copied to known hosts files.
These files are created using
.Xr ssh-keygen 1 .
.It Pa /etc/moduli
Contains Diffie-Hellman groups used for the "Diffie-Hellman Group Exchange".
The file format is described in
.Xr moduli 5 .
.It Pa /var/empty
.Xr chroot 2
directory used by
.Nm
during privilege separation in the pre-authentication phase.
The directory should not contain any files and must be owned by root
and not group or world-writable.
.It Pa /var/run/sshd.pid
Contains the process ID of the
.Nm
listening for connections (if there are several daemons running
concurrently for different ports, this contains the process ID of the one
started last).
The content of this file is not sensitive; it can be world-readable.
.It Pa ~/.ssh/authorized_keys
Lists the public keys (RSA or DSA) that can be used to log into the user's account.
This file must be readable by root (which may on some machines imply
it being world-readable if the user's home directory resides on an NFS
volume).
It is recommended that it not be accessible by others.
The format of this file is described above.
Users will place the contents of their
.Pa identity.pub ,
.Pa id_dsa.pub
and/or
.Pa id_rsa.pub
files into this file, as described in
.Xr ssh-keygen 1 .
.It Pa "/etc/ssh/ssh_known_hosts", "~/.ssh/known_hosts"
These files are consulted when using rhosts with RSA host
authentication or protocol version 2 hostbased authentication
to check the public key of the host.
The key must be listed in one of these files to be accepted.
The client uses the same files
to verify that it is connecting to the correct remote host.
These files should be writable only by root/the owner.
.Pa /etc/ssh/ssh_known_hosts
should be world-readable, and
.Pa ~/.ssh/known_hosts
can, but need not be, world-readable.
.It Pa /etc/motd
See
.Xr motd 5 .
.It Pa ~/.hushlogin
d580 2
a581 13
.It Pa /etc/nologin
If this file exists,
.Nm
refuses to let anyone except root log in.
The contents of the file
are displayed to anyone trying to log in, and non-root connections are
refused.
The file should be world-readable.
.It Pa /etc/hosts.allow, /etc/hosts.deny
Access controls that should be enforced by tcp-wrappers are defined here.
Further details are described in
.Xr hosts_access 5 .
.It Pa ~/.rhosts
d599 2
a600 1
.It Pa ~/.shosts
a605 19
.It Pa /etc/hosts.equiv
This file is used during
.Cm RhostsRSAAuthentication
and
.Cm HostbasedAuthentication
authentication.
In the simplest form, this file contains host names, one per line.
Users on
those hosts are permitted to log in without a password, provided they
have the same user name on both machines.
The host name may also be
followed by a user name; such users are permitted to log in as
.Em any
user on this machine (except root).
Additionally, the syntax
.Dq +@@group
can be used to specify netgroups.
Negated entries start with
.Ql \&- .
d607 14
a620 6
If the client host/user is successfully matched in this file, login is
automatically permitted provided the client and server user names are the
same.
Additionally, successful client host key authentication is required.
This file must be writable only by root; it is recommended
that it be world-readable.
d622 1
a622 17
.Sy "Warning: It is almost never a good idea to use user names in"
.Pa hosts.equiv .
Beware that it really means that the named user(s) can log in as
.Em anybody ,
which includes bin, daemon, adm, and other accounts that own critical
binaries and directories.
Using a user name practically grants the user root access.
The only valid use for user names that I can think
of is in negative entries.
.Pp
Note that this warning also applies to rsh/rlogin.
.It Pa /etc/shosts.equiv
This is processed exactly as
.Pa /etc/hosts.equiv .
However, this file may be useful in environments that want to run both
rsh/rlogin and ssh.
.It Pa ~/.ssh/environment
d633 16
a648 1
.It Pa ~/.ssh/rc
d691 100
a790 1
.It Pa /etc/ssh/sshrc
d796 16
@


1.221
log
@turn this into an example ssh_known_hosts file; ok djm
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.220 2006/02/13 10:21:25 jmc Exp $
d431 1
a431 1
.Pf ( Ql \&*
d482 1
a482 1
.Bd -literal
d485 8
a492 4
from="*.sales.example.net,!pc.sales.example.net" ssh-rsa AAAAB2...19Q== john@@example.net
command="dump /home",no-pty,no-port-forwarding ssh-dss AAAAC3...51R== example.net
permitopen="192.0.2.1:80",permitopen="192.0.2.2:25" ssh-dss AAAAB5...21S==
tunnel="0",command="sh /etc/netstart tun0" ssh-rsa AAAA...== jane@@example.net
@


1.220
log
@small tweaks for the ssh_known_hosts section;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.219 2006/02/13 10:16:39 jmc Exp $
d553 6
a558 6
.Ss Examples
.Bd -literal
closenet,...,130.233.208.41 1024 37 159...93 closenet.hut.fi
cvs.openbsd.org,199.185.137.3 ssh-rsa AAAA1234.....=
.Ed
.Bd -literal
@


1.219
log
@no need to subsection the authorized_keys examples - instead, convert
this to look like an actual file. also use proto 2 keys, and use IETF
example addresses;

much help from djm; ok markus djm;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.218 2006/02/12 17:57:19 jmc Exp $
d498 1
a498 1
maintained automatically: whenever the user connects from an unknown host
d506 1
a506 1
.Pf ( Ql \&*
d528 1
a528 1
can be obtained, e.g., from
@


1.218
log
@sort the list of options permissable w/ authorized_keys;
ok djm dtucker
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.217 2006/02/12 10:52:41 jmc Exp $
a479 2
.Ss Examples
1024 33 12121...312314325 ylo@@foo.bar
d481 9
a489 7
from="*.niksula.hut.fi,!pc.niksula.hut.fi" 1024 35 23...2334 ylo@@niksula
.Pp
command="dump /home",no-pty,no-port-forwarding 1024 33 23...2323 backup.hut.fi
.Pp
permitopen="10.2.1.55:80",permitopen="10.2.1.56:25" 1024 33 23...2323
.Pp
tunnel="0",command="sh /etc/netstart tun0" ssh-rsa AAAA...== reyk@@openbsd.org
@


1.217
log
@rework the description of authorized_keys a little;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.216 2006/02/09 10:10:47 jmc Exp $
a397 20
.It Cm from="pattern-list"
Specifies that in addition to public key authentication, the canonical name
of the remote host must be present in the comma-separated list of
patterns
.Pf ( Ql \&*
and
.Ql \&?
serve as wildcards).
The list may also contain
patterns negated by prefixing them with
.Ql \&! ;
if the canonical host name matches a negated pattern, the key is not accepted.
The purpose
of this option is to optionally increase security: public key authentication
by itself does not trust the network or name servers or anything (but
the key); however, if somebody somehow steals the key, the key
permits an intruder to log in from anywhere in the world.
This additional option makes using a stolen key more difficult (name
servers and/or routers would have to be compromised in addition to
just the key).
d427 23
d456 2
a460 5
.It Cm no-agent-forwarding
Forbids authentication agent forwarding when this key is used for
authentication.
.It Cm no-pty
Prevents tty allocation (a request to allocate a pty will fail).
@


1.216
log
@- move some text into a CAVEATS section
- merge the COMMAND EXECUTION... section into AUTHENTICATION
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.215 2006/02/01 09:11:41 jmc Exp $
a350 5
.Pa ~/.ssh/authorized_keys
is the default file that lists the public keys that are
permitted for RSA authentication in protocol version 1
and for public key authentication (PubkeyAuthentication)
in protocol version 2.
d352 4
a355 2
may be used to specify an alternative file.
.Pp
d361 6
a366 6
Each RSA public key consists of the following fields, separated by
spaces: options, bits, exponent, modulus, comment.
Each protocol version 2 public key consists of:
options, keytype, base64 encoded key, comment.
The options field
is optional; its presence is determined by whether the line starts
d368 1
a368 1
The bits, exponent, modulus and comment fields give the RSA key for
d383 1
a383 1
.Pa id_dsa.pub
@


1.215
log
@small tweak;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.214 2006/02/01 09:06:50 jmc Exp $
a284 11
System security is not improved unless
.Nm rshd ,
.Nm rlogind ,
and
.Nm rexecd
are disabled (thus completely disabling
.Xr rlogin
and
.Xr rsh
into the machine).
.Sh COMMAND EXECUTION AND DATA FORWARDING
d292 1
a292 1
Finally, the client either requests a shell or execution of a command.
d833 11
@


1.214
log
@- merge sections on protocols 1 and 2 into a single section
- remove configuration file section

ok markus
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.213 2006/01/25 09:07:22 jmc Exp $
d220 1
a220 1
.Cm HostbasedAuthentication
@


1.213
log
@move subsections to full sections;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.212 2006/01/25 09:04:34 jmc Exp $
d230 18
a247 11
.Pp
This implementation of
.Nm
supports both SSH protocol version 1 and 2 simultaneously.
.Nm
works as follows:
.Sh SSH PROTOCOL VERSION 1
Each host has a host-specific RSA key
(normally 2048 bits) used to identify the host.
Additionally, when
the daemon starts, it generates a server RSA key (normally 768 bits).
a249 1
.Pp
d267 12
a278 1
Next, the server and the client enter an authentication dialog.
d280 4
a283 4
.Em rhosts
authentication combined with RSA host
authentication, RSA challenge-response authentication, or password
based authentication.
a294 19
.Sh SSH PROTOCOL VERSION 2
Version 2 works similarly:
Each host has a host-specific key (RSA or DSA) used to identify the host.
However, when the daemon starts, it does not generate a server key.
Forward security is provided through a Diffie-Hellman key agreement.
This key agreement results in a shared session key.
.Pp
The rest of the session is encrypted using a symmetric cipher, currently
128-bit AES, Blowfish, 3DES, CAST128, Arcfour, 192-bit AES, or 256-bit AES.
The client selects the encryption algorithm
to use from those offered by the server.
Additionally, session integrity is provided
through a cryptographic message authentication code
(hmac-sha1 or hmac-md5).
.Pp
Protocol version 2 provides a public key based
user (PubkeyAuthentication) or
client host (HostbasedAuthentication) authentication method,
conventional password authentication and challenge response based methods.
a311 9
.Sh CONFIGURATION FILE
.Nm
reads configuration data from
.Pa /etc/ssh/sshd_config
(or the file specified with
.Fl f
on the command line).
The file format and configuration options are described in
.Xr sshd_config 5 .
@


1.212
log
@move the options description up the page, and a few additional tweaks
whilst in here;

ok markus
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.211 2006/01/12 22:20:00 jmc Exp $
d236 1
a236 1
.Ss SSH protocol version 1
d278 1
a278 1
.Ss SSH protocol version 2
d297 1
a297 1
.Ss Command execution and data forwarding
@


1.211
log
@refer to TCP forwarding, rather than TCP/IP forwarding;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.210 2005/12/21 22:44:26 stevesk Exp $
d59 1
a59 1
(SSH Daemon) is the daemon program for
a63 2
The programs are intended to be as easy to
install and use as possible.
d66 1
a66 1
is the daemon that listens for connections from clients.
a73 83
This implementation of
.Nm
supports both SSH protocol version 1 and 2 simultaneously.
.Nm
works as follows:
.Ss SSH protocol version 1
Each host has a host-specific RSA key
(normally 2048 bits) used to identify the host.
Additionally, when
the daemon starts, it generates a server RSA key (normally 768 bits).
This key is normally regenerated every hour if it has been used, and
is never stored on disk.
.Pp
Whenever a client connects, the daemon responds with its public
host and server keys.
The client compares the
RSA host key against its own database to verify that it has not changed.
The client then generates a 256-bit random number.
It encrypts this
random number using both the host key and the server key, and sends
the encrypted number to the server.
Both sides then use this
random number as a session key which is used to encrypt all further
communications in the session.
The rest of the session is encrypted
using a conventional cipher, currently Blowfish or 3DES, with 3DES
being used by default.
The client selects the encryption algorithm
to use from those offered by the server.
.Pp
Next, the server and the client enter an authentication dialog.
The client tries to authenticate itself using
.Em rhosts
authentication combined with RSA host
authentication, RSA challenge-response authentication, or password
based authentication.
.Pp
System security is not improved unless
.Nm rshd ,
.Nm rlogind ,
and
.Nm rexecd
are disabled (thus completely disabling
.Xr rlogin
and
.Xr rsh
into the machine).
.Ss SSH protocol version 2
Version 2 works similarly:
Each host has a host-specific key (RSA or DSA) used to identify the host.
However, when the daemon starts, it does not generate a server key.
Forward security is provided through a Diffie-Hellman key agreement.
This key agreement results in a shared session key.
.Pp
The rest of the session is encrypted using a symmetric cipher, currently
128-bit AES, Blowfish, 3DES, CAST128, Arcfour, 192-bit AES, or 256-bit AES.
The client selects the encryption algorithm
to use from those offered by the server.
Additionally, session integrity is provided
through a cryptographic message authentication code
(hmac-sha1 or hmac-md5).
.Pp
Protocol version 2 provides a public key based
user (PubkeyAuthentication) or
client host (HostbasedAuthentication) authentication method,
conventional password authentication and challenge response based methods.
.Ss Command execution and data forwarding
If the client successfully authenticates itself, a dialog for
preparing the session is entered.
At this time the client may request
things like allocating a pseudo-tty, forwarding X11 connections,
forwarding TCP connections, or forwarding the authentication agent
connection over the secure channel.
.Pp
Finally, the client either requests a shell or execution of a command.
The sides then enter session mode.
In this mode, either side may send
data at any time, and such data is forwarded to/from the shell or
command on the server side, and the user terminal in the client side.
.Pp
When the user program terminates and all forwarded X11 and other
connections have been closed, the server sends command exit status to
the client, and both sides exit.
d78 2
a79 2
.Xr sshd_config 5 ) .
Command-line options override values specified in the
a80 1
.Pp
d230 84
@


1.210
log
@clarify precedence of -p, Port, ListenAddress; ok and help jmc@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.209 2005/12/06 22:38:28 reyk Exp $
d147 1
a147 1
forwarding TCP/IP connections, or forwarding the authentication agent
d458 1
a458 1
Note that the client may specify TCP/IP and/or X11
d475 1
a475 1
Forbids TCP/IP forwarding when this key is used for authentication.
@


1.209
log
@Add support for tun(4) forwarding over OpenSSH, based on an idea and
initial channel code bits by markus@@. This is a simple and easy way to
use OpenSSH for ad hoc virtual private network connections, e.g.
administrative tunnels or secure wireless access. It's based on a new
ssh channel and works similar to the existing TCP forwarding support,
except that it depends on the tun(4) network interface on both ends of
the connection for layer 2 or layer 3 tunneling. This diff also adds
support for LocalCommand in the ssh(1) client.

ok djm@@, markus@@, jmc@@ (manpages), tested and discussed with others
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.208 2005/06/08 03:50:00 djm Exp $
d266 6
a271 2
Ports specified in the configuration file are ignored when a
command-line port is specified.
@


1.208
log
@increase default rsa/dsa key length from 1024 to 2048 bits; ok markus@@ deraadt@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.207 2005/04/21 06:17:50 djm Exp $
d496 6
d511 2
@


1.208.2.1
log
@upgrade to OpenSSH 4.3
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.215 2006/02/01 09:11:41 jmc Exp $
d59 1
a59 1
(OpenSSH Daemon) is the daemon program for
d64 2
d68 1
a68 1
listens for connections from clients.
d76 83
d163 2
a164 2
.Xr sshd_config 5 ) ;
command-line options override values specified in the
d166 1
d266 2
a267 6
Ports specified in the configuration file with the
.Cm Port
option are ignored when a command-line port is specified.
Ports specified using the
.Cm ListenAddress
option override command-line ports.
d302 1
a302 1
.Cm HostbasedAuthentication ,
d312 8
a319 6
.Sh AUTHENTICATION
The OpenSSH SSH daemon supports SSH protocols 1 and 2.
Both protocols are supported by default,
though this can be changed via the
.Cm Protocol
option in
a320 75
Protocol 2 supports both RSA and DSA keys;
protocol 1 only supports RSA keys.
For both protocols,
each host has a host-specific key,
normally 2048 bits,
used to identify the host.
.Pp
Forward security for protocol 1 is provided through
an additional server key,
normally 768 bits,
generated when the server starts.
This key is normally regenerated every hour if it has been used, and
is never stored on disk.
Whenever a client connects, the daemon responds with its public
host and server keys.
The client compares the
RSA host key against its own database to verify that it has not changed.
The client then generates a 256-bit random number.
It encrypts this
random number using both the host key and the server key, and sends
the encrypted number to the server.
Both sides then use this
random number as a session key which is used to encrypt all further
communications in the session.
The rest of the session is encrypted
using a conventional cipher, currently Blowfish or 3DES, with 3DES
being used by default.
The client selects the encryption algorithm
to use from those offered by the server.
.Pp
For protocol 2,
forward security is provided through a Diffie-Hellman key agreement.
This key agreement results in a shared session key.
The rest of the session is encrypted using a symmetric cipher, currently
128-bit AES, Blowfish, 3DES, CAST128, Arcfour, 192-bit AES, or 256-bit AES.
The client selects the encryption algorithm
to use from those offered by the server.
Additionally, session integrity is provided
through a cryptographic message authentication code
(hmac-sha1 or hmac-md5).
.Pp
Finally, the server and the client enter an authentication dialog.
The client tries to authenticate itself using
host-based authentication,
public key authentication,
challenge-response authentication,
or password authentication.
.Pp
System security is not improved unless
.Nm rshd ,
.Nm rlogind ,
and
.Nm rexecd
are disabled (thus completely disabling
.Xr rlogin
and
.Xr rsh
into the machine).
.Sh COMMAND EXECUTION AND DATA FORWARDING
If the client successfully authenticates itself, a dialog for
preparing the session is entered.
At this time the client may request
things like allocating a pseudo-tty, forwarding X11 connections,
forwarding TCP connections, or forwarding the authentication agent
connection over the secure channel.
.Pp
Finally, the client either requests a shell or execution of a command.
The sides then enter session mode.
In this mode, either side may send
data at any time, and such data is forwarded to/from the shell or
command on the server side, and the user terminal in the client side.
.Pp
When the user program terminates and all forwarded X11 and other
connections have been closed, the server sends command exit status to
the client, and both sides exit.
d454 1
a454 1
Note that the client may specify TCP and/or X11
d471 1
a471 1
Forbids TCP forwarding when this key is used for authentication.
a495 6
.It Cm tunnel="n"
Force a
.Xr tun 4
device on the server.
Without this option, the next available device will be used if
the client requests a tunnel.
a504 2
.Pp
tunnel="0",command="sh /etc/netstart tun0" ssh-rsa AAAA...== reyk@@openbsd.org
@


1.208.2.2
log
@upgrade to OpenSSH 4.4
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.234 2006/08/21 08:15:57 dtucker Exp $
d84 1
a84 1
by executing itself with the name and options it was started with, e.g.\&
d157 1
a157 1
However, with small key sizes (e.g. 512) using
d285 11
d303 1
a303 1
After this, the client either requests a shell or execution of a command.
a357 3
See
.Sx SSHRC ,
below.
a360 42
.Sh SSHRC
If the file
.Pa ~/.ssh/rc
exists,
.Xr sh 1
runs it after reading the
environment files but before starting the user's shell or command.
It must not produce any output on stdout; stderr must be used
instead.
If X11 forwarding is in use, it will receive the "proto cookie" pair in
its standard input (and
.Ev DISPLAY
in its environment).
The script must call
.Xr xauth 1
because
.Nm
will not run xauth automatically to add X11 cookies.
.Pp
The primary purpose of this file is to run any initialization routines
which may be needed before the user's home directory becomes
accessible; AFS is a particular example of such an environment.
.Pp
This file will probably contain some initialization code followed by
something similar to:
.Bd -literal -offset 3n
if read proto cookie && [ -n "$DISPLAY" ]; then
	if [ `echo $DISPLAY | cut -c1-10` = 'localhost:' ]; then
		# X11UseLocalhost=yes
		echo add unix:`echo $DISPLAY |
		    cut -c11-` $proto $cookie
	else
		# X11UseLocalhost=no
		echo add $DISPLAY $proto $cookie
	fi | xauth -q -
fi
.Ed
.Pp
If this file does not exist,
.Pa /etc/ssh/sshrc
is run, and if that
does not exist either, xauth is used to add the cookie.
d362 5
d368 2
a369 4
specifies the file containing public keys for
public key authentication;
if none is specified, the default is
.Pa ~/.ssh/authorized_keys .
d375 6
a380 6
Protocol 1 public keys consist of the following space-separated fields:
options, bits, exponent, modulus, comment.
Protocol 2 public key consist of:
options, keytype, base64-encoded key, comment.
The options field is optional;
its presence is determined by whether the line starts
d382 1
a382 1
The bits, exponent, modulus, and comment fields give the RSA key for
d397 1
a397 1
.Pa id_dsa.pub ,
d412 20
a446 3
The command originally supplied by the client is available in the
.Ev SSH_ORIGINAL_COMMAND
environment variable.
a460 21
.It Cm from="pattern-list"
Specifies that in addition to public key authentication, the canonical name
of the remote host must be present in the comma-separated list of
patterns.
The purpose
of this option is to optionally increase security: public key authentication
by itself does not trust the network or name servers or anything (but
the key); however, if somebody somehow steals the key, the key
permits an intruder to log in from anywhere in the world.
This additional option makes using a stolen key more difficult (name
servers and/or routers would have to be compromised in addition to
just the key).
.Pp
See
.Sx PATTERNS
in
.Xr ssh_config 5
for more information on patterns.
.It Cm no-agent-forwarding
Forbids authentication agent forwarding when this key is used for
authentication.
d464 1
a464 1
This might be used, e.g. in connection with the
a466 2
.It Cm no-pty
Prevents tty allocation (a request to allocate a pty will fail).
d470 5
d494 2
d497 7
a503 13
An example authorized_keys file:
.Bd -literal -offset 3n
# Comments allowed at start of line
ssh-rsa AAAAB3Nza...LiPk== user@@example.net
from="*.sales.example.net,!pc.sales.example.net" ssh-rsa
AAAAB2...19Q== john@@example.net
command="dump /home",no-pty,no-port-forwarding ssh-dss
AAAAC3...51R== example.net
permitopen="192.0.2.1:80",permitopen="192.0.2.2:25" ssh-dss
AAAAB5...21S==
tunnel="0",command="sh /etc/netstart tun0" ssh-rsa AAAA...==
jane@@example.net
.Ed
d512 1
a512 1
maintained automatically: whenever the user connects from an unknown host,
d520 1
a520 1
.Pf ( Ql *
a531 7
A hostname or address may optionally be enclosed within
.Ql \&[
and
.Ql \&]
brackets then followed by
.Ql \&:
and a non-standard port number.
d542 1
a542 1
can be obtained, for example, from
d567 6
a572 6
.Pp
An example ssh_known_hosts file:
.Bd -literal -offset 3n
# Comments allowed at start of line
closenet,...,192.0.2.53 1024 37 159...93 closenet.example.net
cvs.example.net,192.0.2.10 ssh-rsa AAAA1234.....=
d578 71
a648 2
.Bl -tag -width Ds -compact
.It ~/.hushlogin
d659 2
a660 8
.Pp
.It ~/.rhosts
This file is used for host-based authentication (see
.Xr ssh 1
for more information).
On some machines this file may need to be
world-readable if the user's home directory is on an NFS partition,
because
d662 21
a682 5
reads it as root.
Additionally, this file must be owned by the user,
and must not have write permissions for anyone else.
The recommended
permission for most machines is read/write for the user, and not
d685 54
a738 27
.It ~/.shosts
This file is used in exactly the same way as
.Pa .rhosts ,
but allows host-based authentication without permitting login with
rlogin/rsh.
.Pp
.It ~/.ssh/authorized_keys
Lists the public keys (RSA/DSA) that can be used for logging in as this user.
The format of this file is described above.
The content of the file is not highly sensitive, but the recommended
permissions are read/write for the user, and not accessible by others.
.Pp
If this file, the
.Pa ~/.ssh
directory, or the user's home directory are writable
by other users, then the file could be modified or replaced by unauthorized
users.
In this case,
.Nm
will not allow it to be used unless the
.Cm StrictModes
option has been set to
.Dq no .
The recommended permissions can be set by executing
.Dq chmod go-w ~/ ~/.ssh ~/.ssh/authorized_keys .
.Pp
.It ~/.ssh/environment
d749 14
a762 36
.Pp
.It ~/.ssh/known_hosts
Contains a list of host keys for all hosts the user has logged into
that are not already in the systemwide list of known host keys.
The format of this file is described above.
This file should be writable only by root/the owner and
can, but need not be, world-readable.
.Pp
.It ~/.ssh/rc
Contains initialization routines to be run before
the user's home directory becomes accessible.
This file should be writable only by the user, and need not be
readable by anyone else.
.Pp
.It /etc/hosts.allow
.It /etc/hosts.deny
Access controls that should be enforced by tcp-wrappers are defined here.
Further details are described in
.Xr hosts_access 5 .
.Pp
.It /etc/hosts.equiv
This file is for host-based authentication (see
.Xr ssh 1 ) .
It should only be writable by root.
.Pp
.It /etc/moduli
Contains Diffie-Hellman groups used for the "Diffie-Hellman Group Exchange".
The file format is described in
.Xr moduli 5 .
.Pp
.It /etc/motd
See
.Xr motd 5 .
.Pp
.It /etc/nologin
If this file exists,
d764 1
a764 5
refuses to let anyone except root log in.
The contents of the file
are displayed to anyone trying to log in, and non-root connections are
refused.
The file should be world-readable.
d766 3
a768 14
.It /etc/shosts.equiv
This file is used in exactly the same way as
.Pa hosts.equiv ,
but allows host-based authentication without permitting login with
rlogin/rsh.
.Pp
.It /etc/ssh/ssh_known_hosts
Systemwide list of known host keys.
This file should be prepared by the
system administrator to contain the public host keys of all machines in the
organization.
The format of this file is described above.
This file should be writable only by root/the owner and
should be world-readable.
d770 14
a783 9
.It /etc/ssh/ssh_host_key
.It /etc/ssh/ssh_host_dsa_key
.It /etc/ssh/ssh_host_rsa_key
These three files contain the private parts of the host keys.
These files should only be owned by root, readable only by root, and not
accessible to others.
Note that
.Nm
does not start if these files are group/world-accessible.
d785 4
a788 12
.It /etc/ssh/ssh_host_key.pub
.It /etc/ssh/ssh_host_dsa_key.pub
.It /etc/ssh/ssh_host_rsa_key.pub
These three files contain the public parts of the host keys.
These files should be world-readable but writable only by
root.
Their contents should match the respective private parts.
These files are not
really used for anything; they are provided for the convenience of
the user so their contents can be copied to known hosts files.
These files are created using
.Xr ssh-keygen 1 .
d790 6
a795 10
.It /etc/ssh/sshd_config
Contains configuration data for
.Nm sshd .
The file format and configuration options are described in
.Xr sshd_config 5 .
.Pp
.It /etc/ssh/sshrc
Similar to
.Pa ~/.ssh/rc ,
it can be used to specify
a797 16
.Pp
.It /var/empty
.Xr chroot 2
directory used by
.Nm
during privilege separation in the pre-authentication phase.
The directory should not contain any files and must be owned by root
and not group or world-writable.
.Pp
.It /var/run/sshd.pid
Contains the process ID of the
.Nm
listening for connections (if there are several daemons running
concurrently for different ports, this contains the process ID of the one
started last).
The content of this file is not sensitive; it can be world-readable.
d813 20
a843 11
.Sh CAVEATS
System security is not improved unless
.Nm rshd ,
.Nm rlogind ,
and
.Nm rexecd
are disabled (thus completely disabling
.Xr rlogin
and
.Xr rsh
into the machine).
@


1.207
log
@OpenSSH doesn't ever look at the $HOME environment variable, so don't say
that we do (bz #623); ok deraadt@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.206 2005/03/01 14:59:49 jmc Exp $
d83 1
a83 1
(normally 1024 bits) used to identify the host.
@


1.206
log
@new sentence, new line;
whitespace;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.205 2005/03/01 10:40:27 djm Exp $
d331 1
a331 1
.Pa $HOME/.hushlogin ;
d348 1
a348 1
.Pa $HOME/.ssh/environment ,
d358 1
a358 1
.Pa $HOME/.ssh/rc
d371 1
a371 1
.Pa $HOME/.ssh/authorized_keys
d509 1
a509 1
.Pa $HOME/.ssh/known_hosts
d620 1
a620 1
.It Pa $HOME/.ssh/authorized_keys
d634 1
a634 1
.It Pa "/etc/ssh/ssh_known_hosts", "$HOME/.ssh/known_hosts"
d644 1
a644 1
.Pa $HOME/.ssh/known_hosts
d649 1
a649 1
.It Pa $HOME/.hushlogin
d672 1
a672 1
.It Pa $HOME/.rhosts
d690 1
a690 1
.It Pa $HOME/.shosts
d739 1
a739 1
.It Pa $HOME/.ssh/environment
d750 1
a750 1
.It Pa $HOME/.ssh/rc
d795 1
a795 1
.Pa $HOME/.ssh/rc .
@


1.206.2.1
log
@upgrade to OpenSSH 4.2
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.208 2005/06/08 03:50:00 djm Exp $
d83 1
a83 1
(normally 2048 bits) used to identify the host.
d331 1
a331 1
.Pa ~/.hushlogin ;
d348 1
a348 1
.Pa ~/.ssh/environment ,
d358 1
a358 1
.Pa ~/.ssh/rc
d371 1
a371 1
.Pa ~/.ssh/authorized_keys
d509 1
a509 1
.Pa ~/.ssh/known_hosts
d620 1
a620 1
.It Pa ~/.ssh/authorized_keys
d634 1
a634 1
.It Pa "/etc/ssh/ssh_known_hosts", "~/.ssh/known_hosts"
d644 1
a644 1
.Pa ~/.ssh/known_hosts
d649 1
a649 1
.It Pa ~/.hushlogin
d672 1
a672 1
.It Pa ~/.rhosts
d690 1
a690 1
.It Pa ~/.shosts
d739 1
a739 1
.It Pa ~/.ssh/environment
d750 1
a750 1
.It Pa ~/.ssh/rc
d795 1
a795 1
.Pa ~/.ssh/rc .
@


1.206.2.2
log
@upgrade to OpenSSH 4.3
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.215 2006/02/01 09:11:41 jmc Exp $
d59 1
a59 1
(OpenSSH Daemon) is the daemon program for
d64 2
d68 1
a68 1
listens for connections from clients.
d76 83
d163 2
a164 2
.Xr sshd_config 5 ) ;
command-line options override values specified in the
d166 1
d266 2
a267 6
Ports specified in the configuration file with the
.Cm Port
option are ignored when a command-line port is specified.
Ports specified using the
.Cm ListenAddress
option override command-line ports.
d302 1
a302 1
.Cm HostbasedAuthentication ,
d312 8
a319 6
.Sh AUTHENTICATION
The OpenSSH SSH daemon supports SSH protocols 1 and 2.
Both protocols are supported by default,
though this can be changed via the
.Cm Protocol
option in
a320 75
Protocol 2 supports both RSA and DSA keys;
protocol 1 only supports RSA keys.
For both protocols,
each host has a host-specific key,
normally 2048 bits,
used to identify the host.
.Pp
Forward security for protocol 1 is provided through
an additional server key,
normally 768 bits,
generated when the server starts.
This key is normally regenerated every hour if it has been used, and
is never stored on disk.
Whenever a client connects, the daemon responds with its public
host and server keys.
The client compares the
RSA host key against its own database to verify that it has not changed.
The client then generates a 256-bit random number.
It encrypts this
random number using both the host key and the server key, and sends
the encrypted number to the server.
Both sides then use this
random number as a session key which is used to encrypt all further
communications in the session.
The rest of the session is encrypted
using a conventional cipher, currently Blowfish or 3DES, with 3DES
being used by default.
The client selects the encryption algorithm
to use from those offered by the server.
.Pp
For protocol 2,
forward security is provided through a Diffie-Hellman key agreement.
This key agreement results in a shared session key.
The rest of the session is encrypted using a symmetric cipher, currently
128-bit AES, Blowfish, 3DES, CAST128, Arcfour, 192-bit AES, or 256-bit AES.
The client selects the encryption algorithm
to use from those offered by the server.
Additionally, session integrity is provided
through a cryptographic message authentication code
(hmac-sha1 or hmac-md5).
.Pp
Finally, the server and the client enter an authentication dialog.
The client tries to authenticate itself using
host-based authentication,
public key authentication,
challenge-response authentication,
or password authentication.
.Pp
System security is not improved unless
.Nm rshd ,
.Nm rlogind ,
and
.Nm rexecd
are disabled (thus completely disabling
.Xr rlogin
and
.Xr rsh
into the machine).
.Sh COMMAND EXECUTION AND DATA FORWARDING
If the client successfully authenticates itself, a dialog for
preparing the session is entered.
At this time the client may request
things like allocating a pseudo-tty, forwarding X11 connections,
forwarding TCP connections, or forwarding the authentication agent
connection over the secure channel.
.Pp
Finally, the client either requests a shell or execution of a command.
The sides then enter session mode.
In this mode, either side may send
data at any time, and such data is forwarded to/from the shell or
command on the server side, and the user terminal in the client side.
.Pp
When the user program terminates and all forwarded X11 and other
connections have been closed, the server sends command exit status to
the client, and both sides exit.
d454 1
a454 1
Note that the client may specify TCP and/or X11
d471 1
a471 1
Forbids TCP forwarding when this key is used for authentication.
a495 6
.It Cm tunnel="n"
Force a
.Xr tun 4
device on the server.
Without this option, the next available device will be used if
the client requests a tunnel.
a504 2
.Pp
tunnel="0",command="sh /etc/netstart tun0" ssh-rsa AAAA...== reyk@@openbsd.org
@


1.205
log
@add support for hashing host names and addresses added to known_hosts files,
to improve privacy of which hosts user have been visiting; ok markus@@ deraadt@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.204 2005/02/25 10:55:13 jmc Exp $
d535 3
a537 3
and addresses should the file's contents be disclosed. Hashed hostnames start
with a 
.Ql \&|
@


1.204
log
@add /etc/motd and $HOME/.hushlogin to FILES;
from michael knudsen;
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.203 2004/12/06 11:41:03 dtucker Exp $
d534 8
d572 5
@


1.203
log
@Discard over-length authorized_keys entries rather than complaining when
they don't decode.  bz #884, with & ok djm@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.202 2004/08/26 16:00:55 markus Exp $
d633 14
@


1.202
log
@get rid of references to rhosts authentication; with jmc@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.201 2004/05/02 11:54:31 dtucker Exp $
d401 3
a403 1
(because of the size of the public key encoding).
@


1.202.2.1
log
@upgrade to OpenSSH 4.0
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.206 2005/03/01 14:59:49 jmc Exp $
d401 1
a401 3
(because of the size of the public key encoding) up to a limit of
8 kilobytes, which permits DSA keys up to 8 kilobits and RSA
keys up to 16 kilobits.
a531 8
Alternately, hostnames may be stored in a hashed form which hides host names
and addresses should the file's contents be disclosed.
Hashed hostnames start with a
.Ql |
character.
Only one hashed hostname may appear on a single line and none of the above
negation or wildcard operators may be applied.
.Pp
a562 5
.Bd -literal
# A hashed hostname
|1|JfKTdBh7rNbXkVAQCRp4OQoPfmI=|USECr3SWf1JUPsms5AqfD5QfxkM= ssh-rsa
AAAA1234.....=
.Ed
a630 14
.It Pa /etc/motd
See
.Xr motd 5 .
.It Pa $HOME/.hushlogin
This file is used to suppress printing the last login time and
.Pa /etc/motd ,
if
.Cm PrintLastLog
and
.Cm PrintMotd ,
respectively,
are enabled.
It does not suppress printing of the banner specified by
.Cm Banner .
@


1.202.2.2
log
@upgrade to OpenSSH 4.2
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.208 2005/06/08 03:50:00 djm Exp $
d83 1
a83 1
(normally 2048 bits) used to identify the host.
d331 1
a331 1
.Pa ~/.hushlogin ;
d348 1
a348 1
.Pa ~/.ssh/environment ,
d358 1
a358 1
.Pa ~/.ssh/rc
d371 1
a371 1
.Pa ~/.ssh/authorized_keys
d509 1
a509 1
.Pa ~/.ssh/known_hosts
d620 1
a620 1
.It Pa ~/.ssh/authorized_keys
d634 1
a634 1
.It Pa "/etc/ssh/ssh_known_hosts", "~/.ssh/known_hosts"
d644 1
a644 1
.Pa ~/.ssh/known_hosts
d649 1
a649 1
.It Pa ~/.hushlogin
d672 1
a672 1
.It Pa ~/.rhosts
d690 1
a690 1
.It Pa ~/.shosts
d739 1
a739 1
.It Pa ~/.ssh/environment
d750 1
a750 1
.It Pa ~/.ssh/rc
d795 1
a795 1
.Pa ~/.ssh/rc .
@


1.201
log
@Man page grammar fix (bz #858), from damerell at chiark.greenend.org.uk
via Debian; ok djm@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.200 2003/10/08 08:27:36 jmc Exp $
a108 2
authentication,
.Em rhosts
a112 4
.Em rhosts
authentication is normally disabled
because it is fundamentally insecure, but can be enabled in the server
configuration file if desired.
d644 5
a648 1
This file contains host-username pairs, separated by a space, one per
d669 3
a671 1
.Em rhosts
d690 1
a690 1
Additionally, successful RSA host authentication is normally required.
@


1.200
log
@scp and sftp: add options list and sort options. options list requested
by deraadt@@
sshd: use same format as ssh
ssh: remove wrong option from list
sftp-server: Subsystem is documented in ssh_config(5), not sshd(8)

ok deraadt@@ markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.199 2003/08/13 08:46:31 markus Exp $
d176 1
a176 1
by executing itself with the name it was started as, i.e.,
@


1.200.2.1
log
@upgrade to OpenSSH 3.9
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.201 2004/05/02 11:54:31 dtucker Exp $
d176 1
a176 1
by executing itself with the name and options it was started with, e.g.,
@


1.200.2.2
log
@upgrade to OpenSSH 4.0
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.206 2005/03/01 14:59:49 jmc Exp $
d109 2
d115 4
d407 1
a407 3
(because of the size of the public key encoding) up to a limit of
8 kilobytes, which permits DSA keys up to 8 kilobits and RSA
keys up to 16 kilobits.
a537 8
Alternately, hostnames may be stored in a hashed form which hides host names
and addresses should the file's contents be disclosed.
Hashed hostnames start with a
.Ql |
character.
Only one hashed hostname may appear on a single line and none of the above
negation or wildcard operators may be applied.
.Pp
a568 5
.Bd -literal
# A hashed hostname
|1|JfKTdBh7rNbXkVAQCRp4OQoPfmI=|USECr3SWf1JUPsms5AqfD5QfxkM= ssh-rsa
AAAA1234.....=
.Ed
a636 14
.It Pa /etc/motd
See
.Xr motd 5 .
.It Pa $HOME/.hushlogin
This file is used to suppress printing the last login time and
.Pa /etc/motd ,
if
.Cm PrintLastLog
and
.Cm PrintMotd ,
respectively,
are enabled.
It does not suppress printing of the banner specified by
.Cm Banner .
d650 1
a650 5
This file is used during
.Cm RhostsRSAAuthentication
and
.Cm HostbasedAuthentication
and contains host-username pairs, separated by a space, one per
d671 1
a671 3
.Cm RhostsRSAAuthentication
and
.Cm HostbasedAuthentication
d690 1
a690 1
Additionally, successful client host key authentication is required.
@


1.199
log
@remove RhostsAuthentication; suggested by djm@@ before; ok djm@@, deraadt@@,
fgsch@@, miod@@, henning@@, jakob@@ and others
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.198 2003/06/10 09:12:12 jmc Exp $
d47 1
a47 1
.Op Fl deiqtD46
a80 1
.Pp
a81 1
.Pp
d93 1
a93 1
The client then generates a 256 bit random number.
d108 1
a108 1
.Pa .rhosts
d110 1
a110 1
.Pa .rhosts
d115 2
a116 1
Rhosts authentication is normally disabled
a128 1
.Pp
a129 1
.Pp
d137 1
a137 1
128 bit AES, Blowfish, 3DES, CAST128, Arcfour, 192 bit AES, or 256 bit AES.
a147 1
.Pp
a148 1
.Pp
d167 3
a169 2
can be configured using command-line options or a configuration
file.
d181 8
d192 6
d257 1
a257 1
often is that the key is not stored anywhere, and after about an hour,
d266 2
a316 14
.It Fl D
When this option is specified
.Nm
will not detach and does not become a daemon.
This allows easy monitoring of
.Nm sshd .
.It Fl 4
Forces
.Nm
to use IPv4 addresses only.
.It Fl 6
Forces
.Nm
to use IPv6 addresses only.
d353 3
a355 3
Reads
.Pa $HOME/.ssh/environment
if it exists and users are allowed to change their environment.
d494 1
a494 1
.Ar host/port .
d502 1
a502 1
1024 33 12121.\|.\|.\|312314325 ylo@@foo.bar
d504 1
a504 1
from="*.niksula.hut.fi,!pc.niksula.hut.fi" 1024 35 23.\|.\|.\|2334 ylo@@niksula
d506 1
a506 1
command="dump /home",no-pty,no-port-forwarding 1024 33 23.\|.\|.\|2323 backup.hut.fi
d508 1
a508 1
permitopen="10.2.1.55:80",permitopen="10.2.1.56:25" 1024 33 23.\|.\|.\|2323
d566 1
a566 1
closenet,.\|.\|.\|,130.233.208.41 1024 37 159.\|.\|.93 closenet.hut.fi
d625 1
a625 1
.It Pa "/etc/ssh/ssh_known_hosts" and "$HOME/.ssh/known_hosts"
d659 1
a659 1
If is also possible to use netgroups in the file.
d671 1
a671 1
.Pa .rhosts
d778 2
d783 1
@


1.199.2.1
log
@upgrade to OpenSSH 3.8
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.200 2003/10/08 08:27:36 jmc Exp $
d47 1
a47 1
.Op Fl 46Ddeiqt
d81 1
d83 1
d95 1
a95 1
The client then generates a 256-bit random number.
d110 1
a110 1
.Em rhosts
d112 1
a112 1
.Em rhosts
d117 1
a117 2
.Em rhosts
authentication is normally disabled
d130 1
d132 1
d140 1
a140 1
128-bit AES, Blowfish, 3DES, CAST128, Arcfour, 192-bit AES, or 256-bit AES.
d151 1
d153 1
d172 2
a173 3
can be configured using command-line options or a configuration file
(by default
.Xr sshd_config 5 ) .
a184 8
.It Fl 4
Forces
.Nm
to use IPv4 addresses only.
.It Fl 6
Forces
.Nm
to use IPv6 addresses only.
a187 6
.It Fl D
When this option is specified,
.Nm
will not detach and does not become a daemon.
This allows easy monitoring of
.Nm sshd .
d247 1
a247 1
often is that the key is not stored anywhere, and after about an hour
a255 2
For full details of the options, and their values, see
.Xr sshd_config 5 .
d305 14
d355 3
a357 3
Reads the file
.Pa $HOME/.ssh/environment ,
if it exists, and users are allowed to change their environment.
d496 1
a496 1
.Ar host Ns / Ns Ar port .
d504 1
a504 1
1024 33 12121...312314325 ylo@@foo.bar
d506 1
a506 1
from="*.niksula.hut.fi,!pc.niksula.hut.fi" 1024 35 23...2334 ylo@@niksula
d508 1
a508 1
command="dump /home",no-pty,no-port-forwarding 1024 33 23...2323 backup.hut.fi
d510 1
a510 1
permitopen="10.2.1.55:80",permitopen="10.2.1.56:25" 1024 33 23...2323
d568 1
a568 1
closenet,...,130.233.208.41 1024 37 159...93 closenet.hut.fi
d627 1
a627 1
.It Pa "/etc/ssh/ssh_known_hosts", "$HOME/.ssh/known_hosts"
d661 1
a661 1
It is also possible to use netgroups in the file.
d673 1
a673 1
.Em rhosts
a779 2
.Xr chroot 2 ,
.Xr hosts_access 5 ,
a782 1
.Xr inetd 8 ,
@


1.199.2.2
log
@upgrade to OpenSSH 3.9
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.201 2004/05/02 11:54:31 dtucker Exp $
d176 1
a176 1
by executing itself with the name and options it was started with, e.g.,
@


1.198
log
@- section reorder
- COMPATIBILITY merge
- macro cleanup
- kill whitespace at EOL
- new sentence, new line

ssh pages ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.197 2003/05/20 12:09:32 jmc Exp $
a294 1
.Cm RhostsAuthentication ,
@


1.197
log
@new sentence, new line
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.196 2003/04/30 20:41:07 david Exp $
a773 11
.Sh AUTHORS
OpenSSH is a derivative of the original and free
ssh 1.2.12 release by Tatu Ylonen.
Aaron Campbell, Bob Beck, Markus Friedl, Niels Provos,
Theo de Raadt and Dug Song
removed many bugs, re-added newer features and
created OpenSSH.
Markus Friedl contributed the support for SSH
protocol versions 1.5 and 2.0.
Niels Provos and Markus Friedl contributed support
for privilege separation.
d805 11
@


1.196
log
@fix invalid .Pf macro usage introduced in previous commit
ok jmc@@ mouring@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.195 2003/04/30 01:16:20 mouring Exp $
d500 3
a502 3
options may be applied separated by commas. No pattern matching is
performed on the specified hostnames, they must be literal domains or
addresses.
d528 3
a530 3
.Pf ( Ql \&* 
and 
.Ql \&? 
@


1.195
log
@Escape ?, * and ! in .Ql for nroff compatibility.  OpenSSH Portable Bug #550
and * escaping suggested by jmc@@.
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.194 2003/01/31 21:54:40 jmc Exp $
d432 1
a432 2
.Pf ( 
.Ql \&*
d527 2
a528 2
Hostnames is a comma-separated list of patterns (
.Ql \&* 
@


1.194
log
@typos;
eeprom(8): added .Ar to fields, removed references to sun3
sshd(8): help and ok markus@@

help and ok millert@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.193 2002/09/24 20:59:44 todd Exp $
d432 2
a433 1
.Pf ( Ql *
d435 1
a435 1
.Ql ?
d439 1
a439 1
.Ql ! ;
d528 5
a532 1
Hostnames is a comma-separated list of patterns ('*' and '?' act as
d537 1
a537 1
.Ql !
@


1.194.2.1
log
@upgrade to OpenSSH 3.7
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.199 2003/08/13 08:46:31 markus Exp $
d295 1
d432 1
a432 1
.Pf ( Ql \&*
d434 1
a434 1
.Ql \&?
d438 1
a438 1
.Ql \&! ;
d500 3
a502 3
options may be applied separated by commas.
No pattern matching is performed on the specified hostnames,
they must be literal domains or addresses.
d527 1
a527 5
Hostnames is a comma-separated list of patterns
.Pf ( Ql \&*
and
.Ql \&?
act as
d532 1
a532 1
.Ql \&!
d770 11
a811 11
.Sh AUTHORS
OpenSSH is a derivative of the original and free
ssh 1.2.12 release by Tatu Ylonen.
Aaron Campbell, Bob Beck, Markus Friedl, Niels Provos,
Theo de Raadt and Dug Song
removed many bugs, re-added newer features and
created OpenSSH.
Markus Friedl contributed the support for SSH
protocol versions 1.5 and 2.0.
Niels Provos and Markus Friedl contributed support
for privilege separation.
@


1.194.2.2
log
@upgrade to OpenSSH 3.8upgrade to OpenSSH 3.8upgrade to OpenSSH 3.8
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.200 2003/10/08 08:27:36 jmc Exp $
d47 1
a47 1
.Op Fl 46Ddeiqt
d81 1
d83 1
d95 1
a95 1
The client then generates a 256-bit random number.
d110 1
a110 1
.Em rhosts
d112 1
a112 1
.Em rhosts
d117 1
a117 2
.Em rhosts
authentication is normally disabled
d130 1
d132 1
d140 1
a140 1
128-bit AES, Blowfish, 3DES, CAST128, Arcfour, 192-bit AES, or 256-bit AES.
d151 1
d153 1
d172 2
a173 3
can be configured using command-line options or a configuration file
(by default
.Xr sshd_config 5 ) .
a184 8
.It Fl 4
Forces
.Nm
to use IPv4 addresses only.
.It Fl 6
Forces
.Nm
to use IPv6 addresses only.
a187 6
.It Fl D
When this option is specified,
.Nm
will not detach and does not become a daemon.
This allows easy monitoring of
.Nm sshd .
d247 1
a247 1
often is that the key is not stored anywhere, and after about an hour
a255 2
For full details of the options, and their values, see
.Xr sshd_config 5 .
d305 14
d355 3
a357 3
Reads the file
.Pa $HOME/.ssh/environment ,
if it exists, and users are allowed to change their environment.
d496 1
a496 1
.Ar host Ns / Ns Ar port .
d504 1
a504 1
1024 33 12121...312314325 ylo@@foo.bar
d506 1
a506 1
from="*.niksula.hut.fi,!pc.niksula.hut.fi" 1024 35 23...2334 ylo@@niksula
d508 1
a508 1
command="dump /home",no-pty,no-port-forwarding 1024 33 23...2323 backup.hut.fi
d510 1
a510 1
permitopen="10.2.1.55:80",permitopen="10.2.1.56:25" 1024 33 23...2323
d568 1
a568 1
closenet,...,130.233.208.41 1024 37 159...93 closenet.hut.fi
d627 1
a627 1
.It Pa "/etc/ssh/ssh_known_hosts", "$HOME/.ssh/known_hosts"
d661 1
a661 1
It is also possible to use netgroups in the file.
d673 1
a673 1
.Em rhosts
a779 2
.Xr chroot 2 ,
.Xr hosts_access 5 ,
a782 1
.Xr inetd 8 ,
@


1.193
log
@tweak the example $HOME/.ssh/rc script to not show on any cmdline the
sensitive data it handles. This fixes bug # 402 as reported by
kolya@@mit.edu (Nickolai Zeldovich).

ok markus@@ and stevesk@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.192 2002/09/16 22:03:13 stevesk Exp $
d46 1
d56 1
d80 1
a80 1
works as follows.
d91 1
a91 1
Whenever a client connects the daemon responds with its public
d124 1
a124 1
.Xr rexecd
d194 3
a196 1
Multiple -d options increase the debugging level.
d232 2
a233 1
is being run from inetd.
d290 1
a290 1
is also be used to prevent
d454 1
a454 1
If a 8-bit clean channel is required,
d514 1
a514 1
.Pa /etc/ssh/ssh_known_hosts ,
d635 1
a635 1
can but need not be world-readable.
d652 1
a652 1
without password.
d721 3
a723 1
If this file exists, it is run with /bin/sh after reading the
@


1.193.2.1
log
@Update to OpenSSH 3.6
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.194 2003/01/31 21:54:40 jmc Exp $
a45 1
.Bk -words
a54 1
.Ek
d78 1
a78 1
works as follows:
d89 1
a89 1
Whenever a client connects, the daemon responds with its public
d122 1
a122 1
.Nm rexecd
d192 1
a192 3
Multiple
.Fl d
options increase the debugging level.
d228 1
a228 2
is being run from
.Xr inetd 8 .
d285 1
a285 1
may also be used to prevent
d449 1
a449 1
If an 8-bit clean channel is required,
d509 1
a509 1
.Pa /etc/ssh/ssh_known_hosts
d630 1
a630 1
can, but need not be, world-readable.
d647 1
a647 1
without a password.
d716 1
a716 3
If this file exists, it is run with
.Pa /bin/sh
after reading the
@


1.193.2.2
log
@upgrade to OpenSSH 3.7
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.199 2003/08/13 08:46:31 markus Exp $
d295 1
d432 1
a432 1
.Pf ( Ql \&*
d434 1
a434 1
.Ql \&?
d438 1
a438 1
.Ql \&! ;
d500 3
a502 3
options may be applied separated by commas.
No pattern matching is performed on the specified hostnames,
they must be literal domains or addresses.
d527 1
a527 5
Hostnames is a comma-separated list of patterns
.Pf ( Ql \&*
and
.Ql \&?
act as
d532 1
a532 1
.Ql \&!
d770 11
a811 11
.Sh AUTHORS
OpenSSH is a derivative of the original and free
ssh 1.2.12 release by Tatu Ylonen.
Aaron Campbell, Bob Beck, Markus Friedl, Niels Provos,
Theo de Raadt and Dug Song
removed many bugs, re-added newer features and
created OpenSSH.
Markus Friedl contributed the support for SSH
protocol versions 1.5 and 2.0.
Niels Provos and Markus Friedl contributed support
for privilege separation.
@


1.192
log
@reference moduli(5) in FILES /etc/moduli.
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.191 2002/09/04 18:52:42 stevesk Exp $
d740 1
a740 1
		xauth add unix:`echo $DISPLAY |
d744 2
a745 2
		xauth add $DISPLAY $proto $cookie
	fi
@


1.191
log
@default LoginGraceTime to 2m; 1m may be too short for slow systems.
ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.190 2002/08/21 19:38:06 stevesk Exp $
d589 2
@


1.190
log
@change LoginGraceTime default to 1 minute; ok mouring@@ markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.189 2002/08/21 11:20:59 espie Exp $
d206 1
a206 1
60 seconds).
@


1.189
log
@`RSA' updated to refer to `public key', where it matters.

okay markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.188 2002/08/12 17:30:35 stevesk Exp $
d206 1
a206 1
600 seconds).
@


1.188
log
@more PermitUserEnvironment; ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.187 2002/08/02 16:00:07 marc Exp $
d392 3
a394 3
The options fields
are optional; its presence is determined by whether the line starts
with a number or not (the option field never starts with a number).
d405 1
a405 1
(because of the size of the RSA key modulus).
d424 1
a424 1
Specifies that in addition to RSA authentication, the canonical name
d436 1
a436 1
of this option is to optionally increase security: RSA authentication
d454 1
a454 1
to restrict certain RSA keys to perform just a specific operation.
@


1.187
log
@note that .ssh/environment is only read when
allowed (PermitUserEnvironment in sshd_config).
OK markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.186 2002/06/22 16:45:29 stevesk Exp $
d354 1
a354 1
See
d356 1
a356 1
in
d465 4
d709 4
@


1.186
log
@use process ID vs. pid/PID/process identifier
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.185 2002/06/22 16:32:54 stevesk Exp $
d353 5
a357 1
if it exists.
@


1.185
log
@add /var/empty in FILES section
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.184 2002/06/20 19:56:07 stevesk Exp $
d592 1
a592 1
concurrently for different ports, this contains the pid of the one
@


1.184
log
@move configuration file options from ssh.1/sshd.8 to
ssh_config.5/sshd_config.5; ok deraadt@@ millert@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.183 2002/05/29 03:06:30 stevesk Exp $
d581 7
@


1.183
log
@spelling
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.182 2002/05/15 21:56:38 markus Exp $
d323 2
a324 624
The file contains keyword-argument pairs, one per line.
Lines starting with
.Ql #
and empty lines are interpreted as comments.
.Pp
The possible
keywords and their meanings are as follows (note that
keywords are case-insensitive and arguments are case-sensitive):
.Bl -tag -width Ds
.It Cm AFSTokenPassing
Specifies whether an AFS token may be forwarded to the server.
Default is
.Dq no .
.It Cm AllowGroups
This keyword can be followed by a list of group name patterns, separated
by spaces.
If specified, login is allowed only for users whose primary
group or supplementary group list matches one of the patterns.
.Ql \&*
and
.Ql ?
can be used as
wildcards in the patterns.
Only group names are valid; a numerical group ID is not recognized.
By default, login is allowed for all groups.
.Pp
.It Cm AllowTcpForwarding
Specifies whether TCP forwarding is permitted.
The default is
.Dq yes .
Note that disabling TCP forwarding does not improve security unless
users are also denied shell access, as they can always install their
own forwarders.
.Pp
.It Cm AllowUsers
This keyword can be followed by a list of user name patterns, separated
by spaces.
If specified, login is allowed only for users names that
match one of the patterns.
.Ql \&*
and
.Ql ?
can be used as
wildcards in the patterns.
Only user names are valid; a numerical user ID is not recognized.
By default, login is allowed for all users.
If the pattern takes the form USER@@HOST then USER and HOST
are separately checked, restricting logins to particular
users from particular hosts.
.Pp
.It Cm AuthorizedKeysFile
Specifies the file that contains the public keys that can be used
for user authentication.
.Cm AuthorizedKeysFile
may contain tokens of the form %T which are substituted during connection
set-up. The following tokens are defined: %% is replaced by a literal '%',
%h is replaced by the home directory of the user being authenticated and
%u is replaced by the username of that user.
After expansion,
.Cm AuthorizedKeysFile
is taken to be an absolute path or one relative to the user's home
directory.
The default is
.Dq .ssh/authorized_keys .
.It Cm Banner
In some jurisdictions, sending a warning message before authentication
may be relevant for getting legal protection.
The contents of the specified file are sent to the remote user before
authentication is allowed.
This option is only available for protocol version 2.
By default, no banner is displayed.
.Pp
.It Cm ChallengeResponseAuthentication
Specifies whether challenge response authentication is allowed.
All authentication styles from
.Xr login.conf 5
are supported.
The default is
.Dq yes .
.It Cm Ciphers
Specifies the ciphers allowed for protocol version 2.
Multiple ciphers must be comma-separated.
The default is
.Pp
.Bd -literal
  ``aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour,
    aes192-cbc,aes256-cbc''
.Ed
.It Cm ClientAliveInterval
Sets a timeout interval in seconds after which if no data has been received
from the client,
.Nm
will send a message through the encrypted
channel to request a response from the client.
The default
is 0, indicating that these messages will not be sent to the client.
This option applies to protocol version 2 only.
.It Cm ClientAliveCountMax
Sets the number of client alive messages (see above) which may be
sent without
.Nm
receiving any messages back from the client. If this threshold is
reached while client alive messages are being sent,
.Nm
will disconnect the client, terminating the session. It is important
to note that the use of client alive messages is very different from
.Cm KeepAlive
(below). The client alive messages are sent through the
encrypted channel and therefore will not be spoofable. The TCP keepalive
option enabled by
.Cm KeepAlive
is spoofable. The client alive mechanism is valuable when the client or
server depend on knowing when a connection has become inactive.
.Pp
The default value is 3. If
.Cm ClientAliveInterval
(above) is set to 15, and
.Cm ClientAliveCountMax
is left at the default, unresponsive ssh clients
will be disconnected after approximately 45 seconds.
.It Cm DenyGroups
This keyword can be followed by a list of group name patterns, separated
by spaces.
Login is disallowed for users whose primary group or supplementary
group list matches one of the patterns.
.Ql \&*
and
.Ql ?
can be used as
wildcards in the patterns.
Only group names are valid; a numerical group ID is not recognized.
By default, login is allowed for all groups.
.Pp
.It Cm DenyUsers
This keyword can be followed by a list of user name patterns, separated
by spaces.
Login is disallowed for user names that match one of the patterns.
.Ql \&*
and
.Ql ?
can be used as wildcards in the patterns.
Only user names are valid; a numerical user ID is not recognized.
By default, login is allowed for all users.
If the pattern takes the form USER@@HOST then USER and HOST
are separately checked, restricting logins to particular
users from particular hosts.
.It Cm GatewayPorts
Specifies whether remote hosts are allowed to connect to ports
forwarded for the client.
By default,
.Nm
binds remote port forwardings to the loopback address.  This
prevents other remote hosts from connecting to forwarded ports.
.Cm GatewayPorts
can be used to specify that
.Nm
should bind remote port forwardings to the wildcard address,
thus allowing remote hosts to connect to forwarded ports.
The argument must be
.Dq yes
or
.Dq no .
The default is
.Dq no .
.It Cm HostbasedAuthentication
Specifies whether rhosts or /etc/hosts.equiv authentication together
with successful public key client host authentication is allowed
(hostbased authentication).
This option is similar to
.Cm RhostsRSAAuthentication
and applies to protocol version 2 only.
The default is
.Dq no .
.It Cm HostKey
Specifies a file containing a private host key
used by SSH.
The default is
.Pa /etc/ssh/ssh_host_key
for protocol version 1, and
.Pa /etc/ssh/ssh_host_rsa_key
and
.Pa /etc/ssh/ssh_host_dsa_key
for protocol version 2.
Note that
.Nm
will refuse to use a file if it is group/world-accessible.
It is possible to have multiple host key files.
.Dq rsa1
keys are used for version 1 and
.Dq dsa
or
.Dq rsa
are used for version 2 of the SSH protocol.
.It Cm IgnoreRhosts
Specifies that
.Pa .rhosts
and
.Pa .shosts
files will not be used in
.Cm RhostsAuthentication ,
.Cm RhostsRSAAuthentication
or
.Cm HostbasedAuthentication .
.Pp
.Pa /etc/hosts.equiv
and
.Pa /etc/shosts.equiv
are still used.
The default is
.Dq yes .
.It Cm IgnoreUserKnownHosts
Specifies whether
.Nm
should ignore the user's
.Pa $HOME/.ssh/known_hosts
during
.Cm RhostsRSAAuthentication
or
.Cm HostbasedAuthentication .
The default is
.Dq no .
.It Cm KeepAlive
Specifies whether the system should send TCP keepalive messages to the
other side.
If they are sent, death of the connection or crash of one
of the machines will be properly noticed.
However, this means that
connections will die if the route is down temporarily, and some people
find it annoying.
On the other hand, if keepalives are not sent,
sessions may hang indefinitely on the server, leaving
.Dq ghost
users and consuming server resources.
.Pp
The default is
.Dq yes
(to send keepalives), and the server will notice
if the network goes down or the client host crashes.
This avoids infinitely hanging sessions.
.Pp
To disable keepalives, the value should be set to
.Dq no .
.It Cm KerberosAuthentication
Specifies whether Kerberos authentication is allowed.
This can be in the form of a Kerberos ticket, or if
.Cm PasswordAuthentication
is yes, the password provided by the user will be validated through
the Kerberos KDC.
To use this option, the server needs a
Kerberos servtab which allows the verification of the KDC's identity.
Default is
.Dq no .
.It Cm KerberosOrLocalPasswd
If set then if password authentication through Kerberos fails then
the password will be validated via any additional local mechanism
such as
.Pa /etc/passwd .
Default is
.Dq yes .
.It Cm KerberosTgtPassing
Specifies whether a Kerberos TGT may be forwarded to the server.
Default is
.Dq no ,
as this only works when the Kerberos KDC is actually an AFS kaserver.
.It Cm KerberosTicketCleanup
Specifies whether to automatically destroy the user's ticket cache
file on logout.
Default is
.Dq yes .
.It Cm KeyRegenerationInterval
In protocol version 1, the ephemeral server key is automatically regenerated
after this many seconds (if it has been used).
The purpose of regeneration is to prevent
decrypting captured sessions by later breaking into the machine and
stealing the keys.
The key is never stored anywhere.
If the value is 0, the key is never regenerated.
The default is 3600 (seconds).
.It Cm ListenAddress
Specifies the local addresses
.Nm
should listen on.
The following forms may be used:
.Pp
.Bl -item -offset indent -compact
.It
.Cm ListenAddress
.Sm off
.Ar host No | Ar IPv4_addr No | Ar IPv6_addr
.Sm on
.It
.Cm ListenAddress
.Sm off
.Ar host No | Ar IPv4_addr No : Ar port
.Sm on
.It
.Cm ListenAddress
.Sm off
.Oo
.Ar host No | Ar IPv6_addr Oc : Ar port
.Sm on
.El
.Pp
If
.Ar port
is not specified,
.Nm
will listen on the address and all prior
.Cm Port
options specified. The default is to listen on all local
addresses.  Multiple
.Cm ListenAddress
options are permitted. Additionally, any
.Cm Port
options must precede this option for non port qualified addresses.
.It Cm LoginGraceTime
The server disconnects after this time if the user has not
successfully logged in.
If the value is 0, there is no time limit.
The default is 600 (seconds).
.It Cm LogLevel
Gives the verbosity level that is used when logging messages from
.Nm sshd .
The possible values are:
QUIET, FATAL, ERROR, INFO, VERBOSE, DEBUG, DEBUG1, DEBUG2 and DEBUG3.
The default is INFO.  DEBUG and DEBUG1 are equivalent.  DEBUG2
and DEBUG3 each specify higher levels of debugging output.
Logging with a DEBUG level violates the privacy of users
and is not recommended.
.It Cm MACs
Specifies the available MAC (message authentication code) algorithms.
The MAC algorithm is used in protocol version 2
for data integrity protection.
Multiple algorithms must be comma-separated.
The default is
.Dq hmac-md5,hmac-sha1,hmac-ripemd160,hmac-sha1-96,hmac-md5-96 .
.It Cm MaxStartups
Specifies the maximum number of concurrent unauthenticated connections to the
.Nm
daemon.
Additional connections will be dropped until authentication succeeds or the
.Cm LoginGraceTime
expires for a connection.
The default is 10.
.Pp
Alternatively, random early drop can be enabled by specifying
the three colon separated values
.Dq start:rate:full
(e.g., "10:30:60").
.Nm
will refuse connection attempts with a probability of
.Dq rate/100
(30%)
if there are currently
.Dq start
(10)
unauthenticated connections.
The probability increases linearly and all connection attempts
are refused if the number of unauthenticated connections reaches
.Dq full
(60).
.It Cm PasswordAuthentication
Specifies whether password authentication is allowed.
The default is
.Dq yes .
.It Cm PermitEmptyPasswords
When password authentication is allowed, it specifies whether the
server allows login to accounts with empty password strings.
The default is
.Dq no .
.It Cm PermitRootLogin
Specifies whether root can login using
.Xr ssh 1 .
The argument must be
.Dq yes ,
.Dq without-password ,
.Dq forced-commands-only
or
.Dq no .
The default is
.Dq yes .
.Pp
If this option is set to
.Dq without-password
password authentication is disabled for root.
.Pp
If this option is set to
.Dq forced-commands-only
root login with public key authentication will be allowed,
but only if the
.Ar command
option has been specified
(which may be useful for taking remote backups even if root login is
normally not allowed). All other authentication methods are disabled
for root.
.Pp
If this option is set to
.Dq no
root is not allowed to login.
.It Cm PidFile
Specifies the file that contains the process identifier of the
.Nm
daemon.
The default is
.Pa /var/run/sshd.pid .
.It Cm Port
Specifies the port number that
.Nm
listens on.
The default is 22.
Multiple options of this type are permitted.
See also
.Cm ListenAddress .
.It Cm PrintLastLog
Specifies whether
.Nm
should print the date and time when the user last logged in.
The default is
.Dq yes .
.It Cm PrintMotd
Specifies whether
.Nm
should print
.Pa /etc/motd
when a user logs in interactively.
(On some systems it is also printed by the shell,
.Pa /etc/profile ,
or equivalent.)
The default is
.Dq yes .
.It Cm Protocol
Specifies the protocol versions
.Nm
should support.
The possible values are
.Dq 1
and
.Dq 2 .
Multiple versions must be comma-separated.
The default is
.Dq 2,1 .
.It Cm PubkeyAuthentication
Specifies whether public key authentication is allowed.
The default is
.Dq yes .
Note that this option applies to protocol version 2 only.
.It Cm RhostsAuthentication
Specifies whether authentication using rhosts or /etc/hosts.equiv
files is sufficient.
Normally, this method should not be permitted because it is insecure.
.Cm RhostsRSAAuthentication
should be used
instead, because it performs RSA-based host authentication in addition
to normal rhosts or /etc/hosts.equiv authentication.
The default is
.Dq no .
This option applies to protocol version 1 only.
.It Cm RhostsRSAAuthentication
Specifies whether rhosts or /etc/hosts.equiv authentication together
with successful RSA host authentication is allowed.
The default is
.Dq no .
This option applies to protocol version 1 only.
.It Cm RSAAuthentication
Specifies whether pure RSA authentication is allowed.
The default is
.Dq yes .
This option applies to protocol version 1 only.
.It Cm ServerKeyBits
Defines the number of bits in the ephemeral protocol version 1 server key.
The minimum value is 512, and the default is 768.
.It Cm StrictModes
Specifies whether
.Nm
should check file modes and ownership of the
user's files and home directory before accepting login.
This is normally desirable because novices sometimes accidentally leave their
directory or files world-writable.
The default is
.Dq yes .
.It Cm Subsystem
Configures an external subsystem (e.g., file transfer daemon).
Arguments should be a subsystem name and a command to execute upon subsystem
request.
The command
.Xr sftp-server 8
implements the
.Dq sftp
file transfer subsystem.
By default no subsystems are defined.
Note that this option applies to protocol version 2 only.
.It Cm SyslogFacility
Gives the facility code that is used when logging messages from
.Nm sshd .
The possible values are: DAEMON, USER, AUTH, LOCAL0, LOCAL1, LOCAL2,
LOCAL3, LOCAL4, LOCAL5, LOCAL6, LOCAL7.
The default is AUTH.
.It Cm UseLogin
Specifies whether
.Xr login 1
is used for interactive login sessions.
The default is
.Dq no .
Note that
.Xr login 1
is never used for remote command execution.
Note also, that if this is enabled,
.Cm X11Forwarding
will be disabled because
.Xr login 1
does not know how to handle
.Xr xauth 1
cookies.  If
.Cm UsePrivilegeSeparation
is specified, it will be disabled after authentication.
.It Cm UsePrivilegeSeparation
Specifies whether
.Nm
separated privileges by creating an unprivileged child process
to deal with incoming network traffic.  After successful authentication,
another process will be created that has the privilege of the authenticated
user.  The goal of privilege separation is to prevent privilege
escalation by containing any corruption within the unprivileged processes.
The default is
.Dq yes .
.It Cm VerifyReverseMapping
Specifies whether
.Nm
should try to verify the remote host name and check that
the resolved host name for the remote IP address maps back to the
very same IP address.
The default is
.Dq no .
.It Cm X11DisplayOffset
Specifies the first display number available for
.Nm sshd Ns 's
X11 forwarding.
This prevents
.Nm
from interfering with real X11 servers.
The default is 10.
.It Cm X11Forwarding
Specifies whether X11 forwarding is permitted.
The default is
.Dq no .
Note that disabling X11 forwarding does not improve security in any
way, as users can always install their own forwarders.
X11 forwarding is automatically disabled if
.Cm UseLogin
is enabled.
.It Cm X11UseLocalhost
Specifies whether
.Nm
should bind the X11 forwarding server to the loopback address or to
the wildcard address.  By default,
.Nm
binds the forwarding server to the loopback address and sets the
hostname part of the
.Ev DISPLAY
environment variable to
.Dq localhost .
This prevents remote hosts from connecting to the fake display.
However, some older X11 clients may not function with this
configuration.
.Cm X11UseLocalhost
may be set to
.Dq no
to specify that the forwarding server should be bound to the wildcard
address.
The argument must be
.Dq yes
or
.Dq no .
The default is
.Dq yes .
.It Cm XAuthLocation
Specifies the location of the
.Xr xauth 1
program.
The default is
.Pa /usr/X11R6/bin/xauth .
.El
.Ss Time Formats
.Pp
.Nm
command-line arguments and configuration file options that specify time
may be expressed using a sequence of the form:
.Sm off
.Ar time Oo Ar qualifier Oc ,
.Sm on
where
.Ar time
is a positive integer value and
.Ar qualifier
is one of the following:
.Pp
.Bl -tag -width Ds -compact -offset indent
.It Cm <none>
seconds
.It Cm s | Cm S
seconds
.It Cm m | Cm M
minutes
.It Cm h | Cm H
hours
.It Cm d | Cm D
days
.It Cm w | Cm W
weeks
.El
.Pp
Each member of the sequence is added together to calculate
the total time value.
.Pp
Time format examples:
.Pp
.Bl -tag -width Ds -compact -offset indent
.It 600
600 seconds (10 minutes)
.It 10m
10 minutes
.It 1h30m
1 hour 30 minutes (90 minutes)
.El
d560 2
a561 2
This file should be writable by root only, but it is recommended
(though not necessary) that it be world-readable.
d762 1
@


1.182
log
@re-enable privsep and disable setuid for post-3.2.2
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.181 2002/05/15 21:02:53 markus Exp $
d474 1
a474 1
binds remote port forwardings to the loopback addresss.  This
@


1.181
log
@disable privsep and enable setuid for the 3.2.2 release
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.180 2002/05/06 23:34:33 millert Exp $
d847 1
a847 1
.Dq no .
@


1.180
log
@Kill/adjust r(login|exec)d? references now that those are no longer in
the tree.
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.179 2002/05/04 02:39:35 deraadt Exp $
d847 1
a847 1
.Dq yes .
@


1.179
log
@enable privsep by default; provos ok
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.178 2002/04/22 16:16:53 markus Exp $
d119 2
a120 2
.Xr rshd 8 ,
.Xr rlogind 8 ,
d122 1
a122 1
.Xr rexecd 8
d124 1
a124 1
.Xr rlogin 1
d126 1
a126 1
.Xr rsh 1
@


1.178
log
@do not auto-enable KerberosAuthentication; ok djm@@, provos@@, deraadt@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.177 2002/04/21 16:19:27 stevesk Exp $
d847 1
a847 1
.Dq no .
@


1.177
log
@document default AFSTokenPassing no; ok deraadt@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.176 2002/04/05 20:56:21 stevesk Exp $
d574 1
a574 1
.Dq yes .
@


1.176
log
@clarify sshrc some and handle X11UseLocalhost=yes; ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.175 2002/03/29 19:16:22 stevesk Exp $
d335 1
a335 1
.Dq yes .
@


1.176.2.1
log
@Update to OpenSSH-3.2.2
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.181 2002/05/15 21:02:53 markus Exp $
d119 2
a120 2
.Nm rshd ,
.Nm rlogind ,
d122 1
a122 1
.Xr rexecd
d124 1
a124 1
.Xr rlogin
d126 1
a126 1
.Xr rsh
d335 1
a335 1
.Dq no .
d574 1
a574 1
.Dq no .
@


1.176.2.2
log
@Update to OpenSSH-3.2.3
@
text
@@


1.176.2.3
log
@- create /var/empty directory before install
- enable privsep by default
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.176.2.2 2002/05/18 04:50:38 jason Exp $
d847 1
a847 1
.Dq yes .
@


1.176.2.4
log
@Pull in OpenSSH-3.4
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.186 2002/06/22 16:45:29 stevesk Exp $
d323 624
a946 2
The file format and configuration options are described in
.Xr sshd_config 5 .
d1182 2
a1183 2
The file format and configuration options are described in
.Xr sshd_config 5 .
a1202 7
.It Pa /var/empty
.Xr chroot 2
directory used by
.Nm
during privilege separation in the pre-authentication phase.
The directory should not contain any files and must be owned by root
and not group or world-writable.
d1207 1
a1207 1
concurrently for different ports, this contains the process ID of the one
a1383 1
.Xr sshd_config 5 ,
@


1.176.2.5
log
@Update to OpenSSH 3.5
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.193 2002/09/24 20:59:44 todd Exp $
d206 1
a206 1
120 seconds).
d353 1
a353 5
if it exists and users are allowed to change their environment.
See the
.Cm PermitUserEnvironment
option in
.Xr sshd_config 5 .
d388 3
a390 3
The options field
is optional; its presence is determined by whether the line starts
with a number or not (the options field never starts with a number).
d401 1
a401 1
(because of the size of the public key encoding).
d420 1
a420 1
Specifies that in addition to public key authentication, the canonical name
d432 1
a432 1
of this option is to optionally increase security: public key authentication
d450 1
a450 1
to restrict certain public keys to perform just a specific operation.
a460 4
Environment processing is disabled by default and is
controlled via the
.Cm PermitUserEnvironment
option.
a580 2
The file format is described in
.Xr moduli 5 .
a700 4
Environment processing is disabled by default and is
controlled via the
.Cm PermitUserEnvironment
option.
d726 1
a726 1
		echo add unix:`echo $DISPLAY |
d730 2
a731 2
		echo add $DISPLAY $proto $cookie
	fi | xauth -q -
@


1.176.2.6
log
@Merge OpenSSH 3.6.1
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.194 2003/01/31 21:54:40 jmc Exp $
a45 1
.Bk -words
a54 1
.Ek
d78 1
a78 1
works as follows:
d89 1
a89 1
Whenever a client connects, the daemon responds with its public
d122 1
a122 1
.Nm rexecd
d192 1
a192 3
Multiple
.Fl d
options increase the debugging level.
d228 1
a228 2
is being run from
.Xr inetd 8 .
d285 1
a285 1
may also be used to prevent
d449 1
a449 1
If an 8-bit clean channel is required,
d509 1
a509 1
.Pa /etc/ssh/ssh_known_hosts
d630 1
a630 1
can, but need not be, world-readable.
d647 1
a647 1
without a password.
d716 1
a716 3
If this file exists, it is run with
.Pa /bin/sh
after reading the
@


1.175
log
@RSA key modulus size minimum 768; ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.174 2002/03/26 11:34:49 markus Exp $
d1319 4
a1322 2
If X11 spoofing is in use, this will receive the "proto cookie" pair in
standard input (and
d1324 2
a1325 2
in environment).
This must call
d1327 3
a1329 1
in that case.
d1338 8
a1345 2
	if read proto cookie; then
		echo add $DISPLAY $proto $cookie | xauth -q -
d1347 1
d1353 1
a1353 1
does not exist either, xauth is used to store the cookie.
@


1.174
log
@update to recent drafts
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.173 2002/03/19 05:23:08 stevesk Exp $
d1030 4
@


1.173
log
@Banner has no default.
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.172 2002/03/18 17:59:09 provos Exp $
d1377 2
a1378 2
.%N draft-ietf-secsh-architecture-09.txt
.%D July 2001
d1386 2
a1387 2
.%N draft-ietf-secsh-dh-group-exchange-01.txt
.%D April 2001
@


1.172
log
@document UsePrivilegeSeparation
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.171 2002/03/18 17:53:08 provos Exp $
d393 1
@


1.171
log
@credits for privsep
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.170 2002/02/28 20:46:10 stevesk Exp $
d834 13
a846 1
cookies.
@


1.170
log
@-u0 DNS for user@@host
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.169 2002/02/28 20:36:42 stevesk Exp $
d1345 2
@


1.169
log
@DenyUsers allows user@@host pattern also
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.168 2002/02/10 01:07:05 deraadt Exp $
d296 5
@


1.168
log
@more /etc/ssh; openbsd@@davidkrause.com
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.167 2002/02/09 17:37:34 deraadt Exp $
d460 3
@


1.167
log
@move ssh config files to /etc/ssh
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.166 2002/02/03 22:35:57 stevesk Exp $
d961 1
a961 1
.Pa /etc/sshrc
@


1.166
log
@some KeepAlive cleanup/clarify; ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.165 2002/01/29 14:32:03 markus Exp $
d201 1
a201 1
.Pa /etc/sshd_config .
d217 1
a217 1
.Pa /etc/ssh_host_key
d219 1
a219 1
.Pa /etc/ssh_host_rsa_key
d221 1
a221 1
.Pa /etc/ssh_host_dsa_key
d314 1
a314 1
.Pa /etc/sshd_config
d491 1
a491 1
.Pa /etc/ssh_host_key
d493 1
a493 1
.Pa /etc/ssh_host_rsa_key
d495 1
a495 1
.Pa /etc/ssh_host_dsa_key
d1098 1
a1098 1
.Pa /etc/ssh_known_hosts ,
d1123 1
a1123 1
.Pa /etc/ssh_host_key.pub .
d1145 1
a1145 1
.Pa /etc/ssh_host_key.pub
d1154 1
a1154 1
.It Pa /etc/sshd_config
d1159 1
a1159 1
.It Pa /etc/ssh_host_key, /etc/ssh_host_dsa_key, /etc/ssh_host_rsa_key
d1166 1
a1166 1
.It Pa /etc/ssh_host_key.pub, /etc/ssh_host_dsa_key.pub, /etc/ssh_host_rsa_key.pub
d1199 1
a1199 1
.It Pa "/etc/ssh_known_hosts" and "$HOME/.ssh/known_hosts"
d1207 1
a1207 1
.Pa /etc/ssh_known_hosts
d1315 1
a1315 1
.Pa /etc/sshrc
d1321 1
a1321 1
.It Pa /etc/sshrc
@


1.165
log
@s/ReverseMappingCheck/VerifyReverseMapping/ and avoid confusion; ok stevesk@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.164 2002/01/27 14:57:46 stevesk Exp $
d536 1
a536 1
Specifies whether the system should send keepalive messages to the
d551 1
a551 1
if the network goes down or the client host reboots.
d555 1
a555 2
.Dq no
in both the server and the client configuration files.
@


1.164
log
@add X11UseLocalhost; ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.163 2002/01/18 20:46:34 stevesk Exp $
a760 8
.It Cm ReverseMappingCheck
Specifies whether
.Nm
should try to verify the remote host name and check that
the resolved host name for the remote IP address maps back to the
very same IP address.
The default is
.Dq no .
d828 8
@


1.163
log
@clarify Allow(Groups|Users) and Deny(Groups|Users); suggestion from
allard@@oceanpark.com; ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.162 2002/01/18 17:14:16 stevesk Exp $
d853 25
@


1.162
log
@correct Ciphers default; paola.mannaro@@ubs.com
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.161 2002/01/05 21:51:56 stevesk Exp $
d332 1
a332 1
This keyword can be followed by a list of group names, separated
d342 1
a342 1
By default login is allowed regardless of the group list.
d353 1
a353 1
This keyword can be followed by a list of user names, separated
d363 1
a363 1
By default login is allowed regardless of the user name.
d438 1
a438 1
This keyword can be followed by a number of group names, separated
d440 2
a441 2
Users whose primary group or supplementary group list matches
one of the patterns aren't allowed to log in.
d448 1
a448 1
By default login is allowed regardless of the group list.
d451 1
a451 1
This keyword can be followed by a number of user names, separated
d459 1
a459 1
By default login is allowed regardless of the user name.
@


1.161
log
@some missing and misplaced periods
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.160 2002/01/04 18:14:16 stevesk Exp $
d400 5
a404 1
.Dq aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour .
@


1.160
log
@protocol 2 HostKey code default is now /etc/ssh_host_rsa_key and
/etc/ssh_host_dsa_key like we have in sshd_config.  ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.159 2001/12/28 22:37:48 stevesk Exp $
d381 1
a381 1
.Dq .ssh/authorized_keys
d400 1
a400 1
.Dq aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour.
@


1.159
log
@document LogLevel DEBUG[123]; ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.158 2001/12/27 18:22:53 stevesk Exp $
d211 1
a211 2
Specifies the file from which the host key is read (default
.Pa /etc/ssh_host_key ) .
d215 8
a222 1
host file is normally not readable by anyone but root).
d484 9
a492 3
Specifies the file containing the private host keys (default
.Pa /etc/ssh_host_key )
used by SSH protocol versions 1 and 2.
@


1.158
log
@clarify -p; ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.157 2001/12/19 07:18:56 deraadt Exp $
d623 4
a626 3
QUIET, FATAL, ERROR, INFO, VERBOSE and DEBUG.
The default is INFO.
Logging with level DEBUG violates the privacy of users
@


1.157
log
@basic KNF done while i was looking for something else
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.156 2001/12/06 13:30:06 markus Exp $
d248 3
@


1.156
log
@add -o to sshd, too. ok deraadt@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.155 2001/12/01 21:41:48 markus Exp $
d256 1
a256 1
This is useful for updating 
@


1.155
log
@don't pass user defined variables to /usr/bin/login
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.154 2001/11/07 22:12:01 markus Exp $
d52 1
d241 4
@


1.154
log
@s/Keepalive/KeepAlive/; from openbsd@@davidkrause.com
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.153 2001/09/27 17:53:24 camield Exp $
d1009 3
@


1.153
log
@don't talk about compile-time options

ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.152 2001/09/20 00:15:54 stevesk Exp $
d405 1
a405 1
.Cm Keepalive
d409 1
a409 1
.Cm Keepalive
@


1.153.2.1
log
@Pull in patches from current (Errata 002):
Update to OpenSSH-3.0.1 via errata patch (Instead of using release tarball)
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.154 2001/11/07 22:12:01 markus Exp $
d405 1
a405 1
.Cm KeepAlive
d409 1
a409 1
.Cm KeepAlive
@


1.153.2.2
log
@Update to OpenSSH-3.0.2 from patch by markus.
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.153.2.1 2001/11/14 03:24:39 jason Exp $
a1008 3
This option is automatically disabled if
.Cm UseLogin
is enabled.
@


1.153.2.3
log
@Update to OpenSSH-3.1 on 3.0-stable branch
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.170 2002/02/28 20:46:10 stevesk Exp $
a51 1
.Op Fl o Ar option
d200 1
a200 1
.Pa /etc/ssh/sshd_config .
d210 2
a211 1
Specifies a file from which a host key is read.
d215 1
a215 8
host key files are normally not readable by anyone but root).
The default is
.Pa /etc/ssh/ssh_host_key
for protocol version 1, and
.Pa /etc/ssh/ssh_host_rsa_key
and
.Pa /etc/ssh/ssh_host_dsa_key
for protocol version 2.
a239 4
.It Fl o Ar option
Can be used to give options in the format used in the configuration file.
This is useful for specifying options for which there is no separate
command-line flag.
a242 3
Multiple port options are permitted.
Ports specified in the configuration file are ignored when a
command-line port is specified.
d251 1
a251 1
This is useful for updating
a281 5
Configuration options that require DNS include using a
USER@@HOST pattern in
.Cm AllowUsers
or
.Cm DenyUsers .
d300 1
a300 1
.Pa /etc/ssh/sshd_config
d318 1
a318 1
This keyword can be followed by a list of group name patterns, separated
d328 1
a328 1
By default, login is allowed for all groups.
d339 1
a339 1
This keyword can be followed by a list of user name patterns, separated
d349 1
a349 1
By default, login is allowed for all users.
d367 1
a367 1
.Dq .ssh/authorized_keys .
d386 1
a386 5
.Pp
.Bd -literal
  ``aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour,
    aes192-cbc,aes256-cbc''
.Ed
d420 1
a420 1
This keyword can be followed by a list of group name patterns, separated
d422 2
a423 2
Login is disallowed for users whose primary group or supplementary
group list matches one of the patterns.
d430 1
a430 1
By default, login is allowed for all groups.
d433 1
a433 1
This keyword can be followed by a list of user name patterns, separated
d441 1
a441 4
By default, login is allowed for all users.
If the pattern takes the form USER@@HOST then USER and HOST
are separately checked, restricting logins to particular
users from particular hosts.
d470 3
a472 9
Specifies a file containing a private host key
used by SSH.
The default is
.Pa /etc/ssh/ssh_host_key
for protocol version 1, and
.Pa /etc/ssh/ssh_host_rsa_key
and
.Pa /etc/ssh/ssh_host_dsa_key
for protocol version 2.
d512 1
a512 1
Specifies whether the system should send TCP keepalive messages to the
d527 1
a527 1
if the network goes down or the client host crashes.
d531 2
a532 1
.Dq no .
d615 3
a617 4
QUIET, FATAL, ERROR, INFO, VERBOSE, DEBUG, DEBUG1, DEBUG2 and DEBUG3.
The default is INFO.  DEBUG and DEBUG1 are equivalent.  DEBUG2
and DEBUG3 each specify higher levels of debugging output.
Logging with a DEBUG level violates the privacy of users
d736 8
a810 8
.It Cm VerifyReverseMapping
Specifies whether
.Nm
should try to verify the remote host name and check that
the resolved host name for the remote IP address maps back to the
very same IP address.
The default is
.Dq no .
a827 25
.It Cm X11UseLocalhost
Specifies whether
.Nm
should bind the X11 forwarding server to the loopback address or to
the wildcard address.  By default,
.Nm
binds the forwarding server to the loopback address and sets the
hostname part of the
.Ev DISPLAY
environment variable to
.Dq localhost .
This prevents remote hosts from connecting to the fake display.
However, some older X11 clients may not function with this
configuration.
.Cm X11UseLocalhost
may be set to
.Dq no
to specify that the forwarding server should be bound to the wildcard
address.
The argument must be
.Dq yes
or
.Dq no .
The default is
.Dq yes .
d912 1
a912 1
.Pa /etc/ssh/sshrc
d1049 1
a1049 1
.Pa /etc/ssh/ssh_known_hosts ,
d1074 1
a1074 1
.Pa /etc/ssh/ssh_host_key.pub .
d1096 1
a1096 1
.Pa /etc/ssh/ssh_host_key.pub
d1105 1
a1105 1
.It Pa /etc/ssh/sshd_config
d1110 1
a1110 1
.It Pa /etc/ssh/ssh_host_key, /etc/ssh/ssh_host_dsa_key, /etc/ssh/ssh_host_rsa_key
d1117 1
a1117 1
.It Pa /etc/ssh/ssh_host_key.pub, /etc/ssh/ssh_host_dsa_key.pub, /etc/ssh/ssh_host_rsa_key.pub
d1150 1
a1150 1
.It Pa "/etc/ssh/ssh_known_hosts" and "$HOME/.ssh/known_hosts"
d1158 1
a1158 1
.Pa /etc/ssh/ssh_known_hosts
d1266 1
a1266 1
.Pa /etc/ssh/sshrc
d1272 1
a1272 1
.It Pa /etc/ssh/sshrc
@


1.153.2.4
log
@apply the necessary openbsd30_3.1.patch patch.
--
Ok'd by markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.153.2.3 2002/03/07 17:37:48 jason Exp $
d201 1
a201 1
.Pa /etc/sshd_config .
d217 1
a217 1
.Pa /etc/ssh_host_key
d219 1
a219 1
.Pa /etc/ssh_host_rsa_key
d221 1
a221 1
.Pa /etc/ssh_host_dsa_key
d319 1
a319 1
.Pa /etc/sshd_config
d499 1
a499 1
.Pa /etc/ssh_host_key
d501 1
a501 1
.Pa /etc/ssh_host_rsa_key
d503 1
a503 1
.Pa /etc/ssh_host_dsa_key
d969 1
a969 1
.Pa /etc/sshrc
d1106 1
a1106 1
.Pa /etc/ssh_known_hosts ,
d1131 1
a1131 1
.Pa /etc/ssh_host_key.pub .
d1153 1
a1153 1
.Pa /etc/ssh_host_key.pub
d1162 1
a1162 1
.It Pa /etc/sshd_config
d1167 1
a1167 1
.It Pa /etc/ssh_host_key, /etc/ssh_host_dsa_key, /etc/ssh_host_rsa_key
d1174 1
a1174 1
.It Pa /etc/ssh_host_key.pub, /etc/ssh_host_dsa_key.pub, /etc/ssh_host_rsa_key.pub
d1207 1
a1207 1
.It Pa "/etc/ssh_known_hosts" and "$HOME/.ssh/known_hosts"
d1215 1
a1215 1
.Pa /etc/ssh_known_hosts
d1323 1
a1323 1
.Pa /etc/sshrc
d1329 1
a1329 1
.It Pa /etc/sshrc
@


1.153.2.5
log
@Update OpenSSH to version 3.2.2.
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.181 2002/05/15 21:02:53 markus Exp $
d119 2
a120 2
.Nm rshd ,
.Nm rlogind ,
d122 1
a122 1
.Xr rexecd
d124 1
a124 1
.Xr rlogin
d126 1
a126 1
.Xr rsh
d335 1
a335 1
.Dq no .
a392 1
By default, no banner is displayed.
d573 1
a573 1
.Dq no .
d834 1
a834 13
cookies.  If
.Cm UsePrivilegeSeparation
is specified, it will be disabled after authentication.
.It Cm UsePrivilegeSeparation
Specifies whether
.Nm
separated privileges by creating an unprivileged child process
to deal with incoming network traffic.  After successful authentication,
another process will be created that has the privilege of the authenticated
user.  The goal of privilege separation is to prevent privilege
escalation by containing any corruption within the unprivileged processes.
The default is
.Dq no .
a1017 4
.Nm
enforces a minimum RSA key modulus size for protocol 1
and protocol 2 keys of 768 bits.
.Pp
d1302 2
a1303 4
It must not produce any output on stdout; stderr must be used
instead.
If X11 forwarding is in use, it will receive the "proto cookie" pair in
its standard input (and
d1305 2
a1306 2
in its environment).
The script must call
d1308 1
a1308 3
because
.Nm
will not run xauth automatically to add X11 cookies.
d1317 2
a1318 8
if read proto cookie && [ -n "$DISPLAY" ]; then
	if [ `echo $DISPLAY | cut -c1-10` = 'localhost:' ]; then
		# X11UseLocalhost=yes
		xauth add unix:`echo $DISPLAY |
		    cut -c11-` $proto $cookie
	else
		# X11UseLocalhost=no
		xauth add $DISPLAY $proto $cookie
a1319 1
fi
d1325 1
a1325 1
does not exist either, xauth is used to add the cookie.
a1344 2
Niels Provos and Markus Friedl contributed support
for privilege separation.
d1362 2
a1363 2
.%N draft-ietf-secsh-architecture-12.txt
.%D January 2002
d1371 2
a1372 2
.%N draft-ietf-secsh-dh-group-exchange-02.txt
.%D January 2002
@


1.153.2.6
log
@Update OpenSSH to version 3.3 (with local changes, configuration files still
living in /etc and privsep user being nobody).
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.153.2.5 2002/05/17 00:03:24 miod Exp $
d323 624
a946 2
The file format and configuration options are described in
.Xr sshd_config 5 .
d1182 2
a1183 2
The file format and configuration options are described in
.Xr sshd_config 5 .
a1383 1
.Xr sshd_config 5 ,
@


1.153.2.7
log
@There was an update to OpenSSH 3.4, and people rejoiced.
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.153.2.6 2002/06/22 07:23:18 miod Exp $
a580 7
.It Pa /var/empty
.Xr chroot 2
directory used by
.Nm
during privilege separation in the pre-authentication phase.
The directory should not contain any files and must be owned by root
and not group or world-writable.
d585 1
a585 1
concurrently for different ports, this contains the process ID of the one
@


1.153.2.8
log
@Update to OpenSSH 3.5
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.193 2002/09/24 20:59:44 todd Exp $
d206 1
a206 1
120 seconds).
d353 1
a353 5
if it exists and users are allowed to change their environment.
See the
.Cm PermitUserEnvironment
option in
.Xr sshd_config 5 .
d388 3
a390 3
The options field
is optional; its presence is determined by whether the line starts
with a number or not (the options field never starts with a number).
d401 1
a401 1
(because of the size of the public key encoding).
d420 1
a420 1
Specifies that in addition to public key authentication, the canonical name
d432 1
a432 1
of this option is to optionally increase security: public key authentication
d450 1
a450 1
to restrict certain public keys to perform just a specific operation.
a460 4
Environment processing is disabled by default and is
controlled via the
.Cm PermitUserEnvironment
option.
a580 2
The file format is described in
.Xr moduli 5 .
a700 4
Environment processing is disabled by default and is
controlled via the
.Cm PermitUserEnvironment
option.
d726 1
a726 1
		echo add unix:`echo $DISPLAY |
d730 2
a731 2
		echo add $DISPLAY $proto $cookie
	fi | xauth -q -
@


1.152
log
@fix ClientAliveCountMax
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.151 2001/09/19 21:41:57 stevesk Exp $
d1168 2
a1169 3
If compiled with
.Sy LIBWRAP
support, tcp-wrappers access controls may be defined here as described in
@


1.151
log
@don't advertise -V in usage; ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.150 2001/09/19 21:04:53 stevesk Exp $
d416 2
a417 1
.Cm Keepalive is left at the default, unresponsive ssh clients
@


1.150
log
@missing -t in usage
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.149 2001/09/19 10:08:51 markus Exp $
a53 1
.Op Fl V Ar client_protocol_id
@


1.149
log
@command=xxx applies to subsystem now, too
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.148 2001/09/14 18:56:04 markus Exp $
d46 1
a46 1
.Op Fl deiqD46
@


1.148
log
@typo
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.147 2001/09/05 06:23:07 deraadt Exp $
d1002 1
@


1.147
log
@avoid first person in manual pages
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.146 2001/08/30 20:36:34 stevesk Exp $
d991 1
a991 1
The command is run on a pty if the connection requests a pty;
@


1.146
log
@validate ports for permitopen key file option. add host/port
alternative syntax for IPv6. ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.145 2001/08/29 23:39:40 stevesk Exp $
d328 1
a328 1
Only group names are valid; a numerical group ID isn't recognized.
d349 1
a349 1
Only user names are valid; a numerical user ID isn't recognized.
d352 1
a352 1
are separately checked, allowing you to restrict logins to particular
d411 2
a412 3
is spoofable. You want to use the client
alive mechanism when you are basing something important on
clients having an active connection to the server.
d414 1
a414 1
The default value is 3. If you set
d416 2
a417 1
(above) to 15, and leave this value at the default, unresponsive ssh clients
d429 1
a429 1
Only group names are valid; a numerical group ID isn't recognized.
d440 1
a440 1
Only user names are valid; a numerical user ID isn't recognized.
d993 2
a994 2
Note that if you want a 8-bit clean channel,
you must not request a pty or should specify
@


1.145
log
@additional documentation for GatewayPorts; ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.144 2001/08/29 23:02:21 stevesk Exp $
d1026 4
a1029 1
port. Multiple
@


1.144
log
@add text about -u0 preventing DNS requests; ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.143 2001/08/22 16:30:02 stevesk Exp $
d445 9
@


1.143
log
@no rexd; ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.142 2001/08/21 21:47:42 stevesk Exp $
d271 12
@


1.142
log
@minor typos and cleanup
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.141 2001/08/16 20:14:57 stevesk Exp $
a120 1
.Xr rexecd 8 ,
d122 1
a122 1
.Xr rexd 8
@


1.141
log
@document case sensitivity for ssh, sshd and key file
options and arguments; ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.140 2001/08/16 19:18:34 jakob Exp $
d349 1
a349 1
set-up. The following tokens are defined; %% is replaces by a literal '%',
@


1.140
log
@deprecate CheckMail. ok markus@@
----------------------------------------------------------------------
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.139 2001/08/01 22:16:45 markus Exp $
d294 1
a294 1
The file contains keyword-value pairs, one per line.
d299 3
a301 1
The following keywords are possible.
d944 2
a945 1
The following option specifications are supported:
@


1.139
log
@refer to current ietf drafts for protocol v2
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.138 2001/07/28 09:21:15 markus Exp $
a369 6
.It Cm CheckMail
Specifies whether
.Nm
should check for new mail for interactive logins.
The default is
.Dq no .
@


1.138
log
@cleanup some RSA vs DSA vs SSH1 vs SSH2 notes
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.137 2001/07/26 17:18:22 stevesk Exp $
d1282 2
a1283 2
.%N draft-ietf-secsh-architecture-07.txt
.%D January 2001
@


1.137
log
@add -t option to test configuration file and keys; pekkas@@netcore.fi
ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.136 2001/07/22 22:24:16 markus Exp $
d133 1
a133 1
Each host has a host-specific DSA key used to identify the host.
d343 2
a344 2
Specifies the file that contains the public RSA keys that can be used
for RSA authentication in protocol version 1.
@


1.136
log
@Xr login.conf
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.135 2001/06/27 04:48:53 markus Exp $
d250 6
@


1.135
log
@tridge@@samba.org
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.134 2001/06/26 05:48:07 mpech Exp $
d358 4
a361 6
Specifies whether
challenge response
authentication is allowed.
Currently there is only support for
.Xr skey 1
authentication.
a1259 3
.Xr moduli 5 ,
.Xr rlogin 1 ,
.Xr rsh 1 ,
d1266 2
@


1.134
log
@remove unnecessary .Pp between .It;

millert@@ ok
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.133 2001/06/23 17:48:19 itojun Exp $
d332 3
@


1.133
log
@kill whitespace at EOL.
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.132 2001/06/23 03:03:59 markus Exp $
a186 1
.Pp
@


1.132
log
@draft-ietf-secsh-dh-group-exchange-01.txt
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.131 2001/06/23 02:34:33 markus Exp $
d377 1
a377 1
from the client, 
d389 1
a389 1
reached while client alive messages are being sent, 
d392 1
a392 1
to note that the use of client alive messages is very different from 
d405 1
a405 1
will be disconnected after approximately 45 seconds. 
d782 2
a783 2
Note also, that if this is enabled,                                                           
.Cm X11Forwarding                                                             
d787 1
a787 1
.Xr xauth 1                                                                   
d803 3
a805 3
X11 forwarding is automatically disabled if                                                     
.Cm UseLogin                                                                  
is enabled.          
d1000 1
a1000 1
Limit local 
d1003 1
a1003 1
port. Multiple 
d1005 2
a1006 2
options may be applied separated by commas. No pattern matching is 
performed on the specified hostnames, they must be literal domains or 
@


1.131
log
@get rid of known_hosts2, use it for hostkey lookup, but do not modify.
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.130 2001/06/22 21:55:50 markus Exp $
d1286 2
a1287 2
.%N draft-ietf-secsh-dh-group-exchange-00.txt
.%D January 2001
@


1.130
log
@merge authorized_keys2 into authorized_keys.
authorized_keys2 is used for backward compat.
(just append authorized_keys2 to authorized_keys).
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.129 2001/06/22 21:28:53 provos Exp $
a1019 2
.Pa /etc/ssh_known_hosts2 ,
.Pa $HOME/.ssh/known_hosts ,
d1021 1
a1021 1
.Pa $HOME/.ssh/known_hosts2
d1122 2
a1123 1
authentication to check the public key of the host.
a1130 11
can but need not be world-readable.
.It Pa "/etc/ssh_known_hosts2" and "$HOME/.ssh/known_hosts2"
These files are consulted when using protocol version 2 hostbased
authentication to check the public key of the host.
The key must be listed in one of these files to be accepted.
The client uses the same files
to verify that it is connecting to the correct remote host.
These files should be writable only by root/the owner.
.Pa /etc/ssh_known_hosts2
should be world-readable, and
.Pa $HOME/.ssh/known_hosts2
@


1.129
log
@document /etc/moduli
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.128 2001/06/22 10:17:51 mpech Exp $
a347 14
.It Cm AuthorizedKeysFile2
Specifies the file that contains the public keys that can be used
for public key authentication in protocol version 2.
.Cm AuthorizedKeysFile2
may contain tokens of the form %T which are substituted during connection
set-up. The following tokens are defined; %% is replaces by a literal '%',
%h is replaced by the home directory of the user being authenticated and
%u is replaced by the username of that user.
After expansion,
.Cm AuthorizedKeysFile2
is taken to be an absolute path or one relative to the user's home
directory.
The default is
.Dq .ssh/authorized_keys2
d902 4
a905 2
is the default file that lists the RSA keys that are
permitted for RSA authentication in protocol version 1.
a907 7
Similarly,
.Pa $HOME/.ssh/authorized_keys2
is the default file that lists the DSA and RSA keys that are
permitted for public key authentication (PubkeyAuthentication)
in protocol version 2.
.Cm AuthorizedKeysFile2
may be used to specify an alternative file.
a1108 11
Lists the RSA keys that can be used to log into the user's account.
This file must be readable by root (which may on some machines imply
it being world-readable if the user's home directory resides on an NFS
volume).
It is recommended that it not be accessible by others.
The format of this file is described above.
Users will place the contents of their
.Pa identity.pub
files into this file, as described in
.Xr ssh-keygen 1 .
.It Pa $HOME/.ssh/authorized_keys2
d1116 1
@


1.128
log
@o) .Sh AUTHOR -> .Sh AUTHORS;
o) remove unnecessary .Pp;
o) better -mdoc style;
o) typo;
o) sort SEE ALSO;

aaron@@ ok
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.127 2001/06/19 14:09:45 markus Exp $
d1118 1
a1118 1
.It Pa /etc/primes
d1301 1
@


1.127
log
@disable x11-fwd if use_login is enabled; from lukem@@wasabisystems.com
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.126 2001/06/11 16:04:38 markus Exp $
d179 1
a179 1
by executing itself with the name it was started as, ie.
a868 1

d1301 2
a1304 1
.Xr sftp-server 8 ,
d1309 1
a1309 2
.Xr rlogin 1 ,
.Xr rsh 1
@


1.126
log
@typo; bdubreuil@@crrel.usace.army.mil
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.125 2001/05/20 17:20:35 markus Exp $
d791 2
d796 7
a802 2
The default is
.Dq no .
d817 3
@


1.125
log
@configurable authorized_keys{,2} location; originally from peter@@; ok djm@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.124 2001/05/19 19:43:57 stevesk Exp $
d344 1
a344 1
is taken to be an absolute path or one realtive to the user's home
d358 1
a358 1
is taken to be an absolute path or one realtive to the user's home
@


1.124
log
@sshd command-line arguments and configuration file options that
specify time may be expressed using a sequence of the form:
time[qualifier], where time is a positive integer value and qualifier
is one of the following:
    <none>,s,m,h,d,w
Examples:
    600     600 seconds (10 minutes)
    10m     10 minutes
    1h30m   1 hour 30 minutes (90 minutes)
ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.123 2001/05/19 16:46:19 markus Exp $
d334 28
a905 1
The
d907 1
a907 1
file lists the RSA keys that are
d909 3
a911 1
Similarly, the
d913 1
a913 1
file lists the DSA and RSA keys that are
d916 2
@


1.123
log
@document MACs defaults with .Dq
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.122 2001/05/19 16:08:43 markus Exp $
d789 43
@


1.122
log
@sort options; Matthew.Stier@@fnc.fujitsu.com
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.121 2001/05/04 14:21:56 stevesk Exp $
d589 1
a589 5
.Pp
.Bd -literal
  ``hmac-md5,hmac-sha1,hmac-ripemd160,hmac-ripemd160@@openssh.com,
    hmac-sha1-96,hmac-md5-96''
.Ed
@


1.121
log
@typos
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.120 2001/04/22 23:58:36 markus Exp $
a349 5
.It Cm Ciphers
Specifies the ciphers allowed for protocol version 2.
Multiple ciphers must be comma-separated.
The default is
.Dq aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour.
d356 5
@


1.120
log
@document hostbased and other cleanup
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.119 2001/04/22 13:32:27 markus Exp $
d842 1
a842 1
permitted for RSA authentication in protocol version 1
@


1.120.2.1
log
@Pull in OpenSSH-2.9.9
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.152 2001/09/20 00:15:54 stevesk Exp $
d46 1
a46 1
.Op Fl deiqtD46
d54 1
d121 1
d123 1
a123 1
.Xr rexecd 8
d133 1
a133 1
Each host has a host-specific key (RSA or DSA) used to identify the host.
d179 1
a179 1
by executing itself with the name it was started as, i.e.,
d187 1
a250 6
.It Fl t
Test mode.
Only check the validity of the configuration file and sanity of the keys.
This is useful for updating 
.Nm
reliably as configuration options may change.
a266 12
.Fl u0
is also be used to prevent
.Nm
from making DNS requests unless the authentication
mechanism or configuration requires it.
Authentication mechanisms that may require DNS include
.Cm RhostsAuthentication ,
.Cm RhostsRSAAuthentication ,
.Cm HostbasedAuthentication
and using a
.Cm from="pattern-list"
option in a key file.
d289 1
a289 1
The file contains keyword-argument pairs, one per line.
d294 1
a294 3
The possible
keywords and their meanings are as follows (note that
keywords are case-insensitive and arguments are case-sensitive):
d310 1
a310 1
Only group names are valid; a numerical group ID is not recognized.
d331 1
a331 1
Only user names are valid; a numerical user ID is not recognized.
d333 1
a333 18
If the pattern takes the form USER@@HOST then USER and HOST
are separately checked, restricting logins to particular
users from particular hosts.
.Pp
.It Cm AuthorizedKeysFile
Specifies the file that contains the public keys that can be used
for user authentication.
.Cm AuthorizedKeysFile
may contain tokens of the form %T which are substituted during connection
set-up. The following tokens are defined: %% is replaced by a literal '%',
%h is replaced by the home directory of the user being authenticated and
%u is replaced by the username of that user.
After expansion,
.Cm AuthorizedKeysFile
is taken to be an absolute path or one relative to the user's home
directory.
The default is
.Dq .ssh/authorized_keys
d342 6
a347 4
Specifies whether challenge response authentication is allowed.
All authentication styles from
.Xr login.conf 5
are supported.
d355 6
d363 1
a363 1
from the client,
d375 1
a375 1
reached while client alive messages are being sent,
d378 1
a378 1
to note that the use of client alive messages is very different from
d384 3
a386 2
is spoofable. The client alive mechanism is valuable when the client or
server depend on knowing when a connection has become inactive.
d388 1
a388 1
The default value is 3. If
d390 2
a391 4
(above) is set to 15, and
.Cm ClientAliveCountMax
is left at the default, unresponsive ssh clients
will be disconnected after approximately 45 seconds.
d402 1
a402 1
Only group names are valid; a numerical group ID is not recognized.
d413 1
a413 1
Only user names are valid; a numerical user ID is not recognized.
a417 9
By default,
.Nm
binds remote port forwardings to the loopback addresss.  This
prevents other remote hosts from connecting to forwarded ports.
.Cm GatewayPorts
can be used to specify that
.Nm
should bind remote port forwardings to the wildcard address,
thus allowing remote hosts to connect to forwarded ports.
d589 5
a593 1
.Dq hmac-md5,hmac-sha1,hmac-ripemd160,hmac-sha1-96,hmac-md5-96 .
a766 2
The default is
.Dq no .
d770 2
a771 7
Note also, that if this is enabled,
.Cm X11Forwarding
will be disabled because
.Xr login 1
does not know how to handle
.Xr xauth 1
cookies.
a785 3
X11 forwarding is automatically disabled if
.Cm UseLogin
is enabled.
a792 42
.Ss Time Formats
.Pp
.Nm
command-line arguments and configuration file options that specify time
may be expressed using a sequence of the form:
.Sm off
.Ar time Oo Ar qualifier Oc ,
.Sm on
where
.Ar time
is a positive integer value and
.Ar qualifier
is one of the following:
.Pp
.Bl -tag -width Ds -compact -offset indent
.It Cm <none>
seconds
.It Cm s | Cm S
seconds
.It Cm m | Cm M
minutes
.It Cm h | Cm H
hours
.It Cm d | Cm D
days
.It Cm w | Cm W
weeks
.El
.Pp
Each member of the sequence is added together to calculate
the total time value.
.Pp
Time format examples:
.Pp
.Bl -tag -width Ds -compact -offset indent
.It 600
600 seconds (10 minutes)
.It 10m
10 minutes
.It 1h30m
1 hour 30 minutes (90 minutes)
.El
d839 1
d841 1
a841 1
is the default file that lists the public keys that are
d843 4
a846 1
and for public key authentication (PubkeyAuthentication)
a847 2
.Cm AuthorizedKeysFile
may be used to specify an alternative file.
d882 1
a882 2
The following option specifications are supported (note
that option keywords are case-insensitive):
d908 1
a908 1
The command is run on a pty if the client requests a pty;
d910 2
a911 2
If a 8-bit clean channel is required,
one must not request a pty or should specify
a918 1
Note that this option applies to shell, command or subsystem execution.
d940 1
a940 1
Limit local
d943 1
a943 4
port.
IPv6 addresses can be specified with an alternative syntax:
.Ar host/port .
Multiple
d945 2
a946 2
options may be applied separated by commas. No pattern matching is
performed on the specified hostnames, they must be literal domains or
d960 2
d963 1
a963 1
.Pa $HOME/.ssh/known_hosts
d1039 1
a1039 1
.It Pa /etc/moduli
d1049 11
a1066 1
.Pa identity.pub ,
d1074 1
a1074 2
authentication or protocol version 2 hostbased authentication
to check the public key of the host.
d1083 11
d1224 1
d1229 2
a1230 3
.Xr login.conf 5 ,
.Xr moduli 5 ,
.Xr sftp-server 8
d1238 2
a1239 2
.%N draft-ietf-secsh-architecture-09.txt
.%D July 2001
d1247 2
a1248 2
.%N draft-ietf-secsh-dh-group-exchange-01.txt
.%D April 2001
@


1.120.2.2
log
@Merge OpenSSH 3.0
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.120.2.1 2001/09/27 19:03:55 jason Exp $
d1168 3
a1170 2
Access controls that should be enforced by tcp-wrappers are defined here.
Further details are described in
@


1.120.2.3
log
@Merge OpenSSH 3.0.1.
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.120.2.2 2001/11/15 00:15:19 miod Exp $
d405 1
a405 1
.Cm KeepAlive
d409 1
a409 1
.Cm KeepAlive
@


1.120.2.4
log
@Upgrade OpenSSH to version 3.0.2.
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.120.2.3 2001/11/15 22:51:15 miod Exp $
a1008 3
This option is automatically disabled if
.Cm UseLogin
is enabled.
@


1.120.2.5
log
@Merge OpenSSH 3.1, keeping /etc as configuration files directory.
(i.e. OpenSSH 3.1 + openbsd29_3.1.patch)
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.170 2002/02/28 20:46:10 stevesk Exp $
a51 1
.Op Fl o Ar option
d210 2
a211 1
Specifies a file from which a host key is read.
d215 1
a215 8
host key files are normally not readable by anyone but root).
The default is
.Pa /etc/ssh_host_key
for protocol version 1, and
.Pa /etc/ssh_host_rsa_key
and
.Pa /etc/ssh_host_dsa_key
for protocol version 2.
a239 4
.It Fl o Ar option
Can be used to give options in the format used in the configuration file.
This is useful for specifying options for which there is no separate
command-line flag.
a242 3
Multiple port options are permitted.
Ports specified in the configuration file are ignored when a
command-line port is specified.
d251 1
a251 1
This is useful for updating
a281 5
Configuration options that require DNS include using a
USER@@HOST pattern in
.Cm AllowUsers
or
.Cm DenyUsers .
d318 1
a318 1
This keyword can be followed by a list of group name patterns, separated
d328 1
a328 1
By default, login is allowed for all groups.
d339 1
a339 1
This keyword can be followed by a list of user name patterns, separated
d349 1
a349 1
By default, login is allowed for all users.
d367 1
a367 1
.Dq .ssh/authorized_keys .
d386 1
a386 5
.Pp
.Bd -literal
  ``aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour,
    aes192-cbc,aes256-cbc''
.Ed
d420 1
a420 1
This keyword can be followed by a list of group name patterns, separated
d422 2
a423 2
Login is disallowed for users whose primary group or supplementary
group list matches one of the patterns.
d430 1
a430 1
By default, login is allowed for all groups.
d433 1
a433 1
This keyword can be followed by a list of user name patterns, separated
d441 1
a441 4
By default, login is allowed for all users.
If the pattern takes the form USER@@HOST then USER and HOST
are separately checked, restricting logins to particular
users from particular hosts.
d470 3
a472 9
Specifies a file containing a private host key
used by SSH.
The default is
.Pa /etc/ssh_host_key
for protocol version 1, and
.Pa /etc/ssh_host_rsa_key
and
.Pa /etc/ssh_host_dsa_key
for protocol version 2.
d512 1
a512 1
Specifies whether the system should send TCP keepalive messages to the
d527 1
a527 1
if the network goes down or the client host crashes.
d531 2
a532 1
.Dq no .
d615 3
a617 4
QUIET, FATAL, ERROR, INFO, VERBOSE, DEBUG, DEBUG1, DEBUG2 and DEBUG3.
The default is INFO.  DEBUG and DEBUG1 are equivalent.  DEBUG2
and DEBUG3 each specify higher levels of debugging output.
Logging with a DEBUG level violates the privacy of users
d736 8
a810 8
.It Cm VerifyReverseMapping
Specifies whether
.Nm
should try to verify the remote host name and check that
the resolved host name for the remote IP address maps back to the
very same IP address.
The default is
.Dq no .
a827 25
.It Cm X11UseLocalhost
Specifies whether
.Nm
should bind the X11 forwarding server to the loopback address or to
the wildcard address.  By default,
.Nm
binds the forwarding server to the loopback address and sets the
hostname part of the
.Ev DISPLAY
environment variable to
.Dq localhost .
This prevents remote hosts from connecting to the fake display.
However, some older X11 clients may not function with this
configuration.
.Cm X11UseLocalhost
may be set to
.Dq no
to specify that the forwarding server should be bound to the wildcard
address.
The argument must be
.Dq yes
or
.Dq no .
The default is
.Dq yes .
@


1.120.2.6
log
@Upgrade to OpenSSH 3.2.3.

Except for improbable compilation error fixes, this should be the last
commit made to the 2.9-STABLE branche. Have fun upgrading.
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.181 2002/05/15 21:02:53 markus Exp $
d119 2
a120 2
.Nm rshd ,
.Nm rlogind ,
d122 1
a122 1
.Xr rexecd
d124 1
a124 1
.Xr rlogin
d126 1
a126 1
.Xr rsh
d335 1
a335 1
.Dq no .
a392 1
By default, no banner is displayed.
d573 1
a573 1
.Dq no .
d834 1
a834 13
cookies.  If
.Cm UsePrivilegeSeparation
is specified, it will be disabled after authentication.
.It Cm UsePrivilegeSeparation
Specifies whether
.Nm
separated privileges by creating an unprivileged child process
to deal with incoming network traffic.  After successful authentication,
another process will be created that has the privilege of the authenticated
user.  The goal of privilege separation is to prevent privilege
escalation by containing any corruption within the unprivileged processes.
The default is
.Dq no .
a1017 4
.Nm
enforces a minimum RSA key modulus size for protocol 1
and protocol 2 keys of 768 bits.
.Pp
d1302 2
a1303 4
It must not produce any output on stdout; stderr must be used
instead.
If X11 forwarding is in use, it will receive the "proto cookie" pair in
its standard input (and
d1305 2
a1306 2
in its environment).
The script must call
d1308 1
a1308 3
because
.Nm
will not run xauth automatically to add X11 cookies.
d1317 2
a1318 8
if read proto cookie && [ -n "$DISPLAY" ]; then
	if [ `echo $DISPLAY | cut -c1-10` = 'localhost:' ]; then
		# X11UseLocalhost=yes
		xauth add unix:`echo $DISPLAY |
		    cut -c11-` $proto $cookie
	else
		# X11UseLocalhost=no
		xauth add $DISPLAY $proto $cookie
a1319 1
fi
d1325 1
a1325 1
does not exist either, xauth is used to add the cookie.
a1344 2
Niels Provos and Markus Friedl contributed support
for privilege separation.
d1362 2
a1363 2
.%N draft-ietf-secsh-architecture-12.txt
.%D January 2002
d1371 2
a1372 2
.%N draft-ietf-secsh-dh-group-exchange-02.txt
.%D January 2002
@


1.119
log
@xref draft-ietf-secsh-*
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.118 2001/04/15 21:41:29 deraadt Exp $
d43 1
a43 1
.Nd OpenSSH ssh daemon
d137 1
d139 1
a139 1
Blowfish, 3DES, CAST128, Arcfour, 128 bit AES, or 256 bit AES.
d147 3
a149 2
user authentication method (PubkeyAuthentication)
and conventional password authentication.
d185 2
a186 1
Specifies the number of bits in the server key (default 768).
d194 1
a194 1
Multiple -d options increases the debugging level.
d196 4
d220 1
a220 1
the different protocol versions.
d235 2
a236 2
Specifies how often the server key is regenerated (default 3600
seconds, or one hour).
a272 12
.It Fl e
When this option is specified,
.Nm
will send the output to the standard error instead of the system log.
.It Fl V Ar client_protocol_id
SSH-2 compatibility mode.
When this option is specified
.Nm
assumes the client has sent the supplied version string
and skips the
Protocol Version Identification Exchange.
This option is not intended to be called directly.
d424 9
d452 6
a457 1
files will not be used in authentication.
d470 3
a472 1
.Cm RhostsRSAAuthentication .
d525 2
a526 2
The server key is automatically regenerated after this many seconds
(if it has been used).
d535 1
a535 1
.Xr sshd 8
d561 1
a561 1
.Xr sshd 8
a622 1
Note that this option applies to both protocol versions 1 and 2.
d669 2
d722 1
d728 1
d733 1
a733 1
Note that this option applies to protocol version 1 only.
d735 1
a735 1
Defines the number of bits in the server key.
d842 1
a842 1
permitted for RSA authentication in SSH protocols 1.3 and 1.5
d847 1
a847 1
in SSH protocol 2.0.
d1011 4
a1014 1
closenet,closenet.hut.fi,.\|.\|.\|,130.233.208.41 1024 37 159.\|.\|.93 closenet.hut.fi
d1023 1
a1023 2
These three files contain the private parts of the
(SSH1, SSH2 DSA, and SSH2 RSA) host keys.
d1030 1
a1030 2
These three files contain the public parts of the
(SSH1, SSH2 DSA, and SSH2 RSA) host keys.
d1060 1
a1060 1
Lists the DSA keys that can be used to log into the user's account.
d1083 11
d1191 6
a1196 2
something similar to: "if read proto cookie; then echo add $DISPLAY
$proto $cookie | xauth -q -; fi".
d1239 9
@


1.118
log
@2,1, not 1,2
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.117 2001/04/15 21:05:49 stevesk Exp $
d1201 11
@


1.117
log
@default for protocol is 1,2; ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.116 2001/04/15 19:41:21 stevesk Exp $
d686 1
a686 1
.Dq 1,2 .
@


1.116
log
@some ClientAlive cleanup; ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.115 2001/04/13 22:46:54 beck Exp $
d686 1
a686 1
.Dq 1 .
@


1.115
log
@Add options ClientAliveInterval and ClientAliveCountMax to sshd.
This gives the ability to do a "keepalive" via the encrypted channel
which can't be spoofed (unlike TCP keepalives). Useful for when you want
to use ssh connections to authenticate people for something, and know
relatively quickly when they are no longer authenticated. Disabled
by default (of course). ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.114 2001/04/11 16:25:31 lebel Exp $
d371 2
a372 2
channel to request a response from the client. This may only be
used on a server supporting only protocol version 2. The default
d374 1
d384 2
a385 1
Keepalive (below). The client alive messages are sent through the
d387 3
a389 1
option enable by Keepalive is spoofable. You want to use the client
d392 3
a394 1
 The default is value is 3. If you set ClientAliveInterval
@


1.114
log
@implement the -e option into sshd:

 -e      When this option is specified, sshd will send the output to the
         standard error instead of the system log.

markus@@ OK.
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.113 2001/04/10 09:13:22 itojun Exp $
d366 25
@


1.113
log
@document id_rsa{.pub,}.  markus ok
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.112 2001/04/09 18:00:15 stevesk Exp $
d46 1
a46 1
.Op Fl diqD46
d266 4
@


1.112
log
@ListenAddress mandoc from aaron@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.110 2001/04/08 16:01:36 stevesk Exp $
d824 2
a825 1
.Pa identity.pub
d827 1
a827 1
.Pa id_dsa.pub
d1018 2
@


1.111
log
@spelling
@
text
@d489 1
a489 1
.Nm
d496 3
a498 1
host|IPv4_addr|IPv6_addr
d501 3
a503 1
host|IPv4_addr:port
d506 4
a509 1
[host|IPv6_addr]:port
d513 1
a513 1
.Dq :port
d515 1
a515 1
.Nm
@


1.110
log
@document ListenAddress addr:port
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.109 2001/04/02 14:15:31 stevesk Exp $
d885 1
a885 1
port-forwading such that it may only connect to the specified host and
d888 1
a888 1
options may be applied seperated by commas. No pattern matching is 
@


1.109
log
@typo; ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.108 2001/03/25 13:16:11 stevesk Exp $
d488 1
a488 1
Specifies what local address
d491 26
a516 5
The default is to listen to all local addresses.
Multiple options of this type are permitted.
Additionally, the
.Cm Ports
options must precede this option.
@


1.108
log
@PrintLastLog option; from chip@@valinux.com with some minor
changes by me.  ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.107 2001/03/19 12:10:17 djm Exp $
d950 1
a950 1
There three files contain the public parts of the
@


1.107
log
@Document permitopen authorized_keys option; ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.106 2001/03/07 01:19:06 deraadt Exp $
d596 6
@


1.106
log
@the name "secure shell" is boring, noone ever uses it
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.105 2001/03/05 16:07:15 deraadt Exp $
d855 9
d871 2
@


1.105
log
@detail default hmac setup too
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.104 2001/03/05 14:28:47 deraadt Exp $
d43 1
a43 1
.Nd OpenSSH secure shell daemon
d57 1
a57 1
(Secure Shell Daemon) is the daemon program for
@


1.104
log
@alpha order; jcs@@rt.fm
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.103 2001/03/04 18:21:28 deraadt Exp $
d355 1
a355 1
.Dq 3des-cbc,blowfish-cbc,cast128-cbc,arcfour,aes128-cbc .
d517 1
a517 1
  ``hmac-sha1,hmac-md5,hmac-ripemd160,hmac-ripemd160@@openssh.com,
@


1.103
log
@list SSH2 ciphers
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.102 2001/03/04 12:54:04 stevesk Exp $
d342 9
a384 5
.It Cm PubkeyAuthentication
Specifies whether public key authentication is allowed.
The default is
.Dq yes .
Note that this option applies to protocol version 2 only.
d618 5
a653 9
.It Cm ChallengeResponseAuthentication
Specifies whether
challenge response
authentication is allowed.
Currently there is only support for
.Xr skey 1
authentication.
The default is
.Dq yes .
@


1.102
log
@spelling
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.101 2001/03/04 11:16:06 stevesk Exp $
d137 2
a138 3
The rest of the session is encrypted
using a symmetric cipher, currently
Blowfish, 3DES or CAST128 in CBC mode or Arcfour.
@


1.101
log
@kill obsolete RandomSeed; ok markus@@ deraadt@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.100 2001/03/04 11:04:41 stevesk Exp $
d648 1
a648 1
challenge reponse
@


1.100
log
@small cleanup and clarify for PermitRootLogin; ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.99 2001/03/02 18:54:31 deraadt Exp $
a614 3
.It Cm RandomSeed
Obsolete.
Random number generation uses other techniques.
@


1.99
log
@make copyright lines the same format
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.98 2001/03/02 09:42:49 deraadt Exp $
d553 1
a553 1
Specifies whether the root can log in using
d577 4
@


1.98
log
@doc the dsa/rsa key pair files
@
text
@d13 3
a15 3
.\" Copyright (c) 1999,2000 Markus Friedl. All rights reserved.
.\" Copyright (c) 1999 Aaron Campbell. All rights reserved.
.\" Copyright (c) 1999 Theo de Raadt. All rights reserved.
d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.97 2001/03/02 06:21:01 deraadt Exp $
@


1.97
log
@explain SIGHUP better
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.96 2001/02/22 21:57:27 markus Exp $
d924 4
a927 3
.It Pa /etc/ssh_host_key
Contains the private part of the host key.
This file should only be owned by root, readable only by root, and not
d932 4
a935 3
.It Pa /etc/ssh_host_key.pub
Contains the public part of the host key.
This file should be world-readable but writable only by
d937 5
a941 5
Its contents should match the private part.
This file is not
really used for anything; it is only provided for the convenience of
the user so its contents can be copied to known hosts files.
These two files are created using
@


1.96
log
@typos/grammar from matt@@anzen.com
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.95 2001/02/17 23:48:48 deraadt Exp $
d177 3
a179 1
.Dv SIGHUP .
@


1.95
log
@it's the OpenSSH one
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.94 2001/02/12 16:16:24 markus Exp $
d975 1
a975 1
to verify that the remote host is the one it intended to connect.
@


1.94
log
@PermitRootLogin={yes,without-password,forced-commands-only,no}
(before this change, root could login even if PermitRootLogin==no)
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.93 2001/02/11 12:59:25 markus Exp $
d43 1
a43 1
.Nd secure shell daemon
@


1.93
log
@1) clean up the MAC support for SSH-2
2) allow you to specify the MAC with 'ssh -m'
3) or the 'MACs' keyword in ssh(d)_config
4) add hmac-{md5,sha1}-96
	ok stevesk@@, provos@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.92 2001/02/09 23:38:11 deraadt Exp $
d555 2
a556 1
.Dq without-password
d561 2
a562 1
If this options is set to
d564 1
a564 1
only password authentication is disabled for root.
d566 4
a569 1
Root login with RSA authentication when the
d571 1
a571 2
option has been
specified will be allowed regardless of the value of this setting
d573 2
a574 1
normally not allowed).
@


1.92
log
@correct AllowGroups and AllowUsers description; jmd@@foozle.turbogeek.org
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.91 2001/02/08 19:22:38 itojun Exp $
d504 11
@


1.91
log
@drop references to ssl(8).  markus ok
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.90 2001/02/04 11:11:55 djm Exp $
d301 1
a301 1
This keyword can be followed by a number of group names, separated
d322 1
a322 1
This keyword can be followed by a number of user names, separated
@


1.90
log
@Basic interactive sftp client; ok theo@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.89 2001/02/03 10:43:09 markus Exp $
a1095 1
.Xr ssl 8 ,
@


1.89
log
@use no-pty option in .ssh/authorized_keys* if you need a 8-bit clean
channel. note from Erik.Anggard@@cygate.se (pr/1659)
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.88 2001/02/03 10:19:50 markus Exp $
d1090 1
@


1.88
log
@Skey is now called ChallengeResponse
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.87 2001/02/03 10:08:37 markus Exp $
d808 3
@


1.87
log
@make ReverseMappingCheck optional in sshd_config; ok djm@@,dugsong@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.86 2001/01/28 20:43:25 stevesk Exp $
d627 1
a627 1
.It Cm SkeyAuthentication
d629 3
d633 1
a633 1
authentication is allowed.
a635 3
Note that s/key authentication is enabled only if
.Cm PasswordAuthentication
is allowed, too.
@


1.86
log
@spelling.  ok markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.85 2001/01/28 10:37:25 markus Exp $
d596 8
@


1.85
log
@remove -Q, no longer needed
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.84 2001/01/28 10:24:04 markus Exp $
d518 1
a518 1
will refuse connection attempts with a probabillity of
d525 1
a525 1
The probabillity increases linearly and all connection attempts
@


1.84
log
@cleanup AUTHORS sections
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.83 2001/01/19 16:48:14 markus Exp $
d46 1
a46 1
.Op Fl diqDQ46
a264 2
.It Fl Q
Do not print an error message if RSA support is missing.
@


1.83
log
@fix typo; from stevesk@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.82 2001/01/18 16:20:22 markus Exp $
d1071 8
a1078 31
OpenSSH
is a derivative of the original (free) ssh 1.2.12 release by Tatu Ylonen,
but with bugs removed and newer features re-added.
Rapidly after the
1.2.12 release, newer versions of the original ssh bore successively
more restrictive licenses, and thus demand for a free version was born.
.Pp
This version of OpenSSH
.Bl -bullet
.It
has all components of a restrictive nature (i.e., patents, see
.Xr ssl 8 )
directly removed from the source code; any licensed or patented components
are chosen from
external libraries.
.It
has been updated to support SSH protocol 1.5 and 2, making it compatible with
all other SSH clients and servers.
.It
contains added support for
.Xr kerberos 8
authentication and ticket passing.
.It
supports one-time password authentication with
.Xr skey 1 .
.El
.Pp
OpenSSH has been created by Aaron Campbell, Bob Beck, Markus Friedl,
Niels Provos, Theo de Raadt, and Dug Song.
.Pp
The support for SSH protocol 2 was written by Markus Friedl.
@


1.82
log
@log() is at pri=LOG_INFO, since LOG_NOTICE goes to /dev/console on many systems
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.81 2001/01/13 18:56:48 markus Exp $
d397 1
a397 1
if this file is group/world-accessible.
@


1.81
log
@support supplementary group in {Allow,Deny}Groups
from stevesk@@pobox.com
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.80 2001/01/08 22:29:05 markus Exp $
d502 2
a503 2
QUIET, FATAL, ERROR, NOTICE, VERBOSE and DEBUG.
The default is NOTICE.
@


1.80
log
@implement option 'Banner /etc/issue.net' for ssh2, move version to
2.3.1 (needed for bugcompat detection, 2.3.0 would fail if Banner
is enabled).
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.79 2001/01/07 11:28:07 markus Exp $
d306 1
a306 1
group matches one of the patterns.
d313 1
a313 1
By default login is allowed regardless of the primary group.
d357 2
a358 2
Users whose primary group matches one of the patterns
aren't allowed to log in.
d365 1
a365 1
By default login is allowed regardless of the primary group.
@


1.79
log
@rename SYSLOG_LEVEL_INFO->SYSLOG_LEVEL_NOTICE
syslog priority changes:
	fatal() LOG_ERR  -> LOG_CRIT
	log()   LOG_INFO -> LOG_NOTICE
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.78 2001/01/04 22:35:32 djm Exp $
d335 7
@


1.78
log
@Mention AES as available SSH2 Cipher; ok markus
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.77 2001/01/04 22:25:58 markus Exp $
d495 2
a496 2
QUIET, FATAL, ERROR, INFO, VERBOSE and DEBUG.
The default is INFO.
@


1.77
log
@sync usage()/man with defaults; from stevesk@@pobox.com
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.76 2000/12/28 12:03:57 markus Exp $
d340 1
a340 1
.Dq 3des-cbc,blowfish-cbc,arcfour,cast128-cbc .
@


1.76
log
@document -D
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.75 2000/12/27 11:41:31 markus Exp $
d200 1
a200 1
300 seconds).
@


1.75
log
@update for ssh-2
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.74 2000/11/29 21:11:59 markus Exp $
d264 1
a264 1
.Nm .
@


1.74
log
@sshd -D, startup w/o daemon(), for monitoring scripts or initab;
from handler@@sub-rosa.com and eric@@urbanrage.com; ok niels@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.73 2000/11/22 15:38:30 provos Exp $
d205 1
a205 1
Specifies the file from which the RSA host key is read (default
d211 2
d731 4
a734 2
file lists the DSA keys that are
permitted for DSA authentication in SSH protocol 2.0.
d740 1
a740 1
Each line consists of the following fields, separated by
d742 4
a745 2
The options field
is optional; its presence is determined by whether the line starts
d747 2
a748 1
The bits, exponent, modulus and comment fields give the RSA key; the
d751 4
d760 2
@


1.73
log
@talk about /etc/primes, okay markus@@
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.72 2000/11/12 19:50:38 markus Exp $
d46 1
a46 1
.Op Fl diqQ46
d257 6
@


1.72
log
@add support for RSA to SSH2.  please test.

there are now 3 types of keys: RSA1 is used by ssh-1 only,
RSA and DSA are used by SSH2.

you can use 'ssh-keygen -t rsa -f ssh2_rsa_file' to generate RSA
keys for SSH2 and use the RSA keys for hostkeys or for user keys.

SSH2 RSA or DSA keys are added to .ssh/authorised_keys2 as before.

IdentityFile2, HostDsaKey and DSAAuthentication are obsolete.
you can use multiple IdentityFile and HostKey for all types of keys.

the option DSAAuthentication is replaced by PubkeyAuthetication.
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.71 2000/11/10 05:10:40 aaron Exp $
d888 2
@


1.71
log
@- Section shuffling: comply to the section ordering outlined in mdoc(7).
- Some .Nm trimming.
- .Sh AUTHOR -> .Sh AUTHORS
- Other miscellaneous fixes here and there.
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.70 2000/10/16 09:38:44 djm Exp $
d147 1
a147 1
user authentication method (DSAAuthentication)
d362 2
a363 2
.It Cm DSAAuthentication
Specifies whether DSA authentication is allowed.
a375 7
.It Cm HostDSAKey
Specifies the file containing the private DSA host key (default
.Pa /etc/ssh_host_dsa_key )
used by SSH protocol 2.0.
Note that
.Nm
disables protocol 2.0 if this file is group/world-accessible.
d377 1
a377 1
Specifies the file containing the private RSA host key (default
d379 1
a379 1
used by SSH protocols 1.3 and 1.5.
d382 8
a389 1
disables protocols 1.3 and 1.5 if this file is group/world-accessible.
@


1.70
log
@Add idents for files which lack them

Fix idents Id -> OpenBSD for the rest
@
text
@d37 1
a37 1
.\" $OpenBSD$
d1042 1
a1042 1
.Sh AUTHOR
@


1.70.2.1
log
@Pull in OpenSSH 2.5.0
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.94 2001/02/12 16:16:24 markus Exp $
d46 1
a46 1
.Op Fl diqD46
d147 1
a147 1
user authentication method (PubkeyAuthentication)
d200 1
a200 1
600 seconds).
d205 1
a205 1
Specifies the file from which the host key is read (default
a210 2
It is possible to have multiple host key files for
the different protocol versions.
d257 2
a258 6
.It Fl D
When this option is specified
.Nm
will not detach and does not become a daemon.
This allows easy monitoring of
.Nm sshd .
d295 1
a295 1
This keyword can be followed by a list of group names, separated
d298 1
a298 1
group or supplementary group list matches one of the patterns.
d305 1
a305 1
By default login is allowed regardless of the group list.
d316 1
a316 1
This keyword can be followed by a list of user names, separated
a327 7
.It Cm Banner
In some jurisdictions, sending a warning message before authentication
may be relevant for getting legal protection.
The contents of the specified file are sent to the remote user before
authentication is allowed.
This option is only available for protocol version 2.
.Pp
d332 1
a332 1
.Dq 3des-cbc,blowfish-cbc,cast128-cbc,arcfour,aes128-cbc .
d342 2
a343 2
Users whose primary group or supplementary group list matches
one of the patterns aren't allowed to log in.
d350 1
a350 1
By default login is allowed regardless of the group list.
d362 2
a363 2
.It Cm PubkeyAuthentication
Specifies whether public key authentication is allowed.
d376 7
d384 1
a384 1
Specifies the file containing the private host keys (default
d386 1
a386 1
used by SSH protocol versions 1 and 2.
d389 1
a389 8
will refuse to use a file if it is group/world-accessible.
It is possible to have multiple host key files.
.Dq rsa1
keys are used for version 1 and
.Dq dsa
or
.Dq rsa
are used for version 2 of the SSH protocol.
a490 11
.It Cm MACs
Specifies the available MAC (message authentication code) algorithms.
The MAC algorithm is used in protocol version 2
for data integrity protection.
Multiple algorithms must be comma-separated.
The default is
.Pp
.Bd -literal
  ``hmac-sha1,hmac-md5,hmac-ripemd160,hmac-ripemd160@@openssh.com,
    hmac-sha1-96,hmac-md5-96''
.Ed
d505 1
a505 1
will refuse connection attempts with a probability of
d512 1
a512 1
The probability increases linearly and all connection attempts
d531 1
a531 2
.Dq without-password ,
.Dq forced-commands-only
d536 1
a536 2
.Pp
If this option is set to
d538 1
a538 1
password authentication is disabled for root.
d540 1
a540 4
If this option is set to
.Dq forced-commands-only
root login with public key authentication will be allowed,
but only if the
d542 2
a543 1
option has been specified
d545 1
a545 2
normally not allowed). All other authentication methods are disabled
for root.
a582 8
.It Cm ReverseMappingCheck
Specifies whether
.Nm
should try to verify the remote host name and check that
the resolved host name for the remote IP address maps back to the
very same IP address.
The default is
.Dq no .
d606 1
a606 1
.It Cm ChallengeResponseAuthentication
d608 1
a608 1
challenge reponse
a609 3
Currently there is only support for
.Xr skey 1
authentication.
d612 3
d723 2
a724 4
file lists the DSA and RSA keys that are
permitted for public key authentication (PubkeyAuthentication)
in SSH protocol 2.0.
.Pp
d730 1
a730 1
Each RSA public key consists of the following fields, separated by
d732 2
a733 4
Each protocol version 2 public key consists of:
options, keytype, base64 encoded key, comment.
The options fields
are optional; its presence is determined by whether the line starts
d735 1
a735 2
The bits, exponent, modulus and comment fields give the RSA key for
protocol version 1; the
a737 4
For protocol version 2 the keytype is
.Dq ssh-dss
or
.Dq ssh-rsa .
a742 2
or the
.Pa id_dsa.pub
a775 3
Note that if you want a 8-bit clean channel,
you must not request a pty or should specify
.Cm no-pty .
a887 2
.It Pa /etc/primes
Contains Diffie-Hellman groups used for the "Diffie-Hellman Group Exchange".
d1042 32
a1073 9
.Sh AUTHORS
OpenSSH is a derivative of the original and free
ssh 1.2.12 release by Tatu Ylonen.
Aaron Campbell, Bob Beck, Markus Friedl, Niels Provos,
Theo de Raadt and Dug Song
removed many bugs, re-added newer features and
created OpenSSH.
Markus Friedl contributed the support for SSH
protocol versions 1.5 and 2.0.
a1075 1
.Xr sftp 1 ,
d1081 1
@


1.70.2.2
log
@Pull in OpenSSH-2.5.1
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.95 2001/02/17 23:48:48 deraadt Exp $
d43 1
a43 1
.Nd OpenSSH secure shell daemon
@


1.70.2.3
log
@Pull in OpenSSH-2.5.2 for 2.8 branch.
@
text
@d13 3
a15 3
.\" Copyright (c) 1999,2000 Markus Friedl.  All rights reserved.
.\" Copyright (c) 1999 Aaron Campbell.  All rights reserved.
.\" Copyright (c) 1999 Theo de Raadt.  All rights reserved.
d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.107 2001/03/19 12:10:17 djm Exp $
d43 1
a43 1
.Nd OpenSSH ssh daemon
d57 1
a57 1
(SSH Daemon) is the daemon program for
d137 3
a139 2
The rest of the session is encrypted using a symmetric cipher, currently
Blowfish, 3DES, CAST128, Arcfour, 128 bit AES, or 256 bit AES.
d177 1
a177 3
.Dv SIGHUP ,
by executing itself with the name it was started as, ie.
.Pa /usr/sbin/sshd .
a340 9
.It Cm ChallengeResponseAuthentication
Specifies whether
challenge response
authentication is allowed.
Currently there is only support for
.Xr skey 1
authentication.
The default is
.Dq yes .
d345 1
a345 1
.Dq aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour.
d375 5
d512 1
a512 1
  ``hmac-md5,hmac-sha1,hmac-ripemd160,hmac-ripemd160@@openssh.com,
d551 1
a551 1
Specifies whether root can login using
a574 4
.Pp
If this option is set to
.Dq no
root is not allowed to login.
d609 3
a611 5
.It Cm PubkeyAuthentication
Specifies whether public key authentication is allowed.
The default is
.Dq yes .
Note that this option applies to protocol version 2 only.
d643 9
a852 9
.It Cm permitopen="host:port"
Limit local 
.Li ``ssh -L''
port-forwading such that it may only connect to the specified host and
port. Multiple 
.Cm permitopen
options may be applied seperated by commas. No pattern matching is 
performed on the specified hostnames, they must be literal domains or 
addresses.
a859 2
.Pp
permitopen="10.2.1.55:80",permitopen="10.2.1.56:25" 1024 33 23.\|.\|.\|2323
d922 3
a924 4
.It Pa /etc/ssh_host_key, /etc/ssh_host_dsa_key, /etc/ssh_host_rsa_key
These three files contain the private parts of the
(SSH1, SSH2 DSA, and SSH2 RSA) host keys.
These files should only be owned by root, readable only by root, and not
d929 3
a931 4
.It Pa /etc/ssh_host_key.pub, /etc/ssh_host_dsa_key.pub, /etc/ssh_host_rsa_key.pub
There three files contain the public parts of the
(SSH1, SSH2 DSA, and SSH2 RSA) host keys.
These files should be world-readable but writable only by
d933 5
a937 5
Their contents should match the respective private parts.
These files are not
really used for anything; they are provided for the convenience of
the user so their contents can be copied to known hosts files.
These files are created using
d975 1
a975 1
to verify that it is connecting to the correct remote host.
@


1.70.2.4
log
@Pull in OpenSSH-2.9 to 2.8 branch.
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.120 2001/04/22 23:58:36 markus Exp $
d43 1
a43 1
.Nd OpenSSH SSH daemon
d46 1
a46 1
.Op Fl deiqD46
a136 1
.Pp
d138 1
a138 1
128 bit AES, Blowfish, 3DES, CAST128, Arcfour, 192 bit AES, or 256 bit AES.
d146 2
a147 3
user (PubkeyAuthentication) or
client host (HostbasedAuthentication) authentication method,
conventional password authentication and challenge response based methods.
d183 1
a183 2
Specifies the number of bits in the ephemeral protocol version 1
server key (default 768).
d191 1
a191 1
Multiple -d options increase the debugging level.
a192 4
.It Fl e
When this option is specified,
.Nm
will send the output to the standard error instead of the system log.
d213 1
a213 1
the different protocol versions and host key algorithms.
d228 2
a229 2
Specifies how often the ephemeral protocol version 1 server key is
regenerated (default 3600 seconds, or one hour).
d266 8
a361 31
.It Cm ClientAliveInterval
Sets a timeout interval in seconds after which if no data has been received
from the client, 
.Nm
will send a message through the encrypted
channel to request a response from the client.
The default
is 0, indicating that these messages will not be sent to the client.
This option applies to protocol version 2 only.
.It Cm ClientAliveCountMax
Sets the number of client alive messages (see above) which may be
sent without
.Nm
receiving any messages back from the client. If this threshold is
reached while client alive messages are being sent, 
.Nm
will disconnect the client, terminating the session. It is important
to note that the use of client alive messages is very different from 
.Cm Keepalive
(below). The client alive messages are sent through the
encrypted channel and therefore will not be spoofable. The TCP keepalive
option enabled by
.Cm Keepalive
is spoofable. You want to use the client
alive mechanism when you are basing something important on
clients having an active connection to the server.
.Pp
The default value is 3. If you set
.Cm ClientAliveInterval
(above) to 15, and leave this value at the default, unresponsive ssh clients
will be disconnected after approximately 45 seconds. 
a393 9
.It Cm HostbasedAuthentication
Specifies whether rhosts or /etc/hosts.equiv authentication together
with successful public key client host authentication is allowed
(hostbased authentication).
This option is similar to
.Cm RhostsRSAAuthentication
and applies to protocol version 2 only.
The default is
.Dq no .
d413 1
a413 6
files will not be used in
.Cm RhostsAuthentication ,
.Cm RhostsRSAAuthentication
or
.Cm HostbasedAuthentication .
.Pp
d426 1
a426 3
.Cm RhostsRSAAuthentication
or
.Cm HostbasedAuthentication .
d479 2
a480 2
In protocol version 1, the ephemeral server key is automatically regenerated
after this many seconds (if it has been used).
d488 1
a488 1
Specifies the local addresses
d491 5
a495 33
The following forms may be used:
.Pp
.Bl -item -offset indent -compact
.It
.Cm ListenAddress
.Sm off
.Ar host No | Ar IPv4_addr No | Ar IPv6_addr
.Sm on
.It
.Cm ListenAddress
.Sm off
.Ar host No | Ar IPv4_addr No : Ar port
.Sm on
.It
.Cm ListenAddress
.Sm off
.Oo
.Ar host No | Ar IPv6_addr Oc : Ar port
.Sm on
.El
.Pp
If
.Ar port
is not specified,
.Nm
will listen on the address and all prior
.Cm Port
options specified. The default is to listen on all local
addresses.  Multiple
.Cm ListenAddress
options are permitted. Additionally, any
.Cm Port
options must precede this option for non port qualified addresses.
d549 1
a595 8
See also
.Cm ListenAddress .
.It Cm PrintLastLog
Specifies whether
.Nm
should print the date and time when the user last logged in.
The default is
.Dq yes .
d617 1
a617 1
.Dq 2,1 .
a640 1
This option applies to protocol version 1 only.
a645 1
This option applies to protocol version 1 only.
d650 1
a650 1
This option applies to protocol version 1 only.
d652 1
a652 1
Defines the number of bits in the ephemeral protocol version 1 server key.
d759 1
a759 1
permitted for RSA authentication in protocol version 1
d764 1
a764 1
in protocol version 2.
d790 2
a791 1
.Pa identity.pub ,
a792 2
or the
.Pa id_rsa.pub
d858 1
a858 1
port forwarding such that it may only connect to the specified host and
d861 1
a861 1
options may be applied separated by commas. No pattern matching is 
d927 1
a927 4
.Bd -literal
closenet,.\|.\|.\|,130.233.208.41 1024 37 159.\|.\|.93 closenet.hut.fi
cvs.openbsd.org,199.185.137.3 ssh-rsa AAAA1234.....=
.Ed
d936 2
a937 1
These three files contain the private parts of the host keys.
d944 2
a945 1
These three files contain the public parts of the host keys.
d975 1
a975 1
Lists the public keys (RSA or DSA) that can be used to log into the user's account.
a982 2
and/or
.Pa id_rsa.pub
a995 11
.It Pa "/etc/ssh_known_hosts2" and "$HOME/.ssh/known_hosts2"
These files are consulted when using protocol version 2 hostbased
authentication to check the public key of the host.
The key must be listed in one of these files to be accepted.
The client uses the same files
to verify that it is connecting to the correct remote host.
These files should be writable only by root/the owner.
.Pa /etc/ssh_known_hosts2
should be world-readable, and
.Pa $HOME/.ssh/known_hosts2
can but need not be world-readable.
d1093 2
a1094 6
something similar to:
.Bd -literal
	if read proto cookie; then
		echo add $DISPLAY $proto $cookie | xauth -q -
	fi
.Ed
a1128 20
.Rs
.%A T. Ylonen
.%A T. Kivinen
.%A M. Saarinen
.%A T. Rinne
.%A S. Lehtinen
.%T "SSH Protocol Architecture"
.%N draft-ietf-secsh-architecture-07.txt
.%D January 2001
.%O work in progress material
.Re
.Rs
.%A M. Friedl
.%A N. Provos
.%A W. A. Simpson
.%T "Diffie-Hellman Group Exchange for the SSH Transport Layer Protocol"
.%N draft-ietf-secsh-dh-group-exchange-00.txt
.%D January 2001
.%O work in progress material
.Re
@


1.70.2.5
log
@Pull in OpenSSH 2.9.9 to the 2.8 branch.
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.152 2001/09/20 00:15:54 stevesk Exp $
d46 1
a46 1
.Op Fl deiqtD46
d54 1
d121 1
d123 1
a123 1
.Xr rexecd 8
d133 1
a133 1
Each host has a host-specific key (RSA or DSA) used to identify the host.
d179 1
a179 1
by executing itself with the name it was started as, i.e.,
d187 1
a250 6
.It Fl t
Test mode.
Only check the validity of the configuration file and sanity of the keys.
This is useful for updating 
.Nm
reliably as configuration options may change.
a266 12
.Fl u0
is also be used to prevent
.Nm
from making DNS requests unless the authentication
mechanism or configuration requires it.
Authentication mechanisms that may require DNS include
.Cm RhostsAuthentication ,
.Cm RhostsRSAAuthentication ,
.Cm HostbasedAuthentication
and using a
.Cm from="pattern-list"
option in a key file.
d289 1
a289 1
The file contains keyword-argument pairs, one per line.
d294 1
a294 3
The possible
keywords and their meanings are as follows (note that
keywords are case-insensitive and arguments are case-sensitive):
d310 1
a310 1
Only group names are valid; a numerical group ID is not recognized.
d331 1
a331 1
Only user names are valid; a numerical user ID is not recognized.
d333 1
a333 18
If the pattern takes the form USER@@HOST then USER and HOST
are separately checked, restricting logins to particular
users from particular hosts.
.Pp
.It Cm AuthorizedKeysFile
Specifies the file that contains the public keys that can be used
for user authentication.
.Cm AuthorizedKeysFile
may contain tokens of the form %T which are substituted during connection
set-up. The following tokens are defined: %% is replaced by a literal '%',
%h is replaced by the home directory of the user being authenticated and
%u is replaced by the username of that user.
After expansion,
.Cm AuthorizedKeysFile
is taken to be an absolute path or one relative to the user's home
directory.
The default is
.Dq .ssh/authorized_keys
d342 6
a347 4
Specifies whether challenge response authentication is allowed.
All authentication styles from
.Xr login.conf 5
are supported.
d355 6
d363 1
a363 1
from the client,
d375 1
a375 1
reached while client alive messages are being sent,
d378 1
a378 1
to note that the use of client alive messages is very different from
d384 3
a386 2
is spoofable. The client alive mechanism is valuable when the client or
server depend on knowing when a connection has become inactive.
d388 1
a388 1
The default value is 3. If
d390 2
a391 4
(above) is set to 15, and
.Cm ClientAliveCountMax
is left at the default, unresponsive ssh clients
will be disconnected after approximately 45 seconds.
d402 1
a402 1
Only group names are valid; a numerical group ID is not recognized.
d413 1
a413 1
Only user names are valid; a numerical user ID is not recognized.
a417 9
By default,
.Nm
binds remote port forwardings to the loopback addresss.  This
prevents other remote hosts from connecting to forwarded ports.
.Cm GatewayPorts
can be used to specify that
.Nm
should bind remote port forwardings to the wildcard address,
thus allowing remote hosts to connect to forwarded ports.
d589 5
a593 1
.Dq hmac-md5,hmac-sha1,hmac-ripemd160,hmac-sha1-96,hmac-md5-96 .
a766 2
The default is
.Dq no .
d770 2
a771 7
Note also, that if this is enabled,
.Cm X11Forwarding
will be disabled because
.Xr login 1
does not know how to handle
.Xr xauth 1
cookies.
a785 3
X11 forwarding is automatically disabled if
.Cm UseLogin
is enabled.
a792 42
.Ss Time Formats
.Pp
.Nm
command-line arguments and configuration file options that specify time
may be expressed using a sequence of the form:
.Sm off
.Ar time Oo Ar qualifier Oc ,
.Sm on
where
.Ar time
is a positive integer value and
.Ar qualifier
is one of the following:
.Pp
.Bl -tag -width Ds -compact -offset indent
.It Cm <none>
seconds
.It Cm s | Cm S
seconds
.It Cm m | Cm M
minutes
.It Cm h | Cm H
hours
.It Cm d | Cm D
days
.It Cm w | Cm W
weeks
.El
.Pp
Each member of the sequence is added together to calculate
the total time value.
.Pp
Time format examples:
.Pp
.Bl -tag -width Ds -compact -offset indent
.It 600
600 seconds (10 minutes)
.It 10m
10 minutes
.It 1h30m
1 hour 30 minutes (90 minutes)
.El
d839 1
d841 1
a841 1
is the default file that lists the public keys that are
d843 4
a846 1
and for public key authentication (PubkeyAuthentication)
a847 2
.Cm AuthorizedKeysFile
may be used to specify an alternative file.
d882 1
a882 2
The following option specifications are supported (note
that option keywords are case-insensitive):
d908 1
a908 1
The command is run on a pty if the client requests a pty;
d910 2
a911 2
If a 8-bit clean channel is required,
one must not request a pty or should specify
a918 1
Note that this option applies to shell, command or subsystem execution.
d940 1
a940 1
Limit local
d943 1
a943 4
port.
IPv6 addresses can be specified with an alternative syntax:
.Ar host/port .
Multiple
d945 2
a946 2
options may be applied separated by commas. No pattern matching is
performed on the specified hostnames, they must be literal domains or
d960 2
d963 1
a963 1
.Pa $HOME/.ssh/known_hosts
d1039 1
a1039 1
.It Pa /etc/moduli
d1049 11
a1066 1
.Pa identity.pub ,
d1074 1
a1074 2
authentication or protocol version 2 hostbased authentication
to check the public key of the host.
d1083 11
d1224 1
d1229 2
a1230 3
.Xr login.conf 5 ,
.Xr moduli 5 ,
.Xr sftp-server 8
d1238 2
a1239 2
.%N draft-ietf-secsh-architecture-09.txt
.%D July 2001
d1247 2
a1248 2
.%N draft-ietf-secsh-dh-group-exchange-01.txt
.%D April 2001
@


1.70.2.6
log
@Merge OpenSSH 3.0
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.70.2.5 2001/09/27 00:15:43 miod Exp $
d1168 3
a1170 2
Access controls that should be enforced by tcp-wrappers are defined here.
Further details are described in
@


1.70.2.7
log
@Merge OpenSSH 3.0.1.

This is likely to be the last commit to the 2.8-STABLE branch.
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.70.2.6 2001/11/15 00:15:00 miod Exp $
d405 1
a405 1
.Cm KeepAlive
d409 1
a409 1
.Cm KeepAlive
@


1.70.2.8
log
@Merge OpenSSH 3.1.
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.170 2002/02/28 20:46:10 stevesk Exp $
a51 1
.Op Fl o Ar option
d210 2
a211 1
Specifies a file from which a host key is read.
d215 1
a215 8
host key files are normally not readable by anyone but root).
The default is
.Pa /etc/ssh_host_key
for protocol version 1, and
.Pa /etc/ssh_host_rsa_key
and
.Pa /etc/ssh_host_dsa_key
for protocol version 2.
a239 4
.It Fl o Ar option
Can be used to give options in the format used in the configuration file.
This is useful for specifying options for which there is no separate
command-line flag.
a242 3
Multiple port options are permitted.
Ports specified in the configuration file are ignored when a
command-line port is specified.
d251 1
a251 1
This is useful for updating
a281 5
Configuration options that require DNS include using a
USER@@HOST pattern in
.Cm AllowUsers
or
.Cm DenyUsers .
d318 1
a318 1
This keyword can be followed by a list of group name patterns, separated
d328 1
a328 1
By default, login is allowed for all groups.
d339 1
a339 1
This keyword can be followed by a list of user name patterns, separated
d349 1
a349 1
By default, login is allowed for all users.
d367 1
a367 1
.Dq .ssh/authorized_keys .
d386 1
a386 5
.Pp
.Bd -literal
  ``aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour,
    aes192-cbc,aes256-cbc''
.Ed
d420 1
a420 1
This keyword can be followed by a list of group name patterns, separated
d422 2
a423 2
Login is disallowed for users whose primary group or supplementary
group list matches one of the patterns.
d430 1
a430 1
By default, login is allowed for all groups.
d433 1
a433 1
This keyword can be followed by a list of user name patterns, separated
d441 1
a441 4
By default, login is allowed for all users.
If the pattern takes the form USER@@HOST then USER and HOST
are separately checked, restricting logins to particular
users from particular hosts.
d470 3
a472 9
Specifies a file containing a private host key
used by SSH.
The default is
.Pa /etc/ssh_host_key
for protocol version 1, and
.Pa /etc/ssh_host_rsa_key
and
.Pa /etc/ssh_host_dsa_key
for protocol version 2.
d512 1
a512 1
Specifies whether the system should send TCP keepalive messages to the
d527 1
a527 1
if the network goes down or the client host crashes.
d531 2
a532 1
.Dq no .
d615 3
a617 4
QUIET, FATAL, ERROR, INFO, VERBOSE, DEBUG, DEBUG1, DEBUG2 and DEBUG3.
The default is INFO.  DEBUG and DEBUG1 are equivalent.  DEBUG2
and DEBUG3 each specify higher levels of debugging output.
Logging with a DEBUG level violates the privacy of users
d736 8
a810 8
.It Cm VerifyReverseMapping
Specifies whether
.Nm
should try to verify the remote host name and check that
the resolved host name for the remote IP address maps back to the
very same IP address.
The default is
.Dq no .
a827 25
.It Cm X11UseLocalhost
Specifies whether
.Nm
should bind the X11 forwarding server to the loopback address or to
the wildcard address.  By default,
.Nm
binds the forwarding server to the loopback address and sets the
hostname part of the
.Ev DISPLAY
environment variable to
.Dq localhost .
This prevents remote hosts from connecting to the fake display.
However, some older X11 clients may not function with this
configuration.
.Cm X11UseLocalhost
may be set to
.Dq no
to specify that the forwarding server should be bound to the wildcard
address.
The argument must be
.Dq yes
or
.Dq no .
The default is
.Dq yes .
a1008 3
This option is automatically disabled if
.Cm UseLogin
is enabled.
@


1.69
log
@AllowTcpForwarding; from naddy@@
@
text
@d37 1
@


1.68
log
@more info about -V
@
text
@d306 8
@


1.67
log
@Repair formatting errors introduced after 2.7.
@
text
@d259 1
a259 1
SSH2 compatibility mode.
d265 1
@


1.66
log
@typo
@
text
@d189 2
a190 1
Multiple -d options increases the debugging level. Maximum is 3.
d428 2
a429 1
the Kerberos KDC.  To use this option, the server needs a 
d493 1
a493 1
(e.g. "10:30:60").
d615 3
a617 2
Configures an external subsystem (e.g. file transfer daemon).
Arguments should be a subsystem name and a command to execute upon subsystem request. 
@


1.65
log
@multiple debug levels
@
text
@d435 1
a435 2
.Pa /etc/passwd
or SecurID.
@


1.64
log
@cleanup copyright notices on all files.  I have attempted to be accurate with
the details.  everything is now under Tatu's licence (which I copied from his
readme), and/or the core-sdi bsd-ish thing for deattack, or various openbsd
developers under a 2-term bsd licence.  We're not changing any rules, just
being accurate.
@
text
@d189 1
@


1.63
log
@implement a SFTP server. interops with sftp2, scp2 and the windows
client from ssh.com
@
text
@a2 2
.\" sshd.8.in
.\"
a3 1
.\"
d7 18
a24 1
.\" Created: Sat Apr 22 21:55:14 1995 ylo
d26 10
a35 1
.\" $Id: sshd.8,v 1.62 2000/08/25 16:16:15 deraadt Exp $
@


1.62
log
@no need for those dynamic libraries anymore
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.61 2000/08/17 20:06:34 markus Exp $
d592 5
d1040 1
@


1.61
log
@sshd -u len, similar to telnetd
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.60 2000/08/02 17:27:04 provos Exp $
a1027 4
.Pp
The libraries described in
.Xr ssl 8
are required for proper operation.
@


1.60
log
@disallow kerberos authentication if we can't verify the TGT; from
dugsong@@
kerberos authentication is on by default only if you have a srvtab.
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.59 2000/08/02 16:27:16 provos Exp $
d29 1
d215 16
@


1.59
log
@disable kerberos authentication by default
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.58 2000/08/01 17:46:10 deraadt Exp $
d389 1
a389 1
.Dq no .
@


1.58
log
@many fixes from pepper@@mail.reppep.com
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.57 2000/07/22 09:14:36 markus Exp $
d386 2
a387 1
the Kerberos KDC.
d389 1
a389 1
.Dq yes .
@


1.57
log
@random early drop; ok theo, niels
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.56 2000/07/06 04:06:56 aaron Exp $
d107 1
a107 1
Version 2 works similar:
d260 1
a260 1
Only group names are valid, a numerical group ID isn't recognized.
d273 1
a273 1
Only user names are valid, a numerical user ID isn't recognized.
d297 1
a297 1
Only group names are valid, a numerical group ID isn't recognized.
d308 1
a308 1
Only user names are valid, a numerical user ID isn't recognized.
d324 1
a324 1
.It Cm HostDsaKey
d467 1
a467 1
Note that this option applies to both protocol version 1 and 2.
d588 1
a588 1
is not never for remote command execution.
d686 1
a686 1
The options (if present) consists of comma-separated option
d760 1
a760 1
maintained automatically: whenever the user connects an unknown host
d835 1
a835 1
The contents of this file are not sensitive; it can be world-readable.
d863 1
a863 1
to verify that the remote host is the one we intended to connect.
d902 1
a902 1
.Pa /etc/hosts.equiv
@


1.56
log
@Insert more missing .El directives. Our troff really should identify these and
spit out a warning.
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.55 2000/06/26 21:59:18 markus Exp $
d446 17
@


1.55
log
@MaxStartups: limit number of unauthenticated connections, work by theo and me
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.54 2000/06/17 22:52:34 jakob Exp $
d965 1
@


1.54
log
@add support for ssh v2 subsystems. ok markus@@.
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.53 2000/06/05 19:59:46 markus Exp $
d438 8
@


1.53
log
@document UseLogin better
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.52 2000/05/31 06:36:40 markus Exp $
d546 5
@


1.52
log
@xauth_location support; pr 1234
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.51 2000/05/08 17:42:31 hugh Exp $
d555 4
a558 1
is used.
@


1.51
log
@some markus certified spelling adjustments
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.50 2000/05/08 17:12:16 markus Exp $
d572 6
@


1.51.2.1
log
@lovin' CVS... update patch branch to OpenSSH-2.1.1
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.53 2000/06/05 19:59:46 markus Exp $
d555 1
a555 4
is used for interactive login sessions.
Note that
.Xr login 1
is not never for remote command execution.
a571 6
.It Cm XAuthLocation
Specifies the location of the
.Xr xauth 1
program.
The default is
.Pa /usr/X11R6/bin/xauth .
@


1.51.2.2
log
@Pull in the rest of openssh-2.2.0 to 2.7 branch (luvin' cvs...)
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.62 2000/08/25 16:16:15 deraadt Exp $
a28 1
.Op Fl u Ar len
d107 1
a107 1
Version 2 works similarly:
a213 16
.It Fl u Ar len
This option is used to specify the size of the field
in the
.Li utmp
structure that holds the remote host name.
If the resolved host name is longer than
.Ar len ,
the dotted decimal value will be used instead.
This allows hosts with very long host names that
overflow this field to still be uniquely identified.
Specifying
.Fl u0
indicates that only dotted decimal addresses
should be put into the
.Pa utmp
file.
d260 1
a260 1
Only group names are valid; a numerical group ID isn't recognized.
d273 1
a273 1
Only user names are valid; a numerical user ID isn't recognized.
d297 1
a297 1
Only group names are valid; a numerical group ID isn't recognized.
d308 1
a308 1
Only user names are valid; a numerical user ID isn't recognized.
d324 1
a324 1
.It Cm HostDSAKey
d386 1
a386 2
the Kerberos KDC.  To use this option, the server needs a 
Kerberos servtab which allows the verification of the KDC's identity.
a437 25
.It Cm MaxStartups
Specifies the maximum number of concurrent unauthenticated connections to the
.Nm
daemon.
Additional connections will be dropped until authentication succeeds or the
.Cm LoginGraceTime
expires for a connection.
The default is 10.
.Pp
Alternatively, random early drop can be enabled by specifying
the three colon separated values
.Dq start:rate:full
(e.g. "10:30:60").
.Nm
will refuse connection attempts with a probabillity of
.Dq rate/100
(30%)
if there are currently
.Dq start
(10)
unauthenticated connections.
The probabillity increases linearly and all connection attempts
are refused if the number of unauthenticated connections reaches
.Dq full
(60).
d442 1
a442 1
Note that this option applies to both protocol versions 1 and 2.
a545 5
.It Cm Subsystem
Configures an external subsystem (e.g. file transfer daemon).
Arguments should be a subsystem name and a command to execute upon subsystem request. 
By default no subsystems are defined.
Note that this option applies to protocol version 2 only.
d558 1
a558 1
is never used for remote command execution.
d656 1
a656 1
The options (if present) consist of comma-separated option
d730 1
a730 1
maintained automatically: whenever the user connects from an unknown host
d805 1
a805 1
The content of this file is not sensitive; it can be world-readable.
d833 1
a833 1
to verify that the remote host is the one it intended to connect.
d872 1
a872 1
.It Pa /etc/hosts.equiv
a951 1
.El
d979 4
@


1.51.2.3
log
@openssh-2.3.0 (again) for 2.7 branch
@
text
@d3 2
d6 1
d10 1
a10 18
.\" As far as I am concerned, the code I have written for this software
.\" can be used freely for any purpose.  Any derived versions of this
.\" software must be clearly marked as such, and if the derived work is
.\" incompatible with the protocol description in the RFC file, it must be
.\" called by a name other than "ssh" or "Secure Shell".
.\"
.\" Copyright (c) 1999,2000 Markus Friedl. All rights reserved.
.\" Copyright (c) 1999 Aaron Campbell. All rights reserved.
.\" Copyright (c) 1999 Theo de Raadt. All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
d12 1
a12 10
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
a13 1
.\" $OpenBSD: sshd.8,v 1.70 2000/10/16 09:38:44 djm Exp $
a165 2
Multiple -d options increases the debugging level.
Maximum is 3.
d234 1
a234 1
SSH-2 compatibility mode.
a239 1
This option is not intended to be called directly.
a279 8
.It Cm AllowTcpForwarding
Specifies whether TCP forwarding is permitted.
The default is
.Dq yes .
Note that disabling TCP forwarding does not improve security unless
users are also denied shell access, as they can always install their
own forwarders.
.Pp
d403 1
a403 2
the Kerberos KDC.
To use this option, the server needs a
d411 2
a412 1
.Pa /etc/passwd .
d468 1
a468 1
(e.g., "10:30:60").
d590 2
a591 8
Configures an external subsystem (e.g., file transfer daemon).
Arguments should be a subsystem name and a command to execute upon subsystem
request.
The command
.Xr sftp-server 8
implements the
.Dq sftp
file transfer subsystem.
a1034 1
.Xr sftp-server 8 ,
@


1.51.2.4
log
@OpenSSH-2.5.1 for 2.7 patch branch
@
text
@d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.95 2001/02/17 23:48:48 deraadt Exp $
d43 1
a43 1
.Nd OpenSSH secure shell daemon
d46 1
a46 1
.Op Fl diqD46
d147 1
a147 1
user authentication method (PubkeyAuthentication)
d200 1
a200 1
600 seconds).
d205 1
a205 1
Specifies the file from which the host key is read (default
a210 2
It is possible to have multiple host key files for
the different protocol versions.
d257 2
a258 6
.It Fl D
When this option is specified
.Nm
will not detach and does not become a daemon.
This allows easy monitoring of
.Nm sshd .
d295 1
a295 1
This keyword can be followed by a list of group names, separated
d298 1
a298 1
group or supplementary group list matches one of the patterns.
d305 1
a305 1
By default login is allowed regardless of the group list.
d316 1
a316 1
This keyword can be followed by a list of user names, separated
a327 7
.It Cm Banner
In some jurisdictions, sending a warning message before authentication
may be relevant for getting legal protection.
The contents of the specified file are sent to the remote user before
authentication is allowed.
This option is only available for protocol version 2.
.Pp
d332 1
a332 1
.Dq 3des-cbc,blowfish-cbc,cast128-cbc,arcfour,aes128-cbc .
d342 2
a343 2
Users whose primary group or supplementary group list matches
one of the patterns aren't allowed to log in.
d350 1
a350 1
By default login is allowed regardless of the group list.
d362 2
a363 2
.It Cm PubkeyAuthentication
Specifies whether public key authentication is allowed.
d376 7
d384 1
a384 1
Specifies the file containing the private host keys (default
d386 1
a386 1
used by SSH protocol versions 1 and 2.
d389 1
a389 8
will refuse to use a file if it is group/world-accessible.
It is possible to have multiple host key files.
.Dq rsa1
keys are used for version 1 and
.Dq dsa
or
.Dq rsa
are used for version 2 of the SSH protocol.
a490 11
.It Cm MACs
Specifies the available MAC (message authentication code) algorithms.
The MAC algorithm is used in protocol version 2
for data integrity protection.
Multiple algorithms must be comma-separated.
The default is
.Pp
.Bd -literal
  ``hmac-sha1,hmac-md5,hmac-ripemd160,hmac-ripemd160@@openssh.com,
    hmac-sha1-96,hmac-md5-96''
.Ed
d505 1
a505 1
will refuse connection attempts with a probability of
d512 1
a512 1
The probability increases linearly and all connection attempts
d531 1
a531 2
.Dq without-password ,
.Dq forced-commands-only
d536 1
a536 2
.Pp
If this option is set to
d538 1
a538 1
password authentication is disabled for root.
d540 1
a540 4
If this option is set to
.Dq forced-commands-only
root login with public key authentication will be allowed,
but only if the
d542 2
a543 1
option has been specified
d545 1
a545 2
normally not allowed). All other authentication methods are disabled
for root.
a582 8
.It Cm ReverseMappingCheck
Specifies whether
.Nm
should try to verify the remote host name and check that
the resolved host name for the remote IP address maps back to the
very same IP address.
The default is
.Dq no .
d606 1
a606 1
.It Cm ChallengeResponseAuthentication
d608 1
a608 1
challenge reponse
a609 3
Currently there is only support for
.Xr skey 1
authentication.
d612 3
d723 2
a724 4
file lists the DSA and RSA keys that are
permitted for public key authentication (PubkeyAuthentication)
in SSH protocol 2.0.
.Pp
d730 1
a730 1
Each RSA public key consists of the following fields, separated by
d732 2
a733 4
Each protocol version 2 public key consists of:
options, keytype, base64 encoded key, comment.
The options fields
are optional; its presence is determined by whether the line starts
d735 1
a735 2
The bits, exponent, modulus and comment fields give the RSA key for
protocol version 1; the
a737 4
For protocol version 2 the keytype is
.Dq ssh-dss
or
.Dq ssh-rsa .
a742 2
or the
.Pa id_dsa.pub
a775 3
Note that if you want a 8-bit clean channel,
you must not request a pty or should specify
.Cm no-pty .
a887 2
.It Pa /etc/primes
Contains Diffie-Hellman groups used for the "Diffie-Hellman Group Exchange".
d1042 32
a1073 9
.Sh AUTHORS
OpenSSH is a derivative of the original and free
ssh 1.2.12 release by Tatu Ylonen.
Aaron Campbell, Bob Beck, Markus Friedl, Niels Provos,
Theo de Raadt and Dug Song
removed many bugs, re-added newer features and
created OpenSSH.
Markus Friedl contributed the support for SSH
protocol versions 1.5 and 2.0.
a1075 1
.Xr sftp 1 ,
d1081 1
@


1.51.2.5
log
@Pull in OpenSSH-2.5.2 for 2.7 branch.
@
text
@d13 3
a15 3
.\" Copyright (c) 1999,2000 Markus Friedl.  All rights reserved.
.\" Copyright (c) 1999 Aaron Campbell.  All rights reserved.
.\" Copyright (c) 1999 Theo de Raadt.  All rights reserved.
d37 1
a37 1
.\" $OpenBSD: sshd.8,v 1.107 2001/03/19 12:10:17 djm Exp $
d43 1
a43 1
.Nd OpenSSH ssh daemon
d57 1
a57 1
(SSH Daemon) is the daemon program for
d137 3
a139 2
The rest of the session is encrypted using a symmetric cipher, currently
Blowfish, 3DES, CAST128, Arcfour, 128 bit AES, or 256 bit AES.
d177 1
a177 3
.Dv SIGHUP ,
by executing itself with the name it was started as, ie.
.Pa /usr/sbin/sshd .
a340 9
.It Cm ChallengeResponseAuthentication
Specifies whether
challenge response
authentication is allowed.
Currently there is only support for
.Xr skey 1
authentication.
The default is
.Dq yes .
d345 1
a345 1
.Dq aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour.
d375 5
d512 1
a512 1
  ``hmac-md5,hmac-sha1,hmac-ripemd160,hmac-ripemd160@@openssh.com,
d551 1
a551 1
Specifies whether root can login using
a574 4
.Pp
If this option is set to
.Dq no
root is not allowed to login.
d609 3
a611 5
.It Cm PubkeyAuthentication
Specifies whether public key authentication is allowed.
The default is
.Dq yes .
Note that this option applies to protocol version 2 only.
d643 9
a852 9
.It Cm permitopen="host:port"
Limit local 
.Li ``ssh -L''
port-forwading such that it may only connect to the specified host and
port. Multiple 
.Cm permitopen
options may be applied seperated by commas. No pattern matching is 
performed on the specified hostnames, they must be literal domains or 
addresses.
a859 2
.Pp
permitopen="10.2.1.55:80",permitopen="10.2.1.56:25" 1024 33 23.\|.\|.\|2323
d922 3
a924 4
.It Pa /etc/ssh_host_key, /etc/ssh_host_dsa_key, /etc/ssh_host_rsa_key
These three files contain the private parts of the
(SSH1, SSH2 DSA, and SSH2 RSA) host keys.
These files should only be owned by root, readable only by root, and not
d929 3
a931 4
.It Pa /etc/ssh_host_key.pub, /etc/ssh_host_dsa_key.pub, /etc/ssh_host_rsa_key.pub
There three files contain the public parts of the
(SSH1, SSH2 DSA, and SSH2 RSA) host keys.
These files should be world-readable but writable only by
d933 5
a937 5
Their contents should match the respective private parts.
These files are not
really used for anything; they are provided for the convenience of
the user so their contents can be copied to known hosts files.
These files are created using
d975 1
a975 1
to verify that it is connecting to the correct remote host.
@


1.50
log
@complain about invalid ciphers in SSH1 (e.g. arcfour is SSH2 only)
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.49 2000/05/06 17:45:37 markus Exp $
d118 1
a118 1
through a crytographic message authentication code
d330 1
a330 1
disables protcol 2.0 if this file is group/world-accessible.
d337 1
a337 1
disables protcols 1.3 and 1.5 if this file is group/world-accessible.
d367 1
a367 1
On the other hand, if keepalives are not send,
d623 1
a623 1
Similarily, the
d682 2
a683 2
Notice that the client may specify TCP/IP and/or X11
forwardings unless they are explicitly prohibited.
@


1.49
log
@add DSAAuthetication option to ssh/sshd, document SSH2 in sshd.8
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.48 2000/05/03 22:19:29 markus Exp $
d280 1
a280 1
.Dq blowfish-cbc,3des-cbc,arcfour,cast128-cbc .
@


1.48
log
@sync AUTHOR w/ ssh.1
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.47 2000/05/03 18:03:07 markus Exp $
d49 3
a51 1
.Pp
d54 3
d67 1
a67 1
host key against its own database to verify that it has not changed.
d105 22
d178 1
a178 1
Specifies the file from which the host key is read (default
d310 5
d442 1
d524 1
d738 1
a738 1
Bits, exponent, and modulus are taken directly from the host key; they
@


1.47
log
@GatewayPorts for sshd, ok deraadt@@
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.46 2000/05/03 10:21:49 markus Exp $
d916 1
d926 2
a927 2
has been updated to support ssh protocol 1.5, making it compatible with
all other ssh protocol 1 clients and servers.
d940 5
@


1.46
log
@s/DsaKey/HostDSAKey/, document option
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.45 2000/05/03 07:22:09 markus Exp $
d283 9
@


1.45
log
@there is no rhosts_dsa
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.44 2000/05/02 23:41:31 deraadt Exp $
d283 7
d291 3
a293 2
Specifies the file containing the private host key (default
.Pa /etc/ssh_host_key ) .
d296 1
a296 1
does not start if this file is group/world-accessible.
@


1.44
log
@a start at describing what i understand of the DSA side
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.43 2000/05/01 18:50:59 markus Exp $
d306 1
a306 3
and
.Pa $HOME/.ssh/known_hosts2
files during
a769 11
authentication to check the public key of the host.
The key must be listed in one of these files to be accepted.
The client uses the same files
to verify that the remote host is the one we intended to connect.
These files should be writable only by root/the owner.
.Pa /etc/ssh_known_hosts
should be world-readable, and
.Pa $HOME/.ssh/known_hosts
can but need not be world-readable.
.It Pa "/etc/ssh_known_hosts2" and "$HOME/.ssh/known_hosts2"
These files are consulted when using rhosts with DSA host
@


1.43
log
@PidFile, pr 1210
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.42 2000/05/01 08:19:58 hugh Exp $
d306 3
a308 1
during
d573 5
a577 1
permitted for RSA authentication.
d664 3
a666 1
.Pa /etc/ssh_known_hosts
d668 1
a668 1
.Pa $HOME/.ssh/known_hosts
d755 15
d772 11
@


1.42
log
@Minor tweaks and typo fixes.
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.41 2000/04/12 23:00:28 markus Exp $
d418 6
@


1.41
log
@document Protocol, Ciphers
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.40 2000/04/12 21:47:51 aaron Exp $
d34 1
a34 1
Together these programs replace rlogin and rsh programs, and
d59 2
a60 2
Whenever a client connects the daemon, the daemon sends its host
and server public keys to the client.
d67 1
a67 1
Both sides then start to use this
d71 1
a71 1
using a conventional cipher, currently Blowfish and 3DES, with 3DES
d98 1
a98 1
into that machine).
d191 1
a191 1
When this options is specified
d193 1
a193 1
assumes the client has sent the given version string
@


1.40
log
@Trailing whitespace begone!
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.39 2000/03/29 20:17:56 deraadt Exp $
d249 5
d435 11
@


1.39
log
@typo
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.38 2000/03/29 07:12:39 deraadt Exp $
d30 1
a30 1
.Sh DESCRIPTION 
d32 1
a32 1
(Secure Shell Daemon) is the daemon program for 
d42 1
a42 1
It is normally started at boot from 
d160 1
a160 1
is being run from inetd. 
d207 1
a207 1
reads configuration data from 
d287 1
a287 1
and 
d292 1
a292 1
.Pa /etc/shosts.equiv 
d294 1
a294 1
The default is 
d345 1
a345 1
Default is 
d422 1
a422 1
should print 
d457 1
a457 1
.Xr skey 1 
d507 1
a507 1
prints last login time and 
d512 1
a512 1
.Sx FILES 
d546 1
a546 1
The 
d635 1
a635 1
The 
d637 1
a637 1
and 
d682 1
a682 1
or by taking 
d737 1
a737 1
If this file exists, 
d868 1
a868 1
contains added support for 
@


1.38
log
@reorder Xr to avoid cutting
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.37 2000/03/24 03:04:46 brad Exp $
d72 1
a72 1
being is used by default.
@


1.37
log
@fix spelling errors, From: FreeBSD
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.36 2000/03/23 21:10:10 aaron Exp $
a879 2
.Xr rlogin 1 ,
.Xr rsh 1 ,
d885 3
a887 1
.Xr ssl 8
@


1.36
log
@Fix some formatting problems I missed before.
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.35 2000/03/14 21:31:41 aaron Exp $
d641 1
a641 1
be prepared by the admistrator (optional), and the per-user file is
@


1.35
log
@Suffix "i.e." and "e.g." with a comma. Just another really picky man page
commit, as we want our documentation to be as consistently formatted as
possible (it's getting there :-)).
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.34 2000/02/24 18:22:16 markus Exp $
d36 2
a37 1
over an insecure network.  The programs are intended to be as easy to
d41 2
a42 2
is the daemon that listens for connections from clients.  It is
normally started at boot from 
d45 2
a46 1
daemon for each incoming connection.  The forked daemons handle
d51 4
a54 2
works as follows.  Each host has a host-specific RSA key
(normally 1024 bits) used to identify the host.  Additionally, when
d60 2
a61 1
and server public keys to the client.  The client compares the
d63 2
a64 1
The client then generates a 256 bit random number.  It encrypts this
d66 2
a67 1
the encrypted number to the server.  Both sides then start to use this
d69 2
a70 1
communications in the session.  The rest of the session is encrypted
d72 2
a73 1
being is used by default.  The client selects the encryption algorithm
d76 2
a77 2
Next, the server and the client enter an authentication dialog.  The
client tries to authenticate itself using
d87 2
a88 1
configuration file if desired.  System security is not improved unless
d101 2
a102 1
preparing the session is entered.  At this time the client may request
d108 2
a109 1
The sides then enter session mode.  In this mode, either side may send
d119 2
a120 1
file.  Command-line options override values specified in the
d133 5
a137 4
Debug mode.  The server sends verbose debug output to the system
log, and does not put itself in the background.  The server also will
not fork and will only process one connection.  This option is only
intended for debugging for the server.
d139 2
a140 1
Specifies the name of the configuration file.  The default is
d146 4
a149 3
300 seconds).  If the client fails to authenticate the user within
this many seconds, the server disconnects and exits.  A value of zero
indicates no limit.
d164 2
a165 2
respond to the client, and this may take tens of seconds.  Clients
would have to wait too long if the key was regenerated every time.
d172 2
a173 1
seconds, or one hour).  The motivation for regenerating the key fairly
d177 2
a178 1
seized.  A value of zero indicates that the key will never be regenerated.
d183 3
a185 1
Quiet mode.  Nothing is sent to the system log.  Normally the beginning,
d211 3
a213 2
on the command line).  The file
contains keyword-value pairs, one per line.  Lines starting with
d220 2
a221 1
Specifies whether an AFS token may be forwarded to the server. Default is
d225 2
a226 1
by spaces.  If specified, login is allowed only for users whose primary
d232 3
a234 3
wildcards in the patterns.  Only group names are valid, a numerical group
id isn't recognized.  By default login is allowed regardless of
the primary group.
d238 2
a239 1
by spaces.  If specified, login is allowed only for users names that
d245 3
a247 3
wildcards in the patterns.  Only user names are valid, a numerical user
id isn't recognized.  By default login is allowed regardless of
the user name.
d257 2
a258 1
by spaces.  Users whose primary group matches one of the patterns
d264 3
a266 3
wildcards in the patterns.  Only group names are valid, a numerical group
id isn't recognized.  By default login is allowed regardless of
the primary group.
d270 2
a271 2
by spaces.  Login is disallowed for user names that match
one of the patterns.
d275 3
a277 4
can be used as
wildcards in the patterns.  Only user names are valid, a numerical user
id isn't recognized.  By default login is allowed regardless of
the user name.
d293 2
a294 1
are still used.  The default is 
d307 4
a310 2
other side.  If they are sent, death of the connection or crash of one
of the machines will be properly noticed.  However, this means that
d312 2
a313 1
find it annoying.  On the other hand, if keepalives are not send,
d321 2
a322 2
if the network goes down or the client host reboots.  This avoids
infinitely hanging sessions.
d328 2
a329 2
Specifies whether Kerberos authentication is allowed. This can
be in the form of a Kerberos ticket, or if
d332 2
a333 1
the Kerberos KDC. Default is
d340 2
a341 1
or SecurID. Default is
d350 2
a351 1
file on logout. Default is
d355 2
a356 1
(if it has been used).  The purpose of regeneration is to prevent
d358 4
a361 3
stealing the keys.  The key is never stored anywhere.  If the value is
0, the key is never regenerated.  The default is 3600
(seconds).
d373 2
a374 1
successfully logged in.  If the value is 0, there is no time limit.
d390 2
a391 2
server allows login to accounts with empty password strings.  The default
is
d416 2
a417 1
listens on.  The default is 22.
d424 2
a425 2
when a user logs in interactively.  (On some systems it is also
printed by the shell,
d427 2
a428 1
or equivalent.)  The default is
d431 2
a432 1
Obsolete.  Random number generation uses other techniques.
d435 2
a436 2
files is sufficient.  Normally, this method should not be permitted
because it is insecure. 
d445 2
a446 1
with successful RSA host authentication is allowed.  The default is
d449 2
a450 1
Specifies whether pure RSA authentication is allowed.  The default is
d453 2
a454 2
Defines the number of bits in the server key.  The minimum value is
512, and the default is 768.
d458 2
a459 1
authentication is allowed.  The default is
d468 4
a471 3
user's files and home directory before accepting login.  This
is normally desirable because novices sometimes accidentally leave their
directory or files world-writable.  The default is
d477 2
a478 1
LOCAL3, LOCAL4, LOCAL5, LOCAL6, LOCAL7.  The default is AUTH.
d482 2
a483 1
is used. The default is
d488 2
a489 1
X11 forwarding.  This prevents
d494 2
a495 1
Specifies whether X11 forwarding is permitted.  The default is
d537 2
a538 1
it; otherwise runs xauth.  The
d549 2
a550 1
permitted for RSA authentication.  Each line of the file contains one
d554 4
a557 2
comments).  Each line consists of the following fields, separated by
spaces: options, bits, exponent, modulus, comment.  The options field
d565 2
a566 2
(because of the size of the RSA key modulus).  You don't want to type
them in; instead, copy the 
d571 2
a572 1
specifications.  No spaces are permitted, except within double quotes.
d578 10
a587 3
patterns ('*' and '?' serve as wildcards).  The list may also contain
patterns negated by prefixing them with '!'; if the canonical host
name matches a negated pattern, the key is not accepted.  The purpose
d591 2
a592 2
permits an intruder to log in from anywhere in the world.  This
additional option makes using a stolen key more difficult (name
d597 2
a598 1
authentication.  The command supplied by the user (if any) is ignored.
d600 6
a605 5
otherwise it is run without a tty.  A quote may be included in the
command by quoting it with a backslash.  This option might be useful
to restrict certain RSA keys to perform just a specific operation.  An
example might be a key that permits remote backups but nothing
else.  Notice that the client may specify TCP/IP and/or X11
d609 4
a612 3
logging in using this key.  Environment variables set this way
override other default environment values.  Multiple options of this
type are permitted.
d615 2
a616 2
Any port forward requests by the client will return an error.  This
might be used, e.g., in connection with the
d639 2
a640 1
files contain host public keys for all known hosts.  The global file should
d643 1
a643 1
its key is added to the per-user file.  
d646 2
a647 1
bits, exponent, modulus, comment.  The fields are separated by spaces.
d652 2
a653 2
name (when authenticating a server).  A pattern may also be preceded
by
d669 2
a670 1
matching line has the proper key.  It is thus permissible (but not
d672 4
a675 2
names.  This will inevitably happen when short forms of host names
from different domains are put in the file.  It is possible
d704 3
a706 1
root.  Its contents should match the private part.  This file is not
d716 2
a717 2
started last).  The contents of this file are not sensitive; it can be
world-readable.
d722 3
a724 2
volume).  It is recommended that it not be accessible by others.  The
format of this file is described above.
d727 2
a728 2
authentication to check the public key of the host.  The key must be
listed in one of these files to be accepted.
d730 2
a731 2
to verify that the remote host is the one we intended to
connect. These files should be writable only by root/the owner.
d739 2
a740 1
refuses to let anyone except root log in.  The contents of the file
d742 2
a743 1
refused.  The file should be world-readable.
d751 4
a754 2
line.  The given user on the corresponding host is permitted to log in
without password.  The same file is used by rlogind and rshd.
d759 2
a760 1
If is also possible to use netgroups in the file.  Either host or user
d772 3
a774 2
authentication.  In the
simplest form, this file contains host names, one per line.  Users on
d776 2
a777 1
have the same user name on both machines.  The host name may also be
d780 2
a781 1
user on this machine (except root).  Additionally, the syntax
d783 2
a784 1
can be used to specify netgroups.  Negated entries start with
d789 3
a791 2
same.  Additionally, successful RSA host authentication is normally
required.  This file must be writable only by root; it is recommended
d799 3
a801 2
binaries and directories.  Using a user name practically grants the
user root access.  The only valid use for user names that I can think
d811 2
a812 2
This file is read into the environment at login (if it exists).  It
can only contain empty lines, comment lines (that start with
d814 2
a815 1
and assignment lines of the form name=value.  The file should be writable
d819 2
a820 2
environment files but before starting the user's shell or command.  If
X11 spoofing is in use, this will receive the "proto cookie" pair in
d823 2
a824 1
in environment).  This must call
d847 2
a848 2
machine-specific login-time initializations globally.  This file
should be writable only by root, and should be world-readable.
d852 2
a853 1
but with bugs removed and newer features re-added.   Rapidly after the
@


1.34
log
@sync with sshd_config
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.33 2000/02/21 14:19:09 deraadt Exp $
d150 1
a150 1
However, with small key sizes (e.g.  512) using
@


1.33
log
@do not link to a commercial page..
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.32 2000/01/22 02:17:50 aaron Exp $
d261 5
a265 2
Specifies that rhosts and shosts files will not be used in
authentication.
d270 1
a270 1
.Dq no .
d358 1
a358 1
.Dq yes .
d409 1
a409 1
.Dq yes .
d448 1
d451 1
a451 1
.Dq yes .
@


1.32
log
@ie. -> i.e.,
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.31 2000/01/15 20:56:39 provos Exp $
a764 7
Tatu Ylonen <ylo@@cs.hut.fi>
.Pp
Information about new releases, mailing lists, and other related
issues can be found from the SSH WWW home page:
.Pp
.Dl http://www.cs.hut.fi/ssh.
.Pp
d766 5
a770 4
is a derivative of the original (free) ssh 1.2.12 release, but with bugs
removed and newer features re-added.   Rapidly after the 1.2.12 release,
newer versions bore successively more restrictive licenses.  This version
of OpenSSH
d779 2
a780 1
has been updated to support ssh protocol 1.5.
@


1.31
log
@typo; sotiris.vassilopoulos@@betatech.gr via adejoode@@zedz.net
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.30 2000/01/14 09:47:26 markus Exp $
d779 1
a779 1
has all components of a restrictive nature (ie. patents, see
@


1.30
log
@sort options, from paskalis@@di.uoa.gr; .Xr gzip 1
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.29 2000/01/04 16:57:16 markus Exp $
d245 1
a245 1
by spaces.  Login is allowed disallowed for user names that match
@


1.29
log
@document -4, -6, and 'ssh -L 2022/::1/22'
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.28 2000/01/04 00:08:00 markus Exp $
a438 5
.It Cm X11Forwarding
Specifies whether X11 forwarding is permitted.  The default is
.Dq yes .
Note that disabling X11 forwarding does not improve security in any
way, as users can always install their own forwarders.
d445 5
@


1.28
log
@ipv6 support: mostly gethostbyname->getaddrinfo/getnameinfo, new features:
sshd allows multiple ListenAddress and Port options.  note that libwrap is
not IPv6-ready. (based on patches from fujiwara@@rcac.tdi.co.jp)
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.27 1999/11/22 21:02:39 markus Exp $
d22 1
a22 1
.Op Fl diqQ
d176 8
@


1.27
log
@syslog changes:
* Unified Logmessage for all auth-types, for success and for failed
* Standard connections get only ONE line in the LOG when level==LOG:
  Auth-attempts are logged only, if authentication is:
        a) successfull or
        b) with passwd or
        c) we had more than AUTH_FAIL_LOG failues
* many log() became verbose()
* old behaviour with level=VERBOSE
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.26 1999/11/22 20:02:45 markus Exp $
d323 4
d372 1
@


1.26
log
@-V, for fallback to openssh in SSH2 compatibility mode
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.25 1999/11/19 09:46:49 markus Exp $
d331 1
a331 1
QUIET, FATAL, ERROR, INFO, CHAT and DEBUG.
@


1.25
log
@document SIGHUP, -Q to synopsis
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.24 1999/11/11 22:58:39 markus Exp $
d29 1
d169 7
@


1.24
log
@IgnoreUserKnownHosts(default=no), used for RhostRSAAuth, ok deraadt,millert
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.23 1999/11/10 23:36:45 markus Exp $
d22 1
a22 1
.Op Fl diq
d108 4
@


1.23
log
@add LogLevel {QUIET, FATAL, ERROR, INFO, CHAT, DEBUG} to ssh/sshd,
obsoletes QuietMode and FascistLogging in sshd.
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.22 1999/11/09 23:09:58 markus Exp $
d247 9
@


1.22
log
@user/958: check ~/.ssh/known_hosts for rhosts-rsa, too, ok niels/millert
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.21 1999/10/25 21:35:25 markus Exp $
a233 9
.Pp
.It Cm FascistLogging
Specifies whether to use verbose logging.  Verbose logging violates
the privacy of users and is not recommended.  The argument must be
.Dq yes
or
.Dq no .
The default is
.Dq no .
d306 8
a356 5
.It Cm QuietMode
Specifies whether the system runs in quiet mode.  In quiet mode,
nothing is logged in the system log, except fatal errors.  The default
is
.Dq no .
@


1.21
log
@server-logs default to AUTH (consistence with sample sshd_config)
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.20 1999/10/17 23:09:16 dugsong Exp $
d625 2
a626 2
.It Pa /etc/ssh_known_hosts
This file is consulted when using rhosts with RSA host
d628 2
a629 5
listed in this file to be accepted.
.It Pa $HOME/.ssh/known_hosts
The client uses this file
and
.Pa /etc/ssh_known_hosts
@


1.20
log
@default KerberosOrLocalPassword to 'yes'
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.19 1999/10/17 20:48:07 dugsong Exp $
d405 1
a405 1
LOCAL3, LOCAL4, LOCAL5, LOCAL6, LOCAL7.  The default is DAEMON.
@


1.19
log
@remove AllowHosts, DenyHosts, SilentDeny server access control cruft - replace with LIBWRAP moved to child. ok markus@@ deraat@@
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.18 1999/10/17 20:35:46 aaron Exp $
d289 1
a289 1
.Dq no .
@


1.18
log
@Remove some redundant .Pp.
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.17 1999/10/17 00:31:06 deraadt Exp $
a192 18
.It Cm AllowHosts
This keyword can be followed by any number of host name patterns,
separated by spaces.  If specified, login is allowed only from hosts
whose name matches one of the patterns.
.Ql \&*
and
.Ql ?
can be used as
wildcards in the patterns.  Normal name servers are used to map the
client's host into a canonical host name.  If the name cannot be
mapped, its IP-address is used as the host name.  By default all hosts
are allowed to connect.
.Pp
Note that
.Nm
can also be configured to use tcp_wrappers using the
.Sy LIBWARP
compile-time option.
a222 4
.It Cm DenyHosts
This keyword can be followed by any number of host name patterns,
separated by spaces.  If specified, login is disallowed from the hosts
whose name matches any of the patterns.
a384 7
.It Cm SilentDeny
Specifies whether
.Nm
should log and complain to denied hosts or close the
connection silently.
The default is
.Dq no .
d645 5
@


1.17
log
@update trailer, and copy to other pages
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.16 1999/10/14 20:17:23 markus Exp $
d108 2
a109 1
.Sh OPTIONS
d162 2
@


1.16
log
@refuse to start if there is no configuration file for sshd. ok: deraadt
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.15 1999/10/14 19:56:02 markus Exp $
d768 24
a791 8
This version of
.Nm
is a derivative of the original 1.2.12 release, but with bugs removed and
newer features re-added.   Rapidly after the 1.2.12 release, newer versions
bore successively more restrictive licenses.  In this version, all components
of a restrictive nature (ie. patents) have been directly removed from the
source code; any licensed or patented components are chosen from external
libraries.  The libraries described in
@


1.15
log
@PermitRootLogin={yes,no,without-password}, default=yes, ok deraadt,niels
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.14 1999/10/12 19:36:40 markus Exp $
d121 2
@


1.14
log
@more: sshd will not start if hostkey readable
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.13 1999/10/12 18:11:54 markus Exp $
d344 5
d351 3
@


1.13
log
@SilentDeny, don't log/answer refused connections, deraadt@@
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.12 1999/10/11 22:24:33 markus Exp $
d265 1
a265 1
does not start if the private host key file is group/world-accessible.
d617 3
@


1.12
log
@document StrictMode
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.11 1999/10/11 21:48:29 markus Exp $
d394 7
@


1.11
log
@Allow/Deny Users/Groups, from zzlevo@@dd.chalmers.se, ok deraadt@@
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.10 1999/10/11 21:07:37 markus Exp $
d403 4
a406 2
Specifies whether SSH should check file modes and ownership of the
user's home directory and rhosts files before accepting login.  This
@


1.10
log
@UseLogin, default=no, from kpa@@gmx.net, ok deraadt@@
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.9 1999/10/11 20:40:08 markus Exp $
d176 11
d206 12
d224 12
d240 12
@


1.9
log
@document reality (no askpass, ignore group-world-accessible private keys)
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.8 1999/10/07 22:46:33 markus Exp $
d366 5
@


1.8
log
@You have Mail. Email fuer Dich. Karsten Patzwaldt <kpa@@gmx.net> default=no
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.7 1999/10/07 21:45:02 markus Exp $
d216 3
@


1.7
log
@add skey to sshd:

1) pass *pw to auth_password() not user_name, do_authentication already
   keeps private copy of struct passwd for current user.
2) limit authentication attemps to 5, otherwise
        ssh -o 'NumberOfPasswordPrompts 100000' host
   lets you enter 100000 passwds
3) make s/key a run-time option in /etc/sshd_config
4) generate fake skeys,
   for s/key for nonexisting users, too
   limit auth-tries for nonexisting users, too.
Note that
% ssh -l nonexisting-user -o 'NumberOfPasswordPrompts 100000' host
has NO limits in ssh-1.2.27
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.6 1999/10/03 18:46:12 aaron Exp $
d195 6
@


1.6
log
@- Fix up SYNOPSIS sections.
- Remove refereces to /etc/environment and /etc/default/login; markus@@
- Document X11DisplayOffset in sshd(8).
- Some other fixes...
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.5 1999/10/02 13:10:26 deraadt Exp $
d129 3
a131 1
This option must be given if sshd is not run as root (as the normal
d134 5
a138 1
Specifies that sshd is being run from inetd.  Sshd is normally not run
d142 3
a144 1
However, with small key sizes (e.g.  512) using sshd from inetd may
d193 1
a193 1
.Fl LIBWARP
d239 2
a240 1
be in the form of a Kerberos ticket, or if PasswordAuthentication
d257 2
a258 2
Specifies whether to automatically destroy the user's
ticket cache file on logout. Default is
d267 5
d321 3
a323 1
because it is insecure.  RhostsRSAAuthentication should be used
d338 8
d350 2
a351 1
directory or files world-writable.  The default is "yes".
d544 1
a544 4
Contains the private part of the host key.  This file is normally
created automatically by "make install", but can also be created
manually using
.Xr ssh-keygen 1 .
d548 2
a549 3
Contains the public part of the host key.  This file is normally
created automatically by "make install", but can also be created
manually.  This file should be world-readable but writable only by
d553 2
@


1.5
log
@detail how we manage to not include RSA, and point people at ssl(8)
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.4 1999/10/01 22:23:48 deraadt Exp $
d185 2
a186 2
.Fl -with-libwrap
compile-time configuration option.
d337 6
a370 4
.Pa /etc/environment
if it exists.
.It
Reads
d471 1
a471 5
its key is added to the per-user file.  The recommended way to create
.Pa /etc/ssh_known_hosts
is to use the
.Xr make-ssh-known-hosts 1
command.
d505 1
a505 2
Rather, generate them by a script (see 
.Xr make-ssh-known-hosts 1 )
d545 2
a546 2
.It Pa "/etc/ssh_known_hosts" and "$HOME/.ssh/known_hosts"
These files are consulted when using rhosts with RSA host
d548 7
a554 3
listed in one of these files to be accepted.  (The client uses the
same files to verify that the remote host is the one we intended to
connect.)  These files should be writable only by root/the owner.
d559 1
a559 1
.Pa /etc/nologin
d565 1
a565 1
.Pa $HOME/.rhosts
d569 1
a569 6
Ssh differs from rlogind
and rshd in that it requires RSA host authentication in addition to
validating the host name retrieved from domain name servers (unless
compiled with the
.Fl -with-rhosts
configuration option).  The file must
d602 1
a602 1
.Sy Warning: It is almost never a good idea to use user names in 
d617 1
a617 1
.It Pa /etc/environment
d621 2
a622 8
and assignment lines of the form name=value.  This file is processed in
all environments (normal rsh/rlogin only process it on AIX and
potentially some other systems).  The file should be writable only by
root, and should be world-readable.
.It Pa $HOME/.ssh/environment
This file is read into the environment after /etc/environment.  It has
the same format.  The file should be writable only by the user; it
need not be readable by anyone else.
@


1.4
log
@randomseed is really gone now
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.3 1999/09/29 18:16:21 dugsong Exp $
d62 3
a64 5
using a conventional cipher.  Currently, 
Blowfish, IDEA, DES, and 3DES.
3DES
is used by default.  The client selects the encryption algorithm to use
from those offered by the server.
a663 16
.Sh INSTALLATION
.Nm 
is normally run as root.  If it is not run as root, it can
only log in as the user it is running as, and password authentication
may not work if the system uses shadow passwords.  An alternative
host key file must also be used.
.Pp
.Nm 
is normally started from 
.Pa /etc/rc
or equivalent at system boot.
.Pp
Considerable work has been put to making
.Nm
secure.  However, if you find a security problem, please report it
immediately to <ssh-bugs@@cs.hut.fi>.
d671 11
a682 1
.Xr make-ssh-known-hosts 1 ,
d687 1
a687 1
.Xr ssh-add x 1 ,
d689 2
a690 1
.Xr ssh-keygen 1
@


1.3
log
@update krb4/AFS support to ssh-1.2.27-afs-kerberos-pl1 level, clean up unused variables, update manpages
@
text
@d12 1
a12 1
.\" $Id: sshd.8,v 1.2 1999/09/26 22:30:06 deraadt Exp $
d305 1
a305 3
Specifies the file containing the random seed for the server; this
file is created automatically and updated regularly.  The default is
.Pa /etc/ssh_random_seed .
a536 3
.It Pa /etc/ssh_random_seed
This file contains a seed for the random number generator.  This file
should only be accessible by root.
@


1.2
log
@first cut of mandoc man pages from aaron
@
text
@d12 1
a12 1
.\" $Id: sshd.8.in,v 1.7 1999/06/06 08:38:58 bg Exp $
d168 1
a168 2
Specifies whether to accept AFS tokens passed from the client. Default
is
d170 1
d235 2
a236 1
the Kerberos KDC / AFS kaserver / DCE Security Server. Default is yes.
d246 3
a248 1
Default is no, TGT forwarding does only work with the AFS kaserver.
d251 2
a252 1
ticket cache file on logout. Default is yes.
@


1.1
log
@i bet a lot of people didn't know what ssh 1.2.16 had a nice license.
well, except for the patent issues.  someone in sweden (forget their
name at the moment) cleaned out most of the patented code, and now
this code removes rsa code.  when this is done, it will link against
libssl, but the work isn't completely done yet.  then we need to bring
this up to modern days, featurewise.
@
text
@d14 17
a30 41
.TH SSHD 8 "November 8, 1995" "SSH" "SSH"

.SH NAME
sshd \- secure shell daemon

.SH SYNOPSIS
.na
.B sshd
[\c
.BI \-b \ bits\fR\c
]
[\c
.B \-d \c
]
[\c
.BI \-f \ config_file\fR\c
]
[\c
.BI \-g \ login_grace_time\fR\c
]
[\c
.BI \-h \ host_key_file\fR\c
]
[\c
.B \-i \c
]
[\c
.BI \-k \ key_gen_time\fR\c
]
[\c
.BI \-p \ port\fR\c
]
[\c
.B \-q \c
]
.ad


.SH DESCRIPTION 
.LP
.B Sshd 
d32 1
a32 1
.BR ssh ".
d37 2
a38 2
.LP
.B Sshd
d41 2
a42 2
.I /etc/rc.local
or equivalent.  It forks a new
d46 3
a48 2
.LP
Sshd works as follows.  Each host has a host-specific RSA key
d53 1
a53 1
.LP
d63 2
a64 5
.BR \s-1Blowfish\s0 ",
.BR \s-1IDEA\s0 ",
.BR \s-1DES\s0 ",
.BR \s-1\&3DES\s0 ",
.B \s-13DES\s0
d67 1
a67 1
.LP
d69 5
a73 2
client tries to authenticate itself using \|\s+2.\s0rhosts
authentication, \|\s+2.\s0rhosts authentication combined with RSA host
d76 1
a76 1
.LP
d80 5
a84 4
.BR rshd "(8),
.BR rlogind "(8),
.BR rexecd "(8), and
.B rexd "(8)
d86 1
a86 1
.BR rlogin (1)
d88 1
a88 1
.BR rsh (1)
d90 1
a90 1
.LP
d96 1
a96 1
.LP
d101 1
a101 1
.LP
d105 2
a106 2
.LP
.B Sshd 
d110 3
a112 5


.SH OPTIONS
.TP
.BI \-b \ bits
d114 2
a115 2
.TP
.B \-d
d120 1
a120 2
.TP
.BI \-f \ configuration_file
d122 2
a123 3
.IR /etc/sshd_config ".
.TP
.BI \-g \ login_grace_time
d128 1
a128 2
.TP
.BI \-h \ host_key_file
d130 1
a130 1
.IR /etc/ssh_host_key).  
d133 1
a133 2
.TP
.B \-i
d140 1
a140 2
.TP
.BI \-k \ key_gen_time
d147 1
a147 2
.TP
.BI \-p \ port
d150 1
a150 2
.TP
.B \-q
d153 3
a155 4

.SH CONFIGURATION FILE

.B Sshd
d157 6
a162 3
.I /etc/sshd_config
(or the file specified with -f on the command line).  The file
contains keyword-value pairs, one per line.  Lines starting with '#'
d164 1
a164 1

d166 2
a167 2
.TP
.B AFSTokenPassing
d169 3
a171 3
is "yes".
.TP
.B AllowHosts
d174 5
a178 1
whose name matches one of the patterns.  '*' and '?' can be used as
d183 1
a183 1

d185 3
a187 2
.B sshd
can also be configured to use tcp_wrappers using the --with-libwrap
d189 1
a189 2
.TP
.B DenyHosts
d193 1
a193 2
.TP
.B FascistLogging
d196 6
a201 3
"yes" or "no" (without the quotes).  The default is "no".
.TP
.B HostKey
d203 2
a204 3
.IR /etc/ssh_host_key ").
.TP
.B IgnoreRhosts
d207 1
a207 1
.I /etc/hosts.equiv
d209 4
a212 4
.I /etc/shosts.equiv 
are still used.  The default is "no".
.TP
.B KeepAlive
d218 7
a224 4
sessions may hang indefinitely on the server, leaving "ghost" users
and consuming server resources.

The default is "yes" (to send keepalives), and the server will notice
d227 5
a231 5

To disable keepalives, the value should be set to "no" in both the
server and the client configuration files.
.TP
.B KerberosAuthentication
d236 1
a236 2
.TP
.B KerberosOrLocalPasswd
d239 5
a243 3
such as /etc/passwd or SecurID. Default is no.
.TP
.B KerberosTgtPassing
d246 1
a246 2
.TP
.B KerberosTicketCleanup
d249 1
a249 2
.TP
.B KeyRegenerationInterval
d256 1
a256 2
.TP
.B LoginGraceTime
d260 1
a260 2
.TP
.B PasswordAuthentication
d262 3
a264 3
The default is "yes".
.TP
.B PermitEmptyPasswords
d267 3
a269 3
is "yes".
.TP
.B PermitRootLogin
d271 7
a277 4
.BR ssh .
The default is "yes".

Root login with RSA authentication when the "command" option has been
d281 1
a281 2
.TP
.B Port
d283 1
a283 1
.B sshd
d285 1
a285 2
.TP
.B PrintMotd
d287 1
a287 1
.B sshd
d289 1
a289 1
.I /etc/motd
d291 5
a295 4
printed by the shell, /etc/profile, or equivalent.)  The default is
"yes".
.TP
.B QuietMode
d298 3
a300 3
is "no".
.TP
.B RandomSeed
d303 2
a304 3
.IR /etc/ssh_random_seed ".
.TP
.B RhostsAuthentication
d310 3
a312 3
The default is "no".
.TP
.B RhostsRSAAuthentication
d314 6
a319 6
with successful RSA host authentication is allowed.  The default is "yes".
.TP
.B RSAAuthentication
Specifies whether pure RSA authentication is allowed.  The default is "yes".
.TP
.B ServerKeyBits
d322 2
a323 3
.TP
.B StrictModes
Specifies whether ssh should check file modes and ownership of the
d327 1
a327 2
.TP
.B SyslogFacility
d329 1
a329 1
.B sshd.
d332 3
a334 3
.TP
.B X11Forwarding
Specifies whether X11 forwarding is permitted.  The default is "yes".
d337 2
a338 3

.SH LOGIN PROCESS

d340 1
a340 1
.B sshd
d342 2
a343 1
.IP 1.
d346 1
a346 1
.B /etc/motd
d348 5
a352 3
.IR $HOME/\s+2.\s0hushlogin ;
see the FILES section).
.IP 2.
d354 4
a357 2
.IP 3.
Checks /etc/nologin; if it exists, prints contents and quits
d359 1
a359 1
.IP 4.
d361 1
a361 1
.IP 5.
d363 9
a371 5
.IP 6.
Reads /etc/environment if it exists.
.IP 7.
Reads $HOME/.ssh/environment if it exists.
.IP 8.
d373 9
a381 3
.IP 9.
If $HOME/.ssh/rc exists, runs it; else if /etc/sshrc exists, runs
it; otherwise runs xauth.  The "rc" files are given the X11
d383 1
a383 1
.IP 10.
d385 2
a386 5
.RT


.SH AUTHORIZED_KEYS FILE FORMAT
.LP
d388 1
a388 1
.I \&$HOME/\s+2.\s0ssh/authorized_keys
d391 3
a393 1
key (empty lines and lines starting with a '#' are ignored as
d401 1
a401 1
.LP
d405 1
a405 1
.I identity.pub
d407 1
a407 1
.LP
d411 2
a412 4
.IP
.ti -.5i
\fBfrom="pattern-list" \fR
.br
d425 1
a425 4
.IP
.ti -.5i
\fBcommand="command"\fR
.br
d435 1
a435 4
.IP
.ti -.5i
\fBenvironment="NAME=value"\fR
.br
d440 1
a440 2
.TP
.B no-port-forwarding
d443 2
a444 2
might be used e.g.  in connection with the
.B command
d446 1
a446 2
.TP
.B no-X11-forwarding
d449 1
a449 2
.TP
.B no-agent-forwarding
d452 1
a452 2
.TP
.B no-pty
d454 2
a455 3

.SS Examples
.LP
d457 1
a457 1
.LP
d459 1
a459 1
.LP
d461 1
a461 5



.SH SSH_KNOWN_HOSTS FILE FORMAT
.LP
d463 1
a463 1
.I /etc/ssh_known_hosts
d465 1
a465 1
.I \&$HOME/\s+2.\s0ssh/known_hosts
d470 1
a470 1
.I /etc/ssh_known_hosts
d472 1
a472 1
.B make-ssh-known-hosts
d474 1
a474 1
.LP
d477 1
a477 1
.LP
d482 3
a484 1
by '!' to indicate negation: if the host name matches a negated
d487 1
a487 1
.LP
d489 2
a490 2
can be obtained e.g.  from
.IR /etc/ssh_host_key.pub ".
d492 5
a496 3
.LP
Lines starting with '#' and empty lines are ignored as comments.
.LP
d504 1
a504 1
.LP
d508 1
a508 1
.BR make-ssh-known-hosts (1))
d510 1
a510 1
.I /etc/ssh_host_key.pub
d512 1
a512 3

.SS Examples

d514 3
a516 4

.SH FILES
.TP
.I /etc/sshd_config
d518 1
a518 1
.BR sshd .  
d521 1
a521 2
.TP
.I /etc/ssh_host_key
d525 1
a525 1
.BR ssh-keygen (1).
d528 1
a528 2
.TP
.I /etc/ssh_host_key.pub
d535 1
a535 2
.TP
.I /etc/ssh_random_seed
d538 3
a540 4
.TP
.I /var/run/sshd.pid
Contains the process id of the
.B sshd
d545 1
a545 2
.TP
.I \&$HOME/\s+2.\s0ssh/authorized_keys
d551 1
a551 2
.TP
.I "/etc/ssh_known_hosts\fR and \fI$HOME/\s+2.\s0ssh/known_hosts\fR
d557 5
a561 5
.I /etc/ssh_known_hosts
should be world-readable, and \fI$HOME/\s+2.\s0ssh/known_hosts\fR can
but need not be world-readable.
.TP
.I /etc/nologin
d563 1
a563 1
.B sshd
d567 1
a567 2
.TP
.I \&$HOME/\s+2.\s0rhosts
d571 1
a571 2
.B Ssh 
differs from rlogind
d574 3
a576 1
compiled with the \-\-with\-rhosts configuration option).  The file must
d579 1
a579 1

d583 10
a592 11
.TP
.I \&$HOME/\s+2.\s0shosts
For
.B ssh,
this file is exactly the same as for \s+2.\s0rhosts.  However, this file is
not used by rlogin and rshd, so using this permits access using
.B ssh
only.
.TP
.I /etc/hosts.equiv
This file is used during \s+2.\s0rhosts authentication.  In the
d597 6
a602 4
.B any
user on this machine (except root).  Additionally, the syntax +@@group
can be used to specify netgroups.  Negated entries start with '-'.

d608 3
a610 3

\fBWarning: It is almost never a good idea to use user names in 
hosts.equiv.\fR
d612 1
a612 1
\fBanybody\fR,
d617 3
a619 3
\fBNote that this warning also applies to rsh/rlogin.\fR
.TP
.I /etc/shosts.equiv
d621 1
a621 1
.I /etc/hosts.equiv.
d623 2
a624 4
rsh/rlogin and
.B ssh.
.TP
.I /etc/environment
d626 3
a628 2
can only contain empty lines, comment lines (that start with '#'), and
assignment lines of the form name=value.  This file is processed in
d632 1
a632 2
.TP
.I \&$HOME/\s+2.\s0ssh/environment
d636 1
a636 2
.TP
.I \&$HOME/\s+2.\s0ssh/rc
d640 6
a645 3
standard input (and DISPLAY in environment).  This must call xauth in
that case. 

d649 1
a649 1

d653 4
a656 2

If this file does not exist, /etc/sshrc is run, and if that
d658 1
a658 1

d661 4
a664 3
.TP
.I /etc/sshrc
Like $HOME/\s+2.\s0ssh/rc.  This can be used to specify
d667 2
a668 5


.SH INSTALLATION
.LP
.B Sshd 
d673 2
a674 2
.LP
.B Sshd 
d676 1
a676 1
.I /etc/rc.local
d678 1
a678 1
.LP
d680 1
a680 1
.B sshd
d683 1
a683 3

.SH AUTHOR
.LP
d685 1
a685 1
.LP
d687 12
a698 13
issues can be found from the ssh WWW home page at
http://www.cs.hut.fi/ssh.

.SH SEE ALSO
.LP
.BR ssh (1),
.BR make-ssh-known-hosts (1),
.BR ssh-keygen (1),
.BR ssh-agent (1),
.BR ssh-add (1),
.BR scp (1),
.BR rlogin (1),
.BR rsh (1)
@

