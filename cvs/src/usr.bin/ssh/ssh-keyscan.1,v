head	1.38;
access;
symbols
	OPENBSD_6_1:1.38.0.8
	OPENBSD_6_1_BASE:1.38
	OPENBSD_6_0:1.38.0.6
	OPENBSD_6_0_BASE:1.38
	OPENBSD_5_9:1.38.0.2
	OPENBSD_5_9_BASE:1.38
	OPENBSD_5_8:1.36.0.4
	OPENBSD_5_8_BASE:1.36
	OPENBSD_5_7:1.36.0.2
	OPENBSD_5_7_BASE:1.36
	OPENBSD_5_6:1.35.0.4
	OPENBSD_5_6_BASE:1.35
	OPENBSD_5_5:1.34.0.4
	OPENBSD_5_5_BASE:1.34
	OPENBSD_5_4:1.31.0.2
	OPENBSD_5_4_BASE:1.31
	OPENBSD_5_3:1.30.0.4
	OPENBSD_5_3_BASE:1.30
	OPENBSD_5_2:1.30.0.2
	OPENBSD_5_2_BASE:1.30
	OPENBSD_5_1_BASE:1.29
	OPENBSD_5_1:1.29.0.6
	OPENBSD_5_0:1.29.0.4
	OPENBSD_5_0_BASE:1.29
	OPENBSD_4_9:1.29.0.2
	OPENBSD_4_9_BASE:1.29
	OPENBSD_4_8:1.28.0.4
	OPENBSD_4_8_BASE:1.28
	OPENBSD_4_7:1.28.0.2
	OPENBSD_4_7_BASE:1.28
	OPENBSD_4_6:1.26.0.6
	OPENBSD_4_6_BASE:1.26
	OPENBSD_4_5:1.26.0.2
	OPENBSD_4_5_BASE:1.26
	OPENBSD_4_4:1.24.0.2
	OPENBSD_4_4_BASE:1.24
	OPENBSD_4_3:1.23.0.4
	OPENBSD_4_3_BASE:1.23
	OPENBSD_4_2:1.23.0.2
	OPENBSD_4_2_BASE:1.23
	OPENBSD_4_1:1.22.0.2
	OPENBSD_4_1_BASE:1.22
	OPENBSD_4_0:1.21.0.6
	OPENBSD_4_0_BASE:1.21
	OPENBSD_3_9:1.21.0.2
	OPENBSD_3_9_BASE:1.21
	OPENBSD_3_8:1.20.0.4
	OPENBSD_3_8_BASE:1.20
	OPENBSD_3_7:1.20.0.2
	OPENBSD_3_7_BASE:1.20
	OPENBSD_3_6:1.18.0.2
	OPENBSD_3_6_BASE:1.18
	OPENBSD_3_5:1.17.0.4
	OPENBSD_3_5_BASE:1.17
	OPENBSD_3_4:1.17.0.2
	OPENBSD_3_4_BASE:1.17
	OPENBSD_3_3:1.14.0.6
	OPENBSD_3_3_BASE:1.14
	OPENBSD_3_2:1.14.0.4
	OPENBSD_3_2_BASE:1.14
	OPENBSD_3_1:1.14.0.2
	OPENBSD_3_1_BASE:1.14
	OPENBSD_3_0:1.12.0.2
	OPENBSD_3_0_BASE:1.12
	OPENBSD_2_9_BASE:1.5
	OPENBSD_2_9:1.5.0.2
	OPENBSD_2_7:1.4.0.2
	OPENBSD_2_8:1.3.0.2;
locks; strict;
comment	@.\" @;


1.38
date	2015.11.08.23.24.03;	author jmc;	state Exp;
branches;
next	1.37;
commitid	USAq811G9ASwrPLr;

1.37
date	2015.11.08.22.30.20;	author djm;	state Exp;
branches;
next	1.36;
commitid	Q1s5wBkdLHqnbGco;

1.36
date	2014.08.30.15.33.50;	author sobrado;	state Exp;
branches;
next	1.35;
commitid	qDOCDATnMVba0efh;

1.35
date	2014.03.12.13.06.59;	author naddy;	state Exp;
branches;
next	1.34;

1.34
date	2014.01.28.14.13.39;	author jmc;	state Exp;
branches;
next	1.33;

1.33
date	2013.12.07.11.58.46;	author naddy;	state Exp;
branches;
next	1.32;

1.32
date	2013.12.06.13.39.49;	author markus;	state Exp;
branches;
next	1.31;

1.31
date	2013.07.16.00.07.52;	author schwarze;	state Exp;
branches;
next	1.30;

1.30
date	2012.04.11.13.34.17;	author djm;	state Exp;
branches;
next	1.29;

1.29
date	2010.08.31.11.54.45;	author djm;	state Exp;
branches;
next	1.28;

1.28
date	2010.01.09.23.04.13;	author dtucker;	state Exp;
branches;
next	1.27;

1.27
date	2009.10.28.16.38.18;	author reyk;	state Exp;
branches;
next	1.26;

1.26
date	2008.12.29.01.12.36;	author stevesk;	state Exp;
branches;
next	1.25;

1.25
date	2008.11.01.11.14.36;	author sobrado;	state Exp;
branches;
next	1.24;

1.24
date	2008.04.30.10.14.03;	author djm;	state Exp;
branches;
next	1.23;

1.23
date	2007.05.31.19.20.16;	author jmc;	state Exp;
branches;
next	1.22;

1.22
date	2006.09.25.04.55.38;	author ray;	state Exp;
branches;
next	1.21;

1.21
date	2005.09.30.20.34.26;	author jaredy;	state Exp;
branches
	1.21.2.1
	1.21.6.1;
next	1.20;

1.20
date	2005.03.01.15.47.14;	author jmc;	state Exp;
branches
	1.20.2.1
	1.20.4.1;
next	1.19;

1.19
date	2005.03.01.10.41.28;	author djm;	state Exp;
branches;
next	1.18;

1.18
date	2004.07.12.23.34.25;	author brad;	state Exp;
branches
	1.18.2.1;
next	1.17;

1.17
date	2003.06.10.09.12.11;	author jmc;	state Exp;
branches
	1.17.2.1
	1.17.4.1;
next	1.16;

1.16
date	2003.05.12.18.35.18;	author markus;	state Exp;
branches;
next	1.15;

1.15
date	2003.03.28.10.11.43;	author jmc;	state Exp;
branches;
next	1.14;

1.14
date	2002.02.13.08.33.47;	author mpech;	state Exp;
branches
	1.14.2.1
	1.14.4.1
	1.14.6.1;
next	1.13;

1.13
date	2002.02.09.17.37.34;	author deraadt;	state Exp;
branches;
next	1.12;

1.12
date	2001.09.05.06.23.07;	author deraadt;	state Exp;
branches
	1.12.2.1;
next	1.11;

1.11
date	2001.08.23.18.08.59;	author stevesk;	state Exp;
branches;
next	1.10;

1.10
date	2001.08.05.23.18.20;	author markus;	state Exp;
branches;
next	1.9;

1.9
date	2001.08.02.18.37.35;	author mpech;	state Exp;
branches;
next	1.8;

1.8
date	2001.06.23.17.48.18;	author itojun;	state Exp;
branches;
next	1.7;

1.7
date	2001.06.22.10.17.51;	author mpech;	state Exp;
branches;
next	1.6;

1.6
date	2001.06.05.05.05.39;	author pvalchev;	state Exp;
branches;
next	1.5;

1.5
date	2001.04.18.16.21.05;	author ian;	state Exp;
branches
	1.5.2.1;
next	1.4;

1.4
date	2001.03.01.03.38.33;	author deraadt;	state Exp;
branches
	1.4.2.1;
next	1.3;

1.3
date	2001.01.29.01.58.18;	author niklas;	state Exp;
branches
	1.3.2.1;
next	1.2;

1.2
date	2001.01.05.08.23.29;	author itojun;	state Exp;
branches;
next	1.1;

1.1
date	2000.12.04.19.24.02;	author markus;	state Exp;
branches;
next	;

1.3.2.1
date	2001.02.16.20.13.19;	author jason;	state Exp;
branches;
next	1.3.2.2;

1.3.2.2
date	2001.02.19.17.19.30;	author jason;	state Exp;
branches;
next	1.3.2.3;

1.3.2.3
date	2001.03.21.19.46.30;	author jason;	state Exp;
branches;
next	1.3.2.4;

1.3.2.4
date	2001.05.07.21.09.36;	author jason;	state Exp;
branches;
next	1.3.2.5;

1.3.2.5
date	2001.09.27.00.15.42;	author miod;	state Exp;
branches;
next	1.3.2.6;

1.3.2.6
date	2002.03.08.17.04.43;	author brad;	state Exp;
branches;
next	;

1.4.2.1
date	2001.03.12.15.44.16;	author jason;	state Exp;
branches;
next	1.4.2.2;

1.4.2.2
date	2001.03.21.18.53.10;	author jason;	state Exp;
branches;
next	;

1.5.2.1
date	2001.09.27.19.03.55;	author jason;	state Exp;
branches;
next	1.5.2.2;

1.5.2.2
date	2002.03.09.00.20.45;	author miod;	state Exp;
branches;
next	;

1.12.2.1
date	2002.03.07.17.37.47;	author jason;	state Exp;
branches;
next	1.12.2.2;

1.12.2.2
date	2002.03.08.15.17.18;	author brad;	state Exp;
branches;
next	;

1.14.2.1
date	2003.04.03.22.35.18;	author miod;	state Exp;
branches;
next	;

1.14.4.1
date	2003.04.03.23.27.13;	author margarida;	state Exp;
branches;
next	1.14.4.2;

1.14.4.2
date	2003.09.16.21.20.28;	author brad;	state Exp;
branches;
next	;

1.14.6.1
date	2003.05.11.12.01.52;	author margarida;	state Exp;
branches;
next	1.14.6.2;

1.14.6.2
date	2003.09.16.20.50.44;	author brad;	state Exp;
branches;
next	1.14.6.3;

1.14.6.3
date	2004.03.04.18.18.16;	author brad;	state Exp;
branches;
next	;

1.17.2.1
date	2004.08.19.22.37.32;	author brad;	state Exp;
branches;
next	;

1.17.4.1
date	2004.08.19.04.13.27;	author brad;	state Exp;
branches;
next	1.17.4.2;

1.17.4.2
date	2005.03.10.17.15.05;	author brad;	state Exp;
branches;
next	;

1.18.2.1
date	2005.03.10.16.28.28;	author brad;	state Exp;
branches;
next	;

1.20.2.1
date	2006.02.03.02.53.45;	author brad;	state Exp;
branches;
next	;

1.20.4.1
date	2006.02.03.03.01.57;	author brad;	state Exp;
branches;
next	1.20.4.2;

1.20.4.2
date	2006.10.06.03.19.33;	author brad;	state Exp;
branches;
next	1.20.4.3;

1.20.4.3
date	2006.11.08.00.44.05;	author brad;	state Exp;
branches;
next	;

1.21.2.1
date	2006.11.08.00.17.14;	author brad;	state Exp;
branches;
next	;

1.21.6.1
date	2006.11.08.00.42.11;	author brad;	state Exp;
branches;
next	;


desc
@@


1.38
log
@-c before -H, in SYNOPSIS and usage();
@
text
@.\"	$OpenBSD: ssh-keyscan.1,v 1.37 2015/11/08 22:30:20 djm Exp $
.\"
.\" Copyright 1995, 1996 by David Mazieres <dm@@lcs.mit.edu>.
.\"
.\" Modification and redistribution in source and binary forms is
.\" permitted provided that due credit is given to the author and the
.\" OpenBSD project by leaving this copyright notice intact.
.\"
.Dd $Mdocdate: November 8 2015 $
.Dt SSH-KEYSCAN 1
.Os
.Sh NAME
.Nm ssh-keyscan
.Nd gather ssh public keys
.Sh SYNOPSIS
.Nm ssh-keyscan
.Bk -words
.Op Fl 46cHv
.Op Fl f Ar file
.Op Fl p Ar port
.Op Fl T Ar timeout
.Op Fl t Ar type
.Op Ar host | addrlist namelist
.Ar ...
.Ek
.Sh DESCRIPTION
.Nm
is a utility for gathering the public ssh host keys of a number of
hosts.
It was designed to aid in building and verifying
.Pa ssh_known_hosts
files.
.Nm
provides a minimal interface suitable for use by shell and perl
scripts.
.Pp
.Nm
uses non-blocking socket I/O to contact as many hosts as possible in
parallel, so it is very efficient.
The keys from a domain of 1,000
hosts can be collected in tens of seconds, even when some of those
hosts are down or do not run ssh.
For scanning, one does not need
login access to the machines that are being scanned, nor does the
scanning process involve any encryption.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl 4
Forces
.Nm
to use IPv4 addresses only.
.It Fl 6
Forces
.Nm
to use IPv6 addresses only.
.It Fl c
Request certificates from target hosts instead of plain keys.
.It Fl f Ar file
Read hosts or
.Dq addrlist namelist
pairs from
.Ar file ,
one per line.
If
.Pa -
is supplied instead of a filename,
.Nm
will read hosts or
.Dq addrlist namelist
pairs from the standard input.
.It Fl H
Hash all hostnames and addresses in the output.
Hashed names may be used normally by
.Nm ssh
and
.Nm sshd ,
but they do not reveal identifying information should the file's contents
be disclosed.
.It Fl p Ar port
Port to connect to on the remote host.
.It Fl T Ar timeout
Set the timeout for connection attempts.
If
.Ar timeout
seconds have elapsed since a connection was initiated to a host or since the
last time anything was read from that host, then the connection is
closed and the host in question considered unavailable.
Default is 5 seconds.
.It Fl t Ar type
Specifies the type of the key to fetch from the scanned hosts.
The possible values are
.Dq rsa1
for protocol version 1 and
.Dq dsa ,
.Dq ecdsa ,
.Dq ed25519 ,
or
.Dq rsa
for protocol version 2.
Multiple values may be specified by separating them with commas.
The default is to fetch
.Dq rsa ,
.Dq ecdsa ,
and
.Dq ed25519
keys.
.It Fl v
Verbose mode.
Causes
.Nm
to print debugging messages about its progress.
.El
.Sh SECURITY
If an ssh_known_hosts file is constructed using
.Nm
without verifying the keys, users will be vulnerable to
.Em man in the middle
attacks.
On the other hand, if the security model allows such a risk,
.Nm
can help in the detection of tampered keyfiles or man in the middle
attacks which have begun after the ssh_known_hosts file was created.
.Sh FILES
Input format:
.Bd -literal
1.2.3.4,1.2.4.4 name.my.domain,name,n.my.domain,n,1.2.3.4,1.2.4.4
.Ed
.Pp
Output format for RSA1 keys:
.Bd -literal
host-or-namelist bits exponent modulus
.Ed
.Pp
Output format for RSA, DSA, ECDSA, and Ed25519 keys:
.Bd -literal
host-or-namelist keytype base64-encoded-key
.Ed
.Pp
Where
.Ar keytype
is either
.Dq ecdsa-sha2-nistp256 ,
.Dq ecdsa-sha2-nistp384 ,
.Dq ecdsa-sha2-nistp521 ,
.Dq ssh-ed25519 ,
.Dq ssh-dss
or
.Dq ssh-rsa .
.Pp
.Pa /etc/ssh/ssh_known_hosts
.Sh EXAMPLES
Print the rsa host key for machine
.Ar hostname :
.Bd -literal
$ ssh-keyscan hostname
.Ed
.Pp
Find all hosts from the file
.Pa ssh_hosts
which have new or different keys from those in the sorted file
.Pa ssh_known_hosts :
.Bd -literal
$ ssh-keyscan -t rsa,dsa,ecdsa,ed25519 -f ssh_hosts | \e
	sort -u - ssh_known_hosts | diff ssh_known_hosts -
.Ed
.Sh SEE ALSO
.Xr ssh 1 ,
.Xr sshd 8
.Sh AUTHORS
.An -nosplit
.An David Mazieres Aq Mt dm@@lcs.mit.edu
wrote the initial version, and
.An Wayne Davison Aq Mt wayned@@users.sourceforge.net
added support for protocol version 2.
.Sh BUGS
It generates "Connection closed by remote host" messages on the consoles
of all the machines it scans if the server is older than version 2.9.
This is because it opens a connection to the ssh port, reads the public
key, and drops the connection as soon as it gets the key.
@


1.37
log
@Add "ssh-keyscan -c ..." flag to allow fetching certificates instead
of plain keys; ok markus@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.36 2014/08/30 15:33:50 sobrado Exp $
d9 1
a9 1
.Dd $Mdocdate: August 30 2014 $
d18 1
a18 1
.Op Fl 46Hcv
@


1.36
log
@improve capitalization for the Ed25519 public-key signature system.

ok djm@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.35 2014/03/12 13:06:59 naddy Exp $
d9 1
a9 1
.Dd $Mdocdate: March 12 2014 $
d18 1
a18 1
.Op Fl 46Hv
d57 2
@


1.35
log
@scan for Ed25519 keys by default too
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.34 2014/01/28 14:13:39 jmc Exp $
d9 1
a9 1
.Dd $Mdocdate: January 28 2014 $
d133 1
a133 1
Output format for RSA, DSA, ECDSA, and ED25519 keys:
@


1.34
log
@kill some bad Pa;
From: Jan Stary
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.33 2013/12/07 11:58:46 naddy Exp $
d9 1
a9 1
.Dd $Mdocdate: December 7 2013 $
d101 2
a102 1
.Dq rsa
d104 1
a104 1
.Dq ecdsa
d128 1
a128 1
Output format for rsa1 keys:
d133 1
a133 1
Output format for rsa, dsa and ecdsa keys:
d162 1
a162 1
$ ssh-keyscan -t rsa,dsa,ecdsa -f ssh_hosts | \e
@


1.33
log
@add missing mentions of ed25519; ok djm@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.32 2013/12/06 13:39:49 markus Exp $
d9 1
a9 1
.Dd $Mdocdate: December 6 2013 $
d59 4
a62 2
.Pa addrlist namelist
pairs from this file, one per line.
d68 1
a68 1
.Pa addrlist namelist
d83 1
a83 1
.Pa timeout
d122 1
a122 1
.Pa Input format:
d127 1
a127 1
.Pa Output format for rsa1 keys:
d132 1
a132 1
.Pa Output format for rsa, dsa and ecdsa keys:
d138 1
a138 1
.Pa keytype
d150 2
a151 4
Print the
.Pa rsa
host key for machine
.Pa hostname :
@


1.32
log
@support ed25519 keys (hostkeys and user identities) using the public domain
ed25519 reference code from SUPERCOP, see http://ed25519.cr.yp.to/software.html
feedback, help & ok djm@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.31 2013/07/16 00:07:52 schwarze Exp $
d9 1
a9 1
.Dd $Mdocdate: July 16 2013 $
d92 2
a93 1
.Dq ecdsa
@


1.31
log
@use .Mt for email addresses; from Jan Stary <hans at stare dot cz>; ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.30 2012/04/11 13:34:17 djm Exp $
d9 1
a9 1
.Dd $Mdocdate: April 11 2012 $
d140 1
@


1.30
log
@now that sshd defaults to offering ECDSA keys, ssh-keyscan should also
look for them by default; bz#1971
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.29 2010/08/31 11:54:45 djm Exp $
d9 1
a9 1
.Dd $Mdocdate: August 31 2010 $
d167 1
a167 1
.An David Mazieres Aq dm@@lcs.mit.edu
d169 1
a169 1
.An Wayne Davison Aq wayned@@users.sourceforge.net
@


1.29
log
@Implement Elliptic Curve Cryptography modes for key exchange (ECDH) and
host/user keys (ECDSA) as specified by RFC5656. ECDH and ECDSA offer
better performance than plain DH and DSA at the same equivalent symmetric
key length, as well as much shorter keys.

Only the mandatory sections of RFC5656 are implemented, specifically the
three REQUIRED curves nistp256, nistp384 and nistp521 and only ECDH and
ECDSA. Point compression (optional in RFC5656 is NOT implemented).

Certificate host and user keys using the new ECDSA key types are supported.

Note that this code has not been tested for interoperability and may be
subject to change.

feedback and ok markus@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.28 2010/01/09 23:04:13 dtucker Exp $
d9 1
a9 1
.Dd $Mdocdate: January 9 2010 $
d97 5
a101 2
The default is
.Dq rsa .
@


1.28
log
@Remove RoutingDomain from ssh since it's now not needed.  It can be replaced
with "route exec" or "nc -V" as a proxycommand.  "route exec" also ensures
that trafic such as DNS lookups stays withing the specified routingdomain.

For example (from reyk):
# route -T 2 exec /usr/sbin/sshd
or inherited from the parent process
$ route -T 2 exec sh
$ ssh 10.1.2.3

ok deraadt@@ markus@@ stevesk@@ reyk@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.26 2008/12/29 01:12:36 stevesk Exp $
d9 1
a9 1
.Dd $Mdocdate: December 29 2008 $
d91 3
a94 2
or
.Dq dsa
d126 1
a126 1
.Pa Output format for rsa and dsa keys:
d134 4
a137 1
.Dq ssh-rsa
d139 1
a139 1
.Dq ssh-dss .
d156 1
a156 1
$ ssh-keyscan -t rsa,dsa -f ssh_hosts | \e
@


1.27
log
@Allow to set the rdomain in ssh/sftp/scp/sshd and ssh-keyscan.

ok markus@@
@
text
@a22 1
.Op Fl V Ar rdomain
a97 2
.It Fl V Ar rdomain
Set the routing domain.
@


1.26
log
@fix example, default key type is rsa for 3+ years; from
frederic.perrin@@resel.fr
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.25 2008/11/01 11:14:36 sobrado Exp $
d9 1
a9 1
.Dd $Mdocdate: November 1 2008 $
d23 1
d99 2
@


1.25
log
@the ellipsis is not an optional argument; while here, improve spacing.
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.24 2008/04/30 10:14:03 djm Exp $
d9 1
a9 1
.Dd $Mdocdate: April 30 2008 $
d140 1
a140 1
.Pa rsa1
@


1.24
log
@default to rsa (protocol 2) keys, instead of rsa1 keys; spotted by
larsnooden AT openoffice.org
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.23 2007/05/31 19:20:16 jmc Exp $
d9 1
a9 1
.Dd $Mdocdate: May 31 2007 $
d24 1
a24 1
.Op Ar ...
@


1.23
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.22 2006/09/25 04:55:38 ray Exp $
d9 1
a9 1
.Dd $Mdocdate$
d97 1
a97 1
.Dq rsa1 .
@


1.22
log
@Change "a SSH" to "an SSH".  Hurray, I'm not the only one who
pronounces "SSH" as "ess-ess-aich".

OK jmc@@ and stevesk@@.
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.21 2005/09/30 20:34:26 jaredy Exp $
d9 1
a9 1
.Dd January 1, 1996
@


1.21
log
@deploy .An -nosplit; ok jmc
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.20 2005/03/01 15:47:14 jmc Exp $
d105 1
a105 1
If a ssh_known_hosts file is constructed using
@


1.21.6.1
log
@upgrade to OpenSSH 4.5
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.22 2006/09/25 04:55:38 ray Exp $
d105 1
a105 1
If an ssh_known_hosts file is constructed using
@


1.21.2.1
log
@upgrade to OpenSSH 4.5
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.22 2006/09/25 04:55:38 ray Exp $
d105 1
a105 1
If an ssh_known_hosts file is constructed using
@


1.20
log
@sort options and sync usage();
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.19 2005/03/01 10:41:28 djm Exp $
d159 1
@


1.20.4.1
log
@upgrade to OpenSSH 4.3
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.21 2005/09/30 20:34:26 jaredy Exp $
a158 1
.An -nosplit
@


1.20.4.2
log
@upgrade to OpenSSH 4.4
@
text
@@


1.20.4.3
log
@upgrade to OpenSSH 4.5
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.22 2006/09/25 04:55:38 ray Exp $
d105 1
a105 1
If an ssh_known_hosts file is constructed using
@


1.20.2.1
log
@upgrade to OpenSSH 4.3
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.21 2005/09/30 20:34:26 jaredy Exp $
a158 1
.An -nosplit
@


1.19
log
@option to hash hostnames output by ssh-keyscan; ok markus@@ deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.18 2004/07/12 23:34:25 brad Exp $
d18 2
a19 1
.Op Fl Hv46
a22 1
.Op Fl f Ar file
d49 19
a97 11
.It Fl f Ar filename
Read hosts or
.Pa addrlist namelist
pairs from this file, one per line.
If
.Pa -
is supplied instead of a filename,
.Nm
will read hosts or
.Pa addrlist namelist
pairs from the standard input.
a102 8
.It Fl 4
Forces
.Nm
to use IPv4 addresses only.
.It Fl 6
Forces
.Nm
to use IPv6 addresses only.
@


1.18
log
@Fix incorrect macro, .I -> .Em

From: Eric S. Raymond <esr at thyrsus dot com>

ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.17 2003/06/10 09:12:11 jmc Exp $
d18 1
a18 1
.Op Fl v46
d49 8
@


1.18.2.1
log
@upgrade to OpenSSH 4.0
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.20 2005/03/01 15:47:14 jmc Exp $
d18 1
a18 2
.Op Fl 46Hv
.Op Fl f Ar file
d22 1
a48 27
.It Fl 4
Forces
.Nm
to use IPv4 addresses only.
.It Fl 6
Forces
.Nm
to use IPv6 addresses only.
.It Fl f Ar file
Read hosts or
.Pa addrlist namelist
pairs from this file, one per line.
If
.Pa -
is supplied instead of a filename,
.Nm
will read hosts or
.Pa addrlist namelist
pairs from the standard input.
.It Fl H
Hash all hostnames and addresses in the output.
Hashed names may be used normally by
.Nm ssh
and
.Nm sshd ,
but they do not reveal identifying information should the file's contents
be disclosed.
d71 11
d87 8
@


1.17
log
@- section reorder
- COMPATIBILITY merge
- macro cleanup
- kill whitespace at EOL
- new sentence, new line

ssh pages ok markus@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.16 2003/05/12 18:35:18 markus Exp $
d100 1
a100 1
.I man in the middle
@


1.17.2.1
log
@upgrade to OpenSSH 3.9
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.18 2004/07/12 23:34:25 brad Exp $
d100 1
a100 1
.Em man in the middle
@


1.17.4.1
log
@upgrade to OpenSSH 3.9
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.18 2004/07/12 23:34:25 brad Exp $
d100 1
a100 1
.Em man in the middle
@


1.17.4.2
log
@upgrade to OpenSSH 4.0
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.20 2005/03/01 15:47:14 jmc Exp $
d18 1
a18 2
.Op Fl 46Hv
.Op Fl f Ar file
d22 1
a48 27
.It Fl 4
Forces
.Nm
to use IPv4 addresses only.
.It Fl 6
Forces
.Nm
to use IPv6 addresses only.
.It Fl f Ar file
Read hosts or
.Pa addrlist namelist
pairs from this file, one per line.
If
.Pa -
is supplied instead of a filename,
.Nm
will read hosts or
.Pa addrlist namelist
pairs from the standard input.
.It Fl H
Hash all hostnames and addresses in the output.
Hashed names may be used normally by
.Nm ssh
and
.Nm sshd ,
but they do not reveal identifying information should the file's contents
be disclosed.
d71 11
d87 8
@


1.16
log
@typo: DSA keys are of type ssh-dss; Brian Poole
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.15 2003/03/28 10:11:43 jmc Exp $
a105 18
.Sh EXAMPLES
.Pp
Print the
.Pa rsa1
host key for machine
.Pa hostname :
.Bd -literal
$ ssh-keyscan hostname
.Ed
.Pp
Find all hosts from the file
.Pa ssh_hosts
which have new or different keys from those in the sorted file
.Pa ssh_known_hosts :
.Bd -literal
$ ssh-keyscan -t rsa,dsa -f ssh_hosts | \e\ 
	sort -u - ssh_known_hosts | diff ssh_known_hosts -
.Ed
d130 17
a146 5
.Sh BUGS
It generates "Connection closed by remote host" messages on the consoles
of all the machines it scans if the server is older than version 2.9.
This is because it opens a connection to the ssh port, reads the public
key, and drops the connection as soon as it gets the key.
d151 1
a151 1
David Mazieres <dm@@lcs.mit.edu>
d153 1
a153 1
Wayne Davison <wayned@@users.sourceforge.net>
d155 5
@


1.15
log
@- killed whitespace
- new sentence new line
- .Bk for arguments

ok markus@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.14 2002/02/13 08:33:47 mpech Exp $
d145 1
a145 1
.Dq ssh-dsa .
@


1.14
log
@When you give command examples and etc., in a manual page prefix them with:
$ command
or
# command

deraadt@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.13 2002/02/09 17:37:34 deraadt Exp $
d17 1
d25 1
d29 2
a30 1
hosts.  It was designed to aid in building and verifying
d39 2
a40 1
parallel, so it is very efficient.  The keys from a domain of 1,000
d42 2
a43 1
hosts are down or do not run ssh.  For scanning, one does not need
d52 2
a53 1
Set the timeout for connection attempts.  If
d57 2
a58 2
closed and the host in question considered unavailable.  Default is 5
seconds.
@


1.14.6.1
log
@Update OpenSSH to version 3.6.1
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.14.4.1 2003/04/03 23:27:13 margarida Exp $
a16 1
.Bk -words
a23 1
.Ek
d27 1
a27 2
hosts.
It was designed to aid in building and verifying
d36 1
a36 2
parallel, so it is very efficient.
The keys from a domain of 1,000
d38 1
a38 2
hosts are down or do not run ssh.
For scanning, one does not need
d47 1
a47 2
Set the timeout for connection attempts.
If
d51 2
a52 2
closed and the host in question considered unavailable.
Default is 5 seconds.
@


1.14.6.2
log
@upgrade to OpenSSH 3.7
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.17 2003/06/10 09:12:11 jmc Exp $
d106 18
d145 1
a145 1
.Dq ssh-dss .
d148 5
a152 17
.Sh EXAMPLES
Print the
.Pa rsa1
host key for machine
.Pa hostname :
.Bd -literal
$ ssh-keyscan hostname
.Ed
.Pp
Find all hosts from the file
.Pa ssh_hosts
which have new or different keys from those in the sorted file
.Pa ssh_known_hosts :
.Bd -literal
$ ssh-keyscan -t rsa,dsa -f ssh_hosts | \e
	sort -u - ssh_known_hosts | diff ssh_known_hosts -
.Ed
d157 1
a157 1
.An David Mazieres Aq dm@@lcs.mit.edu
d159 1
a159 1
.An Wayne Davison Aq wayned@@users.sourceforge.net
a160 5
.Sh BUGS
It generates "Connection closed by remote host" messages on the consoles
of all the machines it scans if the server is older than version 2.9.
This is because it opens a connection to the ssh port, reads the public
key, and drops the connection as soon as it gets the key.
@


1.14.6.3
log
@upgrade to OpenSSH 3.8upgrade to OpenSSH 3.8upgrade to OpenSSH 3.8
@
text
@@


1.14.4.1
log
@Update to OpenSSH 3.6.1
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.15 2003/03/28 10:11:43 jmc Exp $
a16 1
.Bk -words
a23 1
.Ek
d27 1
a27 2
hosts.
It was designed to aid in building and verifying
d36 1
a36 2
parallel, so it is very efficient.
The keys from a domain of 1,000
d38 1
a38 2
hosts are down or do not run ssh.
For scanning, one does not need
d47 1
a47 2
Set the timeout for connection attempts.
If
d51 2
a52 2
closed and the host in question considered unavailable.
Default is 5 seconds.
@


1.14.4.2
log
@upgrade to OpenSSH 3.7
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.17 2003/06/10 09:12:11 jmc Exp $
d106 18
d145 1
a145 1
.Dq ssh-dss .
d148 5
a152 17
.Sh EXAMPLES
Print the
.Pa rsa1
host key for machine
.Pa hostname :
.Bd -literal
$ ssh-keyscan hostname
.Ed
.Pp
Find all hosts from the file
.Pa ssh_hosts
which have new or different keys from those in the sorted file
.Pa ssh_known_hosts :
.Bd -literal
$ ssh-keyscan -t rsa,dsa -f ssh_hosts | \e
	sort -u - ssh_known_hosts | diff ssh_known_hosts -
.Ed
d157 1
a157 1
.An David Mazieres Aq dm@@lcs.mit.edu
d159 1
a159 1
.An Wayne Davison Aq wayned@@users.sourceforge.net
a160 5
.Sh BUGS
It generates "Connection closed by remote host" messages on the consoles
of all the machines it scans if the server is older than version 2.9.
This is because it opens a connection to the ssh port, reads the public
key, and drops the connection as soon as it gets the key.
@


1.14.2.1
log
@Merge OpenSSH 3.6.1
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.15 2003/03/28 10:11:43 jmc Exp $
a16 1
.Bk -words
a23 1
.Ek
d27 1
a27 2
hosts.
It was designed to aid in building and verifying
d36 1
a36 2
parallel, so it is very efficient.
The keys from a domain of 1,000
d38 1
a38 2
hosts are down or do not run ssh.
For scanning, one does not need
d47 1
a47 2
Set the timeout for connection attempts.
If
d51 2
a52 2
closed and the host in question considered unavailable.
Default is 5 seconds.
@


1.13
log
@move ssh config files to /etc/ssh
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.12 2001/09/05 06:23:07 deraadt Exp $
d107 1
a107 1
ssh-keyscan hostname
d115 1
a115 1
ssh-keyscan -t rsa,dsa -f ssh_hosts | \e\ 
@


1.12
log
@avoid first person in manual pages
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.11 2001/08/23 18:08:59 stevesk Exp $
d141 1
a141 1
.Pa /etc/ssh_known_hosts
@


1.12.2.1
log
@Update to OpenSSH-3.1 on 3.0-stable branch
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.14 2002/02/13 08:33:47 mpech Exp $
d107 1
a107 1
$ ssh-keyscan hostname
d115 1
a115 1
$ ssh-keyscan -t rsa,dsa -f ssh_hosts | \e\ 
d141 1
a141 1
.Pa /etc/ssh/ssh_known_hosts
@


1.12.2.2
log
@apply the necessary openbsd30_3.1.patch patch.
--
Ok'd by markus@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.12.2.1 2002/03/07 17:37:47 jason Exp $
d141 1
a141 1
.Pa /etc/ssh_known_hosts
@


1.11
log
@minor cleanup
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.10 2001/08/05 23:18:20 markus Exp $
d38 3
a40 3
hosts are down or do not run ssh.  You do not need login access to the
machines you are scanning, nor does the scanning process involve
any encryption.
d91 1
a91 1
If you make an ssh_known_hosts file using
d93 1
a93 1
without verifying the keys, you will be vulnerable to
d96 1
a96 1
On the other hand, if your security model allows such a risk,
d98 2
a99 2
can help you detect tampered keyfiles or man in the middle attacks which
have begun after you created your ssh_known_hosts file.
@


1.10
log
@ssh 2 support; from wayned@@users.sourceforge.net
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.9 2001/08/02 18:37:35 mpech Exp $
d46 1
a46 1
.It Fl T
d54 1
a54 1
Specifies the type of the key to fetch from the following hosts.
@


1.9
log
@o) .Sh AUTHOR -> .Sh AUTHORS;
o) .Sh EXAMPLE -> .Sh EXAMPLES;
o) Delete .Sh OPTIONS. Text moved to .Sh DESCRIPTION;

millert@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.8 2001/06/23 17:48:18 itojun Exp $
d17 7
a23 3
.Op Fl t Ar timeout
.Op Ar -- | host | addrlist namelist
.Op Fl f Ar files ...
d44 3
a46 1
.It Fl t
d53 13
a65 1
.It Fl f
d76 13
d101 4
a104 1
Print the host key for machine
d115 2
a116 2
$ ssh-keyscan -f ssh_hosts | sort -u - ssh_known_hosts | \e\ 
	diff ssh_known_hosts -
d120 1
d122 1
d124 2
a125 1
.Pa Output format:
d127 13
d144 1
a144 1
of all the machines it scans.
d152 3
@


1.8
log
@kill whitespace at EOL.
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.7 2001/06/22 10:17:51 mpech Exp $
d37 2
a38 11
.Sh SECURITY
If you make an ssh_known_hosts file using
.Nm
without verifying the keys, you will be vulnerable to
.I man in the middle
attacks.
On the other hand, if your security model allows such a risk,
.Nm
can help you detect tampered keyfiles or man in the middle attacks which
have begun after you created your ssh_known_hosts file.
.Sh OPTIONS
d59 10
@


1.7
log
@o) .Sh AUTHOR -> .Sh AUTHORS;
o) remove unnecessary .Pp;
o) better -mdoc style;
o) typo;
o) sort SEE ALSO;

aaron@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.6 2001/06/05 05:05:39 pvalchev Exp $
d50 1
a50 1
Set the timeout for connection attempts.  If 
d57 1
a57 1
Read hosts or 
d64 1
a64 1
will read hosts or 
@


1.6
log
@License clarification from David Mazieres, ok deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.5 2001/04/18 16:21:05 ian Exp $
a68 1
.Pp
a82 1
.Pp
a83 1
.Pp
d99 1
a99 1
.Sh AUTHOR
@


1.5
log
@Fix typo reported in PR/1779
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.4 2001/03/01 03:38:33 deraadt Exp $
d7 1
a7 2
.\" OpenBSD project (for instance by leaving this copyright notice
.\" intact).
@


1.5.2.1
log
@Pull in OpenSSH-2.9.9
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.12 2001/09/05 06:23:07 deraadt Exp $
d7 2
a8 1
.\" OpenBSD project by leaving this copyright notice intact.
d18 3
a20 7
.Op Fl v46
.Op Fl p Ar port
.Op Fl T Ar timeout
.Op Fl t Ar type
.Op Fl f Ar file
.Op Ar host | addrlist namelist
.Op Ar ...
d35 14
a48 5
hosts are down or do not run ssh.  For scanning, one does not need
login access to the machines that are being scanned, nor does the
scanning process involve any encryption.
.Pp
The options are as follows:
d50 2
a51 4
.It Fl p Ar port
Port to connect to on the remote host.
.It Fl T Ar timeout
Set the timeout for connection attempts.  If
d57 2
a58 14
.It Fl t Ar type
Specifies the type of the key to fetch from the scanned hosts.
The possible values are
.Dq rsa1
for protocol version 1 and
.Dq rsa
or
.Dq dsa
for protocol version 2.
Multiple values may be specified by separating them with commas.
The default is
.Dq rsa1 .
.It Fl f Ar filename
Read hosts or
d65 1
a65 1
will read hosts or
a67 13
.It Fl v
Verbose mode.
Causes
.Nm
to print debugging messages about its progress.
.It Fl 4
Forces
.Nm
to use IPv4 addresses only.
.It Fl 6
Forces
.Nm
to use IPv6 addresses only.
a68 10
.Sh SECURITY
If a ssh_known_hosts file is constructed using
.Nm
without verifying the keys, users will be vulnerable to
.I man in the middle
attacks.
On the other hand, if the security model allows such a risk,
.Nm
can help in the detection of tampered keyfiles or man in the middle
attacks which have begun after the ssh_known_hosts file was created.
d71 1
a71 3
Print the
.Pa rsa1
host key for machine
d82 2
a83 2
ssh-keyscan -t rsa,dsa -f ssh_hosts | \e\ 
	sort -u - ssh_known_hosts | diff ssh_known_hosts -
d85 1
d87 1
a88 1
.Bd -literal
a89 1
.Ed
d91 1
a91 2
.Pa Output format for rsa1 keys:
.Bd -literal
a92 13
.Ed
.Pp
.Pa Output format for rsa and dsa keys:
.Bd -literal
host-or-namelist keytype base64-encoded-key
.Ed
.Pp
Where
.Pa keytype
is either
.Dq ssh-rsa
or
.Dq ssh-dsa .
d97 1
a97 1
of all the machines it scans if the server is older than version 2.9.
d103 1
a103 1
.Sh AUTHORS
a104 3
wrote the initial version, and
Wayne Davison <wayned@@users.sourceforge.net>
added support for protocol version 2.
@


1.5.2.2
log
@Merge OpenSSH 3.1, keeping /etc as configuration files directory.
(i.e. OpenSSH 3.1 + openbsd29_3.1.patch)
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.14 2002/02/13 08:33:47 mpech Exp $
d107 1
a107 1
$ ssh-keyscan hostname
d115 1
a115 1
$ ssh-keyscan -t rsa,dsa -f ssh_hosts | \e\ 
@


1.4
log
@copyright notices on all source files
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.3 2001/01/29 01:58:18 niklas Exp $
d36 1
a36 1
machines you are scanning, nor does does the scanning process involve
@


1.4.2.1
log
@OpenSSH-2.5.1 for 2.7 patch branch
@
text
@d3 7
d11 1
a11 1
.Dt ssh-keyscan 1
d82 1
a82 1
ssh-keyscan -f ssh_hosts | sort -u - ssh_known_hosts | \e\ 
d101 1
a101 1
.Xr ssh 1
@


1.4.2.2
log
@Pull in OpenSSH-2.5.2 for 2.7 branch.
@
text
@d1 1
a1 8
.\"	$OpenBSD: ssh-keyscan.1,v 1.4 2001/03/01 03:38:33 deraadt Exp $
.\"
.\" Copyright 1995, 1996 by David Mazieres <dm@@lcs.mit.edu>.
.\"
.\" Modification and redistribution in source and binary forms is
.\" permitted provided that due credit is given to the author and the
.\" OpenBSD project (for instance by leaving this copyright notice
.\" intact).
d4 1
a4 1
.Dt SSH-KEYSCAN 1
d75 1
a75 1
$ ssh-keyscan -f ssh_hosts | sort -u - ssh_known_hosts | \e\ 
d94 1
a94 1
.Xr ssh 1 ,
@


1.3
log
@$OpenBSD$
@
text
@d1 8
a8 1
.\"	$OpenBSD$
d11 1
a11 1
.Dt ssh-keyscan 1
d82 1
a82 1
ssh-keyscan -f ssh_hosts | sort -u - ssh_known_hosts | \e\ 
d101 1
a101 1
.Xr ssh 1
@


1.3.2.1
log
@Pull in OpenSSH 2.5.0
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.3 2001/01/29 01:58:18 niklas Exp $
@


1.3.2.2
log
@Pull in OpenSSH-2.5.1
@
text
@@


1.3.2.3
log
@Pull in OpenSSH-2.5.2 for 2.8 branch.
@
text
@d1 1
a1 8
.\"	$OpenBSD: ssh-keyscan.1,v 1.4 2001/03/01 03:38:33 deraadt Exp $
.\"
.\" Copyright 1995, 1996 by David Mazieres <dm@@lcs.mit.edu>.
.\"
.\" Modification and redistribution in source and binary forms is
.\" permitted provided that due credit is given to the author and the
.\" OpenBSD project (for instance by leaving this copyright notice
.\" intact).
d4 1
a4 1
.Dt SSH-KEYSCAN 1
d75 1
a75 1
$ ssh-keyscan -f ssh_hosts | sort -u - ssh_known_hosts | \e\ 
d94 1
a94 1
.Xr ssh 1 ,
@


1.3.2.4
log
@Pull in OpenSSH-2.9 to 2.8 branch.
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.5 2001/04/18 16:21:05 ian Exp $
d36 1
a36 1
machines you are scanning, nor does the scanning process involve
@


1.3.2.5
log
@Pull in OpenSSH 2.9.9 to the 2.8 branch.
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.12 2001/09/05 06:23:07 deraadt Exp $
d7 2
a8 1
.\" OpenBSD project by leaving this copyright notice intact.
d18 3
a20 7
.Op Fl v46
.Op Fl p Ar port
.Op Fl T Ar timeout
.Op Fl t Ar type
.Op Fl f Ar file
.Op Ar host | addrlist namelist
.Op Ar ...
d35 14
a48 5
hosts are down or do not run ssh.  For scanning, one does not need
login access to the machines that are being scanned, nor does the
scanning process involve any encryption.
.Pp
The options are as follows:
d50 2
a51 4
.It Fl p Ar port
Port to connect to on the remote host.
.It Fl T Ar timeout
Set the timeout for connection attempts.  If
d57 2
a58 14
.It Fl t Ar type
Specifies the type of the key to fetch from the scanned hosts.
The possible values are
.Dq rsa1
for protocol version 1 and
.Dq rsa
or
.Dq dsa
for protocol version 2.
Multiple values may be specified by separating them with commas.
The default is
.Dq rsa1 .
.It Fl f Ar filename
Read hosts or
d65 1
a65 1
will read hosts or
a67 13
.It Fl v
Verbose mode.
Causes
.Nm
to print debugging messages about its progress.
.It Fl 4
Forces
.Nm
to use IPv4 addresses only.
.It Fl 6
Forces
.Nm
to use IPv6 addresses only.
a68 10
.Sh SECURITY
If a ssh_known_hosts file is constructed using
.Nm
without verifying the keys, users will be vulnerable to
.I man in the middle
attacks.
On the other hand, if the security model allows such a risk,
.Nm
can help in the detection of tampered keyfiles or man in the middle
attacks which have begun after the ssh_known_hosts file was created.
d71 1
a71 3
Print the
.Pa rsa1
host key for machine
d82 2
a83 2
ssh-keyscan -t rsa,dsa -f ssh_hosts | \e\ 
	sort -u - ssh_known_hosts | diff ssh_known_hosts -
d85 1
d87 1
a88 1
.Bd -literal
a89 1
.Ed
d91 1
a91 2
.Pa Output format for rsa1 keys:
.Bd -literal
a92 13
.Ed
.Pp
.Pa Output format for rsa and dsa keys:
.Bd -literal
host-or-namelist keytype base64-encoded-key
.Ed
.Pp
Where
.Pa keytype
is either
.Dq ssh-rsa
or
.Dq ssh-dsa .
d97 1
a97 1
of all the machines it scans if the server is older than version 2.9.
d103 1
a103 1
.Sh AUTHORS
a104 3
wrote the initial version, and
Wayne Davison <wayned@@users.sourceforge.net>
added support for protocol version 2.
@


1.3.2.6
log
@Merge OpenSSH 3.1.
@
text
@d1 1
a1 1
.\"	$OpenBSD: ssh-keyscan.1,v 1.14 2002/02/13 08:33:47 mpech Exp $
d107 1
a107 1
$ ssh-keyscan hostname
d115 1
a115 1
$ ssh-keyscan -t rsa,dsa -f ssh_hosts | \e\ 
@


1.2
log
@missing .El
@
text
@d1 2
@


1.1
log
@David Maziere's ssh-keyscan, ok niels@@
@
text
@d59 1
@

