head	1.64;
access;
symbols
	OPENBSD_6_1_BASE:1.64
	OPENBSD_6_0:1.62.0.6
	OPENBSD_6_0_BASE:1.62
	OPENBSD_5_9:1.62.0.2
	OPENBSD_5_9_BASE:1.62
	OPENBSD_5_8:1.59.0.2
	OPENBSD_5_8_BASE:1.59
	OPENBSD_5_7:1.57.0.2
	OPENBSD_5_7_BASE:1.57
	OPENBSD_5_6:1.55.0.4
	OPENBSD_5_6_BASE:1.55
	OPENBSD_5_5:1.54.0.4
	OPENBSD_5_5_BASE:1.54
	OPENBSD_5_4:1.53.0.12
	OPENBSD_5_4_BASE:1.53
	OPENBSD_5_3:1.53.0.10
	OPENBSD_5_3_BASE:1.53
	OPENBSD_5_2:1.53.0.8
	OPENBSD_5_2_BASE:1.53
	OPENBSD_5_1_BASE:1.53
	OPENBSD_5_1:1.53.0.6
	OPENBSD_5_0:1.53.0.4
	OPENBSD_5_0_BASE:1.53
	OPENBSD_4_9:1.53.0.2
	OPENBSD_4_9_BASE:1.53
	OPENBSD_4_8:1.50.0.4
	OPENBSD_4_8_BASE:1.50
	OPENBSD_4_7:1.50.0.2
	OPENBSD_4_7_BASE:1.50
	OPENBSD_4_6:1.47.0.4
	OPENBSD_4_6_BASE:1.47
	OPENBSD_4_5:1.46.0.6
	OPENBSD_4_5_BASE:1.46
	OPENBSD_4_4:1.46.0.4
	OPENBSD_4_4_BASE:1.46
	OPENBSD_4_3:1.46.0.2
	OPENBSD_4_3_BASE:1.46
	OPENBSD_4_2:1.45.0.2
	OPENBSD_4_2_BASE:1.45
	OPENBSD_4_1:1.44.0.2
	OPENBSD_4_1_BASE:1.44
	OPENBSD_4_0:1.44.0.4
	OPENBSD_4_0_BASE:1.44
	OPENBSD_3_9:1.43.0.2
	OPENBSD_3_9_BASE:1.43
	OPENBSD_3_8:1.42.0.2
	OPENBSD_3_8_BASE:1.42
	OPENBSD_3_7:1.41.0.4
	OPENBSD_3_7_BASE:1.41
	OPENBSD_3_6:1.41.0.2
	OPENBSD_3_6_BASE:1.41
	OPENBSD_3_5:1.39.0.4
	OPENBSD_3_5_BASE:1.39
	OPENBSD_3_4:1.39.0.2
	OPENBSD_3_4_BASE:1.39
	OPENBSD_3_3:1.36.0.2
	OPENBSD_3_3_BASE:1.36
	OPENBSD_3_2:1.35.0.2
	OPENBSD_3_2_BASE:1.35
	OPENBSD_3_1:1.31.0.2
	OPENBSD_3_1_BASE:1.31
	OPENBSD_3_0:1.28.0.2
	OPENBSD_3_0_BASE:1.28
	OPENBSD_2_9_BASE:1.24
	OPENBSD_2_9:1.24.0.2
	OPENBSD_2_8:1.16.0.2
	OPENBSD_2_8_BASE:1.16
	OPENBSD_2_7:1.12.0.2
	OPENBSD_2_7_BASE:1.12
	OPENBSD_2_6:1.6.0.2
	OPENBSD_2_6_BASE:1.6;
locks; strict;
comment	@.\" @;


1.64
date	2016.11.30.06.54.26;	author jmc;	state Exp;
branches;
next	1.63;
commitid	fSypugnuq1W6gLkJ;

1.63
date	2016.11.30.03.07.37;	author djm;	state Exp;
branches;
next	1.62;
commitid	VAcQ8Lcp3jZIPYug;

1.62
date	2015.11.15.23.54.15;	author jmc;	state Exp;
branches;
next	1.61;
commitid	Tvzx0pxNpgh17mwX;

1.61
date	2015.11.15.22.26.49;	author jcs;	state Exp;
branches;
next	1.60;
commitid	mjNGB5AAtJeHDag2;

1.60
date	2015.11.05.09.48.05;	author jmc;	state Exp;
branches;
next	1.59;
commitid	2IdzdclaEuAvUpsp;

1.59
date	2015.04.24.06.26.49;	author jmc;	state Exp;
branches;
next	1.58;
commitid	2XhbQZadvmW3msbS;

1.58
date	2015.04.24.05.26.44;	author djm;	state Exp;
branches;
next	1.57;
commitid	N4vqpShIXxgj42tK;

1.57
date	2014.12.21.22.27.56;	author djm;	state Exp;
branches;
next	1.56;
commitid	EbtriidyZdsmXksl;

1.56
date	2014.08.30.15.33.50;	author sobrado;	state Exp;
branches;
next	1.55;
commitid	qDOCDATnMVba0efh;

1.55
date	2014.04.16.23.28.12;	author djm;	state Exp;
branches;
next	1.54;

1.54
date	2013.12.07.11.58.46;	author naddy;	state Exp;
branches;
next	1.53;

1.53
date	2010.11.21.01.01.13;	author djm;	state Exp;
branches;
next	1.52;

1.52
date	2010.08.31.17.40.54;	author jmc;	state Exp;
branches;
next	1.51;

1.51
date	2010.08.31.11.54.45;	author djm;	state Exp;
branches;
next	1.50;

1.50
date	2010.01.17.21.49.09;	author tedu;	state Exp;
branches;
next	1.49;

1.49
date	2009.10.22.15.02.12;	author sobrado;	state Exp;
branches;
next	1.48;

1.48
date	2009.10.22.12.35.53;	author sobrado;	state Exp;
branches;
next	1.47;

1.47
date	2009.03.26.08.38.39;	author sobrado;	state Exp;
branches;
next	1.46;

1.46
date	2007.09.09.11.38.01;	author sobrado;	state Exp;
branches;
next	1.45;

1.45
date	2007.05.31.19.20.16;	author jmc;	state Exp;
branches;
next	1.44;

1.44
date	2006.07.18.08.03.09;	author jmc;	state Exp;
branches;
next	1.43;

1.43
date	2005.11.28.06.02.56;	author dtucker;	state Exp;
branches
	1.43.2.1;
next	1.42;

1.42
date	2005.04.21.06.17.50;	author djm;	state Exp;
branches
	1.42.2.1;
next	1.41;

1.41
date	2004.07.11.17.48.47;	author deraadt;	state Exp;
branches
	1.41.2.1
	1.41.4.1;
next	1.40;

1.40
date	2004.05.13.02.47.50;	author dtucker;	state Exp;
branches;
next	1.39;

1.39
date	2003.06.10.09.12.11;	author jmc;	state Exp;
branches
	1.39.2.1
	1.39.4.1;
next	1.38;

1.38
date	2003.05.14.13.11.56;	author jmc;	state Exp;
branches;
next	1.37;

1.37
date	2003.03.28.10.11.43;	author jmc;	state Exp;
branches;
next	1.36;

1.36
date	2003.01.21.18.14.36;	author marc;	state Exp;
branches
	1.36.2.1;
next	1.35;

1.35
date	2002.06.24.13.12.23;	author markus;	state Exp;
branches
	1.35.2.1;
next	1.34;

1.34
date	2002.06.22.16.45.29;	author stevesk;	state Exp;
branches;
next	1.33;

1.33
date	2002.06.19.00.27.55;	author deraadt;	state Exp;
branches;
next	1.32;

1.32
date	2002.06.05.16.08.07;	author markus;	state Exp;
branches;
next	1.31;

1.31
date	2002.02.04.20.41.16;	author stevesk;	state Exp;
branches
	1.31.2.1;
next	1.30;

1.30
date	2002.02.03.23.22.59;	author stevesk;	state Exp;
branches;
next	1.29;

1.29
date	2001.11.19.18.40.46;	author stevesk;	state Exp;
branches;
next	1.28;

1.28
date	2001.09.05.06.23.07;	author deraadt;	state Exp;
branches
	1.28.2.1;
next	1.27;

1.27
date	2001.08.23.18.02.48;	author stevesk;	state Exp;
branches;
next	1.26;

1.26
date	2001.07.15.16.57.21;	author stevesk;	state Exp;
branches;
next	1.25;

1.25
date	2001.06.26.04.07.06;	author markus;	state Exp;
branches;
next	1.24;

1.24
date	2001.04.10.09.13.21;	author itojun;	state Exp;
branches
	1.24.2.1;
next	1.23;

1.23
date	2001.04.02.17.32.23;	author deraadt;	state Exp;
branches;
next	1.22;

1.22
date	2001.03.02.18.54.31;	author deraadt;	state Exp;
branches;
next	1.21;

1.21
date	2001.02.08.19.22.38;	author itojun;	state Exp;
branches;
next	1.20;

1.20
date	2001.01.28.10.24.04;	author markus;	state Exp;
branches;
next	1.19;

1.19
date	2000.11.15.20.09.01;	author markus;	state Exp;
branches;
next	1.18;

1.18
date	2000.11.15.19.55.29;	author markus;	state Exp;
branches;
next	1.17;

1.17
date	2000.11.10.05.10.40;	author aaron;	state Exp;
branches;
next	1.16;

1.16
date	2000.09.07.20.27.54;	author deraadt;	state Exp;
branches
	1.16.2.1;
next	1.15;

1.15
date	2000.08.25.16.16.15;	author deraadt;	state Exp;
branches;
next	1.14;

1.14
date	2000.08.19.21.34.43;	author markus;	state Exp;
branches;
next	1.13;

1.13
date	2000.07.06.04.06.56;	author aaron;	state Exp;
branches;
next	1.12;

1.12
date	2000.05.03.18.04.39;	author markus;	state Exp;
branches
	1.12.2.1;
next	1.11;

1.11
date	2000.04.12.21.47.50;	author aaron;	state Exp;
branches;
next	1.10;

1.10
date	2000.03.23.21.10.10;	author aaron;	state Exp;
branches;
next	1.9;

1.9
date	2000.01.22.02.17.50;	author aaron;	state Exp;
branches;
next	1.8;

1.8
date	99.11.16.23.59.21;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	99.10.28.08.43.10;	author markus;	state Exp;
branches;
next	1.6;

1.6
date	99.10.17.00.31.06;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	99.10.16.20.47.14;	author markus;	state Exp;
branches;
next	1.4;

1.4
date	99.10.14.18.17.42;	author markus;	state Exp;
branches;
next	1.3;

1.3
date	99.10.02.13.10.26;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	99.09.26.22.30.06;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	99.09.26.20.53.37;	author deraadt;	state Exp;
branches;
next	;

1.12.2.1
date	2000.09.01.18.23.23;	author jason;	state Exp;
branches;
next	1.12.2.2;

1.12.2.2
date	2000.11.08.21.31.20;	author jason;	state Exp;
branches;
next	1.12.2.3;

1.12.2.3
date	2001.03.12.15.44.15;	author jason;	state Exp;
branches;
next	1.12.2.4;

1.12.2.4
date	2001.03.21.18.53.08;	author jason;	state Exp;
branches;
next	;

1.16.2.1
date	2001.02.16.20.13.17;	author jason;	state Exp;
branches;
next	1.16.2.2;

1.16.2.2
date	2001.02.19.17.19.27;	author jason;	state Exp;
branches;
next	1.16.2.3;

1.16.2.3
date	2001.03.21.19.46.29;	author jason;	state Exp;
branches;
next	1.16.2.4;

1.16.2.4
date	2001.05.07.21.09.35;	author jason;	state Exp;
branches;
next	1.16.2.5;

1.16.2.5
date	2001.09.27.00.15.42;	author miod;	state Exp;
branches;
next	1.16.2.6;

1.16.2.6
date	2002.03.08.17.04.43;	author brad;	state Exp;
branches;
next	;

1.24.2.1
date	2001.09.27.19.03.55;	author jason;	state Exp;
branches;
next	1.24.2.2;

1.24.2.2
date	2002.03.09.00.20.45;	author miod;	state Exp;
branches;
next	;

1.28.2.1
date	2002.03.07.17.37.47;	author jason;	state Exp;
branches;
next	1.28.2.2;

1.28.2.2
date	2002.06.22.07.23.18;	author miod;	state Exp;
branches;
next	1.28.2.3;

1.28.2.3
date	2002.06.26.18.22.36;	author miod;	state Exp;
branches;
next	;

1.31.2.1
date	2002.06.26.15.30.39;	author jason;	state Exp;
branches;
next	1.31.2.2;

1.31.2.2
date	2003.04.03.22.35.17;	author miod;	state Exp;
branches;
next	;

1.35.2.1
date	2003.04.01.00.12.14;	author margarida;	state Exp;
branches;
next	1.35.2.2;

1.35.2.2
date	2003.04.03.23.27.12;	author margarida;	state Exp;
branches;
next	1.35.2.3;

1.35.2.3
date	2003.09.16.21.20.27;	author brad;	state Exp;
branches;
next	;

1.36.2.1
date	2003.05.11.12.01.52;	author margarida;	state Exp;
branches;
next	1.36.2.2;

1.36.2.2
date	2003.09.16.20.50.44;	author brad;	state Exp;
branches;
next	1.36.2.3;

1.36.2.3
date	2004.03.04.18.18.16;	author brad;	state Exp;
branches;
next	;

1.39.2.1
date	2004.08.19.22.37.32;	author brad;	state Exp;
branches;
next	;

1.39.4.1
date	2004.08.19.04.13.27;	author brad;	state Exp;
branches;
next	;

1.41.2.1
date	2005.09.02.03.45.00;	author brad;	state Exp;
branches;
next	;

1.41.4.1
date	2005.09.04.18.40.08;	author brad;	state Exp;
branches;
next	1.41.4.2;

1.41.4.2
date	2006.02.03.02.53.45;	author brad;	state Exp;
branches;
next	;

1.42.2.1
date	2006.02.03.03.01.57;	author brad;	state Exp;
branches;
next	1.42.2.2;

1.42.2.2
date	2006.10.06.03.19.33;	author brad;	state Exp;
branches;
next	;

1.43.2.1
date	2006.09.30.04.06.51;	author brad;	state Exp;
branches;
next	;


desc
@@


1.64
log
@tweak previous;
while here fix up FILES and AUTHORS;
@
text
@.\" $OpenBSD: ssh-agent.1,v 1.63 2016/11/30 03:07:37 djm Exp $
.\"
.\" Author: Tatu Ylonen <ylo@@cs.hut.fi>
.\" Copyright (c) 1995 Tatu Ylonen <ylo@@cs.hut.fi>, Espoo, Finland
.\"                    All rights reserved
.\"
.\" As far as I am concerned, the code I have written for this software
.\" can be used freely for any purpose.  Any derived versions of this
.\" software must be clearly marked as such, and if the derived work is
.\" incompatible with the protocol description in the RFC file, it must be
.\" called by a name other than "ssh" or "Secure Shell".
.\"
.\" Copyright (c) 1999,2000 Markus Friedl.  All rights reserved.
.\" Copyright (c) 1999 Aaron Campbell.  All rights reserved.
.\" Copyright (c) 1999 Theo de Raadt.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.Dd $Mdocdate: November 30 2016 $
.Dt SSH-AGENT 1
.Os
.Sh NAME
.Nm ssh-agent
.Nd authentication agent
.Sh SYNOPSIS
.Nm ssh-agent
.Op Fl c | s
.Op Fl \&Dd
.Op Fl a Ar bind_address
.Op Fl E Ar fingerprint_hash
.Op Fl P Ar pkcs11_whitelist
.Op Fl t Ar life
.Op Ar command Op Ar arg ...
.Nm ssh-agent
.Op Fl c | s
.Fl k
.Sh DESCRIPTION
.Nm
is a program to hold private keys used for public key authentication
(RSA, DSA, ECDSA, Ed25519).
.Nm
is usually started in the beginning of an X-session or a login session, and
all other windows or programs are started as clients to the ssh-agent
program.
Through use of environment variables the agent can be located
and automatically used for authentication when logging in to other
machines using
.Xr ssh 1 .
.Pp
The agent initially does not have any private keys.
Keys are added using
.Xr ssh 1
(see
.Cm AddKeysToAgent
in
.Xr ssh_config 5
for details)
or
.Xr ssh-add 1 .
Multiple identities may be stored in
.Nm
concurrently and
.Xr ssh 1
will automatically use them if present.
.Xr ssh-add 1
is also used to remove keys from
.Nm
and to query the keys that are held in one.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl a Ar bind_address
Bind the agent to the
.Ux Ns -domain
socket
.Ar bind_address .
The default is
.Pa $TMPDIR/ssh-XXXXXXXXXX/agent.\*(Ltppid\*(Gt .
.It Fl c
Generate C-shell commands on
.Dv stdout .
This is the default if
.Ev SHELL
looks like it's a csh style of shell.
.It Fl D
Foreground mode.
When this option is specified
.Nm
will not fork.
.It Fl d
Debug mode.
When this option is specified
.Nm
will not fork and will write debug information to standard error.
.It Fl E Ar fingerprint_hash
Specifies the hash algorithm used when displaying key fingerprints.
Valid options are:
.Dq md5
and
.Dq sha256 .
The default is
.Dq sha256 .
.It Fl k
Kill the current agent (given by the
.Ev SSH_AGENT_PID
environment variable).
.It Fl P Ar pkcs11_whitelist
Specify a pattern-list of acceptable paths for PKCS#11 shared libraries
that may be added using the
.Fl s
option to
.Xr ssh-add 1 .
The default is to allow loading PKCS#11 libraries from
.Dq /usr/lib/*,/usr/local/lib/* .
PKCS#11 libraries that do not match the whitelist will be refused.
See PATTERNS in
.Xr ssh_config 5
for a description of pattern-list syntax.
.It Fl s
Generate Bourne shell commands on
.Dv stdout .
This is the default if
.Ev SHELL
does not look like it's a csh style of shell.
.It Fl t Ar life
Set a default value for the maximum lifetime of identities added to the agent.
The lifetime may be specified in seconds or in a time format specified in
.Xr sshd_config 5 .
A lifetime specified for an identity with
.Xr ssh-add 1
overrides this value.
Without this option the default maximum lifetime is forever.
.El
.Pp
If a command line is given, this is executed as a subprocess of the agent.
When the command dies, so does the agent.
.Pp
The idea is that the agent is run in the user's local PC, laptop, or
terminal.
Authentication data need not be stored on any other
machine, and authentication passphrases never go over the network.
However, the connection to the agent is forwarded over SSH
remote logins, and the user can thus use the privileges given by the
identities anywhere in the network in a secure way.
.Pp
There are two main ways to get an agent set up:
The first is that the agent starts a new subcommand into which some environment
variables are exported, eg
.Cm ssh-agent xterm & .
The second is that the agent prints the needed shell commands (either
.Xr sh 1
or
.Xr csh 1
syntax can be generated) which can be evaluated in the calling shell, eg
.Cm eval `ssh-agent -s`
for Bourne-type shells such as
.Xr sh 1
or
.Xr ksh 1
and
.Cm eval `ssh-agent -c`
for
.Xr csh 1
and derivatives.
.Pp
Later
.Xr ssh 1
looks at these variables and uses them to establish a connection to the agent.
.Pp
The agent will never send a private key over its request channel.
Instead, operations that require a private key will be performed
by the agent, and the result will be returned to the requester.
This way, private keys are not exposed to clients using the agent.
.Pp
A
.Ux Ns -domain
socket is created and the name of this socket is stored in the
.Ev SSH_AUTH_SOCK
environment
variable.
The socket is made accessible only to the current user.
This method is easily abused by root or another instance of the same
user.
.Pp
The
.Ev SSH_AGENT_PID
environment variable holds the agent's process ID.
.Pp
The agent exits automatically when the command given on the command
line terminates.
.Sh FILES
.Bl -tag -width Ds
.It Pa $TMPDIR/ssh-XXXXXXXXXX/agent.<ppid>
.Ux Ns -domain
sockets used to contain the connection to the authentication agent.
These sockets should only be readable by the owner.
The sockets should get automatically removed when the agent exits.
.El
.Sh SEE ALSO
.Xr ssh 1 ,
.Xr ssh-add 1 ,
.Xr ssh-keygen 1 ,
.Xr sshd 8
.Sh AUTHORS
.An -nosplit
OpenSSH is a derivative of the original and free ssh 1.2.12 release by
.An Tatu Ylonen .
.An Aaron Campbell , Bob Beck , Markus Friedl , Niels Provos , Theo de Raadt
and
.An Dug Song
removed many bugs, re-added newer features and created OpenSSH.
.An Markus Friedl
contributed the support for SSH protocol versions 1.5 and 2.0.
@


1.63
log
@add a whitelist of paths from which ssh-agent will load (via
ssh-pkcs11-helper) a PKCS#11 module; ok markus@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.62 2015/11/15 23:54:15 jmc Exp $
d37 1
a37 1
.Dd $Mdocdate: November 15 2015 $
d49 1
a50 1
.Op Fl P Ar pkcs11_whitelist
d125 1
a125 1
.It Fl P
d211 1
a211 1
.It Pa $TMPDIR/ssh-XXXXXXXXXX/agent.\*(Ltppid\*(Gt
d223 9
a231 8
OpenSSH is a derivative of the original and free
ssh 1.2.12 release by Tatu Ylonen.
Aaron Campbell, Bob Beck, Markus Friedl, Niels Provos,
Theo de Raadt and Dug Song
removed many bugs, re-added newer features and
created OpenSSH.
Markus Friedl contributed the support for SSH
protocol versions 1.5 and 2.0.
@


1.62
log
@do not confuse mandoc by presenting "Dd";
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.61 2015/11/15 22:26:49 jcs Exp $
d50 1
d125 12
@


1.61
log
@Add an AddKeysToAgent client option which can be set to 'yes', 'no',
'ask', or 'confirm', and defaults to 'no'.  When enabled, a private
key that is used during authentication will be added to ssh-agent if
it is running (with confirmation enabled if set to 'confirm').

Initial version from Joachim Schipper many years ago.

ok markus@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.60 2015/11/05 09:48:05 jmc Exp $
d37 1
a37 1
.Dd $Mdocdate: November 5 2015 $
d46 1
a46 1
.Op Fl Dd
@


1.60
log
@"commandline" -> "command line", since there are so few examples
of the former in the pages, so many of the latter, and in some of
these pages we had multiple spellings;

prompted by tj
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.59 2015/04/24 06:26:49 jmc Exp $
d37 1
a37 1
.Dd $Mdocdate: April 24 2015 $
d69 7
@


1.59
log
@combine -Dd onto one line and update usage();
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.58 2015/04/24 05:26:44 djm Exp $
d133 1
a133 1
If a commandline is given, this is executed as a subprocess of the agent.
@


1.58
log
@add ssh-agent -D to leave ssh-agent in foreground without enabling
debug mode; bz#2381 ok dtucker@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.57 2014/12/21 22:27:56 djm Exp $
d37 1
a37 1
.Dd $Mdocdate: December 21 2014 $
d46 1
a46 2
.Op Fl D
.Op Fl d
@


1.57
log
@Add FingerprintHash option to control algorithm used for key
fingerprints. Default changes from MD5 to SHA256 and format
from hex to base64.

Feedback and ok naddy@@ markus@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.56 2014/08/30 15:33:50 sobrado Exp $
d37 1
a37 1
.Dd $Mdocdate: August 30 2014 $
d46 1
d96 5
d105 1
a105 1
will not fork.
@


1.56
log
@improve capitalization for the Ed25519 public-key signature system.

ok djm@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.55 2014/04/16 23:28:12 djm Exp $
d37 1
a37 1
.Dd $Mdocdate: April 16 2014 $
d48 1
d100 8
@


1.55
log
@remove the identity files from this manpage - ssh-agent doesn't deal
with them at all and the same information is duplicated in ssh-add.1
(which does deal with them); prodded by deraadt@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.54 2013/12/07 11:58:46 naddy Exp $
d37 1
a37 1
.Dd $Mdocdate: December 7 2013 $
d56 1
a56 1
(RSA, DSA, ECDSA, ED25519).
@


1.54
log
@add missing mentions of ed25519; ok djm@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.53 2010/11/21 01:01:13 djm Exp $
d37 1
a37 1
.Dd $Mdocdate: November 21 2010 $
a56 1
The idea is that
d58 1
a58 1
is started in the beginning of an X-session or a login session, and
d66 13
a121 23
The agent initially does not have any private keys.
Keys are added using
.Xr ssh-add 1 .
When executed without arguments,
.Xr ssh-add 1
adds the files
.Pa ~/.ssh/id_rsa ,
.Pa ~/.ssh/id_dsa ,
.Pa ~/.ssh/id_ecdsa ,
.Pa ~/.ssh/id_ed25519
and
.Pa ~/.ssh/identity .
If the identity has a passphrase,
.Xr ssh-add 1
asks for the passphrase on the terminal if it has one or from a small X11
program if running under X11.
If neither of these is the case then the authentication will fail.
It then sends the identity to the agent.
Several identities can be stored in the
agent; the agent can automatically use any of these identities.
.Ic ssh-add -l
displays the identities currently held by the agent.
.Pp
a176 10
.It Pa ~/.ssh/identity
Contains the protocol version 1 RSA authentication identity of the user.
.It Pa ~/.ssh/id_dsa
Contains the protocol version 2 DSA authentication identity of the user.
.It Pa ~/.ssh/id_ecdsa
Contains the protocol version 2 ECDSA authentication identity of the user.
.It Pa ~/.ssh/id_ed25519
Contains the protocol version 2 ED25519 authentication identity of the user.
.It Pa ~/.ssh/id_rsa
Contains the protocol version 2 RSA authentication identity of the user.
@


1.53
log
@honour $TMPDIR for client xauth and ssh-agent temporary directories;
feedback and ok markus@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.52 2010/08/31 17:40:54 jmc Exp $
d37 1
a37 1
.Dd $Mdocdate: August 31 2010 $
d56 1
a56 1
(RSA, DSA, ECDSA).
d118 2
a119 1
.Pa ~/.ssh/id_ecdsa
d194 2
@


1.52
log
@fix some macro abuse;
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.51 2010/08/31 11:54:45 djm Exp $
d75 1
a75 1
.Pa /tmp/ssh-XXXXXXXXXX/agent.\*(Ltppid\*(Gt .
d195 1
a195 1
.It Pa /tmp/ssh-XXXXXXXXXX/agent.\*(Ltppid\*(Gt
@


1.51
log
@Implement Elliptic Curve Cryptography modes for key exchange (ECDH) and
host/user keys (ECDSA) as specified by RFC5656. ECDH and ECDSA offer
better performance than plain DH and DSA at the same equivalent symmetric
key length, as well as much shorter keys.

Only the mandatory sections of RFC5656 are implemented, specifically the
three REQUIRED curves nistp256, nistp384 and nistp521 and only ECDH and
ECDSA. Point compression (optional in RFC5656 is NOT implemented).

Certificate host and user keys using the new ECDSA key types are supported.

Note that this code has not been tested for interoperability and may be
subject to change.

feedback and ok markus@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.50 2010/01/17 21:49:09 tedu Exp $
d37 1
a37 1
.Dd $Mdocdate: January 17 2010 $
d45 1
a45 1
.Op Fl c Li | Fl s
d51 1
a51 1
.Op Fl c Li | Fl s
@


1.50
log
@Correct and clarify ssh-add's password asking behavior.
Improved text dtucker and ok jmc
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.49 2009/10/22 15:02:12 sobrado Exp $
d37 1
a37 1
.Dd $Mdocdate: October 22 2009 $
d56 1
a56 1
(RSA, DSA).
d117 2
a118 1
.Pa ~/.ssh/id_dsa
d191 2
@


1.49
log
@write UNIX-domain in a more consistent way; while here, replace a
few remaining ".Tn UNIX" macros with ".Ux" ones.

pointed out by ratchov@@, thanks!

ok jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.48 2009/10/22 12:35:53 sobrado Exp $
d122 3
a124 2
asks for the passphrase (using a small X11 application if running
under X11, or from the terminal if running without X).
@


1.48
log
@use the UNIX-related macros (.At and .Ux) where appropriate.

ok jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.47 2009/03/26 08:38:39 sobrado Exp $
d37 1
a37 1
.Dd $Mdocdate: March 26 2009 $
d71 2
a72 2
.Ux
domain socket
d168 2
a169 2
.Ux
domain socket is created and the name of this socket is stored in the
d192 2
a193 3
.Ux
domain sockets used to contain the connection to the
authentication agent.
@


1.47
log
@fix a few typographical errors found by spell(1).

ok dtucker@@, jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.46 2007/09/09 11:38:01 sobrado Exp $
d37 1
a37 1
.Dd $Mdocdate: September 9 2007 $
d70 3
a72 1
Bind the agent to the unix-domain socket
d167 3
a169 2
A unix-domain socket is created
and the name of this socket is stored in the
d192 2
a193 1
Unix-domain sockets used to contain the connection to the
@


1.46
log
@sort synopsis and options in ssh-agent(1); usage is lowercase

ok jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.45 2007/05/31 19:20:16 jmc Exp $
d37 1
a37 1
.Dd $Mdocdate: May 31 2007 $
d144 1
a144 1
syntax can be generated) which can be evalled in the calling shell, eg
@


1.45
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.44 2006/07/18 08:03:09 jmc Exp $
d37 1
a37 1
.Dd $Mdocdate$
d45 2
a47 1
.Op Fl c Li | Fl s
d49 1
a49 2
.Op Fl d
.Op Ar command Op Ar args ...
d80 9
a94 4
.It Fl k
Kill the current agent (given by the
.Ev SSH_AGENT_PID
environment variable).
a102 5
.It Fl d
Debug mode.
When this option is specified
.Nm
will not fork.
@


1.44
log
@mark up angle brackets;
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.43 2005/11/28 06:02:56 dtucker Exp $
d37 1
a37 1
.Dd September 25, 1999
@


1.43
log
@Update agent socket path templates to reflect reality, correct xref for
the time formats.  bz#1121, patch from openssh at roumenpetrov.info, ok djm@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.42 2005/04/21 06:17:50 djm Exp $
d73 1
a73 1
.Pa /tmp/ssh-XXXXXXXXXX/agent.<ppid> .
d188 1
a188 1
.It Pa /tmp/ssh-XXXXXXXXXX/agent.<ppid>
@


1.43.2.1
log
@upgrade to OpenSSH 4.4
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.44 2006/07/18 08:03:09 jmc Exp $
d73 1
a73 1
.Pa /tmp/ssh-XXXXXXXXXX/agent.\*(Ltppid\*(Gt .
d188 1
a188 1
.It Pa /tmp/ssh-XXXXXXXXXX/agent.\*(Ltppid\*(Gt
@


1.42
log
@OpenSSH doesn't ever look at the $HOME environment variable, so don't say
that we do (bz #623); ok deraadt@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.41 2004/07/11 17:48:47 deraadt Exp $
d73 1
a73 1
.Pa /tmp/ssh-XXXXXXXX/agent.<ppid> .
d93 1
a93 1
.Xr sshd 8 .
d188 1
a188 1
.It Pa /tmp/ssh-XXXXXXXX/agent.<ppid>
@


1.42.2.1
log
@upgrade to OpenSSH 4.3
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.43 2005/11/28 06:02:56 dtucker Exp $
d73 1
a73 1
.Pa /tmp/ssh-XXXXXXXXXX/agent.<ppid> .
d93 1
a93 1
.Xr sshd_config 5 .
d188 1
a188 1
.It Pa /tmp/ssh-XXXXXXXXXX/agent.<ppid>
@


1.42.2.2
log
@upgrade to OpenSSH 4.4
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.44 2006/07/18 08:03:09 jmc Exp $
d73 1
a73 1
.Pa /tmp/ssh-XXXXXXXXXX/agent.\*(Ltppid\*(Gt .
d188 1
a188 1
.It Pa /tmp/ssh-XXXXXXXXXX/agent.\*(Ltppid\*(Gt
@


1.41
log
@spaces
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.40 2004/05/13 02:47:50 dtucker Exp $
d114 2
a115 2
.Pa $HOME/.ssh/id_rsa ,
.Pa $HOME/.ssh/id_dsa
d117 1
a117 1
.Pa $HOME/.ssh/identity .
d182 1
a182 1
.It Pa $HOME/.ssh/identity
d184 1
a184 1
.It Pa $HOME/.ssh/id_dsa
d186 1
a186 1
.It Pa $HOME/.ssh/id_rsa
@


1.41.4.1
log
@upgrade to OpenSSH 4.2
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.42 2005/04/21 06:17:50 djm Exp $
d114 2
a115 2
.Pa ~/.ssh/id_rsa ,
.Pa ~/.ssh/id_dsa
d117 1
a117 1
.Pa ~/.ssh/identity .
d182 1
a182 1
.It Pa ~/.ssh/identity
d184 1
a184 1
.It Pa ~/.ssh/id_dsa
d186 1
a186 1
.It Pa ~/.ssh/id_rsa
@


1.41.4.2
log
@upgrade to OpenSSH 4.3
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.43 2005/11/28 06:02:56 dtucker Exp $
d73 1
a73 1
.Pa /tmp/ssh-XXXXXXXXXX/agent.<ppid> .
d93 1
a93 1
.Xr sshd_config 5 .
d188 1
a188 1
.It Pa /tmp/ssh-XXXXXXXXXX/agent.<ppid>
@


1.41.2.1
log
@upgrade to OpenSSH 4.2
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.42 2005/04/21 06:17:50 djm Exp $
d114 2
a115 2
.Pa ~/.ssh/id_rsa ,
.Pa ~/.ssh/id_dsa
d117 1
a117 1
.Pa ~/.ssh/identity .
d182 1
a182 1
.It Pa ~/.ssh/identity
d184 1
a184 1
.It Pa ~/.ssh/id_dsa
d186 1
a186 1
.It Pa ~/.ssh/id_rsa
@


1.40
log
@Add examples to ssh-agent.1, bz#481 from Ralf Hauser; ok deraadt@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.39 2003/06/10 09:12:11 jmc Exp $
d151 1
a151 1
.Cm eval `ssh-agent -c` 
@


1.39
log
@- section reorder
- COMPATIBILITY merge
- macro cleanup
- kill whitespace at EOL
- new sentence, new line

ssh pages ok markus@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.38 2003/05/14 13:11:56 jmc Exp $
d137 4
a140 3
Either the agent starts a new subcommand into which some environment
variables are exported, or the agent prints the needed shell commands
(either
d144 12
a155 1
syntax can be generated) which can be evalled in the calling shell.
@


1.39.2.1
log
@upgrade to OpenSSH 3.9
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.41 2004/07/11 17:48:47 deraadt Exp $
d137 3
a139 4
The first is that the agent starts a new subcommand into which some environment
variables are exported, eg
.Cm ssh-agent xterm & .
The second is that the agent prints the needed shell commands (either
d143 1
a143 12
syntax can be generated) which can be evalled in the calling shell, eg
.Cm eval `ssh-agent -s`
for Bourne-type shells such as
.Xr sh 1
or
.Xr ksh 1
and
.Cm eval `ssh-agent -c`
for
.Xr csh 1
and derivatives.
.Pp
@


1.39.4.1
log
@upgrade to OpenSSH 3.9
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.41 2004/07/11 17:48:47 deraadt Exp $
d137 3
a139 4
The first is that the agent starts a new subcommand into which some environment
variables are exported, eg
.Cm ssh-agent xterm & .
The second is that the agent prints the needed shell commands (either
d143 1
a143 12
syntax can be generated) which can be evalled in the calling shell, eg
.Cm eval `ssh-agent -s`
for Bourne-type shells such as
.Xr sh 1
or
.Xr ksh 1
and
.Cm eval `ssh-agent -c`
for
.Xr csh 1
and derivatives.
.Pp
@


1.38
log
@setup -> set up;

from wiz@@netbsd
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.37 2003/03/28 10:11:43 jmc Exp $
d182 5
a195 5
.Sh SEE ALSO
.Xr ssh 1 ,
.Xr ssh-add 1 ,
.Xr ssh-keygen 1 ,
.Xr sshd 8
@


1.37
log
@- killed whitespace
- new sentence new line
- .Bk for arguments

ok markus@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.36 2003/01/21 18:14:36 marc Exp $
d136 1
a136 1
There are two main ways to get an agent setup:
@


1.36
log
@
Add a -t life option to ssh-agent that set the default lifetime.
The default can still be overriden by using -t in ssh-add.
OK markus@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.35 2002/06/24 13:12:23 markus Exp $
d91 1
a91 1
Set a default value for the maximum lifetime of identities added to the agent. 
d99 2
a100 1
Debug mode.  When this option is specified
@


1.36.2.1
log
@Update OpenSSH to version 3.6.1
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.35.2.2 2003/04/03 23:27:12 margarida Exp $
d91 1
a91 1
Set a default value for the maximum lifetime of identities added to the agent.
d99 1
a99 2
Debug mode.
When this option is specified
@


1.36.2.2
log
@upgrade to OpenSSH 3.7
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.39 2003/06/10 09:12:11 jmc Exp $
d136 1
a136 1
There are two main ways to get an agent set up:
a181 5
.Sh SEE ALSO
.Xr ssh 1 ,
.Xr ssh-add 1 ,
.Xr ssh-keygen 1 ,
.Xr sshd 8
d191 5
@


1.36.2.3
log
@upgrade to OpenSSH 3.8upgrade to OpenSSH 3.8upgrade to OpenSSH 3.8
@
text
@@


1.35
log
@the socket name contains ssh-agent's ppid; via mpech@@ from form@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.34 2002/06/22 16:45:29 stevesk Exp $
d47 1
d90 8
@


1.35.2.1
log
@Update to OpenSSH 3.6
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.36 2003/01/21 18:14:36 marc Exp $
a46 1
.Op Fl t Ar life
a88 8
.It Fl t Ar life
Set a default value for the maximum lifetime of identities added to the agent. 
The lifetime may be specified in seconds or in a time format specified in
.Xr sshd 8 .
A lifetime specified for an identity with
.Xr ssh-add 1
overrides this value.
Without this option the default maximum lifetime is forever.
@


1.35.2.2
log
@Update to OpenSSH 3.6.1
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.37 2003/03/28 10:11:43 jmc Exp $
d91 1
a91 1
Set a default value for the maximum lifetime of identities added to the agent.
d99 1
a99 2
Debug mode.
When this option is specified
@


1.35.2.3
log
@upgrade to OpenSSH 3.7
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.39 2003/06/10 09:12:11 jmc Exp $
d136 1
a136 1
There are two main ways to get an agent set up:
a181 5
.Sh SEE ALSO
.Xr ssh 1 ,
.Xr ssh-add 1 ,
.Xr ssh-keygen 1 ,
.Xr sshd 8
d191 5
@


1.34
log
@use process ID vs. pid/PID/process identifier
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.33 2002/06/19 00:27:55 deraadt Exp $
d72 1
a72 1
.Pa /tmp/ssh-XXXXXXXX/agent.<pid> .
d166 1
a166 1
.It Pa /tmp/ssh-XXXXXXXX/agent.<pid>
@


1.33
log
@KNF done automatically while reading....
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.32 2002/06/05 16:08:07 markus Exp $
d154 1
a154 1
environment variable holds the agent's PID.
@


1.32
log
@'-a bind_address' binds the agent to user-specified unix-domain
socket instead of /tmp/ssh-XXXXXXXX/agent.<pid>; ok djm@@ (some time ago).
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.31 2002/02/04 20:41:16 stevesk Exp $
d105 1
a105 1
.Pa $HOME/.ssh/id_dsa 
@


1.31
log
@more sync for default ssh-add identities; ok markus@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.30 2002/02/03 23:22:59 stevesk Exp $
d45 1
d68 5
a143 1
.Pq Pa /tmp/ssh-XXXXXXXX/agent.<pid> ,
@


1.31.2.1
log
@Pull in OpenSSH-3.4
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.35 2002/06/24 13:12:23 markus Exp $
a44 1
.Op Fl a Ar bind_address
a66 5
.It Fl a Ar bind_address
Bind the agent to the unix-domain socket
.Ar bind_address .
The default is
.Pa /tmp/ssh-XXXXXXXX/agent.<ppid> .
d99 1
a99 1
.Pa $HOME/.ssh/id_dsa
d138 1
d149 1
a149 1
environment variable holds the agent's process ID.
d161 1
a161 1
.It Pa /tmp/ssh-XXXXXXXX/agent.<ppid>
@


1.31.2.2
log
@Merge OpenSSH 3.6.1
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.37 2003/03/28 10:11:43 jmc Exp $
a46 1
.Op Fl t Ar life
a88 8
.It Fl t Ar life
Set a default value for the maximum lifetime of identities added to the agent.
The lifetime may be specified in seconds or in a time format specified in
.Xr sshd 8 .
A lifetime specified for an identity with
.Xr ssh-add 1
overrides this value.
Without this option the default maximum lifetime is forever.
d90 1
a90 2
Debug mode.
When this option is specified
@


1.30
log
@ssh-add also adds $HOME/.ssh/id_rsa and $HOME/.ssh/id_dsa now.
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.29 2001/11/19 18:40:46 stevesk Exp $
a156 9
This file should not be readable by anyone but the user.
It is possible to
specify a passphrase when generating the key; that passphrase will be
used to encrypt the private part of this file.
This file is not used by
.Nm
but is normally added to the agent using
.Xr ssh-add 1
at login time.
@


1.29
log
@clarify/state that private keys are not exposed to clients using the agent;
ok markus@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.28 2001/09/05 06:23:07 deraadt Exp $
d97 5
a101 3
adds the
.Pa $HOME/.ssh/identity
file.
@


1.28
log
@avoid first person in manual pages
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.27 2001/08/23 18:02:48 stevesk Exp $
d129 5
@


1.28.2.1
log
@Update to OpenSSH-3.1 on 3.0-stable branch
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.31 2002/02/04 20:41:16 stevesk Exp $
d97 3
a99 5
adds the files
.Pa $HOME/.ssh/id_rsa ,
.Pa $HOME/.ssh/id_dsa 
and
.Pa $HOME/.ssh/identity .
a129 5
The agent will never send a private key over its request channel.
Instead, operations that require a private key will be performed
by the agent, and the result will be returned to the requester.
This way, private keys are not exposed to clients using the agent.
.Pp
d150 9
@


1.28.2.2
log
@Update OpenSSH to version 3.3 (with local changes, configuration files still
living in /etc and privsep user being nobody).
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.28.2.1 2002/03/07 17:37:47 jason Exp $
a44 1
.Op Fl a Ar bind_address
a66 5
.It Fl a Ar bind_address
Bind the agent to the unix-domain socket
.Ar bind_address .
The default is
.Pa /tmp/ssh-XXXXXXXX/agent.<pid> .
d99 1
a99 1
.Pa $HOME/.ssh/id_dsa
d138 1
@


1.28.2.3
log
@There was an update to OpenSSH 3.4, and people rejoiced.
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.28.2.2 2002/06/22 07:23:18 miod Exp $
d72 1
a72 1
.Pa /tmp/ssh-XXXXXXXX/agent.<ppid> .
d154 1
a154 1
environment variable holds the agent's process ID.
d166 1
a166 1
.It Pa /tmp/ssh-XXXXXXXX/agent.<ppid>
@


1.27
log
@fix usage; ok markus@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.26 2001/07/15 16:57:21 stevesk Exp $
d119 3
a121 3
Either you let the agent
start a new subcommand into which some environment variables are exported, or
you let the agent print the needed shell commands (either
@


1.26
log
@-d will not fork; ok markus@@
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.25 2001/06/26 04:07:06 markus Exp $
d45 3
a47 2
.Ar command
.Ar args ...
a49 1
.Nm ssh-agent
a50 2
.Nm ssh-agent
.Fl d
@


1.25
log
@add debug flag
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.24 2001/04/10 09:13:21 itojun Exp $
d88 1
a88 1
will fork.
@


1.24
log
@document id_rsa{.pub,}.  markus ok
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.23 2001/04/02 17:32:23 deraadt Exp $
d51 2
d85 4
@


1.24.2.1
log
@Pull in OpenSSH-2.9.9
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.28 2001/09/05 06:23:07 deraadt Exp $
d45 3
a48 2
.Op Fl d
.Op Ar command Op Ar args ...
a49 1
.Op Fl c Li | Fl s
a82 4
.It Fl d
Debug mode.  When this option is specified
.Nm
will not fork.
d115 3
a117 3
Either the agent starts a new subcommand into which some environment
variables are exported, or the agent prints the needed shell commands
(either
@


1.24.2.2
log
@Merge OpenSSH 3.1, keeping /etc as configuration files directory.
(i.e. OpenSSH 3.1 + openbsd29_3.1.patch)
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.31 2002/02/04 20:41:16 stevesk Exp $
d97 3
a99 5
adds the files
.Pa $HOME/.ssh/id_rsa ,
.Pa $HOME/.ssh/id_dsa 
and
.Pa $HOME/.ssh/identity .
a129 5
The agent will never send a private key over its request channel.
Instead, operations that require a private key will be performed
by the agent, and the result will be returned to the requester.
This way, private keys are not exposed to clients using the agent.
.Pp
d150 9
@


1.23
log
@grammar; slade@@shore.net
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.22 2001/03/02 18:54:31 deraadt Exp $
d145 1
a145 1
Contains the RSA authentication identity of the user.
d156 3
a158 1
Contains the DSA authentication identity of the user.
@


1.22
log
@make copyright lines the same format
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.21 2001/02/08 19:22:38 itojun Exp $
d124 1
a124 1
look at these variables and use them to establish a connection to the agent.
@


1.21
log
@drop references to ssl(8).  markus ok
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.20 2001/01/28 10:24:04 markus Exp $
d13 3
a15 3
.\" Copyright (c) 1999,2000 Markus Friedl. All rights reserved.
.\" Copyright (c) 1999 Aaron Campbell. All rights reserved.
.\" Copyright (c) 1999 Theo de Raadt. All rights reserved.
@


1.20
log
@cleanup AUTHORS sections
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.19 2000/11/15 20:09:01 markus Exp $
d176 1
a176 2
.Xr sshd 8 ,
.Xr ssl 8
@


1.19
log
@typo, use .It
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.18 2000/11/15 19:55:29 markus Exp $
d164 8
a171 25
Tatu Ylonen <ylo@@cs.hut.fi>
.Pp
OpenSSH
is a derivative of the original (free) ssh 1.2.12 release, but with bugs
removed and newer features re-added.
Rapidly after the 1.2.12 release,
newer versions bore successively more restrictive licenses.
This version of OpenSSH
.Bl -bullet
.It
has all components of a restrictive nature (i.e., patents, see
.Xr ssl 8 )
directly removed from the source code; any licensed or patented components
are chosen from
external libraries.
.It
has been updated to support ssh protocol 1.5.
.It
contains added support for
.Xr kerberos 8
authentication and ticket passing.
.It
supports one-time password authentication with
.Xr skey 1 .
.El
@


1.18
log
@reorder SYNOPSIS
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.17 2000/11/10 05:10:40 aaron Exp $
d157 1
a157 1
.Pq Pa /tmp/ssh-XXXXXXXX/agent.<pid> ,
@


1.17
log
@- Section shuffling: comply to the section ordering outlined in mdoc(7).
- Some .Nm trimming.
- .Sh AUTHOR -> .Sh AUTHORS
- Other miscellaneous fixes here and there.
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.16 2000/09/07 20:27:54 deraadt Exp $
d45 3
d49 2
a50 5
.Op Fl k
.Oo
.Ar command
.Op Ar args ...
.Oc
@


1.16
log
@cleanup copyright notices on all files.  I have attempted to be accurate with
the details.  everything is now under Tatu's licence (which I copied from his
readme), and/or the core-sdi bsd-ish thing for deattack, or various openbsd
developers under a 2-term bsd licence.  We're not changing any rules, just
being accurate.
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.15 2000/08/25 16:16:15 deraadt Exp $
d163 1
a163 1
.Sh AUTHOR
@


1.16.2.1
log
@Pull in OpenSSH 2.5.0
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.21 2001/02/08 19:22:38 itojun Exp $
d45 3
d49 2
a50 5
.Ar args ...
.Nm ssh-agent
.Op Fl c Li | Fl s
.Nm ssh-agent
.Fl k
d157 1
a157 1
.It Pa /tmp/ssh-XXXXXXXX/agent.<pid>
d163 26
a188 9
.Sh AUTHORS
OpenSSH is a derivative of the original and free
ssh 1.2.12 release by Tatu Ylonen.
Aaron Campbell, Bob Beck, Markus Friedl, Niels Provos,
Theo de Raadt and Dug Song
removed many bugs, re-added newer features and
created OpenSSH.
Markus Friedl contributed the support for SSH
protocol versions 1.5 and 2.0.
d193 2
a194 1
.Xr sshd 8
@


1.16.2.2
log
@Pull in OpenSSH-2.5.1
@
text
@@


1.16.2.3
log
@Pull in OpenSSH-2.5.2 for 2.8 branch.
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.22 2001/03/02 18:54:31 deraadt Exp $
d13 3
a15 3
.\" Copyright (c) 1999,2000 Markus Friedl.  All rights reserved.
.\" Copyright (c) 1999 Aaron Campbell.  All rights reserved.
.\" Copyright (c) 1999 Theo de Raadt.  All rights reserved.
@


1.16.2.4
log
@Pull in OpenSSH-2.9 to 2.8 branch.
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.24 2001/04/10 09:13:21 itojun Exp $
d124 1
a124 1
looks at these variables and uses them to establish a connection to the agent.
d145 1
a145 1
Contains the protocol version 1 RSA authentication identity of the user.
d156 1
a156 3
Contains the protocol version 2 DSA authentication identity of the user.
.It Pa $HOME/.ssh/id_rsa
Contains the protocol version 2 RSA authentication identity of the user.
@


1.16.2.5
log
@Pull in OpenSSH 2.9.9 to the 2.8 branch.
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.28 2001/09/05 06:23:07 deraadt Exp $
d45 3
a48 2
.Op Fl d
.Op Ar command Op Ar args ...
a49 1
.Op Fl c Li | Fl s
a82 4
.It Fl d
Debug mode.  When this option is specified
.Nm
will not fork.
d115 3
a117 3
Either the agent starts a new subcommand into which some environment
variables are exported, or the agent prints the needed shell commands
(either
@


1.16.2.6
log
@Merge OpenSSH 3.1.
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.31 2002/02/04 20:41:16 stevesk Exp $
d97 3
a99 5
adds the files
.Pa $HOME/.ssh/id_rsa ,
.Pa $HOME/.ssh/id_dsa 
and
.Pa $HOME/.ssh/identity .
a129 5
The agent will never send a private key over its request channel.
Instead, operations that require a private key will be performed
by the agent, and the result will be returned to the requester.
This way, private keys are not exposed to clients using the agent.
.Pp
d150 9
@


1.15
log
@no need for those dynamic libraries anymore
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.14 2000/08/19 21:34:43 markus Exp $
d3 3
a5 1
.\"  -*- nroff -*-
d7 5
a11 1
.\" ssh-agent.1
d13 3
a15 1
.\" Author: Tatu Ylonen <ylo@@cs.hut.fi>
d17 8
a24 2
.\" Copyright (c) 1995 Tatu Ylonen <ylo@@cs.hut.fi>, Espoo, Finland
.\"                    All rights reserved
d26 10
a35 1
.\" Created: Sat Apr 23 20:10:43 1995 ylo
@


1.14
log
@add SSH2/DSA support to the agent and some other DSA related cleanups.
(note that we cannot talk to ssh.com's ssh2 agents)
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.13 2000/07/06 04:06:56 aaron Exp $
a165 4
.Pp
The libraries described in
.Xr ssl 8
are required for proper operation.
@


1.13
log
@Insert more missing .El directives. Our troff really should identify these and
spit out a warning.
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.12 2000/05/03 18:04:39 markus Exp $
d30 2
a31 1
is a program to hold private keys used for RSA authentication.
d38 1
a38 1
and automatically used for RSA authentication when logging in to other
d132 3
a134 1
.It Pa /tmp/ssh-XXXX/agent.<pid> ,
@


1.12
log
@more doc on: DSA, id_dsa, known_hosts2, authorized_keys2
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.11 2000/04/12 21:47:50 aaron Exp $
d136 1
@


1.12.2.1
log
@Pull in the rest of openssh-2.2.0 to 2.7 branch (luvin' cvs...)
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.15 2000/08/25 16:16:15 deraadt Exp $
d30 1
a30 2
is a program to hold private keys used for public key authentication
(RSA, DSA).
d37 1
a37 1
and automatically used for authentication when logging in to other
d131 1
a131 3
.It Pa $HOME/.ssh/id_dsa
Contains the DSA authentication identity of the user.
.Pq Pa /tmp/ssh-XXXXXXXX/agent.<pid> ,
a135 1
.El
d162 4
@


1.12.2.2
log
@openssh-2.3.0 (again) for 2.7 branch
@
text
@d1 5
a5 1
.\" $OpenBSD: ssh-agent.1,v 1.16 2000/09/07 20:27:54 deraadt Exp $
d8 1
d12 1
a12 29
.\" As far as I am concerned, the code I have written for this software
.\" can be used freely for any purpose.  Any derived versions of this
.\" software must be clearly marked as such, and if the derived work is
.\" incompatible with the protocol description in the RFC file, it must be
.\" called by a name other than "ssh" or "Secure Shell".
.\"
.\" Copyright (c) 1999,2000 Markus Friedl. All rights reserved.
.\" Copyright (c) 1999 Aaron Campbell. All rights reserved.
.\" Copyright (c) 1999 Theo de Raadt. All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
@


1.12.2.3
log
@OpenSSH-2.5.1 for 2.7 patch branch
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.21 2001/02/08 19:22:38 itojun Exp $
d45 3
d49 2
a50 5
.Ar args ...
.Nm ssh-agent
.Op Fl c Li | Fl s
.Nm ssh-agent
.Fl k
d157 1
a157 1
.It Pa /tmp/ssh-XXXXXXXX/agent.<pid>
d163 26
a188 9
.Sh AUTHORS
OpenSSH is a derivative of the original and free
ssh 1.2.12 release by Tatu Ylonen.
Aaron Campbell, Bob Beck, Markus Friedl, Niels Provos,
Theo de Raadt and Dug Song
removed many bugs, re-added newer features and
created OpenSSH.
Markus Friedl contributed the support for SSH
protocol versions 1.5 and 2.0.
d193 2
a194 1
.Xr sshd 8
@


1.12.2.4
log
@Pull in OpenSSH-2.5.2 for 2.7 branch.
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.22 2001/03/02 18:54:31 deraadt Exp $
d13 3
a15 3
.\" Copyright (c) 1999,2000 Markus Friedl.  All rights reserved.
.\" Copyright (c) 1999 Aaron Campbell.  All rights reserved.
.\" Copyright (c) 1999 Theo de Raadt.  All rights reserved.
@


1.11
log
@Trailing whitespace begone!
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.10 2000/03/23 21:10:10 aaron Exp $
d30 1
a30 1
is a program to hold authentication private keys.
@


1.10
log
@Fix some formatting problems I missed before.
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.9 2000/01/22 02:17:50 aaron Exp $
d21 1
a21 1
.Nm ssh-agent 
d28 1
a28 1
.Sh DESCRIPTION 
d67 1
a67 1
When executed without arguments, 
d69 1
a69 1
adds the 
d72 1
a72 1
If the identity has a passphrase, 
d155 1
a155 1
contains added support for 
@


1.9
log
@ie. -> i.e.,
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.8 1999/11/16 23:59:21 deraadt Exp $
d30 2
a31 2
is a program to hold authentication private keys.  The
idea is that
d35 2
a36 1
program.  Through use of environment variables the agent can be located
d64 2
a65 2
The agent initially does not have any private keys.  Keys are added
using
d71 2
a72 1
file.  If the identity has a passphrase, 
d75 3
a77 2
under X11, or from the terminal if running without X).  It then sends
the identity to the agent.  Several identities can be stored in the
d83 2
a84 1
terminal.  Authentication data need not be stored on any other
d90 2
a91 1
There are two main ways to get an agent setup:  Either you let the agent
d107 2
a108 1
variable.  The socket is made accessible only to the current user.
d121 3
a123 2
Contains the RSA authentication identity of the user.  This file
should not be readable by anyone but the user.  It is possible to
d125 2
a126 2
used to encrypt the private part of this file.  This file
is not used by
d133 3
a135 3
authentication agent.  These sockets should only be readable by the
owner.  The sockets should get automatically removed when the agent
exits.
d141 4
a144 3
removed and newer features re-added.   Rapidly after the 1.2.12 release,
newer versions bore successively more restrictive licenses.  This version
of OpenSSH
@


1.8
log
@typo
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.7 1999/10/28 08:43:10 markus Exp $
d139 1
a139 1
has all components of a restrictive nature (ie. patents, see
@


1.7
log
@from niklas: Add -c -s and -k support, Create socket early to avoid race,
Don't let child access std{in,out,err}
@
text
@d1 1
a1 1
.\" $OpenBSD: ssh-agent.1,v 1.6 1999/10/17 00:31:06 deraadt Exp $
d8 1
a8 1
pp.\"
@


1.6
log
@update trailer, and copy to other pages
@
text
@d1 2
d8 1
a8 1
.\"
a13 2
.\" $Id: ssh-agent.1,v 1.5 1999/10/16 20:47:14 markus Exp $
.\"
d22 3
d26 2
d34 3
a36 6
all other windows or programs are started as children of the ssh-agent
program (the
.Ar command
normally starts X or is the user shell).  Programs started under
the agent inherit a connection to the agent, and the agent is
automatically used for RSA authentication when logging to other
d40 23
d86 11
a96 1
A connection to the agent is inherited by child programs:
d98 1
a98 1
.Pq Pa /tmp/ssh-XXXX/agent.<pid> ,
d105 4
@


1.5
log
@support for SSH protocol 1.5 which is poorly documented, the RFC.troff lies.
interops (x11,agent,etc) with 1.2.27 and protocol 1.3
@
text
@d12 1
a12 1
.\" $Id: ssh-agent.1,v 1.4 1999/10/14 18:17:42 markus Exp $
d93 24
a116 8
This version of
.Nm
is a derivative of the original 1.2.12 release, but with bugs removed and
newer features re-added.   Rapidly after the 1.2.12 release, newer versions
bore successively more restrictive licenses.  In this version, all components
of a restrictive nature (ie. patents) have been directly removed from the
source code; any licensed or patented components are chosen from external
libraries.  The libraries described in
@


1.4
log
@fix old connect() race security-bug for ssh-agent and agent-forwarding
by removing the connect() junk, with the following restrictions:
1) change the version to "OpenSSH-1.1":
   agent-forwarding will work only between OpenSSH-1.1 client and
   OpenSSH-1.1 server
2) renamed the environment variable of OpenSSH-1.1 to
   "SSH_AUTH_SOCKET", since useing OpenSSH-1.0 ssh-add against the new
   ssh-agent does not work
@
text
@d12 1
a12 1
.\" $Id: ssh-agent.1,v 1.3 1999/10/02 13:10:26 deraadt Exp $
d65 1
a65 1
.Ev SSH_AUTH_SOCKET
@


1.3
log
@detail how we manage to not include RSA, and point people at ssl(8)
@
text
@d12 1
a12 1
.\" $Id: ssh-agent.1,v 1.2 1999/09/26 22:30:06 deraadt Exp $
d61 3
a63 14
A connection to the agent is inherited by child programs. 
There are two alternative
methods for inheriting the agent.  The preferred method is to have an
open file descriptor which is inherited, and have an environment
variable
.Pq Ev SSH_AUTHENTICATION_FD
contain the number of this
descriptor.  This restricts access to the authentication agent to only
those programs that are siblings of the agent, and it is fairly
difficult even for root to get unauthorized access to the agent.
.Pp
On some machines, an alternative method is used.  A unix-domain
socket is created
.Pq Pa /tmp/ssh_agent.* ,
d65 1
a65 1
.Ev SSH_AUTHENTICATION_SOCKET
d69 1
a69 2
user.  The socket is only used if ssh is unable to find a file
descriptor that would not be closed by shells.
d85 1
a85 1
.It Pa /tmp/ssh_agent.<pid>
@


1.2
log
@first cut of mandoc man pages from aaron
@
text
@d12 1
a12 1
.\" $Id: ssh-agent.1,v 1.2 1999/05/04 11:59:13 bg Exp $
d104 11
d119 2
a120 1
.Xr sshd 8
@


1.1
log
@i bet a lot of people didn't know what ssh 1.2.16 had a nice license.
well, except for the patent issues.  someone in sweden (forget their
name at the moment) cleaned out most of the patented code, and now
this code removes rsa code.  when this is done, it will link against
libssl, but the work isn't completely done yet.  then we need to bring
this up to modern days, featurewise.
@
text
@d14 11
a24 13
.TH SSH-AGENT 1 "November 8, 1995" "SSH" "SSH"

.SH NAME
ssh-agent \- authentication agent

.SH SYNOPSIS
.LP
.B ssh-agent 
.I command

.SH DESCRIPTION 
.LP
.B Ssh-agent 
d27 1
a27 1
.B ssh-agent
d31 1
a31 1
.IR command
d36 2
a37 2
.B ssh.
.LP
d40 1
a40 1
.B ssh-add.
d42 1
a42 1
.B ssh-add
d44 1
a44 1
.I \&$HOME/\s+2.\s0ssh/identity
d46 1
a46 1
.B ssh-add
d51 1
a51 1
.B "Ssh-add \-l
d53 1
a53 1
.LP
d57 1
a57 2
However, the connection to the agent is forwarded over
.B ssh
d60 1
a60 1
.LP
d65 3
a67 1
variable (\fB\s-1SSH_AUTHENTICATION_FD\s0\fR) contain the number of this
d71 1
a71 1
.LP
d73 4
a76 3
socket is created (\fI/tmp/ssh_agent.*\fR), and the name of this
socket is stored in the 
.B \s-1SSH_AUTHENTICATION_SOCKET\s0
d82 1
a82 1
.LP
d85 3
a87 4

.SH FILES
.TP
.I \&$HOME/\s+2.\s0ssh/identity
d93 1
a93 1
.B ssh-agent,
d95 1
a95 1
.B ssh-add
d97 1
a97 2
.TP
.I \&/tmp/ssh_agent.<pid>
d102 1
a102 3

.SH AUTHOR
.LP
d104 5
a108 6

.SH SEE ALSO
.BR ssh-add (1),
.BR ssh-keygen (1),
.BR ssh (1),
.BR sshd (8)
@

