head	1.7;
access;
symbols
	OPENBSD_6_2:1.7.0.12
	OPENBSD_6_2_BASE:1.7
	OPENBSD_6_1:1.7.0.14
	OPENBSD_6_1_BASE:1.7
	OPENBSD_6_0:1.7.0.10
	OPENBSD_6_0_BASE:1.7
	OPENBSD_5_9:1.7.0.6
	OPENBSD_5_9_BASE:1.7
	OPENBSD_5_8:1.7.0.8
	OPENBSD_5_8_BASE:1.7
	OPENBSD_5_7:1.7.0.2
	OPENBSD_5_7_BASE:1.7
	OPENBSD_5_6:1.7.0.4
	OPENBSD_5_6_BASE:1.7
	OPENBSD_5_5:1.6.0.10
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.6.0.6
	OPENBSD_5_4_BASE:1.6
	OPENBSD_5_3:1.6.0.4
	OPENBSD_5_3_BASE:1.6
	OPENBSD_5_2:1.6.0.2
	OPENBSD_5_2_BASE:1.6;
locks; strict;
comment	@# @;


1.7
date	2014.04.16.10.31.27;	author zhuk;	state Exp;
branches;
next	1.6;

1.6
date	2012.07.13.11.56.12;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2012.07.12.17.07.12;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2012.07.08.10.42.25;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2012.07.08.10.12.19;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2012.06.24.13.44.53;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2012.06.19.09.30.44;	author espie;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Make directory ordering in our libtool stable. Fixes quiet a few issues
ajacoutot@@, me and probably others were seeing. No fallout in bulk build.

Input from espie@@ and ajacoutot@@.
Prodding by ajacoutot@@
Bulk test by jasper@@
@
text
@# $OpenBSD: Makefile,v 1.6 2012/07/13 11:56:12 espie Exp $

.include <bsd.own.mk>

MAN=libtool.1
NOPROG= 

PACKAGES= \
    LT/Archive.pm \
    LT/Exec.pm \
    LT/Getopt.pm \
    LT/LaFile.pm \
    LT/LaLoFile.pm \
    LT/Library.pm \
    LT/LoFile.pm \
    LT/Mode/Compile.pm \
    LT/Mode/Install.pm \
    LT/Mode/Link.pm \
    LT/Mode/Link/Program.pm \
    LT/Mode/Link/Library.pm \
    LT/Program.pm \
    LT/Trace.pm \
    LT/UList.pm \
    LT/Util.pm

LIBBASE=/usr/libdata/perl5

realinstall: 
.for d in LT LT/Mode LT/Mode/Link
	${INSTALL} -d -o ${LIBOWN} -g ${LIBGRP} -m ${DIRMODE} \
		${DESTDIR}${LIBBASE}/$d
.endfor
.for i in ${PACKAGES}
	${INSTALL} ${INSTALL_COPY} -o ${LIBOWN} -g ${LIBGRP} -m ${LIBMODE} \
		${.CURDIR}/$i ${DESTDIR}${LIBBASE}/$i
.endfor
	${INSTALL} ${INSTALL_COPY} -o ${BINOWN} -g ${BINGRP} -m ${BINMODE} \
		${.CURDIR}/libtool ${DESTDIR}${BINDIR}/libtool

.include <bsd.prog.mk>
@


1.6
log
@move stuff around some more, do not load link parts unless we are actually
linking.

(and always load basic linker class when we're actually linking)


Start making a proper "library stash class".
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2012/07/12 17:07:12 espie Exp $
d23 1
@


1.5
log
@okay, now the parser module is totally part of Mode/Link.pm, no reason
for a separate file
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2012/07/08 10:42:25 espie Exp $
a14 1
    LT/Linker.pm \
d19 2
d28 1
d30 2
a31 3
		${DESTDIR}${LIBBASE}/LT
	${INSTALL} -d -o ${LIBOWN} -g ${LIBGRP} -m ${DIRMODE} \
		${DESTDIR}${LIBBASE}/LT/Mode
@


1.4
log
@a few big changes
- start using our options parser for main libtool options
- put link related stuff into their own module.
Long term, some unification should happen.
- shortdie for cases where we  know libtool is not at fault.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2012/07/08 10:12:19 espie Exp $
a19 1
    LT/Parser.pm \
@


1.3
log
@specialized option handler that will make things simpler
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2012/06/24 13:44:53 espie Exp $
d15 1
@


1.2
log
@clean-up the mess: move modes into separate files,
this makes dependencies more apparent.
This should also speed libtool up a bit, since it won't load all the code
all the time, but only the parts that are actually needed (to wit "compile
mode" which is much smaller).

okay jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1 2012/06/19 09:30:44 espie Exp $
d11 1
@


1.1
log
@add libtool to base, okay deraadt@@, jasper@@, millert@@...
(as requested by matthieu@@ so we can work on xenocara).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2012/06/11 10:16:46 espie Exp $
d15 3
d28 2
@

