head	1.2;
access;
symbols
	LESS_444:1.1.1.2
	LESS_381:1.1.1.1
	MARK_NUDELMAN:1.1.1;
locks; strict;
comment	@ * @;


1.2
date	2003.04.14.14.33.57;	author millert;	state dead;
branches;
next	1.1;

1.1
date	2003.04.13.18.21.22;	author millert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.04.13.18.21.22;	author millert;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2011.09.16.17.47.06;	author shadchin;	state Exp;
branches;
next	;


desc
@@


1.2
log
@o go back to using a help file instead of embedding it in the binary
o deal with HELPFILE not being defined
o add a SMALL definition to make a smaller less for the boot floppies
This still needs to be pared down a bit for the SMALL case
@
text
@/*
 * Copyright (C) 1984-2002  Mark Nudelman
 *
 * You may distribute under the terms of either the GNU General Public
 * License or the Less License, as specified in the README file.
 *
 * For more information about less, or for information on how to 
 * contact the author, see the README file.
 */


/*
 * Silly little program to generate the help.c source file
 * from the less.hlp text file.
 * help.c just contains a char array whose contents are 
 * the contents of less.hlp.
 */

#include <stdio.h>

	int
main(argc, argv)
	int argc;
	char *argv[];
{
	int ch;
	int prevch;

	printf("/* This file was generated by mkhelp from less.hlp */\n");
	printf("#include \"less.h\"\n");
	printf("constant char helpdata[] = {\n");
	ch = 0;
	while (prevch = ch, (ch = getchar()) != EOF)
	{
		switch (ch)
		{
		case '\'':
			printf("'\\'',");
			break;
		case '\\':
			printf("'\\\\',");
			break;
		case '\b':
			printf("'\\b',");
			break;
		case '\t':
			printf("'\\t',");
			break;
		case '\n':
			if (prevch != '\r') 
				printf("'\\n',\n");
			break;
		case '\r':
			if (prevch != '\n') 
				printf("'\\n',\n");
			break;
		default:
			if (ch >= ' ' && ch < 0x7f)
				printf("'%c',", ch);
			else
				printf("0x%02x,", ch);
			break;
		}
	}
	/* Add an extra null char to avoid having a trailing comma. */
	printf(" 0 };\n");
	printf("constant int size_helpdata = sizeof(helpdata) - 1;\n");
	return (0);
}
@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@Stock less-390 with some unneeded DOS/Windoze files removed
@
text
@@


1.1.1.2
log
@Import of Less 444

ok nicm@@
@
text
@d2 1
a2 1
 * Copyright (C) 1984-2011  Mark Nudelman
@

