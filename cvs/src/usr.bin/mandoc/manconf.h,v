head	1.4;
access;
symbols
	OPENBSD_6_0:1.2.0.4
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.2
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.1.0.4
	OPENBSD_5_8_BASE:1.1;
locks; strict;
comment	@ * @;


1.4
date	2017.02.10.15.44.31;	author schwarze;	state Exp;
branches;
next	1.3;
commitid	jWIgaURhUN1Qo7t2;

1.3
date	2017.01.27.13.47.17;	author schwarze;	state Exp;
branches;
next	1.2;
commitid	MgmMgxX5WBbY1YFd;

1.2
date	2015.11.07.13.57.55;	author schwarze;	state Exp;
branches;
next	1.1;
commitid	UKwSq7JMt0q6KNpK;

1.1
date	2015.03.27.17.36.56;	author schwarze;	state Exp;
branches;
next	;
commitid	3WUgQM2C53CGXRkK;


desc
@@


1.4
log
@In -Ttree output mode, show the BROKEN node flag and
provide a -Onoval output option to show the unvalidated tree.
@
text
@/*	$OpenBSD: manconf.h,v 1.3 2017/01/27 13:47:17 schwarze Exp $	*/
/*
 * Copyright (c) 2011, 2015 Ingo Schwarze <schwarze@@openbsd.org>
 * Copyright (c) 2011 Kristaps Dzonsons <kristaps@@bsd.lv>
 *
 * Permission to use, copy, modify, and distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHORS DISCLAIM ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHORS BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 */

/* List of unique, absolute paths to manual trees. */

struct	manpaths {
	char	**paths;
	size_t	  sz;
};

/* Data from -O options and man.conf(5) output directives. */

struct	manoutput {
	char	 *includes;
	char	 *man;
	char	 *paper;
	char	 *style;
	size_t	  indent;
	size_t	  width;
	int	  fragment;
	int	  mdoc;
	int	  synopsisonly;
	int	  noval;
};

struct	manconf {
	struct manoutput	  output;
	struct manpaths		  manpath;
};


void	 manconf_parse(struct manconf *, const char *, char *, char *);
int	 manconf_output(struct manoutput *, const char *, int);
void	 manconf_free(struct manconf *);
@


1.3
log
@warn about invalid output options
and error out if they occur on the command line;
missing feature found in the TODO file
@
text
@d1 1
a1 1
/*	$OpenBSD: manconf.h,v 1.2 2015/11/07 13:57:55 schwarze Exp $	*/
d38 1
@


1.2
log
@In private header files, __BEGIN_DECLS and __END_DECLS are pointless.
Because these work slightly differently on different systems,
they are becoming a maintenance burden in the portable version,
so delete them.

Besides, one of the chief design goals of the mandoc toolbox is to
make sure that nothing related to documentation requires C++.
Consequently, linking mandoc against any kind of C++ program would
defeat the purpose and is not supported.
I don't understand why kristaps@@ added them in the first place.
@
text
@d1 1
a1 1
/*	$OpenBSD: manconf.h,v 1.1 2015/03/27 17:36:56 schwarze Exp $	*/
d47 1
a47 1
void	 manconf_output(struct manoutput *, const char *);
@


1.1
log
@Parse the new man.conf(5) "output" directive.
The next step will be to actually use the parsed data.
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
a44 1
__BEGIN_DECLS
a48 2

__END_DECLS
@

