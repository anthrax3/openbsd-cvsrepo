head	1.7;
access;
symbols
	OPENBSD_4_7:1.5.0.2
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.2.0.4
	OPENBSD_4_6_BASE:1.2;
locks; strict;
comment	@.\" @;


1.7
date	2010.06.06.20.30.08;	author schwarze;	state dead;
branches;
next	1.6;

1.6
date	2010.05.14.01.54.37;	author schwarze;	state Exp;
branches;
next	1.5;

1.5
date	2009.08.22.16.32.22;	author schwarze;	state Exp;
branches;
next	1.4;

1.4
date	2009.07.26.00.56.53;	author schwarze;	state Exp;
branches;
next	1.3;

1.3
date	2009.07.07.00.27.10;	author schwarze;	state Exp;
branches;
next	1.2;

1.2
date	2009.06.14.23.00.57;	author schwarze;	state Exp;
branches;
next	1.1;

1.1
date	2009.04.06.20.30.40;	author kristaps;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Merge bsd.lv version 1.10.1 (to be released soon).

The main step forward is that this now has *much* better .Bl -column
support, now supporting many manuals that previously errored out
without producing any output.

Other fixes include:
* do not die from multiple list types, use the first and warn
* in .Bl without a type, default to -item
* various tweaks to .Dt
* fix .In, .Fd, .Ft, .Fn and .Fo formatting
* some documentation fixes and additions
* and fix a couple of bugs reported by Ulrich Spoerlein:
* better support for roff block-end "\}" without a preceding dot
* .In must not break the line outside SYNOPSIS
* spelling in some error messages

While merging, fix one regression in .In spacing
that needs to go to bsd.lv, too.
@
text
@.\"	$Id: manuals.7,v 1.6 2010/05/14 01:54:37 schwarze Exp $
.\"
.\" Copyright (c) 2009 Kristaps Dzonsons <kristaps@@bsd.lv>
.\"
.\" Permission to use, copy, modify, and distribute this software for any
.\" purpose with or without fee is hereby granted, provided that the above
.\" copyright notice and this permission notice appear in all copies.
.\"
.\" THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
.\" WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
.\" MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
.\" ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
.\" WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
.\" ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
.\" OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
.\"
.Dd $Mdocdate: May 14 2010 $
.Dt MANUALS 7
.Os
.\" SECTION
.Sh NAME
.Nm Writing UNIX Documentation
.Nd a guide to writing UNIX manuals
.\" SECTION
.Sh DESCRIPTION
.Em A utility without good documentation is of no utility at all .
.\" PARAGRAPH
.Pp
A system component's documentation describes the utility of that
component, whether it's a device driver, an executable or, most
importantly, a game.
.Pp
This document serves as a tutorial to writing
.Ux
documentation
.Pq Dq manuals .
.\" SECTION
.Sh ENVIRONMENT
First, copy over the manual template from
.Pa /usr/share/misc/mdoc.template
into your source directory.
.Pp
.Dl % cp /usr/share/misc/mdoc.template \.
.Pp
.Em \&Do not
start afresh or by copying another manual unless you know exactly what
you're doing!  If the template doesn't exist, bug your administrator.
.\" SUBSECTION
.Ss Section Numbering
Find an appropriate section for your manual.  There may exist multiple
manual names per section, so be specific:
.Pp
.\" LIST
.Bl -tag -width "XXXXXXXXXXXX" -offset indent -compact
.It Em Section
.Em Description
.It 1
operator utilities
.It 2
system calls
.It 3, 3p, 3f
programming libraries (C, Perl, Fortran)
.It 5
file and wire protocol formats
.It 6
games
.It 7
tutorials, documents and papers
.It 8
administrator utilities
.It 9
in-kernel routines
.El
.Pp
If your manual falls into multiple categories, choose the most
widely-used or, better, re-consider the topic of your manual to be more
specific.  You can list all manuals per section by invoking
.Xr apropos 1 ,
then provide the
.Fl s
flag to
.Xr man 1
to see the specific section manual (section 1, in this example):
.\" DISPLAY
.Bd -literal -offset indent
% apropos myname
myname (1) - utility description
myname (3) - library description
% man \-s 1 myname
.Ed
.\" SUBSECTION
.Ss Naming
Name your component.  Be terse, erring on the side of clarity.  Look for
other manuals by that same name before committing:
.Pp
.Dl % apropos myname
.Pp
Manual files are named
.Pa myname.mysection ,
such as
.Pa manuals.7
for this document.  Rename the template file:
.Pp
.Dl % mv mdoc.template myname.mysection
.\" SUBSECTION
.Ss Development Tools
While writing, make sure that your manual is correctly structured:
.Pp
.Dl % mandoc \-Tlint \-Wall \-fstrict name.1
.Pp
The quick-fix feature of
.Xr vim 1
is useful for checking over many manuals:
.Bd -literal -offset indent
% mandoc \-Wall \-fstrict \-Tlint \-fign-errors \e
  ./path/to/manuals/* 2>&1 > /tmp/mandoc.errs
% vim -q /tmp/mandoc.errs
.Ed
.Pp
You may spell-check your work as follows:
.Pp
.Dl % deroff name.1 | spell
.Pp
If
.Xr ispell 1
is installed, it has a special mode for manuals:
.Pp
.Dl % ispell \-n name.1
.Pp
Use
.Xr cvs 1
or
.Xr rcs 1
to version-control your work.  If you wish the last check-in to effect
your document's date, use the following RCS tag for the date macro:
.Pp
.Dl \&.Dd $Mdocdate: May 14 2010 $
.\" SUBSECTION
.Ss Viewing
mdoc documents may be paged to your terminal with
.Xr mandoc 1 .
If you plan on distributing your work to systems without this tool,
check it against
.Xr groff 1 :
.Bd -literal -offset indent
% mandoc \-Wall name.1 2>&1 | less
% groff -mandoc name.1 2>&1 | less
.Ed
.\" SUBSECTION
.Ss Automation
Consider adding your mdoc documents to
.Xr make 1
Makefiles in order to automatically check your input:
.Bd -literal -offset indent
\&.SUFFIXES: .1 .in

\&.in.1:
	mandoc -Wall,error -Tlint $<
	cp -f $< $@@
.Ed
.\" SUBSECTION
.Ss Licensing
Your manual must have a license.  It should be listed at the start of
your document, just as in source code.
.\" SECTION
.Sh COMPOSITION
Manuals should
.Em always
be written in the
.Xr mdoc 7
formatting language.
.\" PARAGRAPH
.Pp
Open the template you've copied into
.Pa myname.mysection
and begin editing.
.\" SUBSECTION
.Ss Language
.Bl -enum
.It
Use clear, concise language.  Favour simplicity.
.It
Write your manual in non-idiomatic English.  Don't worry about
Commonwealth or American spellings \(em just correct ones.
.It
Spell-check your manual, keeping in mind short-letter terms (
.Xr iwi 4
vs.
.Xr iwn 4 ) .
.It
If you absolutely must use special characters (diacritics, mathematical
symbols and so on), use the escapes dictated in
.Xr mdoc 7 .
.El
.\" SUBSECTION
.Ss Style
The structure of the mdoc language makes it very hard to have any
particular format style.  Keep your lines under 72 characters in length.
If you must have long option lines, use
.Sq \&Oo/Oc .
The same goes for function prototypes.
.Em \&Do not
use
.Sq \&Xo/Xc .
Find another way to structure your line.
.\" SUBSECTION
.Ss References
Other components may be referenced with the
.Sq \&Xr
and
.Sq \&Sx
macros.  Make sure that these exist.  If you intend to distribute your
manual, make sure
.Sq \&Xr
references are valid across systems (within reason).  If you cross-link with
.Sq \&Sx ,
make sure that the section reference exists.
.\" SUBSECTION
.Ss Citations
Cite your work.  If your system references standards documents or other
publications, please use the
.Sq \&Rs/Re
block macros.
.\" SUBSECTION
.Ss Formatting
.Em Don't style your manual .
Give it meaningful content.  The front-end will worry about formatting
and style.
.\" SECTION
.Sh MAINTENANCE
As your component changes and bugs are fixed, your manual may become out
of date.  You may be tempted to use tools like Doxygen to automate the
development of your manuals.  Don't.
.Pp
.Em Manuals are part of a system component :
if you modify your code or specifications, modify the documentation.
@


1.6
log
@merge 1.9.24, keeping local patches; some changes:
* preserve multiple consecutive space characters in input
* do not restrict .Cd and .Rv to certain sections (requested by Joerg)
* do not run lookup() on quoted words
* enum return types for mdoc_args and mdoc_argv
* fix auto-closing of LINK tag in -Txhtml (from Daniel Friesel)
* various lint and manual fixes
@
text
@d1 1
a1 1
.\"	$Id: manuals.7,v 1.5 2009/08/22 16:32:22 schwarze Exp $
d17 1
a17 1
.Dd $Mdocdate: August 22 2009 $
d137 1
a137 1
.Dl \&.Dd $Mdocdate: August 22 2009 $
@


1.5
log
@sync to 1.8.5: add "vim -q" tip (from uqs at spoerlein dot net)
@
text
@d1 1
a1 1
.\"	$Id: manuals.7,v 1.4 2009/07/26 00:56:53 schwarze Exp $
d3 1
a3 1
.\" Copyright (c) 2009 Kristaps Dzonsons <kristaps@@kth.se>
d17 1
a17 1
.Dd $Mdocdate: July 26 2009 $
d137 1
a137 1
.Dl \&.Dd $Mdocdate: July 26 2009 $
@


1.4
log
@sync to 1.8.1: small clarity updates;
while here, strip trailing white space
@
text
@d1 1
a1 1
.\"	$Id: manuals.7,v 1.3 2009/07/07 00:27:10 schwarze Exp $
d17 1
a17 1
.Dd $Mdocdate$
d109 10
a118 1
.Dl % mandoc \-Tlint \-Wall name.1
d137 1
a137 1
.Dl \&.Dd $Mdocdate: July 7 2009 $
@


1.3
log
@sync to 1.7.21: kristaps@@ seems to prefer British spelling...
@
text
@d1 1
a1 1
.\"	$Id: manuals.7,v 1.2 2009/06/14 23:00:57 schwarze Exp $
d16 2
a17 2
.\" 
.Dd $Mdocdate: June 14 2009 $
d31 1
a31 1
importantly, a game.  
d33 2
a34 2
This document serves as a tutorial to writing 
.Ux 
d38 2
a39 2
.Sh COMPOSITION
First, copy over the manual template from 
d69 1
a69 1
.It 8 
d98 1
a98 1
Manual files are named 
a105 30
.Ss Input Language
Manuals should 
.Em always 
be written in the
.Xr mdoc 7
formatting language.
.Pp
There exist other documentation-specific languages, such as the
historical
.Xr man 7
package of 
.Xr roff 7 ;
newer languages such as DocBook or texinfo; or even ad-hoc conventions
such as README files.  
.Em Avoid these formats .
.Pp
There are two canonical references for writing mdoc.  Read them.
.Pp
.\" LIST
.Bl -tag -width XXXXXXXXXXXXXXXX -offset indent -compact
.It Xr mdoc 7
formal language reference
.It Xr mdoc.samples 7
macro reference
.El
.Pp
Open the template you've copied into
.Pa myname.mysection
and begin editing.
.\" SUBSECTION
d115 1
a115 1
If 
d121 1
a121 1
Use 
d128 1
a128 1
.Dl \&.Dd $Mdocdate: June 14 2009 $
d131 1
a131 1
mdoc documents may be paged to your terminal with 
d142 1
a142 1
Consider adding your mdoc documents to 
d157 4
a160 2
.Sh BEST PRACTICES
The
d162 6
a167 6
and 
.Xr mdoc.samples 7
files are indispensable in guiding composition.  In this section, we
introduce some 
.Ux
manual best practises:
d170 1
a170 1
.Bl -enum 
d190 1
a190 1
If you must have long option lines, use 
d194 1
a194 1
use 
d198 1
a198 1
.Ss References 
@


1.2
log
@sync to 1.7.16: comments, whitespace and spelling fixes; no functional change
@
text
@d1 1
a1 1
.\"	$Id: manuals.7,v 1.14 2009/06/10 20:18:43 kristaps Exp $
d17 1
a17 1
.Dd $Mdocdate$
d158 1
a158 1
.Dl \&.Dd $Mdocdate$
d195 1
a195 1
manual best practices:
@


1.1
log
@Initial check-in of mandoc for formatting manuals. ok deraadt@@
@
text
@d1 1
a1 1
.\" $Id: manuals.7,v 1.11 2009/04/03 13:17:26 kristaps Exp $
d3 1
a3 1
.\" Copyright (c) 2009 Kristaps Dzonsons <kristaps@@openbsd.org>
d6 2
a7 3
.\" purpose with or without fee is hereby granted, provided that the
.\" above copyright notice and this permission notice appear in all
.\" copies.
d9 7
a15 8
.\" THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
.\" WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED
.\" WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
.\" AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
.\" DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
.\" PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
.\" TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
.\" PERFORMANCE OF THIS SOFTWARE.
d18 1
a18 1
.Dt manuals 7
@

