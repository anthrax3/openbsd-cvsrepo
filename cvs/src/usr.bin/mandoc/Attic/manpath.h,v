head	1.7;
access;
symbols
	OPENBSD_5_7:1.6.0.2
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.4.0.8
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.6
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.2
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.3.0.6
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.4
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.2;
locks; strict;
comment	@ * @;


1.7
date	2015.03.27.17.36.56;	author schwarze;	state dead;
branches;
next	1.6;
commitid	3WUgQM2C53CGXRkK;

1.6
date	2014.11.28.19.25.03;	author schwarze;	state Exp;
branches;
next	1.5;
commitid	1m1y3OocNVYDnyZE;

1.5
date	2014.11.27.14.31.29;	author deraadt;	state Exp;
branches;
next	1.4;
commitid	je75OeVgCvwQD2St;

1.4
date	2013.05.29.23.15.11;	author schwarze;	state Exp;
branches;
next	1.3;

1.3
date	2011.12.19.02.26.33;	author schwarze;	state Exp;
branches;
next	1.2;

1.2
date	2011.12.12.01.59.13;	author schwarze;	state Exp;
branches;
next	1.1;

1.1
date	2011.11.26.16.41.35;	author schwarze;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Parse the new man.conf(5) "output" directive.
The next step will be to actually use the parsed data.
@
text
@/*	$OpenBSD: manpath.h,v 1.6 2014/11/28 19:25:03 schwarze Exp $ */
/*
 * Copyright (c) 2011 Ingo Schwarze <schwarze@@openbsd.org>
 * Copyright (c) 2011 Kristaps Dzonsons <kristaps@@bsd.lv>
 *
 * Permission to use, copy, modify, and distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 */

/*
 * Unsorted list of unique, absolute paths to be searched for manual
 * databases.
 */
struct	manpaths {
	size_t	  sz;
	char	**paths;
};

__BEGIN_DECLS

void	 manpath_manconf(struct manpaths *, const char *);
void	 manpath_parse(struct manpaths *, const char *, char *, char *);
void	 manpath_free(struct manpaths *);

__END_DECLS
@


1.6
log
@Add some missing OpenBSD RCS markers
and a few missing <sys/types.h> inclusions; no code change.
@
text
@d1 1
a1 1
/*	$OpenBSD$ */
@


1.5
log
@remove unneccessary inclusion protection; ok schwarze
@
text
@d1 1
a1 1
/*	$Id: manpath.h,v 1.4 2013/05/29 23:15:11 schwarze Exp $ */
@


1.4
log
@Trivial sync to bsd.lv:
Kristaps changed the size member of struct manpaths from int to size_t.
No functional change.
@
text
@d1 1
a1 1
/*	$Id: manpath.h,v 1.3 2011/12/19 02:26:33 schwarze Exp $ */
a17 2
#ifndef MANPATH_H
#define MANPATH_H
a34 2

#endif /*!MANPATH_H*/
@


1.3
log
@Improvements from kristaps@@:
(1) Make the database format simpler and smaller by
- storing the file type as a single character and
- storing paths relative to the dir containing the database.
The latter allows to move trees around.
Both together typically save 15-25% of the index size.
(2) Make sure apropos(1) "any" really covers all search keys.
(3) Make manpath_parseline() static, drop manpath_parseconf() completely.
@
text
@d1 1
a1 1
/*	$Id: manpath.h,v 1.2 2011/12/12 01:59:13 schwarze Exp $ */
d26 1
a26 1
	int	  sz;
@


1.2
log
@implement -C (alternative config file) for apropos(1) and mandocdb(8);
ok kristaps@@
@
text
@d1 1
a1 1
/*	$Id: manpath.h,v 1.1 2011/11/26 16:41:35 schwarze Exp $ */
a33 2
void	 manpath_parseconf(struct manpaths *, const char *);
void	 manpath_parseline(struct manpaths *, char *);
@


1.1
log
@Resync to bsd.lv, most code from kristaps@@.
In particular, support the MANPATH environment variable
and don't confuse index record numbers when working with
multiple mandoc databases at once.
Besides, remove lots of gratuitious code and whitespace differences.
@
text
@d1 1
a1 1
/*	$Id: manpath.h,v 1.1 2011/11/17 14:52:32 schwarze Exp $ */
d32 3
a34 3
void	 manpath_manconf(const char *, struct manpaths *);
void	 manpath_parse(struct manpaths *, char *, char *);
void	 manpath_parseconf(struct manpaths *);
@

