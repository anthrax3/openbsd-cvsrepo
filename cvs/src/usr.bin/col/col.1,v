head	1.14;
access;
symbols
	OPENBSD_6_2_BASE:1.14
	OPENBSD_6_1:1.14.0.8
	OPENBSD_6_1_BASE:1.14
	OPENBSD_6_0:1.14.0.4
	OPENBSD_6_0_BASE:1.14
	OPENBSD_5_9:1.14.0.2
	OPENBSD_5_9_BASE:1.14
	OPENBSD_5_8:1.13.0.4
	OPENBSD_5_8_BASE:1.13
	OPENBSD_5_7:1.12.0.2
	OPENBSD_5_7_BASE:1.12
	OPENBSD_5_6:1.11.0.18
	OPENBSD_5_6_BASE:1.11
	OPENBSD_5_5:1.11.0.16
	OPENBSD_5_5_BASE:1.11
	OPENBSD_5_4:1.11.0.12
	OPENBSD_5_4_BASE:1.11
	OPENBSD_5_3:1.11.0.10
	OPENBSD_5_3_BASE:1.11
	OPENBSD_5_2:1.11.0.8
	OPENBSD_5_2_BASE:1.11
	OPENBSD_5_1_BASE:1.11
	OPENBSD_5_1:1.11.0.6
	OPENBSD_5_0:1.11.0.4
	OPENBSD_5_0_BASE:1.11
	OPENBSD_4_9:1.11.0.2
	OPENBSD_4_9_BASE:1.11
	OPENBSD_4_8:1.10.0.14
	OPENBSD_4_8_BASE:1.10
	OPENBSD_4_7:1.10.0.10
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.10.0.12
	OPENBSD_4_6_BASE:1.10
	OPENBSD_4_5:1.10.0.8
	OPENBSD_4_5_BASE:1.10
	OPENBSD_4_4:1.10.0.6
	OPENBSD_4_4_BASE:1.10
	OPENBSD_4_3:1.10.0.4
	OPENBSD_4_3_BASE:1.10
	OPENBSD_4_2:1.10.0.2
	OPENBSD_4_2_BASE:1.10
	OPENBSD_4_1:1.9.0.2
	OPENBSD_4_1_BASE:1.9
	OPENBSD_4_0:1.8.0.14
	OPENBSD_4_0_BASE:1.8
	OPENBSD_3_9:1.8.0.12
	OPENBSD_3_9_BASE:1.8
	OPENBSD_3_8:1.8.0.10
	OPENBSD_3_8_BASE:1.8
	OPENBSD_3_7:1.8.0.8
	OPENBSD_3_7_BASE:1.8
	OPENBSD_3_6:1.8.0.6
	OPENBSD_3_6_BASE:1.8
	OPENBSD_3_5:1.8.0.4
	OPENBSD_3_5_BASE:1.8
	OPENBSD_3_4:1.8.0.2
	OPENBSD_3_4_BASE:1.8
	OPENBSD_3_3:1.7.0.10
	OPENBSD_3_3_BASE:1.7
	OPENBSD_3_2:1.7.0.8
	OPENBSD_3_2_BASE:1.7
	OPENBSD_3_1:1.7.0.6
	OPENBSD_3_1_BASE:1.7
	OPENBSD_3_0:1.7.0.4
	OPENBSD_3_0_BASE:1.7
	OPENBSD_2_9_BASE:1.7
	OPENBSD_2_9:1.7.0.2
	OPENBSD_2_8:1.5.0.4
	OPENBSD_2_8_BASE:1.5
	OPENBSD_2_7:1.5.0.2
	OPENBSD_2_7_BASE:1.5
	OPENBSD_2_6:1.4.0.2
	OPENBSD_2_6_BASE:1.4
	OPENBSD_2_5:1.3.0.4
	OPENBSD_2_5_BASE:1.3
	OPENBSD_2_4:1.3.0.2
	OPENBSD_2_4_BASE:1.3
	OPENBSD_2_3:1.2.0.8
	OPENBSD_2_3_BASE:1.2
	OPENBSD_2_2:1.2.0.6
	OPENBSD_2_2_BASE:1.2
	OPENBSD_2_1:1.2.0.4
	OPENBSD_2_1_BASE:1.2
	OPENBSD_2_0:1.2.0.2
	OPENBSD_2_0_BASE:1.2
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@.\" @;


1.14
date	2015.09.14.20.06.58;	author schwarze;	state Exp;
branches;
next	1.13;
commitid	r87YNrjEWwl7OkJ0;

1.13
date	2015.05.09.20.36.18;	author schwarze;	state Exp;
branches;
next	1.12;
commitid	gLrfHiGNcl8xBk3R;

1.12
date	2014.10.17.21.10.56;	author schwarze;	state Exp;
branches;
next	1.11;
commitid	Lp5VOEdGGfLGWNk2;

1.11
date	2010.10.29.07.58.04;	author jmc;	state Exp;
branches;
next	1.10;

1.10
date	2007.05.31.19.20.08;	author jmc;	state Exp;
branches;
next	1.9;

1.9
date	2007.02.20.13.50.00;	author jmc;	state Exp;
branches;
next	1.8;

1.8
date	2003.06.03.02.56.06;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	2000.11.21.18.14.55;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	2000.11.09.17.52.06;	author aaron;	state Exp;
branches;
next	1.5;

1.5
date	2000.03.23.21.10.14;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	99.06.05.01.21.21;	author aaron;	state Exp;
branches;
next	1.3;

1.3
date	98.09.23.04.32.37;	author aaron;	state Exp;
branches;
next	1.2;

1.2
date	96.06.26.05.32.09;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.45.01;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.45.01;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.14
log
@Avoid .Ns right after .Pf, it's pointless.
In some cases, do additional cleanup in the immediate vicinity.
@
text
@.\"	$OpenBSD: col.1,v 1.13 2015/05/09 20:36:18 schwarze Exp $
.\"	$NetBSD: col.1,v 1.4 1995/03/26 05:25:52 glass Exp $
.\"
.\" Copyright (c) 1990, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" This code is derived from software contributed to Berkeley by
.\" Michael Rendell.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"     @@(#)col.1	8.1 (Berkeley) 6/29/93
.\"
.Dd $Mdocdate: May 9 2015 $
.Dt COL 1
.Os
.Sh NAME
.Nm col
.Nd filter reverse line feeds and backspaces from input
.Sh SYNOPSIS
.Nm col
.Op Fl bfhx
.Op Fl l Ar num
.Sh DESCRIPTION
.Nm
filters out reverse (and half-reverse) line feeds so that the output is
in the correct order with only forward and half-forward line
feeds, and replaces whitespace characters with tabs where possible.
.Pp
.Nm
reads from the standard input and writes to the standard output.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl b
Do not output any backspaces, printing only the last character
written to each column position.
This can be useful in processing the output of
.Xr mandoc 1 .
.It Fl f
Forward half-line feeds are permitted
.Pf ( Dq fine
mode).
Normally characters printed on a half-line boundary are printed
on the following line.
.It Fl h
Compress spaces into tabs.
This is the default behavior.
.It Fl l Ar num
Buffer at least
.Ar num
lines in memory.
By default, 128 lines are buffered.
.It Fl x
Output multiple spaces instead of tabs.
.El
.Pp
In the input stream,
.Nm
understands both the escape sequences of the form escape-digit
mandated by
.St -susv2
and the traditional
.Bx
format escape-control-character.
The control sequences for carriage motion and their ASCII values
are as follows:
.Pp
.Bl -tag -width "escape-backspace" -compact
.It escape\-bell
Reverse line feed (27 then 7).
.It escape\-digit\-7
Reverse line feed (27 then 55).
.It escape\-backspace
Half reverse line feed (27 then 8).
.It escape\-digit\-8
Half reverse line feed (27 then 56).
.It escape\-tab
Half forward line feed (27 then 9).
.It escape\-digit\-9
Half forward line feed (27 then 57).
In
.Fl f
mode, this sequence may also occur in the output stream.
.It backspace
Moves back one column (8); ignored in the first column.
.It carriage return
(13)
.It newline
Forward line feed (10); also does carriage return.
.It shift in
Shift to normal character set (15).
.It shift out
Shift to alternate character set (14).
.It space
Moves forward one column (32).
.It tab
Moves forward to next tab stop (9).
.It vertical tab
Reverse line feed (11).
.El
.Pp
All unrecognized control characters and escape sequences are
discarded.
.Pp
.Nm
keeps track of the character set as characters are read and makes
sure the character set is correct when they are output.
.Pp
If the input attempts to back up to the last flushed line,
.Nm
will display a warning message.
.Sh SEE ALSO
.Xr expand 1
.Sh HISTORY
A
.Nm
command appeared in
.At v6 .
@


1.13
log
@For half and reverse line feeds, recognize SUSv2-style escape-digit
sequences in the input stream in addition to traditional BSD-style
escape-control-char sequences because traditional tools, for example
Heirloom roff, produce SUSv2-style sequences.  Switch the encoding
of forward half line feeds in the output of -f back to SUSv2 style
because that's likely to work with more tools than the non-standard
traditional BSD-style sequence.  Fully document these choices.

Issues originally reported by bapt at FreeBSD.
OK millert@@ jmc@@, and bapt@@ also more or less agrees with the direction.
@
text
@d1 1
a1 1
.\"	$OpenBSD: col.1,v 1.12 2014/10/17 21:10:56 schwarze Exp $
d36 1
a36 1
.Dd $Mdocdate: October 17 2014 $
d64 1
a64 1
.Pf ( Ns Dq fine
@


1.12
log
@Partial revert of rev. 1.7 (Nov. 21, 2000):
The half line feed escape codes are decimal 8 and 9 (octal 010 and 011).
While here, make it clear that the numbers are ASCII, and consistently
use lower cases character names in the first column and decimal numbers
in the parentheses at the end of the second column.
OK millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: col.1,v 1.11 2010/10/29 07:58:04 jmc Exp $
d36 1
a36 1
.Dd $Mdocdate: October 29 2010 $
d80 1
a80 1
The control sequences for carriage motion that
d82 8
a89 2
understands and their decimal ASCII values are listed in the following
table:
d94 2
d98 2
d102 5
@


1.11
log
@various fixes, mostly concerning the recent groff removal,
as suggested by ingo;
@
text
@d1 1
a1 1
.\"	$OpenBSD: col.1,v 1.10 2007/05/31 19:20:08 jmc Exp $
d36 1
a36 1
.Dd $Mdocdate: May 31 2007 $
d82 1
a82 1
understands and their decimal values are listed in the following
d85 7
a91 7
.Bl -tag -width "carriage return" -compact
.It ESC\-7
Reverse line feed (escape then 7).
.It ESC\-10
Half reverse line feed (escape then 10).
.It ESC\-11
Half forward line feed (escape then 11).
@


1.10
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: col.1,v 1.9 2007/02/20 13:50:00 jmc Exp $
d36 1
a36 1
.Dd $Mdocdate$
d41 1
a41 1
.Nd filter reverse line feeds from input
a50 4
This can be useful in processing the output of
.Xr nroff 1
and
.Xr tbl 1 .
d60 2
d121 1
a121 3
.Xr expand 1 ,
.Xr nroff 1 ,
.Xr tbl 1
@


1.9
log
@sort options; from Igor Sobrado
@
text
@d1 1
a1 1
.\"	$OpenBSD: col.1,v 1.8 2003/06/03 02:56:06 millert Exp $
d36 1
a36 1
.Dd June 29, 1993
@


1.8
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
.\"	$OpenBSD: col.1,v 1.7 2000/11/21 18:14:55 aaron Exp $
a72 2
.It Fl x
Output multiple spaces instead of tabs.
d78 2
@


1.7
log
@Document -h option and correctly describe half-reverse and half-reverse
line feeds; mpech@@prosoft.org.lv
@
text
@d1 1
a1 1
.\"	$OpenBSD: col.1,v 1.6 2000/11/09 17:52:06 aaron Exp $
d18 1
a18 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
@


1.6
log
@Change all option list specifications to ".Bl -tag -width Ds". Most man
pages just needed their -width parameter tweaked to "Ds", which provides
a nice width of 6 constant characters. For consistency more than anything.
@
text
@d1 1
a1 1
.\"	$OpenBSD: col.1,v 1.5 2000/03/23 21:10:14 aaron Exp $
d48 1
a48 1
.Op Fl bfx
d74 3
d94 4
a97 4
.It ESC\-8
Half reverse line feed (escape then 8).
.It ESC\-9
Half forward line feed (escape then 9).
@


1.5
log
@Fix some formatting problems I missed before.
@
text
@d1 1
a1 1
.\"	$OpenBSD: col.1,v 1.4 1999/06/05 01:21:21 aaron Exp $
d64 1
a64 1
.Bl -tag -width "-l num"
@


1.4
log
@- remove trailing white space
- remove arguments from .Os macros
- remove arguments from .Nm macros, where appropriate
- some more Dq/Sq/Ql insanity
- still lots to do in the usr.bin tree... :/
@
text
@d1 1
a1 1
.\"	$OpenBSD: col.1,v 1.3 1998/09/23 04:32:37 aaron Exp $
d58 1
a58 1
.Xr tbl  1 .
@


1.3
log
@usr.bin/ man page repairs, a - e
@
text
@d1 1
a1 1
.\"	$OpenBSD: col.1,v 1.2 1996/06/26 05:32:09 deraadt Exp $
d51 4
a54 4
.Nm col
filters out reverse (and half reverse) line feeds so that the output is
in the correct order with only forward and half forward line
feeds, and replaces white-space characters with tabs where possible.
d60 1
a60 1
.Nm col
d64 1
a64 1
.Bl -tag -width "-l num  "
d69 4
a72 2
Forward half line feeds are permitted (``fine'' mode).
Normally characters printed on a half line boundary are printed
d84 1
a84 1
.Nm col
d90 1
a90 1
reverse line feed (escape then 7)
d92 1
a92 1
half reverse line feed (escape then 8)
d94 1
a94 1
half forward line feed (escape then 9)
d96 1
a96 1
moves back one column (8); ignored in the first column
d100 1
a100 1
forward line feed (10); also does carriage return
d102 1
a102 1
shift to normal character set (15)
d104 1
a104 1
shift to alternate character set (14)
d106 1
a106 1
moves forward one column (32)
d108 1
a108 1
moves forward to next tab stop (9)
d110 1
a110 1
reverse line feed (11)
d116 1
a116 1
.Nm col
d121 1
a121 1
.Nm col
d129 2
a130 2
.Nm col
command appeared in 
@


1.2
log
@rcsid
@
text
@d1 1
a1 1
.\"	$OpenBSD: col.1,v 1.4 1995/03/26 05:25:52 glass Exp $
d51 1
a51 1
.Nm Col
d60 1
a60 1
.Nm Col
d114 1
a114 1
.Nm Col
@


1.1
log
@Initial revision
@
text
@d1 1
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
