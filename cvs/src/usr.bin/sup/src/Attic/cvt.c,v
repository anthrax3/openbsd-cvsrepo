head	1.3;
access;
symbols
	OPENBSD_2_9_BASE:1.2
	OPENBSD_2_9:1.2.0.20
	OPENBSD_2_8:1.2.0.18
	OPENBSD_2_8_BASE:1.2
	OPENBSD_2_7:1.2.0.16
	OPENBSD_2_7_BASE:1.2
	OPENBSD_2_6:1.2.0.14
	OPENBSD_2_6_BASE:1.2
	OPENBSD_2_5:1.2.0.12
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.2.0.10
	OPENBSD_2_4_BASE:1.2
	OPENBSD_2_3:1.2.0.8
	OPENBSD_2_3_BASE:1.2
	OPENBSD_2_2:1.2.0.6
	OPENBSD_2_2_BASE:1.2
	OPENBSD_2_1:1.2.0.4
	OPENBSD_2_1_BASE:1.2
	OPENBSD_2_0:1.2.0.2
	OPENBSD_2_0_BASE:1.2;
locks; strict;
comment	@ * @;


1.3
date	2001.05.04.22.16.15;	author millert;	state dead;
branches;
next	1.2;

1.2
date	96.06.26.05.39.39;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.12.16.11.46.44;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.3
log
@o kill register
o lots of KNF
o passes -Wall
o fix some [ug]id_t vs. int issues
o use strlcpy/strlcat in favor of strncpy/strncat
o use mem* routines everywhere instead of old b* ones
o marked several questionable things for later fixing
o kill ci.c and cvt.c -- we don't use them
o kill read_line.c since it requires fgetln() (bad for portability)
o kill salloc.c since it is the same as strup()
o Replaced some #ifdef __OpenBSD__ with better tests
o remaining problems: malloc return values are rarely checked, select misuse
@
text
@/*	$OpenBSD: cvt.c,v 1.2 1996/06/26 05:39:39 deraadt Exp $	*/

/*
 * Quick hack to convert old binary sup when.collection files into 
 * the new ascii format.
 */
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <fcntl.h>

int
main(argc, argv)
	int argc;
	char *argv[];
{
	long b;
	FILE *fp;
	int fd;

	if (argc != 2) {
		(void) fprintf(stderr, "Usage: %s <filename>\n", argv[0]);
		return 1;
	}

	if ((fd = open(argv[1], O_RDWR)) == -1) {
		perror("open");
		return 1;
	}

	if (read(fd, &b, sizeof(b)) != sizeof(b)) {
		perror("read");
		return 1;
	}

	if (lseek(fd, 0, SEEK_SET) == -1) {
		perror("lseek");
		return 1;
	}

	(void) close(fd);

	if ((fp = fopen(argv[1], "w")) == NULL) {
		perror("fopen");
		return 1;
	}

	if (fprintf(fp, "%ld\n", b) < 0) {
		perror("fprintf");
		return 1;
	}
	if (fclose(fp) != 0) {
		perror("fclose");
		return 1;
	}

	return 0;
}
@


1.2
log
@rcsid
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
@


1.1
log
@add sup to the tree
@
text
@d1 2
@
