head	1.48;
access;
symbols
	OPENBSD_6_1:1.48.0.12
	OPENBSD_6_1_BASE:1.48
	OPENBSD_6_0:1.48.0.10
	OPENBSD_6_0_BASE:1.48
	OPENBSD_5_9:1.48.0.6
	OPENBSD_5_9_BASE:1.48
	OPENBSD_5_8:1.48.0.8
	OPENBSD_5_8_BASE:1.48
	OPENBSD_5_7:1.48.0.2
	OPENBSD_5_7_BASE:1.48
	OPENBSD_5_6:1.48.0.4
	OPENBSD_5_6_BASE:1.48
	OPENBSD_5_5:1.47.0.4
	OPENBSD_5_5_BASE:1.47
	OPENBSD_5_4:1.45.0.12
	OPENBSD_5_4_BASE:1.45
	OPENBSD_5_3:1.45.0.10
	OPENBSD_5_3_BASE:1.45
	OPENBSD_5_2:1.45.0.8
	OPENBSD_5_2_BASE:1.45
	OPENBSD_5_1_BASE:1.45
	OPENBSD_5_1:1.45.0.6
	OPENBSD_5_0:1.45.0.4
	OPENBSD_5_0_BASE:1.45
	OPENBSD_4_9:1.45.0.2
	OPENBSD_4_9_BASE:1.45
	OPENBSD_4_8:1.44.0.2
	OPENBSD_4_8_BASE:1.44
	OPENBSD_4_7:1.43.0.2
	OPENBSD_4_7_BASE:1.43
	OPENBSD_4_6:1.43.0.4
	OPENBSD_4_6_BASE:1.43
	OPENBSD_4_5:1.42.0.2
	OPENBSD_4_5_BASE:1.42
	OPENBSD_4_4:1.39.0.6
	OPENBSD_4_4_BASE:1.39
	OPENBSD_4_3:1.39.0.4
	OPENBSD_4_3_BASE:1.39
	OPENBSD_4_2:1.39.0.2
	OPENBSD_4_2_BASE:1.39
	OPENBSD_4_1:1.35.0.2
	OPENBSD_4_1_BASE:1.35
	OPENBSD_4_0:1.34.0.6
	OPENBSD_4_0_BASE:1.34
	OPENBSD_3_9:1.34.0.4
	OPENBSD_3_9_BASE:1.34
	OPENBSD_3_8:1.34.0.2
	OPENBSD_3_8_BASE:1.34
	OPENBSD_3_7:1.29.0.6
	OPENBSD_3_7_BASE:1.29
	OPENBSD_3_6:1.29.0.4
	OPENBSD_3_6_BASE:1.29
	OPENBSD_3_5:1.29.0.2
	OPENBSD_3_5_BASE:1.29
	OPENBSD_3_4:1.28.0.2
	OPENBSD_3_4_BASE:1.28
	OPENBSD_3_3:1.15.0.2
	OPENBSD_3_3_BASE:1.15
	OPENBSD_3_2:1.13.0.2
	OPENBSD_3_2_BASE:1.13
	OPENBSD_3_1:1.12.0.4
	OPENBSD_3_1_BASE:1.12
	OPENBSD_3_0:1.12.0.2
	OPENBSD_3_0_BASE:1.12
	OPENBSD_2_9_BASE:1.11
	OPENBSD_2_9:1.11.0.6
	OPENBSD_2_8:1.11.0.4
	OPENBSD_2_8_BASE:1.11
	OPENBSD_2_7:1.11.0.2
	OPENBSD_2_7_BASE:1.11
	OPENBSD_2_6:1.9.0.2
	OPENBSD_2_6_BASE:1.9
	OPENBSD_2_5:1.6.0.4
	OPENBSD_2_5_BASE:1.6
	OPENBSD_2_4:1.6.0.2
	OPENBSD_2_4_BASE:1.6
	OPENBSD_2_3:1.5.0.4
	OPENBSD_2_3_BASE:1.5
	OPENBSD_2_2:1.5.0.2
	OPENBSD_2_2_BASE:1.5
	OPENBSD_2_1:1.2.0.4
	OPENBSD_2_1_BASE:1.2
	OPENBSD_2_0:1.2.0.2
	OPENBSD_2_0_BASE:1.2
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@.\" @;


1.48
date	2014.03.17.14.23.50;	author jmc;	state Exp;
branches;
next	1.47;

1.47
date	2014.01.27.16.57.55;	author sobrado;	state Exp;
branches;
next	1.46;

1.46
date	2014.01.26.21.18.16;	author jmc;	state Exp;
branches;
next	1.45;

1.45
date	2010.09.03.11.09.28;	author jmc;	state Exp;
branches;
next	1.44;

1.44
date	2010.07.22.07.38.56;	author jmc;	state Exp;
branches;
next	1.43;

1.43
date	2009.04.18.18.21.54;	author naddy;	state Exp;
branches;
next	1.42;

1.42
date	2009.02.10.19.24.17;	author jmc;	state Exp;
branches;
next	1.41;

1.41
date	2009.02.08.17.15.09;	author jmc;	state Exp;
branches;
next	1.40;

1.40
date	2009.02.08.16.44.32;	author jmc;	state Exp;
branches;
next	1.39;

1.39
date	2007.05.31.19.20.08;	author jmc;	state Exp;
branches;
next	1.38;

1.38
date	2007.05.30.04.41.33;	author jmc;	state Exp;
branches;
next	1.37;

1.37
date	2007.04.04.16.25.03;	author jmc;	state Exp;
branches;
next	1.36;

1.36
date	2007.04.04.13.09.14;	author millert;	state Exp;
branches;
next	1.35;

1.35
date	2007.01.24.10.53.43;	author jmc;	state Exp;
branches;
next	1.34;

1.34
date	2005.07.22.09.30.51;	author jmc;	state Exp;
branches;
next	1.33;

1.33
date	2005.07.22.09.02.42;	author jmc;	state Exp;
branches;
next	1.32;

1.32
date	2005.07.22.08.58.31;	author jmc;	state Exp;
branches;
next	1.31;

1.31
date	2005.07.22.08.50.18;	author jmc;	state Exp;
branches;
next	1.30;

1.30
date	2005.07.22.08.38.46;	author jmc;	state Exp;
branches;
next	1.29;

1.29
date	2003.10.01.08.43.17;	author jmc;	state Exp;
branches;
next	1.28;

1.28
date	2003.09.05.07.24.59;	author jmc;	state Exp;
branches;
next	1.27;

1.27
date	2003.09.05.04.46.35;	author tedu;	state Exp;
branches;
next	1.26;

1.26
date	2003.08.16.23.43.06;	author millert;	state Exp;
branches;
next	1.25;

1.25
date	2003.08.06.13.10.48;	author jmc;	state Exp;
branches;
next	1.24;

1.24
date	2003.08.02.17.45.15;	author millert;	state Exp;
branches;
next	1.23;

1.23
date	2003.08.01.09.38.00;	author jmc;	state Exp;
branches;
next	1.22;

1.22
date	2003.07.20.13.25.52;	author millert;	state Exp;
branches;
next	1.21;

1.21
date	2003.07.17.20.06.01;	author millert;	state Exp;
branches;
next	1.20;

1.20
date	2003.06.30.03.42.05;	author millert;	state Exp;
branches;
next	1.19;

1.19
date	2003.06.23.20.51.02;	author jmc;	state Exp;
branches;
next	1.18;

1.18
date	2003.06.22.22.17.46;	author deraadt;	state Exp;
branches;
next	1.17;

1.17
date	2003.06.10.09.12.09;	author jmc;	state Exp;
branches;
next	1.16;

1.16
date	2003.06.03.02.56.07;	author millert;	state Exp;
branches;
next	1.15;

1.15
date	2002.12.17.16.16.08;	author millert;	state Exp;
branches;
next	1.14;

1.14
date	2002.12.08.16.07.54;	author mickey;	state Exp;
branches;
next	1.13;

1.13
date	2002.05.30.20.34.57;	author mickey;	state Exp;
branches;
next	1.12;

1.12
date	2001.06.17.16.34.47;	author mickey;	state Exp;
branches;
next	1.11;

1.11
date	2000.03.23.21.10.15;	author aaron;	state Exp;
branches;
next	1.10;

1.10
date	2000.03.05.20.09.21;	author aaron;	state Exp;
branches;
next	1.9;

1.9
date	99.10.05.17.09.11;	author aaron;	state Exp;
branches;
next	1.8;

1.8
date	99.07.04.11.53.52;	author aaron;	state Exp;
branches;
next	1.7;

1.7
date	99.06.05.01.21.22;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	98.09.23.04.32.38;	author aaron;	state Exp;
branches;
next	1.5;

1.5
date	97.08.19.06.33.37;	author denny;	state Exp;
branches;
next	1.4;

1.4
date	97.07.06.20.22.53;	author mickey;	state Exp;
branches;
next	1.3;

1.3
date	97.06.30.11.49.48;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	96.06.26.05.32.19;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.45.02;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.45.02;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.48
log
@use Ex;
@
text
@.\"	$OpenBSD: compress.1,v 1.47 2014/01/27 16:57:55 sobrado Exp $
.\"	$NetBSD: compress.1,v 1.5 1995/03/26 09:44:34 glass Exp $
.\"
.\" Copyright (c) 1986, 1990, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" This code is derived from software contributed to Berkeley by
.\" James A. Woods, derived from original work by Spencer Thomas
.\" and Joseph Orost.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"     @@(#)compress.1	8.2 (Berkeley) 4/18/94
.\"
.Dd $Mdocdate: January 27 2014 $
.Dt COMPRESS 1
.Os
.Sh NAME
.Nm compress ,
.Nm uncompress ,
.Nm zcat
.Nd compress and expand data (compress mode)
.Sh SYNOPSIS
.Nm compress
.Op Fl 123456789cdfghlNnOqrtv
.Op Fl b Ar bits
.Op Fl o Ar filename
.Op Fl S Ar suffix
.Op Ar
.Nm uncompress
.Op Fl cfhlNnqrtv
.Op Fl o Ar filename
.Op Ar
.Nm zcat
.Op Fl fghqr
.Op Ar
.Sh DESCRIPTION
The
.Nm
utility
reduces the size of the named files using adaptive Lempel-Ziv coding,
in compress mode.
If invoked as
.Nm compress Fl g ,
the deflate mode of compression is chosen;
see
.Xr gzip 1
for more information.
Each file is renamed to the same name plus the extension
.Dq .Z .
As many of the modification time, access time, file flags, file mode,
user ID, and group ID as allowed by permissions are retained in the
new file.
If compression would not reduce the size of a file,
the file is ignored (unless
.Fl f
is used).
.Pp
The
.Nm uncompress
utility restores compressed files to their original form, renaming the
files by removing the extension (or by using the stored name if the
.Fl N
flag is specified).
It has the ability to restore files compressed by both
.Nm
and
.Xr gzip 1 ,
recognising the following extensions:
.Dq .Z ,
.Dq -Z ,
.Dq _Z ,
.Dq .gz ,
.Dq -gz ,
.Dq _gz ,
.Dq .tgz ,
.Dq -tgz ,
.Dq _tgz ,
.Dq .taz ,
.Dq -taz ,
and
.Dq _taz .
Extensions ending in
.Dq tgz
and
.Dq taz
are not removed when decompressing, instead they are converted to
.Dq tar .
.Pp
The
.Nm zcat
command is equivalent in functionality to
.Nm uncompress
.Fl c .
.Pp
If renaming the files would cause files to be overwritten and the standard
input device is a terminal, the user is prompted (on the standard error
output) for confirmation.
If prompting is not possible or confirmation is not received, the files
are not overwritten.
.Pp
If no files are specified, the standard input is compressed or uncompressed
to the standard output.
If either the input or output files are not regular files, the checks for
reduction in size and file overwriting are not performed, the input file is
not removed, and the attributes of the input file are not retained.
.Pp
By default, when compressing using the deflate scheme
.Pf ( Fl g ) ,
the original file name and time stamp are stored in the compressed file.
When uncompressing, this information is not used.
Instead, the uncompressed file inherits the time stamp of the
compressed version and the uncompressed file name is generated from
the name of the compressed file as described above.
These defaults may be overridden by the
.Fl N
and
.Fl n
flags, described below.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl 1...9
Use the deflate scheme, with compression factor of
.Fl 1
to
.Fl 9 .
Compression factor
.Fl 1
is the fastest, but provides a poorer level of compression.
Compression factor
.Fl 9
provides the best level of compression, but is relatively slow.
The default is
.Fl 6 .
This option implies
.Fl g .
.It Fl b Ar bits
Specify the
.Ar bits
code limit
.Pq see below .
.It Fl c
Compressed or uncompressed output is written to the standard output.
No files are modified (force
.Nm zcat
mode).
.It Fl d
Decompress the source files instead of compressing them (force
.Nm uncompress
mode).
.It Fl f
Force compression of
.Ar file ,
even if it is not actually reduced in size.
Additionally, files are overwritten without prompting for confirmation.
If the input data is not in a format recognized by
.Nm
and if the option
.Fl c
is also given, copy the input data without change
to the standard output: let
.Nm zcat
behave as
.Xr cat 1 .
.It Fl g
Use the deflate scheme, which reportedly provides better compression rates
(force
.Xr gzip 1
mode).
.It Fl h
Print a short help message.
.It Fl l
List information for the specified compressed files.
The following information is listed:
.Bl -tag -width "compression ratio"
.It compressed size
Size of the compressed file.
.It uncompressed size
Size of the file when uncompressed.
.It compression ratio
Ratio of the difference between the compressed and uncompressed
sizes to the uncompressed size.
.It uncompressed name
Name the file will be saved as when uncompressing.
.El
.Pp
If the
.Fl v
option is specified, the following additional information is printed:
.Bl -tag -width "compression method"
.It compression method
Name of the method used to compress the file.
.It crc
32-bit CRC
.Pq cyclic redundancy code
of the uncompressed file.
.It "time stamp"
Date and time corresponding to the last data modification time
(mtime) of the compressed file (if the
.Fl n
option is specified, the time stamp stored in the compressed file
is printed instead).
.El
.It Fl N
When uncompressing or listing, use the time stamp and file name stored
in the compressed file, if any, for the uncompressed version.
This information is only available when the deflate scheme
.Pf ( Fl g )
is used.
.It Fl n
When compressing, do not store the original file name and time stamp
in the header of the compressed file.
.It Fl O
Use compress mode
(the default).
.It Fl o Ar filename
Set the output file name.
.It Fl q
Be quiet: suppress all messages.
.It Fl r
Recursive mode:
.Nm
will descend into specified directories.
.It Fl S Ar suffix
Set the suffix for compressed files.
.It Fl t
Test the integrity of each file leaving any files intact.
.It Fl v
Print the percentage reduction of each file and other information.
.El
.Pp
.Nm
uses a modified Lempel-Ziv algorithm
.Pq LZW .
Common substrings in the file are first replaced by 9-bit codes 257 and up.
When code 512 is reached, the algorithm switches to 10-bit codes and
continues to use more bits until the
limit specified by the
.Fl b
flag is reached.
.Ar bits
must be between 9 and 16
.Pq the default is 16 .
.Pp
After the
.Ar bits
limit is reached,
.Nm
periodically checks the compression ratio.
If it is increasing,
.Nm
continues to use the existing code dictionary.
However, if the compression ratio decreases,
.Nm
discards the table of substrings and rebuilds it from scratch.
This allows the algorithm to adapt to the next
.Dq block
of the file.
.Pp
The
.Fl b
flag is omitted for
.Nm uncompress
since the
.Ar bits
parameter specified during compression
is encoded within the output, along with
a magic number to ensure that neither decompression of random data nor
recompression of compressed data is attempted.
.Pp
The amount of compression obtained depends on the size of the
input, the number of
.Ar bits
per code, and the distribution of common substrings.
Typically, text such as source code or English is reduced by 50 \- 60% using
.Nm .
Compression is generally much better than that achieved by Huffman
coding (as used in the historical command pack), or adaptive Huffman
coding (as used in the historical command compact), and takes less
time to compute.
.Sh EXIT STATUS
The
.Nm compress
utility exits with one of the following values:
.Pp
.Bl -tag -width Ds -offset indent -compact
.It 0
Success.
.It 1
An error occurred.
.It 2
At least one of the specified files was not compressed since
.Fl f
was not specified and compression would have resulted in a size
increase.
.It \*(Gt2
An error occurred.
.El
.Pp
.Ex -std uncompress zcat
.Sh SEE ALSO
.Xr gzexe 1 ,
.Xr gzip 1 ,
.Xr zdiff 1 ,
.Xr zforce 1 ,
.Xr zmore 1 ,
.Xr znew 1 ,
.Xr compress 3
.Rs
.%A Welch, Terry A.
.%D June, 1984
.%T "A Technique for High Performance Data Compression"
.%J "IEEE Computer"
.%V 17:6
.%P pp. 8\-19
.Re
.Sh STANDARDS
The
.Nm ,
.Nm uncompress ,
and
.Nm zcat
utilities are compliant with the
X/Open System Interfaces option of the
.St -p1003.1-2008
specification.
.Pp
The
.Nm
flags
.Op Fl 123456789dghlNnOoqrSt ,
.Nm uncompress
flags
.Op Fl hlNnoqrt ,
and the
.Nm zcat
flags
.Op Fl fghqr
are extensions to that specification.
.Pp
.St -p1003.1-2008
specifies a maximum bits limit
.Pq Fl b
of 14 to
.Qq achieve portability to all systems .
.Sh HISTORY
The
.Nm
command appeared in
.Bx 4.3 .
Deflate compression support was added in
.Ox 2.1 .
@


1.47
log
@remove the no-op flags -L and -V from compress(1), these options
come from GNU zip and they were never in compress(1) until we added
gzip(1) support to it.

joint work with jmc@@ and millert@@; millert@@ will do the rest.

ok jmc@@, millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.46 2014/01/26 21:18:16 jmc Exp $
d37 1
a37 1
.Dd $Mdocdate: January 26 2014 $
d323 1
a323 6
The
.Nm uncompress
and
.Nm zcat
utilities exit 0 on success,
and >0 if an error occurs.
@


1.46
log
@- document for uncompress and zcat exit status of 0 or >0 only
- kill an unneccessary Pp that created double vertical space
- mention that posix marks these apps xsi
- add uncompress -V to the list of extensions
- document that posix stipulates a limit of 14 for -b, even though it
permits 15 and 16

ok sobrado millert
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.45 2010/09/03 11:09:28 jmc Exp $
d37 1
a37 1
.Dd $Mdocdate: September 3 2010 $
d47 1
a47 1
.Op Fl 123456789cdfghLlNnOqrtVv
d53 1
a53 1
.Op Fl cfhlNnqrtVv
a194 2
.It Fl L
Print the license.
a250 4
.It Fl V
Display the program version
.Pq RCS IDs of the source files
and exit.
d359 1
a359 1
.Op Fl 123456789dghLlNnOoqrStV ,
d362 1
a362 1
.Op Fl hlNnoqrtV ,
@


1.45
log
@add an EXIT STATUS section for /usr/bin;
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.44 2010/07/22 07:38:56 jmc Exp $
d37 1
a37 1
.Dd $Mdocdate: July 22 2010 $
d333 2
a334 2
utilities exit with 0 on success; 1 if an error occurred;
or 2 if a warning occurred.
a342 1
.Pp
d358 2
a359 1
.St -xpg4
d368 1
a368 1
.Op Fl hlNnoqrt ,
d374 6
@


1.44
log
@document exit returns; from daniel dickman
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.43 2009/04/18 18:21:54 naddy Exp $
d37 1
a37 1
.Dd $Mdocdate: April 18 2009 $
d310 1
a310 1
.Pp
d315 1
a315 1
.Bl -tag -width Ds -compact
@


1.43
log
@allow -V (show version) in decompression mode; ok millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.42 2009/02/10 19:24:17 jmc Exp $
d37 1
a37 1
.Dd $Mdocdate: February 10 2009 $
d312 19
a330 2
.Nm compress ,
.Nm uncompress ,
@


1.42
log
@STANDARDS:
mark these utilities as being either optional (SD/FR/UP); or as
being compliant only with XPG4 (XSI); strip.1 and talk.1 are tweaked
purely for consistency;

thanks otto for feedback
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.41 2009/02/08 17:15:09 jmc Exp $
d37 1
a37 1
.Dd $Mdocdate: February 8 2009 $
d53 1
a53 1
.Op Fl cfhlNnqrtv
@


1.41
log
@bump the posix reference in STANDARDS to IEEE Std 1003.1-2008, with a few
updates to follow;
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.40 2009/02/08 16:44:32 jmc Exp $
d342 1
a342 1
.St -p1003.1-2008
@


1.40
log
@some minor corrections for the STANDARDS section;
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.39 2007/05/31 19:20:08 jmc Exp $
d37 1
a37 1
.Dd $Mdocdate: May 31 2007 $
d342 1
a342 1
.St -p1003.1-2004
@


1.39
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.38 2007/05/30 04:41:33 jmc Exp $
d37 1
a37 1
.Dd $Mdocdate$
d348 1
a348 1
.Op Fl 123456789dghLlNnOqrtV ,
d351 1
a351 1
.Op Fl hlNnqrt ,
@


1.38
log
@- use a consistent text for STANDARDS
- note which options are extensions to POSIX
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.37 2007/04/04 16:25:03 jmc Exp $
d37 1
a37 1
.Dd April 18, 1994
@


1.37
log
@tweak previous;
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.36 2007/04/04 13:09:14 millert Exp $
d337 9
d347 10
a356 3
utility is compliant with the
.St -p1003.2-92
specification.
@


1.36
log
@Clarify the behavior of the -N and -n flags.
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.35 2007/01/24 10:53:43 jmc Exp $
d132 1
a132 1
the original file name and time stamp is stored in the compressed file.
@


1.35
log
@split compress(1) into compress(1) and gzip(1), as suggested by millert;
ok/help millert otto
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.34 2005/07/22 09:30:51 jmc Exp $
d130 13
a229 5
When compressing, save the original file name and time stamp in the
compressed file.
This information is saved by default when the deflate scheme
.Pf ( Fl g )
is used.
d232 1
a232 3
.It Fl n
When compressing, do not save the original file name and time stamp.
This information is saved by default when the deflate scheme
d235 3
a237 4
When uncompressing, do not restore the original file name and time stamp.
By default, the uncompressed file inherits the time stamp of the
compressed version and the uncompressed file name is generated from
the name of the compressed file name as described above.
@


1.34
log
@somehow we managed to document the exit status of these apps twice,
in slightly different ways: merge it all into one bit;

RETURN VALUES section header removed since strictly speaking this is
not for section one apps;

help from otto@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.33 2005/07/22 09:02:42 jmc Exp $
d43 2
a44 5
.Nm gzip ,
.Nm gunzip ,
.Nm zcat ,
.Nm gzcat
.Nd compress and expand data
d47 1
a47 3
.Op Fl LV
.Nm compress
.Op Fl 123456789cdfghlNnOqrtv
a55 14
.Pp
.Nm gzip
.Op Fl LV
.Nm gzip
.Op Fl 123456789cdfghlNnOqrtv
.Op Fl b Ar bits
.Op Fl o Ar filename
.Op Fl S Ar suffix
.Op Ar
.Nm gunzip
.Op Fl cfhlNnqrtv
.Op Fl o Ar filename
.Op Ar
.Pp
a58 3
.Nm gzcat
.Op Fl fghqr
.Op Ar
d61 4
a64 6
.Nm compress
and
.Nm gzip
utilities
reduce the size of the named files using adaptive Lempel-Ziv coding.
They are functionally identical, but use different algorithms for compression.
a65 2
.Nm gzip
or
d67 6
a72 12
the deflate mode of compression is chosen by default;
otherwise the older method of compression
.Pq compress mode
is used.
.Pp
Each
.Ar file
is renamed to the same name plus the extension
.Dq .Z ,
or
.Dq .gz
(in deflate mode).
d76 1
a76 2
If compression would not reduce the size of a
.Ar file ,
d83 1
a83 3
and
.Nm gunzip
utilities restore compressed files to their original form, renaming the
d87 5
a91 1
When decompressing, the following extensions are recognized:
a116 5
The
.Nm gzcat
command is equivalent in functionality to
.Nm gunzip
.Fl c .
d133 1
a133 1
Use deflate scheme with compression factor of
a155 2
or
.Nm gzcat
a172 2
or
.Nm gzcat
d176 3
a178 2
Use deflate scheme which reportedly provides better compression rates (force
.Nm gzip
a179 4
This flag need not be specified when invoked as
.Nm gzip
or
.Nm gzcat .
d182 2
d219 3
a221 1
This information is saved by default when the deflate scheme is used.
d226 3
a228 1
This information is saved by default when the deflate scheme is used.
d234 2
a235 1
Use old compression method.
d239 1
a239 1
Be quiet, suppress all messages.
d241 1
a241 1
Recursive mode,
d245 1
a245 1
Set suffix for compressed files.
a255 1
In normal mode,
a283 8
.Nm gzip
uses a slightly different version of the Lempel-Ziv algorithm
.Pq LZ77 .
Common substrings are replaced by pointers to previous strings,
and are found using a hash table.
Unique substrings are emitted as a string of literal bytes,
and compressed as Huffman trees.
.Pp
a287 2
or
.Nm gunzip
d300 1
a300 3
.Nm
and by 60 \- 70% using
.Nm gzip .
d307 2
a308 1
.Nm
d310 1
a310 1
.Nm gzip
d315 1
a329 9
.Pp
.Bl -tag -width 12n -compact
.It RFC 1950
ZLIB Compressed Data Format Specification.
.It RFC 1951
DEFLATE Compressed Data Format Specification.
.It RFC 1952
GZIP File Format Specification.
.El
a335 6
.Pp
The
.Nm gzip
and
.Nm gunzip
utilities are extensions.
d341 1
a341 1
The deflate compression support was added in
a342 10
Full
.Nm gzip
compatibility was added in
.Ox 3.4 .
The
.Sq g
in this version of
.Nm gzip
stands for
.Dq gratis .
@


1.33
log
@add -g to gzcat synopsis: although it's not necessary, it matches how
we describe gzip itself; update the description of -g to reflect this;
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.32 2005/07/22 08:58:31 jmc Exp $
d359 2
a360 18
utilities exit with 0 on success, 1 if an error occurred, or 2 if one or
more files were not compressed because they would have grown in
size (and
.Fl f
was not specified).
.Sh RETURN VALUES
The
.Nm
utility exits with one of the following values:
.Pp
.Bl -tag -width flag -compact
.It Li 0
The file was compressed successfully.
.It Li 1
An error occurred.
.It Li 2
A warning occurred.
.El
@


1.32
log
@add some z* utils to SEE ALSO;
formatting tweak;
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.31 2005/07/22 08:50:18 jmc Exp $
d79 1
a79 1
.Op Fl fhqr
d220 3
a222 1
.Nm gzip .
@


1.31
log
@add zcat and gzcat to NAME;
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.30 2005/07/22 08:38:46 jmc Exp $
d376 5
d389 1
a389 1
.%P pp. 8-19
@


1.30
log
@sort synopsis and options list; sync usage() (as best we can);
help + ok jaredy@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.29 2003/10/01 08:43:17 jmc Exp $
d44 3
a46 1
.Nm gunzip
@


1.29
log
@.Xr compress 3 and a typo;
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.28 2003/09/05 07:24:59 jmc Exp $
d50 1
a50 1
.Op Fl cdfghlOnNqrtv123456789
d52 1
a53 1
.Op Fl o Ar filename
d56 1
a56 1
.Op Fl cfhlnNqrtv
d63 1
a63 1
.Op Fl cdfghlnNOqrtv123456789
d65 1
a66 1
.Op Fl o Ar filename
d69 1
a69 1
.Op Fl cfhnNqrltv
d166 15
a180 4
.It Fl V
Display the program version
.Pq RCS IDs of the source files
and exit.
d253 6
a265 21
.It Fl N
When compressing, save the original file name and time stamp in the
compressed file.
This information is saved by default when the deflate scheme is used.
When uncompressing or listing, use the time stamp and file name stored
in the compressed file, if any, for the uncompressed version.
.It Fl 1...9
Use deflate scheme with compression factor of
.Fl 1
to
.Fl 9 .
Compression factor
.Fl 1
is the fastest, but provides a poorer level of compression.
Compression factor
.Fl 9
provides the best level of compression, but is relatively slow.
The default is
.Fl 6 .
This option implies
.Fl g .
d270 6
d280 4
a283 6
.It Fl r
Recursive mode,
.Nm
will descend into specified directories.
.It Fl q
Be quiet, suppress all messages.
@


1.28
log
@- add gzcat to SYNOPSIS and DESCRIPTION
- add -g flag to zcat in SYNOPSIS
- .Nm cat -> .Xr cat 1

from myself and tedu@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.27 2003/09/05 04:46:35 tedu Exp $
d196 1
a196 1
to the standard ouput: let
d374 2
@


1.27
log
@add a null compressor from canacar@@ that lets gzcat work with uncompressed
files.
also introduce SMALLness that removes null and Z compressors to save floppy
space.
ok deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.26 2003/08/16 23:43:06 millert Exp $
d74 3
d90 1
a90 1
.Nm compress Fl g
d146 5
d179 2
d198 2
d201 1
a201 1
.Nm cat .
@


1.26
log
@Update HISTORY section.  Full gzip compat was added in 3.4 and the
'g' stands for gratis.
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.25 2003/08/06 13:10:48 jmc Exp $
d181 9
@


1.25
log
@typo;
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.24 2003/08/02 17:45:15 millert Exp $
d389 10
@


1.24
log
@Better description of how uncompressed file name is generated.
OK jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.23 2003/08/01 09:38:00 jmc Exp $
d131 1
a131 1
Entensions ending in
@


1.23
log
@cleanup;
ok millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.22 2003/07/20 13:25:52 millert Exp $
d114 23
a136 5
files by removing the
.Dq .Z
or
.Dq .gz
extension.
d226 2
a227 6
compressed version and the uncompressed file name is generated by
stripping the
.Dq Z
or
.Dq gz
extension from the compressed file name.
@


1.22
log
@document exit values
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.21 2003/07/17 20:06:01 millert Exp $
d141 3
a143 1
Display the program version (RCS Ids of the source files) and exit.
d147 2
a148 1
code limit (see below).
d174 1
a174 1
.Bl -tag -width Ds -offset indent
d176 1
a176 1
size of the compressed file
d178 1
a178 1
size of the file when uncompressed
d180 1
a180 1
ratio of the difference between the compressed and uncompressed
d183 1
a183 1
name the file will be saved as when uncompressing
d189 1
a189 1
.Bl -tag -width Ds -offset indent
d191 1
a191 1
name of the method used to compress the file
d193 3
a195 1
32-bit crc of the uncompressed file
d197 1
a197 1
date and time corresponding to the last data modification time
d264 2
a265 3
must be between 9 and 16 (the default is 16).
.\" XXX - use .br here to work-around an apparent bug in mdoc
.br
d307 1
a307 1
Typically, text such as source code or English is reduced by 50\-60% using
d309 1
a309 1
and by 60\-70% using
d337 1
d349 6
a354 6
.It RFC1950
ZLIB Compressed Data Format Specification
.It RFC1951
DEFLATE Compressed Data Format Specification
.It RFC1952
GZIP File Format Specification
@


1.21
log
@o implement -l, -n and -N (including setting outfile + mtime)
o make -v behave like GNU gzip for compress/decompress stats
o write a full gzip header w/ mtime and file name
o for -t/-l just don't write data instead of writing to /dev/null
o exit code is now more consistent with GNU gzip
o a crc error on decompress no longer causes unlink(outfile)
mickey@@ OK
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.20 2003/06/30 03:42:05 millert Exp $
d321 12
@


1.20
log
@Make usage() take the exit val are an argument and have the -h flag
use this to exit(0), not exit(1).  Some configure/install sqcripts
check for the existence of gzip by running "gzip -h" and checking
the subshell's exit value.  Noticed by naddy@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.19 2003/06/23 20:51:02 jmc Exp $
d50 1
a50 1
.Op Fl cdfghOqrtv123456789
d56 1
a56 1
.Op Fl cfhqrtv
d63 1
a63 1
.Op Fl cdfghOqrtv123456789
d69 1
a69 1
.Op Fl cfhqrtv
d168 47
@


1.19
log
@- further document differences between compress and gzip
- document -[1-9] mode for gzip
- add relevant RFCs to SEE ALSO

ok mickey@@ deraadt@@ millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.18 2003/06/22 22:17:46 deraadt Exp $
d50 1
a50 1
.Op Fl cdfgOqrtv123456789
d56 1
a56 1
.Op Fl cfqrtv
d63 1
a63 1
.Op Fl cdfgOqrtv123456789
d69 1
a69 1
.Op Fl cfqrtv
d74 1
a74 1
.Op Fl fqr
d166 2
@


1.18
log
@man page changes from jmc: use this as gzip too
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.17 2003/06/10 09:12:09 jmc Exp $
d83 2
a84 1
They are functionally identical, except that if invoked as
d86 7
a92 3
the deflate mode of compression is chosen by default (see the
.Fl g
flag).
d167 14
a180 1
Use deflate scheme with compression factor of one to nine.
d201 2
a202 1
uses a modified Lempel-Ziv algorithm.
d230 6
a235 2
uses a slightly different version of the Lempel-Ziv algorithm,
which can achieve even better compression.
d254 4
a257 1
Typically, text such as source code or English is reduced by 50\-60%.
d281 9
d296 6
@


1.17
log
@- section reorder
- COMPATIBILITY merge
- macro cleanup
- kill whitespace at EOL
- new sentence, new line

ssh pages ok markus@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.16 2003/06/03 02:56:07 millert Exp $
d42 3
a44 1
.Nm uncompress
d52 1
d56 14
a69 1
.Op Fl cfoqrtv
d72 1
d78 10
a87 3
.Nm
utility
reduces the size of the named files using adaptive Lempel-Ziv coding.
d106 3
a108 1
utility restores compressed files to their original form, renaming the
a134 2
.It Fl L
Display the source code license and exit.
d159 2
d210 4
d218 2
a226 1
.ne 8
d239 3
a241 1
utility exits with 0 on success, 1 if an error occurred, or 2 if one or
@


1.16
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.15 2002/12/17 16:16:08 millert Exp $
d67 1
a67 1
.Dq .Z , 
d69 1
a69 1
.Dq .gz 
d76 1
a76 1
the file is ignored (unless 
d119 1
a119 1
No files are modified (force 
d133 1
a133 1
.Nm gzip 
@


1.15
log
@o Implement -r (recursive) option
o add missing options to OPTSTRING
o add some option mixing sanity checks
o truncate existing files when uncompressing
o fixed some problems with suffix handling
This brings us closer to being able to replace GNU gzip; mickey@@ OK
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.14 2002/12/08 16:07:54 mickey Exp $
d19 1
a19 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
@


1.14
log
@grop long option names, like gzip.
add most of the gzip's options (a few unimplemented yet).
some cleaning, etc.
millert@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.13 2002/05/30 20:34:57 mickey Exp $
d52 1
a52 1
.Op Fl cdfgOqtv123456789
d57 1
a57 1
.Op Fl cfoqtv
d61 1
a61 1
.Op Fl fq
d149 4
@


1.13
log
@a grammar knit; from Aidan Kehoe <kehoea@@parhasard.net>
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.12 2001/06/17 16:34:47 mickey Exp $
d50 3
a52 1
.Op Fl cdftgOqv
d57 1
a57 1
.Op Fl cftoqv
d71 4
a74 1
.Dq .Z .
d80 3
a82 1
the file is ignored.
d89 2
d113 4
d123 3
a125 1
No files are modified.
d127 3
a129 1
Decompress the source files instead of compressing them.
d136 5
a140 1
Use deflate scheme which reportedly provides better compression rates.
d142 1
a142 1
Use old compression method (default is based on the program name).
d145 2
d150 1
a150 1
Be quiet, suppress any messages.
d152 1
a152 1
Print the percentage reduction of each file.
d155 1
d208 1
a208 1
utility exits 0 on success, 1 if an error occurred, or 2 if one or
@


1.12
log
@mention zcat
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.11 2000/03/23 21:10:15 aaron Exp $
d86 1
a86 1
is equivalent, by it's functionality, to
d88 1
a88 2
.Fl c
command.
@


1.11
log
@Fix some formatting problems I missed before.
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.10 2000/03/05 20:09:21 aaron Exp $
d58 3
d83 7
@


1.10
log
@Various improvements, including a few HISTORY sections added from FreeBSD.
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.9 1999/10/05 17:09:11 aaron Exp $
d146 2
a147 2
discards the table of substrings and rebuilds it from scratch.  This allows
the algorithm to adapt to the next
@


1.9
log
@- Put -d in SYNOPSIS.
- Fix typo: specifed -> specified.
- Some other miscellaneous fixes.
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.8 1999/07/04 11:53:52 aaron Exp $
d133 2
@


1.8
log
@correct use of .Nm; some other formatting nits
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.7 1999/06/05 01:21:22 aaron Exp $
d50 1
a50 1
.Op Fl cftgOqv
d59 1
d61 1
d74 1
d76 2
a77 2
restores the compressed files to their original form, renaming the
files by deleting the
d89 1
a89 1
If either the input and output files are not regular files, the checks for
d130 1
a130 1
flag is reached (the default is 16).
d132 1
a132 1
must be between 9 and 16.
d177 1
a177 1
was not specifed).
@


1.7
log
@- remove trailing white space
- remove arguments from .Os macros
- remove arguments from .Nm macros, where appropriate
- some more Dq/Sq/Ql insanity
- still lots to do in the usr.bin tree... :/
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.6 1998/09/23 04:32:38 aaron Exp $
a45 1
.\".Nm uncompress ,
a46 1
.\".Nm zcat
a57 2
.\".Nm zcat
.\".Op Ar
d59 1
a59 1
.Nm compress
a76 4
.\".Pp
.\".Nm Zcat
.\"is an alias for
.\".Dq "uncompress -c" .
d120 1
a120 1
.Nm compress
d134 1
a134 1
.Nm compress
d137 1
a137 1
.Nm compress
d140 1
a140 1
.Nm compress
d142 3
a144 1
the algorithm to adapt to the next "block" of the file.
d169 1
a169 1
.Nm compress
d186 1
a186 1
.Nm compress
@


1.6
log
@usr.bin/ man page repairs, a - e
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.5 1997/08/19 06:33:37 denny Exp $
d43 1
a43 1
.Os BSD 4.3
d59 1
a59 1
.Op Ar 
@


1.5
log
@Note POSIX 1003.2.
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.4 1997/07/06 20:22:53 mickey Exp $
d63 1
a63 1
.Nm Compress
d76 1
a76 1
.Nm Uncompress
d100 1
a100 1
.It Fl b
d115 1
a115 1
Use deflate scheme wich reported to provide better compression rates.
d118 1
a118 1
.It Fl o
d121 1
a121 1
Test the entefrity of each file leaving any files intact.
d123 1
a123 1
Be quite, suppress any messages.
d128 1
a128 1
.Nm Compress
d136 1
a136 1
.Ar Bits
d176 1
a176 1
utility exits 0 on success, 1 if an error occurs, and 2 if one or
d178 3
a180 1
size (and -f was not specifed).
d201 1
a201 1
The deflate compression support added in
@


1.4
log
@do gzip
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.3 1997/06/30 11:49:48 deraadt Exp $
d176 3
a178 1
utility exits 0 on success, and >0 if an error occurs.
d188 6
@


1.3
log
@bug fix; charnier
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.2 1996/06/26 05:32:19 deraadt Exp $
d52 1
a52 1
.Op Fl cfv
d54 1
d57 2
a58 1
.Op Fl cfv
d107 2
d114 10
a177 1
.Xr zcat 1
d191 2
@


1.2
log
@rcsid
@
text
@d1 1
a1 1
.\"	$OpenBSD: compress.1,v 1.5 1995/03/26 09:44:34 glass Exp $
d141 1
a141 1
.Ar uncompress
@


1.1
log
@Initial revision
@
text
@d1 1
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
