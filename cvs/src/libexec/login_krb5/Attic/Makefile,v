head	1.22;
access;
symbols
	OPENBSD_5_5:1.20.0.4
	OPENBSD_5_5_BASE:1.20
	OPENBSD_5_4:1.19.0.2
	OPENBSD_5_4_BASE:1.19
	OPENBSD_5_3:1.17.0.10
	OPENBSD_5_3_BASE:1.17
	OPENBSD_5_2:1.17.0.8
	OPENBSD_5_2_BASE:1.17
	OPENBSD_5_1_BASE:1.17
	OPENBSD_5_1:1.17.0.6
	OPENBSD_5_0:1.17.0.4
	OPENBSD_5_0_BASE:1.17
	OPENBSD_4_9:1.17.0.2
	OPENBSD_4_9_BASE:1.17
	OPENBSD_4_8:1.16.0.28
	OPENBSD_4_8_BASE:1.16
	OPENBSD_4_7:1.16.0.24
	OPENBSD_4_7_BASE:1.16
	OPENBSD_4_6:1.16.0.26
	OPENBSD_4_6_BASE:1.16
	OPENBSD_4_5:1.16.0.22
	OPENBSD_4_5_BASE:1.16
	OPENBSD_4_4:1.16.0.20
	OPENBSD_4_4_BASE:1.16
	OPENBSD_4_3:1.16.0.18
	OPENBSD_4_3_BASE:1.16
	OPENBSD_4_2:1.16.0.16
	OPENBSD_4_2_BASE:1.16
	OPENBSD_4_1:1.16.0.14
	OPENBSD_4_1_BASE:1.16
	OPENBSD_4_0:1.16.0.12
	OPENBSD_4_0_BASE:1.16
	OPENBSD_3_9:1.16.0.10
	OPENBSD_3_9_BASE:1.16
	OPENBSD_3_8:1.16.0.8
	OPENBSD_3_8_BASE:1.16
	OPENBSD_3_7:1.16.0.6
	OPENBSD_3_7_BASE:1.16
	OPENBSD_3_6:1.16.0.4
	OPENBSD_3_6_BASE:1.16
	OPENBSD_3_5:1.16.0.2
	OPENBSD_3_5_BASE:1.16
	OPENBSD_3_4:1.15.0.2
	OPENBSD_3_4_BASE:1.15
	OPENBSD_3_3:1.11.0.4
	OPENBSD_3_3_BASE:1.11
	OPENBSD_3_2:1.11.0.2
	OPENBSD_3_2_BASE:1.11
	OPENBSD_3_1:1.10.0.2
	OPENBSD_3_1_BASE:1.10
	OPENBSD_3_0:1.9.0.2
	OPENBSD_3_0_BASE:1.9;
locks; strict;
comment	@# @;


1.22
date	2014.04.22.11.03.40;	author reyk;	state dead;
branches;
next	1.21;

1.21
date	2014.04.15.20.55.42;	author miod;	state Exp;
branches;
next	1.20;

1.20
date	2013.08.06.19.05.57;	author miod;	state Exp;
branches;
next	1.19;

1.19
date	2013.06.19.19.45.03;	author robert;	state Exp;
branches;
next	1.18;

1.18
date	2013.06.17.19.23.33;	author robert;	state Exp;
branches;
next	1.17;

1.17
date	2010.10.13.08.14.22;	author jsg;	state Exp;
branches;
next	1.16;

1.16
date	2003.11.20.23.23.09;	author avsm;	state Exp;
branches;
next	1.15;

1.15
date	2003.07.16.19.10.14;	author deraadt;	state Exp;
branches;
next	1.14;

1.14
date	2003.07.15.19.02.19;	author deraadt;	state Exp;
branches;
next	1.13;

1.13
date	2003.05.17.00.43.46;	author hin;	state Exp;
branches;
next	1.12;

1.12
date	2003.05.13.04.41.00;	author hin;	state Exp;
branches;
next	1.11;

1.11
date	2002.05.11.00.20.20;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2002.03.05.00.09.32;	author deraadt;	state Exp;
branches;
next	1.9;

1.9
date	2001.07.19.18.21.50;	author deraadt;	state Exp;
branches;
next	1.8;

1.8
date	2001.07.02.14.07.07;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	2001.06.26.20.44.24;	author hin;	state Exp;
branches;
next	1.6;

1.6
date	2001.06.26.05.03.27;	author hin;	state Exp;
branches;
next	1.5;

1.5
date	2001.06.25.22.02.13;	author hin;	state Exp;
branches;
next	1.4;

1.4
date	2001.06.25.15.48.16;	author hin;	state Exp;
branches;
next	1.3;

1.3
date	2001.06.25.04.10.26;	author hin;	state Exp;
branches;
next	1.2;

1.2
date	2001.06.25.01.02.00;	author hin;	state Exp;
branches;
next	1.1;

1.1
date	2001.06.25.00.07.07;	author hin;	state Exp;
branches;
next	;


desc
@@


1.22
log
@Remove the kerberos login methods.

ok henning@@
@
text
@#	$OpenBSD: Makefile,v 1.21 2014/04/15 20:55:42 miod Exp $

.include <bsd.own.mk>

PROG=	login_krb5
SRCS=	login.c
MAN=	${PROG}.8
CFLAGS+=-Wall -I${.CURDIR}/../login_passwd
.PATH:	${.CURDIR}/../login_passwd

.if (${KERBEROS5:L} == "yes")
SRCS+=	login_krb5.c
DPADD+=	${LIBKRB5} ${LIBASN1} ${LIBCRYPTO}
LDADD+=	-lkrb5 -lasn1 -lcrypto
LDADD+= -lwind -lroken -lcom_err -lheimbase
CFLAGS+=-DKRB5
.endif

DPADD+=	${LIBUTIL}
LDADD+=	-lutil

BINOWN=	root
BINGRP= auth
BINMODE=4555
BINDIR= /usr/libexec/auth

.include <bsd.prog.mk>
@


1.21
log
@Remove workarounds for ld reaching MAXDSIZ on vax, now that MAXDSIZ is
more comfortable.
Reminded by brad@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.20 2013/08/06 19:05:57 miod Exp $
@


1.20
log
@Switch vax to gcc 3.3.6.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.19 2013/06/19 19:45:03 robert Exp $
a16 3
.if ${MACHINE} == "vax"
LDFLAGS+=-Wl,--no-keep-memory
.endif
@


1.19
log
@don't link to hx509, pthread and ntlm related libraries
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.18 2013/06/17 19:23:33 robert Exp $
d17 3
@


1.18
log
@link to the new kerberos libraries
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.17 2010/10/13 08:14:22 jsg Exp $
d14 2
a15 2
LDADD+=	-lkrb5 -lhx509 -lasn1 -lcrypto
LDADD+= -lwind -lroken -lcom_err -lpthread -lheimbase
@


1.17
log
@The heimdal code switched to using DES from libcrypto when 0.7.2
was imported over four years ago, so we don't need to link libdes
for kerberos anymore.

ok mikeb@@ deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.16 2003/11/20 23:23:09 avsm Exp $
d14 2
a15 1
LDADD+=	-lkrb5 -lasn1 -lcrypto
@


1.16
log
@remove -Werror from userland builds, to give us a chance to
use more verbose warning options if desired.
ok millert@@, henning@@, david@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.15 2003/07/16 19:10:14 deraadt Exp $
d13 2
a14 2
DPADD+=	${LIBKRB5} ${LIBASN1} ${LIBCRYPTO} ${LIBDES}
LDADD+=	-lkrb5 -lasn1 -lcrypto -ldes
@


1.15
log
@some minor DPADD changes
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.14 2003/07/15 19:02:19 deraadt Exp $
d8 1
a8 1
CFLAGS+=-Wall -Werror -I${.CURDIR}/../login_passwd
@


1.14
log
@stop using libcom_err, it is built into krb5
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.13 2003/05/17 00:43:46 hin Exp $
d13 1
a13 1
DPADD+=	${LIBKRB5} ${LIBASN1} ${LIBKRB} ${LIBCRYPTO} ${LIBKAFS} ${LIBDES}
@


1.13
log
@Don't link with -lkrb -lkafs
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.12 2003/05/13 04:41:00 hin Exp $
d13 2
a14 3
DPADD+=	${LIBKRB5} ${LIBASN1} ${LIBKRB} ${LIBCRYPTO} ${LIBCOM_ERR} ${LIBKAFS} \
	${LIBDES}
LDADD+=	-lkrb5 -lasn1 -lcrypto -lcom_err -ldes
@


1.12
log
@Disable krb524.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.11 2002/05/11 00:20:20 espie Exp $
d15 1
a15 1
LDADD+=	-lkrb5 -lasn1 -lcrypto -lcom_err -lkrb -lkafs -ldes
@


1.11
log
@Add missing libraries to bsd.prog.mk (mostly kerberosV)
Use them in DPADD throughout the tree.
Fix a few mispells (LIBMATH -> LIBM...)
Wipe obsolete lib (LIBRESOLV)
Sort added missing libraries, move obsolete stuff apart.
Synch documentation in bsd.README

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.10 2002/03/05 00:09:32 deraadt Exp $
d11 1
a11 1
.if (${KERBEROS:L} == "yes")
d16 1
a16 1
CFLAGS+=-DKRB524 -DKRB5
@


1.10
log
@add -ldes linking
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.9 2001/07/19 18:21:50 deraadt Exp $
d13 2
a14 1
DPADD+=	${LIBKRB} ${LIBCRYPTO}
@


1.9
log
@more places that need -lkafs
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 2001/07/02 14:07:07 millert Exp $
d14 1
a14 1
LDADD+=	-lkrb5 -lasn1 -lcrypto -lcom_err -lkrb -lkafs
@


1.8
log
@Fix building on non-kerberos systems
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 2001/06/26 20:44:24 hin Exp $
d14 1
a14 1
LDADD+=	-lkrb5 -lasn1 -lcrypto -lcom_err -lkrb
@


1.7
log
@-DKRB5 makes this work much better...
@
text
@d1 3
a3 1
#	$OpenBSD: Makefile,v 1.6 2001/06/26 05:03:27 hin Exp $
d6 1
a6 1
SRCS=	login.c login_krb5.c
d8 1
a8 2
LDADD=  -lkrb5 -lasn1 -lcrypto -lcom_err -lkrb
CFLAGS+=-DKRB524 -DKRB5 -Wall -Werror -I${.CURDIR}/../login_passwd
d10 10
@


1.6
log
@Cleanup and unify login_passwd, login_krb4, login_krb4-or-pwd, login_krb5 and
login_krb5-or-pwd.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.5 2001/06/25 22:02:13 hin Exp $
d7 1
a7 1
CFLAGS+=-DKRB524 -Wall -Werror -I${.CURDIR}/../login_passwd
@


1.5
log
@#ifdef KRB4  ->  #ifdef KRB524
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 2001/06/25 15:48:16 hin Exp $
d4 1
d7 2
a8 1
CFLAGS+=-DKRB524 -Wall -Werror
@


1.4
log
@-Wall -Werror
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.3 2001/06/25 04:10:26 hin Exp $
d6 1
a6 1
CFLAGS+=-DKRB4 -Wall -Werror
@


1.3
log
@Manpage login_krb5(8), made by copying login_krb4(8) and changing some pieces.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.2 2001/06/25 01:02:00 hin Exp $
d6 1
a6 1
CFLAGS+=-DKRB4
@


1.2
log
@Enable KerberosIV support
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.1 2001/06/25 00:07:07 hin Exp $
a3 1
SRCS=	login_krb5.c
a4 1
NOMAN=
@


1.1
log
@BSD Auth login script for KerberosV. Written by me with assistance from
millert@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.1 2001/06/24 23:26:22 hin Exp $
d8 1
@

