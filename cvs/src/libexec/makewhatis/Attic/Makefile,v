head	1.11;
access;
symbols
	OPENBSD_6_0:1.10.0.16
	OPENBSD_6_0_BASE:1.10
	OPENBSD_5_9:1.10.0.12
	OPENBSD_5_9_BASE:1.10
	OPENBSD_5_8:1.10.0.14
	OPENBSD_5_8_BASE:1.10
	OPENBSD_5_7:1.10.0.6
	OPENBSD_5_7_BASE:1.10
	OPENBSD_5_6:1.10.0.10
	OPENBSD_5_6_BASE:1.10
	OPENBSD_5_5:1.10.0.8
	OPENBSD_5_5_BASE:1.10
	OPENBSD_5_4:1.10.0.4
	OPENBSD_5_4_BASE:1.10
	OPENBSD_5_3:1.10.0.2
	OPENBSD_5_3_BASE:1.10
	OPENBSD_5_2:1.9.0.8
	OPENBSD_5_2_BASE:1.9
	OPENBSD_5_1_BASE:1.9
	OPENBSD_5_1:1.9.0.6
	OPENBSD_5_0:1.9.0.4
	OPENBSD_5_0_BASE:1.9
	OPENBSD_4_9:1.9.0.2
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.8.0.8
	OPENBSD_4_8_BASE:1.8
	OPENBSD_4_7:1.8.0.4
	OPENBSD_4_7_BASE:1.8
	OPENBSD_4_6:1.8.0.6
	OPENBSD_4_6_BASE:1.8
	OPENBSD_4_5:1.8.0.2
	OPENBSD_4_5_BASE:1.8
	OPENBSD_4_4:1.7.0.18
	OPENBSD_4_4_BASE:1.7
	OPENBSD_4_3:1.7.0.16
	OPENBSD_4_3_BASE:1.7
	OPENBSD_4_2:1.7.0.14
	OPENBSD_4_2_BASE:1.7
	OPENBSD_4_1:1.7.0.12
	OPENBSD_4_1_BASE:1.7
	OPENBSD_4_0:1.7.0.10
	OPENBSD_4_0_BASE:1.7
	OPENBSD_3_9:1.7.0.8
	OPENBSD_3_9_BASE:1.7
	OPENBSD_3_8:1.7.0.6
	OPENBSD_3_8_BASE:1.7
	OPENBSD_3_7:1.7.0.4
	OPENBSD_3_7_BASE:1.7
	OPENBSD_3_6:1.7.0.2
	OPENBSD_3_6_BASE:1.7
	OPENBSD_3_5:1.6.0.18
	OPENBSD_3_5_BASE:1.6
	OPENBSD_3_4:1.6.0.16
	OPENBSD_3_4_BASE:1.6
	OPENBSD_3_3:1.6.0.14
	OPENBSD_3_3_BASE:1.6
	OPENBSD_3_2:1.6.0.12
	OPENBSD_3_2_BASE:1.6
	OPENBSD_3_1:1.6.0.10
	OPENBSD_3_1_BASE:1.6
	OPENBSD_3_0:1.6.0.8
	OPENBSD_3_0_BASE:1.6
	OPENBSD_2_9:1.6.0.6
	OPENBSD_2_9_BASE:1.6
	OPENBSD_2_8:1.6.0.4
	OPENBSD_2_8_BASE:1.6
	OPENBSD_2_7:1.6.0.2
	OPENBSD_2_7_BASE:1.6
	OPENBSD_2_6:1.5.0.8
	OPENBSD_2_6_BASE:1.5
	OPENBSD_2_5:1.5.0.6
	OPENBSD_2_5_BASE:1.5
	OPENBSD_2_4:1.5.0.4
	OPENBSD_2_4_BASE:1.5
	OPENBSD_2_3:1.5.0.2
	OPENBSD_2_3_BASE:1.5
	OPENBSD_2_2:1.3.0.4
	OPENBSD_2_2_BASE:1.3
	OPENBSD_2_1:1.3.0.2
	OPENBSD_2_1_BASE:1.3
	OPENBSD_2_0:1.1.1.1.0.2
	OPENBSD_2_0_BASE:1.1.1.1
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.11
date	2016.08.22.19.41.18;	author schwarze;	state dead;
branches;
next	1.10;
commitid	ey7eLp6W2n4XJ7B4;

1.10
date	2013.01.29.11.08.55;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2011.01.26.15.10.59;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2008.09.01.17.18.19;	author drahn;	state Exp;
branches;
next	1.7;

1.7
date	2004.08.06.12.05.08;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2000.02.03.18.10.48;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	97.11.08.07.09.30;	author todd;	state Exp;
branches;
next	1.4;

1.4
date	97.11.05.19.20.46;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	97.04.27.20.56.20;	author millert;	state Exp;
branches;
next	1.2;

1.2
date	96.12.08.15.17.19;	author downsj;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.43.19;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.43.19;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.11
log
@This code served us well for many years,
but we are unlikely to reactivate it; espie@@ agrees.
The new code is in /usr/src/usr.bin/mandoc/mandocdb.c.
@
text
@#	$OpenBSD: Makefile,v 1.10 2013/01/29 11:08:55 espie Exp $

MAN=makewhatis.8
NOPROG=
PACKAGES= \
	OpenBSD/Makewhatis.pm \
	OpenBSD/Makewhatis/Check.pm \
	OpenBSD/Makewhatis/Find.pm \
	OpenBSD/Makewhatis/Formated.pm \
	OpenBSD/Makewhatis/Subject.pm \
	OpenBSD/Makewhatis/Unformated.pm \
	OpenBSD/Makewhatis/Whatis.pm

SCRIPTS= \
	makewhatis

LIBBASE=/usr/libdata/perl5

realinstall: 
.for i in ${PACKAGES}
	${INSTALL} -d -o ${LIBOWN} -g ${LIBGRP} -m ${DIRMODE} \
		${DESTDIR}${LIBBASE}/${i:H}
	${INSTALL} ${INSTALL_COPY} -o ${LIBOWN} -g ${LIBGRP} -m ${LIBMODE} \
		${.CURDIR}/$i ${DESTDIR}${LIBBASE}/$i
.endfor
	${INSTALL} ${INSTALL_COPY} -o ${BINOWN} -g ${BINGRP} -m ${BINMODE} \
		${.CURDIR}/makewhatis ${DESTDIR}${BINDIR}/makewhatis

.include <bsd.prog.mk>
@


1.10
log
@refactor code a bit to actually store subjects in the subject object
reformat for 8 spaces tab.
okay millert@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.9 2011/01/26 15:10:59 espie Exp $
@


1.9
log
@placeholder for future changes, as discussed with miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 2008/09/01 17:18:19 drahn Exp $
a25 1
.for i in ${SCRIPTS}
d27 1
a27 2
		${.CURDIR}/$i ${DESTDIR}${BINDIR}/$i
.endfor
@


1.8
log
@Install files in the correct directory even with NOMAN set.
Theo made a number of suggestions/enhancements  to get to this final version.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 2004/08/06 12:05:08 espie Exp $
d10 1
@


1.7
log
@Reorganize makewhatis in smaller modules.
Avoid pulling unneeded code: for instance, if you have only formated
manpages in your system, Unformated will never be used; Check put aside
and only used in -p mode. -t mode won't pull Whatis. Find; File::Compare
and File::Copy and File::Temp likewise.

okay millert@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.6 2000/02/03 18:10:48 espie Exp $
d4 1
d18 1
a18 5
# Nothing to build
depend:
all:

install: 
d30 1
a30 11
clean:

.include <bsd.own.mk>

.if !defined(NOMAN)
install: maninstall
.include <bsd.man.mk>
.endif

.include <bsd.obj.mk>
.include <bsd.subdir.mk>
@


1.6
log
@Switch to perl: *much* faster (about ten times), *much* more flexible,
simpler to understand (no more sed), and no temporary files.

Some useful comment by Matt Patton.

Ok'ed millert@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.5 1997/11/08 07:09:30 todd Exp $
d4 7
a10 1
NOPROG=
d12 17
a28 1
afterinstall:
d30 11
a40 1
		${.CURDIR}/makewhatis.pl ${DESTDIR}${BINDIR}/makewhatis
d42 2
a43 1
.include <bsd.prog.mk>
@


1.5
log
@With the new manpage, we need an obj subdir for ro /usr/src builds.
Noticed by dgregor@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 1997/11/05 19:20:46 deraadt Exp $
d8 1
a8 1
		${.CURDIR}/makewhatis.sh ${DESTDIR}${BINDIR}/makewhatis
@


1.4
log
@man page from netbsd
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.3 1997/04/27 20:56:20 millert Exp $
a4 1
NOOBJ=
@


1.3
log
@COPY -> INSTALL_COPY and STRIP -> INSTALL_STRIP
This fixes namespace problems where STRIP is sometimes used as
the name of the strip(1) to use and other times used as
the flag to send install(1) when stripping (or not).
COPY doesn't have this problem (yet) but was poorly named.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.2 1996/12/08 15:17:19 downsj Exp $
d3 1
a3 1
NOMAN=
@


1.2
log
@install -> ${INSTALL}, -c -> ${COPY}
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.1.1.1 1995/10/18 08:43:19 deraadt Exp $
d8 1
a8 1
	${INSTALL} ${COPY} -o ${BINOWN} -g ${BINGRP} -m ${BINMODE} \
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
#	$Id: Makefile,v 1.1 1993/12/21 03:28:00 cgd Exp $
d8 2
a9 2
	install -c -o ${BINOWN} -g ${BINGRP} -m ${BINMODE} \
		$(.CURDIR)/makewhatis.sh $(DESTDIR)$(BINDIR)/makewhatis
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
