head	1.2;
access;
symbols
	OPENBSD_3_2:1.1.1.1.0.20
	OPENBSD_3_2_BASE:1.1.1.1
	OPENBSD_3_1:1.1.1.1.0.18
	OPENBSD_3_1_BASE:1.1.1.1
	OPENBSD_3_0:1.1.1.1.0.16
	OPENBSD_3_0_BASE:1.1.1.1
	OPENBSD_2_9:1.1.1.1.0.14
	OPENBSD_2_9_BASE:1.1.1.1
	OPENBSD_2_8:1.1.1.1.0.12
	OPENBSD_2_8_BASE:1.1.1.1
	OPENBSD_2_7:1.1.1.1.0.10
	OPENBSD_2_7_BASE:1.1.1.1
	OPENBSD_2_6:1.1.1.1.0.8
	OPENBSD_2_6_BASE:1.1.1.1
	OPENBSD_2_5:1.1.1.1.0.6
	OPENBSD_2_5_BASE:1.1.1.1
	OPENBSD_2_4:1.1.1.1.0.4
	OPENBSD_2_4_BASE:1.1.1.1
	OPENBSD_2_3:1.1.1.1.0.2
	OPENBSD_2_3_BASE:1.1.1.1
	smtpd_2_0:1.1.1.1
	Obtuse:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2002.10.04.23.16.41;	author deraadt;	state dead;
branches;
next	1.1;

1.1
date	97.12.12.05.50.26;	author beck;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	97.12.12.05.50.26;	author beck;	state Exp;
branches;
next	;


desc
@@


1.2
log
@smtpd leaves the building
@
text
@
	First, read the file INSTALL. This file gives details of what
needs to be in the chroot jail for smtpd to work properly on a SunOS
5.5.1 machine.

	The basics are, you need /etc/netconfig, /etc/resolv.conf and
/etc/nsswitch.conf, as well as /dev/udp. the nsswitch.conf file must
have "files" only for everything except hosts which should be "files 
dns". you'll need to do a mknod to make a /dev/udp in the chroot, major
11, minor 41. An ls -lR, and the etc/nsswitch.conf file used are below. 
(This machine is in the Canada/Mountain timezone, so your timezone files
will be different most likely). 

---------ls -lR---------
/usr/spool/smtpd:
total 6
drwxr-xr-x   2 root     other        512 Jul 28 16:26 dev
drwxr-xr-x   2 root     other        512 Aug  4 14:26 etc
drwxr-xr-x   3 root     other        512 Jul 23 10:54 usr

/usr/spool/smtpd/dev:
total 0
crw-rw-rw-   1 root     other     11, 41 Jul 28 16:26 udp

/usr/spool/smtpd/etc:
total 28
-r-xr-xr-x   1 root     other        467 Jul 23 10:53 TIMEZONE
-r--r--r--   1 root     other       1064 Jul 28 16:08 netconfig
-rw-r--r--   1 root     other        690 Jul 23 10:46 nsswitch.conf
-rw-r--r--   1 root     other       2535 Aug  7 20:06 smtpd_check_rules

/usr/spool/smtpd/usr:
total 2
drwxr-xr-x   3 root     other        512 Jul 23 10:54 share

/usr/spool/smtpd/usr/share:
total 2
drwxr-xr-x   3 root     other        512 Jul 23 10:54 lib

/usr/spool/smtpd/usr/share/lib:
total 2
drwxr-xr-x   3 root     other        512 Jul 23 10:54 zoneinfo

/usr/spool/smtpd/usr/share/lib/zoneinfo:
total 2
drwxr-xr-x   2 root     other        512 Jul 23 10:55 Canada

/usr/spool/smtpd/usr/share/lib/zoneinfo/Canada:
total 2
-rw-r--r--   1 root     other        842 Jul 23 10:55 Mountain


------------8< /usr/spool/smtpd/etc/nsswitch.conf  8<-------------
#
# /etc/nsswitch.files:
#
# An example file that could be copied over to /etc/nsswitch.conf; it
# does not use any naming service.
#
# "hosts:" and "services:" in this file are used only if the
# /etc/netconfig file has a "-" for nametoaddr_libs of "inet" transports.

passwd:     files
group:      files
hosts:      files dns
networks:   files
protocols:  files
rpc:        files
ethers:     files
netmasks:   files	
bootparams: files
publickey:  files
# At present there isn't a 'files' backend for netgroup;  the system will 
#   figure it out pretty quickly, and won't use netgroups at all.
netgroup:   files
automount:  files
aliases:    files
services:   files
sendmailvars:   files
@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@	Obtuse smtpd v 2.0 source tree import
@
text
@@
