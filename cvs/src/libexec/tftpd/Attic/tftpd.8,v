head	1.27;
access;
symbols
	OPENBSD_5_2:1.26.0.16
	OPENBSD_5_2_BASE:1.26
	OPENBSD_5_1_BASE:1.26
	OPENBSD_5_1:1.26.0.14
	OPENBSD_5_0:1.26.0.12
	OPENBSD_5_0_BASE:1.26
	OPENBSD_4_9:1.26.0.10
	OPENBSD_4_9_BASE:1.26
	OPENBSD_4_8:1.26.0.8
	OPENBSD_4_8_BASE:1.26
	OPENBSD_4_7:1.26.0.4
	OPENBSD_4_7_BASE:1.26
	OPENBSD_4_6:1.26.0.6
	OPENBSD_4_6_BASE:1.26
	OPENBSD_4_5:1.26.0.2
	OPENBSD_4_5_BASE:1.26
	OPENBSD_4_4:1.25.0.4
	OPENBSD_4_4_BASE:1.25
	OPENBSD_4_3:1.25.0.2
	OPENBSD_4_3_BASE:1.25
	OPENBSD_4_2:1.22.0.2
	OPENBSD_4_2_BASE:1.22
	OPENBSD_4_1:1.21.0.4
	OPENBSD_4_1_BASE:1.21
	OPENBSD_4_0:1.21.0.2
	OPENBSD_4_0_BASE:1.21
	OPENBSD_3_9:1.19.0.2
	OPENBSD_3_9_BASE:1.19
	OPENBSD_3_8:1.18.0.4
	OPENBSD_3_8_BASE:1.18
	OPENBSD_3_7:1.18.0.2
	OPENBSD_3_7_BASE:1.18
	OPENBSD_3_6:1.17.0.2
	OPENBSD_3_6_BASE:1.17
	OPENBSD_3_5:1.15.0.2
	OPENBSD_3_5_BASE:1.15
	OPENBSD_3_4:1.14.0.2
	OPENBSD_3_4_BASE:1.14
	OPENBSD_3_3:1.11.0.2
	OPENBSD_3_3_BASE:1.11
	OPENBSD_3_2:1.10.0.6
	OPENBSD_3_2_BASE:1.10
	OPENBSD_3_1:1.10.0.4
	OPENBSD_3_1_BASE:1.10
	OPENBSD_3_0:1.10.0.2
	OPENBSD_3_0_BASE:1.10
	OPENBSD_2_9:1.9.0.2
	OPENBSD_2_9_BASE:1.9
	OPENBSD_2_8:1.8.0.2
	OPENBSD_2_8_BASE:1.8
	OPENBSD_2_7:1.7.0.4
	OPENBSD_2_7_BASE:1.7
	OPENBSD_2_6:1.7.0.2
	OPENBSD_2_6_BASE:1.7
	OPENBSD_2_5:1.5.0.4
	OPENBSD_2_5_BASE:1.5
	OPENBSD_2_4:1.5.0.2
	OPENBSD_2_4_BASE:1.5
	OPENBSD_2_3:1.4.0.2
	OPENBSD_2_3_BASE:1.4
	OPENBSD_2_2:1.3.0.2
	OPENBSD_2_2_BASE:1.3
	OPENBSD_2_1:1.2.0.4
	OPENBSD_2_1_BASE:1.2
	OPENBSD_2_0:1.2.0.2
	OPENBSD_2_0_BASE:1.2
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@.\" @;


1.27
date	2012.08.16.04.17.11;	author dlg;	state dead;
branches;
next	1.26;

1.26
date	2008.11.14.07.34.59;	author stevesk;	state Exp;
branches;
next	1.25;

1.25
date	2007.11.29.11.38.46;	author jmc;	state Exp;
branches;
next	1.24;

1.24
date	2007.11.27.15.13.08;	author jmc;	state Exp;
branches;
next	1.23;

1.23
date	2007.11.26.18.39.06;	author jolan;	state Exp;
branches;
next	1.22;

1.22
date	2007.05.31.19.19.41;	author jmc;	state Exp;
branches;
next	1.21;

1.21
date	2006.07.20.13.30.02;	author jmc;	state Exp;
branches;
next	1.20;

1.20
date	2006.07.20.10.17.04;	author mglocker;	state Exp;
branches;
next	1.19;

1.19
date	2006.01.02.16.33.43;	author jmc;	state Exp;
branches;
next	1.18;

1.18
date	2004.11.22.00.58.39;	author jmc;	state Exp;
branches;
next	1.17;

1.17
date	2004.04.10.09.22.18;	author jmc;	state Exp;
branches;
next	1.16;

1.16
date	2004.04.03.10.15.37;	author jmc;	state Exp;
branches;
next	1.15;

1.15
date	2004.01.12.12.07.41;	author jmc;	state Exp;
branches;
next	1.14;

1.14
date	2003.08.08.09.26.03;	author jmc;	state Exp;
branches;
next	1.13;

1.13
date	2003.06.02.19.38.25;	author millert;	state Exp;
branches;
next	1.12;

1.12
date	2003.06.02.14.39.30;	author jmc;	state Exp;
branches;
next	1.11;

1.11
date	2003.02.14.23.20.36;	author jmc;	state Exp;
branches;
next	1.10;

1.10
date	2001.07.31.17.05.59;	author mpech;	state Exp;
branches;
next	1.9;

1.9
date	2001.03.08.02.24.28;	author deraadt;	state Exp;
branches;
next	1.8;

1.8
date	2000.10.30.17.46.30;	author aaron;	state Exp;
branches;
next	1.7;

1.7
date	99.07.09.13.35.51;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	99.05.15.00.56.07;	author aaron;	state Exp;
branches;
next	1.5;

1.5
date	98.10.10.15.08.36;	author ian;	state Exp;
branches;
next	1.4;

1.4
date	98.03.10.04.50.40;	author millert;	state Exp;
branches;
next	1.3;

1.3
date	97.06.11.21.19.46;	author downsj;	state Exp;
branches;
next	1.2;

1.2
date	96.10.08.01.20.21;	author michaels;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.43.25;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.43.25;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.27
log
@send inetd tftpd to the attic.
@
text
@.\"   $OpenBSD: tftpd.8,v 1.26 2008/11/14 07:34:59 stevesk Exp $
.\"
.\" Copyright (c) 1983, 1991 The Regents of the University of California.
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"	from: @@(#)tftpd.8	6.7 (Berkeley) 5/13/91
.\"	$OpenBSD: tftpd.8,v 1.26 2008/11/14 07:34:59 stevesk Exp $
.\"
.Dd $Mdocdate: November 14 2008 $
.Dt TFTPD 8
.Os
.Sh NAME
.Nm tftpd
.Nd
.Tn DARPA
Trivial File Transfer Protocol server
.Sh SYNOPSIS
.Nm tftpd
.Op Fl cl
.Op Ar directory ...
.Nm tftpd
.Op Fl cl
.Fl s Ar directory
.Sh DESCRIPTION
.Nm
is a server which supports the
.Tn DARPA
Trivial File Transfer Protocol.
The TFTP server operates at the port indicated in the
.Ql tftp
service description; see
.Xr services 5 .
The server is normally started by
.Xr inetd 8 .
.Pp
The use of
.Xr tftp 1
does not require an account or password on the remote system.
Due to the lack of authentication information,
.Nm
will allow only publicly readable files to be accessed.
Files may be written only if they already exist and are publicly writable,
unless the
.Fl c
flag is specified
.Pq see below .
Note that this extends the concept of
.Dq public
to include
all users on all hosts that can be reached through the network;
this may not be appropriate on all systems, and its implications
should be considered before enabling TFTP service.
.Pp
The server should have the user ID with the lowest possible privilege,
unless the
.Fl s
flag is specified
.Pq see below ,
in which case it must be started with user ID 0.
.Pp
Access to files may be restricted by invoking
.Nm
with a list of directories by including pathnames
as server program arguments in
.Pa /etc/inetd.conf .
In this case access is restricted to files whose
names are prefixed by one of the given directories.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl c
Allow new files to be created;
otherwise uploaded files must already exist.
Files are created with default permissions
allowing anyone to read or write to them.
.It Fl l
Log the client IP, type of request, and filename using
.Xr syslog 3
with a level of
.Dv LOG_INFO .
.It Fl s Ar directory
.Xr chroot 2
to
.Ar directory
on startup;
the remote host is not expected to pass the directory
as part of the file name to transfer.
This option is intended primarily for
compatibility with SunOS boot ROMs which do not include a directory name.
.El
.Sh SEE ALSO
.Xr tftp 1 ,
.Xr inetd 8 ,
.Xr pxeboot 8 ,
.Xr syslogd 8 ,
.Xr tftp-proxy 8
.Sh HISTORY
The
.Nm
command appeared in
.Bx 4.2 .
.Pp
The
.Fl s
flag appeared in
.Nx 0.9a .
.Pp
The
.Fl c
flag was added in
.Ox 2.1 .
.Pp
The
.Fl l
flag was added in
.Ox 4.3 .
.Sh BUGS
Many TFTP clients will not transfer files over 16744448 octets
.Pq 32767 blocks .
@


1.26
log
@LOG_INFO is a level not a facility; input and ok jmc@@
@
text
@d1 1
a1 1
.\"   $OpenBSD: tftpd.8,v 1.25 2007/11/29 11:38:46 jmc Exp $
d31 1
a31 1
.\"	$OpenBSD: tftpd.8,v 1.25 2007/11/29 11:38:46 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: November 29 2007 $
@


1.25
log
@- get synopsis/usage() right
- improve options text

no one objected...
@
text
@d1 1
a1 1
.\"   $OpenBSD: tftpd.8,v 1.24 2007/11/27 15:13:08 jmc Exp $
d31 1
a31 1
.\"	$OpenBSD: tftpd.8,v 1.24 2007/11/27 15:13:08 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: November 27 2007 $
d103 1
a103 1
with a facility of
@


1.24
log
@tweak previous;
@
text
@d1 1
a1 1
.\"   $OpenBSD: tftpd.8,v 1.23 2007/11/26 18:39:06 jolan Exp $
d31 1
a31 1
.\"	$OpenBSD: tftpd.8,v 1.23 2007/11/26 18:39:06 jolan Exp $
d33 1
a33 1
.Dd $Mdocdate: November 26 2007 $
d43 1
d46 2
a47 2
.Op Fl cls
.Op Ar directory
d96 4
a99 8
If the
.Fl c
flag is used,
.Nm
will allow new files to be created; otherwise uploaded files must already
exist.
Files are created with default permissions allowing anyone to read
or write to them.
d101 1
a101 3
If the
.Fl l
flag is used, the client IP, type of request, and filename are logged using
d105 1
a105 6
.It Fl s
When using the
.Fl s
flag with a directory name,
.Nm
will
d107 4
a110 1
on startup; therefore the remote host is not expected to pass the directory
@


1.23
log
@add logging option, ok deraadt@@
@
text
@d1 1
a1 1
.\"   $OpenBSD: tftpd.8,v 1.22 2007/05/31 19:19:41 jmc Exp $
d31 1
a31 1
.\"	$OpenBSD: tftpd.8,v 1.22 2007/05/31 19:19:41 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: May 31 2007 $
d106 3
a108 2
flag is used, the client IP, type of request, and filename will be logged using
syslog with a facility of
d126 2
a127 2
.Xr tftp-proxy 8 ,
.Xr syslogd 8
@


1.22
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"   $OpenBSD: tftpd.8,v 1.21 2006/07/20 13:30:02 jmc Exp $
d31 1
a31 1
.\"	$OpenBSD: tftpd.8,v 1.21 2006/07/20 13:30:02 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate$
d45 1
a45 1
.Op Fl cs
d103 6
d125 2
a126 1
.Xr tftp-proxy 8
d142 5
@


1.21
log
@no need for .Pp after sections;
@
text
@d1 1
a1 1
.\"   $OpenBSD: tftpd.8,v 1.20 2006/07/20 10:17:04 mglocker Exp $
d31 1
a31 1
.\"	$OpenBSD: tftpd.8,v 1.20 2006/07/20 10:17:04 mglocker Exp $
d33 1
a33 1
.Dd June 11, 1997
@


1.20
log
@Adjust BUGS section; we do support blocksize negotiation for tftpd
now.

Remembered by jmc@@
@
text
@d1 1
a1 1
.\"   $OpenBSD: tftpd.8,v 1.19 2006/01/02 16:33:43 jmc Exp $
d31 1
a31 1
.\"	$OpenBSD: tftpd.8,v 1.19 2006/01/02 16:33:43 jmc Exp $
a135 1
.Pp
@


1.19
log
@+.Xr tftp-proxy 8
@
text
@d1 1
a1 1
.\"   $OpenBSD: tftpd.8,v 1.18 2004/11/22 00:58:39 jmc Exp $
d31 1
a31 1
.\"	$OpenBSD: tftpd.8,v 1.18 2004/11/22 00:58:39 jmc Exp $
a135 7
This implementation of
.Nm
does not support blocksize negotiation
.Pq RFC 1783 ,
so files larger than 33488896 octets
.Pq 65535 blocks
cannot be transferred.
@


1.18
log
@.{N,O}x fixes;
@
text
@d1 1
a1 1
.\"   $OpenBSD: tftpd.8,v 1.17 2004/04/10 09:22:18 jmc Exp $
d31 1
a31 1
.\"	$OpenBSD: tftpd.8,v 1.17 2004/04/10 09:22:18 jmc Exp $
d118 2
a119 1
.Xr pxeboot 8
@


1.17
log
@improve BUGS:

- current implementations do not support transfers >65535 blocks
- 32767 block limit does not apply to this tftp implementation

other stuff:

- kill unnecessary Ns macros
- uppercase tftp where applicable

discussed w/ tom, and wording improvements from him;
@
text
@d1 1
a1 1
.\"   $OpenBSD: tftpd.8,v 1.16 2004/04/03 10:15:37 jmc Exp $
d31 1
a31 1
.\"	$OpenBSD: tftpd.8,v 1.16 2004/04/03 10:15:37 jmc Exp $
d128 1
a128 1
.Nx 0.9 a.
@


1.16
log
@add pxeboot references to FILES and SEE ALSO;
ok deraadt@@
@
text
@d1 1
a1 1
.\"   $OpenBSD: tftpd.8,v 1.15 2004/01/12 12:07:41 jmc Exp $
d31 1
a31 1
.\"	$OpenBSD: tftpd.8,v 1.15 2004/01/12 12:07:41 jmc Exp $
d51 2
a52 6
Trivial File Transfer
Protocol.
The
.Tn TFTP
server operates
at the port indicated in the
d75 1
a75 1
should be considered before enabling tftp service.
d135 7
a141 2
Files larger than 33488896 octets (65535 blocks) cannot be transferred
without client and server supporting blocksize negotiation (RFC 1783).
d143 2
a144 1
Many tftp clients will not transfer files over 16744448 octets (32767 blocks).
@


1.15
log
@make DESCRIPTION not conflict with the options;
standard options list;
@
text
@d1 1
a1 1
.\"   $OpenBSD: tftpd.8,v 1.14 2003/08/08 09:26:03 jmc Exp $
d31 1
a31 1
.\"	$OpenBSD: tftpd.8,v 1.14 2003/08/08 09:26:03 jmc Exp $
d121 2
a122 1
.Xr inetd 8
@


1.14
log
@refer to RFCs consistently (RFC XXXX);
@
text
@d1 1
a1 1
.\"   $OpenBSD: tftpd.8,v 1.13 2003/06/02 19:38:25 millert Exp $
d31 1
a31 1
.\"	$OpenBSD: tftpd.8,v 1.13 2003/06/02 19:38:25 millert Exp $
d69 5
a73 1
Files may be written only if they already exist and are publicly writable.
d80 7
a86 1
The server should have the user ID with the lowest possible privilege.
d96 3
d107 1
a107 1
.Pp
d118 1
@


1.13
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
.\"   $OpenBSD: tftpd.8,v 1.12 2003/06/02 14:39:30 jmc Exp $
d31 1
a31 1
.\"	$OpenBSD: tftpd.8,v 1.12 2003/06/02 14:39:30 jmc Exp $
d125 1
a125 1
without client and server supporting blocksize negotiation (RFC1783).
@


1.12
log
@section reorder;
@
text
@d1 1
a1 1
.\"   $OpenBSD: tftpd.8,v 1.11 2003/02/14 23:20:36 jmc Exp $
d14 1
a14 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
d31 1
a31 1
.\"	$OpenBSD: tftpd.8,v 1.11 2003/02/14 23:20:36 jmc Exp $
@


1.11
log
@typos;

tftpd(8): tweak and ok millert@@
tokenadm(8): tweak and ok millert@@
@
text
@d1 1
a1 1
.\"   $OpenBSD: tftpd.8,v 1.10 2001/07/31 17:05:59 mpech Exp $
d35 1
a35 1
.\"	$OpenBSD: tftpd.8,v 1.10 2001/07/31 17:05:59 mpech Exp $
a108 5
.Sh BUGS
Files larger than 33488896 octets (65535 blocks) cannot be transferred
without client and server supporting blocksize negotiation (RFC1783).
.Pp
Many tftp clients will not transfer files over 16744448 octets (32767 blocks).
d127 5
@


1.10
log
@while i'm here: NetBSD -> .Nx

millert@@ ok.
@
text
@d1 1
a1 1
.\"   $OpenBSD: tftpd.8,v 1.9 2001/03/08 02:24:28 deraadt Exp $
d35 1
a35 1
.\"	$OpenBSD: tftpd.8,v 1.9 2001/03/08 02:24:28 deraadt Exp $
d88 1
a88 1
names are prefixed by the one of the given directories.
@


1.9
log
@doc size limitations
@
text
@d1 1
a1 1
.\"   $OpenBSD: tftpd.8,v 1.8 2000/10/30 17:46:30 aaron Exp $
d35 1
a35 1
.\"	$OpenBSD: tftpd.8,v 1.8 2000/10/30 17:46:30 aaron Exp $
d125 2
a126 1
flag appeared in NetBSD 0.9a.
@


1.8
log
@libexec man page fleshing. again, bored on the plane home.
@
text
@d1 1
a1 1
.\"   $OpenBSD: tftpd.8,v 1.7 1999/07/09 13:35:51 aaron Exp $
d35 1
a35 1
.\"	$OpenBSD: tftpd.8,v 1.7 1999/07/09 13:35:51 aaron Exp $
d109 5
@


1.7
log
@- remove all trailing whitespace
     * except when it is escaped with a `\' at the end of the line
- fix remaining .Nm usage as well
- this is from a patch I received from kwesterback@@home.com, who has been
  working on some scripts for fixing formatting errors in mdoc'd man pages

Ok, so there could be a cost/benefit debate with this commit, but since I have
the patch we might as well commit it...
@
text
@d1 1
a1 1
.\"   $OpenBSD: tftpd.8,v 1.6 1999/05/15 00:56:07 aaron Exp $
d35 1
a35 1
.\"	$OpenBSD: tftpd.8,v 1.6 1999/05/15 00:56:07 aaron Exp $
d62 1
a62 2
service description;
see
d72 1
a72 2
will allow only publicly readable files to be
accessed.
d95 2
a96 1
exist.  Files are created with default permissions allowing anyone to read
d106 2
a107 1
as part of the file name to transfer.  This option is intended primarily for
@


1.6
log
@repair
@
text
@d1 1
a1 1
.\"   $OpenBSD: tftpd.8,v 1.5 1998/10/10 15:08:36 ian Exp $
d35 1
a35 1
.\"	$OpenBSD: tftpd.8,v 1.5 1998/10/10 15:08:36 ian Exp $
d71 1
a71 1
Due to the lack of authentication information, 
d94 1
a94 1
flag is used, 
@


1.5
log
@Man page typo.
@
text
@d1 1
a1 1
.\"   $OpenBSD: tftpd.8,v 1.4 1998/03/10 04:50:40 millert Exp $
d35 1
a35 1
.\"	$OpenBSD: tftpd.8,v 1.4 1998/03/10 04:50:40 millert Exp $
d49 1
a49 1
.Fl cs
d52 1
a52 1
.Nm Tftpd
d72 1
a72 1
.Nm tftpd
d85 1
a85 1
.Nm tftpd
d95 1
a95 1
.Nm tftpd
d103 1
a103 1
.Nm tftpd
@


1.4
log
@use .Ox
@
text
@d1 1
a1 1
.\"   $OpenBSD: tftpd.8,v 1.3 1997/06/11 21:19:46 downsj Exp $
d35 1
a35 1
.\"	$OpenBSD: tftpd.8,v 1.3 1997/06/11 21:19:46 downsj Exp $
d96 1
a96 1
will allow new files to be created; otherwise uploaded files most already
@


1.3
log
@Implement and document the -c flag.
@
text
@d1 1
a1 1
.\"   $OpenBSD: tftpd.8,v 1.2 1996/10/08 01:20:21 michaels Exp $
d35 1
a35 1
.\"	$OpenBSD: tftpd.8,v 1.2 1996/10/08 01:20:21 michaels Exp $
d124 2
a125 1
flag was added in OpenBSD 2.1.
@


1.2
log
@Attempt at cleanup.
@
text
@d1 2
a2 1
.\"   $OpenBSD$
d35 1
a35 1
.\"	$Id: tftpd.8,v 1.1.1.1 1995/10/18 08:43:25 deraadt Exp $
d37 1
a37 1
.Dd May 13, 1991
d39 1
a39 1
.Os BSD 4.2
d49 1
a49 1
.Fl s
d92 8
d102 3
a104 1
flag with a directory name, tftpd will
d121 4
@


1.1
log
@Initial revision
@
text
@d1 1
d34 1
a34 1
.\"	$Id: tftpd.8,v 1.3 1994/01/10 16:29:46 mycroft Exp $
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@

