head	1.23;
access;
symbols
	OPENBSD_3_7:1.22.0.2
	OPENBSD_3_7_BASE:1.22
	OPENBSD_3_6:1.21.0.6
	OPENBSD_3_6_BASE:1.21
	OPENBSD_3_5:1.21.0.4
	OPENBSD_3_5_BASE:1.21
	OPENBSD_3_4:1.21.0.2
	OPENBSD_3_4_BASE:1.21
	OPENBSD_3_3:1.17.0.6
	OPENBSD_3_3_BASE:1.17
	OPENBSD_3_2:1.17.0.4
	OPENBSD_3_2_BASE:1.17
	OPENBSD_3_1:1.17.0.2
	OPENBSD_3_1_BASE:1.17
	OPENBSD_3_0:1.16.0.2
	OPENBSD_3_0_BASE:1.16
	OPENBSD_2_9:1.9.0.4
	OPENBSD_2_9_BASE:1.9
	OPENBSD_2_8:1.9.0.2
	OPENBSD_2_8_BASE:1.9
	OPENBSD_2_7:1.7.0.8
	OPENBSD_2_7_BASE:1.7
	OPENBSD_2_6:1.7.0.6
	OPENBSD_2_6_BASE:1.7
	OPENBSD_2_5:1.7.0.4
	OPENBSD_2_5_BASE:1.7
	OPENBSD_2_4:1.7.0.2
	OPENBSD_2_4_BASE:1.7
	OPENBSD_2_3:1.4.0.2
	OPENBSD_2_3_BASE:1.4
	OPENBSD_2_2:1.3.0.4
	OPENBSD_2_2_BASE:1.3
	OPENBSD_2_1:1.3.0.2
	OPENBSD_2_1_BASE:1.3
	OPENBSD_2_0:1.2.0.2
	OPENBSD_2_0_BASE:1.2
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.23
date	2005.05.25.05.35.22;	author deraadt;	state dead;
branches;
next	1.22;

1.22
date	2004.11.24.07.35.40;	author biorn;	state Exp;
branches;
next	1.21;

1.21
date	2003.07.15.19.02.19;	author deraadt;	state Exp;
branches;
next	1.20;

1.20
date	2003.07.02.22.44.12;	author deraadt;	state Exp;
branches;
next	1.19;

1.19
date	2003.05.14.06.47.49;	author mho;	state Exp;
branches;
next	1.18;

1.18
date	2003.05.14.01.46.51;	author hin;	state Exp;
branches;
next	1.17;

1.17
date	2002.03.05.00.09.32;	author deraadt;	state Exp;
branches;
next	1.16;

1.16
date	2001.09.11.01.15.31;	author jason;	state Exp;
branches;
next	1.15;

1.15
date	2001.07.19.10.43.17;	author deraadt;	state Exp;
branches;
next	1.14;

1.14
date	2001.06.26.04.57.44;	author hin;	state Exp;
branches;
next	1.13;

1.13
date	2001.06.23.19.44.31;	author hin;	state Exp;
branches;
next	1.12;

1.12
date	2001.06.23.02.50.52;	author hin;	state Exp;
branches;
next	1.11;

1.11
date	2001.06.22.16.14.55;	author hin;	state Exp;
branches;
next	1.10;

1.10
date	2001.05.25.10.25.22;	author hin;	state Exp;
branches;
next	1.9;

1.9
date	2000.10.10.15.14.54;	author millert;	state Exp;
branches;
next	1.8;

1.8
date	2000.09.03.18.41.16;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	98.07.27.18.28.18;	author millert;	state Exp;
branches;
next	1.6;

1.6
date	98.07.24.00.10.50;	author millert;	state Exp;
branches;
next	1.5;

1.5
date	98.05.15.02.22.43;	author art;	state Exp;
branches;
next	1.4;

1.4
date	98.03.12.04.53.06;	author art;	state Exp;
branches;
next	1.3;

1.3
date	97.03.26.00.34.38;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	96.03.28.23.21.53;	author niklas;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.43.23;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.43.23;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.23
log
@bye bye
@
text
@#	$OpenBSD: Makefile,v 1.22 2004/11/24 07:35:40 biorn Exp $
#	from: @@(#)Makefile	8.2 (Berkeley) 12/15/93
#	$NetBSD: Makefile,v 1.6 1996/02/24 01:22:12 jtk Exp $

PROG=	telnetd

CFLAGS+=-DLINEMODE -DKLUDGELINEMODE -DUSE_TERMIO -DDIAGNOSTICS
CFLAGS+=-DOLD_ENVIRON -DENV_HACK -I${.CURDIR} -Wall
CFLAGS+= -DHAS_CGETENT -Wno-unused
SRCS=	authenc.c global.c slc.c state.c sys_term.c telnetd.c \
	termstat.c utility.c mini_inetd.c socket.c \
	auth.c encrypt.c genget.c misc.c
DPADD=	${LIBUTIL} ${LIBCURSES}
LDADD+=	-lutil -lcurses 
MAN=	telnetd.8

.include <bsd.own.mk> # for KERBEROS

.if (${KERBEROS5:L} == "yes")
CFLAGS+=-DENCRYPTION -DKRB5 -DAUTHENTICATION -DDES_ENCRYPTION -I${.CURDIR}/../../lib
SRCS+= kerberos5.c enc_des.c
DPADD+=	${LIBKRB5} ${LIBASN1} ${LIBCRYPTO} ${LIBDES}
LDADD+=	-lkrb5 -lasn1 -lcrypto -ldes
.endif

.include <bsd.prog.mk>
@


1.22
log
@Enable krb5 authentication (from Gabriel Kihlman) and encryption

"go for it" deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.21 2003/07/15 19:02:19 deraadt Exp $
@


1.21
log
@stop using libcom_err, it is built into krb5
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.20 2003/07/02 22:44:12 deraadt Exp $
d20 2
a21 1
CFLAGS+=-DENCRYPTION -DAUTHENTICATION -I${.CURDIR}/../../lib
@


1.20
log
@no default -Werror on these
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.19 2003/05/14 06:47:49 mho Exp $
d21 2
a22 2
DPADD+=	${LIBKRB5} ${LIBASN1} ${LIBCRYPTO} ${LIBDES} ${LIBCOM_ERR}
LDADD+=	-lkrb5 -lasn1 -lcrypto -ldes -lcom_err
@


1.19
log
@Remove krb4 support.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.18 2003/05/14 01:46:51 hin Exp $
d8 1
a8 1
CFLAGS+=-DOLD_ENVIRON -DENV_HACK -I${.CURDIR} -Wall -Werror
@


1.18
log
@Get rid of libtelnet, it is compiled into the tree programs
(telnetd, telnet and tn3270) that use them instead.
This gets rid of a really hairy dependency between telnet and libtelnet.

ok millert@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.17 2002/03/05 00:09:32 deraadt Exp $
d20 3
a22 10
SRCS+= kerberos5.c enc_des.c
LDADD+=	-lkrb5 -lasn1 -lcrypto -lcom_err -lkafs
CFLAGS+= -DKRB5 -DAUTHENTICATION -DENCRYPTION -DDES_ENCRYPTION
.endif

.if (${KERBEROS:L} == "yes")
CFLAGS+=-DENCRYPTION -DAUTHENTICATION -DKRB4  -DDES_ENCRYPTION
LDADD+= -lkrb -lcrypto -ldes
DPADD+= ${LIBDES} ${LIBKRB}
SRCS+= kerberos.c
@


1.17
log
@add -ldes linking
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.16 2001/09/11 01:15:31 jason Exp $
d9 1
d11 4
a14 3
	termstat.c utility.c mini_inetd.c socket.c
DPADD=	${LIBUTIL} ${LIBCURSES} ${LIBTELNET}
LDADD+=	-lutil -lcurses -ltelnet
d20 1
d22 1
d26 1
a26 1
CFLAGS+=-DENCRYPTION -DAUTHENTICATION -DKRB4 -I${.CURDIR}/../../lib
d29 1
@


1.16
log
@krb5 before krb4 to please the linker
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.15 2001/07/19 10:43:17 deraadt Exp $
d23 1
a23 1
LDADD+= -lkrb -lcrypto
@


1.15
log
@well, with the most recent reorganization, it now turns out that any
program which links -lkrb5 also must link -lkafs as well!  someone please
mail hin@@ an alpha or a powerpc, so that he can become aware of how
binutils ("the other linker we use") works.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.14 2001/06/26 04:57:44 hin Exp $
d17 4
a24 4
.endif

.if (${KERBEROS5:L} == "yes")
LDADD+=	-lkrb5 -lasn1 -lcrypto -lcom_err -lkafs
@


1.14
log
@-Wall -Werror cleanup
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.13 2001/06/23 19:44:31 hin Exp $
d24 1
a24 1
LDADD+=	-lkrb5 -lasn1 -lcrypto -lcom_err
@


1.13
log
@Replace our telnetd with the one from heimdal-0.3f, with the following changes:
- obvious buildsystem tweakes
- our way to filter out bad environment variables
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.12 2001/06/23 02:50:52 hin Exp $
d8 1
a8 1
CFLAGS+=-DOLD_ENVIRON -DENV_HACK -I${.CURDIR} -Wall -Wno-unused
@


1.12
log
@Update for heimdal-0.3f
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.11 2001/06/22 16:14:55 hin Exp $
d10 1
a10 1
	termstat.c utility.c
@


1.11
log
@Fix krb5 linking.

My machine can now build statically with krb5 enabled.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.10 2001/05/25 10:25:22 hin Exp $
d19 1
a19 1
LDADD+= -lkrb -ldes
d24 1
a24 1
LDADD+=	-lkrb5 -lasn1 -lcrypto
@


1.10
log
@KerberosV support from Heimdal.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.9 2000/10/10 15:14:54 millert Exp $
d24 1
a24 1
LDADD+=	-lkrb5
@


1.9
log
@Link with curses, not ocurses and use setupterm().  For now, telnet(1)
still needs ocurses but that will change.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 2000/09/03 18:41:16 espie Exp $
d21 4
@


1.8
log
@Boring...  Add :L modifier to all tweakable variables tests.

Closes PR 1246
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 1998/07/27 18:28:18 millert Exp $
a8 1
CFLAGS+=-D_USE_OLD_CURSES_
d11 2
a12 2
DPADD=	${LIBUTIL} ${LIBOLDCURSES} ${LIBTELNET}
LDADD+=	-lutil -locurses -ltelnet
@


1.7
log
@use old curses to avoid duplicate symbol in libtelnet
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.6 1998/07/24 00:10:50 millert Exp $
d18 1
a18 1
.if (${KERBEROS} == "yes")
@


1.6
log
@-lcurses, not termcap/termlib
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.5 1998/05/15 02:22:43 art Exp $
d9 1
d12 2
a13 2
DPADD=	${LIBUTIL} ${LIBTERM} ${LIBTELNET}
LDADD+=	-lutil -lcurses -ltelnet
@


1.5
log
@build with -Wall
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 1998/03/12 04:53:06 art Exp $
d12 1
a12 1
LDADD+=	-lutil -ltermcap -ltelnet
@


1.4
log
@Encryption from kth-krb 0.9.8 (only for those with kerberos)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.3 1997/03/26 00:34:38 deraadt Exp $
d8 1
a8 1
CFLAGS+=-DOLD_ENVIRON -DENV_HACK -I${.CURDIR}
@


1.3
log
@no libcrypt, fix DPADD
@
text
@d1 1
a1 1
#	$OpenBSD$
d6 1
d15 1
d17 5
a21 4
# These are the sources that have encryption stuff in them.
CRYPT_SRC= authenc.c ext.h state.c telnetd.c termstat.c
CRYPT_SRC+= utility.c Makefile
NOCRYPT_DIR=${.CURDIR}/Nocrypt
a23 3

nocrypt:
	@@echo "Encryption code already removed."
@


1.2
log
@From NetBSD: merge of 960317
@
text
@d10 1
a10 1
DPADD=	${LIBUTIL} ${LIBTERM}
@


1.1
log
@Initial revision
@
text
@d1 1
d3 1
a3 1
#	$Id: Makefile,v 1.5 1994/12/22 10:28:19 cgd Exp $
d7 1
a7 1
CFLAGS+=-DOLD_ENVIRON -DENV_HACK
d11 1
a11 1
LDADD=	-lutil -ltermcap -ltelnet
d13 1
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@

