head	1.10;
access;
symbols
	OPENBSD_6_1:1.10.0.54
	OPENBSD_6_1_BASE:1.10
	OPENBSD_6_0:1.10.0.50
	OPENBSD_6_0_BASE:1.10
	OPENBSD_5_9:1.10.0.46
	OPENBSD_5_9_BASE:1.10
	OPENBSD_5_8:1.10.0.48
	OPENBSD_5_8_BASE:1.10
	OPENBSD_5_7:1.10.0.40
	OPENBSD_5_7_BASE:1.10
	OPENBSD_5_6:1.10.0.44
	OPENBSD_5_6_BASE:1.10
	OPENBSD_5_5:1.10.0.42
	OPENBSD_5_5_BASE:1.10
	OPENBSD_5_4:1.10.0.38
	OPENBSD_5_4_BASE:1.10
	OPENBSD_5_3:1.10.0.36
	OPENBSD_5_3_BASE:1.10
	OPENBSD_5_2:1.10.0.34
	OPENBSD_5_2_BASE:1.10
	OPENBSD_5_1_BASE:1.10
	OPENBSD_5_1:1.10.0.32
	OPENBSD_5_0:1.10.0.30
	OPENBSD_5_0_BASE:1.10
	OPENBSD_4_9:1.10.0.28
	OPENBSD_4_9_BASE:1.10
	OPENBSD_4_8:1.10.0.26
	OPENBSD_4_8_BASE:1.10
	OPENBSD_4_7:1.10.0.22
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.10.0.24
	OPENBSD_4_6_BASE:1.10
	OPENBSD_4_5:1.10.0.20
	OPENBSD_4_5_BASE:1.10
	OPENBSD_4_4:1.10.0.18
	OPENBSD_4_4_BASE:1.10
	OPENBSD_4_3:1.10.0.16
	OPENBSD_4_3_BASE:1.10
	OPENBSD_4_2:1.10.0.14
	OPENBSD_4_2_BASE:1.10
	OPENBSD_4_1:1.10.0.12
	OPENBSD_4_1_BASE:1.10
	OPENBSD_4_0:1.10.0.10
	OPENBSD_4_0_BASE:1.10
	OPENBSD_3_9:1.10.0.8
	OPENBSD_3_9_BASE:1.10
	OPENBSD_3_8:1.10.0.6
	OPENBSD_3_8_BASE:1.10
	OPENBSD_3_7:1.10.0.4
	OPENBSD_3_7_BASE:1.10
	OPENBSD_3_6:1.10.0.2
	OPENBSD_3_6_BASE:1.10
	OPENBSD_3_5:1.9.0.4
	OPENBSD_3_5_BASE:1.9
	OPENBSD_3_4:1.9.0.2
	OPENBSD_3_4_BASE:1.9
	OPENBSD_3_3:1.8.0.8
	OPENBSD_3_3_BASE:1.8
	OPENBSD_3_2:1.8.0.6
	OPENBSD_3_2_BASE:1.8
	OPENBSD_3_1:1.8.0.4
	OPENBSD_3_1_BASE:1.8
	OPENBSD_3_0:1.8.0.2
	OPENBSD_3_0_BASE:1.8
	OPENBSD_2_9:1.7.0.2
	OPENBSD_2_9_BASE:1.7
	OPENBSD_2_8:1.6.0.6
	OPENBSD_2_8_BASE:1.6
	OPENBSD_2_7:1.6.0.4
	OPENBSD_2_7_BASE:1.6
	OPENBSD_2_6:1.6.0.2
	OPENBSD_2_6_BASE:1.6;
locks; strict;
comment	@ * @;


1.10
date	2004.06.25.05.06.49;	author msf;	state Exp;
branches;
next	1.9;

1.9
date	2003.07.05.17.01.49;	author deraadt;	state Exp;
branches;
next	1.8;

1.8
date	2001.09.03.20.14.51;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	2001.03.08.21.50.11;	author angelos;	state Exp;
branches;
next	1.6;

1.6
date	99.10.01.01.08.30;	author angelos;	state Exp;
branches;
next	1.5;

1.5
date	99.05.31.20.15.25;	author angelos;	state Exp;
branches;
next	1.4;

1.4
date	99.05.31.20.09.59;	author angelos;	state Exp;
branches;
next	1.3;

1.3
date	99.05.24.02.11.41;	author angelos;	state Exp;
branches;
next	1.2;

1.2
date	99.05.24.01.50.04;	author angelos;	state Exp;
branches;
next	1.1;

1.1
date	99.05.24.01.29.22;	author angelos;	state Exp;
branches;
next	;


desc
@@


1.10
log
@Make crufty configure stuff go away. Remove all unused code paths.
No change in binaries.

ok millert@@ deraadt@@ hshoexer@@
@
text
@/* $OpenBSD: keynote-main.c,v 1.9 2003/07/05 17:01:49 deraadt Exp $ */
/*
 * The author of this code is Angelos D. Keromytis (angelos@@dsl.cis.upenn.edu)
 *
 * This code was written by Angelos D. Keromytis in Philadelphia, PA, USA,
 * in April-May 1998
 *
 * Copyright (C) 1998, 1999 by Angelos D. Keromytis.
 *	
 * Permission to use, copy, and modify this software with or without fee
 * is hereby granted, provided that this entire notice is included in
 * all copies of any software which is or includes a copy or
 * modification of this software. 
 *
 * THIS SOFTWARE IS BEING PROVIDED "AS IS", WITHOUT ANY EXPRESS OR
 * IMPLIED WARRANTY. IN PARTICULAR, THE AUTHORS MAKES NO
 * REPRESENTATION OR WARRANTY OF ANY KIND CONCERNING THE
 * MERCHANTABILITY OF THIS SOFTWARE OR ITS FITNESS FOR ANY PARTICULAR
 * PURPOSE.
 */

#include <sys/types.h>
#include <sys/stat.h>

#include <ctype.h>
#include <fcntl.h>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <unistd.h>

#include "header.h"

void	mainusage(void);

void
mainusage(void)
{
    fprintf(stderr, "Usage:\n");
    fprintf(stderr, "\tkeygen ...\n");
    fprintf(stderr, "\tsign ...\n");
    fprintf(stderr, "\tsigver ...\n");
    fprintf(stderr, "\tverify ...\n");
    fprintf(stderr, "Issue one of the commands by itself to get more help, "
		    "e.g., keynote sign\n");
}

int
main(int argc, char *argv[])
{
    if (argc < 2)
    {
	mainusage();
	exit(1);
    }

    if (!strcmp(argv[1], "sign"))
      keynote_sign(argc - 1, argv + 1);
    else
      if (!strcmp(argv[1], "verify"))
	keynote_verify(argc - 1, argv + 1);
      else
	if (!strcmp(argv[1], "sigver"))
	  keynote_sigver(argc - 1, argv + 1);
	else
	  if (!strcmp(argv[1], "keygen"))
	    keynote_keygen(argc - 1, argv + 1);

    mainusage();
    exit(1);
}
@


1.9
log
@protos
@
text
@d1 1
a1 1
/* $OpenBSD: keynote-main.c,v 1.8 2001/09/03 20:14:51 deraadt Exp $ */
a21 4
#if HAVE_CONFIG_H
#include "config.h"
#endif /* HAVE_CONFIG_H */

d24 3
a28 3
#include <ctype.h>

#if STDC_HEADERS
a29 8
#endif /* STDC_HEADERS */

#if HAVE_FCNTL_H
#include <fcntl.h>
#endif /* HAVE_FCNTL_H */
#ifdef WIN32
#include <io.h>
#else
a30 1
#endif /* WIN32 */
d40 1
a43 1
    fprintf(stderr, "\tkeygen ...\n");
@


1.8
log
@with or without fee; received mail permitting this change from angelos
@
text
@d1 1
a1 1
/* $OpenBSD: keynote-main.c,v 1.7 2001/03/08 21:50:11 angelos Exp $ */
d47 2
d50 1
a50 1
mainusage()
@


1.7
log
@exit(-1) -> exit(1)
@
text
@d1 1
a1 1
/* $OpenBSD: keynote-main.c,v 1.6 1999/10/01 01:08:30 angelos Exp $ */
d10 1
a10 1
 * Permission to use, copy, and modify this software without fee
@


1.6
log
@Update for version 2.0
@
text
@d1 1
a1 1
/* $OpenBSD$ */
d65 1
a65 1
	exit(-1);
d81 1
a81 1
    exit(-1);
@


1.5
log
@Clarify usage message.
@
text
@d1 1
a1 1
/* $OpenBSD: keynote-main.c,v 1.4 1999/05/31 20:09:59 angelos Exp $ */
d22 4
a28 1
#include <string.h>
a29 1
#include <fcntl.h>
d32 7
a39 1
#include <ctype.h>
a58 3
#ifdef WIN32
void
#else
a59 1
#endif
@


1.4
log
@Sanitize prototypes and variable extern definitions, remove
unnecessary header file, add prototypes header file for utility building.
@
text
@d1 1
a1 1
/* $OpenBSD$ */
d47 2
@


1.3
log
@Update Makefile, fix README, add a proper usage in keynote-main.c
@
text
@a1 1

d37 1
a37 2
extern int keynote_sign(int, char **), keynote_sigver(int, char **);
extern int keynote_verify(int, char **), keynote_keygen(int, char **);
@


1.2
log
@Update man pages to reflect new usage method.
@
text
@d1 2
d41 10
d60 1
a60 1
	fprintf(stderr, "Insufficient number of arguments.\n");
d76 1
a76 5
    fprintf(stderr, "Usage:\n");
    fprintf(stderr, "\tsign ...\n");
    fprintf(stderr, "\tsigver ...\n");
    fprintf(stderr, "\tverify ...\n");
    fprintf(stderr, "\tkeygen ...\n");
@


1.1
log
@Unified tool for keynote utils.
@
text
@d46 8
a53 2
    if (!strcmp(argv[0], "keynote-sign"))
      keynote_sign(argc, argv);
d55 2
a56 2
      if (!strcmp(argv[0], "keynote-verify"))
	keynote_verify(argc, argv);
d58 2
a59 2
	if (!strcmp(argv[0], "keynote-sigver"))
	  keynote_sigver(argc, argv);
d61 2
a62 2
	  if (!strcmp(argv[0], "keynote-keygen"))
	    keynote_keygen(argc, argv);
d64 5
a68 1
    fprintf(stderr, "%s: invoked under unknown name.\n", argv[0]);
@

