head	1.8;
access;
symbols;
locks; strict;
comment	@# @;


1.8
date	2016.11.03.09.35.34;	author schwarze;	state dead;
branches;
next	1.7;
commitid	3WfE7ZbXXRiIqemG;

1.7
date	2015.09.22.08.08.07;	author sobrado;	state Exp;
branches;
next	1.6;
commitid	yt6ZAILseiFaXq7L;

1.6
date	2015.08.18.20.19.32;	author miod;	state Exp;
branches;
next	1.5;
commitid	V5l8faEbMLirvCIh;

1.5
date	2014.07.11.16.18.14;	author miod;	state Exp;
branches;
next	1.4;
commitid	KFr43un1Uq8AaqNL;

1.4
date	2014.04.13.15.25.34;	author miod;	state Exp;
branches;
next	1.3;

1.3
date	2008.09.06.12.17.53;	author djm;	state Exp;
branches;
next	1.2;

1.2
date	2004.04.08.08.03.15;	author markus;	state Exp;
branches;
next	1.1;

1.1
date	2002.05.15.02.29.19;	author beck;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.09.05.12.51.17;	author markus;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2004.04.07.20.42.00;	author markus;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2008.09.06.12.15.49;	author djm;	state Exp;
branches;
next	1.1.1.4;

1.1.1.4
date	2014.04.13.15.16.35;	author miod;	state Exp;
branches;
next	;


desc
@@


1.8
log
@convert EVP manuals from pod to mdoc
@
text
@=pod

=head1 NAME

EVP_BytesToKey - password based encryption routine

=head1 SYNOPSIS

 #include <openssl/evp.h>

 int EVP_BytesToKey(const EVP_CIPHER *type,const EVP_MD *md,
                       const unsigned char *salt,
                       const unsigned char *data, int datal, int count,
                       unsigned char *key,unsigned char *iv);

=head1 DESCRIPTION

EVP_BytesToKey() derives a key and IV from various parameters. B<type> is
the cipher to derive the key and IV for. B<md> is the message digest to use.
The B<salt> parameter is used as a salt in the derivation: it should point to
an 8 byte buffer or NULL if no salt is used. B<data> is a buffer containing
B<datal> bytes which is used to derive the keying data. B<count> is the
iteration count to use. The derived key and IV will be written to B<key>
and B<iv> respectively.

=head1 NOTES

A typical application of this function is to derive keying material for an
encryption algorithm from a password in the B<data> parameter.

Increasing the B<count> parameter slows down the algorithm which makes it
harder for an attacker to perform a brute force attack using a large number
of candidate passwords.

If the total key and IV length is less than the digest length and
B<MD5> is used then the derivation algorithm is compatible with PKCS#5 v1.5
otherwise a non standard extension is used to derive the extra data.

Newer applications should use more standard algorithms such as PBKDF2 as
defined in PKCS#5v2.1 for key derivation.

=head1 KEY DERIVATION ALGORITHM

The key and IV is derived by concatenating D_1, D_2, etc until
enough data is available for the key and IV. D_i is defined as:

	D_i = HASH^count(D_(i-1) || data || salt)

where || denotes concatenation, D_0 is empty, HASH is the digest
algorithm in use, HASH^1(data) is simply HASH(data), HASH^2(data)
is HASH(HASH(data)) and so on.

The initial bytes are used for the key and the subsequent bytes for
the IV.

=head1 RETURN VALUES

EVP_BytesToKey() returns the size of the derived key in bytes.

=head1 SEE ALSO

L<evp(3)|evp(3)>, L<rand(3)|rand(3)>,
L<PKCS5_PBKDF2_HMAC(3)|PKCS5_PBKDF2_HMAC(3)>,
L<EVP_EncryptInit(3)|EVP_EncryptInit(3)>

=head1 HISTORY

=cut
@


1.7
log
@typos in documentation; better wording, suggested by jmc@@

ok jmc@@
@
text
@@


1.6
log
@typos
@
text
@d49 1
a49 1
where || denotes concatentaion, D_0 is empty, HASH is the digest
@


1.5
log
@Huge documentation update for libcrypto and libssl, mostly from Matt Caswell,
Jeff Trawick, Jean-Paul Calderone, Michal Bozon, Jeffrey Walton and Rich Salz,
via OpenSSL trunk (with some parts not applying to us, such as SSLv2 support,
at least partially removed).
@
text
@d32 1
a32 1
harder for an attacker to peform a brute force attack using a large number
@


1.4
log
@Merge conflicts; remove MacOS, Netware, OS/2, VMS and Windows build machinery.
@
text
@d39 2
a40 2
Newer applications should use more standard algorithms such as PKCS#5
v2.0 for key derivation.
d63 1
@


1.3
log
@resolve conflicts
@
text
@d20 1
a20 1
The B<salt> paramter is used as a salt in the derivation: it should point to
@


1.2
log
@merge 0.9.7d
@
text
@d63 1
a63 1
L<EVP_EncryptInit(3)|EVP_EncryptInit(3)>,
@


1.1
log
@OpenSSL 0.9.7 stable 2002 05 08 merge
@
text
@d5 1
a5 1
 EVP_BytesToKey - password based encryption routine
@


1.1.1.1
log
@import openssl-0.9.7-beta1
@
text
@@


1.1.1.2
log
@import openssl-0.9.7d
@
text
@d5 1
a5 1
EVP_BytesToKey - password based encryption routine
@


1.1.1.3
log
@import of OpenSSL 0.9.8h
@
text
@d63 1
a63 1
L<EVP_EncryptInit(3)|EVP_EncryptInit(3)>
@


1.1.1.4
log
@Import OpenSSL 1.0.1g
@
text
@d20 1
a20 1
The B<salt> parameter is used as a salt in the derivation: it should point to
@


