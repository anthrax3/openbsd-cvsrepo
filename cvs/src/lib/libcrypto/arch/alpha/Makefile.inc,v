head	1.3;
access;
symbols
	OPENBSD_6_2_BASE:1.3
	OPENBSD_6_1:1.3.0.4
	OPENBSD_6_1_BASE:1.3;
locks; strict;
comment	@# @;


1.3
date	2014.11.17.20.31.21;	author miod;	state Exp;
branches;
next	1.2;
commitid	ymruTYR6WPNRDFtT;

1.2
date	2014.05.03.17.23.55;	author miod;	state Exp;
branches;
next	1.1;

1.1
date	2014.05.01.20.42.59;	author miod;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Add the Cammelia cipher to libcrypto.

There used to be a strong reluctance to provide this cipher in LibreSSL in the
past, because the licence terms under which Cammelia was released by NTT were
free-but-not-in-the-corners, by restricting the right to modify the source
code, as well retaining the right to enforce their patents against anyone
in the future.

However, as stated in http://www.ntt.co.jp/news/news06e/0604/060413a.html ,
NTT changed its mind and made this code truly free. We only wish there had
been more visibility of this, for we could have had enabled Cammelia
earlier (-:

Licence change noticed by deraadt@@. General agreement from the usual LibreSSL
suspects.

Crank libcrypto.so minor version due to the added symbols.
@
text
@# $OpenBSD: Makefile.inc,v 1.2 2014/05/03 17:23:55 miod Exp $

# alpha-specific libcrypto build rules

# aes
SRCS+= aes_core.c aes_cbc.c 
# bf
SRCS+= bf_enc.c
# bn
SRCS+= bn_asm.c
SSLASM+= bn alpha-mont
CFLAGS+= -DOPENSSL_BN_ASM_MONT
# camellia
SRCS+= camellia.c cmll_cbc.c cmll_misc.c
# des
SRCS+= des_enc.c fcrypt_b.c
# modes
CFLAGS+= -DGHASH_ASM
SSLASM+= modes ghash-alpha
# rc4
SRCS+= rc4_enc.c rc4_skey.c
## rc5
#SRCS+= rc5_enc.c 
# sha
CFLAGS+= -DSHA1_ASM
SSLASM+= sha sha1-alpha
# whrlpool
SRCS+= wp_block.c

.for dir f in ${SSLASM}
SRCS+=	${f}.S
GENERATED+=${f}.S
${f}.S: ${LCRYPTO_SRC}/${dir}/asm/${f}.pl
	/usr/bin/perl \
		${LCRYPTO_SRC}/${dir}/asm/${f}.pl > ${.TARGET}
.endfor

CFLAGS+= -DOPENSSL_CPUID_OBJ
SRCS+=	alphacpuid.S
GENERATED+=alphacpuid.S
alphacpuid.S: ${LCRYPTO_SRC}/alphacpuid.pl
	/usr/bin/perl \
		${LCRYPTO_SRC}/alphacpuid.pl > ${.TARGET}
@


1.2
log
@Correctly enable Montgomery code.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.1 2014/05/01 20:42:59 miod Exp $
d13 2
@


1.1
log
@Enable use of the assembly code for BN (Montgomery) and SHA1.
@
text
@d1 1
a1 1
# $OpenBSD$
d12 1
@

