head	1.5;
access;
symbols
	butholakala:1.4
	openssl_1_0_1_g:1.1.1.3
	OPENBSD_5_5:1.4.0.24
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.20
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.4.0.18
	OPENBSD_5_3_BASE:1.4
	openssl_1_0_1_c:1.1.1.3
	OPENBSD_5_2:1.4.0.14
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.16
	openssl_1_0_0_f:1.1.1.3
	openssl_1_0_0_e:1.1.1.3
	OPENBSD_5_0:1.4.0.12
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.4.0.10
	OPENBSD_4_9_BASE:1.4
	openssh_1_0_0_a:1.1.1.3
	OPENBSD_4_8:1.4.0.8
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.4.0.4
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.4.0.6
	OPENBSD_4_6_BASE:1.4
	openssl_0_9_8_k:1.1.1.3
	OPENBSD_4_5:1.4.0.2
	OPENBSD_4_5_BASE:1.4
	openssl_0_9_8_j:1.1.1.3
	openssl_0_9_8_h:1.1.1.3
	pre_openssl_0_9_8h:1.3
	OPENBSD_4_4:1.3.0.14
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.12
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.3.0.10
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.3.0.8
	OPENBSD_4_1_BASE:1.3
	OPENBSD_4_0:1.3.0.6
	OPENBSD_4_0_BASE:1.3
	openssl_0_9_7j:1.1.1.2
	openssl:1.1.1
	OPENBSD_3_9:1.3.0.4
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.3.0.2
	OPENBSD_3_8_BASE:1.3
	OPENSSL_0_9_7G:1.1.1.2
	OPENBSD_3_7:1.2.0.12
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.2.0.10
	OPENBSD_3_6_BASE:1.2
	OPENSSL_0_9_7D:1.1.1.1
	OPENBSD_3_5:1.2.0.8
	OPENBSD_3_5_BASE:1.2
	OPENSSL_0_9_7C:1.1.1.1
	OPENBSD_3_4:1.2.0.6
	OPENBSD_3_4_BASE:1.2
	OPENSSL_0_9_7B:1.1.1.1
	OPENBSD_3_3:1.2.0.4
	OPENBSD_3_3_BASE:1.2
	OPENBSD_3_2:1.2.0.2
	OPENBSD_3_2_BASE:1.2
	OPENSSL_0_9_7_STABLE_SNAP_20020911:1.1.1.1
	OPENSSL_0_9_7_BETA3:1.1.1.1
	OPENSSL_0_9_7_BETA1:1.1.1.1
	OPENSSL:1.1.1
	OPENBSD_3_1:1.1.0.10
	OPENBSD_3_1_BASE:1.1
	OPENBSD_3_0:1.1.0.8
	OPENBSD_3_0_BASE:1.1
	OPENBSD_2_9:1.1.0.6
	OPENBSD_2_9_BASE:1.1
	OPENBSD_2_8:1.1.0.4
	OPENBSD_2_8_BASE:1.1
	OPENBSD_2_7:1.1.0.2
	OPENBSD_2_7_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2014.04.13.20.07.16;	author deraadt;	state dead;
branches;
next	1.4;

1.4
date	2008.09.06.12.17.53;	author djm;	state Exp;
branches;
next	1.3;

1.3
date	2005.04.29.05.39.30;	author djm;	state Exp;
branches;
next	1.2;

1.2
date	2002.05.15.02.29.20;	author beck;	state Exp;
branches;
next	1.1;

1.1
date	2000.04.15.06.18.49;	author beck;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.09.05.12.51.30;	author markus;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2005.04.29.05.37.26;	author djm;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2008.09.06.12.15.51;	author djm;	state Exp;
branches;
next	;


desc
@@


1.5
log
@We do not need historical shared library build goo for other operating
systems, most of which in any sane world will want to do something
more modern anyways.
@
text
@#!/usr/bin/sh
#
# Run this script from the OpenSSL root directory:
# sh shlib/hpux10-cc.sh
# 
# HP-UX (10.20) shared library installation:
# Compile and install OpenSSL with best possible optimization:
# - shared libraries are compiled and installed with +O4 optimization
# - executable(s) are compiled and installed with +O4 optimization
# - static libraries are compiled and installed with +O3 optimization,
#   to avoid the time consuming +O4 link-time optimization when using
#   these libraries. (The shared libs are already optimized during build
#   at +O4.)
#
# This script must be run with appropriate privileges to install into
# /usr/local/ssl. HP-UX prevents used executables and shared libraries
# from being deleted or overwritten. Stop all processes using already
# installed items of OpenSSL.
#
# WARNING: At high optimization levels, HP's ANSI-C compiler can chew up
#          large amounts of memory and CPU time. Make sure to have at least
#          128MB of RAM available and that your kernel is configured to allow
#          at least 128MB data size (maxdsiz parameter which can be obtained
#          by multiplying 'echo maxdsiz/D | adb -k /stand/vmunix /dev/kmem'
#          by 'getconf PAGE_SIZE').
#          The installation process can take several hours, even on fast
#          machines. +O4 optimization of the libcrypto.sl shared library may
#          take 1 hour on a C200 (200MHz PA8200 CPU), +O3 compilation of
#          fcrypt_b.c can take 20 minutes on this machine. Stay patient.
#
# SITEFLAGS: site specific flags. I do use +DAportable, since I have to
# support older PA1.1-type CPUs. Your mileage may vary.
# +w1 enables enhanced warnings, useful when working with snaphots.
#
SITEFLAGS="+DAportable +w1"
#
# Set the default additions to build with HP-UX.
# -D_REENTRANT must/should be defined on HP-UX manually, since we do call
# Configure directly.
# +Oall increases the optimization done.
#
MYFLAGS="-D_REENTRANT +Oall $SITEFLAGS"

# Configure for pic and build the static pic libraries
perl5 Configure no-shared hpux-parisc-cc-o4 +Z ${MYFLAGS}
make clean
make DIRS="crypto ssl"
# Rename the static pic libs and build dynamic libraries from them
# Be prepared to see a lot of warnings about shared libraries being built
# with optimizations higher than +O2. When using these libraries, it is
# not possible to replace internal library functions with functions from
# the program to be linked.
#
make -f shlib/Makefile.hpux10-cc

# Copy the libraries to /usr/local/ssl/lib (they have to be in their
# final location when linking applications).
# If the directories are still there, no problem.
mkdir /usr/local
mkdir /usr/local/ssl
mkdir /usr/local/ssl/lib
chmod 444 lib*_pic.a
chmod 555 lib*.sl.0.9.8
cp -p lib*_pic.a lib*.sl.0.9.8 /usr/local/ssl/lib
(cd /usr/local/ssl/lib ; ln -sf libcrypto.sl.0.9.8 libcrypto.sl ; ln -sf libssl.sl.0.9.8 libssl.sl)

# Reconfigure without pic to compile the executables. Unfortunately, while
# performing this task we have to recompile the library components, even
# though we use the already installed shared libs anyway.
#
perl5 Configure no-shared hpux-parisc-cc-o4 ${MYFLAGS}

make clean

# Hack the Makefiles to pick up the dynamic libraries during linking
#
sed 's/^PEX_LIBS=.*$/PEX_LIBS=-L\/usr\/local\/ssl\/lib/' Makefile.ssl >xxx; mv xxx Makefile.ssl
sed 's/-L\.\.//' apps/Makefile.ssl >xxx; mv xxx apps/Makefile.ssl
sed 's/-L\.\.//' test/Makefile.ssl >xxx; mv xxx test/Makefile.ssl
# Build the static libs and the executables in one make.
make
# Install everything
make install

# Finally build the static libs with +O3. This time we only need the libraries,
# once created, they are simply copied into place.
#
perl5 Configure no-shared hpux-parisc-cc ${MYFLAGS}
make clean
make DIRS="crypto ssl"
chmod 644 libcrypto.a libssl.a
cp -p libcrypto.a libssl.a /usr/local/ssl/lib
@


1.4
log
@resolve conflicts
@
text
@@


1.3
log
@resolve conflicts
@
text
@d63 3
a65 3
chmod 555 lib*.sl.0.9.7
cp -p lib*_pic.a lib*.sl.0.9.7 /usr/local/ssl/lib
(cd /usr/local/ssl/lib ; ln -sf libcrypto.sl.0.9.7 libcrypto.sl ; ln -sf libssl.sl.0.9.7 libssl.sl)
d77 3
a79 3
sed 's/^PEX_LIBS=.*$/PEX_LIBS=-L\/usr\/local\/ssl\/lib/' Makefile >xxx; mv xxx Makefile.ssl
sed 's/-L\.\.//' apps/Makefile >xxx; mv xxx apps/Makefile
sed 's/-L\.\.//' test/Makefile >xxx; mv xxx test/Makefile
@


1.2
log
@OpenSSL 0.9.7 stable 2002 05 08 merge
@
text
@d77 3
a79 3
sed 's/^PEX_LIBS=.*$/PEX_LIBS=-L\/usr\/local\/ssl\/lib/' Makefile.ssl >xxx; mv xxx Makefile.ssl
sed 's/-L\.\.//' apps/Makefile.ssl >xxx; mv xxx apps/Makefile.ssl
sed 's/-L\.\.//' test/Makefile.ssl >xxx; mv xxx test/Makefile.ssl
@


1.1
log
@OpenSSL 0.9.5a merge
@
text
@d23 3
a25 1
#          at least 128MB data size (maxdsiz parameter).
d45 1
a45 1
perl5 Configure hpux-parisc-cc-o4 +z ${MYFLAGS}
d63 3
a65 3
chmod 555 lib*.so.1
cp -p lib*_pic.a lib*.so.1 /usr/local/ssl/lib
(cd /usr/local/ssl/lib ; ln -sf libcrypto.so.1 libcrypto.sl ; ln -sf libssl.so.1 libssl.sl)
d71 1
a71 1
perl5 Configure hpux-parisc-cc-o4 ${MYFLAGS}
d77 1
a77 1
sed 's/^PEX_LIBS=.*$/PEX_LIBS=-L\/usr\/local\/ssl\/lib -Wl,+b,\/usr\/local\/ssl\/lib:\/usr\/lib/' Makefile.ssl >xxx; mv xxx Makefile.ssl
d88 1
a88 1
perl5 Configure hpux-parisc-cc ${MYFLAGS}
@


1.1.1.1
log
@import openssl-0.9.7-beta1
@
text
@d23 1
a23 3
#          at least 128MB data size (maxdsiz parameter which can be obtained
#          by multiplying 'echo maxdsiz/D | adb -k /stand/vmunix /dev/kmem'
#          by 'getconf PAGE_SIZE').
d43 1
a43 1
perl5 Configure no-shared hpux-parisc-cc-o4 +Z ${MYFLAGS}
d61 3
a63 3
chmod 555 lib*.sl.0.9.7
cp -p lib*_pic.a lib*.sl.0.9.7 /usr/local/ssl/lib
(cd /usr/local/ssl/lib ; ln -sf libcrypto.sl.0.9.7 libcrypto.sl ; ln -sf libssl.sl.0.9.7 libssl.sl)
d69 1
a69 1
perl5 Configure no-shared hpux-parisc-cc-o4 ${MYFLAGS}
d75 1
a75 1
sed 's/^PEX_LIBS=.*$/PEX_LIBS=-L\/usr\/local\/ssl\/lib/' Makefile.ssl >xxx; mv xxx Makefile.ssl
d86 1
a86 1
perl5 Configure no-shared hpux-parisc-cc ${MYFLAGS}
@


1.1.1.2
log
@import of openssl-0.9.7g; tested on platforms from alpha to zaurus, ok deraadt@@
@
text
@d77 3
a79 3
sed 's/^PEX_LIBS=.*$/PEX_LIBS=-L\/usr\/local\/ssl\/lib/' Makefile >xxx; mv xxx Makefile.ssl
sed 's/-L\.\.//' apps/Makefile >xxx; mv xxx apps/Makefile
sed 's/-L\.\.//' test/Makefile >xxx; mv xxx test/Makefile
@


1.1.1.3
log
@import of OpenSSL 0.9.8h
@
text
@d63 3
a65 3
chmod 555 lib*.sl.0.9.8
cp -p lib*_pic.a lib*.sl.0.9.8 /usr/local/ssl/lib
(cd /usr/local/ssl/lib ; ln -sf libcrypto.sl.0.9.8 libcrypto.sl ; ln -sf libssl.sl.0.9.8 libssl.sl)
d77 3
a79 3
sed 's/^PEX_LIBS=.*$/PEX_LIBS=-L\/usr\/local\/ssl\/lib/' Makefile.ssl >xxx; mv xxx Makefile.ssl
sed 's/-L\.\.//' apps/Makefile.ssl >xxx; mv xxx apps/Makefile.ssl
sed 's/-L\.\.//' test/Makefile.ssl >xxx; mv xxx test/Makefile.ssl
@


