head	1.71;
access;
symbols
	OPENBSD_6_1:1.70.0.4
	OPENBSD_6_1_BASE:1.70
	OPENBSD_6_0:1.69.0.2
	OPENBSD_6_0_BASE:1.69
	OPENBSD_5_9:1.66.0.2
	OPENBSD_5_9_BASE:1.66
	OPENBSD_5_8:1.64.0.8
	OPENBSD_5_8_BASE:1.64
	OPENBSD_5_7:1.64.0.2
	OPENBSD_5_7_BASE:1.64
	OPENBSD_5_6:1.64.0.4
	OPENBSD_5_6_BASE:1.64
	OPENBSD_5_5:1.63.0.8
	OPENBSD_5_5_BASE:1.63
	OPENBSD_5_4:1.63.0.4
	OPENBSD_5_4_BASE:1.63
	OPENBSD_5_3:1.63.0.2
	OPENBSD_5_3_BASE:1.63
	OPENBSD_5_2:1.61.0.6
	OPENBSD_5_2_BASE:1.61
	OPENBSD_5_1_BASE:1.61
	OPENBSD_5_1:1.61.0.4
	OPENBSD_5_0:1.61.0.2
	OPENBSD_5_0_BASE:1.61
	OPENBSD_4_9:1.60.0.2
	OPENBSD_4_9_BASE:1.60
	OPENBSD_4_8:1.59.0.4
	OPENBSD_4_8_BASE:1.59
	OPENBSD_4_7:1.59.0.2
	OPENBSD_4_7_BASE:1.59
	OPENBSD_4_6:1.57.0.10
	OPENBSD_4_6_BASE:1.57
	OPENBSD_4_5:1.57.0.6
	OPENBSD_4_5_BASE:1.57
	OPENBSD_4_4:1.57.0.4
	OPENBSD_4_4_BASE:1.57
	OPENBSD_4_3:1.57.0.2
	OPENBSD_4_3_BASE:1.57
	OPENBSD_4_2:1.55.0.8
	OPENBSD_4_2_BASE:1.55
	OPENBSD_4_1:1.55.0.6
	OPENBSD_4_1_BASE:1.55
	OPENBSD_4_0:1.55.0.4
	OPENBSD_4_0_BASE:1.55
	OPENBSD_3_9:1.55.0.2
	OPENBSD_3_9_BASE:1.55
	OPENBSD_3_8:1.54.0.8
	OPENBSD_3_8_BASE:1.54
	OPENBSD_3_7:1.54.0.6
	OPENBSD_3_7_BASE:1.54
	OPENBSD_3_6:1.54.0.4
	OPENBSD_3_6_BASE:1.54
	OPENBSD_3_5:1.54.0.2
	OPENBSD_3_5_BASE:1.54
	OPENBSD_3_4:1.53.0.2
	OPENBSD_3_4_BASE:1.53
	OPENBSD_3_3:1.52.0.2
	OPENBSD_3_3_BASE:1.52
	OPENBSD_3_2:1.51.0.2
	OPENBSD_3_2_BASE:1.51
	OPENBSD_3_1:1.48.0.6
	OPENBSD_3_1_BASE:1.48
	OPENBSD_3_0:1.48.0.4
	OPENBSD_3_0_BASE:1.48
	OPENBSD_2_9:1.48.0.2
	OPENBSD_2_9_BASE:1.48
	OPENBSD_2_8:1.47.0.2
	OPENBSD_2_8_BASE:1.47
	OPENBSD_2_7:1.44.0.2
	OPENBSD_2_7_BASE:1.44
	OPENBSD_2_6:1.38.0.2
	OPENBSD_2_6_BASE:1.38
	OPENBSD_2_5:1.37.0.2
	OPENBSD_2_5_BASE:1.37
	OPENBSD_2_4:1.28.0.2
	OPENBSD_2_4_BASE:1.28
	OPENBSD_2_3:1.21.0.2
	OPENBSD_2_3_BASE:1.21
	OPENBSD_2_2:1.14.0.4
	OPENBSD_2_2_BASE:1.14
	OPENBSD_2_1:1.14.0.2
	OPENBSD_2_1_BASE:1.14
	OPENBSD_2_0:1.7.0.2
	OPENBSD_2_0_BASE:1.7
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.71
date	2017.06.16.10.25.54;	author espie;	state Exp;
branches;
next	1.70;
commitid	Yn1L9TuGVODhqMDI;

1.70
date	2016.09.16.17.24.20;	author nicm;	state Exp;
branches;
next	1.69;
commitid	WVdPMzSamhLpUk0Y;

1.69
date	2016.07.04.18.01.44;	author guenther;	state Exp;
branches;
next	1.68;
commitid	MDAws5Y7do6cFWlq;

1.68
date	2016.05.26.21.24.16;	author millert;	state Exp;
branches;
next	1.67;
commitid	KlonlQiiKkMayl63;

1.67
date	2016.03.30.06.38.42;	author jmc;	state Exp;
branches;
next	1.66;
commitid	LN9ijdk9SEnzWAbM;

1.66
date	2015.12.03.11.29.55;	author nicm;	state Exp;
branches;
next	1.65;
commitid	5hoMCFvEUcTQqvPZ;

1.65
date	2015.11.12.12.38.03;	author jmc;	state Exp;
branches;
next	1.64;
commitid	z6udODrEQd9qUlQD;

1.64
date	2014.07.16.10.35.53;	author deraadt;	state Exp;
branches;
next	1.63;
commitid	819aYFbL5s7NpSEJ;

1.63
date	2012.12.21.08.50.27;	author espie;	state Exp;
branches;
next	1.62;

1.62
date	2012.08.02.13.38.38;	author okan;	state Exp;
branches;
next	1.61;

1.61
date	2011.06.23.22.46.12;	author schwarze;	state Exp;
branches;
next	1.60;

1.60
date	2010.09.06.17.26.17;	author nicm;	state Exp;
branches;
next	1.59;

1.59
date	2010.01.12.23.21.58;	author nicm;	state Exp;
branches;
next	1.58;

1.58
date	2009.08.13.19.54.58;	author jmc;	state Exp;
branches;
next	1.57;

1.57
date	2007.11.24.15.43.08;	author espie;	state Exp;
branches;
next	1.56;

1.56
date	2007.10.26.19.45.22;	author espie;	state Exp;
branches;
next	1.55;

1.55
date	2005.11.24.20.49.16;	author deraadt;	state Exp;
branches;
next	1.54;

1.54
date	2003.10.19.22.20.37;	author brad;	state Exp;
branches;
next	1.53;

1.53
date	2003.05.19.19.05.06;	author millert;	state Exp;
branches;
next	1.52;

1.52
date	2002.11.14.00.50.19;	author millert;	state Exp;
branches;
next	1.51;

1.51
date	2002.08.16.01.59.41;	author wcobb;	state Exp;
branches;
next	1.50;

1.50
date	2002.07.26.00.27.11;	author art;	state Exp;
branches;
next	1.49;

1.49
date	2002.06.24.18.03.30;	author tholo;	state Exp;
branches;
next	1.48;

1.48
date	2000.11.08.22.09.24;	author deraadt;	state Exp;
branches;
next	1.47;

1.47
date	2000.10.08.22.46.54;	author millert;	state Exp;
branches;
next	1.46;

1.46
date	2000.07.24.04.06.09;	author millert;	state Exp;
branches;
next	1.45;

1.45
date	2000.07.10.03.06.03;	author millert;	state Exp;
branches;
next	1.44;

1.44
date	2000.03.29.06.37.26;	author deraadt;	state Exp;
branches;
next	1.43;

1.43
date	99.12.28.15.57.59;	author millert;	state Exp;
branches;
next	1.42;

1.42
date	99.11.28.17.53.40;	author millert;	state Exp;
branches;
next	1.41;

1.41
date	99.11.17.05.37.53;	author millert;	state Exp;
branches;
next	1.40;

1.40
date	99.11.17.05.00.41;	author millert;	state Exp;
branches;
next	1.39;

1.39
date	99.11.17.04.15.21;	author millert;	state Exp;
branches;
next	1.38;

1.38
date	99.05.11.16.21.05;	author millert;	state Exp;
branches;
next	1.37;

1.37
date	99.03.02.06.23.26;	author millert;	state Exp;
branches;
next	1.36;

1.36
date	99.02.24.06.31.06;	author millert;	state Exp;
branches;
next	1.35;

1.35
date	99.01.18.19.30.36;	author millert;	state Exp;
branches;
next	1.34;

1.34
date	99.01.18.19.06.57;	author millert;	state Exp;
branches;
next	1.33;

1.33
date	98.11.30.15.49.15;	author millert;	state Exp;
branches;
next	1.32;

1.32
date	98.11.30.01.02.16;	author millert;	state Exp;
branches;
next	1.31;

1.31
date	98.11.17.03.51.20;	author millert;	state Exp;
branches;
next	1.30;

1.30
date	98.11.17.03.16.20;	author millert;	state Exp;
branches;
next	1.29;

1.29
date	98.10.31.06.30.28;	author millert;	state Exp;
branches;
next	1.28;

1.28
date	98.09.13.19.16.14;	author millert;	state Exp;
branches;
next	1.27;

1.27
date	98.08.31.17.46.06;	author mickey;	state Exp;
branches;
next	1.26;

1.26
date	98.08.29.21.12.07;	author deraadt;	state Exp;
branches;
next	1.25;

1.25
date	98.08.14.23.02.33;	author millert;	state Exp;
branches;
next	1.24;

1.24
date	98.07.27.03.37.26;	author millert;	state Exp;
branches;
next	1.23;

1.23
date	98.07.23.21.23.40;	author millert;	state Exp;
branches;
next	1.22;

1.22
date	98.07.23.21.17.23;	author millert;	state Exp;
branches;
next	1.21;

1.21
date	98.01.17.16.27.30;	author millert;	state Exp;
branches;
next	1.20;

1.20
date	97.12.17.19.35.31;	author millert;	state Exp;
branches;
next	1.19;

1.19
date	97.12.14.23.15.36;	author millert;	state Exp;
branches;
next	1.18;

1.18
date	97.12.03.05.20.48;	author millert;	state Exp;
branches;
next	1.17;

1.17
date	97.11.28.23.05.05;	author millert;	state Exp;
branches;
next	1.16;

1.16
date	97.11.28.23.02.29;	author millert;	state Exp;
branches;
next	1.15;

1.15
date	97.11.26.04.01.04;	author millert;	state Exp;
branches;
next	1.14;

1.14
date	97.04.27.20.56.09;	author millert;	state Exp;
branches;
next	1.13;

1.13
date	97.02.27.21.45.53;	author tholo;	state Exp;
branches;
next	1.12;

1.12
date	97.02.27.08.02.07;	author angelos;	state Exp;
branches;
next	1.11;

1.11
date	97.02.09.18.51.50;	author deraadt;	state Exp;
branches;
next	1.10;

1.10
date	97.01.07.06.52.57;	author graichen;	state Exp;
branches;
next	1.9;

1.9
date	96.12.16.08.43.22;	author tholo;	state Exp;
branches;
next	1.8;

1.8
date	96.12.08.15.22.26;	author downsj;	state Exp;
branches;
next	1.7;

1.7
date	96.06.19.02.48.03;	author niklas;	state Exp;
branches;
next	1.6;

1.6
date	96.06.16.23.11.26;	author tholo;	state Exp;
branches;
next	1.5;

1.5
date	96.06.02.06.04.52;	author tholo;	state Exp;
branches;
next	1.4;

1.4
date	96.05.06.21.44.22;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	96.05.04.09.15.47;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	95.10.24.10.06.45;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.42.36;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.42.36;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.71
log
@mark files as BUILDFIRST, or write explicit dependencies, so that most
programs will build even without a make depend first.
okay tb@@ millert@@
@
text
@#	$OpenBSD: Makefile,v 1.70 2016/09/16 17:24:20 nicm Exp $

# Uncomment this to enable tracing in libcurses
#CURSESTRACE=-DTRACE

# This is used to compile terminal info directly into the library
FALLBACK_LIST=

# XXX - should be defined elsewhere
AWK?=	/usr/bin/awk

# Search in subdirs
.PATH:	${.CURDIR}/base ${.CURDIR}/tinfo ${.CURDIR}/trace ${.CURDIR}/tty \
	${.CURDIR}/widechar

LIB=    curses
SRCS=	codes.c comp_captab.c expanded.c fallback.c lib_gen.c lib_keyname.c \
	names.c unctrl.c
# base
SRCS+=	define_key.c key_defined.c keybound.c keyok.c legacy_coding.c \
	lib_addch.c lib_addstr.c lib_beep.c lib_bkgd.c lib_box.c lib_chgat.c \
	lib_clear.c lib_clearok.c lib_clrbot.c lib_clreol.c lib_color.c \
	lib_colorset.c lib_delch.c lib_delwin.c lib_dft_fgbg.c lib_echo.c \
	lib_endwin.c lib_erase.c lib_flash.c lib_freeall.c lib_getch.c \
	lib_getstr.c lib_hline.c lib_immedok.c lib_inchstr.c lib_initscr.c \
	lib_insnstr.c lib_insch.c lib_insdel.c lib_instr.c \
	lib_isendwin.c lib_leaveok.c lib_mouse.c lib_move.c lib_mvwin.c \
	lib_newterm.c lib_newwin.c lib_nl.c lib_overlay.c lib_pad.c \
	lib_printw.c lib_redrawln.c lib_refresh.c lib_restart.c \
	lib_scanw.c lib_screen.c lib_scroll.c lib_scrollok.c \
	lib_scrreg.c lib_set_term.c lib_slk.c lib_slkatr_set.c \
	lib_slkatrof.c lib_slkatron.c lib_slkatrset.c lib_slkattr.c \
	lib_slkclear.c lib_slkcolor.c lib_slkinit.c lib_slklab.c \
	lib_slkrefr.c lib_slkset.c lib_slktouch.c lib_touch.c \
	lib_ungetch.c lib_vline.c lib_wattroff.c lib_wattron.c \
	lib_winch.c lib_window.c nc_panel.c resizeterm.c safe_sprintf.c \
	tries.c use_window.c version.c vsscanf.c wresize.c
# tinfo
SRCS+=	access.c add_tries.c alloc_entry.c alloc_ttype.c captoinfo.c \
	comp_error.c comp_expand.c comp_hash.c comp_parse.c comp_scan.c \
	db_iterator.c doalloc.c entries.c free_ttype.c getenv_num.c \
	hashed_db.c home_terminfo.c init_keytry.c lib_acs.c lib_baudrate.c \
	lib_cur_term.c lib_data.c lib_has_cap.c lib_kernel.c lib_longname.c \
	lib_napms.c lib_options.c lib_print.c lib_raw.c lib_setup.c \
	lib_termcap.c lib_termname.c lib_tgoto.c lib_ti.c lib_tparm.c \
	lib_tputs.c lib_ttyflags.c name_match.c parse_entry.c \
	read_entry.c read_termcap.c setbuf.c strings.c \
	trim_sgr0.c use_screen.c write_entry.c
# trace
SRCS+=	lib_trace.c lib_traceatr.c lib_tracebits.c lib_tracechr.c \
	lib_tracedmp.c lib_tracemse.c trace_buf.c trace_tries.c trace_xnames.c \
	varargs.c visbuf.c
# tty
SRCS+=	hardscroll.c hashmap.c lib_mvcur.c lib_tstp.c lib_twait.c \
	lib_vidattr.c tty_update.c
# widechar
SRCS+=  charable.c lib_add_wch.c lib_box_set.c lib_cchar.c lib_erasewchar.c \
	lib_get_wch.c lib_get_wstr.c lib_hline_set.c lib_in_wch.c \
	lib_in_wchnstr.c lib_ins_wch.c lib_inwstr.c lib_key_name.c \
	lib_pecho_wchar.c lib_slk_wset.c lib_unget_wch.c lib_vid_attr.c \
	lib_vline_set.c lib_wacs.c lib_wunctrl.c

HOSTCFLAGS?=	${CFLAGS}
HOSTLDFLAGS?=	${LDFLAGS}
HOSTCFLAGS+=	-I. -I${.CURDIR} ${CURSESTRACE}
CFLAGS+=	-I. -I${.CURDIR} ${CURSESTRACE}

MAN=	curs_addch.3 curs_addchstr.3 curs_addstr.3 curs_attr.3 \
	curs_beep.3 curs_bkgd.3 curs_bkgrnd.3 curs_border.3 curs_border_set.3 \
	curs_clear.3 curs_color.3 \
	curs_delch.3 curs_deleteln.3 \
	curs_extend.3 \
	curs_getch.3 curs_getstr.3 curs_getyx.3 \
	curs_inch.3 curs_inchstr.3 curs_initscr.3 curs_inopts.3 \
	curs_insch.3 curs_insstr.3 curs_instr.3 \
	curs_kernel.3 \
	curs_legacy.3 \
	curs_mouse.3 curs_move.3 \
	curs_opaque.3 curs_outopts.3 curs_overlay.3 \
	curs_pad.3 curs_print.3 curs_printw.3 \
	curs_refresh.3 \
	curs_scanw.3 curs_scr_dump.3 curs_scroll.3 curs_slk.3 \
	curs_termattrs.3 curs_touch.3 \
	curs_util.3 \
	curs_window.3 \
	curs_add_wch.3 curs_add_wchstr.3 curs_addwstr.3 curs_get_wch.3 \
	curs_get_wstr.3 curs_in_wch.3 curs_in_wchstr.3 curs_ins_wch.3 \
	curs_ins_wstr.3 curs_inwstr.3 \
	default_colors.3 define_key.3 \
	key_defined.3 keybound.3 keyok.3 legacy_coding.3 \
	curses.3 \
	resizeterm.3 \
	term.5 term.7 termcap.3 terminfo.3 terminfo.5 \
	wresize.3

GENERATED= init_keytry.h codes.c comp_captab.c expanded.c fallback.c \
	keys.list lib_gen.c lib_keyname.c names.c unctrl.c make_hash make_keys
CLEANFILES+= ${GENERATED} term.5 terminfo.5 curses.3 \
	curs_addch.3 curs_attr.3 curs_getch.3 curs_inch.3 curs_mouse.3

all: ${GENERATED}

beforedepend: ${GENERATED}

BUILDFIRST = ${GENERATED}

includes:
	@@cmp -s ${DESTDIR}/usr/include/ncurses.h ${.CURDIR}/curses.h || \
	  ${INSTALL} ${INSTALL_COPY} -m 444 -o $(BINOWN) -g $(BINGRP) \
	  ${.CURDIR}/curses.h ${DESTDIR}/usr/include/ncurses.h
	@@cd ${.CURDIR}; for i in unctrl.h term.h termcap.h; do \
	  cmp -s $$i ${DESTDIR}/usr/include/$$i || \
	  ${INSTALL} ${INSTALL_COPY} -m 444 -o $(BINOWN) -g $(BINGRP) $$i \
	  ${DESTDIR}/usr/include; done

keys.list: ${.CURDIR}/tinfo/MKkeys_list.sh
	sh ${.CURDIR}/tinfo/MKkeys_list.sh ${.CURDIR}/Caps | sort > ${.TARGET}

fallback.c: ${.CURDIR}/tinfo/MKfallback.sh
	sh ${.CURDIR}/tinfo/MKfallback.sh $(FALLBACK_LIST) > ${.TARGET}

lib_gen.c: ${.CURDIR}/base/MKlib_gen.sh
	sh ${.CURDIR}/base/MKlib_gen.sh "${CC} -E -P -I${.CURDIR}" \
		"${AWK}" generated < ${.CURDIR}/curses.h > lib_gen.c

init_keytry.h: make_keys keys.list
	./make_keys keys.list > ${.TARGET}

make_keys: ${.CURDIR}/tinfo/make_keys.c ${.CURDIR}/curses.priv.h names.c
	${HOSTCC} ${LDSTATIC} ${HOSTCFLAGS} ${HOSTLDFLAGS} \
		-o ${.TARGET} ${.CURDIR}/tinfo/make_keys.c ${LDADD}

make_hash: ${.CURDIR}/tinfo/comp_hash.c ${.CURDIR}/curses.priv.h \
		${.CURDIR}/hashsize.h
	${HOSTCC} ${LDSTATIC} ${HOSTCFLAGS} -DMAIN_PROGRAM ${HOSTLDFLAGS} \
		-o ${.TARGET} ${.CURDIR}/tinfo/comp_hash.c ${LDADD}

expanded.c: ${.CURDIR}/term.h ${.CURDIR}/curses.priv.h \
		${.CURDIR}/ncurses_cfg.h ${.CURDIR}/tty/MKexpanded.sh
	sh ${.CURDIR}/tty/MKexpanded.sh "${CC} -E -P" ${CPPFLAGS} > ${.TARGET}

comp_captab.c: make_hash
	sh ${.CURDIR}/tinfo/MKcaptab.sh ${AWK} 1 \
		${.CURDIR}/tinfo/MKcaptab.awk ${.CURDIR}/Caps > ${.TARGET}

lib_keyname.c: keys.list ${.CURDIR}/base/MKkeyname.awk
	${AWK} -f ${.CURDIR}/base/MKkeyname.awk bigstrings=1 \
		keys.list > ${.TARGET}

names.c: ${.CURDIR}/tinfo/MKnames.awk
	${AWK} -f ${.CURDIR}/tinfo/MKnames.awk \
		${.CURDIR}/Caps > names.c
codes.c: ${.CURDIR}/tinfo/MKcodes.awk
	${AWK} -f ${.CURDIR}/tinfo/MKcodes.awk \
		bigstrings=1 ${.CURDIR}/Caps > codes.c

unctrl.c: ${.CURDIR}/base/MKunctrl.awk
	echo | ${AWK} -f ${.CURDIR}/base/MKunctrl.awk bigstrings=1 > ${.TARGET}

.include <bsd.own.mk>

# Link libtermlib, libtermcap to libcurses so we don't break people's Makefiles
afterinstall:
	-cd ${DESTDIR}${LIBDIR}; \
	for i in ${_LIBS}; do \
	    ln -f $$i `echo $$i | sed 's/curses/termlib/'`; \
	    ln -f $$i `echo $$i | sed 's/curses/termcap/'`; \
	    ln -f $$i `echo $$i | sed 's/curses/ncurses/'`; \
	    ln -f $$i `echo $$i | sed 's/curses/ncursesw/'`; \
	done

.include <bsd.lib.mk>

init_keytry.o init_keytry.so init_keytry.po init_keytry.ln: init_keytry.h
lib_options.o lib_options.so lib_options.po lib_options.ln: init_keytry.h

# must be at the end because bsd.lib.mk clears it
.SUFFIXES: .3 .3tbl .5 .5tbl

.3tbl.3:
	cp ${.IMPSRC} ${.TARGET}

.5tbl.5:
	cp ${.IMPSRC} ${.TARGET}
@


1.70
log
@Include the legacy_coding(3) page which documents use_legacy_coding(),
probably missed at one update or another. Reported by Anthony Coulter,
discussed with jmc.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.69 2016/07/04 18:01:44 guenther Exp $
d104 2
@


1.69
log
@DEBUGLIBS has been broken since the gcc4 switch, so delete it.  CFLAGS
contains -g by default anyway

problem noted by Edgar Pettijohn (edgar (at) pettijohn-web.com)
ok millert@@ kettenis@@ deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.68 2016/05/26 21:24:16 millert Exp $
d90 1
a90 1
	key_defined.3 keybound.3 keyok.3 \
@


1.68
log
@Use "cc -E" instead of "cpp".  OK deraadt@@ natano@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.67 2016/03/30 06:38:42 jmc Exp $
a168 7
.if (${DEBUGLIBS:L} == "yes")
	-cd ${DESTDIR}${LIBDIR}/debug; \
	    ln -f lib${LIB}.a lib`echo ${LIB} | sed 's/curses/termlib/'`.a; \
	    ln -f lib${LIB}.a lib`echo ${LIB} | sed 's/curses/termcap/'`.a; \
	    ln -f lib${LIB}.a lib`echo ${LIB} | sed 's/curses/ncurses/'`.a; \
	    ln -f lib${LIB}.a lib`echo ${LIB} | sed 's/curses/ncursesw/'`.a
.endif
@


1.67
log
@for some time now mandoc has not required MLINKS to function
correctly - logically complete that now by removing MLINKS from base;

authors need only to ensure there is an entry in NAME for any function/
util being added. MLINKS will still work, and remain for perl to ease
upgrades;

ok nicm (curses) bcook (ssl)
ok schwarze, who provided a lot of feedback and assistance
ok tb natano jung
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.66 2015/12/03 11:29:55 nicm Exp $
d121 1
a121 1
	sh ${.CURDIR}/base/MKlib_gen.sh "${CPP} -I${.CURDIR}" \
d138 1
a138 1
	sh ${.CURDIR}/tty/MKexpanded.sh "${CPP}" ${CPPFLAGS} > ${.TARGET}
@


1.66
log
@Instead of using our own custom BDB terminfo databases, use the ncurses
files in /usr/share/terminfo/*. This removes a large difference from
upstream ncurses and other systems.

ok millert
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.65 2015/11/12 12:38:03 jmc Exp $
a94 174

MLINKS+= curses.3 ncurses.3
MLINKS+= curs_addch.3 addch.3 curs_addch.3 waddch.3 curs_addch.3 mvaddch.3 \
	curs_addch.3 mvwaddch.3 curs_addch.3 echochar.3 curs_addch.3 \
	wechochar.3 curs_addchstr.3 addchstr.3 curs_addchstr.3 addchnstr.3 \
	curs_addchstr.3 waddchstr.3 curs_addchstr.3 waddchnstr.3 \
	curs_addchstr.3 mvaddchstr.3 curs_addchstr.3 mvaddchnstr.3 \
	curs_addchstr.3 mvwaddchstr.3 curs_addchstr.3 mvwaddchnstr.3 \
	curs_addstr.3 addstr.3 curs_addstr.3 addnstr.3 curs_addstr.3 waddstr.3 \
	curs_addstr.3 waddnstr.3 curs_addstr.3 mvaddstr.3 curs_addstr.3 \
	mvaddnstr.3 curs_addstr.3 mvwaddstr.3 curs_addstr.3 mvwaddnstr.3 \
	curs_attr.3 attroff.3 curs_attr.3 wattroff.3 curs_attr.3 attron.3 \
	curs_attr.3 wattron.3 curs_attr.3 attrset.3 curs_attr.3 wattrset.3 \
	curs_attr.3 standend.3 curs_attr.3 wstandend.3 curs_attr.3 standout.3 \
	curs_attr.3 wstandout.3 curs_attr.3 color_set.3 curs_attr.3 \
	wcolor_set.3 curs_attr.3 attr_get.3 curs_attr.3 attr_on.3 \
	curs_attr.3 attr_off.3 curs_attr.3 attr_set.3 curs_attr.3 wattr_get.3 \
	curs_attr.3 wattr_on.3 curs_attr.3 wattr_off.3 curs_attr.3 attr_set.3 \
	curs_attr.3 wattr_set.3 curs_attr.3 chgat.3 curs_attr.3 wchgat.3 \
	curs_attr.3 mvchgat.3 curs_attr.3 mvwchgat.3 curs_attr.3 PAIR_NUMBER.3 \
	curs_beep.3 beep.3 \
	curs_beep.3 flash.3 curs_bkgd.3 bkgdset.3 curs_bkgd.3 wbkgdset.3 \
	curs_bkgd.3 bkgd.3 curs_bkgd.3 wbkgd.3 curs_bkgd.3 getbkgd.3 \
	curs_border.3 border.3 curs_border.3 mvhline.3 curs_border.3 mvvline.3 \
	curs_border.3 mvwhline.3 curs_border.3 mvwvline.3 \
	curs_border.3 wborder.3 curs_border.3 box.3 curs_border.3 hline.3 \
	curs_border.3 whline.3 curs_border.3 vline.3 curs_border.3 wvline.3 \
	curs_clear.3 erase.3 curs_clear.3 werase.3 curs_clear.3 clear.3 \
	curs_clear.3 wclear.3 curs_clear.3 clrtobot.3 curs_clear.3 \
	wclrtobot.3 curs_clear.3 clrtoeol.3 curs_clear.3 wclrtoeol.3 \
	curs_color.3 start_color.3 curs_color.3 init_pair.3 curs_color.3 \
	init_color.3 curs_color.3 has_colors.3 curs_color.3 can_change_color.3 \
	curs_color.3 color_content.3 curs_color.3 pair_content.3 \
	curs_color.3 COLOR_PAIR.3 \
	curs_delch.3 delch.3 curs_delch.3 wdelch.3 curs_delch.3 mvdelch.3 \
	curs_delch.3 mvwdelch.3 curs_deleteln.3 deleteln.3 curs_deleteln.3 \
	wdeleteln.3 curs_deleteln.3 insdelln.3 curs_deleteln.3 winsdelln.3 \
	curs_deleteln.3 insertln.3 curs_deleteln.3 winsertln.3 curs_getch.3 \
	getch.3 curs_getch.3 wgetch.3 curs_getch.3 mvgetch.3 curs_getch.3 \
	mvwgetch.3 curs_getch.3 ungetch.3 curs_getch.3 has_key.3 curs_getstr.3 \
	getstr.3 curs_getstr.3 getnstr.3 curs_getstr.3 mvgetnstr.3 \
	curs_getstr.3 wgetstr.3 curs_getstr.3 mvgetstr.3 curs_getstr.3 \
	mvwgetstr.3 curs_getstr.3 mvwgetnstr.3 curs_getstr.3 wgetnstr.3 \
	curs_getyx.3 getyx.3 curs_getyx.3 getparyx.3 curs_getyx.3 getbegyx.3 \
	curs_getyx.3 getmaxyx.3 curs_inch.3 inch.3 curs_inch.3 winch.3 \
	curs_inch.3 mvinch.3 curs_inch.3 mvwinch.3 curs_inchstr.3 inchstr.3 \
	curs_inchstr.3 inchnstr.3 curs_inchstr.3 winchstr.3 curs_inchstr.3 \
	winchnstr.3 curs_inchstr.3 mvinchstr.3 curs_inchstr.3 mvinchnstr.3 \
	curs_inchstr.3 mvwinchstr.3 curs_inchstr.3 mvwinchnstr.3 \
	curs_initscr.3 initscr.3 curs_initscr.3 newterm.3 curs_initscr.3 \
	endwin.3 curs_initscr.3 isendwin.3 curs_initscr.3 set_term.3 \
	curs_initscr.3 delscreen.3 curs_inopts.3 cbreak.3 curs_inopts.3 \
	nocbreak.3 curs_inopts.3 echo.3 curs_inopts.3 noecho.3 curs_inopts.3 \
	halfdelay.3 curs_inopts.3 intrflush.3 curs_inopts.3 keypad.3 \
	curs_inopts.3 meta.3 curs_inopts.3 nodelay.3 curs_inopts.3 notimeout.3 \
	curs_inopts.3 raw.3 curs_inopts.3 noraw.3 curs_inopts.3 noqiflush.3 \
	curs_inopts.3 qiflush.3 curs_inopts.3 timeout.3 curs_inopts.3 \
	wtimeout.3 curs_inopts.3 typeahead.3 curs_insch.3 insch.3 curs_insch.3 \
	winsch.3 curs_insch.3 mvinsch.3 curs_insch.3 mvwinsch.3 curs_insstr.3 \
	insstr.3 curs_insstr.3 insnstr.3 curs_insstr.3 winsstr.3 curs_insstr.3 \
	winsnstr.3 curs_insstr.3 mvinsstr.3 curs_insstr.3 mvinsnstr.3 \
	curs_insstr.3 mvwinsstr.3 curs_insstr.3 mvwinsnstr.3 curs_instr.3 \
	instr.3 curs_instr.3 innstr.3 curs_instr.3 winstr.3 curs_instr.3 \
	winnstr.3 curs_instr.3 mvinstr.3 curs_instr.3 mvinnstr.3 curs_instr.3 \
	mvwinstr.3 curs_instr.3 mvwinnstr.3 curs_kernel.3 def_prog_mode.3 \
	curs_kernel.3 def_shell_mode.3 curs_kernel.3 reset_prog_mode.3 \
	curs_kernel.3 reset_shell_mode.3 curs_kernel.3 resetty.3 curs_kernel.3 \
	savetty.3 curs_kernel.3 getsyx.3 curs_kernel.3 setsyx.3 curs_kernel.3 \
	ripoffline.3 curs_kernel.3 curs_set.3 curs_kernel.3 napms.3 \
	curs_mouse.3 getmouse.3 curs_mouse.3 ungetmouse.3 curs_mouse.3 \
	mousemask.3 curs_mouse.3 wenclose.3 curs_mouse.3 wmouse_trafo.3 \
	curs_mouse.3 mouse_trafo.3 curs_mouse.3 mouseinterval.3 curs_move.3 \
	move.3 curs_move.3 wmove.3 curs_outopts.3 clearok.3 curs_outopts.3 \
	idlok.3 curs_outopts.3 idcok.3 curs_outopts.3 \
	immedok.3 curs_outopts.3 leaveok.3 curs_outopts.3 setscrreg.3 \
	curs_outopts.3 wsetscrreg.3 curs_outopts.3 scrollok.3 curs_outopts.3 \
	nl.3 curs_outopts.3 nonl.3 curs_overlay.3 overlay.3 curs_overlay.3 \
	overwrite.3 curs_overlay.3 copywin.3 curs_pad.3 newpad.3 curs_pad.3 \
	subpad.3 curs_pad.3 prefresh.3 curs_pad.3 pnoutrefresh.3 curs_pad.3 \
	pechochar.3 curs_print.3 mcprint.3 curs_printw.3 printw.3 \
	curs_printw.3 wprintw.3 curs_printw.3 mvprintw.3 curs_printw.3 \
	mvwprintw.3 curs_printw.3 vwprintw.3 curs_printw.3 vw_printw.3 \
	curs_refresh.3 refresh.3 \
	curs_refresh.3 wrefresh.3 curs_refresh.3 wnoutrefresh.3 curs_refresh.3 \
	doupdate.3 curs_refresh.3 redrawwin.3 curs_refresh.3 wredrawln.3 \
	curs_scanw.3 scanw.3 curs_scanw.3 wscanw.3 curs_scanw.3 mvscanw.3 \
	curs_scanw.3 mvwscanw.3 curs_scanw.3 vwscanw.3 curs_scanw.3 vw_scanw.3 \
	curs_scr_dump.3 scr_dump.3 curs_scr_dump.3 scr_restore.3 \
	curs_scr_dump.3 scr_init.3 \
	curs_scr_dump.3 scr_set.3 curs_scroll.3 scroll.3 curs_scroll.3 scrl.3 \
	curs_scroll.3 wscrl.3 curs_slk.3 slk_attr.3 curs_slk.3 slk_init.3 \
	curs_slk.3 slk_set.3 curs_slk.3 slk_refresh.3 curs_slk.3 \
	slk_noutrefresh.3 curs_slk.3 slk_label.3 curs_slk.3 slk_clear.3 \
	curs_slk.3 slk_restore.3 curs_slk.3 slk_touch.3 curs_slk.3 \
	slk_attr_on.3 curs_slk.3 slk_attr_set.3 curs_slk.3 slk_attr_off.3 \
	curs_slk.3 slk_attron.3 curs_slk.3 slk_attrset.3 \
	curs_slk.3 slk_attroff.3 curs_slk.3 slk_color.3 curs_termattrs.3 \
	baudrate.3 curs_termattrs.3 erasechar.3 curs_termattrs.3 has_ic.3 \
	curs_termattrs.3 has_il.3 curs_termattrs.3 killchar.3 curs_termattrs.3 \
	longname.3 curs_termattrs.3 termattrs.3 curs_termattrs.3 termname.3 \
	curs_touch.3 touchwin.3 curs_touch.3 touchline.3 curs_touch.3 \
	untouchwin.3 curs_touch.3 wtouchln.3 curs_touch.3 is_linetouched.3 \
	curs_touch.3 is_wintouched.3 curs_util.3 unctrl.3 curs_util.3 \
	keyname.3 curs_util.3 filter.3 curs_util.3 use_env.3 curs_util.3 \
	putwin.3 curs_util.3 getwin.3 curs_util.3 delay_output.3 curs_util.3 \
	flushinp.3 curs_window.3 newwin.3 curs_window.3 delwin.3 curs_window.3 \
	mvwin.3 curs_window.3 subwin.3 curs_window.3 derwin.3 curs_window.3 \
	mvderwin.3 curs_window.3 dupwin.3 curs_window.3 wsyncup.3 \
	curs_window.3 syncok.3 curs_window.3 wcursyncup.3 \
	curs_window.3 wsyncdown.3
MLINKS+= curs_extend.3 curses_version.3 curs_extend.3 use_extended_names.3 \
	default_colors.3 assume_default_colors.3 \
	default_colors.3 use_default_colors.3
MLINKS+= terminfo.3 setupterm.3 terminfo.3 setterm.3 terminfo.3 set_curterm.3 \
	terminfo.3 del_curterm.3 terminfo.3 restartterm.3 terminfo.3 tparm.3 \
	terminfo.3 tputs.3 terminfo.3 putp.3 \
	terminfo.3 vidputs.3 terminfo.3 vidattr.3 terminfo.3 mvcur.3 \
	terminfo.3 tigetflag.3 terminfo.3 tigetnum.3 terminfo.3 tigetstr.3
MLINKS+= termcap.3 tgetent.3 termcap.3 tgetflag.3 termcap.3 tgetnum.3 \
	termcap.3 tgetstr.3 termcap.3 tgoto.3 termcap.3 tputs.3
MLINKS+= curs_bkgrnd.3 bkgrnd.3 curs_bkgrnd.3 wbkgrnd.3 \
	curs_bkgrnd.3 bkgrndset.3 curs_bkgrnd.3 wbkgrndset.3 \
	curs_bkgrnd.3 getbkgrnd.3 curs_bkgrnd.3 wgetbkgrnd.3
MLINKS+= curs_border_set.3 border_set.3 curs_border_set.3 wborder_set.3 \
	curs_border_set.3 box_set.3 curs_border_set.3 hline_set.3 \
	curs_border_set.3 whline_set.3 curs_border_set.3 mvhline_set.3 \
	curs_border_set.3 mvhline_set.3 curs_border_set.3 mvwhline_set.3 \
	curs_border_set.3 vline_set.3 curs_border_set.3 wvline_set.3 \
	curs_border_set.3 mvvline_set.3 curs_border_set.3 mvwvline_set.3
MLINKS+= curs_legacy.3 getbegx.3 curs_legacy.3 getbegy.3 \
	curs_legacy.3 getcurx.3 curs_legacy.3 getcury.3 \
	curs_legacy.3 getmaxx.3 curs_legacy.3 getmaxy.3 \
	curs_legacy.3 getparx.3 curs_legacy.3 getpary.3
MLINKS+= curs_opaque.3 is_cleared.3 curs_opaque.3 is_idcok.3 \
	curs_opaque.3 is_idlok.3 curs_opaque.3 is_immedok.3 \
	curs_opaque.3 is_keypad.3 curs_opaque.3 is_leaveok.3 \
	curs_opaque.3 is_nodelay.3 curs_opaque.3 is_notimeout.3 \
	curs_opaque.3 is_scrollok.3 curs_opaque.3 is_syncok.3 \
	curs_opaque.3 wgetparent.3 curs_opaque.3 wgetscrreg.3
MLINKS+= resizeterm.3 is_term_resized.3 resizeterm.3 resize_term.3
MLINKS+= curs_add_wch.3 add_wch.3 curs_add_wch.3 wadd_wch.3 \
	curs_add_wch.3 mvadd_wch.3 curs_add_wch.3 mvwadd_wch.3 \
	curs_add_wch.3 echo_wchar.3 curs_add_wch.3 wecho_wchar.3
MLINKS+= curs_add_wchstr.3 add_wchstr.3 curs_add_wchstr.3 add_wchnstr.3 \
	curs_add_wchstr.3 wadd_wchstr.3 curs_add_wchstr.3 wadd_wchnstr.3 \
	curs_add_wchstr.3 mvadd_wchstr.3 curs_add_wchstr.3 mvadd_wchnstr.3 \
	curs_add_wchstr.3 mvwadd_wchstr.3 curs_add_wchstr.3 mvwadd_wchnstr.3
MLINKS+= curs_addwstr.3 addwstr.3 curs_addwstr.3 addnwstr.3 \
	curs_addwstr.3 waddwstr.3 curs_addwstr.3 waddnwstr.3 \
	curs_addwstr.3 mvaddwstr.3 curs_addwstr.3 mvaddnwstr.3 \
	curs_addwstr.3 mvwaddwstr.3 curs_addwstr.3 mvwaddnwstr.3
MLINKS+= curs_get_wch.3 get_wch.3 curs_get_wch.3 wget_wch.3 \
	curs_get_wch.3 mvget_wch.3 curs_get_wch.3 mvwget_wch.3 \
	curs_get_wch.3 unget_wch.3
MLINKS+= curs_get_wstr.3 get_wstr.3 curs_get_wstr.3 getn_wstr.3 \
	curs_get_wstr.3 wget_wstr.3 curs_get_wstr.3 wgetn_wstr.3 \
	curs_get_wstr.3 mvget_wstr.3 curs_get_wstr.3 mvgetn_wstr.3 \
	curs_get_wstr.3 mvwget_wstr.3 curs_get_wstr.3 mvwgetn_wstr.3
MLINKS+= curs_in_wch.3 in_wch.3 curs_in_wch.3 mvin_wch.3 \
	curs_in_wch.3 mvwin_wch.3 curs_in_wch.3 win_wch.3
MLINKS+= curs_in_wchstr.3 in_wchstr.3 curs_in_wchstr.3 in_wchnstr.3 \
	curs_in_wchstr.3 win_wchstr.3 curs_in_wchstr.3 win_wchnstr.3 \
	curs_in_wchstr.3 mvin_wchstr.3 curs_in_wchstr.3 mvin_wchnstr.3 \
	curs_in_wchstr.3 mvwin_wchstr.3 curs_in_wchstr.3 mvwin_wchnstr.3
MLINKS+= curs_ins_wch.3 ins_wch.3 curs_ins_wch.3 mvins_wch.3 \
	curs_ins_wch.3 mvwins_wch.3 curs_ins_wch.3 wins_wch.3
MLINKS+= curs_ins_wstr.3 ins_wstr.3 curs_ins_wstr.3 ins_nwstr.3 \
	curs_ins_wstr.3 wins_wstr.3 curs_ins_wstr.3 wins_nwstr.3 \
	curs_ins_wstr.3 mvins_wstr.3 curs_ins_wstr.3 mvins_nwstr.3 \
	curs_ins_wstr.3 mvwins_wstr.3 curs_ins_wstr.3 mvwins_nwstr.3
MLINKS+= curs_inwstr.3 inwstr.3 curs_inwstr.3 innwstr.3 \
	curs_inwstr.3 winwstr.3 curs_inwstr.3 winnwstr.3 \
	curs_inwstr.3 mvinwstr.3 curs_inwstr.3 mvinnwstr.3 \
	curs_inwstr.3 mvwinwstr.3 curs_inwstr.3 mvwinnwstr.3
@


1.65
log
@the tparam mlink is probably a typo (and duplicate) for tparm, so kill it;
spotted by nicm
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.64 2014/07/16 10:35:53 deraadt Exp $
d47 1
a47 1
	read_bsd_terminfo.c read_entry.c read_termcap.c setbuf.c strings.c \
@


1.64
log
@lynx has left the tree, and let's be honest noone will find these html
files in their installed system.  this extended documentation experience
is available better on the net using a browser installed with pkg_add.
(also note that two of the subsystems involved in this issue are heading
to the bit bucket sometime soon)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.63 2012/12/21 08:50:27 espie Exp $
d210 1
a210 1
	terminfo.3 tparam.3 terminfo.3 tputs.3 terminfo.3 putp.3 \
@


1.63
log
@remove makefile hacks that are no longer needed with t1 t2: working properly
okay krw@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.62 2012/08/02 13:38:38 okan Exp $
a273 4

.if make(install)
SUBDIR+= doc
.endif
@


1.62
log
@remove leftover NOLINT, WANTLINT, LINTFLAGS, LOBJ vars and lint targets.

ok guenther@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.61 2011/06/23 22:46:12 schwarze Exp $
d272 1
a272 1
CLEANFILES+= ${GENERATED} stamp_namebuild term.5 terminfo.5 curses.3 \
d326 1
a326 3
names.c codes.c: stamp_namebuild

stamp_namebuild: ${.CURDIR}/tinfo/MKnames.awk ${.CURDIR}/tinfo/MKcodes.awk
d329 1
a331 1
	touch $@@
@


1.61
log
@switch to installing source manuals (base part)
discussed with lots of people, tested by naddy@@,
"move fast" deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.60 2010/09/06 17:26:17 nicm Exp $
a16 1
WANTLINT=
@


1.60
log
@Enable wide character support in ncurses. It is built into libcurses,
libform, libmenu, libpanel and each library is also linked to a
corresponding "w" version.

This is a major bump for all four libraries.

Thanks to landry, stsp, sthen, naddy, oga, Martin Pieuchot, and anyone
else I've forgotten for testing.

ok naddy krw deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.59 2010/01/12 23:21:58 nicm Exp $
d69 1
a69 1
MAN=	curs_addch.3tbl curs_addchstr.3 curs_addstr.3 curs_attr.3tbl \
d74 2
a75 2
	curs_getch.3tbl curs_getstr.3 curs_getyx.3 \
	curs_inch.3tbl curs_inchstr.3 curs_initscr.3 curs_inopts.3 \
d79 1
a79 1
	curs_mouse.3tbl curs_move.3 \
d92 1
a92 1
	curses.3tbl \
d94 1
a94 1
	term.5tbl term.7 termcap.3 terminfo.3 terminfo.5tbl \
d273 2
a274 1
CLEANFILES+= ${GENERATED} stamp_namebuild
d362 9
@


1.59
log
@Update to ncurses 5.7, with local changes reapplied.

This is around eight years worth of changes (previously we were around ncurses
5.2), too many to list - many bug fixes and also a few new functions.

A major bump for libcurses, libpanel, libform and libmenu.

ok deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.58 2009/08/13 19:54:58 jmc Exp $
d13 2
a14 1
.PATH:	${.CURDIR}/base ${.CURDIR}/tinfo ${.CURDIR}/trace ${.CURDIR}/tty
d57 6
d75 2
a76 1
	curs_inch.3tbl curs_inchstr.3 curs_initscr.3 curs_inopts.3 curs_insch.3 curs_insstr.3 curs_instr.3 \
d87 3
d97 2
a98 2
MLINKS+=curses.3 ncurses.3
MLINKS+=curs_addch.3 addch.3 curs_addch.3 waddch.3 curs_addch.3 mvaddch.3 \
d206 1
a206 1
MLINKS+=curs_extend.3 curses_version.3 curs_extend.3 use_extended_names.3 \
d235 35
d347 1
d353 2
a354 1
	    ln -f lib${LIB}.a lib`echo ${LIB} | sed 's/curses/ncurses/'`.a
@


1.58
log
@various MLINK fixes from Alan R. S. Bueno;
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.57 2007/11/24 15:43:08 espie Exp $
d20 7
a26 7
SRCS+=	define_key.c keybound.c keyok.c lib_adabind.c lib_addch.c lib_addstr.c \
	lib_beep.c lib_bkgd.c lib_box.c lib_chgat.c lib_clear.c \
	lib_clearok.c lib_clrbot.c lib_clreol.c lib_color.c \
	lib_colorset.c lib_delch.c lib_delwin.c lib_dft_fgbg.c \
	lib_echo.c lib_endwin.c lib_erase.c lib_flash.c lib_freeall.c \
	lib_getch.c lib_getstr.c lib_hline.c lib_immedok.c lib_inchstr.c \
	lib_initscr.c lib_insch.c lib_insdel.c lib_insstr.c lib_instr.c \
d37 1
a37 1
	sigaction.c tries.c version.c wresize.c
d41 8
a48 7
	doalloc.c free_ttype.c getenv_num.c home_terminfo.c init_keytry.c \
	lib_acs.c lib_baudrate.c lib_cur_term.c lib_data.c lib_has_cap.c \
	lib_kernel.c lib_longname.c lib_napms.c lib_options.c lib_print.c \
	lib_raw.c lib_setup.c lib_termcap.c lib_termname.c lib_tgoto.c \
	lib_ti.c lib_tparm.c lib_tputs.c lib_ttyflags.c name_match.c \
	parse_entry.c read_bsd_terminfo.c read_entry.c read_termcap.c \
	setbuf.c strings.c write_entry.c
d51 2
a52 1
	lib_tracedmp.c lib_tracemse.c trace_buf.c trace_tries.c trace_xnames.c
d62 24
a85 10
MAN=	curs_addch.3 curs_addchstr.3 curs_addstr.3 curs_attr.3 curs_beep.3 \
	curs_bkgd.3 curs_border.3 curs_clear.3 curs_color.3 curs_delch.3 \
	curs_deleteln.3 curs_extend.3 curs_getch.3 curs_getstr.3 curs_getyx.3 \
	curs_inch.3 curs_inchstr.3 curs_initscr.3 curs_inopts.3 curs_insch.3 \
	curs_insstr.3 curs_instr.3 curs_kernel.3 curs_mouse.3 curs_move.3 \
	curs_outopts.3 curs_overlay.3 curs_pad.3 curs_print.3 curs_printw.3 \
	curs_refresh.3 curs_scanw.3 curs_scr_dump.3 curs_scroll.3 curs_slk.3 \
	curs_termattrs.3 curs_touch.3 curs_util.3 curs_window.3 \
	curses.3 define_key.3 default_colors.3 keybound.3 keyok.3 resizeterm.3 \
	wresize.3 termcap.3 terminfo.3 terminfo.5 term.5 term.7
d205 19
d225 2
a226 2
GENERATED= init_keytry.h nomacros.h codes.c comp_captab.c expanded.c \
	fallback.c lib_gen.c lib_keyname.c names.c unctrl.c make_hash make_keys
d246 4
a249 1
fallback.c: ${.CURDIR}/term.h ${.CURDIR}/curses.priv.h ${.CURDIR}/tinfo/MKfallback.sh
d252 15
a266 8
lib_gen.c: ${.CURDIR}/curses.h ${.CURDIR}/base/MKlib_gen.sh
	sh ${.CURDIR}/base/MKlib_gen.sh "${CPP} -I${.CURDIR}" "${AWK}" < ${.CURDIR}/curses.h > lib_gen.c

nomacros.h: ${.CURDIR}/base/MKlib_gen.sh lib_gen.c
	fgrep undef lib_gen.c > ${.TARGET}

init_keytry.h: make_keys ${.CURDIR}/tinfo/keys.list
	./make_keys ${.CURDIR}/tinfo/keys.list > ${.TARGET}
d268 2
a269 7
make_keys: ${.CURDIR}/tinfo/make_keys.c names.c
	${HOSTCC} ${LDSTATIC} ${HOSTCFLAGS} ${HOSTLDFLAGS} -o ${.TARGET} ${.CURDIR}/tinfo/make_keys.c ${LDADD}

make_hash: ${.CURDIR}/tinfo/comp_hash.c ${.CURDIR}/hashsize.h
	${HOSTCC} ${LDSTATIC} ${HOSTCFLAGS} -DMAIN_PROGRAM ${HOSTLDFLAGS} -o ${.TARGET} ${.CURDIR}/tinfo/comp_hash.c ${LDADD}

expanded.c: ${.CURDIR}/term.h ${.CURDIR}/curses.priv.h ${.CURDIR}/tty/MKexpanded.sh
d272 7
a278 5
comp_captab.c: make_hash ${.CURDIR}/ncurses_cfg.h ${.CURDIR}/tic.h ${.CURDIR}/term.h
	sh ${.CURDIR}/tinfo/MKcaptab.awk ${AWK} ${.CURDIR}/Caps > ${.TARGET}

lib_keyname.c: ${.CURDIR}/ncurses_cfg.h ${.CURDIR}/curses.h ${.CURDIR}/term.h  ${.CURDIR}/tinfo/keys.list ${.CURDIR}/base/MKkeyname.awk
	${AWK} -f ${.CURDIR}/base/MKkeyname.awk ${.CURDIR}/tinfo/keys.list > ${.TARGET}
d282 5
a286 5
stamp_namebuild: ${.CURDIR}/tinfo/MKnames.awk
	${AWK} -f ${.CURDIR}/tinfo/MKnames.awk ${.CURDIR}/Caps
	cat namehdr boolnames boolfnames numnames numfnames strnames strfnames nameftr > names.c
	cat namehdr boolcodes numcodes strcodes codeftr > codes.c
	-rm -f namehdr nameftr codeftr boolnames boolfnames boolcodes numnames numfnames numcodes strnames strfnames strcodes
d290 1
a290 1
	echo | ${AWK} -f ${.CURDIR}/base/MKunctrl.awk > ${.TARGET}
@


1.57
log
@fix yacc/lex parallel file generation
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.55 2005/11/24 20:49:16 deraadt Exp $
d177 2
a178 2
	curs_window.3 syncok.3 curs_window.3 wcursyncup.3 curs_window.3 \
	wsyncdown.3 default_colors.3 use_default_colors.3
d180 2
a181 2
	default_colors.3 assume_default_colors.3 default_colors.3 \
	use_default_colors.3
@


1.56
log
@add missing dependency
@
text
@d192 1
a192 1
CLEANFILES+= ${GENERATED}
d238 3
a240 1
names.c codes.c: ${.CURDIR}/tinfo/MKnames.awk
d245 1
@


1.55
log
@use WANTLINT= (on all architectures)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.54 2003/10/19 22:20:37 brad Exp $
d266 1
@


1.54
log
@fix installation of DEBUGLIBS libcurses symlink.
--
From: tholo@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.53 2003/05/19 19:05:06 millert Exp $
d16 1
@


1.53
log
@Add the generated files as a dependency for the 'all' target.
Should prevent bogus bug reports that come in every so often...
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.52 2002/11/14 00:50:19 millert Exp $
d259 1
a259 1
	    ln -f lib${LIB}.a lib`echo ${LIB} | sed 's/curses/termcap/'`.a
@


1.52
log
@Add a link to libncurses.  Lots of programs/configure scripts out there
look for ncurses by checking for ncurses.h or libncurses instead of
checking for NCURSES_VERSION in curses.h.  Closes PR 2942.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.51 2002/08/16 01:59:41 wcobb Exp $
d197 3
a199 2
beforedepend: init_keytry.h nomacros.h codes.c comp_captab.c expanded.c \
	fallback.c lib_gen.c lib_keyname.c names.c unctrl.c make_hash make_keys
@


1.51
log
@use HOSTCFLAGS and HOSTLDFLAGS with HOSTCC.
ok art@@, miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.50 2002/07/26 00:27:11 art Exp $
d253 1
d259 1
@


1.50
log
@Obey LDSTATIC for the helper binaries.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.49 2002/06/24 18:03:30 tholo Exp $
d53 6
a58 1
CFLAGS+= -I. -I${.CURDIR} ${CURSESTRACE}
d222 1
a222 1
	${HOSTCC} ${LDSTATIC} ${CFLAGS} ${LDFLAGS} -o ${.TARGET} ${.CURDIR}/tinfo/make_keys.c ${LDADD}
d225 1
a225 1
	${HOSTCC} ${LDSTATIC} ${CFLAGS} -DMAIN_PROGRAM ${LDFLAGS} -o ${.TARGET} ${.CURDIR}/tinfo/comp_hash.c ${LDADD}
@


1.49
log
@Properly install links for debug libraries; ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.48 2000/11/08 22:09:24 deraadt Exp $
d217 1
a217 1
	${HOSTCC} ${CFLAGS} ${LDFLAGS} -o ${.TARGET} ${.CURDIR}/tinfo/make_keys.c ${LDADD}
d220 1
a220 1
	${HOSTCC} ${CFLAGS} -DMAIN_PROGRAM ${LDFLAGS} -o ${.TARGET} ${.CURDIR}/tinfo/comp_hash.c ${LDADD}
@


1.48
log
@another MLINK
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.47 2000/10/08 22:46:54 millert Exp $
d240 2
d244 1
a244 1
	-cd ${DESTDIR}/usr/lib; \
d249 5
@


1.47
log
@update to ncurses-5.1-20001007
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.46 2000/07/24 04:06:09 millert Exp $
d149 3
a151 2
	curs_scanw.3 mvwscanw.3 curs_scanw.3 vwscanw.3 curs_scr_dump.3 \
	scr_dump.3 curs_scr_dump.3 scr_restore.3 curs_scr_dump.3 scr_init.3 \
@


1.46
log
@Update to ncurses-5.1-20000722
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.45 2000/07/10 03:06:03 millert Exp $
d43 2
a44 2
	lib_raw.c lib_setup.c lib_termcap.c lib_termname.c lib_ti.c \
	lib_tparm.c lib_tputs.c lib_ttyflags.c name_match.c \
d46 1
a46 1
	setbuf.c write_entry.c
@


1.45
log
@ncurses 5.1
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.44 2000/03/29 06:37:26 deraadt Exp $
d62 1
a62 1
	curses.3 define_key.3 dft_fgbg.3 keybound.3 keyok.3 resizeterm.3 \
d171 1
a171 1
	wsyncdown.3 dft_fgbg.3 use_default_colors.3
d173 2
a174 1
	dft_fgbg.3 assume_default_colors.3 dft_fgbg.3 use_default_colors.3
@


1.44
log
@more MLINKS
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.43 1999/12/28 15:57:59 millert Exp $
d61 3
a63 3
	curs_termattrs.3 curs_touch.3 curs_util.3 curs_window.3 curses.3 \
	define_key.3 dft_fgbg.3 keybound.3 keyok.3 resizeterm.3 wresize.3 \
	termcap.3 terminfo.3 terminfo.5 term.5 term.7
d82 2
a83 1
	curs_attr.3 mvchgat.3 curs_attr.3 mvwchgat.3 curs_beep.3 beep.3 \
d96 1
d134 3
a136 3
	curs_mouse.3 mouseinterval.3 curs_move.3 move.3 \
	curs_move.3 wmove.3 curs_outopts.3 clearok.3 curs_outopts.3 idlok.3 \
	curs_outopts.3 idcok.3 curs_outopts.3 \
d144 2
a145 1
	mvwprintw.3 curs_printw.3 vwprintw.3 curs_refresh.3 refresh.3 \
d155 3
a157 2
	curs_slk.3 slk_restore.3 curs_slk.3 \
	slk_touch.3 curs_slk.3 slk_attron.3 curs_slk.3 slk_attrset.3 \
@


1.43
log
@Update to ncurses-19991218
 o reorder tests during mouse initialization to allow for gpm to run in
   xterm, or for xterm to be used under OS/2 EMX.  Also drop test for
   $DISPLAY in favor of kmous=\E[M or $TERM containing "xterm" (report
   by Christian Weisgerber <naddy@@mips.rhein-neckar.de>).
 o modify raw() and noraw() to clear/restore IEXTEN flag which affects
   stty lnext on systems such as FreeBSD (report by Bruce Evans
   <bde@@zeta.org.au>, via Jason Evans <jasone@@canonware.com>).
 o add manual-page for ncurses extensions, documented curses_version(),
   use_extended_names().
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.42 1999/11/28 17:53:40 millert Exp $
d168 2
@


1.42
log
@update to ncurses-5.0-19991127
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.41 1999/11/17 05:37:53 millert Exp $
d56 8
a63 8
	curs_deleteln.3 curs_getch.3 curs_getstr.3 curs_getyx.3 curs_inch.3 \
	curs_inchstr.3 curs_initscr.3 curs_inopts.3 curs_insch.3 curs_insstr.3 \
	curs_instr.3 curs_kernel.3 curs_mouse.3 curs_move.3 curs_outopts.3 \
	curs_overlay.3 curs_pad.3 curs_print.3 curs_printw.3 curs_refresh.3 \
	curs_scanw.3 curs_scr_dump.3 curs_scroll.3 curs_slk.3 curs_termattrs.3 \
	curs_touch.3 curs_util.3 curs_window.3 curses.3 define_key.3 \
	dft_fgbg.3 keybound.3 keyok.3 resizeterm.3 wresize.3 termcap.3 \
	terminfo.3 terminfo.5 term.5 term.7
@


1.41
log
@add MLINKs I missed
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.40 1999/11/17 05:00:41 millert Exp $
d36 1
a36 1
	sigaction.c tries.c wresize.c
d176 1
a176 1
CLEANFILES+= init_keytry.h nomacros.h codes.c comp_captab.c expanded.c \
d178 1
@


1.40
log
@add more MLINKs
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.39 1999/11/17 04:15:21 millert Exp $
d78 4
a81 2
	wcolor_set.3 curs_attr.3 attr_get.3 curs_attr.3 wattr_get.3 \
	curs_attr.3 wattr_off.3 curs_attr.3 chgat.3 curs_attr.3 wchgat.3 \
@


1.39
log
@Add missing MLINKs
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.38 1999/05/11 16:21:05 millert Exp $
a53 1
# XXX - missing stuff here
d82 3
a84 1
	curs_bkgd.3 bkgd.3 curs_bkgd.3 wbkgd.3 curs_border.3 border.3 \
d98 2
a99 1
	mvwgetch.3 curs_getch.3 ungetch.3 curs_getstr.3 getstr.3 \
d129 4
a132 2
	mousemask.3 curs_move.3 move.3 curs_move.3 wmove.3 curs_outopts.3 \
	clearok.3 curs_outopts.3 idlok.3 curs_outopts.3 idcok.3 curs_outopts.3 \
d146 5
a150 4
	curs_scr_dump.3 scr_set.3 curs_scroll.3 scroll.3 curs_scroll.3 srcl.3 \
	curs_scroll.3 wscrl.3 curs_slk.3 slk_init.3 curs_slk.3 slk_set.3 \
	curs_slk.3 slk_refresh.3 curs_slk.3 slk_noutrefresh.3 curs_slk.3 \
	slk_label.3 curs_slk.3 slk_clear.3 curs_slk.3 slk_restore.3 curs_slk.3 \
d165 1
a165 1
	wsyncdown.3
@


1.38
log
@Install termcap.h too.  Some packages assume that if you are using
ncurses, termcap.h exists.  Others, like X11's resize, use termcap.h
to determine whether or not you are running ncurses.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.37 1999/03/02 06:23:26 millert Exp $
d78 22
a99 18
	curs_attr.3 wstandout.3 curs_beep.3 beep.3 curs_beep.3 flash.3 \
	curs_bkgd.3 bkgdset.3 curs_bkgd.3 wbkgdset.3 curs_bkgd.3 bkgd.3 \
	curs_bkgd.3 wbkgd.3 curs_border.3 border.3 curs_border.3 wborder.3 \
	curs_border.3 box.3 curs_border.3 hline.3 curs_border.3 whline.3 \
	curs_border.3 vline.3 curs_border.3 wvline.3 curs_clear.3 erase.3 \
	curs_clear.3 werase.3 curs_clear.3 clear.3 curs_clear.3 wclear.3 \
	curs_clear.3 clrtobot.3 curs_clear.3 wclrtobot.3 curs_clear.3 \
	clrtoeol.3 curs_clear.3 wclrtoeol.3 curs_color.3 start_color.3 \
	curs_color.3 init_pair.3 curs_color.3 init_color.3 curs_color.3 \
	has_colors.3 curs_color.3 can_change_color.3 curs_color.3 \
	color_content.3 curs_color.3 pair_content.3 curs_delch.3 delch.3 \
	curs_delch.3 wdelch.3 curs_delch.3 mvdelch.3 curs_delch.3 mvwdelch.3 \
	curs_deleteln.3 deleteln.3 curs_deleteln.3 wdeleteln.3 curs_deleteln.3 \
	insdelln.3 curs_deleteln.3 winsdelln.3 curs_deleteln.3 insertln.3 \
	curs_deleteln.3 winsertln.3 curs_getch.3 getch.3 curs_getch.3 wgetch.3 \
	curs_getch.3 mvgetch.3 curs_getch.3 mvwgetch.3 curs_getch.3 ungetch.3 \
	curs_getstr.3 getstr.3 curs_getstr.3 wgetstr.3 curs_getstr.3 \
	mvgetstr.3 curs_getstr.3 mvwgetstr.3 curs_getstr.3 wgetnstr.3 \
@


1.37
log
@ncurses-4.2-990301
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.36 1999/02/24 06:31:06 millert Exp $
d179 1
a179 1
	@@cd ${.CURDIR}; for i in unctrl.h term.h; do \
@


1.36
log
@ncurses-4.2-990220; this is a pre-release of 5.0
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.35 1999/01/18 19:30:36 millert Exp $
d38 7
a44 7
SRCS+=	access.c add_tries.c alloc_entry.c captoinfo.c comp_error.c \
	comp_expand.c comp_hash.c comp_parse.c comp_scan.c doalloc.c \
	getenv_num.c home_terminfo.c init_keytry.c lib_acs.c lib_baudrate.c \
	lib_cur_term.c lib_data.c lib_has_cap.c lib_kernel.c \
	lib_longname.c lib_napms.c lib_options.c lib_print.c lib_raw.c \
	lib_setup.c lib_termcap.c lib_termname.c lib_ti.c lib_tparm.c \
	lib_tputs.c lib_ttyflags.c name_match.c \
d49 1
a49 1
	lib_tracedmp.c lib_tracemse.c trace_buf.c trace_tries.c
@


1.35
log
@use the doc dir
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.34 1999/01/18 19:06:57 millert Exp $
d19 1
a19 1
SRCS+=	define_key.c keyok.c lib_adabind.c lib_addch.c lib_addstr.c \
d40 1
a40 1
	getenv_num.c home_terminfo.c lib_acs.c lib_baudrate.c \
d49 1
a49 1
	lib_tracedmp.c lib_tracemse.c trace_buf.c
d63 2
a64 2
	dft_fgbg.3 keyok.3 resizeterm.3 wresize.3 termcap.3 terminfo.3 \
	terminfo.5 term.5 term.7
d165 2
a166 2
CLEANFILES+= nomacros.h codes.c comp_captab.c expanded.c fallback.c lib_gen.c \
	lib_keyname.c names.c unctrl.c keys.tries make_hash make_keys
d172 2
a173 2
beforedepend: nomacros.h codes.c comp_captab.c expanded.c fallback.c lib_gen.c \
	lib_keyname.c names.c unctrl.c keys.tries make_hash make_keys
d193 1
a193 1
keys.tries: make_keys ${.CURDIR}/tinfo/keys.list
d230 1
a230 1
lib_options.o lib_options.so lib_options.po lib_options.ln: keys.tries
@


1.34
log
@ncurses-4.2-990116
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.33 1998/11/30 15:49:15 millert Exp $
d167 4
@


1.33
log
@typo
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.32 1998/11/30 01:02:16 millert Exp $
d12 3
d16 37
a52 29
SRCS=   access.c add_tries.c alloc_entry.c captoinfo.c codes.c comp_captab.c \
	comp_error.c comp_expand.c comp_hash.c comp_parse.c comp_scan.c \
	define_key.c doalloc.c expanded.c fallback.c getenv_num.c hardscroll.c \
	hashmap.c home_terminfo.c keyok.c lib_acs.c lib_adabind.c lib_addch.c \
	lib_addstr.c lib_baudrate.c lib_beep.c lib_bkgd.c lib_box.c \
	lib_chgat.c lib_clear.c lib_clearok.c lib_clrbot.c lib_clreol.c \
	lib_color.c lib_colorset.c lib_cur_term.c lib_data.c lib_delch.c \
        lib_delwin.c lib_dft_fgbg.c lib_doupdate.c lib_echo.c \
        lib_endwin.c lib_erase.c lib_flash.c lib_freeall.c lib_gen.c \
        lib_getch.c lib_getstr.c lib_hline.c lib_immedok.c lib_inchstr.c \
        lib_initscr.c lib_insch.c lib_insdel.c lib_insstr.c lib_instr.c \
        lib_isendwin.c lib_kernel.c lib_keyname.c lib_leaveok.c \
        lib_longname.c lib_mouse.c lib_move.c lib_mvcur.c lib_mvwin.c \
        lib_napms.c lib_newterm.c lib_newwin.c lib_nl.c lib_options.c \
        lib_overlay.c lib_pad.c lib_print.c lib_printw.c lib_raw.c \
        lib_redrawln.c lib_refresh.c lib_restart.c lib_scanw.c \
        lib_screen.c lib_scroll.c lib_scrollok.c lib_scrreg.c \
        lib_set_term.c lib_setup.c lib_slk.c lib_slkatr_set.c \
        lib_slkatrof.c lib_slkatron.c lib_slkatrset.c lib_slkattr.c \
        lib_slkclear.c lib_slkcolor.c lib_slkinit.c lib_slklab.c \
        lib_slkrefr.c lib_slkset.c lib_slktouch.c lib_termcap.c \
        lib_ti.c lib_touch.c lib_tparm.c lib_tputs.c lib_trace.c \
        lib_traceatr.c lib_tracebits.c lib_tracechr.c lib_tracedmp.c \
	lib_tracemse.c lib_tstp.c lib_twait.c lib_ungetch.c lib_vidattr.c \
	lib_vline.c lib_wattroff.c lib_wattron.c lib_winch.c lib_window.c \
	name_match.c names.c nc_panel.c parse_entry.c read_bsd_terminfo.c \
	read_entry.c read_termcap.c resizeterm.c safe_sprintf.c setbuf.c \
	sigaction.c softscroll.c trace_buf.c tries.c unctrl.c wresize.c \
	write_entry.c
d64 1
a64 1
	terminfo.5
d180 2
a181 2
fallback.c: ${.CURDIR}/term.h ${.CURDIR}/curses.priv.h ${.CURDIR}/MKfallback.sh
	sh ${.CURDIR}/MKfallback.sh $(FALLBACK_LIST) > ${.TARGET}
d183 2
a184 2
lib_gen.c: ${.CURDIR}/curses.h ${.CURDIR}/MKlib_gen.sh
	sh ${.CURDIR}/MKlib_gen.sh "${CPP} -I${.CURDIR}" "${AWK}" < ${.CURDIR}/curses.h > lib_gen.c
d186 1
a186 1
nomacros.h: ${.CURDIR}/MKlib_gen.sh lib_gen.c
d189 2
a190 2
keys.tries: make_keys ${.CURDIR}/keys.list
	./make_keys ${.CURDIR}/keys.list > ${.TARGET}
d192 2
a193 2
make_keys: ${.CURDIR}/make_keys.c names.c
	${HOSTCC} ${CFLAGS} ${LDFLAGS} -o ${.TARGET} ${.CURDIR}/make_keys.c ${LDADD}
d195 2
a196 2
make_hash: ${.CURDIR}/comp_hash.c ${.CURDIR}/hashsize.h
	${HOSTCC} ${CFLAGS} -DMAIN_PROGRAM ${LDFLAGS} -o ${.TARGET} ${.CURDIR}/comp_hash.c ${LDADD}
d198 2
a199 2
expanded.c: ${.CURDIR}/term.h ${.CURDIR}/curses.priv.h ${.CURDIR}/MKexpanded.sh
	sh ${.CURDIR}/MKexpanded.sh "${CPP}" ${CPPFLAGS}
d202 1
a202 1
	sh ${.CURDIR}/MKcaptab.awk ${AWK} ${.CURDIR}/Caps > ${.TARGET}
d204 2
a205 2
lib_keyname.c: ${.CURDIR}/ncurses_cfg.h ${.CURDIR}/curses.h ${.CURDIR}/term.h  ${.CURDIR}/keys.list ${.CURDIR}/MKkeyname.awk
	${AWK} -f ${.CURDIR}/MKkeyname.awk ${.CURDIR}/keys.list > ${.TARGET}
d207 2
a208 2
names.c codes.c: ${.CURDIR}/MKnames.awk
	${AWK} -f ${.CURDIR}/MKnames.awk ${.CURDIR}/Caps
d213 2
a214 2
unctrl.c: ${.CURDIR}/MKunctrl.awk
	echo | ${AWK} -f ${.CURDIR}/MKunctrl.awk > ${.TARGET}
@


1.32
log
@Link -ltermcap to -lcurses and -lotermcap to -locurses.  This fixes
problems with 3rd party programs that want to link with both -ltermcap
and -lcurses.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.31 1998/11/17 03:51:20 millert Exp $
d210 1
a210 1
	    ln -f $$i `echo $$i | sed 's/curses/termap/'`; \
@


1.31
log
@man updates from ncurses-4.2-981114
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.30 1998/11/17 03:16:20 millert Exp $
d205 1
a205 1
# Link libtermlib to libcurses so we don't break people's Makefiles
d210 1
@


1.30
log
@update to ncurses-4.2-981114
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.29 1998/10/31 06:30:28 millert Exp $
d50 1
a50 1
	curs_scanw.3 curs_scr_dmp.3 curs_scroll.3 curs_slk.3 curs_termattrs.3 \
d125 3
a127 3
	curs_scanw.3 mvwscanw.3 curs_scanw.3 vwscanw.3 curs_scr_dmp.3 \
	scr_dump.3 curs_scr_dmp.3 scr_restore.3 curs_scr_dmp.3 scr_init.3 \
	curs_scr_dmp.3 scr_set.3 curs_scroll.3 scroll.3 curs_scroll.3 srcl.3 \
@


1.29
log
@update to ncurses 4.2-981017
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.28 1998/09/13 19:16:14 millert Exp $
d13 4
a16 4
SRCS=   access.c alloc_entry.c captoinfo.c codes.c comp_captab.c comp_error.c \
        comp_expand.c comp_hash.c comp_parse.c comp_scan.c define_key.c \
        doalloc.c expanded.c fallback.c getenv_num.c hardscroll.c hashmap.c \
	home_terminfo.c keyok.c lib_acs.c lib_adabind.c lib_addch.c \
d35 7
a41 6
        lib_traceatr.c lib_tracechr.c lib_tracedmp.c lib_tracemse.c \
        lib_tstp.c lib_twait.c lib_ungetch.c lib_vidattr.c lib_vline.c \
        lib_wattroff.c lib_wattron.c lib_window.c name_match.c names.c \
	nc_panel.c parse_entry.c read_bsd_terminfo.c read_entry.c \
	read_termcap.c resizeterm.c safe_sprintf.c sigaction.c softscroll.c \
	trace_buf.c tries.c unctrl.c wresize.c write_entry.c
@


1.28
log
@ncurses-4.2-980905
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.27 1998/08/31 17:46:06 mickey Exp $
d15 5
a19 5
        doalloc.c expanded.c fallback.c hardscroll.c hashmap.c keyok.c \
	lib_acs.c lib_adabind.c lib_addch.c lib_addstr.c lib_baudrate.c \
        lib_beep.c lib_bkgd.c lib_box.c lib_chgat.c lib_clear.c \
        lib_clearok.c lib_clrbot.c lib_clreol.c lib_color.c \
        lib_colorset.c lib_cur_term.c lib_data.c lib_delch.c \
@


1.27
log
@use HOSTCC to compile helper programs
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.26 1998/08/29 21:12:07 deraadt Exp $
d15 2
a16 2
        expanded.c fallback.c hardscroll.c hashmap.c keyok.c lib_acs.c \
        lib_adabind.c lib_addch.c lib_addstr.c lib_baudrate.c \
@


1.26
log
@man page repairs; aaron@@ug.cs.dal.ca
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.25 1998/08/14 23:02:33 millert Exp $
d181 1
a181 1
	${CC} ${CFLAGS} ${LDFLAGS} -o ${.TARGET} ${.CURDIR}/make_keys.c ${LDADD}
d184 1
a184 1
	${CC} ${CFLAGS} -DMAIN_PROGRAM ${LDFLAGS} -o ${.TARGET} ${.CURDIR}/comp_hash.c ${LDADD}
@


1.25
log
@don't define HAVE_* since it conflicts with other configure scripts
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.24 1998/07/27 03:37:26 millert Exp $
d51 2
a52 1
	dft_fgbg.3 keyok.3 wresize.3 termcap.3 terminfo.3 terminfo.5
d131 14
a144 13
	curs_slk.3 slk_attroff.3 curs_termattrs.3 baudrate.3 curs_termattrs.3 \
	erasechar.3 curs_termattrs.3 has_ic.3 curs_termattrs.3 has_il.3 \
	curs_termattrs.3 killchar.3 curs_termattrs.3 longname.3 \
	curs_termattrs.3 termattrs.3 curs_termattrs.3 termname.3 curs_touch.3 \
	touchwin.3 curs_touch.3 touchline.3 curs_touch.3 untouchwin.3 \
	curs_touch.3 wtouchln.3 curs_touch.3 is_linetouched.3 curs_touch.3 \
	is_wintouched.3 curs_util.3 unctrl.3 curs_util.3 keyname.3 curs_util.3 \
	filter.3 curs_util.3 use_env.3 curs_util.3 putwin.3 curs_util.3 \
	getwin.3 curs_util.3 delay_output.3 curs_util.3 flushinp.3 \
	curs_window.3 newwin.3 curs_window.3 delwin.3 curs_window.3 mvwin.3 \
	curs_window.3 subwin.3 curs_window.3 derwin.3 curs_window.3 mvderwin.3 \
	curs_window.3 dupwin.3 curs_window.3 wsyncup.3 curs_window.3 syncok.3 \
	curs_window.3 wcursyncup.3 curs_window.3 wsyncdown.3
@


1.24
log
@update to ncurses-4.2-980725
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.23 1998/07/23 21:23:40 millert Exp $
d41 1
a41 1
CFLAGS+= -I. -I${.CURDIR} -DTERMIOS ${CURSESTRACE}
@


1.23
log
@fix comment
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.22 1998/07/23 21:17:23 millert Exp $
d13 1
a13 1
SRCS=   alloc_entry.c captoinfo.c codes.c comp_captab.c comp_error.c \
@


1.22
log
@ncurses-4.2-980718
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.21 1998/01/17 16:27:30 millert Exp $
d202 1
a202 1
# Link libtermlib to libcurses (eww)
@


1.21
log
@Use _ti_get_screensize() from libtermlib to update screen size if changed
    after a program is suspended.
Define EXTERN_TERMINFO in curses.h.
Update to ncurses-4.1-980103 and crank minor.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.20 1997/12/17 19:35:31 millert Exp $
d6 6
d13 28
a40 22
SRCS=	define_key.c hardscroll.c hashmap.c keyok.c lib_acs.c lib_addch.c \
	lib_addstr.c lib_baudrate.c lib_beep.c lib_bkgd.c lib_box.c \
	lib_clear.c lib_clrbot.c lib_clreol.c lib_color.c lib_data.c \
	lib_delch.c lib_delwin.c lib_dft_fgbg.c lib_doupdate.c lib_endwin.c \
	lib_erase.c lib_flash.c lib_getch.c lib_getstr.c lib_hline.c \
	lib_inchstr.c lib_initscr.c lib_insch.c lib_insdel.c lib_insstr.c \
	lib_instr.c lib_isendwin.c lib_kernel.c lib_longname.c lib_mouse.c \
	lib_move.c lib_mvcur.c lib_mvwin.c lib_newterm.c lib_newwin.c \
	lib_options.c lib_overlay.c lib_pad.c lib_print.c lib_printw.c \
	lib_raw.c lib_redrawln.c lib_refresh.c lib_scanw.c lib_screen.c \
	lib_scroll.c lib_scrreg.c lib_set_term.c lib_slk.c lib_slkatrof.c \
	lib_slkatron.c lib_slkatrset.c lib_slkattr.c lib_slkclear.c \
	lib_slkinit.c lib_slklab.c lib_slkrefr.c lib_slkset.c lib_slktouch.c \
	lib_touch.c lib_tstp.c lib_twait.c lib_ungetch.c lib_vidattr.c \
	lib_vline.c lib_wattroff.c lib_wattron.c lib_window.c nc_panel.c \
	resizeterm.c safe_sprintf.c screensize.c softscroll.c tries.c unctrl.c \
	wresize.c
SRCS+=	expanded.c lib_gen.c lib_keyname.c
.if defined(${CURSESTRACE})
SRCS+=	lib_trace.c lib_traceatr.c lib_tracechr.c lib_tracedmp.c \
	lib_tracemse.c trace_buf.c
.endif
d42 1
a42 1
LDADD+=  -ltermlib
d51 1
a51 1
	dft_fgbg.3 keyok.3 wresize.3
d143 10
a152 1
CLEANFILES+= lib_gen.c lib_keyname.c keys.tries expanded.c
d154 2
a155 1
beforedepend: keys.tries
d158 4
a161 1
	@@cd ${.CURDIR}; for i in unctrl.h; do \
a164 3
	@@cd ${.CURDIR}; cmp -s curses.h ${DESTDIR}/usr/include/curses.h || \
	  ${INSTALL} ${INSTALL_COPY} -m 444 -o $(BINOWN) -g $(BINGRP) curses.h \
	  ${DESTDIR}/usr/include
d166 8
a173 2
keys.tries: ${.CURDIR}/keys.list ${.CURDIR}/MKkeys.awk
	awk -f ${.CURDIR}/MKkeys.awk ${.CURDIR}/keys.list > keys.tries
d175 2
a176 2
lib_keyname.c: ${.CURDIR}/keys.list ${.CURDIR}/MKkeyname.awk
	awk -f ${.CURDIR}/MKkeyname.awk ${.CURDIR}/keys.list > lib_keyname.c
d178 5
a182 2
lib_gen.c: ${.CURDIR}/curses.h ${.CURDIR}/MKlib_gen.sh
	sh ${.CURDIR}/MKlib_gen.sh "${CPP}" "awk" < ${.CURDIR}/curses.h > lib_gen.c
d184 1
a184 1
expanded.c: ${.CURDIR}/curses.h ${.CURDIR}/MKexpanded.sh
d186 22
@


1.20
log
@Add in lots of MLINKS
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.19 1997/12/14 23:15:36 millert Exp $
d22 1
a22 1
	resizeterm.c safe_sprintf.c softscroll.c tries.c unctrl.c \
d29 1
a29 1
CFLAGS+= -I. -I${.CURDIR} -DTERMIOS -DEXTERN_TERMINFO ${CURSESTRACE}
@


1.19
log
@ncurses-4.1-971213
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.18 1997/12/03 05:20:48 millert Exp $
a30 1
# XXX - add more MLINKS
d41 90
@


1.18
log
@Merge of ncurses-4.1-971129
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.17 1997/11/28 23:05:05 millert Exp $
d31 1
a31 1
# XXX - add new man pages
d39 2
a40 1
	curs_touch.3 curs_util.3 curs_window.3 curses.3 wresize.3
@


1.17
log
@Fix syntax wrt tracing stuff and change TRACE -> CURSESTRACE
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.16 1997/11/28 23:02:29 millert Exp $
d7 17
a23 12
SRCS=	hardscroll.c hashmap.c lib_acs.c lib_addch.c lib_addstr.c \
	lib_baudrate.c lib_beep.c lib_bkgd.c lib_box.c lib_clear.c \
	lib_clrbot.c lib_clreol.c lib_color.c lib_data.c lib_delch.c \
	lib_delwin.c lib_dft_fgbg.c lib_doupdate.c lib_endwin.c lib_erase.c \
	lib_getch.c lib_getstr.c lib_inchstr.c lib_initscr.c lib_insch.c \
	lib_insdel.c lib_insstr.c lib_instr.c lib_isendwin.c lib_kernel.c \
	lib_longname.c lib_mouse.c lib_move.c lib_mvcur.c lib_mvwin.c \
	lib_newterm.c lib_newwin.c lib_options.c lib_overlay.c lib_pad.c \
	lib_print.c lib_printw.c lib_raw.c lib_refresh.c lib_scanw.c \
	lib_screen.c lib_scroll.c lib_scrreg.c lib_set_term.c lib_slk.c \
	lib_touch.c lib_tstp.c lib_twait.c lib_vidattr.c lib_window.c \
	resizeterm.c unctrl.c wresize.c
d26 2
a27 1
SRCS+=	lib_trace.c lib_traceatr.c lib_tracechr.c lib_tracedmp.c lib_tracemse.c
d31 1
@


1.16
log
@Add tracing/debugging code from ncurses 4.1 but don't compile by default.
malloc buffer in hardscroll.c so we don't have oflow worries.
Allow hardscroll.c to compile if SCROLLDEBUG is defined but TRACE is not.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.15 1997/11/26 04:01:04 millert Exp $
d4 1
a4 1
#TRACE=-DTRACE
d20 1
a20 1
.ifdef ${TRACE}
d23 1
a23 1
CFLAGS+= -I. -I${.CURDIR} -DTERMIOS -DEXTERN_TERMINFO ${TRACE}
@


1.15
log
@ncurses 4.1 + changes to work with our terminfo libs (instead of
the ncurses ones).  Changes are #ifdef EXTERN_TERMINFO.
Post 4.1 patches will be applied in a separate commit.
@
text
@d1 4
a4 1
#	$OpenBSD: Makefile,v 1.14 1997/04/27 20:56:09 millert Exp $
d20 4
a23 1
CFLAGS+= -I. -I${.CURDIR} -DTERMIOS -DEXTERN_TERMINFO
@


1.14
log
@COPY -> INSTALL_COPY and STRIP -> INSTALL_STRIP
This fixes namespace problems where STRIP is sometimes used as
the name of the strip(1) to use and other times used as
the flag to send install(1) when stripping (or not).
COPY doesn't have this problem (yet) but was poorly named.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.13 1997/02/27 21:45:53 tholo Exp $
d4 13
a16 11
SRCS=	hardscroll.c lib_acs.c lib_delch.c lib_insstr.c lib_options.c \
	lib_set_term.c lib_addch.c lib_delwin.c lib_instr.c lib_overlay.c \
	lib_slk.c lib_addstr.c lib_doupdate.c lib_isendwin.c lib_pad.c \
	lib_touch.c lib_beep.c lib_endwin.c lib_kernel.c lib_printw.c \
	lib_tstp.c lib_bkgd.c lib_erase.c lib_longname.c lib_raw.c \
	lib_twait.c lib_box.c lib_getch.c lib_mouse.c lib_refresh.c \
	lib_unctrl.c lib_clear.c lib_getstr.c lib_move.c lib_resize.c \
	lib_vidattr.c lib_clrbot.c lib_inchstr.c lib_mvcur.c lib_scanw.c \
	lib_window.c lib_clreol.c lib_initscr.c lib_mvwin.c lib_screen.c \
	lib_color.c lib_insch.c lib_newterm.c lib_scroll.c lib_data.c \
	lib_insdel.c lib_keyname.c lib_newwin.c lib_scrreg.c lib_gen.c
d24 1
a24 1
	curs_overlay.3 curs_pad.3 curs_printw.3 curs_refresh.3 curs_resize.3 \
d26 1
a26 1
	curs_touch.3 curs_util.3 curs_window.3 curses.3
d28 1
a28 1
CLEANFILES+= lib_gen.c lib_keyname.c keys.tries
d49 3
@


1.13
log
@Undo last change.  nawk == awk in our tree, and no different behaviour is
seen by invoking it as nawk.  The problem this change claimed to correct
must have had another source.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.12 1997/02/27 08:02:07 angelos Exp $
d33 1
a33 1
	  ${INSTALL} ${COPY} -m 444 -o $(BINOWN) -g $(BINGRP) $$i \
d36 1
a36 1
	  ${INSTALL} ${COPY} -m 444 -o $(BINOWN) -g $(BINGRP) curses.h \
@


1.12
log
@awk fails to create a couple of files during the build. nawk does the
deed.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.11 1997/02/09 18:51:50 deraadt Exp $
d40 1
a40 1
	nawk -f ${.CURDIR}/MKkeys.awk ${.CURDIR}/keys.list > keys.tries
d43 1
a43 1
	nawk -f ${.CURDIR}/MKkeyname.awk ${.CURDIR}/keys.list > lib_keyname.c
@


1.11
log
@do not make changes here that hide a problem which needs fixing
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.9 1996/12/16 08:43:22 tholo Exp $
d40 1
a40 1
	awk -f ${.CURDIR}/MKkeys.awk ${.CURDIR}/keys.list > keys.tries
d43 1
a43 1
	awk -f ${.CURDIR}/MKkeyname.awk ${.CURDIR}/keys.list > lib_keyname.c
@


1.10
log
@don't use LDADD+=-ltermlib on the mips - because it causes problems
with the linker (weak symbols)
@
text
@a15 1
.if ${MACHINE_ARCH} != "mips"
a16 1
.endif
@


1.9
log
@Generate library versions of macro implementations as well
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 1996/12/08 15:22:26 downsj Exp $
d16 1
d18 1
@


1.8
log
@install -> ${INSTALL}, -c -> ${COPY}
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 1996/06/19 02:48:03 niklas Exp $
d14 1
a14 1
	lib_insdel.c lib_keyname.c lib_newwin.c lib_scrreg.c
d26 1
a26 1
CLEANFILES+= lib_keyname.c keys.tries
d44 3
@


1.7
log
@OpenBSD RCSID
@
text
@d1 1
a1 1
#	$OpenBSD$
d33 1
a33 1
	  install -c -m 444 -o $(BINOWN) -g $(BINGRP) $$i \
d36 1
a36 1
	  install -c -m 444 -o $(BINOWN) -g $(BINGRP) curses.h \
@


1.6
log
@The man page for wresize() was accidentally omitted
@
text
@d1 2
@


1.5
log
@Install ncurses as -lcurses and <curses.h>
Install BSD curses library as -locurses and <ocurses.h>
@
text
@d20 3
a22 3
	curs_overlay.3 curs_pad.3 curs_printw.3 curs_refresh.3 curs_scanw.3 \
	curs_scr_dmp.3 curs_scroll.3 curs_slk.3 curs_termattrs.3 curs_touch.3 \
	curs_util.3 curs_window.3 curses.3
@


1.4
log
@hard-code the include installation path (mostly for speed)
@
text
@d1 24
a24 1
#	@@(#)Makefile	8.2 (Berkeley) 1/2/94
d26 1
a26 10
CFLAGS+=#-DTFILE=\"/dev/ttyp0\"
CFLAGS+=-D_CURSES_PRIVATE -I${.CURDIR}
LIB=	curses
SRCS=	addbytes.c addch.c addnstr.c box.c clear.c clrtobot.c clrtoeol.c \
	cr_put.c ctrace.c cur_hash.c curses.c delch.c deleteln.c delwin.c \
	erase.c fullname.c getch.c getstr.c id_subwins.c idlok.c initscr.c \
	insch.c insertln.c longname.c move.c mvwin.c newwin.c overlay.c \
	overwrite.c printw.c putchar.c refresh.c scanw.c scroll.c setterm.c \
	standout.c toucholap.c touchwin.c tscroll.c tstp.c tty.c unctrl.c
MAN=	curses.3
d29 13
a41 8
	-cd ${.CURDIR}; cmp -s curses.h ${DESTDIR}/usr/include/curses.h > \
	    /dev/null 2>&1 || \
	    install -c -o ${BINOWN} -g ${BINGRP} -m 444 curses.h \
	    ${DESTDIR}/usr/include

.if make(install)
SUBDIR+= PSD.doc
.endif
d44 2
@


1.3
log
@commented out includes install renamed
@
text
@d14 5
a18 6
# done by src/include/Makefile now
#includes:
#	-cd ${.CURDIR}; cmp -s curses.h ${DESTDIR}/usr/include/curses.h > \
#	    /dev/null 2>&1 || \
#	    install -c -o ${BINOWN} -g ${BINGRP} -m 444 curses.h \
#	    ${DESTDIR}/usr/include
@


1.2
log
@install curses.h from src/include
@
text
@d15 1
a15 1
#beforeinstall:
@


1.1
log
@Initial revision
@
text
@d14 6
a19 5
beforeinstall:
	-cd ${.CURDIR}; cmp -s curses.h ${DESTDIR}/usr/include/curses.h > \
	    /dev/null 2>&1 || \
	    install -c -o ${BINOWN} -g ${BINGRP} -m 444 curses.h \
	    ${DESTDIR}/usr/include
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
