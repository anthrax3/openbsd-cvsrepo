head	1.11;
access;
symbols
	OPENBSD_6_0:1.10.0.16
	OPENBSD_6_0_BASE:1.10
	OPENBSD_5_9:1.10.0.12
	OPENBSD_5_9_BASE:1.10
	OPENBSD_5_8:1.10.0.14
	OPENBSD_5_8_BASE:1.10
	OPENBSD_5_7:1.10.0.6
	OPENBSD_5_7_BASE:1.10
	OPENBSD_5_6:1.10.0.10
	OPENBSD_5_6_BASE:1.10
	OPENBSD_5_5:1.10.0.8
	OPENBSD_5_5_BASE:1.10
	OPENBSD_5_4:1.10.0.4
	OPENBSD_5_4_BASE:1.10
	OPENBSD_5_3:1.10.0.2
	OPENBSD_5_3_BASE:1.10
	OPENBSD_5_2:1.9.0.28
	OPENBSD_5_2_BASE:1.9
	OPENBSD_5_1_BASE:1.9
	OPENBSD_5_1:1.9.0.26
	OPENBSD_5_0:1.9.0.24
	OPENBSD_5_0_BASE:1.9
	OPENBSD_4_9:1.9.0.22
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.9.0.20
	OPENBSD_4_8_BASE:1.9
	OPENBSD_4_7:1.9.0.16
	OPENBSD_4_7_BASE:1.9
	OPENBSD_4_6:1.9.0.18
	OPENBSD_4_6_BASE:1.9
	OPENBSD_4_5:1.9.0.14
	OPENBSD_4_5_BASE:1.9
	OPENBSD_4_4:1.9.0.12
	OPENBSD_4_4_BASE:1.9
	OPENBSD_4_3:1.9.0.10
	OPENBSD_4_3_BASE:1.9
	OPENBSD_4_2:1.9.0.8
	OPENBSD_4_2_BASE:1.9
	OPENBSD_4_1:1.9.0.6
	OPENBSD_4_1_BASE:1.9
	OPENBSD_4_0:1.9.0.4
	OPENBSD_4_0_BASE:1.9
	OPENBSD_3_9:1.9.0.2
	OPENBSD_3_9_BASE:1.9
	OPENBSD_3_8:1.7.0.10
	OPENBSD_3_8_BASE:1.7
	OPENBSD_3_7:1.7.0.8
	OPENBSD_3_7_BASE:1.7
	OPENBSD_3_6:1.7.0.6
	OPENBSD_3_6_BASE:1.7
	OPENBSD_3_5:1.7.0.4
	OPENBSD_3_5_BASE:1.7
	OPENBSD_3_4:1.7.0.2
	OPENBSD_3_4_BASE:1.7
	OPENBSD_3_3:1.5.0.26
	OPENBSD_3_3_BASE:1.5
	OPENBSD_3_2:1.5.0.24
	OPENBSD_3_2_BASE:1.5
	OPENBSD_3_1:1.5.0.22
	OPENBSD_3_1_BASE:1.5
	OPENBSD_3_0:1.5.0.20
	OPENBSD_3_0_BASE:1.5
	OPENBSD_2_9:1.5.0.18
	OPENBSD_2_9_BASE:1.5
	OPENBSD_2_8:1.5.0.16
	OPENBSD_2_8_BASE:1.5
	OPENBSD_2_7:1.5.0.14
	OPENBSD_2_7_BASE:1.5
	OPENBSD_2_6:1.5.0.12
	OPENBSD_2_6_BASE:1.5
	OPENBSD_2_5:1.5.0.10
	OPENBSD_2_5_BASE:1.5
	OPENBSD_2_4:1.5.0.8
	OPENBSD_2_4_BASE:1.5
	OPENBSD_2_3:1.5.0.6
	OPENBSD_2_3_BASE:1.5
	OPENBSD_2_2:1.5.0.4
	OPENBSD_2_2_BASE:1.5
	OPENBSD_2_1:1.5.0.2
	OPENBSD_2_1_BASE:1.5
	OPENBSD_2_0:1.3.0.2
	OPENBSD_2_0_BASE:1.3
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.11
date	2016.10.16.19.28.44;	author tb;	state Exp;
branches;
next	1.10;
commitid	uHRFWpwUBjIz0UuR;

1.10
date	2012.08.02.13.38.39;	author okan;	state Exp;
branches;
next	1.9;

1.9
date	2005.11.24.20.49.20;	author deraadt;	state Exp;
branches;
next	1.8;

1.8
date	2005.10.12.18.54.55;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	2003.06.23.18.50.53;	author mickey;	state Exp;
branches;
next	1.6;

1.6
date	2003.06.19.20.30.54;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	97.04.27.20.56.14;	author millert;	state Exp;
branches;
next	1.4;

1.4
date	96.12.08.15.22.31;	author downsj;	state Exp;
branches;
next	1.3;

1.3
date	96.05.06.21.44.28;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	96.05.04.09.16.14;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.43.10;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.43.10;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.11
log
@Move libcrypto, librpcsvc and gnu/usr.bin/cc/include from RDIRS to PRDIRS,
and add prereq targets, so some header files are generated by BUILDUSER
during 'make prereq' instead of by root during 'make includes'.

Switch the order of 'make cleandir' and 'make includes' during 'make build'
so we don't generate many files twice.

Except for some machine@@ symlinks from ${MACHINE}/stand, /usr/obj is now
clean from files generated by root during 'make build'. Those will be
cleaned up in a second step.

help, testing & ok deraadt, input from natano, further testing rpe
@
text
@#	$OpenBSD: Makefile,v 1.10 2012/08/02 13:38:39 okan Exp $


RPCSRCS=	bootparam_prot.x klm_prot.x mount.x nfs_prot.x \
		nlm_prot.x rex.x rnusers.x rusers.x rquota.x rstat.x rwall.x \
		sm_inter.x spray.x yp.x yppasswd.x
SRCS=		${RPCSRCS:R:S/$/.c/g}
HDRS=           ${RPCSRCS:R:S/$/.h/g}
CLEANFILES+=	${SRCS} ${HDRS}

LIB=		rpcsvc
NOMAN=

all:		${HDRS}
beforedepend:	${HDRS}
prereq:		${HDRS}

includes:	${HDRS}
	${INSTALL} -d -o ${BINOWN} -g ${BINGRP} -m 755 \
		${DESTDIR}/usr/include/rpcsvc
	@@echo installing rpc .h and .x files
	@@(cd ${.CURDIR}; for i in $(RPCSRCS); do \
	    cmp -s $(.CURDIR)/$$i ${DESTDIR}/usr/include/rpcsvc/$$i || \
		{ j="${INSTALL} ${INSTALL_COPY} -o ${BINOWN} -g ${BINGRP} -m 444 $$i \
		${DESTDIR}/usr/include/rpcsvc"; \
		echo $$j; $$j; } \
	done)
	@@sleep 1; for i in $(HDRS); do \
	    cmp -s $$i ${DESTDIR}/usr/include/rpcsvc/$$i || \
		{ j="${INSTALL} ${INSTALL_COPY} -o ${BINOWN} -g ${BINGRP} -m 444 $$i \
		${DESTDIR}/usr/include/rpcsvc"; \
		echo $$j; $$j; } \
	done

# new suffixes have to go afterwards, because bsd.lib.mk clears them
.include <bsd.lib.mk>
.SUFFIXES: .x .c .h

.x.c:
	rpcgen -C -c ${.IMPSRC} -o ${.TARGET}

.x.h:
	rpcgen -C -h ${.IMPSRC} -o ${.TARGET}
@


1.10
log
@remove leftover NOLINT, WANTLINT, LINTFLAGS, LOBJ vars and lint targets.

ok guenther@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.9 2005/11/24 20:49:20 deraadt Exp $
d16 1
@


1.9
log
@use WANTLINT= (on all architectures)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 2005/10/12 18:54:55 deraadt Exp $
a11 1
WANTLINT=
@


1.8
log
@three new .so libraries to help the ports people who need (or might need)
them for perl modules; discussion with pvalchev
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 2003/06/23 18:50:53 mickey Exp $
d12 1
@


1.7
log
@make sure .x and .h do not get installed on the split of the seconds and make will not freak out; found by espie@@ and deraadt@@ ok
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.6 2003/06/19 20:30:54 deraadt Exp $
a12 1
NOPIC=
@


1.6
log
@generate ANSI code
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.5 1997/04/27 20:56:14 millert Exp $
d4 2
a5 2
RPCSRCS=	bootparam_prot.x klm_prot.x mount.x nfs_prot.x\
		nlm_prot.x rex.x rnusers.x rusers.x rquota.x rstat.x rwall.x\
d22 2
a23 2
	@@for i in $(HDRS); do \
	    cmp -s $$i ${DESTDIR}/usr/include/rpcsvc/$$i || \
d27 3
a29 3
	done
	@@cd ${.CURDIR}; for i in $(RPCSRCS); do \
	    cmp -s $(.CURDIR)/$$i ${DESTDIR}/usr/include/rpcsvc/$$i || \
@


1.5
log
@COPY -> INSTALL_COPY and STRIP -> INSTALL_STRIP
This fixes namespace problems where STRIP is sometimes used as
the name of the strip(1) to use and other times used as
the flag to send install(1) when stripping (or not).
COPY doesn't have this problem (yet) but was poorly named.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 1996/12/08 15:22:31 downsj Exp $
d40 1
a40 1
	rpcgen -c ${.IMPSRC} -o ${.TARGET}
d43 1
a43 1
	rpcgen -h ${.IMPSRC} -o ${.TARGET}
@


1.4
log
@install -> ${INSTALL}, -c -> ${COPY}
@
text
@d1 1
a1 1
#	$OpenBSD$
d24 1
a24 1
		{ j="${INSTALL} ${COPY} -o ${BINOWN} -g ${BINGRP} -m 444 $$i \
d30 1
a30 1
		{ j="${INSTALL} ${COPY} -o ${BINOWN} -g ${BINGRP} -m 444 $$i \
@


1.3
log
@hard-code the include installation path (mostly for speed)
@
text
@d19 1
a19 1
	install -d -o ${BINOWN} -g ${BINGRP} -m 755 \
d24 1
a24 1
		{ j="install -c -o ${BINOWN} -g ${BINGRP} -m 444 $$i \
d30 1
a30 1
		{ j="install -c -o ${BINOWN} -g ${BINGRP} -m 444 $$i \
@


1.2
log
@beforeinstall -> includes
@
text
@d1 1
a1 1
#	$Id: Makefile,v 1.1.1.1 1995/10/18 08:43:10 deraadt Exp $
d18 1
a18 1
includes:
d21 1
d24 3
a26 2
		install -c -o ${BINOWN} -g ${BINGRP} -m 444 $$i \
		${DESTDIR}/usr/include/rpcsvc; \
d28 1
a28 1
	@@for i in $(RPCSRCS); do \
d30 3
a32 2
		install -c -o ${BINOWN} -g ${BINGRP} -m 444 $(.CURDIR)/$$i \
		${DESTDIR}/usr/include/rpcsvc; \
d40 1
a40 2
	@@echo generating $@@...
	@@rpcgen -c ${.IMPSRC} -o ${.TARGET}
d43 1
a43 2
	@@echo generating $@@...
	@@rpcgen -h ${.IMPSRC} -o ${.TARGET}
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
#	$Id: Makefile,v 1.12 1995/01/12 19:39:43 jtc Exp $
d18 1
a18 1
beforeinstall:
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
