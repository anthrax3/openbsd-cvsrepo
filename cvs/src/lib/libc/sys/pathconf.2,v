head	1.23;
access;
symbols
	OPENBSD_6_1_BASE:1.23
	OPENBSD_6_0:1.23.0.6
	OPENBSD_6_0_BASE:1.23
	OPENBSD_5_9:1.23.0.2
	OPENBSD_5_9_BASE:1.23
	OPENBSD_5_8:1.23.0.4
	OPENBSD_5_8_BASE:1.23
	OPENBSD_5_7:1.22.0.2
	OPENBSD_5_7_BASE:1.22
	OPENBSD_5_6:1.21.0.6
	OPENBSD_5_6_BASE:1.21
	OPENBSD_5_5:1.21.0.4
	OPENBSD_5_5_BASE:1.21
	OPENBSD_5_4:1.20.0.2
	OPENBSD_5_4_BASE:1.20
	OPENBSD_5_3:1.17.0.4
	OPENBSD_5_3_BASE:1.17
	OPENBSD_5_2:1.17.0.2
	OPENBSD_5_2_BASE:1.17
	OPENBSD_5_1_BASE:1.16
	OPENBSD_5_1:1.16.0.20
	OPENBSD_5_0:1.16.0.18
	OPENBSD_5_0_BASE:1.16
	OPENBSD_4_9:1.16.0.16
	OPENBSD_4_9_BASE:1.16
	OPENBSD_4_8:1.16.0.14
	OPENBSD_4_8_BASE:1.16
	OPENBSD_4_7:1.16.0.10
	OPENBSD_4_7_BASE:1.16
	OPENBSD_4_6:1.16.0.12
	OPENBSD_4_6_BASE:1.16
	OPENBSD_4_5:1.16.0.8
	OPENBSD_4_5_BASE:1.16
	OPENBSD_4_4:1.16.0.6
	OPENBSD_4_4_BASE:1.16
	OPENBSD_4_3:1.16.0.4
	OPENBSD_4_3_BASE:1.16
	OPENBSD_4_2:1.16.0.2
	OPENBSD_4_2_BASE:1.16
	OPENBSD_4_1:1.15.0.10
	OPENBSD_4_1_BASE:1.15
	OPENBSD_4_0:1.15.0.8
	OPENBSD_4_0_BASE:1.15
	OPENBSD_3_9:1.15.0.6
	OPENBSD_3_9_BASE:1.15
	OPENBSD_3_8:1.15.0.4
	OPENBSD_3_8_BASE:1.15
	OPENBSD_3_7:1.15.0.2
	OPENBSD_3_7_BASE:1.15
	OPENBSD_3_6:1.14.0.2
	OPENBSD_3_6_BASE:1.14
	OPENBSD_3_5:1.12.0.4
	OPENBSD_3_5_BASE:1.12
	OPENBSD_3_4:1.12.0.2
	OPENBSD_3_4_BASE:1.12
	OPENBSD_3_3:1.10.0.2
	OPENBSD_3_3_BASE:1.10
	OPENBSD_3_2:1.9.0.2
	OPENBSD_3_2_BASE:1.9
	OPENBSD_3_1:1.8.0.2
	OPENBSD_3_1_BASE:1.8
	OPENBSD_3_0:1.7.0.10
	OPENBSD_3_0_BASE:1.7
	OPENBSD_2_9:1.7.0.8
	OPENBSD_2_9_BASE:1.7
	OPENBSD_2_8:1.7.0.6
	OPENBSD_2_8_BASE:1.7
	OPENBSD_2_7:1.7.0.4
	OPENBSD_2_7_BASE:1.7
	OPENBSD_2_6:1.7.0.2
	OPENBSD_2_6_BASE:1.7
	OPENBSD_2_5:1.5.0.2
	OPENBSD_2_5_BASE:1.5
	OPENBSD_2_4:1.3.0.2
	OPENBSD_2_4_BASE:1.3
	OPENBSD_2_3:1.1.1.1.0.8
	OPENBSD_2_3_BASE:1.1.1.1
	OPENBSD_2_2:1.1.1.1.0.6
	OPENBSD_2_2_BASE:1.1.1.1
	OPENBSD_2_1:1.1.1.1.0.4
	OPENBSD_2_1_BASE:1.1.1.1
	OPENBSD_2_0:1.1.1.1.0.2
	OPENBSD_2_0_BASE:1.1.1.1
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@.\" @;


1.23
date	2015.05.31.23.54.25;	author schwarze;	state Exp;
branches;
next	1.22;
commitid	zjg8ueH5pm88cPnS;

1.22
date	2015.01.19.15.54.11;	author millert;	state Exp;
branches;
next	1.21;
commitid	nJ2wjGsUe8RwMTRS;

1.21
date	2014.01.21.03.15.45;	author schwarze;	state Exp;
branches;
next	1.20;

1.20
date	2013.03.28.20.37.56;	author jmc;	state Exp;
branches;
next	1.19;

1.19
date	2013.03.28.20.01.18;	author guenther;	state Exp;
branches;
next	1.18;

1.18
date	2013.03.28.03.29.45;	author guenther;	state Exp;
branches;
next	1.17;

1.17
date	2012.07.17.06.30.31;	author matthew;	state Exp;
branches;
next	1.16;

1.16
date	2007.05.31.19.19.33;	author jmc;	state Exp;
branches;
next	1.15;

1.15
date	2005.01.09.00.34.39;	author jmc;	state Exp;
branches;
next	1.14;

1.14
date	2004.06.03.17.09.12;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2004.04.15.19.52.18;	author jmc;	state Exp;
branches;
next	1.12;

1.12
date	2003.09.05.21.36.47;	author jmc;	state Exp;
branches;
next	1.11;

1.11
date	2003.06.02.20.18.39;	author millert;	state Exp;
branches;
next	1.10;

1.10
date	2003.02.27.07.55.34;	author jmc;	state Exp;
branches;
next	1.9;

1.9
date	2002.04.30.16.31.42;	author mpech;	state Exp;
branches;
next	1.8;

1.8
date	2002.01.02.16.31.30;	author aaron;	state Exp;
branches;
next	1.7;

1.7
date	99.06.29.14.10.11;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	99.05.23.14.10.55;	author aaron;	state Exp;
branches;
next	1.5;

1.5
date	99.04.02.16.21.35;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	99.02.27.21.56.37;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	98.07.06.18.28.08;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	98.06.15.17.55.30;	author mickey;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.42.28;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.42.28;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.23
log
@Simple macro fixes (Fd -> In, Nm -> Fn) from Kaspars at Bankovskis dot net.
No content change.
@
text
@.\"	$OpenBSD: pathconf.2,v 1.22 2015/01/19 15:54:11 millert Exp $
.\"	$NetBSD: pathconf.2,v 1.2 1995/02/27 12:35:22 cgd Exp $
.\"
.\" Copyright (c) 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"	@@(#)pathconf.2	8.1 (Berkeley) 6/4/93
.\"
.Dd $Mdocdate: January 19 2015 $
.Dt PATHCONF 2
.Os
.Sh NAME
.Nm pathconf ,
.Nm fpathconf
.Nd get configurable pathname variables
.Sh SYNOPSIS
.In unistd.h
.Ft long
.Fn pathconf "const char *path" "int name"
.Ft long
.Fn fpathconf "int fd" "int name"
.Sh DESCRIPTION
The
.Fn pathconf
and
.Fn fpathconf
functions provide a method for applications to determine the current
value of a configurable system limit or option variable associated
with a pathname or file descriptor.
.Pp
For
.Fn pathconf ,
the
.Fa path
argument is the name of a file or directory.
For
.Fn fpathconf ,
the
.Fa fd
argument is an open file descriptor.
The
.Fa name
argument specifies the system variable to be queried.
Symbolic constants for each name value are found in the include file
.In unistd.h .
.Pp
The available values are as follows:
.Bl -tag -width "123456"
.It Dv _PC_LINK_MAX
The maximum file link count.
.It Dv _PC_MAX_CANON
The maximum number of bytes in a terminal canonical input line.
.It Dv _PC_MAX_INPUT
The maximum number of bytes for which space is available in
a terminal input queue.
.It Dv _PC_NAME_MAX
The maximum number of bytes in a file name.
.It Dv _PC_PATH_MAX
The maximum number of bytes in a pathname.
.It Dv _PC_PIPE_BUF
The maximum number of bytes which will be written atomically to a pipe.
.It Dv _PC_CHOWN_RESTRICTED
Returns 1 if appropriate privileges are required for the
.Xr chown 2
system call, otherwise 0.
.St -p1003.1-2001
requires appropriate privilege in all cases, but this behavior was
optional in prior editions of the standard.
.It Dv _PC_NO_TRUNC
Returns 1 if attempts to use pathname components longer than
.Brq Dv NAME_MAX
will result in an
.Bq Er ENAMETOOLONG
error; otherwise, such components will be truncated to
.Brq Dv NAME_MAX .
.St -p1003.1-2001
requires the error in all cases, but this behavior was optional in prior
editions of the standard, and some non-POSIX-compliant file systems do not
support this behavior.
.It Dv _PC_VDISABLE
Returns the terminal character disabling value.
.It Dv _PC_2_SYMLINKS
Returns 1 if the filesystem supports the creation of symbolic links
within the specified directory; the meaning of
.Dv _PC_2_SYMLINKS
is unspecified for non-directory files.
.It Dv _PC_ALLOC_SIZE_MIN
Minimum number of bytes of storage allocated for any portion of a file.
.It Dv _PC_ASYNC_IO
Returns 1 if asynchronous I/O is supported, otherwise 0.
.It Dv _PC_FILESIZEBITS
Number of bits needed to represent the maximum file size.
.It Dv _PC_PRIO_IO
Returns 1 if prioritized I/O is supported, otherwise 0.
.It Dv _PC_REC_INCR_XFER_SIZE
Recommended increment for file transfer sizes between _PC_REC_MIN_XFER_SIZE
and _PC_REC_MAX_XFER_SIZE.
.It Dv _PC_REC_MAX_XFER_SIZE
Maximum recommended file transfer size.
.It Dv _PC_REC_MIN_XFER_SIZE
Minimum recommended file transfer size.
.It Dv _PC_REC_XFER_ALIGN
Recommended file transfer buffer alignment.
.It Dv _PC_SYMLINK_MAX
Maximum number of bytes in a symbolic link.
.It Dv _PC_SYNC_IO
Returns 1 if synchronized I/O is supported, otherwise 0.
.It Dv _PC_TIMESTAMP_RESOLUTION
The resolution in nanoseconds of file timestamps.
.El
.Sh RETURN VALUES
If the call to
.Fn pathconf
or
.Fn fpathconf
is not successful, \-1 is returned and
.Va errno
is set appropriately.
Otherwise, if the variable is associated with functionality that does
not have a limit in the system, \-1 is returned and
.Va errno
is not modified.
Otherwise, the current variable value is returned.
.Sh ERRORS
If any of the following conditions occur, the
.Fn pathconf
and
.Fn fpathconf
functions shall return \-1 and set
.Va errno
to the corresponding value.
.Bl -tag -width Er
.It Bq Er EINVAL
The value of the
.Fa name
argument is invalid.
.It Bq Er EINVAL
The implementation does not support an association of the variable
name with the associated file.
.It Bq Er EIO
An I/O error occurred while reading from the file system.
.El
.Pp
.Fn pathconf
will fail if:
.Bl -tag -width Er
.It Bq Er ENOTDIR
A component of the path prefix is not a directory.
.It Bq Er ENAMETOOLONG
A component of a pathname exceeded
.Dv NAME_MAX
characters (but see
.Dv _PC_NO_TRUNC
above), or an entire pathname (including the terminating NUL)
exceeded
.Dv PATH_MAX
bytes.
.It Bq Er ENOENT
The named file does not exist.
.It Bq Er EACCES
Search permission is denied for a component of the path prefix.
.It Bq Er ELOOP
Too many symbolic links were encountered in translating the pathname.
.It Bq Er EFAULT
.Fa path
points outside the process's allocated address space.
.El
.Pp
.Fn fpathconf
will fail if:
.Bl -tag -width Er
.It Bq Er EBADF
.Fa fd
is not a valid open file descriptor.
.El
.Sh SEE ALSO
.Xr sysconf 3 ,
.Xr sysctl 3
.Sh STANDARDS
The
.Fn pathconf
and
.Fn fpathconf
functions conform to
.St -p1003.1-2008 .
.Sh HISTORY
The
.Fn pathconf
and
.Fn fpathconf
functions first appeared in
.Bx 4.4 .
@


1.22
log
@Explicitly mention that PATH_MAX includes the NUL in the ENAMETOOLONG
description.
@
text
@d1 1
a1 1
.\"	$OpenBSD: pathconf.2,v 1.21 2014/01/21 03:15:45 schwarze Exp $
d33 1
a33 1
.Dd $Mdocdate: January 21 2014 $
d41 1
a41 1
.Fd #include <unistd.h>
d56 1
a56 1
.Nm pathconf ,
d61 1
a61 1
.Nm fpathconf ,
d137 1
a137 1
.Nm pathconf
d139 1
a139 1
.Nm fpathconf
d150 1
a150 1
.Nm pathconf
d152 1
a152 1
.Nm fpathconf
d205 1
a205 1
.Nm pathconf
d207 1
a207 1
.Nm fpathconf
d212 1
a212 1
.Nm pathconf
d214 1
a214 1
.Nm fpathconf
@


1.21
log
@obvious .Pa fixes; found with mandocdb(8)
@
text
@d1 1
a1 1
.\"	$OpenBSD: pathconf.2,v 1.20 2013/03/28 20:37:56 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: March 28 2013 $
d175 1
a175 1
.Brq Dv NAME_MAX
d178 4
a181 3
above), or an entire path name exceeded
.Brq Dv PATH_MAX
characters.
@


1.20
log
@no Pp before/after Sh;
@
text
@d1 1
a1 1
.\"	$OpenBSD: pathconf.2,v 1.19 2013/03/28 20:01:18 guenther Exp $
d69 1
a69 1
.Aq Pa unistd.h .
@


1.19
log
@pathconf/fpathconf are now compliant with POSIX-2008.
Adjust the errnos a bit.
@
text
@d1 1
a1 1
.\"	$OpenBSD: pathconf.2,v 1.18 2013/03/28 03:29:45 guenther Exp $
a208 1
.Pp
@


1.18
log
@Add support for _PC_TIMESTAMP_RESOLUTION for ffs/mfs, cd9600, ext2,
msdos, NFS, fifos and devices, plus support for querying it in
getconf(2) and the requisite pathconf(2) manpage blurb

ok tedu@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: pathconf.2,v 1.17 2012/07/17 06:30:31 matthew Exp $
d33 1
a33 1
.Dd $Mdocdate: July 17 2012 $
d164 2
d187 3
a189 2
.It Bq Er EIO
An I/O error occurred while reading from or writing to the file system.
a197 2
.It Bq Er EIO
An I/O error occurred while reading from or writing to the file system.
d202 8
@


1.17
log
@Document new pathconf() variables.
From Brad, with tweaks by me.
@
text
@d1 1
a1 1
.\"	$OpenBSD: pathconf.2,v 1.16 2007/05/31 19:19:33 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate: May 31 2007 $
d132 2
@


1.16
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: pathconf.2,v 1.15 2005/01/09 00:34:39 jmc Exp $
d33 1
a33 1
.Dd $Mdocdate$
d87 1
a87 1
Return 1 if appropriate privileges are required for the
d90 3
d94 10
a103 3
Return 1 if file names longer than
.Dv KERN_NAME_MAX
are truncated.
d106 26
d166 1
a166 1
.Bl -tag -width ENAMETOOLONGAA
d170 7
a176 2
A component of a pathname exceeded 255 characters,
or an entire path name exceeded 1023 characters.
d189 1
a189 1
.Bl -tag -width [EFAULT]
@


1.15
log
@grammar from fbsd -r 1.18;
@
text
@d1 1
a1 1
.\"	$OpenBSD: pathconf.2,v 1.14 2004/06/03 17:09:12 espie Exp $
d33 1
a33 1
.Dd June 4, 1993
@


1.14
log
@cross-Xref to make pathconf/sysconf easy to find.
twiddling and okay jmc@@ millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: pathconf.2,v 1.13 2004/04/15 19:52:18 jmc Exp $
d51 1
a51 1
functions provides a method for applications to determine the current
@


1.13
log
@various improvements to lists and displays:

.Pp removal
-compact removal for displays
other list/display errors
@
text
@d1 1
a1 1
.\"	$OpenBSD: pathconf.2,v 1.12 2003/09/05 21:36:47 jmc Exp $
d156 1
@


1.12
log
@spacing;
@
text
@d1 1
a1 1
.\"	$OpenBSD: pathconf.2,v 1.11 2003/06/02 20:18:39 millert Exp $
a71 1
.Pp
a72 1
.Pp
a145 1
.Bl -tag -width [EFAULT]
d148 1
@


1.11
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
.\"	$OpenBSD: pathconf.2,v 1.10 2003/02/27 07:55:34 jmc Exp $
d129 1
@


1.10
log
@typos;
@
text
@d1 1
a1 1
.\"	$OpenBSD: pathconf.2,v 1.9 2002/04/30 16:31:42 mpech Exp $
d15 1
a15 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
@


1.9
log
@Initial cleanup:
o) remove extra space in the end of line;
o) remove extra blank lines in the end of file;
o) remove .Pp before .Ss;
o) CAVEAT -> CAVEATS;
o) fix usage of .Fa;
o) <blank-line> -> .Pp;
o) wrap long lines;

millert@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: pathconf.2,v 1.8 2002/01/02 16:31:30 aaron Exp $
d84 1
a84 1
The minimum maximum number of bytes for which space is available in
@


1.8
log
@Grammar and format fixes.
@
text
@d1 1
a1 1
.\"	$OpenBSD: pathconf.2,v 1.7 1999/06/29 14:10:11 aaron Exp $
d90 1
a90 1
.It Dv _PC_PIPE_BUF 
@


1.7
log
@- change references to nil to null; tschroed@@acm.org
- remove trailing spaces from end of lines
- add some .Dv
- change -1 to \-1, so `-' is taken as a negative sign
- other misc formatting fixes
@
text
@d1 1
a1 1
.\"	$OpenBSD: pathconf.2,v 1.6 1999/05/23 14:10:55 aaron Exp $
d73 1
a73 1
.Li <unistd.h> .
d79 1
a79 1
.It Li _PC_LINK_MAX
d81 3
a83 3
.It Li _PC_MAX_CANON
The maximum number of bytes in terminal canonical input line.
.It Li _PC_MAX_INPUT
d86 1
a86 1
.It Li _PC_NAME_MAX
d88 1
a88 1
.It Li _PC_PATH_MAX
d90 1
a90 1
.It Li _PC_PIPE_BUF
d92 1
a92 1
.It Li _PC_CHOWN_RESTRICTED
d96 5
a100 3
.It Li _PC_NO_TRUNC
Return 1 if file names longer than KERN_NAME_MAX are truncated.
.It Li _PC_VDISABLE
@


1.6
log
@remove argument from .Os macros so value in /usr/share/tmac/mdoc/doc-common
is used instead; kwesterback@@home.com
@
text
@d1 1
a1 1
.\"	$OpenBSD: pathconf.2,v 1.5 1999/04/02 16:21:35 aaron Exp $
d119 1
a119 1
functions shall return -1 and set
@


1.5
log
@.Pp macros do not belong immiedately after .Sh section header lines
@
text
@d1 1
a1 1
.\"	$OpenBSD: pathconf.2,v 1.4 1999/02/27 21:56:37 deraadt Exp $
d39 1
a39 1
.Os BSD 4
@


1.4
log
@make function names the correct case
@
text
@d1 1
a1 1
.\"	$OpenBSD: pathconf.2,v 1.3 1998/07/06 18:28:08 deraadt Exp $
a50 1
.Pp
@


1.3
log
@fix openbsd tag
@
text
@d1 1
a1 1
.\"	$OpenBSD: pathconf.2,v 1.2 1995/02/27 12:35:22 cgd Exp $
d132 1
a132 1
.Fn Pathconf
d151 1
a151 1
.Fn Fpathconf
@


1.2
log
@use Bx macro for BSD versions
@
text
@d1 1
@


1.1
log
@Initial revision
@
text
@d165 2
a166 1
functions first appeared in 4.4BSD.
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
