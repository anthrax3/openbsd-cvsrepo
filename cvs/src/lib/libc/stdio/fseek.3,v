head	1.18;
access;
symbols
	OPENBSD_6_1:1.18.0.4
	OPENBSD_6_1_BASE:1.18
	OPENBSD_6_0:1.18.0.2
	OPENBSD_6_0_BASE:1.18
	OPENBSD_5_9:1.16.0.10
	OPENBSD_5_9_BASE:1.16
	OPENBSD_5_8:1.16.0.12
	OPENBSD_5_8_BASE:1.16
	OPENBSD_5_7:1.16.0.4
	OPENBSD_5_7_BASE:1.16
	OPENBSD_5_6:1.16.0.8
	OPENBSD_5_6_BASE:1.16
	OPENBSD_5_5:1.16.0.6
	OPENBSD_5_5_BASE:1.16
	OPENBSD_5_4:1.16.0.2
	OPENBSD_5_4_BASE:1.16
	OPENBSD_5_3:1.14.0.4
	OPENBSD_5_3_BASE:1.14
	OPENBSD_5_2:1.14.0.2
	OPENBSD_5_2_BASE:1.14
	OPENBSD_5_1_BASE:1.12
	OPENBSD_5_1:1.12.0.4
	OPENBSD_5_0:1.12.0.2
	OPENBSD_5_0_BASE:1.12
	OPENBSD_4_9:1.11.0.16
	OPENBSD_4_9_BASE:1.11
	OPENBSD_4_8:1.11.0.14
	OPENBSD_4_8_BASE:1.11
	OPENBSD_4_7:1.11.0.10
	OPENBSD_4_7_BASE:1.11
	OPENBSD_4_6:1.11.0.12
	OPENBSD_4_6_BASE:1.11
	OPENBSD_4_5:1.11.0.8
	OPENBSD_4_5_BASE:1.11
	OPENBSD_4_4:1.11.0.6
	OPENBSD_4_4_BASE:1.11
	OPENBSD_4_3:1.11.0.4
	OPENBSD_4_3_BASE:1.11
	OPENBSD_4_2:1.11.0.2
	OPENBSD_4_2_BASE:1.11
	OPENBSD_4_1:1.10.0.8
	OPENBSD_4_1_BASE:1.10
	OPENBSD_4_0:1.10.0.6
	OPENBSD_4_0_BASE:1.10
	OPENBSD_3_9:1.10.0.4
	OPENBSD_3_9_BASE:1.10
	OPENBSD_3_8:1.10.0.2
	OPENBSD_3_8_BASE:1.10
	OPENBSD_3_7:1.9.0.8
	OPENBSD_3_7_BASE:1.9
	OPENBSD_3_6:1.9.0.6
	OPENBSD_3_6_BASE:1.9
	OPENBSD_3_5:1.9.0.4
	OPENBSD_3_5_BASE:1.9
	OPENBSD_3_4:1.9.0.2
	OPENBSD_3_4_BASE:1.9
	OPENBSD_3_3:1.8.0.10
	OPENBSD_3_3_BASE:1.8
	OPENBSD_3_2:1.8.0.8
	OPENBSD_3_2_BASE:1.8
	OPENBSD_3_1:1.8.0.6
	OPENBSD_3_1_BASE:1.8
	OPENBSD_3_0:1.8.0.4
	OPENBSD_3_0_BASE:1.8
	OPENBSD_2_9:1.8.0.2
	OPENBSD_2_9_BASE:1.8
	OPENBSD_2_8:1.7.0.4
	OPENBSD_2_8_BASE:1.7
	OPENBSD_2_7:1.7.0.2
	OPENBSD_2_7_BASE:1.7
	OPENBSD_2_6:1.4.0.2
	OPENBSD_2_6_BASE:1.4
	OPENBSD_2_5:1.2.0.12
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.2.0.10
	OPENBSD_2_4_BASE:1.2
	OPENBSD_2_3:1.2.0.8
	OPENBSD_2_3_BASE:1.2
	OPENBSD_2_2:1.2.0.6
	OPENBSD_2_2_BASE:1.2
	OPENBSD_2_1:1.2.0.4
	OPENBSD_2_1_BASE:1.2
	OPENBSD_2_0:1.2.0.2
	OPENBSD_2_0_BASE:1.2
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@.\" @;


1.18
date	2016.03.26.22.32.29;	author tb;	state Exp;
branches;
next	1.17;
commitid	xFXpA0DyXBE4bTbY;

1.17
date	2016.03.15.19.45.57;	author espie;	state Exp;
branches;
next	1.16;
commitid	PRk9xTWpXG1TUYH7;

1.16
date	2013.07.17.05.42.11;	author schwarze;	state Exp;
branches;
next	1.15;

1.15
date	2013.06.05.03.39.23;	author tedu;	state Exp;
branches;
next	1.14;

1.14
date	2012.05.22.23.43.40;	author matthew;	state Exp;
branches;
next	1.13;

1.13
date	2012.05.22.20.05.11;	author matthew;	state Exp;
branches;
next	1.12;

1.12
date	2011.07.05.15.30.10;	author jmc;	state Exp;
branches;
next	1.11;

1.11
date	2007.05.31.19.19.31;	author jmc;	state Exp;
branches;
next	1.10;

1.10
date	2005.07.26.03.30.25;	author jaredy;	state Exp;
branches;
next	1.9;

1.9
date	2003.06.02.20.18.37;	author millert;	state Exp;
branches;
next	1.8;

1.8
date	2000.12.24.00.30.58;	author aaron;	state Exp;
branches;
next	1.7;

1.7
date	2000.04.20.01.39.32;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	2000.04.15.02.15.23;	author aaron;	state Exp;
branches;
next	1.5;

1.5
date	2000.02.21.22.11.22;	author millert;	state Exp;
branches;
next	1.4;

1.4
date	99.07.09.13.35.23;	author aaron;	state Exp;
branches;
next	1.3;

1.3
date	99.05.27.14.08.39;	author aaron;	state Exp;
branches;
next	1.2;

1.2
date	96.08.19.08.32.46;	author tholo;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.42.13;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.42.13;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.18
log
@fix typo: "prefer seek()" -> "prefer fseek()"

ok deraadt@@, stsp@@
@
text
@.\"	$OpenBSD: fseek.3,v 1.17 2016/03/15 19:45:57 espie Exp $
.\"
.\" Copyright (c) 1990, 1991, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" This code is derived from software contributed to Berkeley by
.\" Chris Torek and the American National Standards Committee X3,
.\" on Information Processing Systems.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.Dd $Mdocdate: March 15 2016 $
.Dt FSEEK 3
.Os
.Sh NAME
.Nm fgetpos ,
.Nm fseek ,
.Nm fseeko ,
.Nm fsetpos ,
.Nm ftell ,
.Nm ftello ,
.Nm rewind
.Nd reposition a stream
.Sh SYNOPSIS
.In stdio.h
.Ft int
.Fn fgetpos "FILE *stream" "fpos_t *pos"
.Ft int
.Fn fseek "FILE *stream" "long offset" "int whence"
.Ft int
.Fn fseeko "FILE *stream" "off_t offset" "int whence"
.Ft int
.Fn fsetpos "FILE *stream" "const fpos_t *pos"
.Ft long
.Fn ftell "FILE *stream"
.Ft off_t
.Fn ftello "FILE *stream"
.Ft void
.Fn rewind "FILE *stream"
.Sh DESCRIPTION
The
.Fn fseek
function sets the file position indicator for the stream pointed to by
.Fa stream .
The new position, measured in bytes, is obtained by adding
.Fa offset
bytes to the position specified by
.Fa whence .
If
.Fa whence
is set to
.Dv SEEK_SET ,
.Dv SEEK_CUR ,
or
.Dv SEEK_END ,
the offset is relative to the
start of the file, the current position indicator, or end-of-file,
respectively.
A successful call to the
.Fn fseek
function clears the end-of-file indicator for the stream and undoes
any effects of the
.Xr ungetc 3
function on the same stream.
.Pp
The
.Fn fseeko
function is identical to
.Fn fseek
except that it takes an
.Li off_t
as its
.Fa offset .
.Pp
The
.Fn ftell
function obtains the current value of the file position indicator for the
stream pointed to by
.Fa stream .
.Pp
The
.Fn ftello
function is identical to
.Fn ftell
except that its return value is of type
.Li off_t .
.Pp
The
.Fn rewind
function sets the file position indicator for the stream pointed
to by
.Fa stream
to the beginning of the file.
It is equivalent to:
.Pp
.Dl (void)fseek(stream, 0L, SEEK_SET)
.Pp
except that the error indicator for the stream is also cleared
(see
.Xr clearerr 3 ) .
.Pp
The
.Fn fgetpos
and
.Fn fsetpos
functions are alternate interfaces equivalent to
.Fn ftell
and
.Fn fseek
(with whence set to
.Dv SEEK_SET ) ,
setting and storing the current value of
the file offset into or from the object referenced by
.Fa pos .
On some systems an
.Dq Fa fpos_t
object may be a complex object
and these routines may be the only way to portably reposition a text stream.
.Sh RETURN VALUES
The
.Fn rewind
function returns no value.
Prefer
.Fn fseek ,
which is just as portable, and does not hide errors.
Upon successful completion,
.Fn fgetpos ,
.Fn fseek ,
.Fn fseeko ,
and
.Fn fsetpos
return 0 and
.Fn ftell
and
.Fn ftello
return the current offset.
Otherwise,
.Fn fseek ,
.Fn fseeko ,
.Fn ftell ,
and
.Fn ftello
return \-1 and
.Fn fgetpos
and
.Fn fsetpos
return a non-zero value and the global variable
.Va errno
is set to indicate the error.
.Sh ERRORS
The
.Fn fgetpos ,
.Fn fseek ,
.Fn fseeko ,
.Fn fsetpos ,
.Fn ftell ,
.Fn ftello ,
and
.Fn rewind
functions will fail if:
.Bl -tag -width Er
.It Bq Er EBADF
The
.Fa stream
specified is not a seekable stream.
.El
.Pp
Additionally, the
.Fn fseek
and
.Fn fseeko
functions will fail if:
.Bl -tag -width Er
.It Bq Er EINVAL
The
.Fa whence
argument was not
.Dv SEEK_SET ,
.Dv SEEK_END ,
or
.Dv SEEK_CUR .
.El
.Pp
Additionally, the
.Fn ftell
function will fail if:
.Bl -tag -width Er
.It Bq Er EOVERFLOW
The value of the file position indicator is too large to be represented by a
.Vt long .
.El
.Pp
Finally, the functions
.Fn fgetpos ,
.Fn fseek ,
.Fn fseeko ,
.Fn fsetpos ,
.Fn ftell ,
and
.Fn ftello
may also fail and set
.Va errno
for any of the errors specified for the routines
.Xr fflush 3 ,
.Xr fstat 2 ,
.Xr lseek 2 ,
and
.Xr malloc 3 .
.Sh SEE ALSO
.Xr lseek 2
.Sh STANDARDS
The
.Fn fgetpos ,
.Fn fsetpos ,
.Fn fseek ,
.Fn ftell ,
and
.Fn rewind
functions conform to
.St -ansiC
and
.St -xpg4 .
.Pp
The
.Fn fseeko
and
.Fn ftello
functions conform to
.St -xpg4 .
.Sh HISTORY
The functions
.Fn fseek ,
.Fn ftell ,
and
.Fn rewind
first appeared in
.At v7 .
@


1.17
log
@remind people rewind is seldom a good choice
okay jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: fseek.3,v 1.16 2013/07/17 05:42:11 schwarze Exp $
d34 1
a34 1
.Dd $Mdocdate: July 17 2013 $
d146 1
a146 1
.Fn seek ,
@


1.16
log
@more library history
facts checked by sobrado@@
style tweaks and ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: fseek.3,v 1.15 2013/06/05 03:39:23 tedu Exp $
d34 1
a34 1
.Dd $Mdocdate: June 5 2013 $
d145 3
@


1.15
log
@Use the fancy .In macro for includes. From Jan Klemkow. ok jmc schwarze
@
text
@d1 1
a1 1
.\"	$OpenBSD: fseek.3,v 1.14 2012/05/22 23:43:40 matthew Exp $
d34 1
a34 1
.Dd $Mdocdate: May 22 2012 $
d249 8
@


1.14
log
@Don't misleadingly suggest that fpos_t only needs to be a complex type
on non-UNIX systems: it's a complex type on Linux, and to be C99
compliant we'll probably need it to be a complex type too.
@
text
@d1 1
a1 1
.\"	$OpenBSD: fseek.3,v 1.13 2012/05/22 20:05:11 matthew Exp $
d47 1
a47 1
.Fd #include <stdio.h>
@


1.13
log
@Document that ftell() may return EOVERFLOW.

Diff from Tim van der Molen.
@
text
@d1 1
a1 1
.\"	$OpenBSD: fseek.3,v 1.12 2011/07/05 15:30:10 jmc Exp $
d34 1
a34 1
.Dd $Mdocdate: July 5 2011 $
d137 1
a137 3
On some
.Pq non- Ns Tn UNIX
systems an
@


1.12
log
@from Tim van der Molen:

- State that ftell() and ftello() return -1 on error rather than just a
  non-zero value. The latter is not specific enough, because these
  functions can also return non-zero on success.

- For clarity and search-friendliness, don't refer to fgetpos() and
  fsetpos() as "the others", but mention them by name.

ok millert otto
@
text
@d1 1
a1 1
.\"	$OpenBSD: fseek.3,v 1.11 2007/05/31 19:19:31 jmc Exp $
d34 1
a34 1
.Dd $Mdocdate: May 31 2007 $
d172 10
d187 8
d198 1
a198 3
argument to
.Fn fseek
was not
d205 10
a214 1
The functions
@


1.11
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: fseek.3,v 1.10 2005/07/26 03:30:25 jaredy Exp $
d34 1
a34 1
.Dd $Mdocdate$
d151 1
d159 7
a165 1
.Fn fseek
d167 2
a168 2
.Fn fseeko
return \-1 and the others return a non-zero value and the global variable
@


1.10
log
@- typos, punctuation, spacing, macro, layout, etc. fixes
- avoid first person

ok jmc
@
text
@d1 1
a1 1
.\"	$OpenBSD: fseek.3,v 1.9 2003/06/02 20:18:37 millert Exp $
d34 1
a34 1
.Dd February 21, 2000
@


1.9
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
.\"	$OpenBSD: fseek.3,v 1.8 2000/12/24 00:30:58 aaron Exp $
d161 1
a161 1
return \-1 and the others return a nonzero value and the global variable
d182 1
a182 1
The function
@


1.8
log
@Various repairs, mostly to get rid of short lines.
@
text
@d1 1
a1 1
.\"	$OpenBSD: fseek.3,v 1.7 2000/04/20 01:39:32 aaron Exp $
d18 1
a18 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
@


1.7
log
@Flesh out all of the stdio man pages.
@
text
@d1 1
a1 1
.\"	$OpenBSD: fseek.3,v 1.6 2000/04/15 02:15:23 aaron Exp $
d212 1
a212 2
functions
conform to
d221 1
a221 2
functions
conform to
@


1.6
log
@Mostly punctuation fixes.
@
text
@d1 1
a1 1
.\"	$OpenBSD: fseek.3,v 1.5 2000/02/21 22:11:22 millert Exp $
d46 1
a47 1
.Nm ftell ,
d53 2
d58 2
a65 4
.Ft int
.Fn fgetpos "FILE *stream" "fpos_t *pos"
.Ft int
.Fn fsetpos "FILE *stream" "const fpos_t *pos"
d69 1
a69 2
function sets the file position indicator for the stream pointed
to by
d97 1
a97 1
.Dv off_t
d103 1
a103 2
function
obtains the current value of the file position indicator for the
d112 1
a112 1
.Dv off_t .
d132 1
a132 2
functions
are alternate interfaces equivalent to
d150 1
a150 2
function
returns no value.
d165 1
a165 3
return \-1 and
the others
return a nonzero value and the global variable
d173 1
a173 2
specified
is not a seekable stream.
@


1.5
log
@Add fseeko() and ftello() -- versions of fseek() and ftell() that use off_t.
Also make fsetpos() and fgetpos() use fseeko() and ftello() respectively
since fpos_t is actually a 64bit type.
@
text
@d1 1
a1 1
.\"	$OpenBSD: fseek.3,v 1.4 1999/07/09 13:35:23 aaron Exp $
d140 2
a141 2
.Dv SEEK_SET
), setting and storing the current value of
@


1.4
log
@- remove all trailing whitespace
     * except when it is escaped with a `\' at the end of the line
- fix remaining .Nm usage as well
- this is from a patch I received from kwesterback@@home.com, who has been
  working on some scripts for fixing formatting errors in mdoc'd man pages

Ok, so there could be a cost/benefit debate with this commit, but since I have
the patch we might as well commit it...
@
text
@d1 1
a1 1
.\"	$OpenBSD: fseek.3,v 1.3 1999/05/27 14:08:39 aaron Exp $
d38 1
a38 1
.Dd June 4, 1993
d44 1
d46 1
d54 2
d58 2
d94 9
d110 7
d158 1
d160 2
a161 1
return 0,
d163 2
a164 2
.Fn ftell
returns the current offset.
d167 3
a169 1
returns \-1 and
d196 1
d198 1
d200 1
a200 1
.Fn ftell
d221 11
a231 1
.St -ansiC .
@


1.3
log
@sync fsetpos() with stdio.h prototype
@
text
@d1 1
a1 1
.\"	$OpenBSD: fseek.3,v 1.2 1996/08/19 08:32:46 tholo Exp $
d70 1
a70 1
If 
d120 1
a120 1
the file offset into or from the object referenced by 
d141 1
a141 1
Otherwise, 
d143 1
a143 1
returns \-1 and 
d145 1
a145 1
return a nonzero value and the global variable 
d158 1
a158 1
argument to 
d171 1
a171 1
and 
d179 1
a179 1
and 
@


1.2
log
@Fix RCS ids
Make sure everything uses {SYS,}LIBC_SCCS properly
@
text
@d1 1
a1 1
.\"	$OpenBSD: fseek.3,v 1.6 1995/02/02 01:15:43 jtc Exp $
d59 1
a59 1
.Fn fsetpos "FILE *stream" "fpos_t *pos"
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
.\"	$NetBSD: fseek.3,v 1.6 1995/02/02 01:15:43 jtc Exp $
a36 2
.\"
.\"     @@(#)fseek.3	8.1 (Berkeley) 6/4/93
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
