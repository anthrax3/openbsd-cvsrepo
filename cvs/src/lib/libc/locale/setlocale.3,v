head	1.19;
access;
symbols
	OPENBSD_6_2:1.19.0.10
	OPENBSD_6_2_BASE:1.19
	OPENBSD_6_1:1.19.0.8
	OPENBSD_6_1_BASE:1.19
	OPENBSD_6_0:1.19.0.4
	OPENBSD_6_0_BASE:1.19
	OPENBSD_5_9:1.19.0.2
	OPENBSD_5_9_BASE:1.19
	OPENBSD_5_8:1.17.0.6
	OPENBSD_5_8_BASE:1.17
	OPENBSD_5_7:1.17.0.2
	OPENBSD_5_7_BASE:1.17
	OPENBSD_5_6:1.15.0.4
	OPENBSD_5_6_BASE:1.15
	OPENBSD_5_5:1.14.0.6
	OPENBSD_5_5_BASE:1.14
	OPENBSD_5_4:1.14.0.2
	OPENBSD_5_4_BASE:1.14
	OPENBSD_5_3:1.13.0.8
	OPENBSD_5_3_BASE:1.13
	OPENBSD_5_2:1.13.0.6
	OPENBSD_5_2_BASE:1.13
	OPENBSD_5_1_BASE:1.13
	OPENBSD_5_1:1.13.0.4
	OPENBSD_5_0:1.13.0.2
	OPENBSD_5_0_BASE:1.13
	OPENBSD_4_9:1.12.0.16
	OPENBSD_4_9_BASE:1.12
	OPENBSD_4_8:1.12.0.14
	OPENBSD_4_8_BASE:1.12
	OPENBSD_4_7:1.12.0.10
	OPENBSD_4_7_BASE:1.12
	OPENBSD_4_6:1.12.0.12
	OPENBSD_4_6_BASE:1.12
	OPENBSD_4_5:1.12.0.8
	OPENBSD_4_5_BASE:1.12
	OPENBSD_4_4:1.12.0.6
	OPENBSD_4_4_BASE:1.12
	OPENBSD_4_3:1.12.0.4
	OPENBSD_4_3_BASE:1.12
	OPENBSD_4_2:1.12.0.2
	OPENBSD_4_2_BASE:1.12
	OPENBSD_4_1:1.11.0.8
	OPENBSD_4_1_BASE:1.11
	OPENBSD_4_0:1.11.0.6
	OPENBSD_4_0_BASE:1.11
	OPENBSD_3_9:1.11.0.4
	OPENBSD_3_9_BASE:1.11
	OPENBSD_3_8:1.11.0.2
	OPENBSD_3_8_BASE:1.11
	OPENBSD_3_7:1.10.0.2
	OPENBSD_3_7_BASE:1.10
	OPENBSD_3_6:1.9.0.2
	OPENBSD_3_6_BASE:1.9
	OPENBSD_3_5:1.8.0.4
	OPENBSD_3_5_BASE:1.8
	OPENBSD_3_4:1.8.0.2
	OPENBSD_3_4_BASE:1.8
	OPENBSD_3_3:1.7.0.14
	OPENBSD_3_3_BASE:1.7
	OPENBSD_3_2:1.7.0.12
	OPENBSD_3_2_BASE:1.7
	OPENBSD_3_1:1.7.0.10
	OPENBSD_3_1_BASE:1.7
	OPENBSD_3_0:1.7.0.8
	OPENBSD_3_0_BASE:1.7
	OPENBSD_2_9:1.7.0.6
	OPENBSD_2_9_BASE:1.7
	OPENBSD_2_8:1.7.0.4
	OPENBSD_2_8_BASE:1.7
	OPENBSD_2_7:1.7.0.2
	OPENBSD_2_7_BASE:1.7
	OPENBSD_2_6:1.6.0.2
	OPENBSD_2_6_BASE:1.6
	OPENBSD_2_5:1.2.0.4
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.2.0.2
	OPENBSD_2_4_BASE:1.2
	OPENBSD_2_3:1.1.0.4
	OPENBSD_2_3_BASE:1.1
	OPENBSD_2_2:1.1.0.2
	OPENBSD_2_2_BASE:1.1;
locks; strict;
comment	@# @;


1.19
date	2015.09.21.14.46.59;	author guenther;	state Exp;
branches;
next	1.18;
commitid	WAiKMayA26mU3m7L;

1.18
date	2015.08.12.09.38.23;	author zhuk;	state Exp;
branches;
next	1.17;
commitid	GJt4Bjz3nduYzhBH;

1.17
date	2014.12.11.20.24.05;	author schwarze;	state Exp;
branches;
next	1.16;
commitid	T87YpEW0OJuRg8k1;

1.16
date	2014.12.09.15.32.23;	author schwarze;	state Exp;
branches;
next	1.15;
commitid	I6HUfH16wv0ftPAD;

1.15
date	2014.07.14.07.22.07;	author pelikan;	state Exp;
branches;
next	1.14;
commitid	2T7dYu6PlirmmPvO;

1.14
date	2013.06.05.03.39.22;	author tedu;	state Exp;
branches;
next	1.13;

1.13
date	2011.03.09.01.27.37;	author schwarze;	state Exp;
branches;
next	1.12;

1.12
date	2007.05.31.19.19.29;	author jmc;	state Exp;
branches;
next	1.11;

1.11
date	2005.08.12.18.31.43;	author jmc;	state Exp;
branches;
next	1.10;

1.10
date	2004.10.01.04.08.45;	author jsg;	state Exp;
branches;
next	1.9;

1.9
date	2004.04.16.10.48.39;	author jmc;	state Exp;
branches;
next	1.8;

1.8
date	2003.06.02.20.18.35;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	2000.04.18.03.01.30;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	99.07.05.03.34.34;	author aaron;	state Exp;
branches;
next	1.5;

1.5
date	99.06.29.14.42.08;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	99.05.28.01.57.36;	author aaron;	state Exp;
branches;
next	1.3;

1.3
date	99.05.23.14.11.01;	author aaron;	state Exp;
branches;
next	1.2;

1.2
date	98.08.26.15.19.05;	author kstailey;	state Exp;
branches;
next	1.1;

1.1
date	97.07.25.16.53.15;	author mickey;	state Exp;
branches;
next	;


desc
@@


1.19
log
@Prefer Xr over Fn for interpage references and delete reference to
setrunelocale() which is not exported from libc

ok jmc@@ stsp@@
@
text
@.\"	$OpenBSD: setlocale.3,v 1.18 2015/08/12 09:38:23 zhuk Exp $
.\"	$NetBSD: setlocale.3,v 1.3 1997/07/14 23:19:47 kleink Exp $
.\"
.\" Copyright (c) 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" This code is derived from software contributed to Berkeley by
.\" Donn Seeley at BSDI.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"	@@(#)setlocale.3	8.1 (Berkeley) 6/9/93
.\"
.Dd $Mdocdate: August 12 2015 $
.Dt SETLOCALE 3
.Os
.Sh NAME
.Nm setlocale ,
.Nm localeconv
.Nd natural language formatting for C
.Sh SYNOPSIS
.In locale.h
.Ft char *
.Fn setlocale "int category" "const char *locale"
.Ft struct lconv *
.Fn localeconv "void"
.Sh DESCRIPTION
The
.Fn setlocale
function sets the C library's notion
of natural language formatting style
for particular sets of routines.
Each such style is called a
.Dq locale
and is invoked using an appropriate name passed as a C string.
The
.Fn localeconv
routine returns the current locale's parameters
for formatting numbers.
.Pp
The
.Fn setlocale
function recognizes several categories of routines.
These are the categories and the sets of routines they select:
.Bl -tag -width LC_MONETARY
.It Dv LC_ALL
Set the entire locale generically.
.It Dv LC_COLLATE
Set a locale for string collation routines.
This controls alphabetic ordering in
.Xr strcoll 3
and
.Xr strxfrm 3 .
.It Dv LC_CTYPE
Set a locale for the functions declared in
.In ctype.h
and
.In wctype.h .
This controls recognition of upper and lower case,
alphabetic or non-alphabetic characters, and so on.
.It Dv LC_MESSAGES
Set a locale for message strings.
Controls the behaviour of
.Xr catopen 3
and internationalization tools.
.It Dv LC_MONETARY
Set a locale for formatting monetary values;
this affects the
.Fn localeconv
function.
.It Dv LC_NUMERIC
Set a locale for formatting numbers.
This controls the formatting of decimal points
in input and output of floating point numbers
in functions such as
.Xr printf 3
and
.Xr scanf 3 ,
as well as values returned by
.Fn localeconv .
.It Dv LC_TIME
Set a locale for formatting dates and times using the
.Xr strftime 3
function.
.El
.Pp
Only three locales are defined by default,
the empty string
.Qq
which denotes the native environment, and the
.Qq C
and
.Qq POSIX
locales, which denote the C language environment.
A
.Fa locale
argument of
.Dv NULL
causes
.Fn setlocale
to return the current locale.
By default, C programs start in the
.Qq C
locale.
The only function in the library that sets the locale is
.Fn setlocale ;
the locale is never changed as a side effect of some other routine.
.Pp
The
.Fn localeconv
function returns a pointer to a structure
which provides parameters for formatting numbers,
especially currency values:
.Bd -literal -offset indent
struct lconv {
	char	*decimal_point;
	char	*thousands_sep;
	char	*grouping;
	char	*int_curr_symbol;
	char	*currency_symbol;
	char	*mon_decimal_point;
	char	*mon_thousands_sep;
	char	*mon_grouping;
	char	*positive_sign;
	char	*negative_sign;
	char	int_frac_digits;
	char	frac_digits;
	char	p_cs_precedes;
	char	p_sep_by_space;
	char	n_cs_precedes;
	char	n_sep_by_space;
	char	p_sign_posn;
	char	n_sign_posn;
	char	int_p_cs_precedes;
	char	int_p_sep_by_space;
	char	int_n_cs_precedes;
	char	int_n_sep_by_space;
	char	int_p_sign_posn;
	char	int_n_sign_posn;
};
.Ed
.Pp
The individual fields have the following meanings:
.Bl -tag -width mon_decimal_point
.It Fa decimal_point
The decimal point character, except for currency values.
.It Fa thousands_sep
The separator between groups of digits
before the decimal point, except for currency values.
.It Fa grouping
The sizes of the groups of digits, except for currency values.
This is a pointer to a vector of integers, each of size
.Li char ,
representing group size from low order digit groups
to high order (right to left).
The list may be terminated with 0 or
.Dv CHAR_MAX .
If the list is terminated with 0,
the last group size before the 0 is repeated to account for all the digits.
If the list is terminated with
.Dv CHAR_MAX ,
no more grouping is performed.
.It Fa int_curr_symbol
The standardized international currency symbol.
.It Fa currency_symbol
The local currency symbol.
.It Fa mon_decimal_point
The decimal point character for currency values.
.It Fa mon_thousands_sep
The separator for digit groups in currency values.
.It Fa mon_grouping
Like
.Fa grouping
but for currency values.
.It Fa positive_sign
The character used to denote non-negative currency values,
usually the empty string.
.It Fa negative_sign
The character used to denote negative currency values,
usually a minus sign.
.It Fa int_frac_digits
The number of digits after the decimal point
in an international-style currency value.
.It Fa frac_digits
The number of digits after the decimal point
in the local style for currency values.
.It Fa p_cs_precedes
1 if the currency symbol precedes the currency value
for non-negative values, 0 if it follows.
.It Fa p_sep_by_space
1 if a space is inserted between the currency symbol
and the currency value for non-negative values, 0 otherwise.
.It Fa n_cs_precedes
Like
.Fa p_cs_precedes
but for negative values.
.It Fa n_sep_by_space
Like
.Fa p_sep_by_space
but for negative values.
.It Fa p_sign_posn
The location of the
.Fa positive_sign
with respect to a non-negative quantity and the
.Fa currency_symbol ,
coded as follows:
.Pp
.Bl -tag -width 3n -compact
.It Li 0
Parentheses around the entire string.
.It Li 1
Before the string.
.It Li 2
After the string.
.It Li 3
Just before
.Fa currency_symbol .
.It Li 4
Just after
.Fa currency_symbol .
.El
.It Fa n_sign_posn
Like
.Fa p_sign_posn
but for negative currency values.
.It Fa int_p_cs_precedes
Like
.Fa p_cs_precedes
but for the international symbol.
.It Fa int_n_cs_precedes
Like
.Fa n_cs_precedes
but for the international symbol.
.It Fa int_p_sep_by_space
Like
.Fa p_sep_by_space
but for the international symbol.
.It Fa int_n_sep_by_space
Like
.Fa n_sep_by_space
but for the international symbol.
.It Fa int_p_sign_posn
Like
.Fa p_sign_posn
but for the international symbol.
.It Fa int_n_sign_posn
Like
.Fa n_sign_posn
but for the international symbol.
.El
.Pp
Unless mentioned above,
an empty string as a value for a field
indicates a zero length result or
a value that is not in the current locale.
A
.Dv CHAR_MAX
result similarly denotes an unavailable value.
.Sh RETURN VALUES
The
.Fn setlocale
function returns
.Dv NULL
and fails to change the locale
if the given combination of
.Fa category
and
.Fa locale
makes no sense.
The
.Fn localeconv
function returns a pointer to a static object
which may be altered by later calls to
.Fn setlocale
or
.Fn localeconv .
.\" .Sh FILES							XXX
.\" .Bl -tag -width /usr/share/locale/locale/category -compact	XXX
.\" .It Pa $PATH_LOCALE/\fIlocale\fP/\fIcategory\fP		XXX
.\" .It Pa /usr/share/locale/\fIlocale\fP/\fIcategory\fP	XXX
.\" locale file for the locale \fIlocale\fP			XXX
.\" and the category \fIcategory\fP.				XXX
.\" .El
.Sh SEE ALSO
.Xr mklocale 1 ,
.Xr catopen 3 ,
.Xr printf 3 ,
.Xr scanf 3 ,
.Xr strcoll 3 ,
.Xr strftime 3 ,
.Xr strxfrm 3
.Sh STANDARDS
The
.Fn setlocale
and
.Fn localeconv
functions conform to
.St -ansiC .
.Sh HISTORY
The
.Fn setlocale
and
.Fn localeconv
functions first appeared in
.Bx 4.4 .
.Sh BUGS
The current implementation supports only the
.Qq C
and
.Qq POSIX
locales for all but the
.Dv LC_CTYPE
locale.
.Pp
In spite of the gnarly currency support in
.Fn localeconv ,
the standards don't include any functions
for generalized currency formatting.
.Pp
.Dv LC_COLLATE
does not make sense for many languages.
Use of
.Dv LC_MONETARY
could lead to misleading results until we have a real time currency
conversion function.
.Dv LC_NUMERIC
and
.Dv LC_TIME
are personal choices and should not be wrapped up with the other categories.
@


1.18
log
@Mention LC_MESSAGES.

Input & okay (pre-lock) from jmc@@, sobrado@@ and stsp@@.
@
text
@d1 1
a1 1
.\"	$OpenBSD: setlocale.3,v 1.17 2014/12/11 20:24:05 schwarze Exp $
d36 1
a36 1
.Dd $Mdocdate: December 11 2014 $
d73 1
a73 1
.Fn strcoll
d75 1
a75 1
.Fn strxfrm .
a82 3
The real work is done by the
.Fn setrunelocale
function.
d98 1
a98 1
.Fn printf
d100 1
a100 1
.Fn scanf ,
d105 1
a105 1
.Fn strftime
d308 3
d312 1
@


1.17
log
@Fix previous:
As pointed out by stsp@@, LC_CTYPE *does* affect the ctype.h functions.
Use a wording similar to a suggestion by deraadt@@.
Feedback and OK jmc@@, OK stsp@@.
@
text
@d1 1
a1 1
.\"	$OpenBSD: setlocale.3,v 1.16 2014/12/09 15:32:23 schwarze Exp $
d36 1
a36 1
.Dd $Mdocdate: December 9 2014 $
d86 5
@


1.16
log
@LC_CTYPE has no effect on ctype(3), but on wctype(3); ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: setlocale.3,v 1.15 2014/07/14 07:22:07 pelikan Exp $
d36 1
a36 1
.Dd $Mdocdate: July 14 2014 $
d77 4
a80 3
Set a locale for the
.Xr wctype 3
functions.
@


1.15
log
@international currency locale rules as per POSIX.1-2008

required for libc++

ok guenther afresh1
@
text
@d1 1
a1 1
.\"	$OpenBSD: setlocale.3,v 1.14 2013/06/05 03:39:22 tedu Exp $
d36 1
a36 1
.Dd $Mdocdate: June 5 2013 $
d78 1
a78 1
.Xr ctype 3
@


1.14
log
@Use the fancy .In macro for includes. From Jan Klemkow. ok jmc schwarze
@
text
@d1 1
a1 1
.\"	$OpenBSD: setlocale.3,v 1.13 2011/03/09 01:27:37 schwarze Exp $
d36 1
a36 1
.Dd $Mdocdate: March 9 2011 $
d153 6
d245 24
@


1.13
log
@Stilistic improvement: use clean mdoc(7) .Qq enclosures rather than
(correct, but ugly) low-level roff(7) quoting of quote characters.

As a side effect, this avoids ugly formatting caused by a nasty mandoc(1)
bug with roff(7) quoting in mdoc(7) documents.  Of course, that bug
will ultimately get fixed as well, but that can't be done quickly.

Reported by Tim van der Molen <tbvdm at xs4all dot nl>
ok jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: setlocale.3,v 1.12 2007/05/31 19:19:29 jmc Exp $
d36 1
a36 1
.Dd $Mdocdate: May 31 2007 $
d44 1
a44 1
.Fd #include <locale.h>
@


1.12
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: setlocale.3,v 1.11 2005/08/12 18:31:43 jmc Exp $
d36 1
a36 1
.Dd $Mdocdate$
d108 1
a108 1
.Li "\&""\|""
d110 1
a110 1
.Li "\&""C""
d112 1
a112 1
.Li "\&""POSIX""
d122 1
a122 1
.Li "\&""C""
d293 1
a293 1
.Li "\&""C""
d295 1
a295 1
.Li "\&""POSIX""
@


1.11
log
@- add SEE ALSO section w/ xref for mklocale(1): from xsa@@
- whilst here, uncomment entries for other SEE ALSO pages
@
text
@d1 1
a1 1
.\"	$OpenBSD: setlocale.3,v 1.10 2004/10/01 04:08:45 jsg Exp $
d36 1
a36 1
.Dd June 9, 1993
@


1.10
log
@add some missing $, ok djm@@ 'That looks fine to me' millert@@
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d273 4
a276 3
.\" .Sh SEE ALSO
.\" .Xr strcoll 3 ,						XXX
.\" .Xr strxfrm 3						XXX
@


1.9
log
@more display/list fixes, and a little whitespace;
@
text
@d1 1
@


1.8
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@a65 1
.Pp
a155 1
.Pp
@


1.7
log
@Repairs, mostly removing hard sentence breaks.
@
text
@d17 1
a17 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
@


1.6
log
@formatting nits
@
text
@d85 2
a86 2
alphabetic or non-alphabetic characters,
and so on.  The real work is done by the
@


1.5
log
@fix some old macros that didn't get converted from man to mdoc
@
text
@d59 1
a59 1
.Sq locale
d171 1
a171 1
.Va char ,
d194 1
a194 1
The character used to denote nonnegative currency values,
d207 1
a207 1
for nonnegative values, 0 if it follows.
d210 1
a210 1
and the currency value for nonnegative values, 0 otherwise.
d222 1
a222 1
with respect to a nonnegative quantity and the
d225 1
d253 1
a253 1
.Sh "RETURN VALUES
d300 3
a302 1
locales for all but the LC_CTYPE locale.
@


1.4
log
@"SEE ALSO" -> SEE ALSO, missed these files before
@
text
@d116 1
a116 1
.LI "\&""POSIX""
@


1.3
log
@remove argument from .Os macros so value in /usr/share/tmac/mdoc/doc-common
is used instead; kwesterback@@home.com
@
text
@d277 1
a277 1
.\" .Sh "SEE ALSO
@


1.2
log
@s/NetBSD/OpenBSD
@
text
@d41 1
a41 1
.Os OpenBSD
@


1.1
log
@add man page from netbsd
@
text
@d41 1
a41 1
.Os NetBSD
@

