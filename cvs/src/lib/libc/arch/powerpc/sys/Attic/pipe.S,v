head	1.3;
access;
symbols
	OPENBSD_2_5:1.2.0.2
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.1.1.1.0.8
	OPENBSD_2_4_BASE:1.1.1.1
	OPENBSD_2_3:1.1.1.1.0.6
	OPENBSD_2_3_BASE:1.1.1.1
	OPENBSD_2_2:1.1.1.1.0.4
	OPENBSD_2_2_BASE:1.1.1.1
	OPENBSD_2_1:1.1.1.1.0.2
	OPENBSD_2_1_BASE:1.1.1.1
	powerpc_1:1.1.1.1;
locks; strict;
comment	@# @;


1.3
date	99.06.07.07.17.54;	author deraadt;	state dead;
branches;
next	1.2;

1.2
date	99.01.28.05.09.12;	author rahnds;	state Exp;
branches;
next	1.1;

1.1
date	96.12.21.20.42.23;	author rahnds;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	96.12.21.20.42.23;	author rahnds;	state Exp;
branches;
next	;


desc
@@


1.3
log
@replacement pipe() system call; copies data into place inside kernel, so
that EFAULT return value is possible
@
text
@/* int sigsuspend(int *mask) */

#include "SYS.h"

	.text
PREFIX(pipe)
	mr	5, 3		/* keep buf addr safe */
	sc
	cmpwi	0, 0
 	beq	ok
	b	PIC_PLT(_ASM_LABEL(cerror))

ok:	stw	3, 0(5)
	stw	4, 4(5)
	li	3, 0
	blr
@


1.2
log
@Preliminary version for PIC support. Builds and runs standard and profiled
just fine. pic version has been compiled, but without a ld.so has not been
tested. Needs binutils 2.9.1 or later to build pic version.
@
text
@@


1.1
log
@Initial revision
@
text
@d7 1
a7 1
	mr 5, 3		/* keep buf addr safe */
d9 7
a15 6
	cmpwi 0, 0
 	beq ok
 	b cerror
ok:	stw 3, 0(5)
	stw 4, 4(5)
	li 3, 0
@


1.1.1.1
log
@Check-in of powerpc library support.
NOTE: This will not work until the other pieces are checked in.
    This is primarily the NetBSD powerpc port, with modifications
	to support ELF.

@
text
@@
