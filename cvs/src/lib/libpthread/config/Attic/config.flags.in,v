head	1.2;
access;
symbols
	from_mysql_3_22_4:1.1.1.1 mit:1.1.1;
locks; strict;
comment	@# @;


1.2
date	98.07.21.14.21.04;	author peter;	state dead;
branches;
next	1.1;

1.1
date	98.07.21.13.19.01;	author peter;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.07.21.13.19.01;	author peter;	state Exp;
branches;
next	;


desc
@@


1.2
log
@cvs decided to fix COPYRIGHT and README by itself

remove general dross.
@
text
@# Since the real configure script runs from the config subdirectory,
# compensate here...
srctop= @@srctop@@
srcfoo= $(srctop)

prefix= @@prefix@@
exec_prefix= @@exec_prefix@@

cpu = @@target_cpu@@
os = @@target_os@@

MISSING_SYSCALLS = @@missing_syscalls@@
AVAILABLE_SYSCALLS = @@available_syscalls@@
SYSCALL_EXCEPTIONS = @@SYSCALL_EXCEPTIONS@@
HAVE_SYSCALL_TEMPLATE = @@HAVE_SYSCALL_TEMPLATE@@

CC = @@CC@@
CXX = @@CXX@@
CPP = @@CPP@@
SHELL = /bin/sh
RANLIB = @@RANLIB@@
# Should use autoconf to find these.  Currently our makefiles are inconsistent.
#AR = ar
#AS = gas
#LD = gld

install-dirs:
	for d in $(INSTALL_PATH) $(BINDIR) $(LIBDIR) $(INCDIR) ; do \
	  test -d $(DESTDIR)$$d || mkdir $(DESTDIR)$$d || exit 1 ; \
	done

config.status: @@srcdir@@/configure
	cd ${.CURDIR} && $(SHELL) config.status --recheck
config.flags: config.status @@srcdir@@/config.flags.in
	cd ${.CURDIR} && $(SHELL) config.status

realclean: clean
	cd tests && $(MAKE) realclean && cd ..
	rm -f $(LINKS) config.status config.flags config.cache \
		Makefile GNUmakefile

types=$(.CURDIR)/include/pthread/ac-types.h
$(types) : config.h
	echo '#ifndef pthread_size_t'			>  $(types).new
	egrep '^#define pthread_' $(.CURDIR)/config.h	>> $(types).new
	echo '#endif'					>> $(types).new
	mv -f $(types).new $(types)

config=$(.CURDIR)/include/pthread/config.h
$(config) : config.h
	echo '#ifndef _SYS___CONFIG_H_'              >  $(config).new
	echo '#define _SYS___CONFIG_H_'              >>  $(config).new
	-egrep '^#define _OS_HAS' $(.CURDIR)/config.h >> $(config).new
	echo '#endif'  	                             >>  $(config).new
	mv -f $(config).new $(config)

paths=$(.CURDIR)/include/pthread/paths.h
$(paths) : config.h
	echo '#ifndef _SYS___PATHS_H_'			>  $(paths).new
	echo '#define _SYS___PATHS_H_'			>>  $(paths).new
	egrep '^#define _PATH' $(.CURDIR)/config.h	>> $(paths).new
	echo '#endif'					>> $(paths).new
	mv -f $(paths).new $(paths)

all-tests: all-lib
	cd ${.CURDIR}/tests && $(MAKE) all
check: all-lib
	cd ${.CURDIR}/tests && $(MAKE) check
all : all-lib all-bin

install-bin: all-bin install-dirs
	for x in $(SCRIPTS) ; do \
	  install $$x $(DESTDIR)$(BINDIR); \
	done

install-include: install-dirs
	(cd ${srcdir}/include && tar chf - .)|(cd $(DESTDIR)$(INCDIR) && tar xf -)
	if [ -d config ]; then true; else \
	(cd ${.CURDIR}/include && tar chf - .)|(cd $(DESTDIR)$(INCDIR) && tar xf -); fi
	(cd $(DESTDIR)$(INCDIR) && find . \( -name CVS -o -name \*~ \) -print | xargs rm -rf)
@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@Complete initial import from mySQL 3.22.4 (mit-pthreads/).
Lots of dross to move and remove yet.

At minimum:
o	remove GNU config and GNU Makefiles
o	build arch directory and migrate away machdep/
o	rebuild BSD Makefiles
o	move notes etc. into doc/

@
text
@@
