head	1.2;
access;
symbols
	OPENBSD_2_4:1.1.1.1.0.2
	OPENBSD_2_4_BASE:1.1.1.1
	from_mysql_3_22_4:1.1.1.1
	mit:1.1.1;
locks; strict;
comment	@ * @;


1.2
date	99.03.10.08.53.17;	author d;	state dead;
branches;
next	1.1;

1.1
date	98.07.21.13.19.11;	author peter;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.07.21.13.19.11;	author peter;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Goodbye, MIT pthreads... you were a handy reference implementation
@
text
@/* debug_out.h - macros to use for debugging prints in places where calls
                 to printf() and gang are ill-advised. */

#ifdef PTHREAD_DEBUGGING
#define PTHREAD_DEBUG_WriteStr(S) (void)machdep_sys_write(2,S,strlen(S))
#define PTHREAD_DEBUG_WriteInt32Hex(X)				\
  { char _xbuf[8]; int _temp = (int)(X), _temp2;		\
    _temp2 = ((_temp>>28)&0xf);					\
    _xbuf[0] = (_temp2<10)? (_temp2+'0'): ((_temp2-10)+'a');	\
    _temp2 = ((_temp>>24)&0xf);					\
    _xbuf[1] = (_temp2<10)? (_temp2+'0'): ((_temp2-10)+'a');	\
    _temp2 = ((_temp>>20)&0xf);					\
    _xbuf[2] = (_temp2<10)? (_temp2+'0'): ((_temp2-10)+'a');	\
    _temp2 = ((_temp>>16)&0xf);					\
    _xbuf[3] = (_temp2<10)? (_temp2+'0'): ((_temp2-10)+'a');	\
    _temp2 = ((_temp>>12)&0xf);					\
    _xbuf[4] = (_temp2<10)? (_temp2+'0'): ((_temp2-10)+'a');	\
    _temp2 = ((_temp>>8)&0xf);					\
    _xbuf[5] = (_temp2<10)? (_temp2+'0'): ((_temp2-10)+'a');	\
    _temp2 = ((_temp>>4)&0xf);					\
    _xbuf[6] = (_temp2<10)? (_temp2+'0'): ((_temp2-10)+'a');	\
    _temp2 = (_temp&0xf);					\
    _xbuf[7] = (_temp2<10)? (_temp2+'0'): ((_temp2-10)+'a');	\
    (void)machdep_sys_write(2,_xbuf,8);				\
  }
#ifdef __alpha
#define PTHREAD_DEBUG_WriteInt64Hex(X)				\
  { long _tempX = (long)(X),_tempY;				\
    _tempY=((_tempX>>32)&0xffffffff);				\
    PTHREAD_DEBUG_WriteInt32Hex(_tempY);			\
    _tempY=(_tempX&0xffffffff);					\
    PTHREAD_DEBUG_WriteInt32Hex(_tempY);			\
  }
#define PTHREAD_DEBUG_WritePointer(X) PTHREAD_DEBUG_WriteInt64Hex(X)
#else
#define PTHREAD_DEBUG_WriteInt64Hex(X) PTHREAD_DEBUG_WriteInt32Hex(X)
#define PTHREAD_DEBUG_WritePointer(X) PTHREAD_DEBUG_WriteInt32Hex(X)
#endif /* __alpha */
#else /* ! PTHREAD_DEBUGGING */
#define PTHREAD_DEBUG_WriteStr(S)
#define PTHREAD_DEBUG_WriteInt32Hex(X)
#define PTHREAD_DEBUG_WriteInt64HeX(X)
#define PTHREAD_DEBUG_WritePointer(X)
#endif /* PTHREAD_DEBUGGING */
@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@Complete initial import from mySQL 3.22.4 (mit-pthreads/).
Lots of dross to move and remove yet.

At minimum:
o	remove GNU config and GNU Makefiles
o	build arch directory and migrate away machdep/
o	rebuild BSD Makefiles
o	move notes etc. into doc/

@
text
@@
