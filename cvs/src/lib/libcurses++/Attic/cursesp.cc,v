head	1.5;
access;
symbols
	OPENBSD_3_7:1.4.0.20
	OPENBSD_3_7_BASE:1.4
	OPENBSD_3_6:1.4.0.18
	OPENBSD_3_6_BASE:1.4
	OPENBSD_3_5:1.4.0.16
	OPENBSD_3_5_BASE:1.4
	OPENBSD_3_4:1.4.0.14
	OPENBSD_3_4_BASE:1.4
	OPENBSD_3_3:1.4.0.12
	OPENBSD_3_3_BASE:1.4
	OPENBSD_3_2:1.4.0.10
	OPENBSD_3_2_BASE:1.4
	OPENBSD_3_1:1.4.0.8
	OPENBSD_3_1_BASE:1.4
	OPENBSD_3_0:1.4.0.6
	OPENBSD_3_0_BASE:1.4
	OPENBSD_2_9:1.4.0.4
	OPENBSD_2_9_BASE:1.4
	OPENBSD_2_8:1.4.0.2
	OPENBSD_2_8_BASE:1.4
	OPENBSD_2_7:1.3.0.2
	OPENBSD_2_7_BASE:1.3
	OPENBSD_2_6:1.2.0.2
	OPENBSD_2_6_BASE:1.2;
locks; strict;
comment	@// @;


1.5
date	2005.04.18.16.06.44;	author millert;	state dead;
branches;
next	1.4;

1.4
date	2000.07.24.04.06.11;	author millert;	state Exp;
branches;
next	1.3;

1.3
date	99.11.28.17.45.31;	author millert;	state Exp;
branches;
next	1.2;

1.2
date	99.05.17.03.04.08;	author millert;	state Exp;
branches;
next	1.1;

1.1
date	99.05.09.00.21.14;	author millert;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Remove libcurses++, it contains GPL'd code (cursesw.cc) and nothing uses it.
@
text
@// * this is for making emacs happy: -*-Mode: C++;-*-
/****************************************************************************
 * Copyright (c) 1998,1999,2000 Free Software Foundation, Inc.              *
 *                                                                          *
 * Permission is hereby granted, free of charge, to any person obtaining a  *
 * copy of this software and associated documentation files (the            *
 * "Software"), to deal in the Software without restriction, including      *
 * without limitation the rights to use, copy, modify, merge, publish,      *
 * distribute, distribute with modifications, sublicense, and/or sell       *
 * copies of the Software, and to permit persons to whom the Software is    *
 * furnished to do so, subject to the following conditions:                 *
 *                                                                          *
 * The above copyright notice and this permission notice shall be included  *
 * in all copies or substantial portions of the Software.                   *
 *                                                                          *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS  *
 * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF               *
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.   *
 * IN NO EVENT SHALL THE ABOVE COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,   *
 * DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR    *
 * OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR    *
 * THE USE OR OTHER DEALINGS IN THE SOFTWARE.                               *
 *                                                                          *
 * Except as contained in this notice, the name(s) of the above copyright   *
 * holders shall not be used in advertising or otherwise to promote the     *
 * sale, use or other dealings in this Software without prior written       *
 * authorization.                                                           *
 ****************************************************************************/

/****************************************************************************
 *   Author: Juergen Pfeifer <juergen.pfeifer@@gmx.net> 1993,1997            *
 ****************************************************************************/

#include "cursesp.h"
#include "internal.h"
#include <string.h>

MODULE_ID("$From: cursesp.cc,v 1.16 2000/07/15 21:08:13 tom Exp $")

NCursesPanel* NCursesPanel::dummy = (NCursesPanel*)0;

void NCursesPanel::init() {
  p = ::new_panel(w);
  if (!p)
    OnError(ERR);

  UserHook* hook = new UserHook;
  hook->m_user  = NULL;
  hook->m_back  = this;
  hook->m_owner = p;
  ::set_panel_userptr(p, (void *)hook);
}

NCursesPanel::~NCursesPanel() {
  UserHook* hook = (UserHook*)::panel_userptr(p);
  assert(hook != 0 && hook->m_back==this && hook->m_owner==p);
  delete hook;
  ::del_panel(p);
  ::update_panels();
}

void
NCursesPanel::redraw() {
  PANEL *pan;

  pan = ::panel_above(NULL);
  while (pan) {
    ::touchwin(panel_window(pan));
    pan = ::panel_above(pan);
  }
  ::update_panels();
  ::doupdate();
}

int
NCursesPanel::refresh() {
  ::update_panels();
  return doupdate();
}

int
NCursesPanel::noutrefresh() {
  ::update_panels();
  return OK;
}

void
NCursesPanel::boldframe(const char *title, const char* btitle) {
  standout();
  frame(title, btitle);
  standend();
}

void
NCursesPanel::frame(const char *title,const char *btitle) {
  int err = OK;
  if (!title && !btitle) {
    err = box();
  }
  else {
    err = box();
    if (err==OK)
      label(title,btitle);
  }
  OnError(err);
}

void
NCursesPanel::label(const char *tLabel, const char *bLabel) {
  if (tLabel)
    centertext(0,tLabel);
  if (bLabel)
    centertext(maxy(),bLabel);
}

void
NCursesPanel::centertext(int row,const char *label) {
  if (label) {
    int x = (maxx() - strlen(label)) / 2;
    if (x<0)
      x=0;
    OnError(addstr(row, x, label, width()));
  }
}
@


1.4
log
@Update to ncurses-5.1-20000722
@
text
@@


1.3
log
@update to ncurses-5.0-19991127
@
text
@d3 1
a3 1
 * Copyright (c) 1998,1999 Free Software Foundation, Inc.                   *
d36 1
d38 1
a38 1
MODULE_ID("$From: cursesp.cc,v 1.15 1999/10/30 23:59:37 tom Exp $")
d46 1
a46 1
  
d52 1
a52 1
}  
d65 1
a65 1
  
d99 1
a99 1
  } 
d103 1
a103 1
      label(title,btitle); 
d110 1
a110 1
  if (tLabel) 
d112 1
a112 1
  if (bLabel) 
@


1.2
log
@ncurses-4.2-990516; no code changes
@
text
@d3 1
a3 1
 * Copyright (c) 1998 Free Software Foundation, Inc.                        *
d37 1
a37 1
MODULE_ID("$From: cursesp.cc,v 1.14 1999/05/16 17:30:51 juergen Exp $")
d55 1
a55 1
  assert(hook && hook->m_back==this && hook->m_owner==p);
@


1.1
log
@c++ clasess for ncurses
@
text
@d31 1
a31 1
 *   Author: Juergen Pfeifer <Juergen.Pfeifer@@T-Online.de> 1993,1997        *
d37 1
a37 1
MODULE_ID("$Id: cursesp.cc,v 1.12 1998/11/10 18:29:48 juergen Exp $")
@

