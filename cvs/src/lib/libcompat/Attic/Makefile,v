head	1.15;
access;
symbols
	OPENBSD_5_4:1.14.0.4
	OPENBSD_5_4_BASE:1.14
	OPENBSD_5_3:1.14.0.2
	OPENBSD_5_3_BASE:1.14
	OPENBSD_5_2:1.13.0.12
	OPENBSD_5_2_BASE:1.13
	OPENBSD_5_1_BASE:1.13
	OPENBSD_5_1:1.13.0.10
	OPENBSD_5_0:1.13.0.8
	OPENBSD_5_0_BASE:1.13
	OPENBSD_4_9:1.13.0.6
	OPENBSD_4_9_BASE:1.13
	OPENBSD_4_8:1.13.0.4
	OPENBSD_4_8_BASE:1.13
	OPENBSD_4_7:1.13.0.2
	OPENBSD_4_7_BASE:1.13
	OPENBSD_4_6:1.12.0.18
	OPENBSD_4_6_BASE:1.12
	OPENBSD_4_5:1.12.0.14
	OPENBSD_4_5_BASE:1.12
	OPENBSD_4_4:1.12.0.12
	OPENBSD_4_4_BASE:1.12
	OPENBSD_4_3:1.12.0.10
	OPENBSD_4_3_BASE:1.12
	OPENBSD_4_2:1.12.0.8
	OPENBSD_4_2_BASE:1.12
	OPENBSD_4_1:1.12.0.6
	OPENBSD_4_1_BASE:1.12
	OPENBSD_4_0:1.12.0.4
	OPENBSD_4_0_BASE:1.12
	OPENBSD_3_9:1.12.0.2
	OPENBSD_3_9_BASE:1.12
	OPENBSD_3_8:1.11.0.10
	OPENBSD_3_8_BASE:1.11
	OPENBSD_3_7:1.11.0.8
	OPENBSD_3_7_BASE:1.11
	OPENBSD_3_6:1.11.0.6
	OPENBSD_3_6_BASE:1.11
	OPENBSD_3_5:1.11.0.4
	OPENBSD_3_5_BASE:1.11
	OPENBSD_3_4:1.11.0.2
	OPENBSD_3_4_BASE:1.11
	OPENBSD_3_3:1.7.0.6
	OPENBSD_3_3_BASE:1.7
	OPENBSD_3_2:1.7.0.4
	OPENBSD_3_2_BASE:1.7
	OPENBSD_3_1:1.7.0.2
	OPENBSD_3_1_BASE:1.7
	OPENBSD_3_0:1.5.0.20
	OPENBSD_3_0_BASE:1.5
	OPENBSD_2_9:1.5.0.18
	OPENBSD_2_9_BASE:1.5
	OPENBSD_2_8:1.5.0.16
	OPENBSD_2_8_BASE:1.5
	OPENBSD_2_7:1.5.0.14
	OPENBSD_2_7_BASE:1.5
	OPENBSD_2_6:1.5.0.12
	OPENBSD_2_6_BASE:1.5
	OPENBSD_2_5:1.5.0.10
	OPENBSD_2_5_BASE:1.5
	OPENBSD_2_4:1.5.0.8
	OPENBSD_2_4_BASE:1.5
	OPENBSD_2_3:1.5.0.6
	OPENBSD_2_3_BASE:1.5
	OPENBSD_2_2:1.5.0.4
	OPENBSD_2_2_BASE:1.5
	OPENBSD_2_1:1.5.0.2
	OPENBSD_2_1_BASE:1.5
	OPENBSD_2_0:1.3.0.2
	OPENBSD_2_0_BASE:1.3
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.15
date	2013.12.04.22.58.24;	author deraadt;	state dead;
branches;
next	1.14;

1.14
date	2012.08.02.13.38.38;	author okan;	state Exp;
branches;
next	1.13;

1.13
date	2009.10.28.00.04.26;	author deraadt;	state Exp;
branches;
next	1.12;

1.12
date	2005.11.24.20.49.16;	author deraadt;	state Exp;
branches;
next	1.11;

1.11
date	2003.05.10.04.34.19;	author millert;	state Exp;
branches;
next	1.10;

1.10
date	2003.05.08.23.26.30;	author millert;	state Exp;
branches;
next	1.9;

1.9
date	2003.05.08.23.21.36;	author millert;	state Exp;
branches;
next	1.8;

1.8
date	2003.05.08.23.15.02;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	2002.02.16.01.56.03;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	2002.02.16.01.49.38;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	97.04.27.20.56.08;	author millert;	state Exp;
branches;
next	1.4;

1.4
date	96.12.08.15.22.25;	author downsj;	state Exp;
branches;
next	1.3;

1.3
date	96.08.21.02.31.17;	author downsj;	state Exp;
branches;
next	1.2;

1.2
date	96.07.24.05.39.10;	author downsj;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.42.33;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.42.33;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.15
log
@express final disapproval of the interfaces in libcompat, such as
them ftime(), gtty(), stty(), re_comp(), cuserid() and others.
Discussion and ongoing work to fix the ports tree from many, especially
naddy.
ok naddy
[There is a bit more cleanup possible after that, but this is considered
the current safe step]
@
text
@#	$OpenBSD: Makefile,v 1.14 2012/08/02 13:38:38 okan Exp $
#	$NetBSD: Makefile,v 1.15 1995/09/07 07:17:53 jtc Exp $

LIB=	compat
AINC=	-I${.CURDIR}/../libc/arch/${MACHINE_ARCH}
.if defined(DESTDIR)
AINC+=	-nostdinc -idirafter ${DESTDIR}/usr/include
.endif
NOPIC=	nopic

.PATH:	${.CURDIR}/4.1/${MACHINE_ARCH} ${.CURDIR}/4.1 \
	${.CURDIR}/4.3/${MACHINE_ARCH} ${.CURDIR}/4.3 \
	${.CURDIR}/4.4/${MACHINE_ARCH} ${.CURDIR}/4.4 \
	${.CURDIR}/regexp

# compat 4.1 sources
SRCS=	gtty.c ftime.c stty.c

.if (${MACHINE} == "vax")
# missing: (for vax) reset.s
.endif

MAN+=	ftime.3 stty.3

MLINKS+=stty.3 gtty.3

# compat 4.3 sources
# missing: sibuf.c sobuf.c strout.c
SRCS+=	regex.c rexec.c
SRCS+=	setrgid.c setruid.c

MAN+=	re_comp.3 rexec.3 setruid.3

MLINKS+=re_comp.3 re_exec.3
MLINKS+=setruid.3 setrgid.3

# compat 4.4 sources
SRCS+=	cuserid.c
MAN+=	cuserid.3


# regexp sources
SRCS+=	regerror.c regexp.c regsub.c
HDRS+=	regexp/regexp.h
MAN+=	regexp.3

includes:
	@@cd ${.CURDIR}; for i in $(HDRS); do \
	    j="cmp -s $$i ${DESTDIR}/usr/include/`basename $$i` || \
		${INSTALL} ${INSTALL_COPY} -o ${BINOWN} -g ${BINGRP} -m 444 $$i \
		${DESTDIR}/usr/include"; \
	    echo $$j; \
	    eval "$$j"; \
	done

.include <bsd.lib.mk>
@


1.14
log
@remove leftover NOLINT, WANTLINT, LINTFLAGS, LOBJ vars and lint targets.

ok guenther@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.13 2009/10/28 00:04:26 deraadt Exp $
@


1.13
log
@Do not need -DLIBC_SCCS anymore
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.12 2005/11/24 20:49:16 deraadt Exp $
a4 1
WANTLINT=
@


1.12
log
@use WANTLINT= (on all architectures)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.11 2003/05/10 04:34:19 millert Exp $
a5 1
CFLAGS+=-DLIBC_SCCS -DSYSLIBC_SCCS
@


1.11
log
@Somehow the setr[ug]id() addition didn't get committed here.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 2002/02/16 01:56:03 deraadt Exp $
d5 1
@


1.10
log
@move insque(3) and remque(3) from libcompat -> libc; they are now POSIX
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.9 2003/05/08 23:21:36 millert Exp $
d31 1
d33 1
a33 1
MAN+=	re_comp.3 rexec.3
d36 1
@


1.9
log
@move lsearch(3) and insque(3) from libcompat -> libc; they are now POSIX
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 2003/05/08 23:15:02 millert Exp $
a30 1
SRCS+=	insque.c remque.c
d32 1
a32 1
MAN+=	insque.3 re_comp.3 rexec.3
a33 1
MLINKS+=insque.3 remque.3
@


1.8
log
@{e,f,g}cvt() are no longer missing.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 2002/02/16 01:56:03 deraadt Exp $
d30 1
a30 1
SRCS+=	lsearch.c regex.c rexec.c
d33 1
a33 1
MAN+=	insque.3 lsearch.3 re_comp.3 rexec.3
a35 1
MLINKS+=lsearch.3 lfind.3
@


1.7
log
@zap zap zap; miod
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.6 2002/02/16 01:49:38 deraadt Exp $
d29 1
a29 1
# missing: ecvt.c gcvt.c sibuf.c sobuf.c strout.c
a32 1
# missing: ecvt.0
a34 1
#MLINKS+=ecvt.3 fcvt.3 ecvt.3 gcvt.3
@


1.6
log
@getpw(3) goes; miod
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.5 1997/04/27 20:56:08 millert Exp $
a17 1
# missing: tell.c vlimit.c vtimes.c
d24 1
a24 1
MAN+=	ftime.3 stty.3 vlimit.3 vtimes.3
a39 1

@


1.5
log
@COPY -> INSTALL_COPY and STRIP -> INSTALL_STRIP
This fixes namespace problems where STRIP is sometimes used as
the name of the strip(1) to use and other times used as
the flag to send install(1) when stripping (or not).
COPY doesn't have this problem (yet) but was poorly named.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 1996/12/08 15:22:25 downsj Exp $
d18 1
a18 1
# missing: getpw.c tell.c vlimit.c vtimes.c
d25 1
a25 1
MAN+=	ftime.3 getpw.3 stty.3 vlimit.3 vtimes.3
@


1.4
log
@install -> ${INSTALL}, -c -> ${COPY}
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.3 1996/08/21 02:31:17 downsj Exp $
d56 1
a56 1
		${INSTALL} ${COPY} -o ${BINOWN} -g ${BINGRP} -m 444 $$i \
@


1.3
log
@cfree moved to libc
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.2 1996/07/24 05:39:10 downsj Exp $
d56 1
a56 1
		install -c -o ${BINOWN} -g ${BINGRP} -m 444 $$i \
@


1.2
log
@Prevent the v8 style regexp library from clashing with the POSIX regex.

Inspired by the changes to BSD/OS (and the bug they caught), but I didn't
go and look at the BSD/OS sources.
@
text
@d1 1
a1 1
#	$OpenBSD$
d31 1
a31 1
SRCS+=	cfree.c lsearch.c regex.c rexec.c
@


1.1
log
@Initial revision
@
text
@d1 1
d50 1
d52 9
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
