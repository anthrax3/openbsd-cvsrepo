head	1.25;
access;
symbols
	OPENBSD_6_1:1.25.0.6
	OPENBSD_6_1_BASE:1.25
	OPENBSD_6_0:1.25.0.2
	OPENBSD_6_0_BASE:1.25
	OPENBSD_5_9:1.24.0.10
	OPENBSD_5_9_BASE:1.24
	OPENBSD_5_8:1.24.0.12
	OPENBSD_5_8_BASE:1.24
	OPENBSD_5_7:1.24.0.4
	OPENBSD_5_7_BASE:1.24
	OPENBSD_5_6:1.24.0.8
	OPENBSD_5_6_BASE:1.24
	OPENBSD_5_5:1.24.0.6
	OPENBSD_5_5_BASE:1.24
	OPENBSD_5_4:1.24.0.2
	OPENBSD_5_4_BASE:1.24
	OPENBSD_5_3:1.23.0.2
	OPENBSD_5_3_BASE:1.23
	OPENBSD_5_2:1.22.0.2
	OPENBSD_5_2_BASE:1.22
	OPENBSD_5_1_BASE:1.20
	OPENBSD_5_1:1.20.0.10
	OPENBSD_5_0:1.20.0.8
	OPENBSD_5_0_BASE:1.20
	OPENBSD_4_9:1.20.0.6
	OPENBSD_4_9_BASE:1.20
	OPENBSD_4_8:1.20.0.4
	OPENBSD_4_8_BASE:1.20
	OPENBSD_4_7:1.20.0.2
	OPENBSD_4_7_BASE:1.20
	OPENBSD_4_6:1.19.0.14
	OPENBSD_4_6_BASE:1.19
	OPENBSD_4_5:1.19.0.10
	OPENBSD_4_5_BASE:1.19
	OPENBSD_4_4:1.19.0.8
	OPENBSD_4_4_BASE:1.19
	OPENBSD_4_3:1.19.0.6
	OPENBSD_4_3_BASE:1.19
	OPENBSD_4_2:1.19.0.4
	OPENBSD_4_2_BASE:1.19
	OPENBSD_4_1:1.19.0.2
	OPENBSD_4_1_BASE:1.19
	OPENBSD_4_0:1.18.0.2
	OPENBSD_4_0_BASE:1.18
	OPENBSD_3_9:1.17.0.2
	OPENBSD_3_9_BASE:1.17
	OPENBSD_3_8:1.15.0.12
	OPENBSD_3_8_BASE:1.15
	OPENBSD_3_7:1.15.0.10
	OPENBSD_3_7_BASE:1.15
	OPENBSD_3_6:1.15.0.8
	OPENBSD_3_6_BASE:1.15
	OPENBSD_3_5:1.15.0.6
	OPENBSD_3_5_BASE:1.15
	OPENBSD_3_4:1.15.0.4
	OPENBSD_3_4_BASE:1.15
	OPENBSD_3_3:1.15.0.2
	OPENBSD_3_3_BASE:1.15
	OPENBSD_3_2:1.14.0.4
	OPENBSD_3_2_BASE:1.14
	OPENBSD_3_1:1.14.0.2
	OPENBSD_3_1_BASE:1.14
	OPENBSD_3_0:1.13.0.8
	OPENBSD_3_0_BASE:1.13
	OPENBSD_2_9:1.13.0.6
	OPENBSD_2_9_BASE:1.13
	OPENBSD_2_8:1.13.0.4
	OPENBSD_2_8_BASE:1.13
	OPENBSD_2_7:1.13.0.2
	OPENBSD_2_7_BASE:1.13
	OPENBSD_2_6:1.10.0.2
	OPENBSD_2_6_BASE:1.10
	OPENBSD_2_5:1.9.0.6
	OPENBSD_2_5_BASE:1.9
	OPENBSD_2_4:1.9.0.4
	OPENBSD_2_4_BASE:1.9
	OPENBSD_2_3:1.9.0.2
	OPENBSD_2_3_BASE:1.9
	OPENBSD_2_2:1.8.0.4
	OPENBSD_2_2_BASE:1.8
	OPENBSD_2_1:1.8.0.2
	OPENBSD_2_1_BASE:1.8
	OPENBSD_2_0:1.6.0.2
	OPENBSD_2_0_BASE:1.6
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.25
date	2016.03.30.06.38.42;	author jmc;	state Exp;
branches;
next	1.24;
commitid	LN9ijdk9SEnzWAbM;

1.24
date	2013.06.19.03.51.30;	author lteo;	state Exp;
branches;
next	1.23;

1.23
date	2012.08.02.13.38.39;	author okan;	state Exp;
branches;
next	1.22;

1.22
date	2012.07.16.08.55.48;	author giovanni;	state Exp;
branches;
next	1.21;

1.21
date	2012.05.25.01.58.08;	author lteo;	state Exp;
branches;
next	1.20;

1.20
date	2009.08.13.19.54.58;	author jmc;	state Exp;
branches;
next	1.19;

1.19
date	2006.09.18.18.18.17;	author jmc;	state Exp;
branches;
next	1.18;

1.18
date	2006.03.27.01.46.59;	author deraadt;	state Exp;
branches;
next	1.17;

1.17
date	2005.11.24.20.49.20;	author deraadt;	state Exp;
branches;
next	1.16;

1.16
date	2005.11.18.11.05.38;	author djm;	state Exp;
branches;
next	1.15;

1.15
date	2003.02.20.03.20.09;	author deraadt;	state Exp;
branches;
next	1.14;

1.14
date	2001.11.22.12.44.29;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2000.04.26.21.25.52;	author jakob;	state Exp;
branches;
next	1.12;

1.12
date	2000.04.13.05.55.19;	author itojun;	state Exp;
branches;
next	1.11;

1.11
date	99.11.17.05.15.19;	author millert;	state Exp;
branches;
next	1.10;

1.10
date	99.07.20.04.49.54;	author deraadt;	state Exp;
branches;
next	1.9;

1.9
date	98.02.26.13.49.51;	author niklas;	state Exp;
branches;
next	1.8;

1.8
date	97.04.27.20.56.13;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	96.12.08.15.22.30;	author downsj;	state Exp;
branches;
next	1.6;

1.6
date	96.08.03.07.10.32;	author niklas;	state Exp;
branches;
next	1.5;

1.5
date	96.06.18.16.26.20;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	96.06.10.07.23.24;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	96.05.06.21.44.25;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	96.03.04.15.47.13;	author mickey;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.43.01;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.43.01;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.25
log
@for some time now mandoc has not required MLINKS to function
correctly - logically complete that now by removing MLINKS from base;

authors need only to ensure there is an entry in NAME for any function/
util being added. MLINKS will still work, and remain for perl to ease
upgrades;

ok nicm (curses) bcook (ssl)
ok schwarze, who provided a lot of feedback and assistance
ok tb natano jung
@
text
@#	$OpenBSD: Makefile,v 1.24 2013/06/19 03:51:30 lteo Exp $
#	$NetBSD: Makefile,v 1.3 1996/05/10 21:54:24 cgd Exp $

LIB=	pcap
MAN=	pcap.3 pcap-filter.3

DEFS=	-DHAVE_SYS_IOCCOM_H -DHAVE_SYS_SOCKIO_H -DHAVE_ETHER_HOSTTON \
	-DHAVE_STRERROR -DHAVE_SOCKADDR_SA_LEN -DLBL_ALIGN -DHAVE_IFADDRS_H \
	-DINET6 -DHAVE_BSD_IEEE80211

CFLAGS+=-I. -I${.CURDIR} -Dyylval=pcap_yylval ${DEFS}

HDRS=	pcap.h pcap-namedb.h
SRCS=	pcap.c inet.c gencode.c optimize.c nametoaddr.c etherent.c \
	savefile.c bpf_filter.c bpf_image.c grammar.y scanner.l \
	pcap-bpf.c version.c fad-getad.c
.PATH:	${.CURDIR}/../../sys/net

CLEANFILES+= grammar.c scanner.c grammar.tab.h version.c

grammar.c: grammar.y
	${YACC.y} -ppcap_yy -b ${.TARGET:R} ${.ALLSRC}
	mv ${.TARGET:R}.tab.c ${.TARGET}

scanner.c: scanner.l grammar.c
	${LEX.l} -Ppcap_yy -o${.TARGET} ${.CURDIR}/scanner.l

version.c: ${.CURDIR}/VERSION
	@@rm -f $@@
	sed 's/.*/char pcap_version[] = "&";/' ${.CURDIR}/VERSION > $@@

includes:
	@@cd ${.CURDIR}; for i in $(HDRS); do \
	    j="cmp -s $$i ${DESTDIR}/usr/include/$$i || \
		${INSTALL} ${INSTALL_COPY} -o ${BINOWN} -g ${BINGRP} -m 444 $$i \
		${DESTDIR}/usr/include"; \
	    echo $$j; \
	    eval "$$j"; \
	done

.include <bsd.lib.mk>
@


1.24
log
@Do not install pcap-int.h to /usr/include as it is an internal library
header (pointed out by matthew@@).  Let only pflogd and tcpdump include
pcap-int.h directly since they need it for privilege separation.

"looks good" sthen
feedback/ok deraadt matthew millert
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.23 2012/08/02 13:38:39 okan Exp $
a5 26
MLINKS=	pcap.3 pcap_open_live.3 pcap.3 pcap_open_offline.3 \
        pcap.3 pcap_dump_open.3 pcap.3 pcap_lookupdev.3 pcap.3 \
        pcap_lookupnet.3 pcap.3 pcap_dispatch.3 pcap.3 pcap_loop.3 \
        pcap.3 pcap_dump.3 pcap.3 pcap_inject.3 pcap.3 pcap_compile.3 \
        pcap.3 pcap_setfilter.3 pcap.3 pcap_next.3 pcap.3 pcap_datalink.3 \
        pcap.3 pcap_snapshot.3 pcap.3 pcap_is_swapped.3 pcap.3 \
        pcap_major_version.3 pcap.3 pcap_minor_version.3 pcap.3 \
        pcap_stats.3 pcap.3 pcap_file.3 pcap.3 pcap_fileno.3 pcap.3 \
        pcap_get_selectable_fd.3 pcap.3 pcap_perror.3 pcap.3 pcap_geterr.3 \
        pcap.3 pcap_strerror.3 pcap.3 pcap_close.3 pcap.3 pcap_dump_close.3 \
	pcap.3 pcap_freecode.3 pcap.3 pcap_breakloop.3 \
	pcap.3 pcap_findalldevs.3 pcap.3 pcap_freealldevs.3 \
	pcap.3 pcap_getnonblock.3 pcap.3 pcap_setnonblock.3 \
	pcap.3 pcap_set_datalink.3 pcap.3 pcap_list_datalinks.3 \
	pcap.3 pcap_open_dead.3 pcap.3 pcap_lib_version.3 \
	pcap.3 pcap_datalink_val_to_name.3 \
	pcap.3 pcap_datalink_val_to_description.3 \
	pcap.3 pcap_datalink_name_to_val.3 pcap.3 pcap_dump_fopen.3 \
	pcap.3 pcap_sendpacket.3 pcap.3 pcap_next_ex.3 \
	pcap.3 pcap_setdirection.3 pcap.3 pcap_dump_file.3 \
	pcap.3 pcap_dump_ftell.3 pcap.3 pcap_fopen_offline.3 \
	pcap.3 pcap_dump_flush.3 pcap.3 pcap_create.3 \
	pcap.3 pcap_set_snaplen.3 pcap.3 pcap_set_promisc.3 \
	pcap.3 pcap_can_set_rfmon.3 pcap.3 pcap_set_rfmon.3 \
	pcap.3 pcap_set_timeout.3 pcap.3 pcap_set_buffer_size.3 \
	pcap.3 pcap_activate.3 pcap.3 pcap_statustostr.3
@


1.23
log
@remove leftover NOLINT, WANTLINT, LINTFLAGS, LOBJ vars and lint targets.

ok guenther@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.22 2012/07/16 08:55:48 giovanni Exp $
d39 1
a39 1
HDRS=	pcap.h pcap-int.h pcap-namedb.h
@


1.22
log
@
Add a man page describing pcap grammar
help from lteo@@, claudio, jmc@@
ok jmc@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.21 2012/05/25 01:58:08 lteo Exp $
a4 1
WANTLINT=
@


1.21
log
@Import a number of core functions from libpcap-1.2.0 while preserving
local changes: strncpy() -> strlcpy(), malloc(x * y) -> calloc(x, y),
exclude cross-platform cruft, etc.

The new functions are pcap_create(), pcap_set_snaplen(),
pcap_set_promisc(), pcap_can_set_rfmon(), pcap_set_rfmon(),
pcap_set_timeout(), pcap_set_buffer_size(), pcap_activate(), and
pcap_statustostr().

This diff was tested on amd64, i386, macppc, and sparc64, where
regression tests were done on various pcap-based ports (especially amd64
and i386 where regression tests were run on all pcap-based ports).
Testers also tried running pcap-based ports that they are familiar with
to ensure that there is no behavioral change.  tcpdump and pflogd in
base were also tested by different testers.  The new pcap_* functions
were tested with a proof-of-concept Snort 2.9 port for many months.

Thank you to everyone who helped test this diff and provided feedback:
haesbaert@@, sthen@@, matthew@@, gonzalo@@, brett@@, Rodolfo Gouveia,
Aaron Bieber, Markus Lude, and Ray Percival.

ok haesbaert sthen henning
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.20 2009/08/13 19:54:58 jmc Exp $
d6 1
a6 1
MAN=	pcap.3
@


1.20
log
@various MLINK fixes from Alan R. S. Bueno;
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.19 2006/09/18 18:18:17 jmc Exp $
d28 5
a32 1
	pcap.3 pcap_dump_flush.3
d36 1
a36 1
	-DINET6
@


1.19
log
@+MLINK pcap.3 pcap_get_selectable_fd.3

from okan demirmen
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.18 2006/03/27 01:46:59 deraadt Exp $
d27 2
a28 1
	pcap.3 pcap_dump_ftell.3 pcap.3 pcap_fopen_offline.3
@


1.18
log
@MLINK to new man pages
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.17 2005/11/24 20:49:20 deraadt Exp $
d15 2
a16 2
        pcap_perror.3 pcap.3 pcap_geterr.3 pcap.3 pcap_strerror.3 \
        pcap.3 pcap_close.3 pcap.3 pcap_dump_close.3 \
@


1.17
log
@use WANTLINT= (on all architectures)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.16 2005/11/18 11:05:38 djm Exp $
d24 4
a27 1
	pcap.3 pcap_datalink_name_to_val.3
@


1.16
log
@pull in the good bits of libpcap-0.9.4's API without the cross-platform
cruft. help from deraadt@@, mpf@@, jmc@@; ok mpf@@a

nb. this will break tcpdump unless it updated too
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.15 2003/02/20 03:20:09 deraadt Exp $
d5 1
@


1.15
log
@fix a variety of missing or wrong MLINKS
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.14 2001/11/22 12:44:29 espie Exp $
d16 8
a23 1
	pcap.3 pcap_freecode.3 
d34 1
a34 1
	pcap-bpf.c version.c
@


1.14
log
@Broken use of .IMPSRC in non-inference rule context
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.13 2000/04/26 21:25:52 jakob Exp $
d15 2
a16 1
        pcap.3 pcap_close.3 pcap.3 pcap_dump_close.3
@


1.13
log
@sync with libpcap v0.5
add support for INET6 (kame)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.12 2000/04/13 05:55:19 itojun Exp $
d32 1
a32 1
	${YACC.y} -ppcap_yy -b ${.TARGET:R} ${.IMPSRC}
d36 1
a36 1
	${LEX.l} -Ppcap_yy -o${.TARGET} ${.IMPSRC}
@


1.12
log
@use getifaddrs, to avoid copmlicated align constraint in SIOCGIFCONF.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.11 1999/11/17 05:15:19 millert Exp $
d18 2
a19 1
	-DHAVE_STRERROR -DHAVE_SOCKADDR_SA_LEN -DLBL_ALIGN -DHAVE_IFADDRS_H
@


1.11
log
@add MLINKs
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.10 1999/07/20 04:49:54 deraadt Exp $
d18 1
a18 1
	-DHAVE_STRERROR -DHAVE_SOCKADDR_SA_LEN -DLBL_ALIGN
@


1.10
log
@changes brought in from v0.4; started by brad, more by me, being tested by mts
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.9 1998/02/26 13:49:51 niklas Exp $
d6 10
@


1.9
log
@Enable YP ethers lookup
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 1997/04/27 20:56:13 millert Exp $
d7 2
a8 1
CFLAGS+=-I. -I${.CURDIR} -Dyylval=pcap_yylval -DHAVE_STRERROR -DHAVE_ETHER_HOSTTON
d10 3
a12 1
HDRS=	pcap.h pcap-namedb.h
d15 1
a15 1
	pcap-bpf.c
d18 1
a18 1
CLEANFILES+= grammar.c scanner.c grammar.tab.h
d20 1
a20 1
grammar.c:	grammar.y
d24 1
a24 1
scanner.c:	scanner.l grammar.c
d26 4
@


1.8
log
@COPY -> INSTALL_COPY and STRIP -> INSTALL_STRIP
This fixes namespace problems where STRIP is sometimes used as
the name of the strip(1) to use and other times used as
the flag to send install(1) when stripping (or not).
COPY doesn't have this problem (yet) but was poorly named.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 1996/12/08 15:22:30 downsj Exp $
d7 1
a7 1
CFLAGS+=-I. -I${.CURDIR} -Dyylval=pcap_yylval -DHAVE_STRERROR
@


1.7
log
@install -> ${INSTALL}, -c -> ${COPY}
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.6 1996/08/03 07:10:32 niklas Exp $
d27 1
a27 1
		${INSTALL} ${COPY} -o ${BINOWN} -g ${BINGRP} -m 444 $$i \
@


1.6
log
@We have strerror(3) available
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.5 1996/06/18 16:26:20 deraadt Exp $
d27 1
a27 1
		install -c -o ${BINOWN} -g ${BINGRP} -m 444 $$i \
@


1.5
log
@libpcap used yyparse(), which is bad; netbsd pr#2031; lukem@@supp.cpr.itg.telecom.com.au
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 1996/06/10 07:23:24 deraadt Exp $
d7 1
a7 1
CFLAGS+=-I. -I${.CURDIR} -Dyylval=pcap_yylval
@


1.4
log
@merge to latest libpcap
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.3 1996/05/06 21:44:25 deraadt Exp $
d7 1
a7 1
CFLAGS+=-I. -I${.CURDIR}
d15 8
a22 1
CLEANFILES+= grammar.c scanner.c y.tab.h
@


1.3
log
@hard-code the include installation path (mostly for speed)
@
text
@d1 2
a2 2
#	$OpenBSD: Makefile,v 1.2 1996/03/04 15:47:13 mickey Exp $
#	$NetBSD: Makefile,v 1.2 1996/04/29 20:32:24 jtc Exp $
d19 2
a20 2
	    cmp -s $$i ${DESTDIR}/usr/include/$$i || \
		{ j="install -c -o ${BINOWN} -g ${BINGRP} -m 444 $$i \
d22 2
a23 1
		echo $$j; $$j; } \
@


1.2
log
@Update to the latest LBL release.
@
text
@d1 2
a2 2
#	$OpenBSD$
#	$NetBSD: Makefile,v 1.1 1995/03/06 11:38:04 mycroft Exp $
d17 1
a17 1
beforeinstall:
@


1.1
log
@Initial revision
@
text
@d1 1
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@

