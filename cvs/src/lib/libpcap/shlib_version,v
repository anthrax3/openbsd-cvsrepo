head	1.17;
access;
symbols
	OPENBSD_6_1:1.17.0.4
	OPENBSD_6_1_BASE:1.17
	OPENBSD_6_0:1.15.0.2
	OPENBSD_6_0_BASE:1.15
	OPENBSD_5_9:1.14.0.8
	OPENBSD_5_9_BASE:1.14
	OPENBSD_5_8:1.14.0.10
	OPENBSD_5_8_BASE:1.14
	OPENBSD_5_7:1.14.0.2
	OPENBSD_5_7_BASE:1.14
	OPENBSD_5_6:1.14.0.6
	OPENBSD_5_6_BASE:1.14
	OPENBSD_5_5:1.14.0.4
	OPENBSD_5_5_BASE:1.14
	OPENBSD_5_4:1.13.0.6
	OPENBSD_5_4_BASE:1.13
	OPENBSD_5_3:1.13.0.4
	OPENBSD_5_3_BASE:1.13
	OPENBSD_5_2:1.13.0.2
	OPENBSD_5_2_BASE:1.13
	OPENBSD_5_1_BASE:1.12
	OPENBSD_5_1:1.12.0.16
	OPENBSD_5_0:1.12.0.14
	OPENBSD_5_0_BASE:1.12
	OPENBSD_4_9:1.12.0.12
	OPENBSD_4_9_BASE:1.12
	OPENBSD_4_8:1.12.0.10
	OPENBSD_4_8_BASE:1.12
	OPENBSD_4_7:1.12.0.6
	OPENBSD_4_7_BASE:1.12
	OPENBSD_4_6:1.12.0.8
	OPENBSD_4_6_BASE:1.12
	OPENBSD_4_5:1.12.0.4
	OPENBSD_4_5_BASE:1.12
	OPENBSD_4_4:1.12.0.2
	OPENBSD_4_4_BASE:1.12
	OPENBSD_4_3:1.11.0.8
	OPENBSD_4_3_BASE:1.11
	OPENBSD_4_2:1.11.0.6
	OPENBSD_4_2_BASE:1.11
	OPENBSD_4_1:1.11.0.4
	OPENBSD_4_1_BASE:1.11
	OPENBSD_4_0:1.11.0.2
	OPENBSD_4_0_BASE:1.11
	OPENBSD_3_9:1.10.0.2
	OPENBSD_3_9_BASE:1.10
	OPENBSD_3_8:1.8.0.6
	OPENBSD_3_8_BASE:1.8
	OPENBSD_3_7:1.8.0.4
	OPENBSD_3_7_BASE:1.8
	OPENBSD_3_6:1.8.0.2
	OPENBSD_3_6_BASE:1.8
	OPENBSD_3_5:1.7.0.2
	OPENBSD_3_5_BASE:1.7
	OPENBSD_3_4:1.6.0.4
	OPENBSD_3_4_BASE:1.6
	OPENBSD_3_3:1.6.0.2
	OPENBSD_3_3_BASE:1.6
	OPENBSD_3_2:1.5.0.4
	OPENBSD_3_2_BASE:1.5
	OPENBSD_3_1:1.5.0.2
	OPENBSD_3_1_BASE:1.5
	OPENBSD_3_0:1.4.0.8
	OPENBSD_3_0_BASE:1.4
	OPENBSD_2_9:1.4.0.6
	OPENBSD_2_9_BASE:1.4
	OPENBSD_2_8:1.4.0.4
	OPENBSD_2_8_BASE:1.4
	OPENBSD_2_7:1.4.0.2
	OPENBSD_2_7_BASE:1.4
	OPENBSD_2_6:1.3.0.2
	OPENBSD_2_6_BASE:1.3
	OPENBSD_2_5:1.2.0.12
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.2.0.10
	OPENBSD_2_4_BASE:1.2
	OPENBSD_2_3:1.2.0.8
	OPENBSD_2_3_BASE:1.2
	OPENBSD_2_2:1.2.0.6
	OPENBSD_2_2_BASE:1.2
	OPENBSD_2_1:1.2.0.4
	OPENBSD_2_1_BASE:1.2
	OPENBSD_2_0:1.2.0.2
	OPENBSD_2_0_BASE:1.2
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.17
date	2016.11.29.18.37.02;	author jca;	state Exp;
branches;
next	1.16;
commitid	00NMX9hK1kabwR2y;

1.16
date	2016.11.16.13.47.27;	author reyk;	state Exp;
branches;
next	1.15;
commitid	XyJooSdwV3dkETpz;

1.15
date	2016.04.06.08.02.56;	author jasper;	state Exp;
branches;
next	1.14;
commitid	5B5VobgACSkmC9RT;

1.14
date	2013.08.13.05.52.15;	author guenther;	state Exp;
branches;
next	1.13;

1.13
date	2012.05.25.01.58.08;	author lteo;	state Exp;
branches;
next	1.12;

1.12
date	2008.06.11.15.02.21;	author dtucker;	state Exp;
branches;
next	1.11;

1.11
date	2006.03.26.20.58.51;	author djm;	state Exp;
branches;
next	1.10;

1.10
date	2005.11.18.11.05.39;	author djm;	state Exp;
branches;
next	1.9;

1.9
date	2005.10.07.19.32.39;	author mpf;	state Exp;
branches;
next	1.8;

1.8
date	2004.07.13.21.03.35;	author marc;	state Exp;
branches;
next	1.7;

1.7
date	2004.01.26.02.20.24;	author fgsch;	state Exp;
branches;
next	1.6;

1.6
date	2002.12.03.06.39.39;	author millert;	state Exp;
branches;
next	1.5;

1.5
date	2002.03.23.01.33.16;	author frantzen;	state Exp;
branches;
next	1.4;

1.4
date	2000.04.27.13.25.37;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	99.07.20.04.49.56;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	96.07.12.13.19.13;	author mickey;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.43.02;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.43.02;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.17
log
@Stop exporting the eproto_db array, export a pointer to it instead.

tcpdump directly uses eproto_db even though it is not part of the
libpcap API.  This means that we can't freely add members to this array,
else ld.so complains about size mismatches.  Keep the data in a static
array instead and make it usable by tcpdump through a pointer whose size
won't change in the future.  A minor bump is enough here for ld.so to
stop complaining.

While here, mark _eproto_db and llc_db as const, as they are meant to
be.

Suggested by and ok deraadt@@
@
text
@major=8
minor=3
@


1.16
log
@Add new DLT_OPENFLOW link-type to allow using tcpdump to debug switch(4),
eg. tcpdump -y openflow -i switch0

Includes a minor bump for libpcap.

Feedback and OK rzalamena@@
@
text
@d2 1
a2 1
minor=2
@


1.15
log
@add two functions from libpcap-1.7.4 which are required by at least gopacket

ok lteo@@ "go for it" dlg@@
@
text
@d2 1
a2 1
minor=1
@


1.14
log
@Switch time_t, ino_t, clock_t, and struct kevent's ident and data
members to 64bit types.  Assign new syscall numbers for (almost
all) the syscalls that involve the affected types, including anything
with time_t, timeval, itimerval, timespec, rusage, dirent, stat,
or kevent arguments.  Add a d_off member to struct dirent and replace
getdirentries() with getdents(), thus immensely simplifying and
accelerating telldir/seekdir.  Build perl with -DBIG_TIME.

Bump the major on every single base library: the compat bits included
here are only good enough to make the transition; the T32 compat
option will be burned as soon as we've reached the new world are
are happy with the snapshots for all architectures.

DANGER: ABI incompatibility.  Updating to this kernel requires extra
work or you won't be able to login: install a snapshot instead.

Much assistance in fixing userland issues from deraadt@@ and tedu@@
and build assistance from todd@@ and otto@@
@
text
@d2 1
a2 1
minor=0
@


1.13
log
@Import a number of core functions from libpcap-1.2.0 while preserving
local changes: strncpy() -> strlcpy(), malloc(x * y) -> calloc(x, y),
exclude cross-platform cruft, etc.

The new functions are pcap_create(), pcap_set_snaplen(),
pcap_set_promisc(), pcap_can_set_rfmon(), pcap_set_rfmon(),
pcap_set_timeout(), pcap_set_buffer_size(), pcap_activate(), and
pcap_statustostr().

This diff was tested on amd64, i386, macppc, and sparc64, where
regression tests were done on various pcap-based ports (especially amd64
and i386 where regression tests were run on all pcap-based ports).
Testers also tried running pcap-based ports that they are familiar with
to ensure that there is no behavioral change.  tcpdump and pflogd in
base were also tested by different testers.  The new pcap_* functions
were tested with a proof-of-concept Snort 2.9 port for many months.

Thank you to everyone who helped test this diff and provided feedback:
haesbaert@@, sthen@@, matthew@@, gonzalo@@, brett@@, Rodolfo Gouveia,
Aaron Bieber, Markus Lude, and Ray Percival.

ok haesbaert sthen henning
@
text
@d1 1
a1 1
major=7
@


1.12
log
@Import vlan support from upstream libpcap.  This allows, eg, "tcpdump vla 3"
to work on a vlan parent interface.  ok mcbride@@, "commit it" deraadt@@
@
text
@d1 1
a1 1
major=6
@


1.11
log
@add remaining tcpdump.org libpcap 0.9 APIs, most notably
pcap_setdirection() (which depends on the kernel-side bpf changes
committed yesterday); ok canacar@@
@
text
@d1 1
a1 1
major=5
@


1.10
log
@pull in the good bits of libpcap-0.9.4's API without the cross-platform
cruft. help from deraadt@@, mpf@@, jmc@@; ok mpf@@a

nb. this will break tcpdump unless it updated too
@
text
@d1 1
a1 1
major=4
@


1.9
log
@Add Spanning Tree Protocol support.
Bump version to 3.1.
OK brad@@
@
text
@d1 2
a2 2
major=3
minor=1
@


1.8
log
@errno changes, lib major version bumps, and general flag day
To build you must:
cd /usr/src && make obj && make includes
cd lib/libc && make depend && make && NOMAN=1 sudo make install
cd /usr/src && make build
@
text
@d2 1
a2 1
minor=0
@


1.7
log
@add DLT_IEEE802_11 support; from NetBSD. bump minor.
deraadt@@ ok.
@
text
@d1 2
a2 2
major=2
minor=1
@


1.6
log
@Crank all library major numbers.  Needed due to the fact that we
now build libraries with propolice enabled.  Without this, existing
binaries (such as ports/packages) that link with any system library
other than libc will fail with an undefined symbol of "___guard"
(__guard on ELF).
Pointed out by markus@@ and discussed with deraadt@@
@
text
@d2 1
a2 1
minor=0
@


1.5
log
@language extensions for PF logs.  can specify direction, interface, rule
number, reason and action.  fix the ipv4/ipv6 distinction while I'm here.
@
text
@d1 2
a2 2
major=1
minor=2
@


1.4
log
@crank minor
@
text
@d2 1
a2 1
minor=1
@


1.3
log
@changes brought in from v0.4; started by brad, more by me, being tested by mts
@
text
@d2 1
a2 1
minor=0
@


1.2
log
@bring it to the latest 0.2 LBL release.
@
text
@d1 2
a2 2
major=0
minor=2
@


1.1
log
@Initial revision
@
text
@d2 1
a2 1
minor=0
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
