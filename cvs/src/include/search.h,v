head	1.10;
access;
symbols
	OPENBSD_6_1:1.10.0.14
	OPENBSD_6_1_BASE:1.10
	OPENBSD_6_0:1.10.0.10
	OPENBSD_6_0_BASE:1.10
	OPENBSD_5_9:1.10.0.6
	OPENBSD_5_9_BASE:1.10
	OPENBSD_5_8:1.10.0.8
	OPENBSD_5_8_BASE:1.10
	OPENBSD_5_7:1.10.0.2
	OPENBSD_5_7_BASE:1.10
	OPENBSD_5_6:1.10.0.4
	OPENBSD_5_6_BASE:1.10
	OPENBSD_5_5:1.9.0.10
	OPENBSD_5_5_BASE:1.9
	OPENBSD_5_4:1.9.0.6
	OPENBSD_5_4_BASE:1.9
	OPENBSD_5_3:1.9.0.4
	OPENBSD_5_3_BASE:1.9
	OPENBSD_5_2:1.9.0.2
	OPENBSD_5_2_BASE:1.9
	OPENBSD_5_1_BASE:1.8
	OPENBSD_5_1:1.8.0.26
	OPENBSD_5_0:1.8.0.24
	OPENBSD_5_0_BASE:1.8
	OPENBSD_4_9:1.8.0.22
	OPENBSD_4_9_BASE:1.8
	OPENBSD_4_8:1.8.0.20
	OPENBSD_4_8_BASE:1.8
	OPENBSD_4_7:1.8.0.16
	OPENBSD_4_7_BASE:1.8
	OPENBSD_4_6:1.8.0.18
	OPENBSD_4_6_BASE:1.8
	OPENBSD_4_5:1.8.0.14
	OPENBSD_4_5_BASE:1.8
	OPENBSD_4_4:1.8.0.12
	OPENBSD_4_4_BASE:1.8
	OPENBSD_4_3:1.8.0.10
	OPENBSD_4_3_BASE:1.8
	OPENBSD_4_2:1.8.0.8
	OPENBSD_4_2_BASE:1.8
	OPENBSD_4_1:1.8.0.6
	OPENBSD_4_1_BASE:1.8
	OPENBSD_4_0:1.8.0.4
	OPENBSD_4_0_BASE:1.8
	OPENBSD_3_9:1.8.0.2
	OPENBSD_3_9_BASE:1.8
	OPENBSD_3_8:1.7.0.6
	OPENBSD_3_8_BASE:1.7
	OPENBSD_3_7:1.7.0.4
	OPENBSD_3_7_BASE:1.7
	OPENBSD_3_6:1.7.0.2
	OPENBSD_3_6_BASE:1.7
	OPENBSD_3_5:1.5.0.10
	OPENBSD_3_5_BASE:1.5
	OPENBSD_3_4:1.5.0.8
	OPENBSD_3_4_BASE:1.5
	OPENBSD_3_3:1.5.0.6
	OPENBSD_3_3_BASE:1.5
	OPENBSD_3_2:1.5.0.4
	OPENBSD_3_2_BASE:1.5
	OPENBSD_3_1:1.5.0.2
	OPENBSD_3_1_BASE:1.5
	OPENBSD_3_0:1.3.0.18
	OPENBSD_3_0_BASE:1.3
	OPENBSD_2_9:1.3.0.16
	OPENBSD_2_9_BASE:1.3
	OPENBSD_2_8:1.3.0.14
	OPENBSD_2_8_BASE:1.3
	OPENBSD_2_7:1.3.0.12
	OPENBSD_2_7_BASE:1.3
	OPENBSD_2_6:1.3.0.10
	OPENBSD_2_6_BASE:1.3
	OPENBSD_2_5:1.3.0.8
	OPENBSD_2_5_BASE:1.3
	OPENBSD_2_4:1.3.0.6
	OPENBSD_2_4_BASE:1.3
	OPENBSD_2_3:1.3.0.4
	OPENBSD_2_3_BASE:1.3
	OPENBSD_2_2:1.3.0.2
	OPENBSD_2_2_BASE:1.3
	OPENBSD_2_1:1.1.1.1.0.4
	OPENBSD_2_1_BASE:1.1.1.1
	OPENBSD_2_0:1.1.1.1.0.2
	OPENBSD_2_0_BASE:1.1.1.1
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@ * @;


1.10
date	2014.07.18.04.16.09;	author matthew;	state Exp;
branches;
next	1.9;
commitid	fUAPye0SeLsMoRJd;

1.9
date	2012.07.10.11.44.55;	author guenther;	state Exp;
branches;
next	1.8;

1.8
date	2006.01.06.18.53.04;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	2004.07.08.21.15.11;	author millert;	state Exp;
branches;
next	1.6;

1.6
date	2004.06.24.16.14.40;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	2002.02.17.19.42.21;	author millert;	state Exp;
branches;
next	1.4;

1.4
date	2002.02.16.21.27.17;	author millert;	state Exp;
branches;
next	1.3;

1.3
date	97.09.21.10.45.49;	author niklas;	state Exp;
branches;
next	1.2;

1.2
date	97.06.14.02.12.43;	author millert;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.41.13;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.41.13;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.10
log
@Change lsearch()'s "base" argument to require a non-const pointer to
align with POSIX and other systems.

Pointed out by Elliott Hughes on tech
ok deraadt
@
text
@/*	$OpenBSD: search.h,v 1.9 2012/07/10 11:44:55 guenther Exp $	*/
/*	$NetBSD: search.h,v 1.9 1995/08/08 21:14:45 jtc Exp $	*/

/*
 * Written by J.T. Conklin <jtc@@netbsd.org>
 * Public domain.
 */

#ifndef _SEARCH_H_
#define _SEARCH_H_

#include <sys/cdefs.h>
#include <machine/_types.h>

#ifndef	_SIZE_T_DEFINED_
#define	_SIZE_T_DEFINED_
typedef	__size_t	size_t;
#endif

typedef struct entry {
	char *key;
	void *data;
} ENTRY;

typedef enum {
	FIND, ENTER
} ACTION;

typedef enum {
	preorder,
	postorder,
	endorder,
	leaf
} VISIT;

__BEGIN_DECLS
int	 hcreate(size_t);
void	 hdestroy(void);
ENTRY	*hsearch(ENTRY, ACTION);

void	*lfind(const void *, const void *, size_t *, size_t,
	    int (*)(const void *, const void *));
void	*lsearch(const void *, void *, size_t *, size_t,
	    int (*)(const void *, const void *));
void	 insque(void *, void *);
void	 remque(void *);

void	*tdelete(const void * __restrict, void ** __restrict,
	    int (*)(const void *, const void *));
void	*tfind(const void *, void * const *,
	    int (*)(const void *, const void *));
void	*tsearch(const void *, void **, 
	    int (*)(const void *, const void *));
void      twalk(const void *, void (*)(const void *, VISIT, int));
__END_DECLS

#endif /* !_SEARCH_H_ */
@


1.9
log
@bsearch() doesn't belong here (it's in <stdlib.h>)
Add __restrict bits for tdelete()

ok deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: search.h,v 1.8 2006/01/06 18:53:04 millert Exp $	*/
d43 1
a43 1
void	*lsearch(const void *, const void *, size_t *, size_t,
@


1.8
log
@Adapt things to use __type_t instead of _BSD_TYPE_T_
Add new sys/_types.h header
Include machine/_types.h or sys/_types.h where applicable
@
text
@d1 1
a1 1
/*	$OpenBSD: search.h,v 1.7 2004/07/08 21:15:11 millert Exp $	*/
a36 2
void	*bsearch(const void *, const void *, size_t, size_t,
	    int (*)(const void *, const void *));
d48 1
a48 1
void	*tdelete(const void *, void **,
@


1.7
log
@POSIX says "data" is void *, not char *.  Also remove extern from prototypes.
deraadt@@ OK
@
text
@d1 1
a1 1
/*	$OpenBSD: search.h,v 1.6 2004/06/24 16:14:40 deraadt Exp $	*/
d13 1
a13 1
#include <machine/ansi.h>
d15 3
a17 3
#ifdef	_BSD_SIZE_T_
typedef	_BSD_SIZE_T_	size_t;
#undef	_BSD_SIZE_T_
@


1.6
log
@hsearch API/ABI u_int -> size_t -> crank majors; ok millert
@
text
@d1 1
a1 1
/*	$OpenBSD: search.h,v 1.5 2002/02/17 19:42:21 millert Exp $	*/
d11 1
d22 1
a22 1
	char *data;
d37 20
a56 20
extern void	*bsearch(const void *, const void *, size_t, size_t,
		    int (*)(const void *, const void *));
extern int	 hcreate(size_t);
extern void	 hdestroy(void);
extern ENTRY	*hsearch(ENTRY, ACTION);

extern void	*lfind(const void *, const void *, size_t *, size_t,
		    int (*)(const void *, const void *));
extern void	*lsearch(const void *, const void *, size_t *, size_t,
		    int (*)(const void *, const void *));
extern void	 insque(void *, void *);
extern void	 remque(void *);

extern void	*tdelete(const void *, void **,
		    int (*)(const void *, const void *));
extern void	*tfind(const void *, void * const *,
		    int (*)(const void *, const void *));
extern void	*tsearch(const void *, void **, 
		    int (*)(const void *, const void *));
extern void      twalk(const void *, void (*)(const void *, VISIT, int));
d59 1
a59 1
#endif
@


1.5
log
@Manual cleanup of remaining userland __P use (excluding packages maintained outside the tree)
@
text
@d1 1
a1 1
/*	$OpenBSD: search.h,v 1.4 2002/02/16 21:27:17 millert Exp $	*/
d38 1
a38 1
extern int	 hcreate(unsigned int);
@


1.4
log
@Part one of userland __P removal.  Done with a simple regexp with some minor hand editing to make comments line up correctly.  Another pass is forthcoming that handles the cases that could not be done automatically.
@
text
@d1 1
a1 1
/*	$OpenBSD: search.h,v 1.3 1997/09/21 10:45:49 niklas Exp $	*/
d36 2
a37 2
extern void	*bsearch __P((const void *, const void *, size_t, size_t,
			      int (*)(const void *, const void *)));
d42 4
a45 4
extern void	*lfind __P((const void *, const void *, size_t *, size_t,
			      int (*)(const void *, const void *)));
extern void	*lsearch __P((const void *, const void *, size_t *, size_t,
			      int (*)(const void *, const void *)));
d49 7
a55 7
extern void	*tdelete __P((const void *, void **,
			      int (*)(const void *, const void *)));
extern void	*tfind __P((const void *, void * const *,
			      int (*)(const void *, const void *)));
extern void	*tsearch __P((const void *, void **, 
			      int (*)(const void *, const void *)));
extern void      twalk __P((const void *, void (*)(const void *, VISIT, int)));
@


1.3
log
@Well, as we are heading for a release people are encouraged to rebuild their
entire trees for testing anyway, I might as well do this intrusive touching
of include files now.  Added openBSD tags.
@
text
@d1 1
a1 1
/*	$OpenBSD: search.h,v 1.9 1995/08/08 21:14:45 jtc Exp $	*/
d38 3
a40 3
extern int	 hcreate __P((unsigned int));
extern void	 hdestroy __P((void));
extern ENTRY	*hsearch __P((ENTRY, ACTION));
d46 2
a47 2
extern void	 insque __P((void *, void *));
extern void	 remque __P((void *));
@


1.2
log
@Fix decl for tfind(3)
@
text
@d1 1
@


1.1
log
@Initial revision
@
text
@d50 1
a50 1
extern void	*tfind __P((const void *, void **,
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
