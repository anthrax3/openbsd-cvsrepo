head	1.15;
access;
symbols
	OPENBSD_3_2:1.14.0.2
	OPENBSD_3_2_BASE:1.14
	OPENBSD_3_1:1.6.0.4
	OPENBSD_3_1_BASE:1.6
	OPENBSD_3_0:1.6.0.2
	OPENBSD_3_0_BASE:1.6
	OPENBSD_2_9:1.4.0.4
	OPENBSD_2_9_BASE:1.4
	OPENBSD_2_8:1.4.0.2
	OPENBSD_2_8_BASE:1.4
	OPENBSD_2_7:1.1.0.8
	OPENBSD_2_7_BASE:1.1
	OPENBSD_2_6:1.1.0.6
	OPENBSD_2_6_BASE:1.1
	OPENBSD_2_5:1.1.0.4
	OPENBSD_2_5_BASE:1.1
	OPENBSD_2_4:1.1.0.2
	OPENBSD_2_4_BASE:1.1;
locks; strict;
comment	@# @;


1.15
date	2002.12.31.16.35.35;	author miod;	state dead;
branches;
next	1.14;

1.14
date	2002.05.01.19.21.28;	author mickey;	state Exp;
branches;
next	1.13;

1.13
date	2002.04.30.07.33.33;	author deraadt;	state Exp;
branches;
next	1.12;

1.12
date	2002.04.30.04.05.49;	author deraadt;	state Exp;
branches;
next	1.11;

1.11
date	2002.04.30.01.31.20;	author deraadt;	state Exp;
branches;
next	1.10;

1.10
date	2002.04.29.17.13.39;	author deraadt;	state Exp;
branches;
next	1.9;

1.9
date	2002.04.22.16.48.48;	author deraadt;	state Exp;
branches;
next	1.8;

1.8
date	2002.04.22.02.43.16;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	2002.04.21.17.13.35;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	2001.10.08.19.26.14;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	2001.06.23.19.45.01;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	2000.07.13.01.41.49;	author miod;	state Exp;
branches;
next	1.3;

1.3
date	2000.06.20.21.29.35;	author miod;	state Exp;
branches;
next	1.2;

1.2
date	2000.06.09.17.42.55;	author mickey;	state Exp;
branches;
next	1.1;

1.1
date	98.08.23.18.09.06;	author kstailey;	state Exp;
branches;
next	;


desc
@@


1.15
log
@amiga and sun3 turned out to not be y2k+3 compliant here. Remove them, as
well as the few userland tools which were only used on these platforms.
@
text
@#	$OpenBSD: list,v 1.14 2002/05/01 19:21:28 mickey Exp $

# Sun3 extra's
LINK	instbin				sbin/disklabel
LINK	instbin				usr/bin/grep usr/bin/egrep usr/bin/fgrep
LINK	instbin				usr/bin/less usr/bin/more
LINK	instbin				usr/sbin/installboot

SRCDIRS	sys/arch/sun3/stand

# Minimize use of MFS
SYMLINK	/tmp	var/tmp

# copy the MAKEDEV script and make some devices
SCRIPT	${DESTDIR}/dev/MAKEDEV		dev/MAKEDEV
SPECIAL	cd dev; sh MAKEDEV ramdisk

# we need the contents of /usr/mdec (but not installboot)
COPY	${DESTDIR}/usr/mdec/bootxx	usr/mdec/bootxx
COPY	${DESTDIR}/usr/mdec/ufsboot	usr/mdec/ufsboot

# various files that we need in /etc for the install
COPY	${DESTDIR}/etc/disktab		etc/disktab.shadow
SYMLINK	/tmp/disktab.shadow		etc/disktab
SYMLINK	/tmp/fstab.shadow		etc/fstab
SYMLINK	/tmp/resolv.conf.shadow		etc/resolv.conf
SYMLINK	/tmp/hosts			etc/hosts
TERMCAP	vt100,vt220,dumb,sun		usr/share/misc/termcap

# and the installation tools
SCRIPT	${CURDIR}/../common/install.md	install.md
@


1.14
log
@when filtering termcap selecet vt220, not vt200, since that's what we gonna use later, plus a few rcsid vicinity cleanups; millert@@ ok
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.13 2002/04/30 07:33:33 deraadt Exp $
@


1.13
log
@instbin removal now done in a Makefile
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.12 2002/04/30 04:05:49 deraadt Exp $
d28 1
a28 1
TERMCAP	vt100,vt200,dumb,sun		usr/share/misc/termcap
@


1.12
log
@tset bye bye
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.11 2002/04/30 01:31:20 deraadt Exp $
a7 1
SPECIAL /bin/rm instbin
@


1.11
log
@use SCRIPT command
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.10 2002/04/29 17:13:39 deraadt Exp $
a5 1
LINK	instbin				usr/bin/tset usr/bin/reset
@


1.10
log
@generate termcap file using a list2sh.awk directrive; distrib becomes a lot smaller again
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.9 2002/04/22 16:48:48 deraadt Exp $
d4 5
a8 5
LINK	instbin			sbin/disklabel
LINK	instbin			usr/bin/grep usr/bin/egrep usr/bin/fgrep
LINK	instbin			usr/bin/tset usr/bin/reset
LINK	instbin			usr/bin/less usr/bin/more
LINK	instbin			usr/sbin/installboot
d17 1
a17 1
SPECIAL sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' < ${DESTDIR}/dev/MAKEDEV	 > dev/MAKEDEV
d33 1
a33 1
SPECIAL sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' -e "s/^ARCH=ARCH$/ARCH=`arch -ks`/" < ${CURDIR}/../common/install.md	 > install.md
@


1.9
log
@de-tab install.md more fully
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.8 2002/04/22 02:43:16 deraadt Exp $
a23 3
# and a few useful bits of the termcap file (512K and still growing 8-)
SPECIAL tic -C ${CURDIR}/../../share/termtypes/termtypes.master | sed -n -e 's,/usr/share/lib/tabset,/usr/share/tabset,g' -e 's,/usr/lib/tabset,/usr/share/tabset,g' -e '/^dumb|/,/:[ 	]*$/p' -e '/^unknown|/,/:[ 	]*$/p' -e '/^sun.*|/,/:[ 	]*$/p' -e '/^vt.*|/,/:[ 	]*$/p' -e '/^pc3|/,/:[ 	]*$/p' -e '/^pcvt.*|/,/:[ 	]*$/p' > usr/share/misc/termcap

d30 1
@


1.8
log
@use one common dot.profile for all
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.7 2002/04/21 17:13:35 deraadt Exp $
d35 1
a35 1
SPECIAL sed -e '/^#[ 	].*$/d' -e "s/^ARCH=ARCH$/ARCH=`arch -ks`/" < ${CURDIR}/../common/install.md	 > install.md
@


1.7
log
@same cleanup as elsewhere
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.6 2001/10/08 19:26:14 deraadt Exp $
a34 1
SPECIAL sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' < ${ARCHDIR}/../ramdisk/dot.profile	 > .profile
@


1.6
log
@arch -ks
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.5 2001/06/23 19:45:01 deraadt Exp $
d5 5
a9 7

SYMLINK	../../instbin		usr/bin/basename
SYMLINK ../../instbin		usr/bin/grep usr/bin/egrep usr/bin/fgrep
SYMLINK ../../instbin		usr/bin/rsh
SYMLINK ../../instbin		usr/bin/tset usr/bin/reset
SYMLINK	../../instbin		usr/bin/less usr/bin/more
SYMLINK	../../instbin		usr/sbin/installboot
d17 1
a17 1
COPY	${DESTDIR}/dev/MAKEDEV		dev/MAKEDEV
d35 1
a35 1
COPY	${ARCHDIR}/../ramdisk/dot.profile	.profile
@


1.5
log
@argh.  stop using kernfs, using dmesg using sysctl.  encode ARCH into
install.md at build time.  remove some crud.  and the icing on the cake:
skip testing all this until next week
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.4 2000/07/13 01:41:49 miod Exp $
d38 1
a38 1
SPECIAL sed -e '/^#[ 	].*$/d' -e "s/^ARCH=ARCH$/ARCH=`arch -s`/" < ${CURDIR}/../common/install.md	 > install.md
@


1.4
log
@Be smarter when populating the miniroot : don't copy, then rm, files not needed here. Required to fit since last MAKEDEV additions.
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.3 2000/06/20 21:29:35 miod Exp $
d38 1
a38 1
COPY	${ARCHDIR}/../install.md	install.md
@


1.3
log
@Completely new ramdisk stuff, inspired by the existing sparc ramdisk.
@
text
@d1 1
a1 1
#	$OpenBSD$
d22 3
a24 3
# we need the contents of /usr/mdec (but not boot or binstall)
COPYDIR	${DESTDIR}/usr/mdec	usr/mdec
SPECIAL	rm -f usr/mdec/binstall usr/mdec/installboot
@


1.2
log
@chown/chgrp changes
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.1 1998/08/23 18:09:06 kstailey Exp $
d3 14
a16 59
COPY	${OBJDIR}/raminst		raminst
LINK	raminst			bin/cat
LINK	raminst			bin/chmod
LINK	raminst			bin/chgrp
LINK	raminst			bin/cp
LINK	raminst			bin/df
LINK	raminst			bin/dd
LINK	raminst			bin/ed
LINK	raminst			bin/expr
LINK	raminst			bin/ln
LINK	raminst			bin/ls
LINK	raminst			bin/kill
LINK	raminst			bin/hostname
LINK	raminst			bin/mkdir
LINK	raminst			bin/mv
LINK	raminst			bin/pwd
LINK	raminst			bin/rm
LINK	raminst			bin/sh
LINK	bin/sh			bin/-sh
LINK	raminst			bin/sleep
LINK	raminst			bin/stty
LINK	raminst			bin/sync
LINK	raminst			bin/test
LINK	raminst			bin/[
LINK	raminst			sbin/chown
LINK	raminst			sbin/disklabel
LINK	raminst			sbin/fsck
LINK	raminst			sbin/halt
LINK	raminst			sbin/ifconfig
LINK	raminst			sbin/init
LINK	raminst			sbin/mknod
LINK	raminst			usr/bin/more
LINK	raminst			sbin/mount
LINK	raminst			sbin/mount_cd9660
LINK	raminst			sbin/mount_ffs
LINK	raminst			sbin/mount_kernfs
LINK	raminst			sbin/mount_nfs
LINK	raminst			sbin/mount_mfs
LINK	raminst			sbin/newfs
LINK	raminst			sbin/reboot
LINK	raminst			sbin/route
LINK	raminst			sbin/slattach
LINK	raminst			sbin/umount
LINK	raminst			usr/bin/awk
LINK	raminst			usr/bin/cut
LINK	raminst			usr/bin/ftp
LINK	raminst			usr/bin/egrep
LINK	raminst			usr/bin/grep
LINK	raminst			usr/bin/gzip
LINK	raminst			usr/bin/less
LINK	raminst			usr/bin/sed
LINK	raminst			usr/bin/sort
LINK	raminst			bin/pax
LINK	raminst			usr/bin/tar
LINK	raminst			usr/bin/tip
LINK	raminst			usr/sbin/chat
LINK	raminst			usr/sbin/pppd
LINK	raminst			usr/bin/vi
SPECIAL	/bin/rm raminst
d19 2
a20 2
COPY	${DESTDIR}/dev/MAKEDEV	dev/MAKEDEV
SPECIAL	cd dev; sh MAKEDEV raminst
d22 6
a27 8
# we need the contents of /usr/mdec (XXX)
COPY	${DESTDIR}/usr/mdec/uboot.lif	usr/mdec/uboot.lif
LINK	usr/mdec/uboot.lif	usr/mdec/bootct
LINK	usr/mdec/uboot.lif	usr/mdec/boothd
LINK	usr/mdec/uboot.lif	usr/mdec/bootsd
LINK	usr/mdec/uboot.lif	usr/mdec/ctboot
LINK	usr/mdec/uboot.lif	usr/mdec/hdboot
LINK	usr/mdec/uboot.lif	usr/mdec/sdboot
d30 5
a34 8
COPY	rd.group		etc/group
COPY	rd.master.passwd	etc/master.passwd
COPY	rd.disktab		etc/disktab
SPECIAL	cd etc; pwd_mkdb -p -d . ./master.passwd

# and the common installation tools
COPY	${TOPDIR}/common/dot.commonutils	.commonutils
COPY	${TOPDIR}/common/termcap.hp-vt	usr/share/misc/termcap
d37 2
a38 10
COPY	dot.profile			.profile
COPY	dot.instutils			.instutils
COPY	install.md			install.md
COPY	${CURDIR}/../../miniroot/install.sh	install
COPY	${CURDIR}/../../miniroot/upgrade.sh	upgrade
SPECIAL	sed -e "/^VERSION=/s/=.*/=${REV}/" < ${CURDIR}/../../miniroot/install.sub > install.sub
SPECIAL	chmod 755 install upgrade

# so DNS can work
SYMLINK /tmp/resolv.conf.shadow		etc/resolv.conf
@


1.1
log
@update to be more like alpha, hp300, etc
@
text
@d1 1
a1 1
#	$OpenBSD$
d6 1
d27 1
a46 1
LINK	raminst			usr/bin/chgrp
a58 1
LINK	raminst			usr/sbin/chown
@

