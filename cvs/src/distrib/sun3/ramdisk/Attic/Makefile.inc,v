head	1.4;
access;
symbols
	OPENBSD_3_2:1.3.0.6
	OPENBSD_3_2_BASE:1.3
	OPENBSD_3_1:1.3.0.4
	OPENBSD_3_1_BASE:1.3
	OPENBSD_3_0:1.3.0.2
	OPENBSD_3_0_BASE:1.3
	OPENBSD_2_9:1.2.0.4
	OPENBSD_2_9_BASE:1.2
	OPENBSD_2_8:1.2.0.2
	OPENBSD_2_8_BASE:1.2
	OPENBSD_2_7:1.1.0.8
	OPENBSD_2_7_BASE:1.1
	OPENBSD_2_6:1.1.0.6
	OPENBSD_2_6_BASE:1.1
	OPENBSD_2_5:1.1.0.4
	OPENBSD_2_5_BASE:1.1
	OPENBSD_2_4:1.1.0.2
	OPENBSD_2_4_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2002.12.31.16.35.35;	author miod;	state dead;
branches;
next	1.3;

1.3
date	2001.09.04.22.25.02;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	2000.06.20.21.29.34;	author miod;	state Exp;
branches;
next	1.1;

1.1
date	98.08.23.18.10.40;	author kstailey;	state Exp;
branches;
next	;


desc
@@


1.4
log
@amiga and sun3 turned out to not be y2k+3 compliant here. Remove them, as
well as the few userland tools which were only used on these platforms.
@
text
@#	$OpenBSD: Makefile.inc,v 1.3 2001/09/04 22:25:02 deraadt Exp $

IMAGESIZE?=		3000 # 1.5MB & change in 512 byte blocks
GZIP?=			gzip
GZIPFLAGS?=		-9v
GZIPEXT?=		.gz
RAWLABEL=
BOOT=			${DESTDIR}/usr/mdec/ufsboot
INSTALLBOOT=		${DESTDIR}/usr/mdec/installboot
@


1.3
log
@MB == megabytes, Mb == megabits
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.2 2000/06/20 21:29:34 miod Exp $
@


1.2
log
@Completely new ramdisk stuff, inspired by the existing sparc ramdisk.
@
text
@d1 1
a1 1
#	$OpenBSD$
d3 1
a3 1
IMAGESIZE?=		3000 # 1.5Mb & change in 512 byte blocks
@


1.1
log
@update to be more like alpha, hp300, etc
@
text
@d1 1
a1 4
#
#	$OpenBSD: Makefile.inc,v 1.2 1998/03/28 23:40:48 millert Exp $
#	$NetBSD: Makefile.inc,v 1.1 1995/07/18 04:13:14 briggs Exp $
#
d3 7
a9 27
# TOP is assumed to be defined by Makefile including this one.

CBIN?=		raminst
COMMONDIR=	${TOP}/ramdisk

MOUNT_POINT?=	${TOP}/${BASE}/fs

LISTS=		${.CURDIR}/list
CRUNCHCONF?=	${COMMONDIR}/${CBIN}.conf
MTREE=		${COMMONDIR}/mtree.conf

${CBIN}.mk ${CBIN}.cache ${CBIN}.c: ${CRUNCHCONF}
	crunchgen -D ${BSDSRCDIR} -L ${DESTDIR}/usr/lib ${CRUNCHCONF}

${CBIN}: ${CBIN}.mk ${CBIN}.cache ${CBIN}.c
	make -f ${CBIN}.mk all

do_files:
	mtree -def ${MTREE} -p ${MOUNT_POINT}/ -u
	TOPDIR=${TOP} CURDIR=${.CURDIR} OBJDIR=${.OBJDIR} \
	    REV=${REV} TARGDIR=${MOUNT_POINT} sh ${TOP}/runlist.sh ${LISTS}

clean cleandir:
	/bin/rm -f core ${IMAGE} ${CBIN} ${CBIN}.mk ${CBIN}.cache *.o *.lo *.c

.include <bsd.obj.mk>
.include <bsd.subdir.mk>
@

