head	1.29;
access;
symbols
	OPENBSD_3_1:1.25.0.2
	OPENBSD_3_1_BASE:1.25
	OPENBSD_3_0:1.21.0.2
	OPENBSD_3_0_BASE:1.21
	OPENBSD_2_9:1.19.0.2
	OPENBSD_2_9_BASE:1.19
	OPENBSD_2_8:1.14.0.2
	OPENBSD_2_8_BASE:1.14
	OPENBSD_2_7:1.11.0.2
	OPENBSD_2_7_BASE:1.11
	OPENBSD_2_6:1.10.0.2
	OPENBSD_2_6_BASE:1.10
	OPENBSD_2_5:1.9.0.10
	OPENBSD_2_5_BASE:1.9
	OPENBSD_2_4:1.9.0.8
	OPENBSD_2_4_BASE:1.9
	OPENBSD_2_3:1.9.0.6
	OPENBSD_2_3_BASE:1.9
	OPENBSD_2_2:1.9.0.4
	OPENBSD_2_2_BASE:1.9
	OPENBSD_2_1:1.9.0.2
	OPENBSD_2_1_BASE:1.9;
locks; strict;
comment	@# @;


1.29
date	2002.04.22.02.40.02;	author deraadt;	state dead;
branches;
next	1.28;

1.28
date	2002.04.21.17.09.49;	author deraadt;	state Exp;
branches;
next	1.27;

1.27
date	2002.04.21.06.53.06;	author deraadt;	state Exp;
branches;
next	1.26;

1.26
date	2002.04.19.23.19.59;	author deraadt;	state Exp;
branches;
next	1.25;

1.25
date	2002.04.12.02.15.28;	author deraadt;	state Exp;
branches;
next	1.24;

1.24
date	2002.04.10.03.54.46;	author deraadt;	state Exp;
branches;
next	1.23;

1.23
date	2001.12.17.00.41.51;	author krw;	state Exp;
branches;
next	1.22;

1.22
date	2001.12.13.01.40.15;	author krw;	state Exp;
branches;
next	1.21;

1.21
date	2001.08.23.02.37.02;	author krw;	state Exp;
branches;
next	1.20;

1.20
date	2001.06.23.19.44.42;	author deraadt;	state Exp;
branches;
next	1.19;

1.19
date	2001.04.19.02.17.32;	author deraadt;	state Exp;
branches;
next	1.18;

1.18
date	2001.04.09.06.55.40;	author deraadt;	state Exp;
branches;
next	1.17;

1.17
date	2001.03.03.08.13.46;	author deraadt;	state Exp;
branches;
next	1.16;

1.16
date	2001.03.02.09.50.09;	author deraadt;	state Exp;
branches;
next	1.15;

1.15
date	2001.01.27.00.21.45;	author deraadt;	state Exp;
branches;
next	1.14;

1.14
date	2000.07.02.18.18.02;	author millert;	state Exp;
branches;
next	1.13;

1.13
date	2000.06.23.18.53.24;	author mickey;	state Exp;
branches;
next	1.12;

1.12
date	2000.06.09.17.42.53;	author mickey;	state Exp;
branches;
next	1.11;

1.11
date	99.12.05.19.37.47;	author mickey;	state Exp;
branches;
next	1.10;

1.10
date	99.08.06.20.49.08;	author deraadt;	state Exp;
branches;
next	1.9;

1.9
date	97.05.07.06.03.22;	author deraadt;	state Exp;
branches;
next	1.8;

1.8
date	97.05.03.23.11.08;	author tholo;	state Exp;
branches;
next	1.7;

1.7
date	97.05.03.07.48.12;	author tholo;	state Exp;
branches;
next	1.6;

1.6
date	97.04.25.18.51.28;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	97.04.23.11.24.27;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	97.04.17.02.10.32;	author niklas;	state Exp;
branches;
next	1.3;

1.3
date	97.04.17.01.59.58;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	97.04.14.10.56.22;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	97.04.13.17.17.45;	author mickey;	state Exp;
branches;
next	;


desc
@@


1.29
log
@move things back a directory
@
text
@#	$OpenBSD: list,v 1.28 2002/04/21 17:09:49 deraadt Exp $

# copy the crunched binary, link to it, and kill it
COPY	${OBJDIR}/instbin	instbin
LINK	instbin			bin/cat
LINK	instbin			bin/chmod
LINK	instbin			bin/chgrp
LINK	instbin			bin/cp
LINK	instbin			bin/cpio bin/pax bin/tar
LINK	instbin			bin/dd
LINK	instbin			bin/df
LINK	instbin			bin/ed
LINK	instbin			bin/ln
LINK	instbin			bin/ls
LINK	instbin			bin/mkdir
LINK	instbin			bin/mv
LINK	instbin			bin/rm
LINK	instbin			bin/hostname
LINK	instbin			bin/sh bin/ksh
LINK	instbin			bin/sleep
LINK	instbin			bin/stty
LINK	instbin			sbin/chown
LINK	instbin			sbin/disklabel
LINK	instbin			sbin/dhclient
LINK	instbin			sbin/fdisk
LINK	instbin			sbin/dmesg
LINK	instbin			sbin/fsck sbin/fsck_ffs
LINK	instbin			sbin/halt sbin/reboot
LINK	instbin			sbin/ifconfig
LINK	instbin			sbin/init
LINK	instbin			sbin/mknod
LINK	instbin			sbin/mount
LINK	instbin			sbin/mount_cd9660
LINK	instbin			sbin/mount_ffs
LINK	instbin			sbin/mount_msdos
LINK	instbin			sbin/mount_ext2fs
LINK	instbin			sbin/ping
LINK	instbin			sbin/newfs
LINK	instbin			sbin/restore
LINK	instbin			sbin/route
LINK	instbin			sbin/umount
LINK	instbin			sbin/kbd
LINK	instbin			usr/bin/egrep usr/bin/fgrep usr/bin/grep
LINK	instbin			usr/bin/ftp
LINK	instbin			usr/bin/gzip usr/bin/gunzip usr/bin/gzcat
LINK	instbin			usr/bin/less usr/bin/more
LINK	instbin			usr/bin/rsh
LINK	instbin			usr/bin/sed
LINK	instbin			usr/mdec/installboot
SPECIAL	/bin/rm instbin

# `internal' crunchgen links
ARGVLINK sh		-sh

# copy the MAKEDEV script and make some devices
SPECIAL sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' < ${DESTDIR}/dev/MAKEDEV	 > dev/MAKEDEV
SPECIAL	cd dev; sh MAKEDEV ramdisk

# we need the contents of /usr/mdec
COPY	${DESTDIR}/usr/mdec/biosboot	usr/mdec/biosboot
COPY	${DESTDIR}/usr/mdec/mbr		usr/mdec/mbr
COPY	${DESTDIR}/usr/mdec/boot	usr/mdec/boot

# various files that we need in /etc for the install
COPY	${DESTDIR}/etc/group		etc/group
COPY	${DESTDIR}/etc/spwd.db		etc/spwd.db
COPY	${DESTDIR}/etc/disktab		etc/disktab.shadow
COPY	${CURDIR}/../../../miniroot/protocols etc/protocols
COPY	${CURDIR}/../../../miniroot/services  etc/services

SYMLINK	/tmp/disktab.shadow		etc/disktab
SYMLINK	/tmp/fstab.shadow		etc/fstab
SYMLINK	/tmp/resolv.conf.shadow		etc/resolv.conf
SYMLINK	/tmp/hosts			etc/hosts

# dhcp things
COPY	${DESTDIR}/sbin/dhclient-script sbin/dhclient-script

# and the common installation tools
COPY	${CURDIR}/../common/termcap.vt		usr/share/misc/termcap

# and the installation tools
SPECIAL sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' < ${CURDIR}/../common/dot.profile	 > .profile
SPECIAL sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' -e "s/^ARCH=ARCH$/ARCH=`arch -ks`/" < ${CURDIR}/../common/install.md	 > install.md
SPECIAL	sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' < ${CURDIR}/../../../miniroot/upgrade.sh > upgrade
SPECIAL	sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' < ${CURDIR}/../../../miniroot/install.sh > install
SPECIAL sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' -e "/^VERSION=/s/=.*/=${REV}/" < ${CURDIR}/../../../miniroot/install.sub > install.sub
SPECIAL	chmod 755 install upgrade
@


1.28
log
@use arch -ks instead of arch -s (on them all)
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.27 2002/04/21 06:53:06 deraadt Exp $
@


1.27
log
@simplify
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.26 2002/04/19 23:19:59 deraadt Exp $
d84 1
a84 1
SPECIAL sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' -e "s/^ARCH=ARCH$/ARCH=`arch -s`/" < ${CURDIR}/../common/install.md	 > install.md
@


1.26
log
@prune i386
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.25 2002/04/12 02:15:28 deraadt Exp $
a55 1
#COPY	${DESTDIR}/dev/MAKEDEV	dev/MAKEDEV
a57 1
#SPECIAL /bin/rm dev/MAKEDEV
a80 1
#COPY	${DESTDIR}/usr/share/misc/scsi_modes	usr/share/misc/scsi_modes
@


1.25
log
@kbd setting code for the installer.  smat@@acm.org, miod, and krw.  Minimal
last minute tweaks to it by me, but you can trust me, right?
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.24 2002/04/10 03:54:46 deraadt Exp $
a40 2
#LINK	instbin			sbin/scsi
#LINK	instbin			sbin/swapon
@


1.24
log
@MAKEDEV can remain on the install media (it is now sed stripped)
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.23 2001/12/17 00:41:51 krw Exp $
d44 1
@


1.23
log
@Use actual files for short versions of /etc/protocols and
/etc/services used during installations.

This way it is not necessary to run the install script before
using commands requiring these files.

Requested by deraadt@@.
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.22 2001/12/13 01:40:15 krw Exp $
d57 2
a58 1
COPY	${DESTDIR}/dev/MAKEDEV	dev/MAKEDEV
d60 1
a60 1
SPECIAL	/bin/rm dev/MAKEDEV
@


1.22
log
@Remove /etc/protocols and /etc/services from install media
that use the miniroot install scripts.

During an install, donetconfig() in miniroot/install.sub now
creates a minimal /etc/protocols and /etc/services.

During an upgrade, enable_network() now copies the existing
protocols and services files into /etc.

Saves approximately 13K on floppy/cd images.
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.21 2001/08/23 02:37:02 krw Exp $
d70 3
@


1.21
log
@Expand regular expressions used in sed invocations in SPECIAL lines to
find and delete more comments from scripts put on floppy images.

Now, leading whitespace and no trailing characters are both detected
and either cause the comment line to be deleted.

Fix list2sh.awk so that the tabs in the sed statements are not lost
during script creation. Previously the remainder of the SPECIAL line,
i.e. the shell statement to write, was recreated from the fields, but
awk treated the <blank><tab> in the sed expression as a field
separator and discarded the blank and tab. The blank was then added
back in the recreation process, but the tab was lost.

These changes cause the scripts to shrink by a total of 6596
characters.

This handles the i386 cases, other architectures can probably be fixed
the same way.
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.20 2001/06/23 19:44:42 deraadt Exp $
a67 2
COPY	${DESTDIR}/etc/protocols	etc/protocols
COPY	${DESTDIR}/etc/services		etc/services
@


1.20
log
@argh.  stop using kernfs, using dmesg using sysctl.  encode ARCH into
install.md at build time.  remove some crud.  and the icing on the cake:
skip testing all this until next week
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.19 2001/04/19 02:17:32 deraadt Exp $
d85 5
a89 5
SPECIAL sed -e '/^#[ 	].*$/d' < ${CURDIR}/../common/dot.profile	 > .profile
SPECIAL sed -e '/^#[ 	].*$/d' -e "s/^ARCH=ARCH$/ARCH=`arch -s`/" < ${CURDIR}/../common/install.md	 > install.md
SPECIAL	sed -e '/^#[ 	].*$/d' < ${CURDIR}/../../../miniroot/upgrade.sh > upgrade
SPECIAL	sed -e '/^#[ 	].*$/d' < ${CURDIR}/../../../miniroot/install.sh > install
SPECIAL sed -e '/^#[ 	].*$/d' -e "/^VERSION=/s/=.*/=${REV}/" < ${CURDIR}/../../../miniroot/install.sub > install.sub
@


1.19
log
@strip comments, as on the alpha; millert ok
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.18 2001/04/09 06:55:40 deraadt Exp $
d18 1
d26 1
a35 1
LINK	instbin			sbin/mount_kernfs
d86 1
a86 1
SPECIAL sed -e '/^#[ 	].*$/d' < ${CURDIR}/../common/install.md	 > install.md
@


1.18
log
@only put wicontrol (and ancontrol now too) on floppyC
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.17 2001/03/03 08:13:46 deraadt Exp $
d84 5
a88 5
COPY	${CURDIR}/../common/dot.profile			.profile
COPY	${CURDIR}/../common/install.md			install.md
COPY	${CURDIR}/../../../miniroot/install.sh		install
COPY	${CURDIR}/../../../miniroot/upgrade.sh		upgrade
SPECIAL sed "/^VERSION=/s/=.*/=${REV}/" < ${CURDIR}/../../../miniroot/install.sub > install.sub
@


1.17
log
@oops, put newfs back
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.16 2001/03/02 09:50:09 deraadt Exp $
a23 1
LINK	instbin			sbin/wicontrol
@


1.16
log
@mount_mfs is not used, no link needed; nate
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.15 2001/01/27 00:21:45 deraadt Exp $
d38 1
d81 1
a81 1
COPY	${CURDIR}/../common/termcap.pcvt	usr/share/misc/termcap
@


1.15
log
@put wicontrol on the floppy
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.14 2000/07/02 18:18:02 millert Exp $
a36 1
LINK	instbin			sbin/newfs sbin/mount_mfs
@


1.14
log
@Remove mount_nfs since the RAMDISK kernels don't have NFS support
and the install scripts believes that NFS is supported if mount_nfs
exists.
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.13 2000/06/23 18:53:24 mickey Exp $
d24 1
@


1.13
log
@implement bubble sort in ksh instead of using sort(1).
i think i'll fix sparc next week to use it.
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.12 2000/06/09 17:42:53 mickey Exp $
a33 1
LINK	instbin			sbin/mount_nfs
@


1.12
log
@chown/chgrp changes
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.11 1999/12/05 19:37:47 mickey Exp $
a49 1
LINK	instbin			usr/bin/sort
@


1.11
log
@remove expr -- make floppy happier at 80k; millert@@ ok
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.10 1999/08/06 20:49:08 deraadt Exp $
d7 1
d21 1
a50 1
LINK	instbin			usr/sbin/chown usr/sbin/chgrp
@


1.10
log
@new install media.  floppyXX.fs is the regular one.  floppyBXX.fs contains no
none of the scsi drivers on the first floppy, but others (to be detailed
elsewhere).  bsd.rd is still the one from floppyXX.fs.  finally, cdromXX.fs
is a 2.88MB install, which contains a superset of all these.. to be placed on
the CD.
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.27 1999/04/08 08:01:26 deraadt Exp $
a11 1
LINK	instbin			bin/expr
@


1.9
log
@lean, mean, and vi fits
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.8 1997/05/03 23:11:08 tholo Exp $
d8 1
a8 1
LINK	instbin			bin/cpio
a12 1
LINK	instbin			bin/hostname
a16 1
LINK	instbin			bin/pwd
d18 1
a18 1
LINK	instbin			bin/sh
a20 4
LINK	instbin			bin/sync
LINK	instbin			bin/tar
LINK	instbin			bin/test
LINK	instbin			bin/[
d22 1
d24 2
a25 3
LINK	instbin			sbin/fsck
LINK	instbin			sbin/fsck_ffs
LINK	instbin			sbin/halt
d36 1
a36 1
LINK	instbin			sbin/newfs
a38 1
LINK	instbin			sbin/reboot
d40 2
a41 2
LINK	instbin			sbin/shutdown
LINK	instbin			sbin/slattach
d43 9
a51 20
SYMLINK	/bin/cat		usr/bin/awk
SYMLINK	/bin/cat		usr/bin/cut
SYMLINK	/bin/cat		usr/bin/chgrp
SYMLINK	/bin/cat		usr/bin/egrep
SYMLINK	/bin/cat		usr/bin/fgrep
SYMLINK	/bin/cat		usr/bin/ftp
SYMLINK	/bin/cat		usr/bin/grep
SYMLINK	/bin/cat		usr/bin/gzip
SYMLINK	/bin/cat		usr/bin/gunzip
SYMLINK	/bin/cat		usr/bin/less
SYMLINK	/bin/cat		usr/bin/more
SYMLINK	/bin/cat		usr/bin/rsh
SYMLINK	/bin/cat		usr/bin/sed
SYMLINK	/bin/cat		usr/bin/sort
SYMLINK	/bin/cat		usr/bin/tip
SYMLINK	/bin/cat		usr/bin/vi
SYMLINK	/bin/cat		usr/sbin/bad144
SYMLINK	/bin/cat		usr/sbin/chat
SYMLINK	/bin/cat		usr/sbin/chown
SYMLINK	/bin/cat		usr/sbin/pppd
d54 3
d63 3
a65 4
COPY	${DESTDIR}/usr/mdec/bootsd	usr/mdec/bootsd
SPECIAL	cd usr/mdec; ln bootsd bootwd
COPY	${DESTDIR}/usr/mdec/bootsd	usr/mdec/sdboot
SPECIAL	cd usr/mdec; ln sdboot wdboot
d72 5
d78 2
a79 1
COPYDIR	${DESTDIR}/etc/ppp		etc/ppp
d82 10
a91 2
COPY	${TOPDIR}/common/termcap.pc3	usr/share/misc/termcap
COPY	${DESTDIR}/usr/share/misc/scsi_modes	usr/share/misc/scsi_modes
@


1.8
log
@Add hostname(1)
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.7 1997/05/03 07:48:12 tholo Exp $
a63 1
SYMLINK	/bin/cat		usr/bin/strings
d65 1
a68 1
SYMLINK	/bin/cat		usr/sbin/chroot
d78 4
a81 1
COPYDIR	${DESTDIR}/usr/mdec	usr/mdec
a84 2
COPY	${DESTDIR}/etc/master.passwd	etc/master.passwd
COPY	${DESTDIR}/etc/passwd		etc/passwd
a85 1
COPY	${DESTDIR}/etc/pwd.db		etc/pwd.db
a91 1
COPY	${TOPDIR}/common/dot.commonutils	.commonutils
@


1.7
log
@Add some binaries to ramdisk image
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.6 1997/04/25 18:51:28 deraadt Exp $
d13 1
@


1.6
log
@add scsi & supporting file
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.5 1997/04/23 11:24:27 deraadt Exp $
d20 1
d50 1
d52 2
d55 1
d62 1
@


1.5
log
@link for mount_ext2fs
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.4 1997/04/17 02:10:32 niklas Exp $
d88 1
@


1.4
log
@I had rcs-openbsd.pl have its way here
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.2 1997/04/14 10:56:22 deraadt Exp $
d39 1
@


1.3
log
@add pppd, chat, and /etc/ppp files. (it fits!)
@
text
@d1 1
a1 1
#	$Id: list,v 1.2 1997/04/14 10:56:22 deraadt Exp $
@


1.2
log
@access few files correctly
@
text
@d1 1
a1 1
#	$Id: list,v 1.1 1997/04/13 17:17:45 mickey Exp $
d59 1
d62 1
d81 2
@


1.1
log
@import of hp300's ramdisk stuff for i386.
merged w/ existing stuff...
awk nuked away from ramdisk, only MAKEDEV needs it.
@
text
@d1 1
a1 1
#	$Id: list,v 1.12 1997/03/21 03:33:23 kstailey Exp $
d65 1
a65 1
SPECIAL	cd dev; sh MAKEDEV floppy
d81 2
a82 2
COPY	${TOPDIR}/inst-common/dot.commonutils	.commonutils
COPY	${TOPDIR}/inst-common/termcap.pc3	usr/share/misc/termcap
@
