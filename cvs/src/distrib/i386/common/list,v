head	1.48;
access;
symbols
	OPENBSD_6_2:1.48.0.2
	OPENBSD_6_2_BASE:1.48
	OPENBSD_6_1:1.48.0.4
	OPENBSD_6_1_BASE:1.48
	OPENBSD_6_0:1.43.0.2
	OPENBSD_6_0_BASE:1.43
	OPENBSD_5_9:1.42.0.2
	OPENBSD_5_9_BASE:1.42
	OPENBSD_5_8:1.42.0.4
	OPENBSD_5_8_BASE:1.42
	OPENBSD_5_7:1.39.0.2
	OPENBSD_5_7_BASE:1.39
	OPENBSD_5_6:1.37.0.4
	OPENBSD_5_6_BASE:1.37
	OPENBSD_5_5:1.36.0.2
	OPENBSD_5_5_BASE:1.36
	OPENBSD_5_4:1.28.0.4
	OPENBSD_5_4_BASE:1.28
	OPENBSD_5_3:1.28.0.2
	OPENBSD_5_3_BASE:1.28
	OPENBSD_5_2:1.26.0.8
	OPENBSD_5_2_BASE:1.26
	OPENBSD_5_1_BASE:1.26
	OPENBSD_5_1:1.26.0.6
	OPENBSD_5_0:1.26.0.4
	OPENBSD_5_0_BASE:1.26
	OPENBSD_4_9:1.26.0.2
	OPENBSD_4_9_BASE:1.26
	OPENBSD_4_8:1.24.0.2
	OPENBSD_4_8_BASE:1.24
	OPENBSD_4_7:1.23.0.2
	OPENBSD_4_7_BASE:1.23
	OPENBSD_4_6:1.22.0.4
	OPENBSD_4_6_BASE:1.22
	OPENBSD_4_5:1.19.0.2
	OPENBSD_4_5_BASE:1.19
	OPENBSD_4_4:1.17.0.8
	OPENBSD_4_4_BASE:1.17
	OPENBSD_4_3:1.17.0.6
	OPENBSD_4_3_BASE:1.17
	OPENBSD_4_2:1.17.0.4
	OPENBSD_4_2_BASE:1.17
	OPENBSD_4_1:1.17.0.2
	OPENBSD_4_1_BASE:1.17
	OPENBSD_4_0:1.16.0.2
	OPENBSD_4_0_BASE:1.16
	OPENBSD_3_9:1.15.0.4
	OPENBSD_3_9_BASE:1.15
	OPENBSD_3_8:1.15.0.2
	OPENBSD_3_8_BASE:1.15
	OPENBSD_3_7:1.14.0.2
	OPENBSD_3_7_BASE:1.14
	OPENBSD_3_6:1.10.0.6
	OPENBSD_3_6_BASE:1.10
	OPENBSD_3_5:1.10.0.4
	OPENBSD_3_5_BASE:1.10
	OPENBSD_3_4:1.10.0.2
	OPENBSD_3_4_BASE:1.10
	OPENBSD_3_3:1.8.0.2
	OPENBSD_3_3_BASE:1.8
	OPENBSD_3_2:1.7.0.2
	OPENBSD_3_2_BASE:1.7;
locks; strict;
comment	@# @;


1.48
date	2016.12.30.22.32.25;	author deraadt;	state Exp;
branches;
next	1.47;
commitid	l4qFJ05ajAQouLxi;

1.47
date	2016.09.17.15.03.39;	author florian;	state Exp;
branches;
next	1.46;
commitid	4iDaUFNgyRvNiP2A;

1.46
date	2016.09.13.22.27.50;	author rpe;	state Exp;
branches;
next	1.45;
commitid	GBnmSiVk0pmscj9y;

1.45
date	2016.09.04.09.54.22;	author rpe;	state Exp;
branches;
next	1.44;
commitid	GShD1XwYMI1YRfdA;

1.44
date	2016.09.03.10.57.11;	author rpe;	state Exp;
branches;
next	1.43;
commitid	pFfkafQ0XO5kSNdx;

1.43
date	2016.04.02.12.23.46;	author rpe;	state Exp;
branches;
next	1.42;
commitid	RiZ3BjQb9aPCOLdl;

1.42
date	2015.04.13.21.27.07;	author deraadt;	state Exp;
branches;
next	1.41;
commitid	XlnjSM8QPyxXBJUX;

1.41
date	2015.04.02.16.13.24;	author deraadt;	state Exp;
branches;
next	1.40;
commitid	xCtdNbyuk86cJEuz;

1.40
date	2015.03.11.15.27.32;	author deraadt;	state Exp;
branches;
next	1.39;
commitid	CiK8k4NfUdHOtlhW;

1.39
date	2014.12.28.04.40.19;	author deraadt;	state Exp;
branches;
next	1.38;
commitid	0Q152diy3j6ZcHnS;

1.38
date	2014.12.23.17.17.17;	author deraadt;	state Exp;
branches;
next	1.37;
commitid	IN5KmXrnip5FTaGs;

1.37
date	2014.07.20.02.40.23;	author deraadt;	state Exp;
branches;
next	1.36;
commitid	kF7q4B88OC3fcDHo;

1.36
date	2014.03.03.07.40.34;	author deraadt;	state Exp;
branches;
next	1.35;

1.35
date	2014.01.20.05.09.47;	author jsing;	state Exp;
branches;
next	1.34;

1.34
date	2014.01.11.05.40.16;	author deraadt;	state Exp;
branches;
next	1.33;

1.33
date	2014.01.10.07.57.28;	author deraadt;	state Exp;
branches;
next	1.32;

1.32
date	2014.01.09.19.02.04;	author deraadt;	state Exp;
branches;
next	1.31;

1.31
date	2014.01.08.22.17.52;	author deraadt;	state Exp;
branches;
next	1.30;

1.30
date	2014.01.08.21.53.35;	author deraadt;	state Exp;
branches;
next	1.29;

1.29
date	2014.01.07.02.27.55;	author deraadt;	state Exp;
branches;
next	1.28;

1.28
date	2012.10.30.18.39.44;	author krw;	state Exp;
branches;
next	1.27;

1.27
date	2012.10.15.17.21.03;	author deraadt;	state Exp;
branches;
next	1.26;

1.26
date	2010.10.18.04.07.50;	author deraadt;	state Exp;
branches;
next	1.25;

1.25
date	2010.10.12.23.37.11;	author deraadt;	state Exp;
branches;
next	1.24;

1.24
date	2010.03.31.17.51.42;	author deraadt;	state Exp;
branches;
next	1.23;

1.23
date	2010.01.01.05.47.00;	author deraadt;	state Exp;
branches;
next	1.22;

1.22
date	2009.05.03.00.25.30;	author deraadt;	state Exp;
branches;
next	1.21;

1.21
date	2009.04.19.00.59.39;	author deraadt;	state Exp;
branches;
next	1.20;

1.20
date	2009.04.17.07.17.13;	author deraadt;	state Exp;
branches;
next	1.19;

1.19
date	2009.02.20.00.02.49;	author krw;	state Exp;
branches;
next	1.18;

1.18
date	2009.02.15.15.56.45;	author krw;	state Exp;
branches;
next	1.17;

1.17
date	2007.02.14.23.38.20;	author deraadt;	state Exp;
branches;
next	1.16;

1.16
date	2006.03.06.09.40.54;	author deraadt;	state Exp;
branches;
next	1.15;

1.15
date	2005.05.04.17.08.07;	author miod;	state Exp;
branches;
next	1.14;

1.14
date	2005.01.12.18.25.28;	author deraadt;	state Exp;
branches;
next	1.13;

1.13
date	2005.01.11.19.21.07;	author deraadt;	state Exp;
branches;
next	1.12;

1.12
date	2004.12.29.00.45.32;	author deraadt;	state Exp;
branches;
next	1.11;

1.11
date	2004.10.02.14.47.12;	author krw;	state Exp;
branches;
next	1.10;

1.10
date	2003.08.08.19.39.14;	author deraadt;	state Exp;
branches;
next	1.9;

1.9
date	2003.08.08.03.28.49;	author deraadt;	state Exp;
branches;
next	1.8;

1.8
date	2003.01.03.18.36.08;	author krw;	state Exp;
branches;
next	1.7;

1.7
date	2002.05.01.19.21.28;	author mickey;	state Exp;
branches;
next	1.6;

1.6
date	2002.04.30.18.19.12;	author millert;	state Exp;
branches;
next	1.5;

1.5
date	2002.04.30.03.23.57;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	2002.04.30.01.31.20;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	2002.04.29.17.13.38;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	2002.04.28.19.25.09;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	2002.04.22.02.40.02;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.48
log
@Install cert.pem + ftp(1) binary that supports SSL, so the install script
can perform https fetches.  While non-critical for sets (which are verified
using signify), it is an uplift for communication towards the ftp.openbsd.org
cgi which provides mirror proposals, entropy seeds, and current time.
[The install script changes are not included in this commit]
ok beck jsing rpe
@
text
@#	$OpenBSD: list,v 1.47 2016/09/17 15:03:39 florian Exp $

SRCDIRS distrib/special

# copy the crunched binary, link to it, and kill it
COPY	${OBJDIR}/instbin			instbin
LINK	instbin					bin/arch
LINK	instbin					bin/cat
LINK	instbin					bin/chmod bin/chgrp sbin/chown
LINK	instbin					bin/cp
LINK	instbin					bin/date
LINK	instbin					bin/dd
LINK	instbin					bin/df
LINK	instbin					bin/ed
LINK	instbin					bin/hostname
LINK	instbin					bin/ksh bin/sh
ARGVLINK ksh					-sh
LINK	instbin					bin/ln
LINK	instbin					bin/ls
LINK	instbin					bin/md5 bin/sha256 bin/sha512
SPECIAL	rm bin/md5
LINK	instbin					bin/mkdir
LINK	instbin					bin/mt bin/eject
LINK	instbin					bin/mv
LINK	instbin					bin/pax bin/tar
LINK	instbin					bin/rm
LINK	instbin					bin/sleep
LINK	instbin					bin/stty
LINK	instbin					bin/sync
LINK	instbin					sbin/dhclient
LINK	instbin					sbin/disklabel
LINK	instbin					sbin/dmesg
LINK	instbin					sbin/fdisk
LINK	instbin					sbin/fsck
LINK	instbin					sbin/fsck_ffs
LINK	instbin					sbin/ifconfig
LINK	instbin					sbin/init
LINK	instbin					sbin/kbd
LINK	instbin					sbin/mknod
LINK	instbin					sbin/mount
LINK	instbin					sbin/mount_cd9660
LINK	instbin					sbin/mount_ffs
LINK	instbin					sbin/newfs
LINK	instbin					sbin/ping sbin/ping6
LINK	instbin					sbin/reboot sbin/halt
LINK	instbin					sbin/route
LINK	instbin					sbin/sysctl
LINK	instbin					sbin/umount
LINK	instbin					usr/bin/doas
LINK	instbin					usr/bin/encrypt
LINK	instbin					usr/bin/grep usr/bin/egrep usr/bin/fgrep
LINK	instbin					usr/bin/gzip usr/bin/gunzip usr/bin/gzcat
LINK	instbin					usr/bin/more usr/bin/less
LINK	instbin					usr/bin/sed
LINK	instbin					usr/bin/signify
LINK	instbin					usr/sbin/chroot
LINK	instbin					usr/sbin/pwd_mkdb
LINK	instbin					usr/sbin/installboot

# copy the MAKEDEV script and make some devices
SCRIPT	${DESTDIR}/dev/MAKEDEV			dev/MAKEDEV
SPECIAL	cd dev; sh MAKEDEV ramdisk

# for fdisk(8)
COPY	${DESTDIR}/usr/mdec/mbr			usr/mdec/mbr

# various files that we need in /etc for the install
COPY	${CURDIR}/../../miniroot/group		etc/group
COPY	${CURDIR}/../../miniroot/master.passwd	etc/master.passwd
SPECIAL	pwd_mkdb -p -d etc master.passwd; rm etc/master.passwd
COPY	${DESTDIR}/etc/signify/openbsd-${REV}-base.pub	etc/signify/openbsd-${REV}-base.pub
COPY	${CURDIR}/../../miniroot/protocols	etc/protocols
COPY	${CURDIR}/../../miniroot/services	etc/services
TERMCAP	vt100,vt220,dumb			usr/share/misc/termcap

SYMLINK	/tmp/i/fstab.shadow			etc/fstab
SYMLINK	/tmp/i/resolv.conf.shadow		etc/resolv.conf
SYMLINK	/tmp/i/hosts				etc/hosts

# and the installation tools
SCRIPT	${CURDIR}/../../miniroot/dot.profile	.profile
SCRIPT	${CURDIR}/../common/install.md		install.md
SCRIPT	${CURDIR}/../../miniroot/install.sub	install.sub
SPECIAL	chmod 755 install.sub
SYMLINK	install.sub				autoinstall
SYMLINK	install.sub				install
SYMLINK	install.sub				upgrade
@


1.47
log
@ping6(8) is now a hardlink to ping(8).
The instbin stuff looks good to deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.46 2016/09/13 22:27:50 rpe Exp $
a50 1
LINK	instbin					usr/bin/ftp
@


1.46
log
@Provide a stripped down group file for the install media.
Saves precious 896 bytes as a side effect.

OK deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.45 2016/09/04 09:54:22 rpe Exp $
d44 1
a44 1
LINK	instbin					sbin/ping
@


1.45
log
@Move files created by root during install/upgrade in a subdir of
/tmp with proper permissions so that unprivileged programs can not
tamper with them.

positive feedback from deraadt
OK halex
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.44 2016/09/03 10:57:11 rpe Exp $
d69 1
a69 1
COPY	${DESTDIR}/etc/group			etc/group
@


1.44
log
@Enable a stripped down version of doas(1) on the install media.

OK halex, tb, deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.43 2016/04/02 12:23:46 rpe Exp $
d77 3
a79 3
SYMLINK	/tmp/fstab.shadow			etc/fstab
SYMLINK	/tmp/resolv.conf.shadow			etc/resolv.conf
SYMLINK	/tmp/hosts				etc/hosts
@


1.43
log
@- merge install.sh into install.sub as do_install()
- merge upgrade.sh into install.sub as do_upgrade()
- delete install.sh and upgrade.sh
- make install.sub executable
- turn install and upgrade into symbolic links to install.sub
- add autoinstall symbolic link to install.sub
- change dot.profile to use these symlinks
- introduce a -m option to set MODE in install.sub
- alternativly set MODE and AUTO depending on PROGNAME
- execute the do_{install,upgrade) functions depending on $MODE

OK halex@@, krw@@
'go for it' deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.42 2015/04/13 21:27:07 deraadt Exp $
d49 1
@


1.42
log
@pwd_mkdb now fits onto the install media.  no more chroot games.
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.41 2015/04/02 16:13:24 deraadt Exp $
a82 2
SCRIPT	${CURDIR}/../../miniroot/upgrade.sh	upgrade
SCRIPT	${CURDIR}/../../miniroot/install.sh	install
d84 4
a87 1
SPECIAL	chmod 755 install upgrade
@


1.41
log
@more -> less; not less -> more
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.40 2015/03/11 15:27:32 deraadt Exp $
d57 1
@


1.40
log
@adjust for removal of expr (and while here, sort all these lists, with the
goal of eventually refactoring them)
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.39 2014/12/28 04:40:19 deraadt Exp $
d53 1
a53 1
LINK	instbin					usr/bin/less usr/bin/more
@


1.39
log
@Build special/encrypt into instbin, to prepare for dropping use of the
version in just installed base.
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.38 2014/12/23 17:17:17 deraadt Exp $
a8 1
LINK	instbin					bin/date
d11 1
d29 1
d56 1
@


1.38
log
@successful switchover to non-reach-around SRCDIR
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.37 2014/07/20 02:40:23 deraadt Exp $
d48 1
@


1.37
log
@Oddly, chmod chgrp chown were at the wrong path on these media.
from Jean-Philippe Ouellet
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.36 2014/03/03 07:40:34 deraadt Exp $
a3 1
SRCDIRS bin sbin
@


1.36
log
@use official 5.5 key
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.35 2014/01/20 05:09:47 jsing Exp $
d11 1
a11 1
LINK	instbin					bin/chmod
a29 1
LINK	instbin					sbin/chmod bin/chgrp sbin/chown
@


1.35
log
@Add installboot to i386 media.
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.34 2014/01/11 05:40:16 deraadt Exp $
d69 1
a69 1
COPY	${DESTDIR}/etc/signify/${REV}base.pub	etc/signify/${REV}base.pub
@


1.34
log
@No need for a bin/cpio link on the media, because the pax|tar binary does
not support cpio anymore.
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.33 2014/01/10 07:57:28 deraadt Exp $
d48 1
a54 1
LINK	instbin					sbin/sysctl
d56 1
@


1.33
log
@remove md5 after installing it (with the links to the sha256/512 commands).
this is because the md5/sha256/sha512 are in the same binary, found in the
md5 directory, but the version on the media lacks md5 support.  Understand?
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.32 2014/01/09 19:02:04 deraadt Exp $
d26 1
a26 1
LINK	instbin					bin/pax bin/tar bin/cpio
@


1.32
log
@copy the relevant key for the release onto the media
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.31 2014/01/08 22:17:52 deraadt Exp $
d22 1
@


1.31
log
@Take restore off the floppy media for now.  Sorry.
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.30 2014/01/08 21:53:35 deraadt Exp $
d67 1
@


1.30
log
@Switch to using the base sha256 command, rather than some customized
abomination.
install.sub chunk tested by rpe
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.29 2014/01/07 02:27:55 deraadt Exp $
a45 1
LINK	instbin					sbin/restore
@


1.29
log
@SRCDRS usr.bin usr.sbin is a bad idea (because of PIE).  The places we
pick binaries up must be compiled -static or at least in some safe
model for reuse.  Since we now use distrib/special for those, we can
safely remove usr.bin and usr.sbin from this list.
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.28 2012/10/30 18:39:44 krw Exp $
d21 1
d55 1
@


1.28
log
@Nuke dhclient-script and dhclient.conf 'script' directive. Do all
interface and route configuration via ioctl's and routing sockets.

This will break configurations using local enhancements of
dhclient-script, which will now require alternate arrangements.

Committing early to allow time to identify and develop required
alternatives.

Several proddings by deraadt@@.
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.27 2012/10/15 17:21:03 deraadt Exp $
d4 1
a4 1
SRCDIRS bin sbin usr.bin usr.sbin
@


1.27
log
@use the baseXX installed /usr/mdec directory instead of placing lots of
heavy boot media into the ramdisk.  i386 tested by okan, amd64 tested
by florian.
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.26 2010/10/18 04:07:50 deraadt Exp $
a73 3
# dhcp things
SCRIPT	${DESTDIR}/sbin/dhclient-script 	sbin/dhclient-script

d80 1
a80 1
SPECIAL	chmod 755 install upgrade sbin/dhclient-script
@


1.26
log
@Place a smaller spwd.db onto the install media.  Be consistant with the naming
of the "additional" list files (for architectures which split the list)
Then... cleanup some TZ which it is clear should not have been placed onto
certain media which don't have the space for them.
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.25 2010/10/12 23:37:11 deraadt Exp $
a4 1
SRCDIRS sys/arch/i386/stand
a53 1
LINK	instbin					usr/mdec/installboot
d59 1
a59 2
# we need the contents of /usr/mdec
COPY	${DESTDIR}/usr/mdec/biosboot		usr/mdec/biosboot
a60 1
COPY	${DESTDIR}/usr/mdec/boot		usr/mdec/boot
@


1.25
log
@Do not bother putting mount_msdos or mount_ext2fs on media which does not
need it.
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.24 2010/03/31 17:51:42 deraadt Exp $
d68 2
a69 1
COPY	${DESTDIR}/etc/spwd.db			etc/spwd.db
@


1.24
log
@put date(1) onto the media, it fits
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.23 2010/01/01 05:47:00 deraadt Exp $
a41 1
LINK	instbin					sbin/mount_ext2fs
a42 1
LINK	instbin					sbin/mount_msdos
@


1.23
log
@add arch(1) to the ramdisk, it is tiny and we will soon need it
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.22 2009/05/03 00:25:30 deraadt Exp $
d11 1
@


1.22
log
@We will need bin/sleep on all ramdisks.
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.21 2009/04/19 00:59:39 deraadt Exp $
d9 1
@


1.21
log
@Use sysctl -n hw.disknames instead of the custom disknames program
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.20 2009/04/17 07:17:13 deraadt Exp $
d25 1
@


1.20
log
@more syncronization steps..
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.19 2009/02/20 00:02:49 krw Exp $
d53 1
a53 1
LINK	instbin					usr/bin/disknames
@


1.19
log
@Don't copy disktab onto install media as it is not used during
installs. Also nuke the link created for disktab.

ok deraadt@@ miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.18 2009/02/15 15:56:45 krw Exp $
d57 1
a57 1
SCRIPT ${DESTDIR}/dev/MAKEDEV			dev/MAKEDEV
@


1.18
log
@Build install media with disktab.shadow already in /tmp, rather
than have the install script copy it there. Shrinks install script,
removes an extra copy of disktab.

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.17 2007/02/14 23:38:20 deraadt Exp $
a67 1
SCRIPT	${DESTDIR}/etc/disktab			tmp/disktab.shadow
a71 1
SYMLINK	/tmp/disktab.shadow			etc/disktab
@


1.17
log
@put the disknames command on all install media (hope i did not miss any) ok krw@@
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.16 2006/03/06 09:40:54 deraadt Exp $
d68 1
a68 1
SCRIPT	${DESTDIR}/etc/disktab			etc/disktab.shadow
@


1.16
log
@eject -> mt (except on alpha where size tests are needed)
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.15 2005/05/04 17:08:07 miod Exp $
d53 1
@


1.15
log
@Put pax/tar/cpio at the same location in all installation media.
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.14 2005/01/12 18:25:28 deraadt Exp $
d21 1
@


1.14
log
@remove some differences
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.13 2005/01/11 19:21:07 deraadt Exp $
d22 1
a22 1
LINK	instbin					bin/pax bin/cpio bin/tar
@


1.13
log
@put a seperate and real fsck on the media
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.12 2004/12/29 00:45:32 deraadt Exp $
a11 1
LINK	instbin					bin/pax bin/cpio bin/tar
d15 3
d22 1
a23 2
LINK	instbin					bin/hostname
LINK	instbin					bin/ksh bin/sh
d26 1
d28 1
a28 1
LINK	instbin					sbin/dhclient
a29 1
LINK	instbin					sbin/dmesg
a31 1
LINK	instbin					sbin/reboot sbin/halt
d34 1
d38 1
d41 1
a41 1
LINK	instbin					sbin/mount_ext2fs
d43 1
a43 1
LINK	instbin					sbin/newfs
d47 1
a47 1
LINK	instbin					sbin/kbd
a48 1
LINK	instbin					usr/bin/ftp
a52 1
ARGVLINK ksh					-sh
@


1.12
log
@nothing uses a SRCDIR of gnu anymore, proposed by mickey, tested by me
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.11 2004/10/02 14:47:12 krw Exp $
d29 2
a30 1
LINK	instbin					sbin/fsck_ffs sbin/fsck
@


1.11
log
@Last use of sleep(1) in install scripts was eliminated by recent
re-write of install_cd() so remove sleep(1) from install media.

"sure!" deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.10 2003/08/08 19:39:14 deraadt Exp $
d4 1
a4 1
SRCDIRS usr.bin bin sbin usr.sbin gnu/usr.bin
@


1.10
log
@make the turd shiny
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.9 2003/08/08 03:28:49 deraadt Exp $
a22 1
LINK	instbin					bin/sleep
@


1.9
log
@rsh goes away, sorry
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.8 2003/01/03 18:36:08 krw Exp $
a49 1
#LINK	instbin					usr/bin/rsh
@


1.8
log
@Save a few more bytes on install media by stripping comments from
dhclient-script and disktab files in architectures where this wasn't
already being done.

OK deraadt@@.
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.7 2002/05/01 19:21:28 mickey Exp $
d50 1
a50 1
LINK	instbin					usr/bin/rsh
@


1.7
log
@when filtering termcap selecet vt220, not vt200, since that's what we gonna use later, plus a few rcsid vicinity cleanups; millert@@ ok
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.6 2002/04/30 18:19:12 millert Exp $
d67 1
a67 1
COPY	${DESTDIR}/etc/disktab			etc/disktab.shadow
d78 1
a78 1
COPY	${DESTDIR}/sbin/dhclient-script 	sbin/dhclient-script
d86 1
a86 1
SPECIAL	chmod 755 install upgrade
@


1.6
log
@Swap sbin/fsck and sbin/fsck_ffs in the LINK line.  Now that we use
makeconf.awk, order matters here.  With the previous order only the
fsck wrapper was included and fsck_ffs was linked to it.
This resulted in fsck fork bombing until the proc table was full.
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.5 2002/04/30 03:23:57 deraadt Exp $
d70 1
a70 1
TERMCAP	vt100,vt200,dumb			usr/share/misc/termcap
@


1.5
log
@make use of makeconf.awk
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.4 2002/04/30 01:31:20 deraadt Exp $
d30 1
a30 1
LINK	instbin					sbin/fsck sbin/fsck_ffs
@


1.4
log
@use SCRIPT command
@
text
@d1 5
a5 1
#	$OpenBSD: list,v 1.3 2002/04/29 17:13:38 deraadt Exp $
a10 1
LINK	instbin					bin/chgrp
d12 1
a12 1
LINK	instbin					bin/cpio bin/pax bin/tar
d22 1
a22 1
LINK	instbin					bin/sh bin/ksh
d25 1
a25 1
LINK	instbin					sbin/chown
d31 1
a31 1
LINK	instbin					sbin/halt sbin/reboot
d46 1
a46 1
LINK	instbin					usr/bin/egrep usr/bin/fgrep usr/bin/grep
a53 1
SPECIAL	/bin/rm instbin
@


1.3
log
@generate termcap file using a list2sh.awk directrive; distrib becomes a lot smaller again
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.2 2002/04/28 19:25:09 deraadt Exp $
d4 47
a50 46
COPY	${OBJDIR}/instbin	instbin
LINK	instbin			bin/cat
LINK	instbin			bin/chmod
LINK	instbin			bin/chgrp
LINK	instbin			bin/cp
LINK	instbin			bin/cpio bin/pax bin/tar
LINK	instbin			bin/dd
LINK	instbin			bin/df
LINK	instbin			bin/ed
LINK	instbin			bin/ln
LINK	instbin			bin/ls
LINK	instbin			bin/mkdir
LINK	instbin			bin/mv
LINK	instbin			bin/rm
LINK	instbin			bin/hostname
LINK	instbin			bin/sh bin/ksh
LINK	instbin			bin/sleep
LINK	instbin			bin/stty
LINK	instbin			sbin/chown
LINK	instbin			sbin/disklabel
LINK	instbin			sbin/dhclient
LINK	instbin			sbin/fdisk
LINK	instbin			sbin/dmesg
LINK	instbin			sbin/fsck sbin/fsck_ffs
LINK	instbin			sbin/halt sbin/reboot
LINK	instbin			sbin/ifconfig
LINK	instbin			sbin/init
LINK	instbin			sbin/mknod
LINK	instbin			sbin/mount
LINK	instbin			sbin/mount_cd9660
LINK	instbin			sbin/mount_ffs
LINK	instbin			sbin/mount_msdos
LINK	instbin			sbin/mount_ext2fs
LINK	instbin			sbin/ping
LINK	instbin			sbin/newfs
LINK	instbin			sbin/restore
LINK	instbin			sbin/route
LINK	instbin			sbin/umount
LINK	instbin			sbin/kbd
LINK	instbin			usr/bin/egrep usr/bin/fgrep usr/bin/grep
LINK	instbin			usr/bin/ftp
LINK	instbin			usr/bin/gzip usr/bin/gunzip usr/bin/gzcat
LINK	instbin			usr/bin/less usr/bin/more
LINK	instbin			usr/bin/rsh
LINK	instbin			usr/bin/sed
LINK	instbin			usr/mdec/installboot
a52 3
# `internal' crunchgen links
ARGVLINK ksh		-sh

d54 1
a54 1
SPECIAL sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' < ${DESTDIR}/dev/MAKEDEV	 > dev/MAKEDEV
d58 3
a60 3
COPY	${DESTDIR}/usr/mdec/biosboot	usr/mdec/biosboot
COPY	${DESTDIR}/usr/mdec/mbr		usr/mdec/mbr
COPY	${DESTDIR}/usr/mdec/boot	usr/mdec/boot
d63 11
a73 11
COPY	${DESTDIR}/etc/group		etc/group
COPY	${DESTDIR}/etc/spwd.db		etc/spwd.db
COPY	${DESTDIR}/etc/disktab		etc/disktab.shadow
COPY	${CURDIR}/../../miniroot/protocols etc/protocols
COPY	${CURDIR}/../../miniroot/services  etc/services
TERMCAP	vt100,vt200,dumb		usr/share/misc/termcap

SYMLINK	/tmp/disktab.shadow		etc/disktab
SYMLINK	/tmp/fstab.shadow		etc/fstab
SYMLINK	/tmp/resolv.conf.shadow		etc/resolv.conf
SYMLINK	/tmp/hosts			etc/hosts
d76 1
a76 1
COPY	${DESTDIR}/sbin/dhclient-script sbin/dhclient-script
d79 5
a83 5
SPECIAL sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' < ${CURDIR}/../../miniroot/dot.profile	 > .profile
SPECIAL sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' -e "s/^ARCH=ARCH$/ARCH=`arch -ks`/" < ${CURDIR}/../common/install.md	 > install.md
SPECIAL	sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' < ${CURDIR}/../../miniroot/upgrade.sh > upgrade
SPECIAL	sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' < ${CURDIR}/../../miniroot/install.sh > install
SPECIAL sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' -e "/^VERSION=/s/=.*/=${REV}/" < ${CURDIR}/../../miniroot/install.sub > install.sub
@


1.2
log
@remove confusion about disktab
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.1 2002/04/22 02:40:02 deraadt Exp $
d70 1
a78 3

# and the common installation tools
COPY	${CURDIR}/../common/termcap.vt		usr/share/misc/termcap
@


1.1
log
@move things back a directory
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.28 2002/04/21 17:09:49 deraadt Exp $
d53 1
a53 1
ARGVLINK sh		-sh
@

