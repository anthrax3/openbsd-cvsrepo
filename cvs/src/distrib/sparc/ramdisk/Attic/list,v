head	1.31;
access;
symbols
	OPENBSD_4_8:1.30.0.6
	OPENBSD_4_8_BASE:1.30
	OPENBSD_4_7:1.30.0.2
	OPENBSD_4_7_BASE:1.30
	OPENBSD_4_6:1.30.0.4
	OPENBSD_4_6_BASE:1.30
	OPENBSD_4_5:1.28.0.2
	OPENBSD_4_5_BASE:1.28
	OPENBSD_4_4:1.26.0.2
	OPENBSD_4_4_BASE:1.26
	OPENBSD_4_3:1.25.0.16
	OPENBSD_4_3_BASE:1.25
	OPENBSD_4_2:1.25.0.12
	OPENBSD_4_2_BASE:1.25
	OPENBSD_4_1:1.25.0.10
	OPENBSD_4_1_BASE:1.25
	OPENBSD_4_0:1.25.0.8
	OPENBSD_4_0_BASE:1.25
	OPENBSD_3_9:1.25.0.6
	OPENBSD_3_9_BASE:1.25
	OPENBSD_3_8:1.25.0.4
	OPENBSD_3_8_BASE:1.25
	OPENBSD_3_7:1.25.0.2
	OPENBSD_3_7_BASE:1.25
	OPENBSD_3_6:1.24.0.4
	OPENBSD_3_6_BASE:1.24
	OPENBSD_3_5:1.24.0.2
	OPENBSD_3_5_BASE:1.24
	OPENBSD_3_4:1.23.0.2
	OPENBSD_3_4_BASE:1.23
	OPENBSD_3_3:1.22.0.2
	OPENBSD_3_3_BASE:1.22
	OPENBSD_3_2:1.19.0.2
	OPENBSD_3_2_BASE:1.19
	OPENBSD_3_1:1.12.0.4
	OPENBSD_3_1_BASE:1.12
	OPENBSD_3_0:1.12.0.2
	OPENBSD_3_0_BASE:1.12
	OPENBSD_2_9:1.10.0.10
	OPENBSD_2_9_BASE:1.10
	OPENBSD_2_8:1.10.0.8
	OPENBSD_2_8_BASE:1.10
	OPENBSD_2_7:1.10.0.6
	OPENBSD_2_7_BASE:1.10
	OPENBSD_2_6:1.10.0.4
	OPENBSD_2_6_BASE:1.10
	OPENBSD_2_5:1.10.0.2
	OPENBSD_2_5_BASE:1.10
	OPENBSD_2_4:1.8.0.4
	OPENBSD_2_4_BASE:1.8
	OPENBSD_2_3:1.8.0.2
	OPENBSD_2_3_BASE:1.8
	OPENBSD_2_2:1.7.0.2
	OPENBSD_2_2_BASE:1.7
	OPENBSD_2_1:1.4.0.2
	OPENBSD_2_1_BASE:1.4;
locks; strict;
comment	@# @;


1.31
date	2010.10.18.04.08.32;	author deraadt;	state dead;
branches;
next	1.30;

1.30
date	2009.06.02.06.17.47;	author todd;	state Exp;
branches;
next	1.29;

1.29
date	2009.04.17.03.55.20;	author deraadt;	state Exp;
branches;
next	1.28;

1.28
date	2009.02.20.00.02.49;	author krw;	state Exp;
branches;
next	1.27;

1.27
date	2009.02.15.15.56.45;	author krw;	state Exp;
branches;
next	1.26;

1.26
date	2008.07.02.14.01.35;	author todd;	state Exp;
branches;
next	1.25;

1.25
date	2005.01.11.19.21.08;	author deraadt;	state Exp;
branches;
next	1.24;

1.24
date	2003.10.01.22.03.29;	author miod;	state Exp;
branches;
next	1.23;

1.23
date	2003.09.04.08.16.17;	author henning;	state Exp;
branches;
next	1.22;

1.22
date	2003.02.15.12.15.48;	author krw;	state Exp;
branches;
next	1.21;

1.21
date	2003.01.30.22.09.56;	author deraadt;	state Exp;
branches;
next	1.20;

1.20
date	2003.01.03.18.36.08;	author krw;	state Exp;
branches;
next	1.19;

1.19
date	2002.08.29.01.53.37;	author krw;	state Exp;
branches;
next	1.18;

1.18
date	2002.04.30.07.24.22;	author deraadt;	state Exp;
branches;
next	1.17;

1.17
date	2002.04.30.04.05.49;	author deraadt;	state Exp;
branches;
next	1.16;

1.16
date	2002.04.30.01.31.20;	author deraadt;	state Exp;
branches;
next	1.15;

1.15
date	2002.04.29.17.13.39;	author deraadt;	state Exp;
branches;
next	1.14;

1.14
date	2002.04.22.02.43.16;	author deraadt;	state Exp;
branches;
next	1.13;

1.13
date	2002.04.21.17.11.27;	author deraadt;	state Exp;
branches;
next	1.12;

1.12
date	2001.07.03.00.12.07;	author deraadt;	state Exp;
branches;
next	1.11;

1.11
date	2001.06.23.19.44.58;	author deraadt;	state Exp;
branches;
next	1.10;

1.10
date	98.12.21.03.31.50;	author millert;	state Exp;
branches;
next	1.9;

1.9
date	98.12.20.23.36.43;	author millert;	state Exp;
branches;
next	1.8;

1.8
date	97.12.01.02.44.16;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	97.09.19.06.07.18;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	97.05.30.17.29.40;	author grr;	state Exp;
branches;
next	1.5;

1.5
date	97.05.29.09.19.51;	author grr;	state Exp;
branches;
next	1.4;

1.4
date	97.05.25.22.56.40;	author grr;	state Exp;
branches;
next	1.3;

1.3
date	97.05.21.01.16.47;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	97.05.15.00.11.17;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	97.05.14.20.44.37;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.31
log
@Place a smaller spwd.db onto the install media.  Be consistant with the naming
of the "additional" list files (for architectures which split the list)
Then... cleanup some TZ which it is clear should not have been placed onto
certain media which don't have the space for them.
@
text
@#	$OpenBSD: list,v 1.30 2009/06/02 06:17:47 todd Exp $
#	$NetBSD: list,v 1.2.4.2 1996/06/26 19:25:00 pk Exp $

# Sparc extra's
LINK	instbin					bin/sha256

LINK	instbin					sbin/bioctl
LINK	instbin					sbin/disklabel
LINK	instbin					sbin/restore
LINK	instbin					usr/bin/grep usr/bin/egrep usr/bin/fgrep
LINK	instbin					usr/bin/less usr/bin/more
LINK	instbin					usr/sbin/installboot

SRCDIRS	sys/arch/sparc/stand

SYMLINK	/tmp	var/tmp

# copy the MAKEDEV script and make some devices
SCRIPT	${DESTDIR}/dev/MAKEDEV			dev/MAKEDEV
SPECIAL	cd dev; sh MAKEDEV ramdisk

# we need the contents of /usr/mdec (but not boot or binstall)
COPYDIR	${DESTDIR}/usr/mdec			usr/mdec
SPECIAL	rm -f usr/mdec/binstall			usr/mdec/installboot

# various files that we need in /etc for the install
SYMLINK	/tmp/fstab.shadow			etc/fstab
SYMLINK	/tmp/resolv.conf.shadow			etc/resolv.conf
SYMLINK	/tmp/hosts				etc/hosts
TERMCAP	vt100,vt220,dumb,sun			usr/share/misc/termcap

# and the installation tools
SCRIPT	${ARCHDIR}/../install.md		install.md

# no NFS support in sparc ramdisk
REMOVE	sbin/mount_nfs

HASH	var/hash
TZ
@


1.30
log
@add TZ on install media where it should fit
ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.29 2009/04/17 03:55:20 deraadt Exp $
@


1.29
log
@Put bin/sha256 and build a hash directory onto the media that can fit
them
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.28 2009/02/20 00:02:49 krw Exp $
d39 1
@


1.28
log
@Don't copy disktab onto install media as it is not used during
installs. Also nuke the link created for disktab.

ok deraadt@@ miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.27 2009/02/15 15:56:45 krw Exp $
d5 2
d37 2
@


1.27
log
@Build install media with disktab.shadow already in /tmp, rather
than have the install script copy it there. Shrinks install script,
removes an extra copy of disktab.

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.26 2008/07/02 14:01:35 todd Exp $
a24 2
SCRIPT	${DESTDIR}/etc/disktab			tmp/disktab.shadow
SYMLINK	/tmp/disktab.shadow			etc/disktab
@


1.26
log
@add bio & bioctl
ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.25 2005/01/11 19:21:08 deraadt Exp $
d25 1
a25 1
SCRIPT	${DESTDIR}/etc/disktab			etc/disktab.shadow
@


1.25
log
@put a seperate and real fsck on the media
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.24 2003/10/01 22:03:29 miod Exp $
d5 1
@


1.24
log
@Do not include mount_nfs on sparc bsd.rd and floppies, as they are missing
NFS support ; however, miniroot has proper NFS support.
ok deraadt@@ some time ago
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.23 2003/09/04 08:16:17 henning Exp $
d5 5
a9 5
LINK	instbin				sbin/disklabel
LINK	instbin				sbin/restore
LINK	instbin				usr/bin/grep usr/bin/egrep usr/bin/fgrep
LINK	instbin				usr/bin/less usr/bin/more
LINK	instbin				usr/sbin/installboot
d16 1
a16 1
SCRIPT	${DESTDIR}/dev/MAKEDEV		dev/MAKEDEV
d20 2
a21 2
COPYDIR	${DESTDIR}/usr/mdec		usr/mdec
SPECIAL	rm -f usr/mdec/binstall		usr/mdec/installboot
d24 6
a29 6
SCRIPT	${DESTDIR}/etc/disktab		etc/disktab.shadow
SYMLINK	/tmp/disktab.shadow		etc/disktab
SYMLINK	/tmp/fstab.shadow		etc/fstab
SYMLINK	/tmp/resolv.conf.shadow		etc/resolv.conf
SYMLINK	/tmp/hosts			etc/hosts
TERMCAP	vt100,vt220,dumb,sun		usr/share/misc/termcap
d32 1
a32 1
SCRIPT	${ARCHDIR}/../install.md	install.md
@


1.23
log
@include restore(8) on ramdisk
ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.21 2003/01/30 22:09:56 deraadt Exp $
d33 3
@


1.22
log
@Now that we are 3.3-beta re-enable upgrade on sparc. ok deraadt@@.

Remove another dated comment about 3.1 to 3.2 upgrade.
@
text
@d6 1
@


1.21
log
@remove bogus comment
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.20 2003/01/03 18:36:08 krw Exp $
d30 1
a30 1
# and the installation tools (no upgrade from 3.1 to 3.2)
a31 1
REMOVE	upgrade
@


1.20
log
@Save a few more bytes on install media by stripping comments from
dhclient-script and disktab files in architectures where this wasn't
already being done.

OK deraadt@@.
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.19 2002/08/29 01:53:37 krw Exp $
a11 1
# Minimize use of MFS
@


1.19
log
@Add a new verb to list2sh.awk, 'REMOVE'. This allows the easy
disabling of '(U)pgrade' in architectures by adding

REMOVE upgrade

to the end of the 'list' file for that architecture.

Add code to dot.profile to check for the presence of the upgrade
script before offering to (U)pgrade.

Use the new verb to disable upgrades for sparc.

ok deraadt@@.
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.18 2002/04/30 07:24:22 deraadt Exp $
d24 1
a24 1
COPY	${DESTDIR}/etc/disktab		etc/disktab.shadow
@


1.18
log
@first pass of instbin removal movement
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.17 2002/04/30 04:05:49 deraadt Exp $
d31 1
a31 1
# and the installation tools
d33 1
@


1.17
log
@tset bye bye
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.16 2002/04/30 01:31:20 deraadt Exp $
a8 1
SPECIAL /bin/rm instbin
@


1.16
log
@use SCRIPT command
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.15 2002/04/29 17:13:39 deraadt Exp $
a6 1
LINK	instbin				usr/bin/tset usr/bin/reset
@


1.15
log
@generate termcap file using a list2sh.awk directrive; distrib becomes a lot smaller again
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.14 2002/04/22 02:43:16 deraadt Exp $
d5 5
a9 5
LINK	instbin			sbin/disklabel
LINK	instbin			usr/bin/grep usr/bin/egrep usr/bin/fgrep
LINK	instbin			usr/bin/tset usr/bin/reset
LINK	instbin			usr/bin/less usr/bin/more
LINK	instbin			usr/sbin/installboot
d18 1
a18 1
SPECIAL sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' < ${DESTDIR}/dev/MAKEDEV	 > dev/MAKEDEV
d22 2
a23 2
COPYDIR	${DESTDIR}/usr/mdec	usr/mdec
SPECIAL	rm -f usr/mdec/binstall usr/mdec/installboot
d34 1
a34 1
SPECIAL sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' -e "s/^ARCH=ARCH$/ARCH=`arch -ks`/" < ${ARCHDIR}/../install.md	 > install.md
@


1.14
log
@use one common dot.profile for all
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.13 2002/04/21 17:11:27 deraadt Exp $
a24 3
# and a few useful bits of the termcap file (512K and still growing 8-)
SPECIAL tic -C ${CURDIR}/../../share/termtypes/termtypes.master | sed -n -e 's,/usr/share/lib/tabset,/usr/share/tabset,g' -e 's,/usr/lib/tabset,/usr/share/tabset,g' -e '/^dumb|/,/:[ 	]*$/p' -e '/^unknown|/,/:[ 	]*$/p' -e '/^sun.*|/,/:[ 	]*$/p' -e '/^vt.*|/,/:[ 	]*$/p' -e '/^pc3|/,/:[ 	]*$/p' -e '/^pcvt.*|/,/:[ 	]*$/p' > usr/share/misc/termcap

d31 1
@


1.13
log
@squish it down
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.12 2001/07/03 00:12:07 deraadt Exp $
a35 1
SPECIAL sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' < ${ARCHDIR}/../dot.profile	 > .profile
@


1.12
log
@proper access to install.md file
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.11 2001/06/23 19:44:58 deraadt Exp $
d6 5
a10 7

SYMLINK	../../instbin		usr/bin/basename
SYMLINK ../../instbin		usr/bin/grep usr/bin/egrep usr/bin/fgrep
SYMLINK ../../instbin		usr/bin/rsh
SYMLINK ../../instbin		usr/bin/tset usr/bin/reset
SYMLINK	../../instbin		usr/bin/less usr/bin/more
SYMLINK	../../instbin		usr/sbin/installboot
d18 1
a18 1
COPY	${DESTDIR}/dev/MAKEDEV		dev/MAKEDEV
d36 2
a37 2
COPY	${ARCHDIR}/../ramdisk/dot.profile	.profile
SPECIAL sed -e '/^#[ 	].*$/d' -e "s/^ARCH=ARCH$/ARCH=`arch -s`/" < ${ARCHDIR}/../install.md	 > install.md
@


1.11
log
@argh.  stop using kernfs, using dmesg using sysctl.  encode ARCH into
install.md at build time.  remove some crud.  and the icing on the cake:
skip testing all this until next week
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.10 1998/12/21 03:31:50 millert Exp $
d39 1
a39 1
SPECIAL sed -e '/^#[ 	].*$/d' -e "s/^ARCH=ARCH$/ARCH=`arch -s`/" < ${CURDIR}/../common/install.md	 > install.md
@


1.10
log
@add missing -e
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.9 1998/12/20 23:36:43 millert Exp $
d39 1
a39 1
COPY	${ARCHDIR}/../install.md	install.md
@


1.9
log
@termcap.src is no more, run tic against termtypes.master instead
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.8 1997/12/01 02:44:16 deraadt Exp $
d28 1
a28 1
SPECIAL tic -C ${CURDIR}/../../share/termtypes/termtypes.master | sed -n 's,/usr/share/lib/tabset,/usr/share/tabset,g' -e 's,/usr/lib/tabset,/usr/share/tabset,g' -e '/^dumb|/,/:[ 	]*$/p' -e '/^unknown|/,/:[ 	]*$/p' -e '/^sun.*|/,/:[ 	]*$/p' -e '/^vt.*|/,/:[ 	]*$/p' -e '/^pc3|/,/:[ 	]*$/p' -e '/^pcvt.*|/,/:[ 	]*$/p' > usr/share/misc/termcap
@


1.8
log
@no need for shared installboot
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.7 1997/09/19 06:07:18 deraadt Exp $
d28 1
a28 2
# COPY	${CURDIR}/../../share/termcap/termcap.src usr/share/misc/termcap
SPECIAL sed -n -e '/^dumb|/,/:[ 	]*$/p' -e '/^unknown|/,/:[ 	]*$/p' -e '/^sun.*|/,/:[ 	]*$/p' -e '/^vt.*|/,/:[ 	]*$/p' -e '/^pc3|/,/:[ 	]*$/p' -e '/^pcvt.*|/,/:[ 	]*$/p' ${CURDIR}/../../share/termcap/termcap.src > usr/share/misc/termcap
@


1.7
log
@zboot went away
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.6 1997/05/30 17:29:40 grr Exp $
a15 3
# crunchgen source directory specials
#CRUNCHSPECIAL installboot srcdir sys/arch/sparc/stand/installboot

d25 1
a25 4
SPECIAL	rm -f usr/mdec/binstall

# the zoneinfo
# COPYDIR	${DESTDIR}/usr/share/zoneinfo	usr/share/zoneinfo
a40 4

# no point in making the fs bootable if there's no bsd in there
#SPECIAL	ln usr/mdec/boot boot
#SPECIAL sync; ${DESTDIR}/usr/mdec/binstall -v ffs ${TARGDIR}
@


1.6
log
@minor tweaks to not bother making the ramdisk.fs image bootable, since there's
no /bsd there to boot and fix a little problem with ${BOOT} != .../boot
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.5 1997/05/29 09:19:51 grr Exp $
d26 1
a26 1
# we need the contents of /usr/mdec (but not zboot or binstall)
d28 1
a28 1
SPECIAL	rm -f usr/mdec/zboot usr/mdec/binstall
@


1.5
log
@make ramdisk use special compressed kernel capable boot blocks and related issues
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.4 1997/05/25 22:56:40 grr Exp $
d47 4
a50 3
#COPY	${DESTDIR}/usr/mdec/boot	boot
SPECIAL	ln usr/mdec/boot boot
SPECIAL sync; ${DESTDIR}/usr/mdec/binstall -v ffs ${TARGDIR}
@


1.4
log
@commit updated ramdisk stuff, even if it's not going into release
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.3 1997/05/21 01:16:47 deraadt Exp $
d26 1
a26 1
# we need the contents of /usr/mdec
d28 1
d47 2
a48 1
COPY	${DESTDIR}/usr/mdec/boot	boot
@


1.3
log
@no awk; need tset
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.2 1997/05/15 00:11:17 deraadt Exp $
d44 1
a44 1
COPY	${ARCHDIR}/../miniroot/dot.profile	.profile
@


1.2
log
@fit vi onto sparc ramdisk
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.1 1997/05/14 20:44:37 deraadt Exp $
d10 1
@


1.1
log
@shareable ramdisk creation; in part by grr
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.8 1997/05/05 13:55:27 grr Exp $
a7 2
SYMLINK ../../instbin		usr/bin/cksum usr/bin/sum
SYMLINK ../../instbin		usr/bin/getopt
a8 1
SYMLINK ../../instbin		usr/bin/netstat
a9 1
SYMLINK ../../instbin		usr/bin/tset usr/bin/reset
a11 1
SYMLINK	../../instbin		usr/sbin/sysctl
@
