head	1.2;
access;
symbols
	powerpc_1:1.1.1.1
	powerpc_1:1.1.1;
locks; strict;
comment	@# @;


1.2
date	97.03.03.16.31.13;	author rahnds;	state dead;
branches;
next	1.1;

1.1
date	96.12.21.20.46.18;	author rahnds;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	96.12.21.20.46.18;	author rahnds;	state Exp;
branches;
next	;


desc
@@


1.2
log
@cleanup of powerpc miniroot/ramdisk installation, scrap floppy installation
since ramdisk installation works much better.
@
text
@#
#	$NetBSD: Makefile.inc,v 1.1 1995/07/18 04:13:14 briggs Exp $
#

# TOP is assumed to be defined by Makefile including this one.

CBIN=		raminst
COMMONDIR=	${TOP}/kc-common

MOUNT_POINT?=	${TOP}/kc/fs

LISTS=		${COMMONDIR}/list ${.CURDIR}/list
CRUNCHCONF=	${COMMONDIR}/${CBIN}.conf
MTREE=		${COMMONDIR}/mtree.conf

all: ${CBIN}
	mkdir -p ${MOUNT_POINT}
	mtree -def ${MTREE} -p ${MOUNT_POINT}/ -u
	TOPDIR=${TOP} CURDIR=${.CURDIR} OBJDIR=${.OBJDIR} \
	    TARGDIR=${MOUNT_POINT} sh ${TOP}/runlist.sh ${LISTS}
	mkcdfs ${IMAGE} ${MOUNT_POINT}

unconfig:
	-/bin/rm -f ${IMAGE}
	-/bin/rm -rf ${MOUNT_POINT}

${CBIN}.mk ${CBIN}.cache ${CBIN}.c: ${CRUNCHCONF}
	crunchgen -E -D ${BSDSRCDIR} -L ${DESTDIR}/usr/lib ${CRUNCHCONF}

${CBIN}: ${CBIN}.mk ${CBIN}.cache ${CBIN}.c
	make -f ${CBIN}.mk all

clean cleandir:
	/bin/rm -f core ${IMAGE} ${CBIN} ${CBIN}.mk ${CBIN}.cache *.o *.lo *.c
	/bin/rm -rf ${MOUNT_POINT}

.include <bsd.obj.mk>
.include <bsd.subdir.mk>
@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@Check-in of powerpc distrib support.
NOTE: This will not work until the other pieces are checked in.
This is primarily the NetBSD powerpc port, with modifications
to support ELF.

The distrib pieces will not work until the ELF crunchgen support is
checked in.
@
text
@@
