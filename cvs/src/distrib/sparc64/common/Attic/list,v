head	1.8;
access;
symbols
	OPENBSD_3_1:1.7.0.2
	OPENBSD_3_1_BASE:1.7
	OPENBSD_3_0:1.3.0.2
	OPENBSD_3_0_BASE:1.3;
locks; strict;
comment	@# @;


1.8
date	2002.04.21.07.30.58;	author deraadt;	state dead;
branches;
next	1.7;

1.7
date	2002.04.13.08.13.33;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	2002.03.23.23.29.16;	author krw;	state Exp;
branches;
next	1.5;

1.5
date	2001.12.17.00.41.51;	author krw;	state Exp;
branches;
next	1.4;

1.4
date	2001.12.13.01.40.15;	author krw;	state Exp;
branches;
next	1.3;

1.3
date	2001.10.13.05.34.13;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	2001.10.12.20.50.19;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	2001.10.10.04.21.02;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.8
log
@bit by bit i will fix this madness
@
text
@#	$OpenBSD: list,v 1.7 2002/04/13 08:13:33 deraadt Exp $
#	$NetBSD: list,v 1.4.4.1 1996/06/20 20:30:26 pk Exp $

SRCDIRS distrib/special
SRCDIRS gnu/usr.bin usr.bin bin sbin usr.sbin

# copy the crunched binary, link to it, and kill it
COPY	${OBJDIR}/instbin	instbin
LINK	instbin			bin/cat
LINK	instbin			bin/chmod bin/chgrp sbin/chown
LINK	instbin			bin/cp
LINK	instbin			bin/dd
LINK	instbin			bin/df
LINK	instbin			bin/ed
LINK	instbin			bin/expr
LINK	instbin			bin/hostname
LINK	instbin			bin/ln
LINK	instbin			bin/ls
LINK	instbin			bin/mkdir
LINK	instbin			bin/mt
LINK	instbin			bin/mv
LINK	instbin			bin/pax bin/tar bin/cpio
LINK	instbin			bin/rm
LINK	instbin			bin/ksh bin/sh
LINK	instbin			bin/stty
LINK	instbin			bin/sleep
LINK	instbin			bin/sync
LINK	instbin			sbin/disklabel
LINK	instbin			sbin/dmesg
LINK	instbin			sbin/fsck_ffs sbin/fsck
LINK	instbin			sbin/reboot sbin/halt
LINK	instbin			sbin/ifconfig
LINK	instbin			sbin/dhclient
LINK	instbin			sbin/init
LINK	instbin			sbin/mknod
LINK	instbin			sbin/mount
LINK	instbin			sbin/mount_cd9660
LINK	instbin			sbin/mount_ffs
LINK	instbin			sbin/mount_nfs
LINK	instbin			sbin/newfs sbin/mount_mfs
LINK	instbin			sbin/ping
LINK	instbin			sbin/route
LINK	instbin			sbin/umount
LINK	instbin			usr/bin/egrep usr/bin/fgrep usr/bin/grep
LINK	instbin			usr/bin/ftp
LINK	instbin			usr/bin/gzip usr/bin/gunzip usr/bin/gzcat
LINK	instbin			usr/bin/less usr/bin/more
LINK	instbin			usr/bin/sed

ARGVLINK ksh		-sh

# various files that we need in /etc for the install
COPY	${DESTDIR}/etc/group			etc/group
COPY	${DESTDIR}/etc/spwd.db			etc/spwd.db
COPY	${CURDIR}/../../miniroot/protocols	etc/protocols
COPY	${CURDIR}/../../miniroot/services	etc/services
SYMLINK	/tmp/disktab.shadow			etc/disktab      
SYMLINK	/tmp/fstab.shadow			etc/fstab
SYMLINK	/tmp/resolv.conf.shadow			etc/resolv.conf
SYMLINK	/tmp/hosts				etc/hosts

# and the installation scripts
# No (U)pgrade option for 3.1 on Sparc64
SPECIAL	sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' < ${CURDIR}/../common/dot.profile > .profile
SPECIAL sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' -e "s/^ARCH=ARCH$/ARCH=`arch -s`/" < ${CURDIR}/../common/install.md > install.md
SPECIAL sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' < ${CURDIR}/../../miniroot/install.sh > install
SPECIAL sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' -e "/^VERSION=/s/=.*/=${REV}/" < ${CURDIR}/../../miniroot/install.sub > install.sub
SPECIAL	chmod 755 install

# dhcp things
COPY	${DESTDIR}/sbin/dhclient-script sbin/dhclient-script
@


1.7
log
@put the right things on a bsd.rd
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.6 2002/03/23 23:29:16 krw Exp $
@


1.6
log
@Disable the ability to (U)pgrade a sparc64 installation.

Requested by deraadt@@ for the 3.1 release.

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.5 2001/12/17 00:41:51 krw Exp $
d57 4
a62 2
COPY	${CURDIR}/../../miniroot/install.sub		install.sub
COPY	${CURDIR}/../../miniroot/install.sh		install
d64 5
a68 2
SPECIAL sed "/^VERSION=/s/=.*/=${REV}/" < ${CURDIR}/../../miniroot/install.sub > install.sub
SPECIAL	chmod 755 install upgrade
@


1.5
log
@Use actual files for short versions of /etc/protocols and
/etc/services used during installations.

This way it is not necessary to run the install script before
using commands requiring these files.

Requested by deraadt@@.
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.4 2001/12/13 01:40:15 krw Exp $
d61 1
a61 1
COPY	${CURDIR}/../../miniroot/upgrade.sh		upgrade
@


1.4
log
@Remove /etc/protocols and /etc/services from install media
that use the miniroot install scripts.

During an install, donetconfig() in miniroot/install.sub now
creates a minimal /etc/protocols and /etc/services.

During an upgrade, enable_network() now copies the existing
protocols and services files into /etc.

Saves approximately 13K on floppy/cd images.
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.3 2001/10/13 05:34:13 deraadt Exp $
d53 4
a56 2
COPY	${DESTDIR}/etc/group		etc/group
COPY	${DESTDIR}/etc/spwd.db		etc/spwd.db
@


1.3
log
@add more missing links
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.2 2001/10/12 20:50:19 deraadt Exp $
a53 2
COPY	${DESTDIR}/etc/protocols	etc/protocols
COPY	${DESTDIR}/etc/services		etc/services
@


1.2
log
@missing links
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.1 2001/10/10 04:21:02 deraadt Exp $
d28 1
a29 1
LINK	instbin			sbin/disklabel
d44 1
d47 1
a48 1
LINK	instbin			usr/bin/egrep usr/bin/fgrep usr/bin/grep
@


1.1
log
@does this work?  I do not know yet
@
text
@d1 1
a1 1
#	$OpenBSD: list,v 1.14 2001/10/02 17:01:31 deraadt Exp $
a5 1
SRCDIRS	usr.bin/vi
d29 1
d44 4
a47 3
SYMLINK	../../instbin		usr/bin/ftp
SYMLINK	../../instbin		usr/bin/gzip usr/bin/gunzip usr/bin/gzcat
SYMLINK	../../instbin		usr/bin/sed
@

