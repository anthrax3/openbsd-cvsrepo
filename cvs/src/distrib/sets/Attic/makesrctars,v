head	1.12;
access;
symbols
	OPENBSD_3_3:1.11.0.14
	OPENBSD_3_3_BASE:1.11
	OPENBSD_3_2:1.11.0.12
	OPENBSD_3_2_BASE:1.11
	OPENBSD_3_1:1.11.0.10
	OPENBSD_3_1_BASE:1.11
	OPENBSD_3_0:1.11.0.8
	OPENBSD_3_0_BASE:1.11
	OPENBSD_2_9:1.11.0.6
	OPENBSD_2_9_BASE:1.11
	OPENBSD_2_8:1.11.0.4
	OPENBSD_2_8_BASE:1.11
	OPENBSD_2_7:1.11.0.2
	OPENBSD_2_7_BASE:1.11
	OPENBSD_2_6:1.10.0.6
	OPENBSD_2_6_BASE:1.10
	OPENBSD_2_5:1.10.0.4
	OPENBSD_2_5_BASE:1.10
	OPENBSD_2_4:1.10.0.2
	OPENBSD_2_4_BASE:1.10
	OPENBSD_2_3:1.8.0.2
	OPENBSD_2_3_BASE:1.8
	OPENBSD_2_2:1.7.0.2
	OPENBSD_2_2_BASE:1.7
	OPENBSD_2_1:1.6.0.2
	OPENBSD_2_1_BASE:1.6
	OPENBSD_2_0:1.4.0.2
	OPENBSD_2_0_BASE:1.4;
locks; strict;
comment	@# @;


1.12
date	2003.03.28.01.14.56;	author deraadt;	state dead;
branches;
next	1.11;

1.11
date	2000.03.01.22.10.09;	author todd;	state Exp;
branches;
next	1.10;

1.10
date	98.09.19.00.48.33;	author todd;	state Exp;
branches;
next	1.9;

1.9
date	98.09.15.21.36.24;	author deraadt;	state Exp;
branches;
next	1.8;

1.8
date	98.03.08.00.27.02;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	97.10.01.22.13.00;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	97.04.28.11.20.10;	author niklas;	state Exp;
branches;
next	1.5;

1.5
date	96.10.12.01.20.07;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	96.10.03.01.12.11;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	96.09.30.12.49.08;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	96.09.22.20.14.24;	author tholo;	state Exp;
branches;
next	1.1;

1.1
date	96.02.21.01.21.06;	author niklas;	state Exp;
branches;
next	;


desc
@Script used to make source distribution
@


1.12
log
@I rewrote these a while back; copyright to me
@
text
@#!/bin/sh
#	$OpenBSD: makesrctars,v 1.11 2000/03/01 22:10:09 todd Exp $


set RELEASE=$1
SPLITSIZE=240640

if [ "X${RELEASE}" = "X" ]; then
	echo "Usage: `basename $0` <OSREVISION>"
	exit 1
fi

GZIP=--best
export GZIP

if [ -z "$SRCDIR" ]; then
	echo SRCDIR must be set
	exit 1
fi

if [ -z "$RELEASEDIR" ]; then
	echo RELEASEDIR must be set
	exit 1
fi

cd $SRCDIR

mkdir -p ${RELEASEDIR}/src${RELEASE}
find . \
    \! \( \( -path ./gnu -o -path ./share \) -prune \) \
    \! \( -path ./sys -prune \) \
    \! \( -path ./usr.sbin/config -prune \) \
    \! \( -path ./usr.sbin/config.old -prune \) \
    \! \( -path ./usr.sbin/dbsym -prune \) \
    \! \( -name obj -prune \) -print | \
	sort | pax -wv -d -s'|^./|./usr/src/|' | gzip -9 | \
	split -b ${SPLITSIZE} - ${RELEASEDIR}/src${RELEASE}/src${RELEASE}.
(cd ${RELEASEDIR}/src${RELEASE}; cksum src${RELEASE}.* > CKSUM; \
	md5 src${RELEASE}.* > MD5)
chmod 444 ${RELEASEDIR}/src${RELEASE}/*

mkdir ${RELEASEDIR}/gsrc${RELEASE}
find gnu \
    \! \( -name obj -prune \) -print | \
	sort | pax -wv -d -s'|^|./usr/src/|' | gzip -9 | \
	split -b ${SPLITSIZE} - ${RELEASEDIR}/gsrc${RELEASE}/gsrc${RELEASE}.
(cd ${RELEASEDIR}/gsrc${RELEASE}; cksum gsrc${RELEASE}.* > CKSUM; \
	md5 gsrc${RELEASE}.* > MD5)
chmod 444 ${RELEASEDIR}/gsrc${RELEASE}/*

mkdir ${RELEASEDIR}/ksrc${RELEASE}
find sys usr.sbin/config usr.sbin/config.old usr.sbin/dbsym \
    \! \( -name obj -prune \) -print | \
	sort | pax -wv -d -s'|^|./usr/src/|' | gzip -9 | \
	split -b ${SPLITSIZE} - ${RELEASEDIR}/ksrc${RELEASE}/ksrc${RELEASE}.
(cd ${RELEASEDIR}/ksrc${RELEASE}; cksum ksrc${RELEASE}.* > CKSUM; \
	md5 ksrc${RELEASE}.* > MD5)
chmod 444 ${RELEASEDIR}/ksrc${RELEASE}/*

mkdir ${RELEASEDIR}/ssrc${RELEASE}
find share \
    \! \( -name obj -prune \) -print | \
	sort | pax -wv -d -s'|^|./usr/src/|' | gzip -9 | \
	split -b ${SPLITSIZE} - ${RELEASEDIR}/ssrc${RELEASE}/ssrc${RELEASE}.
(cd ${RELEASEDIR}/ssrc${RELEASE}; cksum ssrc${RELEASE}.* > CKSUM; \
	md5 ssrc${RELEASE}.* > MD5)
chmod 444 ${RELEASEDIR}/ssrc${RELEASE}/*


@


1.11
log
@$OpenBSD$
@
text
@d2 1
a2 1
#	$OpenBSD$
@


1.10
log
@use OSrev
@
text
@d2 2
@


1.9
log
@hello 2.4
@
text
@d3 1
a3 1
RELEASE=24
d6 5
d66 2
@


1.8
log
@moving to 2.3
@
text
@d3 1
a3 1
RELEASE=23
@


1.7
log
@21 -> 22
@
text
@d3 1
a3 1
RELEASE=22
@


1.6
log
@2.1
@
text
@d3 1
a3 1
RELEASE=21
@


1.5
log
@build differently
@
text
@d3 1
a3 1
RELEASE=20
@


1.4
log
@md5 as well, from todd
@
text
@d14 2
a15 7
if [ -z "$DESTDIR" ]; then
	echo DESTDIR must be set
	exit 1
fi

if [ -d ${DESTDIR} ]; then
	echo "DESTDIR exists."
d21 1
a21 3
mkdir ${DESTDIR}

mkdir ${DESTDIR}/src${RELEASE}
d23 1
a23 1
    \! \( \( -path ./gnu -o -path ./share -o -path ./domestic \) -prune \) \
d28 1
a28 1
    \! \( -name CVS -prune \) \! \( -name obj -prune \) -print | \
d30 2
a31 2
	split -b ${SPLITSIZE} - ${DESTDIR}/src${RELEASE}/src${RELEASE}.
(cd ${DESTDIR}/src${RELEASE}; cksum src${RELEASE}.* > CKSUM; \
d33 1
a33 1
chmod 444 ${DESTDIR}/src${RELEASE}/*
d35 1
a35 1
mkdir ${DESTDIR}/gsrc${RELEASE}
d37 1
a37 1
    \! \( -name CVS -prune \) \! \( -name obj -prune \) -print | \
d39 2
a40 2
	split -b ${SPLITSIZE} - ${DESTDIR}/gsrc${RELEASE}/gsrc${RELEASE}.
(cd ${DESTDIR}/gsrc${RELEASE}; cksum gsrc${RELEASE}.* > CKSUM; \
d42 1
a42 1
chmod 444 ${DESTDIR}/gsrc${RELEASE}/*
d44 1
a44 1
mkdir ${DESTDIR}/ksrc${RELEASE}
d46 1
a46 1
    \! \( -name CVS -prune \) \! \( -name obj -prune \) -print | \
d48 2
a49 2
	split -b ${SPLITSIZE} - ${DESTDIR}/ksrc${RELEASE}/ksrc${RELEASE}.
(cd ${DESTDIR}/ksrc${RELEASE}; cksum ksrc${RELEASE}.* > CKSUM; \
d51 1
a51 1
chmod 444 ${DESTDIR}/ksrc${RELEASE}/*
d53 1
a53 1
mkdir ${DESTDIR}/ssrc${RELEASE}
d55 1
a55 1
    \! \( -name CVS -prune \) \! \( -name obj -prune \) -print | \
d57 2
a58 2
	split -b ${SPLITSIZE} - ${DESTDIR}/ssrc${RELEASE}/ssrc${RELEASE}.
(cd ${DESTDIR}/ssrc${RELEASE}; cksum ssrc${RELEASE}.* > CKSUM; \
d60 1
a60 10
chmod 444 ${DESTDIR}/ssrc${RELEASE}/*

mkdir ${DESTDIR}/dsrc${RELEASE}
find domestic \
    \! \( -name CVS -prune \) \! \( -name obj -prune \) -print | \
	sort | pax -wv -d -s'|^|./usr/src/|' | gzip -9 | \
	split -b ${SPLITSIZE} - ${DESTDIR}/dsrc${RELEASE}/dsrc${RELEASE}.
(cd ${DESTDIR}/dsrc${RELEASE}; cksum dsrc${RELEASE}.* > CKSUM; \
	md5 dsrc${RELEASE}.* > MD5)
chmod 444 ${DESTDIR}/dsrc${RELEASE}/*
@


1.3
log
@2.0
@
text
@d38 2
a39 1
(cd ${DESTDIR}/src${RELEASE}; cksum src${RELEASE}.* > CKSUM)
d47 2
a48 1
(cd ${DESTDIR}/gsrc${RELEASE}; cksum gsrc${RELEASE}.* > CKSUM)
d56 2
a57 1
(cd ${DESTDIR}/ksrc${RELEASE}; cksum ksrc${RELEASE}.* > CKSUM)
d65 2
a66 1
(cd ${DESTDIR}/ssrc${RELEASE}; cksum ssrc${RELEASE}.* > CKSUM)
d74 2
a75 1
(cd ${DESTDIR}/dsrc${RELEASE}; cksum dsrc${RELEASE}.* > CKSUM)
@


1.2
log
@Use maximum compression when building source distribution
@
text
@d1 1
a1 1
#! /bin/sh
d3 1
a3 1
RELEASE=11
@


1.1
log
@From NetBSD: Add script used to make the 1.1 source distribution
@
text
@d36 1
a36 1
	sort | pax -wv -d -s'|^./|./usr/src/|' | gzip | \
d44 1
a44 1
	sort | pax -wv -d -s'|^|./usr/src/|' | gzip | \
d52 1
a52 1
	sort | pax -wv -d -s'|^|./usr/src/|' | gzip | \
d60 1
a60 1
	sort | pax -wv -d -s'|^|./usr/src/|' | gzip | \
d68 1
a68 1
	sort | pax -wv -d -s'|^|./usr/src/|' | gzip | \
@

