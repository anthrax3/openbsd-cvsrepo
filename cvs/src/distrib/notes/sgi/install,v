head	1.29;
access;
symbols
	OPENBSD_6_2:1.29.0.6
	OPENBSD_6_2_BASE:1.29
	OPENBSD_6_1:1.29.0.4
	OPENBSD_6_1_BASE:1.29
	OPENBSD_6_0:1.28.0.4
	OPENBSD_6_0_BASE:1.28
	OPENBSD_5_9:1.28.0.2
	OPENBSD_5_9_BASE:1.28
	OPENBSD_5_8:1.27.0.8
	OPENBSD_5_8_BASE:1.27
	OPENBSD_5_7:1.27.0.2
	OPENBSD_5_7_BASE:1.27
	OPENBSD_5_6:1.27.0.4
	OPENBSD_5_6_BASE:1.27
	OPENBSD_5_5:1.26.0.2
	OPENBSD_5_5_BASE:1.26
	OPENBSD_5_4:1.23.0.6
	OPENBSD_5_4_BASE:1.23
	OPENBSD_5_3:1.23.0.4
	OPENBSD_5_3_BASE:1.23
	OPENBSD_5_2:1.23.0.2
	OPENBSD_5_2_BASE:1.23
	OPENBSD_5_1_BASE:1.19
	OPENBSD_5_1:1.19.0.8
	OPENBSD_5_0:1.19.0.10
	OPENBSD_5_0_BASE:1.19
	OPENBSD_4_9:1.19.0.6
	OPENBSD_4_9_BASE:1.19
	OPENBSD_4_8:1.19.0.4
	OPENBSD_4_8_BASE:1.19
	OPENBSD_4_7:1.19.0.2
	OPENBSD_4_7_BASE:1.19
	OPENBSD_4_6:1.17.0.4
	OPENBSD_4_6_BASE:1.17
	OPENBSD_4_5:1.14.0.2
	OPENBSD_4_5_BASE:1.14
	OPENBSD_4_4:1.13.0.2
	OPENBSD_4_4_BASE:1.13
	OPENBSD_4_3:1.11.0.2
	OPENBSD_4_3_BASE:1.11
	OPENBSD_4_2:1.9.0.4
	OPENBSD_4_2_BASE:1.9
	OPENBSD_4_1:1.9.0.2
	OPENBSD_4_1_BASE:1.9
	OPENBSD_4_0:1.8.0.6
	OPENBSD_4_0_BASE:1.8
	OPENBSD_3_9:1.8.0.4
	OPENBSD_3_9_BASE:1.8
	OPENBSD_3_8:1.8.0.2
	OPENBSD_3_8_BASE:1.8
	OPENBSD_3_7:1.5.0.2
	OPENBSD_3_7_BASE:1.5
	OPENBSD_3_6:1.4.0.2
	OPENBSD_3_6_BASE:1.4;
locks; strict;
comment	@# @;


1.29
date	2016.10.05.16.06.02;	author visa;	state Exp;
branches;
next	1.28;
commitid	wezG0xHrE9vQKEtd;

1.28
date	2015.08.12.06.47.16;	author mlarkin;	state Exp;
branches;
next	1.27;
commitid	p6bucTl90Plb3iKf;

1.27
date	2014.03.19.01.59.49;	author tedu;	state Exp;
branches;
next	1.26;

1.26
date	2014.01.06.21.05.32;	author miod;	state Exp;
branches;
next	1.25;

1.25
date	2013.12.08.15.33.03;	author miod;	state Exp;
branches;
next	1.24;

1.24
date	2013.12.04.23.20.19;	author jmc;	state Exp;
branches;
next	1.23;

1.23
date	2012.05.25.17.40.35;	author miod;	state Exp;
branches;
next	1.22;

1.22
date	2012.04.08.22.25.52;	author miod;	state Exp;
branches;
next	1.21;

1.21
date	2012.04.03.21.44.17;	author miod;	state Exp;
branches;
next	1.20;

1.20
date	2012.03.29.20.27.53;	author miod;	state Exp;
branches;
next	1.19;

1.19
date	2010.03.16.17.23.09;	author miod;	state Exp;
branches;
next	1.18;

1.18
date	2009.10.10.19.20.28;	author miod;	state Exp;
branches;
next	1.17;

1.17
date	2009.05.30.05.00.37;	author miod;	state Exp;
branches;
next	1.16;

1.16
date	2009.05.13.18.38.29;	author miod;	state Exp;
branches;
next	1.15;

1.15
date	2009.05.12.21.06.50;	author miod;	state Exp;
branches;
next	1.14;

1.14
date	2008.08.25.17.21.56;	author jsing;	state Exp;
branches;
next	1.13;

1.13
date	2008.08.05.22.58.01;	author miod;	state Exp;
branches;
next	1.12;

1.12
date	2008.07.29.15.06.51;	author jsing;	state Exp;
branches;
next	1.11;

1.11
date	2008.03.10.21.38.28;	author miod;	state Exp;
branches;
next	1.10;

1.10
date	2008.03.07.17.58.23;	author jsing;	state Exp;
branches;
next	1.9;

1.9
date	2007.03.01.19.24.45;	author miod;	state Exp;
branches;
next	1.8;

1.8
date	2005.08.30.17.05.32;	author miod;	state Exp;
branches;
next	1.7;

1.7
date	2005.08.01.19.58.59;	author kettenis;	state Exp;
branches;
next	1.6;

1.6
date	2005.04.27.03.22.00;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	2004.09.23.17.23.19;	author pefo;	state Exp;
branches;
next	1.4;

1.4
date	2004.08.26.20.45.00;	author miod;	state Exp;
branches;
next	1.3;

1.3
date	2004.08.26.18.46.22;	author pefo;	state Exp;
branches;
next	1.2;

1.2
date	2004.08.26.13.31.12;	author pefo;	state Exp;
branches;
next	1.1;

1.1
date	2004.08.20.17.53.09;	author pefo;	state Exp;
branches;
next	;


desc
@@


1.29
log
@Remove an outdated remark about the 'a' partition. The sgi bootblocks
now locate the partition by using the disklabel.

ok jsing@@
@
text
@dnl	$OpenBSD: install,v 1.28 2015/08/12 06:47:16 mlarkin Exp $
OpenBSDInstallPrelude

There are several ways to install OpenBSD onto a disk. The easiest way
in terms of preliminary setup is to use the bootable CD-ROM mini image.
Alternatively, the OpenBSD ramdisk kernel can be booted from the network,
using a bootp/tftp server.

Booting from CD-ROM installation media:

  From the System Maintenance Menu, select '2' (or click on the
  appropriate icon if in graphics console) to Install System Software.

  If necessary, select the proper CD-ROM drive, and press enter to
  confirm your choice.  Insert the installation CD-ROM (if you did not
  do so already) and press enter to boot the system.

  If the boot is successful, you will get a loader version message,
  executable sizes, and then the kernel copyright and device probe
  messages. Boot failure modes are typically a lot of CD-ROM drive
  activity, but no messages or complaints about magic numbers,
  checksums or formats.

  If the system does not complain about being able to read the CD-ROM,
  but of not being able to load a particular file, you can nevertheless
  boot manually. This is the case on IP22 systems.

  To boot manually from the CD-ROM, select ``Enter Command Monitor''
  at the menu, and invoke the bootloader and ramdisk image manually.
  For example, on an IP22 system, automatic boot may fail with:

dnl IP22
	Cannot load scsi(1)cdrom(4)partition(8)sashARCS.
	Text start 0x10000, size 0xa120 doesn't fit in a FreeMemory area.
	Cannot load scsi(1)cdrom(4)partition(8)sashARCS -- not enough space.

  or:

dnl IP20, changed from scsi(0) to scsi(1) for consistency
	Cannot load scsi(1)cdrom(4)partition(8)sashARCS.
	Error 15 while loading scsi(1)cdrom(4)partition(8)sashARCS

  The name of the CD-ROM drive is then ``scsi(1)cdrom(4)'', and the manual
  boot command will be:

	>> scsi(1)cdrom(4)partition(8)bootecoff
	   scsi(1)cdrom(4)partition(0)/bsd.rd.IP22

  Note that this is a single commandline, the two paths should be separated
  with spaces.

Booting over the network:
dnl XXX provide more details!!!

  First, a bootp or dhcpd server needs to be set up. The bootpd(8) or
  dhcpd(8) manual page on your server should provide detailed information
  on how to set up the server.

  The PROM, by default, will configure itself to use the IP address set in
  the `netaddr' environment variable. To force the PROM to always get an
  address from a bootp or dhcp server, clear the variable (`unsetenv netaddr')
  before attempting to boot from the network. Alternatively, you may want to
  make sure the value of this variable is correct.

  Note that, if the `netaddr' variable is unset, the PROM will initialize it
  to the address obtained from the bootp or dhcp server.

  The bootp or dhcp server needs to know the ethernet address of the system.
  On Indigo, Indigo2, Indy and O2 systems, this address can be found by using
  the ``printenv'' command in the Maintenance Console, looking for the
  ``eaddr'' variable.
  On other systems, or if this variable is missing, this address is usually
  written on a factory sticker on the back of the machine.

  The server should also provide a tftp location, where the proper bsd.rd
  file should be available.

	IMPORTANT! Older PROM are unable to connect to a tftp server
	on a port number greater than 32767; if booting stalls almost
	immediately, it might be necessary to restrict the tftp server
	to only use 15-bit port numbers.

	This situation can be detected by running tcpdump on the tftp
	server, and looking for icmp `port unreachable' errors from the
	MACHINE system.

dnl The following list is not intended to be exhaustive. Once enough samples
dnl are collected, it would be nice to be able to tell `PROM versions before
dnl that date are affected, PROM versions after that date are fine' rather
dnl than listing per-machine version strings. But then the actual cutoff
dnl point might differ accross systems, argh.
	The following PROM versions are known to exhibit this troublesome
	behaviour:
	- on Indigo:
	>> version
	PROM Monitor SGI Version 4.0.5G Rev B IP20,  Nov 10, 1992 (BE)
	- on Indy:
	>> version 
	PROM Monitor SGI Version 5.1 Rev B3 IP24 Sep 17, 1993 (BE)

	On the other hand, the following PROM versions are known to be
	unaffected by this problem:
	- on Indigo2:
	>> version
	PROM Monitor SGI Version 5.3 Rev C IP22 Oct 20, 1994 (BE)
	- on Indy:
	>> version
	PROM Monitor SGI Version 5.3 Rev B7 R4X00 IP24 Feb 16, 1995 (BE)
	PROM Monitor SGI Version 5.3 Rev B10 R4X00/R5000 IP24 Feb 12, 1996 (BE)

	Note that these lists do not pretend to be complete.

	If the server system runs OpenBSD, the following command can be
	used to enforce a safe port number:

	# sysctl net.inet.ip.portlast=32767

	don't forget to restore the previous value of this sysctl after
	the troublesome system has booted.

  Once the server is set up, boot with the following command in the
  Maintenance Console:

	>> bootp()bsd.rd.IP32

  (replacing `IP32' by the family name suitable for your machine).

  On IP22-class systems, or if the PROM complains about the file format,
  such as:

	>> bootp()bsd.rd.IP22
	[...]
	Cannot load bootp()bsd.rd.IP22.
	Problem reading elf structure at offset -2004877312.
	Unable to execute bootp()bsd.rd.IP22

  ... then this means that the PROM is too old to know about the ELF file
  format the OpenBSD kernel is provided in. In this case, the kernel needs
  to be booted from the ``bootecoff'' boot block, which has to be put on the
  tftp server as well, with:

	>> bootp()bootecoff bootp()bsd.rd.IP22

  If the boot aborts early with a memory related error message, such as:

	>> bootp()bootecoff bootp()bsd.rd.IP22
	[...]
	Cannot load bootp()bootecoff.
	Text start 0x80020f0, size 0xa030 doesn't fit in a FreeMemory area.
	Unable to execute bootp()/bootecoff

  ... then it is necessary to clean up after an earlier unsuccessful (or
  aborted) boot attempt. Just leave the PROM interactive mode with `exit',
  and at the maintenance menu, choose `Enter Command Monitor' again.

Installing the system:

OpenBSDInstallPart2

	Boot your machine from the installation media as described above.

	It will take a while to load the kernel especially from a slow
	network connection, most likely more than a minute.  If some action
	doesn't eventually happen, or the spinning cursor has stopped and
	nothing further has happened, either your boot media is bad, your
	diskless setup isn't correct, or you may have a hardware or
	configuration problem.

OpenBSDInstallPart3(,"sd0")

OpenBSDInstallPart4

OpenBSDInstallPart5

	No partitions should overlap with the SGI Volume Header, which by
	default will use the first 3134 sectors.

OpenBSDInstallPart6({:-CD-ROM, NFS -:})

OpenBSDURLInstall

OpenBSDCDROMInstall

OpenBSDNFSInstall

OpenBSDDISKInstall(,{:-only -:})

OpenBSDCommonInstall

OpenBSDInstallWrapup

OpenBSDCongratulations



OpenBSDUnattendedInstallation
@


1.28
log
@
typo : ususally -> usually
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.27 2014/03/19 01:59:49 tedu Exp $
d176 1
a176 8
	default will use the first 3134 sectors. Additionally, the 'a'
	partition must be the first partition on the disk, immediately
	following the SGI Volume Header. If the default Volume Header size is
	used, the 'a' partition should be located at offset 3135. If the 'a'
	partition is not located immediately after the Volume Header the boot
	loader will not be able to locate and load the kernel.
dnl XXX Note that this is a #$%@@ boot blocks limitation which should be fixed
dnl XXX by reading the real label in the boot blocks.
@


1.27
log
@you are still welcome to install from tape, but as befits an elite master
of unix arcana, we will not condescend to tell you how. why spoil the fun?
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.26 2014/01/06 21:05:32 miod Exp $
d72 1
a72 1
  On other systems, or if this variable is missing, this address is ususally
@


1.26
log
@Remove mention of installXX not bootable on IP27/35.
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.25 2013/12/08 15:33:03 miod Exp $
d185 1
a185 1
OpenBSDInstallPart6({:-CD-ROM, tape, NFS -:})
a195 2

OpenBSDTAPEInstall
@


1.25
log
@Suggest booting from cd-rom as the first choice. Document that cd54.iso is
now bootable on all supported platforms (although it will still need manual
operation on IP22), but that install54.iso is currently still not bootable
on IP27/IP35.
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.24 2013/12/04 23:20:19 jmc Exp $
a9 4

	NOTE: Only cd${:--:}OSrev.iso may be booted on IP27 and IP35 class systems,
	due to PROM limitations. install${:--:}OSrev.iso will not boot, but may be
	used to the sets without requiring network access.
@


1.24
log
@committing uwe's autoinstall notes, as requested by deraadt;
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.23 2012/05/25 17:40:35 miod Exp $
d5 50
a54 3
in terms of preliminary setup is to use the OpenBSD ramdisk kernel that
can be booted via BOOTP. The normal way is to use the bootable CD-ROM
mini image.
d112 1
a158 46

Booting from CD-ROM installation media:

	NOTE: This method will not work on IP27 and IP35 class
	systems, which PROM expect a very specific CD-ROM layout.

  From the System Maintenance Menu, select '2' (or click on the
  appropriate icon if in graphics console) to Install System Software.

  If necessary, select the proper CD-ROM drive, and press enter to
  confirm your choice.  Insert the installation CD-ROM (if you did not
  do so already) and press enter to boot the system.

  If the boot is successful, you will get a loader version message,
  executable sizes, and then the kernel copyright and device probe
  messages. Boot failure modes are typically a lot of CD-ROM drive
  activity, but no messages or complaints about magic numbers,
  checksums or formats.

  If the system does not complain about being able to read the CD-ROM,
  but of not being able to load a particular file, you can nevertheless
  boot manually. This is the case on IP22 systems.

  To boot manually from the CD-ROM, select ``Enter Command Monitor''
  at the menu, and invoke the bootloader and ramdisk image manually.
  For example, on an IP22 system, automatic boot may fail with:

dnl IP22
	Cannot load scsi(1)cdrom(4)partition(8)sashARCS.
	Text start 0x10000, size 0xa120 doesn't fit in a FreeMemory area.
	Cannot load scsi(1)cdrom(4)partition(8)sashARCS -- not enough space.

  or:

dnl IP20, changed from scsi(0) to scsi(1) for consistency
	Cannot load scsi(1)cdrom(4)partition(8)sashARCS.
	Error 15 while loading scsi(1)cdrom(4)partition(8)sashARCS

  The name of the CD-ROM drive is then ``scsi(1)cdrom(4)'', and the manual
  boot command will be:

	>> scsi(1)cdrom(4)partition(8)bootecoff
	   scsi(1)cdrom(4)partition(0)/bsd.rd.IP22

  Note that this is a single commandline, the two paths should be separated
  with spaces.
@


1.23
log
@IP28 bits. Also explain how to boot from the CD-ROM manually if the PROM
can't manage to use it from the `install system software' menu.
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.22 2012/04/08 22:25:52 miod Exp $
d204 4
@


1.22
log
@Sync with the current state of things
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.21 2012/04/03 21:44:17 miod Exp $
d114 2
a115 1
NOTE: this boot method is only known to work on IP32 systems at the moment.
d126 1
a126 1
  messages.  Boot failure modes are typically a lot of CD-ROM drive
d129 28
@


1.21
log
@Make sure all bootp() path lack unnecessary front slashes, and subtly mention
that IP22 PROM can not load ELF64 kernels. While there, in addition to the
list of `known to only boot of a low tftp port number' PROM versions, list
a few unaffected (16 bit clean) PROM versions. Hopefully user feedback will
let us figure out cutoff point so we'll only need to document these instead of
unbounded lists of PROM versions.
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.20 2012/03/29 20:27:53 miod Exp $
d26 3
a28 3
  On Indigo, Indy and O2 systems, this address can be found by using the
  ``printenv'' command in the Maintenance Console, looking for the ``eaddr''
  variable.
d49 2
a50 1
	The following PROM versions are known to exhibit this behaviour:
d58 2
a59 1
	On the other hand, the following PROM versions are known to work:
d67 1
a67 3
	Note that these lists do not pretend to be complete, and depending
	on your system, other, more recent, PROM versions might be affected
	as well.
@


1.20
log
@Hook IP22 kernels to the build, and document how to boot the installation
media on them. Try to be helpful and explain how things may fail on the
older PROM and what to do about this.
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.19 2010/03/16 17:23:09 miod Exp $
d44 5
d57 11
a67 2
	Note that this list does not pretend to be complete, and other,
	more recent, PROM versions might be affected as well.
d80 1
a80 1
	>> bootp()/bsd.rd.IP32
d84 2
a85 1
  If the PROM complains about the file format, such as:
d98 1
a98 1
	>> bootp()/bootecoff bootp()/bsd.rd.IP22
d102 1
a102 1
	>> bootp()/bootecoff bootp()/bsd.rd.IP22
d104 1
a104 1
	Cannot load bootp()/bootecoff.
@


1.19
log
@Jumbo commit for 4.7 installation instructions:
- do not mention tape as an installation media on systems where it is very
  unlikely that a tape drive can be connected to (i.e. anything with only
  USB as expansion capabilities)
- do not mention that fetching the installation sets from a partition is
  ``for upgrades only''. You may do this for installation, but of course
  you can not use a partition which will be newfs'ed for that purpose.
- mention ext2fs partitions as possible installation sets source only on
  platforms where the installation media actually can mount an ext2fs
  filesystem.
- stress the fact that the sparc miniroot image is a GENERIC kernel with
  a little on-disk filesystem, and not a RAMDISK kernel with a little
  in-memory filesystem, and thus must not be overwritten during installation
  (i.e. be careful if you repartition the disk the miniroot has been put on).
- more conv=sync -> conv=osync for tape setup instructions.
- model-specific layout changes on armish, loongson and socppc instructions.
- fix various typos and grammar mistaeks.

"sure" deraadt@@ (without eyeballing)
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.18 2009/10/10 19:20:28 miod Exp $
d12 84
a95 28
First, a bootp or dhcpd server needs to be set up. The bootpd(8) or
dhcpd(8) manual page on your server should provide detailed information
on how to set up the server.

The PROM, by default, will configure itself to use the IP address set in
the `netaddr' environment variable. To force the PROM to always get an
address from a bootp or dhcp server, clear the variable (`unsetenv netaddr')
before attempting to boot from the network. Alternatively, you may want to
make sure the value of this variable is correct.

Note that, if the `netaddr' variable is unset, the PROM will initialize it
to the address obtained from the bootp or dhcp server.

The bootp or dhcp server needs to know the ethernet address of the
system. On O2 systems, this address can be found by using the ``printenv''
command in the Maintenance Console, looking for the ``eaddr'' variable.
On other systems, this address is ususally written on a factory sticker
on the back of the machine.

The server should also provide a tftp location, where the proper bsd.rd
file should be available.

Once the server is set up, boot with the following command in the
Maintenance Console:

> bootp()/bsd.rd.IP32

(replacing `IP32' by the family name suitable for your machine).
d99 1
a99 1
(Note: this boot method only works on IP32 systems at the moment).
d101 2
a102 2
From the System Maintenance Menu, select '2' (or click on the
appropriate icon if in graphics console) to Install System Software.
d104 9
a112 9
If necessary, select the proper CD-ROM drive, and press enter to
confirm your choice.  Insert the installation CD-ROM (if you did not
do so already) and press enter to boot the system.

If the boot is successful, you will get a loader version message,
executable sizes, and then the kernel copyright and device probe
messages.  Boot failure modes are typically a lot of CD-ROM drive
activity, but no messages or complaints about magic numbers,
checksums or formats.
@


1.18
log
@More details about the dreaded netaddr environment variable for network
boot, and about the console madness on machines with an external L1 serial
port.
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.17 2009/05/30 05:00:37 miod Exp $
d87 1
a87 1
OpenBSDInstallPart6({:-CD-ROM, NFS -:})
d94 2
@


1.17
log
@Sync with IP27/30/35 support and new kernel filenames.
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.16 2009/05/13 18:38:29 miod Exp $
d15 9
@


1.16
log
@Better disk partitioning details, especially for MBR + disklabel or
HFS + disklabel setups.
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.15 2009/05/12 21:06:50 miod Exp $
d17 4
a20 2
system. This address can be found by using the ``printenv'' command
in the Maintenance Console, looking for the ``eaddr'' variable.
d22 2
a23 2
The server should also provide a tftp location, where the bsd.rd file
should be available.
d28 3
a30 1
> bootp()/bsd.rd
d33 2
@


1.15
log
@Try to catch up with installer changes in the installation notes.
Also, the per-platform features are moved to a common place, which makes
the MD layout easier to work on. m4.common is still a tangled mess of subtly
placed dnl, though...
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.14 2008/08/25 17:21:56 jsing Exp $
d69 2
d74 1
a74 3
OpenBSDFTPInstall

OpenBSDHTTPInstall
@


1.14
log
@We can install from a CD-ROM now...
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.12 2008/07/29 15:06:51 jsing Exp $
d56 1
a56 1
OpenBSDBootMsgs(,"sd0")
d58 1
a58 7
	You will next be asked for your terminal type.  If you are
	installing from a non-serial console, the default of "vt220"
	is correct.  If you are installing from a serial console
	you should choose the terminal type from amongst those listed.
	(If your terminal type is xterm, just use vt220.)

OpenBSDInstallPart3
d60 1
a60 1
OpenBSDInstallPart4
d70 1
a70 3
OpenBSDInstallPart5(sd0)

OpenBSDInstallNet({:-CD-ROM, NFS -:})
a75 2
OpenBSDTAPEInstall

d80 1
a80 1
OpenBSDCommonFS(NFS)
d82 1
a82 1
OpenBSDCommonURL
a84 2

OpenBSDInstallWrapupPart2
@


1.13
log
@Better description of the installation steps:
- document questions in proper order: hostname before network configuration,
  DNS only if network is configured, sshd and ntpd, aperture only on
  machines which need it, serial console only on machines which need it.
  This is done by splitting the end of OpenBSDCommonURL in various
  macros, OpenBSDInstallWrapup, OpenBSDInstallAperture, OpenBSDInstallConsole
  and OpenBSDInstallWrapupPart2.
- use the above macros when appropriate, OpenBSDInstallWrapup* being
  mandatory on all arches.
- remove serial console configuration blurb on sparc and sparc64, it is
  handled by OpenBSDInstallConsole now.
@
text
@d78 1
a78 2
dnl OpenBSDInstallNet({:-CD-ROM, NFS, -:})
OpenBSDInstallNet({:-NFS -:})
d85 2
a86 2
dnl
dnl OpenBSDCDROMInstall
@


1.12
log
@There is currently no CD-ROM install available for OpenBSD/sgi.

ok deraadt@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.10 2008/03/07 17:58:23 jsing Exp $
d86 1
a86 1

d94 4
@


1.11
log
@Suggest vt220 as a TERM value for serial-console-in-an-xterm setup everywhere
instead of a mix of vt100 and vt220.
@
text
@d78 2
a79 1
OpenBSDInstallNet({:-CD-ROM, NFS, -:})
d87 1
a87 1
OpenBSDCDROMInstall
@


1.10
log
@Detail the partitioning caveats for OpenBSD/sgi.

ok deraadt@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.9 2007/03/01 19:24:45 miod Exp $
d58 5
a62 3
	You will next be asked for your terminal type.
dnl XXX needs extra text here once graphics console is available
	Just hit return to select the default (vt100).
@


1.9
log
@Your spring jumbo m4-fu. This time:
- mention comp contains an objective-C compiler too.
- rewrite InstallPrelude so that it will only output the ``know your drive
  geometry'' blurb if asked to, and for a specified disk type. Use it for
  non-IDE and non-SCSI disks only, otherwise the kernel is good enough to
  do the job without the users' help.
- similarily, adapt BootMsgs to make the second part of the geometry blurb
  optional, and to accept up to three disk types. Use this to report better
  disk names (i.e. no point saying an scsi disk would show up as sd0 on
  platforms which can't have scsi disks, or won't be able to boot from them).
- in InstallPart4, drop the part about block and fragment sizes in
  disklabel. The defaults are good, and you won't get to change them unless
  you switched to expert mode.
- the default answer to ``wanna get the ftp mirror list, unzel?'' is ``no'',
  so pressing enter to get it is not enough anymore (-:
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.8 2005/08/30 17:05:32 miod Exp $
d65 8
@


1.8
log
@Update sets size, and a few tweaks; also size of files smaller than 1MB
get printed in KB now; ok mickey@@ deraadt@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.7 2005/08/01 19:58:59 kettenis Exp $
d56 1
a56 1
OpenBSDBootMsgs
@


1.7
log
@Document new CD-ROM installation method.
ok deraadt@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.6 2005/04/27 03:22:00 deraadt Exp $
d6 1
a6 1
can be booted via BOOTP.  The normal way is to use the bootable CD-ROM
@


1.6
log
@sgi can boot off a CD image as of today
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.5 2004/09/23 17:23:19 pefo Exp $
d6 1
a6 1
can be booted via BOOTP.  The normal way is to the bootable CD-ROM
d30 6
a35 1
	> boot pci(0)scsi(0)cdrom(4)rdisk(0)partition(8)/boot
@


1.5
log
@flesh out. mention R10K and R12K support
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.4 2004/08/26 20:45:00 miod Exp $
d6 2
a7 1
can be booted via BOOTP. Booting from CD is not yet supported.
d28 9
@


1.4
log
@Rearrange, move ARCS stuff to the preparation section (needs to grow with
more information), describe the installation process better, fix some typos,
mention NFS and tapes as valid installation media.
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.3 2004/08/26 18:46:22 pefo Exp $
d25 1
a25 1
> boot bootp()/bsd.rd
@


1.3
log
@further polishing
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.2 2004/08/26 13:31:12 pefo Exp $
d8 2
d11 3
a13 1
Installing using the OpenBSD ramdisk kernel.
d15 3
a17 4
The ramdisk kernel is a self-contained OpenBSD filesystem including all
utilities necessary to install OpenBSD on a local disk, embedded in a
GENERIC kernel image. It is distributed as a plain ELF executable file
designed to be loaded into the system by the ARCS firmware.
d19 2
a20 5
Booting the ramdisk kernel can be done from the ARCS graphic console
although it might be more convenient to use the serial console since
the kernel currently only supports the serial console. Some systems
come with the serial console but enabled by default but sometimes this
must be changed.
d22 2
a23 6
To change to serial console, go into the ARCS Maintenance console. When
the system starts up, press the ESC key or use the the mouse and click
the STOP FOR MAINTENANCE button. Once in the System maintenance meny,
select '5' to go into the Command monitor. If the installed disk does
not contain a valid Volume Header and is bootable the Maintenance
console will be entered by default.
d25 1
a25 2
It may be necessary to do a reset of the environment to its default setting
by entering the command:
a26 1
> resetenv
d28 1
d30 1
a30 2
To switch the console to serial mode, change the console environment
variable:
d32 1
a32 1
> setenv console d
d34 6
a39 2
and reboot the system. A serial console at 9600B8N1 and no flow control
should be attached to the serial port marked (1).
d41 1
a41 1
If changing back to the graphics console is required do:
d43 3
a45 1
> setenv console g
d47 1
a47 4
After reboot, when the message:
        To perform system maintenance instead, press <Esc>
is displayed, press the ESCAPE key to get into maintenance mode. Again,
select '5' to get to the Command monitor.
d49 1
a49 5
When setting up the system to boot from disk, one environment variable
needs to be changed. Set 'OSLoader' to 'boot'. By default it is set to
'sash' which is the IRIX stand alone shell and loader. It may be convenient
to do this setup now so the system will diskboot once the 'reboot' command
is entered after the installation is complete.
d51 1
a51 36
To be able to boot, a bootp/dhcpd server needs to be set up. See the dhcpd(8)
man page for information on how to set up the dhcp server to respond to
a bootp client. The dhcp server needs to know the ethernet address of the
system. This address can be found by using the 'printenv' command and looking
for the 'eaddr' variable.

Loading the ramdisk kernel into your system is done with the appropriate
ARCS boot command on Your system. Usually this is done by typing in the
following string at the ARCS prompt:

	bootp()/bsd.rd

to boot from Your TFTP server.

This will cause the ramdisk kernel to be booted. After the initial probe
messages you'll will see the question:

TBD.

The script will do most of the work of transferring the system from the
tar files onto your disk. You will frequently be asked for confirmation
before the script proceeds with each phase of the installation process.
Occasionally, you'll have to provide a piece of information such as the
name of the disk you want to install on or IP addresses and domain names
you want to assign.

The installation script goes through the following phases:

	- determination of the disk to install OpenBSD on
	- checking of the OpenBSD partition information on the disk
	- creating and mounting the OpenBSD filesystems
	- setup of IP configuration
	- extraction of the distribution tar files
	- installation of kernel and the bootable kernel

The installation program will guide you through the installation.
d53 1
d59 2
d65 1
a65 1
OpenBSDCommonFS
@


1.2
log
@closer and closer to reality
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.1 2004/08/20 17:53:09 pefo Exp $
d19 2
a20 1
come with the serial console but sometimes this must be changed.
d25 3
a27 1
select '5' to go into the Command monitor.
d29 7
a35 1
To switch the console to serial mode, change the console nvironment
d40 1
a40 1
and reboot the system. A serial console at 9600B8N1 and nno flow control
d43 5
a47 1
When the message:
d58 1
a58 3
To be able to boot, a bootp/dhcpd server needs to be set up. To find out
the ethernet address for your system, use the 'printenv' command from the
Command monitor. See the value of the eaddr variable. See the dhcpd(8)
d60 3
a62 1
a bootp client.
@


1.1
log
@This is VERY MUCH work in progress. However it is a first cut of notes
for the SGI install, hopefully being partly helpful to get started.
@
text
@d1 1
a1 1
dnl	$OpenBSD$
d39 6
d80 1
a80 7
The installation program will guide you through the installation. There is
one area of complexity that you should be careful about and that is to
correctly answer the question about the disks previous history. If the
disk have an MBR record in the beginning of the disk it has o be wiped
because PMON does not know about how to find the OpenBSD partition. Just
read the instructions and answer the question correctly.

@

