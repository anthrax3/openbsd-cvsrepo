head	1.27;
access;
symbols
	OPENBSD_6_1:1.27.0.8
	OPENBSD_6_1_BASE:1.27
	OPENBSD_6_0:1.27.0.4
	OPENBSD_6_0_BASE:1.27
	OPENBSD_5_9:1.27.0.2
	OPENBSD_5_9_BASE:1.27
	OPENBSD_5_8:1.26.0.10
	OPENBSD_5_8_BASE:1.26
	OPENBSD_5_7:1.26.0.4
	OPENBSD_5_7_BASE:1.26
	OPENBSD_5_6:1.26.0.6
	OPENBSD_5_6_BASE:1.26
	OPENBSD_5_5:1.26.0.2
	OPENBSD_5_5_BASE:1.26
	OPENBSD_5_4:1.25.0.2
	OPENBSD_5_4_BASE:1.25
	OPENBSD_5_3:1.24.0.4
	OPENBSD_5_3_BASE:1.24
	OPENBSD_5_2:1.24.0.2
	OPENBSD_5_2_BASE:1.24
	OPENBSD_5_1_BASE:1.20
	OPENBSD_5_1:1.20.0.6
	OPENBSD_5_0:1.20.0.8
	OPENBSD_5_0_BASE:1.20
	OPENBSD_4_9:1.20.0.4
	OPENBSD_4_9_BASE:1.20
	OPENBSD_4_8:1.20.0.2
	OPENBSD_4_8_BASE:1.20
	OPENBSD_4_7:1.19.0.2
	OPENBSD_4_7_BASE:1.19
	OPENBSD_4_6:1.13.0.4
	OPENBSD_4_6_BASE:1.13
	OPENBSD_4_5:1.12.0.4
	OPENBSD_4_5_BASE:1.12
	OPENBSD_4_4:1.12.0.2
	OPENBSD_4_4_BASE:1.12
	OPENBSD_4_3:1.11.0.2
	OPENBSD_4_3_BASE:1.11
	OPENBSD_4_2:1.9.0.6
	OPENBSD_4_2_BASE:1.9
	OPENBSD_4_1:1.9.0.4
	OPENBSD_4_1_BASE:1.9
	OPENBSD_4_0:1.9.0.2
	OPENBSD_4_0_BASE:1.9
	OPENBSD_3_9:1.8.0.4
	OPENBSD_3_9_BASE:1.8
	OPENBSD_3_8:1.8.0.2
	OPENBSD_3_8_BASE:1.8
	OPENBSD_3_7:1.7.0.2
	OPENBSD_3_7_BASE:1.7
	OPENBSD_3_6:1.2.0.2
	OPENBSD_3_6_BASE:1.2;
locks; strict;
comment	@# @;


1.27
date	2015.09.20.15.24.39;	author miod;	state Exp;
branches;
next	1.26;
commitid	JkCwJQvfVHDH4mpU;

1.26
date	2013.12.08.15.33.03;	author miod;	state Exp;
branches;
next	1.25;

1.25
date	2013.07.26.20.07.30;	author miod;	state Exp;
branches;
next	1.24;

1.24
date	2012.05.25.17.40.35;	author miod;	state Exp;
branches;
next	1.23;

1.23
date	2012.04.18.18.13.12;	author miod;	state Exp;
branches;
next	1.22;

1.22
date	2012.04.08.22.25.52;	author miod;	state Exp;
branches;
next	1.21;

1.21
date	2012.03.29.20.27.53;	author miod;	state Exp;
branches;
next	1.20;

1.20
date	2010.04.17.11.15.29;	author miod;	state Exp;
branches;
next	1.19;

1.19
date	2010.03.16.17.23.09;	author miod;	state Exp;
branches;
next	1.18;

1.18
date	2010.03.07.21.26.22;	author miod;	state Exp;
branches;
next	1.17;

1.17
date	2010.03.07.14.54.23;	author miod;	state Exp;
branches;
next	1.16;

1.16
date	2010.03.02.13.08.33;	author jsing;	state Exp;
branches;
next	1.15;

1.15
date	2009.10.10.19.20.29;	author miod;	state Exp;
branches;
next	1.14;

1.14
date	2009.08.02.17.08.13;	author jasper;	state Exp;
branches;
next	1.13;

1.13
date	2009.05.30.05.00.37;	author miod;	state Exp;
branches;
next	1.12;

1.12
date	2008.08.06.18.23.56;	author miod;	state Exp;
branches;
next	1.11;

1.11
date	2008.01.15.18.55.48;	author jasper;	state Exp;
branches;
next	1.10;

1.10
date	2007.11.25.17.44.47;	author jasper;	state Exp;
branches;
next	1.9;

1.9
date	2006.06.26.21.11.11;	author dlg;	state Exp;
branches;
next	1.8;

1.8
date	2005.08.01.19.58.59;	author kettenis;	state Exp;
branches;
next	1.7;

1.7
date	2005.02.27.08.23.31;	author david;	state Exp;
branches;
next	1.6;

1.6
date	2005.01.22.01.37.58;	author pvalchev;	state Exp;
branches;
next	1.5;

1.5
date	2004.10.23.08.52.49;	author pefo;	state Exp;
branches;
next	1.4;

1.4
date	2004.10.03.19.45.46;	author miod;	state Exp;
branches;
next	1.3;

1.3
date	2004.09.23.17.23.19;	author pefo;	state Exp;
branches;
next	1.2;

1.2
date	2004.08.26.20.45.00;	author miod;	state Exp;
branches;
next	1.1;

1.1
date	2004.08.20.17.53.09;	author pefo;	state Exp;
branches;
next	;


desc
@@


1.27
log
@More IP26 bits.
@
text
@dnl	$OpenBSD: prep,v 1.26 2013/12/08 15:33:03 miod Exp $
Before you install your system, you should identify your system family and
familiarize yourself with the ARCBios setup and how to run programs from
the Command monitor prompt.

Identifying your system:

    Due to significant design differences in SGI systems, OpenBSD
    needs to use different kernels, depending on the system family.

    There are currently five system families supported by OpenBSD:

    IP22 family:
	Indigo (R4x00 flavour only)
	Indigo2, Challenge M
	Indy, Challenge S

    IP26 family:
	POWER Indigo2 (R8000)

    IP27 family:
	Origin 200, Onyx 2
	Origin 2000

    IP28 family:
	POWER Indigo2 R10000

    IP30 family:
	Octane, Octane 2

    IP32 family:
	O2, O2+

    IP35 family:
dnl	Origin 300, Origin 3000, Onyx 300
	Origin 350, Onyx 350
	Fuel
	Tezro
	Onyx 4

    You should use the kernels (bsd and bsd.rd) with the IP suffix
    matching your family number, except for IP35 systems which use
    IP27 kernels.

    On Indigo2 systems, the particular family is not always easy to
    figure out. When in doubt, access the maintenance console (see
    below) and enter the ``version'' command. Its output will report
    the IPxx family number of the system.

Accessing the Maintenance Console:

    When the system starts up, press the ESC key or use the mouse and
    click the ``stop for maintenance'' button. Once in the System
    Maintenance Menu, select '5' (or click the appropriate icon if you
    are using the graphics console) to go into the Command Monitor.

    If the internal disk with the lowest SCSI ID does not contain a
    valid Volume Header, but is bootable, the Maintenance Console will
    be entered by default.

    The first time the Maintenance Console is entered, it may be
    necessary to force a reset of the environment to its default
    settings by entering the ``resetenv'' command at the chevron
    prompt. If some variables have been set explicitly, this may
    disturb the normal OpenBSD boot process.

Switching from serial to graphics console and vice versa:

    To change to serial console, go into the ARCBios Maintenance Console
    and change the ``console'' environment variable, and power-cycle
    the machine.

    >> setenv console d

    will select 8N1, no flow control, serial console on the first serial
    port (labeled ``(1)''), while

    >> setenv console g

    will select the graphics console.

    The speed of the serial console is controlled by the ``dbaud'' environment
    variable, and defaults to 9600 bps if this variable is not set.

    Not all graphics options are currently supported by OpenBSD. If your
    system is configured for graphics console but the kernel does not
    support your frame buffer, it will fallback to serial console on the
    first serial port.

    As of OpenBSD OSREV, the only unsupported graphics console devices are:
    - Infinite Reality (Kona) frame buffer on IP27/IP35 Onyx systems
    - Voyager (Ultimate Vision) frame buffer on IP35 Onyx 4 systems

Switching from L1 console to serial console and vice versa:

    IP35 systems without a graphics console can have the PROM console output
    either on the L1 console serial port, or the regular serial port. 

    The `console' command at the PROM prompt, can select between them:

    >> console sc

    will switch to the L1 serial port, while

    >> console ioc3

    or

    >> console ioc4

    will select the regular serial port, depending on the I/O board type.

    On Fuel systems, there is no external L1 serial port, so `console sc'
    should never be used on these machines.

    Origin 300 and 3000 families can switch between `sc' and `ioc3', while
    Origin 350 and 3500 families (including Tezro and Onyx 4) can switch
    between `sc' and `ioc4'.

    The OpenBSD kernel only supports serial console on the regular serial
    ports; if your PROM console is on the L1 port, the kernel console will
    nevertheless pick the first IOC3 or IOC4 serial port.

Setting the environment:

    When setting up the system to boot from disk, the ``OSLoader''
    environment variable will need to be changed.

    Its default value is ``sashARCS'', ``sash'' or ``sash64'', which is
    IRIX's standalone shell and loader. Set it to ``boot'', the name under
    which the OpenBSD boot loader has been installed.

    The kernel image loaded by default is specified in the ``OSLoadFilename''
    variable, which defaults to ``unix''.  To boot OpenBSD, set it to
    ``bsd''.

    To enable automatic booting of OpenBSD once the machine has passed its
    diagnostic tests, change the value of ``AutoLoad'' to ``Yes''.

@


1.26
log
@Suggest booting from cd-rom as the first choice. Document that cd54.iso is
now bootable on all supported platforms (although it will still need manual
operation on IP22), but that install54.iso is currently still not bootable
on IP27/IP35.
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.25 2013/07/26 20:07:30 miod Exp $
d15 1
a15 1
	Indigo 2, Challenge M
d18 3
a20 3
dnl    IP26 family:
dnl	POWER Indigo 2 (R8000)
dnl
d26 1
a26 1
	POWER Indigo 2 R10000
@


1.25
log
@Minimalist update for 5.4. eyeballed deraadt@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.24 2012/05/25 17:40:35 miod Exp $
d14 2
a15 2
	Indigo (R4x00 flavour)
	Indigo 2, Challenge M (R4x00 flavour)
@


1.24
log
@IP28 bits. Also explain how to boot from the CD-ROM manually if the PROM
can't manage to use it from the `install system software' menu.
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.23 2012/04/18 18:13:12 miod Exp $
d44 5
@


1.23
log
@update here too
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.22 2012/04/08 22:25:52 miod Exp $
d25 3
a27 3
dnl    IP28 family:
dnl	POWER Indigo 2 R10000
dnl
@


1.22
log
@Sync with the current state of things
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.21 2012/03/29 20:27:53 miod Exp $
d85 1
a85 8
    As of OpenBSD OSREV, supported graphics console devices are:
    - the onboard frame buffer on IP32 systems (gbe)
    - ImpactSR (Mardigras) frame buffer on IP30 (I-Series and E-Series)
      (impact)
    - VPro family frame buffers on IP27, IP30 and IP35 systems (odyssey)

    And the following graphics devices are not supported yet:
    - all IP22 frame buffers
d124 3
a126 2
    Its default value is ``sash'' or ``sash64'', which is IRIX's standalone
    shell and loader. Set it to ``boot'', the OpenBSD boot loader.
@


1.21
log
@Hook IP22 kernels to the build, and document how to boot the installation
media on them. Try to be helpful and explain how things may fail on the
older PROM and what to do about this.
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.20 2010/04/17 11:15:29 miod Exp $
d18 3
d25 3
@


1.20
log
@Sync with recent developments.
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.19 2010/03/16 17:23:09 miod Exp $
d11 6
a16 1
    There are currently four system families supported by OpenBSD:
d86 1
d129 2
a130 2
    variable, which defaults to ``/unix''.  To boot OpenBSD, set it to
    ``/bsd''.
@


1.19
log
@Jumbo commit for 4.7 installation instructions:
- do not mention tape as an installation media on systems where it is very
  unlikely that a tape drive can be connected to (i.e. anything with only
  USB as expansion capabilities)
- do not mention that fetching the installation sets from a partition is
  ``for upgrades only''. You may do this for installation, but of course
  you can not use a partition which will be newfs'ed for that purpose.
- mention ext2fs partitions as possible installation sets source only on
  platforms where the installation media actually can mount an ext2fs
  filesystem.
- stress the fact that the sparc miniroot image is a GENERIC kernel with
  a little on-disk filesystem, and not a RAMDISK kernel with a little
  in-memory filesystem, and thus must not be overwritten during installation
  (i.e. be careful if you repartition the disk the miniroot has been put on).
- more conv=sync -> conv=osync for tape setup instructions.
- model-specific layout changes on armish, loongson and socppc instructions.
- fix various typos and grammar mistaeks.

"sure" deraadt@@ (without eyeballing)
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.18 2010/03/07 21:26:22 miod Exp $
d25 1
a25 1
	Origin 350, Onyx 350, Onyx 4
d28 1
d107 2
a108 1
    Origin 350 and 3500 families can switch between `sc' and `ioc4'.
@


1.18
log
@Minimalistic driver for the ImpactSR (Mardigras) video option found on older
Octane systems, as well as some Onyxes. With special permission to change a
systemwide .h file and add a manpage from deraadt@@
Magic numbers and operation sequencing borrowed from Linux; tested on
Octane + ESI.
ok deraadt@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.17 2010/03/07 14:54:23 miod Exp $
d75 2
a76 1
    - ImpactSR (Mardigras) frame buffer on IP30 (I-Series and E-Series) (impact)
d117 1
a117 1
    Its default value is ``sash'', which is IRIX's standalone
d120 3
a122 2
    Also, by default it tries to boot a kernel named ``/unix''. To
    make it boot OpenBSD, set ``OSLoadFilename'' to ``/bsd''.
@


1.17
log
@Update supported hardware list, mention that the `dbaud' environment variable
controls the serial console speed, and try to explain which video options
are supported and which are not.
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.16 2010/03/02 13:08:33 jsing Exp $
d75 1
a78 1
    - ImpactSR (Mardigras) frame buffer on IP30 (I-Series and E-Series)
@


1.16
log
@Fix typos and keep whitespace around PROM command examples consistent.

ok miod@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.14 2009/08/02 17:08:13 jasper Exp $
d24 1
a24 1
	Origin 300, Origin 3000, Onyx 300
d58 2
a59 2
    will select 9600 8N1, no flow control, serial console on the first
    serial port (labeled ``(1)''), while
d65 16
a80 3
    Only IP32 family systems are supported with a graphics console
    under OpenBSD at the moment. On all other non-headless systems,
    you need to change the console to serial.
@


1.15
log
@More details about the dreaded netaddr environment variable for network
boot, and about the console madness on machines with an external L1 serial
port.
@
text
@d65 1
a65 1
    Only IP32 family systems are supported with a graphis console
d75 1
d77 1
d79 1
d81 1
d83 1
d85 1
d103 1
a103 1
    Its default value is ``sash'', which is IRIX' standalone
@


1.14
log
@- explain how to enable autobooting

ok miod@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.13 2009/05/30 05:00:37 miod Exp $
d25 1
a25 1
dnl	Origin 350, Onyx 350, Onyx 4
d27 1
a27 1
dnl	Tezro
d56 1
a56 1
    > setenv console d
d61 1
a61 1
    > setenv console g
d68 23
@


1.13
log
@Sync with IP27/30/35 support and new kernel filenames.
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.12 2008/08/06 18:23:56 miod Exp $
d79 3
@


1.12
log
@Minor random tweaks and fixes.
@
text
@d1 31
a31 3
dnl	$OpenBSD: prep,v 1.11 2008/01/15 18:55:48 jasper Exp $
Before you install your system, you should familiarize yourself with the
ARCBios setup and how to run programs from the Command monitor prompt.
d65 4
a78 18

Disk numbering

    SGI numbers their disks 1-n depending on their position in the
    backplane. For example, on the O2, the slot closest to the CPU
    is numbered 1 and the next 2 if the CPU is a R5000. On R1x000
    models, slot 1 is lost due to the larger heatsink on the CPU.
    Normally the kernel translates the slot numbers to disk numbers
    by subtracting 1 from the slot number, eg slot 1 becomes sd0.
    However on an O2 with a R1x000 cpu, 2 is subtracted from the
    slot number to compensate for the lost slot.

    When the kernel searches for the boot device it uses the ARCBios
    environment variable OSLoadPartition. Since the disk number in
    the variable is the absolute number, in contrast to the kernels
    relative numbers, the kernel will not be able to find the boot
    device if the disk slots are not filled from the lowest and up.
    An empty slot before the boot device will confuse the lookup.
@


1.11
log
@- update the hardware list with reality
- tweak a sentence in prep now that we have decent console support

ok miod@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.10 2007/11/25 17:44:47 jasper Exp $
d3 1
a3 1
ARCS setup and how to run programs from the Command monitor prompt.
d24 1
a24 6
    Booting the ramdisk kernel can be done from the ARCS graphic console
    although it might be more convenient to use the serial console for
    the installation procedure. Some systems come with the serial console
    enabled by default but sometimes this must be changed.

    To change to serial console, go into the ARCS Maintenance Console
@


1.10
log
@OSLoadFilename needs to be set to /bsd instead of /unix (default)

ok miod@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.9 2006/06/26 21:11:11 dlg Exp $
d25 3
a27 4
    although it might be more convenient to use the serial console since
    the kernel currently only supports the serial console. Some systems
    come with the serial console enabled by default but sometimes
    this must be changed.
@


1.9
log
@in my prom its OSLoadPartition, not OsLoadPartition

ok miod@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.8 2005/08/01 19:58:59 kettenis Exp $
d50 3
@


1.8
log
@Document new CD-ROM installation method.
ok deraadt@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.7 2005/02/27 08:23:31 david Exp $
d63 1
a63 1
    environment variable OsLoadPartition. Since the disk number in
@


1.7
log
@the the
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.6 2005/01/22 01:37:58 pvalchev Exp $
d9 2
a10 2
    Maintenance menu, select '5' (or click the appropriate icon if in
    graphics console) to go into the Command Monitor.
@


1.6
log
@typo; david l goodrich <dlg@@dorkzilla.org>
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.5 2004/10/23 08:52:49 pefo Exp $
d7 2
a8 2
    When the system starts up, press the ESC key or use the the mouse
    and click the ``stop for maintenance'' button. Once in the System
@


1.5
log
@clarify on SGI vs kernel disk numbering
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.4 2004/10/03 19:45:46 miod Exp $
d18 1
a18 1
    settings by entering the ``resetenv'' command and the chevron
@


1.4
log
@Fix a dvorak typo involving Nikolay; reported by David L. Goodrich, thanks!
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.3 2004/09/23 17:23:19 pefo Exp $
d50 19
@


1.3
log
@flesh out. mention R10K and R12K support
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.2 2004/08/26 20:45:00 miod Exp $
d20 1
a20 1
    disturm the normal OpenBSD boot process.
@


1.2
log
@Rearrange, move ARCS stuff to the preparation section (needs to grow with
more information), describe the installation process better, fix some typos,
mention NFS and tapes as valid installation media.
@
text
@d1 1
a1 1
dnl	$OpenBSD$
d19 2
a20 1
    prompt.
d27 1
a27 1
    come with the serial console but enabled by default but sometimes
@


1.1
log
@This is VERY MUCH work in progress. However it is a first cut of notes
for the SGI install, hopefully being partly helpful to get started.
@
text
@d1 3
a3 2
Before you start you should familiarize yourself with the ARCS setup
and how to run programs from the Command monitor prompt.
d5 1
a5 15
If you're installing OpenBSD/sgi for the first time it's a very good
idea to look at the partition sizes of disk you intend installing OpenBSD on.
Changing the size of partitions after you've installed is difficult. If
you do not have a spare bootable disk, it may be simpler to re-install
OpenBSD again from scratch.

Assuming a classic partition scheme with root (`/') and /usr filesystems,
a comfortable size for the OpenBSD root filesystem partition (a) is about
64Mb. The install will take ~30Mb of that. However it has shown that 256M
is not a bad choice when more packages are to be installed. A good initial
size for the swap (b) partition is twice the amount of physical memory in
your machine or at least 128M. A minimum /usr partition (e) is ~256M but
with that you will likely run into trouble later. A minimum size of 1G is
recommended. A full binary installation, without X11 or any other additional
software, takes about 170M in `/usr'.
d7 42
@

