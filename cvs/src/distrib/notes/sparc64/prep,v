head	1.25;
access;
symbols
	OPENBSD_6_2:1.25.0.8
	OPENBSD_6_2_BASE:1.25
	OPENBSD_6_1:1.25.0.10
	OPENBSD_6_1_BASE:1.25
	OPENBSD_6_0:1.25.0.6
	OPENBSD_6_0_BASE:1.25
	OPENBSD_5_9:1.25.0.2
	OPENBSD_5_9_BASE:1.25
	OPENBSD_5_8:1.25.0.4
	OPENBSD_5_8_BASE:1.25
	OPENBSD_5_7:1.24.0.4
	OPENBSD_5_7_BASE:1.24
	OPENBSD_5_6:1.24.0.6
	OPENBSD_5_6_BASE:1.24
	OPENBSD_5_5:1.24.0.2
	OPENBSD_5_5_BASE:1.24
	OPENBSD_5_4:1.23.0.22
	OPENBSD_5_4_BASE:1.23
	OPENBSD_5_3:1.23.0.20
	OPENBSD_5_3_BASE:1.23
	OPENBSD_5_2:1.23.0.18
	OPENBSD_5_2_BASE:1.23
	OPENBSD_5_1_BASE:1.23
	OPENBSD_5_1:1.23.0.14
	OPENBSD_5_0:1.23.0.16
	OPENBSD_5_0_BASE:1.23
	OPENBSD_4_9:1.23.0.12
	OPENBSD_4_9_BASE:1.23
	OPENBSD_4_8:1.23.0.10
	OPENBSD_4_8_BASE:1.23
	OPENBSD_4_7:1.23.0.6
	OPENBSD_4_7_BASE:1.23
	OPENBSD_4_6:1.23.0.8
	OPENBSD_4_6_BASE:1.23
	OPENBSD_4_5:1.23.0.4
	OPENBSD_4_5_BASE:1.23
	OPENBSD_4_4:1.23.0.2
	OPENBSD_4_4_BASE:1.23
	OPENBSD_4_3:1.22.0.2
	OPENBSD_4_3_BASE:1.22
	OPENBSD_4_2:1.21.0.4
	OPENBSD_4_2_BASE:1.21
	OPENBSD_4_1:1.21.0.2
	OPENBSD_4_1_BASE:1.21
	OPENBSD_4_0:1.20.0.2
	OPENBSD_4_0_BASE:1.20
	OPENBSD_3_9:1.18.0.4
	OPENBSD_3_9_BASE:1.18
	OPENBSD_3_8:1.18.0.2
	OPENBSD_3_8_BASE:1.18
	OPENBSD_3_7:1.17.0.2
	OPENBSD_3_7_BASE:1.17
	OPENBSD_3_6:1.16.0.4
	OPENBSD_3_6_BASE:1.16
	OPENBSD_3_5:1.16.0.2
	OPENBSD_3_5_BASE:1.16
	OPENBSD_3_4:1.14.0.4
	OPENBSD_3_4_BASE:1.14
	OPENBSD_3_3:1.14.0.2
	OPENBSD_3_3_BASE:1.14
	OPENBSD_3_2:1.12.0.2
	OPENBSD_3_2_BASE:1.12
	OPENBSD_3_1:1.11.0.2
	OPENBSD_3_1_BASE:1.11
	OPENBSD_3_0:1.7.0.2
	OPENBSD_3_0_BASE:1.7;
locks; strict;
comment	@# @;


1.25
date	2015.03.27.20.50.40;	author miod;	state Exp;
branches;
next	1.24;
commitid	Su4qESnMQy3wms7I;

1.24
date	2014.01.09.19.44.49;	author miod;	state Exp;
branches;
next	1.23;

1.23
date	2008.07.29.22.24.25;	author kettenis;	state Exp;
branches;
next	1.22;

1.22
date	2008.03.10.22.00.12;	author miod;	state Exp;
branches;
next	1.21;

1.21
date	2007.03.08.05.21.29;	author david;	state Exp;
branches;
next	1.20;

1.20
date	2006.05.15.10.07.16;	author robert;	state Exp;
branches;
next	1.19;

1.19
date	2006.03.23.06.10.20;	author deraadt;	state Exp;
branches;
next	1.18;

1.18
date	2005.08.09.16.48.11;	author deraadt;	state Exp;
branches;
next	1.17;

1.17
date	2005.03.18.19.37.07;	author mickey;	state Exp;
branches;
next	1.16;

1.16
date	2004.03.17.09.25.10;	author jmc;	state Exp;
branches;
next	1.15;

1.15
date	2004.03.16.08.25.00;	author jmc;	state Exp;
branches;
next	1.14;

1.14
date	2003.02.18.03.26.14;	author henric;	state Exp;
branches;
next	1.13;

1.13
date	2003.02.17.17.26.48;	author miod;	state Exp;
branches;
next	1.12;

1.12
date	2002.08.20.19.34.58;	author jason;	state Exp;
branches;
next	1.11;

1.11
date	2002.04.13.18.30.58;	author ian;	state Exp;
branches;
next	1.10;

1.10
date	2002.04.07.23.31.04;	author miod;	state Exp;
branches;
next	1.9;

1.9
date	2002.02.07.08.57.28;	author miod;	state Exp;
branches;
next	1.8;

1.8
date	2001.11.02.01.54.02;	author miod;	state Exp;
branches;
next	1.7;

1.7
date	2001.10.15.18.36.20;	author miod;	state Exp;
branches;
next	1.6;

1.6
date	2001.10.13.15.33.20;	author matthieu;	state Exp;
branches;
next	1.5;

1.5
date	2001.10.01.23.31.09;	author miod;	state Exp;
branches;
next	1.4;

1.4
date	2001.09.27.00.36.43;	author miod;	state Exp;
branches;
next	1.3;

1.3
date	2001.09.24.21.14.06;	author miod;	state Exp;
branches;
next	1.2;

1.2
date	2001.09.21.04.37.43;	author jason;	state Exp;
branches;
next	1.1;

1.1
date	2001.09.19.16.23.58;	author jason;	state Exp;
branches;
next	;


desc
@@


1.25
log
@Remove `installing from SunOS' and `installing from Solaris' instructions.
They are much more troublesome than using the miniroot, and if you're actually
still running a SunOS setup in 2015, then you're me, and you don't need to be
told this information anyway.

Do not suggest disks might be shared between OpenBSD and SunOS or Solaris
anymore. This is just asking for trouble.
@
text
@dnl	$OpenBSD: prep,v 1.24 2014/01/09 19:44:49 miod Exp $
If your UltraSPARC machine is somewhat old, it might need a firmware update
before it can be used under OpenBSD. You are advised to try to install
OpenBSD first; if it can't boot or fails mysteriously, you might need to
update your firmware. To do so, check the ``Updating your firmware''
section later in this document.

Your OpenBOOT ROM may need some setup.  You cannot use the security modes
of the OpenBOOT ROM.  Make sure that the ROM security modes are disabled:

    ok setenv security-mode none


Most of the new Ultras shipped by Sun (or Oracle) with a preinstalled Solaris
have an initial specific factory setup of the boot ROM, in order to start up
Solaris WebStart at the first boot; the boot-device variable is set to
disk:f.  Make sure you reset the boot device to its default value:

    ok set-default boot-device

will work for most systems. This can be adapted if you've multiple
systems installed and know what you're doing.

To disable automatic boot use the following command:

    ok setenv auto-boot? false

and then to enable it later use:

    ok setenv auto-boot? true

or on an installed system use the eeprom(8) command:

    # eeprom 'auto-boot?=true'

Updating your firmware:
-----------------------

If OpenBSD does not boot or install properly on your machine, it might need
a firmware update.

Updating your firmware is a dangerous operation which may damage your
hardware. Be sure to carefully follow these instructions and, if in doubt,
please don't do this.

You will need to have a working operating system installed on your machine,
in order to perform the update.  If this is not the case, you might be able
to boot the flash updater software via network, but this has not been tested
and is not supported by Oracle.

ifdef({:-living in the good old times-:},{:-dnl
dnl This section is commented out, for historical reference, until a
dnl reliable mirror of historical SunSolve patches can be found.
The firmware update is delivered as a specific patch, depending on your
machine:

	Machine		Patch number
dnl XXX uncomment machine entries as they become supported
	Blade 100/150	111179
	Enterprise 220R	106455
	Enterprise 250	106503
	Enterprise 420R	109082
	Enterprise 450	106122
	Enterprise 3x00/4x00/5x00/6x00	103346
	Sun Fire 3800/4800/4810/6800	112883
	Sun Fire V480	113034
	Sun Fire V880	112186
	Netra T1 200	111991
	Netra X1	111952
	Ultra 1		104881
	Ultra 1E	104288
	Ultra 2		104169
	Ultra 5/10	106121
	Ultra 30	105930
	Ultra 60	106455
	Ultra 80	109082
	Ultra 450	106122

You can use SunSolve to get the patches by entering the
correct Patch-ID# to the corresponding field at
    http://sunsolve.sun.com/pub-cgi/show.pl?target=patchpage
-:},{:-dnl
Firmware update information can be found at
  http://www.oracle.com/technetwork/systems/patches/firmware/release-history-jsp-138416.html
-:})dnl

Follow the patch installation notes very carefully. You will need to open
your machine in order to apply this patch.
@


1.24
log
@Mention that T5120/T5220 systems require an OBP update if they are below 4.28
level (matching the stealth commit to sparc64.html years ago); and update the
OBP update section to point to the current Oracle ``Firmware Domwnloads'' page.
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.23 2008/07/29 22:24:25 kettenis Exp $
a12 35

Please note that while OpenBSD and Solaris have a reasonable degree of
compatibility between disk labels and filesystems there are some problems
to watch out for during initial installation or when trying to maintain
both OpenBSD and Solaris environments on the same system.

    If the OpenBSD fsck(8) utility is used on a Solaris filesystem, it will
    set OpenBSD "clean flags" and BSD4.4 summary fields in the superblock.
    Solaris does *not* like this and you will have to do a "fsck -b 32" under
    Solaris to access an alternate superblock to repair the filesystem.  You
    should always specify Solaris filesystems with a "pass number" of 0 in
    their /etc/fstab entry to prevent this, and preferably mount them "RO".

    If Solaris fsck is used on an OpenBSD filesystem in the default OpenBSD
    (4.4BSD) format, it will first complain about the superblock and then
    about missing . and .. entries.  Do *not* try to "correct" these
    problems, as attempting to do so will completely trash the filesystem.

    You should avoid using soft updates (option softdep in /etc/fstab)
    on your shared filesystems.  Although untested, it is likely that
    Solaris would be confused by a filesystem with soft update flags
    enabled.

The OpenBSD "Sun Compatible" disklabel has been extended to support 16
partitions, which may be compatible with Solaris, but Solaris only sees
the first 8 partitions and may "lose" information about the extended
partitions.



OpenBSD and Sun bootblocks are similar in concept, though implemented
differently.  The OpenBSD bootblocks are architecture independent and also
understand the extended disk labels with 16 partitions.  You can use Solaris
bootblocks, but remember that OpenBSD bootblocks must be installed with
OpenBSD installboot and Solaris bootblocks with Solaris installboot.
@


1.23
log
@Sun stopped distributing patches through FTP :(.
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.22 2008/03/10 22:00:12 miod Exp $
d49 2
a50 2
Most of the new Ultras shipped by Sun with a preinstalled Solaris have an
initial specific factory setup of the boot ROM, in order to start up
d84 1
a84 1
and is not supported by Sun.
d86 3
d117 4
@


1.22
log
@Minor tweaks, including behind-the-scenes fixes.
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.21 2007/03/08 05:21:29 david Exp $
d111 1
a111 10
Get the patch installation notes from Sun's FTP site, as
    ftp://ftp.sun.com/patchroot/all_unsigned/104169-08.README
(replace 104169 with the correct patch number).
Check the Patch-ID# line in this readme file to get the patch filename, for
example 104169-08. The patch filename will then be either
    ftp://ftp.sun.com/patchroot/all_unsigned/104169-08.tar.Z
or
    ftp://ftp.sun.com/patchroot/all_unsigned/104169-08.zip

You can also use SunSolve to get the patches by entering the
@


1.21
log
@spelling fixes; ok deraadt@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.20 2006/05/15 10:07:16 robert Exp $
d97 3
a99 3
dnl	Sun Fire 3800/4800/4810/6800	112883
dnl	Sun Fire V480	113034
dnl	Sun Fire V880	112186
d109 1
a109 1
dnl	Ultra 450	106122
@


1.20
log
@point to the correct FTP site that can be used to get firwmare patches
and also note the reader that the SunSolve web interface can be used
for the same purpose.
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.19 2006/03/23 06:10:20 deraadt Exp $
d67 1
a67 1
or on an installed system use the eeprom(8) commmand:
@


1.19
log
@avoid saying format() because of the new gnu m4 extensions.  this is crazy
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.18 2005/08/09 16:48:11 deraadt Exp $
d111 2
a112 2
Get the patch installation notes from SunSolve, as
    ftp://sunsolve.sun.com/pub/patches/104169.readme
d116 1
a116 1
    ftp://sunsolve.sun.com/pub/patches/104169-08.tar.Z
d118 5
a122 1
    ftp://sunsolve.sun.com/pub/patches/104169-08.zip
@


1.18
log
@apparently some ultra machines do need this, work by miod; testing my uwe
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.17 2005/03/18 19:37:07 mickey Exp $
d37 3
a39 3
partitions, which may be compatible with Solaris, but the Solaris
format(1M) utility only sees the first 8 partitions and may "lose"
information about the extended partitions.
a40 2
Use Solaris format(1M) only with *extreme* caution on drives that contain
OpenBSD partitions.
@


1.17
log
@mention auto-boot switch; deraadt@@ ok
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.16 2004/03/17 09:25:10 jmc Exp $
d96 1
a96 1
dnl	Enterprise 420R	109082
d98 5
a102 5
dnl	Enterprise 3x00/4x00/5x00/6x00	103346
dnl	Fire 3800/4800/4810/6800	112883
dnl	Fire V480	113034
dnl	Fire V880	112186
dnl	Netra T1 200	111991
d110 1
a110 1
dnl	Ultra 80	109082
@


1.16
log
@grammar, consistency fixes, and typos;
ok miod@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.15 2004/03/16 08:25:00 jmc Exp $
d61 11
@


1.15
log
@typos and consistency fixes;
ok miod@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.14 2003/02/18 03:26:14 henric Exp $
d23 1
a23 1
    should always specify Solaris filesystem with a "pass number" of 0 in
d47 1
a47 1
understand the extended disklabels with 16 partitions.  You can use Solaris
d69 1
a69 1
hardware. Be sure to follow carefully these instructions, and if in doubt,
@


1.14
log
@E450 works.
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.13 2003/02/17 17:26:48 miod Exp $
d36 1
a36 1
The OpenBSD "Sun Compatible" disklabel have been extended to support 16
@


1.13
log
@More PROM upgrade patch numbers. From SunSolve.
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.12 2002/08/20 19:34:58 jason Exp $
d86 1
a86 1
dnl	Enterprise 450	106122
@


1.12
log
@ultra60 support
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.11 2002/04/13 18:30:58 ian Exp $
d82 1
a82 1
	Blade 100	111179
d84 1
a85 1
	Enterprise 250	106503
d87 6
d96 1
a96 2
	Ultra 5		106121
	Ultra 10	106121
@


1.11
log
@small typos; ok miod@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.10 2002/04/07 23:31:04 miod Exp $
d93 1
a93 1
dnl	Ultra 60	106455
@


1.10
log
@- remove a few obsolete texts
- fix a few typo and layout issues
- sync hardware lists
- for sparc64, document the patch# for E220R eeprom
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.9 2002/02/07 08:57:28 miod Exp $
d51 1
a51 1
Most of new Ultras shipped by Sun with a preinstalled Solaris have an
d69 1
a69 1
hardware. Be sure to follow carefully these instructions, and in doubt,
@


1.9
log
@X11 is available for sparc64 now, and add RCSID.
@
text
@d1 1
a1 1
dnl	$OpenBSD$
d83 1
a83 1
dnl	Enterprise 220R	106455
@


1.8
log
@- U2 has been tested
- floppies have neither NFS nor CDROM support
- add a section about firmware upgrades, and tell that they might be
necessary, especially for U1/1E/2 systems. Pointed out from brad@@, some of
the information provided here comes from Sun's firmware update documentation.
@
text
@d1 1
@


1.7
log
@The final round of sparc64 installation notes updates:
- add miniroot and bootable cd-rom information
- fix a few wordings
- fix incorrect Solaris manual pages section names
- replace a rip-off of boot_sparc(8) with a more adequate rip-off of
  boot_sparc64(8)

The whole ok deraadt@@
@
text
@d1 6
d59 48
@


1.6
log
@document strange PROM setup on machines before fist Solaris boot.
Ok miod@@, deraadt@@
@
text
@d31 1
a31 1
format(8) utility only sees the first 8 partitions and may "lose"
d34 1
a34 1
Use Solaris format(8) only with *extreme* caution on drives that contain
d45 3
a47 3
initial strange setup of the boot ROM, in order to start up Solaris
WebStart at the first boot: boot-device is set to disk:f.  Make sure
you reset the boot device to its default value:
@


1.5
log
@- update supported hardware list
- remove more sparc'isms. The more you remove, the more there are...
- describe more fun installation methods
- fix a random typo
@
text
@d44 4
d49 4
@


1.4
log
@More issues clarified, thanks Jason !
@
text
@a0 1

@


1.3
log
@Bring the sparc64 installation notes in better shape, and closer to
reality.
Thanks to jason@@ for hints and feedback.
@
text
@a1 1
dnl XXX is security-mode still present?
@


1.2
log
@Ugh, there's SOO much left to do here
@
text
@d2 1
d4 1
a4 2
of the sparc OpenBOOT ROM.  Make sure that the ROM security modes are
disabled:
d16 2
a17 2
    SunOS does *not* like this and you will have to do a "fsck -b 32" under
    SunOS to access an alternate superblock to repair the filesystem.  You
d32 1
a32 1
partitions, which may be compatible with Solaris, but the old Solaris
@


1.1
log
@stolen verbatim from sparc and only slightly modified from there... this
is going to need a LOT of work (any volunteers?)
@
text
@a1 16
Your OpenBOOT ROM may need some setup.  If you are running OpenBSD on
a sun4c, or sun4m system, the ROM must be set to "new" command mode.
If your sun4c or sun4m machine comes up and gives you a `>' prompt
instead of `ok', type:

    >n
    ok setenv sunmon-compat? false
    ok

This is needed because OpenBSD relies on the behaviour of the "new" command
mode.  OpenBSD will not boot correctly on sun4c or sun4m systems that 
are not running in "new" command mode.  The sun4 systems such as the 4/110, 
4/200, and 4/300 system do not have a "new" command mode, and will work
fine as-is.


d9 1
a9 1
Please note that while OpenBSD and SunOS have a reasonable degree of
d12 1
a12 1
both OpenBSD and SunOS environments on the same system.
d14 1
a14 1
    If the OpenBSD fsck(8) utility is used on a SunOS filesystem, it will
d18 1
a18 1
    should always specify SunOS filesystem with a "pass number" of 0 in
d21 1
a21 1
    If SunOS fsck is used on an OpenBSD filesystem in the default OpenBSD
d27 3
a29 3
    on your shared filesystems.
    Although untested, it is likely that SunOS would be confused by a 
    filesystem with soft update flags enabled.
d32 1
a32 1
partitions, which may be compatible with Solaris, but the old SunOS
d36 1
a36 1
Use SunOS format(8) only with *extreme* caution on drives that contain
d40 1
a40 1
OpenBSD and Sun BSD bootblocks are similar in concept, though implemented
d42 1
a42 1
understand the extended disklabels with 16 partitions.  You can use SunOS
d44 1
a44 1
OpenBSD installboot and SunOS bootblocks with SunOS installboot.
@

