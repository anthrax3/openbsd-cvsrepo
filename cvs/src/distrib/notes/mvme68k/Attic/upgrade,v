head	1.6;
access;
symbols
	OPENBSD_5_5:1.5.0.6
	OPENBSD_5_5_BASE:1.5
	OPENBSD_5_4:1.5.0.4
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.5.0.2
	OPENBSD_5_3_BASE:1.5
	OPENBSD_5_2:1.4.0.46
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.42
	OPENBSD_5_0:1.4.0.44
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.4.0.40
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.4.0.38
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.4.0.34
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.4.0.36
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.32
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.4.0.28
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.4.0.30
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_2:1.4.0.26
	OPENBSD_4_2_BASE:1.4
	OPENBSD_4_1:1.4.0.24
	OPENBSD_4_1_BASE:1.4
	OPENBSD_4_0:1.4.0.22
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.4.0.20
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.4.0.18
	OPENBSD_3_8_BASE:1.4
	OPENBSD_3_7:1.4.0.16
	OPENBSD_3_7_BASE:1.4
	OPENBSD_3_6:1.4.0.14
	OPENBSD_3_6_BASE:1.4
	OPENBSD_3_5:1.4.0.12
	OPENBSD_3_5_BASE:1.4
	OPENBSD_3_4:1.4.0.10
	OPENBSD_3_4_BASE:1.4
	OPENBSD_3_3:1.4.0.8
	OPENBSD_3_3_BASE:1.4
	OPENBSD_3_2:1.4.0.6
	OPENBSD_3_2_BASE:1.4
	OPENBSD_3_1:1.4.0.4
	OPENBSD_3_1_BASE:1.4
	OPENBSD_3_0:1.4.0.2
	OPENBSD_3_0_BASE:1.4
	OPENBSD_2_9:1.3.0.2
	OPENBSD_2_9_BASE:1.3
	OPENBSD_2_8:1.2.0.8
	OPENBSD_2_8_BASE:1.2
	OPENBSD_2_7:1.2.0.6
	OPENBSD_2_7_BASE:1.2
	OPENBSD_2_6:1.2.0.4
	OPENBSD_2_6_BASE:1.2
	OPENBSD_2_5:1.2.0.2
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.1.0.8
	OPENBSD_2_4_BASE:1.1
	OPENBSD_2_3:1.1.0.6
	OPENBSD_2_3_BASE:1.1
	OPENBSD_2_2:1.1.0.4
	OPENBSD_2_2_BASE:1.1
	OPENBSD_2_1:1.1.0.2
	OPENBSD_2_1_BASE:1.1;
locks; strict;
comment	@# @;


1.6
date	2014.03.18.22.36.28;	author miod;	state dead;
branches;
next	1.5;

1.5
date	2013.02.09.19.51.00;	author miod;	state Exp;
branches;
next	1.4;

1.4
date	2001.10.02.23.04.27;	author miod;	state Exp;
branches;
next	1.3;

1.3
date	2001.04.25.20.27.57;	author miod;	state Exp;
branches;
next	1.2;

1.2
date	99.01.23.08.22.14;	author todd;	state Exp;
branches;
next	1.1;

1.1
date	96.10.12.01.19.35;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Retire hp300, mvme68k and mvme88k ports. These ports have no users, keeping
this hardware alive is becoming increasingly difficult, and I should heed the
message sent by the three disks which have died on me over the last few days.

Noone sane will mourn these ports anyway. So long, and thanks for the fish.
@
text
@OpenBSDUpgrade({:-an installation tape, or bsd.rd-:})
dnl $OpenBSD: upgrade,v 1.5 2013/02/09 19:51:00 miod Exp $
dnl Restore this line...
dnl OpenBSDUpgrade({:-an installation tape, or bsd.rd-:})
dnl ... for the 5.5 release notes, where it can be assumed that the system
dnl being upgraded is not older than 5.3 and thus fully ELF.
dnl In the meantime, we'll stick to the variant below.
Warning! Upgrades to OpenBSD OSREV are currently only supported from the
immediately previous release.  The upgrade process will also work with older
releases, but might not execute some migration tasks that would be necessary
for a proper upgrade.

The best solution, whenever possible, is to backup your data and reinstall
from scratch. As a minimum, if the toolchain (the ``comp'' set) was installed,
you should remove all files within /usr/{:-include-:} before attempting to
upgrade.

To upgrade OpenBSD OSREV from a previous version, start with the general
instructions in the section "Installing OpenBSD".

IMPORTANT NOTE: if you intend to boot from bsd.rd, it is very likely that
  your boot blocks do not support ELF kernels. Before attempting to boot
  bsd.rd, upgrade the boot blocks by copying the provided ``bootsd'' and
  ``bootxx'' files to /usr/mdec/ and run, as root:
	cp /usr/mdec/boot /boot
	/usr/mdec/installboot /boot /usr/mdec/bootxx /dev/rsd0a
  (replacing `sd0' in `rsd0a' with the name of your boot disk).
  You will then be able to boot bsd.rd.

Boot from an installation tape, or bsd.rd.
When prompted, select the (U)pgrade option rather than the (I)nstall
option at the prompt in the install process.

You will be presented with a welcome message and asked if you really wish
to upgrade.

The upgrade script will ask you for the existing root partition, and
will use the existing filesystems defined in /etc/fstab to install the
new system in.  It will also use your existing network parameters.

From then, the upgrade procedure is very close to the installation
procedure described earlier in this document.  Note that the upgrade
procedure will not let you pick neither the ``etc{:--:}OSrev.tgz'' nor the
``xetc{:--:}OSrev.tgz'' sets, so as to preserve your files in `/etc' which
you are likely to have customized since a previous installation.

However, it is strongly advised that you unpack the etc{:--:}OSrev.tgz and
xetc{:--:}OSrev.tgz sets in a temporary directory and merge changes by hand, or
with the help of the sysmerge(8) helper script, since all components of
your system may not function correctly until your files in `/etc' are
updated.
@


1.5
log
@Teach people they will need to upgrade their boot blocks, and how to do this,
if they want to upgrade with bsd.rd, since older boot blocks can't boot ELF
kernels.
@
text
@d2 1
a2 1
dnl $OpenBSD$
@


1.4
log
@Sync with OpenBSDUpgrade macro change. Explicitely provide all the media
able to start an upgrade procedure.
@
text
@d1 51
a51 1
OpenBSDUpgrade({:-an installation tape, or the miniroot over the network-:})
@


1.3
log
@General cleanup and updates here too, ok deraadt@@
@
text
@d1 1
a1 1
OpenBSDUpgrade
@


1.2
log
@OSREV/OSrev
@
text
@d1 1
a1 6
To upgrade to OpenBSD OSREV from a previous version follow the instructions
in the section "Installing OpenBSD", but run the script `upgrade.sh'
in stead of `install.sh'.

The upgrade script will use the existing disk partitions to install the
new system in, and also preserves the files in `/etc'.
@


1.1
log
@ho hum
@
text
@d1 1
a1 1
To upgrade to OpenBSD 2.0 from a previous version follow the instructions
@

