head	1.4;
access;
symbols
	OPENBSD_5_3:1.3.0.14
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.12
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.8
	OPENBSD_5_0:1.3.0.10
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.3.0.6
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.4
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.2
	OPENBSD_4_7_BASE:1.3;
locks; strict;
comment	@# @;


1.4
date	2013.03.25.17.22.11;	author deraadt;	state dead;
branches;
next	1.3;

1.3
date	2009.10.13.21.00.17;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2009.10.02.07.47.44;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2009.10.02.07.26.15;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.4
log
@the unused palm code goes away.
@
text
@dnl     $OpenBSD: prep,v 1.3 2009/10/13 21:00:17 jasper Exp $

There are several things that need to be done in order to install
OpenBSD/MACHINE .

In case we'll be installing on the SD card driven by PXAMCI, we'll need
like 8 Mb FAT16 formatted partition at the beginning of the card, that'll
be for the bootloader running for PalmOS and will contain also the
kernel binary. We can create this partition by for example running
fdisk(8).  Once we have the partition ready, we have to create a
filesystem on it. Achieve that by running:

        $ newfs_msdos <device>

where '<device>' is the new partition we just created. Now mount the
partition and create the directories '/PALM' and '/PALM/Launcher'. Once
done, copy the bootloader binary called 'cocoboot.prc' into
'/PALM/Launcher' and the kernel binary with RAMDISK into '/zImage'. The
'cocoboot.prc' file can be obtained by downloading the file with ftp:

        $ ftp http://marex.hackndev.com/OpenBSD/cocoboot.prc

This step is needed as cocoboot cannot be distributed with OpenBSD since
it's licensed under the GPL.
Of course, you can operate with 'cocoboot.conf' and make the bootloader
pick a proper kernel name, but that's up to the users comfort and beyond the
scope of this document. You need to be sure to copy the kernel with
RAMDISK, otherwise the installer won't be there and you won't be able to
install, but instead you'll end up with the kernel debugger shell complaining
there is no boot device.

Now we need to setup the USB part. Many Palm models don't support USB
host by default, but it's mainly a software limitation of PalmOS. The
only problem with USB is that the device doesn't supply the VBUS.
Therefore you'll need a USB A to A converter and a powered USB hub. Now,
connect the power supply to the hub, connect the cable that normally
connects the PC and the hub into one side of the A to A converter
and the USB data cable for Palm to the other side of the A to A
converter. So the port of the USB hub that normally is connected to a
USB host is now connected to the Palm's USB port. Here's a simple
schematic:

.------.
| Palm |]-------=[ A to A converter ]=--------------=[ USB hub ]
'------'

Now that everything is ready, plug the USB cable into your Palm if you haven't
done so yet.

When booting OpenBSD on at least the Tungsten T|5 model, make sure the
following steps are taken care of, or the internal uhub(4) will be
disabled.

        - Boot OpenBSD directly after resetting the device, before it
          goes to sleep mode.
        - Always reset the device before booting OpenBSD.
        - If the power adapter is plugged into the UART cable, booting
          may also fail. The best way to work around this is to boot OpenBSD
          with the power cable removed, and plug the cable back in once
          OpenBSD has been booted.

Failing to comply with these steps may result in not being able to use
the keyboard, network interfaces, etc.
@


1.3
log
@tweaks by "dawe", thanks
@
text
@d1 1
a1 1
dnl     $OpenBSD: prep,v 1.2 2009/10/02 07:47:44 jasper Exp $
@


1.2
log
@- tweak
@
text
@d1 1
a1 1
dnl     $OpenBSD: prep,v 1.1 2009/10/02 07:26:15 jasper Exp $
d6 1
a6 1
In case we'll be installing on the SD card driven by PXAMCI, We'll need
d16 1
a16 1
partition and create directories '/PALM' and '/PALM/Launcher'. Once
d19 1
a19 1
'cocoboot.prc' file can be obtained by downloading the file like so:
d26 1
a26 1
pick a proper kernel name, but that's up to users comfort and beyond the
d29 1
a29 1
install, but instead you'll end with kernel debugger shell complaining
d35 1
a35 1
Therefore you'll need a USB A to A converted and a powered USB hub. Now,
d37 1
a37 1
goes between the PC and the hub into one side of the A to A converter
d40 2
a41 2
USB host is now connected to Palm's USB port. Here's a simple
schematics:
d47 1
a47 1
Now that everything is ready, plug the USB cable into Palm if you haven't
d51 1
a51 1
following items are taken care of, or the internal uhub(4) will be
d58 1
a58 1
          may also fail. Best way to work around this is to boot OpenBSD
d62 1
a62 1
Failing to comply with the above items may result not being able to use
@


1.1
log
@add notes for for OpenBSD/palm still a bit rough, but it's a start

parts from and "seems ok" marex@@
@
text
@d1 1
a1 1
dnl     $OpenBSD$
d7 1
a7 1
like 8 Mb FAT16 formated partition at the begining of the card, that'll
d27 1
a27 1
scrope of this document. You need to be sure to copy the kernel with
d47 1
a47 1
Now that everything's ready, plug the USB cable into Palm if you haven't
@

