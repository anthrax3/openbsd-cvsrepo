head	1.124;
access;
symbols
	OPENBSD_6_1_BASE:1.124
	OPENBSD_6_0:1.120.0.4
	OPENBSD_6_0_BASE:1.120
	OPENBSD_5_9:1.120.0.2
	OPENBSD_5_9_BASE:1.120
	OPENBSD_5_8:1.113.0.6
	OPENBSD_5_8_BASE:1.113
	OPENBSD_5_7:1.113.0.2
	OPENBSD_5_7_BASE:1.113
	OPENBSD_5_6:1.110.0.4
	OPENBSD_5_6_BASE:1.110
	OPENBSD_5_5:1.107.0.2
	OPENBSD_5_5_BASE:1.107
	OPENBSD_5_4:1.97.0.2
	OPENBSD_5_4_BASE:1.97
	OPENBSD_5_3:1.96.0.2
	OPENBSD_5_3_BASE:1.96
	OPENBSD_5_2:1.95.0.6
	OPENBSD_5_2_BASE:1.95
	OPENBSD_5_1_BASE:1.95
	OPENBSD_5_1:1.95.0.4
	OPENBSD_5_0:1.95.0.2
	OPENBSD_5_0_BASE:1.95
	OPENBSD_4_9:1.93.0.2
	OPENBSD_4_9_BASE:1.93
	OPENBSD_4_8:1.92.0.2
	OPENBSD_4_8_BASE:1.92
	OPENBSD_4_7:1.91.0.2
	OPENBSD_4_7_BASE:1.91
	OPENBSD_4_6:1.88.0.4
	OPENBSD_4_6_BASE:1.88
	OPENBSD_4_5:1.81.0.2
	OPENBSD_4_5_BASE:1.81
	OPENBSD_4_4:1.80.0.2
	OPENBSD_4_4_BASE:1.80
	OPENBSD_4_3:1.77.0.2
	OPENBSD_4_3_BASE:1.77
	OPENBSD_4_2:1.75.0.2
	OPENBSD_4_2_BASE:1.75
	OPENBSD_4_1:1.71.0.2
	OPENBSD_4_1_BASE:1.71
	OPENBSD_4_0:1.69.0.2
	OPENBSD_4_0_BASE:1.69
	OPENBSD_3_9:1.67.0.2
	OPENBSD_3_9_BASE:1.67
	OPENBSD_3_8:1.66.0.2
	OPENBSD_3_8_BASE:1.66
	OPENBSD_3_7:1.64.0.2
	OPENBSD_3_7_BASE:1.64
	OPENBSD_3_6:1.63.0.2
	OPENBSD_3_6_BASE:1.63
	OPENBSD_3_5:1.57.0.2
	OPENBSD_3_5_BASE:1.57
	OPENBSD_3_4:1.44.0.2
	OPENBSD_3_4_BASE:1.44
	OPENBSD_3_3:1.43.0.2
	OPENBSD_3_3_BASE:1.43
	OPENBSD_3_2:1.37.0.2
	OPENBSD_3_2_BASE:1.37
	OPENBSD_3_1:1.34.0.2
	OPENBSD_3_1_BASE:1.34
	OPENBSD_3_0:1.27.0.2
	OPENBSD_3_0_BASE:1.27
	OPENBSD_2_9:1.12.0.2
	OPENBSD_2_9_BASE:1.12
	OPENBSD_2_8:1.10.0.4
	OPENBSD_2_8_BASE:1.10
	OPENBSD_2_7:1.10.0.2
	OPENBSD_2_7_BASE:1.10
	OPENBSD_2_6:1.8.0.2
	OPENBSD_2_6_BASE:1.8
	OPENBSD_2_5:1.5.0.2
	OPENBSD_2_5_BASE:1.5
	OPENBSD_2_4:1.1.0.2
	OPENBSD_2_4_BASE:1.1;
locks; strict;
comment	@# @;


1.124
date	2017.02.27.21.18.01;	author matthieu;	state Exp;
branches;
next	1.123;
commitid	mhDMwc2IVCMDJNob;

1.123
date	2016.10.18.09.22.05;	author tb;	state Exp;
branches;
next	1.122;
commitid	MDmsyuJX0UyKaNu7;

1.122
date	2016.10.18.06.14.43;	author jmc;	state Exp;
branches;
next	1.121;
commitid	CWnt5XFPmQiv8fio;

1.121
date	2016.07.28.17.19.24;	author zhuk;	state Exp;
branches;
next	1.120;
commitid	zR56bfGx2S2KQylJ;

1.120
date	2016.02.16.14.48.42;	author krw;	state Exp;
branches;
next	1.119;
commitid	R5EBDvk9t21FK4Dw;

1.119
date	2016.02.12.20.29.18;	author rpe;	state Exp;
branches;
next	1.118;
commitid	FcIfI7XJRfNtosYm;

1.118
date	2016.02.12.20.25.32;	author rpe;	state Exp;
branches;
next	1.117;
commitid	l92J5SIM3yktzdJU;

1.117
date	2016.02.11.14.33.03;	author rpe;	state Exp;
branches;
next	1.116;
commitid	nldXGY5p8fE3WWoN;

1.116
date	2016.01.01.15.58.28;	author rpe;	state Exp;
branches;
next	1.115;
commitid	XjeaG5hkc5BqY3TL;

1.115
date	2015.08.24.10.41.11;	author ajacoutot;	state Exp;
branches;
next	1.114;
commitid	FOxg7563yuuySklf;

1.114
date	2015.08.17.20.07.12;	author guenther;	state Exp;
branches;
next	1.113;
commitid	wiPvZp0zzreBpSdh;

1.113
date	2014.10.23.21.33.21;	author rpe;	state Exp;
branches;
next	1.112;
commitid	ckuAGTb8ys2YbbuO;

1.112
date	2014.09.11.07.08.37;	author rpe;	state Exp;
branches;
next	1.111;
commitid	IIZ4qIqlbgQUhU9L;

1.111
date	2014.08.26.20.19.26;	author rpe;	state Exp;
branches;
next	1.110;
commitid	2uCZGoLImpFRV5IL;

1.110
date	2014.08.06.02.34.23;	author doug;	state Exp;
branches;
next	1.109;
commitid	9C6sqIIQI5hpZjFU;

1.109
date	2014.05.09.21.15.17;	author rpe;	state Exp;
branches;
next	1.108;

1.108
date	2014.03.19.01.59.48;	author tedu;	state Exp;
branches;
next	1.107;

1.107
date	2014.02.27.20.11.25;	author tedu;	state Exp;
branches;
next	1.106;

1.106
date	2014.02.27.19.42.28;	author tedu;	state Exp;
branches;
next	1.105;

1.105
date	2014.02.27.19.29.19;	author tedu;	state Exp;
branches;
next	1.104;

1.104
date	2014.02.27.19.26.50;	author tedu;	state Exp;
branches;
next	1.103;

1.103
date	2014.02.27.18.04.28;	author tedu;	state Exp;
branches;
next	1.102;

1.102
date	2014.02.26.18.13.41;	author rpe;	state Exp;
branches;
next	1.101;

1.101
date	2014.02.02.11.56.26;	author miod;	state Exp;
branches;
next	1.100;

1.100
date	2014.01.26.04.35.09;	author tedu;	state Exp;
branches;
next	1.99;

1.99
date	2013.12.04.23.20.19;	author jmc;	state Exp;
branches;
next	1.98;

1.98
date	2013.08.18.04.16.13;	author miod;	state Exp;
branches;
next	1.97;

1.97
date	2013.07.17.18.03.42;	author bmercer;	state Exp;
branches;
next	1.96;

1.96
date	2013.02.09.19.48.37;	author miod;	state Exp;
branches;
next	1.95;

1.95
date	2011.08.08.20.03.03;	author miod;	state Exp;
branches;
next	1.94;

1.94
date	2011.05.28.06.25.41;	author jmc;	state Exp;
branches;
next	1.93;

1.93
date	2010.10.18.04.24.07;	author deraadt;	state Exp;
branches;
next	1.92;

1.92
date	2010.06.05.19.36.10;	author miod;	state Exp;
branches;
next	1.91;

1.91
date	2010.03.16.17.23.05;	author miod;	state Exp;
branches;
next	1.90;

1.90
date	2010.03.09.20.38.43;	author otto;	state Exp;
branches;
next	1.89;

1.89
date	2009.10.25.20.56.24;	author miod;	state Exp;
branches;
next	1.88;

1.88
date	2009.05.31.18.18.39;	author miod;	state Exp;
branches;
next	1.87;

1.87
date	2009.05.17.00.11.34;	author sthen;	state Exp;
branches;
next	1.86;

1.86
date	2009.05.13.18.38.27;	author miod;	state Exp;
branches;
next	1.85;

1.85
date	2009.05.12.21.41.24;	author deraadt;	state Exp;
branches;
next	1.84;

1.84
date	2009.05.12.21.06.48;	author miod;	state Exp;
branches;
next	1.83;

1.83
date	2009.04.17.04.03.33;	author deraadt;	state Exp;
branches;
next	1.82;

1.82
date	2009.04.17.03.53.59;	author deraadt;	state Exp;
branches;
next	1.81;

1.81
date	2008.10.16.00.05.09;	author krw;	state Exp;
branches;
next	1.80;

1.80
date	2008.08.06.20.50.48;	author miod;	state Exp;
branches;
next	1.79;

1.79
date	2008.08.05.22.57.59;	author miod;	state Exp;
branches;
next	1.78;

1.78
date	2008.05.12.22.01.39;	author miod;	state Exp;
branches;
next	1.77;

1.77
date	2008.03.10.21.25.52;	author miod;	state Exp;
branches;
next	1.76;

1.76
date	2007.11.04.01.35.49;	author krw;	state Exp;
branches;
next	1.75;

1.75
date	2007.08.30.04.21.14;	author deraadt;	state Exp;
branches;
next	1.74;

1.74
date	2007.08.01.21.23.23;	author miod;	state Exp;
branches;
next	1.73;

1.73
date	2007.05.07.17.58.03;	author miod;	state Exp;
branches;
next	1.72;

1.72
date	2007.05.04.03.49.18;	author deraadt;	state Exp;
branches;
next	1.71;

1.71
date	2007.03.01.19.24.43;	author miod;	state Exp;
branches;
next	1.70;

1.70
date	2007.02.28.22.30.02;	author miod;	state Exp;
branches;
next	1.69;

1.69
date	2006.06.06.17.49.20;	author miod;	state Exp;
branches;
next	1.68;

1.68
date	2006.05.09.21.17.13;	author miod;	state Exp;
branches;
next	1.67;

1.67
date	2005.11.30.12.31.43;	author tom;	state Exp;
branches;
next	1.66;

1.66
date	2005.08.30.17.05.28;	author miod;	state Exp;
branches;
next	1.65;

1.65
date	2005.03.21.22.31.06;	author miod;	state Exp;
branches;
next	1.64;

1.64
date	2005.01.15.17.52.07;	author miod;	state Exp;
branches;
next	1.63;

1.63
date	2004.08.26.20.08.35;	author miod;	state Exp;
branches;
next	1.62;

1.62
date	2004.08.10.19.34.38;	author miod;	state Exp;
branches;
next	1.61;

1.61
date	2004.06.22.00.42.11;	author matthieu;	state Exp;
branches;
next	1.60;

1.60
date	2004.06.07.11.14.14;	author mickey;	state Exp;
branches;
next	1.59;

1.59
date	2004.05.16.21.52.20;	author miod;	state Exp;
branches;
next	1.58;

1.58
date	2004.05.03.15.18.18;	author drahn;	state Exp;
branches;
next	1.57;

1.57
date	2004.03.27.23.33.06;	author miod;	state Exp;
branches;
next	1.56;

1.56
date	2004.03.25.08.38.51;	author tom;	state Exp;
branches;
next	1.55;

1.55
date	2004.03.17.14.20.56;	author jmc;	state Exp;
branches;
next	1.54;

1.54
date	2004.03.17.09.25.09;	author jmc;	state Exp;
branches;
next	1.53;

1.53
date	2004.03.16.08.24.59;	author jmc;	state Exp;
branches;
next	1.52;

1.52
date	2004.03.08.22.32.06;	author miod;	state Exp;
branches;
next	1.51;

1.51
date	2004.02.27.17.49.14;	author miod;	state Exp;
branches;
next	1.50;

1.50
date	2004.02.14.18.22.45;	author todd;	state Exp;
branches;
next	1.49;

1.49
date	2004.02.13.10.59.24;	author miod;	state Exp;
branches;
next	1.48;

1.48
date	2004.02.09.13.32.45;	author todd;	state Exp;
branches;
next	1.47;

1.47
date	2004.02.08.23.11.31;	author miod;	state Exp;
branches;
next	1.46;

1.46
date	2004.02.07.14.27.10;	author miod;	state Exp;
branches;
next	1.45;

1.45
date	2003.10.31.04.03.15;	author drahn;	state Exp;
branches;
next	1.44;

1.44
date	2003.08.11.22.21.15;	author miod;	state Exp;
branches;
next	1.43;

1.43
date	2003.03.24.11.33.52;	author miod;	state Exp;
branches;
next	1.42;

1.42
date	2003.03.05.00.32.33;	author miod;	state Exp;
branches;
next	1.41;

1.41
date	2003.02.15.21.38.21;	author miod;	state Exp;
branches;
next	1.40;

1.40
date	2002.12.30.11.12.58;	author miod;	state Exp;
branches;
next	1.39;

1.39
date	2002.11.07.22.38.36;	author mickey;	state Exp;
branches;
next	1.38;

1.38
date	2002.10.07.19.31.01;	author miod;	state Exp;
branches;
next	1.37;

1.37
date	2002.07.25.19.29.29;	author miod;	state Exp;
branches;
next	1.36;

1.36
date	2002.07.04.18.06.45;	author miod;	state Exp;
branches;
next	1.35;

1.35
date	2002.06.09.05.53.54;	author todd;	state Exp;
branches;
next	1.34;

1.34
date	2002.04.14.02.35.27;	author miod;	state Exp;
branches;
next	1.33;

1.33
date	2002.04.09.01.22.19;	author miod;	state Exp;
branches;
next	1.32;

1.32
date	2002.03.30.22.52.55;	author miod;	state Exp;
branches;
next	1.31;

1.31
date	2002.03.30.19.33.17;	author miod;	state Exp;
branches;
next	1.30;

1.30
date	2002.03.28.01.23.44;	author miod;	state Exp;
branches;
next	1.29;

1.29
date	2002.03.23.23.58.48;	author miod;	state Exp;
branches;
next	1.28;

1.28
date	2001.12.02.00.15.42;	author miod;	state Exp;
branches;
next	1.27;

1.27
date	2001.10.14.20.59.33;	author miod;	state Exp;
branches;
next	1.26;

1.26
date	2001.10.14.18.27.57;	author miod;	state Exp;
branches;
next	1.25;

1.25
date	2001.10.10.23.58.27;	author miod;	state Exp;
branches;
next	1.24;

1.24
date	2001.10.10.22.15.03;	author miod;	state Exp;
branches;
next	1.23;

1.23
date	2001.10.07.21.50.50;	author miod;	state Exp;
branches;
next	1.22;

1.22
date	2001.10.06.20.38.16;	author miod;	state Exp;
branches;
next	1.21;

1.21
date	2001.10.06.19.24.46;	author miod;	state Exp;
branches;
next	1.20;

1.20
date	2001.10.02.23.03.04;	author miod;	state Exp;
branches;
next	1.19;

1.19
date	2001.10.02.20.08.46;	author miod;	state Exp;
branches;
next	1.18;

1.18
date	2001.10.02.00.36.39;	author miod;	state Exp;
branches;
next	1.17;

1.17
date	2001.09.24.20.13.22;	author miod;	state Exp;
branches;
next	1.16;

1.16
date	2001.09.24.19.31.43;	author miod;	state Exp;
branches;
next	1.15;

1.15
date	2001.09.11.06.06.15;	author fgsch;	state Exp;
branches;
next	1.14;

1.14
date	2001.08.22.18.27.42;	author miod;	state Exp;
branches;
next	1.13;

1.13
date	2001.05.02.22.18.16;	author miod;	state Exp;
branches;
next	1.12;

1.12
date	2001.04.24.23.04.21;	author miod;	state Exp;
branches;
next	1.11;

1.11
date	2001.03.28.21.11.50;	author miod;	state Exp;
branches;
next	1.10;

1.10
date	2000.05.06.20.32.48;	author miod;	state Exp;
branches;
next	1.9;

1.9
date	2000.04.27.00.36.47;	author todd;	state Exp;
branches;
next	1.8;

1.8
date	99.10.10.22.55.56;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	99.09.23.08.18.41;	author todd;	state Exp;
branches;
next	1.6;

1.6
date	99.09.23.08.12.25;	author todd;	state Exp;
branches;
next	1.5;

1.5
date	99.04.11.18.24.14;	author todd;	state Exp;
branches;
next	1.4;

1.4
date	98.12.19.18.32.00;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	98.11.20.04.09.23;	author todd;	state Exp;
branches;
next	1.2;

1.2
date	98.11.03.04.35.16;	author aaron;	state Exp;
branches;
next	1.1;

1.1
date	98.05.18.00.33.17;	author todd;	state Exp;
branches;
next	;


desc
@@


1.124
log
@xdm -> xenodm(1)
@
text
@dnl
dnl	$OpenBSD: m4.common,v 1.123 2016/10/18 09:22:05 tb Exp $
dnl
dnl Copyright (c) 2004 Todd T. Fries <todd@@OpenBSD.org>
dnl
dnl Permission to use, copy, modify, and distribute this software for any
dnl purpose with or without fee is hereby granted, provided that the above
dnl copyright notice and this permission notice appear in all copies.
dnl
dnl THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
dnl WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
dnl MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
dnl ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
dnl WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
dnl ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
dnl OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
dnl
dnl simulate an include path with a macro 'includeit'.
define(`includeit',`sinclude('INCLUDE/`$1)sinclude('INCLUDE/../`$1)')dnl
dnl
dnl
dnl TopPart
dnl Describes the beginning of the distribution files listing.
dnl
define(`TopPart',
`The MACHINE-specific portion of the OpenBSD OSREV release is found in the
"MACHINE" subdirectory of the distribution.  That subdirectory is laid
out as follows:

.../OSREV/MACHINE/

	INSTALL.MACHINE	Installation notes; this file.

	SHA256		Output of the cksum(1) program using the option
			-a sha256, usable for verification of the
			correctness of downloaded files.

	SHA256.sig	The above file, signed with the OpenBSD signing key
			for the OSREV release, usable for verification of the
			integrity of the above file, and thus of the
		        downloaded files.')dnl
dnl
dnl Change the quote.  There were too many `word' situations that would
dnl have to have been changed to ``word''.  The quote gets changed to
dnl {:- and -:}.  It can really be anything, but it needs to be unique.
dnl
changequote(`{:-',`-:}')dnl
dnl
dnl Conventions when editing:
dnl o base`'OSrev is required because if it appears as baseOSrev the
dnl   defined value OSrev does not get substituted.  Same goes for MACHINE,
dnl   MACHINE_ARCH and OSREV, assigned as cmd line parameters to m4 in the
dnl   Makefile.
dnl o `include', `define' and `shift' is required as these three words
dnl   are m4 reserved words that evaluate to an empty string if not quoted.
dnl
dnl
dnl ========== Distribution files description
dnl (usually used by arch/contents)
dnl
dnl printsize(value)
dnl
dnl Prints a size in KB if it is less than 10^6, in MB otherwise.
dnl The size is rounded down (this means you can still get 0.9 MB for
dnl a size between 1,000,000 and 1,048,576 bytes).
dnl Used by showsize() below.
dnl
define({:-printsize-:},{:-ifelse(substr($1,6),,dnl
eval($1/1024).eval($1*10/1024%10) KB,dnl
eval($1/1024/1024).eval($1/1024*10/1024%10) MB)-:})dnl
dnl
dnl showsize(gzipped size, uncompressed size)
dnl
dnl If both the 1st and the 2nd argument exist, show the sizes.
dnl Otherwise, evaluate to NULL.
dnl showsize() must not be on a new line.  It creates its own new line if
dnl there are sizes to display, otherwise, evaluates to NULL
dnl
dnl XXX fix to allow - empty 1st arg, for files uncompressed
dnl                  - empty 2nd arg, for files where only compressed size
dnl                    is known
dnl
define({:-showsize-:},{:-ifelse(X$1,X,,X$2,X,,X,X,{:-
		 [ printsize($1) gzipped, printsize($2) uncompressed ]-:})-:})dnl
dnl
dnl
dnl
dnl DistributionDescription( number of sets )
dnl Header paragraph before the individual sets descriptions.
dnl
define({:-DistributionDescription-:},
{:-The OpenBSD/MACHINE binary distribution sets contain the binaries which
comprise the OpenBSD OSREV release for MACHINE systems.  There are $1
binary distribution sets.  The binary distribution sets can be found in
the "MACHINE" subdirectory of the OpenBSD OSREV distribution tree,
and are as follows:-:})dnl
dnl
dnl
dnl OpenBSDbase( compressed size, uncompressed size )
dnl Describes baseXX.tgz.
dnl
define({:-OpenBSDbase-:},
{:-	base{:--:}OSrev	 The OpenBSD/MACHINE OSREV base binary distribution.  You MUST
		 install this distribution set.  It contains the base OpenBSD
		 utilities that are necessary for the system to run and be
		 minimally functional.
		 ifelse(MDSO,,{:-It excludes everything described below.-:},{:-It includes shared library support, and excludes everything
		 described below.-:})showsize($1,$2)-:})dnl
dnl
dnl
dnl OpenBSDcomp( compressed size, uncompressed size )
dnl Describes compXX.tgz.
dnl
define({:-OpenBSDcomp-:},
{:-	comp{:--:}OSrev	 The OpenBSD/MACHINE Compiler tools.  All of the tools relating
		 to C, C++ and Objective-C are supported.  This set includes
		 the system {:-include-:} files (/usr/{:-include-:}), the linker, the
		 compiler tool chain, and the various system libraries{:--:}ifelse(MDSO,,.,{:-
		 (except the shared libraries, which are included as part of
		 the base set).-:})
		 This set also includes the manual pages for all of the
		 utilities it contains, as well as the system call and library
		 manual pages.showsize($1,$2)-:})dnl
dnl
dnl
dnl OpenBSDgame( compressed size, uncompressed size )
dnl Describes gameXX.tgz.
dnl
define({:-OpenBSDgame-:},
{:-	game{:--:}OSrev	 This set includes the games and their manual pages.showsize($1,$2)-:})dnl
dnl
dnl
dnl OpenBSDman( compressed size, uncompressed size )
dnl Describes manXX.tgz.
dnl
define({:-OpenBSDman-:},
{:-	man{:--:}OSrev	 This set includes all of the manual pages for the binaries
		 and other software contained in the base set.
		 Note that it does not {:-include-:} any of the manual pages
		 that are included in the other sets.showsize($1,$2)-:})dnl
dnl
dnl
dnl OpenBSDxbase( compressed size, uncompressed size )
dnl Describes xbaseXX.tgz.
dnl
define({:-OpenBSDxbase-:},
{:-	xbase{:--:}OSrev  This set includes the base X distribution.  This includes
		 programs, headers and libraries.showsize($1,$2)-:})dnl
dnl
dnl
dnl OpenBSDxshare( compressed size, uncompressed size )
dnl Describes xshareXX.tgz.
dnl
define({:-OpenBSDxshare-:},
{:-	xshare{:--:}OSrev This set includes all text files equivalent between all
		 architectures.showsize($1,$2)-:})dnl
dnl
dnl
dnl OpenBSDxfont( compressed size, uncompressed size )
dnl Describes xfontXX.tgz.
dnl
define({:-OpenBSDxfont-:},
{:-	xfont{:--:}OSrev  This set includes all of the X fonts.showsize($1,$2)-:})dnl
dnl
dnl
dnl OpenBSDxserv(compressed size,uncompressed size,optional extra notes)
dnl Describes xservXX.tgz.
dnl
define({:-OpenBSDxserv-:},
{:-	xserv{:--:}OSrev  This set includes all of the X servers.$3{:--:}showsize($1,$2)-:})dnl
dnl
dnl
dnl Floppy and bootable cdrom stuff
dnl
define({:-OpenBSDfloppy-:},
{:-	floppy{:--:}OSrev.fs	The standard MACHINE boot and installation floppy;
			see below.-:})dnl
dnl
define({:-OpenBSDinstalliso-:},
{:-	install{:--:}OSrev.iso	The MACHINE boot and installation CD-ROM image,
			which contains the base and X sets, so that install
			or upgrade can be done without network connectivity.-:})dnl
define({:-OpenBSDcd-:},
{:-	cd{:--:}OSrev.iso	A simple bootable filesystem image consisting of the
			bsd.rd installation kernel, suitable to be used
			as a bootable CD-ROM image, but will require the base
			and X sets be found via another media or network.-:})dnl
dnl
dnl OpenBSDfloppydesc(number of floppies, Article, plural)
dnl
dnl Describe what the boot floppy/ies contain and how they may be used.
dnl Use as: OpenBSDfloppydesc(single,The) or OpenBSDfloppydesc(three,Each,s)
define({:-OpenBSDfloppydesc-:},
{:-Bootable installation/upgrade floppy image$3:

	The $1 floppy image$3 can be copied to a floppy using rawrite.exe,
	ntrw.exe, or `dd', as described later in this document.
	$2 floppy image is a bootable install floppy which can be used
	both to install and to upgrade OpenBSD to the current version.
	It is also useful for maintenance and disaster recovery.-:})dnl
dnl
dnl
dnl A few extra straightforward macros describing more components.
dnl
define({:-OpenBSDdistsets-:},
{:-	*.tgz		MACHINE binary distribution sets; see below.-:})dnl
dnl
define({:-OpenBSDbsd-:},
{:-	bsd		A stock GENERIC MACHINE kernel which will be
			installed on your system during the install.-:})dnl
dnl
define({:-OpenBSDbsdmp-:},
{:-	bsd.mp		A stock GENERIC.MP MACHINE kernel, with support for
			multiprocessor machines, which can be used instead
			of the GENERIC kernel after the install.-:})dnl
dnl
define({:-OpenBSDrd-:},
{:-	bsd.rd		A compressed RAMDISK kernel; the embedded
			filesystem contains the installation tools.
			Used for simple installation from a pre-existing
			system.-:})dnl
dnl
define({:-OpenBSDminiroot-:},
{:-	miniroot{:--:}OSrev.fs	A miniroot filesystem image to be used if you
			for some reason can't or don't want to use the
			ramdisk installation method.-:})dnl
dnl
define({:-OpenBSDinstallfs-:},
{:-	install{:--:}OSrev.fs	A boot and installation image which contains
			the base and X sets.  An install or upgrade can be
			done with a USB key without network connectivity.-:})dnl
dnl
dnl
dnl ========== Various Install Instructions
dnl (usually used by arch/install)
dnl
dnl OpenBSDInstallPrelude(troublesome disk types)
dnl
dnl Installation introduction.  Warns about disk geometry hell if argument
dnl is not empty.
define({:-OpenBSDInstallPrelude-:},
{:-Installing OpenBSD is a relatively simple process. If you take your time
and are careful to read the information presented by the installer, you
shouldn't have any trouble.ifelse(X$1,X,,{:-

If the disks connected to your machine are $1,
it is recommended that you know their geometry, i.e. the sector size (note
that sector sizes other than 512 bytes are not currently supported), the
number of sectors per track, the number of tracks per cylinder (also known
as the number of heads), and the number of cylinders on the disk.  The
OpenBSD kernel will try to discover these parameters on its own, and if it
can it will print them at boot time.  If possible, you should use the
parameters it prints.  (You might not be able to because you're sharing your
disk with another operating system, or because your disk is old enough that
the kernel can't figure out its geometry.)-:})-:})dnl
dnl
dnl OpenBSDInstallPart2
dnl Describes the beginning of the installation process, once the
dnl installation media is ready.
define({:-OpenBSDInstallPart2-:},
{:-You should now be ready to install OpenBSD.

The following is a walk-through of the steps you will take while getting
OpenBSD installed on your hard disk.

The installation procedure is designed to gather as much information about
your system setup as possible at the beginning, so that no human interaction
is required as soon as the questions are over.

The order of these questions might be quite disconcerting if you are used to
other installation procedures, including older OpenBSD versions.

If any question has a default answer, it will be displayed in brackets ("[]")
after the question.  If you wish to stop the installation, you may hit
Control-C at any time, but if you do, you'll have to begin the installation
process again from scratch.  Using Control-Z to suspend the process may be a
better option, or at any prompt enter `!' to get a shell, from which 'exit'
will return you back to that prompt.
-:})dnl
dnl
dnl OpenBSDInstallPart3(warn geometry, disk type, disk type, disk type)
dnl
dnl Describes the boot of the ramdisk.
dnl Describes the serial terminal setup.
define({:-OpenBSDInstallPart3-:},
{:-	Once the kernel has loaded, you will be presented with the
	OpenBSD kernel boot messages which contain information about
	the hardware that was detected and supported by OpenBSD.

dnl dot.profile
	After the kernel is done initializing, you will be asked whether
	you wish to do an "(I)nstall", "(U)pgrade" or an "(A)utoinstall".
	Enter 'I' for a fresh install or 'U' to upgrade an existing
	installation.  Enter 'A' to start an unattended installation
	where all of your answers are supplied in a response file (more
	on that in "Preparing an unattended installation of OpenBSD").

dnl install.sub set_term
ifelse(MDX,,
{:-	You will next be asked for your terminal type.-:},
{:-	If you are connected with a serial console, you will next be
	asked for your terminal type.-:})dnl

	You should choose the terminal type from amongst those listed.
	(If your terminal type is xterm, just use vt220).dnl
ifelse(MDKBD,,,{:-

	If you are connected using a glass console, you will next be
	asked for your keyboard layout (the default being the US QWERTY
	layout).  Depending on your keyboard type, not all international
	layouts may be supported; answering `?' (which, on QWERTY layouts,
	is the key to the left of the right `sh{:--:}ift' key, shifted) will
	display a list of supported layouts.
	(If you do not need to change the keyboard layout, just press
	enter.)-:})dnl
-:})dnl
dnl
dnl OpenBSDInstallPart4
dnl
dnl Describes the beginning of the bsd.rd operation.
dnl
define({:-OpenBSDInstallPart4-:},dnl
dnl install.sub (install) hostname
{:-	The first question you will be asked is the system hostname.
	Reply with the name of the system, without any domain part.

dnl install.sub (install) donetconfig
	You will now be given an opportunity to configure the network.
	The network configuration you enter (if any) can then be used to
	do the install from another system using HTTP, and will also be
	the configuration used by the system after the installation is
	complete.

dnl XXX add a MDVLAN feature and document vlan setup
	The install program will give you a list of network interfaces you
	can configure.  For each network interface you select to configure,
	you will be asked for:

	- the symbolic host name to use (except for the first
	  interface setup, which will reuse the host name entered at the
	  beginning of the installation).

	- the IPv4 settings: address and netmask.  If the IP address
	  should be obtained from a DHCP server, simply enter ``dhcp''
	  when asked for the address.

	- the IPv6 settings (address, prefix length, and default router).
	  You may enter ``rtsol'' when asked for the address for the
	  interface to configure automatically via router solicitation
	  messages.

	After all interfaces have been configured, if there have been
	any IPv4 interfaces setup, you will be asked for the IPv4 default
	route.  This step is skipped if you only have one IPv4 interface
	setup, and it is configured with DHCP.

	The install program will also ask you for your DNS domain name,
	and the domain name servers, unless this information has
	already been obtained from a DHCP server during interface setup.

dnl install.sub (install) askpassword root
	You will then be asked to enter the initial root password
	of the system, twice.

	Although the install program will only check that the two
	passwords match, you should make sure to use a strong password.
	As a minimum, the password should be at least eight characters
	long and a mixture of both lower and uppercase letters, numbers
	and punctuation characters.

dnl install.sub (install) questions(): sshd/ntpd
	You will then be asked whether you want to start sshd(8) by
	default.
dnl
dnl install.sub (install) questions(): MDXAPERTURE
ifelse(MDXAPERTURE,,,{:-
	You will next be asked whether you intend to run the X Window
	System on your machine.  The install program needs to know
	this, to change a configuration setting controlling whether
	the X server will be able to access the xf86(4) driver; it
	is not necessary to answer `y' to this question if you only
	intend to run X client programs on a remote display.
-:})dnl
dnl install.sub (install) questions(): MDXDM
ifelse(MDXDM,,,
{:-ifelse(MDXAPERTURE,,{:-
	Since the X Window System can run on OpenBSD/MACHINE
	without the need for a configuration file, you will get asked-:},
{:-	If you answered `y' to this question, you will get asked-:})
	whether you want to start xenodm(1) on boot.
-:})dnl
dnl install.sub (install) questions(): serial console setup
ifelse(MDSERCONS,,,{:-
	If you are installing using a serial console, and since by default,
	the OpenBSD/MACHINE installation will only start terminals on
	the primary display device, the installation program will ask you
	whether you want to also enable an additional terminal on that
	line, and will allow you to select the line speed.
-:})dnl

dnl install.sub (install) user_setup()
	You will now be given the possibility to setup a user account
	on the forthcoming system.  This user will be added to the
	`wheel' group.

	Enter the desired login name, or `n' if you do not want to
	add a user account at this point.  Valid login names are
	sequences of digits and lowercase letters, and must start
	with a lowercase letter.  If the login name matches this
	criteria, and doesn't conflict with any of the administrative
	user accounts (such as `root', `daemon' or `ftp'), you
	will be prompted with the users descriptive name, as well
	as its password, twice.

	As for the root password earlier, the install program will only
	check that the two passwords match, but you should make sure to
	use a strong password here as well.

	If you have chosen to setup a user account, and you had chosen
	to start sshd(8) on boot, you will be asked if you want to allow
	sshd(8) logins as root.
dnl install.sub (install) set_timezone
ifelse(MDTZ,,,
{:-
	You may now be given the opportunity to configure the time zone
	your system will be using (this depends on the installation
	media you are using).

	If the installation program skips this question, do not be
	alarmed, the time zone will be configured at the end
	of the installation.
-:})dnl
dnl install.sh ask whether to use DUIDs before the md_prep_disklabel loop
	The installation program will now tell you which disks it can
	install on, and ask you which it should use.

	Reply with the name of your root disk.-:})dnl
dnl install.sh md_prep_disklabel loop
dnl
dnl OpenBSDInstallMBRPart1
dnl Describes MBR partitioning. So much to save four lines of text
dnl duplicated 5 times.
dnl
define({:-OpenBSDInstallMBRPart1-:},
{:-	Disks on OpenBSD/MACHINE are partitioned using either ``MBR''
	or ``GPT'' partitioning schemes.  You will need to create one
	disk partition in which the OpenBSD filesystems will be created.
-:})dnl
dnl
dnl OpenBSDInstallMBRPart2(needs OpenBSD partition active)
dnl Describes fdisk invocation
dnl
define({:-OpenBSDInstallMBRPart2-:},
dnl install.md md_prep_fdisk
{:-	The installation program will ask you if you want to use the
	whole disk for OpenBSD.  If you don't need to or don't intend
	to share the disk with other operating systems, answer `w'
	here to use ``MBR'' partitioning or 'g' to use ``GPT''
	partitioning. The installation program will then create a single
	partition spanning the whole disk, dedicated to OpenBSD.

	Otherwise, fdisk(8) will be invoked to let you to edit your
	partitioning.  The current partitions defined will be
	displayed and you will be allowed to modify them, add new
	partitions, and change which partition to boot from by default.

ifelse(X$1,X,,
{:-	Note that you should make the OpenBSD partition the active
	partition at least until the install has been completed.
-:})dnl
	After your OpenBSD partition has been created, dividing the
	space into filesystems can follow.
-:})dnl
dnl
dnl OpenBSDInstallPart5(mention about other OS partitions,mention about root
dnl	partition limitations)
dnl Describes the disklabel operation
dnl
define({:-OpenBSDInstallPart5-:},
{:-	The file system layout is stored in the OpenBSD disk label. Each
	file system is stored in its own ``disk label partition'', which
	is a subdivision of the OpenBSD disk partition you created. In
	the text below ``partition'' refers to these subdivisions.

	You will be shown a default layout with the recommended file
	systems. This default layout is based on the disk size.

	You will be given the choice of accepting the proposed layout,
	editing it, or creating your own custom layout. These
	last two choices will invoke the disklabel(8) interactive editor,
	allowing you to create your desired layout.

	Within the editor, you will see at least a 'c' partition of
	fstype 'unused'. This represents the whole disk and cannot be
	modified.$1

	You must create partition 'a' as a native OpenBSD partition, i.e.
	one with "4.2BSD" as the fstype, to hold the root file system.$2

	In addition to partition 'a' you should create partition 'b' with
	fstype "swap", and native OpenBSD partitions to hold separate file
	systems such as /usr, /tmp, /var, and /home.

	You will need to provide a mount point for all partitions you
	{:-define-:}.  Partitions without mount points, or not of the
	4.2BSD fstype, will neither be formatted nor mounted during the
	installation.

	For quick help while in the interactive editor, enter '?'.  The
	`z' command (which deletes all partitions and starts with a
	clean label), the `A' command (which performs the automatic
	partition layout) and the `n' command (to change mount points)
	are of particular interest.

	Although the partitions position and size are written in exact
	sector values, you do not need a calculator to create your
	partitions!  Human-friendly units can be specified by adding `k',
	`m' or `g' after any numbers to have them converted to kilobytes,
	megabytes or gigabytes. Or you may specify a percentage of the
	disk size using `%' as the suffix.

	Enter 'M' to view the entire manual page (see the info on the
	``-E'' flag).  To exit the editor enter 'q'.-:})dnl
dnl
dnl OpenBSDInstallPart6(other installation sources)
define({:-OpenBSDInstallPart6-:},
{:-	After the layout has been saved, new filesystems will be
	created on all partitions with mount points.
	This will DESTROY ALL EXISTING DATA on those partitions.

	After configuring your root disk, the installer will
	return to the list of available disks to configure.

	You can choose the other disks to use with OpenBSD in
	any order, and will get to setup their layout similarly
	to the root disk above. However, for non-root disks,
	you will not be proposed a default partition layout.

	When all your disks are configured, simply hit return
	at the disk prompt.

	After these preparatory steps have been completed, you will be
        able to extract the distribution sets onto your system.  There
        are several install methods supported:
	HTTP, $1or a local disk partition.-:})dnl
dnl
dnl Notes for various installation methods.
dnl
define({:-OpenBSDURLInstall-:},
{:-	To install via HTTP:
		To begin an HTTP install you will need the following
		pieces of information:
		1) Proxy server URL if you are using a URL-based HTTP
		   proxy (squid, CERN FTP, Apache 1.2 or higher).
		   You need to {:-define-:} a proxy if you are behind a
		   firewall that blocks outgoing HTTP connections
		   (assuming you have a proxy available to use).
		2) The IP address (or hostname if you configured
		   DNS servers earlier in the install) of an HTTP
		   server carrying the OpenBSD OSREV distribution.
		   The installation program will try to fetch a list
		   of such servers; depending on your network settings,
		   this might fail.  If the list could be fetched, it
		   will be displayed, and you can choose an entry from
		   the list (the first entries are expected to be the
		   closest mirrors to your location).
		3) The directory holding the distribution sets.

		Then refer to the section named "installation set selection"
		below.-:})dnl
dnl
define({:-OpenBSDCDROMInstall-:},
{:-	To install from CD-ROM:
		When installing from a CD-ROM, you will be asked which
		device holds the distribution sets.  This will typically
		be "cd0".  If there is more than one partition on the
		CD-ROM, you will be asked which partition the distribution
		is to be loaded from.  This is normally partition "a".

		You will also have to provide the relative path to the
		directory on the CD-ROM which holds the distribution, for
		the MACHINE this is "OSREV/MACHINE".

		Then refer to the section named "installation set selection"
		below.-:})dnl
dnl
define({:-OpenBSDNFSInstall-:},
{:-	To install from an NFS mounted directory:
		When installing from an NFS-mounted directory, you must
		have completed network configuration above, and also
		set up the exported file system on the NFS server in
		advance.

		First you must identify the IP address of the NFS server
		to load the distribution from, and the file system the
		server expects you to mount.

		The install program will also ask whether or not TCP
		should be used for transport (the default is UDP).  Note
		that TCP only works with newer NFS servers.

		You will also have to provide the relative path to the
		directory on the file system where the distribution sets
		are located.  Note that this path should not be prefixed
		with a '/'.

		Then refer to the section named "installation set selection"
		below.-:})dnl
dnl
dnl OpenBSDDISKInstall({:-<additional disk> or-:},   <-- $1
dnl		       {:-only -:},                  <-- $2
dnl                    {:- or <other fs name>-:})    <-- $3
dnl
dnl Note the spacing used above.  It is crucial to keep words from running
dnl together in the actual document.
dnl
dnl Arg 1 is optional.
dnl Choices for args 2 & 3:
dnl - OpenBSDDISKInstall(,{:-only -:})
dnl    (only have 1 fs possible, ffs)
dnl - OpenBSDDISKInstall(,,{:-or <insert some other filesystem name>-:})
dnl    (have another fs possible for reading during disk install)
dnl
dnl see $1, $2, and $3 below for further usage information.
dnl
define({:-OpenBSDDISKInstall-:},
{:-	To install from a local disk partition:
		When installing from a local disk partition, you will
		first have to identify which disk holds the distribution
		sets.
		This is normally $1"sdN", where N is a number.
		Next you will have to identify the partition within that disk
		that holds the distribution; this is a single letter between
		'a' and 'p'.

		You will also have to identify the type of file system
		residing in the partition identified.  Currently, you can
		$2{:--:}install from partitions that have been formatted as the
		Berkeley fast file system (ffs)$3.

		You will also have to provide the relative path to the
		directory on the file system where the distribution sets
		are located.  Note that this path should not be prefixed
		with a '/'.

dnl		Then refer to the section named "installation set selection"
dnl		below.
		Then refer to the next section.-:})dnl
dnl
define({:-OpenBSDCommonInstall-:},
{:-	Installation set selection:
		A list of available distribution sets found on the
		given location will be listed.

		You may individually select distribution sets to install,
		by entering their name, or wildcards (e.g. `*.tgz' or
		`base*|comp*', or `all' to select all the sets (which
		is what most users will want to do).
		You may also enter `abort' to deselect everything and
		restart the selection from scratch, or unselect sets
		by entering their name prefixed with `-' (e.g. `-x*').

		It is also possible to enter an arbitrary filename and
		have it treated as a file set.

		When you are done selecting distribution sets, enter
		`done'.  The files will begin to extract.-:})dnl
dnl
dnl Description of the end of the installation procedure.
dnl
define({:-OpenBSDInstallWrapup-:},
{:-	After the files have been extracted, you will be given the choice
	to select a new location from which to install distribution sets.
	If there have been errors extracting the sets from the previous
	location, or if some sets have been missing, this allows you to
	select a better source.

	Also, if the installation program complains that the distribution
	sets you have been using do not match their recorded checksums, you
	might want to check your installation source (although this can
	happen between releases, if a snapshot is being updated on a mirror
	server with newer files while you are installing).

ifelse(MDTZ,,dnl
{:-	The last thing you'll need to configure is the time zone your system
	will be using.  For this to work properly, it is expected that you
	have installed at least the "base{:--:}OSrev" and "bsd" distribution sets.
-:},dnl
{:-	The last thing you might need to configure, if you did not get
	the chance to earlier, is the time zone your system will be using.
	For this work properly, it is expected that you have installed at
	least the "base{:--:}OSrev" and "bsd" distribution sets.
-:})dnl
dnl install.sh finish_up()

	The installation program will then proceed to save the system
	configuration, create all the device nodes needed by the installed
	system, and will install bootblocks on the root disk.
ifelse(MDSMP,,,{:-
	On multiprocessor systems, if the bsd.mp kernel has been installed,
	it will be renamed to `bsd', which is the default kernel the boot
	blocks look for.  The single processor kernel, `bsd', will be
	available as `bsd.sp'.
-:})
	Finally, you will be asked whether you would like to install
	non-free firmware files (which can't be tightly integrated to
	the OpenBSD system) on first boot, by invoking fw_update(8) on
	the next boot.-:})dnl
dnl
define({:-OpenBSDCongratulations-:},{:-
Congratulations, you have successfully installed OpenBSD OSREV.  When you
reboot into OpenBSD, you should log in as "root" at the login prompt.
You should create yourself an account and protect it and the "root"
account with good passwords.

The install program leaves root an initial mail message.  We recommend
you read it, as it contains answers to basic questions you might have
about OpenBSD, such as configuring your system, installing packages,
getting more information about OpenBSD, sending in your dmesg output
and more.  To do this, run

	mail

and then just enter "more 1" to get the first message.  You quit mail by
entering "q".

Some of the files in the OpenBSD OSREV distribution might need to be
tailored for your site.  We recommend you run:

	man afterboot

which will tell you about a bunch of the files needing to be reviewed.
If you are unfamiliar with UN*X-like system administration, it's
recommended that you buy a book that discusses it.-:})dnl
dnl
dnl
dnl ========== Autoinstall instructions
dnl (usually used by arch/install)
dnl
dnl OpenBSDUnattendedInstallation()dnl
define({:-OpenBSDUnattendedInstallation-:},
{:-dnl
Preparing an unattended installation of OpenBSD:
------------------------------------------------

If '(A)utoinstall' is chosen at the install prompt or if the
installation system detects that it booted from the network, and
isn't interrupted within 5 seconds, it attempts a fully-automatic
installation.

The installer runs dhclient(8) on the network interface the system
booted from, or in case of multiple interfaces it will ask which one
to use. Upon success it retrieves a response file via HTTP. If that
fails, the installer asks for the response file location which can be
either an url or a local path and retrieves the response file from
there.

The "next-server" DHCP option specifies the hostname part of the URL,
as in "http://<next-server>/install.conf".  The "filename" DHCP
parameter specifies the installer mode, e.g. "auto_install".  On
architectures where this parameter is used for netbooting, create
a symbolic link named "auto_install" pointing to the boot program.

The response file contains lines with key/value pairs separated by
an equals sign '=', where the key is a non-ambiguous part (up to the
question mark) of the installer question, consisting of whitespace
separated words. The value is what would have been entered at the
interactive prompt. Empty lines and lines beginning with a '#'
character are ignored. The installer uses default answers in case
of missing answers.

Here is a response file example that uses a hashed password (see
encrypt(1) for more details) for root and a public ssh key for the
user that is created during the installation.

           System hostname = openbsd
           Password for root = ${:--:}2a${:--:}14${:--:}Z4xRMg8vDpgYH...GVot3ySoj8yby
           Setup a user = puffy
           Password for user = *************
           Public ssh key for user = ssh-ed25519 AAAAC3NzaC1...g3Aqre puffy@@ai
           What timezone are you in = Europe/Stockholm
           Location of sets = http
           HTTP Server = ftp.eu.openbsd.org

The "System hostname" key above matches the following full question
asked during an interactive installation:

  System hostname? (short form, e.g. 'foo')

While the installation is in progress the installer writes all output
to the file /ai.log, which is available as mail on the freshly
installed system after the initial reboot.  If the installation is
successful the system will reboot automatically; otherwise, you will
be dropped back into the shell where you can look at the /ai.log file
or try again.

dnl XXX: do we want this?
dnl A more complete example of a response file is distributed with the
dnl OpenBSD installation sets for amd64, which is recommended to use as a
dnl starting point and reference for writing your own.
-:})dnl
dnl
dnl
dnl ========== Upgrade instructions
dnl (usually used by arch/upgrade)
dnl
dnl OpenBSDUpgrade({:-<list of available boot methods>-:})dnl
dnl Parameter is optional.
define({:-OpenBSDUpgrade-:},
{:-Warning! Upgrades to OpenBSD OSREV are currently only supported from the
immediately previous release.  The upgrade process will also work with older
releases, but might not execute some migration tasks that would be necessary
for a proper upgrade.

The best solution, whenever possible, is to backup your data and reinstall
from scratch. As a minimum, if the toolchain (the ``comp'' set) was installed,
you should remove all files within /usr/{:-include-:} before attempting to
upgrade.

To upgrade OpenBSD OSREV from a previous version, start with the general
instructions in the section "Installing OpenBSD".

Boot from $1.
When prompted, select the (U)pgrade option rather than the (I)nstall
option at the prompt in the install process.

You will be presented with a welcome message, and depending on how you are
connected to the system, you will be asked to set the terminal type or to
choose a keyboard layout.

The upgrade script will ask you for the existing root partition, and
will use the existing filesystems defined in /etc/fstab to install the
new system in.  It will also use your existing network parameters.

From then, the upgrade procedure is very close to the installation
procedure described earlier in this document.

However, it is strongly advised that you unpack the etc{:--:}.tgz and the
xetc{:--:}.tgz files found in /var/sysmerge in a temporary
directory and merge changes by hand, or with the help of the sysmerge(8)
helper script, since all components of your system may not function
correctly until your files in `/etc' are updated.-:})dnl
dnl
dnl
dnl ========== Installation media preparation
dnl (usually used by arch/xfer)
dnl
dnl Generic preparation introduction, after the list of various sources.
dnl Use the short version unless there are too many methods, in this case
dnl the long versions adds a ``don't panic!'' notice.
define({:-OpenBSDXferShortPrelude-:},
{:-The steps necessary to prepare the distribution sets for installation
depend on which method of installation you choose.  Some methods
require a bit of setup first that is explained below.

The installation allows installing OpenBSD directly from HTTP mirror
sites over the internet, however you must consider the speed and
reliability of your internet connection for this option.  It may save
much time and frustration to download the distribution sets to a local
server or disk and perform the installation from there, rather than
directly from the internet.-:})dnl
define({:-OpenBSDXferPrelude-:},
{:-OpenBSDXferShortPrelude

The variety of options listed may seem confusing, but situations vary
widely in terms of what peripherals and what sort of network arrangements
a user has, the intent is to provide some way that will be practical.-:})dnl
dnl
dnl Various floppy generation instructions.
dnl
define({:-OpenBSDXferCDROM-:},
{:-Creating a bootable CD-ROM:

	First you need to get access to the OpenBSD bootable CD-ROM (ISO)
	images. They can be found on one of the OpenBSD mirror servers. Two
	files are available, install{:--:}OSrev.iso which contains all of
	the sets needed for installation, and a smaller cd{:--:}OSrev.iso
	which contains just the installer, for a network install.

	Windows 7 users should be able to do this by right clicking on the
	install{:--:}OSrev.iso file and clicking burn to CD.

	OpenBSD users should be able to do this with the cdio command.
	"cdio tao install{:--:}OSrev.iso"

	Users of other operating systems should consult the
	appropriate documentation.-:})dnl
dnl
define({:-OpenBSDXferFloppyFromDOS-:},
{:-Creating a bootable floppy disk using Windows:

	First you need to get access to the OpenBSD bootable floppy
	images.  If you can access the distribution from the CD-ROM under
	DOS, you will find the bootable disks in the OSREV/MACHINE
	directory.  Otherwise, you will have to download them from one of
	the OpenBSD mirror sites, using an FTP client or a web browser.
	In either case, take care to do "binary" transfers, since
	these are images files and any DOS cr/lf translations or Control-z
	EOF interpretations will result in corrupted transfers.

	You will also need to go to the "tools" directory and grab a copy of
	the ntrw.exe utility.  Run it with the correct arguments like this
	"ntrw <image> <drive>:"

	Note that, when installing, the boot floppy can be write-protected
	(i.e. read-only).-:})dnl
dnl
define({:-OpenBSDXferFloppyFromUNIX-:},
{:-Creating a bootable floppy disk using a Un*x-like system:

	First, you will need to obtain a local copy of the bootable filesystem
	image as described above.  You should use the signify(1) and sha256(1)
	commands to verify the integrity of the images with the SHA256.sig file
	on the mirror site.

	Next, use the dd(1) utility to copy the file to the floppy drive.
	The command would likely be, under OpenBSD:
		dd if=floppy{:--:}OSrev.fs of=/dev/rfd0c bs=36b

	If you are using another operating system, you may have to adapt
	this to conform to local naming conventions for the floppy and
	options suitable for copying to a "raw" floppy image.  The key
	issue is that the device name used for the floppy *must* be one
	that refers to the correct block device, not a partition or
	compatibility mode, and the copy command needs to be compatible
	with the requirement that writes to a raw device must be in
	multiples of 512-byte blocks.  The variations are endless and
	beyond the scope of this document.

	If you're doing this on the system you intend to boot the floppy on,
	copying the floppy back to a file and doing a compare or checksum
	is a good way to verify that the floppy is readable and free of
	read/write errors.

	Note that, when installing, the boot floppy can be write-protected
	(i.e. read-only).-:})dnl
dnl
define({:-OpenBSDXferUSBFromUNIX-:},
{:-Creating a bootable USB key using a Un*x-like system:

	Some older systems may not be able to boot from USB keys or require
	changing boot priority.  Check your BIOS settings if you run into
	problems.

	First, you will need to obtain a local copy of the bootable filesystem
	image miniroot{:--:}OSrev.fs or install{:--:}OSrev.fs as described above.
	You should use the signify(1) and sha256(1) commands to verify
	the integrity of the images with the SHA256.sig file on the mirror site.

	Next, use the dd(1) utility to copy the file to the USB storage device.
	The command would likely be, under OpenBSD:
		dd if=miniroot{:--:}OSrev.fs of=/dev/rsdNc bs=1m

	where N is the device number.  You can find the correct device number
	by checking dmesg(8) when inserting the media.

	If you are using another operating system, you may have to adapt
	this to conform to local naming conventions for the USB key and
	options suitable for copying to a "raw" disk image.  The key
	issue is that the device name used for the USB key *must* be one
	that refers to the correct block device, not a partition or
	compatibility mode, and the copy command needs to be compatible
	with the requirement that writes to a raw device must be in
	multiples of 512-byte blocks.  The variations are endless and
	beyond the scope of this document.

	If you're doing this on the system you intend to boot the USB key on,
	copying the image back to a file and doing a compare or checksum
	is a good way to verify that the USB key is readable and free of
	read/write errors.-:})dnl
dnl
dnl OpenBSDXferNFS [(noupgrade)]
define({:-OpenBSDXferNFS-:},
{:-To install OpenBSD using a remote partition, mounted via
NFS, you must do the following:

	NOTE:	This method of installation is recommended only for
		those already familiar with using BSD network
		configuration and management commands.  If you aren't,
		this documentation should help, but is not intended to
		be all-encompassing.

	Place the OpenBSD distribution sets you wish to install
	into a directory on an NFS server, and make that directory
	mountable by the machine on which you are installing or
	upgrading OpenBSD.  This will probably require modifying
	the /etc/exports file of the NFS server and resetting
	its mount daemon (mountd).  (Both of these actions will
	probably require superuser privileges on the server.)

	You need to know the numeric IP address of the NFS
	server, and, if the server is not on a network directly
	connected to the machine on which you're installing or
	upgrading OpenBSD, you need to know the numeric IP address
	of the router closest to the OpenBSD machine.  Finally,
	you need to know the numeric IP address of the OpenBSD
	machine itself.

	Once the NFS server is set up properly and you have the
	information mentioned above, you can proceed to the next
	step in the installation ifelse(X$1,X,{:-or upgrade -:})process.ifelse(X$1,X,,{:-  If you're
	installing OpenBSD from scratch, go to the section on
	preparing your hard disk, below.  If you're upgrading an
	existing installation, go directly to the section on
	upgrading.-:})-:})dnl
dnl
define({:-OpenBSDXferFFS-:},
{:-If you are upgrading OpenBSD, you also have the option of installing
OpenBSD by putting the new distribution sets somewhere in your
existing file system, and using them from there.  To do that, do
the following:

	Place the distribution sets you wish to upgrade somewhere
	in your current file system tree.  At a bare minimum, you
	must upgrade the "base" binary distribution, and so must
	put the "base{:--:}OSrev" set somewhere in your file system.  It
	is recommended that you upgrade the other sets, as well.-:})dnl
dnl
define({:-OpenBSDInstNFS-:},
{:-Now you must populate the `/dev' directory for your client.  If the server
does not run OpenBSD you might save the MAKEDEV output:

	eo=echo ksh MAKEDEV all > all.sh

and then tailor it for your server operating system before running it.  Note
that MAKEDEV is written specifically for ksh, and may not work on any other
Bourne shell.

There will be error messages about unknown users and groups.  These errors are
inconsequential for the purpose of installing OpenBSD.  However, you may
want to correct them if you plan to use the diskless setup regularly.  In that
case, you may re-run MAKEDEV on your OpenBSD machine once it has booted.-:})dnl
@


1.123
log
@spelling:
initialising -> initializing from Claus Assmann
artitions -> partitions from spell(1)
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.122 2016/10/18 06:14:43 jmc Exp $
d390 1
a390 1
	whether you want to start xdm on boot.
@


1.122
log
@typo fix and zap some trailing eol whitespace;
from claus assman
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.121 2016/07/28 17:19:24 zhuk Exp $
d291 1
a291 1
	After the kernel is done initialising, you will be asked whether
d463 1
a463 1
	partitioning.  The current artitions defined will be
@


1.121
log
@Typo in the installation notes, from Roman Yakovlev.

Too bad this highly critical bugfix will miss release.

okay deraadt@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.120 2016/02/16 14:48:42 krw Exp $
d746 1
a746 1
If '(A)utoinstall' is choosen at the install prompt or if the
d749 1
a749 1
installation. 
d827 1
a827 1
You will be presented with a welcome message, and depending on how you are 
@


1.120
log
@Mention UEFI/GPT, fix some weird spacing, try to adjust 'partitioning'
verbiage to make more sense overall.

ok rpe@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.119 2016/02/12 20:29:18 rpe Exp $
d34 1
a34 1
	SHA256		Output of the sum(1) program using the option
@


1.119
log
@- re-order the (I)nstall, (U)pgrade, (A)utoinstall part to match what
  the installer shows and what the subsequent text describes.

- re-phrase the part about ssh logins as root. The installer now asks
  "Allow root ssh login? (yes, no, prohibit-password)". Previously it
  was "Since you set up a user, disable sshd(8) logins to root?"

OK krw@@, sthen@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.118 2016/02/12 20:25:32 rpe Exp $
d278 2
a279 2
will return you back to that prompt (no refresh of the prompt will occur,
though).-:})dnl
d364 1
d414 1
d428 1
a432 1

d436 1
d445 4
a448 4
{:-	Disks on OpenBSD/MACHINE are partitioned using the ``MBR''
	partitioning scheme.  You will need to create one
	MBR partition, in which all the real OpenBSD partitions will
	be created.-:})dnl
d458 3
a460 2
	here.  The installation program will then create a single
	MBR partition spanning the whole disk, dedicated to OpenBSD.
d462 2
a463 2
	Otherwise, fdisk(8) will be invoked to let you to edit your MBR
	partitioning.  The current MBR partitions defined will be
a469 1

d471 3
a473 2
	After your OpenBSD MBR partition has been setup, the real
	partition setup can follow.-:})dnl
d480 11
a490 10
{:-	Next the disk label which defines the layout of the OpenBSD
	partitions must be set up.  Each file system you want will
	require a separate partition.

	You will be proposed a default partition layout, trying
	to set up separate partitions, disk size permitting.

	You will be given the possibility to either accept the proposed
	layout, or edit it, or create your own custom layout.  These last
	two choices will invoke the disklabel(8) interactive editor,
d493 3
a495 3
	Within the editor, you will probably start out with only the
	'c' partition of fstype 'unused' that represents the whole disk.
	This partition can not be modified.$1
d505 3
a507 2
	{:-define-:}.  Partitions without mount points, or not of 4.2BSD fstype,
	will neither be formatted nor mounted during the installation.
@


1.118
log
@- The question if you really want to upgrade is gone.
- Add part about TERM and keyboard layout question.
- "download" instead of "ftp get/reget"

Feedback from and OK sthen@@
OK millert@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.117 2016/02/11 14:33:03 rpe Exp $
d292 1
a292 1
	you wish to do an "(A)utoinstall", "(I)nstall" or an "(U)pgrade".
d418 2
a419 2
	to start sshd(8) on boot, you will be given the possibility to
	disable sshd(8) logins as root.
@


1.117
log
@Sync installation notes with reality.

- the manual netconfig step was removed from the installer six years ago
- ntpd is enabled by default now

OK millert@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.116 2016/01/01 15:58:28 rpe Exp $
d821 3
a823 2
You will be presented with a welcome message and asked if you really wish
to upgrade.
d853 3
a855 3
much time and frustration to use ftp get/reget to transfer the
distribution sets to a local server or disk and perform the installation
from there, rather than directly from the internet.-:})dnl
@


1.116
log
@Tweak the installation notes regarding references to FTP.

'Sure' deraadt@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.115 2015/08/24 10:41:11 ajacoutot Exp $
a360 5
	You will also be presented with an opportunity to do more
	manual configuration.  If you accept, you will be dropped
	to a shell; when you are done, enter `exit' to return to
	the installation program.

d372 1
a372 4
	default, as well as ntpd(8).  If you choose to start ntpd(8),
	you will be asked for your ntp server; if you don't have any
	preferred ntp server, press enter to confirm the default
	setting of using the pool.ntp.org servers.
@


1.115
log
@/usr/share/sysmerge -> /var/sysmerge

requested by several
discussed with deraadt@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.114 2015/08/17 20:07:12 guenther Exp $
d330 3
a332 3
	do the install from another system using HTTP or FTP, and will
	also be the configuration used by the system after the installation
	is complete.
d547 1
a547 1
	FTP, HTTP, $1or a local disk partition.-:})dnl
d552 2
a553 2
{:-	To install via FTP or HTTP:
		To begin an FTP or HTTP install you will need the following
d555 2
a556 2
		1) Proxy server URL if you are using a URL-based FTP or
		   HTTP proxy (squid, CERN FTP, Apache 1.2 or higher).
d558 1
a558 1
		   firewall that blocks outgoing FTP or HTTP connections
d561 1
a561 1
		   DNS servers earlier in the install) of an FTP or HTTP
a569 6
		   The default value of pub/OpenBSD/OSREV/MACHINE
		   is almost always correct on FTP servers; for HTTP
		   servers there is no standard location for this.
		4) For FTP installs only, the login and password for the
		   FTP account.  You will only be asked for a password for
		   non-anonymous FTP.
d683 2
a684 2
	happen between releases, if a snapshot is being updated on an FTP
	or HTTP server with newer files while you are installing).
d857 1
a857 1
The installation allows installing OpenBSD directly from FTP mirror
d876 1
a876 1
	images. They can be found on one of the FTP or HTTP mirrors. Two
d897 2
a898 2
	the OpenBSD FTP or HTTP mirror sites, using an FTP client or a web
	browser.  In either case, take care to do "binary" transfers, since
@


1.114
log
@DUID question is gone

ok miod@@ deraadt@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.113 2014/10/23 21:33:21 rpe Exp $
d846 1
a846 1
xetc{:--:}.tgz files found in /usr/share/sysmerge in a temporary
@


1.113
log
@Extend autoinstall(8) feature:

- Ask for responsefile location (url or local path) if dhcp discovery
  fails for location or mode.  If 'next-server' is found in dhcp lease
  file, provide a default url http://next-server/install.conf.

- Ask for installer mode if the specified response file name does not
  match *install.conf or *upgrade.conf.

- If present, use /auto_install.conf or /auto_upgrade.conf as response
  file for unattended installation or upgrade.

- Automatically start installer in unattended mode if either one of
  these files is present when the system boots.

- Document changes in manpage and installation notes.

OK krw@@ deraadt@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.112 2014/09/11 07:08:37 rpe Exp $
d442 1
a442 7
	Reply with the name of your root disk.

	You will the be asked if you want to use DUID notation in
	/etc/fstab, instead of traditional device names. You are strongly
	advised to use DUIDs, as they allow you to move your disks to
	different controllers, or change their bus identifiers, without
	having to modify /etc/fstab every time your configuration changes.-:})dnl
@


1.112
log
@Tweak notes after moving xetc to xbase.

OK matthieu@@ ajacoutot@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.111 2014/08/26 20:19:26 rpe Exp $
d760 11
a770 6
If the installation system detects that it booted from the network,
and isn't interrupted within 5 seconds, it attempts a fully-automatic
installation.  In this mode the installer runs dhclient(8) on the
network interface the system booted from, or in case of multiple
interfaces it will ask which one to use. Upon success it retrieves a
response file via HTTP.
@


1.111
log
@Create etc set during 'make build' and embed it in base set to make
it available during a regular install or upgrade so that it doesn't
need to be independently fetched.

Idea, directions and OK deraadt@@
Feedback and Ok halex@@ and aja@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.110 2014/08/06 02:34:23 doug Exp $
a150 8
dnl OpenBSDxetc( compressed size, uncompressed size )
dnl Describes xetcXX.tgz.
dnl
define({:-OpenBSDxetc-:},
{:-	xetc{:--:}OSrev	 This set includes the X window system configuration files
		 that reside in /etc.  It's the equivalent of etc{:--:}OSrev for X.showsize($1,$2)-:})dnl
dnl
dnl
d844 1
a844 4
procedure described earlier in this document.  Note that the upgrade
procedure will not let you pick the ``xetc{:--:}OSrev.tgz'' set, so as to
preserve your files in `/etc' which you are likely to have customized
since a previous installation.
d846 2
a847 2
However, it is strongly advised that you unpack the etc{:--:}.tgz file
found in /usr/share/sysmerge and the xetc{:--:}OSrev.tgz in a temporary
@


1.110
log
@Add signify instructions plus miniroot and install56.fs for amd64/i386

ok deraadt@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.109 2014/05/09 21:15:17 rpe Exp $
a125 14
dnl OpenBSDetc( compressed size, uncompressed size [, noupgrade])
dnl Describes etcXX.tgz.
dnl
define({:-OpenBSDetc-:},
{:-	etc{:--:}OSrev	 This distribution set contains the system configuration
		 files that reside in /etc and in several other places.
		 This set MUST be installed{:--:}ifelse(X$3,X,{:- if you are installing the
		 system from scratch, but should NOT be used if you are
		 upgrading.  (If you are upgrading, it's recommended that
		 you get a copy of this set and CAREFULLY upgrade your
		 configuration files by hand; see the section named
		 "Upgrading a previously-installed OpenBSD System" below.)-:},.)showsize($1,$2)-:})dnl
dnl
dnl
d709 1
a709 2
	have installed at least the "base{:--:}OSrev", "etc{:--:}OSrev",
	and "bsd" distribution sets.
d714 1
a714 1
	least the "base{:--:}OSrev", "etc{:--:}OSrev", and "bsd" distribution sets.
d853 9
a861 9
procedure will not let you pick neither the ``etc{:--:}OSrev.tgz'' nor the
``xetc{:--:}OSrev.tgz'' sets, so as to preserve your files in `/etc' which
you are likely to have customized since a previous installation.

However, it is strongly advised that you unpack the etc{:--:}OSrev.tgz and
xetc{:--:}OSrev.tgz sets in a temporary directory and merge changes by hand, or
with the help of the sysmerge(8) helper script, since all components of
your system may not function correctly until your files in `/etc' are
updated.-:})dnl
@


1.109
log
@Tweak response file example:
- "Server?" -> "HTTP Server?"
- Use more appropriate public ssh key type

OK deraadt@@ krw@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.108 2014/03/19 01:59:48 tedu Exp $
d136 1
a136 1
		 configuration files by hand; see the section named 
d250 5
d713 1
a713 1
		
d920 1
a920 1
	Users of other operating systems should consult the 
d934 1
a934 1
	
d945 1
a945 1
	First, you will need obtain a local copy of the bootable filesystem
d971 35
@


1.108
log
@you are still welcome to install from tape, but as befits an elite master
of unix arcana, we will not condescend to tell you how. why spoil the fun?
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.107 2014/02/27 20:11:25 tedu Exp $
d807 1
a807 1
           Public ssh key for user = ssh-rsa AAAAB3...RVtZJL puffy@@ai
d810 1
a810 1
           Server = ftp.eu.openbsd.org
@


1.107
log
@some basic notes on how to create a CD-ROM from an iso
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.106 2014/02/27 19:42:28 tedu Exp $
a602 30
dnl For arches where you can create a boot tape, $1 can be set as the
dnl file index of the first set, after the boot files.
define({:-OpenBSDTAPEInstall-:},
{:-	To install from tape:
		Unlike all other installation methods, there is no way
		to know the names of the files on tape.  Because of this,
		it is impossible to check that the files on tape match
		the machine architecture and release of OpenBSD/MACHINE.

		Moreover, since tape filenames are not known, the file
		checksums can not be verified.  Use this installation
		method only if there is no better option.

		In order to install from tape, the distribution sets to be
		installed must have been written to tape previously, either
		in tar format or gzip-compressed tar format.

		You will also have to identify the tape device where the
		distribution sets are to be extracted from.  This will
		typically be "nrst0" (no-rewind, raw interface).

		Next you will have to specify how many files have to be
		skipped on the tape.  This number is usually zero{:--:}ifelse(X$1,X,,{:-, unless
		you have created a bootable tape, in which case the number
		will be $1-:}).

		The install program will not automatically detect whether
		an image has been compressed, so it will ask for that
		information before starting the extraction of each file.-:})dnl
dnl
a964 106
	(i.e. read-only).-:})dnl
dnl
dnl Tape preparation instructions.
dnl
dnl OpenBSDXferBareTape describes how to set up a non-bootable distribution
dnl tape, and takes as an optional argument, the list of X11 sets which
dnl may be put on the tape.
define({:-OpenBSDXferBareTape-:},
{:-Creating an installation tape:

	While you won't be able to boot OpenBSD from a tape, you can use
	one to provide the installation sets.  To do so, you need to make
	a tape that contains the distribution set files, each in "tar"
	format or in "gzipped tar format".  First you will need to
	transfer the distribution sets to your local system, using ftp or
	by mounting the CD-ROM containing the release.  Then you need to
	make a tape containing the files.

	If you're making the tape on a UN*X-like system, the easiest way
	to do so is make a shell script along the following lines, call it
	"/tmp/maketape".

	#! /bin/sh
	TAPE=${TAPE:-/dev/nrst0}
	mt -f ${TAPE} rewind
	for file in base etc comp game man $1
	do
		dd if=${file}OSrev.tgz of=${TAPE} obs=8k conv=osync
	done
	tar cf ${TAPE} bsd
	mt -f ${TAPE} offline
	# end of script

	And then:

	cd .../OSREV/MACHINE
	sh -x /tmp/maketape

	If you're using a system other than OpenBSD, the tape
	name and other requirements may change.  You can override the
	default device name (/dev/nrst0) with the TAPE environment
	variable.  For example, under Solaris, you would probably run:

	TAPE=/dev/rmt/0n sh -x /tmp/maketape

	Note that, when installing, the tape can be write-protected
	(i.e. read-only).-:})dnl
dnl OpenBSDXferBootTape describes how to set up a non-bootable distribution
dnl tape, and takes as first argument, the list of X11 sets which may be put
dnl on the tape.  Then at least one, and up to three arguments list the first
dnl files to be put on the tape to make it bootable.  Each filename can be
dnl followed by dd(1) arguments (such as conv=osync).
define({:-OpenBSDXferBootTape-:},
{:-Creating an (optionally bootable) installation tape:

	To install OpenBSD from a tape, you need to make a tape that
	contains the distribution set files, each in "tar" format or in
	"gzipped tar format".  First you will need to transfer the
	distribution sets to your local system, using ftp or by
	mounting the CD-ROM containing the release.  Then you need to
	make a tape containing the files.

	If you're making the tape on a UN*X-like system, the easiest way
	to do so is make a shell script along the following lines, call it
	"/tmp/maketape".

	#! /bin/sh
	TAPE=${TAPE:-/dev/nrst0}
	mt -f ${TAPE} rewind
	if test {:-$-:}# -lt 1
	then
		dd of=${TAPE} if=$2
ifelse(X$3,X,,{:-		dd of=${TAPE} if=$3
-:})dnl
ifelse(X$4,X,,{:-		dd of=${TAPE} if=$4
-:})dnl
	fi
	for file in base etc comp game man $1
	do
		dd if=${file}OSrev.tgz of=${TAPE} obs=8k conv=osync
	done
	tar cf ${TAPE} bsd
	mt -f ${TAPE} offline
	# end of script

	And then:

	cd .../OSREV/MACHINE
	sh -x /tmp/maketape

        Note that, by default, this script creates a bootable tape.  If
	you only want to fetch the OpenBSD files from tape, but want to
	boot from another device, you can save time and space creating
	the tape this way:

        cd .../OSREV/MACHINE
        sh -x /tmp/maketape noboot

	If you're using a system other than OpenBSD, the tape
	name and other requirements may change.  You can override the
	default device name (/dev/nrst0) with the TAPE environment
	variable.  For example, under Solaris, you would probably run:

	TAPE=/dev/rmt/0n sh -x /tmp/maketape

	Note that, when installing, the tape can be write-protected
@


1.106
log
@nobody uses dos. ntrw.exe is the future.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.105 2014/02/27 19:29:19 tedu Exp $
d929 18
@


1.105
log
@talk about signify a bit
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.104 2014/02/27 19:26:50 tedu Exp $
d931 1
a931 1
{:-Creating a bootable floppy disk using DOS/Windows:
d942 3
a944 18
	You will also need to go to the "tools" directory and grab a
	copy of the rawrite.exe utility and its documentation.  This
	program is needed to correctly copy the bootable filesystem
	image to the floppy, since it's an image of a unix partition
	containing an ffs filesystem, not an MSDOS format diskette.

	Once you have installed rawrite.exe, just run it and specify the
	name of the bootable image, such as "floppy{:--:}OSrev.fs" and the name of
	the floppy drive, such as "a:".  Be sure to use good quality HD
	(1.44MB) floppies, formatted on the system you're using.  The
	image copy and boot process is not especially tolerant of read
	errors.

	Note that if you are using NT, 2000, or XP to write the
	images to disk, you will need to use ntrw.exe instead.  It
	is also available in the "tools" directory.  Grab it and
	run in with the correct arguments like this "ntrw <image>
	<drive>:"
@


1.104
log
@fewer mentions of SunOS
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.103 2014/02/27 18:04:28 tedu Exp $
d968 2
a969 2
	image as described above.  If possible use the sha256(1) command to
	verify the checksums of the images vs. the values in the SHA256 file
@


1.103
log
@delete old notes and long sections about old problems to reflect what
a new user is likely to need to know today
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.102 2014/02/26 18:13:41 rpe Exp $
d965 1
a965 2
{:-Creating a bootable floppy disk using SunOS, Solaris or other Un*x-like
system:
d968 1
a968 1
	image as described above.  If possible use the sha1(1) command to
d973 1
a973 1
	The command would likely be, under SunOS:
a974 5
	and, under Solaris:
		dd if=floppy{:--:}OSrev.fs of=/dev/rdiskette0 bs=36b
	unless the volume management daemon, vold(1M), is running, in
	which case the following command is preferable:
		dd if=floppy{:--:}OSrev.fs of=/vol/dev/rdiskette0 bs=36b
d1030 1
a1030 1
	If you're using a system other than OpenBSD or SunOS, the tape
d1090 1
a1090 1
	If you're using a system other than OpenBSD or SunOS, the tape
@


1.102
log
@Update section about autoinstall and sync with reality.
Use a more elaborate response file example.

with feedback from krw and jmc
no objections from miod
ok deraadt
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.101 2014/02/02 11:56:26 miod Exp $
d259 3
a261 4
{:-Installing OpenBSD is a relatively complex process, but if you have
this document in hand and are careful to read and remember the
information which is presented to you by the install program, it
shouldn't be too much trouble.ifelse(X$1,X,,{:-
d300 1
a300 3
dnl Describes the boot of the ramdisk, the expected disk devices
dnl names, and warns bore the reader with geometry concerns if the
dnl first argument is not empty.
d304 2
a305 11
	OpenBSD kernel boot messages.  You will want to read them
	to determine your disks name and geometry.  Its name will
	be something like ifelse(X$2,X,{:-"sd0" for SCSI drives, or "wd0" for IDE
	drives-:},$2){:--:}ifelse(X$3,X,,{:-, $3-:}){:--:}ifelse(X$4,X,,{:-, $4-:}){:--:}.{:--:}ifelse(X$1,X,,{:-
	As mentioned above, you will need your disks geometry (which
	will be printed on a line beginning with its name) when
	creating OpenBSD partitions.-:})
	You will also need to know the device name to tell the
	install tools what disk to install on.  If you cannot read
	the messages as they scroll by, do not worry -- you can get
	at this information later inside the install program.
@


1.101
log
@Describe SHA256.sig.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.100 2014/01/26 04:35:09 tedu Exp $
d823 30
a852 22
network interface the system booted from, and upon success retrieves
a response file via HTTP.  The "next-server" DHCP option specifies the
hostname part of the URL, as in "http://<next-server>/install.conf".

You can also retrieve the response file from another source, a local
disk for example.  If you wish to do that, enter the shell, retrieve
the response file, store it as /install.conf, and start the automatic
installation by leaving the shell and entering 'A' for "(A)utoinstall"
at the prompt.

The response file format is very simple.  It contains key/value pairs
separated by an equals sign '=', where the key is a substring of the
question or the plural of a thing in multiple-choice questions, and
the value is what would have been entered at the interactive prompt.
Empty lines, and lines beginning with a '#' character are ignored.

Here is a minimal response file:

  system hostname = openbsd
  # generated with: encrypt -- secret
  password for root = ${:--:}2a${:--:}06${:--:}4Q.5e2eIJYyMn2J/HTR6N.gJ4tpBsSXgYrhVnxlomfhVGHOcnu3KW
  location of sets = http
d854 1
a854 4
(Passwords should always be encrypted using encrypt(1), although the
installer also accepts cleartext passwords.)

The "system hostname" key above matches the following full question
d859 2
a860 17
Take "network interfaces" for an example of a multiple-choice question,
which could be asked during an interactive installation:

  Available network interfaces: re0 re1
  Which one do you wish to configure? [re0]

In a response file, this multiple-choice question is identified by
only the ``thing'' which is available: "network interfaces" in this
case.  To configure these two interfaces the response file might
contain:

  network interfaces = re0 re1
  IPv4 address for re0 = dhcp
  IPv4 address for re1 = dhcp

While the installation is in progress the installer will redirect all
output to the file /install.log, which can also be found on the freshly
d863 2
a864 2
be dropped back into the shell where you can look at the /install.log
file or try again.
@


1.100
log
@remove unnecessary so-called verbiage. ok chris deraadt miod
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.99 2013/12/04 23:20:19 jmc Exp $
d36 6
a41 1
			correctness of downloaded files.')dnl
@


1.99
log
@committing uwe's autoinstall notes, as requested by deraadt;
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.98 2013/08/18 04:16:13 miod Exp $
d480 2
a481 2
{:-	Disks on OpenBSD/MACHINE are partitioned using the so-called
	``MBR'' partitioning scheme.  You will need to create one
@


1.98
log
@Missing double quote; Craig R. Skinner
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.97 2013/07/17 18:03:42 bmercer Exp $
d315 6
a320 3
	After the kernel is done initialization, you will be asked whether
	you wish to do an "(I)nstall" or an "(U)pgrade".  Enter 'I' for a
	fresh install or 'U' to upgrade an existing installation.
d804 72
@


1.97
log
@Update the wording to read better. Spotted by jj
OK jj@@ guenther@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.96 2013/02/09 19:48:37 miod Exp $
d132 1
a132 1
		 Upgrading a previously-installed OpenBSD System" below.)-:},.)showsize($1,$2)-:})dnl
@


1.96
log
@Stop using the name `miniroot' when `bsd.rd' is implied. A few platforms
have a real miniroot to be dd'ed to the disk, and that's fine; but when
we are talking about booting bsd.rd (either from an existing setup, or the
network, or the cd-rom images), then refer to it as `installation kernel'.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.95 2011/08/08 20:03:03 miod Exp $
d279 1
a279 1
The installation procedure is designed to gather as many information about
@


1.95
log
@Usual release distrib/notes churning. ok deraadt@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.94 2011/05/28 06:25:41 jmc Exp $
d201 2
a202 1
{:-	cd{:--:}OSrev.iso	A miniroot filesystem image suitable to be used
d204 1
a204 2
			and X sets be found via another media or network;
			otherwise similar to the bsd.rd image above.-:})dnl
@


1.94
log
@sollicitation -> solicitation;
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.93 2010/10/18 04:24:07 deraadt Exp $
d460 10
a470 3
	The installation program will now tell you which disks
	it can install on, and ask you which it should use.
	Reply with the name of your root disk.-:})dnl
d760 1
d764 2
a765 2
	system, and will install bootblocks on the root disk.ifelse(MDSMP,,,{:-

d769 6
a774 1
	available as `bsd.sp'.-:})-:})dnl
d812 6
a817 2
for a proper upgrade.  The best solution, whenever possible, is to backup
your data and reinstall from scratch.
@


1.93
log
@the misc set went away
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.92 2010/06/05 19:36:10 miod Exp $
d370 1
a370 1
	  interface to configure automatically via router sollicitation
@


1.92
log
@Fortran is no longer in comp.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.91 2010/03/16 17:23:05 miod Exp $
a151 8
dnl OpenBSDmisc( compressed size, uncompressed size )
dnl Describes miscXX.tgz.
dnl
define({:-OpenBSDmisc-:},
{:-	misc{:--:}OSrev	 This set includes the system dictionaries (which are rather
		 large), and the typesettable document set.showsize($1,$2)-:})dnl
dnl
dnl
d948 1
a948 1
	for file in base etc comp game man misc $1
d1000 1
a1000 1
	for file in base etc comp game man misc $1
@


1.91
log
@Jumbo commit for 4.7 installation instructions:
- do not mention tape as an installation media on systems where it is very
  unlikely that a tape drive can be connected to (i.e. anything with only
  USB as expansion capabilities)
- do not mention that fetching the installation sets from a partition is
  ``for upgrades only''. You may do this for installation, but of course
  you can not use a partition which will be newfs'ed for that purpose.
- mention ext2fs partitions as possible installation sets source only on
  platforms where the installation media actually can mount an ext2fs
  filesystem.
- stress the fact that the sparc miniroot image is a GENERIC kernel with
  a little on-disk filesystem, and not a RAMDISK kernel with a little
  in-memory filesystem, and thus must not be overwritten during installation
  (i.e. be careful if you repartition the disk the miniroot has been put on).
- more conv=sync -> conv=osync for tape setup instructions.
- model-specific layout changes on armish, loongson and socppc instructions.
- fix various typos and grammar mistaeks.

"sure" deraadt@@ (without eyeballing)
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.90 2010/03/09 20:38:43 otto Exp $
d111 3
a113 3
		 to C, C++, Objective-C and Fortran are supported.  This set
		 includes the system {:-include-:} files (/usr/{:-include-:}), the linker,
		 the compiler tool chain, and the various system libraries{:--:}ifelse(MDSO,,.,{:-
@


1.90
log
@use conv=osync when preparing an install tape; ok deraadt@@ krw@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.89 2009/10/25 20:56:24 miod Exp $
d574 2
a575 2
        are several install methods supported; FTP, HTTP, tape,
	$1or a local disk partition.-:})dnl
d696 5
a700 4
		sets.  This is normally $1"sdN", where N is a number
		0 through 9.  Next you will have to identify the partition
		within that disk that holds the distribution; this is a
		single letter between 'a' and 'p'.
d898 2
a899 1
{:-Creating a bootable floppy disk using SunOS, Solaris or other Un*x-like system:
d982 1
a982 1
dnl followed by dd(1) arguments (such as conv=sync).
d1010 1
a1010 1
		dd if=${file}OSrev.tgz of=${TAPE} obs=8k conv=sync
@


1.89
log
@Add a mention the `a' partition needs to be contained within the first 2GB
of the disk, for the prom to be able to correctly read the kernel image.
Found the hard way by landry@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.88 2009/05/31 18:18:39 miod Exp $
d956 1
a956 1
		dd if=${file}OSrev.tgz of=${TAPE} obs=8k conv=sync
@


1.88
log
@Try to catch up with install.{sh,sub} changes.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.87 2009/05/17 00:11:34 sthen Exp $
d507 2
a508 1
dnl OpenBSDInstallPart5(mention about other OS partitions)
d529 1
a529 1
	one with "4.2BSD" as the fstype, to hold the root file system.
@


1.87
log
@adapt to installer changes; the old Y/N question about sharing the disk with
other OS changed to a multiple-choice format (Whole disk/OpenBSD area/Edit).
ok miod@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.86 2009/05/13 18:38:27 miod Exp $
d352 45
a396 3
dnl install.sub (install) hostname/rootpwd
{:-	The first question you will be asked is the system hostname
	(without any domain part), followed by the initial root password
d457 1
a457 40

dnl install.sub (install) donetconfig
	You will now be given an opportunity to configure the network.
	The network configuration you enter (if any) can then be used to
	do the install from another system using HTTP or FTP, and will
	also be the configuration used by the system after the installation
	is complete.

dnl XXX add a MDVLAN feature and document vlan setup
	The install program will give you a list of network interfaces you
	can configure.  For each network interface you select to configure,
	you will be asked for:

	- the symbolic host name to use (except for the first
	  interface setup, which will reuse the host name entered at the
	  beginning of the installation).

	- the IPv4 settings: address and netmask.  If the IP address
	  should be obtained from a DHCP server, simply enter ``dhcp''
	  when asked for the address.

	- the IPv6 settings (address, prefix length, and default router).
	  You may enter ``rtsol'' when asked for the address for the
	  interface to configure automatically via router sollicitation
	  messages.

	After all interfaces have been configured, if there have been
	any IPv4 interfaces setup, you will be asked for the IPv4 default
	route.  This step is skipped if you only have one IPv4 interface
	setup, and it is configured with DHCP.

	The install program will also ask you for your DNS domain name,
	and the domain name servers, unless this information has
	already been obtained from a DHCP server during interface setup.

	You will also be presented with an opportunity to do more
	manual configuration.  If you accept, you will be dropped
	to a shell; when you are done, enter `exit' to return to
	the installation program.
dnl install.sub (install nifs == 0) set_timezone
d460 1
a460 2
	If no network interfaces have been configured, you may
	now be given the opportunity to configure the time zone
a554 1
dnl Setting up the network
a569 9
ifelse(MDTZ,,,
{:-
	You may now be given the opportunity to configure the time zone
	if it hasn't been configured yet (this depends on the installation
	media you are using).
	If the installation program skips this test, do not be
	alarmed, the time zone will be configured at the end
	of the installation.
-:})dnl
@


1.86
log
@Better disk partitioning details, especially for MBR + disklabel or
HFS + disklabel setups.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.85 2009/05/12 21:41:24 deraadt Exp $
d488 1
a488 1
	to share the disk with other operating systems, answer `y'
@


1.85
log
@fix the first few frenchisms which leap out at my eyes
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.84 2009/05/12 21:06:48 miod Exp $
d367 1
a367 1
	setting of picking one of the pool.ntp.org servers.
d404 1
a404 1
	criteria, and doesn't conflict with one of the administrative
d410 1
a410 2
	use a strong password here as well, different from the root
	password.
d466 1
d471 34
d513 1
a513 3
dnl install.sh md_prep_disklabel loop
	For the first disk (which will be the boot disk, hosting the
	root partition), you will be proposed a default layout, trying
d517 3
a519 3
	layout, or edit it, or do your own custom layout.  These last
	two choices will invoke an interactive editor allowing you to
	create your desired layout.
d523 4
a526 3
	This partition can not be modified.  You must create partition 'a'
	as a native OpenBSD partition, i.e. one with "4.2BSD" as the
	fstype, to hold the root file system.
d530 1
a530 1
	systems such as /usr, /tmp, /var, and /home.$1
d534 1
a534 1
	will not be formatted during the installation.
a535 3
dnl XXX Write a real disklabel-in-a-nutshell introduction here.
dnl XXX If only to mention disk sizes can be specified with suffixes,
dnl XXX not enough people know this!
d542 7
d558 11
d586 3
a588 3
define({:-OpenBSDFTPInstall-:},
{:-	To install via FTP:
		To begin an FTP install you will need the following
d590 1
a590 29
		1) Proxy server URL if you are using a URL-based
		   FTP proxy (squid, CERN FTP, Apache 1.2 or higher).
		   You need to {:-define-:} a proxy if you are behind a
		   firewall that blocks outgoing FTP (assuming you
		   have a proxy available to use).
		2) The IP address (or hostname if you configured
		   DNS servers earlier in the install) of an FTP server
		   carrying the OpenBSD OSREV distribution.
		   The installation program will try to fetch a list
		   of FTP servers; depending on your network settings,
		   this might fail.  If the list could be fetched, it
		   will be displayed, and you can choose an entry from
		   the list (the first entries are expected to be the
		   closest mirrors to your location).
		3) The FTP directory holding the distribution sets.
		   The default value of pub/OpenBSD/OSREV/MACHINE
		   is almost always correct.
		4) The login and password for the FTP account.
		   You will only be asked for a password for
		   non-anonymous FTP.

		Then refer to the section named "installation set selection"
		below.-:})dnl
dnl
define({:-OpenBSDHTTPInstall-:},
{:-	To install via HTTP:
		To begin an HTTP install you will need the following
		pieces of information:
		1) Proxy server URL if you are using a URL-based
d593 1
a593 1
		   firewall that blocks outgoing HTTP connections
d596 2
a597 2
		   DNS servers earlier in the install) of an FTP server
		   carrying the OpenBSD OSREV distribution.
d599 1
a599 1
		   of HTTP servers; depending on your network settings,
d605 6
a610 4
		   There is no standard location for this;
		   You should use the directory specified
		   along with the server in the list of official
		   HTTP mirror sites that you received in step 2.
d770 1
a770 2
	system, and will install bootblocks on the root disk.
ifelse(MDSMP,,,{:-
d775 1
a775 2
	available as `bsd.sp'.-:})dnl
-:})dnl
d878 1
a878 1
	these are images files and any DOS cr/lf translations or control/z
@


1.84
log
@Try to catch up with installer changes in the installation notes.
Also, the per-platform features are moved to a common place, which makes
the MD layout easier to work on. m4.common is still a tangled mess of subtly
placed dnl, though...
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.83 2009/04/17 04:03:33 deraadt Exp $
d291 1
a291 1
The order of these questions might be quite deconcerting if you are used to
d413 1
a413 1
	If you have choosen to setup a user account, and you had choosen
d448 2
a449 2
	and the domain name servers, unless these informations have
	been obtained from a DHCP server during interface setup.
d462 1
a462 1
	If the installation program skips this test, do not be
@


1.83
log
@bye bye md5
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.82 2009/04/17 03:53:59 deraadt Exp $
a17 20
dnl
dnl a simple MACHINE->MACHINE_ARCH converter.
define(`MACHINE_ARCH',
`ifelse(
MACHINE,amiga,m68k,
MACHINE,armish,arm,
MACHINE,aviion,m88k,
MACHINE,hp300,m68k,
MACHINE,landisk,sh,
MACHINE,luna88k,m88k,
MACHINE,mac68k,m68k,
MACHINE,macppc,powerpc,
MACHINE,mvme68k,m68k,
MACHINE,mvme88k,m88k,
MACHINE,mvmeppc,powerpc,
MACHINE,sgi,mips64,
MACHINE,socppc,powerpc,
MACHINE,sun3,m68k,
MACHINE,zaurus,arm,
MACHINE)')dnl
d49 2
a50 2
dnl o `include' and `define' is required as include and define are both m4
dnl   reserved words that evaluate to NULL if not quoted.
d94 2
a95 3
dnl OpenBSDbase( compressed size, uncompressed size [, shared])
dnl Describes baseXX.tgz. Put ``shared'' as third argument if shared libraries
dnl are available.
d102 2
a103 2
		 ifelse(X$3,Xshared,{:-It includes shared library support, and excludes
		 everything described below.-:},{:-It excludes everything described below.-:})showsize($1,$2)-:})dnl
d106 2
a107 3
dnl OpenBSDcomp( compressed size, uncompressed size [, shared])
dnl Describes compXX.tgz. Put ``shared'' as third argument if shared libraries
dnl are available.
d113 1
a113 1
		 the compiler tool chain, and the various system libraries{:--:}ifelse(X$3,Xshared,{:-
d115 1
a115 1
		 the base set).-:},.)
d259 1
a259 1
dnl Installation introduction. Warns about disk geometry hell if argument
d284 17
a300 9
The following is a walk-through of the steps you will take while
getting OpenBSD installed on your hard disk.  If any question has a
default answer, it will be displayed in brackets ("[]") after the
question.  If you wish to stop the installation, you may hit Control-C
at any time, but if you do, you'll have to begin the installation
process again from scratch.  Using Control-Z to suspend the process
may be a better option, or at any prompt enter '!' to get a shell,
from which 'exit' will return you back to that prompt (no refresh
of the prompt though).-:})dnl
d302 1
a302 1
dnl OpenBSDBootMsgs(warn geometry, disk type, disk type, disk type)
d307 2
a308 1
define({:-OpenBSDBootMsgs-:},
d320 26
a345 1
	at this information later inside the install program.-:})dnl
d347 1
a347 1
dnl OpenBSDInstallPart3
d351 119
a469 10
define({:-OpenBSDInstallPart3-:},
{:-	After entering the terminal type you will be asked whether you
	wish to do an "(I)nstall" or an "(U)pgrade".  Enter 'I' for a
	fresh install or 'U' to upgrade an existing installation.

	You will be presented with a welcome message and asked if
	you really wish to install (or upgrade).  Assuming you
	answered yes, the install program will then tell you which
	disks it can install on, and ask you which it should use.
	Reply with the name of your disk.-:})dnl
d471 1
a471 1
dnl OpenBSDInstallPart4(mention about other OS partitions)
d474 1
a474 1
define({:-OpenBSDInstallPart4-:},
d476 1
a476 1
	partitions must be set up. Each file system you want will
d479 15
a493 7
	The installation script will invoke an interactive editor allowing 
	you to create your desired layout. If you are labeling a new disk,
	you will probably start out with only the 'c' partition of fstype
	'unused' that represents the whole disk. You cannot modify the 'c'
	partition! You must create partition 'a' as a native OpenBSD
	partition, i.e. one with "4.2BSD" as the fstype, to hold the root
	file system.
d497 1
a497 1
	systems for /usr, /tmp, /var, and /home.
d499 15
a513 3
	For quick help while in the interactive editor, enter '?'. Enter 'M'
	to view the entire manual page (see the info on the ``-E'' flag). To
	exit the editor enter 'q'.-:})dnl
d515 1
a515 16
dnl OpenBSDInstallPart5
dnl More disklabel notes(disk)
define({:-OpenBSDInstallPart5-:},
{:-	After you exit the interactive editor the install program will
	ask you to confirm or specify where each "4.2BSD" partition in
	the disklabel is to be mounted. The 'a' partition is always the
	root file system. The install program will cycle over the
	other "4.2BSD" partitions until you enter "done".

	When you enter "done" you will be asked to confirm that the
	partition and mount point information is correct. This is the
	point of no return! If you accept the displayed information
	new file systems are created on all partitions to be mounted.
	This will DESTROY ALL EXISTING DATA on those partitions.-:})dnl
dnl
dnl OpenBSDInstallNet(other installation sources,hasfloppy)
d517 13
a529 43
define({:-OpenBSDInstallNet-:},
{:-	After all your file systems have been created, the install program
	will prompt you for the system hostname, and will give you an
	opportunity to configure the network.  The network configuration
	you enter (if any) can then be used to do the install from another
	system using HTTP or FTP, and will also be the configuration used
	by the system after the installation is complete.

	Note that the system hostname should be without the domain part.

If you select to configure the network, the install program will
ask you for the name of your system and the DNS domain name to use.
Note that the host name should be without the domain part, and that
the domain name should NOT {:-include-:} the host name part.

	If you select to configure the network, the install program will
	give you a list of network interfaces you can configure.  For each
	network interface you select to configure, it will ask for the IP
	address to use, the symbolic host name to use, the netmask to use,
	and any interface-specific flags to set.  If the IP address should
	be obtained from a DHCP server, simply enter ``dhcp'' when asked
	for the IP address.  The interface-specific flags are usually used
	to determine which media the network card is to use.  Typically no
	media flags are required as autodetection normally works, but you
	will be prompted with a list of the acceptable media flags, and
	asked if you want to provide any.  In doubt, do not enter any media
	flags; or you can refer to the manual page for your interface for
	the appropriate flags.

	After all network interfaces have been configured, the install pro-
	gram will ask for the DNS domain name to use, as well as the IP
	address of the primary name server to use.  Finally, you will be
	asked for the IP address of the default route.

	You will also be presented with an opportunity to edit the host
	table.

	At this point you will be asked for the initial root password of
	the system, twice.  Although the install program will only check
	that the two passwords match, you should make sure to use a
	strong password.  As a minimum, the password should be at least
	six characters long and a mixture of both lower and uppercase
	letters, numbers and punctuation characters.
d531 1
a531 1
        After these preparatory steps have been completed, you will be
d534 1
a534 2
	$1or a local disk partition.
	ifelse(X$2,X,,{:-Note that installation from floppies is not currently supported.-:})-:})dnl
d541 21
a561 26
		pieces of information.  Don't be daunted by this list;
		the defaults are sufficient for most people.
		    1) Proxy server URL if you are using a URL-based
		       FTP proxy (squid, CERN FTP, Apache 1.2 or higher).
		       You need to {:-define-:} a proxy if you are behind a
		       firewall that blocks outgoing FTP (assuming you
		       have a proxy available to use).
		    2) Do you need to use active mode FTP?  By default,
		       ftp will attempt to use passive mode and fall
		       back to an active connection if the server does
		       not support passive mode.  You only need to enable
		       this option if you are connecting to a buggy FTP
		       daemon that implements passive FTP incorrectly.
		       Note that you will not be asked about active
		       FTP if you are using a proxy.
		    3) The IP address (or hostname if you enabled
		       DNS earlier in the install) of an FTP server
		       carrying the OpenBSD OSREV distribution.
		       If you don't know, answer ``y'' when asked if
		       you want to see a list of such hosts.
		    4) The FTP directory holding the distribution sets.
		       The default value of pub/OpenBSD/OSREV/MACHINE
		       is almost always correct.
		    5) The login and password for the FTP account.
		       You will only be asked for a password for
		       non-anonymous FTP.
d563 2
a564 2
		For instructions on how to complete the installation via
		FTP, see the section named "Common URL installations" below.-:})dnl
d570 19
a588 15
		    1) Proxy server URL if you are using a URL-based
		       HTTP proxy (squid, CERN FTP, Apache 1.2 or higher).
		       You need to {:-define-:} a proxy if you are behind a
		       firewall that blocks outgoing HTTP connections
		       (assuming you have a proxy available to use).
		    2) The IP address (or hostname if you enabled
		       DNS earlier in the install) of an HTTP server
		       carrying the OpenBSD OSREV distribution.
		       If you don't know, answer ``y'' when asked if
		       you want to see a list of such hosts.
		    3) The directory holding the distribution sets.
		       There is no standard location for this;
		       You should use the directory specified
		       along with the server in the list of official
		       HTTP mirror sites that you received in step 3.
d590 2
a591 2
		For instructions on how to complete the installation via
		HTTP, see the section named "Common URL installations" below.-:})dnl
d597 9
d621 1
a621 1
		information before starting the extraction.-:})dnl
d627 3
a629 8
		be "cd0".  Next you will be asked which partition on the
		CD-ROM the distribution is to be loaded from.  This is
		normally partition "a".

		Next you will have to identify the file system type that
		has been used to create the distribution on the CD-ROM,
		this can be either FFS or ISO CD9660.  The OpenBSD CD-ROM
		distribution uses the CD9660 format.
d635 2
a636 3
		For instructions on how to complete the installation from
		the CD-ROM distribution, see the section named "Common
		file system installations" below.-:})dnl
d658 2
a659 3
		For instructions on how to complete the installation from
		the CD-ROM distribution, see the section named "Common
		file system installations" below.-:})dnl
d696 22
a717 53
		For instructions on how to complete the installation from
		a local disk partition, see the next section.-:})dnl
dnl
dnl For arches where you can install from NFS, $1 should be set to "NFS",
dnl otherwise there should be no parameter.
define({:-OpenBSDCommonFS-:},
{:-	Common file system installations:
		The following instructions are common to installations
		from mounted disk partitions{:--:}ifelse(X$1,XNFS,{:-, NFS mounted directories and
		CD-ROMs-:},{:- and CD-ROMs-:}).

		A list of available distribution sets will be listed.
		You may individually select distribution sets to install
		or enter `all' to install all of the sets (which is what
		most users will want to do).  You may also enter `list'
		to get a file list or `done' when you are done selecting
		distribution sets.  You may also use wildcards in place of
		a file name, e.g. `*.tgz' or even `base*|comp*'.  It is
		also possible to enter an arbitrary filename and have it
		treated as a file set.

		Once you have selected the file sets you want to install
		and entered `done' you will be prompted to verify that
		you really do want to extract file sets.  Assuming you
		acquiesce, the files will begin to extract.  If not, you
		will be given the option of installing sets via one of
		the other install methods.-:})dnl
dnl
define({:-OpenBSDCommonURL-:},
{:-	Common URL installations:
		Once you have entered the required information, the
		install program will fetch a file list and present
		a list of all the distribution sets that were found
		in the specified directory.  (If no valid sets were found,
		you will be notified and given the option of unpacking
		any gzipped tar files found or getting a file list if
		none were found.)

		At this point you may individually select distribution
		sets to install or enter `all' to install all of the
		sets (which is what most users will want to do).  You
		may also enter `list' to get a file list or `done' when
		you are done selecting distribution sets.  You may also
		use wildcards in place of a file name, e.g. `*.tgz' or
		even `base*|comp*'.  It is also possible to enter an
		arbitrary filename and have it treated as a file set.

		Once you have selected the file sets you want to install
		and entered `done' you will be prompted to verify that
		you really do want to download and install the files.
		Assuming you acquiesce, the files will begin to download
		and unpack.  If not, you will be given the option of
		installing sets via one of the other install methods.-:})dnl
a719 2
dnl This is split in multiple parts because not all platforms will
dnl suggest setting the aperture sysctl or configuring a serial console.
a720 1
dnl (the first blank line is intentional)
d722 16
a737 27
{:-
	When all the selected distribution sets have been extracted, you
	will be asked whether you want to start shhd(8) by default,
	as well as your ntp server (ntpd(8) will not be started by
	default if you don't provide a server).-:})dnl
dnl
define({:-OpenBSDInstallAperture-:},
{:-	You will next be asked whether you intend to run the X Window
	System on your machine.  The install program needs to know
	this, to change a configuration setting controlling whether
	the X server will be able to access the xf86(4) driver; it
	is not necessary to answer `y' to this question if you only
	intend to run X client programs on a remote display.-:})dnl
dnl
define({:-OpenBSDInstallConsole-:},
{:-	By default, the OpenBSD/MACHINE installation will only start
	terminals on the primary display device.

	If you are installing using a serial console, the installer
	program will ask you whether you want to also enable an
	additional terminal on that line, and will allow you to select
	the line speed.-:})dnl
dnl
define({:-OpenBSDInstallWrapupPart2-:},
{:-	The last thing you'll need to configure is the time zone your
	system will be using.  For this work properly, it is expected
	that you have installed at least the "base{:--:}OSrev", "etc{:--:}OSrev",
d739 17
a755 4

	The installer program will the proceed to create all the device
	nodes needed by the installed system, and will unmount the
	file systems.-:})dnl
d757 2
a758 2
define({:-OpenBSDCongratulations-:},
{:-Congratulations, you have successfully installed OpenBSD OSREV.  When you
d803 3
d965 2
a966 2
dnl on the tape. Then at least one, and up to three arguments list the first
dnl files to be put on the tape to make it bootable. Each filename can be
@


1.82
log
@we now ship SHA256 files, not MD5 files
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.81 2008/10/16 00:05:09 krw Exp $
d820 2
a821 2
	image as described above.  If possible use the md5(1) command to
	verify the checksums of the images vs. the values in the MD5 file
@


1.81
log
@Clarify and modernize some language about disk layout and the interactive
label editor. Prompted by comments from Rad Ricka.

Suggestions from jmc@@, deraadt@@ and Rad.

ok deraadt@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.80 2008/08/06 20:50:48 miod Exp $
d54 3
a56 2
	MD5		Output of the md5(1) program, usable for verification
			of the correctness of downloaded files.')dnl
@


1.80
log
@In the upgrade blurb, mention xetc won't be selectable as well, and mention
sysmerge can help you upgrade etc and xetc afterwards.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.79 2008/08/05 22:57:59 miod Exp $
d346 2
a347 2
	disks of that type it can install on, and ask you which it
	should use.  Reply with the name of your disk.-:})dnl
d354 18
a371 15
	file systems must be set up.  The installation script will
	invoke an interactive editor allowing you to do this.  Note
	that partition 'c' inside this disk label should ALWAYS
	reflect the entire disk, including any non-OpenBSD portions.
	If you are labeling a new disk, you will probably start
	out with an 'a' partition that spans the disk.  In this
	case you should delete 'a' before adding new partitions.
	The root file system should be in partition 'a', and swap
	is usually in partition 'b'.$1

	It is recommended that you create separate partitions for /usr,
	/tmp, and /var, and if you have room for it, one for /home.  In
	doing this, remember to skip 'c', leaving it as type "unused".
	For help in the disk label editor, enter '?' or 'M' to view the
	manual page (see the info on the ``-E'' flag).-:})dnl
d376 5
a380 2
{:-	The swap partition (usually 'b') should have a type of "swap", all
	other native OpenBSD partitions should have a type of "4.2BSD".
d382 5
a386 15
	The install program will now label your disk and ask which file
	systems should be created on which partitions.  It will auto-
	matically select the 'a' partition to be the root file system.
	Next it will ask for which disk and partition you want a file
	system created on.  This will be the same as the disk name (e.g.
	"$1") with the letter identifying the partition (e.g. "d")
	appended (e.g. "$1d").  Then it will ask where this partition is
	to be mounted, e.g. /usr.  This process will be repeated until
	you enter "done".

	At this point you will be asked to confirm that the file system
	information you have entered is correct, and given an opportunity
	to change the file system table.  Next it will create the new file
	systems as specified, OVERWRITING ANY EXISTING DATA.  This is the
	point of no return.-:})dnl
@


1.79
log
@Better description of the installation steps:
- document questions in proper order: hostname before network configuration,
  DNS only if network is configured, sshd and ntpd, aperture only on
  machines which need it, serial console only on machines which need it.
  This is done by splitting the end of OpenBSDCommonURL in various
  macros, OpenBSDInstallWrapup, OpenBSDInstallAperture, OpenBSDInstallConsole
  and OpenBSDInstallWrapupPart2.
- use the above macros when appropriate, OpenBSDInstallWrapup* being
  mandatory on all arches.
- remove serial console configuration blurb on sparc and sparc64, it is
  handled by OpenBSDInstallConsole now.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.78 2008/05/12 22:01:39 miod Exp $
d748 7
a754 6
procedure will not let you pick the ``etc{:--:}OSrev.tgz'' set, so as to
preserve your files in `/etc' which you are likely to have customized
since a previous installation.

However, it is strongly advised that you unpack the etc{:--:}OSrev.tgz set in
a temporary directory and merge changes by hand, since all components of
@


1.78
log
@List socppc as a MACHINE_ARCH=powerpc platform.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.77 2008/03/10 21:25:52 miod Exp $
d319 1
a319 1
dnl second argument is not empty.
d396 12
a407 4
	will give you an opportunity to configure the network.  The network
	configuration you enter (if any) can then be used to do the install
	from another system using HTTP or FTP, and will also be the
	configuration used by the system after the installation is complete.
d410 12
a421 14
	ask you for the name of your system and the DNS domain name to use.
	Note that the host name should be without the domain part, and that
	the domain name should NOT {:-include-:} the host name part.

	Next the system will give you a list of network interfaces you can
	configure.  For each network interface you select to configure, it
	will ask for the IP address to use, the symbolic host name to use,
	the netmask to use, and any interface-specific flags to set.  The
	interface-specific flags are usually used to determine which media
	the network card is to use.  Typically no media flags are required
	as autodetection normally works, but you will be prompted with a
	list of the acceptable media flags, and asked if you want to provide
	any.  In doubt, do not enter any media flags; or you can refer to
	the manual page for your interface for the appropriate flags.
d424 13
a436 8
	gram will ask for a default route and IP address of the primary
	name server to use.  You will also be presented with an opportunity
	to edit the host table.

	At this point you will be allowed to edit the file system table
	that will be used for the remainder of the installation and that
	will be used by the finished system, following which the new file
	systems will be mounted to complete the installation.
d655 9
a663 3
		installing sets via one of the other install methods.


d665 30
a694 5
	will be allowed to select which time zone your system will be
	using, all the device nodes needed by the installed system will
	be created for you, and the file systems will be unmounted.  For
	this to work properly, it is expected that you have installed
	at least the "base{:--:}OSrev", "etc{:--:}OSrev", and "bsd" distribution sets.-:})dnl
@


1.77
log
@Sync sets sizes with release bits.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.76 2007/11/04 01:35:49 krw Exp $
d34 1
@


1.76
log
@Grammer nit ("all ... has been extracted" -> "all ... have been
extracted".  Pointed out by smallm in PR 5622.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.75 2007/08/30 04:21:14 deraadt Exp $
d230 3
a232 3
			as a bootable CD-ROM image, but will require the base and
			X sets be found via another media or network; otherwise
			similar to the bsd.rd image above.-:})dnl
@


1.75
log
@oops; t.stritzky@@teles.de noted that we had not yet documented the
install##.iso files; thanks
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.74 2007/08/01 21:23:23 miod Exp $
d646 1
a646 1
	When all the selected distribution sets has been extracted, you
@


1.74
log
@Retire OpenBSD/cats. Hardware is nice but prone to catch fire, and the firmware
is anything but useful. Nevertheless this was a very good platform to use as
an OpenBSD/*arm* starting point, but nowadays this platform is not necessary
anymore.

Somehow these CATS motherboard are just like AUI hubs, with the difference that,
when my AUI hub caught fire, 10base5 support was not removed from the networking
code.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.73 2007/05/07 17:58:03 miod Exp $
d224 4
d230 3
a232 2
			as a bootable CD-ROM image; otherwise similar to
			the bsd.rd image above.-:})dnl
@


1.73
log
@Typo; jakemsr@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.72 2007/05/04 03:49:18 deraadt Exp $
a24 1
MACHINE,cats,arm,
@


1.72
log
@stop shipping CKSUM files; people can use the MD5 files
(this decreases build time a bit too)
ok todd (and i assume legacy-architecture-miod would not object either)
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.71 2007/03/01 19:24:43 miod Exp $
d132 1
a132 1
		 to C, C++, Objective-F and Fortran are supported.  This set
@


1.71
log
@Your spring jumbo m4-fu. This time:
- mention comp contains an objective-C compiler too.
- rewrite InstallPrelude so that it will only output the ``know your drive
  geometry'' blurb if asked to, and for a specified disk type. Use it for
  non-IDE and non-SCSI disks only, otherwise the kernel is good enough to
  do the job without the users' help.
- similarily, adapt BootMsgs to make the second part of the geometry blurb
  optional, and to accept up to three disk types. Use this to report better
  disk names (i.e. no point saying an scsi disk would show up as sd0 on
  platforms which can't have scsi disks, or won't be able to boot from them).
- in InstallPart4, drop the part about block and fragment sizes in
  disklabel. The defaults are good, and you won't get to change them unless
  you switched to expert mode.
- the default answer to ``wanna get the ftp mirror list, unzel?'' is ``no'',
  so pressing enter to get it is not enough anymore (-:
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.70 2007/02/28 22:30:02 miod Exp $
d54 2
a55 3
	CKSUM, MD5	Output of the cksum(1) and md5(1) programs,
			usable for verification of the correctness of
			downloaded files.')dnl
d775 3
a777 3
	image as described above.  If possible use the cksum(1) or md5(1)
	commands to verify the checksums of the images vs. the values in
	the CKSUM or MD5 files on the mirror site.
@


1.70
log
@Better OpenBSD/landisk installation notes, 1/2.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.69 2006/06/06 17:49:20 miod Exp $
d119 4
a122 4
{:-	base{:--:}OSrev	 The OpenBSD/MACHINE OSREV base binary distribution.  You
		 MUST install this distribution set.  It contains the
		 base OpenBSD utilities that are necessary for the
		 system to run and be minimally functional.
d132 9
a140 9
{:-	comp{:--:}OSrev	 The OpenBSD/MACHINE Compiler tools.  All of the tools
		 relating to C, C++, and fortran are supported. This set
		 includes the system {:-include-:} files (/usr/{:-include-:}), the
		 linker, the compiler tool chain, and the various system
		 libraries{:--:}ifelse(X$3,Xshared,{:- (except the shared libraries, which are
		 included as part of the base set).-:},.)
		 This set also includes the manual pages for all
		 of the utilities it contains, as well as the system
		 call and library manual pages.showsize($1,$2)-:})dnl
d151 1
a151 1
		 upgrading. (If you are upgrading, it's recommended that
d168 2
a169 2
{:-	man{:--:}OSrev	 This set includes all of the manual pages for the
		 binaries and other software contained in the base set.
d178 2
a179 2
{:-	misc{:--:}OSrev	 This set includes the system dictionaries (which are
		 rather large), and the typesettable document set.showsize($1,$2)-:})dnl
d195 1
a195 1
		 that reside in /etc. It's the equivalent of etc{:--:}OSrev for X.showsize($1,$2)-:})dnl
d202 2
a203 2
{:-	xshare{:--:}OSrev This set includes all text files equivalent between
		 all architectures.showsize($1,$2)-:})dnl
d274 5
a278 3
dnl Short or longer installation introduction. The longer version warns
dnl about disk geometry hell.
define({:-OpenBSDInstallShortPrelude-:},
d282 1
a282 4
shouldn't be too much trouble.-:})dnl
dnl
define({:-OpenBSDInstallPrelude-:},
{:-OpenBSDInstallShortPrelude
d284 10
a293 10
Before you begin, you should know the geometry of your hard disk, i.e.
the sector size (note that sector sizes other than 512 bytes are not
currently supported), the number of sectors per track, the number of
tracks per cylinder (also known as the number of heads), and the
number of cylinders on the disk.  The OpenBSD kernel will try to
discover these parameters on its own, and if it can it will print them
at boot time.  If possible, you should use the parameters it prints.
(You might not be able to because you're sharing your disk with
another operating system, or because your disk is old enough that the
kernel can't figure out its geometry.)-:})dnl
d311 5
a315 2
dnl OpenBSDBootMsgs
dnl Describes the boot of the ramdisk.
d319 12
a330 9
	to determine your disk's name and geometry.  Its name will
	be something like "sd0" or "wd0" and the geometry will be
	printed on a line that begins with its name.  As mentioned
	above, you will need your disk's geometry when creating
	OpenBSD partitions.  You will also need to know the device
	name to tell the install tools what disk to install on. If
	you cannot read the messages as they scroll by, do not
	worry -- you can get at this information later inside the
	install program.-:})dnl
d332 1
a332 2
dnl OpenBSDInstallPart3(alternate common disk type description)
dnl Describes the beginning of the bsd.rd operation
d343 1
a343 3
	should use.  The name of the disk is typically "sd0" for
	SCSI drives$2.
	Reply with the name of your disk.-:})dnl
a370 2
	Block and fragment sizes are usually 8192 and 1024 bytes, but can
	also be 4096 and 512 or even 16384 and 2048 bytes.
d405 1
a405 1
	the netmask to use, and any interface-specific flags to set. The
d452 2
a453 2
		       If you don't know, just hit return when
		       asked if you want to see a list of such hosts.
d476 2
a477 2
		       If you don't know, just hit return when
		       asked if you want to see a list of such hosts.
d684 1
a684 1
immediately previous release. The upgrade process will also work with older
d742 1
a742 1
	images. If you can access the distribution from the CD-ROM under
d744 1
a744 1
	directory. Otherwise, you will have to download them from one of
d746 1
a746 1
	browser. In either case, take care to do "binary" transfers, since
d895 1
a895 1
        Note that, by default, this script creates a bootable tape. If
d960 1
a960 1
{:-Now you must populate the `/dev' directory for your client. If the server
d969 3
a971 3
There will be error messages about unknown users and groups. These errors are
inconsequential for the purpose of installing OpenBSD. However, you may
want to correct them if you plan to use the diskless setup regularly. In that
@


1.69
log
@armish tweaks
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.68 2006/05/09 21:17:13 miod Exp $
d27 2
a29 1
MACHINE,luna88k,m88k,
d153 2
a154 2
		 configuration files by hand; see the section named "Upgrading
		 a previously-installed OpenBSD System" below.)-:},.)showsize($1,$2)-:})dnl
@


1.68
log
@Administrative changes for aviion, ok deraadt@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.67 2005/11/30 12:31:43 tom Exp $
d23 1
@


1.67
log
@Re-word section about initial mail message.

ok miod@@, jmc@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.66 2005/08/30 17:05:28 miod Exp $
d23 1
@


1.66
log
@Update sets size, and a few tweaks; also size of files smaller than 1MB
get printed in KB now; ok mickey@@ deraadt@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.65 2005/03/21 22:31:06 miod Exp $
d650 8
a657 6
You should create yourself an account and protect it and the "root" account
with good passwords.  You should have got a mail from the install program we
recommend you to read, it contains answers to basic questions you might
have about OpenBSD (like setting up your system, installing packages, getting
more information about OpenBSD, sending in your dmesg output and more).
This you can do by running
@


1.65
log
@Sync tape install details with the install script, mostly a numbering
change for files on the tape.

Prompted by and discussed with claudio@@.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.64 2005/01/15 17:52:07 miod Exp $
d73 11
d96 1
a96 2
		 [ eval($1/1024/1024).eval($1/1024*10/1024%10) MB gzipped, dnl
eval($2/1024/1024).eval($2/1024*10/1024%10) MB uncompressed ]-:})-:})dnl
@


1.64
log
@Zaurus tweaks.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.63 2004/08/26 20:08:35 miod Exp $
d486 4
a489 5
		Next you will have to provide the file number of the set
		that is to be extracted.  Note that the file number starts
		at 1, which is the first file written to the tape{:--:}ifelse(X$1,X,,{:-, unless
		you have created a bootable tape, in which case the file
		number starts at $1-:}).
@


1.63
log
@MACHINE_ARCH for sgi.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.62 2004/08/10 19:34:38 miod Exp $
d33 1
@


1.62
log
@Describe bsd.mp
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.61 2004/06/22 00:42:11 matthieu Exp $
d31 1
@


1.61
log
@introduce the new xetc set. ok deraadt@@, miod@@, krw@@.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.60 2004/06/07 11:14:14 mickey Exp $
d238 5
@


1.60
log
@provide sets sizes in raw bytecounts and then
uniformly compute the MB numbers in m4.common;
reduce average calculator uptime.
miod@@ ok
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.59 2004/05/16 21:52:20 miod Exp $
d172 9
a180 1
		 programs, headers, libraries, and configuration files.showsize($1,$2)-:})dnl
@


1.59
log
@OpenBSD/luna88k installation notes, take one. Still needs work.
ok aoyama@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.58 2004/05/03 15:18:18 drahn Exp $
d83 2
a84 1
		 [ $1 MB gzipped, $2 MB uncompressed ]-:})-:})dnl
@


1.58
log
@Remove OpenBSD/pegaos, this has been announced before but delayed until
the tree was stable. No point in code supporting a company which screws
its employees being in the OpenBSD tree.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.56 2004/03/25 08:38:51 tom Exp $
d26 1
@


1.57
log
@Fold the contents section, no real text change. ok deraadt@@
@
text
@a29 1
MACHINE,pegasos,powerpc,
@


1.56
log
@Various typos

ok miod@@ deraadt@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.55 2004/03/17 14:20:56 jmc Exp $
a45 1
		INSTALL.MACHINE	Installation notes; this file.
d47 5
a51 3
		CKSUM, MD5	Output of the cksum(1) and md5(1) programs,
				usable for verification of the correctness
				of downloaded files.')dnl
d199 2
a200 2
{:-		floppy{:--:}OSrev.fs	The standard MACHINE boot and installation
				floppy; see below.-:})dnl
d203 3
a205 3
{:-		cd{:--:}OSrev.iso	A miniroot filesystem image suitable to be used
				as a bootable CD-ROM image; otherwise similar
				to the bsd.rd image above.-:})dnl
d224 1
a224 2
{:-		*.tgz		MACHINE binary distribution sets;
				see below.-:})dnl
d227 2
a228 3
{:-		bsd		A stock GENERIC MACHINE kernel which
				will be installed on your system
				during the install.-:})dnl
d231 4
a234 4
{:-		bsd.rd		A compressed RAMDISK kernel; the embedded
				filesystem contains the installation tools.
				Used for simple installation from a pre-
				existing system.-:})dnl
d237 3
a239 4
{:-		miniroot{:--:}OSrev.fs	A miniroot filesystem image to be used
				if you for some reason can't or don't
				want to use the ramdisk installation
				method.-:})dnl
@


1.55
log
@fix a spacing issue found by deraadt@@ and a separate typo from miod@@;
ok miod@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.54 2004/03/17 09:25:09 jmc Exp $
d939 1
a939 1
bourne shell.
@


1.54
log
@grammar, consistency fixes, and typos;
ok miod@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.53 2004/03/16 08:24:59 jmc Exp $
d48 2
a49 2
		CKSUM		Output of the cksum(1) and md5(1) programs
		MD5		usable for verification of the correctness
@


1.53
log
@typos and consistency fixes;
ok miod@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.52 2004/03/08 22:32:06 miod Exp $
d136 1
a136 1
		 configuration files by hand, see the section named "Upgrading
d214 1
a214 1
	ntrw.exe or `dd', as described later in this document.
d332 1
a332 1
	/tmp and /var, and if you have room for it, one for /home.  In
d378 1
a378 1
	the netmask to use and any interface-specific flags to set. The
d386 1
a386 1
	After all network interfaces have been configured the install pro-
d410 1
a410 1
		       ftp proxy (squid, CERN ftp, Apache 1.2 or higher).
d412 1
a412 1
		       firewall that blocks outgoing ftp (assuming you
d414 1
a414 1
		    2) Do you need to use active mode ftp?  By default,
d418 2
a419 2
		       this option if you are connecting to a buggy ftp
		       daemon that implements passive ftp incorrectly.
d421 1
a421 1
		       ftp if you are using a proxy.
d423 1
a423 1
		       DNS earlier in the install) of an ftp server
d427 1
a427 1
		    4) The ftp directory holding the distribution sets.
d430 1
a430 1
		    5) The login and password for the ftp account.
d432 1
a432 1
		       non-anonymous ftp.
d435 1
a435 1
		ftp, see the section named "Common URL installations" below.-:})dnl
d442 1
a442 1
		       http proxy (squid, CERN ftp, Apache 1.2 or higher).
d444 1
a444 1
		       firewall that blocks outgoing http connections
d447 1
a447 1
		       DNS earlier in the install) of an http server
d455 1
a455 1
		       http mirror sites that you received in step 3.
d458 1
a458 1
		http, see the section named "Common URL installations" below.-:})dnl
d504 2
a505 2
{:-	To install from a NFS mounted directory:
		When installing from a NFS-mounted directory, you must
d547 1
a547 1
		sets.  This is normally $1"sdN" where N is a number
d549 1
a549 1
		within that disk that holds the distribution, this is a
d563 1
a563 1
		the a local disk partition, see the next section.-:})dnl
d620 1
a620 1
	be created for you and the file systems will be unmounted.  For
d717 1
a717 1
	the OpenBSD ftp or http mirror sites, using an ftp client or a web
d726 1
a726 1
	containing a ffs filesystem, not a MSDOS format diskette.
d941 1
a941 1
There will be error messages about unknown user and groups. These errors are
d943 1
a943 1
want to correct them if you plan to the diskless setup regularly. In that
@


1.52
log
@More typo.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.51 2004/02/27 17:49:14 miod Exp $
d371 1
a371 1
	ask you for a name of your system and the DNS domain name to use.
d386 1
a386 1
	After all network interfaces has been configured the install pro-
d554 1
a554 1
		$2{:--:}install from partitions that has been formatted as the
@


1.51
log
@sync after amd64 MACHINE_ARCH change.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.50 2004/02/14 18:22:45 todd Exp $
d742 1
a742 1
	(i.e  read-only).-:})dnl
@


1.50
log
@add copyright
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.49 2004/02/13 10:59:24 miod Exp $
a21 1
MACHINE,amd64,x86_64,
@


1.49
log
@More MACHINE_ARCH tweaks
@
text
@d2 16
a17 1
dnl	$OpenBSD: m4.common,v 1.48 2004/02/09 13:32:45 todd Exp $
@


1.48
log
@be accurate now that SunOS compat output does not exist in MAKEDEV; ok miod@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.47 2004/02/08 23:11:31 miod Exp $
d7 1
@


1.47
log
@Oops, InstallPart4 would eat its args.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.46 2004/02/07 14:27:10 miod Exp $
d37 3
a39 3
dnl Change the quote.  There were too many `word' situations that would have
dnl to have been changed to ``word''.  The quote gets changed to {:- and -:}.
dnl It can really be anything, but it needs to be unique.
d44 2
a45 2
dnl o base`'OSrev is required because if it appears as baseOSrev the defined
dnl   value OSrev does not get substituted.  Same goes for MACHINE,
d63 2
a64 2
dnl                  - empty 2nd arg, for files where only compressed size is
dnl                    known
d916 14
@


1.46
log
@Add a MACHINE_ARCH entry for cats.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.45 2003/10/31 04:03:15 drahn Exp $
d314 1
a314 1
	is usually in partition 'b'.$4
@


1.45
log
@OpenBSD port for the Pegasos I, pegasosppc.com heavily derived from macppc.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.44 2003/08/11 22:21:15 miod Exp $
d8 1
@


1.44
log
@mvme88k is a half-compound architecture (MACHINE != MACHINE_ARCH) so add
it to the list...
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.43 2003/03/24 11:33:52 miod Exp $
d14 1
@


1.43
log
@Tweak a few texts to cope with the fact that we ship official OpenBSD CD-ROM
and bootable CD-ROM mini images on some platforms, too. Mention such a mini
image for alpha, consistent spelling of CD-ROM, and a few minor updates not
worth mentioning I had lying in my tree.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.42 2003/03/05 00:32:33 miod Exp $
d12 1
@


1.42
log
@Document cd33.iso
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.41 2003/02/15 21:38:21 miod Exp $
d182 5
a186 4
define({:-OpenBSDcdrom-:},
{:-		cdrom{:--:}OSrev.fs	The MACHINE boot and installation
				2.88mb floppy image that contains almost all
				OpenBSD drivers; see below.-:})dnl
a218 5
define({:-OpenBSDcd-:},
{:-		cd{:--:}OSrev.iso	A miniroot filesystem image suitable to be used
				as a bootable CD image; otherwise similar
				to the bsd.rd image above.-:})dnl
dnl
d474 1
a474 1
		this can be either FFS or ISO CD9660.  The OpenBSD CD
d478 2
a479 2
		directory on the CD which holds the distribution, for the
		MACHINE this is "OSREV/MACHINE".
@


1.41
log
@No more traces of the word in the hppa notes.
Until upgrades are available.
Oops, I said it!
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.40 2002/12/30 11:12:58 miod Exp $
d217 5
@


1.40
log
@Do not mention NFS as a possible tarballs source when the installation media
does not support NFS mounts.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.39 2002/11/07 22:38:36 mickey Exp $
d114 1
a114 1
		 This set MUST be installed if you are installing the
d116 1
a116 1
		 upgrading.{:--:}ifelse(X$3,X,{:-(If you are upgrading, it's recommended that
d119 1
a119 1
		 a previously-installed OpenBSD System" below.)-:})showsize($1,$2)-:})dnl
@


1.39
log
@mention onther windows nt flavours wrt using proper raw floppy writing utility; form DJ Gregor via pr2851
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.38 2002/10/07 19:31:01 miod Exp $
d546 2
d551 2
a552 2
		from local disk partitions, NFS mounted directories and
		CD-ROMs.
@


1.38
log
@Devise the appropriate MACHINE_ARCH from MACHINE, rather than requiring
the Makefile to provide this value. Makes the generation of all the
installation notes easier.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.37 2002/07/25 19:29:29 miod Exp $
d714 5
a718 4
	Note that if you are using NT to write the images to disk, you
	will need to use ntrw.exe instead.  It is also available in the
	"tools" directory.  Grab it and run in with the correct
	arguments like this "ntrw <image> <drive>:"
@


1.37
log
@Due to changes having already occured, and more being cooked at this
very moment, OpenBSD/sparc installation media will not allow upgrades
to 3.2.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.36 2002/07/04 18:06:45 miod Exp $
d4 11
@


1.36
log
@Add a few scary notes about the upgrade process, and advise people to
backup their data and reinstall when the release gap is too big.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.35 2002/06/09 05:53:54 todd Exp $
d851 1
a851 1
dnl
d880 1
a880 1
	step in the installation or upgrade process.  If you're
d884 1
a884 1
	upgrading.-:})dnl
@


1.35
log
@knf
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.34 2002/04/14 02:35:27 miod Exp $
d623 7
a629 1
{:-To upgrade OpenBSD OSREV from a previous version, start with the general
@


1.34
log
@Advise people to read root.mail from mail via "more 1" instead of "1"; from
deraadt@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.33 2002/04/09 01:22:19 miod Exp $
d56 1
a56 1
dnl 
d247 1
a247 1
default answer, it will be displayed in brackets ("[]") after the  
d506 1
a506 1
dnl - OpenBSDDISKInstall(,{:-only -:})  
d595 2
a596 2
You should create yourself an account and protect it and the "root" account 
with good passwords.  You should have got a mail from the install program we 
d658 1
a658 1
sites over the internet, however you must consider the speed and 
d676 6
a681 6
	images. If you can access the distribution from the CD-ROM under 
	DOS, you will find the bootable disks in the OSREV/MACHINE 
	directory. Otherwise, you will have to download them from one of 
	the OpenBSD ftp or http mirror sites, using an ftp client or a web 
	browser. In either case, take care to do "binary" transfers, since 
	these are images files and any DOS cr/lf translations or control/z 
d695 1
a695 1
	errors. 
d699 1
a699 1
	"tools" directory.  Grab it and run in with the correct 
d709 2
a710 2
	image as described above.  If possible use the cksum(1) or md5(1) 
	commands to verify the checksums of the images vs. the values in 
d754 2
a755 2
	make a tape containing the files. 
        
d758 2
a759 2
	"/tmp/maketape". 
        
d766 1
a766 1
	done    
d798 2
a799 2
	make a tape containing the files. 
        
d802 2
a803 2
	"/tmp/maketape". 
        
d818 1
a818 1
	done    
@


1.33
log
@Since the installation procedure will list all the supported media flags
via ifconfig -m, there is no need to suggest canonical media flags on
some arches, especially since the end user might have a different
interface with different flags; instead, be more cosy and mention that
looking at the manual page for the interface might be helpful for
desperate cases.

Thus, merge the OpenBSDInstallNet and OpenBSDInstallNet2 macros, and
remove thde in-between text for the arches that had such a paragraph.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.32 2002/03/30 22:52:55 miod Exp $
d604 1
a604 1
and then just enter "1" to get the first message.  You quit mail by
@


1.32
log
@Factorize more common texts from the ramdisk operation.
No text changes except for harmonization, and the blurb about network
interface flags has bene slightly changed for some arches.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.31 2002/03/30 19:33:17 miod Exp $
d331 2
a332 2
dnl OpenBSDInstallNet(has media settings information following)
dnl Setting up the network, part 1
d350 7
a356 7
	the network card is to use.ifelse(X$1,X,{:- Typically no media flags are required as
	autodetect normally works.-:})-:})dnl
dnl
dnl OpenBSDInstallNet2(other installation sources,hasfloppy)
dnl Setting up the network, part 2 (after the media flags)
define({:-OpenBSDInstallNet2-:},
{:-	After all network interfaces has been configured the install pro-
@


1.31
log
@Typos du jour.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.30 2002/03/28 01:23:44 miod Exp $
d269 102
@


1.30
log
@Remove lies from the description of the misc set.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.29 2002/03/23 23:58:48 miod Exp $
d644 1
a644 1
{:-Create an installation tape:
d689 1
a689 1
{:-Create an (optionally bootable) installation tape:
@


1.29
log
@Hide upgrade stuff from the installation notes until sparc64 systems can
be upgraded to 3.2.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.28 2001/12/02 00:15:42 miod Exp $
d133 1
a133 3
		 rather large), the typesettable document set, and
		 man pages for other architectures which happen to be
		 installed from the source tree by default.showsize($1,$2)-:})dnl
d141 1
a141 1
		 programs, headers, libraries, configuration files.showsize($1,$2)-:})dnl
@


1.28
log
@Add a few useful details to the mac68k installation notes, based on feedback
from "Dave C." <aq820@@hwcn.org>
Also, sync supported hardware list with mac68k.html..
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.27 2001/10/14 20:59:33 miod Exp $
d97 1
a97 1
dnl OpenBSDetc( compressed size, uncompressed size )
d105 1
a105 1
		 upgrading.  (If you are upgrading, it's recommended that
d108 1
a108 1
		 a previously-installed OpenBSD System" below.)showsize($1,$2)-:})dnl
d178 1
a178 1
dnl OpenBSDfloppydesc(number of floppies, Article, optional plural 's')
d181 1
a181 1
dnl Use as: OpenBSDfloppydesc(single, The) or OpenBSDfloppydesc(three, Each, s)
@


1.27
log
@When creating floppies under Solaris, you can avoid killing vold if you
use the magic device filename.
Pointed out by matthieu@@.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.26 2001/10/14 18:27:57 miod Exp $
d107 2
a108 1
		 configuration files by hand.)showsize($1,$2)-:})dnl
@


1.26
log
@Solaris friendly update!
- Provide typical Solaris command lines for creating floppies, dumping
miniroots to disks, and filling tapes.
- Make the tape generation script more versatile.
- When SunOS add_client(8) is mentioned, mention Solaris share(1M) as well.
- Add ``Installing from Solaris'' instructions for sparc and sparc64 ports
- While there, slight fixes to the ``Installing from SunOS'' sections on
  sparc and sun3.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.25 2001/10/10 23:58:27 miod Exp $
d617 3
a619 2
	but you may need to turn off the volume management daemon, vold(1M),
	before attempting the copy.
@


1.25
log
@Get rid of the boasting about compilers.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.24 2001/10/10 22:15:03 miod Exp $
d90 2
a91 2
		libraries{:--:}ifelse(X$3,Xshared,{:- (except the shared
		 libraries, which are included as part of the base set).-:},.)
d184 2
a185 2
	The $1 floppy image$3 can be copied to a floppy using rawrite.exe
	or `dd', as described later in this document.
d605 1
a605 1
{:-Creating a bootable floppy disk using SunOS or other Un*x-like system:
d613 1
a613 2
	Under SunOS, the command would be:

d615 4
d620 1
a620 1
	If you are using something other than SunOS, you may have to adapt
d659 2
a660 2
	tape=/dev/nrst0
	mt -f ${tape} rewind
d663 1
a663 1
		dd if=${file}OSrev.tgz of=${tape} obs=8k conv=sync
d665 2
a666 2
	tar cf ${tape} bsd
	mt -f ${tape} offline
d675 5
a679 1
	name and other requirements may change.
d703 2
a704 2
	tape=/dev/nrst0
	mt -f ${tape} rewind
d707 2
a708 2
		dd of=${tape} if=$2
ifelse(X$3,X,,{:-		dd of=${tape} if=$3
d710 1
a710 1
ifelse(X$4,X,,{:-		dd of=${tape} if=$4
d715 1
a715 1
		dd if=${file}OSrev.tgz of=${tape} obs=8k conv=sync
d717 2
a718 2
	tar cf ${tape} bsd
	mt -f ${tape} offline
d735 5
a739 1
	name and other requirements may change.
@


1.24
log
@Provide the ability to insert extra notes in the Xserv.tgz set description.
Will be needed shortly.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.23 2001/10/07 21:50:50 miod Exp $
d87 4
a90 4
		 relating to C, C++, and FORTRAN (yes, there are two!) are
		 supported.  This set includes the system {:-include-:} files
		 (/usr/{:-include-:}), the linker, the compiler tool chain,
		 and the various system libraries{:--:}ifelse(X$3,Xshared,{:- (except the shared
@


1.23
log
@- remove xlink set description, we don't have it nowadays.
- showsize now always takes MB sizes as arguments, and prints the unit
  by itself.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.22 2001/10/06 20:38:16 miod Exp $
d160 1
a160 1
dnl OpenBSDxserv( compressed size, uncompressed size )
d164 1
a164 1
{:-	xserv{:--:}OSrev  This set includes all of the X servers.showsize($1,$2)-:})dnl
@


1.22
log
@Note to self: save your file before running cvs diff, for your diff to
be complete...
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.21 2001/10/06 19:24:46 miod Exp $
d53 1
a53 1
		 [ $1 gzipped, $2 uncompressed ]-:})-:})dnl
a164 7
dnl
dnl
dnl OpenBSDxlink( compressed size, uncompressed size )
dnl Describes xlinkXX.tgz.
dnl
define({:-OpenBSDxlink-:},
{:-	xlink{:--:}OSrev  This set includes the X server link kit.showsize($1,$2)-:})dnl
@


1.21
log
@- add more macros, for common texts usually found in arch/xfer.
- unobfuscate the tape installation notes - no need to tell the user
  ``if your tape was bootable, do this'' on arches where you can't boot
  from tape.
- in the upgrade instructions, tell people it's better to upgrade all their
  sets and not just base; and strongly advise them to merge etc asap.
  People upgrading to 3.0 and having trouble with, say, sendmail will
  have no excuse.
- add more comments to explain this whole mess.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.20 2001/10/02 23:03:04 miod Exp $
d352 1
a352 1
		number starts at 3-:}).
@


1.20
log
@Do not hardcode the ability to boot off a miniroot in the canonical
upgrade instructions. This will be needed for the i386 updates.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.19 2001/10/02 20:08:46 miod Exp $
d8 2
a9 1
dnl  Everybody looks the same on these (or should if they don't)
a28 1
dnl
d37 4
d58 1
d69 2
d76 3
a78 3
		 system to run and be minimally functional.ifelse(X$3,Xshared,{:-
		 It includes shared library support, and excludes
		 everything described below.-:})showsize($1,$2)-:})dnl
d82 2
d98 1
d111 1
d118 1
d128 1
d138 1
d146 1
d154 1
d161 1
d168 1
d174 1
a174 1
dnl floppy and bootable cdrom stuff
d186 1
d198 1
a198 1
dnl misc
d222 2
a223 1
dnl  Various Install Instructions
d225 2
d247 3
d263 2
d278 1
d336 2
d350 1
a350 1
		at 1, which is the first file written to the tape, unless
d352 1
a352 1
		number starts at 3.
d523 2
a524 1
dnl Upgrade instructions
a526 2
dnl Note the spacing used above.  It is crucial to keep words from running
dnl together in the actual document.
d538 248
a785 2
new system in, and also preserve files in `/etc' which you are likely to
have customized since a previous installation.-:})dnl
@


1.19
log
@More shared texts. Basically let modern arches with good hardware get
rid of the ``you'd better know your disk geometry, serial number, date
of manufacture, weight and temperature before installing, pal'' note.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.18 2001/10/02 00:36:39 miod Exp $
d495 1
a495 1
dnl OpenBSDUpgrade({:- or <list of additional boot methods>-:})dnl
d503 1
a503 1
Boot from the miniroot$1.
@


1.18
log
@Rework the floppy and miniroot description:
- try to keep description information together, with no duplicate
  circumlocutions
- arches which have several floppies shouldn't say there is THE floppy,
  then THE floppy, and once more THE floppy. Change plural accordingly for
  the general description of earch floppy image possibilities, if more
  than one.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.17 2001/09/24 20:13:22 miod Exp $
d205 1
a205 1
define({:-OpenBSDInstallPrelude-:},
d209 4
a212 1
shouldn't be too much trouble.
@


1.17
log
@Why make things simple when you can make them overcomplicated, etc. Doh.
Much cleaner this way...
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.15 2001/09/11 06:06:15 fgsch Exp $
a7 11
dnl If both the 1st and the 2nd argument exist, show the sizes.
dnl Otherwise, evaluate to NULL.
dnl
dnl XXX fix to allow - empty 1st arg, for files uncompressed
dnl                  - empty 2nd arg, for files where only compressed size is
dnl                    known
dnl
define(`showsize',`ifelse(X$1,X,,X$2,X,,X,X,{:-
		 [ $1 gzipped, $2 uncompressed ]-:})')dnl
dnl
dnl
d36 14
a49 2
dnl o showsize() must not be on a new line.  It creates its own new line if
dnl   there are sizes to display, otherwise, evaluates to NULL
d166 3
d170 1
a170 11
{:-In summary, there is one MACHINE floppy image called "floppy{:--:}OSrev.fs" (which
you can copy to a floppy using rawrite.exe or `dd'; as described later
in this document).  This is a bootable install floppy which can be 
used both to install and to upgrade OpenBSD to the current version.   
It is also useful for maintenance and disaster recovery.

Bootable installation/upgrade floppy:

	This disk contains a file system, is bootable, and has   
	enough utilities on board to prepare your hard disk drive
	for OpenBSD and to install the OpenBSD distribution.
d172 5
a176 2
	It also holds the utilities needed in order to upgrade a
	system to the current version of OpenBSD.-:})dnl
@


1.16
log
@Some tweaks:
+ removeOpenBSDfloppyB macro, as i386 and alpha need different descriptions
  for it.
+ OpenBSDbase and OpenBSDcomp take an optional first parameter to tell if
  the architecture has shared libraries or not. If it has no shared
  libraries, don't mention them in the descriptions.
@
text
@d62 1
a62 1
dnl OpenBSDbase( compressed size, uncompressed size )
d68 3
a70 3
		 system to run and be minimally functional.
		 ifelse(X$1,Xshared,{:-It includes shared library support, and excludes
		 everything described below.showsize($2,$3)-:},showsize($1,$2))-:})dnl
d73 1
a73 1
dnl OpenBSDcomp( compressed size, uncompressed size )
d80 1
a80 1
		 and the various system libraries{:--:}ifelse(X$1,Xshared,{:- (except the shared
d84 1
a84 1
		 call and library manual pages.ifelse(X$1,Xshared,showsize($2,$3),showsize($1.$2))-:})dnl
@


1.15
log
@remove acd references; millert@@ ok.
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.14 2001/08/22 18:27:42 miod Exp $
d13 1
a13 1
dnl                    known (aka pc532)
d68 3
a70 3
		 system to run and be minimally functional.  It
		 includes shared library support, and excludes
		 everything described below.showsize($1,$2)-:})dnl
d80 3
a82 3
		 and the various system libraries (except the shared
		 libraries, which are included as part of the base
		 set).  This set also includes the manual pages for all
d84 1
a84 1
		 call and library manual pages.showsize($1,$2)-:})dnl
a159 9
define({:-OpenBSDfloppyB-:},
{:-		floppyB{:--:}OSrev.fs	The MACHINE boot and installation floppy;
				this one features all the drivers not available
				in floppy{:--:}OSrev.fs, such as SCSI, RAID, gigabit
				ethernet, and such; see below.-:})dnl
define({:-OpenBSDfloppyC-:},
{:-		floppyC{:--:}OSrev.fs	The MACHINE boot and installation floppy;
				this one features most of the cardbus and
				pcmcia drivers; see below.-:})dnl
d170 1
a170 1
It is also useful for maintenance and disaster recovery.  $1
@


1.14
log
@Summer distribution notes cleanup: change the DistributionDescription
macro to take the number of sets as argument; this will help us correct
the i386, mvme68k, sun3 and vax installation notes...
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.13 2001/05/02 22:18:16 miod Exp $
d341 3
a343 3
		be either "cd0" or "acd0".  Next you will be asked which
		partition on the CD-ROM the distribution is to be loaded
		from.  This is normally partition "a".
@


1.13
log
@Correctly number the items in the ``installing via HTTP'' instructions;
from Mike Pechkin <mpech@@prosoft.org.lv>
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.12 2001/04/24 23:04:21 miod Exp $
a32 10
dnl 
dnl XXX Fix this for i386 vs rest 'ten binary' is not right for i386
define(`DistributionDescription',
`The OpenBSD/MACHINE binary distribution sets contain the binaries which
comprise the OpenBSD OSREV release for MACHINE systems.  There are ten binary
distribution sets.  The binary distribution sets can be found in
the "MACHINE" subdirectory of the OpenBSD OSREV distribution tree,
and are as follows:')dnl
dnl
dnl
d49 11
@


1.12
log
@Update floppy disk descriptions.
Add a macro to document floppyC.
Add a macro to document generic upgrade instructions.
Fix a few typos.

ok fries@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.11 2001/03/28 21:11:50 miod Exp $
d302 1
a302 1
		    3) The IP address (or hostname if you enabled
d307 1
a307 1
		    4) The directory holding the distribution sets.
@


1.11
log
@Fix the packages information for ``compound'' architectures (i.e.
m68k or mips-based) to show correct paths.
Problem found by jj@@, ok fries@@
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.10 2000/05/06 20:32:48 miod Exp $
d154 1
a154 1
dnl floppy stuff
d161 7
a167 2
				this removes all scsi drivers in floppy{:--:}OSrev.fs,
				and replaces them with OTHERS; see below.-:})dnl
d170 2
a171 3
				2.88mb floppy image that contains all drivers
				from floppy{:--:}OSrev.fs and floppyB{:--:}OSrev.fs
				above; see below.-:})dnl
d241 4
a244 1
process again from scratch.-:})dnl
d383 1
a383 1
dnl                    {:- or <other fs name>-:})dnl <-- $3
d431 1
a431 1
		a file name, eg `*.tgz' or even `base*|comp*'.  It is
d457 1
a457 1
		use wildcards in place of a file name, eg `*.tgz' or
d499 20
@


1.10
log
@Mention bootable tape particularities, deraadt@@ ok
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.9 2000/04/27 00:36:47 todd Exp $
d52 3
a54 2
dnl   value OSrev does not get substituted.  Same goes for MACHINE and OSREV,
dnl   assigned as cmd line parameters to m4 in the Makefile.
@


1.9
log
@would you like a tgz to go?
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.8 1999/10/10 22:55:56 deraadt Exp $
d320 3
a322 1
		at 1, which is the first file written to the tape.
@


1.8
log
@doc that install script sets password; wvdputte
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.7 1999/09/23 08:18:41 todd Exp $
d188 1
a188 1
{:-		*.tar.gz	MACHINE binary distribution sets;
d421 1
a421 1
		a file name, eg `*.tar.gz' or even `base*|comp*'.  It is
d447 1
a447 1
		use wildcards in place of a file name, eg `*.tar.gz' or
@


1.7
log
@re-alignmen
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.6 1999/09/23 08:12:25 todd Exp $
d469 6
a474 5
There is no initial password, but if you're using the machine in a
networked environment, you should create yourself an account and
protect it and the "root" account with good passwords.  You should have
got a mail from the install program we recommend you to read.  This you
can do by running
@


1.6
log
@initial documentation of floppyB and cdrom images
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.5 1999/04/11 18:24:14 todd Exp $
d156 2
a157 2
{:-		floppy{:--:}OSrev.fs	 The standard MACHINE boot and
				 installation floppy; see below.-:})dnl
d159 3
a161 4
{:-		floppyB{:--:}OSrev.fs	 The MACHINE boot and installation
				 floppy; this removes all scsi drivers in
				 floppy{:--:}OSrev.fs, and replaces them
				 with OTHERS; see below.-:})dnl
d163 4
a166 4
{:-		cdrom{:--:}OSrev.fs	 The MACHINE boot and installation
				 2.88mb floppy image that contains all drivers
				 from floppy{:--:}OSrev.fs and floppyB{:--:}OSrev.fs
				 above; see below.-:})dnl
@


1.5
log
@add xshare, indent for xshare
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.4 1998/12/19 18:32:00 deraadt Exp $
d156 12
a167 2
{:-		floppy{:--:}OSrev.fs	 The MACHINE boot and installation
				 floppy; see below.-:})dnl
@


1.4
log
@merge text into base
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.3 1998/11/20 04:09:23 todd Exp $
d16 1
a16 1
		[ $1 gzipped, $2 uncompressed ]-:})')dnl
d63 6
a68 6
{:-	base{:--:}OSrev	The OpenBSD/MACHINE OSREV base binary distribution.  You
		MUST install this distribution set.  It contains the
		base OpenBSD utilities that are necessary for the
		system to run and be minimally functional.  It
		includes shared library support, and excludes
		everything described below.showsize($1,$2)-:})dnl
d74 9
a82 9
{:-	comp{:--:}OSrev	The OpenBSD/MACHINE Compiler tools.  All of the tools
		relating to C, C++, and FORTRAN (yes, there are two!) are
		supported.  This set includes the system {:-include-:} files
		(/usr/{:-include-:}), the linker, the compiler tool chain,
		and the various system libraries (except the shared
		libraries, which are included as part of the base
		set).  This set also includes the manual pages for all
		of the utilities it contains, as well as the system
		call and library manual pages.showsize($1,$2)-:})dnl
d88 7
a94 7
{:-	etc{:--:}OSrev	This distribution set contains the system configuration
		files that reside in /etc and in several other places.
		This set MUST be installed if you are installing the
		system from scratch, but should NOT be used if you are
		upgrading.  (If you are upgrading, it's recommended that
		you get a copy of this set and CAREFULLY upgrade your
		configuration files by hand.)showsize($1,$2)-:})dnl
d100 1
a100 1
{:-	game{:--:}OSrev	This set includes the games and their manual pages.showsize($1,$2)-:})dnl
d106 4
a109 4
{:-	man{:--:}OSrev	This set includes all of the manual pages for the
		binaries and other software contained in the base set.
		Note that it does not {:-include-:} any of the manual pages
		that are included in the other sets.showsize($1,$2)-:})dnl
d115 4
a118 4
{:-	misc{:--:}OSrev	This set includes the system dictionaries (which are
		rather large), the typesettable document set, and
		man pages for other architectures which happen to be
		installed from the source tree by default.showsize($1,$2)-:})dnl
d124 9
a132 2
{:-	xbase{:--:}OSrev This set includes the base X distribution.  This includes
		programs, headers, libraries, configuration files.showsize($1,$2)-:})dnl
d138 1
a138 1
{:-	xfont{:--:}OSrev This set includes all of the X fonts.showsize($1,$2)-:})dnl
d144 1
a144 1
{:-	xserv{:--:}OSrev This set includes all of the X servers.showsize($1,$2)-:})dnl
d150 1
a150 1
{:-	xlink{:--:}OSrev This set includes the X server link kit.showsize($1,$2)-:})dnl
d156 2
a157 2
{:-		floppy{:--:}OSrev.fs	The MACHINE boot and installation
				floppy; see below.-:})dnl
@


1.3
log
@typo
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.2 1998/11/03 04:35:16 aaron Exp $
a118 8
dnl
dnl
dnl OpenBSDtext( compressed size, uncompressed size )
dnl
define({:-OpenBSDtext-:},
{:-	text{:--:}OSrev	This set includes OpenBSD's text processing tools,
		including groff, all related programs, and their
		manual pages.showsize($1,$2)-:})dnl
@


1.2
log
@it's -> its where appropriate
@
text
@d2 1
a2 1
dnl	$OpenBSD: m4.common,v 1.1 1998/05/18 00:33:17 todd Exp $
d477 1
a477 1
which wilk tell you about a bunch of the files needing to be reviewed.
@


1.1
log
@s/cpp/m4/g
@
text
@d2 1
a2 1
dnl	$OpenBSD$
d56 1
a56 1
dnl o showsize() must not be on a new line.  It creates it's own new line if
@

