head	1.14;
access;
symbols
	OPENBSD_6_0:1.14.0.6
	OPENBSD_6_0_BASE:1.14
	OPENBSD_5_9:1.14.0.2
	OPENBSD_5_9_BASE:1.14
	OPENBSD_5_8:1.14.0.4
	OPENBSD_5_8_BASE:1.14
	OPENBSD_5_7:1.13.0.2
	OPENBSD_5_7_BASE:1.13
	OPENBSD_5_6:1.13.0.4
	OPENBSD_5_6_BASE:1.13
	OPENBSD_5_5:1.11.0.2
	OPENBSD_5_5_BASE:1.11
	OPENBSD_5_4:1.9.0.16
	OPENBSD_5_4_BASE:1.9
	OPENBSD_5_3:1.9.0.14
	OPENBSD_5_3_BASE:1.9
	OPENBSD_5_2:1.9.0.12
	OPENBSD_5_2_BASE:1.9
	OPENBSD_5_1_BASE:1.9
	OPENBSD_5_1:1.9.0.8
	OPENBSD_5_0:1.9.0.10
	OPENBSD_5_0_BASE:1.9
	OPENBSD_4_9:1.9.0.6
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.9.0.4
	OPENBSD_4_8_BASE:1.9
	OPENBSD_4_7:1.9.0.2
	OPENBSD_4_7_BASE:1.9
	OPENBSD_4_6:1.8.0.4
	OPENBSD_4_6_BASE:1.8
	OPENBSD_4_5:1.6.0.4
	OPENBSD_4_5_BASE:1.6
	OPENBSD_4_4:1.6.0.2
	OPENBSD_4_4_BASE:1.6
	OPENBSD_4_3:1.5.0.2
	OPENBSD_4_3_BASE:1.5
	OPENBSD_4_2:1.4.0.4
	OPENBSD_4_2_BASE:1.4
	OPENBSD_4_1:1.4.0.2
	OPENBSD_4_1_BASE:1.4
	OPENBSD_4_0:1.3.0.6
	OPENBSD_4_0_BASE:1.3
	OPENBSD_3_9:1.3.0.4
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.3.0.2
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.2.0.4
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.2.0.2
	OPENBSD_3_6_BASE:1.2;
locks; strict;
comment	@# @;


1.14
date	2015.03.27.20.55.56;	author miod;	state Exp;
branches;
next	1.13;
commitid	HGH0KLkyHs0AwLWu;

1.13
date	2014.04.22.22.58.02;	author aoyama;	state Exp;
branches;
next	1.12;

1.12
date	2014.03.19.01.59.49;	author tedu;	state Exp;
branches;
next	1.11;

1.11
date	2014.02.27.18.55.39;	author miod;	state Exp;
branches;
next	1.10;

1.10
date	2013.10.30.22.06.36;	author miod;	state Exp;
branches;
next	1.9;

1.9
date	2010.03.16.17.23.09;	author miod;	state Exp;
branches;
next	1.8;

1.8
date	2009.05.13.18.38.29;	author miod;	state Exp;
branches;
next	1.7;

1.7
date	2009.05.12.21.06.50;	author miod;	state Exp;
branches;
next	1.6;

1.6
date	2008.08.05.22.58.01;	author miod;	state Exp;
branches;
next	1.5;

1.5
date	2008.03.10.21.38.28;	author miod;	state Exp;
branches;
next	1.4;

1.4
date	2007.03.01.19.24.45;	author miod;	state Exp;
branches;
next	1.3;

1.3
date	2005.03.21.22.32.06;	author miod;	state Exp;
branches;
next	1.2;

1.2
date	2004.09.01.08.09.13;	author jmc;	state Exp;
branches;
next	1.1;

1.1
date	2004.05.16.21.52.22;	author miod;	state Exp;
branches;
next	;


desc
@@


1.14
log
@Missing `unattended installation' chunk.
@
text
@dnl	$OpenBSD: install,v 1.13 2014/04/22 22:58:02 aoyama Exp $
OpenBSDInstallPrelude

There are several ways to install OpenBSD onto a disk. The easiest way
in terms of preliminary setup is to use the OpenBSD miniroot that can be
booted off your local disk's swap partition. Alternatively, you can
use the OpenBSD bootblocks and the ramdisk kernel, bsd.rd, copied to an
existing UniOS partition.


Booting from the Installation Media:

Prior to attempting an installation, everything of value on the target
system should be backed up.  While installing OpenBSD does not necessarily
wipe out all the partitions on the hard disk, errors during the install
process can have unforeseen consequences and will probably leave the system
unbootable if the installation process is not completed. Availability
of the installation media for the prior installation, such as a LUNA-88K
UniOS tape, is always a good insurance, should it be necessary to "go back"
for some reason.

After taking care of all that, the system should be brought down gracefully
using the shutdown(8) and/or halt(8) commands, which will eventually go
back to the PROM prompt. Remember that the leftmost switch from the front
panel DIP switch #1 must be down to access the PROM prompt.

Booting from an existing partition:

    Copy the OpenBSD/MACHINE boot loader on one of the first 8 partitions
    (a-h). Copy the installation kernel (bsd.rd) to the same partition.

    At the PROM prompt, enter

      b sd(n,p) boot

    to boot the OpenBSD bootloader from the specified disk and partition.
    Replace 'p' with the partition number (usually 0, for the 'a' partition),
    and 'n' with the appropriate number from the following table:

      disk drive SCSI ID: 0 1 2 3 4 5 6
      value of 'n':       6 5 4 3 2 1 0

    On LUNA-88K2 systems, if the disk drive is connected to the external SCSI
    controller, add 10 to this number. For example, to boot from a disk drive
    with ID #0 connected to the external controller, enter:

      b sd(10,0)boot

    Once the OpenBSD bootloader starts, press any key to stop the countdown
    if the ``boot>'' prompt does not appear.

    Then, boot the installation kernel from the same partition:

     boot sd(n,p)bsd.rd

Booting from the miniroot:

    Copy the OpenBSD/MACHINE miniroot to the swap partition (assuming your
    disk is sd0):

	dd if=miniroot{:--:}OSrev.fs of=/dev/sd0b

    After halting the system, at the PROM prompt, enter

	b sd(n,1)

    to boot the OpenBSD bootloader from the swap partition.

    Once the OpenBSD bootloader starts, press any key to stop the countdown
    if the ``boot>'' prompt does not appear.

    Then, boot the installation kernel from the same partition:

     boot sd(n,1)


Installing the system:

OpenBSDInstallPart2

	Boot your machine from the installation media as described above.

	It will take a while to load the kernel especially from a slow
	network connection, most likely more than a minute.  If some action
	doesn't eventually happen, or the spinning cursor has stopped and
	nothing further has happened, either your boot media is bad, your
	diskless setup isn't correct, or you may have a hardware or
	configuration problem.

OpenBSDInstallPart3(,"sd0")

OpenBSDInstallPart4

OpenBSDInstallPart5

OpenBSDInstallPart6({:-CD-ROM, NFS, -:})

OpenBSDURLInstall

OpenBSDCDROMInstall
		
OpenBSDNFSInstall

OpenBSDDISKInstall(,{:-only -:})

OpenBSDCommonInstall

OpenBSDInstallWrapup

OpenBSDCongratulations



OpenBSDUnattendedInstallation
@


1.13
log
@Unify the model name to LUNA-88K{,2}, that is considered the
`official' name.

ok jmc@@ miod@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.12 2014/03/19 01:59:49 tedu Exp $
d111 4
@


1.12
log
@you are still welcome to install from tape, but as befits an elite master
of unix arcana, we will not condescend to tell you how. why spoil the fun?
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.11 2014/02/27 18:55:39 miod Exp $
d18 1
a18 1
of the installation media for the prior installation, such as a Luna-88K
d43 1
a43 1
    On LUNA88K-2 systems, if the disk drive is connected to the external SCSI
@


1.11
log
@Build a small miniroot filesystem which can be dumped on a new disk or an
existing swap partition for an easier initial installation.
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.10 2013/10/30 22:06:36 miod Exp $
a26 21
dnl Not until the bootblock can boot from tape.
dnl Booting from an installation tape:
dnl
dnl    The internal tape drive is usually configured as SCSI ID #4. At the
dnl    prompt, enter
dnl
dnl      b st(0,0,0)
dnl
dnl    to boot the first file from the tape. If your tape drive uses a
dnl    different SCSI ID, replace the middle number with the appropriate number
dnl    from the following table:
dnl
dnl      tape drive SCSI ID:     0 1 2 3 4 5 6
dnl      middle number for st(): 4 3 2 1 0 6 5
dnl
dnl    If the tape drive is connected to the external SCSI controller, add 10 to
dnl    the middle number. For example, to boot from a tape drive with ID #5
dnl    connected to the external controller, enter:
dnl
dnl      b st(0,16,0)
dnl
d96 1
a96 1
OpenBSDInstallPart6({:-CD-ROM, tape, NFS, -:})
a106 2

OpenBSDTAPEInstall(1)
@


1.10
log
@Update installation notes to match reality: kernel needs to be loaded by the
boot blocks now, which - for now - disables tape boot. Also belatedly mention
bsd.mp
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.9 2010/03/16 17:23:09 miod Exp $
d5 4
a8 2
in terms of preliminary setup is to use the OpenBSD ramdisk kernel, bsd.rd,
which can be booted from tape, or an existing Mach partition.
d19 1
a19 1
Mach tape, is always a good insurance, should it be necessary to "go back"
d75 21
a95 1
     b sd(n,p)bsd.rd
@


1.9
log
@Jumbo commit for 4.7 installation instructions:
- do not mention tape as an installation media on systems where it is very
  unlikely that a tape drive can be connected to (i.e. anything with only
  USB as expansion capabilities)
- do not mention that fetching the installation sets from a partition is
  ``for upgrades only''. You may do this for installation, but of course
  you can not use a partition which will be newfs'ed for that purpose.
- mention ext2fs partitions as possible installation sets source only on
  platforms where the installation media actually can mount an ext2fs
  filesystem.
- stress the fact that the sparc miniroot image is a GENERIC kernel with
  a little on-disk filesystem, and not a RAMDISK kernel with a little
  in-memory filesystem, and thus must not be overwritten during installation
  (i.e. be careful if you repartition the disk the miniroot has been put on).
- more conv=sync -> conv=osync for tape setup instructions.
- model-specific layout changes on armish, loongson and socppc instructions.
- fix various typos and grammar mistaeks.

"sure" deraadt@@ (without eyeballing)
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.8 2009/05/13 18:38:29 miod Exp $
d25 22
a46 1
Booting from an installation tape:
d48 2
a49 2
    The internal tape drive is usually configured as SCSI ID #4. At the
    prompt, enter
d51 1
a51 1
      b st(0,0,0)
d53 1
a53 3
    to boot the first file from the tape. If your tape drive uses a
    different SCSI ID, replace the middle number with the appropriate number
    from the following table:
d55 3
a57 2
      tape drive SCSI ID:     0 1 2 3 4 5 6
      middle number for st(): 4 3 2 1 0 6 5
d59 2
a60 3
    If the tape drive is connected to the external SCSI controller, add 10 to
    the middle number. For example, to boot from a tape drive with ID #5
    connected to the external controller, enter:
d62 3
a64 3
      b st(0,16,0)

Booting from an existing partition:
d66 1
a66 1
    At the prompt, enter
d68 2
a69 8
      b sd(0,n,p) bsd.rd

    to boot bsd.rd from the specified disk and partition. Replace 'p' with
    the partition number (usually 0, for the 'a' partition), and 'n' with
    the appropriate number from the following table:

      disk drive SCSI ID: 0 1 2 3 4 5 6
      value of 'n':       6 5 4 3 2 1 0
d71 1
a71 3
    If the disk drive is connected to the external SCSI controller, add 10 to
    this number. For example, to boot from a disk drive with ID #0 connected
    to the external controller, enter:
d73 1
a73 1
      b sd(0,16,0) bsd.rd
@


1.8
log
@Better disk partitioning details, especially for MBR + disklabel or
HFS + disklabel setups.
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.7 2009/05/12 21:06:50 miod Exp $
d84 1
a84 1
OpenBSDInstallPart6({:-CD-ROM, NFS, -:})
@


1.7
log
@Try to catch up with installer changes in the installation notes.
Also, the per-platform features are moved to a common place, which makes
the MD layout easier to work on. m4.common is still a tangled mess of subtly
placed dnl, though...
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.6 2008/08/05 22:58:01 miod Exp $
d86 1
a86 3
OpenBSDFTPInstall

OpenBSDHTTPInstall
@


1.6
log
@Better description of the installation steps:
- document questions in proper order: hostname before network configuration,
  DNS only if network is configured, sshd and ntpd, aperture only on
  machines which need it, serial console only on machines which need it.
  This is done by splitting the end of OpenBSDCommonURL in various
  macros, OpenBSDInstallWrapup, OpenBSDInstallAperture, OpenBSDInstallConsole
  and OpenBSDInstallWrapupPart2.
- use the above macros when appropriate, OpenBSDInstallWrapup* being
  mandatory on all arches.
- remove serial console configuration blurb on sparc and sparc64, it is
  handled by OpenBSDInstallConsole now.
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.5 2008/03/10 21:38:28 miod Exp $
d78 1
a78 9
OpenBSDBootMsgs(,"sd0")

	You will next be asked for your terminal type.  If you are
	installing from a non-serial console, the default of "vt220"
	is correct.  If you are installing from a serial console
	you should choose the terminal type from amongst those listed.
	(If your terminal type is xterm, just use vt220.)

OpenBSDInstallPart3
d82 1
a82 1
OpenBSDInstallPart5(sd0)
d84 1
a84 1
OpenBSDInstallNet({:-CD-ROM, NFS, -:})
a89 2
OpenBSDTAPEInstall(1)

d96 3
a98 3
OpenBSDCommonFS(NFS)
		
OpenBSDCommonURL
a100 2

OpenBSDInstallWrapupPart2
@


1.5
log
@Suggest vt220 as a TERM value for serial-console-in-an-xterm setup everywhere
instead of a mix of vt100 and vt220.
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.4 2007/03/01 19:24:45 miod Exp $
d109 4
@


1.4
log
@Your spring jumbo m4-fu. This time:
- mention comp contains an objective-C compiler too.
- rewrite InstallPrelude so that it will only output the ``know your drive
  geometry'' blurb if asked to, and for a specified disk type. Use it for
  non-IDE and non-SCSI disks only, otherwise the kernel is good enough to
  do the job without the users' help.
- similarily, adapt BootMsgs to make the second part of the geometry blurb
  optional, and to accept up to three disk types. Use this to report better
  disk names (i.e. no point saying an scsi disk would show up as sd0 on
  platforms which can't have scsi disks, or won't be able to boot from them).
- in InstallPart4, drop the part about block and fragment sizes in
  disklabel. The defaults are good, and you won't get to change them unless
  you switched to expert mode.
- the default answer to ``wanna get the ftp mirror list, unzel?'' is ``no'',
  so pressing enter to get it is not enough anymore (-:
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.3 2005/03/21 22:32:06 miod Exp $
d80 5
a84 3
	You will next be asked for your terminal type.  You should choose
	the terminal type from amongst those listed.
	(If your terminal type is xterm, just use vt100).
@


1.3
log
@Sync tape install details with the install script, mostly a numbering
change for files on the tape.

Prompted by and discussed with claudio@@.
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.2 2004/09/01 08:09:13 jmc Exp $
d78 1
a78 1
OpenBSDBootMsgs
@


1.2
log
@uppercase `id' and `nvram' for consistency w/ other docs;
ok miod@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: install,v 1.1 2004/05/16 21:52:22 miod Exp $
d96 1
a96 1
OpenBSDTAPEInstall(2)
@


1.1
log
@OpenBSD/luna88k installation notes, take one. Still needs work.
ok aoyama@@
@
text
@d1 1
a1 1
dnl	$OpenBSD$
d27 1
a27 1
    The internal tape drive is usually configured as SCSI id #4. At the
d33 1
a33 1
    different SCSI id, replace the middle number with the appropriate number
d36 1
a36 1
      tape drive SCSI id:     0 1 2 3 4 5 6
d55 1
a55 1
      disk drive SCSI id: 0 1 2 3 4 5 6
@

