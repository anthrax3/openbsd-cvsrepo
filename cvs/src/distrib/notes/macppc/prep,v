head	1.24;
access;
symbols
	OPENBSD_6_2:1.24.0.2
	OPENBSD_6_2_BASE:1.24
	OPENBSD_6_1:1.24.0.4
	OPENBSD_6_1_BASE:1.24
	OPENBSD_6_0:1.23.0.10
	OPENBSD_6_0_BASE:1.23
	OPENBSD_5_9:1.23.0.6
	OPENBSD_5_9_BASE:1.23
	OPENBSD_5_8:1.23.0.8
	OPENBSD_5_8_BASE:1.23
	OPENBSD_5_7:1.23.0.2
	OPENBSD_5_7_BASE:1.23
	OPENBSD_5_6:1.23.0.4
	OPENBSD_5_6_BASE:1.23
	OPENBSD_5_5:1.22.0.2
	OPENBSD_5_5_BASE:1.22
	OPENBSD_5_4:1.19.0.4
	OPENBSD_5_4_BASE:1.19
	OPENBSD_5_3:1.19.0.2
	OPENBSD_5_3_BASE:1.19
	OPENBSD_5_2:1.18.0.10
	OPENBSD_5_2_BASE:1.18
	OPENBSD_5_1_BASE:1.18
	OPENBSD_5_1:1.18.0.6
	OPENBSD_5_0:1.18.0.8
	OPENBSD_5_0_BASE:1.18
	OPENBSD_4_9:1.18.0.4
	OPENBSD_4_9_BASE:1.18
	OPENBSD_4_8:1.18.0.2
	OPENBSD_4_8_BASE:1.18
	OPENBSD_4_7:1.17.0.10
	OPENBSD_4_7_BASE:1.17
	OPENBSD_4_6:1.17.0.12
	OPENBSD_4_6_BASE:1.17
	OPENBSD_4_5:1.17.0.8
	OPENBSD_4_5_BASE:1.17
	OPENBSD_4_4:1.17.0.4
	OPENBSD_4_4_BASE:1.17
	OPENBSD_4_3:1.17.0.6
	OPENBSD_4_3_BASE:1.17
	OPENBSD_4_2:1.17.0.2
	OPENBSD_4_2_BASE:1.17
	OPENBSD_4_1:1.16.0.8
	OPENBSD_4_1_BASE:1.16
	OPENBSD_4_0:1.16.0.6
	OPENBSD_4_0_BASE:1.16
	OPENBSD_3_9:1.16.0.4
	OPENBSD_3_9_BASE:1.16
	OPENBSD_3_8:1.16.0.2
	OPENBSD_3_8_BASE:1.16
	OPENBSD_3_7:1.15.0.4
	OPENBSD_3_7_BASE:1.15
	OPENBSD_3_6:1.15.0.2
	OPENBSD_3_6_BASE:1.15
	OPENBSD_3_5:1.13.0.2
	OPENBSD_3_5_BASE:1.13
	OPENBSD_3_4:1.8.0.4
	OPENBSD_3_4_BASE:1.8
	OPENBSD_3_3:1.8.0.2
	OPENBSD_3_3_BASE:1.8
	OPENBSD_3_2:1.6.0.2
	OPENBSD_3_2_BASE:1.6
	OPENBSD_3_1:1.4.0.2
	OPENBSD_3_1_BASE:1.4
	OPENBSD_3_0:1.3.0.2
	OPENBSD_3_0_BASE:1.3;
locks; strict;
comment	@# @;


1.24
date	2017.03.04.22.46.20;	author tj;	state Exp;
branches;
next	1.23;
commitid	xnTPjpt7rqMAe9Je;

1.23
date	2014.07.17.03.21.48;	author deraadt;	state Exp;
branches;
next	1.22;
commitid	37s8Fp8ylHNlBsEG;

1.22
date	2013.11.27.13.12.48;	author mpi;	state Exp;
branches;
next	1.21;

1.21
date	2013.11.25.18.12.19;	author deraadt;	state Exp;
branches;
next	1.20;

1.20
date	2013.11.25.14.04.59;	author mpi;	state Exp;
branches;
next	1.19;

1.19
date	2013.02.11.10.09.12;	author jasper;	state Exp;
branches;
next	1.18;

1.18
date	2010.08.16.14.39.21;	author miod;	state Exp;
branches;
next	1.17;

1.17
date	2007.08.02.17.33.12;	author david;	state Exp;
branches;
next	1.16;

1.16
date	2005.08.19.12.45.10;	author jmc;	state Exp;
branches;
next	1.15;

1.15
date	2004.09.01.08.09.13;	author jmc;	state Exp;
branches;
next	1.14;

1.14
date	2004.05.24.15.47.00;	author tom;	state Exp;
branches;
next	1.13;

1.13
date	2004.03.25.08.38.52;	author tom;	state Exp;
branches;
next	1.12;

1.12
date	2004.03.23.17.37.02;	author jmc;	state Exp;
branches;
next	1.11;

1.11
date	2004.03.21.16.58.02;	author drahn;	state Exp;
branches;
next	1.10;

1.10
date	2004.03.17.09.25.09;	author jmc;	state Exp;
branches;
next	1.9;

1.9
date	2004.03.15.08.37.25;	author xsa;	state Exp;
branches;
next	1.8;

1.8
date	2003.03.24.11.33.56;	author miod;	state Exp;
branches;
next	1.7;

1.7
date	2003.02.18.06.00.19;	author jason;	state Exp;
branches;
next	1.6;

1.6
date	2002.06.09.05.53.54;	author todd;	state Exp;
branches;
next	1.5;

1.5
date	2002.05.21.22.07.46;	author drahn;	state Exp;
branches;
next	1.4;

1.4
date	2002.04.07.22.51.25;	author miod;	state Exp;
branches;
next	1.3;

1.3
date	2001.10.14.23.09.33;	author drahn;	state Exp;
branches;
next	1.2;

1.2
date	2001.10.01.22.56.34;	author miod;	state Exp;
branches;
next	1.1;

1.1
date	2001.09.01.16.50.19;	author drahn;	state Exp;
branches;
next	;


desc
@@


1.24
log
@remove/tweak some cd-related text.

ok deraadt
@
text
@dnl	$OpenBSD: prep,v 1.23 2014/07/17 03:21:48 deraadt Exp $
To be able to boot the OpenBSD/MACHINE installation program, you will
need to acquire some limited knowledge of Open Firmware, the low-level
process that controls the microprocessor after hardware initialization
and diagnostics are performed but before control is handed to the
operating system.

To access Open Firmware, you should simultaneously hold down the
Command, Option, O, and F keys immediately upon booting.  (On a PC keyboard,
use the Windows key instead of the Command key and use Alt instead of the
Option key).  You will be presented with information and a ">" prompt that
will look something like this (example taken from a Power Macintosh G4):

Apple PowerMac3,1 2.4f1 BootROM built on 02/18/00 at 09:44:35
Copyright 1994-2000 Apple Computer, Inc.
All Rights Reserved

Welcome to Open Firmware
To continue booting, type "mac-boot" and press return
To shut down, type "shut-down" and press return

 ok
0 >

If you are installing OpenBSD/MACHINE on an Xserve, you will need
to do so in headless mode.  This means you must remove the graphics
card and use the serial console.  To bring up Open Firmware via
the serial console, hold down the System Identifier button while
pressing the Power button.  When the upper LED bank begins lighting
up in sequence (similar to KITT from Knight Rider), repeatedly
press the System Identifier button until the seventh LED from
the right is highlighted on the lower bank.  Now hold the
System Identifier button for two seconds.  For more details, read:
http://support.apple.com/kb/TA26930

dnl XXX Move the boot commands to install in sections (booting from network,
dnl XXX booting from cd-rom, etc)
Important Open Firmware command examples:

boot cd:,ofwboot /OSREV/MACHINE/bsd.rd
		(boot from an appropriately prepared
		OpenBSD CD-ROM in the CD/DVD drive)

boot enet:,ofwboot /bsd.rd
		(netboot from a pre-configured dhcp/tftp/nfs
		server; "ofwboot" will be obtained from the tftp server,
		while "bsd.rd" will be obtained from the NFS server,
		as specified by the "next-server" and "root-path" dhcp
		options)

boot ide1:,ofwboot /bsd
		(After installation, boot /bsd from the slave
		 device on the second ATA bus)

mac-boot	(boot into Mac OS)
reset-all	(reboot the machine)
shut-down	(halt the machine; shutdown)
printenv	(print current machine variables)
setenv		(set a machine variable)
devalias	(list device aliases; useful for locating other
		devices in the machine such as hard drives, etc)

As seen above, device aliases typically take the form of "ide", "cd",
etc.  To boot to an alternative device, you may substitute them
with entries from this list (example devices taken from a Power
Macintosh G4):

ultra0 = hd = master device, primary ATA bus (factory-installed drive)
ultra1 =      slave device, primary ATA bus
ide0   = cd = master device, secondary ATA bus (CD/DVD drive)
ide1   =      slave device, secondary ATA bus (Zip drive, if installed)
enet   =      motherboard Ethernet device


Other Open Firmware command examples:

setenv auto-boot? false
		(force the machine to wait at Open Firmware
		for user input at next reboot; options are true/false)

setenv boot-device hd:,ofwboot
		(force the machine to boot into OpenBSD
		automatically at next reboot)

dev /		(change to root level of the device tree)
pwd		(show current location in the device tree)
ls		(show items at current location in the device tree)
words		(show methods of items at current location in the device
		tree)
.properties	(show properties of items at current location in the
		device tree)


To reset a Power Macintosh to the factory-configured Open Firmware settings,
simultaneously hold down the Command, Option, P, and R keys immediately upon
booting.  Typically the machine will then attempt to load Mac OS, if
available.


Autobooting OpenBSD/MACHINE

It is possible to automatically boot into OpenBSD (selectably into Mac OS)
by setting up the following:

setenv auto-boot? true
setenv boot-device hd:,ofwboot

[to save the results into NVRAM]
reset-all

These settings assume that the master of the first IDE bus has OpenBSD
installed on it, either in MBR format or in shared mode with ofwboot
copied into the first HFS(+) partition. It is not necessary to specify
'/bsd' on the boot line or in the boot-device variable, since it is the
default.

To boot in Mac OS with this setup (works on most supported machines),
press and hold down the Alt/Option key during reboot, and select which
(Mac OS/Mac OS X) partition to boot in the graphical boot selector
presented. Note that OpenBSD does not currently show up in this boot
selector except for the installation image. This works on most machines
this has been tested with, but does not work on a Rev C (333MHz) iMac;
perhaps this feature was added to the Open Firmware ROM after that
machine.


Sharing a disk with Mac OS:

OpenBSD/MACHINE is capable of booting either from a dedicated disk using
an MBR partitioned disk or sharing a disk with Mac OS.

If the disk is to be shared between Mac OS and OpenBSD, it is necessary
to reformat and install the Mac OS partitions first, using "Drive Setup",
leaving space on the disk as an "Unused" partition.
If the disk was previously partitioned, it is possible to reuse a partition
for OpenBSD, as long as it is not the first partition on the disk.
The bootloader is expected to be found in that first (HFS) partition.

For dedicated disks, MACHINE port boots off a boot program in
an MSDOS filesystem. This is set up by the install program
and no special setup is required.
@


1.23
log
@URL move; Jean-Philippe Ouellet
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.22 2013/11/27 13:12:48 mpi Exp $
d121 1
a121 1
selector except for the installation CD-ROM. This works on most machines
@


1.22
log
@Put back info to enter the Open Firmware with a standard PC keyboard
from Daniel Dickman that got accidentally reverted.

ok deraadt@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.21 2013/11/25 18:12:19 deraadt Exp $
d34 1
a34 1
http://docs.info.apple.com/article.html?artnum=75489
@


1.21
log
@improve keyboard boot info; Daniel Dickman
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.20 2013/11/25 14:04:59 mpi Exp $
d9 4
a12 3
Command, Option, O, and F keys immediately upon booting.  You will
be presented with information and a ">" prompt that will look something
like this (example taken from a Power Macintosh G4):
@


1.20
log
@Document which keys need to be hold to enter the Open Firmware with a
standard PC keyboard.  From Daniel Dickman (didickman at gmail.com).
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.19 2013/02/11 10:09:12 jasper Exp $
d9 3
a11 4
Command, Option, O, and F keys immediately upon booting.  (On a PC keyboard,
use the Windows key instead of the Command key and use Alt instead of the
Option key).  You will be presented with information and a ">" prompt that
will look something like this (example taken from a Power Macintosh G4):
@


1.19
log
@adjust boot-device to be more like what the installer tells you.

ok mpi@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.18 2010/08/16 14:39:21 miod Exp $
d9 4
a12 3
Command, Option, O, and F keys immediately upon booting.  You will
be presented with information and a ">" prompt that will look something
like this (example taken from a Power Macintosh G4):
@


1.18
log
@Netboot description tweaks; spotted by and help krw@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.17 2007/08/02 17:33:12 david Exp $
d80 1
a80 1
setenv boot-device ide:,ofwboot
@


1.17
log
@add few arch/MACHINE substitutions; ok miod@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.16 2005/08/19 12:45:10 jmc Exp $
d35 2
d44 5
a48 3
		(netboot from a pre-configured bootp/tftp/nfs
		server containing the "ofwboot" and "bsd.rd"
		files at the root directory of the tftp server)
@


1.16
log
@knight industries two thousand;
from stuart henderson (pr #4466);
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.15 2004/09/01 08:09:13 jmc Exp $
d24 1
a24 1
If you are installing OpenBSD/macppc on an Xserve, you will need
@


1.15
log
@uppercase `id' and `nvram' for consistency w/ other docs;
ok miod@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.14 2004/05/24 15:47:00 tom Exp $
d29 1
a29 1
up in sequence (similar to KIT from Knight Rider), repeatedly
@


1.14
log
@Normalise to "Open Firmware".

ok drahn@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.13 2004/03/25 08:38:52 tom Exp $
d103 1
a103 1
[to save the results into nvram]
@


1.13
log
@Various typos

ok miod@@ deraadt@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.12 2004/03/23 17:37:02 jmc Exp $
d3 1
a3 1
need to acquire some limited knowledge of OpenFirmware, the low-level
d26 1
a26 1
card and use the serial console.  To bring up OpenFirmware via
d118 1
a118 1
perhaps this feature was added to the OpenFirmware ROM after that
@


1.12
log
@typo;
ok miod@@ deraadt@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.11 2004/03/21 16:58:02 drahn Exp $
d118 1
a118 1
perhaps this feature was added to the Openfirmware ROM after that
@


1.11
log
@Directions on how to enter openfirmware on Xserve from Simon Lok. ok jmc@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.10 2004/03/17 09:25:09 jmc Exp $
d32 1
a32 1
system identified button for two seconds.  For more details, read:
@


1.10
log
@grammar, consistency fixes, and typos;
ok miod@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.9 2004/03/15 08:37:25 xsa Exp $
d24 10
@


1.9
log
@
MacOS -> Mac OS;
ok drahn@@ miod@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.8 2003/03/24 11:33:56 miod Exp $
d8 2
a9 2
To access Open Firmware you should simultaneously hold down the
Command, Option, O and F keys immediately upon booting.  You will
d46 1
a46 1
		devices in the machine such as hard drives etc)
d48 2
a49 2
As seen above, device aliases typically take the form of "ide", "cd"
etc.  To boot to an alternative device you may substitute them
d57 1
a57 1
enet   =      motherboard ethernet device
d79 2
a80 2
To reset a Power Macintosh to the factory-configure Open Firmware settings,
simultaneously hold down the Command, Option, P, R keys immediately upon
d102 1
a102 1
To boot in Mac OS with this setup (works on most supported machines)
d107 1
a107 1
this has been tested with, but does not work on a Rev C (333MHz) iMac,
d115 1
a115 1
a MBR partitioned disk or sharing a disk with Mac OS.
d120 3
a122 3
If the disk was previously partitioned, it is possible to reuse a Partition
for OpenBSD, as long as it is not the first Partition on the disk.
The bootloader is expected to be found in that first (HFS) Partition.
@


1.8
log
@Tweak a few texts to cope with the fact that we ship official OpenBSD CD-ROM
and bootable CD-ROM mini images on some platforms, too. Mention such a mini
image for alpha, consistent spelling of CD-ROM, and a few minor updates not
worth mentioning I had lying in my tree.
@
text
@d1 1
a1 1
dnl	$OpenBSD$
d40 1
a40 1
mac-boot	(boot into MacOS)
d87 1
a87 1
It is possible to automatically boot into OpenBSD (selectably into MacOS)
d102 1
a102 1
To boot in MacOS with this setup (works on most supported machines)
d104 1
a104 1
(MacOS/MacOS X) partition to boot in the graphical boot selector
d112 1
a112 1
Sharing a disk with MacOS:
d115 1
a115 1
a MBR partitioned disk or sharing a disk with MacOS.
d117 2
a118 2
If the disk is to be shared between MacOS and OpenBSD, it is necessary
to reformat and install the MacOS partitions first, using "Drive Setup",
@


1.7
log
@typo
@
text
@d1 1
d29 1
a29 1
		OpenBSD CD in the CD/DVD drive)
d106 1
a106 1
selector except for the installation CD. This works on most machines
@


1.6
log
@knf
@
text
@d104 1
a104 1
presentes. Note that OpenBSD does not currently show up in this boot
@


1.5
log
@Document autobooting macppc, and how to use the openfirmware boot menu
to boot MacOS (9/X) with the setup. ok miod@@
@
text
@d95 1
a95 1
These settings assume that the master of the first IDE bus has OpenBSD 
d103 1
a103 1
(MacOS/MacOS X) partition to boot in the graphical boot selector 
@


1.4
log
@- update supported hardware list
- fix a few typos and layout issues
@
text
@d84 27
@


1.3
log
@Improvements to macppc installation notes
ok miod@@ (with the requested fixes).
@
text
@d72 4
a75 2
words		(show methods of items at current location in the device tree)
.properties	(show properties of items at current location in the device tree)
@


1.2
log
@- update hardware list, mention some unsupported devices as well.
- move open firmware 101 to the ``preparation'' section
- don't try to scare people wanting to upgrade, it works well nowadays
- remove the note about not being able to boot from a Zip disk.

thanks to some feedback from drahn@@
@
text
@d65 1
a65 1
setenv boot-device ide:,ofwboot /bsd
d84 2
a85 2
OpenBSD/MACHINE is now capable of booting either from a dedicated
disk using a MBR partitioned disk or sharing a disk with MacOS.
d90 3
a92 3
If the disk was previously partitioned, it is possible to reuse a Pariti on
for OpenBSD, as long as it is not the first Pariti on on the disk.
The bootloader is expected to be found in that first (HFS) Pariti on.
d95 1
a95 1
an MSDOS filesystem. This is now set up by the install program
@


1.1
log
@Move powerpc install notes to macppc with the port rename.
@
text
@d1 83
@

