head	1.9;
access;
symbols
	OPENBSD_2_8:1.8.0.4
	OPENBSD_2_8_BASE:1.8
	OPENBSD_2_7:1.8.0.2
	OPENBSD_2_7_BASE:1.8
	OPENBSD_2_6:1.7.0.6
	OPENBSD_2_6_BASE:1.7
	OPENBSD_2_5:1.7.0.4
	OPENBSD_2_5_BASE:1.7
	OPENBSD_2_4:1.7.0.2
	OPENBSD_2_4_BASE:1.7
	OPENBSD_2_3:1.6.0.4
	OPENBSD_2_3_BASE:1.6
	OPENBSD_2_2:1.6.0.2
	OPENBSD_2_2_BASE:1.6
	OPENBSD_2_1:1.5.0.4
	OPENBSD_2_1_BASE:1.5
	OPENBSD_2_0:1.5.0.2
	OPENBSD_2_0_BASE:1.5
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.9
date	2001.04.24.23.22.12;	author miod;	state dead;
branches;
next	1.8;

1.8
date	2000.04.28.15.00.46;	author todd;	state Exp;
branches;
next	1.7;

1.7
date	98.05.18.00.34.06;	author todd;	state Exp;
branches;
next	1.6;

1.6
date	97.10.24.07.11.11;	author todd;	state Exp;
branches;
next	1.5;

1.5
date	96.10.03.00.47.28;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	96.06.29.05.54.18;	author tholo;	state Exp;
branches;
next	1.3;

1.3
date	96.04.25.21.29.55;	author niklas;	state Exp;
branches;
next	1.2;

1.2
date	95.11.16.14.19.56;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.37.40;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.37.40;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.9
log
@No need to keep installation notes for architectures we never
have supported.
@
text
@(IF you already have OpenBSD/pc532 installed and you only want to update
your system, see the next section.)

To install OpenBSD/pc532, there are several things you need to know.
First, OpenBSD "autoconfigs" the scsi devices. inst{:--:}OSrev.fs has only
support for disks configured into the kernel. Starting the search at
SCSI address 0, lun 0 and increasing, the first disk found will be sd0
regardless of the address, the second will be sd1. KLONDIKE for example
has the following devices installed:

	sd0 -> ID 0 LUN 0: Quantum LP52S hard disk drive
	sd1 -> ID 1 LUN 0: Micropolis 4110 hard disk drive
	sd2 -> ID 2 LUN 0: Teac FC-1, 3.5" floppy disk drive
	sd3 -> ID 2 LUN 1: Teac FC-1, 5.25" floppy disk drive
	cd0 -> ID 3 LUN 0: Toshiba XM-4101TA CD-ROM drive
	st0 -> ID 4 LUN 0: Tandberg TDC3600 QIC tape drive

Only sd0-sd3 are supported by the inst{:--:}OSrev.fs kernel.

Next you need to know what the install script wants to do.  This install
is script on the ram disk root that can do most of the work of configuring
your disk.

  a) The script assumes your are using the first n sectors of your
	disk, where you can specify n.  It will allow you to create
	up to 5 file system partitions, one swap partition and one
	boot partition.

  b) You should know how many total sectors are on your disk.  The
	configure will report a head, track, and cylinder count, but
	I have found that on my disks, it reports something that makes
	a smaller disk than I really had.

  c) It is possible to have the install script make a partition
	over your save area AND not make a new file system, thus
	preserving what is there. Then, later you can make a new
	file system after you no longer need the stuff there. You
	will need to do only one boot to get things working from
	the disk.

The Install Procedure:

  a) Adjust your console device settings.
	The inst{:--:}OSrev.fs kernel will come up with 9600 baud, 7 bits,
	even parity and one stop bit. Adjust your terminal to match
	these settings. The monitor's baud rate can be changed with
	"baud d'9600".

  b) Get inst{:--:}OSrev.fs and boot the kernel.

	From Floppy: (and using the autoboot monitor)
	If you have a 1.44 meg SCSI floppy drive, you can put inst{:--:}OSrev.fs
	onto a 3.5" floppy disk. Insert the disk into your floppy
	drive and use the monitor's boot command to boot the default
	image from the floppy. The image booted will ask you for a
	kernel to load. Answer
		sdXa:/bsd
	Replace X with your drive number. For KLONDIKE X would be "2".

	Tape:
	You will need to load a copy of inst{:--:}OSrev.fs into RAM.
		- load the inst{:--:}OSrev.fs at 0x288000
		- run at 0x3E8820
	The boot program will ask you now for a kernel to load. Answer
		rd0a:/bsd

	Serial line:
	Provided with the distribution is source for program called 
	download.  (download.c)  This program when used as
	"download file" will read the contents of the file and
	output to standard output a byte sequence used by the pc532
	ROM monitor to download a binary file into RAM.  Using this
	program on a computer connected to the pc532, one can
	load a copy of inst{:--:}OSrev.fs into RAM at 0x288000.  The boot
	sequence is now the same as with tape.

  c) Choose a disk geometry.  For me, the reported geometry left
	some sectors "unallocated".  That is, the autoconfig message
	said the disk had 2428 cylinders, 9 heads, and 93 sectors/track.
	This gives a total of 2032236 sectors, but I knew that I had
	2053880 sectors.

	To help in this process, there is a program "factor" that is
	on the inst{:--:}OSrev.fs.  The usage is "factor number" and it lists
	the prime factors of number.
	For example, with the 2053880 sector disk I got:

	---->~/sd1

	steelhead[3]$ factor 2053880
	2053880: 2 2 2 5 51347

	Not many to choose from, so I tried ...

	---->~/sd1
	steelhead[4]$ factor 2053820
	2053820: 2 2 5 103 997

	Now I'd like to get about a meg per track:
	steelhead[5]$ echo "2 * 997"|bc
	1994

	Now I need the number of tracks (or cylinders):
	steelhead[5]$ echo "2 * 5 * 103"|bc
	1030

	So I ended up choosing 1030 cylinders, 1 head, 1994 sectors/track.
	I "lost" only 60 sectors, but got a "reasonable geometry".

  d) run "install"  -- it will ask you for the disk geometry and other
	questions.  It will ask you for the geometry and then ask you
	how many of those sectors you want to use for OpenBSD. It also
	wants to know the size of your boot partition (to be used with
	the auto-boot monitor), your root partition, your swap partition,
	and then any other partitions you may want.  For the "other"
	partitions, it will ask for a mount point.  The mount point will
	be "relative to /" and should not {:-include-:} the leading "/".  Also,
	IF you do not want the partition to have newfs run on it (that is
	it might be the last one and have a copy of inst{:--:}.fs) enter "NO"
	to the mount point and it will not run newfs on the partition.
	It will enter the partition into the disklabel.

  e) look around, if you want ... and then halt OpenBSD.

  f) reboot the machine.  Using the autoboot monitor, all you should have
	to do is give the ROM monitor command "boot".  The secondary
	UFS boot program eventually times out and auto-loads /bsd.
	You can get it to do it faster by hitting "return".
	If you are NOT using the autoboot monitor, it's time to warm
	up your eprom burner :-)

  g) Now it is time to load all the other files of the distribution:
	You can do this via --

	a) a TCP/IP link (slip, ppp or plip)
		you have ifconfig, slattach, route, netstat,
		hostname and ftp on the mini-root. You can even
		use nfs...
		Plip is only an option if you have installed a
		centronics port in your pc532.
		You do have access to vi to edit your network
		files. (/etc/resolv.conf, ...)

	b) floppy disk

	c) tape

	d) cdrom (If you have a CD with OpenBSD/532 ...)

	e) Use the ROM compatible "download" program.  The program
	   download is included in the initial installation and
           can be used as the receive end of the download by 
	   using it as "download -r file_to_write".  If the CRC is
	   correct, the file is retained.  If the CRC is not 
	   correct, the file is deleted.

	f) some other method? (Let me know about it.)

  h) Load the tgz files.  Choose a place to put them.  I would make
	a directory /gz.files and put them there.  If you are "short
	on space," you might want to load them and extract them one
	at a time.  A minimum installation is "base" and "etc".  It
	takes about 32 Megs installed + 15 Megs for the base{:--:}OSrev.tgz.

  i) Extract the tar files in /.  For example, if your *.tgz were
	in a directory /gz.files, to extract base{:--:}OSrev.tgz you would:

	- cd / 
	- tar -xpzf /gz.files/base{:--:}OSrev.tgz

	Add v to the flags if you want a verbose extract.

  j) Extract at least "base" and "etc" for a new installation.  For
	"update" extracts, don't extract "etc" directly unless you 
	have saved your current /etc tree.  For "full" installations,
	extract all files.

  k) Edit the information in /etc

	- hosts   -  host name and address information
	- myname  -  your host name
	- mygate  -  hostname of gateway (assuming you have one)
	- resolv.conf - which nameserver to use
	- hostname.{sl0,ppp0,plip0} - interface hostname
	- netstart - configures the network and says if sendmail should
			be started
	- ttys    -  make sure the console entry has the correct speed
	- gettytab - I find "ap" instead of "ep" in the default entry
			works better for me.
	- fstab	  -  make sure it includes all partitions you want mounted
	- localtime - this is usually a link into /usr/share/zoneinfo

	Now you can adjust the kernel's default baud rate to match your
	monitor's default baud rate. Do the following:
		gdb -w /bsd
		set scndefaultrate = YOUR_BAUD_RATE
		quit
	where YOUR_BAUD_RATE is the actual value, 19200, 38400 or
	something slower than 9600.
	If you set scndefaultrate to something bogus, you'll probably
	not be able to reboot... So be careful!
	

  l) Reboot the machine and it should come up in multi-user mode *IF*
	you got it configured correctly.

  m) Enjoy!  And help fix bugs and improve OpenBSD/pc532!

@


1.8
log
@tweaks/OSrev/cleaning/'.tar.gz -> .tgz' .. etc ..
@
text
@@


1.7
log
@s/cpp/m4/g
@
text
@d159 1
a159 1
  h) Load the tar.gz files.  Choose a place to put them.  I would make
d163 1
a163 1
	takes about 32 Megs installed + 15 Megs for the base.tar.gz.
d165 2
a166 2
  i) Extract the tar files in /.  For example, if your *.tar.gz were
	in a directory /gz.files, to extract base.tar.gz you would:
d169 1
a169 1
	- tar -xpzf /gz.files/base.tar.gz
@


1.6
log
@typos.
@
text
@d5 1
a5 1
First, OpenBSD "autoconfigs" the scsi devices. inst-20.fs has only
d18 1
a18 1
Only sd0-sd3 are supported by the inst-20.fs kernel.
d44 1
a44 1
	The inst-20.fs kernel will come up with 9600 baud, 7 bits,
d49 1
a49 1
  b) Get inst-20.fs and boot the kernel.
d52 1
a52 1
	If you have a 1.44 meg SCSI floppy drive, you can put inst-20.fs
d61 2
a62 2
	You will need to load a copy of inst-20.fs into RAM.
		- load the inst-20.fs at 0x288000
d74 1
a74 1
	load a copy of inst-20.fs into RAM at 0x288000.  The boot
d84 1
a84 1
	on the inst-20.fs.  The usage is "factor number" and it lists
d117 1
a117 1
	be "relative to /" and should not include the leading "/".  Also,
d119 1
a119 1
	it might be the last one and have a copy of inst-20.fs) enter "NO"
@


1.5
log
@another update...
@
text
@d108 1
a108 1
	I "lost" only 60 sectors, but got a "resonable geometry".
d150 1
a150 1
	e) Use the ROM compatable "download" program.  The program
d201 1
a201 1
	not be able to reboot... So be carefull!
@


1.4
log
@Update for removal of GNU tar(1)
@
text
@d5 1
a5 1
First, OpenBSD "autoconfigs" the scsi devices. inst-11.fs has only
d18 1
a18 1
Only sd0-sd3 are supported by the inst-11.fs kernel.
d44 1
a44 1
	The inst-11.fs kernel will come up with 9600 baud, 7 bits,
d49 1
a49 1
  b) Get inst-11.fs and boot the kernel.
d52 1
a52 1
	If you have a 1.44 meg SCSI floppy drive, you can put inst-11.fs
d61 2
a62 2
	You will need to load a copy of inst-11.fs into RAM.
		- load the inst-11.fs at 0x288000
d74 1
a74 1
	load a copy of inst-11.fs into RAM at 0x288000.  The boot
d84 1
a84 1
	on the inst-11.fs.  The usage is "factor number" and it lists
d119 1
a119 1
	it might be the last one and have a copy of inst-11.fs) enter "NO"
@


1.3
log
@Did some s/NetBSD/OpenBSD/, s/netbsd/bsd/ and $OpenBSD$ additions.
However this stuff is largely related to NetBSD and must be completely
redone, if we will make real relases sometime
@
text
@d169 1
a169 1
	- tar -xpzf /gz.files/base.tar.gz --unlink
a171 4
	The --unlink is to make sure that the install versions
	of sh, init, ... are replaced by their proper versons
	in base.tar.gz.  I think it is wise to include the --unlink
	for other things.
@


1.2
log
@update from netbsd
@
text
@d1 1
a1 1
(IF you already have NetBSD/pc532 installed and you only want to update
d4 2
a5 2
To install NetBSD/pc532, there are several things you need to know.
First, NetBSD "autoconfigs" the scsi devices. inst-11.fs has only
d57 1
a57 1
		sdXa:/netbsd
d65 1
a65 1
		rd0a:/netbsd
d112 1
a112 1
	how many of those sectors you want to use for NetBSD. It also
d123 1
a123 1
  e) look around, if you want ... and then halt NetBSD.
d127 1
a127 1
	UFS boot program eventually times out and auto-loads /netbsd.
d148 1
a148 1
	d) cdrom (If you have a CD with NetBSD/532 ...)
d199 1
a199 1
		gdb -w /netbsd
d211 1
a211 1
  m) Enjoy!  And help fix bugs and improve NetBSD/pc532!
@


1.1
log
@Initial revision
@
text
@d49 4
a52 2
  b) Get inst-11.fs.
	If you have a 1.44 meg SCSI floppy drive, you can put this
d60 2
a61 1
	If you don't have a floppy drive, you will have to
d63 1
a63 1
		- run at 0x3EB820
d67 10
d103 1
a103 1
	Now I the number of tracks:
d119 3
a121 3
	it might be the last one and have a copy of ram.root and your
	kernels) enter "NO" to the mount point and it will not run newfs
	on the partition.  It will enter the partition into the disklabel.
d141 2
d150 6
a155 1
	e) using kermit. (See the notes at the end of this file.)
d172 2
a173 2
	The --unlink is to make sure that the "ram.root" versions
	of sh, init, ... are replaced by their full featured versons
d202 2
d206 1
a211 31


For those who choose to use kermit to help in getting NetBSD/pc532
installed:

	The following is the Kermit copyright:

	Copyright (C) 1985, 1994, Trustees of Columbia University in the
	City of New York.  The C-Kermit software may not be, in whole or
	in part, licensed or sold for profit as a software product
	itself, nor may it be included in or distributed with commercial
	products or otherwise distributed by commercial concerns to their
	clients or customers without written permission of the Office of
	Kermit Development and Distribution, Columbia University.  This
	copyright notice must not be removed, altered, or obscured.

	Due to this copyright, we can not include kermit with the standard
	NetBSD/pc532 distribution.  

	The Office of Kermit Development and Distribution of Columbia
	University in the City of New York has given permission for
	us to distribute a NetBSD/pc532 binary.  It is available primarily
	for bootstrapping purposes and therefore is not a complete package,
	lacking source code, various supporting text files, and the user
	manual. Users who wish to use C-Kermit after the bootstrapping
	process should obtain the full package, including the manual
	"Using C-Kermit", from Columbia University.

	The NetBSD/pc532 binary is available via ftp from 
	iceberg.cs.wwu.edu in the directory pub/NetBSD/pc532 as the file
	kermitbin.tar.gz.
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
