head	1.21;
access;
symbols
	OPENBSD_3_2:1.20.0.2
	OPENBSD_3_2_BASE:1.20
	OPENBSD_3_1:1.19.0.2
	OPENBSD_3_1_BASE:1.19
	OPENBSD_3_0:1.18.0.2
	OPENBSD_3_0_BASE:1.18
	OPENBSD_2_9:1.16.0.8
	OPENBSD_2_9_BASE:1.16
	OPENBSD_2_8:1.16.0.6
	OPENBSD_2_8_BASE:1.16
	OPENBSD_2_7:1.16.0.4
	OPENBSD_2_7_BASE:1.16
	OPENBSD_2_6:1.16.0.2
	OPENBSD_2_6_BASE:1.16
	OPENBSD_2_5:1.15.0.4
	OPENBSD_2_5_BASE:1.15
	OPENBSD_2_4:1.15.0.2
	OPENBSD_2_4_BASE:1.15
	OPENBSD_2_3:1.14.0.2
	OPENBSD_2_3_BASE:1.14
	OPENBSD_2_2:1.12.0.2
	OPENBSD_2_2_BASE:1.12
	OPENBSD_2_1:1.10.0.2
	OPENBSD_2_1_BASE:1.10
	OPENBSD_2_0:1.6.0.2
	OPENBSD_2_0_BASE:1.6
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.21
date	2002.12.31.16.35.34;	author miod;	state dead;
branches;
next	1.20;

1.20
date	2002.06.09.05.53.54;	author todd;	state Exp;
branches;
next	1.19;

1.19
date	2002.03.30.16.46.29;	author miod;	state Exp;
branches;
next	1.18;

1.18
date	2001.10.02.07.40.10;	author miod;	state Exp;
branches;
next	1.17;

1.17
date	2001.05.17.08.41.08;	author jj;	state Exp;
branches;
next	1.16;

1.16
date	99.10.08.14.46.54;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	98.05.18.00.33.30;	author todd;	state Exp;
branches;
next	1.14;

1.14
date	98.04.08.23.49.33;	author niklas;	state Exp;
branches;
next	1.13;

1.13
date	98.04.05.01.51.43;	author niklas;	state Exp;
branches;
next	1.12;

1.12
date	97.10.24.07.10.51;	author todd;	state Exp;
branches;
next	1.11;

1.11
date	97.10.01.23.14.24;	author todd;	state Exp;
branches;
next	1.10;

1.10
date	97.05.19.23.58.54;	author niklas;	state Exp;
branches;
next	1.9;

1.9
date	97.05.14.18.36.31;	author niklas;	state Exp;
branches;
next	1.8;

1.8
date	97.05.04.11.15.42;	author niklas;	state Exp;
branches;
next	1.7;

1.7
date	97.04.28.11.23.42;	author niklas;	state Exp;
branches;
next	1.6;

1.6
date	96.10.03.00.47.23;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	96.04.25.21.28.51;	author niklas;	state Exp;
branches;
next	1.4;

1.4
date	96.04.25.02.36.20;	author mickey;	state Exp;
branches;
next	1.3;

1.3
date	95.12.30.08.11.31;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	95.11.28.17.32.15;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.37.38;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.37.38;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.21
log
@amiga and sun3 turned out to not be y2k+3 compliant here. Remove them, as
well as the few userland tools which were only used on these platforms.
@
text
@dnl	$OpenBSD: prep,v 1.20 2002/06/09 05:53:54 todd Exp $
You will need an AmigaDOS hard drive prep tool to prepare you hard
drives for use with OpenBSD/amiga.  HDToolBox is provided with the
system software and on floppy installation disks since Release 2.0
of AmigaDOS so we will provide instructions for its use.

Preparing your hard disk with HDToolBox:

	If you intend to use a hard disk larger than 4GB, or partitions
	larger than 2GB be advised to either get HDToolBox for AmigaDOS 3.5
	or a third party hard disk preparation tool (such as HdInstTools)
	from Aminet, together with the appropriate patches from
	www.amiga.com to let AmigaDOS see the full size of the drive.

	A full explanation of HDToolBox can be found with your
	AmigaDOS manuals and is beyond the scope of this document.

	Note that you will be modifying your HD. If you mess something
	up here you could lose *EVERYTHING* on all the drives that
	you configure.  You are therefore advised to:

		Write down your current configuration.  Do this
		by examining each partition on the drive and the
		drives parameters (from Change drive type.)

		Back up all partitions you want to keep.

	What you need to do is partition your drives; creating at least
	root, swap and /usr partitions and possibly some more for
	/tmp, /var, /home or others of your own choice.  (The root and
	swap partitions must be on the same drive for your initial
	installation. You can use other configurations after building a
	customized kernel once your system is running.)  Partitioning is
	traditionally an area of great confusion and disagreement, and
	religion plays a large role in most advice you'll get.

	This should be done as the HDToolBox manual describes.  One thing
	to note is that if you are not using a Commodore controller you
	will need to specify the device your hard disk controller uses
	e.g. if you have a Warp Engine you would:

		from cli,
			hdtoolbox warpdrive.device

		from wb set the tooltype,
			SCSI_DEVICE_NAME=warpdrive.device

	The important things you need to do above and beyond normal
	partitioning includes (from Partition Drive section):

		Marking all OpenBSD partitions as non-bootable.

		Changing the file system parameters of the partitions
		to OpenBSD ones.  This must be done from the
		partitioning section and `Advanced options' must
		be enabled.  To Make the needed changes:

		- Click the `Adv. Options' button
		- Click the `Change filesystem' button

		- Choose `Custom File System'
		- Turn off `Automount' if on.
		- Set the dostype to one of these three choices:

			root partition  : 0x4e425207 ("NBR\7")
			swap partition  : 0x4e425301 ("NBS\1")
			other partitions: 0x4e425507 ("NBU\7")

		Here `other' refers to other partitions you will
		format for reading and writing under OpenBSD (e.g.
		/usr)

		Make sure you hit the return key to enter this value
		as some versions of HDToolBox will forget your entry
		if you don't.

		- Turn custom boot code off
		- Set Reserved Blocks start and end to 0.
		- Click Ok.

		Mask and maxtransfer are not used with OpenBSD.

		Until you compile your own kernel your swap partition
		must exist on the drive that also holds your root
		partition.

	
	Once this is done OpenBSD/amiga will be able to recognize your
	disks and which partitions it should use.

Choosing installation root filesystem type:

	The OpenBSD/amiga operating system can be installed using two
	different root filesystems: ramdisk or miniroot.  The ramdisk
	is strongly recommended as it requires less preparatory work.
	However the ramdisk kernel requires that your system has at
	least 6MB of fastmem.  The miniroot requires less (installs on
	a 4MB system should be possible) and has tools to make SLIP or
	PPP connections, which the ramdisk doesn't, however you need
	to be an experienced user to make use of these as the install
	scripts doesn't deal with them.  Furthermore the miniroot
	install requires you to do the preparation described in the
	following paragraph.  To use the ramdisk install you should get
	the bsd.rd kernel as well as the standard bsd one, and *do*
	skip the next section!

Transferring the miniroot filesystem:

	The OpenBSD/amiga installation or upgrade can use a "miniroot"
	filesystem which is installed on the partition used by OpenBSD
	for swapping.

	Once the hard disk has been prepared for OpenBSD, the miniroot
	filesystem (miniroot{:--:}OSrev.fs) is transferred to the swap partition
	configured during the hard disk prep (or the existing swap
	partition in the case of an upgrade).  The xstreamtodev utility
	provided in the "amiga/utilities" directory can be used on
	AmigaDOS to transfer the filesystem for either a new installation
	or an upgrade.  The filesystem can also be transferred on an
	existing OpenBSD (or NetBSD) system for an update by using dd.
	This should only be done after booting the former OS into single-
	user state.  It may also be possible to shutdown to single-user,
	providing that the single-user state processes are not using the
	swap partition.

	On AmigaDOS, the command:
		xstreamtodev --input=miniroot{:--:}OSrev.fs --rdb-name=<swap partition>
	where <swap partition> is the name you gave to the OpenBSD
	partition to be used for swapping.  If xstreamtodev is unable to
	determine the SCSI driver device name or the unit number of the
	specified partition, you may also need to {:-include-:} the option
	"--device=<driver.name>" and/or "--unit=<SCSI unit number>".

	To transfer the miniroot using an older BSD, you should be booted
	up in single user state on the current system, or use the
	"shutdown now" command to shutdown to single-user state.  Then
	copy the miniroot using dd:
		dd if=miniroot{:--:}OSrev.fs of=/dev/rsdXb
	where /dev/rsdXb should be the device path of the swap partition
	your system is configured to use.  Once the file is copied,
	reboot back to AmigaDOS to boot the new OpenBSD kernel.  NOTE:
	the release kernel is a "generic" kernel, and requires that the
	swap partition be on the same device as the root partition.
@


1.20
log
@knf
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.19 2002/03/30 16:46:29 miod Exp $
@


1.19
log
@Gb -> GB
@
text
@d1 1
a1 1
dnl	$OpenBSD$
d9 4
a12 4
	If you intend to use a hard disk larger than 4GB, or partitions 
	larger than 2GB be advised to either get HDToolBox for AmigaDOS 3.5 
	or a third party hard disk preparation tool (such as HdInstTools) 
	from Aminet, together with the appropriate patches from 
d18 2
a19 2
	Note that you will be modifying your HD. If you mess something 
	up here you could lose *EVERYTHING* on all the drives that 
@


1.18
log
@- try to bo more explicit about disk naming conventions
- update the description of the ramdisk behaviour
- fix a few typos or style issues
- remove 1st-person "methinks" blabla from original author
- shortens the upgrade description, remove completely obsolete stuff
- don't tell the user thrice the differences between the ramdisk and
  the miniroot

niklas@@ and jj@@ had no objections.
@
text
@d1 1
d9 2
a10 2
	If you intend to use a hard disk larger than 4 Gb, or partitions 
	larger than 2Gb be advised to either get HDToolBox for AmigaDOS 3.5 
@


1.17
log
@Only amiga install docs had the word "harddisk" in one word. Changed.
Also, replace "scsi controller" with "hard disk controller" since it could
in theory be an IDE controller.
@
text
@d34 1
a34 6
	religion plays a large role in most advice you'll get.  The
	author of this paragraph is a fan of large and few partitions,
	normally one per disk, unless it's the root disk, where I tend
	to have /, swap, /tmp, /var & /usr.  I must admit that I step
	aside from my normal rules of thumb very often due to the context
	the machine will work in.
@


1.16
log
@Tweaks by jj,
better grammar and spelling by me.
@
text
@d8 1
a8 1
	If you intend to use a harddisk larger than 4 Gb, or partitions 
d10 1
a10 1
	or a third party harddisk preparation tool (such as HdInstTools) 
d43 2
a44 2
	will need to specify the device your SCSI controller uses e.g.
	if you have a Warp Engine you would:
@


1.15
log
@s/cpp/m4/g
@
text
@d6 7
a12 1
Preparing you hard disk with HDToolBox:
d17 3
a19 3
	Note you will be modifying your HD's if you mess something 
	up here you could lose everything on all the drives that 
	you configure.  It is therefore advised that you:
d25 1
a25 1
		Back up the partitions you are keeping.
d69 3
a71 3
			root partition  : 0x4e425207
			swap partition  : 0x4e425301
			other partitions: 0x4e425507
@


1.14
log
@spelling and grammer & clarfication; marc espie
@
text
@d112 1
a112 1
	filesystem (miniroot23.fs) is transferred to the swap partition
d125 1
a125 1
		xstreamtodev --input=miniroot23.fs --rdb-name=<swap partition>
d129 1
a129 1
	specified partition, you may also need to include the option
d136 1
a136 1
		dd if=miniroot23.fs of=/dev/rsdXb
@


1.13
log
@2.3 cleanup
@
text
@d15 1
a15 1
		Write down your current configurations.  Do this
d93 1
a93 1
	is strongly recommended as it requires less preparation work.
@


1.12
log
@typos.
@
text
@d112 1
a112 1
	filesystem (miniroot22.fs) is transferred to the swap partition
d125 1
a125 1
		xstreamtodev --input=miniroot22.fs --rdb-name=<swap partition>
d136 1
a136 1
		dd if=miniroot22.fs of=/dev/rsdXb
@


1.11
log
@21 -> 22
@
text
@d108 1
a108 1
	fileystem which is installed on the partition used by OpenBSD
d134 1
a134 1
	"shutdown now" command to shutdown to single-uyser state.  Then
@


1.10
log
@Reflect reality better
@
text
@d112 1
a112 1
	filesystem (miniroot21.fs) is transferred to the swap partition
d125 1
a125 1
		xstreamtodev --input=miniroot21.fs --rdb-name=<swap partition>
d136 1
a136 1
		dd if=miniroot21.fs of=/dev/rsdXb
@


1.9
log
@nits
@
text
@d22 12
a33 5
	root, swap and /usr partitions and possibly at least one more for
	/local if you have the space. (The root and swap partitions must
	be on the same drive for your initial installation. You can use
	other configurations after building a customized kernel once your
	system is running.)
d89 16
d107 1
a107 1
	The OpenBSD/amiga installation or upgrade uses a "miniroot"
d109 1
a109 3
	for swapping.  This allows more utilities to be present on the
	filesystem than would be available when using an 880K floppy
	disk.
@


1.8
log
@Update to 2.1 preparation instructions
@
text
@d84 1
a84 1
	The OpenBSD/amiga installation or upgrade now uses a "miniroot"
d86 1
a86 3
	for swapping.  This removes the requirement of using a floppy
	disk for the filesystem used by the installation/upgrade
	process.  It also allows more utilities to be present on the
@


1.7
log
@2.1
@
text
@d87 1
a87 1
	disk for the filesystem used by the installation or upgrade
d92 12
a103 12
	Once the hard disk has been prepared for OpenBSD, the appropriate
	miniroot filesystem (inst-21.fs for a new install or upgr-21.fs
	for an upgrade) is transferred to the swap partition configured
	during the hard disk prep (or the existing swap parition in
	the case of an upgrade).  The xstreamtodev utility provided in
	the "amiga/utilities" directory can be used on AmigaDOS to
	transfer the filesystem for either a new installation or an
	upgrade.  The filesystem can also be transferred on an existing
	OpenBSD system for an update by using dd.  This should only be
	done after booting OpenBSD into single-user state.  It may also
	be possible to shutdown to single-user, providing that the
	single-user state processes are not using the swap partition.
d106 1
a106 1
		xstreamtodev --input=inst-21.fs --rdb-name=<swap partition>
d108 4
a111 6
	partition to be used for swapping.  Use upgr-21.fs if you
	are going to do an upgrade of an existing OpenBSD system.  If
	xstreamtodev is unable to determine the SCSI driver device
	name or the unit number of the specified partition, you may
	also need to include the option "--device=<driver.name>" and/or
	"--unit=<SCSI unit number>".
d113 2
a114 2
	To transfer the miniroot using OpenBSD, you should be booted up
	in single user state on the current OpenBSD system, or use the
d117 2
a118 2
		dd if=upgr-21.fs of=/dev/rsd0b
	where /dev/rsd0b should be the device path of the swap partition
d120 2
a121 2
	reboot back to AmigaDOS to boot the upgrade kernel.  NOTE:  the
	release kernel is a "generic" kernel, and requires that the
@


1.6
log
@another update...
@
text
@d93 1
a93 1
	miniroot filesystem (inst-20.fs for a new install or upgr-20.fs
d106 1
a106 1
		xstreamtodev --input=inst-20.fs --rdb-name=<swap partition>
d108 1
a108 1
	partition to be used for swapping.  Use upgr-20.fs if you
d119 1
a119 1
		dd if=upgr-20.fs of=/dev/rsd0b
@


1.5
log
@Did some s/NetBSD/OpenBSD/, s/netbsd/bsd/ and $OpenBSD$ additions.
However this stuff is largely related to NetBSD and must be completely
redone, if we will make real relases sometime
@
text
@d93 1
a93 1
	miniroot filesystem (inst-11.fs for a new install or upgr-11.fs
d106 1
a106 1
		xstreamtodev --input=inst-11.fs --rdb-name=<swap partition>
d108 1
a108 1
	partition to be used for swapping.  Use upgr-11.fs if you
d119 1
a119 1
		dd if=upgr-11.fs of=/dev/rsd0b
@


1.4
log
@sync w/ Net 960425
@
text
@d2 1
a2 1
drives for use with NetBSD/amiga.  HDToolBox is provided with the
d42 1
a42 1
		Marking all NetBSD partitions as non-bootable.
d45 1
a45 1
		to NetBSD ones.  This must be done from the
d61 1
a61 1
		format for reading and writing under NetBSD (e.g.
d72 1
a72 1
		Mask and maxtransfer are not used with NetBSD.
d79 1
a79 1
	Once this is done NetBSD/amiga will be able to recognize your
d84 2
a85 2
	The NetBSD/amiga installation or upgrade now uses a "miniroot"
	fileystem which is installed on the partition used by NetBSD
d92 1
a92 1
	Once the hard disk has been prepared for NetBSD, the appropriate
d100 2
a101 2
	NetBSD system for an update by using dd.  This should only be
	done after booting NetBSD into single-user state.  It may also
d107 1
a107 1
	where <swap partition> is the name you gave to the NetBSD
d109 1
a109 1
	are going to do an upgrade of an existing NetBSD system.  If
d115 2
a116 2
	To transfer the miniroot using NetBSD, you should be booted up
	in single user state on the current NetBSD system, or use the
@


1.3
log
@from netbsd; fix option and add info on disable sync. fixes pr#1802
@
text
@d21 6
a26 3
	What you need to do is partition your drives; creating
	at least root, swap and /usr partitions and possibly at least
	one more for /local if you have the space.
d106 1
a106 1
		xstreamtodev --input=inst-11.fs -rdb-name=<swap partition>
d112 2
a113 2
	also need to include the option "-device=<driver.name>" and/or
	"-unit=<SCSI unit number>".
@


1.2
log
@update from netbsd
@
text
@d103 1
a103 1
		xstreamtodev -input=inst-11.fs -rdb-name=<swap partition>
@


1.1
log
@Initial revision
@
text
@d79 43
a121 2
>>> Should the miniroot transfer to the swap partition instructions
>>> go here?
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
