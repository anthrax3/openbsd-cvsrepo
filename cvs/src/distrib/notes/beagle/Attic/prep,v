head	1.4;
access;
symbols
	OPENBSD_5_4:1.2.0.2
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.1.0.8
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.6
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.2
	OPENBSD_5_0:1.1.0.4
	OPENBSD_5_0_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2013.09.04.20.00.28;	author patrick;	state dead;
branches;
next	1.3;

1.3
date	2013.08.07.19.24.54;	author bmercer;	state Exp;
branches;
next	1.2;

1.2
date	2013.07.16.18.15.10;	author florian;	state Exp;
branches;
next	1.1;

1.1
date	2011.03.22.18.33.51;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Beagle has been replaced by armv7.
@
text
@dnl	$OpenBSD: prep,v 1.3 2013/08/07 19:24:54 bmercer Exp $
Please be aware that OpenBSD support for this platform is far from
complete.

At the moment the only way to boot the OpenBSD install is to copy the
miniroot for your board "miniroot-{am335x,beagle,panda}-{:--:}OSrev.fs"
image to a sdcard.

As a result you need another machine to plug the sdcard in. Any
machine type will do, as long as it supports sdcard storage devices.
Under OpenBSD, it will appear as a ``sd'' device, for example sd1.

Use the dd(1) utility to copy the miniroot to the hard drive.
The command would likely be, under OpenBSD:
	dd if=miniroot-beagle-{:--:}OSrev.fs of=/dev/rsd1c

When you have connected the BeagleBoard to you computer, a command such
as "tip -115200 tty00" (assuming tty00 is your serial port device) should
connect you to the board's console.

Note: By default the BeagleBone Black will boot from the internal emmc. 
In order to make it boot from the micro sdcard, you will need to hold down
the small button located by the sdcard slot while powering on the board. 
Once you have done this the board will boot from the sdcard as the default. 
@


1.3
log
@Add a note about booting from the sdcard on beaglebone black.
OK florian@@
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.2 2013/07/16 18:15:10 florian Exp $
@


1.2
log
@Document (not so) recent developments.

input/ok bmercer@@, rapha@@, patrick@@ (previous version)
@
text
@d1 1
a1 1
dnl	$OpenBSD: prep,v 1.1 2011/03/22 18:33:51 jasper Exp $
d20 5
@


1.1
log
@add a first batch of notes for beagle, still rough and far from complete,
but one should be able to get an xM booting with these instructions.

"throw them in, then we can fix." drahn@@
@
text
@d1 1
a1 2
dnl	$OpenBSD$

d3 1
a3 85
complete and that these instructions may still be rough.

If you are using a BeagleBoard xM you can use the following script to
create a bootable SD card:

#!/bin/sh
#
# Written by Dale Rahn <drahn@@openbsd.org>, 2011.
#
# Create a bootable partition on ${DRIVE} for use with BeagleBoard xM.

echo $#
if (( $# < 3 ))
then
	echo fail
	exit 4
fi

DRIVE=$1
MLO=$2
UBOOT=$3

echo DRIVE ${DRIVE}
echo MLO ${MLO}
echo UBOOT ${UBOOT}

SIZE=$(fdisk ${DRIVE} | grep Disk | awk '{ print $5 }' | sed -e 's/\[//')

echo size ${SIZE}

CYL=$(echo ${SIZE}/255/63|bc)
echo cyl ${CYL}

MAXCYL=$(echo  ${CYL} - 1 | bc)

echo MAXCYL ${MAXCYL}

CHS="-c ${CYL} -h 255 -s 63"

echo CHS ${CHS}

dd if=/dev/zero of=/dev/r${DRIVE}c bs=1m count=1 2>/dev/null

fdisk ${CHS} -yi ${DRIVE} >/dev/null

fdisk ${CHS} -e ${DRIVE} >/dev/null << DONE
e 0
C
y
0
1
1
4
254
63
f 0
e 3
A6
y
5
0
1
${MAXCYL}
254
63
w
q
DONE

disklabel -c ${DRIVE}

# if msdos partition is > 32MB make this FAT32, not FAT16
newfs_msdos -F 16 -L boot /dev/r${DRIVE}i >/dev/null

mount /dev/${DRIVE}i /mnt
cp ${MLO} /mnt/MLO
cp ${UBOOT} /mnt/u-boot.bin
umount /mnt
sync
----------------------------EOF-----------------------------

You can download the signed U-Boot image here: http://humppa.nl/xM/MLO .
The U-boot binary can be downloaded here: http://humppa.nl/xM/u-boot.bin .

Insert the card into your computer and call the script like:
d5 11
a15 1
	# sh beagle_fmt_sd sd1 ./MLO ./u-boot.bin
@

