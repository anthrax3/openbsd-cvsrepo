head	1.2;
access;
symbols
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.4
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.2
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.1.0.6
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.2
	OPENBSD_5_7_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2015.10.15.15.11.10;	author semarie;	state Exp;
branches;
next	1.1;
commitid	Ku0Mi2yDsPNOS1Oo;

1.1
date	2014.12.23.17.16.02;	author deraadt;	state Exp;
branches;
next	;
commitid	T61appZAd8QZxNl5;


desc
@@


1.2
log
@corrects pledge code for fsck_ffs and fsck_ext2fs

on filesystem error, fsck will try to display username of inode, resulting need
of "getpw" for not SMALL version.

add a missed (?) -DSMALL in distrib/special/ for fsck_ffs and fsck_ext2fs

found by hard way by ajacoutot@@

OK millert@@
@
text
@#	$OpenBSD: Makefile,v 1.1 2014/12/23 17:16:02 deraadt Exp $

PROG=	fsck_ext2fs
MAN=    fsck_ext2fs.8
SRCS=	dir.c inode.c main.c pass1.c pass1b.c pass2.c pass3.c pass4.c \
	pass5.c fsutil.c setup.c utilities.c ext2fs_bswap.c
CFLAGS+= -I${.CURDIR}/../../../sbin/fsck -DSMALL

.PATH:	${.CURDIR}/../../../sbin/fsck_ext2fs
.PATH:	${.CURDIR}/../../../sbin/fsck
.PATH:	${.CURDIR}/../../../sys/ufs/ext2fs
.include <bsd.prog.mk>
@


1.1
log
@/bin and /sbin are moving towards static PIE, so on many architectures
the PIC .o files are unsuitable for static "instbin".  This adds more
work at build time, but the result will be optimized for size.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 2001/09/18 13:31:29 art Exp $
d7 1
a7 1
CFLAGS+= -I${.CURDIR}/../../../sbin/fsck
@

