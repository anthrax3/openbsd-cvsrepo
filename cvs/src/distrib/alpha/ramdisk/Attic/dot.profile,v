head	1.13;
access;
symbols
	OPENBSD_2_8:1.11.0.2
	OPENBSD_2_8_BASE:1.11
	OPENBSD_2_7:1.10.0.2
	OPENBSD_2_7_BASE:1.10
	OPENBSD_2_6:1.9.0.8
	OPENBSD_2_6_BASE:1.9
	OPENBSD_2_5:1.9.0.6
	OPENBSD_2_5_BASE:1.9
	OPENBSD_2_4:1.9.0.4
	OPENBSD_2_4_BASE:1.9
	OPENBSD_2_3:1.9.0.2
	OPENBSD_2_3_BASE:1.9
	OPENBSD_2_2:1.7.0.2
	OPENBSD_2_2_BASE:1.7
	OPENBSD_2_1:1.3.0.2
	OPENBSD_2_1_BASE:1.3;
locks; strict;
comment	@# @;


1.13
date	2001.01.29.21.25.50;	author deraadt;	state dead;
branches;
next	1.12;

1.12
date	2001.01.23.20.54.41;	author art;	state Exp;
branches;
next	1.11;

1.11
date	2000.10.25.16.38.11;	author millert;	state Exp;
branches;
next	1.10;

1.10
date	2000.01.30.01.21.16;	author deraadt;	state Exp;
branches;
next	1.9;

1.9
date	98.04.13.01.17.16;	author deraadt;	state Exp;
branches;
next	1.8;

1.8
date	98.04.13.01.04.26;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	97.10.25.05.40.55;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	97.10.25.04.35.33;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	97.10.20.22.23.59;	author millert;	state Exp;
branches;
next	1.4;

1.4
date	97.07.31.17.10.13;	author millert;	state Exp;
branches;
next	1.3;

1.3
date	97.05.11.18.44.34;	author millert;	state Exp;
branches;
next	1.2;

1.2
date	97.05.08.06.13.42;	author millert;	state Exp;
branches;
next	1.1;

1.1
date	97.05.07.12.46.55;	author niklas;	state Exp;
branches;
next	;


desc
@@


1.13
log
@three floppies, and a bsd.rd for the CD
@
text
@#
#	$OpenBSD: dot.profile,v 1.12 2001/01/23 20:54:41 art Exp $
#
# Copyright (c) 1994 Christopher G. Demetriou
# All rights reserved.
# 
# Redistribution and use in source and binary forms, with or without
# modification, are permitted provided that the following conditions
# are met:
# 1. Redistributions of source code must retain the above copyright
#    notice, this list of conditions and the following disclaimer.
# 2. Redistributions in binary form must reproduce the above copyright
#    notice, this list of conditions and the following disclaimer in the
#    documentation and/or other materials provided with the distribution.
# 3. All advertising materials mentioning features or use of this software
#    must display the following acknowledgement:
#	This product includes software developed by Christopher G. Demetriou.
# 4. The name of the author may not be used to endorse or promote products
#    derived from this software without specific prior written permission
#
# THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
# IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
# OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
# IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
# INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
# NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
# DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
# THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
# (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
# THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
#

export PATH=/sbin:/bin:/usr/bin:/usr/sbin:/
export HISTFILE=/.sh_history

umask 022

set -o emacs # emacs-style command line editing
alias dmesg="cat /kern/msgbuf"

# XXX
# the TERM/EDITOR stuff is really well enough parameterized to be moved
# into install.sub where it could use the routines there and be invoked
# from the various (semi) MI install and upgrade scripts

# Terminals in termcap, default TERM.
# This assumes a *small* termcap file.
TERMS=`grep '^[A-z]' /usr/share/misc/termcap | sed -e 's/|[^|]*$//' -e 's/|/ /g'`
TERM=sun
PAGER=more

if [ "X${DONEPROFILE}" = "X" ]; then
	DONEPROFILE=YES

	# need a writable root
	mount /dev/rd0a /

	isin() {
		local   _a

		_a=$1; shift
		while [ $# != 0 ]; do
			if [ "$_a" = "$1" ]; then return 0; fi
			shift
		done
		return 1
	}


	# set up some sane defaults
	echo 'erase ^?, werase ^W, kill ^U, intr ^C, status ^T'
	stty newcrt werase ^W intr ^C kill ^U erase ^? status ^T 9600
	echo ''

	# get the terminal type
	echo "Supported terminals are:"
	echo $TERMS
	_forceloop=""
	while [ "X$_forceloop" = X"" ]; do
		echo -n "TERM = ($TERM) "
		read resp
		if [ "X$resp" = "X" ]; then
			break
		fi
		if isin $resp $TERMS ; then
			TERM=$resp
			break;
		fi
		echo "Type $resp unknown."
	done
	export TERM

	# Installing or upgrading?
	_forceloop=""
	while [ "X$_forceloop" = X"" ]; do
		echo -n '(I)nstall, (U)pgrade, or (S)hell? '
		read _forceloop
		case "$_forceloop" in
			i*|I*)
				/install
				;;

			u*|U*)
				/upgrade
				;;

			s*|S*)
				;;

			*)
				_forceloop=""
				;;
		esac
	done
fi
@


1.12
log
@Cleanup a lot to make the floppy fit.
dhclient, rsh, expr, upgrade and a few obsolete things removed.
some build options improved.
@
text
@d2 1
a2 1
#	$OpenBSD: dot.profile,v 1.11 2000/10/25 16:38:11 millert Exp $
@


1.11
log
@In stty line enable ^T (status) as well.
@
text
@d2 1
a2 1
#	$OpenBSD: dot.profile,v 1.10 2000/01/30 01:21:16 deraadt Exp $
a91 4

	# pull in the functions that people will use from the shell prompt.
	. /.commonutils
	. /.instutils
@


1.10
log
@add dmesg alias to all install media
@
text
@d2 1
a2 1
#	$OpenBSD: dot.profile,v 1.9 1998/04/13 01:17:16 deraadt Exp $
d71 2
a72 2
	echo 'erase ^?, werase ^W, kill ^U, intr ^C'
	stty newcrt werase ^W intr ^C kill ^U erase ^? 9600
@


1.9
log
@put (S)hell into the prompt too
@
text
@d2 1
a2 1
#	$OpenBSD: dot.profile,v 1.8 1998/04/13 01:04:26 millert Exp $
d39 1
@


1.8
log
@prompt for install/upgrade like i386
@
text
@d2 1
a2 1
#	$OpenBSD: dot.profile,v 1.7 1997/10/25 05:40:55 deraadt Exp $
d99 1
a99 1
		echo -n '(I)nstall or (U)pgrade? '
d108 3
@


1.7
log
@set TERM... geezzz...
@
text
@d2 1
a2 1
#	$OpenBSD: dot.profile,v 1.6 1997/10/25 04:35:33 deraadt Exp $
d96 19
a114 2
	# run the installation script.
	install
@


1.6
log
@pager is more
@
text
@d2 1
a2 1
#	$OpenBSD: dot.profile,v 1.5 1997/10/20 22:23:59 millert Exp $
d85 1
@


1.5
log
@Enable history and emacs-stye command editing.  A lot of this stuff
is not used but who knows what...
@
text
@d2 1
a2 1
#	$OpenBSD: dot.profile,v 1.4 1997/07/31 17:10:13 millert Exp $
d49 1
@


1.4
log
@Make default termtype sun, not ansi-mini
@
text
@d2 1
a2 1
#	$OpenBSD: dot.profile,v 1.3 1997/05/11 18:44:34 millert Exp $
d33 2
a34 2
PATH=/sbin:/bin:/usr/bin:/usr/sbin:/
export PATH
d37 2
@


1.3
log
@Ask user for term type, allowing anything in the stub termcap file.
@
text
@d2 1
a2 1
#	$OpenBSD: dot.profile,v 1.2 1997/05/08 06:13:42 millert Exp $
d46 1
a46 1
TERM=ansi-mini
@


1.2
log
@Mount / rw asap since pdksh wants to scribble in /tmp early on.
@
text
@d2 1
a2 1
#	$OpenBSD: dot.profile,v 1.1 1997/05/07 12:46:55 niklas Exp $
a34 2
TERM=vt200
export TERM
d36 20
a55 11
# set up some sane defaults
echo 'erase ^?, werase ^H, kill ^U, intr ^C'
stty newcrt werase ^H intr ^C kill ^U erase ^? 9600
echo ''

# mount / rw
mount /dev/rd0a /

# pull in the function definitions that people will use from the shell prompt.
. /.commonutils
. /.instutils
d57 38
a94 3
# run the installation script.
umask 022
install
@


1.1
log
@*Very* rough cut at a ramdisk-kernel that fits onto a floppy.
The ecoffrdsetroot support is from millert@@openbsd.org.  Mostly copied from
the powerpc ports, thus a lot of powerpc specific stuff remains.
Needs a lot of work, hopefully done in the next few days.
@
text
@d2 1
a2 1
#	$OpenBSD: dot.profile,v 1.1 1995/07/18 04:13:09 briggs Exp $
d42 3
@
