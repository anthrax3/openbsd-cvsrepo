head	1.7;
access;
symbols
	OPENBSD_6_1:1.5.0.8
	OPENBSD_6_1_BASE:1.5
	OPENBSD_6_0:1.5.0.6
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.2
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.2.0.8
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.6
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.4
	OPENBSD_5_6_BASE:1.2;
locks; strict;
comment	@ * @;


1.7
date	2017.09.30.07.36.56;	author robert;	state Exp;
branches;
next	1.6;
commitid	XkWOvf4INOmfke72;

1.6
date	2017.07.06.10.09.26;	author jsg;	state Exp;
branches;
next	1.5;
commitid	nTF7Eacs19gAgUWr;

1.5
date	2015.09.28.09.43.45;	author jsg;	state Exp;
branches;
next	1.4;
commitid	ZOuNA3McnPWBUWRo;

1.4
date	2015.09.24.15.35.23;	author jsg;	state Exp;
branches;
next	1.3;
commitid	LgiAdlFiqVHmIi9a;

1.3
date	2015.09.23.23.12.11;	author kettenis;	state Exp;
branches;
next	1.2;
commitid	lQlppvmETCN49oZe;

1.2
date	2014.07.12.23.31.07;	author jsg;	state Exp;
branches;
next	1.1;
commitid	0mj6Mp0XklOc1BrZ;

1.1
date	2014.07.12.23.16.23;	author jsg;	state Exp;
branches;
next	;
commitid	O24jDaMgu2Gu8oh0;


desc
@@


1.7
log
@Add preliminary kabylake support to inteldrm(4) by backporting the relevant
commits from linux-4.8.x.
The changes are quiet minimal due to the fact that kabylake and skylake share
most of the code because they are both gen9 graphics.
This was tested by many and was also in snapshots for a while.

ok kettenis@@
@
text
@/* THIS FILE AUTOMATICALLY GENERATED.  DO NOT EDIT. */
static const struct pci_matchid i915_devices[] = {
	{ 0x8086, 0x3577 },
	{ 0x8086, 0x2562 },
	{ 0x8086, 0x3582 },
	{ 0x8086, 0x358e },
	{ 0x8086, 0x2572 },
	{ 0x8086, 0x2582 },
	{ 0x8086, 0x258a },
	{ 0x8086, 0x2592 },
	{ 0x8086, 0x2772 },
	{ 0x8086, 0x27a2 },
	{ 0x8086, 0x27ae },
	{ 0x8086, 0x2972 },
	{ 0x8086, 0x2982 },
	{ 0x8086, 0x2992 },
	{ 0x8086, 0x29a2 },
	{ 0x8086, 0x29b2 },
	{ 0x8086, 0x29c2 },
	{ 0x8086, 0x29d2 },
	{ 0x8086, 0x2a02 },
	{ 0x8086, 0x2a12 },
	{ 0x8086, 0x2a42 },
	{ 0x8086, 0x2e02 },
	{ 0x8086, 0x2e12 },
	{ 0x8086, 0x2e22 },
	{ 0x8086, 0x2e32 },
	{ 0x8086, 0x2e42 },
	{ 0x8086, 0x2e92 },
	{ 0x8086, 0xa001 },
	{ 0x8086, 0xa011 },
	{ 0x8086, 0x0042 },
	{ 0x8086, 0x0046 },
	{ 0x8086, 0x0102 },
	{ 0x8086, 0x0112 },
	{ 0x8086, 0x0122 },
	{ 0x8086, 0x010a },
	{ 0x8086, 0x0106 },
	{ 0x8086, 0x0116 },
	{ 0x8086, 0x0126 },
	{ 0x8086, 0x0156 },
	{ 0x8086, 0x0166 },
	{ 0x8086, 0x0152 },
	{ 0x8086, 0x0162 },
	{ 0x8086, 0x015a },
	{ 0x8086, 0x016a },
	{ 0x8086, 0x0402 },
	{ 0x8086, 0x0412 },
	{ 0x8086, 0x0422 },
	{ 0x8086, 0x040a },
	{ 0x8086, 0x041a },
	{ 0x8086, 0x042a },
	{ 0x8086, 0x040b },
	{ 0x8086, 0x041b },
	{ 0x8086, 0x042b },
	{ 0x8086, 0x040e },
	{ 0x8086, 0x041e },
	{ 0x8086, 0x042e },
	{ 0x8086, 0x0c02 },
	{ 0x8086, 0x0c12 },
	{ 0x8086, 0x0c22 },
	{ 0x8086, 0x0c0a },
	{ 0x8086, 0x0c1a },
	{ 0x8086, 0x0c2a },
	{ 0x8086, 0x0c0b },
	{ 0x8086, 0x0c1b },
	{ 0x8086, 0x0c2b },
	{ 0x8086, 0x0c0e },
	{ 0x8086, 0x0c1e },
	{ 0x8086, 0x0c2e },
	{ 0x8086, 0x0a02 },
	{ 0x8086, 0x0a12 },
	{ 0x8086, 0x0a22 },
	{ 0x8086, 0x0a0a },
	{ 0x8086, 0x0a1a },
	{ 0x8086, 0x0a2a },
	{ 0x8086, 0x0a0b },
	{ 0x8086, 0x0a1b },
	{ 0x8086, 0x0a2b },
	{ 0x8086, 0x0d02 },
	{ 0x8086, 0x0d12 },
	{ 0x8086, 0x0d22 },
	{ 0x8086, 0x0d0a },
	{ 0x8086, 0x0d1a },
	{ 0x8086, 0x0d2a },
	{ 0x8086, 0x0d0b },
	{ 0x8086, 0x0d1b },
	{ 0x8086, 0x0d2b },
	{ 0x8086, 0x0d0e },
	{ 0x8086, 0x0d1e },
	{ 0x8086, 0x0d2e },
	{ 0x8086, 0x0406 },
	{ 0x8086, 0x0416 },
	{ 0x8086, 0x0426 },
	{ 0x8086, 0x0c06 },
	{ 0x8086, 0x0c16 },
	{ 0x8086, 0x0c26 },
	{ 0x8086, 0x0a06 },
	{ 0x8086, 0x0a16 },
	{ 0x8086, 0x0a26 },
	{ 0x8086, 0x0a0e },
	{ 0x8086, 0x0a1e },
	{ 0x8086, 0x0a2e },
	{ 0x8086, 0x0d06 },
	{ 0x8086, 0x0d16 },
	{ 0x8086, 0x0d26 },
	{ 0x8086, 0x0f30 },
	{ 0x8086, 0x0f31 },
	{ 0x8086, 0x0f32 },
	{ 0x8086, 0x0f33 },
	{ 0x8086, 0x0157 },
	{ 0x8086, 0x0155 },
	{ 0x8086, 0x1602 },
	{ 0x8086, 0x1606 },
	{ 0x8086, 0x160b },
	{ 0x8086, 0x160e },
	{ 0x8086, 0x1612 },
	{ 0x8086, 0x1616 },
	{ 0x8086, 0x161b },
	{ 0x8086, 0x161e },
	{ 0x8086, 0x160a },
	{ 0x8086, 0x160d },
	{ 0x8086, 0x161a },
	{ 0x8086, 0x161d },
	{ 0x8086, 0x1622 },
	{ 0x8086, 0x1626 },
	{ 0x8086, 0x162b },
	{ 0x8086, 0x162e },
	{ 0x8086, 0x162a },
	{ 0x8086, 0x162d },
	{ 0x8086, 0x22b0 },
	{ 0x8086, 0x22b1 },
	{ 0x8086, 0x22b2 },
	{ 0x8086, 0x22b3 },
	{ 0x8086, 0x1906 },
	{ 0x8086, 0x190e },
	{ 0x8086, 0x1902 },
	{ 0x8086, 0x190b },
	{ 0x8086, 0x190a },
	{ 0x8086, 0x1916 },
	{ 0x8086, 0x1921 },
	{ 0x8086, 0x191e },
	{ 0x8086, 0x1912 },
	{ 0x8086, 0x191b },
	{ 0x8086, 0x191a },
	{ 0x8086, 0x191d },
	{ 0x8086, 0x1923 },
	{ 0x8086, 0x1926 },
	{ 0x8086, 0x1927 },
	{ 0x8086, 0x192b },
	{ 0x8086, 0x192a },
	{ 0x8086, 0x0a84 },
	{ 0x8086, 0x1a84 },
	{ 0x8086, 0x1a85 },
	{ 0x8086, 0x5a84 },
	{ 0x8086, 0x5a85 },
	{ 0x8086, 0x5913 },
	{ 0x8086, 0x5915 },
	{ 0x8086, 0x5917 },
	{ 0x8086, 0x5906 },
	{ 0x8086, 0x590e },
	{ 0x8086, 0x5902 },
	{ 0x8086, 0x590b },
	{ 0x8086, 0x590a },
	{ 0x8086, 0x5916 },
	{ 0x8086, 0x5921 },
	{ 0x8086, 0x591e },
	{ 0x8086, 0x5912 },
	{ 0x8086, 0x591b },
	{ 0x8086, 0x591a },
	{ 0x8086, 0x591d },
	{ 0x8086, 0x5926 },
	{ 0x8086, 0x592b },
	{ 0x8086, 0x592a },
	{ 0x8086, 0x5932 },
	{ 0x8086, 0x593b },
	{ 0x8086, 0x593a },
	{ 0x8086, 0x593d },
};
@


1.6
log
@sync the list of pci devices which don't require aperture
ok kettenis@@
@
text
@d157 22
@


1.5
log
@remove duplicate entry caused by the "Quanta Transcode" device
@
text
@d121 4
a128 4
	{ 0x8086, 0x160a },
	{ 0x8086, 0x160d },
	{ 0x8086, 0x161a },
	{ 0x8086, 0x161d },
d131 26
@


1.4
log
@The devlist awk script didn't pickup the broadwell ids as they are
encoded with shifts.  Switch to a file constructed by iterating
through i915_drv.c pciidlist so these will be included.

ok kettenis@@
@
text
@a40 1
	{ 0x8086, 0x016a },
@


1.3
log
@Update inteldrm to the code from Linux 3.14.52 (which corresponds to
commit 48f8f36a6c8018c2b36ea207aaf68ef5326c5075 on the linux-3.14.y
branch of the linux-stable tree).  This brings preliminary support for
the GPU on Intel's Broadwell CPUs.  Don't expect these to work
perfectly yet.  There are some remaining issues with older hardware as
well, but no significant regressions have been uncovered.

This also updates some of drm core code.  The radeondrm code remains
based on Linux 3.8 with some minimal canges to adjust to changes in
the core drm APIs.

Joint effort with jsg@@, who did the initial update of the relevant drm
core bits.  Committing this early to make sure it gets more testing
and make it possible for others to help getting the remaining wrinkles
straightened out.
@
text
@d37 1
a37 1
	{ 0x8086, 0x010A },
d41 1
d54 39
a92 39
	{ 0x8086, 0x040B },
	{ 0x8086, 0x041B },
	{ 0x8086, 0x042B },
	{ 0x8086, 0x040E },
	{ 0x8086, 0x041E },
	{ 0x8086, 0x042E },
	{ 0x8086, 0x0C02 },
	{ 0x8086, 0x0C12 },
	{ 0x8086, 0x0C22 },
	{ 0x8086, 0x0C0A },
	{ 0x8086, 0x0C1A },
	{ 0x8086, 0x0C2A },
	{ 0x8086, 0x0C0B },
	{ 0x8086, 0x0C1B },
	{ 0x8086, 0x0C2B },
	{ 0x8086, 0x0C0E },
	{ 0x8086, 0x0C1E },
	{ 0x8086, 0x0C2E },
	{ 0x8086, 0x0A02 },
	{ 0x8086, 0x0A12 },
	{ 0x8086, 0x0A22 },
	{ 0x8086, 0x0A0A },
	{ 0x8086, 0x0A1A },
	{ 0x8086, 0x0A2A },
	{ 0x8086, 0x0A0B },
	{ 0x8086, 0x0A1B },
	{ 0x8086, 0x0A2B },
	{ 0x8086, 0x0D02 },
	{ 0x8086, 0x0D12 },
	{ 0x8086, 0x0D22 },
	{ 0x8086, 0x0D0A },
	{ 0x8086, 0x0D1A },
	{ 0x8086, 0x0D2A },
	{ 0x8086, 0x0D0B },
	{ 0x8086, 0x0D1B },
	{ 0x8086, 0x0D2B },
	{ 0x8086, 0x0D0E },
	{ 0x8086, 0x0D1E },
	{ 0x8086, 0x0D2E },
d96 12
a107 12
	{ 0x8086, 0x0C06 },
	{ 0x8086, 0x0C16 },
	{ 0x8086, 0x0C26 },
	{ 0x8086, 0x0A06 },
	{ 0x8086, 0x0A16 },
	{ 0x8086, 0x0A26 },
	{ 0x8086, 0x0A0E },
	{ 0x8086, 0x0A1E },
	{ 0x8086, 0x0A2E },
	{ 0x8086, 0x0D06 },
	{ 0x8086, 0x0D16 },
	{ 0x8086, 0x0D26 },
d114 18
@


1.2
log
@regen
@
text
@d37 1
a40 1
	{ 0x8086, 0x010A },
a52 3
	{ 0x8086, 0x0406 },
	{ 0x8086, 0x0416 },
	{ 0x8086, 0x0426 },
a64 3
	{ 0x8086, 0x0C06 },
	{ 0x8086, 0x0C16 },
	{ 0x8086, 0x0C26 },
a76 3
	{ 0x8086, 0x0A06 },
	{ 0x8086, 0x0A16 },
	{ 0x8086, 0x0A26 },
a79 3
	{ 0x8086, 0x0A0E },
	{ 0x8086, 0x0A1E },
	{ 0x8086, 0x0A2E },
a85 3
	{ 0x8086, 0x0D06 },
	{ 0x8086, 0x0D16 },
	{ 0x8086, 0x0D26 },
d92 21
@


1.1
log
@Print a line in dmesg to indicate if the aperture driver is
required to run X.  This will be used by the installer to decide
what value to set machdep.allowaperture to.

For devices supported by i915 and radeon kms machdep.allowaperture
will be set to 0.  Systems that have a graphics device commonly
found in servers (g200e*/aspeed/es1000 etc) will also not have
the aperture enabled as they generally don't need to run X.

ok deraadt@@ kettenis@@
@
text
@d3 104
a106 104
	{ 0x8086, 0x357 },
	{ 0x8086, 0x256 },
	{ 0x8086, 0x358 },
	{ 0x8086, 0x358 },
	{ 0x8086, 0x257 },
	{ 0x8086, 0x258 },
	{ 0x8086, 0x258 },
	{ 0x8086, 0x259 },
	{ 0x8086, 0x277 },
	{ 0x8086, 0x27a },
	{ 0x8086, 0x27a },
	{ 0x8086, 0x297 },
	{ 0x8086, 0x298 },
	{ 0x8086, 0x299 },
	{ 0x8086, 0x29a },
	{ 0x8086, 0x29b },
	{ 0x8086, 0x29c },
	{ 0x8086, 0x29d },
	{ 0x8086, 0x2a0 },
	{ 0x8086, 0x2a1 },
	{ 0x8086, 0x2a4 },
	{ 0x8086, 0x2e0 },
	{ 0x8086, 0x2e1 },
	{ 0x8086, 0x2e2 },
	{ 0x8086, 0x2e3 },
	{ 0x8086, 0x2e4 },
	{ 0x8086, 0x2e9 },
	{ 0x8086, 0xa00 },
	{ 0x8086, 0xa01 },
	{ 0x8086, 0x004 },
	{ 0x8086, 0x004 },
	{ 0x8086, 0x010 },
	{ 0x8086, 0x011 },
	{ 0x8086, 0x012 },
	{ 0x8086, 0x010 },
	{ 0x8086, 0x011 },
	{ 0x8086, 0x012 },
	{ 0x8086, 0x010 },
	{ 0x8086, 0x015 },
	{ 0x8086, 0x016 },
	{ 0x8086, 0x015 },
	{ 0x8086, 0x016 },
	{ 0x8086, 0x015 },
	{ 0x8086, 0x016 },
	{ 0x8086, 0x040 },
	{ 0x8086, 0x041 },
	{ 0x8086, 0x042 },
	{ 0x8086, 0x040 },
	{ 0x8086, 0x041 },
	{ 0x8086, 0x042 },
	{ 0x8086, 0x040 },
	{ 0x8086, 0x041 },
	{ 0x8086, 0x042 },
	{ 0x8086, 0x040 },
	{ 0x8086, 0x041 },
	{ 0x8086, 0x042 },
	{ 0x8086, 0x040 },
	{ 0x8086, 0x041 },
	{ 0x8086, 0x042 },
	{ 0x8086, 0x0C0 },
	{ 0x8086, 0x0C1 },
	{ 0x8086, 0x0C2 },
	{ 0x8086, 0x0C0 },
	{ 0x8086, 0x0C1 },
	{ 0x8086, 0x0C2 },
	{ 0x8086, 0x0C0 },
	{ 0x8086, 0x0C1 },
	{ 0x8086, 0x0C2 },
	{ 0x8086, 0x0C0 },
	{ 0x8086, 0x0C1 },
	{ 0x8086, 0x0C2 },
	{ 0x8086, 0x0C0 },
	{ 0x8086, 0x0C1 },
	{ 0x8086, 0x0C2 },
	{ 0x8086, 0x0A0 },
	{ 0x8086, 0x0A1 },
	{ 0x8086, 0x0A2 },
	{ 0x8086, 0x0A0 },
	{ 0x8086, 0x0A1 },
	{ 0x8086, 0x0A2 },
	{ 0x8086, 0x0A0 },
	{ 0x8086, 0x0A1 },
	{ 0x8086, 0x0A2 },
	{ 0x8086, 0x0A0 },
	{ 0x8086, 0x0A1 },
	{ 0x8086, 0x0A2 },
	{ 0x8086, 0x0A0 },
	{ 0x8086, 0x0A1 },
	{ 0x8086, 0x0A2 },
	{ 0x8086, 0x0D0 },
	{ 0x8086, 0x0D1 },
	{ 0x8086, 0x0D2 },
	{ 0x8086, 0x0D0 },
	{ 0x8086, 0x0D1 },
	{ 0x8086, 0x0D2 },
	{ 0x8086, 0x0D0 },
	{ 0x8086, 0x0D1 },
	{ 0x8086, 0x0D2 },
	{ 0x8086, 0x0D0 },
	{ 0x8086, 0x0D1 },
	{ 0x8086, 0x0D2 },
	{ 0x8086, 0x0D0 },
	{ 0x8086, 0x0D1 },
	{ 0x8086, 0x0D2 },
@

