head	1.2;
access;
symbols
	OPENBSD_6_1:1.2.0.38
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.36
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.30
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.32
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.24
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.28
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.26
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.22
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.20
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.16
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.18
	OPENBSD_5_0:1.2.0.14
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.12
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.10
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.6
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.8
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.4
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.2
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.1.0.2
	OPENBSD_4_3_BASE:1.1;
locks; strict;
comment	@ * @;


1.2
date	2008.03.31.07.14.00;	author jsing;	state Exp;
branches;
next	1.1;

1.1
date	2007.12.27.02.59.13;	author jsing;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Add define for 24 hour time.
@
text
@/*	$OpenBSD: ds1687reg.h,v 1.1 2007/12/27 02:59:13 jsing Exp $ */

/*
 * Copyright (c) 2007, Joel Sing <jsing@@openbsd.org>
 *
 * Permission to use, copy, modify, and distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 */

/*
 * Register locations/definitions for the Dallas Semiconductor (now Maxim)
 * DS1685 RTC chip and DS1687 stand-alone RTC EDIP. Product details are
 * available at:
 *
 *    http://www.maxim-ic.com/quick_view2.cfm/qv_pk/2757
 *
 * Full data sheet is available from:
 *
 *    http://datasheets.maxim-ic.com/en/ds/DS1685-DS1687.pdf
 *
 * The DS1687 contains a DS1685, which is an improved version of the older
 * DS1287 RTC. New/extended registers are available by selecting bank 1.
 * Register values are either in BCD (data mode 0) or binary (data mode 1).
 */

/*
 * DS1687 Registers.
 */
#define DS1687_SEC		0x00	/* Seconds. */
#define DS1687_SEC_ALRM		0x01	/* Alarm seconds. */
#define DS1687_MIN		0x02	/* Minutes. */
#define DS1687_MIN_ALRM		0x03	/* Alarm minutes. */
#define DS1687_HOUR		0x04	/* Hours. */
#define DS1687_HOUR_ALRM	0x05	/* Alarm hours. */
#define DS1687_DOW		0x06	/* Day of week (01-07). */
#define DS1687_DAY		0x07	/* Day (01-31). */
#define DS1687_MONTH		0x08	/* Month (01-12). */
#define DS1687_YEAR		0x09	/* Year (00-99). */

#define DS1687_CTRL_A		0x0a	/* Control register A. */
#define   DS1687_BANK_1		0x10	/* Bank select. */
#define   DS1687_UIP		0x80	/* Update in progress. */
#define DS1687_CTRL_B		0x0b	/* Control register B. */
#define   DS1687_24_HR		0x02	/* Use 24 hour time. */
#define   DS1687_DM_1		0x04	/* Data mode 1 (binary). */
#define   DS1687_SET_CLOCK	0x80	/* Prohibit updates. */
#define DS1687_CTRL_C		0x0c	/* Control register C. */
#define DS1687_CTRL_D		0x0d	/* Control register D. */

#define DS1687_CENTURY		0x48	/* Century (bank 1). */
#define DS1687_DATE_ALRM	0x49	/* Date alarm (bank 1). */

#define DS1687_EXT_CTRL		0x4a	/* Extended control register. */
#define   DS1687_KICKSTART	0x01	/* Kickstart flag. */

@


1.1
log
@Clean up the clock MD code. Move all of the DS1687 register definitions to
the appropriate place and remove all of the magic numbers. Whilst we're
here fix up some KNF issues. Also, the get/set functions used the wrong
control registers, allowing the clock to update during operation.

ok miod@@, jasper@@
@
text
@d1 1
a1 1
/*	$OpenBSD$ */
d32 1
d36 1
a36 1
 * DS1687 Registers (Data Mode 0 - BCD).
d53 1
@

