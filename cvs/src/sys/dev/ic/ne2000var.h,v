head	1.9;
access;
symbols
	OPENBSD_6_0:1.9.0.36
	OPENBSD_6_0_BASE:1.9
	OPENBSD_5_9:1.9.0.30
	OPENBSD_5_9_BASE:1.9
	OPENBSD_5_8:1.9.0.32
	OPENBSD_5_8_BASE:1.9
	OPENBSD_5_7:1.9.0.24
	OPENBSD_5_7_BASE:1.9
	OPENBSD_5_6:1.9.0.28
	OPENBSD_5_6_BASE:1.9
	OPENBSD_5_5:1.9.0.26
	OPENBSD_5_5_BASE:1.9
	OPENBSD_5_4:1.9.0.22
	OPENBSD_5_4_BASE:1.9
	OPENBSD_5_3:1.9.0.20
	OPENBSD_5_3_BASE:1.9
	OPENBSD_5_2:1.9.0.16
	OPENBSD_5_2_BASE:1.9
	OPENBSD_5_1_BASE:1.9
	OPENBSD_5_1:1.9.0.18
	OPENBSD_5_0:1.9.0.14
	OPENBSD_5_0_BASE:1.9
	OPENBSD_4_9:1.9.0.12
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.9.0.10
	OPENBSD_4_8_BASE:1.9
	OPENBSD_4_7:1.9.0.6
	OPENBSD_4_7_BASE:1.9
	OPENBSD_4_6:1.9.0.8
	OPENBSD_4_6_BASE:1.9
	OPENBSD_4_5:1.9.0.4
	OPENBSD_4_5_BASE:1.9
	OPENBSD_4_4:1.9.0.2
	OPENBSD_4_4_BASE:1.9
	OPENBSD_4_3:1.8.0.6
	OPENBSD_4_3_BASE:1.8
	OPENBSD_4_2:1.8.0.4
	OPENBSD_4_2_BASE:1.8
	OPENBSD_4_1:1.8.0.2
	OPENBSD_4_1_BASE:1.8
	OPENBSD_4_0:1.7.0.20
	OPENBSD_4_0_BASE:1.7
	OPENBSD_3_9:1.7.0.18
	OPENBSD_3_9_BASE:1.7
	OPENBSD_3_8:1.7.0.16
	OPENBSD_3_8_BASE:1.7
	OPENBSD_3_7:1.7.0.14
	OPENBSD_3_7_BASE:1.7
	OPENBSD_3_6:1.7.0.12
	OPENBSD_3_6_BASE:1.7
	SMP_SYNC_A:1.7
	SMP_SYNC_B:1.7
	OPENBSD_3_5:1.7.0.10
	OPENBSD_3_5_BASE:1.7
	OPENBSD_3_4:1.7.0.8
	OPENBSD_3_4_BASE:1.7
	UBC_SYNC_A:1.7
	OPENBSD_3_3:1.7.0.6
	OPENBSD_3_3_BASE:1.7
	OPENBSD_3_2:1.7.0.4
	OPENBSD_3_2_BASE:1.7
	OPENBSD_3_1:1.7.0.2
	OPENBSD_3_1_BASE:1.7
	UBC_SYNC_B:1.7
	UBC:1.6.0.6
	UBC_BASE:1.6
	OPENBSD_3_0:1.6.0.4
	OPENBSD_3_0_BASE:1.6
	OPENBSD_2_9_BASE:1.6
	OPENBSD_2_9:1.6.0.2
	OPENBSD_2_8:1.4.0.2
	OPENBSD_2_8_BASE:1.4
	OPENBSD_2_7:1.3.0.8
	OPENBSD_2_7_BASE:1.3
	SMP:1.3.0.6
	SMP_BASE:1.3
	kame_19991208:1.3
	OPENBSD_2_6:1.3.0.4
	OPENBSD_2_6_BASE:1.3
	OPENBSD_2_5:1.3.0.2
	OPENBSD_2_5_BASE:1.3
	OPENBSD_2_4:1.1.0.2
	OPENBSD_2_4_BASE:1.1;
locks; strict;
comment	@ * @;


1.9
date	2008.06.26.05.42.16;	author ray;	state Exp;
branches;
next	1.8;

1.8
date	2006.11.07.01.46.59;	author brad;	state Exp;
branches;
next	1.7;

1.7
date	2002.03.14.01.26.55;	author millert;	state Exp;
branches;
next	1.6;

1.6
date	2001.03.29.01.39.32;	author aaron;	state Exp;
branches
	1.6.6.1;
next	1.5;

1.5
date	2001.03.12.05.36.58;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	2000.05.30.14.31.39;	author fgsch;	state Exp;
branches;
next	1.3;

1.3
date	99.03.26.06.34.27;	author fgsch;	state Exp;
branches
	1.3.6.1;
next	1.2;

1.2
date	98.11.06.06.32.15;	author fgsch;	state Exp;
branches;
next	1.1;

1.1
date	98.09.22.06.38.04;	author fgsch;	state Exp;
branches;
next	;

1.3.6.1
date	2001.05.14.22.24.04;	author niklas;	state Exp;
branches;
next	1.3.6.2;

1.3.6.2
date	2002.03.28.11.51.01;	author niklas;	state Exp;
branches;
next	;

1.6.6.1
date	2002.06.11.03.42.19;	author art;	state Exp;
branches;
next	;


desc
@@


1.9
log
@First pass at removing clauses 3 and 4 from NetBSD licenses.

Not sure what's more surprising: how long it took for NetBSD to
catch up to the rest of the BSDs (including UCB), or the amount of
code that NetBSD has claimed for itself without attributing to the
actual authors.

OK deraadt@@
@
text
@/*	$OpenBSD: ne2000var.h,v 1.8 2006/11/07 01:46:59 brad Exp $	*/
/*	$NetBSD: ne2000var.h,v 1.2 1997/10/14 22:54:12 thorpej Exp $	*/

/*-
 * Copyright (c) 1997 The NetBSD Foundation, Inc.
 * All rights reserved.
 *
 * This code is derived from software contributed to The NetBSD Foundation
 * by Jason R. Thorpe of the Numerical Aerospace Simulation Facility,
 * NASA Ames Research Center.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE NETBSD FOUNDATION, INC. AND CONTRIBUTORS
 * ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE FOUNDATION OR CONTRIBUTORS
 * BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef _DEV_IC_NE2000VAR_H_
#define	_DEV_IC_NE2000VAR_H_

struct ne2000_softc {
	struct dp8390_softc sc_dp8390;

	bus_space_tag_t sc_asict;	/* space tag for ASIC */
	bus_space_handle_t sc_asich;	/* space handle for ASIC */

	enum {
		NE2000_TYPE_UNKNOWN = 0,
		NE2000_TYPE_NE1000,
		NE2000_TYPE_NE2000,
		NE2000_TYPE_DL10019,
		NE2000_TYPE_DL10022,
		NE2000_TYPE_AX88190,
		NE2000_TYPE_AX88790
	} sc_type;
	int sc_useword;
};

int	ne2000_attach(struct ne2000_softc *, u_int8_t *);
int	ne2000_detect(struct ne2000_softc *);
int	ne2000_detach(struct ne2000_softc *, int);

#endif /* _DEV_IC_NE2000VAR_H_ */
@


1.8
log
@- The ASIX AX88796 is an NE2000 compatible ethernet chip, but doesn't seem
to have "remote DMA complete bit" is ISR.  So, don't wait for ISR.RDC bit
after writing a packet.

From bsh@@NetBSD

- Figure out whether the shared memory region is word-accessible in the same
place we figure out its size, and store this in the softc, rather than using
a series of comparisons later.

From mycroft@@NetBSD

- support for the NE2000 type AX88790.

From Yong-Jhen Hong <yongjhen at alqualonde dot org> via NetBSD

Tested by deraadt@@ and Adriaan <misc dot adriaan at gmail dot com>
ok deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: ne2000var.h,v 1.7 2002/03/14 01:26:55 millert Exp $	*/
a19 7
 * 3. All advertising materials mentioning features or use of this software
 *    must display the following acknowledgement:
 *	This product includes software developed by the NetBSD
 *	Foundation, Inc. and its contributors.
 * 4. Neither the name of The NetBSD Foundation nor the names of its
 *    contributors may be used to endorse or promote products derived
 *    from this software without specific prior written permission.
@


1.7
log
@First round of __P removal in sys
@
text
@d1 1
a1 1
/*	$OpenBSD: ne2000var.h,v 1.6 2001/03/29 01:39:32 aaron Exp $	*/
d50 10
a59 1
	int sc_type;
a60 13

/* sc_type */
#define	NE2000_TYPE_NE1000	1
#define	NE2000_TYPE_NE2000	2
#define	NE2000_TYPE_DL10019	3
#define	NE2000_TYPE_DL10022	4
#define	NE2000_TYPE_AX88190	5

#define	NE2000_USE_WORD(sc)				\
	(((sc)->sc_type == NE2000_TYPE_NE2000) ||	\
	((sc)->sc_type == NE2000_TYPE_DL10019) ||	\
	((sc)->sc_type == NE2000_TYPE_DL10022) ||	\
	((sc)->sc_type == NE2000_TYPE_AX88190))
@


1.6
log
@Add MII support to NE2000 PCMCIA driver. Both the Netgear FA410TXC and
New Media LiveWire Fast Ethernet adapters now work after these changes,
although the Netgear card still requires media to be set manually.
@
text
@d1 1
a1 1
/*	$OpenBSD: ne2000var.h,v 1.5 2001/03/12 05:36:58 aaron Exp $	*/
d66 3
a68 3
int	ne2000_attach __P((struct ne2000_softc *, u_int8_t *));
int	ne2000_detect __P((struct ne2000_softc *));
int	ne2000_detach __P((struct ne2000_softc *, int));
@


1.6.6.1
log
@Sync UBC branch to -current
@
text
@d1 1
a1 1
/*	$OpenBSD: ne2000var.h,v 1.6 2001/03/29 01:39:32 aaron Exp $	*/
d66 3
a68 3
int	ne2000_attach(struct ne2000_softc *, u_int8_t *);
int	ne2000_detect(struct ne2000_softc *);
int	ne2000_detach(struct ne2000_softc *, int);
@


1.5
log
@Adjust the way that media is initialized on DP8390-compatibles; from NetBSD.
The dp8390_softc now has media_init and media_fini function pointers that
do the work. fgsch@@ ok
@
text
@d1 1
a1 1
/*	$OpenBSD: ne2000var.h,v 1.4 2000/05/30 14:31:39 fgsch Exp $	*/
d57 2
a58 1
#define	NE2000_TYPE_AX88190	4
d63 1
d68 1
@


1.4
log
@Changes from NetBSD:
* support for ax88190
* set the memory size based on the ne2k type, changing the number
  of transmit buffers.
* make ne2000_attach return some value so it can be used in pcmcia.
* move code for dl10019 to the pcmcia part.
@
text
@d1 1
a1 1
/*	$OpenBSD: ne2000var.h,v 1.3 1999/03/26 06:34:27 fgsch Exp $	*/
d64 1
a64 2
int	ne2000_attach __P((struct ne2000_softc *, u_int8_t *,
	    int *, int, int));
@


1.3
log
@Add support for some 100Mbit PCMCIA cards.
Change the ne2000_detect parm list.
@
text
@d1 1
a1 1
/*	$OpenBSD: ne2000var.h,v 1.2 1998/11/06 06:32:15 fgsch Exp $	*/
d56 2
a57 1
#define NE2000_TYPE_DL10019	3
d59 6
a64 1
void	ne2000_attach __P((struct ne2000_softc *, u_int8_t *,
@


1.3.6.1
log
@merge in approximately 2.9 into SMP branch
@
text
@d1 1
a1 1
/*	$OpenBSD: ne2000var.h,v 1.6 2001/03/29 01:39:32 aaron Exp $	*/
d56 1
a56 9
#define	NE2000_TYPE_DL10019	3
#define	NE2000_TYPE_DL10022	4
#define	NE2000_TYPE_AX88190	5

#define	NE2000_USE_WORD(sc)				\
	(((sc)->sc_type == NE2000_TYPE_NE2000) ||	\
	((sc)->sc_type == NE2000_TYPE_DL10019) ||	\
	((sc)->sc_type == NE2000_TYPE_DL10022) ||	\
	((sc)->sc_type == NE2000_TYPE_AX88190))
d58 2
a59 1
int	ne2000_attach __P((struct ne2000_softc *, u_int8_t *));
a60 1
int	ne2000_detach __P((struct ne2000_softc *, int));
@


1.3.6.2
log
@Merge in -current from about a week ago
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
d66 3
a68 3
int	ne2000_attach(struct ne2000_softc *, u_int8_t *);
int	ne2000_detect(struct ne2000_softc *);
int	ne2000_detach(struct ne2000_softc *, int);
@


1.2
log
@Support for RealTek 8019 and 8029 NE2000-compatible network interfaces.
@
text
@d1 1
a1 1
/*	$OpenBSD: ne2000var.h,v 1.1 1998/09/22 06:38:04 fgsch Exp $	*/
d56 1
d60 1
a60 2
int	ne2000_detect __P((bus_space_tag_t, bus_space_handle_t,
	    bus_space_tag_t, bus_space_handle_t));
@


1.1
log
@Add the NE[12]00 core driver from NetBSD.
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
d57 2
a58 1
void	ne2000_attach __P((struct ne2000_softc *, u_int8_t *));
@

