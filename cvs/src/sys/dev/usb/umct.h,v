head	1.5;
access;
symbols
	OPENBSD_6_1:1.5.0.10
	OPENBSD_6_1_BASE:1.5
	OPENBSD_6_0:1.5.0.8
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.2
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.5.0.4
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.4.0.24
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.28
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.26
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.22
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.4.0.20
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.4.0.18
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.16
	OPENBSD_5_0:1.4.0.14
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.4.0.12
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.4.0.10
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.4.0.6
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.4.0.8
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.4
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.4.0.2
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.3.0.28
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.3.0.26
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.3.0.22
	OPENBSD_4_1_BASE:1.3
	OPENBSD_4_0:1.3.0.24
	OPENBSD_4_0_BASE:1.3
	OPENBSD_3_9:1.3.0.20
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.3.0.18
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.3.0.14
	OPENBSD_3_7_BASE:1.3
	OPENBSD_3_6:1.3.0.16
	OPENBSD_3_6_BASE:1.3
	SMP_SYNC_A:1.3
	SMP_SYNC_B:1.3
	OPENBSD_3_5:1.3.0.12
	OPENBSD_3_5_BASE:1.3
	OPENBSD_3_4:1.3.0.10
	OPENBSD_3_4_BASE:1.3
	UBC_SYNC_A:1.3
	SMP:1.3.0.8
	OPENBSD_3_3:1.3.0.6
	OPENBSD_3_3_BASE:1.3
	UBC:1.3.0.4
	UBC_SYNC_B:1.3
	OPENBSD_3_2:1.3.0.2
	OPENBSD_3_2_BASE:1.3;
locks; strict;
comment	@ * @;


1.5
date	2015.04.26.06.38.04;	author jmatthew;	state Exp;
branches;
next	1.4;
commitid	vszAWBoMnXB8iRQ6;

1.4
date	2008.06.26.05.42.19;	author ray;	state Exp;
branches;
next	1.3;

1.3
date	2002.06.11.06.42.17;	author nate;	state Exp;
branches
	1.3.4.1;
next	1.2;

1.2
date	2002.05.07.18.29.18;	author nate;	state dead;
branches;
next	1.1;

1.1
date	2002.05.07.18.08.04;	author nate;	state Exp;
branches;
next	;

1.3.4.1
date	2002.10.29.00.33.32;	author art;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Two extra messages required after sending a baud rate update, as observed
in the linux mct_u232 driver, which apparently got them by sniffing usb
traffic from the vendor's windows 98 driver.  Makes this device work at
115200:

umct0 at uhub0 port 2 "Belkin Components F5U109 Serial" rev 1.10/1.02 addr 2

ok dlg@@
@
text
@/*	$OpenBSD: umct.h,v 1.4 2008/06/26 05:42:19 ray Exp $	*/
/*	$NetBSD: umct.h,v 1.1 2001/03/28 18:42:13 ichiro Exp $	*/
/*
 * Copyright (c) 2001 The NetBSD Foundation, Inc.
 * All rights reserved.
 *
 * This code is derived from software contributed to The NetBSD Foundation
 * by Ichiro FUKUHARA (ichiro@@ichiro.org).
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE NETBSD FOUNDATION, INC. AND CONTRIBUTORS
 * ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE FOUNDATION OR CONTRIBUTORS
 * BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */

/*
 * Vendor Request Interface
 */
#define UMCT_SET_REQUEST	0x40
#define UMCT_GET_REQUEST	0xc0

#define REQ_SET_BAUD_RATE	5	/* Set Baud Rate Divisor */
#define LENGTH_BAUD_RATE	4

#define REQ_GET_MSR		2	/* Get Modem Status Register (MSR) */
#define LENGTH_GET_MSR		1

#define REQ_GET_LCR		6	/* Get Line Control Register (LCR) */
#define LENGTH_GET_LCR		1

#define REQ_SET_LCR		7	/* Set Line Control Register (LCR) */
#define LENGTH_SET_LCR		1

#define REQ_SET_MCR		10	/* Set Modem Control Register (MCR) */
#define LENGTH_SET_MCR		1

#define REQ_UNKNOWN1		11	/* Unknown functionality */
#define LENGTH_UNKNOWN1		1

#define REQ_SET_CTS		12	/* Apparently controls CTS */
#define LENGTH_SET_CTS		1

/*
 * Baud rate (divisor)
 */
#define UMCT_BAUD_RATE(b)	(115200/b)

/*
 * Line Control Register (LCR)
 */
#define LCR_SET_BREAK		0x40
#define LCR_PARITY_EVEN		0x18
#define LCR_PARITY_ODD		0x08
#define LCR_PARITY_NONE		0x00
#define LCR_DATA_BITS_5		0x00
#define LCR_DATA_BITS_6		0x01
#define LCR_DATA_BITS_7		0x02
#define LCR_DATA_BITS_8		0x03
#define LCR_STOP_BITS_2		0x04
#define LCR_STOP_BITS_1		0x00

/*
 * Modem Control Register (MCR)
 */
#define MCR_NONE		0x8
#define MCR_RTS			0xa
#define MCR_DTR			0x9

/*
 * Modem Status Register (MSR)
 */
#define MSR_CD			0x80	/* Current CD */
#define MSR_RI			0x40	/* Current RI */
#define MSR_DSR			0x20	/* Current DSR */
#define MSR_CTS			0x10	/* Current CTS */
#define MSR_DCD			0x08	/* Delta CD */
#define MSR_DRI			0x04	/* Delta RI */
#define MSR_DDSR		0x02	/* Delta DSR */
#define MSR_DCTS		0x01	/* Delta CTS */

/*
 * Line Status Register (LSR)
 */
#define LSR_ERR			0x80	/* OE | PE | FE | BI */
#define LSR_TEMT		0x40	/* transmit register empty */
#define LSR_THRE		0x20	/* transmit holding register empty */
#define LSR_BI			0x10	/* break indicator */
#define LSR_FE			0x08	/* framing error */
#define LSR_OE			0x02	/* overrun error */
#define LSR_PE			0x04	/* parity error */
#define LSR_OE			0x02	/* overrun error */
#define LSR_DR			0x01	/* receive data ready */
@


1.4
log
@First pass at removing clauses 3 and 4 from NetBSD licenses.

Not sure what's more surprising: how long it took for NetBSD to
catch up to the rest of the BSDs (including UCB), or the amount of
code that NetBSD has claimed for itself without attributing to the
actual authors.

OK deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: umct.h,v 1.3 2002/06/11 06:42:17 nate Exp $	*/
d52 6
@


1.3
log
@Add the umct serial driver for netbsd.
This currently does not work properly with the device that I have, so
I will not add it to GENERIC
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
a17 7
 * 3. All advertising materials mentioning features or use of this software
 *    must display the following acknowledgement:
 *        This product includes software developed by the NetBSD
 *        Foundation, Inc. and its contributors.
 * 4. Neither the name of The NetBSD Foundation nor the names of its
 *    contributors may be used to endorse or promote products derived
 *    from this software without specific prior written permission.
@


1.3.4.1
log
@sync to -current
@
text
@@


1.2
log
@Meant to commit only ulpt and committed everything.  Most things weren't ready
@
text
@d1 1
a1 1
/*	$OpenBSD: umct.h,v 1.1 2002/05/07 18:08:04 nate Exp $	*/
@


1.1
log
@Sync ulpt driver with NetBSD
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
@

