head	1.5;
access;
symbols
	OPENBSD_4_0:1.1.0.6
	OPENBSD_4_0_BASE:1.1
	OPENBSD_3_9:1.1.0.4
	OPENBSD_3_9_BASE:1.1
	OPENBSD_3_8:1.1.0.2
	OPENBSD_3_8_BASE:1.1;
locks; strict;
comment	@ * @;


1.5
date	2007.01.05.07.00.37;	author jsg;	state dead;
branches;
next	1.4;

1.4
date	2007.01.05.06.36.37;	author jsg;	state Exp;
branches;
next	1.3;

1.3
date	2007.01.05.06.00.25;	author jsg;	state Exp;
branches;
next	1.2;

1.2
date	2006.12.23.17.46.39;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	2005.08.05.03.52.32;	author jsg;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Don't pollute userspace with uneeded headers.
@
text
@/*	$OpenBSD: apsvar.h,v 1.4 2007/01/05 06:36:37 jsg Exp $	*/
/*
 * Copyright (c) 2005 Jonathan Gray <jsg@@openbsd.org>
 *
 * Permission to use, copy, modify, and distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 */

#define APS_NUM_SENSORS		9

#define APS_SENSOR_XACCEL	0
#define APS_SENSOR_YACCEL	1
#define APS_SENSOR_XVAR		2
#define APS_SENSOR_YVAR		3
#define APS_SENSOR_TEMP1	4
#define APS_SENSOR_TEMP2	5
#define APS_SENSOR_KBACT	6
#define APS_SENSOR_MSACT	7
#define APS_SENSOR_LIDOPEN	8

struct aps_softc {
	struct device sc_dev;

	bus_space_tag_t aps_iot;
	bus_space_handle_t aps_ioh;

	struct sensor sensors[APS_NUM_SENSORS];
	struct sensordev sensordev;
	void (*refresh_sensor_data)(struct aps_softc *);

	struct sensor_rec aps_data;
};
@


1.4
log
@Remove unknown sensor that seems to always be fixed at 7
on all ThinkPad models.
@
text
@d1 1
a1 1
/*	$OpenBSD: apsvar.h,v 1.3 2007/01/05 06:00:25 jsg Exp $	*/
@


1.3
log
@Change slightly to not need one of the softc members.
From Constantine A. Murenin
@
text
@d1 1
a1 1
/*	$OpenBSD: apsvar.h,v 1.2 2006/12/23 17:46:39 deraadt Exp $	*/
d18 1
a18 1
#define APS_NUM_SENSORS		10
a28 1
#define APS_SENSOR_UNK		9
@


1.2
log
@adapt to new two-level sensor api; Constantine A. Murenin
@
text
@d1 1
a1 1
/*	$OpenBSD: apsvar.h,v 1.1 2005/08/05 03:52:32 jsg Exp $	*/
a38 1
	u_int numsensors;
@


1.1
log
@Start of a driver for the "Active Protection System" accelerometer
found in recentish ThinkPads.

Sensors are reported via hw.sensors in sysctl but sensor numbers
and presence is likely to change.  Units and use of all of the
sensors is not yet known as IBM has not released any documentation.

Driver is based on information reverse engineered from the windows
driver by Anurag Sharma and Mark Smith.

"commit the code" deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
d38 1
@

