head	1.11;
access;
symbols
	OPENBSD_5_2:1.10.0.18
	OPENBSD_5_2_BASE:1.10
	OPENBSD_5_1_BASE:1.10
	OPENBSD_5_1:1.10.0.16
	OPENBSD_5_0:1.10.0.14
	OPENBSD_5_0_BASE:1.10
	OPENBSD_4_9:1.10.0.12
	OPENBSD_4_9_BASE:1.10
	OPENBSD_4_8:1.10.0.10
	OPENBSD_4_8_BASE:1.10
	OPENBSD_4_7:1.10.0.6
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.10.0.8
	OPENBSD_4_6_BASE:1.10
	OPENBSD_4_5:1.10.0.4
	OPENBSD_4_5_BASE:1.10
	OPENBSD_4_4:1.10.0.2
	OPENBSD_4_4_BASE:1.10
	OPENBSD_4_3:1.8.0.30
	OPENBSD_4_3_BASE:1.8
	OPENBSD_4_2:1.8.0.28
	OPENBSD_4_2_BASE:1.8
	OPENBSD_4_1:1.8.0.26
	OPENBSD_4_1_BASE:1.8
	OPENBSD_4_0:1.8.0.24
	OPENBSD_4_0_BASE:1.8
	OPENBSD_3_9:1.8.0.22
	OPENBSD_3_9_BASE:1.8
	OPENBSD_3_8:1.8.0.20
	OPENBSD_3_8_BASE:1.8
	OPENBSD_3_7:1.8.0.18
	OPENBSD_3_7_BASE:1.8
	OPENBSD_3_6:1.8.0.16
	OPENBSD_3_6_BASE:1.8
	SMP_SYNC_A:1.8
	SMP_SYNC_B:1.8
	OPENBSD_3_5:1.8.0.14
	OPENBSD_3_5_BASE:1.8
	OPENBSD_3_4:1.8.0.12
	OPENBSD_3_4_BASE:1.8
	UBC_SYNC_A:1.8
	OPENBSD_3_3:1.8.0.10
	OPENBSD_3_3_BASE:1.8
	OPENBSD_3_2:1.8.0.8
	OPENBSD_3_2_BASE:1.8
	OPENBSD_3_1:1.8.0.6
	OPENBSD_3_1_BASE:1.8
	UBC_SYNC_B:1.8
	UBC:1.8.0.4
	UBC_BASE:1.8
	OPENBSD_3_0:1.8.0.2
	OPENBSD_3_0_BASE:1.8
	OPENBSD_2_9_BASE:1.7
	OPENBSD_2_9:1.7.0.20
	OPENBSD_2_8:1.7.0.18
	OPENBSD_2_8_BASE:1.7
	OPENBSD_2_7:1.7.0.16
	OPENBSD_2_7_BASE:1.7
	SMP:1.7.0.14
	SMP_BASE:1.7
	kame_19991208:1.7
	OPENBSD_2_6:1.7.0.12
	OPENBSD_2_6_BASE:1.7
	OPENBSD_2_5:1.7.0.10
	OPENBSD_2_5_BASE:1.7
	OPENBSD_2_4:1.7.0.8
	OPENBSD_2_4_BASE:1.7
	OPENBSD_2_3:1.7.0.6
	OPENBSD_2_3_BASE:1.7
	OPENBSD_2_2:1.7.0.4
	OPENBSD_2_2_BASE:1.7
	OPENBSD_2_1:1.7.0.2
	OPENBSD_2_1_BASE:1.7;
locks; strict;
comment	@ * @;


1.11
date	2012.09.11.15.44.18;	author deraadt;	state dead;
branches;
next	1.10;

1.10
date	2008.06.04.22.12.53;	author deraadt;	state Exp;
branches;
next	1.9;

1.9
date	2008.06.04.21.12.50;	author deraadt;	state Exp;
branches;
next	1.8;

1.8
date	2001.06.22.14.11.00;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	97.05.05.23.25.17;	author etheisen;	state Exp;
branches
	1.7.14.1;
next	1.6;

1.6
date	97.03.27.08.40.36;	author niklas;	state Exp;
branches;
next	1.5;

1.5
date	96.11.06.20.56.12;	author etheisen;	state Exp;
branches;
next	1.4;

1.4
date	96.11.06.20.12.12;	author etheisen;	state Exp;
branches;
next	1.3;

1.3
date	96.11.06.18.41.53;	author etheisen;	state Exp;
branches;
next	1.2;

1.2
date	96.11.06.18.35.22;	author etheisen;	state Exp;
branches;
next	1.1;

1.1
date	96.10.27.19.44.17;	author etheisen;	state Exp;
branches;
next	;

1.7.14.1
date	2001.07.04.11.00.19;	author niklas;	state Exp;
branches;
next	;


desc
@@


1.11
log
@Remove the 'OLF method' used for the transition from a.out to ELF and
for all the compat layers which are now gone.  Linux compat still works
because it always used another method in any case, and nothing looks at
p_os anymore.
ok jsing
@
text
@/*	$OpenBSD: exec_olf.h,v 1.10 2008/06/04 22:12:53 deraadt Exp $	*/
/*
 * Copyright (c) 1996 Erik Theisen.  All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. The name of the author may not be used to endorse or promote products
 *    derived from this software without specific prior written permission
 *
 * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
 * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
 * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
 * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
 * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/*
 * OLF is a modified ELF that attempts to fix two serious shortcomings in
 * the SVR4 ABI.  Namely a lack of an operating system and strip tag.
 */

#ifndef _SYS_EXEC_OLF_H_
#define _SYS_EXEC_OLF_H_

#include <sys/exec_elf.h>

/*
 * Please help make this list definative.
 */
/* e_ident[] system */
#define OOS_NULL	0		/* invalid */
#define OOS_OPENBSD	1		/* OpenBSD */
#define OOS_NETBSD	2		/* NetBSD */
#define OOS_FREEBSD	3		/* FreeBSD */
#define OOS_44BSD	4		/* 4.4BSD */
#define OOS_LINUX	5		/* Linux */
#define OOS_SVR4	6		/* AT&T System V Release 4 */
#define OOS_ESIX	7		/* esix UNIX */
#define OOS_SOLARIS	8		/* SunSoft Solaris */
#define OOS_IRIX	9		/* SGI IRIX */
#define OOS_SCO		10		/* SCO UNIX */
#define OOS_DELL	11		/* DELL SVR4 */
#define OOS_NCR		12		/* NCR SVR4 */
#define OOS_NUM		13		/* Number of systems */

/* The rest of the types and defines come from the ELF header file */
#endif /* _SYS_EXEC_OLF_H_ */
@


1.10
log
@olf death throes: OOSN_* names can go away; ok miod
@
text
@d1 1
a1 1
/*	$OpenBSD: exec_olf.h,v 1.9 2008/06/04 21:12:50 deraadt Exp $	*/
@


1.9
log
@olf support starts to die (easy stuff first); ok miod
@
text
@d1 1
a1 1
/*	$OpenBSD: exec_olf.h,v 1.8 2001/06/22 14:11:00 deraadt Exp $	*/
a55 23
/*
 * Lowercase and numbers ONLY.
 * No whitespace or punc.
 */
#define OOSN_NULL	"invalid"	/* invalid */
#define OOSN_OPENBSD	"openbsd"	/* OpenBSD */
#define OOSN_NETBSD	"netbsd"	/* NetBSD */
#define OOSN_FREEBSD	"freebsd"	/* FreeBSD */
#define OOSN_44BSD	"44bsd"		/* 4.4BSD */
#define OOSN_LINUX	"linux"		/* Linux */
#define OOSN_SVR4	"svr4"		/* AT&T System V Release 4 */
#define OOSN_ESIX	"esix"		/* esix UNIX */
#define OOSN_SOLARIS	"solaris"	/* SunSoft Solaris */
#define OOSN_IRIX	"irix"		/* SGI IRIX */
#define OOSN_SCO	"sco"		/* SCO UNIX */
#define OOSN_DELL	"dell"		/* DELL SVR4 */
#define OOSN_NCR	"ncr"		/* NCR SVR4 */
#define ONAMEV 		{ OOSN_NULL, OOSN_OPENBSD, OOSN_NETBSD, \
		 	  OOSN_FREEBSD, OOSN_44BSD, OOSN_LINUX, \
		 	  OOSN_SVR4, OOSN_ESIX, OOSN_SOLARIS, \
			  OOSN_IRIX, OOSN_SCO,  OOSN_DELL, \
			  OOSN_NCR, \
		 	0 }
@


1.8
log
@KNF
@
text
@d1 1
a1 1
/*	$OpenBSD: exec_olf.h,v 1.7 1997/05/05 23:25:17 etheisen Exp $	*/
a37 35
/* e_ident[] identification indexes */
#define OI_MAG0		EI_MAG0		/* file ID */
#define OI_MAG1		EI_MAG1		/* file ID */
#define OI_MAG2		EI_MAG2		/* file ID */
#define OI_MAG3		EI_MAG3		/* file ID */
#define OI_CLASS	EI_CLASS	/* file class */
#define OI_DATA		EI_DATA		/* data encoding */
#define OI_VERSION	EI_VERSION	/* OLF header version */
#define OI_OS		7		/* Operating system tag */
#define OI_DYNAMIC	8		/* Dynamic tag */
#define OI_STRIP	9		/* Strip tag */
#define OI_PAD		10		/* start of pad bytes */
#define OI_NIDENT	EI_NIDENT	/* Size of e_ident[] */

/* e_ident[] magic number */
#define OLFMAG0		ELFMAG0		/* e_ident[OI_MAG0] */
#define OLFMAG1		'O'		/* e_ident[OI_MAG1] */
#define OLFMAG2		ELFMAG2		/* e_ident[OI_MAG2] */
#define OLFMAG3		ELFMAG3		/* e_ident[OI_MAG3] */
#define OLFMAG		"\177OLF"	/* magic */
#define SOLFMAG		SELFMAG		/* size of magic */
 
/* e_ident[] file class */
#define OLFCLASSNONE	ELFCLASSNONE	/* invalid */
#define OLFCLASS32	ELFCLASS32	/* 32-bit objs */
#define OLFCLASS64	ELFCLASS64	/* 64-bit objs */
#define OLFCLASSNUM	ELFCLASSNUM	/* number of classes */
 
/* e_ident[] data encoding */
#define OLFDATANONE	ELFDATANONE	/* invalid */   
#define OLFDATA2LSB	ELFDATA2LSB	/* Little-Endian */
#define OLFDATA2MSB	ELFDATA2MSB	/* Big-Endian */
#define OLFDATANUM	ELFDATANUM	/* number of data encode defines */


a78 15

/* e_ident[] dynamic */
#define ODYNAMIC_N	0		/* Statically linked  */
#define ODYNAMIC	1		/* Dynamically linked */

/* e_ident[] strip */
#define OSTRIP		0		/* Stripped */
#define OSTRIP_N	1		/* Not Stripped */

/* e_ident */
#define IS_OLF(ehdr) \
    ((ehdr).e_ident[OI_MAG0] == OLFMAG0 && \
    (ehdr).e_ident[OI_MAG1] == OLFMAG1 && \
    (ehdr).e_ident[OI_MAG2] == OLFMAG2 && \
    (ehdr).e_ident[OI_MAG3] == OLFMAG3)
@


1.7
log
@Removed Mach tag and added one for NCR SVR4.
@
text
@d1 1
a1 1
/*	$OpenBSD: exec_olf.h,v 1.6 1997/03/27 08:40:36 niklas Exp $	*/
d28 4
a31 8
        /****   OLF - Open Linkage Format   ****/

        /*
         * OLF is a modified ELF that attempts
         * to fix two serious shortcomings in
         * the SVR4 ABI.  Namely a lack of an
         * operating system and strip tag.
         */
d39 7
a45 7
#define OI_MAG0         EI_MAG0		/* file ID */
#define OI_MAG1         EI_MAG1		/* file ID */
#define OI_MAG2         EI_MAG2		/* file ID */
#define OI_MAG3         EI_MAG3		/* file ID */
#define OI_CLASS        EI_CLASS	/* file class */
#define OI_DATA         EI_DATA		/* data encoding */
#define OI_VERSION      EI_VERSION	/* OLF header version */
d50 1
a50 1
#define OI_NIDENT       EI_NIDENT       /* Size of e_ident[] */
d62 1
a62 1
#define OLFCLASS32	ELFCLASS32	/* 32-bit objs */            
d64 1
a64 1
#define OLFCLASSNUM	ELFCLASSNUM	/* number of classes */     
d68 3
a70 3
#define OLFDATA2LSB	ELFDATA2LSB	/* Little-Endian */        
#define OLFDATA2MSB	ELFDATA2MSB	/* Big-Endian */         
#define OLFDATANUM	ELFDATANUM	/* number of data encode defines */     
d124 5
a128 4
#define IS_OLF(ehdr) ((ehdr).e_ident[OI_MAG0] == OLFMAG0 && \
                      (ehdr).e_ident[OI_MAG1] == OLFMAG1 && \
                      (ehdr).e_ident[OI_MAG2] == OLFMAG2 && \
                      (ehdr).e_ident[OI_MAG3] == OLFMAG3)
@


1.7.14.1
log
@Merge in -current from two days ago in the SMP branch.
As usual with merges, they do not indicate progress, so do not hold
your breath for working SMP, and do not mail me and ask about the
state of it.  It has not changed.  There is work ongoing, but very, very
slowly.  The commit is done in parts as to not lock up the tree in too
big chunks at a time.
@
text
@d1 1
a1 1
/*	$OpenBSD: exec_olf.h,v 1.7 1997/05/05 23:25:17 etheisen Exp $	*/
d28 8
a35 4
/*
 * OLF is a modified ELF that attempts to fix two serious shortcomings in
 * the SVR4 ABI.  Namely a lack of an operating system and strip tag.
 */
d43 7
a49 7
#define OI_MAG0		EI_MAG0		/* file ID */
#define OI_MAG1		EI_MAG1		/* file ID */
#define OI_MAG2		EI_MAG2		/* file ID */
#define OI_MAG3		EI_MAG3		/* file ID */
#define OI_CLASS	EI_CLASS	/* file class */
#define OI_DATA		EI_DATA		/* data encoding */
#define OI_VERSION	EI_VERSION	/* OLF header version */
d54 1
a54 1
#define OI_NIDENT	EI_NIDENT	/* Size of e_ident[] */
d66 1
a66 1
#define OLFCLASS32	ELFCLASS32	/* 32-bit objs */
d68 1
a68 1
#define OLFCLASSNUM	ELFCLASSNUM	/* number of classes */
d72 3
a74 3
#define OLFDATA2LSB	ELFDATA2LSB	/* Little-Endian */
#define OLFDATA2MSB	ELFDATA2MSB	/* Big-Endian */
#define OLFDATANUM	ELFDATANUM	/* number of data encode defines */
d128 4
a131 5
#define IS_OLF(ehdr) \
    ((ehdr).e_ident[OI_MAG0] == OLFMAG0 && \
    (ehdr).e_ident[OI_MAG1] == OLFMAG1 && \
    (ehdr).e_ident[OI_MAG2] == OLFMAG2 && \
    (ehdr).e_ident[OI_MAG3] == OLFMAG3)
@


1.6
log
@Add NCR variant of SVR4, as it has some specifics
@
text
@d1 1
a1 1
/*	$OpenBSD: exec_olf.h,v 1.5 1996/11/06 20:56:12 etheisen Exp $	*/
d87 8
a94 9
#define OOS_MACH	6		/* Mach */
#define OOS_SVR4	7		/* AT&T System V Release 4 */
#define OOS_ESIX	8		/* esix UNIX */
#define OOS_SOLARIS	9		/* SunSoft Solaris */
#define OOS_IRIX	10		/* SGI IRIX */
#define OOS_SCO		11		/* SCO UNIX */
#define OOS_DELL	13		/* DELL SVR4 */
#define OOS_NCR		14		/* NCR SVR4 */
#define OOS_NUM		15		/* Number of systems */
a104 1
#define OOSN_MACH	"mach"		/* Mach */
d111 1
d114 3
a116 3
		 	  OOSN_MACH, OOSN_SVR4, OOSN_ESIX, \
		 	  OOSN_SOLARIS, OOSN_IRIX, OOSN_SCO, \
		 	  OOSN_DELL, \
@


1.5
log
@Negative logic.
@
text
@d1 1
a1 1
/*	$OpenBSD: exec_olf.h,v 1.4 1996/11/06 20:12:12 etheisen Exp $	*/
d94 2
a95 1
#define OOS_NUM		14		/* Number of systems */
@


1.4
log
@Uhm, OLF needs a dynamic linked tag.
@
text
@d1 1
a1 1
/*	$OpenBSD: exec_olf.h,v 1.3 1996/11/06 18:41:53 etheisen Exp $	*/
d124 2
a125 2
#define OSTRIP_N	0		/* NOT Stripped */
#define OSTRIP		1		/* Stripped */
@


1.3
log
@Fix copyright.
@
text
@d1 1
a1 1
/*	$OpenBSD: exec_olf.h,v 1.2 1996/11/06 18:35:22 etheisen Exp $	*/
d50 4
a53 3
#define OI_OS		7		/* Operating system */
#define OI_STRIP	8		/* Strip tag */
#define OI_PAD		9		/* start of pad bytes */
d118 4
@


1.2
log
@Added ONAMEV operating system name vector.  Added OSTRIP strip
defines.
@
text
@d1 1
a1 1
/*	$OpenBSD: exec_olf.h,v 1.1 1996/10/27 19:44:17 etheisen Exp $	*/
d3 1
a3 2
 * Copyright (c) 1996 Erik Theisen
 * All rights reserved.
a7 1
 *
@


1.1
log
@Gear up for OLF.
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
a95 1

d113 10
@
