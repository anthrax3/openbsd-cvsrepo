head	1.10;
access;
symbols
	OPENBSD_4_6:1.9.0.10
	OPENBSD_4_6_BASE:1.9
	OPENBSD_4_5:1.9.0.6
	OPENBSD_4_5_BASE:1.9
	OPENBSD_4_4:1.9.0.4
	OPENBSD_4_4_BASE:1.9
	OPENBSD_4_3:1.9.0.2
	OPENBSD_4_3_BASE:1.9
	OPENBSD_4_2:1.8.0.24
	OPENBSD_4_2_BASE:1.8
	OPENBSD_4_1:1.8.0.22
	OPENBSD_4_1_BASE:1.8
	OPENBSD_4_0:1.8.0.20
	OPENBSD_4_0_BASE:1.8
	OPENBSD_3_9:1.8.0.18
	OPENBSD_3_9_BASE:1.8
	OPENBSD_3_8:1.8.0.16
	OPENBSD_3_8_BASE:1.8
	OPENBSD_3_7:1.8.0.14
	OPENBSD_3_7_BASE:1.8
	OPENBSD_3_6:1.8.0.12
	OPENBSD_3_6_BASE:1.8
	SMP_SYNC_A:1.8
	SMP_SYNC_B:1.8
	OPENBSD_3_5:1.8.0.10
	OPENBSD_3_5_BASE:1.8
	OPENBSD_3_4:1.8.0.8
	OPENBSD_3_4_BASE:1.8
	UBC_SYNC_A:1.8
	OPENBSD_3_3:1.8.0.6
	OPENBSD_3_3_BASE:1.8
	OPENBSD_3_2:1.8.0.4
	OPENBSD_3_2_BASE:1.8
	OPENBSD_3_1:1.8.0.2
	OPENBSD_3_1_BASE:1.8
	UBC_SYNC_B:1.8
	UBC:1.7.0.4
	UBC_BASE:1.7
	OPENBSD_3_0:1.7.0.2
	OPENBSD_3_0_BASE:1.7
	OPENBSD_2_9_BASE:1.5
	OPENBSD_2_9:1.5.0.4
	OPENBSD_2_8:1.5.0.2
	OPENBSD_2_8_BASE:1.5
	OPENBSD_2_7:1.4.0.16
	OPENBSD_2_7_BASE:1.4
	SMP:1.4.0.14
	SMP_BASE:1.4
	kame_19991208:1.4
	OPENBSD_2_6:1.4.0.12
	OPENBSD_2_6_BASE:1.4
	OPENBSD_2_5:1.4.0.10
	OPENBSD_2_5_BASE:1.4
	OPENBSD_2_4:1.4.0.8
	OPENBSD_2_4_BASE:1.4
	OPENBSD_2_3:1.4.0.6
	OPENBSD_2_3_BASE:1.4
	OPENBSD_2_2:1.4.0.4
	OPENBSD_2_2_BASE:1.4
	OPENBSD_2_1:1.4.0.2
	OPENBSD_2_1_BASE:1.4
	OPENBSD_2_0:1.3.0.2
	OPENBSD_2_0_BASE:1.3;
locks; strict;
comment	@ * @;


1.10
date	2009.08.25.16.16.34;	author jsg;	state dead;
branches;
next	1.9;

1.9
date	2007.11.26.09.28.33;	author martynas;	state Exp;
branches;
next	1.8;

1.8
date	2002.03.14.01.27.09;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	2001.06.15.03.38.34;	author itojun;	state Exp;
branches
	1.7.4.1;
next	1.6;

1.6
date	2001.06.09.06.16.38;	author angelos;	state Exp;
branches;
next	1.5;

1.5
date	2000.06.26.22.51.01;	author art;	state Exp;
branches;
next	1.4;

1.4
date	97.02.24.13.34.02;	author niklas;	state Exp;
branches
	1.4.14.1;
next	1.3;

1.3
date	96.10.04.19.30.27;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	96.10.04.01.58.57;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	96.05.22.11.48.25;	author deraadt;	state Exp;
branches;
next	;

1.4.14.1
date	2001.05.14.22.40.02;	author niklas;	state Exp;
branches;
next	1.4.14.2;

1.4.14.2
date	2001.07.04.10.54.09;	author niklas;	state Exp;
branches;
next	1.4.14.3;

1.4.14.3
date	2002.03.28.14.57.37;	author niklas;	state Exp;
branches;
next	;

1.7.4.1
date	2002.06.11.03.30.45;	author art;	state Exp;
branches;
next	;


desc
@@


1.10
log
@Remove support for packet mode of Metricom Ricochet radios.
It currently doesn't compile and this is unlikely to change
as there are many alternatives now since we no longer live
in the early 1990s and Metricom went bankrupt some time ago.

ok many @@
@
text
@/*	$OpenBSD: if_stripvar.h,v 1.9 2007/11/26 09:28:33 martynas Exp $	*/
/*	$NetBSD: if_stripvar.h,v 1.2.4.1 1996/08/05 20:37:51 jtc Exp $	*/

#ifndef _NET_IF_STRIPVAR_H_
#define _NET_IF_STRIPVAR_H_
/*
 * Definitions for SLIP interface data structures
 * 
 * (This exists so programs like slstats can get at the definition
 *  of sl_softc.)
 */
struct st_softc {
	struct	ifnet sc_if;		/* network-visible interface */
	int	sc_unit;		/* XXX unit number */
	struct	ifqueue sc_fastq;	/* interactive output queue */
	struct	tty *sc_ttyp;		/* pointer to tty structure */
	u_char	*sc_mp;			/* pointer to next available buf char */
	u_char	*sc_ep;			/* pointer to last available buf char */
	u_char	*sc_buf;		/* input buffer */
	u_char	*sc_rxbuf;		/* input destuffing buffer */
	u_char	*sc_txbuf;		/* output stuffing buffer */
	u_int	sc_flags;		/* see below */
	long	sc_oqlen;		/* previous output queue size */
	long	sc_otimeout;		/* number of times output's stalled */
#if defined(__NetBSD__) || defined(__OpenBSD__)
	int	sc_oldbufsize;		/* previous output buffer size */
	int	sc_oldbufquot;		/* previous output buffer quoting */
#endif
#ifdef INET				/* XXX */
	struct	slcompress sc_comp;	/* tcp compression data */
#endif

	int sc_state;			/* Radio reset state-machine */
#define ST_ALIVE	0x0		/*    answered  probe */
#define ST_PROBE_SENT	0x1		/*    probe sent, answer pending */
#define ST_DEAD		0x2		/*    no answer to probe; do reset */

	long sc_statetimo;		/* When (secs) current state ends */

	caddr_t	sc_bpf;			/* BPF data */
	struct timeout sc_timo;

	struct timeval sc_lastpacket;	/* for watchdog */
};


/* Internal flags */
#define	SC_ERROR	0x0001		/* Incurred error reading current pkt*/

#define SC_TIMEOUT	0x00000400	/* timeout is currently pending */

/* visible flags */
#define	SC_COMPRESS	IFF_LINK0	/* compress TCP traffic */
#define	SC_NOICMP	IFF_LINK1	/* suppress ICMP traffic */
#define	SC_AUTOCOMP	IFF_LINK2	/* auto-enable TCP compression */

#ifdef _KERNEL
void	stripattach(int n);
void	stripclose(struct tty *);
void	stripinput(int, struct tty *);
int	stripioctl(struct ifnet *, u_long, caddr_t);
int	stripopen(dev_t, struct tty *);
int	stripoutput(struct ifnet *,
	    struct mbuf *, struct sockaddr *, struct rtentry *);
void	stripstart(struct tty *);
int	striptioctl(struct tty *, u_long, caddr_t, int);
#endif /* _KERNEL */
#endif /* _NET_IF_STRIPVAR_H_ */
@


1.9
log
@typos;  ok jmc@@
sys/netinet/in_pcb.c and sys/net/bridgestp.c ok henning@@
sys/dev/pci/bktr/* ok jakemsr@@
@
text
@d1 1
a1 1
/*	$OpenBSD: if_stripvar.h,v 1.8 2002/03/14 01:27:09 millert Exp $	*/
@


1.8
log
@First round of __P removal in sys
@
text
@d1 1
a1 1
/*	$OpenBSD: if_stripvar.h,v 1.7 2001/06/15 03:38:34 itojun Exp $	*/
d54 1
a54 1
#define	SC_NOICMP	IFF_LINK1	/* supress ICMP traffic */
@


1.7
log
@change the meaning of ifnet.if_lastchange to meet RFC1573 ifLastChange.
follows BSD/OS practice and ucd-snmp code (FreeBSD does it for specific
interfaces only).

was: if_lastchange get updated on every packet transmission/receipt.
now: if_lastchange get updated when IFF_UP is changed.
@
text
@d1 1
a1 1
/*	$OpenBSD: if_stripvar.h,v 1.6 2001/06/09 06:16:38 angelos Exp $	*/
d58 9
a66 9
void	stripattach __P((int n));
void	stripclose __P((struct tty *));
void	stripinput __P((int, struct tty *));
int	stripioctl __P((struct ifnet *, u_long, caddr_t));
int	stripopen __P((dev_t, struct tty *));
int	stripoutput __P((struct ifnet *,
	    struct mbuf *, struct sockaddr *, struct rtentry *));
void	stripstart __P((struct tty *));
int	striptioctl __P((struct tty *, u_long, caddr_t, int));
@


1.7.4.1
log
@Sync UBC branch to -current
@
text
@d1 1
a1 1
/*	$OpenBSD: if_stripvar.h,v 1.7 2001/06/15 03:38:34 itojun Exp $	*/
d58 9
a66 9
void	stripattach(int n);
void	stripclose(struct tty *);
void	stripinput(int, struct tty *);
int	stripioctl(struct ifnet *, u_long, caddr_t);
int	stripopen(dev_t, struct tty *);
int	stripoutput(struct ifnet *,
	    struct mbuf *, struct sockaddr *, struct rtentry *);
void	stripstart(struct tty *);
int	striptioctl(struct tty *, u_long, caddr_t, int);
@


1.6
log
@By popular demand, protect from multiple inclusion, and fix to use the
same naming style.
@
text
@d1 1
a1 1
/*	$OpenBSD: if_stripvar.h,v 1.5 2000/06/26 22:51:01 art Exp $	*/
d42 2
@


1.5
log
@New timeouts.
@
text
@d1 1
a1 1
/*	$OpenBSD: if_stripvar.h,v 1.4 1997/02/24 13:34:02 niklas Exp $	*/
d4 2
d66 1
@


1.4
log
@OpenBSD tags + some prototyping police
@
text
@d1 1
a1 1
/*	$OpenBSD: if_stripvar.h,v 1.2.4.1 1996/08/05 20:37:51 jtc Exp $	*/
d39 1
@


1.4.14.1
log
@merge in approximately 2.9 into SMP branch
@
text
@d1 1
a1 1
/*	$OpenBSD: if_stripvar.h,v 1.5 2000/06/26 22:51:01 art Exp $	*/
a38 1
	struct timeout sc_timo;
@


1.4.14.2
log
@Merge in -current from two days ago in the SMP branch.
As usual with merges, they do not indicate progress, so do not hold
your breath for working SMP, and do not mail me and ask about the
state of it.  It has not changed.  There is work ongoing, but very, very
slowly.  The commit is done in parts as to not lock up the tree in too
big chunks at a time.
@
text
@d1 1
a1 1
/*	$OpenBSD: if_stripvar.h,v 1.4.14.1 2001/05/14 22:40:02 niklas Exp $	*/
a3 2
#ifndef _NET_IF_STRIPVAR_H_
#define _NET_IF_STRIPVAR_H_
a39 2

	struct timeval sc_lastpacket;	/* for watchdog */
a63 1
#endif /* _NET_IF_STRIPVAR_H_ */
@


1.4.14.3
log
@Merge in -current from roughly a week ago
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
d58 9
a66 9
void	stripattach(int n);
void	stripclose(struct tty *);
void	stripinput(int, struct tty *);
int	stripioctl(struct ifnet *, u_long, caddr_t);
int	stripopen(dev_t, struct tty *);
int	stripoutput(struct ifnet *,
	    struct mbuf *, struct sockaddr *, struct rtentry *);
void	stripstart(struct tty *);
int	striptioctl(struct tty *, u_long, caddr_t, int);
@


1.3
log
@__OpenBSD__
@
text
@d1 1
@


1.2
log
@sync to netbsd 0901
@
text
@d22 1
a22 1
#ifdef NetBSD
@


1.1
log
@sync
@
text
@d1 1
a1 1
/*	$NetBSD: if_stripvar.h,v 1.2 1996/05/19 22:09:45 jonathan Exp $	*/
a19 4
	u_int	sc_escape;	/* =1 if last char input was FRAME_ESCAPE */
	long	sc_lasttime;		/* last time a char arrived */
	long	sc_abortcount;		/* number of abort esacpe chars */
	long	sc_starttime;		/* time of first abort in window */
d29 8
d40 5
a44 2
/* internal flags */
#define	SC_ERROR	0x0001		/* had an input error */
@
