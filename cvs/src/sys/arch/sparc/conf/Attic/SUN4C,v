head	1.71;
access;
symbols
	OPENBSD_6_0:1.70.0.6
	OPENBSD_6_0_BASE:1.70
	OPENBSD_5_9:1.70.0.2
	OPENBSD_5_9_BASE:1.70
	OPENBSD_5_8:1.70.0.4
	OPENBSD_5_8_BASE:1.70
	OPENBSD_5_7:1.68.0.2
	OPENBSD_5_7_BASE:1.68
	OPENBSD_5_6:1.66.0.6
	OPENBSD_5_6_BASE:1.66
	OPENBSD_5_5:1.66.0.4
	OPENBSD_5_5_BASE:1.66
	OPENBSD_5_4:1.65.0.8
	OPENBSD_5_4_BASE:1.65
	OPENBSD_5_3:1.65.0.6
	OPENBSD_5_3_BASE:1.65
	OPENBSD_5_2:1.65.0.4
	OPENBSD_5_2_BASE:1.65
	OPENBSD_5_1_BASE:1.65
	OPENBSD_5_1:1.65.0.2
	OPENBSD_5_0:1.64.0.2
	OPENBSD_5_0_BASE:1.64
	OPENBSD_4_9:1.62.0.4
	OPENBSD_4_9_BASE:1.62
	OPENBSD_4_8:1.62.0.2
	OPENBSD_4_8_BASE:1.62
	OPENBSD_4_7:1.60.0.2
	OPENBSD_4_7_BASE:1.60
	OPENBSD_4_6:1.60.0.4
	OPENBSD_4_6_BASE:1.60
	OPENBSD_4_5:1.58.0.6
	OPENBSD_4_5_BASE:1.58
	OPENBSD_4_4:1.58.0.2
	OPENBSD_4_4_BASE:1.58
	OPENBSD_4_3:1.58.0.4
	OPENBSD_4_3_BASE:1.58
	OPENBSD_4_2:1.57.0.2
	OPENBSD_4_2_BASE:1.57
	OPENBSD_4_1:1.56.0.2
	OPENBSD_4_1_BASE:1.56
	OPENBSD_4_0:1.55.0.2
	OPENBSD_4_0_BASE:1.55
	OPENBSD_3_9:1.54.0.2
	OPENBSD_3_9_BASE:1.54
	OPENBSD_3_8:1.53.0.2
	OPENBSD_3_8_BASE:1.53
	OPENBSD_3_7:1.51.0.2
	OPENBSD_3_7_BASE:1.51
	OPENBSD_3_6:1.49.0.2
	OPENBSD_3_6_BASE:1.49
	SMP_SYNC_A:1.49
	SMP_SYNC_B:1.49
	OPENBSD_3_5:1.48.0.2
	OPENBSD_3_5_BASE:1.48
	OPENBSD_3_4:1.47.0.2
	OPENBSD_3_4_BASE:1.47
	UBC_SYNC_A:1.44
	OPENBSD_3_3:1.41.0.2
	OPENBSD_3_3_BASE:1.41
	OPENBSD_3_2:1.34.0.2
	OPENBSD_3_2_BASE:1.34
	OPENBSD_3_1:1.31.0.6
	OPENBSD_3_1_BASE:1.31
	UBC_SYNC_B:1.35
	UBC:1.31.0.4
	UBC_BASE:1.31
	OPENBSD_3_0:1.31.0.2
	OPENBSD_3_0_BASE:1.31
	OPENBSD_2_9_BASE:1.28
	OPENBSD_2_9:1.28.0.8
	OPENBSD_2_8:1.28.0.6
	OPENBSD_2_8_BASE:1.28
	OPENBSD_2_7:1.28.0.4
	OPENBSD_2_7_BASE:1.28
	SMP:1.28.0.2
	SMP_BASE:1.28
	kame_19991208:1.28
	OPENBSD_2_6:1.27.0.2
	OPENBSD_2_6_BASE:1.27
	OPENBSD_2_5:1.26.0.2
	OPENBSD_2_5_BASE:1.26
	OPENBSD_2_4:1.25.0.2
	OPENBSD_2_4_BASE:1.25
	OPENBSD_2_3:1.20.0.2
	OPENBSD_2_3_BASE:1.20
	OPENBSD_2_2:1.14.0.2
	OPENBSD_2_2_BASE:1.14
	OPENBSD_2_1:1.11.0.2
	OPENBSD_2_1_BASE:1.11
	OPENBSD_2_0:1.10.0.2
	OPENBSD_2_0_BASE:1.10
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.71
date	2016.09.01.09.23.41;	author tedu;	state dead;
branches;
next	1.70;
commitid	Q2PxaFNhqAe0Wmla;

1.70
date	2015.03.30.20.32.59;	author miod;	state Exp;
branches;
next	1.69;
commitid	vDBhMaVeYvyIlsiL;

1.69
date	2015.03.30.20.30.20;	author miod;	state Exp;
branches;
next	1.68;
commitid	f66FukLLgPJs9j5H;

1.68
date	2014.10.25.18.21.01;	author miod;	state Exp;
branches;
next	1.67;
commitid	9NqlHlkBSZX4i56I;

1.67
date	2014.10.25.16.51.31;	author miod;	state Exp;
branches;
next	1.66;
commitid	vB64p1sZTbPIBIXx;

1.66
date	2014.02.19.05.32.57;	author jmatthew;	state Exp;
branches;
next	1.65;

1.65
date	2011.11.08.12.53.58;	author deraadt;	state Exp;
branches;
next	1.64;

1.64
date	2011.07.04.22.53.53;	author tedu;	state Exp;
branches;
next	1.63;

1.63
date	2011.06.29.20.52.09;	author matthew;	state Exp;
branches;
next	1.62;

1.62
date	2010.07.03.03.59.17;	author krw;	state Exp;
branches;
next	1.61;

1.61
date	2010.07.02.19.57.15;	author tedu;	state Exp;
branches;
next	1.60;

1.60
date	2009.06.24.11.38.40;	author deraadt;	state Exp;
branches;
next	1.59;

1.59
date	2009.05.20.18.22.33;	author miod;	state Exp;
branches;
next	1.58;

1.58
date	2008.01.06.21.15.23;	author miod;	state Exp;
branches;
next	1.57;

1.57
date	2007.05.29.09.54.03;	author sobrado;	state Exp;
branches;
next	1.56;

1.56
date	2006.12.09.20.06.46;	author miod;	state Exp;
branches;
next	1.55;

1.55
date	2006.06.26.22.16.23;	author miod;	state Exp;
branches;
next	1.54;

1.54
date	2005.12.12.20.39.36;	author miod;	state Exp;
branches;
next	1.53;

1.53
date	2005.07.08.12.36.36;	author miod;	state Exp;
branches;
next	1.52;

1.52
date	2005.05.01.07.54.42;	author david;	state Exp;
branches;
next	1.51;

1.51
date	2004.09.27.19.32.38;	author miod;	state Exp;
branches;
next	1.50;

1.50
date	2004.09.16.09.14.04;	author mickey;	state Exp;
branches;
next	1.49;

1.49
date	2004.05.09.22.08.04;	author miod;	state Exp;
branches;
next	1.48;

1.48
date	2004.02.29.21.44.12;	author miod;	state Exp;
branches;
next	1.47;

1.47
date	2003.07.08.21.12.09;	author mickey;	state Exp;
branches;
next	1.46;

1.46
date	2003.06.25.17.40.00;	author miod;	state Exp;
branches;
next	1.45;

1.45
date	2003.06.23.09.30.36;	author miod;	state Exp;
branches;
next	1.44;

1.44
date	2003.05.14.06.39.49;	author miod;	state Exp;
branches;
next	1.43;

1.43
date	2003.05.14.01.13.48;	author miod;	state Exp;
branches;
next	1.42;

1.42
date	2003.05.13.17.24.10;	author miod;	state Exp;
branches;
next	1.41;

1.41
date	2003.03.10.20.50.38;	author miod;	state Exp;
branches;
next	1.40;

1.40
date	2003.03.09.02.30.45;	author miod;	state Exp;
branches;
next	1.39;

1.39
date	2003.03.06.21.48.25;	author miod;	state Exp;
branches;
next	1.38;

1.38
date	2003.03.05.14.34.39;	author miod;	state Exp;
branches;
next	1.37;

1.37
date	2003.01.31.22.00.22;	author miod;	state Exp;
branches;
next	1.36;

1.36
date	2002.11.23.20.47.04;	author miod;	state Exp;
branches;
next	1.35;

1.35
date	2002.10.27.23.00.14;	author miod;	state Exp;
branches;
next	1.34;

1.34
date	2002.09.20.11.17.55;	author fgsch;	state Exp;
branches;
next	1.33;

1.33
date	2002.08.31.10.47.18;	author miod;	state Exp;
branches;
next	1.32;

1.32
date	2002.08.12.10.44.03;	author miod;	state Exp;
branches;
next	1.31;

1.31
date	2001.06.27.05.46.27;	author art;	state Exp;
branches
	1.31.4.1;
next	1.30;

1.30
date	2001.05.16.05.07.49;	author millert;	state Exp;
branches;
next	1.29;

1.29
date	2001.05.10.10.34.41;	author art;	state Exp;
branches;
next	1.28;

1.28
date	99.10.29.14.14.28;	author art;	state Exp;
branches
	1.28.2.1;
next	1.27;

1.27
date	99.04.18.03.24.22;	author jason;	state Exp;
branches;
next	1.26;

1.26
date	99.02.01.00.31.57;	author jason;	state Exp;
branches;
next	1.25;

1.25
date	98.10.19.05.43.30;	author jason;	state Exp;
branches;
next	1.24;

1.24
date	98.09.16.23.13.52;	author jason;	state Exp;
branches;
next	1.23;

1.23
date	98.09.10.17.34.31;	author jason;	state Exp;
branches;
next	1.22;

1.22
date	98.07.10.19.20.07;	author jason;	state Exp;
branches;
next	1.21;

1.21
date	98.04.30.06.12.57;	author jason;	state Exp;
branches;
next	1.20;

1.20
date	98.03.04.19.49.06;	author johns;	state Exp;
branches;
next	1.19;

1.19
date	98.03.04.19.24.53;	author johns;	state Exp;
branches;
next	1.18;

1.18
date	98.03.04.12.42.27;	author johns;	state Exp;
branches;
next	1.17;

1.17
date	98.03.02.00.08.18;	author johns;	state Exp;
branches;
next	1.16;

1.16
date	98.02.26.10.50.27;	author johns;	state Exp;
branches;
next	1.15;

1.15
date	98.02.26.08.05.52;	author jason;	state Exp;
branches;
next	1.14;

1.14
date	97.09.17.06.47.04;	author downsj;	state Exp;
branches;
next	1.13;

1.13
date	97.09.11.04.47.18;	author todd;	state Exp;
branches;
next	1.12;

1.12
date	97.06.22.21.42.41;	author downsj;	state Exp;
branches;
next	1.11;

1.11
date	97.04.29.05.16.00;	author deraadt;	state Exp;
branches;
next	1.10;

1.10
date	96.09.20.06.45.22;	author deraadt;	state Exp;
branches;
next	1.9;

1.9
date	96.08.31.02.09.37;	author deraadt;	state Exp;
branches;
next	1.8;

1.8
date	96.08.19.00.21.48;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	95.11.20.07.01.14;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	95.11.17.12.35.30;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	95.11.03.01.42.44;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	95.10.23.16.19.56;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	95.10.22.06.49.23;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	95.10.21.13.53.50;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.51.37;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.51.37;	author deraadt;	state Exp;
branches;
next	;

1.28.2.1
date	2001.07.04.10.23.16;	author niklas;	state Exp;
branches;
next	1.28.2.2;

1.28.2.2
date	2003.03.27.23.49.24;	author niklas;	state Exp;
branches;
next	1.28.2.3;

1.28.2.3
date	2003.05.16.00.29.40;	author niklas;	state Exp;
branches;
next	1.28.2.4;

1.28.2.4
date	2004.02.19.10.49.57;	author niklas;	state Exp;
branches;
next	1.28.2.5;

1.28.2.5
date	2004.06.05.23.10.57;	author niklas;	state Exp;
branches;
next	;

1.31.4.1
date	2002.10.29.00.28.09;	author art;	state Exp;
branches;
next	1.31.4.2;

1.31.4.2
date	2003.05.19.21.46.32;	author tedu;	state Exp;
branches;
next	;


desc
@@


1.71
log
@Celebrate OpenBSD 6.0 release by retiring the sparc port.
You've served us well, good friend, but now it's time to rest.
ok deraadt
@
text
@#	$OpenBSD: SUN4C,v 1.70 2015/03/30 20:32:59 miod Exp $
#	$NetBSD: GENERIC,v 1.48 1997/08/23 19:19:01 mjacob Exp $

# Machine architecture; required by config(8)
machine		sparc

include "../../../conf/GENERIC"


option		SUN4C		# sun4c - SS1, 1+, 2, ELC, SLC, IPC, IPX, etc.

#option		KGDB		# support for kernel gdb
#option		KGDBDEV=0xc01	# kgdb device number (dev_t)
#option		KGDBRATE=38400	# baud rate

# Options for SPARCstation hardware
option		WSEMUL_SUN	# provide sun terminal emulation; required
option		WSEMUL_NO_VT100	# do not provide vt100 terminal emulation
option		WSDISPLAY_COMPAT_RAWKBD # provide raw scancodes; needed for X11

maxusers	18		# estimated number of users

# Generic swap; second partition of root disk or network.
config		bsd	swap generic

# Main bus and CPU .. all systems.
mainbus0 at root
cpu0	at mainbus0

# Bus types found on SPARC systems.
sbus0	at mainbus0				# sun4c

audioamd0 at mainbus0				# sun4c
audio*	at audioamd?

auxreg*	at mainbus0				# sun4c

# Mostek clock found on 4/300, sun4c, and sun4m systems.
# The Mostek clock NVRAM is the "eeprom" on sun4/300 systems.
clock0	at mainbus0				# sun4c

# Memory error registers.
memreg0	at mainbus0				# sun4c

# Timer chip found on 4/300, sun4c, and sun4m systems.
timer0	at mainbus0				# sun4c

# Zilog 8530 serial chips.  Each has two-channels.
# zs0 is ttya and ttyb.  zs1 is the keyboard and mouse.
zs0	at mainbus0					# sun4c
zs1	at mainbus0					# sun4c

zstty* at zs?
zskbd* at zs?
wskbd* at zskbd?
zsms*  at zs?
wsmouse* at zsms?

# Magma serial/parallel port devices
magma*	at sbus?					# magma serial cards
mtty*	at magma?
mbpp*	at magma?

# SUNW,spif serial/parallel port devices
spif*	at sbus?					# spif serial cards
stty*	at spif?
sbpp*	at spif?

bpp*	at sbus?					# parallel port

# SUNW,xbox SBus Expansion Subsystem
xbox*	at sbus?					# SBus Expansion box
sbus*	at xbox?

#
# Note the flags on the esp entries below, that work around
# deficiencies in the current driver:
#	bits 0-7:  disable disconnect/reselect for the corresponding target
#	bits 8-15: disable synch negotiation for target [bit-8]
#	Note: targets 4-7 have disconnect/reselect enabled on the premise
#	      that tape devices normally have one of these targets. Tape
#	      devices should be allowed to disconnect for the SCSI bus
#	      to operate acceptably.
#

# sun4c or sun4m SCSI - an NCR53c94 or equivalent behind
# specialized DMA glue
dma0	at sbus0					# on-board SCSI
esp0	at sbus0 flags 0x00ff000f			# sun4c

# FSBE/S SCSI - an NCR53c94 or equivalent behind
dma*	at sbus?					# SBus SCSI
esp*	at sbus? flags 0x00ff000f			# two flavours
esp*	at dma? flags 0x00ff000f			# depending on model

#sun4c, sun4m
qlw*	at sbus?
#qla*	at sbus?

# sun4/300 and sun4c Ethernet - an AMD 7990 LANCE
le0	at sbus0					# sun4c on-board
le*	at sbus?

# Additional SBus LANCE devices - glued on by lebuffer
lebuffer0	at sbus0				# sun4m SBus
lebuffer*	at sbus?				# sun4m SBus
le0	at lebuffer0					#
le*	at lebuffer?					#

# Quad-ethernet glue device, and sub-devices
qec*	at sbus?
qe*	at qec?
be*	at qec?

# Sun "bwtwo" black and white framebuffer, found on sun4, sun4c, and sun4m
# systems.
bwtwo0	at sbus0					# sun4c on-board
bwtwo*	at sbus?					# sun4c and sun4m
wsdisplay* at bwtwo?

# Sun "cgthree" SBus color framebuffer.
cgthree* at sbus?
wsdisplay* at cgthree?

# Sun "cgsix" accelerated color framebuffer.
cgsix0	at sbus?
cgsix*	at sbus?
wsdisplay* at cgsix?

# Sun "cgtwelve" (GS) accelerated 24-bit framebuffer.
cgtwelve*	at sbus?
wsdisplay* at cgtwelve?

# Vigra VS10 or VS12 framebuffer.
vigra*	at sbus?
wsdisplay* at vigra?

# Parallax XVideo and PowerVideo
tvtwo* at sbus?
wsdisplay* at tvtwo?

# Fujitsu AG-10e framebuffer.
agten* at sbus?
wsdisplay* at agten?

# Southland Media Systems MGX/MGXPlus framebuffer.
mgx* at sbus?
wsdisplay* at mgx?

# Vitec/Connectware/AP&D RasterFlex framebuffer series.
rfx* at sbus?
wsdisplay* at rfx?

# Sun PCMCIA bridge
stp*	at sbus?
pcmcia*	at stp?

# PCMCIA devices
wi*	at pcmcia?		# WaveLAN IEEE 802.11DS
#an*	at pcmcia?		# Aironet IEEE 802.11DS
ne*	at pcmcia?		# NE2000-compat ethernet
ep*	at pcmcia?		# PCMCIA based 3C5xx ethernet
#com*	at pcmcia?		# PCMCIA modems/serial ports

# Media Independent Interface (mii) drivers (required by ne and ep)
bmtphy*	at mii?			# Broadcom 10/100 PHYs
lxtphy*	at mii?			# Level1 LXT970 PHYs
nsphy* at mii?			# NS and compatible PHYs
nsphyter* at mii?
tqphy* at mii?			# TDK 78Q212x PHYs
ukphy*	at mii?

# SCSI bus layer.  SCSI devices attach to the SCSI bus, which attaches
# to the underlying hardware controller.

# These entries find devices on all SCSI busses and assign
# unit numers dynamically.
scsibus* at scsi?
sd*	at scsibus?		# SCSI disks
st*	at scsibus?		# SCSI tapes
cd*	at scsibus?		# SCSI CD-ROMs
ch*	at scsibus?		# SCSI changer devices
uk*	at scsibus?		# unknown SCSI devices

# Floppy controller and drive found on SPARCstations.
fdc0	at mainbus0				# sun4c controller
fd*	at fdc0					# the drive itself

pseudo-device	wsmux	2	# mouse & keyboard multiplexor
@


1.70
log
@Remove isp stanzas. qlw is here to stay.
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.69 2015/03/30 20:30:20 miod Exp $
@


1.69
log
@Add a bus_dma_tag_t for DVMA usage, suitable for use for devices not sitting
behind a sun4m iommu.

Move the existing dvma routines from vm_machdep.c to this new dvma.c; this
allows for a few declarations to be removed from public headers.

Extend the device attachment arguments (struct confargs) to pass a
bus_dma_tag_t. mainbus receives the dvma bus_dma_tag_t, and devices pass the
tag unchanged to their children, except for iommu(4) which replaces it with
its own.

Change the few sun4m-only drivers to pick the bus_dma_tag_t from confargs
rather than assume iommu; this allows qlw(4) to attach and work on sun4c.

ok kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.68 2014/10/25 18:21:01 miod Exp $
a96 1
isp*	at sbus?
@


1.68
log
@Don't let qlw attach to non-sun4m yet, as this driver currently depends upon
sun4m's iommu for bus_dma. (Guess what task just hit my todolist...)
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.67 2014/10/25 16:51:31 miod Exp $
d98 2
@


1.67
log
@Add and enable qlw at sbus. Tested on QLGC,isp
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.66 2014/02/19 05:32:57 jmatthew Exp $
a97 2
qlw*	at sbus?
#qla*	at sbus?
@


1.66
log
@add qla and qle everywhere we currently have isp, commented out except for
qle in GENERIC on i386, amd64 and sparc64, where it's reasonably well tested
and likely to be useful.

requested by deraadt@@ and kettenis@@, ok dlg@@
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.65 2011/11/08 12:53:58 deraadt Exp $
d98 1
@


1.65
log
@procfs for solaris compat?  not anymore; ok miod
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.64 2011/07/04 22:53:53 tedu Exp $
d98 1
@


1.64
log
@remove compat_svr4 support.  ok deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.63 2011/06/29 20:52:09 matthew Exp $
a16 2
option		PROCFS		# /proc

@


1.63
log
@Replace all instances of "scsibus* at hba?" with a single "scsibus* at
scsi?" rule, similar to how ethernet PHY drivers attach at mii.

Discussed on icb.
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.62 2010/07/03 03:59:17 krw Exp $
a16 1
option		COMPAT_SVR4	# compatibility with SVR4 binaries
@


1.62
log
@No more ss(4) or usscanner(4). Unused, unloved and unmaintained.
General huzzahs.

"go for it" deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.61 2010/07/02 19:57:15 tedu Exp $
a176 2
scsibus* at esp?
scsibus* at isp?
d180 1
@


1.61
log
@remove support for compat_sunos (and m68k4k).  ok deraadt guenther
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.60 2009/06/24 11:38:40 deraadt Exp $
a185 1
ss*	at scsibus?		# SCSI scanners
@


1.60
log
@for the isp(4) driver, invert the meaning of the options which pull
firmwares into the smaller (and larger) media
ok krw
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.59 2009/05/20 18:22:33 miod Exp $
a16 1
option		COMPAT_SUNOS	# compatibility with SunOS binaries
@


1.59
log
@Add code to attach sun mice on sparc and sparc64 as wsmouse devices. Since
not all Sun mice run at the canonical 1200 bps, hop between 1200, 4800 and
9600 bps by paying attention to breaks on the line.

Attachement and engine code written 7 years ago for OpenBSD/sparc, except for
sparc64 com(4) attachment. Speed hop idea borrowed from Opensolaris.

This allows sparc and sparc64 users to run X11 without needing a configuration
file anymore, as it was in the XFree86 3.x days. Multihead configurations
will still need a minimal configuration file, though.
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.58 2008/01/06 21:15:23 miod Exp $
a101 1
options ISP_COMPILE_1000_FW=1
@


1.58
log
@Add lebuffer.
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.57 2007/05/29 09:54:03 sobrado Exp $
d23 1
d60 2
d194 2
@


1.57
log
@use the right capitalization for `SBus'

ok jmc@@
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.56 2006/12/09 20:06:46 miod Exp $
d104 6
@


1.56
log
@Do not make sun terminal emulation selected by the wsemul_sun frame buffer
attribute anymore; remove it and use option WSEMUL_SUN instead, which gets
added to all sparc* kernels.

While there, do not compile vt100 emulation on sparc* kernels, this saves 16+
KB of text.

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.55 2006/06/26 22:16:23 miod Exp $
d116 1
a116 1
# Sun "cgthree" Sbus color framebuffer.
@


1.55
log
@Enable wide targets on FAS366 esp; note that this changes the way esp
user-controllable device flags are parsed, be sure to rerun config(8) on your
next kernel compile.
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.54 2005/12/12 20:39:36 miod Exp $
d20 3
@


1.54
log
@Only include PROCFS on kernels which have either COMPAT_LINUX or COMPAT_SVR4,
otherwise it's just a waste of bytes.
ok deraadt@@ mickey@@
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.53 2005/07/08 12:36:36 miod Exp $
d87 1
a87 1
esp0	at sbus0 flags 0xff0f				# sun4c
d91 2
a92 2
esp*	at sbus? flags 0xff0f				# two flavours
esp*	at dma? flags 0xff0f				# depending on model
@


1.53
log
@Allow more than one auxio device to attach, and attach both SPARCbook auxio
registers. However, those are handled specifically since they do not have
the same meaning as the regular sun4c/sun4m auxio register.

A specific auxregbisc() function is provided for explicit sparcbook operation.
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.52 2005/05/01 07:54:42 david Exp $
d19 1
@


1.52
log
@spacing; ok miod@@ deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.51 2004/09/27 19:32:38 miod Exp $
d35 1
a35 1
auxreg0	at mainbus0				# sun4c
@


1.51
log
@Do not mention a commented out strip(4), it is already in sys/conf/GENERIC.
@
text
@d1 2
a2 2
#	$OpenBSD: SUN4C,v 1.50 2004/09/16 09:14:04 mickey Exp $
# 	$NetBSD: GENERIC,v 1.48 1997/08/23 19:19:01 mjacob Exp $
d66 1
a66 1
bpp*	at sbus?					# parallel port 
@


1.50
log
@cleanup deafult locators (blah ?); please check that your most hated architecture is still fluffy (;
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.49 2004/05/09 22:08:04 miod Exp $
a180 2

#pseudo-device	strip	1	# radio clock
@


1.49
log
@Add option ISP_COMPILE_1000_FW, as done in GENERIC; recommended by mjacob@@.
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.48 2004/02/29 21:44:12 miod Exp $
d52 3
a54 3
zstty* at zs? channel ?
zskbd* at zs? channel ?
wskbd* at zskbd? console ?
d147 1
a147 1
pcmcia*	at stp? socket ?
d150 5
a154 5
wi*	at pcmcia? function ?			# WaveLAN IEEE 802.11DS
#an*	at pcmcia? function ?			# Aironet IEEE 802.11DS
ne*	at pcmcia? function ?			# NE2000-compat ethernet
ep*	at pcmcia? function ?			# PCMCIA based 3C5xx ethernet
#com*	at pcmcia? function ?			# PCMCIA modems/serial ports
d157 6
a162 6
bmtphy*	at mii? phy ?				# Broadcom 10/100 PHYs
lxtphy*	at mii? phy ?				# Level1 LXT970 PHYs
nsphy* at mii? phy ?				# NS and compatible PHYs
nsphyter* at mii? phy ?
tqphy* at mii? phy ?				# TDK 78Q212x PHYs
ukphy*	at mii? phy ?
d171 6
a176 6
sd*	at scsibus? target ? lun ?		# SCSI disks
st*	at scsibus? target ? lun ?		# SCSI tapes
cd*	at scsibus? target ? lun ?		# SCSI CD-ROMs
ch*	at scsibus? target ? lun ?		# SCSI changer devices
ss*	at scsibus? target ? lun ?		# SCSI scanners
uk*	at scsibus? target ? lun ?		# unknown SCSI devices
@


1.48
log
@Enter rfx, driver for the SBus RasterFlex frame buffer family.
Currently 8-bit only for now.

This apparently completes the SBus frame buffer support list - yet if
you stumble upon an unsupported SBus frame buffer, I'd love to hear about it...
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.47 2003/07/08 21:12:09 mickey Exp $
d95 1
@


1.47
log
@add ep@@pcmcia and phys, commented out an and com
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.46 2003/06/25 17:40:00 miod Exp $
d139 4
@


1.46
log
@Recent bus_space changes make ne at pcmcia work out of the box,
tested by pb@@
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.45 2003/06/23 09:30:36 miod Exp $
d145 10
a154 6
wi*	at pcmcia? function ?
ne*	at pcmcia? function ?

# Media Independent Interface (mii) drivers (required by ne)
bmtphy*	at mii? phy ?
lxtphy*	at mii? phy ?
d156 1
@


1.45
log
@Attachment glue for stp and tslot drivers, and add them, as well as wi0,
to the appropriate configuration files.
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.44 2003/05/14 06:39:49 miod Exp $
d146 7
@


1.44
log
@The ramdac's hater club is proud to present new yet another SBus frame
bufer driver, this time for the Southland Media Systems (now Quantum 3D)
MGX and MGXPlus cards.

Not complete, but a good start.
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.43 2003/05/14 01:13:48 miod Exp $
d139 7
@


1.43
log
@
No more flags either for those frame buffer drivers.
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.42 2003/05/13 17:24:10 miod Exp $
d135 4
@


1.42
log
@Make the "slot" and "offset" locators for sbus drivers optional in
configuration lines.
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.41 2003/03/10 20:50:38 miod Exp $
d121 1
a121 1
cgtwelve*	at sbus? flags 0x0000
@


1.41
log
@Sun documentation mentions that ZX can not run on a sun4c or inside an xbox,
so document this as well.
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.40 2003/03/09 02:30:45 miod Exp $
d57 1
a57 1
magma*	at sbus? slot ? offset ?			# magma serial cards
d62 1
a62 1
spif*	at sbus? slot ? offset ?			# spif serial cards
d66 1
a66 1
bpp*	at sbus? slot ? offset ?			# parallel port 
d69 1
a69 1
xbox*	at sbus? slot ? offset ?			# SBus Expansion box
d85 2
a86 2
dma0	at sbus0 slot ? offset ?			# on-board SCSI
esp0	at sbus0 slot ? offset ? flags 0xff0f		# sun4c
d89 2
a90 2
dma*	at sbus? slot ? offset ?			# SBus SCSI
esp*	at sbus? slot ? offset ? flags 0xff0f		# two flavours
d94 1
a94 1
isp*	at sbus? slot ? offset ?
d97 2
a98 2
le0	at sbus0 slot ? offset ?			# sun4c on-board
le*	at sbus? slot ? offset ?
d101 1
a101 1
qec*	at sbus? slot ? offset ?
d107 2
a108 2
bwtwo0	at sbus0 slot ? offset ?		# sun4c on-board
bwtwo*	at sbus? slot ? offset ?		# sun4c and sun4m
d112 1
a112 1
cgthree* at sbus? slot ? offset ?
d116 2
a117 2
cgsix0	at sbus? slot ? offset ?
cgsix*	at sbus? slot ? offset ?
d121 1
a121 1
cgtwelve*	at sbus? slot ? offset ? flags 0x0000
d125 1
a125 1
vigra*	at sbus? slot ? offset ?
d129 1
a129 1
tvtwo* at sbus? slot ? offset ?
d133 1
a133 1
agten* at sbus? slot ? offset ?
@


1.40
log
@Add and enable zx. Not put in RAMDISK yet, need to check if this still fits
on the floppies first.
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.39 2003/03/06 21:48:25 miod Exp $
a122 4

# Sun "leo" (ZX) accelerated 24-bit framebuffer.
zx*	at sbus? slot ? offset ?
wsdisplay* at zx?
@


1.39
log
@Premiliminary driver for the Fujitsu AG-10e SBus frame buffer.
It will currently only work in 8bit mode, and without using the i128
acceleration features (but that's a good start for 3.3).

Written initially in november 2002, but it took some time in experiments
until I realized the ramdac had to be fed values shifted left by 16 bits in
order to work as intended, for no good reason.

So, I am now officially founding a ``RAMDAC Hater's Club''. Feel free to
apply.
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.38 2003/03/05 14:34:39 miod Exp $
d123 4
@


1.38
log
@Driver for the Parallax XVideo and PowerVideo frame buffers.

Currently limited to dump frame buffer operation, the acceleration features
will be used later...

Code by me, tests on real hardware by Paul Weissmann.
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.37 2003/01/31 22:00:22 miod Exp $
d131 4
@


1.37
log
@Various typos; Andrey Matveev
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.36 2002/11/23 20:47:04 miod Exp $
d127 4
@


1.36
log
@Mention that hme does not work in sun4c machines.
@
text
@d1 1
a1 1
#	$OpenBSD: SUN4C,v 1.35 2002/10/27 23:00:14 miod Exp $
a9 2
# Options for variants of the Sun SPARC architecure.
# At least one is required.
@


1.35
log
@Turn into a really useful configuration file, i.e. GENERIC tuned for sun4c
hardware, like SUN4M is for sun4m hardware.
@
text
@d1 1
a1 1
#	$OpenBSD$
a100 6

# HappyMeal ethernet
hme*	at sbus? slot ? offset ?
# Media Independent Interface (mii) drivers (required by hme)
nsphy*	at mii? phy ?				# NS and compatible PHYs
qsphy*	at mii? phy ?				# Quality Semi QS6612 PHYs
@


1.34
log
@Support to run the 24 bit fb in 8 bit mode or cg12 in 1 bit mode
via flags, using 0x0001.
miod@@ ok.
@
text
@d1 2
a2 2
# 	$OpenBSD: SUN4C,v 1.32 2002/08/12 10:44:03 miod Exp $
# 	$NetBSD: GENERIC,v 1.19 1995/10/08 11:45:39 pk Exp $
d4 1
a5 39
option		SUN4C
#option		MMU_3L
#option		DDB,DEBUG,DIAGNOSTIC

# obsolete timezone spec
option		TIMEZONE=0, DST=0

# Standard system options
#option		DEBUG, DIAGNOSTIC	# extra kernel debugging
option		KTRACE			# system call tracing support
#option		KGDB			# support for kernel gdb
#option		KGDBDEV=0xc01, KGDBRATE=38400	# device & baud rate
option		SYSVMSG,SYSVSEM,SYSVSHM

# Filesystem options
option		FFS
option		NFSSERVER	# Sun NFS-compatible filesystem
option		NFSCLIENT	# Sun NFS-compatible filesystem
option		KERNFS		# kernel data-structure filesystem
option		FIFO		# POSIX fifo support (in all filesystems)
option		QUOTA		# fast filesystem with user and group quotas
option		MFS		# memory-based filesystem
option		LOFS		# Loop-back filesystem
option		FDESC		# user file descriptor filesystem
option		NULLFS		# null fs, required by umapfs
option		UMAPFS		# uid/gid remapping filesystem
option		PORTAL		# portal filesystem (still experimental)
option		PROCFS		# /proc
option		CD9660		# ISO 9660 + Rock Ridge file system
option		UNION		# union file system

# Networking options
option		INET
#option		TCP_COMPAT_42	# compatibility with 4.2BSD TCP/IP
#option		GATEWAY		# IP packet forwarding
#option		ISO		# OSI networking
#option		TPIP
#option		EON
option		COMPAT_43
d7 10
a16 1
option		LKM
d19 2
a20 2
option		COMPAT_SUNOS		# compatibility with SunOS binaries
option		COMPAT_SVR4		# compatibility with SVR4 binaries
d22 1
a22 1
maxusers	16		# estimated number of users
d24 1
d27 1
d31 2
a32 4
sbus0	at mainbus0
#obio0	at mainbus0
#vmes0	at mainbus0
#vmel0	at mainbus0
d34 1
a34 1
audioamd0 at mainbus0
d37 1
a37 1
auxreg0	at mainbus0
d39 14
a52 19
clock0	at mainbus0
#clock0	at obio0 addr 0xf2000000
#oclock0 at obio0 addr 0xf3000000
#oclock0 at obio0 addr 0x03000000		# 4/100
memreg0	at mainbus0
#memreg0 at obio0 addr 0xf4000000
#memreg0 at obio0 addr 0x04000000		# 4/100
timer0	at mainbus0
#timer0	at obio0 addr 0xef000000
#eeprom0 at obio0 addr 0xf2000000
#eeprom0 at obio0 addr 0x02000000		# 4/100

zs0	at mainbus0
#zs0	at obio0 addr 0xf1000000 level 12 flags 0x103
#zs0	at obio0 addr 0x01000000 level 12 flags 0x103	# 4/100
zs1	at mainbus0
#zs1	at obio0 addr 0xf0000000 level 12 flags 0x103
#zs1	at obio0 addr 0x00000000 level 12 flags 0x103	# 4/100
#zs2	at obio0 addr 0xe0000000 level 12 flags 0x103
d68 2
d74 20
a93 13
# FSBE/S or sun4m
#espdma0	at sbus0 slot ? offset ?
#espdma*	at sbus0 slot ? offset ?
#esp0	at espdma? slot ? offset ?
#esp*	at espdma? slot ? offset ?

# old sun4c SCSI
dma0	at sbus0 slot ? offset ?
dma*	at sbus0 slot ? offset ?
#dma0	at obio0 addr 0xfa001000 level 4
esp0	at sbus0 slot ? offset ?
esp*	at sbus0 slot ? offset ?
#esp0	at obio0 addr 0xfa000000 level 4
d95 5
a99 2
# old sun4c
le0	at sbus? slot ? offset ?
a100 1
#le0	at obio0 addr 0xf9000000 level 6
d113 7
a119 27
#ie0	at obio0 addr 0xf6000000 level 6
#ie0	at obio0 addr 0x06000000 level 6		# 4/100
#ie1	at vmes0 addr 0xffe88000 level 5 vect 0x75
#ie2	at vmes0 addr 0xff31ff02 level 5 vect 0x76
#ie3	at vmes0 addr 0xff35ff02 level 5 vect 0x77
#ie4	at vmes0 addr 0xff2dff02 level 5 vect 0x7c

#xdc0	at vmel0 addr 0xffffee80 level 3 vect 0x44
#xdc1	at vmel0 addr 0xffffee90 level 3 vect 0x45
#xdc2	at vmel0 addr 0xffffeea0 level 3 vect 0x46
#xdc3	at vmel0 addr 0xffffeeb0 level 3 vect 0x47
#xd*	at xdc? drive ?

#xyc0	at vmes0 addr 0xffffee40 level 3 vect 0x48
#xyc1	at vmes0 addr 0xffffee48 level 3 vect 0x49
#xy*	at xyc? drive ?

#si0	at vmes0 addr 0xff200000 level 2 vect 0x40
#si1	at vmes0 addr 0xff204000 level 2 vect 0x41
#sw0	at obio0 addr 0x0a000000 level 2

bwtwo0	at sbus0 slot ? offset ?
bwtwo*	at sbus? slot ? offset ?
#bwtwo0	at obio0 addr 0xfd000000 level 4	# 4/260
#bwtwo0	at obio0 addr 0xfb300000 level 4	# 4/{300/400} ??
#cgtwo0	at vmes0 addr 0xff400000 level 4 vect 0xa8
#cgnine0 at vmel0 addr 0x08000000 level 4
d121 1
a121 3
cgsix* at sbus? slot ? offset ?
cgtwelve* at sbus? slot ? offset ? flags 0x0000
vigra*	at sbus? slot ? offset ?
d123 3
a125 2
wsdisplay* at bwtwo?
wsdisplay* at cgthree?
d127 3
d131 3
d136 2
d139 14
a152 2
#scsibus* at si?
#scsibus* at sw?
d154 1
a154 17
sd*	at scsibus? target ? lun ?
st*	at scsibus? target ? lun ?
cd*	at scsibus? target ? lun ?
ch*     at scsibus? target ? lun ?              # SCSI changer devices
ss*     at scsibus? target ? lun ?              # SCSI scanners
uk*     at scsibus? target ? lun ?              # unknown SCSI devices

fdc0	at mainbus0
fd*	at fdc0

pseudo-device	loop
pseudo-device	pty	32
pseudo-device	sl	2
pseudo-device	ppp	2
pseudo-device	tun	4
pseudo-device	vnd	3
pseudo-device	bpfilter 16
@


1.33
log
@Driver for the Vigra VS10 and VS12 SBus framebuffers, and possibly more from
this series.
Thanks to Andrey Smagin (andrey at smagin dot com) for providing a VS10 card.
@
text
@d165 1
a165 1
cgtwelve* at sbus? slot ? offset ?
@


1.32
log
@Convert sparc console code from rcons and pseudo-devices to rasops and wscons.
For most framebuffers it is faster.

Other changes include:
o 24 bit support in tcx(4) for the S24 framebuffer
o accelerated cgsix(4) text console
o new cgtwelve(4) driver for the GS framebuffer
o improved serial driver code
o better keyboard support

The following framebuffers have not been tested but should work: cgfour,
cgeight and cgfourteen

These changes will require XF4 changes, to use Xwsfb instead of Xsun*, to be
commited later today.

Most of the work by me during the LSM and the week after, with code borrowed
from jason@@, NetBSD (new serial code), and feedback from mickey@@. Work on
pnozz(4) done by millert@@
@
text
@d1 1
a1 1
# 	$OpenBSD: SUN4C,v 1.31 2001/06/27 05:46:27 art Exp $
d166 1
d172 1
@


1.31
log
@UVM is no longer an option.
@
text
@d1 1
a1 1
# 	$OpenBSD: SUN4C,v 1.30 2001/05/16 05:07:49 millert Exp $
a16 1
option		RASTERCONSOLE		# fast rasterop console
d88 4
d157 1
a157 1
bwtwo0	at sbus? slot ? offset ?
a162 1
cgthree0 at sbus? slot ? offset ?
a163 1
cgsix0 at sbus? slot ? offset ?
d165 1
d167 4
a170 6
#pfour0	at obio0 addr 0xfb000000
#pfour0	at obio0 addr 0x0b000000                        # 4/100
#bwtwo0	at pfour0
#cgfour0 at pfour0
#cgeight0 at pfour0
#cgsix0	at pfour0
a188 1
pseudo-device	kbd
@


1.31.4.1
log
@sync to -current
@
text
@d1 2
a2 2
#	$OpenBSD$
# 	$NetBSD: GENERIC,v 1.48 1997/08/23 19:19:01 mjacob Exp $
a3 1
# Machine architecture; required by config(8)
d5 40
d46 1
a46 10
include "../../../conf/GENERIC"


# Options for variants of the Sun SPARC architecure.
# At least one is required.
option		SUN4C		# sun4c - SS1, 1+, 2, ELC, SLC, IPC, IPX, etc.

#option		KGDB		# support for kernel gdb
#option		KGDBDEV=0xc01	# kgdb device number (dev_t)
#option		KGDBRATE=38400	# baud rate
d49 2
a50 2
option		COMPAT_SUNOS	# compatibility with SunOS binaries
option		COMPAT_SVR4	# compatibility with SVR4 binaries
d52 1
a52 1
maxusers	18		# estimated number of users
a53 1
# Generic swap; second partition of root disk or network.
a55 1
# Main bus and CPU .. all systems.
d59 4
a62 2
# Bus types found on SPARC systems.
sbus0	at mainbus0				# sun4c
d64 1
a64 1
audioamd0 at mainbus0				# sun4c
d67 1
a67 1
auxreg0	at mainbus0				# sun4c
d69 19
a87 18
# Mostek clock found on 4/300, sun4c, and sun4m systems.
# The Mostek clock NVRAM is the "eeprom" on sun4/300 systems.
clock0	at mainbus0				# sun4c

# Memory error registers.
memreg0	at mainbus0				# sun4c

# Timer chip found on 4/300, sun4c, and sun4m systems.
timer0	at mainbus0				# sun4c

# Zilog 8530 serial chips.  Each has two-channels.
# zs0 is ttya and ttyb.  zs1 is the keyboard and mouse.
zs0	at mainbus0					# sun4c
zs1	at mainbus0					# sun4c

zstty* at zs? channel ?
zskbd* at zs? channel ?
wskbd* at zskbd? console ?
a98 2
bpp*	at sbus? slot ? offset ?			# parallel port 

d103 13
a115 20
#
# Note the flags on the esp entries below, that work around
# deficiencies in the current driver:
#	bits 0-7:  disable disconnect/reselect for the corresponding target
#	bits 8-15: disable synch negotiation for target [bit-8]
#	Note: targets 4-7 have disconnect/reselect enabled on the premise
#	      that tape devices normally have one of these targets. Tape
#	      devices should be allowed to disconnect for the SCSI bus
#	      to operate acceptably.
#

# sun4c or sun4m SCSI - an NCR53c94 or equivalent behind
# specialized DMA glue
dma0	at sbus0 slot ? offset ?			# on-board SCSI
esp0	at sbus0 slot ? offset ? flags 0xff0f		# sun4c

# FSBE/S SCSI - an NCR53c94 or equivalent behind
dma*	at sbus? slot ? offset ?			# SBus SCSI
esp*	at sbus? slot ? offset ? flags 0xff0f		# two flavours
esp*	at dma? flags 0xff0f				# depending on model
d117 2
a118 5
#sun4c, sun4m
isp*	at sbus? slot ? offset ?

# sun4/300 and sun4c Ethernet - an AMD 7990 LANCE
le0	at sbus0 slot ? offset ?			# sun4c on-board
d120 1
d133 28
a160 7
# Sun "bwtwo" black and white framebuffer, found on sun4, sun4c, and sun4m
# systems.
bwtwo0	at sbus0 slot ? offset ?		# sun4c on-board
bwtwo*	at sbus? slot ? offset ?		# sun4c and sun4m
wsdisplay* at bwtwo?

# Sun "cgthree" Sbus color framebuffer.
d162 2
a163 1
wsdisplay* at cgthree?
d165 6
a170 12
# Sun "cgsix" accelerated color framebuffer.
cgsix0	at sbus? slot ? offset ?
cgsix*	at sbus? slot ? offset ?
wsdisplay* at cgsix?

# Sun "cgtwelve" (GS) accelerated 24-bit framebuffer.
cgtwelve*	at sbus? slot ? offset ? flags 0x0000
wsdisplay* at cgtwelve?

# Vigra VS10 or VS12 framebuffer.
vigra*	at sbus? slot ? offset ?
wsdisplay* at vigra?
a171 2
# SCSI bus layer.  SCSI devices attach to the SCSI bus, which attaches
# to the underlying hardware controller.
d173 2
a174 14
scsibus* at isp?

# These entries find devices on all SCSI busses and assign
# unit numers dynamically.
sd*	at scsibus? target ? lun ?		# SCSI disks
st*	at scsibus? target ? lun ?		# SCSI tapes
cd*	at scsibus? target ? lun ?		# SCSI CD-ROMs
ch*	at scsibus? target ? lun ?		# SCSI changer devices
ss*	at scsibus? target ? lun ?		# SCSI scanners
uk*	at scsibus? target ? lun ?		# unknown SCSI devices

# Floppy controller and drive found on SPARCstations.
fdc0	at mainbus0				# sun4c controller
fd*	at fdc0					# the drive itself
d176 18
a193 1
#pseudo-device	strip	1	# radio clock
@


1.31.4.2
log
@sync
@
text
@d10 2
d59 1
a59 1
magma*	at sbus?					# magma serial cards
d64 1
a64 1
spif*	at sbus?					# spif serial cards
d68 1
a68 1
bpp*	at sbus?					# parallel port 
d71 1
a71 1
xbox*	at sbus?					# SBus Expansion box
d87 2
a88 2
dma0	at sbus0					# on-board SCSI
esp0	at sbus0 flags 0xff0f				# sun4c
d91 2
a92 2
dma*	at sbus?					# SBus SCSI
esp*	at sbus? flags 0xff0f				# two flavours
d96 1
a96 1
isp*	at sbus?
d99 8
a106 2
le0	at sbus0					# sun4c on-board
le*	at sbus?
d109 1
a109 1
qec*	at sbus?
d115 2
a116 2
bwtwo0	at sbus0					# sun4c on-board
bwtwo*	at sbus?					# sun4c and sun4m
d120 1
a120 1
cgthree* at sbus?
d124 2
a125 2
cgsix0	at sbus?
cgsix*	at sbus?
d129 1
a129 1
cgtwelve*	at sbus?
d133 1
a133 1
vigra*	at sbus?
a134 12

# Parallax XVideo and PowerVideo
tvtwo* at sbus?
wsdisplay* at tvtwo?

# Fujitsu AG-10e framebuffer.
agten* at sbus?
wsdisplay* at agten?

# Southland Media Systems MGX/MGXPlus framebuffer.
mgx* at sbus?
wsdisplay* at mgx?
@


1.30
log
@kill COMPAT_{09,10,11} kernel options.  We still need kern_info_09.c and kern_ipc_10.c for other compat modules.
@
text
@d1 1
a1 1
# 	$OpenBSD: SUN4C,v 1.29 2001/05/10 10:34:41 art Exp $
a18 2

option		UVM		# use the UVM virtual memory system ; required
@


1.29
log
@UVM is no longer optional on sparc.
@
text
@d1 1
a1 1
# 	$OpenBSD: SUN4C,v 1.28 1999/10/29 14:14:28 art Exp $
a18 1
option		COMPAT_09, COMPAT_10
@


1.28
log
@Use UVM by default on sparc.
@
text
@d1 1
a1 1
# 	$OpenBSD: SUN4C,v 1.27 1999/04/18 03:24:22 jason Exp $
d21 1
a21 1
option		UVM		# use the UVM virtual memory system
@


1.28.2.1
log
@Merge in -current from two days ago in the SMP branch.
As usual with merges, they do not indicate progress, so do not hold
your breath for working SMP, and do not mail me and ask about the
state of it.  It has not changed.  There is work ongoing, but very, very
slowly.  The commit is done in parts as to not lock up the tree in too
big chunks at a time.
@
text
@d1 1
a1 1
# 	$OpenBSD: SUN4C,v 1.28 1999/10/29 14:14:28 art Exp $
d19 3
@


1.28.2.2
log
@Sync the SMP branch with 3.3
@
text
@d1 2
a2 2
#	$OpenBSD$
# 	$NetBSD: GENERIC,v 1.48 1997/08/23 19:19:01 mjacob Exp $
a3 1
# Machine architecture; required by config(8)
d5 40
d46 1
a46 8
include "../../../conf/GENERIC"


option		SUN4C		# sun4c - SS1, 1+, 2, ELC, SLC, IPC, IPX, etc.

#option		KGDB		# support for kernel gdb
#option		KGDBDEV=0xc01	# kgdb device number (dev_t)
#option		KGDBRATE=38400	# baud rate
d49 2
a50 2
option		COMPAT_SUNOS	# compatibility with SunOS binaries
option		COMPAT_SVR4	# compatibility with SVR4 binaries
d52 1
a52 1
maxusers	18		# estimated number of users
a53 1
# Generic swap; second partition of root disk or network.
a55 1
# Main bus and CPU .. all systems.
d59 4
a62 2
# Bus types found on SPARC systems.
sbus0	at mainbus0				# sun4c
d64 1
a64 1
audioamd0 at mainbus0				# sun4c
d67 1
a67 1
auxreg0	at mainbus0				# sun4c
d69 19
a87 18
# Mostek clock found on 4/300, sun4c, and sun4m systems.
# The Mostek clock NVRAM is the "eeprom" on sun4/300 systems.
clock0	at mainbus0				# sun4c

# Memory error registers.
memreg0	at mainbus0				# sun4c

# Timer chip found on 4/300, sun4c, and sun4m systems.
timer0	at mainbus0				# sun4c

# Zilog 8530 serial chips.  Each has two-channels.
# zs0 is ttya and ttyb.  zs1 is the keyboard and mouse.
zs0	at mainbus0					# sun4c
zs1	at mainbus0					# sun4c

zstty* at zs? channel ?
zskbd* at zs? channel ?
wskbd* at zskbd? console ?
a98 2
bpp*	at sbus? slot ? offset ?			# parallel port 

d103 13
a115 20
#
# Note the flags on the esp entries below, that work around
# deficiencies in the current driver:
#	bits 0-7:  disable disconnect/reselect for the corresponding target
#	bits 8-15: disable synch negotiation for target [bit-8]
#	Note: targets 4-7 have disconnect/reselect enabled on the premise
#	      that tape devices normally have one of these targets. Tape
#	      devices should be allowed to disconnect for the SCSI bus
#	      to operate acceptably.
#

# sun4c or sun4m SCSI - an NCR53c94 or equivalent behind
# specialized DMA glue
dma0	at sbus0 slot ? offset ?			# on-board SCSI
esp0	at sbus0 slot ? offset ? flags 0xff0f		# sun4c

# FSBE/S SCSI - an NCR53c94 or equivalent behind
dma*	at sbus? slot ? offset ?			# SBus SCSI
esp*	at sbus? slot ? offset ? flags 0xff0f		# two flavours
esp*	at dma? flags 0xff0f				# depending on model
d117 4
a120 2
#sun4c, sun4m
isp*	at sbus? slot ? offset ?
d122 5
a126 3
# sun4/300 and sun4c Ethernet - an AMD 7990 LANCE
le0	at sbus0 slot ? offset ?			# sun4c on-board
le*	at sbus? slot ? offset ?
d133 28
a160 7
# Sun "bwtwo" black and white framebuffer, found on sun4, sun4c, and sun4m
# systems.
bwtwo0	at sbus0 slot ? offset ?		# sun4c on-board
bwtwo*	at sbus? slot ? offset ?		# sun4c and sun4m
wsdisplay* at bwtwo?

# Sun "cgthree" Sbus color framebuffer.
d162 2
a163 1
wsdisplay* at cgthree?
d165 6
a170 20
# Sun "cgsix" accelerated color framebuffer.
cgsix0	at sbus? slot ? offset ?
cgsix*	at sbus? slot ? offset ?
wsdisplay* at cgsix?

# Sun "cgtwelve" (GS) accelerated 24-bit framebuffer.
cgtwelve*	at sbus? slot ? offset ? flags 0x0000
wsdisplay* at cgtwelve?

# Vigra VS10 or VS12 framebuffer.
vigra*	at sbus? slot ? offset ?
wsdisplay* at vigra?

# Parallax XVideo and PowerVideo
tvtwo* at sbus? slot ? offset ?
wsdisplay* at tvtwo?

# Fujitsu AG-10e framebuffer.
agten* at sbus? slot ? offset ?
wsdisplay* at agten?
a171 2
# SCSI bus layer.  SCSI devices attach to the SCSI bus, which attaches
# to the underlying hardware controller.
d173 2
a174 14
scsibus* at isp?

# These entries find devices on all SCSI busses and assign
# unit numers dynamically.
sd*	at scsibus? target ? lun ?		# SCSI disks
st*	at scsibus? target ? lun ?		# SCSI tapes
cd*	at scsibus? target ? lun ?		# SCSI CD-ROMs
ch*	at scsibus? target ? lun ?		# SCSI changer devices
ss*	at scsibus? target ? lun ?		# SCSI scanners
uk*	at scsibus? target ? lun ?		# unknown SCSI devices

# Floppy controller and drive found on SPARCstations.
fdc0	at mainbus0				# sun4c controller
fd*	at fdc0					# the drive itself
d176 18
a193 1
#pseudo-device	strip	1	# radio clock
@


1.28.2.3
log
@merge the trunk so we will get the genfs and locking fixes
@
text
@d57 1
a57 1
magma*	at sbus?					# magma serial cards
d62 1
a62 1
spif*	at sbus?					# spif serial cards
d66 1
a66 1
bpp*	at sbus?					# parallel port 
d69 1
a69 1
xbox*	at sbus?					# SBus Expansion box
d85 2
a86 2
dma0	at sbus0					# on-board SCSI
esp0	at sbus0 flags 0xff0f				# sun4c
d89 2
a90 2
dma*	at sbus?					# SBus SCSI
esp*	at sbus? flags 0xff0f				# two flavours
d94 1
a94 1
isp*	at sbus?
d97 2
a98 2
le0	at sbus0					# sun4c on-board
le*	at sbus?
d101 1
a101 1
qec*	at sbus?
d107 2
a108 2
bwtwo0	at sbus0					# sun4c on-board
bwtwo*	at sbus?					# sun4c and sun4m
d112 1
a112 1
cgthree* at sbus?
d116 2
a117 2
cgsix0	at sbus?
cgsix*	at sbus?
d121 1
a121 1
cgtwelve*	at sbus?
d125 1
a125 1
vigra*	at sbus?
d129 1
a129 1
tvtwo* at sbus?
d133 1
a133 1
agten* at sbus?
a134 4

# Southland Media Systems MGX/MGXPlus framebuffer.
mgx* at sbus?
wsdisplay* at mgx?
@


1.28.2.4
log
@Merge of current from two weeks agointo the SMP branch
@
text
@a139 19
# Sun PCMCIA bridge
stp*	at sbus?
pcmcia*	at stp? socket ?

# PCMCIA devices
wi*	at pcmcia? function ?			# WaveLAN IEEE 802.11DS
#an*	at pcmcia? function ?			# Aironet IEEE 802.11DS
ne*	at pcmcia? function ?			# NE2000-compat ethernet
ep*	at pcmcia? function ?			# PCMCIA based 3C5xx ethernet
#com*	at pcmcia? function ?			# PCMCIA modems/serial ports

# Media Independent Interface (mii) drivers (required by ne and ep)
bmtphy*	at mii? phy ?				# Broadcom 10/100 PHYs
lxtphy*	at mii? phy ?				# Level1 LXT970 PHYs
nsphy* at mii? phy ?				# NS and compatible PHYs
nsphyter* at mii? phy ?
tqphy* at mii? phy ?				# TDK 78Q212x PHYs
ukphy*	at mii? phy ?

@


1.28.2.5
log
@Merge with the trunk
@
text
@a94 1
options ISP_COMPILE_1000_FW=1
a138 4

# Vitec/Connectware/AP&D RasterFlex framebuffer series.
rfx* at sbus?
wsdisplay* at rfx?
@


1.27
log
@Support for the Sun SBus Expansion Subsystem (SUNW,xbox)
@
text
@d1 1
a1 1
# 	$OpenBSD: SUN4C,v 1.26 1999/02/01 00:31:57 jason Exp $
a12 1
option		SWAPPAGER, DEVPAGER	# paging
d20 2
@


1.26
log
@add support for spif & magma
@
text
@d1 1
a1 1
# 	$OpenBSD: SUN4C,v 1.25 1998/10/19 05:43:30 jason Exp $
d101 4
d131 1
a131 1
qec*	at sbus0 slot ? offset ?
@


1.25
log
@qec+qe support & OpenBSD tags for everyone
@
text
@d1 1
a1 1
# 	$OpenBSD$
d90 10
@


1.24
log
@Attempt to make clear the dependence of hme->phys and phys->hme
@
text
@d1 1
d115 5
@


1.23
log
@Modified to use mii layer for hme
@
text
@d111 1
a111 2

# Media Independent Interface (mii) drivers
@


1.22
log
@Add build support for hme
@
text
@d112 4
@


1.21
log
@Updated sparc audio
@
text
@d109 3
@


1.20
log
@Backout HZ comments I added, which are not appropriate for inclusion in
kernel config files.
@
text
@d66 2
@


1.19
log
@Corrected comments for machines with oclock0...
@
text
@a67 14
# The system clock (and stat clock) may be set higher than 100 Hz
# On sun4c and sun4m systems.  This is useful if you have a speedy
# machine and need high accuracy timing for real-time oriented applications.
# Note: running the system clock at a higher rate will cause the kernel
#       to use proportionally CPU time handling clock interrupts, 
#       and if set to ridiculously high values may cause problems.
#
# Note: 4/100 and 4/200 systems will only run the clocks at 100 Hz, 
#       other values are ignored.
#
# On sparc, 1000000 modulo HZ must == 0.  If not, a warning is printed 
#       at boot time, and HZ is reset to 100.
#option          HZ=1000

@


1.18
log
@Added comments about changing HZ to custom values on sparc.  Only supported
for sun4c and sun4m machines.  sun4 will only run at the default HZ=100.
Added commented out option for HZ=1000 along with info for GENERIC, SUN4C,
and SUN4M configs.  Added note to SUN4 config warning that HZ is ignored.
@
text
@d75 2
a76 2
# Note: sun4 system will only run the clocks at 100 Hz, other values
#       are ignored.  
@


1.17
log
@NULLFS is required by UMAPFS, don't know when this got messed up, perhaps
its a gcc 2.8 related thing.
@
text
@d67 15
@


1.16
log
@Backout of cpu init changes, breaks on sun4m currently..
@
text
@d31 1
@


1.15
log
@updated to reflect cpu initialization
@
text
@d57 1
@


1.14
log
@NETBSD_CURRENT_970916.  Lot's just ID changes, since changes don't apply to
us.  Includes some pmap changes, for which I don't have the original commit
message(s) handy.
@
text
@a56 1
cpu0	at mainbus0
@


1.13
log
@let's at least list all scsi devices, ok?
@
text
@d64 1
a64 1
audio0	at mainbus0
@


1.12
log
@Add appropiate `maxusers' everywhere it was lacking.
@
text
@d151 3
@


1.11
log
@lfs dies
@
text
@d52 2
@


1.10
log
@do not fool people into thinking VNODEPAGER is an option; netbsd pr#2757, erik@@aarhus1.uni-c.dk
@
text
@a31 1
option		LFS		# Log-based filesystem (still experimental)
@


1.9
log
@disable TCP_COMPAT_42
@
text
@d12 1
a12 1
option		SWAPPAGER, VNODEPAGER, DEVPAGER	# paging
@


1.8
log
@s/options/option/
@
text
@d40 1
a40 1
option		TCP_COMPAT_42	# compatibility with 4.2BSD TCP/IP
@


1.7
log
@add # declaration for vme cgnine card
@
text
@d4 3
a6 3
options		SUN4C
#options	MMU_3L
#options	DDB,DEBUG,DIAGNOSTIC
d9 1
a9 1
options		TIMEZONE=0, DST=0
d12 8
a19 8
options		SWAPPAGER, VNODEPAGER, DEVPAGER	# paging
#options	DEBUG, DIAGNOSTIC	# extra kernel debugging
options		KTRACE			# system call tracing support
#options	KGDB			# support for kernel gdb
#options	KGDBDEV=0xc01, KGDBRATE=38400	# device & baud rate
options		RASTERCONSOLE		# fast rasterop console
options		SYSVMSG,SYSVSEM,SYSVSHM
options		COMPAT_09, COMPAT_10
d22 15
a36 15
options		FFS
options		NFSSERVER	# Sun NFS-compatible filesystem
options		NFSCLIENT	# Sun NFS-compatible filesystem
options		KERNFS		# kernel data-structure filesystem
options		FIFO		# POSIX fifo support (in all filesystems)
options		QUOTA		# fast filesystem with user and group quotas
options		MFS		# memory-based filesystem
options		LOFS		# Loop-back filesystem
options		FDESC		# user file descriptor filesystem
options		UMAPFS		# uid/gid remapping filesystem
options		LFS		# Log-based filesystem (still experimental)
options		PORTAL		# portal filesystem (still experimental)
options		PROCFS		# /proc
options		CD9660		# ISO 9660 + Rock Ridge file system
options		UNION		# union file system
d39 7
a45 7
options		INET
options		TCP_COMPAT_42	# compatibility with 4.2BSD TCP/IP
#options	GATEWAY		# IP packet forwarding
#options	ISO		# OSI networking
#options	TPIP
#options	EON
options		COMPAT_43
d47 1
a47 1
options		LKM
d50 2
a51 2
options		COMPAT_SUNOS		# compatibility with SunOS binaries
options		COMPAT_SVR4		# compatibility with SVR4 binaries
@


1.6
log
@add si1
@
text
@d130 1
@


1.5
log
@no obio/vme on sun4c
@
text
@d122 1
@


1.4
log
@+ bwtwo0 at pfour0
@
text
@d59 3
a61 3
obio0	at mainbus0
vmes0	at mainbus0
vmel0	at mainbus0
@


1.3
log
@kernel name is /bsd
@
text
@d136 1
@


1.2
log
@updated but not completely tested
@
text
@d53 1
a53 1
config		netbsd	swap generic
@


1.1
log
@Initial revision
@
text
@d1 1
a1 3
#	$NetBSD: SUN4C,v 1.3 1995/06/02 17:53:59 pk Exp $

# Kernel for Theo's wimpy sparcstation IPC
d4 3
a6 1
options		"SUN4C"
d17 1
a17 1
options		RCONSOLE		# fast rasterop console
d19 1
a19 1
options		"COMPAT_09", "COMPAT_10"
d26 11
a36 8
#options	FIFO		# POSIX fifo support (in all filesystems)
#options	QUOTA		# fast filesystem with user and group quotas
#options	MFS		# memory-based filesystem
#options	LOFS		# Loop-back filesystem
#options	FDESC		# user file descriptor filesystem
#options	UMAPFS		# uid/gid remapping filesystem
#options	LFS		# Log-based filesystem (still experimental)
#options	PORTAL		# portal filesystem (still experimental)
d51 1
d53 1
a53 1
config		netbsd	root on sd0 swap on sd0
d59 3
d66 3
d70 2
d73 3
d78 2
d81 3
d86 4
a89 4
espdma0	at sbus0 slot ? offset ?
espdma*	at sbus0 slot ? offset ?
esp0	at espdma? slot ? offset ?
esp*	at espdma? slot ? offset ?
d94 1
d97 1
d102 21
d126 3
d134 6
d141 2
d147 3
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@

