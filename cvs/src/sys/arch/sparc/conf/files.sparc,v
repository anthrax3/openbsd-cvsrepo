head	1.103;
access;
symbols
	OPENBSD_6_0:1.103.0.4
	OPENBSD_6_0_BASE:1.103
	OPENBSD_5_9:1.103.0.2
	OPENBSD_5_9_BASE:1.103
	OPENBSD_5_8:1.102.0.4
	OPENBSD_5_8_BASE:1.102
	OPENBSD_5_7:1.98.0.2
	OPENBSD_5_7_BASE:1.98
	OPENBSD_5_6:1.95.0.4
	OPENBSD_5_6_BASE:1.95
	OPENBSD_5_5:1.94.0.4
	OPENBSD_5_5_BASE:1.94
	OPENBSD_5_4:1.93.0.2
	OPENBSD_5_4_BASE:1.93
	OPENBSD_5_3:1.91.0.6
	OPENBSD_5_3_BASE:1.91
	OPENBSD_5_2:1.91.0.4
	OPENBSD_5_2_BASE:1.91
	OPENBSD_5_1_BASE:1.91
	OPENBSD_5_1:1.91.0.2
	OPENBSD_5_0:1.89.0.2
	OPENBSD_5_0_BASE:1.89
	OPENBSD_4_9:1.88.0.2
	OPENBSD_4_9_BASE:1.88
	OPENBSD_4_8:1.87.0.2
	OPENBSD_4_8_BASE:1.87
	OPENBSD_4_7:1.85.0.2
	OPENBSD_4_7_BASE:1.85
	OPENBSD_4_6:1.83.0.4
	OPENBSD_4_6_BASE:1.83
	OPENBSD_4_5:1.81.0.4
	OPENBSD_4_5_BASE:1.81
	OPENBSD_4_4:1.81.0.2
	OPENBSD_4_4_BASE:1.81
	OPENBSD_4_3:1.80.0.4
	OPENBSD_4_3_BASE:1.80
	OPENBSD_4_2:1.78.0.2
	OPENBSD_4_2_BASE:1.78
	OPENBSD_4_1:1.77.0.2
	OPENBSD_4_1_BASE:1.77
	OPENBSD_4_0:1.71.0.4
	OPENBSD_4_0_BASE:1.71
	OPENBSD_3_9:1.71.0.2
	OPENBSD_3_9_BASE:1.71
	OPENBSD_3_8:1.70.0.2
	OPENBSD_3_8_BASE:1.70
	OPENBSD_3_7:1.63.0.2
	OPENBSD_3_7_BASE:1.63
	OPENBSD_3_6:1.59.0.4
	OPENBSD_3_6_BASE:1.59
	SMP_SYNC_A:1.59
	SMP_SYNC_B:1.59
	OPENBSD_3_5:1.59.0.2
	OPENBSD_3_5_BASE:1.59
	OPENBSD_3_4:1.58.0.2
	OPENBSD_3_4_BASE:1.58
	UBC_SYNC_A:1.54
	OPENBSD_3_3:1.50.0.2
	OPENBSD_3_3_BASE:1.50
	OPENBSD_3_2:1.45.0.2
	OPENBSD_3_2_BASE:1.45
	OPENBSD_3_1:1.41.0.2
	OPENBSD_3_1_BASE:1.41
	UBC_SYNC_B:1.45
	UBC:1.40.0.4
	UBC_BASE:1.40
	OPENBSD_3_0:1.40.0.2
	OPENBSD_3_0_BASE:1.40
	OPENBSD_2_9_BASE:1.38
	OPENBSD_2_9:1.38.0.2
	OPENBSD_2_8:1.37.0.2
	OPENBSD_2_8_BASE:1.37
	OPENBSD_2_7:1.35.0.4
	OPENBSD_2_7_BASE:1.35
	SMP:1.35.0.2
	SMP_BASE:1.35
	kame_19991208:1.35
	OPENBSD_2_6:1.34.0.2
	OPENBSD_2_6_BASE:1.34
	OPENBSD_2_5:1.28.0.2
	OPENBSD_2_5_BASE:1.28
	OPENBSD_2_4:1.24.0.2
	OPENBSD_2_4_BASE:1.24
	OPENBSD_2_3:1.15.0.2
	OPENBSD_2_3_BASE:1.15
	OPENBSD_2_2:1.14.0.2
	OPENBSD_2_2_BASE:1.14
	OPENBSD_2_1:1.10.0.2
	OPENBSD_2_1_BASE:1.10
	OPENBSD_2_0:1.9.0.2
	OPENBSD_2_0_BASE:1.9
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.103
date	2015.12.16.18.56.21;	author mmcc;	state Exp;
branches;
next	1.102;
commitid	0TIQwwHh8baMWjuL;

1.102
date	2015.07.17.22.52.29;	author tedu;	state Exp;
branches;
next	1.101;
commitid	OOrGfFHYAn65M2qc;

1.101
date	2015.06.19.11.12.24;	author jmatthew;	state Exp;
branches;
next	1.100;
commitid	I5HMIEQiHPSVn0jd;

1.100
date	2015.05.11.06.46.21;	author ratchov;	state Exp;
branches;
next	1.99;
commitid	RaOGL5SyOGOZylwx;

1.99
date	2015.03.30.20.30.20;	author miod;	state Exp;
branches;
next	1.98;
commitid	f66FukLLgPJs9j5H;

1.98
date	2015.02.28.17.54.54;	author miod;	state Exp;
branches;
next	1.97;
commitid	ODmF3EmhsYjCRUYN;

1.97
date	2014.11.22.22.48.38;	author miod;	state Exp;
branches;
next	1.96;
commitid	lw1qpLaP6fJz4gKy;

1.96
date	2014.10.12.19.21.41;	author miod;	state Exp;
branches;
next	1.95;
commitid	JlsX9mo17Jmvs6g0;

1.95
date	2014.05.30.13.59.20;	author kettenis;	state Exp;
branches;
next	1.94;

1.94
date	2013.09.24.20.10.49;	author miod;	state Exp;
branches;
next	1.93;

1.93
date	2013.06.04.21.05.54;	author miod;	state Exp;
branches;
next	1.92;

1.92
date	2013.04.21.14.44.16;	author sebastia;	state Exp;
branches;
next	1.91;

1.91
date	2011.09.04.08.03.32;	author miod;	state Exp;
branches;
next	1.90;

1.90
date	2011.09.03.20.04.00;	author miod;	state Exp;
branches;
next	1.89;

1.89
date	2011.07.04.22.53.53;	author tedu;	state Exp;
branches;
next	1.88;

1.88
date	2010.12.06.20.10.18;	author jasper;	state Exp;
branches;
next	1.87;

1.87
date	2010.07.24.00.26.50;	author jakemsr;	state Exp;
branches;
next	1.86;

1.86
date	2010.07.02.19.57.15;	author tedu;	state Exp;
branches;
next	1.85;

1.85
date	2009.08.29.21.30.48;	author kettenis;	state Exp;
branches;
next	1.84;

1.84
date	2009.07.13.19.53.58;	author kettenis;	state Exp;
branches;
next	1.83;

1.83
date	2009.05.20.18.22.33;	author miod;	state Exp;
branches;
next	1.82;

1.82
date	2009.04.15.06.54.44;	author oga;	state Exp;
branches;
next	1.81;

1.81
date	2008.04.25.14.51.35;	author jmc;	state Exp;
branches;
next	1.80;

1.80
date	2007.11.25.18.25.29;	author deraadt;	state Exp;
branches;
next	1.79;

1.79
date	2007.10.10.15.53.52;	author art;	state Exp;
branches;
next	1.78;

1.78
date	2007.05.29.09.54.03;	author sobrado;	state Exp;
branches;
next	1.77;

1.77
date	2007.02.03.20.08.50;	author miod;	state Exp;
branches;
next	1.76;

1.76
date	2006.12.27.18.55.05;	author miod;	state Exp;
branches;
next	1.75;

1.75
date	2006.12.09.20.06.46;	author miod;	state Exp;
branches;
next	1.74;

1.74
date	2006.12.03.22.13.04;	author miod;	state Exp;
branches;
next	1.73;

1.73
date	2006.12.03.16.38.10;	author miod;	state Exp;
branches;
next	1.72;

1.72
date	2006.12.02.11.00.35;	author miod;	state Exp;
branches;
next	1.71;

1.71
date	2006.02.12.12.02.26;	author miod;	state Exp;
branches;
next	1.70;

1.70
date	2005.07.17.12.21.25;	author miod;	state Exp;
branches;
next	1.69;

1.69
date	2005.07.14.02.09.46;	author uwe;	state Exp;
branches;
next	1.68;

1.68
date	2005.07.08.12.36.36;	author miod;	state Exp;
branches;
next	1.67;

1.67
date	2005.05.03.00.39.39;	author brad;	state Exp;
branches;
next	1.66;

1.66
date	2005.05.01.21.36.57;	author brad;	state Exp;
branches;
next	1.65;

1.65
date	2005.04.19.22.52.35;	author miod;	state Exp;
branches;
next	1.64;

1.64
date	2005.04.19.21.30.18;	author miod;	state Exp;
branches;
next	1.63;

1.63
date	2005.03.08.20.00.24;	author tdeval;	state Exp;
branches;
next	1.62;

1.62
date	2005.03.03.09.45.20;	author miod;	state Exp;
branches;
next	1.61;

1.61
date	2004.10.08.13.04.36;	author grange;	state Exp;
branches;
next	1.60;

1.60
date	2004.09.16.09.14.04;	author mickey;	state Exp;
branches;
next	1.59;

1.59
date	2004.02.29.21.44.12;	author miod;	state Exp;
branches;
next	1.58;

1.58
date	2003.06.28.18.12.31;	author jason;	state Exp;
branches;
next	1.57;

1.57
date	2003.06.23.09.30.36;	author miod;	state Exp;
branches;
next	1.56;

1.56
date	2003.06.18.17.40.31;	author miod;	state Exp;
branches;
next	1.55;

1.55
date	2003.06.17.21.21.31;	author miod;	state Exp;
branches;
next	1.54;

1.54
date	2003.05.15.04.13.14;	author miod;	state Exp;
branches;
next	1.53;

1.53
date	2003.05.14.06.39.49;	author miod;	state Exp;
branches;
next	1.52;

1.52
date	2003.05.13.17.24.10;	author miod;	state Exp;
branches;
next	1.51;

1.51
date	2003.04.13.22.55.48;	author miod;	state Exp;
branches;
next	1.50;

1.50
date	2003.03.09.02.30.45;	author miod;	state Exp;
branches;
next	1.49;

1.49
date	2003.03.08.00.43.17;	author miod;	state Exp;
branches;
next	1.48;

1.48
date	2003.03.06.21.48.25;	author miod;	state Exp;
branches;
next	1.47;

1.47
date	2003.03.05.14.34.39;	author miod;	state Exp;
branches;
next	1.46;

1.46
date	2003.01.14.19.56.32;	author jason;	state Exp;
branches;
next	1.45;

1.45
date	2002.09.20.11.17.55;	author fgsch;	state Exp;
branches;
next	1.44;

1.44
date	2002.08.31.10.47.18;	author miod;	state Exp;
branches;
next	1.43;

1.43
date	2002.08.12.10.44.03;	author miod;	state Exp;
branches;
next	1.42;

1.42
date	2002.07.09.15.27.59;	author jason;	state Exp;
branches;
next	1.41;

1.41
date	2002.03.23.14.14.25;	author deraadt;	state Exp;
branches;
next	1.40;

1.40
date	2001.05.11.07.13.16;	author deraadt;	state Exp;
branches
	1.40.4.1;
next	1.39;

1.39
date	2001.05.11.06.41.48;	author deraadt;	state Exp;
branches;
next	1.38;

1.38
date	2000.11.16.15.47.56;	author jason;	state Exp;
branches;
next	1.37;

1.37
date	2000.06.28.20.20.14;	author mjacob;	state Exp;
branches
	1.37.2.1;
next	1.36;

1.36
date	2000.06.12.06.10.45;	author fgsch;	state Exp;
branches;
next	1.35;

1.35
date	99.11.08.15.36.10;	author mickey;	state Exp;
branches
	1.35.2.1
	1.35.4.1;
next	1.34;

1.34
date	99.09.07.02.58.49;	author jason;	state Exp;
branches;
next	1.33;

1.33
date	99.09.06.03.46.16;	author jason;	state Exp;
branches;
next	1.32;

1.32
date	99.08.17.22.47.15;	author mickey;	state Exp;
branches;
next	1.31;

1.31
date	99.07.23.19.11.23;	author jason;	state Exp;
branches;
next	1.30;

1.30
date	99.06.06.04.48.24;	author jason;	state Exp;
branches;
next	1.29;

1.29
date	99.04.18.03.24.23;	author jason;	state Exp;
branches;
next	1.28;

1.28
date	99.03.17.05.34.14;	author mjacob;	state Exp;
branches;
next	1.27;

1.27
date	99.03.01.04.56.03;	author jason;	state Exp;
branches;
next	1.26;

1.26
date	99.02.01.13.09.51;	author jason;	state Exp;
branches;
next	1.25;

1.25
date	98.12.29.09.33.35;	author deraadt;	state Exp;
branches;
next	1.24;

1.24
date	98.10.19.05.43.30;	author jason;	state Exp;
branches;
next	1.23;

1.23
date	98.09.28.01.23.38;	author mickey;	state Exp;
branches;
next	1.22;

1.22
date	98.09.10.17.34.31;	author jason;	state Exp;
branches;
next	1.21;

1.21
date	98.09.01.17.36.58;	author jason;	state Exp;
branches;
next	1.20;

1.20
date	98.08.26.05.00.49;	author jason;	state Exp;
branches;
next	1.19;

1.19
date	98.07.17.21.33.05;	author jason;	state Exp;
branches;
next	1.18;

1.18
date	98.07.10.19.20.11;	author jason;	state Exp;
branches;
next	1.17;

1.17
date	98.07.04.01.27.53;	author deraadt;	state Exp;
branches;
next	1.16;

1.16
date	98.05.20.19.29.15;	author deraadt;	state Exp;
branches;
next	1.15;

1.15
date	98.03.25.07.54.53;	author jason;	state Exp;
branches;
next	1.14;

1.14
date	97.09.17.06.47.05;	author downsj;	state Exp;
branches;
next	1.13;

1.13
date	97.08.25.08.38.43;	author downsj;	state Exp;
branches;
next	1.12;

1.12
date	97.08.08.08.24.35;	author downsj;	state Exp;
branches;
next	1.11;

1.11
date	97.07.01.21.32.45;	author grr;	state Exp;
branches;
next	1.10;

1.10
date	97.05.14.00.12.14;	author deraadt;	state Exp;
branches;
next	1.9;

1.9
date	96.09.12.19.01.57;	author deraadt;	state Exp;
branches;
next	1.8;

1.8
date	96.08.11.05.34.04;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	96.06.21.15.39.44;	author chuck;	state Exp;
branches;
next	1.6;

1.6
date	96.01.04.01.31.41;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	95.12.18.17.03.57;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	95.10.24.07.26.57;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	95.10.23.16.19.57;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	95.10.19.13.29.05;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.51.37;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.51.37;	author deraadt;	state Exp;
branches;
next	;

1.35.2.1
date	2001.05.14.21.37.02;	author niklas;	state Exp;
branches;
next	1.35.2.2;

1.35.2.2
date	2001.07.04.10.23.19;	author niklas;	state Exp;
branches;
next	1.35.2.3;

1.35.2.3
date	2003.03.27.23.49.25;	author niklas;	state Exp;
branches;
next	1.35.2.4;

1.35.2.4
date	2003.05.13.19.41.08;	author ho;	state Exp;
branches;
next	1.35.2.5;

1.35.2.5
date	2003.05.16.00.29.40;	author niklas;	state Exp;
branches;
next	1.35.2.6;

1.35.2.6
date	2004.02.19.10.49.57;	author niklas;	state Exp;
branches;
next	1.35.2.7;

1.35.2.7
date	2004.06.05.23.10.57;	author niklas;	state Exp;
branches;
next	;

1.35.4.1
date	2000.11.17.18.52.05;	author jason;	state Exp;
branches;
next	;

1.37.2.1
date	2000.11.17.20.20.09;	author jason;	state Exp;
branches;
next	;

1.40.4.1
date	2002.06.11.03.38.15;	author art;	state Exp;
branches;
next	1.40.4.2;

1.40.4.2
date	2002.10.29.00.28.09;	author art;	state Exp;
branches;
next	1.40.4.3;

1.40.4.3
date	2003.05.19.21.46.32;	author tedu;	state Exp;
branches;
next	;


desc
@@


1.103
log
@Remove the solbourne entries now that all its code is gone.

ok deraadt@@
@
text
@#	$OpenBSD: files.sparc,v 1.102 2015/07/17 22:52:29 tedu Exp $
#	$NetBSD: files.sparc,v 1.44 1997/08/31 21:29:16 pk Exp $

# @@(#)files.sparc	8.1 (Berkeley) 7/19/93
# sparc-specific configuration info

# maxpartitions must be first item in files.${ARCH}.newconf
maxpartitions 16

maxusers 2 8 64

device	mainbus {}
attach	mainbus at root

device	obio {[addr = -1], [level = -1]}
attach	obio at mainbus

device	iommu {}
attach	iommu at mainbus
file	arch/sparc/sparc/iommu.c		iommu

device	vme {}
attach	vme at iommu

device	vmel {[addr = -1], [level = -1], [vect = -1]}
attach	vmel at mainbus, vme
device	vmes {[addr = -1], [level = -1], [vect = -1]}
attach	vmes at mainbus, vme
file	arch/sparc/dev/obio.c		obio | vmel | vmes | vme

device	auxreg
attach	auxreg at mainbus, obio
file	arch/sparc/sparc/auxreg.c		auxreg needs-flag

device	clock
attach	clock at mainbus, obio

device	oclock
attach	oclock at obio

device	timer
attach	timer at mainbus, obio

device	eeprom
attach	eeprom at obio
file	arch/sparc/sparc/clock.c

device	power
attach	power at obio
file	arch/sparc/dev/power.c			power needs-flag

device	led
attach	led at mainbus, obio
file	arch/sparc/dev/led.c			led needs-flag

device	cpu
attach	cpu at mainbus
file	arch/sparc/sparc/cpu.c

device	memreg
attach	memreg at mainbus, obio
file	arch/sparc/sparc/memreg.c

device	eccmemctl
attach	eccmemctl at mainbus
file	arch/sparc/sparc/memecc.c		eccmemctl

device	zs {[channel = -1]}
attach	zs at mainbus, obio
file	arch/sparc/dev/zs.c			zs needs-flag
file	dev/ic/z8530sc.c			zs

device	fdc {}
attach	fdc at mainbus, obio
device	fd: disk
attach	fd at fdc
file	arch/sparc/dev/fd.c			fdc | fd needs-flag
file	arch/sparc/sparc/bsd_fdintr.s		fdc

device	xbox {}
device	sbus {[slot = -1], [offset = -1]}
attach	sbus at mainbus, iommu, sbus, xbox
file	arch/sparc/dev/sbus.c			sbus

# Sun specific files
include	"dev/sun/files.sun"

#
# Console (zs) related stuff
#

device	zstty: tty
attach	zstty at zs
file	dev/ic/z8530tty.c			zstty needs-flag
file	arch/sparc/dev/zs_kgdb.c		kgdb

device	zskbd: wskbddev, sunkbd
attach	zskbd at zs
file	arch/sparc/dev/z8530kbd.c		zskbd needs-flag

#
# Media Independent Interface (mii)
#
include	"dev/mii/files.mii"

#
# Machine-independent SCSI drivers
#
include	"scsi/files.scsi"

major	{sd = 7}
major	{vnd = 8}
major	{cd = 18}
major	{rd = 17}

device	dma {}
attach	dma at sbus, obio
device	ledma {}
attach	ledma at sbus
file	arch/sparc/dev/dma.c		dma | ledma
device	lebuffer {}
attach	lebuffer at sbus
file	arch/sparc/dev/lebuffer.c	lebuffer

device	qec {}
attach	qec at sbus
file	arch/sparc/dev/qec.c		qec

device	be: ifnet, ether, ifmedia
attach	be at qec
file	arch/sparc/dev/be.c		be

device	qe: ifnet, ether, ifmedia
attach	qe at qec
file	arch/sparc/dev/qe.c		qe

attach	gem at sbus with gem_sbus
file	arch/sparc/dev/if_gem_sbus.c	gem_sbus

attach	ti at sbus with ti_sbus
file	arch/sparc/dev/if_ti_sbus.c	ti_sbus

# HappyMeal (hme) ethernet
device	hme: ifnet, ether, mii, ifmedia
attach	hme at sbus
file	arch/sparc/dev/hme.c		hme

attach	esp at sbus, dma, obio
file	arch/sparc/dev/esp.c		esp

device	audioamd: audio, am7930
attach	audioamd at mainbus, obio, sbus
file	arch/sparc/dev/audioamd.c	audioamd
file	arch/sparc/sparc/amd7930intr.s	audioamd

device	audiocs: audio
attach	audiocs at sbus
file	arch/sparc/dev/cs4231.c		audiocs

# Framebuffers

file	arch/sparc/dev/fb.c

include	"dev/wscons/files.wscons"
include	"dev/rasops/files.rasops"
include	"dev/wsfont/files.wsfont"

define	bt_dac
file	arch/sparc/dev/bt_subr.c	bt_dac

device	agten: wsemuldisplaydev, rasops8
attach	agten at sbus
file	arch/sparc/dev/agten.c		agten

device	bwtwo: wsemuldisplaydev, rasops1
attach	bwtwo at sbus, obio, vmes, vmel
file	arch/sparc/dev/bwtwo.c		bwtwo

device	cgeight: wsemuldisplaydev, rasops1, bt_dac
attach	cgeight at obio
file	arch/sparc/dev/cgeight.c	cgeight

device	cgfour: wsemuldisplaydev, rasops8, bt_dac
attach	cgfour at obio
file	arch/sparc/dev/cgfour.c		cgfour

device	cgfourteen: wsemuldisplaydev, rasops8
attach	cgfourteen at obio
file	arch/sparc/dev/cgfourteen.c	cgfourteen

device	cgsix: wsemuldisplaydev, rasops8, bt_dac
attach	cgsix at sbus, obio
file	arch/sparc/dev/cgsix.c		cgsix

device	cgthree: wsemuldisplaydev, rasops8, bt_dac
attach	cgthree at sbus
file	arch/sparc/dev/cgthree.c	cgthree

device	cgtwelve: wsemuldisplaydev, rasops1
attach	cgtwelve at sbus
file	arch/sparc/dev/cgtwelve.c	cgtwelve

device	cgtwo: wsemuldisplaydev, rasops8
attach	cgtwo at vmes
file	arch/sparc/dev/cgtwo.c		cgtwo

device	mgx: wsemuldisplaydev, rasops8
attach	mgx at sbus
file	arch/sparc/dev/mgx.c		mgx

# Onboard Weitek P9000 found on Tadpole SPARCbook 3, and BT ``Chameleon'' RAMDAC
device	pninek: wsemuldisplaydev, rasops8, bt_dac
attach	pninek at sbus
file	arch/sparc/dev/p9000.c		pninek

device	btcham
attach	btcham at obio
file	arch/sparc/dev/bt445.c		btcham

# Onboard Weitek p9100 found on Tadpole SPARCbook 3GS/3GX/3TX/3XP
device	pnozz: wsemuldisplaydev, rasops8, bt_dac
attach	pnozz at sbus
file	arch/sparc/dev/p9100.c		pnozz

device	rfx: wsemuldisplaydev, rasops8
attach	rfx at sbus
file	arch/sparc/dev/rfx.c		rfx

device	tcx: wsemuldisplaydev, rasops8, bt_dac
attach	tcx at sbus
file	arch/sparc/dev/tcx.c		tcx

device	tvtwo: wsemuldisplaydev, rasops8
attach	tvtwo at sbus
file	arch/sparc/dev/tvtwo.c		tvtwo

device	vigra: wsemuldisplaydev, rasops8
attach	vigra at sbus
file	arch/sparc/dev/vigra.c		vigra

device	zx: wsemuldisplaydev, rasops8
attach	zx at sbus
file	arch/sparc/dev/zx.c		zx

# device definition in sys/conf/files
attach	le at sbus, ledma, lebuffer, obio: le24
file	arch/sparc/dev/if_le.c		le

attach	ie at obio, vmes, vmel
file	arch/sparc/dev/if_ie.c		ie

device	xdc {[drive = -1]}
attach	xdc at vmel
device	xd: disk
attach	xd at xdc
file	arch/sparc/dev/xd.c		xd needs-flag
major	{xd = 10}

device	xyc {[drive = -1]}
attach	xyc at vmes
device	xy: disk
attach	xy at xyc
file	arch/sparc/dev/xy.c		xy needs-flag
major	{xy = 3}

device	si: scsi, ncr5380sbc
attach	si at vmes
device	sw: scsi, ncr5380sbc
attach	sw at obio
file	arch/sparc/dev/si.c		si | sw

attach	qlw at sbus with qlw_sbus
file	arch/sparc/dev/qlw_sbus.c	qlw_sbus

#
# Generic Sparc stuff
#

file	arch/sparc/fpu/fpu.c
file	arch/sparc/fpu/fpu_add.c
file	arch/sparc/fpu/fpu_compare.c
file	arch/sparc/fpu/fpu_div.c
file	arch/sparc/fpu/fpu_explode.c
file	arch/sparc/fpu/fpu_implode.c
file	arch/sparc/fpu/fpu_mul.c
file	arch/sparc/fpu/fpu_sqrt.c
file	arch/sparc/fpu/fpu_subr.c

file	arch/sparc/sparc/autoconf.c
file	arch/sparc/sparc/cache.c
file	arch/sparc/sparc/conf.c
file	arch/sparc/sparc/consinit.c
file	arch/sparc/sparc/disksubr.c
file	arch/sparc/sparc/dvma.c
file	arch/sparc/sparc/emul.c
file	arch/sparc/sparc/in_cksum.c
file	arch/sparc/sparc/intr.c
file	arch/sparc/sparc/kgdb_machdep.c	kgdb
file	arch/sparc/sparc/machdep.c
file	arch/sparc/sparc/mem.c
file	arch/sparc/sparc/mutex.c
file	arch/sparc/sparc/openprom.c
file	arch/sparc/sparc/pmap.c
file	arch/sparc/sparc/process_machdep.c
file	arch/sparc/sparc/sys_machdep.c
file	arch/sparc/sparc/trap.c
file	arch/sparc/sparc/vm_machdep.c

file	arch/sparc/sparc/db_interface.c	ddb | kgdb
file	arch/sparc/sparc/db_trace.c	ddb
file	arch/sparc/sparc/db_disasm.c	ddb

#
# Compatibility modules
#

# Magma Serial/Parallel boards
device	magma {}
attach	magma at sbus
device	mtty
attach	mtty at magma
device	mbpp
attach	mbpp at magma
file	arch/sparc/dev/magma.c		magma | mtty | mbpp needs-flag

device	spif {}
attach	spif at sbus
device	stty
attach	stty at spif
device	sbpp
attach	sbpp at spif
file	arch/sparc/dev/spif.c		spif | stty | sbpp needs-flag

device	bpp {}
attach	bpp at sbus
file	arch/sparc/dev/bpp.c		bpp needs-flag

attach	xbox at sbus
file	arch/sparc/dev/xbox.c		xbox

# sysconfig registers on Force CPU-5V
device	scf {}
attach	scf at mainbus
file	arch/sparc/dev/scf.c		scf needs-flag

# flash memory on Force CPU-5V
device	flash {}
attach	flash at obio
file	arch/sparc/dev/flash.c		flash needs-flag

# VME/SBus bridge on Force CPU-5V
device	fga {}
attach	fga at iommu
device	fvme {[addr = -1], [level = -1], [vect = -1]}
attach	fvme at fga
file	arch/sparc/dev/fga.c		fga needs-flag

device	daadio {}
attach	daadio at fvme
file	arch/sparc/dev/daadio.c		daadio needs-flag

device	tctrl {}
attach	tctrl at obio
file	arch/sparc/dev/tctrl.c		tctrl needs-flag

# Prestoserve NVRAM
device	presto: disk
attach	presto at mainbus, sbus
file	arch/sparc/dev/presto.c		presto needs-flag

# PCMCIA devices

device	tslot: pcmciabus
attach	tslot at sbus
file	arch/sparc/dev/ts102.c		tslot

device	stp: pcmciabus
attach	stp at sbus with stp_sbus
file	dev/sbus/stp4020.c		stp
file	arch/sparc/dev/stp_sbus.c	stp_sbus

include	"dev/pcmcia/files.pcmcia"

# built-in modem on Tadpole SPARCbook
attach	com at obio with com_obio
file	arch/sparc/dev/com_obio.c	com_obio

# machine-dependent libkern component
file	lib/libkern/arch/sparc/saveregs.S

# quad support is necessary for 32 bit architectures
file	lib/libkern/adddi3.c
file	lib/libkern/anddi3.c
file	lib/libkern/ashldi3.c
file	lib/libkern/ashrdi3.c
file	lib/libkern/cmpdi2.c
file	lib/libkern/divdi3.c
file	lib/libkern/iordi3.c
file	lib/libkern/lshldi3.c
file	lib/libkern/lshrdi3.c
file	lib/libkern/moddi3.c
file	lib/libkern/muldi3.c
file	lib/libkern/negdi2.c
file	lib/libkern/notdi2.c
file	lib/libkern/qdivrem.c
file	lib/libkern/subdi3.c
file	lib/libkern/ucmpdi2.c
file	lib/libkern/udivdi3.c
file	lib/libkern/umoddi3.c
file	lib/libkern/xordi3.c

file	lib/libkern/arch/sparc/sdiv.S
file	lib/libkern/arch/sparc/udiv.S
file	lib/libkern/arch/sparc/urem.S
file	lib/libkern/arch/sparc/rem.S
@


1.102
log
@remove obsolete INET kernel option
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.101 2015/06/19 11:12:24 jmatthew Exp $
d29 1
a29 1
file	arch/sparc/dev/obio.c		(obio | vmel | vmes | vme) & !solbourne
d46 1
a46 1
file	arch/sparc/sparc/clock.c		!solbourne
d289 1
a289 1
file	arch/sparc/sparc/autoconf.c		!solbourne
d299 2
a300 2
file	arch/sparc/sparc/machdep.c		!solbourne
file	arch/sparc/sparc/mem.c			!solbourne
d302 2
a303 2
file	arch/sparc/sparc/openprom.c		!solbourne
file	arch/sparc/sparc/pmap.c			!solbourne
d306 1
a306 1
file	arch/sparc/sparc/trap.c			!solbourne
@


1.101
log
@remove isp(4) now that the ql* family have replaced it
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.100 2015/05/11 06:46:21 ratchov Exp $
d296 1
a296 1
file	arch/sparc/sparc/in_cksum.c		inet
@


1.100
log
@Remove all audio format conversion code from the kernel (btw holding
the kernel_lock), as we already do better conversions in
user-mode. Yet, no need for every single driver to fiddle with the
conversion code as they are done transparently by common MI code. With
help from armani and miod, support from mpi

ok armani@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.99 2015/03/30 20:30:20 miod Exp $
a270 5

# Qlogic ISP 10x0 (SBus) family
# device declaration in sys/conf/files
attach	isp at sbus with isp_sbus
file	arch/sparc/dev/isp_sbus.c	isp_sbus
@


1.99
log
@Add a bus_dma_tag_t for DVMA usage, suitable for use for devices not sitting
behind a sun4m iommu.

Move the existing dvma routines from vm_machdep.c to this new dvma.c; this
allows for a few declarations to be removed from public headers.

Extend the device attachment arguments (struct confargs) to pass a
bus_dma_tag_t. mainbus receives the dvma bus_dma_tag_t, and devices pass the
tag unchanged to their children, except for iommu(4) which replaces it with
its own.

Change the few sun4m-only drivers to pick the bus_dma_tag_t from confargs
rather than assume iommu; this allows qlw(4) to attach and work on sun4c.

ok kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.98 2015/02/28 17:54:54 miod Exp $
d151 1
a151 1
device	audioamd: audio, am7930, mulaw
d156 1
a156 1
device	audiocs: audio, auconv
@


1.98
log
@Move consinit() out of the bowels of the zs driver to its own file, in
preparation for systems which do not have console on a zs(4) device.
No functional change yet.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.97 2014/11/22 22:48:38 miod Exp $
d299 1
@


1.97
log
@Driver for the ECC memory controller found on some sun4m (ss20), so that
recoverable memory errors no longer panic the kernel.
From NetBSD but the manual page.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.96 2014/10/12 19:21:41 miod Exp $
d297 1
@


1.96
log
@Downgrade needs-count to needs-flag when applicable.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.95 2014/05/30 13:59:20 kettenis Exp $
d63 4
@


1.95
log
@SBus glue for qlw(4) for sparc.  Untested.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.94 2013/09/24 20:10:49 miod Exp $
d50 1
a50 1
file	arch/sparc/dev/power.c			power needs-count
d54 1
a54 1
file	arch/sparc/dev/led.c			led needs-count
@


1.94
log
@Sync the MI LANCE code ( le(4) ) with NetBSD, except for the following:
- the am7990_get() - now lance_get() - is unchanged.
- the interrupt acknowledge logic is unchanged, and will disable interrupts,
  then acknowledge all interrupt conditions.

Add ILACC (79900) support (from NetBSD).

Both LANCE (am7990.c) and ILACC (am79900.c) code share as much common code
(lance.c) as possible. This affects all le(4) attachments, but the changes
are mostly mechanical, to split am7990-specific parts from lance-agnostic
parts.

Compile tested on all affected platforms. Tested on alpha, hp300, luna88k,
mvme88k, sparc, sparc64 and vax.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.93 2013/06/04 21:05:54 miod Exp $
d272 3
@


1.93
log
@Support for the SS10/SS20 NVSIMM as block devices; tested by nick@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.92 2013/04/21 14:44:16 sebastia Exp $
d242 1
a242 1
attach	le at sbus, ledma, lebuffer, obio
@


1.92
log
@Unify the zs tty driver.

Most of the hard work by mpi@@, who provided the initial diff.
Fixes for sparc from myself. Tested on sgi and sparc myself.
Compiles and detects zstty on my powerbook, compile tested on
sparc64 by me. Real testing with zs device on sparc64 by miod@@
who also gave a lot of help and feedback.

ok miod@@, mpi@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.91 2011/09/04 08:03:32 miod Exp $
d364 1
a364 1
attach	presto at sbus
@


1.91
log
@Add emulation support for slinear:8, ulinear:8 and alaw. Written by jason@@
more than 8 years ago; allows aucat (and sndio users) to happily use
amd7930-based audio devices.
Verified by playing an mp3 file on vax.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.90 2011/09/03 20:04:00 miod Exp $
d67 1
a67 1
file	arch/sparc/dev/z8530sc.c		zs
d90 1
a90 1
file	arch/sparc/dev/z8530tty.c		zstty needs-flag
@


1.90
log
@Switch the sparc audioamd(4) code to the MI driver; tested on SPARCclassic
with and without option AUDIO_C_HANDLER.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.89 2011/07/04 22:53:53 tedu Exp $
d147 1
a147 1
device	audioamd: audio, am7930
@


1.89
log
@remove compat_svr4 support.  ok deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.88 2010/12/06 20:10:18 jasper Exp $
d147 1
a147 1
device	audioamd: audio
d149 2
a150 2
file	arch/sparc/dev/amd7930.c	audio
file	arch/sparc/sparc/amd7930intr.s	audio
@


1.88
log
@- use consistent 'include' rules without a full relative path.
tested on a GENERIC config from all arches.

ok deraadt@@ miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.87 2010/07/24 00:26:50 jakemsr Exp $
a311 4

# SVR4 Binary Compatibility (COMPAT_SVR4)
include	"compat/svr4/files.svr4"
file	arch/sparc/sparc/svr4_machdep.c	compat_svr4
@


1.87
log
@leftover from revert of long ago
"feel free!" deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.86 2010/07/02 19:57:15 tedu Exp $
d82 1
a82 1
include	"../../../dev/sun/files.sun"
d100 1
a100 1
include	"../../../dev/mii/files.mii"
d105 1
a105 1
include	"../../../scsi/files.scsi"
d314 1
a314 1
include	"../../../compat/svr4/files.svr4"
@


1.86
log
@remove support for compat_sunos (and m68k4k).  ok deraadt guenther
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.85 2009/08/29 21:30:48 kettenis Exp $
d147 1
a147 1
device	audioamd: audio, mulaw
@


1.85
log
@Glue for the SBus version of the Sun Vector Gigabit Ethernet card.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.84 2009/07/13 19:53:58 kettenis Exp $
a315 4
file	arch/sparc/sparc/sunos_machdep.c compat_sunos

# SunOS Binary Compatibility (COMPAT_SUNOS)
include	"../../../compat/sunos/files.sunos"
@


1.84
log
@Add the neccessary glue to attach gem(4) to sbus(4) and enable gem(4) in
GENERIC and SUN4M kernels.

ok miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.83 2009/05/20 18:22:33 miod Exp $
d135 3
@


1.83
log
@Add code to attach sun mice on sparc and sparc64 as wsmouse devices. Since
not all Sun mice run at the canonical 1200 bps, hop between 1200, 4800 and
9600 bps by paying attention to breaks on the line.

Attachement and engine code written 7 years ago for OpenBSD/sparc, except for
sparc64 com(4) attachment. Speed hop idea borrowed from Opensolaris.

This allows sparc and sparc64 users to run X11 without needing a configuration
file anymore, as it was in the XFree86 3.x days. Multihead configurations
will still need a minimal configuration file, though.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.82 2009/04/15 06:54:44 oga Exp $
d132 3
@


1.82
log
@Remove en(4) (no manpage present, no none removed), and the midway.c glue code
for it.

It is very unlikely this still compiles, the hardware is dead. It isn't in any
arch's config file. the sparc sbus code is even commented out in files.sparc.

Not to mention that the code is fucking appauling, doesn't even know that sparc
got bus.h ages ago, still uses vtophys(), defines all types of functions to
arch-specific hacks.

I will miss the bitchy comments, though...

As a note to other drivers: this is the fate that awaits you if you screw up my
ctags on commonly used functions.

"you have my ok" claudio@@, "zap zap zap" deraadt@@

If i've missed any bits, please remove them.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.81 2008/04/25 14:51:35 jmc Exp $
d93 1
a93 1
device	zskbd: tty, wskbddev, sunkbd
@


1.81
log
@neccessary -> necessary; from Pierre Riteau
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.80 2007/11/25 18:25:29 deraadt Exp $
a260 5

# Efficient Networks, Inc. ATM interface
# device declaration in sys/conf/files
#attach	en at sbus with en_sbus
#file	arch/sparc/dev/if_en_sbus.c	en_sbus
@


1.80
log
@libkern, begone.  Move to a new mechanism where config(8)'s "file"
directive can select between MI and MD versions of these files.  At
the same time, adjust the boot programs to pick exactly what they need,
instead of the 7 or 8 mechanisms previously used.

There will be some fallout from this, but testing it all by myself is a
ridiculously slow process; it will be finished in-tree.

Various developers were very nice and avoided making fun of me when I
was gibbering in the corner..
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.79 2007/10/10 15:53:52 art Exp $
d394 1
a394 1
# quad support is neccessary for 32 bit architectures
@


1.79
log
@Make context switching much more MI:
 - Move the functionality of choosing a process from cpu_switch into
   a much simpler function: cpu_switchto. Instead of having the locore
   code walk the run queues, let the MI code choose the process we
   want to run and only implement the context switching itself in MD
   code.
 - Let MD context switching run without worrying about spls or locks.
 - Instead of having the idle loop implemented with special contexts
   in MD code, implement one idle proc for each cpu. make the idle
   loop MI with MD hooks.
 - Change the proc lists from the old style vax queues to TAILQs.
 - Change the sleep queue from vax queues to TAILQs. This makes
   wakeup() go from O(n^2) to O(n)

there will be some MD fallout, but it will be fixed shortly.
There's also a few cleanups to be done after this.

deraadt@@, kettenis@@ ok
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.78 2007/05/29 09:54:03 sobrado Exp $
d390 29
@


1.78
log
@use the right capitalization for `SBus'

ok jmc@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.77 2007/02/03 20:08:50 miod Exp $
a293 1
file	arch/sparc/sparc/locore2.c
@


1.77
log
@Simple single-processor mutex implementation, simpler than the MI code by
use of MD spl code bowels. No functional change.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.76 2006/12/27 18:55:05 miod Exp $
d267 1
a267 1
# Qlogic ISP 10x0 (Sbus) family
@


1.76
log
@pnozz is initialized by the prom in 8bpp mode, so don't bring high-depth
rasops code; 3.5KB off RAMDISK kernels.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.75 2006/12/09 20:06:46 miod Exp $
d289 1
a295 1
file	arch/sparc/sparc/process_machdep.c
d297 1
d300 1
a303 1
file	arch/sparc/sparc/disksubr.c
@


1.75
log
@Do not make sun terminal emulation selected by the wsemul_sun frame buffer
attribute anymore; remove it and use option WSEMUL_SUN instead, which gets
added to all sparc* kernels.

While there, do not compile vt100 emulation on sparc* kernels, this saves 16+
KB of text.

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.74 2006/12/03 22:13:04 miod Exp $
d211 1
a211 1
device	pnozz: wsemuldisplaydev, rasops8, rasops16, rasops24, rasops32, bt_dac
@


1.74
log
@Change cgeight to run the console in the monochrome overlay plane (as cgtwelve
does), and only use the 24 bit color planes when running X.

Not tested, but can't be worse than before - the code it replaces was busted
anyway.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.73 2006/12/03 16:38:10 miod Exp $
d161 1
a161 1
device	agten: wsemuldisplaydev, rasops8, wsemul_sun
d165 1
a165 1
device	bwtwo: wsemuldisplaydev, rasops1, wsemul_sun
d169 1
a169 1
device	cgeight: wsemuldisplaydev, rasops1, wsemul_sun, bt_dac
d173 1
a173 1
device	cgfour: wsemuldisplaydev, rasops8, wsemul_sun, bt_dac
d177 1
a177 1
device	cgfourteen: wsemuldisplaydev, rasops8, wsemul_sun
d181 1
a181 1
device	cgsix: wsemuldisplaydev, rasops8, wsemul_sun, bt_dac
d185 1
a185 1
device	cgthree: wsemuldisplaydev, rasops8, wsemul_sun, bt_dac
d189 1
a189 1
device	cgtwelve: wsemuldisplaydev, rasops1, wsemul_sun
d193 1
a193 1
device	cgtwo: wsemuldisplaydev, rasops8, wsemul_sun
d197 1
a197 1
device	mgx: wsemuldisplaydev, rasops8, wsemul_sun
d202 1
a202 1
device	pninek: wsemuldisplaydev, rasops8, wsemul_sun, bt_dac
d211 1
a211 1
device	pnozz: wsemuldisplaydev, rasops8, rasops16, rasops24, rasops32, wsemul_sun, bt_dac
d215 1
a215 1
device	rfx: wsemuldisplaydev, rasops8, wsemul_sun
d219 1
a219 1
device	tcx: wsemuldisplaydev, rasops8, wsemul_sun, bt_dac
d223 1
a223 1
device	tvtwo: wsemuldisplaydev, rasops8, wsemul_sun
d227 1
a227 1
device	vigra: wsemuldisplaydev, rasops8, wsemul_sun
d231 1
a231 1
device	zx: wsemuldisplaydev, rasops8, wsemul_sun
@


1.73
log
@Clean frame buffer attachment code:
- There is no need to check for buses config(8) will not let us attach to
- Better P4 bus logic, which does not need to abuse device flags
- Do not bother trying to print a meaningful device description when it is
  not connected to sbus.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.72 2006/12/02 11:00:35 miod Exp $
d169 1
a169 1
device	cgeight: wsemuldisplaydev, rasops24, wsemul_sun, bt_dac
@


1.72
log
@zx needs rasops8 code for emulation modes, not rasops32.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.71 2006/02/12 12:02:26 miod Exp $
d194 1
a194 1
attach	cgtwo at sbus, obio, vmes
@


1.71
log
@Run the tvtwo emulation mode in the 8 bit plane, and keep mapped mode 32 bit.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.70 2005/07/17 12:21:25 miod Exp $
d231 1
a231 1
device	zx: wsemuldisplaydev, rasops32, wsemul_sun
@


1.70
log
@Attach com(4) to the built-in modem found on Tadpole SPARCbooks.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.69 2005/07/14 02:09:46 uwe Exp $
d223 1
a223 1
device	tvtwo: wsemuldisplaydev, rasops32, wsemul_sun
@


1.69
log
@More netccitt and netns removals; OK henning, brad, mickey
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.68 2005/07/08 12:36:36 miod Exp $
d386 4
@


1.68
log
@Allow more than one auxio device to attach, and attach both SPARCbook auxio
registers. However, those are handled specifically since they do not have
the same meaning as the regular sun4c/sun4m auxio register.

A specific auxregbisc() function is provided for explicit sparcbook operation.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.67 2005/05/03 00:39:39 brad Exp $
a318 3

# Miscellaneous
file	netns/ns_cksum.c		ns
@


1.67
log
@- Fix bogus asm statements; tmp1 and tmp2 need to be outputs rather than inputs.
- Merge in4_cksum().

From NetBSD

ok miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.66 2005/05/01 21:36:57 brad Exp $
d33 1
a33 1
file	arch/sparc/sparc/auxreg.c		auxreg needs-count
@


1.66
log
@To allow for MD override of in4_cksum()...

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.65 2005/04/19 22:52:35 miod Exp $
a290 1
file	netinet/in4_cksum.c			inet
@


1.65
log
@Same vm_machdep.c on solbourne.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.64 2005/04/19 21:30:18 miod Exp $
d290 2
a291 1
file	arch/sparc/sparc/in_cksum.c
@


1.64
log
@As a late birthday present, a preliminary port to the Solbourne IDT systems
(S3000, S4000 and S4000DX).

Currently limited to diskless and serial console, and userland has issues.
Things will get better in the near future.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.63 2005/03/08 20:00:24 tdeval Exp $
d301 1
a301 1
file	arch/sparc/sparc/vm_machdep.c		!solbourne
@


1.63
log
@Cosmetics...
Mainly remove space between locators parens, replace spaces with tabs
where appropriate and consistently align dependencies.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.62 2005/03/03 09:45:20 miod Exp $
d29 1
a29 1
file	arch/sparc/dev/obio.c		obio | vmel | vmes | vme
d46 1
a46 1
file	arch/sparc/sparc/clock.c
d286 1
a286 1
file	arch/sparc/sparc/autoconf.c
d294 1
a294 1
file	arch/sparc/sparc/machdep.c
d296 3
a298 3
file	arch/sparc/sparc/mem.c
file	arch/sparc/sparc/openprom.c
file	arch/sparc/sparc/pmap.c
d300 2
a301 2
file	arch/sparc/sparc/trap.c
file	arch/sparc/sparc/vm_machdep.c
a302 2

file	kludge_for_in_proto.c		hy needs-flag
@


1.62
log
@Sort frame buffer section and remove rasops32 dependencies from cgfourteen,
cgtwelve and tcx, as they are no longer necessary.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.61 2004/10/08 13:04:36 grange Exp $
d12 2
a13 2
device mainbus {}
attach mainbus at root
d15 2
a16 2
device obio { [addr = -1], [level = -1] }
attach obio at mainbus
d18 2
a19 2
device iommu {}
attach iommu at mainbus
d22 2
a23 2
device vme {}
attach vme at iommu
d25 4
a28 4
device vmel { [addr = -1], [level = -1], [vect = -1] }
attach vmel at mainbus, vme
device vmes { [addr = -1], [level = -1], [vect = -1] }
attach vmes at mainbus, vme
d31 2
a32 2
device auxreg
attach auxreg at mainbus, obio
d35 2
a36 2
device clock
attach clock at mainbus, obio
d38 2
a39 2
device oclock
attach oclock at obio
d41 2
a42 2
device timer
attach timer at mainbus, obio
d44 2
a45 2
device eeprom
attach eeprom at obio
d48 2
a49 2
device power
attach power at obio
d52 2
a53 2
device led
attach led at mainbus, obio
d56 2
a57 2
device cpu
attach cpu at mainbus
d60 2
a61 2
device memreg
attach memreg at mainbus, obio
d64 2
a65 2
device zs {[channel = -1]}
attach zs at mainbus, obio
d69 4
a72 4
device fdc {}
attach fdc at mainbus, obio
device fd: disk
attach fd at fdc
d76 3
a78 3
device xbox {}
device sbus { [slot = -1], [offset = -1] }
attach sbus at mainbus, iommu, sbus, xbox
d82 1
a82 1
include "../../../dev/sun/files.sun"
d88 2
a89 2
device zstty: tty
attach zstty at zs
d93 2
a94 2
device zskbd: tty, wskbddev, sunkbd
attach zskbd at zs
d100 1
a100 1
include "../../../dev/mii/files.mii"
d105 1
a105 1
include "../../../scsi/files.scsi"
d107 3
a109 3
major { sd = 7 }
major { vnd = 8 }
major { cd = 18 }
d112 4
a115 4
device dma {}
attach dma at sbus, obio
device ledma {}
attach ledma at sbus
d117 2
a118 2
device lebuffer {}
attach lebuffer at sbus
d134 2
a135 2
device hme: ifnet, ether, mii, ifmedia
attach hme at sbus
d138 1
a138 1
attach esp at sbus, dma, obio
d141 2
a142 2
device audioamd: audio, mulaw
attach audioamd at mainbus, obio, sbus
d146 2
a147 2
device audiocs: audio, auconv
attach audiocs at sbus
d154 3
a156 3
include "dev/wscons/files.wscons"
include "dev/rasops/files.rasops"
include "dev/wsfont/files.wsfont"
d236 1
a236 1
attach le at sbus, ledma, lebuffer, obio
d239 1
a239 1
attach ie at obio, vmes, vmel
d242 4
a245 4
device xdc {[drive = -1]}
attach xdc at vmel
device xd: disk
attach xd at xdc
d249 4
a252 4
device xyc {[drive = -1]}
attach xyc at vmes
device xy: disk
attach xy at xyc
d256 4
a259 4
device si: scsi, ncr5380sbc
attach si at vmes
device sw: scsi, ncr5380sbc
attach sw at obio
d315 1
a315 1
include "../../../compat/svr4/files.svr4"
d320 1
a320 1
include "../../../compat/sunos/files.sunos"
d326 14
a339 14
device magma {}
attach magma at sbus                                 
device mtty
attach mtty at magma
device mbpp
attach mbpp at magma
file    arch/sparc/dev/magma.c		magma | mtty | mbpp needs-flag

device spif {}
attach spif at sbus
device stty
attach stty at spif
device sbpp
attach sbpp at spif
d342 3
a344 3
device bpp {}
attach bpp at sbus
file    arch/sparc/dev/bpp.c		bpp needs-flag
d346 1
a346 1
attach xbox at sbus
d350 2
a351 2
device scf {}
attach scf at mainbus
d355 2
a356 2
device flash {}
attach flash at obio
d360 4
a363 4
device fga {}
attach fga at iommu
device fvme { [addr = -1], [level = -1], [vect = -1] }
attach fvme at fga
d366 2
a367 2
device daadio {}
attach daadio at fvme
d370 2
a371 2
device tctrl {}
attach tctrl at obio
@


1.61
log
@Move dev/cons.c to MI conf/files.

ok miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.60 2004/09/16 09:14:04 mickey Exp $
d161 4
d169 3
a171 7
device	cgtwo: wsemuldisplaydev, rasops8, wsemul_sun
attach	cgtwo at sbus, obio, vmes
file	arch/sparc/dev/cgtwo.c		cgtwo

device	cgthree: wsemuldisplaydev, rasops8, wsemul_sun, bt_dac
attach	cgthree at sbus
file	arch/sparc/dev/cgthree.c	cgthree
d177 4
d185 3
a187 7
device	cgeight: wsemuldisplaydev, rasops24, wsemul_sun, bt_dac
attach	cgeight at obio
file	arch/sparc/dev/cgeight.c	cgeight

device	cgfourteen: wsemuldisplaydev, rasops8, rasops32, wsemul_sun
attach	cgfourteen at obio
file	arch/sparc/dev/cgfourteen.c	cgfourteen
d189 1
a189 1
device	cgtwelve: wsemuldisplaydev, rasops1, rasops32, wsemul_sun
d193 8
d215 5
a219 1
device	tcx: wsemuldisplaydev, rasops8, rasops32, wsemul_sun, bt_dac
d223 4
a230 8
device	agten: wsemuldisplaydev, rasops8, wsemul_sun
attach	agten at sbus
file	arch/sparc/dev/agten.c		agten

device	tvtwo: wsemuldisplaydev, rasops32, wsemul_sun
attach	tvtwo at sbus
file	arch/sparc/dev/tvtwo.c		tvtwo

a233 8

device	mgx: wsemuldisplaydev, rasops8, wsemul_sun
attach	mgx at sbus
file	arch/sparc/dev/mgx.c		mgx

device	rfx: wsemuldisplaydev, rasops8, wsemul_sun
attach	rfx at sbus
file	arch/sparc/dev/rfx.c		rfx
@


1.60
log
@cleanup deafult locators (blah ?); please check that your most hated architecture is still fluffy (;
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.59 2004/02/29 21:44:12 miod Exp $
a274 2

file	dev/cons.c
@


1.59
log
@Enter rfx, driver for the SBus RasterFlex frame buffer family.
Currently 8-bit only for now.

This apparently completes the SBus frame buffer support list - yet if
you stumble upon an unsupported SBus frame buffer, I'd love to hear about it...
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.58 2003/06/28 18:12:31 jason Exp $
d64 1
a64 1
device zs { channel = -1 }
d242 1
a242 1
device xdc {drive = -1}
d249 1
a249 1
device xyc {drive = -1}
@


1.58
log
@add emulations for slinear:8 and ulinear:8; ok miod
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.57 2003/06/23 09:30:36 miod Exp $
d230 4
@


1.57
log
@Attachment glue for stp and tslot drivers, and add them, as well as wi0,
to the appropriate configuration files.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.56 2003/06/18 17:40:31 miod Exp $
d141 1
a141 1
device audioamd: audio
@


1.56
log
@Rename p9k to pninek, since device base names with digits are confusing;
per deraadt@@'s request.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.55 2003/06/17 21:21:31 miod Exp $
d376 13
@


1.55
log
@New driver and wsdisplay type for the Weitek Power9000 and Brooktree Bt445
combination, found on the Tadpole SPARCbook 3 only (later model use the
Power9100 and are already supported).

Untested for lack of hardware and volunteers, but carefully crafted; if it
does not work out of the box, this should be a good starting point.

"worth having in the tree" millert@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.54 2003/05/15 04:13:14 miod Exp $
d194 3
a196 3
device	p9k: wsemuldisplaydev, rasops8, wsemul_sun, bt_dac
attach	p9k at sbus
file	arch/sparc/dev/p9000.c		p9k
@


1.54
log
@Remove old inaccurate comments.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.53 2003/05/14 06:39:49 miod Exp $
d193 10
a202 1
# Onboard Weitek p9100 found on Tadpole 3GS/3GX
@


1.53
log
@The ramdac's hater club is proud to present new yet another SBus frame
bufer driver, this time for the Southland Media Systems (now Quantum 3D)
MGX and MGXPlus cards.

Not complete, but a good start.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.52 2003/05/13 17:24:10 miod Exp $
a274 2
# N.B.: optimizer breaks pmap.c and/or cache.c somehow -- have not
# identified the exact problem yet.  NOOPT_C suffices for now.
a281 2
# sparc/sparc/locore.s is handled specially in the makefile,
# because it must come first in the "ld" command line.
a287 3
# the following overrides the generic "sys_process.c"
# commented out by deraadt
#file	arch/sparc/sparc/sys_process.c
@


1.52
log
@Make the "slot" and "offset" locators for sbus drivers optional in
configuration lines.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.51 2003/04/13 22:55:48 miod Exp $
d217 4
@


1.51
log
@Add a simple driver for the SBus ``Prestoserve'' NVRAM cards.

The Legato Prestoserve NFS accelerator used to be very popular, back when
NFSv3 did not exist, and disks and network speeds were not as good as they
are now...

This driver does not attempt to play any game with filesystems, but will only
provide access to the cards NVRAM, as a block device.

If you have bright ideas on ``what to do with a few MB of battery-backed
memory'', I am interested in realistic suggestions!
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.50 2003/03/09 02:30:45 miod Exp $
d77 1
a77 1
device sbus { slot = -1, offset = -1 }
@


1.50
log
@Add and enable zx. Not put in RAMDISK yet, need to check if this still fits
on the floppies first.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.49 2003/03/08 00:43:17 miod Exp $
d324 1
a324 1
file    arch/sparc/dev/magma.c          magma | mtty | mbpp needs-flag
d365 5
@


1.49
log
@agten does not need to imply rasops32 at the moment.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.48 2003/03/06 21:48:25 miod Exp $
d213 4
@


1.48
log
@Premiliminary driver for the Fujitsu AG-10e SBus frame buffer.
It will currently only work in 8bit mode, and without using the i128
acceleration features (but that's a good start for 3.3).

Written initially in november 2002, but it took some time in experiments
until I realized the ramdac had to be fed values shifted left by 16 bits in
order to work as intended, for no good reason.

So, I am now officially founding a ``RAMDAC Hater's Club''. Feel free to
apply.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.47 2003/03/05 14:34:39 miod Exp $
d206 1
a206 1
device	agten: wsemuldisplaydev, rasops8, rasops32, wsemul_sun
@


1.47
log
@Driver for the Parallax XVideo and PowerVideo frame buffers.

Currently limited to dump frame buffer operation, the acceleration features
will be used later...

Code by me, tests on real hardware by Paul Weissmann.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.46 2003/01/14 19:56:32 jason Exp $
d205 4
@


1.46
log
@Move sunkbd defn to common place and remove old event.c reference
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.45 2002/09/20 11:17:55 fgsch Exp $
d205 4
@


1.45
log
@Support to run the 24 bit fb in 8 bit mode or cg12 in 1 bit mode
via flags, using 0x0001.
miod@@ ok.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.43 2002/08/12 10:44:03 miod Exp $
d81 3
a91 3

define sunkbd
file	dev/sun/sunkbd.c			sunkbd
@


1.44
log
@Driver for the Vigra VS10 and VS12 SBus framebuffers, and possibly more from
this series.
Thanks to Andrey Smagin (andrey at smagin dot com) for providing a VS10 card.
@
text
@d189 1
a189 1
device	cgtwelve: wsemuldisplaydev, rasops32, wsemul_sun
@


1.43
log
@Convert sparc console code from rcons and pseudo-devices to rasops and wscons.
For most framebuffers it is faster.

Other changes include:
o 24 bit support in tcx(4) for the S24 framebuffer
o accelerated cgsix(4) text console
o new cgtwelve(4) driver for the GS framebuffer
o improved serial driver code
o better keyboard support

The following framebuffers have not been tested but should work: cgfour,
cgeight and cgfourteen

These changes will require XF4 changes, to use Xwsfb instead of Xsun*, to be
commited later today.

Most of the work by me during the LSM and the week after, with code borrowed
from jason@@, NetBSD (new serial code), and feedback from mickey@@. Work on
pnozz(4) done by millert@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.42 2002/07/09 15:27:59 jason Exp $
d201 4
@


1.42
log
@allow getting and setting of the ADC, DAC, and PIO ports on the daadio (this has been sitting in my tree for awhile)
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.41 2002/03/23 14:14:25 deraadt Exp $
d64 1
a64 1
device zs
d66 2
a67 1
file	arch/sparc/dev/zs.c			zs needs-count
d82 16
d150 3
a152 2
# Brooktree DAC attribute
define bt_dac
d154 3
a156 31
device bwtwo
attach bwtwo at sbus, obio, vmes, vmel
file	arch/sparc/dev/bwtwo.c		bwtwo needs-flag

device cgtwo
attach cgtwo at sbus, obio, vmes
file	arch/sparc/dev/cgtwo.c		cgtwo needs-flag

device cgthree: bt_dac
attach cgthree at sbus
file	arch/sparc/dev/cgthree.c	cgthree needs-flag

device cgfour: bt_dac
attach cgfour at obio
file	arch/sparc/dev/cgfour.c		cgfour needs-flag

device cgsix: bt_dac
attach cgsix at sbus, obio
file	arch/sparc/dev/cgsix.c		cgsix needs-flag

device cgeight: bt_dac
attach cgeight at obio
file	arch/sparc/dev/cgeight.c	cgeight needs-flag

device tcx: bt_dac
attach tcx at sbus
file	arch/sparc/dev/tcx.c		tcx needs-flag

device cgfourteen
attach cgfourteen at obio
file	arch/sparc/dev/cgfourteen.c	cgfourteen needs-flag
d158 1
d161 32
d194 7
a200 3
device pnozz
attach pnozz at sbus: bt_dac
file	arch/sparc/dev/p9100.c		pnozz needs-flag
a238 2
pseudo-device	kbd

d240 1
a240 1
# Generic Sun stuff
a241 1
include "../../../dev/sun/files.sun"
d243 1
a243 4
file	arch/sparc/dev/cons.c
file	arch/sparc/dev/fb.c
file	arch/sparc/dev/ms.c
file	arch/sparc/dev/kbd.c		kbd	needs-flag
a284 5

#
# Raster Console
#
include "../../../dev/rcons/files.rcons"
@


1.41
log
@typo repair; openbsd@@davidkrause.com
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.40 2001/05/11 07:13:16 deraadt Exp $
d328 1
a328 1
file	arch/sparc/dev/daadio.c		daadio
@


1.40
log
@unify rd(4) even more
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.39 2001/05/11 06:41:48 deraadt Exp $
d81 1
a81 1
# Media Indepedent Interface (mii)
@


1.40.4.1
log
@Sync UBC branch to -current
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.40 2001/05/11 07:13:16 deraadt Exp $
d81 1
a81 1
# Media Independent Interface (mii)
@


1.40.4.2
log
@sync to -current
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.40.4.1 2002/06/11 03:38:15 art Exp $
d64 1
a64 1
device zs { channel = -1 }
d66 1
a66 2
file	arch/sparc/dev/zs.c			zs needs-flag
file	arch/sparc/dev/z8530sc.c		zs
a80 16
# Console (zs) related stuff
#

device zstty: tty
attach zstty at zs
file	arch/sparc/dev/z8530tty.c		zstty needs-flag
file	arch/sparc/dev/zs_kgdb.c		kgdb

define sunkbd
file	dev/sun/sunkbd.c			sunkbd

device zskbd: tty, wskbddev, sunkbd
attach zskbd at zs
file	arch/sparc/dev/z8530kbd.c		zskbd needs-flag

#
d133 2
a134 3
# Framebuffers

file	arch/sparc/dev/fb.c
d136 31
a166 3
include "dev/wscons/files.wscons"
include "dev/rasops/files.rasops"
include "dev/wsfont/files.wsfont"
a167 1
define	bt_dac
a169 32
device	bwtwo: wsemuldisplaydev, rasops1, wsemul_sun
attach	bwtwo at sbus, obio, vmes, vmel
file	arch/sparc/dev/bwtwo.c		bwtwo

device	cgtwo: wsemuldisplaydev, rasops8, wsemul_sun
attach	cgtwo at sbus, obio, vmes
file	arch/sparc/dev/cgtwo.c		cgtwo

device	cgthree: wsemuldisplaydev, rasops8, wsemul_sun, bt_dac
attach	cgthree at sbus
file	arch/sparc/dev/cgthree.c	cgthree

device	cgfour: wsemuldisplaydev, rasops8, wsemul_sun, bt_dac
attach	cgfour at obio
file	arch/sparc/dev/cgfour.c		cgfour

device	cgsix: wsemuldisplaydev, rasops8, wsemul_sun, bt_dac
attach	cgsix at sbus, obio
file	arch/sparc/dev/cgsix.c		cgsix

device	cgeight: wsemuldisplaydev, rasops24, wsemul_sun, bt_dac
attach	cgeight at obio
file	arch/sparc/dev/cgeight.c	cgeight

device	cgfourteen: wsemuldisplaydev, rasops8, rasops32, wsemul_sun
attach	cgfourteen at obio
file	arch/sparc/dev/cgfourteen.c	cgfourteen

device	cgtwelve: wsemuldisplaydev, rasops1, rasops32, wsemul_sun
attach	cgtwelve at sbus
file	arch/sparc/dev/cgtwelve.c	cgtwelve

d171 3
a173 11
device	pnozz: wsemuldisplaydev, rasops8, rasops16, rasops24, rasops32, wsemul_sun, bt_dac
attach	pnozz at sbus
file	arch/sparc/dev/p9100.c		pnozz

device	tcx: wsemuldisplaydev, rasops8, rasops32, wsemul_sun, bt_dac
attach	tcx at sbus
file	arch/sparc/dev/tcx.c		tcx

device	vigra: wsemuldisplaydev, rasops8, wsemul_sun
attach	vigra at sbus
file	arch/sparc/dev/vigra.c		vigra
d212 2
d215 1
a215 1
# Generic Sparc stuff
d217 1
d219 4
a222 1
file	dev/cons.c
d266 5
d328 1
a328 1
file	arch/sparc/dev/daadio.c		daadio needs-flag
@


1.40.4.3
log
@sync
@
text
@d1 1
a1 1
#	$OpenBSD$
d77 1
a77 1
device sbus { [slot = -1], [offset = -1] }
a80 3
# Sun specific files
include "../../../dev/sun/files.sun"

d90 3
a205 16
device	agten: wsemuldisplaydev, rasops8, wsemul_sun
attach	agten at sbus
file	arch/sparc/dev/agten.c		agten

device	tvtwo: wsemuldisplaydev, rasops32, wsemul_sun
attach	tvtwo at sbus
file	arch/sparc/dev/tvtwo.c		tvtwo

device	zx: wsemuldisplaydev, rasops32, wsemul_sun
attach	zx at sbus
file	arch/sparc/dev/zx.c		zx

device	mgx: wsemuldisplaydev, rasops8, wsemul_sun
attach	mgx at sbus
file	arch/sparc/dev/mgx.c		mgx

d259 2
d268 2
d276 3
d312 1
a312 1
file    arch/sparc/dev/magma.c		magma | mtty | mbpp needs-flag
a352 5

# Prestoserve NVRAM
device	presto: disk
attach	presto at sbus
file	arch/sparc/dev/presto.c		presto needs-flag
@


1.39
log
@unify
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.38 2000/11/16 15:47:56 jason Exp $
a92 3

# RAM Disk for install floppy
file dev/rd.c					ramdisk_hooks
@


1.38
log
@- Fix the NMI problem: it seems the qec channel reset also resets the MACE, and
a race condition existed where after a qec channel reset, accesses to the
MACE would cause an NMI: so wait for the MACE to come out of reset before
accessing.

- add ifmedia support (mainly so I can get at the link status from other code)
- move some of the spl handling around (more correct)
- rewrite qe_mcreset() again so that all it does is set the multicast filter
- use bzero to initialize the buffers and descriptors
- rearrange the MACE setup to conform to the suggestions in the datasheet
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.37 2000/06/28 20:20:14 mjacob Exp $
d95 1
a95 1
file arch/sparc/sparc/rd_root.c		ramdisk_hooks
@


1.37
log
@make the kbd have a kbd.h file (needs-flag)
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.36 2000/06/12 06:10:45 fgsch Exp $
d115 1
a115 1
device	qe: ifnet, ether
@


1.37.2.1
log
@Pull in patches from current:
Errata (003):
Configuring a qec+qe causes a NMI panic.
Fix (jason):
- Fix the NMI problem: it seems the qec channel reset also resets the MACE, and
a race condition existed where after a qec channel reset, accesses to the
MACE would cause an NMI: so wait for the MACE to come out of reset before
accessing.

- add ifmedia support (mainly so I can get at the link status from other code)
- move some of the spl handling around (more correct)
- rewrite qe_mcreset() again so that all it does is set the multicast filter
- use bzero to initialize the buffers and descriptors
- rearrange the MACE setup to conform to the suggestions in the datasheet
----------------------------
wait for the MACE to figure out whether it has media or not, and then
clear interrupt status and such before enabling rx and tx.
----------------------------
- remove other media types, the MACE isn't as bright as one would hope
- always set it to autoselect, tp
- remove the wait for media stuff: appears to be a local issue on
- simplify the ifmedia callbacks appropriately
----------------------------
seems the qe/mace combination needs a delay between accesses to the
two chips.  Better fix for the NMI problem.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.37 2000/06/28 20:20:14 mjacob Exp $
d115 1
a115 1
device	qe: ifnet, ether, ifmedia
@


1.36
log
@move cfdriver to ncr53c9x.c and device declaration to conf/files.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.35 1999/11/08 15:36:10 mickey Exp $
d225 1
a225 1
file	arch/sparc/dev/kbd.c		kbd
@


1.35
log
@move MI definition of rd into it's MI place also fixing
attributes, allowing kernels to exist w/ rd as the only disk device.
tested on a few archs; niels@@ & millert@@ ok
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.34 1999/09/07 02:58:49 jason Exp $
a123 1
device esp: scsi, ncr53c9x
@


1.35.2.1
log
@Continue the aborted merge of current just before 2.9 was cut into the
SMP branch.  Note that this will not make any progress of SMP functionality,
it is just merging of new code from the trunk into the old branch.
Please do not ask me questions about SMP status because of this mail,
instead go read the archives of smp@@openbsd.org, where I mailed about
these commits some week ago.  Another note: I am doing this in chunks now,
so as to not lock too much of the tree for long times
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.38 2000/11/16 15:47:56 jason Exp $
d115 1
a115 1
device	qe: ifnet, ether, ifmedia
d124 1
d226 1
a226 1
file	arch/sparc/dev/kbd.c		kbd	needs-flag
@


1.35.2.2
log
@Merge in -current from two days ago in the SMP branch.
As usual with merges, they do not indicate progress, so do not hold
your breath for working SMP, and do not mail me and ask about the
state of it.  It has not changed.  There is work ongoing, but very, very
slowly.  The commit is done in parts as to not lock up the tree in too
big chunks at a time.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.35.2.1 2001/05/14 21:37:02 niklas Exp $
d93 3
@


1.35.2.3
log
@Sync the SMP branch with 3.3
@
text
@d1 1
a1 1
#	$OpenBSD$
d64 1
a64 1
device zs { channel = -1 }
d66 1
a66 2
file	arch/sparc/dev/zs.c			zs needs-flag
file	arch/sparc/dev/z8530sc.c		zs
a79 16
# Sun specific files
include "../../../dev/sun/files.sun"

#
# Console (zs) related stuff
#

device zstty: tty
attach zstty at zs
file	arch/sparc/dev/z8530tty.c		zstty needs-flag
file	arch/sparc/dev/zs_kgdb.c		kgdb

device zskbd: tty, wskbddev, sunkbd
attach zskbd at zs
file	arch/sparc/dev/z8530kbd.c		zskbd needs-flag

d81 1
a81 1
# Media Independent Interface (mii)
d133 2
a134 3
# Framebuffers

file	arch/sparc/dev/fb.c
d136 31
a166 3
include "dev/wscons/files.wscons"
include "dev/rasops/files.rasops"
include "dev/wsfont/files.wsfont"
a167 1
define	bt_dac
a169 32
device	bwtwo: wsemuldisplaydev, rasops1, wsemul_sun
attach	bwtwo at sbus, obio, vmes, vmel
file	arch/sparc/dev/bwtwo.c		bwtwo

device	cgtwo: wsemuldisplaydev, rasops8, wsemul_sun
attach	cgtwo at sbus, obio, vmes
file	arch/sparc/dev/cgtwo.c		cgtwo

device	cgthree: wsemuldisplaydev, rasops8, wsemul_sun, bt_dac
attach	cgthree at sbus
file	arch/sparc/dev/cgthree.c	cgthree

device	cgfour: wsemuldisplaydev, rasops8, wsemul_sun, bt_dac
attach	cgfour at obio
file	arch/sparc/dev/cgfour.c		cgfour

device	cgsix: wsemuldisplaydev, rasops8, wsemul_sun, bt_dac
attach	cgsix at sbus, obio
file	arch/sparc/dev/cgsix.c		cgsix

device	cgeight: wsemuldisplaydev, rasops24, wsemul_sun, bt_dac
attach	cgeight at obio
file	arch/sparc/dev/cgeight.c	cgeight

device	cgfourteen: wsemuldisplaydev, rasops8, rasops32, wsemul_sun
attach	cgfourteen at obio
file	arch/sparc/dev/cgfourteen.c	cgfourteen

device	cgtwelve: wsemuldisplaydev, rasops1, rasops32, wsemul_sun
attach	cgtwelve at sbus
file	arch/sparc/dev/cgtwelve.c	cgtwelve

d171 3
a173 23
device	pnozz: wsemuldisplaydev, rasops8, rasops16, rasops24, rasops32, wsemul_sun, bt_dac
attach	pnozz at sbus
file	arch/sparc/dev/p9100.c		pnozz

device	tcx: wsemuldisplaydev, rasops8, rasops32, wsemul_sun, bt_dac
attach	tcx at sbus
file	arch/sparc/dev/tcx.c		tcx

device	vigra: wsemuldisplaydev, rasops8, wsemul_sun
attach	vigra at sbus
file	arch/sparc/dev/vigra.c		vigra

device	agten: wsemuldisplaydev, rasops8, wsemul_sun
attach	agten at sbus
file	arch/sparc/dev/agten.c		agten

device	tvtwo: wsemuldisplaydev, rasops32, wsemul_sun
attach	tvtwo at sbus
file	arch/sparc/dev/tvtwo.c		tvtwo

device	zx: wsemuldisplaydev, rasops32, wsemul_sun
attach	zx at sbus
file	arch/sparc/dev/zx.c		zx
d212 2
d215 1
a215 1
# Generic Sparc stuff
d217 1
d219 4
a222 1
file	dev/cons.c
d266 5
d328 1
a328 1
file	arch/sparc/dev/daadio.c		daadio needs-flag
@


1.35.2.4
log
@Sync the SMP branch to -current.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.35.2.3 2003/03/27 23:49:25 niklas Exp $
d324 1
a324 1
file    arch/sparc/dev/magma.c		magma | mtty | mbpp needs-flag
a364 5

# Prestoserve NVRAM
device	presto: disk
attach	presto at sbus
file	arch/sparc/dev/presto.c		presto needs-flag
@


1.35.2.5
log
@merge the trunk so we will get the genfs and locking fixes
@
text
@d1 1
a1 1
#	$OpenBSD$
d77 1
a77 1
device sbus { [slot = -1], [offset = -1] }
a217 4
device	mgx: wsemuldisplaydev, rasops8, wsemul_sun
attach	mgx at sbus
file	arch/sparc/dev/mgx.c		mgx

d271 2
d280 2
d288 3
@


1.35.2.6
log
@Merge of current from two weeks agointo the SMP branch
@
text
@d141 1
a141 1
device audioamd: audio, mulaw
d193 1
a193 10
# Onboard Weitek P9000 found on Tadpole SPARCbook 3, and BT ``Chameleon'' RAMDAC
device	pninek: wsemuldisplaydev, rasops8, wsemul_sun, bt_dac
attach	pninek at sbus
file	arch/sparc/dev/p9000.c		pninek

device	btcham
attach	btcham at obio
file	arch/sparc/dev/bt445.c		btcham

# Onboard Weitek p9100 found on Tadpole SPARCbook 3GS/3GX/3TX/3XP
a366 13

# PCMCIA devices

device	tslot: pcmciabus
attach	tslot at sbus
file	arch/sparc/dev/ts102.c		tslot

device	stp: pcmciabus
attach	stp at sbus with stp_sbus
file	dev/sbus/stp4020.c		stp
file	arch/sparc/dev/stp_sbus.c	stp_sbus

include	"dev/pcmcia/files.pcmcia"
@


1.35.2.7
log
@Merge with the trunk
@
text
@a230 4
device	rfx: wsemuldisplaydev, rasops8, wsemul_sun
attach	rfx at sbus
file	arch/sparc/dev/rfx.c		rfx

@


1.35.4.1
log
@Pull in patches from current:
Fix (jason):
- Fix the NMI problem: it seems the qec channel reset also resets the MACE, and
a race condition existed where after a qec channel reset, accesses to the
MACE would cause an NMI: so wait for the MACE to come out of reset before
accessing.

- add ifmedia support (mainly so I can get at the link status from other code)
- move some of the spl handling around (more correct)
- rewrite qe_mcreset() again so that all it does is set the multicast filter
- use bzero to initialize the buffers and descriptors
- rearrange the MACE setup to conform to the suggestions in the datasheet
----------------------------
wait for the MACE to figure out whether it has media or not, and then
clear interrupt status and such before enabling rx and tx.
----------------------------
- remove other media types, the MACE isn't as bright as one would hope
- always set it to autoselect, tp
- remove the wait for media stuff: appears to be a local issue on
- simplify the ifmedia callbacks appropriately
----------------------------
seems the qe/mace combination needs a delay between accesses to the
two chips.  Better fix for the NMI problem.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.38 2000/11/16 15:47:56 jason Exp $
d115 1
a115 1
device	qe: ifnet, ether, ifmedia
@


1.34
log
@add tadpole microcontroller device driver; from NetBSD
power the tft down on screenblank
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.33 1999/09/06 03:46:16 jason Exp $
a94 2
pseudo-device rd
file dev/ramdisk.c			rd needs-flag
@


1.33
log
@p9100 console driver for tadpole 3g[sx] (based on cgthree.c and netbsd's
driver).  Needs clean-up.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.32 1999/08/17 22:47:15 mickey Exp $
d335 4
@


1.32
log
@factor out ie device definition; niklas@@ ok
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.31 1999/07/23 19:11:23 jason Exp $
d175 5
@


1.31
log
@Drivers for the FORCE CPU-5V:
o fga5000 vme-sbus bridge
o system config registers
o flash memory
and daadio VME board driver
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.30 1999/06/06 04:48:24 jason Exp $
a179 1
device ie: ifnet, ether
@


1.30
log
@First cut at SUNW,CS4231 audio driver (ss4/ss5).  This driver is output-only
at the moment.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.29 1999/04/18 03:24:23 jason Exp $
d306 1
a306 1
file    arch/sparc/dev/bpp.c          bpp needs-flag
d310 21
@


1.29
log
@Support for the Sun SBus Expansion Subsystem (SUNW,xbox)
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.28 1999/03/17 05:34:14 mjacob Exp $
d134 4
@


1.28
log
@complete update of ISP driver- Finally enabled for sparc
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.27 1999/03/01 04:56:03 jason Exp $
d75 1
d77 1
a77 1
attach sbus at mainbus, iommu
d303 3
@


1.27
log
@led driver support for 4/[1236]00 machines
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.26 1999/02/01 13:09:51 jason Exp $
d206 2
a207 2
#attach isp at sbus with isp_sbus
#file	arch/sparc/dev/isp_sbus.c	isp_sbus
@


1.26
log
@missed in spif driver addition; spotted by fries
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.25 1998/12/29 09:33:35 deraadt Exp $
d53 1
a53 1
attach led at mainbus
@


1.25
log
@first cut at a bpp driver; mailed to me by downsj eons ago
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.24 1998/10/19 05:43:30 jason Exp $
d290 8
@


1.24
log
@qec+qe support & OpenBSD tags for everyone
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.23 1998/09/28 01:23:38 mickey Exp $
d290 4
@


1.23
log
@introduce attribute 'ifmedia' which means 'this particulariface
supports if_edia stuff so include correspondent MI support'.
reviewed/additions by jason@@, he said "there might be more of 'em",
but i'd say, there can be only one!
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.22 1998/09/10 17:34:31 jason Exp $
d116 3
a118 3
device	me {}
attach	me at qec
file	arch/sparc/dev/me.c		me
@


1.22
log
@Modified to use mii layer for hme
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.21 1998/09/01 17:36:58 jason Exp $
d112 1
a112 1
device	be {}
d121 1
a121 1
device hme: ifnet, ether, mii
@


1.21
log
@o Removed dependence on stp2002 (not sharable with qec+be)
o Added collision counters
o Should work on sun4c
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.20 1998/08/26 05:00:49 jason Exp $
d79 4
d121 1
a121 1
device hme
@


1.20
log
@First cut at qec+be support.  Works in 10mbit/half duplex mode.
Removed qec+be dependency on stp2002.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.19 1998/07/17 21:33:05 jason Exp $
a119 1
file	arch/sparc/dev/stp2002base.c	hme
@


1.19
log
@Moved most of the DMA functions to a chipset driver so that
'hme' and 'be' can share the same logic.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.18 1998/07/10 19:20:11 jason Exp $
d120 1
a120 2

file	arch/sparc/dev/stp2002base.c	hme | be
@


1.18
log
@Add build support for hme
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.17 1998/07/04 01:27:53 deraadt Exp $
d116 7
a130 5

# HappyMeal (hme) ethernet
device hme
attach hme at sbus
file	arch/sparc/dev/hme.c		hme
@


1.17
log
@add support for qec; same basic thing as lebuffer
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.16 1998/05/20 19:29:15 deraadt Exp $
d124 5
@


1.16
log
@magma serial driver; plunky@@skate.demon.co.uk
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.15 1998/03/25 07:54:53 jason Exp $
d103 12
@


1.15
log
@Driver for the 8 leds on the back of sun4 machines.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.14 1997/09/17 06:47:05 downsj Exp $
d260 9
@


1.14
log
@NETBSD_CURRENT_970916.  Lot's just ID changes, since changes don't apply to
us.  Includes some pmap changes, for which I don't have the original commit
message(s) handy.
@
text
@d1 1
a1 1
#	$OpenBSD: files.sparc,v 1.13 1997/08/25 08:38:43 downsj Exp $
d51 4
@


1.13
log
@Implement LED blinking as a run-time configurable option via the sysctl
machdep.led_blink.

Rename auxreg.h because we need config to generate one now.
@
text
@d1 2
a2 2
#	$OpenBSD: files.sparc,v 1.12 1997/08/08 08:24:35 downsj Exp $
#	$NetBSD: files.sparc,v 1.40 1997/07/07 21:53:43 pk Exp $
d104 2
a105 2
device audio
attach audio at mainbus, obio, sbus
d214 1
a214 1
file	arch/sparc/sparc/kgdb_stub.c
d233 1
a233 1
file	arch/sparc/sparc/db_interface.c	ddb
@


1.12
log
@Mostly sync to NetBSD-current 970804.

GENERIC currently compiles and runs; some devices (isp) are not complete and
not yet enabled.
@
text
@d1 1
a1 1
#	$OpenBSD$
d33 1
a33 1
file	arch/sparc/sparc/auxreg.c
@


1.11
log
@make powerdown conditional
@
text
@d1 2
a2 1
#	$NetBSD: files.sparc,v 1.23 1996/05/21 19:06:26 pk Exp $
d17 8
d26 1
a26 1
attach vmel at mainbus
d28 2
a29 6
attach vmes at mainbus
file	arch/sparc/dev/obio.c		obio | vmel | vmes

device audio
attach audio at mainbus, obio
file	arch/sparc/dev/amd7930.c		audio
a70 4
device iommu {}
attach iommu at mainbus
file	arch/sparc/sparc/iommu.c		iommu

d96 3
d100 1
a100 1
device esp: scsi
d104 5
d136 8
d147 1
a147 1
attach le at sbus, ledma, obio
d174 10
d186 5
a191 1
file	arch/sparc/dev/event.c
a208 1
file	arch/sparc/sparc/amd7930intr.s	audio
d211 1
@


1.10
log
@add rd support
@
text
@d45 1
a45 1
file	arch/sparc/dev/power.c			power
@


1.9
log
@16 partitions
@
text
@d84 6
@


1.8
log
@netbsd port, now we merge our changes back in
@
text
@d7 1
a7 1
maxpartitions 8
@


1.7
log
@add in "en" ATM device
@
text
@d1 1
a1 1
#	$NetBSD: files.sparc,v 1.12 1995/10/05 00:21:35 pk Exp $
d6 1
a6 1
# maxpartitions must be first item in files.${ARCH}
d11 2
a12 1
device mainbus at root {}
d14 11
a24 4
device obio at mainbus { [addr = -1], [level = -1] }
device vmel at mainbus { [addr = -1], [level = -1], [vect = -1] }
device vmes at mainbus { [addr = -1], [level = -1], [vect = -1] }
file	arch/sparc/dev/obio.c		obio vmel vmes
d26 6
a31 2
device pfour at obio {}
file  arch/sparc/dev/pfour.c		pfour needs-count
d33 2
a34 3
device audio at mainbus
file	arch/sparc/dev/amd7930.c	audio needs-flag
file	arch/sparc/sparc/amd7930intr.s	audio
d36 2
a37 2
device auxreg at mainbus
file	arch/sparc/sparc/auxreg.c
d39 2
a40 4
device clock at mainbus, obio
device oclock at obio
device timer at mainbus, obio
device eeprom at obio
d43 6
a48 1
device cpu at mainbus
d51 2
a52 1
device memreg at mainbus, obio
d55 23
a77 11
device zs at mainbus, obio
file	arch/sparc/dev/zs.c		zs needs-count

device fdc at mainbus {}
device fd at fdc: disk
file	arch/sparc/dev/fd.c		fd needs-flag
file	arch/sparc/sparc/bsd_fdintr.s	fd

device sbus at mainbus { slot = -1, offset = -1 }
file	arch/sparc/dev/sbus.c		sbus

d84 5
a88 4
device dma at sbus, obio
device espdma at sbus	{ slot = -1, offset = -1 }
device ledma at sbus	{ slot = -1, offset = -1 }
file	arch/sparc/dev/dma.c		dma espdma ledma needs-flag
d90 2
a91 1
device esp at sbus, espdma, obio: scsi
d94 5
a98 1
device bwtwo at sbus, obio, vmes, vmel, pfour
d101 2
a102 1
device cgtwo at vmes
d105 2
a106 1
device cgthree at sbus
d109 2
a110 1
device cgfour at pfour
d113 2
a114 1
device cgsix at sbus, pfour
d117 2
a118 1
device cgeight at pfour
d121 1
a121 1
file	arch/sparc/dev/bt_subr.c	cgsix cgthree cgfour
d123 2
a124 1
device le at sbus, ledma, obio: ifnet, ether
d127 2
a128 1
device ie at obio, vmes, vmel: ifnet, ether
d131 4
a134 2
device	xdc at vmel {drive = -1}
device	xd at xdc: disk
d136 1
a136 1
major	{ xd = 10 }
d138 4
a141 2
device	xyc at vmes {drive = -1}
device	xy at xyc: disk
d143 1
a143 1
major	{ xy = 3 }
d145 5
a149 9
device	si at vmes: scsi, ncr5380sbc
device	sw at obio: scsi, ncr5380sbc
file	arch/sparc/dev/si.c		si sw

# ENI ATM driver
device  en: atm, ifnet
attach  en at sbus with en_sbus
file    arch/sparc/dev/if_en_sbus.c     en
file    dev/ic/midway.c                 en
d169 2
d172 1
d186 3
d194 3
a196 1
file	arch/sparc/sparc/db_interface.c ddb
d200 3
d205 4
d212 1
d216 3
a218 1
file	arch/sparc/sparc/sunos_machdep.c compat_sunos
@


1.6
log
@mi 5380 driver
@
text
@d105 6
@


1.5
log
@cgtwo only exists on vmes; and thus only sun4 (we will deal with
the sun4/600 later)
@
text
@d101 3
a103 3
device	si at vmes: scsi
device	sw at obio: scsi
file	arch/sparc/dev/si.c		si sw needs-flag
@


1.4
log
@pfour needs-count for bwtwo
@
text
@d68 1
a68 1
device cgtwo at sbus, obio, vmes
@


1.3
log
@+ bwtwo0 at pfour0
@
text
@d19 1
a19 1
file  arch/sparc/dev/pfour.c		pfour
@


1.2
log
@add pfour, cgfour, cgeight; pretty up
@
text
@d65 1
a65 1
device bwtwo at sbus, obio, vmes, vmel
@


1.1
log
@Initial revision
@
text
@d6 1
a6 1
# maxpartitions must be first item in files.${ARCH}.newconf
d18 3
d22 2
a23 1
file	arch/sparc/dev/amd7930.c		audio needs-flag
d41 1
a41 1
file	arch/sparc/dev/zs.c			zs needs-count
d45 2
a46 2
file	arch/sparc/dev/fd.c			fd needs-flag
file	arch/sparc/sparc/bsd_fdintr.s		fd
a50 3
#
# Machine-independent SCSI drivers
#
d63 1
a63 1
file	arch/sparc/dev/esp.c		esp needs-flag
d74 4
a77 1
device cgsix at sbus
d80 4
a83 1
file	arch/sparc/dev/bt_subr.c	cgsix cgthree
d94 1
a94 1
major	{xd = 10}
d99 1
a99 1
major	{xy = 3}
a122 2
# N.B.: optimizer breaks pmap.c and/or cache.c somehow -- have not
# identified the exact problem yet.  NOOPT_C suffices for now.
a123 1
file	arch/sparc/sparc/amd7930intr.s	audio
a136 3
# the following overrides the generic "sys_process.c"
# commented out by deraadt
#file	arch/sparc/sparc/sys_process.c
d142 1
a142 3
file	kludge_for_in_proto.c		hy needs-flag

file	arch/sparc/sparc/db_interface.c	ddb
a145 3
#
# Raster Console
#
a147 4
#
# Compatibility modules
#

a150 1
file	arch/sparc/sparc/sunos_machdep.c compat_sunos
d154 1
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
