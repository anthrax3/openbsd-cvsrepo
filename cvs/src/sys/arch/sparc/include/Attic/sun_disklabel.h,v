head	1.10;
access;
symbols
	OPENBSD_3_8:1.9.0.10
	OPENBSD_3_8_BASE:1.9
	OPENBSD_3_7:1.9.0.8
	OPENBSD_3_7_BASE:1.9
	OPENBSD_3_6:1.9.0.6
	OPENBSD_3_6_BASE:1.9
	SMP_SYNC_A:1.9
	SMP_SYNC_B:1.9
	OPENBSD_3_5:1.9.0.4
	OPENBSD_3_5_BASE:1.9
	OPENBSD_3_4:1.9.0.2
	OPENBSD_3_4_BASE:1.9
	UBC_SYNC_A:1.8
	OPENBSD_3_3:1.8.0.6
	OPENBSD_3_3_BASE:1.8
	OPENBSD_3_2:1.8.0.4
	OPENBSD_3_2_BASE:1.8
	OPENBSD_3_1:1.8.0.2
	OPENBSD_3_1_BASE:1.8
	UBC_SYNC_B:1.8
	UBC:1.6.0.24
	UBC_BASE:1.6
	OPENBSD_3_0:1.6.0.22
	OPENBSD_3_0_BASE:1.6
	OPENBSD_2_9_BASE:1.6
	OPENBSD_2_9:1.6.0.20
	OPENBSD_2_8:1.6.0.18
	OPENBSD_2_8_BASE:1.6
	OPENBSD_2_7:1.6.0.16
	OPENBSD_2_7_BASE:1.6
	SMP:1.6.0.14
	SMP_BASE:1.6
	kame_19991208:1.6
	OPENBSD_2_6:1.6.0.12
	OPENBSD_2_6_BASE:1.6
	OPENBSD_2_5:1.6.0.10
	OPENBSD_2_5_BASE:1.6
	OPENBSD_2_4:1.6.0.8
	OPENBSD_2_4_BASE:1.6
	OPENBSD_2_3:1.6.0.6
	OPENBSD_2_3_BASE:1.6
	OPENBSD_2_2:1.6.0.4
	OPENBSD_2_2_BASE:1.6
	OPENBSD_2_1:1.6.0.2
	OPENBSD_2_1_BASE:1.6
	OPENBSD_2_0:1.5.0.2
	OPENBSD_2_0_BASE:1.5
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@ * @;


1.10
date	2006.01.20.00.20.38;	author miod;	state dead;
branches;
next	1.9;

1.9
date	2003.06.02.23.27.54;	author millert;	state Exp;
branches;
next	1.8;

1.8
date	2002.03.14.01.26.44;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	2002.01.23.19.16.09;	author fgsch;	state Exp;
branches;
next	1.6;

1.6
date	96.12.11.13.36.11;	author deraadt;	state Exp;
branches
	1.6.14.1
	1.6.24.1;
next	1.5;

1.5
date	96.09.12.04.33.28;	author downsj;	state Exp;
branches;
next	1.4;

1.4
date	96.08.11.05.34.57;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	96.01.12.20.20.59;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	95.10.19.12.53.21;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.51.44;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.51.44;	author deraadt;	state Exp;
branches;
next	;

1.6.14.1
date	2002.03.06.02.04.46;	author niklas;	state Exp;
branches;
next	1.6.14.2;

1.6.14.2
date	2002.03.28.10.57.10;	author niklas;	state Exp;
branches;
next	1.6.14.3;

1.6.14.3
date	2003.06.07.11.14.43;	author ho;	state Exp;
branches;
next	;

1.6.24.1
date	2002.01.31.22.55.22;	author niklas;	state Exp;
branches;
next	1.6.24.2;

1.6.24.2
date	2002.06.11.03.38.16;	author art;	state Exp;
branches;
next	;


desc
@@


1.10
log
@Use <dev/sun/disklabel.h> instead of similar <machine/sun_disklabel.h> on
sparc and remove unused sun_dkioctl(). No functional change.
@
text
@/*	$OpenBSD: sun_disklabel.h,v 1.9 2003/06/02 23:27:54 millert Exp $	*/
/*	$NetBSD: sun_disklabel.h,v 1.6 1996/01/07 22:03:09 thorpej Exp $ */

/*
 * Copyright (c) 1992, 1993
 *	The Regents of the University of California.  All rights reserved.
 *
 * This software was developed by the Computer Systems Engineering group
 * at Lawrence Berkeley Laboratory under DARPA contract BG 91-66 and
 * contributed to Berkeley.
 *
 * All advertising materials mentioning features or use of this software
 * must display the following acknowledgement:
 *	This product includes software developed by the University of
 *	California, Lawrence Berkeley Laboratory.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. Neither the name of the University nor the names of its contributors
 *    may be used to endorse or promote products derived from this software
 *    without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
 * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 *
 *	@@(#)sun_disklabel.h	8.1 (Berkeley) 6/11/93
 */

/*
 * SunOS disk label layout (only relevant portions discovered here).
 */

#define	SUN_DKMAGIC	55998

/* These are the guys that Sun's dkinfo needs... */
#define DKIOCGGEOM	_IOR('d', 2, struct sun_dkgeom)	/* geometry info */
#define DKIOCINFO	_IOR('d', 8, struct sun_dkctlr)	/* controller info */
#define DKIOCGPART	_IOR('d', 4, struct sun_dkpart)	/* partition info */

/* geometry info */
struct sun_dkgeom {
	u_short	sdkc_ncylinders;	/* data cylinders */
	u_short	sdkc_acylinders;	/* alternate cylinders */
	u_short	sdkc_xxx1;
	u_short	sdkc_ntracks;		/* tracks per cylinder */
	u_short	sdkc_xxx2;
	u_short	sdkc_nsectors;		/* sectors per track */
	u_short	sdkc_interleave;	/* interleave factor */
	u_short	sdkc_xxx3;
	u_short	sdkc_xxx4;
	u_short	sdkc_sparespercyl;	/* spare sectors per cylinder */
	u_short	sdkc_rpm;		/* rotational speed */
	u_short	sdkc_pcylinders;	/* physical cylinders */
	u_short	sdkc_xxx5[7];
};

/* controller info */
struct sun_dkctlr {
	int	sdkc_addr;		/* controller address */
	short	sdkc_unit;		/* unit (slave) address */
	short	sdkc_type;		/* controller type */
	short	sdkc_flags;		/* flags */
};

/* partition info */
struct sun_dkpart {
	long	sdkp_cyloffset;		/* starting cylinder */
	long	sdkp_nsectors;		/* number of sectors */
};

#define SUNXPART 8
#define SL_XPMAG (0x199d1fe2+SUNXPART)

struct sun_disklabel {			/* total size = 512 bytes */
	char	sl_text[128];
	u_long	sl_xpsum;		/* additive cksum, [sl_xpmag,sl_xxx1) */
	u_long	sl_xpmag;		/* "extended" magic number */
	struct sun_dkpart sl_xpart[SUNXPART];	/* "extended" partitions, i through p */
	char	sl_xxx1[292-8-(8*SUNXPART)];	/* [292] including sl_x* */
	u_short sl_rpm;			/* rotational speed */
	u_short	sl_pcylinders;		/* number of physical cyls */
	u_short sl_sparespercyl;	/* spare sectors per cylinder */
	char	sl_xxx3[4];
	u_short sl_interleave;		/* interleave factor */
	u_short	sl_ncylinders;		/* data cylinders */
	u_short	sl_acylinders;		/* alternate cylinders */
	u_short	sl_ntracks;		/* tracks per cylinder */
	u_short	sl_nsectors;		/* sectors per track */
	char	sl_xxx4[4];
	struct sun_dkpart sl_part[8];	/* partition layout */
	u_short	sl_magic;		/* == SUN_DKMAGIC */
	u_short	sl_cksum;		/* xor checksum of all shorts */
};

#define SUN_LABELOFFSET	128

#ifdef _KERNEL
/* reads sun label in sector at [cp..cp+511] and sets *lp to BSD label */
int	sun_disklabel(caddr_t, struct disklabel *); /* true on success */

/* compatibility dk ioctl's */
int	sun_dkioctl(struct disk *, u_long, caddr_t, int);
#endif
@


1.9
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
/*	$OpenBSD: sun_disklabel.h,v 1.8 2002/03/14 01:26:44 millert Exp $	*/
@


1.8
log
@First round of __P removal in sys
@
text
@d1 1
a1 1
/*	$OpenBSD: sun_disklabel.h,v 1.7 2002/01/23 19:16:09 fgsch Exp $	*/
d25 1
a25 5
 * 3. All advertising materials mentioning features or use of this software
 *    must display the following acknowledgement:
 *	This product includes software developed by the University of
 *	California, Berkeley and its contributors.
 * 4. Neither the name of the University nor the names of its contributors
@


1.7
log
@compatability -> compatibility.
@
text
@d1 1
a1 1
/*	$OpenBSD: sun_disklabel.h,v 1.6 1996/12/11 13:36:11 deraadt Exp $	*/
d118 1
a118 1
int	sun_disklabel __P((caddr_t, struct disklabel *)); /* true on success */
d121 1
a121 1
int	sun_dkioctl __P((struct disk *, u_long, caddr_t, int));
@


1.6
log
@SUNXPART always; also one case of MAXPARTITIONS not being there
@
text
@d1 1
a1 1
/*	$OpenBSD: sun_disklabel.h,v 1.5 1996/09/12 04:33:28 downsj Exp $	*/
d120 1
a120 1
/* compatability dk ioctl's */
@


1.6.14.1
log
@Merge in trunk
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
d120 1
a120 1
/* compatibility dk ioctl's */
@


1.6.14.2
log
@Merge in -current from about a week ago
@
text
@d118 1
a118 1
int	sun_disklabel(caddr_t, struct disklabel *); /* true on success */
d121 1
a121 1
int	sun_dkioctl(struct disk *, u_long, caddr_t, int);
@


1.6.14.3
log
@Sync SMP branch to -current
@
text
@d1 1
a1 1
/*	$OpenBSD: sun_disklabel.h,v 1.6.14.2 2002/03/28 10:57:10 niklas Exp $	*/
d25 5
a29 1
 * 3. Neither the name of the University nor the names of its contributors
@


1.6.24.1
log
@Merge in -current, builds on i386, otherwise untested
@
text
@d1 1
a1 1
/*	$OpenBSD: sun_disklabel.h,v 1.7 2002/01/23 19:16:09 fgsch Exp $	*/
d120 1
a120 1
/* compatibility dk ioctl's */
@


1.6.24.2
log
@Sync UBC branch to -current
@
text
@d1 1
a1 1
/*	$OpenBSD: sun_disklabel.h,v 1.6.24.1 2002/01/31 22:55:22 niklas Exp $	*/
d118 1
a118 1
int	sun_disklabel(caddr_t, struct disklabel *); /* true on success */
d121 1
a121 1
int	sun_dkioctl(struct disk *, u_long, caddr_t, int);
@


1.5
log
@Add 16 partition support to the SPARC.  From NetBSD PR#2675, by der Mouse,
<mouse@@Collatz.McRCIM.McGill.EDU>.
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
d90 3
a94 2
#if MAXPARTITIONS > 8
#define SUNXPART (MAXPARTITIONS-8)
a96 1
#define SL_XPMAG (0x199d1fe2+SUNXPART)
a98 4
#else
#define SUNXPART 0
	char	sl_xxx1[292];
#endif
@


1.4
log
@netbsd port, now we merge our changes back in
@
text
@d1 1
d92 9
d102 1
@


1.3
log
@from netbsd;
New generic disk framework.  Highlights:
New metrics handling.  Metrics are now kept in the new `struct disk'.
Busy time is now stored as a timeval, and transfer count in bytes.
Storage for disklabels is now dynamically allocated, so that the size
of the disk structure is not machine-dependent.
Several new functions for attaching and detaching disks, and handling
metrics calculation.
Old-style instrumentation is still supported in drivers that did it
before.  However, old-style instrumentation is being deprecated, and
will go away once the userland utilities are updated for the new
framework.
For usage and architectural details, see the forthcoming disk(9)
manual page.
@
text
@d54 3
a56 3
#define SUNOS_DKIOCGGEOM	_IOR('d', 2, struct sun_dkgeom)	/* geometry info */
#define SUNOS_DKIOCINFO		_IOR('d', 8, struct sun_dkctlr)	/* controller info */
#define SUNOS_DKIOCGPART	_IOR('d', 4, struct sun_dkpart)	/* partition info */
d111 1
a111 1
int	sunos_disklabel __P((caddr_t, struct disklabel *)); /* true on success */
d114 1
a114 1
int	sunos_dkioctl __P((struct disk *, u_long, caddr_t, int));
@


1.2
log
@sun_* -> sunos_*
@
text
@d1 1
a1 1
/*	$NetBSD: sun_disklabel.h,v 1.4 1995/03/28 18:20:12 jtc Exp $ */
d110 5
a114 1
int	sunos_dkioctl __P((struct dkdevice *, u_long, caddr_t, int));
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
/*	$NetBSD: sun_disklabel.h,v 1.5 1995/06/26 22:09:47 pk Exp $ */
d54 3
a56 3
#define DKIOCGGEOM	_IOR('d', 2, struct sun_dkgeom)	/* geometry info */
#define DKIOCINFO	_IOR('d', 8, struct sun_dkctlr)	/* controller info */
#define DKIOCGPART	_IOR('d', 4, struct sun_dkpart)	/* partition info */
d110 1
a110 5
/* reads sun label in sector at [cp..cp+511] and sets *lp to BSD label */
int	sun_disklabel __P((caddr_t, struct disklabel *)); /* true on success */

/* compatability dk ioctl's */
int	sun_dkioctl __P((struct dkdevice *, u_long, caddr_t, int));
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
