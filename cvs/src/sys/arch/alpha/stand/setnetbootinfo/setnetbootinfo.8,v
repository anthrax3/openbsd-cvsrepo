head	1.8;
access;
symbols
	OPENBSD_6_2_BASE:1.8
	OPENBSD_6_1:1.8.0.36
	OPENBSD_6_1_BASE:1.8
	OPENBSD_6_0:1.8.0.32
	OPENBSD_6_0_BASE:1.8
	OPENBSD_5_9:1.8.0.28
	OPENBSD_5_9_BASE:1.8
	OPENBSD_5_8:1.8.0.30
	OPENBSD_5_8_BASE:1.8
	OPENBSD_5_7:1.8.0.22
	OPENBSD_5_7_BASE:1.8
	OPENBSD_5_6:1.8.0.26
	OPENBSD_5_6_BASE:1.8
	OPENBSD_5_5:1.8.0.24
	OPENBSD_5_5_BASE:1.8
	OPENBSD_5_4:1.8.0.20
	OPENBSD_5_4_BASE:1.8
	OPENBSD_5_3:1.8.0.18
	OPENBSD_5_3_BASE:1.8
	OPENBSD_5_2:1.8.0.16
	OPENBSD_5_2_BASE:1.8
	OPENBSD_5_1_BASE:1.8
	OPENBSD_5_1:1.8.0.14
	OPENBSD_5_0:1.8.0.12
	OPENBSD_5_0_BASE:1.8
	OPENBSD_4_9:1.8.0.10
	OPENBSD_4_9_BASE:1.8
	OPENBSD_4_8:1.8.0.8
	OPENBSD_4_8_BASE:1.8
	OPENBSD_4_7:1.8.0.4
	OPENBSD_4_7_BASE:1.8
	OPENBSD_4_6:1.8.0.6
	OPENBSD_4_6_BASE:1.8
	OPENBSD_4_5:1.8.0.2
	OPENBSD_4_5_BASE:1.8
	OPENBSD_4_4:1.7.0.6
	OPENBSD_4_4_BASE:1.7
	OPENBSD_4_3:1.7.0.4
	OPENBSD_4_3_BASE:1.7
	OPENBSD_4_2:1.7.0.2
	OPENBSD_4_2_BASE:1.7
	OPENBSD_4_1:1.6.0.12
	OPENBSD_4_1_BASE:1.6
	OPENBSD_4_0:1.6.0.10
	OPENBSD_4_0_BASE:1.6
	OPENBSD_3_9:1.6.0.8
	OPENBSD_3_9_BASE:1.6
	OPENBSD_3_8:1.6.0.6
	OPENBSD_3_8_BASE:1.6
	OPENBSD_3_7:1.6.0.4
	OPENBSD_3_7_BASE:1.6
	OPENBSD_3_6:1.6.0.2
	OPENBSD_3_6_BASE:1.6
	SMP_SYNC_A:1.6
	SMP_SYNC_B:1.6
	OPENBSD_3_5:1.5.0.4
	OPENBSD_3_5_BASE:1.5
	OPENBSD_3_4:1.5.0.2
	OPENBSD_3_4_BASE:1.5
	UBC_SYNC_A:1.4
	OPENBSD_3_3:1.4.0.18
	OPENBSD_3_3_BASE:1.4
	OPENBSD_3_2:1.4.0.16
	OPENBSD_3_2_BASE:1.4
	OPENBSD_3_1:1.4.0.14
	OPENBSD_3_1_BASE:1.4
	UBC_SYNC_B:1.4
	UBC:1.4.0.12
	UBC_BASE:1.4
	OPENBSD_3_0:1.4.0.10
	OPENBSD_3_0_BASE:1.4
	OPENBSD_2_9:1.4.0.8
	OPENBSD_2_9_BASE:1.4
	OPENBSD_2_8:1.4.0.6
	OPENBSD_2_8_BASE:1.4
	OPENBSD_2_7:1.4.0.4
	OPENBSD_2_7_BASE:1.4
	SMP:1.4.0.2
	SMP_BASE:1.4
	kame_19991208:1.3
	OPENBSD_2_6:1.3.0.2
	OPENBSD_2_6_BASE:1.3
	OPENBSD_2_5:1.1.0.10
	OPENBSD_2_5_BASE:1.1
	OPENBSD_2_4:1.1.0.8
	OPENBSD_2_4_BASE:1.1
	OPENBSD_2_3:1.1.0.6
	OPENBSD_2_3_BASE:1.1
	OPENBSD_2_2:1.1.0.4
	OPENBSD_2_2_BASE:1.1
	OPENBSD_2_1:1.1.0.2
	OPENBSD_2_1_BASE:1.1;
locks; strict;
comment	@# @;


1.8
date	2009.02.01.10.48.57;	author sobrado;	state Exp;
branches;
next	1.7;

1.7
date	2007.05.31.19.20.02;	author jmc;	state Exp;
branches;
next	1.6;

1.6
date	2004.05.25.22.27.44;	author jmc;	state Exp;
branches;
next	1.5;

1.5
date	2003.06.06.21.45.33;	author jmc;	state Exp;
branches;
next	1.4;

1.4
date	2000.01.03.20.04.28;	author pjanzen;	state Exp;
branches
	1.4.2.1;
next	1.3;

1.3
date	99.07.08.22.56.00;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	99.05.23.14.11.29;	author aaron;	state Exp;
branches;
next	1.1;

1.1
date	97.05.05.06.02.03;	author millert;	state Exp;
branches;
next	;

1.4.2.1
date	2003.06.07.11.11.34;	author ho;	state Exp;
branches;
next	1.4.2.2;

1.4.2.2
date	2004.06.05.23.10.43;	author niklas;	state Exp;
branches;
next	;


desc
@@


1.8
log
@"Ethernet" is a family of networking technologies developed at Xerox PARC,
not a generic name.  we must use the right capitalization for this term.

ok jmc@@
@
text
@.\"	$OpenBSD: setnetbootinfo.8,v 1.7 2007/05/31 19:20:02 jmc Exp $
.\"	$NetBSD: setnetbootinfo.8,v 1.2 1997/04/06 08:41:36 cgd Exp $
.\"
.\" Copyright (c) 1997 Christopher G. Demetriou.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"      This product includes software developed by Christopher G. Demetriou
.\"      for the NetBSD Project.
.\" 3. The name of the author may not be used to endorse or promote products
.\"    derived from this software without specific prior written permission
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.Dd $Mdocdate: May 31 2007 $
.Dt SETNETBOOTINFO 8 alpha
.Os
.Sh NAME
.Nm setnetbootinfo
.Nd configure network bootstrap program
.Sh SYNOPSIS
.Nm setnetbootinfo
.Op Fl vf
.Op Fl o Ar infile
.Oo
.Fl a Ar ether-address | Fl h Ar ether-host
.Oc
.Ar netboot
.Nm setnetbootinfo
.Op Fl v
.Fl u o Ar outfile Ar infile
.Sh DESCRIPTION
The
.Nm setnetbootinfo
utility configures the OpenBSD/alpha network bootstrap program so
that it can be used to bootstrap systems with old firmware revisions.
.Pp
The OpenBSD/alpha network bootstrap program needs to have the Ethernet
address of the interface being used to boot the system available when
querying other hosts on the network for bootstrapping information.
Alpha systems with old firmware revisions provide no way for
network bootstrap programs to determine the Ethernet address of
the interface that they are booting from, and so the OpenBSD/alpha
network bootstrap program must find that information in another way.
(Newer firmware revisions include the Ethernet address in the name of
the device that is being booted from.)
The
.Nm
utility encodes an Ethernet address (and other information) directly
into the network bootstrap program.
.Pp
The options recognized by
.Nm
are as follows:
.Bl -tag -width flag
.It Fl a Ar ether-address
Encode the given Ethernet address into the network bootstrap program.
(This option and the
.Fl h
option are mutually exclusive.)
.It Fl f
Force the address information being encoded in the bootstrap
program to be used regardless of whether or not the bootstrap
program can get address information from the booting system's
firmware.
.It Fl h Ar ether-host
Encode the Ethernet address of the specified host into the network
bootstrap program.
The host's name is translated to an Ethernet address using the
.Xr ether_hostton 3
function.
(This option and the
.Fl a
option are mutually exclusive.)
.It Fl o Ar outfile
Output the resulting bootstrap program into the file named by
.Ar outfile ,
replacing it if it already exists.
If the
.Fl o
flag is not specified, the output file name will be
the name of the input bootstrap program concatenated with a
period and the digits of the Ethernet address being encoded.
For instance, if the input file is named
.Pa /usr/mdec/netboot
and is being configured to encode the Ethernet address
.Li 08:00:2b:bd:5d:fd ,
then the default output file name would be
.Pa /usr/mdec/netboot.08002bbd5dfd .
It is safe to set the output file name to be the same as the
input file name; the input file is read in its entirety before
the output file is modified.
.It Fl u
Remove configuration information from the specified network
bootstrap program.
If this option is used, an output file name must be specified with the
.Fl o
option, and neither the
.Fl a
or the
.Fl h
options may be specified.
.It Fl v
Verbose mode.
.El
.Sh SEE ALSO
.Xr dhcpd 8
.Sh HISTORY
The alpha
.Nm
command first appeared in
.Nx 1.2b .
@


1.7
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: setnetbootinfo.8,v 1.6 2004/05/25 22:27:44 jmc Exp $
d32 1
a32 1
.Dd $Mdocdate$
d55 1
a55 1
The OpenBSD/alpha network bootstrap program needs to have the ethernet
d59 1
a59 1
network bootstrap programs to determine the ethernet address of
d62 1
a62 1
(Newer firmware revisions include the ethernet address in the name of
d66 1
a66 1
utility encodes an ethernet address (and other information) directly
d74 1
a74 1
Encode the given ethernet address into the network bootstrap program.
d84 1
a84 1
Encode the ethernet address of the specified host into the network
d86 1
a86 1
The host's name is translated to an ethernet address using the
d100 1
a100 1
period and the digits of the ethernet address being encoded.
d103 1
a103 1
and is being configured to encode the ethernet address
@


1.6
log
@replace obsolete references to bootpd(8) and bootptab(5) w/ dhcpd(8);
from jared yanovich;
@
text
@d1 1
a1 1
.\"	$OpenBSD: setnetbootinfo.8,v 1.5 2003/06/06 21:45:33 jmc Exp $
d32 1
a32 1
.Dd January 20, 1997
@


1.5
log
@- section reorder
- new sentence, new line
- some macro fixes
@
text
@d1 1
a1 1
.\"	$OpenBSD: setnetbootinfo.8,v 1.4 2000/01/03 20:04:28 pjanzen Exp $
d124 1
a124 1
.Xr bootpd 8
@


1.4
log
@.Sh "SEE ALSO" -> .Sh SEE ALSO
@
text
@d1 1
a1 1
.\"	$OpenBSD: setnetbootinfo.8,v 1.3 1999/07/08 22:56:00 deraadt Exp $
d85 2
a86 2
bootstrap program.  The host's name is translated to an ethernet
address using the
d95 2
a96 1
replacing it if it already exists.  If the
d112 2
a113 2
bootstrap program.  If this option is used, an output file name must be
specified with the
@


1.4.2.1
log
@Sync SMP branch to -current
@
text
@d1 1
a1 1
.\"	$OpenBSD: setnetbootinfo.8,v 1.4 2000/01/03 20:04:28 pjanzen Exp $
d85 2
a86 2
bootstrap program.
The host's name is translated to an ethernet address using the
d95 1
a95 2
replacing it if it already exists.
If the
d111 2
a112 2
bootstrap program.
If this option is used, an output file name must be specified with the
@


1.4.2.2
log
@Merge with the trunk
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d124 1
a124 1
.Xr dhcpd 8
@


1.3
log
@flesh out .Dt
@
text
@d1 1
a1 1
.\"	$OpenBSD: setnetbootinfo.8,v 1.2 1999/05/23 14:11:29 aaron Exp $
d122 1
a122 1
.Sh "SEE ALSO"
@


1.2
log
@remove argument from .Os macros so value in /usr/share/tmac/mdoc/doc-common
is used instead; kwesterback@@home.com
@
text
@d1 1
a1 1
.\"	$OpenBSD: setnetbootinfo.8,v 1.1 1997/05/05 06:02:03 millert Exp $
d33 1
a33 1
.Dt SETNETBOOTINFO 8
@


1.1
log
@Updates from NetBSD (cgd):
 - seriously clean up makefiles.  use libsa/libkern/libz as appropriate,
   and don't build the various sources into objs locally by specifying
   them directly in the Makefiles.
 - move the secondary bootstrap down (to 0x20004000), and add a HEAP_LIMIT
   so that we don't exhaust our bootstrap address space (when using the new,
   not yet checked in, memory allocator).
 - clean up installboot, deal with secondary bootstrap programs not on
   'a' partition or 'a' partition not starting at 0.
 - add padding to structures in bbinfo.h for future expansion.  Add a
   netbbinfo structure to allow netboot information to be hard-coded in
   network boot blocks, so that they can be made to work even on systems
   with firmware which doesn't support the new "ethernet address in boot
   device" convention.
 - move the sync() calls to the correct place in installboot.c
 - remove a kludge in disk.c which was breaking multiple opens/closes
   of the disk
 - allow netboot ethernet address to be hard-coded into binary so that
   machines with old firmware which doesn't pass it in the boot device
   can work.  Assume that if the ethernet address isn't passed in, it
   uses the old (dain-bramaged) 'read' interface works on my 3000/300LX.
 - Add setnetbootinfo, a program to hard code an ethernet address into
   a network boot.
 - move an 'int debug;' into boot.c (it was the only diff between boot.c and
   netboot.c), and nuke netboot.c (using boot.c instead for net boot blocks).
 - add cd9660 file system ops to the file system ops table in filesystem.c
 - if a file name is given (i.e. BOOTED_FILE) is set, boot only that file,
   but if not then try to boot "bsd", "bsd.bak", "bsd.old", and
   "obsd" (in that order) until one is found or until the list of names
   is exhausted.
 - add support for reading gzipped kernels.
 - use strerror() to print errors, rather than just printing error numbers
 - if no disk label exists, fake one up
 - slightly relax the block size checks in bootxx.c; they were a bit to paranoid

And local changes:
 - don't build a copy of libsa/libkern/libz for each boot prog,
   just build a single copy and use it for everything.
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d34 1
a34 1
.Os 
@

