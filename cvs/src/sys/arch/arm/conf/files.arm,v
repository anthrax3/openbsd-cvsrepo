head	1.45;
access;
symbols
	OPENBSD_6_1:1.44.0.4
	OPENBSD_6_1_BASE:1.44
	OPENBSD_6_0:1.38.0.2
	OPENBSD_6_0_BASE:1.38
	OPENBSD_5_9:1.28.0.2
	OPENBSD_5_9_BASE:1.28
	OPENBSD_5_8:1.28.0.4
	OPENBSD_5_8_BASE:1.28
	OPENBSD_5_7:1.27.0.2
	OPENBSD_5_7_BASE:1.27
	OPENBSD_5_6:1.25.0.8
	OPENBSD_5_6_BASE:1.25
	OPENBSD_5_5:1.25.0.6
	OPENBSD_5_5_BASE:1.25
	OPENBSD_5_4:1.25.0.2
	OPENBSD_5_4_BASE:1.25
	OPENBSD_5_3:1.21.0.6
	OPENBSD_5_3_BASE:1.21
	OPENBSD_5_2:1.21.0.4
	OPENBSD_5_2_BASE:1.21
	OPENBSD_5_1_BASE:1.21
	OPENBSD_5_1:1.21.0.2
	OPENBSD_5_0:1.16.0.4
	OPENBSD_5_0_BASE:1.16
	OPENBSD_4_9:1.16.0.2
	OPENBSD_4_9_BASE:1.16
	OPENBSD_4_8:1.15.0.6
	OPENBSD_4_8_BASE:1.15
	OPENBSD_4_7:1.15.0.2
	OPENBSD_4_7_BASE:1.15
	OPENBSD_4_6:1.15.0.4
	OPENBSD_4_6_BASE:1.15
	OPENBSD_4_5:1.14.0.2
	OPENBSD_4_5_BASE:1.14
	OPENBSD_4_4:1.13.0.2
	OPENBSD_4_4_BASE:1.13
	OPENBSD_4_3:1.12.0.2
	OPENBSD_4_3_BASE:1.12
	OPENBSD_4_2:1.11.0.6
	OPENBSD_4_2_BASE:1.11
	OPENBSD_4_1:1.11.0.4
	OPENBSD_4_1_BASE:1.11
	OPENBSD_4_0:1.11.0.2
	OPENBSD_4_0_BASE:1.11
	OPENBSD_3_9:1.8.0.4
	OPENBSD_3_9_BASE:1.8
	OPENBSD_3_8:1.8.0.2
	OPENBSD_3_8_BASE:1.8
	OPENBSD_3_7:1.5.0.2
	OPENBSD_3_7_BASE:1.5
	OPENBSD_3_6:1.2.0.2
	OPENBSD_3_6_BASE:1.2
	SMP_SYNC_A:1.1
	SMP_SYNC_B:1.1
	OPENBSD_3_5:1.1.0.4
	OPENBSD_3_5_BASE:1.1
	SMP:1.1.0.2;
locks; strict;
comment	@# @;


1.45
date	2017.04.27.22.41.46;	author kettenis;	state Exp;
branches;
next	1.44;
commitid	rgPwijkvyGZe1DHZ;

1.44
date	2017.01.21.10.58.15;	author reyk;	state Exp;
branches;
next	1.43;
commitid	swIiw8mtZ7Pk0W3t;

1.43
date	2017.01.02.00.51.18;	author jsg;	state Exp;
branches;
next	1.42;
commitid	adprazRZa4KO5WRh;

1.42
date	2016.09.24.12.32.30;	author kettenis;	state Exp;
branches;
next	1.41;
commitid	24LG1XZ6A5GeCxqh;

1.41
date	2016.09.18.17.50.25;	author kettenis;	state Exp;
branches;
next	1.40;
commitid	XjdKlUGzIxJpPpq7;

1.40
date	2016.08.14.11.30.54;	author jsg;	state Exp;
branches;
next	1.39;
commitid	3XHAPSr5dKOYN1hw;

1.39
date	2016.08.06.17.16.13;	author kettenis;	state Exp;
branches;
next	1.38;
commitid	f8M9x4OMN0qpsCVL;

1.38
date	2016.07.11.14.51.31;	author kettenis;	state Exp;
branches;
next	1.37;
commitid	WkkV8BpwXrk8sF5x;

1.37
date	2016.05.23.00.05.35;	author deraadt;	state Exp;
branches;
next	1.36;
commitid	Lca4at0KuB1ho5Xb;

1.36
date	2016.05.02.08.15.55;	author patrick;	state Exp;
branches;
next	1.35;
commitid	SxPSz6lxaCE62Tnc;

1.35
date	2016.03.22.23.28.02;	author patrick;	state Exp;
branches;
next	1.34;
commitid	bAxWaXK3mkjM56Iw;

1.34
date	2016.03.22.11.18.17;	author patrick;	state Exp;
branches;
next	1.33;
commitid	YjNMWFHczdMD8Xoi;

1.33
date	2016.03.19.09.51.24;	author patrick;	state Exp;
branches;
next	1.32;
commitid	E8GUcpv6nbDyd4Ml;

1.32
date	2016.03.19.09.47.54;	author patrick;	state Exp;
branches;
next	1.31;
commitid	WySdpoZsQMX20beB;

1.31
date	2016.03.19.09.36.56;	author patrick;	state Exp;
branches;
next	1.30;
commitid	PJBEdVboqiwjXPXy;

1.30
date	2016.03.18.13.16.02;	author jsg;	state Exp;
branches;
next	1.29;
commitid	RKG2cJTBtpcdjKgj;

1.29
date	2016.03.18.06.54.21;	author jsg;	state Exp;
branches;
next	1.28;
commitid	82aYg3LAWI4D5T1j;

1.28
date	2015.07.17.22.52.28;	author tedu;	state Exp;
branches;
next	1.27;
commitid	OOrGfFHYAn65M2qc;

1.27
date	2014.12.30.11.45.31;	author jsg;	state Exp;
branches;
next	1.26;
commitid	oxH7H1ywMUfI18nA;

1.26
date	2014.10.09.04.20.18;	author deraadt;	state Exp;
branches;
next	1.25;
commitid	21Z0JtA0B3ERMlcr;

1.25
date	2013.05.09.20.41.47;	author patrick;	state Exp;
branches;
next	1.24;

1.24
date	2013.05.01.00.16.26;	author patrick;	state Exp;
branches;
next	1.23;

1.23
date	2013.04.30.13.10.45;	author patrick;	state Exp;
branches;
next	1.22;

1.22
date	2013.03.27.17.33.13;	author patrick;	state Exp;
branches;
next	1.21;

1.21
date	2011.11.08.17.07.42;	author deraadt;	state Exp;
branches;
next	1.20;

1.20
date	2011.11.08.16.51.47;	author deraadt;	state Exp;
branches;
next	1.19;

1.19
date	2011.11.08.12.55.59;	author deraadt;	state Exp;
branches;
next	1.18;

1.18
date	2011.09.22.17.45.59;	author miod;	state Exp;
branches;
next	1.17;

1.17
date	2011.09.20.22.02.12;	author miod;	state Exp;
branches;
next	1.16;

1.16
date	2010.12.06.18.05.29;	author jasper;	state Exp;
branches;
next	1.15;

1.15
date	2009.05.08.02.57.32;	author drahn;	state Exp;
branches;
next	1.14;

1.14
date	2008.09.11.02.38.14;	author kevlo;	state Exp;
branches;
next	1.13;

1.13
date	2008.04.25.14.51.35;	author jmc;	state Exp;
branches;
next	1.12;

1.12
date	2007.11.25.18.25.27;	author deraadt;	state Exp;
branches;
next	1.11;

1.11
date	2006.07.12.17.31.23;	author miod;	state Exp;
branches;
next	1.10;

1.10
date	2006.07.12.17.29.55;	author miod;	state Exp;
branches;
next	1.9;

1.9
date	2006.07.12.17.26.19;	author miod;	state Exp;
branches;
next	1.8;

1.8
date	2005.07.14.02.09.46;	author uwe;	state Exp;
branches;
next	1.7;

1.7
date	2005.05.10.21.32.20;	author brad;	state Exp;
branches;
next	1.6;

1.6
date	2005.05.01.21.36.55;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	2005.03.08.20.00.23;	author tdeval;	state Exp;
branches;
next	1.4;

1.4
date	2005.01.13.16.15.11;	author drahn;	state Exp;
branches;
next	1.3;

1.3
date	2004.10.08.13.04.35;	author grange;	state Exp;
branches;
next	1.2;

1.2
date	2004.08.04.20.20.19;	author miod;	state Exp;
branches;
next	1.1;

1.1
date	2004.02.01.05.09.48;	author drahn;	state Exp;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2004.02.19.10.48.01;	author niklas;	state Exp;
branches;
next	;


desc
@@


1.45
log
@Bring over the changes to mainbus(4) and simplebus(4) from arm64.
@
text
@#	$OpenBSD: files.arm,v 1.44 2017/01/21 10:58:15 reyk Exp $
#	$NetBSD: files.arm,v 1.76 2003/11/05 12:53:15 scw Exp $

# generic networking files
file	arch/arm/arm/in_cksum_arm.S

# DDB
file	arch/arm/arm/db_disasm.c		ddb
file	arch/arm/arm/db_interface.c		(ddb|kgdb)
file	arch/arm/arm/db_trace.c			ddb
file	arch/arm/arm/db_machdep.c		ddb
file	arch/arm/arm/kgdb_machdep.c		kgdb
file	arch/arm/arm/disassem.c			ddb

# FIQ support
file	arch/arm/arm/fiq.c			fiq
file	arch/arm/arm/fiq_subr.S			fiq

define	fdt {[early = 0]}

# mainbus files
define	mainbus {}
device	mainbus: fdt
attach	mainbus at root
file	arch/arm/mainbus/mainbus.c		mainbus

device	simplebus: fdt
attach	simplebus at fdt
file	arch/arm/simplebus/simplebus.c		simplebus

# FDT support
file	dev/ofw/fdt.c

include "arch/arm/cortex/files.cortex"

device	cpu {}
attach	cpu at mainbus

# bus_space(9)
define	bus_space_generic
file	arch/arm/arm/bus_space_asm_generic.S
file	arch/arm/arm/bus_space_notimpl.S

file	arch/arm/arm/arm_machdep.c
file	arch/arm/arm/ast.c
file	arch/arm/arm/bcopyinout.S
file	arch/arm/arm/copystr.S
file	arch/arm/arm/cpufunc.c
file	arch/arm/arm/cpufunc_asm.S
file	arch/arm/arm/cpufunc_asm_armv7.S	cpu_armv7
file	arch/arm/arm/process_machdep.c
file	arch/arm/arm/sig_machdep.c
file	arch/arm/arm/sigcode.S
file	arch/arm/arm/syscall.c
file	arch/arm/arm/undefined.c
file	arch/arm/arm/vectors.S

# files common to arm implementations
file	arch/arm/arm/arm32_machdep.c
file	arch/arm/arm/bus_dma.c
file	arch/arm/arm/cpu.c
file	arch/arm/arm/cpuswitch7.S		cpu_armv7
file	arch/arm/arm/exception.S
file	arch/arm/arm/fault.c
file	arch/arm/arm/mem.c
file	arch/arm/arm/pmap7.c			cpu_armv7
file	arch/arm/arm/setstack.S
file	arch/arm/arm/stubs.c
file	arch/arm/arm/sys_machdep.c
file	arch/arm/arm/vm_machdep.c

file	arch/arm/armv7/armv7_space.c		cpu_armv7
file	arch/arm/armv7/armv7_a4x_space.c	cpu_armv7
file	arch/arm/armv7/armv7_a4x_io.S		cpu_armv7
file	arch/arm/armv7/armv7_mutex.c		cpu_armv7
file	arch/arm/armv7/bus_space_asm_armv7.S	cpu_armv7

pseudo-device	openprom
file	arch/arm/arm/openprom.c			openprom needs-flag

# arm library functions
file	arch/arm/arm/bcopy_page.S

# machine-dependent libkern components
file	lib/libkern/arch/arm/divsi3.S
file	lib/libkern/arch/arm/__aeabi_ldivmod.S
file	lib/libkern/arch/arm/__aeabi_uldivmod.S

# quad support is necessary for 32 bit architectures
file	lib/libkern/adddi3.c
file	lib/libkern/anddi3.c
file	lib/libkern/ashldi3.c
file	lib/libkern/ashrdi3.c
file	lib/libkern/cmpdi2.c
file	lib/libkern/divdi3.c
file	lib/libkern/iordi3.c
file	lib/libkern/lshldi3.c
file	lib/libkern/lshrdi3.c
file	lib/libkern/moddi3.c
file	lib/libkern/muldi3.c
file	lib/libkern/negdi2.c
file	lib/libkern/notdi2.c
file	lib/libkern/qdivrem.c
file	lib/libkern/subdi3.c
file	lib/libkern/ucmpdi2.c
file	lib/libkern/udivdi3.c
file	lib/libkern/umoddi3.c
file	lib/libkern/xordi3.c
@


1.44
log
@Move virtio config from files.pci to files.pci

virtio itself is not PCI, it is a paravirtual bus on top of either PCI
or MMIO (arm).  This is the first step of moving the virtio files to
dev/pv.  No functional change.

arm kernel changes tested by jsg@@ and patrick@@
no objections from sf@@ mlarkin@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.43 2017/01/02 00:51:18 jsg Exp $
d37 1
a37 3
attach	cpu at fdt with cpu_mainbus
file	arch/arm/mainbus/cpu_mainbus.c		cpu_mainbus

@


1.43
log
@remove unused armv4 and xscale files
ok kettenis@@ patrick@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.42 2016/09/24 12:32:30 kettenis Exp $
d22 1
@


1.42
log
@Add an implementation of __aeabi_ldivmode() and __aeabi_uldivmod(); clang
generates calls to these functions when compiling an armv7 kernel.

Code from NetBSD's unified userland+kernel implementation, with lots of
irrelevant (for us) #ifdefs removed.

ok patrick@@, guenther@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.41 2016/09/18 17:50:25 kettenis Exp $
a50 1
file	arch/arm/arm/cpufunc_asm_armv4.S	cpu_xscale_pxa2x0
a51 1
file	arch/arm/arm/cpufunc_asm_xscale.S	cpu_xscale_pxa2x0
a62 1
file	arch/arm/arm/cpuswitch.S		!cpu_armv7
a66 1
file	arch/arm/arm/pmap.c			!cpu_armv7
@


1.41
log
@Use a locator (named "early") to let designated drivers attach before others.

ok patrick@@, jsg@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.40 2016/08/14 11:30:54 jsg Exp $
d91 2
@


1.40
log
@Remove code for Intel 80219/80321 xscale processors used by armish.
Generic xscale support and support for pxa2x0 used by zaurus remains.
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.39 2016/08/06 17:16:13 kettenis Exp $
d19 1
a19 1
define	fdt {}
@


1.39
log
@Build ofw_pinctrl.o and ofw_gpio.o on armv7.  The latters here from the
generic arm files list.  There is no point in building it on armish or
zaurus.

ok patrick@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.38 2016/07/11 14:51:31 kettenis Exp $
d51 1
a51 2
file	arch/arm/arm/cpufunc_asm_armv4.S	cpu_xscale_80321 |
							cpu_xscale_pxa2x0
d53 1
a53 2
file	arch/arm/arm/cpufunc_asm_xscale.S	cpu_xscale_80321 |
							cpu_xscale_pxa2x0
@


1.38
log
@Hook up imxgpio(4) to the FDT gpio framework.

ok visa@@, jsg@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.37 2016/05/23 00:05:35 deraadt Exp $
a31 1
file	dev/ofw/ofw_gpio.c
@


1.37
log
@Change openprom into a pseudo-device, because not all arm platforms
will have it.  This is a bit of a hack.  Maybe it should attach off
mainbus as a proper fake device, but that would have more tendrils..
checked by jsg
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.36 2016/05/02 08:15:55 patrick Exp $
d32 1
@


1.36
log
@Rework mainbus and implement simplebus to be able to span a tree-like
topology based on device tree information.  Introduce a common attach
args structure to be used for all fdt-capable bus devices.

ok jsg@@ kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.35 2016/03/22 23:28:02 patrick Exp $
d84 3
@


1.35
log
@Remove support for ARM10.

ok jsg@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.34 2016/03/22 11:18:17 patrick Exp $
d19 2
d22 1
a22 1
device	mainbus {}
d26 7
d36 1
a36 1
attach	cpu at mainbus with cpu_mainbus
@


1.34
log
@Remove support for ARM9E.  This is another step in the plan to remove
all unused and unmaintained ARM processors from the past.

ok bmercer@@ jsg@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.33 2016/03/19 09:51:24 patrick Exp $
d42 1
a42 3
file	arch/arm/arm/cpufunc_asm_arm10.S	cpu_arm10
file	arch/arm/arm/cpufunc_asm_armv4.S	cpu_arm10 |
							cpu_xscale_80321 |
a43 2
file	arch/arm/arm/cpufunc_asm_armv5.S	cpu_arm10
file	arch/arm/arm/cpufunc_asm_armv5_ec.S	cpu_arm10
@


1.33
log
@Remove support for the XScale 80200.  We don't use it, it didn't compile
and the included headers didn't even exist.

ok jsg@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.32 2016/03/19 09:47:54 patrick Exp $
d42 2
a43 2
file	arch/arm/arm/cpufunc_asm_arm10.S	cpu_arm9e | cpu_arm10
file	arch/arm/arm/cpufunc_asm_armv4.S	cpu_arm9e | cpu_arm10 |
d47 1
a47 1
file	arch/arm/arm/cpufunc_asm_armv5_ec.S	cpu_arm9e | cpu_arm10
@


1.32
log
@Remove support for IXP425.  This is another architecture that is not
used and has probably never been used at all.  Some included headers
do not even exist.

ok jsg@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.31 2016/03/19 09:36:56 patrick Exp $
a43 1
							cpu_xscale_80200 |
d49 1
a49 2
file	arch/arm/arm/cpufunc_asm_xscale.S	cpu_xscale_80200 |
							cpu_xscale_80321 |
@


1.31
log
@Remove support for StrongARM (SA1) and IXP12x0.  Both are ARMv4 and
are not used by any of the arm platforms.

ok jsg@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.30 2016/03/18 13:16:02 jsg Exp $
a45 1
							cpu_xscale_ixp425 |
a51 1
							cpu_xscale_ixp425 |
@


1.30
log
@Remove support for ARM9T (armv4t).  Not used by any of the arm platforms.
From Patrick Wildt.
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.29 2016/03/18 06:54:21 jsg Exp $
a43 4
							cpu_sa110 |
							cpu_sa1100 |
							cpu_sa1110 |
							cpu_ixp12x0 |
a50 4
file	arch/arm/arm/cpufunc_asm_sa1.S		cpu_sa110 | cpu_sa1100 |
							cpu_sa1110 |
							cpu_ixp12x0
file	arch/arm/arm/cpufunc_asm_sa11x0.S	cpu_sa1100 | cpu_sa1110
a54 1
file	arch/arm/arm/cpufunc_asm_ixp12x0.S	cpu_ixp12x0
@


1.29
log
@Remove support for ARM8, an old armv4 processor without thumb that was
never supported by any arm port and wouldn't have built due to a missing
cpufunc_asm_arm8.S file.

From Patrick Wildt.
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.28 2015/07/17 22:52:28 tedu Exp $
a41 1
file	arch/arm/arm/cpufunc_asm_arm9.S		cpu_arm9
d43 1
a43 2
file	arch/arm/arm/cpufunc_asm_armv4.S	cpu_arm9 | cpu_arm9e |
							cpu_arm10 |
@


1.28
log
@remove obsolete INET kernel option
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.27 2014/12/30 11:45:31 jsg Exp $
a41 1
file	arch/arm/arm/cpufunc_asm_arm8.S		cpu_arm8
@


1.27
log
@Remove redundant md memcpy.S and memmove.S lines.  The mi config
definitions will find the md .S files for these.
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.26 2014/10/09 04:20:18 deraadt Exp $
d5 1
a5 1
file	arch/arm/arm/in_cksum_arm.S		inet
@


1.26
log
@disassem.c only if ddb; ok miod
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.25 2013/05/09 20:41:47 patrick Exp $
a100 2
file	lib/libkern/arch/arm/memcpy.S
file	lib/libkern/arch/arm/memmove.S
@


1.25
log
@Drain the bufs after or before we do a bus space operation on ARMv7.

ok miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.24 2013/05/01 00:16:26 patrick Exp $
d13 1
a29 2
# files related to debugging
file	arch/arm/arm/disassem.c
@


1.24
log
@Add a cortex bus which represents the ARM MPCore Complex.
It will attach only to ARM Cortex A9 and A15 SoCs.
The generic interrupt controller and timer will attach to this bus,
later a secondary cache controller can be added.
The base address for those controllers are figured out using
the periphbase register.

ok bmercer@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.23 2013/04/30 13:10:45 patrick Exp $
d95 1
@


1.23
log
@Switch from pmap to pmap7.

ok bmercer@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.22 2013/03/27 17:33:13 patrick Exp $
d22 2
@


1.22
log
@Move generic armv7 files into arm's file list.

ok bmercer@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.21 2011/11/08 17:07:42 deraadt Exp $
d77 2
a78 1
file	arch/arm/arm/cpuswitch.S
d82 2
a83 1
file	arch/arm/arm/pmap.c
@


1.21
log
@merge cpu_coredump() back to where it belongs, ok drahn miod
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.20 2011/11/08 16:51:47 deraadt Exp $
d86 5
@


1.20
log
@compat_13 support died ages ago
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.19 2011/11/08 12:55:59 deraadt Exp $
a71 1
file	arch/arm/arm/vm_machdep_arm.c
@


1.19
log
@arm has no need for procfs
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.18 2011/09/22 17:45:59 miod Exp $
a37 1
file	arch/arm/arm/compat_13_machdep.c	compat_13
@


1.18
log
@None of the mainbus child devices care about getting a bus_space_tag_t from
its parent, because they know better; so don't bother providing one, which
allows more unused code to go to the Attic.

While there, redo the config machinery for mainbus child devices, to bring
it to our current standards. This also allows them to be disabled in UKC,
should there be a need for this in the future.
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.17 2011/09/20 22:02:12 miod Exp $
a67 1
file	arch/arm/arm/procfs_machdep.c		procfs
@


1.17
log
@Late spring cleaning of the arm code for old dusty bits we do not want to
keep:
- remove bootconfig parameter passing feature (unused).
- unifdef __PROG32 and remove all remains of arm26 code.
- remove ARMFPE support (unused).
- remove support for ARM2, ARM2AS, ARM3, ARM6, ARM7, ARM7TDMI and StrongARM
  processor families, and the related silicon bug workarounds (especially
  the SA-110 STM^ bug).
- remove cpu_functions no longer necessary after previous removals.
- remove ARM32_DISABLE_ALIGNMENT_FAULTS option (unused).
- make FIQ support conditional on option FIQ (unused, but may be eventually).

Discussed with drahn@@ and jasper@@ long ago, I was sitting on this commit for
no good reason.
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.16 2010/12/06 18:05:29 jasper Exp $
d19 1
a19 1
device	mainbus {[base = -1], [dack = -1], [irq = -1]}
a21 2
file	arch/arm/mainbus/mainbus_io.c		mainbus
file	arch/arm/mainbus/mainbus_io_asm.S	mainbus
a37 1
file	arch/arm/arm/blockio.S
@


1.16
log
@- remove unused/commented COMPAT_LINUX stuff

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.15 2009/05/08 02:57:32 drahn Exp $
a3 5
# Floating point emulator
#file	arch/arm/fpe-arm/armfpe_glue.S		armfpe
#file	arch/arm/fpe-arm/armfpe_init.c		armfpe
#file	arch/arm/fpe-arm/armfpe.S		armfpe

d15 2
a16 2
file	arch/arm/arm/fiq.c
file	arch/arm/arm/fiq_subr.S
a40 1
file	arch/arm/arm/bootconfig.c
a44 3
file	arch/arm/arm/cpufunc_asm_arm3.S		cpu_arm3
file	arch/arm/arm/cpufunc_asm_arm67.S	cpu_arm6 | cpu_arm7
file	arch/arm/arm/cpufunc_asm_arm7tdmi.S	cpu_arm7tdmi
d76 1
a76 3
# vectors.S gets included manually by Makefile.acorn26, since it needs
# to be at the start of the text segment on those machines.
file	arch/arm/arm/vectors.S		
d94 1
a94 1
file	arch/arm/arm/bcopy_page.S	
@


1.15
log
@Pieces of arm11 and armv7 support for newer cpus. This is work in progress
and not complete.
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.14 2008/09/11 02:38:14 kevlo Exp $
a105 8

# Linux binary compatibility (COMPAT_LINUX)
#include "compat/ossaudio/files.ossaudio"
#include "compat/linux/files.linux"
#include "compat/linux/arch/arm/files.linux_arm"
#file	arch/arm/arm/linux_sigcode.S		compat_linux
#file	arch/arm/arm/linux_syscall.c		compat_linux
#file	arch/arm/arm/linux_trap.c		compat_linux
@


1.14
log
@add support for arm9e core, taken from NetBSD.
ok drahn@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.13 2008/04/25 14:51:35 jmc Exp $
d69 1
@


1.13
log
@neccessary -> necessary; from Pierre Riteau
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.12 2007/11/25 18:25:27 deraadt Exp $
d56 3
a58 2
file	arch/arm/arm/cpufunc_asm_arm10.S	cpu_arm10
file	arch/arm/arm/cpufunc_asm_armv4.S	cpu_arm9 | cpu_arm10 |
d67 2
@


1.12
log
@libkern, begone.  Move to a new mechanism where config(8)'s "file"
directive can select between MI and MD versions of these files.  At
the same time, adjust the boot programs to pick exactly what they need,
instead of the 7 or 8 mechanisms previously used.

There will be some fallout from this, but testing it all by myself is a
ridiculously slow process; it will be finished in-tree.

Various developers were very nice and avoided making fun of me when I
was gibbering in the corner..
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.11 2006/07/12 17:31:23 miod Exp $
d116 1
a116 1
# quad support is neccessary for 32 bit architectures
@


1.11
log
@Remove commented out defopt goo.
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.10 2006/07/12 17:29:55 miod Exp $
d110 26
@


1.10
log
@Turn GetCPSR() into an inline get_cpsr(), and remove more dead code.
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.9 2006/07/12 17:26:19 miod Exp $
a3 21
# CPU types.  Make sure to update <arm/cpuconf.h> if you change this list.
#defflag	opt_cputypes.h		CPU_ARM2 CPU_ARM250 CPU_ARM3
#defflag	opt_cputypes.h		CPU_ARM6 CPU_ARM7 CPU_ARM7TDMI CPU_ARM8
#				CPU_ARM9 CPU_ARM10 CPU_SA110 CPU_SA1100
#				CPU_SA1110 CPU_IXP12X0 CPU_XSCALE_80200
#				CPU_XSCALE_80321 CPU_XSCALE_PXA2X0
#				CPU_XSCALE_IXP425

#defparam opt_cpuoptions.h	XSCALE_CCLKCFG
#defflag  opt_cpuoptions.h	XSCALE_CACHE_WRITE_THROUGH
#defflag  opt_cpuoptions.h	XSCALE_CACHE_WRITE_BACK
#defflag  opt_cpuoptions.h	XSCALE_NO_COALESCE_WRITES
#defflag  opt_cpuoptions.h	XSCALE_CACHE_READ_WRITE_ALLOCATE
#defflag  opt_cpuoptions.h	ARM32_DISABLE_ALIGNMENT_FAULTS

# Interrupt implementation header definition.
#defparam opt_arm_intr_impl.h	ARM_INTR_IMPL

# Board-specific bus_space(9) definitions
#defflag  opt_arm_bus_space.h	__BUS_SPACE_HAS_STREAM_METHODS

a4 1
#defflag				ARMFPE
a7 3

# PMAP_DEBUG (heavily abused option)
#defflag				PMAP_DEBUG
@


1.9
log
@Orphaned stuff.
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.8 2005/07/14 02:09:46 uwe Exp $
a119 1
file	arch/arm/arm/setcpsr.S
@


1.8
log
@More netccitt and netns removals; OK henning, brad, mickey
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.7 2005/05/10 21:32:20 brad Exp $
a124 1
file	arch/arm/arm/atomic.S
@


1.7
log
@enable arm optimized in4_cksum

ok drahn@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.6 2005/05/01 21:36:55 brad Exp $
a35 1
file	netns/ns_cksum.c			ns
@


1.6
log
@To allow for MD override of in4_cksum()...

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.5 2005/03/08 20:00:23 tdeval Exp $
a35 1
file	netinet/in4_cksum.c			inet
@


1.5
log
@Cosmetics...
Mainly remove space between locators parens, replace spaces with tabs
where appropriate and consistently align dependencies.
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.4 2005/01/13 16:15:11 drahn Exp $
d36 1
@


1.4
log
@dont make this dependant on bus_space_generic, that is bogus.
keep the define for compat for now.
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.3 2004/10/08 13:04:35 grange Exp $
d50 1
a50 1
device	mainbus { [base = -1], [dack = -1], [irq = -1] }
d56 1
a56 1
device	cpu { }
d97 3
a99 3
						    cpu_xscale_80321 |
						    cpu_xscale_ixp425 |
						    cpu_xscale_pxa2x0
@


1.3
log
@Move dev/cons.c to MI conf/files.

ok miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.2 2004/08/04 20:20:19 miod Exp $
d65 1
a65 1
file	arch/arm/arm/bus_space_asm_generic.S	bus_space_generic
@


1.2
log
@Remove the old fetch(9)/store(9) functions, since they are not used in
OpenBSD. This gives us a simpler and faster cpu_switch() as a bonus.

ok drahn@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.1 2004/02/01 05:09:48 drahn Exp $
a32 3

# MI console support
file	dev/cons.c
@


1.1
log
@Arm port, NetBSD codebase stripped down, 32bit only support.
@
text
@d1 1
a1 1
#	$OpenBSD: files.arm,v 1.2 2004/01/29 16:17:16 drahn Exp $
a121 1
file	arch/arm/arm/fusu.S
@


1.1.2.1
log
@Merge of current from two weeks agointo the SMP branch
@
text
@d1 1
a1 1
#	$OpenBSD$
@

