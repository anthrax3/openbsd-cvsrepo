head	1.26;
access;
symbols
	OPENBSD_6_0:1.25.0.2
	OPENBSD_6_0_BASE:1.25
	OPENBSD_5_9:1.24.0.4
	OPENBSD_5_9_BASE:1.24
	OPENBSD_5_8:1.24.0.6
	OPENBSD_5_8_BASE:1.24
	OPENBSD_5_7:1.24.0.2
	OPENBSD_5_7_BASE:1.24
	OPENBSD_5_6:1.23.0.20
	OPENBSD_5_6_BASE:1.23
	OPENBSD_5_5:1.23.0.18
	OPENBSD_5_5_BASE:1.23
	OPENBSD_5_4:1.23.0.14
	OPENBSD_5_4_BASE:1.23
	OPENBSD_5_3:1.23.0.12
	OPENBSD_5_3_BASE:1.23
	OPENBSD_5_2:1.23.0.10
	OPENBSD_5_2_BASE:1.23
	OPENBSD_5_1_BASE:1.23
	OPENBSD_5_1:1.23.0.8
	OPENBSD_5_0:1.23.0.6
	OPENBSD_5_0_BASE:1.23
	OPENBSD_4_9:1.23.0.4
	OPENBSD_4_9_BASE:1.23
	OPENBSD_4_8:1.23.0.2
	OPENBSD_4_8_BASE:1.23
	OPENBSD_4_7:1.22.0.2
	OPENBSD_4_7_BASE:1.22
	OPENBSD_4_6:1.21.0.12
	OPENBSD_4_6_BASE:1.21
	OPENBSD_4_5:1.21.0.8
	OPENBSD_4_5_BASE:1.21
	OPENBSD_4_4:1.21.0.6
	OPENBSD_4_4_BASE:1.21
	OPENBSD_4_3:1.21.0.4
	OPENBSD_4_3_BASE:1.21
	OPENBSD_4_2:1.21.0.2
	OPENBSD_4_2_BASE:1.21
	OPENBSD_4_1:1.19.0.2
	OPENBSD_4_1_BASE:1.19
	OPENBSD_4_0:1.18.0.4
	OPENBSD_4_0_BASE:1.18
	OPENBSD_3_9:1.18.0.2
	OPENBSD_3_9_BASE:1.18
	OPENBSD_3_8:1.16.0.2
	OPENBSD_3_8_BASE:1.16
	OPENBSD_3_7:1.10.0.2
	OPENBSD_3_7_BASE:1.10;
locks; strict;
comment	@# @;


1.26
date	2016.09.03.13.37.42;	author guenther;	state dead;
branches;
next	1.25;
commitid	6T3r4QcMFKe3Fo5T;

1.25
date	2016.05.02.08.15.55;	author patrick;	state Exp;
branches;
next	1.24;
commitid	SxPSz6lxaCE62Tnc;

1.24
date	2014.10.18.12.21.56;	author miod;	state Exp;
branches;
next	1.23;
commitid	bMGwcxDJMvwyWkup;

1.23
date	2010.06.07.16.34.20;	author drahn;	state Exp;
branches;
next	1.22;

1.22
date	2009.09.09.12.14.39;	author marex;	state Exp;
branches;
next	1.21;

1.21
date	2007.05.15.05.26.44;	author miod;	state Exp;
branches;
next	1.20;

1.20
date	2007.03.18.20.53.10;	author uwe;	state Exp;
branches;
next	1.19;

1.19
date	2006.11.25.18.10.29;	author uwe;	state Exp;
branches;
next	1.18;

1.18
date	2005.12.20.02.37.09;	author drahn;	state Exp;
branches;
next	1.17;

1.17
date	2005.09.15.20.23.10;	author miod;	state Exp;
branches;
next	1.16;

1.16
date	2005.07.01.23.51.55;	author uwe;	state Exp;
branches;
next	1.15;

1.15
date	2005.06.16.21.30.11;	author uwe;	state Exp;
branches;
next	1.14;

1.14
date	2005.06.16.21.06.55;	author uwe;	state Exp;
branches;
next	1.13;

1.13
date	2005.05.27.19.01.21;	author uwe;	state Exp;
branches;
next	1.12;

1.12
date	2005.04.15.01.07.34;	author pascoe;	state Exp;
branches;
next	1.11;

1.11
date	2005.04.14.23.40.34;	author pascoe;	state Exp;
branches;
next	1.10;

1.10
date	2005.03.08.20.00.23;	author tdeval;	state Exp;
branches;
next	1.9;

1.9
date	2005.02.22.21.53.03;	author uwe;	state Exp;
branches;
next	1.8;

1.8
date	2005.02.17.22.10.35;	author dlg;	state Exp;
branches;
next	1.7;

1.7
date	2005.02.12.05.20.25;	author dlg;	state Exp;
branches;
next	1.6;

1.6
date	2005.01.20.23.34.36;	author uwe;	state Exp;
branches;
next	1.5;

1.5
date	2005.01.19.02.02.34;	author uwe;	state Exp;
branches;
next	1.4;

1.4
date	2005.01.04.03.47.00;	author drahn;	state Exp;
branches;
next	1.3;

1.3
date	2005.01.03.12.05.24;	author miod;	state Exp;
branches;
next	1.2;

1.2
date	2005.01.02.19.52.36;	author drahn;	state Exp;
branches;
next	1.1;

1.1
date	2004.12.30.23.50.07;	author drahn;	state Exp;
branches;
next	;


desc
@@


1.26
log
@Retire zaurus, as it hasn't made the EABI jump and will be permanently broken
shortly when we use the hardware thread register in userland
@
text
@#	$OpenBSD: files.pxa2x0,v 1.25 2016/05/02 08:15:55 patrick Exp $
#	$NetBSD: files.pxa2x0,v 1.6 2004/05/01 19:09:14 thorpej Exp $
#
# Configuration info for Intel PXA2[51]0 CPU support
#

file	arch/arm/arm/softintr.c	# Use the generic ARM soft interrupt code.

# PXA2[51]0's integrated peripherals bus.
define	pxaip {[addr=-1], [size=0], [intr=-1], [index=-1]}
device	pxaip
attach	pxaip at fdt
file	arch/arm/xscale/pxa2x0.c
file	arch/arm/arm/irq_dispatch.S
file	arch/arm/xscale/pxa2x0_space.c
#file	arch/arm/xscale/pxa2x0_freqchg.S
file	arch/arm/xscale/pxa2x0_dma.c

# Cotulla integrated peripherals.

# INTC controller
device	pxaintc
attach	pxaintc at pxaip
file	arch/arm/xscale/pxa2x0_intr.c		pxaintc
file	arch/arm/xscale/pxa2x0_mutex.c		pxaintc
#defflag  opt_pxa2x0_gpio.h		PXAGPIO_HAS_GPION_INTRS

# GPIO controller
device	pxagpio
attach	pxagpio at pxaip
file	arch/arm/xscale/pxa2x0_gpio.c		pxagpio needs-flag

# DMA controller
device	pxadmac
attach	pxadmac at pxaip
file	arch/arm/xscale/pxa2x0_dmac.c		pxadmac needs-flag

# PXA2x0's built-in timer.
device	pxaost
attach	pxaost at pxaip
file	arch/arm/xscale/pxa2x0_clock.c		pxaost

# NS16550 compatible serial ports
attach	com at pxaip with com_pxaip
file	arch/arm/xscale/pxa2x0_com.c		com_pxaip
file	arch/arm/xscale/pxa2x0_a4x_space.c	com_pxaip
file	arch/arm/xscale/pxa2x0_a4x_io.S		com_pxaip

# PXA27x USB Device Controller
device	pxaudc: usbdev
file	arch/arm/xscale/pxa27x_udc.c		pxaudc

# OHCI USB Controller
attach	ohci at pxaip with pxaohci
file	arch/arm/xscale/pxa2x0_ohci.c		pxaohci

# LCD controller
device	lcd: wsemuldisplaydev, rasops16, rasops8, rasops4, rasops_rotation
file	arch/arm/xscale/pxa2x0_lcd.c		lcd needs-flag

# Inter-Integrated Circuit controller
device	i2c {}
file	arch/arm/xscale/pxa2x0_i2c.c		i2c

# Inter-IC Sound controller
device	i2s {}
file	arch/arm/xscale/pxa2x0_i2s.c		i2s

# Power manager and APM emulation
device	apm
file	arch/arm/xscale/pxa2x0_apm.c		apm needs-flag
file	arch/arm/xscale/pxa2x0_apm_asm.S	apm

include	"dev/pcmcia/files.pcmcia"

# PCMCIA controller
device	pxapcic: pcmciabus
file	arch/arm/xscale/pxa2x0_pcic.c		pxapcic

# XXX this is a hack to use dev/pcmcia without fdc.c
device	fdc

# MMC/SD/SDIO controller
device	pxammc: sdmmcbus
file	arch/arm/xscale/pxa2x0_mmc.c		pxammc

# PXA27x keypad
device	pxa27x_kpc: wskbddev
file	arch/arm/xscale/pxa27x_kpc.c		pxa27x_kpc
@


1.25
log
@Rework mainbus and implement simplebus to be able to span a tree-like
topology based on device tree information.  Introduce a common attach
args structure to be used for all fdt-capable bus devices.

ok jsg@@ kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.pxa2x0,v 1.24 2014/10/18 12:21:56 miod Exp $
@


1.24
log
@Remove even more unnecessary `needs-flag' attributes from config machinery,
as well as useless include of the generated flag files.
@
text
@d1 1
a1 1
#	$OpenBSD: files.pxa2x0,v 1.23 2010/06/07 16:34:20 drahn Exp $
d12 1
a12 1
attach	pxaip at mainbus
@


1.23
log
@Break pxaudc into xscale and MD pieces so that palm and zaurus can correctly
share the driver with different GPIOs/IRQs Diff from marex via jasper.
@
text
@d1 1
a1 1
#	$OpenBSD: files.pxa2x0,v 1.22 2009/09/09 12:14:39 marex Exp $
d24 1
a24 1
file	arch/arm/xscale/pxa2x0_intr.c		pxaintc needs-flag
d41 1
a41 1
file	arch/arm/xscale/pxa2x0_clock.c		pxaost needs-flag
@


1.22
log
@Add simple PXA27x matrix keypad controller driver
@
text
@d1 1
a1 1
#	$OpenBSD: files.pxa2x0,v 1.21 2007/05/15 05:26:44 miod Exp $
a50 1
attach	pxaudc at pxaip
@


1.21
log
@Dummy mutex code for arm platforms. ok drahn@@ deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.pxa2x0,v 1.20 2007/03/18 20:53:10 uwe Exp $
d87 4
@


1.20
log
@Support the PXA27x SD/SDIO/MMC controller on Zaurus

We use the suggested workaround for the problem E40 in the PXA27x errata
sheet. Unfortunately this limits the bus speed to 9.75Mhz.
@
text
@d1 1
a1 1
#	$OpenBSD: files.pxa2x0,v 1.19 2006/11/25 18:10:29 uwe Exp $
d25 1
@


1.19
log
@
Initial USB device controller (UDC) and USB CDC Ethernet function support
for PXA27x/Zaurus, not enabled yet; for dlg and dale :)
@
text
@d1 1
a1 1
#	$OpenBSD: files.pxa2x0,v 1.18 2005/12/20 02:37:09 drahn Exp $
d82 4
@


1.18
log
@switch to using clock4 instead of clock0 so that we get clocks when running
at 91MHz (clock4 is programmed to be based of the 32.768KHz clock.
@
text
@d1 1
a1 1
#	$OpenBSD: files.pxa2x0,v 1.17 2005/09/15 20:23:10 miod Exp $
d49 1
a49 1
device	pxaudc
@


1.17
log
@Stop compiling the texte console rotation code #ifdef __zaurus__, but use
a flag in the rasops_info structure; drivers which may use it shall declare
a specific attribute for the config(8) machinery, so that the necessary code
is compiled in.

In addition to this, rotated font computation is now done on-demand, and a
list of unrotated-rotated font cookie pairs is kept, rather than rotating all
built-in wsfonts at initialization time.

No user-perceptible functional change.

Tested matthieu@@ uwe@@, ok uwe@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.pxa2x0,v 1.16 2005/07/01 23:51:55 uwe Exp $
d37 4
a40 5
# clock device
# PXA2x0's built-in timer is compatible to SA-1110.
device	saost
attach	saost at pxaip
file	arch/arm/sa11x0/sa11x0_ost.c		saost needs-flag
@


1.16
log
@Move all zaurus specific code from pxa2x0_pcic.c into scoop_pcic.c
without affecting the way the driver works.
@
text
@d1 1
a1 1
#	$OpenBSD: files.pxa2x0,v 1.15 2005/06/16 21:30:11 uwe Exp $
d59 1
a59 1
device	lcd: wsemuldisplaydev, rasops16, rasops8, rasops4
@


1.15
log
@i2c and i2s are separete devices, and zaudio depends on them.
@
text
@d1 1
a1 1
#	$OpenBSD: files.pxa2x0,v 1.14 2005/06/16 21:06:55 uwe Exp $
a78 1
attach	pxapcic at pxaip
@


1.14
log
@unbust "com at pxaip" attachment so that there is no need to enable
"com at pcmcia" in RAMDISK as a workaround.
@
text
@d1 1
a1 1
#	$OpenBSD: files.pxa2x0,v 1.13 2005/05/27 19:01:21 uwe Exp $
d61 8
@


1.13
log
@The forgotten part of the merge of pxacom back into com.
Also the *CONSOLE options are no longer needed.
@
text
@d1 1
a1 1
#	$OpenBSD: files.pxa2x0,v 1.12 2005/04/15 01:07:34 pascoe Exp $
d44 4
a47 4
attach	com at pxaip with pxauart
file	arch/arm/xscale/pxa2x0_com.c		pxauart
file	arch/arm/xscale/pxa2x0_a4x_space.c	pxauart | obio
file	arch/arm/xscale/pxa2x0_a4x_io.S		pxauart | obio
@


1.12
log
@Remove i2c entry, it is included from zaudio config.
@
text
@d1 1
a1 1
#	$OpenBSD: files.pxa2x0,v 1.11 2005/04/14 23:40:34 pascoe Exp $
a47 1
#defflag	opt_com.h	FFUARTCONSOLE STUARTCONSOLE BTUARTCONSOLE
a75 2

file	arch/arm/xscale/pxacom.c		com & pxauart needs-flag
@


1.11
log
@Add basic support for the pxa2x0 DMA controller.

ok deraadt@@ dlg@@ drahn@@ uwe@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.pxa2x0,v 1.10 2005/03/08 20:00:23 tdeval Exp $
a17 1
#file	arch/arm/xscale/pxa2x0_i2c.c
@


1.10
log
@Cosmetics...
Mainly remove space between locators parens, replace spaces with tabs
where appropriate and consistently align dependencies.
@
text
@d1 1
a1 1
#	$OpenBSD: files.pxa2x0,v 1.9 2005/02/22 21:53:03 uwe Exp $
d32 5
@


1.9
log
@Initial suspend/resume code with additional powerhooks.  Enter/exit
suspend mode with power button or zzz.  May not work for everyone yet.
ok drahn@@ and deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.pxa2x0,v 1.8 2005/02/17 22:10:35 dlg Exp $
d7 1
a7 1
file	arch/arm/arm/softintr.c  # Use the generic ARM soft interrupt code.
d10 3
a12 3
define pxaip { [addr=-1], [size=0], [intr=-1], [index=-1]}
device pxaip
attach pxaip at mainbus
d25 1
a25 1
file arch/arm/xscale/pxa2x0_intr.c		pxaintc needs-flag
d31 1
a31 1
file arch/arm/xscale/pxa2x0_gpio.c		pxagpio needs-flag
d40 4
a43 4
attach com at pxaip with pxauart
file arch/arm/xscale/pxa2x0_com.c		pxauart
file arch/arm/xscale/pxa2x0_a4x_space.c		pxauart | obio
file arch/arm/xscale/pxa2x0_a4x_io.S		pxauart | obio
d56 2
a57 2
device lcd: wsemuldisplaydev, rasops16, rasops8, rasops4
file arch/arm/xscale/pxa2x0_lcd.c		lcd needs-flag
d67 3
a69 3
device pxapcic: pcmciabus
attach pxapcic at pxaip
file arch/arm/xscale/pxa2x0_pcic.c		pxapcic
d74 1
a74 1
file   arch/arm/xscale/pxacom.c            com & pxauart needs-flag
@


1.8
log
@a driver for the usb device controller. at the moment it only hardwires the
physical port on a zaurus to the host controller. needs lots of cleanup.

ok drahn@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.pxa2x0,v 1.7 2005/02/12 05:20:25 dlg Exp $
d62 1
@


1.7
log
@whitespace fix

ok drahn@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.pxa2x0,v 1.6 2005/01/20 23:34:36 uwe Exp $
d46 5
d52 1
a52 1
attach ohci at pxaip with pxaohci
@


1.6
log
@Enable apm/scoop drivers and report A/C power status correctly.
ok drahn@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.pxa2x0,v 1.5 2005/01/19 02:02:34 uwe Exp $
d48 1
a48 1
file   arch/arm/xscale/pxa2x0_ohci.c           pxaohci
@


1.5
log
@APM emulation framework and zaurus scoop driver.  Not enabled yet.
ok drahn@@, deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.pxa2x0,v 1.4 2005/01/04 03:47:00 drahn Exp $
a55 1
attach	apm at pxaip
@


1.4
log
@USB support for C3000, much thanks to dlg@@ for pxa2x0_ohci.c
@
text
@d1 1
a1 1
#	$OpenBSD: files.pxa2x0,v 1.3 2005/01/03 12:05:24 miod Exp $
d53 5
@


1.3
log
@RCSID are ok as long as they are proper comments (-:
@
text
@d1 1
a1 1
#	$OpenBSD: files.pxa2x0,v 1.2 2005/01/02 19:52:36 drahn Exp $
d46 4
a59 4

# onboard USB
attach	ohci at pxaip with ohci_pxa
file	arch/arm/xscale/pxa2x0_ohci.c		ohci
@


1.2
log
@OpenBSD tags
@
text
@d1 1
a1 1
/*	$OpenBSD$ */
@


1.1
log
@xscale bits, taken from NetBSD with modifications as appropriate for OpenBSD.
@
text
@d1 1
d56 4
@

