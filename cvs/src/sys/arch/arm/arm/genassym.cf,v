head	1.16;
access;
symbols
	OPENBSD_6_1:1.16.0.2
	OPENBSD_6_1_BASE:1.16
	OPENBSD_6_0:1.15.0.2
	OPENBSD_6_0_BASE:1.15
	OPENBSD_5_9:1.14.0.4
	OPENBSD_5_9_BASE:1.14
	OPENBSD_5_8:1.14.0.6
	OPENBSD_5_8_BASE:1.14
	OPENBSD_5_7:1.14.0.2
	OPENBSD_5_7_BASE:1.14
	OPENBSD_5_6:1.13.0.6
	OPENBSD_5_6_BASE:1.13
	OPENBSD_5_5:1.13.0.4
	OPENBSD_5_5_BASE:1.13
	OPENBSD_5_4:1.11.0.2
	OPENBSD_5_4_BASE:1.11
	OPENBSD_5_3:1.10.0.4
	OPENBSD_5_3_BASE:1.10
	OPENBSD_5_2:1.10.0.2
	OPENBSD_5_2_BASE:1.10
	OPENBSD_5_1_BASE:1.9
	OPENBSD_5_1:1.9.0.2
	OPENBSD_5_0:1.8.0.16
	OPENBSD_5_0_BASE:1.8
	OPENBSD_4_9:1.8.0.14
	OPENBSD_4_9_BASE:1.8
	OPENBSD_4_8:1.8.0.12
	OPENBSD_4_8_BASE:1.8
	OPENBSD_4_7:1.8.0.8
	OPENBSD_4_7_BASE:1.8
	OPENBSD_4_6:1.8.0.10
	OPENBSD_4_6_BASE:1.8
	OPENBSD_4_5:1.8.0.6
	OPENBSD_4_5_BASE:1.8
	OPENBSD_4_4:1.8.0.4
	OPENBSD_4_4_BASE:1.8
	OPENBSD_4_3:1.8.0.2
	OPENBSD_4_3_BASE:1.8
	OPENBSD_4_2:1.7.0.2
	OPENBSD_4_2_BASE:1.7
	OPENBSD_4_1:1.6.0.4
	OPENBSD_4_1_BASE:1.6
	OPENBSD_4_0:1.6.0.2
	OPENBSD_4_0_BASE:1.6
	OPENBSD_3_9:1.5.0.2
	OPENBSD_3_9_BASE:1.5
	OPENBSD_3_8:1.4.0.2
	OPENBSD_3_8_BASE:1.4
	OPENBSD_3_7:1.3.0.4
	OPENBSD_3_7_BASE:1.3
	OPENBSD_3_6:1.3.0.2
	OPENBSD_3_6_BASE:1.3
	SMP_SYNC_A:1.2
	SMP_SYNC_B:1.2
	OPENBSD_3_5:1.2.0.4
	OPENBSD_3_5_BASE:1.2
	SMP:1.2.0.2;
locks; strict;
comment	@# @;


1.16
date	2016.09.24.21.02.31;	author patrick;	state Exp;
branches;
next	1.15;
commitid	dFklIjOtjr4TmfA5;

1.15
date	2016.03.24.08.52.30;	author mpi;	state Exp;
branches;
next	1.14;
commitid	zrnOY8Xe3mVIeemY;

1.14
date	2014.08.21.14.24.08;	author mpi;	state Exp;
branches;
next	1.13;
commitid	5eFitDmQJIvEdtoI;

1.13
date	2013.09.12.11.43.51;	author patrick;	state Exp;
branches;
next	1.12;

1.12
date	2013.09.10.12.35.25;	author patrick;	state Exp;
branches;
next	1.11;

1.11
date	2013.04.30.13.04.25;	author patrick;	state Exp;
branches;
next	1.10;

1.10
date	2012.02.26.15.28.27;	author miod;	state Exp;
branches;
next	1.9;

1.9
date	2011.09.20.22.02.11;	author miod;	state Exp;
branches;
next	1.8;

1.8
date	2007.10.10.15.53.51;	author art;	state Exp;
branches;
next	1.7;

1.7
date	2007.05.14.07.07.09;	author art;	state Exp;
branches;
next	1.6;

1.6
date	2006.03.07.20.20.28;	author miod;	state Exp;
branches;
next	1.5;

1.5
date	2005.12.13.00.18.18;	author jsg;	state Exp;
branches;
next	1.4;

1.4
date	2005.05.10.21.32.20;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	2004.06.13.21.49.13;	author niklas;	state Exp;
branches;
next	1.2;

1.2
date	2004.02.14.15.34.31;	author miod;	state Exp;
branches
	1.2.2.1;
next	1.1;

1.1
date	2004.02.01.05.09.48;	author drahn;	state Exp;
branches;
next	;

1.2.2.1
date	2004.02.19.10.48.01;	author niklas;	state Exp;
branches;
next	1.2.2.2;

1.2.2.2
date	2004.06.05.23.10.44;	author niklas;	state Exp;
branches;
next	1.2.2.3;

1.2.2.3
date	2004.06.08.18.30.03;	author tedu;	state Exp;
branches;
next	;


desc
@@


1.16
log
@Stick the thread control block pointer into a CPU register on ARMv7.

ok guenther@@
@
text
@#	$OpenBSD: genassym.cf,v 1.15 2016/03/24 08:52:30 mpi Exp $
#	$NetBSD: genassym.cf,v 1.27 2003/11/04 10:33:16 dsl Exp$

# Copyright (c) 1982, 1990 The Regents of the University of California.
# All rights reserved.
#
# This code is derived from software contributed to Berkeley by
# William Jolitz.
#
# Redistribution and use in source and binary forms, with or without
# modification, are permitted provided that the following conditions
# are met:
# 1. Redistributions of source code must retain the above copyright
#    notice, this list of conditions and the following disclaimer.
# 2. Redistributions in binary form must reproduce the above copyright
#    notice, this list of conditions and the following disclaimer in the
#    documentation and/or other materials provided with the distribution.
# 3. Neither the name of the University nor the names of its contributors
#    may be used to endorse or promote products derived from this software
#    without specific prior written permission.
#
# THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
# ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
# IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
# ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
# FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
# DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
# OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
# HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
# LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
# OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
# SUCH DAMAGE.

include <sys/param.h>
include <sys/proc.h>
include <sys/systm.h>
include <sys/mbuf.h>
include <sys/resourcevar.h>
include <sys/device.h>
include <sys/user.h>
include <sys/signal.h>
include <sys/mbuf.h>
include <sys/socketvar.h>
include <netinet/in.h>
include <netinet/ip.h>

include <machine/cpu.h>
include <uvm/uvm_extern.h>

include <arm/fiq.h>

include <machine/pmap.h>
include <machine/frame.h>
include <machine/vmparam.h>

export	VM_MIN_ADDRESS
export	VM_MAXUSER_ADDRESS

ifdef __ARM_FIQ_INDIRECT
define	__ARM_FIQ_INDIRECT	1
endif

export	DOMAIN_CLIENT
export	PMAP_DOMAIN_KERNEL

ifdef PMAP_INCLUDE_PTE_SYNC
define	PMAP_INCLUDE_PTE_SYNC	1
endif

export	PAGE_SIZE
export	UPAGES
export	PAGE_SHIFT

export	SONPROC

struct	proc
member	p_addr
#member	p_priority
#member	p_wchan
member	p_stat
# XXX use PROC_SIZEOF in new code whenever possible
define	PROCSIZE		sizeof(struct proc)

struct	pcb
member	pcb_tf
member	pcb_pagedir
member	pcb_pl1vec
member	pcb_l1vec
member	pcb_dacr
member	pcb_cstate
member	pcb_flags
member	PCB_R8			pcb_un.un_32.pcb32_r8
member	PCB_R9			pcb_un.un_32.pcb32_r9
member	PCB_R10			pcb_un.un_32.pcb32_r10
member	PCB_R11			pcb_un.un_32.pcb32_r11
member	PCB_R12			pcb_un.un_32.pcb32_r12
member	PCB_SP			pcb_un.un_32.pcb32_sp
member	PCB_LR			pcb_un.un_32.pcb32_lr
member	PCB_PC			pcb_un.un_32.pcb32_pc
member	PCB_UND_SP		pcb_un.un_32.pcb32_und_sp
member	pcb_onfault
member	pcb_tcb
# XXX use USER_SIZEOF in new code whenever possible
define	USER_SIZE		sizeof(struct user)

struct	uvmexp
member	V_TRAP			traps
member	V_INTR			intrs
member	V_SOFT			softs

struct	vmspace
member	vm_map
member	VM_PMAP			vm_map.pmap

union	pmap_cache_state
member	cs_tlb_id
member	cs_tlb_d
member	cs_tlb
member	cs_cache_id
member	cs_cache_d
member	cs_cache
member	cs_all

struct	pmap
member	PMAP_CSTATE		pm_cstate

struct	uprof
member	pr_base
member	pr_size
member	pr_off
member	pr_scale

export	SIGTRAP
export	SIGEMT

struct	sigframe
member	SIGF_SC			sf_sc

struct	trapframe
member	tf_r0
member	tf_r10
member	tf_pc
# XXX use TRAFRAME_SIZEOF in new code whenever possible
define	TRAPFRAMESIZE		sizeof(struct trapframe)

struct	cpu_functions
member	cf_icache_sync_all
member	cf_idcache_wbinv_all
member	cf_dcache_wb_range
member	cf_tlb_flushID_SE
member	cf_context_switch
member	cf_sleep
member	cf_control

struct	cpu_info
member	ci_curproc
member	ci_curpcb
member	ci_idepth

# Constants required for in_cksum() and friends.
define	M_LEN			offsetof(struct mbuf, m_len)
define	M_DATA			offsetof(struct mbuf, m_data)
define	M_NEXT			offsetof(struct mbuf, m_next)
define	IP_SRC			offsetof(struct ip, ip_src)
define	IP_DST			offsetof(struct ip, ip_dst)
@


1.15
log
@Kill commented out & unused CI_CURPRIORITY.
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.14 2014/08/21 14:24:08 mpi Exp $
d102 1
@


1.14
log
@Kill the remaining <netinet/in_systm.h> inclusion!
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.13 2013/09/12 11:43:51 patrick Exp $
a154 1
#member	CI_CURPRIORITY		ci_schedstate.spc_curpriority
@


1.13
log
@Store curpcb in cpu_info instead of a global variable, for SMP.

ok rapha@@
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.12 2013/09/10 12:35:25 patrick Exp $
a44 1
include <netinet/in_systm.h>
a45 2
include <netinet/ip6.h>
include <netinet/ip_var.h>
@


1.12
log
@Store the current interrupt depth in curcpu, so that it's per CPU
and not just a global variable.

ok rapha@@
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.11 2013/04/30 13:04:25 patrick Exp $
d160 1
a160 1
#member	ci_curpcb
@


1.11
log
@Add context switching code matching to our pmap for ARMv7.

ok bmercer@@
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.10 2012/02/26 15:28:27 miod Exp $
d161 1
@


1.10
log
@Remove no longer _KERNEL-visible constants which aren't used anyway.
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.9 2011/09/20 22:02:11 miod Exp $
d149 1
@


1.9
log
@Late spring cleaning of the arm code for old dusty bits we do not want to
keep:
- remove bootconfig parameter passing feature (unused).
- unifdef __PROG32 and remove all remains of arm26 code.
- remove ARMFPE support (unused).
- remove support for ARM2, ARM2AS, ARM3, ARM6, ARM7, ARM7TDMI and StrongARM
  processor families, and the related silicon bug workarounds (especially
  the SA-110 STM^ bug).
- remove cpu_functions no longer necessary after previous removals.
- remove ARM32_DISABLE_ALIGNMENT_FAULTS option (unused).
- make FIQ support conditional on option FIQ (unused, but may be eventually).

Discussed with drahn@@ and jasper@@ long ago, I was sitting on this commit for
no good reason.
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.8 2007/10/10 15:53:51 art Exp $
a75 4

# Important offsets into the lwp and proc structs & associated constants
export	P_TRACED
export	P_PROFIL
@


1.8
log
@Make context switching much more MI:
 - Move the functionality of choosing a process from cpu_switch into
   a much simpler function: cpu_switchto. Instead of having the locore
   code walk the run queues, let the MI code choose the process we
   want to run and only implement the context switching itself in MD
   code.
 - Let MD context switching run without worrying about spls or locks.
 - Instead of having the idle loop implemented with special contexts
   in MD code, implement one idle proc for each cpu. make the idle
   loop MI with MD hooks.
 - Change the proc lists from the old style vax queues to TAILQs.
 - Change the sleep queue from vax queues to TAILQs. This makes
   wakeup() go from O(n^2) to O(n)

there will be some MD fallout, but it will be fixed shortly.
There's also a few cleanups to be done after this.

deraadt@@, kettenis@@ ok
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.7 2007/05/14 07:07:09 art Exp $
d59 3
a61 1
define	__PROG32		1
a64 3

export	VM_MIN_ADDRESS
export	VM_MAXUSER_ADDRESS
@


1.7
log
@Switch arm to __HAVE_CPUINFO. Least effort.

deraadt@@ ok
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.6 2006/03/07 20:20:28 miod Exp $
a84 2
member	p_forw
member	p_back
d86 2
a87 2
member	p_priority
member	p_wchan
@


1.6
log
@Remove COMPAT_1x stuff inherited from NetBSD, which does not apply to us.
ok uwe@@
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.5 2005/12/13 00:18:18 jsg Exp $
d165 2
a166 4
ifdef MULTIPROCESSOR
member	ci_curlwp
member	ci_curpcb
endif
@


1.5
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.
Checked by ian@@, deraadt@@ and millert@@, arm portion checked by drahn@@
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.4 2005/05/10 21:32:20 brad Exp $
a111 1
export	PCB_NOALIGNFLT
a167 3
endif
if defined(COMPAT_15) && defined(EXEC_AOUT)
member	ci_ctrl
@


1.4
log
@enable arm optimized in4_cksum

ok drahn@@
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.3 2004/06/13 21:49:13 niklas Exp $
d18 1
a18 5
# 3. All advertising materials mentioning features or use of this software
#    must display the following acknowledgement:
#	This product includes software developed by the University of
#	California, Berkeley and its contributors.
# 4. Neither the name of the University nor the names of its contributors
@


1.3
log
@debranch SMP, have fun
@
text
@d1 1
a1 1
#	$OpenBSD$
d179 5
a183 7
struct	mbuf
member	m_len
member	m_data
member	m_next
struct	ip
member	ip_src
member	ip_dst
@


1.2
log
@Use as much syntaxic sugar from genassym.sh to make this file more readable.
ok drahn@@
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.1 2004/02/01 05:09:48 drahn Exp $
d85 2
@


1.2.2.1
log
@Merge of current from two weeks agointo the SMP branch
@
text
@d1 1
a1 1
#	$OpenBSD$
d68 2
a69 2
define	VM_MIN_ADDRESS		VM_MIN_ADDRESS
define	VM_MAXUSER_ADDRESS	VM_MAXUSER_ADDRESS
d71 2
a72 2
define	DOMAIN_CLIENT		DOMAIN_CLIENT
define	PMAP_DOMAIN_KERNEL	PMAP_DOMAIN_KERNEL
d78 3
a80 3
define	PAGE_SIZE		PAGE_SIZE
define	UPAGES			UPAGES
define	PAGE_SHIFT		PAGE_SHIFT
d83 2
a84 2
define	P_TRACED		P_TRACED
define	P_PROFIL		P_PROFIL
d86 9
a94 25
define	P_FORW			offsetof(struct proc, p_forw)
define	P_BACK			offsetof(struct proc, p_back)
define	P_ADDR			offsetof(struct proc, p_addr)
define	P_PRIORITY		offsetof(struct proc, p_priority)
define	P_WCHAN			offsetof(struct proc, p_wchan)
define	P_STAT			offsetof(struct proc, p_stat)

define	PCB_TF			offsetof(struct pcb, pcb_tf)
define	PCB_PAGEDIR		offsetof(struct pcb, pcb_pagedir)
define	PCB_PL1VEC		offsetof(struct pcb, pcb_pl1vec)
define	PCB_L1VEC		offsetof(struct pcb, pcb_l1vec)
define	PCB_DACR		offsetof(struct pcb, pcb_dacr)
define	PCB_CSTATE		offsetof(struct pcb, pcb_cstate)
define	PCB_FLAGS		offsetof(struct pcb, pcb_flags)
define	PCB_R8			offsetof(struct pcb, pcb_un.un_32.pcb32_r8)
define	PCB_R9			offsetof(struct pcb, pcb_un.un_32.pcb32_r9)
define	PCB_R10			offsetof(struct pcb, pcb_un.un_32.pcb32_r10)
define	PCB_R11			offsetof(struct pcb, pcb_un.un_32.pcb32_r11)
define	PCB_R12			offsetof(struct pcb, pcb_un.un_32.pcb32_r12)
define	PCB_SP			offsetof(struct pcb, pcb_un.un_32.pcb32_sp)
define	PCB_LR			offsetof(struct pcb, pcb_un.un_32.pcb32_lr)
define	PCB_PC			offsetof(struct pcb, pcb_un.un_32.pcb32_pc)
define	PCB_UND_SP		offsetof(struct pcb, pcb_un.un_32.pcb32_und_sp)
define	PCB_ONFAULT		offsetof(struct pcb, pcb_onfault)
define	PCB_NOALIGNFLT		PCB_NOALIGNFLT
d96 20
d118 38
a155 31
define	V_TRAP			offsetof(struct uvmexp, traps)
define	V_INTR			offsetof(struct uvmexp, intrs)
define	V_SOFT			offsetof(struct uvmexp, softs)

define	VM_MAP			offsetof(struct vmspace, vm_map)
define	VM_PMAP			offsetof(struct vmspace, vm_map.pmap)

define	CS_TLB_ID		offsetof(union pmap_cache_state, cs_tlb_id)
define	CS_TLB_D		offsetof(union pmap_cache_state, cs_tlb_d)
define	CS_TLB			offsetof(union pmap_cache_state, cs_tlb)
define	CS_CACHE_ID		offsetof(union pmap_cache_state, cs_cache_id)
define	CS_CACHE_D		offsetof(union pmap_cache_state, cs_cache_d)
define	CS_CACHE		offsetof(union pmap_cache_state, cs_cache)
define	CS_ALL			offsetof(union pmap_cache_state, cs_all)
define	PMAP_CSTATE		offsetof(struct pmap, pm_cstate)

define	PR_BASE			offsetof(struct uprof, pr_base)
define	PR_SIZE			offsetof(struct uprof, pr_size)
define	PR_OFF			offsetof(struct uprof, pr_off)
define	PR_SCALE		offsetof(struct uprof, pr_scale)

define	SIGTRAP			SIGTRAP
define	SIGEMT			SIGEMT

define SIGF_SC			offsetof(struct sigframe, sf_sc)

define	TF_R0			offsetof(struct trapframe, tf_r0)
define	TF_R10			offsetof(struct trapframe, tf_r10)
define	TF_PC			offsetof(struct trapframe, tf_pc)

define	PROCSIZE		sizeof(struct proc)
d158 7
a164 6
define	CF_IDCACHE_WBINV_ALL	offsetof(struct cpu_functions, cf_idcache_wbinv_all)
define	CF_DCACHE_WB_RANGE	offsetof(struct cpu_functions, cf_dcache_wb_range)
define	CF_TLB_FLUSHID_SE	offsetof(struct cpu_functions, cf_tlb_flushID_SE)
define	CF_CONTEXT_SWITCH	offsetof(struct cpu_functions, cf_context_switch)
define	CF_SLEEP		offsetof(struct cpu_functions, cf_sleep)
define	CF_CONTROL		offsetof(struct cpu_functions, cf_control)
d166 2
a167 1
#define	CI_CURPRIORITY		offsetof(struct cpu_info, ci_schedstate.spc_curpriority)
d169 2
a170 2
define	CI_CURLWP		offsetof(struct cpu_info, ci_curlwp)
define	CI_CURPCB		offsetof(struct cpu_info, ci_curpcb)
d173 1
a173 1
define	CI_CTRL			offsetof(struct cpu_info, ci_ctrl)
d177 7
a183 5
define	M_LEN				offsetof(struct mbuf, m_len)
define	M_DATA				offsetof(struct mbuf, m_data)
define	M_NEXT				offsetof(struct mbuf, m_next)
define	IP_SRC				offsetof(struct ip, ip_src)
define	IP_DST				offsetof(struct ip, ip_dst)
@


1.2.2.2
log
@Merge with the trunk
@
text
@d68 2
a69 2
export	VM_MIN_ADDRESS
export	VM_MAXUSER_ADDRESS
d71 2
a72 2
export	DOMAIN_CLIENT
export	PMAP_DOMAIN_KERNEL
d78 3
a80 3
export	PAGE_SIZE
export	UPAGES
export	PAGE_SHIFT
d83 2
a84 2
export	P_TRACED
export	P_PROFIL
d86 25
a110 9
struct	proc
member	p_forw
member	p_back
member	p_addr
member	p_priority
member	p_wchan
member	p_stat
# XXX use PROC_SIZEOF in new code whenever possible
define	PROCSIZE		sizeof(struct proc)
a111 20
struct	pcb
member	pcb_tf
member	pcb_pagedir
member	pcb_pl1vec
member	pcb_l1vec
member	pcb_dacr
member	pcb_cstate
member	pcb_flags
member	PCB_R8			pcb_un.un_32.pcb32_r8
member	PCB_R9			pcb_un.un_32.pcb32_r9
member	PCB_R10			pcb_un.un_32.pcb32_r10
member	PCB_R11			pcb_un.un_32.pcb32_r11
member	PCB_R12			pcb_un.un_32.pcb32_r12
member	PCB_SP			pcb_un.un_32.pcb32_sp
member	PCB_LR			pcb_un.un_32.pcb32_lr
member	PCB_PC			pcb_un.un_32.pcb32_pc
member	PCB_UND_SP		pcb_un.un_32.pcb32_und_sp
member	pcb_onfault
export	PCB_NOALIGNFLT
# XXX use USER_SIZEOF in new code whenever possible
d114 31
a144 38
struct	uvmexp
member	V_TRAP			traps
member	V_INTR			intrs
member	V_SOFT			softs

struct	vmspace
member	vm_map
member	VM_PMAP			vm_map.pmap

union	pmap_cache_state
member	cs_tlb_id
member	cs_tlb_d
member	cs_tlb
member	cs_cache_id
member	cs_cache_d
member	cs_cache
member	cs_all

struct	pmap
member	PMAP_CSTATE		pm_cstate

struct	uprof
member	pr_base
member	pr_size
member	pr_off
member	pr_scale

export	SIGTRAP
export	SIGEMT

struct	sigframe
member	SIGF_SC			sf_sc

struct	trapframe
member	tf_r0
member	tf_r10
member	tf_pc
# XXX use TRAFRAME_SIZEOF in new code whenever possible
d147 6
a152 7
struct	cpu_functions
member	cf_idcache_wbinv_all
member	cf_dcache_wb_range
member	cf_tlb_flushID_SE
member	cf_context_switch
member	cf_sleep
member	cf_control
d154 1
a154 2
struct	cpu_info
#member	CI_CURPRIORITY		ci_schedstate.spc_curpriority
d156 2
a157 2
member	ci_curlwp
member	ci_curpcb
d160 1
a160 1
member	ci_ctrl
d164 5
a168 7
struct	mbuf
member	m_len
member	m_data
member	m_next
struct	ip
member	ip_src
member	ip_dst
@


1.2.2.3
log
@SONPROC, ok drahn deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.2.2.2 2004/06/05 23:10:44 niklas Exp $
a84 2

export	SONPROC
@


1.1
log
@Arm port, NetBSD codebase stripped down, 32bit only support.
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.2 2004/01/29 16:17:16 drahn Exp $
d68 2
a69 2
define	VM_MIN_ADDRESS		VM_MIN_ADDRESS
define	VM_MAXUSER_ADDRESS	VM_MAXUSER_ADDRESS
d71 2
a72 2
define	DOMAIN_CLIENT		DOMAIN_CLIENT
define	PMAP_DOMAIN_KERNEL	PMAP_DOMAIN_KERNEL
d78 3
a80 3
define	PAGE_SIZE		PAGE_SIZE
define	UPAGES			UPAGES
define	PAGE_SHIFT		PAGE_SHIFT
d83 2
a84 2
define	P_TRACED		P_TRACED
define	P_PROFIL		P_PROFIL
d86 9
a94 25
define	P_FORW			offsetof(struct proc, p_forw)
define	P_BACK			offsetof(struct proc, p_back)
define	P_ADDR			offsetof(struct proc, p_addr)
define	P_PRIORITY		offsetof(struct proc, p_priority)
define	P_WCHAN			offsetof(struct proc, p_wchan)
define	P_STAT			offsetof(struct proc, p_stat)

define	PCB_TF			offsetof(struct pcb, pcb_tf)
define	PCB_PAGEDIR		offsetof(struct pcb, pcb_pagedir)
define	PCB_PL1VEC		offsetof(struct pcb, pcb_pl1vec)
define	PCB_L1VEC		offsetof(struct pcb, pcb_l1vec)
define	PCB_DACR		offsetof(struct pcb, pcb_dacr)
define	PCB_CSTATE		offsetof(struct pcb, pcb_cstate)
define	PCB_FLAGS		offsetof(struct pcb, pcb_flags)
define	PCB_R8			offsetof(struct pcb, pcb_un.un_32.pcb32_r8)
define	PCB_R9			offsetof(struct pcb, pcb_un.un_32.pcb32_r9)
define	PCB_R10			offsetof(struct pcb, pcb_un.un_32.pcb32_r10)
define	PCB_R11			offsetof(struct pcb, pcb_un.un_32.pcb32_r11)
define	PCB_R12			offsetof(struct pcb, pcb_un.un_32.pcb32_r12)
define	PCB_SP			offsetof(struct pcb, pcb_un.un_32.pcb32_sp)
define	PCB_LR			offsetof(struct pcb, pcb_un.un_32.pcb32_lr)
define	PCB_PC			offsetof(struct pcb, pcb_un.un_32.pcb32_pc)
define	PCB_UND_SP		offsetof(struct pcb, pcb_un.un_32.pcb32_und_sp)
define	PCB_ONFAULT		offsetof(struct pcb, pcb_onfault)
define	PCB_NOALIGNFLT		PCB_NOALIGNFLT
d96 20
d118 38
a155 31
define	V_TRAP			offsetof(struct uvmexp, traps)
define	V_INTR			offsetof(struct uvmexp, intrs)
define	V_SOFT			offsetof(struct uvmexp, softs)

define	VM_MAP			offsetof(struct vmspace, vm_map)
define	VM_PMAP			offsetof(struct vmspace, vm_map.pmap)

define	CS_TLB_ID		offsetof(union pmap_cache_state, cs_tlb_id)
define	CS_TLB_D		offsetof(union pmap_cache_state, cs_tlb_d)
define	CS_TLB			offsetof(union pmap_cache_state, cs_tlb)
define	CS_CACHE_ID		offsetof(union pmap_cache_state, cs_cache_id)
define	CS_CACHE_D		offsetof(union pmap_cache_state, cs_cache_d)
define	CS_CACHE		offsetof(union pmap_cache_state, cs_cache)
define	CS_ALL			offsetof(union pmap_cache_state, cs_all)
define	PMAP_CSTATE		offsetof(struct pmap, pm_cstate)

define	PR_BASE			offsetof(struct uprof, pr_base)
define	PR_SIZE			offsetof(struct uprof, pr_size)
define	PR_OFF			offsetof(struct uprof, pr_off)
define	PR_SCALE		offsetof(struct uprof, pr_scale)

define	SIGTRAP			SIGTRAP
define	SIGEMT			SIGEMT

define SIGF_SC			offsetof(struct sigframe, sf_sc)

define	TF_R0			offsetof(struct trapframe, tf_r0)
define	TF_R10			offsetof(struct trapframe, tf_r10)
define	TF_PC			offsetof(struct trapframe, tf_pc)

define	PROCSIZE		sizeof(struct proc)
d158 7
a164 6
define	CF_IDCACHE_WBINV_ALL	offsetof(struct cpu_functions, cf_idcache_wbinv_all)
define	CF_DCACHE_WB_RANGE	offsetof(struct cpu_functions, cf_dcache_wb_range)
define	CF_TLB_FLUSHID_SE	offsetof(struct cpu_functions, cf_tlb_flushID_SE)
define	CF_CONTEXT_SWITCH	offsetof(struct cpu_functions, cf_context_switch)
define	CF_SLEEP		offsetof(struct cpu_functions, cf_sleep)
define	CF_CONTROL		offsetof(struct cpu_functions, cf_control)
d166 2
a167 1
#define	CI_CURPRIORITY		offsetof(struct cpu_info, ci_schedstate.spc_curpriority)
d169 2
a170 2
define	CI_CURLWP		offsetof(struct cpu_info, ci_curlwp)
define	CI_CURPCB		offsetof(struct cpu_info, ci_curpcb)
d173 1
a173 1
define	CI_CTRL			offsetof(struct cpu_info, ci_ctrl)
d177 7
a183 5
define	M_LEN				offsetof(struct mbuf, m_len)
define	M_DATA				offsetof(struct mbuf, m_data)
define	M_NEXT				offsetof(struct mbuf, m_next)
define	IP_SRC				offsetof(struct ip, ip_src)
define	IP_DST				offsetof(struct ip, ip_dst)
@

