head	1.37;
access;
symbols
	OPENBSD_5_5:1.36.0.6
	OPENBSD_5_5_BASE:1.36
	OPENBSD_5_4:1.36.0.2
	OPENBSD_5_4_BASE:1.36
	OPENBSD_5_3:1.35.0.2
	OPENBSD_5_3_BASE:1.35
	OPENBSD_5_2:1.34.0.6
	OPENBSD_5_2_BASE:1.34
	OPENBSD_5_1_BASE:1.34
	OPENBSD_5_1:1.34.0.4
	OPENBSD_5_0:1.34.0.2
	OPENBSD_5_0_BASE:1.34
	OPENBSD_4_9:1.33.0.4
	OPENBSD_4_9_BASE:1.33
	OPENBSD_4_8:1.33.0.2
	OPENBSD_4_8_BASE:1.33
	OPENBSD_4_7:1.32.0.4
	OPENBSD_4_7_BASE:1.32
	OPENBSD_4_6:1.32.0.6
	OPENBSD_4_6_BASE:1.32
	OPENBSD_4_5:1.32.0.2
	OPENBSD_4_5_BASE:1.32
	OPENBSD_4_4:1.31.0.10
	OPENBSD_4_4_BASE:1.31
	OPENBSD_4_3:1.31.0.8
	OPENBSD_4_3_BASE:1.31
	OPENBSD_4_2:1.31.0.6
	OPENBSD_4_2_BASE:1.31
	OPENBSD_4_1:1.31.0.4
	OPENBSD_4_1_BASE:1.31
	OPENBSD_4_0:1.31.0.2
	OPENBSD_4_0_BASE:1.31
	OPENBSD_3_9:1.28.0.2
	OPENBSD_3_9_BASE:1.28
	OPENBSD_3_8:1.27.0.2
	OPENBSD_3_8_BASE:1.27
	OPENBSD_3_7:1.26.0.2
	OPENBSD_3_7_BASE:1.26
	OPENBSD_3_6:1.25.0.2
	OPENBSD_3_6_BASE:1.25
	SMP_SYNC_A:1.25
	SMP_SYNC_B:1.25
	OPENBSD_3_5:1.21.0.2
	OPENBSD_3_5_BASE:1.21
	OPENBSD_3_4:1.17.0.4
	OPENBSD_3_4_BASE:1.17
	UBC_SYNC_A:1.17
	OPENBSD_3_3:1.17.0.2
	OPENBSD_3_3_BASE:1.17
	OPENBSD_3_2:1.16.0.4
	OPENBSD_3_2_BASE:1.16
	OPENBSD_3_1:1.16.0.2
	OPENBSD_3_1_BASE:1.16
	UBC_SYNC_B:1.16
	UBC:1.14.0.2
	UBC_BASE:1.14
	OPENBSD_3_0:1.7.0.2
	OPENBSD_3_0_BASE:1.7
	OPENBSD_2_9:1.4.0.2
	OPENBSD_2_9_BASE:1.4
	OPENBSD_2_8:1.1.0.8
	OPENBSD_2_8_BASE:1.1
	OPENBSD_2_7:1.1.0.6
	OPENBSD_2_7_BASE:1.1
	SMP:1.1.0.4
	SMP_BASE:1.1
	kame_19991208:1.1
	OPENBSD_2_6:1.1.0.2
	OPENBSD_2_6_BASE:1.1;
locks; strict;
comment	@# @;


1.37
date	2014.03.18.22.36.35;	author miod;	state dead;
branches;
next	1.36;

1.36
date	2013.05.17.22.51.59;	author miod;	state Exp;
branches;
next	1.35;

1.35
date	2013.02.19.20.52.26;	author miod;	state Exp;
branches;
next	1.34;

1.34
date	2011.06.29.20.52.09;	author matthew;	state Exp;
branches;
next	1.33;

1.33
date	2010.07.03.03.59.17;	author krw;	state Exp;
branches;
next	1.32;

1.32
date	2009.02.14.17.42.00;	author miod;	state Exp;
branches;
next	1.31;

1.31
date	2006.05.28.11.09.56;	author miod;	state Exp;
branches;
next	1.30;

1.30
date	2006.05.02.21.43.07;	author miod;	state Exp;
branches;
next	1.29;

1.29
date	2006.04.19.22.09.38;	author miod;	state Exp;
branches;
next	1.28;

1.28
date	2005.09.06.19.21.57;	author miod;	state Exp;
branches;
next	1.27;

1.27
date	2005.05.01.07.54.42;	author david;	state Exp;
branches;
next	1.26;

1.26
date	2004.09.16.09.14.03;	author mickey;	state Exp;
branches;
next	1.25;

1.25
date	2004.05.07.18.12.55;	author miod;	state Exp;
branches;
next	1.24;

1.24
date	2004.04.29.14.33.27;	author miod;	state Exp;
branches;
next	1.23;

1.23
date	2004.04.26.12.34.05;	author miod;	state Exp;
branches;
next	1.22;

1.22
date	2004.04.24.19.51.44;	author miod;	state Exp;
branches;
next	1.21;

1.21
date	2003.12.27.23.58.08;	author miod;	state Exp;
branches;
next	1.20;

1.20
date	2003.12.25.21.02.46;	author miod;	state Exp;
branches;
next	1.19;

1.19
date	2003.12.25.00.21.16;	author miod;	state Exp;
branches;
next	1.18;

1.18
date	2003.10.11.22.06.48;	author miod;	state Exp;
branches;
next	1.17;

1.17
date	2003.01.04.16.20.30;	author miod;	state Exp;
branches;
next	1.16;

1.16
date	2001.12.22.18.48.50;	author smurph;	state Exp;
branches;
next	1.15;

1.15
date	2001.12.22.18.22.38;	author smurph;	state Exp;
branches;
next	1.14;

1.14
date	2001.12.19.07.04.41;	author smurph;	state Exp;
branches
	1.14.2.1;
next	1.13;

1.13
date	2001.12.19.04.02.25;	author smurph;	state Exp;
branches;
next	1.12;

1.12
date	2001.12.16.23.49.43;	author miod;	state Exp;
branches;
next	1.11;

1.11
date	2001.12.13.20.32.56;	author miod;	state Exp;
branches;
next	1.10;

1.10
date	2001.12.13.08.55.51;	author smurph;	state Exp;
branches;
next	1.9;

1.9
date	2001.11.27.05.26.34;	author miod;	state Exp;
branches;
next	1.8;

1.8
date	2001.11.08.23.53.12;	author miod;	state Exp;
branches;
next	1.7;

1.7
date	2001.08.23.22.04.32;	author miod;	state Exp;
branches;
next	1.6;

1.6
date	2001.06.27.05.46.22;	author art;	state Exp;
branches;
next	1.5;

1.5
date	2001.05.31.21.05.00;	author miod;	state Exp;
branches;
next	1.4;

1.4
date	2001.04.09.20.40.51;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	2001.03.08.03.37.18;	author itojun;	state Exp;
branches;
next	1.2;

1.2
date	2001.03.07.02.00.08;	author miod;	state Exp;
branches;
next	1.1;

1.1
date	99.09.27.21.21.15;	author smurph;	state Exp;
branches
	1.1.4.1;
next	;

1.1.4.1
date	2001.04.18.16.10.48;	author niklas;	state Exp;
branches;
next	1.1.4.2;

1.1.4.2
date	2001.07.04.10.19.50;	author niklas;	state Exp;
branches;
next	1.1.4.3;

1.1.4.3
date	2001.10.31.03.01.18;	author nate;	state Exp;
branches;
next	1.1.4.4;

1.1.4.4
date	2001.11.13.21.04.14;	author niklas;	state Exp;
branches;
next	1.1.4.5;

1.1.4.5
date	2001.12.05.00.39.12;	author niklas;	state Exp;
branches;
next	1.1.4.6;

1.1.4.6
date	2002.03.06.01.08.05;	author niklas;	state Exp;
branches;
next	1.1.4.7;

1.1.4.7
date	2003.03.27.23.32.17;	author niklas;	state Exp;
branches;
next	1.1.4.8;

1.1.4.8
date	2004.02.19.10.49.06;	author niklas;	state Exp;
branches;
next	1.1.4.9;

1.1.4.9
date	2004.06.05.23.09.48;	author niklas;	state Exp;
branches;
next	;

1.14.2.1
date	2002.01.31.22.55.17;	author niklas;	state Exp;
branches;
next	1.14.2.2;

1.14.2.2
date	2003.05.19.21.45.52;	author tedu;	state Exp;
branches;
next	;


desc
@@


1.37
log
@Retire hp300, mvme68k and mvme88k ports. These ports have no users, keeping
this hardware alive is becoming increasingly difficult, and I should heed the
message sent by the three disks which have died on me over the last few days.

Noone sane will mourn these ports anyway. So long, and thanks for the fish.
@
text
@#	$OpenBSD: M197,v 1.36 2013/05/17 22:51:59 miod Exp $
#
# For further information on compiling OpenBSD kernels, see the config(8)
# man page.
#
# For further information on hardware support for this architecture, see
# the intro(4) man page.  For further information about kernel options
# for this architecture, see the options(4) man page.  For an explanation
# of each device driver in this file see the section 4 man page for the
# device.

machine		mvme88k m88k
include		"../../../conf/GENERIC"
maxusers	32			# estimated number of users

# Processor type
option		M88110
option		M88410

option		MVME197		# support for MVME197 (requires M88110, M88410)

config		bsd		swap generic

#
# devices
#

mainbus0	at root

# MVME1x7 devices
bussw0		at mainbus0 addr 0xfff00000
pcctwo0		at bussw0 offset 0x00000
nvram0		at pcctwo0 offset 0xc0000
vme0		at pcctwo0 offset 0x40000
ie0		at pcctwo0 offset 0x46000 ipl 3
osiop0		at pcctwo0 offset 0x47000 ipl 2
cl0		at pcctwo0 offset 0x45000 ipl 3
#lptwo0		at pcctwo0 offset 0x45000 ipl 1
memc0		at pcctwo0 offset 0x43000
memc1		at pcctwo0 offset 0x43100

vmes0		at vme0
vmel0		at vme0

# MVME327
vsbic0		at vmes0 addr 0xffffa600 ipl 2
vsbic1		at vmes0 addr 0xffffa700 ipl 2
# MVME328, MVME328XT
vs0		at vmes0 addr 0xffff9000 ipl 2
vs1		at vmes0 addr 0xffff9800 ipl 2
vs2		at vmes0 addr 0xffff4800 ipl 2
vs3		at vmes0 addr 0xffff5800 ipl 2
vs4		at vmes0 addr 0xffff7000 ipl 2
vs5		at vmes0 addr 0xffff7800 ipl 2
# MVME332XT
vx0		at vmes0 addr 0xff780000 ipl 3
vx1		at vmes0 addr 0xff790000 ipl 3
vx2		at vmes0 addr 0xff7a0000 ipl 3
vx3		at vmes0 addr 0xff7b0000 ipl 3
# MVME376
le0		at vmes0 addr 0xffff1200 ipl 3
le1		at vmes0 addr 0xffff1400 ipl 3
le2		at vmes0 addr 0xffff1600 ipl 3
le3		at vmes0 addr 0xffff5400 ipl 3
le4		at vmes0 addr 0xffff5600 ipl 3
le5		at vmes0 addr 0xffffa400 ipl 3


scsibus*	at scsi?
sd*		at scsibus?
st*		at scsibus?
cd*		at scsibus?
ch*		at scsibus?
safte*		at scsibus?
ses*		at scsibus?
uk*		at scsibus?
@


1.36
log
@Preliminary support for MVME180 and MVME181 boards. On-board serial ports
and VME controller are supported; tod chip isn't supported yet (coming soon).
MVME236 memory boards are not supported and won't likely be (unless I get my
hands on one).

MVME181-1 boots multiuser (slowly) with MVME328 SCSI and MVME376 Ethernet
despite only having 8MB of memory onboard.

MVME180 untested; might need tweaking to get MVME SCSI and Ethernet boards
supported.

Many thanks to Matti Nummi for lending me an MVME181 board.
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.35 2013/02/19 20:52:26 miod Exp $
@


1.35
log
@Introduce `option M88410', to be added to 88110 system designs making use of the
#$%&#@@! MC88410 chip. This will allow design-agonstic m88k-specific code to be
able to tell pure 88110 kernels apart from possible 88110+88410 ones.
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.34 2011/06/29 20:52:09 matthew Exp $
d28 1
a28 1
mainbus0 at root
d31 10
a40 10
bussw0	at mainbus0 addr 0xfff00000
pcctwo0 at bussw0 offset 0x00000
nvram0	at pcctwo0 offset 0xc0000
vme0	at pcctwo0 offset 0x40000
ie0	at pcctwo0 offset 0x46000 ipl 3
osiop0	at pcctwo0 offset 0x47000 ipl 2
cl0	at pcctwo0 offset 0x45000 ipl 3
#lptwo0	at pcctwo0 offset 0x45000 ipl 1
memc0	at pcctwo0 offset 0x43000
memc1	at pcctwo0 offset 0x43100
d42 2
a43 2
vmes0	at vme0
vmel0	at vme0
d46 2
a47 2
vsbic0	at vmes0 addr 0xffffa600 ipl 2
vsbic1	at vmes0 addr 0xffffa700 ipl 2
d49 6
a54 6
vs0	at vmes0 addr 0xffff9000 ipl 2
vs1	at vmes0 addr 0xffff9800 ipl 2
vs2	at vmes0 addr 0xffff4800 ipl 2
vs3	at vmes0 addr 0xffff5800 ipl 2
vs4	at vmes0 addr 0xffff7000 ipl 2
vs5	at vmes0 addr 0xffff7800 ipl 2
d56 4
a59 4
vx0	at vmes0 addr 0xff780000 ipl 3
vx1	at vmes0 addr 0xff790000 ipl 3
vx2	at vmes0 addr 0xff7a0000 ipl 3
vx3	at vmes0 addr 0xff7b0000 ipl 3
d61 16
a76 13
le0	at vmes0 addr 0xffff1200 ipl 3
le1	at vmes0 addr 0xffff1400 ipl 3
le2	at vmes0 addr 0xffff1600 ipl 3


scsibus* at scsi?
sd*	at scsibus?
st*	at scsibus?
cd*	at scsibus?
ch*	at scsibus?
safte*	at scsibus?
ses*	at scsibus?
uk*	at scsibus?
@


1.34
log
@Replace all instances of "scsibus* at hba?" with a single "scsibus* at
scsi?" rule, similar to how ethernet PHY drivers attach at mii.

Discussed on icb.
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.33 2010/07/03 03:59:17 krw Exp $
d18 1
d20 1
a20 1
option		MVME197			# support for 197 (requires M88110)
@


1.33
log
@No more ss(4) or usscanner(4). Unused, unloved and unmaintained.
General huzzahs.

"go for it" deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.32 2009/02/14 17:42:00 miod Exp $
a63 3
scsibus* at osiop?
scsibus* at vs?
scsibus* at vsbic?
d65 1
@


1.32
log
@Sync device lists with GENERIC.
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.52 2006/05/28 11:09:56 miod Exp $
a71 1
ss*	at scsibus?
@


1.31
log
@Configure network devices at ipl 3, not ipl 1.
@
text
@d1 14
a14 5
#	$OpenBSD: M197,v 1.30 2006/05/02 21:43:07 miod Exp $

machine mvme88k m88k

include "../../../conf/GENERIC"
d19 1
a19 1
option		MVME197		# support for 197 (requires M88110)
d21 1
a21 1
maxusers 64
d23 3
a25 1
config	bsd swap on generic
a26 1
# ------------------------------ devices --------------------------------
d29 1
a29 1
# ------------------------------ mainbus devices ------------------------
a30 2

# ----------------------------- busswitch devices -----------------------
d32 1
a32 2

# ------------------------------ pcctwo devices -------------------------
a33 1
nvram0	at pcctwo0 offset 0xc0000
d37 3
a39 3
#lptwo0	at pcctwo0 addr 0x45000 ipl 1
#memc0	at pcctwo0 addr 0x43000
#memc1	at pcctwo0 addr 0x43100
a40 1
# ------------------------------ vme0 devices --------------------------
d44 11
a54 1
# ------------------------------ vmes0 devices -------------------------
d59 1
a62 6
vs0	at vmes0 addr 0xffff9000 ipl 2
vs1	at vmes0 addr 0xffff9800 ipl 2
vs2	at vmes0 addr 0xffff4800 ipl 2
vs3	at vmes0 addr 0xffff5800 ipl 2
vs4	at vmes0 addr 0xffff7000 ipl 2
vs5	at vmes0 addr 0xffff7800 ipl 2
d64 1
a64 1
# ------------------------------- vs0 devices --------------------------
d66 1
a67 4
# ----------------------------- osiop0 devices -------------------------
scsibus* at osiop?

# ------------------------------ scsibus? devices ----------------------
d71 5
@


1.30
log
@Wave goodbye to bugtty on mvme88k as well.
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.29 2006/04/19 22:09:38 miod Exp $
d28 1
a28 1
ie0	at pcctwo0 offset 0x46000 ipl 1
d31 1
a31 1
#lptwo0	at pcctwo0 addr 0x45000 ipl 1 size
d44 3
a46 3
le0	at vmes0 addr 0xffff1200 ipl 1
le1	at vmes0 addr 0xffff1400 ipl 1
le2	at vmes0 addr 0xffff1600 ipl 1
@


1.29
log
@Get rid of the clock device attachment - since the clock is not something
we can live without, move it into the board-dependent code. This even makes
the code slightly smaller.

clock.c is moved from dev/ to mvme88k/ and only keeps common variables and
delay().
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.28 2005/09/06 19:21:57 miod Exp $
a19 1
bugtty0 at mainbus0
@


1.28
log
@Remove misleading NCPUS (hardcoded) option. From the SMP tree.
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.27 2005/05/01 07:54:42 david Exp $
a26 1
clock0	at pcctwo0 ipl 5
@


1.27
log
@spacing; ok miod@@ deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.26 2004/09/16 09:14:03 mickey Exp $
a10 2

option		"NCPUS=1"	# Number of cpus supported (max 4)
@


1.26
log
@cleanup deafult locators (blah ?); please check that your most hated architecture is still fluffy (;
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.25 2004/05/07 18:12:55 miod Exp $
d23 1
a23 1
bussw0  at mainbus0 addr 0xfff00000
@


1.25
log
@Replace the old ssh(4) NCR53C710 scsi driver with a pcctwo attachment for
the MI osiop(4) driver.

This improves performance very slighly and should also improve reliability.

Tested on 25MHz (50MHz osiop) and 33MHz (66MHz osiop) MVME187 boards.
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.24 2004/04/29 14:33:27 miod Exp $
d65 3
a67 3
sd*	at scsibus? target ? lun ?
st*	at scsibus? target ? lun ?
cd*	at scsibus? target ? lun ?
@


1.24
log
@Continue factorizing m88k common code, this time files in <arch>/<arch>
which were copied verbatim from mvme88k to luna88k.

This requires backing out syntactic sugar in mvme88k kernel configuration
files which would deduct the required processor types from the board models,
as the common code only depends upon the M88100 and M88110 defines.
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.23 2004/04/26 12:34:05 miod Exp $
d33 1
a33 1
ssh0	at pcctwo0 offset 0x47000 ipl 2
d61 2
a62 2
# ------------------------------ ssh0 devices --------------------------
scsibus* at ssh?
@


1.23
log
@Start factorizing luna88k and mvme88k common parts.
For now, include files only.
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.22 2004/04/24 19:51:44 miod Exp $
d7 5
a11 1
option		MVME197		# support for 197
a12 6
option		BUGMAP		# use Bug Rom VME Mappings
#option		DEBUG		# print debugging statements
#option		EH_DEBUG	# debugging code for exception handlers

# Define this if your processor has the xxx.usr bug (mask C82N)
option		ERRATA__XXX_USR
@


1.22
log
@Preliminary switch to an mvme88k bus_space world. Not all drivers have been
converted yet, and they rely upon some linear mappings provided by bus_space.

In order to not impact performance, almost all the bus_space accesses go
through macros and inline functions. This currently restricts us to D16 and
D32 access modes, which are selected at compilation time. Since there are no
plans to support D8 vme devices in the future, this is acceptable for now.

This makes the "len" locator for vme devices go away, and allows to simplify
some code which was using the pcctwo device, and will now directly access
hardware which is known to exist, rather than wait until the device is
attached.

While there, try to enforce more interrupt vector number checks, since these
changes pointed out that dart(4) had been working correctly so far by sheer
luck only.
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.21 2003/12/27 23:58:08 miod Exp $
d3 1
a3 1
machine mvme88k
@


1.21
log
@Replace the MVME376 driver from a homemade and dusty if_ve driver to
a ``regular'' if_le driver, sharing the common am7990 code.
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.20 2003/12/25 21:02:46 miod Exp $
d28 1
a28 1
pcctwo0 at bussw0 offset 0x42000
d46 13
a58 13
vx0	at vmes0 addr 0xff780000 ipl 3 len 0x10000
vx1	at vmes0 addr 0xff790000 ipl 3 len 0x10000
vx2	at vmes0 addr 0xff7a0000 ipl 3 len 0x10000
vx3	at vmes0 addr 0xff7b0000 ipl 3 len 0x10000
le0	at vmes0 addr 0xffff1200 ipl 1 len 0x100
le1	at vmes0 addr 0xffff1400 ipl 1 len 0x100
le2	at vmes0 addr 0xffff1600 ipl 1 len 0x100
vs0	at vmes0 addr 0xffff9000 ipl 2 len 0x800
vs1	at vmes0 addr 0xffff9800 ipl 2 len 0x800
vs2	at vmes0 addr 0xffff4800 ipl 2 len 0x800
vs3	at vmes0 addr 0xffff5800 ipl 2 len 0x800
vs4	at vmes0 addr 0xffff7000 ipl 2 len 0x800
vs5	at vmes0 addr 0xffff7800 ipl 2 len 0x800
@


1.20
log
@Enable vx(4) again - while it still awaits more tests, it can attach without
affecting a multiuser boot.
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.19 2003/12/25 00:21:16 miod Exp $
d50 3
a52 3
ve0	at vmes0 addr 0xffff1200 ipl 1 len 0x100
ve1	at vmes0 addr 0xffff1400 ipl 1 len 0x100
ve2	at vmes0 addr 0xffff1600 ipl 1 len 0x100
@


1.19
log
@Disable vx* for now.
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.18 2003/10/11 22:06:48 miod Exp $
d46 4
a49 4
vx0	at vmes0 disable addr 0xff780000 ipl 3 len 0x10000
vx1	at vmes0 disable addr 0xff790000 ipl 3 len 0x10000
vx2	at vmes0 disable addr 0xff7a0000 ipl 3 len 0x10000
vx3	at vmes0 disable addr 0xff7b0000 ipl 3 len 0x10000
@


1.18
log
@Merge sclock and clock pseudo-devices.
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.17 2003/01/04 16:20:30 miod Exp $
d46 4
a49 4
vx0	at vmes0 addr 0xff780000 ipl 3 len 0x10000
vx1	at vmes0 addr 0xff790000 ipl 3 len 0x10000
vx2	at vmes0 addr 0xff7a0000 ipl 3 len 0x10000
vx3	at vmes0 addr 0xff7b0000 ipl 3 len 0x10000
@


1.17
log
@Fix a few pcctwo attachment addresses
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.16 2001/12/22 18:48:50 smurph Exp $
d14 1
a14 1
option		ERRATA__XXX_USR	
a31 1
sclock0	at pcctwo0 ipl 5
@


1.16
log
@vme devices 'auto vector'.
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.15 2001/12/22 18:22:38 smurph Exp $
d38 3
a40 3
#lptwo0	at pcctwo0 addr 0xfff45000 ipl 1 size
#memc0	at pcctwo0 addr 0xfff43000
#memc1	at pcctwo0 addr 0xfff43100
@


1.15
log
@Put miod's Makefile hack to define M88100 and M88110 back in.
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.14 2001/12/19 07:04:41 smurph Exp $
d47 13
a59 13
vx0	at vmes0 addr 0xff780000 ipl 3 vec 0x70 len 0x10000
vx1	at vmes0 addr 0xff790000 ipl 3 vec 0x71	len 0x10000
vx2	at vmes0 addr 0xff7a0000 ipl 3 vec 0x72 len 0x10000
vx3	at vmes0 addr 0xff7b0000 ipl 3 vec 0x73 len 0x10000
ve0	at vmes0 addr 0xffff1200 ipl 1 vec 0x74 len 0x100
ve1	at vmes0 addr 0xffff1400 ipl 1 vec 0x75 len 0x100
ve2	at vmes0 addr 0xffff1600 ipl 1 vec 0x76 len 0x100
vs0	at vmes0 addr 0xffff9000 ipl 2 vec 0x80 len 0x800
vs1	at vmes0 addr 0xffff9800 ipl 2 vec 0x82 len 0x800
vs2	at vmes0 addr 0xffff4800 ipl 2 vec 0x84 len 0x800
vs3	at vmes0 addr 0xffff5800 ipl 2 vec 0x86 len 0x800
vs4	at vmes0 addr 0xffff7000 ipl 2 vec 0x88 len 0x800
vs5	at vmes0 addr 0xffff7800 ipl 2 vec 0x8a len 0x800
@


1.14
log
@Introduce brdtyp and change what cputyp means.
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.13 2001/12/19 04:02:25 smurph Exp $
d7 1
a7 2
option		M88110		# support for mc88110 processor
option		MVME197		# support for 197 (M88110 required)
@


1.14.2.1
log
@Merge in -current, builds on i386, otherwise untested
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.16 2001/12/22 18:48:50 smurph Exp $
d7 2
a8 1
option		MVME197		# support for 197
d48 13
a60 13
vx0	at vmes0 addr 0xff780000 ipl 3 len 0x10000
vx1	at vmes0 addr 0xff790000 ipl 3 len 0x10000
vx2	at vmes0 addr 0xff7a0000 ipl 3 len 0x10000
vx3	at vmes0 addr 0xff7b0000 ipl 3 len 0x10000
ve0	at vmes0 addr 0xffff1200 ipl 1 len 0x100
ve1	at vmes0 addr 0xffff1400 ipl 1 len 0x100
ve2	at vmes0 addr 0xffff1600 ipl 1 len 0x100
vs0	at vmes0 addr 0xffff9000 ipl 2 len 0x800
vs1	at vmes0 addr 0xffff9800 ipl 2 len 0x800
vs2	at vmes0 addr 0xffff4800 ipl 2 len 0x800
vs3	at vmes0 addr 0xffff5800 ipl 2 len 0x800
vs4	at vmes0 addr 0xffff7000 ipl 2 len 0x800
vs5	at vmes0 addr 0xffff7800 ipl 2 len 0x800
@


1.14.2.2
log
@sync
@
text
@d1 1
a1 1
#	$OpenBSD$
d38 3
a40 3
#lptwo0	at pcctwo0 addr 0x45000 ipl 1 size
#memc0	at pcctwo0 addr 0x43000
#memc1	at pcctwo0 addr 0x43100
@


1.13
log
@bus switch name shortened.  Added register definitons and functionality.
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.12 2001/12/16 23:49:43 miod Exp $
d7 2
a8 1
option 		MVME197		# support for 197
@


1.12
log
@Revert the mvme88k to 20011212. Recent changes had not been merged correctly,
and I am fed up with dissecting diffs to put back code that disappeared.
This will likely be fixed shortly.
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.9 2001/11/27 05:26:34 miod Exp $
d25 1
a25 1
busswitch0 at mainbus0 addr 0xfff00000
d28 1
a28 1
pcctwo0 at busswitch0 offset 0x42000
@


1.11
log
@Add magic to the kernel Makefile to remove the need to explicitely put
the processor type in the configuration files, if you specify a board type.
Also, some syntaxic sugar for the MVME187 case as well.
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.10 2001/12/13 08:55:51 smurph Exp $
d7 1
a7 1
option		MVME197		# support for 197 (requires M88110)
a9 1

a13 1
# In doubt, leave it enabled.
d25 1
a25 1
bussw0 at mainbus0 addr 0xfff00000
d28 1
a28 1
pcctwo0 at bussw0 offset 0x42000
d47 13
a59 13
vx0	at vmes0 addr 0xff780000 ipl 3 len 0x10000
vx1	at vmes0 addr 0xff790000 ipl 3 len 0x10000
vx2	at vmes0 addr 0xff7a0000 ipl 3 len 0x10000
vx3	at vmes0 addr 0xff7b0000 ipl 3 len 0x10000
ve0	at vmes0 addr 0xffff1200 ipl 1 len 0x100
ve1	at vmes0 addr 0xffff1400 ipl 1 len 0x100
ve2	at vmes0 addr 0xffff1600 ipl 1 len 0x100
vs0	at vmes0 addr 0xffff9000 ipl 2 len 0x800
vs1	at vmes0 addr 0xffff9800 ipl 2 len 0x800
vs2	at vmes0 addr 0xffff4800 ipl 2 len 0x800
vs3	at vmes0 addr 0xffff5800 ipl 2 len 0x800
vs4	at vmes0 addr 0xffff7000 ipl 2 len 0x800
vs5	at vmes0 addr 0xffff7800 ipl 2 len 0x800
@


1.10
log
@Support for MVME197 completed.  Fix SPL defs.
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.9 2001/11/27 05:26:34 miod Exp $
a6 3
# processors this kernel should support

option		M88110		# support for mc88120 2ond generation RISC
d10 1
d15 1
@


1.9
log
@Move the declaration of EH_DEBUG and ERRATA__XXX_USR to the kernel
configuration files.
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.8 2001/11/08 23:53:12 miod Exp $
d7 4
a10 1
option 		MVME197		# support for 197
d28 1
a28 1
busswitch0 at mainbus0 addr 0xfff00000
d31 1
a31 1
pcctwo0 at busswitch0 offset 0x42000
d50 13
a62 13
vx0	at vmes0 addr 0xff780000 ipl 3 vec 0x70 len 0x10000
vx1	at vmes0 addr 0xff790000 ipl 3 vec 0x71	len 0x10000
vx2	at vmes0 addr 0xff7a0000 ipl 3 vec 0x72 len 0x10000
vx3	at vmes0 addr 0xff7b0000 ipl 3 vec 0x73 len 0x10000
ve0	at vmes0 addr 0xffff1200 ipl 1 vec 0x74 len 0x100
ve1	at vmes0 addr 0xffff1400 ipl 1 vec 0x75 len 0x100
ve2	at vmes0 addr 0xffff1600 ipl 1 vec 0x76 len 0x100
vs0	at vmes0 addr 0xffff9000 ipl 2 vec 0x80 len 0x800
vs1	at vmes0 addr 0xffff9800 ipl 2 vec 0x82 len 0x800
vs2	at vmes0 addr 0xffff4800 ipl 2 vec 0x84 len 0x800
vs3	at vmes0 addr 0xffff5800 ipl 2 vec 0x86 len 0x800
vs4	at vmes0 addr 0xffff7000 ipl 2 vec 0x88 len 0x800
vs5	at vmes0 addr 0xffff7800 ipl 2 vec 0x8a len 0x800
@


1.8
log
@There is no point keeping ramdisk support in non-RAMDISK kernels.
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.7 2001/08/23 22:04:32 miod Exp $
a6 2
# processors this kernel should support

d8 1
d10 5
@


1.7
log
@option M88000 is not necessary for mvme88k.
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.6 2001/06/27 05:46:22 art Exp $
a66 3

# ------------------------------ pseudo devices ------------------------
pseudo-device	rd 	2
@


1.6
log
@UVM is no longer an option.
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.5 2001/05/31 21:05:00 miod Exp $
a8 1
option		"M88000"	# support for 88K
@


1.5
log
@Typos.
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.4 2001/04/09 20:40:51 deraadt Exp $
a10 1
option		UVM
@


1.4
log
@FFS_SOFTUPDATES in sys/conf/GENERIC
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.3 2001/03/08 03:37:18 itojun Exp $
d25 1
a25 1
# ----------------------------- busswicth devices -----------------------
d59 1
a59 1
# ------------------------------ svme0 devices -------------------------
@


1.3
log
@move gif* and faith* into sys/conf/GENERIC.  deraadt and angelos ok
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.2 2001/03/07 02:00:08 miod Exp $
a11 1
option		FFS_SOFTUPDATES	# Soft Updates
@


1.2
log
@Replace siop devices with ssh.
Include ../../../conf/GENERIC in non-GENERIC configurations. Remove XT,
which is no more different from GENERIC then.
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.1 1999/09/27 21:21:15 smurph Exp $
a72 3
# for IPv6
pseudo-device	gif	4
pseudo-device	faith	1
@


1.1
log
@Some cleaning...
@
text
@d1 1
a1 1
#	$OpenBSD: XT,v 1.1 1999/05/29 04:48:31 smurph Exp $
d5 1
a5 3
maxusers 64

option		TIMEZONE=300, DST=1
d11 2
d15 3
a17 56
option		SWAPPAGER	# Pager for processes (Required)
option		VNODEPAGER	# Pager for vnodes (Required)
option		DEVPAGER	# Pager for devices (Required)

option		SYSVSHM
option		SYSVSEM
option		SYSVMSG

# File system related options

#option		QUOTA		# Disk quotas for local disks
option		NFSSERVER	# Network File System server side code
option		NFSCLIENT	# Network File System client side code

# File systems

option		FFS		# Berkeley fast file system
option		MFS		# Memory based filesystem
option		FIFO		# FIFO operations on vnodes (Recommended)
option		CD9660		# ISO 9660 + Rock Ridge file system
#option		MSDOSFS		# MS-DOS file system
option		FDESC		# /dev/fd
option		KERNFS		# /kern
option		NULLFS		# loopback file system
#option		PORTAL		# ?
option		PROCFS		# /proc
#option		UMAPFS		# NULLFS + uid and gid remapping
option		UNION		# union file system

# Networking options

option		NTP		# hooks supporting the Network Time Protocol
option		IPFILTER	# IP packet filter for security
option		IPFILTER_LOG	# use /dev/ipl to log IPF
option		INET
option		GATEWAY		# IP packet forwarding
#option		TCP_COMPAT_42	# compatibility with 4.2BSD TCP/IP
#option		ISO		# OSI networking
#option		TPIP
#option		EON
#option		COMPAT_43
#option		EXEC_COFF
#option		LKM

# Support for various kernel options

#option		DIAGNOSTIC	# Add additional error checking code
#option		"NKMEMCLUSTERS=512"	# Size of kernel malloc area

# Misc. debuging options

option		PANICWAIT	# Require keystroke to dump/reboot
#option		DEBUG		# Add debugging statements
option		DDB		# Kernel debugger
#option		SYSCALL_DEBUG	# debug all syscalls.
option		KTRACE		# debug all syscalls.
d35 1
a35 1
siop0	at pcctwo0 offset 0x47000 ipl 2
d63 2
a64 2
# ------------------------------ siop0 devices -------------------------
scsibus* at siop?
d72 4
a75 13
pseudo-device	vnd	4	# paging to files
pseudo-device	bpfilter 8	# packet filter
pseudo-device	sl 	2	# CSLIP
pseudo-device	tun	2	# network tunneling over tty
pseudo-device	ppp 	2	# PPP
pseudo-device	pty	64	# pseudo-terminals
pseudo-device	loop	2	# network loopback
pseudo-device	tb	1	# tablet line discipline
pseudo-device	enc	1	# encryption device
pseudo-device	ccd	4	# concatenated disk devices
pseudo-device	rd 	2	# ram disk drives

config	bsd swap on generic
@


1.1.4.1
log
@Update the SMP branch to -current, this breaks the SMP branch though.
But it will be fixed soonish.  Note, nothing new has happened, this is just
a merge of the trunk into this branch.
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.4 2001/04/09 20:40:51 deraadt Exp $
d5 3
a7 1
include "../../../conf/GENERIC"
a12 1
option		UVM
d15 56
a70 3
maxusers 64

config	bsd swap on generic
d88 1
a88 1
ssh0	at pcctwo0 offset 0x47000 ipl 2
d116 2
a117 2
# ------------------------------ ssh0 devices --------------------------
scsibus* at ssh?
d125 13
a137 1
pseudo-device	rd 	2
@


1.1.4.2
log
@Merge in -current from two days ago in the SMP branch.
As usual with merges, they do not indicate progress, so do not hold
your breath for working SMP, and do not mail me and ask about the
state of it.  It has not changed.  There is work ongoing, but very, very
slowly.  The commit is done in parts as to not lock up the tree in too
big chunks at a time.
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.1.4.1 2001/04/18 16:10:48 niklas Exp $
d11 1
d25 1
a25 1
# ----------------------------- busswitch devices -----------------------
d59 1
a59 1
# ------------------------------- vs0 devices --------------------------
@


1.1.4.3
log
@Sync the SMP branch to something just after 3.0
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.1.4.2 2001/07/04 10:19:50 niklas Exp $
d9 1
@


1.1.4.4
log
@Merge in -current
@
text
@d1 1
a1 1
#	$OpenBSD$
d67 3
@


1.1.4.5
log
@Merge in -current
@
text
@d1 1
a1 1
#	$OpenBSD: M197,v 1.1.4.4 2001/11/13 21:04:14 niklas Exp $
d7 2
a9 1
option		"NCPUS=1"	# Number of cpus supported (max 4)
a10 5
#option		DEBUG		# print debugging statements
#option		EH_DEBUG	# debugging code for exception handlers

# Define this if your processor has the xxx.usr bug (mask C82N)
option		ERRATA__XXX_USR	
@


1.1.4.6
log
@Merge in trunk
@
text
@d1 1
a1 1
#	$OpenBSD$
d7 1
a7 1
option		MVME197		# support for 197
d25 1
a25 1
bussw0  at mainbus0 addr 0xfff00000
d28 1
a28 1
pcctwo0 at bussw0 offset 0x42000
d47 13
a59 13
vx0	at vmes0 addr 0xff780000 ipl 3 len 0x10000
vx1	at vmes0 addr 0xff790000 ipl 3 len 0x10000
vx2	at vmes0 addr 0xff7a0000 ipl 3 len 0x10000
vx3	at vmes0 addr 0xff7b0000 ipl 3 len 0x10000
ve0	at vmes0 addr 0xffff1200 ipl 1 len 0x100
ve1	at vmes0 addr 0xffff1400 ipl 1 len 0x100
ve2	at vmes0 addr 0xffff1600 ipl 1 len 0x100
vs0	at vmes0 addr 0xffff9000 ipl 2 len 0x800
vs1	at vmes0 addr 0xffff9800 ipl 2 len 0x800
vs2	at vmes0 addr 0xffff4800 ipl 2 len 0x800
vs3	at vmes0 addr 0xffff5800 ipl 2 len 0x800
vs4	at vmes0 addr 0xffff7000 ipl 2 len 0x800
vs5	at vmes0 addr 0xffff7800 ipl 2 len 0x800
@


1.1.4.7
log
@Sync the SMP branch with 3.3
@
text
@d38 3
a40 3
#lptwo0	at pcctwo0 addr 0x45000 ipl 1 size
#memc0	at pcctwo0 addr 0x43000
#memc1	at pcctwo0 addr 0x43100
@


1.1.4.8
log
@Merge of current from two weeks agointo the SMP branch
@
text
@d14 1
a14 1
option		ERRATA__XXX_USR
d32 1
d51 3
a53 3
le0	at vmes0 addr 0xffff1200 ipl 1 len 0x100
le1	at vmes0 addr 0xffff1400 ipl 1 len 0x100
le2	at vmes0 addr 0xffff1600 ipl 1 len 0x100
@


1.1.4.9
log
@Merge with the trunk
@
text
@d3 1
a3 1
machine mvme88k m88k
d7 5
a11 4
# Processor type
option		M88110

option		MVME197		# support for 197 (requires M88110)
d13 2
a14 1
option		"NCPUS=1"	# Number of cpus supported (max 4)
d28 1
a28 1
pcctwo0 at bussw0 offset 0x00000
d35 1
a35 1
osiop0	at pcctwo0 offset 0x47000 ipl 2
d46 13
a58 13
vx0	at vmes0 addr 0xff780000 ipl 3
vx1	at vmes0 addr 0xff790000 ipl 3
vx2	at vmes0 addr 0xff7a0000 ipl 3
vx3	at vmes0 addr 0xff7b0000 ipl 3
le0	at vmes0 addr 0xffff1200 ipl 1
le1	at vmes0 addr 0xffff1400 ipl 1
le2	at vmes0 addr 0xffff1600 ipl 1
vs0	at vmes0 addr 0xffff9000 ipl 2
vs1	at vmes0 addr 0xffff9800 ipl 2
vs2	at vmes0 addr 0xffff4800 ipl 2
vs3	at vmes0 addr 0xffff5800 ipl 2
vs4	at vmes0 addr 0xffff7000 ipl 2
vs5	at vmes0 addr 0xffff7800 ipl 2
d63 2
a64 2
# ----------------------------- osiop0 devices -------------------------
scsibus* at osiop?
@


