head	1.40;
access;
symbols
	OPENBSD_5_5:1.39.0.6
	OPENBSD_5_5_BASE:1.39
	OPENBSD_5_4:1.39.0.2
	OPENBSD_5_4_BASE:1.39
	OPENBSD_5_3:1.38.0.8
	OPENBSD_5_3_BASE:1.38
	OPENBSD_5_2:1.38.0.6
	OPENBSD_5_2_BASE:1.38
	OPENBSD_5_1_BASE:1.38
	OPENBSD_5_1:1.38.0.4
	OPENBSD_5_0:1.38.0.2
	OPENBSD_5_0_BASE:1.38
	OPENBSD_4_9:1.37.0.4
	OPENBSD_4_9_BASE:1.37
	OPENBSD_4_8:1.37.0.2
	OPENBSD_4_8_BASE:1.37
	OPENBSD_4_7:1.36.0.4
	OPENBSD_4_7_BASE:1.36
	OPENBSD_4_6:1.36.0.6
	OPENBSD_4_6_BASE:1.36
	OPENBSD_4_5:1.36.0.2
	OPENBSD_4_5_BASE:1.36
	OPENBSD_4_4:1.35.0.10
	OPENBSD_4_4_BASE:1.35
	OPENBSD_4_3:1.35.0.8
	OPENBSD_4_3_BASE:1.35
	OPENBSD_4_2:1.35.0.6
	OPENBSD_4_2_BASE:1.35
	OPENBSD_4_1:1.35.0.4
	OPENBSD_4_1_BASE:1.35
	OPENBSD_4_0:1.35.0.2
	OPENBSD_4_0_BASE:1.35
	OPENBSD_3_9:1.32.0.6
	OPENBSD_3_9_BASE:1.32
	OPENBSD_3_8:1.32.0.4
	OPENBSD_3_8_BASE:1.32
	OPENBSD_3_7:1.32.0.2
	OPENBSD_3_7_BASE:1.32
	OPENBSD_3_6:1.31.0.2
	OPENBSD_3_6_BASE:1.31
	SMP_SYNC_A:1.31
	SMP_SYNC_B:1.31
	OPENBSD_3_5:1.27.0.2
	OPENBSD_3_5_BASE:1.27
	OPENBSD_3_4:1.21.0.2
	OPENBSD_3_4_BASE:1.21
	UBC_SYNC_A:1.20
	OPENBSD_3_3:1.20.0.2
	OPENBSD_3_3_BASE:1.20
	OPENBSD_3_2:1.19.0.4
	OPENBSD_3_2_BASE:1.19
	OPENBSD_3_1:1.19.0.2
	OPENBSD_3_1_BASE:1.19
	UBC_SYNC_B:1.19
	UBC:1.18.0.2
	UBC_BASE:1.18
	OPENBSD_3_0:1.12.0.2
	OPENBSD_3_0_BASE:1.12
	OPENBSD_2_9:1.9.0.2
	OPENBSD_2_9_BASE:1.9
	OPENBSD_2_8:1.4.0.8
	OPENBSD_2_8_BASE:1.4
	OPENBSD_2_7:1.4.0.6
	OPENBSD_2_7_BASE:1.4
	SMP:1.4.0.4
	SMP_BASE:1.4
	kame_19991208:1.4
	OPENBSD_2_6:1.4.0.2
	OPENBSD_2_6_BASE:1.4
	OPENBSD_2_4:1.2.0.2
	OPENBSD_2_4_BASE:1.2
	OPENBSD_2_3:1.1.1.1.0.6
	OPENBSD_2_3_BASE:1.1.1.1
	OPENBSD_2_2:1.1.1.1.0.4
	OPENBSD_2_2_BASE:1.1.1.1
	OPENBSD_2_1:1.1.1.1.0.2
	OPENBSD_2_1_BASE:1.1.1.1
	mvme88kport:1.1.1.1;
locks; strict;
comment	@# @;


1.40
date	2014.03.18.22.36.35;	author miod;	state dead;
branches;
next	1.39;

1.39
date	2013.05.17.22.51.59;	author miod;	state Exp;
branches;
next	1.38;

1.38
date	2011.06.29.20.52.09;	author matthew;	state Exp;
branches;
next	1.37;

1.37
date	2010.07.03.03.59.17;	author krw;	state Exp;
branches;
next	1.36;

1.36
date	2009.02.14.17.42.00;	author miod;	state Exp;
branches;
next	1.35;

1.35
date	2006.05.28.11.09.56;	author miod;	state Exp;
branches;
next	1.34;

1.34
date	2006.05.02.21.43.07;	author miod;	state Exp;
branches;
next	1.33;

1.33
date	2006.04.19.22.09.38;	author miod;	state Exp;
branches;
next	1.32;

1.32
date	2004.09.16.09.14.03;	author mickey;	state Exp;
branches;
next	1.31;

1.31
date	2004.05.07.18.12.55;	author miod;	state Exp;
branches;
next	1.30;

1.30
date	2004.04.29.14.33.27;	author miod;	state Exp;
branches;
next	1.29;

1.29
date	2004.04.26.12.34.05;	author miod;	state Exp;
branches;
next	1.28;

1.28
date	2004.04.24.19.51.44;	author miod;	state Exp;
branches;
next	1.27;

1.27
date	2004.01.05.20.07.59;	author miod;	state Exp;
branches;
next	1.26;

1.26
date	2004.01.01.01.51.24;	author miod;	state Exp;
branches;
next	1.25;

1.25
date	2003.12.27.23.58.08;	author miod;	state Exp;
branches;
next	1.24;

1.24
date	2003.12.25.21.02.46;	author miod;	state Exp;
branches;
next	1.23;

1.23
date	2003.12.25.00.21.16;	author miod;	state Exp;
branches;
next	1.22;

1.22
date	2003.10.11.22.06.48;	author miod;	state Exp;
branches;
next	1.21;

1.21
date	2003.08.01.07.43.01;	author miod;	state Exp;
branches;
next	1.20;

1.20
date	2003.01.04.16.20.30;	author miod;	state Exp;
branches;
next	1.19;

1.19
date	2001.12.22.18.22.38;	author smurph;	state Exp;
branches;
next	1.18;

1.18
date	2001.12.19.07.04.41;	author smurph;	state Exp;
branches
	1.18.2.1;
next	1.17;

1.17
date	2001.12.16.23.49.43;	author miod;	state Exp;
branches;
next	1.16;

1.16
date	2001.12.13.20.32.56;	author miod;	state Exp;
branches;
next	1.15;

1.15
date	2001.12.13.08.55.51;	author smurph;	state Exp;
branches;
next	1.14;

1.14
date	2001.11.27.05.26.34;	author miod;	state Exp;
branches;
next	1.13;

1.13
date	2001.11.08.23.53.12;	author miod;	state Exp;
branches;
next	1.12;

1.12
date	2001.08.23.22.04.32;	author miod;	state Exp;
branches;
next	1.11;

1.11
date	2001.06.27.05.46.21;	author art;	state Exp;
branches;
next	1.10;

1.10
date	2001.05.31.21.05.00;	author miod;	state Exp;
branches;
next	1.9;

1.9
date	2001.04.09.20.40.51;	author deraadt;	state Exp;
branches;
next	1.8;

1.8
date	2001.03.08.03.37.18;	author itojun;	state Exp;
branches;
next	1.7;

1.7
date	2001.03.07.02.00.08;	author miod;	state Exp;
branches;
next	1.6;

1.6
date	2001.01.14.20.25.22;	author smurph;	state Exp;
branches;
next	1.5;

1.5
date	2001.01.13.05.18.57;	author smurph;	state Exp;
branches;
next	1.4;

1.4
date	99.09.27.21.21.15;	author smurph;	state Exp;
branches
	1.4.4.1;
next	1.3;

1.3
date	98.12.15.06.02.54;	author smurph;	state dead;
branches;
next	1.2;

1.2
date	98.09.15.04.01.22;	author smurph;	state Exp;
branches;
next	1.1;

1.1
date	97.03.03.19.31.52;	author rahnds;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	97.03.03.19.31.52;	author rahnds;	state Exp;
branches;
next	;

1.4.4.1
date	2001.04.18.16.10.48;	author niklas;	state Exp;
branches;
next	1.4.4.2;

1.4.4.2
date	2001.07.04.10.19.49;	author niklas;	state Exp;
branches;
next	1.4.4.3;

1.4.4.3
date	2001.10.31.03.01.18;	author nate;	state Exp;
branches;
next	1.4.4.4;

1.4.4.4
date	2001.11.13.21.04.14;	author niklas;	state Exp;
branches;
next	1.4.4.5;

1.4.4.5
date	2001.12.05.00.39.12;	author niklas;	state Exp;
branches;
next	1.4.4.6;

1.4.4.6
date	2002.03.06.01.08.05;	author niklas;	state Exp;
branches;
next	1.4.4.7;

1.4.4.7
date	2003.03.27.23.32.17;	author niklas;	state Exp;
branches;
next	1.4.4.8;

1.4.4.8
date	2004.02.19.10.49.06;	author niklas;	state Exp;
branches;
next	1.4.4.9;

1.4.4.9
date	2004.06.05.23.09.48;	author niklas;	state Exp;
branches;
next	;

1.18.2.1
date	2002.01.31.22.55.16;	author niklas;	state Exp;
branches;
next	1.18.2.2;

1.18.2.2
date	2003.05.19.21.45.52;	author tedu;	state Exp;
branches;
next	;


desc
@@


1.40
log
@Retire hp300, mvme68k and mvme88k ports. These ports have no users, keeping
this hardware alive is becoming increasingly difficult, and I should heed the
message sent by the three disks which have died on me over the last few days.

Noone sane will mourn these ports anyway. So long, and thanks for the fish.
@
text
@#	$OpenBSD: M187,v 1.39 2013/05/17 22:51:59 miod Exp $
#
# For further information on compiling OpenBSD kernels, see the config(8)
# man page.
#
# For further information on hardware support for this architecture, see
# the intro(4) man page.  For further information about kernel options
# for this architecture, see the options(4) man page.  For an explanation
# of each device driver in this file see the section 4 man page for the
# device.

machine		mvme88k m88k
include		"../../../conf/GENERIC"
maxusers	32			# estimated number of users

# Processor type
option		M88100

option		MVME187		# support for MVME187 (requires M88100)

# Define this if your processor has the xxx.usr bug (mask C82N)
option		ERRATA__XXX_USR


config		bsd		swap generic

#
# devices
#

mainbus0	at root

# MVME1x7 devices
pcctwo0		at mainbus0 addr 0xfff00000
sram0		at mainbus0 addr 0xffe00000
nvram0		at pcctwo0 offset 0xc0000
vme0		at pcctwo0 offset 0x40000
ie0		at pcctwo0 offset 0x46000 ipl 3
osiop0		at pcctwo0 offset 0x47000 ipl 2
cl0		at pcctwo0 offset 0x45000 ipl 3
cl1		at pcctwo0 offset 0x45200 ipl 3		# M8120 only
#lptwo0		at pcctwo0 offset 0x45000 ipl 1
memc0		at pcctwo0 offset 0x43000
memc1		at pcctwo0 offset 0x43100

vmes0		at vme0
vmel0		at vme0

# MVME327
vsbic0		at vmes0 addr 0xffffa600 ipl 2
vsbic1		at vmes0 addr 0xffffa700 ipl 2
# MVME328, MVME328XT
vs0		at vmes0 addr 0xffff9000 ipl 2
vs1		at vmes0 addr 0xffff9800 ipl 2
vs2		at vmes0 addr 0xffff4800 ipl 2
vs3		at vmes0 addr 0xffff5800 ipl 2
vs4		at vmes0 addr 0xffff7000 ipl 2
vs5		at vmes0 addr 0xffff7800 ipl 2
# MVME332XT
vx0		at vmes0 addr 0xff780000 ipl 3
vx1		at vmes0 addr 0xff790000 ipl 3
vx2		at vmes0 addr 0xff7a0000 ipl 3
vx3		at vmes0 addr 0xff7b0000 ipl 3
# MVME376
le0		at vmes0 addr 0xffff1200 ipl 3
le1		at vmes0 addr 0xffff1400 ipl 3
le2		at vmes0 addr 0xffff1600 ipl 3
le3		at vmes0 addr 0xffff5400 ipl 3
le4		at vmes0 addr 0xffff5600 ipl 3
le5		at vmes0 addr 0xffffa400 ipl 3


scsibus*	at scsi?
sd*		at scsibus?
st*		at scsibus?
cd*		at scsibus?
ch*		at scsibus?
safte*		at scsibus?
ses*		at scsibus?
uk*		at scsibus?
@


1.39
log
@Preliminary support for MVME180 and MVME181 boards. On-board serial ports
and VME controller are supported; tod chip isn't supported yet (coming soon).
MVME236 memory boards are not supported and won't likely be (unless I get my
hands on one).

MVME181-1 boots multiuser (slowly) with MVME328 SCSI and MVME376 Ethernet
despite only having 8MB of memory onboard.

MVME180 untested; might need tweaking to get MVME SCSI and Ethernet boards
supported.

Many thanks to Matti Nummi for lending me an MVME181 board.
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.38 2011/06/29 20:52:09 matthew Exp $
@


1.38
log
@Replace all instances of "scsibus* at hba?" with a single "scsibus* at
scsi?" rule, similar to how ethernet PHY drivers attach at mii.

Discussed on icb.
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.37 2010/07/03 03:59:17 krw Exp $
d19 1
a19 1
option		MVME187			# support for 187 (requires M88100)
d31 1
a31 1
mainbus0 at root
d34 11
a44 11
pcctwo0 at mainbus0 addr 0xfff00000
sram0	at mainbus0 addr 0xffe00000
nvram0	at pcctwo0 offset 0xc0000
vme0	at pcctwo0 offset 0x40000
ie0	at pcctwo0 offset 0x46000 ipl 3
osiop0	at pcctwo0 offset 0x47000 ipl 2
cl0	at pcctwo0 offset 0x45000 ipl 3
cl1	at pcctwo0 offset 0x45200 ipl 3		# M8120 only
#lptwo0	at pcctwo0 offset 0x45000 ipl 1
memc0	at pcctwo0 offset 0x43000
memc1	at pcctwo0 offset 0x43100
d46 2
a47 2
vmes0	at vme0
vmel0	at vme0
d50 2
a51 2
vsbic0	at vmes0 addr 0xffffa600 ipl 2
vsbic1	at vmes0 addr 0xffffa700 ipl 2
d53 6
a58 6
vs0	at vmes0 addr 0xffff9000 ipl 2
vs1	at vmes0 addr 0xffff9800 ipl 2
vs2	at vmes0 addr 0xffff4800 ipl 2
vs3	at vmes0 addr 0xffff5800 ipl 2
vs4	at vmes0 addr 0xffff7000 ipl 2
vs5	at vmes0 addr 0xffff7800 ipl 2
d60 4
a63 4
vx0	at vmes0 addr 0xff780000 ipl 3
vx1	at vmes0 addr 0xff790000 ipl 3
vx2	at vmes0 addr 0xff7a0000 ipl 3
vx3	at vmes0 addr 0xff7b0000 ipl 3
d65 16
a80 13
le0	at vmes0 addr 0xffff1200 ipl 3
le1	at vmes0 addr 0xffff1400 ipl 3
le2	at vmes0 addr 0xffff1600 ipl 3


scsibus* at scsi?
sd*	at scsibus?
st*	at scsibus?
cd*	at scsibus?
ch*	at scsibus?
safte*	at scsibus?
ses*	at scsibus?
uk*	at scsibus?
@


1.37
log
@No more ss(4) or usscanner(4). Unused, unloved and unmaintained.
General huzzahs.

"go for it" deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.36 2009/02/14 17:42:00 miod Exp $
a68 3
scsibus* at osiop?
scsibus* at vs?
scsibus* at vsbic?
d70 1
@


1.36
log
@Sync device lists with GENERIC.
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.52 2006/05/28 11:09:56 miod Exp $
a76 1
ss*	at scsibus?
@


1.35
log
@Configure network devices at ipl 3, not ipl 1.
@
text
@d1 14
a14 5
#	$OpenBSD: M187,v 1.34 2006/05/02 21:43:07 miod Exp $

machine mvme88k m88k

include "../../../conf/GENERIC"
d19 1
a19 1
option		MVME187		# support for 187 (requires M88100)
a23 1
maxusers 64
d25 5
a29 1
config	bsd swap on generic
a30 1
# ------------------------------ devices --------------------------------
d33 1
a33 1
# ------------------------------ mainbus devices ------------------------
d36 1
a36 2

# ------------------------------ pcctwo devices -------------------------
a37 1
nvram0	at pcctwo0 offset 0xc0000
a45 1
# ------------------------------ vme0 devices --------------------------
d49 11
a59 1
# ------------------------------ vmes0 devices -------------------------
d64 1
a67 6
vs0	at vmes0 addr 0xffff9000 ipl 2
vs1	at vmes0 addr 0xffff9800 ipl 2
vs2	at vmes0 addr 0xffff4800 ipl 2
vs3	at vmes0 addr 0xffff5800 ipl 2
vs4	at vmes0 addr 0xffff7000 ipl 2
vs5	at vmes0 addr 0xffff7800 ipl 2
d69 1
a69 1
# ------------------------------- vs0 devices --------------------------
d71 1
a72 4
# ----------------------------- osiop0 devices -------------------------
scsibus* at osiop?

# ------------------------------ scsibus0 devices ----------------------
d76 5
@


1.34
log
@Wave goodbye to bugtty on mvme88k as well.
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.33 2006/04/19 22:09:38 miod Exp $
d29 1
a29 1
ie0	at pcctwo0 offset 0x46000 ipl 1
d33 1
a33 1
#lptwo0	at pcctwo0 offset 0x45000 ipl 1 size
d46 3
a48 3
le0	at vmes0 addr 0xffff1200 ipl 1
le1	at vmes0 addr 0xffff1400 ipl 1
le2	at vmes0 addr 0xffff1600 ipl 1
@


1.33
log
@Get rid of the clock device attachment - since the clock is not something
we can live without, move it into the board-dependent code. This even makes
the code slightly smaller.

clock.c is moved from dev/ to mvme88k/ and only keeps common variables and
delay().
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.32 2004/09/16 09:14:03 mickey Exp $
a22 1
bugtty0 at mainbus0
@


1.32
log
@cleanup deafult locators (blah ?); please check that your most hated architecture is still fluffy (;
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.31 2004/05/07 18:12:55 miod Exp $
a27 1
clock0	at pcctwo0 ipl 5
@


1.31
log
@Replace the old ssh(4) NCR53C710 scsi driver with a pcctwo attachment for
the MI osiop(4) driver.

This improves performance very slighly and should also improve reliability.

Tested on 25MHz (50MHz osiop) and 33MHz (66MHz osiop) MVME187 boards.
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.30 2004/04/29 14:33:27 miod Exp $
d65 3
a67 3
sd*	at scsibus? target ? lun ?
st*	at scsibus? target ? lun ?
cd*	at scsibus? target ? lun ?
@


1.30
log
@Continue factorizing m88k common code, this time files in <arch>/<arch>
which were copied verbatim from mvme88k to luna88k.

This requires backing out syntactic sugar in mvme88k kernel configuration
files which would deduct the required processor types from the board models,
as the common code only depends upon the M88100 and M88110 defines.
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.29 2004/04/26 12:34:05 miod Exp $
d32 1
a32 1
ssh0	at pcctwo0 offset 0x47000 ipl 2
d61 2
a62 2
# ------------------------------ ssh0 devices --------------------------
scsibus* at ssh?
@


1.29
log
@Start factorizing luna88k and mvme88k common parts.
For now, include files only.
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.28 2004/04/24 19:51:44 miod Exp $
d7 4
a10 4
option		MVME187		# support for 187
option		BUGMAP		# use Bug Rom VME Mappings
#option		DEBUG		# print debugging statements
#option		EH_DEBUG	# debugging code for exception handlers
@


1.28
log
@Preliminary switch to an mvme88k bus_space world. Not all drivers have been
converted yet, and they rely upon some linear mappings provided by bus_space.

In order to not impact performance, almost all the bus_space accesses go
through macros and inline functions. This currently restricts us to D16 and
D32 access modes, which are selected at compilation time. Since there are no
plans to support D8 vme devices in the future, this is acceptable for now.

This makes the "len" locator for vme devices go away, and allows to simplify
some code which was using the pcctwo device, and will now directly access
hardware which is known to exist, rather than wait until the device is
attached.

While there, try to enforce more interrupt vector number checks, since these
changes pointed out that dart(4) had been working correctly so far by sheer
luck only.
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.27 2004/01/05 20:07:59 miod Exp $
d3 1
a3 1
machine mvme88k
@


1.27
log
@Support for the second set of serial ports on the M8120 (untested)
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.26 2004/01/01 01:51:24 miod Exp $
d44 13
a56 13
vx0	at vmes0 addr 0xff780000 ipl 3 len 0x10000
vx1	at vmes0 addr 0xff790000 ipl 3 len 0x10000
vx2	at vmes0 addr 0xff7a0000 ipl 3 len 0x10000
vx3	at vmes0 addr 0xff7b0000 ipl 3 len 0x10000
le0	at vmes0 addr 0xffff1200 ipl 1 len 0x100
le1	at vmes0 addr 0xffff1400 ipl 1 len 0x100
le2	at vmes0 addr 0xffff1600 ipl 1 len 0x100
vs0	at vmes0 addr 0xffff9000 ipl 2 len 0x800
vs1	at vmes0 addr 0xffff9800 ipl 2 len 0x800
vs2	at vmes0 addr 0xffff4800 ipl 2 len 0x800
vs3	at vmes0 addr 0xffff5800 ipl 2 len 0x800
vs4	at vmes0 addr 0xffff7000 ipl 2 len 0x800
vs5	at vmes0 addr 0xffff7800 ipl 2 len 0x800
@


1.26
log
@Add sram on mvme187.
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.25 2003/12/27 23:58:08 miod Exp $
d34 1
@


1.25
log
@Replace the MVME376 driver from a homemade and dusty if_ve driver to
a ``regular'' if_le driver, sharing the common am7990 code.
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.24 2003/12/25 21:02:46 miod Exp $
d25 1
@


1.24
log
@Enable vx(4) again - while it still awaits more tests, it can attach without
affecting a multiuser boot.
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.23 2003/12/25 00:21:16 miod Exp $
d46 3
a48 3
ve0	at vmes0 addr 0xffff1200 ipl 1 len 0x100
ve1	at vmes0 addr 0xffff1400 ipl 1 len 0x100
ve2	at vmes0 addr 0xffff1600 ipl 1 len 0x100
@


1.23
log
@Disable vx* for now.
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.22 2003/10/11 22:06:48 miod Exp $
d42 4
a45 4
vx0	at vmes0 disable addr 0xff780000 ipl 3 len 0x10000
vx1	at vmes0 disable addr 0xff790000 ipl 3 len 0x10000
vx2	at vmes0 disable addr 0xff7a0000 ipl 3 len 0x10000
vx3	at vmes0 disable addr 0xff7b0000 ipl 3 len 0x10000
@


1.22
log
@Merge sclock and clock pseudo-devices.
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.21 2003/08/01 07:43:01 miod Exp $
d42 4
a45 4
vx0	at vmes0 addr 0xff780000 ipl 3 len 0x10000
vx1	at vmes0 addr 0xff790000 ipl 3 len 0x10000
vx2	at vmes0 addr 0xff7a0000 ipl 3 len 0x10000
vx3	at vmes0 addr 0xff7b0000 ipl 3 len 0x10000
@


1.21
log
@Fix pcctwo locator typos
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.20 2003/01/04 16:20:30 miod Exp $
d13 1
a13 1
option		ERRATA__XXX_USR	
a27 1
sclock0	at pcctwo0 ipl 5
@


1.20
log
@Fix a few pcctwo attachment addresses
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.19 2001/12/22 18:22:38 smurph Exp $
d34 3
a36 3
#lptwo0	at pcctwo0 addr 0x45000 ipl 1 size
memc0	at pcctwo0 addr 0x43000
memc1	at pcctwo0 addr 0x43100
@


1.19
log
@Put miod's Makefile hack to define M88100 and M88110 back in.
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.18 2001/12/19 07:04:41 smurph Exp $
d34 3
a36 3
#lptwo0	at pcctwo0 addr 0xfff45000 ipl 1 size
#memc0	at pcctwo0 addr 0xfff43000
#memc1	at pcctwo0 addr 0xfff43100
@


1.18
log
@Introduce brdtyp and change what cputyp means.
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.17 2001/12/16 23:49:43 miod Exp $
d7 1
a7 3
option		M88100		# support for mc88110 processor
option		MVME187		# support for 187 (M88100 required)
option		"NCPUS=1"	# Number of cpus supported (max 4)
@


1.18.2.1
log
@Merge in -current, builds on i386, otherwise untested
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.19 2001/12/22 18:22:38 smurph Exp $
d7 3
a9 1
option		MVME187		# support for 187
@


1.18.2.2
log
@sync
@
text
@d1 1
a1 1
#	$OpenBSD$
d34 3
a36 3
#lptwo0	at pcctwo0 addr 0x45000 ipl 1 size
memc0	at pcctwo0 addr 0x43000
memc1	at pcctwo0 addr 0x43100
@


1.17
log
@Revert the mvme88k to 20011212. Recent changes had not been merged correctly,
and I am fed up with dissecting diffs to put back code that disappeared.
This will likely be fixed shortly.
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.14 2001/11/27 05:26:34 miod Exp $
d7 2
a8 1
option		MVME187		# support for 187
@


1.16
log
@Add magic to the kernel Makefile to remove the need to explicitely put
the processor type in the configuration files, if you specify a board type.
Also, some syntaxic sugar for the MVME187 case as well.
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.15 2001/12/13 08:55:51 smurph Exp $
d8 1
a9 1

a13 1
# In doubt, leave it enabled.
@


1.15
log
@Support for MVME197 completed.  Fix SPL defs.
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.14 2001/11/27 05:26:34 miod Exp $
d7 1
a7 3
option		M88100		# support for mc88100 1st generation RISC
option		MVME187		# support for 187 (requires M88100)
option		"NCPUS=1"	# Number of cpus supported (max 4)
d9 1
d14 1
@


1.14
log
@Move the declaration of EH_DEBUG and ERRATA__XXX_USR to the kernel
configuration files.
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.13 2001/11/08 23:53:12 miod Exp $
d7 2
a8 1
option		MVME187		# support for 187
@


1.13
log
@There is no point keeping ramdisk support in non-RAMDISK kernels.
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.12 2001/08/23 22:04:32 miod Exp $
d10 5
@


1.12
log
@option M88000 is not necessary for mvme88k.
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.11 2001/06/27 05:46:21 art Exp $
a62 3

# ------------------------------ pseudo devices ------------------------
pseudo-device	rd 	2
@


1.11
log
@UVM is no longer an option.
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.10 2001/05/31 21:05:00 miod Exp $
a6 1
option		"M88000"	# support for 88K
@


1.10
log
@Typos.
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.9 2001/04/09 20:40:51 deraadt Exp $
a8 1
option		UVM		# use the UVM virtual memory system
@


1.9
log
@FFS_SOFTUPDATES in sys/conf/GENERIC
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.8 2001/03/08 03:37:18 itojun Exp $
d55 1
a55 1
# ------------------------------ svme0 devices -------------------------
@


1.8
log
@move gif* and faith* into sys/conf/GENERIC.  deraadt and angelos ok
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.7 2001/03/07 02:00:08 miod Exp $
a9 1
option		FFS_SOFTUPDATES	# Soft Updates
@


1.7
log
@Replace siop devices with ssh.
Include ../../../conf/GENERIC in non-GENERIC configurations. Remove XT,
which is no more different from GENERIC then.
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.6 2001/01/14 20:25:22 smurph Exp $
a68 3
# for IPv6
pseudo-device	gif	4
#pseudo-device	faith	1
@


1.6
log
@Complete move to UVM virtual memory system.  More header fixes.
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.5 2001/01/13 05:18:57 smurph Exp $
d5 1
a5 5
maxusers 64

option		TIMEZONE=300, DST=1

# processors this kernel should support
d9 2
d12 1
a12 1
option		UVM		# use the UVM virtual memory system
d14 1
a14 1
option		BUGMAP		# use Bug Rom VME Mappings
d16 1
a16 56
option		SWAPPAGER	# Pager for processes (Required)
option		VNODEPAGER	# Pager for vnodes (Required)
option		DEVPAGER	# Pager for devices (Required)

option		SYSVSHM
option		SYSVSEM
option		SYSVMSG

# File system related options

#option		QUOTA		# Disk quotas for local disks
option		NFSSERVER	# Network File System server side code
option		NFSCLIENT	# Network File System client side code

# File systems

option		FFS		# Berkeley fast file system
option		MFS		# Memory based filesystem
option		FIFO		# FIFO operations on vnodes (Recommended)
option		CD9660		# ISO 9660 + Rock Ridge file system
#option		MSDOSFS		# MS-DOS file system
option		FDESC		# /dev/fd
option		KERNFS		# /kern
option		NULLFS		# loopback file system
#option		PORTAL		# ?
option		PROCFS		# /proc
#option		UMAPFS		# NULLFS + uid and gid remapping
#option		UNION		# union file system

# Networking options

option		NTP		# hooks supporting the Network Time Protocol
option		IPFILTER	# IP packet filter for security
option		IPFILTER_LOG	# use /dev/ipl to log IPF
option		INET
option		GATEWAY		# IP packet forwarding
#option		TCP_COMPAT_42	# compatibility with 4.2BSD TCP/IP
#option		ISO		# OSI networking
#option		TPIP
#option		EON
#option		COMPAT_43
#option		EXEC_COFF
#option		LKM

# Support for various kernel options

#option		DIAGNOSTIC	# Add additional error checking code
#option		"NKMEMCLUSTERS=512"	# Size of kernel malloc area

# Misc. debuging options

option		PANICWAIT	# Require keystroke to dump/reboot
#option		DEBUG		# Add debugging statements
option		DDB		# Kernel debugger
#option		SYSCALL_DEBUG	# debug all syscalls.
#option		KTRACE		# debug all syscalls.
d31 1
a31 1
siop0	at pcctwo0 offset 0x47000 ipl 2
d59 2
a60 2
# ------------------------------ siop0 devices -------------------------
scsibus* at siop?
d68 4
a71 13
pseudo-device	vnd	4	# paging to files
pseudo-device	bpfilter 8	# packet filter
pseudo-device	sl 	2	# CSLIP
pseudo-device	tun	2	# network tunneling over tty
pseudo-device	ppp 	2	# PPP
pseudo-device	pty	64	# pseudo-terminals
pseudo-device	loop	2	# network loopback
pseudo-device	tb	1	# tablet line discipline
pseudo-device	enc	1	# encryption device
pseudo-device	ccd	4	# concatenated disk devices
pseudo-device	rd 	2	# ram disk drives

config	bsd swap on generic
@


1.5
log
@Booting kernel with MACHINE_NEW_NONCONTIG.  UVM code added but not working.
New stand config.  Lots of header fixes.  Can now cross-compile i386->m88k.
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.4 1999/09/27 21:21:15 smurph Exp $
d14 1
@


1.4
log
@Some cleaning...
@
text
@d1 1
a1 1
#	$OpenBSD: XT,v 1.1 1999/05/29 04:48:31 smurph Exp $
d98 13
a110 13
vx0	at vmes0 addr 0xff780000 ipl 3 vec 0x70 len 0x10000
vx1	at vmes0 addr 0xff790000 ipl 3 vec 0x71	len 0x10000
vx2	at vmes0 addr 0xff7a0000 ipl 3 vec 0x72 len 0x10000
vx3	at vmes0 addr 0xff7b0000 ipl 3 vec 0x73 len 0x10000
ve0	at vmes0 addr 0xffff1200 ipl 1 vec 0x74 len 0x100
ve1	at vmes0 addr 0xffff1400 ipl 1 vec 0x75 len 0x100
ve2	at vmes0 addr 0xffff1600 ipl 1 vec 0x76 len 0x100
vs0	at vmes0 addr 0xffff9000 ipl 2 vec 0x80 len 0x800
vs1	at vmes0 addr 0xffff9800 ipl 2 vec 0x82 len 0x800
vs2	at vmes0 addr 0xffff4800 ipl 2 vec 0x84 len 0x800
vs3	at vmes0 addr 0xffff5800 ipl 2 vec 0x86 len 0x800
vs4	at vmes0 addr 0xffff7000 ipl 2 vec 0x88 len 0x800
vs5	at vmes0 addr 0xffff7800 ipl 2 vec 0x8a len 0x800
@


1.4.4.1
log
@Update the SMP branch to -current, this breaks the SMP branch though.
But it will be fixed soonish.  Note, nothing new has happened, this is just
a merge of the trunk into this branch.
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.9 2001/04/09 20:40:51 deraadt Exp $
d5 5
a9 1
include "../../../conf/GENERIC"
a12 1
option		UVM		# use the UVM virtual memory system
d14 1
d17 56
a72 3
maxusers 64

config	bsd swap on generic
d87 1
a87 1
ssh0	at pcctwo0 offset 0x47000 ipl 2
d98 13
a110 13
vx0	at vmes0 addr 0xff780000 ipl 3 len 0x10000
vx1	at vmes0 addr 0xff790000 ipl 3 len 0x10000
vx2	at vmes0 addr 0xff7a0000 ipl 3 len 0x10000
vx3	at vmes0 addr 0xff7b0000 ipl 3 len 0x10000
ve0	at vmes0 addr 0xffff1200 ipl 1 len 0x100
ve1	at vmes0 addr 0xffff1400 ipl 1 len 0x100
ve2	at vmes0 addr 0xffff1600 ipl 1 len 0x100
vs0	at vmes0 addr 0xffff9000 ipl 2 len 0x800
vs1	at vmes0 addr 0xffff9800 ipl 2 len 0x800
vs2	at vmes0 addr 0xffff4800 ipl 2 len 0x800
vs3	at vmes0 addr 0xffff5800 ipl 2 len 0x800
vs4	at vmes0 addr 0xffff7000 ipl 2 len 0x800
vs5	at vmes0 addr 0xffff7800 ipl 2 len 0x800
d115 2
a116 2
# ------------------------------ ssh0 devices --------------------------
scsibus* at ssh?
d124 13
a136 1
pseudo-device	rd 	2
@


1.4.4.2
log
@Merge in -current from two days ago in the SMP branch.
As usual with merges, they do not indicate progress, so do not hold
your breath for working SMP, and do not mail me and ask about the
state of it.  It has not changed.  There is work ongoing, but very, very
slowly.  The commit is done in parts as to not lock up the tree in too
big chunks at a time.
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.4.4.1 2001/04/18 16:10:48 niklas Exp $
d9 1
d55 1
a55 1
# ------------------------------- vs0 devices --------------------------
@


1.4.4.3
log
@Sync the SMP branch to something just after 3.0
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.4.4.2 2001/07/04 10:19:49 niklas Exp $
d7 1
@


1.4.4.4
log
@Merge in -current
@
text
@d1 1
a1 1
#	$OpenBSD$
d63 3
@


1.4.4.5
log
@Merge in -current
@
text
@d1 1
a1 1
#	$OpenBSD: M187,v 1.4.4.4 2001/11/13 21:04:14 niklas Exp $
a9 5
#option		DEBUG		# print debugging statements
#option		EH_DEBUG	# debugging code for exception handlers

# Define this if your processor has the xxx.usr bug (mask C82N)
option		ERRATA__XXX_USR	
@


1.4.4.6
log
@Merge in trunk
@
text
@d1 1
a1 1
#	$OpenBSD$
d8 1
@


1.4.4.7
log
@Sync the SMP branch with 3.3
@
text
@d34 3
a36 3
#lptwo0	at pcctwo0 addr 0x45000 ipl 1 size
memc0	at pcctwo0 addr 0x43000
memc1	at pcctwo0 addr 0x43100
@


1.4.4.8
log
@Merge of current from two weeks agointo the SMP branch
@
text
@d13 1
a13 1
option		ERRATA__XXX_USR
a24 1
sram0	at mainbus0 addr 0xffe00000
d28 1
d34 3
a36 4
cl1	at pcctwo0 offset 0x45200 ipl 3		# M8120 only
#lptwo0	at pcctwo0 offset 0x45000 ipl 1 size
memc0	at pcctwo0 offset 0x43000
memc1	at pcctwo0 offset 0x43100
d47 3
a49 3
le0	at vmes0 addr 0xffff1200 ipl 1 len 0x100
le1	at vmes0 addr 0xffff1400 ipl 1 len 0x100
le2	at vmes0 addr 0xffff1600 ipl 1 len 0x100
@


1.4.4.9
log
@Merge with the trunk
@
text
@d3 1
a3 1
machine mvme88k m88k
d7 4
a10 4
# Processor type
option		M88100

option		MVME187		# support for 187 (requires M88100)
d32 1
a32 1
osiop0	at pcctwo0 offset 0x47000 ipl 2
d44 13
a56 13
vx0	at vmes0 addr 0xff780000 ipl 3
vx1	at vmes0 addr 0xff790000 ipl 3
vx2	at vmes0 addr 0xff7a0000 ipl 3
vx3	at vmes0 addr 0xff7b0000 ipl 3
le0	at vmes0 addr 0xffff1200 ipl 1
le1	at vmes0 addr 0xffff1400 ipl 1
le2	at vmes0 addr 0xffff1600 ipl 1
vs0	at vmes0 addr 0xffff9000 ipl 2
vs1	at vmes0 addr 0xffff9800 ipl 2
vs2	at vmes0 addr 0xffff4800 ipl 2
vs3	at vmes0 addr 0xffff5800 ipl 2
vs4	at vmes0 addr 0xffff7000 ipl 2
vs5	at vmes0 addr 0xffff7800 ipl 2
d61 2
a62 2
# ----------------------------- osiop0 devices -------------------------
scsibus* at osiop?
@


1.3
log
@Commint for the first real mvme88k OpendBSD
@
text
@d1 1
a1 3
#
# This configuration file contains all possible options
#
d5 1
a5 1
maxusers 8
d7 1
a7 1
options		TIMEZONE=300, DST=1
a8 1
#
a9 32
#
options		"M88000"	# support for 88K
options		MVME187		# support for 187

options		SWAPPAGER	# Pager for processes (Required)
options		VNODEPAGER	# Pager for vnodes (Required)
options		DEVPAGER	# Pager for devices (Required)

options		SYSVSHM
options		SYSVSEM
options		SYSVMSG

#options		CD9660		# ISO 9660 + Rock Ridge file system
#options		MSDOSFS		# MS-DOS file system
options		FDESC		# /dev/fd
#options		FIFO		# FIFOs; RECOMMENDED
options		KERNFS		# /kern
options		NULLFS		# loopback file system
#options		PORTAL		# ?
options		PROCFS		# /proc
#options		UMAPFS		# NULLFS + uid and gid remapping
options		UNION		# union file system
#
# Networking options
options		INET
options		TCP_COMPAT_42	# compatibility with 4.2BSD TCP/IP
#options	GATEWAY		# IP packet forwarding
#options	ISO		# OSI networking
#options	TPIP
#options	EON
options		COMPAT_43
options		EXEC_COFF
d11 13
a23 1
options		LKM
d25 1
a25 1
#
d27 3
a29 6
#
# File system related options
#
#options		QUOTA		# Disk quotas for local disks
#options		NFSSERVER	# Network File System server side code
#options		NFSCLIENT	# Network File System client side code
a30 1
#
a31 13
#
options		FFS		# Berkeley fast file system
options		MFS		# Memory based filesystem
options		FIFO		# FIFO operations on vnodes (Recommended)

#
# Compatability options for various existing systems
#
#options		"COMPAT_NOMID"	# allow nonvalid machine id executables

#
# Support for System V IPC facilities.
#
d33 28
a60 1
#
a61 3
#
#options		DIAGNOSTIC	# Add additional error checking code
options		"NKMEMCLUSTERS=256"	# Size of kernel malloc area
d63 3
a65 1
#
d67 8
a74 10
#
options		PANICWAIT	# Require keystroke to dump/reboot
#options		DEBUG		# Add debugging statements
options		DDB		# Kernel debugger
options		SYSCALL_DEBUG	# debug all syscalls.
options		KTRACE		# debug all syscalls.

#
# devices
#
d76 13
a88 10
# mainbus devices
#sram0	at mainbus0 addr 0xffe00000
vme0	at mainbus0 addr 0xfff40000
pcctwo0 at mainbus0 addr 0xfff42000
# pcctwo devices
clock0	at pcctwo0 addr 0xfff42000 ipl 5
nvram0	at pcctwo0 addr 0xfffc0000 size 0x10000
ie0	at pcctwo0 addr 0xfff46000 ipl 3 size 0x1000
cl0	at pcctwo0 addr 0xfff45000 ipl 4 size 0x200
siop0	at pcctwo0 addr 0xfff47000 ipl 2 size 0x1000
a89 2
#mcecc0	at pcctwo0 addr 0xfff43000
#mcecc1	at pcctwo0 addr 0xfff43100
d93 1
a93 3
bugtty0 at mainbus0

#vme0 devices
d97 19
d117 2
a118 3
#
#sd0	at scsibus? target 0 lun 0
#sd1	at scsibus? target 2 lun 0
d123 12
a134 6
pseudo-device	vnd 2
pseudo-device	bpfilter
pseudo-device	sl			# slip
pseudo-device	ppp 2			# ppp
pseudo-device	pty 16			# pseudo terminals
pseudo-device	loop			# network loopback
d136 1
a136 1
config	netbsd root on sd1 swap on sd1
@


1.2
log
@Stuff
@
text
@@


1.1
log
@Initial revision
@
text
@d5 1
a5 1
machine m88k
@


1.1.1.1
log
@Third try at importing the mvme88k port. This is a working kernel
from nivas.
Userland and compiler still need to be worked on.
Make certain what directory the import is done from.
@
text
@@
