head	1.38;
access;
symbols
	OPENBSD_5_5:1.37.0.6
	OPENBSD_5_5_BASE:1.37
	OPENBSD_5_4:1.37.0.2
	OPENBSD_5_4_BASE:1.37
	OPENBSD_5_3:1.35.0.2
	OPENBSD_5_3_BASE:1.35
	OPENBSD_5_2:1.34.0.4
	OPENBSD_5_2_BASE:1.34
	OPENBSD_5_1_BASE:1.34
	OPENBSD_5_1:1.34.0.2
	OPENBSD_5_0:1.33.0.2
	OPENBSD_5_0_BASE:1.33
	OPENBSD_4_9:1.32.0.10
	OPENBSD_4_9_BASE:1.32
	OPENBSD_4_8:1.32.0.8
	OPENBSD_4_8_BASE:1.32
	OPENBSD_4_7:1.32.0.4
	OPENBSD_4_7_BASE:1.32
	OPENBSD_4_6:1.32.0.6
	OPENBSD_4_6_BASE:1.32
	OPENBSD_4_5:1.32.0.2
	OPENBSD_4_5_BASE:1.32
	OPENBSD_4_4:1.31.0.2
	OPENBSD_4_4_BASE:1.31
	OPENBSD_4_3:1.30.0.8
	OPENBSD_4_3_BASE:1.30
	OPENBSD_4_2:1.30.0.6
	OPENBSD_4_2_BASE:1.30
	OPENBSD_4_1:1.30.0.4
	OPENBSD_4_1_BASE:1.30
	OPENBSD_4_0:1.30.0.2
	OPENBSD_4_0_BASE:1.30
	OPENBSD_3_9:1.27.0.2
	OPENBSD_3_9_BASE:1.27
	OPENBSD_3_8:1.26.0.2
	OPENBSD_3_8_BASE:1.26
	OPENBSD_3_7:1.25.0.2
	OPENBSD_3_7_BASE:1.25
	OPENBSD_3_6:1.24.0.2
	OPENBSD_3_6_BASE:1.24
	SMP_SYNC_A:1.24
	SMP_SYNC_B:1.24
	OPENBSD_3_5:1.20.0.2
	OPENBSD_3_5_BASE:1.20
	OPENBSD_3_4:1.13.0.2
	OPENBSD_3_4_BASE:1.13
	UBC_SYNC_A:1.12
	OPENBSD_3_3:1.12.0.6
	OPENBSD_3_3_BASE:1.12
	OPENBSD_3_2:1.12.0.4
	OPENBSD_3_2_BASE:1.12
	OPENBSD_3_1:1.12.0.2
	OPENBSD_3_1_BASE:1.12
	UBC_SYNC_B:1.12
	UBC:1.9.0.2
	UBC_BASE:1.9
	OPENBSD_3_0:1.7.0.2
	OPENBSD_3_0_BASE:1.7
	OPENBSD_2_9:1.5.0.2
	OPENBSD_2_9_BASE:1.5
	OPENBSD_2_8:1.3.0.8
	OPENBSD_2_8_BASE:1.3
	OPENBSD_2_7:1.3.0.6
	OPENBSD_2_7_BASE:1.3
	SMP:1.3.0.4
	SMP_BASE:1.3
	kame_19991208:1.3
	OPENBSD_2_6:1.3.0.2
	OPENBSD_2_6_BASE:1.3
	OPENBSD_2_5:1.1.0.2
	OPENBSD_2_5_BASE:1.1;
locks; strict;
comment	@# @;


1.38
date	2014.03.18.22.36.35;	author miod;	state dead;
branches;
next	1.37;

1.37
date	2013.05.23.21.20.12;	author miod;	state Exp;
branches;
next	1.36;

1.36
date	2013.05.17.22.51.59;	author miod;	state Exp;
branches;
next	1.35;

1.35
date	2013.02.19.20.52.26;	author miod;	state Exp;
branches;
next	1.34;

1.34
date	2011.11.08.19.22.13;	author deraadt;	state Exp;
branches;
next	1.33;

1.33
date	2011.06.29.20.52.09;	author matthew;	state Exp;
branches;
next	1.32;

1.32
date	2009.02.14.17.41.40;	author miod;	state Exp;
branches;
next	1.31;

1.31
date	2008.06.08.20.37.39;	author deraadt;	state Exp;
branches;
next	1.30;

1.30
date	2006.05.28.11.09.56;	author miod;	state Exp;
branches;
next	1.29;

1.29
date	2006.05.02.21.43.07;	author miod;	state Exp;
branches;
next	1.28;

1.28
date	2006.04.19.22.09.38;	author miod;	state Exp;
branches;
next	1.27;

1.27
date	2005.09.06.19.21.57;	author miod;	state Exp;
branches;
next	1.26;

1.26
date	2005.05.01.07.54.42;	author david;	state Exp;
branches;
next	1.25;

1.25
date	2004.09.16.09.14.03;	author mickey;	state Exp;
branches;
next	1.24;

1.24
date	2004.05.07.18.12.55;	author miod;	state Exp;
branches;
next	1.23;

1.23
date	2004.04.29.14.33.27;	author miod;	state Exp;
branches;
next	1.22;

1.22
date	2004.04.26.12.34.05;	author miod;	state Exp;
branches;
next	1.21;

1.21
date	2004.04.24.19.51.44;	author miod;	state Exp;
branches;
next	1.20;

1.20
date	2004.01.12.13.15.34;	author miod;	state Exp;
branches;
next	1.19;

1.19
date	2004.01.05.20.07.59;	author miod;	state Exp;
branches;
next	1.18;

1.18
date	2004.01.04.00.29.50;	author deraadt;	state Exp;
branches;
next	1.17;

1.17
date	2003.12.27.23.58.08;	author miod;	state Exp;
branches;
next	1.16;

1.16
date	2003.12.25.21.02.46;	author miod;	state Exp;
branches;
next	1.15;

1.15
date	2003.12.25.00.21.16;	author miod;	state Exp;
branches;
next	1.14;

1.14
date	2003.10.11.22.06.48;	author miod;	state Exp;
branches;
next	1.13;

1.13
date	2003.08.09.21.19.58;	author miod;	state Exp;
branches;
next	1.12;

1.12
date	2002.03.14.00.47.58;	author miod;	state Exp;
branches;
next	1.11;

1.11
date	2001.12.22.18.53.45;	author smurph;	state Exp;
branches;
next	1.10;

1.10
date	2001.12.22.18.52.01;	author smurph;	state Exp;
branches;
next	1.9;

1.9
date	2001.12.16.23.49.43;	author miod;	state Exp;
branches
	1.9.2.1;
next	1.8;

1.8
date	2001.12.13.20.32.56;	author miod;	state Exp;
branches;
next	1.7;

1.7
date	2001.08.23.22.04.32;	author miod;	state Exp;
branches;
next	1.6;

1.6
date	2001.06.27.05.46.23;	author art;	state Exp;
branches;
next	1.5;

1.5
date	2001.03.07.23.32.40;	author miod;	state Exp;
branches;
next	1.4;

1.4
date	2001.01.14.20.25.22;	author smurph;	state Exp;
branches;
next	1.3;

1.3
date	99.09.27.21.21.15;	author smurph;	state Exp;
branches
	1.3.4.1;
next	1.2;

1.2
date	99.05.29.04.41.42;	author smurph;	state Exp;
branches;
next	1.1;

1.1
date	98.12.15.06.02.55;	author smurph;	state Exp;
branches;
next	;

1.3.4.1
date	2001.04.18.16.10.49;	author niklas;	state Exp;
branches;
next	1.3.4.2;

1.3.4.2
date	2001.07.04.10.19.50;	author niklas;	state Exp;
branches;
next	1.3.4.3;

1.3.4.3
date	2001.10.31.03.01.18;	author nate;	state Exp;
branches;
next	1.3.4.4;

1.3.4.4
date	2002.03.06.01.08.05;	author niklas;	state Exp;
branches;
next	1.3.4.5;

1.3.4.5
date	2002.03.28.10.36.02;	author niklas;	state Exp;
branches;
next	1.3.4.6;

1.3.4.6
date	2004.02.19.10.49.06;	author niklas;	state Exp;
branches;
next	1.3.4.7;

1.3.4.7
date	2004.06.05.23.09.48;	author niklas;	state Exp;
branches;
next	;

1.9.2.1
date	2002.01.31.22.55.17;	author niklas;	state Exp;
branches;
next	1.9.2.2;

1.9.2.2
date	2002.06.11.03.37.09;	author art;	state Exp;
branches;
next	;


desc
@@


1.38
log
@Retire hp300, mvme68k and mvme88k ports. These ports have no users, keeping
this hardware alive is becoming increasingly difficult, and I should heed the
message sent by the three disks which have died on me over the last few days.

Noone sane will mourn these ports anyway. So long, and thanks for the fish.
@
text
@#	$OpenBSD: RAMDISK,v 1.37 2013/05/23 21:20:12 miod Exp $

machine		mvme88k m88k

# 4 meg ramdisk
option		MINIROOTSIZE=4096
option		RAMDISK_HOOKS

# Processor type
option		M88100
option		M88110
option		M88410

option		MVME181		# support for MVME181 (requires M88100)
option		MVME187		# support for MVME187 (requires M88100)
option		MVME188		# support for MVME188 (requires M88100)
option		MVME197		# support for MVME197 (requires M88110, M88410)

# Define this if your processor has the xxx.usr bug (mask C82N)
option		ERRATA__XXX_USR

maxusers	32

#option		SCSITERSE
#option		SMALL_KERNEL
#option		NO_PROPOLICE
option		TIMEZONE=0
option		DST=0
option		FFS
option		NFSCLIENT
option		CD9660
option		INET
option		INET6
option		BOOT_CONFIG

config		bsd		root rd0a swap on rd0b

mainbus0	at root

# MVME181 devices
angelfire0	at mainbus0 addr 0xff800000
vme0		at angelfire0 offset 0x680000
dart0		at angelfire0 offset 0x640000 ipl 5
dsrtc0		at angelfire0 offset 0x10000

# MVME1x7 devices
pcctwo0		at mainbus0 addr 0xfff00000		# MVME187
bussw0		at mainbus0 addr 0xfff00000		# MVME197
#sram0		at mainbus0 addr 0xffe00000		# MVME187
pcctwo0		at bussw0 offset 0x00000		# MVME197
nvram0		at pcctwo0 offset 0xc0000
vme0		at pcctwo0 offset 0x40000
ie0		at pcctwo0 offset 0x46000 ipl 3
osiop0		at pcctwo0 offset 0x47000 ipl 2
cl0		at pcctwo0 offset 0x45000 ipl 3
#cl1		at pcctwo0 offset 0x45200 ipl 3		# M8120 only
#lptwo0		at pcctwo0 offset 0x45000 ipl 1
memc0		at pcctwo0 offset 0x43000
memc1		at pcctwo0 offset 0x43100

# MVME188 devices
syscon0		at mainbus0 addr 0xfff00000		# MVME188
nvram0		at syscon0 offset 0x80000
dart0		at syscon0 offset 0x82000 ipl 3
vme0		at syscon0 offset 0x85000

vmes0		at vme0
vmel0		at vme0

# MVME327
vsbic0		at vmes0 addr 0xffffa600 ipl 2
vsbic1		at vmes0 addr 0xffffa700 ipl 2
# MVME328, MVME328XT
vs0		at vmes0 addr 0xffff9000 ipl 2
vs1		at vmes0 addr 0xffff9800 ipl 2
vs2		at vmes0 addr 0xffff4800 ipl 2
vs3		at vmes0 addr 0xffff5800 ipl 2
vs4		at vmes0 addr 0xffff7000 ipl 2
vs5		at vmes0 addr 0xffff7800 ipl 2
# MVME332XT
#vx0		at vmes0 addr 0xff780000 ipl 3
#vx1		at vmes0 addr 0xff790000 ipl 3
#vx2		at vmes0 addr 0xff7a0000 ipl 3
#vx3		at vmes0 addr 0xff7b0000 ipl 3
# MVME376
le0		at vmes0 addr 0xffff1200 ipl 3
le1		at vmes0 addr 0xffff1400 ipl 3
le2		at vmes0 addr 0xffff1600 ipl 3
le3		at vmes0 addr 0xffff5400 ipl 3
le4		at vmes0 addr 0xffff5600 ipl 3
le5		at vmes0 addr 0xffffa400 ipl 3

scsibus*	at scsi?
sd*		at scsibus?
st*		at scsibus?
cd*		at scsibus?

pseudo-device	loop		1
pseudo-device	bpfilter	1
pseudo-device	rd		1
@


1.37
log
@TOD clock support for AngelFire boards
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.36 2013/05/17 22:51:59 miod Exp $
@


1.36
log
@Preliminary support for MVME180 and MVME181 boards. On-board serial ports
and VME controller are supported; tod chip isn't supported yet (coming soon).
MVME236 memory boards are not supported and won't likely be (unless I get my
hands on one).

MVME181-1 boots multiuser (slowly) with MVME328 SCSI and MVME376 Ethernet
despite only having 8MB of memory onboard.

MVME180 untested; might need tweaking to get MVME SCSI and Ethernet boards
supported.

Many thanks to Matti Nummi for lending me an MVME181 board.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.35 2013/02/19 20:52:26 miod Exp $
d44 1
@


1.35
log
@Introduce `option M88410', to be added to 88110 system designs making use of the
#$%&#@@! MC88410 chip. This will allow design-agonstic m88k-specific code to be
able to tell pure 88110 kernels apart from possible 88110+88410 ones.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.34 2011/11/08 19:22:13 deraadt Exp $
d14 1
d24 3
a26 3
option		SCSITERSE
option		SMALL_KERNEL
option		NO_PROPOLICE
d38 1
a38 1
mainbus0 at root
d40 25
a64 16
bussw0	at mainbus0 addr 0xfff00000
pcctwo0 at mainbus0 addr 0xfff00000
syscon0 at mainbus0 addr 0xfff00000

pcctwo0 at bussw0 offset 0x00000

vme0	at pcctwo0 offset 0x40000
nvram0	at pcctwo0 offset 0xc0000
ie0	at pcctwo0 offset 0x46000 ipl 3
osiop0	at pcctwo0 offset 0x47000 ipl 2
cl0	at pcctwo0 offset 0x45000 ipl 3
#cl1	at pcctwo0 offset 0x45200 ipl 3		# M8120 only

nvram0	at syscon0 offset 0x80000
dart0	at syscon0 offset 0x82000 ipl 3
vme0	at syscon0 offset 0x85000
d66 2
a67 2
vmes0	at vme0
#vmel0	at vme0
d70 2
a71 2
vsbic0	at vmes0 addr 0xffffa600 ipl 2
vsbic1	at vmes0 addr 0xffffa700 ipl 2
d73 6
a78 6
vs0	at vmes0 addr 0xffff9000 ipl 2
vs1	at vmes0 addr 0xffff9800 ipl 2
vs2	at vmes0 addr 0xffff4800 ipl 2
vs3	at vmes0 addr 0xffff5800 ipl 2
vs4	at vmes0 addr 0xffff7000 ipl 2
vs5	at vmes0 addr 0xffff7800 ipl 2
d80 4
a83 4
#vx0	at vmes0 addr 0xff780000 ipl 3
#vx1	at vmes0 addr 0xff790000 ipl 3
#vx2	at vmes0 addr 0xff7a0000 ipl 3
#vx3	at vmes0 addr 0xff7b0000 ipl 3
d85 15
a99 13
le0	at vmes0 addr 0xffff1200 ipl 3
le1	at vmes0 addr 0xffff1400 ipl 3
le2	at vmes0 addr 0xffff1600 ipl 3


scsibus* at scsi?
sd*	at scsibus?
st*	at scsibus?
cd*	at scsibus?

pseudo-device	loop	1
pseudo-device	bpfilter 1
pseudo-device	rd	1
@


1.34
log
@consistant "config bsd" lines; ok miod
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.34 2011/11/08 19:17:12 deraadt Exp $
d12 1
d14 3
a16 3
option		MVME187		# support for 187 (requires M88100)
option		MVME188		# support for 188 (requires M88100)
option		MVME197		# support for 197 (requires M88110)
@


1.33
log
@Replace all instances of "scsibus* at hba?" with a single "scsibus* at
scsi?" rule, similar to how ethernet PHY drivers attach at mii.

Discussed on icb.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.32 2009/02/14 17:41:40 miod Exp $
d34 1
a34 1
config		bsd		root rd0 swap on rd0b
@


1.32
log
@Add vsbic(4), a drive for the MVME327A SCSI and floppy controller, only for
the SCSI part so far.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.31 2008/06/08 20:37:39 deraadt Exp $
a77 3
scsibus* at osiop?
scsibus* at vs?
scsibus* at vsbic?
d79 1
@


1.31
log
@alpha/conf/RAMDISK
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.30 2006/05/28 11:09:56 miod Exp $
d58 11
d73 1
a76 6
vs0	at vmes0 addr 0xffff9000 ipl 2
vs1	at vmes0 addr 0xffff9800 ipl 2
vs2	at vmes0 addr 0xffff4800 ipl 2
vs3	at vmes0 addr 0xffff5800 ipl 2
vs4	at vmes0 addr 0xffff7000 ipl 2
vs5	at vmes0 addr 0xffff7800 ipl 2
d78 1
d80 1
a80 1
scsibus* at osiop?
@


1.30
log
@Configure network devices at ipl 3, not ipl 1.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.29 2006/05/02 21:43:07 miod Exp $
a29 1
option		FIFO
@


1.29
log
@Wave goodbye to bugtty on mvme88k as well.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.28 2006/04/19 22:09:38 miod Exp $
d47 1
a47 1
ie0	at pcctwo0 offset 0x46000 ipl 1
d63 3
a65 3
le0	at vmes0 addr 0xffff1200 ipl 1
le1	at vmes0 addr 0xffff1400 ipl 1
le2	at vmes0 addr 0xffff1600 ipl 1
@


1.28
log
@Get rid of the clock device attachment - since the clock is not something
we can live without, move it into the board-dependent code. This even makes
the code slightly smaller.

clock.c is moved from dev/ to mvme88k/ and only keeps common variables and
delay().
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.27 2005/09/06 19:21:57 miod Exp $
a38 1
bugtty0 at mainbus0
@


1.27
log
@Remove misleading NCPUS (hardcoded) option. From the SMP tree.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.26 2005/05/01 07:54:42 david Exp $
a45 1
clock0	at pcctwo0 ipl 5
a52 1
clock0	at syscon0 ipl 5
@


1.26
log
@spacing; ok miod@@ deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.25 2004/09/16 09:14:03 mickey Exp $
a15 2

option		"NCPUS=1"	# number of CPUs supported (max 4)
@


1.25
log
@cleanup deafult locators (blah ?); please check that your most hated architecture is still fluffy (;
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.24 2004/05/07 18:12:55 miod Exp $
d42 1
a42 1
bussw0  at mainbus0 addr 0xfff00000
@


1.24
log
@Replace the old ssh(4) NCR53C710 scsi driver with a pcctwo attachment for
the MI osiop(4) driver.

This improves performance very slighly and should also improve reliability.

Tested on 25MHz (50MHz osiop) and 33MHz (66MHz osiop) MVME187 boards.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.23 2004/04/29 14:33:27 miod Exp $
d81 3
a83 3
sd*	at scsibus? target ? lun ?
st*	at scsibus? target ? lun ?
cd*	at scsibus? target ? lun ?
@


1.23
log
@Continue factorizing m88k common code, this time files in <arch>/<arch>
which were copied verbatim from mvme88k to luna88k.

This requires backing out syntactic sugar in mvme88k kernel configuration
files which would deduct the required processor types from the board models,
as the common code only depends upon the M88100 and M88110 defines.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.22 2004/04/26 12:34:05 miod Exp $
d52 1
a52 1
ssh0	at pcctwo0 offset 0x47000 ipl 2
d79 1
a79 1
scsibus* at ssh?
@


1.22
log
@Start factorizing luna88k and mvme88k common parts.
For now, include files only.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.21 2004/04/24 19:51:44 miod Exp $
d9 7
a15 3
option		MVME187		# support for 187
option		MVME188		# support for 188
option		MVME197		# support for 197
a17 1
option		BUGMAP		# use the Bug ROM VME mappings
@


1.21
log
@Preliminary switch to an mvme88k bus_space world. Not all drivers have been
converted yet, and they rely upon some linear mappings provided by bus_space.

In order to not impact performance, almost all the bus_space accesses go
through macros and inline functions. This currently restricts us to D16 and
D32 access modes, which are selected at compilation time. Since there are no
plans to support D8 vme devices in the future, this is acceptable for now.

This makes the "len" locator for vme devices go away, and allows to simplify
some code which was using the pcctwo device, and will now directly access
hardware which is known to exist, rather than wait until the device is
attached.

While there, try to enforce more interrupt vector number checks, since these
changes pointed out that dart(4) had been working correctly so far by sheer
luck only.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.20 2004/01/12 13:15:34 miod Exp $
d3 1
a3 1
machine		mvme88k
@


1.20
log
@Oops, put back nvram0 for now.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.19 2004/01/05 20:07:59 miod Exp $
d43 1
a43 1
pcctwo0 at bussw0 offset 0x42000
d61 13
a73 13
#vx0	at vmes0 addr 0xff780000 ipl 3 len 0x10000
#vx1	at vmes0 addr 0xff790000 ipl 3 len 0x10000
#vx2	at vmes0 addr 0xff7a0000 ipl 3 len 0x10000
#vx3	at vmes0 addr 0xff7b0000 ipl 3 len 0x10000
le0	at vmes0 addr 0xffff1200 ipl 1 len 0x100
le1	at vmes0 addr 0xffff1400 ipl 1 len 0x100
le2	at vmes0 addr 0xffff1600 ipl 1 len 0x100
vs0	at vmes0 addr 0xffff9000 ipl 2 len 0x800
vs1	at vmes0 addr 0xffff9800 ipl 2 len 0x800
vs2	at vmes0 addr 0xffff4800 ipl 2 len 0x800
vs3	at vmes0 addr 0xffff5800 ipl 2 len 0x800
vs4	at vmes0 addr 0xffff7000 ipl 2 len 0x800
vs5	at vmes0 addr 0xffff7800 ipl 2 len 0x800
@


1.19
log
@Support for the second set of serial ports on the M8120 (untested)
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.18 2004/01/04 00:29:50 deraadt Exp $
d47 1
a47 1
#nvram0	at pcctwo0 offset 0xc0000
d54 1
a54 1
#nvram0	at syscon0 offset 0x80000
@


1.18
log
@put INET6, rtsol, and ping6 onto media where it fits.  install.sub changes
which begin to enable use of this will follow at a later time.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.17 2003/12/27 23:58:08 miod Exp $
d5 1
a5 1
# 2 meg ramdisk
d47 1
a47 1
nvram0	at pcctwo0 offset 0xc0000
d51 1
d54 1
a54 1
nvram0	at syscon0 offset 0x80000
d59 1
a59 1
vmel0	at vme0
d61 4
a64 4
vx0	at vmes0 addr 0xff780000 ipl 3 len 0x10000
vx1	at vmes0 addr 0xff790000 ipl 3 len 0x10000
vx2	at vmes0 addr 0xff7a0000 ipl 3 len 0x10000
vx3	at vmes0 addr 0xff7b0000 ipl 3 len 0x10000
@


1.17
log
@Replace the MVME376 driver from a homemade and dusty if_ve driver to
a ``regular'' if_le driver, sharing the common am7990 code.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.16 2003/12/25 21:02:46 miod Exp $
d31 1
@


1.16
log
@Enable vx(4) again - while it still awaits more tests, it can attach without
affecting a multiuser boot.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.15 2003/12/25 00:21:16 miod Exp $
d63 3
a65 3
ve0	at vmes0 addr 0xffff1200 ipl 1 len 0x100
ve1	at vmes0 addr 0xffff1400 ipl 1 len 0x100
ve2	at vmes0 addr 0xffff1600 ipl 1 len 0x100
@


1.15
log
@Disable vx* for now.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.14 2003/10/11 22:06:48 miod Exp $
d59 4
a62 4
vx0	at vmes0 disable addr 0xff780000 ipl 3 len 0x10000
vx1	at vmes0 disable addr 0xff790000 ipl 3 len 0x10000
vx2	at vmes0 disable addr 0xff7a0000 ipl 3 len 0x10000
vx3	at vmes0 disable addr 0xff7b0000 ipl 3 len 0x10000
@


1.14
log
@Merge sclock and clock pseudo-devices.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.13 2003/08/09 21:19:58 miod Exp $
d59 4
a62 4
vx0	at vmes0 addr 0xff780000 ipl 3 len 0x10000
vx1	at vmes0 addr 0xff790000 ipl 3 len 0x10000
vx2	at vmes0 addr 0xff7a0000 ipl 3 len 0x10000
vx3	at vmes0 addr 0xff7b0000 ipl 3 len 0x10000
@


1.13
log
@New RAMDISK configuration, inspired by the mvme68k one; and the associated
fixes to get the kernel to compile without option DDB and without
option DIAGNOSTIC.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.12 2002/03/14 00:47:58 miod Exp $
d3 1
a3 1
machine		mvme88k 
d17 1
a17 1
option		ERRATA__XXX_USR	
a44 1
sclock0	at pcctwo0 ipl 5
a51 1
sclock0	at syscon0 ipl 5
@


1.12
log
@Remove PTRACE support out of the ramdisks/miniroots.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.11 2001/12/22 18:53:45 smurph Exp $
d5 3
a7 2
include "../../../conf/GENERIC"
rmoption	PTRACE
d19 1
a19 1
maxusers	8
d21 13
a33 1
config		bsd		root rd0 swap rd0
a34 1
# ------------------------------ devices --------------------------------
a36 1
# ------------------------------ mainbus devices ------------------------
a41 1
# ---------------------------- bus swicth devices -----------------------
a43 1
# ------------------------------ pcctwo devices -------------------------
a51 1
# ------------------------------ syscon0 devices ------------------------
a57 1
# ------------------------------ vme0 devices --------------------------
a60 1
# ------------------------------ vmes0 devices -------------------------
a74 1
# ------------------------------ svme0 devices -------------------------
a75 2

# ------------------------------ ssh0 devices --------------------------
a77 1
# ------------------------------ scsibus0 devices ----------------------
d82 3
a84 4
# ------------------------------ pseudo devices ------------------------
option MINIROOTSIZE=8192
option RAMDISK_HOOKS
pseudo-device	rd 2
@


1.11
log
@Assume xxx.usr bug in RAMDISK.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.9 2001/12/16 23:49:43 miod Exp $
d6 1
@


1.10
log
@Make RAMDISK work.
@
text
@d14 3
@


1.9
log
@Revert the mvme88k to 20011212. Recent changes had not been merged correctly,
and I am fed up with dissecting diffs to put back code that disappeared.
This will likely be fixed shortly.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.7 2001/08/23 22:04:32 miod Exp $
d23 1
a23 1
busswitch0 at mainbus0 addr 0xfff00000
d27 2
a28 2
# ----------------------------- busswicth devices -----------------------
pcctwo0 at busswitch0 offset 0x42000
d51 13
a63 13
vx0	at vmes0 addr 0xff780000 ipl 3 vec 0x70 len 0x10000
vx1	at vmes0 addr 0xff790000 ipl 3 vec 0x71	len 0x10000
vx2	at vmes0 addr 0xff7a0000 ipl 3 vec 0x72 len 0x10000
vx3	at vmes0 addr 0xff7b0000 ipl 3 vec 0x73 len 0x10000
ve0	at vmes0 addr 0xffff1200 ipl 1 vec 0x74 len 0x100
ve1	at vmes0 addr 0xffff1400 ipl 1 vec 0x75 len 0x100
ve2	at vmes0 addr 0xffff1600 ipl 1 vec 0x76 len 0x100
vs0	at vmes0 addr 0xffff9000 ipl 2 vec 0x80 len 0x800
vs1	at vmes0 addr 0xffff9800 ipl 2 vec 0x82 len 0x800
vs2	at vmes0 addr 0xffff4800 ipl 2 vec 0x84 len 0x800
vs3	at vmes0 addr 0xffff5800 ipl 2 vec 0x86 len 0x800
vs4	at vmes0 addr 0xffff7000 ipl 2 vec 0x88 len 0x800
vs5	at vmes0 addr 0xffff7800 ipl 2 vec 0x8a len 0x800
@


1.9.2.1
log
@Merge in -current, builds on i386, otherwise untested
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.11 2001/12/22 18:53:45 smurph Exp $
a13 3
# Define this if your processor has the xxx.usr bug (mask C82N)
option		ERRATA__XXX_USR	

d23 1
a23 1
bussw0  at mainbus0 addr 0xfff00000
d27 2
a28 2
# ---------------------------- bus swicth devices -----------------------
pcctwo0 at bussw0 offset 0x42000
d51 13
a63 13
vx0	at vmes0 addr 0xff780000 ipl 3 len 0x10000
vx1	at vmes0 addr 0xff790000 ipl 3 len 0x10000
vx2	at vmes0 addr 0xff7a0000 ipl 3 len 0x10000
vx3	at vmes0 addr 0xff7b0000 ipl 3 len 0x10000
ve0	at vmes0 addr 0xffff1200 ipl 1 len 0x100
ve1	at vmes0 addr 0xffff1400 ipl 1 len 0x100
ve2	at vmes0 addr 0xffff1600 ipl 1 len 0x100
vs0	at vmes0 addr 0xffff9000 ipl 2 len 0x800
vs1	at vmes0 addr 0xffff9800 ipl 2 len 0x800
vs2	at vmes0 addr 0xffff4800 ipl 2 len 0x800
vs3	at vmes0 addr 0xffff5800 ipl 2 len 0x800
vs4	at vmes0 addr 0xffff7000 ipl 2 len 0x800
vs5	at vmes0 addr 0xffff7800 ipl 2 len 0x800
@


1.9.2.2
log
@Sync UBC branch to -current
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.9.2.1 2002/01/31 22:55:17 niklas Exp $
a5 1
rmoption	PTRACE
@


1.8
log
@Add magic to the kernel Makefile to remove the need to explicitely put
the processor type in the configuration files, if you specify a board type.
Also, some syntaxic sugar for the MVME187 case as well.
@
text
@d5 1
a5 17
maxusers	2

option		RAMDISK_HOOKS
option		MINIROOTSIZE=8192

option		TIMEZONE=0
option		DST=0

option		SMALL_KERNEL
option		DIAGNOSTIC
option		FFS		# UFS
option		NFSCLIENT	# Network File System client
option		CD9660		# ISO 9660 + Rock Ridge file system
option		FDESC		# /dev/fd
option		FIFO		# FIFOs; RECOMMENDED
option		INET		# IP + ICMP + TCP + UDP
option		BOOT_CONFIG	# add support for boot -c
d9 1
a9 1
#option		MVME197		# support for 197
d14 1
a14 3
# Define this if your processor has the xxx.usr bug (mask C82N)
# In doubt, leave it enabled.
option		ERRATA__XXX_USR	
d16 1
a16 1
config		bsd		root on rd0a
d22 4
a25 4
bugtty0	at mainbus0
bussw0	at mainbus0 addr 0xfff00000
pcctwo0	at mainbus0 addr 0xfff00000
syscon0	at mainbus0 addr 0xfff00000
d27 2
a28 2
# ------------------------------ bussw devices --------------------------
pcctwo0 at bussw0 offset 0x42000
d65 1
a65 1
# ------------------------------ vs0 devices -------------------------
d77 3
a79 5

pseudo-device	rd	2
pseudo-device	loop	1	# network loopback
pseudo-device	bpfilter 1	# packet filter
pseudo-device	pty	4	# pseudo-terminals
@


1.7
log
@option M88000 is not necessary for mvme88k.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.6 2001/06/27 05:46:23 art Exp $
d5 17
a21 1
include "../../../conf/GENERIC"
d25 1
a25 1
option		MVME197		# support for 197
d30 3
a32 1
maxusers	8
d34 1
a34 1
config		bsd		root rd0 swap rd0
d40 4
a43 4
bugtty0 at mainbus0
busswitch0 at mainbus0 addr 0xfff00000
pcctwo0 at mainbus0 addr 0xfff00000
syscon0 at mainbus0 addr 0xfff00000
d45 2
a46 2
# ----------------------------- busswicth devices -----------------------
pcctwo0 at busswitch0 offset 0x42000
d83 1
a83 1
# ------------------------------ svme0 devices -------------------------
d95 5
a99 3
option MINIROOTSIZE=8192
option RAMDISK_HOOKS
pseudo-device	rd 2
@


1.6
log
@UVM is no longer an option.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.5 2001/03/07 23:32:40 miod Exp $
a6 1
option		"M88000"	# support for 88K
@


1.5
log
@ssh replaces siop here, too...
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.4 2001/01/14 20:25:22 smurph Exp $
a11 1
option		UVM		# use the UVM virtual memory system
@


1.4
log
@Complete move to UVM virtual memory system.  More header fixes.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.3 1999/09/27 21:21:15 smurph Exp $
d38 1
a38 1
siop0	at pcctwo0 offset 0x47000 ipl 2
d70 2
a71 2
# ------------------------------ siop0 devices -------------------------
scsibus* at siop?
@


1.3
log
@Some cleaning...
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.2 1999/05/29 04:41:42 smurph Exp $
d7 8
a14 4
options		"M88000"	# support for 88K
options		MVME187		# support for 187
options		MVME188		# support for 188
options		MVME197		# support for 197
@


1.3.4.1
log
@Update the SMP branch to -current, this breaks the SMP branch though.
But it will be fixed soonish.  Note, nothing new has happened, this is just
a merge of the trunk into this branch.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.5 2001/03/07 23:32:40 miod Exp $
d7 4
a10 8
option		"M88000"	# support for 88K
option		MVME187		# support for 187
option		MVME188		# support for 188
option		MVME197		# support for 197

option		UVM		# use the UVM virtual memory system
option		"NCPUS=1"	# number of CPUs supported (max 4)
option		BUGMAP		# use the Bug ROM VME mappings
d34 1
a34 1
ssh0	at pcctwo0 offset 0x47000 ipl 2
d66 2
a67 2
# ------------------------------ ssh0 devices --------------------------
scsibus* at ssh?
@


1.3.4.2
log
@Merge in -current from two days ago in the SMP branch.
As usual with merges, they do not indicate progress, so do not hold
your breath for working SMP, and do not mail me and ask about the
state of it.  It has not changed.  There is work ongoing, but very, very
slowly.  The commit is done in parts as to not lock up the tree in too
big chunks at a time.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.3.4.1 2001/04/18 16:10:49 niklas Exp $
d12 1
@


1.3.4.3
log
@Sync the SMP branch to something just after 3.0
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.3.4.2 2001/07/04 10:19:50 niklas Exp $
d7 1
@


1.3.4.4
log
@Merge in trunk
@
text
@d1 1
a1 1
#	$OpenBSD$
a13 3
# Define this if your processor has the xxx.usr bug (mask C82N)
option		ERRATA__XXX_USR	

d23 1
a23 1
bussw0  at mainbus0 addr 0xfff00000
d27 2
a28 2
# ---------------------------- bus swicth devices -----------------------
pcctwo0 at bussw0 offset 0x42000
d51 13
a63 13
vx0	at vmes0 addr 0xff780000 ipl 3 len 0x10000
vx1	at vmes0 addr 0xff790000 ipl 3 len 0x10000
vx2	at vmes0 addr 0xff7a0000 ipl 3 len 0x10000
vx3	at vmes0 addr 0xff7b0000 ipl 3 len 0x10000
ve0	at vmes0 addr 0xffff1200 ipl 1 len 0x100
ve1	at vmes0 addr 0xffff1400 ipl 1 len 0x100
ve2	at vmes0 addr 0xffff1600 ipl 1 len 0x100
vs0	at vmes0 addr 0xffff9000 ipl 2 len 0x800
vs1	at vmes0 addr 0xffff9800 ipl 2 len 0x800
vs2	at vmes0 addr 0xffff4800 ipl 2 len 0x800
vs3	at vmes0 addr 0xffff5800 ipl 2 len 0x800
vs4	at vmes0 addr 0xffff7000 ipl 2 len 0x800
vs5	at vmes0 addr 0xffff7800 ipl 2 len 0x800
@


1.3.4.5
log
@Merge in -current from about a week ago
@
text
@a5 1
rmoption	PTRACE
@


1.3.4.6
log
@Merge of current from two weeks agointo the SMP branch
@
text
@d3 1
a3 1
machine		mvme88k
d5 2
a6 3
# 4 meg ramdisk
option		MINIROOTSIZE=4096
option		RAMDISK_HOOKS
d16 1
a16 1
option		ERRATA__XXX_USR
d18 1
a18 1
maxusers	32
d20 1
a20 14
option		SCSITERSE
option		SMALL_KERNEL
option		NO_PROPOLICE
option		TIMEZONE=0
option		DST=0
option		FFS
option		NFSCLIENT
option		CD9660
option		FIFO
option		INET
option		INET6
option		BOOT_CONFIG

config		bsd		root rd0 swap on rd0b
d22 1
d25 1
d31 1
d34 1
d36 1
a41 1
#cl1	at pcctwo0 offset 0x45200 ipl 3		# M8120 only
d43 1
d45 1
d50 1
d52 1
a52 1
#vmel0	at vme0
d54 8
a61 7
#vx0	at vmes0 addr 0xff780000 ipl 3 len 0x10000
#vx1	at vmes0 addr 0xff790000 ipl 3 len 0x10000
#vx2	at vmes0 addr 0xff7a0000 ipl 3 len 0x10000
#vx3	at vmes0 addr 0xff7b0000 ipl 3 len 0x10000
le0	at vmes0 addr 0xffff1200 ipl 1 len 0x100
le1	at vmes0 addr 0xffff1400 ipl 1 len 0x100
le2	at vmes0 addr 0xffff1600 ipl 1 len 0x100
d69 1
d71 2
d75 1
d80 4
a83 3
pseudo-device	loop	1
pseudo-device	bpfilter 1
pseudo-device	rd	1
@


1.3.4.7
log
@Merge with the trunk
@
text
@d3 1
a3 1
machine		mvme88k m88k
d9 3
a11 7
# Processor type
option		M88100
option		M88110

option		MVME187		# support for 187 (requires M88100)
option		MVME188		# support for 188 (requires M88100)
option		MVME197		# support for 197 (requires M88110)
d14 1
d43 1
a43 1
pcctwo0 at bussw0 offset 0x00000
d49 1
a49 1
osiop0	at pcctwo0 offset 0x47000 ipl 2
d61 13
a73 13
#vx0	at vmes0 addr 0xff780000 ipl 3
#vx1	at vmes0 addr 0xff790000 ipl 3
#vx2	at vmes0 addr 0xff7a0000 ipl 3
#vx3	at vmes0 addr 0xff7b0000 ipl 3
le0	at vmes0 addr 0xffff1200 ipl 1
le1	at vmes0 addr 0xffff1400 ipl 1
le2	at vmes0 addr 0xffff1600 ipl 1
vs0	at vmes0 addr 0xffff9000 ipl 2
vs1	at vmes0 addr 0xffff9800 ipl 2
vs2	at vmes0 addr 0xffff4800 ipl 2
vs3	at vmes0 addr 0xffff5800 ipl 2
vs4	at vmes0 addr 0xffff7000 ipl 2
vs5	at vmes0 addr 0xffff7800 ipl 2
d76 1
a76 1
scsibus* at osiop?
@


1.2
log
@Added vme bus device drivers. MVME328, MVME376, MVME332
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.1 1998/12/15 06:02:55 smurph Exp $
d9 2
d12 1
a12 1
maxusers	32
d16 1
a16 3
#
# devices
#
d18 1
d20 2
a21 2
#bugtty0 at mainbus0
#sram0	at mainbus0 addr 0xffe00000
d23 5
d30 2
d33 1
a33 1
ie0	at pcctwo0 offset 0x46000 ipl 3
d36 8
a43 2
vme0	at pcctwo0 offset 0x40000
#lptwo0	at pcctwo0 offset 0x45000 ipl 1 
d47 19
d68 1
a69 2
#sd0	at scsibus? target 0 lun 0
#sd1	at scsibus? target 2 lun 0
d73 1
a74 4
#pseudo-device	vnd 2
#pseudo-device	bpfilter
#pseudo-device	sl			# slip

@


1.1
log
@Commint for the first real mvme88k OpendBSD
@
text
@d1 1
a1 1
#	$OpenBSD: MINIROOT,v 1.2 1997/03/31 00:23:51 downsj Exp $
d20 1
a20 1
sram0	at mainbus0 addr 0xffe00000
@

