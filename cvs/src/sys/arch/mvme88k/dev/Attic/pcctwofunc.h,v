head	1.5;
access;
symbols
	SMP_SYNC_A:1.5
	SMP_SYNC_B:1.5
	OPENBSD_3_5:1.4.0.10
	OPENBSD_3_5_BASE:1.4
	OPENBSD_3_4:1.4.0.8
	OPENBSD_3_4_BASE:1.4
	UBC_SYNC_A:1.4
	OPENBSD_3_3:1.4.0.6
	OPENBSD_3_3_BASE:1.4
	OPENBSD_3_2:1.4.0.4
	OPENBSD_3_2_BASE:1.4
	OPENBSD_3_1:1.4.0.2
	OPENBSD_3_1_BASE:1.4
	UBC_SYNC_B:1.4
	UBC:1.3.0.2
	UBC_BASE:1.3
	OPENBSD_3_0:1.1.0.6
	OPENBSD_3_0_BASE:1.1
	OPENBSD_2_9:1.1.0.4
	OPENBSD_2_9_BASE:1.1
	SMP:1.1.0.2;
locks; strict;
comment	@ * @;


1.5
date	2004.04.24.19.51.48;	author miod;	state dead;
branches;
next	1.4;

1.4
date	2002.03.14.01.26.39;	author millert;	state Exp;
branches;
next	1.3;

1.3
date	2001.12.16.23.49.46;	author miod;	state Exp;
branches
	1.3.2.1;
next	1.2;

1.2
date	2001.12.13.08.55.51;	author smurph;	state Exp;
branches;
next	1.1;

1.1
date	2001.03.08.00.03.14;	author miod;	state Exp;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2001.04.18.16.11.00;	author niklas;	state Exp;
branches;
next	1.1.2.2;

1.1.2.2
date	2002.03.28.10.36.02;	author niklas;	state Exp;
branches;
next	1.1.2.3;

1.1.2.3
date	2004.06.05.23.09.49;	author niklas;	state dead;
branches;
next	;

1.3.2.1
date	2002.06.11.03.37.10;	author art;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Preliminary switch to an mvme88k bus_space world. Not all drivers have been
converted yet, and they rely upon some linear mappings provided by bus_space.

In order to not impact performance, almost all the bus_space accesses go
through macros and inline functions. This currently restricts us to D16 and
D32 access modes, which are selected at compilation time. Since there are no
plans to support D8 vme devices in the future, this is acceptable for now.

This makes the "len" locator for vme devices go away, and allows to simplify
some code which was using the pcctwo device, and will now directly access
hardware which is known to exist, rather than wait until the device is
attached.

While there, try to enforce more interrupt vector number checks, since these
changes pointed out that dart(4) had been working correctly so far by sheer
luck only.
@
text
@/*	$OpenBSD: pcctwofunc.h,v 1.4 2002/03/14 01:26:39 millert Exp $ */

#ifndef _MVME88K_PCCTWO_H_
#define _MVME88K_PCCTWO_H_

int pcctwointr_establish(int vec, struct intrhand *ih);

#endif	/* _MVME88K_PCCTWO_H_ */

@


1.4
log
@First round of __P removal in sys
@
text
@d1 1
a1 1
/*	$OpenBSD: pcctwofunc.h,v 1.3 2001/12/16 23:49:46 miod Exp $ */
@


1.3
log
@Revert the mvme88k to 20011212. Recent changes had not been merged correctly,
and I am fed up with dissecting diffs to put back code that disappeared.
This will likely be fixed shortly.
@
text
@d1 1
a1 1
/*	$OpenBSD: pcctwofunc.h,v 1.1 2001/03/08 00:03:14 miod Exp $ */
d6 1
a6 1
int pcctwointr_establish __P((int vec, struct intrhand *ih));
@


1.3.2.1
log
@Sync UBC branch to -current
@
text
@d1 1
a1 1
/*	$OpenBSD: pcctwofunc.h,v 1.3 2001/12/16 23:49:46 miod Exp $ */
d6 1
a6 1
int pcctwointr_establish(int vec, struct intrhand *ih);
@


1.2
log
@Support for MVME197 completed.  Fix SPL defs.
@
text
@d3 2
a4 2
#ifndef _MVME88K_PCCTWOF_H_
#define _MVME88K_PCCTWOF_H_
@


1.1
log
@Some warning hunting.
Define new include files for convenience, for use by drivers who can
attach either to pcctwo or syscon, or need bug console routines.
@
text
@d1 1
a1 1
/*	$OpenBSD$ */
d3 2
a4 2
#ifndef _MVME88K_PCCTWO_H_
#define _MVME88K_PCCTWO_H_
@


1.1.2.1
log
@Update the SMP branch to -current, this breaks the SMP branch though.
But it will be fixed soonish.  Note, nothing new has happened, this is just
a merge of the trunk into this branch.
@
text
@d1 1
a1 1
/*	$OpenBSD: pcctwofunc.h,v 1.1 2001/03/08 00:03:14 miod Exp $ */
@


1.1.2.2
log
@Merge in -current from about a week ago
@
text
@d1 1
a1 1
/*	$OpenBSD$ */
d6 1
a6 1
int pcctwointr_establish(int vec, struct intrhand *ih);
@


1.1.2.3
log
@Merge with the trunk
@
text
@d1 1
a1 1
/*	$OpenBSD: pcctwofunc.h,v 1.1.2.2 2002/03/28 10:36:02 niklas Exp $ */
@


