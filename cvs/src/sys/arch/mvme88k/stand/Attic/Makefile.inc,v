head	1.14;
access;
symbols
	OPENBSD_5_5:1.13.0.6
	OPENBSD_5_5_BASE:1.13
	OPENBSD_5_4:1.13.0.2
	OPENBSD_5_4_BASE:1.13
	OPENBSD_5_3:1.12.0.2
	OPENBSD_5_3_BASE:1.12
	OPENBSD_5_2:1.11.0.16
	OPENBSD_5_2_BASE:1.11
	OPENBSD_5_1_BASE:1.11
	OPENBSD_5_1:1.11.0.14
	OPENBSD_5_0:1.11.0.12
	OPENBSD_5_0_BASE:1.11
	OPENBSD_4_9:1.11.0.10
	OPENBSD_4_9_BASE:1.11
	OPENBSD_4_8:1.11.0.8
	OPENBSD_4_8_BASE:1.11
	OPENBSD_4_7:1.11.0.4
	OPENBSD_4_7_BASE:1.11
	OPENBSD_4_6:1.11.0.6
	OPENBSD_4_6_BASE:1.11
	OPENBSD_4_5:1.11.0.2
	OPENBSD_4_5_BASE:1.11
	OPENBSD_4_4:1.10.0.10
	OPENBSD_4_4_BASE:1.10
	OPENBSD_4_3:1.10.0.8
	OPENBSD_4_3_BASE:1.10
	OPENBSD_4_2:1.10.0.6
	OPENBSD_4_2_BASE:1.10
	OPENBSD_4_1:1.10.0.4
	OPENBSD_4_1_BASE:1.10
	OPENBSD_4_0:1.10.0.2
	OPENBSD_4_0_BASE:1.10
	OPENBSD_3_9:1.9.0.2
	OPENBSD_3_9_BASE:1.9
	OPENBSD_3_8:1.8.0.6
	OPENBSD_3_8_BASE:1.8
	OPENBSD_3_7:1.8.0.4
	OPENBSD_3_7_BASE:1.8
	OPENBSD_3_6:1.8.0.2
	OPENBSD_3_6_BASE:1.8
	SMP_SYNC_A:1.7
	SMP_SYNC_B:1.7
	OPENBSD_3_5:1.7.0.2
	OPENBSD_3_5_BASE:1.7
	OPENBSD_3_4:1.5.0.4
	OPENBSD_3_4_BASE:1.5
	UBC_SYNC_A:1.5
	OPENBSD_3_3:1.5.0.2
	OPENBSD_3_3_BASE:1.5
	OPENBSD_3_2:1.4.0.10
	OPENBSD_3_2_BASE:1.4
	OPENBSD_3_1:1.4.0.8
	OPENBSD_3_1_BASE:1.4
	UBC_SYNC_B:1.4
	UBC:1.4.0.6
	UBC_BASE:1.4
	OPENBSD_3_0:1.4.0.4
	OPENBSD_3_0_BASE:1.4
	OPENBSD_2_9:1.4.0.2
	OPENBSD_2_9_BASE:1.4
	OPENBSD_2_8:1.2.0.12
	OPENBSD_2_8_BASE:1.2
	OPENBSD_2_7:1.2.0.10
	OPENBSD_2_7_BASE:1.2
	SMP:1.2.0.8
	SMP_BASE:1.2
	kame_19991208:1.2
	OPENBSD_2_6:1.2.0.6
	OPENBSD_2_6_BASE:1.2
	OPENBSD_2_5:1.2.0.4
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.2.0.2
	OPENBSD_2_4_BASE:1.2
	OPENBSD_2_3:1.1.1.1.0.6
	OPENBSD_2_3_BASE:1.1.1.1
	OPENBSD_2_2:1.1.1.1.0.4
	OPENBSD_2_2_BASE:1.1.1.1
	OPENBSD_2_1:1.1.1.1.0.2
	OPENBSD_2_1_BASE:1.1.1.1
	mvme88kport:1.1.1.1;
locks; strict;
comment	@# @;


1.14
date	2014.03.18.22.36.36;	author miod;	state dead;
branches;
next	1.13;

1.13
date	2013.04.18.20.43.16;	author miod;	state Exp;
branches;
next	1.12;

1.12
date	2012.12.01.21.08.18;	author miod;	state Exp;
branches;
next	1.11;

1.11
date	2009.01.18.21.49.09;	author miod;	state Exp;
branches;
next	1.10;

1.10
date	2006.05.16.22.52.07;	author miod;	state Exp;
branches;
next	1.9;

1.9
date	2005.12.30.02.03.49;	author millert;	state Exp;
branches;
next	1.8;

1.8
date	2004.07.13.21.03.38;	author marc;	state Exp;
branches;
next	1.7;

1.7
date	2003.10.11.22.08.57;	author miod;	state Exp;
branches;
next	1.6;

1.6
date	2003.10.01.20.39.40;	author miod;	state Exp;
branches;
next	1.5;

1.5
date	2002.12.02.09.00.25;	author miod;	state Exp;
branches;
next	1.4;

1.4
date	2001.03.27.21.13.51;	author miod;	state Exp;
branches
	1.4.6.1;
next	1.3;

1.3
date	2001.01.13.05.19.00;	author smurph;	state Exp;
branches;
next	1.2;

1.2
date	98.08.22.08.57.28;	author smurph;	state Exp;
branches
	1.2.8.1;
next	1.1;

1.1
date	97.03.03.19.30.28;	author rahnds;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	97.03.03.19.30.28;	author rahnds;	state Exp;
branches;
next	;

1.2.8.1
date	2001.04.18.16.11.44;	author niklas;	state Exp;
branches;
next	1.2.8.2;

1.2.8.2
date	2003.03.27.23.32.19;	author niklas;	state Exp;
branches;
next	1.2.8.3;

1.2.8.3
date	2004.02.19.10.49.08;	author niklas;	state Exp;
branches;
next	;

1.4.6.1
date	2003.05.19.21.45.53;	author tedu;	state Exp;
branches;
next	;


desc
@@


1.14
log
@Retire hp300, mvme68k and mvme88k ports. These ports have no users, keeping
this hardware alive is becoming increasingly difficult, and I should heed the
message sent by the three disks which have died on me over the last few days.

Noone sane will mourn these ports anyway. So long, and thanks for the fish.
@
text
@#	$OpenBSD: Makefile.inc,v 1.13 2013/04/18 20:43:16 miod Exp $

MDEC_DIR?=/usr/mdec
CFLAGS+=-Wall -Werror -fno-stack-protector -mmemcpy
CFLAGS+=-fno-builtin-printf -fno-builtin-putchar -fno-builtin-vprintf
CFLAGS+=-DHEAP_START=${HEAP_START}

# Load addresses for first and second stage bootstraps
STAGE1_RELOC=	0x00680000
STAGE2_RELOC=	0x00780000

# Base of the heap (ethernet buffers will be allocated below it)
HEAP_START=	0x00700000
@


1.13
log
@Lower boot blocks load address, so that they fit within 8MB. Step 1 of many
towards getting Angelfire boards (MVME180/181) running.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.12 2012/12/01 21:08:18 miod Exp $
@


1.12
log
@Switch m88k ports to gcc 3.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.11 2009/01/18 21:49:09 miod Exp $
d9 2
a10 2
STAGE1_RELOC=	0x009f0000
STAGE2_RELOC=	0x00af0000
d13 1
a13 1
HEAP_START=	0x00c00000
@


1.11
log
@Define HEAP_START so that we can use space below it for ethernet buffers;
this prevents if_ie buffers from possibly overwriting the stack.
Crank bootloader versions.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.10 2006/05/16 22:52:07 miod Exp $
d5 1
@


1.10
log
@Make standalone binaries compile with -Wall -Werror
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.9 2005/12/30 02:03:49 millert Exp $
d5 1
d8 2
a9 3
STAGE1_RELOC=0x009F0000
STAGE2_RELOC=0x00AF0000

d11 2
@


1.9
log
@Now that errno.h and sys/errno.h are separate header files there is no
need to use the -Derrno=errno workaround added when __errno() was
introduced.  OK deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.8 2004/07/13 21:03:38 marc Exp $
d4 1
a4 1
CFLAGS+=	-fno-stack-protector -mmemcpy
@


1.8
log
@errno changes, lib major version bumps, and general flag day
To build you must:
cd /usr/src && make obj && make includes
cd lib/libc && make depend && make && NOMAN=1 sudo make install
cd /usr/src && make build
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.7 2003/10/11 22:08:57 miod Exp $
d4 1
a4 1
CFLAGS+=	-fno-stack-protector -mmemcpy -Derrno=errno
@


1.7
log
@Nuke trailing whitespace.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.6 2003/10/01 20:39:40 miod Exp $
d4 1
a4 1
CFLAGS+=	-fno-stack-protector -mmemcpy
@


1.6
log
@Compile kernel and bootblocks with -mmemcpy, to get rid of libgcc dependancy.
Also, honor default compilation options in stand/ whenever possible.

This requires an up-to-date compiler, but it's not exactly like many people
are going to be affected by this change...
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.5 2002/12/02 09:00:25 miod Exp $
d6 1
a6 1
# Load addresses for first and second stage bootstraps 
@


1.5
log
@Import propolice (http://www.trl.ibm.com/projects/security/ssp), a stack
attack protection scheme, into gcc.

This protection is enabled by default. It can be turned off by using the
-fno-stack-protector flag.

Code by Hiroaki Etoh (etoh at jp dot ibm dot com); work on openbsd-specific
integration by fgsch@@, deraadt@@ and myself; tests by fgsch@@, naddy@@ and
myself; beer drinking by myself.

Please note that system upgrades with this new code will require a new
libc and ld.so to be build and installed before the propolice-enabled
compiler can be installed.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.4 2001/03/27 21:13:51 miod Exp $
d4 1
a4 1
CFLAGS+=	-fno-stack-protector
@


1.4
log
@Move the boot loader relocation address higher, for full-featured
(GENERIC) kernel to fit. ``experienced by'' & ok smurph@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.3 2001/01/13 05:19:00 smurph Exp $
d4 1
@


1.4.6.1
log
@sync
@
text
@d1 1
a1 1
#	$OpenBSD$
a3 1
CFLAGS+=	-fno-stack-protector
@


1.3
log
@Booting kernel with MACHINE_NEW_NONCONTIG.  UVM code added but not working.
New stand config.  Lots of header fixes.  Can now cross-compile i386->m88k.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.2 1998/08/22 08:57:28 smurph Exp $
d6 1
a6 1
STAGE1_RELOC=0x001F0000
@


1.2
log
@Major cleanup of stand directory.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.1.1.1 1997/03/03 19:30:28 rahnds Exp $
d4 6
@


1.2.8.1
log
@Update the SMP branch to -current, this breaks the SMP branch though.
But it will be fixed soonish.  Note, nothing new has happened, this is just
a merge of the trunk into this branch.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.4 2001/03/27 21:13:51 miod Exp $
a3 6

# Load addresses for first and second stage bootstraps 
STAGE1_RELOC=0x009F0000
STAGE2_RELOC=0x00AF0000


@


1.2.8.2
log
@Sync the SMP branch with 3.3
@
text
@d1 1
a1 1
#	$OpenBSD$
a3 1
CFLAGS+=	-fno-stack-protector
@


1.2.8.3
log
@Merge of current from two weeks agointo the SMP branch
@
text
@d4 1
a4 1
CFLAGS+=	-fno-stack-protector -mmemcpy
d6 1
a6 1
# Load addresses for first and second stage bootstraps
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
#	$Id: Makefile.inc,v 1.2 1995/11/07 08:50:33 deraadt Exp $
@


1.1.1.1
log
@Third try at importing the mvme88k port. This is a working kernel
from nivas.
Userland and compiler still need to be worked on.
Make certain what directory the import is done from.
@
text
@@
