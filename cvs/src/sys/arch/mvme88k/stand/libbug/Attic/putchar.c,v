head	1.6;
access;
symbols
	OPENBSD_5_5:1.5.0.8
	OPENBSD_5_5_BASE:1.5
	OPENBSD_5_4:1.5.0.4
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.5.0.2
	OPENBSD_5_3_BASE:1.5
	OPENBSD_5_2:1.4.0.26
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.24
	OPENBSD_5_0:1.4.0.22
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.4.0.20
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.4.0.18
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.4.0.14
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.4.0.16
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.12
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.4.0.10
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.4.0.8
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_2:1.4.0.6
	OPENBSD_4_2_BASE:1.4
	OPENBSD_4_1:1.4.0.4
	OPENBSD_4_1_BASE:1.4
	OPENBSD_4_0:1.4.0.2
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.3.0.12
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.3.0.10
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.3.0.8
	OPENBSD_3_7_BASE:1.3
	OPENBSD_3_6:1.3.0.6
	OPENBSD_3_6_BASE:1.3
	SMP_SYNC_A:1.3
	SMP_SYNC_B:1.3
	OPENBSD_3_5:1.3.0.4
	OPENBSD_3_5_BASE:1.3
	OPENBSD_3_4:1.3.0.2
	OPENBSD_3_4_BASE:1.3
	UBC_SYNC_A:1.2
	OPENBSD_3_3:1.2.0.22
	OPENBSD_3_3_BASE:1.2
	OPENBSD_3_2:1.2.0.20
	OPENBSD_3_2_BASE:1.2
	OPENBSD_3_1:1.2.0.18
	OPENBSD_3_1_BASE:1.2
	UBC_SYNC_B:1.2
	UBC:1.2.0.16
	UBC_BASE:1.2
	OPENBSD_3_0:1.2.0.14
	OPENBSD_3_0_BASE:1.2
	OPENBSD_2_9:1.2.0.12
	OPENBSD_2_9_BASE:1.2
	OPENBSD_2_8:1.2.0.10
	OPENBSD_2_8_BASE:1.2
	OPENBSD_2_7:1.2.0.8
	OPENBSD_2_7_BASE:1.2
	SMP:1.2.0.6
	SMP_BASE:1.2
	kame_19991208:1.2
	OPENBSD_2_6:1.2.0.4
	OPENBSD_2_6_BASE:1.2
	OPENBSD_2_5:1.2.0.2
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.1.0.2
	OPENBSD_2_4_BASE:1.1;
locks; strict;
comment	@ * @;


1.6
date	2014.03.18.22.36.36;	author miod;	state dead;
branches;
next	1.5;

1.5
date	2013.01.05.11.20.56;	author miod;	state Exp;
branches;
next	1.4;

1.4
date	2006.05.16.22.51.30;	author miod;	state Exp;
branches;
next	1.3;

1.3
date	2003.09.07.21.35.35;	author miod;	state Exp;
branches;
next	1.2;

1.2
date	98.12.15.06.32.34;	author smurph;	state Exp;
branches
	1.2.6.1;
next	1.1;

1.1
date	98.08.22.07.39.56;	author smurph;	state Exp;
branches;
next	;

1.2.6.1
date	2004.02.19.10.49.09;	author niklas;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Retire hp300, mvme68k and mvme88k ports. These ports have no users, keeping
this hardware alive is becoming increasingly difficult, and I should heed the
message sent by the three disks which have died on me over the last few days.

Noone sane will mourn these ports anyway. So long, and thanks for the fish.
@
text
@/*	$OpenBSD: putchar.c,v 1.5 2013/01/05 11:20:56 miod Exp $ */

/*
 * putchar: easier to do this with outstr than to add more macros to
 * handle byte passing on the stack
 */

#include <sys/types.h>
#include <machine/prom.h>

#include "stand.h"
#include "prom.h"

void
putchar(c)
	int c;
{
	char ca;
	ca = (char)c & 0xFF;
	if (ca == '\n')
		putchar('\r');
	asm  volatile ("or %%r2,%%r0,%0" : : "r" (ca));
	MVMEPROM_CALL(MVMEPROM_OUTCHR);
}
@


1.5
log
@Switch m88k ports to ELF.
@
text
@d1 1
a1 1
/*	$OpenBSD: putchar.c,v 1.4 2006/05/16 22:51:30 miod Exp $ */
@


1.4
log
@Cleanup of mvme88k standalone code, with rewritten startup code with
fewer assembly statements and much less magic, a few display artefacts
removed, and private definitions moved out of the main prom.h.
@
text
@d1 1
a1 1
/*	$OpenBSD: putchar.c,v 1.3 2003/09/07 21:35:35 miod Exp $ */
d22 1
a22 1
	asm  volatile ("or r2,r0,%0" : : "r" (ca));
@


1.3
log
@Oops, use the local MVMEPROM_CALL(), rather than the one which used to be
in <machine/prom.h> -- code in stand/ does not need a specific context to
invoke the BUG functions.
@
text
@d1 1
a1 1
/*	$OpenBSD: putchar.c,v 1.2 1998/12/15 06:32:34 smurph Exp $ */
d16 1
a16 3

int c;

d18 6
a23 6
    char ca;
    ca = (char)c & 0xFF;
    if (ca == '\n') 
	putchar('\r');
    asm  volatile ("or r2,r0,%0" : : "r" (ca));
    MVMEPROM_CALL(MVMEPROM_OUTCHR);
@


1.2
log
@This fixed a number of things.  A serious bug in bugcrt.c's initial stack
among other things.
@
text
@d1 1
a1 1
/*	$OpenBSD: putchar.c,v 1.1 1998/08/22 07:39:56 smurph Exp $ */
d12 1
a12 1
#include "libbug.h"
@


1.2.6.1
log
@Merge of current from two weeks agointo the SMP branch
@
text
@d1 1
a1 1
/*	$OpenBSD$ */
d12 1
a12 1
#include "prom.h"
@


1.1
log
@new libbug.
@
text
@d1 1
a1 1
/*	$OpenBSD: putchar.c,v 1.1 1996/05/16 02:25:39 chuck Exp $ */
d20 6
a25 5
  char ca[2];
  if (c == '\n')
    putchar('\r');
  ca[0] = c;
  mvmeprom_outstr(&ca[0], &ca[1]);
@

