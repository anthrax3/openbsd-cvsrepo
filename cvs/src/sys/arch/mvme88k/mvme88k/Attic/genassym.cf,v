head	1.13;
access;
symbols
	OPENBSD_5_5:1.12.0.18
	OPENBSD_5_5_BASE:1.12
	OPENBSD_5_4:1.12.0.14
	OPENBSD_5_4_BASE:1.12
	OPENBSD_5_3:1.12.0.12
	OPENBSD_5_3_BASE:1.12
	OPENBSD_5_2:1.12.0.10
	OPENBSD_5_2_BASE:1.12
	OPENBSD_5_1_BASE:1.12
	OPENBSD_5_1:1.12.0.8
	OPENBSD_5_0:1.12.0.6
	OPENBSD_5_0_BASE:1.12
	OPENBSD_4_9:1.12.0.4
	OPENBSD_4_9_BASE:1.12
	OPENBSD_4_8:1.12.0.2
	OPENBSD_4_8_BASE:1.12
	SMP_SYNC_A:1.11
	SMP_SYNC_B:1.11
	OPENBSD_3_5:1.10.0.2
	OPENBSD_3_5_BASE:1.10
	OPENBSD_3_4:1.7.0.2
	OPENBSD_3_4_BASE:1.7
	UBC_SYNC_A:1.5
	OPENBSD_3_3:1.5.0.6
	OPENBSD_3_3_BASE:1.5
	OPENBSD_3_2:1.5.0.4
	OPENBSD_3_2_BASE:1.5
	OPENBSD_3_1:1.5.0.2
	OPENBSD_3_1_BASE:1.5
	UBC_SYNC_B:1.5
	UBC:1.4.0.2
	UBC_BASE:1.4
	OPENBSD_3_0:1.2.0.2
	OPENBSD_3_0_BASE:1.2
	SMP:1.1.0.2;
locks; strict;
comment	@# @;


1.13
date	2014.03.18.22.36.36;	author miod;	state dead;
branches;
next	1.12;

1.12
date	2010.04.26.22.11.38;	author deraadt;	state Exp;
branches;
next	1.11;

1.11
date	2004.04.29.14.33.27;	author miod;	state dead;
branches;
next	1.10;

1.10
date	2004.01.12.07.46.17;	author miod;	state Exp;
branches;
next	1.9;

1.9
date	2003.11.08.16.43.02;	author miod;	state Exp;
branches;
next	1.8;

1.8
date	2003.10.11.22.08.57;	author miod;	state Exp;
branches;
next	1.7;

1.7
date	2003.08.10.21.34.20;	author miod;	state Exp;
branches;
next	1.6;

1.6
date	2003.06.02.23.27.52;	author millert;	state Exp;
branches;
next	1.5;

1.5
date	2001.12.22.17.54.23;	author smurph;	state Exp;
branches;
next	1.4;

1.4
date	2001.12.16.23.49.46;	author miod;	state Exp;
branches
	1.4.2.1;
next	1.3;

1.3
date	2001.12.13.08.55.52;	author smurph;	state Exp;
branches;
next	1.2;

1.2
date	2001.09.16.14.28.04;	author miod;	state Exp;
branches;
next	1.1;

1.1
date	2001.05.20.05.51.22;	author miod;	state Exp;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2001.10.31.03.01.19;	author nate;	state Exp;
branches;
next	1.1.2.2;

1.1.2.2
date	2002.03.06.02.04.45;	author niklas;	state Exp;
branches;
next	1.1.2.3;

1.1.2.3
date	2003.06.07.11.13.17;	author ho;	state Exp;
branches;
next	1.1.2.4;

1.1.2.4
date	2004.02.19.10.49.07;	author niklas;	state Exp;
branches;
next	1.1.2.5;

1.1.2.5
date	2004.06.05.23.09.50;	author niklas;	state dead;
branches;
next	;

1.4.2.1
date	2002.01.31.22.55.19;	author niklas;	state Exp;
branches;
next	;


desc
@@


1.13
log
@Retire hp300, mvme68k and mvme88k ports. These ports have no users, keeping
this hardware alive is becoming increasingly difficult, and I should heed the
message sent by the three disks which have died on me over the last few days.

Noone sane will mourn these ports anyway. So long, and thanks for the fish.
@
text
@#	$OpenBSD: genassym.cf,v 1.12 2010/04/26 22:11:38 deraadt Exp $
@


1.12
log
@next step towards unification:  make all the genassym chunks handle both
arch and machine dependent files (and add the missing files)
ok miod drahn
@
text
@d1 1
a1 1
#	$OpenBSD$
@


1.11
log
@Continue factorizing m88k common code, this time files in <arch>/<arch>
which were copied verbatim from mvme88k to luna88k.

This requires backing out syntactic sugar in mvme88k kernel configuration
files which would deduct the required processor types from the board models,
as the common code only depends upon the M88100 and M88110 defines.
@
text
@d1 1
a1 144
#	$OpenBSD: genassym.cf,v 1.10 2004/01/12 07:46:17 miod Exp $
#
# Copyright (c) 1982, 1990 The Regents of the University of California.
# All rights reserved.
#
# Redistribution and use in source and binary forms, with or without
# modification, are permitted provided that the following conditions
# are met:
# 1. Redistributions of source code must retain the above copyright
#    notice, this list of conditions and the following disclaimer.
# 2. Redistributions in binary form must reproduce the above copyright
#    notice, this list of conditions and the following disclaimer in the
#    documentation and/or other materials provided with the distribution.
# 3. Neither the name of the University nor the names of its contributors
#    may be used to endorse or promote products derived from this software
#    without specific prior written permission.
#
# THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
# ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
# IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
# ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
# FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
# DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
# OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
# HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
# LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
# OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
# SUCH DAMAGE.
#
#	@@(#)genassym.c	7.8 (Berkeley) 5/7/91
#	$Id: genassym.cf,v 1.10 2004/01/12 07:46:17 miod Exp $
#

include <sys/param.h>
include <sys/buf.h>
include <sys/time.h>
include <sys/proc.h>
include <sys/mbuf.h>
include <sys/msgbuf.h>
include <machine/cpu.h>
include <machine/trap.h>
include <machine/psl.h>
include <machine/vmparam.h>
include <sys/syscall.h>
include <sys/user.h>

# proc fields and values
struct	proc
member	p_forw
member	p_back
member	p_addr
member	p_stat
member	p_wchan

export	SRUN

# general constants
export	UPAGES
define	USIZE			USPACE

# pcb fields
struct	pcb
member	pcb_onfault
member	PCB_USER_STATE		user_state

# system calls
export	SYS_exit
export	SYS_sigreturn

# trapframe element indexes
define	EF_R0		offsetof(struct trapframe, tf_r[0]) / sizeof(int)
define	EF_FPSR		offsetof(struct trapframe, tf_fpsr) / sizeof(int)
define	EF_FPCR		offsetof(struct trapframe, tf_fpcr) / sizeof(int)
define	EF_EPSR		offsetof(struct trapframe, tf_epsr) / sizeof(int)
define	EF_SXIP		offsetof(struct trapframe, tf_sxip) / sizeof(int)
define	EF_SFIP		offsetof(struct trapframe, tf_sfip) / sizeof(int)
define	EF_SNIP		offsetof(struct trapframe, tf_snip) / sizeof(int)
define	EF_SSBR		offsetof(struct trapframe, tf_ssbr) / sizeof(int)
define	EF_DMT0		offsetof(struct trapframe, tf_dmt0) / sizeof(int)
define	EF_DMD0		offsetof(struct trapframe, tf_dmd0) / sizeof(int)
define	EF_DMA0		offsetof(struct trapframe, tf_dma0) / sizeof(int)
define	EF_DMT1		offsetof(struct trapframe, tf_dmt1) / sizeof(int)
define	EF_DMD1		offsetof(struct trapframe, tf_dmd1) / sizeof(int)
define	EF_DMA1		offsetof(struct trapframe, tf_dma1) / sizeof(int)
define	EF_DMT2		offsetof(struct trapframe, tf_dmt2) / sizeof(int)
define	EF_DMD2		offsetof(struct trapframe, tf_dmd2) / sizeof(int)
define	EF_DMA2		offsetof(struct trapframe, tf_dma2) / sizeof(int)
define	EF_FPECR	offsetof(struct trapframe, tf_fpecr) / sizeof(int)
define	EF_FPHS1	offsetof(struct trapframe, tf_fphs1) / sizeof(int)
define	EF_FPLS1	offsetof(struct trapframe, tf_fpls1) / sizeof(int)
define	EF_FPHS2	offsetof(struct trapframe, tf_fphs2) / sizeof(int)
define	EF_FPLS2	offsetof(struct trapframe, tf_fpls2) / sizeof(int)
define	EF_FPPT		offsetof(struct trapframe, tf_fppt) / sizeof(int)
define	EF_FPRH		offsetof(struct trapframe, tf_fprh) / sizeof(int)
define	EF_FPRL		offsetof(struct trapframe, tf_fprl) / sizeof(int)
define	EF_FPIT		offsetof(struct trapframe, tf_fpit) / sizeof(int)
define	EF_VECTOR	offsetof(struct trapframe, tf_vector) / sizeof(int)
define	EF_MASK		offsetof(struct trapframe, tf_mask) / sizeof(int)
define	EF_MODE		offsetof(struct trapframe, tf_mode) / sizeof(int)
define	EF_RET		offsetof(struct trapframe, tf_scratch1) / sizeof(int)
define	EF_IPFSR	offsetof(struct trapframe, tf_ipfsr) / sizeof(int)
define	EF_DPFSR	offsetof(struct trapframe, tf_dpfsr) / sizeof(int)
define	EF_CPU		offsetof(struct trapframe, tf_cpu) / sizeof(int)

# m88110 trapframe element indexes
define	EF_EXIP		offsetof(struct trapframe, tf_exip) / sizeof(int)
define	EF_ENIP		offsetof(struct trapframe, tf_enip) / sizeof(int)
define	EF_DSR		offsetof(struct trapframe, tf_dsr) / sizeof(int)
define	EF_DLAR		offsetof(struct trapframe, tf_dlar) / sizeof(int)
define	EF_DPAR		offsetof(struct trapframe, tf_dpar) / sizeof(int)
define	EF_ISR		offsetof(struct trapframe, tf_isr) / sizeof(int)
define	EF_ILAR		offsetof(struct trapframe, tf_ilar) / sizeof(int)
define	EF_IPAR		offsetof(struct trapframe, tf_ipar) / sizeof(int)
define	EF_ISAP		offsetof(struct trapframe, tf_isap) / sizeof(int)
define	EF_DSAP		offsetof(struct trapframe, tf_dsap) / sizeof(int)
define	EF_IUAP		offsetof(struct trapframe, tf_iuap) / sizeof(int)
define	EF_DUAP		offsetof(struct trapframe, tf_duap) / sizeof(int)

define	SIZEOF_EF	sizeof(struct trapframe)

# more (machine-dependent) pcb fields
struct	m88100_pcb
member	pcb_pc
member	pcb_ipl
member	pcb_r14
member	pcb_r15
member	pcb_r16
member	pcb_r17
member	pcb_r18
member	pcb_r19
member	pcb_r20
member	pcb_r21
member	pcb_r22
member	pcb_r23
member	pcb_r24
member	pcb_r25
member	pcb_r26
member	pcb_r27
member	pcb_r28
member	pcb_r29
member	pcb_r30
member	pcb_sp
member	pcb_fcr62
member	pcb_fcr63
@


1.10
log
@Get rid of that ugly m88100_saved_state structure, use trapframe everywhere
instead.

Allow struct reg and struct trapframe to live different lives and grow
separately. Righty now they are still the same, and code expects a trapframe
to always start with a struct reg. This may change...
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.9 2003/11/08 16:43:02 miod Exp $
d31 1
a31 1
#	$Id: genassym.cf,v 1.9 2003/11/08 16:43:02 miod Exp $
@


1.9
log
@Save the current floatingpoint state in the pcb.
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.8 2003/10/11 22:08:57 miod Exp $
d31 1
a31 1
#	$Id: genassym.cf,v 1.8 2003/10/11 22:08:57 miod Exp $
d70 48
a117 48
# m88100_saved_state element indexes
define	EF_R0		offsetof(struct m88100_saved_state, r[0]) / sizeof(int)
define	EF_FPSR		offsetof(struct m88100_saved_state, fpsr) / sizeof(int)
define	EF_FPCR		offsetof(struct m88100_saved_state, fpcr) / sizeof(int)
define	EF_EPSR		offsetof(struct m88100_saved_state, epsr) / sizeof(int)
define	EF_SXIP		offsetof(struct m88100_saved_state, sxip) / sizeof(int)
define	EF_SFIP		offsetof(struct m88100_saved_state, sfip) / sizeof(int)
define	EF_SNIP		offsetof(struct m88100_saved_state, snip) / sizeof(int)
define	EF_SSBR		offsetof(struct m88100_saved_state, ssbr) / sizeof(int)
define	EF_DMT0		offsetof(struct m88100_saved_state, dmt0) / sizeof(int)
define	EF_DMD0		offsetof(struct m88100_saved_state, dmd0) / sizeof(int)
define	EF_DMA0		offsetof(struct m88100_saved_state, dma0) / sizeof(int)
define	EF_DMT1		offsetof(struct m88100_saved_state, dmt1) / sizeof(int)
define	EF_DMD1		offsetof(struct m88100_saved_state, dmd1) / sizeof(int)
define	EF_DMA1		offsetof(struct m88100_saved_state, dma1) / sizeof(int)
define	EF_DMT2		offsetof(struct m88100_saved_state, dmt2) / sizeof(int)
define	EF_DMD2		offsetof(struct m88100_saved_state, dmd2) / sizeof(int)
define	EF_DMA2		offsetof(struct m88100_saved_state, dma2) / sizeof(int)
define	EF_FPECR	offsetof(struct m88100_saved_state, fpecr) / sizeof(int)
define	EF_FPHS1	offsetof(struct m88100_saved_state, fphs1) / sizeof(int)
define	EF_FPLS1	offsetof(struct m88100_saved_state, fpls1) / sizeof(int)
define	EF_FPHS2	offsetof(struct m88100_saved_state, fphs2) / sizeof(int)
define	EF_FPLS2	offsetof(struct m88100_saved_state, fpls2) / sizeof(int)
define	EF_FPPT		offsetof(struct m88100_saved_state, fppt) / sizeof(int)
define	EF_FPRH		offsetof(struct m88100_saved_state, fprh) / sizeof(int)
define	EF_FPRL		offsetof(struct m88100_saved_state, fprl) / sizeof(int)
define	EF_FPIT		offsetof(struct m88100_saved_state, fpit) / sizeof(int)
define	EF_VECTOR	offsetof(struct m88100_saved_state, vector) / sizeof(int)
define	EF_MASK		offsetof(struct m88100_saved_state, mask) / sizeof(int)
define	EF_MODE		offsetof(struct m88100_saved_state, mode) / sizeof(int)
define	EF_RET		offsetof(struct m88100_saved_state, scratch1) / sizeof(int)
define	EF_IPFSR	offsetof(struct m88100_saved_state, ipfsr) / sizeof(int)
define	EF_DPFSR	offsetof(struct m88100_saved_state, dpfsr) / sizeof(int)
define	EF_CPU		offsetof(struct m88100_saved_state, cpu) / sizeof(int)

# m88110 m88100_saved_state element indexes
define	EF_EXIP		offsetof(struct m88100_saved_state, exip) / sizeof(int)
define	EF_ENIP		offsetof(struct m88100_saved_state, enip) / sizeof(int)
define	EF_DSR		offsetof(struct m88100_saved_state, dsr) / sizeof(int)
define	EF_DLAR		offsetof(struct m88100_saved_state, dlar) / sizeof(int)
define	EF_DPAR		offsetof(struct m88100_saved_state, dpar) / sizeof(int)
define	EF_ISR		offsetof(struct m88100_saved_state, isr) / sizeof(int)
define	EF_ILAR		offsetof(struct m88100_saved_state, ilar) / sizeof(int)
define	EF_IPAR		offsetof(struct m88100_saved_state, ipar) / sizeof(int)
define	EF_ISAP		offsetof(struct m88100_saved_state, isap) / sizeof(int)
define	EF_DSAP		offsetof(struct m88100_saved_state, dsap) / sizeof(int)
define	EF_IUAP		offsetof(struct m88100_saved_state, iuap) / sizeof(int)
define	EF_DUAP		offsetof(struct m88100_saved_state, duap) / sizeof(int)
d119 1
a119 1
define	SIZEOF_EF	sizeof(struct m88100_saved_state)
@


1.8
log
@Nuke trailing whitespace.
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.7 2003/08/10 21:34:20 miod Exp $
d31 1
a31 1
#	$Id: genassym.cf,v 1.7 2003/08/10 21:34:20 miod Exp $
a88 2
define	EF_FPCR		offsetof(struct m88100_saved_state, fpcr) / sizeof(int)
define	EF_FPSR		offsetof(struct m88100_saved_state, fpsr) / sizeof(int)
d143 2
@


1.7
log
@Do not make NBPG visible in assym.h
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.6 2003/06/02 23:27:52 millert Exp $
d31 1
a31 1
#	$Id: genassym.cf,v 1.6 2003/06/02 23:27:52 millert Exp $
d69 1
a69 1
	
@


1.6
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.5 2001/12/22 17:54:23 smurph Exp $
d31 1
a31 1
#	$Id: genassym.cf,v 1.5 2001/12/22 17:54:23 smurph Exp $
a59 1
export	NBPG
a144 1

@


1.5
log
@add mc88110 definitions
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.4 2001/12/16 23:49:46 miod Exp $
d14 1
a14 5
# 3. All advertising materials mentioning features or use of this software
#    must display the following acknowledgement:
#	This product includes software developed by the University of
#	California, Berkeley and its contributors.
# 4. Neither the name of the University nor the names of its contributors
d31 1
a31 1
#	$Id: genassym.cf,v 1.4 2001/12/16 23:49:46 miod Exp $
@


1.4
log
@Revert the mvme88k to 20011212. Recent changes had not been merged correctly,
and I am fed up with dissecting diffs to put back code that disappeared.
This will likely be fixed shortly.
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.2 2001/09/16 14:28:04 miod Exp $
d35 1
a35 1
#	$Id: genassym.cf,v 1.2 2001/09/16 14:28:04 miod Exp $
d110 5
d118 1
a118 1
define	EF_ISR		offsetof(struct m88100_saved_state, dsr) / sizeof(int)
d121 4
a124 1
define	EF_CPU		offsetof(struct m88100_saved_state, cpu) / sizeof(int)
d150 1
@


1.4.2.1
log
@Merge in -current, builds on i386, otherwise untested
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.5 2001/12/22 17:54:23 smurph Exp $
d35 1
a35 1
#	$Id: genassym.cf,v 1.5 2001/12/22 17:54:23 smurph Exp $
a109 5
define	EF_CPU		offsetof(struct m88100_saved_state, cpu) / sizeof(int)

# m88110 m88100_saved_state element indexes
define	EF_EXIP		offsetof(struct m88100_saved_state, exip) / sizeof(int)
define	EF_ENIP		offsetof(struct m88100_saved_state, enip) / sizeof(int)
d113 1
a113 1
define	EF_ISR		offsetof(struct m88100_saved_state, isr) / sizeof(int)
d116 1
a116 4
define	EF_ISAP		offsetof(struct m88100_saved_state, isap) / sizeof(int)
define	EF_DSAP		offsetof(struct m88100_saved_state, dsap) / sizeof(int)
define	EF_IUAP		offsetof(struct m88100_saved_state, iuap) / sizeof(int)
define	EF_DUAP		offsetof(struct m88100_saved_state, duap) / sizeof(int)
a141 1

@


1.3
log
@Support for MVME197 completed.  Fix SPL defs.
@
text
@a109 5
define	EF_CPU		offsetof(struct m88100_saved_state, cpu) / sizeof(int)

# m88110 m88100_saved_state element indexes
define	EF_EXIP		offsetof(struct m88100_saved_state, exip) / sizeof(int)
define	EF_ENIP		offsetof(struct m88100_saved_state, enip) / sizeof(int)
d113 1
a113 1
define	EF_ISR		offsetof(struct m88100_saved_state, isr) / sizeof(int)
d116 1
a116 4
define	EF_ISAP		offsetof(struct m88100_saved_state, isap) / sizeof(int)
define	EF_DSAP		offsetof(struct m88100_saved_state, dsap) / sizeof(int)
define	EF_IUAP		offsetof(struct m88100_saved_state, iuap) / sizeof(int)
define	EF_DUAP		offsetof(struct m88100_saved_state, duap) / sizeof(int)
a119 9
# machine-dependent pointers fields
define	MD_TRAP		offsetof(struct md_p, trap_func)
define	MD_INT		offsetof(struct md_p, interrupt_func)
define	MD_FP		offsetof(struct md_p, fp_precise_func)
define	MD_SYSC		offsetof(struct md_p, syscall_func)
define	MD_IMASK	offsetof(struct md_p, intr_mask)
define	MD_ILEVEL	offsetof(struct md_p, intr_ipl)
define	MD_ISRC		offsetof(struct md_p, intr_src)

a141 1

@


1.2
log
@Make use of "export", "struct" and "member" keywords to be easier to read
and simpler.
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.1 2001/05/20 05:51:22 miod Exp $
d35 1
a35 1
#	$Id: genassym.cf,v 1.1 2001/05/20 05:51:22 miod Exp $
d110 5
d118 1
a118 1
define	EF_ISR		offsetof(struct m88100_saved_state, dsr) / sizeof(int)
d121 4
a124 1
define	EF_CPU		offsetof(struct m88100_saved_state, cpu) / sizeof(int)
d128 9
d159 1
@


1.1
log
@Replace genassym.c with a .cf one; also remove unused defines.
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.c,v 1.8 2001/04/10 01:12:39 miod Exp $
d35 1
a35 1
#	$Id: genassym.c,v 1.8 2001/04/10 01:12:39 miod Exp $
d52 6
a57 5
define	P_FORW			offsetof(struct proc, p_forw)
define	P_BACK			offsetof(struct proc, p_back)
define	P_ADDR			offsetof(struct proc, p_addr)
define	P_STAT			offsetof(struct proc, p_stat)
define	P_WCHAN			offsetof(struct proc, p_wchan)
d59 1
a59 1
define	SRUN			SRUN
d62 1
a62 1
define	UPAGES			UPAGES
d64 1
a64 1
define	NBPG			NBPG
d67 3
a69 2
define	PCB_ONFAULT		offsetof(struct pcb, pcb_onfault)
define	PCB_USER_STATE		offsetof(struct pcb, user_state)
d72 2
a73 2
define	SYS_exit		SYS_exit
define	SYS_sigreturn		SYS_sigreturn
d121 21
a141 20
define	PCB_PC		offsetof(struct m88100_pcb, pcb_pc)
define	PCB_IPL		offsetof(struct m88100_pcb, pcb_ipl)
define	PCB_R14		offsetof(struct m88100_pcb, pcb_r14)
define	PCB_R15		offsetof(struct m88100_pcb, pcb_r15)
define	PCB_R16		offsetof(struct m88100_pcb, pcb_r16)
define	PCB_R17		offsetof(struct m88100_pcb, pcb_r17)
define	PCB_R18		offsetof(struct m88100_pcb, pcb_r18)
define	PCB_R19		offsetof(struct m88100_pcb, pcb_r19)
define	PCB_R20		offsetof(struct m88100_pcb, pcb_r20)
define	PCB_R21		offsetof(struct m88100_pcb, pcb_r21)
define	PCB_R22		offsetof(struct m88100_pcb, pcb_r22)
define	PCB_R23		offsetof(struct m88100_pcb, pcb_r23)
define	PCB_R24		offsetof(struct m88100_pcb, pcb_r24)
define	PCB_R25		offsetof(struct m88100_pcb, pcb_r25)
define	PCB_R26		offsetof(struct m88100_pcb, pcb_r26)
define	PCB_R27		offsetof(struct m88100_pcb, pcb_r27)
define	PCB_R28		offsetof(struct m88100_pcb, pcb_r28)
define	PCB_R29		offsetof(struct m88100_pcb, pcb_r29)
define	PCB_R30		offsetof(struct m88100_pcb, pcb_r30)
define	PCB_SP		offsetof(struct m88100_pcb, pcb_sp)
@


1.1.2.1
log
@Sync the SMP branch to something just after 3.0
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.1 2001/05/20 05:51:22 miod Exp $
d35 1
a35 1
#	$Id: genassym.cf,v 1.1 2001/05/20 05:51:22 miod Exp $
d52 5
a56 6
struct	proc
member	p_forw
member	p_back
member	p_addr
member	p_stat
member	p_wchan
d58 1
a58 1
export	SRUN
d61 1
a61 1
export	UPAGES
d63 1
a63 1
export	NBPG
d66 2
a67 3
struct	pcb
member	pcb_onfault
member	PCB_USER_STATE		user_state
d70 2
a71 2
export	SYS_exit
export	SYS_sigreturn
d119 20
a138 21
struct	m88100_pcb
member	pcb_pc
member	pcb_ipl
member	pcb_r14
member	pcb_r15
member	pcb_r16
member	pcb_r17
member	pcb_r18
member	pcb_r19
member	pcb_r20
member	pcb_r21
member	pcb_r22
member	pcb_r23
member	pcb_r24
member	pcb_r25
member	pcb_r26
member	pcb_r27
member	pcb_r28
member	pcb_r29
member	pcb_r30
member	pcb_sp
@


1.1.2.2
log
@Merge in trunk
@
text
@d1 1
a1 1
#	$OpenBSD$
d35 1
a35 1
#	$Id$
a109 5
define	EF_CPU		offsetof(struct m88100_saved_state, cpu) / sizeof(int)

# m88110 m88100_saved_state element indexes
define	EF_EXIP		offsetof(struct m88100_saved_state, exip) / sizeof(int)
define	EF_ENIP		offsetof(struct m88100_saved_state, enip) / sizeof(int)
d113 1
a113 1
define	EF_ISR		offsetof(struct m88100_saved_state, isr) / sizeof(int)
d116 1
a116 4
define	EF_ISAP		offsetof(struct m88100_saved_state, isap) / sizeof(int)
define	EF_DSAP		offsetof(struct m88100_saved_state, dsap) / sizeof(int)
define	EF_IUAP		offsetof(struct m88100_saved_state, iuap) / sizeof(int)
define	EF_DUAP		offsetof(struct m88100_saved_state, duap) / sizeof(int)
a141 1

@


1.1.2.3
log
@Sync SMP branch to -current
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.1.2.2 2002/03/06 02:04:45 niklas Exp $
d14 5
a18 1
# 3. Neither the name of the University nor the names of its contributors
d35 1
a35 1
#	$Id: genassym.cf,v 1.1.2.2 2002/03/06 02:04:45 niklas Exp $
@


1.1.2.4
log
@Merge of current from two weeks agointo the SMP branch
@
text
@d1 1
a1 1
#	$OpenBSD$
d31 1
a31 1
#	$Id$
d60 1
d70 51
d122 1
a122 50
# trapframe element indexes
define	EF_R0		offsetof(struct trapframe, tf_r[0]) / sizeof(int)
define	EF_FPSR		offsetof(struct trapframe, tf_fpsr) / sizeof(int)
define	EF_FPCR		offsetof(struct trapframe, tf_fpcr) / sizeof(int)
define	EF_EPSR		offsetof(struct trapframe, tf_epsr) / sizeof(int)
define	EF_SXIP		offsetof(struct trapframe, tf_sxip) / sizeof(int)
define	EF_SFIP		offsetof(struct trapframe, tf_sfip) / sizeof(int)
define	EF_SNIP		offsetof(struct trapframe, tf_snip) / sizeof(int)
define	EF_SSBR		offsetof(struct trapframe, tf_ssbr) / sizeof(int)
define	EF_DMT0		offsetof(struct trapframe, tf_dmt0) / sizeof(int)
define	EF_DMD0		offsetof(struct trapframe, tf_dmd0) / sizeof(int)
define	EF_DMA0		offsetof(struct trapframe, tf_dma0) / sizeof(int)
define	EF_DMT1		offsetof(struct trapframe, tf_dmt1) / sizeof(int)
define	EF_DMD1		offsetof(struct trapframe, tf_dmd1) / sizeof(int)
define	EF_DMA1		offsetof(struct trapframe, tf_dma1) / sizeof(int)
define	EF_DMT2		offsetof(struct trapframe, tf_dmt2) / sizeof(int)
define	EF_DMD2		offsetof(struct trapframe, tf_dmd2) / sizeof(int)
define	EF_DMA2		offsetof(struct trapframe, tf_dma2) / sizeof(int)
define	EF_FPECR	offsetof(struct trapframe, tf_fpecr) / sizeof(int)
define	EF_FPHS1	offsetof(struct trapframe, tf_fphs1) / sizeof(int)
define	EF_FPLS1	offsetof(struct trapframe, tf_fpls1) / sizeof(int)
define	EF_FPHS2	offsetof(struct trapframe, tf_fphs2) / sizeof(int)
define	EF_FPLS2	offsetof(struct trapframe, tf_fpls2) / sizeof(int)
define	EF_FPPT		offsetof(struct trapframe, tf_fppt) / sizeof(int)
define	EF_FPRH		offsetof(struct trapframe, tf_fprh) / sizeof(int)
define	EF_FPRL		offsetof(struct trapframe, tf_fprl) / sizeof(int)
define	EF_FPIT		offsetof(struct trapframe, tf_fpit) / sizeof(int)
define	EF_VECTOR	offsetof(struct trapframe, tf_vector) / sizeof(int)
define	EF_MASK		offsetof(struct trapframe, tf_mask) / sizeof(int)
define	EF_MODE		offsetof(struct trapframe, tf_mode) / sizeof(int)
define	EF_RET		offsetof(struct trapframe, tf_scratch1) / sizeof(int)
define	EF_IPFSR	offsetof(struct trapframe, tf_ipfsr) / sizeof(int)
define	EF_DPFSR	offsetof(struct trapframe, tf_dpfsr) / sizeof(int)
define	EF_CPU		offsetof(struct trapframe, tf_cpu) / sizeof(int)

# m88110 trapframe element indexes
define	EF_EXIP		offsetof(struct trapframe, tf_exip) / sizeof(int)
define	EF_ENIP		offsetof(struct trapframe, tf_enip) / sizeof(int)
define	EF_DSR		offsetof(struct trapframe, tf_dsr) / sizeof(int)
define	EF_DLAR		offsetof(struct trapframe, tf_dlar) / sizeof(int)
define	EF_DPAR		offsetof(struct trapframe, tf_dpar) / sizeof(int)
define	EF_ISR		offsetof(struct trapframe, tf_isr) / sizeof(int)
define	EF_ILAR		offsetof(struct trapframe, tf_ilar) / sizeof(int)
define	EF_IPAR		offsetof(struct trapframe, tf_ipar) / sizeof(int)
define	EF_ISAP		offsetof(struct trapframe, tf_isap) / sizeof(int)
define	EF_DSAP		offsetof(struct trapframe, tf_dsap) / sizeof(int)
define	EF_IUAP		offsetof(struct trapframe, tf_iuap) / sizeof(int)
define	EF_DUAP		offsetof(struct trapframe, tf_duap) / sizeof(int)

define	SIZEOF_EF	sizeof(struct trapframe)
d146 1
a146 2
member	pcb_fcr62
member	pcb_fcr63
@


1.1.2.5
log
@Merge with the trunk
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.1.2.4 2004/02/19 10:49:07 niklas Exp $
d31 1
a31 1
#	$Id: genassym.cf,v 1.1.2.4 2004/02/19 10:49:07 niklas Exp $
@


