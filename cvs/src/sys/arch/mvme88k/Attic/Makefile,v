head	1.12;
access;
symbols
	OPENBSD_5_5:1.11.0.4
	OPENBSD_5_5_BASE:1.11
	OPENBSD_5_4:1.10.0.2
	OPENBSD_5_4_BASE:1.10
	OPENBSD_5_3:1.9.0.10
	OPENBSD_5_3_BASE:1.9
	OPENBSD_5_2:1.9.0.8
	OPENBSD_5_2_BASE:1.9
	OPENBSD_5_1_BASE:1.9
	OPENBSD_5_1:1.9.0.6
	OPENBSD_5_0:1.9.0.4
	OPENBSD_5_0_BASE:1.9
	OPENBSD_4_9:1.9.0.2
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.7.0.2
	OPENBSD_4_8_BASE:1.7
	OPENBSD_4_7:1.6.0.18
	OPENBSD_4_7_BASE:1.6
	OPENBSD_4_6:1.6.0.20
	OPENBSD_4_6_BASE:1.6
	OPENBSD_4_5:1.6.0.16
	OPENBSD_4_5_BASE:1.6
	OPENBSD_4_4:1.6.0.14
	OPENBSD_4_4_BASE:1.6
	OPENBSD_4_3:1.6.0.12
	OPENBSD_4_3_BASE:1.6
	OPENBSD_4_2:1.6.0.10
	OPENBSD_4_2_BASE:1.6
	OPENBSD_4_1:1.6.0.8
	OPENBSD_4_1_BASE:1.6
	OPENBSD_4_0:1.6.0.6
	OPENBSD_4_0_BASE:1.6
	OPENBSD_3_9:1.6.0.4
	OPENBSD_3_9_BASE:1.6
	OPENBSD_3_8:1.6.0.2
	OPENBSD_3_8_BASE:1.6
	OPENBSD_3_7:1.5.0.12
	OPENBSD_3_7_BASE:1.5
	OPENBSD_3_6:1.5.0.10
	OPENBSD_3_6_BASE:1.5
	SMP_SYNC_A:1.5
	SMP_SYNC_B:1.5
	OPENBSD_3_5:1.5.0.8
	OPENBSD_3_5_BASE:1.5
	OPENBSD_3_4:1.5.0.6
	OPENBSD_3_4_BASE:1.5
	UBC_SYNC_A:1.5
	OPENBSD_3_3:1.5.0.4
	OPENBSD_3_3_BASE:1.5
	OPENBSD_3_2:1.5.0.2
	OPENBSD_3_2_BASE:1.5
	OPENBSD_3_1:1.4.0.8
	OPENBSD_3_1_BASE:1.4
	UBC_SYNC_B:1.5
	UBC:1.4.0.6
	UBC_BASE:1.4
	OPENBSD_3_0:1.4.0.4
	OPENBSD_3_0_BASE:1.4
	OPENBSD_2_9:1.4.0.2
	OPENBSD_2_9_BASE:1.4
	OPENBSD_2_8:1.3.0.4
	OPENBSD_2_8_BASE:1.3
	OPENBSD_2_7:1.3.0.2
	OPENBSD_2_7_BASE:1.3
	SMP:1.2.0.8
	SMP_BASE:1.2
	kame_19991208:1.2
	OPENBSD_2_6:1.2.0.6
	OPENBSD_2_6_BASE:1.2
	OPENBSD_2_5:1.2.0.4
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.2.0.2
	OPENBSD_2_4_BASE:1.2
	OPENBSD_2_3:1.1.1.1.0.8
	OPENBSD_2_3_BASE:1.1.1.1
	OPENBSD_2_2:1.1.1.1.0.6
	OPENBSD_2_2_BASE:1.1.1.1
	OPENBSD_2_1:1.1.1.1.0.4
	OPENBSD_2_1_BASE:1.1.1.1
	mvme88kport:1.1.1.1
	OPENBSD_2_0:1.1.1.1.0.2
	OPENBSD_2_0_BASE:1.1.1.1
	first_1:1.1.1.1;
locks; strict;
comment	@# @;


1.12
date	2014.03.18.22.36.35;	author miod;	state dead;
branches;
next	1.11;

1.11
date	2013.12.08.14.46.39;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2013.03.26.19.43.01;	author jasper;	state Exp;
branches;
next	1.9;

1.9
date	2010.11.12.17.11.44;	author deraadt;	state Exp;
branches;
next	1.8;

1.8
date	2010.11.03.20.08.03;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	2010.05.31.22.21.44;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	2005.05.06.11.16.48;	author pedro;	state Exp;
branches;
next	1.5;

1.5
date	2002.07.15.21.29.16;	author mickey;	state Exp;
branches;
next	1.4;

1.4
date	2000.12.28.21.21.23;	author smurph;	state Exp;
branches
	1.4.6.1;
next	1.3;

1.3
date	2000.03.03.00.54.52;	author todd;	state Exp;
branches;
next	1.2;

1.2
date	98.09.15.04.01.21;	author smurph;	state Exp;
branches
	1.2.8.1;
next	1.1;

1.1
date	95.10.18.10.54.18;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.10.54.18;	author deraadt;	state Exp;
branches;
next	;

1.2.8.1
date	2000.03.24.09.08.12;	author niklas;	state Exp;
branches;
next	1.2.8.2;

1.2.8.2
date	2001.04.18.16.10.45;	author niklas;	state Exp;
branches;
next	1.2.8.3;

1.2.8.3
date	2003.03.27.23.32.17;	author niklas;	state Exp;
branches;
next	;

1.4.6.1
date	2002.10.29.00.28.07;	author art;	state Exp;
branches;
next	;


desc
@@


1.12
log
@Retire hp300, mvme68k and mvme88k ports. These ports have no users, keeping
this hardware alive is becoming increasingly difficult, and I should heed the
message sent by the three disks which have died on me over the last few days.

Noone sane will mourn these ports anyway. So long, and thanks for the fish.
@
text
@#	$OpenBSD: Makefile,v 1.11 2013/12/08 14:46:39 espie Exp $

S=	${.CURDIR}/../..
KFILE=	GENERIC
.if exists(conf/GENERIC.MP)
KFILE=	GENERIC.MP
.endif
TDIRS=	${_arch} include
TAGS=	${.CURDIR}/tags

NOPROG=
NOMAN=
NOOBJ=
SUBDIR=	stand

# config the fattest kernel we can find into a temporary dir
# to create a Makefile.  Then use make to pull some variables
# out and push them into the sub-shell to expand the paths,
# and finally run ctags.
tags::
	TDIR=`mktemp -d /tmp/_tagXXXXXXXXXX` || exit 1; \
	eval "S=${S}" && \
	config -s ${S} -b $${TDIR} ${.CURDIR}/conf/${KFILE} && \
	eval "_arch=\"`make -V _arch -f $${TDIR}/Makefile`\"" && \
	eval "_mach=\"`make -V _mach -f $${TDIR}/Makefile`\"" && \
	eval "_machdir=\$S/arch/$${_mach}" && \
	eval "_archdir=\$S/arch/$${_arch}" && \
	eval "HFILES=\"`find $S \( -path $S/'arch' -o -path $S/stand -o -path $S/lib/libsa -o -path $S'/lib/libkern/arch' \) -prune -o -name '*.h'; find $${_machdir} $${_archdir} $S/lib/libkern/arch/$${_mach} \( -name boot -o -name stand \) -prune -o -name '*.h'`\"" && \
	eval "SFILES=\"`make -V SFILES -f $${TDIR}/Makefile`\"" && \
	eval "CFILES=\"`make -V CFILES -f $${TDIR}/Makefile`\"" && \
	eval "AFILES=\"`make -V AFILES -f $${TDIR}/Makefile`\"" && \
	ctags -wd -f ${TAGS} $${CFILES} $${HFILES} && \
	egrep "^[_A-Z]*ENTRY[_A-Z]*\(.*\)" $${SFILES} $${AFILES} | \
	    sed "s;\\([^:]*\\):\\([^(]*\\)(\\([^, )]*\\)\\(.*\\);\\3	\\1	/^\\2(\\3\\4$$/;" \
	    >> ${TAGS} && \
	sort -o ${TAGS} ${TAGS} && \
	rm -rf $${TDIR}

links:
	-for i in conf ${TDIRS}; do \
	    (cd $$i && rm -f tags; ln -s tags tags); done

obj:	_SUBDIRUSE

.include <bsd.prog.mk>
@


1.11
log
@reflect reality, mark as NOOBJ
"sure" deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.10 2013/03/26 19:43:01 jasper Exp $
@


1.10
log
@sync TDIRS with reality

"looks good" deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.9 2010/11/12 17:11:44 deraadt Exp $
d13 1
@


1.9
log
@Push all potential (as in, all system MI not utilized by the bootblocks)
.h files into the ctags run as well to bring #define's and structs and
such into scope.  Problem reported by thib
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 2010/11/03 20:08:03 deraadt Exp $
d8 1
a8 1
TDIRS=	${_arch} include pci isa eisa
@


1.8
log
@no need to specify the -t flag to ctags
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 2010/05/31 22:21:44 deraadt Exp $
d27 1
d31 1
a31 1
	ctags -wd -f ${TAGS} $${CFILES} && \
@


1.7
log
@Completely rewrite the tags file creation process.  use config(8) against
a fat kernel (GERERIC or GENERIC.MP) into a temporary dir, then extract some
variables using make -V, and after some more singing and dancing use this
full and (more) correct list of files with ctags.  Don't read this code.
ok guenther
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.17 2007/10/22 01:26:31 deraadt Exp $
d30 1
a30 1
	ctags -wdt -f ${TAGS} $${CFILES} && \
@


1.6
log
@generate vim-compatible tag files, from netbsd
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.5 2002/07/15 21:29:16 mickey Exp $
d3 37
a39 31
# from: @@(#)Makefile	8.1 (Berkeley) 6/11/93
#
# Makefile for mvme88k links, tags file

S=${.CURDIR}/../..
.include "$S/kern/Make.tags.inc"

NOPROG=	noprog
NOMAN=	noman
NOOBJ=	noobj

TMVME88K=${.CURDIR}/tags
SUBDIR=	stand 
DIRS=	conf dev include mvme88k

links::
	-for i in ${DIRS}; do \
		echo $$i ; \
		cd ${.CURDIR} ; \
	    (cd $$i && { rm -f tags; ln -s ${TMVME88K} tags; }) done

SMVME88K=$S/arch/mvme88k/dev/*.[ch] $S/arch/mvme88k/include/*.[ch] \
	$S/arch/mvme88k/mvme88k/*.[ch]
AMVME88K=$S/arch/mvme88k/mvme88k/*.[sS]

tags:
	-ctags -wdtf ${TMVME88K} ${COMM} ${SMVME88K}
	egrep "^ENTRY(.*)|^ALTENTRY(.*)" ${AMVME88K} | \
	    sed "s;\([^:]*\):\([^(]*\)(\([^, )]*\)\(.*\);\3	\1	/^\2(\3\4$$/;" \
		>> ${TMVME88K}
	sort -o ${TMVME88K} ${TMVME88K}
@


1.5
log
@repair tags building (due to obj dirs in /sys)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 2000/12/28 21:21:23 smurph Exp $
d31 1
a31 1
	    sed "s;\([^:]*\):\([^(]*\)(\([^, )]*\)\(.*\);\3 \1 /^\2(\3\4$$/;" \
@


1.4
log
@mvme88k updates to -current.  finally!
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 1997/10/19 22:35:57 etheisen Exp $
d7 3
d14 1
a14 1
SYSTAGS= ${.CURDIR}/tags
d22 1
a22 1
	    (cd $$i && { rm -f tags; ln -s ${SYSTAGS} tags; }) done
d24 3
a26 3
MVME88K=/sys/arch/mvme88k/dev/*.[ch] /sys/arch/mvme88k/include/*.[ch] \
	/sys/arch/mvme88k/mvme88k/*.[ch]
AMVME88K=/sys/arch/mvme88k/mvme88k/*.s
d29 1
a29 1
	-ctags -wdt ${COMM} ${MVME88K}
d32 2
a33 2
		>> tags
	sort -o tags tags
a37 1
.include <bsd.subdir.mk>
@


1.4.6.1
log
@sync to -current
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 2000/12/28 21:21:23 smurph Exp $
a6 3
S=${.CURDIR}/../..
.include "$S/kern/Make.tags.inc"

d11 1
a11 1
TMVME88K=${.CURDIR}/tags
d19 1
a19 1
	    (cd $$i && { rm -f tags; ln -s ${TMVME88K} tags; }) done
d21 3
a23 3
SMVME88K=$S/arch/mvme88k/dev/*.[ch] $S/arch/mvme88k/include/*.[ch] \
	$S/arch/mvme88k/mvme88k/*.[ch]
AMVME88K=$S/arch/mvme88k/mvme88k/*.[sS]
d26 1
a26 1
	-ctags -wdtf ${TMVME88K} ${COMM} ${SMVME88K}
d29 2
a30 2
		>> ${TMVME88K}
	sort -o ${TMVME88K} ${TMVME88K}
d35 1
@


1.3
log
@$OpenBSD$
@
text
@d1 1
a1 2
#	$OpenBSD: Makefile,v 1.2 1998/09/15 04:01:21 smurph Exp $
#	from: @@(#)Makefile	7.3 (Berkeley) 6/9/91
d3 21
a23 28
SUBDIR= stand
DIRS= conf dev ddb mvme88k include

S=${BSDSRCDIR}/sys
COMM=	$S/vm/*.[ch] $S/ufs/*.[ch] $S/sys/*.h $S/compat/sunos/*.[ch] \
	$S/nfs/*.[ch] $S/netns/*.[ch] $S/netiso/*.[ch] \
	$S/netiso/xebec/*.[ch] $S/netinet/*.[ch] $S/netccitt/*.[ch] \
	$S/net/*.[ch] $S/miscfs/*/*.[ch] $S/kern/*.[ch] $S/dev/*.[ch] \
	$S/scsi/*.[ch] $S/lib/libkern/m88k/*.[ch] $S/lib/libkern/*.[ch]

# Makefile for m88k tags file

#all:
#	@@echo "make tags or links only"

TM88K=	$S/arch/mvme88k/tags
SM88K=	$S/arch/mvme88k/mvme88k/*.[ch] $S/arch/mvme88k/include/*.h \
	$S/arch/mvme88k/dev/*.[ch]
AM88K=	$S/arch/mvme88k/mvme88k/*.s

# Directories in which to place m88k tags links
DM88K=	mvme88k dev include

TAGS:
	-etags -dt ${COMM} ${SM88K} ${AM88K}
	egrep "^ENTRY(.*)|^ALTENTRY(.*)" ${AM88K} | \
	    sed "s;\([^:]*\):\([^(]*\)(\([^, )]*\)\(.*\);\3 \1 /^\2(\3\4$$/;" \
	    >> ${TM88K}/tags
d26 2
a27 2
	-ctags -dtf ${TM88K} ${COMM} ${SM88K}
	egrep "^ENTRY(.*)|^ALTENTRY(.*)" ${AM88K} | \
d29 2
a30 7
	    >> ${TM88K}
	sort -o ${TM88K} ${TM88K}

links:
	-for i in ${DM88K}; do \
	    rm -f $$i/tags; rm -f $$i/TAGS ; \
	    ln -s ../tags $$i/tags; ln -s ../TAGS $$i/TAGS; done
a35 1

@


1.2
log
@Stuff
@
text
@d1 1
a2 1
#	$Id: Makefile,v 1.1.1.1 1995/10/18 10:54:18 deraadt Exp $
@


1.2.8.1
log
@Sync with -current
@
text
@a0 1
#	$OpenBSD$
d2 1
@


1.2.8.2
log
@Update the SMP branch to -current, this breaks the SMP branch though.
But it will be fixed soonish.  Note, nothing new has happened, this is just
a merge of the trunk into this branch.
@
text
@d1 2
a2 1
#	$OpenBSD: Makefile,v 1.4 2000/12/28 21:21:23 smurph Exp $
d4 28
a31 21
# from: @@(#)Makefile	8.1 (Berkeley) 6/11/93
#
# Makefile for mvme88k links, tags file

NOPROG=	noprog
NOMAN=	noman
NOOBJ=	noobj

SYSTAGS= ${.CURDIR}/tags
SUBDIR=	stand 
DIRS=	conf dev include mvme88k

links::
	-for i in ${DIRS}; do \
		echo $$i ; \
		cd ${.CURDIR} ; \
	    (cd $$i && { rm -f tags; ln -s ${SYSTAGS} tags; }) done

MVME88K=/sys/arch/mvme88k/dev/*.[ch] /sys/arch/mvme88k/include/*.[ch] \
	/sys/arch/mvme88k/mvme88k/*.[ch]
AMVME88K=/sys/arch/mvme88k/mvme88k/*.s
d34 2
a35 2
	-ctags -wdt ${COMM} ${MVME88K}
	egrep "^ENTRY(.*)|^ALTENTRY(.*)" ${AMVME88K} | \
d37 7
a43 2
		>> tags
	sort -o tags tags
d49 1
@


1.2.8.3
log
@Sync the SMP branch with 3.3
@
text
@d1 1
a1 1
#	$OpenBSD$
a6 3
S=${.CURDIR}/../..
.include "$S/kern/Make.tags.inc"

d11 1
a11 1
TMVME88K=${.CURDIR}/tags
d19 1
a19 1
	    (cd $$i && { rm -f tags; ln -s ${TMVME88K} tags; }) done
d21 3
a23 3
SMVME88K=$S/arch/mvme88k/dev/*.[ch] $S/arch/mvme88k/include/*.[ch] \
	$S/arch/mvme88k/mvme88k/*.[ch]
AMVME88K=$S/arch/mvme88k/mvme88k/*.[sS]
d26 1
a26 1
	-ctags -wdtf ${TMVME88K} ${COMM} ${SMVME88K}
d29 2
a30 2
		>> ${TMVME88K}
	sort -o ${TMVME88K} ${TMVME88K}
d35 1
@


1.1
log
@Initial revision
@
text
@d2 5
a6 1
#	$Id: Makefile,v 1.1 1995/03/12 07:06:11 build Exp build $
d16 2
a17 2
all:
	@@echo "make tags or links only"
d19 4
a22 4
TM88K=	$S/arch/m88k/tags
SM88K=	$S/arch/m88k/m88k/*.[ch] $S/arch/m88k/include/*.h \
	$S/arch/m88k/dev/*.[ch]
AM88K=	$S/arch/m88k/m88k/*.s
d25 1
a25 1
DM88K=	m88k dev include
d45 2
d48 1
@


1.1.1.1
log
@initial 88k import; code by nivas and based on mach luna88k
@
text
@@
