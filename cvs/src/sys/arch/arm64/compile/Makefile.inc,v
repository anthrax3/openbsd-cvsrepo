head	1.3;
access;
symbols
	OPENBSD_6_2_BASE:1.3
	OPENBSD_6_1:1.3.0.4
	OPENBSD_6_1_BASE:1.3;
locks; strict;
comment	@# @;


1.3
date	2017.03.15.21.05.27;	author tb;	state Exp;
branches;
next	1.2;
commitid	JT76SX3He8w6WmvE;

1.2
date	2017.02.10.10.39.45;	author mpi;	state Exp;
branches;
next	1.1;
commitid	hRGxuNgAm83wZTYt;

1.1
date	2016.12.17.23.38.33;	author patrick;	state Exp;
branches;
next	;
commitid	uicSPzuCfsvjSNQ4;


desc
@@


1.3
log
@Fix building profiling kernels by passing the -p flag to config(8)
if the kernel's name ends in .PROF.

problem reported by jmc via mpi
ok mpi
@
text
@SYSDIR != cd ${.CURDIR}/../../../..; pwd
CONFDIR != cd ${.CURDIR}/../../conf; pwd

.if ${.CURDIR} == ${.OBJDIR}
.PHONY: config
config:
	@@echo make obj required first >&2
	@@false
.else
.PHONY: config clean
config:
	config ${.CURDIR:M*.PROF:C/.*/-p/} -b ${.OBJDIR} \
		-s ${SYSDIR} ${CONFDIR}/${.CURDIR:T:S/.PROF$//}
.endif

cleandir clean:

.include <bsd.obj.mk>

@


1.2
log
@Unbreak 'config -p'.

ok tb@@, jca@@
@
text
@d12 2
a13 1
	config -b ${.OBJDIR} -s ${SYSDIR} ${CONFDIR}/${.CURDIR:T:S/.PROF$//}
@


1.1
log
@Import of OpenBSD/arm64

This commit contains all the kernel files related to the OpenBSD/arm64
port.  It is based on the PowerPC pmap, loongson, arm/armv7 code and
FreeBSD aarch64 code.  Hard work done by Dale Rahn.
@
text
@d12 1
a12 1
	config -b ${.OBJDIR} -s ${SYSDIR} ${CONFDIR}/${.CURDIR:T}
@

