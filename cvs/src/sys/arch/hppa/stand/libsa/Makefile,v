head	1.20;
access;
symbols
	OPENBSD_6_2_BASE:1.20
	OPENBSD_6_1:1.20.0.8
	OPENBSD_6_1_BASE:1.20
	OPENBSD_6_0:1.20.0.4
	OPENBSD_6_0_BASE:1.20
	OPENBSD_5_9:1.20.0.2
	OPENBSD_5_9_BASE:1.20
	OPENBSD_5_8:1.19.0.8
	OPENBSD_5_8_BASE:1.19
	OPENBSD_5_7:1.19.0.2
	OPENBSD_5_7_BASE:1.19
	OPENBSD_5_6:1.19.0.4
	OPENBSD_5_6_BASE:1.19
	OPENBSD_5_5:1.16.0.8
	OPENBSD_5_5_BASE:1.16
	OPENBSD_5_4:1.16.0.4
	OPENBSD_5_4_BASE:1.16
	OPENBSD_5_3:1.16.0.2
	OPENBSD_5_3_BASE:1.16
	OPENBSD_5_2:1.14.0.20
	OPENBSD_5_2_BASE:1.14
	OPENBSD_5_1_BASE:1.14
	OPENBSD_5_1:1.14.0.18
	OPENBSD_5_0:1.14.0.16
	OPENBSD_5_0_BASE:1.14
	OPENBSD_4_9:1.14.0.14
	OPENBSD_4_9_BASE:1.14
	OPENBSD_4_8:1.14.0.12
	OPENBSD_4_8_BASE:1.14
	OPENBSD_4_7:1.14.0.8
	OPENBSD_4_7_BASE:1.14
	OPENBSD_4_6:1.14.0.10
	OPENBSD_4_6_BASE:1.14
	OPENBSD_4_5:1.14.0.6
	OPENBSD_4_5_BASE:1.14
	OPENBSD_4_4:1.14.0.4
	OPENBSD_4_4_BASE:1.14
	OPENBSD_4_3:1.14.0.2
	OPENBSD_4_3_BASE:1.14
	OPENBSD_4_2:1.13.0.18
	OPENBSD_4_2_BASE:1.13
	OPENBSD_4_1:1.13.0.16
	OPENBSD_4_1_BASE:1.13
	OPENBSD_4_0:1.13.0.14
	OPENBSD_4_0_BASE:1.13
	OPENBSD_3_9:1.13.0.12
	OPENBSD_3_9_BASE:1.13
	OPENBSD_3_8:1.13.0.10
	OPENBSD_3_8_BASE:1.13
	OPENBSD_3_7:1.13.0.8
	OPENBSD_3_7_BASE:1.13
	OPENBSD_3_6:1.13.0.6
	OPENBSD_3_6_BASE:1.13
	SMP_SYNC_A:1.13
	SMP_SYNC_B:1.13
	OPENBSD_3_5:1.13.0.4
	OPENBSD_3_5_BASE:1.13
	OPENBSD_3_4:1.13.0.2
	OPENBSD_3_4_BASE:1.13
	UBC_SYNC_A:1.12
	OPENBSD_3_3:1.11.0.2
	OPENBSD_3_3_BASE:1.11
	OPENBSD_3_2:1.9.0.4
	OPENBSD_3_2_BASE:1.9
	OPENBSD_3_1:1.9.0.2
	OPENBSD_3_1_BASE:1.9
	UBC_SYNC_B:1.10
	UBC:1.8.0.8
	UBC_BASE:1.8
	OPENBSD_3_0:1.8.0.6
	OPENBSD_3_0_BASE:1.8
	OPENBSD_2_9:1.8.0.4
	OPENBSD_2_9_BASE:1.8
	OPENBSD_2_8:1.8.0.2
	OPENBSD_2_8_BASE:1.8
	OPENBSD_2_7:1.7.0.4
	OPENBSD_2_7_BASE:1.7
	SMP:1.7.0.2
	SMP_BASE:1.7
	kame_19991208:1.6
	OPENBSD_2_6:1.6.0.2
	OPENBSD_2_6_BASE:1.6
	OPENBSD_2_5:1.5.0.4
	OPENBSD_2_5_BASE:1.5
	OPENBSD_2_4:1.5.0.2
	OPENBSD_2_4_BASE:1.5
	mickey-boot:1.1.1.1
	mickey:1.1.1;
locks; strict;
comment	@# @;


1.20
date	2015.11.16.19.33.52;	author miod;	state Exp;
branches;
next	1.19;
commitid	5gnqUR6VheSiU9SF;

1.19
date	2014.07.13.09.26.08;	author jasper;	state Exp;
branches;
next	1.18;
commitid	Cnjup0HpCIRrcQ6o;

1.18
date	2014.07.12.23.34.54;	author jasper;	state Exp;
branches;
next	1.17;
commitid	r9k2SIaE5isJATNY;

1.17
date	2014.07.12.21.54.58;	author jasper;	state Exp;
branches;
next	1.16;
commitid	3HeD4LaLGiS22I3y;

1.16
date	2012.08.31.16.13.20;	author pascal;	state Exp;
branches;
next	1.15;

1.15
date	2012.08.21.14.46.18;	author pascal;	state Exp;
branches;
next	1.14;

1.14
date	2007.12.26.18.52.59;	author kettenis;	state Exp;
branches;
next	1.13;

1.13
date	2003.06.08.14.25.05;	author miod;	state Exp;
branches;
next	1.12;

1.12
date	2003.04.16.07.20.50;	author mickey;	state Exp;
branches;
next	1.11;

1.11
date	2002.12.20.02.44.26;	author mickey;	state Exp;
branches;
next	1.10;

1.10
date	2002.10.24.19.27.16;	author mickey;	state Exp;
branches;
next	1.9;

1.9
date	2002.03.02.09.36.43;	author miod;	state Exp;
branches;
next	1.8;

1.8
date	2000.10.11.20.54.20;	author mickey;	state Exp;
branches
	1.8.8.1;
next	1.7;

1.7
date	99.12.23.04.10.30;	author mickey;	state Exp;
branches
	1.7.2.1;
next	1.6;

1.6
date	99.04.20.19.57.27;	author mickey;	state Exp;
branches;
next	1.5;

1.5
date	98.09.29.07.19.25;	author mickey;	state Exp;
branches;
next	1.4;

1.4
date	98.07.14.17.20.30;	author mickey;	state Exp;
branches;
next	1.3;

1.3
date	98.07.13.03.52.10;	author mickey;	state Exp;
branches;
next	1.2;

1.2
date	98.07.13.03.35.57;	author mickey;	state Exp;
branches;
next	1.1;

1.1
date	98.06.23.18.46.42;	author mickey;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.06.23.18.46.42;	author mickey;	state Exp;
branches;
next	;

1.7.2.1
date	2001.04.18.16.06.56;	author niklas;	state Exp;
branches;
next	1.7.2.2;

1.7.2.2
date	2002.03.06.00.57.23;	author niklas;	state Exp;
branches;
next	1.7.2.3;

1.7.2.3
date	2003.03.27.23.26.54;	author niklas;	state Exp;
branches;
next	1.7.2.4;

1.7.2.4
date	2003.05.13.19.41.04;	author ho;	state Exp;
branches;
next	1.7.2.5;

1.7.2.5
date	2004.02.19.10.48.41;	author niklas;	state Exp;
branches;
next	;

1.8.8.1
date	2002.06.11.03.35.38;	author art;	state Exp;
branches;
next	1.8.8.2;

1.8.8.2
date	2002.10.29.00.28.03;	author art;	state Exp;
branches;
next	1.8.8.3;

1.8.8.3
date	2003.05.19.21.43.13;	author tedu;	state Exp;
branches;
next	;


desc
@@


1.20
log
@Replace unbounded gets() in libsa with getln() which takes a buffer size,
and convert all gets() users.
ok deraadt@@
@
text
@#	$OpenBSD: Makefile,v 1.19 2014/07/13 09:26:08 jasper Exp $

.include "${.CURDIR}/../Makefile.inc"

LIB=	sa

S=${.CURDIR}/../../../..
SADIR=${.CURDIR}/..
DIR_SA=	$S/lib/libsa

NOPROFILE=noprofile
NOPIC=nopic

#AS=cat ;
#AS+=	-R
#AS+=	-a

# hppa stuff
SRCS=	machdep.c pdc.c itecons.c dev_hppa.c time.c \
	ct.c dk.c lf.c lif.c cmd_hppa.c loadfile.c elf32.c elf64.c

# stand routines
SRCS+=	alloc.c exit.c getfile.c getln.c getchar.c globals.c \
	printf.c putchar.c strerror.c strtol.c strchr.c ctime.c snprintf.c

# io routines
SRCS+=	close.c closeall.c dev.c disklabel.c dkcksum.c fstat.c ioctl.c lseek.c \
	open.c read.c stat.c write.c cread.c readdir.c cons.c

# boot filesystems
SRCS+=	ufs.c cd9660.c

.PATH:  ${DIR_SA}

all: ${SALIB}

install:

.include <bsd.lib.mk>

CPPFLAGS+=-DHEAP_LIMIT=${HEAP_LIMIT} ${DEBUGFLAGS} -DNO_NET
CPPFLAGS+=-I${S}/stand/boot
CFLAGS+=${SACFLAGS} -D__INTERNAL_LIBSA_CREAD -DCOMPAT_UFS -fno-pie
CFLAGS+=-DCONSPEED=9600
@


1.19
log
@move putchar() into libsa

"sure" miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.18 2014/07/12 23:34:54 jasper Exp $
d23 1
a23 1
SRCS+=	alloc.c exit.c getfile.c gets.c getchar.c globals.c \
@


1.18
log
@unify cnspeed()
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.17 2014/07/12 21:54:58 jasper Exp $
d24 1
a24 1
	printf.c strerror.c strtol.c strchr.c ctime.c snprintf.c
@


1.17
log
@move getchar() into libsa where applicable

ok miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.16 2012/08/31 16:13:20 pascal Exp $
d44 1
@


1.16
log
@Kill NOPIE and NOPIE_FLAGS in hppa/stand.

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.15 2012/08/21 14:46:18 pascal Exp $
d23 1
a23 1
SRCS+=	alloc.c exit.c getfile.c gets.c globals.c \
@


1.15
log
@Add NOPIE= bits for sys/arch/*/stand to ensure that bootblocks will always be
built with -fno-pie.  This gets the hairiest part of PIE out of the way ...

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.14 2007/12/26 18:52:59 kettenis Exp $
a12 1
NOPIE=
d43 1
a43 1
CFLAGS+=${SACFLAGS} -D__INTERNAL_LIBSA_CREAD -DCOMPAT_UFS
@


1.14
log
@Teach the hppa bootloader how to boot 64-bit kernels.

ok miod@@, deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.13 2003/06/08 14:25:05 miod Exp $
d13 1
@


1.13
log
@snprintf needed here.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.12 2003/04/16 07:20:50 mickey Exp $
d20 1
a20 1
	ct.c dk.c lf.c lif.c cmd_hppa.c
d24 1
a24 1
	printf.c strerror.c strtol.c strchr.c ctime.c loadfile.c snprintf.c
@


1.12
log
@clean some spaces and registers and other fluff
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.11 2002/12/20 02:44:26 mickey Exp $
d24 1
a24 1
	printf.c strerror.c strtol.c strchr.c ctime.c loadfile.c
@


1.11
log
@do not compile what we already get from libkern (size does not matter)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.10 2002/10/24 19:27:16 mickey Exp $
d14 1
a14 1
#AS=cat ; 
@


1.10
log
@use loadfile
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.9 2002/03/02 09:36:43 miod Exp $
d23 2
a24 3
SRCS+=	alloc.c exit.c getfile.c gets.c globals.c strcmp.c strlen.c \
	strncmp.c memcmp.c memcpy.c printf.c strerror.c strncpy.c \
	strtol.c strchr.c ctime.c loadfile.c
@


1.9
log
@Add machine specific commands to the bootblocks, to let the user display
and change the console and keyboard settings; and devise a manual page for
it, with lots of loot borrowed from the i386 version.

These commands have been extensively tested on 712, 715, and 720, although
your mileage may vary and scary warnings may appear in the manual page in
the future.

ok mickey@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 2000/10/11 20:54:20 mickey Exp $
d19 1
a19 1
SRCS=	machdep.c pdc.c itecons.c dev_hppa.c exec_hppa.c time.c \
d25 1
a25 1
	strtol.c strchr.c ctime.c exec.new.c exec_elf.c exec_som.c
@


1.8
log
@memset.c is in libkern
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 1999/12/23 04:10:30 mickey Exp $
d20 1
a20 1
	ct.c dk.c lf.c lif.c
@


1.8.8.1
log
@Sync UBC branch to -current
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 2000/10/11 20:54:20 mickey Exp $
d20 1
a20 1
	ct.c dk.c lf.c lif.c cmd_hppa.c
@


1.8.8.2
log
@sync to -current
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8.8.1 2002/06/11 03:35:38 art Exp $
d19 1
a19 1
SRCS=	machdep.c pdc.c itecons.c dev_hppa.c time.c \
d25 1
a25 1
	strtol.c strchr.c ctime.c loadfile.c
@


1.8.8.3
log
@sync
@
text
@d1 1
a1 1
#	$OpenBSD$
d14 1
a14 1
#AS=cat ;
d23 3
a25 2
SRCS+=	alloc.c exit.c getfile.c gets.c globals.c \
	printf.c strerror.c strtol.c strchr.c ctime.c loadfile.c
@


1.7
log
@some support for hp som executables
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.6 1999/04/20 19:57:27 mickey Exp $
d24 1
a24 1
	strncmp.c memcmp.c memcpy.c memset.c printf.c strerror.c strncpy.c \
@


1.7.2.1
log
@Update the SMP branch to -current, this breaks the SMP branch though.
But it will be fixed soonish.  Note, nothing new has happened, this is just
a merge of the trunk into this branch.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 2000/10/11 20:54:20 mickey Exp $
d24 1
a24 1
	strncmp.c memcmp.c memcpy.c printf.c strerror.c strncpy.c \
@


1.7.2.2
log
@Merge in trunk
@
text
@d1 1
a1 1
#	$OpenBSD$
d20 1
a20 1
	ct.c dk.c lf.c lif.c cmd_hppa.c
@


1.7.2.3
log
@Sync the SMP branch with 3.3
@
text
@d19 1
a19 1
SRCS=	machdep.c pdc.c itecons.c dev_hppa.c time.c \
d23 3
a25 2
SRCS+=	alloc.c exit.c getfile.c gets.c globals.c \
	printf.c strerror.c strtol.c strchr.c ctime.c loadfile.c
@


1.7.2.4
log
@Sync the SMP branch to -current.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7.2.3 2003/03/27 23:26:54 niklas Exp $
d14 1
a14 1
#AS=cat ;
@


1.7.2.5
log
@Merge of current from two weeks agointo the SMP branch
@
text
@d1 1
a1 1
#	$OpenBSD$
d24 1
a24 1
	printf.c strerror.c strtol.c strchr.c ctime.c loadfile.c snprintf.c
@


1.6
log
@no need for any networking code
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.5 1998/09/29 07:19:25 mickey Exp $
d25 1
a25 1
	strtol.c strchr.c ctime.c exec.new.c exec_elf.c
@


1.5
log
@more used, less unused
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 1998/07/14 17:20:30 mickey Exp $
a30 6
# network routines
SRCS+=	arp.c ether.c in_cksum.c net.c netif.c rpc.c

# network info services
SRCS+=	bootp.c bootparam.c rarp.c

d32 1
a32 1
SRCS+=	ufs.c nfs.c cd9660.c
d42 1
a42 1
CPPFLAGS+=-DHEAP_LIMIT=${HEAP_LIMIT} ${DEBUGFLAGS}
@


1.4
log
@add som support
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.3 1998/07/13 03:52:10 mickey Exp $
d19 2
a20 2
SRCS=	alloca.S machdep.c pdc.c itecons.c dk.c dev_hppa.c exec_hppa.c time.c \
	ct.c dk.c cache_s.s cache_c.c
d25 1
a25 1
	strtol.c ctime.c exec.new.c exec_elf.c exec_som.c
d50 1
a50 1
CFLAGS+=${SACFLAGS} -D__INTERNAL_LIBSA_CREAD
@


1.3
log
@since i blew up prev commit msg, here it is:
upgrade to new coming stand/exec framework
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.2 1998/07/13 03:35:57 mickey Exp $
d25 1
a25 1
	strtol.c ctime.c exec.new.c exec_elf.c
@


1.2
log
@libsa/itecons.c
@
text
@d1 1
a1 2
#	$OpenBSD: Makefile,v 1.1.1.1 1998/06/23 18:46:42 mickey Exp $
#	$NOWHERE: Makefile,v 2.1 1998/06/22 19:34:45 mickey Exp $
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
#	$OpenBSD$
d20 1
a20 1
SRCS=	machdep.c pdc.c itecons.c dk.c dev_hppa.c exec_hppa.c time.c \
d24 1
a24 1
SRCS+=	alloc.c exit.c exec.c getfile.c gets.c globals.c strcmp.c strlen.c \
d26 1
a26 1
	strtol.c ctime.c
@


1.1.1.1
log
@ok, it boots, include and libkern to come
@
text
@@
