head	1.16;
access;
symbols
	OPENBSD_5_3:1.15.0.2
	OPENBSD_5_3_BASE:1.15
	OPENBSD_5_2:1.14.0.4
	OPENBSD_5_2_BASE:1.14
	OPENBSD_5_1_BASE:1.14
	OPENBSD_5_1:1.14.0.2
	OPENBSD_5_0:1.13.0.2
	OPENBSD_5_0_BASE:1.13
	OPENBSD_4_9:1.11.0.2
	OPENBSD_4_9_BASE:1.11
	OPENBSD_4_8:1.8.0.2
	OPENBSD_4_8_BASE:1.8
	OPENBSD_4_7:1.5.0.2
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.4.0.6
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.2
	OPENBSD_4_5_BASE:1.4;
locks; strict;
comment	@# @;


1.16
date	2013.03.25.17.32.08;	author deraadt;	state dead;
branches;
next	1.15;

1.15
date	2012.09.27.14.01.35;	author jsg;	state Exp;
branches;
next	1.14;

1.14
date	2011.09.20.22.11.42;	author miod;	state Exp;
branches;
next	1.13;

1.13
date	2011.06.29.20.52.09;	author matthew;	state Exp;
branches;
next	1.12;

1.12
date	2011.05.24.20.27.11;	author matthew;	state Exp;
branches;
next	1.11;

1.11
date	2011.02.17.20.14.30;	author miod;	state Exp;
branches;
next	1.10;

1.10
date	2010.11.26.20.13.55;	author miod;	state Exp;
branches;
next	1.9;

1.9
date	2010.09.23.16.21.46;	author yuo;	state Exp;
branches;
next	1.8;

1.8
date	2010.08.02.14.13.23;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	2010.07.03.03.59.16;	author krw;	state Exp;
branches;
next	1.6;

1.6
date	2010.04.26.20.51.51;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	2010.03.03.20.57.28;	author mk;	state Exp;
branches;
next	1.4;

1.4
date	2009.02.10.18.35.44;	author damien;	state Exp;
branches;
next	1.3;

1.3
date	2008.12.01.23.48.46;	author todd;	state Exp;
branches;
next	1.2;

1.2
date	2008.11.26.21.59.12;	author matthieu;	state Exp;
branches;
next	1.1;

1.1
date	2008.11.26.14.18.11;	author drahn;	state Exp;
branches;
next	;


desc
@@


1.16
log
@gumstix was never finished
@
text
@#	$OpenBSD: GENERIC,v 1.15 2012/09/27 14:01:35 jsg Exp $
#
# For further information on compiling OpenBSD kernels, see the config(8)
# man page.
#
# For further information on hardware support for this architecture, see
# the intro(4) man page.  For further information about kernel options
# for this architecture, see the options(4) man page.  For an explanation
# of each device driver in this file see the section 4 man page for the
# device.

machine		gumstix arm
include		"../../../conf/GENERIC"
maxusers	32			# estimated number of users

options		ARM32
options		PXAGPIO_HAS_GPION_INTRS

makeoptions	KERNEL_BASE_PHYS="0xa0200000"
makeoptions	KERNEL_BASE_VIRT="0xc0200000"

# CPU options
options		CPU_XSCALE_PXA2X0	# Support the XScale core
#options	XSCALE_CACHE_WRITE_THROUGH
options		XSCALE_CACHE_WRITE_BACK
makeoptions	CPUFLAGS="-mcpu=xscale"

option	WSDISPLAY_COMPAT_USL		# VT handling
option	WSDISPLAY_COMPAT_RAWKBD		# provide raw scancodes; needed for X11
option	WSDISPLAY_DEFAULTSCREENS=2	# initial number of text consoles
option	WSDISPLAY_COMPAT_PCVT		# emulate some ioctls; needed for X11

option USBVERBOSE

config		bsd	swap generic
#config		bsd	root on wd0a

# The main bus device
mainbus0	at root
cpu0		at mainbus?
pxaip0		at mainbus?

pxaintc0	at pxaip?		# interrupt controller
pxagpio0	at pxaip?		# GPIO controller
pxadmac0	at pxaip?		# DMA controller
pxaost0		at pxaip? addr 0x40a00000 size 0x20

# PCMCIA/CF socket and GPIO controllers
#scoop0		at pxaip?
#scoop1		at pxaip?

# touch screen
#zts0		at pxaip?
#wsmouse*	at zts? mux 0

# keyboard
#zkbd0		at pxaip?
#wskbd*		at zkbd? mux 1

# USB controllers
pxaudc0		at pxaip?		# USB Device Controller
ohci0		at pxaip?		# Open Host Controller

# USB function support
usbf*		at pxaudc?		# USB logical device
cdcef*		at usbf?		# CDC ethernet function

# USB bus support
usb*		at ohci?
uhub*		at usb?			# USB Root Hub
uhub*		at uhub?		# USB Hub

# USB devices
umodem*		at uhub?		# USB Modems/Serial
ucom*		at umodem?
uvisor*		at uhub?		# Handspring Visor
ucom*		at uvisor?
uvscom*		at uhub?		# SUNTAC Slipper U VS-10U serial
ucom*		at uvscom?
ubsa*		at uhub?		# Belkin serial adapter
ucom*		at ubsa?
uftdi*		at uhub?		# FTDI FT8U100AX serial adapter
ucom*		at uftdi?
uplcom*		at uhub?		# I/O DATA USB-RSAQ2 serial adapter
ucom*		at uplcom?
umct*		at uhub?		# MCT USB-RS232 serial adapter
ucom*		at umct?
uslcom*		at uhub?		# Silicon Laboratories CP210x serial
ucom*		at uslcom?
uark*		at uhub?		# Arkmicro ARK3116 serial
ucom*		at uark?
uipaq*		at uhub?		# iPAQ serial adapter
ucom*		at uipaq?
uchcom*		at uhub?		# WinChipHead CH341/340 serial
ucom*		at uchcom?
uaudio*		at uhub?		# USB Audio
audio*		at uaudio?
umidi*		at uhub?		# USB MIDI
midi*		at umidi?
ulpt*		at uhub?		# USB Printers
umass*		at uhub?		# USB Mass Storage devices
uhidev*		at uhub?		# Human Interface Devices
ums*		at uhidev?		# USB mouse
wsmouse*	at ums? mux 0
ukbd*		at uhidev?		# USB keyboard
wskbd*		at ukbd? mux 1
ucycom*		at uhidev?		# Cypress serial
ucom*		at ucycom?
uhid*		at uhidev?		# USB generic HID support
aue*		at uhub?		# ADMtek AN986 Pegasus Ethernet
atu*		at uhub?		# Atmel AT76C50x based 802.11b
axe*		at uhub?		# ASIX Electronics AX88172 USB Ethernet
cue*		at uhub?		# CATC USB-EL1201A based Ethernet
kue*		at uhub?		# Kawasaki KL5KUSB101B based Ethernet
smsc*		at uhub?		# SMSC LAN95xx Ethernet
cdce*		at uhub?		# CDC Ethernet
urndis*		at uhub?		# Remote NDIS Ethernet
upl*		at uhub?		# Prolific PL2301/PL2302 host-to-host
udav*		at uhub?		# Davicom DM9601 based Ethernet
ural*		at uhub?		# Ralink RT2500USB
rum*		at uhub?		# Ralink RT2501USB/RT2601USB
run*		at uhub?		# Ralink RT2700U/RT2800U/RT3000U
url*		at uhub?		# Realtek RTL8150L based adapters
wi*		at uhub?		# WaveLAN IEEE 802.11DS
urio*		at uhub?		# Diamond Multimedia Rio 500
uscanner*	at uhub? disable	# USB Scanners
#uyap*		at uhub?		# Y@@P firmware loader
udsbr*		at uhub?		# D-Link DSB-R100 radio
radio*		at udsbr?		# USB radio
ugen*		at uhub?		# USB Generic driver
udcf*		at uhub?		# Gude Expert mouseCLOCK
umbg*		at uhub?		# Meinberg Funkuhren USB5131
uow*		at uhub?		# Maxim/Dallas DS2490 1-Wire adapter
onewire* at uow?
utwitch*	at uhidev?		# YUREX BBU sensor

scsibus*	at scsi?
sd*		at scsibus?		# SCSI disk drives
#st*		at scsibus?		# SCSI tape drives
cd*		at scsibus?		# SCSI CD-ROM drives
#ch*		at scsibus?		# SCSI autochangers
#uk*		at scsibus?		# unknown SCSI

# integrated 16550 UARTs
options COM_PXA2X0
com0	at pxaip? addr 0x40100000 intr 22	# Full Function UART
com1	at pxaip? addr 0x40200000 intr 21	# BlueTooth UART
com2	at pxaip? addr 0x40700000 intr 20	# Standard UART (for IrDA)

# integrated PCMCIA/CF controller
# pxapcic0	at pxaip?

# PCMCIA bus support
#pcmcia*		at pxapcic?

# PCMCIA (CF) devices
#com*		at pcmcia?		# PCMCIA modems/serial ports
#wi*		at pcmcia?		# WaveLAN IEEE 802.11DS
#malo*		at pcmcia?		# Marvell 88W8385
#ne*		at pcmcia?		# PCMCIA based NE2000 ethernet
#wdc*		at pcmcia?		# hard disk controller
#cfxga*		at pcmcia?		# VoyagerVGA frame buffer
#wsdisplay*	at cfxga?

# IDE hard drives
#wd*		at wdc? flags 0x0000

# Media Independent Interface (mii) drivers
exphy*	at mii?				# 3Com internal PHYs
inphy*	at mii?				# Intel 82555 PHYs
iophy*	at mii?				# Intel 82553 PHYs
icsphy*	at mii?				# ICS 1890 PHYs
lxtphy*	at mii?				# Level1 LXT970 PHYs
nsphy*	at mii?				# NS and compatible PHYs
nsphyter* at mii?			# NS and compatible PHYs
qsphy*	at mii?				# Quality Semi QS6612 PHYs
sqphy*	at mii?				# Seeq 8x220 PHYs
rlphy* at mii?				# RealTek 8139 internal PHYs
mtdphy* at mii?				# Myson MTD972 PHYs
#dcphy*	at mii?				# Digital Clone PHYs
acphy*	at mii?				# Altima AC101 PHYs
amphy*	at mii?				# AMD 79C873 PHYs
tqphy*	at mii?				# TDK 78Q212x PHYs
bmtphy*	at mii?				# Broadcom 10/100 PHYs
#brgphy* at mii?			# Broadcom Gigabit PHYs
eephy* at mii?				# Marvell 88E1000 series PHY
#xmphy*	at mii?				# XaQti XMAC-II PHYs
nsgphy*	at mii?				# NS gigabit PHYs
urlphy*	at mii?				# Realtek RTL8150L internal PHY
#rgephy* at mii?			# Realtek 8169S/8110S PHY
#ciphy* at mii?				# Cicada CS8201 10/100/1000 copper PHY
ukphy*	at mii?				# "unknown" PHYs

#lcd0		at pxaip?		# LCD
#wsdisplay*	at lcd? console ?
#zssp0		at pxaip?		# ADC, touch screen, backlight
#apm0		at pxaip?		# APM emulation

#zaudio0		at pxaip?		# Zaurus I2S/I2C sound
#audio*		at zaudio?
#zrc0		at pxaip?		# Zaurus remote control
#wskbd*		at zrc? mux 1
#flash0		at pxaip?		# NAND flash memory

#pxammc0		at pxaip?		# MMC/SD/SDIO controller
#sdmmc*		at pxammc?		# SD/MMC bus

# Bluetooth controllers
#sbt*	at sdmmc? disable		# SDIO Bluetooth
#bthub*	at sbt?
#ubt*	at uhub? disable		# USB Bluetooth
#bthub*	at ubt?

#bthidev* at bthub?			# Bluetooth HID support
#btkbd*	at bthidev?
#btms*	at bthidev?
#wskbd*	at btkbd? mux 1
#wsmouse* at btms? mux 0

# 1-Wire devices
option ONEWIREVERBOSE
owid*	at onewire?			# ID
owsbm*	at onewire?			# Smart Battery Monitor
owtemp* at onewire?			# Temperature
owctr*	at onewire?			# Counter device

# Pseudo-Devices
pseudo-device	wsmux		2	# mouse & keyboard multiplexor
pseudo-device	hotplug		1	# devices hot plugging
@


1.15
log
@enable smsc
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.14 2011/09/20 22:11:42 miod Exp $
@


1.14
log
@Remove !defined(CACHE_CLEAN_BLOCK_INTR) code, and make CACHE_CLEAN_BLOCK_INTR
no longer an option.
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.13 2011/06/29 20:52:09 matthew Exp $
d115 1
@


1.13
log
@Replace all instances of "scsibus* at hba?" with a single "scsibus* at
scsi?" rule, similar to how ethernet PHY drivers attach at mii.

Discussed on icb.
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.12 2011/05/24 20:27:11 matthew Exp $
a17 2

options		CACHE_CLEAN_BLOCK_INTR
@


1.12
log
@On OpenBSD, we've always attached scsibus(4) to umass(4), even for
ATAPI devices.  atapiscsi(4) is only for handling ATAPI devices on an
ATA bus, so umass(4) shouldn't care about it.

ok krw@@, dlg@@; no objections from deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.11 2011/02/17 20:14:30 miod Exp $
a103 1
scsibus*	at umass?
d138 1
a207 1
#scsibus*	at sdmmc?		# SCSI emulation
@


1.11
log
@Disable sbt and ubt devices. The bluetooth code will sometimes sleep while
holding locks, this is not allowed, and nobody has stepped up to fix this,
so better not lure people into using bluetooth devices.
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.10 2010/11/26 20:13:55 miod Exp $
a104 1
#atapiscsi*	at umass?
@


1.10
log
@Disable uscanner(4) by default on all kernels which configure it. First step
until possible removal, if indeed this causes no regression for scanner users.
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.9 2010/09/23 16:21:46 yuo Exp $
d212 1
a212 1
#sbt*	at sdmmc?			# SDIO Bluetooth
d214 1
a214 1
#ubt*	at uhub?			# USB Bluetooth
@


1.9
log
@enable utwitch(4) (formely uyurex(4)) by default

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.8 2010/08/02 14:13:23 deraadt Exp $
d129 1
a129 1
uscanner*	at uhub?		# USB Scanners
@


1.8
log
@enable owctr
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.7 2010/07/03 03:59:16 krw Exp $
d138 1
@


1.7
log
@No more ss(4) or usscanner(4). Unused, unloved and unmaintained.
General huzzahs.

"go for it" deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.6 2010/04/26 20:51:51 deraadt Exp $
d227 1
@


1.6
log
@BOARDTYPE is no longer used by Makefile.*; spotted by miod
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.5 2010/03/03 20:57:28 mk Exp $
a129 2
usscanner*	at uhub?		# USB SCSI scanners, e.g., HP5300
scsibus*	at usscanner?
a142 1
#ss*		at scsibus?		# SCSI scanners
@


1.5
log
@Enable urndis(4) everywhere that has USB enabled to get it tested.

Much prodding from deraadt.
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.4 2009/02/10 18:35:44 damien Exp $
a22 1
makeoptions	BOARDTYPE="gumstix"
@


1.4
log
@enable run(4) everywhere where ural(4) and rum(4) are enabled.
run(4) has been reported to work on sparc64 by Maxim Belooussov so I'm
pretty confident that it works on all arches.
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.3 2008/12/01 23:48:46 todd Exp $
d121 1
@


1.3
log
@terse is good, more readable; please commit deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.2 2008/11/26 21:59:12 matthieu Exp $
d125 1
@


1.2
log
@Disable some devices for now to make GENERIC build. ok drahn@@.
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.1 2008/11/26 14:18:11 drahn Exp $
d214 1
a215 3

# Bluetooth bus support
#bthub*	at sbt?
d218 1
a218 2
# Bluetooth HID support
#bthidev* at bthub?
@


1.1
log
@Initial port of OpenBSD to the (xscale based) gumstix, work in progress.
Most bits cloned from zaurus.
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.68 2008/02/24 21:49:37 uwe Exp $
d52 2
a53 2
scoop0		at pxaip?
scoop1		at pxaip?
d56 2
a57 2
zts0		at pxaip?
wsmouse*	at zts? mux 0
d60 2
a61 2
zkbd0		at pxaip?
wskbd*		at zkbd? mux 1
d106 1
a106 1
atapiscsi*	at umass?
d154 1
a154 1
pxapcic0	at pxaip?
d157 1
a157 1
pcmcia*		at pxapcic?
d160 5
a164 5
com*		at pcmcia?		# PCMCIA modems/serial ports
wi*		at pcmcia?		# WaveLAN IEEE 802.11DS
malo*		at pcmcia?		# Marvell 88W8385
ne*		at pcmcia?		# PCMCIA based NE2000 ethernet
wdc*		at pcmcia?		# hard disk controller
d169 1
a169 1
wd*		at wdc? flags 0x0000
d197 14
a210 14
lcd0		at pxaip?		# LCD
wsdisplay*	at lcd? console ?
zssp0		at pxaip?		# ADC, touch screen, backlight
apm0		at pxaip?		# APM emulation

zaudio0		at pxaip?		# Zaurus I2S/I2C sound
audio*		at zaudio?
zrc0		at pxaip?		# Zaurus remote control
wskbd*		at zrc? mux 1
flash0		at pxaip?		# NAND flash memory

pxammc0		at pxaip?		# MMC/SD/SDIO controller
sdmmc*		at pxammc?		# SD/MMC bus
scsibus*	at sdmmc?		# SCSI emulation
@

