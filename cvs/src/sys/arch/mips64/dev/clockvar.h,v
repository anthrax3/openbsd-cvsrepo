head	1.5;
access;
symbols
	OPENBSD_6_1:1.5.0.38
	OPENBSD_6_1_BASE:1.5
	OPENBSD_6_0:1.5.0.34
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.30
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.5.0.32
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.5.0.24
	OPENBSD_5_7_BASE:1.5
	OPENBSD_5_6:1.5.0.28
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_5:1.5.0.26
	OPENBSD_5_5_BASE:1.5
	OPENBSD_5_4:1.5.0.22
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.5.0.20
	OPENBSD_5_3_BASE:1.5
	OPENBSD_5_2:1.5.0.18
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.16
	OPENBSD_5_0:1.5.0.14
	OPENBSD_5_0_BASE:1.5
	OPENBSD_4_9:1.5.0.12
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.5.0.10
	OPENBSD_4_8_BASE:1.5
	OPENBSD_4_7:1.5.0.6
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.5.0.8
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.5.0.4
	OPENBSD_4_5_BASE:1.5
	OPENBSD_4_4:1.5.0.2
	OPENBSD_4_4_BASE:1.5
	OPENBSD_4_3:1.4.0.2
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_2:1.3.0.12
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.3.0.10
	OPENBSD_4_1_BASE:1.3
	OPENBSD_4_0:1.3.0.8
	OPENBSD_4_0_BASE:1.3
	OPENBSD_3_9:1.3.0.6
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.3.0.4
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.3.0.2
	OPENBSD_3_7_BASE:1.3
	OPENBSD_3_6:1.2.0.2
	OPENBSD_3_6_BASE:1.2;
locks; strict;
comment	@ * @;


1.5
date	2008.04.07.22.36.24;	author miod;	state Exp;
branches;
next	1.4;

1.4
date	2007.12.18.08.07.53;	author jsing;	state Exp;
branches;
next	1.3;

1.3
date	2005.01.31.21.25.20;	author grange;	state Exp;
branches;
next	1.2;

1.2
date	2004.08.10.20.28.13;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	2004.08.06.20.57.02;	author pefo;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Split clock attachment in two parts: a timecounter attachment (at mainbus),
and a time-of-day chip (wherever it gets found).
@
text
@/*	$OpenBSD: clockvar.h,v 1.4 2007/12/18 08:07:53 jsing Exp $	*/

/*
 * Copyright (c) 1994, 1995 Carnegie-Mellon University.
 * All rights reserved.
 *
 * Author: Chris G. Demetriou
 * Adopted for r4400: Per Fogelstrom
 *
 * Permission to use, copy, modify and distribute this software and
 * its documentation is hereby granted, provided that both the copyright
 * notice and this permission notice appear in all copies of the
 * software, derivative works or modified versions, and any portions
 * thereof, and that both notices appear in supporting documentation.
 *
 * CARNEGIE MELLON ALLOWS FREE USE OF THIS SOFTWARE IN ITS "AS IS"
 * CONDITION.  CARNEGIE MELLON DISCLAIMS ANY LIABILITY OF ANY KIND
 * FOR ANY DAMAGES WHATSOEVER RESULTING FROM THE USE OF THIS SOFTWARE.
 *
 * Carnegie Mellon requests users of this software to return to
 *
 *  Software Distribution Coordinator  or  Software.Distribution@@CS.CMU.EDU
 *  School of Computer Science
 *  Carnegie Mellon University
 *  Pittsburgh PA 15213-3890
 *
 * any improvements or extensions that they make and grant Carnegie the
 * rights to redistribute these changes.
 */

/*
 * Definitions for "cpu-independent" clock handling.
 */

/*
 * tod_time structure:
 *
 * structure passed to TOD clocks when setting them.  broken out this
 * way, so that the time_t -> field conversion can be shared.
 */
struct tod_time {
	int	year;			/* year 1900.... */
	int	mon;			/* month (1 - 12) */
	int	day;			/* day (1 - 31) */
	int	hour;			/* hour (0 - 23) */
	int	min;			/* minute (0 - 59) */
	int	sec;			/* second (0 - 59) */
	int	dow;			/* day of week (0 - 6; 0 = Sunday) */
};

/*
 * tod_desc structure:
 *
 * provides tod-specific functions to do necessary operations.
 */

struct tod_desc {
	void	*tod_cookie;
	void	(*tod_get)(void *, time_t, struct tod_time *);
	void	(*tod_set)(void *, struct tod_time *);
	int	tod_valid;
};

extern struct tod_desc sys_tod;
@


1.4
log
@Expose the clock address space so that it can be used outside of clock(4).

ok miod@@
@
text
@d1 1
a1 1
/*	$OpenBSD: clockvar.h,v 1.3 2005/01/31 21:25:20 grange Exp $	*/
d32 1
a32 1
 * Definitions for "cpu-independent" clock handling for the mips arc arch.
d36 1
a36 1
 * clocktime structure:
d38 1
a38 1
 * structure passed to TOY clocks when setting them.  broken out this
d52 1
a52 1
 * clockdesc structure:
d54 1
a54 1
 * provides clock-specific functions to do necessary operations.
a55 1
struct clock_softc;
d57 5
a61 8
struct clock_desc {
	void	(*clk_attach)(struct device *, struct device *, void *);
	void	(*clk_init)(struct clock_softc *);
	void	(*clk_get)(struct clock_softc *, time_t, struct tod_time *);
	void	(*clk_set)(struct clock_softc *, struct tod_time *);
	int	clk_hz;
	int	clk_stathz;
	int	clk_profhz;
d64 1
a64 13
struct clock_softc {
	struct	device sc_dev;
	struct	clock_desc sc_clock;
	int	sc_initted;
	bus_space_tag_t sc_clk_t;
	bus_space_handle_t sc_clk_h;
	void	*ih;
};

/* XXX Handle to clock address space. */
bus_space_handle_t clock_h;

void md_clk_attach(struct device *, struct device *, void *);
@


1.3
log
@Move md_clk_attach() prototype to mips64/dev/clockvar.h.

ok pefo@@
@
text
@d1 1
a1 1
/*	$OpenBSD: clockvar.h,v 1.2 2004/08/10 20:28:13 deraadt Exp $	*/
d76 3
@


1.2
log
@spacing
@
text
@d1 1
a1 1
/*	$OpenBSD: clockvar.h,v 1.1 2004/08/06 20:57:02 pefo Exp $	*/
d76 2
@


1.1
log
@one more mips64
@
text
@d1 1
a1 1
/*	$OpenBSD: clockvar.h,v 1.1 1998/01/29 15:06:19 pefo Exp $	*/
d9 1
a9 1
 * 
d15 3
a17 3
 * 
 * CARNEGIE MELLON ALLOWS FREE USE OF THIS SOFTWARE IN ITS "AS IS" 
 * CONDITION.  CARNEGIE MELLON DISCLAIMS ANY LIABILITY OF ANY KIND 
d19 1
a19 1
 * 
@

