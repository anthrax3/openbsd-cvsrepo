head	1.8;
access;
symbols
	OPENBSD_3_8:1.6.0.40
	OPENBSD_3_8_BASE:1.6
	OPENBSD_3_7:1.6.0.38
	OPENBSD_3_7_BASE:1.6
	OPENBSD_3_6:1.6.0.36
	OPENBSD_3_6_BASE:1.6
	SMP_SYNC_A:1.6
	SMP_SYNC_B:1.6
	OPENBSD_3_5:1.6.0.34
	OPENBSD_3_5_BASE:1.6
	OPENBSD_3_4:1.6.0.32
	OPENBSD_3_4_BASE:1.6
	UBC_SYNC_A:1.6
	OPENBSD_3_3:1.6.0.30
	OPENBSD_3_3_BASE:1.6
	OPENBSD_3_2:1.6.0.28
	OPENBSD_3_2_BASE:1.6
	OPENBSD_3_1:1.6.0.26
	OPENBSD_3_1_BASE:1.6
	UBC_SYNC_B:1.6
	UBC:1.6.0.24
	UBC_BASE:1.6
	OPENBSD_3_0:1.6.0.22
	OPENBSD_3_0_BASE:1.6
	OPENBSD_2_9:1.6.0.20
	OPENBSD_2_9_BASE:1.6
	NIKLAS_UNDEAD:1.6.0.18
	OPENBSD_2_8:1.6.0.16
	OPENBSD_2_8_BASE:1.6
	OPENBSD_2_7:1.6.0.14
	OPENBSD_2_7_BASE:1.6
	SMP:1.6.0.12
	SMP_BASE:1.6
	kame_19991208:1.6
	OPENBSD_2_6:1.6.0.10
	OPENBSD_2_6_BASE:1.6
	OPENBSD_2_5:1.6.0.8
	OPENBSD_2_5_BASE:1.6
	OPENBSD_2_4:1.6.0.6
	OPENBSD_2_4_BASE:1.6
	OPENBSD_2_3:1.6.0.4
	OPENBSD_2_3_BASE:1.6
	OPENBSD_2_2:1.6.0.2
	OPENBSD_2_2_BASE:1.6
	OPENBSD_2_1:1.4.0.4
	OPENBSD_2_1_BASE:1.4
	OPENBSD_2_0:1.4.0.2
	OPENBSD_2_0_BASE:1.4
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@ * @;


1.8
date	2006.01.15.00.10.24;	author miod;	state dead;
branches;
next	1.7;

1.7
date	2006.01.09.22.59.35;	author miod;	state Exp;
branches;
next	1.6;

1.6
date	97.10.19.23.40.46;	author briggs;	state Exp;
branches;
next	1.5;

1.5
date	97.06.26.22.00.55;	author gene;	state Exp;
branches;
next	1.4;

1.4
date	96.05.26.18.36.15;	author briggs;	state Exp;
branches;
next	1.3;

1.3
date	96.05.26.18.14.21;	author briggs;	state Exp;
branches;
next	1.2;

1.2
date	96.02.01.05.05.19;	author briggs;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.51.07;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.51.07;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.8
log
@Do not put HZ in the kernel configuration file anymore, and let the kernel
decide by itself: Quadra-style machines with A/UX style interrupts and clock
at level 6 will use 100Hz now, while other machines will remain at 60Hz.
@
text
@/*	$OpenBSD: clockreg.h,v 1.7 2006/01/09 22:59:35 miod Exp $	*/
/*	$NetBSD: clockreg.h,v 1.5 1996/04/01 05:16:52 scottr Exp $	*/

/*-
 * Copyright (C) 1993	Allen K. Briggs, Chris P. Caputo,
 *			Michael L. Finch, Bradley A. Grantham, and
 *			Lawrence A. Kesteloot
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. All advertising materials mentioning features or use of this software
 *    must display the following acknowledgement:
 *	This product includes software developed by the Alice Group.
 * 4. The names of the Alice Group or any of its members may not be used
 *    to endorse or promote products derived from this software without
 *    specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE ALICE GROUP ``AS IS'' AND ANY EXPRESS OR
 * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
 * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE ALICE GROUP BE LIABLE FOR ANY DIRECT, INDIRECT,
 * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
 * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */
/*
 *  Clock defines and things.
 *  MacII clock characteristics used.
 */

/*
 * Calculate clocks needed to hit HZ ticks/sec.
 *
 * The VIA clock speed is 1.2766us, so the timer value needed is:
 *
 *                    1       1,000,000us     1
 *  CLK_INTERVAL = -------- * ----------- * ------
 *                 1.2766us       1s          HZ
 *
 * While it may be tempting to simplify the following further, we can run
 * into integer overflow problems.  Also note:  do *not* define HZ to be
 * less than 12; overflow will occur, yielding invalid results.
 */
#define CLK_INTERVAL	((int)((((100000000L / HZ) * 100) / 12766)))

#define CLK_INTH	((CLK_INTERVAL >> 8) & 0xff)	/* high byte */
#define CLK_INTL	(CLK_INTERVAL & 0xff)		/* low byte */
@


1.7
log
@Spank the clock: remove relics of old GPROF code, compute tickfix for
better clock adjustment, consider clocks past year 2010 as possible, and
do not display the PRAM clock if it consistent.
@
text
@d1 1
a1 1
/*	$OpenBSD: clockreg.h,v 1.6 1997/10/19 23:40:46 briggs Exp $	*/
@


1.6
log
@Remove some old, out of date kernel configurations.
Add HZ=60 to GENERIC and GENERICSBC configurations.  Make sure clockreg.h
does not compile unless HZ is defined.  We can't just define it here since
param.c needs to agree with whatever clockreg.h uses.  This has been broken
since June.  Only effect is that the clocks would lose time badly.
@
text
@d1 1
a1 1
/*	$OpenBSD: clockreg.h,v 1.5 1997/06/26 22:00:55 gene Exp $	*/
a41 3

#define CLK_SPEED	0.0000012766	/* time to complete a clock (3 MHz) */

a58 6

#if !defined(PRF_INTERVAL)
#define PRF_INTERVAL CLK_INTERVAL
#endif

#define SECYR 31536000
@


1.5
log
@Hard-code definition of HZ if undefined (not spec'ed in an 'option'
statement).  This is fallout from the recent config changes; pointed out by
Steven Campbel.
@
text
@d1 1
a1 1
/*	$OpenBSD: clockreg.h,v 1.4 1996/05/26 18:36:15 briggs Exp $	*/
a42 3
#ifndef HZ
#define	HZ		60		/* Seems to be universal for mac68k */
#endif
@


1.4
log
@Add OpenBSD Id string.
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
d43 3
@


1.3
log
@Sync with NetBSD-current.
@
text
@d1 1
@


1.2
log
@Clean up and comment a bit.
@
text
@d1 1
a1 1
/*	$NetBSD: clockreg.h,v 1.4 1996/02/01 03:40:26 briggs Exp $	*/
a42 1
#define CLK_INTERVAL	13055		/* clks to hit HZ ticks/sec */
d45 3
a47 1
 * The VIA1 clock speed is 1.2766us, so the timer value above is:
d53 3
a55 1
 * where HZ == 60.  This gives us 13055.5 and change...  We round down.
d57 4
a60 2
#define CLK_INTH	(CLK_INTERVAL >> 8)
#define CLK_INTL	(CLK_INTERVAL & 0xff)
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
/*	$NetBSD: clockreg.h,v 1.3 1994/10/26 08:46:56 cgd Exp $	*/
d37 3
a39 3
   Clock defines and things.
   MacII clock characteristics used.
*/
d42 2
a43 1
#include "../include/limits.h"	/* to get CLK_TCK */
d45 9
a53 5

#define CLK_SPEED	0.0000012766	/* time to complete a clock (3 MHz) */
#define CLK_INTERVAL	13055		/* clocks to hit CLK_TCK ticks per sec */
			/* 7526 for 120 Hz. */
			/* 13055 for 60 Hz. */
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
