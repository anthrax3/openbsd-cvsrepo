head	1.44;
access;
symbols
	OPENBSD_5_1_BASE:1.43
	OPENBSD_5_1:1.43.0.22
	OPENBSD_5_0:1.43.0.20
	OPENBSD_5_0_BASE:1.43
	OPENBSD_4_9:1.43.0.18
	OPENBSD_4_9_BASE:1.43
	OPENBSD_4_8:1.43.0.16
	OPENBSD_4_8_BASE:1.43
	OPENBSD_4_7:1.43.0.12
	OPENBSD_4_7_BASE:1.43
	OPENBSD_4_6:1.43.0.14
	OPENBSD_4_6_BASE:1.43
	OPENBSD_4_5:1.43.0.10
	OPENBSD_4_5_BASE:1.43
	OPENBSD_4_4:1.43.0.8
	OPENBSD_4_4_BASE:1.43
	OPENBSD_4_3:1.43.0.6
	OPENBSD_4_3_BASE:1.43
	OPENBSD_4_2:1.43.0.4
	OPENBSD_4_2_BASE:1.43
	OPENBSD_4_1:1.43.0.2
	OPENBSD_4_1_BASE:1.43
	OPENBSD_4_0:1.42.0.4
	OPENBSD_4_0_BASE:1.42
	OPENBSD_3_9:1.42.0.2
	OPENBSD_3_9_BASE:1.42
	OPENBSD_3_8:1.33.0.4
	OPENBSD_3_8_BASE:1.33
	OPENBSD_3_7:1.33.0.2
	OPENBSD_3_7_BASE:1.33
	OPENBSD_3_6:1.29.0.10
	OPENBSD_3_6_BASE:1.29
	SMP_SYNC_A:1.29
	SMP_SYNC_B:1.29
	OPENBSD_3_5:1.29.0.8
	OPENBSD_3_5_BASE:1.29
	OPENBSD_3_4:1.29.0.6
	OPENBSD_3_4_BASE:1.29
	UBC_SYNC_A:1.29
	OPENBSD_3_3:1.29.0.4
	OPENBSD_3_3_BASE:1.29
	OPENBSD_3_2:1.29.0.2
	OPENBSD_3_2_BASE:1.29
	OPENBSD_3_1:1.27.0.2
	OPENBSD_3_1_BASE:1.27
	UBC_SYNC_B:1.29
	UBC:1.25.0.2
	UBC_BASE:1.25
	OPENBSD_3_0:1.23.0.2
	OPENBSD_3_0_BASE:1.23
	OPENBSD_2_9:1.21.0.6
	OPENBSD_2_9_BASE:1.21
	NIKLAS_UNDEAD:1.21.0.4
	OPENBSD_2_8:1.21.0.2
	OPENBSD_2_8_BASE:1.21
	OPENBSD_2_7:1.20.0.4
	OPENBSD_2_7_BASE:1.20
	SMP:1.20.0.2
	SMP_BASE:1.20
	kame_19991208:1.20
	OPENBSD_2_6:1.19.0.6
	OPENBSD_2_6_BASE:1.19
	OPENBSD_2_5:1.19.0.4
	OPENBSD_2_5_BASE:1.19
	OPENBSD_2_4:1.19.0.2
	OPENBSD_2_4_BASE:1.19
	OPENBSD_2_3:1.17.0.4
	OPENBSD_2_3_BASE:1.17
	OPENBSD_2_2:1.17.0.2
	OPENBSD_2_2_BASE:1.17
	OPENBSD_2_1:1.16.0.2
	OPENBSD_2_1_BASE:1.16
	OPENBSD_2_0:1.7.0.2
	OPENBSD_2_0_BASE:1.7
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.44
date	2012.06.20.18.23.51;	author matthew;	state dead;
branches;
next	1.43;

1.43
date	2007.01.22.13.17.45;	author martin;	state Exp;
branches;
next	1.42;

1.42
date	2006.01.29.15.58.20;	author martin;	state Exp;
branches;
next	1.41;

1.41
date	2006.01.22.13.53.16;	author miod;	state Exp;
branches;
next	1.40;

1.40
date	2006.01.18.23.21.14;	author miod;	state Exp;
branches;
next	1.39;

1.39
date	2006.01.13.19.36.41;	author miod;	state Exp;
branches;
next	1.38;

1.38
date	2006.01.09.20.51.45;	author miod;	state Exp;
branches;
next	1.37;

1.37
date	2006.01.08.17.45.26;	author miod;	state Exp;
branches;
next	1.36;

1.36
date	2006.01.08.16.36.52;	author miod;	state Exp;
branches;
next	1.35;

1.35
date	2006.01.04.20.39.04;	author miod;	state Exp;
branches;
next	1.34;

1.34
date	2005.12.21.18.52.27;	author miod;	state Exp;
branches;
next	1.33;

1.33
date	2005.03.08.20.00.23;	author tdeval;	state Exp;
branches;
next	1.32;

1.32
date	2004.11.25.18.32.06;	author miod;	state Exp;
branches;
next	1.31;

1.31
date	2004.10.08.13.04.36;	author grange;	state Exp;
branches;
next	1.30;

1.30
date	2004.09.16.09.14.03;	author mickey;	state Exp;
branches;
next	1.29;

1.29
date	2002.04.18.22.12.37;	author miod;	state Exp;
branches;
next	1.28;

1.28
date	2002.04.16.15.32.55;	author miod;	state Exp;
branches;
next	1.27;

1.27
date	2002.01.10.22.25.38;	author miod;	state Exp;
branches;
next	1.26;

1.26
date	2001.12.20.19.02.28;	author miod;	state Exp;
branches;
next	1.25;

1.25
date	2001.11.30.20.58.18;	author miod;	state Exp;
branches
	1.25.2.1;
next	1.24;

1.24
date	2001.11.21.00.29.58;	author miod;	state Exp;
branches;
next	1.23;

1.23
date	2001.05.11.07.13.15;	author deraadt;	state Exp;
branches;
next	1.22;

1.22
date	2001.05.11.06.41.42;	author deraadt;	state Exp;
branches;
next	1.21;

1.21
date	2000.06.12.06.10.47;	author fgsch;	state Exp;
branches;
next	1.20;

1.20
date	99.11.08.15.36.08;	author mickey;	state Exp;
branches
	1.20.2.1;
next	1.19;

1.19
date	98.05.08.22.17.04;	author gene;	state Exp;
branches;
next	1.18;

1.18
date	98.04.27.02.02.49;	author gene;	state Exp;
branches;
next	1.17;

1.17
date	97.06.05.18.34.50;	author gene;	state Exp;
branches;
next	1.16;

1.16
date	97.04.14.18.47.51;	author gene;	state Exp;
branches;
next	1.15;

1.15
date	97.03.28.12.38.57;	author briggs;	state Exp;
branches;
next	1.14;

1.14
date	97.03.12.13.24.16;	author briggs;	state Exp;
branches;
next	1.13;

1.13
date	97.03.08.16.16.47;	author briggs;	state Exp;
branches;
next	1.12;

1.12
date	97.02.27.14.03.41;	author briggs;	state Exp;
branches;
next	1.11;

1.11
date	97.02.23.06.04.51;	author briggs;	state Exp;
branches;
next	1.10;

1.10
date	97.01.24.01.35.26;	author briggs;	state Exp;
branches;
next	1.9;

1.9
date	97.01.01.04.04.49;	author briggs;	state Exp;
branches;
next	1.8;

1.8
date	96.10.28.14.19.10;	author briggs;	state Exp;
branches;
next	1.7;

1.7
date	96.08.10.21.37.42;	author briggs;	state Exp;
branches;
next	1.6;

1.6
date	96.06.23.16.18.02;	author briggs;	state Exp;
branches;
next	1.5;

1.5
date	96.05.26.18.35.10;	author briggs;	state Exp;
branches;
next	1.4;

1.4
date	96.05.26.18.13.29;	author briggs;	state Exp;
branches;
next	1.3;

1.3
date	96.02.20.05.12.08;	author briggs;	state Exp;
branches;
next	1.2;

1.2
date	95.12.14.11.35.55;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.51.02;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.51.02;	author deraadt;	state Exp;
branches;
next	;

1.20.2.1
date	2001.04.18.16.10.04;	author niklas;	state Exp;
branches;
next	1.20.2.2;

1.20.2.2
date	2001.07.04.10.18.24;	author niklas;	state Exp;
branches;
next	1.20.2.3;

1.20.2.3
date	2001.12.05.00.39.11;	author niklas;	state Exp;
branches;
next	1.20.2.4;

1.20.2.4
date	2003.03.27.23.28.43;	author niklas;	state Exp;
branches;
next	;

1.25.2.1
date	2002.01.31.22.55.13;	author niklas;	state Exp;
branches;
next	1.25.2.2;

1.25.2.2
date	2002.06.11.03.36.18;	author art;	state Exp;
branches;
next	;


desc
@@


1.44
log
@RIP mac68k.  No one loves you anymore.
@
text
@#	$OpenBSD: files.mac68k,v 1.43 2007/01/22 13:17:45 martin Exp $
#	$NetBSD: files.mac68k,v 1.61 1997/03/01 20:22:16 scottr Exp $

# mac68k-specific configuration info

# maxpartitions must be first item in files.${ARCH}.newconf
maxpartitions 16 

maxusers 2 8 64

device mainbus {}			# no locators (yet?)
attach mainbus at root

device	obio {[ addr = -1 ]}
attach	obio at mainbus
file	arch/mac68k/dev/obio.c		obio

device	nubus {}
attach	nubus at mainbus
file	arch/mac68k/dev/nubus.c		nubus

device	adb {}
attach	adb at obio
file	arch/mac68k/dev/adb.c		adb
file	arch/mac68k/dev/pm_direct.c	adb

#
# "workstation console" routines
#
include "dev/rasops/files.rasops"
include	"dev/wscons/files.wscons"
include "dev/wsfont/files.wsfont"

#
# adb devices
#
include	"dev/adb/files.adb"
file	arch/mac68k/dev/akbd_machdep.c	akbd

device	asc
attach	asc at obio
file	arch/mac68k/dev/asc.c		asc needs-flag

device	macfb: wsemuldisplaydev, rasops1, rasops2, rasops4, rasops8, rasops16, rasops32
attach	macfb at obio with macfb_obio
attach	macfb at nubus with macfb_nubus
file	arch/mac68k/dev/macfb.c		macfb needs-flag
file	arch/mac68k/dev/grf_iv.c	macfb_obio
file	arch/mac68k/dev/grf_mv.c	macfb_nubus

device	ae: ifnet, ether, dp8390nic, ifmedia
attach	ae at nubus with ae_nubus
file	arch/mac68k/dev/if_ae_nubus.c	ae_nubus
file	arch/mac68k/dev/if_ae.c		ae

device	sn: ifnet, ether
attach	sn at obio with sn_obio
attach	sn at nubus with sn_nubus
file	arch/mac68k/dev/if_sn.c		sn
file	arch/mac68k/dev/if_sn_obio.c	sn_obio
file	arch/mac68k/dev/if_sn_nubus.c	sn_nubus

device	mc: ifnet, ether
attach	mc at obio with mc_obio
file	arch/mac68k/dev/if_mc.c
file	arch/mac68k/dev/if_mc_obio.c

attach	sm at nubus with sm_nubus
file	arch/mac68k/dev/if_sm_nubus.c	sm_nubus

include "scsi/files.scsi"
include "dev/mii/files.mii"

# Option 1 for ncr5380 support
device	ncrscsi: scsi
attach	ncrscsi at obio
file	arch/mac68k/dev/mac68k5380.c	ncrscsi needs-flag

# Option 2 for ncr5380 support
device	sbc: scsi, ncr5380sbc
attach	sbc at obio with sbc_obio
file	arch/mac68k/dev/sbc_obio.c	sbc_obio
file	arch/mac68k/dev/sbc.c		sbc

attach	esp at obio
file	arch/mac68k/dev/esp.c		esp

device	zsc {[channel = -1]}
attach	zsc at obio
file	arch/mac68k/dev/zs.c		zsc needs-flag
file	arch/mac68k/dev/z8530sc.c	zsc

device	zstty: tty
attach	zstty at zsc
file	arch/mac68k/dev/z8530tty.c	zstty needs-flag

file	arch/m68k/m68k/db_memrw.c	ddb
include "arch/m68k/fpe/files.fpe"

file	arch/mac68k/mac68k/autoconf.c
file	arch/mac68k/mac68k/bus_space.c
file	arch/mac68k/mac68k/clock.c
file	arch/mac68k/mac68k/conf.c
file	arch/mac68k/mac68k/disksubr.c		disk
file	arch/mac68k/mac68k/intr.c
file	arch/mac68k/mac68k/iop.c
file	arch/mac68k/mac68k/machdep.c
file	arch/mac68k/mac68k/mainbus.c
file	arch/mac68k/mac68k/mem.c
file	arch/m68k/m68k/pmap_motorola.c
file	arch/mac68k/mac68k/pmap_bootstrap.c
file	arch/mac68k/mac68k/pram.c
file	arch/mac68k/mac68k/pramasm.s
file	arch/mac68k/mac68k/psc.c
file	arch/mac68k/mac68k/sys_machdep.c
file	arch/mac68k/mac68k/trap.c
file	arch/mac68k/mac68k/via.c
file	arch/mac68k/mac68k/vm_machdep.c
file	arch/mac68k/mac68k/wscons_machdep.c

file	dev/cninit.c

major	{sd = 4}
major	{st = 5}
major	{cd = 6}
major	{vnd = 8}
major	{rd = 13}
@


1.43
log
@use the MI DP8390 driver instead of rolling our own functions

from NetBSD
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.42 2006/01/29 15:58:20 martin Exp $
@


1.42
log
@SMC91CXX NuBus hooks

from NetBSD
@
text
@d1 1
a1 1
#	$OpenBSD: Files.mac68k,v 1.41 2006/01/22 13:53:16 miod Exp $
d51 1
a51 1
device	ae: ifnet, ether
@


1.41
log
@Minimal iop code to set the serial ports to compatible mode automagically,
so that it is not necessary to change settings from MacOS before booting
into OpenBSD; from NetBSD.
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.40 2006/01/18 23:21:14 miod Exp $
d68 3
d72 1
@


1.40
log
@Factorize akbd and ams drivers between mac68k and macppc; while there, start
moving out common adb code as well, and merge adb_direct.c into adb.c to
simplify external header files.

No functional change; more cleanups to come.
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.39 2006/01/13 19:36:41 miod Exp $
d102 1
@


1.39
log
@Remove the Mac Rom Glue code completely. With the ADB ``direct'' code being
used by default, and since all PRAM accesses are either directly fiddling
with VIA registers or through ADB commands, the MRG code has no reason to
stay. This means the kernel is now not running unknown PROM code anymore.
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.38 2006/01/09 20:51:45 miod Exp $
d25 1
a25 2
file	arch/mac68k/dev/adb_direct.c	adb
file	arch/mac68k/dev/pm_direct.c
d37 2
a38 7
device	akbd: wskbddev
attach	akbd at adb
file	arch/mac68k/dev/akbd.c		akbd needs-flag

device	ams: wsmousedev
attach	ams at adb
file	arch/mac68k/dev/ams.c		ams needs-flag
@


1.38
log
@Ditch the grf frame buffer abstraction, and directly attach macfb to
either obio or nubus. No functional change, shaves a few more KB...
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.37 2006/01/08 17:45:26 miod Exp $
a24 1
file	arch/mac68k/dev/adbsysasm.s	adb & mrg_adb
a108 2
file	arch/mac68k/mac68k/macrom.c
file	arch/mac68k/mac68k/macromasm.s
@


1.37
log
@Drop native MacOS support from the adb direct code, and skip callback
wrappers used to convert between MacOS pascal calling convention and the
C calling convention, unless option MRG_ADB. No functional change.
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.36 2006/01/08 16:36:52 miod Exp $
a50 11
define	grfbus {}
file	arch/mac68k/dev/grf_subr.c	grfbus

device	intvid: grfbus
attach	intvid at obio
file	arch/mac68k/dev/grf_iv.c	intvid

device	macvid: grfbus
attach	macvid at nubus
file	arch/mac68k/dev/grf_mv.c	macvid

d52 2
a53 1
attach	macfb at grfbus
d55 2
@


1.36
log
@Switch macfb from an rcons backend to a rasops backend; supposedly restores
all pixel depth operation, but there are still font display problems at
4bpp and 16bpp at the moment; also make sure the display is white on black,
whichever colour depth we are in.
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.35 2006/01/04 20:39:04 miod Exp $
d25 1
a25 1
file	arch/mac68k/dev/adbsysasm.s	adb
@


1.35
log
@Import NetBSD's direct adb code on mac68k, switching to real keyboard and mouse
drivers, and to wscons as the console; a few parts borrowed from OpenBSD/macppc
as well.

Currently only working with displays configured in 1bpp or 8bpp modes; this
limitation will be worked on ASAP.

Tested by claudio@@ kettenis@@ martin@@ nick@@ and I on various models. X11 changes
coming soon.
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.34 2005/12/21 18:52:27 miod Exp $
d32 1
d34 1
d62 1
a62 1
device	macfb: wsemuldisplaydev, wsrasteremulops
@


1.34
log
@Simplify obio stanzas and remove unused locators.
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.33 2005/03/08 20:00:23 tdeval Exp $
d22 1
a22 1
device	adb
d25 2
a26 3
file	arch/mac68k/dev/adbsys.c
file	arch/mac68k/dev/adbsysasm.s
file	arch/mac68k/dev/adb_direct.c
d29 16
d49 1
a49 1
define grfbus {}
d60 3
a62 3
device	grf {}
attach	grf at grfbus
file	arch/mac68k/dev/grf.c		grf needs-flag
a68 4
device	ite
attach	ite at grf
file	arch/mac68k/dev/ite.c		ite needs-flag

a100 1
#file	dev/ic/z8530sc.c		zsc
a104 1
#file	dev/ic/z8530tty.c		zstty needs-flag
d129 1
@


1.33
log
@Cosmetics...
Mainly remove space between locators parens, replace spaces with tabs
where appropriate and consistently align dependencies.
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.32 2004/11/25 18:32:06 miod Exp $
d14 1
a14 3
define obio_norm {[addr = -1], ["no drq" = -1], ["no hsk" = -1]}
define obio_scsi5380 {[addr = -1], [drq = -1], [hsk = -1]}
device	obio: obio_norm, obio_scsi5380
d23 1
a23 1
attach	adb at obio_norm
d31 1
a31 1
attach	asc at obio_norm
d38 1
a38 1
attach	intvid at obio_norm
d59 1
a59 1
attach	sn at obio_norm with sn_obio
d66 1
a66 1
attach	mc at obio_norm with mc_obio
d74 1
a74 1
attach	ncrscsi at obio_scsi5380
d79 1
a79 1
attach	sbc at obio_scsi5380 with sbc_obio
d83 1
a83 1
attach	esp at obio_norm
d87 1
a87 1
attach	zsc at obio_norm
@


1.32
log
@Move towards a more flexible and generic interrupt system, as well as better
zs behaviour.

From NetBSD; integration work by Martin Reindl
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.31 2004/10/08 13:04:36 grange Exp $
d11 1
a11 1
device mainbus { }			# no locators (yet?)
d14 2
a15 2
define obio_norm { [addr = -1], ["no drq" = -1], ["no hsk" = -1] }
define obio_scsi5380 { [addr = -1], [drq = -1], [hsk = -1] }
d20 1
a20 1
device	nubus { }
d36 1
a36 1
define grfbus { }
d47 1
a47 1
device	grf { }
@


1.31
log
@Move dev/cons.c to MI conf/files.

ok miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.30 2004/09/16 09:14:03 mickey Exp $
d107 1
@


1.30
log
@cleanup deafult locators (blah ?); please check that your most hated architecture is still fluffy (;
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.29 2002/04/18 22:12:37 miod Exp $
a121 1
file	dev/cons.c
@


1.29
log
@Make the Mac68k disklabel 16 partitions long, to cope with
partition-{convoluted,challenged} disks.
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.28 2002/04/16 15:32:55 miod Exp $
d88 1
a88 1
device	zsc { channel = -1 }
@


1.28
log
@Using a dull device to probe the FPU is ridiculous, replace it with an early
initialization.
While there, rework the cpu_model string creation so that it gets a more
useful content.
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.27 2002/01/10 22:25:38 miod Exp $
d7 1
a7 1
maxpartitions 8
@


1.27
log
@Bring back pmap_motorola for mac68k.
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.26 2001/12/20 19:02:28 miod Exp $
a97 5

# This one is out of alphabetical order
device	fpu
attach	fpu at mainbus
file	arch/mac68k/mac68k/fpu.c	fpu
@


1.26
log
@Temporarily revert the pmap_motorola changes, as they may account for
some problems as well.
Requested by deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.25 2001/11/30 20:58:18 miod Exp $
d117 1
a117 1
file	arch/mac68k/mac68k/pmap.c
@


1.25
log
@Switch to pmap_motorola.
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.24 2001/11/21 00:29:58 miod Exp $
d117 1
a117 1
file	arch/m68k/m68k/pmap_motorola.c
@


1.25.2.1
log
@Merge in -current, builds on i386, otherwise untested
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.27 2002/01/10 22:25:38 miod Exp $
@


1.25.2.2
log
@Sync UBC branch to -current
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.25.2.1 2002/01/31 22:55:13 niklas Exp $
d7 1
a7 1
maxpartitions 16 
d98 5
@


1.24
log
@Provide COMPAT_SUNOS files via the common m68k configuration files.
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.23 2001/05/11 07:13:15 deraadt Exp $
d117 1
a117 1
file	arch/mac68k/mac68k/pmap.c
@


1.23
log
@unify rd(4) even more
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.22 2001/05/11 06:41:42 deraadt Exp $
a134 6

# Compatibility modules

# SunOS Binary Compatibility (COMPAT_SUNOS)
include "compat/sunos/files.sunos"
file	arch/m68k/m68k/sunos_machdep.c	compat_sunos
@


1.22
log
@unify
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.21 2000/06/12 06:10:47 fgsch Exp $
a128 3

# RAM Disk for boot tape
file	dev/rd.c				ramdisk_hooks
@


1.21
log
@move cfdriver to ncr53c9x.c and device declaration to conf/files.
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.20 1999/11/08 15:36:08 mickey Exp $
d131 1
a131 1
file arch/sun3/dev/rd_root.c		ramdisk_hooks
@


1.20
log
@move MI definition of rd into it's MI place also fixing
attributes, allowing kernels to exist w/ rd as the only disk device.
tested on a few archs; niels@@ & millert@@ ok
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.19 1998/05/08 22:17:04 gene Exp $
a84 1
device	esp: scsi, ncr53c9x
@


1.20.2.1
log
@Update the SMP branch to -current, this breaks the SMP branch though.
But it will be fixed soonish.  Note, nothing new has happened, this is just
a merge of the trunk into this branch.
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.21 2000/06/12 06:10:47 fgsch Exp $
d85 1
@


1.20.2.2
log
@Merge in -current from two days ago in the SMP branch.
As usual with merges, they do not indicate progress, so do not hold
your breath for working SMP, and do not mail me and ask about the
state of it.  It has not changed.  There is work ongoing, but very, very
slowly.  The commit is done in parts as to not lock up the tree in too
big chunks at a time.
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.20.2.1 2001/04/18 16:10:04 niklas Exp $
d129 3
@


1.20.2.3
log
@Merge in -current
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.20.2.2 2001/07/04 10:18:24 niklas Exp $
d117 1
a117 1
file	arch/m68k/m68k/pmap_motorola.c
d135 6
@


1.20.2.4
log
@Sync the SMP branch with 3.3
@
text
@d1 1
a1 1
#	$OpenBSD$
d7 1
a7 1
maxpartitions 16 
d98 5
@


1.19
log
@Add psc.c and the new MACE driver.
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.18 1998/04/27 02:02:49 gene Exp $
a131 2
pseudo-device rd
file dev/ramdisk.c			rd needs-flag
@


1.18
log
@Add bus_space.c.
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.17 1997/06/05 18:34:50 gene Exp $
d67 5
d122 1
@


1.17
log
@Our config(8) is cool: we don't need ../../../ in includes.
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.16 1997/04/14 18:47:51 gene Exp $
d104 1
@


1.16
log
@Bring our incarnation of John Wittowski's direct adb driver into compatible
state with NetBSD's.  The direct-to-ADB code is now enabled by default.
Using 'options MRG_ADB' will cause the kernel to revert to the 'old standby'
code.
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.15 1997/03/28 12:38:57 briggs Exp $
d67 1
a67 1
include "../../../scsi/files.scsi"
d101 1
a101 1
include "../../../arch/m68k/fpe/files.fpe"
d138 1
a138 1
include "../../../compat/sunos/files.sunos"
@


1.15
log
@Use more from m68k/m68k.
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.14 1997/03/12 13:24:16 briggs Exp $
d29 2
a30 2
file	arch/mac68k/dev/adb_direct.c	hwdirect
file	arch/mac68k/dev/pm_direct.c	hwdirect
@


1.14
log
@New sn arrangements.
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.13 1997/03/08 16:16:47 briggs Exp $
a99 1
file	arch/m68k/m68k/copy.s
@


1.13
log
@Sync with NetBSD of about 4 March.
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.12 1997/02/27 14:03:41 briggs Exp $
d61 5
a65 2
attach	sn at obio_norm
file	arch/mac68k/dev/if_sn.c		sn needs-flag
@


1.12
log
@Add ncr53c9x flag to esp.
@
text
@d1 2
a2 2
#	$OpenBSD: files.mac68k,v 1.11 1997/02/23 06:04:51 briggs Exp $
#	$NetBSD: files.mac68k,v 1.55 1997/01/21 09:43:45 thorpej Exp $
d14 3
a16 1
device	obio { }
d25 1
a25 1
attach	adb at obio
d33 2
a34 2
attach	asc at obio
file	arch/mac68k/dev/asc.c		asc
d40 1
a40 1
attach	intvid at obio
d52 3
a54 2
attach	ae at nubus
file	arch/mac68k/dev/if_ae.c		ae needs-flag
d61 1
a61 1
attach	sn at obio
d68 1
a68 1
attach	ncrscsi at obio
d73 2
a74 1
attach	sbc at obio
d78 1
a78 1
attach	esp at obio
d82 1
a82 1
attach	zsc at obio
d94 1
a94 1
attach	fpu at obio
@


1.11
log
@Integrate code from John P. Wittkoski <jpw@@netwizards.net> and
Takashi Hamada <hamada@@next.etron.kanazawa-it.ac.jp>.  This code
interfaces directly to the hardware to support the ADB on many
macs.  It is enabled by "options HWDIRECT" in the configuration
file.  At some point, this should probably become the default method
as interfacing to the ADB through the ROMs has been painful and sometimes
problematic.

This code should have functioning ADB support for:
	II series (II, SE/30, IIx, IIcx)
	IIsi series (IIsi, IIci, IIvx, IIvi)
	LC II, LC III
	Performa 400, 405, 430, 460, 465, 467, 600
	Classic II, Color Classic, Color Classic II
	PB 5XX series
	Duo series
	PB 140,145,145b,160,(160c?),165,165c,170,180,180c
	Quadra 700,900,950
There is an off-chance that it will work on:
	PB 150, PB 190
	Quadra/Centris 605,610,630,650,660AV,800,840AV
	LC 475,550,575,630
	Performa 475,476,575,577,578,630
Note that functioning ADB support does not mean that everything else
will work.  I obviously do not own all of the above machines (does
anyone?  ;-)...  Any reports are welcome.

Many thanks to John Wittkoski and Takashi Hamada!
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.10 1997/01/24 01:35:26 briggs Exp $
d73 1
a73 1
device	esp: scsi
d75 1
a75 1
file	arch/mac68k/dev/esp.c		esp needs-flag
@


1.10
log
@Sync w/ NETBSD_CURRENT_971122.
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.9 1997/01/01 04:04:49 briggs Exp $
d27 2
d61 1
a61 1
include "scsi/files.scsi"
d95 1
a95 1
include "arch/m68k/fpe/files.fpe"
d132 1
a132 1
include "compat/sunos/files.sunos"
@


1.9
log
@Supply full path on 'include' lines for config.
@
text
@d1 2
a2 2
#	$OpenBSD: files.mac68k,v 1.8 1996/10/28 14:19:10 briggs Exp $
#	$NetBSD: files.mac68k,v 1.50 1996/08/05 01:00:15 scottr Exp $
d14 1
a14 1
device	obio {}
d18 1
a18 1
device	nubus {}
d32 1
a32 1
define grfbus {}
d43 1
a43 1
device	grf {}				# eventually, we'll attach ITEs here
d116 4
a119 5
# RAM Disk for installs
#     These files are out of order
pseudo-device	rd
file	dev/ramdisk.c			rd needs-flag
file	arch/mac68k/dev/rd_root.c	ramdisk_hooks
@


1.8
log
@Rename ncr96scsi/scsi96 to esp.
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.7 1996/08/10 21:37:42 briggs Exp $
d59 1
a59 1
include "../../../scsi/files.scsi"
d93 1
a93 1
include "../../m68k/fpe/files.fpe"
d131 1
a131 1
include "../../../compat/sunos/files.sunos"
@


1.7
log
@Sync with NetBSD.
@
text
@d1 1
a1 1
#	$OpenBSD: files.mac68k,v 1.6 1996/06/23 16:18:02 briggs Exp $
d71 3
a73 3
device	ncr96scsi: scsi
attach	ncr96scsi at obio
file	arch/mac68k/dev/scsi96.c	ncr96scsi needs-flag
@


1.6
log
@From scottr/NetBSD:
Completely revamp setroot() and friends.  Since Chris' version of this code
is close to how I reworked it, I pulled in the (essentially MI) NetBSD/alpha
and added the appropriate support around it.

- No need for the GENERIC kernel config option.
- NFS-mounted root and swap are supported.
- If we can't figure out where the root filesystem is from what the Booter
  tells us, ask the user.
- Split the mainbus autoconfig code to a separate file.

Also, update/add copyrights as appropriate.
@
text
@d1 2
a2 2
#	$OpenBSD: files.mac68k,v 1.5 1996/05/26 18:35:10 briggs Exp $
#	$NetBSD: files.mac68k,v 1.49 1996/06/19 03:21:08 scottr Exp $
d52 1
a52 1
attach	ite at obio
@


1.5
log
@Add OpenBSD Id string.
@
text
@d1 2
a2 2
#	$OpenBSD$
#	$NetBSD: files.mac68k,v 1.48 1996/05/19 22:29:10 scottr Exp $
d102 1
@


1.4
log
@Sync with NetBSD-current.
@
text
@d1 1
@


1.3
log
@A couple of things from NetBSD:
- Don't special-case conf.c
- Add sbc driver.  (M.I. 5380 driver)
@
text
@d1 1
a1 1
#	$NetBSD: files.mac68k,v 1.39 1996/02/07 16:34:28 scottr Exp $
d10 2
a11 1
device mainbus at root { }		# no locators (yet?)
d13 6
a18 1
device	nubus at mainbus { slot = -1, id = -1, claimed = 0 }
d21 2
a22 4
device	ser at mainbus: tty
file	arch/mac68k/dev/ser.c		ser needs-flag

device	adb at mainbus
d27 2
a28 1
device	asc at mainbus
d31 2
a32 2
device	fpu at mainbus
file	arch/mac68k/mac68k/fpu.c	fpu
d34 11
a44 6
device	grf at nubus
file	arch/mac68k/dev/grf.c		grf needs-count
file	arch/mac68k/dev/grf_mv.c	grf
file	arch/mac68k/dev/grf_iv.c	grf
device	ite at mainbus
file	arch/mac68k/dev/ite.c		ite needs-flag
d46 2
a47 1
device	ae at nubus: ifnet, ether
d50 6
a55 1
device	sn at mainbus: ifnet, ether
d60 3
a62 1
device	ncrscsi at mainbus: scsi
d65 7
a71 1
device	ncr96scsi at mainbus: scsi
d74 15
a88 2
device	sbc at mainbus: scsi, ncr5380sbc
file	arch/mac68k/dev/ncr_sbc.c	sbc
d91 1
d115 3
a117 2
device	rd at mainbus
file	dev/ramdisk.c			rd needs-count
@


1.2
log
@update from netbsd (without losing local changes)
@
text
@d1 1
a1 1
#	$NetBSD: files.mac68k,v 1.37 1995/11/21 05:06:28 briggs Exp $
d39 3
d50 3
d58 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
#	$NetBSD: files.mac68k,v 1.35 1995/09/03 03:37:32 briggs Exp $
a39 3
major	{sd = 4}
major	{st = 5}
major	{cd = 6}
d48 2
a49 1
file	arch/m68k/fpe/fpu_emulate.c		fpu_emulate
d69 8
d78 1
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
