head	1.26;
access;
symbols
	OPENBSD_5_1_BASE:1.25
	OPENBSD_5_1:1.25.0.2
	OPENBSD_5_0:1.24.0.2
	OPENBSD_5_0_BASE:1.24
	OPENBSD_4_9:1.23.0.12
	OPENBSD_4_9_BASE:1.23
	OPENBSD_4_8:1.23.0.10
	OPENBSD_4_8_BASE:1.23
	OPENBSD_4_7:1.23.0.6
	OPENBSD_4_7_BASE:1.23
	OPENBSD_4_6:1.23.0.8
	OPENBSD_4_6_BASE:1.23
	OPENBSD_4_5:1.23.0.4
	OPENBSD_4_5_BASE:1.23
	OPENBSD_4_4:1.23.0.2
	OPENBSD_4_4_BASE:1.23
	OPENBSD_4_3:1.22.0.10
	OPENBSD_4_3_BASE:1.22
	OPENBSD_4_2:1.22.0.8
	OPENBSD_4_2_BASE:1.22
	OPENBSD_4_1:1.22.0.6
	OPENBSD_4_1_BASE:1.22
	OPENBSD_4_0:1.22.0.4
	OPENBSD_4_0_BASE:1.22
	OPENBSD_3_9:1.22.0.2
	OPENBSD_3_9_BASE:1.22
	OPENBSD_3_8:1.18.0.2
	OPENBSD_3_8_BASE:1.18
	OPENBSD_3_7:1.17.0.2
	OPENBSD_3_7_BASE:1.17
	OPENBSD_3_6:1.13.0.2
	OPENBSD_3_6_BASE:1.13
	SMP_SYNC_A:1.13
	SMP_SYNC_B:1.13
	OPENBSD_3_5:1.12.0.4
	OPENBSD_3_5_BASE:1.12
	OPENBSD_3_4:1.12.0.2
	OPENBSD_3_4_BASE:1.12
	UBC_SYNC_A:1.12
	OPENBSD_3_3:1.10.0.6
	OPENBSD_3_3_BASE:1.10
	UBC_SYNC_B:1.10
	OPENBSD_3_2:1.10.0.4
	OPENBSD_3_2_BASE:1.10
	UBC:1.10.0.2
	SMP:1.9.0.2
	OPENBSD_2_0:1.7.0.2
	OPENBSD_2_0_BASE:1.7;
locks; strict;
comment	@# @;


1.26
date	2012.06.20.18.23.51;	author matthew;	state dead;
branches;
next	1.25;

1.25
date	2011.11.08.19.22.13;	author deraadt;	state Exp;
branches;
next	1.24;

1.24
date	2011.06.29.20.52.09;	author matthew;	state Exp;
branches;
next	1.23;

1.23
date	2008.06.08.20.37.39;	author deraadt;	state Exp;
branches;
next	1.22;

1.22
date	2006.01.15.00.10.22;	author miod;	state Exp;
branches;
next	1.21;

1.21
date	2006.01.13.19.36.41;	author miod;	state Exp;
branches;
next	1.20;

1.20
date	2006.01.09.20.51.45;	author miod;	state Exp;
branches;
next	1.19;

1.19
date	2006.01.04.20.39.04;	author miod;	state Exp;
branches;
next	1.18;

1.18
date	2005.05.01.07.54.42;	author david;	state Exp;
branches;
next	1.17;

1.17
date	2004.12.08.20.21.31;	author miod;	state Exp;
branches;
next	1.16;

1.16
date	2004.12.03.06.37.51;	author miod;	state Exp;
branches;
next	1.15;

1.15
date	2004.12.02.20.17.49;	author miod;	state Exp;
branches;
next	1.14;

1.14
date	2004.09.16.09.14.03;	author mickey;	state Exp;
branches;
next	1.13;

1.13
date	2004.04.01.22.15.55;	author xsa;	state Exp;
branches;
next	1.12;

1.12
date	2003.05.13.22.45.10;	author miod;	state Exp;
branches;
next	1.11;

1.11
date	2003.05.05.13.59.38;	author miod;	state Exp;
branches;
next	1.10;

1.10
date	2002.04.24.22.34.42;	author miod;	state Exp;
branches
	1.10.2.1;
next	1.9;

1.9
date	96.10.28.04.43.47;	author briggs;	state dead;
branches
	1.9.2.1;
next	1.8;

1.8
date	96.10.14.02.43.52;	author briggs;	state Exp;
branches;
next	1.7;

1.7
date	96.09.20.06.45.13;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	96.08.31.02.09.23;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	96.08.10.21.37.41;	author briggs;	state Exp;
branches;
next	1.4;

1.4
date	96.05.26.18.35.09;	author briggs;	state Exp;
branches;
next	1.3;

1.3
date	96.05.26.18.13.28;	author briggs;	state Exp;
branches;
next	1.2;

1.2
date	96.02.20.05.19.16;	author briggs;	state Exp;
branches;
next	1.1;

1.1
date	95.12.14.11.35.54;	author deraadt;	state Exp;
branches;
next	;

1.9.2.1
date	2003.03.28.14.05.52;	author niklas;	state Exp;
branches;
next	1.9.2.2;

1.9.2.2
date	2003.05.13.19.41.05;	author ho;	state Exp;
branches;
next	1.9.2.3;

1.9.2.3
date	2003.05.16.00.29.39;	author niklas;	state Exp;
branches;
next	1.9.2.4;

1.9.2.4
date	2004.06.05.23.10.51;	author niklas;	state Exp;
branches;
next	;

1.10.2.1
date	2002.06.11.03.36.18;	author art;	state Exp;
branches;
next	1.10.2.2;

1.10.2.2
date	2003.05.19.21.49.42;	author tedu;	state Exp;
branches;
next	;


desc
@@


1.26
log
@RIP mac68k.  No one loves you anymore.
@
text
@#	$OpenBSD: RAMDISK,v 1.25 2011/11/08 19:22:13 deraadt Exp $

machine		mac68k m68k

# 1.4 meg ramdisk
option		MINIROOTSIZE=2880
option		RAMDISK_HOOKS

option		SCSITERSE
option		SMALL_KERNEL
option		NO_PROPOLICE
option		TIMEZONE=0
option		DST=0
option		FFS		# UFS
option		NFSCLIENT	# Network File System client
option		CD9660		# ISO 9660 + Rock Ridge file system
option		INET		# IP + ICMP + TCP + UDP

pseudo-device	loop	1	# network loopback
pseudo-device	bpfilter 1	# packet filter

# Comment out until UKC can be invoked on mac68k...
#option		BOOT_CONFIG	# add support for boot -c
option		DDB

# Mac-specific options
option		M68040
option		M68030
option		M68020		# Must have 68851 PMMU
option		FPSP
option		FPU_EMULATE

config		bsd		root on rd0a
maxusers	32

mainbus0	at root

# on-board I/O
obio0		at mainbus?

adb0		at obio?
akbd*		at adb?		# ADB keyboard
#ams*		at adb?		# ADB mouse

esp0		at obio?	# SCSI NCR 53C9x
esp1		at obio?	# SCSI NCR 53C9x
macfb*		at obio?	# Internal video hardware
mc*		at obio?	# MACE ethernet on Centris/Quadra 660av
sn*		at obio?	# Internal ethernet
zsc0		at obio?	# Zilog serial chip
zstty*		at zsc?

# nubus boards
nubus0		at mainbus?

ae*		at nubus?	# Most Apple Ethernet Cards
macfb*		at nubus?	# NuBus video cards
sn*		at nubus?	# SONIC-based ethernet cards

# workstation console
wsdisplay*	at macfb?
wskbd*		at akbd?
#wsmouse*	at ams?

# Enable only one of ncrscsi or sbc
ncrscsi0	at obio?		# SCSI NCR 5380
sbc0		at obio? disable flags 0x1	# MI NCR 5380 SCSI Bus Controller


scsibus*	at scsi?
sd*		at scsibus?		# SCSI disk drives
st*		at scsibus?		# SCSI tape drives
cd*		at scsibus?		# SCSI CD-ROM drives

pseudo-device	rd 1
@


1.25
log
@consistant "config bsd" lines; ok miod
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.25 2011/11/08 19:17:12 deraadt Exp $
@


1.24
log
@Replace all instances of "scsibus* at hba?" with a single "scsibus* at
scsi?" rule, similar to how ethernet PHY drivers attach at mii.

Discussed on icb.
@
text
@d1 1
a1 3
#	$OpenBSD: RAMDISK,v 1.23 2008/06/08 20:37:39 deraadt Exp $
#
# RAMDISK - bsd.rd configuration file (non-SBC version)
@


1.23
log
@alpha/conf/RAMDISK
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.22 2006/01/15 00:10:22 miod Exp $
a70 3
scsibus*	at esp?
scsibus*	at ncrscsi?
scsibus*	at sbc?
d72 1
@


1.22
log
@Do not put HZ in the kernel configuration file anymore, and let the kernel
decide by itself: Quadra-style machines with A/UX style interrupts and clock
at level 6 will use 100Hz now, while other machines will remain at 60Hz.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.21 2006/01/13 19:36:41 miod Exp $
a18 1
option		FIFO		# FIFOs; RECOMMENDED
@


1.21
log
@Remove the Mac Rom Glue code completely. With the ADB ``direct'' code being
used by default, and since all PRAM accesses are either directly fiddling
with VIA registers or through ADB commands, the MRG code has no reason to
stay. This means the kernel is now not running unknown PROM code anymore.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.20 2006/01/09 20:51:45 miod Exp $
a29 1
option		HZ=60		# Macs like 60Hz
@


1.20
log
@Ditch the grf frame buffer abstraction, and directly attach macfb to
either obio or nubus. No functional change, shaves a few more KB...
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.19 2006/01/04 20:39:04 miod Exp $
a35 1
#option		MRG_ADB		# Use ROM-based ADB driver
@


1.19
log
@Import NetBSD's direct adb code on mac68k, switching to real keyboard and mouse
drivers, and to wscons as the console; a few parts borrowed from OpenBSD/macppc
as well.

Currently only working with displays configured in 1bpp or 8bpp modes; this
limitation will be worked on ASAP.

Tested by claudio@@ kettenis@@ martin@@ nick@@ and I on various models. X11 changes
coming soon.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.18 2005/05/01 07:54:42 david Exp $
d50 6
a55 6
esp0		at obio?		# SCSI NCR 53C9x
esp1		at obio?		# SCSI NCR 53C9x
intvid0		at obio?		# Internal video hardware
mc*		at obio?		# MACE ethernet on Centris/Quadra 660av
sn*		at obio?		# Internal ethernet
zsc0		at obio?		# Zilog serial chip
d62 1
a62 1
macvid*		at nubus?	# NuBus video cards
d66 1
a66 2
macfb*		at intvid?
macfb*		at macvid?
a68 1
wsdisplay*	at macfb?
@


1.18
log
@spacing; ok miod@@ deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.17 2004/12/08 20:21:31 miod Exp $
a35 1
option		DISABLE_ADB_WITH_SERIAL_CONSOLE
d41 1
a41 1
mainbus0 at root
d44 1
a44 1
obio0 at mainbus?
d46 11
a56 8
adb0	at obio?
esp0	at obio?		# SCSI NCR 53C9x
esp1	at obio?		# SCSI NCR 53C9x
intvid0	at obio?		# Internal video hardware
mc*	at obio?		# MACE ethernet on Centris/Quadra 660av
sn*	at obio?		# Internal ethernet
zsc0	at obio?		# Zilog serial chip
zstty*	at zsc?
d58 1
d65 6
a70 6
# Attach grf semantics to all video hardware as it is found
grf*		at intvid?
grf*		at macvid?

# Attach ite semantics to the appropriate grf device
ite0		at grf?
d80 3
a82 3
sd*	at scsibus?		# SCSI disk drives
st*	at scsibus?		# SCSI tape drives
cd*	at scsibus?		# SCSI CD-ROM drives
@


1.17
log
@Crank maxusers to 32.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.16 2004/12/03 06:37:51 miod Exp $
d37 1
a37 1
#option		MRG_ADB		  # Use ROM-based ADB driver
@


1.16
log
@Kill mac68k *SBC kernels. Instead, build kernels with both sbc scsi flavours
compiled in, but one disabled, and use config -e to swap them and build
the other kernels; saves valuable compile time.

Add ramdisks into the build (at release time). Since we are moving to a
bsd.rd installation, it is not necessary to put kernels in .tgz files
anymore, so don't bother, and adjust installation script sets information
accordingly.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.15 2004/12/02 20:17:49 miod Exp $
d40 1
a40 1
maxusers	16
@


1.15
log
@option DISABLE_EXT_CACHE is not used anymore.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.14 2004/09/16 09:14:03 mickey Exp $
d69 1
a69 1
# Use only one of ncrscsi or sbc
d71 1
a71 1
#sbc0		at obio? flags 0x1	# MI NCR 5380 SCSI Bus Controller
d75 1
a75 1
#scsibus*	at sbc?
@


1.14
log
@cleanup deafult locators (blah ?); please check that your most hated architecture is still fluffy (;
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.13 2004/04/01 22:15:55 xsa Exp $
a35 1
option		DISABLE_EXT_CACHE # Don't use IIci external cache
@


1.13
log
@
typos in comments: hz -> Hz
initial hint from Martin Reindl <mreindl at catai.org>
ok miod@@ jmc@@.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.12 2003/05/13 22:45:10 miod Exp $
d55 1
a55 1
zstty*	at zsc? channel ?
d78 3
a80 3
sd*	at scsibus? target ? lun ?	# SCSI disk drives
st*	at scsibus? target ? lun ?	# SCSI tape drives
cd*	at scsibus? target ? lun ?	# SCSI CD-ROM drives
@


1.12
log
@Add option NO_PROPOLICE, which explicitely disables the use of the propolice
stack protection when building kernels. Intended to be used on installation
media, with tight space constraints - currently, only added where
SMALL_KERNEL was already defined.

Not thoroughly tested, but requested by deraadt.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.11 2003/05/05 13:59:38 miod Exp $
d30 1
a30 1
option		HZ=60		# Macs like 60hz
@


1.11
log
@Write explicit scsibus at controller attachment, rather than scsibus at scsi
attribute.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.10 2002/04/24 22:34:42 miod Exp $
d13 1
@


1.10
log
@RAMDISK configurations for mac68k.
@
text
@d1 1
a1 1
#	$OpenBSD$
d73 4
a76 1
scsibus*	at scsi?
@


1.10.2.1
log
@Sync UBC branch to -current
@
text
@@


1.10.2.2
log
@sync
@
text
@a12 1
option		NO_PROPOLICE
d73 1
a73 4
scsibus*	at esp?
scsibus*	at ncrscsi?
#scsibus*	at sbc?

@


1.9
log
@Obsolete.
@
text
@d1 1
a1 5
#	$OpenBSD: RAMDISK,v 1.8 1996/10/14 02:43:52 briggs Exp $
#	$NetBSD: RAMDISK,v 1.6 1996/08/05 01:52:16 scottr Exp $

# RAMDISK
# Support Root/swap on ramdisk
d3 1
d5 1
a5 3
include	"std.mac68k"

maxusers	2
d7 20
a26 20
# Enable the hooks used for initializing the ram-disk
options		RAMDISK_HOOKS
options		MINIROOTSIZE=512	# 256K

# Standard system options
options		SWAPPAGER, DEVPAGER	# paging

# Filesystem options
options		FIFO		# POSIX fifo support (in all filesystems)
options		DDB
options		FFS
options		NFSCLIENT	# Sun NFS-compatible filesystem
options		CD9660		# ISO-9660 w/ RockRidge
options		KERNFS		# Kernel filesystem

options		SCSI

# Networking options
options		INET
#options		TCP_COMPAT_42	# compatibility with 4.2BSD TCP/IP
d29 26
a54 9
options		M68040
options		M68030
options		M68020		# Must have 68851 PMMU
options		FPSP
options		FPU_EMULATE

config		bsd	root on rd0a swap on rd0b

intvid0		at obio?	# Internal video hardware
d58 3
a60 2
ae*		at nubus?
macvid*		at nubus?
d69 3
a71 2
ncrscsi0	at mainbus?		# SCSI NCR 5380
ncr96scsi0	at mainbus?		# SCSI NCR 53C96
d74 5
a78 9
sd*	at scsibus? target ? lun ?
st*	at scsibus? target ? lun ?
cd*	at scsibus? target ? lun ?
ch*	at scsibus? target ? lun ?

pseudo-device	rd	2
pseudo-device	ppp
pseudo-device	sl
pseudo-device	loop
@


1.9.2.1
log
@Sync SMP to 3.3, files that CVS misses due to some bug
@
text
@d1 5
a5 1
#	$OpenBSD$
a6 1
# RAMDISK - bsd.rd configuration file (non-SBC version)
d8 3
a10 1
machine		mac68k m68k
d12 20
a31 20
# 1.4 meg ramdisk
option		MINIROOTSIZE=2880
option		RAMDISK_HOOKS

option		SCSITERSE
option		SMALL_KERNEL
option		TIMEZONE=0
option		DST=0
option		FFS		# UFS
option		NFSCLIENT	# Network File System client
option		CD9660		# ISO 9660 + Rock Ridge file system
option		FIFO		# FIFOs; RECOMMENDED
option		INET		# IP + ICMP + TCP + UDP

pseudo-device	loop	1	# network loopback
pseudo-device	bpfilter 1	# packet filter

# Comment out until UKC can be invoked on mac68k...
#option		BOOT_CONFIG	# add support for boot -c
option		DDB
d34 9
a42 26
option		HZ=60		# Macs like 60hz
option		M68040
option		M68030
option		M68020		# Must have 68851 PMMU
option		FPSP
option		FPU_EMULATE
option		DISABLE_EXT_CACHE # Don't use IIci external cache
option		DISABLE_ADB_WITH_SERIAL_CONSOLE
#option		MRG_ADB		  # Use ROM-based ADB driver

config		bsd		root on rd0a
maxusers	16

mainbus0 at root

# on-board I/O
obio0 at mainbus?

adb0	at obio?
esp0	at obio?		# SCSI NCR 53C9x
esp1	at obio?		# SCSI NCR 53C9x
intvid0	at obio?		# Internal video hardware
mc*	at obio?		# MACE ethernet on Centris/Quadra 660av
sn*	at obio?		# Internal ethernet
zsc0	at obio?		# Zilog serial chip
zstty*	at zsc? channel ?
d46 2
a47 3
ae*		at nubus?	# Most Apple Ethernet Cards
macvid*		at nubus?	# NuBus video cards
sn*		at nubus?	# SONIC-based ethernet cards
d56 2
a57 3
# Use only one of ncrscsi or sbc
ncrscsi0	at obio?		# SCSI NCR 5380
#sbc0		at obio? flags 0x1	# MI NCR 5380 SCSI Bus Controller
d60 9
a68 5
sd*	at scsibus? target ? lun ?	# SCSI disk drives
st*	at scsibus? target ? lun ?	# SCSI tape drives
cd*	at scsibus? target ? lun ?	# SCSI CD-ROM drives

pseudo-device	rd 1
@


1.9.2.2
log
@Sync the SMP branch to -current.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.9.2.1 2003/03/28 14:05:52 niklas Exp $
d73 1
a73 4
scsibus*	at esp?
scsibus*	at ncrscsi?
#scsibus*	at sbc?

@


1.9.2.3
log
@merge the trunk so we will get the genfs and locking fixes
@
text
@d1 1
a1 1
#	$OpenBSD$
a12 1
option		NO_PROPOLICE
@


1.9.2.4
log
@Merge with the trunk
@
text
@d30 1
a30 1
option		HZ=60		# Macs like 60Hz
@


1.8
log
@Nuke old COMPAT options.  Move MACHINE_NONCONTIG to std.mac68k.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.7 1996/09/20 06:45:13 deraadt Exp $
@


1.7
log
@do not fool people into thinking VNODEPAGER is an option; netbsd pr#2757, erik@@aarhus1.uni-c.dk
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.6 1996/08/31 02:09:23 deraadt Exp $
a38 3
options		COMPAT_09
options		COMPAT_10
options		MACHINE_NONCONTIG
@


1.6
log
@disable TCP_COMPAT_42
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.5 1996/08/10 21:37:41 briggs Exp $
d17 1
a17 1
options		SWAPPAGER, VNODEPAGER, DEVPAGER	# paging
@


1.5
log
@Sync with NetBSD.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.4 1996/05/26 18:35:09 briggs Exp $
d31 1
a31 1
options		TCP_COMPAT_42	# compatibility with 4.2BSD TCP/IP
@


1.4
log
@Add OpenBSD Id string.
@
text
@d1 2
a2 2
#	$OpenBSD$
#	$NetBSD: RAMDISK,v 1.5 1996/05/19 22:29:08 scottr Exp $
d55 3
@


1.3
log
@Sync with NetBSD-current.
@
text
@d1 1
@


1.2
log
@netbsd -> bsd in the config files

Bring in a number of changes from NetBSD in Makefile.mac68k
(standardized amongst most ports).
@
text
@d1 1
a1 1
#	$NetBSD: RAMDISK,v 1.1 1995/11/21 05:02:02 briggs Exp $
d34 2
a35 1
options		M68030		# Includes the 020+851
d44 1
a44 1
rd0 at mainbus?
d46 8
a53 1
ae*	at nubus0	slot -1   id ?   claimed 0
d64 1
@


1.1
log
@update from netbsd (without losing local changes)
@
text
@d41 1
a41 1
config		netbsd	root on rd0a swap on rd0b
@
