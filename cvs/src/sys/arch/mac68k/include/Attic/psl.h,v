head	1.7;
access;
symbols
	OPENBSD_5_1_BASE:1.6
	OPENBSD_5_1:1.6.0.62
	OPENBSD_5_0:1.6.0.60
	OPENBSD_5_0_BASE:1.6
	OPENBSD_4_9:1.6.0.58
	OPENBSD_4_9_BASE:1.6
	OPENBSD_4_8:1.6.0.56
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.6.0.52
	OPENBSD_4_7_BASE:1.6
	OPENBSD_4_6:1.6.0.54
	OPENBSD_4_6_BASE:1.6
	OPENBSD_4_5:1.6.0.50
	OPENBSD_4_5_BASE:1.6
	OPENBSD_4_4:1.6.0.48
	OPENBSD_4_4_BASE:1.6
	OPENBSD_4_3:1.6.0.46
	OPENBSD_4_3_BASE:1.6
	OPENBSD_4_2:1.6.0.44
	OPENBSD_4_2_BASE:1.6
	OPENBSD_4_1:1.6.0.42
	OPENBSD_4_1_BASE:1.6
	OPENBSD_4_0:1.6.0.40
	OPENBSD_4_0_BASE:1.6
	OPENBSD_3_9:1.6.0.38
	OPENBSD_3_9_BASE:1.6
	OPENBSD_3_8:1.6.0.36
	OPENBSD_3_8_BASE:1.6
	OPENBSD_3_7:1.6.0.34
	OPENBSD_3_7_BASE:1.6
	OPENBSD_3_6:1.6.0.32
	OPENBSD_3_6_BASE:1.6
	SMP_SYNC_A:1.6
	SMP_SYNC_B:1.6
	OPENBSD_3_5:1.6.0.30
	OPENBSD_3_5_BASE:1.6
	OPENBSD_3_4:1.6.0.28
	OPENBSD_3_4_BASE:1.6
	UBC_SYNC_A:1.6
	OPENBSD_3_3:1.6.0.26
	OPENBSD_3_3_BASE:1.6
	OPENBSD_3_2:1.6.0.24
	OPENBSD_3_2_BASE:1.6
	OPENBSD_3_1:1.6.0.22
	OPENBSD_3_1_BASE:1.6
	UBC_SYNC_B:1.6
	UBC:1.6.0.20
	UBC_BASE:1.6
	OPENBSD_3_0:1.6.0.18
	OPENBSD_3_0_BASE:1.6
	OPENBSD_2_9:1.6.0.16
	OPENBSD_2_9_BASE:1.6
	NIKLAS_UNDEAD:1.6.0.14
	OPENBSD_2_8:1.6.0.12
	OPENBSD_2_8_BASE:1.6
	OPENBSD_2_7:1.6.0.10
	OPENBSD_2_7_BASE:1.6
	SMP:1.6.0.8
	SMP_BASE:1.6
	kame_19991208:1.6
	OPENBSD_2_6:1.6.0.6
	OPENBSD_2_6_BASE:1.6
	OPENBSD_2_5:1.6.0.4
	OPENBSD_2_5_BASE:1.6
	OPENBSD_2_4:1.6.0.2
	OPENBSD_2_4_BASE:1.6
	OPENBSD_2_3:1.5.0.8
	OPENBSD_2_3_BASE:1.5
	OPENBSD_2_2:1.5.0.6
	OPENBSD_2_2_BASE:1.5
	OPENBSD_2_1:1.5.0.4
	OPENBSD_2_1_BASE:1.5
	OPENBSD_2_0:1.5.0.2
	OPENBSD_2_0_BASE:1.5
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@ * @;


1.7
date	2012.06.20.18.23.52;	author matthew;	state dead;
branches;
next	1.6;

1.6
date	98.05.03.07.10.48;	author gene;	state Exp;
branches;
next	1.5;

1.5
date	96.06.23.16.24.06;	author briggs;	state Exp;
branches;
next	1.4;

1.4
date	96.05.26.18.36.00;	author briggs;	state Exp;
branches;
next	1.3;

1.3
date	96.05.26.18.14.12;	author briggs;	state Exp;
branches;
next	1.2;

1.2
date	96.02.20.05.38.45;	author briggs;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.51.06;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.51.06;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.7
log
@RIP mac68k.  No one loves you anymore.
@
text
@/*	$OpenBSD: psl.h,v 1.6 1998/05/03 07:10:48 gene Exp $	*/
/*	$NetBSD: psl.h,v 1.11 1996/06/21 21:51:15 briggs Exp $	*/

#include <m68k/psl.h>
@


1.6
log
@* Deprecate macinfo.h pulling all relevant defines into cpu.h.
* Move interrupt glue and associated stuff out to intr.h
* Do some MIification.
This brings us a lot closer to looking like the other ports.
@
text
@d1 1
a1 1
/*	$OpenBSD: psl.h,v 1.5 1996/06/23 16:24:06 briggs Exp $	*/
@


1.5
log
@Sync up with NetBSD.
@
text
@d1 1
a1 1
/*	$OpenBSD: psl.h,v 1.4 1996/05/26 18:36:00 briggs Exp $	*/
a3 1
#ifndef PSL_C
a4 53

#if defined(_KERNEL) && !defined(_LOCORE)
/*
 * spl functions; all but spl0 are done in-line
 */

#define _spl(s) \
({ \
        register int _spl_r; \
\
        __asm __volatile ("clrl %0; movew sr,%0; movew %1,sr" : \
                "&=d" (_spl_r) : "di" (s)); \
        _spl_r; \
})

/* spl0 requires checking for software interrupts */
#define spl1()  _spl(PSL_S|PSL_IPL1)
#define spl2()  _spl(PSL_S|PSL_IPL2)
#define spl3()  _spl(PSL_S|PSL_IPL3)
#define spl4()  _spl(PSL_S|PSL_IPL4)
#define spl5()  _spl(PSL_S|PSL_IPL5)
#define spl6()  _spl(PSL_S|PSL_IPL6)
#define spl7()  _spl(PSL_S|PSL_IPL7)

/*
 * These should be used for:
 * 1) ensuring mutual exclusion (why use processor level?)
 * 2) allowing faster devices to take priority
 *
 * Note that on the Mac, most things are masked at spl1, almost
 * everything at spl2, and everything but the panic switch and
 * power at spl4.
 */
#define	splsoftclock()	spl1()	/* disallow softclock */
#define	splsoftnet()	spl1()	/* disallow network */
#define	spltty()	spl1()	/* disallow tty (softserial & ADB) */
#define	splbio()	spl2()	/* disallow block I/O */
#define	splnet()	spl2()	/* disallow network */
#define	splimp()	spl2()	/* mutual exclusion for memory allocation */
#define	splclock()	spl2()	/* disallow clock (and other) interrupts */
#define	splstatclock()	spl2()	/* ditto */
#define	splzs()		spl4()	/* disallow serial hw interrupts */
#define	splhigh()	spl7()	/* disallow everything */
#define	splsched()	spl7()	/* disallow scheduling */

/* watch out for side effects */
#define splx(s)         ((s) & PSL_IPL ? _spl(s) : spl0())

int	spl0 __P((void));

#endif /* _KERNEL && !_LOCORE */

#endif /* ndef PSL_C */
@


1.4
log
@Add OpenBSD Id string.
@
text
@d1 2
a2 2
/*	$OpenBSD$	*/
/*	$NetBSD: psl.h,v 1.9 1996/05/19 04:30:32 briggs Exp $	*/
d44 1
a44 1
#define	splimp()	spl2()	/* disallow goblins and other nonsense */
@


1.3
log
@Sync with NetBSD-current.
@
text
@d1 1
@


1.2
log
@A few more things from NetBSD:
- Move spl stuff from param.h to psl.h.  Prototype delay() in param.h.
- param.h: Fix #includes.
- param.h: Move splimp to 2 and spltty to 1.
@
text
@d1 1
a1 1
/*	$NetBSD: psl.h,v 1.5 1996/02/17 14:50:42 briggs Exp $	*/
d29 8
a36 7
/* These should be used for:
   1) ensuring mutual exclusion (why use processor level?)
   2) allowing faster devices to take priority

   Note that on the mac, most things are masked at spl1, almost
   everything at spl2, and everything but the panic switch and
   power at spl4.
d38 11
a48 11
#define splsoftclock()  spl1()	/* disallow softclock */
#define splsoftnet()    spl1()	/* disallow network */
#define splclock()      spl1()	/* disallow clock interrupt */
#define spltty()        spl1()	/* disallow tty (softserial&adb) interrupts */
#define splbio()        spl2()	/* disallow block I/O */
#define splnet()        spl2()	/* disallow network */
#define splimp()        spl2()	/* disallow imput */
#define splhigh()       spl7()	/* disallow everything */
#define splsched()      spl7()	/* disallow scheduling */

#define splstatclock()  spl2()	/* This should be splclock... */
d52 2
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
/*	$NetBSD: psl.h,v 1.4 1994/10/26 08:46:42 cgd Exp $	*/
d3 1
d5 50
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
