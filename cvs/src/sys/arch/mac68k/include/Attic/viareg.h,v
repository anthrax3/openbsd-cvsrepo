head	1.21;
access;
symbols
	OPENBSD_5_1_BASE:1.20
	OPENBSD_5_1:1.20.0.4
	OPENBSD_5_0:1.20.0.2
	OPENBSD_5_0_BASE:1.20
	OPENBSD_4_9:1.19.0.14
	OPENBSD_4_9_BASE:1.19
	OPENBSD_4_8:1.19.0.12
	OPENBSD_4_8_BASE:1.19
	OPENBSD_4_7:1.19.0.8
	OPENBSD_4_7_BASE:1.19
	OPENBSD_4_6:1.19.0.10
	OPENBSD_4_6_BASE:1.19
	OPENBSD_4_5:1.19.0.6
	OPENBSD_4_5_BASE:1.19
	OPENBSD_4_4:1.19.0.4
	OPENBSD_4_4_BASE:1.19
	OPENBSD_4_3:1.19.0.2
	OPENBSD_4_3_BASE:1.19
	OPENBSD_4_2:1.18.0.8
	OPENBSD_4_2_BASE:1.18
	OPENBSD_4_1:1.18.0.6
	OPENBSD_4_1_BASE:1.18
	OPENBSD_4_0:1.18.0.4
	OPENBSD_4_0_BASE:1.18
	OPENBSD_3_9:1.18.0.2
	OPENBSD_3_9_BASE:1.18
	OPENBSD_3_8:1.15.0.4
	OPENBSD_3_8_BASE:1.15
	OPENBSD_3_7:1.15.0.2
	OPENBSD_3_7_BASE:1.15
	OPENBSD_3_6:1.10.0.12
	OPENBSD_3_6_BASE:1.10
	SMP_SYNC_A:1.10
	SMP_SYNC_B:1.10
	OPENBSD_3_5:1.10.0.10
	OPENBSD_3_5_BASE:1.10
	OPENBSD_3_4:1.10.0.8
	OPENBSD_3_4_BASE:1.10
	UBC_SYNC_A:1.10
	OPENBSD_3_3:1.10.0.6
	OPENBSD_3_3_BASE:1.10
	OPENBSD_3_2:1.10.0.4
	OPENBSD_3_2_BASE:1.10
	OPENBSD_3_1:1.10.0.2
	OPENBSD_3_1_BASE:1.10
	UBC_SYNC_B:1.10
	UBC:1.8.0.4
	UBC_BASE:1.8
	OPENBSD_3_0:1.8.0.2
	OPENBSD_3_0_BASE:1.8
	OPENBSD_2_9:1.7.0.18
	OPENBSD_2_9_BASE:1.7
	NIKLAS_UNDEAD:1.7.0.16
	OPENBSD_2_8:1.7.0.14
	OPENBSD_2_8_BASE:1.7
	OPENBSD_2_7:1.7.0.12
	OPENBSD_2_7_BASE:1.7
	SMP:1.7.0.10
	SMP_BASE:1.7
	kame_19991208:1.7
	OPENBSD_2_6:1.7.0.8
	OPENBSD_2_6_BASE:1.7
	OPENBSD_2_5:1.7.0.6
	OPENBSD_2_5_BASE:1.7
	OPENBSD_2_4:1.7.0.4
	OPENBSD_2_4_BASE:1.7
	OPENBSD_2_3:1.7.0.2
	OPENBSD_2_3_BASE:1.7
	OPENBSD_2_2:1.6.0.4
	OPENBSD_2_2_BASE:1.6
	OPENBSD_2_1:1.6.0.2
	OPENBSD_2_1_BASE:1.6
	OPENBSD_2_0:1.3.0.2
	OPENBSD_2_0_BASE:1.3;
locks; strict;
comment	@ * @;


1.21
date	2012.06.20.18.23.52;	author matthew;	state dead;
branches;
next	1.20;

1.20
date	2011.03.23.16.54.36;	author pirofti;	state Exp;
branches;
next	1.19;

1.19
date	2007.09.10.20.29.48;	author miod;	state Exp;
branches;
next	1.18;

1.18
date	2006.01.13.21.02.01;	author miod;	state Exp;
branches;
next	1.17;

1.17
date	2006.01.01.13.16.01;	author miod;	state Exp;
branches;
next	1.16;

1.16
date	2005.09.27.07.15.19;	author martin;	state Exp;
branches;
next	1.15;

1.15
date	2005.02.06.19.51.35;	author martin;	state Exp;
branches;
next	1.14;

1.14
date	2005.01.11.21.07.19;	author martin;	state Exp;
branches;
next	1.13;

1.13
date	2004.12.08.06.59.45;	author miod;	state Exp;
branches;
next	1.12;

1.12
date	2004.12.01.21.19.12;	author miod;	state Exp;
branches;
next	1.11;

1.11
date	2004.11.26.21.21.27;	author miod;	state Exp;
branches;
next	1.10;

1.10
date	2002.03.14.03.15.55;	author millert;	state Exp;
branches;
next	1.9;

1.9
date	2002.03.14.01.26.35;	author millert;	state Exp;
branches;
next	1.8;

1.8
date	2001.05.08.17.30.40;	author aaron;	state Exp;
branches
	1.8.4.1;
next	1.7;

1.7
date	97.11.30.06.10.37;	author gene;	state Exp;
branches
	1.7.10.1;
next	1.6;

1.6
date	97.03.08.16.17.01;	author briggs;	state Exp;
branches;
next	1.5;

1.5
date	97.01.24.01.35.41;	author briggs;	state Exp;
branches;
next	1.4;

1.4
date	96.10.28.14.49.08;	author briggs;	state Exp;
branches;
next	1.3;

1.3
date	96.06.08.16.21.14;	author briggs;	state Exp;
branches;
next	1.2;

1.2
date	96.05.26.18.36.10;	author briggs;	state Exp;
branches;
next	1.1;

1.1
date	96.05.26.18.14.17;	author briggs;	state Exp;
branches;
next	;

1.7.10.1
date	2001.07.04.10.18.34;	author niklas;	state Exp;
branches;
next	1.7.10.2;

1.7.10.2
date	2002.03.28.10.34.05;	author niklas;	state Exp;
branches;
next	;

1.8.4.1
date	2002.06.11.03.36.19;	author art;	state Exp;
branches;
next	;


desc
@@


1.21
log
@RIP mac68k.  No one loves you anymore.
@
text
@/*	$OpenBSD: viareg.h,v 1.20 2011/03/23 16:54:36 pirofti Exp $	*/
/*	$NetBSD: viareg.h,v 1.6 1997/02/28 07:41:41 scottr Exp $	*/

/*-
 * Copyright (C) 1993	Allen K. Briggs, Chris P. Caputo,
 *			Michael L. Finch, Bradley A. Grantham, and
 *			Lawrence A. Kesteloot
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. All advertising materials mentioning features or use of this software
 *    must display the following acknowledgement:
 *	This product includes software developed by the Alice Group.
 * 4. The names of the Alice Group or any of its members may not be used
 *    to endorse or promote products derived from this software without
 *    specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE ALICE GROUP ``AS IS'' AND ANY EXPRESS OR
 * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
 * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE ALICE GROUP BE LIABLE FOR ANY DIRECT, INDIRECT,
 * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
 * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */

/*
 * Prototype VIA control definitions
 */
#ifndef _MACHINE_VIAREG_H_
#define _MACHINE_VIAREG_H_

/* VIA1 data register A */
#define DA1I_vSCCWrReq	0x80
#define DA1O_vPage2	0x40
#define DA1I_CPU_ID1	0x40
#define DA1O_vHeadSel	0x20
#define DA1O_vOverlay	0x10
#define DA1O_vSync	0x08
#define DA1O_RESERVED2	0x04
#define DA1O_RESERVED1	0x02
#define DA1O_RESERVED0	0x01

/* VIA1 data register B */
#define DB1I_Par_Err	0x80
#define DB1O_vSndEnb	0x80
#define DB1O_Par_Enb	0x40
#define	DB1O_AuxIntEnb	0x40	/* 0 = enabled, 1 = disabled */
#define DB1O_vFDesk2	0x20
#define DB1O_vFDesk1	0x10
#define DB1I_vFDBInt	0x08
#define DB1O_rTCEnb	0x04
#define DB1O_rTCCLK	0x02
#define DB1O_rTCData	0x01
#define DB1I_rTCData	0x01

/* VIA2 data register A */
#define DA2O_v2Ram1	0x80
#define DA2O_v2Ram0	0x40
#define DA2I_v2IRQ0	0x40
#define DA2I_v2IRQE	0x20
#define DA2I_v2IRQD	0x10
#define DA2I_v2IRQC	0x08
#define DA2I_v2IRQB	0x04
#define DA2I_v2IRQA	0x02
#define DA2I_v2IRQ9	0x01

/* VIA2 data register B */
#define DB2O_v2VBL	0x80
#define DB2O_Par_Test	0x80
#define DB2I_v2SNDEXT	0x40
#define DB2I_v2TM0A	0x20
#define DB2I_v2TM1A	0x10
#define DB2I_vFC3	0x08
#define DB2O_vFC3	0x08
#define DB2O_v2PowerOff	0x04
#define DB2O_v2BusLk	0x02
#define DB2O_vCDis	0x01
#define DB2O_CEnable	0x01

/*
 * VIA1 interrupts
 */
#define	VIA1_T1		6
#define	VIA1_T2		5
#define	VIA1_ADBCLK	4
#define	VIA1_ADBDATA	3
#define	VIA1_ADBRDY	2
#define	VIA1_VBLNK	1
#define	VIA1_ONESEC	0

/* VIA1 interrupt bits */
#define V1IF_IRQ	0x80
#define V1IF_T1		(1 << VIA1_T1)
#define V1IF_T2		(1 << VIA1_T2)
#define V1IF_ADBCLK	(1 << VIA1_ADBCLK)
#define V1IF_ADBDATA	(1 << VIA1_ADBDATA)
#define V1IF_ADBRDY	(1 << VIA1_ADBRDY)
#define V1IF_VBLNK	(1 << VIA1_VBLNK)
#define V1IF_ONESEC	(1 << VIA1_ONESEC)

/*
 * VIA2 interrupts
 */
#define VIA2_T1		6
#define VIA2_T2		5
#define VIA2_ASC	4
#define VIA2_SCSIIRQ	3
#define VIA2_EXPIRQ	2
#define VIA2_SLOTINT	1
#define VIA2_SCSIDRQ	0

/* VIA2 interrupt bits */
#define	V2IF_IRQ	0x80
#define	V2IF_T1		(1 << VIA2_T1)
#define	V2IF_T2		(1 << VIA2_T2)
#define	V2IF_ASC	(1 << VIA2_ASC)
#define	V2IF_SCSIIRQ	(1 << VIA2_SCSIIRQ)
#define	V2IF_EXPIRQ	(1 << VIA2_EXPIRQ)
#define	V2IF_SLOTINT	(1 << VIA2_SLOTINT)
#define	V2IF_SCSIDRQ	(1 << VIA2_SCSIDRQ)

#define VIA1_INTS	(V1IF_T1 | V1IF_ADBRDY)
#define VIA2_INTS	(V2IF_T1 | V2IF_ASC | V2IF_SCSIIRQ | V2IF_SLOTINT | \
			 V2IF_SCSIDRQ)

#define RBV_INTS	(V2IF_T1 | V2IF_ASC | V2IF_SCSIIRQ | V2IF_SLOTINT | \
			 V2IF_SCSIDRQ | V1IF_ADBRDY)

#define ACR_T1LATCH	0x40

extern volatile unsigned char *Via1Base;
extern volatile unsigned char *Via2Base;	/* init in VIA_Initialize */
#define VIA1_addr	Via1Base	/* at PA 0x50f00000 */

#define VIA2OFF		1		/* VIA2 addr = VIA1_addr + 0x2000 */
#define RBVOFF		0x13		/* RBV addr = VIA1_addr + 0x26000 */
#define OSSOFF		0xd		/* OSS addr = VIA1_addr + 0x1A000 */

#define VIA1		0
extern int VIA2;

	/* VIA interface registers */
#define vBufA		0x1e00	/* register A */
#define vBufB		0	/* register B */
#define vDirA		0x0600	/* data direction register */
#define vDirB		0x0400	/* data direction register */
#define vT1C		0x0800
#define vT1CH		0x0a00
#define vT1L		0x0c00
#define vT1LH		0x0e00
#define vT2C		0x1000
#define vT2CH		0x1200
#define vSR		0x1400	/* shift register */
#define vACR		0x1600	/* aux control register */
#define vPCR		0x1800	/* peripheral control register */
#define vIFR		0x1a00	/* interrupt flag register */
#define vIER		0x1c00	/* interrupt enable register */

/* RBV interface registers */
#define rBufB		0	/* register B */
#define rBufA		2	/* register A */
#define rIFR		0x3	/* interrupt flag register (writes?) */
#define rIER		0x13	/* interrupt enable register */
#define rMonitor	0x10	/* Monitor type */
#define rSlotInt	0x12	/* Slot interrupt */

/* RBV monitor type flags and masks */
#define RBVDepthMask	0x07	/* Depth in bits */
#define RBVMonitorMask	0x38	/* Type numbers */
#define RBVOff		0x40	/* Monitor turned off */
#define RBVMonIDBWP	0x08	/* 15 inch BW portrait */
#define RBVMonIDRGB12	0x10	/* 12 inch color */
#define RBVMonIDRGB15	0x28	/* 15 inch RGB */
#define RBVMonIDStd	0x30	/* 12 inch BW or 13 inch color */
#define RBVMonIDNone	0x38	/* No monitor connected */

/* OSS registers */
#define OSS_IFR		0x202
#define OSS_PENDING_IRQ (*(volatile u_short *)(Via2Base + (OSS_IFR)))

#define OSS_oRCR	0x204
#define OSS_POWEROFF	0x80

#define via_reg(v, r) (*(Via1Base+(v)*0x2000+(r)))
#define via2_reg(r) (*(Via2Base+(r)))

#define vDirA_ADBState	0x30

#ifdef _KERNEL
/* VIA2 interrupts may be shared */
struct via2hand {
	SLIST_ENTRY(via2hand)	v2h_link;
	struct intrhand 	v2h_ih;
#define	vh_fn		v2h_ih.ih_fn
#define	vh_arg		v2h_ih.ih_arg
#define	vh_ipl		v2h_ih.ih_ipl
#define	vh_count	v2h_ih.ih_count
};
typedef SLIST_HEAD(, via2hand)	via2hand_t;

void	via_init(void);
void	via_powerdown(void);
void	via_set_modem(int);
void	add_nubus_intr(int, int, int (*)(void *), void *, const char *);
void	enable_nubus_intr(void);
void	via1_register_irq(int, int (*)(void *), void *, const char *);
int	via2_register_irq(struct via2hand *, const char *);
#endif	/* _KERNEL */

#endif	/* _MACHINE_VIAREG_H_ */
@


1.20
log
@Normalize sentinel. Use _MACHINE_*_H_ and _<ARCH>_*_H_ properly and consitently.

Discussed and okay drahn@@. Okay deraadt@@.
@
text
@d1 1
a1 1
/*	$OpenBSD: viareg.h,v 1.19 2007/09/10 20:29:48 miod Exp $	*/
@


1.19
log
@Pass a real ipl level to add_nubus_intr(), and make sure the interrupt
handler is invoked with spl raised to the given level, otherwise all nubus
interrupts are processed at level 2.
@
text
@d1 1
a1 1
/*	$OpenBSD: viareg.h,v 1.18 2006/01/13 21:02:01 miod Exp $	*/
d41 2
a42 2
#ifndef _MAC68K_VIAREG_H_
#define _MAC68K_VIAREG_H_
d222 1
a222 1
#endif	/* _MAC68K_VIAREG_H_ */
@


1.18
log
@Sync OSS code with NetBSD; supports poweroff now.
@
text
@d1 1
a1 1
/*	$OpenBSD: viareg.h,v 1.17 2006/01/01 13:16:01 miod Exp $	*/
d216 1
a216 1
void	add_nubus_intr(int, int (*)(void *), void *, const char *);
@


1.17
log
@Enable A/UX style interrupt routing on non-AV Centrises and Quadras, gives us
smarter spl levels and the clock drift is reduced; adapted from NetBSD.
@
text
@d1 1
a1 1
/*	$OpenBSD: viareg.h,v 1.16 2005/09/27 07:15:19 martin Exp $	*/
d146 3
a148 2
#define VIA2OFF		1		/* VIA2 addr = VIA1_addr * 0x2000 */
#define RBVOFF		0x13		/* RBV addr = VIA1_addr * 0x13000 */
@


1.16
log
@missing pieces for RBV video handling

from NetBSD
@
text
@d1 1
a1 1
/*	$OpenBSD: viareg.h,v 1.15 2005/02/06 19:51:35 martin Exp $	*/
d59 1
@


1.15
log
@- get rid of unused code
- KNF
- typos
- sync some parts with NetBSD

input and review by miod@@
@
text
@d1 1
a1 1
/*	$OpenBSD: viareg.h,v 1.14 2005/01/11 21:07:19 martin Exp $	*/
d182 1
a182 1
#define RBVMonIDRGB	0x10	/* 12 inch colorr */
@


1.14
log
@rename via_shutdown() to via_powerdown() and remove unused prototype to
shrink diff to NetBSD

ok miod
@
text
@d1 1
a1 1
/*	$OpenBSD: viareg.h,v 1.13 2004/12/08 06:59:45 miod Exp $	*/
d147 1
d163 1
a163 1
#define vSR			0x1400	/* shift register */
d178 1
a178 1
#define RBVDepthMask	0x07	/* depth in bits */
d180 3
a182 5
#define RBVOff		0x40	/* monitor turn off */
#define RBVMonIDNone	0x38	/* What RBV actually has for no video */
#define RBVMonIDOff	0x0	/* What rbv_vidstatus() returns for no video */
#define RBVMonID15BWP	0x08	/* BW portrait */
#define RBVMonIDRGB	0x10	/* color monitor */
d184 9
a192 1
#define RBVMonIDBW	0x30	/* No internal video */
a211 1
int	rbv_vidstatus(void);
@


1.13
log
@Tweak interrupt handling code to allow shared interrupts for VIA2 sources.
This will be necessary shortly.
@
text
@d1 1
a1 1
/*	$OpenBSD: viareg.h,v 1.12 2004/12/01 21:19:12 miod Exp $	*/
d206 1
a206 1
void	via_shutdown(void);
@


1.12
log
@Let kernels with option DEBUG link again.
@
text
@d1 1
a1 1
/*	$OpenBSD: viareg.h,v 1.11 2004/11/26 21:21:27 miod Exp $	*/
d193 11
d211 1
a211 1
void	via2_register_irq(int, int (*)(void *), void *, const char *);
@


1.11
log
@More interrupt system cleaning and homogenization:
- switch all interrupt functions to an int (*)(void *) prototype.
- do not register dummy functions for all unhandled interrupts, instead
  let the dispatchers cope with NULL.
- add evcount interrupt counters.
@
text
@d1 1
a1 1
/*	$OpenBSD: viareg.h,v 1.10 2002/03/14 03:15:55 millert Exp $	*/
a200 3

extern void	(*via1itab[7])(void *);
extern void	(*via2itab[7])(void *);
@


1.10
log
@Final __P removal plus some cosmetic fixups
@
text
@d1 1
a1 1
/*	$OpenBSD: viareg.h,v 1.9 2002/03/14 01:26:35 millert Exp $	*/
d197 1
a197 1
int	add_nubus_intr(int, void (*)(void *, int), void *);
d199 2
a200 2
void	via1_register_irq(int, void (*)(void *), void *);
void	via2_register_irq(int, void (*)(void *), void *);
@


1.9
log
@First round of __P removal in sys
@
text
@d1 1
a1 1
/*	$OpenBSD: viareg.h,v 1.8 2001/05/08 17:30:40 aaron Exp $	*/
d197 1
a197 1
int	add_nubus_intr   __P((int, void (*)(void *, int), void *));
d199 2
a200 2
void	via1_register_irq __P((int, void (*)(void *), void *));
void	via2_register_irq __P((int, void (*)(void *), void *));
@


1.8
log
@Substantial update from NetBSD, most notably gives us UVM support; deraadt@@ ok
@
text
@d1 1
a1 1
/*	$OpenBSD: viareg.h,v 1.7 1997/11/30 06:10:37 gene Exp $	*/
d193 6
a198 6
void	via_init __P((void));
int	rbv_vidstatus    __P((void));
void	via_shutdown __P((void));
void	via_set_modem __P((int));
int	add_nubus_intr   __P((int, void (*) __P((void *, int)), void *));
void	enable_nubus_intr __P((void));
d202 2
a203 2
extern void	(*via1itab[7]) __P((void *));
extern void	(*via2itab[7]) __P((void *));
@


1.8.4.1
log
@Sync UBC branch to -current
@
text
@d1 1
a1 1
/*	$OpenBSD: viareg.h,v 1.8 2001/05/08 17:30:40 aaron Exp $	*/
d193 8
a200 8
void	via_init(void);
int	rbv_vidstatus(void);
void	via_shutdown(void);
void	via_set_modem(int);
int	add_nubus_intr(int, void (*)(void *, int), void *);
void	enable_nubus_intr(void);
void	via1_register_irq(int, void (*)(void *), void *);
void	via2_register_irq(int, void (*)(void *), void *);
d202 2
a203 2
extern void	(*via1itab[7])(void *);
extern void	(*via2itab[7])(void *);
@


1.7
log
@Add multiple inclusion protection, clean up comments, and wrap with _KERNEL
where appropriate.  Note that this buys us notable speed boosts on a machine
as slow as the mac68k.
@
text
@d1 1
a1 1
/*	$OpenBSD: viareg.h,v 1.6 1997/03/08 16:17:01 briggs Exp $	*/
d193 1
a193 1
void	VIA_initialize   __P((void));
@


1.7.10.1
log
@Merge in -current from two days ago in the SMP branch.
As usual with merges, they do not indicate progress, so do not hold
your breath for working SMP, and do not mail me and ask about the
state of it.  It has not changed.  There is work ongoing, but very, very
slowly.  The commit is done in parts as to not lock up the tree in too
big chunks at a time.
@
text
@d1 1
a1 1
/*	$OpenBSD: viareg.h,v 1.7 1997/11/30 06:10:37 gene Exp $	*/
d193 1
a193 1
void	via_init __P((void));
@


1.7.10.2
log
@Merge in -current from about a week ago
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
d193 8
a200 8
void	via_init(void);
int	rbv_vidstatus(void);
void	via_shutdown(void);
void	via_set_modem(int);
int	add_nubus_intr(int, void (*)(void *, int), void *);
void	enable_nubus_intr(void);
void	via1_register_irq(int, void (*)(void *), void *);
void	via2_register_irq(int, void (*)(void *), void *);
d202 2
a203 2
extern void	(*via1itab[7])(void *);
extern void	(*via2itab[7])(void *);
@


1.6
log
@Sync with NetBSD of about 4 March.
@
text
@d1 1
a1 1
/*	$OpenBSD: viareg.h,v 1.5 1997/01/24 01:35:41 briggs Exp $	*/
d37 1
d39 4
d44 1
a44 8
	Prototype VIA control definitions

	06/04/92,22:33:57 BG Let's see what I can do.

*/


	/* VIA1 data register A */
d55 1
a55 1
	/* VIA1 data register B */
d67 1
a67 1
	/* VIA2 data register A */
d78 1
a78 1
	/* VIA2 data register B */
d168 1
a168 1
	/* RBV interface registers */
d176 1
a176 1
	/* RBV monitor type flags and masks */
d192 1
d204 3
@


1.5
log
@Sync w/ NETBSD_CURRENT_971122.
@
text
@d1 2
a2 2
/*	$OpenBSD: viareg.h,v 1.4 1996/10/28 14:49:08 briggs Exp $	*/
/*	$NetBSD: viareg.h,v 1.5 1996/10/29 05:42:16 briggs Exp $	*/
d93 12
a104 1
	/* VIA1 interrupt bits */
d106 28
a133 17
#define V1IF_T1		0x40
#define V1IF_T2		0x20
#define V1IF_ADBCLK	0x10
#define V1IF_ADBDATA	0x08
#define V1IF_ADBRDY	0x04
#define V1IF_VBLNK	0x02
#define V1IF_ONESEC	0x01

	/* VIA2 interrupt bits */
#define V2IF_IRQ	0x80
#define V2IF_T1		0x40
#define V2IF_T2		0x20
#define V2IF_ASC	0x10
#define V2IF_SCSIIRQ	0x08
#define V2IF_EXPIRQ	0x04
#define V2IF_SLOTINT	0x02
#define V2IF_SCSIDRQ	0x01
d200 2
a201 4
void	mac68k_register_scsi_irq __P((void (*)(void *), void *clnt));
void	mac68k_register_scsi_b_irq __P((void (*)(void *), void *clnt));
void	mac68k_register_scsi_drq __P((void (*)(void *), void *clnt));
void	mac68k_register_via1_t1_irq __P((void (*)(void *)));
@


1.4
log
@Add prototype for function to install SCSI-B IRQ.
@
text
@d1 2
a2 2
/*	$OpenBSD: viareg.h,v 1.3 1996/06/08 16:21:14 briggs Exp $	*/
/*	$NetBSD: viareg.h,v 1.4 1996/06/07 10:41:37 briggs Exp $	*/
@


1.3
log
@Sync up with latest NetBSD.
@
text
@d1 1
a1 1
/*	$OpenBSD: viareg.h,v 1.2 1996/05/26 18:36:10 briggs Exp $	*/
d179 1
@


1.2
log
@Add OpenBSD Id string.
@
text
@d1 2
a2 2
/*	$OpenBSD$	*/
/*	$NetBSD: viareg.h,v 1.3 1996/05/05 06:18:07 briggs Exp $	*/
d175 1
@


1.1
log
@Sync with NetBSD-current.
@
text
@d1 1
@
