head	1.20;
access;
symbols
	OPENBSD_5_4:1.19.0.2
	OPENBSD_5_4_BASE:1.19
	OPENBSD_5_3:1.11.0.6
	OPENBSD_5_3_BASE:1.11
	OPENBSD_5_2:1.11.0.4
	OPENBSD_5_2_BASE:1.11
	OPENBSD_5_1_BASE:1.11
	OPENBSD_5_1:1.11.0.2
	OPENBSD_5_0:1.7.0.2
	OPENBSD_5_0_BASE:1.7
	OPENBSD_4_9:1.5.0.2
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.4.0.2
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.3.0.2
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.1.0.4
	OPENBSD_4_6_BASE:1.1;
locks; strict;
comment	@# @;


1.20
date	2013.09.04.14.38.35;	author patrick;	state dead;
branches;
next	1.19;

1.19
date	2013.06.11.19.19.43;	author rapha;	state Exp;
branches;
next	1.18;

1.18
date	2013.06.05.17.56.32;	author rapha;	state Exp;
branches;
next	1.17;

1.17
date	2013.06.05.15.03.23;	author bmercer;	state Exp;
branches;
next	1.16;

1.16
date	2013.05.22.17.44.47;	author rapha;	state Exp;
branches;
next	1.15;

1.15
date	2013.05.21.14.41.05;	author rapha;	state Exp;
branches;
next	1.14;

1.14
date	2013.05.09.15.16.53;	author patrick;	state Exp;
branches;
next	1.13;

1.13
date	2013.05.01.00.16.26;	author patrick;	state Exp;
branches;
next	1.12;

1.12
date	2013.03.27.17.33.13;	author patrick;	state Exp;
branches;
next	1.11;

1.11
date	2011.11.10.19.37.01;	author uwe;	state Exp;
branches;
next	1.10;

1.10
date	2011.11.05.12.30.58;	author drahn;	state Exp;
branches;
next	1.9;

1.9
date	2011.10.24.22.49.07;	author drahn;	state Exp;
branches;
next	1.8;

1.8
date	2011.10.21.22.55.01;	author drahn;	state Exp;
branches;
next	1.7;

1.7
date	2011.05.15.08.52.48;	author matthieu;	state Exp;
branches;
next	1.6;

1.6
date	2011.03.14.15.09.28;	author drahn;	state Exp;
branches;
next	1.5;

1.5
date	2010.12.06.20.10.17;	author jasper;	state Exp;
branches;
next	1.4;

1.4
date	2010.06.01.03.01.02;	author drahn;	state Exp;
branches;
next	1.3;

1.3
date	2010.02.12.05.36.10;	author drahn;	state Exp;
branches;
next	1.2;

1.2
date	2010.02.10.20.40.09;	author drahn;	state Exp;
branches;
next	1.1;

1.1
date	2009.05.08.03.13.26;	author drahn;	state Exp;
branches;
next	;


desc
@@


1.20
log
@In the future, we shouldn't have one port port ARM SoC, that's just
ridiculous.  This is the first step for a common and generic ARM port
for ARMv7 SoCs.
@
text
@#	$OpenBSD: files.beagle,v 1.19 2013/06/11 19:19:43 rapha Exp $
#
# First try for arm-specific configuration info
#

maxpartitions	16
maxusers	2 8 64

major	{wd = 16}
major	{sd = 24}
major	{cd = 26}
major	{rd = 18}

file	arch/arm/arm/conf.c

file	arch/beagle/beagle/beagle_machdep.c

#interrupt API layer
file	arch/beagle/beagle/intr.c

# u-boot argument support
file	arch/beagle/beagle/uboot_tags.c

# note that the order of the devices in _this_ file
# affects the order that the devices will configure.

# XXX arch/arm/omap
define soc {}
device omap: soc
attach omap at mainbus
file	arch/beagle/dev/omap.c			omap
file	arch/beagle/dev/omap3.c			omap
file	arch/beagle/dev/omap4.c			omap
file	arch/beagle/dev/am335x.c		omap

include "dev/sdmmc/files.sdmmc"

device ommmc: sdmmcbus
attach ommmc at soc
file	arch/beagle/dev/ommmc.c			ommmc

# Media Independent Interface (mii)
include "dev/mii/files.mii"

device cpsw: ether, ifnet, mii, ifmedia
attach cpsw at soc
file	arch/beagle/dev/if_cpsw.c		cpsw

device prcm
attach prcm at soc
file	arch/beagle/dev/prcm.c			prcm

device sitaracm
attach sitaracm at soc
file	arch/beagle/dev/am335x_cm_padconf.c	sitaracm
file	arch/beagle/dev/sitara_cm.c		sitaracm

device omgpio
attach omgpio at soc
file   arch/beagle/dev/omgpio.c			omgpio

device intc
attach intc at soc
file	arch/beagle/dev/intc.c			intc

device gptimer
attach gptimer at soc
file	arch/beagle/dev/gptimer.c		gptimer

device dmtimer
attach dmtimer at soc
file	arch/beagle/dev/dmtimer.c		dmtimer

device omapid
attach omapid at soc
file	arch/beagle/dev/omapid.c		omapid

device omdog
attach omdog at soc
file	arch/beagle/dev/omdog.c			omdog

attach ohci at soc with omohci
file	arch/beagle/dev/omohci.c		omohci

attach ehci at soc with omehci
file	arch/beagle/dev/omehci.c		omehci

# NS16550 compatible serial ports
attach	com at soc with com_omap
file	arch/beagle/dev/omap_com.c		com_omap

device omusbtll
attach omusbtll at soc
file arch/beagle/dev/omusbtll.c			omusbtll

device omkbd: wskbddev
attach omkbd at soc
file	arch/beagle/dev/omkbd.c			omkbd

# LCD frame buffer
device omdisplay: wsemuldisplaydev, rasops16
attach omdisplay at soc
file arch/beagle/dev/omdisplay.c		omdisplay

#
# Machine-independent SCSI drivers
#
include "scsi/files.scsi"
include "dev/atapiscsi/files.atapiscsi"

# CPU support and integrated peripherals
file	arch/arm/arm/irq_dispatch.S
file	arch/arm/arm/softintr.c                         

# MCSPI - spi 
device mcspi 
attach mcspi at soc
file	arch/beagle/dev/mcspi.c			mcspi

# pseudo-Audio Device Driver
device oaudio: audio
attach oaudio at soc				# configure after Atlas Driver
file arch/beagle/dev/beagle_audio.c			oaudio

#
# Machine-independent ATA drivers
#
include "dev/ata/files.ata"

# Generic MD files
file	arch/beagle/beagle/autoconf.c

file	arch/arm/arm/disksubr.c			disk


# ARM FPE
file	arch/arm/fpe-arm/armfpe_glue.S		armfpe
file	arch/arm/fpe-arm/armfpe_init.c		armfpe
file	arch/arm/fpe-arm/armfpe.s		armfpe


# Machine-independent I2O drivers.
include "dev/i2o/files.i2o"

# Include WSCONS stuff
include "dev/wscons/files.wscons"
include "dev/rasops/files.rasops"
include "dev/wsfont/files.wsfont"

# Include USB stuff
include "dev/usb/files.usb"

# Bluetooth
include "dev/bluetooth/files.bluetooth"

#
# Machine-independent GPIO drivers
#
include "dev/gpio/files.gpio"
@


1.19
log
@Activate the sitaracm driver. (beaglebone only)

ok bmercer@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.beagle,v 1.18 2013/06/05 17:56:32 rapha Exp $
@


1.18
log
@Use the correct attach_args, + various details

ok bmercer@@, patrick@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.beagle,v 1.17 2013/06/05 15:03:23 bmercer Exp $
d53 5
d155 5
@


1.17
log
@Initial port of the cpsw driver from netbsd. This will support ethernet
on the beaglebone. This will be easier to work on in tree.
OK florian@@ dlg@@ "put it in" patrick@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.beagle,v 1.16 2013/05/22 17:44:47 rapha Exp $
d42 4
a45 1
device cpsw
d55 1
a55 1
file	arch/beagle/dev/omgpio.c		omgpio
a149 3

# Media Independent Interface (mii)
include "dev/mii/files.mii"
@


1.16
log
@Add am335x as an omap device.

ok patrick@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.beagle,v 1.15 2013/05/21 14:41:05 rapha Exp $
d42 4
a86 1

@


1.15
log
@Add a driver for the am335x timers, to be used by the beaglebone.
Derived from the existing omap3 gptimer.

ok patrick@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.beagle,v 1.14 2013/05/09 15:16:53 patrick Exp $
d34 1
@


1.14
log
@Add a driver for the OMAP identification registers/fuses,
so that we can adjust the timer frequency for PandaBoard version.
From drahn at bitrig.

ok bmercer@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.beagle,v 1.13 2013/05/01 00:16:26 patrick Exp $
d56 4
@


1.13
log
@Add a cortex bus which represents the ARM MPCore Complex.
It will attach only to ARM Cortex A9 and A15 SoCs.
The generic interrupt controller and timer will attach to this bus,
later a secondary cache controller can be added.
The base address for those controllers are figured out using
the periphbase register.

ok bmercer@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.beagle,v 1.12 2013/03/27 17:33:13 patrick Exp $
d56 4
@


1.12
log
@Move generic armv7 files into arm's file list.

ok bmercer@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.beagle,v 1.11 2011/11/10 19:37:01 uwe Exp $
a33 9

# cortex based peripherals
device ampintc
attach ampintc at soc
file	arch/beagle/dev/ampintc.c		ampintc

device amptimer
attach amptimer at soc
file	arch/beagle/dev/amptimer.c		amptimer
@


1.11
log
@Reduce autoconf(4) overuse on beagle

Renamed `ahb' to `omap' and extended it to configure the on-chip
devices directly, based a board-specific table instead of trying to
maintain addresses, interrupt numbers and such for two OMAP variants
in the same config file.

This may be an intermediate step, but should provide us some relief
already. :)

Suggestions from deraadt and drahn; ok drahn@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.beagle,v 1.10 2011/11/05 12:30:58 drahn Exp $
a16 5

file	arch/arm/armv7/armv7_space.c
file	arch/arm/armv7/armv7_a4x_space.c
file	arch/arm/armv7/armv7_a4x_io.S
file	arch/arm/armv7/armv7_mutex.c
@


1.10
log
@Attempt to configure the interrupt controller and global timer on cortex-a9
@
text
@d1 1
a1 1
#	$OpenBSD: files.beagle,v 1.9 2011/10/24 22:49:07 drahn Exp $
d18 3
a20 8
# ARM11
define  ahb {[addr=-1], [size=0], [intr=-1]}
device ahb
attach ahb at mainbus
file	arch/beagle/beagle/ahb.c	ahb
file	arch/arm/armv7/armv7_space.c	ahb
file	arch/arm/armv7/armv7_a4x_space.c	ahb	# XXX
file	arch/arm/armv7/armv7_a4x_io.S		ahb	# XXX
d32 8
d42 1
a42 1
attach ampintc at ahb
d46 1
a46 1
attach amptimer at ahb
d49 1
d51 3
a53 1
include "dev/sdmmc/files.sdmmc"
d56 1
a56 1
attach prcm at ahb
d60 2
a61 2
attach omgpio at ahb
file	arch/beagle/dev/omgpio.c		omgpio needs-count
d64 1
a64 1
attach intc at ahb
d68 1
a68 1
attach gptimer at ahb
d72 1
a72 1
attach omdog at ahb
d75 1
a75 5
device ommmc: sdmmcbus
attach ommmc at ahb
file	arch/beagle/dev/ommmc.c			ommmc

attach ohci at ahb with omohci
d78 1
a78 1
attach ehci at ahb with omehci
d82 2
a83 2
attach	com at ahb with com_ahb
file	arch/beagle/dev/omap_com.c		com_ahb
d86 1
a86 1
attach omusbtll at ahb
d91 1
a91 1
attach omkbd at ahb
d96 1
a96 1
attach omdisplay at ahb
d111 1
a111 1
attach mcspi at ahb
d116 1
a116 1
attach oaudio at ahb				# configure after Atlas Driver
@


1.9
log
@Introduce a pluggable interrupt controller infrastructure for beagle,
to allow panda to share the port.
@
text
@d1 1
a1 1
#	$OpenBSD: files.beagle,v 1.8 2011/10/21 22:55:01 drahn Exp $
d37 10
a95 1

@


1.8
log
@Pile of diffs to improve beagle/panda status. fetching u-boot parameters
out of the register input. (with a beagle_start.S fix from uwe@@)
Devices now detect device_id from u-boot and decide to enable/disable
themselves in the device match routine. ok uwe@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.beagle,v 1.7 2011/05/15 08:52:48 matthieu Exp $
d27 3
@


1.7
log
@Remove unused include of file.pckbdc. Those arches do not have
a PC/AT or PS/2 keyboard/mouse controller. ok miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.beagle,v 1.6 2011/03/14 15:09:28 drahn Exp $
d27 3
@


1.6
log
@Support pieces for usb (not working just yet).
@
text
@d1 1
a1 1
#	$OpenBSD: files.beagle,v 1.5 2010/12/06 20:10:17 jasper Exp $
a125 1
include "dev/pckbc/files.pckbc"
@


1.5
log
@- use consistent 'include' rules without a full relative path.
tested on a GENERIC config from all arches.

ok deraadt@@ miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.beagle,v 1.4 2010/06/01 03:01:02 drahn Exp $
d39 1
a39 1
file	arch/beagle/dev/omgpio.c			omgpio needs-count
d47 1
a47 1
file	arch/beagle/dev/gptimer.c			gptimer
d58 1
a58 1
file	arch/beagle/dev/omohci.c			omohci
d61 1
a61 1
file	arch/beagle/dev/omehci.c			omehci
d67 5
d74 1
a74 1
file	arch/beagle/dev/omkbd.c		omkbd
d92 1
a92 1
# MCSPI - spi connection to atlas 
d95 1
a95 6
file	arch/beagle/dev/mcspi.c		mcspi

# ATLAS (spi) driver
device atlas: wskbddev
attach atlas at ahb				# create a spi bus for this?
file arch/beagle/dev/atlas.c			atlas
@


1.4
log
@Bluetooth header file is required so even if no bluetooth is configured
the files.bluetooth is needed to generate included file.
@
text
@d1 1
a1 1
#	$OpenBSD: files.beagle,v 1.3 2010/02/12 05:36:10 drahn Exp $
d31 1
a31 1
include "../../../dev/sdmmc/files.sdmmc"
d80 2
a81 2
include "../../../scsi/files.scsi"
include "../../../dev/atapiscsi/files.atapiscsi"
@


1.3
log
@ehci bits, not enabled.
@
text
@d1 1
a1 1
#	$OpenBSD: files.beagle,v 1.2 2010/02/10 20:40:09 drahn Exp $
d130 3
@


1.2
log
@Close to working MMCHS (ommmc) driver. much thanks to mk@@ for continual poking.
@
text
@d1 1
a1 1
#	$OpenBSD: files.beagle,v 1.1 2009/05/08 03:13:26 drahn Exp $
d59 3
@


1.1
log
@Initial effort on a port to the omap35xx platform specifically beagleboard,
however other omap system may be supportable. Not functional until armv7
core changes are complete.
@
text
@d1 1
a1 1
#	$OpenBSD: files.beagle,v 1.15 2005/01/28 17:14:31 drahn Exp $
d31 2
d53 3
a55 2
attach sm at ahb with sm_ahb
file	arch/beagle/dev/if_sm_ahb.c			sm_ahb
@

