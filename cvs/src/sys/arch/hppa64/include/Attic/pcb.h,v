head	1.6;
access;
symbols
	OPENBSD_5_9:1.5.0.2
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.5.0.4
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.4.0.10
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.14
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.12
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.8
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.4.0.6
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.4.0.4
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.2
	OPENBSD_5_0:1.3.0.2
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.1.0.24
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.22
	OPENBSD_4_8_BASE:1.1
	OPENBSD_4_7:1.1.0.18
	OPENBSD_4_7_BASE:1.1
	OPENBSD_4_6:1.1.0.20
	OPENBSD_4_6_BASE:1.1
	OPENBSD_4_5:1.1.0.16
	OPENBSD_4_5_BASE:1.1
	OPENBSD_4_4:1.1.0.14
	OPENBSD_4_4_BASE:1.1
	OPENBSD_4_3:1.1.0.12
	OPENBSD_4_3_BASE:1.1
	OPENBSD_4_2:1.1.0.10
	OPENBSD_4_2_BASE:1.1
	OPENBSD_4_1:1.1.0.8
	OPENBSD_4_1_BASE:1.1
	OPENBSD_4_0:1.1.0.6
	OPENBSD_4_0_BASE:1.1
	OPENBSD_3_9:1.1.0.4
	OPENBSD_3_9_BASE:1.1
	OPENBSD_3_8:1.1.0.2
	OPENBSD_3_8_BASE:1.1;
locks; strict;
comment	@ * @;


1.6
date	2016.05.11.21.52.50;	author deraadt;	state dead;
branches;
next	1.5;
commitid	VpgRpYXqYSJy4P7J;

1.5
date	2015.05.05.02.13.46;	author guenther;	state Exp;
branches;
next	1.4;
commitid	dNPv28CJI5BxtRGW;

1.4
date	2011.11.10.23.15.11;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	2011.04.16.22.02.32;	author kettenis;	state Exp;
branches;
next	1.2;

1.2
date	2011.04.14.19.34.55;	author kettenis;	state Exp;
branches;
next	1.1;

1.1
date	2005.04.01.10.40.48;	author mickey;	state Exp;
branches;
next	;


desc
@@


1.6
log
@remove hppa64 port, which we never got going beyond broken single users.
hppa reverse-stack gives us a valuable test case, but most developers don't
have a 2nd one to proceed further with this.
ok kettenis
@
text
@/*	$OpenBSD: pcb.h,v 1.5 2015/05/05 02:13:46 guenther Exp $	*/

/*
 * Copyright (c) 2005 Michael Shalayeff
 * All rights reserved.
 *
 * Permission to use, copy, modify, and distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF MIND, USE, DATA OR PROFITS, WHETHER IN
 * AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 */

#ifndef _MACHINE_PCB_H_
#define _MACHINE_PCB_H_

#include <machine/fpu.h>
#include <machine/reg.h>

struct pcb {
	struct hppa_fpstate *pcb_fpstate;	/* not in the trapframe */

	u_int64_t	pcb_ksp;		/* kernel sp for ctxsw */
	u_int64_t	pcb_onfault;		/* SW copy fault handler */
	pa_space_t	pcb_space;		/* copy pmap_space, for asm's sake */
};

#endif /* _MACHINE_PCB_H_ */
@


1.5
log
@emul_native is only used for kernel threads which can't dump core, so
delete coredump_trad(), uvm_coredump(), cpu_coredump(), struct md_coredump,
and various #includes that are superfluous.

This leaves compat_linux processes without a coredump callback.  If that
ability is desired, someone should update it to use coredump_elf32() and
verify the results...

ok kettenis@@
@
text
@d1 1
a1 1
/*	$OpenBSD: pcb.h,v 1.4 2011/11/10 23:15:11 deraadt Exp $	*/
@


1.4
log
@Eliminate more useless differences between hppa and hppa64
@
text
@d1 1
a1 1
/*	$OpenBSD: pcb.h,v 1.3 2011/04/16 22:02:32 kettenis Exp $	*/
a32 6

struct md_coredump {
	struct reg md_reg;
	struct fpreg md_fpreg;
}; 

@


1.3
log
@Move the FPU state out of 'struct pcb' like we did for hppa since it causes
evil problems with non-equivalent aliases.
@
text
@d1 1
a1 1
/*	$OpenBSD: pcb.h,v 1.2 2011/04/14 19:34:55 kettenis Exp $	*/
d29 3
a31 3
	u_int64_t pcb_ksp;		/* kernel sp for ctxsw */
	u_int64_t pcb_onfault;		/* SW copy fault handler */
	pa_space_t pcb_space;		/* copy pmap_space, for asm's sake */
@


1.2
log
@Get rid if pcb_uva, like we did on hppa a while ago since it creates evil
non-equivalent aliases.
@
text
@d1 1
a1 1
/*	$OpenBSD: pcb.h,v 1.1 2005/04/01 10:40:48 mickey Exp $	*/
d23 1
d27 3
a29 1
	u_int64_t pcb_fpregs[HPPA_NFPREGS+1];	/* not in the trapframe */
a30 1
	u_int64_t pcb_ksp;		/* kernel sp for ctxsw */
a31 5

#if 0	/* imaginary part that is after user but in the same page */
	u_int32_t pcb_pad[53+768];
	u_int64_t pcb_frame[64];	/* the very end */
#endif
@


1.1
log
@small batch early bottling hppa64 port
matured in mighty ukrainian oak for 23 months
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
a27 1
	vaddr_t pcb_uva;		/* KVA for U-area */
@

