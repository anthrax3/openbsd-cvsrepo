head	1.3;
access;
symbols
	OPENBSD_6_2_BASE:1.3
	OPENBSD_6_1:1.3.0.28
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.3.0.24
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.20
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.22
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.14
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.18
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.16
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.12
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.10
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.8
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.6
	OPENBSD_5_0:1.3.0.4
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.3.0.2
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.2.0.12
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.10
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.8
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.6
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.4
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.2
	OPENBSD_4_3_BASE:1.2;
locks; strict;
comment	@ * @;


1.3
date	2010.12.03.18.29.56;	author shadchin;	state Exp;
branches;
next	1.2;

1.2
date	2007.12.14.16.09.23;	author jsing;	state Exp;
branches;
next	1.1;

1.1
date	2007.10.18.18.59.29;	author jsing;	state Exp;
branches;
next	;


desc
@@


1.3
log
@removed slot argument of function pckbd_cnattach
because it is always PCKBC_KBD_SLOT

ok miod@@, krw@@
@
text
@/*	$OpenBSD: mkbcreg.h,v 1.2 2007/12/14 16:09:23 jsing Exp $  */

/*
 * Copyright (c) 2006, 2007, Joel Sing
 *
 * Permission to use, copy, modify, and distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 */

#include <dev/ic/pckbcvar.h>

/*
 * MACE PS/2 controller register definitions.
 */

#define MKBC_PORTSIZE			0x20

#define MKBC_TX_PORT			0x00
#define MKBC_RX_PORT			0x08
#define MKBC_CONTROL			0x10
#define MKBC_STATUS			0x18

/*
 * Controller status flags
 */
#define MKBC_STATUS_CLOCK_SIGNAL  	0x01
#define MKBC_STATUS_CLOCK_INHIBIT	0x02
#define MKBC_STATUS_TX_INPROGRESS	0x04
#define MKBC_STATUS_TX_EMPTY		0x08
#define MKBC_STATUS_RX_FULL		0x10
#define MKBC_STATUS_RX_INPROGRESS	0x20
#define MKBC_STATUS_ERROR_PARITY	0x40
#define MKBC_STATUS_ERROR_FRAMING	0x80

/*
 * Control bits
 */
#define MKBC_CONTROL_TX_CLOCK_DISABLE	0x01
#define MKBC_CONTROL_TX_ENABLE		0x02
#define MKBC_CONTROL_TX_INT_ENABLE	0x04
#define MKBC_CONTROL_RX_INT_ENABLE	0x08
#define MKBC_CONTROL_RX_CLOCK_ENABLE	0x10
#define MKBC_CONTROL_RESET		0x20

int	mkbc_cnattach(bus_space_tag_t, bus_addr_t);
@


1.2
log
@Add console/cnattach support to mkbc(4). This allows for early attachment
of pckbd(4) and provides us with a console keyboard. Tested by jasper@@.

ok miod@@
@
text
@d1 1
a1 1
/*	$OpenBSD$  */
d54 1
a54 1
int	mkbc_cnattach(bus_space_tag_t, bus_addr_t, pckbc_slot_t);
@


1.1
log
@Add support for the Moosehead PS/2 controller as found on SGI O2 workstations.

ok miod@@ deraadt@@
@
text
@d1 2
d4 1
a4 1
 * Copyright (c) 2006-2007, Joel Sing
d19 2
d54 1
@

