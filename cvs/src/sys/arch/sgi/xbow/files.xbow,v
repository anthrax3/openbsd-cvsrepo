head	1.9;
access;
symbols
	OPENBSD_6_2:1.9.0.20
	OPENBSD_6_2_BASE:1.9
	OPENBSD_6_1:1.9.0.22
	OPENBSD_6_1_BASE:1.9
	OPENBSD_6_0:1.9.0.18
	OPENBSD_6_0_BASE:1.9
	OPENBSD_5_9:1.9.0.14
	OPENBSD_5_9_BASE:1.9
	OPENBSD_5_8:1.9.0.16
	OPENBSD_5_8_BASE:1.9
	OPENBSD_5_7:1.9.0.8
	OPENBSD_5_7_BASE:1.9
	OPENBSD_5_6:1.9.0.12
	OPENBSD_5_6_BASE:1.9
	OPENBSD_5_5:1.9.0.10
	OPENBSD_5_5_BASE:1.9
	OPENBSD_5_4:1.9.0.6
	OPENBSD_5_4_BASE:1.9
	OPENBSD_5_3:1.9.0.4
	OPENBSD_5_3_BASE:1.9
	OPENBSD_5_2:1.9.0.2
	OPENBSD_5_2_BASE:1.9
	OPENBSD_5_1_BASE:1.7
	OPENBSD_5_1:1.7.0.10
	OPENBSD_5_0:1.7.0.8
	OPENBSD_5_0_BASE:1.7
	OPENBSD_4_9:1.7.0.6
	OPENBSD_4_9_BASE:1.7
	OPENBSD_4_8:1.7.0.4
	OPENBSD_4_8_BASE:1.7
	OPENBSD_4_7:1.7.0.2
	OPENBSD_4_7_BASE:1.7
	OPENBSD_4_6:1.4.0.2
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.1.0.4
	OPENBSD_4_5_BASE:1.1
	OPENBSD_4_4:1.1.0.2
	OPENBSD_4_4_BASE:1.1;
locks; strict;
comment	@# @;


1.9
date	2012.05.10.21.30.09;	author miod;	state Exp;
branches;
next	1.8;

1.8
date	2012.04.18.17.28.24;	author miod;	state Exp;
branches;
next	1.7;

1.7
date	2010.03.07.21.26.24;	author miod;	state Exp;
branches;
next	1.6;

1.6
date	2010.03.04.14.50.35;	author jsing;	state Exp;
branches;
next	1.5;

1.5
date	2009.10.22.19.55.45;	author miod;	state Exp;
branches;
next	1.4;

1.4
date	2009.06.27.16.14.03;	author miod;	state Exp;
branches;
next	1.3;

1.3
date	2009.05.08.23.08.35;	author miod;	state Exp;
branches;
next	1.2;

1.2
date	2009.04.13.21.17.54;	author miod;	state Exp;
branches;
next	1.1;

1.1
date	2008.04.07.22.47.40;	author miod;	state Exp;
branches;
next	;


desc
@@


1.9
log
@Fix impact(4) header file generation to correctly output NIMPACT_GIO on
IP22 kernels. Oops.
@
text
@#	$OpenBSD: files.xbow,v 1.8 2012/04/18 17:28:24 miod Exp $

# IP30 and IP27 planar XBow bus
define	xbow {[widget = -1], [vendor = -1], [product = -1]}
device	xbow
attach	xbow at mainbus
file	arch/sgi/xbow/xbow.c			xbow

# IP30 Heart
device	xheart {} : onewirebus
attach	xheart at xbow
file	arch/sgi/xbow/xheart.c			xheart

# PCI Bridge
device	xbridge {}
attach	xbridge at xbow
device	xbpci {[bus = -1]} : pcibus
attach	xbpci at xbridge
file	arch/sgi/xbow/xbridge.c			xbridge

# Odyssey graphics
device	odyssey: wsemuldisplaydev, rasops32
attach	odyssey at xbow
file	arch/sgi/xbow/odyssey.c			odyssey		needs-flag

# ImpactSR graphics
attach	impact at xbow with impact_xbow
file	arch/sgi/xbow/impact_xbow.c		impact_xbow
@


1.8
log
@Split the existing impact@@xbow attachment into generic impact routines, and
bus-specific attachment; impactreg.h and impactvar.h move from sgi/xbow/ to
sgi/dev/.

Teach the generic impact code how to code with pre-ImpactSR boards, which have
a slightly different register layout (information obtained from Peter Fuerst's
Linux IP28 patches).

Add an impact@@gio attachment (unfortunately untested, no Impact GIO boards
here). All Indigo 2 graphics options should be supported now (assuming the
Extreme/Ultra will actually work with grtwo(4) out of the box).

Tested not to disturb operation on IP30.

** ATTENTION! If you are building IP27 or IP30 kernels, be sure to rm impact.d
** before building a new kernel.
@
text
@d1 1
a1 1
#	$OpenBSD: files.xbow,v 1.7 2010/03/07 21:26:24 miod Exp $
d28 1
a28 2
file	arch/sgi/xbow/impact_xbow.c		impact &
						impact_xbow	needs-flag
@


1.7
log
@Minimalistic driver for the ImpactSR (Mardigras) video option found on older
Octane systems, as well as some Onyxes. With special permission to change a
systemwide .h file and add a manpage from deraadt@@
Magic numbers and operation sequencing borrowed from Linux; tested on
Octane + ESI.
ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.xbow,v 1.6 2010/03/04 14:50:35 jsing Exp $
d22 1
a22 1
device	odyssey: wsemuldisplaydev, rasops8, rasops16, rasops32
d27 3
a29 3
device	impact: wsemuldisplaydev, rasops32
attach	impact at xbow
file	arch/sgi/xbow/impact.c			impact		needs-flag
@


1.6
log
@Introduce odyssey(4), a driver for the SGI VPro (aka Odyssey) graphics
card, which can be found in Octane, Octane2, Fuel, Tezro and Onyx systems.

ok miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.xbow,v 1.4 2009/06/27 16:14:03 miod Exp $
d26 4
@


1.5
log
@Introduce a logical xbpci(4) device between xbridge and pci, since more than
one pci bus can attach to an xbridge (if PIC) and both being `bus 0' would
make dmesg confusing.
While there, seize the opportunity of this new dmesg line to display the
bus mode (PCI or PCIX) and speed.
@
text
@d20 6
@


1.4
log
@Add an explicit widget locator to xbow children; allows a given widget to
be disabled with some UKC tinkering.
@
text
@d1 1
a1 1
#	$OpenBSD: files.xbow,v 1.3 2009/05/08 23:08:35 miod Exp $
d15 1
a15 1
device	xbridge {} : pcibus
d17 2
@


1.3
log
@Remove xhub boilerplate; Hub doesn't appear as a widget itself but as the
connecting part of the XBow, as advertized by the KL graph. Hub specific
code already exists in xbow.c and will remain there.
@
text
@d1 1
a1 1
#	$OpenBSD: files.xbow,v 1.2 2009/04/13 21:17:54 miod Exp $
d4 1
a4 1
define	xbow {[vendor = -1], [product = -1]}
@


1.2
log
@The start of Origin 200 support. Based on some code contributed by pefo@@
some years ago for KL enumeration, building on the existing XBow support
to limit ourselves to a single node for now.

This is a work-in-progress; it currently lacks complete interrupt code,
as well as PCI resource management. And there are likely bugs creeping
inside.
@
text
@d1 1
a1 1
#	$OpenBSD: files.xbow,v 1.1 2008/04/07 22:47:40 miod Exp $
a12 5

# IP27 Hub
device	xhub {}
attach	xhub at xbow
file	arch/sgi/xbow/xhub.c			xhub
@


1.1
log
@A first cut at XBow bus support, very minimal, limited to a local bus only;
HUB driver (for IP27) is a stub, and interrupt support is a shoot in the dark
and will need some serious debugging until it is sane, but I want to reduce
the weight of these diffs first.

Based on a lot of tinkering and experiments, as well as knowledge extracted
from the Linux source code.
@
text
@d1 7
a7 1
#	$OpenBSD$
@

