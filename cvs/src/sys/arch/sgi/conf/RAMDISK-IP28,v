head	1.6;
access;
symbols
	OPENBSD_6_2_BASE:1.6
	OPENBSD_6_1:1.6.0.8
	OPENBSD_6_1_BASE:1.6
	OPENBSD_6_0:1.6.0.4
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.6.0.2
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.5.0.4
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.4.0.2
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.3.0.12
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.10
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.6
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.4
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.2
	OPENBSD_5_2_BASE:1.3;
locks; strict;
comment	@# @;


1.6
date	2015.11.02.20.14.36;	author miod;	state Exp;
branches;
next	1.5;
commitid	Irb0dUO4X5QhH90i;

1.5
date	2015.07.17.22.52.29;	author tedu;	state Exp;
branches;
next	1.4;
commitid	OOrGfFHYAn65M2qc;

1.4
date	2014.10.10.05.43.35;	author deraadt;	state Exp;
branches;
next	1.3;
commitid	eyBTAcDp3o260Uyq;

1.3
date	2012.07.14.19.53.27;	author miod;	state Exp;
branches;
next	1.2;

1.2
date	2012.05.26.17.10.07;	author miod;	state Exp;
branches;
next	1.1;

1.1
date	2012.05.25.11.31.04;	author miod;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Define KERNBASE in addition to LINK_ADDRESS.
@
text
@#	$OpenBSD: RAMDISK-IP28,v 1.5 2015/07/17 22:52:29 tedu Exp $
#
# THIS KERNEL IS FOR POWER INDIGO2 R10000 (IP28) SYSTEMS ONLY.

machine		sgi mips64
maxusers	4

option		TIMEZONE=0
option		DST=0
option		SMALL_KERNEL
option		NO_PROPOLICE
option		BOOT_CONFIG

option		MINIROOTSIZE=10240
option		RAMDISK_HOOKS

option		PCIVERBOSE
option		EISAVERBOSE

option		FFS
option		CD9660
option		NFSCLIENT
option		INET6

makeoption	LINK_ADDRESS="0xa800000020020000"
option		KERNBASE="0xa800000020000000"
option		TGT_INDIGO2		# Indigo2
option		ARCBIOS			# mandatory
option		CPU_R10000		# R10000 support

config		bsd root on rd0a swap on rd0b

mainbus0	at root
cpu*		at mainbus0

int0		at mainbus0		# Interrupt Controller and scheduling clock
imc0		at mainbus0		# Memory Controller
gio0		at imc0
eisa0		at imc0

hpc0		at gio? addr 0x1fb80000

dsclock0	at hpc0
sq*		at hpc?			# On-board Ethernet
wdsc*		at hpc?			# On-board SCSI
pckbc*		at hpc0			# keyboard and mouse

zs0		at hpc0
zstty*		at zs0			# Serial ports

pckbd*		at pckbc?
wskbd*		at pckbd? mux 1

grtwo*		at gio?			# Express (GR2/GR3) graphics
wsdisplay*	at grtwo?
impact*		at gio?			# Impact graphics
wsdisplay*	at impact?
newport*	at gio?			# XL graphics
wsdisplay*	at newport?

giopci*		at gio?
pci*		at giopci?

scsibus*	at scsi?
sd*		at scsibus?
st*		at scsibus?
cd*		at scsibus?

pseudo-device	loop 1
pseudo-device	bpfilter 1
pseudo-device	rd 1
pseudo-device	bio 1
@


1.5
log
@remove obsolete INET kernel option
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK-IP28,v 1.4 2014/10/10 05:43:35 deraadt Exp $
d26 1
@


1.4
log
@Significant unification of RAMDISK* config files, making them diffable.
This makes it easier to remove components not required to do an install,
and subsequently add other desireable components ...
In snapshots (in various forks) for about a week.
Do some upgrades and installs, please.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK-IP28,v 1.3 2012/07/14 19:53:27 miod Exp $
a22 1
option		INET
@


1.3
log
@A known errata of R4000 and R4400 processors, is that reading the internal
counter register close to a trigger of the counter interrupt, may cause the
interrupt not to be generated. This makes it a bad idea to use the internal
counter both for the scheduling clock and for delay().

Therefore, on IP22 systems (and IP28 because it makes my life easier), use
one of the two 8254 timers connected to the onboard interrupt controller as
the scheduling clock source.

Adapted from NetBSD.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK-IP28,v 1.2 2012/05/26 17:10:07 miod Exp $
a5 1

a6 2
option		TIMEZONE=0	# minutes west of GMT (for)
option		DST=0		# use daylight savings rules
d8 5
a12 2
# Make options
makeoption	LINK_ADDRESS="0xa800000020020000"
d14 2
a15 1
option		DDB
d17 1
a18 1
option		PCIVERBOSE
d20 5
a24 10
# Filesystem options
option		CD9660		# ISO 9660 + Rock Ridge file system
option		FIFO		# POSIX fifo support (in all filesystems)
option		FFS		# fast filesystem
#option		MSDOSFS		# Ability to read write MS-Dos filesystem
option		NFSCLIENT	# Sun NFS-compatible filesystem (client)

# Networking options
option		INET		# IP + ICMP + TCP + UDP
option		INET6		# IPv6 (needs INET)
d26 4
a29 3
# RAMDISK stuff
option		MINIROOTSIZE=10240
option		RAMDISK_HOOKS
d31 1
a31 4
# Define what targets to support
option		TGT_INDIGO2	# Indigo2
option		ARCBIOS		# mandatory
option		CPU_R10000	# R10000 support
a32 6
# Specify storage configuration using ramdisk
config		bsd	root on rd0a swap on rd0b

#
# Definition of system
#
d36 2
a37 2
int0		at mainbus0	# Interrupt Controller and scheduling clock
imc0		at mainbus0	# Memory Controller
d43 4
a46 4
dsclock0	at hpc0	
sq*		at hpc?		# On-board Ethernet
wdsc*		at hpc?		# On-board SCSI
pckbc*		at hpc0		# keyboard and mouse
d49 1
a49 1
zstty*		at zs0		# Serial ports
a52 2
#pms*		at pckbc?
#wsmouse*	at pms? mux 0
d54 1
a54 1
grtwo*		at gio?		# Express (GR2/GR3) graphics
d56 1
a56 1
impact*		at gio?		# Impact graphics
d58 1
a58 1
newport*	at gio?		# XL graphics
a67 9
#ch*		at scsibus?
#uk*		at scsibus?

#### PSEUDO Devices
pseudo-device	loop		1	# network loopback
pseudo-device	bpfilter	1	# packet filter ports

pseudo-device	rd		1	# Ram disk.
pseudo-device	bio		1	# ioctl multiplexing device
d69 4
a72 1
option		BOOT_CONFIG	# add support for boot -c
@


1.2
log
@Be more strict when specifying hpc child device attachments: specific
onboard devices need only attach to hpc0 instead of hpc?.
While there, remove hpc1 and hpc2 attachment from IP28 configurations, as these
can not exist on Indigo2 systems.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK-IP28,v 1.1 2012/05/25 11:31:04 miod Exp $
a46 1
clock0		at mainbus0
d48 1
a48 1
int0		at mainbus0	# Interrupt Controller
@


1.1
log
@Support for the POWER Indigo2 R10000 systems (IP28). Currently running with
ECC checking disabled, which allows the existing Indigo2 drivers to run
unmodified.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK-IP22,v 1.9 2012/05/18 20:31:40 miod Exp $
a54 2
hpc1		at gio? addr 0x1fb00000
hpc2		at gio? addr 0x1f980000
d57 3
a59 3
sq*		at hpc?		# On-board Ethernet or E++ adapter
wdsc*		at hpc?		# On-board SCSI or GIO32 SCSI adapter
pckbc*		at hpc?		# keyboard and mouse
@

