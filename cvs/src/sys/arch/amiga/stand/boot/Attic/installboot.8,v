head	1.7;
access;
symbols
	SMP_SYNC_A:1.7
	SMP_SYNC_B:1.7
	UBC_SYNC_A:1.7
	OPENBSD_3_2:1.6.0.16
	OPENBSD_3_2_BASE:1.6
	OPENBSD_3_1:1.6.0.14
	OPENBSD_3_1_BASE:1.6
	UBC_SYNC_B:1.6
	UBC:1.6.0.12
	UBC_BASE:1.6
	OPENBSD_3_0:1.6.0.10
	OPENBSD_3_0_BASE:1.6
	OPENBSD_2_9:1.6.0.8
	OPENBSD_2_9_BASE:1.6
	OPENBSD_2_8:1.6.0.6
	OPENBSD_2_8_BASE:1.6
	OPENBSD_2_7:1.6.0.4
	OPENBSD_2_7_BASE:1.6
	SMP:1.6.0.2
	SMP_BASE:1.6
	kame_19991208:1.5
	OPENBSD_2_6:1.5.0.2
	OPENBSD_2_6_BASE:1.5
	OPENBSD_2_5:1.2.0.10
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.2.0.8
	OPENBSD_2_4_BASE:1.2
	OPENBSD_2_3:1.2.0.6
	OPENBSD_2_3_BASE:1.2
	OPENBSD_2_2:1.2.0.4
	OPENBSD_2_2_BASE:1.2
	OPENBSD_2_1:1.2.0.2
	OPENBSD_2_1_BASE:1.2;
locks; strict;
comment	@# @;


1.7
date	2002.12.31.16.35.39;	author miod;	state dead;
branches;
next	1.6;

1.6
date	2000.01.03.20.04.28;	author pjanzen;	state Exp;
branches
	1.6.2.1
	1.6.12.1;
next	1.5;

1.5
date	99.07.09.13.35.30;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	99.07.08.22.56.01;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	99.05.23.14.11.27;	author aaron;	state Exp;
branches;
next	1.2;

1.2
date	97.02.21.10.21.49;	author niklas;	state Exp;
branches;
next	1.1;

1.1
date	97.01.16.09.26.33;	author niklas;	state Exp;
branches;
next	;

1.6.2.1
date	2003.03.27.23.19.19;	author niklas;	state dead;
branches;
next	;

1.6.12.1
date	2003.05.19.21.49.40;	author tedu;	state dead;
branches;
next	;


desc
@@


1.7
log
@amiga and sun3 turned out to not be y2k+3 compliant here. Remove them, as
well as the few userland tools which were only used on these platforms.
@
text
@.\"	$OpenBSD: installboot.8,v 1.6 2000/01/03 20:04:28 pjanzen Exp $
.\"	$NetBSD: installboot.8,v 1.1.1.1 1996/11/29 23:36:30 is Exp $
.\"
.\" Copyright (c) 1995 Paul Kranenburg
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"      This product includes software developed by Paul Kranenburg.
.\" 3. The name of the author may not be used to endorse or promote products
.\"    derived from this software without specific prior written permission
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.Dd November 29, 1996
.Dt INSTALLBOOT 8 amiga
.Os
.Sh NAME
.Nm installboot
.Nd install a bootstrap on an FFS filesystem partition
.Sh SYNOPSIS
.Nm installboot
.Ar bootblock
.Ar device
.Sh DESCRIPTION
.Nm installboot
copies the bootblock to a bootable partition. The
bootstrap is written into the bootblock area on the partition, right
in front of the superblock, and hence limited in size to
8192 bytes.
.Pp
The bootstrap resides in the first few blocks on the partition
.Pq as specified by Commodore-Amiga Inc.
The bootstrap is loaded into memory by the ROM from bootable devices:
RDB devices, where the partition is marked as bootable, or (not on the
DraCo) floppy disks in Amiga format (880K/1760k).
.Pp
In presence of more than one bootable partiton/floppy disk, the partition
is chosen by the bootpriority (from the RDB), which can be overridden by
the operator from the boot menu (on Amiga machines, hold down the outer
mouse buttons during boot; on DraCo machines, press the left mouse button
when prompted).
.Pp
On RDB devices, the whole bootblock is loaded by the ROM. The number of
boot blocks in the RDB partition entry must be correct.
.Pp
On floppy disks, the ROM always loads the first two blocks (1024 bytes),
and the bootblock allocates memory and loads the whole bootblock on startup.
.Pp
After receiving control, the bootblock uses the stand-alone
filesystem code in
.Dq libsa.a
to load the kernel from the filesystem on the partition it was started from.
The code for the boot program can be found in
.Pa /usr/mdec/fdboot
.Pq floppy disk code
or
.Pa /usr/mdec/xxboot
.Pq generic RDB disk code .
.Pp
The arguments are:
.Bl -tag -width bootblock
.It Ar bootblock
The file containing the bootblock (normally /usr/mdec/xxboot for RDB devices).
.It Ar device
The name of the character special device specifying the partition on which the
bootstrap is to be installed.
.El
.Sh EXAMPLES
The following command will install the
boot program in the bootblock area on
.Dq sd0a :
.Bd -literal -offset indent
installboot /usr/mdec/xxboot /dev/rsd0a
.Ed
.Sh CAVEATS
If
.Nm
is used on the whole disk partition, the RDB will be overwritten.
.Pp
Some third-party accellerator boards are not auto-configuring. You won't
be able to use their memory when booting from the bootblock after a cold
start.
.Pp
Some third-party disk controllers don't support bootblock booting.
.Pp
Phase 5 68060 boards don't set the SysBase->AttnFlags bit for the 68060
CPU (a patch program which is called during AmigaOS startup does this).
Currently,
.Tn OpenBSD
is not able to detect this condition, and will fail.
.Sh BUGS
There is currently no easy way to edit the RDB from within
.Tn OpenBSD.
.Pp
As normal dd is used to install the bootblock, you can only install onto
your currently used root (or any other mounted) partiton from single-user
mode, or while otherwise running in insecure mode.
.Sh SEE ALSO
.Xr dd 1
.Sh HISTORY
The
.Nm
command first appeared in NetBSD-current post 1.2
@


1.6
log
@.Sh "SEE ALSO" -> .Sh SEE ALSO
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.5 1999/07/09 13:35:30 aaron Exp $
@


1.6.12.1
log
@sync
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.6 2000/01/03 20:04:28 pjanzen Exp $
@


1.6.2.1
log
@Sync the SMP branch with 3.3
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.6 2000/01/03 20:04:28 pjanzen Exp $
@


1.5
log
@- remove all trailing whitespace
     * except when it is escaped with a `\' at the end of the line
- fix remaining .Nm usage as well
- this is from a patch I received from kwesterback@@home.com, who has been
  working on some scripts for fixing formatting errors in mdoc'd man pages

Ok, so there could be a cost/benefit debate with this commit, but since I have
the patch we might as well commit it...
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.4 1999/07/08 22:56:01 deraadt Exp $
d116 1
a116 1
.Sh "SEE ALSO"
@


1.4
log
@flesh out .Dt
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.3 1999/05/23 14:11:27 aaron Exp $
d57 1
a57 1
the operator from the boot menu (on Amiga machines, hold down the outer 
d61 1
a61 1
On RDB devices, the whole bootblock is loaded by the ROM. The number of 
d63 1
a63 1
.Pp 
d87 1
a87 1
The following command will install the 
d98 2
a99 2
Some third-party accellerator boards are not auto-configuring. You won't 
be able to use their memory when booting from the bootblock after a cold 
@


1.3
log
@remove argument from .Os macros so value in /usr/share/tmac/mdoc/doc-common
is used instead; kwesterback@@home.com
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.2 1997/02/21 10:21:49 niklas Exp $
d33 1
a33 1
.Dt INSTALLBOOT 8
@


1.2
log
@We are OpenBSD
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.1 1997/01/16 09:26:33 niklas Exp $
d34 1
a34 1
.Os 
@


1.1
log
@Sync to NetBSD 970110
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.1.1.1 1996/11/29 23:36:30 is Exp $
d121 1
a121 2
command first appeared in
.Nx 1.3
@
