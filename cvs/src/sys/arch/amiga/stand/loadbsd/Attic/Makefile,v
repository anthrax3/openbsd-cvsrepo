head	1.6;
access;
symbols
	SMP_SYNC_A:1.6
	SMP_SYNC_B:1.6
	UBC_SYNC_A:1.6
	OPENBSD_3_2:1.4.0.18
	OPENBSD_3_2_BASE:1.4
	OPENBSD_3_1:1.4.0.16
	OPENBSD_3_1_BASE:1.4
	UBC_SYNC_B:1.4
	UBC:1.4.0.14
	UBC_BASE:1.4
	OPENBSD_3_0:1.4.0.12
	OPENBSD_3_0_BASE:1.4
	OPENBSD_2_9:1.4.0.10
	OPENBSD_2_9_BASE:1.4
	OPENBSD_2_8:1.4.0.8
	OPENBSD_2_8_BASE:1.4
	OPENBSD_2_7:1.4.0.6
	OPENBSD_2_7_BASE:1.4
	SMP:1.4.0.4
	SMP_BASE:1.4
	kame_19991208:1.4
	OPENBSD_2_6:1.4.0.2
	OPENBSD_2_6_BASE:1.4
	OPENBSD_2_5:1.3.0.4
	OPENBSD_2_5_BASE:1.3
	OPENBSD_2_4:1.3.0.2
	OPENBSD_2_4_BASE:1.3
	OPENBSD_2_3:1.2.0.2
	OPENBSD_2_3_BASE:1.2
	OPENBSD_2_2:1.1.0.4
	OPENBSD_2_2_BASE:1.1
	OPENBSD_2_1:1.1.0.2
	OPENBSD_2_1_BASE:1.1;
locks; strict;
comment	@# @;


1.6
date	2002.12.31.16.35.39;	author miod;	state dead;
branches;
next	1.5;

1.5
date	2002.12.02.09.00.22;	author miod;	state Exp;
branches;
next	1.4;

1.4
date	99.09.09.21.25.13;	author espie;	state Exp;
branches
	1.4.4.1
	1.4.14.1;
next	1.3;

1.3
date	98.08.13.21.08.08;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	98.03.29.22.24.49;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	97.01.16.09.27.00;	author niklas;	state Exp;
branches;
next	;

1.4.4.1
date	2003.03.27.23.19.19;	author niklas;	state dead;
branches;
next	;

1.4.14.1
date	2003.05.19.21.49.40;	author tedu;	state dead;
branches;
next	;


desc
@@


1.6
log
@amiga and sun3 turned out to not be y2k+3 compliant here. Remove them, as
well as the few userland tools which were only used on these platforms.
@
text
@#	$OpenBSD: Makefile,v 1.5 2002/12/02 09:00:22 miod Exp $

CC = gcc
CFLAGS = -m68030 -Wall -O3 -fomit-frame-pointer -D__progname=program_name -msmall-code -resident 
CFLAGS+=	-fno-stack-protector

OBJS1 = loadbsd.o poolmem.o getopt.o sleep.o vers.o openlibs_stub.o
OBJS2 = loadbsd.o poolmem.o vers_ixemul.o openlibs_ixemul.o
PROGS=loadbsd loadbsd.ixemul

# add -lamiga if you can't get inlines to work
LIBS = 
LDFLAGS=-s

all: $(PROGS) distrib

loadbsd: $(OBJS1)
	$(CC) $(CFLAGS) $(LDFLAGS) -noixemul -o loadbsd $(OBJS1) $(LIBS)

loadbsd.ixemul: $(OBJS2)
	$(CC) $(CFLAGS) $(LDFLAGS) -o loadbsd.ixemul $(OBJS2) $(LIBS)

distrib: loadbsd
	gzip -c loadbsd >loadbsd.gz
	echo loadbsd built on `date` with gcc `gcc -dumpversion` >loadbsd.gz.uu
	uuencode loadbsd.gz loadbsd.gz >>loadbsd.gz.uu

clean:
	-rm $(OBJS1) $(OBJS2) $(PROGS)
@


1.5
log
@Import propolice (http://www.trl.ibm.com/projects/security/ssp), a stack
attack protection scheme, into gcc.

This protection is enabled by default. It can be turned off by using the
-fno-stack-protector flag.

Code by Hiroaki Etoh (etoh at jp dot ibm dot com); work on openbsd-specific
integration by fgsch@@, deraadt@@ and myself; tests by fgsch@@, naddy@@ and
myself; beer drinking by myself.

Please note that system upgrades with this new code will require a new
libc and ld.so to be build and installed before the propolice-enabled
compiler can be installed.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 1999/09/09 21:25:13 espie Exp $
@


1.4
log
@Put the loadbsd amigaos binary into our repository to ease
make release.

Corresponding wrapper.

New loadbsd.8 man page.

New binary itself (gcc 2.95.1 runs under amigaos now)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.3 1998/08/13 21:08:08 espie Exp $
d5 1
@


1.4.14.1
log
@sync
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 1999/09/09 21:25:13 espie Exp $
@


1.4.4.1
log
@Sync the SMP branch with 3.3
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 1999/09/09 21:25:13 espie Exp $
@


1.3
log
@Make loadbsd aware of poolmem (mainly, kill poolmem before scanning the
memory list)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.2 1998/03/29 22:24:49 espie Exp $
d14 1
a14 1
all: $(PROGS)
d21 5
@


1.2
log
@

Updated to compile with recent AmigaOS Geek Gadgets toolchain,
plus clean-up.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.1 1997/01/16 09:27:00 niklas Exp $
d4 1
a4 1
CFLAGS = -m68030 -Wall -O3 -fomit-frame-pointer -D__progname=program_name -msmall-code -resident
d6 2
a7 3
OBJS = loadbsd.o getopt.o sleep.o vers.o vers_ixemul.o openlibs_ixemul.o openlibs_stub.o
OBJS1 = loadbsd.o getopt.o sleep.o vers.o openlibs_stub.o
OBJS2 = loadbsd.o vers_ixemul.o openlibs_ixemul.o
d23 1
a23 1
	-rm $(OBJS) $(PROGS)
@


1.1
log
@Sync to NetBSD 970110
@
text
@d1 1
a1 1
#	$OpenBSD$
d4 1
a4 1
CFLAGS = -m68030 -O2 -D__progname=program_name -noixemul
d6 4
a9 2
OBJS = loadbsd.o getopt.o
LIBS = -lamiga
d11 11
a21 2
loadbsd: $(OBJS)
	$(CC) $(CFLAGS) $(LDFLAGS) -o loadbsd $(OBJS) $(LIBS)
d24 1
a24 1
	delete $(OBJS) loadbsd
@

