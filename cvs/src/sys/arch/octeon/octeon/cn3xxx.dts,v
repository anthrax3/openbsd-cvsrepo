head	1.3;
access;
symbols
	OPENBSD_6_2_BASE:1.3;
locks; strict;
comment	@# @;


1.3
date	2017.07.03.07.58.42;	author visa;	state Exp;
branches;
next	1.2;
commitid	OuNz2kFRDbrIlf0c;

1.2
date	2017.06.26.16.54.31;	author visa;	state Exp;
branches;
next	1.1;
commitid	ZGKBGyO5dX79SZQX;

1.1
date	2017.04.24.13.54.28;	author visa;	state Exp;
branches;
next	;
commitid	g9vgEuGpyvXOjUXp;


desc
@@


1.3
log
@Add the first UART into the fdt blob.
@
text
@/*	$OpenBSD: cn3xxx.dts,v 1.2 2017/06/26 16:54:31 visa Exp $	*/

/*
 * Copyright (c) 2017 Visa Hankala
 *
 * Permission to use, copy, modify, and distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 */

/*
 * Dummy device-tree for CN3xxx/CN5xxx based systems where the firmware
 * does not provide a native one.
 */

/*
 * The file is compiled into an asm file using the Linux device tree compiler.
 *
 * $ dtc -V 17 -O asm -o cn3xxx_dts.S cn3xxx.dts
 *
 * To avoid invalid 8-bit relocations in the object file, certain sequences
 * of .byte values have to be folded manually into .word values
 * in the generated header.
 */

/dts-v1/;

/ {
	model = "CN3xxx/CN5xxx";
	#address-cells = <2>;
	#size-cells = <2>;

	soc@@0 {
		compatible = "simple-bus";
		interrupt-parent = <&ciu>;
		#address-cells = <2>;
		#size-cells = <2>;
		ranges;

		ciu: ciu@@1070000000000 {
			compatible = "cavium,octeon-3860-ciu";
			interrupt-controller;
			#interrupt-cells = <2>;
			reg = <0x10700 0x00000000 0x0 0x7000>;
		};

		mdio@@1180000001800 {
			compatible = "cavium,octeon-3860-mdio";
			#address-cells = <1>;
			#size-cells = <0>;
			reg = <0x11800 0x00001800 0x0 0x40>;
		};

		serial@@1180000000800 {
			compatible = "cavium,octeon-3860-uart";
			reg = <0x11800 0x00000800 0x0 0x400>;
			interrupts = <0 0x22>;
		};
	};
};
@


1.2
log
@Arrange a phandle for the "ciu" node.
@
text
@d1 1
a1 1
/*	$OpenBSD: cn3xxx.dts,v 1.1 2017/04/24 13:54:28 visa Exp $	*/
d60 6
@


1.1
log
@Add an fdt blob for octeon systems whose firmware does not provide
a device-tree. It will be needed later when more device drivers
are attached using fdt.

OK kettenis@@
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
d43 1
d48 1
a48 1
		ciu@@1070000000000 {
@

