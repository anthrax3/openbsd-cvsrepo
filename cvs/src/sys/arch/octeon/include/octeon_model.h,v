head	1.5;
access;
symbols
	OPENBSD_6_1_BASE:1.5
	OPENBSD_6_0:1.4.0.2
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.3.0.4
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.6
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.2
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.2.0.4
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.1.0.14
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.10
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.8
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.6
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.4
	OPENBSD_5_0:1.1.0.2
	OPENBSD_5_0_BASE:1.1;
locks; strict;
comment	@ * @;


1.5
date	2016.12.17.14.14.09;	author visa;	state Exp;
branches;
next	1.4;
commitid	zuqFzDrGcaiqTMyk;

1.4
date	2016.07.16.10.41.53;	author visa;	state Exp;
branches;
next	1.3;
commitid	ydzHMXRjfqiDLVm3;

1.3
date	2014.10.26.15.10.15;	author jasper;	state Exp;
branches;
next	1.2;
commitid	s5m0NAmJtBBh925a;

1.2
date	2014.06.17.01.33.04;	author jmatthew;	state Exp;
branches;
next	1.1;
commitid	Vozs7jQDUDtEgOjM;

1.1
date	2011.06.16.11.22.30;	author syuu;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Fix IO clock speed and system reset on Octeon III.
@
text
@/*	$OpenBSD: octeon_model.h,v 1.4 2016/07/16 10:41:53 visa Exp $	*/

/*
 * Copyright (c) 2007
 *      Internet Initiative Japan, Inc.  All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
 * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 */

#ifndef _MIPS_OCTEON_MODEL_H_
#define _MIPS_OCTEON_MODEL_H_

#define OCTEON_MODEL_CN38XX_REV1	0x000d0000
#define OCTEON_MODEL_CN38XX_REV2	0x000d0001
#define OCTEON_MODEL_CN38XX_REV3	0x000d0003
#define OCTEON_MODEL_CN3100             0x000d0100
#define OCTEON_MODEL_CN3020             0x000d0110
#define OCTEON_MODEL_CN3010             0x000d0200
#define OCTEON_MODEL_CN3005             0x000d0210
#define OCTEON_MODEL_CN5010		0x000d0600
#define OCTEON_MODEL_CN5010_PASS1_1	0x000d0601
#define OCTEON_MODEL_CN61XX_PASS1_0	0x000d9300
#define OCTEON_MODEL_CN61XX_PASS1_1	0x000d9301

#define OCTEON_MODEL_MASK		0x00ffff10
#define OCTEON_MODEL_REV_MASK		0x00ffff1f
#define OCTEON_MODEL_FAMILY_MASK	0x00ffff00
#define OCTEON_MODEL_FAMILY_REV_MASK    0x00ffff0f

#define OCTEON_MODEL_FAMILY_CN58XX	0x000d0300
#define OCTEON_MODEL_FAMILY_CN56XX	0x000d0400
#define OCTEON_MODEL_FAMILY_CN38XX	0x000d0000
#define OCTEON_MODEL_FAMILY_CN31XX	0x000d0100
#define OCTEON_MODEL_FAMILY_CN30XX	0x000d0200
#define OCTEON_MODEL_FAMILY_CN50XX	0x000d0600
#define OCTEON_MODEL_FAMILY_CN61XX	0x000d9300
#define OCTEON_MODEL_FAMILY_CN71XX	0x000d9600

/*
 *  get chip id
 */
static inline uint32_t octeon_get_chipid(void)
{
        uint32_t tmp;

        asm volatile (
            "    .set push              \n"
            "    .set mips64            \n"
            "    .set noreorder         \n"
            "    mfc0   %0, $15, 0      \n"
            "    .set pop               \n"
            : "=&r"(tmp) : );

        return(tmp);
}

#define octeon_model(id) ((id) & OCTEON_MODEL_MASK)
#define octeon_model_revision(id) ((id) & OCTEON_MODEL_REV_MASK)
#define octeon_model_family(id) ((id) & OCTEON_MODEL_FAMILY_MASK)
#define octeon_model_family_revision(id) ((id) & OCTEON_MODEL_FAMILY_REV_MASK)

#endif
@


1.4
log
@Add $OpenBSD$ / replace $Id$ with $OpenBSD$.
@
text
@d1 1
a1 1
/*	$OpenBSD: octeon_model.h,v 1.3 2014/10/26 15:10:15 jasper Exp $	*/
d56 1
@


1.3
log
@define octeon model cn61xx pass 1.1

ok pirofti@@
@
text
@d1 1
a1 1
/*	$Id: octeon_model.h,v 1.2 2014/06/17 01:33:04 jmatthew Exp $	*/
@


1.2
log
@The io clock on Octeon II (CN6xxx) runs at a different rate to the cpu clock.
Program the uarts based on the io clock rate on these platforms.

ok jasper@@ pirofti@@ yasuoka@@
@
text
@d1 1
a1 1
/*	$Id: octeon_model.h,v 1.1 2011/06/16 11:22:30 syuu Exp $	*/
d42 1
@


1.1
log
@Ethernet driver merged from IIJ's contribution code.
@
text
@d1 1
a1 1
/*	$Id: octeon_model.h,v 1.4 2008-07-18 03:31:32 sogabe Exp $	*/
d41 1
d54 1
@

