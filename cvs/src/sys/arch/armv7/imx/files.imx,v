head	1.20;
access;
symbols
	OPENBSD_6_1_BASE:1.20
	OPENBSD_6_0:1.15.0.2
	OPENBSD_6_0_BASE:1.15
	OPENBSD_5_9:1.3.0.2
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.4
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.2.0.2
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.6
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.4
	OPENBSD_5_5_BASE:1.2;
locks; strict;
comment	@# @;


1.20
date	2016.10.05.22.06.48;	author kettenis;	state Exp;
branches;
next	1.19;
commitid	WddFsarPAXG7fLxc;

1.19
date	2016.09.23.17.59.17;	author kettenis;	state Exp;
branches;
next	1.18;
commitid	G6vP1hjedt063xQO;

1.18
date	2016.09.18.18.16.00;	author kettenis;	state Exp;
branches;
next	1.17;
commitid	baEd1JYtYxyO1XyV;

1.17
date	2016.08.14.19.08.44;	author kettenis;	state Exp;
branches;
next	1.16;
commitid	IeFDute4nV7Efuj0;

1.16
date	2016.08.04.14.31.50;	author kettenis;	state Exp;
branches;
next	1.15;
commitid	UPlBukP0qB5anTsz;

1.15
date	2016.07.12.19.17.49;	author kettenis;	state Exp;
branches;
next	1.14;
commitid	j8BR8WPk8oGLOlFW;

1.14
date	2016.07.12.15.16.00;	author kettenis;	state Exp;
branches;
next	1.13;
commitid	5guFvXYe4Pb7Zb6W;

1.13
date	2016.07.10.14.01.10;	author kettenis;	state Exp;
branches;
next	1.12;
commitid	kY49vfFOAjzEfi87;

1.12
date	2016.07.09.12.32.50;	author kettenis;	state Exp;
branches;
next	1.11;
commitid	F6qY7qK1yCCGr9gt;

1.11
date	2016.06.13.23.43.58;	author kettenis;	state Exp;
branches;
next	1.10;
commitid	0PJieNgDwKc9Zqx2;

1.10
date	2016.06.12.13.02.06;	author kettenis;	state Exp;
branches;
next	1.9;
commitid	OAwuwG6755ENLV7d;

1.9
date	2016.06.11.14.26.18;	author jsg;	state Exp;
branches;
next	1.8;
commitid	fpeQM4i2VQYEVdrK;

1.8
date	2016.06.09.15.38.30;	author kettenis;	state Exp;
branches;
next	1.7;
commitid	mdntq3kwoQcLMJEO;

1.7
date	2016.06.09.12.39.17;	author kettenis;	state Exp;
branches;
next	1.6;
commitid	5vNPvRRkE4tnKZEK;

1.6
date	2016.06.03.01.36.46;	author jsg;	state Exp;
branches;
next	1.5;
commitid	YA7F4i0IfchI1r7q;

1.5
date	2016.05.21.12.37.28;	author kettenis;	state Exp;
branches;
next	1.4;
commitid	G3o1EvQ7WmmxJj2I;

1.4
date	2016.05.02.08.15.55;	author patrick;	state Exp;
branches;
next	1.3;
commitid	SxPSz6lxaCE62Tnc;

1.3
date	2015.05.15.15.35.43;	author jsg;	state Exp;
branches;
next	1.2;
commitid	AFNG6oUBgS2y44wd;

1.2
date	2013.11.06.19.03.07;	author syl;	state Exp;
branches;
next	1.1;

1.1
date	2013.09.06.20.45.53;	author patrick;	state Exp;
branches;
next	;


desc
@@


1.20
log
@Make imxdog(4) set cpuresetfn, and remove all the imx platform that is no
longer needed, including the imx board IDs.

ok patrick@@, jsg@@
@
text
@#	$OpenBSD: files.imx,v 1.19 2016/09/23 17:59:17 kettenis Exp $

device imxuart
attach	imxuart at fdt
file	arch/armv7/imx/imxuart.c	imxuart

device imxccm
attach imxccm at fdt
file	arch/armv7/imx/imxccm.c		imxccm

device imxiomuxc
attach imxiomuxc at fdt
file	arch/armv7/imx/imxiomuxc.c	imxiomuxc

device imxgpc
attach imxgpc at fdt
file	arch/armv7/imx/imxgpc.c		imxgpc

device imxdog
attach imxdog at fdt
file	arch/armv7/imx/imxdog.c		imxdog

device imxocotp
attach imxocotp at fdt
file	arch/armv7/imx/imxocotp.c	imxocotp

device imxgpio
attach imxgpio at fdt
file	arch/armv7/imx/imxgpio.c	imxgpio

device	imxiic: i2cbus
attach	imxiic at fdt
file	arch/armv7/imx/imxiic.c		imxiic

device fec: ether, ifnet, mii, ifmedia
attach fec at fdt
file	arch/armv7/imx/if_fec.c		fec

device imxehci: usbus
attach imxehci at fdt
file	arch/armv7/imx/imxehci.c	imxehci

device imxesdhc: sdmmcbus
attach imxesdhc at fdt
file	arch/armv7/imx/imxesdhc.c	imxesdhc

device imxahci: scsi, atascsi
attach imxahci at fdt
file	arch/armv7/imx/imxahci.c	imxahci

device imxtemp
attach imxtemp at fdt
file	arch/armv7/imx/imxtemp.c	imxtemp
@


1.19
log
@Attach imxocotp(4) using the fdt.  Since this means that imxtemp(4) attaches
before imxocotp(4), delay reading the temperature sensor calibration
information until after imxocotp(4) attaches.
@
text
@d1 1
a1 1
#	$OpenBSD: files.imx,v 1.18 2016/09/18 18:16:00 kettenis Exp $
a2 8
define imx {}
device imx: imx
attach imx at fdt
file	arch/armv7/imx/imx_machdep.c		imx	needs-flag
file	arch/armv7/imx/imx.c			imx
file	arch/armv7/imx/imx6.c

# serial ports
d5 1
a5 1
file	arch/armv7/imx/imxuart.c		imxuart
d25 1
a25 1
file	arch/armv7/imx/imxocotp.c		imxocotp
d29 1
a29 1
file	arch/armv7/imx/imxgpio.c		imxgpio
d41 1
a41 1
file	arch/armv7/imx/imxehci.c		imxehci
d45 1
a45 1
file	arch/armv7/imx/imxesdhc.c		imxesdhc
d49 1
a49 1
file	arch/armv7/imx/imxahci.c		imxahci
d53 1
a53 1
file	arch/armv7/imx/imxtemp.c		imxtemp@


1.18
log
@Convert imxccm(4) and imxiomuxc(4) to attach using the fdt.  Use the "early"
locator to attach them before other drivers that might need their services.

ok patrick@@, jsg@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.imx,v 1.17 2016/08/14 19:08:44 kettenis Exp $
d32 1
a32 1
attach imxocotp at imx
@


1.17
log
@Add imxtemp(4), a temperature sensor for the i.MX6 SoC.  Based on code written
by patrick@@.

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.imx,v 1.16 2016/08/04 14:31:50 kettenis Exp $
d16 1
a16 1
attach imxccm at imx
d20 1
a20 1
attach imxiomuxc at imx
@


1.16
log
@Add imxgpc(4), a driver for the i.MX6 General Power Controller (GPC) which
acts as a "transparent" interrupt controller.  This driver just hands
interrupt handlers to its parent (the Cortex-A9 GIC).  It doesn't implement
any powermanagement features yet.

ok patrick@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.imx,v 1.15 2016/07/12 19:17:49 kettenis Exp $
d58 4
@


1.15
log
@Turn ahci(4) glue code for the i.MX6 platform into its own imxahci(4) driver
such that we can don't end up with conflicting attachments of other
SoC-specific glue code.
@
text
@d1 1
a1 1
#	$OpenBSD: files.imx,v 1.14 2016/07/12 15:16:00 kettenis Exp $
d22 4
@


1.14
log
@Turn ehci(4) glue code for the i.MX6 platform into its own imxehci(4) driver
such that we can don't end up with conflicting attachments of other
SoC-specific glue code.

ok jsg@@, patrick@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.imx,v 1.13 2016/07/10 14:01:10 kettenis Exp $
d51 2
a52 1
attach ahci at fdt with imxahci
@


1.13
log
@Dynamically attach imxgpio(4) using the FDT.
@
text
@d1 1
a1 1
#	$OpenBSD: files.imx,v 1.12 2016/07/09 12:32:50 kettenis Exp $
d43 2
a44 1
attach ehci at fdt with imxehci
@


1.12
log
@Dynamically attach i.MX6 ehci(4) using the FDT.

ok jsg@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.imx,v 1.11 2016/06/13 23:43:58 kettenis Exp $
d32 1
a32 1
attach imxgpio at imx
@


1.11
log
@Dynamically attach imxdog(4) using the FDT.
@
text
@d1 1
a1 1
#	$OpenBSD: files.imx,v 1.10 2016/06/12 13:02:06 kettenis Exp $
d43 1
a43 1
attach ehci at imx with imxehci
@


1.10
log
@Dynamically attach fec(4) using the FDT.

ok jsg@@, patrick@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.imx,v 1.9 2016/06/11 14:26:18 jsg Exp $
d24 1
a24 1
attach imxdog at imx
@


1.9
log
@dynamically attach imxuart using the FDT
ok kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.imx,v 1.8 2016/06/09 15:38:30 kettenis Exp $
d40 1
a40 1
attach fec at imx
@


1.8
log
@Dynamically attach imxesdhc(4) using the FDT.

ok jsg@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.imx,v 1.7 2016/06/09 12:39:17 kettenis Exp $
d12 1
a12 1
attach	imxuart at imx
@


1.7
log
@Dynamically attach i.MX6 ahci(4) using the FDT.

ok jsg@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.imx,v 1.6 2016/06/03 01:36:46 jsg Exp $
d47 1
a47 1
attach imxesdhc at imx
@


1.6
log
@rename imxenet to fec
ok patrick@@ kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.imx,v 1.5 2016/05/21 12:37:28 kettenis Exp $
d50 1
a50 1
attach ahci at imx with imxahci
@


1.5
log
@Dynamically attach imxiic(4) and use the FDT to enumerate devices on i2c
busses.  Users of the CuBox-i and Hummingboard now need to boot with an FDT
to see the RTC.

ok jsg@@, patrick@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.imx,v 1.4 2016/05/02 08:15:55 patrick Exp $
d39 3
a41 3
device imxenet: ether, ifnet, mii, ifmedia
attach imxenet at imx
file	arch/armv7/imx/imxenet.c		imxenet
@


1.4
log
@Rework mainbus and implement simplebus to be able to span a tree-like
topology based on device tree information.  Introduce a common attach
args structure to be used for all fdt-capable bus devices.

ok jsg@@ kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.imx,v 1.3 2015/05/15 15:35:43 jsg Exp $
d36 1
a36 1
attach	imxiic at imx
@


1.3
log
@Make board attaching table driven and move it out into the soc
directories.  Move the device tables while here as was done in bitrig.
With these changes the only use of the board id defines is in the soc
directories.

Tested by matthieu and djm on imx and myself on omap and sunxi (qemu).
ok djm@@, ok jasper@@ on an earlier version
@
text
@d1 1
a1 1
#	$OpenBSD: files.imx,v 1.2 2013/11/06 19:03:07 syl Exp $
d5 1
a5 1
attach imx at mainbus
@


1.2
log
@After factorizing armv7_machdep code here is an effort to factorize all
the code present in omap/omap.c imx/imx.c and sunxi/sunxi.c

All this code looks quite the same, so we move it in a generic armv7/armv7.c

This is a step closer to only one kernel for all armv7 boards.

ok patrick@@, rapha@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.imx,v 1.1 2013/09/06 20:45:53 patrick Exp $
d6 1
a6 1
file	arch/armv7/imx/imx_machdep.c		imx
@


1.1
log
@Support for FreeScale's i.MX6 SoC.
@
text
@d1 1
a1 1
#	$OpenBSD: files.beagle,v 1.11 2011/11/10 19:37:01 uwe Exp $
d8 1
a8 1
file	arch/armv7/imx/imx6.c			imx
@

