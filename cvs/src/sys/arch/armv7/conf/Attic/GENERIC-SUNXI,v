head	1.15;
access;
symbols
	OPENBSD_5_7:1.12.0.2
	OPENBSD_5_7_BASE:1.12
	OPENBSD_5_6:1.7.0.4
	OPENBSD_5_6_BASE:1.7
	OPENBSD_5_5:1.4.0.4
	OPENBSD_5_5_BASE:1.4;
locks; strict;
comment	@# @;


1.15
date	2015.05.20.01.44.20;	author jsg;	state dead;
branches;
next	1.14;
commitid	AyYz7FgJK6jKwvRv;

1.14
date	2015.05.19.00.05.59;	author jsg;	state Exp;
branches;
next	1.13;
commitid	bo8vCG1OOftVcP5V;

1.13
date	2015.04.16.09.09.49;	author mpi;	state Exp;
branches;
next	1.12;
commitid	KBJ2lRApjJc2ViL3;

1.12
date	2015.01.04.20.55.38;	author uaa;	state Exp;
branches;
next	1.11;
commitid	wC4MIxetRQmy4yZq;

1.11
date	2014.12.11.19.44.17;	author tedu;	state Exp;
branches;
next	1.10;
commitid	jUSAZlQ30WF1ESM9;

1.10
date	2014.11.24.02.03.37;	author brad;	state Exp;
branches;
next	1.9;
commitid	Wmnzf8bGQILqXRTG;

1.9
date	2014.11.09.05.12.15;	author jsg;	state Exp;
branches;
next	1.8;
commitid	cY35DGi769dpdR2y;

1.8
date	2014.11.04.12.34.06;	author jsg;	state Exp;
branches;
next	1.7;
commitid	TLiAKzppDQ3B6yXy;

1.7
date	2014.07.12.21.56.56;	author tedu;	state Exp;
branches;
next	1.6;
commitid	6Bshd6p5VmKoCOQI;

1.6
date	2014.04.07.08.27.23;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	2014.03.05.19.48.22;	author miod;	state Exp;
branches;
next	1.4;

1.4
date	2013.12.08.09.09.47;	author martynas;	state Exp;
branches;
next	1.3;

1.3
date	2013.11.15.19.42.20;	author sasano;	state Exp;
branches;
next	1.2;

1.2
date	2013.10.27.03.06.25;	author aalm;	state Exp;
branches;
next	1.1;

1.1
date	2013.10.23.17.08.47;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.15
log
@Now all the socs use the same va entry point and don't have any
conflicting symbols we can combine the configs.

Multiple umg files are still required however.  The bsd.umg target in
the kernel is replaced by targets for bsd.IMX.umg, bsd.OMAP.umg and
bsd.SUNXI.umg.
@
text
@# $OpenBSD: GENERIC-SUNXI,v 1.14 2015/05/19 00:05:59 jsg Exp $
#
# GENERIC machine description file
#
# This machine description file is used to generate the default OpenBSD
# kernel.  The generic kernel does not include all options, subsystems
# and device drivers, but should be useful for most applications.
#
# The machine description file can be customised for your specific
# machine to reduce the kernel size and improve its performance.
#
# For further information on compiling OpenBSD kernels, see the config(8)
# man page.
#
# For further information on hardware support for this architecture, see
# the intro(4) man page.  For further information about kernel options
# for this architecture, see the options(4) man page.  For an explanation
# of each device driver in this file see the section 4 man page for the
# device.

machine	armv7	arm
include "../../../conf/GENERIC"

makeoptions	KERNEL_BASE_PHYS="0x40300000"
makeoptions	KERNEL_BASE_VIRT="0xc0300000"

option CONF_HAVE_GPIO

#options		APERTURE

#options BOOT_CONFIG	# boot-time kernel config

# estimated number of users

maxusers	32

# CPU options
options	CPU_ARMv7	# Support the ARMv7

#option WSDISPLAY_COMPAT_USL		# VT handling
#option WSDISPLAY_COMPAT_RAWKBD		# can get raw scancodes
option WSDISPLAY_DEFAULTSCREENS=1
#option WSDISPLAY_COMPAT_PCVT		# emulate some ioctls

option		USBVERBOSE

config		bsd	swap generic

# The main bus device
mainbus0	at root
cpu0		at mainbus?

# Sunxi A1x/A20 SoC
sunxi0	at mainbus?

# A1x only
a1xintc*	at sunxi?		# interrupt controller

# A20 only
cortex0		at mainbus?
ampintc*	at cortex?
#agtimer*	at cortex?

# Sunxi on-chip devices
sxipio*		at sunxi?		# GPIO pins for leds & PHYs
sxiccmu*	at sunxi?		# Clock Control Module/Unit
sxitimer*	at sunxi?
sxidog*		at sunxi?		# watchdog timer
sxirtc*		at sunxi?		# Real Time Clock
sxiuart*	at sunxi?		# onboard UARTs
sxie*		at sunxi?
ahci*		at sunxi?		# AHCI/SATA (shim)
ehci*		at sunxi?		# EHCI (shim)
#ohci*		at sunxi?		# OHCI (shim)
#usbotg0	at sunxi?

gpio*		at sxipio?

# USB bus support
usb*		at ehci?	#flags 0x1
#usb*		at ohci?

uhub*		at usb?			# USB Hubs
uhub*		at uhub?		# USB Hubs
ualea*		at uhub?		# Araneus Alea II TRNG
umodem*		at uhub?		# USB Modems/Serial
ucom*		at umodem?
uvisor*		at uhub?		# Handspring Visor
ucom*		at uvisor?
uvscom*		at uhub?		# SUNTAC Slipper U VS-10U serial
ucom*		at uvscom?
ubsa*		at uhub?		# Belkin serial adapter
ucom*		at ubsa?
uftdi*		at uhub?		# FTDI FT8U100AX serial adapter
ucom*		at uftdi?
uplcom* 	at uhub?		# I/O DATA USB-RSAQ2 serial adapter
ucom*		at uplcom?
umct*		at uhub?		# MCT USB-RS232 serial adapter
ucom*		at umct?
uaudio* 	at uhub?		# USB Audio
audio*		at uaudio?
umidi*		at uhub?		# USB MIDI
midi*		at umidi?
ulpt*		at uhub?		# USB Printers
umass*		at uhub?		# USB Mass Storage devices
uhidev*		at uhub?		# Human Interface Devices
ums*		at uhidev?		# USB mouse
wsmouse*	at ums? mux 0
ukbd*		at uhidev?		# USB keyboard
wskbd*		at ukbd? mux 1
uslhcom*	at uhidev?		# Silicon Labs CP2110 USB HID UART
ucom*		at uslhcom?
uhid*		at uhidev?		# USB generic HID support
aue*		at uhub?		# ADMtek AN986 Pegasus Ethernet
atu*		at uhub?		# Atmel AT76c50x based 802.11b
axe*		at uhub?		# ASIX Electronics AX88172 USB Ethernet
axen*		at uhub?		# ASIX Electronics AX88179 USB Ethernet
cue*		at uhub?		# CATC USB-EL1201A based Ethernet
kue*		at uhub?		# Kawasaki KL5KUSB101B based Ethernet
smsc*		at uhub?		# SMSC LAN95xx Ethernet
cdce*		at uhub?		# CDC Ethernet
upl*		at uhub?		# Prolific PL2301/PL2302 host-to-host `network'
ugl*		at uhub?		# Genesys Logic GL620USB-A host-to-host `network'
udav*		at uhub?		# Davicom DM9601 based Ethernet
url*		at uhub?		# Realtek RTL8150L based adapters
wi*		at uhub?		# WaveLAN IEEE 802.11DS
udsbr*		at uhub?		# D-Link DSB-R100 radio
radio*		at udsbr?		# USB radio
ugen*		at uhub?		# USB Generic driver
rum*		at uhub?		# Ralink RT2501USB/RT2601USB
# XXX missing usable drivers, like run(4).

ukphy*		at mii?			# "unknown" PHYs
rlphy*		at mii?			# Realtek 8139 internal PHYs
rgephy*		at mii?			# Realtek 8169S/8110S PHY

scsibus*	at scsi?
sd*		at scsibus?
st*		at scsibus?
cd*		at scsibus?
ch*		at scsibus?
uk*		at scsibus?

# GPIO "pin bus" drivers
gpioiic*	at gpio?		# I2C bus bit-banging
iic*		at gpioiic?
gpioow*		at gpio?		# 1-Wire bus bit-banging
onewire*	at gpioow?

# 1-Wire devices
option	ONEWIREVERBOSE
owid*		at onewire?		# ID
owsbm*		at onewire?		# Smart Battery Monitor
owtemp*		at onewire?		# Temperature
owctr*		at onewire?		# Counter device

# Pseudo-Devices
pseudo-device hotplug         1       # devices hot plugging
@


1.14
log
@use the same va entry point on all armv7 socs
Similiar changes were made in bitrig by Patrick Wildt.

As part of this change the physical load address for imx and sunxi have
changed.  Any u-boot settings that include it will need to be modified.

imx: 0x10800000 -> 0x10300000
sunxi: 0x40800000 -> 0x40300000

Tested by bmercer, canacar and myself.
ok bmercer@@
@
text
@d1 1
a1 1
# $OpenBSD: GENERIC-SUNXI,v 1.13 2015/04/16 09:09:49 mpi Exp $
@


1.13
log
@Enable ualea(4) where we have uhub(4), these USB device lists cry for
unification...
@
text
@d1 1
a1 1
# $OpenBSD: GENERIC-SUNXI,v 1.12 2015/01/04 20:55:38 uaa Exp $
d24 2
a25 5
makeoptions	KERNEL_BASE_PHYS="0x40800000"
makeoptions	KERNEL_BASE_VIRT="0xc0800000"
options	BUILD_STARTUP_PAGETABLE
options	STARTUP_PAGETABLE_ADDR=0x40200000
options	SDRAM_START="0x40000000"
@


1.12
log
@add new driver uslhcom(4) USB HID based UART.
@
text
@d1 1
a1 1
# $OpenBSD: GENERIC-SUNXI,v 1.11 2014/12/11 19:44:17 tedu Exp $
d88 1
@


1.11
log
@dragonflybsd has added a urio driver. conservation of urios requires
that we delete ours, which isn't actually useful.
ok mpi sthen
@
text
@d1 1
a1 1
# $OpenBSD: GENERIC-SUNXI,v 1.10 2014/11/24 02:03:37 brad Exp $
d113 2
@


1.10
log
@use the correct capitalization for Realtek.
@
text
@d1 1
a1 1
# $OpenBSD: GENERIC-SUNXI,v 1.9 2014/11/09 05:12:15 jsg Exp $
a126 1
urio*		at uhub?		# Diamond Multimedia Rio 500
@


1.9
log
@remove commented entries for tedu'd bluetooth drivers
@
text
@d1 1
a1 1
# $OpenBSD: GENERIC-SUNXI,v 1.8 2014/11/04 12:34:06 jsg Exp $
d135 1
a135 1
rlphy*		at mii?			# RealTek 8139 internal PHYs
@


1.8
log
@Add rgephy(4) for the RTL8211E phy in the LeMaker Banana Pi and Banana Pro.
@
text
@d1 1
a1 1
# $OpenBSD: GENERIC-SUNXI,v 1.7 2014/07/12 21:56:56 tedu Exp $
a129 1
#ubt*		at uhub? disable	# USB Bluetooth
@


1.7
log
@"Dr. Jones. Again we see there is nothing you can possess which I cannot
take away."

remove uyap. no effect except on hppa where it was strangely enabled.
@
text
@d1 1
a1 1
# $OpenBSD: GENERIC-SUNXI,v 1.6 2014/04/07 08:27:23 brad Exp $
d137 1
@


1.6
log
@Add axen(4) wherever axe(4) is.

ok mpi@@ yuo@@
@
text
@d1 1
a1 1
# $OpenBSD: GENERIC-SUNXI,v 1.5 2014/03/05 19:48:22 miod Exp $
a127 1
#uyap*		at uhub?		# Y@@P firmware loader
@


1.5
log
@Remove TIMEZONE and DST options from GENERIC-* kernels.
Remove APERTURE, DDB_SAFE_CONSOLE and *_DEBUG from RAMDISK-* kernels.
Add option USBVERBOSE to all kernels.
@
text
@d1 1
a1 1
# $OpenBSD: GENERIC-SUNXI,v 1.4 2013/12/08 09:09:47 martynas Exp $
d117 1
@


1.4
log
@Enable rum(4) for armv7.  Committing through it on pandaboard.
OK rapha@@, jasper@@.
@
text
@d1 1
a1 1
# $OpenBSD: GENERIC-SUNXI,v 1.3 2013/11/15 19:42:20 sasano Exp $
a22 2
options	TIMEZONE=0	# time zone to adjust RTC time by
options	DST=0		# daylight saving time used by RTC
a31 2
options	AHCI_DEBUG

d47 2
@


1.3
log
@Added dev/usb/if_ugl.c, a driver for Genesys Logic GL620USB-A
USB host-to-host link cable. This driver is derived from upl(4).
@
text
@d1 1
a1 1
# $OpenBSD: GENERIC-SUNXI,v 1.2 2013/10/27 03:06:25 aalm Exp $
d134 1
@


1.2
log
@enable gpioctl(8) for armv7, and add associated devices on armv7/sunxi.

ok jasper@@, patrick@@, rapha@@
@
text
@d1 1
a1 1
# $OpenBSD: GENERIC-SUNXI,v 1.1 2013/10/23 17:08:47 jasper Exp $
d124 1
@


1.1
log
@rename 'allwinner' to 'sunxi' to actually match the SoC name instead of using
the vendor to follow our naming convention.

ok aalm@@ patrick@@
@
text
@d1 1
a1 1
# $OpenBSD: GENERIC-ALLWINNER,v 1.1 2013/10/22 13:22:20 jasper Exp $
d144 13
@

