head	1.89;
access;
symbols
	OPENBSD_6_1:1.77.0.4
	OPENBSD_6_1_BASE:1.77
	OPENBSD_6_0:1.28.0.2
	OPENBSD_6_0_BASE:1.28
	OPENBSD_5_9:1.7.0.2
	OPENBSD_5_9_BASE:1.7
	OPENBSD_5_8:1.6.0.4
	OPENBSD_5_8_BASE:1.6;
locks; strict;
comment	@# @;


1.89
date	2017.09.21.12.11.29;	author patrick;	state Exp;
branches;
next	1.88;
commitid	2BHq8Uw3wvKx1Ewf;

1.88
date	2017.08.27.21.27.14;	author patrick;	state Exp;
branches;
next	1.87;
commitid	zjkwuQdjJNUpJWKg;

1.87
date	2017.08.27.21.23.49;	author patrick;	state Exp;
branches;
next	1.86;
commitid	MX6md4m4AlnbSOXI;

1.86
date	2017.08.25.20.09.34;	author patrick;	state Exp;
branches;
next	1.85;
commitid	ZVnrBKyTDZzMZZqt;

1.85
date	2017.08.25.20.04.31;	author patrick;	state Exp;
branches;
next	1.84;
commitid	nneSU1hX3LEqgQNF;

1.84
date	2017.08.25.20.00.34;	author patrick;	state Exp;
branches;
next	1.83;
commitid	ScZRzRegDuUeTgcb;

1.83
date	2017.07.25.20.39.12;	author kettenis;	state Exp;
branches;
next	1.82;
commitid	1AQtw49c6dKMolll;

1.82
date	2017.07.25.19.39.27;	author kettenis;	state Exp;
branches;
next	1.81;
commitid	0Bg8vQWEOidfnFh8;

1.81
date	2017.07.24.20.27.58;	author kettenis;	state Exp;
branches;
next	1.80;
commitid	Pcqsp67vphM5MAF8;

1.80
date	2017.07.23.19.26.03;	author kettenis;	state Exp;
branches;
next	1.79;
commitid	QTAjuDt18QJKihIr;

1.79
date	2017.07.05.14.58.59;	author visa;	state Exp;
branches;
next	1.78;
commitid	7daH9Zx8v5hOMEN1;

1.78
date	2017.05.21.17.44.52;	author kettenis;	state Exp;
branches;
next	1.77;
commitid	uJ1WLdLYPDBojaEV;

1.77
date	2017.03.24.20.31.58;	author patrick;	state Exp;
branches;
next	1.76;
commitid	mIgRZsjkmWknSUeL;

1.76
date	2017.03.24.20.27.27;	author patrick;	state Exp;
branches;
next	1.75;
commitid	ZiUOoev6lEENB8z4;

1.75
date	2017.03.12.12.44.35;	author kettenis;	state Exp;
branches;
next	1.74;
commitid	07TZniEZaR8Vrvkd;

1.74
date	2017.03.12.12.32.04;	author kettenis;	state Exp;
branches;
next	1.73;
commitid	jNImWymcRGJbS1x2;

1.73
date	2017.03.11.00.13.48;	author kettenis;	state Exp;
branches;
next	1.72;
commitid	xzsrQywzfou8hImy;

1.72
date	2017.03.09.20.18.40;	author kettenis;	state Exp;
branches;
next	1.71;
commitid	NfbLzBDktYfghffV;

1.71
date	2017.03.06.07.41.58;	author kettenis;	state Exp;
branches;
next	1.70;
commitid	ElPtONkRhgn2bBpC;

1.70
date	2017.03.06.06.50.47;	author kettenis;	state Exp;
branches;
next	1.69;
commitid	0riBc0M0lMWyUY1w;

1.69
date	2017.03.05.21.03.17;	author deraadt;	state Exp;
branches;
next	1.68;
commitid	J4Nb98QnTMyDHHYD;

1.68
date	2017.03.04.22.11.37;	author deraadt;	state Exp;
branches;
next	1.67;
commitid	yJlT6smoYAagbdcU;

1.67
date	2017.03.03.01.53.03;	author jsg;	state Exp;
branches;
next	1.66;
commitid	eZDrKW3nXTOZrx9V;

1.66
date	2017.03.01.04.34.09;	author jsg;	state Exp;
branches;
next	1.65;
commitid	LPkqi4LHoJvhm3Ba;

1.65
date	2017.01.23.22.43.17;	author jsg;	state Exp;
branches;
next	1.64;
commitid	Fy401xainn82tInW;

1.64
date	2016.10.23.18.50.34;	author kettenis;	state Exp;
branches;
next	1.63;
commitid	mOwNztTM0fyFumab;

1.63
date	2016.10.22.15.16.25;	author kettenis;	state Exp;
branches;
next	1.62;
commitid	mjaDtGaGcrXazKVz;

1.62
date	2016.10.21.20.11.36;	author patrick;	state Exp;
branches;
next	1.61;
commitid	6DQ5ncJymHu3V1lU;

1.61
date	2016.10.09.23.46.23;	author jsg;	state Exp;
branches;
next	1.60;
commitid	81NzNvE8jnVEgl5T;

1.60
date	2016.10.09.11.14.22;	author kettenis;	state Exp;
branches;
next	1.59;
commitid	aiJLMeOtKpZ2nF7H;

1.59
date	2016.10.09.01.40.42;	author jsg;	state Exp;
branches;
next	1.58;
commitid	Of2rCa9qI1b33BPT;

1.58
date	2016.10.08.09.50.14;	author kettenis;	state Exp;
branches;
next	1.57;
commitid	FICmyJkPAYUIRIay;

1.57
date	2016.10.08.06.45.02;	author jsg;	state Exp;
branches;
next	1.56;
commitid	CJbbKA8PC6YsqXGt;

1.56
date	2016.10.07.19.10.46;	author patrick;	state Exp;
branches;
next	1.55;
commitid	i5AQDcbzShllWpUd;

1.55
date	2016.10.07.14.43.50;	author patrick;	state Exp;
branches;
next	1.54;
commitid	8jzmBz9SIEValqiC;

1.54
date	2016.10.07.07.24.21;	author patrick;	state Exp;
branches;
next	1.53;
commitid	eJsivTm30QlTa4mh;

1.53
date	2016.10.05.22.06.48;	author kettenis;	state Exp;
branches;
next	1.52;
commitid	WddFsarPAXG7fLxc;

1.52
date	2016.10.03.01.59.20;	author jsg;	state Exp;
branches;
next	1.51;
commitid	3fibvKh5HnTb4IKT;

1.51
date	2016.09.23.17.59.17;	author kettenis;	state Exp;
branches;
next	1.50;
commitid	G6vP1hjedt063xQO;

1.50
date	2016.09.18.18.16.00;	author kettenis;	state Exp;
branches;
next	1.49;
commitid	baEd1JYtYxyO1XyV;

1.49
date	2016.09.15.21.55.51;	author jsg;	state Exp;
branches;
next	1.48;
commitid	Dgkzu94uH0qCkA1H;

1.48
date	2016.08.21.06.36.23;	author jsg;	state Exp;
branches;
next	1.47;
commitid	TvBCJg2VADuVxapL;

1.47
date	2016.08.20.19.44.02;	author kettenis;	state Exp;
branches;
next	1.46;
commitid	e9H2GRAJtDHIokwR;

1.46
date	2016.08.20.15.44.04;	author kettenis;	state Exp;
branches;
next	1.45;
commitid	PxjV2jD6yVzqolQF;

1.45
date	2016.08.20.13.24.38;	author patrick;	state Exp;
branches;
next	1.44;
commitid	fTfCppDRiD8lCmCR;

1.44
date	2016.08.17.13.05.02;	author patrick;	state Exp;
branches;
next	1.43;
commitid	lvew3YexMpLMskOM;

1.43
date	2016.08.13.22.07.01;	author kettenis;	state Exp;
branches;
next	1.42;
commitid	XVm4E4Xrhg4vkNT2;

1.42
date	2016.08.11.04.33.06;	author jsg;	state Exp;
branches;
next	1.41;
commitid	RjguXQv1MwBBCk6s;

1.41
date	2016.08.11.01.53.18;	author jsg;	state Exp;
branches;
next	1.40;
commitid	8d7pfhv9A9vfWoLW;

1.40
date	2016.08.10.07.09.37;	author jsg;	state Exp;
branches;
next	1.39;
commitid	xPxJFbaoDNpjKnno;

1.39
date	2016.08.07.18.00.53;	author kettenis;	state Exp;
branches;
next	1.38;
commitid	m7oMz5wMIB9B5x0b;

1.38
date	2016.08.06.10.07.45;	author jsg;	state Exp;
branches;
next	1.37;
commitid	tIvsLgDtJFao46i9;

1.37
date	2016.08.06.09.50.55;	author jsg;	state Exp;
branches;
next	1.36;
commitid	fIXY8HLnKdu6ncQ4;

1.36
date	2016.08.06.00.54.02;	author jsg;	state Exp;
branches;
next	1.35;
commitid	8ZCwiWXIMaYvtRPC;

1.35
date	2016.08.06.00.40.54;	author jsg;	state Exp;
branches;
next	1.34;
commitid	f9CL15ugAdqaysNt;

1.34
date	2016.08.06.00.30.47;	author jsg;	state Exp;
branches;
next	1.33;
commitid	GFtSVyG3B40OA9Mt;

1.33
date	2016.08.05.21.45.37;	author kettenis;	state Exp;
branches;
next	1.32;
commitid	cC1sDGu6YTDVjn44;

1.32
date	2016.08.05.21.29.23;	author kettenis;	state Exp;
branches;
next	1.31;
commitid	Xq7LuNuhuMX8kXoV;

1.31
date	2016.08.05.20.38.17;	author kettenis;	state Exp;
branches;
next	1.30;
commitid	0UKrx15wJC7DcQ7u;

1.30
date	2016.08.05.19.00.25;	author kettenis;	state Exp;
branches;
next	1.29;
commitid	PWnrMbYWs67oDQuR;

1.29
date	2016.08.04.15.52.52;	author kettenis;	state Exp;
branches;
next	1.28;
commitid	WNhzA3xU3jFFVhST;

1.28
date	2016.07.12.19.17.49;	author kettenis;	state Exp;
branches;
next	1.27;
commitid	j8BR8WPk8oGLOlFW;

1.27
date	2016.07.12.19.04.53;	author kettenis;	state Exp;
branches;
next	1.26;
commitid	HwyhluY3okYYtnte;

1.26
date	2016.07.10.14.01.10;	author kettenis;	state Exp;
branches;
next	1.25;
commitid	kY49vfFOAjzEfi87;

1.25
date	2016.07.09.12.32.50;	author kettenis;	state Exp;
branches;
next	1.24;
commitid	F6qY7qK1yCCGr9gt;

1.24
date	2016.06.28.04.41.37;	author jmatthew;	state Exp;
branches;
next	1.23;
commitid	YZhKLotIHp83F5gq;

1.23
date	2016.06.26.09.06.35;	author jsg;	state Exp;
branches;
next	1.22;
commitid	CMQxDZf1xqtqsVBC;

1.22
date	2016.06.26.07.25.05;	author jsg;	state Exp;
branches;
next	1.21;
commitid	v9jtqNaGlLrYhcFN;

1.21
date	2016.06.26.05.16.33;	author jsg;	state Exp;
branches;
next	1.20;
commitid	f0l6MGjSmDe958Pt;

1.20
date	2016.06.19.14.27.35;	author jsg;	state Exp;
branches;
next	1.19;
commitid	EAq933IGu4UbAbmj;

1.19
date	2016.06.18.05.59.26;	author jsg;	state Exp;
branches;
next	1.18;
commitid	bnlg9HFFbmynQBKE;

1.18
date	2016.06.14.06.32.47;	author kettenis;	state Exp;
branches;
next	1.17;
commitid	eHsSTS5JKb7IT5gg;

1.17
date	2016.06.12.13.02.06;	author kettenis;	state Exp;
branches;
next	1.16;
commitid	OAwuwG6755ENLV7d;

1.16
date	2016.06.11.14.26.18;	author jsg;	state Exp;
branches;
next	1.15;
commitid	fpeQM4i2VQYEVdrK;

1.15
date	2016.06.11.07.07.59;	author jsg;	state Exp;
branches;
next	1.14;
commitid	Zr64rpowLR8WCMql;

1.14
date	2016.06.11.06.42.16;	author jsg;	state Exp;
branches;
next	1.13;
commitid	P3TWFuwvfad353N2;

1.13
date	2016.06.10.02.51.02;	author jsg;	state Exp;
branches;
next	1.12;
commitid	4HAcV5SJLsxJJHU0;

1.12
date	2016.06.03.01.36.46;	author jsg;	state Exp;
branches;
next	1.11;
commitid	YA7F4i0IfchI1r7q;

1.11
date	2016.05.23.00.05.35;	author deraadt;	state Exp;
branches;
next	1.10;
commitid	Lca4at0KuB1ho5Xb;

1.10
date	2016.05.21.12.37.28;	author kettenis;	state Exp;
branches;
next	1.9;
commitid	G3o1EvQ7WmmxJj2I;

1.9
date	2016.05.21.07.19.24;	author jsg;	state Exp;
branches;
next	1.8;
commitid	OWPFNuoqUE520FJ7;

1.8
date	2016.05.02.08.15.55;	author patrick;	state Exp;
branches;
next	1.7;
commitid	SxPSz6lxaCE62Tnc;

1.7
date	2015.09.13.14.43.42;	author deraadt;	state Exp;
branches;
next	1.6;
commitid	PagnWj5w6v9fYKcj;

1.6
date	2015.07.17.22.52.28;	author tedu;	state Exp;
branches;
next	1.5;
commitid	OOrGfFHYAn65M2qc;

1.5
date	2015.07.17.17.02.52;	author jsg;	state Exp;
branches;
next	1.4;
commitid	ukNk3r6GTKJ57Fd6;

1.4
date	2015.06.29.04.52.34;	author jsg;	state Exp;
branches;
next	1.3;
commitid	07H0kGMQZhgLy4Z6;

1.3
date	2015.06.08.14.59.34;	author jsg;	state Exp;
branches;
next	1.2;
commitid	j9ZTEJswqpFfutrh;

1.2
date	2015.05.26.02.13.07;	author jsg;	state Exp;
branches;
next	1.1;
commitid	8Il9NHdNZD6Avhhs;

1.1
date	2015.05.20.01.44.20;	author jsg;	state Exp;
branches;
next	;
commitid	AyYz7FgJK6jKwvRv;


desc
@@


1.89
log
@Enable dwxe(4) on armv7 as well for use on the Allwinner H3 SoC.

Prompted by jsg@@
@
text
@#	$OpenBSD: RAMDISK,v 1.88 2017/08/27 21:27:14 patrick Exp $

machine		armv7 arm

makeoptions	KERNEL_BASE_VIRT="0xc0300000"

maxusers	4			# estimated number of users
option		CPU_ARMv7		# Support the ARMv7

option		TIMEZONE=0
option		DST=0
option		SMALL_KERNEL
option		NO_PROPOLICE
option		BOOT_CONFIG

option		MINIROOTSIZE=15360
option		RAMDISK_HOOKS

option		FFS
option		FFS2
option		MSDOSFS
option		INET6
option		EXT2FS
option		NFSCLIENT

option		USBVERBOSE

config		bsd root on rd0a swap on rd0b

# The main bus device
mainbus0	at root
simplebus*	at fdt?
cpu0		at mainbus?

# Cortex-A9
cortex0		at mainbus?
ampintc*	at fdt?
amptimer*	at cortex?
agtimer*	at fdt?
armliicc*	at cortex?

# iMX
imxccm*		at fdt? early 1		# clock control module
imxiomuxc*	at fdt? early 1		# iomux controller
imxocotp*	at fdt?			# on-chip otp controller
imxgpc*		at fdt?			# power controller
imxdog*		at fdt?			# watchdog timer
imxgpio*	at fdt?			# user-visible GPIO pins?
fec*		at fdt?			# Ethernet
imxuart*	at fdt?			# onboard uarts
imxiic*		at fdt?			# i2c
iic*		at imxiic?
imxesdhc*	at fdt?			# SDHC controller
sdmmc*		at imxesdhc?		# SD/MMC bus
imxahci*	at fdt?			# AHCI/SATA
imxehci*	at fdt?			# EHCI
usb*		at imxehci?

# OMAP3xxx/OMAP4xxx SoC
omap0		at mainbus?
omapid*		at omap?

# OMAP on-chip devices
intc*		at fdt?			# OMAP3 interrupt controller
omwugen*	at fdt?			# Wake-up generator
#edma*		at fdt?			# OMAP3 dma controller
prcm*		at omap?		# power/clock controller
ompinmux*	at fdt?			# pin muxing
omdog*		at fdt?			# watchdog timer
omgpio*		at fdt?			# user-visible GPIO pins?
gpio*		at omgpio?
tiiic*		at fdt?
iic*		at tiiic?
gptimer*	at omap?		# general purpose timers
dmtimer*	at omap?		# am335x dual mode timers
omusbtll*	at omap?
cpsw*		at fdt?
com*		at fdt?			# onboard uarts
ommmc*		at fdt?			# SD/MMC card controller
sdmmc*		at ommmc?		# SD/MMC bus

omehci*		at fdt?			# EHCI
usb*		at omehci?

# Sunxi A1x/A20 SoC
sxiintc*	at fdt?			# A1x interrupt controller
sxipio*		at fdt? early 1		# GPIO pins for leds & PHYs
gpio*		at sxipio?
sxiccmu*	at fdt? early 1		# Clock Control Module/Unit
sxitimer*	at fdt? early 1
sxidog*		at fdt?			# watchdog timer
sxirtc*		at fdt?			# Real Time Clock
sxie*		at fdt?
dwge*		at fdt?
dwxe*		at fdt?
sxiahci*	at fdt?			# AHCI/SATA
sximmc*		at fdt?			# SD/MMC card controller
sdmmc*		at sximmc?		# SD/MMC bus
ehci*		at fdt?			# EHCI (shim)
usb*		at ehci?	#flags 0x1
#ohci*		at sunxi?
#usb*		at ohci?
sxitwi*		at fdt?			# Two-Wire Serial Interface
iic*		at sxitwi?		# I2C bus

# ARM Versatile Express
sysreg*		at fdt?
pluart*		at fdt?
plrtc*		at fdt?
virtio*		at fdt?

sdhc*		at fdt?
sdmmc*		at sdhc?

psci*		at fdt?
syscon*		at fdt?

# Exynos
#exdisplay*	at exynos?
#wsdisplay*	at exdisplay? console ?
exclock*	at fdt? early 1
expower*	at fdt? early 1
exsysreg*	at fdt? early 1
exmct*		at fdt? early 1
exdog*		at fdt?
exgpio*		at fdt? early 1
exiic*		at fdt?
iic*		at exiic?
exehci*		at fdt?
usb*		at exehci?
exdwusb*	at fdt?
xhci*		at fdt?
usb*		at xhci?
dwmmc*		at fdt?
sdmmc*		at dwmmc?
exrtc*		at fdt?
exuart*		at fdt?

# Raspberry Pi 2/3
bcmintc*	at fdt?
bcmdog*		at fdt?
dwctwo*		at fdt?
usb*		at dwctwo?

# Marvell SoC
mvacc*		at fdt? early 1
mvagc*		at fdt?
mvsysctrl*	at fdt?
mvmbus*		at fdt?
mvxhci*		at fdt?
usb*		at mvxhci?
mvahci*		at fdt?
mvpinctrl*	at fdt?
mvmdio*		at fdt?
mvneta*		at fdt?
mvmpic*		at fdt?
mvpxa*		at fdt?
sdmmc*		at mvpxa?

# Rockchip SoCs
rkclock*	at fdt? early 1
rkgrf*		at fdt? early 1
rkpinctrl*	at fdt? early 1
rkgpio*		at fdt?
dwdog*		at fdt?

axppmic*	at iic?			# axp209 pmic
crosec*		at iic?
wskbd*		at crosec? mux 1
pcfrtc*		at iic?
pcxrtc*		at iic?
tpspmic*	at iic?

# virtio devices
vioblk*		at virtio?
vio*		at virtio?
viomb*		at virtio?
viornd*		at virtio?
vioscsi*	at virtio?

# USB bus support
usb*		at ehci?	flags 0x1

uhub*		at usb?
uhub*		at uhub?
uhidev*		at uhub?
ukbd*		at uhidev?
wskbd*		at ukbd? mux 1
umass*		at uhub?
aue*		at uhub?		# ADMtek AN986 Pegasus Ethernet
atu*		at uhub?		# Atmel AT76c50x based 802.11b
axe*		at uhub?		# ASIX Electronics AX88172 USB Ethernet
axen*		at uhub?		# ASIX Electronics AX88179 USB Ethernet
cue*		at uhub?		# CATC USB-EL1201A based Ethernet
kue*		at uhub?		# Kawasaki KL5KUSB101B based Ethernet
smsc*		at uhub?		# SMSC LAN95xx Ethernet
cdce*		at uhub?		# CDC Ethernet
udav*		at uhub?		# Davicom DM9601 based Ethernet
mos*		at uhub?		# MOSCHIP MCS7730/7830 10/100 Ethernet
url*		at uhub?		# Realtek RTL8150L based adapters
ure*		at uhub?		# Realtek RTL8152 based adapters
wi*		at uhub?		# WaveLAN IEEE 802.11DS
upl*		at uhub?		# Prolific PL2301/PL2302 host-to-host
ugl*		at uhub?		# Genesys Logic GL620USB-A host-to-host
ural*		at uhub?		# Ralink RT2500
rum*		at uhub?		# Ralink RT2501USB/RT2601USB
run*		at uhub?		# Ralink RT2700U/RT2800U/RT3000U
zyd*		at uhub?		# Zydas ZD1211
upgt*		at uhub?		# Conexant/Intersil PrismGT SoftMAC USB
urtw*		at uhub?		# Realtek 8187
urtwn*		at uhub?		# Realtek RTL8188CU/RTL8192CU
rsu*		at uhub?		# Realtek RTL8188SU/RTL8191SU/RTL8192SU
uath*		at uhub?		# Atheros AR5005UG/AR5005UX
otus*		at uhub?		# Atheros AR9001U
athn*		at uhub?		# Atheros AR9002U

atphy*		at mii?			# Attansic F1 PHYs
rgephy*		at mii?			# Realtek 8169S/8110S PHY
rlphy*		at mii?			# Realtek 8139 internal PHYs
ukphy*		at mii?			# "unknown" PHYs

scsibus*	at scsi?
sd*		at scsibus?
cd*		at scsibus?

pseudo-device	openprom
pseudo-device	loop 1
pseudo-device	bpfilter 1
pseudo-device	rd 1
@


1.88
log
@Add mvpxa(4), a driver for the SDHC compliant controller on
the ARMADA 38x series (SolidRun ClearFog, Turris Omnia).

ok kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.87 2017/08/27 21:23:49 patrick Exp $
d95 1
@


1.87
log
@Enable generic sdhc(4) on FDT attachment driver.

ok kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.86 2017/08/25 20:09:34 patrick Exp $
d156 2
@


1.86
log
@Add mvneta(4), a driver for the Ethernet controller on the Armada
38x series (SoliodRun ClearFog, Turris Omnia) and the 37xx series
(ESPRESSObin).  Also add mvmdio(4), which is used to talk to the
MDIO bus.

ok kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.85 2017/08/25 20:04:31 patrick Exp $
d110 3
@


1.85
log
@Add mvmpic(4), a driver for the interrupt controller that sits between
the ARM Generic Interrupt Controller and the Ethernet controller on
the Armada 388 (SolidRun ClearFog, Turris Omnia).

ok kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.84 2017/08/25 20:00:34 patrick Exp $
d150 2
@


1.84
log
@Add mvpinctrl(4), a driver to configure pins on Marvell SoCs.  For now,
only the Armada 388 (SolidRun ClearFog, Turris Omnia) is supported.

ok kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.83 2017/07/25 20:39:12 kettenis Exp $
d150 1
@


1.83
log
@Enable dwdog(4) such that Rockchip RK3288 devices can reboot.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.82 2017/07/25 19:39:27 kettenis Exp $
d149 1
@


1.82
log
@Add rkclock(4), rkgrf(4), rkpinctrl(4) and rkgpio(4).  This makes OpenBSD
run on the ASUS Tinker Board with working SD-card and (almost) working
network.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.81 2017/07/24 20:27:58 kettenis Exp $
d155 1
@


1.81
log
@Enable pcxrtc(4).
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.80 2017/07/23 19:26:03 kettenis Exp $
d149 6
@


1.80
log
@Add sxitwi(4), a driver for the (i2c compatible) two-wire bus found on
several Allwinner SoCs.  From Artturi Alm, based on code from NetBSD.

Also add axppmic(4), a driver for the AXP209 i2c PMIC, which provides
power down support.  Written by Artturi Alm.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.79 2017/07/05 14:58:59 visa Exp $
d154 1
@


1.79
log
@Enable NFSCLIENT to let installation over NFS work.

OK kettenis@@, deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.78 2017/05/21 17:44:52 kettenis Exp $
d102 2
d150 1
@


1.78
log
@Add support for the SD/MMC controller found on Samsuung Exynos5.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.77 2017/03/24 20:31:58 patrick Exp $
d24 1
@


1.77
log
@Implement a driver for Marvell's AHCI controller.  This is in essence
a generic AHCI controller with the twist that the MBUS window needs
to be configured in the controller registers.  This enables use of
SATA on devices like the SolidRun ClearFog or Omnia Turris.

ok kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.76 2017/03/24 20:27:27 patrick Exp $
d127 2
a128 2
exesdhc*	at fdt?
sdmmc*		at exesdhc?
@


1.76
log
@Implement a driver for Marvell's XHCI controller.  This is in essence
a generic XHCI controller with the twist that the MBUS window needs
to be configured in the controller registers.  This enables use of
USB on devices like the SolidRun ClearFog or Omnia Turris.

ok kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.75 2017/03/12 12:44:35 kettenis Exp $
d145 1
@


1.75
log
@Hook exclock(4) up to the clock framework using a dummy implementation that
prints the clock ids it is being called for.  This allows us to identify
which clocks need to be implemented.

Attach early such that clocks are available when needed.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.74 2017/03/12 12:32:04 kettenis Exp $
d143 2
@


1.74
log
@Enable exdwusb(4) and xhci(4).
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.73 2017/03/11 00:13:48 kettenis Exp $
d114 1
a114 1
exclock*	at fdt?
@


1.73
log
@Enable exrtc(4).
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.72 2017/03/09 20:18:40 kettenis Exp $
d124 3
@


1.72
log
@Enable syscon(4) such that I can actually reboot the Odroid XU4.

ok patrick@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.71 2017/03/06 07:41:58 kettenis Exp $
d126 1
@


1.71
log
@De-platformize exynos.  Disable exdisplay(4) for now.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.70 2017/03/06 06:50:47 kettenis Exp $
d109 1
@


1.70
log
@Attach exiic(4) using the FDT.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.69 2017/03/05 21:03:17 deraadt Exp $
d111 2
a112 3
exynos0		at mainbus?
exdisplay*	at exynos?
wsdisplay*	at exdisplay? console ?
@


1.69
log
@match GENERIC
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.68 2017/03/04 22:11:37 deraadt Exp $
d120 1
a120 1
exiic*		at exynos?
@


1.68
log
@matching commit for RAMDISK: Convert a few exynos drivers to attach using the FDT.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.67 2017/03/03 01:53:03 jsg Exp $
d119 1
a119 1
exgpio*		at exynos?
@


1.67
log
@enable FFS2 on armv7 and arm64 ramdisks
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.66 2017/03/01 04:34:09 jsg Exp $
d114 5
a118 5
exclock*	at exynos?
expower*	at exynos?
exsysreg*	at exynos?
exmct*		at exynos?
exdog*		at exynos?
d122 3
a124 3
exehci*		at exynos?
ehci*		at exehci?
exesdhc*	at exynos?
@


1.66
log
@Dynamically attach edma(4) using the FDT.
From Ian Sutton.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.65 2017/01/23 22:43:17 jsg Exp $
d20 1
@


1.65
log
@enable bcmdog on armv7 as well
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.64 2016/10/23 18:50:34 kettenis Exp $
d64 1
a64 1
#edma*		at omap?		# OMAP3 dma controller
@


1.64
log
@De-platformize sunxi.  This removes the board initialization code that sets up
SRAM for the EMAC.  Instead we rely on u-boot setting this up for us.

ok jsg@@, patrick@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.63 2016/10/22 15:16:25 kettenis Exp $
d129 1
@


1.63
log
@Attach sxitimer(4) using the fdt.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.62 2016/10/21 20:11:36 patrick Exp $
a83 3
sunxi0		at mainbus?

# Sunxi on-chip devices
@


1.62
log
@Implement a driver for Marvell's Mbus bridge.  This is the component
that lets e.g. the CPU access a USB controller or the USB controller
access the system's RAM.  The bridge needs to be configured for the
devices before we can access the controller or a controller our memory.

Since it otherwise acts like a simplebus, simply attach simplebus once
we are finished.

"looks good to me" kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.61 2016/10/09 23:46:23 jsg Exp $
d91 1
a91 1
sxitimer*	at sunxi?
@


1.61
log
@Add psci(4) a driver for the reset and power down portion of the
ARM Power State Coordination Interface (PSCI) specification.

Tested with qemu-system-arm -M virt.

Feedback from patrick@@, ok kettenis@@ tom@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.60 2016/10/09 11:14:22 kettenis Exp $
d139 1
@


1.60
log
@Attach sxiccmu(4) using the fdt.

ok jsg@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.59 2016/10/09 01:40:42 jsg Exp $
d109 2
@


1.59
log
@Remove the vexpress platform abstraction and board id.  All the devices
that attached to vexpress have been converted to fdt so this is no
longer required.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.58 2016/10/08 09:50:14 kettenis Exp $
d90 1
a90 1
sxiccmu*	at sunxi?		# Clock Control Module/Unit
@


1.58
log
@Attach sxipio(4) using the fdt.

ok jsg@@, patrick@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.57 2016/10/08 06:45:02 jsg Exp $
a104 1
vexpress0	at mainbus?
@


1.57
log
@Dynamically attach sysreg(4) using the FDT.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.56 2016/10/07 19:10:46 patrick Exp $
d88 1
a88 1
sxipio*		at sunxi?		# GPIO pins for leds & PHYs
@


1.56
log
@Implement a driver for Marvell Armada's clock gates.  This basically
turns on a peripheral's power and functionality.

ok kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.55 2016/10/07 14:43:50 patrick Exp $
d106 1
a106 1
sysreg*		at vexpress?
@


1.55
log
@Support the Marvell Armada's System Controller to be able to reset
the machine.

ok kettenis@@
ok tom@@ on previous version
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.54 2016/10/07 07:24:21 patrick Exp $
d136 1
@


1.54
log
@Add a driver for the Marvell Armada 380 core clock.  This driver
provides information about the four big clocks that are part of
this SoC.  Attach it early as the serial console needs it and the
core clock is after the console in the device tree.

ok kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.53 2016/10/05 22:06:48 kettenis Exp $
d136 1
@


1.53
log
@Make imxdog(4) set cpuresetfn, and remove all the imx platform that is no
longer needed, including the imx board IDs.

ok patrick@@, jsg@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.52 2016/10/03 01:59:20 jsg Exp $
d133 3
@


1.52
log
@Disable sitaracm and add a new ompinmux driver for omap pin muxing/pad
configuration that attaches with the fdt and writes values to registers
based on the pinctrl data in the fdt.  Handles 16 bit values
(OMAP3/OMAP4) and 32 bit values (AM335x/AM57xx).

Feedback from and ok kettenis@@ tom@@ on an earlier version.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.51 2016/09/23 17:59:17 kettenis Exp $
a40 1
imx0		at mainbus?		# iMX SoC
@


1.51
log
@Attach imxocotp(4) using the fdt.  Since this means that imxtemp(4) attaches
before imxocotp(4), delay reading the temperature sensor calibration
information until after imxocotp(4) attaches.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.50 2016/09/18 18:16:00 kettenis Exp $
d67 1
a67 1
sitaracm*	at omap?		# sitara control module
@


1.50
log
@Convert imxccm(4) and imxiomuxc(4) to attach using the fdt.  Use the "early"
locator to attach them before other drivers that might need their services.

ok patrick@@, jsg@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.49 2016/09/15 21:55:51 jsg Exp $
a41 1
imxocotp*	at imx?			# on-chip otp controller
d44 1
@


1.49
log
@Add omwugen(4) a driver for the TI logic that generates wakeup events
and routes interrupts to the GIC/ampintc(4).

The code is derived from imxgpc(4) which has the same role on imx.

In the pandaboard device tree wugen is the default interrupt parent
and is used for the hsmmc nodes.  Adding this driver makes ommmc(4)
interrupts work again on pandaboard.

ok kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.48 2016/08/21 06:36:23 jsg Exp $
d42 3
a44 2
imxccm*		at imx?			# clock control module
imxiomuxc*	at imx?			# iomux controller
a46 1
imxocotp*	at imx?			# on-chip otp controller
@


1.48
log
@Dynamically attach exuart using the FDT.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.47 2016/08/20 19:44:02 kettenis Exp $
d64 1
@


1.47
log
@Enable sximmc(4).
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.46 2016/08/20 15:44:04 kettenis Exp $
d127 1
a127 1
exuart*		at exynos?
@


1.46
log
@Replace bcmmuart(4) with com(4).

ok patrick@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.45 2016/08/20 13:24:38 patrick Exp $
d97 2
@


1.45
log
@sxiuart(4) has been replaced with com(4).

ok kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.44 2016/08/17 13:05:02 patrick Exp $
a128 1
bcmmuart*	at fdt?
@


1.44
log
@Replace sxiuart(4) with the mostly compatible com(4).

The Synopsys DesignWare 8250 throws an interrupt if it detects a write
to LCR while it was busy.  Read the USR register to clear the interrupt
so we don't get flooded.

The sunxi machines also use a different frequency on the consoles.  As
we have no clock framework, especially not for early consoles, match on
known Allwinner compatibles to set a known frequency.

ok kettenis@@ mglocker@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.43 2016/08/13 22:07:01 kettenis Exp $
a93 1
#sxiuart*	at fdt?			# onboard UARTs
@


1.43
log
@Add the shim to make dwge(4) attach to simplebus(4).  This brings us
working gigabit on the Allwinner A20.  Probably won't work yet on other
Allwinner SoCs due to differences in how the clocks get set up.

Based on an earlier diff from patrick@@.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.42 2016/08/11 04:33:06 jsg Exp $
d94 1
a94 1
sxiuart*	at fdt?			# onboard UARTs
@


1.42
log
@Dynamically attach omgpio(4) using the FDT.

am335x has a compatible string of "ti,omap4-gpio" and has the same
offsets as omap4, so combine the omap4 and am335x cases when setting up
function pointers.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.41 2016/08/11 01:53:18 jsg Exp $
d96 1
@


1.41
log
@Dynamically attach omehci using the FDT.
ok kettenis@@ patrick@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.40 2016/08/10 07:09:37 jsg Exp $
d68 1
a68 1
omgpio*		at omap?		# user-visible GPIO pins?
@


1.40
log
@attach agtimer with fdt on RAMDISK as well
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.39 2016/08/07 18:00:53 kettenis Exp $
d80 2
a81 2
ehci*		at omap?		# EHCI (shim)
usb*		at ehci?
@


1.39
log
@Add the Raspberry Pi 2/3 devices here as well.

Spotted by patrick@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.38 2016/08/06 10:07:45 jsg Exp $
d37 1
a37 1
agtimer*	at cortex?
@


1.38
log
@Dynamically attach intc(4) using the FDT and switch omap/am335x
drivers that use the FDT over to the FDT interrupt establish API.

ok kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.37 2016/08/06 09:50:55 jsg Exp $
d126 6
@


1.37
log
@Disable edma(4).  It isn't currently used and is getting in the way of
future changes as it establishes an interrupt but hasn't been converted
to attach with the fdt.

ok kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.36 2016/08/06 00:54:02 jsg Exp $
d63 1
a63 1
intc*		at omap?		# OMAP3 interrupt controller
@


1.36
log
@Dynamically attach pluart(4) using the FDT.
ok kettenis@@ patrick@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.35 2016/08/06 00:40:54 jsg Exp $
d64 1
a64 1
edma*		at omap?		# OMAP3 dma controller
@


1.35
log
@Dynamically attach plrtc(4) using the FDT.
ok kettenis@@ patrick@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.34 2016/08/06 00:30:47 jsg Exp $
d105 1
a105 1
pluart*		at vexpress?
@


1.34
log
@Dynamically attach virtio(4) using the FDT.
ok kettenis@@ patrick@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.33 2016/08/05 21:45:37 kettenis Exp $
d106 1
a106 1
plrtc*		at vexpress?
@


1.33
log
@Dynamically attach sxidog(4).
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.32 2016/08/05 21:29:23 kettenis Exp $
d107 1
a107 1
virtio*		at vexpress?
@


1.32
log
@Dynamically attach sxirtc(4); another board_id check bites the dust.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.31 2016/08/05 20:38:17 kettenis Exp $
d92 1
a92 1
sxidog*		at sunxi?		# watchdog timer
@


1.31
log
@We don't want drivers with numbers in their names.

Requested by deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.30 2016/08/05 19:00:25 kettenis Exp $
d93 1
a93 1
sxirtc*		at sunxi?		# Real Time Clock
@


1.30
log
@Switch the sunxi platform over to the new interrupt establish API.  This
involves turning sxiahci(4) into a real driver that dynamically attaches.
ehci(4) now also attaches dynamically.

ok jsg@@, patrick@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.29 2016/08/04 15:52:52 kettenis Exp $
d87 1
a87 1
a1xintc*	at fdt?			# A1x interrupt controller
@


1.29
log
@Dynamically attach ampintc(4) and make it register itself as an interrupt
controller.  Switch all i.MX6 devices over to the new FDT-aware interrupt
establish API and enable imxgpc(4).

This may break other platforms that use ampintc(4) as their interrupt
controller.  We will fix this as soon as possible by switching them over
to the new interrupt establish API as well.

This also removes the hack in fec(4) to avoid the gpio-based interrupt
workaround.  This commit is an essential step on the road to fix that
issue properly.

ok patrick@@, jsg@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.28 2016/07/12 19:17:49 kettenis Exp $
d87 1
a87 1
a1xintc*	at sunxi?		# A1x interrupt controller
d96 2
a97 2
ahci*		at sunxi?		# AHCI/SATA (shim)
ehci*		at sunxi?		# EHCI (shim)
@


1.28
log
@Turn ahci(4) glue code for the i.MX6 platform into its own imxahci(4) driver
such that we can don't end up with conflicting attachments of other
SoC-specific glue code.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.27 2016/07/12 19:04:53 kettenis Exp $
d35 1
a35 1
ampintc*	at cortex?
d44 1
@


1.27
log
@Change over to imxehci(4) here as well.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.26 2016/07/10 14:01:10 kettenis Exp $
d53 1
a53 1
ahci*		at fdt?			# AHCI/SATA
@


1.26
log
@Dynamically attach imxgpio(4) using the FDT.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.25 2016/07/09 12:32:50 kettenis Exp $
d54 2
a55 2
ehci*		at fdt?			# EHCI (shim)
usb*		at ehci?
@


1.25
log
@Dynamically attach i.MX6 ehci(4) using the FDT.

ok jsg@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.24 2016/06/28 04:41:37 jmatthew Exp $
d46 1
a46 1
imxgpio*	at imx?			# user-visible GPIO pins?
@


1.24
log
@enable ure(4) where we already have url(4)
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.23 2016/06/26 09:06:35 jsg Exp $
d54 1
a54 1
ehci*		at imx?			# EHCI (shim)
@


1.23
log
@Dynamically attach cpsw(4) with the FDT.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.22 2016/06/26 07:25:05 jsg Exp $
d158 1
@


1.22
log
@Dynamically attach tiiic using the FDT.

Only match on omap4 compatible controllers such as the one in the
am335x on bbb.  omap3 has different register offsets and a different
compatible string.

This reuses kettenis' fdt i2c scan function from imxiic(4).
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.21 2016/06/26 05:16:33 jsg Exp $
d74 1
a74 1
cpsw*		at omap?
@


1.21
log
@Dynamically attach omdog(4) using the FDT.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.20 2016/06/19 14:27:35 jsg Exp $
d69 2
a70 2
#tiiic*		at omap?
#iic*		at tiiic?
@


1.20
log
@dynamically attach omap uart with fdt
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.19 2016/06/18 05:59:26 jsg Exp $
d66 1
a66 1
omdog*		at omap?		# watchdog timer
@


1.19
log
@Dynamically attach ommmc with fdt.  Offset the start of the memory region
by 0x100 for nodes compatible with "ti,omap4-hsmmc" to get the same
offsets as omap3.  Handle both the nintr 1 (omap3/am335x) and nintr 3
(omap4) cases in attach.  Ideally the "interrupts" property will be
handled by the interrupt controller drivers directly in future.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.18 2016/06/14 06:32:47 kettenis Exp $
d75 1
a75 1
com*		at omap?		# onboard uarts
@


1.18
log
@imxdog* at fdt? here too.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.17 2016/06/12 13:02:06 kettenis Exp $
d76 1
a76 1
ommmc*		at omap?		# SD/MMC card controller
@


1.17
log
@Dynamically attach fec(4) using the FDT.

ok jsg@@, patrick@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.16 2016/06/11 14:26:18 jsg Exp $
d44 1
a44 1
imxdog*		at imx?			# watchdog timer
@


1.16
log
@dynamically attach imxuart using the FDT
ok kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.15 2016/06/11 07:07:59 jsg Exp $
d47 1
a47 1
fec*		at imx?			# Ethernet
@


1.15
log
@dynamically attach sxiuart using the FDT
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.14 2016/06/11 06:42:16 jsg Exp $
d48 1
a48 1
imxuart*	at imx?			# onboard uarts
@


1.14
log
@dynamically attach sxie(4) using the FDT
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.13 2016/06/10 02:51:02 jsg Exp $
d93 1
a93 1
sxiuart*	at sunxi?		# onboard UARTs
@


1.13
log
@attach imxahci and imxesdhc to fdt on RAMDISK as well
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.12 2016/06/03 01:36:46 jsg Exp $
d94 1
a94 1
sxie*		at sunxi?
@


1.12
log
@rename imxenet to fec
ok patrick@@ kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.11 2016/05/23 00:05:35 deraadt Exp $
d51 1
a51 1
imxesdhc*	at imx?			# SDHC controller
d53 1
a53 1
ahci*		at imx?			# AHCI/SATA
@


1.11
log
@Change openprom into a pseudo-device, because not all arm platforms
will have it.  This is a bit of a hack.  Maybe it should attach off
mainbus as a proper fake device, but that would have more tendrils..
checked by jsg
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.10 2016/05/21 12:37:28 kettenis Exp $
d47 1
a47 1
imxenet*	at imx?			# ethernet
@


1.10
log
@Dynamically attach imxiic(4) and use the FDT to enumerate devices on i2c
busses.  Users of the CuBox-i and Hummingboard now need to boot with an FDT
to see the RTC.

ok jsg@@, patrick@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.9 2016/05/21 07:19:24 jsg Exp $
d182 1
@


1.9
log
@Copy dtb files to miniroots and install disk.  Increase the ramdisk size
and force long filenames on the first mount of fat 16 filesystems so
this works.

U-boot scripts have not yet been changed to load these files.

ok kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.8 2016/05/02 08:15:55 patrick Exp $
d49 1
a49 1
imxiic*		at imx?			# i2c
d128 1
@


1.8
log
@Rework mainbus and implement simplebus to be able to span a tree-like
topology based on device tree information.  Introduce a common attach
args structure to be used for all fdt-capable bus devices.

ok jsg@@ kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.7 2015/09/13 14:43:42 deraadt Exp $
d16 1
a16 1
option		MINIROOTSIZE=10240
@


1.7
log
@remove delta
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.6 2015/07/17 22:52:28 tedu Exp $
d30 1
@


1.6
log
@remove obsolete INET kernel option
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.5 2015/07/17 17:02:52 jsg Exp $
d162 1
a162 1
zyd*		at uhub?		# Zydas ZD1211/ZD1211B
@


1.5
log
@enable exynos
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.4 2015/06/29 04:52:34 jsg Exp $
a20 1
option		INET
@


1.4
log
@enable vexpress
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.3 2015/06/08 14:59:34 jsg Exp $
d107 22
@


1.3
log
@enable agtimer on the ramdisk as well
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.2 2015/05/26 02:13:07 jsg Exp $
d100 14
@


1.2
log
@Sync usb devices with amd64.
Prompted by djm noticing uslcom(4) was not included.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.1 2015/05/20 01:44:20 jsg Exp $
d37 1
a37 1
#agtimer*	at cortex?
@


1.1
log
@Now all the socs use the same va entry point and don't have any
conflicting symbols we can combine the configs.

Multiple umg files are still required however.  The bsd.umg target in
the kernel is replaced by targets for bsd.IMX.umg, bsd.OMAP.umg and
bsd.SUNXI.umg.
@
text
@d1 1
a1 1
#	$OpenBSD$
d103 1
d106 2
a107 23

umodem*		at uhub?		# USB Modems/Serial
ucom*		at umodem?
uvisor*		at uhub?		# Handspring Visor
ucom*		at uvisor?
uvscom*		at uhub?		# SUNTAC Slipper U VS-10U serial
ucom*		at uvscom?
ubsa*		at uhub?		# Belkin serial adapter
ucom*		at ubsa?
uftdi*		at uhub?		# FTDI FT8U100AX serial adapter
ucom*		at uftdi?
uplcom*		at uhub?		# I/O DATA USB-RSAQ2 serial adapter
ucom*		at uplcom?
umct*		at uhub?		# MCT USB-RS232 serial adapter
ucom*		at umct?
uaudio*		at uhub?		# USB Audio
audio*		at uaudio?
umidi*		at uhub?		# USB MIDI
midi*		at umidi?
ulpt*		at uhub?		# USB Printers
umass*		at uhub?		# USB Mass Storage devices
uhidev*		at uhub?		# Human Interface Devices
ukbd*		at uhidev?		# USB keyboard
d109 1
a109 3
uslhcom*	at uhidev?		# Silicon Labs CP2110 USB HID UART
ucom*		at uslhcom?
uhid*		at uhidev?		# USB generic HID support
a117 2
upl*		at uhub?		# Prolific PL2301/PL2302 host-to-host
ugl*		at uhub?		# Genesys Logic GL620USB-A host-to-host
d119 1
d122 3
a124 3
udsbr*		at uhub?		# D-Link DSB-R100 radio
radio*		at udsbr?		# USB radio
ugen*		at uhub?		# USB Generic driver
d126 9
@

