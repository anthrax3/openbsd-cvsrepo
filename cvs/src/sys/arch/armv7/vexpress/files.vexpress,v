head	1.10;
access;
symbols
	OPENBSD_6_2:1.10.0.6
	OPENBSD_6_2_BASE:1.10
	OPENBSD_6_1:1.10.0.4
	OPENBSD_6_1_BASE:1.10
	OPENBSD_6_0:1.3.0.2
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.2.0.2
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.4
	OPENBSD_5_8_BASE:1.2;
locks; strict;
comment	@# @;


1.10
date	2017.01.26.01.46.19;	author jsg;	state Exp;
branches;
next	1.9;
commitid	DVor4li8N6n5BUTd;

1.9
date	2016.10.09.01.40.43;	author jsg;	state Exp;
branches;
next	1.8;
commitid	Of2rCa9qI1b33BPT;

1.8
date	2016.10.08.06.45.02;	author jsg;	state Exp;
branches;
next	1.7;
commitid	CJbbKA8PC6YsqXGt;

1.7
date	2016.08.31.16.19.40;	author jsg;	state Exp;
branches;
next	1.6;
commitid	hkMa4gzwtj49TUef;

1.6
date	2016.08.06.00.54.02;	author jsg;	state Exp;
branches;
next	1.5;
commitid	8ZCwiWXIMaYvtRPC;

1.5
date	2016.08.06.00.40.54;	author jsg;	state Exp;
branches;
next	1.4;
commitid	f9CL15ugAdqaysNt;

1.4
date	2016.08.06.00.30.47;	author jsg;	state Exp;
branches;
next	1.3;
commitid	GFtSVyG3B40OA9Mt;

1.3
date	2016.05.02.08.15.55;	author patrick;	state Exp;
branches;
next	1.2;
commitid	SxPSz6lxaCE62Tnc;

1.2
date	2015.06.14.05.01.31;	author jsg;	state Exp;
branches;
next	1.1;
commitid	gxU2Yk5XGgvQze1H;

1.1
date	2015.06.08.06.33.16;	author jsg;	state Exp;
branches;
next	;
commitid	TKnNVNES86I6ApFq;


desc
@@


1.10
log
@The only difference between armv7 and arm64 fdt virtio attachments is an
uneeded include.  Remove the include and move to MI fdt directory.
@
text
@#	$OpenBSD: files.vexpress,v 1.9 2016/10/09 01:40:43 jsg Exp $

device sysreg
attach sysreg at fdt
file	arch/armv7/vexpress/sysreg.c	sysreg
@


1.9
log
@Remove the vexpress platform abstraction and board id.  All the devices
that attached to vexpress have been converted to fdt so this is no
longer required.
@
text
@d1 1
a1 4
#	$OpenBSD: files.vexpress,v 1.8 2016/10/08 06:45:02 jsg Exp $

attach	virtio at fdt with virtio_mmio
file	arch/armv7/vexpress/virtio_mmio.c	virtio_mmio
@


1.8
log
@Dynamically attach sysreg(4) using the FDT.
@
text
@d1 1
a1 9
#	$OpenBSD: files.vexpress,v 1.7 2016/08/31 16:19:40 jsg Exp $

define vexpress {}
device vexpress: vexpress
attach vexpress at fdt
file	arch/armv7/vexpress/vexpress_machdep.c	vexpress needs-flag
file	arch/armv7/vexpress/vexpress.c		vexpress
file	arch/armv7/vexpress/vexpress_a9.c	vexpress
file	arch/armv7/vexpress/vexpress_a15.c	vexpress
@


1.7
log
@pl011 and pl031 are licenseable peripherals from arm present in multiple socs.
Move the pluart and plrtc drivers for them out of the vexpress directory
and into dev to reflect this and rename the files to match the driver names.

discussed with patrick and kettenis
@
text
@d1 1
a1 1
#	$OpenBSD: files.vexpress,v 1.6 2016/08/06 00:54:02 jsg Exp $
d15 1
a15 1
attach sysreg at vexpress
@


1.6
log
@Dynamically attach pluart(4) using the FDT.
ok kettenis@@ patrick@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.vexpress,v 1.5 2016/08/06 00:40:54 jsg Exp $
a9 8

device pluart
attach pluart at fdt
file	arch/armv7/vexpress/pl011.c	pluart

device plrtc
attach plrtc at fdt
file	arch/armv7/vexpress/pl031.c	plrtc
@


1.5
log
@Dynamically attach plrtc(4) using the FDT.
ok kettenis@@ patrick@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.vexpress,v 1.4 2016/08/06 00:30:47 jsg Exp $
d12 1
a12 1
attach pluart at vexpress
@


1.4
log
@Dynamically attach virtio(4) using the FDT.
ok kettenis@@ patrick@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.vexpress,v 1.3 2016/05/02 08:15:55 patrick Exp $
d16 1
a16 1
attach plrtc at vexpress
@


1.3
log
@Rework mainbus and implement simplebus to be able to span a tree-like
topology based on device tree information.  Introduce a common attach
args structure to be used for all fdt-capable bus devices.

ok jsg@@ kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.vexpress,v 1.2 2015/06/14 05:01:31 jsg Exp $
d19 1
a19 1
attach	virtio at vexpress with virtio_mmio
@


1.2
log
@add a driver for the ARM PrimeCell PL031 RTC
@
text
@d1 1
a1 1
#	$OpenBSD: files.vexpress,v 1.1 2015/06/08 06:33:16 jsg Exp $
d5 1
a5 1
attach vexpress at mainbus
@


1.1
log
@Add initial support for the ARM Versatile Express boards as emulated by
qemu with virtio memory ranges.

Unfortunately the vexpress-a9 and vexpress-a15 boards/targets have
different load addresses and memory maps.

Code for the PL011 UART and mmio virtio attachment from Patrick Wildt
in bitrig.
@
text
@d1 1
a1 1
#	$OpenBSD$
d14 4
@

