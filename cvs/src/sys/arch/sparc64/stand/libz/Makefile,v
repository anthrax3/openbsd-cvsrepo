head	1.8;
access;
symbols
	OPENBSD_6_2:1.8.0.22
	OPENBSD_6_2_BASE:1.8
	OPENBSD_6_1:1.8.0.20
	OPENBSD_6_1_BASE:1.8
	OPENBSD_6_0:1.8.0.16
	OPENBSD_6_0_BASE:1.8
	OPENBSD_5_9:1.8.0.12
	OPENBSD_5_9_BASE:1.8
	OPENBSD_5_8:1.8.0.14
	OPENBSD_5_8_BASE:1.8
	OPENBSD_5_7:1.8.0.6
	OPENBSD_5_7_BASE:1.8
	OPENBSD_5_6:1.8.0.10
	OPENBSD_5_6_BASE:1.8
	OPENBSD_5_5:1.8.0.8
	OPENBSD_5_5_BASE:1.8
	OPENBSD_5_4:1.8.0.4
	OPENBSD_5_4_BASE:1.8
	OPENBSD_5_3:1.8.0.2
	OPENBSD_5_3_BASE:1.8
	OPENBSD_5_2:1.6.0.36
	OPENBSD_5_2_BASE:1.6
	OPENBSD_5_1_BASE:1.6
	OPENBSD_5_1:1.6.0.34
	OPENBSD_5_0:1.6.0.32
	OPENBSD_5_0_BASE:1.6
	OPENBSD_4_9:1.6.0.30
	OPENBSD_4_9_BASE:1.6
	OPENBSD_4_8:1.6.0.28
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.6.0.24
	OPENBSD_4_7_BASE:1.6
	OPENBSD_4_6:1.6.0.26
	OPENBSD_4_6_BASE:1.6
	OPENBSD_4_5:1.6.0.22
	OPENBSD_4_5_BASE:1.6
	OPENBSD_4_4:1.6.0.20
	OPENBSD_4_4_BASE:1.6
	OPENBSD_4_3:1.6.0.18
	OPENBSD_4_3_BASE:1.6
	OPENBSD_4_2:1.6.0.16
	OPENBSD_4_2_BASE:1.6
	OPENBSD_4_1:1.6.0.14
	OPENBSD_4_1_BASE:1.6
	OPENBSD_4_0:1.6.0.12
	OPENBSD_4_0_BASE:1.6
	OPENBSD_3_9:1.6.0.10
	OPENBSD_3_9_BASE:1.6
	OPENBSD_3_8:1.6.0.8
	OPENBSD_3_8_BASE:1.6
	OPENBSD_3_7:1.6.0.6
	OPENBSD_3_7_BASE:1.6
	OPENBSD_3_6:1.6.0.4
	OPENBSD_3_6_BASE:1.6
	SMP_SYNC_A:1.6
	SMP_SYNC_B:1.6
	OPENBSD_3_5:1.6.0.2
	OPENBSD_3_5_BASE:1.6
	OPENBSD_3_4:1.3.0.14
	OPENBSD_3_4_BASE:1.3
	UBC_SYNC_A:1.3
	OPENBSD_3_3:1.3.0.12
	OPENBSD_3_3_BASE:1.3
	OPENBSD_3_2:1.3.0.10
	OPENBSD_3_2_BASE:1.3
	OPENBSD_3_1:1.3.0.8
	OPENBSD_3_1_BASE:1.3
	UBC_SYNC_B:1.3
	UBC:1.3.0.6
	UBC_BASE:1.3
	SMP:1.3.0.4
	OPENBSD_3_0:1.3.0.2
	OPENBSD_3_0_BASE:1.3
	SPARC64:1.1.1.1
	NETBSD:1.1.1;
locks; strict;
comment	@# @;


1.8
date	2012.08.30.19.29.14;	author pascal;	state Exp;
branches;
next	1.7;

1.7
date	2012.08.21.14.46.20;	author pascal;	state Exp;
branches;
next	1.6;

1.6
date	2003.12.17.05.17.07;	author millert;	state Exp;
branches;
next	1.5;

1.5
date	2003.12.17.05.01.06;	author millert;	state Exp;
branches;
next	1.4;

1.4
date	2003.12.17.04.23.37;	author millert;	state Exp;
branches;
next	1.3;

1.3
date	2001.09.06.19.12.34;	author jason;	state Exp;
branches
	1.3.4.1;
next	1.2;

1.2
date	2001.08.22.10.25.55;	author art;	state Exp;
branches;
next	1.1;

1.1
date	2001.08.18.15.51.10;	author jason;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.08.18.15.51.10;	author jason;	state Exp;
branches;
next	;

1.3.4.1
date	2001.10.31.03.07.59;	author nate;	state Exp;
branches;
next	1.3.4.2;

1.3.4.2
date	2004.02.19.10.50.02;	author niklas;	state Exp;
branches;
next	;


desc
@@


1.8
log
@Kill NOPIE and NOPIE_FLAGS in sparc64/stand.  Binaries are identical according
to deraadt@@, ok kettenis@@
@
text
@#	$OpenBSD: Makefile,v 1.7 2012/08/21 14:46:20 pascal Exp $

S=${.CURDIR}/../../../..
ZDST=${.OBJDIR}

.PATH: ${S}/lib/libz

.include "${S}/lib/libz/Makefile"
CFLAGS+=${CEXTRAFLAGS} ${AFLAGS} -I${S} -fno-pie
@


1.7
log
@Add NOPIE= bits for sys/arch/*/stand to ensure that bootblocks will always be
built with -fno-pie.  This gets the hairiest part of PIE out of the way ...

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.6 2003/12/17 05:17:07 millert Exp $
a4 1
NOPIE=
d9 1
a9 1
CFLAGS+=${CEXTRAFLAGS} ${AFLAGS} -I${S}
@


1.6
log
@For some reason sparc64 seems to need the equivalent of -I/sys where
the others do not.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.5 2003/12/17 05:01:06 millert Exp $
d5 1
@


1.5
log
@remove unneeded bits introduced in previous commit
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 2003/12/17 04:23:37 millert Exp $
d9 1
a9 1
CFLAGS+=${CEXTRAFLAGS} ${AFLAGS}
@


1.4
log
@Simply include the main libz Makefile instead of trying to roll our own.
@
text
@d1 1
a1 1
#	$OpenBSD$
a4 1
SADIR=${.CURDIR}/..
d9 1
a9 1
CFLAGS+=${CEXTRAFLAGS} ${AFLAGS} ${SACFLAGS} -I${S}/lib/libsa ${DEBUGFLAGS}
@


1.3
log
@use some make magic (borrowed from macppc) to build {obj/}machine
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.2 2001/08/22 10:25:55 art Exp $
d3 3
a5 1
LIB=	z
d7 1
a7 1
.PATH:  ${.CURDIR}/../../../../lib/libz
d9 2
a10 20
CLEANFILES+= machine

CFLAGS= -nostdinc ${CEXTRAFLAGS} ${AFLAGS} -O2 -D_ZLIB_PRIVATE -I${.CURDIR}/../../../.. -I${.CURDIR}/../../../../lib/libz -I${.CURDIR}/.

SRCS=	adler32.c crc32.c infblock.c infcodes.c inffast.c \
	inflate.c inftrees.c infutil.c

${OBJS}:	${.CURDIR}/../Makefile.inc

.if !make(libdep) && !make(sadep) && !make(salibdir) && !make(kernlibdir) && !make(obj)
.BEGIN:
	@@([ -h machine ] || ln -s ${.CURDIR}/../../include machine)
.endif

install:

NOPIC=
NOPROFILE=

.include <bsd.lib.mk>
@


1.3.4.1
log
@Sync the SMP branch to something just after 3.0
@
text
@d1 1
a1 1
#	$OpenBSD$
@


1.3.4.2
log
@Merge of current from two weeks agointo the SMP branch
@
text
@d3 1
a3 2
S=${.CURDIR}/../../../..
ZDST=${.OBJDIR}
d5 1
a5 1
.PATH: ${S}/lib/libz
d7 20
a26 2
.include "${S}/lib/libz/Makefile"
CFLAGS+=${CEXTRAFLAGS} ${AFLAGS} -I${S}
@


1.2
log
@Make it work with our make.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.1.1.1 2001/08/18 15:51:10 jason Exp $
d14 1
a14 2
.NOPATH:machine
beforedepend: machine
d16 4
a19 1
${OBJS}:	${.CURDIR}/../Makefile.inc
a26 4

machine:
	rm -f $@@
	ln -s ${.CURDIR}/../../include $@@
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.1 1997/09/17 10:46:24 downsj Exp $
d15 1
a15 1
${SRCS}: machine
@


1.1.1.1
log
@Enough of NetBSD/sparc64 for ofwboot to compile/link
@
text
@@
