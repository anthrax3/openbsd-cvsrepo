head	1.23;
access;
symbols
	OPENBSD_6_1_BASE:1.23
	OPENBSD_6_0:1.23.0.6
	OPENBSD_6_0_BASE:1.23
	OPENBSD_5_9:1.23.0.2
	OPENBSD_5_9_BASE:1.23
	OPENBSD_5_8:1.23.0.4
	OPENBSD_5_8_BASE:1.23
	OPENBSD_5_7:1.22.0.2
	OPENBSD_5_7_BASE:1.22
	OPENBSD_5_6:1.21.0.16
	OPENBSD_5_6_BASE:1.21
	OPENBSD_5_5:1.21.0.14
	OPENBSD_5_5_BASE:1.21
	OPENBSD_5_4:1.21.0.10
	OPENBSD_5_4_BASE:1.21
	OPENBSD_5_3:1.21.0.8
	OPENBSD_5_3_BASE:1.21
	OPENBSD_5_2:1.21.0.6
	OPENBSD_5_2_BASE:1.21
	OPENBSD_5_1_BASE:1.21
	OPENBSD_5_1:1.21.0.4
	OPENBSD_5_0:1.21.0.2
	OPENBSD_5_0_BASE:1.21
	OPENBSD_4_9:1.20.0.6
	OPENBSD_4_9_BASE:1.20
	OPENBSD_4_8:1.20.0.4
	OPENBSD_4_8_BASE:1.20
	OPENBSD_4_7:1.20.0.2
	OPENBSD_4_7_BASE:1.20
	OPENBSD_4_6:1.19.0.12
	OPENBSD_4_6_BASE:1.19
	OPENBSD_4_5:1.19.0.8
	OPENBSD_4_5_BASE:1.19
	OPENBSD_4_4:1.19.0.6
	OPENBSD_4_4_BASE:1.19
	OPENBSD_4_3:1.19.0.4
	OPENBSD_4_3_BASE:1.19
	OPENBSD_4_2:1.19.0.2
	OPENBSD_4_2_BASE:1.19
	OPENBSD_4_1:1.18.0.2
	OPENBSD_4_1_BASE:1.18
	OPENBSD_4_0:1.17.0.2
	OPENBSD_4_0_BASE:1.17
	OPENBSD_3_9:1.15.0.4
	OPENBSD_3_9_BASE:1.15
	OPENBSD_3_8:1.15.0.2
	OPENBSD_3_8_BASE:1.15
	OPENBSD_3_7:1.14.0.2
	OPENBSD_3_7_BASE:1.14
	OPENBSD_3_6:1.7.0.4
	OPENBSD_3_6_BASE:1.7
	SMP_SYNC_A:1.7
	SMP_SYNC_B:1.7
	OPENBSD_3_5:1.7.0.2
	OPENBSD_3_5_BASE:1.7
	OPENBSD_3_4:1.6.0.2
	OPENBSD_3_4_BASE:1.6
	UBC_SYNC_A:1.5
	OPENBSD_3_3:1.3.0.12
	OPENBSD_3_3_BASE:1.3
	OPENBSD_3_2:1.3.0.10
	OPENBSD_3_2_BASE:1.3
	OPENBSD_3_1:1.3.0.8
	OPENBSD_3_1_BASE:1.3
	UBC_SYNC_B:1.3
	UBC:1.3.0.6
	UBC_BASE:1.3
	SMP:1.3.0.2
	OPENBSD_3_0:1.3.0.4
	OPENBSD_3_0_BASE:1.3;
locks; strict;
comment	@# @;


1.23
date	2015.07.17.22.52.29;	author tedu;	state Exp;
branches;
next	1.22;
commitid	OOrGfFHYAn65M2qc;

1.22
date	2014.10.10.05.43.36;	author deraadt;	state Exp;
branches;
next	1.21;
commitid	eyBTAcDp3o260Uyq;

1.21
date	2011.06.29.20.52.09;	author matthew;	state Exp;
branches;
next	1.20;

1.20
date	2009.07.12.19.17.50;	author kettenis;	state Exp;
branches;
next	1.19;

1.19
date	2007.05.01.15.22.23;	author deraadt;	state Exp;
branches;
next	1.18;

1.18
date	2006.12.09.20.06.48;	author miod;	state Exp;
branches;
next	1.17;

1.17
date	2006.06.26.22.16.23;	author miod;	state Exp;
branches;
next	1.16;

1.16
date	2006.06.21.19.28.08;	author jason;	state Exp;
branches;
next	1.15;

1.15
date	2005.05.01.07.54.43;	author david;	state Exp;
branches;
next	1.14;

1.14
date	2005.03.05.01.49.02;	author miod;	state Exp;
branches;
next	1.13;

1.13
date	2005.03.05.01.44.52;	author miod;	state Exp;
branches;
next	1.12;

1.12
date	2004.11.29.18.12.50;	author miod;	state Exp;
branches;
next	1.11;

1.11
date	2004.10.20.23.11.01;	author miod;	state Exp;
branches;
next	1.10;

1.10
date	2004.09.21.19.39.44;	author drahn;	state Exp;
branches;
next	1.9;

1.9
date	2004.09.16.09.35.37;	author deraadt;	state Exp;
branches;
next	1.8;

1.8
date	2004.09.16.09.14.04;	author mickey;	state Exp;
branches;
next	1.7;

1.7
date	2004.03.20.14.56.05;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	2003.06.13.20.27.50;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	2003.05.14.23.32.35;	author miod;	state Exp;
branches;
next	1.4;

1.4
date	2003.05.13.22.45.11;	author miod;	state Exp;
branches;
next	1.3;

1.3
date	2001.10.10.04.24.12;	author deraadt;	state Exp;
branches
	1.3.2.1
	1.3.6.1;
next	1.2;

1.2
date	2001.10.09.23.07.57;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	2001.10.09.21.32.17;	author deraadt;	state Exp;
branches;
next	;

1.3.2.1
date	2001.10.31.03.07.57;	author nate;	state Exp;
branches;
next	1.3.2.2;

1.3.2.2
date	2003.05.16.00.29.40;	author niklas;	state Exp;
branches;
next	1.3.2.3;

1.3.2.3
date	2004.02.19.10.49.59;	author niklas;	state Exp;
branches;
next	1.3.2.4;

1.3.2.4
date	2004.06.05.23.10.59;	author niklas;	state Exp;
branches;
next	;

1.3.6.1
date	2003.05.19.21.46.57;	author tedu;	state Exp;
branches;
next	;


desc
@@


1.23
log
@remove obsolete INET kernel option
@
text
@#	$OpenBSD: RAMDISKU1,v 1.22 2014/10/10 05:43:36 deraadt Exp $

machine		sparc64
maxusers	4

option		TIMEZONE=0
option		DST=0
option		SMALL_KERNEL
option		NO_PROPOLICE
option		BOOT_CONFIG

option		RAMDISK_HOOKS
option		MINIROOTSIZE=6144

option		FFS

option		WSEMUL_SUN	# provide sun terminal emulation; required
option		WSEMUL_NO_VT100	# do not provide vt100 terminal emulation

config		bsd root on rd0a

mainbus0	at root
cpu0		at mainbus0

sbus*		at mainbus0				# Ultra 1
clock*		at sbus?				# Mostek clock
timer*		at mainbus0				# Timer chip

le*		at sbus?			# Lance Ethernet - AMD7990
ledma*		at sbus?
le*		at ledma?
lebuffer*	at sbus?
le*		at lebuffer?
hme*		at sbus?
gem*		at sbus?

# The flags on the esp entries below work around deficiencies in the driver:
#	bits 0-7:  disable disconnect/reselect for the corresponding target
#	bits 8-15: disable synch negotiation for target [bit-8]
#	Note: targets 4-7 have disconnect/reselect enabled on the premise
#	      that tape devices normally have one of these targets. Tape
#	      devices should be allowed to disconnect for the SCSI bus
#	      to operate acceptably.
dma*		at sbus?
esp*		at dma?
esp*		at sbus?

scsibus*	at scsi?
sd*		at scsibus?
#cd*		at scsibus?

nsphy*		at mii?			# NS and compatible PHYs
qsphy*		at mii?			# Quality Semi QS6612 PHYs
ukphy*		at mii?			# Unknown PHYs

zs*		at sbus?
zstty*		at zs?
zskbd*		at zs?
wskbd*		at zskbd?

agten*		at sbus?		# Fujitsu AG-10e framebuffer
wsdisplay*	at agten?
bwtwo*		at sbus?		# bwtwo monochrome framebuffer
wsdisplay*	at bwtwo?
cgsix*		at sbus?		# cgsix 8-bit accelerated framebuffer
wsdisplay*	at cgsix?
cgthree*	at sbus?		# cgthree 8-bit framebuffer
wsdisplay*	at cgthree?
cgtwelve*	at sbus?		# cgtwelve 24-bit color framebuffer
wsdisplay*	at cgtwelve?
creator*	at mainbus0		# Creator3D/Elite3D framebuffers
wsdisplay*	at creator?
mgx*		at sbus?		# SMS MGX/MGXPlus framebuffer
wsdisplay*	at mgx?
rfx*		at sbus?		# RasterFlex framebuffer series
wsdisplay*	at rfx?
tvtwo*		at sbus?		# Parallax XVideo/PowerVideo framebuffer
wsdisplay*	at tvtwo?
vigra*		at sbus?		# Viagra framebuffer series
wsdisplay*	at vigra?
zx*		at sbus?		# Sun Leo (ZX) framebuffer
wsdisplay*	at zx?

xbox*		at sbus?
sbus*		at xbox?

pcons0		at mainbus0		# PROM console

pseudo-device	rd 1
pseudo-device	loop 1
@


1.22
log
@Significant unification of RAMDISK* config files, making them diffable.
This makes it easier to remove components not required to do an install,
and subsequently add other desireable components ...
In snapshots (in various forks) for about a week.
Do some upgrades and installs, please.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISKU1,v 1.21 2011/06/29 20:52:09 matthew Exp $
a15 1
option		INET
@


1.21
log
@Replace all instances of "scsibus* at hba?" with a single "scsibus* at
scsi?" rule, similar to how ethernet PHY drivers attach at mii.

Discussed on icb.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISKU1,v 1.20 2009/07/12 19:17:50 kettenis Exp $
a2 1
# Machine architecture; required by config(8)
d4 1
d6 5
a10 2
# maxusers means mostly "let's get small" in terms of kernel malloc's
maxusers	2
d15 2
a16 12
#option		DDB		# need this to see what's happening

option		TIMEZONE=0	# time zone to adjust RTC time by
option		DST=0		# daylight saving time used by RTC

option		SMALL_KERNEL
option		NO_PROPOLICE
option		FFS		# UFS
#option		NFSCLIENT	# Network File System client
#option		CD9660		# ISO 9660 + Rock Ridge file system
option		INET		# IP + ICMP + TCP + UDP
option		BOOT_CONFIG	# add support for boot -c
d21 1
a21 6
# Generic swap; second partition of root disk or network.
config		bsd	root on rd0a

# Main bus and CPU .. all systems.
mainbus0 at root
cpu0	at mainbus0
d23 2
a24 2
# Bus types found on SPARC systems.
sbus*	at mainbus0				# Ultra 1
d26 3
a28 2
clock*	at sbus?				# Mostek clock
timer*	at mainbus0				# Timer chip
a34 5

#qec*	at sbus?				# Quad-ethernet
#qe*	at qec?
#be*	at qec?

d38 1
a38 3
#
# Note the flags on the esp entries below, that work around
# deficiencies in the current driver:
d45 16
a60 21
#
dma*	at sbus?		# SBus
esp*	at dma?			# SBus
esp*	at sbus?

# These entries find devices on all SCSI busses and assign
# unit numers dynamically.
scsibus* at scsi?
sd*	at scsibus?		# SCSI disks
#cd*	at scsibus?		# SCSI CD-ROMs

# Media Independent Interface (mii) drivers)
nsphy*	at mii?			# NS and compatible PHYs
qsphy*	at mii?			# Quality Semi QS6612 PHYs
ukphy*	at mii?			# Unknown PHYs

# Z8530 based serial ports
zs*	at sbus?
zstty*	at zs?
zskbd*	at zs?
wskbd*	at zskbd?
a61 1
# Framebuffers
a84 1
# ``XBox'' SBus Expansion
d88 1
a88 2
## PROM console driver -- if all else fails
pcons0	at mainbus0			# PROM console
d90 2
a91 2
pseudo-device	rd	2	# ramdisk
pseudo-device	loop	1	# network loopback
@


1.20
log
@Enable gem@@sbus.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISKU1,v 1.19 2007/05/01 15:22:23 deraadt Exp $
a66 1
scsibus*	at esp?
d70 1
@


1.19
log
@RAMDISK kernels do not need DIAGNOSTIC
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISKU1,v 1.18 2006/12/09 20:06:48 miod Exp $
d52 1
@


1.18
log
@Do not make sun terminal emulation selected by the wsemul_sun frame buffer
attribute anymore; remove it and use option WSEMUL_SUN instead, which gets
added to all sparc* kernels.

While there, do not compile vt100 emulation on sparc* kernels, this saves 16+
KB of text.

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISKU1,v 1.17 2006/06/26 22:16:23 miod Exp $
a18 1
#option		DIAGNOSTIC	# internal consistency checks
@


1.17
log
@Enable wide targets on FAS366 esp; note that this changes the way esp
user-controllable device flags are parsed, be sure to rerun config(8) on your
next kernel compile.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISKU1,v 1.16 2006/06/21 19:28:08 jason Exp $
d25 3
@


1.16
log
@Don't need option SUN4U.  It's not -really- an option on sparc64, duh.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISKU1,v 1.15 2005/05/01 07:54:43 david Exp $
d62 1
a62 1
esp*	at dma? flags 0x0000	# SBus
@


1.15
log
@spacing; ok miod@@ deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISKU1,v 1.14 2005/03/05 01:49:02 miod Exp $
a4 2

option		SUN4U
@


1.14
log
@Now that xbox sort-of works on sparc64, port the cgtwelve driver, since
the only way to connect it to a sparc64 machine is via an xbox device.
@
text
@d1 1
a1 1
# 	$OpenBSD: RAMDISKU1,v 1.12 2004/11/29 18:12:50 miod Exp $
@


1.13
log
@Preliminary xbox support: attaches, memory mapping and interrupts work, but
DMA transfers are not implemented yet, and are disabled (which causes drivers
to SBus cards on the xbox to fail to attach).

In practice, this allows frame buffers to work, maybe more devices; DMA
support will be worked on in the near future.
@
text
@d85 3
a87 1
bwtwo*		at sbus?		# bw2, sbus mono framebuffer
d89 1
a89 1
cgsix*		at sbus?		# cg6, sbus color framebuffer
d91 1
a91 1
cgthree*	at sbus?		# cg3, sbus color framebuffer
d93 6
a98 2
zx*		at sbus?		# Sun Leo (ZX) framebuffer
wsdisplay*	at zx?
a100 4
mgx*		at sbus?		# SMS MGX/MGXPlus framebuffer
wsdisplay*	at mgx?
agten*		at sbus?		# Fujitsu AG-10e framebuffer
wsdisplay*	at agten?
d105 2
a106 2
creator*	at mainbus0
wsdisplay*	at creator?
@


1.12
log
@Port the remaining two sbus framebuffer drivers to sparc64; tvtwo untested
due to lack of hardware.
@
text
@d1 1
a1 1
# 	$OpenBSD: RAMDISKU1,v 1.11 2004/10/20 23:11:01 miod Exp $
d105 4
@


1.11
log
@Provide real console drivers on installation media, and deem pcons obsolete
(I still need to port a few SBUS video drivers from sparc to sparc64 for
pcons to become really really unlikely used).

GENERIC is just being reordered, RAMDISK* get the real additions, and it
still fits even on the U1/1E/2 floppy disk.
@
text
@d1 1
a1 1
# 	$OpenBSD: RAMDISKU1,v 1.10 2004/09/21 19:39:44 drahn Exp $
d99 4
@


1.10
log
@change sbus0 to sbus* for consistency, miod@@
@
text
@d1 1
a1 1
# 	$OpenBSD: RAMDISKU1,v 1.9 2004/09/16 09:35:37 deraadt Exp $
a40 3
## PROM console driver -- if all else fails
pcons0	at mainbus0				# PROM console

d77 27
@


1.9
log
@spacing
@
text
@d1 1
a1 1
# 	$OpenBSD: RAMDISKU1,v 1.8 2004/09/16 09:14:04 mickey Exp $
d36 1
a36 1
sbus0	at mainbus0				# Ultra 1
@


1.8
log
@cleanup deafult locators (blah ?); please check that your most hated architecture is still fluffy (;
@
text
@d1 1
a1 1
# 	$OpenBSD: RAMDISKU1,v 1.7 2004/03/20 14:56:05 deraadt Exp $
d38 1
a38 1
clock*	at sbus?				# Mostek clock 
@


1.7
log
@add support for the lebuffer sbus le units
@
text
@d1 1
a1 1
# 	$OpenBSD: RAMDISKU1,v 1.6 2003/06/13 20:27:50 brad Exp $
d66 2
a67 2
dma*	at sbus?				# SBus
esp*	at dma? flags 0x0000			# SBus
d73 2
a74 2
sd*		at scsibus? target ? lun ?	# SCSI disks
#cd*		at scsibus? target ? lun ?	# SCSI CD-ROMs
d77 3
a79 3
nsphy*	at mii? phy ?				# NS and compatible PHYs
qsphy*	at mii? phy ?				# Quality Semi QS6612 PHYs
ukphy*	at mii? phy ?				# Unknown PHYs
@


1.6
log
@no more "option _LP64".
@
text
@d1 1
a1 1
# 	$OpenBSD: RAMDISKU1,v 1.5 2003/05/14 23:32:35 miod Exp $
d44 5
a48 3
le*	at sbus?				# Lance Ethernet - AMD7990
ledma*	at sbus?
le*	at ledma?
@


1.5
log
@Make the "slot" and "offset" locators for sbus drivers optional in
configuration lines.
@
text
@d1 1
a1 1
# 	$OpenBSD: RAMDISKU1,v 1.4 2003/05/13 22:45:11 miod Exp $
a6 1
option		_LP64
@


1.4
log
@Add option NO_PROPOLICE, which explicitely disables the use of the propolice
stack protection when building kernels. Intended to be used on installation
media, with tight space constraints - currently, only added where
SMALL_KERNEL was already defined.

Not thoroughly tested, but requested by deraadt.
@
text
@d1 1
a1 1
# 	$OpenBSD: RAMDISKU1,v 1.3 2001/10/10 04:24:12 deraadt Exp $
d39 1
a39 1
clock*	at sbus? slot ? offset ?		# Mostek clock 
d45 2
a46 2
le*	at sbus? slot ? offset ?	# Lance Ethernet - AMD7990
ledma*	at sbus? slot ? offset ?
d49 1
a49 1
#qec*	at sbus? slot ? offset ?	# Quad-ethernet
d53 1
a53 1
hme*		at sbus? slot ? offset ?
d65 1
a65 1
dma*	at sbus? slot ? offset ?		# SBus
d67 1
a67 1
esp*	at sbus? slot ? offset ?
@


1.3
log
@clean
@
text
@d1 1
a1 1
# 	$OpenBSD: RAMDISKU1,v 1.2 2001/10/09 23:07:57 deraadt Exp $
d21 1
@


1.3.6.1
log
@sync
@
text
@d1 1
a1 1
# 	$OpenBSD$
a20 1
option		NO_PROPOLICE
d38 1
a38 1
clock*	at sbus?				# Mostek clock 
d44 2
a45 2
le*	at sbus?				# Lance Ethernet - AMD7990
ledma*	at sbus?
d48 1
a48 1
#qec*	at sbus?				# Quad-ethernet
d52 1
a52 1
hme*		at sbus?
d64 1
a64 1
dma*	at sbus?				# SBus
d66 1
a66 1
esp*	at sbus?
@


1.3.2.1
log
@Sync the SMP branch to something just after 3.0
@
text
@d1 1
a1 1
# 	$OpenBSD$
@


1.3.2.2
log
@merge the trunk so we will get the genfs and locking fixes
@
text
@a20 1
option		NO_PROPOLICE
d38 1
a38 1
clock*	at sbus?				# Mostek clock 
d44 2
a45 2
le*	at sbus?				# Lance Ethernet - AMD7990
ledma*	at sbus?
d48 1
a48 1
#qec*	at sbus?				# Quad-ethernet
d52 1
a52 1
hme*		at sbus?
d64 1
a64 1
dma*	at sbus?				# SBus
d66 1
a66 1
esp*	at sbus?
@


1.3.2.3
log
@Merge of current from two weeks agointo the SMP branch
@
text
@d7 1
@


1.3.2.4
log
@Merge with the trunk
@
text
@d44 3
a46 5
le*		at sbus?			# Lance Ethernet - AMD7990
ledma*		at sbus?
le*		at ledma?
lebuffer*	at sbus?
le*		at lebuffer?
@


1.2
log
@no cd support for now
@
text
@d1 1
a1 1
# 	$OpenBSD: RAMDISKU1,v 1.1 2001/10/09 21:32:17 deraadt Exp $
d38 2
a39 1
#### Standard system devices -- all required for a given architecture
d44 7
a50 15
## Mostek clock 
clock*	at sbus? slot ? offset ?

## Timer chip found on (some) sun4u systems.
timer*	at mainbus0

## Lance Ethernet - AMD7990
le*		at sbus? slot ? offset ?
ledma*		at sbus? slot ? offset ?
le*		at ledma?

# Quad-ethernet glue device, and sub-devices
#qec*		at sbus? slot ? offset ?
#qe*		at qec?
#be*		at qec?
@


1.1
log
@sbus only
@
text
@d1 1
a1 1
# 	$OpenBSD: RAMDISK,v 1.6 2001/09/29 03:17:21 art Exp $
d24 1
a24 1
option		CD9660		# ISO 9660 + Rock Ridge file system
d79 1
a79 1
cd*		at scsibus? target ? lun ?	# SCSI CD-ROMs
@

