head	1.80;
access;
symbols
	OPENBSD_6_1_BASE:1.80
	OPENBSD_6_0:1.77.0.2
	OPENBSD_6_0_BASE:1.77
	OPENBSD_5_9:1.75.0.2
	OPENBSD_5_9_BASE:1.75
	OPENBSD_5_8:1.74.0.6
	OPENBSD_5_8_BASE:1.74
	OPENBSD_5_7:1.74.0.2
	OPENBSD_5_7_BASE:1.74
	OPENBSD_5_6:1.70.0.6
	OPENBSD_5_6_BASE:1.70
	OPENBSD_5_5:1.70.0.4
	OPENBSD_5_5_BASE:1.70
	OPENBSD_5_4:1.67.0.2
	OPENBSD_5_4_BASE:1.67
	OPENBSD_5_3:1.66.0.2
	OPENBSD_5_3_BASE:1.66
	OPENBSD_5_2:1.63.0.2
	OPENBSD_5_2_BASE:1.63
	OPENBSD_5_1_BASE:1.61
	OPENBSD_5_1:1.61.0.2
	OPENBSD_5_0:1.60.0.2
	OPENBSD_5_0_BASE:1.60
	OPENBSD_4_9:1.59.0.2
	OPENBSD_4_9_BASE:1.59
	OPENBSD_4_8:1.56.0.2
	OPENBSD_4_8_BASE:1.56
	OPENBSD_4_7:1.53.0.2
	OPENBSD_4_7_BASE:1.53
	OPENBSD_4_6:1.51.0.4
	OPENBSD_4_6_BASE:1.51
	OPENBSD_4_5:1.49.0.2
	OPENBSD_4_5_BASE:1.49
	OPENBSD_4_4:1.48.0.2
	OPENBSD_4_4_BASE:1.48
	OPENBSD_4_3:1.44.0.4
	OPENBSD_4_3_BASE:1.44
	OPENBSD_4_2:1.44.0.2
	OPENBSD_4_2_BASE:1.44
	OPENBSD_4_1:1.41.0.2
	OPENBSD_4_1_BASE:1.41
	OPENBSD_4_0:1.40.0.6
	OPENBSD_4_0_BASE:1.40
	OPENBSD_3_9:1.40.0.4
	OPENBSD_3_9_BASE:1.40
	OPENBSD_3_8:1.40.0.2
	OPENBSD_3_8_BASE:1.40
	OPENBSD_3_7:1.39.0.2
	OPENBSD_3_7_BASE:1.39
	OPENBSD_3_6:1.38.0.2
	OPENBSD_3_6_BASE:1.38
	SMP_SYNC_A:1.38
	SMP_SYNC_B:1.38
	OPENBSD_3_5:1.37.0.2
	OPENBSD_3_5_BASE:1.37
	OPENBSD_3_4:1.36.0.2
	OPENBSD_3_4_BASE:1.36
	UBC_SYNC_A:1.34
	OPENBSD_3_3:1.33.0.2
	OPENBSD_3_3_BASE:1.33
	OPENBSD_3_2:1.32.0.2
	OPENBSD_3_2_BASE:1.32
	OPENBSD_3_1:1.29.0.2
	OPENBSD_3_1_BASE:1.29
	UBC_SYNC_B:1.32
	UBC:1.17.0.2
	UBC_BASE:1.17
	SMP:1.11.0.2
	OPENBSD_3_0:1.10.0.2
	OPENBSD_3_0_BASE:1.10;
locks; strict;
comment	@ * @;


1.80
date	2016.09.04.11.59.50;	author naddy;	state Exp;
branches;
next	1.79;
commitid	JJ9qLsuOZ0V5ti8N;

1.79
date	2016.09.04.10.51.24;	author naddy;	state Exp;
branches;
next	1.78;
commitid	4OWaAfwqMvhOCLOI;

1.78
date	2016.09.02.17.06.13;	author goda;	state Exp;
branches;
next	1.77;
commitid	J1JzeTsS8K8zyH3c;

1.77
date	2016.04.25.20.09.14;	author tedu;	state Exp;
branches;
next	1.76;
commitid	43yo2G4zZOY9ab4i;

1.76
date	2016.02.26.09.10.05;	author natano;	state Exp;
branches;
next	1.75;
commitid	NHDvdrxPpwDqGtpK;

1.75
date	2015.10.23.15.10.53;	author claudio;	state Exp;
branches;
next	1.74;
commitid	g17gxjQh9N9egLbB;

1.74
date	2014.12.11.19.44.17;	author tedu;	state Exp;
branches;
next	1.73;
commitid	jUSAZlQ30WF1ESM9;

1.73
date	2014.10.09.04.10.03;	author tedu;	state Exp;
branches;
next	1.72;
commitid	Db8IHIncfKM3SDX9;

1.72
date	2014.10.09.03.59.59;	author tedu;	state Exp;
branches;
next	1.71;
commitid	I0KLtD9aVxAdm6aW;

1.71
date	2014.08.20.06.14.43;	author mikeb;	state Exp;
branches;
next	1.70;
commitid	qXFkosC6o9cv78HT;

1.70
date	2013.11.04.14.11.29;	author deraadt;	state Exp;
branches;
next	1.69;

1.69
date	2013.08.20.14.27.31;	author ajacoutot;	state Exp;
branches;
next	1.68;

1.68
date	2013.08.08.21.13.07;	author kettenis;	state Exp;
branches;
next	1.67;

1.67
date	2013.06.03.15.54.47;	author tedu;	state Exp;
branches;
next	1.66;

1.66
date	2012.12.08.20.38.10;	author kettenis;	state Exp;
branches;
next	1.65;

1.65
date	2012.10.17.11.52.22;	author kettenis;	state Exp;
branches;
next	1.64;

1.64
date	2012.08.23.06.12.49;	author deraadt;	state Exp;
branches;
next	1.63;

1.63
date	2012.04.06.15.10.40;	author jsing;	state Exp;
branches;
next	1.62;

1.62
date	2012.03.17.21.32.02;	author kettenis;	state Exp;
branches;
next	1.61;

1.61
date	2011.10.06.20.49.28;	author deraadt;	state Exp;
branches;
next	1.60;

1.60
date	2011.07.04.22.53.53;	author tedu;	state Exp;
branches;
next	1.59;

1.59
date	2011.01.14.19.04.08;	author jasper;	state Exp;
branches;
next	1.58;

1.58
date	2010.10.08.18.21.34;	author ratchov;	state Exp;
branches;
next	1.57;

1.57
date	2010.09.23.05.02.14;	author claudio;	state Exp;
branches;
next	1.56;

1.56
date	2010.07.03.03.59.17;	author krw;	state Exp;
branches;
next	1.55;

1.55
date	2010.06.09.15.25.33;	author jsing;	state Exp;
branches;
next	1.54;

1.54
date	2010.03.30.19.16.09;	author matthieu;	state Exp;
branches;
next	1.53;

1.53
date	2009.08.13.19.44.41;	author deraadt;	state Exp;
branches;
next	1.52;

1.52
date	2009.08.13.15.04.20;	author dlg;	state Exp;
branches;
next	1.51;

1.51
date	2009.06.03.14.45.53;	author jj;	state Exp;
branches;
next	1.50;

1.50
date	2009.05.10.12.34.04;	author kettenis;	state Exp;
branches;
next	1.49;

1.49
date	2009.01.25.17.30.49;	author miod;	state Exp;
branches;
next	1.48;

1.48
date	2008.07.07.14.46.18;	author kettenis;	state Exp;
branches;
next	1.47;

1.47
date	2008.06.12.20.03.48;	author mglocker;	state Exp;
branches;
next	1.46;

1.46
date	2008.04.08.14.31.54;	author claudio;	state Exp;
branches;
next	1.45;

1.45
date	2008.03.09.00.23.17;	author kettenis;	state Exp;
branches;
next	1.44;

1.44
date	2007.05.28.22.26.03;	author todd;	state Exp;
branches;
next	1.43;

1.43
date	2007.05.27.01.50.36;	author todd;	state Exp;
branches;
next	1.42;

1.42
date	2007.05.26.19.54.24;	author todd;	state Exp;
branches;
next	1.41;

1.41
date	2007.02.28.18.48.35;	author miod;	state Exp;
branches;
next	1.40;

1.40
date	2005.07.31.06.39.07;	author dlg;	state Exp;
branches;
next	1.39;

1.39
date	2005.03.09.18.41.49;	author miod;	state Exp;
branches;
next	1.38;

1.38
date	2004.05.30.08.11.26;	author grange;	state Exp;
branches;
next	1.37;

1.37
date	2004.02.10.01.31.21;	author millert;	state Exp;
branches;
next	1.36;

1.36
date	2003.06.27.16.57.14;	author nate;	state Exp;
branches;
next	1.35;

1.35
date	2003.06.02.23.27.56;	author millert;	state Exp;
branches;
next	1.34;

1.34
date	2003.05.14.00.20.37;	author tedu;	state Exp;
branches;
next	1.33;

1.33
date	2002.12.05.02.49.55;	author kjc;	state Exp;
branches;
next	1.32;

1.32
date	2002.06.19.02.52.24;	author mickey;	state Exp;
branches;
next	1.31;

1.31
date	2002.06.11.05.15.21;	author miod;	state Exp;
branches;
next	1.30;

1.30
date	2002.05.16.21.11.18;	author miod;	state Exp;
branches;
next	1.29;

1.29
date	2002.03.15.20.46.11;	author jason;	state Exp;
branches;
next	1.28;

1.28
date	2002.01.31.22.36.14;	author jason;	state Exp;
branches;
next	1.27;

1.27
date	2002.01.31.00.01.59;	author jason;	state Exp;
branches;
next	1.26;

1.26
date	2002.01.30.23.58.03;	author jason;	state Exp;
branches;
next	1.25;

1.25
date	2002.01.24.03.38.56;	author jason;	state Exp;
branches;
next	1.24;

1.24
date	2002.01.17.05.17.10;	author jason;	state Exp;
branches;
next	1.23;

1.23
date	2002.01.16.21.36.18;	author jason;	state Exp;
branches;
next	1.22;

1.22
date	2002.01.13.03.37.08;	author jason;	state Exp;
branches;
next	1.21;

1.21
date	2002.01.13.02.06.45;	author jason;	state Exp;
branches;
next	1.20;

1.20
date	2002.01.12.20.19.40;	author jason;	state Exp;
branches;
next	1.19;

1.19
date	2002.01.04.16.00.34;	author jason;	state Exp;
branches;
next	1.18;

1.18
date	2002.01.04.15.57.19;	author jason;	state Exp;
branches;
next	1.17;

1.17
date	2001.12.14.23.14.02;	author jason;	state Exp;
branches
	1.17.2.1;
next	1.16;

1.16
date	2001.12.11.23.19.02;	author miod;	state Exp;
branches;
next	1.15;

1.15
date	2001.12.05.23.58.41;	author tdeval;	state Exp;
branches;
next	1.14;

1.14
date	2001.12.04.21.12.41;	author jason;	state Exp;
branches;
next	1.13;

1.13
date	2001.12.04.20.13.47;	author jason;	state Exp;
branches;
next	1.12;

1.12
date	2001.11.15.03.59.08;	author jason;	state Exp;
branches;
next	1.11;

1.11
date	2001.10.28.03.14.59;	author jason;	state Exp;
branches
	1.11.2.1;
next	1.10;

1.10
date	2001.09.28.02.53.14;	author mickey;	state Exp;
branches;
next	1.9;

1.9
date	2001.09.20.20.50.03;	author jason;	state Exp;
branches;
next	1.8;

1.8
date	2001.09.19.23.41.55;	author jason;	state Exp;
branches;
next	1.7;

1.7
date	2001.09.17.04.20.28;	author jason;	state Exp;
branches;
next	1.6;

1.6
date	2001.09.04.19.14.04;	author todd;	state Exp;
branches;
next	1.5;

1.5
date	2001.09.04.18.53.36;	author todd;	state Exp;
branches;
next	1.4;

1.4
date	2001.08.23.15.18.54;	author art;	state Exp;
branches;
next	1.3;

1.3
date	2001.08.20.20.23.53;	author jason;	state Exp;
branches;
next	1.2;

1.2
date	2001.08.19.19.15.55;	author art;	state Exp;
branches;
next	1.1;

1.1
date	2001.08.19.05.21.38;	author jason;	state Exp;
branches;
next	;

1.11.2.1
date	2001.10.31.03.07.58;	author nate;	state Exp;
branches;
next	1.11.2.2;

1.11.2.2
date	2001.11.13.21.04.17;	author niklas;	state Exp;
branches;
next	1.11.2.3;

1.11.2.3
date	2001.12.05.00.39.13;	author niklas;	state Exp;
branches;
next	1.11.2.4;

1.11.2.4
date	2002.03.06.02.04.47;	author niklas;	state Exp;
branches;
next	1.11.2.5;

1.11.2.5
date	2002.03.28.11.23.52;	author niklas;	state Exp;
branches;
next	1.11.2.6;

1.11.2.6
date	2003.03.27.23.42.37;	author niklas;	state Exp;
branches;
next	1.11.2.7;

1.11.2.7
date	2003.05.16.00.29.40;	author niklas;	state Exp;
branches;
next	1.11.2.8;

1.11.2.8
date	2003.06.07.11.14.45;	author ho;	state Exp;
branches;
next	1.11.2.9;

1.11.2.9
date	2004.02.19.10.50.00;	author niklas;	state Exp;
branches;
next	1.11.2.10;

1.11.2.10
date	2004.06.05.23.11.00;	author niklas;	state Exp;
branches;
next	;

1.17.2.1
date	2002.01.31.22.55.24;	author niklas;	state Exp;
branches;
next	1.17.2.2;

1.17.2.2
date	2002.06.11.03.38.43;	author art;	state Exp;
branches;
next	1.17.2.3;

1.17.2.3
date	2002.10.29.00.28.12;	author art;	state Exp;
branches;
next	1.17.2.4;

1.17.2.4
date	2003.05.19.21.46.57;	author tedu;	state Exp;
branches;
next	;


desc
@@


1.80
log
@Add comments to the character-to-block device table and remove an
obsolete entry for the concatenated disk driver.  ok kettenis@@
@
text
@/*	$OpenBSD: conf.c,v 1.79 2016/09/04 10:51:24 naddy Exp $	*/
/*	$NetBSD: conf.c,v 1.17 2001/03/26 12:33:26 lukem Exp $ */

/*
 * Copyright (c) 1992, 1993
 *	The Regents of the University of California.  All rights reserved.
 *
 * This software was developed by the Computer Systems Engineering group
 * at Lawrence Berkeley Laboratory under DARPA contract BG 91-66 and
 * contributed to Berkeley.
 *
 * All advertising materials mentioning features or use of this software
 * must display the following acknowledgement:
 *	This product includes software developed by the University of
 *	California, Lawrence Berkeley Laboratory.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. Neither the name of the University nor the names of its contributors
 *    may be used to endorse or promote products derived from this software
 *    without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
 * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 *
 *	@@(#)conf.c	8.3 (Berkeley) 11/14/93
 */

#include <sys/param.h>
#include <sys/systm.h>
#include <sys/buf.h>
#include <sys/ioctl.h>
#include <sys/vnode.h>
#include <sys/tty.h>
#include <sys/conf.h>

#include <machine/conf.h>

#include "bio.h"
#include "pty.h"
#include "bpfilter.h"
#include "tun.h"
#include "midi.h"
#include "audio.h"
#include "video.h"
#include "vnd.h"
#include "ch.h"
#include "sd.h"
#include "st.h"
#include "cd.h"
#include "uk.h"
#include "wd.h"

#ifdef notyet
#include "fb.h"
#endif
#include "zstty.h"
#include "sab.h"
#include "pcons.h"
#include "vcons.h"
#include "vcctty.h"
#include "sbbc.h"
#include "com.h"
#include "lpt.h"
#include "bpp.h"
#include "magma.h"		/* has NMTTY and NMBPP */
#include "spif.h"		/* has NSTTY and NSBPP */
#include "uperf.h"
#include "vldcp.h"
#include "vdsp.h"

#include "fdc.h"		/* has NFDC and NFD; see files.sparc */

#include "drm.h"
cdev_decl(drm);

#include "wsdisplay.h"
#include "wskbd.h"
#include "wsmouse.h"
#include "wsmux.h"

#ifdef USER_PCICONF
#include "pci.h"
cdev_decl(pci);
#endif

#include "rd.h"

#include "usb.h"
#include "uhid.h"
#include "ugen.h"
#include "ulpt.h"
#include "ucom.h"

#include "pf.h"

#include "ksyms.h"

#include "hotplug.h"
#include "vscsi.h"
#include "pppx.h"
#include "fuse.h"
#include "switch.h"

struct bdevsw	bdevsw[] =
{
	bdev_notdef(),			/* 0 */
	bdev_notdef(),			/* 1 */
	bdev_notdef(),			/* 2 */
	bdev_notdef(),			/* 3: SMD disk -- not this arch */
	bdev_swap_init(1,sw),		/* 4 swap pseudo-device */
	bdev_disk_init(NRD,rd),		/* 5: ram disk */
	bdev_notdef(),			/* 6 */
	bdev_disk_init(NSD,sd),		/* 7: SCSI disk */
	bdev_disk_init(NVND,vnd),	/* 8: vnode disk driver */
	bdev_notdef(),			/* 9: was: concatenated disk driver */
	bdev_notdef(),			/* 10: SMD disk -- not this arch */
	bdev_notdef(),			/* 11: was: SCSI tape */
	bdev_disk_init(NWD,wd),		/* 12: IDE disk */
	bdev_notdef(),			/* 13 */
	bdev_notdef(),			/* 14 */
	bdev_notdef(),			/* 15 */
	bdev_disk_init(NFD,fd),		/* 16: floppy disk */
	bdev_notdef(),			/* 17 */
	bdev_disk_init(NCD,cd),		/* 18: SCSI CD-ROM */
	bdev_notdef(),			/* 19 */
	bdev_notdef(),			/* 20 */
	bdev_notdef(),			/* 21 */
	bdev_notdef(),			/* 22 */
	bdev_notdef(),			/* 23 */
	bdev_notdef(),			/* 24 */
	bdev_notdef(),			/* 25 was: RAIDframe disk driver */
};
int	nblkdev = nitems(bdevsw);

struct cdevsw	cdevsw[] =
{
	cdev_cn_init(1,cn),		/* 0: virtual console */
	cdev_notdef(),			/* 1: tapemaster tape */
	cdev_ctty_init(1,ctty),		/* 2: controlling terminal */
	cdev_mm_init(1,mm),		/* 3: /dev/{null,mem,kmem,...} */
	cdev_notdef(),			/* 4 */
	cdev_notdef(),			/* 5: tapemaster tape */
	cdev_notdef(),			/* 6: systech/versatec */
	cdev_notdef(),			/* 7 was /dev/drum */
	cdev_notdef(),			/* 8: Archive QIC-11 tape */
	cdev_notdef(),			/* 9: SMD disk on Xylogics 450/451 */
	cdev_notdef(),			/* 10: systech multi-terminal board */
	cdev_notdef(),			/* 11: DES encryption chip */
	cdev_tty_init(NZSTTY,zs),	/* 12: Zilog 8530 serial port */
	cdev_notdef(),			/* 13: /dev/mouse */
	cdev_notdef(),			/* 14: cgone */
	cdev_notdef(),			/* 15: sun /dev/winNNN */
	cdev_log_init(1,log),		/* 16: /dev/klog */
	cdev_disk_init(NSD,sd),		/* 17: SCSI disk */
	cdev_tape_init(NST,st),		/* 18: SCSI tape */
	cdev_ch_init(NCH,ch),		/* 19: SCSI autochanger */
	cdev_tty_init(NPTY,pts),	/* 20: pseudo-tty slave */
	cdev_ptc_init(NPTY,ptc),	/* 21: pseudo-tty master */
	cdev_notdef(),			/* 22 */
	cdev_notdef(),			/* 23: was: concatenated disk driver */
	cdev_fd_init(1,filedesc),	/* 24: file descriptor pseudo-device */
	cdev_uperf_init(NUPERF,uperf),	/* 25: performance counters */
	cdev_disk_init(NWD,wd),		/* 26: IDE disk */
	cdev_notdef(),			/* 27 */
	cdev_notdef(),			/* 28: Systech VPC-2200 versatec/centronics */
	cdev_notdef(),			/* 29 */
	cdev_notdef(),			/* 30: Xylogics tape */
	cdev_notdef(),			/* 31: /dev/cgtwo */
	cdev_notdef(),			/* 32: should be /dev/gpone */
	cdev_notdef(),			/* 33 */
	cdev_notdef(),			/* 34 */
	cdev_notdef(),			/* 35 */
	cdev_tty_init(NCOM,com),	/* 36: NS16x50 compatible ports */
	cdev_lpt_init(NLPT,lpt),	/* 37: parallel printer */
	cdev_notdef(),			/* 38 */
	cdev_notdef(),			/* 39 */
	cdev_notdef(),			/* 40 */
	cdev_notdef(),			/* 41 */
	cdev_notdef(),			/* 42: SMD disk */
	cdev_notdef(),			/* 43 */
	cdev_video_init(NVIDEO,video),	/* 44: generic video I/O */
	cdev_notdef(),			/* 45 */
	cdev_notdef(),			/* 46 */
	cdev_notdef(),			/* 47 */
	cdev_notdef(),			/* 48 */
	cdev_notdef(),			/* 49 */
	cdev_notdef(),			/* 50 */
	cdev_notdef(),			/* 51 */
#ifdef USER_PCICONF
	cdev_pci_init(NPCI,pci),	/* 52: PCI user */
#else
	cdev_notdef(),			/* 52 */
#endif
	cdev_notdef(),			/* 53 */
	cdev_disk_init(NFD,fd),		/* 54: floppy disk */
	cdev_notdef(),			/* 55 */
	cdev_notdef(),			/* 56 */
	cdev_notdef(),			/* 57 */
	cdev_disk_init(NCD,cd),		/* 58: SCSI CD-ROM */
	cdev_notdef(),			/* 59 */
	cdev_uk_init(NUK,uk),		/* 60: SCSI unknown */
	cdev_disk_init(NRD,rd),		/* 61: memory disk */
	cdev_notdef(),			/* 62 */
	cdev_notdef(),			/* 63 */
	cdev_notdef(),			/* 64: /dev/cgeight */
	cdev_notdef(),			/* 65 */
	cdev_notdef(),			/* 66 */
	cdev_notdef(),			/* 67 */
	cdev_midi_init(NMIDI,midi),	/* 68: /dev/rmidi */
	cdev_audio_init(NAUDIO,audio),	/* 69: /dev/audio */
	cdev_openprom_init(1,openprom),	/* 70: /dev/openprom */
	cdev_tty_init(NMTTY,mtty),	/* 71: magma serial ports */
	cdev_gen_init(NMBPP,mbpp),	/* 72: magma parallel ports */
	cdev_pf_init(NPF,pf),		/* 73: packet filter */
	cdev_notdef(),			/* 74: ALTQ (deprecated) */
	cdev_notdef(),			/* 75: was: /dev/crypto */
	cdev_ksyms_init(NKSYMS,ksyms),	/* 76 *: Kernel symbols device */
	cdev_tty_init(NSABTTY,sabtty),	/* 77: sab82532 serial ports */
	cdev_wsdisplay_init(NWSDISPLAY,	/* 78: frame buffers, etc. */
	    wsdisplay),
	cdev_mouse_init(NWSKBD, wskbd),	/* 79: keyboards */
	cdev_mouse_init(NWSMOUSE, wsmouse), /* 80: mice */
	cdev_mouse_init(NWSMUX, wsmux),	/* 81: ws multiplexor */
	cdev_notdef(),			/* 82 */
	cdev_notdef(),			/* 83 */
	cdev_notdef(),			/* 84 */
	cdev_notdef(),			/* 85 */
	cdev_notdef(),			/* 86 */
	cdev_drm_init(NDRM,drm),	/* 87: drm */
	cdev_notdef(),			/* 88 */
	cdev_notdef(),			/* 89 */
	cdev_usb_init(NUSB,usb),	/* 90: USB controller */
	cdev_usbdev_init(NUHID,uhid),	/* 91: USB generic HID */
	cdev_usbdev_init(NUGEN,ugen),	/* 92: USB generic driver */
	cdev_ulpt_init(NULPT,ulpt),	/* 93: USB printers */
	cdev_notdef(),			/* 94 */
	cdev_tty_init(NUCOM,ucom),	/* 95: USB tty */
	cdev_notdef(),			/* 96: was USB scanners */
	cdev_notdef(),			/* 97 */
	cdev_notdef(),			/* 98 */
	cdev_notdef(),			/* 99 */
	cdev_notdef(),			/* 100 */
	cdev_notdef(),			/* 101 */
	cdev_notdef(),			/* 102 */
	cdev_notdef(),			/* 103 */
	cdev_notdef(),			/* 104 */
	cdev_bpf_init(NBPFILTER,bpf),	/* 105: packet filter */
	cdev_notdef(),			/* 106 */
	cdev_bpp_init(NBPP,bpp),	/* 107: on-board parallel port */
	cdev_tty_init(NSTTY,stty),	/* 108: spif serial ports */
	cdev_gen_init(NSBPP,sbpp),	/* 109: spif parallel ports */
	cdev_disk_init(NVND,vnd),	/* 110: vnode disk driver */
	cdev_tun_init(NTUN,tun),	/* 111: network tunnel */
	cdev_notdef(),			/* 112 was LKM */
	cdev_notdef(),			/* 113 */
	cdev_notdef(),			/* 114 */
	cdev_notdef(),			/* 115 */
	cdev_notdef(),			/* 116 */
	cdev_notdef(),			/* 117 */
	cdev_notdef(),			/* 118 */
	cdev_random_init(1,random),	/* 119: random data source */
	cdev_bio_init(NBIO,bio),	/* 120: ioctl tunnel */
	cdev_notdef(),			/* 121 was: RAIDframe disk driver */
	cdev_tty_init(NPCONS,pcons),	/* 122: PROM console */
	cdev_ptm_init(NPTY,ptm),	/* 123: pseudo-tty ptm device */
	cdev_hotplug_init(NHOTPLUG,hotplug), /* 124: devices hot plugging */
	cdev_tty_init(NVCONS,vcons),	/* 125: virtual console */
	cdev_tty_init(NSBBC,sbbc),	/* 126: SBBC console */
	cdev_tty_init(NVCCTTY,vcctty),	/* 127: virtual console concentrator */
	cdev_vscsi_init(NVSCSI,vscsi),	/* 128: vscsi */
	cdev_notdef(),
	cdev_disk_init(1,diskmap),	/* 130: disk mapper */
	cdev_pppx_init(NPPPX,pppx),	/* 131: pppx */
	cdev_gen_init(NVLDCP,vldcp),	/* 132: vldcp */
	cdev_vdsp_init(NVDSP,vdsp),	/* 133: vdsp */
	cdev_fuse_init(NFUSE,fuse),	/* 134: fuse */
	cdev_tun_init(NTUN,tap),	/* 135: Ethernet network tunnel */
	cdev_switch_init(NSWITCH,switch), /* 136: switch(4) control interface */
};
int	nchrdev = nitems(cdevsw);

int	mem_no = 3; 	/* major device number of memory special file */

/*
 * Swapdev is a fake device implemented
 * in sw.c used only internally to get to swstrategy.
 * It cannot be provided to the users, because the
 * swstrategy routine munches the b_dev and b_blkno entries
 * before calling the appropriate driver.  This would horribly
 * confuse, e.g. the hashing routines. Instead, /dev/drum is
 * provided as a character (raw) device.
 */
dev_t	swapdev = makedev(4, 0);

/*
 * Routine that identifies /dev/mem and /dev/kmem.
 *
 * A minimal stub routine can always return 0.
 */
int
iskmemdev(dev)
	dev_t dev;
{

	return (major(dev) == mem_no && minor(dev) < 2);
}

int
iszerodev(dev)
	dev_t dev;
{
	return (major(dev) == mem_no && minor(dev) == 12);
}

dev_t
getnulldev(void)
{
	return makedev(mem_no, 2);
}

int chrtoblktbl[] = {
	/*VCHR*/	/*VBLK*/
	/*  0 */	NODEV,
	/*  1 */	NODEV,
	/*  2 */	NODEV,
	/*  3 */	NODEV,
	/*  4 */	NODEV,
	/*  5 */	NODEV,
	/*  6 */	NODEV,
	/*  7 */	NODEV,
	/*  8 */	NODEV,
	/*  9 */	NODEV,
	/* 10 */	NODEV,
	/* 11 */	NODEV,
	/* 12 */	NODEV,
	/* 13 */	NODEV,
	/* 14 */	NODEV,
	/* 15 */	NODEV,
	/* 16 */	NODEV,
	/* 17 */	7,		/* sd */
	/* 18 */	NODEV,
	/* 19 */	NODEV,
	/* 20 */	NODEV,
	/* 21 */	NODEV,
	/* 22 */	NODEV,
	/* 23 */	NODEV,
	/* 24 */	NODEV,
	/* 25 */	NODEV,
	/* 26 */	12,		/* wd */
	/* 27 */	NODEV,
	/* 28 */	NODEV,
	/* 29 */	NODEV,
	/* 30 */	NODEV,
	/* 31 */	NODEV,
	/* 32 */	NODEV,
	/* 33 */	NODEV,
	/* 34 */	NODEV,
	/* 35 */	NODEV,
	/* 36 */	NODEV,
	/* 37 */	NODEV,
	/* 38 */	NODEV,
	/* 39 */	NODEV,
	/* 40 */	NODEV,
	/* 41 */	NODEV,
	/* 42 */	NODEV,
	/* 43 */	NODEV,
	/* 44 */	NODEV,
	/* 45 */	NODEV,
	/* 46 */	NODEV,
	/* 47 */	NODEV,
	/* 48 */	NODEV,
	/* 49 */	NODEV,
	/* 50 */	NODEV,
	/* 51 */	NODEV,
	/* 52 */	NODEV,
	/* 53 */	NODEV,
	/* 54 */	16,		/* fd */
	/* 55 */	NODEV,
	/* 56 */	NODEV,
	/* 57 */	NODEV,
	/* 58 */	18,		/* cd */
	/* 59 */	NODEV,
	/* 60 */	NODEV,
	/* 61 */	5,		/* rd */
	/* 62 */	NODEV,
	/* 63 */	NODEV,
	/* 64 */	NODEV,
	/* 65 */	NODEV,
	/* 66 */	NODEV,
	/* 67 */	NODEV,
	/* 68 */	NODEV,
	/* 69 */	NODEV,
	/* 70 */	NODEV,
	/* 71 */	NODEV,
	/* 72 */	NODEV,
	/* 73 */	NODEV,
	/* 74 */	NODEV,
	/* 75 */	NODEV,
	/* 76 */	NODEV,
	/* 77 */	NODEV,
	/* 78 */	NODEV,
	/* 79 */	NODEV,
	/* 80 */	NODEV,
	/* 81 */	NODEV,
	/* 82 */	NODEV,
	/* 83 */	NODEV,
	/* 84 */	NODEV,
	/* 85 */	NODEV,
	/* 86 */	NODEV,
	/* 87 */	NODEV,
	/* 88 */	NODEV,
	/* 89 */	NODEV,
	/* 90 */	NODEV,
	/* 91 */	NODEV,
	/* 92 */	NODEV,
	/* 93 */	NODEV,
	/* 94 */	NODEV,
	/* 95 */	NODEV,
	/* 96 */	NODEV,
	/* 97 */	NODEV,
	/* 98 */	NODEV,
	/* 99 */	NODEV,
	/*100 */	NODEV,
	/*101 */	NODEV,
	/*102 */	NODEV,
	/*103 */	NODEV,
	/*104 */	NODEV,
	/*105 */	NODEV,
	/*106 */	NODEV,
	/*107 */	NODEV,
	/*108 */	NODEV,
	/*109 */	NODEV,
	/*110 */	8,		/* vnd */
};
int nchrtoblktbl = nitems(chrtoblktbl);
@


1.79
log
@Remove support for tape block devices. Nobody mount(8)s tapes any longer.
ok deraadt@@ guenther@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.78 2016/09/02 17:06:13 goda Exp $	*/
d356 1
a356 1
	/* 17 */	7,
d362 1
a362 1
	/* 23 */	9,
d365 1
a365 1
	/* 26 */	12,
d393 1
a393 1
	/* 54 */	16,
d397 1
a397 1
	/* 58 */	18,
d400 1
a400 1
	/* 61 */	5,
d449 1
a449 1
	/*110 */	8,
@


1.78
log
@Add switch(4) cdev entry

ok deraadt@@ yasuoka@@ reyk@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.77 2016/04/25 20:09:14 tedu Exp $	*/
d133 1
a133 1
	bdev_tape_init(NST,st),		/* 11: SCSI tape */
d357 1
a357 1
	/* 18 */	11,
@


1.77
log
@remove systrace
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.76 2016/02/26 09:10:05 natano Exp $	*/
d118 1
d294 1
@


1.76
log
@Remove stale RAIDframe entries from chrtoblktbl.

While there truncate the tables to the minimum required size; chrtoblk()
and blktochr() are designed to handle a table shorter than cdevsw.

"Looks good to me" deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.75 2015/10/23 15:10:53 claudio Exp $	*/
a113 1
#include "systrace.h"
d202 1
a202 1
	cdev_systrace_init(NSYSTRACE,systrace),	/* 50 system call tracing */
@


1.75
log
@Allocate a new major for tap(4) also note that pseudo-device tun is for tap
as well. OK dlg@@ mpi@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.74 2014/12/11 19:44:17 tedu Exp $	*/
a448 12
	/*111 */	NODEV,
	/*112 */	NODEV,
	/*113 */	NODEV,
	/*114 */	NODEV,
	/*115 */	NODEV,
	/*116 */	NODEV,
	/*117 */	NODEV,
	/*118 */	NODEV,
	/*119 */	NODEV,
	/*120 */	NODEV,
	/*121 */	25,
	/*122 */	NODEV,
@


1.74
log
@dragonflybsd has added a urio driver. conservation of urios requires
that we delete ours, which isn't actually useful.
ok mpi sthen
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.73 2014/10/09 04:10:03 tedu Exp $	*/
d293 1
@


1.73
log
@mechanical translation of dev_lkm_dummy() to dev_notdef()
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.72 2014/10/09 03:59:59 tedu Exp $	*/
a107 1
#include "urio.h"
d252 1
a252 1
	cdev_urio_init(NURIO,urio),	/* 94: USB Diamond Rio 500 */
@


1.72
log
@remove LKM devices
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.71 2014/08/20 06:14:43 mikeb Exp $	*/
d142 6
a147 6
	bdev_lkm_dummy(),		/* 19 */
	bdev_lkm_dummy(),		/* 20 */
	bdev_lkm_dummy(),		/* 21 */
	bdev_lkm_dummy(),		/* 22 */
	bdev_lkm_dummy(),		/* 23 */
	bdev_lkm_dummy(),		/* 24 */
d272 6
a277 6
	cdev_lkm_dummy(),		/* 113 */
	cdev_lkm_dummy(),		/* 114 */
	cdev_lkm_dummy(),		/* 115 */
	cdev_lkm_dummy(),		/* 116 */
	cdev_lkm_dummy(),		/* 117 */
	cdev_lkm_dummy(),		/* 118 */
@


1.71
log
@unlink crypto(4) pseudo device from the architecture dependant character
device tables and kernel config files.  ok deraadt
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.70 2013/11/04 14:11:29 deraadt Exp $	*/
d271 1
a271 1
	cdev_lkm_init(NLKM,lkm),	/* 112: loadable module driver */
a336 1
	/* XXXX This needs to be dynamic for LKMs. */
@


1.70
log
@remove iop(4) driver.  it is entirely unmaintained and supports something
which basically doesn't exist at all.
reminded about it by brad
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.69 2013/08/20 14:27:31 ajacoutot Exp $	*/
a113 1
#include "inet.h"
d233 1
a233 1
	cdev_crypto_init(NCRYPTO,crypto), /* 75: /dev/crypto */
@


1.69
log
@Remove uscanner(4). It was disabled in GENERIC more than 2.5 years ago.
No regression has been reported since libusb became the prefered
solution to work with USB scanners.

req. by mpi@@
ok ian@@ mpi@@ miod@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.68 2013/08/08 21:13:07 kettenis Exp $	*/
a110 2
#include "bthub.h"

d289 1
a289 1
	cdev_bthub_init(NBTHUB,bthub),	/* 129: bluetooth hub */
@


1.68
log
@/dev/drmN for sparc64
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.67 2013/06/03 15:54:47 tedu Exp $	*/
a109 1
#include "uscanner.h"
d258 1
a258 1
	cdev_usbdev_init(NUSCANNER,uscanner), /* 96: USB scanners */
@


1.67
log
@changes for isc fuse support. not enabled. ok beck deraadt.
from Sylvestre Gallon ccna.syl gmail.com
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.66 2012/12/08 20:38:10 kettenis Exp $	*/
d89 3
d250 1
a250 1
	cdev_notdef(),			/* 87 */
@


1.66
log
@Make ldomd(8) to control the availability of virtual disks to guest domains.
This is done by opening the corresponding /dev/vdspN device file.  The virtual
disk will remain available until that device is closed, which happens
automatically when ldomd(8) exits.
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.65 2012/10/17 11:52:22 kettenis Exp $	*/
d120 1
d293 2
a294 1
	cdev_vdsp_init(NVDSP,vdsp)	/* 133: vdsp */
@


1.65
log
@Rename hvctl(4) into vldcp(4) since this driver now handles other services
as well.
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.64 2012/08/23 06:12:49 deraadt Exp $	*/
d85 1
d291 2
a292 1
	cdev_gen_init(NVLDCP,vldcp)	/* 132: vldcp */
@


1.64
log
@kill nnpfs dead
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.63 2012/04/06 15:10:40 jsing Exp $	*/
d84 1
a84 1
#include "hvctl.h"
d290 1
a290 1
	cdev_gen_init(NHVCTL,hvctl)	/* 132: hvctl */
@


1.63
log
@tedu the raidframe.

ok deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.61 2011/10/06 20:49:28 deraadt Exp $	*/
a111 5
#ifdef NNPFS
#include <nnpfs/nnnpfs.h>
cdev_decl(nnpfs_dev);
#endif

a203 3
#ifdef NNPFS
	cdev_nnpfs_init(NNNPFS,nnpfs_dev),	/* 51: nnpfs communication device */
#else
a204 1
#endif
@


1.62
log
@Add hvctl(4).
@
text
@a67 1
#include "raid.h"
d152 1
a152 1
	bdev_disk_init(NRAID,raid),	/* 25: RAIDframe disk driver */
d288 1
a288 1
	cdev_disk_init(NRAID,raid),	/* 121: RAIDframe disk driver */
@


1.61
log
@ccd goes to the attic
discussed with jsing and millert
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.60 2011/07/04 22:53:53 tedu Exp $	*/
d85 1
d300 1
@


1.60
log
@remove compat_svr4 support.  ok deraadt
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.59 2011/01/14 19:04:08 jasper Exp $	*/
a61 1
#include "ccd.h"
d136 1
a136 1
	bdev_disk_init(NCCD,ccd),	/* 9: concatenated disk driver */
d181 1
a181 1
	cdev_disk_init(NCCD,ccd),	/* 23: concatenated disk driver */
@


1.59
log
@- use nitems()

"doesn't hurt" deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.58 2010/10/08 18:21:34 ratchov Exp $	*/
d202 1
a202 1
	cdev_svr4_net_init(NSVR4_NET,svr4_net),	/* 43: svr4 net pseudo-device */
@


1.58
log
@allocate a major number to midi, since midi is already enabled

ok deraadt, miod
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.57 2010/09/23 05:02:14 claudio Exp $	*/
d155 1
a155 1
int	nblkdev = sizeof(bdevsw) / sizeof(bdevsw[0]);
d301 1
a301 1
int	nchrdev = sizeof(cdevsw) / sizeof(cdevsw[0]);
d469 1
a469 1
int nchrtoblktbl = sizeof(chrtoblktbl) / sizeof(chrtoblktbl[0]);
@


1.57
log
@Add pppx(4) to the cdevs of the remaining archs.
OK dlg@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.56 2010/07/03 03:59:17 krw Exp $	*/
d58 1
d235 1
a235 1
	cdev_notdef(),			/* 68 */
@


1.56
log
@No more ss(4) or usscanner(4). Unused, unloved and unmaintained.
General huzzahs.

"go for it" deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.55 2010/06/09 15:25:33 jsing Exp $	*/
d123 1
d298 1
@


1.55
log
@Wire up device nodes for disk mapper.

ok deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.53 2009/08/13 19:44:41 deraadt Exp $	*/
a62 1
#include "ss.h"
d224 1
a224 1
	cdev_scanner_init(NSS,ss),	/* 59: SCSI scanner */
@


1.54
log
@Add missing bthub device entries on arches that support bluetooth.
ok miod@@, deraadt@@, todd@@.
@
text
@d297 1
@


1.53
log
@repair vscsi line
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.52 2009/08/13 15:04:20 dlg Exp $	*/
d109 2
d296 1
@


1.52
log
@wire vscsi up to a cdev

for claudio@@ ok deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.51 2009/06/03 14:45:53 jj Exp $	*/
d293 1
a293 1
	cdev_tty_init(NVSCSI,vscsi),	/* 128: vscsi */
@


1.51
log
@Arla client rename from xfs to nnpfs for later upgrades. Tested on various arches. ok todd@@ beck@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.50 2009/05/10 12:34:04 kettenis Exp $	*/
d121 1
d292 2
a293 1
	cdev_tty_init(NVCCTTY,vcctty)	/* 127: virtual console concentrator */
@


1.50
log
@Add vcctty(4).
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.49 2009/01/25 17:30:49 miod Exp $	*/
d111 3
a113 3
#ifdef XFS
#include <xfs/nxfs.h>
cdev_decl(xfs_dev);
d206 2
a207 2
#ifdef XFS
	cdev_xfs_init(NXFS,xfs_dev),	/* 51: xfs communication device */
@


1.49
log
@Remove /dev/drum and related code.
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.48 2008/07/07 14:46:18 kettenis Exp $	*/
d78 1
d290 2
a291 1
	cdev_tty_init(NSBBC,sbbc)	/* 126: SBBC console */
@


1.48
log
@Extend sbbc(4) to provide a console driver for the v1280.
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.47 2008/06/12 20:03:48 mglocker Exp $	*/
d161 1
a161 1
	cdev_swap_init(1,sw),		/* 7: /dev/drum (swap pseudo-device) */
@


1.47
log
@Enable /dev/video* for all USB capable archs.  MAKEDEV bits will follow
shortly.

OK todd@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.46 2008/04/08 14:31:54 claudio Exp $	*/
d78 1
d288 2
a289 1
	cdev_tty_init(NVCONS,vcons)	/* 125: virtual console */
@


1.46
log
@Split the cdev makro for bpftun into two seperate definitions. tun(4) and
bpf(4) are different enough so that the split makes sense -- this is necessary
to make bpf(4) cloneable.
requested deraadt@@, OK thib@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.45 2008/03/09 00:23:17 kettenis Exp $	*/
d59 1
d197 1
a197 1
	cdev_notdef(),			/* 44 */
@


1.45
log
@Add vcons(4).
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.44 2007/05/28 22:26:03 todd Exp $	*/
d266 1
a266 1
	cdev_bpftun_init(NBPFILTER,bpf),/* 105: packet filter */
d272 1
a272 1
	cdev_bpftun_init(NTUN,tun),	/* 111: network tunnel */
@


1.44
log
@bio for all archs, ok krw@@ kettenis@@ sounds good marco@@ go for it deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.43 2007/05/27 01:50:36 todd Exp $	*/
d76 1
d286 1
@


1.43
log
@back out bio, breaks dlg's sparc64 v215
prompted by/ok dlg@@ deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.42 2007/05/26 19:54:24 todd Exp $	*/
d54 1
d280 1
a280 1
	cdev_notdef(),			/* 120 */
@


1.42
log
@prodded by marco, enable bio everywhere
grudgingly ok deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.41 2007/02/28 18:48:35 miod Exp $	*/
a53 1
#include "bio.h"
d154 1
a154 1
	cdev_bio_init(NBIO,bio),	/* 4: ioctl tunnel */
@


1.41
log
@SBus parallel port driver, from NetBSD but untested (no printer or cables);
this should hopefully stop people from asking me about it (-:
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.40 2005/07/31 06:39:07 dlg Exp $	*/
d54 1
d155 1
a155 1
	cdev_notdef(),			/* 4 */
@


1.40
log
@remove the config glue between the /dev entry for ses and its driver

sure deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.39 2005/03/09 18:41:49 miod Exp $	*/
a76 1
#ifdef notyet
a77 3
#else
#define	NBPP 0
#endif
a265 1
#ifdef notyet
a266 3
#else
	cdev_notdef(),
#endif
@


1.39
log
@Preliminary support for the floppy drive on Ultrasparcs. Only tested on
SBus machines so far, although EBus attachment glue is provided but not enabled
by default.

Also, fdformat(8) does not work correctly yet, although reading and writing
is safe; this will hopefully be fixed in the near future.

ok deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.38 2004/05/30 08:11:26 grange Exp $	*/
a98 1
#include "ses.h"
d158 1
a158 1
	cdev_ses_init(NSES,ses),	/* 4: SCSI SES/SAF-TE */
@


1.38
log
@Devices hot plugging support.
The hotplug pseudo-device passes device attachment and detachment events
to userland.  When a device attaches or detaches, the corresponding event
is queued.  The events can then be obtained from the queue through the
read(2) call on the /dev/hotplug device file. Each event consists of
event type (attach/detach), device class (DV_*) and device name (sd1 e.g.).

We have hotplug pseudo-device on alpha, amd64, i386, macppc and sparc64.
Since it was tested only on i386 other archs has it commented out
in GENERIC until tested.

The idea liked peter@@ tedu@@ drahn@@ millert@@ marco@@ henning@@.
Ok deraadt@@.
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.37 2004/02/10 01:31:21 millert Exp $	*/
a85 1
#ifdef notyet
a86 3
#endif
#define NFD 0
#define NFDC 0
@


1.37
log
@Add the ptm device to pty(4).  By opening /dev/ptm and using the PTMGET
ioctl(2), an unprivileged process may allocate a pty and have its owner
and mode set appropriately.  This means that programs such as xterm and
screen no longer need to be setuid.  Programs using the openpty()
function require zero changes and will "just work".

Designed by beck@@ and deraadt@@; changes by beck@@ with cleanup (and
a rewrite of the vnode bits) by art@@ and tweaks/bugfixes by me.
Tested by many.
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.36 2003/06/27 16:57:14 nate Exp $	*/
d124 1
d296 1
@


1.36
log
@kqueue support for various usb devices including: usb, uhid, ugen,
and uscanner
From NetBSD
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.35 2003/06/02 23:27:56 millert Exp $	*/
d294 1
@


1.35
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.34 2003/05/14 00:20:37 tedu Exp $	*/
d261 1
a261 1
	cdev_usbdev_init(NURIO,urio),	/* 94: USB Diamond Rio 500 */
@


1.34
log
@add {b,c}devsw_lookup convenience functions.
move chrtoblk and blktochr into MI code.
tested on several archs and ok deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.33 2002/12/05 02:49:55 kjc Exp $	*/
d25 1
a25 5
 * 3. All advertising materials mentioning features or use of this software
 *    must display the following acknowledgement:
 *	This product includes software developed by the University of
 *	California, Berkeley and its contributors.
 * 4. Neither the name of the University nor the names of its contributors
@


1.33
log
@remove altq entries.
altq is merged into pf and handled through pf.
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.32 2002/06/19 02:52:24 mickey Exp $	*/
d340 1
a340 1
static int chrtoblktbl[] = {
d467 1
a467 36

/*
 * Routine to convert from character to block device number.
 */
dev_t
chrtoblk(dev)
	dev_t dev;
{
	int blkmaj;

	if (major(dev) >= nchrdev)
		return (NODEV);
	blkmaj = chrtoblktbl[major(dev)];
	if (blkmaj == NODEV)
		return (NODEV);
	return (makedev(blkmaj, minor(dev)));
}

/*
 * Convert a character device number to a block device number.
 */
dev_t
blktochr(dev)
	dev_t dev;
{
	int blkmaj = major(dev);
	int i;

	if (blkmaj >= nblkdev)
		return (NODEV);
	for (i = 0; i < sizeof(chrtoblktbl)/sizeof(chrtoblktbl[0]); i++)
		if (blkmaj == chrtoblktbl[i])
			return (makedev(i, minor(dev)));
	return (NODEV);
}

@


1.32
log
@using cdev_ugen_init for all sorts of usb devices is just one pint less wrong than using cdev_decl_random for the same purpose
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.31 2002/06/11 05:15:21 miod Exp $	*/
a118 2
#include <altq/altqconf.h>

d244 1
a244 1
	cdev_altq_init(NALTQ,altq),	/* 74: ALTQ control interface */
@


1.31
log
@Move cdev_lpt_init() to a common location.
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.30 2002/05/16 21:11:18 miod Exp $	*/
d265 1
a265 1
	cdev_ugen_init(NUGEN,ugen),	/* 92: USB generic driver */
d269 1
a269 1
	cdev_ugen_init(NUSCANNER,uscanner), /* 96: USB scanners */
@


1.30
log
@Add systrace support to all the remaining architectures.

Tested by various people on various platforms, I'm willing to fix any
breakage this causes.

ok niels@@ deraadt@@ and mickey@@ (after his comments were applied)
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.29 2002/03/15 20:46:11 jason Exp $	*/
a56 6

/* open, close, write, ioctl */
#define cdev_lpt_init(c,n) { \
	dev_init(c,n,open), dev_init(c,n,close), (dev_type_read((*))) enodev, \
	dev_init(c,n,write), dev_init(c,n,ioctl), (dev_type_stop((*))) enodev, \
	0, seltrue, (dev_type_mmap((*))) enodev }
@


1.29
log
@Add lpt device entry point
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.28 2002/01/31 22:36:14 jason Exp $	*/
d135 2
d220 1
a220 1
	cdev_notdef(),			/* 50 */
@


1.28
log
@add support for USER_PCICONF
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.27 2002/01/31 00:01:59 jason Exp $	*/
d58 6
d86 1
d205 1
a205 1
	cdev_notdef(),			/* 37 */
@


1.27
log
@Don't need NFB (fb's aren't accessible this way)
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.26 2002/01/30 23:58:03 jason Exp $	*/
d100 5
d217 3
d221 1
@


1.26
log
@Driver for getting at performance counters.  These manifest them
selves as "sc at sbus" and a couple of registers on psycho (sabre
doesn't appear to have these registers).
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.25 2002/01/24 03:38:56 jason Exp $	*/
a75 1
#define NFB 0
d178 1
a178 1
	cdev_fb_init(NFB,fb),		/* 22: /dev/fb indirect driver */
@


1.25
log
@Don't need ms.h (or SUNKBD/SUNMS)
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.24 2002/01/17 05:17:10 jason Exp $	*/
d88 1
d182 1
a182 1
	cdev_notdef(),			/* 25 */
@


1.24
log
@I'm a tree breaker... sorry... don't include "kbd.h"
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.23 2002/01/16 21:36:18 jason Exp $	*/
a76 8
#include "ms.h"
#if 0
#include "sunkbd.h"
#include "sunms.h"
#else
#define NSUNKBD 0
#define NSUNMS 0
#endif
d169 1
a169 1
	cdev_mouse_init(NMS+NSUNMS,ms),	/* 13: /dev/mouse */
@


1.23
log
@keyboards are not directly accessible
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.22 2002/01/13 03:37:08 jason Exp $	*/
a76 1
#include "kbd.h"
@


1.22
log
@108 and 109 should point to stty/sbpp not mtty/mbpp
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.21 2002/01/13 02:06:45 jason Exp $	*/
d166 1
a166 1
	cdev_tty_init(NKBD+NSUNKBD,kd), /* 1: Sun keyboard/display */
d194 1
a194 1
	cdev_mouse_init(NKBD+NSUNKBD,kbd),	/* 29: /dev/kbd */
@


1.21
log
@Port of my spif driver to sparc64 (untested)
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.20 2002/01/12 20:19:40 jason Exp $	*/
d282 2
a283 2
	cdev_tty_init(NSTTY,mtty),	/* 108: spif serial ports */
	cdev_gen_init(NSBPP,mbpp),	/* 109: spif parallel ports */
@


1.20
log
@Port of Iain Hibbert's magma driver to sparc64
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.19 2002/01/04 16:00:34 jason Exp $	*/
d96 1
d282 2
a283 2
	cdev_notdef(),			/* 108 */
	cdev_notdef(),			/* 109 */
@


1.19
log
@oops, move cdev_decls to conf.h
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.18 2002/01/04 15:57:19 jason Exp $	*/
d92 3
a95 3
#endif
#define NBPP 0
#define NMAGMA 0
d239 2
a240 2
	cdev_notdef(),			/* 71 */
	cdev_notdef(),			/* 72 */
@


1.18
log
@add the full suite of USB devices: usb, uhid, ugen, ulpt, urio, ucom, uscanner
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.17 2001/12/14 23:14:02 jason Exp $	*/
a111 1
cdev_decl(usb);
a112 1
cdev_decl(uhid);
a113 1
cdev_decl(ugen);
a114 1
cdev_decl(ulpt);
a115 1
cdev_decl(urio);
a116 1
cdev_decl(ucom);
a117 1
cdev_decl(uscanner);
@


1.17
log
@add wskbd, wsmouse, and wsmux cdev entries
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.16 2001/12/11 23:19:02 miod Exp $	*/
d111 15
d266 7
a272 7
	cdev_notdef(),			/* 90 */
	cdev_notdef(),			/* 91 */
	cdev_notdef(),			/* 92 */
	cdev_notdef(),			/* 93 */
	cdev_notdef(),			/* 94 */
	cdev_notdef(),			/* 95 */
	cdev_notdef(),			/* 96 */
@


1.17.2.1
log
@Merge in -current, builds on i386, otherwise untested
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.27 2002/01/31 00:01:59 jason Exp $	*/
d76 10
d92 1
a92 2
#else
#define	NBPP 0
d94 2
a95 3
#include "magma.h"		/* has NMTTY and NMBPP */
#include "spif.h"		/* has NSTTY and NSBPP */
#include "uperf.h"
a110 8
#include "usb.h"
#include "uhid.h"
#include "ugen.h"
#include "ulpt.h"
#include "urio.h"
#include "ucom.h"
#include "uscanner.h"

d157 1
a157 1
	cdev_notdef(),			/* 1: tapemaster tape */
d169 1
a169 1
	cdev_notdef(),			/* 13: /dev/mouse */
d178 1
a178 1
	cdev_notdef(),			/* 22 */
d181 1
a181 1
	cdev_uperf_init(NUPERF,uperf),	/* 25: performance counters */
d185 1
a185 1
	cdev_notdef(),			/* 29 */
d231 2
a232 2
	cdev_tty_init(NMTTY,mtty),	/* 71: magma serial ports */
	cdev_gen_init(NMBPP,mbpp),	/* 72: magma parallel ports */
d251 7
a257 7
	cdev_usb_init(NUSB,usb),	/* 90: USB controller */
	cdev_usbdev_init(NUHID,uhid),	/* 91: USB generic HID */
	cdev_ugen_init(NUGEN,ugen),	/* 92: USB generic driver */
	cdev_ulpt_init(NULPT,ulpt),	/* 93: USB printers */
	cdev_usbdev_init(NURIO,urio),	/* 94: USB Diamond Rio 500 */
	cdev_tty_init(NUCOM,ucom),	/* 95: USB tty */
	cdev_ugen_init(NUSCANNER,uscanner), /* 96: USB scanners */
d273 2
a274 2
	cdev_tty_init(NSTTY,stty),	/* 108: spif serial ports */
	cdev_gen_init(NSBPP,sbpp),	/* 109: spif parallel ports */
@


1.17.2.2
log
@Sync UBC branch to -current
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.17.2.1 2002/01/31 22:55:24 niklas Exp $	*/
a57 6
/* open, close, write, ioctl */
#define cdev_lpt_init(c,n) { \
	dev_init(c,n,open), dev_init(c,n,close), (dev_type_read((*))) enodev, \
	dev_init(c,n,write), dev_init(c,n,ioctl), (dev_type_stop((*))) enodev, \
	0, seltrue, (dev_type_mmap((*))) enodev }

a79 1
#include "lpt.h"
a99 5
#ifdef USER_PCICONF
#include "pci.h"
cdev_decl(pci);
#endif

a122 2
#include "systrace.h"

d193 1
a193 1
	cdev_lpt_init(NLPT,lpt),	/* 37: parallel printer */
d206 1
a206 1
	cdev_systrace_init(NSYSTRACE,systrace),	/* 50 system call tracing */
a211 3
#ifdef USER_PCICONF
	cdev_pci_init(NPCI,pci),	/* 52: PCI user */
#else
a212 1
#endif
@


1.17.2.3
log
@sync to -current
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.17.2.2 2002/06/11 03:38:43 art Exp $	*/
d58 6
d271 1
a271 1
	cdev_usbdev_init(NUGEN,ugen),	/* 92: USB generic driver */
d275 1
a275 1
	cdev_usbdev_init(NUSCANNER,uscanner), /* 96: USB scanners */
@


1.17.2.4
log
@sync
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
d119 2
d246 1
a246 1
	cdev_notdef(),			/* 74: ALTQ (deprecated) */
d342 1
a342 1
int chrtoblktbl[] = {
d469 36
a504 1
int nchrtoblktbl = sizeof(chrtoblktbl) / sizeof(chrtoblktbl[0]);
@


1.16
log
@Remove declarations that already exist in <sys/conf.h>
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.15 2001/12/05 23:58:41 tdeval Exp $	*/
d104 3
d240 3
a242 3
	cdev_notdef(),			/* 79 */
	cdev_notdef(),			/* 80 */
	cdev_notdef(),			/* 81 */
@


1.15
log
@Enable rootdev auto-configuration by device drivers during boot.
Add support for "raid" devices (prepare future raidframe changes).

OK deraadt@@, Reviewed by drahn@@, jason@@, mickey@@ and miod@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.14 2001/12/04 21:12:41 jason Exp $	*/
a106 1
cdev_decl(ses);
d126 1
a126 1
	bdev_swap_init(1,sw),		/* 4 */
@


1.14
log
@remove direct entry points for bwtwo, cgfourteen, cgsix, cgthree, and tcx
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.13 2001/12/04 20:13:47 jason Exp $	*/
a70 1
#ifdef notyet
a71 2
#endif
#define NRAID 0
@


1.13
log
@add stuff for wsdisplay
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.12 2001/11/15 03:59:08 jason Exp $	*/
a101 5
#include "bwtwo.h"
#include "cgthree.h"
#include "cgsix.h"
#include "tcx.h"
#include "cgfourteen.h"
a104 5
#define NBWTWO 0
#define NCGTHREE 0
#define NCGSIX 0
#define NTCX 0
#define NCGFOURTEEN 0
d184 1
a184 1
	cdev_fb_init(NBWTWO,bwtwo),	/* 27: /dev/bwtwo */
d196 1
a196 1
	cdev_notdef(),			/* 39: /dev/cgfour */
d216 1
a216 1
	cdev_fb_init(NCGTHREE,cgthree),	/* 55: /dev/cgthree */
d228 1
a228 1
	cdev_fb_init(NCGSIX,cgsix),	/* 67: /dev/cgsix */
d261 1
a261 1
	cdev_fb_init(NCGFOURTEEN,cgfourteen), /* 99: /dev/cgfourteen */
d275 1
a275 1
	cdev_fb_init(NTCX,tcx),		/* 109: /dev/tcx */
@


1.12
log
@cdev glue for crypto(9) [Not known to work, but will as soon as interrupt
issues are ironed out]
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.11 2001/10/28 03:14:59 jason Exp $	*/
d116 2
d249 2
a250 1
	cdev_notdef(),			/* 78 */
@


1.11
log
@duh, don't forget cdev entries for char device sabtty (It's been a rough week)
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.10 2001/09/28 02:53:14 mickey Exp $	*/
d130 1
d244 1
a244 1
	cdev_notdef(),			/* 75 */
@


1.11.2.1
log
@Sync the SMP branch to something just after 3.0
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
d90 1
d245 1
a245 1
	cdev_notdef(),			/* 77 */
@


1.11.2.2
log
@Merge in -current
@
text
@a89 1
#include "sab.h"
d244 1
a244 1
	cdev_tty_init(NSABTTY,sabtty),	/* 77: sab82532 serial ports */
@


1.11.2.3
log
@Merge in -current
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.11.2.2 2001/11/13 21:04:17 niklas Exp $	*/
d102 5
d110 5
a114 2

#include "wsdisplay.h"
a129 1
#include "inet.h"
d191 1
a191 1
	cdev_notdef(),			/* 27 */
d203 1
a203 1
	cdev_notdef(),			/* 39 */
d223 1
a223 1
	cdev_notdef(),			/* 55 */
d235 1
a235 1
	cdev_notdef(),			/* 67 */
d243 1
a243 1
	cdev_crypto_init(NCRYPTO,crypto), /* 75: /dev/crypto */
d246 1
a246 2
	cdev_wsdisplay_init(NWSDISPLAY,	/* 78: frame buffers, etc. */
	    wsdisplay),
d267 1
a267 1
	cdev_notdef(),			/* 99 */
d281 1
a281 1
	cdev_notdef(),			/* 109 */
@


1.11.2.4
log
@Merge in trunk
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
d71 1
d73 2
d79 10
d95 1
a95 2
#else
#define	NBPP 0
d97 2
a98 3
#include "magma.h"		/* has NMTTY and NMBPP */
#include "spif.h"		/* has NSTTY and NSBPP */
#include "uperf.h"
a106 8
#include "wskbd.h"
#include "wsmouse.h"
#include "wsmux.h"

#ifdef USER_PCICONF
#include "pci.h"
cdev_decl(pci);
#endif
d110 1
a110 8

#include "usb.h"
#include "uhid.h"
#include "ugen.h"
#include "ulpt.h"
#include "urio.h"
#include "ucom.h"
#include "uscanner.h"
d130 1
a130 1
	bdev_swap_init(1,sw),		/* 4 swap pseudo-device */
d158 1
a158 1
	cdev_notdef(),			/* 1: tapemaster tape */
d170 1
a170 1
	cdev_notdef(),			/* 13: /dev/mouse */
d179 1
a179 1
	cdev_notdef(),			/* 22 */
d182 1
a182 1
	cdev_uperf_init(NUPERF,uperf),	/* 25: performance counters */
d186 1
a186 1
	cdev_notdef(),			/* 29 */
a212 3
#ifdef USER_PCICONF
	cdev_pci_init(NPCI,pci),	/* 52: PCI user */
#else
a213 1
#endif
d232 2
a233 2
	cdev_tty_init(NMTTY,mtty),	/* 71: magma serial ports */
	cdev_gen_init(NMBPP,mbpp),	/* 72: magma parallel ports */
d241 3
a243 3
	cdev_mouse_init(NWSKBD, wskbd),	/* 79: keyboards */
	cdev_mouse_init(NWSMOUSE, wsmouse), /* 80: mice */
	cdev_mouse_init(NWSMUX, wsmux),	/* 81: ws multiplexor */
d252 7
a258 7
	cdev_usb_init(NUSB,usb),	/* 90: USB controller */
	cdev_usbdev_init(NUHID,uhid),	/* 91: USB generic HID */
	cdev_ugen_init(NUGEN,ugen),	/* 92: USB generic driver */
	cdev_ulpt_init(NULPT,ulpt),	/* 93: USB printers */
	cdev_usbdev_init(NURIO,urio),	/* 94: USB Diamond Rio 500 */
	cdev_tty_init(NUCOM,ucom),	/* 95: USB tty */
	cdev_ugen_init(NUSCANNER,uscanner), /* 96: USB scanners */
d274 2
a275 2
	cdev_tty_init(NSTTY,stty),	/* 108: spif serial ports */
	cdev_gen_init(NSBPP,sbpp),	/* 109: spif parallel ports */
@


1.11.2.5
log
@Merge in -current from about a week ago
@
text
@a57 6
/* open, close, write, ioctl */
#define cdev_lpt_init(c,n) { \
	dev_init(c,n,open), dev_init(c,n,close), (dev_type_read((*))) enodev, \
	dev_init(c,n,write), dev_init(c,n,ioctl), (dev_type_stop((*))) enodev, \
	0, seltrue, (dev_type_mmap((*))) enodev }

a79 1
#include "lpt.h"
d198 1
a198 1
	cdev_lpt_init(NLPT,lpt),	/* 37: parallel printer */
@


1.11.2.6
log
@Sync the SMP branch with 3.3
@
text
@d58 6
d125 2
a134 2
#include "systrace.h"

d218 1
a218 1
	cdev_systrace_init(NSYSTRACE,systrace),	/* 50 system call tracing */
d250 1
a250 1
	cdev_notdef(),			/* 74: ALTQ (deprecated) */
d269 1
a269 1
	cdev_usbdev_init(NUGEN,ugen),	/* 92: USB generic driver */
d273 1
a273 1
	cdev_usbdev_init(NUSCANNER,uscanner), /* 96: USB scanners */
@


1.11.2.7
log
@merge the trunk so we will get the genfs and locking fixes
@
text
@d340 1
a340 1
int chrtoblktbl[] = {
d467 36
a502 1
int nchrtoblktbl = sizeof(chrtoblktbl) / sizeof(chrtoblktbl[0]);
@


1.11.2.8
log
@Sync SMP branch to -current
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.11.2.7 2003/05/16 00:29:40 niklas Exp $	*/
d25 5
a29 1
 * 3. Neither the name of the University nor the names of its contributors
@


1.11.2.9
log
@Merge of current from two weeks agointo the SMP branch
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
d261 1
a261 1
	cdev_urio_init(NURIO,urio),	/* 94: USB Diamond Rio 500 */
@


1.11.2.10
log
@Merge with the trunk
@
text
@a123 1
#include "hotplug.h"
a293 2
	cdev_ptm_init(NPTY,ptm),	/* 123: pseudo-tty ptm device */
	cdev_hotplug_init(NHOTPLUG,hotplug), /* 124: devices hot plugging */
@


1.10
log
@move cdev_decl(pf) into it's proper place, kill cdev_decl(ipl) at the same time
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.9 2001/09/20 20:50:03 jason Exp $	*/
d90 1
d245 1
a245 1
	cdev_notdef(),			/* 77 */
@


1.9
log
@openfirmware device (and move ksyms decl to conf.h)
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.8 2001/09/19 23:41:55 jason Exp $	*/
a119 1
cdev_decl(pf);
@


1.8
log
@add mapping for ramdisks to chrtoblktbl
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.7 2001/09/17 04:20:28 jason Exp $	*/
a129 1
cdev_decl(ksyms);
a237 1
#ifdef notyet
a238 3
#else
	cdev_notdef(),
#endif
@


1.7
log
@stuff for ksyms (doesn't quite work yet, tho)
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.6 2001/09/04 19:14:04 todd Exp $	*/
d406 1
a406 1
	/* 61 */	NODEV,
@


1.6
log
@add xfs; jason@@ ok
add tcx to MAKEDEV
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.5 2001/09/04 18:53:36 todd Exp $	*/
d129 3
d249 1
a249 1
	cdev_notdef(),			/* 76 */
@


1.5
log
@enable pf and altq; jason@@ ok
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.4 2001/08/23 15:18:54 art Exp $	*/
d124 5
d213 3
d217 1
@


1.4
log
@wd
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.3 2001/08/20 20:23:53 jason Exp $	*/
d119 5
d234 2
a235 2
	cdev_notdef(),			/* 73 */
	cdev_notdef(),			/* 74 */
@


1.3
log
@$OpenBSD$
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
d70 1
a71 1
#include "wd.h"
a73 1
#define NWD 0
@


1.2
log
@Change from completly broken to just crippled.
@
text
@d1 1
@


1.1
log
@Lot of stuff... Some from NetBSD, some from OpenBSD, minor modifications
@
text
@a56 1
#if 0
d69 1
d72 3
d76 1
d78 2
a89 1
#endif
a90 1
#if 0
d92 1
d95 3
d99 1
d106 10
a115 4
#include "md.h"
#include "ipfilter.h"
#include "rnd.h"
#include "scsibus.h"
a118 12
#include "i4b.h"
#include "i4bctl.h"
#include "i4btrc.h"
#include "i4brbch.h"
#include "i4btel.h"
cdev_decl(i4b);
cdev_decl(i4bctl);
cdev_decl(i4btrc);
cdev_decl(i4brbch);
cdev_decl(i4btel);
#endif

a124 1
#if 0
d126 1
a126 1
	bdev_disk_init(NMD,md),		/* 5: memory disk */
a146 1
#endif
a152 1
#if 0
d177 1
a177 1
	cdev_ipf_init(NIPFILTER,ipl),	/* 25: ip-filter device */
d213 1
a213 1
	cdev_disk_init(NMD,md),		/* 61: memory disk */
d221 2
a222 1
	cdev__ocrwip_init(NAUDIO,audio),	/* 69: /dev/audio */
d224 3
d228 5
a232 5
	cdev_i4b_init(NI4B, i4b),		/* 72: i4b main device */
	cdev_i4bctl_init(NI4BCTL, i4bctl),	/* 73: i4b control device */
	cdev_i4brbch_init(NI4BRBCH, i4brbch),	/* 74: i4b raw b-channel access */
	cdev_i4btrc_init(NI4BTRC, i4btrc),	/* 75: i4b trace device */
	cdev_i4btel_init(NI4BTEL, i4btel),	/* 76: i4b phone device */
d263 5
a267 1
	cdev__ocrwip_init(NBPP,bpp),	/* 107: on-board parallel port */
d279 2
a280 2
	cdev_rnd_init(NRND,rnd),	/* 119: random source pseudo-device */
	cdev_scsibus_init(NSCSIBUS,scsibus), /* 120: SCSI bus */
a281 1
#endif
@

