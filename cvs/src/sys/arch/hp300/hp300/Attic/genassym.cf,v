head	1.23;
access;
symbols
	OPENBSD_5_5:1.22.0.12
	OPENBSD_5_5_BASE:1.22
	OPENBSD_5_4:1.22.0.8
	OPENBSD_5_4_BASE:1.22
	OPENBSD_5_3:1.22.0.6
	OPENBSD_5_3_BASE:1.22
	OPENBSD_5_2:1.22.0.4
	OPENBSD_5_2_BASE:1.22
	OPENBSD_5_1_BASE:1.22
	OPENBSD_5_1:1.22.0.2
	OPENBSD_5_0:1.21.0.24
	OPENBSD_5_0_BASE:1.21
	OPENBSD_4_9:1.21.0.22
	OPENBSD_4_9_BASE:1.21
	OPENBSD_4_8:1.21.0.20
	OPENBSD_4_8_BASE:1.21
	OPENBSD_4_7:1.21.0.16
	OPENBSD_4_7_BASE:1.21
	OPENBSD_4_6:1.21.0.18
	OPENBSD_4_6_BASE:1.21
	OPENBSD_4_5:1.21.0.14
	OPENBSD_4_5_BASE:1.21
	OPENBSD_4_4:1.21.0.12
	OPENBSD_4_4_BASE:1.21
	OPENBSD_4_3:1.21.0.10
	OPENBSD_4_3_BASE:1.21
	OPENBSD_4_2:1.21.0.8
	OPENBSD_4_2_BASE:1.21
	OPENBSD_4_1:1.21.0.6
	OPENBSD_4_1_BASE:1.21
	OPENBSD_4_0:1.21.0.4
	OPENBSD_4_0_BASE:1.21
	OPENBSD_3_9:1.21.0.2
	OPENBSD_3_9_BASE:1.21
	OPENBSD_3_8:1.20.0.4
	OPENBSD_3_8_BASE:1.20
	OPENBSD_3_7:1.20.0.2
	OPENBSD_3_7_BASE:1.20
	OPENBSD_3_6:1.19.0.6
	OPENBSD_3_6_BASE:1.19
	SMP_SYNC_A:1.19
	SMP_SYNC_B:1.19
	OPENBSD_3_5:1.19.0.4
	OPENBSD_3_5_BASE:1.19
	OPENBSD_3_4:1.19.0.2
	OPENBSD_3_4_BASE:1.19
	UBC_SYNC_A:1.18
	OPENBSD_3_3:1.18.0.4
	OPENBSD_3_3_BASE:1.18
	OPENBSD_3_2:1.18.0.2
	OPENBSD_3_2_BASE:1.18
	OPENBSD_3_1:1.17.0.2
	OPENBSD_3_1_BASE:1.17
	UBC_SYNC_B:1.18
	UBC:1.16.0.2
	UBC_BASE:1.16
	OPENBSD_3_0:1.12.0.2
	OPENBSD_3_0_BASE:1.12
	OPENBSD_2_9:1.5.0.16
	OPENBSD_2_9_BASE:1.5
	OPENBSD_2_8:1.5.0.14
	OPENBSD_2_8_BASE:1.5
	OPENBSD_2_7:1.5.0.12
	OPENBSD_2_7_BASE:1.5
	SMP:1.5.0.10
	SMP_BASE:1.5
	kame_19991208:1.5
	OPENBSD_2_6:1.5.0.8
	OPENBSD_2_6_BASE:1.5
	OPENBSD_2_5:1.5.0.6
	OPENBSD_2_5_BASE:1.5
	OPENBSD_2_4:1.5.0.4
	OPENBSD_2_4_BASE:1.5
	OPENBSD_2_3:1.5.0.2
	OPENBSD_2_3_BASE:1.5
	OPENBSD_2_2:1.4.0.2
	OPENBSD_2_2_BASE:1.4
	OPENBSD_2_1:1.3.0.2
	OPENBSD_2_1_BASE:1.3;
locks; strict;
comment	@# @;


1.23
date	2014.03.18.22.36.32;	author miod;	state dead;
branches;
next	1.22;

1.22
date	2011.08.18.19.54.18;	author miod;	state Exp;
branches;
next	1.21;

1.21
date	2005.09.27.22.05.37;	author miod;	state Exp;
branches;
next	1.20;

1.20
date	2005.01.15.21.13.08;	author miod;	state Exp;
branches;
next	1.19;

1.19
date	2003.06.02.23.27.45;	author millert;	state Exp;
branches;
next	1.18;

1.18
date	2002.04.25.22.32.02;	author miod;	state Exp;
branches;
next	1.17;

1.17
date	2002.01.16.20.50.16;	author miod;	state Exp;
branches;
next	1.16;

1.16
date	2001.12.06.23.24.37;	author miod;	state Exp;
branches
	1.16.2.1;
next	1.15;

1.15
date	2001.11.17.21.35.12;	author mickey;	state Exp;
branches;
next	1.14;

1.14
date	2001.11.06.19.53.14;	author miod;	state Exp;
branches;
next	1.13;

1.13
date	2001.11.04.02.58.54;	author miod;	state Exp;
branches;
next	1.12;

1.12
date	2001.09.16.14.28.04;	author miod;	state Exp;
branches;
next	1.11;

1.11
date	2001.08.31.00.37.20;	author miod;	state Exp;
branches;
next	1.10;

1.10
date	2001.08.30.22.10.47;	author miod;	state Exp;
branches;
next	1.9;

1.9
date	2001.06.27.04.05.45;	author art;	state Exp;
branches;
next	1.8;

1.8
date	2001.05.13.17.19.56;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	2001.05.10.01.33.35;	author millert;	state Exp;
branches;
next	1.6;

1.6
date	2001.05.04.22.48.59;	author aaron;	state Exp;
branches;
next	1.5;

1.5
date	97.11.06.19.42.33;	author millert;	state Exp;
branches
	1.5.10.1;
next	1.4;

1.4
date	97.07.06.08.01.59;	author downsj;	state Exp;
branches;
next	1.3;

1.3
date	97.04.17.10.28.35;	author downsj;	state Exp;
branches;
next	1.2;

1.2
date	97.03.29.05.18.10;	author downsj;	state Exp;
branches;
next	1.1;

1.1
date	97.03.26.08.32.40;	author downsj;	state Exp;
branches;
next	;

1.5.10.1
date	2001.07.04.10.15.40;	author niklas;	state Exp;
branches;
next	1.5.10.2;

1.5.10.2
date	2001.10.31.02.52.46;	author nate;	state Exp;
branches;
next	1.5.10.3;

1.5.10.3
date	2001.11.13.21.00.50;	author niklas;	state Exp;
branches;
next	1.5.10.4;

1.5.10.4
date	2001.12.05.00.39.09;	author niklas;	state Exp;
branches;
next	1.5.10.5;

1.5.10.5
date	2002.03.06.00.57.22;	author niklas;	state Exp;
branches;
next	1.5.10.6;

1.5.10.6
date	2003.03.27.23.19.21;	author niklas;	state Exp;
branches;
next	1.5.10.7;

1.5.10.7
date	2003.06.07.11.11.35;	author ho;	state Exp;
branches;
next	;

1.16.2.1
date	2002.01.31.22.55.08;	author niklas;	state Exp;
branches;
next	1.16.2.2;

1.16.2.2
date	2002.06.11.03.35.20;	author art;	state Exp;
branches;
next	;


desc
@@


1.23
log
@Retire hp300, mvme68k and mvme88k ports. These ports have no users, keeping
this hardware alive is becoming increasingly difficult, and I should heed the
message sent by the three disks which have died on me over the last few days.

Noone sane will mourn these ports anyway. So long, and thanks for the fish.
@
text
@#	$OpenBSD: genassym.cf,v 1.22 2011/08/18 19:54:18 miod Exp $
#	$NetBSD: genassym.cf,v 1.11 1998/02/16 20:58:29 thorpej Exp $

#
# Copyright (c) 1982, 1990, 1993
#	The Regents of the University of California.  All rights reserved.
#
# Redistribution and use in source and binary forms, with or without
# modification, are permitted provided that the following conditions
# are met:
# 1. Redistributions of source code must retain the above copyright
#    notice, this list of conditions and the following disclaimer.
# 2. Redistributions in binary form must reproduce the above copyright
#    notice, this list of conditions and the following disclaimer in the
#    documentation and/or other materials provided with the distribution.
# 3. Neither the name of the University nor the names of its contributors
#    may be used to endorse or promote products derived from this software
#    without specific prior written permission.
#
# THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
# ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
# IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
# ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
# FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
# DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
# OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
# HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
# LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
# OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
# SUCH DAMAGE.
#
#	@@(#)genassym.c	8.3 (Berkeley) 1/4/94
#

include <sys/param.h>
include <sys/buf.h>
include <sys/proc.h>
include <sys/mbuf.h>
include <sys/msgbuf.h>
include <sys/syscall.h>
include <sys/user.h>

include <uvm/uvm_extern.h>

include <machine/hp300spu.h>
include <machine/cpu.h>
include <machine/psl.h>
include <machine/reg.h>
include <machine/pte.h>

include <hp300/dev/frodoreg.h>
include <hp300/hp300/clockreg.h>

# values for machineid
export	HP_320
export	HP_330
export	HP_340
export	HP_345
export	HP_350
export	HP_36X
export	HP_370
export	HP_375
export	HP_380
export	HP_382
export	HP_385
export	HP_400
export	HP_425
export	HP_433

# values for mmuid
export	MMUID_345
export	MMUID_375
export	MMUID_382
export	MMUID_385
export	MMUID_425_T
export	MMUID_425_S
export	MMUID_433_T
export	MMUID_433_S
export	MMUID_425_E

export	MMUID_SHIFT
export	MMUID_MASK

# values for ectype
export	EC_PHYS
export	EC_NONE
export	EC_VIRT

# general constants
export	UPAGES
export	USPACE
export	PGSHIFT
export	USRSTACK
export	MAXADDR

# proc fields and values
struct	proc
member	P_MD_FLAGS		p_md.md_flags
member	P_MD_REGS		p_md.md_regs

export	SSLEEP

# PSL values
export	PSL_S
export	PSL_IPL7
export	PSL_LOWIPL
export	PSL_USER
define	PSL_TS			PSL_T | PSL_S
define	SPL1			PSL_S | PSL_IPL1
define	SPL2			PSL_S | PSL_IPL2
define	SPL3			PSL_S | PSL_IPL3
define	SPL4			PSL_S | PSL_IPL4
define	SPL5			PSL_S | PSL_IPL5
define	SPL6			PSL_S | PSL_IPL6

# magic
export	FC_PURGE
export	INTIOBASE
export	MMUBASE
export	MMUSTAT
export	MMUCMD
export	MMUSSTP
export	MMUUSTP
export	MMUTBINVAL
export	MMU_BERR
export	MMU_ENAB
export	MMU_FAULT
export	MMU_CEN
export	MMU_IEN
export	MMU_FPE
export	CACHE_ON
export	CACHE_OFF
export	CACHE_CLR
export	IC_CLEAR
export	DC_CLEAR

# pte/ste bits
export	PG_V
export	PG_NV
export	PG_RO
export	PG_RW
export	PG_CI
export	PG_PROT
export	PG_FRAME
export	SG_V
export	SG_NV
export	SG_RW
export	SG_FRAME
export	SG_ISHIFT

# pcb fields
struct	pcb
member	pcb_ps
member	pcb_usp
member	pcb_regs
member	PCB_FPCTX		pcb_fpregs
define	SIZEOF_PCB		sizeof(struct pcb)

# exception frame size
define	FR_SIZE			sizeof(struct trapframe)

# system calls
export	SYS_execve

# clock registers
export	CLKSR
export	CLKMSB1
export	CLKMSB3

# frodo physical address
export	FRODO_BASE
@


1.22
log
@Because model 362 does not have an SGC bus (or a blind, deaf and mute one),
there is no way we can tell models 360 and 362 apart by probing for an SGC
bus, or for a frodo(4) chip since of the `lil' black swan' 3x2 models, only
model 382 has frodo. So don't bother trying to tell models 360 and 362
apart, and use a common 36X symbol. No functional change except for useless
code removal.
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.21 2005/09/27 22:05:37 miod Exp $
@


1.21
log
@Identify HP 9000/362 and HP 9000/382 models, and attach frodo on them.
Model 382 can be identified with a unique MMUID value; model 362 is told
from model 360 by probing for the frodo chip. Their built-in frame buffer
is not supported at the moment.

Matching information derived from messages to the NetBSD mailing lists.
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.20 2005/01/15 21:13:08 miod Exp $
d60 1
a60 2
export	HP_360
export	HP_362
@


1.20
log
@Kill whitespace at EOL.
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.19 2003/06/02 23:27:45 millert Exp $
d51 1
d61 1
d65 1
d74 1
d170 3
@


1.19
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.18 2002/04/25 22:32:02 miod Exp $
d103 1
a103 1
export	PSL_LOWIPL	
@


1.18
log
@Factorize more common m68k definitions.
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.17 2002/01/16 20:50:16 miod Exp $
d16 1
a16 5
# 3. All advertising materials mentioning features or use of this software
#    must display the following acknowledgement:
#	This product includes software developed by the University of
#	California, Berkeley and its contributors.
# 4. Neither the name of the University nor the names of its contributors
@


1.17
log
@Don't include <sys/map.h> when you don't need what's in it.
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.16 2001/12/06 23:24:37 miod Exp $
a55 16

# values for mmutype
export	MMU_68040
export	MMU_68030
export	MMU_HP
export	MMU_68851

# values for cputype
export	CPU_68020
export	CPU_68030
export	CPU_68040

# values for fputype
export	FPU_68881
export	FPU_68882
export	FPU_68040
@


1.16
log
@Declare SYS_exit for all m68k locore.s'es
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.15 2001/11/17 21:35:12 mickey Exp $
a40 1
include <sys/map.h>
@


1.16.2.1
log
@Merge in -current, builds on i386, otherwise untested
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.17 2002/01/16 20:50:16 miod Exp $
d41 1
@


1.16.2.2
log
@Sync UBC branch to -current
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.16.2.1 2002/01/31 22:55:08 niklas Exp $
d56 16
@


1.15
log
@put more common stuff into m68k/genassym.cf; miod@@ ok
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.14 2001/11/06 19:53:14 miod Exp $
a180 1
export	SYS_exit
@


1.14
log
@Replace inclusion of <vm/foo.h> with the correct <uvm/bar.h> when necessary.
(Look ma, I might have broken the tree)
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.13 2001/11/04 02:58:54 miod Exp $
a115 2
member	p_vmspace
member	p_addr
a119 4

# interrupt/fault metering
struct	uvmexp			UVMEXP_
member	intrs
@


1.13
log
@hp300spu.h information not needed anymore.
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.12 2001/09/16 14:28:04 miod Exp $
a46 2

include <vm/vm.h>
@


1.12
log
@Make use of "export", "struct" and "member" keywords to be easier to read
and simpler.
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.11 2001/08/31 00:37:20 miod Exp $
a65 8
# MMU configuration options
ifdef M68K_MMU_HP
define	M68K_MMU_HP		1
endif
ifdef M68K_MMU_MOTOROLA
define	M68K_MMU_MOTOROLA	1
endif

a70 11
# CPU configuration options
ifdef M68020
define	M68020			1
endif
ifdef M68030
define	M68030			1
endif
ifdef M68040
define	M68040			1
endif

a108 8
# Cache type configuration options
ifdef CACHE_HAVE_VAC
define	CACHE_HAVE_VAC		1
endif
ifdef CACHE_HAVE_PAC
define	CACHE_HAVE_PAC		1
endif

d182 1
a182 1
member	PCB_FPCTX	pcb_fpregs
@


1.11
log
@The fact that my tree builds should not prevent the official tree to
build as well... Right now, .s files can't include unmodified <machine/psl.h>
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.10 2001/08/30 22:10:47 miod Exp $
d61 4
a64 4
define	MMU_68040		MMU_68040
define	MMU_68030		MMU_68030
define	MMU_HP			MMU_HP
define	MMU_68851		MMU_68851
d75 3
a77 3
define	CPU_68020		CPU_68020
define	CPU_68030		CPU_68030
define	CPU_68040		CPU_68040
d91 3
a93 3
define	FPU_68881		FPU_68881
define	FPU_68882		FPU_68882
define	FPU_68040		FPU_68040
d96 13
a108 13
define	HP_320			HP_320
define	HP_330			HP_330
define	HP_340			HP_340
define	HP_345			HP_345
define	HP_350			HP_350
define	HP_360			HP_360
define	HP_370			HP_370
define	HP_375			HP_375
define	HP_380			HP_380
define	HP_385			HP_385
define	HP_400			HP_400
define	HP_425			HP_425
define	HP_433			HP_433
d111 8
a118 8
define	MMUID_345		MMUID_345
define	MMUID_375		MMUID_375
define	MMUID_385		MMUID_385
define	MMUID_425_T		MMUID_425_T
define	MMUID_425_S		MMUID_425_S
define	MMUID_433_T		MMUID_433_T
define	MMUID_433_S		MMUID_433_S
define	MMUID_425_E		MMUID_425_E
d120 2
a121 2
define	MMUID_SHIFT		MMUID_SHIFT
define	MMUID_MASK		MMUID_MASK
d124 3
a126 3
define	EC_PHYS			EC_PHYS
define	EC_NONE			EC_NONE
define	EC_VIRT			EC_VIRT
d137 5
a141 5
define	UPAGES			UPAGES
define	USPACE			USPACE
define	PGSHIFT			PGSHIFT
define	USRSTACK		USRSTACK
define	MAXADDR			MAXADDR
d144 7
a150 5
define	P_VMSPACE		offsetof(struct proc, p_vmspace)
define	P_ADDR			offsetof(struct proc, p_addr)
define	P_MD_FLAGS		offsetof(struct proc, p_md.md_flags)
define	P_MD_REGS		offsetof(struct proc, p_md.md_regs)
define	SSLEEP			SSLEEP
d153 2
a154 1
define UVMEXP_INTRS		offsetof(struct uvmexp, intrs)
d157 4
a160 4
define	PSL_S			PSL_S
define	PSL_IPL7		PSL_IPL7
define	PSL_LOWIPL		PSL_LOWIPL
define	PSL_USER		PSL_USER
d170 19
a188 19
define	FC_PURGE		FC_PURGE
define	INTIOBASE		INTIOBASE
define	MMUBASE			MMUBASE
define	MMUSTAT			MMUSTAT
define	MMUCMD			MMUCMD
define	MMUSSTP			MMUSSTP
define	MMUUSTP			MMUUSTP
define	MMUTBINVAL		MMUTBINVAL
define	MMU_BERR		MMU_BERR
define	MMU_ENAB		MMU_ENAB
define	MMU_FAULT		MMU_FAULT
define	MMU_CEN			MMU_CEN
define	MMU_IEN			MMU_IEN
define	MMU_FPE			MMU_FPE
define	CACHE_ON		CACHE_ON
define	CACHE_OFF		CACHE_OFF
define	CACHE_CLR		CACHE_CLR
define	IC_CLEAR		IC_CLEAR
define	DC_CLEAR		DC_CLEAR
d191 12
a202 12
define	PG_V			PG_V
define	PG_NV			PG_NV
define	PG_RO			PG_RO
define	PG_RW			PG_RW
define	PG_CI			PG_CI
define	PG_PROT			PG_PROT
define	PG_FRAME		PG_FRAME
define	SG_V			SG_V
define	SG_NV			SG_NV
define	SG_RW			SG_RW
define	SG_FRAME		SG_FRAME
define	SG_ISHIFT		SG_ISHIFT
d205 5
a209 4
define	PCB_PS			offsetof(struct pcb, pcb_ps)
define	PCB_USP			offsetof(struct pcb, pcb_usp)
define	PCB_REGS		offsetof(struct pcb, pcb_regs)
define	PCB_FPCTX		offsetof(struct pcb, pcb_fpregs)
d216 2
a217 2
define	SYS_exit		SYS_exit
define	SYS_execve		SYS_execve
d220 3
a222 3
define	CLKSR			CLKSR
define	CLKMSB1			CLKMSB1
define	CLKMSB3			CLKMSB3
@


1.10
log
@Remove duplicates with m68k/m68k/genassym.cf
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.9 2001/06/27 04:05:45 art Exp $
d54 1
d154 5
@


1.9
log
@no more old VM
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.8 2001/05/13 17:19:56 millert Exp $
a53 1
include <machine/psl.h>
a137 1
define	NBPG			NBPG
a142 2
define	P_FORW			offsetof(struct proc, p_forw)
define	P_BACK			offsetof(struct proc, p_back)
a144 3
define	P_PRIORITY		offsetof(struct proc, p_priority)
define	P_STAT			offsetof(struct proc, p_stat)
define	P_WCHAN			offsetof(struct proc, p_wchan)
a147 1
define	SRUN			SRUN
d152 1
a152 7
# PSL values (should just include psl.h?)
define	PSL_S			PSL_S
define	PSL_IPL7		PSL_IPL7
define	PSL_LOWIPL		PSL_LOWIPL
define	PSL_HIGHIPL		PSL_HIGHIPL
define	PSL_USER		PSL_USER
define	PSL_TS			PSL_T | PSL_S
a160 1
define	FC_USERD		FC_USERD
a198 1
define	PCB_ONFAULT		offsetof(struct pcb, pcb_onfault)
d202 1
a202 4
# exception frame offset/sizes
define	FR_SP			offsetof(struct frame, f_regs[15])
define	FR_HW			offsetof(struct frame, f_sr)
define	FR_ADJ			offsetof(struct frame, f_stackadj)
a207 5
define	SYS_sigreturn		SYS_sigreturn

# errno
define	EFAULT			EFAULT
define	ENAMETOOLONG		ENAMETOOLONG
@


1.8
log
@Fix the problem that single-step tracing of a trap instruction
drops the system into kernel debugger; itohy@@netbsd.org
Other m68k ports require similar changes
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.7 2001/05/10 01:33:35 millert Exp $
a49 1
ifdef UVM
a50 1
endif
a157 1
ifdef UVM
a158 3
else
define	V_INTR			offsetof(struct vmmeter, v_intr)
endif
@


1.7
log
@Add a MMUID_425_E define
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.6 2001/05/04 22:48:59 aaron Exp $
d172 1
@


1.6
log
@Substantial update from NetBSD, most notably gives us UVM support; millert@@ ok
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.5 1997/11/06 19:42:33 millert Exp $
d120 1
@


1.5
log
@Idnetify/support hp385 (33Mhz 68040)
@
text
@d1 2
a2 2
#	$OpenBSD: genassym.cf,v 1.4 1997/07/06 08:01:59 downsj Exp $
#	$NetBSD: genassym.cf,v 1.8 1997/05/13 18:01:01 gwr Exp $
d50 4
a157 4
# VM structure fields
define	VM_PMAP			offsetof(struct vmspace, vm_map.pmap)
define	PM_STCHG		offsetof(struct pmap, pm_stchanged)

d159 3
d163 1
a215 1
define	PCB_USTP		offsetof(struct pcb, pcb_ustp)
@


1.5.10.1
log
@Merge in -current from two days ago in the SMP branch.
As usual with merges, they do not indicate progress, so do not hold
your breath for working SMP, and do not mail me and ask about the
state of it.  It has not changed.  There is work ongoing, but very, very
slowly.  The commit is done in parts as to not lock up the tree in too
big chunks at a time.
@
text
@d1 2
a2 2
#	$OpenBSD$
#	$NetBSD: genassym.cf,v 1.11 1998/02/16 20:58:29 thorpej Exp $
a49 2
include <uvm/uvm_extern.h>

a115 1
define	MMUID_425_E		MMUID_425_E
d154 4
d159 1
a159 1
define UVMEXP_INTRS		offsetof(struct uvmexp, intrs)
a166 1
define	PSL_TS			PSL_T | PSL_S
d212 1
@


1.5.10.2
log
@Sync the SMP branch to something just after 3.0
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.5.10.1 2001/07/04 10:15:40 niklas Exp $
d61 4
a64 4
export	MMU_68040
export	MMU_68030
export	MMU_HP
export	MMU_68851
d75 3
a77 3
export	CPU_68020
export	CPU_68030
export	CPU_68040
d91 3
a93 3
export	FPU_68881
export	FPU_68882
export	FPU_68040
d96 13
a108 13
export	HP_320
export	HP_330
export	HP_340
export	HP_345
export	HP_350
export	HP_360
export	HP_370
export	HP_375
export	HP_380
export	HP_385
export	HP_400
export	HP_425
export	HP_433
d111 8
a118 8
export	MMUID_345
export	MMUID_375
export	MMUID_385
export	MMUID_425_T
export	MMUID_425_S
export	MMUID_433_T
export	MMUID_433_S
export	MMUID_425_E
d120 2
a121 2
export	MMUID_SHIFT
export	MMUID_MASK
d124 3
a126 3
export	EC_PHYS
export	EC_NONE
export	EC_VIRT
d137 6
a142 5
export	UPAGES
export	USPACE
export	PGSHIFT
export	USRSTACK
export	MAXADDR
d145 11
a155 7
struct	proc
member	p_vmspace
member	p_addr
member	P_MD_FLAGS		p_md.md_flags
member	P_MD_REGS		p_md.md_regs

export	SSLEEP
d158 1
a158 2
struct	uvmexp			UVMEXP_
member	intrs
d160 6
a165 5
# PSL values
export	PSL_S
export	PSL_IPL7
export	PSL_LOWIPL	
export	PSL_USER
d175 20
a194 19
export	FC_PURGE
export	INTIOBASE
export	MMUBASE
export	MMUSTAT
export	MMUCMD
export	MMUSSTP
export	MMUUSTP
export	MMUTBINVAL
export	MMU_BERR
export	MMU_ENAB
export	MMU_FAULT
export	MMU_CEN
export	MMU_IEN
export	MMU_FPE
export	CACHE_ON
export	CACHE_OFF
export	CACHE_CLR
export	IC_CLEAR
export	DC_CLEAR
d197 12
a208 12
export	PG_V
export	PG_NV
export	PG_RO
export	PG_RW
export	PG_CI
export	PG_PROT
export	PG_FRAME
export	SG_V
export	SG_NV
export	SG_RW
export	SG_FRAME
export	SG_ISHIFT
d211 5
a215 5
struct	pcb
member	pcb_ps
member	pcb_usp
member	pcb_regs
member	PCB_FPCTX	pcb_fpregs
d218 4
a221 1
# exception frame size
d225 7
a231 2
export	SYS_exit
export	SYS_execve
d234 3
a236 3
export	CLKSR
export	CLKMSB1
export	CLKMSB3
@


1.5.10.3
log
@Merge in -current
@
text
@d1 1
a1 1
#	$OpenBSD$
d48 2
d66 8
d79 11
d128 8
d209 1
a209 1
member	PCB_FPCTX		pcb_fpregs
@


1.5.10.4
log
@Merge in -current
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.5.10.3 2001/11/13 21:00:50 niklas Exp $
d116 2
d122 4
@


1.5.10.5
log
@Merge in trunk
@
text
@d1 1
a1 1
#	$OpenBSD$
d41 1
d181 1
@


1.5.10.6
log
@Sync the SMP branch with 3.3
@
text
@d57 16
@


1.5.10.7
log
@Sync SMP branch to -current
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.5.10.6 2003/03/27 23:19:21 niklas Exp $
d16 5
a20 1
# 3. Neither the name of the University nor the names of its contributors
@


1.4
log
@Sync with changes from NetBSD, up to 970705.

This includes all of the new frodo drivers, from Michael Smith, hacked up
by Jason R. Thorpe; other changes, mostly configuration and/or m68k
abstraction related, from Thorpe.  A few others of my own.

This compiles and runs, have not yet tested Domain kbd or apci ports.
@
text
@d1 1
a1 1
#	$OpenBSD: genassym.cf,v 1.3 1997/04/17 10:28:35 downsj Exp $
d103 1
d111 1
@


1.3
log
@Better machine type identification from Mike Smith
(<miff@@spam.frisbee.net.au>).
@
text
@d1 2
a2 2
#	$OpenBSD: genassym.cf,v 1.2 1997/03/29 05:18:10 downsj Exp $
#	$NetBSD: genassym.cf,v 1.5 1997/03/16 09:40:01 thorpej Exp $
d50 1
a56 1
include <hp300/hp300/led.h>
d58 18
a75 1
define	__XXX_BUG_FODDER	0
d77 1
a77 1
# CPU options
a87 19
# MMU options
ifdef M68K_MMU_MOTOROLA
define	M68K_MMU_MOTOROLA	1
endif
ifdef M68K_MMU_HP
define	M68K_MMU_HP		1
endif

# values for mmutype
define	MMU_68040		MMU_68040
define	MMU_68030		MMU_68030
define	MMU_HP			MMU_HP
define	MMU_68851		MMU_68851

# values for cputype
define	CPU_68020		CPU_68020
define	CPU_68030		CPU_68030
define	CPU_68040		CPU_68040

d90 1
d96 2
a100 1
define	HP_340			HP_340
d103 1
d107 11
d123 8
d153 1
a153 1
define	VM_PMAP			offsetof(struct vmspace, vm_pmap)
a235 6

# LED stuff
define	LED_PULSE		LED_PULSE
define	LED_DISK		LED_DISK
define	LED_LANRCV		LED_LANRCV
define	LED_LANXMT		LED_LANXMT
@


1.2
log
@Switch to genassym.cf.
@
text
@d1 1
a1 1
#	$OpenBSD$
d103 1
@


1.1
log
@Merge changes from NetBSD, up to 3/19/97; undoes some local changes.
Changed to match new arch/m68k code.
genassym.cf is currently just a place holder.
@
text
@d1 1
@
