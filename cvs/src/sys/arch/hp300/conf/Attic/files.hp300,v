head	1.37;
access;
symbols
	OPENBSD_5_5:1.36.0.4
	OPENBSD_5_5_BASE:1.36
	OPENBSD_5_4:1.35.0.8
	OPENBSD_5_4_BASE:1.35
	OPENBSD_5_3:1.35.0.6
	OPENBSD_5_3_BASE:1.35
	OPENBSD_5_2:1.35.0.4
	OPENBSD_5_2_BASE:1.35
	OPENBSD_5_1_BASE:1.35
	OPENBSD_5_1:1.35.0.2
	OPENBSD_5_0:1.33.0.6
	OPENBSD_5_0_BASE:1.33
	OPENBSD_4_9:1.33.0.4
	OPENBSD_4_9_BASE:1.33
	OPENBSD_4_8:1.33.0.2
	OPENBSD_4_8_BASE:1.33
	OPENBSD_4_7:1.32.0.12
	OPENBSD_4_7_BASE:1.32
	OPENBSD_4_6:1.32.0.14
	OPENBSD_4_6_BASE:1.32
	OPENBSD_4_5:1.32.0.10
	OPENBSD_4_5_BASE:1.32
	OPENBSD_4_4:1.32.0.8
	OPENBSD_4_4_BASE:1.32
	OPENBSD_4_3:1.32.0.6
	OPENBSD_4_3_BASE:1.32
	OPENBSD_4_2:1.32.0.4
	OPENBSD_4_2_BASE:1.32
	OPENBSD_4_1:1.32.0.2
	OPENBSD_4_1_BASE:1.32
	OPENBSD_4_0:1.31.0.2
	OPENBSD_4_0_BASE:1.31
	OPENBSD_3_9:1.30.0.2
	OPENBSD_3_9_BASE:1.30
	OPENBSD_3_8:1.28.0.2
	OPENBSD_3_8_BASE:1.28
	OPENBSD_3_7:1.27.0.2
	OPENBSD_3_7_BASE:1.27
	OPENBSD_3_6:1.22.0.2
	OPENBSD_3_6_BASE:1.22
	SMP_SYNC_A:1.20
	SMP_SYNC_B:1.20
	OPENBSD_3_5:1.20.0.6
	OPENBSD_3_5_BASE:1.20
	OPENBSD_3_4:1.20.0.4
	OPENBSD_3_4_BASE:1.20
	UBC_SYNC_A:1.20
	OPENBSD_3_3:1.20.0.2
	OPENBSD_3_3_BASE:1.20
	OPENBSD_3_2:1.19.0.4
	OPENBSD_3_2_BASE:1.19
	OPENBSD_3_1:1.19.0.2
	OPENBSD_3_1_BASE:1.19
	UBC_SYNC_B:1.19
	UBC:1.17.0.2
	UBC_BASE:1.17
	OPENBSD_3_0:1.15.0.2
	OPENBSD_3_0_BASE:1.15
	OPENBSD_2_9:1.12.0.8
	OPENBSD_2_9_BASE:1.12
	OPENBSD_2_8:1.12.0.6
	OPENBSD_2_8_BASE:1.12
	OPENBSD_2_7:1.12.0.4
	OPENBSD_2_7_BASE:1.12
	SMP:1.12.0.2
	SMP_BASE:1.12
	kame_19991208:1.12
	OPENBSD_2_6:1.11.0.8
	OPENBSD_2_6_BASE:1.11
	OPENBSD_2_5:1.11.0.6
	OPENBSD_2_5_BASE:1.11
	OPENBSD_2_4:1.11.0.4
	OPENBSD_2_4_BASE:1.11
	OPENBSD_2_3:1.11.0.2
	OPENBSD_2_3_BASE:1.11
	OPENBSD_2_2:1.10.0.2
	OPENBSD_2_2_BASE:1.10
	OPENBSD_2_1:1.9.0.2
	OPENBSD_2_1_BASE:1.9;
locks; strict;
comment	@# @;


1.37
date	2014.03.18.22.36.31;	author miod;	state dead;
branches;
next	1.36;

1.36
date	2013.09.24.20.10.42;	author miod;	state Exp;
branches;
next	1.35;

1.35
date	2011.12.21.23.12.03;	author miod;	state Exp;
branches;
next	1.34;

1.34
date	2011.08.18.20.02.57;	author miod;	state Exp;
branches;
next	1.33;

1.33
date	2010.06.29.20.30.32;	author guenther;	state Exp;
branches;
next	1.32;

1.32
date	2007.01.06.20.17.41;	author miod;	state Exp;
branches;
next	1.31;

1.31
date	2006.04.14.21.05.43;	author miod;	state Exp;
branches;
next	1.30;

1.30
date	2005.12.31.19.30.14;	author miod;	state Exp;
branches;
next	1.29;

1.29
date	2005.09.21.21.08.31;	author miod;	state Exp;
branches;
next	1.28;

1.28
date	2005.04.22.11.59.11;	author miod;	state Exp;
branches;
next	1.27;

1.27
date	2005.03.08.20.00.23;	author tdeval;	state Exp;
branches;
next	1.26;

1.26
date	2005.01.24.21.36.37;	author miod;	state Exp;
branches;
next	1.25;

1.25
date	2005.01.14.22.39.23;	author miod;	state Exp;
branches;
next	1.24;

1.24
date	2004.10.08.13.04.36;	author grange;	state Exp;
branches;
next	1.23;

1.23
date	2004.09.16.09.14.03;	author mickey;	state Exp;
branches;
next	1.22;

1.22
date	2004.08.03.21.46.54;	author miod;	state Exp;
branches;
next	1.21;

1.21
date	2004.07.10.03.40.32;	author deraadt;	state Exp;
branches;
next	1.20;

1.20
date	2003.03.16.12.38.31;	author miod;	state Exp;
branches;
next	1.19;

1.19
date	2002.01.10.21.10.43;	author miod;	state Exp;
branches;
next	1.18;

1.18
date	2001.12.20.19.02.27;	author miod;	state Exp;
branches;
next	1.17;

1.17
date	2001.11.30.20.58.14;	author miod;	state Exp;
branches
	1.17.2.1;
next	1.16;

1.16
date	2001.11.21.00.29.58;	author miod;	state Exp;
branches;
next	1.15;

1.15
date	2001.08.26.00.15.33;	author miod;	state Exp;
branches;
next	1.14;

1.14
date	2001.05.11.07.55.33;	author deraadt;	state Exp;
branches;
next	1.13;

1.13
date	2001.05.11.06.41.39;	author deraadt;	state Exp;
branches;
next	1.12;

1.12
date	99.11.08.15.36.08;	author mickey;	state Exp;
branches
	1.12.2.1;
next	1.11;

1.11
date	97.11.06.19.42.31;	author millert;	state Exp;
branches;
next	1.10;

1.10
date	97.07.06.08.01.43;	author downsj;	state Exp;
branches;
next	1.9;

1.9
date	97.04.16.11.55.55;	author downsj;	state Exp;
branches;
next	1.8;

1.8
date	97.03.26.08.32.38;	author downsj;	state Exp;
branches;
next	1.7;

1.7
date	97.02.24.01.16.07;	author downsj;	state Exp;
branches;
next	1.6;

1.6
date	97.02.16.10.42.18;	author downsj;	state Exp;
branches;
next	1.5;

1.5
date	97.02.10.06.43.29;	author downsj;	state Exp;
branches;
next	1.4;

1.4
date	97.02.10.01.33.55;	author downsj;	state Exp;
branches;
next	1.3;

1.3
date	97.02.03.08.11.52;	author downsj;	state Exp;
branches;
next	1.2;

1.2
date	97.02.03.04.47.08;	author downsj;	state Exp;
branches;
next	1.1;

1.1
date	97.01.12.15.12.15;	author downsj;	state Exp;
branches;
next	;

1.12.2.1
date	2001.07.04.10.15.23;	author niklas;	state Exp;
branches;
next	1.12.2.2;

1.12.2.2
date	2001.10.31.02.52.46;	author nate;	state Exp;
branches;
next	1.12.2.3;

1.12.2.3
date	2001.12.05.00.39.09;	author niklas;	state Exp;
branches;
next	1.12.2.4;

1.12.2.4
date	2003.03.27.23.19.19;	author niklas;	state Exp;
branches;
next	;

1.17.2.1
date	2002.01.31.22.55.08;	author niklas;	state Exp;
branches;
next	1.17.2.2;

1.17.2.2
date	2003.05.19.21.39.16;	author tedu;	state Exp;
branches;
next	;


desc
@@


1.37
log
@Retire hp300, mvme68k and mvme88k ports. These ports have no users, keeping
this hardware alive is becoming increasingly difficult, and I should heed the
message sent by the three disks which have died on me over the last few days.

Noone sane will mourn these ports anyway. So long, and thanks for the fish.
@
text
@#	$OpenBSD: files.hp300,v 1.36 2013/09/24 20:10:42 miod Exp $
#	$NetBSD: files.hp300,v 1.28 1997/05/12 08:23:28 thorpej Exp $
#
# hp300-specific configuration info

# maxpartitions must be the first item in files.${ARCH}
maxpartitions 16

maxusers 2 8 64

#
# Mainbus
#

device	mainbus {}
attach	mainbus at root

#
# Internal i/o space
#

device	intio {}
attach	intio at mainbus
file	arch/hp300/dev/intio.c			intio

#
# DIO bus
#

device	dio {[scode = -1]}
attach	dio at mainbus
file	arch/hp300/dev/dio.c			dio

#
# SGC bus
#

device	sgc {[slot = -1]}
attach	sgc at mainbus
file	arch/hp300/dev/sgc.c			sgc	needs-flag

#
# Devices in Internal i/o space
#

# Apollo Utilility Chip (a.k.a. "Frodo") found on 4xx workstations
device	frodo {[offset = -1]}
attach	frodo at intio
file	arch/hp300/dev/frodo.c			frodo

# Apollo Keyboard and mouse
device	dnkbd: wskbddev, wsmousedev
attach	dnkbd at frodo
file	arch/hp300/dev/dnkbd.c			dnkbd	needs-flag
file	arch/hp300/dev/dnkbdmap.c		dnkbd

# Apollo APCI 8250-like UARTs
device	apci
attach	apci at frodo
file	arch/hp300/dev/apci.c			apci	needs-flag
file	arch/hp300/dev/apci_subr.c		apci | dnkbd

# "workstation console" routines
include	"dev/rasops/files.rasops"
include	"dev/wscons/files.wscons"
include	"dev/wsfont/files.wsfont"
file	arch/hp300/hp300/wscons_machdep.c	wsdisplay

#
# Frame buffer devices
#
file	arch/hp300/dev/sti_machdep.c		sti

define	diofb
define	diofb_mono
file	arch/hp300/dev/diofb.c			diofb | diofb_mono
file	arch/hp300/dev/diofb_mono.c		diofb_mono

device	dvbox: wsemuldisplaydev, diofb, rasops8
attach	dvbox at intio with dvbox_intio
attach	dvbox at dio with dvbox_dio
file	arch/hp300/dev/dvbox.c			dvbox	needs-flag

device	gbox: wsemuldisplaydev, diofb, rasops8
attach	gbox at intio with gbox_intio
attach	gbox at dio with gbox_dio
file	arch/hp300/dev/gbox.c			gbox	needs-flag

device	hyper: wsemuldisplaydev, diofb_mono, rasops1
attach	hyper at dio
file	arch/hp300/dev/hyper.c			hyper	needs-flag

device	rbox: wsemuldisplaydev, diofb, rasops8
attach	rbox at intio with rbox_intio
attach	rbox at dio with rbox_dio
file	arch/hp300/dev/rbox.c			rbox	needs-flag

attach	sti at dio with sti_dio
file	arch/hp300/dev/sti_dio.c		sti_dio

device	topcat: wsemuldisplaydev, diofb, rasops8
attach	topcat at intio with topcat_intio
attach	topcat at dio with topcat_dio
file	arch/hp300/dev/topcat.c			topcat	needs-flag

device	tvrx: wsemuldisplaydev, diofb_mono, rasops1
attach	tvrx at dio
file	arch/hp300/dev/tvrx.c			tvrx	needs-flag

#
# Other devices on the DIO bus
#

# DCA serial interface
device	dca: tty
attach	dca at dio
file	arch/hp300/dev/dca.c			dca	needs-flag

# DCM serial interface
device	dcm: tty
attach	dcm at dio
file	arch/hp300/dev/dcm.c			dcm	needs-flag

# LANCE ethernet
attach	le at dio: le24
file	arch/hp300/dev/if_le.c			le

# 425e digital audio
attach	arcofi at dio with arcofi_dio
file	arch/hp300/dev/arcofi_dio.c		arcofi_dio

# HP-IB interfaces
define	hpibdev {}

device	nhpib: hpibdev
attach	nhpib at dio
file	arch/hp300/dev/nhpib.c			nhpib

device	fhpib: hpibdev
attach	fhpib at dio
file	arch/hp300/dev/fhpib.c			fhpib

# HP-IB bus layer
device	hpibbus {[slave = -1], [punit = -1]}
attach	hpibbus at hpibdev
file	arch/hp300/dev/hpib.c			hpibbus

# HP-IB devices
device	ct: tape
attach	ct at hpibbus
file	arch/hp300/dev/ct.c			ct	needs-flag

device	mt: tape
attach	mt at hpibbus
file	arch/hp300/dev/mt.c			mt	needs-flag

device	hd: disk
attach	hd at hpibbus
file	arch/hp300/dev/hd.c			hd	needs-flag
major	{hd = 2}

device	ppi
attach	ppi at hpibbus
file	arch/hp300/dev/ppi.c			ppi	needs-flag

# RAM disk
major	{rd = 8}

# SCSI devices
include	"scsi/files.scsi"

device	spc: scsi
attach	spc at dio
file	arch/hp300/dev/spc.c			spc	needs-flag
file	arch/hp300/dev/mb89352.c		spc

major	{sd = 4}
major	{cd = 9}

#
# Devices on the SGC bus
#

attach	sti at sgc with sti_sgc
file	arch/hp300/dev/sti_sgc.c		sti_sgc

# ISA devices
include "dev/isa/files.isa"
include "dev/isa/files.isapnp"

#
# ISA bridge
#

device	isabr: isabus
attach	isabr at frodo
file	arch/hp300/dev/isabr.c			isabr	needs-flag

#
# HIL Human Interface Loop devices
#
include	"dev/hil/files.hil"

attach	hil at intio with hil_intio
file	arch/hp300/dev/hil_intio.c		hil_intio

#
# Non-device files
#

file	arch/hp300/hp300/autoconf.c
file	arch/hp300/hp300/bus_space.c
file	arch/hp300/hp300/clock.c
file	arch/hp300/hp300/conf.c
file	arch/hp300/hp300/db_memrw.c		ddb | kgdb
file	arch/hp300/hp300/disksubr.c
file	arch/hp300/hp300/kgdb_machdep.c		kgdb
file	arch/hp300/hp300/machdep.c
file	arch/hp300/hp300/intr.c
file	arch/hp300/hp300/leds.c			useleds
file	arch/hp300/hp300/mem.c
file	arch/m68k/m68k/pmap_motorola.c
file	arch/hp300/hp300/pmap_bootstrap.c
file	arch/hp300/hp300/sys_machdep.c
file	arch/hp300/hp300/trap.c
file	arch/hp300/hp300/vm_machdep.c
file	arch/hp300/dev/dma.c
@


1.36
log
@Sync the MI LANCE code ( le(4) ) with NetBSD, except for the following:
- the am7990_get() - now lance_get() - is unchanged.
- the interrupt acknowledge logic is unchanged, and will disable interrupts,
  then acknowledge all interrupt conditions.

Add ILACC (79900) support (from NetBSD).

Both LANCE (am7990.c) and ILACC (am79900.c) code share as much common code
(lance.c) as possible. This affects all le(4) attachments, but the changes
are mostly mechanical, to split am7990-specific parts from lance-agnostic
parts.

Compile tested on all affected platforms. Tested on alpha, hp300, luna88k,
mvme88k, sparc, sparc64 and vax.
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.35 2011/12/21 23:12:03 miod Exp $
@


1.35
log
@Work-in-progress driver for the HP ``Audio1'' device found on the HP 9000/425e
(hp300) and the HP9000/705 and 9000/710 (hppa). 8-bit mono, 8KHz, no surprise
since it is based upon a digital phone chip.
Tested on 425e only so far, and playback only; configured in, but disabled,
on hppa kernels until there are positive test reports (I am not sure the
interrupt assignment on hppa is correct).
And now people no longer can joke about audio on hp300.
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.34 2011/08/18 20:02:57 miod Exp $
d125 1
a125 1
attach	le at dio
@


1.34
log
@So, it turns out that models 362 and 382 built-in frame buffer only shows up
in DIO-II space, as a fat device spanning four select codes (i.e. 16MB of
memory). This is way too much for an at-most 2 Mpixel 8bit frame buffer, and
it turns out that this is because the device provides both a regular DIO-II
frame buffer (spanning two select codes) and a regular STI frame buffer
(spanning the other two select codes).
This commit introduces a straightforward sti@@dio attachment to get a working
sti(4) and wsdisplay(4) in a ridiculously small number of lines; however
the console code needs some changes to avoid duplicating globals.

While there, add sti@@dio support for the bootblocks, and I couldn't help
myself but clean the most rotten parts of them, and try to have them reuse
various files in sys/arch/hp300/dev instead of rolling their outdated ones.

Tested on a real 382 with the low-resolution frame buffer:
sti0 at dio0 scode 132: rev 8.02;129, ID 0x27134CB440A00499
sti0: 382V, 2048x512 frame buffer, 640x480x8 display
sti0: 8x16 font type 1, 16 bpc, charset 0-255
wsdisplay0 at sti0 mux 1: console (std, vt100 emulation)

Boot blocks updates tested on DIO-II 425t (serial/glass console), SGC 425e
(serial/glass console) and 382 (serial/glass console). And will be tested
on SGC 425t soon as well.
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.33 2010/06/29 20:30:32 guenther Exp $
d127 4
@


1.33
log
@Remove COMPAT_HPUX.  No one wanted to support it and its fewmets were
blocking other cleanups
ok miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.32 2007/01/06 20:17:41 miod Exp $
d72 2
d97 3
@


1.32
log
@Preliminary support for the hp300 single ISA slot found in 4xx `t' models.
Everything works well but interrupts, where no two devices causes the frodo
chip to behave in the same way... (polling will work nicely)
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.31 2006/04/14 21:05:43 miod Exp $
a218 6

#
# HP-UX binary compatibility
#
include "compat/hpux/m68k/files.hpux"
file	arch/hp300/hp300/hpux_machdep.c		compat_hpux
@


1.31
log
@Minimal support for the HP98705 ``Tigershark'' TurboVRX frame buffer
(using an overlay plane only for now). Bootblocks, text console and X11
are supported.
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.30 2005/12/31 19:30:14 miod Exp $
d177 12
@


1.30
log
@This port does not use dev/cninit.c.
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.29 2005/09/21 21:08:31 miod Exp $
d73 3
a75 1
file	arch/hp300/dev/diofb.c			diofb
d87 1
a87 1
device	hyper: wsemuldisplaydev, diofb, rasops1
d100 4
@


1.29
log
@isbad() is only used on SMD disks on sparc; remove it on other platforms.
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.28 2005/04/22 11:59:11 miod Exp $
a200 2

file	dev/cninit.c
@


1.28
log
@Driver for the Apollo Domain keyboard and mouse, for the HP 9000/4xx series.

Claims the console keyboard if a keyboard is detected at boot time,
otherwise HIL is preferred (but due to wsmux both can be used simultaneously).
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.27 2005/03/08 20:00:23 tdeval Exp $
a189 1
file	arch/hp300/hp300/dkbad.c
@


1.27
log
@Cosmetics...
Mainly remove space between locators parens, replace spaces with tabs
where appropriate and consistently align dependencies.
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.26 2005/01/24 21:36:37 miod Exp $
d52 1
a52 1
device	dnkbd
d55 1
d61 1
@


1.26
log
@Switch hp300 wscons code to rasops, for DIO frame buffers.
Features:
- coloured kernel messages
- color support in console (use TERM=wsvt25)
- pretty Gallant wsfont, rather than the acceptable or ugly (depending upon
  the frame buffer) ROM font
- colormap ioctl support for Gatorbox and Topcat; DaVinci and Renaissance
  not done due to lack of hardware and/or documentation
- even more code factorization

tested on hyperion, and 4/6/8bpp catseye/topcat/kathmandu hardware, by
millert@@ and I
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.25 2005/01/14 22:39:23 miod Exp $
d15 1
a15 1
device	mainbus { }
d22 1
a22 1
device	intio { }
d24 1
a24 1
file	arch/hp300/dev/intio.c		intio
d32 1
a32 1
file	arch/hp300/dev/dio.c		dio
d38 1
a38 1
device	sgc {[ slot = -1]}
d40 1
a40 1
file	arch/hp300/dev/sgc.c		sgc	needs-flag
d49 1
a49 1
file	arch/hp300/dev/frodo.c		frodo
d54 1
a54 1
file	arch/hp300/dev/dnkbd.c		dnkbd	needs-flag
d59 1
a59 1
file	arch/hp300/dev/apci.c		apci	needs-flag
d71 1
a71 1
file	arch/hp300/dev/diofb.c		diofb
d76 1
a76 1
file	arch/hp300/dev/dvbox.c		dvbox	needs-flag
d81 1
a81 1
file	arch/hp300/dev/gbox.c		gbox	needs-flag
d85 1
a85 1
file	arch/hp300/dev/hyper.c		hyper	needs-flag
d90 1
a90 1
file	arch/hp300/dev/rbox.c		rbox	needs-flag
d95 1
a95 1
file	arch/hp300/dev/topcat.c		topcat	needs-flag
d104 1
a104 1
file	arch/hp300/dev/dca.c		dca	needs-flag
d109 1
a109 1
file	arch/hp300/dev/dcm.c		dcm	needs-flag
d113 1
a113 1
file	arch/hp300/dev/if_le.c		le
d116 1
a116 1
define	hpibdev { }
d120 1
a120 1
file	arch/hp300/dev/nhpib.c		nhpib
d124 1
a124 1
file	arch/hp300/dev/fhpib.c		fhpib
d129 1
a129 1
file	arch/hp300/dev/hpib.c		hpibbus
d134 1
a134 1
file	arch/hp300/dev/ct.c		ct	needs-flag
d138 1
a138 1
file	arch/hp300/dev/mt.c		mt	needs-flag
d142 1
a142 1
file	arch/hp300/dev/hd.c		hd	needs-flag
d147 1
a147 1
file	arch/hp300/dev/ppi.c		ppi	needs-flag
d157 2
a158 2
file	arch/hp300/dev/spc.c		spc	needs-flag
file	arch/hp300/dev/mb89352.c	spc
d168 1
a168 1
file	arch/hp300/dev/sti_sgc.c	sti_sgc
d176 1
a176 1
file	arch/hp300/dev/hil_intio.c	hil_intio
@


1.25
log
@Switch OpenBSD/hp300 to wscons, still using on-board ROM fonts for now.

Main features:
- MI hil drivers, allowing live plug/unplug of devices, and the keyboard
  does not need to be at id 1 anymore.
- SGC bus support on 4xx models. SGC frame buffers are supported too, but
  not as console, though you can use them as a regular glass terminal if
  you run a getty on ttyC0. Currently not compiled-in, awaiting for an sti(4)
  fix to be commited.
- HP-UX compatibility interfaces are removed. grfinfo and hilinfo are removed.

X11 support is currently broken by these changes; X.org X11R6 support will
be available very soon.

Tested on hyperion and 4 different flavours of catseye/topcat/kathmandu; other,
older frame buffers (davinci, gatorbox and renaissance) could not been tested
but should work; please report any regression.
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.24 2004/10/08 13:04:36 grange Exp $
d62 1
d64 1
d73 1
a73 1
device	dvbox: wsemuldisplaydev, diofb
d78 1
a78 1
device	gbox: wsemuldisplaydev, diofb
d83 2
a84 2
device	hyper: wsemuldisplaydev, diofb
attach	hyper at dio with hyper_dio
d87 1
a87 1
device	rbox: wsemuldisplaydev, diofb
d92 1
a92 1
device	topcat: wsemuldisplaydev, diofb
@


1.24
log
@Move dev/cons.c to MI conf/files.

ok miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.23 2004/09/16 09:14:03 mickey Exp $
d35 8
d51 5
d59 1
a59 1
file	arch/hp300/dev/apci.c		apci needs-flag
d61 3
a63 2
# Frame buffer attribute
define	grfdev { }
d65 1
d67 3
a69 2
device	dvbox: grfdev
file	arch/hp300/dev/grf_dv.c		dvbox needs-flag
d71 4
a74 2
device	gbox: grfdev
file	arch/hp300/dev/grf_gb.c		gbox needs-flag
d76 4
a79 2
device	hyper: grfdev
file	arch/hp300/dev/grf_hy.c		hyper needs-flag
d81 3
a83 17
device	rbox: grfdev
file	arch/hp300/dev/grf_rb.c		rbox needs-flag

device	topcat: grfdev
file	arch/hp300/dev/grf_tc.c		topcat needs-flag

# `grf' framebuffer abstraction
device	grf { }
attach	grf at grfdev
file	arch/hp300/dev/grf.c		grf needs-flag
file	arch/hp300/dev/grf_subr.c	grf

# Internal Terminal Emulator
device	ite
attach	ite at grf
file	arch/hp300/dev/ite.c		ite needs-flag
file	arch/hp300/dev/ite_subr.c	ite
d85 1
a85 3
# Internal i/o framebuffer attachments
attach	dvbox at intio with dvbox_intio
attach	gbox at intio with gbox_intio
d87 4
d92 2
d96 1
a96 1
# Devices on the DIO bus
a98 7
# DIO framebuffer attachments
attach	dvbox at dio with dvbox_dio
attach	gbox at dio with gbox_dio
attach	hyper at dio with hyper_dio
attach	rbox at dio with rbox_dio
attach	topcat at dio with topcat_dio

d102 1
a102 1
file	arch/hp300/dev/dca.c		dca needs-flag
d107 1
a107 1
file	arch/hp300/dev/dcm.c		dcm needs-flag
d132 1
a132 1
file	arch/hp300/dev/ct.c		ct needs-flag
d136 1
a136 1
file	arch/hp300/dev/mt.c		mt needs-flag
d140 1
a140 1
file	arch/hp300/dev/hd.c		hd needs-flag
d145 1
a145 1
file	arch/hp300/dev/ppi.c		ppi needs-flag
d161 14
a174 4
# Human (Hilarious) Interface Loop
# XXX should be a real device
file	arch/hp300/dev/hil.c
file	arch/hp300/dev/hil_keymaps.c
d181 1
d185 1
a196 1
file	arch/hp300/hp300/disksubr.c
@


1.23
log
@cleanup deafult locators (blah ?); please check that your most hated architecture is still fluffy (;
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.22 2004/08/03 21:46:54 miod Exp $
a184 1
file	dev/cons.c
@


1.22
log
@Replace the old 4.4BSD scsi code used on hp300 with a ``real'' driver
interfaced with the MI scsi code.

Adapted from NetBSD with some changes (especially to get tape and old
cd-rom drives to not cause the driver to spin during probe).

Tested by millert@@ and I, ok millert@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.21 2004/07/10 03:40:32 deraadt Exp $
d30 1
a30 1
device	dio { scode = -1 }
d39 1
a39 1
device	frodo { offset = -1 }
d122 1
a122 1
device	hpibbus { slave = -1, punit = -1 }
@


1.21
log
@files.hpux is now in a {m68k,hppa} subdir
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.20 2003/03/16 12:38:31 miod Exp $
a10 3
# NOTE!  The order of these lines is significant!  Don't change them
# unless you absolutely know what you're doing!

a129 1
major	{ct = 0}
a133 1
major	{mt = 1}
d147 8
a154 9
# Old HP SCSI layer
device	oscsi { target = -1, lun = -1 }
attach	oscsi at dio
file	arch/hp300/dev/scsi.c		oscsi

# Old HP SCSI devices
device	sd: disk
attach	sd at oscsi
file	arch/hp300/dev/sd.c		sd needs-flag
d156 1
a156 8

device	st: tape
attach	st at oscsi
file	arch/hp300/dev/st.c		st needs-flag

device	ac
attach	ac at oscsi
file	arch/hp300/dev/ac.c		ac needs-flag
a186 2

major	{vnd = 6}
@


1.20
log
@Old unused stuff left under the carpet.
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.19 2002/01/10 21:10:43 miod Exp $
d206 1
a206 1
include "compat/hpux/files.hpux"
@


1.19
log
@Switch m68k arches that do not exist in 68060 models back to pmap_motorola.
Others will be switched after more 060 tests.

This time: hp300
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.18 2001/12/20 19:02:27 miod Exp $
a199 2

file	kludge_for_in_proto.c			hy needs-flag
@


1.18
log
@Temporarily revert the pmap_motorola changes, as they may account for
some problems as well.
Requested by deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.17 2001/11/30 20:58:14 miod Exp $
d190 1
a190 1
file	arch/hp300/hp300/pmap.c
@


1.17
log
@Switch to pmap_motorola.
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.16 2001/11/21 00:29:58 miod Exp $
d190 1
a190 1
file	arch/m68k/m68k/pmap_motorola.c
@


1.17.2.1
log
@Merge in -current, builds on i386, otherwise untested
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.19 2002/01/10 21:10:43 miod Exp $
@


1.17.2.2
log
@sync
@
text
@d1 1
a1 1
#	$OpenBSD$
d200 2
@


1.16
log
@Provide COMPAT_SUNOS files via the common m68k configuration files.
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.15 2001/08/26 00:15:33 miod Exp $
d190 1
a190 1
file	arch/hp300/hp300/pmap.c
@


1.15
log
@Nuke annoying defopt, by popular demand. Plus you get two typos fixed
for free.
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.14 2001/05/11 07:55:33 deraadt Exp $
a209 6

#
# SunOS binary compatibility
#
include "compat/sunos/files.sunos"
file	arch/m68k/m68k/sunos_machdep.c		compat_sunos
@


1.14
log
@more rd merge (headcolds suck)
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.13 2001/05/11 06:41:39 deraadt Exp $
a9 18

# SPU configuration options.
defopt	HP320
defopt	HP330
defopt	HP340
defopt	HP345
defopt	HP350
defopt	HP360
defopt	HP370
defopt	HP375
defopt	HP380
defopt	HP385
defopt	HP400
defopt	HP425
defopt	HP433

# Misc. options.
defopt	USELEDS		# make the lights twinkle
@


1.13
log
@unify
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.12 1999/11/08 15:36:08 mickey Exp $
a167 1
file	dev/rd.c			ramdisk_hooks
@


1.12
log
@move MI definition of rd into it's MI place also fixing
attributes, allowing kernels to exist w/ rd as the only disk device.
tested on a few archs; niels@@ & millert@@ ok
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.11 1997/11/06 19:42:31 millert Exp $
d168 1
a168 1
file	arch/hp300/dev/rd_root.c	ramdisk_hooks
@


1.12.2.1
log
@Merge in -current from two days ago in the SMP branch.
As usual with merges, they do not indicate progress, so do not hold
your breath for working SMP, and do not mail me and ask about the
state of it.  It has not changed.  There is work ongoing, but very, very
slowly.  The commit is done in parts as to not lock up the tree in too
big chunks at a time.
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.12 1999/11/08 15:36:08 mickey Exp $
d168 1
@


1.12.2.2
log
@Sync the SMP branch to something just after 3.0
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.12.2.1 2001/07/04 10:15:23 niklas Exp $
d10 18
@


1.12.2.3
log
@Merge in -current
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.12.2.2 2001/10/31 02:52:46 nate Exp $
d190 1
a190 1
file	arch/m68k/m68k/pmap_motorola.c
d210 6
@


1.12.2.4
log
@Sync the SMP branch with 3.3
@
text
@d1 1
a1 1
#	$OpenBSD$
d200 2
@


1.11
log
@Idnetify/support hp385 (33Mhz 68040)
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.10 1997/07/06 08:01:43 downsj Exp $
a167 2
pseudo-device rd
file	dev/ramdisk.c			rd needs-flag
@


1.10
log
@Sync with changes from NetBSD, up to 970705.

This includes all of the new frodo drivers, from Michael Smith, hacked up
by Jason R. Thorpe; other changes, mostly configuration and/or m68k
abstraction related, from Thorpe.  A few others of my own.

This compiles and runs, have not yet tested Domain kbd or apci ports.
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.9 1997/04/16 11:55:55 downsj Exp $
d21 1
@


1.9
log
@Merge portions of NetBSD up to 970415.

This includes:
	* All of the prototyping and KNF changes.
	* The new interrupt system.
	* Portions of the Domain Keyboard support from Mike Smith.

This does not include:
	* m68k changes, namely generic dumps.

Various sundry changes and fixes by me.
@
text
@d1 2
a2 2
#	$OpenBSD: files.hp300,v 1.8 1997/03/26 08:32:38 downsj Exp $
#	$NetBSD: files.hp300,v 1.25 1997/04/14 02:28:53 thorpej Exp $
d11 17
d31 37
a98 15
#
# Mainbus
#

device	mainbus { }
attach	mainbus at root

#
# Internal i/o space
#

device	intio { }
attach	intio at mainbus
file	arch/hp300/dev/intio.c		intio

d106 1
a106 1
# DIO bus
a108 4
device	dio { scode = -1 }
attach	dio at mainbus
file	arch/hp300/dev/dio.c		dio

d205 1
a205 2
file	arch/hp300/hp300/kgdb_glue.c		kgdb compile-with "${NORMAL_C} -fno-defer-pop"
file	arch/hp300/hp300/kgdb_stub.c		kgdb
d208 1
@


1.8
log
@Merge changes from NetBSD, up to 3/19/97; undoes some local changes.
Changed to match new arch/m68k code.
genassym.cf is currently just a place holder.
@
text
@d1 2
a2 2
#	$OpenBSD: files.hp300,v 1.7 1997/02/24 01:16:07 downsj Exp $
#	$NetBSD: files.hp300,v 1.23 1997/03/17 19:46:43 gwr Exp $
d173 1
a173 1
file	arch/hp300/hp300/isr.c
@


1.7
log
@Add support for COMPAT_SUNOS and enable it.

hp300 now runs sun3 SunOS executables!
@
text
@d1 2
a2 2
#	$OpenBSD: files.hp300,v 1.6 1997/02/16 10:42:18 downsj Exp $
#	$NetBSD: files.hp300,v 1.22 1997/01/30 22:11:19 scottr Exp $
a181 2

file	arch/m68k/m68k/copy.s
@


1.6
log
@Add initial ram disk support.
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.5 1997/02/10 06:43:29 downsj Exp $
d197 6
@


1.5
log
@Kill COMPAT_NOLABEL.  It is not appropiate in the modern world.
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.4 1997/02/10 01:33:55 downsj Exp $
d130 6
@


1.4
log
@Support 16 partitions.
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.3 1997/02/03 08:11:52 downsj Exp $
a124 1
file	arch/hp300/dev/hd_compat.c	hd		# XXX
a139 1
file	arch/hp300/dev/sd_compat.c	sd		# XXX
@


1.3
log
@rd -> hd
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.2 1997/02/03 04:47:08 downsj Exp $
d7 1
a7 1
maxpartitions 8
@


1.2
log
@Merge new config(8) support from NetBSD, by Jason Thorpe.
Also add siginfo glue, BOOT_CONFIG, and various other changes.
@
text
@d1 1
a1 1
#	$OpenBSD: files.hp300,v 1.1 1997/01/12 15:12:15 downsj Exp $
d122 5
a126 5
device	rd: disk
attach	rd at hpibbus
file	arch/hp300/dev/rd.c		rd needs-flag
file	arch/hp300/dev/rd_compat.c	rd		# XXX
major	{rd = 2}
@


1.1
log
@Mostly sync to NetBSD-current of 011196.  Compiles, links, boots to single
user.

KNOWN NOT WORKING:
	* DIO-II devices
	* Dynamic executables

NOT EVEN TRIED:
	* New config support
@
text
@d1 2
a2 2
#	$OpenBSD$
#	$NetBSD: files.hp300,v 1.20 1996/12/17 08:40:57 thorpej Exp $
d115 1
d120 1
d126 1
d135 1
a135 1
file	arch/hp300/dev/scsi.c		scsi
d142 1
d185 2
@
