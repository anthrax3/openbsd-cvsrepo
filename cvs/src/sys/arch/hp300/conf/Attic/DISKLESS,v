head	1.29;
access;
symbols
	OPENBSD_3_6:1.23.0.2
	OPENBSD_3_6_BASE:1.23
	SMP_SYNC_A:1.22
	SMP_SYNC_B:1.22
	OPENBSD_3_5:1.22.0.12
	OPENBSD_3_5_BASE:1.22
	OPENBSD_3_4:1.22.0.10
	OPENBSD_3_4_BASE:1.22
	UBC_SYNC_A:1.22
	OPENBSD_3_3:1.22.0.8
	OPENBSD_3_3_BASE:1.22
	OPENBSD_3_2:1.22.0.6
	OPENBSD_3_2_BASE:1.22
	OPENBSD_3_1:1.22.0.4
	OPENBSD_3_1_BASE:1.22
	UBC_SYNC_B:1.22
	UBC:1.22.0.2
	UBC_BASE:1.22
	OPENBSD_3_0:1.20.0.2
	OPENBSD_3_0_BASE:1.20
	OPENBSD_2_9:1.17.0.10
	OPENBSD_2_9_BASE:1.17
	OPENBSD_2_8:1.17.0.8
	OPENBSD_2_8_BASE:1.17
	OPENBSD_2_7:1.17.0.6
	OPENBSD_2_7_BASE:1.17
	SMP:1.17.0.4
	SMP_BASE:1.17
	kame_19991208:1.17
	OPENBSD_2_6:1.17.0.2
	OPENBSD_2_6_BASE:1.17
	OPENBSD_2_5:1.15.0.8
	OPENBSD_2_5_BASE:1.15
	OPENBSD_2_4:1.15.0.6
	OPENBSD_2_4_BASE:1.15
	OPENBSD_2_3:1.15.0.4
	OPENBSD_2_3_BASE:1.15
	OPENBSD_2_2:1.15.0.2
	OPENBSD_2_2_BASE:1.15
	OPENBSD_2_1:1.14.0.2
	OPENBSD_2_1_BASE:1.14
	OPENBSD_2_0:1.7.0.2
	OPENBSD_2_0_BASE:1.7
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.29
date	2005.03.08.20.03.04;	author miod;	state dead;
branches;
next	1.28;

1.28
date	2005.02.27.22.21.47;	author miod;	state Exp;
branches;
next	1.27;

1.27
date	2005.01.23.16.53.36;	author miod;	state Exp;
branches;
next	1.26;

1.26
date	2005.01.18.19.13.23;	author miod;	state Exp;
branches;
next	1.25;

1.25
date	2005.01.14.22.39.23;	author miod;	state Exp;
branches;
next	1.24;

1.24
date	2004.09.16.09.14.03;	author mickey;	state Exp;
branches;
next	1.23;

1.23
date	2004.08.04.20.14.39;	author miod;	state Exp;
branches;
next	1.22;

1.22
date	2001.12.06.01.03.42;	author miod;	state Exp;
branches;
next	1.21;

1.21
date	2001.11.25.23.23.45;	author miod;	state Exp;
branches;
next	1.20;

1.20
date	2001.08.19.17.06.42;	author miod;	state Exp;
branches;
next	1.19;

1.19
date	2001.06.27.05.46.11;	author art;	state Exp;
branches;
next	1.18;

1.18
date	2001.05.04.22.48.58;	author aaron;	state Exp;
branches;
next	1.17;

1.17
date	99.08.15.07.42.45;	author downsj;	state Exp;
branches
	1.17.4.1;
next	1.16;

1.16
date	99.06.13.06.27.12;	author downsj;	state Exp;
branches;
next	1.15;

1.15
date	97.07.06.08.01.41;	author downsj;	state Exp;
branches;
next	1.14;

1.14
date	97.02.24.01.16.06;	author downsj;	state Exp;
branches;
next	1.13;

1.13
date	97.02.16.14.37.06;	author downsj;	state Exp;
branches;
next	1.12;

1.12
date	97.02.16.10.42.14;	author downsj;	state Exp;
branches;
next	1.11;

1.11
date	97.02.10.06.43.26;	author downsj;	state Exp;
branches;
next	1.10;

1.10
date	97.02.05.17.41.49;	author downsj;	state Exp;
branches;
next	1.9;

1.9
date	97.02.03.04.47.05;	author downsj;	state Exp;
branches;
next	1.8;

1.8
date	97.01.12.15.12.13;	author downsj;	state Exp;
branches;
next	1.7;

1.7
date	96.09.20.06.45.03;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	96.08.31.02.09.11;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	96.06.25.20.55.38;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	96.06.24.17.02.23;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	96.01.05.13.33.35;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	95.12.14.05.28.20;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.50.16;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.50.16;	author deraadt;	state Exp;
branches;
next	;

1.17.4.1
date	2001.07.04.10.15.20;	author niklas;	state Exp;
branches;
next	1.17.4.2;

1.17.4.2
date	2001.10.31.02.52.46;	author nate;	state Exp;
branches;
next	1.17.4.3;

1.17.4.3
date	2001.12.05.00.39.09;	author niklas;	state Exp;
branches;
next	1.17.4.4;

1.17.4.4
date	2002.03.06.00.57.21;	author niklas;	state Exp;
branches;
next	;


desc
@@


1.29
log
@Kill hp300 DISKLESS kernel, not worth using against GENERIC for diskless
systems since it still has all the filesystems for vnd usage and thus
does not save much memory...

ok deraadt@@
@
text
@#	$OpenBSD: DISKLESS,v 1.28 2005/02/27 22:21:47 miod Exp $
#	$NetBSD: GENERIC,v 1.23 1997/01/31 06:12:57 thorpej Exp $
#
# Generic kernel - one size fits all.
#

machine hp300 m68k

# Include all GENERIC options
include "../../../conf/GENERIC"

# Support for various CPU types
option		HP320
option		HP330		# includes 318, 319
option		HP340
option		HP345
option		HP350
option		HP360
option		HP370
option		HP375
option		HP380
option		HP385
option		HP400
option		HP425
option		HP433

# Need to set locally
maxusers	16

# Options for HP hardware
option		USELEDS		# make the lights twinkle
#option		CONSCODE="9"	# force console at this select code for DIO
				# or DIO-II devices, or 256 + slot number
				# for SGC devices

option		WSDISPLAY_COMPAT_RAWKBD		# provide raw scancodes

option		COMPAT_HPUX	# HP-UX binary compatibility
option		COMPAT_M68K4K	# compat. with NetBSD/m68k4k binaries
option		COMPAT_SUNOS	# SunOS/sun3 binaries

# Verbose descriptions of unconfigured DIO devices
# (Warning: this compiles in a large string table)
option		DIOVERBOSE	# recognize "unknown" DIO devices

config		bsd swap generic

mainbus0	at root		# root "bus"

intio0		at mainbus0	# internal i/o space
dio0		at mainbus0	# DIO/DIO-II bus
sgc0		at mainbus0	# SGC bus on some 4xx models

# Human Interface Loop devices
hil0		at intio?	# HIL controller
hilkbd*		at hil?		# keyboards
wskbd*		at hilkbd? mux 1
hilms*		at hil?		# mice, buttons and tablets
wsmouse*	at hilms? mux 0
hilid*		at hil?		# ID module

# Frodo utility chip found on 4xx's
frodo0		at intio?

# 8250-like serial ports found on Frodo ASIC
#dnkbd0		at frodo? offset 0x0	# Domain keyboard flavor
apci*		at frodo?	# tty flavor

# Davinci framebuffer
dvbox*		at intio?
dvbox*		at dio?
wsdisplay*	at dvbox?

# Gatorbox framebuffer
gbox*		at intio?
gbox*		at dio?
wsdisplay*	at gbox?

# Hyperion framebuffer
hyper*		at dio?
wsdisplay*	at hyper?

# Renaissance framebuffer
rbox*		at intio?
rbox*		at dio?
wsdisplay*	at rbox?

# Topcat/catseye framebuffers
topcat*		at intio?
topcat*		at dio?
wsdisplay*	at topcat?

# SGC framebuffers
sti*		at sgc?
wsdisplay*	at sti?

dca0		at dio? scode 9 flags 1	# DCA serial interfaces
dca*		at dio?

dcm*		at dio? flags 0xe	# DCM 4- or 8-port serial interfaces

le*		at dio?			# LANCE ethernet interfaces
@


1.28
log
@Document how to set CONSCODE to point to an SGC device if one wants to force
the console.
@
text
@d1 1
a1 1
#	$OpenBSD: DISKLESS,v 1.27 2005/01/23 16:53:36 miod Exp $
@


1.27
log
@Enable sgc and sti.
@
text
@d1 1
a1 1
#	$OpenBSD: DISKLESS,v 1.26 2005/01/18 19:13:23 miod Exp $
d32 3
a34 1
#option		CONSCODE="9"	# force console at this select code
@


1.26
log
@Enable WSDISPLAY_COMPAT_RAWKBD
@
text
@d1 1
a1 1
#	$OpenBSD: DISKLESS,v 1.25 2005/01/14 22:39:23 miod Exp $
d50 1
a50 1
#sgc0		at mainbus0	# SGC bus on some 4xx models
d92 2
a93 2
#sti*		at sgc?
#wsdisplay*	at sti?
@


1.25
log
@Switch OpenBSD/hp300 to wscons, still using on-board ROM fonts for now.

Main features:
- MI hil drivers, allowing live plug/unplug of devices, and the keyboard
  does not need to be at id 1 anymore.
- SGC bus support on 4xx models. SGC frame buffers are supported too, but
  not as console, though you can use them as a regular glass terminal if
  you run a getty on ttyC0. Currently not compiled-in, awaiting for an sti(4)
  fix to be commited.
- HP-UX compatibility interfaces are removed. grfinfo and hilinfo are removed.

X11 support is currently broken by these changes; X.org X11R6 support will
be available very soon.

Tested on hyperion and 4 different flavours of catseye/topcat/kathmandu; other,
older frame buffers (davinci, gatorbox and renaissance) could not been tested
but should work; please report any regression.
@
text
@d1 1
a1 1
#	$OpenBSD: DISKLESS,v 1.24 2004/09/16 09:14:03 mickey Exp $
d33 2
@


1.24
log
@cleanup deafult locators (blah ?); please check that your most hated architecture is still fluffy (;
@
text
@d1 1
a1 1
#	$OpenBSD: DISKLESS,v 1.23 2004/08/04 20:14:39 miod Exp $
d13 3
a15 3
option	 	HP320
option	 	HP330		# includes 318, 319
option	 	HP340
d17 5
a21 5
option	 	HP350
option	 	HP360
option	 	HP370
option	 	HP375
option	 	HP380
d31 1
a31 1
option	 	USELEDS		# make the lights twinkle
a32 2
option	 	UK_KEYBOARD	# include United Kingdom HIL keymap
option	 	SE_KEYBOARD	# include Swedish HIL keymap
d34 2
a35 7
#
# HP-UX binary compatibility.
# NOTE: THIS IS STILL VERY EXPERIMENTAL.  YOUR MILEAGE MAY VARY.
#
option	 	COMPAT_HPUX	# HP-UX binary compatibility

option	 	COMPAT_M68K4K	# compat. with NetBSD/m68k4k binaries
d40 1
a40 1
option	 	DIOVERBOSE	# recognize "unknown" DIO devices
d48 9
d68 1
d73 1
d77 1
d82 1
d87 1
d89 3
a91 9
# Framebuffer abstraction
grf*		at dvbox?
grf*		at gbox?
grf*		at hyper?
grf*		at rbox?
grf*		at topcat?

# Internal Terminal Emulator
ite*		at grf?
d93 1
a93 1
dca0		at dio? scode 9	flags 1	  # DCA serial interfaces
d96 1
a96 1
dcm*		at dio?	flags 0xe # DCM 4- or 8-port serial interfaces
d98 1
a98 1
le*		at dio?		# LANCE ethernet interfaces
@


1.23
log
@Crank maxusers to 32 on m68k GENERIC kernels, and to 16 on m68k installation
media.

The latter is to work around a pmap issue on 680[46]0, for which either
a kluge or a real fix look very ugly.
@
text
@d1 1
a1 1
#	$OpenBSD: DISKLESS,v 1.22 2001/12/06 01:03:42 miod Exp $
d61 1
a61 1
apci*		at frodo? offset ?	# tty flavor
d65 1
a65 1
dvbox*		at dio? scode ?
d69 1
a69 1
gbox*		at dio? scode ?
d72 1
a72 1
hyper*		at dio? scode ?
d76 1
a76 1
rbox*		at dio? scode ?
d80 1
a80 1
topcat*		at dio? scode ?
d93 1
a93 1
dca*		at dio? scode ?
d95 1
a95 1
dcm*		at dio? scode ?	flags 0xe # DCM 4- or 8-port serial interfaces
d97 1
a97 1
le*		at dio? scode ?		# LANCE ethernet interfaces
@


1.22
log
@MAPPEDCOPY no more.
@
text
@d1 1
a1 1
#	$OpenBSD: DISKLESS,v 1.21 2001/11/25 23:23:45 miod Exp $
d28 1
a28 1
maxusers	8
@


1.21
log
@Extend the magic formulae to choose option FPSP only if 68040 processor
support needed.
@
text
@d1 1
a1 1
#	$OpenBSD: DISKLESS,v 1.20 2001/08/19 17:06:42 miod Exp $
a34 4

# This option enables a different copyin/copyout that uses page
# mapping for large copies.
#option	 	MAPPEDCOPY	# different copyin/copyout for large copies
@


1.20
log
@PANICBUTTON no more.
@
text
@d1 1
a1 1
#	$OpenBSD: DISKLESS,v 1.19 2001/06/27 05:46:11 art Exp $
a30 1
option	 	FPSP		# floating point interface for 68040
@


1.19
log
@UVM is no longer an option.
@
text
@d1 1
a1 1
#	$OpenBSD: DISKLESS,v 1.18 2001/05/04 22:48:58 aaron Exp $
a32 1
#option		PANICBUTTON	# two fast <reset>s on HIL dump kernel
@


1.18
log
@Substantial update from NetBSD, most notably gives us UVM support; millert@@ ok
@
text
@d1 1
a1 1
#	$OpenBSD: DISKLESS,v 1.17 1999/08/15 07:42:45 downsj Exp $
a25 2

option		UVM		# use the UVM virtual memory system
@


1.17
log
@Add missing HP385 defines...
@
text
@d1 1
a1 1
#	$OpenBSD: DISKLESS,v 1.16 1999/06/13 06:27:12 downsj Exp $
d26 2
@


1.17.4.1
log
@Merge in -current from two days ago in the SMP branch.
As usual with merges, they do not indicate progress, so do not hold
your breath for working SMP, and do not mail me and ask about the
state of it.  It has not changed.  There is work ongoing, but very, very
slowly.  The commit is done in parts as to not lock up the tree in too
big chunks at a time.
@
text
@d1 1
a1 1
#	$OpenBSD: DISKLESS,v 1.17 1999/08/15 07:42:45 downsj Exp $
@


1.17.4.2
log
@Sync the SMP branch to something just after 3.0
@
text
@d1 1
a1 1
#	$OpenBSD: DISKLESS,v 1.17.4.1 2001/07/04 10:15:20 niklas Exp $
d33 1
@


1.17.4.3
log
@Merge in -current
@
text
@d1 1
a1 1
#	$OpenBSD: DISKLESS,v 1.17.4.2 2001/10/31 02:52:46 nate Exp $
d31 1
@


1.17.4.4
log
@Merge in trunk
@
text
@d1 1
a1 1
#	$OpenBSD$
d35 4
@


1.16
log
@Don't need rd here...
@
text
@d1 1
a1 1
#	$OpenBSD: DISKLESS,v 1.15 1997/07/06 08:01:41 downsj Exp $
d22 1
@


1.15
log
@Sync with changes from NetBSD, up to 970705.

This includes all of the new frodo drivers, from Michael Smith, hacked up
by Jason R. Thorpe; other changes, mostly configuration and/or m68k
abstraction related, from Thorpe.  A few others of my own.

This compiles and runs, have not yet tested Domain kbd or apci ports.
@
text
@d1 1
a1 1
#	$OpenBSD: DISKLESS,v 1.14 1997/02/24 01:16:06 downsj Exp $
a102 2

pseudo-device	rd 2
@


1.14
log
@Add support for COMPAT_SUNOS and enable it.

hp300 now runs sun3 SunOS executables!
@
text
@d1 1
a1 1
#	$OpenBSD: DISKLESS,v 1.13 1997/02/16 14:37:06 downsj Exp $
d16 1
d20 5
a24 2
option	 	HP375		# includes 345, 400t, 400s
option	 	HP380		# includes 425t, 425s, 433s
d60 7
@


1.13
log
@More rd changes that were missed...  Still not working.
@
text
@d1 1
a1 1
#	$OpenBSD: DISKLESS,v 1.12 1997/02/16 10:42:14 downsj Exp $
d44 1
@


1.12
log
@Add initial ram disk support.
@
text
@d1 1
a1 1
#	$OpenBSD: DISKLESS,v 1.11 1997/02/10 06:43:26 downsj Exp $
d91 2
@


1.11
log
@Kill COMPAT_NOLABEL.  It is not appropiate in the modern world.
@
text
@d1 1
a1 1
#	$OpenBSD: DISKLESS,v 1.10 1997/02/05 17:41:49 downsj Exp $
d9 1
a9 1
# Include all GENERIC option	
@


1.10
log
@Make std.hp300 useable for other config files, just don't use it in GENERIC
ones.
@
text
@d1 1
a1 1
#	$OpenBSD: DISKLESS,v 1.9 1997/02/03 04:47:05 downsj Exp $
a27 1
option	 	COMPAT_NOLABEL	# defaults for unlabeled disks
@


1.9
log
@Merge new config(8) support from NetBSD, by Jason Thorpe.
Also add siginfo glue, BOOT_CONFIG, and various other changes.
@
text
@d1 1
a1 1
#	$OpenBSD$
d7 1
a7 2
# Include attributes common to all hp300s
include "arch/hp300/conf/std.hp300"
@


1.8
log
@Mostly sync to NetBSD-current of 011196.  Compiles, links, boots to single
user.

KNOWN NOT WORKING:
	* DIO-II devices
	* Dynamic executables

NOT EVEN TRIED:
	* New config support
@
text
@d2 1
a2 1
#	$NetBSD: DISKLESS,v 1.11 1996/12/11 09:10:38 thorpej Exp $
d4 1
a4 1
# Diskless HP 9000/300-series workstation.
a5 1
machine		"hp300"
d7 15
a21 9
cpu             "HP320"
cpu             "HP330"         # includes 318, 319
cpu             "HP340"
cpu             "HP350"
cpu		"HP360"
cpu		"HP370"
cpu		"HP375"		# includes 345, 400t, 400s
cpu		"HP380"		# includes 425t, 425s, 433s
ident		DISKLESS
a23 1
timezone	8 dst
a25 28
# Standard system options
options		SWAPPAGER		# swap pager (anonymous and swap space)
options		DEVPAGER		# device pager (mapped devices)
options         "COMPAT_43"             # compatibility with 4.3BSD interfaces
options         "COMPAT_44"             # compatibility with 4.4BSD binaries
options         "COMPAT_09"             # compatibility with NetBSD 0.9
options		"COMPAT_10"		# compatibility with NetBSD 1.0
options		COMPAT_M68K4K		# NetBSD compatibility
options         SYSVSHM                 # System V-style shared memory
options         SYSVSEM                 # System V-style semaphores
options         SYSVMSG                 # System V-style message queues
options         KTRACE                  # system call tracing support
options		"NKMEMCLUSTERS=1024"	# # 4K pages in kernel malloc pool

# Filesystem options
options		FIFO		# POSIX fifo support (in all filesystems)
options		NFSCLIENT	# Network filesystem client
options		UNION		# Union filesystem (req. for FDESC)
options		KERNFS		# kernel data-structure filesystem
options		FDESC		# user file descriptor filesystem
options		PROCFS		# /proc filesystem
options		MFS		# Memory-based filesystem

# Networking options
options		INET		# Internet protocols
#options		"TCP_COMPAT_42"	# compatibility with 4.2BSD TCP/IP
options		NMBCLUSTERS="512"	# Just a little extra

d27 11
a37 5
options		FPSP		# floating point interface for 68040
options		USELEDS		# make the lights twinkle
#options	PANICBUTTON	# two fast <reset>s on HIL dump kernel
options		UK_KEYBOARD	# include United Kingdom HIL keymap
options		SE_KEYBOARD	# include Swedish HIL keymap
d43 22
a64 1
options	COMPAT_HPUX		# HP-UX binary compatibility
d66 2
a67 1
#options 	"COMPAT_M68K4K"	# compat. with NetBSD/m68k4k binaries
d69 3
a71 2
# Debugging options
options		DDB		# Kernel Dynamic Debugger
d73 3
a75 1
config		bsd swap nfs
d77 6
a82 2
device		dca0	at scode9 flags 1
device		dca1	at scode? flags 1
d84 2
a85 2
device		dcm0	at scode? flags 0xe
device		dcm1	at scode? flags 0xe
d87 2
a88 2
device		le0	at scode?
device		le1	at scode?
d90 1
a90 2
device		grf0	at scode?
device		grf1	at scode?
d92 1
a92 6
pseudo-device	pty		64	# pseudo ptys
pseudo-device	bpfilter	16	# Berkeley packet filter
pseudo-device	vnd		4	# vnode pseudo-disks
pseudo-device	ite			# terminal emulation on grf
pseudo-device	loop			# loopback network interface
pseudo-device	ether			# basic ethernet support
@


1.7
log
@do not fool people into thinking VNODEPAGER is an option; netbsd pr#2757, erik@@aarhus1.uni-c.dk
@
text
@d1 2
a2 1
#	$NetBSD: DISKLESS,v 1.5 1995/12/29 17:12:50 thorpej Exp $
d54 2
d62 2
@


1.6
log
@disable TCP_COMPAT_42
@
text
@a22 1
options		VNODEPAGER		# vnode pager (mapped files)
@


1.5
log
@COMPAT_M68K4K
@
text
@d47 1
a47 1
options		"TCP_COMPAT_42"	# compatibility with 4.2BSD TCP/IP
@


1.4
log
@kernel is /bsd
@
text
@d29 1
@


1.3
log
@from netbsd:
Enable COMPAT_HPUX by default.  It's still not 100% yet, but it doesn't
seem to really hurt anything, either.  Makes it easier for folks using
binary snapshots only to try it out.
GENERIC: now that the PT map allocation is fixed, increase the default
maxusers to 32.
@
text
@d63 1
a63 1
config		netbsd swap nfs
@


1.2
log
@update from netbsd (verbatim)
@
text
@d1 1
a1 1
#	$NetBSD: DISKLESS,v 1.4 1995/11/28 08:47:39 thorpej Exp $
d58 1
a58 1
#options	COMPAT_HPUX	# HP-UX binary compatibility
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
#	$NetBSD: DISKLESS,v 1.3 1995/10/10 02:12:37 thorpej Exp $
d54 4
a57 1
# XXX DOESN'T WORK YET!
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
