head	1.14;
access;
symbols
	OPENBSD_5_5:1.13.0.4
	OPENBSD_5_5_BASE:1.13
	OPENBSD_5_4:1.12.0.2
	OPENBSD_5_4_BASE:1.12
	OPENBSD_5_3:1.11.0.10
	OPENBSD_5_3_BASE:1.11
	OPENBSD_5_2:1.11.0.8
	OPENBSD_5_2_BASE:1.11
	OPENBSD_5_1_BASE:1.11
	OPENBSD_5_1:1.11.0.6
	OPENBSD_5_0:1.11.0.4
	OPENBSD_5_0_BASE:1.11
	OPENBSD_4_9:1.11.0.2
	OPENBSD_4_9_BASE:1.11
	OPENBSD_4_8:1.9.0.2
	OPENBSD_4_8_BASE:1.9
	OPENBSD_4_7:1.8.0.18
	OPENBSD_4_7_BASE:1.8
	OPENBSD_4_6:1.8.0.20
	OPENBSD_4_6_BASE:1.8
	OPENBSD_4_5:1.8.0.16
	OPENBSD_4_5_BASE:1.8
	OPENBSD_4_4:1.8.0.14
	OPENBSD_4_4_BASE:1.8
	OPENBSD_4_3:1.8.0.12
	OPENBSD_4_3_BASE:1.8
	OPENBSD_4_2:1.8.0.10
	OPENBSD_4_2_BASE:1.8
	OPENBSD_4_1:1.8.0.8
	OPENBSD_4_1_BASE:1.8
	OPENBSD_4_0:1.8.0.6
	OPENBSD_4_0_BASE:1.8
	OPENBSD_3_9:1.8.0.4
	OPENBSD_3_9_BASE:1.8
	OPENBSD_3_8:1.8.0.2
	OPENBSD_3_8_BASE:1.8
	OPENBSD_3_7:1.6.0.12
	OPENBSD_3_7_BASE:1.6
	OPENBSD_3_6:1.6.0.10
	OPENBSD_3_6_BASE:1.6
	SMP_SYNC_A:1.6
	SMP_SYNC_B:1.6
	OPENBSD_3_5:1.6.0.8
	OPENBSD_3_5_BASE:1.6
	OPENBSD_3_4:1.6.0.6
	OPENBSD_3_4_BASE:1.6
	UBC_SYNC_A:1.6
	OPENBSD_3_3:1.6.0.4
	OPENBSD_3_3_BASE:1.6
	OPENBSD_3_2:1.6.0.2
	OPENBSD_3_2_BASE:1.6
	OPENBSD_3_1:1.5.0.24
	OPENBSD_3_1_BASE:1.5
	UBC_SYNC_B:1.6
	UBC:1.5.0.22
	UBC_BASE:1.5
	OPENBSD_3_0:1.5.0.20
	OPENBSD_3_0_BASE:1.5
	OPENBSD_2_9:1.5.0.18
	OPENBSD_2_9_BASE:1.5
	OPENBSD_2_8:1.5.0.16
	OPENBSD_2_8_BASE:1.5
	OPENBSD_2_7:1.5.0.14
	OPENBSD_2_7_BASE:1.5
	SMP:1.5.0.12
	SMP_BASE:1.5
	kame_19991208:1.5
	OPENBSD_2_6:1.5.0.10
	OPENBSD_2_6_BASE:1.5
	OPENBSD_2_5:1.5.0.8
	OPENBSD_2_5_BASE:1.5
	OPENBSD_2_4:1.5.0.6
	OPENBSD_2_4_BASE:1.5
	OPENBSD_2_3:1.5.0.4
	OPENBSD_2_3_BASE:1.5
	OPENBSD_2_2:1.5.0.2
	OPENBSD_2_2_BASE:1.5
	OPENBSD_2_1:1.3.0.2
	OPENBSD_2_1_BASE:1.3
	OPENBSD_2_0:1.1.1.1.0.2
	OPENBSD_2_0_BASE:1.1.1.1
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.14
date	2014.03.18.22.36.31;	author miod;	state dead;
branches;
next	1.13;

1.13
date	2013.12.08.14.46.39;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2013.03.26.19.43.01;	author jasper;	state Exp;
branches;
next	1.11;

1.11
date	2010.11.12.17.11.44;	author deraadt;	state Exp;
branches;
next	1.10;

1.10
date	2010.11.03.20.08.02;	author deraadt;	state Exp;
branches;
next	1.9;

1.9
date	2010.05.31.22.21.43;	author deraadt;	state Exp;
branches;
next	1.8;

1.8
date	2005.05.06.11.16.47;	author pedro;	state Exp;
branches;
next	1.7;

1.7
date	2005.05.06.03.13.53;	author marco;	state Exp;
branches;
next	1.6;

1.6
date	2002.07.15.21.29.16;	author mickey;	state Exp;
branches;
next	1.5;

1.5
date	97.10.23.13.03.56;	author deraadt;	state Exp;
branches
	1.5.12.1
	1.5.22.1;
next	1.4;

1.4
date	97.07.14.08.20.13;	author downsj;	state Exp;
branches;
next	1.3;

1.3
date	97.01.17.08.40.58;	author downsj;	state Exp;
branches;
next	1.2;

1.2
date	97.01.12.15.12.06;	author downsj;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.50.15;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.50.15;	author deraadt;	state Exp;
branches;
next	;

1.5.12.1
date	2003.03.27.23.19.19;	author niklas;	state Exp;
branches;
next	;

1.5.22.1
date	2002.10.29.00.28.01;	author art;	state Exp;
branches;
next	;


desc
@@


1.14
log
@Retire hp300, mvme68k and mvme88k ports. These ports have no users, keeping
this hardware alive is becoming increasingly difficult, and I should heed the
message sent by the three disks which have died on me over the last few days.

Noone sane will mourn these ports anyway. So long, and thanks for the fish.
@
text
@#	$OpenBSD: Makefile,v 1.13 2013/12/08 14:46:39 espie Exp $

S=	${.CURDIR}/../..
KFILE=	GENERIC
.if exists(conf/GENERIC.MP)
KFILE=	GENERIC.MP
.endif
TDIRS=	${_arch} include
TAGS=	${.CURDIR}/tags

NOPROG=
NOMAN=
NOOBJ=
SUBDIR=	stand

# config the fattest kernel we can find into a temporary dir
# to create a Makefile.  Then use make to pull some variables
# out and push them into the sub-shell to expand the paths,
# and finally run ctags.
tags::
	TDIR=`mktemp -d /tmp/_tagXXXXXXXXXX` || exit 1; \
	eval "S=${S}" && \
	config -s ${S} -b $${TDIR} ${.CURDIR}/conf/${KFILE} && \
	eval "_arch=\"`make -V _arch -f $${TDIR}/Makefile`\"" && \
	eval "_mach=\"`make -V _mach -f $${TDIR}/Makefile`\"" && \
	eval "_machdir=\$S/arch/$${_mach}" && \
	eval "_archdir=\$S/arch/$${_arch}" && \
	eval "HFILES=\"`find $S \( -path $S/'arch' -o -path $S/stand -o -path $S/lib/libsa -o -path $S'/lib/libkern/arch' \) -prune -o -name '*.h'; find $${_machdir} $${_archdir} $S/lib/libkern/arch/$${_mach} \( -name boot -o -name stand \) -prune -o -name '*.h'`\"" && \
	eval "SFILES=\"`make -V SFILES -f $${TDIR}/Makefile`\"" && \
	eval "CFILES=\"`make -V CFILES -f $${TDIR}/Makefile`\"" && \
	eval "AFILES=\"`make -V AFILES -f $${TDIR}/Makefile`\"" && \
	ctags -wd -f ${TAGS} $${CFILES} $${HFILES} && \
	egrep "^[_A-Z]*ENTRY[_A-Z]*\(.*\)" $${SFILES} $${AFILES} | \
	    sed "s;\\([^:]*\\):\\([^(]*\\)(\\([^, )]*\\)\\(.*\\);\\3	\\1	/^\\2(\\3\\4$$/;" \
	    >> ${TAGS} && \
	sort -o ${TAGS} ${TAGS} && \
	rm -rf $${TDIR}

links:
	-for i in conf ${TDIRS}; do \
	    (cd $$i && rm -f tags; ln -s tags tags); done

obj:	_SUBDIRUSE

.include <bsd.prog.mk>
@


1.13
log
@reflect reality, mark as NOOBJ
"sure" deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.12 2013/03/26 19:43:01 jasper Exp $
@


1.12
log
@sync TDIRS with reality

"looks good" deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.11 2010/11/12 17:11:44 deraadt Exp $
d13 1
@


1.11
log
@Push all potential (as in, all system MI not utilized by the bootblocks)
.h files into the ctags run as well to bring #define's and structs and
such into scope.  Problem reported by thib
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.10 2010/11/03 20:08:02 deraadt Exp $
d8 1
a8 1
TDIRS=	${_arch} include pci isa eisa
@


1.10
log
@no need to specify the -t flag to ctags
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.9 2010/05/31 22:21:43 deraadt Exp $
d27 1
d31 1
a31 1
	ctags -wd -f ${TAGS} $${CFILES} && \
@


1.9
log
@Completely rewrite the tags file creation process.  use config(8) against
a fat kernel (GERERIC or GENERIC.MP) into a temporary dir, then extract some
variables using make -V, and after some more singing and dancing use this
full and (more) correct list of files with ctags.  Don't read this code.
ok guenther
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.17 2007/10/22 01:26:31 deraadt Exp $
d30 1
a30 1
	ctags -wdt -f ${TAGS} $${CFILES} && \
@


1.8
log
@generate vim-compatible tag files, from netbsd
@
text
@d1 1
a1 3
#	$OpenBSD: Makefile,v 1.7 2005/05/06 03:13:53 marco Exp $
#	$NetBSD: Makefile,v 1.5 1995/08/04 07:40:31 thorpej Exp $
#	@@(#)Makefile	7.3 (Berkeley) 6/9/91
d3 33
a35 26
# Makefile for hp300 tags file and boot blocks

S=${.CURDIR}/../..
.include "$S/kern/Make.tags.inc"

NOPROG=	noprog
NOMAN=	noman

SUBDIR= stand ../m68k

THP300=	$S/arch/hp300/tags
SHP300=	$S/arch/m68k/m68k/*.c $S/arch/m68k/include/*.h \
	$S/arch/hp300/hp300/*.[ch] $S/arch/hp300/include/*.h \
	$S/arch/hp300/dev/*.[ch]
AHP300=	$S/arch/m68k/m68k/*.[Ss] $S/arch/hp300/hp300/*.[Ss] \
	$S/lib/libkern/arch/m68k/*.[sS]

# Directories in which to place hp300 tags links
DHP300=	conf dev hp300 include

tags:
	-ctags -wdtf ${THP300} ${COMM} ${SHP300}
	egrep "^ENTRY(.*)|^ALTENTRY(.*)" ${AHP300} | \
	    sed "s;\([^:]*\):\([^(]*\)(\([^, )]*\)\(.*\);\3	\1	/^\2(\3\4$$/;" \
		>> ${THP300}
	sort -o ${THP300} ${THP300}
d38 2
a39 2
	-for i in ${DHP300}; do \
	    (cd $$i && rm -f tags; ln -s ${THP300} tags); done
d41 1
a41 1
obj: _SUBDIRUSE
@


1.7
log
@Fix links target.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.6 2002/07/15 21:29:16 mickey Exp $
d28 1
a28 1
	    sed "s;\([^:]*\):\([^(]*\)(\([^, )]*\)\(.*\);\3 \1 /^\2(\3\4$$/;" \
@


1.6
log
@repair tags building (due to obj dirs in /sys)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.5 1997/10/23 13:03:56 deraadt Exp $
d23 1
a23 1
DHP300=	dev hp300 include
d34 1
a34 1
	    cd $$i && rm -f tags; ln -s ${THP300} tags; done
@


1.5
log
@SUBDIR includes ../m68k
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 1997/07/14 08:20:13 downsj Exp $
d7 3
d15 6
a20 4
THP300=	../hp300/tags
SHP300=	../hp300/hp300/*.[ch] ../hp300/include/*.h \
	../hp300/dev/*.[ch]
AHP300=	../hp300/hp300/*.s
d26 1
a26 1
	-ctags -dtf ${THP300} ${COMM} ${SHP300}
d34 1
a34 1
	    cd $$i && rm -f tags; ln -s ../tags tags; done
@


1.5.12.1
log
@Sync the SMP branch with 3.3
@
text
@d1 1
a1 1
#	$OpenBSD$
a6 3
S=${.CURDIR}/../..
.include "$S/kern/Make.tags.inc"

d12 4
a15 6
THP300=	$S/arch/hp300/tags
SHP300=	$S/arch/m68k/m68k/*.c $S/arch/m68k/include/*.h \
	$S/arch/hp300/hp300/*.[ch] $S/arch/hp300/include/*.h \
	$S/arch/hp300/dev/*.[ch]
AHP300=	$S/arch/m68k/m68k/*.[Ss] $S/arch/hp300/hp300/*.[Ss] \
	$S/lib/libkern/arch/m68k/*.[sS]
d21 1
a21 1
	-ctags -wdtf ${THP300} ${COMM} ${SHP300}
d29 1
a29 1
	    cd $$i && rm -f tags; ln -s ${THP300} tags; done
@


1.5.22.1
log
@sync to -current
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.5 1997/10/23 13:03:56 deraadt Exp $
a6 3
S=${.CURDIR}/../..
.include "$S/kern/Make.tags.inc"

d12 4
a15 6
THP300=	$S/arch/hp300/tags
SHP300=	$S/arch/m68k/m68k/*.c $S/arch/m68k/include/*.h \
	$S/arch/hp300/hp300/*.[ch] $S/arch/hp300/include/*.h \
	$S/arch/hp300/dev/*.[ch]
AHP300=	$S/arch/m68k/m68k/*.[Ss] $S/arch/hp300/hp300/*.[Ss] \
	$S/lib/libkern/arch/m68k/*.[sS]
d21 1
a21 1
	-ctags -wdtf ${THP300} ${COMM} ${SHP300}
d29 1
a29 1
	    cd $$i && rm -f tags; ln -s ${THP300} tags; done
@


1.4
log
@Update to reflect reality.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.3 1997/01/17 08:40:58 downsj Exp $
d10 1
a10 1
SUBDIR= stand
@


1.3
log
@more subdirs
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.2 1997/01/12 15:12:06 downsj Exp $
d10 1
a10 1
SUBDIR= stand stand/libkern stand/libsa
@


1.2
log
@Mostly sync to NetBSD-current of 011196.  Compiles, links, boots to single
user.

KNOWN NOT WORKING:
	* DIO-II devices
	* Dynamic executables

NOT EVEN TRIED:
	* New config support
@
text
@d1 1
a1 1
#	$OpenBSD$
d10 1
a10 1
SUBDIR= stand
@


1.1
log
@Initial revision
@
text
@d1 1
a2 1

@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
