head	1.16;
access;
symbols
	SMP_SYNC_A:1.16
	SMP_SYNC_B:1.16
	UBC_SYNC_A:1.16
	UBC_SYNC_B:1.16
	OPENBSD_2_9:1.13.0.4
	OPENBSD_2_9_BASE:1.13
	OPENBSD_2_8:1.13.0.2
	OPENBSD_2_8_BASE:1.13
	OPENBSD_2_7:1.12.0.2
	OPENBSD_2_7_BASE:1.12
	SMP:1.11.0.2
	SMP_BASE:1.11
	kame_19991208:1.11
	OPENBSD_2_6:1.10.0.4
	OPENBSD_2_6_BASE:1.10
	OPENBSD_2_5:1.10.0.2
	OPENBSD_2_5_BASE:1.10
	OPENBSD_2_4:1.9.0.2
	OPENBSD_2_4_BASE:1.9
	OPENBSD_2_3:1.7.0.4
	OPENBSD_2_3_BASE:1.7
	OPENBSD_2_2:1.7.0.2
	OPENBSD_2_2_BASE:1.7
	OPENBSD_2_1:1.6.0.2
	OPENBSD_2_1_BASE:1.6
	OPENBSD_2_0:1.4.0.2
	OPENBSD_2_0_BASE:1.4
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.16
date	2001.06.24.23.47.28;	author deraadt;	state dead;
branches;
next	1.15;

1.15
date	2001.05.11.07.13.15;	author deraadt;	state Exp;
branches;
next	1.14;

1.14
date	2001.05.11.06.41.46;	author deraadt;	state Exp;
branches;
next	1.13;

1.13
date	2000.08.19.18.43.30;	author maja;	state Exp;
branches;
next	1.12;

1.12
date	2000.05.01.22.25.46;	author maja;	state Exp;
branches;
next	1.11;

1.11
date	99.11.08.15.36.10;	author mickey;	state Exp;
branches
	1.11.2.1;
next	1.10;

1.10
date	98.11.09.05.40.00;	author millert;	state Exp;
branches;
next	1.9;

1.9
date	98.06.04.03.49.46;	author jason;	state Exp;
branches;
next	1.8;

1.8
date	98.05.10.04.01.09;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	97.06.10.14.18.37;	author graichen;	state Exp;
branches;
next	1.6;

1.6
date	97.01.19.22.49.53;	author graichen;	state Exp;
branches;
next	1.5;

1.5
date	96.12.22.15.17.16;	author graichen;	state Exp;
branches;
next	1.4;

1.4
date	96.09.29.11.36.19;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	96.09.15.21.12.13;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	96.01.05.13.41.28;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.51.25;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.51.25;	author deraadt;	state Exp;
branches;
next	;

1.11.2.1
date	2001.04.18.16.12.33;	author niklas;	state Exp;
branches;
next	1.11.2.2;

1.11.2.2
date	2001.07.04.10.20.40;	author niklas;	state dead;
branches;
next	;


desc
@@


1.16
log
@bye bye, with prejudice
@
text
@#	$OpenBSD: files.pmax,v 1.15 2001/05/11 07:13:15 deraadt Exp $
#	$NetBSD: files.pmax,v 1.36 1996/10/13 05:28:48 jonathan Exp $
# DECstation-specific configuration info

# maxpartitions must be first item in files.${ARCH}.
maxpartitions 16

maxusers 2 8 64

#
# Bus-independent devices
#
device mainbus { }			# no locators
attach mainbus at root

device cpu				# not optional
attach cpu at mainbus
file arch/pmax/pmax/cpu.c		cpu

#
# CPU-dependent files
#
#file	arch/pmax/pmax/kn01.c			kn01	# DS3100, pmax
#file	arch/pmax/pmax/kn02.c			kn02	# DS5000/200, 3max
#file	arch/pmax/pmax/kn03.c			kn03	# DS5000/240, 3maxplus
#file	arch/pmax/pmax/kn02ba.c			kn02ba	# DS5000/1xx, 3min(kmin)
#file	arch/pmax/pmax/kn02ca.c			kn02ca	# DS5000/1xx, maxine
#file	arch/pmax/pmax/kn210.c				# DS5400, mipsfair
#file	arch/pmax/pmax/kn220.c				# DS5500, mipsfair2
file	arch/pmax/pmax/kn230.c			kn230	# DS5100, mipsmate
#
# Auto-configuration driver for the turbochannel bus itself.
#
#define	tcbus { }

device tc {[slot = -1], [offset = -1]} ##{ } 
attach tc at mainbus
file	arch/pmax/tc/tc_subr.c		tc		needs-flag
file	dev/tc/tc.c			tc		needs-flag


#
# The TurboChannel IOCTL ASIC. Present on IOASIC machines,
# which is all turbochannel machines ever built except the 3MAX (5000/200).
#
device ioasic { offset = -1 } 		# not really optional
attach ioasic at tc
file	arch/pmax/tc/asic.c		ioasic | dz_ds # TTTTT dz_ds is ugly


# Real-time clock (not optional)
device	clock
attach	clock at ioasic, tc, mainbus
file	arch/pmax/pmax/clock.c		clock


#
# Machine-independent SCSI driver.
#

include "../../../scsi/files.scsi"
#major { st = 10 }
#major { cd = 3 }
#major { sd = 21 }
major { tz = 10 }
major { rz = 21 }
major { rd = 25 }

#
# Old 4.4bsd pmax-specific scsi driver (deprecated).
#
define	oldscsi {}
device oldscsibus	{target = -1, drive = -1}
attach oldscsibus at oldscsi

# asc:  system-slot or turbochannel-option SCSI interface
#device asc: oldscsi,scsi
device asc: oldscsi
attach asc at ioasic with asc_ioasic
file	dev/tc/asc_ioasic.c		asc_ioasic
attach asc at tc with asc_tc
file	dev/tc/asc_tc.c			asc_tc

file	dev/tc/asc.c			asc needs-flag

# sii:  kn01 SCSI interface 
#device sii: scsi,oldscsi
device sii: oldscsi
file	arch/pmax/dev/sii.c		sii needs-flag
attach sii at mainbus with sii_ds
file	arch/pmax/dev/sii_ds.c		sii_ds


device	tz: tape
attach	tz at oldscsibus
file	arch/pmax/dev/tz.c		tz needs-count

device	rz: disk
attach	rz at oldscsibus
file	arch/pmax/dev/rz.c		rz needs-count

#
# Optional device-drivers
#

# Back panel LEDS on KN01 boxes
device	led
attach	led at mainbus
file	arch/pmax/dev/led.c		led needs-count

# DC7085 (DZ-like four-port serial device) on mainbus on non-IOASIC machines.
# For the 3MAX (aka kn02 aka 5k/200) pretend that it's on an  ASIC.
device dz
file	arch/pmax/dev/dz.c		dz
attach dz at ioasic with dz_ioasic
file	arch/pmax/dev/dz_ioasic.c	dz_ioasic | dz_ds needs-flag # TTTTT ugly
attach dz at mainbus with dz_ds
file	arch/pmax/dev/dz_ds.c		dz_ds	needs-flag


# The "desktop bus" on the MAXINE (5k/25). What is it, anyway? ADB?
device dtop
attach dtop at ioasic
file	arch/pmax/dev/dtop.c		dtop needs-flag

# LANCE ethernet driver.
#  XXX Should use new machine-independent one instead.
# device defined in sys/conf/files
attach le at ioasic with le_ioasic
attach le at tc with le_tc
attach le at mainbus with le_pmax
#file	arch/pmax/tc/if_le.c		(le_pmax|le_tc|le_ioasic) needs-flag


file	dev/tc/if_le_dec.c		(le_ioasic | le_tc | le_pmax)
file	dev/tc/if_le_ioasic.c		le_ioasic	needs-flag #for le_iomem
file	dev/tc/if_le_tc.c		le_tc
file	dev/tc/if_le_ibus.c		le_pmax		needs-flag #for kn01_intr

# 3100 (pmax) onboard framebuffer
device pm
file	arch/pmax/dev/pm.c		pm needs-flag
file	arch/pmax/dev/bt478.c		pm
attach pm at mainbus with pm_ds
file	arch/pmax/dev/pm_ds.c		pm_ds

########################################################################
# Turbochannel options.
########################################################################

device cfb
attach cfb at tc
file	arch/pmax/dev/cfb.c		cfb needs-flag

device sfb
attach sfb at tc
file	arch/pmax/dev/sfb.c		sfb needs-flag

device mfb
attach mfb at tc
file	arch/pmax/dev/mfb.c		mfb needs-flag

#  Zilog 8350/Intel 82350(?) SCC UART.
device scc
attach scc at ioasic
file	arch/pmax/tc/scc.c		scc needs-flag

# MAXINE onboard framebuffer
device	xcfb
attach	xcfb at tc
file	arch/pmax/dev/xcfb.c 		xcfb needs-flag
file	arch/pmax/dev/ims332.c		xcfb

# DECWRL 45Mbit T3 interface
device	tt
attach	tt at tc
file	arch/pmax/dev/if_tt.c		tt needs-count

## bogus pmax-specific SCSI code. Leave in until new-style config done.
file	arch/pmax/dev/scsi.c

file	arch/pmax/pmax/autoconf.c
file	arch/pmax/pmax/conf.c
#file	arch/pmax/pmax/kadb.c			optional kadb
#file	arch/pmax/pmax/machdep.c		standard config-dependent
file	arch/pmax/pmax/machdep.c
file	arch/pmax/pmax/pmap.c
file	arch/pmax/pmax/sys_machdep.c
file	arch/pmax/pmax/pmax_trap.c
file	arch/pmax/pmax/vm_machdep.c
file	arch/pmax/pmax/disksubr.c
file	arch/pmax/stand/libsa/callvec.c
file	arch/pmax/pmax/mainbus.c

# Console autoconfiguration code: selects between a framebuffers
file	arch/pmax/pmax/cpu_cons.c
file	dev/cons.c

# pmax configuration glue for rconsole. Requires fb pseudo-device.

include "../../../dev/rcons/files.rcons"

pseudo-device	rasterconsole
file	arch/pmax/dev/rcons.c			rasterconsole	needs-flag
file	arch/pmax/dev/font.c			rasterconsole	# rcons fontdef

file	netinet/in_cksum.c
file	netns/ns_cksum.c			ns

## Support code for LK-201 keyboards, mice, and qvss ring buffers
file	arch/pmax/dev/lk201.c		pm | cfb | sfb | mfb | xcfb
file	arch/pmax/dev/qvss_compat.c	fb


# VDAC/RAMDAC support for framebuffers. Other  devices supported by
# NetBSD  may use the same chips, too.
file	arch/pmax/dev/bt459.c			cfb | sfb

#
# Pseudo-device driver for framebuffers.  All user-level requests,
# including open(), go through the fb driver, which presents a consistent
# interface to all framebuffers.  Configure as many units as you
# have framebuffers.  Provides qvss-style interface compatible with
# X11R5 servers.
#
pseudo-device	fb
file	arch/pmax/dev/fb.c		fb needs-count

# Glue for old-style config
file	arch/pmax/pmax/conf-glue.c

# Ultrix Binary Compatibility (COMPAT_ULTRIX)
include "../../../compat/ultrix/files.ultrix"

# Files from NetBSD's mips directory TTTTT
file	arch/pmax/pmax/cpu_exec.c
file	arch/pmax/pmax/mem.c
file	arch/pmax/pmax/trap.c
file	arch/pmax/pmax/mips_machdep.c
file	arch/pmax/pmax/process_machdep.c

# Configs
@


1.15
log
@unify rd(4) even more
@
text
@d1 1
a1 1
#	$OpenBSD: files.pmax,v 1.14 2001/05/11 06:41:46 deraadt Exp $
@


1.14
log
@unify
@
text
@d1 1
a1 1
#	$OpenBSD: files.pmax,v 1.13 2000/08/19 18:43:30 maja Exp $
a66 3

# RAM Disk for install floppy
file	dev/rd.c			ramdisk_hooks
@


1.13
log
@Late in the release of OpenBSD/pmax 2.7 a conflict between the pmax
dc driver and the generic if_dc driver was found. The fix was to
change the pmax drivers name to dz instead. But this was only done
in a miminal way.

This commit will switch over and use the new dz driver.

-moj
@
text
@d1 1
a1 1
#	$OpenBSD$
d69 1
a69 1
file	arch/pmax/pmax/rd_root.c	ramdisk_hooks
@


1.12
log
@changed dc to dz to avoid conflict with if_dc. -moj
@
text
@d1 1
d117 1
a117 1
file	arch/pmax/dev/dc.c		dz
d119 1
a119 1
file	arch/pmax/dev/dc_ioasic.c	dz_ioasic | dz_ds needs-flag # TTTTT ugly
d121 1
a121 1
file	arch/pmax/dev/dc_ds.c		dz_ds	needs-flag
@


1.11
log
@move MI definition of rd into it's MI place also fixing
attributes, allowing kernels to exist w/ rd as the only disk device.
tested on a few archs; niels@@ & millert@@ ok
@
text
@d47 1
a47 1
file	arch/pmax/tc/asic.c		ioasic | dc_ds # TTTTT dc_ds is ugly
d115 6
a120 6
device dc
file	arch/pmax/dev/dc.c		dc
attach dc at ioasic with dc_ioasic
file	arch/pmax/dev/dc_ioasic.c	dc_ioasic | dc_ds needs-flag # TTTTT ugly
attach dc at mainbus with dc_ds
file	arch/pmax/dev/dc_ds.c		dc_ds	needs-flag
@


1.11.2.1
log
@Update the SMP branch to -current, this breaks the SMP branch though.
But it will be fixed soonish.  Note, nothing new has happened, this is just
a merge of the trunk into this branch.
@
text
@a0 1
#	$OpenBSD: files.pmax,v 1.13 2000/08/19 18:43:30 maja Exp $
d47 1
a47 1
file	arch/pmax/tc/asic.c		ioasic | dz_ds # TTTTT dz_ds is ugly
d115 6
a120 6
device dz
file	arch/pmax/dev/dz.c		dz
attach dz at ioasic with dz_ioasic
file	arch/pmax/dev/dz_ioasic.c	dz_ioasic | dz_ds needs-flag # TTTTT ugly
attach dz at mainbus with dz_ds
file	arch/pmax/dev/dz_ds.c		dz_ds	needs-flag
@


1.11.2.2
log
@Merge in -current from two days ago in the SMP branch.
As usual with merges, they do not indicate progress, so do not hold
your breath for working SMP, and do not mail me and ask about the
state of it.  It has not changed.  There is work ongoing, but very, very
slowly.  The commit is done in parts as to not lock up the tree in too
big chunks at a time.
@
text
@d1 1
a1 1
#	$OpenBSD: files.pmax,v 1.11.2.1 2001/04/18 16:12:33 niklas Exp $
@


1.10
log
@Add ramdisk support for pmax; untested but compiles
@
text
@a67 2
pseudo-device rd
file	dev/ramdisk.c			rd needs-flag
@


1.9
log
@LED blinker for the back panel leds on the 2100/3100.
@
text
@d67 6
@


1.8
log
@1) It's a 'lun' not a 'slave'
2) 16 partitions
@
text
@d104 5
@


1.7
log
@update the pmax specific stuff to NetBSD-current as of about 970608 - some
cosmetic things will follow together with an update to an exact NETBSD_CU-
RRENT_xxxxxx level
@
text
@d5 1
a5 1
maxpartitions 8
@


1.6
log
@small hack to get the PLUTO kernel compiled
@
text
@d45 1
a45 1
device ioasic { } 		#{ }	# not really optional
d107 1
a107 1
file	arch/pmax/dev/dc.c		dc	needs-flag
d109 1
a109 1
file	arch/pmax/dev/dc_ioasic.c	dc_ioasic | dc_ds # TTTTT ugly
d111 1
a111 1
file	arch/pmax/dev/dc_ds.c		dc_ds
d138 1
a138 1
file	arch/pmax/dev/pm_ds.c		dc_ds
d159 1
a159 1
file	arch/pmax/tc/scc.c		scc needs-count
@


1.5
log
@update the pmax stuff to NetBSD 961107 - this version i got somehow
compiled on my decstation 2100 (PLUTO) - but it will not fully work
out of the box - but i want to bring it into the tree because i get
my own pmax on 961228 - so that i have a good startpoint then :-)

all the OpenBSD changes to the pmax tree will follow in the next commit
@
text
@d47 1
a47 1
file	arch/pmax/tc/asic.c		ioasic
d109 1
a109 1
file	arch/pmax/dev/dc_ioasic.c	dc_ioasic
@


1.4
log
@merge mips back into pmax; by graichen
@
text
@d1 1
a1 1
#	$NetBSD: files.pmax,v 1.31.4.1 1996/05/30 03:54:56 mhitch Exp $
d75 7
a81 2
device asc: oldscsi,scsi
attach asc at ioasic, tc
d85 2
a86 2
device sii: oldscsi,scsi
attach sii at mainbus
d88 2
d107 6
a112 2
attach dc at mainbus, ioasic
file	arch/pmax/dev/dc.c		dc needs-count
a134 1
attach pm at mainbus
d137 2
a181 1
file	arch/pmax/pmax/trap.c
d228 1
a228 1
# Configs
d231 2
d234 2
@


1.3
log
@sync to netbsd; for graichen
@
text
@d218 3
@


1.2
log
@update from netbsd
@
text
@d1 1
a1 1
#	$NetBSD: files.pmax,v 1.25 1996/01/03 20:33:25 jonathan Exp $
d12 2
a13 1
device mainbus at root { }		# no locators
d15 2
a16 1
device cpu at mainbus			# not optional
d19 11
a29 1

d33 6
a38 2
device tc at mainbus  { } #{ slot = -1, offset = -1 }
file	arch/pmax/tc/tc.c		tc		needs-flag
d45 2
a46 1
device ioasic at tc { } 	#{ }	# not really optional
d51 2
a52 1
device	clock at ioasic,tc,mainbus 
d71 2
a72 1
device oldscsibus at oldscsi	{target = -1, drive = -1}
d75 2
a76 1
device asc at ioasic,tc: oldscsi,scsi
d80 2
a81 1
device sii at mainbus: oldscsi,scsi
d85 2
a86 1
device	tz at oldscsibus: tape
d89 2
a90 1
device	rz at oldscsibus: disk
d99 3
a101 2
device dc at mainbus,ioasic
file	arch/pmax/dev/dc.c			dc needs-count
d104 3
a106 2
device dtop at ioasic
file	arch/pmax/dev/dtop.c			dtop needs-count
d110 11
a120 2
device le at ioasic,tc,mainbus: ifnet, ether
file	arch/pmax/tc/if_le.c		le needs-flag
d123 4
a126 3
device pm at mainbus
file	arch/pmax/dev/pm.c		pm needs-count
file	arch/pmax/dev/bt478.c			pm
d132 11
a142 8
device cfb at tc
file	arch/pmax/dev/cfb.c		cfb needs-count

device sfb at tc
file	arch/pmax/dev/sfb.c		sfb needs-count

device mfb at tc
file	arch/pmax/dev/mfb.c		mfb needs-count
d145 3
a147 2
device scc at ioasic
file	arch/pmax/tc/scc.c		scc	needs-count
d150 3
a152 2
device	xcfb at tc
file	arch/pmax/dev/xcfb.c 		xcfb needs-count
d156 2
a157 1
device	tt at tc
a167 2
file	arch/pmax/pmax/cpu_exec.c
file	arch/pmax/pmax/mem.c
a168 1
file	arch/pmax/pmax/process_machdep.c
d171 1
a174 1
file	arch/pmax/pmax/elf.c
d193 1
a193 1
file	arch/pmax/dev/lk201.c		pm or cfb or sfb or mfb or xcfb
d199 1
a199 1
file	arch/pmax/dev/bt459.c			cfb or sfb
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
#	$NetBSD: files.pmax,v 1.24 1995/10/05 01:53:05 jonathan Exp $
d57 1
a57 1
file	arch/pmax/dev/asc.c		asc needs-flag
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
