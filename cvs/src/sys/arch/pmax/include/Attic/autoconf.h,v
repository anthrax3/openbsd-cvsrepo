head	1.7;
access;
symbols
	SMP_SYNC_A:1.7
	SMP_SYNC_B:1.7
	UBC_SYNC_A:1.7
	UBC_SYNC_B:1.7
	OPENBSD_2_9:1.5.0.18
	OPENBSD_2_9_BASE:1.5
	OPENBSD_2_8:1.5.0.16
	OPENBSD_2_8_BASE:1.5
	OPENBSD_2_7:1.5.0.14
	OPENBSD_2_7_BASE:1.5
	SMP:1.5.0.12
	SMP_BASE:1.5
	kame_19991208:1.5
	OPENBSD_2_6:1.5.0.10
	OPENBSD_2_6_BASE:1.5
	OPENBSD_2_5:1.5.0.8
	OPENBSD_2_5_BASE:1.5
	OPENBSD_2_4:1.5.0.6
	OPENBSD_2_4_BASE:1.5
	OPENBSD_2_3:1.5.0.4
	OPENBSD_2_3_BASE:1.5
	OPENBSD_2_2:1.5.0.2
	OPENBSD_2_2_BASE:1.5
	OPENBSD_2_1:1.4.0.2
	OPENBSD_2_1_BASE:1.4
	OPENBSD_2_0:1.3.0.2
	OPENBSD_2_0_BASE:1.3
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@ * @;


1.7
date	2001.06.24.23.48.07;	author deraadt;	state dead;
branches;
next	1.6;

1.6
date	2001.05.05.22.34.06;	author art;	state Exp;
branches;
next	1.5;

1.5
date	97.06.10.14.18.56;	author graichen;	state Exp;
branches
	1.5.12.1;
next	1.4;

1.4
date	96.12.22.15.18.09;	author graichen;	state Exp;
branches;
next	1.3;

1.3
date	96.09.15.21.12.40;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	96.01.16.01.22.24;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.51.29;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.51.29;	author deraadt;	state Exp;
branches;
next	;

1.5.12.1
date	2001.07.04.10.21.10;	author niklas;	state dead;
branches;
next	;


desc
@@


1.7
log
@bye bye, with prejudice
@
text
@/*	$NetBSD: autoconf.h,v 1.8 1997/05/25 06:10:47 jonathan Exp $	*/

/*
 * Copyright (c) 1994, 1995 Carnegie-Mellon University.
 * All rights reserved.
 *
 * Author: Chris G. Demetriou
 * 
 * Permission to use, copy, modify and distribute this software and
 * its documentation is hereby granted, provided that both the copyright
 * notice and this permission notice appear in all copies of the
 * software, derivative works or modified versions, and any portions
 * thereof, and that both notices appear in supporting documentation.
 * 
 * CARNEGIE MELLON ALLOWS FREE USE OF THIS SOFTWARE IN ITS "AS IS" 
 * CONDITION.  CARNEGIE MELLON DISCLAIMS ANY LIABILITY OF ANY KIND 
 * FOR ANY DAMAGES WHATSOEVER RESULTING FROM THE USE OF THIS SOFTWARE.
 * 
 * Carnegie Mellon requests users of this software to return to
 *
 *  Software Distribution Coordinator  or  Software.Distribution@@CS.CMU.EDU
 *  School of Computer Science
 *  Carnegie Mellon University
 *  Pittsburgh PA 15213-3890
 *
 * any improvements or extensions that they make and grant Carnegie the
 * rights to redistribute these changes.
 */

/*
 * Machine-dependent structures of autoconfiguration
 */

#include <machine/tc_machdep.h>

struct confargs;


/* Handle device interrupt for  given unit of a driver */

typedef void* intr_arg_t;		/* pointer to some softc */
typedef int (*intr_handler_t) __P((intr_arg_t));
/*
 * XXX Establish interrupt on an arbitrary decstation/decsystem bus.
 */
extern void
generic_intr_establish __P(( void * parent, void * cookie,
			 int level,
			 intr_handler_t handler, intr_arg_t arg));


#define KN02_ASIC_NAME "KN02    "	/* ROM name in 3max system slot */
	
#define	INTR_ESTABLISH(parent, cookie, level, handler, val)			\
    generic_intr_establish((parent), (cookie), (level), (handler), (val))

#define	BUS_INTR_ESTABLISH(ca,  handler, val)			\
    generic_intr_establish( ((struct device*)(val))->dv_parent, \
    			   (void*)(ca)->ca_slotpri, 0, (handler), (val))


struct confargs {
	char	*ca_name;		/* Device name. */
	int	ca_slot;		/* Device slot (table entry). */
	int	ca_offset;		/* Offset into slot. */
	tc_addr_t ca_addr;		/* Device address. */
	int	ca_slotpri;		/* Device interrupt "priority" */
};

extern caddr_t baseboard_cvtaddr __P((struct confargs *)); /*XXX*/

#ifndef pmax
void	set_clockintr __P((void (*)(struct clockframe *)));
#endif
void	set_iointr __P((void (*)(void *, int)));
int	badaddr			__P((void *, u_int));
void	makebootdev __P((char *cp));
@


1.6
log
@Rename configure() to cpu_configure().
Move it from cpu_startup() to main().
@
text
@@


1.5
log
@update the pmax specific stuff to NetBSD-current as of about 970608 - some
cosmetic things will follow together with an update to an exact NETBSD_CU-
RRENT_xxxxxx level
@
text
@a76 1
void	configure __P((void));
@


1.5.12.1
log
@Merge in -current from two days ago in the SMP branch.
As usual with merges, they do not indicate progress, so do not hold
your breath for working SMP, and do not mail me and ask about the
state of it.  It has not changed.  There is work ongoing, but very, very
slowly.  The commit is done in parts as to not lock up the tree in too
big chunks at a time.
@
text
@@


1.4
log
@update the pmax stuff to NetBSD 961107 - this version i got somehow
compiled on my decstation 2100 (PLUTO) - but it will not fully work
out of the box - but i want to bring it into the tree because i get
my own pmax on 961228 - so that i have a good startpoint then :-)

all the OpenBSD changes to the pmax tree will follow in the next commit
@
text
@d1 1
a1 1
/*	$NetBSD: autoconf.h,v 1.7 1996/05/29 06:19:49 mhitch Exp $	*/
d77 2
@


1.3
log
@sync to netbsd; for graichen
@
text
@d1 1
a1 1
/*	$NetBSD: autoconf.h,v 1.6.4.1 1996/05/30 04:07:36 mhitch Exp $	*/
@


1.2
log
@update from netbsd
@
text
@d1 1
a1 1
/*	$NetBSD: autoconf.h,v 1.3 1996/01/11 05:57:04 jonathan Exp $	*/
d34 2
d38 1
d43 7
a50 12
struct abus {
	struct	device *ab_dv;		/* back-pointer to device */
	int	ab_type;		/* bus type (see below) */
	void	(*ab_intr_establish)	/* bus's set-handler function */
		    __P((struct confargs *, intr_handler_t, intr_arg_t));
	void	(*ab_intr_disestablish)	/* bus's unset-handler function */
		    __P((struct confargs *));
	caddr_t	(*ab_cvtaddr)		/* convert slot/offset to address */
		    __P((struct confargs *));
	int	(*ab_matchname)		/* see if name matches driver */
		    __P((struct confargs *, char *));
};
d52 8
a59 4
#define	BUS_MAIN	1		/* mainbus */
#define	BUS_TC		2		/* TurboChannel */
#define	BUS_ASIC	3		/* IOCTL ASIC; under TurboChannel */
#define	BUS_TCDS	4		/* TCDS ASIC; under TurboChannel */
a60 10
#define KN02_ASIC_NAME "KN02    "	/* very special */
	
#define	BUS_INTR_ESTABLISH(ca, handler, val)				\
	    (*(ca)->ca_bus->ab_intr_establish)((ca), (handler), (val))
#define	BUS_INTR_DISESTABLISH(ca)					\
	    (*(ca)->ca_bus->ab_intr_establish)(ca)
#define	BUS_CVTADDR(ca)							\
	    (*(ca)->ca_bus->ab_cvtaddr)(ca)
#define	BUS_MATCHNAME(ca, name)						\
	    (*(ca)->ca_bus->ab_matchname)((ca), (name))
d66 1
a67 1
	struct	abus *ca_bus;		/* bus device resides on. */
d70 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
/*	$NetBSD: autoconf.h,v 1.2 1995/09/20 04:33:00 jonathan Exp $	*/
d73 1
a74 1
	int	ca_offset;		/* Offset into slot. */
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
