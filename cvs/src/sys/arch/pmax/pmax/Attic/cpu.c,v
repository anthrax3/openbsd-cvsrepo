head	1.6;
access;
symbols
	SMP_SYNC_A:1.6
	SMP_SYNC_B:1.6
	UBC_SYNC_A:1.6
	UBC_SYNC_B:1.6
	OPENBSD_2_9:1.5.0.20
	OPENBSD_2_9_BASE:1.5
	OPENBSD_2_8:1.5.0.18
	OPENBSD_2_8_BASE:1.5
	OPENBSD_2_7:1.5.0.16
	OPENBSD_2_7_BASE:1.5
	SMP:1.5.0.14
	SMP_BASE:1.5
	kame_19991208:1.5
	OPENBSD_2_6:1.5.0.12
	OPENBSD_2_6_BASE:1.5
	OPENBSD_2_5:1.5.0.10
	OPENBSD_2_5_BASE:1.5
	OPENBSD_2_4:1.5.0.8
	OPENBSD_2_4_BASE:1.5
	OPENBSD_2_3:1.5.0.6
	OPENBSD_2_3_BASE:1.5
	OPENBSD_2_2:1.5.0.4
	OPENBSD_2_2_BASE:1.5
	OPENBSD_2_1:1.5.0.2
	OPENBSD_2_1_BASE:1.5
	OPENBSD_2_0:1.2.0.2
	OPENBSD_2_0_BASE:1.2
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@ * @;


1.6
date	2001.06.24.23.48.34;	author deraadt;	state dead;
branches;
next	1.5;

1.5
date	96.12.22.15.22.29;	author graichen;	state Exp;
branches
	1.5.14.1;
next	1.4;

1.4
date	96.12.22.15.18.27;	author graichen;	state Exp;
branches;
next	1.3;

1.3
date	96.11.23.21.46.09;	author kstailey;	state Exp;
branches;
next	1.2;

1.2
date	96.09.15.21.13.05;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.51.32;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.51.32;	author deraadt;	state Exp;
branches;
next	;

1.5.14.1
date	2001.07.04.10.21.37;	author niklas;	state dead;
branches;
next	;


desc
@@


1.6
log
@bye bye, with prejudice
@
text
@/*	$NetBSD: cpu.c,v 1.8 1996/10/13 03:39:48 christos Exp $	*/

/*
 * Copyright (c) 1994, 1995 Carnegie-Mellon University.
 * All rights reserved.
 *
 * Author: Chris G. Demetriou
 * 
 * Permission to use, copy, modify and distribute this software and
 * its documentation is hereby granted, provided that both the copyright
 * notice and this permission notice appear in all copies of the
 * software, derivative works or modified versions, and any portions
 * thereof, and that both notices appear in supporting documentation.
 * 
 * CARNEGIE MELLON ALLOWS FREE USE OF THIS SOFTWARE IN ITS "AS IS" 
 * CONDITION.  CARNEGIE MELLON DISCLAIMS ANY LIABILITY OF ANY KIND 
 * FOR ANY DAMAGES WHATSOEVER RESULTING FROM THE USE OF THIS SOFTWARE.
 * 
 * Carnegie Mellon requests users of this software to return to
 *
 *  Software Distribution Coordinator  or  Software.Distribution@@CS.CMU.EDU
 *  School of Computer Science
 *  Carnegie Mellon University
 *  Pittsburgh PA 15213-3890
 *
 * any improvements or extensions that they make and grant Carnegie the
 * rights to redistribute these changes.
 */

#include <sys/param.h>
#include <sys/device.h>
#include <sys/systm.h>

#include <machine/cpu.h>
#include <machine/autoconf.h>

/* Definition of the driver for autoconfig. */
static int	cpumatch(struct device *, void *, void *);
static void	cpuattach(struct device *, struct device *, void *);

struct cfattach cpu_ca = {
	sizeof (struct device), cpumatch, cpuattach
};

struct cfdriver cpu_cd = {
	NULL, "cpu", DV_DULL
};

extern void cpu_identify __P((void));


static int
cpumatch(parent, cfdata, aux)
	struct device *parent;
	void *cfdata;
	void *aux;
{
	struct confargs *ca = aux;


	/* make sure that we're looking for a CPU. */
	if (strcmp(ca->ca_name, cpu_cd.cd_name) != 0) {
		return (0);
	}
	return (1);
}

static void
cpuattach(parent, dev, aux)
	struct device *parent;
	struct device *dev;
	void *aux;
{

	printf(": ");

	cpu_identify();
}



#if 0
static int
cpuprint(aux, pnp)
	void *aux;
	const char *pnp;
{
	register struct confargs *ca = aux;

/*XXX*/ printf("debug: cpuprint\n");

#if 0
	if (pnp)
		printf("%s at %s", ca->ca_name, pnp);
#endif
	return (UNCONF);
}
#endif
@


1.5
log
@bring back all the local OpenBSD changes to the pmax tree since 961107

i hope that i did'nt break anything of the files required for the alpha
(in the dev dir) niklas :-)
@
text
@@


1.5.14.1
log
@Merge in -current from two days ago in the SMP branch.
As usual with merges, they do not indicate progress, so do not hold
your breath for working SMP, and do not mail me and ask about the
state of it.  It has not changed.  There is work ongoing, but very, very
slowly.  The commit is done in parts as to not lock up the tree in too
big chunks at a time.
@
text
@@


1.4
log
@update the pmax stuff to NetBSD 961107 - this version i got somehow
compiled on my decstation 2100 (PLUTO) - but it will not fully work
out of the box - but i want to bring it into the tree because i get
my own pmax on 961228 - so that i have a good startpoint then :-)

all the OpenBSD changes to the pmax tree will follow in the next commit
@
text
@d86 1
a86 1
	char *pnp;
@


1.3
log
@added const to second parameter of cfprint_t routines
@
text
@d1 1
a1 1
/*	$NetBSD: cpu.c,v 1.5.4.1 1996/06/16 17:28:21 mhitch Exp $	*/
d86 1
a86 1
	const char *pnp;
@


1.2
log
@sync to netbsd; for graichen
@
text
@d86 1
a86 1
	char *pnp;
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
/*	$NetBSD: cpu.c,v 1.1 1995/08/10 05:17:11 jonathan Exp $	*/
d32 1
d34 1
a35 1
/*#include <machine/rpb.h>*/
a39 2
struct cfdriver cpucd =
    { NULL, "cpu", cpumatch, cpuattach, DV_DULL, sizeof (struct device) };
d41 10
a50 1
static int	cpuprint __P((void *, char *pnp));
a51 1
extern void cpu_configure __P((void));
a57 1
	struct cfdata *cf = cfdata;
d60 1
d62 1
a62 1
	if (strcmp(ca->ca_name, cpucd.cd_name) != 0)
d64 1
a64 1

d75 4
a78 1
	/* Identify cpu. */
a79 2
	cpu_configure();
	printf("\n");
a80 1
	/* Work out what kind of FPU is present. */
a82 18
	if (major == PCS_PROC_LCA4) {
		struct confargs nca;

		/*
		 * If the processor is an KN01, it's got no bus,
		 * but a fixed set of onboard devices.
		 * Attach it here. (!!!)
		 */
		nca.ca_name = "kn01";
		nca.ca_slot = 0;
		nca.ca_offset = 0;
		nca.ca_bus = NULL;
		if (!config_found(dev, &nca, cpuprint))
			panic("cpuattach: couldn't attach LCA bus interface");
	}
#endif
}

d90 3
d95 1
d98 1
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
