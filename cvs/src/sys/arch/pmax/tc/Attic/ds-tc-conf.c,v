head	1.4;
access;
symbols
	SMP_SYNC_A:1.4
	SMP_SYNC_B:1.4
	UBC_SYNC_A:1.4
	UBC_SYNC_B:1.4
	SMP:1.4.0.2
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@ * @;


1.4
date	96.09.15.21.13.24;	author deraadt;	state dead;
branches;
next	1.3;

1.3
date	96.01.16.01.22.28;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	96.01.05.13.41.33;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.51.35;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.51.35;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.4
log
@sync to netbsd; for graichen
@
text
@/*	$NetBSD: ds-tc-conf.c,v 1.6 1996/01/11 05:59:23 jonathan Exp $	*/

/*
 * Copyright (c) 1995 Jonathan Stone
 * All rights reserved.
 */

/*
 * 3MIN and 3MAXPLUS turbochannel slots.
 * The kmin (3MIN) and kn03 (3MAXPLUS) have the same number of slots.
 * We can share one configuration-struct table and use two slot-address
 * tables to handle the fact that the turbochannel slot size and base
 * addresses are different on the two machines.
 * (thankfully, the IOCTL ASIC subslots are all the same size on all
 * DECstations with IOASICs.) The devices are listed in the order in which
 *  we should probe and attach them.
 */

#define C(x)	((void *)(u_long)x)
#if 0
#define TC_SCSI  "PMAZ-AA "
#define TC_ETHER "PMAD-AA "
#else
#define TC_SCSI NULL
#define TC_ETHER NULL
#endif

struct confargs tc3_devs[4] = {
	/* name	       slot  offset intpri */
	{ "IOCTL   ",     3,  0x0,   -1,   },	/* IOCTL asic, builtin */
	{ NULL, 	  2,  0x0,    2,   },	/* option slot 2 */
	{ NULL, 	  1,  0x0,    1,   },	/* option slot 1 */
	{ NULL, 	  0,  0x0,    0,   }	/* option slot 0 */

};

/*
 * The only builtin Turbonchannel device on the kn03 and kmin
 * is the IOCTL asic, which is mapped into TC slot 3.
 */
struct tc_builtin tc_kn03_builtins[] = {
	{ "IOCTL   ",	3, 0x0, C(3), /*C(3)*/ }
};

/* 3MAXPLUS TC slot addresses */
static struct tc_slotdesc tc_kn03_slots [4] = {
       	{ KV(KN03_PHYS_TC_0_START), C(0) },  /* slot0 - tc option slot 0 */
	{ KV(KN03_PHYS_TC_1_START), C(1) },  /* slot1 - tc option slot 1 */
	{ KV(KN03_PHYS_TC_2_START), C(2) },  /* slot2 - tc option slot 2 */
	{ KV(KN03_PHYS_TC_3_START), C(3) }   /* slot3 - IO asic on b'board */
};
int tc_kn03_nslots =
    sizeof(tc_kn03_slots) / sizeof(tc_kn03_slots[0]);


/* 3MAXPLUS turbochannel autoconfiguration table */
struct tc_cpu_desc kn03_tc_desc =
{
	tc_kn03_slots, KN03_TC_NSLOTS,
	tc3_devs, KN03_TC_NSLOTS, /*XXX*/
	tc_ds_ioasic_intr_setup,
	tc_ds_ioasic_intr_establish,
	tc_ds_ioasic_intr_disestablish,
	(void*)-1
};

/************************************************************************/

/* 3MIN slot addreseses */
static struct tc_slotdesc tc_kmin_slots [] = {
       	{ KV(KMIN_PHYS_TC_0_START), C(0) },   /* slot0 - tc option slot 0 */
	{ KV(KMIN_PHYS_TC_1_START), C(1) },   /* slot1 - tc option slot 1 */
	{ KV(KMIN_PHYS_TC_2_START), C(2) },   /* slot2 - tc option slot 2 */
	{ KV(KMIN_PHYS_TC_3_START), C(3) }    /* slot3 - IO asic on b'board */
};

int tc_kmin_nslots =
    sizeof(tc_kmin_slots) / sizeof(tc_kmin_slots[0]);

/* 3MIN turbochannel autoconfiguration table */
struct tc_cpu_desc kmin_tc_desc =
{
	tc_kmin_slots,  KMIN_TC_NSLOTS,
	tc3_devs, KMIN_TC_NSLOTS, /*XXX*/
	tc_ds_ioasic_intr_setup,
	tc_ds_ioasic_intr_establish,
	tc_ds_ioasic_intr_disestablish,
	/*kmin_intr*/ (void*) -1
};

/************************************************************************/

/* MAXINE  turbochannel slots  */
struct confargs xine_devs[4] = {
	/* name	       slot  offset intpri  */
	{ "PMAG-DV ",	  3,  0x0,    3,   },	/* xcfb */
	{ "IOCTL   ",  	  2,  0x0,   -1,   },
	{ NULL, 	  1,  0x0,    1,   },
	{ NULL, 	  0,  0x0,    0,   }
};

/* MAXINE slot addreseses */
static struct tc_slotdesc tc_xine_slots [4] = {
       	{ KV(XINE_PHYS_TC_0_START), C(0) },   /* slot 0 - tc option slot 0 */
	{ KV(XINE_PHYS_TC_1_START), C(1) },   /* slot 1 - tc option slot 1 */
		/* physical space for ``slot 2'' is reserved */
	{ KV(XINE_PHYS_TC_3_START), C(8) },   /* slot 2 - IO asic on b'board */
	{ KV(XINE_PHYS_CFB_START), C(-1) }    /* slot 3 - fb on b'board */
};

int tc_xine_nslots =
    sizeof(tc_xine_slots) / sizeof(tc_xine_slots[0]);

struct tc_cpu_desc xine_tc_desc =
{
	tc_xine_slots, XINE_TC_NSLOTS,
	xine_devs, 4, /*XXX*/ 
	tc_ds_ioasic_intr_setup,
	tc_ds_ioasic_intr_establish,
	tc_ds_ioasic_intr_disestablish,
	/*xine_intr*/ (void *) -1
};


/************************************************************************/

/* 3MAX (kn02) turbochannel slots  */
struct confargs kn02_devs[8] = {
   /* The 3max  supposedly has "KN02    " at 0xbffc0410 */

	/* name        slot  offset intpri  */
	{ KN02_ASIC_NAME, 7,  0x0,   -1,   },	/* System CSR and subslots */
	{ TC_ETHER, 	  6,  0x0,    6,   },	/* slot 6: Ether on cpu board*/
	{ TC_SCSI, 	  5,  0x0,    5,   },	/* slot 5: SCSI on cpu board */
/*XXX*/	{ NULL, 	  4,   -1,    0,   },	/* slot 4 reserved */
/*XXX*/	{ NULL, 	  3,   -1,    0,   },	/* slot 3 reserved */
	{ NULL, 	  2,  0x0,    2,   },	/* slot 2 - TC option slot 2 */
	{ NULL, 	  1,  0x0,    1,   },	/* slot 1 - TC option slot 1 */
	{ NULL, 	  0,  0x0,    0,   }	/* slot 0 - TC option slot 0 */
};

/* slot addreseses */
static struct tc_slotdesc tc_kn02_slots [8] = {
       	{ KV(KN02_PHYS_TC_0_START), C(0)},	/* slot 0 - tc option slot 0 */
	{ KV(KN02_PHYS_TC_1_START), C(1), },	/* slot 1 - tc option slot 1 */
	{ KV(KN02_PHYS_TC_2_START), C(2), },	/* slot 2 - tc option slot 2 */
	{ KV(KN02_PHYS_TC_3_START), C(3), },	/* slot 3 - reserved */
	{ KV(KN02_PHYS_TC_4_START), C(4), },	/* slot 4 - reserved */
	{ KV(KN02_PHYS_TC_5_START), C(5), },	/* slot 5 - SCSI on b`board */
	{ KV(KN02_PHYS_TC_6_START), C(6), },	/* slot 6 - b'board Ether */
	{ KV(KN02_PHYS_TC_7_START), C(7), }	/* slot 7 - system devices */

};

int tc_kn02_nslots =
    sizeof(tc_kn02_slots) / sizeof(tc_kn02_slots[0]);

#define KN02_ROM_NAME KN02_ASIC_NAME

#define TC_KN02_DEV_IOASIC     -1
#define TC_KN02_DEV_ETHER	6
#define TC_KN02_DEV_SCSI	5

struct tc_builtin tc_kn02_builtins[] = {
	{ KN02_ROM_NAME,7, 0x0, C(TC_KN02_DEV_IOASIC) /* C(7)*/ },
	{ TC_ETHER,	6, 0x0, C(TC_KN02_DEV_ETHER)  /* C(6)*/ },
	{ TC_SCSI,	5, 0x0, C(TC_KN02_DEV_SCSI)   /* C(5)*/ },
};


struct tc_cpu_desc kn02_tc_desc =
{
	tc_kn02_slots, KN02_TC_NSLOTS,
	kn02_devs, 8, /*XXX*/
	tc_ds_ioasic_intr_setup,
	tc_ds_ioasic_intr_establish,
	tc_ds_ioasic_intr_disestablish,
	/*kn02_intr*/ (void*) -1 
};
@


1.3
log
@update from netbsd
@
text
@@


1.2
log
@update from netbsd
@
text
@d1 1
a1 1
/*	$NetBSD: ds-tc-conf.c,v 1.5 1996/01/03 20:39:16 jonathan Exp $	*/
d14 3
a16 1
 * (thankfully the IOASIC subslots are all the same size.)
d20 7
d30 4
a33 4
	{ "IOCTL   ",     3,  0x0,   -1,   },  /* offset 0x040000 ?*/
	{ NULL, 	  2,  0x0,    2,   },
	{ NULL, 	  1,  0x0,    1,   },
	{ NULL, 	  0,  0x0,    0,   }
d37 9
a45 1
/* 3MAXPLUS slot addreseses */
d73 2
a74 2
	{ KV(KMIN_PHYS_TC_2_START), C(3) },   /* slot2 - tc option slot 2 */
	{ KV(KMIN_PHYS_TC_3_START), C(4) }    /* slot3 - IO asic on b'board */
a126 8
#if 0
#define TC_SCSI  "PMAZ-AA "
#define TC_ETHER "PMAD-AA "
#else
#define TC_SCSI NULL
#define TC_ETHER NULL
#endif

d135 1
a135 1
/*XXX*/	{ NULL, 	  4,   -1,    0,   },	/* slot 3 reserved */
d144 8
a151 8
       	{ KV(KN02_PHYS_TC_0_START), },	/* slot 0 - tc option slot 0 */
	{ KV(KN02_PHYS_TC_1_START), },	/* slot 1 - tc option slot 1 */
	{ KV(KN02_PHYS_TC_2_START), },	/* slot 2 - tc option slot 2 */
	{ KV(KN02_PHYS_TC_3_START), },	/* slot 3 - reserved */
	{ KV(KN02_PHYS_TC_4_START), },	/* slot 4 - reserved */
	{ KV(KN02_PHYS_TC_5_START), },	/* slot 5 - SCSI on cpu board */
	{ KV(KN02_PHYS_TC_6_START), },	/* slot 6 - Ether on cpu board */
	{ KV(KN02_PHYS_TC_7_START), }	/* slot 7 - system devices */
d165 3
a167 3
	{ KN02_ROM_NAME,7, 0x00000000, C(TC_KN02_DEV_IOASIC),	},
	{ TC_ETHER,	6, 0x00000000, C(TC_KN02_DEV_ETHER),	},
	{ TC_SCSI,	5, 0x00000000, C(TC_KN02_DEV_SCSI),	},
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
/*	$NetBSD: ds-tc-conf.c,v 1.4 1995/10/09 01:45:28 jonathan Exp $	*/
d16 3
d20 5
a24 5
	/* name	      entry   pri xxx */
	{ "IOCTL   ",     3, -1,  /*0x040000*/ 0x0,   },
	{ NULL, 	  2,  2,    0x0,   },
	{ NULL, 	  1,  1,    0x0,   },
	{ NULL, 	  0,  0,    0x0,   }
d29 5
a33 5
 static struct tc_slot_desc kn03_slot_addrs [4] = {
       	{ KV(KN03_PHYS_TC_0_START), },	/* slot 0 - tc option slot 0 */
	{ KV(KN03_PHYS_TC_1_START), },	/* slot 1 - tc option slot 1 */
	{ KV(KN03_PHYS_TC_2_START), },	/* slot 2 - tc option slot 2 */
	{ KV(KN03_PHYS_TC_3_START), }	/* slot 3 - IOCTL asic on CPU board */
d35 3
d42 1
a42 1
	kn03_slot_addrs, KN03_TC_NSLOTS,
d53 5
a57 5
static struct tc_slot_desc kmin_slot_addrs [4] = {
       	{ KV(KMIN_PHYS_TC_0_START), },	/* slot 0 - tc option slot 0 */
	{ KV(KMIN_PHYS_TC_1_START), },	/* slot 1 - tc option slot 1 */
	{ KV(KMIN_PHYS_TC_2_START), },	/* slot 2 - tc option slot 2 */
	{ KV(KMIN_PHYS_TC_3_START), }	/* slot 3 - IOCTL asic on CPU board */
d60 3
d66 1
a66 1
	kmin_slot_addrs, KMIN_TC_NSLOTS,
d78 5
a82 4
	{ "PMAG-DV ",	  3,   3,    0x0,  },	/* xcfb ? */
	{ "IOCTL   ",  	  2,  -1,    0x0,  },
	{ NULL, 	  1,   1,    0x0,  },
	{ NULL, 	  0,   0,    0x0,  }
d86 6
a91 5
static struct tc_slot_desc xine_slot_addrs [4] = {
       	{ KV(XINE_PHYS_TC_0_START), },	/* slot 0 - tc option slot 0 */
	{ KV(XINE_PHYS_TC_1_START), },	/* slot 1 - tc option slot 1 */
	{ KV(XINE_PHYS_TC_3_START), },	/* slot 2 - IOCTL asic on CPU board */
	{ KV(XINE_PHYS_CFB_START),  }	/* slot 3 - fb on CPU board */
d94 3
d99 1
a99 1
	xine_slot_addrs, XINE_TC_NSLOTS,
d107 1
d122 9
a130 9
	/* name	     entry   pri xxx */
	{ KN02_ASIC_NAME, 7,  -1,   0x0,   },	/* System CSR and subslots */
	{ TC_ETHER, 	  6,   6,   0x0,   },	/* slot 6: Ether on cpu board*/
	{ TC_SCSI, 	  5,   5,   0x0,   },	/* slot 5: SCSI on cpu board */
/*XXX*/	{ NULL, 	  4,   0,    -1,   },	/* slot 3 reserved */
/*XXX*/	{ NULL, 	  3,   0,    -1,   },	/* slot 3 reserved */
	{ NULL, 	  2,   2,   0x0,   },	/* slot 2 - TC option slot 2 */
	{ NULL, 	  1,   1,   0x0,   },	/* slot 1 - TC option slot 1 */
	{ NULL, 	  0,   0,   0x0,   }	/* slot 0 - TC option slot 0 */
d134 1
a134 1
static struct tc_slot_desc kn02_slot_addrs [8] = {
d146 15
d164 1
a164 1
	kn02_slot_addrs, KN02_TC_NSLOTS,
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
