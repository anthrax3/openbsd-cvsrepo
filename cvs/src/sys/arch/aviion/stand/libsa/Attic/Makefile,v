head	1.8;
access;
symbols
	OPENBSD_5_8:1.6.0.6
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.2
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.5.0.4
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_5:1.4.0.4
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.3.0.4
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.2
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.2.0.20
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.18
	OPENBSD_5_0:1.2.0.16
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.14
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.12
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.8
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.10
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.6
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.4
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.2
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.1.0.6
	OPENBSD_4_2_BASE:1.1
	OPENBSD_4_1:1.1.0.4
	OPENBSD_4_1_BASE:1.1
	OPENBSD_4_0:1.1.0.2
	OPENBSD_4_0_BASE:1.1;
locks; strict;
comment	@# @;


1.8
date	2015.12.01.07.50.04;	author deraadt;	state dead;
branches;
next	1.7;
commitid	Rh8AZFtVMVCiwPts;

1.7
date	2015.11.16.19.33.52;	author miod;	state Exp;
branches;
next	1.6;
commitid	5gnqUR6VheSiU9SF;

1.6
date	2014.11.19.20.01.35;	author miod;	state Exp;
branches;
next	1.5;
commitid	9VZgPwegRuvi9VC1;

1.5
date	2014.07.13.21.18.44;	author jasper;	state Exp;
branches;
next	1.4;
commitid	Y3LcLObEiHDZvy27;

1.4
date	2013.10.08.21.55.21;	author miod;	state Exp;
branches;
next	1.3;

1.3
date	2012.08.21.14.46.18;	author pascal;	state Exp;
branches;
next	1.2;

1.2
date	2007.11.26.10.01.42;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	2006.05.16.22.48.18;	author miod;	state Exp;
branches;
next	;


desc
@@


1.8
log
@Send Aviion to same place as Nova II
discussed with jsg
@
text
@#	$OpenBSD: Makefile,v 1.7 2015/11/16 19:33:52 miod Exp $

LIB=sa

NOPIC=nopic
NOPROFILE=noprofile
NOPIE=

# Logically src/sys
S=${.CURDIR}/../../../..

SRCS=	clock.c delay.S exec.c fault.c parse_args.c setjmp.S

.PATH:	${S}/lib/libsa
SRCS+=	alloc.c memcpy.c exit.c getfile.c getln.c globals.c loadfile.c \
	printf.c strerror.c memset.c memcmp.c strncpy.c strcmp.c strlen.c \
	strlcpy.c strlcat.c snprintf.c strchr.c strtol.c \
	close.c closeall.c dev.c dkcksum.c \
	lseek.c open.c nullfs.c read.c fstat.c disklabel.c \
	ufs.c cread.c
SRCS+= arp.c ether.c in_cksum.c net.c netif.c netudp.c rpc.c nfs.c \
	rarp.c bootparam.c

.PATH:	${S}/lib/libkern/arch/m88k ${S}/lib/libkern
SRCS+=	ashrdi3.c bzero.c __main.c

# DBG= -DDEBUG -DNETIF_DEBUG -DNFS_DEBUG -DRPC_DEBUG \
# 	-DNET_DEBUG -DRARP_DEBUG -DETHER_DEBUG

#DEFS= -DCOMPAT_UFS
DEFS= -D__INTERNAL_LIBSA_CREAD -D_STANDALONE
#-DNETIF_DEBUG
INCL= -I${.CURDIR} -I${.CURDIR}/../libprom -I${S}/lib/libsa -I${S}
CFLAGS+= ${XCFLAGS} ${COPTS} ${DEFS} ${DBG} ${INCL}

all: libsa.a

install:

.include <bsd.lib.mk>
@


1.7
log
@Replace unbounded gets() in libsa with getln() which takes a buffer size,
and convert all gets() users.
ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.6 2014/11/19 20:01:35 miod Exp $
@


1.6
log
@Move {recv,send}udp() out of net.c into their own file; to be used shortly.
Add the new files to the few md libsa builds which require it.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.5 2014/07/13 21:18:44 jasper Exp $
d15 1
a15 1
SRCS+=	alloc.c memcpy.c exit.c getfile.c gets.c globals.c loadfile.c \
@


1.5
log
@fix even more trailing tabs
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 2013/10/08 21:55:21 miod Exp $
d21 1
a21 1
SRCS+= arp.c ether.c in_cksum.c net.c netif.c rpc.c nfs.c \
@


1.4
log
@Early stages of a working disk bootloader for OpenBSD/aviion.
Currently limited to oosiop(4) controllers, and thus models 4600 and 530.
There are some rough edges to polish to avoid manual interaction (kernel
currently can't figure its boot device when booted from disk), but the hard
(and hair-pulling) work is over.
And we can have kernel symbols again!
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.3 2012/08/21 14:46:18 pascal Exp $
d22 1
a22 1
	 rarp.c bootparam.c 
@


1.3
log
@Add NOPIE= bits for sys/arch/*/stand to ensure that bootblocks will always be
built with -fno-pie.  This gets the hairiest part of PIE out of the way ...

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.2 2007/11/26 10:01:42 deraadt Exp $
a10 1
DIR_SA=$S/lib/libsa
d12 1
a12 2
SRC_net= arp.c ether.c in_cksum.c net.c netif.c rpc.c nfs.c \
	 rarp.c bootparam.c 
d14 2
a15 1
SRC_sa=	alloc.c memcpy.c exit.c getfile.c gets.c globals.c \
d17 1
a17 1
	strlcpy.c strlcat.c snprintf.c \
d19 1
a19 1
	lseek.c open.c nullfs.c read.c fstat.c \
d21 2
d25 1
a25 7
SRCS+=	ashrdi3.c bzero.c

SRC_aviion= exec_aout.c

SRC_here= clock.c parse_args.c

SRCS+= ${SRC_net} ${SRC_sa} ${SRC_aviion} ${SRC_here}
d31 1
a31 1
DEFS= -D__INTERNAL_LIBSA_CREAD 
a34 2

.PATH:  ${DIR_SA} ${DIR_KERN} 
@


1.2
log
@More LIBKERN bits that go away
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.1 2006/05/16 22:48:18 miod Exp $
d7 1
@


1.1
log
@Network bootloader for AV400 series, will load a native kernel. Still some
rough edges to sort out, but enough to successfully boot a kernel.
Will not work on series 530 yet.
@
text
@d1 1
a1 1
#	$OpenBSD$
a10 1
DIR_KERN=$S/lib/libkern
d22 2
a23 1
SRC_kern= ashrdi3.c bzero.c
d29 1
a29 1
SRCS= ${SRC_net} ${SRC_sa} ${SRC_aviion} ${SRC_here} ${SRC_kern}
@

