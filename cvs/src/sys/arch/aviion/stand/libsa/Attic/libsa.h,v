head	1.6;
access;
symbols
	OPENBSD_5_8:1.5.0.10
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.5.0.2
	OPENBSD_5_7_BASE:1.5
	OPENBSD_5_6:1.5.0.6
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_5:1.5.0.4
	OPENBSD_5_5_BASE:1.5
	OPENBSD_5_4:1.2.0.14
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.12
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.10
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.8
	OPENBSD_5_0:1.2.0.6
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.4
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.2
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.1.0.14
	OPENBSD_4_7_BASE:1.1
	OPENBSD_4_6:1.1.0.16
	OPENBSD_4_6_BASE:1.1
	OPENBSD_4_5:1.1.0.12
	OPENBSD_4_5_BASE:1.1
	OPENBSD_4_4:1.1.0.10
	OPENBSD_4_4_BASE:1.1
	OPENBSD_4_3:1.1.0.8
	OPENBSD_4_3_BASE:1.1
	OPENBSD_4_2:1.1.0.6
	OPENBSD_4_2_BASE:1.1
	OPENBSD_4_1:1.1.0.4
	OPENBSD_4_1_BASE:1.1
	OPENBSD_4_0:1.1.0.2
	OPENBSD_4_0_BASE:1.1;
locks; strict;
comment	@ * @;


1.6
date	2015.12.01.07.50.05;	author deraadt;	state dead;
branches;
next	1.5;
commitid	Rh8AZFtVMVCiwPts;

1.5
date	2013.10.16.16.59.35;	author miod;	state Exp;
branches;
next	1.4;

1.4
date	2013.10.10.21.22.07;	author miod;	state Exp;
branches;
next	1.3;

1.3
date	2013.10.08.21.55.22;	author miod;	state Exp;
branches;
next	1.2;

1.2
date	2010.04.18.15.09.00;	author miod;	state Exp;
branches;
next	1.1;

1.1
date	2006.05.16.22.48.18;	author miod;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Send Aviion to same place as Nova II
discussed with jsg
@
text
@/*	$OpenBSD: libsa.h,v 1.5 2013/10/16 16:59:35 miod Exp $	*/

/*
 * libsa prototypes 
 */

#include <machine/prom.h>

extern int boothowto;

struct boot_info {
	unsigned int bootdev;
	unsigned int bootunit;
	unsigned int bootlun;
	unsigned int bootpart;
};

extern struct boot_info bi;

int	badaddr(void *, int);
void	delay(unsigned int);
void	exec(char *, const char *, uint, uint, uint, uint);
int	parse_args(const char *, char **, int);
@


1.5
log
@Support for oaic in the boot blocks. Cope with older prom putting a \r at
the end of the commandline. Clean up a few stale comments. Crank boot blocks
version to 0.3.
@
text
@d1 1
a1 1
/*	$OpenBSD: libsa.h,v 1.4 2013/10/10 21:22:07 miod Exp $	*/
@


1.4
log
@Misc cleanups and small fixes. Boot controller/unit/lun information passed
to the kernel will now match the device the kernel is loaded from, not the
device the boot blocks are loaded from (this allows one to netboot the
boot blocks to boot a kernel from a local disk).
@
text
@d1 1
a1 1
/*	$OpenBSD: libsa.h,v 1.3 2013/10/08 21:55:22 miod Exp $	*/
a9 2

#define	BOOT_ETHERNET_ZERO	0x0001
@


1.3
log
@Early stages of a working disk bootloader for OpenBSD/aviion.
Currently limited to oosiop(4) controllers, and thus models 4600 and 530.
There are some rough edges to polish to avoid manual interaction (kernel
currently can't figure its boot device when booted from disk), but the hard
(and hair-pulling) work is over.
And we can have kernel symbols again!
@
text
@d1 1
a1 1
/*	$OpenBSD: libsa.h,v 1.2 2010/04/18 15:09:00 miod Exp $	*/
d13 10
d24 1
a24 1
void	exec(char *, const char *, int, int, int);
@


1.2
log
@Parse commandline options in netboot, and force the onboard ethernet address
to be 00:00:00:00:00:00 if `-z' is passed; this allows netboot to work on a
machine which has lost its nvram (despite the ethernet address not being
stored in nvram at all, stupid prom can't be bothered to get it right...).
Crank netboot version.
@
text
@d1 1
a1 1
/*	$OpenBSD: libsa.h,v 1.1 2006/05/16 22:48:18 miod Exp $	*/
d13 3
a15 2
void	exec_aout(char *, const char *, int, int, int);
int	parse_args(char *, char **, int);
@


1.1
log
@Network bootloader for AV400 series, will load a native kernel. Still some
rough edges to sort out, but enough to successfully boot a kernel.
Will not work on series 530 yet.
@
text
@d1 1
a1 1
/*	$OpenBSD: libsa.h,v 1.3 2002/03/14 01:26:40 millert Exp $	*/
d9 4
d14 1
a14 1
int	parse_args(char *, char **);
@

