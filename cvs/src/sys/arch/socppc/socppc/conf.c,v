head	1.28;
access;
symbols
	OPENBSD_6_1:1.28.0.4
	OPENBSD_6_1_BASE:1.28
	OPENBSD_6_0:1.26.0.2
	OPENBSD_6_0_BASE:1.26
	OPENBSD_5_9:1.24.0.2
	OPENBSD_5_9_BASE:1.24
	OPENBSD_5_8:1.23.0.6
	OPENBSD_5_8_BASE:1.23
	OPENBSD_5_7:1.23.0.2
	OPENBSD_5_7_BASE:1.23
	OPENBSD_5_6:1.19.0.6
	OPENBSD_5_6_BASE:1.19
	OPENBSD_5_5:1.19.0.4
	OPENBSD_5_5_BASE:1.19
	OPENBSD_5_4:1.17.0.2
	OPENBSD_5_4_BASE:1.17
	OPENBSD_5_3:1.16.0.4
	OPENBSD_5_3_BASE:1.16
	OPENBSD_5_2:1.16.0.2
	OPENBSD_5_2_BASE:1.16
	OPENBSD_5_1_BASE:1.15
	OPENBSD_5_1:1.15.0.2
	OPENBSD_5_0:1.14.0.4
	OPENBSD_5_0_BASE:1.14
	OPENBSD_4_9:1.14.0.2
	OPENBSD_4_9_BASE:1.14
	OPENBSD_4_8:1.10.0.2
	OPENBSD_4_8_BASE:1.10
	OPENBSD_4_7:1.7.0.2
	OPENBSD_4_7_BASE:1.7
	OPENBSD_4_6:1.6.0.4
	OPENBSD_4_6_BASE:1.6
	OPENBSD_4_5:1.5.0.2
	OPENBSD_4_5_BASE:1.5
	OPENBSD_4_4:1.4.0.2
	OPENBSD_4_4_BASE:1.4;
locks; strict;
comment	@ * @;


1.28
date	2016.09.04.10.51.24;	author naddy;	state Exp;
branches;
next	1.27;
commitid	4OWaAfwqMvhOCLOI;

1.27
date	2016.09.02.17.06.13;	author goda;	state Exp;
branches;
next	1.26;
commitid	J1JzeTsS8K8zyH3c;

1.26
date	2016.04.25.20.09.14;	author tedu;	state Exp;
branches;
next	1.25;
commitid	43yo2G4zZOY9ab4i;

1.25
date	2016.02.26.09.10.05;	author natano;	state Exp;
branches;
next	1.24;
commitid	NHDvdrxPpwDqGtpK;

1.24
date	2015.10.23.15.10.52;	author claudio;	state Exp;
branches;
next	1.23;
commitid	g17gxjQh9N9egLbB;

1.23
date	2014.12.11.19.44.17;	author tedu;	state Exp;
branches;
next	1.22;
commitid	jUSAZlQ30WF1ESM9;

1.22
date	2014.10.09.04.10.03;	author tedu;	state Exp;
branches;
next	1.21;
commitid	Db8IHIncfKM3SDX9;

1.21
date	2014.10.09.03.59.59;	author tedu;	state Exp;
branches;
next	1.20;
commitid	I0KLtD9aVxAdm6aW;

1.20
date	2014.08.20.06.14.43;	author mikeb;	state Exp;
branches;
next	1.19;
commitid	qXFkosC6o9cv78HT;

1.19
date	2013.11.04.14.11.29;	author deraadt;	state Exp;
branches;
next	1.18;

1.18
date	2013.08.20.14.27.31;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2013.06.03.15.54.47;	author tedu;	state Exp;
branches;
next	1.16;

1.16
date	2012.04.06.15.10.40;	author jsing;	state Exp;
branches;
next	1.15;

1.15
date	2011.10.06.20.49.28;	author deraadt;	state Exp;
branches;
next	1.14;

1.14
date	2011.01.14.19.04.08;	author jasper;	state Exp;
branches;
next	1.13;

1.13
date	2011.01.12.22.16.19;	author kettenis;	state Exp;
branches;
next	1.12;

1.12
date	2010.11.19.20.55.48;	author miod;	state Exp;
branches;
next	1.11;

1.11
date	2010.09.23.05.02.14;	author claudio;	state Exp;
branches;
next	1.10;

1.10
date	2010.06.09.15.25.33;	author jsing;	state Exp;
branches;
next	1.9;

1.9
date	2010.03.31.16.33.08;	author deraadt;	state Exp;
branches;
next	1.8;

1.8
date	2010.03.30.19.16.09;	author matthieu;	state Exp;
branches;
next	1.7;

1.7
date	2009.08.13.15.04.20;	author dlg;	state Exp;
branches;
next	1.6;

1.6
date	2009.05.31.20.43.44;	author maja;	state Exp;
branches;
next	1.5;

1.5
date	2009.01.25.17.30.49;	author miod;	state Exp;
branches;
next	1.4;

1.4
date	2008.06.12.20.03.48;	author mglocker;	state Exp;
branches;
next	1.3;

1.3
date	2008.05.14.20.49.48;	author miod;	state Exp;
branches;
next	1.2;

1.2
date	2008.05.13.21.55.17;	author miod;	state Exp;
branches;
next	1.1;

1.1
date	2008.05.10.12.02.21;	author kettenis;	state Exp;
branches;
next	;


desc
@@


1.28
log
@Remove support for tape block devices. Nobody mount(8)s tapes any longer.
ok deraadt@@ guenther@@
@
text
@/*	$OpenBSD: conf.c,v 1.27 2016/09/02 17:06:13 goda Exp $ */

/*
 * Copyright (c) 1997 Per Fogelstrom
 * Copyright (c) 1997 RTMX Inc, North Carolina
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. All advertising materials mentioning features or use of this software
 *    must display the following acknowledgement:
 *	This product includes software developed under OpenBSD for RTMX Inc,
 *	North Carolina, USA, by Per Fogelstrom, Opsycon AB, Sweden.
 * 4. The name of the author may not be used to endorse or promote products
 *    derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS
 * OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
 * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 *
 */

#include <sys/param.h>
#include <sys/systm.h>
#include <sys/tty.h>

#include <machine/conf.h>

#include "sd.h"
#include "st.h"
#include "cd.h"
#include "rd.h"
#include "wd.h"
bdev_decl(wd);
cdev_decl(wd);

#include "vnd.h"
#include "video.h"

struct bdevsw bdevsw[] = {
	bdev_disk_init(NWD,wd),		/* 0: ST506/ESDI/IDE disk */
	bdev_swap_init(1,sw),		/* 1 swap pseudo device */
	bdev_disk_init(NSD,sd),		/* 2 SCSI Disk */
	bdev_disk_init(NCD,cd),		/* 3 SCSI CD-ROM */
	bdev_notdef(),			/* 4 unknown*/
	bdev_notdef(),			/* 5 was: SCSI tape */
	bdev_notdef(),			/* 6 unknown*/
	bdev_notdef(),			/* 7 unknown*/
	bdev_notdef(),			/* 8 */
	bdev_notdef(),			/* 9 */
	bdev_notdef(),			/* 10 */
	bdev_notdef(),			/* 11 */
	bdev_notdef(),			/* 12 */
	bdev_notdef(),			/* 13 */
	bdev_disk_init(NVND,vnd),	/* 14 vnode disk driver*/
	bdev_notdef(),			/* 15 unknown*/
	bdev_notdef(),			/* 16 was: concatenated disk driver */
	bdev_disk_init(NRD,rd),		/* 17 ram disk driver*/
	bdev_notdef(),			/* 18 unknown*/
	bdev_notdef(),			/* 19 was: RAIDframe disk driver */
};
int nblkdev = nitems(bdevsw);

#include "pty.h"

#include "com.h"
cdev_decl(com);

#include "wsdisplay.h"
#include "wskbd.h"
#include "wsmouse.h"

#include "bpfilter.h"

#include "tun.h"

#include "wsmux.h"

#ifdef USER_PCICONF
#include "pci.h"
cdev_decl(pci);
#endif

#include "pf.h"

#include "ksyms.h"
#include "usb.h"
#include "uhid.h"
#include "ugen.h"
#include "ulpt.h"
#include "ucom.h"

#include "vscsi.h"
#include "pppx.h"
#include "hotplug.h"
#include "fuse.h"
#include "switch.h"

struct cdevsw cdevsw[] = {
	cdev_cn_init(1,cn),		/* 0: virtual console */
	cdev_ctty_init(1,ctty),		/* 1: controlling terminal */
	cdev_mm_init(1,mm),		/* 2: /dev/{null,mem,kmem,...} */
	cdev_notdef(),			/* 3 was /dev/drum */
	cdev_tty_init(NPTY,pts),	/* 4: pseudo-tty slave */
	cdev_ptc_init(NPTY,ptc),	/* 5: pseudo-tty master */
	cdev_log_init(1,log),		/* 6: /dev/klog */
	cdev_notdef(),			/* 7 */
	cdev_disk_init(NSD,sd),		/* 8: SCSI disk */
	cdev_disk_init(NCD,cd),		/* 9: SCSI CD-ROM */
	cdev_notdef(),			/* 10 */
	cdev_disk_init(NWD,wd),		/* 11: ST506/ESDI/IDE disk */
	cdev_notdef(),			/* 12 */
	cdev_notdef(),			/* 13 */
	cdev_notdef(),			/* 14 */
	cdev_notdef(),			/* 15 */
	cdev_notdef(),			/* 16 */
	cdev_disk_init(NRD,rd),		/* 17 ram disk driver*/
	cdev_notdef(),			/* 18 was: concatenated disk driver */
	cdev_disk_init(NVND,vnd),	/* 19: vnode disk */
	cdev_tape_init(NST,st),		/* 20: SCSI tape */
	cdev_fd_init(1,filedesc),	/* 21: file descriptor pseudo-dev */
	cdev_bpf_init(NBPFILTER,bpf),	/* 22: berkeley packet filter */
	cdev_tun_init(NTUN,tun),	/* 23: network tunnel */
	cdev_notdef(),			/* 24 was LKM */
	cdev_notdef(),			/* 25 */
	cdev_tty_init(NCOM,com),	/* 26: serial port */
	cdev_notdef(),			/* 27 */
	cdev_notdef(),			/* 28 */
	cdev_notdef(),			/* 29 */
	cdev_notdef(),			/* 30 */
	cdev_notdef(),			/* 31 */
	cdev_notdef(),			/* 32 */
	cdev_notdef(),			/* 33 */
	cdev_notdef(),			/* 34 */
	cdev_notdef(),			/* 35 */
	cdev_notdef(),			/* 36 */
	cdev_notdef(),			/* 37 */
	cdev_notdef(),			/* 38 */
	cdev_pf_init(NPF,pf),		/* 39: packet filter */
	cdev_random_init(1,random),	/* 40: random data source */
	cdev_notdef(),			/* 41 */
	cdev_notdef(),			/* 42 */
	cdev_ksyms_init(NKSYMS,ksyms),	/* 43: Kernel symbols device */
	cdev_video_init(NVIDEO,video),	/* 44: generic video I/O */
	cdev_notdef(),			/* 45 */
	cdev_notdef(),			/* 46 */
	cdev_notdef(),			/* 47: was: /dev/crypto */
	cdev_notdef(),			/* 48 */
	cdev_notdef(),			/* 49 */
	cdev_notdef(),			/* 50 */
	cdev_notdef(),			/* 51 */
	cdev_notdef(),			/* 52 */
	cdev_notdef(),			/* 53 */
	cdev_notdef(),			/* 54 was: RAIDframe disk driver */
	cdev_notdef(),			/* 55 */
	cdev_notdef(),			/* 56 */
	cdev_notdef(),			/* 57 */
	cdev_notdef(),			/* 58 */
	cdev_notdef(),			/* 59 */
	cdev_notdef(),			/* 60 */
	cdev_usb_init(NUSB,usb),	/* 61: USB controller */
	cdev_usbdev_init(NUHID,uhid),	/* 62: USB generic HID */
	cdev_usbdev_init(NUGEN,ugen),	/* 63: USB generic driver */
	cdev_ulpt_init(NULPT,ulpt),	/* 64: USB printers */
	cdev_notdef(),			/* 65 */
	cdev_tty_init(NUCOM,ucom),	/* 66: USB tty */
	cdev_wsdisplay_init(NWSDISPLAY,	/* 67: frame buffers, etc. */
		wsdisplay),
	cdev_mouse_init(NWSKBD, wskbd),	/* 68: keyboards */
	cdev_mouse_init(NWSMOUSE,	/* 69: mice */
		wsmouse),
	cdev_mouse_init(NWSMUX, wsmux),	/* 70: ws multiplexor */
#ifdef USER_PCICONF
	cdev_pci_init(NPCI,pci),	/* 71: PCI user */
#else
	cdev_notdef(),
#endif
	cdev_notdef(),			/* 72 */
	cdev_notdef(),			/* 73 */
	cdev_notdef(),			/* 74: was USB scanners */
	cdev_notdef(),			/* 75 */
	cdev_notdef(),			/* 76 */
	cdev_ptm_init(NPTY,ptm),	/* 77: pseudo-tty ptm device */
	cdev_vscsi_init(NVSCSI,vscsi),	/* 78: vscsi */
	cdev_notdef(),			/* 79 */
	cdev_notdef(),			/* 80 */
	cdev_notdef(),
	cdev_disk_init(1,diskmap),	/* 82: disk mapper */
	cdev_pppx_init(NPPPX,pppx),	/* 83: pppx */
	cdev_hotplug_init(NHOTPLUG,hotplug),	/* 84: devices hot plugging */
	cdev_fuse_init(NFUSE,fuse),	/* 85: fuse */
	cdev_tun_init(NTUN,tap),	/* 86: Ethernet network tunnel */
	cdev_switch_init(NSWITCH,switch), /* 87: switch(4) control interface */
};
int nchrdev = nitems(cdevsw);

int mem_no = 2;				/* major number of /dev/mem */

/*
 * Swapdev is a fake device implemented in sw.c.
 * It is used only internally to get to swstrategy.
 */
dev_t swapdev = makedev(1, 0);

/*
 * Check whether dev is /dev/mem or /dev/kmem.
 */
int
iskmemdev(dev_t dev)
{
	return major(dev) == mem_no && minor(dev) < 2;
}

/*
 * Check whether dev is /dev/zero.
 */
int
iszerodev(dev_t dev)
{
	return major(dev) == mem_no && minor(dev) == 12;
}

dev_t
getnulldev()
{
	return makedev(mem_no, 2);
}

int chrtoblktbl[] = {
	/*VCHR*/	/*VBLK*/
	/*  0 */	NODEV,
	/*  1 */	NODEV,
	/*  2 */	NODEV,
	/*  3 */	NODEV,
	/*  4 */	NODEV,
	/*  5 */	NODEV,
	/*  6 */	NODEV,
	/*  7 */	NODEV,
	/*  8 */	2,		/* sd */
	/*  9 */	3,		/* cd */
	/* 10 */	NODEV,
	/* 11 */	0,		/* wd */
	/* 12 */	NODEV,
	/* 13 */	NODEV,
	/* 14 */	NODEV,
	/* 15 */	NODEV,
	/* 16 */	NODEV,
	/* 17 */	17,		/* rd */
	/* 18 */	NODEV,
	/* 19 */	14,		/* vnd */
};
int nchrtoblktbl = nitems(chrtoblktbl);

#include <dev/cons.h>

#define comcnpollc	nullcnpollc
cons_decl(com);

struct consdev constab[] = {
#if NCOM > 0
	cons_init(com),
#endif
	{ 0 },
};
@


1.27
log
@Add switch(4) cdev entry

ok deraadt@@ yasuoka@@ reyk@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.26 2016/04/25 20:09:14 tedu Exp $ */
d59 1
a59 1
	bdev_tape_init(NST,st),		/* 5 SCSI tape */
a263 1
	/* 20 */	5,		/* st */
@


1.26
log
@remove systrace
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.25 2016/02/26 09:10:05 natano Exp $ */
d110 1
d206 1
@


1.25
log
@Remove stale RAIDframe entries from chrtoblktbl.

While there truncate the tables to the minimum required size; chrtoblk()
and blktochr() are designed to handle a table shorter than cdevsw.

"Looks good to me" deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.24 2015/10/23 15:10:52 claudio Exp $ */
a98 2
#include "systrace.h"

d162 1
a162 1
	cdev_systrace_init(NSYSTRACE,systrace),	/* 50 system call tracing */
@


1.24
log
@Allocate a new major for tap(4) also note that pseudo-device tun is for tap
as well. OK dlg@@ mpi@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.23 2014/12/11 19:44:17 tedu Exp $ */
a264 34
	/* 21 */	NODEV,
	/* 22 */	NODEV,
	/* 23 */	NODEV,
	/* 24 */	NODEV,
	/* 25 */	NODEV,
	/* 26 */	NODEV,
	/* 27 */	NODEV,
	/* 28 */	NODEV,
	/* 29 */	NODEV,
	/* 30 */	NODEV,
	/* 31 */	NODEV,
	/* 32 */	NODEV,
	/* 33 */	NODEV,
	/* 34 */	NODEV,
	/* 35 */	NODEV,
	/* 36 */	NODEV,
	/* 37 */	NODEV,
	/* 38 */	NODEV,
	/* 39 */	NODEV,
	/* 40 */	NODEV,
	/* 41 */	NODEV,
	/* 42 */	NODEV,
	/* 43 */	NODEV,
	/* 44 */	NODEV,
	/* 45 */	NODEV,
	/* 46 */	NODEV,
	/* 47 */	NODEV,
	/* 48 */	NODEV,
	/* 49 */	NODEV,
	/* 50 */	NODEV,
	/* 51 */	NODEV,
	/* 52 */	NODEV,
	/* 53 */	NODEV,
	/* 54 */	19,		/* raid */
@


1.23
log
@dragonflybsd has added a urio driver. conservation of urios requires
that we delete ours, which isn't actually useful.
ok mpi sthen
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.22 2014/10/09 04:10:03 tedu Exp $ */
d206 1
@


1.22
log
@mechanical translation of dev_lkm_dummy() to dev_notdef()
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.21 2014/10/09 03:59:59 tedu Exp $ */
a105 1
#include "urio.h"
d179 1
a179 1
	cdev_urio_init(NURIO,urio),	/* 65: USB Diamond Rio 500 */
@


1.21
log
@remove LKM devices
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.20 2014/08/20 06:14:43 mikeb Exp $ */
d62 6
a67 6
	bdev_lkm_dummy(),		/* 8 */
	bdev_lkm_dummy(),		/* 9 */
	bdev_lkm_dummy(),		/* 10 */
	bdev_lkm_dummy(),		/* 11 */
	bdev_lkm_dummy(),		/* 12 */
	bdev_lkm_dummy(),		/* 13 */
d148 6
a153 6
	cdev_lkm_dummy(),		/* 33 */
	cdev_lkm_dummy(),		/* 34 */
	cdev_lkm_dummy(),		/* 35 */
	cdev_lkm_dummy(),		/* 36 */
	cdev_lkm_dummy(),		/* 37 */
	cdev_lkm_dummy(),		/* 38 */
@


1.20
log
@unlink crypto(4) pseudo device from the architecture dependant character
device tables and kernel config files.  ok deraadt
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.19 2013/11/04 14:11:29 deraadt Exp $ */
a100 6
#ifdef LKM
#define NLKM 1
#else
#define NLKM 0
#endif

d139 1
a139 1
	cdev_lkm_init(NLKM,lkm),	/* 24: loadable module driver */
@


1.19
log
@remove iop(4) driver.  it is entirely unmaintained and supports something
which basically doesn't exist at all.
reminded about it by brad
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.18 2013/08/20 14:27:31 ajacoutot Exp $ */
a89 2
#include "inet.h"

d168 1
a168 1
	cdev_crypto_init(NCRYPTO,crypto), /* 47: /dev/crypto */
@


1.18
log
@Remove uscanner(4). It was disabled in GENERIC more than 2.5 years ago.
No regression has been reported since libusb became the prefered
solution to work with USB scanners.

req. by mpi@@
ok ian@@ mpi@@ miod@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.17 2013/06/03 15:54:47 tedu Exp $ */
a116 1
#include "bthub.h"
d210 1
a210 1
	cdev_bthub_init(NBTHUB,bthub),	/* 81: bluetooth hub */
@


1.17
log
@changes for isc fuse support. not enabled. ok beck deraadt.
from Sylvestre Gallon ccna.syl gmail.com
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.16 2012/04/06 15:10:40 jsing Exp $ */
a115 1
#include "uscanner.h"
d204 1
a204 1
	cdev_usbdev_init(NUSCANNER,uscanner), /* 74: usb scanner */
@


1.16
log
@tedu the raidframe.

ok deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.14 2011/01/14 19:04:08 jasper Exp $ */
d122 1
d216 1
@


1.15
log
@ccd goes to the attic
discussed with jsing and millert
@
text
@a50 1
#include "raid.h"
d70 1
a70 1
	bdev_notdef(),			/* 16: was: concatenated disk driver */
d73 1
a73 1
	bdev_disk_init(NRAID,raid),	/* 19 RAIDframe disk driver */
d178 1
a178 1
	cdev_disk_init(NRAID,raid),	/* 54: RAIDframe disk driver */
@


1.14
log
@- use nitems()

"doesn't hurt" deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.13 2011/01/12 22:16:19 kettenis Exp $ */
a50 1
#include "ccd.h"
d71 1
a71 1
	bdev_disk_init(NCCD,ccd),	/* 16 concatenated disk driver */
d143 1
a143 1
	cdev_disk_init(NCCD,ccd),	/* 18 concatenated disk driver */
d271 1
a271 1
	/* 18 */	16,		/* ccd */
@


1.13
log
@Add crypto(4) and hifn(4).
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.12 2010/11/19 20:55:48 miod Exp $ */
d77 1
a77 1
int nblkdev = sizeof bdevsw / sizeof bdevsw[0];
d218 1
a218 1
int nchrdev = sizeof cdevsw / sizeof cdevsw[0];
d310 1
a310 1
int nchrtoblktbl = sizeof(chrtoblktbl) / sizeof(chrtoblktbl[0]);
@


1.12
log
@Sync MAKEDEV against conf.c, and both against GENERIC.
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.11 2010/09/23 05:02:14 claudio Exp $ */
d92 2
d173 1
a173 1
	cdev_notdef(),			/* 47 */
@


1.11
log
@Add pppx(4) to the cdevs of the remaining archs.
OK dlg@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.10 2010/06/09 15:25:33 jsing Exp $ */
d112 5
d121 1
d187 4
a190 4
	cdev_notdef(),			/* 63 */
	cdev_notdef(),			/* 64 */
	cdev_notdef(),			/* 65 */
	cdev_notdef(),			/* 66 */
d204 1
a204 1
	cdev_notdef(),			/* 74 */
d214 1
d312 1
@


1.10
log
@Wire up device nodes for disk mapper.

ok deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.8 2010/03/30 19:16:09 matthieu Exp $ */
d113 1
d115 1
a115 2

#include "bthub.h"
d207 1
@


1.9
log
@fix typo
@
text
@d206 1
@


1.8
log
@Add missing bthub device entries on arches that support bluetooth.
ok miod@@, deraadt@@, todd@@.
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.7 2009/08/13 15:04:20 dlg Exp $ */
d204 1
a204 1
	cdev_notdev(),			/* 80 */
@


1.7
log
@wire vscsi up to a cdev

for claudio@@ ok deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.6 2009/05/31 20:43:44 maja Exp $ */
d115 2
d203 3
@


1.6
log
@Add support for udl in socppc. ok @@miod and @@kettenis
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.5 2009/01/25 17:30:49 miod Exp $ */
d113 2
d200 1
@


1.5
log
@Remove /dev/drum and related code.
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.4 2008/06/12 20:03:48 mglocker Exp $ */
d84 4
d92 2
d111 1
d176 1
a176 1
	cdev_notdef(),			/* 62 */
d181 6
a186 4
	cdev_notdef(),			/* 67 */
	cdev_notdef(),			/* 68 */
	cdev_notdef(),			/* 69 */
	cdev_notdef(),			/* 70 */
@


1.4
log
@Enable /dev/video* for all USB capable archs.  MAKEDEV bits will follow
shortly.

OK todd@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.3 2008/05/14 20:49:48 miod Exp $ */
d110 1
a110 1
	cdev_swap_init(1,sw),		/* 3: /dev/drum (swap pseudo-device) */
@


1.3
log
@Fix more chrtoblktbl[] sloppyness, and add proper block st nodes to *ppc and
sgi.
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.2 2008/05/13 21:55:17 miod Exp $ */
d53 1
d151 1
a151 1
	cdev_notdef(),			/* 44 */
@


1.2
log
@Fix chrtoblktbl[] entries.
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.1 2008/05/10 12:02:21 kettenis Exp $ */
d43 1
d51 2
d60 1
a60 1
	bdev_notdef(),			/* 5 unknown*/
d71 1
a71 1
	bdev_notdef(),			/* 16 unknown*/
d73 2
d124 1
a124 1
	cdev_notdef(),			/* 18 */
d126 1
a126 1
	cdev_notdef(),			/* 20 */
d160 1
a160 1
	cdev_notdef(),			/* 54 */
d233 2
a234 2
	/*  8 */	2,
	/*  9 */	3,
d236 1
a236 1
	/* 11 */	0,
d242 4
a245 4
	/* 17 */	17,
	/* 18 */	NODEV,
	/* 19 */	14,
	/* 20 */	NODEV,
d279 1
a279 1
	/* 54 */	NODEV,
@


1.1
log
@OpenBSD/socppc, a port to the Thecus N1200, and potentially other Freescale
PowerPC SoC platforms that use u-boot as a bootloader.
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.34 2008/04/08 14:31:54 claudio Exp $ */
d229 1
a229 1
	/*  9 */	NODEV,
d233 1
a233 1
	/* 13 */	4,
d239 1
a239 1
	/* 19 */	NODEV,
d274 1
a274 1
	/* 54 */	19,
@

