head	1.22;
access;
symbols
	OPENBSD_6_1:1.22.0.2
	OPENBSD_6_1_BASE:1.22
	OPENBSD_6_0:1.20.0.8
	OPENBSD_6_0_BASE:1.20
	OPENBSD_5_9:1.20.0.4
	OPENBSD_5_9_BASE:1.20
	OPENBSD_5_8:1.20.0.6
	OPENBSD_5_8_BASE:1.20
	OPENBSD_5_7:1.20.0.2
	OPENBSD_5_7_BASE:1.20
	OPENBSD_5_6:1.17.0.4
	OPENBSD_5_6_BASE:1.17
	OPENBSD_5_5:1.16.0.6
	OPENBSD_5_5_BASE:1.16
	OPENBSD_5_4:1.16.0.2
	OPENBSD_5_4_BASE:1.16
	OPENBSD_5_3:1.15.0.8
	OPENBSD_5_3_BASE:1.15
	OPENBSD_5_2:1.15.0.6
	OPENBSD_5_2_BASE:1.15
	OPENBSD_5_1_BASE:1.15
	OPENBSD_5_1:1.15.0.4
	OPENBSD_5_0:1.15.0.2
	OPENBSD_5_0_BASE:1.15
	OPENBSD_4_9:1.14.0.4
	OPENBSD_4_9_BASE:1.14
	OPENBSD_4_8:1.14.0.2
	OPENBSD_4_8_BASE:1.14
	OPENBSD_4_7:1.13.0.12
	OPENBSD_4_7_BASE:1.13
	OPENBSD_4_6:1.13.0.14
	OPENBSD_4_6_BASE:1.13
	OPENBSD_4_5:1.13.0.10
	OPENBSD_4_5_BASE:1.13
	OPENBSD_4_4:1.13.0.8
	OPENBSD_4_4_BASE:1.13
	OPENBSD_4_3:1.13.0.6
	OPENBSD_4_3_BASE:1.13
	OPENBSD_4_2:1.13.0.4
	OPENBSD_4_2_BASE:1.13
	OPENBSD_4_1:1.13.0.2
	OPENBSD_4_1_BASE:1.13
	OPENBSD_4_0:1.11.0.4
	OPENBSD_4_0_BASE:1.11
	OPENBSD_3_9:1.11.0.2
	OPENBSD_3_9_BASE:1.11
	OPENBSD_3_8:1.10.0.2
	OPENBSD_3_8_BASE:1.10
	OPENBSD_3_7:1.6.0.2
	OPENBSD_3_7_BASE:1.6
	OPENBSD_3_6:1.4.0.2
	OPENBSD_3_6_BASE:1.4
	SMP_SYNC_A:1.3
	SMP_SYNC_B:1.3
	SMP:1.3.0.2
	LUNA88K_INIT:1.1.1.1
	AOYAMA:1.1.1;
locks; strict;
comment	@# @;


1.22
date	2016.12.17.05.22.34;	author aoyama;	state Exp;
branches;
next	1.21;
commitid	W72IaIdGRxWfqGM0;

1.21
date	2016.09.03.16.18.21;	author tedu;	state Exp;
branches;
next	1.20;
commitid	n66Gi25TQf2NHQM4;

1.20
date	2015.03.04.14.03.11;	author aoyama;	state Exp;
branches;
next	1.19;
commitid	DqbBRONSoBQ5eXiG;

1.19
date	2015.01.18.14.13.18;	author aoyama;	state Exp;
branches;
next	1.18;
commitid	WjnevmQCwb3g91dK;

1.18
date	2014.12.08.13.24.04;	author aoyama;	state Exp;
branches;
next	1.17;
commitid	8mGnZAAHoBrwOFWt;

1.17
date	2014.04.16.12.01.33;	author aoyama;	state Exp;
branches;
next	1.16;

1.16
date	2013.04.28.23.33.12;	author aoyama;	state Exp;
branches;
next	1.15;

1.15
date	2011.06.29.20.52.09;	author matthew;	state Exp;
branches;
next	1.14;

1.14
date	2010.07.03.03.59.16;	author krw;	state Exp;
branches;
next	1.13;

1.13
date	2007.02.09.14.26.09;	author aoyama;	state Exp;
branches;
next	1.12;

1.12
date	2007.01.12.21.41.53;	author aoyama;	state Exp;
branches;
next	1.11;

1.11
date	2005.09.06.19.21.55;	author miod;	state Exp;
branches;
next	1.10;

1.10
date	2005.08.03.02.10.44;	author dlg;	state Exp;
branches;
next	1.9;

1.9
date	2005.05.01.07.54.42;	author david;	state Exp;
branches;
next	1.8;

1.8
date	2005.04.30.00.49.36;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	2005.04.30.00.36.04;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	2004.09.16.09.35.36;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	2004.09.16.09.14.03;	author mickey;	state Exp;
branches;
next	1.4;

1.4
date	2004.07.28.12.28.46;	author miod;	state Exp;
branches;
next	1.3;

1.3
date	2004.04.29.14.33.24;	author miod;	state Exp;
branches
	1.3.2.1;
next	1.2;

1.2
date	2004.04.26.12.34.02;	author miod;	state Exp;
branches;
next	1.1;

1.1
date	2004.04.21.15.23.44;	author aoyama;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.04.21.15.23.44;	author aoyama;	state Exp;
branches;
next	;

1.3.2.1
date	2004.06.05.23.09.45;	author niklas;	state Exp;
branches;
next	;


desc
@@


1.22
log
@Add new device xp(4), preliminary support for LUNA's I/O processor.

This is a straightforward port of NetBSD/luna68k by Izumi Tsutsui(*),
and makes LUNA's I/O auxiliary processor (called XP, actually
HD647180) possible to load and run programs.

(*): http://mail-index.netbsd.org/source-changes/2016/12/03/msg079493.html
@
text
@#	$OpenBSD: GENERIC,v 1.21 2016/09/03 16:18:21 tedu Exp $
#
# For further information on compiling OpenBSD kernels, see the config(8)
# man page.
#
# For further information on hardware support for this architecture, see
# the intro(4) man page.  For further information about kernel options
# for this architecture, see the options(4) man page.  For an explanation
# of each device driver in this file see the section 4 man page for the
# device.

machine		luna88k m88k
include		"../../../conf/GENERIC"
maxusers	64			# estimated number of users

# Processor type
option		M88100		# 88100 support; mandatory

# Number of maximum processors
option		MAX_CPUS=4	# may have up to 4 processors 

# Define this if your processor has the xxx.usr bug (mask C82N)
option		ERRATA__XXX_USR

# Options for luna88k hardware
option		WSDISPLAY_COMPAT_RAWKBD	# Provide raw scancodes; needed for X11

config		bsd		swap generic

#
# devices
#

mainbus0	at root
clock0		at mainbus0
lcd0		at mainbus0
le0		at mainbus0
sio0		at mainbus0
siotty0		at sio0
ws0		at sio0
fb0		at mainbus0
spc0		at mainbus0
spc1		at mainbus0

# Workstation Console attachments
wsdisplay*	at fb?
wskbd*		at ws? mux 1
wsmouse*	at ws? mux 0

# HD647180X I/O processor
xp0		at mainbus0

# PC-9801 extension board slot
cbus0		at mainbus0

# PC-9801 extension board slot 'generic' driver
pcex0		at cbus0

# NEC PC-9801-86 sound board 
#necsb*		at cbus?
#audio*		at necsb?

# NEC PC-9801-102 & PC-9821X[AE]-E01 PC Card slot adapter
#pcic*		at cbus?
#pcmcia*	at pcic?

# SCSI devices
scsibus*	at scsi?
sd*		at scsibus?
st*		at scsibus?
cd*		at scsibus?
ch*		at scsibus?
safte*		at scsibus?
ses*		at scsibus?
uk*		at scsibus?

# Pseudo-device
pseudo-device	wsmux 2

# PCMCIA devices
# XXX: malo(4) is not supported, because LUNA-88K does not have DMA.
#com*		at pcmcia?		# PCMCIA modems/serial ports
##aic*		at pcmcia?		# PCMCIA Adaptec 152[02] SCSI (not yet)
#wdc*		at pcmcia?		# IDE controllers
#ne*		at pcmcia?		# PCMCIA based NE2000 ethernet
#ep*		at pcmcia?		# PCMCIA based 3C5xx ethernet
#sm*		at pcmcia?		# PCMCIA based sm ethernet
#xe*		at pcmcia?		# Xircom ethernet
#wi*		at pcmcia?		# WaveLAN IEEE 802.11DS
#an*		at pcmcia?		# Aironet IEEE 802.11DS

# IDE/ATAPI (with PCMCIA)
#wd*		at wdc?	flags 0x0000
#atapiscsi*	at wdc?
@


1.21
log
@remove cnw driver. it was never enabled anywhere except on amd64 (and only
there by accident) where it hasn't seen much use...
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.20 2015/03/04 14:03:11 aoyama Exp $
d49 3
@


1.20
log
@Add commented-out PCMCIA support configuration to GENERIC.
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.18 2014/12/08 13:24:04 aoyama Exp $
a87 1
#cnw*		at pcmcia?		# Xircom Netwave
@


1.19
log
@Add commented-out necsb(4) and audio(4) configuration to GENERIC.
@
text
@d60 3
a62 1
# SCSI bus support
d76 17
@


1.18
log
@Add an intermediate layer driver, cbus(4), to manage its own
interrupts of PC-9801 extension board slot bus (so-called 'C-bus') on
LUNA-88K2.

Existing pcex(4) is now attached at cbus(4), i.e.

cbus0 at mainbus0
pcex0 at cbus0

With this driver, some other PC-9801 boards might be supported on luna88k
in the (near?) future:-)

ok miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.17 2014/04/16 12:01:33 aoyama Exp $
d45 5
d52 2
d56 3
a58 4
# Workstation Console attachments
wsdisplay*	at fb?
wskbd*		at ws? mux 1
wsmouse*	at ws? mux 0
@


1.17
log
@Add generic driver for "NEC PC-9801(*) extension board slot" on
LUNA-88K.

LUNA-88K{,2} has one or two slot(s) that can attach the extension
board designed for PC-9801.  This driver provides dedicated mmap(2)
and capability for waiting specified interrupt on that slot so that we
can use the extension board from userland program.

(*)PC-9801 is a Japanese popular personal computer, mainly used in
   1980-90's. (see http://en.wikipedia.org/wiki/NEC_PC-9801)

ok miod@@, and man pages jmc@@
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.16 2013/04/28 23:33:12 aoyama Exp $
d46 2
a47 1
pcex0		at mainbus0
@


1.16
log
@Preliminary modifications for Xorg 1bpp server, based on OpenBSD/hp300
and NetBSD/luna68k.  Need more work in Xorg.

luna88k/conf/GENERIC:
- enable wsmux on GENERIC kernel

luna88k/dev/luanfb.c:
- make hardware access volatile'd
- add extra ioctl(2) used in Xorg wsfb driver
- add some workaround

luna88k/dev/lunaws.c:
- add WSDISPLAY_COMPAT_RAWKBD stuff for Xorg keyboard input

luna88k/dev/omrasops.c:
- change 'caddr_t' to 'u_int8_t *'

"go for it!" miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.15 2011/06/29 20:52:09 matthew Exp $
d44 3
@


1.15
log
@Replace all instances of "scsibus* at hba?" with a single "scsibus* at
scsi?" rule, similar to how ethernet PHY drivers attach at mii.

Discussed on icb.
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.14 2010/07/03 03:59:16 krw Exp $
d25 2
d47 2
a48 2
wskbd*		at ws?
wsmouse*	at ws?
d61 3
@


1.14
log
@No more ss(4) or usscanner(4). Unused, unloved and unmaintained.
General huzzahs.

"go for it" deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.13 2007/02/09 14:26:09 aoyama Exp $
a48 1
scsibus*	at spc?
d51 1
@


1.13
log
@LCD device driver, second step.  Now the driver works with autoconf.

ok miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.12 2007/01/12 21:41:53 aoyama Exp $
a55 1
ss*		at scsibus?
@


1.12
log
@Change the secondary CMMU's data cache turn on so that do not hog the
bus while they spin, as same as 3.8.  This have been missed since CMMU
initialize cleanup.

Also m88k_cpus[] should have 4 elements on luna88k, even in
non-MULTIPROCESSOR kernel.

ok miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.11 2005/09/06 19:21:55 miod Exp $
d34 1
@


1.11
log
@Remove misleading NCPUS (hardcoded) option. From the SMP tree.
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.10 2005/08/03 02:10:44 dlg Exp $
d18 3
@


1.10
log
@enable safte and ses on all archs that appear to have real scsi busses

ok deraadt@@ beck@@ marco@@
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.9 2005/05/01 07:54:42 david Exp $
a14 2

option		"NCPUS=1"	# number of CPUs supported (max 4)
@


1.9
log
@spacing; ok miod@@ deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.8 2005/04/30 00:49:36 deraadt Exp $
d55 2
@


1.8
log
@start the job of making things look more alike
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.7 2005/04/30 00:36:04 deraadt Exp $
d31 9
a39 9
mainbus0 at root
clock0   at mainbus0
le0      at mainbus0
sio0     at mainbus0
siotty0  at sio0
ws0      at sio0
fb0      at mainbus0
spc0     at mainbus0
spc1     at mainbus0
d42 3
a44 3
wsdisplay* at fb?
wskbd*     at ws?
wsmouse*   at ws?
d47 1
a47 1
scsibus*   at spc?
d50 6
a55 6
sd* at scsibus?
st* at scsibus?
cd* at scsibus?
ch* at scsibus?
ss* at scsibus?
uk* at scsibus?
@


1.7
log
@nice docs at top of GENERIC
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.6 2004/09/16 09:35:36 deraadt Exp $
d13 2
a14 2

include "../../../conf/GENERIC"
a23 1
maxusers	64
@


1.6
log
@spacing
@
text
@d1 10
a10 1
#	$OpenBSD: GENERIC,v 1.5 2004/09/16 09:14:03 mickey Exp $
@


1.5
log
@cleanup deafult locators (blah ?); please check that your most hated architecture is still fluffy (;
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.4 2004/07/28 12:28:46 miod Exp $
d13 1
a13 1
option		ERRATA__XXX_USR	
@


1.4
log
@Remove EH_DEBUG code.
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.3 2004/04/29 14:33:24 miod Exp $
d35 1
a35 1
wskbd*     at ws? console ?
d42 6
a47 6
sd* at scsibus? target ? lun ?
st* at scsibus? target ? lun ?
cd* at scsibus? target ? lun ?
ch* at scsibus? target ? lun ?
ss* at scsibus? target ? lun ?
uk* at scsibus? target ? lun ?
@


1.3
log
@Continue factorizing m88k common code, this time files in <arch>/<arch>
which were copied verbatim from mvme88k to luna88k.

This requires backing out syntactic sugar in mvme88k kernel configuration
files which would deduct the required processor types from the board models,
as the common code only depends upon the M88100 and M88110 defines.
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.2 2004/04/26 12:34:02 miod Exp $
a7 2
#option		DEBUG		# print debugging statements
#option		EH_DEBUG	# debugging code for exception handlers
@


1.3.2.1
log
@Merge with the trunk
@
text
@d1 1
a1 1
#	$OpenBSD$
@


1.2
log
@Start factorizing luna88k and mvme88k common parts.
For now, include files only.
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.1.1.1 2004/04/21 15:23:44 aoyama Exp $
d10 3
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.31 2001/12/22 18:48:50 smurph Exp $
d3 1
a3 1
machine		luna88k 
@


1.1.1.1
log
@Initial commit for OpenBSD/luna88k, based on OpenBSD/mvme88k, NetBSD/luna68k and CMU Mach.
@
text
@@
