head	1.16;
access;
symbols
	OPENBSD_5_5:1.15.0.4
	OPENBSD_5_5_BASE:1.15
	OPENBSD_5_4:1.14.0.2
	OPENBSD_5_4_BASE:1.14
	OPENBSD_5_3:1.13.0.10
	OPENBSD_5_3_BASE:1.13
	OPENBSD_5_2:1.13.0.8
	OPENBSD_5_2_BASE:1.13
	OPENBSD_5_1_BASE:1.13
	OPENBSD_5_1:1.13.0.6
	OPENBSD_5_0:1.13.0.4
	OPENBSD_5_0_BASE:1.13
	OPENBSD_4_9:1.13.0.2
	OPENBSD_4_9_BASE:1.13
	OPENBSD_4_8:1.11.0.2
	OPENBSD_4_8_BASE:1.11
	OPENBSD_4_7:1.10.0.18
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.10.0.20
	OPENBSD_4_6_BASE:1.10
	OPENBSD_4_5:1.10.0.16
	OPENBSD_4_5_BASE:1.10
	OPENBSD_4_4:1.10.0.14
	OPENBSD_4_4_BASE:1.10
	OPENBSD_4_3:1.10.0.12
	OPENBSD_4_3_BASE:1.10
	OPENBSD_4_2:1.10.0.10
	OPENBSD_4_2_BASE:1.10
	OPENBSD_4_1:1.10.0.8
	OPENBSD_4_1_BASE:1.10
	OPENBSD_4_0:1.10.0.6
	OPENBSD_4_0_BASE:1.10
	OPENBSD_3_9:1.10.0.4
	OPENBSD_3_9_BASE:1.10
	OPENBSD_3_8:1.10.0.2
	OPENBSD_3_8_BASE:1.10
	OPENBSD_3_7:1.9.0.12
	OPENBSD_3_7_BASE:1.9
	OPENBSD_3_6:1.9.0.10
	OPENBSD_3_6_BASE:1.9
	SMP_SYNC_A:1.9
	SMP_SYNC_B:1.9
	OPENBSD_3_5:1.9.0.8
	OPENBSD_3_5_BASE:1.9
	OPENBSD_3_4:1.9.0.6
	OPENBSD_3_4_BASE:1.9
	UBC_SYNC_A:1.9
	OPENBSD_3_3:1.9.0.4
	OPENBSD_3_3_BASE:1.9
	OPENBSD_3_2:1.9.0.2
	OPENBSD_3_2_BASE:1.9
	OPENBSD_3_1:1.8.0.24
	OPENBSD_3_1_BASE:1.8
	UBC_SYNC_B:1.9
	UBC:1.8.0.22
	UBC_BASE:1.8
	OPENBSD_3_0:1.8.0.20
	OPENBSD_3_0_BASE:1.8
	OPENBSD_2_9:1.8.0.18
	OPENBSD_2_9_BASE:1.8
	OPENBSD_2_8:1.8.0.16
	OPENBSD_2_8_BASE:1.8
	OPENBSD_2_7:1.8.0.14
	OPENBSD_2_7_BASE:1.8
	SMP:1.8.0.12
	SMP_BASE:1.8
	kame_19991208:1.8
	OPENBSD_2_6:1.8.0.10
	OPENBSD_2_6_BASE:1.8
	OPENBSD_2_5:1.8.0.8
	OPENBSD_2_5_BASE:1.8
	OPENBSD_2_4:1.8.0.6
	OPENBSD_2_4_BASE:1.8
	OPENBSD_2_3:1.8.0.4
	OPENBSD_2_3_BASE:1.8
	OPENBSD_2_2:1.8.0.2
	OPENBSD_2_2_BASE:1.8
	OPENBSD_2_1:1.6.0.4
	OPENBSD_2_1_BASE:1.6
	OPENBSD_2_0:1.6.0.2
	OPENBSD_2_0_BASE:1.6
	theo-1:1.1.1.2
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.16
date	2014.03.18.22.36.34;	author miod;	state dead;
branches;
next	1.15;

1.15
date	2013.12.08.14.46.39;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2013.03.26.19.43.01;	author jasper;	state Exp;
branches;
next	1.13;

1.13
date	2010.11.12.17.11.44;	author deraadt;	state Exp;
branches;
next	1.12;

1.12
date	2010.11.03.20.08.03;	author deraadt;	state Exp;
branches;
next	1.11;

1.11
date	2010.05.31.22.21.43;	author deraadt;	state Exp;
branches;
next	1.10;

1.10
date	2005.05.06.11.16.48;	author pedro;	state Exp;
branches;
next	1.9;

1.9
date	2002.07.15.21.29.16;	author mickey;	state Exp;
branches;
next	1.8;

1.8
date	97.10.19.22.35.57;	author etheisen;	state Exp;
branches
	1.8.12.1
	1.8.22.1;
next	1.7;

1.7
date	97.10.19.22.26.29;	author etheisen;	state Exp;
branches;
next	1.6;

1.6
date	96.10.01.20.01.25;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	96.05.05.11.08.02;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	96.04.28.11.12.35;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	95.11.07.21.16.25;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	95.11.07.08.48.35;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.51.09;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.51.09;	author deraadt;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	95.10.18.10.42.27;	author deraadt;	state Exp;
branches;
next	;

1.8.12.1
date	2003.03.27.23.32.16;	author niklas;	state Exp;
branches;
next	;

1.8.22.1
date	2002.10.29.00.28.07;	author art;	state Exp;
branches;
next	;


desc
@@


1.16
log
@Retire hp300, mvme68k and mvme88k ports. These ports have no users, keeping
this hardware alive is becoming increasingly difficult, and I should heed the
message sent by the three disks which have died on me over the last few days.

Noone sane will mourn these ports anyway. So long, and thanks for the fish.
@
text
@#	$OpenBSD: Makefile,v 1.15 2013/12/08 14:46:39 espie Exp $

S=	${.CURDIR}/../..
KFILE=	GENERIC
.if exists(conf/GENERIC.MP)
KFILE=	GENERIC.MP
.endif
TDIRS=	${_arch} include
TAGS=	${.CURDIR}/tags

NOPROG=
NOMAN=
NOOBJ=
SUBDIR=	stand

# config the fattest kernel we can find into a temporary dir
# to create a Makefile.  Then use make to pull some variables
# out and push them into the sub-shell to expand the paths,
# and finally run ctags.
tags::
	TDIR=`mktemp -d /tmp/_tagXXXXXXXXXX` || exit 1; \
	eval "S=${S}" && \
	config -s ${S} -b $${TDIR} ${.CURDIR}/conf/${KFILE} && \
	eval "_arch=\"`make -V _arch -f $${TDIR}/Makefile`\"" && \
	eval "_mach=\"`make -V _mach -f $${TDIR}/Makefile`\"" && \
	eval "_machdir=\$S/arch/$${_mach}" && \
	eval "_archdir=\$S/arch/$${_arch}" && \
	eval "HFILES=\"`find $S \( -path $S/'arch' -o -path $S/stand -o -path $S/lib/libsa -o -path $S'/lib/libkern/arch' \) -prune -o -name '*.h'; find $${_machdir} $${_archdir} $S/lib/libkern/arch/$${_mach} \( -name boot -o -name stand \) -prune -o -name '*.h'`\"" && \
	eval "SFILES=\"`make -V SFILES -f $${TDIR}/Makefile`\"" && \
	eval "CFILES=\"`make -V CFILES -f $${TDIR}/Makefile`\"" && \
	eval "AFILES=\"`make -V AFILES -f $${TDIR}/Makefile`\"" && \
	ctags -wd -f ${TAGS} $${CFILES} $${HFILES} && \
	egrep "^[_A-Z]*ENTRY[_A-Z]*\(.*\)" $${SFILES} $${AFILES} | \
	    sed "s;\\([^:]*\\):\\([^(]*\\)(\\([^, )]*\\)\\(.*\\);\\3	\\1	/^\\2(\\3\\4$$/;" \
	    >> ${TAGS} && \
	sort -o ${TAGS} ${TAGS} && \
	rm -rf $${TDIR}

links:
	-for i in conf ${TDIRS}; do \
	    (cd $$i && rm -f tags; ln -s tags tags); done

obj:	_SUBDIRUSE

.include <bsd.prog.mk>
@


1.15
log
@reflect reality, mark as NOOBJ
"sure" deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.14 2013/03/26 19:43:01 jasper Exp $
@


1.14
log
@sync TDIRS with reality

"looks good" deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.13 2010/11/12 17:11:44 deraadt Exp $
d13 1
@


1.13
log
@Push all potential (as in, all system MI not utilized by the bootblocks)
.h files into the ctags run as well to bring #define's and structs and
such into scope.  Problem reported by thib
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.12 2010/11/03 20:08:03 deraadt Exp $
d8 1
a8 1
TDIRS=	${_arch} include pci isa eisa
@


1.12
log
@no need to specify the -t flag to ctags
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.11 2010/05/31 22:21:43 deraadt Exp $
d27 1
d31 1
a31 1
	ctags -wd -f ${TAGS} $${CFILES} && \
@


1.11
log
@Completely rewrite the tags file creation process.  use config(8) against
a fat kernel (GERERIC or GENERIC.MP) into a temporary dir, then extract some
variables using make -V, and after some more singing and dancing use this
full and (more) correct list of files with ctags.  Don't read this code.
ok guenther
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.17 2007/10/22 01:26:31 deraadt Exp $
d30 1
a30 1
	ctags -wdt -f ${TAGS} $${CFILES} && \
@


1.10
log
@generate vim-compatible tag files, from netbsd
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.9 2002/07/15 21:29:16 mickey Exp $
d3 37
a39 31
# from: @@(#)Makefile	8.1 (Berkeley) 6/11/93
#
# Makefile for mvme68k links, tags file

S=${.CURDIR}/../..
.include "$S/kern/Make.tags.inc"

NOPROG=	noprog
NOMAN=	noman
NOOBJ=	noobj

TMVEM68K= $S/arch/mvme68k/tags
SUBDIR=	stand ../m68k
DIRS=	conf dev include mvme68k

links::
	-for i in ${DIRS}; do \
		echo $$i ; \
		cd ${.CURDIR} ; \
	    (cd $$i && { rm -f tags; ln -s ${SYSTAGS} tags; }) done

SMVME68K=$S/arch/mvme68k/dev/*.[ch] $S/arch/mvme68k/include/*.[ch] \
	$S/arch/mvme68k/mvme68k/*.[ch]
AMVME68K=$S/arch/mvme68k/mvme68k/*.s $S/lib/libkern/arch/m68k/*.[sS]

tags:
	-ctags -wdtf ${TMVEM68K} ${COMM} ${SMVME68K}
	egrep "^ENTRY(.*)|^ALTENTRY(.*)" ${AMVME68K} | \
	    sed "s;\([^:]*\):\([^(]*\)(\([^, )]*\)\(.*\);\3	\1	/^\2(\3\4$$/;" \
		>> tags
	sort -o ${TMVEM68K} ${TMVEM68K}
@


1.9
log
@repair tags building (due to obj dirs in /sys)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 1997/10/19 22:35:57 etheisen Exp $
d31 1
a31 1
	    sed "s;\([^:]*\):\([^(]*\)(\([^, )]*\)\(.*\);\3 \1 /^\2(\3\4$$/;" \
@


1.8
log
@mvmve68k does not use rcons.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 1997/10/19 22:26:29 etheisen Exp $
d7 3
d14 1
a14 1
SYSTAGS= ${.CURDIR}/tags
d24 3
a26 3
MVME68K=/sys/arch/mvme68k/dev/*.[ch] /sys/arch/mvme68k/include/*.[ch] \
	/sys/arch/mvme68k/mvme68k/*.[ch]
AMVME68K=/sys/arch/mvme68k/mvme68k/*.s
d29 1
a29 1
	-ctags -wdt ${COMM} ${MVME68K}
d33 1
a33 1
	sort -o tags tags
a37 1
.include <bsd.subdir.mk>
@


1.8.12.1
log
@Sync the SMP branch with 3.3
@
text
@d1 1
a1 1
#	$OpenBSD$
a6 3
S=${.CURDIR}/../..
.include "$S/kern/Make.tags.inc"

d11 1
a11 1
TMVEM68K= $S/arch/mvme68k/tags
d21 3
a23 3
SMVME68K=$S/arch/mvme68k/dev/*.[ch] $S/arch/mvme68k/include/*.[ch] \
	$S/arch/mvme68k/mvme68k/*.[ch]
AMVME68K=$S/arch/mvme68k/mvme68k/*.s $S/lib/libkern/arch/m68k/*.[sS]
d26 1
a26 1
	-ctags -wdtf ${TMVEM68K} ${COMM} ${SMVME68K}
d30 1
a30 1
	sort -o ${TMVEM68K} ${TMVEM68K}
d35 1
@


1.8.22.1
log
@sync to -current
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 1997/10/19 22:35:57 etheisen Exp $
a6 3
S=${.CURDIR}/../..
.include "$S/kern/Make.tags.inc"

d11 1
a11 1
TMVEM68K= $S/arch/mvme68k/tags
d21 3
a23 3
SMVME68K=$S/arch/mvme68k/dev/*.[ch] $S/arch/mvme68k/include/*.[ch] \
	$S/arch/mvme68k/mvme68k/*.[ch]
AMVME68K=$S/arch/mvme68k/mvme68k/*.s $S/lib/libkern/arch/m68k/*.[sS]
d26 1
a26 1
	-ctags -wdtf ${TMVEM68K} ${COMM} ${SMVME68K}
d30 1
a30 1
	sort -o ${TMVEM68K} ${TMVEM68K}
d35 1
@


1.7
log
@Fix busted links and tags targets.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.6 1996/10/01 20:01:25 deraadt Exp $
d22 1
a22 1
	/sys/dev/rcons/*.[ch] /sys/arch/mvme68k/mvme68k/*.[ch]
@


1.6
log
@traverse stand only once
@
text
@d1 1
a1 1
#	$OpenBSD$
d11 1
d17 2
d22 1
a22 1
	/sys/arch/mvme68k/rcons/*.[ch] /sys/arch/mvme68k/mvme68k/*.[ch] \
@


1.5
log
@build stand as well
@
text
@d11 1
a11 2
SUBDIR=	stand

a27 2

SUBDIR+=stand ../m68k
@


1.4
log
@add OpenBSD header
@
text
@d11 2
d35 1
@


1.3
log
@../m68k is a subdir
@
text
@d1 1
a1 1
#	$Id: Makefile,v 1.2 1995/11/07 08:48:35 deraadt Exp $
@


1.2
log
@$Id$ throughout
update many copyrights
@
text
@d1 1
a1 1
#	$Id$
d28 1
a28 1
SUBDIR+=stand
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
#	$NetBSD: Makefile,v 1.1.1.1 1995/07/25 23:11:53 chuck Exp $
d3 3
a5 1
SUBDIR=	stand
d7 26
a32 1
.include <bsd.subdir.mk>
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@


1.1.1.2
log
@mvme68k port by me. some parts by dale rahn.
@
text
@d1 1
a1 1
#	$NetBSD: Makefile,v 1.3 1994/11/20 20:51:32 deraadt Exp $
d3 1
a3 3
# from: @@(#)Makefile	8.1 (Berkeley) 6/11/93
#
# Makefile for mvme68k links, tags file
d5 1
a5 26
NOPROG=	noprog
NOMAN=	noman
NOOBJ=	noobj

DIRS=	conf dev include mvme68k

links::
	-for i in ${DIRS}; do \
	    (cd $$i && { rm -f tags; ln -s ${SYSTAGS} tags; }) done

MVME68K=/sys/arch/mvme68k/dev/*.[ch] /sys/arch/mvme68k/include/*.[ch] \
	/sys/arch/mvme68k/rcons/*.[ch] /sys/arch/mvme68k/mvme68k/*.[ch] \
AMVME68K=/sys/arch/mvme68k/mvme68k/*.s

tags:
	-ctags -wdt ${COMM} ${MVME68K}
	egrep "^ENTRY(.*)|^ALTENTRY(.*)" ${AMVME68K} | \
	    sed "s;\([^:]*\):\([^(]*\)(\([^, )]*\)\(.*\);\3 \1 /^\2(\3\4$$/;" \
		>> tags
	sort -o tags tags

SUBDIR+=stand

obj:	_SUBDIRUSE

.include <bsd.prog.mk>
@
