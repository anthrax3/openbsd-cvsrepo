head	1.12;
access;
symbols
	OPENBSD_5_5:1.11.0.6
	OPENBSD_5_5_BASE:1.11
	OPENBSD_5_4:1.11.0.2
	OPENBSD_5_4_BASE:1.11
	OPENBSD_5_3:1.10.0.2
	OPENBSD_5_3_BASE:1.10
	OPENBSD_5_2:1.7.0.28
	OPENBSD_5_2_BASE:1.7
	OPENBSD_5_1_BASE:1.7
	OPENBSD_5_1:1.7.0.26
	OPENBSD_5_0:1.7.0.24
	OPENBSD_5_0_BASE:1.7
	OPENBSD_4_9:1.7.0.22
	OPENBSD_4_9_BASE:1.7
	OPENBSD_4_8:1.7.0.20
	OPENBSD_4_8_BASE:1.7
	OPENBSD_4_7:1.7.0.16
	OPENBSD_4_7_BASE:1.7
	OPENBSD_4_6:1.7.0.18
	OPENBSD_4_6_BASE:1.7
	OPENBSD_4_5:1.7.0.14
	OPENBSD_4_5_BASE:1.7
	OPENBSD_4_4:1.7.0.12
	OPENBSD_4_4_BASE:1.7
	OPENBSD_4_3:1.7.0.10
	OPENBSD_4_3_BASE:1.7
	OPENBSD_4_2:1.7.0.8
	OPENBSD_4_2_BASE:1.7
	OPENBSD_4_1:1.7.0.6
	OPENBSD_4_1_BASE:1.7
	OPENBSD_4_0:1.7.0.4
	OPENBSD_4_0_BASE:1.7
	OPENBSD_3_9:1.7.0.2
	OPENBSD_3_9_BASE:1.7
	OPENBSD_3_8:1.5.0.6
	OPENBSD_3_8_BASE:1.5
	OPENBSD_3_7:1.5.0.4
	OPENBSD_3_7_BASE:1.5
	OPENBSD_3_6:1.5.0.2
	OPENBSD_3_6_BASE:1.5
	SMP_SYNC_A:1.4
	SMP_SYNC_B:1.4
	OPENBSD_3_5:1.4.0.6
	OPENBSD_3_5_BASE:1.4
	OPENBSD_3_4:1.4.0.4
	OPENBSD_3_4_BASE:1.4
	UBC_SYNC_A:1.4
	OPENBSD_3_3:1.4.0.2
	OPENBSD_3_3_BASE:1.4
	OPENBSD_3_2:1.3.0.14
	OPENBSD_3_2_BASE:1.3
	OPENBSD_3_1:1.3.0.12
	OPENBSD_3_1_BASE:1.3
	UBC_SYNC_B:1.3
	UBC:1.3.0.10
	UBC_BASE:1.3
	OPENBSD_3_0:1.3.0.8
	OPENBSD_3_0_BASE:1.3
	OPENBSD_2_9:1.3.0.6
	OPENBSD_2_9_BASE:1.3
	OPENBSD_2_8:1.3.0.4
	OPENBSD_2_8_BASE:1.3
	OPENBSD_2_7:1.3.0.2
	OPENBSD_2_7_BASE:1.3
	SMP:1.2.0.16
	SMP_BASE:1.2
	kame_19991208:1.2
	OPENBSD_2_6:1.2.0.14
	OPENBSD_2_6_BASE:1.2
	OPENBSD_2_5:1.2.0.12
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.2.0.10
	OPENBSD_2_4_BASE:1.2
	OPENBSD_2_3:1.2.0.8
	OPENBSD_2_3_BASE:1.2
	OPENBSD_2_2:1.2.0.6
	OPENBSD_2_2_BASE:1.2
	OPENBSD_2_1:1.2.0.4
	OPENBSD_2_1_BASE:1.2
	OPENBSD_2_0:1.2.0.2
	OPENBSD_2_0_BASE:1.2
	theo-1:1.1.1.2
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.12
date	2014.03.18.22.36.35;	author miod;	state dead;
branches;
next	1.11;

1.11
date	2013.05.12.08.10.07;	author miod;	state Exp;
branches;
next	1.10;

1.10
date	2013.02.10.20.27.18;	author miod;	state Exp;
branches;
next	1.9;

1.9
date	2012.12.31.21.35.32;	author miod;	state Exp;
branches;
next	1.8;

1.8
date	2012.11.04.13.36.47;	author miod;	state Exp;
branches;
next	1.7;

1.7
date	2006.01.10.07.36.29;	author miod;	state Exp;
branches;
next	1.6;

1.6
date	2005.12.30.02.03.49;	author millert;	state Exp;
branches;
next	1.5;

1.5
date	2004.07.13.21.03.38;	author marc;	state Exp;
branches;
next	1.4;

1.4
date	2002.12.02.09.00.24;	author miod;	state Exp;
branches;
next	1.3;

1.3
date	2000.03.03.00.54.52;	author todd;	state Exp;
branches
	1.3.10.1;
next	1.2;

1.2
date	95.11.07.08.50.33;	author deraadt;	state Exp;
branches
	1.2.16.1;
next	1.1;

1.1
date	95.10.18.08.51.14;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.51.14;	author deraadt;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	95.10.18.10.43.54;	author deraadt;	state Exp;
branches;
next	;

1.2.16.1
date	2000.03.24.09.08.09;	author niklas;	state Exp;
branches;
next	1.2.16.2;

1.2.16.2
date	2003.03.27.23.32.17;	author niklas;	state Exp;
branches;
next	;

1.3.10.1
date	2003.05.19.21.45.32;	author tedu;	state Exp;
branches;
next	;


desc
@@


1.12
log
@Retire hp300, mvme68k and mvme88k ports. These ports have no users, keeping
this hardware alive is becoming increasingly difficult, and I should heed the
message sent by the three disks which have died on me over the last few days.

Noone sane will mourn these ports anyway. So long, and thanks for the fish.
@
text
@#	$OpenBSD: Makefile.inc,v 1.11 2013/05/12 08:10:07 miod Exp $

MDEC_DIR?=/usr/mdec
CFLAGS+=-Wall -Werror -fno-stack-protector
CFLAGS+=-fno-builtin-printf -fno-builtin-putchar -fno-builtin-vprintf
CFLAGS+=-DHEAP_START=${HEAP_START}

# Load addresses for first and second stage bootstraps
STAGE1_RELOC=	0x00100000 
STAGE2_RELOC=	0x005f0000 

# Base of the heap (ethernet buffers will be allocated below it)
HEAP_START=    0x00700000
@


1.11
log
@Lower heap location and load address by 1MB for the secondary boot loaders,
to fit 8MB boards.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.10 2013/02/10 20:27:18 miod Exp $
@


1.10
log
@switch m68k ports to gcc3
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.9 2012/12/31 21:35:32 miod Exp $
d10 1
a10 1
STAGE2_RELOC=	0x006f0000 
d13 1
a13 1
HEAP_START=    0x00800000
@


1.9
log
@Switch mvme68k boot blocks to use the MI libsa loadfile routines to load
kernel images, instead of their own; gives us the ability to load ELF kernels
for free.

Fix many warnings, and generally make the code closer to the current mvme88k
boot blocks to help diffability.

Rewrite bugcrt and bugexec() as a short assembly shim around a
compiler-independent C block; this will allow compilers other than gcc2 to be
used, and removes the need for bugcrt to be compiled without optimization.

Crank all bootblocks versions.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.8 2012/11/04 13:36:47 miod Exp $
d5 1
a5 1
#CFLAGS+=-fno-builtin-printf -fno-builtin-putchar -fno-builtin-vprintf
@


1.8
log
@Make the s-records boot loader use the same stage1/stage2 addresses as the
other boot blocks. Crank stage1 from 64KB to 1MB to accomodate non-mvme147 BUG.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.7 2006/01/10 07:36:29 miod Exp $
d4 3
a6 1
CFLAGS+=	-fno-stack-protector
d9 5
a13 2
STAGE1_RELOC=0x100000 
STAGE2_RELOC=0x6F0000 
@


1.7
log
@Really pass -fno-stack-protector in CFLAGS as intended, and define the
load addresses in one single place; from mvme88k
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.6 2005/12/30 02:03:49 millert Exp $
d7 1
a7 1
STAGE1_RELOC=0x10000 
@


1.6
log
@Now that errno.h and sys/errno.h are separate header files there is no
need to use the -Derrno=errno workaround added when __errno() was
introduced.  OK deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.5 2004/07/13 21:03:38 marc Exp $
d5 4
@


1.5
log
@errno changes, lib major version bumps, and general flag day
To build you must:
cd /usr/src && make obj && make includes
cd lib/libc && make depend && make && NOMAN=1 sudo make install
cd /usr/src && make build
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.4 2002/12/02 09:00:24 miod Exp $
d4 1
a4 1
CFLAGS+=	-fno-stack-protector -Derrno=errno
@


1.4
log
@Import propolice (http://www.trl.ibm.com/projects/security/ssp), a stack
attack protection scheme, into gcc.

This protection is enabled by default. It can be turned off by using the
-fno-stack-protector flag.

Code by Hiroaki Etoh (etoh at jp dot ibm dot com); work on openbsd-specific
integration by fgsch@@, deraadt@@ and myself; tests by fgsch@@, naddy@@ and
myself; beer drinking by myself.

Please note that system upgrades with this new code will require a new
libc and ld.so to be build and installed before the propolice-enabled
compiler can be installed.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.3 2000/03/03 00:54:52 todd Exp $
d4 1
a4 1
CFLAGS+=	-fno-stack-protector
@


1.3
log
@$OpenBSD$
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.2 1995/11/07 08:50:33 deraadt Exp $
d4 1
@


1.3.10.1
log
@sync
@
text
@d1 1
a1 1
#	$OpenBSD$
a3 1
CFLAGS+=	-fno-stack-protector
@


1.2
log
@$Id$ throughout
update many copyrights
@
text
@d1 1
a1 1
#	$Id$
@


1.2.16.1
log
@Sync with -current
@
text
@d1 1
a1 1
#	$OpenBSD$
@


1.2.16.2
log
@Sync the SMP branch with 3.3
@
text
@a3 1
CFLAGS+=	-fno-stack-protector
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
#	$NetBSD: Makefile.inc,v 1.1.1.1 1995/07/25 23:12:21 chuck Exp $
a2 14
.if defined(SA_PROG)

# Must have S=/usr/src/sys (or equivalent)
# But note: this is w.r.t. a subdirectory
S=	../../../..

RELOC?= 240000
DEFS?= -DSTANDALONE
INCL?= -I. -I../libsa -I${S}/lib/libsa -I${S}
COPTS?= -msoft-float ${DEFS} ${INCL}

LIBSA?= ../libsa
SRTOBJ?= ${LIBSA}/SRT0.o ${LIBSA}/SRT1.o
LIBS?= ${LIBSA}/libsa.a
a3 20

SRCS?=	${SA_PROG}.c
OBJS?=	${SRTOBJ} ${SRCS:S/.c/.o/g}

${SA_PROG}.bin : ${SA_PROG}
	cp ${SA_PROG} a.out ; strip a.out
	dd ibs=32 skip=1 if=a.out of=$@@
	-rm -f a.out

${SA_PROG} : ${OBJS} ${LIBS}
	${LD} -N -T ${RELOC} -e start -o $@@ ${OBJS} ${LIBS}
	@@size $@@

.if !target(clean)
clean:
	-rm -f a.out [Ee]rrs mklog core *.core
	-rm -f ${SA_PROG} ${SA_PROG}.bin ${OBJS} ${CLEANFILES}
.endif

.endif
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@


1.1.1.2
log
@mvme68k port by me. some parts by dale rahn.
@
text
@d1 1
a1 1
#	$NetBSD: Makefile.inc,v 1.2 1995/06/09 22:03:46 gwr Exp $
d3 14
d18 20
@
