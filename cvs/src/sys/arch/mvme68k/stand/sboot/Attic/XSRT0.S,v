head	1.7;
access;
symbols
	OPENBSD_5_5:1.6.0.8
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.6.0.4
	OPENBSD_5_4_BASE:1.6
	OPENBSD_5_3:1.6.0.2
	OPENBSD_5_3_BASE:1.6
	OPENBSD_5_2:1.5.0.38
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.36
	OPENBSD_5_0:1.5.0.34
	OPENBSD_5_0_BASE:1.5
	OPENBSD_4_9:1.5.0.32
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.5.0.30
	OPENBSD_4_8_BASE:1.5
	OPENBSD_4_7:1.5.0.26
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.5.0.28
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.5.0.24
	OPENBSD_4_5_BASE:1.5
	OPENBSD_4_4:1.5.0.22
	OPENBSD_4_4_BASE:1.5
	OPENBSD_4_3:1.5.0.20
	OPENBSD_4_3_BASE:1.5
	OPENBSD_4_2:1.5.0.18
	OPENBSD_4_2_BASE:1.5
	OPENBSD_4_1:1.5.0.16
	OPENBSD_4_1_BASE:1.5
	OPENBSD_4_0:1.5.0.14
	OPENBSD_4_0_BASE:1.5
	OPENBSD_3_9:1.5.0.12
	OPENBSD_3_9_BASE:1.5
	OPENBSD_3_8:1.5.0.10
	OPENBSD_3_8_BASE:1.5
	OPENBSD_3_7:1.5.0.8
	OPENBSD_3_7_BASE:1.5
	OPENBSD_3_6:1.5.0.6
	OPENBSD_3_6_BASE:1.5
	SMP_SYNC_A:1.5
	SMP_SYNC_B:1.5
	OPENBSD_3_5:1.5.0.4
	OPENBSD_3_5_BASE:1.5
	OPENBSD_3_4:1.5.0.2
	OPENBSD_3_4_BASE:1.5
	UBC_SYNC_A:1.4
	OPENBSD_3_3:1.4.0.32
	OPENBSD_3_3_BASE:1.4
	OPENBSD_3_2:1.4.0.30
	OPENBSD_3_2_BASE:1.4
	OPENBSD_3_1:1.4.0.28
	OPENBSD_3_1_BASE:1.4
	UBC_SYNC_B:1.4
	UBC:1.4.0.26
	UBC_BASE:1.4
	OPENBSD_3_0:1.4.0.24
	OPENBSD_3_0_BASE:1.4
	OPENBSD_2_9:1.4.0.22
	OPENBSD_2_9_BASE:1.4
	OPENBSD_2_8:1.4.0.20
	OPENBSD_2_8_BASE:1.4
	OPENBSD_2_7:1.4.0.18
	OPENBSD_2_7_BASE:1.4
	SMP:1.4.0.16
	SMP_BASE:1.4
	kame_19991208:1.4
	OPENBSD_2_6:1.4.0.14
	OPENBSD_2_6_BASE:1.4
	OPENBSD_2_5:1.4.0.12
	OPENBSD_2_5_BASE:1.4
	OPENBSD_2_4:1.4.0.10
	OPENBSD_2_4_BASE:1.4
	OPENBSD_2_3:1.4.0.8
	OPENBSD_2_3_BASE:1.4
	OPENBSD_2_2:1.4.0.6
	OPENBSD_2_2_BASE:1.4
	OPENBSD_2_1:1.4.0.4
	OPENBSD_2_1_BASE:1.4
	OPENBSD_2_0:1.4.0.2
	OPENBSD_2_0_BASE:1.4
	theo-1:1.1.1.1;
locks; strict;
comment	@# @;


1.7
date	2014.03.18.22.36.35;	author miod;	state dead;
branches;
next	1.6;

1.6
date	2013.02.02.13.36.06;	author miod;	state Exp;
branches;
next	1.5;

1.5
date	2003.06.04.16.36.14;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	96.05.29.15.22.59;	author chuck;	state Exp;
branches
	1.4.16.1;
next	1.3;

1.3
date	96.04.28.10.49.33;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	95.11.07.08.51.07;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.10.44.11;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.10.44.11;	author deraadt;	state Exp;
branches;
next	;

1.4.16.1
date	2003.06.07.11.13.16;	author ho;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Retire hp300, mvme68k and mvme88k ports. These ports have no users, keeping
this hardware alive is becoming increasingly difficult, and I should heed the
message sent by the three disks which have died on me over the last few days.

Noone sane will mourn these ports anyway. So long, and thanks for the fish.
@
text
@/*	$OpenBSD: XSRT0.S,v 1.6 2013/02/02 13:36:06 miod Exp $ */

/*
 * Copyright (c) 1995 Theo de Raadt
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS
 * OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
 * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 *
 * Copyright (c) 1995 Charles D. Cranor
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. All advertising materials mentioning features or use of this software
 *    must display the following acknowledgement:
 *      This product includes software developed by Charles D. Cranor.
 * 4. The name of the author may not be used to endorse or promote products
 *    derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
 * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
 * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
 * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
 * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

		| start at 0x4000, load at 0xa000, stack at 0x9ff0.
		.text
		.globl __start
__start:	movb	#0,reboot
		jra	Ldoit
restart:	movb	#1,reboot		| fall through

Ldoit:		movl	#0x00006ff0,%sp
		jsr	main

		.globl	__main
__main:		rts

Lname:
		.ascii "sboot\0"

		.globl  go
go:
		clrl	%d0			| dev lun
		clrl	%d1			| ctrl lun
		movl	#0x2c, %d4		| flags for IPL
		movl	#0xfffe1800, %a0	| address of "disk" ctrl
		movl	%sp@@(4), %a1		| entry point of loaded program
		movl	%d0, %a2		| media config block (NULL)
		movl	%sp@@(8), %a3		| nb args (start)
		movl	%sp@@(12), %a4		| nb end args
		movl	#Lname, %a5		| args
		movl	#Lname+5, %a6		| end args
						| SRT0 will set stack
		jmp	%a1@@			| GO!
@


1.6
log
@mvme68k ELF bits. Boot block updates heavily based upon the recent mvme88k
a.out->ELF transition.
@
text
@d1 1
a1 1
/*	$OpenBSD: XSRT0.S,v 1.5 2003/06/04 16:36:14 deraadt Exp $ */
@


1.5
log
@more term 3 & 4 from various developers, with permission of course
@
text
@d1 1
a1 1
/*	$OpenBSD: XSRT0.S,v 1.4 1996/05/29 15:22:59 chuck Exp $ */
d58 2
a59 2
		.globl start
start:		movb	#0,_reboot
d61 1
a61 1
restart:	movb	#1,_reboot		| fall through
d63 2
a64 2
Ldoit:		movl	#0x00006ff0,sp
		jsr	_main
d66 2
a67 2
		.globl	___main
___main:	rts
d70 1
a70 1
	.ascii "sboot\0"
d72 14
a85 14
.globl  _go
_go:
	clrl	d0		| dev lun
	clrl	d1		| ctrl lun
	movl	#0x2c, d4	| flags for IPL
	movl	#0xfffe1800, a0	| address of "disk" ctrl
	movl	sp@@(4), a1	| entry point of loaded program
	movl	d0, a2		| media config block (NULL)
	movl	sp@@(8), a3	| nb args (start)
	movl	sp@@(12), a4	| nb end args
	movl	#Lname, a5	| args
	movl	#Lname+5, a6	| end args
				| SRT0 will set stack
	jmp	a1@@		| GO!
@


1.4
log
@new "go"
@
text
@d1 1
a1 1
/*	$OpenBSD$ */
a13 6
 * 3. All advertising materials mentioning features or use of this software
 *    must display the following acknowledgement:
 *	This product includes software developed under OpenBSD by
 *	Theo de Raadt for Willowglen Singapore.
 * 4. The name of the author may not be used to endorse or promote products
 *    derived from this software without specific prior written permission.
@


1.4.16.1
log
@Sync SMP branch to -current
@
text
@d1 1
a1 1
/*	$OpenBSD: XSRT0.S,v 1.4 1996/05/29 15:22:59 chuck Exp $ */
d14 6
@


1.3
log
@add OpenBSD header
@
text
@d74 18
@


1.2
log
@$Id$ throughout
update many copyrights
@
text
@d1 2
@


1.1
log
@Initial revision
@
text
@d2 29
@


1.1.1.1
log
@mvme68k port by me. some parts by dale rahn.
@
text
@@
