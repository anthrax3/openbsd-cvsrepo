head	1.18;
access;
symbols
	OPENBSD_5_5:1.17.0.4
	OPENBSD_5_5_BASE:1.17
	OPENBSD_5_4:1.16.0.8
	OPENBSD_5_4_BASE:1.16
	OPENBSD_5_3:1.16.0.6
	OPENBSD_5_3_BASE:1.16
	OPENBSD_5_2:1.16.0.4
	OPENBSD_5_2_BASE:1.16
	OPENBSD_5_1_BASE:1.16
	OPENBSD_5_1:1.16.0.2
	OPENBSD_5_0:1.15.0.2
	OPENBSD_5_0_BASE:1.15
	OPENBSD_4_9:1.14.0.8
	OPENBSD_4_9_BASE:1.14
	OPENBSD_4_8:1.14.0.6
	OPENBSD_4_8_BASE:1.14
	OPENBSD_4_7:1.14.0.2
	OPENBSD_4_7_BASE:1.14
	OPENBSD_4_6:1.14.0.4
	OPENBSD_4_6_BASE:1.14
	OPENBSD_4_5:1.11.0.2
	OPENBSD_4_5_BASE:1.11
	OPENBSD_4_4:1.10.0.2
	OPENBSD_4_4_BASE:1.10
	OPENBSD_4_3:1.9.0.8
	OPENBSD_4_3_BASE:1.9
	OPENBSD_4_2:1.9.0.6
	OPENBSD_4_2_BASE:1.9
	OPENBSD_4_1:1.9.0.4
	OPENBSD_4_1_BASE:1.9
	OPENBSD_4_0:1.9.0.2
	OPENBSD_4_0_BASE:1.9
	OPENBSD_3_9:1.7.0.2
	OPENBSD_3_9_BASE:1.7
	OPENBSD_3_8:1.6.0.2
	OPENBSD_3_8_BASE:1.6
	OPENBSD_3_7:1.5.0.2
	OPENBSD_3_7_BASE:1.5
	OPENBSD_3_6:1.4.0.4
	OPENBSD_3_6_BASE:1.4
	SMP_SYNC_A:1.4
	SMP_SYNC_B:1.4
	OPENBSD_3_5:1.4.0.2
	OPENBSD_3_5_BASE:1.4
	OPENBSD_3_4:1.3.0.2
	OPENBSD_3_4_BASE:1.3
	UBC_SYNC_A:1.3
	SMP:1.2.0.8
	OPENBSD_3_3:1.2.0.6
	OPENBSD_3_3_BASE:1.2
	UBC_SYNC_B:1.2
	OPENBSD_3_2:1.2.0.4
	OPENBSD_3_2_BASE:1.2
	UBC:1.2.0.2;
locks; strict;
comment	@# @;


1.18
date	2014.03.18.22.36.34;	author miod;	state dead;
branches;
next	1.17;

1.17
date	2013.12.01.21.56.42;	author miod;	state Exp;
branches;
next	1.16;

1.16
date	2011.11.08.19.22.13;	author deraadt;	state Exp;
branches;
next	1.15;

1.15
date	2011.06.29.20.52.09;	author matthew;	state Exp;
branches;
next	1.14;

1.14
date	2009.04.12.16.11.40;	author deraadt;	state Exp;
branches;
next	1.13;

1.13
date	2009.03.01.22.08.13;	author miod;	state Exp;
branches;
next	1.12;

1.12
date	2009.03.01.21.40.49;	author miod;	state Exp;
branches;
next	1.11;

1.11
date	2009.02.17.22.28.38;	author miod;	state Exp;
branches;
next	1.10;

1.10
date	2008.06.08.20.37.39;	author deraadt;	state Exp;
branches;
next	1.9;

1.9
date	2006.06.24.14.07.06;	author miod;	state Exp;
branches;
next	1.8;

1.8
date	2006.04.21.22.21.53;	author miod;	state Exp;
branches;
next	1.7;

1.7
date	2005.11.27.14.19.07;	author miod;	state Exp;
branches;
next	1.6;

1.6
date	2005.08.01.12.04.52;	author miod;	state Exp;
branches;
next	1.5;

1.5
date	2004.09.16.09.14.03;	author mickey;	state Exp;
branches;
next	1.4;

1.4
date	2004.01.04.00.29.50;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	2003.05.13.22.45.10;	author miod;	state Exp;
branches;
next	1.2;

1.2
date	2002.04.28.14.47.09;	author miod;	state Exp;
branches
	1.2.2.1
	1.2.8.1;
next	1.1;

1.1
date	2002.04.17.01.59.33;	author deraadt;	state Exp;
branches;
next	;

1.2.2.1
date	2002.06.11.03.36.49;	author art;	state Exp;
branches;
next	1.2.2.2;

1.2.2.2
date	2003.05.19.21.45.31;	author tedu;	state Exp;
branches;
next	;

1.2.8.1
date	2003.05.16.00.29.39;	author niklas;	state Exp;
branches;
next	1.2.8.2;

1.2.8.2
date	2004.02.19.10.49.04;	author niklas;	state Exp;
branches;
next	;


desc
@@


1.18
log
@Retire hp300, mvme68k and mvme88k ports. These ports have no users, keeping
this hardware alive is becoming increasingly difficult, and I should heed the
message sent by the three disks which have died on me over the last few days.

Noone sane will mourn these ports anyway. So long, and thanks for the fish.
@
text
@#	$OpenBSD: RAMDISK,v 1.17 2013/12/01 21:56:42 miod Exp $

machine		mvme68k m68k

# 2 meg ramdisk
option		MINIROOTSIZE=4096
option		RAMDISK_HOOKS

option		M68030		# support for 030
option		M68040		# support for 040
option		M68060		# support for 060
option		FPSP		# MC68040 floating point support
option		M060SP		# ...and MC68060 support package

option		MVME141		# (requires M68030)
option		MVME147		# (requires M68030)
option		MVME162		# (requires M68040, FPSP)
option		MVME165		# (requires M68040, FPSP)
option		MVME167		# includes 166 (requires M68040, FPSP)
option		MVME172		# (requires M68060, 060SP, FPSP)
option		MVME177		# includes 176 (requires M68060, 060SP, FPSP)

maxusers	32

option		SCSITERSE
option		SMALL_KERNEL
option		NO_PROPOLICE
option		TIMEZONE=0	# time zone to adjust RTC time by
option		DST=0		# daylight saving time used by RTC
#makeoptions	DEBUG="-g"	# compile full symbol table
option		FFS		# UFS
option		NFSCLIENT	# Network File System client
option		CD9660		# ISO 9660 + Rock Ridge file system
option		INET		# IP + ICMP + TCP + UDP
option		INET6
option		BOOT_CONFIG	# boot-time kernel config

config		bsd		root rd0a swap on rd0b

mainbus0 at root

# MVME141
ofobio0	at mainbus0 addr 0xfff50000
clock0	at ofobio0 ipl 5
nvram0	at ofobio0 offset 0x00000
#vsb0	at ofobio0 offset 0x50000
vme0	at ofobio0 offset 0x60000
dart0	at ofobio0 offset 0x20000 ipl 5

# MVME147
pcc0	at mainbus0 addr 0xfffe0000
clock0	at pcc0 ipl 5
nvram0	at pcc0 offset 0x0000
zs0	at pcc0 offset 0x3000 ipl 4
zs1	at pcc0 offset 0x3800 ipl 4
zstty*	at zs?
le*	at pcc0 offset 0x1800 ipl 3
wdsc0	at pcc0 offset 0x4000 ipl 2
#lp0	at pcc0 ipl 1
vme0	at pcc0 offset 0x2000

# MVME162
mc0	at mainbus0 addr 0xfff00000
clock0	at mc0 ipl 5
nvram0	at mc0 offset 0xc0000
zs0	at mc0 offset 0x45000 ipl 4
zs1	at mc0 offset 0x45800 ipl 4
ie0	at mc0 offset 0x46000 ipl 3
osiop0	at mc0 offset 0x47000 ipl 2
memc0	at mc0 offset 0x43000
memc1	at mc0 offset 0x43100
#ipic0	at mc0 offset 0xbc000
vme0	at mc0 offset 0x40000
#flash0	at mainbus0 addr 0xffa00000
#sram0	at mainbus0 addr 0xffe00000

#fooip*	at ipic? manu 0x11 prod 0x22 ipl 1

# MVME165
lrc0	at mainbus0 addr 0xfff90000
clock0	at lrc0 ipl 5
#vsb0	at lrc0 offset 0x10000 ipl 4
vme0	at lrc0 offset 0x20000
nvram0	at lrc0 offset 0x30000
dart0	at lrc0 offset 0x40000 ipl 5

# MVME166/167/177
pcctwo0 at mainbus0 addr 0xfff00000
clock0	at pcctwo0 ipl 5
nvram0	at pcctwo0 offset 0xc0000
ie0	at pcctwo0 offset 0x46000 ipl 3
osiop0	at pcctwo0 offset 0x47000 ipl 2
cl0	at pcctwo0 offset 0x45000 ipl 3
vme0	at pcctwo0 offset 0x40000
#lptwo0	at pcctwo0 ipl 1
memc0	at pcctwo0 offset 0x43000
memc1	at pcctwo0 offset 0x43100
#sram0	at mainbus0 addr 0xffe00000

vmes0	at vme0

# MVME327
vsbic*	at vmes0 addr 0xffffa600 ipl 2 vec 0x8c
vsbic*	at vmes0 addr 0xffffa700 ipl 2 vec 0x8d
# MVME328, MVME328XT
vs*	at vmes0 addr 0xffff9000 ipl 2 vec 0x80
vs*	at vmes0 addr 0xffff9800 ipl 2 vec 0x82
vs*	at vmes0 addr 0xffff4800 ipl 2 vec 0x84
vs*	at vmes0 addr 0xffff5800 ipl 2 vec 0x86
vs*	at vmes0 addr 0xffff7000 ipl 2 vec 0x88
vs*	at vmes0 addr 0xffff7800 ipl 2 vec 0x8a
# MVME376
le*	at vmes0 addr 0xffff1200 ipl 3 vec 0x74
le*	at vmes0 addr 0xffff1400 ipl 3 vec 0x75
le*	at vmes0 addr 0xffff1600 ipl 3 vec 0x76

vmel0	at vme0


scsibus* at scsi?
sd*	at scsibus?
st*	at scsibus?
cd*	at scsibus?

pseudo-device	loop	1		# network loopback
pseudo-device	bpfilter 1		# packet filter
pseudo-device	rd	1		# ramdisk
@


1.17
log
@switch mvme68k to the MI zs(4) driver.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.16 2011/11/08 19:22:13 deraadt Exp $
@


1.16
log
@consistant "config bsd" lines; ok miod
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.16 2011/11/08 19:17:12 deraadt Exp $
d56 1
d67 1
a67 1
zs1	at mc0 offset 0x45801 ipl 4
@


1.15
log
@Replace all instances of "scsibus* at hba?" with a single "scsibus* at
scsi?" rule, similar to how ethernet PHY drivers attach at mii.

Discussed on icb.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.14 2009/04/12 16:11:40 deraadt Exp $
d38 1
a38 1
config		bsd		root rd0 swap on rd0b
@


1.14
log
@need nvram to link; ok miod
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.13 2009/03/01 22:08:13 miod Exp $
a117 4
scsibus* at osiop?
scsibus* at vs?
scsibus* at vsbic?
scsibus* at wdsc?
d119 1
@


1.13
log
@Support for MVME141 boards. Tested with both VME and VSB memory boards
(and MVME327 SCSI and MVME376 Ethernet, to provide a complete system).
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.12 2009/03/01 21:40:49 miod Exp $
d45 1
a45 1
#nvram0	at ofobio0 offset 0x00000
d53 1
a53 1
#nvram0	at pcc0 offset 0x0000
d64 1
a64 1
#nvram0	at mc0 offset 0xc0000
d83 1
a83 1
#nvram0	at lrc0 offset 0x30000
d89 1
a89 1
#nvram0	at pcctwo0 offset 0xc0000
@


1.12
log
@Support for MVME165 board - code written in april 2006, eventually debugged
last month.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.11 2009/02/17 22:28:38 miod Exp $
d15 1
d18 1
d21 1
a21 1
option		MVME177		# (requires M68060, 060SP, FPSP)
d41 8
@


1.11
log
@Add real bus_space and bus_dma to mvme68k, so that it can benefit from
recent driver work; this gives us better osiop and vs drivers, vsbic
(although currently disabled on 68060 boards until more bugs are fixed),
and the ability to boot and root off vs and vsbic.

Existing code is not modified and still uses memory mapped structures;
this might change eventually as more code gets factorized and moved to
MI land.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.10 2008/06/08 20:37:39 deraadt Exp $
d43 1
a43 1
nvram0	at pcc0 offset 0x0000
d48 1
a48 1
lp0	at pcc0 ipl 1
d54 1
a54 1
nvram0	at mc0 offset 0xc0000
d61 1
a61 1
ipic0	at mc0 offset 0xbc000
d63 2
a64 2
flash0	at mainbus0 addr 0xffa00000
sram0	at mainbus0 addr 0xffe00000
d68 8
d79 1
a79 1
nvram0	at pcctwo0 offset 0xc0000
d87 1
a87 1
sram0	at mainbus0 addr 0xffe00000
@


1.10
log
@alpha/conf/RAMDISK
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.9 2006/06/24 14:07:06 miod Exp $
d58 1
a58 1
ssh0	at mc0 offset 0x47000 ipl 2
d73 1
a73 1
ssh0	at pcctwo0 offset 0x47000 ipl 2
d83 4
d93 1
a93 1

d100 3
a103 2
scsibus* at ssh?
scsibus* at vs?
@


1.9
log
@Configure network devices at ipl 3, not ipl 1.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.8 2006/04/21 22:21:53 miod Exp $
a31 1
option		FIFO		# FIFOs; RECOMMENDED
@


1.8
log
@Since bugtty (and BUG routines in general) can only work if we keep the BUG
mapped, and we don't, do not bother carrying this code around - it can not
be used anyway.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.7 2005/11/27 14:19:07 miod Exp $
d47 1
a47 1
le*	at pcc0 offset 0x1800 ipl 1
d58 1
a58 1
ie0	at mc0 offset 0x46000 ipl 1
d73 1
a73 1
ie0	at pcctwo0 offset 0x46000 ipl 1
d91 3
a93 3
le*	at vmes0 addr 0xffff1200 ipl 1 vec 0x74
le*	at vmes0 addr 0xffff1400 ipl 1 vec 0x75
le*	at vmes0 addr 0xffff1600 ipl 1 vec 0x76
@


1.7
log
@Get rid of the `len' locator for VME devices, since mappings have a page
granularity anyway; devices who would want more than one page mapped in
order to probe for the hardware can take appropriate action in their cfmatch
routine anyway.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.6 2005/08/01 12:04:52 miod Exp $
a81 2
bugtty0 at mainbus0

a103 4

#si0	at vmes0 addr 0xff200000 ipl 2 vec 0x40
#nxdc0	at vmes0 addr 0xff00ee80 ipl 2 vec 0x44
#xd*	at xdc?
@


1.6
log
@Remove option FPU_EMULATE from the mvme68k kernels - first, it is misleading
as the mvme68k port does not provide the necessary MD parts of the FPU emulator;
second, because we do not run (yet) on FPUless mvme68k boards, although I have
a couple in the Attic...
cVS:
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.5 2004/09/16 09:14:03 mickey Exp $
d86 10
a95 10
vs*	at vmes0 addr 0xffff9000 ipl 2 vec 0x80 len 0x800
vs*	at vmes0 addr 0xffff9800 ipl 2 vec 0x82 len 0x800
vs*	at vmes0 addr 0xffff4800 ipl 2 vec 0x84 len 0x800
vs*	at vmes0 addr 0xffff5800 ipl 2 vec 0x86 len 0x800
vs*	at vmes0 addr 0xffff7000 ipl 2 vec 0x88 len 0x800
vs*	at vmes0 addr 0xffff7800 ipl 2 vec 0x8a len 0x800

le*	at vmes0 addr 0xffff1200 ipl 1 vec 0x74 len 0x100
le*	at vmes0 addr 0xffff1400 ipl 1 vec 0x75 len 0x100
le*	at vmes0 addr 0xffff1600 ipl 1 vec 0x76 len 0x100
@


1.5
log
@cleanup deafult locators (blah ?); please check that your most hated architecture is still fluffy (;
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.4 2004/01/04 00:29:50 deraadt Exp $
a13 1
option		FPU_EMULATE	# FPU emulation
@


1.4
log
@put INET6, rtsol, and ping6 onto media where it fits.  install.sub changes
which begin to enable use of this will follow at a later time.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.3 2003/05/13 22:45:10 miod Exp $
d104 3
a106 3
sd*	at scsibus? target ? lun ?
st*	at scsibus? target ? lun ?
cd*	at scsibus? target ? lun ?
d110 1
a110 1
#xd*	at xdc? target ?
@


1.3
log
@Add option NO_PROPOLICE, which explicitely disables the use of the propolice
stack protection when building kernels. Intended to be used on installation
media, with tight space constraints - currently, only added where
SMALL_KERNEL was already defined.

Not thoroughly tested, but requested by deraadt.
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.2 2002/04/28 14:47:09 miod Exp $
d35 1
@


1.2
log
@Shave a few more bytes off bsd.rd
@
text
@d1 1
a1 1
#	$OpenBSD: RAMDISK,v 1.1 2002/04/17 01:59:33 deraadt Exp $
d26 1
@


1.2.8.1
log
@merge the trunk so we will get the genfs and locking fixes
@
text
@d1 1
a1 1
#	$OpenBSD$
a25 1
option		NO_PROPOLICE
@


1.2.8.2
log
@Merge of current from two weeks agointo the SMP branch
@
text
@a34 1
option		INET6
@


1.2.2.1
log
@Sync UBC branch to -current
@
text
@d1 1
a1 1
#	$OpenBSD$
@


1.2.2.2
log
@sync
@
text
@a25 1
option		NO_PROPOLICE
@


1.1
log
@new RAMDISK config, much smaller
@
text
@d1 1
a1 1
#	$OpenBSD: GENERIC,v 1.20 2001/11/08 23:53:10 miod Exp $
d66 1
a66 1
fooip*	at ipic? manu 0x11 prod 0x22 ipl 1
@

