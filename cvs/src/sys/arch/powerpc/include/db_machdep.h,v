head	1.29;
access;
symbols
	OPENBSD_6_1_BASE:1.29
	OPENBSD_6_0:1.29.0.2
	OPENBSD_6_0_BASE:1.29
	OPENBSD_5_9:1.26.0.2
	OPENBSD_5_9_BASE:1.26
	OPENBSD_5_8:1.25.0.8
	OPENBSD_5_8_BASE:1.25
	OPENBSD_5_7:1.25.0.2
	OPENBSD_5_7_BASE:1.25
	OPENBSD_5_6:1.25.0.4
	OPENBSD_5_6_BASE:1.25
	OPENBSD_5_5:1.24.0.14
	OPENBSD_5_5_BASE:1.24
	OPENBSD_5_4:1.24.0.10
	OPENBSD_5_4_BASE:1.24
	OPENBSD_5_3:1.24.0.8
	OPENBSD_5_3_BASE:1.24
	OPENBSD_5_2:1.24.0.6
	OPENBSD_5_2_BASE:1.24
	OPENBSD_5_1_BASE:1.24
	OPENBSD_5_1:1.24.0.4
	OPENBSD_5_0:1.24.0.2
	OPENBSD_5_0_BASE:1.24
	OPENBSD_4_9:1.23.0.2
	OPENBSD_4_9_BASE:1.23
	OPENBSD_4_8:1.22.0.8
	OPENBSD_4_8_BASE:1.22
	OPENBSD_4_7:1.22.0.4
	OPENBSD_4_7_BASE:1.22
	OPENBSD_4_6:1.22.0.6
	OPENBSD_4_6_BASE:1.22
	OPENBSD_4_5:1.22.0.2
	OPENBSD_4_5_BASE:1.22
	OPENBSD_4_4:1.21.0.12
	OPENBSD_4_4_BASE:1.21
	OPENBSD_4_3:1.21.0.10
	OPENBSD_4_3_BASE:1.21
	OPENBSD_4_2:1.21.0.8
	OPENBSD_4_2_BASE:1.21
	OPENBSD_4_1:1.21.0.6
	OPENBSD_4_1_BASE:1.21
	OPENBSD_4_0:1.21.0.4
	OPENBSD_4_0_BASE:1.21
	OPENBSD_3_9:1.21.0.2
	OPENBSD_3_9_BASE:1.21
	OPENBSD_3_8:1.20.0.4
	OPENBSD_3_8_BASE:1.20
	OPENBSD_3_7:1.20.0.2
	OPENBSD_3_7_BASE:1.20
	OPENBSD_3_6:1.19.0.4
	OPENBSD_3_6_BASE:1.19
	SMP_SYNC_A:1.19
	SMP_SYNC_B:1.19
	OPENBSD_3_5:1.19.0.2
	OPENBSD_3_5_BASE:1.19
	OPENBSD_3_4:1.18.0.4
	OPENBSD_3_4_BASE:1.18
	UBC_SYNC_A:1.18
	OPENBSD_3_3:1.18.0.2
	OPENBSD_3_3_BASE:1.18
	UBC_SYNC_B:1.17
	OPENBSD_3_2:1.17.0.2
	OPENBSD_3_2_BASE:1.17
	UBC:1.16.0.2
	OPENBSD_2_9:1.6.0.14
	OPENBSD_2_9_BASE:1.6
	OPENBSD_2_8:1.6.0.12
	OPENBSD_2_8_BASE:1.6
	OPENBSD_2_7:1.6.0.10
	OPENBSD_2_7_BASE:1.6
	SMP:1.6.0.8
	SMP_BASE:1.6
	kame_19991208:1.6
	OPENBSD_2_6:1.6.0.6
	OPENBSD_2_6_BASE:1.6
	OPENBSD_2_5:1.6.0.4
	OPENBSD_2_5_BASE:1.6
	OPENBSD_2_4:1.6.0.2
	OPENBSD_2_4_BASE:1.6
	OPENBSD_2_3:1.5.0.2
	OPENBSD_2_3_BASE:1.5
	OPENBSD_2_2:1.4.0.2
	OPENBSD_2_2_BASE:1.4
	OPENBSD_2_1:1.2.0.2
	OPENBSD_2_1_BASE:1.2;
locks; strict;
comment	@ * @;


1.29
date	2016.04.27.11.10.48;	author mpi;	state Exp;
branches;
next	1.28;
commitid	57btDderNGPG4fjG;

1.28
date	2016.03.05.17.41.55;	author mpi;	state Exp;
branches;
next	1.27;
commitid	5025CzLISD0jU2OS;

1.27
date	2016.03.05.17.24.27;	author mpi;	state Exp;
branches;
next	1.26;
commitid	oo3LXu9V3TFs8Av3;

1.26
date	2015.11.24.13.33.18;	author mpi;	state Exp;
branches;
next	1.25;
commitid	5DvsamK0GblTp8ww;

1.25
date	2014.03.16.20.31.46;	author guenther;	state Exp;
branches;
next	1.24;

1.24
date	2011.03.23.16.54.36;	author pirofti;	state Exp;
branches;
next	1.23;

1.23
date	2010.11.27.19.57.23;	author miod;	state Exp;
branches;
next	1.22;

1.22
date	2008.09.16.04.20.42;	author drahn;	state Exp;
branches;
next	1.21;

1.21
date	2005.12.17.07.31.26;	author miod;	state Exp;
branches;
next	1.20;

1.20
date	2005.01.04.21.14.35;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2003.12.21.15.17.30;	author miod;	state Exp;
branches;
next	1.18;

1.18
date	2003.02.12.22.41.35;	author jason;	state Exp;
branches;
next	1.17;

1.17
date	2002.08.06.03.33.23;	author drahn;	state Exp;
branches;
next	1.16;

1.16
date	2002.06.08.16.02.14;	author miod;	state Exp;
branches
	1.16.2.1;
next	1.15;

1.15
date	2001.09.01.15.49.05;	author drahn;	state dead;
branches;
next	1.14;

1.14
date	2001.08.19.19.06.46;	author miod;	state Exp;
branches;
next	1.13;

1.13
date	2001.08.15.13.36.45;	author miod;	state Exp;
branches;
next	1.12;

1.12
date	2001.08.12.21.00.14;	author mickey;	state Exp;
branches;
next	1.11;

1.11
date	2001.08.12.16.09.19;	author drahn;	state Exp;
branches;
next	1.10;

1.10
date	2001.07.09.02.07.05;	author mickey;	state Exp;
branches;
next	1.9;

1.9
date	2001.07.08.23.23.53;	author mickey;	state Exp;
branches;
next	1.8;

1.8
date	2001.06.29.06.07.09;	author drahn;	state Exp;
branches;
next	1.7;

1.7
date	2001.06.23.01.59.04;	author drahn;	state Exp;
branches;
next	1.6;

1.6
date	98.08.22.17.54.29;	author rahnds;	state Exp;
branches
	1.6.8.1;
next	1.5;

1.5
date	98.04.06.20.22.23;	author pefo;	state Exp;
branches;
next	1.4;

1.4
date	97.10.14.17.11.10;	author pefo;	state Exp;
branches;
next	1.3;

1.3
date	97.10.13.13.49.57;	author pefo;	state Exp;
branches;
next	1.2;

1.2
date	97.03.21.00.48.48;	author niklas;	state Exp;
branches;
next	1.1;

1.1
date	96.12.28.06.09.17;	author rahnds;	state Exp;
branches;
next	;

1.6.8.1
date	2001.07.04.10.22.21;	author niklas;	state Exp;
branches;
next	1.6.8.2;

1.6.8.2
date	2001.10.31.03.07.55;	author nate;	state dead;
branches;
next	1.6.8.3;

1.6.8.3
date	2001.11.13.21.04.16;	author niklas;	state Exp;
branches;
next	1.6.8.4;

1.6.8.4
date	2001.11.13.22.14.34;	author niklas;	state dead;
branches;
next	1.6.8.5;

1.6.8.5
date	2003.03.28.14.05.52;	author niklas;	state Exp;
branches;
next	1.6.8.6;

1.6.8.6
date	2004.02.19.10.49.57;	author niklas;	state Exp;
branches;
next	;

1.16.2.1
date	2002.06.11.03.37.28;	author art;	state Exp;
branches;
next	1.16.2.2;

1.16.2.2
date	2002.10.29.00.28.08;	author art;	state Exp;
branches;
next	1.16.2.3;

1.16.2.3
date	2003.05.19.21.49.44;	author tedu;	state Exp;
branches;
next	;


desc
@@


1.29
log
@G/C DDB_REGS.
@
text
@/*	$OpenBSD: db_machdep.h,v 1.28 2016/03/05 17:41:55 mpi Exp $*/
/*	$NetBSD: db_machdep.h,v 1.13 1996/04/29 20:50:08 leo Exp $	*/

/*
 * Mach Operating System
 * Copyright (c) 1992 Carnegie Mellon University
 * All Rights Reserved.
 *
 * Permission to use, copy, modify and distribute this software and its
 * documentation is hereby granted, provided that both the copyright
 * notice and this permission notice appear in all copies of the
 * software, derivative works or modified versions, and any portions
 * thereof, and that both notices appear in supporting documentation.
 *
 * CARNEGIE MELLON ALLOWS FREE USE OF THIS SOFTWARE IN ITS "AS IS"
 * CONDITION.  CARNEGIE MELLON DISCLAIMS ANY LIABILITY OF ANY KIND FOR
 * ANY DAMAGES WHATSOEVER RESULTING FROM THE USE OF THIS SOFTWARE.
 *
 * Carnegie Mellon requests users of this software to return to
 *
 *  Software Distribution Coordinator  or  Software.Distribution@@CS.CMU.EDU
 *  School of Computer Science
 *  Carnegie Mellon University
 *  Pittsburgh PA 15213-3890
 *
 * any improvements or extensions that they make and grant Carnegie Mellon
 * the rights to redistribute these changes.
 */

/*
 * Machine-dependent defines for new kernel debugger.
 */
#ifndef	_POWERPC_DB_MACHDEP_H_
#define	_POWERPC_DB_MACHDEP_H_

#include <sys/types.h>
#include <uvm/uvm_param.h>
#include <machine/trap.h>

typedef	vaddr_t	db_addr_t;	/* address - unsigned */
typedef	long		db_expr_t;	/* expression - signed */
typedef struct trapframe db_regs_t;
extern	db_regs_t ddb_regs;		/* register state */

#define	PC_REGS(regs)	((regs)->srr0)
#define	SET_PC_REGS(regs, value)	PC_REGS(regs) = (value)

#define	BKPT_INST	0x7C810808	/* breakpoint instruction */

#define	BKPT_SIZE	(4)		/* size of breakpoint inst */
#define	BKPT_SET(inst)	(BKPT_INST)

#define	FIXUP_PC_AFTER_BREAK(regs)	((regs)->srr0 -= 4)

#define SR_SINGLESTEP 0x8000
#define	db_clear_single_step(regs)	((regs)->srr1 &= ~SR_SINGLESTEP)
#define	db_set_single_step(regs)	((regs)->srr1 |=  SR_SINGLESTEP)

#define T_BREAKPOINT	0xffff
#define	IS_BREAKPOINT_TRAP(type, code)	((type) == T_BREAKPOINT)

#ifdef T_WATCHPOINT
#define	IS_WATCHPOINT_TRAP(type, code)	((type) == T_WATCHPOINT)
#else
#define	IS_WATCHPOINT_TRAP(type, code)	0
#endif

#define	M_RTS		0xfc0007fe
#define I_RTS		0x4c000020
#define M_BC		0xfc000000
#define I_BC		0x40000000
#define M_B		0xfc000000
#define I_B		0x50000000
#define	M_RFI		0xfc0007fe
#define	I_RFI		0x4c000064

#define	inst_trap_return(ins)	(((ins)&M_RFI) == I_RFI)
#define	inst_return(ins)	(((ins)&M_RTS) == I_RTS)
#define	inst_call(ins)		(((ins)&M_BC ) == I_BC  || \
				 ((ins)&M_B  ) == I_B )

#ifdef _KERNEL

int db_enter_ddb(void);
void db_startcpu(int);
void db_stopcpu(int);
void ppc_ipi_db(struct cpu_info *);

void	kdb_kintr(void *);
void	db_save_regs(struct trapframe *frame);
void	ddb_trap(void);
db_expr_t db_dumpframe(u_int32_t pframe, int (*pr)(const char *, ...));

extern struct mutex ddb_mp_mutex;

#define DDB_STATE_NOT_RUNNING	0
#define DDB_STATE_RUNNING	1
#define DDB_STATE_EXITING	2

/*
 * We define some of our own commands
 */
#define DB_MACHINE_COMMANDS

#endif /* _KERNEL */

#endif	/* _POWERPC_DB_MACHDEP_H_ */
@


1.28
log
@One ddb interface is enough for ppc.
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.27 2016/03/05 17:24:27 mpi Exp $*/
a43 1
#define DDB_REGS	(&ddb_regs)
@


1.27
log
@Define db_reg_t like the other archs by typedef'ing "struct trapframe".

This will allow us to use some of the DDB macros on trapframe which are
not DDB_REGS.
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.26 2015/11/24 13:33:18 mpi Exp $*/
d100 5
@


1.26
log
@The only network driver needing <net/if_types.h> is upl(4) for IFT_OTHER.
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.25 2014/03/16 20:31:46 guenther Exp $	*/
d42 1
a42 4
struct powerpc_saved_state {
	struct trapframe tf;
};
typedef struct powerpc_saved_state db_regs_t;
d46 1
a46 1
#define	PC_REGS(regs)	((regs)->tf.srr0)
d54 1
a54 1
#define	FIXUP_PC_AFTER_BREAK(regs)	((regs)->tf.srr0 -= 4)
d57 2
a58 2
#define	db_clear_single_step(regs)	((regs)->tf.srr1 &= ~SR_SINGLESTEP)
#define	db_set_single_step(regs)	((regs)->tf.srr1 |=  SR_SINGLESTEP)
@


1.25
log
@DDB supports ELF symbols are all archs, and it's always the same as the
native size, so eliminate the #defines.

ok miod@@
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.24 2011/03/23 16:54:36 pirofti Exp $	*/
a93 1
int	kdb_trap(int, void *);
@


1.24
log
@Normalize sentinel. Use _MACHINE_*_H_ and _<ARCH>_*_H_ properly and consitently.

Discussed and okay drahn@@. Okay deraadt@@.
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.23 2010/11/27 19:57:23 miod Exp $	*/
a38 6

/*
 * We use Elf32 symbols in DDB.
 */
#define	DB_ELF_SYMBOLS
#define	DB_ELFSIZE	32
@


1.23
log
@Remove ddb single-step load and store counters. Most platforms do not
implement them, and they are of questionable usefulness.
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.22 2008/09/16 04:20:42 drahn Exp $	*/
d33 2
a34 2
#ifndef	_PPC_DB_MACHDEP_H_
#define	_PPC_DB_MACHDEP_H_
d113 1
a113 1
#endif	/* _PPC_DB_MACHDEP_H_ */
@


1.22
log
@SMP ddb support, with some feedback from kettenis.
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.21 2005/12/17 07:31:26 miod Exp $	*/
a90 2
#define inst_load(ins)		0
#define inst_store(ins)		0
@


1.21
log
@Get rid of deprecated vm_{offset,size}_t types for good, use {p,v}{addr,size}_t
instead; looked at millert@@
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.20 2005/01/04 21:14:35 espie Exp $	*/
d96 5
d106 6
@


1.20
log
@SET_PC_REGS, arches tested between me and miod.
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.19 2003/12/21 15:17:30 miod Exp $	*/
d46 1
a46 1
typedef	vm_offset_t	db_addr_t;	/* address - unsigned */
@


1.19
log
@Switch db_expr_t from int to long, per consistency with all other arches.
ok drahn@@
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.18 2003/02/12 22:41:35 jason Exp $	*/
d56 1
@


1.18
log
@move ddb_regs decl from .h to .c to avoid common
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.17 2002/08/06 03:33:23 drahn Exp $	*/
d47 1
a47 1
typedef	int		db_expr_t;	/* expression - signed */
@


1.17
log
@No, powerpc is not Elf64, it is Elf32. stupid comment error.
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.16 2002/06/08 16:02:14 miod Exp $	*/
d52 1
a52 1
db_regs_t	ddb_regs;		/* register state */
@


1.16
log
@One ddb to rule them all.

Move the ddb files form macppc/macppc to powerpc/ddb, so that mvmeppc
can benefit from the better ddb that was in macppc.
db_interface.c is left as an md part.
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.4 2002/05/18 09:49:17 art Exp $	*/
d41 1
a41 1
 * We use Elf64 symbols in DDB.
@


1.16.2.1
log
@Sync UBC branch to -current
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
@


1.16.2.2
log
@sync to -current
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.16.2.1 2002/06/11 03:37:28 art Exp $	*/
d41 1
a41 1
 * We use Elf32 symbols in DDB.
@


1.16.2.3
log
@sync
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
d52 1
a52 1
extern	db_regs_t ddb_regs;		/* register state */
@


1.15
log
@The "powerpc" port which has supported the newer Apple Macintosh powerpc based
is being renamed to macppc. This is to allow sharing of common code
between different powerpc base platforms.

Most of the work involved in the renaming process was performed by miod@@

Files moved from powerpc/include to macppc/include
Some files were not "moved" but wrapper files were created which include
the powerpc/include version.

Several of the powerpc/include files where changed to reflect that they
are POWERPC_* not MACHINE_*.
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.14 2001/08/19 19:06:46 miod Exp $	*/
d37 1
a37 1
#include <vm/vm_param.h>
d95 2
a96 2
void	kdb_kintr __P((void *));
int	kdb_trap __P((int, void *));
d98 2
a99 2
void	ddb_trap __P((void));
db_expr_t db_dumpframe __P((u_int32_t pframe));
@


1.14
log
@ddb on powerpc does not have ``machine'' commands, so don't lie.
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.13 2001/08/15 13:36:45 miod Exp $	*/
@


1.13
log
@Same fix as for mvmeppc needed there, forgot this one.
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.12 2001/08/12 21:00:14 mickey Exp $	*/
a38 2

#define DB_MACHINE_COMMANDS
@


1.12
log
@vm_inherit.h no more
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.11 2001/08/12 16:09:19 drahn Exp $	*/
a37 1
#include <uvm/uvm_extern.h>
@


1.11
log
@Fix build after breakage.
> vm/vm_prot.h no more
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.10 2001/07/09 02:07:05 mickey Exp $	*/
d36 1
d38 1
a38 1
#include <vm/vm_inherit.h>
@


1.10
log
@protos, includes, spaces
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.9 2001/07/08 23:23:53 mickey Exp $	*/
a35 1
#include <vm/vm_prot.h>
@


1.9
log
@empty arg list is named void for convinience, i suppose
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.8 2001/06/29 06:07:09 drahn Exp $	*/
d4 1
a4 1
/* 
d8 1
a8 1
 * 
d14 1
a14 1
 * 
d18 1
a18 1
 * 
d20 1
a20 1
 * 
d25 2
a26 2
 * 
 * any improvements or extensions that they make and grant Carnegie Mellon 
d100 3
a102 2
void db_save_regs(struct trapframe *frame);
void ddb_trap __P((void));
@


1.8
log
@header file include/define cleanup. commit N of many.
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.7 2001/06/23 01:59:04 drahn Exp $	*/
d101 1
a101 1
void ddb_trap __P(());
@


1.7
log
@Header file changes to support symbol loading just added.
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.6 1998/08/22 17:54:29 rahnds Exp $	*/
d100 2
@


1.6
log
@Changes to get a at least mostly working kernel debugger.
Need to get symbol support in the loader too.
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.5 1998/04/06 20:22:23 pefo Exp $	*/
d40 8
@


1.6.8.1
log
@Merge in -current from two days ago in the SMP branch.
As usual with merges, they do not indicate progress, so do not hold
your breath for working SMP, and do not mail me and ask about the
state of it.  It has not changed.  There is work ongoing, but very, very
slowly.  The commit is done in parts as to not lock up the tree in too
big chunks at a time.
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.6 1998/08/22 17:54:29 rahnds Exp $	*/
a40 8
#define DB_MACHINE_COMMANDS

/*
 * We use Elf64 symbols in DDB.
 */
#define	DB_ELF_SYMBOLS
#define	DB_ELFSIZE	32

a91 2
void db_save_regs(struct trapframe *frame);
void ddb_trap __P(());
@


1.6.8.2
log
@Sync the SMP branch to something just after 3.0
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.6.8.1 2001/07/04 10:22:21 niklas Exp $	*/
@


1.6.8.3
log
@Merge in -current
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
@


1.6.8.4
log
@repair
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.6.8.3 2001/11/13 21:04:16 niklas Exp $	*/
@


1.6.8.5
log
@Sync SMP to 3.3, files that CVS misses due to some bug
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
d4 1
a4 1
/*
d8 1
a8 1
 *
d14 1
a14 1
 *
d18 1
a18 1
 *
d20 1
a20 1
 *
d25 2
a26 2
 *
 * any improvements or extensions that they make and grant Carnegie Mellon
d36 3
a38 2
#include <sys/types.h>
#include <uvm/uvm_param.h>
d41 2
d44 1
a44 1
 * We use Elf32 symbols in DDB.
d55 1
a55 1
extern	db_regs_t ddb_regs;		/* register state */
d98 4
a101 5
void	kdb_kintr(void *);
int	kdb_trap(int, void *);
void	db_save_regs(struct trapframe *frame);
void	ddb_trap(void);
db_expr_t db_dumpframe(u_int32_t pframe, int (*pr)(const char *, ...));
@


1.6.8.6
log
@Merge of current from two weeks agointo the SMP branch
@
text
@d47 1
a47 1
typedef	long		db_expr_t;	/* expression - signed */
@


1.5
log
@-lock.h
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.4 1997/10/14 17:11:10 pefo Exp $	*/
d44 1
a44 35
	u_int32_t	r0;		/* data registers */
	u_int32_t	r1;
	u_int32_t	r2;
	u_int32_t	r3;
	u_int32_t	r4;
	u_int32_t	r5;
	u_int32_t	r6;
	u_int32_t	r7;
	u_int32_t	r8;
	u_int32_t	r9;
	u_int32_t	r10;
	u_int32_t	r11;
	u_int32_t	r12;
	u_int32_t	r13;
	u_int32_t	r14;
	u_int32_t	r15;
	u_int32_t	r16;
	u_int32_t	r17;
	u_int32_t	r18;
	u_int32_t	r19;
	u_int32_t	r20;
	u_int32_t	r21;
	u_int32_t	r22;
	u_int32_t	r23;
	u_int32_t	r24;
	u_int32_t	r25;
	u_int32_t	r26;
	u_int32_t	r27;
	u_int32_t	r28;
	u_int32_t	r29;
	u_int32_t	r30;
	u_int32_t	r31;
	u_int32_t	r32;
	u_int32_t	iar;
	u_int32_t	msr;
d50 1
a50 1
#define	PC_REGS(regs)	((db_addr_t)(regs)->iar)
d57 1
a57 1
#define	FIXUP_PC_AFTER_BREAK(regs)	((regs)->iar -= 4)
d60 2
a61 2
#define	db_clear_single_step(regs)	((regs)->msr &= ~SR_SINGLESTEP)
#define	db_set_single_step(regs)	((regs)->msr |=  SR_SINGLESTEP)
@


1.4
log
@Get a few things right...
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.3 1997/10/13 13:49:57 pefo Exp $	*/
a38 1
#include <vm/lock.h>
@


1.3
log
@A few adjustments.
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.2 1997/03/21 00:48:48 niklas Exp $	*/
a34 2

#define	MID_MACHINE 0
@


1.2
log
@New FIXUP_PC_AFTER_BREAK convention from NetBSD
@
text
@d1 1
a1 1
/*	$OpenBSD: db_machdep.h,v 1.1 1996/12/28 06:09:17 rahnds Exp $	*/
d35 2
@


1.1
log
@Changes necessary to make the kernel compile and boot.
Some merging with NetBSD port.
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
d92 1
a92 1
#define	FIXUP_PC_AFTER_BREAK	ddb_regs.iar -= 4;
@
