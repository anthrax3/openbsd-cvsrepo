head	1.3;
access;
symbols
	SMP_SYNC_A:1.3
	SMP_SYNC_B:1.3
	UBC_SYNC_A:1.3
	UBC_SYNC_B:1.3
	OPENBSD_2_9_BASE:1.1
	OPENBSD_2_9:1.1.0.20
	OPENBSD_2_8:1.1.0.18
	OPENBSD_2_8_BASE:1.1
	OPENBSD_2_7:1.1.0.16
	OPENBSD_2_7_BASE:1.1
	SMP:1.1.0.14
	SMP_BASE:1.1
	kame_19991208:1.1
	OPENBSD_2_6:1.1.0.12
	OPENBSD_2_6_BASE:1.1
	OPENBSD_2_5:1.1.0.10
	OPENBSD_2_5_BASE:1.1
	OPENBSD_2_4:1.1.0.8
	OPENBSD_2_4_BASE:1.1
	OPENBSD_2_3:1.1.0.6
	OPENBSD_2_3_BASE:1.1
	OPENBSD_2_2:1.1.0.4
	OPENBSD_2_2_BASE:1.1
	OPENBSD_2_1:1.1.0.2
	OPENBSD_2_1_BASE:1.1;
locks; strict;
comment	@ * @;


1.3
date	2001.09.01.15.36.37;	author drahn;	state dead;
branches;
next	1.2;

1.2
date	2001.07.04.08.38.53;	author niklas;	state Exp;
branches;
next	1.1;

1.1
date	97.02.18.22.36.42;	author rahnds;	state Exp;
branches
	1.1.14.1;
next	;

1.1.14.1
date	2001.10.31.03.07.56;	author nate;	state dead;
branches;
next	;


desc
@@


1.3
log
@The "powerpc" port which has supported the newer Apple Macintosh powerpc based
is being renamed to macppc. This is to allow sharing of common code
between different powerpc base platforms.

Most of the work involved in the renaming process was performed by miod@@

Files moved from powerpc/stand/boot.mac to macppc/stand/boot.mac
These files are the bootloader for the older Openfirmware, not currently
supported.
@
text
@/*	$OpenBSD: hack-coff.c,v 1.2 2001/07/04 08:38:53 niklas Exp $	*/

#include <stdio.h>

char magic[2] = { 1, 0xb };
char snos[12] = { 0, 1, 0, 1, 0, 2, 0, 0, 0, 0, 0, 3 };

main(int ac, char **av)
{
    int fd;

    if (ac != 2) {
	fprintf(stderr, "Usage: hack-coff coff-file\n");
	exit(1);
    }
    if ((fd = open(av[1], 2)) == -1) {
	perror(av[2]);
	exit(1);
    }
    if (lseek(fd, (long) 0x14, 0) == -1
	|| write(fd, magic, sizeof(magic)) != sizeof(magic)
	|| lseek(fd, (long) 0x34, 0) == -1
	|| write(fd, snos, sizeof(snos)) != sizeof(snos)) {
	fprintf(stderr, "%s: write error\n", av[1]);
	exit(1);
    }
    close(fd);
    exit(0);
}
@


1.2
log
@$OpenBSD$
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
@


1.1
log
@Add the necessary pieces to boot on a PowerMAC, does not currently work,
Debugging in progress.
@
text
@d1 2
@


1.1.14.1
log
@Sync the SMP branch to something just after 3.0
@
text
@@


