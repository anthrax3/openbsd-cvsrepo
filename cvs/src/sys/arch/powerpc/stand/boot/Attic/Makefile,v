head	1.7;
access;
symbols
	SMP_SYNC_A:1.7
	SMP_SYNC_B:1.7
	UBC_SYNC_A:1.7
	UBC_SYNC_B:1.7
	SMP:1.7.0.2
	OPENBSD_2_3:1.6.0.6
	OPENBSD_2_3_BASE:1.6
	OPENBSD_2_2:1.6.0.4
	OPENBSD_2_2_BASE:1.6
	OPENBSD_2_1:1.6.0.2
	OPENBSD_2_1_BASE:1.6
	powerpc_1:1.1.1.1;
locks; strict;
comment	@# @;


1.7
date	98.05.29.04.15.53;	author rahnds;	state dead;
branches;
next	1.6;

1.6
date	97.05.05.16.49.52;	author rahnds;	state Exp;
branches;
next	1.5;

1.5
date	97.04.27.20.56.36;	author millert;	state Exp;
branches;
next	1.4;

1.4
date	97.04.01.21.01.45;	author rahnds;	state Exp;
branches;
next	1.3;

1.3
date	97.02.18.22.35.31;	author rahnds;	state Exp;
branches;
next	1.2;

1.2
date	96.12.28.06.31.21;	author rahnds;	state Exp;
branches;
next	1.1;

1.1
date	96.12.21.20.36.00;	author rahnds;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	96.12.21.20.36.00;	author rahnds;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Major changes here and there, tweaks elsewhere.
Support for Openfirmware drivers was reintroduced so that more systems
were supported. This should work with the real driver configurations
as well.

Bootloader files were deleted/replaced with the newer versions in the
subdirectory. Some effort has been made to be closer to support booting
(at least the bootloader) on the Mac.

Config files that end with OFW are the openfirmware versions of the kernels
without have native drivers.

Native driver support has not been changed, presumably it still works.
I couldn't test that.
@
text
@#	$OpenBSD: Makefile,v 1.6 1997/05/05 16:49:52 rahnds Exp $
#       $NetBSD: Makefile,v 1.1 1996/09/30 16:35:05 ws Exp $

R=              ..
.PATH:          $(.CURDIR)/$(R)
PROG=           boot.ppc
SRCS=           Locore.c boot.c ofdev.c net.c netif_of.c alloc.c
#CFLAGS+=       -DDEBUG -DNETIF_DEBUG
CFLAGS+=       -DEXEC_ELF
NOMAN=
INSTALL_STRIP=
MAKEELF=        makeelf
BINDIR=         /usr/mdec
#OBJS+=		note.o
LDFLAGS=	-X -N -Ttext $(RELOC) -e $(ENTRY)

LIBS!=          cd $(.CURDIR)/$(R); $(MAKE) libdep

$(PROG):        $(OBJS) $(LIBS)
	$(LD) $(LDFLAGS) $(OBJS) $(LIBS) -o ${.TARGET}
#	${MAKEELF} $(REAL_VIRT) a.out $(.TARGET)

.include <bsd.prog.mk>
@


1.6
log
@This is not getting picked up from ../Makefile.inc
set it here.

This probably will go away shortly for preference to ofwboot.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.5 1997/04/27 20:56:36 millert Exp $
@


1.5
log
@COPY -> INSTALL_COPY and STRIP -> INSTALL_STRIP
This fixes namespace problems where STRIP is sometimes used as
the name of the strip(1) to use and other times used as
the flag to send install(1) when stripping (or not).
COPY doesn't have this problem (yet) but was poorly named.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 1997/04/01 21:01:45 rahnds Exp $
d15 1
@


1.4
log
@Check in some changes hiding in my tree.
Now that ramdisk is used, booting from floppy does not wait for floppy change.
Do not force real mode for booting, this disables caches on certain machines.
use the freshly build hack-obj, do not require "." in the current path.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.3 1997/02/18 22:35:31 rahnds Exp $
d11 1
a11 1
STRIP=
@


1.3
log
@Add the note object to the executable.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.2 1996/12/28 06:31:21 rahnds Exp $
d14 1
a14 1
OBJS+=		note.o
@


1.2
log
@add OpenBSD tag to files.
@
text
@d1 1
a1 1
#	$OpenBSD:$
d14 1
@


1.1
log
@Initial revision
@
text
@d1 1
@


1.1.1.1
log
@Check-in of powerpc kernel support.
NOTE: This will not work until the other pieces are checked in.
This is primarily the NetBSD powerpc port, with modifications
to support ELF. 
@
text
@@
