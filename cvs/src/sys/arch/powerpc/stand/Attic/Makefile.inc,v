head	1.5;
access;
symbols
	SMP_SYNC_A:1.5
	SMP_SYNC_B:1.5
	UBC_SYNC_A:1.5
	UBC_SYNC_B:1.5
	OPENBSD_2_9_BASE:1.3
	OPENBSD_2_9:1.3.0.20
	OPENBSD_2_8:1.3.0.18
	OPENBSD_2_8_BASE:1.3
	OPENBSD_2_7:1.3.0.16
	OPENBSD_2_7_BASE:1.3
	SMP:1.3.0.14
	SMP_BASE:1.3
	kame_19991208:1.3
	OPENBSD_2_6:1.3.0.12
	OPENBSD_2_6_BASE:1.3
	OPENBSD_2_5:1.3.0.10
	OPENBSD_2_5_BASE:1.3
	OPENBSD_2_4:1.3.0.8
	OPENBSD_2_4_BASE:1.3
	OPENBSD_2_3:1.3.0.6
	OPENBSD_2_3_BASE:1.3
	OPENBSD_2_2:1.3.0.4
	OPENBSD_2_2_BASE:1.3
	OPENBSD_2_1:1.3.0.2
	OPENBSD_2_1_BASE:1.3
	powerpc_1:1.1.1.1;
locks; strict;
comment	@# @;


1.5
date	2001.09.01.15.39.02;	author drahn;	state dead;
branches;
next	1.4;

1.4
date	2001.06.23.01.53.01;	author drahn;	state Exp;
branches;
next	1.3;

1.3
date	97.02.18.22.36.40;	author rahnds;	state Exp;
branches
	1.3.14.1;
next	1.2;

1.2
date	96.12.28.06.31.09;	author rahnds;	state Exp;
branches;
next	1.1;

1.1
date	96.12.21.20.35.59;	author rahnds;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	96.12.21.20.35.59;	author rahnds;	state Exp;
branches;
next	;

1.3.14.1
date	2001.07.04.10.23.08;	author niklas;	state Exp;
branches;
next	1.3.14.2;

1.3.14.2
date	2001.10.31.03.07.56;	author nate;	state dead;
branches;
next	;


desc
@@


1.5
log
@The "powerpc" port which has supported the newer Apple Macintosh powerpc based
is being renamed to macppc. This is to allow sharing of common code
between different powerpc base platforms.

Most of the work involved in the renaming process was performed by miod@@

Files moved from powerpc/stand to macppc/stand
@
text
@#	$OpenBSD: Makefile.inc,v 1.4 2001/06/23 01:53:01 drahn Exp $
#	$NetBSD: Makefile.inc,v 1.1 1996/09/30 16:34:59 ws Exp $

.if !defined(__stand_makefile_inc)
__stand_makefile_inc=1

KERN_AS=	library

S=$(.CURDIR)/../../../$(R)

.if !make(libdep) && !make(sadep) && !make(salibdir) && !make(kernlibdir) && !make(obj)
.BEGIN:
	@@([ -h machine ] || ln -s $(S)/arch/$(MACHINE)/include machine)
.endif

#
EXTRACFLAGS=	-msoft-float
REAL_VIRT?=	-v
ENTRY?=	_start

INCLUDES+=	-I. -I$(.OBJDIR) -I$(.CURDIR)/.. -I$(S)/arch -I$(S)
INCLUDES+=	-I$(S)/lib/libsa
DEFS+=		-DSTANDALONE -DFIREPOWERBUGS
CFLAGS+=	$(INCLUDES) $(DEFS) $(EXTRACFLAGS)
LDFLAGS?=	-X -N -Ttext $(RELOC) -e $(ENTRY)

cleandir:
	rm -rf lib machine

.endif
@


1.4
log
@Support for powerpc to load symbols, uses new libsa loadfile.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.4 2001/06/23 01:48:41 drahn Exp $
@


1.3
log
@Add the necessary pieces to boot on a PowerMAC, does not currently work,
Debugging in progress.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.2 1996/12/28 06:31:09 rahnds Exp $
a15 3
# for now
RELOC?=		4000
LOADADDR?=	100000
d21 3
a23 3
INCLUDES+=	-I. -I$(.CURDIR)/.. -I$(S)/arch -I$(S) -I$(S)/lib/libsa
DEFS+=		-DSTANDALONE -DRELOC=0x$(RELOC) -DLOADADDR=0x$(LOADADDR) \
		-DFIREPOWERBUGS
@


1.3.14.1
log
@Merge in -current from two days ago in the SMP branch.
As usual with merges, they do not indicate progress, so do not hold
your breath for working SMP, and do not mail me and ask about the
state of it.  It has not changed.  There is work ongoing, but very, very
slowly.  The commit is done in parts as to not lock up the tree in too
big chunks at a time.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.3 1997/02/18 22:36:40 rahnds Exp $
d16 3
d24 3
a26 3
INCLUDES+=	-I. -I$(.OBJDIR) -I$(.CURDIR)/.. -I$(S)/arch -I$(S)
INCLUDES+=	-I$(S)/lib/libsa
DEFS+=		-DSTANDALONE -DFIREPOWERBUGS
@


1.3.14.2
log
@Sync the SMP branch to something just after 3.0
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.3.14.1 2001/07/04 10:23:08 niklas Exp $
@


1.2
log
@add OpenBSD tag to files.
@
text
@d1 1
a1 1
#	$OpenBSD:$
d28 1
a28 1
LDFLAGS=	-X -N -Ttext $(RELOC) -e $(ENTRY)
@


1.1
log
@Initial revision
@
text
@d1 1
@


1.1.1.1
log
@Check-in of powerpc kernel support.
NOTE: This will not work until the other pieces are checked in.
This is primarily the NetBSD powerpc port, with modifications
to support ELF. 
@
text
@@
