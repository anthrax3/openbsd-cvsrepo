head	1.12;
access;
symbols
	OPENBSD_5_5:1.11.0.6
	OPENBSD_5_5_BASE:1.11
	OPENBSD_5_4:1.11.0.2
	OPENBSD_5_4_BASE:1.11
	OPENBSD_5_3:1.10.0.2
	OPENBSD_5_3_BASE:1.10
	OPENBSD_5_2:1.9.0.28
	OPENBSD_5_2_BASE:1.9
	OPENBSD_5_1_BASE:1.9
	OPENBSD_5_1:1.9.0.26
	OPENBSD_5_0:1.9.0.24
	OPENBSD_5_0_BASE:1.9
	OPENBSD_4_9:1.9.0.22
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.9.0.20
	OPENBSD_4_8_BASE:1.9
	OPENBSD_4_7:1.9.0.16
	OPENBSD_4_7_BASE:1.9
	OPENBSD_4_6:1.9.0.18
	OPENBSD_4_6_BASE:1.9
	OPENBSD_4_5:1.9.0.14
	OPENBSD_4_5_BASE:1.9
	OPENBSD_4_4:1.9.0.12
	OPENBSD_4_4_BASE:1.9
	OPENBSD_4_3:1.9.0.10
	OPENBSD_4_3_BASE:1.9
	OPENBSD_4_2:1.9.0.8
	OPENBSD_4_2_BASE:1.9
	OPENBSD_4_1:1.9.0.6
	OPENBSD_4_1_BASE:1.9
	OPENBSD_4_0:1.9.0.4
	OPENBSD_4_0_BASE:1.9
	OPENBSD_3_9:1.9.0.2
	OPENBSD_3_9_BASE:1.9
	OPENBSD_3_8:1.7.0.16
	OPENBSD_3_8_BASE:1.7
	OPENBSD_3_7:1.7.0.14
	OPENBSD_3_7_BASE:1.7
	OPENBSD_3_6:1.7.0.12
	OPENBSD_3_6_BASE:1.7
	SMP_SYNC_A:1.7
	SMP_SYNC_B:1.7
	OPENBSD_3_5:1.7.0.10
	OPENBSD_3_5_BASE:1.7
	OPENBSD_3_4:1.7.0.8
	OPENBSD_3_4_BASE:1.7
	UBC_SYNC_A:1.7
	OPENBSD_3_3:1.7.0.6
	OPENBSD_3_3_BASE:1.7
	OPENBSD_3_2:1.7.0.4
	OPENBSD_3_2_BASE:1.7
	OPENBSD_3_1:1.7.0.2
	OPENBSD_3_1_BASE:1.7
	UBC_SYNC_B:1.7
	UBC:1.5.0.26
	UBC_BASE:1.5
	OPENBSD_3_0:1.5.0.24
	OPENBSD_3_0_BASE:1.5
	OPENBSD_2_9:1.5.0.22
	OPENBSD_2_9_BASE:1.5
	OPENBSD_2_8:1.5.0.20
	OPENBSD_2_8_BASE:1.5
	OPENBSD_2_7:1.5.0.18
	OPENBSD_2_7_BASE:1.5
	SMP:1.5.0.16
	SMP_BASE:1.5
	kame_19991208:1.5
	OPENBSD_2_6:1.5.0.14
	OPENBSD_2_6_BASE:1.5
	OPENBSD_2_5:1.5.0.12
	OPENBSD_2_5_BASE:1.5
	OPENBSD_2_4:1.5.0.10
	OPENBSD_2_4_BASE:1.5
	OPENBSD_2_3:1.5.0.8
	OPENBSD_2_3_BASE:1.5
	OPENBSD_2_2:1.5.0.6
	OPENBSD_2_2_BASE:1.5
	OPENBSD_2_1:1.5.0.4
	OPENBSD_2_1_BASE:1.5
	OPENBSD_2_0:1.5.0.2
	OPENBSD_2_0_BASE:1.5
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@ * @;


1.12
date	2014.03.18.22.36.33;	author miod;	state dead;
branches;
next	1.11;

1.11
date	2013.03.28.17.30.45;	author martynas;	state Exp;
branches;
next	1.10;

1.10
date	2013.02.02.13.32.06;	author miod;	state Exp;
branches;
next	1.9;

1.9
date	2006.01.10.00.04.04;	author millert;	state Exp;
branches;
next	1.8;

1.8
date	2005.11.24.20.46.46;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	2002.02.11.20.24.43;	author fgsch;	state Exp;
branches;
next	1.6;

1.6
date	2002.02.11.20.08.58;	author fgsch;	state Exp;
branches;
next	1.5;

1.5
date	96.08.05.17.17.28;	author niklas;	state Exp;
branches
	1.5.16.1
	1.5.26.1;
next	1.4;

1.4
date	96.08.04.01.22.45;	author niklas;	state Exp;
branches;
next	1.3;

1.3
date	96.05.29.18.38.30;	author niklas;	state Exp;
branches;
next	1.2;

1.2
date	96.03.24.16.51.45;	author tholo;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.50.59;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.50.59;	author deraadt;	state Exp;
branches;
next	;

1.5.16.1
date	2002.03.06.01.03.31;	author niklas;	state Exp;
branches;
next	;

1.5.26.1
date	2002.06.11.03.36.06;	author art;	state Exp;
branches;
next	;


desc
@@


1.12
log
@Retire hp300, mvme68k and mvme88k ports. These ports have no users, keeping
this hardware alive is becoming increasingly difficult, and I should heed the
message sent by the three disks which have died on me over the last few days.

Noone sane will mourn these ports anyway. So long, and thanks for the fish.
@
text
@/*	$OpenBSD: cdefs.h,v 1.11 2013/03/28 17:30:45 martynas Exp $	*/

/*
 * Written by J.T. Conklin <jtc@@wimsey.com> 01/17/95.
 * Public domain.
 */

#ifndef	_M68K_CDEFS_H_
#define	_M68K_CDEFS_H_

#define __strong_alias(alias,sym)			\
	__asm__(".global " __STRING(alias) " ; "	\
	    __STRING(alias) " = " __STRING(sym))
#define __weak_alias(alias,sym)				\
	__asm__(".weak " __STRING(alias) " ; "		\
	    __STRING(alias) " = " __STRING(sym))
#define __warn_references(sym,msg)			\
	__asm__(".section .gnu.warning." __STRING(sym)	\
	    " ; .ascii \"" msg "\" ; .text")

#endif /* !_M68K_CDEFS_H_ */
@


1.11
log
@Add __strong_alias macros for all architectures to be able to alias
another symbol without weak attribute.  To be used in libc and libm
soon.  Agreed by kettenis@@, guenther@@, matthew@@.
@
text
@d1 1
a1 1
/*	$OpenBSD: cdefs.h,v 1.10 2013/02/02 13:32:06 miod Exp $	*/
@


1.10
log
@Kernel bits for m68k/ELF, mostly from NetBSD. In addition, the `pmod' symbel
in fpsp has to be renamed due to a clash with other parts of the kernel.
@
text
@d1 1
a1 1
/*	$OpenBSD: cdefs.h,v 1.9 2006/01/10 00:04:04 millert Exp $	*/
d11 3
a13 5
#if defined(lint)
#define __indr_reference(sym,alias)	__lint_equal__(sym,alias)
#define __warn_references(sym,msg)
#define __weak_alias(alias,sym)		__lint_equal__(sym,alias)
#elif defined(__GNUC__) && defined(__STDC__)
a19 1
#endif
@


1.9
log
@Remove duplicate _C_LABEL define.  OK miod@@
@
text
@d1 1
a1 1
/*	$OpenBSD: cdefs.h,v 1.8 2005/11/24 20:46:46 deraadt Exp $	*/
d16 3
a18 3
#define __indr_reference(sym,alias)			\
	__asm__(".stabs \"_" #alias "\",11,0,0,0");	\
	__asm__(".stabs \"_" #sym "\",1,0,0,0")
d20 2
a21 4
	__asm__(".stabs \"" msg "\",30,0,0,0");		\
	__asm__(".stabs \"_" #sym "\",1,0,0,0")
#define __weak_alias(alias,sym)				\
	__asm__(".weak _" #alias "; _" #alias "= _" __STRING(sym))
@


1.8
log
@add lint-specific hacks.  at the same time, clean out a lot of ancient
cruft for old compilers and environments.  there may be a 2nd round of
polishing after this; ok miod and others
@
text
@d1 1
a1 1
/*	$OpenBSD: cdefs.h,v 1.7 2002/02/11 20:24:43 fgsch Exp $	*/
a9 2

#define _C_LABEL(x)	_STRING(_ ## x)
@


1.7
log
@only change _STRING for weak_alias; sorry miod.
@
text
@d1 1
a1 2
/*	$OpenBSD: cdefs.h,v 1.6 2002/02/11 20:08:58 fgsch Exp $	*/
/*	$NetBSD: cdefs.h,v 1.2 1995/03/23 20:10:33 jtc Exp $	*/
a10 1
#ifdef __STDC__
a11 3
#else
#define _C_LABEL(x)	_STRING(_/**/x)
#endif
d13 6
a18 3
#ifdef __GNUC__
#ifdef __STDC__
#define __indr_reference(sym,alias)	\
d21 1
a21 1
#define __warn_references(sym,msg)	\
d24 1
a24 1
#define __weak_alias(alias,sym)		\
a25 14
#else
#define __indr_reference(sym,alias)	\
	__asm__(".stabs \"_/**/alias\",11,0,0,0");	\
	__asm__(".stabs \"_/**/sym\",1,0,0,0")
#define __warn_references(sym,msg)	\
	__asm__(".stabs msg,30,0,0,0");			\
	__asm__(".stabs \"_/**/sym\",1,0,0,0")
#define __weak_alias(alias,sym)		\
	__asm__(".weak _/**/alias; _/**/alias = _/**/sym")
#endif
#else
#define __indr_reference(sym,alias)
#define __warn_references(sym,msg)
#define __weak_alias(alias,sym)
@


1.6
log
@o add __weak_alias definition.
o _STRING -> __STRING
o empty definitions if !__GNUC__

miod@@ testing and ok.
@
text
@d1 1
a1 1
/*	$OpenBSD: cdefs.h,v 1.5 1996/08/05 17:17:28 niklas Exp $	*/
d13 1
a13 1
#define _C_LABEL(x)	__STRING(_ ## x)
d15 1
a15 1
#define _C_LABEL(x)	__STRING(_/**/x)
@


1.5
log
@bring  back the changes between 1.1 and 1.2 which got lost
@
text
@d1 1
a1 1
/*	$OpenBSD: cdefs.h,v 1.4 1996/08/04 01:22:45 niklas Exp $	*/
d13 1
a13 1
#define _C_LABEL(x)	_STRING(_ ## x)
d15 1
a15 1
#define _C_LABEL(x)	_STRING(_/**/x)
d26 2
d35 2
d39 3
a41 1
#define	__warn_references(sym,msg)	/* nothing */
@


1.5.26.1
log
@Sync UBC branch to -current
@
text
@d1 1
a1 1
/*	$OpenBSD: cdefs.h,v 1.5 1996/08/05 17:17:28 niklas Exp $	*/
a25 2
#define __weak_alias(alias,sym)		\
	__asm__(".weak _" #alias "; _" #alias "= _" __STRING(sym))
a32 2
#define __weak_alias(alias,sym)		\
	__asm__(".weak _/**/alias; _/**/alias = _/**/sym")
d35 1
a35 3
#define __indr_reference(sym,alias)
#define __warn_references(sym,msg)
#define __weak_alias(alias,sym)
@


1.5.16.1
log
@Merge in trunk
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
a25 2
#define __weak_alias(alias,sym)		\
	__asm__(".weak _" #alias "; _" #alias "= _" __STRING(sym))
a32 2
#define __weak_alias(alias,sym)		\
	__asm__(".weak _/**/alias; _/**/alias = _/**/sym")
d35 1
a35 3
#define __indr_reference(sym,alias)
#define __warn_references(sym,msg)
#define __weak_alias(alias,sym)
@


1.4
log
@Merge of 0722 NetBSD
@
text
@d1 1
a1 1
/*	$OpenBSD: cdefs.h,v 1.3 1996/05/29 18:38:30 niklas Exp $	*/
d34 2
@


1.3
log
@Add $OpenBSD$ IDs
@
text
@d1 1
a1 1
/*	$OpenBSD: cdefs.h,v 1.2 1995/03/23 20:10:33 jtc Exp $	*/
a33 2
#else
#define	__warn_references(sym,msg)	/* nothing */
@


1.2
log
@Provide empty __warn_references() when we are not running GCC
@
text
@d1 1
@


1.1
log
@Initial revision
@
text
@d33 2
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
