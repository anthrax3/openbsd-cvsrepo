head	1.4;
access;
symbols
	OPENBSD_3_7:1.3.0.14
	OPENBSD_3_7_BASE:1.3
	OPENBSD_3_6:1.3.0.12
	OPENBSD_3_6_BASE:1.3
	SMP_SYNC_A:1.3
	SMP_SYNC_B:1.3
	OPENBSD_3_5:1.3.0.10
	OPENBSD_3_5_BASE:1.3
	OPENBSD_3_4:1.3.0.8
	OPENBSD_3_4_BASE:1.3
	UBC_SYNC_A:1.3
	OPENBSD_3_3:1.3.0.6
	OPENBSD_3_3_BASE:1.3
	OPENBSD_3_2:1.3.0.4
	OPENBSD_3_2_BASE:1.3
	OPENBSD_3_1:1.3.0.2
	OPENBSD_3_1_BASE:1.3
	UBC_SYNC_B:1.3
	UBC:1.2.0.4
	UBC_BASE:1.2
	OPENBSD_3_0:1.2.0.2
	OPENBSD_3_0_BASE:1.2
	OPENBSD_2_9:1.1.0.18
	OPENBSD_2_9_BASE:1.1
	OPENBSD_2_8:1.1.0.16
	OPENBSD_2_8_BASE:1.1
	OPENBSD_2_7:1.1.0.14
	OPENBSD_2_7_BASE:1.1
	SMP:1.1.0.12
	SMP_BASE:1.1
	kame_19991208:1.1
	OPENBSD_2_6:1.1.0.10
	OPENBSD_2_6_BASE:1.1
	OPENBSD_2_5:1.1.0.8
	OPENBSD_2_5_BASE:1.1
	OPENBSD_2_4:1.1.0.6
	OPENBSD_2_4_BASE:1.1
	OPENBSD_2_3:1.1.0.4
	OPENBSD_2_3_BASE:1.1
	OPENBSD_2_2:1.1.0.2
	OPENBSD_2_2_BASE:1.1;
locks; strict;
comment	@ * @;


1.4
date	2005.08.14.12.51.22;	author miod;	state dead;
branches;
next	1.3;

1.3
date	2002.03.14.01.26.34;	author millert;	state Exp;
branches;
next	1.2;

1.2
date	2001.05.15.01.43.14;	author millert;	state Exp;
branches
	1.2.4.1;
next	1.1;

1.1
date	97.07.06.07.46.23;	author downsj;	state Exp;
branches
	1.1.12.1;
next	;

1.1.12.1
date	2001.07.04.10.18.12;	author niklas;	state Exp;
branches;
next	1.1.12.2;

1.1.12.2
date	2002.03.28.10.34.04;	author niklas;	state Exp;
branches;
next	;

1.2.4.1
date	2002.06.11.03.36.06;	author art;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Remove the inline cache and TLB primitives - we don't use them at this point,
they do not cover the HP MMU for hp300, and they do not cover 040+060 kernels
(which share all cache operations) efficiently.
@
text
@/*	$OpenBSD: cacheops.h,v 1.3 2002/03/14 01:26:34 millert Exp $	*/
/*	$NetBSD: cacheops.h,v 1.1 1997/06/02 20:26:37 leo Exp $	*/

/*-
 * Copyright (c) 1997 The NetBSD Foundation, Inc.
 * All rights reserved.
 *
 * This code is derived from software contributed to The NetBSD Foundation
 * by Leo Weppelman
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. All advertising materials mentioning features or use of this software
 *    must display the following acknowledgement:
 *        This product includes software developed by the NetBSD
 *        Foundation, Inc. and its contributors.
 * 4. Neither the name of The NetBSD Foundation nor the names of its
 *    contributors may be used to endorse or promote products derived
 *    from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE NETBSD FOUNDATION, INC. AND CONTRIBUTORS
 * ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE FOUNDATION OR CONTRIBUTORS
 * BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */

#if notyet /* XXX */
#include <machine/cpuconf.h>
#endif

#include <m68k/cacheops_20.h>
#include <m68k/cacheops_30.h>
#include <m68k/cacheops_40.h>
#include <m68k/cacheops_60.h>

#if defined(M68020) && !(defined(M68030)||defined(M68040)||defined(M68060))

#define	TBIA()		TBIA_20()
#define	TBIS(va)	TBIS_20((va))
#define	TBIAS()		TBIAS_20()
#define	TBIAU()		TBIAU_20()
#define	ICIA()		ICIA_20()
#define	ICPA()		ICPA_20()
#define	DCIA()		DCIA_20()
#define	DCIS()		DCIS_20()
#define	DCIU()		DCIU_20()
#define	DCIAS()		DCIAS_20()
#define	PCIA()		PCIA_20()

#elif defined(M68030) && !(defined(M68020)||defined(M68040)||defined(M68060))

#define	TBIS(va)	TBIS_30((va))
#define	TBIAS()		TBIAS_30()
#define	TBIAU()		TBIAU_30()
#define	ICIA()		ICIA_30()
#define	ICPA()		ICPA_30()
#define	DCIA()		DCIA_30()
#define	DCIS()		DCIS_30()
#define	DCIU()		DCIU_30()
#define	DCIAS()		DCIAS_30()
#define	PCIA()		PCIA_30()

#elif defined(M68040) && !(defined(M68020)||defined(M68030)||defined(M68060))

#define	TBIA()		TBIA_40()
#define	TBIS(va)	TBIS_40((va))
#define	TBIAS()		TBIAS_40()
#define	TBIAU()		TBIAU_40()
#define	ICIA()		ICIA_40()
#define	ICPA()		ICPA_40()
#define	DCIA()		DCIA_40()
#define	DCIS()		DCIS_40()
#define	DCIU()		DCIU_40()
#define	DCIAS(va)	DCIAS_40((va))
#define	PCIA()		PCIA_40()
#define	ICPL(va)	ICPL_40((va))
#define	ICPP(va)	ICPP_40((va))
#define	DCPL(va)	DCPL_40((va))
#define	DCPP(va)	DCPP_40((va))
#define	DCPA()		DCPA_40()
#define	DCFL(va)	DCFL_40((va))
#define	DCFP(va)	DCFP_40((va))

#elif defined(M68060) && !(defined(M68020)||defined(M68030)||defined(M68040))

#define	TBIA()		TBIA_60()
#define	TBIS(va)	TBIS_60((va))
#define	TBIAS()		TBIAS_60()
#define	TBIAU()		TBIAU_60()
#define	ICIA()		ICIA_60()
#define	ICPA()		ICPA_60()
#define	DCIA()		DCIA_60()
#define	DCIS()		DCIS_60()
#define	DCIU()		DCIU_60()
#define	DCIAS(va)	DCIAS_60((va))
#define	PCIA()		PCIA_60()
#define	ICPL(va)	ICPL_60((va))
#define	ICPP(va)	ICPP_60((va))
#define	DCPL(va)	DCPL_60((va))
#define	DCPP(va)	DCPP_60((va))
#define	DCPA()		DCPA_60()
#define	DCFL(va)	DCFL_60((va))
#define	DCFP(va)	DCFP_60((va))

#else /* Multi-CPU config */

/* XXX: From cpuconf.h? */
#ifndef _MULTI_CPU
#define	_MULTI_CPU
#endif

void	_TBIA(void);
void	_TBIS(vaddr_t);
void	_TBIAS(void);
void	_TBIAU(void);
void	_ICIA(void);
void	_ICPA(void);
void	_DCIA(void);
void	_DCIS(void);
void	_DCIU(void);
void	_DCIAS(paddr_t);

#define	TBIA()		_TBIA()
#define	TBIS(va)	_TBIS((va))
#define	TBIAS()		_TBIAS()
#define	TBIAU()		_TBIAU()
#define	ICIA()		_ICIA()
#define	ICPA()		_ICPA()
#define	DCIA()		_DCIA()
#define	DCIS()		_DCIS()
#define	DCIU()		_DCIU()
#define	DCIAS(va)	_DCIAS((va))

#if defined(M68040)||defined(M68060)

void	_PCIA(void);
void	_DCFA(void);
void	_ICPL(paddr_t);
void	_ICPP(paddr_t);
void	_DCPL(paddr_t);
void	_DCPP(paddr_t);
void	_DCPA(void);
void	_DCFL(paddr_t);
void	_DCFP(paddr_t);

#define	PCIA()		_PCIA()
#define	DCFA()		_DCFA()
#define	ICPL(va)	_ICPL((va))
#define	ICPP(va)	_ICPP((va))
#define	DCPL(va)	_DCPL((va))
#define	DCPP(va)	_DCPP((va))
#define	DCPA()		_DCPA()
#define	DCFL(va)	_DCFL((va))
#define	DCFP(va)	_DCFP((va))

#endif /* defined(M68040)||defined(M68060) */

#endif
@


1.3
log
@First round of __P removal in sys
@
text
@d1 1
a1 1
/*	$OpenBSD: cacheops.h,v 1.2 2001/05/15 01:43:14 millert Exp $	*/
@


1.2
log
@Replace vm_offset_t with vaddr_t and paddr_t as appropriate.
NetBSD used as a guide.
@
text
@d1 1
a1 1
/*	$OpenBSD: cacheops.h,v 1.1 1997/07/06 07:46:23 downsj Exp $	*/
d125 10
a134 10
void	_TBIA __P((void));
void	_TBIS __P((vaddr_t));
void	_TBIAS __P((void));
void	_TBIAU __P((void));
void	_ICIA __P((void));
void	_ICPA __P((void));
void	_DCIA __P((void));
void	_DCIS __P((void));
void	_DCIU __P((void));
void	_DCIAS __P((paddr_t));
d149 9
a157 9
void	_PCIA __P((void));
void	_DCFA __P((void));
void	_ICPL __P((paddr_t));
void	_ICPP __P((paddr_t));
void	_DCPL __P((paddr_t));
void	_DCPP __P((paddr_t));
void	_DCPA __P((void));
void	_DCFL __P((paddr_t));
void	_DCFP __P((paddr_t));
@


1.2.4.1
log
@Sync UBC branch to -current
@
text
@d1 1
a1 1
/*	$OpenBSD: cacheops.h,v 1.2 2001/05/15 01:43:14 millert Exp $	*/
d125 10
a134 10
void	_TBIA(void);
void	_TBIS(vaddr_t);
void	_TBIAS(void);
void	_TBIAU(void);
void	_ICIA(void);
void	_ICPA(void);
void	_DCIA(void);
void	_DCIS(void);
void	_DCIU(void);
void	_DCIAS(paddr_t);
d149 9
a157 9
void	_PCIA(void);
void	_DCFA(void);
void	_ICPL(paddr_t);
void	_ICPP(paddr_t);
void	_DCPL(paddr_t);
void	_DCPP(paddr_t);
void	_DCPA(void);
void	_DCFL(paddr_t);
void	_DCFP(paddr_t);
@


1.1
log
@Sync with NetBSD changes, 970415 - 970705.

This includes a new asm.h, as well as even more code abstracted from hp300.
These changes are likely to break ports that don't know about them; hp300
runs at the moment.
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
d126 1
a126 1
void	_TBIS __P((vm_offset_t));
d134 1
a134 1
void	_DCIAS __P((vm_offset_t));
d151 4
a154 4
void	_ICPL __P((vm_offset_t));
void	_ICPP __P((vm_offset_t));
void	_DCPL __P((vm_offset_t));
void	_DCPP __P((vm_offset_t));
d156 2
a157 2
void	_DCFL __P((vm_offset_t));
void	_DCFP __P((vm_offset_t));
@


1.1.12.1
log
@Merge in -current from two days ago in the SMP branch.
As usual with merges, they do not indicate progress, so do not hold
your breath for working SMP, and do not mail me and ask about the
state of it.  It has not changed.  There is work ongoing, but very, very
slowly.  The commit is done in parts as to not lock up the tree in too
big chunks at a time.
@
text
@d1 1
a1 1
/*	$OpenBSD: cacheops.h,v 1.1 1997/07/06 07:46:23 downsj Exp $	*/
d126 1
a126 1
void	_TBIS __P((vaddr_t));
d134 1
a134 1
void	_DCIAS __P((paddr_t));
d151 4
a154 4
void	_ICPL __P((paddr_t));
void	_ICPP __P((paddr_t));
void	_DCPL __P((paddr_t));
void	_DCPP __P((paddr_t));
d156 2
a157 2
void	_DCFL __P((paddr_t));
void	_DCFP __P((paddr_t));
@


1.1.12.2
log
@Merge in -current from about a week ago
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
d125 10
a134 10
void	_TBIA(void);
void	_TBIS(vaddr_t);
void	_TBIAS(void);
void	_TBIAU(void);
void	_ICIA(void);
void	_ICPA(void);
void	_DCIA(void);
void	_DCIS(void);
void	_DCIU(void);
void	_DCIAS(paddr_t);
d149 9
a157 9
void	_PCIA(void);
void	_DCFA(void);
void	_ICPL(paddr_t);
void	_ICPP(paddr_t);
void	_DCPL(paddr_t);
void	_DCPP(paddr_t);
void	_DCPA(void);
void	_DCFL(paddr_t);
void	_DCFP(paddr_t);
@


