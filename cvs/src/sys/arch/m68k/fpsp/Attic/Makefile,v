head	1.16;
access;
symbols
	OPENBSD_5_5:1.15.0.28
	OPENBSD_5_5_BASE:1.15
	OPENBSD_5_4:1.15.0.24
	OPENBSD_5_4_BASE:1.15
	OPENBSD_5_3:1.15.0.22
	OPENBSD_5_3_BASE:1.15
	OPENBSD_5_2:1.15.0.20
	OPENBSD_5_2_BASE:1.15
	OPENBSD_5_1_BASE:1.15
	OPENBSD_5_1:1.15.0.18
	OPENBSD_5_0:1.15.0.16
	OPENBSD_5_0_BASE:1.15
	OPENBSD_4_9:1.15.0.14
	OPENBSD_4_9_BASE:1.15
	OPENBSD_4_8:1.15.0.12
	OPENBSD_4_8_BASE:1.15
	OPENBSD_4_7:1.15.0.8
	OPENBSD_4_7_BASE:1.15
	OPENBSD_4_6:1.15.0.10
	OPENBSD_4_6_BASE:1.15
	OPENBSD_4_5:1.15.0.6
	OPENBSD_4_5_BASE:1.15
	OPENBSD_4_4:1.15.0.4
	OPENBSD_4_4_BASE:1.15
	OPENBSD_4_3:1.15.0.2
	OPENBSD_4_3_BASE:1.15
	OPENBSD_4_2:1.14.0.28
	OPENBSD_4_2_BASE:1.14
	OPENBSD_4_1:1.14.0.26
	OPENBSD_4_1_BASE:1.14
	OPENBSD_4_0:1.14.0.24
	OPENBSD_4_0_BASE:1.14
	OPENBSD_3_9:1.14.0.22
	OPENBSD_3_9_BASE:1.14
	OPENBSD_3_8:1.14.0.20
	OPENBSD_3_8_BASE:1.14
	OPENBSD_3_7:1.14.0.18
	OPENBSD_3_7_BASE:1.14
	OPENBSD_3_6:1.14.0.16
	OPENBSD_3_6_BASE:1.14
	SMP_SYNC_A:1.14
	SMP_SYNC_B:1.14
	OPENBSD_3_5:1.14.0.14
	OPENBSD_3_5_BASE:1.14
	OPENBSD_3_4:1.14.0.12
	OPENBSD_3_4_BASE:1.14
	UBC_SYNC_A:1.14
	OPENBSD_3_3:1.14.0.10
	OPENBSD_3_3_BASE:1.14
	OPENBSD_3_2:1.14.0.8
	OPENBSD_3_2_BASE:1.14
	OPENBSD_3_1:1.14.0.6
	OPENBSD_3_1_BASE:1.14
	UBC_SYNC_B:1.14
	UBC:1.14.0.4
	UBC_BASE:1.14
	OPENBSD_3_0:1.14.0.2
	OPENBSD_3_0_BASE:1.14
	OPENBSD_2_9:1.13.0.18
	OPENBSD_2_9_BASE:1.13
	OPENBSD_2_8:1.13.0.16
	OPENBSD_2_8_BASE:1.13
	OPENBSD_2_7:1.13.0.14
	OPENBSD_2_7_BASE:1.13
	SMP:1.13.0.12
	SMP_BASE:1.13
	kame_19991208:1.13
	OPENBSD_2_6:1.13.0.10
	OPENBSD_2_6_BASE:1.13
	OPENBSD_2_5:1.13.0.8
	OPENBSD_2_5_BASE:1.13
	OPENBSD_2_4:1.13.0.6
	OPENBSD_2_4_BASE:1.13
	OPENBSD_2_3:1.13.0.4
	OPENBSD_2_3_BASE:1.13
	OPENBSD_2_2:1.13.0.2
	OPENBSD_2_2_BASE:1.13
	OPENBSD_2_1:1.12.0.2
	OPENBSD_2_1_BASE:1.12
	OPENBSD_2_0:1.10.0.2
	OPENBSD_2_0_BASE:1.10
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.16
date	2014.03.18.22.36.33;	author miod;	state dead;
branches;
next	1.15;

1.15
date	2007.10.18.18.08.02;	author deraadt;	state Exp;
branches;
next	1.14;

1.14
date	2001.09.14.05.35.31;	author art;	state Exp;
branches;
next	1.13;

1.13
date	97.07.06.07.46.20;	author downsj;	state Exp;
branches
	1.13.12.1;
next	1.12;

1.12
date	97.03.25.14.31.07;	author niklas;	state Exp;
branches;
next	1.11;

1.11
date	97.01.13.11.51.07;	author niklas;	state Exp;
branches;
next	1.10;

1.10
date	96.08.04.18.44.58;	author deraadt;	state Exp;
branches;
next	1.9;

1.9
date	96.08.04.01.22.44;	author niklas;	state Exp;
branches;
next	1.8;

1.8
date	96.06.16.10.33.44;	author deraadt;	state Exp;
branches;
next	1.7;

1.7
date	96.05.29.21.05.23;	author niklas;	state Exp;
branches;
next	1.6;

1.6
date	95.11.22.22.22.51;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	95.11.21.17.42.13;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	95.11.21.13.30.29;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	95.11.09.20.06.20;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	95.10.28.14.46.46;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.50.55;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.50.55;	author deraadt;	state Exp;
branches;
next	;

1.13.12.1
date	2001.10.31.03.01.14;	author nate;	state Exp;
branches;
next	;


desc
@@


1.16
log
@Retire hp300, mvme68k and mvme88k ports. These ports have no users, keeping
this hardware alive is becoming increasingly difficult, and I should heed the
message sent by the three disks which have died on me over the last few days.

Noone sane will mourn these ports anyway. So long, and thanks for the fish.
@
text
@#	$OpenBSD: Makefile,v 1.15 2007/10/18 18:08:02 deraadt Exp $
#	$NetBSD: Makefile,v 1.6 1997/04/25 22:17:33 veego Exp $

#	MOTOROLA MICROPROCESSOR & MEMORY TECHNOLOGY GROUP
#	M68000 Hi-Performance Microprocessor Division
#	M68040 Software Package 
#
#	M68040 Software Package Copyright (c) 1993, 1994 Motorola Inc.
#	All rights reserved.
#
#	THE SOFTWARE is provided on an "AS IS" basis and without warranty.
#	To the maximum extent permitted by applicable law,
#	MOTOROLA DISCLAIMS ALL WARRANTIES WHETHER EXPRESS OR IMPLIED,
#	INCLUDING IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A
#	PARTICULAR PURPOSE and any warranty against infringement with
#	regard to the SOFTWARE (INCLUDING ANY MODIFIED VERSIONS THEREOF)
#	and any accompanying written materials. 
#
#	To the maximum extent permitted by applicable law,
#	IN NO EVENT SHALL MOTOROLA BE LIABLE FOR ANY DAMAGES WHATSOEVER
#	(INCLUDING WITHOUT LIMITATION, DAMAGES FOR LOSS OF BUSINESS
#	PROFITS, BUSINESS INTERRUPTION, LOSS OF BUSINESS INFORMATION, OR
#	OTHER PECUNIARY LOSS) ARISING OF THE USE OR INABILITY TO USE THE
#	SOFTWARE.  Motorola assumes no responsibility for the maintenance
#	and support of the SOFTWARE.  
#
#	You are hereby granted a copyright license to use, modify, and
#	distribute the SOFTWARE so long as this entire notice is retained
#	without alteration in any modified and/or redistributed versions,
#	and that such modified versions are clearly identified as such.
#	No licenses are granted by implication, estoppel or otherwise
#	under any patents or trademarks of Motorola, Inc.

#
#	Makefile 3.3 3/27/91
#
#	Makefile for 68040 Floating Point Software Package
#
.if ${MACHINE_ARCH} == "m68k"

TARGET = fpsp

FPSPAS=${CC} -x assembler-with-cpp -traditional-cpp -c -m68040 -I${.CURDIR}
LD		?= ld

#
# For the Library Version:
#
AR		?= ar
LIB_FILTER 	= sed 's/fpsp.defs/l_fpsp.defs/'
LIB_TARGET	= lib$(TARGET).a
#
# SYS selects the template set to use
#	templates are supplied for R3V6, CI5 and GEN(generic)
# PREFIX is a string that begins a temporary label in the assembler
#	R3V6 uses 'L%', CI5 likes '.L'
#
#SYS		= R3V6
#PREFIX		= L%%
#
#SYS		= CI5
#PREFIX		= .L
#
#SYS		= GEN
#PREFIX		= L_
#
SYS		= GCC
PREFIX		= L_

.SUFFIXES:	.o .s .sa .defs .h

.sa.s:
	sh ${.CURDIR}/asm2gas ${.IMPSRC} >${.TARGET}
.h.defs:
	sh ${.CURDIR}/asm2gas ${.IMPSRC} >${.TARGET}
.s.o:
	$(FPSPAS) -o ${.TARGET} ${.IMPSRC}

H_FILES = \
	fpsp.defs \
	l_fpsp.defs

O_FILES = \
	copyright.o \
	netbsd.o \
	bindec.o \
	binstr.o \
	decbin.o \
	do_func.o \
	gen_except.o \
	get_op.o \
	kernel_ex.o \
	res_func.o \
	round.o \
	sacos.o \
	sasin.o \
	satan.o \
	satanh.o \
	scosh.o \
	setox.o \
	sgetem.o \
	sint.o \
	slogn.o \
	slog2.o \
	smovecr.o \
	srem_mod.o \
	scale.o \
	ssin.o \
	ssinh.o \
	stan.o \
	stanh.o \
	sto_res.o \
	stwotox.o \
	tbldo.o \
	util.o \
	x_bsun.o \
	x_fline.o \
	x_operr.o \
	x_ovfl.o \
	x_snan.o \
	x_store.o \
	x_unfl.o \
	x_unimp.o \
	x_unsupp.o \
	bugfix.o

LIB_O_FILES	= \
	l_copyright.o \
	l_entry.o \
	l_do_func.o \
	l_round.o \
	l_sacos.o \
	l_sasin.o \
	l_satan.o \
	l_satanh.o \
	l_scale.o \
	l_scosh.o \
	l_setox.o \
	l_sgetem.o \
	l_sint.o \
	l_slog2.o \
	l_slogn.o \
	l_srem_mod.o \
	l_ssin.o \
	l_ssinh.o \
	l_stan.o \
	l_stanh.o \
	l_stwotox.o \
	l_support.o

S_FILES = \
	netbsd.s \
	bindec.s \
	binstr.s \
	decbin.s \
	do_func.s \
	get_op.s \
	gen_except.s \
	kernel_ex.s \
	res_func.s \
	round.s \
	sacos.s \
	sasin.s \
	satan.s \
	satanh.s \
	scosh.s \
	setox.s \
	sgetem.s \
	sint.s \
	slogn.s \
	slog2.s \
	smovecr.s \
	srem_mod.s \
	scale.s \
	ssin.s \
	ssinh.s \
	stan.s \
	stanh.s \
	sto_res.s \
	stwotox.s \
	tbldo.s \
	util.s \
	x_bsun.s \
	x_fline.s \
	x_operr.s \
	x_ovfl.s \
	x_snan.s \
	x_store.s \
	x_unfl.s \
	x_unimp.s \
	x_unsupp.s \
	bugfix.s

LIB_S_FILES	= \
	l_entry.sa l_entry.s \
	l_do_func.s \
	l_round.s \
	l_sacos.s \
	l_sasin.s \
	l_satan.s \
	l_satanh.s \
	l_scale.s \
	l_scosh.s \
	l_setox.s \
	l_sgetem.s \
	l_sint.s \
	l_slog2.s \
	l_slogn.s \
	l_srem_mod.s \
	l_ssin.s \
	l_ssinh.s \
	l_stan.s \
	l_stanh.s \
	l_stwotox.s \
	l_support.s

#
#	Build the target object.  The linkfile is created on the fly.
#	Change the SEG directives to suit your system.
#
$(TARGET).o:	$(O_FILES)
	$(LD) -r -o $(TARGET).o $(O_FILES)

#
#	Just about every file needs fpsp.h so:
#
$(O_FILES):	fpsp.defs

#
#-----------------------------------------------------------------------
#
#	For making a library version of the FPSP:
#
library:	$(LIB_TARGET)

$(LIB_TARGET):	$(LIB_O_FILES)
	rm -f $(LIB_TARGET)
	$(AR) crv $(LIB_TARGET) $(LIB_O_FILES)

$(LIB_O_FILES): l_fpsp.defs

#
# The entry points to the library version are created here
# by using two template files an awk script and a list of
# the entry routines for each function.
#
l_entry.sa: L_ENTRY.AWK L_LIST MONADIC.$(SYS) DYADIC.$(SYS) l_fpsp.h
	awk -f L_ENTRY.AWK SYS=$(SYS) PREFIX=$(PREFIX) - <L_LIST|sh>l_entry.sa

#
# Do_func.sa and round.sa need special editing to remove references that
# aren't needed in the library version.  Beware that changes in
# the source code may cause this editing to break....
#
l_do_func.s: do_func.s 
	$(LIB_FILTER) ${.ALLSRC} >${.TARGET}
	echo '/global.*do_func/,/^	rts/d' >.SCRIPT
	echo 'g/smovcr/d' >>.SCRIPT
	echo 'g/tblpre/d' >>.SCRIPT
	echo 'w' >>.SCRIPT
	echo 'q' >>.SCRIPT
	ed - ${.TARGET} <.SCRIPT
	rm .SCRIPT

l_round.s: round.s 
	$(LIB_FILTER) ${.ALLSRC} >${.TARGET}
	echo '/^not_E3:/-6,/^not_E3:/d' >.SCRIPT
	echo 'w' >>.SCRIPT
	echo 'q' >>.SCRIPT
	ed - ${.TARGET} <.SCRIPT
	rm .SCRIPT

l_copyright.s: copyright.s 
	$(LIB_FILTER) ${.ALLSRC} >${.TARGET}

l_sacos.s: sacos.s 
	$(LIB_FILTER) ${.ALLSRC} >${.TARGET}

l_sasin.s: sasin.s 
	$(LIB_FILTER) ${.ALLSRC} >${.TARGET}

l_satan.s: satan.s 
	$(LIB_FILTER) ${.ALLSRC} >${.TARGET}

l_satanh.s: satanh.s 
	$(LIB_FILTER) ${.ALLSRC} >${.TARGET}

l_scale.s: scale.s 
	$(LIB_FILTER) ${.ALLSRC} >${.TARGET}

l_scosh.s: scosh.s 
	$(LIB_FILTER) ${.ALLSRC} >${.TARGET}

l_setox.s: setox.s 
	$(LIB_FILTER) ${.ALLSRC} >${.TARGET}

l_sgetem.s: sgetem.s 
	$(LIB_FILTER) ${.ALLSRC} >${.TARGET}

l_sint.s: sint.s 
	$(LIB_FILTER) ${.ALLSRC} >${.TARGET}

l_slog2.s: slog2.s 
	$(LIB_FILTER) ${.ALLSRC} >${.TARGET}

l_slogn.s: slogn.s 
	$(LIB_FILTER) ${.ALLSRC} >${.TARGET}

l_srem_mod.s: srem_mod.s 
	$(LIB_FILTER) ${.ALLSRC} >${.TARGET}

l_ssin.s: ssin.s 
	$(LIB_FILTER) ${.ALLSRC} >${.TARGET}

l_ssinh.s: ssinh.s 
	$(LIB_FILTER) ${.ALLSRC} >${.TARGET}

l_stan.s: stan.s 
	$(LIB_FILTER) ${.ALLSRC} >${.TARGET}

l_stanh.s: stanh.s 
	$(LIB_FILTER) ${.ALLSRC} >${.TARGET}

l_stwotox.s: stwotox.s 
	$(LIB_FILTER) ${.ALLSRC} >${.TARGET}

#
#	Extract all files from SCCS directory
#
clean cleandir:
	rm -f $(H_FILES)
	rm -f $(S_FILES)
	rm -f $(O_FILES)
	rm -f $(TARGET).o
	rm -f $(LIB_S_FILES)
	rm -f $(LIB_O_FILES)
	rm -f $(LIB_TARGET)

clobber:	clean

_SUBDIRUSE:

.else
clean cleandir:

.endif

all:

depend:

install:

includes:

.include <bsd.obj.mk>
.include <bsd.own.mk>
@


1.15
log
@enter for obj@@ building, otherwise dribbles happen
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.14 2001/09/14 05:35:31 art Exp $
@


1.14
log
@Instead of defning our own AS, define FPSPAS.
Instead of cc, use CC.
This allows cross-compile.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.13 1997/07/06 07:46:20 downsj Exp $
d39 1
d342 5
@


1.13
log
@Sync with NetBSD changes, 970415 - 970705.

This includes a new asm.h, as well as even more code abstracted from hp300.
These changes are likely to break ports that don't know about them; hp300
runs at the moment.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.12 1997/03/25 14:31:07 niklas Exp $
d42 1
a42 1
AS		= cc -x assembler-with-cpp -traditional-cpp -c -m68040 -I${.CURDIR}
d76 1
a76 1
	$(AS) -o ${.TARGET} ${.IMPSRC}
@


1.13.12.1
log
@Sync the SMP branch to something just after 3.0
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.13 1997/07/06 07:46:20 downsj Exp $
d42 1
a42 1
FPSPAS=${CC} -x assembler-with-cpp -traditional-cpp -c -m68040 -I${.CURDIR}
d76 1
a76 1
	$(FPSPAS) -o ${.TARGET} ${.IMPSRC}
@


1.12
log
@Make AS, AR & LD overrideable
@
text
@d1 2
a2 2
#	$OpenBSD: Makefile,v 1.11 1997/01/13 11:51:07 niklas Exp $
#	$NetBSD: Makefile,v 1.4 1994/10/26 07:48:46 cgd Exp $
d42 1
a42 1
AS		?= as -m68040
@


1.11
log
@Sync to 970110 NetBSD
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.10 1996/08/04 18:44:58 deraadt Exp $
d42 2
a43 2
AS		= as -m68040
LD		= ld
d48 1
a48 1
AR		= ar
@


1.10
log
@old build hacks
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 1996/06/16 10:33:44 deraadt Exp $
d337 2
@


1.9
log
@Merge of 0722 NetBSD
@
text
@d329 1
a329 1
clean:
d338 12
a349 1
clobber:	clean
@


1.8
log
@fake includes target
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 1996/05/29 21:05:23 niklas Exp $
d329 1
a329 1
clean cleandir:
d338 1
a338 12
_SUBDIRUSE:

all:

depend:

install:

includes:

.include <bsd.obj.mk>
.include <bsd.own.mk>
@


1.7
log
@$OpenBSD$ additions
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 1994/10/26 07:48:46 cgd Exp $
d345 2
@


1.6
log
@fake all target
@
text
@d1 1
@


1.5
log
@fake depend:
@
text
@d339 2
@


1.4
log
@add cleandir target
@
text
@d339 2
@


1.3
log
@no install
@
text
@d328 1
a328 1
clean:
a335 2

clobber:	clean
@


1.2
log
@allow use of obj dirs
@
text
@d341 2
@


1.1
log
@Initial revision
@
text
@d339 4
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
