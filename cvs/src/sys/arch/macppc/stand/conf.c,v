head	1.8;
access;
symbols
	OPENBSD_6_2:1.8.0.6
	OPENBSD_6_2_BASE:1.8
	OPENBSD_6_1:1.8.0.4
	OPENBSD_6_1_BASE:1.8
	OPENBSD_6_0:1.7.0.6
	OPENBSD_6_0_BASE:1.7
	OPENBSD_5_9:1.7.0.2
	OPENBSD_5_9_BASE:1.7
	OPENBSD_5_8:1.7.0.4
	OPENBSD_5_8_BASE:1.7
	OPENBSD_5_7:1.5.0.2
	OPENBSD_5_7_BASE:1.5
	OPENBSD_5_6:1.5.0.6
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_5:1.5.0.4
	OPENBSD_5_5_BASE:1.5
	OPENBSD_5_4:1.4.0.8
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.4.0.6
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.4.0.4
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.2
	OPENBSD_5_0:1.3.0.14
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.3.0.12
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.10
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.6
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.8
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.4
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.2
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.1.0.4
	OPENBSD_4_3_BASE:1.1
	OPENBSD_4_2:1.1.0.2
	OPENBSD_4_2_BASE:1.1;
locks; strict;
comment	@ * @;


1.8
date	2016.09.13.18.27.49;	author jasper;	state Exp;
branches;
next	1.7;
commitid	PHzGPdVfpKxkA6ei;

1.7
date	2015.03.23.20.18.52;	author miod;	state Exp;
branches;
next	1.6;
commitid	9G8mc6J9paxqcGcc;

1.6
date	2015.03.14.20.52.41;	author miod;	state Exp;
branches;
next	1.5;
commitid	b7GHvl57Bcg5ZICf;

1.5
date	2013.12.28.02.53.04;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	2011.11.19.16.11.55;	author mpi;	state Exp;
branches;
next	1.3;

1.3
date	2008.06.13.00.31.09;	author krw;	state Exp;
branches;
next	1.2;

1.2
date	2008.04.19.23.20.22;	author weingart;	state Exp;
branches;
next	1.1;

1.1
date	2007.06.13.02.17.32;	author drahn;	state Exp;
branches;
next	;


desc
@@


1.8
log
@crank bootloader version after .SUNW_ctf change

as discussed with jsing@@ it's easier this way to ensure people have
bootblocks capable of loading the section
@
text
@/*	$OpenBSD: conf.c,v 1.7 2015/03/23 20:18:52 miod Exp $	*/
/*
 * Copyright (c) 2007 Dale Rahn <drahn@@openbsd.org>
 *
 * Permission to use, copy, modify, and distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 */
#include <sys/param.h>
  
#include <dev/cons.h>   
     
#include <lib/libsa/stand.h>


const char version[] = "1.6";
int     debug = 0;

void ofc_probe(struct consdev *);
void ofc_init(struct consdev *);
int ofc_getc(dev_t);
void ofc_putc(dev_t, int);


struct consdev *cn_tab;

struct consdev constab[] = {
	{ ofc_probe, ofc_init, ofc_getc, ofc_putc },
	{ NULL }
};
@


1.7
log
@Fix buglet in previous ofdev change causing NFS boot to fail; found the hard
way by mpi@@. Bump version.
ok mpi@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.6 2015/03/14 20:52:41 miod Exp $	*/
d24 1
a24 1
const char version[] = "1.5";
@


1.6
log
@Allow for multiple concurrent devopen() calls, and fill the .readdir member
of fs_ops; makes the `ls' command finally work in the boot loader.
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.5 2013/12/28 02:53:04 deraadt Exp $	*/
d24 1
a24 1
const char version[] = "1.4";
@


1.5
log
@crank the version
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.4 2011/11/19 16:11:55 mpi Exp $	*/
d24 1
a24 1
const char version[] = "1.3";
@


1.4
log
@Rewrite the parsing of arguments given to the ofwboot and restore the
possibility to boot a kernel from an HFS partition when there is no
OpenBSD partition on the disk.

Problem reported by cbsoleil at gmail.com and analysed by otto@@.

Tested by otto@@, krw@@ and drahn@@

ok krw@@, drahn@@
@
text
@d1 1
a1 1
/*	$OpenBSD: conf.c,v 1.3 2008/06/13 00:31:09 krw Exp $	*/
d24 1
a24 1
const char version[] = "1.2";
@


1.3
log
@Add some missing $OpenBSD$ tags.

ok drahn@@ gwk@@
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
d24 1
a24 1
const char version[] = "1.1";
@


1.2
log
@Change ELF loader to use the LMA as the load address for the
various segments.  Hopefully this will help remove various
hacks in the boot loader in the future.  This should have no
effect on most architectures (as we tend to have LMA == VMA).

ok drahn@@, soft ok's various others.
@
text
@d1 1
@


1.1
log
@Switch macppc to the interactive bootloader in stand/boot.
Much more useable on serial console systems.
@
text
@d23 1
a23 1
const char version[] = "1.0";
@

