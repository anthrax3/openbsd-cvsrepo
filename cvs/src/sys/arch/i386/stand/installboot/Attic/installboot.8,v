head	1.30;
access;
symbols
	OPENBSD_5_5:1.29.0.20
	OPENBSD_5_5_BASE:1.29
	OPENBSD_5_4:1.29.0.16
	OPENBSD_5_4_BASE:1.29
	OPENBSD_5_3:1.29.0.14
	OPENBSD_5_3_BASE:1.29
	OPENBSD_5_2:1.29.0.12
	OPENBSD_5_2_BASE:1.29
	OPENBSD_5_1_BASE:1.29
	OPENBSD_5_1:1.29.0.10
	OPENBSD_5_0:1.29.0.8
	OPENBSD_5_0_BASE:1.29
	OPENBSD_4_9:1.29.0.6
	OPENBSD_4_9_BASE:1.29
	OPENBSD_4_8:1.29.0.4
	OPENBSD_4_8_BASE:1.29
	OPENBSD_4_7:1.29.0.2
	OPENBSD_4_7_BASE:1.29
	OPENBSD_4_6:1.28.0.12
	OPENBSD_4_6_BASE:1.28
	OPENBSD_4_5:1.28.0.8
	OPENBSD_4_5_BASE:1.28
	OPENBSD_4_4:1.28.0.6
	OPENBSD_4_4_BASE:1.28
	OPENBSD_4_3:1.28.0.4
	OPENBSD_4_3_BASE:1.28
	OPENBSD_4_2:1.28.0.2
	OPENBSD_4_2_BASE:1.28
	OPENBSD_4_1:1.27.0.14
	OPENBSD_4_1_BASE:1.27
	OPENBSD_4_0:1.27.0.12
	OPENBSD_4_0_BASE:1.27
	OPENBSD_3_9:1.27.0.10
	OPENBSD_3_9_BASE:1.27
	OPENBSD_3_8:1.27.0.8
	OPENBSD_3_8_BASE:1.27
	OPENBSD_3_7:1.27.0.6
	OPENBSD_3_7_BASE:1.27
	OPENBSD_3_6:1.27.0.4
	OPENBSD_3_6_BASE:1.27
	SMP_SYNC_A:1.27
	SMP_SYNC_B:1.27
	OPENBSD_3_5:1.27.0.2
	OPENBSD_3_5_BASE:1.27
	OPENBSD_3_4:1.26.0.2
	OPENBSD_3_4_BASE:1.26
	UBC_SYNC_A:1.24
	OPENBSD_3_3:1.23.0.2
	OPENBSD_3_3_BASE:1.23
	OPENBSD_3_2:1.22.0.8
	OPENBSD_3_2_BASE:1.22
	OPENBSD_3_1:1.22.0.6
	OPENBSD_3_1_BASE:1.22
	UBC_SYNC_B:1.22
	UBC:1.22.0.4
	UBC_BASE:1.22
	OPENBSD_3_0:1.22.0.2
	OPENBSD_3_0_BASE:1.22
	OPENBSD_2_9:1.21.0.10
	OPENBSD_2_9_BASE:1.21
	OPENBSD_2_8:1.21.0.8
	OPENBSD_2_8_BASE:1.21
	OPENBSD_2_7:1.21.0.6
	OPENBSD_2_7_BASE:1.21
	SMP:1.21.0.4
	SMP_BASE:1.21
	kame_19991208:1.21
	OPENBSD_2_6:1.21.0.2
	OPENBSD_2_6_BASE:1.21
	OPENBSD_2_5:1.15.0.2
	OPENBSD_2_5_BASE:1.15
	OPENBSD_2_4:1.14.0.2
	OPENBSD_2_4_BASE:1.14
	OPENBSD_2_3:1.13.0.2
	OPENBSD_2_3_BASE:1.13
	OPENBSD_2_2:1.12.0.2
	OPENBSD_2_2_BASE:1.12
	OPENBSD_2_1:1.2.0.2
	OPENBSD_2_1_BASE:1.2;
locks; strict;
comment	@# @;


1.30
date	2014.06.09.15.51.40;	author jsing;	state dead;
branches;
next	1.29;
commitid	PoCfQX0AWtUJ5qUn;

1.29
date	2010.03.06.16.16.43;	author jmc;	state Exp;
branches;
next	1.28;

1.28
date	2007.05.31.19.20.03;	author jmc;	state Exp;
branches;
next	1.27;

1.27
date	2004.01.26.23.21.49;	author tom;	state Exp;
branches;
next	1.26;

1.26
date	2003.06.06.21.45.33;	author jmc;	state Exp;
branches;
next	1.25;

1.25
date	2003.06.03.20.22.11;	author mickey;	state Exp;
branches;
next	1.24;

1.24
date	2003.05.08.08.53.23;	author jmc;	state Exp;
branches;
next	1.23;

1.23
date	2003.02.07.07.45.12;	author jmc;	state Exp;
branches;
next	1.22;

1.22
date	2001.09.20.21.05.25;	author mickey;	state Exp;
branches
	1.22.4.1;
next	1.21;

1.21
date	99.07.09.13.35.33;	author aaron;	state Exp;
branches
	1.21.4.1;
next	1.20;

1.20
date	99.07.08.22.56.07;	author deraadt;	state Exp;
branches;
next	1.19;

1.19
date	99.07.03.02.11.11;	author aaron;	state Exp;
branches;
next	1.18;

1.18
date	99.07.02.20.11.46;	author aaron;	state Exp;
branches;
next	1.17;

1.17
date	99.05.23.14.11.28;	author aaron;	state Exp;
branches;
next	1.16;

1.16
date	99.05.16.19.57.54;	author alex;	state Exp;
branches;
next	1.15;

1.15
date	99.01.24.15.55.31;	author mickey;	state Exp;
branches;
next	1.14;

1.14
date	98.08.18.15.16.52;	author ryker;	state Exp;
branches;
next	1.13;

1.13
date	98.03.11.15.36.42;	author deraadt;	state Exp;
branches;
next	1.12;

1.12
date	97.10.07.08.09.31;	author deraadt;	state Exp;
branches;
next	1.11;

1.11
date	97.10.07.05.01.57;	author deraadt;	state Exp;
branches;
next	1.10;

1.10
date	97.09.30.22.23.57;	author deraadt;	state Exp;
branches;
next	1.9;

1.9
date	97.09.24.10.37.22;	author downsj;	state Exp;
branches;
next	1.8;

1.8
date	97.09.24.08.31.18;	author mickey;	state Exp;
branches;
next	1.7;

1.7
date	97.09.20.22.40.40;	author flipk;	state Exp;
branches;
next	1.6;

1.6
date	97.09.04.23.20.51;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	97.09.04.22.44.12;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	97.09.04.22.36.23;	author mickey;	state Exp;
branches;
next	1.3;

1.3
date	97.08.29.22.13.54;	author mickey;	state Exp;
branches;
next	1.2;

1.2
date	97.03.31.03.12.06;	author weingart;	state Exp;
branches;
next	1.1;

1.1
date	96.12.03.13.17.06;	author mickey;	state dead;
branches
	1.1.2.1;
next	;

1.1.2.1
date	96.12.03.13.17.07;	author mickey;	state Exp;
branches;
next	;

1.21.4.1
date	2001.10.31.03.01.13;	author nate;	state Exp;
branches;
next	1.21.4.2;

1.21.4.2
date	2003.03.27.23.26.56;	author niklas;	state Exp;
branches;
next	1.21.4.3;

1.21.4.3
date	2003.05.13.19.42.09;	author ho;	state Exp;
branches;
next	1.21.4.4;

1.21.4.4
date	2003.06.07.11.11.38;	author ho;	state Exp;
branches;
next	1.21.4.5;

1.21.4.5
date	2004.02.19.10.48.43;	author niklas;	state Exp;
branches;
next	;

1.22.4.1
date	2003.05.19.21.45.12;	author tedu;	state Exp;
branches;
next	;


desc
@@


1.30
log
@Remove {amd64,i386}/stand/installboot - we now use usr.sbin/installboot
and these have been unhooked from the build for a while now.
@
text
@.\"	$OpenBSD: installboot.8,v 1.29 2010/03/06 16:16:43 jmc Exp $
.\"
.\" Copyright (c) 1997 Michael Shalayeff
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
.\" WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"
.Dd $Mdocdate: March 6 2010 $
.Dt INSTALLBOOT 8 i386
.Os
.Sh NAME
.Nm installboot
.Nd installs a bootstrap on an FFS disk or partition
.Sh SYNOPSIS
.Nm installboot
.Op Fl nv
.Ar boot
.Ar biosboot
.Ar disk
.Sh DESCRIPTION
.Nm
is used to install a
.Dq first-stage
boot program into the boot area of an FFS disk partition.
It inserts the block number and offset of the inode of
the second-stage boot program
.Xr boot 8
so that the
.Xr biosboot 8
program can load it.
Various filesystem parameters are also patched into the boot block.
.Pp
The options are as follows:
.Bl -tag -width flag_opt
.It Fl n
Do not actually write anything on the disk.
.It Fl v
Be verbose, printing out the data that are stored in
.Ar biosboot
along with lots of other information.
.El
.Pp
The arguments are:
.Bl -tag -width biosboot
.It Ar boot
The name of the second-stage boot program in the mounted file system
where the first-stage boot program is to be installed.
This should be a full pathname.
.It Ar biosboot
The name of the prototype file for the first stage boot program,
usually
.Pa /usr/mdec/biosboot .
.It Ar disk
The name of the disk containing the partition in which the second-stage
boot program resides and the first-stage boot program is to be installed.
This can either be specified in short form (e.g.,
.Sq sd0
or
.Sq wd0 ) ,
or as the explicit device node, such as
.Pa /dev/rsd0c
or
.Pa /dev/rwd0c .
.Pp
The
.Sq c
partition is always used to represent the
.Dq entire
disk on i386.
.El
.Sh EXAMPLES
The typical use is
.Bd -literal -offset indent
# cp /usr/mdec/boot /boot
# /usr/mdec/installboot -n -v /boot /usr/mdec/biosboot sd0
.Ed
.Pp
And if the information supplied looks right, run the above without the
.Fl n
flag.
If you are upgrading an old system, you may need to perform
some additional steps first.
For example:
.Bd -literal -offset indent
boot the floppy.fs filesystem floppy
# fsck /dev/rsd0a
# mount /dev/sd0a /mnt
# cp /usr/mdec/boot /mnt/boot
# /usr/mdec/installboot -v /mnt/boot /usr/mdec/biosboot sd0
.Ed
.Sh SEE ALSO
.Xr biosboot 8 ,
.Xr boot 8 ,
.Xr disklabel 8 ,
.Xr fdisk 8 ,
.Xr init 8
.Sh CAVEATS
The disklabel
.Va d_type
field must be set to a value other than
.Dq unknown .
.Pp
.Pa /boot
must be on the drive/partition specified by
.Pa disk ;
you cannot perform cross-device
.Nm Ns s .
@


1.29
log
@remove the (now inaccurate) note about not being able to run
installboot on a mounted partition;

from J.C. Roberts
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.28 2007/05/31 19:20:03 jmc Exp $
d28 1
a28 1
.Dd $Mdocdate: May 31 2007 $
@


1.28
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.27 2004/01/26 23:21:49 tom Exp $
d28 1
a28 1
.Dd $Mdocdate$
a83 8
.Pp
Note that you must be in single-user mode or have your kernel in
insecure mode (see the
.Xr sysctl 8
.Va kern.securelevel
variable or
.Pa /etc/rc.securelevel )
to enable access to the raw partition of a mounted disk.
@


1.27
log
@Major overhaul of biosboot and installboot, using EDD (LBA) reads if
the BIOS supports it.  File location data now geometry-independent
(biosboot groks part of the inode), so installboot loses -h and -s.

Many thanks to all those brave enough to try the snapshots.  Thanks
for the test reports, everyone.

ok deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.26 2003/06/06 21:45:33 jmc Exp $
d28 1
a28 1
.Dd December 23, 2003
@


1.26
log
@- section reorder
- new sentence, new line
- some macro fixes
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.25 2003/06/03 20:22:11 mickey Exp $
d28 1
a28 1
.Dd September 1, 1997
d36 1
a36 4
.Op Fl n
.Op Fl v
.Oo Fl s Ar sectors-per-track Oc
.Oo Fl h Ar tracks-per-cyl Oc
d41 1
a41 1
.Nm installboot
d44 8
a51 4
boot program into the boot area
of an FFS disk partition, and initialize the table of block numbers the
.Ar biosboot
program uses to load the second-stage boot program.
d58 1
a58 2
Be verbose, printing out the CHS (Cylinder, Head, Sector)
triples that are stored in
a60 18
.It Fl s Ar sectors-per-track
Used to specify the sectors-per-track value if the drive has
sector translation activated, and
.Nm
is unable to determine the translated geometry.
.\" If not specified, this defaults to d_nsectors from the disklabel.
If not specified, this defaults to the value retrieved from the BIOS
at boot time, available via
.Xr sysctl 8 .
.It Fl h Ar tracks-per-cyl
Used to specify the tracks-per-cylinder value if the drive has
sector translation activated, and
.Nm
is unable to determine the translated geometry.
.\" If not specified, this defaults to d_ntracks from the disklabel.
If not specified, this defaults to the value retrieved from the BIOS
at boot time, available via
.Xr sysctl 8 .
d76 1
a76 1
This can either be specified in short form (i.e.,
d101 4
a104 3
.Pp
.Dl # cp /usr/mdec/boot /boot
.Dl # /usr/mdec/installboot -v -n /boot /usr/mdec/biosboot sd0
d109 10
a118 16
If you are upgrading an old system, you may need to preface
the above steps with some more steps... and do the following:
.Pp
.Dl boot the floppy.fs filesystem floppy
.Dl # fsck /dev/rsd0a
.Dl # mount /dev/sd0a /mnt
.Dl # cp /usr/mdec/boot /mnt/boot
.Dl # /usr/mdec/installboot -v /mnt/boot /usr/mdec/biosboot sd0
.Pp
If you need to find the BIOS geometry of the disk for
.Fl s
and
.Fl h
you can use the boot block command:
.Pp
.Dl boot> machine diskinfo
d121 1
d125 1
a125 1
.Sh BUGS
a130 3
You cannot run
.Nm installboot
for a drive/partition other than the one you want the
d132 4
a135 1
to be loaded from.
@


1.25
log
@three four kills
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.24 2003/05/08 08:53:23 jmc Exp $
d85 2
a86 2
where the first-stage boot program is to be installed.  This should be
a full pathname.
d125 2
a126 1
flag.  If you are upgrading an old system, you may need to preface
d142 5
a157 5
.Sh SEE ALSO
.Xr biosboot 8 ,
.Xr disklabel 8 ,
.Xr fdisk 8 ,
.Xr init 8
@


1.24
log
@EXAMPLE -> EXAMPLES in .Sh section, as per mdoc template.
crunch stuff still needs a bit of work.
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.23 2003/02/07 07:45:12 jmc Exp $
a13 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by Michael Shalayeff.
.\" 4. The name of the author may not be used to endorse or promote products
.\"    derived from this software without specific prior written permission.
@


1.23
log
@typos;
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.22 2001/09/20 21:05:25 mickey Exp $
d122 1
a122 1
.Sh EXAMPLE
@


1.22
log
@grammar; from toby
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.21 1999/07/09 13:35:33 aaron Exp $
d38 1
a38 1
.Nd installs a bootstrap on a FFS disk or partition
d53 1
a53 1
of a FFS disk partition, and initialize the table of block numbers the
@


1.22.4.1
log
@sync
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d38 1
a38 1
.Nd installs a bootstrap on an FFS disk or partition
d53 1
a53 1
of an FFS disk partition, and initialize the table of block numbers the
d122 1
a122 1
.Sh EXAMPLES
@


1.21
log
@- remove all trailing whitespace
     * except when it is escaped with a `\' at the end of the line
- fix remaining .Nm usage as well
- this is from a patch I received from kwesterback@@home.com, who has been
  working on some scripts for fixing formatting errors in mdoc'd man pages

Ok, so there could be a cost/benefit debate with this commit, but since I have
the patch we might as well commit it...
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.20 1999/07/08 22:56:07 deraadt Exp $
d38 1
a38 1
.Nd install a bootstrap on a FFS disk or partition
@


1.21.4.1
log
@Sync the SMP branch to something just after 3.0
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.21 1999/07/09 13:35:33 aaron Exp $
d38 1
a38 1
.Nd installs a bootstrap on a FFS disk or partition
@


1.21.4.2
log
@Sync the SMP branch with 3.3
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d38 1
a38 1
.Nd installs a bootstrap on an FFS disk or partition
d53 1
a53 1
of an FFS disk partition, and initialize the table of block numbers the
@


1.21.4.3
log
@Sync the SMP branch to -current, plus some ELF-related fixes.
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.21.4.2 2003/03/27 23:26:56 niklas Exp $
d122 1
a122 1
.Sh EXAMPLES
@


1.21.4.4
log
@Sync SMP branch to -current
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.21.4.3 2003/05/13 19:42:09 ho Exp $
d14 5
d90 2
a91 2
where the first-stage boot program is to be installed.
This should be a full pathname.
d130 1
a130 2
flag.
If you are upgrading an old system, you may need to preface
a145 5
.Sh SEE ALSO
.Xr biosboot 8 ,
.Xr disklabel 8 ,
.Xr fdisk 8 ,
.Xr init 8
d157 5
@


1.21.4.5
log
@Merge of current from two weeks agointo the SMP branch
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d28 1
a28 1
.Dd December 23, 2003
d36 4
a39 1
.Op Fl nv
d44 1
a44 1
.Nm
d47 4
a50 8
boot program into the boot area of an FFS disk partition.
It inserts the block number and offset of the inode of
the second-stage boot program
.Xr boot 8
so that the
.Xr biosboot 8
program can load it.
Various filesystem parameters are also patched into the boot block.
d57 2
a58 1
Be verbose, printing out the data that are stored in
d61 18
d94 1
a94 1
This can either be specified in short form (e.g.,
d119 3
a121 4
.Bd -literal -offset indent
# cp /usr/mdec/boot /boot
# /usr/mdec/installboot -n -v /boot /usr/mdec/biosboot sd0
.Ed
d126 16
a141 10
If you are upgrading an old system, you may need to perform
some additional steps first.
For example:
.Bd -literal -offset indent
boot the floppy.fs filesystem floppy
# fsck /dev/rsd0a
# mount /dev/sd0a /mnt
# cp /usr/mdec/boot /mnt/boot
# /usr/mdec/installboot -v /mnt/boot /usr/mdec/biosboot sd0
.Ed
a143 1
.Xr boot 8 ,
d147 1
a147 1
.Sh CAVEATS
d153 3
d157 1
a157 4
must be on the drive/partition specified by
.Pa disk ;
you cannot perform cross-device
.Nm Ns s .
@


1.20
log
@flesh out .Dt
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.19 1999/07/03 02:11:11 aaron Exp $
d20 2
a21 2
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR 
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED 
@


1.19
log
@remove redundant .Pp macros
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.18 1999/07/02 20:11:46 aaron Exp $
d34 1
a34 1
.Dt INSTALLBOOT 8
@


1.18
log
@consistent .Dd usage; proper format is: .Dd Month DD, YYYY
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.17 1999/05/23 14:11:28 aaron Exp $
a145 1
.Pp
@


1.17
log
@remove argument from .Os macros so value in /usr/share/tmac/mdoc/doc-common
is used instead; kwesterback@@home.com
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.16 1999/05/16 19:57:54 alex Exp $
d33 1
a33 1
.Dd 1 Sep 1997
@


1.16
log
@Cleanup xrefs under SEE ALSO.  Specifically:

  - Sort xrefs by section, and then alphabetically.
  - Add missing commas between xref items.
  - Remove commas from the last xref entry.
  - Remove duplicate entries.
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.15 1999/01/24 15:55:31 mickey Exp $
d35 1
a35 1
.Os 
@


1.15
log
@applied s/then/than/ from krw@@tcn.net; even better grammar now
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.14 1998/08/18 15:16:52 ryker Exp $
d159 1
a160 1
.Xr init 8 ,
d162 1
a162 1
.Xr biosboot 8 .
@


1.14
log
@s/dec/dev/
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.13 1998/03/11 15:36:42 deraadt Exp $
d155 1
a155 1
for drives/partitions others then the one you want
d157 1
a157 1
loaded from.
@


1.13
log
@make usage message much prettier
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.12 1997/10/07 08:09:31 deraadt Exp $
d106 1
a106 1
.Pa /dec/rwd0c .
@


1.12
log
@explain machine diskinfo better
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.11 1997/10/07 05:01:57 deraadt Exp $
d43 2
a44 2
.Oo Fl s Ar spt Oc
.Oo Fl h Ar tpc Oc
d66 1
a66 1
.It Fl s Ar spt
d75 1
a75 1
.It Fl h Ar tpc
@


1.11
log
@describe how to update from 2.1
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.10 1997/09/30 22:23:57 deraadt Exp $
d139 1
a139 2
If you are replacing much older versions of the bootblocks on your
drive, you will need to use the
d142 2
a143 4
.Fl h 
arguments to installboot to properly install the bootblocks.  You can
either get these figures in your BIOS, or by booting a new floppy
and typing
@


1.10
log
@EXAMPLES
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.9 1997/09/24 10:37:22 downsj Exp $
d130 8
a137 1
flag.
@


1.9
log
@Document how things (more or less) work.
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.8 1997/09/24 08:31:18 mickey Exp $
d122 21
@


1.8
log
@correct device arg description
@
text
@d1 1
a1 2
.\"	$OpenBSD: installboot.8,v 1.7 1997/09/20 22:40:40 flipk Exp $
.\"
d38 1
a38 1
.Nd install a bootstrap on a UFS disk or partition
d50 4
a53 3
is used to install a "first-stage" boot program into the boot area
of a UFS or a FFS disk partition, and initialize the table of block
numbers the
d71 4
a74 1
If not specified, this defaults to d_nsectors from the disklabel.
d80 4
a83 1
If not specified, this defaults to d_ntracks from the disklabel.
d90 2
a91 1
where the first-stage boot program is to be installed.
d94 2
a95 1
usually /usr/mdec/biosboot.
d97 24
a120 10
The name of the disk containing the partition in which the
first-stage boot program is to be installed.
This might be the raw partition
of the block device on which the file system containing
.Ar boot
is mounted.  Note that you must be in single-user mode or have your
kernel in insecure mode (see 
.Xr sysctl 8 's
kern.securelevel variable or /etc/rc.securelevel) to be able
to access the raw partition of a mounted disk.
d123 4
a126 1
The disklabel d_type field must be set to a value other than "unknown".
d130 3
a132 1
for drives/partitions others then the one you want /bsd loaded from.
@


1.7
log
@- add 'stty [baudrate]' command to /boot, for serial consoles
- switch baud rates using i/o instead of bios, since bios commands
have only a limited bitwidth for baudrate, and max out at 9600
- when switching console devices, print msg to both old device and new
- fix timeout bug in com_getc() (dev | 0x80 was reading gobbledygook)
- document 'stty' command in boot(8)
- wording and cleanup in man pages
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.6 1997/09/04 23:20:51 deraadt Exp $
d48 1
a48 1
.Ar rawdev
d88 4
a91 3
.It Ar rawdev
The name of the raw device in which the first-stage boot program
is to be installed.  This should correspond to the raw partition
@


1.6
log
@more details
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.5 1997/09/04 22:44:12 deraadt Exp $
d83 1
a83 1
The name of the second-stage boot program in the file system
d86 2
a87 1
The name of the prototype file for the first stage boot program.
d93 5
a97 1
is mounted.
d104 1
a104 1
for drives/partitions others then the one you have loaded /bsd from.
@


1.5
log
@fix spelling
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.4 1997/09/04 22:36:23 mickey Exp $
d68 4
a71 2
sector translation activated.  If not specified, this defaults
to d_nsectors from the disklabel.
d74 4
a77 2
sector translation activated.  If not specified, this defaults
to d_ntracks from the disklabel.
@


1.4
log
@warn about unknown disklabel types, doc it in BUGS
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.3 1997/08/29 22:13:54 mickey Exp $
d67 3
a69 3
Use the
.Ar spt
for sectors-per-track value, defaults to d_nsectors from disk label.
d71 3
a73 3
Use the
.Ar tpc
for tracks-per-cylinder value, defaults to d_ntracks from disk label.
d79 1
a79 1
the name of the second-stage boot program in the file system
d82 1
a82 1
the name of the prototype file for the first stage boot program.
d84 1
a84 1
the name of the raw device in which the first-stage boot program
d91 1
a91 1
You have disklabel type to be set to some value different from 'unknown'.
@


1.3
log
@mostly real as i am
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.2 1997/03/31 03:12:06 weingart Exp $
d91 2
@


1.2
log
@Initial /boot stuff (from Mickey)
@
text
@d1 1
a1 1
.\"	$OpenBSD: installboot.8,v 1.1.2.1 1996/12/03 13:17:07 mickey Exp $
d3 32
a34 1
.Dd 31 May 1995
d39 1
a39 1
.Nd install a bootstrap on a UFS disk
d42 6
a47 3
.Fl n | Fl v
.Ar ufsboot
.Ar bootxx
d52 3
a54 2
of a UFS disk partition, and initialize the table of block numbers the
.Ar bootxx
d58 1
a58 1
.Bl -tag -width flag
d62 12
a73 4
Be verbose, printing out the block numbers that
.Ar bootxx
will use to load
.Ar ufsboot .
d77 2
a78 2
.Bl -tag -width ufsboot
.It Ar ufsboot
d81 1
a81 1
.It Ar bootxx
d85 3
a87 3
is to be installed.  This should correspond to the block device
on which the file system containing
.Ar ufsboot
d91 1
d93 2
a94 8
requires simultaneous access to the mounted file system and
the raw device, but that is not allowed with the kernel
.Nm securelevel
variable set to a value greater than zero (the default), so
.Nm installboot
only works in single-user mode (or insecure mode - see 
.Xr init 8 ).
.Sh "SEE ALSO"
d96 3
a98 1
.Xr init 8
@


1.1
log
@file installboot.8 was initially added on branch new.
@
text
@d1 58
@


1.1.2.1
log
@new hierarchy. raw /boot loading, just 1(one) boot stage.
@
text
@a0 58
.\"	$OpenBSD: installboot.8,v 1.4 1996/10/11 23:06:41 deraadt Exp $
.\"
.Dd 31 May 1995
.Dt INSTALLBOOT 8
.Os 
.Sh NAME
.Nm installboot
.Nd install a bootstrap on a UFS disk
.Sh SYNOPSIS
.Nm installboot
.Fl n | Fl v
.Ar ufsboot
.Ar bootxx
.Ar rawdev
.Sh DESCRIPTION
.Nm installboot
is used to install a "first-stage" boot program into the boot area
of a UFS disk partition, and initialize the table of block numbers the
.Ar bootxx
program uses to load the second-stage boot program.
.Pp
The options are as follows:
.Bl -tag -width flag
.It Fl n
Do not actually write anything on the disk.
.It Fl v
Be verbose, printing out the block numbers that
.Ar bootxx
will use to load
.Ar ufsboot .
.El
.Pp
The arguments are:
.Bl -tag -width ufsboot
.It Ar ufsboot
the name of the second-stage boot program in the file system
where the first-stage boot program is to be installed.
.It Ar bootxx
the name of the prototype file for the first stage boot program.
.It Ar rawdev
the name of the raw device in which the first-stage boot program
is to be installed.  This should correspond to the block device
on which the file system containing
.Ar ufsboot
is mounted.
.El
.Sh BUGS
.Nm installboot
requires simultaneous access to the mounted file system and
the raw device, but that is not allowed with the kernel
.Nm securelevel
variable set to a value greater than zero (the default), so
.Nm installboot
only works in single-user mode (or insecure mode - see 
.Xr init 8 ).
.Sh "SEE ALSO"
.Xr disklabel 8 ,
.Xr init 8
@

