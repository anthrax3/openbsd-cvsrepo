head	1.12;
access;
symbols
	OPENBSD_5_3:1.11.0.2
	OPENBSD_5_3_BASE:1.11
	OPENBSD_5_2:1.9.0.62
	OPENBSD_5_2_BASE:1.9
	OPENBSD_5_1_BASE:1.9
	OPENBSD_5_1:1.9.0.60
	OPENBSD_5_0:1.9.0.58
	OPENBSD_5_0_BASE:1.9
	OPENBSD_4_9:1.9.0.56
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.9.0.54
	OPENBSD_4_8_BASE:1.9
	OPENBSD_4_7:1.9.0.50
	OPENBSD_4_7_BASE:1.9
	OPENBSD_4_6:1.9.0.52
	OPENBSD_4_6_BASE:1.9
	OPENBSD_4_5:1.9.0.48
	OPENBSD_4_5_BASE:1.9
	OPENBSD_4_4:1.9.0.46
	OPENBSD_4_4_BASE:1.9
	OPENBSD_4_3:1.9.0.44
	OPENBSD_4_3_BASE:1.9
	OPENBSD_4_2:1.9.0.42
	OPENBSD_4_2_BASE:1.9
	OPENBSD_4_1:1.9.0.40
	OPENBSD_4_1_BASE:1.9
	OPENBSD_4_0:1.9.0.38
	OPENBSD_4_0_BASE:1.9
	OPENBSD_3_9:1.9.0.36
	OPENBSD_3_9_BASE:1.9
	OPENBSD_3_8:1.9.0.34
	OPENBSD_3_8_BASE:1.9
	OPENBSD_3_7:1.9.0.32
	OPENBSD_3_7_BASE:1.9
	OPENBSD_3_6:1.9.0.30
	OPENBSD_3_6_BASE:1.9
	SMP_SYNC_A:1.9
	SMP_SYNC_B:1.9
	OPENBSD_3_5:1.9.0.28
	OPENBSD_3_5_BASE:1.9
	OPENBSD_3_4:1.9.0.26
	OPENBSD_3_4_BASE:1.9
	UBC_SYNC_A:1.9
	OPENBSD_3_3:1.9.0.24
	OPENBSD_3_3_BASE:1.9
	OPENBSD_3_2:1.9.0.22
	OPENBSD_3_2_BASE:1.9
	OPENBSD_3_1:1.9.0.20
	OPENBSD_3_1_BASE:1.9
	UBC_SYNC_B:1.9
	UBC:1.9.0.18
	UBC_BASE:1.9
	OPENBSD_3_0:1.9.0.16
	OPENBSD_3_0_BASE:1.9
	OPENBSD_2_9:1.9.0.14
	OPENBSD_2_9_BASE:1.9
	OPENBSD_2_8:1.9.0.12
	OPENBSD_2_8_BASE:1.9
	OPENBSD_2_7:1.9.0.10
	OPENBSD_2_7_BASE:1.9
	SMP:1.9.0.8
	SMP_BASE:1.9
	kame_19991208:1.9
	OPENBSD_2_6:1.9.0.6
	OPENBSD_2_6_BASE:1.9
	OPENBSD_2_5:1.9.0.4
	OPENBSD_2_5_BASE:1.9
	OPENBSD_2_4:1.9.0.2
	OPENBSD_2_4_BASE:1.9
	OPENBSD_2_3:1.7.0.4
	OPENBSD_2_3_BASE:1.7
	OPENBSD_2_2:1.7.0.2
	OPENBSD_2_2_BASE:1.7;
locks; strict;
comment	@# @;


1.12
date	2013.04.23.12.36.49;	author jsing;	state dead;
branches;
next	1.11;

1.11
date	2012.08.29.22.23.08;	author pascal;	state Exp;
branches;
next	1.10;

1.10
date	2012.08.21.14.46.18;	author pascal;	state Exp;
branches;
next	1.9;

1.9
date	98.05.28.20.52.37;	author mickey;	state Exp;
branches;
next	1.8;

1.8
date	98.05.25.19.04.54;	author mickey;	state Exp;
branches;
next	1.7;

1.7
date	97.10.15.13.59.58;	author mickey;	state Exp;
branches;
next	1.6;

1.6
date	97.10.14.20.19.19;	author weingart;	state Exp;
branches;
next	1.5;

1.5
date	97.10.14.20.07.00;	author weingart;	state Exp;
branches;
next	1.4;

1.4
date	97.09.17.22.51.49;	author weingart;	state Exp;
branches;
next	1.3;

1.3
date	97.07.30.20.47.43;	author mickey;	state Exp;
branches;
next	1.2;

1.2
date	97.07.30.19.40.50;	author flipk;	state Exp;
branches;
next	1.1;

1.1
date	97.07.28.22.03.27;	author mickey;	state Exp;
branches;
next	;


desc
@@


1.12
log
@tedu unused makefiles.
@
text
@#	$OpenBSD: Makefile,v 1.11 2012/08/29 22:23:08 pascal Exp $

S=	${.CURDIR}/../../../..
I386=	${.CURDIR}/../..

all depend:: assym.h

assym.h: $S/kern/genassym.sh ${.CURDIR}/genassym.cf
	sh $S/kern/genassym.sh ${CC} ${CFLAGS} ${CPPFLAGS} \
	    ${PARAM} < ${.CURDIR}/genassym.cf > assym.h.tmp && \
	    mv -f assym.h.tmp assym.h

cleandir: clean

clean:
	@@rm -f isa.h apm.h assym.h machine

.include <bsd.obj.mk>
.include <bsd.subdir.mk>
.include "../Makefile.inc"
CFLAGS+=${SACFLAGS}
@


1.11
log
@Kill all NOPIE and NOPIE_FLAGS in i386/stand, replacing them with -fno-pie
and -nopie directly.  Binaries from a PIE system are identical to those from
a recent snapshot.

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.10 2012/08/21 14:46:18 pascal Exp $
@


1.10
log
@Add NOPIE= bits for sys/arch/*/stand to ensure that bootblocks will always be
built with -fno-pie.  This gets the hairiest part of PIE out of the way ...

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.9 1998/05/28 20:52:37 mickey Exp $
a4 2

NOPIE=
@


1.9
log
@cleanup the Makefiles a bit.
make machine link in a smart way, remove unused bits.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 1998/05/25 19:04:54 mickey Exp $
d5 2
@


1.8
log
@more CLEANFILES
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 1997/10/15 13:59:58 mickey Exp $
a4 1
CLEANFILES=	i386 machine
d6 1
a6 8
all:	machine-links assym.h

machine-links:
	@@rm -f machine i386
	@@ln -fs ${.CURDIR}/../.. i386
	@@ln -fs ${.CURDIR}/../../include machine

depend:: machine-links assym.h
d16 1
a16 1
	@@rm -f isa.h apm.h assym.h
@


1.7
log
@fix it again
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.6 1997/10/14 20:19:19 weingart Exp $
d5 1
@


1.6
log
@Fix for my fix
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.5 1997/10/14 20:07:00 weingart Exp $
d13 1
a13 1
depend:: assym.h
d15 1
a15 1
assym.h: $S/kern/genassym.sh ${.CURDIR}/genassym.cf machine-links
@


1.5
log
@Depend problem
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 1997/09/17 22:51:49 weingart Exp $
d13 1
a13 1
depend:: assym.h machine-links
d15 1
a15 1
assym.h: $S/kern/genassym.sh ${.CURDIR}/genassym.cf
@


1.4
log
@depend: dependancies
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.3 1997/07/30 20:47:43 mickey Exp $
d13 1
a13 1
depend:: assym.h
@


1.3
log
@oops, missed
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.1 1997/07/28 22:03:27 mickey Exp $
d13 2
d19 2
@


1.2
log
@mickey has pieces he has not committed.
if he puts the tree in an unbuildable state again..
anyway, all these problems came from the fact that etc/genassym.cf
wasn't even being used, and assym.h is where key defines were supposed
to be coming from. now we actually include etc/genassym.cf in the
genassym.sh processing, and remove the #includes i had in place to
work around it. now if mickey had committed machine/biosvar.h, etc/Makefile,
and these asm files all at the same time, there wouldn't have been
a problem....
@
text
@d13 1
a13 4
assym.h: $S/kern/genassym.sh ${I386}/i386/genassym.cf
	@@echo '#define NISA 1' > isa.h
	@@echo '#define NAPM 1' > apm.h
	cat ${I386}/i386/genassym.cf ${.CURDIR}/genassym.cf | \
d15 2
a16 1
	    ${PARAM} > assym.h.tmp && mv -f assym.h.tmp assym.h
d18 2
a19 2
clean cleandir:
	rm -f isa.h apm.h assym.h
@


1.1
log
@generate assym.h
@
text
@d1 1
a1 1
#	$OpenBSD$
d16 1
d18 1
a18 2
	    ${PARAM} < ${I386}/i386/genassym.cf > assym.h.tmp && \
	    mv -f assym.h.tmp assym.h
d20 2
a21 2
clean:
	@@rm -f isa.h apm.h assym.h
@
