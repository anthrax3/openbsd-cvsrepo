head	1.27;
access;
symbols
	SMP_SYNC_A:1.27
	SMP_SYNC_B:1.27
	UBC_SYNC_A:1.27
	UBC_SYNC_B:1.27
	OPENBSD_2_9:1.26.0.2
	OPENBSD_2_9_BASE:1.26
	OPENBSD_2_8:1.25.0.2
	OPENBSD_2_8_BASE:1.25
	OPENBSD_2_7:1.21.0.4
	OPENBSD_2_7_BASE:1.21
	SMP:1.21.0.2
	SMP_BASE:1.21
	kame_19991208:1.19
	OPENBSD_2_6:1.18.0.2
	OPENBSD_2_6_BASE:1.18
	OPENBSD_2_5:1.7.0.4
	OPENBSD_2_5_BASE:1.7
	OPENBSD_2_4:1.7.0.2
	OPENBSD_2_4_BASE:1.7
	OPENBSD_2_3:1.4.0.2
	OPENBSD_2_3_BASE:1.4
	OPENBSD_2_2:1.3.0.6
	OPENBSD_2_2_BASE:1.3
	OPENBSD_2_1:1.3.0.4
	OPENBSD_2_1_BASE:1.3
	OPENBSD_2_0:1.3.0.2
	OPENBSD_2_0_BASE:1.3
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@.\" @;


1.27
date	2001.05.29.22.09.41;	author mickey;	state dead;
branches;
next	1.26;

1.26
date	2000.11.23.10.01.34;	author deraadt;	state Exp;
branches;
next	1.25;

1.25
date	2000.10.11.21.27.19;	author aaron;	state Exp;
branches;
next	1.24;

1.24
date	2000.10.05.14.25.59;	author aaron;	state Exp;
branches;
next	1.23;

1.23
date	2000.09.11.01.25.53;	author aaron;	state Exp;
branches;
next	1.22;

1.22
date	2000.05.31.13.48.04;	author aaron;	state Exp;
branches;
next	1.21;

1.21
date	2000.01.22.12.00.41;	author aaron;	state Exp;
branches
	1.21.2.1;
next	1.20;

1.20
date	2000.01.19.15.51.54;	author aaron;	state Exp;
branches;
next	1.19;

1.19
date	99.11.25.20.24.19;	author aaron;	state Exp;
branches;
next	1.18;

1.18
date	99.10.16.18.56.37;	author aaron;	state Exp;
branches;
next	1.17;

1.17
date	99.10.07.18.37.54;	author wvdputte;	state Exp;
branches;
next	1.16;

1.16
date	99.10.01.10.00.41;	author aaron;	state Exp;
branches;
next	1.15;

1.15
date	99.09.23.04.12.08;	author alex;	state Exp;
branches;
next	1.14;

1.14
date	99.09.14.18.43.30;	author aaron;	state Exp;
branches;
next	1.13;

1.13
date	99.07.14.13.34.59;	author millert;	state Exp;
branches;
next	1.12;

1.12
date	99.07.09.13.35.32;	author aaron;	state Exp;
branches;
next	1.11;

1.11
date	99.07.07.10.50.08;	author aaron;	state Exp;
branches;
next	1.10;

1.10
date	99.07.02.20.11.46;	author aaron;	state Exp;
branches;
next	1.9;

1.9
date	99.05.16.19.57.51;	author alex;	state Exp;
branches;
next	1.8;

1.8
date	99.05.12.21.58.32;	author aaron;	state Exp;
branches;
next	1.7;

1.7
date	98.09.07.16.44.37;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	98.08.10.16.41.18;	author millert;	state Exp;
branches;
next	1.5;

1.5
date	98.07.12.09.03.43;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	98.01.21.17.10.07;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	96.08.19.00.56.54;	author shawn;	state Exp;
branches;
next	1.2;

1.2
date	96.04.21.22.17.20;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.50.47;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.50.47;	author deraadt;	state Exp;
branches;
next	;

1.21.2.1
date	2001.04.18.16.08.16;	author niklas;	state Exp;
branches;
next	1.21.2.2;

1.21.2.2
date	2001.07.04.10.17.52;	author niklas;	state dead;
branches;
next	;


desc
@@


1.27
log
@remove this used to be great console driver; x11 builds w/o it all fine; aaron@@, todd@@, matthieu@@ ok
@
text
@.\" $OpenBSD: pcvt.4,v 1.26 2000/11/23 10:01:34 deraadt Exp $
.\"
.\"  Copyright (c) 1992, 1995 Hellmuth Michaelis, Brian Dunford-Shore,
.\"                           Joerg Wunsch and Holger Veit.
.\"
.\"  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by Hellmuth Michaelis,
.\"	Brian Dunford-Shore, Joerg Wunsch and Holger Veit.
.\" 4. The name authors may not be used to endorse or promote products
.\"    derived from this software without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHORS ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHORS BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.\" @@(#)pcvt.4, 3.30, Last Edit-Date: [Fri Jun 30 20:15:30 1995]
.\"
.\" Man page pcvt(4) created after pcvt_ioctl.h on 13-Jan-93
.\" by Joerg Wunsch
.\"
.\" updated for rel 2.10 (-hm)
.\" updated for rel 2.20 (-hm)
.\" updated for rel 3.00 (-jw)
.\" updated for final rel 3.00 (-hm)
.\" removed references to 386BSD (-hm)
.\"
.Dd August 10, 1998
.Dt PCVT 4
.Os
.Sh NAME
.Nm pcvt
.Nd PC console virtual screen system
.Sh SYNOPSIS
.Op option Dq Em PCVT_NSCREENS = number
.br
.Op option Dq Em PCVT_XXXX
.Po
see
.Sx Configuration
below
.Pc
.Pp
.Em vt0
at
.Em isa?
port
.Em 0x60
irq
.Em 1
.Sh DESCRIPTION
.Ss Overview
The
.Nm
driver provides a virtual screen system with several additional
features not available in
.Xr pc 4
standard console device driver.
Besides the ability of handling multiple virtual screens,
probably the most important is an emulation of a wide range
of DEC VT-220
.if t \(tm
.if n (TM)
functionality.
See
.Sx Features
for a detailed description.
.Pp
.Sy Note:
As of
.Ox 2.6 ,
.Nm
does not do character mapping by default in favor of a traditional PC display
where 16 colors are available and the standard IBM font is used.
See the
.Fl o
flag in
.Xr scon 1
to toggle between this mode and the old mode.
.Ss VT Keys
Despite the complexity of options, if installed in a normal
.Ox
configuration with the default options, on a standard i386 architecture
system, you can use multiple virtual terminals.
The key sequence used to move among virtual terminals are,
at least on a North American keyboard,
.Em CTRL+ALT+Fn ,
where
.Em n
can be from one to four on the standard system or higher if you
have created additional
.Pa /dev/ttyC?
entries.
.Pp
To use the scrollback feature, press
.Em SHIFT+PGUP/PGDN
(more info further on this further down).
.Ss Features
The
.Nm
driver includes the following features:
.Pp
.Bl -bullet -compact
.It
Almost full DEC VT220
.if t \(tm
.if n (TM)
functionality
.Po
moving towards VT320
.if t \(tm
.if n (TM)
.Pc
.It
Completely independent virtual terminals for MDA/HGC/CGA/EGA and VGA
.It
25, 28, 35, 40, 43 or 50x80 screen resolution for each virtual screen
.It
Fully remappable keyboard to support national keyboards
.It
All VT220 character sets plus ISO Latin-1 and DEC technical supported
.It
VT220 downloadable character set supported when run on EGA/VGA
.It
VT220 user defined keys for each virtual terminal
.It
Display function codes functionality
.It
Support for MDA, CGA, EGA, and VGA display adaptors
.It
Support for 132 column operation on some VGA chipsets
.It
Scrollback buffer
.It
Console mouse support
.It
X Window Support for XFree86 >= 1.2 using the pccons model, or
for XFree86 >= 2.0 using the syscons model
.Po
requires
.Em PCVT_USL_VT_COMPAT
to be configured
.Pc
.El
.Pp
What it cannot:
.Pp
.Bl -bullet -compact
.It
No double wide/high characters
.It
No softscroll
.It
No inverse background
.It
No VT220 printer output support
.It
No VT52 support at all
.It
No 8-bit controls
.It
Only limited AT-keyboard
.Pq 84 keys
support
.El
.Ss Configuration
The
.Nm
driver has been designed to be highly configurable in order to satisfy
everyone's needs.
The preferred way for those configurations is to provide appropriate
.Em option
lines within the config file, possibly overriding the built-in default values.
Therefore it is possible to compile several distinct kernels
with different driver behaviour on a single machine.
.Pp
The following list gives a short overview of the available configuration
options.
Refer to the file
.Pa arch/i386/isa/pcvt/pcvt_hdr.h
in the kernel source tree for detailed documentation.
.Pp
Note: the following conventions apply to all the Boolean options.
If an option is given with no value, a value of 1
.Pq activated
is substituted.
If an option value is given as 0, this options is deactivated.
Any other value is substituted by 1, too.
If an option is omitted, a built-in default is assumed.
.Pp
.Bl -tag -width indent -compact
.Pp
.It Em PCVT_NSCREENS
Defines the number of virtual screens.
.br
Default: 8
.Pp
.It Em PCVT_SCREENSAVER
Enables the built-in screensaver feature.
.br
Default: on
.Pp
.It Em PCVT_PRETTYSCRNS
If enabled, a blinking-star screensaver is used.
If disabled, the screen is simply blanked
.Pq which might be useful for energy-saving monitors .
.br
Default: off
.Pp
.It Em PCVT_CTRL_ALT_DEL
If enabled, the key combination
.Aq Em Ctrl
.Aq Em Alt
.Aq Em Del
invokes a CPU reset.
.br
Default: off (To change this, check
.Nm sysctl.conf
, set value of 
.Em machdep.kbdreset
to 1)
.Pp
.It Em PCVT_USEKBDSEC
Do NOT override a security lock for the keyboard.
.br
Default: on
.Pp
.It Em PCVT_24LINESDEF
If enabled, the 25-line modi
.Po
VT emulation with 25 lines
.Pc
defaults to 24 lines only to provide a better compatibility to the
original DEV VT220 (TM).
Thus it should be possible to use the
terminal information for those terminals without further changes.
Note that this is a startup option; it is possible to toggle between
the 24- and 25-lines' display by the
.Xr scon 1
utility.
.br
Default: off
.Pp
.It Em PCVT_META_ESC
If enabled, a sequence composed of
.Aq Em esc ,
followed by the normal key code is emitted if a key is pressed with the
.Aq Em Alt
key modifier.
If disabled, then normal key code with the value
.Em 0x80
added is sent.
.br
Default: off
.El
.Pp
Note that there are further options available which are mainly used for
debugging purposes or as a workaround for hardware problems.
They are found in
.Pa arch/i386/isa/pcvt/pcvt_hdr.h
along with their documentation.
.Ss Internal Functions
The functionality described below may be accessed via
.Xr ioctl 2
system calls with a file descriptor opened on a device node
related to the
.Nm
driver.
To make use of them, a program should contain the following line:
.Pp
.Dl #include <machine/pcvt_ioctl.h>
.Pp
Any parameter definitions cited below can be found in that file.
.Pp
.Em Keyboard related functions
.Pp
Three functions are related to basic keyboard hardware:
.Pp
.Bl -tag -width 20n -offset indent -compact
.It KBDRESET
reset keyboard, set defaults;
.It KBDGTPMAT
get current typematic value, parameter is a pointer to int where
the values is stored to;
.It KBDSTPMAT
set current typematic value, similar to above command.
.El
.Pp
Symbolic values are available for the appropriate constants.
To specify the initial typematic delay time, they are
KBD_TPD250 for 250 ms through
KBD_TPD1000 for 1000 ms, in steps of 250 ms.
The typematic repeat rates are
KBD_TPM300, specifying 30.0 characters per second through
KBD_TPM20 for 2.0 characters per second.
The intermediate values are:
30.0, 26.7, 24.0, 21.8, 20.0, 18.5, 17.1, 16.0, 15.0, 13.3,
12.0, 10.9, 10.0, 9.2, 8.6, 8.0, 7.5, 6.7, 6.0, 5.5, 5.0, 4.6, 4.3,
4.0, 3.7, 3.3, 3.0, 2.7, 2.5, 2.3, 2.1, 2.0 characters per second.
.Pp
.Bl -tag -width 20n -offset indent -compact
.It KBDGREPSW
get key repetition switch, and
.It KBDSREPSW
set key repetition switch
.El
.Pp
Again take a pointer to int as its argument.
They manipulate the
driver's internal keyboard repetition flag, possible values are:
KBD_REPEATOFF or KBD_REPEATON.
.Pp
.Bl -tag -width 20n -offset indent -compact
.It KBDGLEDS
get LED state, and
.It KBDSLEDS
set LED state manipulate the keyboard indicators, but do not influence
the driver's idea of lock key state.
.El
.Pp
The int where the argument points to
may have the values
KBD_SCROLLLOCK, KBD_NUMLOCK, KBD_CAPSLOCK, which may be used in any
conjunction.
.Pp
.Bl -tag -width 20n -offset indent -compact
.It KBDGLOCK
gets state of SCROLL,NUM,CAPS, and
.It KBDSLOCK
sets state of SCROLL,NUM,CAPS + LEDs
.El
.Pp
These functions should be used in a same manner to get/set the driver's
internal LED flags.
.Pp
.Pp
.Em Keyboard remapping
.Pp
One important feature of the
.Nm
driver is its ability to overload the built-in key definition.
.Pp
.Bl -tag -width 20n -offset indent -compact
.It KBDGCKEY
get current key values,
.It KBDSCKEY
set new key assignment values, and
.It KBDGOKEY
get original key assignment values
.El
.Pp
Arrange those functions.
They take a pointer to a
.Em struct kbd_ovlkey
argument as described below.
In addition,
.Pp
.Bl -tag -width 20n -offset indent -compact
.It KBDRMKEY
removes a key assignment, taking a pointer to an int as its argument which
contains the affected key number;
.It KBDDEFAULT
removes all key assignments.
.El
.Bd -literal
struct kbd_ovlkey                /* complete definition of a key */
{
    u_short keynum;                      /* the key itself */
    u_short type;                        /* type of key, see below */
    u_char  subu;                        /* subtype, ignored on write */
    char    unshift[KBDMAXOVLKEYSIZE+1]; /* emitted string, unshifted */
    u_char  subs;                        /* subtype, ignored on write */
    char    shift[KBDMAXOVLKEYSIZE+1];   /* emitted string, shifted */
    u_char  subc;                        /* subtype, ignored on write */
    char    ctrl[KBDMAXOVLKEYSIZE+1];    /* emitted string, control */
    u_char  suba;                        /* subtype, ignored on write */
    char    altgr[KBDMAXOVLKEYSIZE+1];   /* emitted string, altgr */
};
.Ed
.Pp
The appropriate values for the
.Em type
field are:
.Pp
.Bl -tag -width 20n -offset indent -compact
.It KBD_NONE
no function, key is disabled,
.It KBD_SHIFT
keyboard shift,
.It KBD_META
alternate shift, sets bit8 to ASCII code,
.It KBD_NUM
numeric shift, keypad numeric / application mode,
.It KBD_CTL
control code generation,
.It KBD_CAPS
caps shift - swaps case of letter,
.It KBD_ASCII
ASCII code generating key,
.It KBD_SCROLL
stop output,
.It KBD_FUNC
function key,
.It KBD_KP
keypad keys,
.It KBD_BREAK
ignored,
.It KBD_ALTGR
AltGr translation feature,
.It KBD_SHFTLOCK
shift lock,
.It KBD_CURSOR
cursor keys, and
.It KBD_RETURN
.Dq Return
or
.Dq Enter
keys.
.El
.Pp
The
.Em subtype
field contains one of the values
.Pp
.Bl -tag -width 20n -offset indent -compact
.It KBD_SUBT_STR
key is bound to a string, or
.It KBD_SUBT_FNC
key is bound to a function.
.El
.Pp
.Em Downloadable character set interface
.Pp
EGA and VGA video adaptors provide the capability of downloadable
software fonts.
Since the
.Sq native character set
of any IBM-compatible PC video board does not allow the full interpretation
of DEC multinational character set or ISO Latin-1
.Pq ISO 8859-1 ,
this might be very useful for a U**X environment.
.Pp
.Bl -tag -width 20n -offset indent -compact
.It VGASETFONTATTR
set font attr, and
.It VGAGETFONTATTR
get font attr
.El
.Pp
These functions are used to manipulate the driver's information about a
downloaded font.
They take pointers to a
.Em struct vgafontattr
as their arguments:
.Bd -literal
struct vgafontattr {
    int character_set;          /* VGA character set */
    int font_loaded;            /* Mark font loaded or unloaded */
    int screen_size;            /* Character rows per screen */
    int character_scanlines;    /* Scanlines per character - 1 */
    int screen_scanlines;       /* Scanlines per screen - 1 byte */
};
.Ed
.Pp
Each character of each font is to be downloaded with
.Pp
.Bl -tag -width 20n -offset indent -compact
.It VGALOADCHAR
load vga char,
.El
.Pp
taking a pointer to
.Em struct vgaloadchar
as its argument:
.Bd -literal
struct vgaloadchar {
    int character_set;       /* VGA character set to load into */
    int character;           /* Character to load */
    int character_scanlines; /* Scanlines per character */
    u_char char_table[32];   /* VGA character shape table */
};
.Ed
.Pp
The field
.Em character_set
takes the values
CH_SET0, CH_SET1, CH_SET2, CH_SET3 on EGA's or VGA's.
Since VGA's might have up to eight simultaneously loaded fonts, they can take
CH_SET4, CH_SET5, CH_SET6, or CH_SET7, too.
.Pp
Note that there's a dependence between the font size
and a possible screen height
.Pq in character rows ,
depending on the video adaptor used:
.Bd -literal
Screen size (rows) on:          EGA             VGA
Font size

8 x 8                           43              50
8 x 10                          35              40
8 x 14                          25              28
8 x 16                          not             25
                                applicable
.Ed
.Pp
.Em General screen manipulation commands
.Pp
.Bl -tag -width 20n -offset indent -compact
.It VGACURSOR
sets cursor shape,
.El
.Pp
taking a pointer to the following structure as its argument:
.Bd -literal
struct cursorshape {
    int screen_no; /* screen number for which to set,               */
                   /*  or -1 to set on current active screen        */
    int start;     /* top scanline, range 0... Character Height - 1 */
    int end;       /* end scanline, range 0... Character Height - 1 */
};
.Ed
.Pp
.Bl -tag -width 20n -offset indent -compact
.It VGASETSCREEN
set screen info, and
.It VGAGETSCREEN
get screen info,
.El
.Pp
provide an interface to some general driver internal variables
which might modify the behaviour of the screens,
or which might simply be used to force the driver to switch
to one certain screen.
Their argument is a pointer to the structure:
.Bd -literal
struct screeninfo {
    int adaptor_type;   /* type of video adaptor installed     */
                        /* read only, ignored on write (yet!)  */
    int totalfonts;     /* no of downloadable fonts            */
                        /* read only, ignored on write         */
    int totalscreens;   /* no of virtual screens               */
                        /* read only, ignored on write         */
    int screen_no;      /* screen number, this was got from    */
                        /* on write, if -1, apply pure_vt_mode */
                        /* and/or screen_size to current screen*/
                        /* else to screen_no supplied          */
    int current_screen; /* screen number, which is displayed.  */
                        /* on write, if -1, make this screen   */
                        /* the current screen, else set current*/
                        /* displayed screen to parameter       */
    int screen_size;    /* screen size                         */
                        /* on write, if -1, no change          */
    int force_24lines;  /* force 24 lines if 25 lines VT mode  */
                        /* to get pure VT220 screen size       */
                        /* on write, if -1, no change          */
    int vga_family;     /* if adaptor_type = VGA, this reflects*/
                        /* the chipset family after a read     */
                        /* nothing happens on write ...        */
    int vga_type;       /* if adaptor_type = VGA, this reflects*/
                        /* the chipset after a read            */
                        /* nothing happens on write ...        */
    int vga_132;        /* set to 1 if driver has support for  */
                        /* 132 column operation for chipset    */
                        /* currently ignored on write          */
};
.Ed
.Pp
.Bl -tag -width 20n -offset indent -compact
.It VGASETCOLMS
sets the number of columns for the current screen,
.El
.Pp
its parameter is a pointer to an integer containing either a value of 80,
or a value of 132.
Note that setting the number of columns to 132 is
only supported on VGA adaptors.
Any unsupported numbers cause the ioctl to fail with
.Va errno
.Pq see Xr intro 2
being set to
.Em EINVAL .
.Pp
.Em VGA color palette interface
.Pp
Only on VGA adaptors, there's a color palette register at the output.
It is responsible for the red, green and blue output voltage provided
for each of the 256 internal color codes, each lying in the range of
0 through 63 (with 63 representing the brightest value for a base color).
Thus, these adaptors map each color code to a color of a
.Dq palette
out of 262144 colors.
The commands
.Pp
.Bl -tag -width 20n -offset indent -compact
.It VGAREADPEL
read VGA palette entry, and
.It VGAWRITEPEL
write VGA palette entry
.El
.Pp
establish an interface to these palette registers.
Their argument is a pointer to:
.Bd -literal
struct vgapel {
    unsigned idx;      /* index into palette, 0 .. 255 valid   */
    unsigned r, g, b;  /* RGB values, masked by VGA_PMASK (63) */
};
.Ed
.Pp
.Em Driver identification
.Pp
.Bl -tag -width 20n -offset indent -compact
.It VGAPCVTID
returns information if the current compiled in driver is pcvt and its
major and minor revision numbers.
The call is taking a pointer to the following structure as its argument:
.El
.Pp
.Bd -literal
struct pcvtid {
#define PCVTIDNAMELN  16		/* driver id - string length */
	char name[PCVTIDNAMELN];	/* driver name, == PCVTIDSTR	*/
#define PCVTIDNAME    "pcvt"		/* driver id - string */
	int rmajor;			/* revision number, major	*/
#define PCVTIDMAJOR   3
	int rminor;			/* revision number, minor	*/
#define PCVTIDMINOR   00
};
.Ed
.Pp
.Bl -tag -width 20n -offset indent -compact
.It VGAPCVTINFO
returns information if the current compiled in driver is pcvt and its
compile time options.
The call is taking a pointer to the following structure as its argument:
.El
.Pp
.Bd -literal
struct pcvtinfo {
	u_int opsys;			/* PCVT_xxx(x)BSD */
#define CONF_UNKNOWNOPSYS	0
#define CONF_386BSD		1	/* unsupported !!! */
#define CONF_NETBSD		2
#define CONF_FREEBSD		3
	u_int opsysrel;			/* Release for NetBSD/FreeBSD */
	u_int nscreens;			/* PCVT_NSCREENS */
	u_int scanset;			/* PCVT_SCANSET */
	u_int sysbeepf;			/* PCVT_SYSBEEPF */

/* config booleans */

	u_long compile_opts;		/* PCVT_xxxxxxxxxxxxxxx */
};
.Ed
.Pp
.Em Screen saver
.Pp
Depending on the configuration of a
.Nm
driver, their might be a simple screen saver available.
It is controlled by the command
.Pp
.Bl -tag -width 20n -offset indent -compact
.It VGASCREENSAVER
set timeout for screen saver in seconds; 0 turns it off,
.El
.Pp
taking a pointer to an integer as its argument.
Despite of its command name, this is available on
.Em any
kind of adaptor if configured in by the
.Xr config 8
option
.Dq PCVT_SCREENSAVER
.Pp
.Em Scrollback buffer
.Pp
It is often useful to be able to review text that has already scrolled off the
screen.
By default, 8 pages of scrollback buffer are available by navigating with the
.Em SHIFT+PGUP/PGDN
keys.
The scrollback buffer is destroyed when
switching virtual terminals, changing line modes, or switching between 80/132
columns.
To increase the number of pages stored, see the
.Fl b
option for
.Xr scon 1 .
.Pp
Scrollback support was added in
.Ox 2.6 .
.Pp
.Em Compatibility commands for USL-style VT's
.Pp
Release 3.00 of this
.Nm
driver supports a subset of the USL-style commands used to control
the virtual terminal interface.
This feature is mainly intended to allow
.Em XFree86 ,
release 2.0 or higher, to switch between virtual screens even when
running an X server.
They are ugly with respect to the implied semantics
.Pq i.\& e., they break Berkeley semantics
and are therefore not recommended for common use.
See the file
.Pa i386/include/pcvt_ioctl.h
for their documentation.
.Sh FILES
.Bl -tag -width /sys/arch/i386/isa/pcvt/pcvt_hdr.h -compact
.It Pa /usr/include/machine/pcvt_ioctl.h
.Xr ioctl 2
function call definitions
.It Pa /dev/ttyC?
individual virtual terminal devices
.It Pa /dev/console
device node for
.Nm
access
.It Pa /dev/pcvtctl
.Xr moused 8
communication device
.It Pa /sys/arch/i386/isa/pcvt/pcvt_hdr.h
documents the various compile-time options to tailor
.Nm pcvt
.Sh HISTORY
The
.Nm
driver has been developed for and contributed to 386BSD release 0.1.
Since release 3.00 explicit support is provided for NetBSD 0.9.
It is expected
that no further development on pcvt is done for 386BSD 0.1 after release 3.00,
in fact, 386BSD support was dropped with release 3.20.
.Sh AUTHORS
.Bl -tag -width 30n -offset indent
.It Written by :
Hellmuth Michaelis
.Pq hm@@hcshh.hcs.de
.It With much help from :
Brian Dunford-Shore
.Pq brian@@morpheus.wustl.edu
.br
.if n Joerg Wunsch
.if t J\(:org Wunsch
.Pq joerg_wunsch@@uriah.sax.de
.br
.It "This driver is based on several people's previous work, notably by:"
William Jolitz' and Don Ahn's
.Xr pc 4
implementation
.Pq ljolitz@@cardio.ucsf.edu
.br
Holger Veit
.Pq veit@@du9ds3.uni-duisburg.de, now veit@@first.gmd.de
.Sh SEE ALSO
.Xr cursor 1 ,
.Xr fed 1 ,
.Xr fontedit 1 ,
.Xr kcon 1 ,
.Xr loadfont 1 ,
.Xr mcon 1 ,
.Xr scon 1 ,
.Xr intro 2 ,
.Xr ioctl 2 ,
.Xr config 8 ,
.Xr ispcvt 8
.Sh BUGS
Certainly existent.
See the file
.Pa BugList
in the Documentation directory for an up-to-date list.
.Ss Tested Video Boards
.Bd -literal
Manufacturer                    Chipset                 Monitor

2theMax (?)                     ET4000                  VGA Color
Video7 Inc.                     Video 7                 VGA Color
Diamond Stealth VRAM            S3                      NEC 3FGx
Trident                         TVGA 8800CS             NEC 3D
Data General                    C&T P82C604             VGA Color
NoName Hercules                 W86855AF                Mono
Kyocera (Mainboard)		WD90C11			Sony Color
unknown				ET3000			NEC 3D
.Ed
.Ss Tested Keyboards
.Bd -literal
Manufacturer                    Type                    Layout

Cherry                          MF II                   US
Cherry/Tandon                   MF II                   German
Hewlett-Packard                 MF II                   US
Hewlett-Packard                 MF II                   German
Tatung                          AT                      German
.Ed

There is absolutely NO support for the ancient PC-keyboards
.Pq they had 83 keys .
.Pp
There is only limited support for AT-keyboards
.Bo
they have 84 keys, and a separate numeric keypad,
they don't have F11/F12 keys
.Bc
because the emulator needs F9 through F12 for control functions, and due to
the current design of the keyboard driver there is no
.Pq full
support for national keyboards because
of the lack of an ALtGr key.
.Pp
MF-keyboards are fully supported, 101- and 102-key versions.
@


1.26
log
@ttyC? with one max letter after ttyC
@
text
@d1 1
a1 1
.\" $OpenBSD: pcvt.4,v 1.25 2000/10/11 21:27:19 aaron Exp $
@


1.25
log
@Now you can use both left and right SHIFT keys with PGUP/PGDN to scrollback in
the PCVT (i386) console.
@
text
@d1 1
a1 1
.\" $OpenBSD: pcvt.4,v 1.24 2000/10/05 14:25:59 aaron Exp $
d109 1
a109 1
.Pa /dev/ttyC*
@


1.24
log
@Many fixups and corrections, a bit more needed though.
@
text
@d1 1
a1 1
.\" $OpenBSD: pcvt.4,v 1.23 2000/09/11 01:25:53 aaron Exp $
d113 1
a113 1
.Em LEFT_SHIFT+PGUP/PGDN
d698 1
a698 1
.Em LEFT_SHIFT+PGUP/PGDN
@


1.23
log
@PCVT_EMU_MOUSE is gone; todd@@
@
text
@d1 1
a1 1
.\" $OpenBSD: pcvt.4,v 1.22 2000/05/31 13:48:04 aaron Exp $
a60 1
device
d71 1
a71 1
.Nm pcvt
d75 2
a76 2
standard console device driver. Besides the ability of handling
multiple virtual screens,
d81 2
a82 1
functionality. See
d85 1
a85 1

a96 1

d104 1
a104 1
.Em CTRL+ALT+Fn,
d108 4
a111 5
have created additional /dev/ttyC* entries.

One can also cycle through all available screens by using
.Em ALT+F12

d114 1
a114 2
(more info further)

d116 5
a120 1
.Bl -bullet
a143 5
Optional function key label support
.if t \('a
.if n 'a
la Hewlett-Packard
.It
d146 1
a146 1
Support for MDA, CGA, EGA and VGA display adaptors
d148 1
a148 1
Support for 132 column operation on VGA chipsets
d152 2
d162 1
a162 1

d164 2
a165 1
.Bl -bullet
a181 3
.Pq yet
.It
Help you to make money...
a182 1

d185 1
a185 1
.Nm pcvt
d187 2
a188 2
everyone's needs. The preferred way for those configurations is to
provide appropriate
d190 2
a191 2
lines within the config file, possibly overriding the built-in default
values. Therefore it is possible to compile several distinct kernels
d193 1
a193 1

d195 2
a196 1
options. Refer to the file
d199 1
a199 1

d203 5
a207 4
is substituted. If an option value is given as 0, this options is
deactivated. Any other value is substituted by 1, too. If an option
is omitted, a built-in default is assumed.

d209 1
a209 1

d214 1
a214 1

d219 1
a219 1

d221 2
a222 2
If enabled, a blinking-star screensaver is used. If disabled, the screen
is simply blanked
d226 1
a226 1

d239 1
a239 1

d244 1
a244 1

d251 2
a252 1
original DEV VT220 (TM). Thus it should be possible to use the
d260 1
a260 1

d266 2
a267 1
key modifier. If disabled, then normal key code with the value
a271 1

d273 1
a273 1

d275 2
a276 2
debugging purposes or as a workaround for hardware problems. They are
found in
a278 1

d284 1
a284 1
.Nm pcvt
d287 1
a287 2


d289 1
a289 1

d291 1
a291 2


d293 1
a293 1

d295 1
a295 1

d305 1
a305 1

d309 2
a310 2
KBD_TPD1000 for 1000 ms, in steps of 250 ms. The typematic repeat
rates are
d312 3
a314 2
KBD_TPM20 for 2.0 characters per second. The intermediate values
are: 30.0, 26.7, 24.0, 21.8, 20.0, 18.5, 17.1, 16.0, 15.0, 13.3,
d317 1
a317 2


d324 3
a326 2

Again take a pointer to int as its argument. They manipulate the
d329 1
a329 2


d337 1
a337 1

d342 1
a342 1

d349 1
a349 1

d352 2
a353 2


d355 1
a355 1

d357 1
a357 1
.Nm pcvt
d359 1
a359 1

d368 3
a370 2

Arrange those functions. They take a pointer to a
d372 3
a374 2
argument as described below. In addition,

d397 1
a397 1

d401 1
a401 1

d437 1
a437 1

d441 1
a441 1

d448 1
a448 66

.Em Mouse emulation

The mouse emulator
.Pq if configured in
fakes a three-button mouse using the Mouse Systems protocol. The first
.Nm pcvt
device node not used by a virtual screen is the mouse device. I.\& e.,
for the default value of 8 virtual screens,
.Pa /dev/ttyC0
through
.Pa /dev/ttyC7
would refer to the virtual screens, and
.Pa /dev/ttyC8
were the mouse emulator device. The mouse emulation is turned on by
pressing the
.Aq Em NumLock
key. The pointer is moved by the numerical keypad keys, into the
obvious directions. The pointer is initially moved in single steps,
and is accelerated after an adjustable time
.Pq default: 500 ms
by about 6 times. The mouse buttons are emulated by three normal
keys, by default the function keys
.Aq Em \&F1 ,
.Aq Em \&F2 ,
and
.Aq Em \&F3 .
There are two selectable flavors available: normal and
.Dq sticky
buttons. Normal buttons behave as expected.
.Dq Sticky
buttons are notified as button-press on the first keypress. They
.Dq stick
until the key is pressed again
.Pq or another button-emulating key instead .
Button presses and releases are notified to the user by a simple
.Dq pling ,
or
.Dq plong ,
respectively, generated from the PC's built-in speaker.

The following commands control the emulation.

.Bl -tag -width 20n -offset indent -compact
.It KBDMOUSEGET
get the current definitions, and
.It KBDMOUSESET
set new definitions.
.El

Both accept a
.Li struct mousedefs *
as the third argument to the ioctl call:
.Bd -literal
struct mousedefs {
    int leftbutton;     /* (PC) scan code for "left button" key     */
    int middlebutton;   /* (PC) scan code for "mid button" key      */
    int rightbutton;    /* (PC) scan code for "right button" key    */
    int stickybuttons;  /* if true, the buttons are "sticky"        */
    int acceltime;      /* timeout in microseconds to start pointer */
                        /* movement acceleration                    */
    /* defaults to: scan(F1), scan(F2), scan(F3), false, 500000     */
};
.Ed


d450 1
a450 1

d452 2
a453 1
software fonts. Since the
d459 1
a459 1

d466 1
a466 1

d468 2
a469 1
downloaded font. They take pointers to a
d481 1
a481 1

d483 1
a483 1

d488 1
a488 1

d500 1
a500 1

d504 2
a505 2
CH_SET0, CH_SET1, CH_SET2, CH_SET3 on EGA's or VGA's. Since VGA's
might have up to eight simultaneously loaded fonts, they can take
d507 1
a507 1

d522 1
a522 2


d524 1
a524 1

d529 1
a529 1

d539 1
a539 1

d546 1
a546 1

d550 2
a551 1
to one certain screen. Their argument is a pointer to the structure:
d584 1
a584 1

d589 1
a589 1

d591 4
a594 3
or a value of 132. Note that setting the number of columns to 132 is
only supported on VGA adaptors. Any unsupported numbers cause the ioctl
to fail with
d599 1
a599 1

d601 1
a601 1

d608 3
a610 2
out of 262144 colors. The commands

d617 3
a619 3

establish an interface to these palette registers. Their argument is
a pointer to:
d626 1
a626 2


d628 1
a628 1

d632 2
a633 2
major and minor revision numbers. the call is taking a pointer to the
following structure as its argument:
d635 1
a635 1

d647 1
a647 2


d651 2
a652 2
compile time options. the call is taking a pointer to the following
structure as its argument:
d654 1
a654 1

d672 1
a672 2


d674 1
a674 1

d676 4
a679 4
.Nm pcvt
driver, their might be a simple screen saver available. It is controlled
by the command

d684 3
a686 3

taking a pointer to an integer as its argument. Despite of its command name,
this is available on
d692 1
a692 1

d694 1
a694 1

d707 1
a707 1

d710 1
a710 1

d712 1
a712 1

d714 1
a714 1
.Nm pcvt
d716 2
a717 2
the virtual terminal interface. This feature is mainly intended to
allow
d720 2
a721 1
running an X server. They are ugly with respect to the implied semantics
d723 2
a724 1
and are therefore not recommended for common use. See the file
a726 1

d728 1
a728 1
.Bl -tag -width /usr/include/machine/pcvt_ioctl.h
a729 1
Definitions for
d731 1
a731 1
function calls
d733 1
d735 8
a742 1
Device nodes to access the
a743 5
driver
.It Pa arch/i386/isa/pcvt/pcvt_hdr.h
.Pq relative to the kernel source tree
Documents the various compile-time options to tailor
.Nm pcvt .
d746 4
a749 3
.Nm pcvt
driver has been developed for and contributed to 386BSD release 0.1. Since
release 3.00 explicit support is provided for NetBSD 0.9. It is expected
d765 1
a765 2
.It This driver is based on several people's previous
.It work, notably by :
d786 2
a787 1
Certainly existent. See the file
a789 1

a802 1

d816 1
a816 1

d827 1
a827 1

@


1.22
log
@Better English.
@
text
@d1 1
a1 1
.\" $OpenBSD: pcvt.4,v 1.21 2000/01/22 12:00:41 aaron Exp $
a259 8
.br
Default: off

.It Em PCVT_EMU_MOUSE
Emulate a three-button mouse via the keypad. Useful for notebooks when
running XFree86. See
.Sx Mouse emulation
below.
@


1.21
log
@Use .Va macro when referring to the global variable errno.
@
text
@d1 1
a1 1
.\" $OpenBSD: pcvt.4,v 1.20 2000/01/19 15:51:54 aaron Exp $
d108 2
a109 2
can be from one to four on the standard system, and higher if you
have created addition /dev/ttyC* entries.
@


1.21.2.1
log
@Update the SMP branch to -current, this breaks the SMP branch though.
But it will be fixed soonish.  Note, nothing new has happened, this is just
a merge of the trunk into this branch.
@
text
@d1 1
a1 1
.\" $OpenBSD: pcvt.4,v 1.26 2000/11/23 10:01:34 deraadt Exp $
d61 1
d72 1
a72 1
.Nm
d76 2
a77 2
standard console device driver.
Besides the ability of handling multiple virtual screens,
d82 1
a82 2
functionality.
See
d85 1
a85 1
.Pp
d97 1
d105 1
a105 1
.Em CTRL+ALT+Fn ,
d108 6
a113 5
can be from one to four on the standard system or higher if you
have created additional
.Pa /dev/ttyC?
entries.
.Pp
d115 3
a117 2
.Em SHIFT+PGUP/PGDN
(more info further on this further down).
d119 1
a119 5
The
.Nm
driver includes the following features:
.Pp
.Bl -bullet -compact
d143 5
d150 1
a150 1
Support for MDA, CGA, EGA, and VGA display adaptors
d152 1
a152 1
Support for 132 column operation on some VGA chipsets
a155 2
Console mouse support
.It
d164 1
a164 1
.Pp
d166 1
a166 2
.Pp
.Bl -bullet -compact
d183 3
d187 1
d190 1
a190 1
.Nm
d192 2
a193 2
everyone's needs.
The preferred way for those configurations is to provide appropriate
d195 2
a196 2
lines within the config file, possibly overriding the built-in default values.
Therefore it is possible to compile several distinct kernels
d198 1
a198 1
.Pp
d200 1
a200 2
options.
Refer to the file
d203 1
a203 1
.Pp
d207 4
a210 5
is substituted.
If an option value is given as 0, this options is deactivated.
Any other value is substituted by 1, too.
If an option is omitted, a built-in default is assumed.
.Pp
d212 1
a212 1
.Pp
d217 1
a217 1
.Pp
d222 1
a222 1
.Pp
d224 2
a225 2
If enabled, a blinking-star screensaver is used.
If disabled, the screen is simply blanked
d229 1
a229 1
.Pp
d242 1
a242 1
.Pp
d247 1
a247 1
.Pp
d254 1
a254 2
original DEV VT220 (TM).
Thus it should be possible to use the
d262 9
a270 1
.Pp
d276 1
a276 2
key modifier.
If disabled, then normal key code with the value
d281 1
d283 1
a283 1
.Pp
d285 2
a286 2
debugging purposes or as a workaround for hardware problems.
They are found in
d289 1
d295 1
a295 1
.Nm
d298 2
a299 1
.Pp
d301 1
a301 1
.Pp
d303 2
a304 1
.Pp
d306 1
a306 1
.Pp
d308 1
a308 1
.Pp
d318 1
a318 1
.Pp
d322 2
a323 2
KBD_TPD1000 for 1000 ms, in steps of 250 ms.
The typematic repeat rates are
d325 2
a326 3
KBD_TPM20 for 2.0 characters per second.
The intermediate values are:
30.0, 26.7, 24.0, 21.8, 20.0, 18.5, 17.1, 16.0, 15.0, 13.3,
d329 2
a330 1
.Pp
d337 2
a338 3
.Pp
Again take a pointer to int as its argument.
They manipulate the
d341 2
a342 1
.Pp
d350 1
a350 1
.Pp
d355 1
a355 1
.Pp
d362 1
a362 1
.Pp
d365 2
a366 2
.Pp
.Pp
d368 1
a368 1
.Pp
d370 1
a370 1
.Nm
d372 1
a372 1
.Pp
d381 2
a382 3
.Pp
Arrange those functions.
They take a pointer to a
d384 2
a385 3
argument as described below.
In addition,
.Pp
d408 1
a408 1
.Pp
d412 1
a412 1
.Pp
d448 1
a448 1
.Pp
d452 1
a452 1
.Pp
d459 66
a524 1
.Pp
d526 1
a526 1
.Pp
d528 1
a528 2
software fonts.
Since the
d534 1
a534 1
.Pp
d541 1
a541 1
.Pp
d543 1
a543 2
downloaded font.
They take pointers to a
d555 1
a555 1
.Pp
d557 1
a557 1
.Pp
d562 1
a562 1
.Pp
d574 1
a574 1
.Pp
d578 2
a579 2
CH_SET0, CH_SET1, CH_SET2, CH_SET3 on EGA's or VGA's.
Since VGA's might have up to eight simultaneously loaded fonts, they can take
d581 1
a581 1
.Pp
d596 2
a597 1
.Pp
d599 1
a599 1
.Pp
d604 1
a604 1
.Pp
d614 1
a614 1
.Pp
d621 1
a621 1
.Pp
d625 1
a625 2
to one certain screen.
Their argument is a pointer to the structure:
d658 1
a658 1
.Pp
d663 1
a663 1
.Pp
d665 3
a667 4
or a value of 132.
Note that setting the number of columns to 132 is
only supported on VGA adaptors.
Any unsupported numbers cause the ioctl to fail with
d672 1
a672 1
.Pp
d674 1
a674 1
.Pp
d681 2
a682 3
out of 262144 colors.
The commands
.Pp
d689 3
a691 3
.Pp
establish an interface to these palette registers.
Their argument is a pointer to:
d698 2
a699 1
.Pp
d701 1
a701 1
.Pp
d705 2
a706 2
major and minor revision numbers.
The call is taking a pointer to the following structure as its argument:
d708 1
a708 1
.Pp
d720 2
a721 1
.Pp
d725 2
a726 2
compile time options.
The call is taking a pointer to the following structure as its argument:
d728 1
a728 1
.Pp
d746 2
a747 1
.Pp
d749 1
a749 1
.Pp
d751 4
a754 4
.Nm
driver, their might be a simple screen saver available.
It is controlled by the command
.Pp
d759 3
a761 3
.Pp
taking a pointer to an integer as its argument.
Despite of its command name, this is available on
d767 1
a767 1
.Pp
d769 1
a769 1
.Pp
d773 1
a773 1
.Em SHIFT+PGUP/PGDN
d782 1
a782 1
.Pp
d785 1
a785 1
.Pp
d787 1
a787 1
.Pp
d789 1
a789 1
.Nm
d791 2
a792 2
the virtual terminal interface.
This feature is mainly intended to allow
d795 1
a795 2
running an X server.
They are ugly with respect to the implied semantics
d797 1
a797 2
and are therefore not recommended for common use.
See the file
d800 1
d802 1
a802 1
.Bl -tag -width /sys/arch/i386/isa/pcvt/pcvt_hdr.h -compact
d804 1
d806 1
a806 1
function call definitions
a807 1
individual virtual terminal devices
d809 1
a809 8
device node for
.Nm
access
.It Pa /dev/pcvtctl
.Xr moused 8
communication device
.It Pa /sys/arch/i386/isa/pcvt/pcvt_hdr.h
documents the various compile-time options to tailor
d811 5
d818 3
a820 4
.Nm
driver has been developed for and contributed to 386BSD release 0.1.
Since release 3.00 explicit support is provided for NetBSD 0.9.
It is expected
d836 2
a837 1
.It "This driver is based on several people's previous work, notably by:"
d858 1
a858 2
Certainly existent.
See the file
d861 1
d875 1
d889 1
a889 1
.Pp
d900 1
a900 1
.Pp
@


1.21.2.2
log
@Merge in -current from two days ago in the SMP branch.
As usual with merges, they do not indicate progress, so do not hold
your breath for working SMP, and do not mail me and ask about the
state of it.  It has not changed.  There is work ongoing, but very, very
slowly.  The commit is done in parts as to not lock up the tree in too
big chunks at a time.
@
text
@d1 1
a1 1
.\" $OpenBSD: pcvt.4,v 1.21.2.1 2001/04/18 16:08:16 niklas Exp $
@


1.20
log
@Sloppy me.
@
text
@d1 1
a1 1
.\" $OpenBSD: pcvt.4,v 1.19 1999/11/25 20:24:19 aaron Exp $
d668 1
a668 1
.Em errno
@


1.19
log
@Remove the keyboard mouse emulator, HP emulation mode, and PCVT_SHOWKEYS
debugging cruft. Also fix a bug where you were not able to hold down the
scrollback hotkeys.
@
text
@d1 1
a1 1
.\" $OpenBSD: pcvt.4,v 1.18 1999/10/16 18:56:37 aaron Exp $
a216 12

.It Em PCVT_VT220KEYB
If activated, a keyboard layout resembling a DEC VT200 (TM) is generated.
If deactivated, a mixture between VT220 and HP is used. See the files
.Pa Keyboard.VT
and
.Pa Keyboard.HP
in the
.Nm pcvt
documentation directory for a full description.
.br
Default: off
@


1.18
log
@- Add support for a traditional PC display (16 colors and use the standard IBM
font) and make it the default mode. This is more or less a hack, since pcvt
was developed only to be a vt220 terminal emulator.
- Document new default mode in pcvt(4).
- Add -o option to scon(1) for toggling between the new and legacy modes.
@
text
@d1 1
a1 1
.\" $OpenBSD: pcvt.4,v 1.17 1999/10/07 18:37:54 wvdputte Exp $
d263 1
a263 1
VT emulation with 25 lines, and HP emulation with 28 lines
d265 1
a265 1
default to 24 lines only to provide a better compatibility to the
a653 2
    int pure_vt_mode;   /* flag, pure VT mode or HP/VT mode    */
                        /* on write, if -1, no change          */
d657 1
a657 2
                        /* or 28 lines HP mode to get pure     */
                        /* VT220 screen size                   */
a669 6

Its field
.Em pure_vt_mode
may take the values M_HPVT for a mixed VTxxx and HP Mode, with function
key labels and a status line, or M_PUREVT for only VTxxx sequences
recognized, with no labels.
@


1.17
log
@Document ALT+F12, stress LEFT_SHIFT+PGUP/PGDN and point to machdep.kbdreset
@
text
@d1 1
a1 1
.\" $OpenBSD: pcvt.4,v 1.16 1999/10/01 10:00:41 aaron Exp $
d86 12
d99 2
a100 1
Despite the complexity of options, if installed in a normal OpenBSD
@


1.16
log
@Update the man page to reflect reality.
@
text
@d1 1
a1 1
.\" $OpenBSD: pcvt.4,v 1.15 1999/09/23 04:12:08 alex Exp $
d98 7
d236 5
a240 1
Default: off
@


1.15
log
@Typo fixes.
@
text
@d1 1
a1 1
.\" $OpenBSD: pcvt.4,v 1.14 1999/09/14 18:43:30 aaron Exp $
d773 6
a778 6
switching virtual terminals or loading new character sets.
To increase the number of pages stored, increase the value of
.Dv SCROLLBACK_PAGES
in
.Pa arch/i386/isa/pcvt/pcvt_hdr.h
and recompile your kernel.
@


1.14
log
@Document scrollback support.
@
text
@d1 1
a1 1
.\" $OpenBSD: pcvt.4,v 1.13 1999/07/14 13:34:59 millert Exp $
d640 1
a640 1
                        /* nothing happenes on write ...       */
d643 1
a643 1
                        /* nothing happenes on write ...       */
@


1.13
log
@Link vt.4 to pcvt.4 so one can do "man 4 vt" and have it do what you
expect.  Also, add xref's to the pcvt userland utils.
@
text
@d1 1
a1 1
.\" $OpenBSD: pcvt.4,v 1.12 1999/07/09 13:35:32 aaron Exp $
d134 2
d764 18
@


1.12
log
@- remove all trailing whitespace
     * except when it is escaped with a `\' at the end of the line
- fix remaining .Nm usage as well
- this is from a patch I received from kwesterback@@home.com, who has been
  working on some scripts for fixing formatting errors in mdoc'd man pages

Ok, so there could be a cost/benefit debate with this commit, but since I have
the patch we might as well commit it...
@
text
@d1 1
a1 1
.\" $OpenBSD: pcvt.4,v 1.11 1999/07/07 10:50:08 aaron Exp $
d823 7
d832 2
a833 1
.Xr config 8
@


1.11
log
@The proper order of the ``introductory'' macros in a man page is .Dd/.Dt/.Os.
Out of the approximately 1450 man pages, only about 90 of them were wrong.
Thanks to kwesterback@@home.com for coming up with a script and patch to repair
this. The patch also inserted a .Os macro in the few man pages that were
missing one.
@
text
@d1 2
a2 2
.\" $OpenBSD: pcvt.4,v 1.10 1999/07/02 20:11:46 aaron Exp $
.\" 
d5 1
a5 1
.\" 
d7 1
a7 1
.\" 
d91 1
a91 1
at least on a North American keyboard, 
d93 1
a93 1
where 
d117 1
a117 1
All VT220 character sets plus ISO Latin-1 and DEC technical supported 
d416 1
a416 1
.It KBD_FUNC    
d631 1
a631 1
                        /* on write, if -1, no change          */    
d712 1
a712 1
#define PCVTIDMINOR   00	
@


1.10
log
@consistent .Dd usage; proper format is: .Dd Month DD, YYYY
@
text
@d1 1
a1 1
.\" $OpenBSD: pcvt.4,v 1.9 1999/05/16 19:57:51 alex Exp $
d46 1
a47 1
.Dt PCVT 4
@


1.9
log
@Cleanup xrefs under SEE ALSO.  Specifically:

  - Sort xrefs by section, and then alphabetically.
  - Add missing commas between xref items.
  - Remove commas from the last xref entry.
  - Remove duplicate entries.
@
text
@d1 1
a1 1
.\" $OpenBSD: pcvt.4,v 1.8 1999/05/12 21:58:32 aaron Exp $
d45 1
a45 1
.Dd Auguest 10, 1998
@


1.8
log
@builtin -> built-in
@
text
@d1 1
a1 1
.\" $OpenBSD: pcvt.4,v 1.7 1998/09/07 16:44:37 aaron Exp $
a822 1
.Xr config 8 ,
d824 2
a825 1
.Xr ioctl 2
@


1.7
log
@More man page fixes. Particularly fix uses of it's/its, affect/effect,
then/than and such. Other miscellaneous problems fixed across these source
files.
@
text
@d1 1
a1 1
.\" $OpenBSD: pcvt.4,v 1.6 1998/08/10 16:41:18 millert Exp $
d209 1
a209 1
Enables the builtin screensaver feature.
d357 1
a357 1
driver is its ability to overload the builtin key definition.
@


1.6
log
@reflect reality
@
text
@d1 1
a1 1
.\" $OpenBSD$
d324 2
a325 2
again take a pointer to int as argument. They manipulate the
drivers internal keyboard repetition flag, possible values are:
d334 1
a334 1
the drivers idea of lock key state.
d349 2
a350 2
should be used in a same manner to get/set the drivers internal
LED flags.
d357 1
a357 1
driver is its ability to overload the built in key definition.
d368 1
a368 1
arrange those functions. The take a pointer to a
d370 1
a370 1
as argument as described below. In addition,
d374 1
a374 1
removes a key assignment, taking a pointer to an int as argument which
d528 2
a529 2
are used to manipulate the drivers information about a downloaded
font. The take a pointer to a
d531 1
a531 1
as argument:
d591 1
a591 1
taking a pointer to the following structure as argument:
d699 1
a699 1
returns information if the current compiled in driver is pcvt and it's
d701 1
a701 1
following structure as argument:
d719 1
a719 1
returns information if the current compiled in driver is pcvt and it's
d721 1
a721 1
structure as argument:
d755 1
a755 1
taking a pointer to an integer as argument. Despite of its command name,
d825 1
a825 1
.Xr ioctl 2 .
@


1.5
log
@add .Os
@
text
@d1 1
d45 1
a45 1
.Dd February 27, 1994
d52 1
a52 6
options
.Do
.Em PCVT_FREEBSD = version
|
.Em PCVT_NETBSD = version
.Dc
d54 1
a54 3
.Op options Dq Em PCVT_NSCREENS = number
.br
.Op options Dq Em PCVT_XXXX
d66 1
a66 2
.Dq Em IO_KBD
.Em tty
a68 2
vector
.Em pcrint
a168 37
console driver is currently available for the Intel-based BSD operating
systems
.Em NetBSD/i386 Pq release 0.9 or higher,
and
.Em FreeBSD Pq release 1.0-GAMMA or higher .
In order to get the appropriate system support, one of the options
.Em PCVT_NETBSD ,
or
.Em PCVT_FREEBSD
must be defined in the system's config file
.Pq see Xr config 8 .
In addition, for the
.Em FreeBSD
and
.Em NetBSD
operating systems, it is necessary to set this option to the operating
system's version number.
For
.Em FreeBSD
this version number must be expressed as a 3-digit number.
E.\& g., if you are running the 1.0 release
.Pq which is actually version 1.0.2 ,
you should define

.Em PCVT_FREEBSD = 102

For
.Em NetBSD
this version number must be expressed as 9 if you are running NetBSD 0.9
and anything greater than 9 for NetBSD-current (pre 1.0). It is recommended
to use (as with FreeBSD) 100 for NetBSD 1.0 and 999 for NetBSD-current.
E.\& g., if you are running the NetBSD 1.0 release, you should define

.Em PCVT_NETBSD = 100

The
.Nm pcvt
d172 1
a172 1
.Em options
d179 1
a179 1
.Pa i386/isa/pcvt/pcvt_hdr.h
d218 1
a218 1
Default: on
d273 1
a273 1
.Pa i386/isa/pcvt/pcvt_hdr.h
d789 1
a789 1
.It Pa i386/isa/pcvt/pcvt_hdr.h
a822 1
.Xr pc 4 ,
@


1.4
log
@doc keys; ian@@darwinsys.com
@
text
@d45 1
@


1.3
log
@virtual terimals' name become ttyC*
@
text
@d86 1
a86 1
the probably most important is an emulation of a wide range
d93 12
@


1.2
log
@partial sync with netbsd 960418, more to come
@
text
@d487 1
a487 1
.Pa /dev/ttyv0
d489 1
a489 1
.Pa /dev/ttyv7
d491 1
a491 1
.Pa /dev/ttyv8
d817 1
a817 1
.It Pa /dev/ttyv?
@


1.1
log
@Initial revision
@
text
@a766 2
	u_int updatefast;		/* PCVT_UPDATEFAST */
	u_int updateslow;		/* PCVT_UPDATESLOW */
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
