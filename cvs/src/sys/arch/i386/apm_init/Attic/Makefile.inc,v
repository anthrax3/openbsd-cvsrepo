head	1.3;
access;
symbols
	SMP_SYNC_A:1.3
	SMP_SYNC_B:1.3
	UBC_SYNC_A:1.3
	UBC_SYNC_B:1.3
	SMP:1.3.0.2
	OPENBSD_2_1:1.1.0.4
	OPENBSD_2_1_BASE:1.1
	OPENBSD_2_0:1.1.0.2
	OPENBSD_2_0_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	97.09.21.04.33.19;	author mickey;	state dead;
branches;
next	1.2;

1.2
date	97.05.30.08.05.54;	author niklas;	state Exp;
branches;
next	1.1;

1.1
date	96.04.29.14.15.19;	author hvozda;	state Exp;
branches;
next	;


desc
@@


1.3
log
@no this ugly hack, no more!
@
text
@#	$NetBSD: Makefile.inc,v 1.12 1995/10/07 09:56:55 mycroft Exp $
#
#	NOTE: $S must correspond to the top of the 'sys' tree

APMDIR!=	cd ${I386}/apm_init; pwd
APMDST=		lib/apm_init
APMINC?=	${APMDST}/apm_init.inc

APMDEPS= \
	${APMDIR}/Makefile \
	${APMDIR}/apm_bios.h \
	${APMDIR}/apm_init.S \
	${APMDIR}/apm_segments.h \
	${APMDIR}/bin2asm.sh \
	${APMDIR}/real_prot.S \
	${APMDIR}/real_prot.h \
	${APMDIR}/rmaouthdr \
	${APMDIR}/table.c

${APMINC}:	${APMDEPS} ${APMDST}
	@@echo making sure the apm grappling hook is up to date...
	@@(cd ${APMDST} && ${MAKE} -f ${APMDIR}/Makefile \
	  APMCC="${CC}" \
	  APMCFLAGS="${CFLAGS}" \
	  APMDIR="${APMDIR}" apm_init.inc)

clean:: 		.NOTMAIN __always_make_apmlib
	@@echo cleaning the apm grappling hook objects
	@@(cd ${APMDST} && ${MAKE} -f ${APMDIR}/Makefile \
	  APMCC="${CC}" \
	  APMCFLAGS="${CFLAGS}" \
	  APMDIR="${APMDIR}" clean)

${APMDST} __always_make_apmlib:	.NOTMAIN
	@@([ -d ${APMDST} ] || mkdir -p ${APMDST})
@


1.2
log
@Fix APM building with absolute $S path
@
text
@@


1.1
log
@Pull in John Kohl's [jtk@@netbsd.org] most recent (15Apr96) APM and PCMCIA work
(original PCMCIA framework  by Stefan Grefen [grefen@@convex.com]).
@
text
@d5 2
a6 4
APMDIR=	${I386}/apm_init

APMDST=	lib/apm_init
APMREL?=	../../
d22 1
a22 1
	@@(cd ${APMDST} && ${MAKE} -f ${APMREL}${APMDIR}/Makefile \
a24 1
	  APMREL="${APMREL}" \
d29 1
a29 1
	@@(cd ${APMDST} && ${MAKE} -f ${APMREL}${APMDIR}/Makefile \
a31 1
	  APMREL="${APMREL}" \
@
