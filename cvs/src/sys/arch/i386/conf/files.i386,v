head	1.234;
access;
symbols
	OPENBSD_6_2_BASE:1.234
	OPENBSD_6_1:1.231.0.4
	OPENBSD_6_1_BASE:1.231
	OPENBSD_6_0:1.229.0.2
	OPENBSD_6_0_BASE:1.229
	OPENBSD_5_9:1.228.0.2
	OPENBSD_5_9_BASE:1.228
	OPENBSD_5_8:1.225.0.4
	OPENBSD_5_8_BASE:1.225
	OPENBSD_5_7:1.220.0.2
	OPENBSD_5_7_BASE:1.220
	OPENBSD_5_6:1.217.0.4
	OPENBSD_5_6_BASE:1.217
	OPENBSD_5_5:1.216.0.4
	OPENBSD_5_5_BASE:1.216
	OPENBSD_5_4:1.211.0.4
	OPENBSD_5_4_BASE:1.211
	OPENBSD_5_3:1.211.0.2
	OPENBSD_5_3_BASE:1.211
	OPENBSD_5_2:1.210.0.2
	OPENBSD_5_2_BASE:1.210
	OPENBSD_5_1_BASE:1.209
	OPENBSD_5_1:1.209.0.2
	OPENBSD_5_0:1.207.0.2
	OPENBSD_5_0_BASE:1.207
	OPENBSD_4_9:1.200.0.2
	OPENBSD_4_9_BASE:1.200
	OPENBSD_4_8:1.198.0.2
	OPENBSD_4_8_BASE:1.198
	OPENBSD_4_7:1.195.0.2
	OPENBSD_4_7_BASE:1.195
	OPENBSD_4_6:1.193.0.4
	OPENBSD_4_6_BASE:1.193
	OPENBSD_4_5:1.188.0.2
	OPENBSD_4_5_BASE:1.188
	OPENBSD_4_4:1.182.0.2
	OPENBSD_4_4_BASE:1.182
	OPENBSD_4_3:1.172.0.2
	OPENBSD_4_3_BASE:1.172
	OPENBSD_4_2:1.164.0.2
	OPENBSD_4_2_BASE:1.164
	OPENBSD_4_1:1.154.0.2
	OPENBSD_4_1_BASE:1.154
	OPENBSD_4_0:1.150.0.2
	OPENBSD_4_0_BASE:1.150
	OPENBSD_3_9:1.143.0.2
	OPENBSD_3_9_BASE:1.143
	OPENBSD_3_8:1.136.0.2
	OPENBSD_3_8_BASE:1.136
	OPENBSD_3_7:1.132.0.2
	OPENBSD_3_7_BASE:1.132
	OPENBSD_3_6:1.126.0.2
	OPENBSD_3_6_BASE:1.126
	SMP_SYNC_A:1.122
	SMP_SYNC_B:1.122
	OPENBSD_3_5:1.111.0.2
	OPENBSD_3_5_BASE:1.111
	OPENBSD_3_4:1.108.0.2
	OPENBSD_3_4_BASE:1.108
	UBC_SYNC_A:1.104
	OPENBSD_3_3:1.102.0.2
	OPENBSD_3_3_BASE:1.102
	OPENBSD_3_2:1.99.0.2
	OPENBSD_3_2_BASE:1.99
	OPENBSD_3_1:1.95.0.2
	OPENBSD_3_1_BASE:1.95
	UBC_SYNC_B:1.99
	UBC:1.94.0.2
	UBC_BASE:1.94
	OPENBSD_3_0:1.92.0.2
	OPENBSD_3_0_BASE:1.92
	OPENBSD_2_9:1.82.0.2
	OPENBSD_2_9_BASE:1.82
	OPENBSD_2_8:1.71.0.2
	OPENBSD_2_8_BASE:1.71
	OPENBSD_2_7:1.64.0.2
	OPENBSD_2_7_BASE:1.64
	SMP:1.61.0.2
	SMP_BASE:1.61
	kame_19991208:1.61
	OPENBSD_2_6:1.58.0.2
	OPENBSD_2_6_BASE:1.58
	OPENBSD_2_5:1.51.0.2
	OPENBSD_2_5_BASE:1.51
	OPENBSD_2_4:1.48.0.2
	OPENBSD_2_4_BASE:1.48
	OPENBSD_2_3:1.39.0.2
	OPENBSD_2_3_BASE:1.39
	OPENBSD_2_2:1.36.0.2
	OPENBSD_2_2_BASE:1.36
	OPENBSD_2_1:1.31.0.2
	OPENBSD_2_1_BASE:1.31
	OPENBSD_2_0:1.27.0.2
	OPENBSD_2_0_BASE:1.27
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.234
date	2017.08.03.06.35.24;	author fcambus;	state Exp;
branches;
next	1.233;
commitid	NNaosUNdOBKFag6l;

1.233
date	2017.05.31.19.18.18;	author deraadt;	state Exp;
branches;
next	1.232;
commitid	HlDgymhwBU2bW7Tm;

1.232
date	2017.04.30.13.04.49;	author mpi;	state Exp;
branches;
next	1.231;
commitid	xDPbcPU6tYP39nZG;

1.231
date	2017.01.21.10.58.15;	author reyk;	state Exp;
branches;
next	1.230;
commitid	swIiw8mtZ7Pk0W3t;

1.230
date	2016.10.21.06.20.58;	author mlarkin;	state Exp;
branches;
next	1.229;
commitid	szRuKZ9HgqvwYLcM;

1.229
date	2016.02.28.15.46.18;	author naddy;	state Exp;
branches;
next	1.228;
commitid	iOuZImHZRAr7Hvd6;

1.228
date	2016.01.08.15.54.13;	author jcs;	state Exp;
branches;
next	1.227;
commitid	kI4H556ZKYkRQGw5;

1.227
date	2015.10.29.07.47.02;	author kettenis;	state Exp;
branches;
next	1.226;
commitid	QDyL8dFxcUx9R2yh;

1.226
date	2015.08.20.04.41.46;	author mlarkin;	state Exp;
branches;
next	1.225;
commitid	eoSwLmCZ9T7CGJzs;

1.225
date	2015.07.21.03.38.22;	author reyk;	state Exp;
branches;
next	1.224;
commitid	t8p39jbat5DBrbFu;

1.224
date	2015.07.17.22.52.28;	author tedu;	state Exp;
branches;
next	1.223;
commitid	OOrGfFHYAn65M2qc;

1.223
date	2015.04.19.08.37.32;	author ratchov;	state Exp;
branches;
next	1.222;
commitid	unw3OnGpzw8vZhb9;

1.222
date	2015.04.19.06.27.17;	author sf;	state Exp;
branches;
next	1.221;
commitid	4CLlh1CnkUSpsRbo;

1.221
date	2015.04.12.18.37.53;	author mlarkin;	state Exp;
branches;
next	1.220;
commitid	5ST94uMTezmXYdhY;

1.220
date	2014.12.10.05.42.25;	author jsg;	state Exp;
branches;
next	1.219;
commitid	DAvGPdAi4mqBu73l;

1.219
date	2014.12.04.21.03.51;	author tedu;	state Exp;
branches;
next	1.218;
commitid	r0wnjctffDRI84iN;

1.218
date	2014.09.08.01.47.05;	author guenther;	state Exp;
branches;
next	1.217;
commitid	QKTb36RFnfteZJPE;

1.217
date	2014.07.11.21.54.37;	author tedu;	state Exp;
branches;
next	1.216;
commitid	0n9cIGBISFAEt4b1;

1.216
date	2013.12.19.21.30.02;	author deraadt;	state Exp;
branches;
next	1.215;

1.215
date	2013.12.12.21.04.50;	author kettenis;	state Exp;
branches;
next	1.214;

1.214
date	2013.11.04.14.07.16;	author deraadt;	state Exp;
branches;
next	1.213;

1.213
date	2013.08.15.06.54.35;	author kettenis;	state Exp;
branches;
next	1.212;

1.212
date	2013.08.12.04.11.52;	author jsg;	state Exp;
branches;
next	1.211;

1.211
date	2012.09.06.20.20.30;	author tedu;	state Exp;
branches;
next	1.210;

1.210
date	2012.05.27.12.24.33;	author jsg;	state Exp;
branches;
next	1.209;

1.209
date	2011.11.15.22.27.52;	author deraadt;	state Exp;
branches;
next	1.208;

1.208
date	2011.10.06.20.49.28;	author deraadt;	state Exp;
branches;
next	1.207;

1.207
date	2011.07.08.20.15.09;	author ariane;	state Exp;
branches;
next	1.206;

1.206
date	2011.07.07.02.57.24;	author deraadt;	state Exp;
branches;
next	1.205;

1.205
date	2011.07.04.22.53.53;	author tedu;	state Exp;
branches;
next	1.204;

1.204
date	2011.06.26.23.19.10;	author tedu;	state Exp;
branches;
next	1.203;

1.203
date	2011.05.23.09.54.20;	author claudio;	state Exp;
branches;
next	1.202;

1.202
date	2011.04.30.15.33.18;	author mlarkin;	state Exp;
branches;
next	1.201;

1.201
date	2011.04.05.12.50.15;	author guenther;	state Exp;
branches;
next	1.200;

1.200
date	2010.12.06.20.10.18;	author jasper;	state Exp;
branches;
next	1.199;

1.199
date	2010.10.14.21.23.04;	author pirofti;	state Exp;
branches;
next	1.198;

1.198
date	2010.07.23.16.14.54;	author deraadt;	state Exp;
branches;
next	1.197;

1.197
date	2010.07.05.22.52.03;	author deraadt;	state Exp;
branches;
next	1.196;

1.196
date	2010.07.01.17.30.25;	author tedu;	state Exp;
branches;
next	1.195;

1.195
date	2010.02.19.15.00.12;	author miod;	state Exp;
branches;
next	1.194;

1.194
date	2009.11.26.21.15.48;	author deraadt;	state Exp;
branches;
next	1.193;

1.193
date	2009.06.06.05.31.01;	author oga;	state Exp;
branches;
next	1.192;

1.192
date	2009.06.06.03.20.58;	author deraadt;	state Exp;
branches;
next	1.191;

1.191
date	2009.06.06.00.35.00;	author pirofti;	state Exp;
branches;
next	1.190;

1.190
date	2009.05.12.19.49.36;	author mglocker;	state Exp;
branches;
next	1.189;

1.189
date	2009.05.07.11.30.26;	author ariane;	state Exp;
branches;
next	1.188;

1.188
date	2009.01.20.20.21.03;	author mlarkin;	state Exp;
branches;
next	1.187;

1.187
date	2009.01.13.13.53.50;	author kettenis;	state Exp;
branches;
next	1.186;

1.186
date	2008.12.04.15.24.18;	author oga;	state Exp;
branches;
next	1.185;

1.185
date	2008.11.22.17.45.20;	author oga;	state Exp;
branches;
next	1.184;

1.184
date	2008.11.09.15.11.19;	author oga;	state Exp;
branches;
next	1.183;

1.183
date	2008.10.10.20.21.38;	author deraadt;	state Exp;
branches;
next	1.182;

1.182
date	2008.07.08.05.22.00;	author dlg;	state Exp;
branches;
next	1.181;

1.181
date	2008.06.25.15.27.34;	author mbalmer;	state Exp;
branches;
next	1.180;

1.180
date	2008.06.14.21.31.46;	author mbalmer;	state Exp;
branches;
next	1.179;

1.179
date	2008.05.21.18.49.47;	author kettenis;	state Exp;
branches;
next	1.178;

1.178
date	2008.05.07.20.42.02;	author kettenis;	state Exp;
branches;
next	1.177;

1.177
date	2008.04.25.14.51.35;	author jmc;	state Exp;
branches;
next	1.176;

1.176
date	2008.03.22.19.43.09;	author weingart;	state Exp;
branches;
next	1.175;

1.175
date	2008.03.20.16.35.53;	author deraadt;	state Exp;
branches;
next	1.174;

1.174
date	2008.03.16.19.24.51;	author oga;	state Exp;
branches;
next	1.173;

1.173
date	2008.03.16.19.00.28;	author oga;	state Exp;
branches;
next	1.172;

1.172
date	2008.03.04.21.14.29;	author oga;	state Exp;
branches;
next	1.171;

1.171
date	2007.11.28.17.05.09;	author tedu;	state Exp;
branches;
next	1.170;

1.170
date	2007.11.25.18.25.28;	author deraadt;	state Exp;
branches;
next	1.169;

1.169
date	2007.11.25.17.11.12;	author oga;	state Exp;
branches;
next	1.168;

1.168
date	2007.11.25.15.42.15;	author tedu;	state Exp;
branches;
next	1.167;

1.167
date	2007.11.16.21.07.01;	author mbalmer;	state Exp;
branches;
next	1.166;

1.166
date	2007.10.07.18.41.07;	author mbalmer;	state Exp;
branches;
next	1.165;

1.165
date	2007.10.07.13.41.48;	author mbalmer;	state Exp;
branches;
next	1.164;

1.164
date	2007.07.04.08.16.13;	author mpf;	state Exp;
branches;
next	1.163;

1.163
date	2007.05.31.18.52.27;	author uwe;	state Exp;
branches;
next	1.162;

1.162
date	2007.05.29.02.40.24;	author tom;	state Exp;
branches;
next	1.161;

1.161
date	2007.05.28.02.13.44;	author krw;	state Exp;
branches;
next	1.160;

1.160
date	2007.05.04.13.22.21;	author art;	state Exp;
branches;
next	1.159;

1.159
date	2007.04.26.01.43.13;	author gwk;	state Exp;
branches;
next	1.158;

1.158
date	2007.04.21.21.06.15;	author gwk;	state Exp;
branches;
next	1.157;

1.157
date	2007.03.19.14.33.28;	author dlg;	state Exp;
branches;
next	1.156;

1.156
date	2007.03.19.09.29.33;	author art;	state Exp;
branches;
next	1.155;

1.155
date	2007.03.19.03.02.09;	author marco;	state Exp;
branches;
next	1.154;

1.154
date	2007.02.20.21.15.01;	author tom;	state Exp;
branches;
next	1.153;

1.153
date	2007.02.17.17.38.37;	author tom;	state Exp;
branches;
next	1.152;

1.152
date	2006.11.27.18.04.28;	author gwk;	state Exp;
branches;
next	1.151;

1.151
date	2006.10.26.08.37.14;	author tom;	state Exp;
branches;
next	1.150;

1.150
date	2006.07.25.19.16.51;	author kettenis;	state Exp;
branches;
next	1.149;

1.149
date	2006.06.19.15.13.34;	author deraadt;	state Exp;
branches;
next	1.148;

1.148
date	2006.06.13.03.01.59;	author gwk;	state Exp;
branches;
next	1.147;

1.147
date	2006.05.28.17.21.14;	author uwe;	state Exp;
branches;
next	1.146;

1.146
date	2006.05.01.17.01.14;	author kettenis;	state Exp;
branches;
next	1.145;

1.145
date	2006.04.27.15.37.48;	author mickey;	state Exp;
branches;
next	1.144;

1.144
date	2006.03.04.16.27.03;	author grange;	state Exp;
branches;
next	1.143;

1.143
date	2006.02.12.19.55.39;	author miod;	state Exp;
branches;
next	1.142;

1.142
date	2006.01.29.17.29.29;	author marco;	state Exp;
branches;
next	1.141;

1.141
date	2005.11.21.17.24.26;	author jordan;	state Exp;
branches;
next	1.140;

1.140
date	2005.11.04.06.55.35;	author tedu;	state Exp;
branches;
next	1.139;

1.139
date	2005.10.28.07.03.41;	author tedu;	state Exp;
branches;
next	1.138;

1.138
date	2005.10.04.22.04.23;	author marco;	state Exp;
branches;
next	1.137;

1.137
date	2005.09.26.22.32.03;	author miod;	state Exp;
branches;
next	1.136;

1.136
date	2005.07.14.02.09.46;	author uwe;	state Exp;
branches;
next	1.135;

1.135
date	2005.06.02.20.09.39;	author tholo;	state Exp;
branches;
next	1.134;

1.134
date	2005.05.21.19.13.55;	author brad;	state Exp;
branches;
next	1.133;

1.133
date	2005.05.01.21.36.56;	author brad;	state Exp;
branches;
next	1.132;

1.132
date	2005.03.08.20.00.23;	author tdeval;	state Exp;
branches;
next	1.131;

1.131
date	2005.03.05.23.58.43;	author tdeval;	state Exp;
branches;
next	1.130;

1.130
date	2004.10.08.13.04.36;	author grange;	state Exp;
branches;
next	1.129;

1.129
date	2004.10.03.21.28.34;	author jcs;	state Exp;
branches;
next	1.128;

1.128
date	2004.09.16.09.14.03;	author mickey;	state Exp;
branches;
next	1.127;

1.127
date	2004.09.15.20.28.53;	author grange;	state Exp;
branches;
next	1.126;

1.126
date	2004.07.14.05.34.14;	author tedu;	state Exp;
branches;
next	1.125;

1.125
date	2004.06.22.09.47.01;	author mickey;	state Exp;
branches;
next	1.124;

1.124
date	2004.06.16.18.22.19;	author grange;	state Exp;
branches;
next	1.123;

1.123
date	2004.06.13.21.49.15;	author niklas;	state Exp;
branches;
next	1.122;

1.122
date	2004.06.05.15.06.22;	author grange;	state Exp;
branches;
next	1.121;

1.121
date	2004.06.03.18.22.21;	author grange;	state Exp;
branches;
next	1.120;

1.120
date	2004.06.03.18.13.13;	author grange;	state Exp;
branches;
next	1.119;

1.119
date	2004.05.23.17.36.37;	author grange;	state Exp;
branches;
next	1.118;

1.118
date	2004.05.11.04.01.00;	author deraadt;	state Exp;
branches;
next	1.117;

1.117
date	2004.05.08.05.10.12;	author grange;	state Exp;
branches;
next	1.116;

1.116
date	2004.05.06.22.38.44;	author deraadt;	state Exp;
branches;
next	1.115;

1.115
date	2004.05.06.19.47.57;	author grange;	state Exp;
branches;
next	1.114;

1.114
date	2004.05.06.19.47.03;	author grange;	state Exp;
branches;
next	1.113;

1.113
date	2004.04.11.18.12.10;	author deraadt;	state Exp;
branches;
next	1.112;

1.112
date	2004.04.02.22.28.40;	author tedu;	state Exp;
branches;
next	1.111;

1.111
date	2003.12.20.18.23.17;	author tedu;	state Exp;
branches;
next	1.110;

1.110
date	2003.12.18.23.46.19;	author tedu;	state Exp;
branches;
next	1.109;

1.109
date	2003.11.03.03.35.40;	author tedu;	state Exp;
branches;
next	1.108;

1.108
date	2003.08.07.08.32.56;	author markus;	state Exp;
branches;
next	1.107;

1.107
date	2003.07.30.05.26.33;	author mickey;	state Exp;
branches;
next	1.106;

1.106
date	2003.07.28.19.59.18;	author jason;	state Exp;
branches;
next	1.105;

1.105
date	2003.06.24.22.45.33;	author espie;	state Exp;
branches;
next	1.104;

1.104
date	2003.05.14.22.53.59;	author tedu;	state Exp;
branches;
next	1.103;

1.103
date	2003.05.14.22.08.04;	author tedu;	state Exp;
branches;
next	1.102;

1.102
date	2003.02.10.22.32.33;	author jason;	state Exp;
branches;
next	1.101;

1.101
date	2003.01.21.17.02.29;	author markus;	state Exp;
branches;
next	1.100;

1.100
date	2002.11.07.22.03.22;	author mickey;	state Exp;
branches;
next	1.99;

1.99
date	2002.08.05.19.02.19;	author mickey;	state Exp;
branches;
next	1.98;

1.98
date	2002.07.12.20.17.03;	author mickey;	state Exp;
branches;
next	1.97;

1.97
date	2002.06.26.17.11.50;	author tdeval;	state Exp;
branches;
next	1.96;

1.96
date	2002.06.17.23.10.56;	author matthieu;	state Exp;
branches;
next	1.95;

1.95
date	2002.03.23.14.14.25;	author deraadt;	state Exp;
branches;
next	1.94;

1.94
date	2001.11.02.10.06.13;	author jjbg;	state Exp;
branches
	1.94.2.1;
next	1.93;

1.93
date	2001.10.25.19.03.49;	author mickey;	state Exp;
branches;
next	1.92;

1.92
date	2001.08.25.10.13.29;	author art;	state Exp;
branches;
next	1.91;

1.91
date	2001.08.17.21.11.54;	author mickey;	state Exp;
branches;
next	1.90;

1.90
date	2001.08.08.15.15.28;	author jjbg;	state Exp;
branches;
next	1.89;

1.89
date	2001.07.06.14.00.30;	author jjbg;	state Exp;
branches;
next	1.88;

1.88
date	2001.06.27.07.18.34;	author niklas;	state Exp;
branches;
next	1.87;

1.87
date	2001.06.25.23.06.54;	author niklas;	state Exp;
branches;
next	1.86;

1.86
date	2001.06.24.23.31.26;	author mickey;	state Exp;
branches;
next	1.85;

1.85
date	2001.05.11.07.13.15;	author deraadt;	state Exp;
branches;
next	1.84;

1.84
date	2001.05.11.06.41.35;	author deraadt;	state Exp;
branches;
next	1.83;

1.83
date	2001.05.01.17.39.01;	author aaron;	state Exp;
branches;
next	1.82;

1.82
date	2001.04.09.07.14.14;	author tholo;	state Exp;
branches;
next	1.81;

1.81
date	2001.04.07.17.17.27;	author niklas;	state Exp;
branches;
next	1.80;

1.80
date	2001.04.03.01.32.23;	author deraadt;	state Exp;
branches;
next	1.79;

1.79
date	2001.04.02.23.24.11;	author niklas;	state Exp;
branches;
next	1.78;

1.78
date	2001.03.22.23.36.51;	author niklas;	state Exp;
branches;
next	1.77;

1.77
date	2001.03.05.15.13.43;	author aaron;	state Exp;
branches;
next	1.76;

1.76
date	2001.02.25.23.24.18;	author aaron;	state Exp;
branches;
next	1.75;

1.75
date	2001.02.21.20.40.02;	author jbm;	state Exp;
branches;
next	1.74;

1.74
date	2001.01.30.00.00.29;	author aaron;	state Exp;
branches;
next	1.73;

1.73
date	2001.01.24.09.38.00;	author hugh;	state Exp;
branches;
next	1.72;

1.72
date	2000.11.07.18.21.21;	author mickey;	state Exp;
branches;
next	1.71;

1.71
date	2000.09.01.05.46.01;	author aaron;	state Exp;
branches;
next	1.70;

1.70
date	2000.08.17.20.15.33;	author mickey;	state Exp;
branches;
next	1.69;

1.69
date	2000.08.08.19.12.38;	author mickey;	state Exp;
branches;
next	1.68;

1.68
date	2000.08.01.07.55.38;	author aaron;	state Exp;
branches;
next	1.67;

1.67
date	2000.07.05.14.26.34;	author hugh;	state Exp;
branches;
next	1.66;

1.66
date	2000.05.15.06.26.59;	author niklas;	state Exp;
branches;
next	1.65;

1.65
date	2000.05.15.04.17.29;	author jason;	state Exp;
branches;
next	1.64;

1.64
date	2000.04.08.05.50.49;	author aaron;	state Exp;
branches;
next	1.63;

1.63
date	2000.03.26.22.38.32;	author mickey;	state Exp;
branches;
next	1.62;

1.62
date	2000.02.21.17.09.08;	author mickey;	state Exp;
branches;
next	1.61;

1.61
date	99.11.20.11.18.59;	author matthieu;	state Exp;
branches
	1.61.2.1;
next	1.60;

1.60
date	99.11.08.15.36.08;	author mickey;	state Exp;
branches;
next	1.59;

1.59
date	99.10.26.13.14.35;	author downsj;	state Exp;
branches;
next	1.58;

1.58
date	99.10.06.07.36.55;	author deraadt;	state Exp;
branches;
next	1.57;

1.57
date	99.09.13.13.08.13;	author deraadt;	state Exp;
branches;
next	1.56;

1.56
date	99.08.13.05.56.58;	author fgsch;	state Exp;
branches;
next	1.55;

1.55
date	99.07.25.18.05.42;	author csapuntz;	state Exp;
branches;
next	1.54;

1.54
date	99.07.25.10.38.30;	author deraadt;	state Exp;
branches;
next	1.53;

1.53
date	99.07.25.10.22.25;	author deraadt;	state Exp;
branches;
next	1.52;

1.52
date	99.07.18.21.25.21;	author csapuntz;	state Exp;
branches;
next	1.51;

1.51
date	99.01.21.08.26.48;	author niklas;	state Exp;
branches;
next	1.50;

1.50
date	99.01.20.18.28.46;	author niklas;	state Exp;
branches;
next	1.49;

1.49
date	99.01.02.00.02.53;	author niklas;	state Exp;
branches;
next	1.48;

1.48
date	98.10.04.23.34.37;	author niklas;	state Exp;
branches;
next	1.47;

1.47
date	98.09.22.08.06.07;	author fgsch;	state Exp;
branches;
next	1.46;

1.46
date	98.09.11.10.33.13;	author fgsch;	state Exp;
branches;
next	1.45;

1.45
date	98.09.11.04.17.43;	author jason;	state Exp;
branches;
next	1.44;

1.44
date	98.08.07.04.54.38;	author mickey;	state Exp;
branches;
next	1.43;

1.43
date	98.07.03.08.15.08;	author deraadt;	state Exp;
branches;
next	1.42;

1.42
date	98.06.02.18.46.34;	author deraadt;	state Exp;
branches;
next	1.41;

1.41
date	98.04.26.21.41.48;	author provos;	state Exp;
branches;
next	1.40;

1.40
date	98.04.26.21.03.14;	author provos;	state Exp;
branches;
next	1.39;

1.39
date	98.01.06.02.35.19;	author deraadt;	state Exp;
branches;
next	1.38;

1.38
date	97.12.21.14.47.15;	author downsj;	state Exp;
branches;
next	1.37;

1.37
date	97.11.06.02.17.30;	author mickey;	state Exp;
branches;
next	1.36;

1.36
date	97.10.27.14.42.01;	author niklas;	state Exp;
branches;
next	1.35;

1.35
date	97.10.27.08.06.31;	author niklas;	state Exp;
branches;
next	1.34;

1.34
date	97.09.29.03.52.21;	author mickey;	state Exp;
branches;
next	1.33;

1.33
date	97.09.21.04.27.34;	author mickey;	state Exp;
branches;
next	1.32;

1.32
date	97.09.02.08.48.12;	author downsj;	state Exp;
branches;
next	1.31;

1.31
date	97.04.13.04.52.33;	author millert;	state Exp;
branches;
next	1.30;

1.30
date	97.02.13.23.31.33;	author niklas;	state Exp;
branches;
next	1.29;

1.29
date	96.12.11.12.59.28;	author niklas;	state Exp;
branches;
next	1.28;

1.28
date	96.10.26.06.15.04;	author downsj;	state Exp;
branches;
next	1.27;

1.27
date	96.10.04.02.51.16;	author deraadt;	state Exp;
branches;
next	1.26;

1.26
date	96.09.12.07.48.44;	author mickey;	state Exp;
branches;
next	1.25;

1.25
date	96.09.01.20.56.31;	author downsj;	state Exp;
branches;
next	1.24;

1.24
date	96.08.27.10.46.51;	author downsj;	state Exp;
branches;
next	1.23;

1.23
date	96.08.08.18.47.13;	author dm;	state Exp;
branches;
next	1.22;

1.22
date	96.07.28.05.07.04;	author downsj;	state Exp;
branches;
next	1.21;

1.21
date	96.07.07.00.11.49;	author downsj;	state Exp;
branches;
next	1.20;

1.20
date	96.06.22.21.52.51;	author tholo;	state Exp;
branches;
next	1.19;

1.19
date	96.06.16.10.33.20;	author deraadt;	state Exp;
branches;
next	1.18;

1.18
date	96.06.08.09.12.38;	author downsj;	state Exp;
branches;
next	1.17;

1.17
date	96.05.10.12.43.59;	author deraadt;	state Exp;
branches;
next	1.16;

1.16
date	96.05.04.14.30.35;	author mickey;	state Exp;
branches;
next	1.15;

1.15
date	96.05.02.07.21.15;	author niklas;	state Exp;
branches;
next	1.14;

1.14
date	96.04.29.14.12.16;	author hvozda;	state Exp;
branches;
next	1.13;

1.13
date	96.04.28.17.02.01;	author mickey;	state Exp;
branches;
next	1.12;

1.12
date	96.04.27.18.39.05;	author niklas;	state Exp;
branches;
next	1.11;

1.11
date	96.04.21.22.16.15;	author deraadt;	state Exp;
branches;
next	1.10;

1.10
date	96.04.19.07.33.39;	author mickey;	state Exp;
branches;
next	1.9;

1.9
date	96.04.18.18.55.38;	author niklas;	state Exp;
branches;
next	1.8;

1.8
date	96.03.19.21.09.10;	author mickey;	state Exp;
branches;
next	1.7;

1.7
date	96.02.27.11.13.00;	author niklas;	state Exp;
branches;
next	1.6;

1.6
date	96.02.26.10.26.43;	author mickey;	state Exp;
branches;
next	1.5;

1.5
date	96.01.16.08.25.07;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	96.01.15.21.39.06;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	96.01.15.01.52.09;	author hvozda;	state Exp;
branches;
next	1.2;

1.2
date	96.01.11.17.58.59;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.50.31;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.50.31;	author deraadt;	state Exp;
branches;
next	;

1.61.2.1
date	2000.02.21.22.29.00;	author niklas;	state Exp;
branches;
next	1.61.2.2;

1.61.2.2
date	2001.04.18.16.07.11;	author niklas;	state Exp;
branches;
next	1.61.2.3;

1.61.2.3
date	2001.07.04.10.16.27;	author niklas;	state Exp;
branches;
next	1.61.2.4;

1.61.2.4
date	2001.07.14.10.02.22;	author ho;	state Exp;
branches;
next	1.61.2.5;

1.61.2.5
date	2001.10.31.03.01.11;	author nate;	state Exp;
branches;
next	1.61.2.6;

1.61.2.6
date	2001.11.13.21.00.51;	author niklas;	state Exp;
branches;
next	1.61.2.7;

1.61.2.7
date	2003.03.27.23.26.55;	author niklas;	state Exp;
branches;
next	1.61.2.8;

1.61.2.8
date	2003.05.16.00.29.39;	author niklas;	state Exp;
branches;
next	1.61.2.9;

1.61.2.9
date	2003.05.17.16.07.37;	author andreas;	state Exp;
branches;
next	1.61.2.10;

1.61.2.10
date	2004.02.19.10.48.41;	author niklas;	state Exp;
branches;
next	1.61.2.11;

1.61.2.11
date	2004.06.05.23.08.59;	author niklas;	state Exp;
branches;
next	;

1.94.2.1
date	2002.06.11.03.35.52;	author art;	state Exp;
branches;
next	1.94.2.2;

1.94.2.2
date	2002.10.29.00.28.03;	author art;	state Exp;
branches;
next	1.94.2.3;

1.94.2.3
date	2003.05.19.21.45.11;	author tedu;	state Exp;
branches;
next	;


desc
@@


1.234
log
@Remove duplicated commented out "dev/rasops/files.rasops" include.

OK deraadt@@
@
text
@#	$OpenBSD: files.i386,v 1.233 2017/05/31 19:18:18 deraadt Exp $
#
# new style config file for i386 architecture
#

# maxpartitions must be first item in files.${ARCH}
maxpartitions 16

maxusers 2 16 100

file	arch/i386/i386/autoconf.c
file	arch/i386/i386/bus_space.c
file	arch/i386/i386/bus_dma.c
file	arch/i386/i386/conf.c
file	arch/i386/i386/db_disasm.c	ddb
file	arch/i386/i386/db_interface.c	ddb
file	arch/i386/i386/db_memrw.c	ddb
file	arch/i386/i386/db_trace.c	ddb
file	arch/i386/i386/disksubr.c	disk
file	arch/i386/i386/est.c		!small_kernel
file	arch/i386/i386/gdt.c
file	arch/i386/i386/in_cksum.s
file	arch/i386/i386/machdep.c
file	arch/i386/i386/hibernate_machdep.c hibernate
file	arch/i386/i386/via.c
file	arch/i386/i386/locore.s
file	arch/i386/i386/amd64errata.c	!small_kernel
file	arch/i386/i386/longrun.c	!small_kernel
file	arch/i386/i386/mem.c
file	arch/i386/i386/i686_mem.c	mtrr
file	arch/i386/i386/k6_mem.c		mtrr
file 	arch/i386/i386/mtrr.c		mtrr
file	arch/i386/i386/p4tcc.c		!small_kernel
file	arch/i386/i386/pmap.c
file	arch/i386/i386/pmapae.c
file	arch/i386/i386/powernow.c	!small_kernel
file	arch/i386/i386/powernow-k7.c	!small_kernel
file	arch/i386/i386/powernow-k8.c	!small_kernel
file	arch/i386/i386/k1x-pstate.c	!small_kernel
file	arch/i386/i386/process_machdep.c
file	arch/i386/i386/sys_machdep.c
file	arch/i386/i386/trap.c
file	arch/i386/i386/vm_machdep.c
file	arch/i386/i386/softintr.c
file	arch/i386/i386/dkcsum.c		bios
file	dev/cninit.c
file	arch/i386/i386/mptramp.s	multiprocessor
file	arch/i386/i386/mp_setperf.c	multiprocessor
file	arch/i386/i386/lock_machdep.c
file	arch/i386/i386/ipifuncs.c	multiprocessor
file	arch/i386/i386/db_mp.c		multiprocessor & ddb
file	arch/i386/i386/wscons_machdep.c	wsdisplay
major	{vnd = 14}

include "dev/rasops/files.rasops"
include "dev/wsfont/files.wsfont"

#
# Media Independent Interface (mii)
#
include "dev/mii/files.mii"

#
# Machine-independent SCSI drivers
#

include "scsi/files.scsi"
major	{sd = 4}
major	{st = 5}
major	{cd = 6}
major	{rd = 17}

#
# Machine-independent ATAPI drivers
#

include "dev/atapiscsi/files.atapiscsi"
include "dev/ata/files.ata"

#
# System bus types
#

define mainbus {[apid = -1]}
device	mainbus: isabus, eisabus, pcibus, mainbus
attach	mainbus at root
file	arch/i386/i386/mainbus.c	mainbus

file   arch/i386/i386/codepatch.c

#device	mca at root {...}

#
# Paravirtual device bus
#
include "dev/pv/files.pv"

#
# PCI-only drivers
# XXX MUST BE INCLUDED BEFORE files.isa, as long as files.isa attaches
# XXX devices to 'pci'.
#

include "dev/pci/files.pci"
file	arch/i386/pci/pci_machdep.c		pci
file	arch/i386/pci/pciide_machdep.c		pciide
file	arch/i386/pci/pcic_pci_machdep.c	pcic_pci
file	arch/i386/pci/vga_post.c		vga_pci & x86emu

# PCI-Host bridge chipsets
device  pchb: pcibus, agpbus
attach	pchb at pci
file	arch/i386/pci/pchb.c		pchb

# AMAS AMD memory address switch
device  amas
attach  amas at pci
file    dev/pci/amas.c			amas

# AGP bridge support. most attach at pchb
file	arch/i386/pci/agp_machdep.c	agp | inteldrm

# AMD Elan SC520 System Controller (PCI-Host bridge)
device	elansc: gpiobus
attach	elansc at pci
file	arch/i386/pci/elan520.c		elansc

# Geode SC1100
device	geodesc
attach	geodesc at pci
file	arch/i386/pci/geodesc.c		geodesc

# AMD Geode LX series processor security block
device	glxsb
attach	glxsb at pci
file	arch/i386/pci/glxsb.c		glxsb

# National Semiconductor Geode SC1100 SMI/ACPI module
device	gscpm
attach	gscpm at pci
file	arch/i386/pci/gscpm.c		gscpm

# AMD Geode LX series MSR access
device	amdmsr
attach	amdmsr at mainbus
file	arch/i386/i386/amdmsr.c		amdmsr	needs-flag

# PCI-ISA bridge chipsets
device	pcib: isabus
attach	pcib at pci
file	arch/i386/pci/pcib.c		pcib | ichpcib | gscpcib | glxpcib | piixpcib | amdpcib | tcpcib

# Intel ICHx/ICHx-M LPC bridges
device	ichpcib: isabus
attach	ichpcib at pci
file	arch/i386/pci/ichpcib.c		ichpcib

# Intel PIIX4 PCI-ISA bridge
device	piixpcib: isabus
attach	piixpcib at pci
file	arch/i386/pci/piixpcib.c	piixpcib

# National Semiconductor Geode SC1100 PCI-ISA bridge
device	gscpcib: isabus, gpiobus
attach	gscpcib at pci
file	arch/i386/pci/gscpcib.c		gscpcib

# AMD 8111 LPC bridge
device	amdpcib: isabus
attach	amdpcib at pci
file	dev/pci/amdpcib.c		amdpcib

# Intel Atom E600 LPC bridge
device	tcpcib: isabus
attach	tcpcib at pci
file	dev/pci/tcpcib.c		tcpcib

device	hme: ether, ifnet, mii, ifmedia
file	dev/ic/hme.c			hme
attach	hme at pci with hme_pci
file	dev/pci/if_hme_pci.c		hme_pci

#
# ISA and mixed ISA+EISA or ISA+PCI or ISA+PCMCIA drivers
#

major	{wd = 0}
major	{fd = 2}

include "dev/isa/files.isa"
file	arch/i386/isa/isa_machdep.c	isabus

# PC clock
file	arch/i386/isa/clock.c		isabus

# Numeric Processing Extension; Math Co-processor
device	npx
attach	npx at isa
file	arch/i386/isa/npx.c		npx needs-flag

# attribute used to represent the "keyboard controller"
# XXX should be a real device
define pckbcport {[irq = -1], [port = -1]}

# PC Mice; Logitech-style, Microsoft-style, and PS/2-style
device	lms: wsmousedev
attach	lms at isa
file	arch/i386/isa/lms.c		lms needs-flag
device	mms: wsmousedev
attach	mms at isa
file	arch/i386/isa/mms.c		mms needs-flag

include	"dev/wscons/files.wscons"
include	"dev/pckbc/files.pckbc"

# Adaptec AHA-284x VL SCSI controllers
# device declaration in sys/conf/files
attach	ahc at isa with ahc_isa
file	arch/i386/isa/ahc_isa.c		ahc_isa

# Soekris GPIO & LEDs driver
device	skgpio: gpiobus
attach	skgpio at isa
file	dev/isa/skgpio.c		skgpio

# Pentium performance counters
pseudo-device	pctr
file	arch/i386/i386/pctr.c		pctr needs-flag

pseudo-device	nvram
file	arch/i386/i386/nvram.c	nvram needs-flag

#
# EISA-only drivers
#

include "dev/eisa/files.eisa"
file	arch/i386/eisa/eisa_machdep.c	eisa

#
# ISA PnP
#

include "dev/isa/files.isapnp"
file	arch/i386/isa/isapnp_machdep.c	isapnp

# Game adapter (joystick)
device	joy
file	arch/i386/isa/joy.c		joy needs-flag
attach	joy at isa with joy_isa
file	arch/i386/isa/joy_isa.c		joy_isa
attach	joy at isapnp with joy_isapnp
file	arch/i386/isa/joy_isapnp.c	joy_isapnp

#
# Compatibility modules
#

# VM86 mode
file	arch/i386/i386/vm86.c			vm86

# VM86 in kernel
file	arch/i386/i386/kvm86.c			kvm86
file	arch/i386/i386/kvm86call.S		kvm86

device	bios {}
attach	bios at mainbus
file	arch/i386/i386/bios.c		bios needs-count

device	apm
attach	apm at bios
file	arch/i386/i386/apm.c		apm needs-count
file	arch/i386/i386/apmcall.S	apm

file	arch/i386/i386/acpiapm.c

# Intel SMP specification 1.4
define	mpbios
device	mpbios
attach	mpbios at bios
file	arch/i386/i386/mpbios.c		mpbios needs-flag
file	arch/i386/i386/mpbios_intr_fixup.c	mpbios & pci

# CPUS
define	cpu {[apid = -1]}
device	cpu
attach	cpu at mainbus
file	arch/i386/i386/cpu.c		cpu

# Common APIC support routines
file	arch/i386/i386/apic.c		ioapic | lapic

# Local APIC (required for multiprocessor)
define	lapic
file	arch/i386/i386/lapic.c		lapic needs-flag

# I/O APICs
device	ioapic: mpbios, lapic
attach	ioapic at mainbus
file	arch/i386/i386/ioapic.c		ioapic needs-flag

device	pcibios
attach	pcibios at bios
file	arch/i386/pci/pcibios.c		pcibios needs-count
file	arch/i386/pci/pci_intr_fixup.c	pcibios
file	arch/i386/pci/pci_bus_fixup.c	pcibios
file	arch/i386/pci/pci_addr_fixup.c	pcibios
file	arch/i386/pci/opti82c558.c	pcibios
file	arch/i386/pci/opti82c700.c	pcibios
file	arch/i386/pci/piix.c		pcibios
file	arch/i386/pci/rccosb4.c		pcibios
file	arch/i386/pci/sis85c503.c	pcibios
file	arch/i386/pci/via82c586.c	pcibios
file	arch/i386/pci/via8231.c		pcibios
file	arch/i386/pci/amd756.c		pcibios
file	arch/i386/pci/ali1543.c		pcibios

#
# CARDBUS
#
include	"dev/cardbus/files.cardbus"
file	arch/i386/i386/rbus_machdep.c	cardbus

# XXXX pcic here because it needs to be late.  The catch: pcic needs
# to be late, so devices which attach to it are attached late.  But it
# needs to be before its isa and pci attachments.  This answer is
# non-optimal, but I don't have a better answer right now.

# PCIC pcmcia contoller
# XXX this needs to be done very late, so it's done here.  This feels
# like a kludge, but it might be for the best.

device	pcic: pcmciabus
file	dev/ic/i82365.c			pcic

# PCIC pcmcia controller on ISA bus.
attach	pcic at isa with pcic_isa
file	dev/isa/i82365_isa.c		pcic_isa

# PCIC pcmcia controller on PCI bus.
attach	pcic at pci with pcic_pci
file	dev/pci/i82365_pci.c		pcic_pci

# PCIC pcmcia controller on PnP board
attach	pcic at isapnp with pcic_isapnp
file	dev/isa/i82365_isapnp.c	pcic_isapnp

# Code common to ISA and ISAPnP attachments
file	dev/isa/i82365_isasubr.c	pcic_isa | pcic_isapnp | pcic_pci

# Databook TCIC/2 pcmcia/isa bridge
device	tcic: pcmciabus
file	dev/ic/tcic2.c			tcic
attach	tcic at isa with tcic_isa
file	dev/isa/tcic2_isa.c		tcic_isa

#
# Machine-independent PCMCIA drivers
#
include "dev/pcmcia/files.pcmcia"

#
# Machine-independent HID support
#
include	"dev/hid/files.hid"

#
# Machine-independent USB drivers
#
include "dev/usb/files.usb"

#
# Machine-independent I2C drivers
#
include "dev/i2c/files.i2c"

#
# Machine-independent GPIO drivers
#
include "dev/gpio/files.gpio"

#
# Machine-independent 1-Wire drivers
#
include "dev/onewire/files.onewire"

#
# Machine-independent SD/MMC drivers
#
include "dev/sdmmc/files.sdmmc"

include "dev/acpi/files.acpi"
file	arch/i386/i386/acpi_machdep.c		acpi
file	arch/i386/i386/acpi_wakecode.S		acpi & !small_kernel

#
# VMM
#
device vmm {}
attach vmm at mainbus
file	arch/i386/i386/vmm.c			vmm needs-flag
file	arch/i386/i386/vmm_support.S		vmm

#
# IPMI
#
attach	ipmi at mainbus

# Dell Embedded Systems Management
device	esm
attach	esm at mainbus
file	arch/i386/i386/esm.c			esm needs-flag

# quad support is necessary for 32 bit architectures
file lib/libkern/adddi3.c
file lib/libkern/anddi3.c
file lib/libkern/ashldi3.c
file lib/libkern/ashrdi3.c
file lib/libkern/cmpdi2.c
file lib/libkern/divdi3.c
file lib/libkern/iordi3.c
file lib/libkern/lshldi3.c
file lib/libkern/lshrdi3.c
file lib/libkern/moddi3.c
file lib/libkern/muldi3.c
file lib/libkern/negdi2.c
file lib/libkern/notdi2.c
file lib/libkern/qdivrem.c
file lib/libkern/subdi3.c
file lib/libkern/ucmpdi2.c
file lib/libkern/udivdi3.c
file lib/libkern/umoddi3.c
file lib/libkern/xordi3.c
@


1.233
log
@Split early startup code out of locore.S into locore0.S.  Adjust link
run so that this locore0.o is always at the start of the executable.
But randomize the link order of all other .o files in the kernel, so
that their exec/rodata/data/bss segments land all over the place.
Late during kernel boot, unmap the early startup code.

As a result, the internal layout of every newly build bsd kernel is
different from past kernels.  Internal relative offsets are not known
to an outside attacker.  The only known offsets are in the startup code,
which has been unmapped.

Ramdisk kernels cannot be compiled like this, because they are gzip'd.
When the internal pointer references change, the compression dictionary
bloats and results in poorer compression.

ok kettenis mlarkin visa, also thanks to tedu for getting me back to this
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.232 2017/04/30 13:04:49 mpi Exp $
a412 2

#include "dev/rasops/files.rasops"
@


1.232
log
@Unifdef KGDB.

It doesn't compile und hasn't been working during the last decade.

ok kettenis@@, deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.231 2017/01/21 10:58:15 reyk Exp $
d26 1
@


1.231
log
@Move virtio config from files.pci to files.pci

virtio itself is not PCI, it is a paravirtual bus on top of either PCI
or MMIO (arm).  This is the first step of moving the virtio files to
dev/pv.  No functional change.

arm kernel changes tested by jsg@@ and patrick@@
no objections from sf@@ mlarkin@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.230 2016/10/21 06:20:58 mlarkin Exp $
d17 1
a17 1
file	arch/i386/i386/db_memrw.c	ddb | kgdb
a26 1
file	arch/i386/i386/kgdb_machdep.c	kgdb
@


1.230
log
@
vmm(4) for i386. Userland changes forthcoming. Note that for the time being,
i386 hosts are limited to running only i386 guests, even if the underlying
hardware supports amd64. This is a restriction I hope to lift moving forward,
but for now please don't report problems running amd64 guests on i386 hosts.

This was a straightforward port of the in-tree amd64 code plus the old rotted
tree I had from last year for i386 support. Changes included converting 64-bit
VMREAD/VMWRITE ops to 2x32-bit ops, and fixing treatment of the TSS, which
differs on i386.

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.229 2016/02/28 15:46:18 naddy Exp $
d94 5
a407 5

#
# Paravirtual device bus
#
include "dev/pv/files.pv"
@


1.229
log
@Support for running Linux binaries under emulation is going away.

Remove "option COMPAT_LINUX" and everything directly tied to it from the
kernel and the corresponding man page documentation.

ok visa@@ guenther@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.228 2016/01/08 15:54:13 jcs Exp $
d390 8
@


1.228
log
@Move HID support files out of dev/usb into new dev/hid directory

These files aren't USB-specific and were used by the previous
Bluetooth implementation, and will be used by the upcoming
HID-over-i2C implementation

ok deraadt
previous version ok kettenis and mpi
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.227 2015/10/29 07:47:02 kettenis Exp $
a259 4

# Linux binary compatibility (COMPAT_LINUX)
include "compat/linux/files.linux"
file	arch/i386/i386/linux_machdep.c		compat_linux
@


1.227
log
@Make inteldrm(4) attach to pci(4) instead of vga(4) just like radeondrm(4).
This is needed for machines where Intel graphics isn't the primary graphics
device and on systems with UEFI firmware that put the device in non-VGA mode.

ok jsg@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.226 2015/08/20 04:41:46 mlarkin Exp $
d360 5
@


1.226
log
@
remove unused vesafb code, had been commented out and not compiled in for
7 years (for some parts, 9 years), and was only ever referenced in i386
anyway.

ok jsg@@, matthieu@@, armani@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.225 2015/07/21 03:38:22 reyk Exp $
d116 1
a116 1
file	arch/i386/pci/agp_machdep.c	agp
@


1.225
log
@Add pvbus(4), a pseudo-bus to attach non-PCI paravirtual devices and buses.
vmt(4) is moved from mainbus0 to pvbus0, more devices will follow.

OK sf@@ deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.224 2015/07/17 22:52:28 tedu Exp $
a403 5

#
# VESA
#
include "dev/vesa/files.vesa"
@


1.224
log
@remove obsolete INET kernel option
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.223 2015/04/19 08:37:32 ratchov Exp $
d395 4
a398 2
# VMware Tools
attach	vmt at mainbus
@


1.223
log
@Remove emulation of oss audio ioctls from linux emulation.

ok armani, guenther, sthen
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.222 2015/04/19 06:27:17 sf Exp $
d22 1
a22 1
file	arch/i386/i386/in_cksum.s	inet
@


1.222
log
@Binary code patching on i386

This commit ports the infrastructure to do binary code patching from amd64.
The existing code patching for SMAP is converted to the new infrastruture.

ok kettenis@@
"should go in" deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.221 2015/04/12 18:37:53 mlarkin Exp $
a263 3

# OSS audio driver compatibility
include "compat/ossaudio/files.ossaudio"
@


1.221
log
@
Bring PAE code back to life, in a different form. This diff (via bluhm then
to deraadt, then myself) brings the PAE pmap on i386 (not touched in any
significant way for years) closer to the current non-PAE pmap and allows
us to take a big next step toward better i386 W^X in the kernel (similar to
what we did a few months ago on amd64). Unlike the original PAE pmap, this
diff will not be supporting > 4GB physical memory on i386 - this effort is
specifically geared toward providing W^X (via NX) only.

There still seems to be a bug removing certain pmap entries when PAE is
enabled, so I'm leaving PAE mode disabled for the moment until we can
figure out what is going on, but with this diff in the tree hopefully
others can help.

The pmap functions now operate through function pointers, due to the need
to support both non-PAE and PAE forms. My unscientific testing showed
less than 0.3% (a third of a percent) slowdown with this approach during
a base build.

Discussed for months with guenther, kettenis, and deraadt.

ok kettenis@@, deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.220 2014/12/10 05:42:25 jsg Exp $
d88 2
@


1.220
log
@Add skgpio(4) a driver for the Soekris net6501 GPIO and LEDs
from Matt Dainty.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.219 2014/12/04 21:03:51 tedu Exp $
d35 1
@


1.219
log
@as promised 18 years ago, consolidate isa floppy disks in files.isa
ok deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.218 2014/09/08 01:47:05 guenther Exp $
d212 5
@


1.218
log
@Delete procfs; it's always had races and is now unused: no one noticed for
months that I broke it before the 5.5 release.

confirmed as not being required by ports by sthen@@, ajacoutot@@, dcoppa@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.217 2014/07/11 21:54:37 tedu Exp $
d180 1
a206 11

# Floppy disk controller
# XXX temporarily conflicts with arc, will soon move to files.isa
device	fdc {[drive = -1]}
attach	fdc at isa
file	dev/isa/fdc.c		fdc needs-flag

device	fd: disk, isa_dma
attach	fd at fdc
file	dev/isa/fd.c		fd needs-flag
major	{fd = 2}
@


1.217
log
@"It's not the years, honey; it's the mileage."

bluetooth support doesn't work and isn't going anywhere. the current
design is a dead end, and should not be the basis for any future support.
general consensus says to whack it so as to not mislead the unwary.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.216 2013/12/19 21:30:02 deraadt Exp $
a39 1
file	arch/i386/i386/procfs_machdep.c	procfs
@


1.216
log
@Mtrr stops being a pseudo-device.  We need to probe the cpu type and
initialize the structures when we see the first cpu.  We also need to
initialize each cpu's properly (for PAT) before we setup mtrr on that
cpu.  On i386 (late hatch) we were getting this desperately wrong on
the primary cpu.

After suspend/resume, we also need to do the same work.  re-initialize
PAT before mtrr.  On some laptops apparently PAT was not turned on by the
BIOS, so we ended up with incorrect setup for the primary cpu.  Oops.

This makes mplayer on the x201 (and similar) machines work without weird
pauses after a suspend/resume.  Many other things are likely fixed.
ok kettenis
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.215 2013/12/12 21:04:50 kettenis Exp $
a390 5

#
# Machine-independent Bluetooth drivers
#
include "dev/bluetooth/files.bluetooth"
@


1.215
log
@Remove the scatter/gather dma implementation as it is no longer used.

ok krw@@, deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.214 2013/11/04 14:07:16 deraadt Exp $
d32 1
a226 3

pseudo-device	mtrr
file 	arch/i386/i386/mtrr.c		mtrr needs-flag
@


1.214
log
@remove iop(4) driver.  it is entirely unmaintained and supports something
which basically doesn't exist at all.
reminded about it by brad
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.213 2013/08/15 06:54:35 kettenis Exp $
a13 1
file	arch/i386/i386/sg_dma.c		!small_kernel
@


1.213
log
@Include files.agp and files.drm from files.pci.  Makes sure "drm.h" gets
generated on all architectures that support pci, making alpha and loongson
compile again.

ok todd@@, miod@@ seemed to agree with the idea
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.212 2013/08/12 04:11:52 jsg Exp $
a71 5

#
# I2O
#
include "dev/i2o/files.i2o"
@


1.212
log
@Add a port of the TTM and Radeon DRM code from Linux 3.8.13.
Includes kernel modesetting, framebuffer console and support
for newer hardware.

Firmware needs to be present for acceleration and in some cases
modesetting to work.  It can be installed via fw_update
or manually via pkg_add.

With lots of help from kettenis@@ some macppc bits from mpi@@
and some ttm refcount/queue bits from FreeBSD.

Thanks to M:Tier and the OpenBSD Foundation for sponsoring this work.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.211 2012/09/06 20:20:30 tedu Exp $
a118 1
include "dev/pci/files.agp"
a119 2

include "dev/pci/drm/files.drm"
@


1.211
log
@remove compat_aout support for i386. ok deraadt
miod has requested a stay of execution for compat_aout in general.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.210 2012/05/27 12:24:33 jsg Exp $
d121 2
@


1.210
log
@Add tcpcib(4) to support Intel Atom E600 watchdog.
From Matt Dainty. ok kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.209 2011/11/15 22:27:52 deraadt Exp $
a271 3

# a.out binary compatibility (COMPAT_AOUT)
include "compat/aout/files.aout"
@


1.209
log
@Simplify various parts of the puc(4) attachment code.  Tested lightly
by krw and myself.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.208 2011/10/06 20:49:28 deraadt Exp $
d150 1
a150 1
file	arch/i386/pci/pcib.c		pcib | ichpcib | gscpcib | glxpcib | piixpcib | amdpcib
d171 5
@


1.208
log
@ccd goes to the attic
discussed with jsing and millert
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.207 2011/07/08 20:15:09 ariane Exp $
a367 7

#
# Machine-independent PUC drivers
#
include "dev/puc/files.puc"

# PCMCIA wants to be probed as late as possible.
@


1.207
log
@Only compile hibernate_machdep if option hibernate is set.
Unbreaks i386 kernel build.

ok mlarkin@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.206 2011/07/07 02:57:24 deraadt Exp $
a9 2

major	{ccd = 16}
@


1.206
log
@Replace the cruddy old sys/net/zlib.[ch].  We now use the sys/lib/libz
code.  Missing chunks of the API are imported from the libc version,
with a few #ifdef's to port it into the kernel environment.

The bootblocks already used the newer code, and should encounter no
surprises since there are so few changes to the existing files. In
the kernel, ipcomp and kernel ppp are changed to the new API.
ipcomp has been tested.

ok tedu the brave
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.205 2011/07/04 22:53:53 tedu Exp $
d27 1
a27 1
file	arch/i386/i386/hibernate_machdep.c
@


1.205
log
@remove compat_svr4 support.  ok deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.204 2011/06/26 23:19:10 tedu Exp $
a47 1
file	lib/libz/adler32.c		!ppp_deflate & !ipsec & !crypto
@


1.204
log
@kill mcd dead.  ok krw matthew millert thib
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.203 2011/05/23 09:54:20 claudio Exp $
a272 4

# SVR4 binary compatibility (COMPAT_SVR4)
include "compat/svr4/files.svr4"
file	arch/i386/i386/svr4_machdep.c		compat_svr4
@


1.203
log
@AMD K10/K11 pstate driver allows setperf and apm to change CPU
frequencies on newer AMD systems.
Driver written by Bryan Steele / brynet gmail.com adjusted for i386
by myself. Put it in deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.202 2011/04/30 15:33:18 mlarkin Exp $
a183 1
major	{mcd = 7}
@


1.202
log
@Preliminary plumbing code for i386 hibernate (suspend-to-disk).
This code is not yet called as there are still some important parts
not completed.

ok deraadt@@, kettenis@@ "looks reasonable"
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.201 2011/04/05 12:50:15 guenther Exp $
d40 1
@


1.201
log
@Push COMPAT_FREEBSD in front of a whale.  Buggy, out of date, no
one has been weeding it, and it makes life harder.

Toasts of Brennivin for its passing from many; diff ok henning@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.200 2010/12/06 20:10:18 jasper Exp $
d27 1
@


1.200
log
@- use consistent 'include' rules without a full relative path.
tested on a GENERIC config from all arches.

ok deraadt@@ miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.199 2010/10/14 21:23:04 pirofti Exp $
a279 4

# FreeBSD binary compatibility (COMPAT_FREEBSD)
include "compat/freebsd/files.freebsd"
file	arch/i386/i386/freebsd_machdep.c	compat_freebsd
@


1.199
log
@Move glxpcib(4) to MI land unifying the two MD drivers.

Specific features of the companion chip will be handled in MD land.

Okay deraadt@@.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.198 2010/07/23 16:14:54 deraadt Exp $
d62 1
a62 1
include "../../../dev/mii/files.mii"
d68 1
a68 1
include "../../../scsi/files.scsi"
d83 2
a84 2
include "../../../dev/atapiscsi/files.atapiscsi"
include "../../../dev/ata/files.ata"
d103 1
a103 1
include "../../../dev/pci/files.pci"
d185 1
a185 1
include "../../../dev/isa/files.isa"
d241 1
a241 1
include "../../../dev/eisa/files.eisa"
d248 1
a248 1
include "../../../dev/isa/files.isapnp"
d271 1
a271 1
include "../../../compat/aout/files.aout"
d274 1
a274 1
include "../../../compat/svr4/files.svr4"
d278 1
a278 1
include "../../../compat/linux/files.linux"
d282 1
a282 1
include "../../../compat/freebsd/files.freebsd"
d286 1
a286 1
include "../../../compat/ossaudio/files.ossaudio"
d421 1
a421 1
include "../../../dev/acpi/files.acpi"
@


1.198
log
@AMD amd64 errara are not on the i386 install media, since there is often
not room.  we do place them on the amd64 install media though, since many
of them matter more for 64 bit mode.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.197 2010/07/05 22:52:03 deraadt Exp $
a141 5

# AMD Geode CS5536 PCI-ISA bridge
device	glxpcib: isabus, gpiobus
attach	glxpcib at pci
file	arch/i386/pci/glxpcib.c		glxpcib   
@


1.197
log
@bsdos was removed
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.196 2010/07/01 17:30:25 tedu Exp $
d28 1
a28 1
file	arch/i386/i386/amd64errata.c
@


1.196
log
@another day, another compat gets removed.  today is ibcs2's turn
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.195 2010/02/19 15:00:12 miod Exp $
a284 3

# BSD/OS binary compatibility (COMPAT_BSDOS)
include "../../../compat/bsdos/files.bsdos"
@


1.195
log
@Move auglx(4) from i386-only land to MI land.
(auglx.c is not modified in this commit yet, only moved around)
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.194 2009/11/26 21:15:48 deraadt Exp $
a280 3

# iBCS-2 binary compatibility (COMPAT_IBCS2)
include "../../../compat/ibcs2/files.ibcs2"
@


1.194
log
@do not pull acpi_wakecode.o into RAMDISKS
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.193 2009/06/06 05:31:01 oga Exp $
a151 5

# AMD Geode CS5536 Audio
device	auglx: audio
attach	auglx at pci
file	arch/i386/pci/auglx.c		auglx
@


1.193
log
@add sg_dma.c on i386, soon to be used.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.192 2009/06/06 03:20:58 deraadt Exp $
d439 1
a439 1
file	arch/i386/i386/acpi_wakecode.S		acpi
@


1.192
log
@option X86EMU is how this subsystem is brought into a kernel
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.191 2009/06/06 00:35:00 pirofti Exp $
d16 1
@


1.191
log
@Add vga bios repost support. Fetched from the NetBSD tree mostly.

Tested on multiple i386 and it works, amd64 works also with a few
exceptions that will get fixed.

The initial effort of importing was done by oga@@, thanks!

Lots of testing and debugging by mlarkin@@ and me.
Okay deraadt@@, oga@@, mlarkin@@.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.190 2009/05/12 19:49:36 mglocker Exp $
d106 1
a106 1
file	arch/i386/pci/vga_post.c		vga_pci & vga_post
@


1.190
log
@uld(4) works on i386, too.  Disabled in GENERIC by default.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.189 2009/05/07 11:30:26 ariane Exp $
d106 1
@


1.189
log
@Move amas device from arch/amd64 to dev/pci and enable it in i386 as well.
amas defaults to disabled on both amd64 and i386.

"Go for it!" kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.188 2009/01/20 20:21:03 mlarkin Exp $
d54 3
@


1.188
log
@
Install ACPI S3 resume trampoline code in a lowmem page. First part
of ACPI S3 suspend/resume support. This is for i386.

Help/comments from art, toby, marco, jordan, kurt
ok marco@@, kurt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.187 2009/01/13 13:53:50 kettenis Exp $
d108 5
@


1.187
log
@Turn mpbios into a real device, such that people can disable it on crappy
BIOSes.

ok deraadt@@ (for the amd64 bit, or the i386 bit, can't remember which)
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.186 2008/12/04 15:24:18 oga Exp $
d429 1
@


1.186
log
@Move the bus_dma generic functions out of the far-too-podgy machdep.c and
into bus_dma.c (a-la amd64).

Discussed with art and toby in coimbra. Ok mikeb.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.185 2008/11/22 17:45:20 oga Exp $
d307 2
@


1.185
log
@same change as for amd64. Move bus_space_* functions from inlines and
defines into real functions. since machdep.c is cluttered as it is move them
into bus_space.c (like amd64). a later commit will move the stuff from machdep
across too. since machdep.c is cluttered as it is move them into bus_space.c
(like amd64). a later commit will move the stuff from machdep across too.

some shrinkage stats:
GENERIC.MP 209.66kb
RAMDISK 50.84kb
RAMDISKB 50.04kb
RAMDISC 36.28kb
RAMDISK_CD 168.03kb

don't fill it up all at once!

claudio found no network performance hit. toby thought the code went
looked alright. art@@ ok.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.184 2008/11/09 15:11:19 oga Exp $
d15 1
@


1.184
log
@Rework that way that agp attaches.

previously, we had a static list of pcidevs and which agp driver would
be interanlly attached. Instead, split the agp drivers so they work like
audio(4), where we attach a driver, which sets up some callbacks and
initial state, then attaches the interface (agp(4)). Since this allows
us to attach different drivers in different places, and give them
/proper/ probe functions move most of the drivers back to attaching at
pchb, where they should, and intagp (formerly agp_i810) stays attaching
at vga, since it's part of the intel integrated graphics chips.

Diff shrinks the kernel slightly, gets rid of the annoying "no integrated
graphics" warning, and allows more cleanup later.

Tested by many. fix for alpha build (the only other vga_pci.c consumer)
suggested by miod.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.183 2008/10/10 20:21:38 deraadt Exp $
d14 1
@


1.183
log
@Use the MI random() for all cases; no need for a MD version since it
has never been performance sensitive.
Running on all platforms, discussed with millert and kettenis, ok toby
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.182 2008/07/08 05:22:00 dlg Exp $
a101 5
# AGP devices
device agp: agp_ali, agp_amd, agp_i810, agp_intel, agp_sis, agp_via
attach agp at agpbus
file	arch/i386/pci/agp_machdep.c	agp

d103 1
a103 1
device  pchb: pcibus
d106 4
@


1.182
log
@vmt(4) is a kernel level implementation of the vmware tools.

it only provides the hosts machines clock as a timedelta sensor so far.

getting it into the tree so people can work on it as suggested by fgsch@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.180 2008/06/14 21:31:46 mbalmer Exp $
a37 1
file	arch/i386/i386/random.s
@


1.181
log
@auglx(4) is an audio(4) driver for the AC'97 audio codec found on
some AMD Geode LX systems with CS5536 companion chip.  It works
similar to auich(4) and auixp(4), but the hardware dependent parts
are quite different.

Tested with various PC-Engines ALIX boards (1B, 3C3) and a WebDT 186
board.

feedback many, ok deraadt & jmc (documentation)
@
text
@d433 3
@


1.180
log
@Add amdmsr(4), a driver to access model specific registers on AMD CPUs.
Needed for the upcoming AMD Geode LX graphics processor X11 driver.

discussed with, feedback, and ok matthieu and deraadt.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.179 2008/05/21 18:49:47 kettenis Exp $
d142 5
@


1.179
log
@Switch i386 from pccom to com.  Welcomed by many.

ok dlg@@, jsing@@, deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.178 2008/05/07 20:42:02 kettenis Exp $
d137 5
@


1.178
log
@Move i386 to __HAVE_GENERIC_SOFT_INTERRUPTS

ok dlg@@, tested by dlg@@, oga@@, jsg@@, deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.177 2008/04/25 14:51:35 jmc Exp $
a189 6
# 8250/16[45]50-based "com" ports, optimized for the i386 interrupt system
#device	pccom: tty
attach	pccom at isa with pccom_isa
attach	pccom at commulti with pccom_commulti
file	arch/i386/isa/pccom.c		pccom & (pccom_isa | pccom_isapnp | pccom_commulti | pccom_pcmcia | pccom_cardbus | pccom_puc) needs-flag

a240 2
attach	pccom at isapnp with pccom_isapnp

a377 3
# i386-specific PUC drivers
attach	pccom at puc with pccom_puc

a383 6

# i386-specific PCMCIA drivers
attach	pccom at pcmcia with pccom_pcmcia

# i386-specific Cardbus drivers
attach	pccom at cardbus with pccom_cardbus
@


1.177
log
@neccessary -> necessary; from Pierre Riteau
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.176 2008/03/22 19:43:09 weingart Exp $
d42 1
@


1.176
log
@Nuke some unused magic.

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.175 2008/03/20 16:35:53 deraadt Exp $
d451 1
a451 1
# quad support is neccessary for 32 bit architectures
@


1.175
log
@let maxusers go much higher
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.174 2008/03/16 19:24:51 oga Exp $
a18 1
file	arch/i386/i386/db_magic.s	ddb
@


1.174
log
@for some reason the pchb dependency on agp got left in. kill it.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.173 2008/03/16 19:00:28 oga Exp $
d9 1
a9 1
maxusers 2 16 64
@


1.173
log
@Make agp(4) attach at vga(4) instead of pchb(4). This is because sometimes
agp and drm need to use the same memory mapping, the best way to deal
with that is to allow them to share (that's coming later), for this to
work cleanly we move the attach point of agp.

Ideally most agp drivers would attach at pchb, with only agp_i810
(and any that work similarly) attaching at vga, but this will do for
now.

ok kettenis@@, miod@@.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.172 2008/03/04 21:14:29 oga Exp $
d109 1
a109 2
device  pchb: pcibus, agpbus, agp_amd, agp_i810, agp_intel, agp_sis,
              agp_via
@


1.172
log
@sthen@@ has an motherboard with both agp and pcie that fails to boot.
disabling agp_ali solves this. Proper fix shall hopefully some sometime
after release.  Shouldn't affect anyone.

ok sthen@@, prodded by deraadt@@.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.171 2007/11/28 17:05:09 tedu Exp $
a98 1
include "../../../dev/pci/files.agp"
a99 1
file	arch/i386/pci/agp_machdep.c		agp
d102 5
@


1.171
log
@quite a bit of simplification by removing cpu classes.
also assume that 386 cpus are really unknown, and promote them to 486
instead of panic.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.170 2007/11/25 18:25:28 deraadt Exp $
d106 1
a106 1
device  pchb: pcibus, agpbus, agp_ali, agp_amd, agp_i810, agp_intel, agp_sis,
@


1.170
log
@libkern, begone.  Move to a new mechanism where config(8)'s "file"
directive can select between MI and MD versions of these files.  At
the same time, adjust the boot programs to pick exactly what they need,
instead of the 7 or 8 mechanisms previously used.

There will be some fallout from this, but testing it all by myself is a
ridiculously slow process; it will be finished in-tree.

Various developers were very nice and avoided making fun of me when I
was gibbering in the corner..
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.169 2007/11/25 17:11:12 oga Exp $
d21 1
a21 1
file	arch/i386/i386/est.c		!small_kernel & i686_cpu
d25 2
a26 2
file	arch/i386/i386/via.c		i686_cpu
file	arch/i386/i386/amd64errata.c	i686_cpu
d28 1
a28 1
file	arch/i386/i386/longrun.c	!small_kernel & i586_cpu
d32 1
a32 1
file	arch/i386/i386/p4tcc.c		!small_kernel & i686_cpu
d34 3
a36 3
file	arch/i386/i386/powernow.c	!small_kernel & i586_cpu
file	arch/i386/i386/powernow-k7.c	!small_kernel & i686_cpu
file	arch/i386/i386/powernow-k8.c	!small_kernel & i686_cpu
@


1.169
log
@Make agp attach as a device. This means that many more agp bridges
actually get detected and attached. Also adds a kernel api for
manipulating agp.

Enable this on i386 and amd64.

"I think you should commit it" deraadt@@, ok matthieu. Looked over by
several others.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.168 2007/11/25 15:42:15 tedu Exp $
d449 21
@


1.168
log
@fake out the apm device to switch between apm and acpi on i386.  now
a single device node will talk to the right kernel code automatically.
ok deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.167 2007/11/16 21:07:01 mbalmer Exp $
d99 1
d101 1
a101 7
file	arch/i386/pci/agp_machdep.c		pciagp
file	dev/pci/agp_ali.c			pciagp
file	dev/pci/agp_amd.c			pciagp
file	dev/pci/agp_i810.c			pciagp
file	dev/pci/agp_intel.c			pciagp
file	dev/pci/agp_sis.c			pciagp
file	dev/pci/agp_via.c			pciagp
d106 2
a107 1
device	pchb: pcibus
@


1.167
log
@Make the GPIO functionality of the AMD Geode LX CS5536 available.

gpio* at glxpcib?

Based on an initial diff from Martin Hedenfalk <martin@@bzero.se> which
I largely rewrote.

Tested on the ALIX.3C1 and the Soekris net5501.

ok dlg, grange, marco
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.166 2007/10/07 18:41:07 mbalmer Exp $
d302 2
@


1.166
log
@Add a driver, amdpcib(4), for the AMD 8111 series LPC bridge and HPET written
by mickey, man page by me.  Help, suggestions by Theo and jmc.

Enable this driver and glxpcib(4) in all RAMDISK kernel,  but glxpcib(4)
does not provide the watchdog timer in the RAMDISK kernels.

Prodded by deraadt.
E
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.165 2007/10/07 13:41:48 mbalmer Exp $
d136 1
a136 1
device	glxpcib: isabus   
@


1.165
log
@Add support for the PCI-ISA bridge, timecounter, and watchdog timer
found in the CS5536 companion chip to the AMD Geode LX-800 processor.

glxpcib(4) driver written by mickey, with some tweaks by me.  Manpage
nits by jmc.

Tested on the Soekris net5501 (by me) and the Alix 2a2
(by earxtacy@@dixinet.com)

ok kettenis
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.164 2007/07/04 08:16:13 mpf Exp $
d143 1
a143 1
file	arch/i386/pci/pcib.c		pcib | ichpcib | gscpcib | glxpcib | piixpcib
d159 5
@


1.164
log
@Remove more IPX leftovers.
OK henning@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.163 2007/05/31 18:52:27 uwe Exp $
d135 5
d143 1
a143 1
file	arch/i386/pci/pcib.c		pcib | ichpcib | gscpcib | piixpcib
@


1.163
log
@include files.bluetooth here; ok gwk
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.162 2007/05/29 02:40:24 tom Exp $
a23 1
file	arch/i386/i386/ipx_cksum.c	ipx
@


1.162
log
@Fix compilation of kernels without I686_CPU: piixpcib is always
needed (not just for I686_CPU), but it and ichpcib only call the
update_cpuspeed functions for I686_CPU.

ok tedu@@ deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.161 2007/05/28 02:13:44 krw Exp $
d417 5
@


1.161
log
@Remove the Archive/Wangtek cartidge tape driver, wt(4). All tapes are
st(4).

ok tom@@ deraadt@@ jason@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.160 2007/05/04 13:22:21 art Exp $
d149 1
a149 1
file	arch/i386/pci/piixpcib.c	piixpcib & i686_cpu
@


1.160
log
@Oops. Forgot to commit this part.
We need to include lock_machdep even on non-MP kernels now for
rw_cas.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.159 2007/04/26 01:43:13 gwk Exp $
a166 1
major	{wt = 3}
@


1.159
log
@Add a setperf mechanism for ich speedstep controlled by SMI on certain
parings of the Intel Pentium 3 and the ich southbridges. Written by
Stefan Sperling <stsp AT tsp DOT in-berlin DOT de> based on a driver in
NetBSD and sys/arch/i386/pci/ichpcib.c.
Tested my mpf@@ among others,
ok tedu
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.158 2007/04/21 21:06:15 gwk Exp $
d49 1
a49 1
file	arch/i386/i386/lock_machdep.c	multiprocessor
@


1.158
log
@Introduce a smp aware hw.setperf mechanism, it will scale all CPUs or
cores by the same amount, i.e. if you do hw.setperf=50 both cores will
be scaled to the opearting state corresponing to 50%. Tested by many with
est (mainly on core2duo machines like X60 thinkpads). Only enable est
during GENERIC.MP build no one tested powernow.

ok art@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.157 2007/03/19 14:33:28 dlg Exp $
d139 1
a139 1
file	arch/i386/pci/pcib.c		pcib | ichpcib | gscpcib
d145 5
@


1.157
log
@attach softraid to the root of the device tree in a machine independant
way, rather than requiring some glue in each machines mainbus probe.

it is still commented out.

based on a discussion with miod@@ ok marco@@ deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.156 2007/03/19 09:29:33 art Exp $
d48 1
@


1.156
log
@Move i386 to timecounters. This is more or less the same code as amd64.

The "lapic" timer is ripped out since it wasn't actually a lapic timer,
but a hacked up tsc timer with some synchronization for MP. There is no
tsc timer right now since they are very unreliable on MP systems, systems
with apm, and systems that change the cpu clock. Which basically means
every modern machine out there. We're running with the i8259 timer now.

deraadt@@ ok
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.155 2007/03/19 03:02:09 marco Exp $
a414 5

#
# SOFTRAID
#
attach softraid at mainbus
@


1.155
log
@Add a new device that provides a framework for IO manipulation.  A very basic
implementation of a RAID 1 is included in this but it does not deal with
failures yet.  Disabled in GENERIC.

Suggestions from and ok beck@@ miod@@ krw@@ dlg@@ deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.154 2007/02/20 21:15:01 tom Exp $
a32 1
file	arch/i386/i386/microtime.s
@


1.154
log
@Revert PAE pmap for now, until the strange bug is found.  This stops
the freezes many of us are seeing (especially on amd64 machines running
OpenBSD/i386).

Much testing by nick@@ (as always - thanks!), hugh@@, ian@@, kettenis@@
and Sam Smith (s (at) msmith (dot) net).

Requested by, input from, and ok deraadt@@  ok art@@, kettenis@@, miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.153 2007/02/17 17:38:37 tom Exp $
d418 5
a431 1

a436 1

a437 2


@


1.153
log
@Bring in the AMD errata checks from amd64.

Changes to either copy of amd64errata.c must be replicated in the other.

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.152 2006/11/27 18:04:28 gwk Exp $
a35 1
file	arch/i386/i386/pmapae.c		!small_kernel
@


1.152
log
@commit vesabios for matthieu@@
ok deraadt, "slap it in" miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.151 2006/10/26 08:37:14 tom Exp $
d27 1
@


1.151
log
@Driver for the AMD Geode LX series processor security block.
Currently just uses the RNG; AES support to be added later.

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.150 2006/07/25 19:16:51 kettenis Exp $
d426 11
@


1.150
log
@Kill option GPL_MATH_EMULATE.

ok deraadt@@ and many others.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.149 2006/06/19 15:13:34 deraadt Exp $
d125 5
@


1.149
log
@move clock_subr.c to a better place, and now it is always in the kernel
so that things can use it; tested on all architectures; ok kettenis
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.148 2006/06/13 03:01:59 gwk Exp $
a168 3

# Linux/GNU i387 floating point emulator
include "../../../gnu/arch/i386/fpemul/files.fpemul"
@


1.148
log
@kvm86, missed a file.
ok mickey@@, toby@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.147 2006/05/28 17:21:14 uwe Exp $
a163 1
file	dev/clock_subr.c		isabus
@


1.147
log
@Support for standard SD host controllers like the Ricoh 5C822, a small
generic bus layer, and SCSI emulation for SD/MMC memory cards.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.146 2006/05/01 17:01:14 kettenis Exp $
d251 4
@


1.146
log
@Fixup broken mpbios'es on VT8237 and nForce4 chipsets.  Fixes interrupt
routing for several integrated devices on those chipsets in GENERIC.MP.
ok brad@@, mickey@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.145 2006/04/27 15:37:48 mickey Exp $
d403 5
@


1.145
log
@implement separate PAE pmap that allows access to 64g of physmem
if supported by the cpu(s). currently not enabled by default and
not compiled into ramdisks. this grows paddr_t to 64bit but yet
leaves bus_addr_t at 32bits. measures are taken to favour dmaable
memory allocation from below 4g line such that buffer cache is
already allocated form below, pool backend allocator prefers lower
memory and then finally bounce buffers are used as last resort.
PAE is engaged only if global variable cpu_pae is manually set
to non-zero and there is physical memory present above 4g.
simplify pcibios address math to use u_long as we always will
be in the 32bit space.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.144 2006/03/04 16:27:03 grange Exp $
d288 1
@


1.144
log
@Dallas 1-Wire bus support. Includes the following drivers:

gpioow(4)	1-Wire bus bit-banging through GPIO pin
onewire(4)	1-Wire bus driver
owid(4)		1-Wire ID family type device
owtemp(4)	1-Wire temperature family type device

Drivers for RS-232 and USB bus masters will follow.

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.143 2006/02/12 19:55:39 miod Exp $
d35 1
@


1.143
log
@Remove dead sysbeep driver and unused sysbeep() routine. No functional change.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.142 2006/01/29 17:29:29 marco Exp $
d396 5
@


1.142
log
@Disable iic whenever ipmi is enabled.  This fixes boxes like Sun x4200 that
freak out when more than one device driver touch the i2c devices.
Reported by: Srebrenko Sehic <ssehic at gmail dot com>

ok kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.141 2005/11/21 17:24:26 jordan Exp $
a192 3

device sysbeep
attach sysbeep at pcppi
@


1.141
log
@Add ESM support glue but keep it disabled for now.

ok dlg@@ marco@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.140 2005/11/04 06:55:35 tedu Exp $
a405 1
device	ipmi
a406 1
file	dev/ipmi.c				ipmi needs-flag
@


1.140
log
@only build powernow pieces as appropriate for config'd cpu types
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.139 2005/10/28 07:03:41 tedu Exp $
d410 4
@


1.139
log
@update support for powernow (cool and quiet) on k7, and add support
for k8.  preliminary and not well tested yet.  from freebsd via
gordon klok.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.138 2005/10/04 22:04:23 marco Exp $
d35 3
a37 3
file	arch/i386/i386/powernow.c	!small_kernel
file	arch/i386/i386/powernow-k7.c	!small_kernel
file	arch/i386/i386/powernow-k8.c	!small_kernel
@


1.138
log
@Add initial IPMI implementation.  Currently only KCS retrieval method is
supported.  SMIC and BMC will follow shortly.

Code written by Jordan Hargrave <jordan underscore hargrave at hotmail dot com>

help grange@@ and deraadt@@
ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.137 2005/09/26 22:32:03 miod Exp $
d37 1
@


1.137
log
@Share com probe code between com and pccom; allows us to get rid of awkward
code duplication in cardbus, pcmcia and puc attachments.

Joint effort with fgs@@; blessed deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.136 2005/07/14 02:09:46 uwe Exp $
d401 8
@


1.136
log
@More netccitt and netns removals; OK henning, brad, mickey
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.135 2005/06/02 20:09:39 tholo Exp $
d177 1
a177 1
device	pccom: tty
@


1.135
log
@Start on a basic ACPI framework -- does not do much more than read out the
ACPI tables into kernel memory and attach ACPI and HPET timers currently.

In order to test this code, enabling the devices in GENERIC as well as
the ACPI_ENABLE option is needed.  This code does not do any thermal
control yet, so this should be done with care depending on the platform.

In the tree so more people can contribute to making this more fully
featured.

Ok niklas@@ grange@@ tedu@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.134 2005/05/21 19:13:55 brad Exp $
a32 1
file	arch/i386/i386/ns_cksum.c	ns
@


1.134
log
@add i386 optimized in4_cksum

From NetBSD

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.133 2005/05/01 21:36:56 brad Exp $
d399 3
@


1.133
log
@To allow for MD override of in4_cksum()...

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.132 2005/03/08 20:00:23 tdeval Exp $
a23 1
file	netinet/in4_cksum.c		inet
@


1.132
log
@Cosmetics...
Mainly remove space between locators parens, replace spaces with tabs
where appropriate and consistently align dependencies.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.131 2005/03/05 23:58:43 tdeval Exp $
d24 1
@


1.131
log
@Clean up the tree from incomplete, unreliable and unsupported IEEE1394 code.
Ok deraadt@@, miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.130 2004/10/08 13:04:36 grange Exp $
d175 1
a175 1
define pckbcport { [irq = -1], [port = -1] }
@


1.130
log
@Move dev/cons.c to MI conf/files.

ok miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.129 2004/10/03 21:28:34 jcs Exp $
a388 5

#
# Machine-independent FireWire drivers
#
include "dev/ieee1394/files.ieee1394"
@


1.129
log
@nvram driver for i386 through /dev/nvram
currently read-only

ok grange@@, marius@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.128 2004/09/16 09:14:03 mickey Exp $
a45 1
file	dev/cons.c
@


1.128
log
@cleanup deafult locators (blah ?); please check that your most hated architecture is still fluffy (;
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.127 2004/09/15 20:28:53 grange Exp $
d220 3
@


1.127
log
@gscpm(4) -- National Semiconductor Geode SC1100 SMI/ACPI module driver.
Provides a timecounter for kern_tc. There's also code for cpu throttling tho
it's not tested due to the hardware errata.

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.126 2004/07/14 05:34:14 tedu Exp $
d86 1
a86 1
define mainbus { apid = -1 }
d200 1
a200 1
device	fdc {drive = -1}
d290 1
a290 1
define	cpu { apid = -1 }
@


1.126
log
@setperf driver for powernow in amd k7 cpus.  derived from a diff to
tech-i386@@netbsd by martin vegiard, and adapted to fit in here.
as yet untested.  ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.125 2004/06/22 09:47:01 mickey Exp $
d125 5
@


1.125
log
@support for rcc osb4 and csb5; tested on quad-zion and another box i have
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.124 2004/06/16 18:22:19 grange Exp $
d37 1
@


1.124
log
@db_mp.c requires ddb

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.123 2004/06/13 21:49:15 niklas Exp $
d310 1
@


1.123
log
@debranch SMP, have fun
@
text
@d1 1
a1 1
#	$OpenBSD$
d50 1
a50 1
file	arch/i386/i386/db_mp.c		multiprocessor
@


1.122
log
@GPIO support for AMD Elan SC520 found on Soekris net45x1 boards.

Test and ok markus@@.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.121 2004/06/03 18:22:21 grange Exp $
d47 4
d85 1
a85 1
define mainbus { }
d278 22
@


1.121
log
@gscpcib(4) -- National Semiconductor Geode SC1100 PCI-ISA bridge driver.
Besides the core pcib(4) functionality, the gscpcib driver provides
support for the GPIO interface of this device.

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.120 2004/06/03 18:13:13 grange Exp $
d112 1
a112 1
device	elansc
@


1.120
log
@Enable GPIO for i386 port.

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.119 2004/05/23 17:36:37 grange Exp $
d124 1
a124 1
file	arch/i386/pci/pcib.c		pcib | ichpcib
d130 5
@


1.119
log
@Enable i2c for i386 port.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.118 2004/05/11 04:01:00 deraadt Exp $
d359 5
@


1.118
log
@zap false rcs
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.117 2004/05/08 05:10:12 grange Exp $
d354 5
@


1.117
log
@Put back ichpcib(4), it works now.
@
text
@d1 1
a1 2
#	$OpenBSD: files.i386,v 1.116 2004/05/06 22:38:44 deraadt Exp $
#	$NetBSD: files.i386,v 1.73 1996/05/07 00:58:36 thorpej Exp $
@


1.116
log
@back out kernel breakage.  Be more careful damnit
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.113 2004/04/11 18:12:10 deraadt Exp $
d108 1
a108 1
device	pchb:	pcibus
d123 1
a123 1
device	pcib:	isabus
d125 6
a130 1
file	arch/i386/pci/pcib.c		pcib
@


1.115
log
@spaces
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.114 2004/05/06 19:47:03 grange Exp $
d108 1
a108 1
device	pchb: pcibus
d123 1
a123 1
device	pcib: isabus
d125 1
a125 6
file	arch/i386/pci/pcib.c		pcib | ichpcib

# Intel ICHx/ICHx-M LPC bridges
device	ichpcib: isabus
attach	ichpcib at pci
file	arch/i386/pci/ichpcib.c		ichpcib
@


1.114
log
@Move speedstep code to a separate ichpcib(4) driver.
It attaches instead of pcib(4) and provides its usual
functionality (attaching isa bus) by calling pcibattach()
in the attach routine.

ok miod deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.113 2004/04/11 18:12:10 deraadt Exp $
d108 1
a108 1
device	pchb:	pcibus
d123 1
a123 1
device	pcib:	isabus
@


1.113
log
@move via-specific chunks to own file
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.112 2004/04/02 22:28:40 tedu Exp $
d125 6
a130 1
file	arch/i386/pci/pcib.c		pcib
@


1.112
log
@K6-2/3 powernow driver.  not without quirks, but mostly working.
testing by david@@ ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.111 2003/12/20 18:23:17 tedu Exp $
d27 1
@


1.111
log
@add pentium 4 thermal control circuit (tcc) driver.  can use this to
limit power consumption with the hw.setperf sysctl.
tested by beck and grange
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.110 2003/12/18 23:46:19 tedu Exp $
d36 1
@


1.110
log
@add new hw sysctls, cpuspeed and setperf to control cpu frequency.
convert longrun support to use new sysctls.
add enhanced speedstep support, based on code by Michael Eriksson.
idea, help testing & ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.109 2003/11/03 03:35:40 tedu Exp $
d34 1
@


1.109
log
@remove support for non-existent scd and pcd drivers. ok deraadt millert
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.108 2003/08/07 08:32:56 markus Exp $
d22 1
d28 1
a28 1
file	arch/i386/i386/longrun.c	!small_kernel
@


1.108
log
@watchdog driver for Geode SC1100 (e.g. in soekris net4801); ok mickey@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.107 2003/07/30 05:26:33 mickey Exp $
a132 1
#major	{scd = 15}
@


1.107
log
@support for vt8231 from netbsd via pr3362 and tested by matthew.gream@@pobox.com
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.106 2003/07/28 19:59:18 jason Exp $
d112 5
@


1.106
log
@remove the non-licensed i386 math emulation stuff.  This only leaves the
gnu stuff as an option until it is replaced RSN.  ok deraadt.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.105 2003/06/24 22:45:33 espie Exp $
d269 1
@


1.105
log
@a.out emulation for dynamic binaries: intercept the right system calls
so that they look in /emul/a.out first. This allows a.out's ld.so to
find its own libraries without interfering with ELF at all.

Many comments from various people. okay deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.104 2003/05/14 22:53:59 tedu Exp $
a27 1
file	arch/i386/i386/math_emulate.c	math_emulate
@


1.104
log
@remove option LONGRUN; it's in everything but SMALL_KERNEL now
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.103 2003/05/14 22:08:04 tedu Exp $
d225 3
@


1.103
log
@Support for Transmeta CPU power management, called LongRun.
option LONGRUN enables a new sysctl, allowing a userland program
to read the current CPU frequency and voltage and also set
the mininum and maximum frequencies to operate between, and switch
between performance mode and battery mode.

ok mickey@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.102 2003/02/10 22:32:33 jason Exp $
d27 1
a27 1
file	arch/i386/i386/longrun.c	longrun
@


1.102
log
@Add hme at pci
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.101 2003/01/21 17:02:29 markus Exp $
d27 1
@


1.101
log
@add elan520 from netbsd; adapted to watchdog sysctl interface;
ok mickey@@, jakob@@, henric@@, fgsch@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.100 2002/11/07 22:03:22 mickey Exp $
d117 5
@


1.100
log
@dev/isa/i82365_isasubr.c is needed for pcic at pci; from Bernard Gardner via pr2962
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.99 2002/08/05 19:02:19 mickey Exp $
d107 5
@


1.99
log
@the supported agp chipset list is md-configured, not mi
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.98 2002/07/12 20:17:03 mickey Exp $
d290 1
a290 1
file	dev/isa/i82365_isasubr.c	pcic_isa | pcic_isapnp
@


1.98
log
@support for the agp gart on various agp chipsets.
only i810 driver was tested though.
based on the netbsd's lkm, initially ported
by hunter@@dg.net.ua and later made into shape by mickey.
testing by art@@ and millert@@ .
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.97 2002/06/26 17:11:50 tdeval Exp $
d94 6
@


1.97
log
@ieee1394 for i386 too...
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.96 2002/06/17 23:10:56 matthieu Exp $
d92 3
a94 2
file	arch/i386/pci/pci_machdep.c	pci
file	arch/i386/pci/pciide_machdep.c	pciide
@


1.96
log
@remove old pccons console driver. Not used anymore and not maintained.
ok millert@@, miod@@.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.95 2002/03/23 14:14:25 deraadt Exp $
d316 5
@


1.95
log
@typo repair; openbsd@@davidkrause.com
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.94 2001/11/02 10:06:13 jjbg Exp $
a138 7

# PC console support a la "pccons"
device	pc: tty, pckbcport
attach	pc at isa
device	pcconskbd
attach	pcconskbd at pckbc
file	arch/i386/isa/pccons.c		pc | pcconskbd needs-flag
@


1.94
log
@Make kernel compile without IPSEC, PPP_DEFLATE but with CRYPTO. Reported by
Brian J. Kifiak <bk@@rt.fm>. Thanks!
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.93 2001/10/25 19:03:49 mickey Exp $
d48 1
a48 1
# Media Indepedent Interface (mii)
@


1.94.2.1
log
@Sync UBC branch to -current
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.94 2001/11/02 10:06:13 jjbg Exp $
d48 1
a48 1
# Media Independent Interface (mii)
@


1.94.2.2
log
@sync to -current
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.94.2.1 2002/06/11 03:35:52 art Exp $
d92 2
a93 9
file	arch/i386/pci/pci_machdep.c		pci
file	arch/i386/pci/agp_machdep.c		pciagp
file	dev/pci/agp_ali.c			pciagp
file	dev/pci/agp_amd.c			pciagp
file	dev/pci/agp_i810.c			pciagp
file	dev/pci/agp_intel.c			pciagp
file	dev/pci/agp_sis.c			pciagp
file	dev/pci/agp_via.c			pciagp
file	arch/i386/pci/pciide_machdep.c		pciide
d140 7
a322 5

#
# Machine-independent FireWire drivers
#
include "dev/ieee1394/files.ieee1394"
@


1.94.2.3
log
@sync
@
text
@d1 1
a1 1
#	$OpenBSD$
a26 1
file	arch/i386/i386/longrun.c	!small_kernel
a107 5
# AMD Elan SC520 System Controller (PCI-Host bridge)
device	elansc
attach	elansc at pci
file	arch/i386/pci/elan520.c		elansc

a112 5
device	hme: ether, ifnet, mii, ifmedia
file	dev/ic/hme.c			hme
attach	hme at pci with hme_pci
file	dev/pci/if_hme_pci.c		hme_pci

d290 1
a290 1
file	dev/isa/i82365_isasubr.c	pcic_isa | pcic_isapnp | pcic_pci
@


1.93
log
@add an ali1543 and fix amd756 icu drivers
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.92 2001/08/25 10:13:29 art Exp $
d41 1
a41 1
file	lib/libz/adler32.c		!ppp_deflate & !ipsec
@


1.92
log
@Change pci_intr_map to take pci_attach_args as an argument.
All callers actually took all arguments to pci_intr_map from pci_attach_args
structs, so this simplifies code.
This also allows more complicated interrupt assignment schemes like the one
on sparc64.

This makes sparc64 pci interrupts work.

Inspired by the same change in NetBSD.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.91 2001/08/17 21:11:54 mickey Exp $
d257 1
@


1.91
log
@depend wscons_machdep.c on wsdisplay; from Peter Galbavy <peter.galbavy@@knowtion.net>
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.90 2001/08/08 15:15:28 jjbg Exp $
a92 1
file	arch/i386/pci/pci_compat.c	pci	# XXX compatibility
@


1.90
log
@IPCOMP removal. deraadt@@ ok.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.89 2001/07/06 14:00:30 jjbg Exp $
d44 1
a44 1
file	arch/i386/i386/wscons_machdep.c
@


1.89
log
@Change to make the kernel build when IPCOMP is activated and
PPP_DEFLATE is not. Reported by Heikki Korpela <heko@@saitti.net>.
ho@@ ok.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.88 2001/06/27 07:18:34 niklas Exp $
d41 1
a41 1
file	lib/libz/adler32.c		!ppp_deflate & !ipcomp
@


1.88
log
@UVM is default
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.87 2001/06/25 23:06:54 niklas Exp $
d41 1
a41 1
file	lib/libz/adler32.c		!ppp_deflate
@


1.87
log
@Include I2O files
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.86 2001/06/24 23:31:26 mickey Exp $
d33 1
a33 2
file	arch/i386/i386/pmap.c		!pmap_old & uvm
file	arch/i386/i386/pmap.old.c	pmap_old | !uvm
@


1.86
log
@add i2o stubs
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.85 2001/05/11 07:13:15 deraadt Exp $
d66 1
a66 1
#include "dev/i2o/files.i2o"
@


1.85
log
@unify rd(4) even more
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.84 2001/05/11 06:41:35 deraadt Exp $
d62 5
@


1.84
log
@unify
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.83 2001/05/01 17:39:01 aaron Exp $
a60 3

# RAM Disk for install floppy
file dev/rd.c				ramdisk_hooks
@


1.83
log
@Remove PCVT file references.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.82 2001/04/09 07:14:14 tholo Exp $
d63 1
a63 1
file arch/i386/i386/rd_root.c		ramdisk_hooks
@


1.82
log
@Add emulation of Linux features to procfs; mostly from NetBSD.  ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.81 2001/04/07 17:17:27 niklas Exp $
a145 11

# PC console support a la "pcvt"
device	vt: tty, pckbcport
attach	vt at isa
file	arch/i386/isa/pcvt/pcvt_drv.c	vt needs-flag
file	arch/i386/isa/pcvt/pcvt_ext.c	vt needs-flag
file	arch/i386/isa/pcvt/pcvt_kbd.c	vt needs-flag
file	arch/i386/isa/pcvt/pcvt_mouse.c	vt needs-flag
file	arch/i386/isa/pcvt/pcvt_out.c	vt needs-flag
file	arch/i386/isa/pcvt/pcvt_sup.c	vt needs-flag
file	arch/i386/isa/pcvt/pcvt_vtf.c	vt needs-flag
@


1.81
log
@OK, PMAP_NEW by default once again.  This time it should work better for
 userland since art removed the vm_pmap field that made UVM and old VM
differ.  An option PMAP_OLD is provided should someone need to configure
with the old pmap.  This is suspected to go away soon so I will not
document it.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.79 2001/04/02 23:24:11 niklas Exp $
d36 1
@


1.80
log
@If you cannot test your work, please do not do commits and then break userland
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.78 2001/03/22 23:36:51 niklas Exp $
d33 2
a34 2
file	arch/i386/i386/pmap.c		pmap_new
file	arch/i386/i386/pmap.old.c	!pmap_new
@


1.79
log
@PMAP_NEW is now default behaviour, get old pmap with option PMAP_OLD.
However PMAP_OLD is just there for emergencies, and will go away in the future
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.79 2001/04/02 23:18:12 niklas Exp $
d33 2
a34 2
file	arch/i386/i386/pmap.c		!pmap_old
file	arch/i386/i386/pmap.old.c	pmap_old
@


1.78
log
@Merge in NetBSD's PMAP_NEW, still disabled
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.77 2001/03/05 15:13:43 aaron Exp $
d33 2
a34 2
file	arch/i386/i386/pmap.c		pmap_new
file	arch/i386/i386/pmap.old.c	!pmap_new
@


1.77
log
@Add support for ISAPnP i82365-based PCMCIA controllers; from NetBSD. UNTESTED.
These cards are probably very rare. deraadt@@ ok
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.76 2001/02/25 23:24:18 aaron Exp $
d33 2
a34 1
file	arch/i386/i386/pmap.c
@


1.76
log
@Add wscons_machdep.c which is a constab-style wrapper driver for wscons on
i386. This fixes serial console. millert@@, mickey@@ ok
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.75 2001/02/21 20:40:02 jbm Exp $
d294 2
a295 2
#attach	pcic at isapnp with pcic_isapnp
#file	dev/isa/i82365_isapnp.c	pcic_isapnp
@


1.75
log
@Remove old (non-wsmouse) pms driver. aaron@@ ok.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.74 2001/01/30 00:00:29 aaron Exp $
d43 1
@


1.74
log
@Support for the wscons machine-independent console driver on the i386. To
become default in a few moments once deraadt commits new kernel config files.

IMPORTANT NOTE: A few important pieces are still required to be worked out
over the next few days. Users (and developers) relying on X should probably
stay away from -current until further notice. This should not take long, but
here is your first heads up. If you decide to upgrade your kernel anyway,
be sure to update your /etc/ttys file to use vt100 instead of vt220. The
rest of the fallout from this should be minor.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.73 2001/01/24 09:38:00 hugh Exp $
a161 4
device	opms
attach	opms at pckbcport with opms_hack
attach	opms at pckbc with opms_pckbc
file	arch/i386/isa/pms.c		opms | opms_hack | opms_pckbc needs-flag
@


1.73
log
@KGDB for i386 from NetBSD via niklas, with tweaks and accommodations.
Tested by various, vetted by mickey & theo.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.72 2000/11/07 18:21:21 mickey Exp $
d129 1
a129 1
define pckbd { [irq = -1], [port = -1] }
d138 1
a138 1
device	pc: tty, pckbd
d140 3
a142 1
file	arch/i386/isa/pccons.c		pc needs-flag
d145 1
a145 1
device	vt: tty, pckbd
d156 1
a156 1
device	lms
d159 1
a159 1
device	mms
d162 7
a168 3
device	pms
attach	pms at pckbd
file	arch/i386/isa/pms.c		pms needs-flag
@


1.72
log
@AMD750 Athlon chipset support for PCIBIOS_INTR_FIXUP; from minoura@@jp.netbsd.org
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.71 2000/09/01 05:46:01 aaron Exp $
d18 1
a18 1
file	arch/i386/i386/db_memrw.c	ddb
d26 1
@


1.71
log
@Kernel support for new PCVT console mouse features.

- Basic cut/paste functionality.
- Wheel mouse support (wheel rolls page-by-page through scrollback buffer).
- Copybuffer ownership. i.e., if User X logs in the console and selects text,
  when User Y logs in later the buffer cannot be pasted.

Big thanks to Jean-Baptiste Marchand, Julien Montagne, and Jerome Verdon for
implementing this.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.70 2000/08/17 20:15:33 mickey Exp $
d261 1
@


1.70
log
@pcibios0 at bios0 flags 0x0000
this is now a real device, which looks in flags for disabling
address, interrupt or bus fixup.
bios0's flags are to disable bios32 and pcibios probing.
since boot_config support editing flags, it's posible
to adjust pcibios functionality in the generic kernel
upon boot time. man is coming.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.69 2000/08/08 19:12:38 mickey Exp $
d147 1
@


1.69
log
@sync w/ netbsd almost -current code (;
fixes quite a few problems.
adds new option PCIBIOS_ADDR_FIXUP.
numerous extra fixes by me, also pointed out by other ppl,
such as avoid panics, ifdef on pciverbose, not diagnostic,
some other smaller knits; some have been forwarded back
to netbsd developers, some will go soon too.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.68 2000/08/01 07:55:38 aaron Exp $
a88 9
file	arch/i386/pci/pcibios.c		pcibios
file	arch/i386/pci/pci_intr_fixup.c	pcibios & pcibios_intr_fixup
file	arch/i386/pci/piix.c		pcibios & pcibios_intr_fixup
file	arch/i386/pci/opti82c558.c	pcibios & pcibios_intr_fixup
file	arch/i386/pci/opti82c700.c	pcibios & pcibios_intr_fixup
file	arch/i386/pci/sis85c503.c	pcibios & pcibios_intr_fixup
file	arch/i386/pci/via82c586.c	pcibios & pcibios_intr_fixup
file	arch/i386/pci/pci_bus_fixup.c	pcibios & pcibios_bus_fixup
file	arch/i386/pci/pci_addr_fixup.c	pcibios & pcibios_addr_fixup
d240 2
a241 2
device bios {}
attach bios at mainbus
d244 2
a245 2
device apm
attach apm at bios
d249 11
a259 1
file	arch/i386/i386/bios32.c		bios32
@


1.68
log
@Add PCI attachment for i82365-compatible PCMCIA controllers. Needed for
the Cirrus Logic CL-PD6729 controller found on some laptops, i.e., the
Gateway 2000 Solo 2100. Thanks to JDempsey@@iss.net for testing and initiallly
prodding me to get PC Cards to work in his laptop.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.67 2000/07/05 14:26:34 hugh Exp $
d97 1
@


1.67
log
@Decouple memory access functions from db_interface.c so they can be
shared with upcoming KGDB. As per NetBSD.
Ok'd by niklas.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.66 2000/05/15 06:26:59 niklas Exp $
d282 2
a283 2
#attach	pcic at pci with pcic_pci
#file	dev/pci/i82365_pci.c		pcic_pci
@


1.66
log
@Cardbus com driver, from NetBSD, but adapted for our style conventions
and with pccom support added
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.65 2000/05/15 04:17:29 jason Exp $
d18 1
@


1.65
log
@driver for the databook isa/pcmcia bridge (commented out in GENERIC for now);
from NetBSD.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.64 2000/04/08 05:50:49 aaron Exp $
d141 1
a141 1
file	arch/i386/isa/pccom.c		pccom & (pccom_isa | pccom_isapnp | pccom_commulti | pccom_pcmcia | pccom_puc) needs-flag
d314 3
@


1.64
log
@Initial check-in for support of 32-bit CardBus PC Cards; from NetBSD. On many
machines, this code needs the new PCIBIOS* options enabled in the kernel config
file to work, but your mileage may vary. Included is a working 3c575 driver for
3Com 10/100 CardBus PC Card NICs (tested only with the 'C' revision). The 3c575
is the pccard version of the PCI EtherLink XL cards, and thus the xl driver has
been split into /sys/dev/ic.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.63 2000/03/26 22:38:32 mickey Exp $
d290 6
@


1.63
log
@from netbsd: pci interrupt routing code.
also, change a few pcidevs names to match netbsd (and more descriptive).
tested on a bunch of laptops, helps resolving 'pin X unmapped'
problems for (usually) usb and cardbus cntrollers.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.62 2000/02/21 17:09:08 mickey Exp $
d258 6
d273 1
a273 1
device	pcic {[controller = -1], [socket = -1]}
@


1.62
log
@separate assembly thing into an own file to avoid compiler-deps.
ignore suspend reqs while suspending.
ignore suspend requests for 3 seconds holdoff period once awaken.
protect event queue manipulations w/ splhigh's.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.61 1999/11/20 11:18:59 matthieu Exp $
d87 9
d97 1
a97 1
file	arch/i386/pci/pci_compat.c	pci	# XXX compatibility
d255 2
@


1.61
log
@add MTRR support from FreeBSD
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.60 1999/11/08 15:36:08 mickey Exp $
d245 1
@


1.61.2.1
log
@sync with -current
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.62 2000/02/21 17:09:08 mickey Exp $
a244 1
file	arch/i386/i386/apmcall.S	apm
@


1.61.2.2
log
@Update the SMP branch to -current, this breaks the SMP branch though.
But it will be fixed soonish.  Note, nothing new has happened, this is just
a merge of the trunk into this branch.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.82 2001/04/09 07:14:14 tholo Exp $
a17 1
file	arch/i386/i386/db_memrw.c	ddb | kgdb
a24 1
file	arch/i386/i386/kgdb_machdep.c	kgdb
d31 1
a31 2
file	arch/i386/i386/pmap.c		!pmap_old & uvm
file	arch/i386/i386/pmap.old.c	pmap_old | !uvm
a32 1
file	arch/i386/i386/procfs_machdep.c	procfs
a40 1
file	arch/i386/i386/wscons_machdep.c
d87 1
a88 2
file	arch/i386/pci/pciide_machdep.c	pciide
file	arch/i386/pci/pcic_pci_machdep.c	pcic_pci
d126 1
a126 1
define pckbcport { [irq = -1], [port = -1] }
d132 1
a132 1
file	arch/i386/isa/pccom.c		pccom & (pccom_isa | pccom_isapnp | pccom_commulti | pccom_pcmcia | pccom_cardbus | pccom_puc) needs-flag
d135 1
a135 1
device	pc: tty, pckbcport
d137 1
a137 3
device	pcconskbd
attach	pcconskbd at pckbc
file	arch/i386/isa/pccons.c		pc | pcconskbd needs-flag
d140 1
a140 1
device	vt: tty, pckbcport
a144 1
file	arch/i386/isa/pcvt/pcvt_mouse.c	vt needs-flag
d150 1
a150 1
device	lms: wsmousedev
d153 1
a153 1
device	mms: wsmousedev
d156 3
a158 3

include	"dev/wscons/files.wscons"
include	"dev/pckbc/files.pckbc"
d238 2
a239 2
device	bios {}
attach	bios at mainbus
d242 2
a243 2
device	apm
attach	apm at bios
a246 19
device	pcibios
attach	pcibios at bios
file	arch/i386/pci/pcibios.c		pcibios needs-count
file	arch/i386/pci/pci_intr_fixup.c	pcibios
file	arch/i386/pci/pci_bus_fixup.c	pcibios
file	arch/i386/pci/pci_addr_fixup.c	pcibios
file	arch/i386/pci/opti82c558.c	pcibios
file	arch/i386/pci/opti82c700.c	pcibios
file	arch/i386/pci/piix.c		pcibios
file	arch/i386/pci/sis85c503.c	pcibios
file	arch/i386/pci/via82c586.c	pcibios
file	arch/i386/pci/amd756.c		pcibios

#
# CARDBUS
#
include	"dev/cardbus/files.cardbus"
file	arch/i386/i386/rbus_machdep.c	cardbus

d256 1
a256 1
device	pcic: pcmciabus
d264 2
a265 2
attach	pcic at pci with pcic_pci
file	dev/pci/i82365_pci.c		pcic_pci
d268 2
a269 2
attach	pcic at isapnp with pcic_isapnp
file	dev/isa/i82365_isapnp.c	pcic_isapnp
a273 6
# Databook TCIC/2 pcmcia/isa bridge
device	tcic: pcmciabus
file	dev/ic/tcic2.c			tcic
attach	tcic at isa with tcic_isa
file	dev/isa/tcic2_isa.c		tcic_isa

a290 3

# i386-specific Cardbus drivers
attach	pccom at cardbus with pccom_cardbus
@


1.61.2.3
log
@Merge in -current from two days ago in the SMP branch.
As usual with merges, they do not indicate progress, so do not hold
your breath for working SMP, and do not mail me and ask about the
state of it.  It has not changed.  There is work ongoing, but very, very
slowly.  The commit is done in parts as to not lock up the tree in too
big chunks at a time.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.61.2.2 2001/04/18 16:07:11 niklas Exp $
d33 2
a34 1
file	arch/i386/i386/pmap.c
d61 3
a66 5
# I2O
#
include "dev/i2o/files.i2o"

#
d146 11
@


1.61.2.4
log
@Initial import of some SMP code from NetBSD.
Not really working here yet, but there is some work in progress.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.61.2.3 2001/07/04 10:16:27 niklas Exp $
a43 3
file	arch/i386/i386/mptramp.s	multiprocessor
file	arch/i386/i386/lock_machdep.c	multiprocessor
file	arch/i386/i386/ipifuncs.c	multiprocessor
d78 1
a78 1
define mainbus { apid = -1 }
a244 22

# Intel SMP specification 1.4
define	mpbios
file	arch/i386/i386/mpbios.c		mpbios needs-flag

# CPUS
define	cpu { apid = -1 }
device	cpu
attach	cpu at mainbus
file	arch/i386/i386/cpu.c		cpu

# Common APIC support routines
file	arch/i386/i386/apic.c		ioapic | lapic

# Local APIC (required for multiprocessor)
define	lapic
file	arch/i386/i386/lapic.c		lapic needs-flag

# I/O APICs
device	ioapic: mpbios, lapic
attach	ioapic at mainbus
file	arch/i386/i386/ioapic.c		ioapic needs-flag
@


1.61.2.5
log
@Sync the SMP branch to something just after 3.0
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.61.2.4 2001/07/14 10:02:22 ho Exp $
d41 1
a41 1
file	lib/libz/adler32.c		!ppp_deflate & !ipsec
d47 1
a47 1
file	arch/i386/i386/wscons_machdep.c	wsdisplay
d96 1
a282 1
file	arch/i386/pci/ali1543.c		pcibios
@


1.61.2.6
log
@Merge in -current
@
text
@d1 1
a1 1
#	$OpenBSD$
d41 1
a41 1
file	lib/libz/adler32.c		!ppp_deflate & !ipsec & !crypto
@


1.61.2.7
log
@Sync the SMP branch with 3.3
@
text
@d51 1
a51 1
# Media Independent Interface (mii)
d95 2
a96 9
file	arch/i386/pci/pci_machdep.c		pci
file	arch/i386/pci/agp_machdep.c		pciagp
file	dev/pci/agp_ali.c			pciagp
file	dev/pci/agp_amd.c			pciagp
file	dev/pci/agp_i810.c			pciagp
file	dev/pci/agp_intel.c			pciagp
file	dev/pci/agp_sis.c			pciagp
file	dev/pci/agp_via.c			pciagp
file	arch/i386/pci/pciide_machdep.c		pciide
a103 5
# AMD Elan SC520 System Controller (PCI-Host bridge)
device	elansc
attach	elansc at pci
file	arch/i386/pci/elan520.c		elansc

a108 5
device	hme: ether, ifnet, mii, ifmedia
file	dev/ic/hme.c			hme
attach	hme at pci with hme_pci
file	dev/pci/if_hme_pci.c		hme_pci

d143 7
d315 1
a315 1
file	dev/isa/i82365_isasubr.c	pcic_isa | pcic_isapnp | pcic_pci
a347 5

#
# Machine-independent FireWire drivers
#
include "dev/ieee1394/files.ieee1394"
@


1.61.2.8
log
@merge the trunk so we will get the genfs and locking fixes
@
text
@a26 1
file	arch/i386/i386/longrun.c	!small_kernel
@


1.61.2.9
log
@Some i386-specific stuff:
Stop other CPUs when entering ddb
'machine sysregs' shows system registers not usually used by applications
'machine cpuinfo' shows the status of the processors
'machine startcpu n' starts CPU n
'machine stopcpu n' stops CPU n
'machine ddbcpu n' transfers ddb control to CPU n (not very useful yet
though since the second processor can't use the keyboard...)

Niklas said that I should test this first to at least make sure it
compiles, but I'm too anxious to do my first commit. :)
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.61.2.8 2003/05/16 00:29:39 niklas Exp $
a47 1
file	arch/i386/i386/db_mp.c		multiprocessor
@


1.61.2.10
log
@Merge of current from two weeks agointo the SMP branch
@
text
@d1 1
a1 1
#	$OpenBSD$
a21 1
file	arch/i386/i386/est.c		!small_kernel & i686_cpu
d27 2
a28 1
file	arch/i386/i386/longrun.c	!small_kernel & i586_cpu
a33 1
file	arch/i386/i386/p4tcc.c		!small_kernel & i686_cpu
a117 5
# Geode SC1100
device	geodesc
attach	geodesc at pci
file	arch/i386/pci/geodesc.c		geodesc

d133 1
a229 3
# a.out binary compatibility (COMPAT_AOUT)
include "../../../compat/aout/files.aout"

a292 1
file	arch/i386/pci/via8231.c		pcibios
@


1.61.2.11
log
@Merge with the trunk
@
text
@d2 1
a26 1
file	arch/i386/i386/via.c		i686_cpu
a35 1
file	arch/i386/i386/powernow.c	!small_kernel
d110 1
a110 1
device	pchb: pcibus
d115 1
a115 1
device	elansc: gpiobus
d125 1
a125 1
device	pcib: isabus
d127 1
a127 11
file	arch/i386/pci/pcib.c		pcib | ichpcib | gscpcib

# Intel ICHx/ICHx-M LPC bridges
device	ichpcib: isabus
attach	ichpcib at pci
file	arch/i386/pci/ichpcib.c		ichpcib

# National Semiconductor Geode SC1100 PCI-ISA bridge
device	gscpcib: isabus, gpiobus
attach	gscpcib at pci
file	arch/i386/pci/gscpcib.c		gscpcib
a373 10

#
# Machine-independent I2C drivers
#
include "dev/i2c/files.i2c"

#
# Machine-independent GPIO drivers
#
include "dev/gpio/files.gpio"
@


1.60
log
@move MI definition of rd into it's MI place also fixing
attributes, allowing kernels to exist w/ rd as the only disk device.
tested on a few archs; niels@@ & millert@@ ok
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.59 1999/10/26 13:14:35 downsj Exp $
d27 2
d182 3
@


1.59
log
@Add puc devices.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.58 1999/10/06 07:36:55 deraadt Exp $
a55 2
pseudo-device rd
file dev/ramdisk.c			rd needs-flag
@


1.58
log
@y2k related fixes; from netbsd, work by fgsch/ivan
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.57 1999/09/13 13:08:13 deraadt Exp $
d132 1
a132 2
#attach	pccom at pcmcia with pccom_pcmcia
file	arch/i386/isa/pccom.c		pccom & (pccom_isa | pccom_isapnp | pccom_commulti | pccom_pcmcia) needs-flag
d269 8
@


1.57
log
@isa0 at pcib?; netbsd via peter
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.56 1999/08/13 05:56:58 fgsch Exp $
d114 1
@


1.56
log
@Almost forget it; USB support.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.55 1999/07/25 18:05:42 csapuntz Exp $
d96 1
a96 1
device	pcib:	pcibus
@


1.55
log
@

Make sure pciide_machdep.c is uncommented
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.54 1999/07/25 10:38:30 deraadt Exp $
d279 5
@


1.54
log
@costa owes me a beer
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.53 1999/07/25 10:22:25 deraadt Exp $
d87 1
a87 3
#Start Uncomment for new ATA stuff
#file	arch/i386/pci/pciide_machdep.c	pciide
#End Uncomment for new ATA stuff
@


1.53
log
@remove extra comments
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.52 1999/07/18 21:25:21 csapuntz Exp $
d65 2
a66 4
include "../../../dev/atapi/files.atapi"

#include "../../../dev/atapiscsi/files.atapiscsi"
#include "../../../dev/ata/files.ata"
@


1.52
log
@

Import of NetBSD ATA/IDE stuff.

Introduction of home-grown

To enable this stuff in your configuration, look at the NEWATA conf file
and go through

dev/isa/files.isa
dev/pci/files.pci
conf/files
arch/i386/conf/files.i386

and follow the instructions on commenting/uncommenting stuff
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.51 1999/01/21 08:26:48 niklas Exp $
a64 1
#Comment out this include below if you're using the new ATA stuff
a66 1
#Start Uncomment for new ATA stuff
a68 1
#End Uncomment for new ATA stuff
@


1.51
log
@Fix my com/pccom thinko
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.50 1999/01/20 18:28:46 niklas Exp $
d65 1
d68 4
d92 3
@


1.50
log
@pccom is i386 only, com can be attached from mi-land though
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.49 1999/01/02 00:02:53 niklas Exp $
d269 2
a270 1
# this wants to be probed as late as possible.
d277 1
a277 2
attach	pccom at pcmcia with com_pcmcia
file	dev/pcmcia/com_pcmcia.c			com_pcmcia
@


1.49
log
@Midi & sequencer support from NetBSD, mostly by Lennart Augustsson
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.48 1998/10/04 23:34:37 niklas Exp $
a99 6
# Pcmcia, before ISA (to define device stuff)
#

#include "../../../dev/pcmcia/files.pcmcia"

#
d275 3
@


1.48
log
@Remove remnicients of if_ed
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.47 1998/09/22 08:06:07 fgsch Exp $
d165 3
a177 5

# PC speaker
device	spkr: tty
attach	spkr at pckbd
file	arch/i386/isa/spkr.c		spkr needs-flag
@


1.47
log
@ed replaced by ec/ne/we drivers.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.46 1998/09/11 10:33:13 fgsch Exp $
a179 9

# National Semiconductor DS8390/WD83C690-based boards
# (WD/SMC 80x3 family, SMC Ultra [8216], 3Com 3C503, NE[12]000, and clones)
# XXX conflicts with other ports; can't be in files.isa
#device	ed: ether, ifnet
#attach	ed at isa with ed_isa
#attach	ed at pcmcia with ed_pcmcia
#attach	ed at pci with ed_pci
#file	dev/isa/if_ed.c			ed & (ed_isa | ed_pcmcia | ed_pci) needs-flag
@


1.46
log
@Comment the pcmcia attach routines for ed and pccom.
Add the pcmcia definitions for the new framework.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.45 1998/09/11 04:17:43 jason Exp $
d184 2
a185 2
device	ed: ether, ifnet
attach	ed at isa with ed_isa
d187 2
a188 2
attach	ed at pci with ed_pci
file	dev/isa/if_ed.c			ed & (ed_isa | ed_pcmcia | ed_pci) needs-flag
@


1.45
log
@Grr... missed this in previous commit: adding 'mii' bus for i386
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.44 1998/08/07 04:54:38 mickey Exp $
d103 1
a103 1
include "../../../dev/pcmcia/files.pcmcia"
d136 1
a136 1
attach	pccom at pcmcia with pccom_pcmcia
d186 1
a186 1
attach	ed at pcmcia with ed_pcmcia
d258 34
@


1.44
log
@fdc is fdc, fd is fd
@
text
@d42 5
@


1.43
log
@add stupid pcib driver
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.42 1998/06/02 18:46:34 deraadt Exp $
d164 2
a167 1
file	dev/isa/fdc.c		fdc needs-flag
@


1.42
log
@untested isapnp joystick driver
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.41 1998/04/26 21:41:48 provos Exp $
d88 5
@


1.41
log
@use a rel. path for compat/ossaudio
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.40 1998/04/26 21:03:14 provos Exp $
a178 5
# Game adapter (joystick)
device	joy
attach	joy at isa
file	arch/i386/isa/joy.c		joy needs-flag

d203 8
@


1.40
log
@update audio from NetBSD, mostly by Lennart Augustsson <augustss@@cs.chalmers.se>
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.39 1998/01/06 02:35:19 deraadt Exp $
d235 1
a235 1
include "compat/ossaudio/files.ossaudio"
@


1.39
log
@pchb support
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.38 1997/12/21 14:47:15 downsj Exp $
d233 3
@


1.38
log
@ISA PnP support
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.37 1997/11/06 02:17:30 mickey Exp $
d83 5
@


1.37
log
@mak kernel compiles w/o bios0
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.36 1997/10/27 14:42:01 niklas Exp $
d122 1
a122 1
file	arch/i386/isa/pccom.c		pccom & (pccom_isa | pccom_commulti | pccom_pcmcia) needs-flag
d194 9
@


1.36
log
@Mandatory disk signature BIOS->BSD mapping enabled
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.35 1997/10/27 08:06:31 niklas Exp $
d35 1
a35 1
file	arch/i386/i386/dkcsum.c
@


1.35
log
@Kernel side of disk signature based BIOS->BSD disk number mapping
(a.k.a checksumming).  This is a solution for the otherwise hard problem
of knowing what disk a certain BIOS geometry is for.  PC BIOSes does not
tell anything about where a certain disk is physically attached, and
the ordering of drives in the BIOS area is not deterministic.  for the
moment it is not enabled in any kernel config file, but that will come RSN.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.34 1997/09/29 03:52:21 mickey Exp $
d35 2
a226 4

pseudo-device dkcsum
file	arch/i386/i386/dkcsum.c		dkcsum needs-flag
file	lib/libz/adler32.c		dkcsum & !ppp_deflate
@


1.34
log
@apm0 at bios0; i have sb and scd now
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.33 1997/09/21 04:27:34 mickey Exp $
d226 3
@


1.33
log
@support new boots
add to your config:
bios0 at mainbus0
apm0 at mainbus0	# (if you are using APM)
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.32 1997/09/02 08:48:12 downsj Exp $
d218 4
d223 1
a223 1
attach apm at mainbus
a224 4

device bios
attach bios at mainbus
file	arch/i386/i386/bios.c		bios needs-count
@


1.32
log
@COMPAT_BSDOS changes to sys/compat/bsdos.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.31 1997/04/13 04:52:33 millert Exp $
d221 5
@


1.31
log
@Add support for PCI NE2000 clones.  I finally got around to doing this :-)
Tested on alpha, should work on i386 as well.  Note that we treat
a PCI NE2000 as a 16-bit card for now since the driver can not
deal with > 16 bit cards.  To fix this isa16bit in ed_softc needs to
be changed to bus_width (in bytes).  I plan to do this as part
of the split ed driver.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.30 1997/02/13 23:31:33 niklas Exp $
d210 3
@


1.30
log
@Provide ccd's major number
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.29 1996/12/11 12:59:28 niklas Exp $
d169 2
a170 1
file	dev/isa/if_ed.c			ed & (ed_isa | ed_pcmcia) needs-flag
@


1.29
log
@isadma belongs in files.isa
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.28 1996/10/26 06:15:04 downsj Exp $
d11 2
@


1.28
log
@floppy driver is now in dev/isa.  Not in files.isa yet, though, since arc
changes are still needed.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.27 1996/10/04 02:51:16 deraadt Exp $
a96 1
file	dev/isa/isadma.c		isadma needs-flag
@


1.27
log
@ahc on eisa, netbsd
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.26 1996/09/12 07:48:44 mickey Exp $
d148 1
d153 2
a154 2
file	arch/i386/isa/fdc.c		fdc needs-flag
file	arch/i386/isa/fd.c		fd needs-flag
@


1.26
log
@set correct 'maxpartitions'
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.25 1996/09/01 20:56:31 downsj Exp $
d173 5
@


1.25
log
@initial commit of split fdc/fd drivers
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.24 1996/08/27 10:46:51 downsj Exp $
d8 1
a8 1
maxpartitions 8
@


1.24
log
@Add:
	* GPL_MATH_EMULATE: fpemul
	* ALWAYS_MATH_EMULATE: causes npx probe to always fail.
	* better fp context in struct pcb.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.23 1996/08/08 18:47:13 dm Exp $
d152 2
a153 1
file	arch/i386/isa/fd.c		fdc needs-flag
@


1.23
log
@Added a pctr pseudo-device for accessing the Pentium performance counters,
and a program pctrctl to set the counter functions.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.22 1996/07/28 05:07:04 downsj Exp $
d106 3
@


1.22
log
@pccom and com are now mutually exclusive; pccom moves to major 8, the
same as com.

Also various function renaming and such so that multiport drivers should
now be able to link with pccom.  pccomvar.h is no longer needed.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.21 1996/07/07 00:11:49 downsj Exp $
d169 4
@


1.21
log
@Add pccom to files.i386.  SPARE-PARTS is an i386-dx40, which runs
with zero fifo overruns or dropped characters at 115200bps with pccom.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.20 1996/06/22 21:52:51 tholo Exp $
d114 1
a114 1
#attach pccom at pccommulti with pccom_commulti
d116 1
a116 2
#file	arch/i386/isa/pccom.c		pccom & (pccom_isa | pccom_commulti | pccom_pcmcia) needs-flag
file	arch/i386/isa/pccom.c		pccom & (pccom_isa | pccom_pcmcia) needs-flag
@


1.20
log
@Assembly version of in_cksum by Dave Richards.  >20% faster in the usual
cases, up to 62% faster in other cases.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.19 1996/06/16 10:33:20 deraadt Exp $
d110 8
@


1.19
log
@isadma is now a real driver, and the i386 ports needs to use it
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.18 1996/06/08 09:12:38 downsj Exp $
d20 1
a20 1
file	arch/i386/i386/in_cksum.c	inet
@


1.18
log
@Initial support ATAPI CD-ROMs.

Based on Manuel Bouyer's drivers.
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.11 1996/04/21 22:16:15 deraadt Exp $
d97 1
d140 1
a140 1
device	fd: disk, isadma
@


1.17
log
@le driver split
@
text
@d53 7
@


1.16
log
@from MACH: add {in,out}[bw] functions and dr* operations.
@
text
@d2 1
a2 1
#	$NetBSD: files.i386,v 1.72 1996/04/09 22:59:03 cgd Exp $
a148 8

# AMD am7990 (Lance) -based boards
# (BICC Isolan, NE2100, DEPCA)
# XXX conflicts with other ports; can't be in files.isa
device	le: ether, ifnet
attach	le at isa with le_isa: isadma
attach	le at pci with le_pci
file	dev/isa/if_le.c			le
@


1.15
log
@The ed driver cannot be in conf/files due to a name conflict in the amiga
port.  This is resolved like the if_le conflict, by having it in files.i386
until the conflict is resolved.
@
text
@d17 1
@


1.14
log
@Pull in John Kohl's [jtk@@netbsd.org] most recent (15Apr96) APM and PCMCIA work
(original PCMCIA framework  by Stefan Grefen [grefen@@convex.com]).
@
text
@d144 4
a147 3
#device	ed: ether, ifnet
#attach	ed at isa
#file	dev/isa/if_ed.c			ed
@


1.13
log
@Move ipx_cksum.c into MD config file.
@
text
@d55 2
a56 1
device	mainbus: isabus, eisabus, pcibus
d73 6
a86 4
#define pcic here until config issues are resolved
#device pcic at isa: pcmciabus
#file	dev/isa/pcmcia_pcic.c		pcic

d144 3
a146 3
device	ed: ether, ifnet
attach	ed at isa
file	dev/isa/if_ed.c			ed
d189 4
@


1.12
log
@Bring forward the Amiga ISA support, and resolve a conflict with if_ed
@
text
@d20 1
@


1.11
log
@partial sync with netbsd 960418, more to come
@
text
@d1 1
a1 1
#	$OpenBSD: files.i386,v 1.10 1996/04/19 07:33:39 mickey Exp $
d136 7
@


1.10
log
@Make kernel compile again.
@
text
@d1 2
a2 2
#	$OpenBSD$
#	$NetBSD: files.i386,v 1.66 1996/03/16 06:09:16 thorpej Exp $
d44 6
d54 2
a55 1
device mainbus at root: isabus, eisabus, pcibus
d68 1
d90 2
a91 1
device	npx at isa
d96 1
a96 1
define	pckbd { [irq = -1], [port = -1] }
d99 2
a100 1
device	pc at isa: tty, pckbd
d104 2
a105 1
device	vt at isa: tty, pckbd
d114 2
a115 1
device	lms at isa
d117 2
a118 1
device	mms at isa
d120 2
a121 1
device	pms at pckbd
d125 4
a128 2
device	fdc at isa {drive = -1}
device	fd at fdc: disk, isadma
d133 2
a134 1
device	spkr at pckbd: tty
d140 3
a142 1
device	le at isa, pci: ether, ifnet, isadma
a144 6
# National Semiconductor DS8390/WD83C690-based boards
# (WD/SMC 80x3 family, SMC Ultra [8216], 3Com 3C503, NE[12]000, and clones)
# XXX conflicts with other ports; can't be in files.isa
device	ed at isa: ether, ifnet
file	dev/isa/if_ed.c			ed needs-flag

d146 3
a148 2
device	joy at isa
file	arch/i386/isa/joy.c			joy needs-flag
d155 1
@


1.9
log
@Merge of NetBSD 960317
@
text
@d76 1
a76 1
file	arch/i386/isa/isa_machdep.c	isa
d79 1
a79 1
file	arch/i386/isa/clock.c		isa
@


1.8
log
@Merging w/ NetBSD 021796.
speaker upgraded to the current.
some changes to the VM stuff (ie kern_thread.c added and so).
@
text
@d1 2
a2 1
#	$NetBSD: files.i386,v 1.61 1996/01/08 13:51:30 mycroft Exp $
d7 1
a7 1
# maxpartitions must be first item in files.${ARCH}.newconf
d48 3
a50 5
device	isa at root {[port = -1], [size = 0],
		     [iomem = -1], [iosiz = 0],
		     [irq = -1], [drq = -1]}
#device	eisa at root {...}
device	pci at root {[bus = -1], [dev = -1]}
d54 10
a63 1
# ISA and mixed ISA+EISA or ISA+PCI drivers
d71 5
a101 8
#define pcic here until config issues are resolved
device pcic at isa
file	dev/isa/pcmcia_pcic.c		pcic pcmciabus
device	pcmciabus at isa {[port = -1], [size = 0],
		[iomem = -1], [iosiz = 0],
		[irq = -1], [drq = -1]}
include "../../../dev/isa/files.isa"

d107 1
a107 1
device	pms at isa
d129 1
a129 1
device	ed at isa, pcmciabus: ether, ifnet
a140 14
# XXX not yet:
# file	arch/i386/eisa/eisa_machdep.c	eisa

#
# PCI-only drivers
#

include "../../../dev/pci/files.pci"
file	arch/i386/pci/pci_machdep.c	pci

#
# Pcmcia
#
include "../../../dev/pcmcia/files.pcmcia"
@


1.7
log
@if_ed.c cannot be MI yet, due to name clashes, will get resolved soon
@
text
@a0 1
#	$OpenBSD$
d72 4
d77 1
a77 1
device	pc at isa: tty
d81 1
a81 1
device	vt at isa: tty
d112 1
a112 1
device	spkr at isa: tty
@


1.6
log
@From NetBSD
Move the speaker to the 'new' config.
@
text
@d1 1
d117 6
@


1.5
log
@add the freebsd joystick driver; converted by matthieu@@abel.laas.fr;
netbsd pr#1916
@
text
@d109 1
a109 1
file	arch/i386/isa/spkr.c		speaker needs-flag
@


1.4
log
@remove dup vm86 defn
@
text
@d117 4
@


1.3
log
@config glue for PCMCIA support
@
text
@a53 3
define vm86
file	arch/i386/i386/vm86.c		vm86

@


1.2
log
@from netbsd; VM86 support, by John Kohl, touched up a bit by charles
@
text
@d54 3
a60 1
include "../../../dev/isa/files.isa"
d88 8
d134 5
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
#	$NetBSD: files.i386,v 1.60 1995/10/11 04:19:29 mycroft Exp $
d128 3
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
