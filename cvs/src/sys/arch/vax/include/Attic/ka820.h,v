head	1.6;
access;
symbols
	OPENBSD_4_9:1.5.0.32
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.5.0.30
	OPENBSD_4_8_BASE:1.5
	OPENBSD_4_7:1.5.0.26
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.5.0.28
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.5.0.24
	OPENBSD_4_5_BASE:1.5
	OPENBSD_4_4:1.5.0.22
	OPENBSD_4_4_BASE:1.5
	OPENBSD_4_3:1.5.0.20
	OPENBSD_4_3_BASE:1.5
	OPENBSD_4_2:1.5.0.18
	OPENBSD_4_2_BASE:1.5
	OPENBSD_4_1:1.5.0.16
	OPENBSD_4_1_BASE:1.5
	OPENBSD_4_0:1.5.0.14
	OPENBSD_4_0_BASE:1.5
	OPENBSD_3_9:1.5.0.12
	OPENBSD_3_9_BASE:1.5
	OPENBSD_3_8:1.5.0.10
	OPENBSD_3_8_BASE:1.5
	OPENBSD_3_7:1.5.0.8
	OPENBSD_3_7_BASE:1.5
	OPENBSD_3_6:1.5.0.6
	OPENBSD_3_6_BASE:1.5
	SMP_SYNC_A:1.5
	SMP_SYNC_B:1.5
	OPENBSD_3_5:1.5.0.4
	OPENBSD_3_5_BASE:1.5
	OPENBSD_3_4:1.5.0.2
	OPENBSD_3_4_BASE:1.5
	UBC_SYNC_A:1.4
	OPENBSD_3_3:1.4.0.6
	OPENBSD_3_3_BASE:1.4
	OPENBSD_3_2:1.4.0.4
	OPENBSD_3_2_BASE:1.4
	OPENBSD_3_1:1.4.0.2
	OPENBSD_3_1_BASE:1.4
	UBC_SYNC_B:1.4
	UBC:1.3.0.10
	UBC_BASE:1.3
	OPENBSD_3_0:1.3.0.8
	OPENBSD_3_0_BASE:1.3
	OPENBSD_2_9_BASE:1.3
	OPENBSD_2_9:1.3.0.6
	OPENBSD_2_8:1.3.0.4
	OPENBSD_2_8_BASE:1.3
	OPENBSD_2_7:1.3.0.2
	OPENBSD_2_7_BASE:1.3
	SMP:1.2.0.12
	SMP_BASE:1.2
	kame_19991208:1.2
	OPENBSD_2_6:1.2.0.10
	OPENBSD_2_6_BASE:1.2
	OPENBSD_2_5:1.2.0.8
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.2.0.6
	OPENBSD_2_4_BASE:1.2
	OPENBSD_2_3:1.2.0.4
	OPENBSD_2_3_BASE:1.2
	OPENBSD_2_2:1.2.0.2
	OPENBSD_2_2_BASE:1.2
	OPENBSD_2_1:1.1.0.2
	OPENBSD_2_1_BASE:1.1;
locks; strict;
comment	@ * @;


1.6
date	2011.07.06.18.32.59;	author miod;	state dead;
branches;
next	1.5;

1.5
date	2003.06.02.23.27.57;	author millert;	state Exp;
branches;
next	1.4;

1.4
date	2002.03.14.01.26.48;	author millert;	state Exp;
branches;
next	1.3;

1.3
date	2000.04.26.03.08.41;	author bjc;	state Exp;
branches
	1.3.10.1;
next	1.2;

1.2
date	97.05.29.00.04.43;	author niklas;	state Exp;
branches
	1.2.12.1;
next	1.1;

1.1
date	97.01.15.23.24.40;	author maja;	state Exp;
branches;
next	;

1.2.12.1
date	2001.05.14.21.38.01;	author niklas;	state Exp;
branches;
next	1.2.12.2;

1.2.12.2
date	2002.03.28.11.26.46;	author niklas;	state Exp;
branches;
next	1.2.12.3;

1.2.12.3
date	2003.06.07.11.14.47;	author ho;	state Exp;
branches;
next	;

1.3.10.1
date	2002.06.11.03.39.19;	author art;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Remove support for non-microVAX, non-VAXstation, non-VXT hardware in the
VAX port. This means, 11/7xx, VAX6000 and VAX8x00 systems, as well as SBI,
CMI, BI, XMI and MASSBUS drivers.
Most of these files were not being compiled or kept in compilable state over
the years anyway.
@
text
@/*	$OpenBSD: ka820.h,v 1.5 2003/06/02 23:27:57 millert Exp $	*/
/*	$NetBSD: ka820.h,v 1.3 2000/01/24 02:40:32 matt Exp $	*/
/*
 * Copyright (c) 1988 Regents of the University of California.
 * All rights reserved.
 *
 * This code is derived from software contributed to Berkeley by
 * Chris Torek.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. Neither the name of the University nor the names of its contributors
 *    may be used to endorse or promote products derived from this software
 *    without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
 * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 *
 *	@@(#)ka820.h	7.3 (Berkeley) 6/28/90
 */

/*
 * Definitions specific to the ka820 cpu.
 */

/*
 * Device addresses.
 */
#define KA820_PORTADDR		0x20088000	/* port controller */
#define KA820_BRAMADDR		0x20090000	/* boot ram */
#define KA820_EEPROMADDR	0x20098000	/* eeprom */
#define KA820_RX50ADDR		0x200b0000	/* rcx50 */
#define KA820_CLOCKADDR		0x200b8000	/* watch chip */

/*
 * Sizes.  The port controller, RCX50, and watch chip are all one page.
 */
#define KA820_BRPAGES		16		/* 8K */
#define KA820_EEPAGES		64		/* 32K */

/* port controller CSR bit values */
#define KA820PORT_RSTHALT	0x80000000	/* restart halt */
#define KA820PORT_LCONS		0x40000000	/* logical console */
#define KA820PORT_LCONSEN	0x20000000	/* logical console enable */
#define KA820PORT_BIRESET	0x10000000	/* BI reset */
#define KA820PORT_BISTF		0x08000000	/* ??? */
#define KA820PORT_ENBAPT	0x04000000	/* ??? */
#define KA820PORT_STPASS	0x02000000	/* self test pass */
#define KA820PORT_RUN		0x01000000	/* run */
#define KA820PORT_WWPE		0x00800000	/* ??? parity even? */
#define KA820PORT_EVLCK		0x00400000	/* event lock */
#define KA820PORT_WMEM		0x00200000	/* write mem */
#define KA820PORT_EV4		0x00100000	/* event 4 */
#define KA820PORT_EV3		0x00080000	/* event 3 */
#define KA820PORT_EV2		0x00040000	/* event 2 */
#define KA820PORT_EV1		0x00020000	/* event 1 */
#define KA820PORT_EV0		0x00010000	/* event 0 */
#define KA820PORT_WWPO		0x00008000	/* ??? parity odd? */
#define KA820PORT_PERH		0x00004000	/* parity error H */
#define KA820PORT_ENBPIPE	0x00002000	/* enable? pipe */
#define KA820PORT_TIMEOUT	0x00001000	/* timeout */
#define KA820PORT_RSVD		0x00000800	/* reserved */
#define KA820PORT_CONSEN	0x00000400	/* console interrupt enable */
#define KA820PORT_CONSCLR	0x00000200	/* clear console interrupt */
#define KA820PORT_CONSINTR	0x00000100	/* console interrupt req */
#define KA820PORT_RXIE		0x00000080	/* RX50 interrupt enable */
#define KA820PORT_RXCLR		0x00000040	/* clear RX50 interrupt */
#define KA820PORT_RXIRQ		0x00000020	/* RX50 interrupt request */
#define KA820PORT_IPCLR		0x00000010	/* clear IP interrupt */
#define KA820PORT_IPINTR	0x00000008	/* IP interrupt request */
#define KA820PORT_CRDEN		0x00000004	/* enable CRD interrupts */
#define KA820PORT_CRDCLR	0x00000002	/* clear CRD interrupt */
#define KA820PORT_CRDINTR	0x00000001	/* CRD interrupt request */

/* interrupt vectors unique for this CPU */
#define	KA820_INT_RXCD		0x58

/* what the heck */
#define KA820PORT_BITS \
"\20\40RSTHALT\37LCONS\36LCONSEN\35BIRESET\34BISTF\33ENBAPT\32STPASS\31RUN\
\30WWPE\27EVLCK\26WMEM\25EV4\24EV3\23EV2\22EV1\21EV\20WWPO\17PERH\16ENBPIPE\
\15TIMEOUT\13CONSEN\12CONSCLR\11CONSINTR\10RXIE\7RXCLR\6RXIRQ\5IPCLR\4IPINTR\
\3CRDEN\2CLRCLR\1CRDINTR"

/* clock CSR bit values, per csr */
#define KA820CLK_0_BUSY		0x01		/* busy (time changing) */
#define KA820CLK_1_GO		0x0c		/* run */
#define KA820CLK_1_SET		0x0d		/* set the time */
#define KA820CLK_3_VALID	0x01		/* clock is valid */

#ifndef LOCORE
struct ka820port {
	u_long	csr;
	/* that seems to be all.... */
};

struct ka820clock {
	u_char	sec;
	u_char	pad0;
	u_char	secalrm;
	u_char	pad1;
	u_char	min;
	u_char	pad2;
	u_char	minalrm;
	u_char	pad3;
	u_char	hr;
	u_char	pad4;
	u_char	hralrm;
	u_char	pad5;
	u_char	dayofwk;
	u_char	pad6;
	u_char	day;
	u_char	pad7;
	u_char	mon;
	u_char	pad8;
	u_char	yr;
	u_char	pad9;
	u_short csr0;
	u_short csr1;
	u_short csr2;
	u_short csr3;
};

void	crxintr(void *arg);
#endif
@


1.5
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
/*	$OpenBSD: ka820.h,v 1.4 2002/03/14 01:26:48 millert Exp $	*/
@


1.4
log
@First round of __P removal in sys
@
text
@d1 1
a1 1
/*	$OpenBSD: ka820.h,v 1.3 2000/04/26 03:08:41 bjc Exp $	*/
d18 1
a18 5
 * 3. All advertising materials mentioning features or use of this software
 *    must display the following acknowledgement:
 *	This product includes software developed by the University of
 *	California, Berkeley and its contributors.
 * 4. Neither the name of the University nor the names of its contributors
@


1.3
log
@vax resurrection, part 1: sync with early-april netbsd

many changes here, notable:  uvm, ansi.h, more (and cleaner) vsbus support
@
text
@d1 1
a1 1
/*	$OpenBSD: ka820.h,v 1.2 1997/05/29 00:04:43 niklas Exp $	*/
d143 1
a143 1
void	crxintr __P((void *arg));
@


1.3.10.1
log
@Sync UBC branch to -current
@
text
@d1 1
a1 1
/*	$OpenBSD: ka820.h,v 1.3 2000/04/26 03:08:41 bjc Exp $	*/
d143 1
a143 1
void	crxintr(void *arg);
@


1.2
log
@RCS tagging
@
text
@d1 2
a2 2
/*	$OpenBSD: ka820.h,v 1.1 1996/07/20 17:33:09 ragge Exp $	*/
/*	$NetBSD: ka820.h,v 1.1 1996/07/20 17:33:09 ragge Exp $	*/
d94 3
d143 1
a143 9
/*
 * Prototypes.
 */
void	ka820_conf __P((struct device *, struct device *, void *));
void	ka820_memerr __P((void));
int	ka820_mchk __P((caddr_t));
void	ka820_steal_pages __P((void));
int	ka820_clkread __P((time_t));
void	ka820_clkwrite __P((void));
@


1.2.12.1
log
@Continue the aborted merge of current just before 2.9 was cut into the
SMP branch.  Note that this will not make any progress of SMP functionality,
it is just merging of new code from the trunk into the old branch.
Please do not ask me questions about SMP status because of this mail,
instead go read the archives of smp@@openbsd.org, where I mailed about
these commits some week ago.  Another note: I am doing this in chunks now,
so as to not lock too much of the tree for long times
@
text
@d1 2
a2 2
/*	$OpenBSD: ka820.h,v 1.3 2000/04/26 03:08:41 bjc Exp $	*/
/*	$NetBSD: ka820.h,v 1.3 2000/01/24 02:40:32 matt Exp $	*/
a93 3
/* interrupt vectors unique for this CPU */
#define	KA820_INT_RXCD		0x58

d140 9
a148 1
void	crxintr __P((void *arg));
@


1.2.12.2
log
@Merge in -current from about a week ago
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
d143 1
a143 1
void	crxintr(void *arg);
@


1.2.12.3
log
@Sync SMP branch to -current
@
text
@d1 1
a1 1
/*	$OpenBSD: ka820.h,v 1.2.12.2 2002/03/28 11:26:46 niklas Exp $	*/
d18 5
a22 1
 * 3. Neither the name of the University nor the names of its contributors
@


1.1
log
@sync with NetBSD 970112 -moj
@
text
@d1 1
@
