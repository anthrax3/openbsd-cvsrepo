head	1.23;
access;
symbols
	OPENBSD_6_1_BASE:1.23
	OPENBSD_6_0:1.23.0.4
	OPENBSD_6_0_BASE:1.23
	OPENBSD_5_9:1.23.0.2
	OPENBSD_5_9_BASE:1.23
	OPENBSD_5_8:1.21.0.4
	OPENBSD_5_8_BASE:1.21
	OPENBSD_5_7:1.20.0.2
	OPENBSD_5_7_BASE:1.20
	OPENBSD_5_6:1.18.0.4
	OPENBSD_5_6_BASE:1.18
	OPENBSD_5_5:1.17.0.4
	OPENBSD_5_5_BASE:1.17
	OPENBSD_5_4:1.16.0.14
	OPENBSD_5_4_BASE:1.16
	OPENBSD_5_3:1.16.0.12
	OPENBSD_5_3_BASE:1.16
	OPENBSD_5_2:1.16.0.10
	OPENBSD_5_2_BASE:1.16
	OPENBSD_5_1_BASE:1.16
	OPENBSD_5_1:1.16.0.8
	OPENBSD_5_0:1.16.0.6
	OPENBSD_5_0_BASE:1.16
	OPENBSD_4_9:1.16.0.4
	OPENBSD_4_9_BASE:1.16
	OPENBSD_4_8:1.16.0.2
	OPENBSD_4_8_BASE:1.16
	OPENBSD_4_7:1.14.0.2
	OPENBSD_4_7_BASE:1.14
	OPENBSD_4_6:1.13.0.4
	OPENBSD_4_6_BASE:1.13
	OPENBSD_4_5:1.12.0.6
	OPENBSD_4_5_BASE:1.12
	OPENBSD_4_4:1.12.0.4
	OPENBSD_4_4_BASE:1.12
	OPENBSD_4_3:1.12.0.2
	OPENBSD_4_3_BASE:1.12
	OPENBSD_4_2:1.11.0.6
	OPENBSD_4_2_BASE:1.11
	OPENBSD_4_1:1.11.0.4
	OPENBSD_4_1_BASE:1.11
	OPENBSD_4_0:1.11.0.2
	OPENBSD_4_0_BASE:1.11
	OPENBSD_3_9:1.9.0.2
	OPENBSD_3_9_BASE:1.9
	OPENBSD_3_8:1.8.0.10
	OPENBSD_3_8_BASE:1.8
	OPENBSD_3_7:1.8.0.8
	OPENBSD_3_7_BASE:1.8
	OPENBSD_3_6:1.8.0.6
	OPENBSD_3_6_BASE:1.8
	SMP_SYNC_A:1.8
	SMP_SYNC_B:1.8
	OPENBSD_3_5:1.8.0.4
	OPENBSD_3_5_BASE:1.8
	OPENBSD_3_4:1.8.0.2
	OPENBSD_3_4_BASE:1.8
	UBC_SYNC_A:1.7
	OPENBSD_3_3:1.7.0.6
	OPENBSD_3_3_BASE:1.7
	OPENBSD_3_2:1.7.0.4
	OPENBSD_3_2_BASE:1.7
	OPENBSD_3_1:1.7.0.2
	OPENBSD_3_1_BASE:1.7
	UBC_SYNC_B:1.7
	UBC:1.6.0.14
	UBC_BASE:1.6
	OPENBSD_3_0:1.6.0.12
	OPENBSD_3_0_BASE:1.6
	OPENBSD_2_9_BASE:1.6
	OPENBSD_2_9:1.6.0.10
	OPENBSD_2_8:1.6.0.8
	OPENBSD_2_8_BASE:1.6
	OPENBSD_2_7:1.6.0.6
	OPENBSD_2_7_BASE:1.6
	SMP:1.6.0.4
	SMP_BASE:1.6
	kame_19991208:1.6
	OPENBSD_2_6:1.6.0.2
	OPENBSD_2_6_BASE:1.6
	OPENBSD_2_5:1.5.0.8
	OPENBSD_2_5_BASE:1.5
	OPENBSD_2_4:1.5.0.6
	OPENBSD_2_4_BASE:1.5
	OPENBSD_2_3:1.5.0.4
	OPENBSD_2_3_BASE:1.5
	OPENBSD_2_2:1.5.0.2
	OPENBSD_2_2_BASE:1.5
	OPENBSD_2_1:1.4.0.2
	OPENBSD_2_1_BASE:1.4
	OPENBSD_2_0:1.3.0.2
	OPENBSD_2_0_BASE:1.3
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@ * @;


1.23
date	2015.12.22.20.31.51;	author sf;	state Exp;
branches;
next	1.22;
commitid	KlRPsTXyYBzhBMyq;

1.22
date	2015.12.21.21.49.02;	author sf;	state Exp;
branches;
next	1.21;
commitid	QfhbTzV3KV3v5lir;

1.21
date	2015.03.14.03.38.51;	author jsg;	state Exp;
branches;
next	1.20;
commitid	p4LJxGKbi0BU2cG6;

1.20
date	2014.10.01.10.08.30;	author mpi;	state Exp;
branches;
next	1.19;
commitid	H2YI4nUd6WXupaiB;

1.19
date	2014.09.14.14.17.25;	author jsg;	state Exp;
branches;
next	1.18;
commitid	uzzBR7hz9ncd4O6G;

1.18
date	2014.03.11.19.45.28;	author guenther;	state Exp;
branches;
next	1.17;

1.17
date	2013.12.13.19.55.12;	author naddy;	state Exp;
branches;
next	1.16;

1.16
date	2010.06.29.19.09.12;	author tedu;	state Exp;
branches;
next	1.15;

1.15
date	2010.04.12.12.57.52;	author tedu;	state Exp;
branches;
next	1.14;

1.14
date	2009.08.25.16.16.34;	author jsg;	state Exp;
branches;
next	1.13;

1.13
date	2009.05.06.18.21.23;	author stevesk;	state Exp;
branches;
next	1.12;

1.12
date	2008.01.05.17.33.28;	author mbalmer;	state Exp;
branches;
next	1.11;

1.11
date	2006.08.03.16.13.24;	author mbalmer;	state Exp;
branches;
next	1.10;

1.10
date	2006.06.01.20.10.28;	author mbalmer;	state Exp;
branches;
next	1.9;

1.9
date	2005.12.21.12.43.49;	author jsg;	state Exp;
branches;
next	1.8;

1.8
date	2003.06.02.23.28.06;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	2002.03.14.01.27.05;	author millert;	state Exp;
branches;
next	1.6;

1.6
date	99.04.22.20.02.41;	author art;	state Exp;
branches
	1.6.4.1
	1.6.14.1;
next	1.5;

1.5
date	97.09.02.08.48.32;	author downsj;	state Exp;
branches;
next	1.4;

1.4
date	97.04.04.01.46.03;	author deraadt;	state Exp;
branches;
next	1.3;

1.3
date	96.05.22.11.51.25;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	96.03.03.17.20.11;	author niklas;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.52.46;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.52.46;	author deraadt;	state Exp;
branches;
next	;

1.6.4.1
date	2002.03.28.11.43.04;	author niklas;	state Exp;
branches;
next	1.6.4.2;

1.6.4.2
date	2003.06.07.11.03.40;	author ho;	state Exp;
branches;
next	;

1.6.14.1
date	2002.06.11.03.29.40;	author art;	state Exp;
branches;
next	;


desc
@@


1.23
log
@Re-add config includes

These got lost in previous commit. This broke ppp, nmea, msts, endrun.

Found the hard way by David Coppa
@
text
@/*	$OpenBSD: tty_conf.c,v 1.22 2015/12/21 21:49:02 sf Exp $	*/
/*	$NetBSD: tty_conf.c,v 1.18 1996/05/19 17:17:55 jonathan Exp $	*/

/*-
 * Copyright (c) 1982, 1986, 1991, 1993
 *	The Regents of the University of California.  All rights reserved.
 * (c) UNIX System Laboratories, Inc.
 * All or some portions of this file are derived from material licensed
 * to the University of California by American Telephone and Telegraph
 * Co. or Unix System Laboratories, Inc. and are reproduced herein with
 * the permission of UNIX System Laboratories, Inc.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. Neither the name of the University nor the names of its contributors
 *    may be used to endorse or promote products derived from this software
 *    without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
 * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 *
 *	@@(#)tty_conf.c	8.4 (Berkeley) 1/21/94
 */

#include <sys/param.h>
#include <sys/systm.h>
#include <sys/tty.h>
#include <sys/conf.h>

#include "ppp.h"
#include "nmea.h"
#include "msts.h"
#include "endrun.h"

#define	ttynodisc ((int (*)(dev_t, struct tty *, struct proc *))enodev)
#define	ttyerrclose ((int (*)(struct tty *, int flags, struct proc *))enodev)
#define	ttyerrio ((int (*)(struct tty *, struct uio *, int))enodev)
#define	ttyerrinput ((int (*)(int c, struct tty *))enodev)
#define	ttyerrstart ((int (*)(struct tty *))enodev)

struct	linesw linesw[] =
{
	{ ttyopen, ttylclose, ttread, ttwrite, nullioctl,
	  ttyinput, ttstart, ttymodem },		/* 0- termios */

	{ ttynodisc, ttyerrclose, ttyerrio, ttyerrio, nullioctl,
	  ttyerrinput, ttyerrstart, nullmodem },	/* 1- defunct */

	/* 2- old NTTYDISC (defunct) */
	{ ttynodisc, ttyerrclose, ttyerrio, ttyerrio, nullioctl,
	  ttyerrinput, ttyerrstart, nullmodem },

	/* 3- TABLDISC (defunct) */
	{ ttynodisc, ttyerrclose, ttyerrio, ttyerrio, nullioctl,
	  ttyerrinput, ttyerrstart, nullmodem },

	/* 4- SLIPDISC (defunct) */
	{ ttynodisc, ttyerrclose, ttyerrio, ttyerrio, nullioctl,
	  ttyerrinput, ttyerrstart, nullmodem },

#if NPPP > 0
	{ pppopen, pppclose, pppread, pppwrite, ppptioctl,
	  pppinput, pppstart, ttymodem },		/* 5- PPPDISC */
#else
	{ ttynodisc, ttyerrclose, ttyerrio, ttyerrio, nullioctl,
	  ttyerrinput, ttyerrstart, nullmodem },
#endif

	/* 6- STRIPDISC (defunct) */
	{ ttynodisc, ttyerrclose, ttyerrio, ttyerrio, nullioctl,
	  ttyerrinput, ttyerrstart, nullmodem },

#if NNMEA > 0
	{ nmeaopen, nmeaclose, ttread, ttwrite, nullioctl,
	  nmeainput, ttstart, ttymodem },		/* 7- NMEADISC */
#else
	{ ttynodisc, ttyerrclose, ttyerrio, ttyerrio, nullioctl,
	  ttyerrinput, ttyerrstart, nullmodem },
#endif

#if NMSTS > 0
	{ mstsopen, mstsclose, ttread, ttwrite, nullioctl,
	  mstsinput, ttstart, ttymodem },		/* 8- MSTSDISC */
#else
	{ ttynodisc, ttyerrclose, ttyerrio, ttyerrio, nullioctl,
	  ttyerrinput, ttyerrstart, nullmodem },
#endif

#if NENDRUN > 0
	{ endrunopen, endrunclose, ttread, ttwrite, nullioctl,
	  endruninput, ttstart, ttymodem },		/* 9- ENDRUNDISC */
#else
	{ ttynodisc, ttyerrclose, ttyerrio, ttyerrio, nullioctl,
	  ttyerrinput, ttyerrstart, nullmodem },
#endif
};

int	nlinesw = sizeof (linesw) / sizeof (linesw[0]);

/*
 * Do nothing specific version of line
 * discipline specific ioctl command.
 */
int
nullioctl(struct tty *tp, u_long cmd, char *data, int flags, struct proc *p)
{
	return (-1);
}
@


1.22
log
@Move ppp, nmea, endrun, and msts prototypes to tty.h

Fix inconsistent arguments for pppopen/pppclose/pppstart.
Use passed in argument p in pppopen instead of curproc.

"Looks good to me" deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: tty_conf.c,v 1.21 2015/03/14 03:38:51 jsg Exp $	*/
d44 5
@


1.21
log
@Remove some includes include-what-you-use claims don't
have any direct symbols used.  Tested for indirect use by compiling
amd64/i386/sparc64 kernels.

ok tedu@@ deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: tty_conf.c,v 1.20 2014/10/01 10:08:30 mpi Exp $	*/
a49 35

int	nullioctl(struct tty *, u_long, caddr_t, int, struct proc *);

#include "ppp.h"
#if NPPP > 0
int	pppopen(dev_t dev, struct tty *tp, struct proc *);
int	pppclose(struct tty *tp, int flags, struct proc *);
int	ppptioctl(struct tty *tp, u_long cmd, caddr_t data,
			int flag, struct proc *p);
int	pppinput(int c, struct tty *tp);
int	pppstart(struct tty *tp);
int	pppread(struct tty *tp, struct uio *uio, int flag);
int	pppwrite(struct tty *tp, struct uio *uio, int flag);
#endif

#include "nmea.h"
#if NNMEA > 0
int	nmeaopen(dev_t, struct tty *, struct proc *);
int	nmeaclose(struct tty *, int, struct proc *);
int	nmeainput(int, struct tty *);
#endif

#include "msts.h"
#if NMSTS > 0
int	mstsopen(dev_t, struct tty *, struct proc *);
int	mstsclose(struct tty *, int, struct proc *);
int	mstsinput(int, struct tty *);
#endif

#include "endrun.h"
#if NENDRUN > 0
int	endrunopen(dev_t, struct tty *, struct proc *);
int	endrunclose(struct tty *, int, struct proc *);
int	endruninput(int, struct tty *);
#endif
@


1.20
log
@sl(4) is no more, thanks for all the fish!
@
text
@d1 1
a1 1
/*	$OpenBSD: tty_conf.c,v 1.19 2014/09/14 14:17:25 jsg Exp $	*/
a41 1
#include <sys/ioctl.h>
@


1.19
log
@remove uneeded proc.h includes
ok mpi@@ kspillner@@
@
text
@d1 1
a1 1
/*	$OpenBSD: tty_conf.c,v 1.18 2014/03/11 19:45:28 guenther Exp $	*/
a53 10
#include "sl.h"
#if NSL > 0
int	slopen(dev_t dev, struct tty *tp, struct proc *);
int	slclose(struct tty *tp, int flags, struct proc *);
int	sltioctl(struct tty *tp, u_long cmd, caddr_t data,
			int flag, struct proc *p);
int	slinput(int c, struct tty *tp);
int	slstart(struct tty *tp);
#endif

d103 1
a103 4
#if NSL > 0
	{ slopen, slclose, ttyerrio, ttyerrio, sltioctl,
	  slinput, slstart, nullmodem },		/* 4- SLIPDISC */
#else
a105 1
#endif
@


1.18
log
@lint is gone, and the 'lint' conditional was never in the implementation
namespace, so stop changing behavior when it's #defined

ok beck@@ krw@@
@
text
@d1 1
a1 1
/*	$OpenBSD: tty_conf.c,v 1.17 2013/12/13 19:55:12 naddy Exp $	*/
a42 1
#include <sys/proc.h>
@


1.17
log
@Remove the 4.3BSD tty(4) compatibility shims.  RIP.  ok millert@@
@
text
@d1 1
a1 1
/*	$OpenBSD: tty_conf.c,v 1.16 2010/06/29 19:09:12 tedu Exp $	*/
a164 1
/*ARGSUSED*/
a167 4

#ifdef lint
	tp = tp; data = data; flags = flags; p = p;
#endif
@


1.16
log
@remove the compat43 ifdef around some code.  in effect, it's always been
in compat mode and there's no harm continuing that way.
ok dlg deraadt guenther miod thib
@
text
@d1 1
a1 1
/*	$OpenBSD: tty_conf.c,v 1.15 2010/04/12 12:57:52 tedu Exp $	*/
d106 3
a108 2
	{ ttyopen, ttylclose, ttread, ttwrite, nullioctl,
	  ttyinput, ttstart, ttymodem },		/* 2- old NTTYDISC */
@


1.15
log
@Some of the line disciplines want to check for suser.  Better to pass them
a process instead of using curproc.  ok deraadt
@
text
@d1 1
a1 1
/*	$OpenBSD: tty_conf.c,v 1.14 2009/08/25 16:16:34 jsg Exp $	*/
a105 1
#if defined(COMPAT_43) || defined(COMPAT_FREEBSD) || defined(COMPAT_BSDOS)
a107 4
#else
	{ ttynodisc, ttyerrclose, ttyerrio, ttyerrio, nullioctl,
	  ttyerrinput, ttyerrstart, nullmodem },	/* 2- defunct */
#endif
@


1.14
log
@Remove support for packet mode of Metricom Ricochet radios.
It currently doesn't compile and this is unlikely to change
as there are many alternatives now since we no longer live
in the early 1990s and Metricom went bankrupt some time ago.

ok many @@
@
text
@d1 1
a1 1
/*	$OpenBSD: tty_conf.c,v 1.13 2009/05/06 18:21:23 stevesk Exp $	*/
d47 2
a48 2
#define	ttynodisc ((int (*)(dev_t, struct tty *))enodev)
#define	ttyerrclose ((int (*)(struct tty *, int flags))enodev)
d57 2
a58 2
int	slopen(dev_t dev, struct tty *tp);
int	slclose(struct tty *tp, int flags);
d67 2
a68 2
int	pppopen(dev_t dev, struct tty *tp);
int	pppclose(struct tty *tp, int flags);
d79 2
a80 2
int	nmeaopen(dev_t, struct tty *);
int	nmeaclose(struct tty *, int);
d86 2
a87 2
int	mstsopen(dev_t, struct tty *);
int	mstsclose(struct tty *, int);
d93 2
a94 2
int	endrunopen(dev_t, struct tty *);
int	endrunclose(struct tty *, int);
@


1.13
log
@endrun(4) - EndRun Technologies native time-of-day message timedelta
sensor.  Based on msts(4).  Tested with Praecis Ct
(http://www.endruntechnologies.com/network-time-source.htm).

help and feedback mbalmer
'no problem with this sensor going in' deraadt
@
text
@d1 1
a1 1
/*	$OpenBSD: tty_conf.c,v 1.12 2008/01/05 17:33:28 mbalmer Exp $	*/
a76 10
#include "strip.h"
#if NSTRIP > 0
int	stripopen(dev_t dev, struct tty *tp);
int	stripclose(struct tty *tp, int flags);
int	striptioctl(struct tty *tp, u_long cmd, caddr_t data,
			int flag, struct proc *p);
int	stripinput(int c, struct tty *tp);
int	stripstart(struct tty *tp);
#endif

d134 1
a134 4
#if NSTRIP > 0
	{ stripopen, stripclose, ttyerrio, ttyerrio, striptioctl,
	  stripinput, stripstart, nullmodem },		/* 6- STRIPDISC */
#else
a136 1
#endif
@


1.12
log
@Add support for the Meinberg Standard Time String format that all Meinberg
radio clocks can transmit over serial ports.  This is implemented as a
line discipline similar to nmea(4) and provides a timedelta sensor.

See http://www.meinberg.de/english/specs/timestr.htm for details on the
MSTS format.

ldattach(8) is extended to support the "msts" line discipline and two stopbits
(which some radio clocks, e.g. the C51 use).  Do a "make includes" before your
next system build.

Initially from Maurice Janssen based on nmea(4).  "go for it" deraadt
@
text
@d1 1
a1 1
/*	$OpenBSD: tty_conf.c,v 1.11 2006/08/03 16:13:24 mbalmer Exp $	*/
d101 7
d163 8
@


1.11
log
@Remove the tb(4) line discipline and manual page.  I found no man pages
referencing tb(4).

ok deraadt
@
text
@d1 1
a1 1
/*	$OpenBSD: tty_conf.c,v 1.10 2006/06/01 20:10:28 mbalmer Exp $	*/
d94 7
d148 8
@


1.10
log
@Add basic NMEA0183 support as a tty line discipline.  The line discipline
decodes NMEA messages completely transparent to userland applications, i.e.
userland can still use the NMEA stream and talk to the device.  If data
is received, a timedelta sensor suitable for ntpd is created.  The timestamp
is not very precise at the moment, use of this is experimental at best.

"get it in or we see how well the swiss people can swim" deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: tty_conf.c,v 1.9 2005/12/21 12:43:49 jsg Exp $	*/
a54 10
#include "tb.h"
#if NTB > 0
int	tbopen(dev_t dev, struct tty *tp);
int	tbclose(struct tty *tp, int flags);
int	tbread(struct tty *tp, struct uio *uio, int flags);
int	tbtioctl(struct tty *tp, u_long cmd, caddr_t data,
			int flag, struct proc *p);
int	tbinput(int c, struct tty *tp);
#endif

d110 1
a110 4
#if NTB > 0
	{ tbopen, tbclose, tbread, ttyerrio, tbtioctl,
	  tbinput, ttstart, nullmodem },		/* 3- TABLDISC */
#else
a112 1
#endif
@


1.9
log
@ansi/deregister. No binary change.
@
text
@d1 1
a1 1
/*	$OpenBSD: tty_conf.c,v 1.8 2003/06/02 23:28:06 millert Exp $	*/
d97 7
d147 8
@


1.8
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
/*	$OpenBSD: tty_conf.c,v 1.7 2002/03/14 01:27:05 millert Exp $	*/
d154 1
a154 6
nullioctl(tp, cmd, data, flags, p)
	struct tty *tp;
	u_long cmd;
	char *data;
	int flags;
	struct proc *p;
@


1.7
log
@First round of __P removal in sys
@
text
@d1 1
a1 1
/*	$OpenBSD: tty_conf.c,v 1.6 1999/04/22 20:02:41 art Exp $	*/
d21 1
a21 5
 * 3. All advertising materials mentioning features or use of this software
 *    must display the following acknowledgement:
 *	This product includes software developed by the University of
 *	California, Berkeley and its contributors.
 * 4. Neither the name of the University nor the names of its contributors
@


1.6
log
@we don't need to include buf.h
@
text
@d1 1
a1 1
/*	$OpenBSD: tty_conf.c,v 1.5 1997/09/02 08:48:32 downsj Exp $	*/
d51 5
a55 5
#define	ttynodisc ((int (*) __P((dev_t, struct tty *)))enodev)
#define	ttyerrclose ((int (*) __P((struct tty *, int flags)))enodev)
#define	ttyerrio ((int (*) __P((struct tty *, struct uio *, int)))enodev)
#define	ttyerrinput ((int (*) __P((int c, struct tty *)))enodev)
#define	ttyerrstart ((int (*) __P((struct tty *)))enodev)
d57 1
a57 1
int	nullioctl __P((struct tty *, u_long, caddr_t, int, struct proc *));
d61 6
a66 6
int	tbopen __P((dev_t dev, struct tty *tp));
int	tbclose __P((struct tty *tp, int flags));
int	tbread __P((struct tty *tp, struct uio *uio, int flags));
int	tbtioctl __P((struct tty *tp, u_long cmd, caddr_t data,
			int flag, struct proc *p));
int	tbinput __P((int c, struct tty *tp));
d71 6
a76 6
int	slopen __P((dev_t dev, struct tty *tp));
int	slclose __P((struct tty *tp, int flags));
int	sltioctl __P((struct tty *tp, u_long cmd, caddr_t data,
			int flag, struct proc *p));
int	slinput __P((int c, struct tty *tp));
int	slstart __P((struct tty *tp));
d81 8
a88 8
int	pppopen __P((dev_t dev, struct tty *tp));
int	pppclose __P((struct tty *tp, int flags));
int	ppptioctl __P((struct tty *tp, u_long cmd, caddr_t data,
			int flag, struct proc *p));
int	pppinput __P((int c, struct tty *tp));
int	pppstart __P((struct tty *tp));
int	pppread __P((struct tty *tp, struct uio *uio, int flag));
int	pppwrite __P((struct tty *tp, struct uio *uio, int flag));
d93 6
a98 6
int	stripopen __P((dev_t dev, struct tty *tp));
int	stripclose __P((struct tty *tp, int flags));
int	striptioctl __P((struct tty *tp, u_long cmd, caddr_t data,
			int flag, struct proc *p));
int	stripinput __P((int c, struct tty *tp));
int	stripstart __P((struct tty *tp));
@


1.6.14.1
log
@Sync UBC branch to -current
@
text
@d1 1
a1 1
/*	$OpenBSD: tty_conf.c,v 1.6 1999/04/22 20:02:41 art Exp $	*/
d51 5
a55 5
#define	ttynodisc ((int (*)(dev_t, struct tty *))enodev)
#define	ttyerrclose ((int (*)(struct tty *, int flags))enodev)
#define	ttyerrio ((int (*)(struct tty *, struct uio *, int))enodev)
#define	ttyerrinput ((int (*)(int c, struct tty *))enodev)
#define	ttyerrstart ((int (*)(struct tty *))enodev)
d57 1
a57 1
int	nullioctl(struct tty *, u_long, caddr_t, int, struct proc *);
d61 6
a66 6
int	tbopen(dev_t dev, struct tty *tp);
int	tbclose(struct tty *tp, int flags);
int	tbread(struct tty *tp, struct uio *uio, int flags);
int	tbtioctl(struct tty *tp, u_long cmd, caddr_t data,
			int flag, struct proc *p);
int	tbinput(int c, struct tty *tp);
d71 6
a76 6
int	slopen(dev_t dev, struct tty *tp);
int	slclose(struct tty *tp, int flags);
int	sltioctl(struct tty *tp, u_long cmd, caddr_t data,
			int flag, struct proc *p);
int	slinput(int c, struct tty *tp);
int	slstart(struct tty *tp);
d81 8
a88 8
int	pppopen(dev_t dev, struct tty *tp);
int	pppclose(struct tty *tp, int flags);
int	ppptioctl(struct tty *tp, u_long cmd, caddr_t data,
			int flag, struct proc *p);
int	pppinput(int c, struct tty *tp);
int	pppstart(struct tty *tp);
int	pppread(struct tty *tp, struct uio *uio, int flag);
int	pppwrite(struct tty *tp, struct uio *uio, int flag);
d93 6
a98 6
int	stripopen(dev_t dev, struct tty *tp);
int	stripclose(struct tty *tp, int flags);
int	striptioctl(struct tty *tp, u_long cmd, caddr_t data,
			int flag, struct proc *p);
int	stripinput(int c, struct tty *tp);
int	stripstart(struct tty *tp);
@


1.6.4.1
log
@Merge in -current from about a week ago
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
d51 5
a55 5
#define	ttynodisc ((int (*)(dev_t, struct tty *))enodev)
#define	ttyerrclose ((int (*)(struct tty *, int flags))enodev)
#define	ttyerrio ((int (*)(struct tty *, struct uio *, int))enodev)
#define	ttyerrinput ((int (*)(int c, struct tty *))enodev)
#define	ttyerrstart ((int (*)(struct tty *))enodev)
d57 1
a57 1
int	nullioctl(struct tty *, u_long, caddr_t, int, struct proc *);
d61 6
a66 6
int	tbopen(dev_t dev, struct tty *tp);
int	tbclose(struct tty *tp, int flags);
int	tbread(struct tty *tp, struct uio *uio, int flags);
int	tbtioctl(struct tty *tp, u_long cmd, caddr_t data,
			int flag, struct proc *p);
int	tbinput(int c, struct tty *tp);
d71 6
a76 6
int	slopen(dev_t dev, struct tty *tp);
int	slclose(struct tty *tp, int flags);
int	sltioctl(struct tty *tp, u_long cmd, caddr_t data,
			int flag, struct proc *p);
int	slinput(int c, struct tty *tp);
int	slstart(struct tty *tp);
d81 8
a88 8
int	pppopen(dev_t dev, struct tty *tp);
int	pppclose(struct tty *tp, int flags);
int	ppptioctl(struct tty *tp, u_long cmd, caddr_t data,
			int flag, struct proc *p);
int	pppinput(int c, struct tty *tp);
int	pppstart(struct tty *tp);
int	pppread(struct tty *tp, struct uio *uio, int flag);
int	pppwrite(struct tty *tp, struct uio *uio, int flag);
d93 6
a98 6
int	stripopen(dev_t dev, struct tty *tp);
int	stripclose(struct tty *tp, int flags);
int	striptioctl(struct tty *tp, u_long cmd, caddr_t data,
			int flag, struct proc *p);
int	stripinput(int c, struct tty *tp);
int	stripstart(struct tty *tp);
@


1.6.4.2
log
@Sync SMP branch to -current
@
text
@d1 1
a1 1
/*	$OpenBSD: tty_conf.c,v 1.6.4.1 2002/03/28 11:43:04 niklas Exp $	*/
d21 5
a25 1
 * 3. Neither the name of the University nor the names of its contributors
@


1.5
log
@COMPAT_BSDOS exec and compat changes.
@
text
@d1 1
a1 1
/*	$OpenBSD: tty_conf.c,v 1.4 1997/04/04 01:46:03 deraadt Exp $	*/
a45 1
#include <sys/buf.h>
@


1.4
log
@s/STRIPIPDISC/STRIPDISC/; kleink@@netbsd.org
@
text
@d1 1
a1 1
/*	$OpenBSD: tty_conf.c,v 1.3 1996/05/22 11:51:25 deraadt Exp $	*/
d110 1
a110 1
#if defined(COMPAT_43) || defined(COMPAT_FREEBSD)
@


1.3
log
@+ strip
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
d144 1
a144 1
	  stripinput, stripstart, nullmodem },		/* 6- STRIPIPDISC */
@


1.2
log
@From NetBSD: 960217 merge
@
text
@d2 1
a2 1
/*	$NetBSD: tty_conf.c,v 1.17 1996/02/04 02:17:22 christos Exp $	*/
d92 10
d137 8
@


1.1
log
@Initial revision
@
text
@d1 2
a2 1
/*	$NetBSD: tty_conf.c,v 1.16 1995/10/10 01:27:01 mycroft Exp $	*/
d58 1
a58 2
int	nullioctl __P((struct tty *tp, u_long cmd, caddr_t data,
			int flag, struct proc *p));
d140 1
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
