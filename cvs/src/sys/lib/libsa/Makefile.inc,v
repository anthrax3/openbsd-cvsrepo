head	1.14;
access;
symbols
	OPENBSD_6_2_BASE:1.14
	OPENBSD_6_1:1.14.0.14
	OPENBSD_6_1_BASE:1.14
	OPENBSD_6_0:1.14.0.10
	OPENBSD_6_0_BASE:1.14
	OPENBSD_5_9:1.14.0.6
	OPENBSD_5_9_BASE:1.14
	OPENBSD_5_8:1.14.0.8
	OPENBSD_5_8_BASE:1.14
	OPENBSD_5_7:1.14.0.2
	OPENBSD_5_7_BASE:1.14
	OPENBSD_5_6:1.14.0.4
	OPENBSD_5_6_BASE:1.14
	OPENBSD_5_5:1.13.0.8
	OPENBSD_5_5_BASE:1.13
	OPENBSD_5_4:1.13.0.4
	OPENBSD_5_4_BASE:1.13
	OPENBSD_5_3:1.13.0.2
	OPENBSD_5_3_BASE:1.13
	OPENBSD_5_2:1.12.0.38
	OPENBSD_5_2_BASE:1.12
	OPENBSD_5_1_BASE:1.12
	OPENBSD_5_1:1.12.0.36
	OPENBSD_5_0:1.12.0.34
	OPENBSD_5_0_BASE:1.12
	OPENBSD_4_9:1.12.0.32
	OPENBSD_4_9_BASE:1.12
	OPENBSD_4_8:1.12.0.30
	OPENBSD_4_8_BASE:1.12
	OPENBSD_4_7:1.12.0.26
	OPENBSD_4_7_BASE:1.12
	OPENBSD_4_6:1.12.0.28
	OPENBSD_4_6_BASE:1.12
	OPENBSD_4_5:1.12.0.24
	OPENBSD_4_5_BASE:1.12
	OPENBSD_4_4:1.12.0.22
	OPENBSD_4_4_BASE:1.12
	OPENBSD_4_3:1.12.0.20
	OPENBSD_4_3_BASE:1.12
	OPENBSD_4_2:1.12.0.18
	OPENBSD_4_2_BASE:1.12
	OPENBSD_4_1:1.12.0.16
	OPENBSD_4_1_BASE:1.12
	OPENBSD_4_0:1.12.0.14
	OPENBSD_4_0_BASE:1.12
	OPENBSD_3_9:1.12.0.12
	OPENBSD_3_9_BASE:1.12
	OPENBSD_3_8:1.12.0.10
	OPENBSD_3_8_BASE:1.12
	OPENBSD_3_7:1.12.0.8
	OPENBSD_3_7_BASE:1.12
	OPENBSD_3_6:1.12.0.6
	OPENBSD_3_6_BASE:1.12
	SMP_SYNC_A:1.12
	SMP_SYNC_B:1.12
	OPENBSD_3_5:1.12.0.4
	OPENBSD_3_5_BASE:1.12
	OPENBSD_3_4:1.12.0.2
	OPENBSD_3_4_BASE:1.12
	UBC_SYNC_A:1.11
	OPENBSD_3_3:1.11.0.4
	OPENBSD_3_3_BASE:1.11
	OPENBSD_3_2:1.11.0.2
	OPENBSD_3_2_BASE:1.11
	OPENBSD_3_1:1.10.0.6
	OPENBSD_3_1_BASE:1.10
	UBC_SYNC_B:1.11
	UBC:1.10.0.4
	UBC_BASE:1.10
	OPENBSD_3_0:1.10.0.2
	OPENBSD_3_0_BASE:1.10
	OPENBSD_2_9_BASE:1.9
	OPENBSD_2_9:1.9.0.18
	OPENBSD_2_8:1.9.0.16
	OPENBSD_2_8_BASE:1.9
	OPENBSD_2_7:1.9.0.14
	OPENBSD_2_7_BASE:1.9
	SMP:1.9.0.12
	SMP_BASE:1.9
	kame_19991208:1.9
	OPENBSD_2_6:1.9.0.10
	OPENBSD_2_6_BASE:1.9
	OPENBSD_2_5:1.9.0.8
	OPENBSD_2_5_BASE:1.9
	OPENBSD_2_4:1.9.0.6
	OPENBSD_2_4_BASE:1.9
	OPENBSD_2_3:1.9.0.4
	OPENBSD_2_3_BASE:1.9
	OPENBSD_2_2:1.9.0.2
	OPENBSD_2_2_BASE:1.9
	OPENBSD_2_1:1.7.0.2
	OPENBSD_2_1_BASE:1.7
	OPENBSD_2_0:1.3.0.2
	OPENBSD_2_0_BASE:1.3
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.14
date	2014.07.16.20.08.25;	author okan;	state Exp;
branches;
next	1.13;
commitid	RAuhitNivrIYu8d8;

1.13
date	2013.01.01.00.58.25;	author miod;	state Exp;
branches;
next	1.12;

1.12
date	2003.06.01.17.00.32;	author deraadt;	state Exp;
branches;
next	1.11;

1.11
date	2002.04.29.01.02.28;	author hugh;	state Exp;
branches;
next	1.10;

1.10
date	2001.06.23.01.47.40;	author drahn;	state Exp;
branches
	1.10.4.1;
next	1.9;

1.9
date	97.06.20.21.43.16;	author grr;	state Exp;
branches
	1.9.12.1;
next	1.8;

1.8
date	97.06.19.18.23.23;	author grr;	state Exp;
branches;
next	1.7;

1.7
date	97.05.05.04.44.10;	author millert;	state Exp;
branches;
next	1.6;

1.6
date	97.05.04.23.35.32;	author millert;	state Exp;
branches;
next	1.5;

1.5
date	97.02.06.14.22.32;	author mickey;	state Exp;
branches;
next	1.4;

1.4
date	96.12.08.15.15.44;	author niklas;	state Exp;
branches;
next	1.3;

1.3
date	96.09.23.14.18.45;	author mickey;	state Exp;
branches;
next	1.2;

1.2
date	96.09.20.14.20.24;	author mickey;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.52.56;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.52.56;	author deraadt;	state Exp;
branches;
next	;

1.9.12.1
date	2001.07.04.10.49.03;	author niklas;	state Exp;
branches;
next	1.9.12.2;

1.9.12.2
date	2003.03.28.00.41.27;	author niklas;	state Exp;
branches;
next	1.9.12.3;

1.9.12.3
date	2003.06.07.11.03.42;	author ho;	state Exp;
branches;
next	;

1.10.4.1
date	2002.06.11.03.30.09;	author art;	state Exp;
branches;
next	;


desc
@@


1.14
log
@zap trailing newlines; "go for it" deraadt
@
text
@#	$OpenBSD: Makefile.inc,v 1.13 2013/01/01 00:58:25 miod Exp $
#	$NetBSD: Makefile.inc,v 1.5 1996/09/30 16:01:18 ws Exp $
#
#	NOTE: $S must correspond to the top of the 'sys' tree
SADIR=	$S/lib/libsa

SADST?=	lib/sa
SAREL?=	../../
SALIB?=	${SADST}/libsa.a

SAMAKE= \
	cd ${SADST} && ${MAKE} -f ${SAREL}${SADIR}/Makefile \
	  CC="${CC}" XCFLAGS="${CFLAGS}" \
	  AS='${AS}' XAFLAGS='${AFLAGS}' \
	  LD='${LD}' \
	  SAREL="${SAREL}" \
	  SADIR="${SADIR}" \
	  EXTRACFLAGS="${EXTRACFLAGS}"
.if defined(NO_NET)
SAMAKE+= NO_NET=""
.endif
.if defined(SA_ZLIB)
SAMAKE+= SA_ZLIB=""
.endif
.if defined(USE_LOADFILE)
SAMAKE+= USE_LOADFILE=""
.endif

${SALIB}:		.NOTMAIN __always_make_salib
	@@echo making sure the stand-alone library is up to date...
	@@${SAMAKE} libsa.a

clean::			.NOTMAIN __always_make_salib
	@@echo cleaning the stand-alone library objects
	@@${SAMAKE} clean
	-rmdir -p ${SADST}

depend::		.NOTMAIN __always_make_salib
	@@echo depending the standalone library objects
	@@${SAMAKE} depend

__always_make_salib:	.NOTMAIN
	-mkdir -p ${SADST}
@


1.13
log
@Remove unused XCPPFLAGS.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.12 2003/06/01 17:00:32 deraadt Exp $
a43 1

@


1.12
log
@strcpy/strcat/sprintf removal in all bootblocks.  various testing by
various people.  outside of some messy things in src/gnu, only one
thing in the main tree now violates this rule: bind
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.11 2002/04/29 01:02:28 hugh Exp $
a15 1
	  XCPPFLAGS="${CPPFLAGS}" \
@


1.11
log
@Delete directories created by cleandir to prevent permission problems
during sudo builds. Verified by Valchev and sanctioned by Shalayeff.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.10 2001/06/23 01:47:40 drahn Exp $
d34 1
a34 1
clean::	 		.NOTMAIN __always_make_salib
@


1.10
log
@Add MI loadfile support, from NetBSD
This is currently only used on powerpc, but may be looked
at for other architectures.
Piece of the support to have kernel symbols on powerpc.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.9 1997/06/20 21:43:16 grr Exp $
d37 1
@


1.10.4.1
log
@Sync UBC branch to -current
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.10 2001/06/23 01:47:40 drahn Exp $
a36 1
	-rmdir -p ${SADST}
@


1.9
log
@oops, pointed out by Theo
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.8 1997/06/19 18:23:23 grr Exp $
d25 3
@


1.9.12.1
log
@Merge in -current from two days ago in the SMP branch.
As usual with merges, they do not indicate progress, so do not hold
your breath for working SMP, and do not mail me and ask about the
state of it.  It has not changed.  There is work ongoing, but very, very
slowly.  The commit is done in parts as to not lock up the tree in too
big chunks at a time.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.9 1997/06/20 21:43:16 grr Exp $
a24 3
.endif
.if defined(USE_LOADFILE)
SAMAKE+= USE_LOADFILE=""
@


1.9.12.2
log
@Sync the SMP branch with 3.3
@
text
@d1 1
a1 1
#	$OpenBSD$
a36 1
	-rmdir -p ${SADST}
@


1.9.12.3
log
@Sync SMP branch to -current
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.9.12.2 2003/03/28 00:41:27 niklas Exp $
d34 1
a34 1
clean::			.NOTMAIN __always_make_salib
@


1.8
log
@Fix a repeatbility problem associated with doing make cleandir of sys/lib/* -
mkdir fails if the destination already exists.  It could be argued that
having make cleandir rm the directory would be appropriate, but there
really shouldn't be any dynamic fooling around with the directory structure.

Fixes PR sparc/231 by Marshal Midden, though probably MI.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.7 1997/05/05 04:44:10 millert Exp $
d40 1
a40 1
	-mkdir -p ${SADST})
@


1.7
log
@Back out depend/clean changes.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.6 1997/05/04 23:35:32 millert Exp $
d40 1
a40 1
	@@([ -d ${SADST} ] || mkdir -p ${SADST})
@


1.6
log
@Change clean/depend targets to allow inclusion of Makefile.inc
where there is already a depend: target.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.5 1997/02/06 14:22:32 mickey Exp $
d31 1
a31 2
clean:	 		.NOTMAIN cleansalib
cleansalib:		.NOTMAIN __always_make_salib
d35 1
a35 2
depend:			.NOTMAIN dependsalib
dependsalib:		.NOTMAIN __always_make_salib
@


1.5
log
@remove net/zlib.c (use -lz now)
export NO_NET and SA_ZLIB to the Makefile (from Makefile.inc)
add -p printf flag (tiny code) just for gcc -Wall
import latest alloc.c from netbsd
text    data    bss     dec     hex
400     8       0       408     198
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.4 1996/12/08 15:15:44 niklas Exp $
d31 2
a32 1
clean:: 		.NOTMAIN __always_make_salib
d36 2
a37 1
depend::		.NOTMAIN __always_make_salib
@


1.4
log
@Merge to NetBSD 961207
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.3 1996/09/23 14:18:45 mickey Exp $
d7 1
a7 1
SADST=	lib/sa
d20 6
a28 1
.if !defined(NO_NET)
a29 3
.else
	@@${SAMAKE} NO_NET="" libsa.a
.endif
@


1.3
log
@add OpenBSD tag.
@
text
@d1 2
a2 2
#	$OpenBSD$
#	$NetBSD: Makefile.inc,v 1.4 1995/10/01 06:00:38 phil Exp $
d18 2
a19 1
	  SADIR="${SADIR}"
@


1.2
log
@fix makefiles. cleanup, addopt for boot.
@
text
@d1 1
@


1.1
log
@Initial revision
@
text
@d10 9
d22 1
a22 5
	@@(cd ${SADST} && ${MAKE} -f ${SAREL}${SADIR}/Makefile \
	  KERNCC="${CC}" \
	  KERNCFLAGS="${CFLAGS}" \
	  SAREL="${SAREL}" \
	  SADIR="${SADIR}" libsa.a)
d24 1
a24 6
	@@(cd ${SADST} && ${MAKE} -f ${SAREL}${SADIR}/Makefile \
	  KERNCC="${CC}" \
	  KERNCFLAGS="${CFLAGS}" \
	  SAREL="${SAREL}" \
	  SADIR="${SADIR}" \
	  NO_NET="" libsa.a)
d29 5
a33 5
	@@(cd ${SADST} && ${MAKE} -f ${SAREL}${SADIR}/Makefile \
	  KERNCC="${CC}" \
	  KERNCFLAGS="${CFLAGS}" \
	  SAREL="${SAREL}" \
	  SADIR="${SADIR}" clean)
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
