head	1.35;
access;
symbols
	OPENBSD_3_3:1.33.0.8
	OPENBSD_3_3_BASE:1.33
	OPENBSD_3_2:1.33.0.6
	OPENBSD_3_2_BASE:1.33
	OPENBSD_3_1:1.33.0.4
	OPENBSD_3_1_BASE:1.33
	OPENBSD_3_0:1.33.0.2
	OPENBSD_3_0_BASE:1.33
	OPENBSD_2_9:1.31.0.4
	OPENBSD_2_9_BASE:1.31
	OPENBSD_2_8:1.31.0.2
	OPENBSD_2_8_BASE:1.31
	OPENBSD_2_7:1.29.0.2
	OPENBSD_2_7_BASE:1.29
	OPENBSD_2_6:1.26.0.4
	OPENBSD_2_6_BASE:1.26
	OPENBSD_2_5:1.26.0.2
	OPENBSD_2_5_BASE:1.26
	OPENBSD_2_4:1.25.0.2
	OPENBSD_2_4_BASE:1.25
	OPENBSD_2_3:1.24.0.2
	OPENBSD_2_3_BASE:1.24
	OPENBSD_2_2:1.10.0.2
	OPENBSD_2_2_BASE:1.10
	OPENBSD_2_1:1.8.0.2
	OPENBSD_2_1_BASE:1.8
	OPENBSD_2_0:1.5.0.2
	OPENBSD_2_0_BASE:1.5
	initial:1.1.1.1
	KTH/tholo:1.1.1;
locks; strict;
comment	@# @;


1.35
date	2003.05.16.18.45.32;	author mho;	state dead;
branches;
next	1.34;

1.34
date	2003.05.14.01.22.56;	author hin;	state Exp;
branches;
next	1.33;

1.33
date	2001.07.03.18.33.03;	author matthieu;	state Exp;
branches;
next	1.32;

1.32
date	2001.06.05.10.10.55;	author hin;	state Exp;
branches;
next	1.31;

1.31
date	2000.09.04.18.02.42;	author hin;	state Exp;
branches;
next	1.30;

1.30
date	2000.08.31.19.48.56;	author hin;	state Exp;
branches;
next	1.29;

1.29
date	2000.03.10.22.04.18;	author niklas;	state Exp;
branches;
next	1.28;

1.28
date	2000.02.25.16.35.22;	author hin;	state Exp;
branches;
next	1.27;

1.27
date	2000.02.25.15.14.42;	author hin;	state dead;
branches;
next	1.26;

1.26
date	99.03.09.00.01.42;	author niklas;	state Exp;
branches;
next	1.25;

1.25
date	98.09.07.00.47.12;	author niklas;	state Exp;
branches;
next	1.24;

1.24
date	98.03.16.03.07.47;	author deraadt;	state Exp;
branches;
next	1.23;

1.23
date	98.03.12.19.04.54;	author deraadt;	state Exp;
branches;
next	1.22;

1.22
date	98.03.12.17.49.39;	author art;	state Exp;
branches;
next	1.21;

1.21
date	98.03.12.14.38.59;	author art;	state Exp;
branches;
next	1.20;

1.20
date	98.02.18.07.11.47;	author art;	state Exp;
branches;
next	1.19;

1.19
date	98.01.20.23.57.30;	author art;	state Exp;
branches;
next	1.18;

1.18
date	97.12.18.22.34.29;	author art;	state Exp;
branches;
next	1.17;

1.17
date	97.12.18.09.08.01;	author art;	state Exp;
branches;
next	1.16;

1.16
date	97.12.18.03.12.29;	author deraadt;	state Exp;
branches;
next	1.15;

1.15
date	97.12.17.20.45.03;	author deraadt;	state Exp;
branches;
next	1.14;

1.14
date	97.12.17.11.38.53;	author art;	state Exp;
branches;
next	1.13;

1.13
date	97.12.16.20.59.43;	author deraadt;	state Exp;
branches;
next	1.12;

1.12
date	97.12.15.17.56.12;	author art;	state Exp;
branches;
next	1.11;

1.11
date	97.11.28.12.48.37;	author art;	state Exp;
branches;
next	1.10;

1.10
date	97.06.29.14.54.18;	author provos;	state Exp;
branches;
next	1.9;

1.9
date	97.06.29.10.32.12;	author provos;	state Exp;
branches;
next	1.8;

1.8
date	96.11.15.09.21.23;	author downsj;	state Exp;
branches;
next	1.7;

1.7
date	96.11.11.05.35.12;	author downsj;	state Exp;
branches;
next	1.6;

1.6
date	96.11.11.04.42.25;	author downsj;	state Exp;
branches;
next	1.5;

1.5
date	96.06.21.23.45.46;	author dm;	state Exp;
branches;
next	1.4;

1.4
date	96.06.02.07.21.30;	author tholo;	state Exp;
branches;
next	1.3;

1.3
date	96.05.15.08.51.59;	author niklas;	state Exp;
branches;
next	1.2;

1.2
date	95.12.16.21.08.28;	author tholo;	state Exp;
branches;
next	1.1;

1.1
date	95.12.14.06.52.32;	author tholo;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.12.14.06.52.32;	author tholo;	state Exp;
branches;
next	;


desc
@@


1.35
log
@Bye, bye, kerberosIV; ok hin@@
@
text
@# $OpenBSD: Makefile,v 1.34 2003/05/14 01:22:56 hin Exp $

SUBDIR	= lib

build:
	${SUDO} ${MAKE} includes
	${MAKE} depend
	cd ${.CURDIR}/lib && ${MAKE} && ${SUDO} ${MAKE} install
	${MAKE}
	${SUDO} ${MAKE} install

.include <bsd.subdir.mk>
@


1.34
log
@Don't build kerberos4 programs. (The libraries are still needed for a while)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2001/07/03 18:33:03 matthieu Exp $
@


1.33
log
@use ${SUDO} for make includes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2001/06/05 10:10:55 hin Exp $
d3 1
a3 1
SUBDIR	= lib usr.bin usr.sbin libexec doc
@


1.32
log
@Don't spawn unecessary subshell in the "make build" target, a.k.a hin-is-lazy
target.

Fix sudo build while i'm here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2000/09/04 18:02:42 hin Exp $
d6 1
a6 1
	${MAKE} includes
@


1.31
log
@Build doc subdirectory too.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2000/08/31 19:48:56 hin Exp $
d8 1
a8 1
	( cd ${.CURDIR}/lib && ${MAKE} && ${MAKE} install )
d10 1
a10 1
	${MAKE} install
@


1.30
log
@Reintroduce the build target, which is very useful (at least for me).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2000/03/10 22:04:18 niklas Exp $
d3 1
a3 1
SUBDIR	= lib usr.bin usr.sbin libexec
@


1.29
log
@A more normal way of building kerberos, faster, and it works with SUDO
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2000/02/25 16:35:22 hin Exp $
d4 7
@


1.28
log
@Add build system for KerberosIV
(ok art@@)
@
text
@d1 1
a1 1
# $OpenBSD$
a3 12

build:
	${MAKE} cleandir
	${MAKE} includes
	${MAKE} depend
	( cd ${.CURDIR}/lib && ${MAKE} && ${MAKE} install )
	${MAKE}
	${MAKE} install

prereq:
	( cd ${.CURDIR}/lib/kadm && ${MAKE} prereq )
	( cd ${.CURDIR}/lib/krb && ${MAKE} prereq )
@


1.27
log
@Remove old KerberosIV code. (art@@ ok)
@
text
@d1 1
a1 2
#	$OpenBSD: Makefile,v 1.26 1999/03/09 00:01:42 niklas Exp $
#	from @@(#)Makefile	5.1 (Berkeley) 6/25/90
d3 1
a3 21
SUBDIR=

.ifmake includes
SUBDIR+=include
.endif

SUBDIR+=acl krb kadm kafs kdb

SUBDIR+=ext_srvtab kadmin kadmind kdb_destroy kdb_init kdb_edit \
	kdb_util kdestroy kerberos kinit klist kprop kpropd ksrvtgt \
	ksrvutil kstash kauth kauthd

SUBDIR+=man doc

LIBDIRS=acl krb kadm kafs kdb

.include <bsd.own.mk> # for AFS

.if (${AFS} == "yes")
SUBDIR+=afslog
.endif
d7 1
d9 7
a15 4
	${SUDO} ${MAKE} includes
	for dir in ${LIBDIRS}; do \
		(cd ${.CURDIR}/$$dir && ${MAKE} && ${SUDO} ${MAKE} install) \
	done
a16 1
.include <bsd.dep.mk>
@


1.26
log
@Some style issues, make stuff neded before depend be built by beforedepend.
Also make them prereq in the case of make includes
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.25 1998/09/07 00:47:12 niklas Exp $
@


1.25
log
@Optionally use make SUDO=sudo build to build as non-root
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.24 1998/03/16 03:07:47 deraadt Exp $
d18 2
a26 1
	(cd ${.CURDIR}/include && ${SUDO} ${MAKE} includes)
d28 1
d30 3
a32 5
	(cd ${.CURDIR}/acl && ${MAKE} depend && ${MAKE} && ${SUDO} ${MAKE} install)
	(cd ${.CURDIR}/krb && ${MAKE} depend && ${MAKE} && ${SUDO} ${MAKE} install)
	(cd ${.CURDIR}/kadm && ${MAKE} depend && ${MAKE} && ${SUDO} ${MAKE} install)
	(cd ${.CURDIR}/kafs && ${MAKE} depend && ${MAKE} && ${SUDO} ${MAKE} install)
	(cd ${.CURDIR}/kdb && ${MAKE} depend && ${MAKE} && ${SUDO} ${MAKE} install)
@


1.24
log
@conditionalize afslog
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.22 1998/03/12 17:49:39 art Exp $
d25 1
a25 1
	(cd ${.CURDIR}/include && ${MAKE} includes)
d27 6
a32 6
	${MAKE} includes
	(cd ${.CURDIR}/acl && ${MAKE} depend && ${MAKE} && ${MAKE} install)
	(cd ${.CURDIR}/krb && ${MAKE} depend && ${MAKE} && ${MAKE} install)
	(cd ${.CURDIR}/kadm && ${MAKE} depend && ${MAKE} && ${MAKE} install)
	(cd ${.CURDIR}/kafs && ${MAKE} depend && ${MAKE} && ${MAKE} install)
	(cd ${.CURDIR}/kdb && ${MAKE} depend && ${MAKE} && ${MAKE} install)
@


1.23
log
@delete AFS thing; it was not tested at all obviously
@
text
@d20 4
@


1.22
log
@build afslog only when AFS == "yes"
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.21 1998/03/12 14:38:59 art Exp $
a18 4

.if (${AFS} == "yes")
SUBDIR+=afslog
.endif
@


1.21
log
@build afslog
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.20 1998/02/18 07:11:47 art Exp $
d12 1
a12 1
SUBDIR+=afslog ext_srvtab kadmin kadmind kdb_destroy kdb_init kdb_edit \
d17 6
@


1.20
log
@build kauthd
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.19 1998/01/20 23:57:30 art Exp $
d12 3
a14 3
SUBDIR+=ext_srvtab kadmin kadmind kdb_destroy kdb_init kdb_edit kdb_util\
	kdestroy kerberos kinit klist kprop kpropd ksrvtgt ksrvutil \
	kstash kauth doc kauthd
d16 1
a16 1
SUBDIR+=man
@


1.19
log
@build doc
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.18 1997/12/18 22:34:29 art Exp $
d14 1
a14 1
	kstash kauth doc
@


1.18
log
@added kauth
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.17 1997/12/18 09:08:01 art Exp $
d14 1
a14 1
	kstash kauth
@


1.17
log
@Thing should work now.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.16 1997/12/18 03:12:29 deraadt Exp $
d14 1
a14 1
	kstash 
@


1.16
log
@disable the other thing art broke
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.15 1997/12/17 20:45:03 deraadt Exp $
d12 1
a12 1
SUBDIR+=ext_srvtab kadmin kadmind kdb_destroy kdb_init \
d14 1
a14 1
	kstash make_keypair
@


1.15
log
@disable stuff that art has broken
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.14 1997/12/17 11:38:53 art Exp $
d12 1
a12 1
SUBDIR+=ext_srvtab kadmin kadmind kdb_destroy kdb_init kdb_util \
@


1.14
log
@This dinosaur is replaced by kadmin and kadmind.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.13 1997/12/16 20:59:43 deraadt Exp $
d12 1
a12 1
SUBDIR+=ext_srvtab kadmin kadmind kdb_destroy kdb_edit kdb_init kdb_util \
@


1.13
log
@libsl is a bad idea
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.12 1997/12/15 17:56:12 art Exp $
d14 1
a14 1
	kstash make_keypair register registerd
@


1.12
log
@Upgrades, sanity checks, cleanup, etc.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.11 1997/11/28 12:48:37 art Exp $
d10 1
a10 1
SUBDIR+=acl krb kadm kafs kdb sl
@


1.11
log
@The first big step towards a complete upgrade to kth-krb4-0.9.7
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.10 1997/06/29 14:54:18 provos Exp $
d10 1
a10 1
SUBDIR+=acl krb kadm kafs kdb
d12 1
a12 1
SUBDIR+=ext_srvtab kadmin kdb_destroy kdb_edit kdb_init kdb_util \
a14 2

#removed: kpasswdd kadmind 
@


1.10
log
@another des one
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.9 1997/06/29 10:32:12 provos Exp $
d12 2
a13 2
SUBDIR+=ext_srvtab kadmin kadmind kdb_destroy kdb_edit kdb_init kdb_util \
	kdestroy kerberos kinit klist kpasswdd kprop kpropd ksrvtgt ksrvutil \
d15 2
@


1.9
log
@reflect changes and new position of libdes
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 1996/11/15 09:21:23 downsj Exp $
a22 1
	(cd ${.CURDIR}/des && ${MAKE} depend && ${MAKE} && ${MAKE} install)
@


1.8
log
@libss and mk_cmds are moving into the main tree
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 1996/11/11 05:35:12 downsj Exp $
d10 1
a10 1
SUBDIR+=acl des krb kadm kafs kdb
@


1.7
log
@com_err/compile_et changes
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.6 1996/11/11 04:42:25 downsj Exp $
d4 1
a4 5
# do mk_cmds first, used by other directories

.ifnmake install
SUBDIR=	mk_cmds
.endif
d10 1
a10 1
SUBDIR+=acl des krb kadm kafs kdb ss
a21 1
	(cd ${.CURDIR}/mk_cmds && ${MAKE} depend && ${MAKE})
a27 6
	(cd ${.CURDIR}/ss && ${MAKE} depend && ${MAKE} && ${MAKE} install)

# Since depending need to have some dynamically built sources available,
# we need to build the generators first.
beforedepend:
	(cd ${.CURDIR}/mk_cmds && ${MAKE} depend && ${MAKE})
@


1.6
log
@com_err is moving out into the main tree
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.5 1996/06/21 23:45:46 dm Exp $
d4 1
a4 1
# do compile_et and mk_cmds first, used by other directories
d7 1
a7 1
SUBDIR=	compile_et mk_cmds
a24 1
	(cd ${.CURDIR}/compile_et && ${MAKE} depend && ${MAKE})
a37 1
	(cd ${.CURDIR}/compile_et && ${MAKE} depend && ${MAKE})
@


1.5
log
@in make build: make includes bombs before compile_et
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 1996/06/02 07:21:30 tholo Exp $
d14 1
a14 1
SUBDIR+=acl com_err des krb kadm kafs kdb ss
a28 1
	(cd ${.CURDIR}/com_err && ${MAKE} depend && ${MAKE} && ${MAKE} install)
@


1.4
log
@Use "includes" target to install include files
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.3 1996/05/15 08:51:59 niklas Exp $
d25 1
a26 1
	(cd ${.CURDIR}/compile_et && ${MAKE} depend && ${MAKE})
@


1.3
log
@when depending in this tree some dynamically built sources need be
made first.  See to that the generating binaries for these are built
before recursing with the depend target.
@
text
@d1 1
a1 1
#	$OpenBSD$
d6 1
a6 3
.ifmake install
SUBDIR=	include
.else
d10 4
d23 1
a23 1
	(cd ${.CURDIR}/include && ${MAKE} install)
d25 1
@


1.2
log
@Add a build target
@
text
@d1 1
a2 1
#	$Id: Makefile,v 1.1.1.1 1995/12/14 06:52:32 tholo Exp $
d34 7
@


1.1
log
@Initial revision
@
text
@d2 1
a2 1
#	$Id$
d19 14
@


1.1.1.1
log
@Kerberos IV code, based on a merge of fixed code from KTH and original
4.4BSD Lite code (international edition).  Provides all functionality
from the original 4.4BSD code plus standard Kerberos elements that were
omitted in the 4.4BSD code.
@
text
@@

