head	1.2;
access;
symbols
	OPENBSD_3_3:1.1.1.2.0.4
	OPENBSD_3_3_BASE:1.1.1.2
	OPENBSD_3_2:1.1.1.2.0.2
	OPENBSD_3_2_BASE:1.1.1.2
	KRB4_1_1_1:1.1.1.2
	OPENBSD_3_1:1.1.1.1.0.10
	OPENBSD_3_1_BASE:1.1.1.1
	OPENBSD_3_0:1.1.1.1.0.8
	OPENBSD_3_0_BASE:1.1.1.1
	KRB4_1_0_8:1.1.1.1
	OPENBSD_2_9:1.1.1.1.0.6
	OPENBSD_2_9_BASE:1.1.1.1
	KRB4_1_0_4:1.1.1.1
	OPENBSD_2_8:1.1.1.1.0.4
	OPENBSD_2_8_BASE:1.1.1.1
	KRB4_1_0_2:1.1.1.1
	OPENBSD_2_7:1.1.1.1.0.2
	OPENBSD_2_7_BASE:1.1.1.1
	KRB4_1_0:1.1.1.1
	KTH:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2003.05.16.18.45.39;	author mho;	state dead;
branches;
next	1.1;

1.1
date	2000.02.25.15.36.50;	author hin;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.02.25.15.36.50;	author hin;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2002.06.08.21.07.53;	author hin;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Bye, bye, kerberosIV; ok hin@@
@
text
@# $KTH: Makefile.am,v 1.17 1999/10/19 23:54:05 assar Exp $

include $(top_srcdir)/Makefile.am.common

INCLUDES += $(INCLUDE_krb4) $(AFS_EXTRA_DEFS)

if KRB4
AFSLIBS = libkafs.la

if AIX
AFSL_EXP = $(srcdir)/afsl.exp

if AIX4
AFS_EXTRA_LD = -bnoentry
else
AFS_EXTRA_LD = -e _nostart
endif

if AIX_DYNAMIC_AFS
if HAVE_DLOPEN
AIX_SRC = 
else
AIX_SRC = dlfcn.c
endif
AFS_EXTRA_LIBS = afslib.so
AFS_EXTRA_DEFS =
else
AIX_SRC = afslib.c
AFS_EXTRA_LIBS = 
AFS_EXTRA_DEFS = -DSTATIC_AFS
endif

else
AFSL_EXP =
AIX_SRC =
endif # AIX

else
AFSLIBS = 
endif # KRB4


lib_LTLIBRARIES = $(AFSLIBS)
libkafs_la_LDFLAGS = -version-info 1:1:1
foodir = $(libdir)
foo_DATA = $(AFS_EXTRA_LIBS)
# EXTRA_DATA = afslib.so

CLEANFILES= $(AFS_EXTRA_LIBS)

include_HEADERS = kafs.h

if KRB5
afskrb5_c = afskrb5.c
endif

libkafs_la_SOURCES = afssys.c afskrb.c $(afskrb5_c) common.c $(AIX_SRC) kafs_locl.h afssysdefs.h
#afslib_so_SOURCES = afslib.c

EXTRA_libkafs_la_SOURCES = afskrb5.c dlfcn.c afslib.c dlfcn.h

EXTRA_DIST = README.dlfcn afsl.exp afslib.exp


# AIX: this almost works with gcc, but somehow it fails to use the
# correct ld, use ld instead
afslib.so: afslib.o
	ld -o $@@ -bM:SRE -bI:$(srcdir)/afsl.exp -bE:$(srcdir)/afslib.exp $(AFS_EXTRA_LD) afslib.o -lc

$(OBJECTS): ../../include/config.h
@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@Importing KTH Kerberos4 version 1.0
(art@@ ok)
@
text
@@


1.1.1.2
log
@Import of krb4-1.1.1
@
text
@d1 1
a1 1
# $KTH: Makefile.am,v 1.31.2.4 2001/11/01 22:34:19 assar Exp $
a8 1
DEPLIB_krb4 = $(LIB_krb4) $(LIB_des)
a39 1
DEPLIB_krb4  =
a41 5
if KRB5
libkafs_la_LIBADD = ../krb5/libkrb5.la ../roken/libroken.la $(DEPLIB_krb4)
else
libkafs_la_LIBADD = ../roken/libroken.la $(DEPLIB_krb4)
endif # KRB5
d44 1
a44 1
libkafs_la_LDFLAGS = -version-info 3:3:3
d49 1
a49 1
CLEANFILES= $(AFS_EXTRA_LIBS) $(ROKEN_SRCS)
d57 1
a57 14
if do_roken_rename
ROKEN_SRCS = resolve.c strtok_r.c strlcpy.c strsep.c
endif

libkafs_la_SOURCES =				\
	afssys.c				\
	afskrb.c				\
	$(afskrb5_c)				\
	common.c				\
	$(AIX_SRC)				\
	kafs_locl.h				\
	afssysdefs.h				\
	$(ROKEN_SRCS)

a63 1
man_MANS = kafs.3
a70 12

resolve.c:
	$(LN_S) $(srcdir)/../roken/resolve.c .

strtok_r.c:
	$(LN_S) $(srcdir)/../roken/strtok_r.c .

strlcpy.c:
	$(LN_S) $(srcdir)/../roken/strlcpy.c .

strsep.c:
	$(LN_S) $(srcdir)/../roken/strsep.c .
@

