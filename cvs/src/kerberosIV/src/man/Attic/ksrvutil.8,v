head	1.4;
access;
symbols
	OPENBSD_3_3:1.3.0.2
	OPENBSD_3_3_BASE:1.3
	OPENBSD_3_2:1.2.0.12
	OPENBSD_3_2_BASE:1.2
	OPENBSD_3_1:1.2.0.10
	OPENBSD_3_1_BASE:1.2
	OPENBSD_3_0:1.2.0.8
	OPENBSD_3_0_BASE:1.2
	KRB4_1_0_8:1.1.1.1
	OPENBSD_2_9:1.2.0.6
	OPENBSD_2_9_BASE:1.2
	KRB4_1_0_4:1.1.1.1
	OPENBSD_2_8:1.2.0.4
	OPENBSD_2_8_BASE:1.2
	KRB4_1_0_2:1.1.1.1
	OPENBSD_2_7:1.2.0.2
	OPENBSD_2_7_BASE:1.2
	KRB4_1_0:1.1.1.1
	KTH:1.1.1;
locks; strict;
comment	@.\" @;


1.4
date	2003.05.16.18.45.42;	author mho;	state dead;
branches;
next	1.3;

1.3
date	2003.02.05.10.29.49;	author jmc;	state Exp;
branches;
next	1.2;

1.2
date	2000.02.29.06.58.04;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	2000.02.25.15.37.09;	author hin;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.02.25.15.37.09;	author hin;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Bye, bye, kerberosIV; ok hin@@
@
text
@.\" $KTH: ksrvutil.8,v 1.3 1996/06/12 21:29:27 bg Exp $
.\" Copyright 1989 by the Massachusetts Institute of Technology.
.\"
.\" For copying and distribution information,
.\" please see the file <mit-copyright.h>.
.\"
.Dd May 4, 1996
.Dt KSRVUTIL 8
.Os
.Sh NAME
.Nm ksrvutil 
.Nd host kerberos keyfile (srvtab) manipulation utility
.Sh SYNOPSIS
.Nm
.Op Fl f Pa keyfile
.Op Fl i
.Op Fl k 
.Op Fl p Ar principal
.Op Fl r Ar realm
.Ar operation
.Sh DESCRIPTION
.Nm
allows a system manager to list or change keys currently in his
keyfile or to add new keys to the keyfile.
.Pp
Operation must be one of the following:
.Bl -tag -width indent
.It list
lists the keys in a keyfile showing version number and principal name.
If the
.Fl k
option is given, keys will also be shown.
.It change
changes all the keys in the keyfile by using the regular admin
protocol.  If the
.Fl i
flag is given,
.Nm ksrvutil
will prompt for yes or no before changing each key.  If the 
.Fl k
option is used, the old and new keys will be displayed.
.It add
allows the user to add a key.
add
prompts for name, instance, realm, and key version number, asks
for confirmation, and then asks for a password.  
.Nm
then converts the password to a key and appends the keyfile with the
new information.  If the
.Fl k
option is used, the key is displayed.
.It get
gets a service from the Kerberos server, possibly creating the
principal. Names, instances and realms for the service keys to get are
prompted for. The default principal used in the kadmin transcation is
your root instance. This can be changed with the
.Fl p
option.
.El
.Pp
In all cases, the default file used is KEY_FILE as defined in krb.h
unless this is overridden by the
.Fl f
option.
.Pp
A good use for
.Nm
would be for adding keys to a keyfile.  A system manager could
ask a kerberos administrator to create a new service key with 
.Xr kadmin 8
and could supply an initial password.  Then he could use 
.Nm
to add the key to the keyfile and then change the key so that it
will be random and unknown to either the system manager or the
kerberos administrator.
.Nm
always makes a backup copy of the keyfile before making any changes.
.Sh DIAGNOSTICS
If 
.Nm
should exit on an error condition at any time during a change or add,
a copy of the original keyfile can be found in
.Pa filename Ns .old
where 
.Pa filename
is the name of the keyfile, and a copy of the file with all new
keys changed or added so far can be found in 
.Pa filename Ns .work.
The original keyfile is left unmodified until the program exits, at
which point it is removed and replaced with the workfile.
Appending the workfile to the backup copy and replacing the keyfile
with the result should always give a usable keyfile, although the
resulting keyfile will have some out of date keys in it.
.Sh SEE ALSO
.Xr kadmin 8 ,
.Xr ksrvtgt 1
.Sh AUTHOR
Emanuel Jay Berkenbilt, MIT Project Athena
@


1.3
log
@typos; isakmpd(8) ok niklas@@, mailwrapper(8) help kjell@@
@
text
@@


1.2
log
@repair troff which makedb does not like
@
text
@d71 1
a71 1
and could supply an initial password.  Then, he could use 
d73 1
a73 1
to add the key to the keyfile and then to change the key so that it
d89 2
a90 2
The original keyfile is left unmodified until the program exits at
which point it is removed and replaced it with the workfile.
@


1.1
log
@Initial revision
@
text
@d9 1
a9 2
.Os KTH-KRB

d12 1
a12 1
host kerberos keyfile (srvtab) manipulation utility
a20 1

a75 1

a77 1

a93 1

a96 1

@


1.1.1.1
log
@Importing KTH Kerberos4 version 1.0
(art@@ ok)
@
text
@@
