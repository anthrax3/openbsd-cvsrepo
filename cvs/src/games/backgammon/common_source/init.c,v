head	1.11;
access;
symbols
	OPENBSD_6_1:1.11.0.8
	OPENBSD_6_1_BASE:1.11
	OPENBSD_6_0:1.11.0.4
	OPENBSD_6_0_BASE:1.11
	OPENBSD_5_9:1.11.0.2
	OPENBSD_5_9_BASE:1.11
	OPENBSD_5_8:1.10.0.26
	OPENBSD_5_8_BASE:1.10
	OPENBSD_5_7:1.10.0.18
	OPENBSD_5_7_BASE:1.10
	OPENBSD_5_6:1.10.0.22
	OPENBSD_5_6_BASE:1.10
	OPENBSD_5_5:1.10.0.20
	OPENBSD_5_5_BASE:1.10
	OPENBSD_5_4:1.10.0.16
	OPENBSD_5_4_BASE:1.10
	OPENBSD_5_3:1.10.0.14
	OPENBSD_5_3_BASE:1.10
	OPENBSD_5_2:1.10.0.12
	OPENBSD_5_2_BASE:1.10
	OPENBSD_5_1_BASE:1.10
	OPENBSD_5_1:1.10.0.10
	OPENBSD_5_0:1.10.0.8
	OPENBSD_5_0_BASE:1.10
	OPENBSD_4_9:1.10.0.6
	OPENBSD_4_9_BASE:1.10
	OPENBSD_4_8:1.10.0.4
	OPENBSD_4_8_BASE:1.10
	OPENBSD_4_7:1.10.0.2
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.9.0.14
	OPENBSD_4_6_BASE:1.9
	OPENBSD_4_5:1.9.0.10
	OPENBSD_4_5_BASE:1.9
	OPENBSD_4_4:1.9.0.8
	OPENBSD_4_4_BASE:1.9
	OPENBSD_4_3:1.9.0.6
	OPENBSD_4_3_BASE:1.9
	OPENBSD_4_2:1.9.0.4
	OPENBSD_4_2_BASE:1.9
	OPENBSD_4_1:1.9.0.2
	OPENBSD_4_1_BASE:1.9
	OPENBSD_4_0:1.7.0.14
	OPENBSD_4_0_BASE:1.7
	OPENBSD_3_9:1.7.0.12
	OPENBSD_3_9_BASE:1.7
	OPENBSD_3_8:1.7.0.10
	OPENBSD_3_8_BASE:1.7
	OPENBSD_3_7:1.7.0.8
	OPENBSD_3_7_BASE:1.7
	OPENBSD_3_6:1.7.0.6
	OPENBSD_3_6_BASE:1.7
	OPENBSD_3_5:1.7.0.4
	OPENBSD_3_5_BASE:1.7
	OPENBSD_3_4:1.7.0.2
	OPENBSD_3_4_BASE:1.7
	OPENBSD_3_3:1.6.0.4
	OPENBSD_3_3_BASE:1.6
	OPENBSD_3_2:1.6.0.2
	OPENBSD_3_2_BASE:1.6
	OPENBSD_3_1:1.5.0.4
	OPENBSD_3_1_BASE:1.5
	OPENBSD_3_0:1.5.0.2
	OPENBSD_3_0_BASE:1.5
	OPENBSD_2_9:1.4.0.2
	OPENBSD_2_9_BASE:1.4
	OPENBSD_2_8:1.3.0.6
	OPENBSD_2_8_BASE:1.3
	OPENBSD_2_7:1.3.0.4
	OPENBSD_2_7_BASE:1.3
	OPENBSD_2_6:1.3.0.2
	OPENBSD_2_6_BASE:1.3
	OPENBSD_2_5:1.2.0.6
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.2.0.4
	OPENBSD_2_4_BASE:1.2
	OPENBSD_2_3:1.2.0.2
	OPENBSD_2_3_BASE:1.2
	OPENBSD_2_2:1.1.1.1.0.6
	OPENBSD_2_2_BASE:1.1.1.1
	OPENBSD_2_1:1.1.1.1.0.4
	OPENBSD_2_1_BASE:1.1.1.1
	OPENBSD_2_0:1.1.1.1.0.2
	OPENBSD_2_0_BASE:1.1.1.1
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@ * @;


1.11
date	2015.12.02.20.05.01;	author tb;	state Exp;
branches;
next	1.10;
commitid	d7NTsg9vGQclKcoo;

1.10
date	2009.10.27.23.59.23;	author deraadt;	state Exp;
branches;
next	1.9;

1.9
date	2006.12.14.10.14.05;	author martin;	state Exp;
branches;
next	1.8;

1.8
date	2006.10.29.20.02.41;	author martin;	state Exp;
branches;
next	1.7;

1.7
date	2003.06.03.03.01.38;	author millert;	state Exp;
branches;
next	1.6;

1.6
date	2002.07.30.05.27.49;	author pjanzen;	state Exp;
branches;
next	1.5;

1.5
date	2001.06.23.23.50.03;	author pjanzen;	state Exp;
branches;
next	1.4;

1.4
date	2001.02.18.03.32.52;	author pjanzen;	state Exp;
branches;
next	1.3;

1.3
date	99.07.31.21.57.41;	author pjanzen;	state Exp;
branches;
next	1.2;

1.2
date	98.03.19.11.13.21;	author pjanzen;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.48.40;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.48.40;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.11
log
@Drop the argument passing between backgammon and teachgammon.
It's broken.  Instead, make -d imply -n.  You're supposed to
know the rules before you start tweaking them.

Issue reported by and ok pjanzen@@
Patient help with the manual jmc@@
@
text
@/*	$OpenBSD: init.c,v 1.10 2009/10/27 23:59:23 deraadt Exp $	*/

/*
 * Copyright (c) 1980, 1993
 *	The Regents of the University of California.  All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. Neither the name of the University nor the names of its contributors
 *    may be used to endorse or promote products derived from this software
 *    without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
 * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 */

/*
 * variable initialization.
 */

#ifdef DEBUG
#include <stdio.h>
FILE	*ftrace;
#endif
#include <back.h>

/* name of executable object programs */
const char    EXEC[] = "/usr/games/backgammon";
const char    TEACH[] = "/usr/games/teachgammon";

int     pnum = 2;		/* color of player:
						-1 = white
						 1 = red
						 0 = both
						 2 = not yet init'ed */
int     aflag = 1;		/* flag to ask for rules or instructions */
int     cflag = 0;		/* case conversion flag */
int     hflag = 1;		/* flag for cleaning screen */
int     mflag = 0;		/* backgammon flag */
int     raflag = 0;		/* 'roll again' flag for recovered game */
int     rflag = 0;		/* recovered game flag */
int     iroll = 0;		/* special flag for inputting rolls */
int	dflag = 1;		/* doubling enabled */
int     rfl = 0;

const char   *const color[] = {"White", "Red", "white", "red"};


const char	*const *Colorptr;
const char	*const *colorptr;
int	*inopp;
int	*inptr;
int	*offopp;
int	*offptr;
int	bar;
int	begscr;
int	board[26];
char	cin[CIN_SIZE];
int	colen;
int	cturn;
int	d0;
int	dice[2];
int	dlast;
int	g[5];
int	gvalue;
int	h[4];
int	home;
int	in[2];
int	mvl;
int	mvlim;
int	ncin;
int	off[2];
int	p[5];
int	rscore;
int	table[6][6];
int	wscore;
@


1.10
log
@rcsid[] and sccsid[] and copyright[] are essentially unmaintained (and
unmaintainable).  these days, people use source.  these id's do not provide
any benefit, and do hurt the small install media
(the 33,000 line diff is essentially mechanical)
ok with the idea millert, ok dms
@
text
@d1 1
a1 1
/*	$OpenBSD: init.c,v 1.9 2006/12/14 10:14:05 martin Exp $	*/
a50 1
int     acnt = 0;		/* length of args */
a69 1
char	args[100];
@


1.9
log
@fix DEBUG by renaming a variable colliding with ncurses

found by Sascha Welter, ok otto@@
@
text
@d1 1
a1 1
/*	$OpenBSD: init.c,v 1.8 2006/10/29 20:02:41 martin Exp $	*/
a30 8

#ifndef lint
#if 0
static char sccsid[] = "@@(#)init.c	8.1 (Berkeley) 5/31/93";
#else
static char rcsid[] = "$OpenBSD: init.c,v 1.8 2006/10/29 20:02:41 martin Exp $";
#endif
#endif /* not lint */
@


1.8
log
@-d: make it possible playing without doubling as it is not commonly
played everywhere in the world

ok todd@@ otto@@
@
text
@d1 1
a1 1
/*	$OpenBSD: init.c,v 1.7 2003/06/03 03:01:38 millert Exp $	*/
d36 1
a36 1
static char rcsid[] = "$OpenBSD: init.c,v 1.7 2003/06/03 03:01:38 millert Exp $";
d46 1
a46 1
FILE	*trace;
@


1.7
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
/*	$OpenBSD: init.c,v 1.6 2002/07/30 05:27:49 pjanzen Exp $	*/
d36 1
a36 1
static char rcsid[] = "$OpenBSD: init.c,v 1.6 2002/07/30 05:27:49 pjanzen Exp $";
d67 1
@


1.6
log
@Kill buffer overflow.
@
text
@d1 1
a1 1
/*	$OpenBSD: init.c,v 1.5 2001/06/23 23:50:03 pjanzen Exp $	*/
d15 1
a15 5
 * 3. All advertising materials mentioning features or use of this software
 *    must display the following acknowledgement:
 *	This product includes software developed by the University of
 *	California, Berkeley and its contributors.
 * 4. Neither the name of the University nor the names of its contributors
d36 1
a36 1
static char rcsid[] = "$OpenBSD: init.c,v 1.5 2001/06/23 23:50:03 pjanzen Exp $";
@


1.5
log
@termios -> curses
@
text
@d1 1
a1 1
/*	$OpenBSD: init.c,v 1.4 2001/02/18 03:32:52 pjanzen Exp $	*/
d40 1
a40 1
static char rcsid[] = "$OpenBSD: init.c,v 1.4 2001/02/18 03:32:52 pjanzen Exp $";
d52 1
d86 1
a86 1
char	cin[100];
@


1.4
log
@Get this not to segfault on startup on alpha.
@
text
@d1 1
a1 1
/*	$OpenBSD: init.c,v 1.3 1999/07/31 21:57:41 pjanzen Exp $	*/
d40 1
a40 1
static char rcsid[] = "$OpenBSD: init.c,v 1.3 1999/07/31 21:57:41 pjanzen Exp $";
a43 2
#include <termios.h>

a63 1
int     bflag = 0;		/* flag for automatic board printing */
a68 1
int     tflag = 0;		/* cursor addressing flag */
a87 2
int	curc;
int	curr;
a103 1
struct termios	old, noech, traw;
@


1.3
log
@use const where appropriate (jsm28@@cam.ac.uk).  Also some very minor tidying.
@
text
@d1 1
a1 1
/*	$OpenBSD: init.c,v 1.2 1998/03/19 11:13:21 pjanzen Exp $	*/
d40 1
a40 1
static char rcsid[] = "$OpenBSD: init.c,v 1.2 1998/03/19 11:13:21 pjanzen Exp $";
d110 1
a110 1
struct termios	old, noech, raw;
@


1.2
log
@NetBSD changes and further improvements and corrections
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
d40 1
a40 1
static char rcsid[] = "$OpenBSD$";
d56 2
a57 2
char    EXEC[] = "/usr/games/backgammon";
char    TEACH[] = "/usr/games/teachgammon";
d76 1
a76 1
char   *color[] = {"White", "Red", "white", "red"};
d79 2
a80 2
char	**Colorptr;
char	**colorptr;
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
/*	$NetBSD: init.c,v 1.4 1995/04/29 00:44:12 mycroft Exp $	*/
d40 1
a40 1
static char rcsid[] = "$NetBSD: init.c,v 1.4 1995/04/29 00:44:12 mycroft Exp $";
d50 4
a53 20
				/* name of executable object programs */
char	EXEC[] = "/usr/games/backgammon";
char	TEACH[] = "/usr/games/teachgammon";

int	pnum	= 2;		/* color of player:
					-1 = white
					 1 = red
					 0 = both
					 2 = not yet init'ed */
int	acnt	= 0;		/* length of args */
int	aflag	= 1;		/* flag to ask for rules or instructions */
int	bflag	= 0;		/* flag for automatic board printing */
int	cflag	= 0;		/* case conversion flag */
int	hflag	= 1;		/* flag for cleaning screen */
int	mflag	= 0;		/* backgammon flag */
int	raflag	= 0;		/* 'roll again' flag for recovered game */
int	rflag	= 0;		/* recovered game flag */
int	tflag	= 0;		/* cursor addressing flag */
int	iroll	= 0;		/* special flag for inputting rolls */
int	rfl	= 0;
d55 56
a110 1
char	*color[] = {"White","Red","white","red"};
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@

