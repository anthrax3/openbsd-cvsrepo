head	1.18;
access;
symbols
	OPENBSD_6_1_BASE:1.18
	OPENBSD_6_0:1.18.0.4
	OPENBSD_6_0_BASE:1.18
	OPENBSD_5_9:1.18.0.2
	OPENBSD_5_9_BASE:1.18
	OPENBSD_5_8:1.17.0.20
	OPENBSD_5_8_BASE:1.17
	OPENBSD_5_7:1.17.0.12
	OPENBSD_5_7_BASE:1.17
	OPENBSD_5_6:1.17.0.16
	OPENBSD_5_6_BASE:1.17
	OPENBSD_5_5:1.17.0.14
	OPENBSD_5_5_BASE:1.17
	OPENBSD_5_4:1.17.0.10
	OPENBSD_5_4_BASE:1.17
	OPENBSD_5_3:1.17.0.8
	OPENBSD_5_3_BASE:1.17
	OPENBSD_5_2:1.17.0.6
	OPENBSD_5_2_BASE:1.17
	OPENBSD_5_1_BASE:1.17
	OPENBSD_5_1:1.17.0.4
	OPENBSD_5_0:1.17.0.2
	OPENBSD_5_0_BASE:1.17
	OPENBSD_4_9:1.16.0.26
	OPENBSD_4_9_BASE:1.16
	OPENBSD_4_8:1.16.0.24
	OPENBSD_4_8_BASE:1.16
	OPENBSD_4_7:1.16.0.20
	OPENBSD_4_7_BASE:1.16
	OPENBSD_4_6:1.16.0.22
	OPENBSD_4_6_BASE:1.16
	OPENBSD_4_5:1.16.0.18
	OPENBSD_4_5_BASE:1.16
	OPENBSD_4_4:1.16.0.16
	OPENBSD_4_4_BASE:1.16
	OPENBSD_4_3:1.16.0.14
	OPENBSD_4_3_BASE:1.16
	OPENBSD_4_2:1.16.0.12
	OPENBSD_4_2_BASE:1.16
	OPENBSD_4_1:1.16.0.10
	OPENBSD_4_1_BASE:1.16
	OPENBSD_4_0:1.16.0.8
	OPENBSD_4_0_BASE:1.16
	OPENBSD_3_9:1.16.0.6
	OPENBSD_3_9_BASE:1.16
	OPENBSD_3_8:1.16.0.4
	OPENBSD_3_8_BASE:1.16
	OPENBSD_3_7:1.16.0.2
	OPENBSD_3_7_BASE:1.16
	OPENBSD_3_6:1.15.0.6
	OPENBSD_3_6_BASE:1.15
	OPENBSD_3_5:1.15.0.4
	OPENBSD_3_5_BASE:1.15
	OPENBSD_3_4:1.15.0.2
	OPENBSD_3_4_BASE:1.15
	OPENBSD_3_3:1.14.0.4
	OPENBSD_3_3_BASE:1.14
	OPENBSD_3_2:1.14.0.2
	OPENBSD_3_2_BASE:1.14
	OPENBSD_3_1:1.13.0.14
	OPENBSD_3_1_BASE:1.13
	OPENBSD_3_0:1.13.0.12
	OPENBSD_3_0_BASE:1.13
	OPENBSD_2_9:1.13.0.10
	OPENBSD_2_9_BASE:1.13
	OPENBSD_2_8:1.13.0.8
	OPENBSD_2_8_BASE:1.13
	OPENBSD_2_7:1.13.0.6
	OPENBSD_2_7_BASE:1.13
	OPENBSD_2_6:1.13.0.4
	OPENBSD_2_6_BASE:1.13
	OPENBSD_2_5:1.13.0.2
	OPENBSD_2_5_BASE:1.13
	OPENBSD_2_4:1.12.0.2
	OPENBSD_2_4_BASE:1.12
	OPENBSD_2_3:1.10.0.4
	OPENBSD_2_3_BASE:1.10
	OPENBSD_2_2:1.10.0.2
	OPENBSD_2_2_BASE:1.10
	OPENBSD_2_1:1.8.0.2
	OPENBSD_2_1_BASE:1.8
	OPENBSD_2_0:1.4.0.2
	OPENBSD_2_0_BASE:1.4
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.18
date	2015.11.24.03.10.10;	author deraadt;	state Exp;
branches;
next	1.17;
commitid	NZfzN0SfUUHBE4HF;

1.17
date	2011.06.23.22.46.12;	author schwarze;	state Exp;
branches;
next	1.16;

1.16
date	2004.11.11.16.39.00;	author jolan;	state Exp;
branches;
next	1.15;

1.15
date	2003.04.08.20.42.42;	author millert;	state Exp;
branches;
next	1.14;

1.14
date	2002.05.23.18.43.00;	author deraadt;	state Exp;
branches;
next	1.13;

1.13
date	98.11.29.19.56.54;	author pjanzen;	state Exp;
branches;
next	1.12;

1.12
date	98.07.24.00.10.36;	author millert;	state Exp;
branches;
next	1.11;

1.11
date	98.07.10.09.46.44;	author downsj;	state Exp;
branches;
next	1.10;

1.10
date	97.09.21.11.36.29;	author deraadt;	state Exp;
branches;
next	1.9;

1.9
date	97.09.02.15.47.07;	author angelos;	state Exp;
branches;
next	1.8;

1.8
date	97.04.01.19.54.26;	author mickey;	state Exp;
branches;
next	1.7;

1.7
date	97.02.28.10.18.41;	author downsj;	state Exp;
branches;
next	1.6;

1.6
date	97.01.03.03.04.00;	author etheisen;	state Exp;
branches;
next	1.5;

1.5
date	96.10.12.21.27.50;	author niklas;	state Exp;
branches;
next	1.4;

1.4
date	96.06.02.05.44.18;	author tholo;	state Exp;
branches;
next	1.3;

1.3
date	96.03.09.09.16.46;	author niklas;	state Exp;
branches;
next	1.2;

1.2
date	96.03.09.01.33.30;	author niklas;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.49.10;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.49.10;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.18
log
@In 1995, all of the games were setuid games.  At end of 1996, I took them all
to setgid games, and we started wittling them down.  Nearly 10 years later I
am removing all setgid from the games.  If any of these have score files they
are now broken, and I hope various folk repair them.  I have argued for years
(and received pushback...) that the score file features must be removed, or
rewritten to use private files, because setgid is the wrong tool.
ok tedu
@
text
@#	$OpenBSD: Makefile,v 1.17 2011/06/23 22:46:12 schwarze Exp $

PROG=	phantasia
SRCS=	main.c fight.c io.c interplayer.c gamesupport.c misc.c phantglobs.c
CFLAGS+=-DTERMIOS
DPADD=	${LIBM} ${LIBCURSES}
LDADD=	-lm -lcurses
MAN=	phantasia.6
CLEANFILES+=map setup setup.o phantglobs.o.bld phantasia.6

all: setup phantasia

setup.o: setup.c
	${HOSTCC} -c ${CFLAGS} -o ${.TARGET} ${.CURDIR}/setup.c

phantglobs.o.bld: phantglobs.c
	${HOSTCC} -c ${CFLAGS} -o ${.TARGET} ${.CURDIR}/phantglobs.c

setup: phantglobs.o.bld setup.o monsters.asc ${DPADD} 
	${HOSTCC} ${CFLAGS} ${LDFLAGS} ${LDSTATIC} -o ${.TARGET} \
		  phantglobs.o.bld setup.o ${LDADD}

phantasia.6: phantasia.6tbl
	cp ${.ALLSRC} ${.TARGET}

beforeinstall: 
	./setup -m ${.CURDIR}/monsters.asc
	chown root:games ${DESTDIR}/var/games/phantasia/*

# Make Phantasia map.  Change the map commands reflect your installation.
# PLOTDEVICE is used for plotting the map.  Change as appropriate.

map: map.c
	${HOSTCC} -O ${.CURDIR}/map.c -lplot -o ${.TARGET}
	./map | plot > /dev/tty

.include <bsd.prog.mk>
@


1.17
log
@switch to installing source manuals (base part)
discussed with lots of people, tested by naddy@@,
"move fast" deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.16 2004/11/11 16:39:00 jolan Exp $
a7 1
BINMODE=2555
@


1.16
log
@this needs to be sgid games
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.15 2003/04/08 20:42:42 millert Exp $
d10 1
a10 1
CLEANFILES+=map setup setup.o phantglobs.o.bld
d23 3
@


1.15
log
@Use POSIX chown semantics (user:group); noted by Leandro Costa
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.14 2002/05/23 18:43:00 deraadt Exp $
d8 1
@


1.14
log
@The troll strikes.. The troll strikes.. The dungeon master dies.distrib/sets/lists
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.13 1998/11/29 19:56:54 pjanzen Exp $
d25 1
a25 1
	chown root.games ${DESTDIR}/var/games/phantasia/*
@


1.13
log
@NetBSD merge (mainly -Wall related)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.12 1998/07/24 00:10:36 millert Exp $
a7 1
HIDEGAME=hidegame
@


1.12
log
@-lcurses, not termcap/termlib
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.11 1998/07/10 09:46:44 downsj Exp $
d6 2
a7 2
DPADD=	${LIBM} ${LIBCURSES} ${LIBCOMPAT}
LDADD=	-lm -lcurses -lcompat
@


1.11
log
@Ok, so I was bored and couldn't sleep...

Make this sucker work with decent terminal settings.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.10 1997/09/21 11:36:29 deraadt Exp $
d6 2
a7 2
DPADD=	${LIBM} ${LIBCURSES} ${LIBTERMLIB} ${LIBCOMPAT}
LDADD=	-lm -lcurses -ltermlib -lcompat
@


1.10
log
@$OpenBSD$
@
text
@d1 1
a1 1
#	$OpenBSD$
d5 1
@


1.9
log
@The /var/games/phantasia/* files should be root.games
@
text
@d1 1
a1 3
#	$OpenBSD: Makefile,v 1.8 1997/04/01 19:54:26 mickey Exp $
#	$NetBSD: Makefile,v 1.4 1995/03/24 03:58:22 cgd Exp $
#	@@(#)Makefile	8.1 (Berkeley) 5/31/93
@


1.8
log
@depend on DPADD, not only one lib
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 1997/02/28 10:18:41 downsj Exp $
d27 1
a27 1
	chown root.bin ${DESTDIR}/var/games/phantasia/*
@


1.7
log
@phantasia.6 -> phantasia.6tbl
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.6 1997/01/03 03:04:00 etheisen Exp $
d21 1
a21 1
setup: phantglobs.o.bld setup.o monsters.asc ${LIBM} 
@


1.6
log
@root NOT games.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.5 1996/10/12 21:27:50 niklas Exp $
a34 4

# XXX this rule shouldn't be here.
phantasia.cat6: phantasia.6
	tbl ${.CURDIR}/phantasia.6 | nroff -man > ${.TARGET}
@


1.5
log
@clean better
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 1996/06/02 05:44:18 tholo Exp $
d27 1
a27 1
	chown games.bin ${DESTDIR}/var/games/phantasia/*
@


1.4
log
@Always use -ltermlib when linking with -lcurses
Depend on LIBTERMCAP and LIBTERMLIB as appropriate
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.3 1996/03/09 09:16:46 niklas Exp $
d11 1
a11 1
CLEANFILES+=map setup setup.o
@


1.3
log
@Make building with ${HOSTCC} work in obj-dirs
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.2 1996/03/09 01:33:30 niklas Exp $
d7 1
a7 1
DPADD=	${LIBM} ${LIBCURSES} ${LIBTERM} ${LIBCOMPAT}
@


1.2
log
@Rudimentary support for compilation in a cross environment
Host tools will be compiled with HOSTCC instead of CC.
Note, these are not complete in *any* way\!
@
text
@d1 1
a1 1
#	$OpenBSD$
d16 1
a16 1
	${HOSTCC} -c setup.c -o ${.TARGET}
d19 1
a19 1
	${HOSTCC} -c phantglobs.c -o ${.TARGET}
d22 2
a23 1
	${HOSTCC} phantglobs.o.bld setup.o -o ${.TARGET} -lm
@


1.1
log
@Initial revision
@
text
@d1 1
d15 8
a22 2
setup: phantglobs.o setup.o monsters.asc ${LIBM} 
	${CC} phantglobs.o setup.o -o ${.TARGET} -lm
d32 1
a32 1
	${CC} -O ${.CURDIR}/map.c -lplot -o ${.TARGET}
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
