head	1.15;
access;
symbols
	OPENBSD_6_1:1.14.0.8
	OPENBSD_6_1_BASE:1.14
	OPENBSD_6_0:1.14.0.4
	OPENBSD_6_0_BASE:1.14
	OPENBSD_5_9:1.14.0.2
	OPENBSD_5_9_BASE:1.14
	OPENBSD_5_8:1.13.0.56
	OPENBSD_5_8_BASE:1.13
	OPENBSD_5_7:1.13.0.48
	OPENBSD_5_7_BASE:1.13
	OPENBSD_5_6:1.13.0.52
	OPENBSD_5_6_BASE:1.13
	OPENBSD_5_5:1.13.0.50
	OPENBSD_5_5_BASE:1.13
	OPENBSD_5_4:1.13.0.46
	OPENBSD_5_4_BASE:1.13
	OPENBSD_5_3:1.13.0.44
	OPENBSD_5_3_BASE:1.13
	OPENBSD_5_2:1.13.0.42
	OPENBSD_5_2_BASE:1.13
	OPENBSD_5_1_BASE:1.13
	OPENBSD_5_1:1.13.0.40
	OPENBSD_5_0:1.13.0.38
	OPENBSD_5_0_BASE:1.13
	OPENBSD_4_9:1.13.0.36
	OPENBSD_4_9_BASE:1.13
	OPENBSD_4_8:1.13.0.34
	OPENBSD_4_8_BASE:1.13
	OPENBSD_4_7:1.13.0.30
	OPENBSD_4_7_BASE:1.13
	OPENBSD_4_6:1.13.0.32
	OPENBSD_4_6_BASE:1.13
	OPENBSD_4_5:1.13.0.28
	OPENBSD_4_5_BASE:1.13
	OPENBSD_4_4:1.13.0.26
	OPENBSD_4_4_BASE:1.13
	OPENBSD_4_3:1.13.0.24
	OPENBSD_4_3_BASE:1.13
	OPENBSD_4_2:1.13.0.22
	OPENBSD_4_2_BASE:1.13
	OPENBSD_4_1:1.13.0.20
	OPENBSD_4_1_BASE:1.13
	OPENBSD_4_0:1.13.0.18
	OPENBSD_4_0_BASE:1.13
	OPENBSD_3_9:1.13.0.16
	OPENBSD_3_9_BASE:1.13
	OPENBSD_3_8:1.13.0.14
	OPENBSD_3_8_BASE:1.13
	OPENBSD_3_7:1.13.0.12
	OPENBSD_3_7_BASE:1.13
	OPENBSD_3_6:1.13.0.10
	OPENBSD_3_6_BASE:1.13
	OPENBSD_3_5:1.13.0.8
	OPENBSD_3_5_BASE:1.13
	OPENBSD_3_4:1.13.0.6
	OPENBSD_3_4_BASE:1.13
	OPENBSD_3_3:1.13.0.4
	OPENBSD_3_3_BASE:1.13
	OPENBSD_3_2:1.13.0.2
	OPENBSD_3_2_BASE:1.13
	OPENBSD_3_1:1.10.0.16
	OPENBSD_3_1_BASE:1.10
	OPENBSD_3_0:1.10.0.14
	OPENBSD_3_0_BASE:1.10
	OPENBSD_2_9:1.10.0.12
	OPENBSD_2_9_BASE:1.10
	OPENBSD_2_8:1.10.0.10
	OPENBSD_2_8_BASE:1.10
	OPENBSD_2_7:1.10.0.8
	OPENBSD_2_7_BASE:1.10
	OPENBSD_2_6:1.10.0.6
	OPENBSD_2_6_BASE:1.10
	OPENBSD_2_5:1.10.0.4
	OPENBSD_2_5_BASE:1.10
	OPENBSD_2_4:1.10.0.2
	OPENBSD_2_4_BASE:1.10
	OPENBSD_2_3:1.9.0.4
	OPENBSD_2_3_BASE:1.9
	OPENBSD_2_2:1.9.0.2
	OPENBSD_2_2_BASE:1.9
	OPENBSD_2_1:1.8.0.2
	OPENBSD_2_1_BASE:1.8
	OPENBSD_2_0:1.3.0.2
	OPENBSD_2_0_BASE:1.3
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.15
date	2017.07.01.14.37.25;	author espie;	state Exp;
branches;
next	1.14;
commitid	0LOHyQtDXuwzAL0c;

1.14
date	2015.11.24.03.10.10;	author deraadt;	state Exp;
branches;
next	1.13;
commitid	NZfzN0SfUUHBE4HF;

1.13
date	2002.05.31.03.46.35;	author pjanzen;	state Exp;
branches;
next	1.12;

1.12
date	2002.05.23.18.43.00;	author deraadt;	state Exp;
branches;
next	1.11;

1.11
date	2002.05.11.00.20.18;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	98.07.24.00.10.29;	author millert;	state Exp;
branches;
next	1.9;

1.9
date	97.09.21.11.36.06;	author deraadt;	state Exp;
branches;
next	1.8;

1.8
date	97.04.27.20.55.44;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	97.03.28.18.51.47;	author tholo;	state Exp;
branches;
next	1.6;

1.6
date	97.01.17.07.51.06;	author millert;	state Exp;
branches;
next	1.5;

1.5
date	97.01.03.03.03.59;	author etheisen;	state Exp;
branches;
next	1.4;

1.4
date	96.12.08.15.36.16;	author downsj;	state Exp;
branches;
next	1.3;

1.3
date	96.06.02.05.44.16;	author tholo;	state Exp;
branches;
next	1.2;

1.2
date	96.03.09.01.33.28;	author niklas;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.48.58;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.48.58;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.15
log
@missed BUILDFIRST. Allow stuff to proceed without depends
as found by krw@@
@
text
@#	$OpenBSD: Makefile,v 1.14 2015/11/24 03:10:10 deraadt Exp $

PROG=	hack
CFLAGS+=-I.
SRCS+=	hack.onames.h
SRCS+=	alloc.c hack.Decl.c hack.apply.c hack.bones.c hack.c hack.cmd.c \
	hack.do.c hack.do_name.c hack.do_wear.c hack.dog.c hack.eat.c \
	hack.end.c hack.engrave.c hack.fight.c hack.invent.c hack.ioctl.c \
	hack.lev.c hack.main.c hack.makemon.c hack.mhitu.c hack.mklev.c \
	hack.mkmaze.c hack.mkobj.c hack.mkshop.c hack.mon.c hack.monst.c \
	hack.o_init.c hack.objnam.c hack.options.c hack.pager.c hack.potion.c \
	hack.pri.c hack.read.c hack.rip.c hack.rumors.c hack.save.c \
	hack.search.c hack.shk.c hack.shknam.c hack.steal.c hack.termcap.c \
	hack.timeout.c hack.topl.c hack.track.c hack.trap.c hack.tty.c \
	hack.u_init.c hack.unix.c hack.vault.c hack.version.c hack.wield.c \
	hack.wizard.c hack.worm.c hack.worn.c hack.zap.c rnd.c
MAN=	hack.6
DPADD+=	${LIBCURSES}
LDADD+=	-lcurses
CLEANFILES+=hack.onames.h makedefs

BUILDFIRST = hack.onames.h

hack.onames.h: makedefs def.objects.h
	${.OBJDIR}/makedefs ${.CURDIR}/def.objects.h > hack.onames.h

makedefs: makedefs.c
	${HOSTCC} ${CFLAGS} ${LDFLAGS} ${LDSTATIC} -o ${.TARGET} ${.CURDIR}/${.PREFIX}.c ${LDADD}

beforeinstall: 
	${INSTALL} ${INSTALL_COPY} -o root -g games -m 660 /dev/null \
	    ${DESTDIR}/var/games/hackdir/perm
	${INSTALL} ${INSTALL_COPY} -o root -g games -m 660 /dev/null \
	    ${DESTDIR}/var/games/hackdir/record
	${INSTALL} ${INSTALL_COPY} -o ${BINOWN} -g ${BINGRP} -m 444 ${.CURDIR}/help \
	    ${.CURDIR}/hh ${.CURDIR}/data ${DESTDIR}/var/games/hackdir
	rm -f ${DESTDIR}/var/games/hackdir/bones*

.include <bsd.prog.mk>
@


1.14
log
@In 1995, all of the games were setuid games.  At end of 1996, I took them all
to setgid games, and we started wittling them down.  Nearly 10 years later I
am removing all setgid from the games.  If any of these have score files they
are now broken, and I hope various folk repair them.  I have argued for years
(and received pushback...) that the score file features must be removed, or
rewritten to use private files, because setgid is the wrong tool.
ok tedu
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.13 2002/05/31 03:46:35 pjanzen Exp $
d22 1
a22 1
${PROG}: hack.onames.h
@


1.13
log
@No dm -> games with high score files etc. must explicitly be setgid games.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.12 2002/05/23 18:43:00 deraadt Exp $
a20 1
BINMODE=2555
@


1.12
log
@The troll strikes.. The troll strikes.. The dungeon master dies.distrib/sets/lists
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.11 2002/05/11 00:20:18 espie Exp $
d21 1
@


1.11
log
@Add missing libraries to bsd.prog.mk (mostly kerberosV)
Use them in DPADD throughout the tree.
Fix a few mispells (LIBMATH -> LIBM...)
Wipe obsolete lib (LIBRESOLV)
Sort added missing libraries, move obsolete stuff apart.
Synch documentation in bsd.README

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.10 1998/07/24 00:10:29 millert Exp $
a19 1
HIDEGAME=hidegame
@


1.10
log
@-lcurses, not termcap/termlib
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.9 1997/09/21 11:36:06 deraadt Exp $
d18 1
a18 1
DPADD+=	${LIBCURSES} ${LIBCOMPAT}
@


1.9
log
@$OpenBSD$
@
text
@d1 1
a1 1
#	$OpenBSD$
d18 2
a19 2
DPADD+=	${LIBTERMCAP} ${LIBCOMPAT}
LDADD+=	-ltermcap
@


1.8
log
@COPY -> INSTALL_COPY and STRIP -> INSTALL_STRIP
This fixes namespace problems where STRIP is sometimes used as
the name of the strip(1) to use and other times used as
the flag to send install(1) when stripping (or not).
COPY doesn't have this problem (yet) but was poorly named.
@
text
@d1 1
a1 2
#	$OpenBSD: Makefile,v 1.7 1997/03/28 18:51:47 tholo Exp $
#	@@(#)Makefile	8.1 (Berkeley) 5/31/93
@


1.7
log
@Log and score file needs to be group writeable
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.6 1997/01/17 07:51:06 millert Exp $
d33 1
a33 1
	${INSTALL} ${COPY} -o root -g games -m 660 /dev/null \
d35 1
a35 1
	${INSTALL} ${COPY} -o root -g games -m 660 /dev/null \
d37 1
a37 1
	${INSTALL} ${COPY} -o ${BINOWN} -g ${BINGRP} -m 444 ${.CURDIR}/help \
@


1.6
log
@no need to link with -lcompat
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.5 1997/01/03 03:03:59 etheisen Exp $
d33 1
a33 1
	${INSTALL} ${COPY} -o root -g games -m 600 /dev/null \
d35 1
a35 1
	${INSTALL} ${COPY} -o root -g games -m 600 /dev/null \
@


1.5
log
@root NOT games.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 1996/12/08 15:36:16 downsj Exp $
d20 1
a20 1
LDADD+=	-ltermcap -lcompat
@


1.4
log
@install -> ${INSTALL}, -c -> ${COPY}
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.3 1996/06/02 05:44:16 tholo Exp $
d33 1
a33 1
	${INSTALL} ${COPY} -o games -g games -m 600 /dev/null \
d35 1
a35 1
	${INSTALL} ${COPY} -o games -g games -m 600 /dev/null \
@


1.3
log
@Always use -ltermlib when linking with -lcurses
Depend on LIBTERMCAP and LIBTERMLIB as appropriate
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.2 1996/03/09 01:33:28 niklas Exp $
d33 1
a33 1
	install -c -o games -g games -m 600 /dev/null \
d35 1
a35 1
	install -c -o games -g games -m 600 /dev/null \
d37 1
a37 1
	install -c -o ${BINOWN} -g ${BINGRP} -m 444 ${.CURDIR}/help \
@


1.2
log
@Rudimentary support for compilation in a cross environment
Host tools will be compiled with HOSTCC instead of CC.
Note, these are not complete in *any* way\!
@
text
@d1 1
a1 1
#	$OpenBSD$
d19 1
a19 1
DPADD+=	${LIBTERM} ${LIBCOMPAT}
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
#	$NetBSD: Makefile,v 1.16 1995/03/23 08:29:07 cgd Exp $
d30 1
a30 1
	${CC} ${CFLAGS} ${LDFLAGS} ${LDSTATIC} -o ${.TARGET} ${.CURDIR}/${.PREFIX}.c ${LDADD}
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
