head	1.15;
access;
symbols
	OPENBSD_3_2:1.14.0.2
	OPENBSD_3_2_BASE:1.14
	OPENBSD_3_1:1.12.0.8
	OPENBSD_3_1_BASE:1.12
	OPENBSD_3_0:1.12.0.6
	OPENBSD_3_0_BASE:1.12
	OPENBSD_2_9:1.12.0.4
	OPENBSD_2_9_BASE:1.12
	OPENBSD_2_8:1.12.0.2
	OPENBSD_2_8_BASE:1.12
	OPENBSD_2_7:1.11.0.6
	OPENBSD_2_7_BASE:1.11
	OPENBSD_2_6:1.11.0.4
	OPENBSD_2_6_BASE:1.11
	OPENBSD_2_5:1.11.0.2
	OPENBSD_2_5_BASE:1.11
	OPENBSD_2_4:1.8.0.2
	OPENBSD_2_4_BASE:1.8
	OPENBSD_2_3:1.5.0.4
	OPENBSD_2_3_BASE:1.5
	OPENBSD_2_2:1.5.0.2
	OPENBSD_2_2_BASE:1.5
	OPENBSD_2_1:1.4.0.2
	OPENBSD_2_1_BASE:1.4
	OPENBSD_2_0:1.2.0.2
	OPENBSD_2_0_BASE:1.2
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.15
date	2003.03.11.09.29.28;	author deraadt;	state dead;
branches;
next	1.14;

1.14
date	2002.05.31.03.46.35;	author pjanzen;	state Exp;
branches;
next	1.13;

1.13
date	2002.05.23.18.43.00;	author deraadt;	state Exp;
branches;
next	1.12;

1.12
date	2000.06.29.07.55.39;	author pjanzen;	state Exp;
branches;
next	1.11;

1.11
date	99.03.27.03.45.49;	author pjanzen;	state Exp;
branches;
next	1.10;

1.10
date	99.01.01.17.47.17;	author millert;	state Exp;
branches;
next	1.9;

1.9
date	98.12.31.23.43.04;	author millert;	state Exp;
branches;
next	1.8;

1.8
date	98.10.01.05.31.38;	author pjanzen;	state Exp;
branches;
next	1.7;

1.7
date	98.09.15.05.12.30;	author pjanzen;	state Exp;
branches;
next	1.6;

1.6
date	98.07.24.00.10.33;	author millert;	state Exp;
branches;
next	1.5;

1.5
date	97.09.21.11.36.13;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	97.04.27.20.55.45;	author millert;	state Exp;
branches;
next	1.3;

1.3
date	96.12.08.15.36.16;	author downsj;	state Exp;
branches;
next	1.2;

1.2
date	96.06.02.05.44.17;	author tholo;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.49.04;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.49.04;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.15
log
@OK, this is a strange case.  At least some parts of this software is
copyrighted, and then marked "Copying for Profit is Prohibited", but
the author has passed away.  A number of people have tried to make
some sort of effort at trying to contact his estate, and have failed.
Therefore, lacking the ability to correct this copyright, we must
delete it.  I would bet strongly that this is not what the author
would have intended, but until we can get this resolved, this is the
action we must take.
@
text
@#	$OpenBSD: Makefile,v 1.14 2002/05/31 03:46:35 pjanzen Exp $

# EXTRA
#	Incorporates code to gather additional performance statistics
# TERMIO
#	Use sysv termio
# TERMIOS
#	Use posix termios
# DOCHECKPOINTS
#	If not defined, checkpoint files are periodically written by the
#	larn process (no forking) if enabled in the .larnopts description
#	file.  Checkpointing is handy on an unreliable system, but takes
#	CPU. Inclusion of DOCHECKPOINTS will cause fork()ing to perform the
#	checkpoints (again if enabled in the .larnopts file).  This usually
#	avoids pauses in larn while the checkpointing is being done (on
#	large machines).
# VER
#	This is the version of the software, example:  12
# SUBVER
#	This is the revision of the software, example:  1
# FLUSHNO=#
#	Set the input queue excess flushing threshold (default 5)
# NOVARARGS
#	Define for systems that don't have varargs (a default varargs will
#	be used).
# MACRORND
#	Define to use macro version of rnd() and rund() (fast and big)
# UIDSCORE
#	Define to use user id's to manage scoreboard.  Leaving this out will
#	cause player id's from the file ".playerids" to be used instead.
#	(.playerids is created upon demand).  Only one entry per id # is
#	allowed in each scoreboard (winning & non-winning).
# NONAP
#	This causes napms() to return immediately instead of delaying n
#	milliseconds.  This define may be needed on some systems if the nap
#	stuff does not work correctly (possible hang).  nap() is primarilly
#	used to delay for effect when casting missile type spells.
# NOLOG
#	Turn off logging.
# NOSPAM
#	Don't send e-mail to players once they've won.

PROG=	larn
MAN=	larn.6
CFLAGS+=-DVER=12 -DSUBVER=0 -DNONAP -DUIDSCORE -DTERMIOS
SRCS=	main.c object.c create.c tok.c display.c global.c data.c io.c \
	monster.c store.c diag.c help.c config.c nap.c bill.c scores.c \
	signal.c moreobj.c movem.c regen.c fortune.c savelev.c
DPADD=	${LIBCURSES}
LDADD=	-lcurses
BINMODE=2555

beforeinstall:
	(cd ${.CURDIR}/datfiles; ${INSTALL} ${INSTALL_COPY} -o ${BINOWN} -g ${BINGRP} \
	    -m 444 larnmaze larnopts larn.help \
	    ${DESTDIR}/usr/share/games/larn)
	${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 660 /dev/null \
	    ${DESTDIR}/var/games/larn/lscore12.0
	${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 660 /dev/null \
	    ${DESTDIR}/var/games/larn/llog12.0

.include <bsd.prog.mk>
@


1.14
log
@No dm -> games with high score files etc. must explicitly be setgid games.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.13 2002/05/23 18:43:00 deraadt Exp $
@


1.13
log
@The troll strikes.. The troll strikes.. The dungeon master dies.distrib/sets/lists
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.12 2000/06/29 07:55:39 pjanzen Exp $
d51 1
@


1.12
log
@Prune some obsolete defines, in particular VT100.  Eventually curses will
  replace termios.
Use system-defined limits for path lengths and usernames.
Use strlcpy() for convenience and to avoid a possible buffer overflow or two.
Various small tweaks.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.11 1999/03/27 03:45:49 pjanzen Exp $
a50 1
HIDEGAME=hidegame
@


1.11
log
@Changes from FreeBSD:  install score files, use random(), and be more careful
on exec.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.10 1999/01/01 17:47:17 millert Exp $
a8 7
# BSD
#	Use BSD specific features (mostly timer and signal stuff)
# BSD4.1
#	Use BSD4.1 to avoid some 4.2 dependencies (must be used with
#	BSD above; do not mix with SYSV)
# HIDEBYLINK
#	If defined, the program attempts to hide from ps
a32 8
# VT100
#	Compile for using vt100 family of terminals.  Omission of this
#	define will cause larn to use termcap, but it will be MUCH slower
#	due to an extra layer of output interpretation.  Also, only VT100
#	mode allows 2 different standout modes, inverse video, and bold video.
#	And only in VT100 mode is the scrolling region of the terminal used
#	(much nicer than insert/delete line sequences to simulate it, if
#	VT100 is omitted).
d45 1
a45 1
CFLAGS+=-DBSD -DVER=12 -DSUBVER=0 -DNONAP -DUIDSCORE -DTERMIOS
@


1.10
log
@typo
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.9 1998/12/31 23:43:04 millert Exp $
d72 4
@


1.9
log
@Add ${PIPE}; evanc@@concer.to
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 1998/10/01 05:31:38 pjanzen Exp $
d60 1
a60 1
CFLAGS=+-DBSD -DVER=12 -DSUBVER=0 -DNONAP -DUIDSCORE -DTERMIOS
@


1.8
log
@'Spam' winners a bit more safely
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 1998/09/15 05:12:30 pjanzen Exp $
d60 1
a60 1
CFLAGS=-DBSD -DVER=12 -DSUBVER=0 -DNONAP -DUIDSCORE -DTERMIOS
@


1.7
log
@NetBSD merge; also renamed some functions so as not to conflict with curses
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.6 1998/07/24 00:10:33 millert Exp $
d40 1
a40 1
#  VT100
d55 2
@


1.6
log
@-lcurses, not termcap/termlib
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.5 1997/09/21 11:36:13 deraadt Exp $
d5 4
a8 2
# SYSV
#	Use system III/V (instead of V7) type ioctl calls
d58 1
a58 1
CFLAGS+=-DBSD -DVER=12 -DSUBVER=0 -DNONAP -DUIDSCORE
d62 2
a63 2
DPADD=	${LIBCURSES} ${LIBCOMPAT}
LDADD=	-lcurses -lcompat
@


1.5
log
@$OpenBSD$
@
text
@d1 1
a1 1
#	$OpenBSD$
d60 2
a61 2
DPADD=	${LIBTERMCAP} ${LIBCOMPAT}
LDADD=	-ltermcap -lcompat
@


1.4
log
@COPY -> INSTALL_COPY and STRIP -> INSTALL_STRIP
This fixes namespace problems where STRIP is sometimes used as
the name of the strip(1) to use and other times used as
the flag to send install(1) when stripping (or not).
COPY doesn't have this problem (yet) but was poorly named.
@
text
@d1 1
a1 3
#	$OpenBSD: Makefile,v 1.3 1996/12/08 15:36:16 downsj Exp $
#	$NetBSD: Makefile,v 1.8 1995/04/22 07:34:00 cgd Exp $
#	@@(#)Makefile	5.12 (Berkeley) 5/30/93
@


1.3
log
@install -> ${INSTALL}, -c -> ${COPY}
@
text
@d1 1
a1 1
#	$OpenBSD$
d67 1
a67 1
	(cd ${.CURDIR}/datfiles; ${INSTALL} ${COPY} -o ${BINOWN} -g ${BINGRP} \
@


1.2
log
@Always use -ltermlib when linking with -lcurses
Depend on LIBTERMCAP and LIBTERMLIB as appropriate
@
text
@d1 1
d67 2
a68 2
	(cd ${.CURDIR}/datfiles; install -c -o ${BINOWN} -g ${BINGRP} -m 444 \
	    larnmaze larnopts larn.help \
@


1.1
log
@Initial revision
@
text
@d61 1
a61 1
DPADD=	${LIBTERM} ${LIBCOMPAT}
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
