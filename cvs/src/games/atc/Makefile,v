head	1.16;
access;
symbols
	OPENBSD_6_2:1.16.0.6
	OPENBSD_6_2_BASE:1.16
	OPENBSD_6_1:1.16.0.8
	OPENBSD_6_1_BASE:1.16
	OPENBSD_6_0:1.16.0.4
	OPENBSD_6_0_BASE:1.16
	OPENBSD_5_9:1.16.0.2
	OPENBSD_5_9_BASE:1.16
	OPENBSD_5_8:1.14.0.40
	OPENBSD_5_8_BASE:1.14
	OPENBSD_5_7:1.14.0.32
	OPENBSD_5_7_BASE:1.14
	OPENBSD_5_6:1.14.0.36
	OPENBSD_5_6_BASE:1.14
	OPENBSD_5_5:1.14.0.34
	OPENBSD_5_5_BASE:1.14
	OPENBSD_5_4:1.14.0.30
	OPENBSD_5_4_BASE:1.14
	OPENBSD_5_3:1.14.0.28
	OPENBSD_5_3_BASE:1.14
	OPENBSD_5_2:1.14.0.26
	OPENBSD_5_2_BASE:1.14
	OPENBSD_5_1_BASE:1.14
	OPENBSD_5_1:1.14.0.24
	OPENBSD_5_0:1.14.0.22
	OPENBSD_5_0_BASE:1.14
	OPENBSD_4_9:1.14.0.20
	OPENBSD_4_9_BASE:1.14
	OPENBSD_4_8:1.14.0.18
	OPENBSD_4_8_BASE:1.14
	OPENBSD_4_7:1.14.0.14
	OPENBSD_4_7_BASE:1.14
	OPENBSD_4_6:1.14.0.16
	OPENBSD_4_6_BASE:1.14
	OPENBSD_4_5:1.14.0.12
	OPENBSD_4_5_BASE:1.14
	OPENBSD_4_4:1.14.0.10
	OPENBSD_4_4_BASE:1.14
	OPENBSD_4_3:1.14.0.8
	OPENBSD_4_3_BASE:1.14
	OPENBSD_4_2:1.14.0.6
	OPENBSD_4_2_BASE:1.14
	OPENBSD_4_1:1.14.0.4
	OPENBSD_4_1_BASE:1.14
	OPENBSD_4_0:1.14.0.2
	OPENBSD_4_0_BASE:1.14
	OPENBSD_3_9:1.13.0.12
	OPENBSD_3_9_BASE:1.13
	OPENBSD_3_8:1.13.0.10
	OPENBSD_3_8_BASE:1.13
	OPENBSD_3_7:1.13.0.8
	OPENBSD_3_7_BASE:1.13
	OPENBSD_3_6:1.13.0.6
	OPENBSD_3_6_BASE:1.13
	OPENBSD_3_5:1.13.0.4
	OPENBSD_3_5_BASE:1.13
	OPENBSD_3_4:1.13.0.2
	OPENBSD_3_4_BASE:1.13
	OPENBSD_3_3:1.12.0.4
	OPENBSD_3_3_BASE:1.12
	OPENBSD_3_2:1.12.0.2
	OPENBSD_3_2_BASE:1.12
	OPENBSD_3_1:1.10.0.6
	OPENBSD_3_1_BASE:1.10
	OPENBSD_3_0:1.10.0.4
	OPENBSD_3_0_BASE:1.10
	OPENBSD_2_9:1.10.0.2
	OPENBSD_2_9_BASE:1.10
	OPENBSD_2_8:1.9.0.10
	OPENBSD_2_8_BASE:1.9
	OPENBSD_2_7:1.9.0.8
	OPENBSD_2_7_BASE:1.9
	OPENBSD_2_6:1.9.0.6
	OPENBSD_2_6_BASE:1.9
	OPENBSD_2_5:1.9.0.4
	OPENBSD_2_5_BASE:1.9
	OPENBSD_2_4:1.9.0.2
	OPENBSD_2_4_BASE:1.9
	OPENBSD_2_3:1.7.0.4
	OPENBSD_2_3_BASE:1.7
	OPENBSD_2_2:1.7.0.2
	OPENBSD_2_2_BASE:1.7
	OPENBSD_2_1:1.4.0.2
	OPENBSD_2_1_BASE:1.4
	OPENBSD_2_0:1.2.0.2
	OPENBSD_2_0_BASE:1.2
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@# @;


1.16
date	2015.11.25.23.18.11;	author deraadt;	state Exp;
branches;
next	1.15;
commitid	ZTjVHfaI1O8Sysk7;

1.15
date	2015.11.24.03.10.09;	author deraadt;	state Exp;
branches;
next	1.14;
commitid	NZfzN0SfUUHBE4HF;

1.14
date	2006.06.30.19.10.23;	author otto;	state Exp;
branches;
next	1.13;

1.13
date	2003.04.10.16.31.02;	author millert;	state Exp;
branches;
next	1.12;

1.12
date	2002.05.31.03.46.32;	author pjanzen;	state Exp;
branches;
next	1.11;

1.11
date	2002.05.23.18.43.00;	author deraadt;	state Exp;
branches;
next	1.10;

1.10
date	2001.02.04.02.15.28;	author pjanzen;	state Exp;
branches;
next	1.9;

1.9
date	98.09.21.07.36.04;	author pjanzen;	state Exp;
branches;
next	1.8;

1.8
date	98.07.24.00.10.15;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	97.09.21.11.35.18;	author deraadt;	state Exp;
branches;
next	1.6;

1.6
date	97.06.18.18.32.43;	author kstailey;	state Exp;
branches;
next	1.5;

1.5
date	97.06.18.16.43.46;	author kstailey;	state Exp;
branches;
next	1.4;

1.4
date	97.04.27.20.55.40;	author millert;	state Exp;
branches;
next	1.3;

1.3
date	96.12.08.15.36.11;	author downsj;	state Exp;
branches;
next	1.2;

1.2
date	96.06.02.05.44.14;	author tholo;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.48.37;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.48.37;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.16
log
@Remove operations that "touch" scorefiles at install time.
@
text
@#	$OpenBSD: Makefile,v 1.15 2015/11/24 03:10:09 deraadt Exp $

PROG=	atc
CFLAGS+=-I${.CURDIR} -I.
SRCS=	extern.c grammar.y graphics.c input.c lex.l list.c log.c \
	main.c update.c
MAN=	atc.6
LDADD=	-ll -lm -lcurses
DPADD=	${LIBL} ${LIBM} ${LIBCURSES}
GAMES=	Game_List Killer crossover default easy game_2 \
	Atlantis OHare Tic-Tac-Toe airports box crosshatch game_3 \
	game_4 novice two-corners

beforeinstall: 
	@@if [ ! -d ${DESTDIR}/usr/share/games/atc ]; then \
                /bin/rm -f ${DESTDIR}/usr/share/games/atc ; \
                mkdir -p ${DESTDIR}/usr/share/games/atc ; \
                chown root:wheel ${DESTDIR}/usr/share/games/atc ; \
                chmod 755 ${DESTDIR}/usr/share/games/atc ; \
        else \
                true ; \
        fi
	(cd ${.CURDIR}/games; ${INSTALL} ${INSTALL_COPY} \
	    -o ${BINOWN} -g ${BINGRP} \
	    -m 444 ${GAMES} ${DESTDIR}/usr/share/games/atc)

.include <bsd.prog.mk>
@


1.15
log
@In 1995, all of the games were setuid games.  At end of 1996, I took them all
to setgid games, and we started wittling them down.  Nearly 10 years later I
am removing all setgid from the games.  If any of these have score files they
are now broken, and I hope various folk repair them.  I have argued for years
(and received pushback...) that the score file features must be removed, or
rewritten to use private files, because setgid is the wrong tool.
ok tedu
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.14 2006/06/30 19:10:23 otto Exp $
a25 6
	@@if [ ! -f ${DESTDIR}/var/games/atc_score ]; then \
	    ${INSTALL} ${INSTALL_COPY} -o ${BINOWN} -g ${BINGRP} -m 664 \
		/dev/null ${DESTDIR}/var/games/atc_score ; \
	else \
                true ; \
        fi
@


1.14
log
@use .y and .l in SRCS, remove hand-crafted CLEANFILES since this is
now done by bsd.*.mk
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.13 2003/04/10 16:31:02 millert Exp $
a12 1
BINMODE=2555
@


1.13
log
@more POSIX chown; Leandro Costa
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.12 2002/05/31 03:46:32 pjanzen Exp $
d5 1
a5 1
SRCS=	extern.c grammar.c graphics.c input.c lex.c list.c log.c \
a12 1
CLEANFILES=grammar.c y.tab.h lex.c
@


1.12
log
@No dm -> games with high score files etc. must explicitly be setgid games.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.11 2002/05/23 18:43:00 deraadt Exp $
d20 1
a20 1
                chown root.wheel ${DESTDIR}/usr/share/games/atc ; \
@


1.11
log
@The troll strikes.. The troll strikes.. The dungeon master dies.distrib/sets/lists
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.10 2001/02/04 02:15:28 pjanzen Exp $
d14 1
@


1.10
log
@Tidying:  change a constant to a #define, stop logging hostnames with the
score, use strlcpy(), and make it work with long usernames.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.9 1998/09/21 07:36:04 pjanzen Exp $
a13 1
HIDEGAME=hidegame
@


1.9
log
@Cleanup, partially from NetBSD and jsm28@@cam.ac.uk.  No longer segfaults if
scorefile can't be opened.  New -q quiet option.  Partial man page reformat.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 1998/07/24 00:10:15 millert Exp $
d4 1
a4 1
CFLAGS+=-DBSD -I${.CURDIR} -I.
d6 1
a6 1
	main.c tunable.c update.c
@


1.8
log
@-lcurses, not termcap/termlib
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 1997/09/21 11:35:18 deraadt Exp $
d10 1
a10 1
GAMES=	ATC_scores Game_List Killer crossover default easy game_2 \
@


1.7
log
@$OpenBSD$
@
text
@d1 1
a1 1
#	$OpenBSD$
d8 2
a9 2
LDADD=	-ll -lm -lcurses -ltermlib
DPADD=	${LIBL} ${LIBM} ${LIBTERMLIB} ${LIBCURSES}
@


1.6
log
@fix highscore file
@
text
@d1 1
a1 3
#	$OpenBSD: Makefile,v 1.5 1997/06/18 16:43:46 kstailey Exp $
#	$NetBSD: Makefile,v 1.9 1995/03/21 15:03:38 cgd Exp $
#	@@(#)Makefile	8.1 (Berkeley) 5/31/93
@


1.5
log
@kstailey@@cvs(2)$ atc
/usr/share/games/atc/Game_List: Permission denied
(fixed)
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 1997/04/27 20:55:40 millert Exp $
d30 6
@


1.4
log
@COPY -> INSTALL_COPY and STRIP -> INSTALL_STRIP
This fixes namespace problems where STRIP is sometimes used as
the name of the strip(1) to use and other times used as
the flag to send install(1) when stripping (or not).
COPY doesn't have this problem (yet) but was poorly named.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.3 1996/12/08 15:36:11 downsj Exp $
d27 3
a29 2
	(cd ${.CURDIR}/games; ${INSTALL} ${INSTALL_COPY} -o ${BINOWN} -g ${BINGRP} \
	    -m 400 ${GAMES} ${DESTDIR}/usr/share/games/atc)
@


1.3
log
@install -> ${INSTALL}, -c -> ${COPY}
@
text
@d1 1
a1 1
#	$OpenBSD$
d27 1
a27 1
	(cd ${.CURDIR}/games; ${INSTALL} ${COPY} -o ${BINOWN} -g ${BINGRP} \
@


1.2
log
@Always use -ltermlib when linking with -lcurses
Depend on LIBTERMCAP and LIBTERMLIB as appropriate
@
text
@d1 1
d27 2
a28 2
	(cd ${.CURDIR}/games; install -c -o ${BINOWN} -g ${BINGRP} -m 400 \
	    ${GAMES} ${DESTDIR}/usr/share/games/atc)
@


1.1
log
@Initial revision
@
text
@d9 2
a10 2
LDADD=	-ll -lm -lcurses -ltermcap
DPADD=	${LIBL} ${LIBM} ${LIBTERM} ${LIBCURSES}
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
