head	1.20;
access;
symbols
	OPENBSD_6_1:1.20.0.8
	OPENBSD_6_1_BASE:1.20
	OPENBSD_6_0:1.20.0.4
	OPENBSD_6_0_BASE:1.20
	OPENBSD_5_9:1.20.0.2
	OPENBSD_5_9_BASE:1.20
	OPENBSD_5_8:1.16.0.4
	OPENBSD_5_8_BASE:1.16
	OPENBSD_5_7:1.15.0.2
	OPENBSD_5_7_BASE:1.15
	OPENBSD_5_6:1.14.0.32
	OPENBSD_5_6_BASE:1.14
	OPENBSD_5_5:1.14.0.30
	OPENBSD_5_5_BASE:1.14
	OPENBSD_5_4:1.14.0.26
	OPENBSD_5_4_BASE:1.14
	OPENBSD_5_3:1.14.0.24
	OPENBSD_5_3_BASE:1.14
	OPENBSD_5_2:1.14.0.22
	OPENBSD_5_2_BASE:1.14
	OPENBSD_5_1_BASE:1.14
	OPENBSD_5_1:1.14.0.20
	OPENBSD_5_0:1.14.0.18
	OPENBSD_5_0_BASE:1.14
	OPENBSD_4_9:1.14.0.16
	OPENBSD_4_9_BASE:1.14
	OPENBSD_4_8:1.14.0.14
	OPENBSD_4_8_BASE:1.14
	OPENBSD_4_7:1.14.0.10
	OPENBSD_4_7_BASE:1.14
	OPENBSD_4_6:1.14.0.12
	OPENBSD_4_6_BASE:1.14
	OPENBSD_4_5:1.14.0.8
	OPENBSD_4_5_BASE:1.14
	OPENBSD_4_4:1.14.0.6
	OPENBSD_4_4_BASE:1.14
	OPENBSD_4_3:1.14.0.4
	OPENBSD_4_3_BASE:1.14
	OPENBSD_4_2:1.14.0.2
	OPENBSD_4_2_BASE:1.14
	OPENBSD_4_1:1.13.0.14
	OPENBSD_4_1_BASE:1.13
	OPENBSD_4_0:1.13.0.12
	OPENBSD_4_0_BASE:1.13
	OPENBSD_3_9:1.13.0.10
	OPENBSD_3_9_BASE:1.13
	OPENBSD_3_8:1.13.0.8
	OPENBSD_3_8_BASE:1.13
	OPENBSD_3_7:1.13.0.6
	OPENBSD_3_7_BASE:1.13
	OPENBSD_3_6:1.13.0.4
	OPENBSD_3_6_BASE:1.13
	OPENBSD_3_5:1.13.0.2
	OPENBSD_3_5_BASE:1.13
	OPENBSD_3_4:1.12.0.2
	OPENBSD_3_4_BASE:1.12
	OPENBSD_3_3:1.11.0.4
	OPENBSD_3_3_BASE:1.11
	OPENBSD_3_2:1.11.0.2
	OPENBSD_3_2_BASE:1.11
	OPENBSD_3_1:1.10.0.4
	OPENBSD_3_1_BASE:1.10
	OPENBSD_3_0:1.10.0.2
	OPENBSD_3_0_BASE:1.10
	OPENBSD_2_9:1.8.0.8
	OPENBSD_2_9_BASE:1.8
	OPENBSD_2_8:1.8.0.6
	OPENBSD_2_8_BASE:1.8
	OPENBSD_2_7:1.8.0.4
	OPENBSD_2_7_BASE:1.8
	OPENBSD_2_6:1.8.0.2
	OPENBSD_2_6_BASE:1.8
	OPENBSD_2_5:1.6.0.2
	OPENBSD_2_5_BASE:1.6
	OPENBSD_2_4:1.4.0.2
	OPENBSD_2_4_BASE:1.4
	OPENBSD_2_3:1.3.0.4
	OPENBSD_2_3_BASE:1.3
	OPENBSD_2_2:1.3.0.2
	OPENBSD_2_2_BASE:1.3
	OPENBSD_2_1:1.1.1.1.0.4
	OPENBSD_2_1_BASE:1.1.1.1
	OPENBSD_2_0:1.1.1.1.0.2
	OPENBSD_2_0_BASE:1.1.1.1
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@.\" @;


1.20
date	2015.12.04.19.46.04;	author tb;	state Exp;
branches;
next	1.19;
commitid	Rwixrs5EOsBqdMPc;

1.19
date	2015.11.29.14.31.02;	author tb;	state Exp;
branches;
next	1.18;
commitid	JfpmcU0Wot8dMCT8;

1.18
date	2015.11.25.16.15.06;	author tb;	state Exp;
branches;
next	1.17;
commitid	V8FlZEeh2B26Q514;

1.17
date	2015.11.20.07.40.23;	author tb;	state Exp;
branches;
next	1.16;
commitid	axu8igWxJtuLDVUq;

1.16
date	2015.07.27.18.48.04;	author sobrado;	state Exp;
branches;
next	1.15;
commitid	r9qI1nnshjT3yUk6;

1.15
date	2014.09.08.01.27.54;	author schwarze;	state Exp;
branches;
next	1.14;
commitid	cPoapLAXYNe1fcgV;

1.14
date	2007.05.31.19.19.18;	author jmc;	state Exp;
branches;
next	1.13;

1.13
date	2004.01.10.01.23.20;	author tedu;	state Exp;
branches;
next	1.12;

1.12
date	2003.06.03.03.01.41;	author millert;	state Exp;
branches;
next	1.11;

1.11
date	2002.07.26.20.19.22;	author mickey;	state Exp;
branches;
next	1.10;

1.10
date	2001.08.18.03.27.17;	author pjanzen;	state Exp;
branches;
next	1.9;

1.9
date	2001.06.06.20.52.22;	author pjanzen;	state Exp;
branches;
next	1.8;

1.8
date	99.07.03.02.11.12;	author aaron;	state Exp;
branches;
next	1.7;

1.7
date	99.07.02.20.11.52;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	99.03.22.07.38.28;	author pjanzen;	state Exp;
branches;
next	1.5;

1.5
date	98.12.15.19.18.55;	author pjanzen;	state Exp;
branches;
next	1.4;

1.4
date	98.09.24.06.45.07;	author pjanzen;	state Exp;
branches;
next	1.3;

1.3
date	97.08.31.22.22.35;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	97.05.30.07.47.54;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.49.23;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.49.23;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.20
log
@Tweak alignment of ENVIRONMENT and FILES.
Use sentence format for the highscore file, too.

Discussed with jmc@@
@
text
@.\"	$OpenBSD: tetris.6,v 1.19 2015/11/29 14:31:02 tb Exp $
.\"
.\" Copyright (c) 1992, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" This code is derived from software contributed to Berkeley by
.\" Nancy L. Tinkham and Darren F. Provine.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"	@@(#)tetris.6	8.1 (Berkeley) 5/31/93
.\"
.Dd $Mdocdate: November 29 2015 $
.Dt TETRIS 6
.Os
.Sh NAME
.Nm tetris
.Nd the game of tetris
.Sh SYNOPSIS
.Nm tetris
.Op Fl cps
.Op Fl k Ar keys
.Op Fl l Ar level
.Sh DESCRIPTION
The
.Nm
command runs a display-based game.
The object is to fit shapes together to form complete rows,
which then vanish.
When the shapes fill up to the top, the game ends.
You can optionally select a level of play or custom-select control keys.
.Pp
The default level of play is 2.
.Pp
The default control keys are as follows:
.Pp
.Bl -tag -width "<space>" -compact -offset indent
.It j
move left
.It k
rotate 1/4 turn counterclockwise
.It l
move right
.It <space>
drop
.It p
pause
.It q
quit
.El
.Pp
The options are as follows:
.Bl -tag -width indent
.It Fl c
Classic tetris mode, in which shapes rotate clockwise and are drawn with
.Dq [] .
.It Fl k Ar keys
The default control keys can be changed using the
.Fl k
option.
The
.Ar keys
argument must have the six keys in order; remember to quote any
space or tab characters from the shell.
For example:
.sp
.Dl "tetris -l 2 -k 'jkl pq'"
.sp
will play the default game, i.e. level 2 with the default
control keys.
The current key settings are displayed at the bottom of the screen
during play.
.It Fl l Ar level
Select a level of play.
.It Fl p
Switch on previewing of the shape that will appear next.
This penalizes your score.
.It Fl s
Display the top scores.
.El
.Sh PLAY
At the start of the game, a shape will appear at the top of the screen,
falling one square at a time.
The speed at which it falls is determined directly by the level:
if you select level 2, the blocks will fall twice per second;
at level 9, they fall 9 times per second.
(As the game goes on, things speed up,
no matter what your initial selection.)
When this shape
.Dq "touches down"
on the bottom of the field, another will appear at the top.
.Pp
You can move shapes to the left or right, rotate them counterclockwise,
or drop them to the bottom by pressing the appropriate keys.
As you fit them together, completed horizontal rows vanish,
and any blocks above fall down to fill in.
When the blocks stack up to the top of the screen, the game is over.
.Sh SCORING
You get one point for every block you fit into the stack,
and one point for every space a block falls when you hit the drop key.
(Dropping the blocks is therefore a good way to increase your score.)
Completing a row rewards you with a bonus corresponding to the number
of simultaneous rows completed.
Your total score is the product of the level of play
and your accumulated
.ie t points\(em200
.el points -- 200
points on level 3 gives you a score of 600.
Each player gets at most one entry on any level,
for a total of nine scores in the high scores file.
Players who no longer have accounts are limited to one score.
Also, scores over 5 years old are expired.
The exception to these conditions is that the highest score on a given
level is
.Em always
kept,
so that following generations can pay homage to those who have
wasted serious amounts of time.
.Pp
The score list is produced at the end of the game.
The printout includes each player's overall ranking,
name, score, and how many points were scored on what level.
Scores which are the highest on a given level
are marked with asterisks
.Dq * .
.Sh ENVIRONMENT
.Bl -tag -width $HOME/.tetris.scores
.It Ev LOGNAME
Name displayed in high score file.
.El
.Sh FILES
.Bl -tag -width $HOME/.tetris.scores
.It Pa $HOME/.tetris.scores
High score file.
.El
.Sh AUTHORS
.An -nosplit
Adapted from a 1989 International Obfuscated C Code Contest winner by
.An Chris Torek
and
.An Darren F. Provine .
.Pp
Manual adapted from the original entry written by
.An Nancy L. Tinkham
and
.An Darren F. Provine .
.Pp
Shape previewing code adapted from code by
.An Hubert Feyrer .
.Sh BUGS
The higher levels are unplayable without a fast terminal connection.
@


1.19
log
@Prefer $LOGNAME over $USER, since the latter is deprecated,
see environ(7).  Pointed out by millert@@.  Fall back to getlogin(2)
before defaulting to ???.

looks good to deraadt@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: tetris.6,v 1.18 2015/11/25 16:15:06 tb Exp $
d35 1
a35 1
.Dd $Mdocdate: November 25 2015 $
d149 1
a149 1
.Bl -tag -width Ds
d156 1
a156 1
high score file
@


1.18
log
@The scorefile is hidden.

From Ricardo Mestre, thanks!
@
text
@d1 1
a1 1
.\"	$OpenBSD: tetris.6,v 1.17 2015/11/20 07:40:23 tb Exp $
d35 1
a35 1
.Dd $Mdocdate: November 20 2015 $
d148 5
@


1.17
log
@pledge "stdio rpath wpath cpath tty"

"stdio rpath tty" for game play
"rpath wpath cpath" for maintaining highscores in $USER

ok deraadt@@ sthen@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: tetris.6,v 1.16 2015/07/27 18:48:04 sobrado Exp $
d35 1
a35 1
.Dd $Mdocdate: July 27 2015 $
d149 2
a150 2
.Bl -tag -width $HOME/tetris.scoresxx
.It Pa $HOME/tetris.scores
@


1.16
log
@use file system path (.Pa) semantic markup macros where appropriate.
@
text
@d1 1
a1 1
.\"	$OpenBSD: tetris.6,v 1.15 2014/09/08 01:27:54 schwarze Exp $
d35 1
a35 1
.Dd $Mdocdate: September 8 2014 $
d149 2
a150 2
.Bl -tag -width /var/games/tetris.scoresxx
.It Pa /var/games/tetris.scores
@


1.15
log
@obvious cases of missing .An;
found with the new mandoc(1) MANDOCERR_AN_MISSING warning;
no text changes
@
text
@d1 1
a1 1
.\"	$OpenBSD: tetris.6,v 1.14 2007/05/31 19:19:18 jmc Exp $
d35 1
a35 1
.Dd $Mdocdate: May 31 2007 $
d150 1
a150 1
.It /var/games/tetris.scores
@


1.14
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: tetris.6,v 1.13 2004/01/10 01:23:20 tedu Exp $
d35 1
a35 1
.Dd $Mdocdate$
d154 1
d156 8
a163 1
Chris Torek and Darren F. Provine.
d165 2
a166 4
Manual adapted from the original entry written by Nancy L. Tinkham and
Darren F. Provine.
.Pp
Shape previewing code adapted from code by Hubert Feyrer.
@


1.13
log
@bonus points for completing rows, like most variants.
ok deraadt mcbride millert nick otto pjanzen
@
text
@d1 1
a1 1
.\"	$OpenBSD: tetris.6,v 1.12 2003/06/03 03:01:41 millert Exp $
d35 1
a35 1
.Dd May 31, 1993
@


1.12
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
.\"	$OpenBSD: tetris.6,v 1.11 2002/07/26 20:19:22 mickey Exp $
d124 2
@


1.11
log
@add classic mode, closer to the way tetris felt a couple decades ago; pjanzen@@ ok
@
text
@d1 1
a1 1
.\"	$OpenBSD: tetris.6,v 1.10 2001/08/18 03:27:17 pjanzen Exp $
d17 1
a17 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
@


1.10
log
@Formatting
@
text
@d1 1
a1 1
.\"	$OpenBSD: tetris.6,v 1.9 2001/06/06 20:52:22 pjanzen Exp $
d47 1
a47 1
.Op Fl ps
d80 3
@


1.9
log
@reorder sections, minor tidying; mpech@@prosoft.org.lv
@
text
@d1 1
a1 1
.\"	$OpenBSD: tetris.6,v 1.8 1999/07/03 02:11:12 aaron Exp $
d99 2
a100 2
Switch on previewing of the shape that will appear next.  This penalizes
your score.
@


1.8
log
@remove redundant .Pp macros
@
text
@d1 1
a1 1
.\"	$OpenBSD: tetris.6,v 1.7 1999/07/02 20:11:52 aaron Exp $
a151 2
.Sh BUGS
The higher levels are unplayable without a fast terminal connection.
d160 2
@


1.7
log
@consistent .Dd usage; proper format is: .Dd Month DD, YYYY
@
text
@d1 1
a1 1
.\"	$OpenBSD: tetris.6,v 1.6 1999/03/22 07:38:28 pjanzen Exp $
a103 1
.Pp
@


1.6
log
@Many fixes, most either from or based on NetBSD changes:
	get rid of unused function
	improve output format
	allow previewing of next piece
	randomize initial rotation angle of falling blocks.
@
text
@d1 1
a1 1
.\"	$OpenBSD: tetris.6,v 1.5 1998/12/15 19:18:55 pjanzen Exp $
d39 1
a39 1
.Dd May, 31, 1993
@


1.5
log
@Always provide an argument to .Nm in SYNOPSIS section
@
text
@d1 1
a1 1
.\"	$OpenBSD: tetris.6,v 1.4 1998/09/24 06:45:07 pjanzen Exp $
d47 1
a47 1
.Op Fl s
d98 3
d161 2
@


1.4
log
@NetBSD changes and a few obvious fixes
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d46 1
a46 1
.Nm
@


1.3
log
@fix man; noted by hubert.feyrer@@rz.uni-regensburg.de
@
text
@d1 1
a1 1
.\"	$NetBSD: tetris.6,v 1.2 1995/04/22 07:42:45 cgd Exp $
d53 2
a54 2
command runs display-based game which must be played on a CRT terminal.
The object is to fit the shapes together forming complete rows,
d57 1
a57 1
You can optionally select a level of play, or custom-select control keys.
d86 1
a86 1
argument must have the six keys in order, and, remember to quote any
d92 1
a92 1
will play the default games, i.e. level 2 and with the default
@


1.2
log
@for i in `find . -name \*.[123456789] -exec grep '^.Dd ' {} /dev/null \; | \
	grep '"' | cut -d':' -f1`; do
sed -e '/^.Dd /s/"//g' -e '/^.Dd /s/\(^.Dd [A-Za-z]*\) \(.*\)$/\1, \2/' <$i >x
cat x > $i
done
@
text
@d80 1
a80 1
.It Fl k
d82 2
a83 1
.Fl k option.
d96 1
a96 1
.It Fl l
@


1.1
log
@Initial revision
@
text
@d39 1
a39 1
.Dd "May 31, 1993"
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
