head	1.15;
access;
symbols
	OPENBSD_6_2:1.15.0.4
	OPENBSD_6_2_BASE:1.15
	OPENBSD_6_1:1.14.0.8
	OPENBSD_6_1_BASE:1.14
	OPENBSD_6_0:1.14.0.4
	OPENBSD_6_0_BASE:1.14
	OPENBSD_5_9:1.14.0.2
	OPENBSD_5_9_BASE:1.14
	OPENBSD_5_8:1.13.0.6
	OPENBSD_5_8_BASE:1.13
	OPENBSD_5_7:1.13.0.2
	OPENBSD_5_7_BASE:1.13
	OPENBSD_5_6:1.12.0.22
	OPENBSD_5_6_BASE:1.12
	OPENBSD_5_5:1.12.0.20
	OPENBSD_5_5_BASE:1.12
	OPENBSD_5_4:1.12.0.16
	OPENBSD_5_4_BASE:1.12
	OPENBSD_5_3:1.12.0.14
	OPENBSD_5_3_BASE:1.12
	OPENBSD_5_2:1.12.0.12
	OPENBSD_5_2_BASE:1.12
	OPENBSD_5_1_BASE:1.12
	OPENBSD_5_1:1.12.0.10
	OPENBSD_5_0:1.12.0.8
	OPENBSD_5_0_BASE:1.12
	OPENBSD_4_9:1.12.0.6
	OPENBSD_4_9_BASE:1.12
	OPENBSD_4_8:1.12.0.4
	OPENBSD_4_8_BASE:1.12
	OPENBSD_4_7:1.12.0.2
	OPENBSD_4_7_BASE:1.12
	OPENBSD_4_6:1.10.0.12
	OPENBSD_4_6_BASE:1.10
	OPENBSD_4_5:1.10.0.8
	OPENBSD_4_5_BASE:1.10
	OPENBSD_4_4:1.10.0.6
	OPENBSD_4_4_BASE:1.10
	OPENBSD_4_3:1.10.0.4
	OPENBSD_4_3_BASE:1.10
	OPENBSD_4_2:1.10.0.2
	OPENBSD_4_2_BASE:1.10
	OPENBSD_4_1:1.9.0.12
	OPENBSD_4_1_BASE:1.9
	OPENBSD_4_0:1.9.0.10
	OPENBSD_4_0_BASE:1.9
	OPENBSD_3_9:1.9.0.8
	OPENBSD_3_9_BASE:1.9
	OPENBSD_3_8:1.9.0.6
	OPENBSD_3_8_BASE:1.9
	OPENBSD_3_7:1.9.0.4
	OPENBSD_3_7_BASE:1.9
	OPENBSD_3_6:1.9.0.2
	OPENBSD_3_6_BASE:1.9
	OPENBSD_3_5:1.8.0.4
	OPENBSD_3_5_BASE:1.8
	OPENBSD_3_4:1.8.0.2
	OPENBSD_3_4_BASE:1.8
	OPENBSD_3_3:1.7.0.16
	OPENBSD_3_3_BASE:1.7
	OPENBSD_3_2:1.7.0.14
	OPENBSD_3_2_BASE:1.7
	OPENBSD_3_1:1.7.0.12
	OPENBSD_3_1_BASE:1.7
	OPENBSD_3_0:1.7.0.10
	OPENBSD_3_0_BASE:1.7
	OPENBSD_2_9:1.7.0.8
	OPENBSD_2_9_BASE:1.7
	OPENBSD_2_8:1.7.0.6
	OPENBSD_2_8_BASE:1.7
	OPENBSD_2_7:1.7.0.4
	OPENBSD_2_7_BASE:1.7
	OPENBSD_2_6:1.7.0.2
	OPENBSD_2_6_BASE:1.7
	OPENBSD_2_5:1.6.0.2
	OPENBSD_2_5_BASE:1.6
	OPENBSD_2_4:1.4.0.4
	OPENBSD_2_4_BASE:1.4
	OPENBSD_2_3:1.4.0.2
	OPENBSD_2_3_BASE:1.4
	OPENBSD_2_2:1.3.0.2
	OPENBSD_2_2_BASE:1.3
	OPENBSD_2_1:1.1.1.1.0.4
	OPENBSD_2_1_BASE:1.1.1.1
	OPENBSD_2_0:1.1.1.1.0.2
	OPENBSD_2_0_BASE:1.1.1.1
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@.\" @;


1.15
date	2017.07.12.11.36.22;	author schwarze;	state Exp;
branches;
next	1.14;
commitid	RUaqCV3xDQfLvLcM;

1.14
date	2015.09.25.17.37.23;	author schwarze;	state Exp;
branches;
next	1.13;
commitid	xaWPyl0SpiJu4KfV;

1.13
date	2015.02.06.09.30.04;	author tedu;	state Exp;
branches;
next	1.12;
commitid	Raxt4GQszdJkYB8f;

1.12
date	2010.02.21.10.38.08;	author jmc;	state Exp;
branches;
next	1.11;

1.11
date	2010.02.20.19.50.13;	author schwarze;	state Exp;
branches;
next	1.10;

1.10
date	2007.05.31.19.19.17;	author jmc;	state Exp;
branches;
next	1.9;

1.9
date	2004.08.20.23.15.15;	author jmc;	state Exp;
branches;
next	1.8;

1.8
date	2003.06.03.03.01.39;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	99.07.09.13.35.56;	author aaron;	state Exp;
branches;
next	1.6;

1.6
date	98.12.15.19.18.32;	author pjanzen;	state Exp;
branches;
next	1.5;

1.5
date	98.11.29.19.37.35;	author pjanzen;	state Exp;
branches;
next	1.4;

1.4
date	98.03.30.11.47.43;	author pjanzen;	state Exp;
branches;
next	1.3;

1.3
date	97.07.17.08.44.43;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	97.05.30.09.13.03;	author deraadt;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.48.56;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.48.56;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.15
log
@Inspect LC_CTYPE and if it isn't UTF-8, weed out bytes that are not
printable ASCII.  That makes using UTF-8 in fortune datfiles safe.
Potential usefulness of UTF-8 in fortune datfiles noticed by bentley@@.
OK tedu@@ millert@@.
@
text
@.\"	$OpenBSD: fortune.6,v 1.14 2015/09/25 17:37:23 schwarze Exp $
.\"
.\" Copyright (c) 1985, 1991, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" This code is derived from software contributed to Berkeley by
.\" Ken Arnold.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"	@@(#)fortune.6	8.3 (Berkeley) 4/19/94
.\"
.Dd $Mdocdate: September 25 2015 $
.Dt FORTUNE 6
.Os
.Sh NAME
.Nm fortune
.Nd print a random, hopefully interesting, adage
.Sh SYNOPSIS
.Nm fortune
.Op Fl aefilosw
.Op Fl m Ar pattern
.Oo
.Op Ar N Ns %
.Sm off
.Ar file | Ar directory | Cm all
.Sm on
.Oc
.Sh DESCRIPTION
When
.Nm
is run with no arguments it prints out a random epigram.
Epigrams are divided into several categories, where each category
is subdivided into those which are potentially offensive and those
which are not.
The options are as follows:
.Bl -tag -width flag
.It Fl a
Choose from all lists of maxims, both offensive and not.
(See the
.Fl o
option for more information on offensive fortunes.)
.It Fl e
Consider all fortune files to be of equal size (see discussion below
on multiple files).
.It Fl f
Print out the list of files which would be searched, but don't
print a fortune.
.It Fl i
Ignore case for
.Fl m
patterns.
.It Fl l
Long dictums only.
.It Fl m Ar pattern
Print out all fortunes which match the regular expression
.Ar pattern .
See
.Xr re_format 7
for a description of patterns.
.It Fl o
Choose only from potentially offensive aphorisms.
.Bf -symbolic
Please, please, please request a potentially offensive fortune if and
only if you believe, deep down in your heart, that you are willing
to be offended.
(And that if you are, you'll just quit using
.Fl o
rather than give us
grief about it, okay?)
.Ef
.Bd -unfilled -offset indent
\&... let us keep in mind the basic governing philosophy
of The Brotherhood, as handsomely summarized in these words:
we believe in healthy, hearty laughter -- at the expense of
the whole human race, if needs be.  Needs be.
		--H. Allen Smith, "Rude Jokes"
.Ed
.It Fl s
Short apothegms only.
.It Fl w
Wait before termination for an amount of time calculated from the
number of characters in the message.
This is useful if it is executed as part of the logout procedure
to guarantee that the message can be read before the screen is cleared.
.El
.Pp
The user may specify alternate sayings.
You can specify a specific
.Ar file ,
a
.Ar directory
which contains one or more files, or the special word
.Cm all ,
which says to use all the standard databases.
Any of these may be preceded by a percentage, which is a number
.Ar N
between 0 and 100 inclusive, followed by a
.Sq %
character.
If it is, there will be an
.Ar N
percent probability that an adage will be picked from that
.Ar file
or
.Ar directory .
If the percentages do not sum to 100, and there are specifications
without percentages, the remaining percent will apply to those files
and/or directories, in which case the probability of selecting from
one of them will be based on their relative sizes.
.Pp
As an example, given two databases
.Pa funny
and
.Pa not-funny ,
with
.Pa funny
twice as big, saying
.Bd -literal -offset indent
$ fortune funny not-funny
.Ed
.Pp
will get you fortunes out of
.Pa funny
two-thirds of the time.
The command
.Bd -literal -offset indent
$ fortune 90% funny 10% not-funny
.Ed
.Pp
will pick out 90% of its fortunes from
.Pa funny
(the
.Dq 10%
is unnecessary, since 10% is all that's left).
The
.Fl e
option says to consider all files equal;
thus
.Bd -literal -offset indent
$ fortune -e
.Ed
.Pp
is equivalent to
.Bd -literal -offset indent
$ fortune 50% funny 50% not-funny
.Ed
.Pp
Datafiles for
.Nm
are created by a utility called
.Nm strfile .
Although not installed by default,
the source code and a manual page for this utility
can be found in
.Pa /usr/src/games/fortune/strfile/ ,
if it exists.
.Sh ENVIRONMENT
.Bl -tag -width LC_CTYPE
.It Ev LC_CTYPE
The character encoding
.Xr locale 1 .
If unset or set to
.Qq C ,
.Qq POSIX ,
or an unsupported value, bytes that are not printable ASCII characters
are replaced with question marks in the output.
.El
.Sh FILES
.Bl -tag -width "/usr/share/games/fortune/*XX" -compact
.It Pa /usr/share/games/fortune/*
Fortune files.
.El
.Sh SEE ALSO
.Xr random 6 ,
.Xr rot13 6 ,
.Xr re_format 7
@


1.14
log
@use | rather than / for alternatives and some macro fixes
@
text
@d1 1
a1 1
.\"	$OpenBSD: fortune.6,v 1.13 2015/02/06 09:30:04 tedu Exp $
d35 1
a35 1
.Dd $Mdocdate: February 6 2015 $
d180 11
@


1.13
log
@regex are documented in re_format.7, not the C API in regex.3
@
text
@d1 1
a1 1
.\"	$OpenBSD: fortune.6,v 1.12 2010/02/21 10:38:08 jmc Exp $
d35 1
a35 1
.Dd $Mdocdate: February 21 2010 $
d48 1
a48 1
.Ar file No / Ar directory No / Ar all
d111 6
a116 3
You can specify a specific file, a directory which contains one or
more files, or the special word
.Em all ,
d125 4
a128 2
percent probability that an adage will be picked from that file
or directory.
d135 1
a135 1
.Em funny
d137 1
a137 1
.Em not-funny ,
d139 1
a139 1
.Em funny
d146 1
a146 1
.Em funny
d154 1
a154 1
.Em funny
@


1.12
log
@fix display formatting; ok schwarze sobrado
@
text
@d1 1
a1 1
.\"	$OpenBSD: fortune.6,v 1.11 2010/02/20 19:50:13 schwarze Exp $
d35 1
a35 1
.Dd $Mdocdate: February 20 2010 $
d81 1
a81 1
.Xr regex 3
a180 1
.Xr regex 3 ,
d182 2
a183 1
.Xr rot13 6
@


1.11
log
@drop nested display, fixing the build with mandoc(1);
feedback and ok  jmc@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: fortune.6,v 1.10 2007/05/31 19:19:17 jmc Exp $
d35 1
a35 1
.Dd $Mdocdate: May 31 2007 $
d94 1
a94 1
.Bd -filled -offset indent
d98 2
a99 3
the whole human race, if needs be.
Needs be.
--H. Allen Smith, "Rude Jokes"
@


1.10
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\"	$OpenBSD: fortune.6,v 1.9 2004/08/20 23:15:15 jmc Exp $
d35 1
a35 1
.Dd $Mdocdate$
a99 1
.Bd -filled -offset indent-two -compact
a100 1
.Ed
@


1.9
log
@- improve SYNOPSIS (mark down punctuation)
- put `-i' description in correct place
- -m takes an argument
- use `$' for command line examples
- document strfile(8), and note it is not installed by default
- improve FILES and SEE ALSO
- a few other tweaks
@
text
@d1 1
a1 1
.\"	$OpenBSD: fortune.6,v 1.8 2003/06/03 03:01:39 millert Exp $
d35 1
a35 1
.Dd April 19, 1994
@


1.8
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
.\"	$OpenBSD: fortune.6,v 1.7 1999/07/09 13:35:56 aaron Exp $
d46 4
a49 2
.Op Ar N%
.Ar file/dir/all
d71 4
d77 1
a77 1
.It Fl m
a105 4
.It Fl i
Ignore case for
.Fl m
patterns.
d116 1
a116 1
.Em all
d121 3
a123 2
.Ar % .
If it is, there will be a
d140 1
a140 1
fortune funny not-funny
d148 1
a148 1
fortune 90% funny 10% not-funny
d153 3
a155 1
(the ``10% not-funny'' is unnecessary, since 10% is all that's left).
d161 1
a161 1
fortune -e
d166 1
a166 1
fortune 50% funny 50% not-funny
d168 10
d179 3
a181 2
.Bl -tag -width Pa -compact
.It Pa /usr/share/games/fortune
d184 3
a186 1
.Xr regex 3
@


1.7
log
@- remove all trailing whitespace
     * except when it is escaped with a `\' at the end of the line
- fix remaining .Nm usage as well
- this is from a patch I received from kwesterback@@home.com, who has been
  working on some scripts for fixing formatting errors in mdoc'd man pages

Ok, so there could be a cost/benefit debate with this commit, but since I have
the patch we might as well commit it...
@
text
@d1 1
a1 1
.\"	$OpenBSD: fortune.6,v 1.6 1998/12/15 19:18:32 pjanzen Exp $
d17 1
a17 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
@


1.6
log
@Always provide an argument to .Nm in SYNOPSIS section
@
text
@d1 1
a1 1
.\"	$OpenBSD: fortune.6,v 1.5 1998/11/29 19:37:35 pjanzen Exp $
d43 1
a43 1
.Nm fortune 
d48 3
a50 3
.Op Fl m Ar pattern 
.Oo 
.Op Ar N% 
@


1.5
log
@Don't capitalize game names at the beginning of sentences.
@
text
@d1 1
a1 1
.\"	$OpenBSD: fortune.6,v 1.4 1998/03/30 11:47:43 pjanzen Exp $
d46 1
a46 1
.Nm
@


1.4
log
@Formatting
@
text
@d1 1
a1 1
.\"	$OpenBSD$
d46 1
a46 1
.Nm fortune
d55 1
a55 1
.Nm fortune
@


1.3
log
@fix Xr
@
text
@d1 1
a1 1
.\"	$NetBSD: fortune.6,v 1.4 1995/03/23 08:28:37 cgd Exp $
d165 1
a165 2
fortune 50% funny 50% not
.Em -funny
@


1.2
log
@xref corrections
@
text
@d173 1
a173 2
.Xr regex 3 ,
.Xr regcmp 3
@


1.1
log
@Initial revision
@
text
@d174 1
a174 1
.Xr regcmp 3 ,
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
