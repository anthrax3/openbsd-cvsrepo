head	1.14;
access;
symbols
	OPENBSD_5_5:1.13.0.6
	OPENBSD_5_5_BASE:1.13
	OPENBSD_5_4:1.13.0.2
	OPENBSD_5_4_BASE:1.13
	OPENBSD_5_3:1.7.0.10
	OPENBSD_5_3_BASE:1.7
	OPENBSD_5_2:1.7.0.8
	OPENBSD_5_2_BASE:1.7
	OPENBSD_5_1_BASE:1.7
	OPENBSD_5_1:1.7.0.6
	OPENBSD_5_0:1.7.0.4
	OPENBSD_5_0_BASE:1.7
	OPENBSD_4_9:1.7.0.2
	OPENBSD_4_9_BASE:1.7
	OPENBSD_4_8:1.6.0.8
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.6.0.4
	OPENBSD_4_7_BASE:1.6
	OPENBSD_4_6:1.6.0.6
	OPENBSD_4_6_BASE:1.6
	OPENBSD_4_5:1.6.0.2
	OPENBSD_4_5_BASE:1.6
	OPENBSD_4_4:1.5.0.10
	OPENBSD_4_4_BASE:1.5
	OPENBSD_4_3:1.5.0.8
	OPENBSD_4_3_BASE:1.5
	OPENBSD_4_2:1.5.0.6
	OPENBSD_4_2_BASE:1.5
	OPENBSD_4_1:1.5.0.4
	OPENBSD_4_1_BASE:1.5
	OPENBSD_4_0:1.5.0.2
	OPENBSD_4_0_BASE:1.5
	OPENBSD_3_9:1.4.0.12
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.4.0.10
	OPENBSD_3_8_BASE:1.4
	OPENBSD_3_7:1.4.0.8
	OPENBSD_3_7_BASE:1.4
	OPENBSD_3_6:1.4.0.6
	OPENBSD_3_6_BASE:1.4
	OPENBSD_3_5:1.4.0.4
	OPENBSD_3_5_BASE:1.4
	OPENBSD_3_4:1.4.0.2
	OPENBSD_3_4_BASE:1.4
	OPENBSD_3_3:1.1.0.8
	OPENBSD_3_3_BASE:1.1
	OPENBSD_3_2:1.1.0.6
	OPENBSD_3_2_BASE:1.1
	OPENBSD_3_1:1.1.0.4
	OPENBSD_3_1_BASE:1.1
	OPENBSD_3_0:1.1.0.2
	OPENBSD_3_0_BASE:1.1;
locks; strict;
comment	@# @;


1.14
date	2014.04.22.10.01.15;	author reyk;	state dead;
branches;
next	1.13;

1.13
date	2013.07.09.14.33.43;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2013.07.09.13.24.53;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2013.07.01.13.50.39;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2013.06.21.17.04.01;	author robert;	state Exp;
branches;
next	1.9;

1.9
date	2013.06.20.13.19.44;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2013.06.17.18.57.39;	author robert;	state dead;
branches;
next	1.7;

1.7
date	2010.08.18.20.21.53;	author david;	state Exp;
branches;
next	1.6;

1.6
date	2008.08.30.01.16.30;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	2006.07.12.23.00.07;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2003.08.22.13.49.33;	author hin;	state Exp;
branches;
next	1.3;

1.3
date	2003.05.17.19.08.53;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	2003.05.17.07.12.43;	author hin;	state Exp;
branches;
next	1.1;

1.1
date	2001.06.21.23.45.27;	author hin;	state Exp;
branches;
next	;


desc
@@


1.14
log
@The complexity and quality of kerberosV and the fact that almost
nobody is using it doesn't justify to have it in base - disable and
remove it.  If the 2 two people who use it still want it, they can
make a port or recompile OpenBSD on their own.

There is a quote in theo.c from August 2010: "basically, dung beetles
fucking.  that's what kerberosV + openssl is like".

Discussed with many.  Tests by henning@@ reyk@@ and others.
ok deraadt@@ henning@@
@
text
@# $OpenBSD: Makefile,v 1.13 2013/07/09 14:33:43 ajacoutot Exp $

KINFOSRC =	${.CURDIR}/../src/doc
KINFODIR =	${DESTDIR}${SHAREDIR}/info

MAKEINFO =	/usr/bin/makeinfo
INSTALL-INFO =	/usr/bin/install-info

INFO =	heimdal.info

SRCS =	heimdal.texi intro.texi whatis.texi install.texi setup.texi apps.texi \
	misc.texi kerberos4.texi win2k.texi programming.texi migration.texi \
	ack.texi copyright.texi vars.texi

all: ${INFO}

heimdal.info: ${SRCS}
.for t in ${SRCS}
	sed -f ${.CURDIR}/../varsub ${KINFOSRC}/${t} > ${.OBJDIR}/${t}.tmp && \
		mv ${.OBJDIR}/${t}.tmp ${.OBJDIR}/${t}
.endfor
	${MAKEINFO} --no-split -I${KINFOSRC} -o ${.TARGET} ${.OBJDIR}/heimdal.texi

install: ${INFO}
	${INSTALL} ${INSTALL_COPY} -m ${DOCMODE} -o ${DOCOWN} -g ${DOCGRP} ${.OBJDIR}/${INFO} ${KINFODIR}
	$(INSTALL-INFO) ${.OBJDIR}/${INFO} ${KINFODIR}/dir

clean:
	rm -f ${INFO} ${SRCS}

cleandir: clean

.PATH:	${KINFOSRC}

.include <bsd.obj.mk>
.include <bsd.subdir.mk>
@


1.13
log
@Make sure all files are removed at clean/cleandir target.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2013/07/09 13:24:53 ajacoutot Exp $
@


1.12
log
@Add vars.texi to SRCS so proper substitution is done in that part of the
info(1) doc.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2013/07/01 13:50:39 ajacoutot Exp $
d29 1
a29 1
	rm -f ${.OBJDIR}/${INFO}
@


1.11
log
@Properly substitute paths in the info file like it was done with the man
pages.

ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2013/06/21 17:04:01 robert Exp $
d13 1
a13 1
	ack.texi copyright.texi
@


1.10
log
@tidy up
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2013/06/20 13:19:44 ajacoutot Exp $
d18 5
a22 1
	${MAKEINFO} --no-split -I${KINFOSRC} -o ${.TARGET} ${KINFOSRC}/heimdal.texi
@


1.9
log
@Bring back heimdal.info which was lost during the update and that
actually contains usefull information.

noticed by miod@@
ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD$
d3 2
a4 2
KINFOSRC =  ${.CURDIR}/../src/doc
KINFODIR = ${DESTDIR}${SHAREDIR}/info
d6 2
a7 2
MAKEINFO = /usr/bin/makeinfo
INSTALL-INFO = /usr/bin/install-info
d9 1
a9 1
INFO = heimdal.info
@


1.8
log
@update kerberosV to Heimdal 1.5.2 using BSD Makefiles based
on the ones from FreeBSD

This is getting commited now so that we can patch it up
fast in the tree.
There are known regressions so please don't try to build
this on your own now, please wait for the next available
snapshot.

If however you would still want to build it, make sure
build and install everything in the tools directory first.

This is not the full commit yet because there are several
subdirectories.
@
text
@d1 1
a1 1
# $Id: Makefile,v 1.7 2010/08/18 20:21:53 david Exp $
d3 2
a4 4
KRBDEPTH=..
.include "../Makefile.inc"

.PATH:	${KRB5SRC}/doc
d9 1
a9 5
infodir = ${DESTDIR}/usr/share/info

INSTALL = /usr/bin/install

info = heimdal.info
d11 3
a13 1
SRCS = 	heimdal.texi intro.texi install.texi setup.texi kerberos4.texi
d15 1
d17 2
a18 1
all: $(info)
d20 3
a22 6
install: $(info)
	$(INSTALL-INFO) ${.OBJDIR}/$(info) $(infodir)/dir
	${INSTALL} ${INSTALL_COPY} -m 444 -o ${BINOWN} -g ${BINGRP} ${.OBJDIR}/$(info) $(infodir)

$(info): $(SRCS)
	${MAKEINFO} --no-split -I${KRB5SRC}/doc -o ${.OBJDIR}/$@@ ${KRB5SRC}/doc/heimdal.texi
d25 1
a25 1
	(cd ${.OBJDIR} ; rm -f *.aux *.cp *.cps *.dvi *.fn *.ky *.log *.pg *.toc *.tp *.vr *.info *.info-[0-9])
d29 1
a29 2

.PHONY: install all clean cleandir
@


1.7
log
@remove -p option option from install of heimdal.info
ok deraadt@@
@
text
@d1 1
a1 1
# $Id: Makefile,v 1.6 2008/08/30 01:16:30 brad Exp $
@


1.6
log
@- Remove passing a redundant --no-split flag on the command line
  for makeinfo.
- Remove some white space.

ok beck@@ biorn@@
@
text
@d1 1
a1 1
# $Id: Makefile,v 1.5 2006/07/12 23:00:07 espie Exp $
d24 1
a24 1
	${INSTALL} ${INSTALL_COPY} -m 444 -o ${BINOWN} -g ${BINGRP} -p ${.OBJDIR}/$(info) $(infodir)
@


1.5
log
@makeinfo --no-split, simplifies sets immensely.
Approved deraadt@@, kettenis@@
@
text
@d1 1
a1 1
# $Id: Makefile,v 1.4 2003/08/22 13:49:33 hin Exp $
d8 1
a8 1
MAKEINFO = /usr/bin/makeinfo --no-split
d23 1
a23 1
	$(INSTALL-INFO) ${.OBJDIR}/$(info) $(infodir)/dir 
@


1.4
log
@Use the '--no-split' parameter to makeinfo, so that it creates only on
info-file, and suddenly the heimdal info page works as expected.
@
text
@d1 1
a1 1
# $Id: Makefile,v 1.3 2003/05/17 19:08:53 deraadt Exp $
d8 1
a8 1
MAKEINFO = /usr/bin/makeinfo
@


1.3
log
@remove the others till they fix it
@
text
@d1 1
a1 1
# $Id: Makefile,v 1.2 2003/05/17 07:12:43 hin Exp $
d27 1
a27 1
	${MAKEINFO} -I${KRB5SRC}/doc -o ${.OBJDIR}/$@@ ${KRB5SRC}/doc/heimdal.texi
@


1.2
log
@Fix infopage generation
@
text
@d1 1
a1 1
# $Id: Makefile,v 1.1 2001/06/21 23:45:27 hin Exp $
d15 1
a15 1
info = heimdal.info heimdal.info-1 heimdal.info-2
@


1.1
log
@Build and install Heimdal infofile.
@
text
@d1 1
a1 1
# $Id: Makefile,v 1.6 2001/01/09 02:41:17 angelos Exp $
d15 1
a15 1
info = heimdal.info
d30 1
a30 1
	(cd ${.OBJDIR} ; rm -f *.aux *.cp *.cps *.dvi *.fn *.ky *.log *.pg *.toc *.tp *.vr *.info)
@

