head	1.4;
access;
symbols
	OPENBSD_5_5:1.3.0.6
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.2
	OPENBSD_5_4_BASE:1.3
	HEIMDAL_0_6_3:1.1.1.2
	HEIMDAL_0_3f:1.1.1.1
	KTH:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2014.04.22.10.01.26;	author reyk;	state dead;
branches;
next	1.3;

1.3
date	2013.06.17.18.57.41;	author robert;	state Exp;
branches;
next	1.2;

1.2
date	2001.06.23.14.55.46;	author hin;	state dead;
branches;
next	1.1;

1.1
date	2001.06.22.21.21.55;	author hin;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.06.22.21.21.55;	author hin;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2004.10.29.15.55.32;	author biorn;	state Exp;
branches;
next	;


desc
@@


1.4
log
@The complexity and quality of kerberosV and the fact that almost
nobody is using it doesn't justify to have it in base - disable and
remove it.  If the 2 two people who use it still want it, they can
make a port or recompile OpenBSD on their own.

There is a quote in theo.c from August 2010: "basically, dung beetles
fucking.  that's what kerberosV + openssl is like".

Discussed with many.  Tests by henning@@ reyk@@ and others.
ok deraadt@@ henning@@
@
text
@
KDC(8)                    BSD System Manager's Manual                   KDC(8)

NNAAMMEE
     kkddcc -- Kerberos 5 server

SSYYNNOOPPSSIISS
     kkddcc [--cc _f_i_l_e | ----ccoonnffiigg--ffiillee==_f_i_l_e] [--pp | ----nnoo--rreeqquuiirree--pprreeaauutthh]
         [----mmaaxx--rreeqquueesstt==_s_i_z_e] [--HH | ----eennaabbllee--hhttttpp] [----nnoo--552244] [----kkeerrbbeerrooss44]
         [----kkeerrbbeerrooss44--ccrroossss--rreeaallmm] [--rr _s_t_r_i_n_g | ----vv44--rreeaallmm==_s_t_r_i_n_g] [--PP
         _p_o_r_t_s_p_e_c | ----ppoorrttss==_p_o_r_t_s_p_e_c] [----ddeettaacchh] [----ddiissaabbllee--ddeess]
         [----aaddddrreesssseess==_l_i_s_t _o_f _a_d_d_r_e_s_s_e_s]

DDEESSCCRRIIPPTTIIOONN
     kkddcc serves requests for tickets.  When it starts, it first checks the
     flags passed, any options that are not specified with a command line flag
     are taken from a config file, or from a default compiled-in value.

     Options supported:

     --cc _f_i_l_e, ----ccoonnffiigg--ffiillee==_f_i_l_e
             Specifies the location of the config file, the default is
             _/_v_a_r_/_h_e_i_m_d_a_l_/_k_d_c_._c_o_n_f.  This is the only value that can't be
             specified in the config file.

     --pp, ----nnoo--rreeqquuiirree--pprreeaauutthh
             Turn off the requirement for pre-autentication in the initial AS-
             REQ for all principals.  The use of pre-authentication makes it
             more difficult to do offline password attacks.  You might want to
             turn it off if you have clients that don't support pre-authenti-
             cation.  Since the version 4 protocol doesn't support any pre-
             authentication, serving version 4 clients is just about the same
             as not requiring pre-athentication.  The default is to require
             pre-authentication.  Adding the require-preauth per principal is
             a more flexible way of handling this.

     ----mmaaxx--rreeqquueesstt==_s_i_z_e
             Gives an upper limit on the size of the requests that the kdc is
             willing to handle.

     --HH, ----eennaabbllee--hhttttpp
             Makes the kdc listen on port 80 and handle requests encapsulated
             in HTTP.

     ----nnoo--552244
             don't respond to 524 requests

     ----kkeerrbbeerrooss44
             respond to Kerberos 4 requests

     ----kkeerrbbeerrooss44--ccrroossss--rreeaallmm
             respond to Kerberos 4 requests from foreign realms.  This is a
             known security hole and should not be enabled unless you under-
             stand the consequences and are willing to live with them.

     --rr _s_t_r_i_n_g, ----vv44--rreeaallmm==_s_t_r_i_n_g
             What realm this server should act as when dealing with version 4
             requests.  The database can contain any number of realms, but
             since the version 4 protocol doesn't contain a realm for the
             server, it must be explicitly specified.  The default is whatever
             is returned by kkrrbb__ggeett__llrreeaallmm().  This option is only available
             if the KDC has been compiled with version 4 support.

     --PP _p_o_r_t_s_p_e_c, ----ppoorrttss==_p_o_r_t_s_p_e_c
             Specifies the set of ports the KDC should listen on.  It is given
             as a white-space separated list of services or port numbers.

     ----aaddddrreesssseess==_l_i_s_t _o_f _a_d_d_r_e_s_s_e_s
             The list of addresses to listen for requests on.  By default, the
             kdc will listen on all the locally configured addresses.  If only
             a subset is desired, or the automatic detection fails, this
             option might be used.

     ----ddeettaacchh
             detach from pty and run as a daemon.

     ----ddiissaabbllee--ddeess
             disable add des encryption types, makes the kdc not use them.

     All activities are logged to one or more destinations, see krb5.conf(5),
     and krb5_openlog(3).  The entity used for logging is kkddcc.

CCOONNFFIIGGUURRAATTIIOONN FFIILLEE
     The configuration file has the same syntax as krb5.conf(5), but will be
     read before _/_e_t_c_/_k_r_b_5_._c_o_n_f, so it may override settings found there.
     Options specific to the KDC only are found in the ``[kdc]'' section.  All
     the command-line options can preferably be added in the configuration
     file.  The only difference is the pre-authentication flag, which has to
     be specified as:

           require-preauth = no

     (in fact you can specify the option as ----rreeqquuiirree--pprreeaauutthh==nnoo).

     And there are some configuration options which do not have command-line
     equivalents:

           enable-digest = _b_o_o_l_e_a_n
                turn on support for digest processing in the KDC.  The default
                is FALSE.

           check-ticket-addresses = _b_o_o_l_e_a_n
                Check the addresses in the ticket when processing TGS
                requests.  The default is TRUE.

           allow-null-ticket-addresses = _b_o_o_l_e_a_n
                Permit tickets with no addresses.  This option is only rele-
                vant when check-ticket-addresses is TRUE.

           allow-anonymous = _b_o_o_l_e_a_n
                Permit anonymous tickets with no addresses.

           max-kdc-datagram-reply-length = _n_u_m_b_e_r
                Maximum packet size the UDP rely that the KDC will transmit,
                instead the KDC sends back a reply telling the client to use
                TCP instead.

           transited-policy = always-check | allow-per-principal |
                always-honour-request
                This controls how KDC requests with the
                disable-transited-check flag are handled. It can be one of:

                      always-check
                           Always check transited encoding, this is the
                           default.

                      allow-per-principal
                           Currently this is identical to always-check.  In a
                           future release, it will be possible to mark a prin-
                           cipal as able to handle unchecked requests.

                      always-honour-request
                           Always do what the client asked.  In a future
                           release, it will be possible to force a check per
                           principal.

           encode_as_rep_as_tgs_rep = _b_o_o_l_e_a_n
                Encode AS-Rep as TGS-Rep to be bug-compatible with old DCE
                code.  The Heimdal clients allow both.

           kdc_warn_pwexpire = _t_i_m_e
                How long before password/principal expiration the KDC should
                start sending out warning messages.

     The configuration file is only read when the kkddcc is started.  If changes
     made to the configuration file are to take effect, the kkddcc needs to be
     restarted.

     An example of a config file:

           [kdc]
                   require-preauth = no
                   v4-realm = FOO.SE

BBUUGGSS
     If the machine running the KDC has new addresses added to it, the KDC
     will have to be restarted to listen to them.  The reason it doesn't just
     listen to wildcarded (like INADDR_ANY) addresses, is that the replies has
     to come from the same address they were sent to, and most OS:es doesn't
     pass this information to the application.  If your normal mode of opera-
     tion require that you add and remove addresses, the best option is proba-
     bly to listen to a wildcarded TCP socket, and make sure your clients use
     TCP to connect.  For instance, this will listen to IPv4 TCP port 88 only:

           kdc --addresses=0.0.0.0 --ports="88/tcp"

     There should be a way to specify protocol, port, and address triplets,
     not just addresses and protocol, port tuples.

SSEEEE AALLSSOO
     kinit(1), krb5.conf(5)

HEIMDAL                         August 24, 2006                        HEIMDAL
@


1.3
log
@update kerberosV to Heimdal 1.5.2 using BSD Makefiles based
on the ones from FreeBSD

This is getting commited now so that we can patch it up
fast in the tree.
There are known regressions so please don't try to build
this on your own now, please wait for the next available
snapshot.

If however you would still want to build it, make sure
build and install everything in the tools directory first.

This is not the full commit yet because there are several
subdirectories.
@
text
@@


1.2
log
@Remove .cat* files from repository.
@
text
@d2 1
a2 1
KDC(8)                   UNIX System Manager's Manual                   KDC(8)
d5 1
a5 1
     kkddcc - Kerberos 5 server
d9 4
a12 3
     [----mmaaxx--rreeqquueesstt==_s_i_z_e] [--HH | ----eennaabbllee--hhttttpp] [--rr _s_t_r_i_n_g | ----vv44--rreeaallmm==_s_t_r_i_n_g]
     [--KK | ----nnoo--kkaasseerrvveerr] [--rr _r_e_a_l_m] [----vv44--rreeaallmm==_r_e_a_l_m] [--PP _s_t_r_i_n_g |
     ----ppoorrttss==_s_t_r_i_n_g] [----aaddddrreesssseess==_l_i_s_t _o_f _a_d_d_r_e_s_s_e_s]
d15 1
a15 1
     kkddcc serves requests for tickets. When it starts, it first checks the
d17 1
a17 1
     is taken from a config file, or from a default compiled-in value.
d21 1
a21 3
     --cc _f_i_l_e

     ----ccoonnffiigg--ffiillee==_f_i_l_e
d23 2
a24 4
             _/_v_a_r_/_h_e_i_m_d_a_l_/_k_d_c_._c_o_n_f. This is the only value that can't be spec-
             ified in the config file.

     --pp
d26 1
a26 1
     ----nnoo--rreeqquuiirree--pprreeaauutthh
d28 8
a35 8
             REQ for all principals. The use of pre-authentication makes it
             more difficult to do offline password attacks. You might want to
             turn it off if you have clients that doesn't do pre-authentica-
             tion. Since the version 4 protocol doesn't support any pre-au-
             thentication, so serving version 4 clients is just about the same
             as not requiring pre-athentication. The default is to require
             pre-authentication. Adding the require-preauth per principal is a
             more flexible way of handling this.
d45 5
a49 2
     --KK, ----nnoo--kkaasseerrvveerr
             Disables kaserver emulation (in case it's compiled in).
d51 4
a54 1
     --rr _r_e_a_l_m
d56 1
a56 1
     ----vv44--rreeaallmm==_r_e_a_l_m
d58 1
a58 1
             requests. The database can contain any number of realms, but
d60 3
a62 3
             server, it must be explicitly specified. The default is whatever
             is returned by kkrrbb__ggeett__llrreeaallmm().  This option is only availabe if
             the KDC has been compiled with version 4 support.
d64 1
a64 1
     --PP _s_t_r_i_n_g, ----ppoorrttss==_s_t_r_i_n_g
d71 2
a72 2
             a subset is desired, or the automatic detection fails, this op-
             tion might be used.
d74 8
a81 2
     All activities , are logged to one or more destinations, see
     krb5.conf(5),  and krb5_openlog(3).  The entity used for logging is kkddcc.
d84 6
a89 6
     The configuration file has the same syntax as the _k_r_b_5_._c_o_n_f file (you can
     actually put the configuration in _/_e_t_c_/_k_r_b_5_._c_o_n_f, and then start the KDC
     with ----ccoonnffiigg--ffiillee==_/_e_t_c_/_k_r_b_5_._c_o_n_f). All options should be in a section
     called ``kdc''. All the command-line options can preferably be added in
     the configuration file.  The only difference is the pre-authentication
     flag, that has to be specified as:
d98 4
d103 2
a104 2
                Check the addresses in the ticket when processing TGS re-
                quests.  The default is FALSE.
d113 24
d145 4
d154 15
a168 1
                   key-file = /key-file
d171 1
a171 1
     kinit(1)
d173 1
a173 1
 HEIMDAL                         July 27, 1997                               2
@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@Import of heimdal-0.3f

Lots of changes, highlights include:

 * change default keytab to ANY:FILE:/etc/krb5.keytab,krb4:/etc/srvtab,
   the new keytab type that tries both of these in order (SRVTAB is
   also an alias for krb4:)

 * improve error reporting and error handling (error messages should
   be more detailed and more useful)

 * the API is closer to what MIT krb5 is using

 * more compatible with windows 2000

 * removed some memory leaks

 * bug fixes


@
text
@@


1.1.1.2
log
@Import of heimdal-0.6.3
@
text
@d9 3
a11 4
     [----mmaaxx--rreeqquueesstt==_s_i_z_e] [--HH | ----eennaabbllee--hhttttpp] [----nnoo--552244] [----kkeerrbbeerrooss44]
     [----kkeerrbbeerrooss44--ccrroossss--rreeaallmm] [--rr _s_t_r_i_n_g | ----vv44--rreeaallmm==_s_t_r_i_n_g] [--KK |
     ----kkaasseerrvveerr] [--PP _p_o_r_t_s_p_e_c | ----ppoorrttss==_p_o_r_t_s_p_e_c] [----ddeettaacchh] [----aaddddrreesssseess==_l_i_s_t
     _o_f _a_d_d_r_e_s_s_e_s]
d14 1
a14 1
     kkddcc serves requests for tickets.  When it starts, it first checks the
d16 1
a16 1
     are taken from a config file, or from a default compiled-in value.
d20 3
a22 1
     --cc _f_i_l_e, ----ccoonnffiigg--ffiillee==_f_i_l_e
d27 3
a29 1
     --pp, ----nnoo--rreeqquuiirree--pprreeaauutthh
d31 7
a37 7
             REQ for all principals.  The use of pre-authentication makes it
             more difficult to do offline password attacks.  You might want to
             turn it off if you have clients that don't support pre-authenti-
             cation.  Since the version 4 protocol doesn't support any pre-au-
             thentication, serving version 4 clients is just about the same as
             not requiring pre-athentication.  The default is to require pre-
             authentication.  Adding the require-preauth per principal is a
d48 2
a49 5
     ----nnoo--552244
             don't respond to 524 requests

     ----kkeerrbbeerrooss44
             respond to Kerberos 4 requests
d51 1
a51 4
     ----kkeerrbbeerrooss44--ccrroossss--rreeaallmm
             respond to Kerberos 4 requests from foreign realms.  This is a
             known security hole and should not be enabled unless you under-
             stand the consequences and are willing to live with them.
d53 1
a53 1
     --rr _s_t_r_i_n_g, ----vv44--rreeaallmm==_s_t_r_i_n_g
d55 1
a55 1
             requests.  The database can contain any number of realms, but
d57 1
a57 1
             server, it must be explicitly specified.  The default is whatever
d61 1
a61 5
     --KK, ----kkaasseerrvveerr

             Enable kaserver emulation (in case it's compiled in).

     --PP _p_o_r_t_s_p_e_c, ----ppoorrttss==_p_o_r_t_s_p_e_c
d71 2
a72 2
     All activities are logged to one or more destinations, see krb5.conf(5),
     and krb5_openlog(3).  The entity used for logging is kkddcc.
d75 6
a80 6
     The configuration file has the same syntax as krb5.conf(5),  but will be
     read before _/_e_t_c_/_k_r_b_5_._c_o_n_f, so it may override settings found there.  Op-
     tions specific to the KDC only are found in the ``[kdc]'' section.  All
     the command-line options can preferably be added in the configuration
     file.  The only difference is the pre-authentication flag, which has to
     be specified as:
a99 4
           enforce-transited-policy = _b_o_o_l_e_a_n
                Always verify the transited policy, ignoring the _d_i_s_a_b_l_e_-
                _t_r_a_n_s_i_t_e_d_-_c_h_e_c_k flag if set in the KDC client request.

a107 4
     The configuration file is only read when the kkddcc is started.  If changes
     made to the configuration file are to take effect, the kkddcc needs to be
     restarted.

a114 15
BBUUGGSS
     If the machine running the KDC has new addresses added to it, the KDC
     will have to be restarted to listen to them.  The reason it doesn't just
     listen to wildcarded (like INADDR_ANY) addresses, is that the replies has
     to come from the same address they were sent to, and most OS:es doesn't
     pass this information to the application.  If your normal mode of opera-
     tion require that you add and remove addresses, the best option is proba-
     bly to listen to a wildcarded TCP socket, and make sure your clients use
     TCP to connect.  For instance, this will listen to IPv4 TCP port 88 only:

           kdc --addresses=0.0.0.0 --ports="88/tcp"

     There should be a way to specify protocol, port, and address triplets,
     not just addresses and protocol, port tuples.

d116 1
a116 1
     kinit(1),  krb5.conf(5)
d118 1
a118 1
 HEIMDAL                       October 21, 2003                              3
@

