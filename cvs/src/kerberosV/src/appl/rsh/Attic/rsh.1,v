head	1.4;
access;
symbols
	OPENBSD_5_5:1.3.0.6
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.2
	OPENBSD_5_4_BASE:1.3
	HEIMDAL_0_7_2:1.1.1.3
	HEIMDAL_0_6_3:1.1.1.2
	OPENBSD_3_3:1.1.1.1.0.6
	OPENBSD_3_3_BASE:1.1.1.1
	OPENBSD_3_2:1.1.1.1.0.4
	OPENBSD_3_2_BASE:1.1.1.1
	OPENBSD_3_1:1.1.1.1.0.2
	OPENBSD_3_1_BASE:1.1.1.1
	HEIMDAL_0_4e:1.1.1.1
	KTH:1.1.1;
locks; strict;
comment	@.\" @;


1.4
date	2014.04.22.10.01.19;	author reyk;	state dead;
branches;
next	1.3;

1.3
date	2013.06.17.19.11.38;	author robert;	state Exp;
branches;
next	1.2;

1.2
date	2003.05.12.17.18.44;	author hin;	state dead;
branches;
next	1.1;

1.1
date	2002.02.06.08.52.24;	author hin;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.02.06.08.52.24;	author hin;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2004.10.29.15.55.24;	author biorn;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2006.04.14.07.31.58;	author biorn;	state Exp;
branches;
next	;


desc
@@


1.4
log
@The complexity and quality of kerberosV and the fact that almost
nobody is using it doesn't justify to have it in base - disable and
remove it.  If the 2 two people who use it still want it, they can
make a port or recompile OpenBSD on their own.

There is a quote in theo.c from August 2010: "basically, dung beetles
fucking.  that's what kerberosV + openssl is like".

Discussed with many.  Tests by henning@@ reyk@@ and others.
ok deraadt@@ henning@@
@
text
@.\" Copyright (c) 2002 - 2003 Kungliga Tekniska HÃ¶gskolan
.\" (Royal Institute of Technology, Stockholm, Sweden).
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\"
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\"
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" 3. Neither the name of the Institute nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE INSTITUTE AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE INSTITUTE OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"	$Id: rsh.1,v 1.3 2013/06/17 19:11:38 robert Exp $
.\"
.Dd February 20, 2004
.Dt RSH 1
.Os HEIMDAL
.Sh NAME
.Nm rsh
.Nd remote shell
.Sh SYNOPSIS
.Nm
.Op Fl 45FGKdefnuxz
.Op Fl U Pa string
.Op Fl p Ar port
.Op Fl l Ar username
.Op Fl P Ar N|O
.Ar host [command]
.Sh DESCRIPTION
.Nm
authenticates to the
.Xr rshd 8
daemon on the remote
.Ar host ,
and then executes the specified
.Ar command .
.Pp
.Nm
copies its standard input to the remote command, and the standard
output and error of the remote command to its own.
.Pp
Valid options are:
.Bl -tag -width Ds
.It Xo
.Fl 4 ,
.Fl Fl krb4
.Xc
The
.Fl 4
option requests Kerberos 4 authentication. Normally all supported
authentication mechanisms will be tried, but in some cases more
explicit control is desired.
.It Xo
.Fl 5 ,
.Fl Fl krb5
.Xc
The
.Fl 5
option requests Kerberos 5 authentication. This is analogous to the
.Fl 4
option.
.It Xo
.Fl K ,
.Fl Fl broken
.Xc
The
.Fl K
option turns off all Kerberos authentication. The security in this
mode relies on reserved ports. The long name is an indication of how
good this is.
.It Xo
.Fl n ,
.Fl Fl no-input
.Xc
The
.Fl n
option directs the input from the
.Pa /dev/null
device (see the
.Sx BUGS
section of this manual page).
.It Fl d
Enable
.Xr setsockopt 2
socket debugging.
.It Xo
.Fl e ,
.Fl Fl no-stderr
.Xc
Don't use a separate socket for the stderr stream. This can be
necessary if rsh-ing through a NAT bridge.
.It Xo
.Fl x ,
.Fl Fl encrypt
.Xc
The
.Fl x
option enables encryption for all data exchange. This is only valid
for Kerberos authenticated connections (see the
.Sx BUGS
section for limitations).
.It Xo
.Fl z
.Xc
The opposite of
.Fl x .
This is the default, and is mainly useful if encryption has been
enabled by default, for instance in the
.Li appdefaults
section of
.Pa /etc/krb5.conf
when using Kerberos 5.
.It Xo
.Fl f ,
.Fl Fl forward
.Xc
Forward Kerberos 5 credentials to the remote host.
Also settable via
.Li appdefaults
(see
.Xr krb5.conf ) .
.It Xo
.Fl F ,
.Fl Fl forwardable
.Xc
Make the forwarded credentials re-forwardable.
Also settable via
.Li appdefaults
(see
.Xr krb5.conf ) .
.It Xo
.Fl l Ar string ,
.Fl Fl user= Ns Ar string
.Xc
By default the remote username is the same as the local. The
.Fl l
option or the
.Pa username@@host
format allow the remote name to be specified.
.It Xo
.Fl n ,
.Fl Fl no-input
.Xc
Direct input from
.Pa /dev/null
(see the
.Sx BUGS
section).
.It Xo
.Fl p Ar number-or-service ,
.Fl Fl port= Ns Ar number-or-service
.Xc
Connect to this port instead of the default (which is 514 when using
old port based authentication, 544 for Kerberos 5 and non-encrypted
Kerberos 4, and 545 for encrytpted Kerberos 4; subject of course to
the contents of
.Pa /etc/services ) .
.It Xo
.Fl P Ar N|O|1|2 ,
.Fl Fl protocol= Ns Ar N|O|1|2
.Xc
Specifies the protocol version to use with Kerberos 5.
.Ar N
and
.Ar 2
select protocol version 2, while
.Ar O
and
.Ar 1
select version 1. Version 2 is believed to be more secure, and is the
default. Unless asked for a specific version,
.Nm
will try both.  This behaviour may change in the future.
.It Xo
.Fl u ,
.Fl Fl unique
.Xc
Make sure the remote credentials cache is unique, that is, don't reuse
any existing cache. Mutually exclusive to
.Fl U .
.It Xo
.Fl U Pa string ,
.Fl Fl tkfile= Ns Pa string
.Xc
Name of the remote credentials cache. Mutually exclusive to
.Fl u .
.It Xo
.Fl x ,
.Fl Fl encrypt
.Xc
The
.Fl x
option enables encryption for all data exchange. This is only valid
for Kerberos authenticated connections (see the
.Sx BUGS
section for limitations).
.It Fl z
The opposite of
.Fl x .
This is the default, but encryption can be enabled when using
Kerberos 5, by setting the
.Li libdefaults/encrypt
option in
.Xr krb5.conf 5 .
.El
.\".Pp
.\"Without a
.\".Ar command
.\".Nm
.\"will just exec
.\".Xr rlogin 1
.\"with the same arguments.
.Sh EXAMPLES
Care should be taken when issuing commands containing shell meta
characters. Without quoting, these will be expanded on the local
machine.
.Pp
The following command:
.Pp
.Dl rsh otherhost cat remotefile \*[Gt] localfile
.Pp
will write the contents of the remote
.Pa remotefile
to the local
.Pa localfile ,
but:
.Pp
.Dl rsh otherhost 'cat remotefile \*[Gt] remotefile2'
.Pp
will write it to the remote
.Pa remotefile2 .
.\".Sh ENVIRONMENT
.Sh FILES
.Bl -tag -width /etc/hosts -compact
.It Pa /etc/hosts
.El
.\".Sh DIAGNOSTICS
.Sh SEE ALSO
.Xr rlogin 1 ,
.Xr krb_realmofhost 3 ,
.Xr krb_sendauth 3 ,
.Xr hosts.equiv 5 ,
.Xr krb5.conf 5 ,
.Xr rhosts 5 ,
.Xr kerberos 8
.Xr rshd 8
.\".Sh STANDARDS
.Sh HISTORY
The
.Nm
command appeared in
.Bx 4.2 .
.Sh AUTHORS
This implementation of
.Nm
was written as part of the Heimdal Kerberos 5 implementation.
.Sh BUGS
Some shells (notably
.Xr csh 1 )
will cause
.Nm
to block if run in the background, unless the standard input is directed away from the terminal. This is what the
.Fl n
option is for.
.Pp
The
.Fl x
options enables encryption for the session, but for both Kerberos 4
and 5 the actual command is sent unencrypted, so you should not send
any secret information in the command line (which is probably a bad
idea anyway, since the command line can usually be read with tools
like
.Xr ps 1 ) .
Forthermore in Kerberos 4 the command is not even integrity
protected, so anyone with the right tools can modify the command.
@


1.3
log
@2nd part of:
update kerberosV to Heimdal 1.5.2 using BSD Makefiles based
on the ones from FreeBSD

This is getting commited now so that we can patch it up
fast in the tree.
There are known regressions so please don't try to build
this on your own now, please wait for the next available
snapshot.

If however you would still want to build it, make sure
build and install everything in the tools directory first.
@
text
@d32 1
a32 1
.\"	$Id$
@


1.2
log
@These files are not use by us, so they're removed to make the tree
a little bit leaner, and to get rid of some bad string functions.
@
text
@d1 3
a3 1
.\"	$KTH: rsh.1,v 1.1 2001/07/31 08:13:41 joda Exp $
d5 30
a34 1
.Dd July 31, 2001
d39 1
a39 2
.Nd
remote shell
d43 1
a43 1
.Op Fl U Pa string 
d46 1
d50 2
a51 2
authenticates to the 
.Xr rshd 8 
d54 1
a54 1
and then executes the specified 
d64 2
a65 2
.Fl 4 Ns ,
.Fl -krb4
d67 2
a68 2
The 
.Fl 4 
d73 2
a74 2
.Fl 5 Ns ,
.Fl -krb5
d76 1
a76 1
The 
d78 1
a78 1
option requests Kerberos 5 authentication. This is analogous to the 
d82 2
a83 2
.Fl K Ns ,
.Fl -broken
d85 1
a85 1
The 
d87 3
a89 3
option turns off all Kerberos authentication. The long name implies
that this is more or less totally unsecure. The security in this mode
relies on reserved ports, which is not very secure.
d91 2
a92 2
.Fl n Ns ,
.Fl -no-input
d94 1
a94 1
The 
d96 1
a96 1
option directs the input from the 
d101 4
d106 2
a107 2
.Fl e Ns ,
.Fl -no-stderr
d112 2
a113 2
.Fl x Ns ,
.Fl -encrypt
d126 24
a149 5
This is the default, but encryption can be enabled when using
Kerberos 5, by setting the 
.Li libdefaults/encrypt
option in
.Xr krb5.conf 5 .
d151 2
a152 2
.Fl f Ns ,
.Fl -forward
d154 5
a158 4
Forward Kerberos 5 credentials to the remote host. Also controlled by 
.Li libdefaults/forward
in 
.Xr krb5.conf 5 .
d160 2
a161 1
.Fl G
d163 5
a167 2
The opposite of 
.Fl f .
d169 2
a170 2
.Fl F Ns ,
.Fl -forwardable
d172 21
a192 4
Make the forwarded credentials re-forwardable. Also controlled by 
.Li libdefaults/forwardable
in 
.Xr krb5.conf 5 .
d194 2
a195 2
.Fl u Ns ,
.Fl -unique
d201 2
a202 2
.Fl U Pa string Ns ,
.Fl -tkfile= Ns Pa string
d207 2
a208 2
.Fl p Ar number-or-service Ns ,
.Fl -port= Ns Ar number-or-service
d210 14
a223 14
Connect to this port instead of the default (which is 514 when using
old port based authentication, 544 for Kerberos 5 and non-encrypted
Kerberos 4, and 545 for encrytpted Kerberos 4; subject of course to
the contents of
.Pa /etc/services ) .
.It Xo
.Fl l Ar string Ns ,
.Fl -user= Ns Ar string
.Xc
By default the remote username is the same as the local. The
.Fl l
option or the
.Pa username@@host
format allow the remote name to be specified.
d226 2
a227 2
.\"Without a 
.\".Ar command 
d234 1
a234 1
characters. Without quoting these will be expanded on the local
d239 1
a239 1
.Dl rsh otherhost cat remotefile > localfile
d247 1
a247 1
.Dl rsh otherhost 'cat remotefile > remotefile2'
d279 3
a281 3
will cause 
.Nm 
to block if run in the background, unless the standard input is directed away from the terminal. This is what the 
d285 1
a285 1
The 
@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@Import of heimdal-0.4e
@
text
@@


1.1.1.2
log
@Import of heimdal-0.6.3
@
text
@d1 1
a1 3
.\" Copyright (c) 2002 - 2003 Kungliga Tekniska Högskolan
.\" (Royal Institute of Technology, Stockholm, Sweden). 
.\" All rights reserved. 
d3 1
a3 30
.\" Redistribution and use in source and binary forms, with or without 
.\" modification, are permitted provided that the following conditions 
.\" are met: 
.\"
.\" 1. Redistributions of source code must retain the above copyright 
.\"    notice, this list of conditions and the following disclaimer. 
.\"
.\" 2. Redistributions in binary form must reproduce the above copyright 
.\"    notice, this list of conditions and the following disclaimer in the 
.\"    documentation and/or other materials provided with the distribution. 
.\"
.\" 3. Neither the name of the Institute nor the names of its contributors 
.\"    may be used to endorse or promote products derived from this software 
.\"    without specific prior written permission. 
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE INSTITUTE AND CONTRIBUTORS ``AS IS'' AND 
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE 
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE 
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE INSTITUTE OR CONTRIBUTORS BE LIABLE 
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL 
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS 
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) 
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT 
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY 
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF 
.\" SUCH DAMAGE. 
.\" 
.\"	$KTH: rsh.1,v 1.6 2003/04/16 19:57:25 lha Exp $
.\"
.Dd September 4, 2002
d13 1
a13 1
.Op Fl U Pa string
a15 1
.Op Fl P Ar N|O
d19 2
a20 2
authenticates to the
.Xr rshd 8
d23 1
a23 1
and then executes the specified
d33 1
a33 1
.Fl 4 ,
d36 2
a37 2
The
.Fl 4
d42 1
a42 1
.Fl 5 ,
d45 1
a45 1
The
d47 1
a47 1
option requests Kerberos 5 authentication. This is analogous to the
d51 1
a51 1
.Fl K ,
d54 1
a54 1
The
d60 1
a60 1
.Fl n ,
d63 1
a63 1
The
d65 1
a65 1
option directs the input from the
d71 1
a71 1
.Fl e ,
d77 1
a77 1
.Fl x ,
d92 1
a92 1
Kerberos 5, by setting the
d97 1
a97 1
.Fl f ,
d100 1
a100 1
Forward Kerberos 5 credentials to the remote host. Also controlled by
d102 1
a102 1
in
d107 1
a107 1
The opposite of
d110 1
a110 1
.Fl F ,
d113 1
a113 1
Make the forwarded credentials re-forwardable. Also controlled by
d115 1
a115 1
in
d118 1
a118 1
.Fl u ,
d125 1
a125 1
.Fl U Pa string ,
d131 1
a131 1
.Fl p Ar number-or-service ,
d140 1
a140 1
.Fl l Ar string ,
a147 16
.It Xo
.Fl P Ar N|O|1|2 ,
.Fl -protocol= Ns Ar N|O|1|2
.Xc
Specifies which protocol version to use with Kerberos 5.
.Ar N
and
.Ar 2
selects protocol version 2, while 
.Ar O
and
.Ar 1
selects version 1. Version 2 is believed to be more secure, and is the
default. Unless asked for a specific version,
.Nm
will try both.  This behaviour may change in the future.
d150 2
a151 2
.\"Without a
.\".Ar command
d158 1
a158 1
characters. Without quoting, these will be expanded on the local
d203 3
a205 3
will cause
.Nm
to block if run in the background, unless the standard input is directed away from the terminal. This is what the
d209 1
a209 1
The
@


1.1.1.3
log
@Import of heimdal-0.7.2
@
text
@d32 1
a32 1
.\"	$KTH: rsh.1,v 1.9 2004/02/20 12:21:42 joda Exp $
d34 1
a34 1
.Dd February 20, 2004
d88 3
a90 3
option turns off all Kerberos authentication. The security in this
mode relies on reserved ports. The long name is an indication of how
good this is.
a101 4
.It Fl d
Enable
.Xr setsockopt 2
socket debugging.
d123 5
a127 6
This is the default, and is mainly useful if encryption has been
enabled by default, for instance in the
.Li appdefaults
section of 
.Pa /etc/krb5.conf
when using Kerberos 5.
d132 9
a140 5
Forward Kerberos 5 credentials to the remote host.
Also settable via
.Li appdefaults
(see
.Xr krb5.conf ) .
d145 4
a148 5
Make the forwarded credentials re-forwardable. 
Also settable via
.Li appdefaults
(see
.Xr krb5.conf ) .
d150 2
a151 2
.Fl l Ar string ,
.Fl -user= Ns Ar string
d153 3
a155 5
By default the remote username is the same as the local. The
.Fl l
option or the
.Pa username@@host
format allow the remote name to be specified.
d157 2
a158 2
.Fl n ,
.Fl -no-input
d160 2
a161 5
Direct input from 
.Pa /dev/null
(see the
.Sx BUGS
section).
d172 9
d184 1
a184 1
Specifies the protocol version to use with Kerberos 5.
d188 1
a188 1
select protocol version 2, while 
d192 1
a192 1
select version 1. Version 2 is believed to be more secure, and is the
a195 31
.It Xo
.Fl u ,
.Fl -unique
.Xc
Make sure the remote credentials cache is unique, that is, don't reuse
any existing cache. Mutually exclusive to
.Fl U .
.It Xo
.Fl U Pa string ,
.Fl -tkfile= Ns Pa string
.Xc
Name of the remote credentials cache. Mutually exclusive to
.Fl u .
.It Xo
.Fl x ,
.Fl -encrypt
.Xc
The
.Fl x
option enables encryption for all data exchange. This is only valid
for Kerberos authenticated connections (see the
.Sx BUGS
section for limitations).
.It Fl z
The opposite of
.Fl x .
This is the default, but encryption can be enabled when using
Kerberos 5, by setting the
.Li libdefaults/encrypt
option in
.Xr krb5.conf 5 .
d211 1
a211 1
.Dl rsh otherhost cat remotefile \*[Gt] localfile
d219 1
a219 1
.Dl rsh otherhost 'cat remotefile \*[Gt] remotefile2'
@


