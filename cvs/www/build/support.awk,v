head	1.14;
access;
symbols
	ian_1999_Oct_01:1.1.1.1 ian:1.1.1;
locks; strict;
comment	@# @;


1.14
date	2014.02.20.22.24.21;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2014.01.29.14.29.21;	author jcs;	state Exp;
branches;
next	1.12;

1.12
date	2008.07.29.12.34.02;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2005.02.08.08.42.05;	author otto;	state Exp;
branches;
next	1.10;

1.10
date	2003.03.28.01.46.49;	author ian;	state Exp;
branches;
next	1.9;

1.9
date	2003.03.26.19.34.34;	author ian;	state Exp;
branches;
next	1.8;

1.8
date	2002.03.30.00.32.09;	author ian;	state Exp;
branches;
next	1.7;

1.7
date	2002.03.22.21.55.45;	author ian;	state Exp;
branches;
next	1.6;

1.6
date	2002.02.12.17.53.28;	author ian;	state Exp;
branches;
next	1.5;

1.5
date	2001.04.09.02.46.16;	author ian;	state Exp;
branches;
next	1.4;

1.4
date	2000.12.29.19.31.27;	author ian;	state Exp;
branches;
next	1.3;

1.3
date	2000.03.27.03.05.56;	author ian;	state Exp;
branches;
next	1.2;

1.2
date	99.10.07.03.34.27;	author ian;	state Exp;
branches;
next	1.1;

1.1
date	99.10.01.17.12.36;	author ian;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	99.10.01.17.12.36;	author ian;	state Exp;
branches;
next	;


desc
@@


1.14
log
@fix issue with code for nofollow in hrefs not resetting correctly between
entries
@
text
@#!/usr/bin/nawk -f

# Called from makefile to convert from support.dat to ../support.html

# convert data like this (order doesn't matter except 0 at front)
# 0
# C Erewhon
# P Ontario
# T Dictionopolis
# A R R # 1
# Z L0N 1P0
# O Consultant
# I Ian F. Darwin
# M ian@@ougge.erewhon
# U http://www.ougge.erewhon/
# N Author of lots of kool stuff.

# into HTML to make nice neat tables.

/^#/ { next; }

$1 == "0" {
	if (country == "" && prov == "")
		next;
	dump();
	reset();
	next;
	}

$1 == "C" { country = substr($0, 3);
	if (country == "USA")
		country = "United States"
	else if (country == "UAE")
		country = "United Arab Emirates"
	if (country != oldCountry) {
		print "<tr><td bgcolor=\"#E0E0E0\" colspan=\"2\" align=\"center\">"
		if (country == "United States") {
			n = split("USA", labels, " ")
		} else if (country == "United Arab Emirates") {
			n = split("UAE", labels, " ")
		} else {
			n = split(country, labels, " ")
		}
		print "<a name='" labels[1] "'></a>"
		print "<b>" country "</b>"
		print "</td></tr>"
	 }
	oldCountry = country
	next
}
$1 == "P" { prov = substr($0, 3); next }
$1 == "T" { city = substr($0, 3); next }
$1 == "A" { addr = substr($0, 3); next }
$1 == "Z" { zip = substr($0, 3); next }
$1 == "O" { org = substr($0, 3); next }
$1 == "I" { indv = substr($0, 3); next }
$1 == "B" { phone = substr($0, 3); next }
$1 == "X" { fax = substr($0, 3); next }
$1 == "M" { email = substr($0, 3); next }
$1 == "U" { url = substr($0, 3); next }
$1 == "N" { note = substr($0, 3); next }
$1 == "F" { follow = substr($0, 3); next }

# left over - must be part of note?
	{
	note = note "\n" $0
	next
	}

function dump() {
	print "<tr>"
	print "<td bgcolor=\"White\">" 
		if (indv != "")
			print "<i>" indv "</i><br />" 
		if (org != "")
			print "<b>" org "</b><br />" 
		if (addr != "")
			print addr "<br />"
		line = ""
		if (city != "")
			line = city
		if (prov != "") {
			if (line == "")
				line = prov
			else
				line = line ", " prov
		}
		if (zip != "")
			line = line " " zip
		print line "<br />"
		if (phone != "")
			print "Phone: " phone "<br />" 
		if (fax != "")
			print "FAX: " fax "<br />"
		if (email != "")
			print "Email: <a href=\"mailto:" email "\">" email "</a>" "<br />"
		if (follow != "true")
			nofollow = " rel=\"nofollow\"";
		else
			nofollow = "";
		if (url != "")
			print "URL: <a href=\"" url "\"" nofollow ">" url "</a>"
		print "</td>"
	print "	<td>" note
	print "</td></tr>"
}

function reset() {
	prov = ""
	city = ""
	addr = ""
	zip = ""
	org = ""
	indv = ""
	email = ""
	phone = ""
	fax = ""
	url = ""
	note = ""
	follow = ""
}

END {
	dump();		# don't forget the last guy!
}
@


1.13
log
@change bright blue table headers to a nicer gray

ok sthen@@
@
text
@d120 1
@


1.12
log
@add rel="nofollow" support to hrefs in the generator for support.html
"No problem" deraadt@@, ok mbalmer@@.
@
text
@d36 1
a36 1
		print "<tr><td bgcolor=\"#99FFFF\" colspan=\"2\" align=\"center\">"
@


1.11
log
@Fix anchor of United Arab Emirates
@
text
@d62 1
d97 4
d102 1
a102 1
			print "URL: <a href=\"" url "\">" url "</a>"
@


1.10
log
@Add Internet Solutions Ltda., HAPSIS, Admins WebSecurity Germany.
Bye Blitz Technology (mail & web defunct).  Typo in Safety Cable AS.
@
text
@d33 2
d39 2
@


1.9
log
@Add country navigator, generated mechanically.
@
text
@d15 1
a15 1
# U http://www.darwinsys.com
a18 1

@


1.8
log
@Print province even if city is null; use X for FAX instead of F so can have both.
@
text
@d36 6
@


1.7
log
@Minor HTML cleanup; validates as XHTML 1.0 transitional
@
text
@d49 1
a49 1
$1 == "F" { fax = substr($0, 3); next }
d69 8
a76 7
		if (city != "") {
			print city
			if (prov != "")
				print ", " prov
			if (zip != "")
				print " " zip
			print "<br />"
d78 3
@


1.6
log
@Better comments
@
text
@d35 3
a37 1
		print "<TR><TD BGCOLOR=\"#99ffff\" COLSPAN=2 ALIGN=CENTER><B>" country "</B>"
d61 2
a62 2
	print "<TR>"
	print "<TD BGCOLOR=\"White\">" 
d64 1
a64 1
			print "<i>" indv "</i><br>" 
d66 1
a66 1
			print "<b>" org "</b><br>" 
d68 1
a68 1
			print addr "<br>"
d75 1
a75 1
			print "<br>"
d78 1
a78 1
			print "Phone: " phone "<br>" 
d80 1
a80 1
			print "FAX: " fax "<br>"
d82 1
a82 1
			print "Email: <A HREF=\"mailto:" email "\">" email "</A>" "<BR>"
d84 4
a87 2
			print "URL: <A HREF=\"" url "\">" url "</A>"
	print "	<TD>" note
@


1.5
log
@Formatting problem
@
text
@d3 1
a3 1
# used by support.bld to generate the table in support.html
d7 1
a7 1
# C Canada
d9 1
a9 1
# T Palgrave
d14 1
a14 1
# M ian@@darwinsys.com
@


1.4
log
@Support: Remove Jason Ish (his request), mediascape (Robert Depenbrock's).
Add a dozen or so new entries. Groups: Add three in the USA.
Both: Correct a few typos. Better formatting (tested in Konqueror as well as NS).
@
text
@d21 1
a21 1
$1 ~ /^#/ { next; }
d24 3
a26 2
	if (FNR != 1)
		dump();
@


1.3
log
@Fix typos spotted by Louis (mixed USA and United States); force the latter.
@
text
@d61 1
a61 1
			print "Name: " indv "<BR>" 
d63 1
a63 1
			print "Organization: " org "<BR>" 
d65 1
a65 1
			print "Address: " addr "<BR>"
d67 1
a67 1
			print "City: " city
d72 1
a72 1
			print "<BR>"
d75 1
a75 1
			print "Phone: " phone "<BR>" 
d77 1
a77 1
			print "FAX: " fax "<BR>" 
@


1.2
log
@Awk scripts: change colors to match home page (philen@@).
Support: add Network Security Technologies; updates for
Adimus GmbH and Gornoslaskie Sieci (Poland).
@
text
@d31 2
@


1.1
log
@Initial revision
@
text
@d32 1
a32 1
		print "<TR><TD BGCOLOR=\"#FFFF00\" COLSPAN=2 ALIGN=CENTER><B>" country "</B>"
d57 1
a57 1
	print "<TD>" 
@


1.1.1.1
log
@Move automatic-build-page files into subdirectory
@
text
@@
