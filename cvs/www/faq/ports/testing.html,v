head	1.35;
access;
symbols
	sthen_20090618:1.1.1.1 sthen:1.1.1;
locks; strict;
comment	@# @;


1.35
date	2016.11.03.00.01.48;	author tb;	state Exp;
branches;
next	1.34;
commitid	5JsbdUaip37yWUpJ;

1.34
date	2016.11.02.23.20.26;	author tb;	state Exp;
branches;
next	1.33;
commitid	BBHtPlntb0Ons9oI;

1.33
date	2016.08.15.02.22.15;	author tb;	state Exp;
branches;
next	1.32;
commitid	3DeixV5YkPOb78RN;

1.32
date	2016.04.25.19.07.38;	author tj;	state Exp;
branches;
next	1.31;
commitid	p6Iu8CX0SolSSZvw;

1.31
date	2016.04.17.21.31.53;	author tj;	state Exp;
branches;
next	1.30;
commitid	iIlpeQWLXUolwtTP;

1.30
date	2016.04.15.20.39.49;	author tb;	state Exp;
branches;
next	1.29;
commitid	jwteSMEb4rFzI8UA;

1.29
date	2016.03.29.01.27.39;	author tb;	state Exp;
branches;
next	1.28;
commitid	4Y8oU6GBrSY1UOfW;

1.28
date	2016.03.27.19.52.09;	author sthen;	state Exp;
branches;
next	1.27;
commitid	hi2ObFv9LGB98JY5;

1.27
date	2016.03.22.10.56.56;	author sthen;	state Exp;
branches;
next	1.26;
commitid	G2izHhNJ7aqR0Y6j;

1.26
date	2016.03.21.05.46.21;	author beck;	state Exp;
branches;
next	1.25;
commitid	zEx6zFkNSFFExu0v;

1.25
date	2015.07.02.05.49.05;	author bentley;	state Exp;
branches;
next	1.24;
commitid	AP3UllesavMDEUhQ;

1.24
date	2015.07.01.18.50.21;	author zhuk;	state Exp;
branches;
next	1.23;
commitid	yihP0Yx6dBuToGZ4;

1.23
date	2015.05.11.11.18.30;	author sthen;	state Exp;
branches;
next	1.22;
commitid	wRrXxcro6dFYiwF8;

1.22
date	2015.04.01.17.16.31;	author bcallah;	state Exp;
branches;
next	1.21;
commitid	tW2vXxuXRHLjGi6Y;

1.21
date	2014.12.01.09.59.33;	author bentley;	state Exp;
branches;
next	1.20;
commitid	KHeihOuepLNuLssG;

1.20
date	2014.11.10.09.29.52;	author sthen;	state Exp;
branches;
next	1.19;
commitid	5SVRX5sqq7WlHWXj;

1.19
date	2014.07.22.19.09.22;	author zhuk;	state Exp;
branches;
next	1.18;
commitid	x0Qvr4ZKTuTVgujV;

1.18
date	2014.02.09.12.31.47;	author zhuk;	state Exp;
branches;
next	1.17;

1.17
date	2013.04.01.12.41.59;	author rpe;	state Exp;
branches;
next	1.16;

1.16
date	2013.03.11.13.20.43;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2012.10.10.08.50.07;	author rpe;	state Exp;
branches;
next	1.14;

1.14
date	2012.10.09.18.46.57;	author rpe;	state Exp;
branches;
next	1.13;

1.13
date	2012.10.09.16.17.26;	author rpe;	state Exp;
branches;
next	1.12;

1.12
date	2012.10.09.15.00.54;	author rpe;	state Exp;
branches;
next	1.11;

1.11
date	2012.09.20.06.08.41;	author rpe;	state Exp;
branches;
next	1.10;

1.10
date	2012.09.12.20.03.00;	author rpe;	state Exp;
branches;
next	1.9;

1.9
date	2012.09.12.19.24.52;	author rpe;	state Exp;
branches;
next	1.8;

1.8
date	2012.04.21.11.23.49;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2011.05.05.12.26.50;	author sthen;	state Exp;
branches;
next	1.6;

1.6
date	2010.09.19.13.35.40;	author jim;	state Exp;
branches;
next	1.5;

1.5
date	2010.07.29.05.45.23;	author steven;	state Exp;
branches;
next	1.4;

1.4
date	2010.07.29.05.29.30;	author steven;	state Exp;
branches;
next	1.3;

1.3
date	2010.05.07.09.14.49;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2009.06.18.21.47.37;	author landry;	state Exp;
branches;
next	1.1;

1.1
date	2009.06.18.16.20.42;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.06.18.16.20.42;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.35
log
@merge the "how" and "first step" sections into the introduction and
tweak some wording while there.
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>

<!-- If you make edits to any FAQ documents, please start each sentence
 on a new line, and try to keep the general formatting consistent
 with the rest of the pages -->

<title>OpenBSD Ports: Testing Guide</title>
<meta name= "description"   content= "OpenBSD Porting Guide">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="../../openbsd.css">
<link rel="canonical" href="https://www.openbsd.org/faq/ports/testing.html">
</head>

<body bgcolor= "#ffffff" text= "#000000">

<h2>
<a href="../../index.html">
<font color="#0000ff"><i>Open</i></font><font color="#000084">BSD</font></a>
<font color="#e00000">Ports - Testing Guide</font>
<small>
<a href="index.html" style="font-weight:normal;float:right">[Handbook Index]</a>
</small>
</h2>
<hr>

<ul>
  <li><a href="#Introduction">Introduction</a>
  <li><a href="#Testing"     >Testing</a>
  <li><a href="#Commenting"  >Commenting</a>
  <li><a href="#More"        >More testing</a>
</ul>

<hr>

<h2 id="Introduction">Introduction</h2>

The <a href="../faq15.html#Ports">ports tree</a> is a huge piece of work
that permits OpenBSD users to use third-party programs without wasting time
patching, configuring and installing each one individually.
This work is done by a group of volunteers who spend their time porting and
testing applications across the range of OpenBSD platforms.

<p>
Many people think that they cannot help this process because they do not have
enough knowledge, but this is wrong because they can help porters work better
and faster.
Test submitted updates or new ports which are posted on the
<a href="../../mail.html">ports mailing list</a>.
By doing this, you reduce the latency of commits and also increase the number
of ports to be committed.
Many ports are not committed because of lack of testing.

<p>
The ports tree is developed against <a href="../faq5.html#Flavors">-current</a>;
there is no guarantee that new ports or updates will work correctly on the
other branches.
This means you should upgrade your system and ports tree to -current.
Instructions on how to do this can be found at the
<a href="../current.html">following current</a> page.
It is also recommended that you subscribe to the ports and ports-changes
mailing lists.
This way, you will be notified about new or updated ports and about changes
in the ports tree.

<h2 id="Testing">Testing</h2>

There are two types of submissions on the mailing lists: new ports and updates.
New ports are generally posted as tarball attachments or URLs.
A good idea is to extract them into the <tt>/usr/ports/mystuff/</tt> directory
and test from there.
Updates are generally a diff against the -current ports tree, so it is best
to copy the port to <tt>mystuff/</tt> and apply the diff to prevent tree
breakage.
If the previous version of the port is installed, it is a good idea to remove
it before building the newer version to avoid side effects, like symbols
missing from the older version of a library.

<p>
Step-by-step building is needed to verify that every target, see
<a href="http://man.openbsd.org/ports">ports(7)</a>, is achieved correctly:

<ul><li>
<i>fetch</i>
<ul><li>
Needed to verify that distfile(s) are correctly downloaded.
Try to test all of the <tt>MASTER_SITES</tt> specified to make sure they
are all valid sources.
</ul>

<li>
<i>checksum</i>
<ul><li>
Verify that downloaded distfiles match the checksums recorded in the
<tt>distinfo</tt> file.
To download the distfiles from all defined sources and to check their
checksum you can run this command line from within the directory of
the port:

<blockquote><pre>
$ <b>for ms in $(make show=MASTER_SITES); do make clean=dist; make fetch checksum MASTER_SITES=$ms; done</b>
</pre></blockquote>
</ul>

<li>
<i>extract</i>
<ul><li>
The <tt>prepare</tt> target is automatically invoked before <tt>extract</tt>
and should install all <tt>{BUILD,LIB}_DEPENDS</tt> for this port (such as
bzip2).
</ul>

<li>
<i>patch</i>
<ul><li>
Patches should apply cleanly without any warnings.

<li>
There shouldn't be any ".orig" files left behind in the <tt>patches/</tt>
directory.

<li>
Another common mistake is to include RCS tags in a patch; this will break when
the port is checked into the repository and the RCS tag expanded.
</ul>

<li>
<i>configure</i>
<ul><li>
Check that configure scripts correctly detect features on your platform.

<li>
The configure script should not detect stray applications already installed
on your system without explicit dependencies being set in the port.

<li>
If the port does not build with the libtool from base, you can try setting
<tt>USE_LIBTOOL=gnu</tt> which uses a patched version from ports.
GNU libtool is notorious for undesired 'features' on OpenBSD, so
if the port does not build with the libtool from base, that should
be fixed and there should be a XXX comment about why in the ports
<tt>Makefile</tt>.

<li>
If the port uses CMake and you see undesired results of configure stage,
make sure to check or send the following files additionally:

<ul>
<li>
<tt>${WRKBUILD}/CMakeCache.txt</tt>
<li>
<tt>${WRKBUILD}/CMakeFiles/CMakeError.log</tt>
<li>
<tt>${WRKBUILD}/CMakeFiles/CMakeOutput.log</tt>
</ul>

</ul>

<li>
<i>build</i>
<ul><li>
Check for build errors and suspicious warnings.

<li>
Warnings about <a href="http://man.openbsd.org/tmpnam">tmpnam(3)</a> issues
should be resolved by using
<a href="http://man.openbsd.org/mkstemp">mkstemp(3)</a>.

<li>
Try to set the <tt>SEPARATE_BUILD</tt> variable to 'Yes' and test if the build
still works.

<li>
Make sure dependencies on GNU make are really necessary.
</ul>

<li>
<i>test</i>
<ul><li>
Check for errors (empty tests means okay).
 
<li>
If the tests have dependencies other than specified in
<tt>{BUILD,RUN}_DEPENDS</tt>, check that <tt>TEST_DEPENDS</tt> is
defined correctly.
</ul>


<li>
<i>fake</i>
<ul><li>
This target installs the application into a fake working directory, to ensure
that all files can be easily packaged up without affecting the base system.

<li>
The port should <b>never</b> install files outside of the fake directory 
such as into <tt>/usr/local</tt>).

<li>
GNU libtool occasionally has trouble relinking libraries during the fake
process on some architectures.

<li>Check whether all files get installed with correct ownerships and
permissions.
</ul>

<li>
<i>port-lib-depends-check</i>
<ul><li>
This will check whether all libraries on which the port depends can be reached
through either <tt>LIB_DEPENDS</tt> or <tt>WANTLIB</tt>.
The result should be empty.
The above variables should be inspected when you see lines starting "Extra"
or "Missing."
</ul>

<li>
<i>package</i>
<ul><li>
Package creation can break if <tt>pkg/PLIST*</tt> and/or <tt>pkg/PFRAG*</tt>
are wrong.
</ul>

<li>
<i>install</i>
<ul><li>
Packages should install all of the files from their packaging lists
successfully and with the correct permissions.
Be especially careful of files with the setuid bits set.

<li>
Make sure that the package <tt>INSTALL</tt> script works correctly, and does
not overwrite any files in <tt>/etc</tt>.
</ul>

<li>
<i>deinstall</i>
<ul><li>
This should remove all files installed by the package, except those in
<tt>/etc</tt>.

<li>
System files created by the package at runtime should be marked with
<tt>@@extra</tt> and/or <tt>@@extraunexec</tt> annotations in <tt>pkg/PLIST*</tt>.
</ul>

</ul>

<p>
Remaining <tt>pkg/</tt> files like <tt>DESCR</tt> and <tt>MESSAGE</tt> should
be checked for grammar and typos.
Paragraphs should be formatted using
<a href="http://man.openbsd.org/fmt">fmt(1)</a> and wrapped at 80 characters.

<h2 id="Commenting">Commenting</h2>

At the end of the test comes the really important thing: comments.
Even if the port is working fine comments must be done.
If we have ten posts where people say that the port runs fine under different
architectures then the commit is done faster.
If it does not work, then some information must be given.
There are tools that can help in this task, like portslogger(1) which is like
an "intelligent tee" that redirects output into a log file.

<p>
Example:

<blockquote><pre>
# <b>make install 2&gt;&amp;1 | /usr/ports/infrastructure/bin/portslogger .</b>
</pre></blockquote>

This will redirect the output into a log file located in the current directory.

<p>
Finally, once the port is found to be okay, other ports depending on it should
also be tested, to check whether they are still working correctly.
The <tt>show-required-by</tt> make target will help to find other ports which
depend on the current one.

<h2 id="More">More testing</h2>

Check the port's <tt>Makefile</tt> for correct dependencies, typos, incorrect
links, useless or missing variables, correct licensing and categories.
Those who are more skilled can help by examining patches, as well as
providing diffs to correct bugs, add flavors, or other enhancements.

<p>
These diffs should be done with the <tt>-uNprx CVS</tt> options.
<tt>cvs diff -uNp</tt> can also be used to generate patches against the CVS
repository.

<p>
</body>
</html>
@


1.34
log
@faq5.html#Flavors explains -current better than the empty plus.html
@
text
@a30 2
  <li><a href="#How"         >How</a>
  <li><a href="#First"       >First step</a>
d45 2
d50 1
a50 4

<h2 id="How">How</h2>

Testing submitted updates or new ports which are posted on the
d53 2
a54 4
of ports to be committed (many ports are not committed because of lack of
testing).

<h2 id="First">First step</h2>
d56 1
d60 3
a62 3
This means you should upgrade your system and ports tree to -current
(instructions on how to do this can be found at the
<a href="../current.html">following current</a>) page.
@


1.33
log
@tls on openbsd.org is now real:
- link to https://www.openbsd.org from the sub-projects' pages
- make internal links relative
- switch link rel=canonical to https to please some search engines
"go ahead" from beck, "do it!!!!" tj
@
text
@d61 1
a61 1
The ports tree is developed against <a href="../../plus.html">-current</a>;
d106 1
a106 1
 <blockquote><pre>
d108 1
a108 1
 </pre></blockquote>
@


1.32
log
@remove mentions of systrace.
@
text
@d14 1
a14 1
<link rel="canonical" href="http://www.openbsd.org/faq/ports/testing.html">
@


1.31
log
@sync porter's handbook formatting with the main faq style.
@
text
@a203 1
This kind of mistake can be easily caught by using <tt>USE_SYSTRACE=Yes</tt>.
@


1.30
log
@use short form man links in the faq and fix a few broken links
@
text
@d4 6
a9 1
<title>4 - Port Testing Guide</title>
a16 19
<!--
Copyright (c) 2005-2010 XXX

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

<!-- Passes validator.w3.org.  Please keep it this way -->

d22 4
a25 1
<font color="#e00000">4 - Port Testing Guide</font>
d29 56
d86 2
a87 5
<font color= "#0000e0">
<a href="index.html">[Handbook Index]</a>
<a href="specialtopics.html">[To Section 3 - Special Porting Topics]</a>
<a href="differences.html">[To Section 5 - Differences from other BSD Projects]</a>
</font>
d89 64
a153 1
<h3>Table of Contents</h3>
d155 8
a162 6
  <li><a href="#Introduction"    >4.1 - Introduction</a>
  <li><a href="#How"             >4.2 - How</a>
  <li><a href="#First"           >4.3 - First step</a>
  <li><a href="#Testing"         >4.4 - Testing</a>
  <li><a href="#Commenting"      >4.5 - Commenting</a>
  <li><a href="#More"            >4.6 - More testing</a>
d165 77
a241 1
<hr>
d243 10
a252 1
<h2 id="Introduction">4.1 - Introduction</h2>
d254 1
a254 64
    <p>The <a href="../faq15.html#Ports">ports tree</a> is a huge piece
    of work that
    permits OpenBSD users to use third-party programs without wasting time
    patching, configuring and installing each one individually. This work
    is done by a group of volunteers who spend their time porting and testing
    applications across the range of OpenBSD platforms. Many people think
    that they cannot help this process because they do not have enough
    knowledge; this is false because they can help porters work better and
    faster.

<h2 id="How">4.2 - How</h2>

    <p>Testing submitted updates or new ports which are posted on the
    <a href="../../mail.html">ports mailing list</a>. By doing this
    you reduce the latency of commits and also increase the number of ports to
    be committed (many ports are not committed because of lack of testing!).

<h2 id="First">4.3 - First step</h2>

    <p>The ports tree is developed against
    <a href="../../plus.html">OpenBSD-current</a>; there is no guarantee that
    new ports or updates will work correctly on the other branches.
    This means you should upgrade your system and ports tree to -current
    (instructions on how to do this can be found at the
    <a href="../current.html">Following Current</a>) pages.
    It is also recommended that you subscribe to the ports and ports-changes
    <a href="../../mail.html">mailing-lists</a>. This way you will be notified
    about new or updated ports and about changes in the ports tree.

<h2 id="Testing">4.4 - Testing</h2>

    <p>There are two types of submissions on the mailing-lists; new ports
    and updates. New ports are generally posted as tarball attachments
    or URLs. A good idea is to extract them into the
    <tt>/usr/ports/mystuff/</tt> directory and test from there.
    Updates are generally a diff against the -current ports tree, so it is best
    to copy the port to <tt>mystuff/</tt> and apply the diff to prevent tree
    breakage. If the previous version of the port is installed, it is a
    good idea to remove it before building the newer version to avoid side
    effects, like symbols missing from the older version of a library.

    <p>Step-by-step building is needed to verify that every target, see
    <a href="http://man.openbsd.org/ports.7">ports(7)</a>,
    is achieved correctly :

    <ul>
      <li><i>fetch</i>
        <ul>
         <li>Needed to verify that distfile(s) are correctly downloaded. Try
         to test all of the <tt>MASTER_SITES</tt> specified to make sure they
         are all valid sources.
        </ul>

      <li><i>checksum</i>
        <ul>
         <li>Verify that downloaded distfiles match the checksums recorded
         in the <tt>distinfo</tt> file.
         To download the distfiles from all defined sources and to check their
         checksum you can run this command line from within the directory of
         the port:
         <blockquote><pre>
$ <b>for ms in $(make show=MASTER_SITES); do make clean=dist; make fetch checksum MASTER_SITES=$ms; done</b>
         </pre></blockquote>
        </ul>
d256 15
a270 124
      <li><i>extract</i>
        <ul>
         <li>The <tt>prepare</tt> target is automatically invoked before
         <tt>extract</tt> and should install all <tt>{BUILD,LIB}_DEPENDS</tt> for
         this port (such as bzip2).
        </ul>

      <li><i>patch</i>
        <ul>
         <li>Patches should apply cleanly without any warnings.
         <li>There shouldn't be any <tt>.orig</tt> files left behind in the
             <tt>patches/</tt> directory.
         <li>Another common mistake is to include RCS tags in a patch; this
         will break when the port is checked into the repository and the RCS
         tag expanded.
        </ul>

      <li><i>configure</i>
        <ul>
         <li>Check that configure scripts correctly detect features
             on your platform.
         <li>The configure script should not detect stray applications already
             installed on your system without explicit dependencies being
             set in the port.
         <li>If the port does not build with the libtool from base, you can try
            setting <tt>USE_LIBTOOL=gnu</tt> which uses a patched version from
            ports.
            GNU libtool is notorious for undesired 'features' on OpenBSD, so
            if the port does not build with the libtool from base, that should
            be fixed and there should be a XXX comment about why in the ports
            <tt>Makefile</tt>.
         <li>If the port uses CMake and you see undesired results of configure
             stage, make sure to check or send the following files additionally:
             <ul>
                 <li><tt>${WRKBUILD}/CMakeCache.txt</tt>
                 <li><tt>${WRKBUILD}/CMakeFiles/CMakeError.log</tt>
                 <li><tt>${WRKBUILD}/CMakeFiles/CMakeOutput.log</tt>
             </ul>
        </ul>

      <li><i>build</i>
        <ul>
         <li>Check for build errors and suspicious warnings.
         <li>Warnings about
         <a href="http://man.openbsd.org/tmpnam.3">tmpnam(3)</a>
         issues should be resolved by using
         <a href="http://man.openbsd.org/mkstemp.3">mkstemp(3)</a>.
         <li>Try to set the <tt>SEPARATE_BUILD</tt> variable to 'Yes' and test
         if the build still works.
         <li>Make sure dependencies on GNU make are really necessary.
        </ul>

      <li><i>test</i>
        <ul>
          <li>Check for errors (empty tests means okay).
          <li>If the tests have dependencies other than specified in
          <tt>{BUILD,RUN}_DEPENDS</tt>, check that <tt>TEST_DEPENDS</tt> is
          defined correctly.
        </ul>


      <li><i>fake</i>
        <ul>
         <li>This target installs the application into a fake working
         directory, to ensure that all files can be easily packaged up
         without affecting the base system.
         <li>The port should <b>never</b> install files outside of the
         fake directory (such as into <tt>/usr/local</tt>).
         This kind of mistake can be easily caught by using
         <tt>USE_SYSTRACE=Yes</tt>.
         <li>GNU libtool occasionally has trouble relinking libraries
         during the fake process on some architectures.
         <li>Check whether all files get installed with correct ownerships
         and permissions.
        </ul>

      <li><i>port-lib-depends-check</i>
        <ul>
         <li>This will check whether all libraries on which the port depends
         can be reached through either <tt>LIB_DEPENDS</tt> or <tt>WANTLIB</tt>.
         The result should be empty. The above variables should be inspected
         when you see lines starting "Extra" or "Missing".
        </ul>

      <li><i>package</i>
        <ul>
         <li>Package creation can break if <tt>pkg/PLIST*</tt> and/or
         <tt>pkg/PFRAG*</tt> are wrong.
        </ul>

      <li><i>install</i>
        <ul>
         <li>Packages should install all of the files from their packaging
         lists successfully and with the correct permissions.  Be especially
         careful of files with the setuid bits set.
         <li>Make sure that the package <tt>INSTALL</tt> script works
         correctly, and does not overwrite any files in <tt>/etc</tt>.
        </ul>

      <li><i>deinstall</i>
        <ul>
         <li>This should remove all files installed by the package, except
         those in <tt>/etc</tt>.
         <li>System files created by the package at runtime should be
         marked with <tt>@@extra</tt> and/or <tt>@@extraunexec</tt> annotations
         in <tt>pkg/PLIST*</tt>.
        </ul>
    </ul>

    <p>Remaining <tt>pkg/</tt> files like <tt>DESCR</tt> and <tt>MESSAGE</tt>
    should be checked for grammar and typos.
    Paragraphs should be formatted using
    <a href="http://man.openbsd.org/fmt">fmt(1)</a>
    and wrapped at 80 characters.

<h2 id="Commenting">4.5 - Commenting</h2>

    <p>At the end of the test comes the really important thing : comments.
    Even if the port is working fine comments must be done. If we have ten
    posts where people say that the port runs fine under different architectures
    then the commit is done faster. If it does not work then some information
    must be given.
    There are tools that can help in this task, like portslogger(1) which is like
    an "intelligent tee" that redirects output into a log file.
d272 2
a273 1
    <p>Example:
d279 1
a279 2
    <p>This will redirect the output into a log file located in the current
    directory.
d281 12
a292 16
    <p>Finally, once the port is found to be okay, other ports depending on
    it should also be tested, to check whether they are still working
    correctly. The <tt>show-required-by</tt> make target will help to find
    other ports which depend on the current one.

<h2 id="More">4.6 - More testing</h2>

    <p>Check the port's <tt>Makefile</tt> for correct dependencies, typos,
    incorrect links, useless or missing variables, correct licensing and
    categories.
    Those who are more skilled can help by examining patches, as well as
    providing diffs to correct bugs, add flavors, or other enhancements.

    <p>These diffs should be done with the <tt>-uNprx CVS</tt> options.
    <tt>cvs diff -uNp</tt> can also be used to generate patches against
    the CVS repository.</p>
d295 3
a297 6

<font color= "#0000e0">
<a href="index.html">[Handbook Index]</a>
<a href="specialtopics.html">[To Section 3 - Special Porting Topics]</a>
<a href="differences.html">[To Section 5 - Differences from other BSD Projects]</a>
</font>
a299 5
<hr>
<a href="../index.html"><img height="24" width="24" src="../../images/back.gif" border="0" alt="[back]"></a>
<br>
<small>$OpenBSD: testing.html,v 1.29 2016/03/29 01:27:39 tb Exp $</small>

@


1.29
log
@new openbsd faq style. joint with tj and validator.w3.org
@
text
@d104 2
a105 2
    <a href="http://man.openbsd.org/?query=ports&amp;sektion=7&amp;">
    ports(7)</a>, is achieved correctly :
d170 4
a173 5
         <li>Warnings about <a href=
      "http://man.openbsd.org/?query=tmpnam&amp;sektion=3&amp;">
      tmpnam(3)</a> issues should be resolved by using
      <a href="http://man.openbsd.org/?query=mkstemp&amp;sektion=3&amp;">
          mkstemp(3)</a>.
d239 1
a239 1
    <a href="http://man.openbsd.org/?query=fmt&amp;sektion=1&amp;format=html">fmt(1)</a>
d290 1
a290 1
<small>$OpenBSD: testing.html,v 1.28 2016/03/27 19:52:09 sthen Exp $</small>
@


1.28
log
@add a small sprinkling of css to improve readability in the faq, ok tj@@ tb@@
@
text
@d33 1
d35 4
a38 2
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="0">
</a>
a46 1
<h1><font color="#e00000">4 - Port Testing Guide</font></h1><hr>
d291 1
a291 1
<small>$OpenBSD: testing.html,v 1.27 2016/03/22 10:56:56 sthen Exp $</small>
@


1.27
log
@fix URIs, the / before querystring is not optional,
if not fixed up by browsers the server returns 400 Bad Request.
@
text
@d7 2
d289 1
a289 1
<small>$OpenBSD: testing.html,v 1.26 2016/03/21 05:46:21 beck Exp $</small>
@


1.26
log
@change http://www.openbsd.org/cgi-bin/man.cgi to be http://man.openbsd.org
this points stuff to the new place and gets us ready to deprecate the old
place we did this.
@
text
@d100 1
a100 1
    <a href="http://man.openbsd.org?query=ports&amp;sektion=7&amp;">
d167 1
a167 1
      "http://man.openbsd.org?query=tmpnam&amp;sektion=3&amp;">
d169 1
a169 1
      <a href="http://man.openbsd.org?query=mkstemp&amp;sektion=3&amp;">
d236 1
a236 1
    <a href="http://man.openbsd.org?query=fmt&amp;sektion=1&amp;format=html">fmt(1)</a>
d287 1
a287 1
<small>$OpenBSD: testing.html,v 1.25 2015/07/02 05:49:05 bentley Exp $</small>
@


1.25
log
@Clean up meta tags.

name=distribution, name=keywords, and name=resource-type have no effect
in modern search engines and just clutter up the page source.

From Pavel Plamenov.
@
text
@d100 1
a100 1
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ports&amp;sektion=7&amp;">
d167 1
a167 1
      "http://www.openbsd.org/cgi-bin/man.cgi?query=tmpnam&amp;sektion=3&amp;">
d169 1
a169 1
      <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mkstemp&amp;sektion=3&amp;">
d236 1
a236 1
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fmt&amp;sektion=1&amp;format=html">fmt(1)</a>
d287 1
a287 1
<small>$OpenBSD: testing.html,v 1.24 2015/07/01 18:50:21 zhuk Exp $</small>
@


1.24
log
@We want DESCR to be wrapped at 80 characters, not 72.

The inconsistence was pointed out by Giannis Tsaraias, thanks!
@
text
@a4 1
<meta name= "resource-type" content= "document">
a5 2
<meta name= "keywords"      content= "openbsd,ports">
<meta name= "distribution"  content= "global">
d287 1
a287 1
<small>$OpenBSD: testing.html,v 1.23 2015/05/11 11:18:30 sthen Exp $</small>
@


1.23
log
@Add 'link rel="canonical"' to pages, acting as a hint to search engines
to list the copies on www.openbsd.org rather than mirrors.

From Carlin Bingham, ok millert@@ nick@@
@
text
@d240 1
a240 1
    and wrapped at 72 characters.
d290 1
a290 1
<small>$OpenBSD: testing.html,v 1.22 2015/04/01 17:16:31 bcallah Exp $</small>
@


1.22
log
@Change lib-depends-check to port-lib-depends-check. Noted by Joss Grosse in
a private conversation.
ok naddy@@
@
text
@d10 1
d290 1
a290 1
<small>$OpenBSD: testing.html,v 1.21 2014/12/01 09:59:33 bentley Exp $</small>
@


1.21
log
@Convert the ports faq to use id="" instead of "a name=""></a>.
@
text
@d202 1
a202 1
      <li><i>lib-depends-check</i>
d289 1
a289 1
<small>$OpenBSD: testing.html,v 1.20 2014/11/10 09:29:52 sthen Exp $</small>
@


1.20
log
@remove some more of the www@@ mentions, Job Snijders pointed out the
one on upgrade56.html
@
text
@d58 1
a58 2
<a name="Introduction"></a>
<h2>4.1 - Introduction</h2>
d70 1
a70 2
<a name="How"></a>
<h2>4.2 - How</h2>
d77 1
a77 2
<a name="First"></a>
<h2>4.3 - First step</h2>
d89 1
a89 2
<a name="Testing"></a>
<h2>4.4 - Testing</h2>
d241 1
a241 2
<a name="Commenting"></a>
<h2>4.5 - Commenting</h2>
d265 1
a265 2
<a name="More"></a>
<h2>4.6 - More testing</h2>
d289 1
a289 1
<small>$OpenBSD: testing.html,v 1.19 2014/07/22 19:09:22 zhuk Exp $</small>
@


1.19
log
@No long options in diff(1) command line. Also, add "-p" to diff options
as it sometimes helpful.
@
text
@a4 1
<link rev= "made" href="mailto:www@@openbsd.org">
a293 1
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
d295 1
a295 1
<small>$OpenBSD: testing.html,v 1.18 2014/02/09 12:31:47 zhuk Exp $</small>
@


1.18
log
@Mention files meaningful for debugging CMake-related problems.
@
text
@d280 3
a282 3
    <p>These diffs should be done with the <tt>-uNr --exclude=CVS</tt> options.
    <tt><b>cvs diff -uN</b></tt> can also be used to generate patches against
    the CVS repository.
d297 1
a297 1
<small>$OpenBSD: testing.html,v 1.17 2013/04/01 12:41:59 rpe Exp $</small>
@


1.17
log
@assorted improvments for the testing guide

- remove link to anoncvs.html, the reference to currentl.html should
  be enough to find all the infos on how to upgrade a system to
  -current

- provide a command to download and check distfiles from all
  defined MASTER_SITES

- emphasize, that extract itself does not install the dependencies,
  but the prepare target does.

- remove the part where we talk about setting USE_LIBTOOL=Yes
  to use the base libtool, now that it's the default

- in this context, SEPARATE_BUILD should be yes or unset

- add some text about setting TEST_DEPENDS

- put lib-depends-check below the package target, as it's more
  obvious to check the port BEFORE packaging it

- some <tt></tt> for files, targets and variables

ok aja@@ sthen@@
@
text
@d161 7
d297 1
a297 1
<small>$OpenBSD: testing.html,v 1.16 2013/03/11 13:20:43 espie Exp $</small>
@


1.16
log
@REGRESS -> TEST
@
text
@d86 1
a86 2
    This means
    you should upgrade your system and ports tree to -current
a87 1
    <a href="../../anoncvs.html">anoncvs</a> and
d122 6
d131 5
a135 2
        <ul><li>Each of the distfiles should install any dependent programs
        (such as bzip2) beforehand.</ul>
d154 1
a154 6
         <li>Check whether the port is using libtool.
            If it is, try setting <tt>USE_LIBTOOL=Yes</tt>.
            Then the ports infrastructure will use the libtool version from
            base, which is preferred, instead of the GNU libtool from ports
            or a version that is bundled with the software.
            If the port does not build with the libtool from base, you can try
d160 1
a160 1
            Makefile.
d171 2
a172 2
         <li>Try to set the <tt>SEPARATE_BUILD</tt> variable to 'concurrent'
         and test if the build still works.
d179 3
a199 6
      <li><i>package</i>
        <ul>
         <li>Package creation can break if <tt>pkg/PLIST*</tt> and/or
         <tt>pkg/PFRAG*</tt> are wrong.
        </ul>

d208 6
d267 3
a269 2
    <p>Check the port's Makefile for correct dependencies, typos, incorrect
    links, useless or missing variables, correct licensing and categories.
d290 1
a290 1
<small>$OpenBSD: testing.html,v 1.15 2012/10/10 08:50:07 rpe Exp $</small>
@


1.15
log
@use <blockquote><pre></pre></blockquote> for examples
let some more complex command examples stand out on its own
@
text
@d174 1
a174 1
      <li><i>regress</i>
d284 1
a284 1
<small>$OpenBSD: testing.html,v 1.14 2012/10/09 18:46:57 rpe Exp $</small>
@


1.14
log
@missing <b></b> around a command example
@
text
@d247 3
a249 3
    <pre>
    # <b>make install 2&gt;&amp;1 | /usr/ports/infrastructure/bin/portslogger .</b>
    </pre>
d284 1
a284 1
<small>$OpenBSD: testing.html,v 1.13 2012/10/09 16:17:26 rpe Exp $</small>
@


1.13
log
@remove shades of grey from example
@
text
@d266 1
d268 1
a268 1
    <tt>cvs diff -uN</tt> can also be used to generate patches against
d284 1
a284 1
<small>$OpenBSD: testing.html,v 1.12 2012/10/09 15:00:54 rpe Exp $</small>
@


1.12
log
@summarize paragraphs regarding libtool

with help from sthen@@, ok sthen@@ aja@@
@
text
@d245 1
a245 2
    <p>Example :<br>
    
d247 3
a249 11
    <div style="margin-left: 2em">
      <table border="0" cellpadding="3" width="90%">
        <tr>
          <td nowrap bgcolor="#EEEEEE">
<pre>
    # make install 2&gt;&amp;1 | /usr/ports/infrastructure/bin/portslogger .
</pre>
          </td>
        </tr>
      </table>
    </div>
d283 1
a283 1
<small>$OpenBSD: testing.html,v 1.11 2012/09/20 06:08:41 rpe Exp $</small>
@


1.11
log
@add <tt></tt> to:
- variable names
- make targes
- flags and options
- filnames
- /path/to/files

in changed paragraphs:
- start sentences on a new line
- split long lines around 72-80 colums
- fix a typo (spotted by Adam Jeanguenat)

ok sthen@@ nick@@
@
text
@a143 3
         <li>GNU libtool is notorious for undesired 'features' on OpenBSD,
             so check that the port is using a recent version which creates
             correct libraries on your architecture.
d147 12
a171 4
         <li>Check whether the port is using libtool. If it is, try
         setting <tt>USE_LIBTOOL=Yes</tt>. This way, the ports
         infrastructure will use the libtool version in the tree, instead
         of libtool versions that come bundled with the software's source.
d292 1
a292 1
<small>$OpenBSD: testing.html,v 1.10 2012/09/12 20:03:00 rpe Exp $</small>
@


1.10
log
@FNF
- small tweaks to pass validator.w3.org
- mention, that the pages passed the validation
- add missing license block to index.html
@
text
@d192 2
a193 2
         <li>Package creation can break if pkg/PLIST* and/or
         pkg/PFRAG* are wrong.
d219 1
a219 1
         in pkg/PLIST*.
d223 5
a227 3
    <p>Remaining <tt>pkg/</tt> files like DESCR and MESSAGE should be checked
    for grammar and typos.  Paragraphs should be formatted using
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fmt&amp;sektion=1&amp;format=html">fmt(1)</a> and wrapped at 72 characters.
d237 2
a238 4
    There are tools that can help in this task, like <a href=
    "http://www.openbsd.org/cgi-bin/cvsweb/ports/infrastructure/bin/portslogger">
    portslogger</a> which is like an "intelligent tee" that redirects output
    into a log file.
d260 1
a260 1
    correctly. The <i>show-required-by</i> make target will help to find
d287 1
a287 1
<small>$OpenBSD: testing.html,v 1.9 2012/09/12 19:24:52 rpe Exp $</small>
@


1.9
log
@FNF for www/faq/ports/

perl -pi -e 's#<code>#<tt>#g;s#</code>#</tt>#g' *.html
perl -pi -e 's#<strong>#<b>#g;s#</strong>#</b>#g' *.html
perl -pi -e 's#<em>#<i>#g;s#</em>#</i>#g' *.html
perl -pi -e 's#</p>##;s#</li>##' *.html

discussed with ajacoutot@@ and nick@@
@
text
@d30 2
d287 1
a287 1
<small>$OpenBSD: testing.html,v 1.8 2012/04/21 11:23:49 sthen Exp $</small>
@


1.8
log
@portslogger is in infrastructure/bin not .../build; f5_b at 163 dot com
@
text
@d68 1
a68 1
    faster.</p>
d76 1
a76 1
    be committed (many ports are not committed because of lack of testing!).</p>
d91 1
a91 1
    about new or updated ports and about changes in the ports tree.</p>
d104 1
a104 1
    effects, like symbols missing from the older version of a library.</p>
d108 1
a108 1
    ports(7)</a>, is achieved correctly :</p>
d115 1
a115 1
         are all valid sources.</li>
d121 1
a121 1
         in the <tt>distinfo</tt> file.</li>
d126 1
a126 1
        (such as bzip2) beforehand.</li></ul>
d157 1
a157 1
          mkstemp(3)</a>.</li>
d191 1
a191 1
         pkg/PFRAG* are wrong.</li>
d223 1
a223 1
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fmt&amp;sektion=1&amp;format=html">fmt(1)</a> and wrapped at 72 characters.</p>
d236 1
a236 1
    into a log file.</p>
d239 1
a239 1
    </p>
d254 1
a254 1
    directory.</p>
d267 1
a267 1
    providing diffs to correct bugs, add flavors, or other enhancements.</p>
d270 1
a270 1
    the CVS repository.</p>
d285 1
a285 1
<small>$OpenBSD: testing.html,v 1.7 2011/05/05 12:26:50 sthen Exp $</small>
@


1.7
log
@portslogger moved to ports/infrastructure/bin in 4.9.
@
text
@d234 1
a234 1
    "http://www.openbsd.org/cgi-bin/cvsweb/ports/infrastructure/build/portslogger">
d285 1
a285 1
<small>$OpenBSD: testing.html,v 1.6 2010/09/19 13:35:40 jim Exp $</small>
@


1.6
log
@Align handbook navigation with the standard FAQ.
Massive trailing white space clean up.

ok sthen@@
@
text
@d246 1
a246 1
    # make install 2&gt;&amp;1 | /usr/ports/infrastructure/build/portslogger .
d285 1
a285 1
<small>$OpenBSD: testing.html,v 1.5 2010/07/29 05:45:23 steven Exp $</small>
@


1.5
log
@zap excessive whitespace
@
text
@d38 1
d62 2
a63 2
    permits OpenBSD users to use third-party programs without wasting time 
    patching, configuring and installing each one individually. This work 
d65 3
a67 3
    applications across the range of OpenBSD platforms. Many people think 
    that they cannot help this process because they do not have enough 
    knowledge; this is false because they can help porters work better and 
d81 2
a82 2
    <p>The ports tree is developed against 
    <a href="../../plus.html">OpenBSD-current</a>; there is no guarantee that 
d84 4
a87 4
    This means 
    you should upgrade your system and ports tree to -current 
    (instructions on how to do this can be found at the 
    <a href="../../anoncvs.html">anoncvs</a> and 
d92 1
a92 1
    
d98 1
a98 1
    or URLs. A good idea is to extract them into the 
d100 1
a100 1
    Updates are generally a diff against the -current ports tree, so it is best 
d106 1
a106 1
    <p>Step-by-step building is needed to verify that every target, see 
d273 1
a273 1
  
d275 1
d285 2
a286 2
<small>$OpenBSD: testing.html,v 1.4 2010/07/29 05:29:30 steven Exp $</small>
   
@


1.4
log
@sync shared libs doc, example plist, plus some tweaks and typos
bump copyright year as well

from Daniel Dickman
@
text
@a250 3
    <br>
     <br>
     
d283 1
a283 1
<small>$OpenBSD: testing.html,v 1.2 2009/06/18 21:47:37 landry Exp $</small>
@


1.3
log
@
DEINSTALL is deprecated, tell people to use @@extra/@@extraunexec instead.
@
text
@d14 1
a14 1
Copyright (c) 2005-2009 XXX
@


1.2
log
@Advise the user to remove the previous version of a port before building
a newer version, to avoid surprises if it provides a library..
While here, make the text wrapping size more consistent with other
occurences.
@
text
@d214 3
a216 1
         <li>Make sure that the <tt>DEINSTALL</tt> script works as expected.
d286 1
a286 1
<small>$OpenBSD: testing.html,v 1.1.1.1 2009/06/18 16:20:42 sthen Exp $</small>
@


1.1
log
@Initial revision
@
text
@d101 3
a103 1
    breakage.</p>
d220 1
a220 1
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fmt&amp;sektion=1&amp;format=html">fmt(1)</a> and wrapped at 70 characters.</p>
d284 1
a284 1
<small>$OpenBSD$</small>
@


1.1.1.1
log
@Import a Porter's Handbook to the faq; based on and in future to replace
the various scattered porting documentation on the website.

This is still a work in progress and being imported but not yet linked
to allow simpler collaborative work.

Slight reworking of a submission from Daniel Dickman; big thanks :)
Discussed with many. Nick agrees with this going into the faq providing
people help maintain it.
@
text
@@
