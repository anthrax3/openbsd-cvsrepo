head	1.128;
access;
symbols;
locks; strict;
comment	@# @;


1.128
date	2016.06.16.14.36.00;	author tj;	state Exp;
branches;
next	1.127;
commitid	6gCpTRJwEHqbbahf;

1.127
date	2016.04.15.16.36.11;	author tj;	state dead;
branches;
next	1.126;
commitid	kdRptYZM6HDKDTzF;

1.126
date	2016.04.14.14.50.32;	author tj;	state Exp;
branches;
next	1.125;
commitid	Ra8WeNlOqdvAIfGO;

1.125
date	2016.03.29.01.27.39;	author tb;	state Exp;
branches;
next	1.124;
commitid	4Y8oU6GBrSY1UOfW;

1.124
date	2016.03.27.19.52.09;	author sthen;	state Exp;
branches;
next	1.123;
commitid	hi2ObFv9LGB98JY5;

1.123
date	2016.03.22.10.54.47;	author sthen;	state Exp;
branches;
next	1.122;
commitid	cyODCFvIgxpUoVc0;

1.122
date	2016.03.21.05.46.21;	author beck;	state Exp;
branches;
next	1.121;
commitid	zEx6zFkNSFFExu0v;

1.121
date	2016.03.20.22.24.56;	author tj;	state Exp;
branches;
next	1.120;
commitid	oo3sAEjx5cFwFwEI;

1.120
date	2016.02.20.22.59.20;	author tj;	state Exp;
branches;
next	1.119;
commitid	8IPwAs1etKEHjS9q;

1.119
date	2016.02.06.17.01.54;	author tb;	state Exp;
branches;
next	1.118;
commitid	C6UOzXRDen9zQQ4D;

1.118
date	2015.07.02.05.49.04;	author bentley;	state Exp;
branches;
next	1.117;
commitid	AP3UllesavMDEUhQ;

1.117
date	2015.05.25.03.48.24;	author nick;	state Exp;
branches;
next	1.116;
commitid	oGHjb6GGeX64eYZm;

1.116
date	2015.05.11.11.18.30;	author sthen;	state Exp;
branches;
next	1.115;
commitid	wRrXxcro6dFYiwF8;

1.115
date	2015.04.30.23.38.57;	author nick;	state Exp;
branches;
next	1.114;
commitid	uIacNW3dhb39XNuY;

1.114
date	2015.02.03.01.35.50;	author nick;	state Exp;
branches;
next	1.113;
commitid	eYirc4QNEcYQsmUb;

1.113
date	2014.12.01.09.49.46;	author bentley;	state Exp;
branches;
next	1.112;
commitid	VffT7s4nM0NK88NG;

1.112
date	2014.11.01.13.42.51;	author nick;	state Exp;
branches;
next	1.111;
commitid	ZgANDuwHdulMn8Ng;

1.111
date	2014.05.01.15.01.13;	author nick;	state Exp;
branches;
next	1.110;

1.110
date	2014.03.30.19.13.39;	author nick;	state Exp;
branches;
next	1.109;

1.109
date	2013.10.06.18.17.18;	author nick;	state Exp;
branches;
next	1.108;

1.108
date	2013.05.01.13.16.32;	author nick;	state Exp;
branches;
next	1.107;

1.107
date	2012.12.16.18.08.35;	author nick;	state Exp;
branches;
next	1.106;

1.106
date	2012.08.07.02.50.11;	author nick;	state Exp;
branches;
next	1.105;

1.105
date	2012.05.01.14.35.15;	author nick;	state Exp;
branches;
next	1.104;

1.104
date	2011.12.21.09.05.24;	author ajacoutot;	state Exp;
branches;
next	1.103;

1.103
date	2011.12.13.00.32.57;	author nick;	state Exp;
branches;
next	1.102;

1.102
date	2011.06.16.17.46.49;	author lum;	state Exp;
branches;
next	1.101;

1.101
date	2010.06.11.01.03.49;	author nick;	state Exp;
branches;
next	1.100;

1.100
date	2010.05.19.12.41.02;	author nick;	state Exp;
branches;
next	1.99;

1.99
date	2009.09.09.02.02.54;	author nick;	state Exp;
branches;
next	1.98;

1.98
date	2009.05.21.01.34.31;	author nick;	state Exp;
branches;
next	1.97;

1.97
date	2009.03.18.01.42.36;	author nick;	state Exp;
branches;
next	1.96;

1.96
date	2009.01.30.22.25.57;	author sthen;	state Exp;
branches;
next	1.95;

1.95
date	2009.01.07.01.03.53;	author nick;	state Exp;
branches;
next	1.94;

1.94
date	2008.11.25.02.33.20;	author nick;	state Exp;
branches;
next	1.93;

1.93
date	2008.11.12.02.59.41;	author nick;	state Exp;
branches;
next	1.92;

1.92
date	2008.10.31.16.52.30;	author nick;	state Exp;
branches;
next	1.91;

1.91
date	2008.07.02.10.35.40;	author nick;	state Exp;
branches;
next	1.90;

1.90
date	2008.07.02.00.01.20;	author nick;	state Exp;
branches;
next	1.89;

1.89
date	2008.01.26.06.29.50;	author saad;	state Exp;
branches;
next	1.88;

1.88
date	2007.12.01.10.41.51;	author tobias;	state Exp;
branches;
next	1.87;

1.87
date	2007.11.29.02.27.19;	author nick;	state Exp;
branches;
next	1.86;

1.86
date	2007.11.29.01.44.27;	author nick;	state Exp;
branches;
next	1.85;

1.85
date	2007.11.01.02.11.01;	author nick;	state Exp;
branches;
next	1.84;

1.84
date	2007.08.07.13.50.40;	author nick;	state Exp;
branches;
next	1.83;

1.83
date	2007.08.07.01.59.08;	author nick;	state Exp;
branches;
next	1.82;

1.82
date	2007.08.07.01.43.29;	author nick;	state Exp;
branches;
next	1.81;

1.81
date	2007.08.07.00.55.58;	author nick;	state Exp;
branches;
next	1.80;

1.80
date	2007.07.05.11.57.57;	author ajacoutot;	state Exp;
branches;
next	1.79;

1.79
date	2006.11.01.03.07.32;	author nick;	state Exp;
branches;
next	1.78;

1.78
date	2006.05.21.15.27.16;	author nick;	state Exp;
branches;
next	1.77;

1.77
date	2006.05.01.01.02.59;	author nick;	state Exp;
branches;
next	1.76;

1.76
date	2006.04.06.11.02.18;	author nick;	state Exp;
branches;
next	1.75;

1.75
date	2006.03.10.03.48.45;	author nick;	state Exp;
branches;
next	1.74;

1.74
date	2006.02.23.02.21.08;	author nick;	state Exp;
branches;
next	1.73;

1.73
date	2006.02.07.01.25.35;	author nick;	state Exp;
branches;
next	1.72;

1.72
date	2006.02.06.21.46.08;	author steven;	state Exp;
branches;
next	1.71;

1.71
date	2006.02.06.02.56.22;	author nick;	state Exp;
branches;
next	1.70;

1.70
date	2005.10.29.01.54.18;	author nick;	state Exp;
branches;
next	1.69;

1.69
date	2005.10.28.10.56.55;	author nick;	state Exp;
branches;
next	1.68;

1.68
date	2005.10.27.01.14.48;	author nick;	state Exp;
branches;
next	1.67;

1.67
date	2005.08.11.01.10.02;	author nick;	state Exp;
branches;
next	1.66;

1.66
date	2005.05.19.16.54.27;	author nick;	state Exp;
branches;
next	1.65;

1.65
date	2005.05.18.00.48.36;	author nick;	state Exp;
branches;
next	1.64;

1.64
date	2005.04.24.20.56.45;	author nick;	state Exp;
branches;
next	1.63;

1.63
date	2005.01.30.19.37.20;	author nick;	state Exp;
branches;
next	1.62;

1.62
date	2005.01.23.01.56.42;	author nick;	state Exp;
branches;
next	1.61;

1.61
date	2004.11.13.17.40.53;	author nick;	state Exp;
branches;
next	1.60;

1.60
date	2004.11.12.19.07.06;	author david;	state Exp;
branches;
next	1.59;

1.59
date	2004.11.10.17.04.37;	author nick;	state Exp;
branches;
next	1.58;

1.58
date	2004.10.29.17.26.01;	author nick;	state Exp;
branches;
next	1.57;

1.57
date	2004.10.20.23.04.26;	author nick;	state Exp;
branches;
next	1.56;

1.56
date	2004.09.15.15.11.34;	author nick;	state Exp;
branches;
next	1.55;

1.55
date	2004.08.09.18.07.34;	author nick;	state Exp;
branches;
next	1.54;

1.54
date	2004.08.08.18.32.49;	author nick;	state Exp;
branches;
next	1.53;

1.53
date	2004.05.20.07.57.03;	author saad;	state Exp;
branches;
next	1.52;

1.52
date	2004.05.16.22.02.23;	author nick;	state Exp;
branches;
next	1.51;

1.51
date	2004.04.30.18.06.20;	author nick;	state Exp;
branches;
next	1.50;

1.50
date	2004.03.15.18.50.46;	author saad;	state Exp;
branches;
next	1.49;

1.49
date	2004.02.20.03.29.44;	author nick;	state Exp;
branches;
next	1.48;

1.48
date	2004.02.09.18.43.08;	author nick;	state Exp;
branches;
next	1.47;

1.47
date	2004.01.11.00.27.22;	author nick;	state Exp;
branches;
next	1.46;

1.46
date	2004.01.01.04.13.34;	author nick;	state Exp;
branches;
next	1.45;

1.45
date	2003.10.30.22.43.42;	author nick;	state Exp;
branches;
next	1.44;

1.44
date	2003.10.10.00.37.55;	author nick;	state Exp;
branches;
next	1.43;

1.43
date	2003.09.19.02.56.12;	author nick;	state Exp;
branches;
next	1.42;

1.42
date	2003.09.16.01.38.29;	author nick;	state Exp;
branches;
next	1.41;

1.41
date	2003.08.06.13.58.08;	author nick;	state Exp;
branches;
next	1.40;

1.40
date	2003.08.06.02.46.35;	author nick;	state Exp;
branches;
next	1.39;

1.39
date	2003.08.05.19.54.07;	author nick;	state Exp;
branches;
next	1.38;

1.38
date	2003.08.05.17.58.27;	author nick;	state Exp;
branches;
next	1.37;

1.37
date	2003.07.25.20.05.19;	author nick;	state Exp;
branches;
next	1.36;

1.36
date	2003.07.23.02.01.56;	author nick;	state Exp;
branches;
next	1.35;

1.35
date	2003.06.22.18.54.12;	author david;	state Exp;
branches;
next	1.34;

1.34
date	2003.03.18.03.41.04;	author nick;	state Exp;
branches;
next	1.33;

1.33
date	2003.02.20.03.09.56;	author nick;	state Exp;
branches;
next	1.32;

1.32
date	2003.01.01.13.01.59;	author nick;	state Exp;
branches;
next	1.31;

1.31
date	2002.11.26.01.02.04;	author nick;	state Exp;
branches;
next	1.30;

1.30
date	2002.05.06.16.17.56;	author nick;	state Exp;
branches;
next	1.29;

1.29
date	2002.01.21.20.28.25;	author nick;	state Exp;
branches;
next	1.28;

1.28
date	2002.01.13.00.00.32;	author ericj;	state Exp;
branches;
next	1.27;

1.27
date	2002.01.12.01.39.29;	author ericj;	state Exp;
branches;
next	1.26;

1.26
date	2001.08.25.09.31.33;	author jufi;	state Exp;
branches;
next	1.25;

1.25
date	2001.01.27.22.19.47;	author ericj;	state Exp;
branches;
next	1.24;

1.24
date	99.12.06.21.45.57;	author chris;	state Exp;
branches;
next	1.23;

1.23
date	99.12.06.21.42.08;	author chris;	state Exp;
branches;
next	1.22;

1.22
date	99.12.04.21.01.13;	author chris;	state Exp;
branches;
next	1.21;

1.21
date	99.10.01.19.38.09;	author ericj;	state Exp;
branches;
next	1.20;

1.20
date	99.09.24.01.46.14;	author ericj;	state Exp;
branches;
next	1.19;

1.19
date	99.09.15.05.16.23;	author ericj;	state Exp;
branches;
next	1.18;

1.18
date	99.08.31.00.49.20;	author chris;	state Exp;
branches;
next	1.17;

1.17
date	99.08.24.15.48.03;	author art;	state Exp;
branches;
next	1.16;

1.16
date	99.08.10.15.26.16;	author ericj;	state Exp;
branches;
next	1.15;

1.15
date	99.08.02.15.31.04;	author ericj;	state Exp;
branches;
next	1.14;

1.14
date	99.07.30.19.48.18;	author ericj;	state Exp;
branches;
next	1.13;

1.13
date	99.07.26.20.02.40;	author wvdputte;	state Exp;
branches;
next	1.12;

1.12
date	99.07.20.19.47.56;	author ericj;	state Exp;
branches;
next	1.11;

1.11
date	99.07.20.15.51.51;	author wvdputte;	state Exp;
branches;
next	1.10;

1.10
date	99.06.30.16.01.27;	author ericj;	state Exp;
branches;
next	1.9;

1.9
date	99.06.28.17.29.27;	author ericj;	state Exp;
branches;
next	1.8;

1.8
date	99.06.28.02.11.11;	author ericj;	state Exp;
branches;
next	1.7;

1.7
date	99.06.24.14.11.09;	author ericj;	state Exp;
branches;
next	1.6;

1.6
date	99.06.24.11.32.30;	author wvdputte;	state Exp;
branches;
next	1.5;

1.5
date	99.06.24.03.36.18;	author ericj;	state Exp;
branches;
next	1.4;

1.4
date	99.06.18.21.43.04;	author ericj;	state Exp;
branches;
next	1.3;

1.3
date	99.05.29.05.34.18;	author ericj;	state Exp;
branches;
next	1.2;

1.2
date	99.05.25.19.18.47;	author ericj;	state Exp;
branches;
next	1.1;

1.1
date	99.05.21.18.40.47;	author wvdputte;	state Exp;
branches;
next	;


desc
@@


1.128
log
@merge faq2 and faq3 (getting to know openbsd and getting started with openbsd)
into faq1 (introduction to openbsd)

put a redirect to the faq index in place of the old files, and do the same
for faq12 (which was removed a while ago)

ok tb
@
text
@<!DOCTYPE html>
<html>
<head>
<meta http-equiv="refresh" content="0; url=index.html">
</head>
</html>
@


1.127
log
@remove faq12 "hardware and platform-specific questions"

this page was severely outdated and contained almost no information that's
useful anymore, with the following exceptions:

- info about "not configured" devices in dmesg and unsupported hardware
this has been moved to faq8.

- info about armv7 (currently commented out)
this will be moved to armv7.html or somewhere more appropriate shortly.

while here, clean up the index a bit.

discussed with and ok tb
@
text
@d1 1
a1 1
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
d4 1
a4 13

<!-- If you make edits to any FAQ documents, please start each sentence
     on a new line, and try to keep the general formatting consistent
     with the rest of the pages -->

<title>12 - Hardware and Platform-Specific Questions</title>
<meta http-equiv="Content-Type" content= "text/html; charset=ISO-8859-1">
<meta name= "description"       content= "OpenBSD FAQ 12 - Hardware and
                                          Platform Specific Questions">
<meta name= "copyright" content="This document copyright 2003-2016 by OpenBSD.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="../openbsd.css">
<link rel="canonical" href="http://www.openbsd.org/faq/faq12.html">
a5 642

<body bgcolor= "#ffffff" text= "#000000">

<h2>
<a href="../index.html">
<font color="#0000ff"><i>Open</i></font><font color="#000084">BSD</font></a>
<font color="#e00000">FAQ 12 - Hardware and Platform-Specific Questions</font>
</h2>
<hr>
<p>
<a href= "index.html">[FAQ Index]</a>
<a href= "faq11.html">[To Section 11 - The X Window System]</a>
<a href= "faq13.html">[To Section 13 - Multimedia]</a>
<p>

<h3>Table of Contents</h3>
<ul>
<li><a href="#General"  >12.1 - General hardware notes</a>
  <ul>
  <li><a href="#GenPCI"         >12.1.1 - PCI</a>
  <li><a href="#GenISA"         >12.1.2 - ISA</a>
  <li><a href="#GenNotConf"     >12.1.3 - A device is "recognized" but says
                                 "<tt>not configured</tt>" in dmesg</a>
  <li><a href="#GenSupport"     >12.1.4 - I have a card listed as "supported",
                                 but it doesn't work!</a>
  <li><a href="#WinModem"       >12.1.5 - Are WinModems supported?</a>
  <li><a href="#aac"            >12.1.6 - What happened to the Adaptec RAID
                                 support (aac)?</a>
  <li><a href="#ami"            >12.1.7 - My ami(4) card will only support one
                                 logical disk!</a>
  <li><a href="#cryptohw"       >12.1.8 - How do I activate my crypto
                                 accelerator card?</a>
  </ul>
<li><a href="#amd64"    >12.2 - AMD64</a>
  <ul>
  <li><a href="#amd64Intel"     >12.2.1 - Can I run OpenBSD/amd64 on my Intel
                                 P4 or AMD Sempron?</a>
  <li><a href="#amd64i386bin"   >12.2.2 - Can I run my i386 binary on
                                 OpenBSD/amd64?</a>
  <li><a href="#amd64better"    >12.2.3 - Is it always better to run
                                 OpenBSD/amd64 on processors that support
                                 it?</a>
  </ul>
<!-- li><a href="#armv7">12.ARM - ARMv7-based systems</a -->
<li><a href="#i386"     >12.3 - i386</a>
  <ul>
  <li><a href="#ISANIC"         >12.3.1 - ISA NICs</a>
  <li><a href="#FPU"            >12.3.2 - OpenBSD won't work on my
                                 80386/80386SX/80486SX system</a>
  <li><a href="#IrqShare"       >12.3.3 - My dmesg shows multiple devices
                                 sharing the same interrupt</a>
  <li><a href="#i386smouse"     >12.3.4 - My keyboard/mouse keeps locking
                                 up (or goes crazy)!</a>
  <li><a href="#i386soekris"    >12.3.5 - My Soekris/Alix/Lanner performs
                                 poorly</a>
  <li><a href="#i386flash"      >12.3.6 - I get "missing interrupt" errors on
                                 my CF device</a>
  <li><a href="#i386cpu"        >12.3.7 - Is this really new CPU supported?</a>
  </ul>
<li><a href="#macppc"   >12.4 - MacPPC</a>
  <ul>
  <li><a href="#macppcbm"       >12.4.1 - My bm(4) network adapter doesn't
                                 work!</a>
  </ul>
<li><a href="#sparc64"  >12.5 - UltraSPARC</a>
  <ul>
  <li><a href="#sparc64Floppy"  >12.5.1 - My UltraSPARC won't boot from the
                                 floppy image</a>
  </ul>
<li><a href="#zaurus"   >12.6 - Sharp Zaurus</a>
  <ul>
  <li><a href="#zaurusUSB"      >12.6.1 - USB devices aren't working
                                 properly</a>
  </ul>
</ul>

<hr>

<h2 id="General">12.1 - General hardware notes</h2>

<h3 id="GenPCI">12.1.1 - PCI devices</h3>

<ul>
<li>PCI devices are mostly self-configuring -- the computer and OS will
allocate resources to the cards as required.

<li>Interrupts can be shared on the PCI bus.
Not only can they be, the system will often perform better when the IRQs are
shared, especially on i386 systems.

<li>There are several different PCI bus standards.
You will occasionally find a PCI2.2 specification card that will just
not work in a PCI2.1 specification system.
Also, many cards with on-board bridges (such as, multi-port network
cards) will not work well in older systems.

<li>The PCI bus supports two levels of signaling, 3.3V and 5V.
Cards that work with 3.3V signaling have a second notch cut in their
PCI connector.
Most PCI cards use 5V signaling, which is used by most computers.
The Soekris single-board computers (Net45x1 and Net4801) are
commonly-encountered computers that only support 3.3V signaling.

</ul>

<h3 id="GenISA">12.1.2 - ISA devices</h3>

<ul>
<li>ISA devices cannot share resources, and in general, must be
manually configured to settings that don't conflict with other
devices in the system.

<li>Some ISA devices are "Plug and Play"
(<a href="http://man.openbsd.org/?query=isapnp">isapnp(4)</a>)
-- if you have any problem with these devices, though, verify their
configuration in your
<a href="http://man.openbsd.org/?query=dmesg">dmesg(8)</a>,
ISAPnP doesn't always work as desired.

<li>In general, if you have a choice, most people are best advised to avoid
ISA cards in favor of PCI.
ISA cards are more difficult to configure and have a much greater negative
impact on the system's performance.
</ul>

<h3 id="GenNotConf">12.1.3 - My device is "recognized" but says "<tt>not
configured</tt>" in dmesg</h3>

In short, it means your device is not supported by the kernel you
are using, so you will not be able to use it.

<p>
PCI and many other types of devices offer identifying information
so that the OS can properly recognize and support devices.
Adding recognition is easy, adding support is often not.
Here is part of a dmesg with two examples of "not configured"
devices:

<blockquote><pre>
...
vendor "Intel", unknown product 0x5201 (class network subclass ethernet,
rev 0x03) at pci2 dev 9 function 1 not configured
...
"Intel EE Pro 100" rev 0x03 at pci2 dev 10 function 0 not configured
...
</pre></blockquote>

The first one (a network adapter) had its vendor code identified and the
general type of card was determined, but not the precise model of the
card.
The second example was another network adapter, this one a developer had
seen and had entered into the identification file that is
used to identify the card.
In both cases, however, the cards will be non-functional, as both are
shown as "<tt>not configured</tt>", meaning no driver has attached to
the card.

<h4>What can I do about a <tt>not configured</tt> device?</h4>

<ul>
<li>If the device or card you are seeing is not one you need, you can
safely ignore the "<tt>not configured</tt>" devices, they will not hurt
your system.
Some "special purpose" devices are deliberately left unconfigured so the
system's BIOS will handle them.

<li>In some cases, it is just a variation of an already supported
device, in which case, it may be relatively easy for a developer to add
support for the new card.
In other cases, it may be a totally unsupported chip set or
implementation (such as the above examples).
In that case, a new driver would have to be written, which may not even
be possible if the device is not fully documented.
You are certainly welcome to write a driver for the device yourself.

<li>If you are running an install kernel, the device may not be
supported by the install media you used, but may be supported by a
different boot disk.
This is a common issue with users of some popular SCSI cards who misread
the footnotes on the <a href="../i386.html">i386 platform page</a>
and try all the boot floppies their SCSI card is NOT supported on,
rather than the one that it is supported on.

<li>If you are running a modified kernel, you may have removed support
for a device you now need.
In general, removing devices from a kernel is a bad idea.
This is one reason why.

<li>Before reporting a "<tt>not configured</tt>" device, make sure you
have first tested the most recent
<a href="faq5.html#Flavors">snapshot</a>, as support may already have
been added, and check the <a href="../mail.html">mailing list archives</a>
to see if the issue has been discussed already.
Remember, however, if you are using an older version of OpenBSD, you
will generally have to upgrade to get the benefit of any new driver
written.
</ul>

<h3 id="GenSupport">12.1.4 - I have a card listed as "supported", but it
doesn't work!</h3>

Unfortunately, many manufacturers use product model numbers to indicate
marketplace position, rather than the technical nature of a product.
For this reason, you may buy a product with the same name or model
number as a product listed in the <a href="../plat.html">platform
pages</a>, but end up with a totally different product that may not work
with OpenBSD.
For example, many early wireless network adapters were based on the
Prism2 chip set, using the
(<a href="http://man.openbsd.org/?query=wi">wi(4)</a>)
driver, but later, when lower-cost chips became available, many
manufacturers changed their product to use chips for which no open
source drivers exist, but never changed their model numbers.
Wireless network adapters, unfortunately, are far from the only
example of this.

<a name="i386WinModem"></a><h3 id="WinModem">12.1.5 - Are WinModems
supported?</h3>

WinModems are low-cost modems which rely on the processor to do much of
the signal processing normally done in hardware in a "real" modem.
Due to the variety of incompatible and typically undocumented WinModem
chips, there is no support for WinModems in OpenBSD, and this is not
likely to change.

<h3 id="aac">12.1.6 - What happened to the Adaptec RAID support (aac)?</h3>

Adaptec has refused to provide useful and accurate documentation about
their FSA-based
(<a href="http://man.openbsd.org/?query=aac">aac(4)</a>)
RAID controllers.
As these RAID controllers seem to be very buggy, this documentation is
critical for a useful driver.
Since this driver was so unreliable, it was removed from the GENERIC
kernel.

<h4>I can compile my own kernel with aac(4) support, right?</h4>

Sure.
But what part of "unreliable" did you fail to understand?
This isn't an "experimental" feature, this is a known-flawed driver.
Maybe it works with some variations of hardware sufficiently well to be
usable, but we don't recommend betting your data on it.

<h3 id="ami">12.1.7 - My ami(4) card will only support one logical disk!</h3>

There is a known bug with
<a href="http://man.openbsd.org/?query=ami">ami(4)</a>
which will cause data corruption if you use more than one volume on
some controllers.
On controllers with this issue, OpenBSD will limit you to one logical
disk, resulting in a message in your dmesg that looks like:
<blockquote><pre>
ami0: FW A.04.03, BIOS vA.04.03, 4MB RAM
ami0: 3 channels, 16 targets, 2 logical drives
ami0: firmware buggy, limiting access to first logical disk
scsibus0 at ami0: 1 targets
</pre></blockquote>

<h3 id="cryptohw">12.1.8 - How do I activate my crypto accelerator card?</h3>

Supported crypto accelerator hardware, such as the
<a href="http://man.openbsd.org/?query=hifn">hifn(4)</a>
based cards will "just work" when installed in an OpenBSD system.
No activation or other configuration is needed.

<p>
The overhead of talking to one of these devices will sometimes negate
much or all of the benefit of offloading the processor of the crypto
tasks.
Your results may vary widely depending on the task you have to
accomplish.

<h2 id="amd64">12.2 - AMD64</h2>

<h3 id="amd64Intel">12.2.1 - Can I run OpenBSD/amd64 on my Intel P4 or
AMD Sempron?</h3>

In the case of many recent processors, the answer is yes.
Unfortunately, trying to find out which processor variations do
and which do not properly support the amd64 instruction set is difficult.
It is usually easier to just try it and see if it works.

<p>
Processors that do not support the amd64 instruction set will fail very
early when booting the kernel; there will be no question about "does it
work?" in your mind.

<h3 id="amd64i386bin">12.2.2 - Can I run my i386 binary on OpenBSD/amd64?</h3>

No.

<p>
OpenBSD/amd64 is a totally separate platform from OpenBSD/i386, and at
this point, no binary compatibility is provided.
As OpenBSD encourages open source applications, there is not much
interest in binary compatibility across platforms with developers.

<p>
Note that the OpenBSD/amd64 and OpenBSD/i386 boot loaders will
load each other's kernels, making it easier to reinstall a system with the
"other" platform.
However, it has to be a complete "wipe and reinstall" operation -- left-over
binaries from the "previous" installation will most likely make your life
unpleasant.

<h3 id="amd64better">12.2.3 - Is it always better to run OpenBSD/amd64 on
processors that support it?</h3>

Not always.

<p>
There are a number of reasons one may desire to use OpenBSD/i386
over OpenBSD/amd64, even on hardware that supports amd64 code:

<ul>
<li>Need for i386 binary (or other OS) compatibility.
<li>Need to run applications that are not "64 bit clean".
<li>Need for ability to move disks to another machine that isn't amd64 capable
<li>For some applications and on some hardware, OpenBSD/i386 may outperform
  OpenBSD/amd64.
  Relatively few people will ever experience this, and work is
  on-going to eliminate as many of these situations as possible.
</ul>

<!--
<h2 id="armv7">12.ARM - ARMv7-based systems (BeagleBoard, PandaBoard,
SABRE Lite, Nitrogen6x)</h2>

<p>
<b>Building from source:</b>
At this moment, the kernel has to be in the FAT boot partition, not the
root of the file system like other OpenBSD platforms, and this kernel
must be in a format required by the U-Boot boot loader.
So, after building your kernel, you must go through some special steps:

<blockquote><pre>
config GENERIC-OMAP <i># for Beagle; others may use GENERIC-IMX</i>
cd ../compile/GENERIC-OMAP
make clean; make
make bsd.umg            <i># Extra steps start here!</i>
mount /dev/sd0i /mnt    <i># assuming your FAT partition is 'i'</i>
cp bsd.umg /mnt
</pre></blockquote>


<p>
<b>No real time clock:</b> Many of the armv7 devices do not have a
battery backed real time clock.
For this reason, using the "-s" option of
<a href="faq6.html#OpenNTPD">OpenNTPD</a> may be desirable.

<p>
<b>Distribution kernels must be converted before use:</b>
The distribution kernels are standard kernels, which can be used
for the <tt>-N</tt> option of
<a href="http://man.openbsd.org/?query=ps">ps(1)</a>,
<a href="http://man.openbsd.org/?query=vmstat">vmstat(8)</a>,
<a href="http://man.openbsd.org/?query=dmesg">dmesg(8)</a>,
<a href="http://man.openbsd.org/?query=iostat">iostat(8)</a>
and similar applications, but cannot be booted directly by the U-Boot
bootloader used on this platform.

This can be done using
<a href="http://man.openbsd.org/?query=mkuboot">mkuboot(8)</a>

<p>
Typical operation is something along these lines for OMAP/beagle:
<blockquote><pre>
mkuboot -a arm -o linux -e 0x80300000 -l 0x80300000 <i>bsd</i> bsd.umg
</pre></blockquote>

for i.MX6:
<blockquote><pre>
mkuboot -a arm -o linux -e 0x10800000 -l 0x10800000 <i>bsd</i> bsd.umg
</pre></blockquote>


where <i>bsd</i> is the name of the kernel you are converting.

<p>
<b>U-Boot tricks:</b>
<ul>
<li>Booting single user (OMAP/beagle):
<blockquote><pre>
U-Boot# mmc rescan
U-Boot# setenv bootargs sd0 -s
U-Boot# fatload mmc 0 0x82800000 bsd.umg
U-Boot# bootm 0x82800000
</pre></blockquote>

<li>Booting single user (i.MX6, mmc storage):
<blockquote><pre>
U-Boot# mmc rescan
U-Boot# setenv bootargs sd0 -s
U-Boot# fatload mmc 0 0x12000000 bsd.umg
U-Boot# bootm 0x12000000
</pre></blockquote>

<li>Booting single user (i.MX6, SATA storage):
<blockquote><pre>
U-Boot# sata init
U-Boot# setenv bootargs sd0 -s
U-Boot# fatload sata 0 0x12000000 bsd.umg
U-Boot# bootm 0x12000000
</pre></blockquote>

</ul>
-->

<h2 id="i386">12.3 - i386</h2>

<h3 id="ISANIC">12.3.1 - ISA NICs</h3>

As OpenBSD runs well on older hardware, users often will end up using
ISA NICs on OpenBSD systems.
ISA hardware requires much more configuration and understanding than
does PCI hardware.
In general, you can't just stuff the card in the computer and expect it
to magically work.
In many machines, if your ISA device is not in a "Plug 'n' Play" (PNP)
mode, you must reserve the resources the card uses in the system's BIOS.

<h4>3Com 3C509B ep(4)</h4>

This is an excellent performing (relatively speaking) ISA NIC, supported by the
<a href="http://man.openbsd.org/?query=ep">ep(4)</a>
driver.
The 'B' version can be distinguished from the non-B version by labeling
on the card and by the larger "main" chip on the board (approximately
2.5cm on a side for the 'B' version, vs. 2cm on a side on the older
version), and will provide better performance on a loaded or dual
network card system.
The 3C509B ships configured in a PNP mode, which unfortunately does not
comply with standards, and causes problems in OpenBSD's
<a href="http://man.openbsd.org/?query=isapnp">isapnp(4)</a>
support.
The adapter is picked up first as a non-PNP device, then again after the
PNP support comes on-line, resulting in an extra NIC showing in the dmesg.
This may work fine, or it may cause other problems.
It is highly recommended that the 3C509B cards have PNP mode disabled and
manually configured to non-conflicting settings using the 3Com DOS-based
configuration utilities before configuration.

<p>
The ep(4) driver will pick the cards up at any hardware combination that
does not conflict with other devices in the system.

<p>
If you have multiple 3C509 cards in your system, it is recommended that
you label the cards' spine with the MAC address, and use the dmesg to
identify which is which.

<p>
Note that the 3C509, the 3C905 and the 3C590 are often confused.
The 3C509 is a 10Mbps ISA card, the 3C905 and 3C590 are PCI cards.

<h4>NE2000</h4>

The original NE2000 NIC was developed in the mid-1980s by Novell.
Since then, many manufacturers have produced cards that are very
similar, which are generally called NE2000-compatibles, or clones.
Performance of these clone cards varies greatly.
While some older NE2000-compatible cards performed very well, many of
the later ones perform poorly.
NE2000-compatibles are supported by the
<a href="http://man.openbsd.org/?query=ne">ne(4)</a>
driver in OpenBSD.

<p>
OpenBSD will handle some ISAPNP-capable NE2000-compatible cards well if
the ISAPNP mode is turned on.
Other cards will have to be set using either jumpers or a DOS-based
configuration utility.
Unfortunately, as the original NE2000 cards did not have software
configuration or ISAPNP support, there are no standards for this -- you
need the utility that will have been originally supplied with your
specific card.
This can often be difficult to obtain.

<p>
The ne(4) driver supports three configurations of the ISA NE2000 card
in the GENERIC OpenBSD kernel:
<pre>
     ne0:  port 0x240 irq 9
     ne1:  port 0x300 irq 10
     ne2:  port 0x280 irq 9
</pre>
If these settings are not acceptable, you can adjust them using
<a href="faq5.html#BootConfig">User Kernel Configuration (UKC)</a>.

<p>
Note that the ne(4) driver is fairly "dumb" -- only the I/O port is probed.
If any of the above I/O addresses are detected, the corresponding IRQ is
<i>assumed</i>.
<a href="http://man.openbsd.org/?query=dmesg">dmesg(8)</a>
will not reflect the actual IRQ of the adapter in the case of ISA ne(4)
drivers.
If this is not the actual IRQ your card is set to, it will not work.

<p>
Note that there are non-ISA cards that use the ne(4) driver -- PCI and
PCMCIA ne(4) cards exist.
These notes do not apply to them, these devices are auto-configuring.

<a name="80386"></a><h3 id="FPU">12.3.2 - OpenBSD won't work on my
80386/80386SX/80486SX system!</h3>

<h4>80386SX/DX</h4>

Support for the 80386DX and 80386SX processors was dropped beginning
with OpenBSD 4.2.
In addition to limitations of the 80386 chip, the systems are just too
slow and rarely had enough RAM and the required FPU to run OpenBSD.

<h4>80486SX</h4>

The 80486SX chip was a "low-cost" version of the 80486, which, like the
80386, lacked the hardware floating point support OpenBSD requires.
Fortunately, full 80486DX chips are fairly available, and is an easy
upgrade in most systems.

<p>
The 80486DX and newer chips run OpenBSD fine.

<h3 id="IrqShare">12.3.3 - My dmesg shows multiple devices sharing the same
interrupt (IRQ)!</h3>

This is entirely acceptable, and in fact, even desirable for PCI devices.
This is a design feature of the PCI bus.
Some people will say that sharing interrupt requests (IRQs) is bad,
however they are either confusing the situation with the ISA bus (where
IRQ sharing is not permitted), or past experience with broken hardware
or software.

<p>
ISA devices cannot share IRQs.
If you find ISA devices sharing IRQs, you must correct this problem.

<h3 id="i386smouse">12.3.4 - My keyboard/mouse keeps locking up
(or goes crazy)!</h3>

This is most often seen when using a "switch box" (sometimes called a
"KVM switch") to attach multiple
computers to one keyboard, monitor and mouse.
You can experiment with different brand and design switch boxes, but
OpenBSD seems to be more sensitive to switching the mouse than some
other operating systems.
The problem is usually just the switching of the mouse.
If you are not using the mouse, the solution is simple:
don't attach the mouse cable to the computer.
If you are using the mouse, an easy solution is "one mouse per computer",
and switch just the keyboard and monitor.
You may find using a PS/2 Mouse -> USB port adapter (so OpenBSD sees a
USB mouse) will work around this problem.
If you just want console access to the machine, you may wish to consider using a
<a href="faq7.html#SerCon">serial console</a> instead.

<h3 id="i386soekris">12.3.5 - My Soekris/Alix/Lanner performs poorly</h3>

These machines are quiet, low-power, small and modest cost PC class
systems, and many OpenBSD users are quite pleased with them.
However, it must be remembered the processors, NICs, and other devices
on the system are all chosen for low power consumption, not performance.
While they are suitable for many applications, they are not high
performance machines compared to contemporary full-feature machines.

<h3 id="i386flash">12.3.6 - I get "missing interrupt" errors on my CF
device</h3>

With some CF systems, such as early Soekris 4801 systems and some CF adapters,
the DMA support is not properly wired up, so you might see messages such as:

<blockquote><pre>
pciide0:0:0: bus-master DMA error: missing interrupt, status=0x20
</pre></blockquote>

In these cases, you will need to disable DMA in the
<a href="http://man.openbsd.org/?query=wd">wd(4)</a>
driver to avoid this problem.
This can be done using <a href="faq5.html#BootConfig">ukc</a> to install, then
<a href="faq5.html#config">config(8)</a> to change it permanently:

<blockquote><pre>
ukc> <b>change wd</b>
 42 wd* at wdc*|pciide* channel -1 flags 0x0
change [n] <b>y</b>
channel [-1] ?
flags [0] ? <b>0x0ff0</b>
 42 wd* changed
 42 wd* at wdc*|pciide* channel -1 flags 0xff0
ukc> <b>quit</b>
</pre></blockquote>

<h3 id="i386cpu">12.3.7 - Is this really new CPU supported?</h3>

The issue of support is rarely the CPU itself, it is almost always the
surrounding and supporting hardware.

<p>
Most likely, yes, the latest CPU is supported just fine.
The surrounding support hardware may not work if it is significantly
different than earlier versions.
If you have problems with new hardware, make sure you try a
<a href="faq5.html#Flavors">snapshot</a> before making a
<a href="faq2.html#Bugs">bug report</a>.

<h2 id="macppc">12.4 - MacPPC</h2>

<h3 id="macppcbm">12.4.1 - My bm(4) network adapter doesn't work!</h3>

The
<a href="http://man.openbsd.org/?query=bm">bm(4)</a>
driver, supporting the BMAC chip used on some MacPPC systems (including
early iMacs) has issues.
A
<a href="http://man.openbsd.org/?query=usb">usb(4)</a>
NIC is recommended for these systems at this time.

<h2 id="sparc64">12.5 - UltraSPARC (sparc64)</h2>

<h3 id="sparc64Floppy">12.5.1 - My UltraSPARC won't boot from the floppy
image</h3>

Only the Ultra 1/1e and Ultra 2 can boot <i>any</i> OS from floppy disk.
Use CD-ROM, Miniroot, or network boot to do your installation instead.

<h2 id="zaurus">12.6 - Sharp Zaurus</h2>

<h3 id="zaurusUSB">12.6.1 - USB devices aren't working properly</h3>

The Zaurus has very little current available on its USB port, so many
USB devices will not work if they are directly attached to it.
You will need to use a powered USB hub to run these devices.

<p>
<hr>
<p>
<a href= "index.html">[FAQ Index]</a>
<a href="faq11.html">[To Section 11 - The X Window System]</a>
<a href= "faq13.html">[To Section 13 - Multimedia]</a>
</body>
@


1.126
log
@remove vax section from faq12; reminded by ray lai
@
text
@@


1.125
log
@new openbsd faq style. joint with tj and validator.w3.org
@
text
@d87 1
a87 1
<li><a href="#vax"      >12.6 - DEC VAX</a>
d89 1
a89 5
  <li><a href="#vaxSIMH"        >12.6.1 - Can I use the SIMH VAX simulator?</a>
  </ul>
<li><a href="#zaurus"   >12.7 - Sharp Zaurus</a>
  <ul>
  <li><a href="#zaurusUSB"      >12.7.1 - USB devices aren't working
d645 1
a645 13
<h2 id="vax">12.6 - DEC VAX</h2>

<h3 id="vaxSIMH">12.6.1 - Can I use the SIMH VAX simulator?</h3>

Yes!

<p>
The <a href="http://simh.trailing-edge.com/">SIMH</a> VAX simulator
can be used to effectively emulate a real VAX.
Instructions can be found in the <a href="../vax-simh.html">OpenBSD/vax
on SIMH</a> page.

<h2 id="zaurus">12.7 - Sharp Zaurus</h2>
d647 1
a647 1
<h3 id="zaurusUSB">12.7.1 - USB devices aren't working properly</h3>
@


1.124
log
@add a small sprinkling of css to improve readability in the faq, ok tj@@ tb@@
@
text
@d21 1
d23 4
a26 2
<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif" border="0">
</a>
d29 1
a29 1
<a href="faq11.html">[To Section 11 - The X Window System]</a>
d31 1
a31 5

<h1><font color="#e00000">12 - Hardware and Platform-Specific
Questions</font></h1>

<hr>
@


1.123
log
@fix URIs, the / before querystring isn't optional, if it isn't fixed up
by the browser the server returns 400 Bad Request
@
text
@d14 2
@


1.122
log
@change http://www.openbsd.org/cgi-bin/man.cgi to be http://man.openbsd.org
this points stuff to the new place and gets us ready to deprecate the old
place we did this.
@
text
@d134 1
a134 1
(<a href="http://man.openbsd.org?query=isapnp">isapnp(4)</a>)
d137 1
a137 1
<a href="http://man.openbsd.org?query=dmesg">dmesg(8)</a>,
d230 1
a230 1
(<a href="http://man.openbsd.org?query=wi">wi(4)</a>)
d250 1
a250 1
(<a href="http://man.openbsd.org?query=aac">aac(4)</a>)
d268 1
a268 1
<a href="http://man.openbsd.org?query=ami">ami(4)</a>
d283 1
a283 1
<a href="http://man.openbsd.org?query=hifn">hifn(4)</a>
d377 4
a380 4
<a href="http://man.openbsd.org?query=ps">ps(1)</a>,
<a href="http://man.openbsd.org?query=vmstat">vmstat(8)</a>,
<a href="http://man.openbsd.org?query=dmesg">dmesg(8)</a>,
<a href="http://man.openbsd.org?query=iostat">iostat(8)</a>
d385 1
a385 1
<a href="http://man.openbsd.org?query=mkuboot">mkuboot(8)</a>
d447 1
a447 1
<a href="http://man.openbsd.org?query=ep">ep(4)</a>
d456 1
a456 1
<a href="http://man.openbsd.org?query=isapnp">isapnp(4)</a>
d487 1
a487 1
<a href="http://man.openbsd.org?query=ne">ne(4)</a>
d516 1
a516 1
<a href="http://man.openbsd.org?query=dmesg">dmesg(8)</a>
d599 1
a599 1
<a href="http://man.openbsd.org?query=wd">wd(4)</a>
d633 1
a633 1
<a href="http://man.openbsd.org?query=bm">bm(4)</a>
d637 1
a637 1
<a href="http://man.openbsd.org?query=usb">usb(4)</a>
@


1.121
log
@fix a few broken links; from peter de wachter
@
text
@d134 1
a134 1
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isapnp">isapnp(4)</a>)
d137 1
a137 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg">dmesg(8)</a>,
d230 1
a230 1
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wi">wi(4)</a>)
d250 1
a250 1
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=aac">aac(4)</a>)
d268 1
a268 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ami">ami(4)</a>
d283 1
a283 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hifn">hifn(4)</a>
d377 4
a380 4
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ps">ps(1)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vmstat">vmstat(8)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg">dmesg(8)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iostat">iostat(8)</a>
d385 1
a385 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mkuboot">mkuboot(8)</a>
d447 1
a447 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ep">ep(4)</a>
d456 1
a456 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isapnp">isapnp(4)</a>
d487 1
a487 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ne">ne(4)</a>
d516 1
a516 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg">dmesg(8)</a>
d599 1
a599 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wd">wd(4)</a>
d633 1
a633 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bm">bm(4)</a>
d637 1
a637 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=usb">usb(4)</a>
@


1.120
log
@- remove section 1.9 "what's new in 5.8" (just read the release page)
- remove section 2.1 "web pages of interest"
- amd 64 -> amd64
- mail list -> mailing list
- clean up table of contents
- remove "back" button on index (browsers can do this by themselves now)

ok tb
@
text
@d206 1
a206 2
In general, removing devices from a kernel is a
<a href="faq5.html#Why">bad idea</a>.
@


1.119
log
@prune useless [ nothing yet ] sections, use continguous numbering and
do the usual clean up deal: new sentence, new line, shorten man links,
line wrapping and the occasional reformulation.

ok tj@@
@
text
@d4 5
d50 1
a50 1
<li><a href="#amd64"    >12.2 - AMD 64</a>
d213 1
a213 1
been added, and check the <a href="../mail.html">mail list archives</a>
d295 1
a295 1
<h2 id="amd64">12.2 - AMD 64</h2>
@


1.118
log
@Clean up meta tags.

name=distribution, name=keywords, and name=resource-type have no effect
in modern search engines and just clutter up the page source.

From Pavel Plamenov.
@
text
@d5 4
a8 3
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name= "description"   content= "OpenBSD FAQ 12 - Hardware and Platform Specific Questions">
<meta name= "copyright"     content= "This document copyright 2003-2015 by OpenBSD.">
d15 1
a15 1
<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif" border="0">    
d24 1
a26 1
<p>
d29 1
a29 1
<li><a href="#General">12.1 - General hardware notes</a>
d31 13
a43 11
  <li><a href="#GenPCI">12.1.1 - PCI</a>
  <li><a href="#GenISA">12.1.2 - ISA</a>
  <li><a href="#GenNotConf">12.1.3 - A device is "recognized" but says
      "<tt>not configured</tt>" in dmesg</a>
  <li><a href="#GenSupport">12.1.4 - I have a card listed as "supported",
      but it doesn't work!</a>
  <li><a href="#WinModem">12.1.5 - Are WinModems supported?</a>
  <li><a href="#aac">12.1.6 - What happened to the Adaptec RAID support (aac)?</a>
  <li><a href="#ami">12.1.7 - My ami(4) card will only support one
       logical disk!</a>
  <li><a href="#cryptohw">12.1.8 - How do I activate my crypto accelerator card?</a>
d45 1
a45 2
<li><a href="#alpha">12.2 - DEC Alpha </a>
<li><a href="#amd64">12.3 - AMD 64</a>
d47 7
a53 6
  <li><a href="#amd64Intel">12.3.1 - Can I run OpenBSD/amd64 on my Intel
    P4 or AMD Sempron?</a>
  <li><a href="#amd64i386bin">12.3.2 - Can I run my i386 binary on
    OpenBSD/amd64?</a>
  <li><a href="#amd64better">12.3.3 - Is it always better to run
    OpenBSD/amd64 on processors that support it?</a>
d55 2
a56 4
<li><a href="#armish" >12.4 - ARM-based appliances</a>
<!-- li><a href="#armv7">12.5 - ARMv7-based systems</a -->
<li><a href="#hppa" >12.7 - HP Precision Architecture (PA-RISC)</a>
<li><a href="#i386" >12.8 - i386</a>
d58 12
a69 11
  <li><a href="#ISANIC">12.8.1 - ISA NICs</a>
  <li><a href="#FPU">12.8.2 - OpenBSD won't work on my
       80386/80386SX/80486SX system</a>
  <li><a href="#IrqShare">12.8.3 - My dmesg shows multiple devices sharing
       the same interrupt</a>
  <li><a href="#i386smouse">12.8.4 - My keyboard/mouse keeps locking
       up (or goes crazy)!</a>
  <li><a href="#i386soekris">12.8.5 - My Soekris/Alix/Lanner performs poorly</a>
  <li><a href="#i386flash">12.8.6 - I get "missing interrupt" errors on
       my CF device</a>
  <li><a href="#i386cpu">12.8.7 - Is this really new CPU supported?</a>
d71 1
a71 3
<li><a href="#landisk">12.9 - Landisk</a>
<li><a href="#luna88k">12.10 - Luna88k</a>
<li><a href="#macppc">12.11 - MacPPC</a>
d73 2
a74 1
  <li><a href="#macppcbm">12.11.1 - My bm(4) network adapter doesn't work!</a>
d76 1
a76 3
<li><a href="#sgi">12.14 - SGI</a>
<li><a href="#sparc">12.15 - SPARC</a>
<li><a href="#sparc64">12.16 - UltraSPARC</a>
d78 2
a79 2
  <li><a href="#sparc64Floppy">12.16.1 - My UltraSPARC won't boot from the
       floppy image</a>
d81 1
a81 1
<li><a href="#vax">12.17 - DEC VAX</a>
d83 1
a83 1
  <li><a href="#vaxSIMH">12.17.1 - Can I use the SIMH VAX simulator?</a>
d85 1
a85 1
<li><a href="#zaurus">12.18 - Sharp Zaurus</a>
d87 2
a88 1
  <li><a href="#zaurusUSB">12.18.1 - USB devices aren't working properly</a>
d102 3
a104 3
<li>Interrupts can be shared on the PCI bus.  Not only can they be, the
system will often perform better when the IRQs are shared, especially on 
i386 systems.
d122 1
d128 2
a129 2
<li>Some ISA devices are "Plug and Play" 
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isapnp&amp;sektion=4">isapnp(4)</a>)
d132 2
a133 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg(8)</a>, ISAPnP doesn't always work as desired.
d136 3
a138 2
ISA cards in favor of PCI.  ISA cards are more difficult to configure and 
have a much greater negative impact on the system's performance.
d174 1
d196 1
a196 1
and try all the boot floppies their SCSI card is NOT supported on, 
d215 3
a217 2
<h3 id="GenSupport">12.1.4 - I have a card listed as "supported", but it doesn't
work!</h3>
d226 1
a226 1
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wi&amp;sektion=4">wi(4)</a>)
d233 3
a235 3
<p>
<a name="i386WinModem"></a>
<h3 id="WinModem">12.1.5 - Are WinModems supported?</h3>
d243 1
d246 1
a246 1
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=aac&amp;sektion=4">aac(4)</a>)
d254 1
d262 1
d264 1
a264 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ami&amp;sektion=4">ami(4)</a>
d277 1
d279 1
a279 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hifn&amp;sektion=4">hifn(4)</a>
d290 1
a290 2
<h2 id="alpha">12.2 - DEC Alpha</h2>
[nothing yet]
d292 2
a293 1
<h2 id="amd64">12.3 - AMD 64</h2>
d295 1
a295 2
<h3 id="amd64Intel">12.3.1 - Can I run OpenBSD/amd64 on my Intel P4 or AMD Sempron?</h3>
In the case of many recent processors, the answer is "yes".
d305 2
a306 1
<h3 id="amd64i386bin">12.3.2 - Can I run my i386 binary on OpenBSD/amd64?</h3>
d323 2
a324 2
<h3 id="amd64better">12.3.3 - Is it always better to run OpenBSD/amd64 on processors that
support it?</h3>
d326 1
a326 1
Not always.  
d329 1
a329 1
There are a number of reasons one may desire to use OpenBSD/i386 
a341 3
<h2 id="armish">12.4 - ARM-based appliances</h2>
[nothing yet]

d343 2
a344 1
<h2 id="armv7">12.5 - ARMv7-based systems (BeagleBoard, PandaBoard, SABRE Lite, Nitrogen6x)</h2>
d372 6
a377 6
for the -N option of
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ps&amp;sektion=1">ps(1)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vmstat&amp;sektion=8">vmstat(8)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg(8)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iostat&amp;sektion=8">iostat(8)</a>
and similar applications, but can not be booted directly by the U-Boot
d381 1
a381 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mkuboot&amp;sektion=8">mkuboot(8)</a>
d427 1
a427 2
<h2 id="hppa">12.7 - HPPA</h2>
[nothing yet]
d429 1
a429 1
<h2 id="i386">12.8 - i386</h2>
a430 1
<h3 id="ISANIC">12.8.1 - ISA NICs</h3>
d441 3
a443 2
This is an excellent performing (relatively speaking) ISA NIC, supported by the 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ep&amp;sektion=4">ep(4)</a>
d452 2
a453 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isapnp&amp;sektion=4"
>isapnp(4)</a> support.
d455 4
a458 5
PNP support comes on-line, resulting in an extra NIC showing in the
dmesg.
This may work fine, or it may cause other problems.  It is highly
recommended that the 3C509B cards have PNP mode disabled and manually
configured to non-conflicting settings using the 3Com DOS-based
d462 2
a463 2
The ep(4) driver will pick the cards up at any hardware combination that 
does not conflict with other devices in the system. 
d467 2
a468 2
you label the cards' spine with the MAC address, and use the dmesg to 
identify which is which. 
d472 1
a472 2
The 3C509 is a 10Mbps ISA card, the 3C905 and 3C590 are PCI
cards.
d474 1
a475 2
<p>
<h4>NE2000</h4>
d483 1
a483 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ne&amp;sektion=4">ne(4)</a>
d509 4
a512 4
Note that the ne(4) driver is fairly "dumb" -- only the I/O port is
probed, if any of the above I/O addresses is detected, the corresponding 
IRQ is <i>assumed</i>.
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg(8)</a>
d519 5
a523 2
PCMCIA ne(4) cards exist. These notes do not apply to them, these
devices are auto-configuring.
a524 3
<p>
<a name="80386"></a>
<h3 id="FPU">12.8.2 - OpenBSD won't work on my 80386/80386SX/80486SX system!</h3>
d526 1
d533 1
d542 4
a545 4
<h3 id="IrqShare">12.8.3 - My dmesg shows multiple devices sharing the same Interrupt
(IRQ)!</h3>
This is entirely acceptable, and in fact, even desirable for PCI
devices.
d553 5
a557 2
ISA devices can not share IRQs.  If you find ISA devices sharing IRQs,
you must correct this problem.
a558 1
<h3 id="i386smouse">12.8.4 - My keyboard/mouse keeps locking up (or goes crazy)!</h3>
d572 1
a572 2
If you just want console access to the machine, you
may wish to consider using a 
d575 2
a576 1
<h3 id="i386soekris">12.8.5 - My Soekris/Alix/Lanner performs poorly</h3>
d584 2
d587 2
a588 4
<h3 id="i386flash">12.8.6 - I get "missing interrupt" errors on my CF device</h3>
With some CF systems, such as early Soekris 4801 systems and some CF
adapters, the DMA support is not properly wired up, so you might see
messages such as:
d595 1
a595 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wd&amp;sektion=4">wd(4)</a>
d601 1
a601 1
ukc&gt; <b>change wd</b>
d604 1
a604 1
channel [-1] ? 
d608 1
a608 1
ukc&gt; <b>quit</b>
d611 2
a612 1
<h3 id="i386cpu">12.8.7 - Is this really new CPU supported?</h3>
d624 1
a624 5
<h2 id="landisk">12.9 - Landisk</h2>
[nothing yet]

<h2 id="luna88k">12.10 - Luna88k</h2>
[nothing yet]
d626 1
a626 1
<h2 id="macppc">12.11 - MacPPC</h2>
a627 1
<h3 id="macppcbm">12.11.1 - My bm(4) network adapter doesn't work!</h3>
d629 1
a629 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bm&amp;sektion=4&amp;arch=macppc">bm</a>
d633 1
a633 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=usb&amp;sektion=4">usb</a>
d636 1
a636 2
<h2 id="sgi">12.14 - SGI</h2>
[nothing yet]
d638 2
a639 2
<h2 id="sparc">12.15 - SPARC</h2>
[nothing yet]
a640 3
<h2 id="sparc64">12.16 - UltraSPARC (sparc64)</h2>

<h3 id="sparc64Floppy">12.16.1 - My UltraSPARC won't boot from the floppy image</h3>
d644 4
a647 2
<h2 id="vax">12.17 - DEC VAX</h2>
<h3 id="vaxSIMH">12.17.1 - Can I use the SIMH VAX simulator?</h3>
d649 1
d656 3
a658 1
<h2 id="zaurus">12.18 - Sharp Zaurus</h2>
a659 1
<h3 id="zaurusUSB">12.18.1 - USB devices aren't working properly</h3>
@


1.117
log
@
sadly, armv7 is not ready for prime time, so comment this out until status
changes.
@
text
@a5 1
<meta name= "resource-type" content= "document">
a6 2
<meta name= "keywords"      content= "openbsd,faq12">
<meta name= "distribution"  content= "global">
@


1.116
log
@Add 'link rel="canonical"' to pages, acting as a hint to search engines
to list the copies on www.openbsd.org rather than mirrors.

From Carlin Bingham, ok millert@@ nick@@
@
text
@d56 1
a56 1
<li><a href="#armv7">12.5 - ARMv7-based systems</a>
d339 1
d421 1
@


1.115
log
@
updates for 5.7
@
text
@d11 1
@


1.114
log
@
no longer an issue per Miod@@
@
text
@d10 1
a10 1
<meta name= "copyright"     content= "This document copyright 2003-2014 by OpenBSD.">
@


1.113
log
@Convert the rest of the FAQ to id="" instead of <a name=""></a>.

prodded by nick@@
@
text
@a82 2
  <li><a href="#sparc64gt8g">12.16.2 - I'm getting "partition extends
       past end of unit" messages in disklabel</a>
a643 33

<h3 id="sparc64gt8g">12.16.2 - I'm getting "partition extends past end of unit"
messages in disklabel</h3>

On sparc and sparc64 systems, the BSD disklabel cannot describe a disk
geometry larger than 8GB, while individual disklabel entries can be
larger.

<p>
Every time you run disklabel(8), it performs some sanity checks of the
disklabel entries against what it thinks is the correct drive geometry,
and since it sees a truncated geometry, it warns and will not let you
edit entries outside this 8GB area unless you tell it to use the real
drive geometry.            
Do this using the 'g' command of the command-driven editor of
<a href="faq14.html#disklabel">disklabel(8)</a> and tell it to use the
"[d]isk geometry":
<blockquote><pre>
# disklabel -E wd0
# Inside MBR partition 3: type A6 start 63 size 17912412
   [...]
Initial label editor (enter '?' for help at any prompt)
&gt; g
[d]isk, [b]ios, or [u]ser geometry: [d] d
&gt; w
&gt; q 
</pre></blockquote>

You will still get the warning messages, but you can configure and use
your disk as desired.
A proper solution would have to be compatible with existing systems
already in use, plus be compatible with Solaris running on disks larger
than 8GB, but this has not been worked out yet.
@


1.112
log
@
faq updates for 5.6
@
text
@d98 1
a98 2
<a name="General"></a>
<h2>12.1 - General hardware notes</h2>
d100 1
a100 2
<a name="GenPCI"></a>
<h3>12.1.1 - PCI devices</h3>
d125 1
a125 2
<a name="GenISA"></a>
<h3>12.1.2 - ISA devices</h3>
d142 1
a142 2
<a name="GenNotConf"></a>
<h3>12.1.3 - My device is "recognized" but says "<tt>not
d215 1
a215 2
<a name="GenSupport"></a>
<h3>12.1.4 - I have a card listed as "supported", but it doesn't
d234 1
a234 2
<a name="WinModem"></a>
<h3>12.1.5 - Are WinModems supported?</h3>
d241 1
a241 3
<p>
<a name="aac"></a>
<h3>12.1.6 - What happened to the Adaptec RAID support (aac)?</h3>
d258 1
a258 3
<p>
<a name="ami"></a>
<h3>12.1.7 - My ami(4) card will only support one logical disk!</h3>
d272 1
a272 2
<a name="cryptohw"></a>
<h3>12.1.8 - How do I activate my crypto accelerator card?</h3>
d285 1
a285 4

<p>
<a name="alpha"></a>
<h2>12.2 - DEC Alpha</h2>
d288 1
a288 3
<p>
<a name="amd64"></a>
<h2>12.3 - AMD 64</h2>
d290 1
a290 2
<a name="amd64Intel"></a>
<h3>12.3.1 - Can I run OpenBSD/amd64 on my Intel P4 or AMD Sempron?</h3>
d301 1
a301 3
<p>
<a name="amd64i386bin"></a>
<h3>12.3.2 - Can I run my i386 binary on OpenBSD/amd64?</h3>
d318 1
a318 3
<p>
<a name="amd64better"></a>
<h3>12.3.3 - Is it always better to run OpenBSD/amd64 on processors that
d337 1
a337 3
<p>
<a name="armish"></a>
<h2>12.4 - ARM-based appliances</h2>
d340 1
a340 2
<a name="armv7"></a>
<h2>12.5 - ARMv7-based systems (BeagleBoard, PandaBoard, SABRE Lite, Nitrogen6x)</h2>
d422 1
a422 3
<p>
<a name="hppa"></a>
<h2>12.7 - HPPA</h2>
d425 1
a425 3
<p>
<a name="i386"></a>
<h2>12.8 - i386</h2>
d427 1
a427 2
<a name="ISANIC"></a>
<h3>12.8.1 - ISA NICs</h3>
d523 1
a523 2
<a name="FPU"></a>
<h3>12.8.2 - OpenBSD won't work on my 80386/80386SX/80486SX system!</h3>
d539 1
a539 3
<p>
<a name="IrqShare"></a>
<h3>12.8.3 - My dmesg shows multiple devices sharing the same Interrupt
d553 1
a553 3
<p>
<a name="i386smouse"></a>
<h3>12.8.4 - My keyboard/mouse keeps locking up (or goes crazy)!</h3>
d571 1
a571 3
<p>
<a name="i386soekris"></a>
<h3>12.8.5 - My Soekris/Alix/Lanner performs poorly</h3>
d580 1
a580 3
<p>
<a name="i386flash"></a>
<h3>12.8.6 - I get "missing interrupt" errors on my CF device</h3>
d606 1
a606 2
<a name="i386cpu"></a>
<h3>12.8.7 - Is this really new CPU supported?</h3>
d618 1
a618 3
<p>
<a name="landisk"></a>
<h2>12.9 - Landisk</h2>
d621 1
a621 3
<p>
<a name="luna88k"></a>
<h2>12.10 - Luna88k</h2>
d624 1
a624 3
<p>
<a name="macppc"></a>
<h2>12.11 - MacPPC</h2>
d626 1
a626 3
<p>
<a name="macppcbm"></a>
<h3>12.11.1 - My bm(4) network adapter doesn't work!</h3>
d635 1
a635 3
<p>
<a name="sgi"></a>
<h2>12.14 - SGI</h2>
d638 1
a638 3
<p>
<a name="sparc"></a>
<h2>12.15 - SPARC</h2>
d641 1
a641 3
<p>
<a name="sparc64"></a>
<h2>12.16 - UltraSPARC (sparc64)</h2>
d643 1
a643 3
<p>
<a name="sparc64Floppy"></a>
<h3>12.16.1 - My UltraSPARC won't boot from the floppy image</h3>
d647 1
a647 3
<p>
<a name="sparc64gt8g"></a>
<h3>12.16.2 - I'm getting "partition extends past end of unit"
d680 2
a681 5
<p>
<a name="vax"></a>
<h2>12.17 - DEC VAX</h2>
<a name="vaxSIMH"></a>
<h3>12.17.1 - Can I use the SIMH VAX simulator?</h3>
d689 1
a689 3
<p>
<a name="zaurus"></a>
<h2>12.18 - Sharp Zaurus</h2>
d691 1
a691 3
<p>
<a name="zaurusUSB"></a>
<h3>12.18.1 - USB devices aren't working properly</h3>
@


1.111
log
@
welcome 5.5!
@
text
@a55 1
<li><a href="#hp300">12.6 - HP 9000 series 300, 400</a>
a76 2
<li><a href="#mvme68k">12.12 - MVME68k</a>
<li><a href="#mvme88k">12.13 - MVME88k</a>
a364 10
For 5.4, this was called the "beagle" platform, but for 5.5
and later releases, this platform has been renamed
"<a href="../armv7.html">armv7</a>".
This platform is being actively improved; running <i>-current</i> is
highly recommended.

<p>
Being this platform is still very much in a state of flux, this article
will reflect the state of <i>-current</i> rather than the current
release.
a446 5
<a name="hp300"></a>
<h2>12.6 - HP300</h2>
[nothing yet]

<p>
d467 1
a467 1
This is an excellent performing ISA NIC, supported by the 
d509 1
a509 1
the currently-available ones perform poorly.
d534 1
a534 2
<a href="faq5.html#BootConfig">User Kernel Configuration (UKC)</a> or
by <a href="faq5.html#Options">building a customized kernel</a>.
d558 1
a558 1
slow and rarely had enough RAM and a required FPU to run OpenBSD.
d561 2
a562 2
The 80486SX chip was a "low-cost" version of the 80486, which lacked the
hardware floating point support (like the 80386) OpenBSD requires.
a680 10

<p>
<a name="mvme68k"></a>
<h2>12.12 - MVME68k</h2>
[nothing yet]

<p>
<a name="mvme88k"></a>
<h2>12.13 - MVME88k</h2>
[nothing yet]
@


1.110
log
@
remove www@@ references, simplify footers on all pages.
@
text
@d368 1
a368 1
For 5.4, this was called the "beagle" platform, but for <i>-current</i>
@


1.109
log
@
ARMv7 quirks, with lots of help from patrick@@, thanks!
Note: due to the changes taking place in this platform, *this* section
should be kept current with -current, rather than release for a while.
@
text
@a4 1
<link rev= "made" href= "mailto:www@@openbsd.org">
d10 1
a10 1
<meta name= "copyright"     content= "This document copyright 2003-2013 by OpenBSD.">
a18 1
<font color= "#0000e0">
a21 1
</font>
d790 2
a791 1
<font color= "#0000e0">
a794 8
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
<br>
<small>$OpenBSD: faq12.html,v 1.108 2013/05/01 13:16:32 nick Exp $</small>
@


1.108
log
@
updates for 5.3
@
text
@d58 4
a61 3
<li><a href="#hp300">12.5 - HP 9000 series 300, 400</a>
<li><a href="#hppa" >12.6 - HP Precision Architecture (PA-RISC)</a>
<li><a href="#i386" >12.7 - i386</a>
d63 2
a64 2
  <li><a href="#ISANIC">12.7.1 - ISA NICs</a>
  <li><a href="#FPU">12.7.2 - OpenBSD won't work on my
d66 1
a66 1
  <li><a href="#IrqShare">12.7.3 - My dmesg shows multiple devices sharing
d68 1
a68 1
  <li><a href="#i386smouse">12.7.4 - My keyboard/mouse keeps locking
d70 2
a71 2
  <li><a href="#i386soekris">12.7.5 - My Soekris/Alix/Lanner performs poorly</a>
  <li><a href="#i386flash">12.7.6 - I get "missing interrupt" errors on
d73 1
a73 1
  <li><a href="#i386cpu">12.7.7 - Is this really new CPU supported?</a>
d75 2
a76 2
<li><a href="#landisk">12.8 - Landisk</a>
<li><a href="#luna88k">12.9 - Luna88k</a>
d369 93
d464 1
a464 1
<h2>12.5 - HP300</h2>
d469 1
a469 1
<h2>12.6 - HPPA</h2>
d474 1
a474 1
<h2>12.7 - i386</h2>
d477 1
a477 1
<h3>12.7.1 - ISA NICs</h3>
d575 1
a575 1
<h3>12.7.2 - OpenBSD won't work on my 80386/80386SX/80486SX system!</h3>
d593 1
a593 1
<h3>12.7.3 - My dmesg shows multiple devices sharing the same Interrupt
d609 1
a609 1
<h3>12.7.4 - My keyboard/mouse keeps locking up (or goes crazy)!</h3>
d629 1
a629 1
<h3>12.7.5 - My Soekris/Alix/Lanner performs poorly</h3>
d640 1
a640 1
<h3>12.7.6 - I get "missing interrupt" errors on my CF device</h3>
d667 1
a667 1
<h3>12.7.7 - Is this really new CPU supported?</h3>
d681 1
a681 1
<h2>12.8 - Landisk</h2>
d686 1
a686 1
<h2>12.9 - Luna88k</h2>
d804 1
a804 1
<small>$OpenBSD: faq12.html,v 1.107 2012/12/16 18:08:35 nick Exp $</small>
@


1.107
log
@
got a complaint that modern Soekris machines aren't slow.  Well, compared
to modern hardware, yes, they still are.  HOWEVER, Soekris isn't the only
player in the sub-trash-day-on-curb-but-sold-as-new market anymore.
@
text
@d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 2003-2012 by OpenBSD.">
d710 1
a710 1
<small>$OpenBSD: faq12.html,v 1.106 2012/08/07 02:50:11 nick Exp $</small>
@


1.106
log
@
missing #config, from Michal Markowski (markowski1 at gmail), thanks!
@
text
@d69 1
a69 1
  <li><a href="#i386soekris">12.7.5 - My Soekris performs poorly</a>
d535 2
a536 2
<h3>12.7.5 - My Soekris performs poorly</h3>
The Soekris machines are nice, low-power, small and modest cost PC class
d541 2
a542 1
performance machines.
d650 1
a650 1
Everytime you run disklabel(8), it performs some sanity checks of the
d710 1
a710 1
<small>$OpenBSD: faq12.html,v 1.105 2012/05/01 14:35:15 nick Exp $</small>
@


1.105
log
@
welcome 5.1!
@
text
@d558 1
a558 1
<a href="faq5.html">config(8)</a> to change it permanently:
d709 1
a709 1
<small>$OpenBSD: faq12.html,v 1.104 2011/12/21 09:05:24 ajacoutot Exp $</small>
@


1.104
log
@More typos, from Steffen Daode Nurpmeso.
@
text
@d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 2003-2011 by OpenBSD.">
d709 1
a709 1
<small>$OpenBSD: faq12.html,v 1.103 2011/12/13 00:32:57 nick Exp $</small>
@


1.103
log
@
generalize the "does it run amd64" question a bit, and describe the results
of testing a bit better.
@
text
@d557 1
a557 1
This can be done using <a href="faq5.html#ukc">ukc</a> to install, then
d662 1
a662 1
> g
d664 2
a665 2
> w
> q 
d709 1
a709 1
<small>$OpenBSD: faq12.html,v 1.102 2011/06/16 17:46:49 lum Exp $</small>
@


1.102
log
@add missing word and
also align "a name" to top of browser window and
make some meta tags more pertinent.
@
text
@d51 1
a51 1
    P4?</a>
d312 1
a312 1
<h3>12.3.1 - Can I run OpenBSD/amd64 on my Intel P4?</h3>
d314 1
a314 1
Unfortunately, trying to find out which Intel processor variations do
d319 5
d709 1
a709 1
<small>$OpenBSD: faq12.html,v 1.101 2010/06/11 01:03:49 nick Exp $</small>
@


1.101
log
@
+ #i386cpu: yes, your new CPU is supported.  Can't promise the surrounding
hardware is, however.
@
text
@d8 2
a9 2
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 2003-2010 by OpenBSD.">
d203 2
a204 2
This is a common with users of some popular SCSI cards who misread the
footnotes on the <a href="../i386.html">i386 platform page</a>
d242 1
d252 1
d271 1
d307 2
a308 1
<p> <a name="amd64"></a>
d318 1
d337 1
d358 2
a359 1
<p> <a name="armish"></a>
d363 1
d368 1
d373 1
d473 1
d492 1
d508 1
d528 1
d538 1
d579 1
a579 1

d584 1
d589 1
d593 1
d604 1
d609 1
d614 1
d619 1
d624 1
d628 1
d634 1
d669 1
a669 1

d681 1
d684 2
d704 1
a704 1
<small>$OpenBSD: faq12.html,v 1.100 2010/05/19 12:41:02 nick Exp $</small>
@


1.100
log
@
updates for 4.7
@
text
@d72 1
d551 14
d676 1
a676 1
<small>$OpenBSD: faq12.html,v 1.99 2009/09/09 02:02:54 nick Exp $</small>
@


1.99
log
@
bunches of fixes from Alan R. S. Bueno (alan dot bsd at gmail dot com),
many thanks!
@
text
@d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 2003-2009 by OpenBSD.">
a74 1
<li><a href="#mac68k">12.10 - Mac68k</a>
a557 4
<a name="mac68k"></a>
<h2>12.10 - Mac68k</h2>
[nothing yet]

d661 1
a661 1
<small>$OpenBSD: faq12.html,v 1.98 2009/05/21 01:34:31 nick Exp $</small>
@


1.98
log
@
+ #cryptohw: 12.1.8 - How do I activate my crypto accelerator card?
@
text
@d308 1
a308 1
<h3>12.3.1 - Can I run OpenBSD/amd64 on my Intel P4</h3>
d666 1
a666 1
<small>$OpenBSD: faq12.html,v 1.97 2009/03/18 01:42:36 nick Exp $</small>
@


1.97
log
@
V is the "proper" abbreviation for "Volt", not 'v', from Frantisek Holop
(minusf at obiit dot org).
@
text
@d45 1
d284 15
d666 1
a666 1
<small>$OpenBSD: faq12.html,v 1.96 2009/01/30 22:25:57 sthen Exp $</small>
@


1.96
log
@bump copyright for files edited this year
@
text
@d122 2
a123 2
<li>The PCI bus supports two levels of signaling, 3.3v and 5v.
Cards that work with 3.3v signaling have a second notch cut in their
d125 1
a125 1
Most PCI cards use 5v signaling, which is used by most computers.
d127 1
a127 1
commonly-encountered computers that only support 3.3v signaling.
d650 1
a650 1
<small>$OpenBSD: faq12.html,v 1.95 2009/01/07 01:03:53 nick Exp $</small>
@


1.95
log
@
bm(4) just doesn't work, even at 10mbps, anymore.
@
text
@d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 2003-2008 by OpenBSD.">
d650 1
a650 1
<small>$OpenBSD: faq12.html,v 1.94 2008/11/25 02:33:20 nick Exp $</small>
@


1.94
log
@
add #i386flash 12.7.6 - I get "missing interrupt" errors on my CF device
based on posting from sthen@@
@
text
@d77 1
a77 1
  <li><a href="#macppcbm">12.11.1 - Why is my bm(4) driver so slow?</a>
d551 1
a551 1
<h3>12.11.1 - Why is my bm(4) network adapter so slow?</h3>
d555 4
a558 5
early iMacs) has issues when run at 100Mbps.
It is highly recommended that you force the driver to 10Mbps by using
a <tt>"media 10baseT"</tt> option in your <tt>/etc/hostname.bm0</tt> 
file, or otherwise force it to 10Mbps at your hub or switch.

d650 1
a650 1
<small>$OpenBSD: faq12.html,v 1.93 2008/11/12 02:59:41 nick Exp $</small>
@


1.93
log
@
punctation, standardizing, other misc. cleanup, from from Alan R. S.
Bueno (alan dot bsd at gmail dot com)
@
text
@d69 2
d508 26
d651 1
a651 1
<small>$OpenBSD: faq12.html,v 1.92 2008/10/31 16:52:30 nick Exp $</small>
@


1.92
log
@
update for 4.4
@
text
@d429 1
a429 1
by <a href="faq5.html">building a customized kernel</a>.
d623 1
a623 1
<small>$OpenBSD: faq12.html,v 1.91 2008/07/02 10:35:40 nick Exp $</small>
@


1.91
log
@
Marc Balmer pointed out that "low" would be worthy addition.  Thanks.
@
text
@a307 1
(as of OpenBSD 4.2)  <!-- XXX next release -->
d623 1
a623 1
<small>$OpenBSD: faq12.html,v 1.90 2008/07/02 00:01:20 nick Exp $</small>
@


1.90
log
@
probably more to say about Soekris machines than this, but it is a start.
@
text
@d503 1
a503 1
on the system are all chosen for power consumption, not performance.
d624 1
a624 1
<small>$OpenBSD: faq12.html,v 1.89 2008/01/26 06:29:50 saad Exp $</small>
@


1.89
log
@typos, better wording and consistency.
ok nick@@
@
text
@d68 1
d498 9
d624 1
a624 1
<small>$OpenBSD: faq12.html,v 1.88 2007/12/01 10:41:51 tobias Exp $</small>
@


1.88
log
@First sentence of 12.3.1 might become a little unclear to non-native
speakers, so stick at a simple "yes" answer.

"Please change it" nick@@
@
text
@d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 2003-2007 by OpenBSD.">
d54 1
a54 1
    OpenBSD/amd64 on processors that can?</a>
d290 1
a290 1
In the case of many newer processors, the answer is "yes".
d292 2
a293 2
and which do not properly support the amd64 instruction set is difficult,
it is usually easier to just try it and see if it works.
d308 1
a308 1
load each other's kernels, making it easier to reload a system with the
d310 2
a311 2
However, it has to be a complete wipe and reload -- left-over binaries
from the "previous" installation will most likely make your life
d316 1
a316 1
can?</h3>
d326 3
a328 3
<li>Need to run apps that are not "64 bit clean".
<li>Need for ability to move the disk system to another machine
<li>On some apps and some hardware, OpenBSD/i386 may outperform
d449 2
a450 2
Support for the 80386DX and 80386sx processors was dropped for OpenBSD
4.2.
d452 1
a452 1
slow and rarely had enough RAM and the FPU required to run OpenBSD.
d591 2
a592 1
Instructions can be found <a href="../vax-simh.html">here</a>.
d599 1
a599 1
USB devices will not work plugged directly into the Zaurus.
a601 1

d614 1
a614 1
<small>$OpenBSD: faq12.html,v 1.87 2007/11/29 02:27:19 nick Exp $</small>
@


1.87
log
@
fill out some amd64 details that should have been there long ago.
@
text
@d290 1
a290 1
In the case of many newer processors, the answer is definitely.
d614 1
a614 1
<small>$OpenBSD: faq12.html,v 1.86 2007/11/29 01:44:27 nick Exp $</small>
@


1.86
log
@
Reorganize and rename to "Hardware and Platform Specific Questions".
OpenBSD supports devices on many different platforms, often devices
never originally intended to be used on those platforms.  It makes more
sense to not put devices under specific platforms, but rather move them
to the general section.
Note: other than renumbering, there is no actually CONTENT change in
this diff, just moving stuff around.
@
text
@d48 8
d287 46
a332 1
[nothing yet]
d614 1
a614 1
<small>$OpenBSD: faq12.html,v 1.85 2007/11/01 02:11:01 nick Exp $</small>
@


1.85
log
@
updates for 4.2.
@
text
@d4 1
a4 1
<title>12 - Platform-Specific Questions</title>
d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 2003-2006 by OpenBSD.">
d26 2
a27 1
<h1><font color="#e00000">12 - Platform-Specific Questions</font></h1>
d41 4
d58 1
a58 1
  <li><a href="#i386smouse">12.7.5 - My keyboard/mouse keeps locking
a59 4
  <li><a href="#i386WinModem">12.7.6 - Are WinModems supported?</a>
  <li><a href="#aac">12.7.7 - What happened to the Adaptec RAID support (aac)?</a>
  <li><a href="#ami">12.7.8 - My ami(4) card will only support one
       logical disk!</a>
d230 42
d426 1
a426 1
<h3>12.7.5 - My keyboard/mouse keeps locking up (or goes crazy)!</h3>
a443 40
<a name="i386WinModem"></a>
<h3>12.7.6 - Are WinModems supported?</h3>
WinModems are low-cost modems which rely on the processor to do much of
the signal processing normally done in hardware in a "real" modem.
Due to the variety of incompatible and typically undocumented WinModem
chips, there is no support for WinModems in OpenBSD, and this is not
likely to change.

<a name="aac"></a>
<h3>12.7.7 - What happened to the Adaptec RAID support (aac)?</h3>
Adaptec has refused to provide useful and accurate documentation about
their FSA-based
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=aac&amp;sektion=4">aac(4)</a>)
RAID controllers.
As these RAID controllers seem to be very buggy, this documentation is
critical for a useful driver.
Since this driver was so unreliable, it was removed from the GENERIC
kernel.

<h4>I can compile my own kernel with aac(4) support, right?</h4>
Sure.
But what part of "unreliable" did you fail to understand?
This isn't an "experimental" feature, this is a known-flawed driver.
Maybe it works with some variations of hardware sufficiently well to be
usable, but we don't recommend betting your data on it.

<a name="ami"></a>
<h3>12.7.8 - My ami(4) card will only support one logical disk!</h3>
There is a known bug with
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ami&amp;sektion=4">ami(4)</a>
which will cause data corruption if you use more than one volume on
some controllers.
On controllers with this issue, OpenBSD will limit you to one logical
disk, resulting in a message in your dmesg that looks like:
<blockquote><pre>
ami0: FW A.04.03, BIOS vA.04.03, 4MB RAM
ami0: 3 channels, 16 targets, 2 logical drives
ami0: firmware buggy, limiting access to first logical disk
scsibus0 at ami0: 1 targets
</pre></blockquote>
d561 1
a561 1
<small>$OpenBSD: faq12.html,v 1.84 2007/08/07 13:50:40 nick Exp $</small>
@


1.84
log
@
incomplete renumbering...  (there's a reason I hate renumbering...)
@
text
@d353 2
a354 2
Support for the 80386DX and 80386sx processors was dropped after OpenBSD
4.1 was released.
d558 1
a558 1
<small>$OpenBSD: faq12.html,v 1.83 2007/08/07 01:59:08 nick Exp $</small>
@


1.83
log
@
+#zaurusUSB : Zaurus has little current on USB ports.
@
text
@d80 1
a80 1
  <li><a href="#vaxSIMH">12.14.1 - Can I use the SIMH VAX simulator?</a>
d530 1
a530 1
<h3>12.14.1 - Can I use the SIMH VAX simulator?</h3>
d558 1
a558 1
<small>$OpenBSD: faq12.html,v 1.82 2007/08/07 01:43:29 nick Exp $</small>
@


1.82
log
@
FAQ follows -release, but when it comes to upcoming "limitations", I think
things can go in early.  4.2 will have no support for the 80386, no reason
to pretend it is usable now.
@
text
@d83 3
a85 1

d539 6
a544 1
[nothing yet]
d558 1
a558 1
<small>$OpenBSD: faq12.html,v 1.81 2007/08/07 00:55:58 nick Exp $</small>
@


1.81
log
@
-cats, +armish, +landisk, +zaurus.
@
text
@d350 5
a354 19
<h4>80386sx</h4>
The 80386sx has a maximum addressing range of 16M, which is at the very
low end of OpenBSD/i386's support.
Most 80386sx systems can't support more than 8M of RAM, which places
them in the "For Experts Only" category, as some non-trivial steps and a
second computer are required to get going.
Also, see the next section:

<h4>80386</h4>

OpenBSD will run on an 80386 or 80386sx system IF it has a 80387 
or 80387sx hardware math coprocessor (Floating Point Unit, or FPU).
Unfortunately, these FPUs were not common, so many 80386 systems
will not have them.
OpenBSD will not run without the FPU on the i386 platform.
Again, be aware that this is a very small amount of processor for a
crypto-intensive operating system like OpenBSD.
You aren't likely to be happy with the performance of such a machine for
general use.
d362 3
d551 1
a551 1
<small>$OpenBSD: faq12.html,v 1.80 2007/07/05 11:57:57 ajacoutot Exp $</small>
@


1.80
log
@ -remove reference to old (unsupported) release

ok steven@@
@
text
@d43 1
a43 1
<li><a href="#cats" >12.4 - CATS ARM development board</a>
d60 4
a63 2
<li><a href="#mac68k">12.8 - Mac68k</a>
<li><a href="#macppc">12.9 - MacPPC</a>
d65 1
a65 1
  <li><a href="#macppcbm">12.9.1 - Why is my bm(4) driver so slow?</a>
d67 5
a71 4
<li><a href="#mvme68k">12.10 - MVME68k</a>
<li><a href="#mvme88k">12.11 - MVME88k</a>
<li><a href="#sparc">12.12 - SPARC</a>
<li><a href="#sparc64">12.13 - UltraSPARC</a>
d73 1
a73 1
  <li><a href="#sparc64Floppy">12.13.1 - My UltraSPARC won't boot from the
d75 1
a75 1
  <li><a href="#sparc64gt8g">12.13.2 - I'm getting "partition extends
d78 1
a78 1
<li><a href="#vax">12.14 - DEC VAX</a>
d82 2
d236 2
a237 2
<p> <a name="cats"></a>
<h2>12.4 - CATS ARM development board</h2>
d451 7
d460 1
a460 1
<h2>12.8 - Mac68k</h2>
d464 1
a464 1
<h2>12.9 - MacPPC</h2>
d467 1
a467 1
<h3>12.9.1 - Why is my bm(4) network adapter so slow?</h3>
d478 1
a478 1
<h2>12.10 - MVME68k</h2>
d482 5
a486 1
<h2>12.11 - MVME88k</h2>
d490 1
a490 1
<h2>12.12 - SPARC</h2>
d494 1
a494 1
<h2>12.13 - UltraSPARC (sparc64)</h2>
d497 1
a497 1
<h3>12.13.1 - My UltraSPARC won't boot from the floppy image</h3>
d502 1
a502 1
<h3>12.13.2 - I'm getting "partition extends past end of unit"
d537 1
a537 1
<h2>12.14 - DEC VAX</h2>
d546 3
d562 1
a562 1
<small>$OpenBSD: faq12.html,v 1.79 2006/11/01 03:07:32 nick Exp $</small>
@


1.79
log
@
oops.  link in faq11.html.
@
text
@a60 3
  <ul>
  <li><a href="#mac68kTime">12.8.1 - Why is my Mac68k losing so much time?</a>
  </ul>
d449 1
a449 5

<a name= "mac68kTime"></a>
<h3>12.8.1 - Why is my Mac68k losing so much time?</h3>
This was caused by a long-time bug, which has been fixed in OpenBSD 3.9.

d543 1
a543 1
<small>$OpenBSD: faq12.html,v 1.78 2006/05/21 15:27:16 nick Exp $</small>
@


1.78
log
@
USB keyboard article is mostly obsolete.  Well after Theo pointed it out
to me, I still haven't had time to sit down and verify how much of it
might still be accurate (I suspect little) or relevant (I suspect even
less...I use USB keyboards on a lot of systems, and haven't had issues
in quite some time), so remove.
@
text
@d22 1
a22 2
<!-- a href= "faq11.html">[To Section 11 - Performance Tuning]</a -->
<a href="faq10.html">[To Section 10 - System Management]</a>
d541 1
a541 2
<!-- a href= "faq11.html">[To Section 11 - Performance Tuning]</a -->
<a href="faq10.html">[To Section 10 - System Management]</a>
d550 1
a550 1
<small>$OpenBSD: faq12.html,v 1.77 2006/05/01 01:02:59 nick Exp $</small>
@


1.77
log
@
updates/revisions for 3.9
@
text
@a53 1
  <li><a href="#i386USBkb">12.7.4 - How do I use a USB keyboard?</a>
a389 52
<a name="i386USBkb"></a>
<h3>12.7.4 - How do I use a USB keyboard?</h3>
OpenBSD/i386 will usually use a USB keyboard and mouse without difficulty
after installation.
However, installing OpenBSD on a system with a USB keyboard can be
difficult, as the install kernels do not have the full complement of 
USB drivers required for complete USB keyboard support.  
As machines vary, you may need to experiment:
<ul>
<li>Some systems have a BIOS option for "Legacy USB support" or
something similar.
This allows the BIOS to emulate a traditional PS/2 keyboard.
If this is not enabled, you will <i>not</i> be able to enter commands
at the <tt>boot></tt> prompt.
However, some systems may run better with this feature turned on, some with
it turned off.
Some may install better with it in one setting and run better
with it in the other.
Some machines do not have this option.
<li>If you use "Legacy USB support", you may find it works better to
disable kernel USB support in
<a href="faq5.html#BootConfig">User Kernel Configuration (UKC)</a> by entering
"<tt>disable uhci</tt>" before completing boot.
<li>PS/2 keyboard/mouse-to-USB adapters may not work.
<li>You *may* find the system is more stable with the mouse disconnected
until the system is fully installed.
<li>In the worst case situation, you may find it easier to install 
OpenBSD on another computer, then move the hard disk to your "legacy-free"
machine.
</ul>

Once you have OpenBSD installed:
<ul>
<li>Using <a href="faq5.html#BootConfig">UKC</a>
to disable pckbd0 may result in less "kernel message noise" (usually,
<tt>pckbc: cmd failed</tt>), though if you do this, you will not be able
to use a PS/2 mouse.
<li>The USB keyboard and mouse are handled just like a PS/2 keyboard
and mouse by X.
Use "wscons" for your mouse driver.
<li>At the moment, there is no way to set up a serial console on a 
"legacy-free" (no serial, parallel or PS/2 port) system.
If you have difficulty with your system, you will have to record 
messages with pencil and paper.
</ul>

Unfortunately, there are a variety of ways in which USB is supported on PCs
right now, so you may have to do some experimenting with your system to get
the USB keyboard working properly.
Please contact <a href="mailto:faq@@openbsd.org">faq@@openbsd.org</a>
with any other well-documented USB keyboard tips you find.

d552 1
a552 1
<small>$OpenBSD: faq12.html,v 1.76 2006/04/06 11:02:18 nick Exp $</small>
@


1.76
log
@
no, faq11.html being missing is not a mistake.  Linking to it, however,
WAS a mistake.  Expect to see something good here post 3.9.
@
text
@d509 1
a509 2
This is caused by a long-time bug, which has been fixed in
<i>-current</i>, and will be in OpenBSD 3.9.
d605 1
a605 1
<small>$OpenBSD: faq12.html,v 1.75 2006/03/10 03:48:45 nick Exp $</small>
@


1.75
log
@
SIMH is worth a mention here.
@
text
@d22 2
a23 1
<a href= "faq11.html">[To Section 11 - Performance Tuning]</a>
d596 2
a597 1
<a href= "faq11.html">[To Section 11 - Performance Tuning]</a>
d606 1
a606 1
<small>$OpenBSD: faq12.html,v 1.74 2006/02/23 02:21:08 nick Exp $</small>
@


1.74
log
@
Mac68k keeps Darned Good Time now.
@
text
@d80 3
d583 7
a589 2
[nothing yet]

d604 1
a604 1
<small>$OpenBSD: faq12.html,v 1.73 2006/02/07 01:25:35 nick Exp $</small>
@


1.73
log
@
some ami(4) can only use one logical disk.  ok marco@@
@
text
@d505 2
a506 36
This is caused by a hardware bug. OpenBSD uses clock interrupts to keep
track of the current time, but these interrupts have the lowest priority
in the <a href="../mac68k.html">Mac68k</a> architecture.
So, under heavy load, (such as disk or network activity) clock
interrupts will be lost and the Unix clock will not advance as it
should.
<a href="../macppc.html">MacPPC</a> systems do not have this
issue.

<p>
Mac OS gets around the time problem by always reading the hardware clock.
OpenBSD only reads the hardware clock at boot time and thereafter
ignores it. You may notice that, at shutdown, the kernel is not
confident enough to write the Unix time back into the hardware clock
because this time loss problem is well known.

<p>
A simple solution is to run rdate(8) on a
regular basis, by having a crontab entry for it.
Another good place to launch
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rdate&amp;sektion=8">rdate
(8)</a>
is in your <i>/etc/ppp/ppp.linkup</i> file if you are not permanently
connected and are a PPP user.
Another solution is to use
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ntpd&amp;sektion=8">
ntpd(8)</a> as explained in the
<a href="faq6.html#OpenNTPD">OpenNTPD FAQ</a>.
One should note, however that none of these will make a Mac68k an accurate
time keeping system, they will just limit the amount of error.
Errors of ten minutes or more may still occur under high load.

<p>
See also:
<a href="http://www.macbsd.com/macbsd/macbsd-docs/faq/faq-3.html#ss3.17">
http://www.macbsd.com/macbsd/macbsd-docs/faq/faq-3.html#ss3.17</a>
d596 1
a596 1
<small>$OpenBSD: faq12.html,v 1.72 2006/02/06 21:46:08 steven Exp $</small>
@


1.72
log
@spelling/grammar fixes, small reordering of words.
@
text
@d58 2
d484 15
d630 1
a630 1
<small>$OpenBSD: faq12.html,v 1.71 2006/02/06 02:56:22 nick Exp $</small>
@


1.71
log
@
"partition extends past end of unit" message in disklabel on sparc64.
Requested/suggested by Miod@@
@
text
@d564 1
a564 1
On sparc and sparc64 systems, the BSD disklabel can not describe a disk
d570 1
a570 1
disklabel entries against what it think is the correct drive geometry,
d590 3
a592 3
A proper solution would have to be compatable with existing systems
already in use, plus be compatable with Solaris running on larger-than
8GB disks, but this has not been worked out yet.
d613 1
a613 1
<small>$OpenBSD: faq12.html,v 1.70 2005/10/29 01:54:18 nick Exp $</small>
@


1.70
log
@
sometimes somtimes is spelled sometimes.  From Steven Mestdagh.
@
text
@d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 2003-2005 by OpenBSD.">
d74 2
d560 33
d613 1
a613 1
<small>$OpenBSD: faq12.html,v 1.69 2005/10/28 10:56:55 nick Exp $</small>
@


1.69
log
@
hm.  My desire to avoid Three Letter Acronyms caused me to leave out the
three letters that people would be searching for: "KVM".  Pointed out by
JMC@@.
@
text
@d437 1
a437 1
This is most often seen when using a "switch box" (somtimes called a
d578 1
a578 1
<small>$OpenBSD: faq12.html,v 1.68 2005/10/27 01:14:48 nick Exp $</small>
@


1.68
log
@
Neat workaround for the KVM switch problem sometimes seen: PS/2 -> USB
adapter.  OpenBSD sees a USB mouse, and the adapters don't seem to have
a problem with the KVM switch.
@
text
@d437 2
a438 1
This is most often seen when using a "switch box" to attach multiple 
d578 1
a578 1
<small>$OpenBSD: faq12.html,v 1.67 2005/08/11 01:10:02 nick Exp $</small>
@


1.67
log
@
+"12.7.7 - What happened to the Adaptec RAID support (aac)?" inspired by
misc@@ long ago. (rumors of my inactiveness are slightly exagerated)
@
text
@d447 2
d577 1
a577 1
<small>$OpenBSD: faq12.html,v 1.66 2005/05/19 16:54:27 nick Exp $</small>
@


1.66
log
@
Welcome 3.7!
@
text
@d57 1
d459 18
d575 1
a575 1
<small>$OpenBSD: faq12.html,v 1.65 2005/05/18 00:48:36 nick Exp $</small>
@


1.65
log
@
Typos, spotted and fixed by Steven Mestdagh, thanks!
@
text
@d60 1
a60 7
  <li><a href="#mac68kSupport">12.8.1 - My Mac68k system doesn't seem to
       work</a>
  <li><a href="#mac68kTime">12.8.2 - Why is my Mac68k losing so much time?</a>
  <li><a href="#mac68k2disks">12.8.3 - My Mac68k system won't work with two
       disks</a>
  <li><a href="#mac68kInstCrash">12.8.4 - The installer crashed during
       install</a>
a461 14
<a name="mac68kSupport"></a>

<i>Note: since the release of OpenBSD 3.6, there have been many major
improvements to the OpenBSD/mac68k platform.
If you experience any of the following problems (except for the time loss
problem), please try a recent snapshot, rather than -release</i>

<h3>12.8.1 - My Mac68k system doesn't seem to work!</h3>
Unfortunately, we have a small number of different Mac68k machines in
the hands of OpenBSD developers, and thus, only a few are known to work 
well at this moment.
<br>(<i>in -current, all available 68040-based (not 68LC040) mac68k
systems are believed to be at least mostly functional</i>)

d463 1
a463 1
<h3>12.8.2 - Why is my Mac68k losing so much time?</h3>
a501 44
<a name="mac68k2disks"></a>
<h3>12.8.3 - My Mac68k system won't work with two disks</h3>
Yes, unfortunately, this is a known problem.
This usually shows itself by crashes shortly after the system goes
multi-user, and the crash may not be obviously related to the disk
system.
The solution is to only use one drive on your Mac68k systems. 
<br>(<i>fixed in -current</i>)

<a name="mac68kInstCrash"></a>
<h3>12.8.4 - The installer crashed during install</h3>
The Mac68k installer running on Mac OS will not install files to a
"large" partition.  If any partition you are installing to is more than
around 500M in size, you can expect the following strange error:
<pre>
    Error on SCSIRead(), #5
    pos = 0, i = 22, fs = /
    alloccgblk: can't find blk in cyl
</pre>
The solution to this is to first install a minimal system in a "small" 
root partition, then boot OpenBSD and relocate things as desired.

<p>
So, let's say you want a 200M / partition. 
Create the root partition, create the other partitions you
want, newfs them all using the Mac OS utilities. 
Install etc36.tgz and base36.tgz to this / partition.

<p>
Mount your other partitions on a temporary mount point, and copy over
the directories you want to them, as demonstrated 
<a href="faq10.html#DupFS">here</a>.

<p>
Now, modify /etc/fstab, reboot, and unpack the rest of the *.tgz files as 
documented
<a href="faq4.html#AddFileSet">here</a>.

<p>
Following this process, any size can be achieved for the non-root
partitions.
<br>(<i>fixed in -current</i>)


d556 1
a556 1
<small>$OpenBSD: faq12.html,v 1.64 2005/04/24 20:56:45 nick Exp $</small>
@


1.64
log
@
knit the new faq13.html into the rest of the FAQ.  Not sure why I waited
to do this.
@
text
@d423 1
a423 1
<tt>pckdc: cmd failed</tt>), though if you do this, you will not be able
d620 1
a620 1
<small>$OpenBSD: faq12.html,v 1.63 2005/01/30 19:37:20 nick Exp $</small>
@


1.63
log
@
Inspired by martin@@: ntpd is helpful on mac68ks.  Under load, still see
drifts measured in tens of minutes, but let it idle, it does come back
to accurate.  Took a while to convince me, but yeah, it does work.
@
text
@d23 1
a23 1
<a href= "faq14.html">[To Section 14 - Disk Setup]</a>
d612 1
a612 1
<a href= "faq14.html">[To Section 14 - Disk Setup]</a>
d620 1
a620 1
<small>$OpenBSD: faq12.html,v 1.62 2005/01/23 01:56:42 nick Exp $</small>
@


1.62
log
@
The better way of dealing with OpenBSD/mac68k issues isn't workarounds,
but -current.  Good^H^H^Hreat work, Martin@@!
@
text
@d508 7
d620 1
a620 1
<small>$OpenBSD: faq12.html,v 1.61 2004/11/13 17:40:53 nick Exp $</small>
@


1.61
log
@
34->36.  oops.   spotted by Tobias Stoeckmann
@
text
@d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 2003-2004 by OpenBSD.">
d469 6
d479 2
a480 2
If you can help restore support to currently broken systems, your code
would be welcome!
d521 2
a522 2
The solution is to only use one drive on your Mac68k systems.  A proper
fix would be welcomed!
d556 1
d613 1
a613 1
<small>$OpenBSD: faq12.html,v 1.60 2004/11/12 19:07:06 david Exp $</small>
@


1.60
log
@typo in email address reported by Tobias Stoeckmann <tobias at bugol dot de>
@
text
@d535 1
a535 1
Install etc34.tgz and base34.tgz to this / partition.
d606 1
a606 1
<small>$OpenBSD: faq12.html,v 1.59 2004/11/10 17:04:37 nick Exp $</small>
@


1.59
log
@
Relocate "Wireless Networking Options" article to a more sane location.
@
text
@d437 1
a437 1
Please contact <a href="mailto:faq@@openbsd.og">faq@@openbsd.org</a>
d606 1
a606 1
<small>$OpenBSD: faq12.html,v 1.58 2004/10/29 17:26:01 nick Exp $</small>
@


1.58
log
@
Updates for 3.6
@
text
@a39 2
  <li><a href="#GenWireless">12.1.5 - What are my wireless networking
      options?</a>
a223 51
<a name="GenWireless"></a>
<h3>12.1.5 - What are my wireless networking options?</h3>
OpenBSD has support for a few wireless chipsets:
<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=awi&amp;sektion=4">awi(4)</a>
AMD 802.11 PCnet Mobile
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=an&amp;sektion=4">an(4)</a>
Aironet Communications 4500/4800
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wi&amp;sektion=4">wi(4)</a>
Prism2/2.5/3
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=atw&amp;sektion=4">atw(4)</a>
ADMtek ADM8211
</ul>

Adapters based on these chips can be used much like any other network
adapter to connect an OpenBSD system to an existing wireless network
(please see the manual pages for precise details).
The Prism2 and Prism3-based cards, however, can also be used in the
"Host-Based Access Point" mode, permitting them to be made into the
wireless access point for your network as part of your firewall.
Unfortunately, Prism2/3-based network adapters are no longer being
produced by most of the "mass market" manufacturers, as they have
switched to lower cost and newer chips, often
<a href="#GenSupport">without changing model number</a>.
Most of the manufacturers of newer chips have chosen to not release
documentation needed to produce free and open drivers for these 
devices (feel free to contact the manufacturers and ask them to 
change their policies).

<p>
Fortunately, Prism2/3-based adapters are still available through the
surplus and used market, and a few manufactures understand the value
of a properly documented, open-source friendly chipset, and continue to
produce professional-grade Prism-based adapters.
One reseller of these cards is
<a href="http://www.netgate.com">Netgate.com</a>.
In general, if a manufacturer does not explicitly identify a current
product as being Prism-based, you can safely assume it is not compatible
with the wi(4) driver.
Note that the newest Prism-series chips (such as the Prism-GT) are not
supported.

<p>
Another option to consider for using your OpenBSD-based firewall to
provide wireless access is to use a conventional NIC and an external
bridging Access Point.
This has the added advantage of letting you easily position the antenna
where it is most effective, which is often not directly on the back of
your firewall.


d606 1
a606 1
<small>$OpenBSD: faq12.html,v 1.57 2004/10/20 23:04:26 nick Exp $</small>
@


1.57
log
@
make "OpenBSD" logo on top of page a "click back" to the OpenBSD home page.
(about time!)
@
text
@a237 1
(<i>-current ONLY</i>)
d659 1
a659 1
<small>$OpenBSD: faq12.html,v 1.56 2004/09/15 15:11:34 nick Exp $</small>
@


1.56
log
@
update and improve: Prism2/3 vs. Prism-GT, pester manufacturers, etc.
@
text
@d16 3
a18 1
<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif">
d660 1
a660 1
<small>$OpenBSD: faq12.html,v 1.55 2004/08/09 18:07:34 nick Exp $</small>
@


1.55
log
@
New article: 12.1.5 - What are my wireless networking options?
@
text
@d242 14
a255 8
The Prism-based cards, however, can also be used in the "Host-Based
Access Point" mode, permitting them to be made into the wireless access
point for your network as part of your firewall.
Unfortunately, Prism-based network adapters are no longer being produced
by most of the "mass market" manufacturers, as they have switched to 
lower cost and newer chips, often <a href="#GenSupport">without changing
model number</a>.
Fortunately, Prism-based adapters are still available through the
d264 2
a265 2
Note that the newest Prism-series chips (not the Prism2, 2.5 or 3) are 
not yet supported.
d658 1
a658 1
<small>$OpenBSD: faq12.html,v 1.54 2004/08/08 18:32:49 nick Exp $</small>
@


1.54
log
@
Add 12.7.6 - Are WinModems supported?
@
text
@d38 2
d224 48
a271 1
<p> <a name="alpha"></a>
d652 1
a652 1
<small>$OpenBSD: faq12.html,v 1.53 2004/05/20 07:57:03 saad Exp $</small>
@


1.53
log
@typo. ok nick@@
@
text
@d54 1
d453 8
d603 1
a603 1
<small>$OpenBSD: faq12.html,v 1.52 2004/05/16 22:02:23 nick Exp $</small>
@


1.52
log
@
Two new articles:
12.1.3 - My device is "recognized" but says "not configured" in dmesg
12.1.4 - I have a card listed as "supported", but it doesn't work!
@
text
@d55 1
a55 1
<li><a href="#mac68k">12.6 - Mac68k</a>
d594 1
a594 1
<small>$OpenBSD: faq12.html,v 1.51 2004/04/30 18:06:20 nick Exp $</small>
@


1.51
log
@
FAQ updates for OpenBSD 3.5
@
text
@d34 4
d129 91
d594 1
a594 1
<small>$OpenBSD: faq12.html,v 1.50 2004/03/15 18:50:46 saad Exp $</small>
@


1.50
log
@MacOS -> Mac OS. ok nick@@
@
text
@d36 5
a40 3
<li><a href="#hp300">12.3 - HP 9000 series 300, 400</a>
<li><a href="#hppa" >12.4 - HP Precision Architecture (PA-RISC)</a>
<li><a href="#i386" >12.5 - i386</a>
d42 2
a43 2
  <li><a href="#ISANIC">12.5.1 - ISA NICs</a>
  <li><a href="#FPU">12.5.2 - OpenBSD won't work on my
d45 1
a45 1
  <li><a href="#IrqShare">12.5.3 - My dmesg shows multiple devices sharing
d47 2
a48 2
  <li><a href="#i386USBkb">12.5.4 - How do I use a USB keyboard?</a>
  <li><a href="#i386smouse">12.5.5 - My keyboard/mouse keeps locking
d53 1
a53 1
  <li><a href="#mac68kSupport">12.6.1 - My Mac68k system doesn't seem to
d55 2
a56 2
  <li><a href="#mac68kTime">12.6.2 - Why is my Mac68k losing so much time?</a>
  <li><a href="#mac68k2disks">12.6.3 - My Mac68k system won't work with two
d58 1
a58 1
  <li><a href="#mac68kInstCrash">12.6.4 - The installer crashed during
d61 1
a61 1
<li><a href="#macppc">12.7 - MacPPC</a>
d63 1
a63 1
  <li><a href="#macppcbm">12.7.1 - Why is my bm(4) driver so slow?</a>
d65 4
a68 3
<li><a href="#mvme68k">12.8 - MVME68k</a>
<li><a href="#sparc">12.9 - SPARC</a>
<li><a href="#sparc64">12.10 - UltraSPARC</a>
d70 1
a70 1
  <li><a href="#sparc64Floppy">12.10.1 - My UltraSPARC won't boot from the
d73 1
a73 1
<li><a href="#vax">12.11 - DEC VAX</a>
d126 7
d134 3
a136 2
<p> <a name="alpha"></a>
<h2>12.2 - DEC Alpha</h2> [nothing yet]
d139 1
a139 1
<h2>12.3 - HP300</h2>
d143 1
a143 1
<h2>12.4 - HPPA</h2>
d147 1
a147 1
<h2>12.5 - i386</h2>
d150 1
a150 1
<h3>12.5.1 - ISA NICs</h3>
d247 1
a247 1
<h3>12.5.2 - OpenBSD won't work on my 80386/80386SX/80486SX system!</h3>
d258 1
a258 1
OpenBSD 3.4 will run on an 80386 or 80386sx system IF it has a 80387 
d270 1
a270 1
hardware floating point support (like the 80386) OpenBSD 3.4 requires.
d275 1
a275 1
<h3>12.5.3 - My dmesg shows multiple devices sharing the same Interrupt
d290 1
a290 1
<h3>12.5.4 - How do I use a USB keyboard?</h3>
d342 1
a342 1
<h3>12.5.5 - My keyboard/mouse keeps locking up (or goes crazy)!</h3>
d359 1
a359 1
<h2>12.6 - Mac68k</h2>
d362 1
a362 1
<h3>12.6.1 - My Mac68k system doesn't seem to work!</h3>
d370 1
a370 1
<h3>12.6.2 - Why is my Mac68k losing so much time?</h3>
d403 1
a403 1
<h3>12.6.3 - My Mac68k system won't work with two disks</h3>
d412 1
a412 1
<h3>12.6.4 - The installer crashed during install</h3>
d446 1
a446 1
<h2>12.7 - MacPPC</h2>
d449 1
a449 1
<h3>12.7.1 - Why is my bm(4) network adapter so slow?</h3>
d460 5
a464 1
<h2>12.8 - MVME68k</h2>
d468 1
a468 1
<h2>12.9 - SPARC</h2>
d472 1
a472 1
<h2>12.10 - UltraSPARC (sparc64)</h2>
d475 1
a475 1
<h3>12.10.1 - My UltraSPARC won't boot from the floppy image</h3>
d482 1
a482 1
<h2>12.11 - DEC VAX</h2>
d499 1
a499 1
<small>$OpenBSD: faq12.html,v 1.49 2004/02/20 03:29:44 nick Exp $</small>
@


1.49
log
@
Tom@@'s cleanup of my recent additions.
I'm committing Tom's patch, so, uh, ok nick@@
@
text
@d370 1
a370 1
MacOS gets around the time problem by always reading the hardware clock.
d402 1
a402 1
The Mac68k installer running on MacOS will not install files to a
d416 1
a416 1
want, newfs them all using the MacOS utilities. 
d484 1
a484 1
<small>$OpenBSD: faq12.html,v 1.48 2004/02/09 18:43:08 nick Exp $</small>
@


1.48
log
@
couple new articles: #i386USBkb (USB keyboards), #i386smouse (switch box
problems for mice).
@
text
@d46 1
a46 1
  <li><a href="#i386smouse">12.5.5 - My keyboard and mouse keeps locking
d280 1
a280 1
Usually, OpenBSD/i386 will use a USB keyboard and mouse without difficulty
d285 1
a285 1
Some notes:
a286 2
<li>Machines vary.
You will have to experiment.
d293 4
a296 4
it turned off, some may install better with it in one setting and run
with it better in the other.
Your machine may not let you set this option.
Experiment.
d299 1
a299 1
<a href="faq5.html#BootConfig"><tt>ukc></tt></a> by entering
d301 1
a301 1
<li>PS/2 keyboard/mouse to USB adapters may not work.
d305 1
a305 1
OpenBSD on another computer, then move your hard disk to your "Legacy Free"
d309 1
a309 1
After Install notes:
d311 1
a311 1
<li>using <a href="faq5.html#BootConfig">User Kernel Configuration</a>
d315 1
a315 1
<li>The USB keyboard and mouse is handled just like a PS/2 keyboard
d318 2
a319 2
<li>Unfortunately, there is no way to set up a serial console on a 
"legacy free" (no serial, parallel or PS/2 port) system at this time.
d324 2
a325 2
Unfortunately, there are a variety of ways USB is supported on PCs right
now, so you will have to do some experimenting with your system to get
d331 1
a331 1
<h3>12.5.5 - My keyboard and mouse keeps locking up (or goes crazy)!</h3>
d337 3
a339 3
The problem is usually just the switching of the mouse, if you are not
using the mouse, the solution is simple: don't attach the mouse cable 
to the computer.
d484 1
a484 1
<small>$OpenBSD: faq12.html,v 1.47 2004/01/11 00:27:22 nick Exp $</small>
@


1.47
log
@
add #macppcbm : bm(4) has issues at 100Mbps.  from discussion with drahn@@
@
text
@d41 2
a42 1
  <li><a href="#FPU">12.5.2 - OpenBSD won't work on my 80386/80386SX/80486SX system</a>
d45 3
d278 71
d486 1
a486 1
<small>$OpenBSD: faq12.html,v 1.46 2004/01/01 04:13:34 nick Exp $</small>
@


1.46
log
@
bump copyright to 2004
@
text
@d56 3
d363 11
a373 1
[nothing yet]
d411 1
a411 1
<small>$OpenBSD: faq12.html,v 1.45 2003/10/30 22:43:42 nick Exp $</small>
@


1.45
log
@
FAQ updates for OpenBSD 3.4.  Lots of help from lots of people, but
special thanks to Tom Cosgrove who provided many improvements and
proofreading.
@
text
@d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 2003 by OpenBSD.">
d398 1
a398 1
<small>$OpenBSD: faq12.html,v 1.44 2003/10/10 00:37:55 nick Exp $</small>
@


1.44
log
@
Per prior discussion amoung developers CD-ROM it is, not CDROM.
Work by Tom Cosgrove, thanks!
@
text
@d41 1
a41 1
  <li><a href="#80386">12.5.2 - OpenBSD won't boot on my 80386 system</a>
d228 2
a229 1
<h3>12.5.2 - OpenBSD won't boot on my 80386 (or 80386sx) system!</h3>
d239 6
a244 6
<!-- XXX bug in versions 2.9 thru 3.3 inclusive -->
There is a bug that prevents OpenBSD from booting on a 80386 or 80386sx
system in OpenBSD 3.3 and many earlier versions.
It can be worked around by replacing the 80386 chip with any of the
80486-like accelerator retrofit chips that exist (or running
<a href="faq5.html#Flavors"><i>-current</i></a>).
d250 6
d341 1
a341 1
Install etc33.tgz and base33.tgz to this / partition.
d398 1
a398 1
<small>$OpenBSD: faq12.html,v 1.43 2003/09/19 02:56:12 nick Exp $</small>
@


1.43
log
@
oops.  Not everything is caught by validator.w3.com, obviously.
Spotted by jk (dhc at scurvy dot org), filtered by Tom Cosgrove.  Thanks!
@
text
@d369 1
a369 1
Use CDROM, Miniroot, or network boot to do your installation instead.
d391 1
a391 1
<small>$OpenBSD: faq12.html,v 1.42 2003/09/16 01:38:29 nick Exp $</small>
@


1.42
log
@
Steve Shockley (steve.shockley at shockley dot net) is keeping me honest.
3C590 is a 10Mbps card, not a 100Mbps card.
@
text
@d97 1
a97 1
<a name="GenISA"</a>
d391 1
a391 1
<small>$OpenBSD: faq12.html,v 1.41 2003/08/06 13:58:08 nick Exp $</small>
@


1.41
log
@
Errors spotted by jmc@@ (thanks!): Double word, absolute links.
@
text
@d174 1
a174 1
The 3C509 is a 10Mbps ISA card, the 3C905 and 3C590 are 100Mbps PCI
d391 1
a391 1
<small>$OpenBSD: faq12.html,v 1.40 2003/08/06 02:46:35 nick Exp $</small>
@


1.40
log
@
typo.  Spotted it myself for a change.
@
text
@d241 1
a241 1
It it can be worked around by replacing the 80386 chip with any of the
d339 1
a339 1
<a href="http://www.openbsd.org/faq/faq10.html#DupFS">here</a>.
d344 1
a344 1
<a href="http://www.openbsd.org/faq/faq4.html#AddFileSet">here</a>.
d391 1
a391 1
<small>$OpenBSD: faq12.html,v 1.39 2003/08/05 19:54:07 nick Exp $</small>
@


1.39
log
@
You are right, Tom Cosgrove (tom dot cosgrove at arches-consulting dot com),
Platform-Specific should be hyphenated...
@
text
@d251 1
a251 1
 IRQ)!</h3>
d391 1
a391 1
<small>$OpenBSD: faq12.html,v 1.38 2003/08/05 17:58:27 nick Exp $</small>
@


1.38
log
@
New section: Platform-Specific Questions.
Where to put all those platform-specific quirks that end up scattered
elsewhere in the FAQ...  Note: 12.6.2 is lifted directly from
faq8.html#MacTime, other articles will be moving to this section from
elsewhere in the FAQ in the future.  A lot of this will be judgement
calls regarding what moves and what stays where it is...
"whatever", miod@@
@
text
@d24 1
a24 1
<h1><font color="#e00000">12 - Platform Specific Questions</font></h1>
d391 1
a391 1
<small>$OpenBSD: faq12.html,v 1.37 2003/07/25 20:05:19 nick Exp $</small>
@


1.37
log
@
clean up other faq13.html references
@
text
@d4 1
a4 1
<title>12 - For Advanced Users</title>
d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 1998-2003 by OpenBSD.">
d24 1
a24 1
<h1><font color="#e00000">12 - For Advanced Users</font></h1>
d30 34
a63 2
<li><a href="#IDEDMA">12.1 - Forcing DMA access for IDE disks</a>
<li><a href= "upgrade-minifaq.html">12.2 - Upgrading from various versions of OpenBSD via CVS.</a>
d68 2
a69 5
<p>
By <i>advanced users</i>, we mean to imply people who have a working
knowledge of how to use and administrate a Unix-like operating system.
If you follow instructions in this section without understanding what
you are doing, you may cause problems in the operation of your system.
d71 2
d74 3
a76 3
<p>
<a name= "IDEDMA"></a>
<h2>12.1 - Forcing DMA access for IDE disks</h2>
d78 16
a93 3
<p>
With the PCI IDE code, your chipset may not be known.  If so, you will
get a message like:
d95 1
a95 3
<blockquote><pre>
pciide0: DMA, (unused)
</pre></blockquote>
d97 17
a113 4
<p>
If you get this message, you can try and force DMA mode by
using 'flags 0x0001' on your pciide entry in your kernel config file.
That would look something like this:
a114 3
<blockquote><pre>
pciide* at pci ? dev ? function ? flags 0x0001
</pre></blockquote>
a115 12
<p>
After doing this, the pciide code will try to use DMA mode regardless of
whether or not it actually knows how to do so with your chipset.  If this 
works, and your system makes it through fsck and startup, it is likely
that this will work for good.  If this does not work, and the system hangs
or panics after booting, then you can't use DMA mode (yet, until support
is added for your chipset).  Note that if you find the documentation
for your PCI-IDE controller's chipset, this is a good start to fully
supporting your chipset within the PCI-IDE code.  You can look on the
manufacturer's website or call them.  If your PCI-IDE controller is part
of your motherboard, figure out who manufactures the chipset and pursue their
resources!
d117 2
a118 3
<p>
Note that you will know that DMA support has been enabled if you see this
message:
d120 256
a375 3
<blockquote><pre>
cd0(pciide0:1:0): using PIO mode 3, DMA mode 1
</pre></blockquote>
a376 3
<p>
This means that pciide0, channel 1, drive 0 (which appears to be an ATAPI
CD-ROM) is using DMA data transfers.
d391 1
a391 1
<small>$OpenBSD: faq12.html,v 1.36 2003/07/23 02:01:56 nick Exp $</small>
@


1.36
log
@
finish removing numeric targets (<a name="9.3">).  No words changed.
Also removed some inert stuff from faq11.html...
@
text
@d21 1
a21 1
<a href= "faq13.html">[To Section 13 - IPsec]</a>
d94 1
a94 1
<a href= "faq13.html">[To Section 13 - IPsec]</a>
d102 1
a102 1
<small>$OpenBSD: faq12.html,v 1.34 2003/03/18 03:41:04 nick Exp $</small>
@


1.35
log
@doctype/charset cleanup
ok nick@@
@
text
@a44 1
<a name= "12.1"></a>
@


1.34
log
@
* [FAQ Index] [Back] [Next] links at top of page ('bout time.  Finally
decided not having them was worse than the lame ideas I had).
* Top heading changed from <h2> to <h1> throughout
* [Back to Main Index] shortened to [FAQ Index] top and bottom
* Bottoms of faq5.html and faq14.html standardized.
@
text
@d1 1
a1 1
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
d103 1
a103 1
<small>$OpenBSD: faq12.html,v 1.33 2003/02/20 03:09:56 nick Exp $</small>
@


1.33
log
@
Page name cleanups.  Standardize capitalization, and change
x.0 -> x on titles and on "next/previous" links at bottom of page.
From Tom Cosgrove (tom dot cosgrove at arches-consulting dot com), thanks!
@
text
@d18 7
a24 1
<h2><font color="#e00000">12 - For Advanced Users</font></h2>
d93 1
a93 1
<a href= "index.html">[Back to Main Index]</a>
d103 1
a103 1
<small>$OpenBSD: faq12.html,v 1.32 2003/01/01 13:01:59 nick Exp $</small>
@


1.32
log
@
Rev copyrights to 2003.
@
text
@d4 1
a4 1
<title>12.0 - For Advanced Users</title>
d18 1
a18 1
<h2><font color="#e00000">12.0 - For Advanced Users</font></h2>
d88 2
a89 2
<a href= "faq11.html">[To Section 11.0 - Performance Tuning]</a>
<a href= "faq13.html">[To Section 13.0 - IPsec]</a>
d97 1
a97 1
<small>$OpenBSD: faq12.html,v 1.31 2002/11/26 01:02:04 nick Exp $</small>
@


1.31
log
@
Validation Man strikes again!  More great work from Horacio.  Thanks!
@
text
@d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 1998-2002 by OpenBSD.">
d97 1
a97 1
<small>$OpenBSD: faq12.html,v 1.30 2002/05/06 16:17:56 nick Exp $</small>
@


1.30
log
@
Remove obsolete/incomplete/unmaintained stuff about DMA on wdc(4).
Pointed out by Saad Kadhi <bsdguy@@docisland.org>, confirmed with
csapuntz@@ and mickey@@
@
text
@d1 1
d6 1
d18 2
a19 2
<h2><font color=#e00000>12.0 - For Advanced Users</font><hr></h2>
</p>
d22 2
a23 1
<ul><h3>Table of Contents</h3>
d27 1
a27 1
</p> 
d30 1
a30 1
<P>
d35 1
a35 1
<br>
d39 1
a39 1
<a name= "12.1">
a40 1
</a>
d45 2
a46 2
<UL>
<PRE>
d48 3
a50 2
</PRE>
</UL>
d54 2
a55 1
<UL><PRE>
d57 3
a59 1
</PRE></ul>
d71 2
a72 1
<P>
d75 2
a76 1
<UL><PRE>
d78 3
a80 1
</PRE></UL>
d83 1
a83 1
</p>
a90 1
</p>
d97 1
a97 2
<small>$OpenBSD: faq12.html,v 1.29 2002/01/21 20:28:25 nick Exp $</small>
</p>
@


1.29
log
@
Update copyright notice to 2002.  ok ericj@@
@
text
@d69 1
a69 1
cd0(pciide0:1:0): using PIO mode 3, DMA mode 1 (using DMA data transfers)
a73 13
<p>
Some notes:
</p>
<p>
DMA is not supported on wdc* unless a DMA channel (drq) is
specified. I'm not sure what the "standard" drqs are for hard disk
controllers. To enable
<pre>
wdc0	at isa? port 0x1f0 irq 14 flags 0x00
</pre>
Non-ultra DMA does not necessarily lead to higher bandwidth vs PIO. 
However, it decreases the CPU load significantly.
</p>
d88 1
a88 1
<small>$OpenBSD: faq12.html,v 1.28 2002/01/13 00:00:32 ericj Exp $</small>
@


1.28
log
@
change followed link color, so it is more visible in all netscape,
IE, konqueror

from Nick Holland <nick@@holland-consulting.net>
@
text
@d9 1
a9 1
<meta name= "copyright"     content= "This document copyright 1998-2001 by OpenBSD.">
d101 1
a101 1
<small>$OpenBSD: faq12.html,v 1.27 2002/01/12 01:39:29 ericj Exp $</small>
@


1.27
log
@
re-target the faq.
Change internal links from #10.XX -> #somethingmeaningfull
This will probobly break some external links to us, but will allow
us greater mobility in moving internal things around without breaking
links in the future.

work by Nick Holland <nick@@holland-consulting.net>
@
text
@d12 1
a12 1
<body bgcolor= "#ffffff" text= "#000000" link= "#23238E">
d101 1
a101 1
<small>$OpenBSD: faq12.html,v 1.26 2001/08/25 09:31:33 jufi Exp $</small>
@


1.26
log
@
copyright extended to 2001
@
text
@d21 1
a21 1
<li><a href="#12.1">12.1 - Forcing DMA access for IDE disks</a>
d35 1
d101 1
a101 1
<small>$OpenBSD: faq12.html,v 1.25 2001/01/27 22:19:47 ericj Exp $</small>
@


1.25
log
@
some html cleanup; from mpech@@prosoft.org.lv
@
text
@d9 1
a9 1
<meta name= "copyright"     content= "This document copyright 1998,1999 by OpenBSD.">
d100 1
a100 1
<small>$OpenBSD: faq12.html,v 1.24 1999/12/06 21:45:57 chris Exp $</small>
@


1.24
log
@missed a few
@
text
@a71 1
</ul>
d100 1
a100 1
<small>$OpenBSD: faq12.html,v 1.23 1999/12/06 21:42:08 chris Exp $</small>
@


1.23
log
@Changes for consistency
@
text
@d3 1
a3 1
<title>12 - For Advanced Users</title>
d101 1
a101 1
<small>$OpenBSD: faq12.html,v 1.22 1999/12/04 21:01:13 chris Exp $</small>
@


1.22
log
@pciide is now a part of the system, remove historical text
@
text
@d3 1
a3 1
<title>OpenBSD FAQ: 12 - For Advanced Users</title>
d101 1
a101 1
<small>$OpenBSD: faq12.html,v 1.21 1999/10/01 19:38:09 ericj Exp $</small>
@


1.21
log
@little update to upgrade faq, and link it from advanced users faq. Considering it only talks about upgrading via src.
@
text
@d21 1
a21 1
<li><a href="#12.1">12.1 - Using OpenBSD's new PCI-IDE code</a>
d27 5
d36 1
a36 1
<h2>12.1 - Using OpenBSD's new PCI-IDE code</h2>
a39 73
If you have a current source tree that was last updated after July 25th, you
will notice that OpenBSD has PCI-IDE code enabled by default, a big win on
performance
for anyone using an IDE controller!  The PCI-IDE code introduces new PCI and ISA IDE
code, and both PCI and ISA versions have DMA (or Direct Memory Access) capability.
DMA allows the IDE controller to transfer data right from disk to your memory
instead of running it through the CPU.  This lowers the overall utilization
of your CPU,  keeping disk access fast and clean.
(Note that OpenBSD has implemented the pciide code from NetBSD.)
<P>
<UL><TT>
Date: Mon, 19 Jul 1999 18:07:40 -0700 (PDT)<BR>
From: Constantine Sapuntzakis &lt;<A HREF="mailto:csapuntz@@stanford.edu">csapuntz@@stanford.edu</a>&gt;<BR>
To: tech@@openbsd.org<BR>
Subject: New ATA/IDE stuff in OpenBSD<BR>
<P>
This weekend, I started integrating the IDE code from NetBSD-current
to OpenBSD-current. It should be considered a work-in-progress.
<P>
I'm sending out this e-mail for three reasons: to tell you about the
new stuff, to ask for help in porting this across all the platforms
with IDE, and to ask for help in testing this new feature.
<P>
The code from NetBSD supports DMA, UltraDMA, PCI IDE, better error
recovery, etc. It's also faster too. The code has been extensively
tested in NetBSD but not in OpenBSD. The usual warnings apply: 
the new drivers might cause data loss.
<P>
The new code also has a different way of handling ATAPI devices (like
IDE CD ROMs, IDE tape drives, etc.). ATAPI devices talk the SCSI
packet protocol and the new ATAPI layer acts like a SCSI adapter. As
such, your ATAPI CD will now appear as SCSI CD (cd*), your ATAPI tape
drive as a SCSI tape drive (st*), your ATAPI zip drive like a SCSI
drive (sd*), etc. (note: some older ZIP drives are not ATAPI devices)
<P>
Many ATAPI devices are NOT entirely SCSI-I and SCSI-II compliant.  As
such, our SCSI device drivers may not work with your CD/tape drive/ZIP
drive. Integrating ATAPI device support into our SCSI devices is a
high priority so this shouldn't stay broken for long.  However, in the
interim, you might get SCSI errors to the console if you try to use
the devices. Under no condition should your machine hang or panic.  If
your machine does hang/panic, please send me mail, describing the
steps leading up to the hang and providing a dmesg dump.
<P>
For the best hard disk performance, you should not have an ATAPI
device on the same chain as a hard disk.
<P>
Currently, the ATA stuff is only integrated into the i386 port.  I am
willing to do the integration work on other platforms, but I need an
account on such a machine to do compiles and your help in testing the
resulting kernel.
<P>
To enable this feature on i386, you are going to have to edit some files.
Comments directing what edits to do appear in the following files:
<P>
1) arch/i386/conf/files.i386 (don't forget to uncomment pciide_machdep.c)<BR>
2) conf/files<BR>
3) dev/isa/files.isa<BR>
4) dev/pci/files.pci<BR>
<P>
In addition, look at
<P>
5) arch/i386/conf/NEWATA for how to configure the new stuff
<P>
If you boot the new stuff, I'd appreciate it if you sent me a dmesg dump.
Once you've got a new kernel, if anything goes wrong, please send me mail.
<P>
Feel free to provide positive feedback too. ;)
<P>
Thanks,<BR>
-Costa<BR>
</UL></tt>
<p>
d44 1
a44 1
pciide0: bus-master DMA support present, used without full driver support
d68 1
a68 1
pciide0:0:0: using DMA data transfers
d70 2
a71 1
This means that pciide0, channel 0, drive 0 is using DMA data transfers.
d101 1
a101 1
<small>$OpenBSD: faq12.html,v 1.20 1999/09/24 01:46:14 ericj Exp $</small>
@


1.20
log
@re-organization of the faq, based greatly on the recent changes to the main web page. This way will hopefully allow for greater expansion and readability. Some of the numbers have changed. sorry.
@
text
@d22 1
d168 1
a168 1
<small>$OpenBSD$</small>
@


1.19
log
@move disk information away from faq4 to a new faq15. This will leave room for an expanded installation section. faq14 added also although no information is in there to fill it. Soon it will be the IPsec FAQ
@
text
@d3 1
a3 1
<title>OpenBSD FAQ: 12.0 - Performance Tuning</title>
d13 2
d16 1
a16 4
<font color= "#0000e0">
<a href= "index.html">[Back to Main Index]</a>
<a href= "faq11-2.4.html">[To Section 11.0 - OpenBSD 2.4 Specific Information]</a>
</font>
d20 4
a23 1
<h1>12.0 - Performance Tuning</h1>
a24 1
</p>
a25 30
<p>
<a name= "12.1">
<h2>12.1 - Networking</h2>
</a>
</p>

<p>
If you run a busy server, gateway or firewall, you should make sure to prevent 
memory starvation to various parts of the kernel described below.
</p>

<P>
The <A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=options&apropos=0&sektion=4&format=html">options(4)</a> man page talks about the options presented.
<p>

<p>
An option you may need to change for a busy server, gateway or firewall is
NMBCLUSTERS.  This controls the size of the kernel mbuf cluster map.
On your computer, if you get messages like "mb_map full",
you need to increase this value.  If traffic on a networking interface stops
for no apparent reason, this may also be a sign that you need to increase
this value.  A reasonable value on the i386 port with most 100Mbps
ethernet interfaces (no matter how many the machine has) is 8192.  
</p>

<ul>
<strong>
option NMBCLUSTERS=8192<BR>
</strong>
</ul>
d29 2
a30 2
<a name= "12.2">
<h2>12.2 - Disk I/O</h2>
a31 1
</p>
d34 72
a105 22
Disk I/O speed is a significant factor in the overall speed of your
computer.  It becomes increasingly important when your computer
is hosting a multi-user environment (users of all kinds, from those
who log-in interactively to those who see you as a file-server or a web-server.)
Data storage constantly needs attention, especially when your partitions run
out of space and when your disks fail.  OpenBSD has several options
to increase the speed of your disk operations and provide fault tolerance.
</p>

<H3>CCD</H3><UL>
<p>
The first option is the use of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccd&apropos=0&sektion=4&format=html">ccd(4)</a>, the Concatenated Disk Driver.
This allows you to join several partitions into one virtual disk (and thus,
you can make several disks look like one disk).  This concept is
similar to that of LVM (logical volume management), which is found in many commercial Unix flavors.
<P>
If you are running GENERIC, ccd is already enabled.  If not, you may
need to add it to your kernel configuration.
To start the setup of ccd, you need to add support for it in your kernel. A
line such as:
</p>

d107 2
d110 3
a112 3
<pre>
<strong>pseudo-device   ccd     4       # concatenated disk devices</strong>
</pre>
d114 22
a135 22
</p>

<p>
The above example gives you up to 4 ccd devices (virtual disks).
Now you need to figure out what partitions on your real disks that you want
to dedicate to ccd.  Use disklabel to mark these partitions as type 'ccd'.
On some architectures, disklabel may not allow you to do this.  In this case,
mark them as 'ffs'.
<p>
If you are using ccd to gain performance by striping, note that you will
not get optimum performance unless you use the same model of disks with
the same disklabel settings.
<P>
Edit /etc/ccd.conf to look something like this:
(for more information on configuring ccd, look at
<A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=ccdconfig&apropos=0&sektion=8&format=html">ccdconfig(8)</a>)
<UL>
<PRE>
# Configuration file for concatenated disk devices
#
# ccd   ileave  flags   component devices
ccd0   16      none    /dev/sd2e /dev/sd3e
d137 1
a137 111
To make your changes take effect, run
<UL><PRE># ccdconfig -C
</PRE></UL>
As long as /etc/ccd.conf exists, ccd will automatically configure itself
upon boot.
Now, you have a new disk, ccd0, a combination of /dev/sd2e and /dev/sd3e.
Just use disklabel on it like you normally would to make the partition 
or partitions you want to use.  Again, don't use the 'c' partition as
an actual partition that you put stuff on.
Make sure your useable partitions are at least one cylinder off from the beginning
of the disk.
</p>
</UL>
<br>
<H3>RAID</H3>
<UL>
<p>
Another solution is <a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=raid&apropos=0&sektion=4&format=html">raid(4)</a>
which will have you use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raidctl&apropos=0&sektion=8&format=html">raidctl(8)</a>
to control your raid devices.  OpenBSD's RAID is based upon
Greg Oster's <A HREF="http://www.cs.usask.ca/staff/oster/raid.html">NetBSD port</a>
of the CMU
<A HREF="http://www.pdl.cs.cmu.edu/RAIDframe/">RAIDframe</a> software.
OpenBSD has support for RAID levels
of 0, 1, 4, and 5.<P> With raid, as with ccd, support must be in the KERNEL.
Unlike ccd, support for RAID is not found in GENERIC, it must be compiled 
into your kernel (RAID support adds some 500K to the size of an i386 kernel!)
</p>

<p>
<UL>
<pre>
<strong>pseudo-device   raid   4       # RAIDframe disk device</strong>
</pre>
</UL>
<P>
Setting up RAID on some operating systems is confusing and
painful to say the least.  Not so with RAIDframe.
Read the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raid&apropos=0&sektion=4&format=html">raid(4)</a> and
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raidctl&apropos=0&sektion=8&format=html">raidctl(8)</a>
man pages to get full details. There are many
options and possible configurations, a detailed explanation is beyond the scope of this document.
</UL>
<BR>
<H3>Filesystem Buffer</H3>
<UL>
For fileservers with memory to spare, you can increase BUFCACHEPERCENT.
That is, what percentage of your RAM should you use as a file system buffer.
This option may change when the Unified Buffer Cache is completed
and is part of OpenBSD.  In the mean time, to increase BUFCACHEPERCENT,
you should add a line to your kernel configuration like this:
</p>

<p>
<UL>
<strong>option	BUFCACHEPERCENT=30</strong><BR>
</UL>
</p>
<p>
Of course you can make it as low as 5 percent (the default) or as high
as 50 percent (or more.)
</p>
</UL>
<br>
<H3>Soft updates</H3><UL>
Another tool that can be used to speed up your system is softupdates.  One of the 
slowest operations in the traditional BSD file system is updating metainfo
(which happens, among other times, when you create or delete files and
directories.) Softupdates
attempts to update metainfo in RAM instead of writing
to the hard disk each and every single metainfo update.  Another 
effect of this is that the metainfo on disk should always be complete,
although not always up to date.  So, a system crash should not require
fsck upon boot up, but simply a background version of fsck that makes
changes to the metainfo in RAM (a la softupdates).
This means rebooting a server is much faster, because you don't
have to wait for fsck!  (OpenBSD does not have this feature yet.) You can read
more about softupdates in the <a href="faq15.html#15.5">softupdates FAQ</a> entry.
If you use softupdates, you will most certainly want to take
advantage of the Tuning kmem section below.
</UL>
</p>
<BR>
<p>
<a name= "12.3">
<h2>12.3 - Tuning kmem</h2>
</a>
</p>

<P>
If you start using the performance tuning measures above, you may start
running out of kernel memory.  If you start getting
panics like "out of space in kmem_map" then you need to try
<UL>
<strong>
option NKMEMCLUSTERS=8192<BR>
</strong>
</UL>
Note that 8192 is valid for the i386 architecture, but may be too
little or too much for others. Look at /usr/include/machine/param.h
to see more information.
<P>
You may also want to increase the number of static kernel maps and entries.
The default value for these options is architecture dependent and is specified
in /sys/vm/vm_map.h. If you are using soft updates, the following values should 
keep you going!
<UL>
<strong>
option MAX_KMAP=120<BR>
option MAX_KMAPENT=6000<BR>
</strong>
a138 6

<br>
<p>
<a name= "12.4">
<h2>12.4 - Hardware choices</h2>
</a>
a139 71
<i>(Note- this section is heavily centered around the i386, or PC, architecture.
That is to say... other architectures don't give you quite as many choices!)</i>
<P>
The performance of your applications depends heavily on your OS and the
facilities it provides.  This 
may be part of the reason that you are using OpenBSD.
The performance of your applications also depends heavily on your hardware.
For many folks, the Price/Performance ratio of a brand new PC with
a Intel Pentium III or AMD Athlon processor is much better then the
Price/Performance ratio of a Sun UltraSparc 60!
And, the price of OpenBSD can't be beat.
<P>
If you are shopping for a new PC, whether you are buying it
piece by piece or completely pre-built, you want to make sure first
that you are buying reliable parts.  In the PC world, this is not easy.
<b>Bad or otherwise unreliable or mismatched parts can
make OpenBSD run poorly and crash often</b>.  The best advice
we can give is to be careful,
buy brands and parts that have been reviewed by an authority you trust.
Sometimes, when you skimp on the price of a PC, you lose in quality!
<P>
There are certain things that will help bring
out the maximum performance of your hardware:
<UL>
<LI>Use multiple disks.
<P>Instead of buying one 20GB disk, buy multiple 4GB or 9GB disks.  While this
may cost more, distributing the load over multiple spindles will decrease
the amount of time necessary to access data on the disks.  And, with more 
spindles, you will get more reliability and faster data access with RAID.
<p>
<LI>Use SCSI where you can.
<P>If you are building a server, and you need more then 10GB of disk space,
the SCSI architecture is the best choice.  IDE limits you to two disks per controller.
Wide SCSI limits you to 15 per controller!  While SCSI costs more, the flexibility and
performance can justify these costs.
IDE was not designed for use in a multi-user, multi-tasking environment.
<P>
<li>Use SDRAM.
<P>
This option applies mainly to PCs.  Most other architectures don't give
you a choice of what kind of RAM you can use.  Several PCs still do.
Avoid SIMMs, as there are not many companies manufacturing them anymore,
and in some cases they cost more then equivalent SDRAM!
<P>
<li>Use ECC or parity RAM.
<P>
Parity adds some functionality to see if the data in RAM has been
corrupted.  ECC extends this functionality and attempts to correct
some bit corruption errors on the fly.
This option applies mainly to PCs.  Most other architectures
simply require parity or ECC capable RAM.  Several non-PC computers won't
even boot with non-parity RAM. 
If you aren't using ECC/parity RAM, you may get data corruption and
other abnormalities. Several manufacturers
of "cheap PC RAM" don't even make an ECC variety!  This will help you
avoid them!  PC manufacturers often sell several product lines, 
divided around "servers" and "workstations."  The servers will incorporate
ECC RAM into their architecture.  Unix workstation manufacturers have been
using parity (and now ECC) for several years in all of their product lines.
<P>
<LI>Avoid ISA devices.
<P>
While most folks avoid ISA devices, because they are generally hard to configure
and out of date, there are still plenty in existence.  If you are using the ISA
bus for your disk or network controllers, (or even worse, for both) remember
that the ISA bus itself can be a performance bottleneck.  If you need speed,
look to PCI.  Of course, there are still several ISA bus cards that work
just fine.  Unfortunately, most of these are sound cards and serial port cards.
</ul>
<P>
<br>
d141 1
a141 10
<a name= "12.5">
<h2>12.5 - Why aren't we using async mounts?</h2>
</a>
<p>
Question: "I simply do "mount -u -o async /" which makes one package I use 
(which insists on touching a few hundred things from time to time) useable.

Why is async mounting frowned upon and not on by default (as it is in some
other unixen) ? Surely it is much simpler and therefore a safer way of
improving performance in some applications ?"
d144 3
a146 6
Answer: "Async mounts is indeed faster then sync mounts, but they are also 
less safe. What happens in case of a power failure? Or a hardware problem?
The quest for speed should not sacrifice the reliabilty and the stability of 
the system. Check the manpage for 
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=mount&apropos=0&sektion=8&format=html">mount(8)</a>."
</p>
d148 1
a148 8
	     async   All I/O to the file system should be done asynchronously.
		     This is a dangerous flag to set since it does not guaran-
		     tee to keep a consistent file system structure on the
		     disk.  You should not use this flag unless you are pre-
		     pared to recreate the file system should your system
		     crash.  The most common use of this flag is to speed up
		     restore(8) where it can give a factor of two speed in-
		     crease.
d150 2
a151 6
<p>
On the other hand, when you are dealing with temp data that you can recreate 
from scratch after a crash, you could gain speed by using a separate 
partition, used for that data only, mounted async. If you don't mind
risking the loss of all the data in the partition when something goes
wrong...
d157 2
a158 1
<a href= "faq11-2.4.html">[To Section 11.0 - OpenBSD 2.4 Specific Information]</a>
d167 1
a167 1
<small>$OpenBSD: faq12.html,v 1.18 1999/08/31 00:49:20 chris Exp $</small>
@


1.18
log
@proper naming for 2.4 faq entries
@
text
@d192 1
a192 1
more about softupdates in the <a href="faq4.html#4.9">softupdates FAQ</a> entry.
d354 1
a354 1
<small>$OpenBSD: faq12.html,v 1.17 1999/08/24 15:48:03 art Exp $</small>
@


1.17
log
@typo
@
text
@d16 1
a16 1
<a href= "faq24.html">[To Section 11.0 - OpenBSD 2.4 Specific Information]</a>
d345 1
a345 1
<a href= "faq24.html">[To Section 11.0 - OpenBSD 2.4 Specific Information]</a>
d354 1
a354 1
<small>$OpenBSD: faq12.html,v 1.16 1999/08/10 15:26:16 ericj Exp $</small>
@


1.16
log
@spelling and bad english fix's <louis@@bertrandtech.on.ca>
@
text
@d95 1
a95 1
The above example gives you up to 4 ccd devices (virual disks).
d354 1
a354 1
<small>$OpenBSD: faq12.html,v 1.15 1999/08/02 15:31:04 ericj Exp $</small>
@


1.15
log
@corrections  <D.H.Davis@@bath.ac.uk>
@
text
@d336 4
a339 3
from scratch after a crash, you could gain speed by using a seperate 
partition, used for that data only, mounted async. If you don't mind risking to
loose all the data in the partition when something goes wrong...
d354 1
a354 1
<small>$OpenBSD: faq12.html,v 1.14 1999/07/30 19:48:18 ericj Exp $</small>
@


1.14
log
@move advanced info to its own faq so that regular users dont attempt things they shouldnt
@
text
@d82 1
a82 1
To start setup of ccd, you need to add support for it in your kernel. A
d134 1
a134 1
to control your raid devices.  OpenBSD's RAID is based off of
d155 2
a156 2
man pages to get the whole scoop, there are too many
options and possible configurations which are beyond the scope of this document.
d218 1
a218 1
The default value for these options is architecture dependant and is specified
d353 1
a353 1
<small>$OpenBSD: faq12.html,v 1.13 1999/07/26 20:02:40 wvdputte Exp $</small>
@


1.13
log
@PCI IDE is now enabled by default. Added some notes.
Added section about async mounts (disclaimer)
@
text
@d307 1
a307 130
<h2>12.5 - Enabling PCI IDE's DMA features</h2>
</a>
<p>
If you have a current source tree that was last updated after July 25th, you
will notice that OpenBSD has PCI-IDE code enabled by default, a big win on
performance
for anyone using an IDE controller!  The PCI-IDE code introduces new PCI and ISA IDE
code, and both PCI and ISA versions have DMA (or Direct Memory Access) capability.
DMA allows the IDE controller to transfer data right from disk to your memory
instead of running it through the CPU.  This lowers the overall utilization
of your CPU,  keeping disk access fast and clean.
(Note that OpenBSD has implemented the pciide code from NetBSD.)
<P>
<UL><TT>
Date: Mon, 19 Jul 1999 18:07:40 -0700 (PDT)<BR>
From: Constantine Sapuntzakis &lt;<A HREF="mailto:csapuntz@@stanford.edu">csapuntz@@stanford.edu</a>&gt;<BR>
To: tech@@openbsd.org<BR>
Subject: New ATA/IDE stuff in OpenBSD<BR>
<P>
This weekend, I started integrating the IDE code from NetBSD-current
to OpenBSD-current. It should be considered a work-in-progress.
<P>
I'm sending out this e-mail for three reasons: to tell you about the
new stuff, to ask for help in porting this across all the platforms
with IDE, and to ask for help in testing this new feature.
<P>
The code from NetBSD supports DMA, UltraDMA, PCI IDE, better error
recovery, etc. It's also faster too. The code has been extensively
tested in NetBSD but not in OpenBSD. The usual warnings apply: 
the new drivers might cause data loss.
<P>
The new code also has a different way of handling ATAPI devices (like
IDE CD ROMs, IDE tape drives, etc.). ATAPI devices talk the SCSI
packet protocol and the new ATAPI layer acts like a SCSI adapter. As
such, your ATAPI CD will now appear as SCSI CD (cd*), your ATAPI tape
drive as a SCSI tape drive (st*), your ATAPI zip drive like a SCSI
drive (sd*), etc. (note: some older ZIP drives are not ATAPI devices)
<P>
Many ATAPI devices are NOT entirely SCSI-I and SCSI-II compliant.  As
such, our SCSI device drivers may not work with your CD/tape drive/ZIP
drive. Integrating ATAPI device support into our SCSI devices is a
high priority so this shouldn't stay broken for long.  However, in the
interim, you might get SCSI errors to the console if you try to use
the devices. Under no condition should your machine hang or panic.  If
your machine does hang/panic, please send me mail, describing the
steps leading up to the hang and providing a dmesg dump.
<P>
For the best hard disk performance, you should not have an ATAPI
device on the same chain as a hard disk.
<P>
Currently, the ATA stuff is only integrated into the i386 port.  I am
willing to do the integration work on other platforms, but I need an
account on such a machine to do compiles and your help in testing the
resulting kernel.
<P>
To enable this feature on i386, you are going to have to edit some files.
Comments directing what edits to do appear in the following files:
<P>
1) arch/i386/conf/files.i386 (don't forget to uncomment pciide_machdep.c)<BR>
2) conf/files<BR>
3) dev/isa/files.isa<BR>
4) dev/pci/files.pci<BR>
<P>
In addition, look at
<P>
5) arch/i386/conf/NEWATA for how to configure the new stuff
<P>
If you boot the new stuff, I'd appreciate it if you sent me a dmesg dump.
Once you've got a new kernel, if anything goes wrong, please send me mail.
<P>
Feel free to provide positive feedback too. ;)
<P>
Thanks,<BR>
-Costa<BR>
</UL></tt>
<p>
With the PCI IDE code, your chipset may not be known.  If so, you will
get a message like:
<UL>
<PRE>
pciide0: bus-master DMA support present, used without full driver support
</PRE>
</UL>
If you get this message, you can try and force DMA mode by
using 'flags 0x0001' on your pciide entry in your kernel config file.
That would look something like this:
<UL><PRE>
pciide* at pci ? dev ? function ? flags 0x0001
</PRE></ul>
After doing this, the pciide code will try to use DMA mode regardless of
whether or not it actually knows how to do so with your chipset.  If this 
works, and your system makes it through fsck and startup, it is likely
that this will work for good.  If this does not work, and the system hangs
or panics after booting, then you can't use DMA mode (yet, until support
is added for your chipset).  Note that if you find the documentation
for your PCI-IDE controller's chipset, this is a good start to fully
supporting your chipset within the PCI-IDE code.  You can look on the
manufacturer's website or call them.  If your PCI-IDE controller is part
of your motherboard, figure out who manufactures the chipset and pursue their
resources!
<P>
Note that you will know that DMA support has been enabled if you see this
message:
<UL><PRE>
pciide0:0:0: using DMA data transfers
</PRE></UL>
This means that pciide0, channel 0, drive 0 is using DMA data transfers.
</ul>
</p>
<p>
Some notes:
</p>
<p>
The cd driver is mostly working. You will probably get a SCSI error
message to the console when you initially use an audio cd. This is
because OpenBSD tries to read the disklabel of off the audio cd.
</p>
<p>
DMA is not supported on wdc* unless a DMA channel (drq) is
specified. I'm not sure what the "standard" drqs are for hard disk
controllers. To enable
<pre>
wdc0	at isa? port 0x1f0 irq 14 flags 0x00
</pre>
Non-ultra DMA does not necessarily lead to higher bandwidth vs PIO. 
However, it decreases the CPU load significantly.
</p>

<a name= "12.6">
<h2>12.6 - Why aren't we using async mounts?</h2>
d353 1
a353 1
<small>$OpenBSD: faq12.html,v 1.12 1999/07/20 19:47:56 ericj Exp $</small>
@


1.12
log
@wrong spelling
@
text
@d307 1
a307 1
<h2>12.5 - Enabling PCI IDE</h2>
d310 4
a313 3
If you have a current source tree that was last updated after July 18th, you
will notice that OpenBSD has PCI-IDE code, a big win on performance
for anyone using IDE disks!  The PCI-IDE code introduces new PCI and ISA IDE
d318 1
a318 12
OpenBSD has implemented the pciide code from NetBSD.  The OpenBSD code
will attach <tt>atapiscsi* at wdc?</tt> and <tt>atapiscsi* at pciide?</tt>, which then allows you to attach <tt>scsibus* at atapiscsi?</tt>.
This means that can use the standard SCSI device drivers (sd, cd, st, ...)
for devices on the ATAPI bus!  (In NetBSD, the entire SCSI system was
revamped to include ATAPI support, OpenBSD makes ATAPI support
much more simple.)
<P>
Note that these instructions will change from time to time.  After this
code is sufficiently tested under OpenBSD, most of the steps below
will become unnecessary.  But for now, to use the PCI-IDE code (and anyone
who wants better performance out of their IDE-based system will want to!),
you need to change four files.
d383 1
a383 95
You need to edit <tt>/usr/src/sys/dev/isa/files.isa</tt>,
find a section that looks like the excerpt below, and change it so that
the # symbols are not 'commenting out' the files which give you access
to the new code!
<ul>
<pre>
#Start uncommenting for new ATA stuff
# ISA "wd" (ESDI/IDE/etc.) controllers, ATAPI bus
attach wdc at isa with wdc_isa: isa_dma
file   dev/isa/wdc_isa.c                wdc_isa
#end uncommenting for new ATA stuff
 
#Start comment this out for new ATA stuff
#define       ata {drive = -1}
#device       wdc {drive = -1}: atapi, ata
#attach       wdc at isa with wdc_isa
#device       wd: disk
#attach       wd at wdc
#file dev/isa/wdc.c                   wdc & (wdc_isa | wdc_isapnp) needs-flag
#file dev/isa/wd.c                    wd needs-flag
#End comment this out for new ATA stuff
</pre>
</ul>
Next, you need to edit <tt>/usr/src/sys/dev/pci/files.pci</tt>, and change out this section to look like below:
<ul>
<pre>
#Start uncommenting for new ATA stuff
# PCI IDE controllers
device  pciide {[channel = -1]}: wdc_base, ata, atapi
attach  pciide at pci
file    dev/pci/pciide.c                pciide
#End uncommenting for new ATA stuff
</pre>
</ul>
Next, you need to edit <tt>/usr/src/sys/conf/files</tt>, and change it too.
<ul>
<pre>
#Start uncommenting for new ATA stuff
define  wdc_base
define  ata {[channel = -1], [drive = -1]}
define  atapi {[channel = -1]}
# Common code for ESDI/IDE/etc. controllers
device  wdc: ata, atapi, wdc_base
file    dev/ic/wdc.c wdc_base
#End uncommenting for new ATA stuff
</pre>
</ul>
Finally, PCI IDE has only been tested on the i386 platform as of this
writing.  If you are using another platform, you will need to do
some trickery to /usr/src/sys/arch/<i>yourarch</i>/conf/files.<i>yourarch</i>
(If you get this working on another arch, contact Costa and let him know!)
<p>
For i386 users, the trickery is in place, just uncomment it from
<tt>/usr/src/sys/arch/i386/conf/files.i386</tt>
<ul>
<pre>
#
# Machine-independent ATAPI drivers
# 

#Comment out this include below if you're using the new ATA stuff
#include "../../../dev/atapi/files.atapi"

#Start Uncomment for new ATA stuff
include "../../../dev/atapiscsi/files.atapiscsi"
include "../../../dev/ata/files.ata"
#End Uncomment for new ATA stuff
</pre>
</ul>
<P>
Once you edit all of these files, then cd /usr/src/sys/arch/i386/conf
and
<UL>
<PRE>
# <b>config NEWATA</b>
</PRE>
</ul>
and 
<ul>
<PRE>
# <b>cd ../compile/NEWATA</b>
# <b>make clean;make</b>
</pre>
</ul>
<P>
This will compile the NEWATA kernel.  If you are using another platform
with PCI IDE controllers, and you want to get this working, 
edit conf/files.<i>yourarch</i> to include the stuff shown above which
adds this capability to files.i386. Next, peek in the
/usr/src/sys/arch/i386/conf/NEWATA kernel config and 
copy out the new atapi/wd stuff to your own kernel config.
Note the commented out wd/atapi stuff in NEWATA,
and comment out the old wd/atapi stuff in your kernel the same way.
<P>
With this PCI IDE code, your chipset may not be known.  If so, you will
d415 55
d482 1
a482 1
<small>$OpenBSD: faq12.html,v 1.11 1999/07/20 15:51:51 wvdputte Exp $</small>
@


1.11
log
@Added the information from Chris Cappuccio (chris@@dqc.org) about PCI IDE
@
text
@d311 1
a311 1
wil notice that OpenBSD has PCI-IDE code, a big win on performance
d531 1
a531 1
<small>$OpenBSD: faq12.html,v 1.10 1999/06/30 16:01:27 ericj Exp $</small>
@


1.10
log
@spelling fix's <ccsdhd@@bath.ac.uk>
@
text
@d302 81
d384 77
d462 58
a519 1
<Br>
d531 1
a531 1
<small>$OpenBSD: faq12.html,v 1.9 1999/06/28 17:29:27 ericj Exp $</small>
@


1.9
log
@Fixes by <chris@@dqc.org> and <pattonme@@ra.pae.osd.mil> Also a kerberos section initially done by jeremie@@monkey.org
@
text
@d41 1
a41 1
An option you may need to chane for a busy server, gateway or firewall is
d269 1
a269 1
IDE was not designed for use in a mult-user, mult-tasking environment.
d297 1
a297 1
and out of date, there are still plenty in existance.  If you are using the ISA
d316 1
a316 1
<small>$OpenBSD: faq12.html,v 1.8 1999/06/28 02:11:11 ericj Exp $</small>
@


1.8
log
@fix up and add hardware section to faq12 <chris@@dqc.org>
@
text
@d78 1
a78 1
similar to that of LVM, which is found in many commercial Unix flavors.
d151 1
a151 1
Setting up RAID on Sun^H^H^Hsome operating systems is confusing and
d316 1
a316 1
<small>$OpenBSD: faq12.html,v 1.7 1999/06/24 14:11:09 ericj Exp $</small>
@


1.7
log
@remove i386 reference.. millert@@
@
text
@d95 31
a125 3
The above configuration entry
gives you up to 4 ccd devices (virual disks),
which is also the maximum number of ccd devices allowed.
d128 1
d133 1
a133 1
which will have you use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raidctl&apropos=0&sektion=8&format=html">raidctl(8)</a>.
d150 7
d158 1
d163 2
a164 2
This option will eventually go away when the Unified Buffer Cache is completed
and part of OpenBSD.  In the mean time, to increase BUFCACHEPERCENT,
d178 1
a178 1
<p>
d228 77
d316 1
a316 1
<small>$OpenBSD: faq12.html,v 1.6 1999/06/24 11:32:30 wvdputte Exp $</small>
a319 2


@


1.6
log
@corrected malformed </a> tag
@
text
@d181 3
a183 2
The default value for these options on i386 is 20 (MAX_KMAP) and 1000 (MAX_KMAPENT).
If you are using soft updates, the following values should keep you going!
d202 1
a202 1
<small>$OpenBSD: faq12.html,v 1.5 1999/06/24 03:36:18 ericj Exp $</small>
@


1.5
log
@much improved performance tuning section. <chris@@dqc.org>
@
text
@d32 2
a33 2
If you run a busy server, gateway or firewall, you should make sure to prevent memory
starvation to various parts of the kernel described below.
d37 1
a37 1
The <A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=options&apropos=0&sektion=4&format=html">options(4)<a> man page talks about the options presented.
d48 2
d201 1
a201 1
<small>$OpenBSD: faq12.html,v 1.4 1999/06/18 21:43:04 ericj Exp $</small>
@


1.4
log
@dont reference softupdate.html
@
text
@d32 2
a33 2
If you run a busy gateway or firewall, you should make sure you prevent memory
starvation.
d36 2
a38 2
Add these to your kernel config and compile a custom kernel:
</p>
d41 7
d49 3
a51 4
<li>option "NMBCLUSTERS=8192"</li>
<li>option "MAX_KMAP=120"</li>
<li>option "MAX_KMAPENT=6000"</li>
<li>option "NKMEMCLUSTERS=8192"</li>
d53 1
a53 1
</p>
d62 19
a80 13
Disk I/O is, on any system, a main factor in the overall speed of the
computer. And is also a part of any system that needs protected the most.
OpenBSD has a couple of options you can choose from when it comes to disk
fault tolerence.
</p>

<p>
The first option is the use of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccd&apropos=0&sektion=4&format=html">ccd(4)</a>.
CCD(4) is what is called a Concatenated Disk Driver. This basically allows
you to combine one or more disks into what is called a "virtual disk" As
in, the system see's it as one disk, and uses it as such. This concept is
similar to that of LVM, which is found in many commercial flavors.
To start setup of CCD, you need to add support for it in your kernel. A
d85 1
d89 1
d93 3
a95 9
would allow for 4 CCD devices. Which happens to be the MAX number of CCD
devices allowed.
</p>
<p>
<strong>NOTE: Support is in the GENERIC Kernel.</strong>
</p>
<p>
One of the many things you can do through the use of CCD is provide for
"striping", which can definately give a performance boost.
d97 3
d103 8
a110 3
to control your raid devices. Through the use of RAIDframe devices you can
achieve both striping and mirroring. OpenBSD has support for RAID levels
of 0, 1, 4, and 5. With raid, as with CCD, support must be in the KERNEL.
d114 1
d118 9
d128 1
d130 27
a156 1
As with the CCD kernel support, Support is in the GENERIC kernel.
d158 1
d160 3
a162 2
For fileservers with enough memory, you can increase BUFCACHEPERCENT. To
do this you should add a line to your kernel configuration like this:
d165 22
a186 10
<p>
<strong>option	BUFCACHEPERCENT=50</strong>
</p>
<p>
Or whatever number you want it set too.
</p>
<p>
Another tool that can be used to speed up your is softupdates. You can
read more about these at the <a href="faq4.html#4.9">softupdates FAQ</a> entry.
</p>
a187 1
<p>
d199 1
a199 1
<small>$OpenBSD: faq12.html,v 1.3 1999/05/29 05:34:18 ericj Exp $</small>
d203 1
@


1.3
log
@mention softupdates in disk i/o performance tuning
@
text
@d118 1
a118 2
read more about these at <a href="../softupdate.html">http://www.OpenBSD.org/softupdates.html</a>
or you can read the <a href="faq4.html#4.9">softupdates FAQ</a> entry.
d133 1
a133 1
<small>$OpenBSD: faq12.html,v 1.2 1999/05/25 19:18:47 ericj Exp $</small>
@


1.2
log
@explain disk i/o tools better
@
text
@d116 5
d134 1
a134 1
<small>$OpenBSD: faq12.html,v 1.1 1999/05/21 18:40:47 wvdputte Exp $</small>
@


1.1
log
@Added some links, removed typo and added new section 12 "Performance Tuning"
which still needs a lot of input.
@
text
@d41 6
a46 6
<pre>
option "NMBCLUSTERS=8192"
option "MAX_KMAP=120"
option "MAX_KMAPENT=6000"
option "NKMEMCLUSTERS=8192"
</pre>
d51 1
a51 1
<h2>12.2 - Disk IO</h2>
d56 4
a59 2
Consider getting SCSI disks. Multiple disks. Stripe 'm. Multiple controlers is 
always nice too. External SCSI-SCSI RAID controlers always work. How much money do you want to spend? :-)
d63 13
a75 4
Check the manpages for
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=ccd&apropos=0&sektion=4&format=html">ccd(4)</a>,
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=raid&apropos=0&sektion=4&format=html">raid(4)</a> and
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=raidctl&apropos=0&sektion=8&format=html">raidctl(8)</a>.
d79 36
a114 1
For fileservers with enough memory, increase BUFCACHEPERCENT.
d129 1
a129 1
<small>$OpenBSD$</small>
@

