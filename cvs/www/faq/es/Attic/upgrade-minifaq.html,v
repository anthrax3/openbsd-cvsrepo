head	1.82;
access;
symbols;
locks; strict;
comment	@# @;


1.82
date	2014.04.01.17.03.08;	author nick;	state dead;
branches;
next	1.81;

1.81
date	2009.06.29.17.19.48;	author ajacoutot;	state Exp;
branches;
next	1.80;

1.80
date	2004.01.01.23.30.28;	author horacio;	state Exp;
branches;
next	1.79;

1.79
date	2003.12.13.12.05.10;	author jufi;	state Exp;
branches;
next	1.78;

1.78
date	2003.11.17.19.40.51;	author horacio;	state Exp;
branches;
next	1.77;

1.77
date	2003.11.10.00.09.47;	author horacio;	state Exp;
branches;
next	1.76;

1.76
date	2003.10.26.22.50.13;	author horacio;	state Exp;
branches;
next	1.75;

1.75
date	2003.10.12.17.59.50;	author horacio;	state Exp;
branches;
next	1.74;

1.74
date	2003.09.02.14.53.23;	author jufi;	state Exp;
branches;
next	1.73;

1.73
date	2003.08.09.05.51.47;	author jufi;	state Exp;
branches;
next	1.72;

1.72
date	2003.07.20.14.13.29;	author jufi;	state Exp;
branches;
next	1.71;

1.71
date	2003.07.04.22.42.27;	author jufi;	state Exp;
branches;
next	1.70;

1.70
date	2003.06.27.20.55.49;	author jufi;	state Exp;
branches;
next	1.69;

1.69
date	2003.06.05.13.51.19;	author jufi;	state Exp;
branches;
next	1.68;

1.68
date	2003.05.28.13.53.08;	author jufi;	state Exp;
branches;
next	1.67;

1.67
date	2003.05.08.15.46.01;	author jufi;	state Exp;
branches;
next	1.66;

1.66
date	2003.05.06.21.22.24;	author jufi;	state Exp;
branches;
next	1.65;

1.65
date	2003.04.30.11.31.43;	author jufi;	state Exp;
branches;
next	1.64;

1.64
date	2003.04.20.10.10.53;	author jufi;	state Exp;
branches;
next	1.63;

1.63
date	2003.04.17.19.34.12;	author jufi;	state Exp;
branches;
next	1.62;

1.62
date	2003.03.26.16.35.58;	author jufi;	state Exp;
branches;
next	1.61;

1.61
date	2003.03.01.18.08.38;	author jufi;	state Exp;
branches;
next	1.60;

1.60
date	2003.02.25.20.13.04;	author jufi;	state Exp;
branches;
next	1.59;

1.59
date	2003.02.11.19.31.41;	author jufi;	state Exp;
branches;
next	1.58;

1.58
date	2003.01.25.22.21.15;	author jufi;	state Exp;
branches;
next	1.57;

1.57
date	2003.01.21.20.25.54;	author jufi;	state Exp;
branches;
next	1.56;

1.56
date	2003.01.21.15.11.53;	author jufi;	state Exp;
branches;
next	1.55;

1.55
date	2003.01.08.12.19.38;	author jufi;	state Exp;
branches;
next	1.54;

1.54
date	2003.01.06.22.01.41;	author jufi;	state Exp;
branches;
next	1.53;

1.53
date	2002.12.31.22.40.58;	author jufi;	state Exp;
branches;
next	1.52;

1.52
date	2002.12.15.19.08.37;	author jufi;	state Exp;
branches;
next	1.51;

1.51
date	2002.12.04.22.07.14;	author jufi;	state Exp;
branches;
next	1.50;

1.50
date	2002.11.23.20.01.57;	author jufi;	state Exp;
branches;
next	1.49;

1.49
date	2002.11.10.09.53.57;	author jufi;	state Exp;
branches;
next	1.48;

1.48
date	2002.10.17.12.12.55;	author jufi;	state Exp;
branches;
next	1.47;

1.47
date	2002.10.14.13.44.29;	author jufi;	state Exp;
branches;
next	1.46;

1.46
date	2002.09.22.10.52.15;	author jufi;	state Exp;
branches;
next	1.45;

1.45
date	2002.08.27.13.04.35;	author jufi;	state Exp;
branches;
next	1.44;

1.44
date	2002.07.24.16.42.21;	author jufi;	state Exp;
branches;
next	1.43;

1.43
date	2002.07.24.16.29.46;	author jufi;	state Exp;
branches;
next	1.42;

1.42
date	2002.06.23.06.26.08;	author jufi;	state Exp;
branches;
next	1.41;

1.41
date	2002.06.10.19.07.38;	author jufi;	state Exp;
branches;
next	1.40;

1.40
date	2002.06.06.18.40.00;	author jufi;	state Exp;
branches;
next	1.39;

1.39
date	2002.05.28.19.01.06;	author jufi;	state Exp;
branches;
next	1.38;

1.38
date	2002.05.18.22.54.00;	author jufi;	state Exp;
branches;
next	1.37;

1.37
date	2002.05.18.17.38.03;	author jufi;	state Exp;
branches;
next	1.36;

1.36
date	2002.05.14.20.03.55;	author jufi;	state Exp;
branches;
next	1.35;

1.35
date	2002.03.11.21.44.58;	author jufi;	state Exp;
branches;
next	1.34;

1.34
date	2002.02.23.17.35.42;	author jufi;	state Exp;
branches;
next	1.33;

1.33
date	2002.02.14.00.31.03;	author jufi;	state Exp;
branches;
next	1.32;

1.32
date	2002.02.10.12.24.44;	author jufi;	state Exp;
branches;
next	1.31;

1.31
date	2002.01.26.11.46.29;	author jufi;	state Exp;
branches;
next	1.30;

1.30
date	2002.01.20.22.35.38;	author jufi;	state Exp;
branches;
next	1.29;

1.29
date	2002.01.19.09.12.50;	author jufi;	state Exp;
branches;
next	1.28;

1.28
date	2002.01.10.19.10.06;	author jufi;	state Exp;
branches;
next	1.27;

1.27
date	2002.01.06.15.21.52;	author jufi;	state Exp;
branches;
next	1.26;

1.26
date	2001.12.31.10.55.48;	author jufi;	state Exp;
branches;
next	1.25;

1.25
date	2001.12.06.21.17.40;	author jufi;	state Exp;
branches;
next	1.24;

1.24
date	2001.11.29.17.04.52;	author jufi;	state Exp;
branches;
next	1.23;

1.23
date	2001.10.21.09.15.45;	author jufi;	state Exp;
branches;
next	1.22;

1.22
date	2001.09.27.17.11.04;	author jufi;	state Exp;
branches;
next	1.21;

1.21
date	2001.09.20.17.59.47;	author jufi;	state Exp;
branches;
next	1.20;

1.20
date	2001.07.14.14.09.39;	author jufi;	state Exp;
branches;
next	1.19;

1.19
date	2001.07.08.15.52.53;	author jufi;	state Exp;
branches;
next	1.18;

1.18
date	2001.07.04.20.01.04;	author jufi;	state Exp;
branches;
next	1.17;

1.17
date	2001.07.03.17.39.28;	author jufi;	state Exp;
branches;
next	1.16;

1.16
date	2001.07.02.18.16.58;	author jufi;	state Exp;
branches;
next	1.15;

1.15
date	2001.06.10.08.28.20;	author jufi;	state Exp;
branches;
next	1.14;

1.14
date	2001.06.05.17.09.20;	author jufi;	state Exp;
branches;
next	1.13;

1.13
date	2001.04.11.16.38.55;	author jufi;	state Exp;
branches;
next	1.12;

1.12
date	2001.03.04.11.54.47;	author jufi;	state Exp;
branches;
next	1.11;

1.11
date	2001.02.25.20.15.35;	author jufi;	state Exp;
branches;
next	1.10;

1.10
date	2001.01.04.05.20.09;	author jufi;	state Exp;
branches;
next	1.9;

1.9
date	2000.12.29.15.28.52;	author aaron;	state Exp;
branches;
next	1.8;

1.8
date	2000.12.28.22.00.26;	author jufi;	state Exp;
branches;
next	1.7;

1.7
date	2000.12.24.23.16.35;	author jufi;	state Exp;
branches;
next	1.6;

1.6
date	2000.09.29.07.00.06;	author jufi;	state Exp;
branches;
next	1.5;

1.5
date	2000.06.14.22.24.19;	author wvdputte;	state Exp;
branches;
next	1.4;

1.4
date	2000.06.11.15.53.43;	author wvdputte;	state Exp;
branches;
next	1.3;

1.3
date	2000.05.15.05.44.23;	author wvdputte;	state Exp;
branches;
next	1.2;

1.2
date	2000.04.30.20.30.16;	author wvdputte;	state Exp;
branches;
next	1.1;

1.1
date	2000.04.22.11.06.59;	author wvdputte;	state Exp;
branches;
next	;


desc
@@


1.82
log
@
Abandon translations, per deraadt@@ and ajacoutot@@.
Thanks to all those that did the translation work, and my appologies to
those who had to translate my writing!
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
 <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
 <meta http-equiv="Content-Language" content="es">

 <title>Gu&iacute;a de actualizaci&oacute;n de OpenBSD</title>
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">
<!-- máx. 72 caracteres por línea -->

<h1>Gu&iacute;a de actualizaci&oacute;n de OpenBSD</h1>

<h2>&Uacute;ltima versi&oacute;n de OpenBSD: 3.4</h2>

<address>
<p>
Kjell Wooding 
&lt;<a href="mailto:kjell@@openbsd.com">kjell@@openbsd.org</a>&gt; <br>
Updated:
$OpenBSD: upgrade-minifaq.html,v 1.81 2009/06/29 17:19:48 ajacoutot Exp $
</address>

<br>

<blockquote>
<p>
Con esta gu&iacute;a minimalista se pretende aclarar los problemas
m&aacute;s comunes que aparecen cuando se lleva a cabo una
actualizaci&oacute;n entre versiones finales de OpenBSD
(<em>-release</em>), o desde una versi&oacute;n final a una
versi&oacute;n en desarrollo (<em>-current</em>).  Aunque ya no sea un
&laquo;mini-documento&raquo;, todav&iacute;a mantiene el nombre de
<em>Mini-FAQ</em> por varios motivos.  La informaci&oacute;n que trata
sobre versiones m&aacute;s antiguas a las que aqu&iacute; aparecen se
puede encontrar en <a href="upgrade-old.html">un documento separado</a>.
</blockquote>

<p>
Esta gu&iacute;a de actualizaci&oacute;n es para <strong>Usuarios
Avanzados</strong>.  Si se es un principiante <strong>o todav&iacute;a
no se tiene mucha experiencia</strong> en el manejo del compilador y las
herramientas, no recomendamos la actualizaci&oacute;n mediante el
c&oacute;digo fuente.  Es mejor intentar instalar una versi&oacute;n
binaria final o preliminar, y despu&eacute;s aplicar las instrucciones
que se dan para la actualizaci&oacute;n de <tt>/etc</tt>.

<h2>Instrucciones generales para la actualizaci&oacute;n del
sistema</h2>

<p>
<a href="#1.1">
1.1: Terminolog&iacute;a.  &iquest;Qu&eacute; es <em>-current</em>?
&iquest;Qu&eacute; son los <em>snapshots</em>?  &iquest;Qu&eacute; es
<em>-stable</em>?
</a><br>

<a href="#1.2">
1.2: &iquest;Cu&aacute;l es la forma m&aacute;s sencilla de actualizar a
<em>-current</em>?
</a><br>

<a href="#1.3">
1.3: No puedo encontrar ning&uacute;n <em>snapshot</em> en el servidor
de FTP.  &iquest;D&oacute;nde est&aacute;n?
</a><br>

<a href="#1.4">
1.4: &iquest;C&oacute;mo puedo obtenet el c&oacute;digo fuente
m&aacute;s reciente?
</a><br>

<a href="#1.5">
1.5: Ya tengo el &aacute;rbol de fuentes, &iquest;c&oacute;mo lo
compilo?
</a><br>

<a href="#1.6">
1.6: 'make build' par&oacute; en la mitad del proceso, &iquest;tengo que
compilarlo todo de nuevo?
</a><br>

<a href="#1.7">
1.7: El proceso de compilaci&oacute;n produce errores,
&iquest;qu&eacute; debo hacer?
</a><br>

<a href="#1.8">
1.8: &iquest;Hay alg&uacute;n procedimiento preestablecido para
actualizar el compilador <em>gcc</em>?  versi&oacute;n m&aacute;s nueva.
</a><br>

<a href="#1.9">
1.9: &iquest;Cu&aacute;l es la mejor forma de actualizar <em>/etc</em>,
<em>/var</em>, y <em>/dev</em>?
</a><br>

<a href="#1.10">
1.10: &iquest;C&oacute;mo hago para eliminar todo lo sobrante de la
compilar desde el &aacute;rbol de fuentes?
</a><br>

<a href="#1.11">
1.11: &iquest;Es necesario ser el superusuario (<em>root</em>) para
ejecutar 'make build'?
</a><br>

<a href="#1.12">
1.12: &iquest;Por qu&eacute; no veo ning&uacute;n dispositivo nuevo?
</a><br>

<a href="#1.13">
1.13: &iquest;Hay alguna manera sencilla de llevar a cabo todos los
cambios en la jerarqu&iacute;a de archivos?
</a><br>

<a href="#1.14">
1.14: Despu&eacute;s de actualizar, <em>ps</em> produce el siguiente
error: &quot;proc size mismatch&quot;.
</a><br>

<a href="#1.15">
1.15: &iquest;C&oacute;mo puedo actualizar el sistema con la
&uacute;ltima versi&oacute;n preliminar (<em>snapshot</em>)?</a><br>

<h2>C&oacute;mo actualizar desde la versi&oacute;n 3.4</h2>

<p>
<a href="#3.4.1">3.4.1: Cambios en los n&uacute;meros menores del
dispositivo svnd</a><br>
<a href="#3.4.2">3.4.2: Nuevo usuario y grupo _pflogd</a><br>
<a href="#3.4.3">3.4.3: Clonaci&oacute;n de interfaz</a><br>
<a href="#3.4.4">3.4.4: Nueva versi&oacute;n de join(1)</a><br>

<h2>C&oacute;mo actualizar desde la versi&oacute;n 3.3</h2>

<p>
<a href="#3.3.1">3.3.1: Soporte para W^X en i386</a><br>
<a href="#3.3.2">3.3.2: Cambio en la llamada al sistema mquery</a><br>
<a href="#3.3.3">3.3.3: i386 <i>flag day</i>, cambio en exe
addr/MAXDSIZ</a><br>
<a href="#3.3.4">3.3.4: Eliminaci&oacute;n de la autenticaci&oacute;n de
KerberosIV</a><br>
<a href="#3.3.5">3.3.4: Cambio en <tt>config</tt></a><br>
<a href="#3.3.6">3.3.5: Uso de __attribute__((bounded)) en ciertas
funciones</a><br>
<a href="#3.3.7">3.3.6: Nuevo usuario y grupo _syslogd</a><br>
<a href="#3.3.8">3.3.7: Nuevo atributo de formato __kprintf__ en las
cabeceras del n&uacute;cleo del sistema</a><br>

<h2>C&oacute;mo actualizar desde la versi&oacute;n 3.2</h2>

<p>
<a href="#3.2.1">3.2.1: Nuevo Perl</a><br>
<a href="#3.2.2">3.2.2: Nuevos grupos _radius, _token y _shadow</a><br>
<a href="#3.2.3">3.2.3: Cambios importantes en el compilador</a><br>
<a href="#3.2.4">3.2.4: Nuevo usuario y grupo _spamd</a><br>
<a href="#3.2.5">3.2.5: Alias para ipv6-icmp</a><br>
<a href="#3.2.6">3.2.6: Nuevo grupo _lkm</a><br>
<a href="#3.2.7">3.2.7: Nuevo libpthread</a><br>
<a href="#3.2.8">3.2.8: Cambios en el enlazador para las arquitecturas
ELF</a><br>
<a href="#3.2.9">3.2.9: Fusionados los cambios de /var/at y
crontab</a><br>

<h2>C&oacute;mo actualizar desde la versi&oacute;n 3.1</h2>

<p>
<a href="#3.1.1">3.1.1: Nuevos usuarios/grupos</a><br>
<a href="#3.1.2">3.1.2: Nuevo grupo para crontab(1) y at(1)</a><br>
<a href="#3.1.3">3.1.3: Nuevo Binutils</a><br>
<a href="#3.1.4">3.1.4: Nueva configuraci&oacute;n para S/Key</a><br>
<a href="#3.1.5">3.1.5: Nuevos permisos para lp*</a><br>
<a href="#3.1.6">3.1.6: atrun(8) ya no es necesario</a><br>
<a href="#3.1.7">3.1.7: nat.conf fusionado con pf.conf</a><br>
<a href="#3.1.8">3.1.8: Nueva entrada en fbtab necesaria para
xdm</a><br>
<a href="#3.1.9">3.1.9: Uso de __attribute__((sentinel)) en ciertas
funciones</a><br>

<h2>Actualizaci&oacute;n desde la versi&oacute;n 3.0</h2>

<p>
<a href="#3.0.1">
3.0.1: Soporte de nueva clave por mtree(8)
</a><br>

<a href="#3.0.2">
3.0.1: Eliminaci&oacute;n de <em>libdl</em> en plataformas ELF
</a><br>

<a href="#3.0.3">
3.0.2: Nuevo marco de regresi&oacute;n
</a><br>

<a href="#3.0.4">
3.0.3: ficheros de configuraci&oacute;n de ssh traspasados a
<em>/etc/ssh/</em>
</a><br>


<h2>C&oacute;mo actualizar desde la versi&oacute;n 2.9</h2>

<p>
<a href="#2.9.1">
2.9.1: Nuevos usuarios/grupos - <em>proxy</em>, <em>smmsp</em> y
<em>popa3d</em>
</a> <br>

<a href="#2.9.2">
2.9.2: Nuevo filtro de paquetes IP
</a> <br>

<a href="#2.9.3">
2.9.3: Cambios en <em>make</em>
</a> <br>

<a href="#2.9.4">
2.9.4: Fallo de compilaci&oacute;n a causa de KerberosV
</a> <br>

<a href="#2.9.5">
2.9.5: La nueva versi&oacute;n de sendmail
</a> <br>

<a href="#2.9.6">
2.9.6: Cambio en <em>/etc/primes</em>
</a>


<h2>C&oacute;mo actualizar desde versiones anteriores</h2>

<p>
La informaci&oacute;n sobre la actualizaci&oacute;n para las versiones
2.3 hasta la 2.8 de OpenBSD se encuentra en un
<a href="upgrade-old.html">documento separado</a>.


&nbsp;<hr width="30%">

<a name="1.0"></a>
<h2>Preguntas generales sobre la actualizaci&oacute;n</h2>


<a name="1.1"></a>
<h3>
1.1: Terminolog&iacute;a. &iquest;Qu&eacute; es <em>-current</em>?
&iquest;Qu&eacute; son los <em>snapshots</em>?  &iquest;Qu&eacute; es
<em>-stable</em>?
</h3>

<p>
Con anterioridad a OpenBSD 2.7, el desarrollo de OpenBSD ten&iacute;a
lugar desde un s&oacute;lo &aacute;rbol de fuentes sin ramificaciones.
A partir de la versi&oacute;n 2.7 se introdujo una ramificaci&oacute;n
de parches.

<p>
Las <strong>versiones finales</strong> (<em>-release</em>) de OpenBSD se
producen con intervalos aproximados de seis meses.  &Eacute;stas se
enumeran en un modo convencional (2.x, 3.x).  La versi&oacute;n final
actual de OpenBSD se indica al principio de este documento.

<p>
<em>-current</em> es la forma de abreviada de <em>openbsd-current</em>,
la <strong>versi&oacute;nd de desarrollo</strong>, se refiere a la
versi&oacute;n de &uacute;ltima hora en el &aacute;rbol de fuentes del
repositorio de CVS.  &Eacute;ste es el &aacute;rbol que usan con
m&aacute;s asiduidad los desarrolladores de OpenBSD.  El &aacute;rbol de
<em>-current</em> contiene todo el c&oacute;digo que est&aacute;
planeado para el lanzamiento de la siguiente versi&oacute;n final.  De
vez en cuando, algunos valientes abandonan las versiones oficiales y
utilizan la versi&oacute;n de desarrollo, <em>-current</em>,
generalmente para aprovechar funcionalidades que todav&iacute;a no se
han implementado en las versiones finales.  Sin embargo, debido a su
naturaleza de incertidumbre, la actualizaci&oacute;n a <em>-current</em>
no es recomendable para usuarios no t&eacute;cnicos.

<p>
Entre una versi&oacute;n final y otra, creamos unas <strong>versiones
preliminares</strong>
(<em><a href="ftp://ftp.openbsd.org/pub/OpenBSD/snapshots/">
snapshots</a></em>).  &Eacute;stas son <em>revisiones
instant&aacute;neas</em> del &aacute;rbol de fuentes de
<em>-current</em>.  Debido a que son un reflejo del estado actual de
desarrollo, no se puede garantizar que estas versiones preliminares
funcionen correctamente... ni siquiera que funcionen.  Las versiones
preliminares son bastante &uacute;tiles cuando se est&aacute;
actualizando desde una versi&oacute;n final (o una versi&oacute;n de
desarrollo m&aacute;s antigua) a la del &aacute;rbol de desarrollo.  Si
el sistema del que se dispone es el de la versi&oacute;n de desarrollo,
es muy recomendable seguir la <a href="../../es/mail.html">lista de
correo</a> <em>source-changes</em>.  Los mensajes de los cambios en el
c&oacute;digo suelen contener informaci&oacute;n valiosa sobre las
&uacute;ltimas funcionalidades a&ntilde;adidas.

<p>
A partir de OpenBSD 2.7 se introdujo una 
<a href="../../es/stable.html"><strong>versi&oacute;n
estable</strong></a> (<em>-stable</em>).  &Eacute;sta es una
ramificaci&oacute;n de la versi&oacute;n final (<em>-release</em>) base
y cualquier otro parche o modificaci&oacute;n importante (se consideran
importantes los parches publicados en la p&aacute;gina de
<a href="../../es/errata.html">erratas</a>, adem&aacute;s de otros que
son obvios y simples pero que no merecen ser mencionados en dicha
p&aacute;gina).

<p>
El <a href="../../es/ports.html">&aacute;rbol de portes</a> es una parte
integral del sistema.  Cada vez que se actualice el sistema,
tambi&eacute;n hay que actualizar los portes, siguiendo las mismas
reglas que existen para la actualizaci&oacute;n del resto de las partes;
o sea, si el sistema es <em>-stable</em> los portes tambi&eacute;n deben
ser <em>-stable</em>, y si el sistema es <em>-current</em> los portes
s&oacute;lo deben ser <em>-current</em>.

<a name="1.2"></a>
<h3>
1.2: &iquest;Cu&aacute;l es la forma m&aacute;s sencilla de actualizar a
<em>-current</em>?
</h3>

<p>
Debido a cambios en las bibliotecas de base, actualizar de una
versi&oacute;n final (<em>-release</em>) a otra de desarrollo
(<em>-current</em>) no siempre es f&aacute;cil.  La forma m&aacute;s
dif&iacute;cil de actualizar a <em>-current</em> es
<a href="#1.15">actualizar primero a la revisi&oacute;n preliminar
(<em>snapshot</em>) m&aacute;s reciente</a>.  Una vez el
<em>snapshot</em> ha sido instalado, se pueden
<a href="#1.4">obtener</a> los fuentes m&aacute;s recientes y
<a href="#1.5">compilarlos</a>.  Este procedimiento deber&iacute;a
eliminar la mayor&iacute;a de problemas con las bibliotecas y las
herramientas necesarias.

<a name="1.3"></a>
<h3>
1.3: No puedo encontrar ning&uacute;n <em>snapshot</em> en el servidor
de FTP.  &iquest;D&oacute;nde est&aacute;n?
</h3>

<p>
Los <em>snapshot</em> se pueden retirar seg&uacute;n se vayan quedando
anticuados (o seg&uacute;n dejen de ser relevantes).  Si no hay
ning&uacute;n <em>snapshot</em> disponible, entonces se debe actualizar
a la versi&oacute;n m&aacute;s reciente y compilar lo restante desde el
c&oacute;digo fuente.

<a name="1.4"></a>
<h3>
1.4: &iquest;C&oacute;mo obtengo el c&oacute;digo fuente m&aacute;s
reciente?
</h3>

<p>
Respuesta corta:
<a href="../../es/anoncvs.html">http://www.openbsd.org/es/anoncvs.html</a>

<p>
Por ejemplo, para obtener el &aacute;rbol completo mediante CVS (usando
la shell ksh;  para otras hay que sustituir <em>export</em> por
<em>setenv</em>):

<pre>
# export CVSROOT=anoncvs@@anoncvs.ca.openbsd.org:/cvs
# export CVS_RSH=/usr/bin/ssh
# cd /usr
# cvs -q get -P src
</pre>

<p>
N&oacute;tese que con esto se obtendr&aacute; la versi&oacute;n de
desarrollo (<em>-current</em>).  Para obtener otra versi&oacute;n, por

<pre>
  # cvs -q get -rOPENBSD_3_2 -P src
</pre>

<a name="1.5"></a>
<h3>
1.5: Ya tengo el &aacute;rbol de fuentes, &iquest;c&oacute;mo lo
compilo?
</h3>

<p>
Hay unas instrucciones b&aacute;sicas en
<a href="http://www.openbsd.org/cgi-bin/cvsweb/src/Makefile">
<tt>/usr/src/Makefile</tt></a>.
&Eacute;sta es una versi&oacute;n ligeramente extendida.

<ol>
<li>
<p>Limpiar los ficheros objeto (<em>/usr/obj/</em>) antiguos.

<p>Si se hab&iacute;a creado un directorio <em>/usr/obj</em> separado,
hay que limpiarlo y reconstruir los enlaces simb&oacute;licos:

<pre>
# rm -rf /usr/obj/*
# cd /usr/src
# make obj
</pre>

<p>
Si hay que realizar este paso muchas veces, puede ser mucho m&aacute;s
r&aacute;pido poner <em>/usr/obj</em> en la partici&oacute;n y usar
<kbd>newfs</kbd> en lugar de <kbd>rm</kbd>.  Por ejemplo, lo que yo hago
es:

<pre>
# umount /usr/obj
# newfs wd0h
# mount /usr/obj
# make obj
</pre>

<p>
Si se est&aacute; preocupado porque pueda haber ficheros objeto en el
&aacute;rbol de fuentes, se puede hacer lo siguiente:

<pre>
# cd /usr/src
# find . -type l -name obj | xargs rm
# make cleandir
# rm -rf /usr/obj/*
# make obj
</pre>
</li>

<li>
<p>Hay que llevar a cabo cualquier cambio de configuraci&oacute;n
espec&iacute;fico para la versi&oacute;n.  Por ejemplo, los usuarios de
la versi&oacute;n 2.3 deben a&ntilde;adir el usuario y el grupo
<strong>named</strong> antes de actualizar a la versi&oacute;n 2.4 o
posterior.  Es recomendable leer la secci&oacute;n espec&iacute;fica
para la versi&oacute;n concreta que se encuentra en este documento.
</li>

<li>
<p>Es preciso asegurarse de que todos los directorios apropiados hayan
sido creados.  Esto es muy importante cuando se actualiza desde
versiones m&aacute;s antiguas, pero a veces necesario en otros casos.
La forma m&aacute;s f&aacute;cil de hacerlo es:

<pre>
# cd /usr/src/etc &amp;&amp; env DESTDIR=/ make distrib-dirs
</pre>
</li>

<li>
<p>A continuaci&oacute;n se compilar&aacute; un nuevo n&uacute;cleo
(<em>kernel</em>):

<pre>
  # cd /usr/src/sys/arch/`machine`/conf
</pre>

La mayor&iacute;a de usuarios utilizar&aacute;n GENERIC:

<pre>
  # config GENERIC
  # cd ../compile/GENERIC
</pre>

<p><strong>NOTA:</strong> los usuarios a quienes les guste sufrir pueden
compilar un n&uacute;cleo personalizado en lugar de usar el
n&uacute;cleo GENERIC.  En este caso es mejor empezar con GENERIC e ir
modific&aacute;ndolo.  Para ello hay que hacer lo siguiente:

<pre>
# cp GENERIC MYKERNEL
# vi MYKERNEL
(edite MYKERNEL seg&uacute;n le convenga)
# config MYKERNEL
# cd ../compile/MYKERNEL
</pre>

<p>Finalmente, para todos:

<pre>
# make clean &amp;&amp; make depend &amp;&amp; make
(s&oacute;lo en la arquitectura arc) copie bsd.ecoff en su partici&oacute;n FAT
# cp /bsd /bsd.old &amp;&amp; cp bsd /bsd
# chown root:wheel /bsd (si lo ha compilado como otro usuario)
(reinicie)
</pre>
</li>

<li>
<p>A continuaci&oacute;n se compilar&aacute; el sistema:

<pre>
# cd /usr/src
# make build
</pre>
</li>

<li>
<p><em>/etc</em> y <em>/dev</em> se actualizan a mano.  Estos ficheros
no se actualizan de forma autom&aacute;tica.  Hay que escoger un
directorio con espacio suficiente para <em>/</em>, <em>/dev</em>,
<em>/var</em>, y <em>/etc</em>.  En este ejemplo usar&eacute;
<em>/home/newroot</em>:

<pre>
# mkdir /home/newroot          
# export DESTDIR=/home/newroot
# cd /usr/src/etc &amp;&amp; make distribution-etc-root-var
</pre>

<p>Ahora comparemos los ficheros en <em>/home/newroot</em> con sus
correspondientes ya instalados, y reemplazaremos o actualizaremos los
ficheros seg&uacute;n sea necesario.

<pre>
# rm -rf /home/newroot   (cuando haya acabado)
</pre>
</li>

<li>
<p>Finalemente reiniciaremos el sistema para asegurarnos de que los
nuevos ficheros en <em>/etc</em> sean los correctos.
</li>
</ol>

<a name="1.6"></a>
<h3>
1.6: 'make build' se par&oacute; en la mitad del proceso, &iquest;tengo
que hacerlo todo de nuevo?
</h3>

<p>
Yo lo har&iacute;a, pero si realmente quiere retomarlo desde el punto en
que se qued&oacute;, haga lo siguiente:

<pre>
# cd /usr/src
# make -n build
</pre>

<p>
De este modo le mostrar&aacute; lo que 'make build' est&eacute;
haciendo.  Por ejemplo, el m&iacute;o dice:

<pre>
  (cd /usr/src/share/mk &amp;&amp;  make install)
  (cd /usr/src/include; make prereq;  make includes)
  make cleandir
  (cd /usr/src/lib &amp;&amp; make depend &amp;&amp; make &amp;&amp;   make install)
  (cd /usr/src/gnu/lib &amp;&amp; make depend &amp;&amp; make &amp;&amp;   make install)
  (cd /usr/src/kerberosIV/lib &amp;&amp; make depend &amp;&amp; make &amp;&amp;   make install)
  (cd /usr/src/gnu/usr.bin/perl &amp;&amp; make -f Makefile.bsd-wrapper config.sh &amp;&amp;
  make -f Makefile.bsd-wrapper depend &amp;&amp;
  make -f Makefile.bsd-wrapper perl.lib &amp;&amp;
  make -f Makefile.bsd-wrapper install.lib)
  make depend &amp;&amp; make &amp;&amp;  make install
</pre>

<p>
Para empezar desde donde se qued&oacute;, vuelva a invocar las
&oacute;rdenes desde el punto en donde se cort&oacute; la
compilaci&oacute;n.

<p>
Si tiene que realizar este procedimiento muchas veces, es posible que le
convenga crear un nuevo objetivo en su fichero makefile.  S&oacute;lo
tiene que copiar la entrada para <em>build</em> (a
<em>build-noclean</em>, por ejemplo), y eliminar la referencia <em>make
cleandir</em>.

<a name="1.7"></a>
<h3>
1.7: El proceso de compilaci&oacute;n produce errores,
&iquest;qu&eacute; puedo hacer?
</h3>

<p>
Si <em>make build</em> finaliza con un error, es muy posible que se deba
a que no elimin&oacute; sus ficheros objeto antiguos antes de
recompilar.  Lea la <a href="#1.5">secci&oacute;n 1.5</a> para
m&aacute;s detalles sobre c&oacute;mo limpiar esos ficheros.

<p>
Si est&aacute; seguro de que su &aacute;rbol est&aacute; limpio de
viejos restos, y a&uacute;n as&iacute; recibe un error de
compilaci&oacute;n, es que ha ocurrido una de las siguientes tres cosas:

<ol>
<li>
Se ha encontrado con un problema de actualizaci&oacute;n conocido.
Aseg&uacute;rese de haber leido la secci&oacute;n apropiada de este
documento, y de haber seguido las instrucciones con cuidado.
</li>

<li>
Se ha encontrado con un problema de actualizaci&oacute;n nuevo.  Esto es
lo que pasa cuando se vive peligrosamente.  Busque entre los mensajes
m&aacute;s recientes a las listas <a href="../../es/mail.html">misc@@ y
tech@@</a> una posible soluci&oacute;n.
</li>

<li>
Alguien ha &laquo;roto&raquo; temporalmente el &aacute;rbol de fuentes.
Esto es muy poco com&uacute;n, y por lo general se soluciona
inmediatamente.  Espere unas pocas horas y vuelva a obtener el
&aacute;rbol de fuentes.  Si no puede esperar, intente bajarse un
&aacute;rbol con uno o dos d&iacute;as de antelaci&oacute;n.
</li>
</ol>

<p>
Si ya ha probado todas las alternativas anteriores y su problema
persiste durante m&aacute;s de un par de d&iacute;as, env&iacute;e un
informe sobre su problema a misc@@openbsd.org.  Aseg&uacute;rese de
incluir los mensajes de error relevantes, as&iacute; como cualquier
peculiaridad de su configuraci&oacute;n.

<a name="1.8"></a>
<h3>
1.8: Estoy actualizando el compilador (<em>gcc</em>) a una
versi&oacute;n m&aacute;s nueva.  &iquest;Hay alg&uacute;n procedimiento
para el sistema de arranque?
</h3>

<p>
Debido a que la actualizaci&oacute;n de un compilador es como &laquo;el
problema del huevo y la gallina&raquo;, los cambios al compilador
original del &aacute;rbol requieren que se les preste algo m&aacute;s de
atenci&oacute;n.  Por regla general se seguir&aacute; este
procedimiento:

<p>
(... y s&iacute;, se compilar&aacute; dos veces)

<pre>
  # rm -r /usr/obj/gnu/egcs/gcc/*
  # cd /usr/src/gnu/egcs/gcc
  # make -f Makefile.bsd-wrapper clean
  # make -f Makefile.bsd-wrapper obj
  # make -f Makefile.bsd-wrapper depend
  # make -f Makefile.bsd-wrapper 
  # make -f Makefile.bsd-wrapper install
  # make -f Makefile.bsd-wrapper clean
  # make -f Makefile.bsd-wrapper depend
  # make -f Makefile.bsd-wrapper 
  # make -f Makefile.bsd-wrapper install
</pre>

<p>
y a continuaci&oacute;n ejecute un <kbd>make build</kbd> normal.

<p>
Puede acelerar este proceso usando el procedimiento de rutinas de
arranque (<em>bootstrap</em>):

<pre>
  # cd /usr/src/gnu/egcs/gcc
  # make -f Makefile.bsd-wrapper clean
  # make -f Makefile.bsd-wrapper obj
  # make -f Makefile.bsd-wrapper -DBOOTSTRAP
  # make -f Makefile.bsd-wrapper -DBOOTSTRAP install
  # make -f Makefile.bsd-wrapper clean
  # make -f Makefile.bsd-wrapper
  # make -f Makefile.bsd-wrapper install
</pre>

<a name="1.9"></a>
<h3>
1.9: &iquest;Cu&aacute;l es la mejor forma de actualizar <em>/etc</em>,
<em>/var</em>, y <em>/dev</em>?
</h3>

<p>
<strong>Respuesta corta</strong>: A mano.

<p>
<strong>Respuesta larga</strong>:

<p>
Como parte de la pol&iacute;tica de OpenBSD, el <em>software</em> en el
&aacute;rbol de cvs no modifica los ficheros en <em>/etc</em> de forma
autom&aacute;tica.  Esto quiere decir que es <strong>siempre</strong> el
administrador quien debe llevar a cabo las modificaciones necesarias a
los ficheros de configuraci&oacute;n.  Las actualizaciones no
constituyen una excepci&oacute;n.  Para actualizar los ficheros en estos
directorios, primero determine qu&eacute; cambios ha sufrido los
ficheros b&aacute;sicos de la distribuci&oacute;n, y a
continuaci&oacute;n vuelva a aplicar esos cambios manualmente.

<p>
Por ejemplo, para ver los ficheros que han cambiado m&aacute;s
recientemente en el &aacute;rbol, haga:

<pre>
  # cd /usr/src/etc
  # ls -lt |more
</pre>

<p>
Para ver todos los cambios en <em>/etc</em> entre versiones de OpenBSD
arbitrarias, puede usar <a href="../../es/anoncvs.html">CVS</a>.  Por
ejemplo, para ver los cambios acontecidos entre 3.1 y 3.2, haga:

<pre>
  # cd /usr/src/etc
  # cvs diff -u -rOPENBSD_3_1 -rOPENBSD_3_2
</pre>

<p>
Una vez que haya identificado los cambios, vuelva a aplicarlos a su
&aacute;rbol local, conservando cualquier configuraci&oacute;n a nivel
local que haya hecho Vd.  anteriormente.

<p>
Algunos cambios que suelen ocurrir en <em>/etc</em> entre el paso de
versiones, y que debe comprobar son:

<ul>
<li>A&ntilde;adidos en los ficheros <em>/etc/protocols</em> y
<em>/etc/services</em>.</li>
<li>Nuevas opciones en <em>sysctl</em> (v&eacute;ase
<em>/etc/sysctl.conf</em>).</li>
<li>Cambios en las tareas predeterminadas de <em>cron</em> (v&eacute;ase
<em>/etc/daily</em>, <em>/etc/weekly</em>, <em>/etc/monthly</em>, y
<em>/etc/security</em>).</li>
<li>Todos los guiones (<em>scripts</em>)de inicio <em>rc</em>, incluido
<em>/etc/netstart</em>.</li>
<li>Cambios en los dispositivos.  V&eacute;ase la
<a href="#1.12">secci&oacute;n 1.12</a>.</li>
<li>Cambios en la jerarqu&iacute;a de archivos en <em>/etc/mtree</em>.
V&eacute;se <a href="#1.13">secci&oacute;n 1.13</a>.</li>
<li>Nuevos usuarios (<em>/etc/passwd</em>) y grupos
(<em>/etc/group</em>).</li>
</ul>

<a name="1.10"></a>
<h3>
1.10: &iquest;C&oacute;mo hago para eliminar todo lo sobrante de la
compilaci&oacute;n del &aacute;rbol de fuentes?
</h3>

<p>
Lo m&aacute;s importante que puede hacer es eliminar sus directorios
<em>obj</em>.  Una forma de actualizar el c&oacute;digo fuente y
eliminar cualquier resto de obj es:

<pre>
  # cd /usr/src
  # cvs -q -d anoncvs@@some.anon.server:/cvs up -Pd
  # find . -type l -name obj | xargs rm
  # make -k cleandir
  # rm -rf /usr/obj/*
  # make obj
</pre>

<p>
Si todav&iacute;a tiene alg&uacute;n problema, puede a&ntilde;adir las
opciones <tt>-I ! -I CVS -I obj</tt> a sus actualizaciones por CVS.  De
este modo identificar&aacute; cualquier resto adicional en su
&aacute;rbol de fuentes.

<a name="1.11"></a>
<h3>
1.11: &iquest;Es necesario ser el superusuario para hacer un <em>make
build</em>?
</h3>

<p>
Aunque algunos pasos del proceso <em>make build</em> requieren los
privilegios del superusuario (<em>root</em>), el proceso <em>build</em>
incluye enlaces a la orden
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">
sudo(8)</a> que hacen que este proceso sea relativamente sencillo.

<p>
Si su fichero <em>/etc/sudoers</em> est&aacute; correctamente
configurado, puede usar los enlaces de sudo de la siguiente forma:

<ul>
<li>Ponga <tt>SUDO=/usr/bin/sudo</tt> en su fichero de entorno antes de
iniciar el proceso <em>build</em>, o</li>
<li>A&ntilde;ada la l&iacute;nea &quot;SUDO=/usr/bin/sudo&quot; a su
fichero <em>/etc/mk.conf</em>.</li>
</ul>

<a name="1.12"></a>
<h3>
1.12: &iquest;Por qu&eacute; no veo ning&uacute;n dispositivo nuevo?
</h3>

<p>
El gui&oacute;n <em>/dev/MAKEDEV</em> no se actualiza de forma
autom&aacute;tica como parte del proceso <kbd>make build</kbd>.  Como
regla general, es recomendable copiar este gui&oacute;n desde su
&aacute;rbol de fuentes cuando lleve a cabo una actualizaci&oacute;n, y
ejecutarlo a mano.

<pre>
  # cd /dev
  # cp /usr/src/etc/etc.`machine`/MAKEDEV ./
  # ./MAKEDEV all
</pre>

<a name="1.13"></a>
<h3>
1.13: &iquest;Hay alguna manera sencilla de llevar a cabo todos los
cambios en la jerarqu&iacute;a de archivos?
</h3>

<p>
De vez en cuando se a&ntilde;aden directorios y ficheros a, o se
eliminan de, la jerarqu&iacute;a de archivos.  Adem&aacute;s
tambi&eacute;n puede cambiar la informaci&oacute;n sobre permisos.  Una
forma f&aacute;cil de asegurarse de que la jerarqu&iacute;a de archivos
est&eacute; actualizada es usar la utilidad
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mtree&amp;sektion=8">mtree(8)</a>.

<p>
Primero obtenga el c&oacute;digo fuente m&aacute;s reciente, y luego
haga lo siguiente:

<pre>
  # cd /usr/src/etc/mtree
  # install -c -o root -g wheel -m 600 special /etc/mtree
  # install -c -o root -g wheel -m 444 4.4BSD.dist /etc/mtree
  # mtree -qdef /etc/mtree/4.4BSD.dist -p / -u
</pre>

<p>
Ahora su jerarqu&iacute;a de archivos estar&aacute; actualizada.

<a name="1.14"></a> 
<h3>
1.14: Despu&eacute;s de actualizar, <em>ps</em> produce el siguiente
error: &quot;proc size mismatch&quot;.
</h3>

<p>
El modo de usuario y el n&uacute;cleo del sistema est&aacute;n
desincronizados.  Los dos deben compilarse desde el mismo c&oacute;digo
fuente, ya que existen ciertas interdependencias entre ambos.  Recompile
el n&uacute;cleo y el sistema con el mismo c&oacute;digo para corregir
este problema.

<p>
Y ya que ha cometido un error, ahora es el momento ideal para volver a
leer todo este documento, y enterarse sobre otras cosas que pueda haber
olvidado.

<a name="1.15"></a>
<h3>
1.15: &iquest;C&oacute;mo puedo actualizar el sistema con la
&uacute;ltima versi&oacute;n preliminar?</h3>

<p>
La instalaci&oacute;n de una versi&oacute;n preliminar es una buena
forma para estar al d&iacute;a.  Queremos que se prueben las versiones
preliminares, especialmente en su estado beta, para poder estar seguros
de que la pr&oacute;xima versi&oacute;n final sea de una calidad
superior.  Y adem&aacute;s es mucho menos dif&iacute;cil que recompilar
todo el &aacute;rbol de fuentes.

<p>
La forma m&aacute;s f&aacute;cil de obtener la versi&oacute;n de
desarrollo, <em>-current</em>, es con una imagen de arranque y
prepararlo como se describe en el <a href="faq4.html">cap&iacute;tulo
4</a> de las preguntas frecuentes.  Una vez que haya arrancado, hay que
escoger la opci&oacute;n &quot;(U)pgrade&quot; para actualizar y seguir
las instrucciones.

<p>
Hay varios modos de iniciar el programa de actualizaci&oacute;n.
Generalmente, los m&eacute;todos m&aacute;s f&aacute;ciles son los de
arranque desde disquete o desde CDROM, o copiar un fichero
<a href="faq4.html#bsd.rd">bsd.rd</a> de la versi&oacute;n de desarrollo
en el directorio ra&iacute;z (<b>/</b>) y arrancar con ese n&uacute;cleo
en lugar de <tt>/bsd</tt>.  Otras opciones incluyen arrancar a
trav&eacute;s de la red y arrancar desde una cinta.  No todos estos
m&eacute;todos se encuentran disponibles para todas las arquitecturas;
para m&aacute;s informaci&oacute;n v&eacute;ase las instrucciones de
instalaci&oacute;n correspondientes.

<p>
N&oacute;tese que el &uacute;nico medio de actualizaci&oacute;n seguro
es el arranque desde un medio de instalaci&oacute;n/actualizaci&oacute;n
de los arriba descritos.

<p>
En todos los casos ser&aacute; necesario actualizar <a href="#1.9">/etc,
/var y /dev</a> a mano.


<a name="3.4"></a>
<h2>
C&oacute;mo actualizar desde la versi&oacute;n 3.4
</h2>

<a name="3.4.1"></a>
<h3>
3.4.1: Cambios en los n&uacute;meros menores del dispositivo svnd
(10/10/2003)
</h3>

<p>
Los n&uacute;meros menores de los dispositivos
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=svnd&amp;sektion=4">
svnd</a> han cambiado;  hay que ejecutar el fichero actualizado
<tt>/dev/MAKEDEV</tt> despu&eacute;s de instalar el nuevo n&uacute;cleo:
<ul>
  <li>actualice el &aacute;rbol de c&oacute;digo fuente
  <li>compile un nuevo n&uacute;cleo
  <li>copie el nuevo gui&oacute;n de MAKEDEV en el directorio dev/,
  eliminando los dispositivos svnd(4) y rsvnd que existan en este
  directorio, y creando unos nuevos:
<pre>
     # cp /usr/src/etc/etc.`machine`/MAKEDEV /dev
     # cd /dev
     # rm svnd* rsvnd*
     # ./MAKEDEV vnd
</pre>
  <li>Continuar con el proceso de compilaci&oacute;n
</ul>

Esto afecta a cualquiera que use dispositivos svnd, e incluye a quienes
est&eacute;n haciendo un <tt>make release</tt>.
<p>


<a name="3.4.2"></a>
<h3>
3.4.2: Nuevo usuario y grupo _pflogd (23/10/2003)
</h3>
<p>
El d&aelig;mon
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pflogd&amp;sektion=8">pflogd(8)</a>
ahora se ejecuta en modo separado de privilegio, y requiere un nuevo
usuario y grupo _pflogd.  El grupo se genera ejecutando
<pre>
  # groupadd -g 74 _pflogd
</pre>
como superusuario, y la entrada de usuario se a&ntilde;ade mediante
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8">
vipw(8)</a>:
<pre>
  _pflogd:*:74:74::0:0:pflogd privsep:/var/empty:/sbin/nologin
</pre>


<p>
<a name="3.4.3"></a>
<h3>
3.4.3: Clonaci&oacute;n de interfaz (07/12/2003)
</h3>
<p>
Se han cambiado de lugar varios pseudo-dispositivos de red (como
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gif&amp;sektion=4">gif(4)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lo&amp;sektion=4">lo(4)</a>, y
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tun&amp;sektion=4">tun(4)</a>)
para permitir el soporte de clonaci&oacute;n, o sea la creaci&oacute;n y
destrucci&oacute;n sobre la marcha de dispositivos.  Si el sistema
depende de estas interfaces, hay que instalar una versi&oacute;n
actualizada de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8">ifconfig(8)</a> y
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=netstart&amp;sektion=8">netstart(8)</a>
antes de reiniciar con el nuevo n&uacute;cleo.

<p>Primero hay que compilar e instalar el nuevo n&uacute;cleo como de
costumbre, y luego
<pre>
  # cd /usr/src &amp;&amp; make includes
  # cd sbin/ifconfig
  # make obj depend
  # make
  # make install
  # cp /usr/src/etc/netstart /etc
</pre>

A continuaci&oacute;n hay que reiniciar la m&aacute;quina y seguir
compilando el modo de usuario del sistema.


<p>
<a name="3.4.4"></a>
<h3>
3.4.4: Nueva versi&oacute;n de join(1) (28/12/2003)
</h3>
<p>Se ha actualizado la orden
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=join&amp;sektion=1">
join(1)</a> para el cumplimiento de las normativas POSIX al escribir
l&iacute;neas no coincidentes.  Como consecuencia, hay que actualizar
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=security&amp;sektion=8">security(8)</a>:
<pre>
  # cp /usr/src/etc/security /etc
</pre>


<p>
<a name="3.3"></a>
<h2>
C&oacute;mo actualizar desde la versi&oacute;n 3.3
</h2>

<a name="3.3.1"></a>
<h3>
3.3.1: Soporte para W^X en i386 (16/04/2003)
</h3>

<p>
Para activar el soporte <i>Writable xor eXecute</i> en i386,
OpenBSD/i386 ha cambiado desde el formato ejecutable a.out a ELF.  La
flexibilidad de ELF permite un mejor control sobre la capa ejecutable
que permite el soporte de W^X.  La compatibilidad con a.out s&oacute;lo
se encuentra disponible de forma limitada.  Los binarios a.out
est&aacute;ticos funcionar&aacute;n como antes, pero NO HABR&Aacute;
SOPORTE para binarios a.out din&aacute;micos.

<p>
NO HABR&Aacute; SOPORTE PARA ACTUALIZACIONES DE C&Oacute;DIGO FUENTE
DESDE a.out A ELF.  INSTALE UNA VERSI&Oacute;N PRELIMINAR
(<i>snapshot</i>) y luego recompile el c&oacute;digo.  Esto es
s&oacute;lo para la plataforma i386, las otras arquitecturas no
est&aacute;n afectadas por este cambio.

<a name="3.3.2"></a>
<h3>
3.3.2: Cambio en la llamada al sistema mquery (2003/04/28)
</h3>

<p>
Los par&aacute;metros de la llamada al sistema mquery han cambiado para
que coincida con mmap().  Este cambio requiere que se actualice el
sistema en el orden correcto:

<pre>
1. Compilar y arrancar un nuevo n&uacute;cleo.
2. (cd /usr/src &amp;&amp; sudo make includes)
3. (cd /usr/src/libexec/ld.so &amp;&amp; make &amp;&amp; sudo make install)
4. 'make build'
</pre>

S&oacute;lo se usa mquery en la arquitectura i386;  el resto de
arquitecturas no necesitan seguir este orden de compilaci&oacute;n tan
estricto.

<a name="3.3.3"></a>
<h3>
3.3.3: i386 <i>flag day</i>, cambio en exe addr/MAXDSIZ (05/05/2003)
</h3>

<p>
Para que se pueda cambiar MAXDSIZ de vuelta a 1G, la direcci&oacute;n de
base de todos los ejecutables cambia de 0 a 0x1c000000.  La
combinaci&oacute;n de estos cambios se requiere actualizar con una
versi&oacute;n preliminar (<i>snapshot</i>).  No hay soporte para
actualizaciones desde el c&oacute;digo fuente.  Esto s&oacute;lo afecta
a la plataformas i386.

<a name="3.3.4"></a>
<h3>
3.3.4: Eliminaci&oacute;n de la autenticaci&oacute;n de KerberosIV
(13/05/2003)
</h3>

<p>
Se ha eliminado la autenticaci&oacute;n basada en KerberosIV.  Por lo
tanto, es necesario eliminar todas las referencias a <tt>krb4</tt> en
<tt>/etc/login.conf</tt>.

<a name="3.3.5"></a>
<h3>
3.3.5: Cambio en <tt>config</tt> (23/05/2003)
</h3>

<p>
Para mover swapgeneric.c se ha sido necesario un cambio en
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a>.
Antes de compilar un nuevo n&uacute;cleo hay que compilar e instalar un
config(8) actualizado:

<pre>
  # cd /usr/src/usr.sbin/config
  # make clean
  # make obj
  # make
  # make install
</pre>

<p>
Ahora, ya se puede usar <tt>config</tt> para la configuraci&oacute;n del
n&uacute;cleo y ejecutar <tt>make depend</tt> en el directorio de
compilaci&oacute;n del n&uacute;cleo como se explica en la
<a href="#1.5">secci&oacute;n 1.5</a>. 

<a name="3.3.6"></a>
<h3>
3.3.6: Uso de __attribute__((bounded)) en ciertas funciones (26/06/2003)
</h3>

<p>
Ahora se usa __attribute__((bounded)) para detectar argumentos
incorrectos para funciones que toman las medidas de los <i>buffer</i>
como uno de sus par&aacute;metros.
<br><br>Es necesario recompilar gcc tal y como se indica en la
secci&oacute;n <a href="#1.8">1.8</a> de este documento antes de seguir
con <tt>make build</tt>.

<a name="3.3.7"></a>
<h3>
3.3.7: Nuevo usuario y grupo _syslogd (31/07/2003)
</h3>
<p>
Ahora el d&aelig;mon
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=syslogd&amp;sektion=8">syslogd(8)</a>
se ejecuta en modo de privilegio separado, y requiere un nuevo usuario y
grupo _syslogd.  Para a&ntilde;adir el grupo hay que ejecutar
<pre>
  # groupadd -g 73 _syslogd
</pre>
como usuario <i>root</i>, y para a&ntilde;adir la entrada de usuario hay
que usar
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8">vipw(8)</a>:
<pre>
  _syslogd:*:73:73::0:0:Syslog Daemon:/var/empty:/sbin/nologin
</pre>

<a name="3.3.8"></a>
<h3>
3.3.8: Uso del atributo de formato __kprintf__ en las cabeceras del
n&uacute;cleo del sistema (23/08/2003)
</h3>
<p>
Ahora se usa un nuevo atributo de formato __kprintf__ en los archivos de
la cabeceras el n&uacute;cleo para que gcc tenga conocimiento de las
extensiones de formato en el
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=printf&amp;sektion=9">printf(9)</a>
del n&uacute;cleo.
<br><br>Hay que recompilar gcc de acuerdo con las instrucciones de la
secci&oacute;n <a href="#1.8">1.8</a> de este documento antes de
proceder a ejecutar <tt>make build</tt>.  S&oacute;lo es necesario
recompilar gcc una vez desde el c&oacute;digo fuente de <i>-current</i>
para que tambi&eacute;n tenga soporte para el atributo __bounded__
descrito en la secci&oacute;n <a href="#3.3.5">3.3.5</a>.

<a name="3.2"></a>
<h2>
C&oacute;mo actualizar desde la versi&oacute;n 3.2
</h2>

<a name="3.2.1"></a>
<h3>
3.2.1: Nuevo Perl (05/11/2002)
</h3>

<p>
Perl ha sido actualizado con la versi&oacute;n 5.8.0.<br>
En Perl 5.8.0, el m&oacute;dulo API de XS ha cambiado debido a una
cambio de <code>stdio</code> a <code>PerlIO</code> (v&eacute;ase la
p&aacute;gina del manual de perldelta para m&aacute;s
informaci&oacute;n).  Esto quiere decir que cualquier m&oacute;dulo XS
(ficheros .so de perl) que haya instalado tendr&aacute; que ser
recompilado.  Si aparece un error como <em>Undefined symbol
&quot;perl_get_sv&quot;</em>, &eacute;ste es el problema.  Si los
&uacute;nicos m&oacute;dulos que se han instalado son los que vienen
como paquetes precompilados o como portes del sistema, se pueden buscar
lo m&oacute;dulos XS en el sistema ejecutarndo:

<pre>
  # grep '\.so' /var/db/pkg/p5-*/+CONTENTS | cut -d: -f1 | sort -u
</pre>

<p>
Y eliminar los m&oacute;dulos que producen el error con la orden
<em>pkg_delete -f</em> y recompilarlos o reinstalarlos desde el
&aacute;rbol de portes.

<a name="3.2.2"></a>
<h3>
3.2.2: Nuevos grupos _radius, _token y _shadow (21/11/2002)
</h3>

<p>
Se han a&ntilde;adido varios grupos nuevos:

<ul>
<li>El grupo <em>_radius</em> controla el acceso de s&oacute;lo lectura
al fichero <tt>/etc/raddb/servers</tt>.
<li>El grupo <em>_token</em> controla el acceso de s&oacute;lo lectura a
las bases de datos de token usadas por
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tokeninit&amp;sektion=8">tokeninit(8)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tokenadm&amp;sektion=8">tokenadm(8)</a>, y
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login_token&amp;sektion=8">login_token(8)</a>.
<li>El grupo <em>_shadow</em> controla el acceso de s&oacute;lo lectura
a la base de datos oculta de contrase&ntilde;as.
</ul>

<p>
Antes de ejecutar <kbd>make build</kbd> hay que a&ntilde;adir estos
grupos y ajustar los permisos en algunos ficheros.  Las siguientes
&oacute;rdenes, ejecutadas como superusuario <em>root</em>, se
encargar&aacute;n de todo esto:

<pre>
  # groupadd -g 63 _radius
  # chgrp _radius /etc/raddb /etc/raddb/servers
  # chmod g+x /etc/raddb
  # chmod g+r /etc/raddb/servers

  # groupadd -g 64 _token
  # chgrp _token /etc/activ.db /etc/crypto.db /etc/snk.db
  # chmod 0640 /etc/activ.db /etc/crypto.db /etc/snk.db

  # groupadd -g 65 _shadow
  # chgrp _shadow /etc/spwd.db
  # chmod 0640 /etc/spwd.db
</pre>

<p>
Los mensajes de error que puedan aparecer indicando que no se ha
encontrado alg&uacute;n fichero no son importantes, simplemente son
debidos a que no se ha configurado la autenticaci&oacute;n de
<em>token</em> o <em>radius</em>.

<a name="3.2.3"></a>
<h3>
3.2.3: Cambios importantes en el compilador (02/12/2002)
</h3>

<p>
Se ha integrado la extensi&oacute;n para la protecci&oacute;n de la pila
<a href="http://www.trl.ibm.com/projects/security/ssp">propolice</a> en
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc-local&amp;sektion=1">gcc</a>.
Esto requiere de un escenario algo distinto:

<ul>
<li><b>No</b> compile un nuevo n&uacute;cleo todav&iacute;a.
<li><b>No</b> recompile gcc todav&iacute;a.
<li>Si su sistema tiene bibliotecas compartidas, compile e instale un
nuevo cardagor din&aacute;mico ld.so.

<pre>
	# cd /usr/src
	# make obj

	Para las plataformas ELF (alpha, macppc, sparc, sparc64):
	# cd /usr/src/libexec/ld.so
	# make depend &amp;&amp; make &amp;&amp; make install

	Para las plataformas a.out (amiga, hp300, i386, mac68k, mvme68k):
	# cd /usr/src/gnu/usr.bin/ld/rtld
	# make depend &amp;&amp; make &amp;&amp; make install
</pre>

<li>Recompile e instale un nuevo libc, siguiendo las primeras
&oacute;rdenes de <i>make build</i>.

<pre>
  # cd /usr/src/include
  # make prereq &amp;&amp; make includes
  # cd /usr/src/lib/libc
  # make depend &amp;&amp; make NOMAN=1 &amp;&amp; make NOMAN=1 install
</pre>

N&oacute;tese que si el compilador es demasiado viejo, no podr&aacute;
compilar libc.  En ese caso ser&aacute; necesaria una
actualizaci&oacute;n binaria con una versi&oacute;n preliminar.

<li>Recompile e instale gcc, tal y como se indica en la
<a href="#1.8">secci&oacute;n 1.8</a>.

<li>Ahora ya puede recompilar un n&uacute;cleo.  Aseg&uacute;rese de
ejecutar otra vez
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config</a>
para regenerar el fichero Makefile del n&uacute;cleo.

<li>Reinicie con el nuevo n&uacute;cleo e invoque <i>make build</i> para
beneficiarse de la protecci&oacute;n de la pila de ejecuci&oacute;n.
</ul>

<a name="3.2.4"></a>
<h3>
3.2.4: Nuevo usuario y grupo _spamd (24/12/2002)
</h3>

<p>
Se ha a&ntilde;adido un nuevo usuario y un nuevo grupo _spamd para el
d&aelig;mon
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a>.
Hay que a&ntilde;adir la entrada correspondiente al nuevo grupo con la
orden <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=groupadd&amp;sektion=8">groupadd(8)</a>:

<pre>
  # groupadd -g 62 _spamd
</pre>

como superusuario <i>root</i>, y la correspondiente al usuario editando
el fichero de contrase&ntilde;as con
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8">vipw(8)</a>:

<pre>
  _spamd:*:62:62::0:0:Spam daemon:/var/empty:/sbin/nologin
</pre>

<a name="3.2.5"></a>
<h3>
3.2.5: Alias para ipv6-icmp (30/12/2002)
</h3>

<p>
Se ha a&ntilde;adido un nuevo alias para ipv6-icmp, <em>icmp6</em>, a
<tt>/etc/protocols</tt>.  Si se desea usar el alias <em>icmp6</em>
(usado en las pruebas de regresi&oacute;n de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a>),
hay que modificar antes la l&iacute;nea <em>ipv6-icmp</em> en
<tt>/etc/protocols</tt>, a&ntilde;adiendo la clave <em>icmp6</em> antes
del signo #.  La l&iacute;nea debe quedar como sigue:

<pre>
  ipv6-icmp 58    IPv6-ICMP icmp6 # ICMP for IPv6
</pre>

<a name="3.2.6"></a>
<h3>
3.2.6: Nuevo grupo _lkm (05/01/2003)
</h3>

<p>El grupo <em>_lkm</em> controla el acceso a <tt>/dev/lkm</tt>.
Ahora, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=modstat&amp;sektion=8">modstat(8)</a>
es setgid _lkm.

<p>
Se debe a&ntilde;adir este grupo y adaptar los permisos en
<tt>/dev/lkm</tt> antes de invocar un <tt>make build</tt>.  Para ello
hay que usar las siguientes &oacute;rdenes como superusuario
<i>root</i>:

<pre>
  # groupadd -g 61 _lkm
  # chgrp _lkm /dev/lkm
</pre>

<a name="3.2.7"></a>
<h3>
3.2.7: Nuevo libpthread (14/01/2003)
</h3>

<p>
<em>libc_r</em> y <em>libnpthread</em> han sido eliminados y sustituidos
por <em>libpthread</em>.  Los programas que dependan de esto
todav&iacute;a se deben compilar usando la opci&oacute;n
<em>-pthread</em>;  el compilador har&aacute; lo correcto.

<p>
Antes de eliminar <em>libc_r</em> y <em>libnpthread</em>, hay que
recompilar las aplicaciones que dependan de &eacute;stos, usando
<em>libpthread</em>.  La secuencia que se recomienda es:

<ol>
  <li>
  <p>compilar gcc de acuerdo con la secci&oacute;n
  <a href="#1.8">1.8</a>.
  <li>
  <p>recompilar el sistema de acuerdo con la secci&oacute;n
  <a href="#1.5">1.5</a>.
  <li>
  <p>recompilar todos los portes que usen pthreads.
  <li>
  <p>eliminar las bibliotecas que ya no se utilicen:
<pre>
  # rm /usr/lib/libc_r* /usr/lib/libnpthread*
</pre>
</ol>

<a name="3.2.8"></a>
<h3>
3.2.8: Cambios en el enlazador para arquitecturas ELF (17/01/2003)
</h3>

<p>
Binutils/ld han cambiado para introducir una nueva funcionalidad de
seguridad en los ejecutables ELF.  En lugar de permitir que el enlazador
marque la secci&oacute;n de datos de los ejecutables y las bibliotecas
compartidas como ejecutables, se ha cambiado la composici&oacute;n para
marcar s&oacute;lo las secciones apropiadas de la imagen del programa
como ejecutables.  Este cambio s&oacute;lo afecta a las arquitecturas
basadas en ELF:  alpha, sparc, sparc64, macppc.

<p>
Se recomienda recompilar binutils antes que el resto del sistema.

<p>
<pre>
  # cd /usr/src/gnu/usr.bin/binutils
  # make -f Makefile.bsd-wrapper cleandir
  # make -f Makefile.bsd-wrapper obj
  # make -f Makefile.bsd-wrapper depend
  # make -f Makefile.bsd-wrapper
  # make -f Makefile.bsd-wrapper install
</pre>

<p>
Y luego recompilar el sistema de acuerdo con la secci&oacute;n
<a href="#1.5">1.5</a>.


<a name="3.2.9"></a>
<h3>
3.2.9: Fusionados los cambios de /var/at y crontab (19/02/2003)
</h3>

<p>
Ahora que <em>at</em> se ha integrado en <em>cron</em>, el contenido de
<tt>/var/at</tt> se ha fusionado en <tt>/var/cron</tt>.  Adem&aacute;s,
ha cambiado el nombre de los ficheros <tt>allow</tt> y <tt>deny</tt> de
<em>cron</em> por <tt>cron.allow</tt> y <tt>cron.deny</tt> para el
cumplimiento de las normativas de POSIX y para su consistencia con los
ficheros <tt>at.allow</tt> y <tt>at.deny</tt>.

<p>
Primero hay que recomponer el sistema de acuerdo con la secci&oacute;n
<a href="#1.5">1.5</a>, y luego pasar todos los ficheros y reiniciar
cron como sigue:

<pre>
  # mv /var/at/* /var/cron
  # mv /var/cron/jobs /var/cron/atjobs
  # mv /var/cron/allow /var/cron/cron.allow
  # mv /var/cron/deny /var/cron/cron.deny
  # rm -rf /var/at 
  # kill `cat /var/run/cron.pid`
  # /usr/sbin/cron
</pre>

<p>
No hay que hacer caso de los avisos sobre ficheros <tt>allow</tt> o
<tt>deny</tt> que falten, ya que no todos son parte de la
instalaci&oacute;n predeterminada.

<p>
Si todav&iacute;a no se dispone de un fichero <tt>cron.deny</tt> (no se
inclu&iacute;a en la instalaci&oacute;n de versiones de OpenBSD
anteriores a la 3.3), es necesario tener uno para poder ejecutar
<em>crontab</em> con un usuario que no sea el superusuario.

<pre>
  # install -c -o root -g crontab -m 660 /dev/null /var/cron/cron.deny
</pre>

<a name="3.1"></a>
<h2>
C&oacute;mo actualizar desde la versi&oacute;n 3.1
</h2>

<a name="3.1.1"></a>
<h3>
3.1.1: Nuevos usuarios y grupos
</h3>

<p>
Para el soporte de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8">authpf(8)</a>
se requiere un nuevo grupo.  Adem&aacute;s, para el soporte de la nueva
funcionalidad de separaci&oacute;n de privilegios de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd&amp;sektion=8">sshd(8)</a>,
se ha a&ntilde;adido al sistema un nuevo usuario y grupo con el nombre
de <em>sshd</em>.  Se han a&ntilde;adido m&aacute;s usuarios nuevos para
servicios del sistema;  &eacute;stos llevan el prefijo &quot;_&quot;.
Para a&ntilde;adirlos use
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8">vipw(8)</a>:

<pre>
  sshd:*:27:27::0:0:sshd privsep:/var/empty:/sbin/nologin
  _portmap:*:28:28::0:0:portmap:/var/empty:/sbin/nologin
  _identd:*:29:29::0:0:identd:/var/empty:/sbin/nologin
  _rstatd:*:30:30::0:0:rpc.rstatd:/var/empty:/sbin/nologin
  _rusersd:*:32:32::0:0:rpc.rusersd:/var/empty:/sbin/nologin
  _fingerd:*:33:33::0:0:fingerd:/var/empty:/sbin/nologin
  _x11:*:35:35::0:0:X server:/var/empty:/sbin/nologin
</pre>

<p>
Y a&ntilde;ada lo siguiente al fichero <tt>/etc/group</tt>:

<pre>
  sshd:*:27:
  _portmap:*:28:
  _identd:*:29:
  _rstatd:*:30:
  _rusersd:*:32:
  _fingerd:*:33:
  _sshagnt:*:34:
  _x11:*:35:
  authpf:*:72:
</pre>

<a name="3.1.2"></a>
<h3>
3.1.2: Nuevo grupo para crontab(1) y at(1)
</h3>

<p>
La &oacute;rdenes
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=crontab&amp;sektion=1">crontab(1)</a> y
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=at&amp;sektion=1">at(1)</a>
ya no son <em>setuid root</em>, ahora son <em>setgid crontab</em>.

<p>
Antes de llevar a cabo la ejecuci&oacute;n de <kbd>make build</kbd> para
compilar el sistema, tiene que a&ntilde;adir el grupo <em>crontab</em>.
Añada una l&iacute;nea como la siguiente en el fichero
<tt>/etc/group</tt>:

<pre>
  crontab:*:66:
</pre>

<p>
La ejecuci&oacute;n de <kbd>make build</kbd> actualizar&aacute; algunos
permisos, pero no todos.  Despu&eacute;s de que acabe <kbd>make
build</kbd>, debe ejecutar lo siguiente a mano (se asume que el
int&eacute;rprete es <tt>/bin/csh</tt>):

<pre>
  # chgrp crontab /var/at/at.{allow,deny} /var/cron/{allow,deny}
  # chmod 0640 /var/at/at.{allow,deny} /var/cron/{allow,deny}
  # foreach f ( /var/cron/tabs/* )
	  set u=`basename $f`
          chown $u:crontab $f
    end
</pre>

<p>
N&oacute;tese que probablemente no estar&aacute;n todos los ficheros
<tt>allow/deny</tt>;  esto no es un problema.

<a name="3.1.3"></a>
<h3>
3.1.3: Nuevo <tt>binutils</tt>
</h3>

<p>
Un nuevo <tt>binutils</tt> (2.11.2) ha sido a&ntilde;adido al
&aacute;rbol de fuentes, y requiere una biblioteca <em>libiberty</em>
actualizada.  Para compilar esta biblioteca siga los siguientes pasos:

<pre>
  # cd /usr/src/gnu/egcs/libiberty
  # make -f Makefile.bsd-wrapper cleandir
  # make -f Makefile.bsd-wrapper obj
  # make -f Makefile.bsd-wrapper depend
  # make -f Makefile.bsd-wrapper
  # make -f Makefile.bsd-wrapper install
</pre>

<a name="3.1.4"></a>
<h3>
3.1.4: Nueva configuraci&oacute;n de S/Key
</h3>

<p>
La vieja base de datos de S/Key, <tt>/etc/skeykeys</tt>, ha sido
sustituida por un directorio, <tt>/etc/skey</tt>, en el que cada entrada
es un fichero individual propiedad del usuario al que describe.  Puede
convertir <tt>/etc/skeykeys</tt> al nuevo formato ejecutando (como
superusuario):

<pre>
  # skeyinit -C
  # mv /etc/skeykeys /etc/skeykeys.OLD
</pre>

<p>
N&oacute;tese que cualquier programa que utilice S/Key directamente
tendr&aacute; que ser recompilado.

<a name="3.1.5"></a>
<h3>
3.1.5: Nuevos permisos para lp*
</h3>

<p>
Ahora, los directorios de cola que usa lpd deben tener permiso de
escritura para el grupo daemon, para que lpr pueda poner ficheros en la
cola.  Adem&aacute;s, los propietarios de los ficheros de los
directorios de cola deben ser el usuario y grupo daemon.  Esto se puede
aplicar del modo siguiente:

<pre>
 # find /var/spool/output /var/spool/lpd -type d \
	-execdir chgrp daemon {} \; -execdir chmod g+rwx {} \;
 # find /var/spool/output /var/spool/lpd -type f \
	-execdir chown daemon:daemon {} \;
</pre>

<a name="3.1.6"></a>
<h3>
3.1.6: atrun(8) ya no es necesario
</h3>

<p>
La orden
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=atrun&amp;sektion=8">atrun(8)</a>
ya no es necesaria.  Esta funcionalidad ha sido incorporada en
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cron&amp;sektion=8">cron(8)</a>.
Hay que eliminar el gui&oacute;n <tt>/usr/libexec/atrun</tt> del
<em>crontab</em> del usuario <em>root</em>, ejecutando la siguiente
orden como superusuario:

<pre>
  # crontab -e
</pre>

<p>
Tambi&eacute;n pueden eliminarse <tt>/usr/libexec/atrun</tt>,
<tt>/usr/share/man/cat8/atrun.0</tt> y el directorio
<tt>/var/at/spool</tt>.

<a name="3.1.7"></a>
<h3>
3.1.7: nat.conf fusionado con pf.conf
</h3>

<p>
<tt>/etc/nat.conf</tt> se ha fusionado con <tt>/etc/pf.conf</tt>.  Hay
que introducir la reglas de NAT en el fichero <tt>pf.conf</tt>
despu&eacute;s de las reglas de limpieza y antes de las reglas de
filtrado.

<p>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a>
tiene una nueva opci&oacute;n para cargar los juegos de reglas,
<i>-f</i>, y las opciones <i>-R</i> y <i>-N</i> ahora tienen nuevos
significados.  Es necesario leer la p&aacute;gina del manual y
actualizar el fichero de configuraci&oacute;n <tt>/etc/rc</tt>.

<a name="3.1.8"></a>
<h3>
3.1.8: Nueva entrada en fbtab necesaria para xdm
</h3>

<p>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login&amp;sektion=1">login(1)</a> 
necesita cambiar el propietario de <tt>/dev/wsmouse</tt> al nuevo
usuario <i>_x11</i> que es utilizado por xdm para la revocaci&oacute;n
de privilegios en muchas arquitecturas.  El cambio necesario en
<tt>/etc/fbtab</tt> es dependiente de la arquitectura.  El fichero se
genera mediante el siguiente proceso (se asume que el c&oacute;digo
fuente se encuentraa en <tt>/usr/src</tt>):

<pre>
  # cat /usr/src/etc/fbtab.head &gt; /etc/fbtab
  # cat /usr/src/etc/etc.`uname -m`/fbtab &gt;&gt; /etc/fbtab
  # cat /usr/src/etc/fbtab.tail &gt;&gt; /etc/fbtab
</pre>

<p>
Si se han hecho cambios personalizados en <tt>/etc/fbtab</tt>, hay que
volverlos a incluir a mano en el nuevo fichero.

<a name="3.1.9"></a>
<h3>
3.1.9: Uso de __attribute__((sentinel)) en ciertas funciones
</h3>

<p>
Ahora, __attribute__((sentinel)) se utiliza para avisar cuando se usen
sin un puntero NULL de terminaci&oacute;n ciertas funciones de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=exec&amp;sektion=3">exec(3)</a>.
<br><br>Es necesario recomponer <i>gcc</i> de acuerdo con la
secci&oacute;n <a href="#1.8">1.8</a> de este documento antes de
proceder con <tt>make build</tt>.


<a name="3.0"></a>
<h2>
Actualizaci&oacute;n desde la versi&oacute;n 3.0
</h2>

<a name="3.0.1"></a>
<h3>
3.0.1: Soporte de nueva clave por mtree(8)
</h3>

<p>
Debe instalar una nueva versi&oacute;n de la utilidad
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mtree&amp;sektion=8">mtree(8)</a>
antes de que funcione <kbd>make build</kbd>.

<pre>
  # cd /usr/src/usr.sbin/mtree
  # make cleandir
  # make obj
  # make depend
  # make
  # make install
</pre>

<a name="3.0.2"></a>
<h3>
3.0.2: Eliminaci&oacute;n de <em>libdl</em> en plataformas ELF
</h3>

<p>
Las plataformas basadas en ELF (alpha, macppc y sparc64) ya no usan
<em>libdl</em>.  La actualizaci&oacute;n desde un sistema libdl a otro
no libdl se har&aacute; mejor siguiendo estos pasos:<br>

<ul>
<li>
<p>Recompile su sistema:
<pre>
   # cd /usr/src
   # make build
</pre>
</li>

<li>
<p>Si <kbd>make build</kbd> se complet&oacute; con &eacute;xito, puede
continuar y eliminar <em>libdl</em>.  N&oacute;tese que los paquetes que
se hayan enlazado contra <em>libdl</em> deber&iacute;an ser reinstalados
depu&eacute;s de eliminarlo.  Si no est&aacute; preparado para hacerlo,
puede saltarse este paso de momento.  Las versiones preliminares
(<em>snapshots</em>) traer&aacute;n paquetes correctos.
<pre>
# rm -f /usr/lib/libdl.* /usr/lib/libdl_pic.a
</pre>
</li>

<li>
<p>Una vez eliminado <em>libdl</em>, regenere el cach&eacute; de sus
bibliotecas compartidas:
<pre>
# ldconfig -R
</pre>
</li>
</ul>

<a name="3.0.3"></a>
<h3>
3.0.3: Nuevo marco de regresi&oacute;n
</h3>

<p>
Se ha introducido una nueva infraestructura para pruebas de
regresi&oacute;n, y se ha a&ntilde;adido <em>bsd.regress.mk</em>.
Tendr&aacute; que instalarlo antes de ejecutar <kbd>make obj</kbd>.

<pre>
  # cd /usr/src/share/mk
  # make install
</pre>

<a name="3.0.4"></a>
<h3>
3.0.4: ficheros de configuraci&oacute;n de ssh traspasados a
<em>/etc/ssh/</em>
</h3>

<p>
Primero debe crear el directorio <em>/etc/ssh/</em> (v&eacute;ase la
secci&oacute;n <a href="#1.13">1.13</a>).

<p>
A continuaci&oacute;n recompile el sistema:

<pre>
  # cd /usr/src
  # make build
</pre>

<p>
Pase los ficheros <em>/etc/ssh*_*</em> al nuevo directorio
<em>/etc/ssh/</em>:

<pre>
  # cd /etc
  # mv ssh*_* ssh/
</pre>

<p>
Tendr&aacute; que
<a href="http://www.openbsd.org/cgi-bin/cvsweb/src/etc/rc.diff?r1=1.188&amp;r2=1.189">cambiar sus guiones de ejecuci&oacute;n (<em>scripts</em>) de <tt>rc</tt></a>
para que reflejen tambi&eacute;n estos cambios.

<p>
Y actualizar cualquier l&iacute;nea con HostKey en el fichero
<em>sshd_config</em> para que reflejen la nueva ubicaci&oacute;n.  Por
ejemplo,

<pre>
  HostKey /etc/ssh_host_key
</pre>

<p>
debe cambiarse a

<pre>
  HostKey /etc/ssh/ssh_host_key
</pre>

<p>
Reinicie el d&aelig;mon <em>sshd</em>.

<a name="2.9"></a>
<h2>
Actualizaci&oacute;n desde 2.9
</h2>

<a name="2.9.1"></a>
<h3>
2.9.1: Nuevos usuarios/grupos - <em>proxy</em>, <em>smmsp</em> y
<em>popa3d</em>.
</h3>

<p>
Con la adici&oacute;n del nuevo paquete de filtros de IP
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a>
y su suite
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8">ftp-proxy(8)</a>,
se a&ntilde;adieron un nuevo usuario y grupo <em>proxy</em> al sistema.
Para el soporte de &eacute;ste debe a&ntilde;adir la siguiente entrada
de usuario usando
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8">vipw(8)</a>:

<pre>
proxy:*:71:71::0:0:Proxy Services:/nonexistent:/sbin/nologin
</pre>

<p>
Tambi&eacute;n a&ntilde;ada tambi&eacute;n el grupo <em>proxy</em> a
<em>/etc/group</em>:

<pre>
proxy:*:71:
</pre>

<p>
Adem&aacute;s, como parte de la actualizaci&oacute;n a Sendmail 8.12,
sendmail ya no tiene el <em>bit setuid root</em>.  Un nuevo usuario y
grupo, <em>smmsp</em>, han sido a&ntilde;adidos al sistema.
A&ntilde;ada una l&iacute;nea como la siguiente a <em>/etc/group</em>:

<pre>
smmsp:*:25:
</pre>

<p>
A continuaci&oacute;n ejecute
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8">vipw(8)</a>
y a&ntilde;ada la siguiente l&iacute;nea para el usuario <em>smmsp</em>:

<pre>
smmsp:*:25:25::0:0:Sendmail Message Submission Program:/nonexistent:/sbin/nologin
</pre>

<p>
Aseg&uacute;rese de que esta l&iacute;nea aparezca antes de cualquier
otra l&iacute;nea de la configuraci&oacute;n sobre
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=yp&amp;sektion=8">yp(8)</a>.

<p>
Para finalizar, tambi&eacute;n se a&ntilde;adieron un nuevo usuario y
grupo para el servidor popa3d de <em>Solar Designer</em>, que ahora
forma parte integral del sistema.  A&ntilde;adia la siguiente
l&iacute;nea a <em>/etc/group</em>:
 
<pre>
popa3d:*:26:
</pre> 
 
<p>
y usando
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8" >vipw(8)</a>,
a&ntilde;ada

<pre>
popa3d:*:26:26::0:0:POP3 server:/var/empty:/sbin/nologin
</pre>

<a name="2.9.2"></a>
<h3>
2.9.2: Nuevo paquete de filtros: <em>pf</em>
</h3>

<p>
El paquete de cortafuegos IPF que hab&iacute;a formado parte de las
versiones anteriores de OpenBSD ha sido reemplazado por una suite de
cortafuegos completamente nueva, llamada
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a>.
Como resultado, es necesario llevar a cabo unos cuantos cambios.

<p>
Primero, <em>pf</em> depende de un nuevo fichero de dispositivo.  Para
asegurarse de que se crea este dispositivo especial haga la siguiente:

<pre>
  # cd /dev
  # cp /usr/src/etc/etc.`machine`/MAKEDEV ./
  # ./MAKEDEV all
</pre>

<p>
Segundo, han acontecido algunos cambios en el sistema de archivos.  Los
siguientes binarios han sido reemplazados:

<pre>
ANTIGUOS (IPF):
/sbin/ipf /sbin/ipfstat /sbin/ipnat /usr/sbin/ipfs
/usr/sbin/ipftest /usr/sbin/ipmon /usr/sbin/ipresend
/usr/sbin/ipsend /usr/sbin/iptest
NUEVOS (PF):
/sbin/pfctl
/usr/libexec/ftp-proxy
</pre>

<p>
De igual modo, para los dispositivos (<em>/dev</em>):

<pre>
ANTIGUOS (IPF): /dev/ipl /dev/ipnat /dev/ipstate /dev/ipauth
NUEVOS (PF): /dev/pf
</pre>

<p>
Y finalmente los ficheros de configuraci&oacute;n del filtro:

<pre>
ANTIGUOS (IPF): /etc/ipf.rules /etc/ipnat.rules
NUEVOS (PF): /etc/pf.conf /etc/nat.conf
</pre>

<p>
Puede borrar los ficheros de configuraci&oacute;n antiguos de ipfilter:

<pre>
  # rm -rf /usr/share/ipf
</pre>

<p>
Se ha a&ntilde;adido un mecanismo para activar <em>pf</em> de forma
segura a los ficheros <em>/etc/rc</em> y <em>/etc/rc.conf</em>.  Es
necesario actualizar estos ficheros para que incluyan el nuevo mecanismo
de enganche.  Si desea activar <em>pf</em>, configure PF=YES en
<em>/etc/rc.conf</em>.


<a name="2.9.3"></a>
<h3>
2.9.3: Cambios en <em>make</em>
</h3>

<p>
Se han producido algunos cambios en
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=make&amp;sektion=1">make(1)</a>
y en sus ficheros de datos, que pueden originar dificultades en el
proceso de compilaci&oacute;n e instalaci&oacute;n.  Estos cambios
suelen manifestarse con errores de <em>bsd.own.mk</em> durante la
compilaci&oacute;n e instalaci&oacute;n.  Para evitarlo, actualice antes
los ficheros de datos: Antes que nada actualice los ficheros de datos:

<pre>
  # cd /usr/src/share/mk
  # make install
</pre>

<p>
y entonces compile e installe el nuevo <em>make</em>:

<pre>
  # cd /usr/src/usr.bin/make
  # make clean &amp;&amp; make obj &amp;&amp; make depend &amp;&amp; make
  # make install
</pre>

<p>
Ahora siga actualizando.


<a name="2.9.4"></a>
<h3>
2.9.4: La compilaci&oacute;n falla debido a errores de KerberosV
</h3>

<p>
Antes de intentar compilar todo el sistema, debe compilar KerberosV:

<p>
Primero, hay un nuevo directorio de configuraci&oacute;n de KerberosV en
<em>/etc</em>.  Si todav&iacute;a no lo ha hecho, use el procedimiento
de <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mtree&amp;sektion=8">mtree(8)</a>
descrito en <a href="#1.13">section 1.13</a> para crearlo.
 
<p>
Ahora, compile KerberosV:

<pre>
  # cd /usr/src/kerberosV
  # make obj
  # cd lib/roken
  # make 
  # cd ../../usr.bin/asn1_compile
  # make
  # make install
</pre>

<p>
Tambi&eacute;n puede ser necesario actualizar <em>/etc/login.conf</em>
para indicar que el nombre del fichero
<em>/usr/libexec/auth/login_krb-or-pwd</em> ahora es
<strong>login_krb</strong>4<strong>-or-pwd</strong>.

<a name="2.9.5"></a>
<h3>
2.9.5: Nueva versi&oacute;n de sendmail
</h3>

<p>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendmail&amp;sektion=8">sendmail(8)</a>
ha sido actualizado a la versi&oacute;n 8.12.  Como a partir de esta
versi&oacute;n, sendmail ya no ejecuta <em>setuid root</em>, existen
algunos cambios muy significativos.

<ol>
<li>Un usuario y grupo nuevos, <em>smmsp</em>, han sido a&ntilde;adidos.
Si todav&iacute;a no lo ha hecho, siga el procedimiento que se describe
en la <a href="#8.1">secci&oacute;n 8.1</a> para crearlos.</li>

<li>Han tendio lugar varios cambios en la jerarqu&iacute;a de archivos,
incluido un nuevo directorio <em>/var/spool/clienmqueue</em> y nuevos
permisos para <em>/var/spool/mqueue</em>.  Estos cambios se pueden
efectuar usando el procedimiento de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mtree&amp;sektion=8">mtree(8)</a>
que se describe en <a href="#1.13">la secci&oacute;n 1.13</a>.</li>

<li>
<p>A&ntilde;ada lo siguiente al fichero
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=crontab&amp;sektion=1">crontab(1)</a>
de root.  Esto es necesario dado que <em>sendmail</em> ya no ejecuta
<em>setuid root</em>, y necesitar&aacute; esta entrada para hacer parte
de su funci&oacute;n:
<pre>
# sendmail clientmqueue runner
*/30    *       *       *       *       /usr/sbin/sendmail -L sm-msp-queue -Ac -q
</pre>
</li>

<li>
<p>Actualice sendmail:
<pre>
  # cd /usr/src/gnu/usr.sbin/sendmail
  # make clean &amp;&amp; make obj &amp;&amp; make depend &amp;&amp; make &amp;&amp; make install
</pre>
<p>
<strong>Nota:</strong> los ficheros <em>submit.cf</em> y
<em>localhost.cf</em> se han instalado en su directorio
<em>/etc/mail</em>.  El primero de &eacute;stos, <em>submit.cf</em> (al
que la documentaci&oacute;n actual de sendmail llama el fichero de
configuraci&oacute;n del &laquo;cliente&raquo;), lo utilizan los agentes
de usuario de correo que quieren enviar correo de forma local para su
reparto por medio de sendmail.  Debido a los cambios en los permisos que
se han descrito anteriormente, para esto no es necesario disponer de
privilegios de superusuario:  el identificador de grupo del binario
ejecutable de sendmail se configura con <em>smmsp</em>.  El segundo
fichero, <em>localhost.cf</em>, es una particularidad de OpenBSD que
ejecuta sendmail s&oacute;lo para escuchar en la interfaz del
anfitri&oacute;n local para aceptar el correo que provenga del
anfitri&oacute;n sin aceptar conexiones provenientes de la red (si
utiliza, por ejemplo,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=smtpd&amp;sektion=8">smtpd(8)</a>
para escuchar por el puerto SMTP de su interfaz externa, es casi seguro
que le interesar&aacute; usar esta opci&oacute;n).  Puede conocer
m&aacute;s detalles al respecto leyendo en fichero <em>SECURITY</em> que
encontrar&aacute; en <em>/usr/src/gnu/usr.sbin/sendmail/sendmail</em>.

<p>
Es muy recomendable que regenere y actualice sus ficheros de
configuraci&oacute;n de sendmail en <em>/etc/mail</em>.  Puede encontrar
algunos ficheros de configuraci&oacute;n funcionales en
<em>/usr/share/sendmail/cf</em>.  N&oacute;tese que el fichero
<em>localhost.cf</em> se genera desde <em>openbsd-localhost.mc</em>.
</li>

<li>
<p>Si utiliza sendmail sin la opci&oacute;n <kbd>-bd</kbd> en
<em>/etc/rc.conf</em>, que es como se usa en la configuraci&oacute;n de
la instalaci&oacute;n predeterminada, tendr&aacute; que usar
<em>localhost.cf</em>.  Edite el fichero <em>rc.conf</em> para
a&ntilde;adir lo siguiente:
<pre>
# For normal use: &quot;-L sm-mta -bd -q30m&quot;
sendmail_flags=&quot;-L sm-mta -C/etc/mail/localhost.cf -bd -q30m&quot;
</pre>
</li>

<li>
<p>En cuanto est&eacute; preparado su fichero de configuraci&oacute;n,
use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kill&amp;sektion=1">kill(1)</a>
para acabar con el proceso existente de sendmail:
<pre>
  kill `sed 1q /var/run/sendmail.pid`
</pre>
<p>y reinicie el nuevo sendmail con las opciones apropiadas, como por
ejemplo:
<pre>
  /usr/sbin/sendmail -L sm-mta -bd -q30m
</pre>
<p>para una configuraci&oacute;n que acepte correo desde el exterior,
o:
<pre>
  /usr/sbin/sendmail -L sm-mta -C/etc/mail/localhost.cf -bd -q30m
</pre>
<p>para una configuraci&oacute;n que s&oacute;lo acepte correo
interno.
<p><strong>Nota:</strong> el indicador <kbd>-bd</kbd> es ahora necesario
en ambos casos.
</li>
</ol>

<p>
El nuevo <em>sendmail</em> deber&iacute;a funcionar a partir de este
momento.

<a name="2.9.6"></a>
<h3>
2.9.6: Cambio en <em>/etc/primes</em>.
</h3>

<p>
El nombre del fichero <em>/etc/primes</em> es ahora
<em>/etc/moduli</em>.  S&oacute;lo tiene que copiarlo desde su antigua
ubicaci&oacute;n o desde <em>/usr/src/etc/</em>.


<hr width="30%">

<address>
<p>
<!--
Originally [OpenBSD: upgrade-minifaq.html,v 1.182 ]<br>
$Translation: upgrade-minifaq.html,v 1.87 2009/06/29 18:34:05 ajacoutot Exp $<br>
-->
$OpenBSD: upgrade-minifaq.html,v 1.81 2009/06/29 17:19:48 ajacoutot Exp $<br>
Copyright &copy; 1998-2003, Kjell Wooding.<br>
Env&iacute;e cualquier comentario, pregunta o sugerencia
(s&oacute;lo en ingl&eacute;s, por favor) a
<a href="mailto:kjell@@openbsd.org">kjell@@openbsd.org</a>
</address>
</body>
</html>
@


1.81
log
@Sync with Steelix CVS
@
text
@d22 1
a22 1
$OpenBSD: upgrade-minifaq.html,v 1.89 2002/02/02 05:17:18 chris Exp $
d2142 1
a2142 1
$OpenBSD$<br>
@


1.80
log
@Sync with Steelix CVS
@
text
@d2138 1
d2140 2
a2141 1
$Translation: upgrade-minifaq.html,v 1.86 2003/12/30 12:04:40 horacio Exp $<br>
@


1.79
log
@Sync with Steelix CVS
@
text
@d134 1
d984 15
d2138 2
a2139 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.181 ]<br>
$Translation: upgrade-minifaq.html,v 1.85 2003/12/09 15:04:37 horacio Exp $<br>
@


1.78
log
@Sync with Steelix CVS
@
text
@d133 1
d949 34
d2122 2
a2123 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.180 ]<br>
$Translation: upgrade-minifaq.html,v 1.84 2003/11/17 18:49:02 horacio Exp $<br>
@


1.77
log
@Sync with Steelix CVS
@
text
@d141 4
a144 2
<a href="#3.3.4">3.3.4: Cambio en <tt>config</tt></a><br>
<a href="#3.3.5">3.3.5: Uso de __attribute__((bounded)) en ciertas
d146 2
a147 2
<a href="#3.3.6">3.3.6: Nuevo usuario y grupo _syslogd</a><br>
<a href="#3.3.7">3.3.7: Nuevo atributo de formato __kprintf__ en las
d1010 12
a1021 1
3.3.4: Cambio en <tt>config</tt> (23/05/2003)
d1044 1
a1044 1
<a name="3.3.5"></a>
d1046 1
a1046 1
3.3.5: Uso de __attribute__((bounded)) en ciertas funciones (26/06/2003)
d1057 1
a1057 1
<a name="3.3.6"></a>
d1059 1
a1059 1
3.3.6: Nuevo usuario y grupo _syslogd (31/07/2003)
d1076 1
a1076 1
<a name="3.3.7"></a>
d1078 1
a1078 1
3.3.7: Uso del atributo de formato __kprintf__ en las cabeceras del
d2087 2
a2088 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.179 ]<br>
$Translation: upgrade-minifaq.html,v 1.83 2003/11/09 21:40:07 horacio Exp $<br>
@


1.76
log
@Sync with Steelix CVS
@
text
@d15 1
a15 1
<h2>&Uacute;ltima versi&oacute;n de OpenBSD: 3.3</h2>
d443 1
a443 1
# cd /usr/src/etc &amp;&amp; DESTDIR=/ make distrib-dirs
d923 1
a923 1
</p>
d2074 2
a2075 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.177 ]<br>
$Translation: upgrade-minifaq.html,v 1.82 2003/10/26 21:46:49 horacio Exp $<br>
@


1.75
log
@Sync with Steelix CVS
@
text
@d131 2
a132 1
dispositivo svnd</a>
d443 1
a443 1
# cd /usr/src/etc &amp;&amp; make DESTDIR=/ distrib-dirs
d926 20
d2074 2
a2075 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.175 ]<br>
$Translation: upgrade-minifaq.html,v 1.81 2003/10/12 17:31:47 horacio Exp $<br>
@


1.74
log
@sync with steelix translation CVS
@
text
@d127 6
d889 36
d2053 2
a2054 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.174 2003/08/26 04:20:57 avsm Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.80 2003/08/26 22:16:58 horacio Exp $<br>
@


1.73
log
@sync with steelix translation CVS
@
text
@d138 2
d1000 17
d2011 2
a2012 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.173 2003/08/03 04:49:28 avsm Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.79 2003/08/05 13:21:53 horacio Exp $<br>
@


1.72
log
@sync with steelix translation CVS
@
text
@d137 1
d979 19
d1992 2
a1993 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.172 2003/07/14 20:15:56 nick Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.78 2003/07/19 18:23:01 horacio Exp $<br>
@


1.71
log
@sync with steelix translation CVS
@
text
@d759 2
a760 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;apropos=0&amp;sektion=8&amp;manpath=OpenBSD+Current&amp;arch=i386&amp;format=html">sudo(8)</a>
que hacen que este proceso sea relativamente sencillo.
d1972 2
a1973 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.171 2003/06/27 14:21:50 nick Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.77 2003/06/28 23:11:32 horacio Exp $<br>
@


1.70
log
@sync with steelix translation CVS
@
text
@d135 2
d965 13
d1972 2
a1973 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.169 2003/06/22 18:54:12 david Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.76 2003/06/22 21:28:33 horacio Exp $<br>
@


1.69
log
@
sync with steelix translation CVS
@
text
@d1957 2
a1958 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.168 2003/06/03 21:44:58 david Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.75 2003/06/04 06:45:14 horacio Exp $<br>
a1964 1

@


1.68
log
@
sync with steelix translation CVS
@
text
@d22 1
a22 2
$OpenBSD: upgrade-minifaq.html,v 1.89 2002/02/02 05:17:18 chris Exp $</p>
</p>
a37 1
</p>
a47 1
</p>
a125 1
</p>
a134 1
</p>
a149 1
</p>
a164 1
</p>
a184 1
</p>
a213 1
</p>
a221 1
</p>
a241 1
</p>
a247 1
</p>
a262 1
</p>
a280 1
</p>
a291 1
</p>
a300 1
</p>
a319 1
</p>
a332 1
</p>
a342 1
</p>
a347 1
</p>
a358 1
</p>
a374 1
</p>
d378 1
a378 1
<p>Limpiar los ficheros objeto (<em>/usr/obj/</em>) antiguos.</p>
d381 1
a381 1
hay que limpiarlo y reconstruir los enlaces simb&oacute;licos:</p>
a393 1
</p>
a404 1
</p>
d421 1
a421 1
para la versi&oacute;n concreta que se encuentra en este documento.</p>
d428 1
a428 1
La forma m&aacute;s f&aacute;cil de hacerlo es:</p>
d437 1
a437 1
(<em>kernel</em>):</p>
d453 1
a453 1
modific&aacute;ndolo.  Para ello hay que hacer lo siguiente:</p>
d463 1
a463 1
<p>Finalmente, para todos:</p>
d475 1
a475 1
<p>A continuaci&oacute;n se compilar&aacute; el sistema:</p>
d488 1
a488 1
<em>/home/newroot</em>:</p>
d498 1
a498 1
ficheros seg&uacute;n sea necesario.</p>
d507 1
a507 1
nuevos ficheros en <em>/etc</em> sean los correctos.</p>
a519 1
</p>
a528 1
</p>
a547 1
</p>
a554 1
</p>
a566 1
</p>
a571 1
</p>
a601 1
</p>
a615 1
</p>
a618 1
</p>
a635 1
</p>
a639 1
</p>
a659 1
</p>
a662 1
</p>
a673 1
</p>
a677 1
</p>
a687 1
</p>
a697 1
</p>
a701 1
</p>
a730 1
</p>
a745 1
</p>
a758 1
</p>
a762 1
</p>
a781 1
</p>
a801 1
</p>
a805 1
</p>
a815 1
</p>
a828 1
</p>
a833 1
</p>
a846 1
</p>
a854 1
</p>
a866 1
</p>
a871 1
</p>
a875 1
</p>
a895 1
</p>
a902 1
</p>
a923 1
</p>
a936 1
</p>
a947 1
</p>
a961 1
</p>
a985 1
</p>
a994 1
</p>
a1041 1
</p>
a1097 1
</p>
a1117 1
</p>
a1135 1
</p>
a1288 1
</p>
a1301 1
</p>
a1324 1
</p>
a1330 1
</p>
a1340 1
</p>
a1353 1
</p>
a1363 1
</p>
a1384 1
</p>
a1393 1
</p>
a1405 1
</p>
a1426 1
</p>
a1435 1
</p>
a1446 1
</p>
a1453 1
</p>
a1467 1
</p>
a1477 1
</p>
a1490 1
</p>
a1506 1
</p>
a1525 1
</p>
d1529 1
a1529 1
<p>Recompile su sistema:</p>
d1542 1
a1542 1
(<em>snapshots</em>) traer&aacute;n paquetes correctos.</p>
d1550 1
a1550 1
bibliotecas compartidas:</p>
a1565 1
</p>
a1580 1
</p>
a1583 1
</p>
a1592 1
</p>
a1602 1
</p>
a1607 1
</p>
a1614 1
</p>
a1621 1
</p>
a1642 1
</p>
a1650 1
</p>
a1660 1
</p>
a1669 1
</p>
a1678 1
</p>
a1684 1
</p>
a1693 1
</p>
a1709 1
</p>
a1713 1
</p>
a1723 1
</p>
d1736 1
a1736 2
De igual modo, para los dispositivos (</em>/dev</em>):
</p>
a1744 1
</p>
a1752 1
</p>
a1763 1
</p>
a1778 1
</p>
a1786 1
</p>
a1795 1
</p>
a1804 1
</p>
a1810 1
</p>
a1813 1
</p>
a1829 1
</p>
a1840 1
</p>
d1859 1
a1859 1
de su funci&oacute;n:</p>
d1867 1
a1867 1
<p>Actualice sendmail:</p>
d1893 1
a1893 1
</p>
a1899 1
</p>
d1907 1
a1907 1
a&ntilde;adir lo siguiente:</p>
d1917 1
a1917 1
para acabar con el proceso existente de sendmail:</p>
d1922 1
a1922 1
ejemplo:</p>
d1927 1
a1927 1
o:</p>
d1932 1
a1932 1
interno.</p>
d1934 1
a1934 1
en ambos casos.</p>
a1940 1
</p>
a1950 1
</p>
d1957 2
a1958 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.167 2003/05/25 01:42:45 tedu Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.74 2003/05/25 06:41:09 horacio Exp $<br>
a1963 1
</p>
@


1.67
log
@
sync with steelix translation CVS
@
text
@d138 1
d999 27
d2078 2
a2079 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.166 2003/05/06 21:08:25 pvalchev Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.73 2003/05/07 20:35:20 horacio Exp $<br>
@


1.66
log
@
sync with steelix translation CVS
@
text
@a961 14
<a name="3.3.3"></a>
<h3>
3.3.3: i386 <i>flag day</i>, cambio en exe addr/MAXDSIZ (05/05/2003)
</h3>

<p>
Para que se pueda cambiar MAXDSIZ de vuelta a 1G, la direcci&oacute;n de
base de todos los ejecutables cambia de 0 a 0x1c000000.  La
combinaci&oacute;n de estos cambios se requiere actualizar con una
versi&oacute;n preliminar (<i>snapshot</i>).  No hay soporte para
actualizaciones desde el c&oacute;digo fuente.  Esto s&oacute;lo afecta
a la plataformas i386.
</p>

d984 15
d2050 2
a2051 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.165 2003/05/05 19:28:33 miod Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.72 2003/05/05 21:27:02 horacio Exp $<br>
@


1.65
log
@
sync with steelix transaltion CVS
@
text
@d136 2
d962 14
d2049 2
a2050 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.163 2003/04/28 22:10:22 henning Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.71 2003/04/29 19:32:39 horacio Exp $<br>
@


1.64
log
@
sync with steelix translation CVS
@
text
@d135 1
d960 21
d2033 2
a2034 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.161 2003/04/17 13:28:14 drahn Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.70 2003/04/20 00:45:38 horacio Exp $<br>
@


1.63
log
@
sync with steelix translation CVS
@
text
@d15 1
a15 1
<h2>&Uacute;ltima versi&oacute;n de OpenBSD: 3.2</h2>
d131 6
d931 29
d2011 2
a2012 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.159 2003/04/14 21:54:43 wilfried Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.69 2003/04/15 20:29:15 horacio Exp $<br>
@


1.62
log
@
sync with steelix translation CVS
@
text
@d483 1
a483 1
# chown root.wheel /bsd (if you compiled as someone else)
d1319 1
a1319 1
 	  chown $u.crontab $f
d1976 2
a1977 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.158 2003/03/25 16:45:22 henning Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.68 2003/03/25 21:11:25 horacio Exp $<br>
@


1.61
log
@
sync with steelix translation CVS
@
text
@d893 2
a894 2
desarrollo, <em>-current</em>, es con una imagen de disquete de arranque
y prepararlo como se describe en el <a href="faq4.html">cap&iacute;tulo
d901 11
a911 2
Tambi&eacute;n se puede bajar la distribuci&oacute;n en paquetes
<tt>.tgz</tt> y los archivos del n&uacute;cleo, y desempaquetarlo todo:
d913 4
a916 9
<pre>
  # tar pzxf base33.tgz -C /
  # tar pzxf comp33.tgz -C /
  # tar pzxf game33.tgz -C /
  # tar pzxf  man33.tgz -C /
  # tar pzxf misc33.tgz -C /
  # mv /bsd /bsd.old
  # mv bsd /
</pre>
d920 2
a921 2
En cualquier caso siempre es necesario actualizar <a href="#1.9">/etc,
/var, y /dev</a> a mano.
d1976 2
a1977 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.156 2003/02/26 02:54:48 nick Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.66 2003/03/01 11:24:50 horacio Exp $<br>
@


1.60
log
@
sync with steelix translation CVS
@
text
@d905 5
a909 5
  # tar pzxf base32.tgz -C /
  # tar pzxf comp32.tgz -C /
  # tar pzxf game32.tgz -C /
  # tar pzxf  man32.tgz -C /
  # tar pzxf misc32.tgz -C /
d1972 2
a1973 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.154 2003/02/20 19:01:25 millert Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.65 2003/02/21 19:09:20 horacio Exp $<br>
@


1.59
log
@
sync with steelix translation CVS
@
text
@d143 2
d1188 43
d1972 2
a1973 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.152 2003/02/10 17:59:21 kjell Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.64 2003/02/11 09:33:47 horacio Exp $<br>
@


1.58
log
@
sync with steelix translation CVS
@
text
@d551 3
a553 2
  (cd /usr/src/gnu/usr.bin/perl &amp;&amp;  make -f Makefile.bsd-wrapper config.sh &amp;&amp;  mak
  e -f Makefile.bsd-wrapper depend &amp;&amp;  make -f Makefile.bsd-wrapper perl.lib &amp;&amp;
d1927 2
a1928 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.151 2003/01/23 01:01:19 henning Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.63 2003/01/24 17:59:51 horacio Exp $<br>
@


1.57
log
@
sync with steelix translation CVS
@
text
@d1155 1
a1155 1
3.2.8: Cambios en el enlazador para arquitecturas ELF
d1926 2
a1927 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.150 2003/01/20 21:25:36 margarida Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.62 2003/01/21 15:57:19 horacio Exp $<br>
@


1.56
log
@
sync with steelix translation CVS
@
text
@d1149 1
a1149 1
  # rm /usr/lib/libc_r.* /usr/lib/libnpthread.*
d1926 2
a1927 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.149 2003/01/19 18:11:32 hening Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.61 2003/01/20 21:36:25 horacio Exp $<br>
@


1.55
log
@
new groups
@
text
@d140 3
d1121 64
d1926 2
a1927 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.145 2003/01/07 14:22:12 henning Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.60 2003/01/08 10:45:57 horacio Exp $<br>
@


1.54
log
@
sync with steelix translation CVS
@
text
@d135 1
a135 1
<a href="#3.2.2">3.2.2: Nuevos grupos</a><br>
d137 1
a137 1
<a href="#3.2.4">3.2.4: Nuevo usuario</a><br>
d139 1
d951 1
a951 1
3.2.2: Nuevos grupos (21/11/2002)
d1015 3
a1019 1
	# make obj
a1023 1
	# make obj
d1056 1
a1056 1
3.2.4: Nuevo usuario (24/12/2002)
d1060 2
a1061 1
Se ha a&ntilde;adido un nuevo usuario para el d&aelig;mon
d1063 10
a1072 3
Hay que a&ntilde;adir la entrada correspondiente al nuevo usuario con
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8">
vipw(8)</a>:
d1098 20
d1859 2
a1860 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.141 2003/01/06 00:16:32 mcbride Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.59 2003/01/06 18:33:13 horacio Exp $<br>
@


1.53
log
@
sync with steelix translation CVS
@
text
@d138 1
d1069 19
d1829 2
a1830 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.139 2002/12/29 00:59:06 kjell Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.58 2002/12/29 22:23:41 horacio Exp $<br>
d1832 1
a1832 1
Copyright &copy; 1998-2002, Kjell Wooding.<br>
@


1.52
log
@
sync with badlands translation CVS
@
text
@d137 1
d1051 16
d1809 2
a1810 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.137 2002/12/15 15:19:55 nick Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.57 2002/12/15 16:43:55 horacio Exp $<br>
@


1.51
log
@
sync with badlands translation CVS
@
text
@d919 1
a919 1
3.2.1: Nuevo Perl
d948 1
a948 1
3.2.2: Nuevos grupos
d996 1
a996 1
3.2.3: Cambios importantes en el compilador
d1792 2
a1793 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.136 2002/12/03 07:14:11 mpech Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.56 2002/12/03 08:47:59 horacio Exp $<br>
@


1.50
log
@
sync
@
text
@d36 1
a36 1
<em>Mini-FAQ</em> por diversos motivos.  La informaci&oacute;n que trata
d45 2
a46 2
no se conf&iacute;a completamente</strong> en el manejo del compilador y
las herramientas, no recomendamos la actualizaci&oacute;n mediante el
d125 4
d136 1
d237 1
a237 1
Las &laquo;versiones finales&raquo; (<em>-release</em>) de OpenBSD se
d245 8
a252 8
la &laquo;versi&oacute;nd de desarrollo&raquo;, se refiere a la
versi&oacute;n de &uacute;ltima hora del &aacute;rbol de fuentes
contenida en el repositorio de CVS.  &Eacute;ste es el &aacute;rbol que
usan con m&aacute;s asiduidad los desarrolladores de OpenBSD.  El
&aacute;rbol de <em>-current</em> contiene todo el c&oacute;digo que
est&aacute; planeado para el lanzamiento de la siguiente versi&oacute;n
final.  De vez en cuando, algunos valientes abandonan las versiones
oficiales y utilizan la versi&oacute;n de desarrollo, <em>-current</em>,
d260 16
a275 11
Entre una versi&oacute;n final y otra, se ponen a disposici&oacute;n
unas revisiones llamadas 
<em><a href="ftp://ftp.openbsd.org/pub/OpenBSD/snapshots/">snapshots</a></em>.
&Eacute;stas son las &laquo;versiones preliminares&raquo; del
&aacute;rbol de fuentes de <em>-current</em>.  Debido a que son un
reflejo del estado actual de desarrollo, no se puede garantizar que los
<em>snapshots</em> funcionen correctamente... ni siquiera que funcionen.
Las versiones preliminares, <em>snapshots</em>, son bastante
&uacute;tiles cuando se est&aacute; actualizando desde una
versi&oacute;n final (o una versi&oacute;n de desarrollo m&aacute;s
antigua) a la del &aacute;rbol actual.
d280 6
a285 5
<a href="../../es/stable.html">ramificaci&oacute;n de parches</a>
(llamada <em>-stable</em>).  Esta ramificaci&oacute;n contiene la
versi&oacute;n final (<em>-release</em>) base y cualquier otro parche o
modificaci&oacute;n importante (se consideran importantes los parches
publicados en la p&aacute;gina de erratas, adem&aacute;s de otros que
d310 3
a312 3
dif&iacute;cil de actualizar a <em>-current</em> es actualizar primero a
la revisi&oacute;n preliminar (<em>snapshot</em>) m&aacute;s reciente
(por lo general, mediante una instalaci&oacute;n por FTP).  Una vez el
d707 1
a707 1
ejemplo, para ver los cambios acontecidos entre 2.8 y 2.9, haga:
d712 1
a712 1
  # cvs diff -u -rOPENBSD_2_8 -rOPENBSD_2_9
d868 43
d994 56
d1792 2
a1793 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.127 2002/11/21 22:42:03 millert Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.54 2002/11/22 20:01:17 horacio Exp $<br>
@


1.49
log
@
sync with badlands translation CVS
@
text
@d131 1
d892 48
d1682 2
a1683 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.123 2002/11/05 18:25:37 millert Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.53 2002/11/09 23:09:12 horacio Exp $<br>
@


1.48
log
@
sync with badlands translation CVS
@
text
@d15 1
a15 1
<h2>&Uacute;ltima versi&oacute;n de OpenBSD: 3.1</h2>
d30 9
a38 9
Con esta mini-gu&iacute;a se pretende aclarar los problemas m&aacute;s
comunes que aparecen cuando se lleva a cabo una actualizaci&oacute;n
entre versiones finales de OpenBSD (<em>-release</em>), o desde una
versi&oacute;n final a una versi&oacute;n en desarrollo
(<em>-current</em>).  Aunque ya no sea un &laquo;mini-documento&raquo;,
todav&iacute;a mantiene el nombre de <em>Mini-FAQ</em> por diversos
motivos.  La informaci&oacute;n que trata sobre versiones m&aacute;s
antiguas a las que aqu&iacute; aparecen se puede encontrar en
<a href="upgrade-old.html">un documento separado</a>.
d127 6
a321 1
<p>
d346 9
d857 35
d1633 2
a1634 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.121 2002/10/14 09:39:51 henning Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.52 2002/10/17 06:07:24 horacio Exp $<br>
@


1.47
log
@
sync with badlands translation CVS
@
text
@d1584 2
a1585 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.120 2002/10/13 21:07:15 henning Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.51 2002/10/14 09:27:48 horacio Exp $<br>
@


1.46
log
@
sync with badlands translation CVS
@
text
@d30 1
a30 1
Con esta mini-gu&iacute;a se intenta aclarar los problemas m&aacute;s
d44 6
a49 6
Avanzados</strong>.  Si es un principiante <strong>o todav&iacute;a no
tiene total confianza</strong> con el manejo del compilador y las
herramientas, no le recomendamos la actualizaci&oacute;n mediante el
c&oacute;digo fuente.  Es mejor que intente instalar una versi&oacute;n
binaria final o preliminar, y que despu&eacute;s aplique las
instrucciones que se dan para la actualizaci&oacute;n de <tt>/etc</tt>.
d136 5
d309 4
a312 4
Los <em>snapshot</em> se pueden retirar seg&uacute;n se vayan anticuando
(o seg&uacute;n dejen de ser relevantes).  Si no hay ning&uacute;n
<em>snapshot</em> disponible, entonces debe actualizar a la
versi&oacute;n m&aacute;s reciente y compilar lo restante desde el
d330 1
a330 1
la shell ksh;  para otras, sustituya <em>export</em> por
d356 1
a356 1
<p>Limpie los ficheros objeto (<em>/usr/obj/</em>) antiguos.</p>
d358 2
a359 2
<p>Si hab&iacute;a creado un directorio <em>/usr/obj</em> separado,
l&iacute;mpielo y reconstruya los enlaces simb&oacute;licos:</p>
d368 4
a371 4
Si se encuentra con que tiene que realizar este paso muchas veces, puede
encontrar mucho m&aacute;s r&aacute;pido poner <em>/usr/obj</em> en su
propia partici&oacute;n y usar <kbd>newfs</kbd> en lugar de
<kbd>rm</kbd>.  Por ejemplo, lo que yo hago es:
d382 2
a383 2
Si est&aacute; preocupado porque pueda haber ficheros objeto en su
&aacute;rbol de fuentes, haga lo siguiente:
d396 1
a396 1
<p>Lleve a cabo cualquier cambio de configuraci&oacute;n
d400 2
a401 2
posterior.  Lea la secci&oacute;n espec&iacute;fica para su
versi&oacute;n en este documento.</p>
d405 4
a408 4
<p>Aseg&uacute;rese de que todos los directorios apropiados hayan sido
creados.  Esto es muy importante cuando se actualiza desde versiones
m&aacute;s antiguas, pero a veces necesario en otros casos.  La forma
m&aacute;s f&aacute;cil de hacerlo es:</p>
d416 2
a417 1
<p>Compile un nuevo n&uacute;cleo (<em>kernel</em>):</p>
d433 1
a433 1
modific&aacute;ndolo.  Para ello haga lo siguiente:</p>
d455 1
a455 1
<p>Compile el sistema:</p>
d464 5
a468 4
<p>Actualice <em>/etc</em> y <em>/dev</em> a mano.  &Eacute;stos no se
actualizan de forma autom&aacute;tica.  Escoja un directorio con espacio
suficiente para <em>/</em>, <em>/dev</em>, <em>/var</em>, y
<em>/etc</em>.  En este ejemplo usar&eacute; <em>/home/newroot</em>:</p>
d476 3
a478 3
<p>Ahora compare los ficheros en <em>/home/newroot</em> con sus
correspondientes ya instalados.  Reemplace o actualice los ficheros
seg&uacute;n sea necesario.</p>
d486 2
a487 2
<p>Reinicie para asegurarse de que los nuevos ficheros en <em>/etc</em>
sean los correctos.</p>
d1024 61
d1584 2
a1585 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.117 2002/09/15 16:16:59 nick Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.50 2002/09/22 09:38:35 horacio Exp $<br>
@


1.45
log
@
sync with badlands translation CVS
@
text
@d11 1
a11 1

d325 1
a325 1
la shell ksh;  para otras, substituya <em>export</em> por
d866 1
d881 1
d1164 2
a1165 2
2.9.1: Nuevos usuarios/grupos - <em>proxy</em>, <em>smmsp</em>
y <em>popa3d</em>.
d1516 2
a1517 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.115 2002/08/17 10:37:41 henning Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.49 2002/08/24 21:26:11 horacio Exp $<br>
@


1.44
log
@
sync with badlands translation CVS
@
text
@d130 1
a130 2
<a href="#3.1.1">3.1.1: Nuevos usuarios/grupos: <em>sshd</em> y
<em>authpf</em></a><br>
d843 1
a843 1
3.1.1: Nuevos usuarios y grupos <em>sshd</em> y <em>authpf</em>
d853 3
a855 2
de <em>sshd</em>.  Debe a&ntilde;adir la siguiente entrada de usuario en
el fichero de contrase&ntilde;as utilizando
d861 5
d874 6
d1514 2
a1515 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.114 2002/07/21 08:37:56 horacio Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.48 2002/07/24 15:03:51 horacio Exp $<br>
@


1.43
log
@
sync with badlands translation CVS
@
text
@d136 1
a136 1
<a href="#3.1.5">3.1.6: atrun(8) ya no es necesario</a><br>
d1503 2
a1504 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.113 2002/07/15 19:47:22 millert Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.47 2002/07/23 18:05:20 horacio Exp $<br>
@


1.42
log
@
sync with badlands translation CVS
@
text
@d132 3
d136 1
d979 25
d1503 2
a1504 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.112 2002/06/21 13:00:12 mpech Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.46 2002/06/22 00:40:55 horacio Exp $<br>
@


1.41
log
@
sync iwth badlands translation CVS
@
text
@d30 7
a36 8
Con esta mini-gu&iacute;a se intenta aclarar los problemas
m&aacute;s comunes que aparecen cuando se lleva a cabo una
actualizaci&oacute;n entre versiones finales de OpenBSD
(<em>-release</em>), o desde una versi&oacute;n final a una
versi&oacute;n en desarrollo (<em>-current</em>).  Aunque ya
no sea un &laquo;mini-documento&raquo;, todav&iacute;a
mantiene el nombre de <em>Mini-FAQ</em> por diversos motivos.
La informaci&oacute;n que trata sobre versiones m&aacute;s
d43 7
a49 8
Esta gu&iacute;a de actualizaci&oacute;n es para
<strong>Usuarios Avanzados</strong>.  Si es un principiante o
todav&iacute;a no tiene total confianza con el manejo del
compilador y las herramientas, no le recomendamos la
actualizaci&oacute;n mediante el c&oacute;digo fuente.
Es mejor que intente instalar una versi&oacute;n binaria final
o preliminar, y que despu&eacute;s aplique las instrucciones
que se dan para la actualizaci&oacute;n de <tt>/etc</tt>.
d57 3
a59 3
1.1: Terminolog&iacute;a.  &iquest;Qu&eacute; es
<em>-current</em>?  &iquest;Qu&eacute; son los
<em>snapshots</em>?  &iquest;Qu&eacute; es <em>-stable</em>?
d63 2
a64 2
1.2: &iquest;Cu&aacute;l es la forma m&aacute;s sencilla de
actualizar a <em>-current</em>?
d68 2
a69 2
1.3: No puedo encontrar ning&uacute;n <em>snapshot</em> en el
servidor de FTP.  &iquest;D&oacute;nde est&aacute;n?
d78 2
a79 2
1.5: Ya tengo el &aacute;rbol de fuentes, &iquest;c&oacute;mo
lo compilo?
d83 2
a84 2
1.6: 'make build' par&oacute; en la mitad del proceso,
&iquest;tengo que compilarlo todo de nuevo?
d93 2
a94 3
1.8: &iquest;Hay alg&uacute;n procedimiento preestablecido
para actualizar el compilador <em>gcc</em>?
versi&oacute;n m&aacute;s nueva.
d98 2
a99 2
1.9: &iquest;Cu&aacute;l es la mejor forma de actualizar
<em>/etc</em>, <em>/var</em>, y <em>/dev</em>?
d103 2
a104 2
1.10: &iquest;C&oacute;mo hago para eliminar todo lo sobrante
de la compilar desde el &aacute;rbol de fuentes?
d108 2
a109 2
1.11: &iquest;Es necesario ser el superusuario (<em>root</em>)
para ejecutar 'make build'?
d113 1
a113 2
1.12: &iquest;Por qu&eacute; no veo ning&uacute;n dispositivo
nuevo?
d117 2
a118 2
1.13: &iquest;Hay alguna manera sencilla de llevar a cabo
todos los cambios en la jerarqu&iacute;a de archivos?
d122 2
a123 2
1.14: Despu&eacute;s de actualizar, <em>ps</em> produce el
siguiente error: &quot;proc size mismatch&quot;.
d130 3
a132 8
<a href="#3.1.1">3.1.1: Nuevo usuario y grupo
<em>sshd</em></a><br>
<a href="#3.1.2">3.1.2: Nuevo grupo para crontab(1) y
at(1)</a><br>
<a href="#3.1.3">3.1.3: Nuevo <tt>binutils</tt></a><br>
<a href="#3.1.4">3.1.4: Nueva configuraci&oacute;n de
S/Key</a><br>
<a href="#3.1.5">3.1.5: Nuevos permisos para lp*</a>
d161 2
a162 2
2.9.1: Nuevos usuarios/grupos - <em>proxy</em>, <em>smmsp</em>
y <em>popa3d</em>
d190 2
a191 2
La informaci&oacute;n sobre la actualizaci&oacute;n para las
versiones 2.3 hasta la 2.8 de OpenBSD se encuentra en un
d204 3
a206 3
1.1: Terminolog&iacute;a. &iquest;Qu&eacute; es
<em>-current</em>?  &iquest;Qu&eacute; son los
<em>snapshots</em>?  &iquest;Qu&eacute; es <em>-stable</em>?
d210 4
a213 4
Con anterioridad a OpenBSD 2.7, el desarrollo de OpenBSD
ten&iacute;a lugar desde un s&oacute;lo &aacute;rbol de
fuentes sin ramificaciones.  A partir de la versi&oacute;n 2.7
se introdujo una ramificaci&oacute;n de parches.
d217 4
a220 5
Las &laquo;versiones finales&raquo; (<em>-release</em>) de
OpenBSD se producen con intervalos aproximados de seis meses.
&Eacute;stas se enumeran en un modo convencional (2.x, 3.x).
La versi&oacute;n final actual de OpenBSD se indica al
principio de este documento.
d224 13
a236 16
<em>-current</em> es la forma de abreviada de
<em>openbsd-current</em>, la &laquo;versi&oacute;nd de
desarrollo&raquo;, se refiere a la versi&oacute;n de
&uacute;ltima hora del &aacute;rbol de fuentes contenida en el
repositorio de CVS.  &Eacute;ste es el &aacute;rbol que usan
con m&aacute;s asiduidad los desarrolladores de OpenBSD.  El
&aacute;rbol de <em>-current</em> contiene todo el
c&oacute;digo que est&aacute; planeado para el lanzamiento de
la siguiente versi&oacute;n final.  De vez en cuando, algunos
valientes abandonan las versiones oficiales y utilizan la
versi&oacute;n de desarrollo, <em>-current</em>, generalmente
para aprovechar funcionalidades que todav&iacute;a no se han
implementado en las versiones finales.  Sin embargo, debido a
su naturaleza de incertidumbre, la actualizaci&oacute;n a
<em>-current</em> no es recomendable para usuarios no
t&eacute;cnicos.
d240 2
a241 2
Entre una versi&oacute;n final y otra, se ponen a
disposici&oacute;n unas revisiones llamadas 
d244 7
a250 8
&aacute;rbol de fuentes de <em>-current</em>.  Debido a que
son un reflejo del estado actual de desarrollo, no se puede
garantizar que los <em>snapshots</em> funcionen
correctamente... ni siquiera que funcionen.  Las versiones
preliminares, <em>snapshots</em>, son bastante &uacute;tiles
cuando se est&aacute; actualizando desde una versi&oacute;n
final (o una versi&oacute;n de desarrollo m&aacute;s antigua)
a la del &aacute;rbol actual.
d255 7
a261 8
<a href="../../es/stable.html">ramificaci&oacute;n de
parches</a> (llamada <em>-stable</em>).  Esta
ramificaci&oacute;n contiene la versi&oacute;n final
(<em>-release</em>) base y cualquier otro parche o
modificaci&oacute;n importante (se consideran importantes los
parches publicados en la p&aacute;gina de erratas,
adem&aacute;s de otros que son obvios y simples pero que no
merecen ser mencionados en dicha p&aacute;gina).
d265 7
a271 8
El <a href="../../es/ports.html">&aacute;rbol de portes</a> es
una parte integral del sistema.  Cada vez que se actualice el
sistema, tambi&eacute;n hay que actualizar los portes,
siguiendo las mismas reglas que existen para la
actualizaci&oacute;n del resto de las partes;  o sea, si el
sistema es <em>-stable</em> los portes tambi&eacute;n deben
ser <em>-stable</em>, y si el sistema es <em>-current</em> los
portes s&oacute;lo deben ser <em>-current</em>.
d276 2
a277 2
1.2: &iquest;Cu&aacute;l es la forma m&aacute;s sencilla de
actualizar a <em>-current</em>?
d283 4
a286 5
(<em>-current</em>) no siempre es f&aacute;cil.  La forma
m&aacute;s dif&iacute;cil de actualizar a <em>-current</em> es
actualizar primero a la revisi&oacute;n preliminar
(<em>snapshot</em>) m&aacute;s reciente (por lo general,
mediante una instalaci&oacute;n por FTP).  Una vez el
d289 3
a291 3
<a href="#1.5">compilarlos</a>.  Este procedimiento
deber&iacute;a eliminar la mayor&iacute;a de problemas con las
bibliotecas y las herramientas necesarias.
d296 2
a297 2
1.3: No puedo encontrar ning&uacute;n <em>snapshot</em> en el
servidor de FTP.  &iquest;D&oacute;nde est&aacute;n?
d301 5
a305 5
Los <em>snapshot</em> se pueden retirar seg&uacute;n se vayan
anticuando (o seg&uacute;n dejen de ser relevantes).  Si no
hay ning&uacute;n <em>snapshot</em> disponible, entonces debe
actualizar a la versi&oacute;n m&aacute;s reciente y compilar
lo restante desde el c&oacute;digo fuente.
d311 2
a312 2
1.4: &iquest;C&oacute;mo obtengo el c&oacute;digo fuente
m&aacute;s reciente?
d321 3
a323 3
Por ejemplo, para obtener el &aacute;rbol completo mediante
CVS (usando la shell ksh;  para otras, substituya
<em>export</em> por <em>setenv</em>):
d335 2
a336 2
1.5: Ya tengo el &aacute;rbol de fuentes, &iquest;c&oacute;mo
lo compilo?
d348 1
a348 2
<p>Limpie los ficheros objeto (<em>/usr/obj/</em>)
antiguos.</p>
d350 2
a351 3
<p>Si hab&iacute;a creado un directorio <em>/usr/obj</em>
separado, l&iacute;mpielo y reconstruya los enlaces
simb&oacute;licos:</p>
d354 1
a354 2
# rm -rf /usr/obj
# mkdir /usr/obj
d360 3
a362 3
Si se encuentra con que tiene que realizar este paso muchas veces,
puede encontrar mucho m&aacute;s r&aacute;pido poner <em>/usr/obj</em>
en su propia partici&oacute;n y usar <kbd>newfs</kbd> en lugar de
d367 1
a367 1
# umount /dev/wd0h                 (la partici&oacute;n /usr/obj)
d369 1
a369 1
# mount -a
d382 1
a382 2
# rm -rf /usr/obj
# mkdir /usr/obj
d389 5
a393 6
espec&iacute;fico para la versi&oacute;n.  Por ejemplo, los
usuarios de la versi&oacute;n 2.3 deben a&ntilde;adir el
usuario y el grupo <strong>named</strong> antes de actualizar
a la versi&oacute;n 2.4 o posterior.  Lea la secci&oacute;n
espec&iacute;fica para su versi&oacute;n en este
documento.</p>
d397 4
a400 5
<p>Aseg&uacute;rese de que todos los directorios apropiados
hayan sido creados.  Esto es muy importante cuando se
actualiza desde versiones m&aacute;s antiguas, pero a veces
necesario en otros casos.  La forma m&aacute;s f&aacute;cil de
hacerlo es:</p>
d421 4
a424 5
<p><strong>NOTA:</strong> los usuarios a quienes les guste
sufrir pueden compilar un n&uacute;cleo personalizado en lugar
de usar el n&uacute;cleo GENERIC.  En este caso es mejor
empezar con GENERIC e ir modific&aacute;ndolo.  Para ello haga
lo siguiente:</p>
d455 4
a458 5
<p>Actualice <em>/etc</em> y <em>/dev</em> a mano.
&Eacute;stos no se actualizan de forma autom&aacute;tica.
Escoja un directorio con espacio suficiente para <em>/</em>,
<em>/dev</em>, <em>/var</em>, y <em>/etc</em>.  En este
ejemplo usar&eacute; <em>/home/newroot</em> :</p>
d466 3
a468 3
<p>Ahora compare los ficheros en <em>/home/newroot</em> con
sus correspondientes ya instalados.  Reemplace o actualice los
ficheros seg&uacute;n sea necesario.</p>
d476 2
a477 2
<p>Reinicie para asegurarse de que los nuevos ficheros en
<em>/etc</em> sean los correctos.</p>
d483 2
a484 2
1.6: 'make build' se par&oacute; en la mitad del proceso,
&iquest;tengo que hacerlo todo de nuevo?
d488 2
a489 2
Yo lo har&iacute;a, pero si realmente quiere retomarlo desde
el punto en que se qued&oacute;, haga lo siguiente:
d522 5
a526 5
Si tiene que realizar este procedimiento muchas veces, es
posible que le convenga crear un nuevo objetivo en su fichero
makefile.  S&oacute;lo tiene que copiar la entrada para
<em>build</em> (a <em>build-noclean</em>, por ejemplo), y
eliminar la referencia <em>make cleandir</em>.
d536 4
a539 5
Si <em>make build</em> finaliza con un error, es muy posible
que se deba a que no elimin&oacute; sus ficheros objeto
antiguos antes de recompilar.  Lea la
<a href="#1.5">secci&oacute;n 1.5</a> para m&aacute;s detalles
sobre c&oacute;mo limpiar esos ficheros.
d543 3
a545 4
Si est&aacute; seguro de que su &aacute;rbol est&aacute;
limpio de viejos restos, y a&uacute;n as&iacute; recibe un
error de compilaci&oacute;n, es que ha ocurrido una de las
siguientes tres cosas:
d550 3
a552 4
Se ha encontrado con un problema de actualizaci&oacute;n
conocido.  Aseg&uacute;rese de haber leido la secci&oacute;n
apropiada de este documento, y de haber seguido las
instrucciones con cuidado.
d556 4
a559 5
Se ha encontrado con un problema de actualizaci&oacute;n
nuevo.  Esto es lo que pasa cuando se vive peligrosamente.
Busque entre los mensajes m&aacute;s recientes a las listas
<a href="../../es/mail.html">misc@@ y tech@@</a> una posible
soluci&oacute;n.
d563 5
a567 6
Alguien ha &laquo;roto&raquo; temporalmente el &aacute;rbol de
fuentes.  Esto es muy poco com&uacute;n, y por lo general se
soluciona inmediatamente.  Espere unas pocas horas y vuelva a
obtener el &aacute;rbol de fuentes.  Si no puede esperar,
intente bajarse un &aacute;rbol con uno o dos d&iacute;as de
antelaci&oacute;n.
d572 5
a576 6
Si ya ha probado todas las alternativas anteriores y su
problema persiste durante m&aacute;s de un par de d&iacute;as,
env&iacute;e un informe sobre su problema a misc@@openbsd.org.
Aseg&uacute;rese de incluir los mensajes de error relevantes,
as&iacute; como cualquier peculiaridad de su
configuraci&oacute;n.
d582 2
a583 2
versi&oacute;n m&aacute;s nueva.  &iquest;Hay alg&uacute;n
procedimiento para el sistema de arranque?
d587 5
a591 5
Debido a que la actualizaci&oacute;n de un compilador es como
&laquo;el problema del huevo y la gallina&raquo;, los cambios
al compilador original del &aacute;rbol requieren que se les
preste algo m&aacute;s de atenci&oacute;n.  Por regla general
se seguir&aacute; este procedimiento:
d617 2
a618 2
Puede acelerar este proceso usando el procedimiento de rutinas
de arranque (<em>bootstrap</em>):
d634 2
a635 2
1.9: &iquest;Cu&aacute;l es la mejor forma de actualizar
<em>/etc</em>, <em>/var</em>, y <em>/dev</em>?
d647 9
a655 11
Como parte de la pol&iacute;tica de OpenBSD, el
<em>software</em> en el &aacute;rbol de cvs no modifica los
ficheros en <em>/etc</em> de forma autom&aacute;tica.  Esto
quiere decir que es <strong>siempre</strong> el administrador
quien debe llevar a cabo las modificaciones necesarias a los
ficheros de configuraci&oacute;n.  Las actualizaciones no
constituyen una excepci&oacute;n.  Para actualizar los
ficheros en estos directorios, primero determine qu&eacute;
cambios ha sufrido los ficheros b&aacute;sicos de la
distribuci&oacute;n, y a continuaci&oacute;n vuelva a aplicar
esos cambios manualmente.
d669 3
a671 4
Para ver todos los cambios en <em>/etc</em> entre versiones de
OpenBSD arbitrarias, puede usar
<a href="../../es/anoncvs.html">CVS</a>.  Por ejemplo, para
ver los cambios acontecidos entre 2.8 y 2.9, haga:
d680 3
a682 4
Una vez que haya identificado los cambios, vuelva a aplicarlos
a su &aacute;rbol local, conservando cualquier
configuraci&oacute;n a nivel local que haya hecho Vd.
anteriormente.
d686 2
a687 2
Algunos cambios que suelen ocurrir en <em>/etc</em> entre el
paso de versiones, y que debe comprobar son:
d695 5
a699 5
<li>Cambios en las tareas predeterminadas de <em>cron</em>
(v&eacute;ase <em>/etc/daily</em>, <em>/etc/weekly</em>,
<em>/etc/monthly</em>, y <em>/etc/security</em>).</li>
<li>Todos los guiones (<em>scripts</em>)de inicio <em>rc</em>,
incluido <em>/etc/netstart</em>.</li>
d702 2
a703 3
<li>Cambios en la jerarqu&iacute;a de archivos en
<em>/etc/mtree</em>.  V&eacute;se
<a href="#1.13">secci&oacute;n 1.13</a>.</li>
d710 2
a711 2
1.10: &iquest;C&oacute;mo hago para eliminar todo lo sobrante
de la compilaci&oacute;n del &aacute;rbol de fuentes?
d715 3
a717 3
Lo m&aacute;s importante que puede hacer es eliminar sus
directorios <em>obj</em>.  Una forma de actualizar el
c&oacute;digo fuente y eliminar cualquier resto de obj es:
d730 4
a733 4
Si todav&iacute;a tiene alg&uacute;n problema, puede
a&ntilde;adir las opciones <tt>-I ! -I CVS -I obj</tt> a sus
actualizaciones por CVS.  De este modo identificar&aacute;
cualquier resto adicional en su &aacute;rbol de fuentes.
d738 2
a739 2
1.11: &iquest;Es necesario ser el superusuario para hacer un
<em>make build</em>?
d743 3
a745 3
Aunque algunos pasos del proceso <em>make build</em> requieren
los privilegios del superusuario (<em>root</em>), el proceso
<em>build</em> incluye enlaces a la orden
d752 1
a752 2
configurado, puede usar los enlaces de sudo de la siguiente
forma:
d756 4
a759 4
<li>Ponga <tt>SUDO=/usr/bin/sudo</tt> en su fichero de entorno
antes de iniciar el proceso <em>build</em>, o</li>
<li>A&ntilde;ada la l&iacute;nea &quot;SUDO=/usr/bin/sudo&quot; a
su fichero <em>/etc/mk.conf</em>.</li>
d764 1
a764 2
1.12: &iquest;Por qu&eacute; no veo ning&uacute;n dispositivo
nuevo?
d769 4
a772 4
autom&aacute;tica como parte del proceso <kbd>make
build</kbd>.  Como regla general, es recomendable copiar este
gui&oacute;n desde su &aacute;rbol de fuentes cuando lleve a
cabo una actualizaci&oacute;n, y ejecutarlo a mano.
d783 2
a784 2
1.13: &iquest;Hay alguna manera sencilla de llevar a cabo
todos los cambios en la jerarqu&iacute;a de archivos?
d788 5
a792 6
De vez en cuando se a&ntilde;aden directorios y ficheros a, o
se eliminan de, la jerarqu&iacute;a de archivos.
Adem&aacute;s tambi&eacute;n puede cambiar la
informaci&oacute;n sobre permisos.  Una forma f&aacute;cil de
asegurarse de que la jerarqu&iacute;a de archivos est&eacute;
actualizada es usar la utilidad
d797 2
a798 2
Primero obtenga el c&oacute;digo fuente m&aacute;s reciente, y
luego haga lo siguiente:
d809 1
a809 2
Ahora su jerarqu&iacute;a de archivos estar&aacute;
actualizada.
d814 2
a815 2
1.14: Despu&eacute;s de actualizar, <em>ps</em> produce el
siguiente error: &quot;proc size mismatch&quot;.
d820 4
a823 4
desincronizados.  Los dos deben compilarse desde el mismo
c&oacute;digo fuente, ya que existen ciertas interdependencias
entre ambos.  Recompile el n&uacute;cleo y el sistema con el
mismo c&oacute;digo para corregir este problema.
d827 3
a829 3
Y ya que ha cometido un error, ahora es el momento ideal para
volver a leer todo este documento, y enterarse sobre otras
cosas que pueda haber olvidado.
d840 1
a840 1
3.1.1: Nuevo usuario y grupo <em>sshd</em>
d844 4
a847 2
Para el soporte de la nueva funcionalidad de separaci&oacute;n
de privilegios de
d849 3
a851 4
se ha a&ntilde;adido al sistema un nuevo usuario y grupo con
el nombre de <em>sshd</em>.  Debe a&ntilde;adir la siguiente
entrada de usuario en el fichero de contrase&ntilde;as
utilizando
d860 1
a860 2
Y a&ntilde;ada tambi&eacute;n el grupo <em>sshd</em> al
fichero <tt>/etc/group</tt>:
d865 1
d877 1
a877 2
ya no son <em>setuid root</em>, ahora son <em>setgid
crontab</em>.
d881 4
a884 4
Antes de llevar a cabo la ejecuci&oacute;n de <kbd>make
build</kbd> para compilar el sistema, tiene que a&ntilde;adir
el grupo <em>crontab</em>.  Añada una l&iacute;nea como la
siguiente en el fichero <tt>/etc/group</tt>:
d892 3
a894 4
La ejecuci&oacute;n de <kbd>make build</kbd>
actualizar&aacute; algunos permisos, pero no todos.
Despu&eacute;s de que acabe <kbd>make build</kbd>, debe
ejecutar lo siguiente a mano (se asume que el
d900 1
a900 1
  # chmod 0660 /var/at/at.{allow,deny} /var/cron/{allow,deny}
d908 2
a909 2
N&oacute;tese que probablemente no estar&aacute;n todos los
ficheros <tt>allow/deny</tt>;  esto no es un problema.
d919 2
a920 3
&aacute;rbol de fuentes, y requiere una biblioteca
<em>libiberty</em> actualizada.  Para compilar esta biblioteca
siga los siguientes pasos:
d938 4
a941 5
La vieja base de datos de S/Key, <tt>/etc/skeykeys</tt>, ha
sido sustituida por un directorio, <tt>/etc/skey</tt>, en el
que cada entrada es un fichero individual propiedad del
usuario al que describe.  Puede convertir
<tt>/etc/skeykeys</tt> al nuevo formato ejecutando (como
d951 2
a952 2
N&oacute;tese que cualquier programa que utilice S/Key
directamente tendr&aacute; que ser recompilado.
d961 5
a965 5
Ahora, los directorios de cola que usa lpd deben tener permiso
de escritura para el grupo daemon, para que lpr pueda poner
ficheros en la cola.  Adem&aacute;s, los propietarios de los
ficheros de los directorios de cola deben ser el usuario y
grupo daemon.  Esto se puede aplicar del modo siguiente:
d1006 3
a1008 4
Las plataformas basadas en ELF (alpha, macppc y sparc64) ya no
usan <em>libdl</em>.  La actualizaci&oacute;n desde un sistema
libdl a otro no libdl se har&aacute; mejor siguiendo estos
pasos:<br>
d1021 6
a1026 8
<p>Si <kbd>make build</kbd> se complet&oacute; con
&eacute;xito, puede continuar y eliminar <em>libdl</em>.
N&oacute;tese que los paquetes que se hayan enlazado contra
<em>libdl</em> deber&iacute;an ser reinstalados depu&eacute;s
de eliminarlo.  Si no est&aacute; preparado para hacerlo,
puede saltarse este paso de momento.  Las versiones
preliminares (<em>snapshots</em>) traer&aacute;n paquetes
correctos.</p>
d1033 2
a1034 2
<p>Una vez eliminado <em>libdl</em>, regenere el cach&eacute;
de sus bibliotecas compartidas:</p>
d1048 2
a1049 3
regresi&oacute;n, y se ha a&ntilde;adido
<em>bsd.regress.mk</em>.  Tendr&aacute; que instalarlo antes
de ejecutar <kbd>make obj</kbd>.
d1064 2
a1065 2
Primero debe crear el directorio <em>/etc/ssh/</em>
(v&eacute;ase la secci&oacute;n <a href="#1.13">1.13</a>).
d1095 2
a1096 2
<em>sshd_config</em> para que reflejen la nueva
ubicaci&oacute;n.  Por ejemplo,
d1131 3
a1133 3
se a&ntilde;adieron un nuevo usuario y grupo <em>proxy</em> al
sistema.  Para el soporte de &eacute;ste debe a&ntilde;adir la
siguiente entrada de usuario usando
d1142 2
a1143 2
Tambi&eacute;n a&ntilde;ada tambi&eacute;n el grupo
<em>proxy</em> a <em>/etc/group</em>:
d1151 4
a1154 5
Adem&aacute;s, como parte de la actualizaci&oacute;n a
Sendmail 8.12, sendmail ya no tiene el <em>bit setuid
root</em>.  Un nuevo usuario y grupo, <em>smmsp</em>, han sido
a&ntilde;adidos al sistema.  A&ntilde;ada una l&iacute;nea
como la siguiente a <em>/etc/group</em>:
d1164 1
a1164 2
y a&ntilde;ada la siguiente l&iacute;nea para el usuario
<em>smmsp</em>:
d1172 2
a1173 2
Aseg&uacute;rese de que esta l&iacute;nea aparezca antes de
cualquier otra l&iacute;nea de la configuraci&oacute;n sobre
d1178 4
a1181 4
Para finalizar, tambi&eacute;n se a&ntilde;adieron un nuevo
usuario y grupo para el servidor popa3d de <em>Solar
Designer</em>, que ahora forma parte integral del sistema.
A&ntilde;adia la siguiente l&iacute;nea a <em>/etc/group</em>:
d1204 3
a1206 3
El paquete de cortafuegos IPF que hab&iacute;a formado parte
de las versiones anteriores de OpenBSD ha sido reemplazado por
una suite de cortafuegos completamente nueva, llamada
d1208 1
a1208 2
Como resultado, es necesario llevar a cabo unos cuantos
cambios.
d1212 2
a1213 3
Primero, <em>pf</em> depende de un nuevo fichero de
dispositivo.  Para asegurarse de que se crea este dispositivo
especial haga la siguiente:
d1223 2
a1224 2
Segundo, han acontecido algunos cambios en el sistema de
archivos.  Los siguientes binarios han sido reemplazados:
d1256 1
a1256 2
Puede borrar los ficheros de configuraci&oacute;n antiguos de
ipfilter:
d1264 4
a1267 5
Se ha a&ntilde;adido un mecanismo para activar <em>pf</em> de
forma segura a los ficheros <em>/etc/rc</em> y
<em>/etc/rc.conf</em>.  Es necesario actualizar estos ficheros
para que incluyan el nuevo mecanismo de enganche.  Si desea
activar <em>pf</em>, configure PF=YES en
d1280 5
a1284 7
y en sus ficheros de datos, que pueden originar dificultades
en el proceso de compilaci&oacute;n e instalaci&oacute;n.
Estos cambios suelen manifestarse con errores de
<em>bsd.own.mk</em> durante la compilaci&oacute;n e
instalaci&oacute;n.  Para evitarlo, actualice antes los
ficheros de datos: Antes que nada actualice los ficheros de
datos:
d1309 1
a1309 2
2.9.4: La compilaci&oacute;n falla debido a errores de
KerberosV
d1313 1
a1313 2
Antes de intentar compilar todo el sistema, debe compilar
KerberosV:
d1317 3
a1319 4
Primero, hay un nuevo directorio de configuraci&oacute;n de
KerberosV en <em>/etc</em>.  Si todav&iacute;a no lo ha hecho,
use el procedimiento de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mtree&amp;sektion=8">mtree(8)</a>
d1338 3
a1340 3
Tambi&eacute;n puede ser necesario actualizar
<em>/etc/login.conf</em> para indicar que el nombre del
fichero <em>/usr/libexec/auth/login_krb-or-pwd</em> ahora es
d1351 3
a1353 3
ha sido actualizado a la versi&oacute;n 8.12.  Como a partir
de esta versi&oacute;n, sendmail ya no ejecuta <em>setuid
root</em>, existen algunos cambios muy significativos.
d1357 8
a1364 10
<li>Un usuario y grupo nuevos, <em>smmsp</em>, han sido
a&ntilde;adidos.  Si todav&iacute;a no lo ha hecho, siga el
procedimiento que se describe en la
<a href="#8.1">secci&oacute;n 8.1</a> para crearlos.</li>

<li>Han tendio lugar varios cambios en la jerarqu&iacute;a de
archivos, incluido un nuevo directorio
<em>/var/spool/clienmqueue</em> y nuevos permisos para
<em>/var/spool/mqueue</em>.  Estos cambios se pueden efectuar
usando el procedimiento de
d1366 1
a1366 2
que se describe en <a href="#1.13">la secci&oacute;n
1.13</a>.</li>
d1371 3
a1373 3
de root.  Esto es necesario dado que <em>sendmail</em> ya no
ejecuta <em>setuid root</em>, y necesitar&aacute; esta entrada
para hacer parte de su funci&oacute;n:</p>
d1389 9
a1397 11
<em>/etc/mail</em>.  El primero de &eacute;stos,
<em>submit.cf</em> (al que la documentaci&oacute;n actual de
sendmail llama el fichero de configuraci&oacute;n del
&laquo;cliente&raquo;), lo utilizan los agentes de usuario de
correo que quieren enviar correo de forma local para su
reparto por medio de sendmail.  Debido a los cambios en los
permisos que se han descrito anteriormente, para esto no es
necesario disponer de privilegios de superusuario:  el
identificador de grupo del binario ejecutable de sendmail se
configura con <em>smmsp</em>.  El segundo fichero,
<em>localhost.cf</em>, es una particularidad de OpenBSD que
d1400 2
a1401 2
anfitri&oacute;n sin aceptar conexiones provenientes de la red
(si utiliza, por ejemplo,
d1403 4
a1406 5
para escuchar por el puerto SMTP de su interfaz externa, es
casi seguro que le interesar&aacute; usar esta opci&oacute;n).
Puede conocer m&aacute;s detalles al respecto leyendo en
fichero <em>SECURITY</em> que encontrar&aacute; en
<em>/usr/src/gnu/usr.sbin/sendmail/sendmail</em>.
d1410 4
a1413 5
configuraci&oacute;n de sendmail en <em>/etc/mail</em>.  Puede
encontrar algunos ficheros de configuraci&oacute;n funcionales
en <em>/usr/share/sendmail/cf</em>.  N&oacute;tese que el
fichero <em>localhost.cf</em> se genera desde
<em>openbsd-localhost.mc</em>.
d1419 4
a1422 4
<em>/etc/rc.conf</em>, que es como se usa en la
configuraci&oacute;n de la instalaci&oacute;n predeterminada,
tendr&aacute; que usar <em>localhost.cf</em>.  Edite el
fichero <em>rc.conf</em> para a&ntilde;adir lo siguiente:</p>
d1430 2
a1431 3
<p>En cuanto est&eacute; preparado su fichero de
configuraci&oacute;n, use
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kill&amp;sektion=1">kill(1)</a>
d1436 2
a1437 2
<p>y reinicie el nuevo sendmail con las opciones apropiadas,
como por ejemplo:</p>
d1441 2
a1442 2
<p>para una configuraci&oacute;n que acepte correo desde el
exterior, o:</p>
d1448 2
a1449 2
<p><strong>Nota:</strong> el indicador <kbd>-bd</kbd> es ahora
necesario en ambos casos.</p>
d1454 2
a1455 2
El nuevo <em>sendmail</em> deber&iacute;a funcionar a partir
de este momento.
d1465 2
a1466 2
<em>/etc/moduli</em>.  S&oacute;lo tiene que copiarlo desde su
antigua ubicaci&oacute;n o desde <em>/usr/src/etc/</em>.
d1474 2
a1475 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.108 2002/06/08 02:19:13 millert Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.45 2002/06/08 11:48:41 horacio Exp $<br>
@


1.40
log
@
sync with badlands CVS
@
text
@d140 2
a141 1
S/Key</a>
d998 20
d1540 2
a1541 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.107 2002/05/30 22:00:23 kjell Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.44 2002/06/04 17:59:07 horacio Exp $<br>
@


1.39
log
@
sync with badlands translation CVS
@
text
@d43 10
d124 5
d851 20
d1519 2
a1520 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.103 2002/05/27 05:14:55 kjell Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.43 2002/05/28 09:47:40 horacio Exp $<br>
@


1.38
log
@
sync with badlands translation CVS
@
text
@d1251 9
d1484 2
a1485 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.102 2002/05/17 18:21:47 millert Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.42 2002/05/18 18:58:57 horacio Exp $<br>
@


1.37
log
@
sync with badlands translation CVS
@
text
@d44 2
a45 1
<h2>Preguntas generales sobre la actualizaci&oacute;n</h2>
d852 3
a854 2
el nombre de <em>sshd</em>.  A&ntilde;ada la siguiente entrada
de usuario utilizando
d1476 1
a1476 1
$Translation: upgrade-minifaq.html,v 1.41 2002/05/17 21:49:47 horacio Exp $<br>
@


1.36
log
@
sync with badlands translation CVS
@
text
@d118 7
a124 2
<a href="#3.1.1">3.1.1: Nuevo grupo para crontab(1) y at(1)
</a><br>
a178 18
<h2>C&oacute;mo actualizar desde la versi&oacute;n 2.8</h2>

<p>
<a href="#2.8.1">
2.8.1: Nuevo grupo <em>auth</em>
</a><br>

<a href="#2.8.2">
2.8.2: Nuevo sistema para consola <em>wscons</em>
</a><br>

<a href="#2.8.3">
2.8.3: La compilaci&oacute;n del n&uacute;cleo falla con errores
de <em>Undefined symbol</em>
</a>
</p>


d183 1
a183 1
versiones 2.3 hasta la 2.7 de OpenBSD se encuentra en un
d843 29
a871 1
3.1.1: Nuevo grupo para crontab(1) y at(1)
d890 1
a890 1
crontab:*:66:
d902 6
a907 5
# chgrp crontab /var/at/at.{allow,deny} /var/cron/{allow,deny}
# chmod 0660 /var/at/at.{allow,deny} /var/cron/{allow,deny}
# foreach f ( /var/cron/tabs/* )
	chown $f.crontab $f
  end
d915 45
d977 6
a982 6
# cd /usr/src/usr.sbin/mtree
# make cleandir
# make obj
# make depend
# make
# make install
a1468 84
<a name="2.8"></a>
<h2>
C&oacute;mo actualizar desde la versi&oacute;n 2.8
</h2>

<a name="2.8.1"></a>
<h3>
2.8.1: El nuevo grupo <em>auth</em>
</h3>

<p>
Un nuevo grupo, <em>auth</em>, con gid 11, ha sido
a&ntilde;adido al sistema.  Incluya una l&iacute;nea como la
siguiente en su fichero <em>/etc/group</em>:
</p>

<pre>
  auth:*:11:
</pre>

<a name="2.8.2"></a>
<h3>
2.8.2: Nuevo sistema para consola <em>wscons</em>
</h3>

<p>
El controlador para consola <em>pcvt</em> ha sido substituido
por el sistema para consola <em>wscons</em>.  Antes de poder
usar wscons debe crear los nuevos dispositivos relacionados
con wscons.  Aseg&uacute;rese de haber instalado el
&uacute;ltimo MAKEDEV y entonces compile todos los
dispositivos:
</p>

<pre>
 # cp /usr/src/etc/etc.i386/MAKEDEV /dev/MAKEDEV
 # cd /dev
 # ./MAKEDEV all
</pre>

<p>
Si va a usar X, cambie la secci&oacute;n &quot;Pointer&quot;
en su fichero de configuraci&oacute;n <em>XF86Config</em> de
modo que contenga lo siguiente:
</p>

<pre>
    Protocol    &quot;wsmouse&quot;
    Device      &quot;/dev/wsmouse&quot;
</pre>

<a name="2.8.3"></a>
<h3>
2.8.3: La compilaci&oacute;n del n&uacute;cleo falla con
errores de <em>Undefined symbol</em>
</h3>

<p>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;apropos=0&amp;sektion=8&amp;manpath=OpenBSD+Current&amp;arch=i386&amp;format=html">config(8)</a>
ha sido actualizado.  Si compila con el <em>config</em>
antiguo le dar&aacute; errores como:
</p>

<pre>
  Undefined symbol `_pdevnames_size' referenced
  Undefined symbol `_pdevnames' referenced
</pre>

<p>
Para corregirlo, compile e instale el nuevo <em>config</em>:
</p>

<pre>
  # cd /usr/src/usr.sbin/config
  # make clean &amp;&amp; make depend &amp;&amp; make
  # make install
</pre>
 
<p>
Ahora recompile un nuevo n&uacute;cleo como hicimos antes.
</p>



d1473 2
a1474 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.96 2002/05/13 22:45:04 millert Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.40 2002/05/14 13:48:23 horacio Exp $<br>
@


1.35
log
@
sync with badlands translation CVS
@
text
@d15 1
a15 1
<h2>&Uacute;ltima versi&oacute;n de OpenBSD: 3.0</h2>
d115 6
d849 50
d913 1
d1496 2
a1497 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.95 2002/03/08 05:40:29 kjell Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.39 2002/03/09 16:31:46 horacio Exp $<br>
@


1.34
log
@
sync with badlands translation CVS.
@
text
@d120 4
d127 1
a127 1
<a href="#3.0.2">
d131 1
a131 1
<a href="#3.0.3">
d850 20
a869 1
3.0.1: Eliminaci&oacute;n de <em>libdl</em> en plataformas ELF
d911 1
a911 1
<a name="3.0.2"></a>
d913 1
a913 1
3.0.2: Nuevo marco de regresi&oacute;n
d928 1
a928 1
<a name="3.0.3"></a>
d930 1
a930 1
3.0.3: ficheros de configuraci&oacute;n de ssh traspasados a
d959 9
a967 2
Y actualice las l&iacute;neas HostKey del fichero
<em>sshd_config</em> para que refleje el cambio:
d975 1
a975 1
Esa l&iacute;nea debe cambiarse a:
d1439 2
a1440 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.93 2002/02/14 19:07:46 mpech Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.38 2002/02/15 13:07:40 horacio Exp $<br>
@


1.33
log
@
sync with badlands translation CVS.
@
text
@d616 11
a626 11
  $ rm -r /usr/obj/gnu/egcs/gcc/*
  $ cd /usr/src/gnu/egcs/gcc
  $ make -f Makefile.bsd-wrapper clean
  $ make -f Makefile.bsd-wrapper obj
  $ make -f Makefile.bsd-wrapper depend
  $ make -f Makefile.bsd-wrapper 
  $ sudo make -f Makefile.bsd-wrapper install
  $ make -f Makefile.bsd-wrapper clean
  $ make -f Makefile.bsd-wrapper depend
  $ make -f Makefile.bsd-wrapper 
  $ sudo make -f Makefile.bsd-wrapper install
d639 8
a646 8
  $ cd /usr/src/gnu/egcs/gcc
  $ make -f Makefile.bsd-wrapper clean
  $ make -f Makefile.bsd-wrapper obj
  $ make -f Makefile.bsd-wrapper -DBOOTSTRAP
  $ sudo make -f Makefile.bsd-wrapper -DBOOTSTRAP install
  $ make -f Makefile.bsd-wrapper clean
  $ make -f Makefile.bsd-wrapper
  $ sudo make -f Makefile.bsd-wrapper install
d860 2
a861 2
$ cd /usr/src
$ make build
d901 2
a902 2
  $ cd /usr/src/share/mk
  $ sudo make install
d913 1
a913 2
(v&eacute;ase antes la secci&oacute;n
<a href="#1.13">1.13</a>).
d921 2
a922 2
  $ cd /usr/src
  $ make build
d926 1
a926 1
Pase los ficheros <em>/etc/ssh*</em> al nuevo directorio
d932 1
a932 1
  # mv ssh* ssh/
d1062 3
a1064 3
  $ cd /dev
  $ sudo cp /usr/src/etc/etc.`machine`/MAKEDEV ./
  $ sudo ./MAKEDEV all
d1128 2
a1129 2
  $ cd /usr/src/share/mk
  $ sudo make install
d1137 3
a1139 3
  $ cd /usr/src/usr.bin/make
  $ make clean &amp;&amp; make obj &amp;&amp; make depend &amp;&amp; make
  $ sudo make install
d1171 7
a1177 7
  $ cd /usr/src/kerberosV
  $ sudo make obj
  $ cd lib/roken
  $ sudo make 
  $ cd ../../usr.bin/asn1_compile
  $ sudo make
  $ sudo make install
d1229 2
a1230 2
  $ cd /usr/src/gnu/usr.sbin/sendmail
  $ make clean &amp;&amp; make obj &amp;&amp; make depend &amp;&amp; make &amp;&amp; sudo make install
d1394 3
a1396 3
  $ cd /usr/src/usr.sbin/config
  $ make clean &amp;&amp; make depend &amp;&amp; make
  $ sudo make install
d1409 2
a1410 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.90 2002/02/12 21:09:31 pvalchev Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.37 2002/02/13 22:04:15 horacio Exp $<br>
@


1.32
log
@
sync with badlands translation CVS
@
text
@d125 6
a130 1
</a>
d846 1
a846 1
Eliminaci&oacute;n de <em>libdl</em> en plataformas ELF
d905 52
d1410 2
a1411 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.89 2002/02/02 05:17:18 chris Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.36 2002/02/02 15:25:49 horacio Exp $<br>
@


1.31
log
@
sync with badlands translation CVS
@
text
@d22 1
a22 1
$OpenBSD: upgrade-minifaq.html,v 1.88 2002/01/17 17:49:39 kjell Exp $
d328 1
a328 1
# cvs -q get -PA src
d739 1
a739 1
  # cvs -q -d anoncvs@@some.anon.server:/cvs up -PAd
d1353 2
a1354 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.88 2002/01/17 17:49:39 kjell Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.35 2002/01/25 14:33:46 horacio Exp $<br>
@


1.30
log
@
sync with badlands translation CVS.
@
text
@d4 2
a5 2
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta http-equiv="Content-Language" content="es">
d7 1
a7 1
   <title>Gu&iacute;a de actualizaci&oacute;n de OpenBSD</title>
d39 1
a39 1
<a href="../upgrade-old.html">un documento separado</a>.
d182 1
a182 1
<a href="../upgrade-old.html">documento separado</a>.
d629 2
a630 1
Puede acelerar este proceso usando el procedimiento BOOTSTRAP:
d1354 1
a1354 1
$Translation: upgrade-minifaq.html,v 1.34 2002/01/20 21:21:28 horacio Exp $<br>
@


1.29
log
@
sync with badlands translation CVS.
new tags.
@
text
@d5 2
d9 2
a10 1
<body bgcolor="#FFFFFF" text="#000000" link="#23238E">
d14 2
a15 1
<h2>&Uacute;ltima versi&oacute;n de OpenBSD - 3.0</h2>
d20 1
a20 1
&lt;<a href="mailto:kjell@@openbsd.com">kjell@@openbsd.org</a>&gt; <br />
d22 1
a22 1
$OpenBSD: upgrade-minifaq.html,v 1.85 2002/01/16 20:28:05 kjell Exp $
d26 1
a26 1
<br />
d30 10
a39 9
Si alguna vez ha intentado compilar el c&oacute;digo fuente de
la &laquo;versi&oacute;n de desarrollo&raquo;,
<em>-current</em>, de alguna versi&oacute;n de OpenBSD
antigua, se habr&aacute; dado cuenta de que el proceso no
siempre es f&aacute;cil.  En esta gu&iacute;a se intentan
solucionar los problemas m&aacute;s comunes que se encuentran
al actualizar entre versiones de OpenBSD, o desde las
&laquo;versiones finales&raquo;, <em>-release</em>, a
<em>-current</em>.
d44 1
a44 1
<h2>1.0: Preguntas generales sobre la actualizaci&oacute;n</h2>
d51 1
a51 1
</a> <br />
d54 3
a56 3
1.2: &iquest;Cu&aacute;l es la forma m&aacute;s f&aacute;cil
de actualizar a <em>-current</em>?
</a> <br />
d61 1
a61 1
</a> <br />
d64 1
a64 1
1.4: &iquest;C&oacute;mo obtengo el c&oacute;digo fuente
d66 1
a66 1
</a> <br />
d71 1
a71 1
</a> <br />
d76 1
a76 1
</a> <br />
d80 2
a81 2
&iquest;qu&eacute; puedo hacer?
</a> <br />
d84 2
a85 1
1.8: Estoy actualizando el compilador (<code>gcc</code>) a una
d87 1
a87 4
<br />
&iquest;Hay alg&uacute;n procedimiento para el sistema de
arranque?
</a> <br />
d92 1
a92 1
</a> <br />
d96 2
a97 2
de la compilaci&oacute;n de mi &aacute;rbol de fuentes?
</a> <br />
d101 2
a102 2
para hacer un 'make build'?
</a> <br />
d107 1
a107 1
</a> <br />
d112 1
a112 36
</a> <br />
</p>

<h2>2.0: C&oacute;mo actualizar desde la versi&oacute;n
2.3</h2>

<p>
<a href="#2.1">
2.1: &iquest;Cu&aacute;les son los mayores problemas para
actualizar desde la 2.3 a la 2.4?
</a> <br />

<a href="#2.2">
2.2: He intentado compilar todo, pero falla cuando intento
compilar <em>ssleay</em>.
</a> <br />

<a href="#2.3">
2.3: He intentado compilar todo para PowerPC, pero 'make'
falla.
</a> <br />
</p>


<h2>3.0: C&oacute;mo actualizar desde la versi&oacute;n
2.4</h2>

<p>
<a href="#3.1">
3.1: &iquest;Cu&aacute;les son los mayores problemas para
actualizar desde la 2.4 a la 2.5?
</a> <br />

<a href="#3.2">
3.2: He intentado compilar, pero falla en cap_mkdb.
</a> <br />
d116 1
a116 1
<h2>4.0: C&oacute;mo actualizar desde la versi&oacute;n 2.5</h2>
d119 3
a121 4
<a href="#4.1">
4.1: &iquest;Cu&aacute;les son los mayores problemas para actualizar
desde la 2.5 a la 2.6?
</a> <br />
d123 2
a124 3
<a href="#4.2">
4.2: &iquest;C&oacute;mo actualizo <em>gcc</em> a
<em>egcs</em>?
a127 37
<blockquote>
<p>
<a href="#4.2.1">4.2.1 - i386 y sparc ya no usan
<code>#define</code></a><br />
<a href="#4.2.2">4.2.2 - La compilaci&oacute;n falla en
xlint</a><br />
<a href="#4.2.3">4.2.3 - &laquo;Volcado de memoria&raquo;
(<em>Core Dump</em>) en <code>uthread_autoinit.c</code></a><br
/>
<a href="#4.2.4">4.2.4 - egcs parece mucho m&aacute;s lento
que gcc</a><br />
<a href="#4.2.5">4.2.5 - egcs genera c&oacute;digo de mayor
tama&ntilde;o que gcc</a><br />
<a href="#4.2.6">4.2.6 - Despu&eacute;s de instalar egcs, me
queda muy poco espacio en el disco</a><br />
<a href="#4.2.7">4.2.7 - La compilaci&oacute;n falla al
compilar libcurses</a><br />
<a href="#4.2.8">4.2.8 - 'make obj' falla</a>
</p>
</blockquote>

<p>
<a href="#4.3">
4.3: <em>make build</em> muere con errores de tipo
<em>unimplemented syscall</em>.
</a> <br />

<a href="#4.4">
4.4: Enlace al nuevo directorio 2.6.
</a> <br />

<a href="#4.5">
4.5: Despu&eacute;s de <strong>(U)</strong>pgrade
(actualizar), la extracci&oacute;n de <em>base26.tar.gz</em>
falla con un mensaje.
</a>
</p>
d129 1
a129 2
<h2>5.0 - C&oacute;mo actualizar desde la versi&oacute;n
2.6</h2>
d132 4
a135 31
<a href="#5.1">
5.1: Las entradas de termcap son demasiado largas.
</a> <br />

<a href="#5.2">
5.2: El n&uacute;cleo del sistema ya no reconoce mi
dispositivo <em>pn</em> (o <em>mx</em>, <em>al</em>,
<em>ax</em>).
</a> <br />

<a href="#5.3">
5.3: Actualizaci&oacute;n de gcc 2.95.1 a 2.95.2
</a> <br />

<a href="#5.4">
5.4: Actualizaci&oacute;n de Kerberos.
</a> <br />

<a href="#5.5">
5.5: Actualizaci&oacute;n de M4.
</a> <br />

<a href="#5.6">
5.6: Actualizaci&oacute;n de sendmail.
</a> <br />

<a href="#5.7">
5.7: Despu&eacute;s de actualizar, los n&uacute;cleos que incluyen
<em>apm(8)</em> ya no arrancan.
</a>
</p>
d137 3
d141 3
a143 12
<h2>6.0 - C&oacute;mo actualizar desde la versi&oacute;n
2.7</h2>

<p>
<a href="#6.1">
6.1: &iquest;Cu&aacute;les son los problemas principales para
actualizar desde la versi&oacute;n 2.7 a la 2.8?
</a>
</p>

<h2>7.0 - C&oacute;mo actualizar desde la versi&oacute;n
2.8</h2>
d145 2
a146 3
<p>
<a href="#7.1">
7.1: Nuevo grupo auth
d149 2
a150 2
<a href="#7.2">
7.2: Nuevo sistema para consola wscons
d153 2
a154 3
<a href="#7.3">
7.3: La compilaci&oacute;n del n&uacute;cleo falla con errores
de <em>Undefined symbol</em>
d158 2
a159 2
<h2>8.0 - C&oacute;mo actualizar desde la versi&oacute;n
2.9</h2>
d162 3
a164 4
<a href="#8.1">
8.1: Nuevos usuarios/grupos - <em>proxy</em>, <em>smmsp</em> y
<em>popa3d</em>
</a> <br />
d166 3
a168 3
<a href="#8.2">
8.2: Nuevo filtro de paquetes IP
</a> <br />
d170 3
a172 14
<a href="#8.3">
8.3: Cambios en <em>make</em>
</a> <br />

<a href="#8.4">
8.4: La compilaci&oacute;n falla debido a errores de KerberosV
</a> <br />

<a href="#8.5">
8.5: La nueva versi&oacute;n de sendmail
</a> <br />

<a href="#8.6">
8.6: Cambio en <em>/etc/primes</em>.
d177 1
a177 7
<h2>9.0 - Actualizaci&oacute;n desde la versi&oacute;n
3.0</h2>

<p>
<a href="#9.1">
9.1: Eliminaci&oacute;n de <em>libdl</em> en plataformas ELF
</a> <br />
d180 3
a182 3
<a href="#9.2">
9.2: Nuevo marco de regresi&oacute;n
</a>
a187 1

d189 1
a189 2
<h2>1.0: Preguntas generales sobre la
actualizaci&oacute;n</h2>
d251 1
a251 1
parches</a> (llamada <strong>-stable</strong>).  Esta
d273 2
a274 2
1.2: &iquest;Cu&aacute;l es la forma m&aacute;s f&aacute;cil
de actualizar a <em>-current</em>?
a298 7
Los <em>snapshot</em> se sol&iacute;an retirar de los
servidores de distribuci&oacute;n justo antes del lanzamiento
de una nueva versi&oacute;n oficial.  Esto ya no forma parte
de la pol&iacute;tica de OpenBSD.
</p>

<p>
d303 1
a303 1
lo restante desde los fuentes.
d309 2
a310 2
1.4: &iquest;C&oacute;mo obtengo los fuentes m&aacute;s
recientes?
d333 2
a334 1
1.5: Ya tengo el &aacute;rbol, &iquest;c&oacute;mo lo compilo?
d434 1
a434 1
(edite MYKERNEL como le convenga)
d542 5
a546 5
Si 'make build' finaliza con un error, es muy posible que se
deba a que no elimin&oacute; sus ficheros objeto antiguos
antes de recompilar.  Lea la <a href="#1.5">secci&oacute;n
1.5</a> para m&aacute;s detalles sobre c&oacute;mo limpiar
esos ficheros.
d593 1
a593 1
1.8: Estoy actualizando el compilador (<code>gcc</code>) a una
d700 24
d727 1
a727 1
de la compilaci&oacute;n de mi &aacute;rbol de fuentes?
d732 2
a733 2
directorios obj.  Una forma de actualizar el c&oacute;digo
fuente y eliminar cualquier resto de obj es:
d773 4
a776 8
<li>
Ponga SUDO=/usr/bin/sudo en su fichero de entorno antes de
iniciar el proceso <em>build</em>, o
</li>
<li>
A&ntilde;ada la l&iacute;nea &quot;SUDO=/usr/bin/sudo&quot; a
su fichero <em>/etc/mk.conf</em>.
</li>
d786 1
a786 1
El gui&oacute;n <em>/dev/MAKEDEV</em> no es actualiza de forma
d833 1
a833 1
<a name="2.0"></a>
d835 1
a835 1
2.0: C&oacute;mo actualizar desde la Versi&oacute;n 2.3
d838 1
a838 1
<a name="2.1"></a>
d840 1
a840 2
2.1: &iquest;Cu&aacute;les son los mayores problemas para
actualizar desde la 2.3 a la 2.4?
a842 2
<h4>Nuevo usuario: <em>named</em></h4>

d844 4
a847 6
Con posterioridad a la versi&oacute;n 2.3, el d&aelig;mon de DNS
<em>named</em> se cambi&oacute; a una jaula chroot.  Para hacer este
cambio posible, se cre&oacute; el usuario <em>named</em>.  Si
todav&iacute;a no lo tiene, necesitar&aacute; crearlo para estar seguro
de que todos los directorios se crean correctamente durante el proceso
de compilaci&oacute;n.
d850 22
a871 5
<p>
A&ntilde;ada la siguiente entrada a <em>/etc/passwd</em>,
usando
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8">vipw(8)</a>:
</p>
d873 3
d877 1
a877 1
named:*:70:70::0:0:BIND Daemon:/var/named:/sbin/nologin
d879 7
d888 4
a891 1
A&ntilde;ada lo siguiente a <em>/etc/group</em>:
d895 2
a896 1
named:*:70:
d899 6
a904 1
<a name="2.2"></a>
d906 2
a907 2
2.2: He intentado compilar todo, pero falla cuando intento
compilar <em>ssleay</em>.
d911 8
a918 2
Probablemente le falte una entrada para el usuario
<em>named</em> en el fichero de la contrase&ntilde;a.
d921 3
a923 3
<p>
<strong>Respuesta corta:</strong>
</p>
d926 2
a927 1
Cree este usuario antes de la compilaci&oacute;n.
d930 3
a932 3
<p>
<strong>Respuesta larga:</strong>
</p>
d935 5
a939 6
El usuario <em>named</em> es necesario para configurar
correctamente los permisos.  Si este usuario faltara, parte
del proceso de compilaci&oacute;n fallar&iacute;a.  Si hiciera
una captura de pantalla de su compilaci&oacute;n de un fichero
(por ejemplo, con <em>make build &amp;&gt;/tmp/build.log</em>),
notar&iacute;a el siguiente mensaje:
d943 1
a943 7
(cd /usr/src/etc &amp;&amp; make DESTDIR=/ distrib-dirs)
install -d -o root -g wheel -m 755 /
mtree -def mtree/4.4BSD.dist -p // -u

mtree: unknown user named
mtree: failed at line 1632 of the specification
*** Error code 1 (ignored)
d947 4
a950 8
Desafortunadamente para nosotros, la compilaci&oacute;n
continuar&iacute;a felizmente su camino, ignorando
completamente el hecho de que ha ocurrido un error.
</p>

<p>
Si el usuario <em>named</em> existiera, mtree
funcionar&iacute;a correctamente:
d954 1
a954 18
missing: ./var/named (created)
missing: ./var/named/dev (created)
missing: ./var/named/etc (created)
missing: ./etc/afs (created)
missing: ./etc/ssl (created)
missing: ./etc/ssl/private (created)
missing: ./usr/obj (not created: File exists)
missing: ./usr/share/doc/html (created)
missing: ./usr/share/doc/html/lynx_help (created)
missing: ./usr/share/doc/html/lynx_help/keystrokes (created)
missing: ./usr/share/doc/usd/13.viref (created)
missing: ./usr/share/man/cat4/powerpc (created)
missing: ./usr/share/man/man4/alpha (created)
missing: ./usr/share/man/man4/pmax (created)
missing: ./usr/share/man/man4/powerpc (created)
missing: ./usr/share/tmac/mdoc (created)
missing: ./var/www/htdocs/manual/vhosts (created)
missing: ./usr/include/ssl (created)
d958 3
a960 4
En este caso, la raz&oacute;n de que fallara ser&iacute;a que
el directorio <em>/usr/include/ssl</em> nunca fue creado.  Sin
los ficheros de cabeceras, la compilaci&oacute;n de
<em>ssleay</em> fallar&iacute;a.
d964 4
a967 1
<strong>Soluci&oacute;n:</strong>
d969 5
a973 1

d975 3
a977 4
Cree el usuario y el grupo <em>named</em>.  Elimine
<em>/usr/include/ssl</em>, <em>/var/named</em>, y cualquier
otro directorio de la lista anterior que hubiera sido creado
por error como un fichero normal por 'make build'.
d980 5
a984 1
<a name="2.3"></a>
d986 1
a986 2
2.3: He intentado compilar todo para PowerPC, pero 'make'
falla.
d990 6
a995 2
Su &aacute;rbol del directorio est&aacute; incompleto.  En
concreto, falta el <em>/usr/share/man/cat4/powerpc</em>.
d999 3
a1001 1
<strong>Soluci&oacute;n r&aacute;pida:</strong>
d1004 6
d1011 2
a1012 1
Cree este directorio y proceda con la compilaci&oacute;n.
d1015 9
a1023 3
<p>
<strong>Soluci&oacute;n completa:</strong>
</p>
d1026 1
a1026 1
Cree el &aacute;rbol del directorio completo:
d1030 2
a1031 1
# cd /usr/src/etc &amp;&amp; make DESTDIR=/ distrib-dirs
d1035 1
a1035 1
Es probable que vea una salida como la siguiente:
d1039 2
a1040 21
install -d -o root -g wheel -m 755 /
mtree -def mtree/4.4BSD.dist -p // -u

missing: ./var/named (created)
missing: ./var/named/dev (created)
missing: ./var/named/etc (created)
missing: ./etc/afs (created)
missing: ./etc/ssl (created)
missing: ./etc/ssl/private (created)
missing: ./usr/obj (not created: File exists)
missing: ./usr/share/doc/html (created)
missing: ./usr/share/doc/html/lynx_help (created)
missing: ./usr/share/doc/html/lynx_help/keystrokes (created)
missing: ./usr/share/doc/usd/13.viref (created)
missing: ./usr/share/man/cat4/powerpc (created)
missing: ./usr/share/man/man4/alpha (created)
missing: ./usr/share/man/man4/pmax (created)
missing: ./usr/share/man/man4/powerpc (created)
missing: ./usr/share/tmac/mdoc (created)
missing: ./var/www/htdocs/manual/vhosts (created)
missing: ./usr/include/ssl (created)
d1044 6
a1049 2
Not&eacute;se que <em>/usr/share/man/cat4/powerpc</em> es uno
de los directorios creados por este proceso.
d1053 1
a1053 6
<a name="3.0"></a>
<h2>
3.0: C&oacute;mo actualizar desde la Versi&oacute;n 2.4
</h2>

<a name="3.1"></a>
d1055 1
a1055 2
3.1: &iquest;Cu&aacute;les son los mayores problemas para
actualizar desde la 2.4 a la 2.5?
a1057 2
<h3>cap_mkdb</h3>

d1059 9
a1067 3
La sintaxis para invocar <em>cap_mkdb</em> ha cambiado
ligeramente.  Antes de hacer un 'make build', recompile
<em>cap_mkdb</em> desde los fuentes m&aacute;s recientes:
d1071 2
a1072 2
# cd /usr/src/usr.bin/cap_mkdb
# make clean &amp;&amp; make &amp;&amp; make install
d1076 1
a1076 2
Y 'make build' deber&iacute;a seguir el proceso hasta que
estuviera completo.
d1079 5
a1083 1
<h3>Cambios en las p&aacute;ginas del manual</h3>
d1086 1
a1086 6
Varias p&aacute;ginas del manual se cambiaron desde la
secci&oacute;n 1 a secciones posteriores.  Desafortunadamente,
si las p&aacute;ginas del manual viejas se dejan en la
secci&oacute;n 1, los usuarios que no lo sepan no
podr&aacute;n ver las &uacute;ltimas versiones de las
p&aacute;ginas.
a1088 3
<p>
Las siguientes p&aacute;ginas se deber&iacute;an eliminar:
</p>
d1090 5
a1094 7
<pre>
/usr/share/man/cat1/ipf.0
/usr/share/man/cat1/ipnat.0
/usr/share/man/cat1/ipsecadm.0
</pre>

<h3>Snake</h3>
d1097 2
a1098 2
Tiene que eliminar el contenido del directorio <em>obj/</em>
antes de actualizar <code>/usr/src/games/snake</code>.
d1102 7
a1108 3
<a name="3.2"></a>
<h4>3.2: He intentado compilar, pero falla en cap_mkdb.</h4>

d1110 2
a1111 4
<strong>S&iacute;ntoma:</strong>

<p>
'make build' da como resultado un error como &eacute;ste:
d1114 4
a1117 1362
cap_mkdb -i -f terminfo terminfo.src
cap_mkdb: illegal option -- i
usage: cap_mkdb [-v] [-f outfile] file1 [file2 ...]
*** Error code 1
</pre>

<p>
<strong>Soluci&oacute;n r&aacute;pida:</strong>

<p>
Necesita compilar un nuevo <em>cap_mkdb</em>.  Mire en la 
<a href="#3.1">secci&oacute;n 3.1</a>.


<a name="4.0"></a>
<h2>
4.0: C&oacute;mo actualizar desde la Versi&oacute;n 2.5
</h2>

<a name="4.1"></a>
<h3>
4.1: &iquest;Cu&aacute;les son los mayores problemas para
actualizar desde la 2.5 a la 2.6?
</h3>

<h5><em>perl</em> y <em>make</em></h5>

<p>
La &uacute;ltima versi&oacute;n de Perl (5.005_03) requiere
una nueva versi&oacute;n de <em>make</em> para compilar
correctamente.  Debe recompilar make antes de compilar el
nuevo Perl.  Haga lo siguiente:
</p>

<pre>
# cd /usr/src/usr.bin/make
# make clean &amp;&amp; make &amp;&amp; make install
</pre>

<p>
Ahora contin&uacute;e y recompile el nuevo Perl.
Necesitar&aacute; limpiar el directorio <code>obj</code> de
Perl a mano antes de compilar.
</p>

<p>
Los desarrolladores de Perl deber&iacute;an tomar nota de los
&uacute;ltimos cambios.
</p>

<p>
De millert@@openbsd.org:
</p>

<pre>
La versi&oacute;n de perl en el &aacute;rbol de fuentes de OpenBSD (posterior
a 2.5) se ha actualizado a 5.005_03.  El m&eacute;todo de compilaci&oacute;n
ha cambiado algo, pero casi todo deber&iacute;a ser invisible.  Los cambios
importantes que afectan a los usuarios son los siguientes:

1) Los ficheros lib de perl han cambiado de /usr/lib/perl5 al m&aacute;s
correcto /usr/libdata/perl5
2) Los directorios site_perl por definici&oacute;n est&aacute;n ahora en
/usr/local.  O sea, si instala un m&oacute;dulo de perl, se ubicar&aacute; en
/usr/local/libdata/perl5/site_lib.  Esto facilita que pueda ver qu&eacute;
m&oacute;dulos no est&acute;ndar tiene.  Tambi&eacute;n significa que podemos
tener m&oacute;dulos de perl en el sistema de portes con facilidad.
3) Las p&aacute;ginas de manual de la biblioteca de perl est&aacute;n ahora
instaladas en /usr/share/man/cat3p.  Necesitar&aacute; actualizar el fichero
man.conf en base al directorio src/etc/man.conf para poder aprovecharlo.
Esto quiere decir que ahora puede hacer 'man 3p less' y obtener
informaci&oacute;n sobre el pragma de less, pero 'man less' le seguir&aacute;
mostrando la p&aacute;gina de manual del paginador less.

Si tiene m&oacute;dulos u otros ficheros de perl no est&aacute;ndar, lo mejor
que puede hacer es mover /usr/lib/perl5 a /usr/libdata/perl5 y a&ntilde;adir
un enlace de /usr/lib/perl5 a /usr/libdata/perl5.  Alternativamente,
podr&iacute;a editar el fichero instalado Config.pm y arreglar los caminos
desde ah&iacute;.
</pre>

<h5>Cambio de compilador: <em>egcs</em> reemplaza a
<em>gcc</em></h5>

<p>
Este cambio es probablemente el m&aacute;s significativo que
encontrar&aacute;.  Para ver instrucciones detalladas, lea la 
<a href="#4.2">secci&oacute;n 4.2</a>.
</p>

<h5>Cambio en la estructura del n&uacute;cleo
-<em>statfs</em></h5>

<p>
La estructura <tt>statfs</tt> ha cambiado desde el 31 de mayo.
Debe recompilar el n&uacute;cleo de su sistema antes de
intentar un 'make build'.  Lea la
<a href="#4.3">secci&oacute;n 4.3</a> para m&aacute;s
detalles.
</p>

<p>
<a name="4.2"></a>
<h3>
4.2: &iquest;C&oacute;mo actualizo <em>gcc</em> a
<em>egcs</em>?
</h3>

<p>
El modo m&aacute;s seguro es actualizar a un <em>snapshot</em>
reciente, en cuanto haya uno disponible.
<strong>&iexcl;Busque un <em>snapshot</em> primero!</strong>.
Arrancar el compilador nuevo desde el viejo deber&iacute;a ser
el <em>&uacute;ltimo recurso</em>.
</p>

<p>
Antes que nada, le avisamos que en algunas plataformas el
mecanismo de arranque todav&iacute;a no es perfecto.  Hasta la
fecha, deber&iacute;a funcionar en las siguientes, si lleva
cuidado:
</p>

<ul>
<li><strong>i386</strong></li>
<li><strong>sparc</strong></li>
<li><strong>m68k</strong></li>
<li><strong>alpha</strong></li>
</ul>

<p>
Hay problemas con <strong>mips</strong> y
<strong>rs6000</strong>.
</p>

<p>
Para probar si su plataforma puede arrancar desde el disco,
instale <em>egcs-snapshot</em>, que se encuentra disponible en
la <a href="../../es/ports.html">colecci&oacute;n de
portes</a>.  Si funciona, la versi&oacute;n del &aacute;rbol
tambi&eacute;n lo har&aacute;.  &Eacute;ste es el
m&eacute;todo <em>m&acute;s seguro</em> para proceder.
</p>

<p>
Antes de continuar, aseg&uacute;rese de que las copias que
tenga de <em>binutils</em>, <em>gas</em>, y <em>ld</em>
est&eacute;n actualizadas.  Recuerde que existen dos copias de
<em>gas</em> y <em>ld</em> en el &aacute;rbol.  En
<strong>i386</strong> y <strong>sparc</strong>, no se usan las
versiones de <em>binutils</em>.  Debe usar en su lugar
<tt>/usr/src/gnu/usr.bin/gas</tt> y
<tt>/usr/src/gnu/usr.bin/ld</tt>.
</p>

<p>
Las siguientes instrucciones se refieren al <em>snapshot</em>
original de egcs (egcs-990517).  Desde entonces existe en el
&aacute;rbol un segundo <em>snapshot</em> (egcs-990608).  Si
viene de la versi&oacute;n &quot;vainilla&quot; 2.5, es muy
probable que no pueda compilar la &uacute;ltima versi&oacute;n
directamente.  En este caso tendr&aacute; que arrancar con una
versi&oacute;n intermedia siguiendo estas instrucciones:
</p>

<p>
De espie@@openbsd.org:
</p>

<blockquote>
<pre>
Hoy cambia el compilador.

Sale gcc 2.8.1, entra egcs ... o para ser m&aacute;s exactos, la
versi&oacute;n previa de gcc 2.95.

Probablemente esto suponga un duro cambio, pero no puedo calcular todos los
detalles para todas las arquitecturas yo solo.

Voy a empezar a importar partes *ahora*.  Enviar&eacute; un segundo mensaje a
tech@@ una vez todo est&eacute; asentado...

Gracias a todos los que me ayudaron a ordenar las partes, de forma especial a
niklas, turan, y millert.

Porqu&eacute; del cambio
-----------------
como muchos ya sabr&aacute;n, egcs es ahora el compilador *oficial* soportado
por la FSF.  La futura versi&oacute;n de julio ha sido renombrada gcc 2.95.

Simplemente mirando a los mensajes se pueden ver muchas mejoras:
el soporte para nuevos procesadores es mejor, C++ se acerca m&aacute;s a las
normativas ANSI/ISO, Fortran 77 se encuentra m&aacute;s integrado.
Tambi&eacute;n hay una inmensa cantidad de errores solucionados y mejoras en
la generaci&oacute;n del c&oacute;digo.

Adem&aacute;s, el desarrollo es m&aacute;s abierto.  Hay un &aacute;rbol de 
cvs, varias listas de correo, y estamos cooperando m&aacute;s con el equipo
de egcs.  Para ser m&aacute;s exacto, he estado enviando parches al equipo de
egcs, para que las configuraciones de OpenBSD est&eacute;n soportadas
oficialmente.
Tambi&eacute;n, el equipo de desarrollo ha respondido con frecuencia a los
informes de errores, y los problemas se solucionan.

Tambi&eacute;n hay un fen&oacute;meno a tener en cuenta: todo el mundo
est&aacute; cambiando a egcs, lo que se traduce en montones de c&oacute;digo
para probar el compilador, y que podemos beneficiarnos de proyectos
relacionados.

Porqu&eacute; ahora
------------
egcs-1.1 no estaba preparado para algunos prop&oacute;sitos.  En concreto, el
tama&ntilde;o del c&oacute;digo en i386 era mayor que gcc 2.8.1, lo que
resultaba en problemas con los disquetes.
En el momento de &laquo;congelar&raquo; 2.5, el &uacute;nico c&oacute;digo
que se pod&iacute;a incluir era un snapshot algo inestable.  En
inter&eacute;s de la estabilidad, despu&eacute;s de considerarlo mucho, egcs
no fue incluido en 2.5.

Ahora, el proyecto egcs est&aacute; en un ciclo de lanzamiento que
acabar&aacute; en egcs 1.2.  Juzgando por su programa de tiempo en el 
proyecto, existe un amplio margen entre egcs 1.2 y el lanzamiento de la 
pr&oacute;xima versi&oacute;n de OpenBSD.  Adem&aacute;s, queremos empezar 
ahora para que podamos tener la oportunidad de enviar informes sobre 
problemas en arquitecturas de uso menos frecuente, y tenerlo todo solucionado 
para la versi&oacute;n 1.2.

La `congelaci&oacute;n de las funcionalidades' de egcs est&aacute; programada
para el 7 de mayo, y en el snapshot actual 19990502 parece s&oacute;lido.

Qu&eacute; funciona y qu&eacute; no
---------------------
egcs funciona en los sistemas OpenBSD para i386 sin problemas.  m68k
tambi&eacute;n funciona, con algunos arreglos relacionados con errores
extra&ntilde;os que ser&aacute;n solucionados.  sparc tambi&eacute;n parece
funcionar bien.  Hay alg&uacute;n problema con el enlazador en algunas otras
arquitecturas que necesita ser solucionado antes de nuestro pr&oacute;ximo
lanzamiento.

En este momento, los constructores a trav&eacute;s de bibliotecas
din&aacute;micas todav&iacute;a no est&aacute; preparados.

egcs ahora dispone de un cpp propio que va a ser mejor que la actual
soluci&oacute;n que usamos.  Esto significa unos pocos cambios en la interfaz
y probablemente avisos extra&ntilde;os.

&iquest;Mantener gcc 2.8.1?
--------------------
debido a restricciones de tama&ntilde;o, en cuanto se importe egcs, gcc
pasar&aacute; al &Aacute;tico del cvs.  Si no quiere tener egcs ahora,
deber&aacute; tener cuidado en sus actualizaciones de cvs.
Algunos ficheros Makefile est&aacute;n ligados al cambio: includes,
gnu/usr.bin, y gnu/lib.  xlint y cpp.sh tambi&eacute;n cambiar&aacute;n.

C&oacute;mo arrancar el compilador
---------------------------
el modo m&aacute;s simple es probablemente confiar en los varios mantenedores
de las arquitecturas y bajarse un snapshot.

Si quiere hacerlo del modo dif&iacute;cil, primero debe volver a compilar
directorios obj adecuados:

cd /usr/src
make obj

Si su arquitectura es i386, gas debe estar actualizado.
Si su arquitectura en sparc, ld debe estar actualizado.

y compile libiberty:
cd /usr/src/gnu/egcs/libiberty
make -f Makefile.bsd-wrapper clean
make -f Makefile.bsd-wrapper depend
make -f Makefile.bsd-wrapper 
make -f Makefile.bsd-wrapper install

y el compilador de C:
cd /usr/src/gnu/egcs/gcc
make -f Makefile.bsd-wrapper clean
make -f Makefile.bsd-wrapper depend
make -f Makefile.bsd-wrapper 
make -f Makefile.bsd-wrapper install

recompile el compilador de C con la nueva versi&oacute;n:
cd /usr/src/gnu/egcs/gcc
make -f Makefile.bsd-wrapper clean
make -f Makefile.bsd-wrapper depend
make -f Makefile.bsd-wrapper 
make -f Makefile.bsd-wrapper install

recompile los ficheros include:
cd /usr/src/include
make includes

compile todas la bibliotecas de egcs e inst&aacute;lelas:
cd /usr/src/gnu/egcs
make -f Makefile.bsd-wrapper clean
make -f Makefile.bsd-wrapper depend
make -f Makefile.bsd-wrapper 
make -f Makefile.bsd-wrapper install

instale el nuevo controlador de cpp:
cd /usr/src/usr.bin/cpp
make install

y ya est&aacute; preparado; un make build normal deber&iacute;a funcionar...
</pre>

<p>
[nota del autor: en realidad no funciona del todo.  xlint no
compilar&aacute;.  Sin embargo, la soluci&oacute;n es simple.
Ejecute <code>make &amp;&amp; make install</code> en el
directorio <code>/usr/src/usr.bin/xlint/xlint</code> antes de
ejecutar <code>make build</code> y proceda.  V&eacute;ase la
<a href="#4.2.2">secci&oacute;n 4.2.2</a>.]
</p>

<pre>
Si no funciona es porque est&aacute; usando una arquitectura que no ha pasado
por make build todav&iacute;a.  Lo m&aacute;s l&oacute;gico es que sea un
&laquo;Error Interno del Compilador&raquo; (ICE, &quot;Internal Compiler
Error&quot;).

Primero intente ver si el ICE desaparece con -01 &oacute; -00.  En ese caso,
puede hacer un arreglo en el fichero Makefile hasta que sea solucionado (vea
/usr/src/lib/libm/Makefile para un ejemplo de c&oacute;mo hacer estos
arreglos en m68k).

Entonces debe enviar un informe sobre el error a la lista de correo de
egcs-bugs.

Como m&iacute;nimo, debe compilar los fuentes con la misma invocaci&oacute;n
que para el compilador, a&ntilde;adiendo -v -save-temps a las opciones.

-v muestra la secuencia exacta de &oacute;rdenes invocadas por gcc.
-save-temps le dar&aacute; un fichero preprocesado de C (.i) o de C++ (.ii)
que los desarrolladores de egcs pueden entender... no les pida que instalen
OpenBSD en sus m&aacute;quinas.

Si dispone de m&aacute;s tiempo, puede intentar recortar el fichero
preprocesado de C al m&iacute;nimo indispensable que haga saltar el error.
La dicotom&iacute;a funciona bien.
</pre>
</blockquote>

<p>
Si pas&oacute; este procedimiento y todav&iacute;a funciona
todo, felicidades.  Si no, busque consejo en las siguientes
secciones.  Los problemas que no aparezcan aqu&iacute; se
deben enviar a tech@@openbsd.org.
</p>

<a name="4.2.1"></a>
<h5>
4.2.1 - <tt>i386</tt> y <tt>sparc</tt> ya no usan
<tt>#define</tt>
</h5>

<p>
Esto es cierto.  <em>egcs</em> usa <tt>__i386__</tt> y
<tt>__sparc__</tt> que son de c&oacute;digo m&aacute;s limpio.
Si necesita compilar c&oacute;digo que dependa en los viejos
define, a&ntilde;ada <tt>-Dsparc</tt> o <tt>-Di386</tt> a la
ubicaci&oacute;n apropiada del fichero Makefile.
</p>

<a name="4.2.2"></a>
<h5>
4.2.2 - La compilaci&oacute;n falla en xlint
</h5>

<p>
Esto se debe a diferencias sem&aacute;nticas en cpp.  La
soluci&oacute;n es f&aacute;cil y parecida al problema de
<em>cap_mkdb</em> descrito en la <a href="#3.1">secci&oacute;n
3.1</a>.
</p>

<p>
Haga lo siguiente:
</p>

<pre>
# cd /usr/src/usr.bin/xlint/xlint
# make &amp;&amp; make install
</pre>

<p>
ahora vuelva a ejecutar 'make', y la compilaci&oacute;n
deber&iacute;a continuar.
</p>

<a name="4.2.3"></a>
<h5>
4.2.3 - &laquo;Volcado de Memoria&raquo; (&quot;Core
Dump&quot;) en <tt>uthread_autoinit.c</tt>
</h5>

<p>
Ha sido v&iacute;ctima de un error del enlazador.  He
aqu&iacute; un mensaje relevante en este caso:
</p>

<pre>
De: Marc Espie &lt;Marc.Espie@@liafa.jussieu.fr&gt;
Asunto: egcs core-dumping on uthread_autoinit.c

Si le ocurre esto, es un conocido problema del enlazador... el cc1 que tiene
fue enlazado en un modo extra&ntilde;o.

Al principio hice un enlace cc1 contra /usr/lib/libiberty.a est&aacute;tico,
para evitar este problema;  pero esto s&oacute;lo era temporal y el error
reaparec&iacute;a, probablemente debido a cambios relacionados con libc u
otros...

El &aacute;rbol ha sido parcheado con un arreglo en

src/gnu/egcs/f/lang-options.h

aseg&uacute;rese de que tiene la versi&oacute;n parcheada de ese fichero (por
lo menos la revisi&oacute;n 1.2), recompile y reinstale cc1;  el problema
deber&iacute;a desaparecer.

Lo que ocurre es que el enlazador de 386 se equivoca debido a la cadena de
vectorial en toplev.c, y algo se desenlaza, de modo que 
void f(void) __attribute((constructor)) {}
mata cc1.

Como soluci&oacute;n temporal, he matado los textos de ayuda de las opciones
de Fortran, hasta que alguien encuentre d&oacute;nde comete el error el
enlazador.
</pre>

<a name="4.2.4"></a>
<h5>
4.2.4 - <i>egcs</i> parece mucho m&aacute;s lento que
<em>gcc</em>
</h5>

<p>
Lo es, pero existe un motivo.  <em>egcs</em> act&uacute;a
optimizando m&aacute;s pases.  La alineaci&oacute;n de los
datos y otras funcionalidades semejantes mejorar&aacute;n el
c&oacute;digo generado por <em>egcs</em>.
</p>

<a name="4.2.5"></a>
<h5>
4.2.5 - <em>egcs</em> genera c&oacute;digo de mayor
tama&ntilde;o <em>gcc</em>
</h5>

<p>
S&iacute;, lo hace.  Esto se nota especialmente con el viejo
conmutador <tt>-O2</tt> de <em>gcc</em>.  <em>egcs</em>
introduce una nueva opci&oacute;n, <tt>-Os</tt>, que optimiza
el espacio.  Estos es comparable a grandes rasgos con el viejo
comportamiento <tt>-O2</tt>.
</p>

<a name="4.2.6"></a>
<h5>
4.2.6 - Despu&eacute;s de instalar <em>egcs</em>, me queda muy
poco espacio en el disco
</h5>

<p>
<em>egcs</em> se instala en un subdirectorio distinto al de
gcc 2.8.1.  Una vez que egcs haya arrancado y funcione, puede
eliminar <em>gcc</em>.  A prop&oacute;posito de esto, los
cambios en perl mencionados en la <a href="#4.1">secci&oacute;n
4.1</a> significan que puede eliminar el directorio
<tt>/usr/lib/perl5</tt>.  La nueva ubicaci&oacute;n para estos
datos es <tt>/usr/libdata/perl5</tt>.
</p>

<a name="4.2.7"></a>
<h5>
4.2.7 - La compilaci&oacute;n falla al compilar libcurses
</h5>

<p>
<em>libcurses</em> se apoya ahora en la &uacute;ltima
versi&oacute;n de <em>cpp</em>.  Obtenga la &uacute;ltima
versi&oacute;n, recompile <em>cpp</em>, y contin&uacute;e.
Por ejemplo:
</p>

<pre>
# cd /usr/src/usr.bin/cpp &amp;&amp; make install
</pre>

<p>
Y vuelva a intentar 'make build'.
</p>

<a name="4.2.8"></a>
<h5>
4.2.8 - 'make obj' falla
</h5>

<p>
Si <em>make obj</em> falla, se&ntilde;alando errores de un
<em>Makefile</em>, es probable que los ficheros de
inclusi&oacute;n (indicados mediante la directiva
<em>#include</em> en el fichero <em>Makefile</em>)
est&eacute;n obsoletos.  Por ejemplo:
</p>

<pre>
===&gt; lib/libkvm
&quot;Makefile&quot;, line 30: Malformed conditional ((${UVM} == &quot;yes&quot;))
&quot;Makefile&quot;, line 30: Missing dependency operator
&quot;Makefile&quot;, line 32: if-less endif
&quot;Makefile&quot;, line 32: Need an operator
Fatal errors encountered -- cannot continue
</pre>

<p>
Esto se puede resolver recompilando los ficheros include de
makefile:
</p>

<pre>
cd /usr/src/share/mk &amp;&amp; make install
</pre>

<p>
e intente compilar de nuevo.
</p>


<a name="4.3"></a>
<h3>
4.3: <em>make build</em> muere con errores de tipo
<em>unimplemented syscall</em>
</h3>

<p>
<strong>Respuesta corta:</strong>
</p>

<p>
La estructura <tt>statfs</tt> del n&uacute;cleo ha cambiado.
Necesita recompilar el n&uacute;cleo antes de intentar un
<em>make build</em>.
</p>

<p>
<strong>Respuesta larga:</strong>
</p>

<p>
La estructura <tt>statfs</tt> del n&uacute;cleo ha cambiado.
La nueva <tt>struct statfs</tt> tiene las siguientes
funcionalidades:
</p>

<ul>
<li>
Tiene un campo de indicadores <tt>u_int32_t</tt> (ahora
softdep puede tener un indicador real).
</li>
<li>
Usa <tt>u_int32_t</tt> en lugar de largos (mejor en alpha).
Nota: la p&aacute;gina de manual ment&iacute;a sobre
configurar campos inv&aacute;lidos o no usados a -1.  SunOS lo
hace, pero nuestro c&oacute;digo nunca lo ha hecho.
</li>
<li>
Se libera totalmente de <tt>f_type</tt>.  No se ha usado desde
NetBSD 0.9, y tenerlo ah&iacute; siempre crea
confusi&oacute;n.  Es comprensible que esto pueda ser la causa
de que alg&uacute;n viejo c&oacute;digo no compile, pero eso
es mejor a que se rompa en silencio.
</li>
<li>
A&ntilde;ade una uni&oacute;n <tt>mount_info</tt> que contiene
la estructura <tt>FSTYPE_args</tt>.  Esto quiere decir que
ahora <em>mount</em> le puede indicar todas las opciones que
tenga un sistema de archivo montado.  Esto es especialmente
bueno para NFS.
</li>
</ul>

<p>
Otros cambios:
</p>

<ul>
<li>
La emulaci&oacute;n de statfs de Linux no convert&iacute;a
entre nombres de sistema de archivo de BSD y n&uacute;meros
<tt>f_type</tt> de Linux.  Ahora lo hace, ya que el
n&uacute;mero <tt>f_type</tt> de BSD es in&uacute;til para las
aplicaciones de Linux (y de todos modos ha sido eliminado).
</li>
<li>
La estructura statfs de FreeBSD es diferencte de la nuestra
(tanto la vieja como la nueva) y por lo tanto necesita
conversi&oacute;n.  Anteriormente, los syscalls de OpenBSD se
usaban sin ninguna traducci&oacute;n real.
</li>
<li>
Ahora, <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount&amp;apropos=0&amp;sektion=8&amp;manpath=OpenBSD+Current&amp;arch=i386&amp;format=html">mount(8)</a>
mostrar&aacute; informaci&oacute;n adicional cuando se invoque
sin argumentos.  Sin embargo, para verlo <em>todo</em>
necesitar&aacute; usar el indicador -v (verbosidad).
</li>
</ul>


<a name="4.4"></a>
<h3>
4.4: Enlace al nuevo directorio 2.6
</h3>

<p>
Cuando actualice a la versi&oacute;n 2.6 necesitar&aacute;
crear un enlace simb&oacute;lico para gcc.
</p>

<pre>
   cd /usr/lib/gcc-lib
   ln -s ${ARCH}-unknown-openbsd2.5 ${ARCH}-unknown-openbsd2.6
</pre>


<a name="4.5"></a>
<h3>
4.5: Despu&eacute;s de <strong>(U)</strong>pgrade
(actualizar), la extracci&oacute;n de <em>base26.tar.gz</em>
falla con un mensaje:
</h3>

<p>
<em>tar: Unable to remove directory ./usr/include/machine
&lt;Directory not empty&gt;</em>
</p>

<p>
En la versi&oacute;n 2.5 <em>/usr/include/machine</em> era un
directorio, y <em>/usr/include/i386</em> era un enlace a ese
directorio.  En la versi&oacute;n 2.6 esta situaci&oacute;n se
ha invertido.
</p>

<p>
Para corregir el problema, escape a la shell, elimine el
directorio <em>/usr/include/machine</em>, y vuelva a intentar
actualizar.
</p>


<a name="5.0"></a>
<h2>
5.0 - C&oacute;mo actualizar desde la versi&oacute;n 2.6
</h2>

<a name="5.1"></a>
<h3>
5.1: Las entradas de <em>termcap</em> son demasiado largas
</h3>

<p>
Existe un nuevo fichero <em>termcaps.master</em>.
Necesitar&aacute; regenerar los ficheros <em>terminfo</em> y
<em>termcaps</em> con la versi&oacute;n actual de 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tic&amp;apropos=0&amp;sektion=1&amp;manpath=OpenBSD+Current&amp;arch=i386&amp;format=html">tic(1)</a>.
Si est&aacute; actualizando a trav&eacute;s de <em>make
build</em>, se usar&aacute; la versi&oacute;n correcta de
tic(1) y regenerar&aacute; los ficheros por usted.  En caso
contrario, ver&aacute; el siguiente error:
</p>

<pre>
    terminfo.src is corrupt! You need to update /usr/bin/tic
</pre>

<p>
En tal caso, debe recompilar e instalar tic(1)
(asegur&aacute;ndose de utilizar la versi&oacute;n actual de
<em>libcurses</em>), o simplemente compilar la versi&oacute;n
de tic(1) en su &aacute;rbol de fuentes.
</p>

<a name="5.2"></a>
<h3>
5.2: El n&uacute;cleo del sistema ya no reconoce mi
dispositivo <em>pn</em> (o <em>mx</em>, <em>al</em>,
<em>ax</em>)
</h3>

<p>
Nota: en algunas partes de esta secci&oacute;n se usa
s&oacute;lo <em>pn</em> para simplificar.  La
informaci&oacute;n es igualmente aplicable a <em>pn</em>,
<em>mx</em>, <em>al</em>, o <em>ax</em>, seg&uacute;n el caso.
</p>

<p>
Estos cuatro controladores han sido substituidos por el
controlador unificado <em>dc</em>.  Debe cambiar cualquier
menci&oacute;n a <em>pn*</em>, <em>mx</em>, <em>al</em>, o
<em>ax</em> en sus ficheros de configuraci&oacute;n.  Esto
incluye:
</p>

<ul>
<li>
Actualizar el/los fichero/s de configuraci&oacute;n del
n&uacute;cleo (ayuda: empiece con un n&uacute;cleo GENERIC
nuevo y modif&iacute;quelo).
</li>
<li>
Cambiar <em>/etc/hostname.pn*</em> a
<em>/etc/hostname.dc*</em>
</li>
<li>
Actualizar su fichero <em>/etc/ifaliases</em>
</li>
<li>
Realizar cambios en <em>/etc/ipnat.rules</em> y
<em>/etc/ipf.rules</em> para que reflejen el nuevo nombre de
la interfaz.
</li>
</ul>

<p>
Si no est&aacute; modificando un n&uacute;cleo personalizado,
aseg&uacute;rese de haber incluido el dispositivo
<em>dcphy</em> en la configuraci&oacute;n del n&uacute;cleo,
de la siguiente forma:
</p>

<pre>
dcphy*  at mii? phy ?                   # PHYs cl&oacute;nicos de Digital
</pre>

<p>
Mientras est&aacute; en ello, tambi&eacute;n puede
a&ntilde;adir:
</p>

<pre>
ukphy*  at mii? phy ?                   # PHYs &laquo;desconocidos&raquo;
</pre>

<a name="5.3"></a>
<h3>
5.3: Actualizaci&oacute;n de gcc 2.95.1 a 2.95.2
</h3>

<p>
<em>gcc</em> 2.95.2 se fusion&oacute; en el &aacute;rbol de
fuentes de OpenBSD alrededor del 19 de enero de 2.000.  Para
que <em>gcc</em> compile correctamente, se requiere una
versi&oacute;n m&aacute;s reciente de la biblioteca
<em>libiberty</em> (post 2.6).  Para compilar esta biblioteca,
haga lo siguiente:
</p>

<pre>
	cd /usr/src/gnu/egcs/libiberty
	make -f Makefile.bsd-wrapper clean
	make -f Makefile.bsd-wrapper obj
	make -f Makefile.bsd-wrapper
	make -f Makefile.bsd-wrapper install
</pre>

<p>
NOTA:  En las arquitecturas basadas en mips, como pmax, debe
llevar a cabo un <em>ldconfig</em> expl&iacute;cito
despu&eacute;s de compilar las nuevas bibliotecas.
</p>

<p>
Una vez compilada <em>libiberty</em>, puede proceder con un
arranque t&iacute;pico de <em>gcc</em>:
</p>

<pre>
   cd /usr/src/gnu/egcs/gcc
   make -f Makefile.bsd-wrapper clean
   make -f Makefile.bsd-wrapper obj
   make -f Makefile.bsd-wrapper -DBOOTSTRAP
   make -f Makefile.bsd-wrapper -DBOOTSTRAP install
   make -f Makefile.bsd-wrapper clean
   make -f Makefile.bsd-wrapper 
   make -f Makefile.bsd-wrapper install
</pre>

<a name="5.4"></a>
<h3>5.4: Actualizaci&oacute;n de Kerberos</h3>

<p>
Para que Kerberos IV compile correctamente, necesita seguir
estas instrucciones:
</p>

<ul>
<li>
<p>Obtener y compilar la &uacute;ltima versi&oacute;n de
<em>usr.bin/compile_et</em>.</p>
<pre>
   # cd /usr/src/usr.bin/compile_et
   # make clean &amp;&amp; make depend &amp;&amp; make &amp;&amp; make install
</pre>
</li>
<li>
<p>Obtener y compilar la &uacute;ltima versi&oacute;n de
<em>lib/libcom_err</em>.</p>
<pre>
   # cd /usr/src/lib/libcom_err
   # make clean &amp;&amp; make depend &amp;&amp; make &amp;&amp; make install
</pre>
</li>
<li>
<p>Limpie y reinstale los ficheros cabecera de Kerberos:</p>
<pre>
  # rm -r /usr/include/kerberosIV/*
  # cd /usr/src/kerberosIV
  # make includes
</pre>
</li>
<li>
<p>Ahora recompile los ficheros biblioteca de Kerberos:</p>
<pre>
   # cd /usr/src/kerberosIV/lib
   # make clean &amp;&amp; make depend &amp;&amp; make &amp;&amp; make install
</pre>
</li>
<li>
<p>Si no va a llevar a cabo un <kbd>make build</kbd> completo,
recompile Kerberos:</p>
<pre>
   # cd /usr/src/kerberosIV
   # make cleandir &amp;&amp; make depend &amp;&amp; make &amp;&amp; make install
</pre>
</li>
<li>De otro modo, no tiene m&aacute;s que volver a ejecutar
<kbd>make builld</kbd>.</li>
</ul>

<a name="5.5"></a>
<h3>
5.5: Actualizaci&oacute;n de M4
</h3>

<p>
La versi&oacute;n de m4 incluida en OpenBSD 2.6 se engancha en
un bucle infinito mientras procesa los ficheros .mc de
sendmail en ficheros .cf.  Debido a esto, necesitar&aacute;
instalar la nueva versi&oacute;n de m4 <strong>antes</strong>
de intentar un <kbd>make build</kbd>.  En otras palabras:
</p>

<pre>
    # cd /usr/src/usr.bin/m4
    # make &amp;&amp; make install &amp;&amp; make cleandir
</pre>

<a name="5.6"></a>
<h3>
5.6: Actualizaci&oacute;n de Sendmail
</h3>

<p>
En sendmail 8.10.X, las ubicaciones (y nombres) de los
ficheros de configuraci&oacute;n de sendmail han cambiado.
Ahora se encuentra todo, excepto el fichero pid, en
<em>/etc/mail</em>.  Adem&aacute;s, varios ficheros han
cambiado de nombre.
</p>

<table border="0">
<tr>
  <td><strong>VIEJO</strong></td>
  <td><strong>NUEVO</strong></td>
</tr>
<tr>
  <td><tt>/etc/sendmail.cf</tt></td>
  <td><tt>/etc/mail/sendmail.cf</tt></td>
</tr>
<tr>
  <td><tt>/etc/sendmail.cw</tt></td>
  <td><tt>/etc/mail/local-host-names</tt></td>
</tr>
<tr>
  <td><tt>/etc/sendmail.ct</tt></td>
  <td><tt>/etc/mail/trusted-users</tt></td>
</tr>
<tr>
  <td><tt>/etc/sendmail.oE</tt></td>
  <td><tt>/etc/mail/error-header</tt></td>
</tr>
<tr>
  <td><tt>/etc/aliases</tt></td>
  <td><tt>/etc/mail/aliases</tt></td>
</tr>
<tr>
  <td><tt>/etc/service.switch</tt></td>
  <td><tt>/etc/mail/service.switch</tt></td>
</tr>
<tr>
  <td><tt>/etc/userdb</tt></td>
  <td><tt>/etc/mail/userdb</tt></td>
</tr>
<tr>
  <td><tt>/usr/share/misc/sendmail.hf</tt></td>
  <td><tt>/etc/mail/helpfile</tt></td>
</tr>
</table>

<p>
Hay un par de maneras para convertir la vieja
configuraci&oacute;n de sendmail a la nueva, pero el primer
paso es siempre el mismo.
</p>

<ol>
<li>
Actualizar <em>/etc/rc</em> de modo que busque
<em>/etc/mail/sendmail.cf</em> en lugar de
<em>/etc/sendmail.cf</em>
</li>
<li>
<kbd>mv /etc/sendmail.cf /etc/mail/sendmail.cf</kbd><br />
&Eacute;ste es el camino que ofrece menos resistencia y no
tendr&aacute; que cambiar la ubicaci&oacute;n de ning&uacute;n
otro fichero.
</li>
<li>
O compilar un nuevo fichero .cf con su fichero de fuentes .mc.
Note que ya no necesitar&aacute; especificar la l&iacute;nea:
    <pre>include(`../m4/cf.m4')</pre>
ya que la habr&aacute; incluido 'make'.  Note tambi&eacute;n
que, a partir de ahora, cuando a&ntilde;ada m&aacute;quinas a
la clase w (mediante &quot;Cw nombredem&aacute;quina&quot;),
tendr&aacute; que hacerlo en la secci&oacute;n LOCAL_CONFIG
(vea como ejemplo <em>openbsd-lists.mc</em>).
</li>
</ol>

<a name="5.7"></a>
<h3>
5.7: Despu&eacute;s de actualizar, los n&uacute;cleos que
incluyen soporte para 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=apm&amp;apropos=0&amp;sektion=8&amp;manpath=OpenBSD+Current&amp;arch=i386&amp;format=html">apm(8)</a>
ya no arrancan
</h3>

<p>
Necesita actualizar los bloques de arranque
(<em>bootblocks</em>).  V&eacute;ase la 
<a href="faq14.html#14.8">secci&oacute;n 14.8</a> de las
preguntas frecuentes para m&aacute;s detalles.
</p>


<a name="6.0"></a>
<h2>
6.0 - C&oacute;mo actualizar desde la versi&oacute;n 2.7
</h2>

<a name="6.1"></a>
<h3>
6.1: &iquest;Cu&aacute;les son los problemas principales para
actualizar desde la versi&oacute;n 2.7 a la 2.8?
</h3>

<p>
Se produjo un cambio significativo en gcc gracias al cual es
muy f&aacute;cil generar bibliotecas <em>libc</em> de
auto-referencia.  Debido a este cambio, las actualizaciones
deben seguir el siguiente procedimiento al pie de la letra:
</p>

<ol>
<li><a href="#1.10">Eliminar restos de la
compilaci&oacute;n</a> del &aacute;rbol de fuentes, y bajarse
el c&oacute;digo de la versi&oacute;n 2.8.</li>
<li>
<p>Compilar e instalar un nuevo enlazador.  Esto
<strong>debe</strong> hacerse antes de una compilaci&oacute;n
de <em>gcc</em> completa.</p>
<pre>
  $ cd /usr/src/gnu/usr.bin/ld
  $ make clean &amp;&amp; make obj &amp;&amp; make
  $ sudo make install
</pre>
</li>
<li>Compilar e instalar el nuevo <em>gcc</em>.  Use el
procedimiento de <a href="#1.8">BOOTSTRAP</a> para acelerar el
proceso.</li>
<li>
<p>Compilar un nuevo n&uacute;cleo.  No lo instale
todav&iacute;a.</p>
<pre>
  $ cd /usr/src/sys/arch/`machine`/conf
  $ config GENERIC
  $ cd ../compile/GENERIC
  $ make clean &amp;&amp; make depend &amp;&amp; make
</pre>
</li>
<li>
<p>Debido a algunos cambios en libc, su m&aacute;quina puede
colgarse durante el inicio, a menos que el fichero
<em>/etc/resolv.conf</em> contenga la l&iacute;nea <tt>lookup
file bind</tt>.  A&ntilde;&aacute;dala si es necesario.</p>
<pre>
  # echo &quot;lookup file bind&quot; &gt;&gt; /etc/resolv.conf
</pre>
</li>
<li>
<p>Instale el nuevo n&uacute;cleo y reinicie</p>
<pre>
  # cd /usr/src/sys/arch/`machine`/compile/GENERIC
  # mv /bsd /bsd.old
  # mv bsd /bsd
  # chown root.wheel /bsd
  # shutdown -r now
</pre>
<p>
(si este paso fallara, puede recuperarlo arrancando con el
n&uacute;cleo viejo - bsd.old - desde el punto de pedido
<tt>boot&gt;</tt>)
</p>
<li>
<p>Compile e instale el nuevo make (y los archivos de
soporte).  No se salte el paso de <kbd>make depend</kbd>.</p>
<pre>
  $ cd /usr/src/usr.bin/make
  $ make clean &amp;&amp; make obj &amp;&amp; make depend &amp;&amp; make
  $ sudo make install
  $ cd /usr/src/share/mk
  $ sudo make install
</pre>
</li>
<li>
<p>Instale la &uacute;ltima versi&oacute;n de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mtree&amp;sektion=8">mtree(8)</a>
y aseg&uacute;rese que exista la estructura necesaria en el
directorio.</p>
<pre>
  $ cd /usr/src/etc/mtree
  $ sudo install -c -o root -g wheel -m 444 4.4BSD.dist /etc/mtree
  $ sudo mtree -qdef /etc/mtree/
</pre>
</li>
<li>
<p>Lleve a cabo la ejecuci&oacute;n de <kbd>make
build</kbd></p>
<pre>
  # cd /usr/src &amp;&amp; make build
</pre>
</li>
<li><a href="#1.9">Actualice <em>/etc</em>, <em>/var</em> y
<em>/dev/MAKEDEV</em></a> a mano.</li>
</ol>


<a name="7.0"></a>
<h2>
7.0 - C&oacute;mo actualizar desde la versi&oacute;n 2.8
</h2>

<a name="7.1"></a>
<h3>
7.1: El nuevo grupo auth
</h3>

<p>
Un nuevo grupo, <em>auth</em>, con gid 11, ha sido
a&ntilde;adido al sistema.  Incluya una l&iacute;nea como la
siguiente en su fichero <em>/etc/group</em>:
</p>

<pre>
  auth:*:11:
</pre>

<a name="7.2"></a>
<h3>
7.2: Nuevo sistema para consola wscons
</h3>

<p>
El controlador para consoola <em>pcvt</em> ha sido substituido
por el sistema para consola <em>wscons</em>.  Antes de poder
usar wscons debe crear los nuevos dispositivos relacionados
con wscons.  Aseg&uacute;rese de haber instalado el
&uacute;ltimo MAKEDEV y entonces compile todos los
dispositivos:
</p>

<pre>
 # cp /usr/src/etc/etc.i386/MAKEDEV /dev/MAKEDEV
 # cd /dev
 # ./MAKEDEV all
</pre>

<p>
Si va a usar X, cambie la secci&oacute;n &quot;Pointer&quot;
en su fichero de configuraci&oacute;n <em>XF86Config</em> de
modo que contenga lo siguiente:
</p>

<pre>
    Protocol    &quot;wsmouse&quot;
    Device      &quot;/dev/wsmouse&quot;
</pre>

<a name="7.3"></a>
<h3>
7.3: La compilaci&oacute;n del n&uacute;cleo falla con errores
de <em>Undefined symbol</em>
</h3>

<p>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;apropos=0&amp;sektion=8&amp;manpath=OpenBSD+Current&amp;arch=i386&amp;format=html">config(8)</a>
ha sido actualizado.  Si compila con el <em>config</em>
antiguo le dar&aacute; errores como:
</p>

<pre>
  Undefined symbol `_pdevnames_size' referenced
  Undefined symbol `_pdevnames' referenced
</pre>

<p>
Para corregirlo, compile e instale el nuevo <em>config</em>:
</p>

<pre>
  $ cd /usr/src/usr.sbin/config
  $ make clean &amp;&amp; make depend &amp;&amp; make
  $ sudo make install
</pre>
 
<p>
Ahora recompile un nuevo n&uacute;cleo como hicimos antes.
</p>


<a name="8.0"></a>
<h2>
8.0 - Actualizaci&oacute;n desde 2.9
</h2>

<a name="8.1"></a>
<h3>
8.1: Nuevos usuarios/grupos - <em>proxy</em>, <em>smmsp</em> y
<em>popa3d</em>.
</h3>

<p>
Con la adici&oacute;n del nuevo paquete de filtros de IP
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a>
y su suite
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8">ftp-proxy(8)</a>,
se a&ntilde;adieron un nuevo usuario y grupo <em>proxy</em> al
sistema.  Para el soporte de &eacute;ste debe a&ntilde;adir la
siguiente entrada de usuario usando
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8">vipw(8)</a>:
</p>

<pre>
proxy:*:71:71::0:0:Proxy Services:/nonexistent:/sbin/nologin
</pre>

<p>
Tambi&eacute;n a&ntilde;ada tambi&eacute;n el grupo
<em>proxy</em> a <em>/etc/group</em>:
</p>

<pre>
proxy:*:71:
</pre>

<p>
Adem&aacute;s, como parte de la actualizaci&oacute;n a
Sendmail 8.12, sendmail ya no tiene el <em>bit setuid
root</em>.  Un nuevo usuario y grupo, <em>smmsp</em>, han sido
a&ntilde;adidos al sistema.  A&ntilde;ada una l&iacute;nea
como la siguiente a <em>/etc/group</em>:
</p>

<pre>
smmsp:*:25:
</pre>

<p>
A continuaci&oacute;n ejecute
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8">vipw(8)</a>
y a&ntilde;ada la siguiente l&iacute;nea para el usuario
<em>smmsp</em>:
</p>

<pre>
smmsp:*:25:25::0:0:Sendmail Message Submission Program:/nonexistent:/sbin/nologin
</pre>

<p>
Aseg&uacute;rese de que esta l&iacute;nea aparezca antes de
cualquier otra l&iacute;nea de la configuraci&oacute;n sobre
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=yp&amp;sektion=8">yp(8)</a>.
</p>

<p>
Para finalizar, tambi&eacute;n se a&ntilde;adieron un nuevo
usuario y grupo para el servidor popa3d de <em>Solar
Designer</em>, que ahora forma parte integral del sistema.
A&ntilde;adia la siguiente l&iacute;nea a <em>/etc/group</em>:
</p>
 
<pre>
popa3d:*:26:
</pre> 
 
<p>
y usando
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8" >vipw(8)</a>,
a&ntilde;ada
</p>

<pre>
popa3d:*:26:26::0:0:POP3 server:/var/empty:/sbin/nologin
</pre>

<a name="8.2"></a>
<h3>
8.2: Nuevo paquete de filtros: <em>pf</em>
</h3>

<p>
El paquete de cortafuegos IPF que hab&iacute;a formado parte
de las versiones anteriores de OpenBSD ha sido reemplazado por
una suite de cortafuegos completamente nueva, llamada
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a>.
Como resultado, es necesario llevar a cabo unos cuantos
cambios.
</p>

<p>
Primero, <em>pf</em> depende de un nuevo fichero de
dispositivo.  Para asegurarse de que se crea este dispositivo
especial haga la siguiente:
</p>

<pre>
  $ cd /dev
  $ sudo cp /usr/src/etc/etc.`machine`/MAKEDEV ./
  $ sudo ./MAKEDEV all
</pre>

<p>
Segundo, han acontecido algunos cambios en el sistema de
archivos.  Los siguientes binarios han sido reemplazados:
</p>

<pre>
ANTIGUOS (IPF):
/sbin/ipf /sbin/ipfstat /sbin/ipnat /usr/sbin/ipfs
/usr/sbin/ipftest /usr/sbin/ipmon /usr/sbin/ipresend
/usr/sbin/ipsend /usr/sbin/iptest
NUEVOS (PF):
/sbin/pfctl
/usr/libexec/ftp-proxy
</pre>

<p>
De igual modo, para los dispositivos:
</p>

<pre>
ANTIGUOS (IPF): /dev/ipl /dev/ipnat /dev/ipstate /dev/ipauth
NUEVOS (PF): /dev/pf
</pre>

<p>
Y finalmente los ficheros de configuraci&oacute;n del filtro:
</p>

<pre>
ANTIGUOS (IPF): /etc/ipf.rules /etc/ipnat.rules
NUEVOS (PF): /etc/pf.conf /etc/nat.conf
</pre>

<p>
Se ha a&ntilde;adido un mecanismo para activar <em>pf</em> de
forma segura a los ficheros <em>/etc/rc</em> y
<em>/etc/rc.conf</em>.  Es necesario actualizar estos ficheros
para que incluyan el nuevo mecanismo de enganche.  Si desea
activar <em>pf</em>, configure PF=YES en
<em>/etc/rc.conf</em>.
</p>


<a name="8.3"></a>
<h3>
8.3: Cambios en <em>make</em>
</h3>

<p>
Se han producido algunos cambios en
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=make&amp;sektion=1">make(1)</a>
y en sus ficheros de datos, que pueden originar dificultades
en el proceso de compilaci&oacute;n e instalaci&oacute;n.
Estos cambios suelen manifestarse con errores de
<em>bsd.own.mk</em> durante la compilaci&oacute;n e
instalaci&oacute;n.  Para evitarlo, actualice antes los
ficheros de datos: Antes que nada actualice los ficheros de
datos:
</p>

<pre>
  $ cd /usr/src/share/mk
  $ sudo make install
</pre>

<p>
y entonces compile e installe el nuevo <em>make</em>:
</p>

<pre>
  $ cd /usr/src/usr.bin/make
  $ make clean &amp;&amp; make obj &amp;&amp; make depend &amp;&amp; make
  $ sudo make install
</pre>

<p>
Ahora siga actualizando.
</p>


<a name="8.4"></a>
<h3>
8.4: La compilaci&oacute;n falla debido a errores de KerberosV
</h3>

<p>
Antes de intentar compilar todo el sistema, debe compilar
KerberosV:
</p>

<p>
Primero, hay un nuevo directorio de configuraci&oacute;n de
KerberosV en <em>/etc</em>.  Si todav&iacute;a no lo ha hecho,
use el procedimiento de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mtree&amp;sektion=8">mtree(8)</a>
descrito en <a href="#1.13">section 1.13</a> para crearlo:
</p>
 
<p>
Ahora, compile KerberosV:
</p>

<pre>
  $ cd /usr/src/kerberosV
  $ sudo make obj
  $ cd lib/roken
  $ sudo make 
d1127 1
a1127 1
<em>login_krb<strong>4</strong>-or-pwd</em>.
d1130 1
a1130 1
<a name="8.5"></a>
d1132 1
a1132 1
8.5: Nueva versi&oacute;n de sendmail
d1147 1
d1156 1
d1168 1
d1209 1
d1221 1
d1252 1
a1252 1
<a name="8.6"></a>
d1254 1
a1254 1
8.6: Cambio en <em>/etc/primes</em>.
d1264 1
a1264 1
<a name="9.0"></a>
d1266 1
a1266 1
9.0 - Actualizaci&oacute;n desde la versi&oacute;n 3.0
d1269 1
a1269 1
<a name="9.1"></a>
d1271 1
a1271 1
9.1: Eliminaci&oacute;n de <em>libdl</em> en plataformas ELF
d1275 3
a1277 4
Las plataformas basadas en ELF (alpha, macppc y sparc64) ya no
usan <em>libdl</em>.  La actualizaci&oacute;n desde un sistema
libdl a otro no libdl se har&aacute; mejor siguiendo estos
pasos:<br>
a1279 3
<ul>
<li>
<p>Recompile su sistema:</p>
d1281 1
a1281 2
$ cd /usr/src
$ make build
d1283 15
a1297 10
</li>
<li>
<p>Si <kbd>make build</kbd> se complet&oacute; con
&eacute;xito, puede continuar y eliminar <em>libdl</em>.
N&oacute;tese que los paquetes que se hayan enlazado contra
<em>libdl</em> deber&iacute;an ser reinstalados depu&eacute;s
de eliminarlo.  Si no est&aacute; preparado para hacerlo,
puede saltarse este paso de momento.  Las versiones
preliminares (<em>snapshots</em>) traer&aacute;n paquetes
correctos.</p>
d1299 3
a1301 1
# rm -f /usr/lib/libdl.* /usr/lib/libdl_pic.a
d1303 7
a1309 4
</li>
<li>
<p>Una vez eliminado <em>libdl</em>, regenere el cach&eacute;
de sus bibliotecas compartidas:</p>
d1311 2
a1312 1
# ldconfig -R
a1313 2
</li>
</ul>
d1315 1
a1315 1
<a name="9.2"></a>
d1317 2
a1318 1
9.2: Nuevo marco de regresi&oacute;n
d1322 12
a1333 4
Se ha introducido una nueva infraestructura para pruebas de
regresi&oacute;n, y se ha a&ntilde;adido
<em>bsd.regress.mk</em>.  Tendr&aacute; que instalarlo antes
de ejecutar <kbd>make obj</kbd>.
d1337 2
a1338 1
  $ cd /usr/src/share/mk
d1341 1
a1341 1

d1343 1
a1343 1
--
d1345 5
a1349 1
<br>
d1352 4
a1355 4
Originally [OpenBSD: upgrade-minifaq.html,v 1.85 2002/01/16 20:28:05 kjell Exp ]<br />
$Translation: upgrade-minifaq.html,v 1.33 2002/01/17 21:11:49 horacio Exp $<br />
$OpenBSD$<br />
Copyright &copy; 1998-2002, Kjell Wooding.<br />
@


1.28
log
@
sync with badlands translation CVS.
@
text
@d1 1
d7 1
a7 1
<body bgcolor="#ffffff" text="#000000" link="#23238e">
d10 2
a11 2
<h2>Gu&iacute;a de actualizaci&oacute;n de OpenBSD</h2>
<h3>&Uacute;ltima versi&oacute;n de OpenBSD - 3.0</h3>
d13 8
a20 3
<h4>Kjell Wooding 
&lt;<a href="mailto:kjell@@openbsd.com">kjell@@openbsd.org</A>&gt;
</h4>
d22 1
d24 1
a24 2
Last Update - $OpenBSD: upgrade-minifaq.html,v 1.83 2002/01/10 09:42:10 reinhard Exp $

d26 10
a35 10

<blockquote>
<font size="-1">
Si alguna vez ha intentado compilar el c&oacute;digo fuente de la
&laquo;versi&oacute;n de desarrollo&raquo;, <em>-current</em>, de
alguna versi&oacute;n de OpenBSD antigua, se habr&aacute; dado cuenta
de que el proceso no siempre es f&aacute;cil.  En esta gu&iacute;a se
intentan solucionar los problemas m&aacute;s comunes que se encuentran
al actualizar entre versiones de OpenBSD, o desde las &laquo;versiones finales&raquo;, <em>-release</em>, a <em>-current</em>.
</font>
a37 1
<p>
d39 1
a39 1
<h3>1.0: Preguntas generales sobre la actualizaci&oacute;n</h3>
d41 1
d43 4
a46 5
1.1: Terminolog&iacute;a.  &iquest;Qu&eacute; es <em>-current</em>?
&iquest;Qu&eacute; son los <em>snapshots</em>?  &iquest;Qu&eacute; es
<em>-stable</em>?
</a>
<br>
d49 3
a51 4
1.2: &iquest;Cu&aacute;l es la forma m&aacute;s f&aacute;cil de
actualizar a <em>-current</em>?
</a>
<br>
d54 3
a56 4
1.3: No puedo encontrar ning&uacute;n <em>snapshot</em> en el servidor
de FTP.  &iquest;D&oacute;nde est&aacute;n?
</a>
<br>
d59 3
a61 4
1.4: &iquest;C&oacute;mo obtengo el c&oacute;digo fuente m&aacute;s
reciente?
</a>
<br>
d64 3
a66 4
1.5: Ya tengo el &aacute;rbol de fuentes, &iquest;c&oacute;mo lo
compilo?
</a>
<br>
d69 3
a71 4
1.6: 'make build' par&oacute; en la mitad del proceso, &iquest;tengo
que compilarlo todo de nuevo?
</a>
<br>
d74 3
a76 4
1.7: Me da errores durante la compilaci&oacute;n, &iquest;qu&eacute;
hago?
</a>
<br>
d80 5
a84 4
versi&oacute;n m&aacute;s nueva.  &iquest;Hay alg&uacute;n
procedimiento para el sistema de arranque?
</a>
<br>
d87 3
a89 4
1.9: &iquest;Cu&aacute;l es la mejor forma de actualizar <em>/etc</em>,
<em>/var</em>, y <em>/dev</em>?
</a>
<br>
d92 3
a94 4
1.10: &iquest;C&oacute;mo hago para eliminar todo lo sobrante de la
compilaci&oacute;n de mi &aacute;rbol de fuentes?
</a>
<br>
d97 3
a99 4
1.11: &iquest;Es necesario ser el superusuario (<em>root</em>) para
hacer un 'make build'?
</a>
<br>
d104 1
a104 2
</a>
<br>
d107 1
a107 1
1.13: &iquest;Hay alguna manera f&aacute;cil de llevar a cabo
d109 2
a110 2
</a>
<br>
d112 2
a113 1
<h3>2.0: C&oacute;mo actualizar desde la versi&oacute;n 2.3</h3>
d115 1
d117 3
a119 4
2.1: &iquest;Cu&aacute;les son los mayores problemas para actualizar
desde la 2.3 a la 2.4?
</a>
<br>
d122 3
a124 4
2.2: He intentado compilar todo, pero falla cuando intento compilar
<em>ssleay</em>.
</a>
<br>
d127 4
a130 3
2.3: He intentado compilar todo, pero 'make' falla en PowerPC.
</a>
<br>
d133 2
a134 1
<h3>3.0: C&oacute;mo actualizar desde la versi&oacute;n 2.4</h3>
d136 1
d138 3
a140 4
3.1: &iquest;Cu&aacute;les son los mayores problemas para actualizar
desde la 2.4 a la 2.5?
</a>
<br>
d144 2
a145 2
</a>
<br>
d148 1
a148 1
<h3>4.0: C&oacute;mo actualizar desde la versi&oacute;n 2.5</h3>
d150 1
d154 1
a154 2
</a>
<br>
d157 2
a158 1
4.2: &iquest;C&oacute;mo actualizo <em>gcc</em> a <em>egcs</em>?
d160 1
d163 1
a163 1
<font size="-1">
d165 8
a172 6
<code>#define</code></a><br>
<a href="#4.2.2">4.2.2 - La compilaci&oacute;n falla en xlint</a><br>
<a href="#4.2.3">4.2.3 - &laquo;Volcado de memoria&raquo; (&quot;Core
Dump&quot;) en <code>uthread_autoinit.c</code></a><br>
<a href="#4.2.4">4.2.4 - egcs parece mucho m&aacute;s lento que
gcc</a><br>
d174 5
a178 5
tama&ntilde;o que gcc</a><br>
<a href="#4.2.6">4.2.6 - Despu&eacute;s de instalar egcs, me queda muy
poco espacio en el disco</a><br>
<a href="#4.2.7">4.2.7 - La compilaci&oacute;n falla al compilar
libcurses</a><br>
d180 1
a180 1
</font>
d183 1
d185 3
a187 4
4.3: <em>make build</em> muere con errores de tipo <em>unimplemented
syscall</em>.
</a>
<br>
d191 1
a191 2
</a>
<br>
d194 3
a196 2
4.5: Despu&eacute;s de <strong>(U)</strong>pgrade (actualizar), la
extracci&oacute;n de <em>base26.tar.gz</em> falla con un mensaje.
d198 1
d200 2
a201 1
<h3>5.0 - C&oacute;mo actualizar desde la versi&oacute;n 2.6</h3>
d203 1
d206 1
a206 2
</a>
<br>
d209 4
a212 4
5.2: El n&uacute;cleo del sistema ya no reconoce mi dispositivo
<em>pn</em> (o <em>mx</em>, <em>al</em>, <em>ax</em>).
</a>
<br>
d216 1
a216 2
</a>
<br>
d220 1
a220 2
</a>
<br>
d224 1
a224 2
</a>
<br>
d228 1
a228 2
</a>
<br>
d234 2
a235 1
<br>
d237 2
a238 1
<h3>6.0 - C&oacute;mo actualizar desde la versi&oacute;n 2.7</h3>
d240 1
d245 1
a245 1
<br>
d247 2
a248 1
<h3>7.0 - C&oacute;mo actualizar desde la versi&oacute;n 2.8</h3>
d250 1
d253 1
a253 2
</a>
<br>
d257 1
a257 2
</a>
<br>
d260 2
a261 2
7.3: La compilaci&oacute;n del n&uacute;cleo falla con errores de
<em>Undefined symbol</em>
d263 1
a263 1
<br>
d265 2
a266 1
<h3>8.0 - C&oacute;mo actualizar desde la versi&oacute;n 2.9</h3>
d268 1
d270 3
a272 3
8.1: Nuevos Usuarios - <em>proxy</em> y <em>smmsp</em>
</a>
<br>
d276 1
a276 2
</a>
<br>
d280 1
a280 2
</a>
<br>
d284 1
a284 2
</a>
<br>
d288 1
a288 2
</a>
<br>
d293 5
a297 1
<br>
a299 3
<h3>9.0 - Actualizaci&oacute;n desde la versi&oacute;n
3.0</h3>

d302 1
a302 2
</a>
<br>
d304 1
d308 17
a324 1
<br>
d327 5
a331 2

&nbsp;<hr width="30%"><p>
d334 6
a339 1
<h3>1.0: Preguntas generales sobre la actualizaci&oacute;n</h3>
d342 17
a358 33
<a name="1.1"></a>
<h4>1.1: Terminolog&iacute;a. &iquest;Qu&eacute; es <em>-current</em>?
&iquest;Qu&eacute; son los <em>snapshots</em>?  &iquest;Qu&eacute; es
<em>-stable</em>?</h4>

<p>
Con anterioridad a OpenBSD 2.7, el desarrollo de OpenBSD ten&iacute;a
lugar desde un s&oacute;lo &aacute;rbol de fuentes sin ramificaciones.
A partir de la versi&oacute;n 2.7 se introdujo una ramificaci&oacute;n
de parches.

<p>
Las &laquo;versiones finales&raquo; (<em>-release</em>) de OpenBSD
se producen con intervalos aproximados de seis meses.  &Eacute;stas se
enumeran en un modo convencional (2.x).  La versi&oacute;n final actual
de OpenBSD es la 2.9.

<p>
<strong>-current</strong> es la contracci&oacute;n de
<em>openbsd-current</em> (&laquo;openbsd-actual&raquo;), la
&laquo;versi&oacute;nd de desarrollo&raquo;, se refiere a
la versi&oacute;n de &uacute;ltima hora del &aacute;rbol de fuentes
contenida en el repositorio de CVS.  &Eacute;ste es el &aacute;rbol que
usan con m&aacute;s asiduidad los desarrolladores de OpenBSD.  El
&aacute;rbol de <em>-current</em> contiene todo el c&oacute;digo que
est&aacute; planeado para el lanzamiento de la siguiente
versi&oacute;n final.  De vez en cuando, algunos valientes abandonan las
versiones oficiales y utilizan la versi&oacute;n de desarrollo,
<em>-current</em>, generalmente para aprovechar funcionalidades que
todav&iacute;a no se han implementado en las versiones finales.  Sin
embargo, debido a su naturaleza de incertidumbre, la
actualizaci&oacute;n a <em>-current</em> no es recomendable para
usuarios no t&eacute;cnicos.
d361 2
a362 2
Entre una versi&oacute;n final y otra, se ponen a disposici&oacute;n
unas revisiones llamadas 
d365 9
a373 7
&aacute;rbol de fuentes de <em>-current</em>.  Debido a que son un
reflejo del estado actual de desarrollo, no se puede garantizar que los
<em>snapshots</em> funcionen correctamente... ni siquiera que
funcionen.  Las versiones preliminares, <em>snapshots</em>, son
bastante &uacute;tiles cuando se est&aacute; actualizando desde una
versi&oacute;n final (o una versi&oacute;n de desarrollo m&aacute;s
antigua) a la del &aacute;rbol actual.
d377 9
a385 7
<a href="../../es/stable.html">ramificaci&oacute;n de parches</a>
(llamada <strong>-stable</strong>).  Esta ramificaci&oacute;n contiene
la versi&oacute;n final (<em>-release</em>) base y cualquier otro
parche o modificaci&oacute;n importante (se consideran importantes los
parches publicados en la p&aacute;gina de erratas, adem&aacute;s de
otros que son obvios y simples pero que no merecen ser mencionados en
dicha p&aacute;gina).
d396 1
a397 1
<p>
d399 4
a402 2
<h4>1.2: &iquest;Cu&aacute;l es la forma m&aacute;s f&aacute;cil de
actualizar a <em>-current</em>?</h4>
d407 5
a411 4
(<em>-current</em>) no siempre es f&aacute;cil.  La forma m&aacute;s
dif&iacute;cil de actualizar a <em>-current</em> es actualizar primero
a la revisi&oacute;n preliminar (<em>snapshot</em>) m&aacute;s reciente
(por lo general, mediante una instalaci&oacute;n por FTP).  Una vez el
d414 4
a417 3
<a href="#1.5">compilarlos</a>.  Este procedimiento deber&iacute;a
eliminar la mayor&iacute;a de problemas con las bibliotecas y las
herramientas necesarias.
a418 1
<p>
d420 4
a423 2
<h4>1.3: No puedo encontrar ning&uacute;n &quot;snapshot&quot; en el
servidor de FTP.  &iquest;D&oacute;nde est&aacute;n?</h4>
d426 5
a430 4
Los <em>snapshots</em> se sol&iacute;an retirar de los servidores de
distribuci&oacute;n justo antes del lanzamiento de una nueva
versi&oacute;n oficial.  Esto ya no forma parte de la pol&iacute;tica
de OpenBSD.
d433 6
a438 5
Los <em>snapshots</em> se pueden retirar seg&uacute;n se vayan
anticuando (o seg&uacute;n dejen de ser relevantes).  Si no hay
ning&uacute;n <em>snapshots</em> disponible, entonces debe actualizar a
la versi&oacute;n m&aacute;s reciente y compilar lo restante desde los
fuentes.
d442 4
a445 2
<h4>1.4: &iquest;C&oacute;mo obtengo los fuentes m&aacute;s
recientes?</h4>
d450 1
d453 4
a456 3
Por ejemplo, para obtener el &aacute;rbol completo mediante CVS (usando
la shell bash;  para otras, substituya <em>export</em> por
<em>setenv</em>):
a464 1
<p>
d466 3
a468 1
<h4>1.5: Ya tengo el &aacute;rbol, &iquest;c&oacute;mo lo compilo?</h4>
d471 3
a473 1
Hay unas instrucciones b&aacute;sicas en /usr/src/Makefile.
d475 1
d478 3
a480 1
<li>Limpie los ficheros objeto antiguos.
d482 3
a484 3
<p>
Si hab&iacute;a creado un directorio /usr/obj separado, l&iacute;mpielo
y reconstruya los enlaces simb&oacute;licos:
d493 1
d498 1
d507 1
d510 1
d520 1
d522 9
a530 6
<li>Lleve a cabo cualquier cambio de configuraci&oacute;n
espec&iacute;fico para la versi&oacute;n.  Por ejemplo, los usuarios de
la versi&oacute;n 2.3 deben a&ntilde;adir el usuario y el grupo
<strong>named</strong> antes de actualizar a la versi&oacute;n 2.4 o
posterior.  Lea la secci&oacute;n espec&iacute;fica para su
versi&oacute;n en este documento.
d532 6
a537 5

<li>Aseg&uacute;rese de que todos los directorios apropiados hayan sido
creados.  Esto es muy importante cuando se actualiza desde versiones
m&aacute;s antiguas, pero a veces necesario en otros casos.  La forma
m&aacute;s f&aacute;cil de hacerlo es:
d542 1
d544 2
a545 1
<li>Compile un nuevo n&uacute;cleo (&quot;kernel&quot;):
d558 5
a562 5
<strong>NOTA:</strong> los usuarios a quienes les guste sufrir
pueden compilar un n&uacute;cleo personalizado en lugar de
usar el n&uacute;cleo GENERIC.  En este caso es mejor empezar
con GENERIC e ir modific&aacute;ndolo.  Para ello haga lo
siguiente:
d572 1
a572 1
Finalmente, para todos:
d581 1
d583 2
a584 2

<li>Compile el sistema:
d590 1
d592 6
a597 5

<li>Actualice <em>/etc</em> y <em>/dev</em> a mano.  &Eacute;stos no se
actualizan de forma autom&aacute;tica.  Escoja un directorio con
espacio suficiente para <em>/</em>, <em>/dev</em>, <em>/var</em>, y
<em>/etc</em>.  En este ejemplo usar&eacute; <em>/home/newroot</em> :
d605 3
a607 3
Ahora compare los ficheros en <em>/home/newroot</em> con sus
correspondientes ya instalados.  Reemplace o actualice los ficheros
seg&uacute;n sea necesario.
d612 1
d614 4
a617 3

<li>Reinicie para asegurarse de que los nuevos ficheros en
<em>/etc</em> sean los correctos.
a619 1
<p>
d621 4
a624 2
<h4>1.6: 'make build' par&oacute; en la mitad del proceso,
&iquest;tengo que hacerlo todo de nuevo?</h4>
d627 3
a629 2
Yo lo har&iacute;a, pero si realmente quiere retomarlo desde el punto
en que se qued&oacute;, haga lo siguiente:
d636 1
d639 1
d642 10
a651 10
(cd /usr/src/share/mk &amp;&amp;  make install)
(cd /usr/src/include; make prereq;  make includes)
make cleandir
(cd /usr/src/lib &amp;&amp; make depend &amp;&amp; make &amp;&amp;   make install)
(cd /usr/src/gnu/lib &amp;&amp; make depend &amp;&amp; make &amp;&amp;   make install)
(cd /usr/src/kerberosIV/lib &amp;&amp; make depend &amp;&amp; make &amp;&amp;   make install)
(cd /usr/src/gnu/usr.bin/perl &amp;&amp;  make -f Makefile.bsd-wrapper config.sh &amp;&amp;  make
e -f Makefile.bsd-wrapper depend &amp;&amp;  make -f Makefile.bsd-wrapper perl.lib &amp;&amp;
make -f Makefile.bsd-wrapper install.lib)
make depend &amp;&amp; make &amp;&amp;  make install
d654 1
d658 1
d661 6
a666 5
Si tiene que realizar este procedimiento muchas veces, es posible que
le convenga crear un nuevo objetivo en su fichero makefile.
S&oacute;lo tiene que copiar la entrada para <em>build</em> (a
<em>build-noclean</em>, por ejemplo), y eliminar la referencia <em>make
cleandir</em>.
a667 1
<p>
d669 4
a672 2
<h4>1.7: Me da errores durante la compilaci&oacute;n,
&iquest;qu&eacute; hago?</h4>
d675 6
a680 4
Si su 'make build' finaliza con un error, es muy posible que se deba a
que no elimin&oacute; sus ficheros objeto antiguos antes de recompilar.
Lea la <a href="#1.5">secci&oacute;n 1.5</a> para m&aacute;s detalles
sobre c&oacute;mo limpiar esos ficheros.
d683 5
a687 4
Si est&aacute; seguro de que su &aacute;rbol est&aacute; limpio de
viejos restos, y a&uacute;n as&iacute; recibe un error de
compilaci&oacute;n, es que ha ocurrido una de las siguientes tres
cosas:
d690 23
a712 16
<li>Se ha encontrado con un problema de actualizaci&oacute;n conocido.
    Aseg&uacute;rese de haber leido la secci&oacute;n apropiada de este
    documento, y de haber seguido las instrucciones con cuidado.

<li>Se ha encontrado con un problema de actualizaci&oacute;n nuevo.
    Esto es lo que pasa cuando se vive peligrosamente.  Busque entre
    los mensajes m&aacute;s recientes a las listas 
    <a href="../../es/mail.html">misc@@ y tech@@</a> una posible
    soluci&oacute;n.

<li>Alguien ha &laquo;roto&raquo; temporalmente el &aacute;rbol de
    fuentes.  Esto es muy poco com&uacute;n, y por lo general se
    soluciona inmediatamente.  Espere unas pocas horas y vuelva a
    obtener el &aacute;rbol de fuentes.  Si no puede esperar, intente
    bajarse un &aacute;rbol con uno o dos d&iacute;as de
    antelaci&oacute;n.
d715 8
a722 5
Si ya ha probado todas las alternativas anteriores y su problema
persiste durante m&aacute;s de un par de d&iacute;as, env&iacute;e un
informe sobre su problema a misc@@openbsd.org.  Aseg&uacute;rese de
incluir los mensajes de error relevantes, as&iacute; como cualquier
peculiaridad de su configuraci&oacute;n.
a723 1
<p>
d725 2
a726 1
<h4>1.8: Estoy actualizando el compilador (<code>gcc</code>) a una
d728 2
a729 1
procedimiento para el sistema de arranque?</h4>
d732 6
a737 5
Debido a que la actualizaci&oacute;n de un compilador es como &laquo;el
problema del huevo y la gallina&raquo;, los cambios al compilador
original del &aacute;rbol requieren que se les preste algo m&aacute;s
de atenci&oacute;n.  Por regla general se seguir&aacute; este
procedimiento:
d741 1
d757 1
d759 1
d763 1
a775 1
<p>
d777 4
a780 2
<h4>1.9: &iquest;Cu&aacute;l es la mejor forma de actualizar
<em>/etc</em>, <em>/var</em>, y <em>/dev</em>?</h4>
d784 1
d788 1
d791 12
a802 9
Como parte de la pol&iacute;tica de OpenBSD, el <em>software</em> en el
&aacute;rbol de cvs no modifica los ficheros en <em>/etc</em> de forma
autom&aacute;tica.  Esto quiere decir que es <strong>siempre</strong>
el administrador quien debe llevar a cabo las modificaciones necesarias
a los ficheros de configuraci&oacute;n.  Las actualizaciones no
constituyen una excepci&oacute;n.  Para actualizar los ficheros en
estos directorios, primero determine qu&eacute; cambios ha sufrido los
ficheros b&aacute;sicos de la distribuci&oacute;n, y a
continuaci&oacute;n vuelva a aplicar esos cambios manualmente.
d807 1
d814 6
a819 3
Para ver todos los cambios en <em>/etc</em> entre versiones de OpenBSD
arbitrarias, puede usar <a href="../../es/anoncvs.html">CVS</a>.  Por
ejemplo, para ver los cambios acontecidos entre 2.8 y 2.9, haga:
d826 6
a831 4
Una vez que haya identificado los cambios, vuelva a aplicarlos a su
&aacute;rbol local, conservando cualquier configuraci&oacute;n a nivel
local que haya hecho Vd. anteriormente.

d834 4
a837 2
<h4>1.10: &iquest;C&oacute;mo hago para eliminar todo lo sobrante de la
compilaci&oacute;n de mi &aacute;rbol de fuentes?</h4>
d839 5
a843 3
Lo m&aacute;s importante que puede hacer es eliminar sus directorios
obj.  Una forma de actualizar el c&oacute;digo fuente y eliminar
cualquier resto de obj es:
d854 12
a865 9
Si todav&iacute;a tiene alg&uacute;n problema, puede a&ntilde;adir las
opciones <tt>-I ! -I CVS -I obj</tt> a sus actualizaciones por CVS.  De
este modo identificar&aacute; cualquier resto adicional en su
&aacute;rbol de fuentes.

<h4><a name="1.11">
1.11: &iquest;Es necesario ser el superusuario para hacer un <em>make
build</em>?
</a></h4>
d868 4
a871 4
Aunque algunos pasos del proceso <em>make build</em> requieren los
privilegios del superusuario (<em>root</em>), el proceso <em>build</em>
incluye enlaces a la orden
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&apropos=0&sektion=8&manpath=OpenBSD+Current&arch=i386&format=html">sudo(8)</a>
d877 2
a878 1
configurado, puede usar los enlaces de sudo de la siguiente forma:
d882 8
a889 4
<li>Ponga SUDO=/usr/bin/sudo en su fichero de entorno antes de iniciar
el proceso <em>build</em>, o
<li>A&ntilde;ada la l&iacute;nea &quot;SUDO=/usr/bin/sudo&quot; a su
fichero <em>/etc/mk.conf</em>.
d892 3
a894 2
<h4><a name="1.12">
1.12: &iquest;Por que&eacute; no veo ning&uacute;n dispositivo
d896 1
a896 1
</a></h4>
d898 1
d901 4
a904 3
build</kbd>.  Como regla general, es recomendable copiar
este gui&oacute;n desde su &aacute;rbol de fuentes cuando
lleve a cabo una actualizaci&oacute;n, y ejecutarlo a mano.
d912 3
a914 2
<h4><a name="1.13">
1.13: &iquest;Hay alguna manera f&aacute;cil de llevar a cabo
d916 1
a916 1
</a></h4>
d918 1
d925 2
a926 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mtree&sektion=8">mtree(8)</a>.
d931 1
d940 1
d943 2
d946 4
a949 2
<p>
<h3>2.0: C&oacute;mo actualizar desde la Versi&oacute;n 2.3</h3>
a950 1
<p>
d952 4
a955 2
<h4>2.1: &iquest;Cu&aacute;les son los mayores problemas para
actualizar desde la 2.3 a la 2.4?</h4>
a956 1
<p>
d966 1
d969 4
a972 2
A&ntilde;ada la siguiente entrada a /etc/passwd, usando
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&sektion=8">vipw(8)</a>:
d978 3
a980 1
A&ntilde;ada lo siguiente a /etc/group:
a985 1
<p>
d987 4
a990 2
<h4>2.2: He intentado compilar todo, pero falla cuando intento compilar
<em>ssleay</em>.</h4>
d993 3
a995 2
Probablemente le falte una entrada para el usuario <em>named</em> en el
fichero de la contrase&ntilde;a.
d999 1
d1003 1
d1007 1
d1010 7
a1016 5
El usuario <em>named</em> es necesario para configurar correctamente
los permisos.  Si este usuario faltara, parte del proceso de
compilaci&oacute;n fallar&iacute;a.  Si hiciera una captura de pantalla
de su compilaci&oacute;n de un fichero (por ejemplo, con <em>make build
&amp;&gt;/tmp/build.log</em>), notar&iacute;a el siguiente mensaje:
d1028 1
d1030 3
a1032 2
continuar&iacute;a felizmente su camino, ignorando completamente el
hecho de que ha ocurrido un error.
d1035 3
a1037 2
Si el usuario <em>named</em> existiera, mtree funcionar&iacute;a
correctamente:
d1060 6
a1065 3
En este caso, la raz&oacute;n de que fallara ser&iacute;a que el
directorio <em>/usr/include/ssl</em> nunca fue creado.  Sin los ficheros
de cabeceras, la compilaci&oacute;n de <em>ssleay</em> fallar&iacute;a.
d1069 1
d1073 4
a1076 3
<em>/usr/include/ssl</em>, <em>/var/named</em>, y cualquier otro
directorio de la lista anterior que hubiera sido creado por error como
un fichero normal por 'make build'.
a1077 1
<p>
d1079 4
a1082 2
<h4>2.3: He intentado compilar todo, pero 'make' falla para
PowerPC.</h4>
d1085 3
a1087 2
Su &aacute;rbol del directorio es incompleto.  En concreto, falta el
directorio <em>/usr/share/man/cat4/powerpc</em>.
d1091 1
d1095 1
d1099 1
d1103 1
d1109 1
d1111 1
d1137 5
a1141 2
Note que <em>/usr/share/man/cat4/powerpc</em> es uno de los directorios
creados por este proceso.
d1143 4
a1146 2
<p>
<h3>3.0: C&oacute;mo actualizar desde la Versi&oacute;n 2.4</h3>
a1147 1
<p>
d1149 4
a1152 2
<h4>3.1: &iquest;Cu&aacute;les son los mayores problemas para
actualizar desde la 2.4 a la 2.5?</h4>
d1154 1
a1154 2
<p>
<h4>cap_mkdb</h4>
d1157 4
a1160 3
La sintaxis para invocar <em>cap_mkdb</em> ha cambiado ligeramente.
Antes de hacer un 'make build', recompile <em>cap_mkdb</em> desde los
fuentes m&aacute;s recientes:
d1167 4
a1170 2
Y 'make build' deber&iacute;a seguir el proceso hasta que estuviera
completo.
d1172 1
a1172 3
<p>
<h4>Cambios en las p&aacute;ginas de manual (&quot;man
pages&quot;)</h4>
d1175 5
a1179 4
Varias p&aacute;ginas de manual se cambiaron desde la secci&oacute;n 1
a secciones posteriores.  Desafortunadamente, si las p&aacute;ginas de
manual viejas se dejan en la secci&oacute;n 1, los usuarios que no lo
sepan no podr&aacute;n ver las &uacute;ltimas versiones de las
d1181 1
d1185 1
d1193 1
a1193 2
<p>
<h4>Snake</h4>
d1196 3
a1198 2
Tiene que eliminar el contenido del directorio <em>obj/</em> antes de
actualizar <code>/usr/src/games/snake</code>.
a1223 2
<p>
<h3>4.0: C&oacute;mo actualizar desde la Versi&oacute;n 2.5</h3>
d1225 5
a1229 1
<p>
d1231 4
a1234 2
<h4>4.1: &iquest;Cu&aacute;les son los mayores problemas para
actualizar desde la 2.5 a la 2.6?</h4>
a1235 1
<p>
d1239 5
a1243 3
La &uacute;ltima versi&oacute;n de Perl (5.005_03) requiere una nueva
versi&oacute;n de <em>make</em> para compilar correctamente.  Debe
recompilar make antes de compilar el nuevo Perl.  Haga lo siguiente:
d1251 4
a1254 3
Ahora contin&uacute;e y recompile el nuevo Perl.  Necesitar&aacute;
limpiar el directorio <code>obj</code> de Perl a mano antes de
compilar.
d1259 1
d1263 1
a1290 1
</p>
d1292 2
a1293 2
<p>
<h5>Cambio del compilador: <em>egcs</em> reemplaza a <em>gcc</em></h5>
d1299 1
d1301 2
a1302 2
<p>
<h5>Cambio en la estructura del n&uacute;cleo -<em>statfs</em></h5>
d1305 4
a1308 3
La estructura <tt>statfs</tt> ha cambiado desde el 31 de mayo.  Debe
recompilar el n&uacute;cleo de su sistema antes de intentar un 'make
build'.  Lea la <a href="#4.3">secci&oacute;n 4.3</a> para m&aacute;s
d1310 1
d1314 4
a1317 2
<h4>4.2: &iquest;C&oacute;mo actualizo <em>gcc</em> a
<em>egcs</em>?</h4>
d1321 5
a1325 3
reciente, en cuanto haya uno disponible.  <strong>&iexcl;Busque un
<em>snapshot</em> primero!</strong>.  Arrancar el compilador nuevo
desde el viejo deber&iacute;a ser el <em>&uacute;ltimo recurso</em>.
d1328 5
a1332 3
Antes que nada, le avisamos que en algunas plataformas el mecanismo de
arranque todav&iacute;a no es perfecto.  Hasta la fecha, deber&iacute;a
funcionar en las siguientes, si lleva cuidado:
d1335 4
a1338 4
<li><strong>i386</strong>
<li><strong>sparc</strong>
<li><strong>m68k</strong>
<li><strong>alpha</strong>
a1339 1
Hay problemas con <strong>mips</strong> y <strong>rs6000</strong>.
d1342 21
a1362 14
Para probar si su plataforma puede arrancar desde el disco, instale
<em>egcs-snapshot</em>, que se encuentra disponible en la 
<a href="../../es/ports.html">colecci&oacute;n de portes</a>.  Si
funciona, la versi&oacute;n del &aacute;rbol tambi&eacute;n lo
har&aacute;.  &Eacute;ste es el m&eacute;todo <em>m&acute;s seguro</em>
para proceder.

<p>
Antes de continuar, aseg&uacute;rese de que las copias que tenga de
<em>binutils</em>, <em>gas</em>, y <em>ld</em> est&eacute;n
actualizadas.  Recuerde que existen dos copias de <em>gas</em> y
<em>ld</em> en el &aacute;rbol.  En <strong>i386</strong> y
<strong>sparc</strong>, no se usan las versiones de <em>binutils</em>.
Debe usar en su lugar <tt>/usr/src/gnu/usr.bin/gas</tt> y
d1364 1
d1367 8
a1374 7
Las siguientes instrucciones se refieren al <em>snapshot</em> original
de egcs (egcs-990517).  Desde entonces existe en el &aacute;rbol un
segundo <em>snapshot</em> (egcs-990608).  Si viene de la versi&oacute;n
&quot;vainilla&quot; 2.5, es muy probable que no pueda compilar la
&uacute;ltima versi&oacute;n directamente.  En este caso tendr&aacute;
que arrancar con una versi&oacute;n intermedia siguiendo estas
instrucciones:
d1378 1
d1518 1
d1520 6
a1525 5
compilar&aacute;.  Sin embargo, la soluci&oacute;n es simple.  Ejecute
<code>make &amp;&amp; make install</code> en el directorio
<code>/usr/src/usr.bin/xlint/xlint</code> antes de ejecutar <code>make
build</code> y proceda.  Vea la <a href="#4.2.2">secci&oacute;n
4.2.2</a>.]
d1555 6
a1560 4
Si pas&oacute; este procedimiento y todav&iacute;a funciona todo,
felicidades.  Si no, busque consejo en las siguientes secciones.  Los
problemas que no aparezcan aqu&iacute; se deben enviar a
tech@@openbsd.org.
a1561 1
<p>
d1563 4
a1566 2
<h5>4.2.1 - <tt>i386</tt> y <tt>sparc</tt> ya no usan
<tt>#define</tt></h5>
d1570 5
a1574 4
<tt>__sparc__</tt> que son de c&oacute;digo m&aacute;s limpio.  Si
necesita compilar c&oacute;digo que dependa en los viejos define,
a&ntilde;ada <tt>-Dsparc</tt> o <tt>-Di386</tt> a la ubicaci&oacute;n
apropiada del fichero Makefile.
a1575 1
<p>
d1577 3
a1579 1
<h5>4.2.2 - La compilaci&oacute;n falla en xlint</h5>
d1584 3
a1586 1
<em>cap_mkdb</em> descrito en la <a href="#3.1">secci&oacute;n 3.1</a>.
d1590 1
d1597 4
a1600 2
ahora vuelva a ejecutar 'make', y la compilaci&oacute;n deber&iacute;a
continuar.
a1601 1
<p>
d1603 4
a1606 2
<h5>4.2.3 - &laquo;Volcado de Memoria&raquo; (&quot;Core Dump&quot;) en
<tt>uthread_autoinit.c</tt></h5>
d1608 4
a1611 2
Ha sido v&iacute;ctima de un error del enlazador.  He aqu&iacute; un
mensaje de relevancia:
a1642 1
<p>
d1644 4
a1647 2
<h5>4.2.4 - <i>egcs</i> parece mucho m&aacute;s lento que
<em>gcc</em></h5>
d1650 5
a1654 4
Lo es, pero existe un motivo.  <em>egcs</em> act&uacute;a optimizando
m&aacute;s pases.  La alineaci&oacute;n de los datos y otras
funcionalidades semejantes mejorar&aacute;n el c&oacute;digo generado
por <em>egcs</em>.
a1655 1
<p>
d1657 4
a1660 2
<h5>4.2.5 - <em>egcs</em> genera c&oacute;digo de mayor tama&ntilde;o
<em>gcc</em></h5>
d1663 6
a1668 4
S&iacute;, lo hace.  Esto se nota especialmente con el viejo conmutador
<tt>-O2</tt> de <em>gcc</em>.  <em>egcs</em> introduce una nueva
opci&oacute;n, <tt>-Os</tt>, que optimiza el espacio.  Estos es
comparable a grandes rasgos con el viejo comportamiento <tt>-O2</tt>.
a1669 1
<p>
d1671 4
a1674 2
<h5>4.2.6 - Despu&eacute;s de instalar <em>egcs</em>, me queda muy poco
espacio en el disco</h5>
d1677 8
a1684 6
<em>egcs</em> se instala en un subdirectorio distinto al de gcc 2.8.1.
Una vez que egcs haya arrancado y funcione, puede eliminar
<em>gcc</em>.  (a prop&oacute;posito de esto, los cambios en perl
mencionados en la <a href="#4.1">secci&oacute;n 4.1</a> significan que
puede eliminar el directorio <tt>/usr/lib/perl5</tt>.  La nueva
ubicaci&oacute;n para estos datos es <tt>/usr/libdata/perl5</tt>).
a1685 1
<p>
d1687 3
a1689 1
<h5>4.2.7 - La compilaci&oacute;n falla al compilar libcurses</h5>
d1692 5
a1696 3
<em>libcurses</em> se apoya ahora en la &uacute;ltima versi&oacute;n de
<em>cpp</em>.  Obtenga la &uacute;ltima versi&oacute;n, recompile
<em>cpp</em>, y contin&uacute;e.  Por ejemplo:
d1702 1
d1704 1
a1705 1
<p>
d1707 3
a1709 1
<h5>4.2.8 - 'make obj' falla</h5>
d1712 6
a1717 3
Si <em>make obj</em> falla, nombrando errores en un Makefile, los
include de makefile es posible que est&eacute;n obsoletos.  Por
ejemplo:
d1728 4
a1731 1
Esto se puede resolver recompilando los ficheros include de makefile:
d1737 1
d1739 2
a1741 1
<p>
d1743 4
a1746 2
<h4>4.3: <em>make build</em> muere con errores de tipo
<em>unimplemented syscall</em></h4>
d1750 1
d1753 4
a1756 2
La estructura <tt>statfs</tt> del n&uacute;cleo ha cambiado.  Necesita
recompilar el n&uacute;cleo antes de intentar un <em>make build</em>.
d1760 1
d1763 4
a1766 2
La estructura <tt>statfs</tt> del n&uacute;cleo ha cambiado.  La nueva
<tt>struct statfs</tt> tiene las siguientes funcionalidades:
d1769 24
a1792 18
<li>Tiene un campo de indicadores <tt>u_int32_t</tt> (ahora softdep
    puede tener un indicador real).

<li>Usa <tt>u_int32_t</tt> en lugar de largos (mejor en alpha).
    Nota: la p&aacute;gina de manual ment&iacute;a sobre configurar
    campos inv&aacute;lidos o no usados a -1.  SunOS lo hace, pero
    nuestro c&oacute;digo nunca lo ha hecho.

<li>Se libera totalmente de <tt>f_type</tt>.
    No se ha usado desde NetBSD 0.9, y tenerlo ah&iacute; siempre crea
    confusi&oacute;n.  Es comprensible que esto pueda ser la causa de
    que alg&uacute;n viejo c&oacute;digo no compile, pero eso es mejor
    a que se rompa en silencio.

<li>A&ntilde;ade una uni&oacute;n <tt>mount_info</tt> que contiene la
    estructura <tt>FSTYPE_args</tt>.  Esto quiere decir que ahora
    <em>mount</em> le puede indicar todas las opciones que tenga un
    sistema de archivo montado.  Esto es especialmente bueno para NFS.
d1795 1
d1797 1
d1800 19
a1818 14
<li>La emulaci&oacute;n de statfs de Linux no convert&iacute;a entre
    nombres de sistema de archivo de BSD y n&uacute;meros
    <tt>f_type</tt> de Linux.  Ahora lo hace, ya que el n&uacute;mero
    <tt>f_type</tt> de BSD es in&uacute;til para las aplicaciones de
    Linux (y de todos modos ha sido eliminado).

<li>La estructura statfs de FreeBSD es diferencte de la nuestra (tanto
    la vieja como la nueva) y por lo tanto necesita conversi&oacute;n.
    Anteriormente, los syscalls de OpenBSD se usaban sin ninguna
    traducci&oacute;n real.

<li>Ahora <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount&apropos=0&sektion=8&manpath=OpenBSD+Current&arch=i386&format=html">mount(8)</a> mostrar&aacute; informaci&oacute;n adicional
    cuando se invoque sin argumentos.  Sin embargo, para verlo
    <em>todo</em> necesitar&aacute; usar el indicador -v (verbosidad).
d1821 1
a1821 1
<p>
d1823 3
a1825 1
<h4>4.4: Enlace al nuevo directorio 2.6</h4>
d1828 2
a1829 2
Cuando actualice a la versi&oacute;n 2.6 necesitar&aacute; crear un
enlace simb&oacute;lico para gcc.
d1837 1
a1837 1
<p>
d1839 5
a1843 2
<h4>4.5: Despu&eacute;s de <strong>(U)</strong>pgrade (actualizar), la
extracci&oacute;n de <em>base26.tar.gz</em> falla con un mensaje:</h4>
d1846 2
a1847 2
<em>tar: Unable to remove directory ./usr/include/machine &lt;Directory
not empty&gt;</em>
d1851 4
a1854 4
En la versi&oacute;n 2.5 <tt>/usr/include/machine</tt> era un
directorio, y <tt>/usr/include/i386</tt> era un enlace a ese
directorio.  En la versi&oacute;n 2.6 esta situaci&oacute;n se ha
revertido.
d1858 3
a1860 2
Para corregir el problema, escape a la shell, elimine el directorio
<tt>/usr/include/machine</tt>, y vuelva a intentar actualizar.
d1863 1
a1863 1
<p>
d1865 3
a1867 2
<h3>5.0 - C&oacute;mo actualizar desde la versi&oacute;n 2.6</h3>
</p>
a1868 1
<p>
d1870 3
a1872 1
<h4>5.1: Las entradas de termcap son demasiado largas</h4>
d1875 8
a1882 8
Existe un nuevo fichero <tt>termcaps.master</tt>.  Necesitar&aacute;
regenerar los ficheros <tt>terminfo</tt> y <tt>termcaps</tt> con la
versi&oacute;n actual de 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tic&apropos=0&sektion=1&manpath=OpenBSD+Current&arch=i386&format=html">tic(1)</a>.
Si est&aacute; actualizando a trav&eacute;s de <em>make build</em>, se
usar&aacute; la versi&oacute;n correcta de tic(1) y regenerar&aacute;
los ficheros por usted.  En caso contrario, ver&aacute; el siguiente
error:
d1890 4
a1893 3
En tal caso, debe recompilar e instalar tic(1) (asegur&aacute;ndose de
utilizar la versi&oacute;n actual de <tt>libcurses</tt>), o simplemente
compilar la versi&oacute;n de tic(1) en su &aacute;rbol de fuentes.
a1895 1
<p>
d1897 5
a1901 2
<h4>5.2: El n&uacute;cleo del sistema ya no reconoce mi dispositivo
<em>pn</em> (o <em>mx</em>, <em>al</em>, <em>ax</em>)</h4>
d1904 4
a1907 4
(Nota: en algunas partes de esta secci&oacute;n se usa s&oacute;lo
<em>pn</em> para simplificar.  La informaci&oacute;n es igualmente
aplicable a <em>pn</em>, <em>mx</em>, <em>al</em>, o <em>ax</em>,
seg&uacute;n el caso)
d1911 5
a1915 4
Estos cuatro controladores han sido substituidos por el controlador
unificado <em>dc</em>.  Debe cambiar cualquier menci&oacute;n a
<em>pn*</em>, <em>mx</em>, <em>al</em>, o <em>ax</em> en sus ficheros
de configuraci&oacute;n.  Esto incluye:
d1919 17
a1935 8
<li>Actualizar el/los fichero/s de configuraci&oacute;n del
    n&uacute;cleo (ayuda: empiece con un n&uacute;cleo GENERIC nuevo y
    modif&iacute;quelo).
<li>Mover <tt>/etc/hostname.pn*</tt> a <tt>/etc/hostname.dc*</tt>
<li>Actualizar su fichero <tt>/etc/ifaliases</tt>
<li>Realizar cambios en <tt>/etc/ipnat.rules</tt> y
    <tt>/etc/ipf.rules</tt> para que reflejen el nuevo nombre de la
    interfaz.
d1940 3
a1942 2
aseg&uacute;rese de haber incluido el dispositivo <em>dcphy</em> en la
configuraci&oacute;n del n&uacute;cleo, de la siguiente forma:
d1946 1
a1946 1
dcphy*  at mii? phy ?                   # PHYs Cl&oacute;nicos de Digital
d1950 2
a1951 1
Mientras est&aacute; en ello, tambi&eacute;n puede a&ntilde;adir:
d1955 1
a1955 1
ukphy*  at mii? phy ?                   # PHYs &quot;desconocidos&quot;
a1957 1
<p>
d1959 3
a1961 1
<h4>5.3: Actualizaci&oacute;n de gcc 2.95.1 a 2.95.2</h4>
d1964 6
a1969 5
<em>gcc</em> 2.95.2 se fusion&oacute; en el &aacute;rbol de fuentes de
OpenBSD alrededor del 19 de enero de 2.000.  Para que <em>gcc</em>
compile correctamente, se requiere una versi&oacute;n m&aacute;s
reciente de la biblioteca <em>libiberty</em> (post 2.6).  Para compilar
esta biblioteca, haga lo siguiente:
d1980 5
a1984 3
NOTA:  En las arquitecturas basadas en mips, como pmax, debe llevar a
cabo un <em>ldconfig</em> expl&iacute;cito despu&eacute;s de compilar
las nuevas bibliotecas.
d1987 2
a1988 2
Una vez compilada <em>libiberty</em>, puede proceder con un arranque
t&iacute;pico de <em>gcc</em>:
a2001 1
<p>
d2003 1
a2003 1
<h4>5.4: Actualizaci&oacute;n de Kerberos</h4>
d2006 3
a2008 2
Para que Kerberos IV compile correctamente, necesita seguir estas
instrucciones:
d2011 3
a2013 3
<li>Obtener y compilar la &uacute;ltima versi&oacute;n de
    <tt>usr.bin/compile_et</tt>.

d2018 4
a2021 4

<li>Obtener y compilar la &uacute;ltima versi&oacute;n de
    <tt>lib/libcom_err</tt>.

d2026 3
a2028 3

<li>Limpie y reinstale los ficheros cabecera de Kerberos:

d2034 3
a2036 3

<li>Ahora recompile los ficheros biblioteca de Kerberos:

d2041 4
a2044 4

<li>Si no va a llevar a cabo un <kbd>make build</kbd> completo,
recompile Kerberos:

d2049 3
a2051 2

<li>De otro modo, no tiene m&aacute;s que reiniciar 'make builld'.
a2052 1
</p>
a2053 1
<p>
d2055 3
a2057 1
<h4>5.5: Actualizaci&oacute;n de M4</h4>
d2060 6
a2065 4
La versi&oacute;n de m4 incluida en OpenBSD 2.6 se engancha en un bucle
infinito mientras procesa los ficheros .mc de sendmail en ficheros .cf.
Debido a esto, necesitar&aacute; instalar la nueva versi&oacute;n de m4
<strong>antes</strong> de intentar un 'make build'.  En otras palabras:
a2070 1
</p>
a2071 1
<p>
d2073 3
a2075 1
<h4>5.6: Actualizaci&oacute;n de Sendmail</h4>
d2078 5
a2082 4
En sendmail 8.10.X, las ubicaciones (y nombres) de los ficheros de
configuraci&oacute;n de sendmail han cambiado.  Ahora todo, excepto el
fichero pid, se encuentra en /etc/mail.  Adem&aacute;s, varios ficheros
han cambiado de nombre.
d2125 3
a2127 2
Hay un par de maneras para convertir la vieja configuraci&oacute;n de
sendmail a la nueva, pero el primer paso es siempre el mismo.
d2131 14
a2144 12
<li>Actualizar <tt>/etc/rc</tt> de modo que busque
    <tt>/etc/mail/sendmail.cf</tt> en lugar de
    <tt>/etc/sendmail.cf</tt>

<li><tt>mv /etc/sendmail.cf /etc/mail/sendmail.cf</tt><br>
    &Eacute;ste es el camino que ofrece menos resistencia y no
    tendr&aacute; que cambiar la ubicaci&oacute;n de ning&uacute;n otro
    fichero.

<li>O compilar un nuevo fichero .cf con su fichero de fuentes .mc.
    Note que ya no necesitar&aacute; especificar la l&iacute;nea:

d2146 6
a2151 6

    ya que la habr&aacute; incluido 'make'.  Note tambi&eacute;n que, a
    partir de ahora, cuando a&ntilde;ada m&aacute;quinas a la clase w
    (mediante &quot;Cw nombredem&aacute;quina&quot;), tendr&aacute; que
    hacerlo en la secci&oacute;n LOCAL_CONFIG (vea como ejemplo
    <tt>openbsd-lists.mc</tt>).
a2153 1
<p>
d2155 6
a2160 4
<h4>5.7: Despu&eacute;s de actualizar, los n&uacute;cleos que incluyen
soporte para 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=apm&apropos=0&sektion=8&manpath=OpenBSD+Current&arch=i386&format=html">apm(8)</a>
ya no arrancan</h4>
d2162 6
a2167 4
Necesita actualizar los &laquo;bloques de arranque&raquo;
(&quot;bootblocks&quot;).  Ver la 
<a href="faq14.html#14.8">secci&oacute;n 14.8</a> de las preguntas
frecuentes para m&aacute;s detalles.
d2170 4
a2173 2
<h3><a name="6.0"></a>
6.0 - C&oacute;mo actualizar desde la versi&oacute;n 2.7</h3>
d2175 2
a2176 1
<h4><a name="6.1">
d2178 2
a2179 1
actualizar desde la versi&oacute;n 2.7 a la 2.8?</a></h4>
d2182 5
a2186 4
Se produjo un cambio significativo en gcc gracias al cual es muy
f&aacute;cil generar bibliotecas <em>libc</em> de auto-referencia.  A
causa de este cambio, las actualizaciones deben seguir el siguiente
procedimiento al pie de la letra:
d2189 7
a2195 7
<li><a href="#1.10">Eliminar restos de la compilaci&oacute;n</a> del
    &aacute;rbol de fuentes, y bajarse el c&oacute;digo de la
    versi&oacute;n 2.8.

<p>
<li>Compilar e instalar un nuevo enlazador.  Esto <strong>debe</strong>
    hacerse antes de una compilaci&oacute;n de <em>gcc</em> completa.
d2201 7
a2207 7

<p>
<li>Compilar e instalar el nuevo <em>gcc</em>.  Use el procedimiento de
    <a href="#1.8">BOOTSTRAP</a> para acelerar el proceso.

<p>
<li>Compilar un nuevo n&uacute;cleo.  No lo instale todav&iacute;a.
d2214 6
a2219 6

<p>
<li>Debido a algunos cambios en libc, su m&aacute;quina puede colgarse
    durante el inicio, a menos que su <tt>/etc/resolv.conf</tt>
    contenga la l&iacute;nea <em>lookup file bind</em>.
    A&ntilde;&aacute;la si es necesario.
d2223 3
a2225 3

<p>
<li>Instale el nuevo n&uacute;cleo y reinicie
d2233 1
d2237 4
a2240 4

<p>
<li>Compile e instale el nuevo make (y los archivos de soporte).
    No se salte el paso de <tt>make depend</tt>.
d2248 4
a2251 4

<p>
<li>Instale el &uacute;ltimo
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mtree&sektion=8">mtree(8)</a>
d2253 1
a2253 2
directorio.

d2259 4
a2262 3

<p>
<li>Lleve a cabo el make build
d2266 3
a2268 4

<p>
<li><a href="#1.9">Actualice <tt>/etc</tt>, <tt>/var</tt> y
    <tt>/dev/MAKEDEV</tt></a> a mano.
d2273 3
a2275 1
<h3>7.0 - C&oacute;mo actualizar desde la versi&oacute;n 2.8</h3>
d2278 9
a2286 1
<h4>7.1: El nuevo grupo auth</h4>
a2287 3
Un nuevo grupo, <em>auth</em>, con gid 11, ha sido a&ntilde;adido al
sistema.  Incluya una l&iacute;nea como la siguiente en su fichero
<tt>/etc/group</tt>:
d2292 2
a2293 1
<h4><a name="7.2"></a>
d2295 1
a2295 1
</h4>
d2297 8
a2304 5
El controlador para consoola <em>pcvt</em> ha sido substituido por el
sistema para consola <em>wscons</em>.  Antes de poder usar wscons debe
crear los nuevos dispositivos relacionados con wscons.
Aseg&uacute;rese de haber instalado el &uacute;ltimo MAKEDEV y entonces
compile todos los dispositivos:
d2312 5
a2316 3
Si va a usar X, cambie la secci&oacute;n &quot;Pointer&quot; en su
fichero de configuraci&oacute;n <em>XF86Config</em> de modo que
contenga lo siguiente:
d2324 4
a2327 2
<h4>7.3: La compilaci&oacute;n del n&uacute;cleo falla con errores de
<em>Undefined symbol</em></h4>
d2329 5
a2333 3
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&apropos=0&sektion=8&manpath=OpenBSD+Current&arch=i386&format=html">config(8)</a>
ha sido actualizado.  Si compila con el <em>config</em> antiguo
le dar&aacute; errores como:
d2340 1
d2342 1
d2350 1
d2352 2
d2355 2
a2356 1
<h3><a name="8.0"></a>
d2358 6
a2365 4
<h4><a name="8.1">
8.1: Nuevos usuarios - <em>proxy</em> y <em>smmsp</em>.
</a></h4>

d2368 1
a2368 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>
d2370 1
a2370 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&sektion=8">ftp-proxy(8)</a>,
d2374 2
a2375 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&sektion=8">vipw(8)</a>:
d2384 1
d2396 1
d2404 1
a2404 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&sektion=8">vipw(8)</a>
d2407 1
d2415 20
a2434 2
cualquier l&iacute;nea sobre
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=yp&sektion=8">yp(8)</a>.
d2436 3
d2440 2
a2441 1
<h4><a name="8.2">
d2443 1
a2443 1
</a></h4>
d2449 1
a2449 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>.
d2452 1
d2458 1
d2466 1
d2469 1
d2481 1
d2483 2
d2490 1
d2492 1
d2506 1
d2508 3
a2510 1
<h4><a name="8.3">
d2512 1
a2512 1
</a></h4>
d2514 1
d2516 1
a2516 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=make&sektion=1">make(1)</a>
d2524 1
d2531 1
d2533 1
d2541 1
d2543 1
d2545 3
a2547 1
<h4><a name="8.4">
d2549 1
a2549 1
</a></h4>
d2554 1
d2560 1
a2560 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mtree&sektion=8">mtree(8)</a>
d2562 1
d2566 1
d2578 1
d2580 2
a2581 2
<em>/etc/login.conf</em> para indicar que el nombre del fichero
<em>/usr/libexec/auth/login_krb-or-pwd</em> ahora es
d2583 1
d2585 2
a2586 1
<h4><a name="8.5">
d2588 1
a2588 1
</a></h4>
d2591 4
a2594 5
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendmail&sektion=8">sendmail(8)</a>
ha sido actualizado a la versi&oacute;n 8.12.  Como a
partir de esta versi&oacute;n, sendmail ya no ejecuta
<em>setuid root</em>, existen algunos cambios muy
significativos.
a2601 1

d2607 1
a2607 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mtree&sektion=8">mtree(8)</a>
d2610 3
a2612 3

<li>A&ntilde;ada lo siguiente al fichero
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=crontab&sektion=1">crontab(1)</a>
d2615 1
a2615 2
para hacer parte de su funci&oacute;n:

d2621 2
a2622 3

<li>Actualice sendmail:

a2626 1

d2645 1
a2645 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=smtpd&sektion=8">smtpd(8)</a>
a2651 1

d2661 2
a2662 2

<li>Si utiliza sendmail sin la opci&oacute;n <kbd>-bd</kbd> en
d2666 1
a2666 2
fichero <em>rc.conf</em> para a&ntilde;adir lo siguiente:

a2671 1

d2673 1
a2673 1
En cuanto est&eacute; preparado su fichero de
d2675 2
a2676 3
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kill&sektion=1">kill(1)</a>
para acabar con el proceso existente de sendmail:

d2680 2
a2681 4

y reinicie el nuevo sendmail con las opciones apropiadas, como
por ejemplo:

d2685 2
a2686 5

+for a configuration accepting mail from outside, or
para una configuraci&oacute;n que acepte correo desde el
exterior, o:

d2690 4
a2693 7

para una configuraci&oacute;n que s&oacute;lo acepte correo
interno.

<p>
<strong>Nota:</strong> el indicador <kbd>-bd</kbd> es ahora
necesario en ambos casos.
d2697 1
d2700 1
d2702 2
a2703 1
<h4><a name="8.6">
d2705 1
a2705 1
</a></h4>
d2709 2
a2710 2
<em>/etc/moduli</em>.  S&oacute;lo tiene que copiarlo desde
su antigua ubicaci&oacute;n o desde <em>/usr/src/etc/</em>.
d2714 2
a2715 1
<h3><a name="9.0"></a>
d2717 1
a2717 1
</h3>
d2719 2
a2720 1
<h4><a name="9.1">
d2722 1
a2722 1
</a></h4>
d2724 1
d2729 1
d2732 2
a2733 2
</pre>
<li>Recompile su sistema:
d2738 3
a2740 2

<li>Si <kbd>make build</kbd> se complet&oacute; con
d2747 1
a2747 1
correctos.
d2751 4
a2754 3

<li>Una vez eliminado <em>libdl</em>, regenere el cach&eacute;
de sus bibliotecas compartidas:
d2758 1
a2758 1

d2761 2
a2762 1
<h4><a name="9.2">
d2764 1
a2764 1
</a></h4>
a2778 1
<font size="-1">
d2780 1
d2782 11
a2792 3
Originally [OpenBSD: upgrade-minifaq.html,v 1.83 2002/01/10 09:42:10 reinhard Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.31 2002/01/10 16:51:15 horacio Exp $<br>
$OpenBSD$
a2793 6
<br>
Copyright &copy; 1998-2001, Kjell Wooding.
<br>
Por favor, env&iacute;e cualquier comentario, pregunta o sugerencia a
<a href="mailto:kjell@@openbsd.org">kjell@@openbsd.org</a>
</font>
@


1.27
log
@
sync with badlands translation CVS
@
text
@d17 1
a17 1
Last Update - $OpenBSD: upgrade-minifaq.html,v 1.81 2001/12/31 00:32:07 horacio Exp $
d303 5
d2420 16
d2440 2
a2441 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.81 2001/12/31 00:32:07 horacio Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.30 2002/01/02 10:17:25 horacio Exp $<br>
@


1.26
log
@
sync with badlands translation CVS
@
text
@d17 1
a17 1
Last Update - $OpenBSD: upgrade-minifaq.html,v 1.80 2001/12/18 15:34:25 ian Exp $
d2419 2
a2420 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.80 2001/12/18 15:34:25 ian Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.29 2001/12/31 00:12:22 horacio Exp $<br>
@


1.25
log
@
sync with badlands translation CVS.
@
text
@d17 1
a17 1
Last Update - $OpenBSD: upgrade-minifaq.html,v 1.78 2001/11/26 02:12:25 pvalchev Exp $
d289 5
d2281 21
a2301 1
<em>/etc/mail</em>.
d2308 3
a2310 1
en <em>/usr/share/sendmail/cf</em>.
d2363 10
d2419 2
a2420 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.78 2001/11/26 02:12:25 pvalchev Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.28 2001/12/06 17:50:27 horacio Exp $<br>
@


1.24
log
@
sync with badlands translation CVS
@
text
@d17 1
a17 1
Last Update - $OpenBSD: upgrade-minifaq.html,v 1.77 2001/11/25 19:54:42 lebel Exp $
d2357 19
d2382 2
a2383 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.77 2001/11/25 19:54:42 lebel Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.27 2001/11/28 21:56:40 horacio Exp $<br>
@


1.23
log
@sync with badlands translation CVS, work by Horacio
@
text
@d10 1
a10 1
<h3>&Uacute;ltima versi&oacute;n de OpenBSD - 2.9</h3>
d13 1
a13 1
&lt;<A HREF="mailto:kjell@@openbsd.com">kjell@@openbsd.org</A>&gt;
d17 1
a17 1
Last Update - $OpenBSD: upgrade-minifaq.html,v 1.73 2001/10/17 23:14:32 heko Exp $
d290 9
d2336 23
d2363 2
a2364 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.73 2001/10/17 23:14:32 heko Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.26 2001/10/19 14:08:16 horacio Exp $<br>
@


1.22
log
@
sync with badlands translation CVS.
@
text
@d17 1
a17 1
Last Update - $OpenBSD: upgrade-minifaq.html,v 1.71 2001/09/20 13:28:18 horacio Exp $
d110 6
d265 1
a265 1
8.1: Nuevo filtro de paquetes IP
d270 1
a270 1
8.2: Cambios en <em>make</em>
d275 1
a275 1
8.2: La compilaci&oacute;n falla debido a errores de KerberosV
d280 1
a280 1
8.4: El nuevo usuario proxy
d355 8
a362 4
En el <a href="../../es/ports.html">&aacute;rbol de portes</a>
se aplica una
<a href="../../es/ports.html#Life">pol&iacute;tica especial</a>
para el seguimiento del &aacute;rbol de fuentes.
d775 1
a775 1
<h4><a name="#1.12">
d792 27
d2047 1
a2047 1
8.1: Nuevo filtro de paquetes IP
d2050 65
a2114 3
Debido a la integraci&oacute;n del nuevo filtro de paquetes IP, tendr&aacute;
que crear un dispositivo especial para &eacute;ste.  Aseg&uacute;rese de
haber actualizado todo:
d2122 3
a2124 2
Durante la transici&oacute;n de IPF a PF los binarios han cambiado del
siguiente modo:
d2132 1
d2135 1
a2135 1
Dispositivos:
d2141 1
a2141 1
y los ficheros de configuraci&oacute;n del filtro:
d2148 7
a2154 1
Aseg&uacute;rese de acutalizarlos a mano.
d2156 2
a2157 2
<h4><a name="8.2">
8.2: Cambios en <em>make</em>
d2162 6
a2167 4
y en sus ficheros de datos, lo que hace necesario actualizarlo
antes de llevar a cabo la compilaci&oacute;n.  Esto suele
producir errores de <em>bsd.own.mk</em> durante la
compilaci&oacute;n.  Antes que nada actualice los ficheros de
d2183 4
a2186 2
<h4><a name="8.3">
8.2: La compilaci&oacute;n falla debido a errores de KerberosV
d2189 1
d2193 1
d2195 2
a2196 1
KerberosV en <em>/etc</em>.  Use
d2198 3
a2200 9
para crearlo:

<pre>
  $ cd /usr/src/etc/mtree
  $ sudo install -c -o root -g wheel -m 600 special /etc/mtree
  $ sudo install -c -o root -g wheel -m 444 4.4BSD.dist /etc/mtree
  $ sudo mtree -qdef /etc/mtree/4.4BSD.dist -p / -u
</pre>

a2217 22
<h4><a name="8.4">
8.4: El nuevo usuario <em>proxy</em>
</a></h4>

A ra&iacute;z de la integraci&oacute;n del proxy para ftp,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&sektion=8">ftpproxy(8)</a>,
se ha incluido un nuevo usuario y grupo de nombre
<em>proxy</em> al sistema.  Para que esto funcione
a&ntilde;ada el nuevo usuario mediante la siguiente entrada
con <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&sektion=8">vipw(8)</a>:

<pre>
proxy:*:71:71::0:0:Proxy Services:/nonexistent:/sbin/nologin
</pre>

A&ntilde;a tambi&eacute;n el grupo <em>proxy</em> a
<em>/etc/group</em>:

<pre>
proxy:*:71:
</pre>

d2231 13
a2243 34
<li>Tanto el nuevo usuario como el nuevo grupo, llamado
<em>smmsp</em>, han sido incluidos en el sistema.
A&ntilde;ada una l&iacute;nea como la siguiente a
<em>/etc/group</em>:

<pre>
smmsp:*:25:
</pre>

A continuaci&oacute;n ejecute
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&sektion=8">vipw(8)</a>
y a&ntilde;ada la siguiente l&iacute;nea para el usuario
<em>smmsp</em>:

<pre>
smmsp:*:25:25::0:0:Sendmail Message Submission Program:/nonexistent:/sbin/nologin
</pre>

Aseg&uacute;rese de que esta l&iacute;nea aparezca antes de
cualquier configuraci&oacute;n de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=yp&sektion=8">yp(8)</a>.
</li>

<li>Cree el directorio <em>/var/spool/clientmqueue</em> y
cambie los permisos de <em>/var/spool/mqueue</em> con
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mtree&sektion=8">mtree(8)</a>:

<pre>
  # cd /usr/src/etc/mtree
  # install -c -o root -g wheel -m 600 special /etc/mtree
  # install -c -o root -g wheel -m 444 4.4BSD.dist /etc/mtree
  # mtree -qdef /etc/mtree/4.4BSD.dist -p / -u
</pre>
</li>
d2331 2
a2332 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.71 2001/09/20 13:28:18 horacio Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.25 2001/09/25 19:44:40 horacio Exp $<br>
@


1.21
log
@
sync with badlands translation CVS.
@
text
@d17 1
a17 1
Last Update - $OpenBSD: upgrade-minifaq.html,v 1.70 2001/09/15 17:39:08 kjell Exp $
d802 2
a803 1
A&ntilde;ada la siguiente entrada a /etc/passwd, usando vipw:
d1921 5
a1925 2
<li>Instale el &uacute;ltimo <em>mtree</em> y aseg&uacute;rese de que
    exista la estructura necesaria en el directorio.
d2053 7
a2059 5
Se han producido algunos cambios en <em>make</em> y en sus
ficheros de datos, lo que hace necesario actualizarlo antes de
llevar a cabo la compilaci&oacute;n.  Esto suele producir
errores de <em>bsd.own.mk</em> durante la compilaci&oacute;n.
Antes que nada actualice los ficheros de datos:
d2082 3
a2084 1
KerberosV en <em>/etc</em>.  Use mtree para crearlo:
d2115 5
a2119 4
<em>ftpproxy</em>, se ha incluido un nuevo usuario y
grupo de nombre <em>proxy</em> al sistema.  Para que esto
funcione a&ntilde;ada el nuevo usuario mediante la siguiente
entrada con <em>vipw</em>:
d2137 2
a2138 1
Sendmail ha sido actualizado a la versi&oacute;n 8.12.  Como a
d2154 4
a2157 2
A continuaci&oacute;n ejecute <kbd>vipw</kbd> y a&ntilde;ada
la siguiente l&iacute;nea para el usuario <em>smmsp</em>:
d2164 2
a2165 1
cualquier configuraci&oacute;n de yp.
d2170 1
a2170 1
<em>mtree</em>:
d2180 3
a2182 2
<li>A&ntilde;ada lo siguiente al fichero <em>crontab</em> de
root.  Esto es necesario dado que <em>sendmail</em> ya no
d2227 3
a2229 1
configuraci&oacute;n, mate el proceso existente de sendmail:
d2266 2
a2267 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.70 2001/09/15 17:39:08 kjell Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.24 2001/09/20 11:32:55 horacio Exp $<br>
@


1.20
log
@
sync with badlands translation CVS
@
text
@d17 1
a17 1
Last Update - $OpenBSD: upgrade-minifaq.html,v 1.61 2001/07/06 13:39:05 hin Exp $
d104 7
a110 1
<h3>2.0: Actualizar desde la versi&oacute;n 2.3</h3>
d130 1
a130 1
<h3>3.0: Actualizar desde la versi&oacute;n 2.4</h3>
d144 1
a144 1
<h3>4.0: Actualizar desde la versi&oacute;n 2.5</h3>
d191 1
a191 1
<h3>5.0 - Actualizar desde la versi&oacute;n 2.6</h3>
d205 1
a205 1
5.3: Actualizar de gcc 2.95.1 a 2.95.2
d210 1
a210 1
5.4: Actualizar Kerberos.
d215 1
a215 1
5.5: Actualizar M4.
d220 1
a220 1
5.6: Actualizar Sendmail.
d230 1
a230 1
<h3>6.0 - Actualizar desde la versi&oacute;n 2.7</h3>
d238 1
a238 1
<h3>7.0 - Actualizar desde la versi&oacute;n 2.8</h3>
d256 1
a256 1
<h3>8.0 - Actualizar desde la versi&oacute;n 2.9</h3>
d259 1
a259 2
8.1: Nuevo filtro de paquetes IP y nuevo directorio de
configuraci&oacute;n de KerberosV
d264 1
a264 1
8.2: Errores de bsd.own.mk durante la compilaci&oacute;n
d273 10
d349 6
d477 17
a493 1
# cd /usr/src/sys/arch/`machine`/conf
d499 5
d765 17
d783 1
a783 1
<h3>2.0: Actualizar desde la Versi&oacute;n 2.3</h3>
d946 1
a946 1
<h3>3.0: Actualizar desde la Versi&oacute;n 2.4</h3>
d1021 1
a1021 1
<h3>4.0: Actualizar desde la Versi&oacute;n 2.5</h3>
d1572 1
a1572 1
<h3>5.0 - Actualizar desde la versi&oacute;n 2.6 a la 2.7</h3>
d1650 1
a1650 1
<h4>5.3: Actualizar de gcc 2.95.1 a 2.95.2</h4>
d1690 1
a1690 1
<h4>5.4: Actualizar Kerberos</h4>
d1742 1
a1742 1
<h4>5.5: Actualizar M4</h4>
d1758 1
a1758 1
<h4>5.6: Actualizar Sendmail</h4>
d1847 1
a1847 1
6.0 - Actualizar desde la versi&oacute;n 2.7</h3>
d1941 1
a1941 1
<h3>7.0 - Actualizar desde la versi&oacute;n 2.8</h3>
d2006 1
a2006 2
8.1: Nuevo filtro de paquetes IP y nuevo directorio de
configuraci&oacute;n de KerberosV
a2043 10
<br><br>
Hay un nuevo directorio de configuraci&oacute;n para KerberosV en
<em>/etc</em>.  Use mtree para crearlo:

<pre>
  $ cd /usr/src/etc/mtree
  $ sudo install -c -o root -g wheel -m 600 special /etc/mtree
  $ sudo install -c -o root -g wheel -m 444 4.4BSD.dist /etc/mtree
  $ sudo mtree -qdef /etc/mtree/4.4BSD.dist -p / -u
</pre>
d2046 1
a2046 1
8.2: Errores de bsd.own.mk durante la compilaci&oacute;n
d2049 5
a2053 3
Se han producido algunos cambios en los ficheros de datos de
<em>make</em>, lo que hace necesario actualizarlo antes de llevar a
cabo la compilaci&oacute;n:
d2060 7
d2072 14
a2085 2
Antes de intentar compilar todo el sistema, debe compilar KerberosV en
solitario:
a2091 1
  $ sudo make install
d2097 148
a2244 2
A continuaci&oacute;n ya puede iniciar un <em>make build</em> para todo el
sistema.
d2250 2
a2251 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.61 2001/07/06 13:39:05 hin Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.23 2001/07/09 21:16:08 horacio Exp $<br>
@


1.19
log
@
Updated.
@
text
@d17 1
a17 1
Last Update - $OpenBSD: upgrade-minifaq.html,v 1.60 2001/07/05 20:26:00 pvalchev Exp $
d259 1
a259 1
8.2: La compilaci&oacute;n falla debido a errores de KerberosV
d264 1
a264 1
8.3: Errores de bsd.own.mk durante la compilaci&oacute;n
d1998 1
a1998 1
8.2: La compilaci&oacute;n falla debido a errores de KerberosV
d2001 3
a2003 2
Antes de intentar compilar todo el sistema, debe compilar KerberosV en
solitario:
d2006 2
a2007 2
  $ cd /usr/src/kerberosV
  $ sudo make build
d2010 1
d2012 1
a2012 1
8.3: Errores de bsd.own.mk durante la compilaci&oacute;n
d2015 2
a2016 3
Se han producido algunos cambios en los ficheros de datos de
<em>make</em>, lo que hace necesario actualizarlo antes de llevar a
cabo la compilaci&oacute;n:
d2019 7
a2025 1
  $ cd /usr/src/share/mk
d2036 2
a2037 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.60 2001/07/05 20:26:00 pvalchev Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.22 2001/07/06 06:26:20 horacio Exp $<br>
@


1.18
log
@
updated by Horacio
@
text
@d17 1
a17 1
Last Update - $OpenBSD: upgrade-minifaq.html,v 1.58 2001/07/04 16:17:21 pvalchev Exp $
d1966 2
a1967 1
/usr/sbin/ipftest /usr/sbin/ipsend /usr/sbin/ipmon
d2029 2
a2030 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.58 2001/07/04 16:17:21 pvalchev Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.21 2001/07/04 16:45:02 horacio Exp $<br>
@


1.17
log
@
sync with badlands translation CVS, work by Horacio
@
text
@d17 1
a17 1
Last Update - $OpenBSD: upgrade-minifaq.html,v 1.57 2001/07/02 20:48:36 jufi Exp $
d2005 1
a2005 1
  $ make build
d2012 3
a2014 2
Se han producido algunos cambios en los ficheros de datos de <em>make</em>, y
es preciso actualizarlos antes de llevar a cabo la compilaci&oacute;n:
d2028 2
a2029 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.57 2001/07/02 20:48:36 jufi Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.20 2001/07/03 00:58:22 horacio Exp $<br>
@


1.16
log
@
update by Horacio
@
text
@d17 1
a17 1
Last Update - $OpenBSD: upgrade-minifaq.html,v 1.56 2001/07/02 01:17:24 pvalchev Exp $
d664 1
a664 1
ejemplo, para ver los cambios acontecidos entre 2.6 y 2.7, haga:
d668 1
a668 1
  # cvs diff -u -rOPENBSD_2_6 -rOPENBSD_2_7
d2027 2
a2028 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.56 2001/07/02 01:17:24 pvalchev Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.19 2001/07/02 13:52:59 horacio Exp $<br>
@


1.15
log
@
Updated by Horacio
@
text
@d17 1
a17 1
Last Update - $OpenBSD: upgrade-minifaq.html,v 1.53 2001/06/09 16:39:05 pvalchev Exp $
d250 18
d1942 81
d2027 2
a2028 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.53 2001/06/09 16:39:05 pvalchev Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.17 2001/06/10 01:05:47 horacio Exp $<br>
@


1.14
log
@
Work by Horacio.
@
text
@d17 1
a17 1
Last Update - $OpenBSD: upgrade-minifaq.html,v 1.51 2001/06/05 04:07:31 kjell Exp $
d23 2
a24 1
Si alguna vez ha intentado compilar los fuentes de <em>-current</em> de
d28 1
a28 2
al actualizar entre versiones de OpenBSD, o desde las versiones a
<em>-current</em>.
d34 1
a34 1
<h3>1.0: Preguntas Generales sobre la Actualizaci&oacute;n</h3>
d50 2
a51 2
1.3: No puedo encontrar ning&uacute;n &quot;snapshot&quot; en el
servidor de FTP.  &iquest;D&oacute;nde est&aacute;n?
d56 2
a57 1
1.4: &iquest;C&oacute;mo obtengo los fuentes m&aacute;s recientes?
d62 2
a63 1
1.5: Ya tengo el &aacute;rbol, &iquest;c&oacute;mo lo compilo?
d69 1
a69 1
que hacerlo todo de nuevo?
d100 1
a100 1
hacer un <em>make build</em>?
d104 1
a104 1
<h3>2.0: Actualizar desde la Versi&oacute;n 2.3</h3>
d119 1
a119 1
2.3: He intentado compilar todo, pero 'make' falla para PowerPC.
d124 1
a124 1
<h3>3.0: Actualizar desde la Versi&oacute;n 2.4</h3>
d138 1
a138 1
<h3>4.0: Actualizar desde la Versi&oacute;n 2.5</h3>
d152 2
a153 1
<a href="#4.2.1">4.2.1 - i386 y sparc ya no usan #define</a><br>
d155 2
a156 2
<a href="#4.2.3">4.2.3 - &laquo;Volcado de Memoria&raquo; (&quot;Core
			 Dump&quot;) en uthread_autoinit.c</a><br>
d158 1
a158 1
                         gcc</a><br>
d160 1
a160 1
			 tama&ntilde;o que gcc</a><br>
d162 1
a162 1
                         poco espacio en el disco</a><br>
d164 1
a164 1
                         libcurses</a><br>
d185 1
a185 1
<h3>5.0 - Actualizar desde la Versi&oacute;n 2.6</h3>
d255 1
a255 1
<h3>1.0: Preguntas Generales sobre la Actualizaci&oacute;n</h3>
d270 1
a270 1
Las &laquo;versiones oficiales&raquo; (&quot;releases&quot;) de OpenBSD
d272 2
a273 2
enumeran en un modo convencional (2.x).  La versi&oacute;n oficial de
OpenBSD actual es la 2.9.
d276 3
a278 2
<strong>-current</strong>, la contracci&oacute;n de
<em>openbsd-current</em> (&laquo;openbsd-actual&raquo;), se refiere a
d282 1
a282 1
&aacute;rbol <em>-current</em> contiene todo el c&oacute;digo que
d284 7
a290 6
versi&oacute;n.  De vez en cuando, algunos valientes abandonan las
versiones oficiales y utilizan <em>openbsd-current</em>, generalmente
para aprovechar funcionalidades que todav&iacute;a no se han
implementado en las versiones oficiales.  Sin embargo, debido a su
naturaleza de incertidumbre, la actualizaci&oacute;n a
<em>-current</em> no se recomienda a usuarios no t&eacute;cnicos.
d293 2
a294 2
Entre una versi&oacute;n oficial y otra, se ponen a disposici&oacute;n
unas versiones llamadas 
d296 5
a300 4
&Eacute;stas son versiones de prueba del &aacute;rbol de fuentes de
<em>-current</em>.  Debido a que son un reflejo del estado actual de
desarrollo, no se puede garantizar que los <em>snapshots</em> funcionen
correctamente... ni siquiera que funcionen.  Los <em>snapshots</em> son
d302 2
a303 2
versi&oacute;n oficial (o una versi&oacute;n de <em>-current</em>
m&aacute;s antigua) a la del &aacute;rbol actual.
d309 2
a310 2
la versi&oacute;n oficial (&quot;release&quot;) base y cualquier otro
parche o soluci&oacute;n importante (se consideran importantes los
d322 5
a326 4
versi&oacute;n oficial a <em>-current</em> no siempre es f&aacute;cil.
La forma m&aacute;s dif&iacute;cil de actualizar a <em>-current</em> es
actualizar primero al <em>snapshot</em> m&aacute;s reciente (por lo
general, mediante una instalaci&oacute;n por FTP).  Una vez el
d1928 2
a1929 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.51 2001/06/05 04:07:31 kjell Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.14 2001/06/05 13:27:39 horacio Exp $<br>
@


1.13
log
@
Sync with translation CVS.
@
text
@d4 1
a4 1
   <title>Gu&iacute;a de Actualizaci&oacute;n de OpenBSD</title>
d9 2
a10 2
<h2>Gu&iacute;a de Actualizaci&oacute;n de OpenBSD</h2>
<h3>&Uacute;ltima Versi&oacute;n de OpenBSD - 2.8</h3>
d17 1
a17 1
Last Update - $OpenBSD: upgrade-minifaq.html,v 1.49 2001/04/08 20:47:03 kjell Exp $
d96 5
d229 1
a229 2
<h3>7.0 - Actualizar desde la versi&oacute;n 2.8 a
<em>-current</em></h3>
d270 1
a270 1
OpenBSD actual es la 2.8.
d673 24
d1762 2
a1763 2
<h3><a name="6.0">
6.0 - Actualizar desde la versi&oacute;n 2.7 a la 2.8</a></h3>
d1857 1
a1857 2
<h3>7.0 - Actualizar desde la versi&oacute;n 2.8 a
<em>-current</em></h3>
d1885 2
a1886 2
Si va a usar X, cambie la secci&oacute;n &quot;Pointer&quot; en el
fichero de configuraci&oacute;n <em>/etc/XF86Config</em> de modo que
d1921 2
a1922 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.49 2001/04/08 20:47:03 kjell Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.13 2001/04/08 21:28:21 horacio Exp $<br>
a1929 1

a1930 1

@


1.12
log
@
Updated
@
text
@d17 1
a17 1
Last Update - $OpenBSD: upgrade-minifaq.html,v 1.48 2001/03/02 20:21:28 kjell Exp $
d1849 2
a1850 2
Aseg&uacute;rese de haber instalado el &uacute;ltimo MAKEDEV y ejecute
las siguientes &oacute;rdenes:
d1853 1
d1894 2
a1895 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.48 2001/03/02 20:21:28 kjell Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.12 2001/03/03 19:28:01 horacio Exp $<br>
@


1.11
log
@
Sync with translation CVS. Work by Horacio
@
text
@d16 2
a17 1
Last Update - $OpenBSD: upgrade-minifaq.html,v 1.47 2001/02/07 22:20:14 kjell Exp $
d356 1
a356 1
# export CVS_RSH=/usr/local/bin/ssh
d1893 2
a1894 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.47 2001/02/07 22:20:14 kjell Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.11 2001/02/24 22:41:06 horacio Exp $<br>
@


1.10
log
@
Sync with Badlands Translation CVS. Work by Horacio
@
text
@d16 1
a16 1
Last Update - $OpenBSD: upgrade-minifaq.html,v 1.42 2000/12/29 15:28:52 aaron Exp $
d231 11
d451 1
a451 1
<em>/etc</em>.  En este ejemplo usar&eacute; <em>/home/newroot</em> 
d1394 1
a1394 1
    que fallar en silencio.
d1841 46
d1892 2
a1893 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.42 2000/12/29 15:28:52 aaron Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.10 2001/01/03 21:09:30 horacio Exp $<br>
@


1.9
log
@Insert missing colon; closes PR/1590 from user@@utopia.waldentwo.org.
@
text
@d16 1
a16 1
Last Update - $OpenBSD: upgrade-minifaq.html,v 1.8 2000/12/28 22:00:26 jufi Exp $
d1835 3
a1837 3
Originally [OpenBSD: upgrade-minifaq.html,v 1.41 2000/12/26 10:41:05 horacio Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.9 2000/12/26 21:48:15 horacio Exp $<br>
$OpenBSD: upgrade-minifaq.html,v 1.8 2000/12/28 22:00:26 jufi Exp $
@


1.8
log
@
Sync with Badlands Translation CVS. Work by Horacio
@
text
@d16 1
a16 1
Last Update - $OpenBSD: upgrade-minifaq.html,v 1.41 2000/12/26 10:41:05 horacio Exp $
d645 1
a645 1
  # cvs -q -d anoncvs@@some.anon.server/cvs up -PAd
d1837 1
a1837 1
$OpenBSD$
@


1.7
log
@
More updates by Horacio
@
text
@d16 1
a16 1
Last Update - $OpenBSD: upgrade-minifaq.html,v 1.39 2000/12/21 18:19:08 kjell Exp $
d22 6
a27 6
Si alguna vez ha intentado compilar los fuentes de <i>-current</i> de alguna
versi&oacute;n de OpenBSD antigua, se habr&aacute; dado cuenta de que el
proceso no siempre es f&aacute;cil.
En esta gu&iacute;a se intentan solucionar los problemas m&aacute;s comunes
que se encuentran al actualizar entre versiones de OpenBSD, o desde las
versiones a <i>-current</i>.
d36 3
a38 3
1.1: Terminolog&iacute;a.  &iquest;Qu&eacute; es <i>-current</i>?
&iquest;Qu&eacute; son los <i>snapshots</i>?  &iquest;Qu&eacute; es
<i>-stable</i>?
d44 1
a44 1
actualizar a <i>-current</i>?
d106 1
a106 1
<i>ssleay</i>.
d139 1
a139 1
4.2: &iquest;C&oacute;mo actualizo <i>gcc</i> a <i>egcs</i>?
d161 2
a162 2
4.3: <i>make build</i> muere con errores de tipo <i>unimplemented
syscall</i>.
d172 2
a173 2
4.5: Despu&eacute;s de <b>(U)</b>pgrade (actualizar), la
extracci&oacute;n de <i>base26.tar.gz</i> falla con un mensaje.
d185 1
a185 1
<i>pn</i> (o <i>mx</i>, <i>al</i>, <i>ax</i>).
d211 1
a211 1
<i>apm(8)</i> ya no arrancan.
d240 3
a242 3
<h4>1.1: Terminolog&iacute;a. &iquest;Qu&eacute; es <i>-current</i>?
&iquest;Qu&eacute; son los <i>snapshots</i>?  &iquest;Qu&eacute; es
<i>-stable</i>?</h4>
d257 13
a269 13
<b>-current</b>, la contracci&oacute;n de <i>openbsd-current</i>
(&laquo;openbsd-actual&raquo;), se refiere a la versi&oacute;n de
&uacute;ltima hora del &aacute;rbol de fuentes contenida en el
repositorio de CVS.  &Eacute;ste es el &aacute;rbol que usan con
m&aacute;s asiduidad los desarrolladores de OpenBSD.  El &aacute;rbol
<i>-current</i> contiene todo el c&oacute;digo que est&aacute; planeado
para el lanzamiento de la siguiente versi&oacute;n.  De vez en cuando,
algunos valientes abandonan las versiones oficiales y utilizan
<i>openbsd-current</i>, generalmente para aprovechar funcionalidades
que todav&iacute;a no se han implementado en las versiones oficiales.
Sin embargo, debido a su naturaleza de incertidumbre, la
actualizaci&oacute;n a <i>-current</i> no se recomienda a usuarios no
t&eacute;cnicos.
d274 1
a274 1
<i><a href="ftp://ftp.openbsd.org/pub/OpenBSD/snapshots/">snapshots</a></i>.
d276 3
a278 3
<i>-current</i>.  Debido a que son un reflejo del estado actual de
desarrollo, no se puede garantizar que los <i>snapshots</i> funcionen
correctamente... ni siquiera que funcionen.  Los <i>snapshots</i> son
d280 1
a280 1
versi&oacute;n oficial (o una versi&oacute;n de <i>-current</i>
d286 2
a287 2
(llamada <b>-stable</b>).  Esta ramificaci&oacute;n contiene la
versi&oacute;n oficial (&quot;release&quot;) base y cualquier otro
d296 1
a296 1
actualizar a <i>-current</i>?</h4>
d300 3
a302 3
versi&oacute;n oficial a <i>-current</i> no siempre es f&aacute;cil.
La forma m&aacute;s dif&iacute;cil de actualizar a <i>-current</i> es
actualizar primero al <i>snapshot</i> m&aacute;s reciente (por lo
d304 5
a308 4
<i>snapshot</i> ha sido instalado, se pueden <a href="#1.4">obtener</a>
los fuentes m&aacute;s recientes y <a href="#1.5">compilarlos</a>.
Este procedimiento deber&iacute;a eliminar la mayor&iacute;a de
problemas con las bibliotecas y las herramientas necesarias.
d316 1
a316 1
Los <i>snapshots</i> se sol&iacute;an retirar de los servidores de
d322 4
a325 4
Los <i>snapshots</i> se pueden retirar seg&uacute;n se vayan anticuando
(o seg&uacute;n dejen de ser relevantes).  Si no hay ning&uacute;n
<i>snapshots</i> disponible, entonces debe actualizar a la
versi&oacute;n m&aacute;s reciente y compilar lo restante desde los
d339 2
a340 2
la shell bash;  para otras, substituya <i>export</i> por
<i>setenv</i>):
d498 3
a500 3
S&oacute;lo tiene que copiar la entrada para <i>build</i> (a
<i>build-noclean</i>, por ejemplo), y eliminar la referencia <i>make
cleandir</i>.
d667 1
a667 1
<h4>Nuevo usuario: <i>named</i></h4>
d671 2
a672 2
<i>named</i> se cambi&oacute; a una jaula chroot.  Para hacer este
cambio posible, se cre&oacute; el usuario <i>named</i>.  Si
d693 1
a693 1
<i>ssleay</i>.</h4>
d696 1
a696 1
Probablemente le falte una entrada para el usuario <i>named</i> en el
d700 1
a700 1
<b>Respuesta corta:</b>
d706 1
a706 1
<b>Respuesta larga:</b>
d709 2
a710 2
El usuario <i>named</i> es necesario para configurar correctamente los
permisos.  Si este usuario faltara, parte del proceso de
d712 2
a713 2
de su compilaci&oacute;n de un fichero (por ejemplo, con <i>make build
&amp;&gt;/tmp/build.log</i>), notar&iacute;a el siguiente mensaje:
d730 1
a730 1
Si el usuario <i>named</i> existiera, mtree funcionar&iacute;a
d755 2
a756 2
directorio <i>/usr/include/ssl</i> nunca fue creado.  Sin los ficheros
de cabeceras, la compilaci&oacute;n de <i>ssleay</i> fallar&iacute;a.
d759 1
a759 1
<b>Soluci&oacute;n:</b>
d762 4
a765 4
Cree el usuario y el grupo <i>named</i>.  Elimine
<i>/usr/include/ssl</i>, <i>/var/named</i>, y cualquier otro directorio
de la lista anterior que hubiera sido creado por error como un fichero
normal por 'make build'.
d774 1
a774 1
directorio <i>/usr/share/man/cat4/powerpc</i>.
d777 1
a777 1
<b>Soluci&oacute;n r&aacute;pida:</b>
d783 1
a783 1
<b>Soluci&oacute;n completa:</b>
d818 1
a818 1
Note que <i>/usr/share/man/cat4/powerpc</i> es uno de los directorios
d833 2
a834 2
La sintaxis para invocar <i>cap_mkdb</i> ha cambiado ligeramente.
Antes de hacer un 'make build', recompile <i>cap_mkdb</i> desde los
d869 1
a869 1
Tiene que eliminar el contenido del directorio <i>obj/</i> antes de
d877 1
a877 1
<b>S&iacute;ntoma:</b>
d890 1
a890 1
<b>Soluci&oacute;n r&aacute;pida:</b>
d893 1
a893 1
Necesita compilar un nuevo <i>cap_mkdb</i>.  Mire en la 
d905 1
a905 1
<h5><i>perl</i> y <i>make</i></h5>
d909 1
a909 1
versi&oacute;n de <i>make</i> para compilar correctamente.  Debe
d958 1
a958 1
<h5>Cambio del compilador: <i>egcs</i> reemplaza a <i>gcc</i></h5>
d966 1
a966 1
<h5>Cambio en la estructura del n&uacute;cleo -<i>statfs</i></h5>
d976 2
a977 1
<h4>4.2: &iquest;C&oacute;mo actualizo <i>gcc</i> a <i>egcs</i>?</h4>
d980 4
a983 4
El modo m&aacute;s seguro es actualizar a un <i>snapshot</i> reciente,
en cuanto haya uno disponible.  <b>&iexcl;Busque un <i>snapshot</i>
primero!</b>.  Arrancar el compilador nuevo desde el viejo
deber&iacute;a ser el <i>&uacute;ltimo recurso</i>.
d991 4
a994 4
<li><b>i386</b>
<li><b>sparc</b>
<li><b>m68k</b>
<li><b>alpha</b>
d996 1
a996 1
Hay problemas con <b>mips</b> y <b>rs6000</b>.
d1000 1
a1000 1
<i>egcs-snapshot</i>, que se encuentra disponible en la 
d1003 1
a1003 1
har&aacute;.  &Eacute;ste es el m&eacute;todo <i>m&acute;s seguro</i>
d1008 6
a1013 5
<i>binutils</i>, <i>gas</i>, y <i>ld</i> est&eacute;n actualizadas.
Recuerde que existen dos copias de <i>gas</i> y <i>ld</i> en el
&aacute;rbol.  En <b>i386</b> y <b>sparc</b>, no se usan las versiones
de <i>binutils</i>.  Debe usar en su lugar
<tt>/usr/src/gnu/usr.bin/gas</tt> y <tt>/usr/src/gnu/usr.bin/ld</tt>.
d1016 3
a1018 3
Las siguientes instrucciones se refieren al <i>snapshot</i> original de
egcs (egcs-990517).  Desde entonces existe en el &aacute;rbol un
segundo <i>snapshot</i> (egcs-990608).  Si viene de la versi&oacute;n
d1211 5
a1215 5
Esto es cierto.  <i>egcs</i> usa <tt>__i386__</tt> y <tt>__sparc__</tt>
que son de c&oacute;digo m&aacute;s limpio.  Si necesita compilar
c&oacute;digo que dependa en los viejos define, a&ntilde;ada
<tt>-Dsparc</tt> o <tt>-Di386</tt> a la ubicaci&oacute;n apropiada del
fichero Makefile.
d1224 1
a1224 1
<i>cap_mkdb</i> descrito en la <a href="#3.1">secci&oacute;n 3.1</a>.
d1278 1
a1278 1
<i>gcc</i></h5>
d1281 1
a1281 1
Lo es, pero existe un motivo.  <i>egcs</i> act&uacute;a optimizando
d1284 1
a1284 1
por <i>egcs</i>.
d1288 2
a1289 2
<h5>4.2.5 - <i>egcs</i> genera c&oacute;digo de mayor tama&ntilde;o
<i>gcc</i></h5>
d1293 1
a1293 1
<tt>-O2</tt> de <i>gcc</i>.  <i>egcs</i> introduce una nueva
d1299 1
a1299 1
<h5>4.2.6 - Despu&eacute;s de instalar <i>egcs</i>, me queda muy poco
d1303 6
a1308 6
<i>egcs</i> se instala en un subdirectorio distinto al de gcc 2.8.1.
Una vez que egcs haya arrancado y funcione, puede eliminar <i>gcc</i>.
(a prop&oacute;posito de esto, los cambios en perl mencionados en la 
<a href="#4.1">secci&oacute;n 4.1</a> significan que puede eliminar el
directorio <tt>/usr/lib/perl5</tt>.  La nueva ubicaci&oacute;n para
estos datos es <tt>/usr/libdata/perl5</tt>).
d1315 3
a1317 3
<i>libcurses</i> se apoya ahora en la &uacute;ltima versi&oacute;n de
<i>cpp</i>.  Obtenga la &uacute;ltima versi&oacute;n, recompile
<i>cpp</i>, y contin&uacute;e.  Por ejemplo:
d1330 3
a1332 2
Si <i>make obj</i> falla, nombrando errores en un Makefile, los include
de makefile es posible que est&eacute;n obsoletos.  Por ejemplo:
d1353 2
a1354 2
<h4>4.3: <i>make build</i> muere con errores de tipo <i>unimplemented
syscall</i></h4>
d1357 1
a1357 1
<b>Respuesta corta:</b>
d1361 1
a1361 1
recompilar el n&uacute;cleo antes de intentar un <i>make build</i>.
d1364 1
a1364 1
<b>Respuesta larga:</b>
d1387 1
a1387 1
    <i>mount</i> le puede indicar todas las opciones que tenga un
d1405 1
a1405 1
<li>Ahora <b>mount(8)</b> mostrar&aacute; informaci&oacute;n adicional
d1407 1
a1407 1
    <i>todo</i> necesitar&aacute; usar el indicador -v (verbosidad).
d1426 2
a1427 2
<h4>4.5: Despu&eacute;s de <b>(U)</b>pgrade (actualizar), la
extracci&oacute;n de <i>base26.tar.gz</i> falla con un mensaje:</h4>
d1430 2
a1431 2
<i>tar: Unable to remove directory ./usr/include/machine &lt;Directory
not empty&gt;</i>
d1458 6
a1463 6
versi&oacute;n actual de tic(1).  Si est&aacute; actualizando a
trav&eacute;s de <i>make build</i>, se usar&aacute; la versi&oacute;n
correcta de 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tic&apropos=0&sektion=1&manpath=OpenBSD+Current&format=html">tic(1)</a>
y regenerar&aacute; los ficheros por usted.  En caso contrario,
ver&aacute; el siguiente error:
d1479 1
a1479 1
<i>pn</i> (o <i>mx</i>, <i>al</i>, <i>ax</i>)</h4>
d1483 3
a1485 3
<i>pn</i> para simplificar.  La informaci&oacute;n es igualmente
aplicable a <i>pn</i>, <i>mx</i>, <i>al</i>, o <i>ax</i>, seg&uacute;n
el caso)
d1490 3
a1492 3
unificado <i>dc</i>.  Debe cambiar cualquier menci&oacute;n a
<i>pn*</i>, <i>mx</i>, <i>al</i>, o <i>ax</i> en sus ficheros de
configuraci&oacute;n.  Esto incluye:
d1508 1
a1508 1
aseg&uacute;rese de haber incluido el dispositivo <i>dcphy</i> en la
d1529 2
a1530 2
<i>gcc</i> 2.95.2 se fusion&oacute; en el &aacute;rbol de fuentes de
OpenBSD alrededor del 19 de enero de 2.000.  Para que <i>gcc</i>
d1532 1
a1532 1
reciente de la biblioteca <i>libiberty</i> (post 2.6).  Para compilar
d1545 2
a1546 2
cabo un <i>ldconfig</i> expl&iacute;cito despu&eacute;s de compilar las
nuevas bibliotecas.
d1549 2
a1550 2
Una vez compilada <i>libiberty</i>, puede proceder con un arranque
t&iacute;pico de <i>gcc</i>:
d1624 1
a1624 1
<b>antes</b> de intentar un 'make build'.  En otras palabras:
d1645 2
a1646 2
  <td><b>VIEJO</b></td>
  <td><b>NUEVO</b></td>
d1713 1
a1713 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=apm&apropos=0&sektion=8&manpath=OpenBSD+Current&format=html">apm(8)</a>
d1835 2
a1836 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.39 2000/12/21 18:19:08 kjell Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.7 2000/12/24 15:48:14 horacio Exp $<br>
@


1.6
log
@
Sync with Badlands Translation CVS. Work by es Horacio
@
text
@d10 1
a10 1
<h3>&Uacute;ltima Versi&oacute;n de OpenBSD - 2.7</h3>
d13 1
a13 1
&lt;<a href="mailto:kwooding@@codetalker.com">kwooding@@codetalker.com</a>&gt;
d16 1
a16 1
Last Update - $OpenBSD: upgrade-minifaq.html,v 1.38 2000/08/07 06:18:51 kjell Exp $
d89 5
a93 76
<h4><a name="1.8">
Estoy actualizando el compilador (<code>gcc</code>) a una
versi&oacute;n m&aacute;s nueva.  &iquest;Hay alg&uacute;n
procedimiento para el sistema de arranque?
</a></h4>

<p>
Debido a que la actualizaci&oacute;n de un compilador es como &laquo;el
problema del huevo y la gallina&raquo;, los cambios al compilador
original del &aacute;rbol requieren que se les preste algo m&aacute;s
de atenci&oacute;n.  Por regla general se seguir&aacute; este
procedimiento:

<p>
(... y s&iacute;, se compilar&aacute; dos veces)

<pre>
  # rm -r /usr/obj/gnu/egcs/gcc/*
  # cd /usr/src/gnu/egcs/gcc
  # make -f Makefile.bsd-wrapper obj
  # make -f Makefile.bsd-wrapper clean
  # make -f Makefile.bsd-wrapper depend
  # make -f Makefile.bsd-wrapper 
  # make -f Makefile.bsd-wrapper install
  # make -f Makefile.bsd-wrapper clean
  # make -f Makefile.bsd-wrapper depend
  # make -f Makefile.bsd-wrapper 
  # make -f Makefile.bsd-wrapper install
</pre>

y a continuaci&oacute;n ejecute un <kbd>make build</kbd> normal.


<h4><a name="1.9">
1.9: &iquest;Cu&aacute;l es la mejor forma de actualizar <em>/etc</em>,
<em>/var</em>, y <em>/dev</em>?
</a></h4>

<p>
<strong>Respuesta corta</strong>: A mano.

<p>
<strong>Respuesta larga</strong>:

<p>
Como parte de la pol&iacute;tica de OpenBSD, el <em>software</em> en el
&aacute;rbol de cvs no modifica los ficheros en <em>/etc</em> de forma
autom&aacute;tica.  Esto quiere decir que es <strong>siempre</strong>
el administrador quien debe llevar a cabo las modificaciones necesarias
a los ficheros de configuraci&oacute;n.  Las actualizaciones no
constituyen una excepci&oacute;n.  Para actualizar los ficheros en
estos directorios, primero determine qu&eacute; cambios ha sufrido los
ficheros b&aacute;sicos de la distribuci&oacute;n, y a
continuaci&oacute;n vuelva a aplicar esos cambios manualmente.

<p>
Por ejemplo, para ver los ficheros que han cambiado m&aacute;s
recientemente en el &aacute;rbol, haga:

<pre>
  # cd /usr/src/etc
  # ls -lt |more
</pre>

Para ver todos los cambios en <em>/etc</em> entre versiones de OpenBSD
arbitrarias, puede usar <a href="../../es/anoncvs.html">CVS</a>.  Por
ejemplo, para ver los cambios acontecidos entre 2.6 y 2.7, haga:

<pre>
  # cd /usr/src/etc
  # cvs diff -u -rOPENBSD_2_6 -rOPENBSD_2_7
</pre>

Una vez que haya identificado los cambios, vuelva a aplicarlos a su
&aacute;rbol local, conservando cualquier configuraci&oacute;n a nivel
local que haya hecho Vd. anteriormente.
d215 1
a215 1
<h3>6.0 - Actualizar desde la versi&oacute;n 2.7 a <i>-current</i></h3>
d218 10
a227 1
6.1: Actualizar gcc 2.95.2 a 2.95.3-pre (27 de mayo)
d254 1
a254 1
OpenBSD actual es la 2.7.
d287 5
a291 2
versi&oacute;n oficial (&quot;release&quot;) base de 2.7, m&aacute;s
cualquier parche que se haya publicado en la p&aacute;gina de erratas.
a439 5
<p>
(<b>Nota</b>: aseg&uacute;rese de que la jerarqu&iacute;a de directorio
que escoja no tenga permiso de escritura para grupo (g+w) u otro
permiso de escritura (o+w), o sendmail se quejar&aacute; durante este
paso.  Esto hace que <em>/tmp</em> sea una mala elecci&oacute;n):
d544 114
d1444 1
a1444 1
<h3>5.0 - Actualizar desde la Versi&oacute;n a 2.6</h3>
d1719 1
a1719 1
6.0 - Actualizar desde la versi&oacute;n 2.7 a <i>-current</i></a></h3>
d1722 44
a1765 1
6.1: Actualizar gcc 2.95.2 a 2.95.3-pre (27 de mayo)</a></h4>
d1768 57
a1824 3
<code>gcc</code> se ha actualizado a la versi&oacute;n 2.95.3 pre-release.
Siga los <a href="#1.8">procedimientos normales</a> para actualizar a
una nueva versi&oacute;n de <code>gcc</code>
d1831 2
a1832 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.38 2000/08/07 06:18:51 kjell Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.6 2000/09/28 08:26:34 horacio Exp $<br>
d1836 1
a1836 1
Copyright &copy; 1998-2000, Kjell Wooding. 
d1839 1
a1839 1
<a href="mailto:kwooding@@codetalker.com">kwooding@@codetalker.com</a>
@


1.5
log
@
Sync with Badlands Translation CVS. Work by Horacio.
@
text
@d16 1
a16 1
&Uacute;ltima Actualizaci&oacute;n - $OpenBSD: upgrade-minifaq.html,v 1.35 2000/06/11 18:32:27 kjell Exp $
d76 90
d415 2
a416 2
<pre>
1. Limpie los ficheros objeto antiguos.
d418 1
d422 1
d427 1
d430 3
a432 3
puede encontrar mucho m&aacute;s r&aacute;pido poner /usr/obj en su
propia partici&oacute;n y usar <i>newfs</i> en lugar de <i>rm</i>.  Por
ejemplo, lo que yo hago es:
d434 1
d439 1
d444 1
d451 1
d453 1
a453 2

2. Lleve a cabo cualquier cambio de configuraci&oacute;n
d456 3
a458 3
<i>named</i> antes de actualizar a la versi&oacute;n 2.4 o posterior.
Lea la secci&oacute;n espec&iacute;fica para su versi&oacute;n en este
documento.
d461 1
a461 1
3. Aseg&uacute;rese de que todos los directorios apropiados hayan sido
d466 1
d468 1
d470 1
d472 1
a472 2
4. Compile un nuevo n&uacute;cleo (&quot;kernel&quot;):

d484 1
d487 1
a487 1
5. Compile el sistema:
d489 1
d492 1
d495 5
a499 4
6. Actualice /etc y /dev a mano.  &Eacute;stos no se actualizan de
forma autom&aacute;tica.  Escoja un directorio con espacio suficiente
para /, /dev, /var, y /etc.  En este ejemplo usar&eacute;
<i>/home/newroot</i> 
d503 1
a503 1
paso.  Esto hace que /tmp sea una mala elecci&oacute;n):
d505 1
d509 1
d511 3
a513 3
Ahora compare los ficheros en /home/newroot con sus correspondientes ya
instalados.  Reemplace o actualice los ficheros seg&uacute;n sea
necesario.
d515 1
d517 1
d520 3
a522 3
7. Reinicie para asegurarse de que los nuevos ficheros en /etc sean los
correctos.
</pre>
d1535 17
a1551 2
<li>Si no va a hacer un 'make build' completo, regenere los ficheros de
    cabecera de Kerberos y recompile Kerberos:
a1553 3
   # rm -r /usr/include/kerberosIV*
   # cd /usr/src
   # make includes
d1674 4
a1677 18
<i>gcc</i> se ha actualizado a la versi&oacute;n 2.95.3 pre-release.
El procedimiento correcto para compilar el nuevo compilador es como
sigue a continuaci&oacute;n:

<pre>
  # cd /usr/src/gnu/egcs/gcc
  # make -f Makefile.bsd-wrapper obj
  # make -f Makefile.bsd-wrapper clean
  # make -f Makefile.bsd-wrapper depend
  # make -f Makefile.bsd-wrapper 
  # make -f Makefile.bsd-wrapper install
  # make -f Makefile.bsd-wrapper clean
  # make -f Makefile.bsd-wrapper depend
  # make -f Makefile.bsd-wrapper 
  # make -f Makefile.bsd-wrapper install
</pre>

Y despu&eacute;s invocar un <i>make build</i> normal.
d1684 2
a1685 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.35 2000/06/11 18:32:27 kjell Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.5 2000/06/12 16:03:21 horacio Exp $<br>
@


1.4
log
@
Sync with Badlands Translation CVS. Work by Horacio.
@
text
@d10 1
a10 1
<h3>&Uacute;ltima Versi&oacute;n de OpenBSD - 2.6</h3>
d16 1
a16 1
&Uacute;ltima Actualizaci&oacute;n - $OpenBSD: upgrade-minifaq.html,v 1.34 2000/06/05 13:20:21 kjell Exp $
d36 3
a38 2
1.1: Terminolog&iacute;a.  ¿Qu&eacute; es <i>-current</i>?
     ¿Qu&eacute; son los <i>snapshots</i>?
d43 2
a44 2
1.2: Cu&aacute;l es la forma m&aacute;s f&aacute;cil de actualizar a
     <i>-current</i>?
d49 2
a50 2
1.3: No puedo encontrar ning&uacute;n &quot;snapshot&quot; en el servidor de
     FTP.  ¿D&oacute;nde est&aacute;n?
d55 1
a55 1
1.4: ¿C&oacute;mo obtengo los fuentes m&aacute;s recientes?
d60 1
a60 1
1.5: Ya tengo el &aacute;rbol, ¿c&oacute;mo lo compilo?
d65 2
a66 2
1.6: 'make build' par&oacute; en la mitad del proceso, ¿tengo que hacerlo
     todo de nuevo?
d71 2
a72 1
1.7: Me da errores durante la compilaci&oacute;n, ¿qu&eacute; hago?
d80 2
a81 2
2.1: ¿Cu&aacute;les son los mayores problemas para actualizar desde la 2.3 a
     la 2.4?
d87 1
a87 1
     <i>ssleay</i>.
d100 2
a101 2
3.1: ¿Cu&aacute;les son los mayores problemas para actualizar desde la 2.4 a
     la 2.5?
d114 2
a115 2
4.1: ¿Cu&aacute;les son los mayores problemas para actualizar desde la 2.5 a
     la 2.6?
d120 1
a120 1
4.2: ¿C&oacute;mo actualizo <i>gcc</i> a <i>egcs</i>?
d129 6
a134 5
<a href="#4.2.4">4.2.4 - egcs parece mucho m&aacute;s lento que gcc</a><br>
<a href="#4.2.5">4.2.5 - egcs genera c&oacute;digo de mayor tama&ntilde;o 
			 que gcc</a><br>
<a href="#4.2.6">4.2.6 - Despu&eacute;s de instalar egcs, me queda muy poco
			 espacio en el disco</a><br>
d143 1
a143 1
     syscall</i>.
d153 2
a154 2
4.5: Despu&eacute;s de <b>(U)</b>pgrade (actualizar), la extracci&oacute;n de
     <i>base26.tar.gz</i> falla con un mensaje.
d157 1
a157 1
<h3>5.0 - Actualizar desde la Versi&oacute;n a 2.6 &quot;-current&quot;</h3>
d165 2
a166 2
5.2: El n&uacute;cleo del sistema ya no reconoce mi dispositivo <i>pn</i>
     (o <i>mx</i>, <i>al</i>, <i>ax</i>).
d191 9
a199 2
5.7: Despu&eacute;s de actualizar a <i>-current</i>, los n&uacute;cleos que
     incluyen <i>apm(8)</i> ya no arrancan.
d212 9
a220 2
<h4>1.1: Terminolog&iacute;a. ¿Qu&eacute; es <i>-current</i>?  ¿Qu&eacute; son
los <i>snapshots</i>?</h4>
d223 4
a226 7
A diferencia de otros proyectos de Sistemas Operativos como Linux y FreeBSD,
el desarrollo de OpenBSD tiene lugar desde un &uacute;nico &aacute;rbol de
fuentes no ramificado.
Las &laquo;versiones oficiales&raquo; (&quot;releases&quot;) de OpenBSD se
producen con intervalos aproximados de seis meses.
&Eacute;stas se enumeran en un modo convencional (2.x).
La versi&oacute;n oficial de OpenBSD actual es la 2.6.
d230 8
a237 9
(&laquo;openbsd-actual&raquo;), se refiere a la versi&oacute;n de 
&uacute;ltima hora del &aacute;rbol de fuentes contenida en el repositorio 
de CVS.
&Eacute;ste es el &aacute;rbol que usan con m&aacute;s asiduidad los
desarrolladores de OpenBSD.
El &aacute;rbol <i>-current</i> contiene todo el c&oacute;digo que
est&aacute; planeado para el lanzamiento de la siguiente versi&oacute;n.
De vez en cuando, algunos valientes abandonan las versiones oficiales y
utilizan <i>openbsd-current</i>, generalmente para aprovechar funcionalidades
d239 3
a241 2
Sin embargo, debido a su naturaleza de incertidumbre, la actualizaci&oacute;n
a <i>-current</i> no se recomienda a usuarios no t&eacute;cnicos.
d244 2
a245 2
Entre una versi&oacute;n oficial y otra, se ponen a disposici&oacute;n unas
versiones llamadas
d248 13
a260 7
<i>-current</i>.
Debido a que son un reflejo del estado actual de desarrollo, no se puede
garantizar que los <i>snapshots</i> funcionen correctamente... ni siquiera
que funcionen.
Los <i>snapshots</i> son bastante &uacute;tiles cuando se est&aacute;
actualizando desde una versi&oacute;n oficial (o una versi&oacute;n de
<i>-current</i> m&aacute;s antigua) a la del &aacute;rbol actual.
d264 2
a265 2
<h4>1.2: Cu&aacute;l es la forma m&aacute;s f&aacute;cil de actualizar a
<i>-current</i>?</h4>
d268 2
a269 2
Debido a cambios en las bibliotecas de base, actualizar de una versi&oacute;n
oficial a <i>-current</i> no siempre es f&aacute;cil.
d271 6
a276 7
actualizar primero al <i>snapshot</i> m&aacute;s reciente (por lo general,
mediante una instalaci&oacute;n por FTP).
Una vez el <i>snapshot</i> ha sido instalado, se pueden 
<a href="#1.4">obtener</a> los fuentes m&aacute;s recientes y
<a href="#1.5">compilarlos</a>.
Este procedimiento deber&iacute;a eliminar la mayor&iacute;a de problemas con
las bibliotecas y las herramientas necesarias.
d280 2
a281 2
<h4>1.3: No puedo encontrar ning&uacute;n &quot;snapshot&quot; en el servidor
de FTP.  ¿D&oacute;nde est&aacute;n?</h4>
d285 3
a287 3
distribuci&oacute;n justo antes del lanzamiento de una nueva versi&oacute;n
oficial.
Esto ya no forma parte de la pol&iacute;tica de OpenBSD.
d290 4
a293 4
Los <i>snapshots</i> se pueden retirar seg&uacute;n se vayan anticuando (o
seg&uacute;n dejen de ser relevantes).
Si no hay ning&uacute;n <i>snapshots</i> disponible, entonces debe actualizar
a la versi&oacute;n m&aacute;s reciente y compilar lo restante desde los
d298 2
a299 1
<h4>1.4: ¿C&oacute;mo obtengo los fuentes m&aacute;s recientes?</h4>
d306 3
a308 2
Por ejemplo, para obtener el &aacute;rbol completo mediante CVS (usando la
shell bash;  para otras, substituya <i>export</i> por <i>setenv</i>):
d319 1
a319 1
<h4>1.5: Ya tengo el &aacute;rbol, ¿c&oacute;mo lo compilo?</h4>
d328 2
a329 2
Si hab&iacute;a creado un directorio /usr/obj separado, l&iacute;mpielo y
reconstruya los enlaces simb&oacute;licos:
d336 4
a339 4
Si se encuentra con que tiene que realizar este paso muchas veces, puede
encontrar mucho m&aacute;s r&aacute;pido poner /usr/obj en su propia
partici&oacute;n y usar <i>newfs</i> en lugar de <i>rm</i>.
Por ejemplo, lo que yo hago es:
d346 2
a347 2
Si est&aacute; preocupado porque pueda haber ficheros objeto en
su &aacute;rbol de fuentes, haga lo siguiente:
d357 4
a360 5
2. Lleve a cabo cualquier cambio de configuraci&oacute;n espec&iacute;fico
para la versi&oacute;n.
Por ejemplo, los usuarios de la versi&oacute;n 2.3 deben a&ntilde;adir el
usuario y el grupo <i>named</i> antes de actualizar a la versi&oacute;n 2.4 o
posterior.
d366 3
a368 4
creados.
Esto es muy importante cuando se actualiza desde versiones m&aacute;s
antiguas, pero a veces necesario en otros casos.
La forma m&aacute;s f&aacute;cil de hacerlo es:
d394 8
a401 8
6. Actualice /etc y /dev a mano.
&Eacute;stos no se actualizan de forma autom&aacute;tica.
Escoja un directorio con espacio suficiente para /, /dev, /var, y /etc.
En este ejemplo usar&eacute; <i>/home/newroot</i> 
(<b>Nota</b>: aseg&uacute;rese de que la jerarqu&iacute;a de directorio que
escoja no tenga permiso de escritura para grupo (g+w) u otro permiso de
escritura (o+w), o sendmail se quejar&aacute; durante este paso.
Esto hace que /tmp sea una mala elecci&oacute;n):
d408 2
a409 2
instalados.
Reemplace o actualice los ficheros seg&uacute;n sea necesario.
d420 2
a421 2
<h4>1.6: 'make build' par&oacute; en la mitad del proceso, ¿tengo que hacerlo
todo de nuevo?</h4>
d424 2
a425 2
Yo lo har&iacute;a, pero si realmente quiere retomarlo desde el punto en que
se qued&oacute;, haga lo siguiente:
d432 2
a433 2
De este modo le mostrar&aacute; lo que 'make build' est&eacute; haciendo.
Por ejemplo, el m&iacute;o dice:
d448 3
a450 2
Para empezar desde donde se qued&oacute;, vuelva a invocar las &oacute;rdenes
desde el punto en donde se cort&oacute; la compilaci&oacute;n.
d453 2
a454 2
Si tiene que realizar este procedimiento muchas veces, es posible que le
convenga crear un nuevo objetivo en su fichero makefile.
d461 2
a462 1
<h4>1.7: Me da errores durante la compilaci&oacute;n, ¿qu&eacute; hago?</h4>
d465 4
a468 4
Si su 'make build' finaliza con un error, es muy posible que se deba a que no
elimin&oacute; sus ficheros objeto antiguos antes de recompilar.
Lea la <a href="#1.5">secci&oacute;n 1.5</a> para m&aacute;s detalles sobre
c&oacute;mo limpiar esos ficheros.
d471 4
a474 3
Si est&aacute; seguro de que su &aacute;rbol est&aacute; limpio de viejos
restos, y a&uacute;n as&iacute; recibe un error de compilaci&oacute;n, es que
ha ocurrido una de las siguientes tres cosas:
d482 2
a483 2
    Esto es lo que pasa cuando se vive peligrosamente.
    Busque entre los mensajes m&aacute;s recientes a las listas
d487 6
a492 6
<li>Alguien ha &laquo;roto&raquo; temporalmente el &aacute;rbol de fuentes.
    Esto es muy poco com&uacute;n, y por lo general se soluciona
    inmediatamente.
    Espere unas pocas horas y vuelva a obtener el &aacute;rbol de fuentes.
    Si no puede esperar, intente bajarse un &aacute;rbol con uno o dos
    d&iacute;as de antelaci&oacute;n.
d495 5
a499 5
Si ya ha probado todas las alternativas anteriores y su problema persiste
durante m&aacute;s de un par de d&iacute;as, env&iacute;e un informe sobre su
problema a misc@@openbsd.org.
Aseg&uacute;rese de incluir los mensajes de error relevantes, as&iacute; como
cualquier peculiaridad de su configuraci&oacute;n.
d506 2
a507 2
<h4>2.1: ¿Cu&aacute;les son los mayores problemas para actualizar desde la
2.3 a la 2.4?</h4>
d513 6
a518 6
Con posterioridad a la versi&oacute;n 2.3, el d&aelig;mon de DNS <i>named</i>
se cambi&oacute; a una jaula chroot.
Para hacer este cambio posible, se cre&oacute; el usuario <i>named</i>.
Si todav&iacute;a no lo tiene, necesitar&aacute; crearlo para estar seguro de
que todos los directorios se crean correctamente durante el proceso de
compilaci&oacute;n.
d539 2
a540 2
Probablemente le falte una entrada para el usuario <i>named</i> en el fichero
de la contrase&ntilde;a.
d553 4
a556 6
permisos.
Si este usuario faltara, parte del proceso de compilaci&oacute;n
fallar&iacute;a.
Si hiciera una captura de pantalla de su compilaci&oacute;n de un fichero
(por ejemplo, con <i>make build &amp;&gt;/tmp/build.log</i>), notar&iacute;a el
siguiente mensaje:
d568 3
a570 3
Desafortunadamente para nosotros, la compilaci&oacute;n continuar&iacute;a
felizmente su camino, ignorando completamente el hecho de que ha ocurrido un
error.
d573 2
a574 1
Si el usuario <i>named</i> existiera, mtree funcionar&iacute;a correctamente:
d597 3
a599 4
En este caso, la raz&oacute;n de que fallara ser&iacute;a que el directorio
<i>/usr/include/ssl</i> nunca fue creado.
Sin los ficheros de cabeceras, la compilaci&oacute;n de <i>ssleay</i>
fallar&iacute;a.
d605 4
a608 4
Cree el usuario y el grupo <i>named</i>.
Elimine <i>/usr/include/ssl</i>, <i>/var/named</i>, y cualquier otro
directorio de la lista anterior que hubiera sido creado por error como un
fichero normal por 'make build'.
d612 2
a613 1
<h4>2.3: He intentado compilar todo, pero 'make' falla para PowerPC.</h4>
d616 2
a617 2
Su &aacute;rbol del directorio es incompleto.
En concreto, falta el directorio <i>/usr/share/man/cat4/powerpc</i>.
d669 2
a670 2
<h4>3.1: ¿Cu&aacute;les son los mayores problemas para actualizar desde la
2.4 a la 2.5?</h4>
d677 2
a678 2
Antes de hacer un 'make build', recompile <i>cap_mkdb</i> desde los fuentes
m&aacute;s recientes:
d685 2
a686 1
Y 'make build' deber&iacute;a seguir el proceso hasta que estuviera completo.
d689 2
a690 1
<h4>Cambios en las p&aacute;ginas de manual (&quot;man pages&quot;)</h4>
d693 5
a697 5
Varias p&aacute;ginas de manual se cambiaron desde la secci&oacute;n 1 a
secciones posteriores.
Desafortunadamente, si las p&aacute;ginas de manual viejas se dejan en la
secci&oacute;n 1, los usuarios que no lo sepan no podr&aacute;n ver las
&uacute;ltimas versiones de las p&aacute;ginas.
d712 1
a712 1
Tiene que eliminar el contenido del directorio <i>obj/</i> antes de 
d736 2
a737 2
Necesita compilar un nuevo <i>cap_mkdb</i>.
Mire en la <a href="#3.1">secci&oacute;n 3.1</a>.
d744 2
a745 2
<h4>4.1: ¿Cu&aacute;les son los mayores problemas para actualizar desde la
2.5 a la 2.6?</h4>
d752 2
a753 3
versi&oacute;n de <i>make</i> para compilar correctamente.
Debe recompilar make antes de compilar el nuevo Perl.
Haga lo siguiente:
d761 3
a763 3
Ahora contin&uacute;e y recompile el nuevo Perl.
Necesitar&aacute; limpiar el directorio <code>obj</code> de Perl a mano antes
de compilar.
d766 2
a767 2
Los desarrolladores de Perl deber&iacute;an tomar nota de los &uacute;ltimos
cambios.
d805 2
a806 3
encontrar&aacute;.
Para ver instrucciones detalladas, lea la <a href="#4.2">secci&oacute;n
4.2</a>.
d812 4
a815 4
La estructura <tt>statfs</tt> ha cambiado desde el 31 de mayo.
Debe recompilar el n&uacute;cleo de su sistema antes de intentar un 'make
build'.
Lea la <a href="#4.3">secci&oacute;n 4.3</a> para m&aacute;s detalles.
d819 1
a819 1
<h4>4.2: ¿C&oacute;mo actualizo <i>gcc</i> a <i>egcs</i>?</h4>
d822 4
a825 5
El modo m&aacute;s seguro es actualizar a un <i>snapshot</i> reciente, en
cuanto haya uno disponible.
<b>¡Busque un <i>snapshot</i> primero!</b>.
Arrancar el compilador nuevo desde el viejo deber&iacute;a ser el
<i>&uacute;ltimo recurso</i>.
d829 2
a830 2
arranque todav&iacute;a no es perfecto.
Hasta la fecha, deber&iacute;a funcionar en las siguientes, si lleva cuidado:
d842 5
a846 5
<i>egcs-snapshot</i>, que se encuentra disponible en la
<a href="../../es/ports.html">colecci&oacute;n de portes</a>.
Si funciona, la versi&oacute;n del &aacute;rbol tambi&eacute;n lo
har&aacute;.
&Eacute;ste es el m&eacute;todo <i>m&acute;s seguro</i> para proceder.
d851 4
a854 4
Recuerde que existen dos copias de <i>gas</i> y <i>ld</i> en el &aacute;rbol.
En <b>i386</b> y <b>sparc</b>, no se usan las versiones de <i>binutils</i>.
Debe usar en su lugar <tt>/usr/src/gnu/usr.bin/gas</tt> y
<tt>/usr/src/gnu/usr.bin/ld</tt>.
d857 7
a863 8
Las siguientes instrucciones se refieren al <i>snapshot</i> original de egcs
(egcs-990517).
Desde entonces existe en el &aacute;rbol un segundo <i>snapshot</i>
(egcs-990608).
Si viene de la versi&oacute;n &quot;vainilla&quot; 2.5, es muy probable que
no pueda compilar la &uacute;ltima versi&oacute;n directamente.
En este caso tendr&aacute; que arrancar con una versi&oacute;n intermedia
siguiendo estas instrucciones:
d945 1
a945 1
¿Mantener gcc 2.8.1?
d1006 3
a1008 4
[nota del autor: en realidad no funciona del todo.
xlint no compilar&aacute;.
Sin embargo, la soluci&oacute;n es simple.
Ejecute <code>make &amp;&amp; make install</code> en el directorio
d1010 2
a1011 2
build</code> y proceda.
Vea la <a href="#4.2.2">secci&oacute;n 4.2.2</a>.]
d1043 2
a1044 1
problemas que no aparezcan aqu&iacute; se deben enviar a tech@@openbsd.org.
d1048 2
a1049 1
<h5>4.2.1 - <tt>i386</tt> y <tt>sparc</tt> ya no usan <tt>#define</tt></h5>
d1052 5
a1056 6
Esto es cierto.
<i>egcs</i> usa <tt>__i386__</tt> y <tt>__sparc__</tt> que son de
c&oacute;digo m&aacute;s limpio.
Si necesita compilar c&oacute;digo que dependa en los viejos define,
a&ntilde;ada <tt>-Dsparc</tt> o <tt>-Di386</tt> a la ubicaci&oacute;n
apropiada del fichero Makefile.
d1063 3
a1065 3
Esto se debe a diferencias sem&aacute;nticas en cpp.
La soluci&oacute;n es f&aacute;cil y parecida al problema de <i>cap_mkdb</i>
descrito en la <a href="#3.1">secci&oacute;n 3.1</a>.
d1083 2
a1084 2
Ha sido v&iacute;ctima de un error del enlazador.
He aqu&iacute; un mensaje de relevancia:
d1118 2
a1119 1
<h5>4.2.4 - <i>egcs</i> parece mucho m&aacute;s lento que <i>gcc</i></h5>
d1122 4
a1125 4
Lo es, pero existe un motivo.
<i>egcs</i> act&uacute;a optimizando m&aacute;s pases.
La alineaci&oacute;n de los datos y otras funcionalidades semejantes
mejorar&aacute;n el c&oacute;digo generado por <i>egcs</i>.
d1133 4
a1136 6
S&iacute;, lo hace.
Esto se nota especialmente con el viejo conmutador <tt>-O2</tt> de <i>gcc</i>.
<i>egcs</i> introduce una nueva opci&oacute;n, <tt>-Os</tt>, que optimiza el
espacio.
Estos es comparable a grandes rasgos con el viejo comportamiento
<tt>-O2</tt>.
d1146 1
a1146 2

(a prop&oacute;posito de esto, los cambios en perl mencionados en la
d1148 2
a1149 2
directorio <tt>/usr/lib/perl5</tt>.
La nueva ubicaci&oacute;n para estos datos es <tt>/usr/libdata/perl5</tt>).
d1157 2
a1158 4
<i>cpp</i>.
Obtenga la &uacute;ltima versi&oacute;n, recompile <i>cpp</i>, y
contin&uacute;e.
Por ejemplo:
d1171 2
a1172 3
Si <i>make obj</i> falla, nombrando errores en un Makefile, los include de
makefile es posible que est&eacute;n obsoletos.
Por ejemplo:
d1200 2
a1201 2
La estructura <tt>statfs</tt> del n&uacute;cleo ha cambiado.
Necesita recompilar el n&uacute;cleo antes de intentar un <i>make build</i>.
d1207 2
a1208 2
La estructura <tt>statfs</tt> del n&uacute;cleo ha cambiado.
La nueva <tt>struct statfs</tt> tiene las siguientes funcionalidades:
d1211 2
a1212 2
<li>Tiene un campo de indicadores <tt>u_int32_t</tt> (ahora softdep puede
    tener un indicador real).
d1215 3
a1217 3
    Nota: la p&aacute;gina de manual ment&iacute;a sobre configurar campos
    inv&aacute;lidos o no usados a -1.
    SunOS lo hace, pero nuestro c&oacute;digo nunca lo ha hecho.
d1221 3
a1223 3
    confusi&oacute;n.
    Es comprensible que esto pueda ser la causa de que alg&uacute;n viejo
    c&oacute;digo no compile, pero eso es mejor que fallar en silencio.
d1226 3
a1228 4
    estructura <tt>FSTYPE_args</tt>.
    Esto quiere decir que ahora <i>mount</i> le puede indicar todas las
    opciones que tenga un sistema de archivo montado.
    Esto es especialmente bueno para NFS.
d1234 5
a1238 5
<li>La emulaci&oacute;n de statfs de Linux no convert&iacute;a entre nombres
    de sistema de archivo de BSD y n&uacute;meros <tt>f_type</tt> de Linux.
    Ahora lo hace, ya que el n&uacute;mero <tt>f_type</tt> de BSD es
    in&uacute;til para las aplicaciones de Linux (y de todos modos ha sido
    eliminado).
d1240 2
a1241 2
<li>La estructura statfs de FreeBSD es diferencte de la nuestra (tanto la
    vieja como la nueva) y por lo tanto necesita conversi&oacute;n.
d1245 3
a1247 4
<li>Ahora <b>mount(8)</b> mostrar&aacute; informaci&oacute;n adicional cuando
    se invoque sin argumentos.
    Sin embargo, para verlo <i>todo</i> necesitar&aacute; usar el indicador
    -v (verbosidad).
d1255 2
a1256 2
Cuando actualice a la versi&oacute;n 2.6 necesitar&aacute; crear un enlace
simb&oacute;lico para gcc.
d1275 4
a1278 3
En la versi&oacute;n 2.5 <tt>/usr/include/machine</tt> era un directorio, y
<tt>/usr/include/i386</tt> era un enlace a ese directorio.
En la versi&oacute;n 2.6 esta situaci&oacute;n se ha revertido.
d1288 1
a1288 1
<h3>5.0 - Actualizar desde la Versi&oacute;n a 2.6 <i>-current</i></h3>
d1296 5
a1300 5
Existe un nuevo fichero <tt>termcaps.master</tt>.
Necesitar&aacute; regenerar los ficheros <tt>terminfo</tt> y
<tt>termcaps</tt> con la versi&oacute;n actual de tic(1).
Si est&aacute; actualizando a trav&eacute;s de <i>make build</i>, se
usar&aacute; la versi&oacute;n correcta de
d1302 2
a1303 2
y regenerar&aacute; los ficheros por usted.
En caso contrario, ver&aacute; el siguiente error:
d1318 2
a1319 2
<h4>5.2: El n&uacute;cleo del sistema ya no reconoce mi dispositivo <i>pn</i>
(o <i>mx</i>, <i>al</i>, <i>ax</i>)</h4>
d1322 4
a1325 4
(Nota: en algunas partes de esta secci&oacute;n se usa s&oacute;lo <i>pn</i> 
para simplificar.
La informaci&oacute;n es igualmente aplicable a <i>pn</i>, <i>mx</i>,
<i>al</i>, o <i>ax</i>, seg&uacute;n el caso)
d1329 4
a1332 5
Estos cuatro controladores han sido substituidos por el controlador unificado
<i>dc</i>.
Debe cambiar cualquier menci&oacute;n a <i>pn*</i>, <i>mx</i>, <i>al</i>, o
<i>ax</i> en sus ficheros de configuraci&oacute;n.
Esto incluye:
d1336 3
a1338 2
<li>Actualizar el/los fichero/s de configuraci&oacute;n del n&uacute;cleo
    (ayuda: empiece con un n&uacute;cleo GENERIC nuevo y modif&iacute;quelo).
d1341 3
a1343 2
<li>Realizar cambios en <tt>/etc/ipnat.rules</tt> y <tt>/etc/ipf.rules</tt>
    para que reflejen el nuevo nombre de la interfaz.
d1369 5
a1373 5
<i>gcc</i> 2.95.2 se fusion&oacute; en el &aacute;rbol de fuentes de OpenBSD
alrededor del 19 de enero de 2.000.
Para que <i>gcc</i> compile correctamente, se requiere la versi&oacute;n
m&aacute;s reciente de la biblioteca <i>libiberty</i> (post 2.6).
Para compilar esta biblioteca, haga lo siguiente:
d1452 1
a1452 2
<b>antes</b> de intentar un 'make build'.
En otras palabras:
d1466 3
a1468 3
configuraci&oacute;n de sendmail han cambiado.
Ahora todo, excepto el fichero pid, se encuentra en /etc/mail.
Adem&aacute;s, varios ficheros han cambiado de nombre.
d1517 2
a1518 1
    <tt>/etc/mail/sendmail.cf</tt> en lugar de <tt>/etc/sendmail.cf</tt>
d1521 3
a1523 2
    &Eacute;ste es el camino que ofrece menos resistencia y no tendr&aacute;
    que cambiar la ubicaci&oacute;n de ning&uacute;n otro fichero.
d1530 5
a1534 5
    ya que la habr&aacute; incluido 'make'.
    Note tambi&eacute;n que, a partir de ahora, cuando a&ntilde;ada 
    m&aacute;quinas a la clase w (mediante
    &quot;Cw nombredem&aacute;quina&quot;), tendr&aacute; que hacerlo en la
    secci&oacute;n LOCAL_CONFIG (vea como ejemplo <tt>openbsd-lists.mc</tt>).
d1539 2
a1540 2
<h4>5.7: Despu&eacute;s de actualizar a <i>-current</i>, los n&uacute;cleos
que incluyen soporte para
d1545 2
a1546 2
(&quot;bootblocks&quot;).
Ver la <a href="faq14.html#14.8">secci&oacute;n 14.8</a> de las preguntas
d1550 26
d1580 2
a1581 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.34 2000/06/05 13:20:21 kjell Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.4 2000/06/06 22:48:05 horacio Exp $<br>
@


1.3
log
@Sync with Badlands Translation CVS. Brought a bunch of files up to date.
@
text
@d16 1
a16 1
&Uacute;ltima Actualizaci&oacute;n - $OpenBSD: upgrade-minifaq.html,v 1.32 2000/05/15 02:36:52 wvdputte Exp $
d1370 4
d1419 1
a1419 1
   # rm -r /usr/include/kerberosIV
d1539 2
a1540 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.32 ]<br>
$Translation: upgrade-minifaq.html,v 1.3 2000/05/15 04:51:28 wim Exp $<br>
a1552 1

@


1.2
log
@Sync with Badlands Translation CVS. Work by Horacio.
@
text
@d16 1
a16 1
&Uacute;ltima Actualizaci&oacute;n - $Date: 2000/04/29 17:58:09 $
d1535 2
a1536 2
Originally [OpenBSD: upgrade-minifaq.html,v 1.31 2000/04/18 18:43:22 kjell Exp ]<br>
$Translation: upgrade-minifaq.html,v 1.2 2000/04/29 17:58:09 horacio Exp $<br>
@


1.1
log
@Sync with Badlands CVS. Work by Horacio
@
text
@d16 1
a16 1
&Uacute;ltima Actualizaci&oacute;n - $Date: 2000/04/20 16:41:15 $
d1525 1
a1525 1
Necesita actualizar los &laquo;bloqueos de arranque&raquo;
d1527 1
a1527 1
Ver la <a href="../faq14.html#14.8">secci&oacute;n 14.8</a> de las preguntas
d1536 1
a1536 1
$Translation: upgrade-minifaq.html,v 1.1 2000/04/20 16:41:15 horacio Exp $<br>
@

