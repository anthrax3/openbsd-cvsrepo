head	1.51;
access;
symbols;
locks; strict;
comment	@# @;


1.51
date	2014.04.01.17.03.08;	author nick;	state dead;
branches;
next	1.50;

1.50
date	2004.01.04.22.23.56;	author horacio;	state Exp;
branches;
next	1.49;

1.49
date	2003.11.03.14.45.36;	author horacio;	state Exp;
branches;
next	1.48;

1.48
date	2003.10.26.22.50.13;	author horacio;	state Exp;
branches;
next	1.47;

1.47
date	2003.10.20.14.13.37;	author horacio;	state Exp;
branches;
next	1.46;

1.46
date	2003.06.21.11.14.33;	author jufi;	state Exp;
branches;
next	1.45;

1.45
date	2003.05.06.21.22.24;	author jufi;	state Exp;
branches;
next	1.44;

1.44
date	2003.05.01.20.47.29;	author jufi;	state Exp;
branches;
next	1.43;

1.43
date	2003.04.13.11.06.32;	author jufi;	state Exp;
branches;
next	1.42;

1.42
date	2003.04.07.22.04.57;	author jufi;	state Exp;
branches;
next	1.41;

1.41
date	2003.03.19.19.00.46;	author jufi;	state Exp;
branches;
next	1.40;

1.40
date	2003.03.14.09.47.04;	author jufi;	state Exp;
branches;
next	1.39;

1.39
date	2003.03.01.16.45.43;	author jufi;	state Exp;
branches;
next	1.38;

1.38
date	2003.02.25.20.13.04;	author jufi;	state Exp;
branches;
next	1.37;

1.37
date	2003.01.13.11.43.09;	author jufi;	state Exp;
branches;
next	1.36;

1.36
date	2003.01.06.22.01.41;	author jufi;	state Exp;
branches;
next	1.35;

1.35
date	2002.12.17.14.38.05;	author jufi;	state Exp;
branches;
next	1.34;

1.34
date	2002.12.04.22.07.14;	author jufi;	state Exp;
branches;
next	1.33;

1.33
date	2002.11.14.11.12.53;	author jufi;	state Exp;
branches;
next	1.32;

1.32
date	2002.11.13.19.04.14;	author jufi;	state Exp;
branches;
next	1.31;

1.31
date	2002.11.05.21.31.22;	author jufi;	state Exp;
branches;
next	1.30;

1.30
date	2002.10.17.12.12.55;	author jufi;	state Exp;
branches;
next	1.29;

1.29
date	2002.10.14.13.44.29;	author jufi;	state Exp;
branches;
next	1.28;

1.28
date	2002.07.14.12.24.28;	author jufi;	state Exp;
branches;
next	1.27;

1.27
date	2002.07.05.07.30.01;	author jufi;	state Exp;
branches;
next	1.26;

1.26
date	2002.06.17.21.40.24;	author jufi;	state Exp;
branches;
next	1.25;

1.25
date	2002.05.22.17.49.47;	author jufi;	state Exp;
branches;
next	1.24;

1.24
date	2002.05.14.20.03.55;	author jufi;	state Exp;
branches;
next	1.23;

1.23
date	2002.05.01.08.53.29;	author jufi;	state Exp;
branches;
next	1.22;

1.22
date	2002.03.30.11.49.55;	author jufi;	state Exp;
branches;
next	1.21;

1.21
date	2002.02.10.12.24.44;	author jufi;	state Exp;
branches;
next	1.20;

1.20
date	2002.01.28.19.21.45;	author jufi;	state Exp;
branches;
next	1.19;

1.19
date	2002.01.26.11.46.28;	author jufi;	state Exp;
branches;
next	1.18;

1.18
date	2002.01.19.09.12.50;	author jufi;	state Exp;
branches;
next	1.17;

1.17
date	2001.12.31.10.55.47;	author jufi;	state Exp;
branches;
next	1.16;

1.16
date	2001.11.05.21.17.05;	author jufi;	state Exp;
branches;
next	1.15;

1.15
date	2001.09.20.05.08.52;	author jufi;	state Exp;
branches;
next	1.14;

1.14
date	2001.06.10.08.28.18;	author jufi;	state Exp;
branches;
next	1.13;

1.13
date	2001.04.25.19.53.54;	author jufi;	state Exp;
branches;
next	1.12;

1.12
date	2001.04.07.07.58.54;	author jufi;	state Exp;
branches;
next	1.11;

1.11
date	2001.02.25.20.15.33;	author jufi;	state Exp;
branches;
next	1.10;

1.10
date	2000.12.28.22.00.23;	author jufi;	state Exp;
branches;
next	1.9;

1.9
date	2000.10.24.18.39.27;	author jufi;	state Exp;
branches;
next	1.8;

1.8
date	2000.09.29.07.00.04;	author jufi;	state Exp;
branches;
next	1.7;

1.7
date	2000.07.15.17.36.54;	author wvdputte;	state Exp;
branches;
next	1.6;

1.6
date	2000.06.16.16.28.04;	author wvdputte;	state Exp;
branches;
next	1.5;

1.5
date	2000.05.21.22.36.40;	author wvdputte;	state Exp;
branches;
next	1.4;

1.4
date	2000.05.16.10.07.38;	author wvdputte;	state Exp;
branches;
next	1.3;

1.3
date	2000.04.30.20.30.15;	author wvdputte;	state Exp;
branches;
next	1.2;

1.2
date	2000.04.22.11.06.58;	author wvdputte;	state Exp;
branches;
next	1.1;

1.1
date	2000.04.19.12.29.44;	author wvdputte;	state Exp;
branches;
next	;


desc
@@


1.51
log
@
Abandon translations, per deraadt@@ and ajacoutot@@.
Thanks to all those that did the translation work, and my appologies to
those who had to translate my writing!
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>10 - Gesti&oacute;n del sistema</title>
<link rev="made" href="mailto:www@@openbsd.org">
<meta http-equiv="Content-Language" content="es">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="resource-type" content="documento">
<meta name="description"   content="Preguntas Frecuentes de OpenBSD">
<meta name="keywords"      content="openbsd,faq,documentación">
<meta name="distribution"  content="global">
<meta name="copyright"     content="Este documento es copyright 1998-2004 de OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000">
<!-- máx. 72 caracteres por línea -->

<img alt="[OpenBSD]" height="30" width="141" src="../../images/smalltitle.gif">
<p>
<font color= "#0000e0">
<a href="index.html">[&Iacute;ndice de documentos]</a>
<a href="faq9.html">[Secci&oacute;n 9 - Migraci&oacute;n desde Linux]</a>
<a href="faq11.html">[Secci&oacute;n 11 - Mejora del rendimiento]</a>
</font>

<h1><font color="#e00000">10 - Gesti&oacute;n del sistema</font></h1>
<hr>

<p>
<h3>&Iacute;ndice de contenidos</h3>
<ul>
<li><a href="#wheel">10.1 - Cuando un usuario intenta convertirse en el
superusuario <em>root</em> con <kbd>su(1)</kbd>, le dice que est&aacute;
en el grupo err&oacute;neo.</a> (<em>wrong group</em>).
<li><a href="#DupFS">10.2 - &iquest;C&oacute;mo puedo duplicar un
sistema de archivos?</a>
<li><a href="#rc">10.3 - &iquest;C&oacute;mo inicio los d&aelig;mon con
el sistema?</a>
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;sektion=8">rc(8)</a>).
<li><a href="#RelayingDenied">10.4 - &iquest;Por qu&eacute; cuando los
usuarios env&iacute;an correo a trav&eacute;s de mi sistema OpenBSD se
les niega el acceso de reenv&iacute;o?</a> (<em>relaying access
denied</em>).
<li><a href="#POP">10.5 - He configurado POP, pero obtengo errores
cuando accedo a mi correo a trav&eacute;s de POP.  &iquest;Qu&eacute;
puedo hacer?</a>
<li><a href="#SendmailDNS">10.6 - &iquest;Por qu&eacute; ignora Sendmail
el fichero <tt>/etc/hosts</tt>?</a>
<li><a href="#HTTPS">10.7 - C&oacute;mo se configura un servidor HTTP
seguro usando ssl(8).</a>
<li><a href="#vipw">10.8 - He hecho cambios a /etc/passwd con un editor,
pero los cambios no funcionan.  &iquest;Por qu&eacute;?</a>
<li><a href="#AddDelUser">10.9 - &iquest;C&oacute;mo a&ntilde;ado un
usuario?  &iquest;C&oacute;mo elimino un usuario?</a>
<li><a href="#FTPOnly">10.10 - &iquest;C&oacute;mo puedo crear una
cuenta s&oacute;lo FTP?</a>
<li><a href="#Quotas">10.11 - C&oacute;mo configurar cuotas para limitar
el uso del disco a los usuarios</a> 
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=quota&amp;sektion=1">quota(1)</a>).
<li><a href="#Kerberos">10.12 - C&oacute;mo se configura un
cliente/servidor Kerberos V.</a>
<li><a href="#AnonFTP">10.13 - C&oacute;mo se configura un servidor de
FTP an&oacute;nimo.</a>
<li><a href="#ftpchroot">10.14 - C&oacute;mo puedo confinar a los
usuarios a sus directorios de usuario (<em>/home</em>) en ftpd(8).</a>
<li><a href="#Patches">10.15 - C&oacute;mo se aplican los parches en
OpenBSD.</a>
<li><a href="#httpdchroot">10.16 - Acerca de chroot() Apache.</a>
<li><a href="#rootshell">10.17 - &iexcl;No me gusta el int&eacute;rprete
(<i>shell</i>) preasignado al usuario <i>root</i>!</a>
<li><a href="#ksh">10.18 - &iquest;Qu&eacute; m&aacute;s puedo hacer con
el int&eacute;rprete ksh?</a>
</ul>

<hr>

<p>
<a name="wheel"></a>
<h2>10.1 - &iquest;Por qu&eacute; me dice que estoy en el grupo
err&oacute;neo cuando intento ingresar como usuario <em>root</em> con
<kbd>su(1)</kbd>?</h2>

<p>
Para que un usuario normal se pueda convertir en el superusuario
<em>root</em>, antes hay que a&ntilde;adir al usuario al grupo
<kbd>wheel</kbd> a mano.  Esto se hace por motivos de seguridad, y se
recomienda tener cuidado con los usuarios a los que se otorgue este
acceso especial.  En OpenBSD, los usuarios que pertenezcan al grupo
<kbd>wheel</kbd> podr&aacute;n usar el programa
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=su&amp;sektion=1">
su(1)</a> en modo usuario (<em>userland program</em>) para tomar la
identidad del superusuario <em>root</em>.  Los usuarios que no
pertenezcan al grupo <kbd>wheel</kbd> no podr&aacute;n usar su(1).  A
continuaci&oacute;n puede verse una entrada de ejemplo en el fichero
<em>/etc/group</em> que asocia al usuario <strong>ericj</strong> al
grupo <kbd>wheel</kbd>.

<p>
Si se va a crear un usuario nuevo con
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&amp;sektion=8">adduser(8)</a>,
se puede asociar al grupo <kbd>wheel</kbd> desde el punto de
inserci&oacute;n &quot;<tt>Invite <i>user</i>&quot; into other
groups:</tt>, simplemente contestando <kbd>wheel</kbd>.  De este modo el
usuario quedar&aacute; a&ntilde;adido a la l&iacute;nea del grupo
<kbd>wheel</kbd> en el fichero <tt>/etc/group</tt>, que quedar&aacute;
del siguiente modo:

<blockquote><pre>
wheel:*:0:root,ericj
</pre></blockquote>

<p>
Si lo que se busca es un modo de permitir a los usuarios acceso limitado
a los privilegios del superusuario, sin tener que asociarlos al grupo
<kbd>wheel</kbd>, entonces se usar&aacute;
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">
sudo(8)</a>.

<p>
<a name="DupFS"></a>
<h2>10.2 - &iquest;C&oacute;mo puedo duplicar un sistema de
archivos?</h2>

<p>
Para duplicar un sistema de archivos se usa
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&amp;sektion=8">dump(8)</a> y
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore(8)</a>.
Por ejemplo, para duplicar todo el directorio <kbd>SRC</kbd> al
directorio <kbd>DST</kbd>, se har&iacute;a lo siguiente:

<blockquote><pre>
# <strong>cd /SRC; dump 0f - . | (cd /DST; restore -rf - )</strong>
</pre></blockquote>

<p>
<kbd>dump</kbd> est&aacute; dise&ntilde;ado para ofrecer una gran
variedad de posibilidades para copias de respaldo/seguridad, y puede
resultar excesivo si s&oacute;lo se quiere duplicar un &uacute;nico
sistema de archivos o parte de &eacute;ste.  La orden
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tar&amp;sektion=1">
tar(1)</a> puede resultar m&aacute;s r&aacute;pida para una
operaci&oacute;n de este tipo.  El formato es muy parecido:

<blockquote><pre>
# <strong>cd /SRC; tar cf -  . | (cd /DST; tar xpf - )</strong>
</pre></blockquote>

<p>
<a name="rc"></a>
<h2>10.3 - &iquest;C&oacute;mo inicio los d&aelig;mon con el sistema?
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;sektion=8">
rc(8)</a>)</h2>

<p>
OpenBSD usa un inicio del estilo
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;sektion=8">
rc(8)</a>, para lo que necesita unos cuantos ficheros claves para
iniciar.

<ul>
<li>/etc/rc - Fichero de configuraci&oacute;n principal.  No se debe
editar.
<li>/etc/rc.conf - Fichero de configuraci&oacute;n usado por
<em>/etc/rc</em> para saber qu&eacute; d&aelig;mon deben iniciarse con
el sistema.
<li>/etc/rc.conf.local - Fichero de configuraci&oacute;n que se puede
usar para anular configuraciones de /etc/rc.conf, sin que sea necesario
tocar el fichero /etc/rc.conf;  muy conveniente para los usuarios que
actualizan el sistema con frecuencia.
<li>/etc/netstart - Fichero de configuraci&oacute;n usado para iniciar
la red.  No se debe editar.
<li>/etc/rc.local - Fichero de configuraci&oacute;n usado para tareas de
administraci&oacute;n local.  Aqu&iacute; se debe almacenar
informaci&oacute;n espec&iacute;fica de la m&aacute;quina anfitriona o
de los d&aelig;mon.
<li>/etc/rc.securelevel - Fichero de configuraci&oacute;n para ejecutar
las &oacute;rdenes que deben ser invocadas antes de los cambios en el
nivel de seguridad.  V&eacute;ase
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=init&amp;sektion=8">
init(8)</a>.
<li>/etc/rc.shutdown - Fichero de configuraci&oacute;n invocado por 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=shutdown&amp;sektion=8">shutdown(8)</a>.
En este fichero se debe a&ntilde;adir cualquier cosa que se quiera hacer
antes de cerrar el sistema.  V&eacute;ase
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.shutdown&amp;sektion=8">rc.shutdown(8)</a>.
</ul>

<p>
<h3>&iquest;C&oacute;mo funciona rc(8)?</h3>

<p>
Los ficheros m&aacute;s importantes para un administrador de sitemas son
<em>/etc/rc.conf</em> (o <i>/etc/rc.conf.local</i>),
<i>/etc/rc.local</i> y <em>/etc/rc.shutdown</em>.  Para hacerse una idea
sobre c&oacute;mo funciona el procedimiento de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;sektion=8">
rc(8)</a>, v&eacute;ase el siguiente flujo:

<p>
Despu&eacute;s de arrancar el n&uacute;cleo del sistema, se inicia
<em>/etc/rc</em>:
<ul>
<li>Se comprueban los sistemas de archivos (<em>filesystems</em>).  Este
paso se omitir&aacute; en caso de que exista el fichero
<em>/etc/fastboot</em>, pero no es conveniente hacerlo de este modo.
<li>Se leen las variables de configuraci&oacute;n de
<em>/etc/rc.conf</em> y, a continuaci&oacute;n, de
<em>/etc/rc.conf.local</em>.  Cualquier configuraci&oacute;n que
aparezca en <em>/etc/rc.conf.local</em> anular&aacute; la
correspondiente en <em>/etc/rc.conf</em>.
<li>Se montan los sistemas de archivos.
<li>Se limpia el sistema de archivos <em>/tmp</em> y se conserva
cualquier fichero creado por el editor.
<li>Se configura la red por medio de <em>/etc/netstart</em>:
   <ul>
   <li>Se configuran las interfaces.
   <li>Se configuran &quot;hostname&quot;, &quot;domainname&quot;, etc.
   </ul>
<li>Se inician los &quot;d&aelig;mon&quot;.
<li>Se realizan otras comprobaciones (<i>quota</i>, <i>savecore</i>,
etc...).
<li>Se invocan y ejecutan los d&aelig;mon locales a trav&eacute;s de
<em>/etc/rc.local</em>.
</ul>

<p>
<h3>Inicio de los d&aelig;mon y servicios predefinidos en OpenBSD</h3>

<p>
La mayor&iacute;a de d&aelig;mon y servicios que vienen predefinidos en
OpenBSD pueden iniciarse durante el arranque, editando el fichero de
configuraci&oacute;n <em>/etc/rc.conf</em>.  Se puede ver un ejemplo en
el fichero
<a href="http://www.openbsd.org/cgi-bin/cvsweb/src/etc/rc.conf">
/etc/rc.conf</a> que viene incluido con el sistema, en donde se ven unas
l&iacute;neas parecidas a la siguiente:

<blockquote><pre>
ftpd_flags=NO           # for non-inetd use: ftpd_flags=&quot;-D&quot;
</pre></blockquote>

<p>
Una l&iacute;nea como &eacute;sta nos indica que ftpd no se est&aacute;
iniciando con el sistema (al menos no mediante
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;sektion=8">
rc(8)</a>; v&eacute;se la <a href="#AnonFTP">secci&oacute;n sobre FTP
An&oacute;nimo</a> para m&aacute;s informaci&oacute;n al respecto).  En
cualquier caso, cada l&iacute;nea va acompa&ntilde;ada por un comentario
que mostrar&aacute; los indicadores para el uso <strong>NORMAL</strong>
de ese d&aelig;mon o servicio.  Esto no significa que se debe invocar el
d&aelig;mon o servicio en cuesti&oacute;n con esos indicadores.  Siempre
se puede usar la documentaci&oacute;n de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=man&amp;sektion=1">
man(1)</a> (las p&aacute;ginas del manual) para ver c&oacute;mo se puede
iniciar de cualquier otro modo que se prefiera ese d&aelig;mon o
servicio.  Como ejemplo, v&eacute;ase la l&iacute;nea predefinida para
la entrada de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8">httpd(8)</a>:

<blockquote><pre>
httpd_flags=NO          # for normal use: &quot;&quot; (or &quot;-DSSL&quot; after reading ssl(8))
</pre></blockquote>

<p>
Aqu&iacute; puede verse con claridad que no es necesario ning&uacute;n
indicador para iniciar httpd.  Por lo tanto, s&oacute;lo ser&aacute;
necesaria una l&iacute;nea como la siguiente:

<blockquote><pre>
<strong>httpd_flags=&quot;&quot;</strong>
</pre></blockquote>

Pero para iniciar httpd con ssl (v&eacute;ase la
<a href="#HTTPS">secci&oacute;n sobre SSL</a> o la p&aacute;gina del
manual de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssl&amp;sektion=8">
ssl(8)</a>), ser&aacute; necesaria una l&iacute;nea como la siguiente:

<blockquote><pre>
httpd_flags=&quot;-DSSL&quot;
</pre></blockquote>

<p>
Una buen m&eacute;todo es no tocar nunca el fichero
<em>/etc/rc.conf</em>, y en su lugar crear el fichero
<em>/etc/rc.conf.local</em>, copiando en &eacute;ste s&oacute;lo las
l&iacute;neas que se quieran cambiar de <em>/etc/rc.conf</em> y
ajustarlas seg&uacute;n se necesite.  De este modo las futuras
actualizaciones pueden ser m&aacute;s f&aacute;ciles, ya que todos los
cambios estar&aacute;n en este fichero.

<p>
<h3>Inicio y configuraci&oacute;n de d&aelig;mon locales</h3>

<p>
Para instalar otros d&aelig;mon en el sistema, por medio de los portes
o cualquier otro medio, se debe usar el fichero <em>/etc/rc.local</em>.
Por ejemplo, supongamos que se ha instalado un d&aelig;mon que se
encuentre en <em>/usr/local/sbin/daemonx</em>, y que se desea iniciar
durante el arranque del sistema.  Para ello pondr&iacute;amos una
entrada como la siguiente en <em>/etc/rc.local</em>:

<blockquote><pre>
if [ -x /usr/local/sbin/daemonx ]; then
             echo -n ' daemonx';       /usr/local/sbin/daemonx
fi
</pre></blockquote>

<p>
Nota:  Si el d&aelig;mon no se separa autom&aacute;ticamente durante el
inicio, hay que a&ntilde;adir un &quot;&amp;&quot; al final de la
l&iacute;nea de &oacute;rdenes.

<p>
Desde este momento, el d&aelig;mon ser&aacute; invocado durante el
arranque.  Tambi&eacute;n se podr&aacute; ver cualquier error durante el
arranque;  un arranque normal sin errores s&oacute;lo mostrar&iacute;a
una l&iacute;nea como &eacute;sta:

<blockquote><pre>
Starting local daemons: daemonx.
</pre></blockquote>

<p>
<h3><em>rc.shutdown</em></h3>

<p>
<em>/etc/rc.shutdown</em> es un gui&oacute;n de ejecuci&oacute;n
(<em>script</em>) que se invoca al cerrar el sistema.  Cualquier cosa
que quiera hacerse antes de que se cierre el sistema se debe
a&ntilde;adir a este fichero.  Si se tiene apm tambi&eacute;n puede
configurarse &quot;powerdown=YES&quot;, lo que dar&aacute; un resultado
equivalente a <kbd>shutdown -p</kbd>.


<p>
<a name="RelayingDenied"></a>
<h2>10.4 - &iquest;Por qu&eacute; cuando los usuarios env&iacute;an
correo a trav&eacute;s de mi sistema OpenBSD se les niega el acceso de
reenv&iacute;o?<br>
<i>Relaying Denied</i></h2>

<p>
Probando lo siguiente:

<blockquote><pre>
# <strong>cat /etc/mail/sendmail.cf | grep relay-domains</strong>
</pre></blockquote>

<p>
la salida ser&aacute; parecida a &eacute;sta:

<blockquote><pre>
FR-o /etc/mail/relay-domains
</pre></blockquote>

<p>
Si este fichero no existe, habr&aacute; que crearlo, introduciendo los
hu&eacute;spedes que est&eacute;n enviando correo remoto;  para ello se
utilizar&aacute; la siguiente sintaxis:

<blockquote><pre>
.dominio.com    #Permitir el reenv&iacute;o desde/hacia
                #cualquier hu&eacute;sped en dominio.com
sub.dominio.com #Permitir el reenv&iacute;o desde/hacia
		#sub.dominio.com y cualquier hu&eacute;sped en
		#ese dominio
10.2            #Permitir el reenv&iacute;o desde todos los
	        #hu&eacute;spedes en la red IP 10.2.*.*
</pre></blockquote>

<p>
No hay que olvidarse de enviar una se&ntilde;al 'HangUP' a sendmail (una
se&ntilde;al que hace que la mayor&iacute;a de d&aelig;mon vuelvan a
leer sus respectivos ficheros de configuraci&oacute;n):

<blockquote><pre>
# <strong>kill -HUP `head -1 /var/run/sendmail.pid`</strong>
</pre></blockquote>

<p>
<h3>M&aacute;s informaci&oacute;n</h3>

<ul>
<li><a href="http://www.sendmail.org/~ca/email/relayingdenied.html">
http://www.sendmail.org/~ca/email/relayingdenied.html</a>
<li><a href="http://www.sendmail.org/tips/relaying.html">
http://www.sendmail.org/tips/relaying.html</a>
<li><a href="http://www.sendmail.org/antispam.html">
http://www.sendmail.org/antispam.html</a>
</ul>

<p>
<a name="POP"></a>
<h2>10.5 - He configurado POP, pero obtengo errores cuando accedo a mi
correo a trav&eacute;s de POP.  &iquest;Qu&eacute; puedo hacer?</h2>

<p>
La mayor&iacute;a de problemas relacionados con POP tienen que ver con
ficheros temporales y ficheros de bloqueo.  Si el servidor pop
env&iacute;a un mensaje de error como el siguiente,

<blockquote><pre>
-ERR Couldn't open temporary file, do you own it?
</pre></blockquote>

<p>
habr&aacute; que configurar los permisos del siguiente modo:

<blockquote><pre>
permisos en /var
drwxrwxr-x   2 bin     mail     512 May 26 20:08 mail


permisos en /var/mail
-rw-------   1 username   username        0 May 26 20:08 username
</pre></blockquote>

<p>
Adem&aacute;s, tambi&eacute;n puede comprobar que el usuario sea
realmente el propietario de su propio fichero <em>/var/mail</em>.  Por
supuesto, esto deber&iacute;a ser as&iacute; (por ejemplo, el
propietario de <em>/var/mail/joe</em> deber&iacute;a ser el usuario
<em>joe</em>), pero si no estuviera correctamente configurado
podr&iacute;a ser la causa del problema.

<p>
Dejar <em>/var/mail</em> con permiso de escritura para el grupo
<em>mail</em> crea algunos problemas de seguridad.  Es probable que
nunca tenga problemas con eso...  &iexcl;pero podr&iacute;a tenerlos!
(especialmente si su sitio es de alto rendimiento, como un ISP, ...).
Hay varios servidores de POP que se pueden instalar directamente desde
la colecci&oacute;n de portes.  Si es posible, es recomendable usar
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=popa3d&amp;sektion=8">popa3d</a>,
que se encuentra en la instalaci&oacute;n base de OpenBSD.  O
podr&iacute;a darse el caso que tuviera seleccionadas las opciones
err&oacute;neas para su d&aelig;mon 'pop' (como &quot;<em>dot
locking</em>&quot;).  O tambi&eacute;n es posible que necesitara cambiar
el directorio que bloquea (aunque entonces, el bloqueo s&oacute;lo
ser&iacute;a de valor para el d&aelig;mon POP).

<p>
<strong>PD:</strong> N&oacute;tese que OpenBSD no tiene un grupo con el
nombre &quot;<em>mail</em>&quot;.  Debe ser a&ntilde;adido en el fichero
<em>/etc/group</em> con una entrada como &eacute;sta:

<blockquote><pre>
mail:*:6:
</pre></blockquote>

<p>
<a name="SendmailDNS"></a>
<h2>10.6 - &iquest;Por qu&eacute; ignora Sendmail el fichero
<tt>/etc/hosts</tt></h2>

<p>
En el modo predeterminado, Sendmail no usa el fichero
<tt>/etc/hosts</tt> para la resoluci&oacute;n de nombres, sino DNS.
Esto se puede cambiar a trav&eacute;s del fichero
<tt>/etc/mail/service.switch</tt>.

<p>
Si quiere enviar requerimientos al fichero <tt>/etc/hosts</tt> antes que
a los servidores de DNS, debe crear un fichero
<tt>/etc/mail/service.switch</tt> que contenga la siguiente
l&iacute;nea:

<pre>
     hosts       files dns
</pre>

<p>
Si quiere enviar requerimientos S&Oacute;LO al fichero
<tt>/etc/hosts</tt>, use la siguiente l&iacute;nea:

<pre>
     hosts       files
</pre>

<p>
Env&iacute;e a Sendmail una se&ntilde;al HUP:

<pre>
     # <b>kill -HUP `head -1 /var/run/sendmail.pid`</b>
</pre>

<p>
para que los cambios sean efectivos.


<p>
<a name="HTTPS"></a>
<h2>10.7 - C&oacute;mo se configura un servidor HTTP seguro usando
SSL(8)</h2>

<p>
La distribuci&oacute;n oficial de OpenBSD incluye un servidor
<em>httpd</em> con SSL (<em>Secure Sockets Layer</em>, la capa de
conectores de seguridad) y las bibliotecas de RSA.  Antes de poderlas
usar con
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8">httpd(8)</a>, 
debe crear un certificado.  Este certificado se almacenar&aacute; en el
directorio <tt>/etc/ssl/</tt> con la clave correspondiente en
<tt>/etc/ssl/private/</tt>.  Los pasos que mostraremos sobre la
creaci&oacute;n del certificado se han tomado en parte de la
p&aacute;gina del manual de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssl&amp;sektion=8">
ssl(8)</a>.  Puede ver una informaci&oacute;n m&aacute;s detallada en
esta p&aacute;gina del manual.  La informaci&oacute;n incluida en este
documento se limita a explicar c&oacute;mo crear un certificado RSA para
servidores de <em>web</em>, no un certifificado DSA para servidores.
Lea la p&aacute;gina del manual de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssl&amp;sektion=8">
ssl(8)</a> si necesita obtener m&aacute;s informaci&oacute;n.

<p>
Antes de empezar, necesita generar su clave de servidor y su certificado
usando OpenSSL:

<div style="margin-left: 2em">
<pre>
# <strong>openssl genrsa -out /etc/ssl/private/server.key 1024</strong>
</pre>
</div>

<p>
O, si lo desea, puede cifrar la clave con una contrase&ntilde;a que
tendr&aacute; que introducir cuando inicie los servidores:

<div style="margin-left: 2em">
<pre>
# <strong>openssl genrsa -des3 -out /etc/ssl/private/server.key 1024</strong>
</pre>
</div>

<p>
El pr&oacute;ximo paso es generar un <em>&quot;Certificate Signing
Request&quot;</em> (requerimiento para firmar el certificado), que se
usa para que una Autoridad Certificadora (CA) firme su certificado.
Para ello use la orden:

<div style="margin-left: 2em">
<pre>
# <strong>openssl req -new -key /etc/ssl/private/server.key -out /etc/ssl/private/server.csr</strong>
</pre>
</div>

<p>
El fichero <em>server.csr</em> se puede entregar a la Autoridad
Certificadora que firmar&aacute; la clave.  Una de estas CA es
<strong>Thawte Certification</strong>, y se puede localizar en
<a href="http://www.thawte.com/">http://www.thawte.com/</a>.

<p>
Si no se lo puede permitir, o si quiere firmar Vd. mismo el certificado,
puede usar lo siguiente:

<div style="margin-left: 2em">
<pre>
# <strong>openssl x509 -req -days 365 -in /etc/ssl/private/server.csr \
       -signkey /etc/ssl/private/server.key -out /etc/ssl/server.crt</strong>
</pre>
</div>

<p>
Con <em>/etc/ssl/server.crt</em> y <em>/etc/ssl/private/server.key</em>
en su sitio ya puede iniciar
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8">httpd(8)</a>
con el indicador <strong>-DSSL</strong> (v&eacute;ase la
<a href="#rc">secci&oacute;n sobre rc(8)</a> en este documento),
permitiendo transacciones https con su m&aacute;quina por el puerto 443.

<p>
<a name="vipw"></a>
<h2>10.8 - He hecho cambios a <em>/etc/passwd</em>, pero los cambios no
funcionan.  &iquest;Por qu&eacute;?</h2>

<p>
Si edita <em>/etc/passwd</em> directamente, cualquier cambio que haga se
perder&aacute;.  OpenBSD genera el fichero <em>/etc/passwd</em> de forma
din&aacute;mica con
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pwd_mkdb&amp;sektion=8">pwd_mkdb(8)</a>.
El fichero principal de las contrase&ntilde;as en OpenBSD es
<em>/etc/master.passwd</em>.  De acuerdo con la p&aacute;gina del manual
de pwd_mkdb(8):

<blockquote><pre>
FILES
     /etc/master.passwd  fichero de contrase&ntilde;a actual
     /etc/passwd         fichero de contrase&ntilde; en formato Version 7
     /etc/pwd.db         fichero de base de datos de la contrase&ntilde;a
                         no seguro
     /etc/pwd.db.tmp     fichero temporal
     /etc/spwd.db        fichero de base de datos de la contrase&ntilde;a
                         seguro
     /etc/spwd.db.tmp    fichero temporal
</pre></blockquote>

<p>
En un fichero de contrase&ntilde;as tradicional de Unix, como
<em>/etc/passwd</em>, toda la informaci&oacute;n, incluida la
contrase&ntilde;a cifrada del usuario, est&aacute; disponible para
cualquiera que pueda acceder al sistema (y es el primer objetivo para
programas como <code>crack</code>).  4.4BSD introdujo el fichero
<em>master.passwd</em>, que tiene un formato extendido (con opciones
adicionales que van m&aacute;s all&aacute; de las ofrecidas por
<em>/etc/passwd</em>), y s&oacute;lo puede ser le&iacute;do por el
superusuario <em>root</em>.  Para un acceso m&aacute;s r&aacute;pido a
los datos, las llamadas de las bibliotecas que acceden a estos datos
leen los ficheros <em>/etc/pwd.db</em> y <em>/etc/spwd.db</em>.

<p>
OpenBSD incluye una herramienta,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8">
vipw(8)</a>, para la edici&oacute;n del fichero de contrase&ntilde;as.
<kbd>vipw</kbd> usa
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vi&amp;sektion=1">
vi(1)</a> (nuestro editor preferido, definido por $EDITOR) para editar
el fichero <em>/etc/master.passwd</em>.  Una vez que ha terminado de
editar, vuelve a crear los ficheros <em>/etc/passwd</em>,
<em>/etc/pwd.db</em>, y <em>/etc/spwd.db</em> conforme con los cambios
que haya llevado a cabo.  <kbd>vipw</kbd> tambi&eacute;n se encarga de
bloquear estos ficheros, de modo que si alguna otra persona intentara
cambiarlos al mismo tiempo, no le permitir&iacute;a el acceso.

<p>
<a name="AddDelUser"></a>
<h2>10.9 - &iquest;C&oacute;mo a&ntilde;ado un usuario?
&iquest;C&oacute;mo elimino un usuario?</h2>

<p>
OpenBSD dispone de dos &oacute;rdenes para a&ntilde;adir usuarios en el
sistema f&aacute;cilmente:

<ul>
<li><a href="#adduser">adduser(8)</a>
<li><a href="#user">user(8)</a>
</ul>

<p>
Tambi&eacute;n es posible a&ntilde;adir usuarios a mano, usando
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8">
vipw(8)</a>, pero en la mayor&iacute;a de operaciones esto es m&aacute;s
dif&iacute;cil.

<p>
<a name="adduser"></a>
En OpenBSD, la manera m&aacute;s f&aacute;cil para a&ntilde;adir un
usuario es usando el gui&oacute;n
(<em>script</em>)
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&amp;sektion=8">adduser(8)</a>.
Se puede configurar adduser(8) editando el fichero
<i>/etc/adduser.conf</i>.  adduser(8) permite que se efect&uacute;en
pruebas de consistencia sobre <i>/etc/passwd</i>, <i>/etc/group</i>, y
las bases de datos del int&eacute;rprete.  Crea las entradas y
directorios $HOME.  Tambi&eacute;n puede enviar un mensaje de bienvenida
a los nuevos usuarios.  A continuaci&oacute;n se puede ver un ejemplo de
c&oacute;mo se a&ntilde;ade un nuevo usuario, <b>testuser</b>, a un
sistema.  El directorio $HOME del nuevo usuario ser&aacute;
<i>/home/testuser</i>, y tambi&eacute;n se le a&ntilde;adir&aacute; al
grupo <b>guest</b>, y se le asignar&aacute; el int&eacute;rprete
<i>/bin/ksh</i>.

<blockquote><pre>
# <strong>adduser</strong>
Use option ``-silent'' if you don't want to see all warnings and questions.

Reading /etc/shells
Reading /etc/login.conf
Check /etc/master.passwd
Check /etc/group

Ok, let's go.
Don't worry about mistakes. I will give you the chance later to correct any input.
Enter username []: <b>testuser</b>
Enter full name []: <b>Test FAQ User</b>
Enter shell csh ksh nologin sh [sh]: <b>ksh</b>
Uid [1002]: <b><i>Intro</i></b>
Login group testuser [testuser]: <b>guest</b>
Login group is ``guest''. Invite testuser into other groups: guest no 
[no]: <b>no</b>
Login class auth-defaults auth-ftp-defaults daemon default staff 
[default]: <b><i>Intro</i></b>
Enter password []: <b><i>Escribir la contrase&ntilde;a y pulsar intro</i></b>
Enter password again []: <b><i>Escribir la contrase&ntilde;a y pulsar intro</i></b>

Name:        testuser
Password:    ****
Fullname:    Test FAQ User
Uid:         1002
Gid:         31 (guest)
Groups:      guest
Login Class: default
HOME:        /home/testuser
Shell:i      /bin/ksh
OK? (y/n) [y]: <b>y</b>
Added user ``testuser''
Copy files from /etc/skel to /home/testuser
Add another user? (y/n) [y]: <b>n</b>
Goodbye!
</pre></blockquote>

<p>
Para eliminar usuarios debe usar la herramienta
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rmuser&amp;sektion=8">rmuser(8)</a>.
De esta forma se eliminar&aacute; todo vestigio de un usuario.  Se
eliminar&aacute; cualquier entrada en
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=crontab&amp;sektion=1">crontab(1)</a>
relacionada con el usuario, su directorio $HOME (siempre que el
propietario de &eacute;ste sea el usuario en cuesti&oacute;n), y su
correo.  Tambi&eacute;n se eliminar&aacute;n sus entradas en los
ficheros <em>/etc/passwd</em> y <em>/etc/group</em>.

<p>
A continuaci&oacute;n sigue un ejemplo sobre c&oacute;mo eliminar el
usuario que se ha a&ntilde;adido en el ejemplo anterior.  Ver&aacute;
que preguntar&aacute; por el nombre, y si debe o no eliminar el
directorio ra&iacute;z ($HOME) del usuario.

<blockquote><pre>
# <strong>rmuser</strong>
Enter login name for user to remove: <strong>testuser</strong>
Matching password entry: <strike>introduzca la contrase&ntilde;a</strike>

testuser:$2a$07$ZWnBOsbqMJ.ducQBfsTKUe3PL97Ve1AHWJ0A4uLamniLNXLeYrEie:1002
:31::0:0:Test FAQ User:/home/testuser:/bin/ksh

Is this the entry you wish to remove? <strong>y</strong>
Remove user's home directory (/home/testuser)? <strong>y</strong>
Updating password file, updating databases, done.
Updating group file: done.
Removing user's home directory (/home/testuser): done.
</pre></blockquote>

<p>
<a name="user"></a>
<h3>C&oacute;mo a&ntilde;adir usuarios con user(8)</h3>

<p>
Estas herramientas son menos interactivas que la orden
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&amp;sektion=8">adduser(8)</a>,
que hace que sea m&aacute;s f&aacute;cil usarlos en guiones de
ejecuci&oacute;n (<em>script</em>).

<p>
La lista completa de herramientas es:
<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=group&amp;sektion=8">group(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=groupadd&amp;sektion=8">groupadd(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=groupdel&amp;sektion=8">groupdel(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=groupinfo&amp;sektion=8">groupinfo(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=groupmod&amp;sektion=8">groupmod(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=user&amp;sektion=8">user(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8">useradd(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=userdel&amp;sektion=8">userdel(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=userinfo&amp;sektion=8">userinfo(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=usermod&amp;sektion=8">usermod(8)</a>
</ul>

<p>
<h4>C&oacute;mo a&ntilde;adir usuarios</h4>

<p>
Dado que user(8) no es interactivo, la forma m&aacute;s f&aacute;cil
para a&ntilde;adir usuarios de modo eficiente es usar la orden
adduser(8).  La orden <kbd>/usr/sbin/user</kbd> es simplemente una
interfaz para el resto de &oacute;rdenes <kbd>/usr/sbin/user*</kbd>.
Por lo tanto, las siguientes &oacute;rdenes pueden ser adheridas usando
<kbd>user add</kbd> o <kbd>useradd</kbd>;  el modo en que lo haga
s&oacute;lo depende de su elecci&oacute;n, y no altera en absoluto la
funci&oacute;n de la orden.

<p>
En este ejemplo estamos a&ntilde;adiendo el mismo usuario con las mismas
especificaciones que usamos para el nuevo usuario de los
<a href="#adduser">ejemplos anteriores</a>.  La orden useradd(8) es
m&aacute;s f&aacute;cil de usar si se sabe la configuraci&oacute;n
predeterminada antes de crear el usuario.  Estas configuraciones se
encuentran en el fichero <em>/etc/usermgmt.conf</em>, y se pueden ver
del siguiente modo:

<blockquote><pre>
$ <strong>user add -D</strong>
group           users
base_dir        /home
skel_dir        /etc/skel
shell           /bin/csh
inactive        0
expire          Null (unset)
range           1000..60000
</pre></blockquote>

<p>
Las configuraciones de arriba son las que se activar&aacute;n de modo
predeterminado a menos que se especifiquen otras mediante opciones en la
l&iacute;nea de &oacute;rdenes.  Por ejemplo, en nuestro caso, queremos
que el usuario pertenezca al grupo <strong>guest</strong>, no al grupo
<strong>users</strong>.  Un peque&ntilde;o obst&aacute;culo m&aacute;s
al crear usuarios, es que las contrase&ntilde;as se deben especificar
desde la l&iacute;nea de &oacute;rdenes.  Las contrase&ntilde;as
est&aacute;n cifradas, as&iacute; que ser&aacute; necesario usar la
utilidad
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=encrypt&amp;sektion=1">encrypt(1)</a>
para crearla.  OpenBSD usa, de modo predeterminado, 6 veces el algoritmo
Blowfish para crear la contrase&ntilde;a.

<p>
He aqu&iacute; una l&iacute;nea que muestra c&oacute;mo crear una
contrase&ntilde;a para espicificarla en useradd(8).

<blockquote><pre>
$ <strong>encrypt -p -b 6</strong>
Enter string:
$2a$06$YOdOZM3.4m6MObBXjeZtBOWArqC2.uRJZXUkOghbieIvSWXVJRzlq
</pre></blockquote>

<p>
Ahora que ya tenemos nuestra contrase&ntilde;a cifrada, estamos
preparados para a&ntilde;adirla al usuario:

<blockquote><pre>
# <strong>user add -p '$2a$06$YOdOZM3.4m6MObBXjeZtBOWArqC2.uRJZXUkOghbieIvSWXVJRzlq' -u 1002 \
-s /bin/ksh -c "Test FAQ User" -m -g guest testuser</strong>
</pre></blockquote>

<p>
<strong>Nota:</strong>  Aseg&uacute;rese de usar comillas simples
(<b>'&nbsp;'</b>) a ambos lados de la cadena de la contrase&ntilde;a, y
no comillas dobles (<b>&quot;&nbsp;&quot;</b>) ya que &eacute;stas
ser&iacute;an interpretadas por el int&eacute;rprete de &oacute;rdenes
(<em>shell</em>) antes de enviar la cadena a user(8).  Adem&aacute;s de
eso, aseg&uacute;rese de especificar la opci&oacute;n <b>-m</b> si
quiere que el directorio ra&iacute;z del usuario sea creado y que los
ficheros de <em>/etc/skel</em> se copien a este directorio.

<p>
Para verificar que se ha creado el usuario correctamente podemos usar
muchas utilidades diferentes.  A continuaci&oacute;n hay unas cuantas
&oacute;rdenes que puede usar para verificar r&aacute;pidamente que todo
ha sido creado correctamente.

<blockquote><pre>
$ <strong>ls -la /home</strong>
total 14
drwxr-xr-x   5 root      wheel   512 May 12 14:29 .
drwxr-xr-x  15 root      wheel   512 Apr 25 20:52 ..
drwxr-xr-x  24 ericj     wheel  2560 May 12 13:38 ericj
drwxr-xr-x   2 testuser  guest   512 May 12 14:28 testuser
$ <strong>id testuser</strong>
uid=1002(testuser) gid=31(guest) groups=31(guest)
$ <strong>finger testuser</strong>
Login: testuser                         Name: Nombre Completo del Usuario
Directory: /home/testuser               Shell: /bin/ksh
Last login Sat Apr 22 16:05 (EDT) on ttyC2
No Mail.
No Plan.
</pre></blockquote>

<p>
Aparte de estas &oacute;rdenes, user(8) dispone de, userinfo(8), su
propia utilidad para mostrar las caracter&iacute;sticas del usuario.

<blockquote><pre>
$ <strong>userinfo testuser</strong>
login   testuser
passwd  *
uid     1002
groups  guest
change  Wed Dec 31 19:00:00 1969
class
gecos   Test FAQ User
dir     /home/testuser
shell   /bin/ksh
expire  Wed Dec 31 19:00:00 1969
</pre></blockquote>

<p>
<h4>C&oacute;mo eliminar usuarios</h4>

<p>
Para eliminar usuarios con la jerarqu&iacute;a de &oacute;rdenes
user(8), se debe usar userdel(8).  &Eacute;sta es una orden muy simple,
pero muy &uacute;til.  Para eliminar el usuario creado en el ejemplo
anterior, basta con ejecutar

<blockquote><pre>
# <strong>userdel -r testuser</strong>
</pre></blockquote>

<p>
N&oacute;tese que la opci&oacute;n <strong>-r</strong> se debe
especificar si se desea que el directorio ra&iacute;z del usuario sea
tambi&eacute;n eliminado.  De forma alternativa puede especificar
<strong>-p</strong> y no <strong>-r</strong>, y as&iacute; se
bloquear&aacute; la cuenta del usuario pero no se eliminar&aacute;
ninguna informaci&oacute;n.

<p>
<a name="FTPOnly"></a>
<h2>10.10 - &iquest;C&oacute;mo puedo crear una cuenta s&oacute;lo FTP
(no FTP An&oacute;nimo)?</h2>

<p>
Existen varios modos de hacerlo, pero una manera muy com&uacute;n es
a&ntilde;adir <em>/usr/bin/false</em> en el fichero
<em>/etc/shells</em>.  As&iacute;, cuando se vincule un
int&eacute;rprete de usuario (<em>user shell</em>) a
<em>/usr/bin/false</em>, &eacute;ste no podr&aacute; ingresar de forma
interactiva pero podr&aacute; usar ftp.
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&amp;sektion=8">adduser(8)</a> 
les dar&aacute; un directorio $HOME que ser&aacute;, por
definici&oacute;n, <em>/home/&lt;usuario&gt;</em>.  Si le parece bien de
esta forma, no necesita cambiarlo;  sin embargo, puede configurarlo a
cualquier otro directorio que Vd. desee.  Puede forzar que el usuario
s&oacute;lo pueda ver los ficheros en su directorio $HOME,
a&ntilde;adiendo su nombre de usuario al fichero
<em>/etc/ftpchroot</em>.  Mediante el uso de la opci&oacute;n
<strong>-A</strong> para 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8">
ftpd(8)</a>, puede restringir los ingresos (<em>login</em>) para que
s&oacute;lo sean posibles por ftpchroot.

<p>
<a name="Quotas"></a>
<h2>10.11 - Configuraci&oacute;n de cuotas de disco</h2>

<p>
Las cuotas se usan para limitar el espacio del que disponen los usuarios
en sus discos.  Puede ser muy &uacute;til en situaciones en las que los
recursos disponibles sean limitados.  Existen dos configuraciones
posibles para las cuotas, cuotas de usuario y/o cuotas de grupo.

<p>
El primer paso para configurar cuotas es asegurarse de que la
opci&oacute;n <code>QUOTA</code> se encuentra activada en la
<a href="faq5.html#Options">configuraci&oacute;n del n&uacute;cleo</a>
del sistema.  Esta opci&oacute;n est&aacute; configurada en el
n&uacute;cleo GENERIC.  Despu&eacute;s se deben marcar los sistemas de
archivo para los que se vaya a configurar las cuotas en
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&amp;sektion=5"><tt>/etc/fstab</tt></a>.
Esto se hace usando las palabras clave <code>userquota</code> y
<code>groupquota</code> para marcar cada uno de los sistemas de archivo
en el que se usarán las cuotas.  Por definici&oacute;n, los ficheros
<code>quota.user</code> y <code>quota.group</code> se crear&aacute;n en
la ra&iacute;z de ese sistema de archivos, que tendr&aacute; la
informaci&oacute;n sobre las cuotas.  Esto se puede anular especificando
el nombre del fichero con la opci&oacute;n quota en <tt>/etc/fstab</tt>,
v.g. &quot;<code>userquota=/var/quotas/quota.user</code>&quot;.
He aqu&iacute; un ejemplo de <tt>/etc/fstab</tt> con s&oacute;lo un
sistema de archivos con las cuotas de usuario activadas, y el fichero de
cuotas en una ubicaci&oacute;n at&iacute;pica:

<blockquote><pre>
/dev/wd0a / ffs rw,userquota=/var/quotas/quota.user 1 1
</pre></blockquote>

<p>
Ahora ya puede configurar las cuotas de usuario.  Para ello use la
utilidad
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=edquota&amp;sektion=8">edquota(8)</a>.
Una forma simple de usarlo es
&quot;<strong>edquota&nbsp;&lt;usuario&gt;</strong>&quot;.  La orden
edquota(8) usar&acute; vi(1) para editar las cuotas a menos que la
variable de entorno EDITOR indique un editor diferente.  Por ejemplo:

<blockquote><pre>
# <strong>edquota ericj</strong>
</pre></blockquote>

<p>
Esto dar&aacute; un resultado parecido al siguiente:

<blockquote><pre>
Quotas for user ericj:
/: blocks in use: 62, limits (soft = 0, hard = 0)
	inodes in use: 25, limits (soft = 0, hard = 0)
</pre></blockquote>

<p>
Para a&ntilde;adir l&iacute;mites, debe quedar algo como esto:

<blockquote><pre>
Quotas for user ericj:
/: blocks in use: 62, limits (soft = 1000, hard = 1050)
	inodes in use: 25, limits (soft = 0, hard = 0)
</pre></blockquote>

<p>
N&oacute;tese que las cuotas est&aacute;n repartidas en bloques de 1KB.
En este caso, el &quot;softlimit&quot; es de 1000KB bloques, y el
&quot;hardlimit&quot; de 1050KB.  <i>softlimit</i> es el l&iacute;mite
en el cual el usuario recibe un aviso cuando lo sobrepasa, y tiene hasta
su periodo de gracia para rebajar su uso del disco por debajo de su
l&iacute;mite.  Los periodos de gracia se pueden configurar usando la
opci&oacute;n <strong>-t</strong> con la orden edquota(8).
Despu&eacute;s de que el periodo de gracia haya pasado, el
&quot;softlimit&quot; se toma como &quot;hardlimit&quot;.  El resultado
es un fallo de ubicaci&oacute;n (<i>allocation failure</i>).

<p>
Una vez que las cuotas ya est&aacute;n configuradas, tiene que
activarlas.  Para ello use
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=quotaon&amp;sektion=8">quotaon(8)</a>.
Por ejemplo:

<blockquote><pre>
# <strong>quotaon -a</strong>
</pre></blockquote>

<p>
De este modo repasar&aacute; <tt>/etc/fstab</tt> para activar los
sistemas de archivo con opciones de cuota.  En cuanto las cuotas
est&eacute;n funcionando, puede verlas con
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=quota&amp;sektion=1">quota(1)</a>.
Si usa la orden &quot;<tt>quota &lt;usuario&gt;</tt>&quot;
obtendr&aacute; la informaci&oacute;n sobre el usuario que especifique.
Al ser invocada sin argumentos, la orden quota(8) le dar&aacute; sus
estad&iacute;sticas de cuotas.  Por ejemplo:

<blockquote><pre>
# <strong>quota ericj</strong>
</pre></blockquote>

<p>
Dar&aacute; como resultado algo como esto:

<blockquote><pre>
Disk quotas for user ericj (uid 1001): 
     Filesystem  blocks   quota   limit   grace   files   quota   limit   grace
              /      62    1000    1050              27       0       0        
</pre></blockquote>

<p>
Las cuotas que est&eacute;n configuradas en <tt>/etc/fstab</tt>
iniciar&eacute;n durante el arranque por definici&oacute;n.  Para
desactivarlo use:

<blockquote><pre>
# <strong>quotaoff -a</strong>
</pre></blockquote>

<p>
<a name="Kerberos"></a>
<h2>10.12 - C&oacute;mo se configuran los clientes y servidores
KerberosV en OpenBSD</h2>

<p>
Para m&aacute;s informaci&oacute;n sobre KerberosV, desde un sistema
OpenBSD, &uacute;sese la orden:

<pre>
     # <b>info heimdal</b>
</pre>


<p>
<a name="AnonFTP"></a>
<h2>10.13 - Configuraci&oacute;n de servicios de FTP An&oacute;nimo</h2>

<p>
FTP An&oacute;nimo permite a los usuarios que carecen de cuentas en el
sistema, acceder a ficheros en su m&aacute;quina mediante el
&laquo;Protocolo de Transferencia de Ficheros&raquo; (FTP, &quot;File
Transfer Protocol&quot;).  Esta secci&oacute;n ofrece un resumen sobre
c&oacute;mo configurar el servidor de ftp an&oacute;nimo, su ingreso,
etc...

<p>
<h3>Creaci&oacute;n de la cuenta de FTP</h3>

<p>
Para empezar, necesita tener una cuenta &quot;ftp&quot; en su sistema.
Esta cuenta no debe tener una contrase&ntilde;a utilizable.  Aqu&iacute;
configuraremos el directorio de ingreso como <em>/home/ftp</em>, pero
puede ponerlos donde quiera.  Cuando use ftp an&oacute;nimo, el
d&aelig;mon de ftp ejecutar&aacute; chroot sobre s&iacute; mismo para
cambiar la directorio del usuario de ftp.  Puede leer m&aacute;s sobre
esto en las p&aacute;ginas de manual de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8">
ftp(8)</a> y
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&amp;sektion=2">chroot(2)</a>.
He aqu&iacute; un ejemplo sobre c&oacute;mo a&ntilde;adir el usuario
<em>ftp</em>.  Para ello usaremos
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&amp;sektion=8">adduser(8)</a>.
Tambi&eacute;n necesitamos a&ntilde;adir /usr/bin/false a nuestro
fichero <em>/etc/shells</em>, que ser&aacute; la <em>shell</em> que
configuraremos para el usuario ftp.  As&iacute; no tendrán permiso para
ingresar, aunque les daremos una contrase&ntilde;a vac&iacute;a.  Para
ello puede hacer simplemente lo siguiente:

<pre>
echo /usr/bin/false &gt;&gt; /etc/shells
</pre>

Tambi&eacute;n, si quiere que esa shell se muestre durante las preguntas
de la orden adduser, necesita modificar <em>/etc/adduser.conf</em>.

<blockquote><pre>
# <strong>adduser</strong>
Use option ``-silent'' if you don't want to see all warnings and questions.

Reading /etc/shells
Reading /etc/login.conf
Check /etc/master.passwd
Check /etc/group

Ok, let's go.
Don't worry about mistakes. I will give you the chance later to correct any input.
Enter username []: <b>ftp</b>
Enter full name []: <b>anonymous ftp</b>
Enter shell csh false ksh nologin sh tcsh zsh [sh]: <b>false</b>
Uid [1002]: <b><i>Intro</i></b>
Login group ftp [ftp]: <b><i>Intro</i></b>
Login group is ``ftp''. Invite ftp into other groups: guest no 
[no]: <b>no</b>
Login class auth-defaults auth-ftp-defaults daemon default staff 
[default]: <b><i>Intro</i></b>
Enter password []: <b><i>Intro</i></b>
Set the password so that user cannot logon? (y/n) [n]: <b>y</b>

Name:        ftp
Password:    ****
Fullname:    anonymous ftp
Uid:         1002
Gid:         1002 (ftp)
Groups:      ftp
Login Class: default
HOME:        /home/ftp
Shell:       /usr/bin/false
OK? (y/n) [y]: <b>y</b>
Added user ``ftp''
Copy files from /etc/skel to /home/ftp
Add another user? (y/n) [y]: <b>n</b>
Goodbye!
</pre></blockquote>

<p>
<h3>Configuraci&oacute;n del directorio</h3>

<p>
Adem&aacute;s del usuario, ha creado el directorio <em>/home/ftp</em>.
Es lo que queremos, pero hay algunos cambios que tendremos que hacer
para tenerlo preparado para ftp an&oacute;nimo.  Estos cambios se
explican en la p&aacute;gina de manual de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8">
ftp(8)</a>.

<p>
<strong>No</strong> necesita crear un directorio <em>/home/ftp/usr</em>
o <em>/home/ftp/bin</em>.
<ul>
<li><em>/home/ftp</em> - Es el directorio principal.  Su propietario
debe ser root, y los permisos deben ser 555.
<li><em>/home/ftp/etc</em> - Es totalmente opcional y no se recomienda,
ya que s&oacute;lo sirve para dar informaci&oacute;n sobre los usuarios
existentes en un sistema.  Si quiere que parezca que su directorio de
ftp an&oacute;nimo contiene usuarios reales adjuntos a sus ficheros,
deber&iacute;a copiar <em>/etc/pwd.db</em> y <em>/etc/group</em> a este
directorio.  Este directorio deber&iacute;a estar en modo 511, y los dos
ficheros en modo 444.  &Eacute;stos se usan para dar al propietario
nombres en lugar de n&uacute;meros.  No existen contrase&ntilde;as
almacenadas en <em>pwd.db</em>, ya que est&aacute;n todas en
<em>spwd.db</em>, as&iacute; que no las copie ah&iacute;.
<li><em>/home/ftp/pub</em> - &Eacute;ste es el directorio t&iacute;pico
para ubicar los ficheros que quiera compartir.  Este directorio
tambi&eacute;n deber&iacute; estar en modo 555.
</ul>

<p> 
Note que el propietario de todos estos directorios deber&iacute;a ser
``root''.  He aqu&iacute; una lista de c&oacute;mo deber&iacute;an ser
los directorios despu&eacute;s de ser creados:

<blockquote><pre>
# pwd 
/home
# ls -laR ftp
total 5
dr-xr-xr-x  5 root  ftp    512 Jul  6 11:33 .
drwxr-xr-x  7 root  wheel  512 Jul  6 10:58 ..
dr-x--x--x  2 root  ftp    512 Jul  6 11:34 etc
dr-xr-xr-x  2 root  ftp    512 Jul  6 11:33 pub

ftp/etc:
total 43
dr-x--x--x  2 root  ftp    512 Jul  6 11:34 .
dr-xr-xr-x  5 root  ftp    512 Jul  6 11:33 ..
-r--r--r--  1 root  ftp    316 Jul  6 11:34 group
-r--r--r--  1 root  ftp  40960 Jul  6 11:34 pwd.db

ftp/pub:
total 2
dr-xr-xr-x  2 root  ftp  512 Jul  6 11:33 .
dr-xr-xr-x  5 root  ftp  512 Jul  6 11:33 ..
</pre></blockquote>

<p>
<h3>Inicio del servidor e ingreso</h3>

<p>
Con <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8">ftpd(8)</a> puede escoger entre invocarlo desde
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inetd&amp;sektion=8">inetd(8)</a> 
o lo pueden iniciar los guiones de configuraci&oacute;n de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;ektion=8">
rc(8)</a>.  En estos ejemplos se ver&aacute; c&oacute;mo se inicia
nuestro d&aelig;mon desde
<a href="http://www.openbsd.org/cgi-bin/cvsweb/src/etc/inetd.conf">
inetd.conf</a>.  Primero debemos familiarizarnos con algunas de las
opciones de ftpd.  La l&iacute;nea por definici&oacute;n de
<em>/etc/inetd.conf</em> es:

<blockquote><pre>
<strong>
ftp             stream  tcp     nowait  root    /usr/libexec/ftpd       ftpd -US
</strong>
</pre></blockquote>

<p>
En este caso ftpd se invoca con <em>-US</em>.  As&iacute; se
grabar&aacute;n las conexiones an&oacute;nimas a <em>/var/log/ftpd</em>,
y las sesiones concurrentes a <em>/var/run/utmp</em>.  De este modo,
podremos ver estas sesiones con la orden
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=who&amp;ektion=1">
who(1)</a>.  Es posible que algunos s&oacute;lo quisieran tener un
servidor an&oacute;nimo, y desactivar ftp para usuarios.  Para ello debe
invocar ftpd con la opci&oacute;n <em>-A</em>.  He aqu&iacute; una
l&iacute;nea que inicia ftpd para conexiones an&oacute;nimas
s&oacute;lo.  Tambi&eacute;n usa <em>-ll</em> para grabar cada
conexi&oacute;n a syslog, junto con las &oacute;rdenes de ftp 'get',
'retrieve', etc.

<blockquote><pre>
<strong>
ftp             stream  tcp     nowait  root    /usr/libexec/tcpd       ftpd -llUSA
</strong>
</pre></blockquote>

<p>
Nota:  Para aqu&eacute;llos que usen servidores de ftp de MUCHO
tr&aacute;fico, es conveniente que no invoquen ftpd desde
<em>inetd.conf</em>.  La mejor opci&oacute;n es comentar la l&iacute;nea
de ftpd de <em>inetd.conf</em> e iniciar ftpd desde <em>rc.conf</em>
junto con la opci&oacute;n <em>-D</em>.  De este modo iniciar&aacute;n
ftpd como un d&aelig;mon, y ser&aacute; m&aacute;s simple que iniciarlo
desde inetd.  A continuaci&oacute;n viene un ejemplo de c&oacute;mo
iniciarlo desde <em>rc.conf</em>:

<blockquote><pre>
ftpd_flags=&quot;-DllUSA&quot;           # for non-inetd use: ftpd_flags=&quot;-D&quot;
</pre></blockquote>

<p>
Esto s&oacute;lo funcionar&aacute; si se ha desactivado ftpd en
<em>/etc/inetd.conf</em> y se ha forzado a inetd a leer su fichero de
configuraci&oacute;n.

<p>
<h3>Otros ficheros de importancia</h3>

<p>
<ul>
   <li><em>/etc/ftpwelcome</em> - Contiene el mensaje de bienvenida que
   ver&aacute;n al conectar con su servidor ftp.
   <li><em>/etc/motd</em> - Contiene el mensaje que ver&aacute;n
   despu&eacute;s de haber ingresado en su servidor ftp.
   <li><em>.message</em> - Este fichero se puede ubicar en cualquier
   directorio, y cuando alguien entre en ese directorio, ver&aacute; el
   mensaje que contiene.
</ul>


<p>
<a name="ftpchroot"></a>
<h2>10.14 - C&oacute;mo se confina a los usuarios a sus directorios de
usuario (/home) en ftpd(8)</h2>

<p>
En OpenBSD,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8">
ftpd(8)</a> est&aacute; configurado por definici&oacute;n para poder
gestionar esto de modo muy f&aacute;cil.  Se hace por medio del fichero
<strong>/etc/ftpchroot</strong>.  Como los usuarios no son siempre
fiables, puede ser necesario restringir su entrada en otros directorios
que no sean el propio.  Esto NO est&aacute; activado por
definici&oacute;n.  He aqu&iacute; un ejemplo de c&oacute;mo responde
por definici&oacute;n:

<blockquote><pre>
$ <strong>ftp localhost</strong>
Connected to localhost.
220 oshibana FTP server (Version 6.4/OpenBSD) ready.
Name (localhost:ericj): <strong>ericj</strong>
331 Password required for ericj.
Password: <strong>*********</strong>
230- OpenBSD 3.4 (GENERIC) #18: Wed Sep 17 03:34:47 MDT 2003
230- 
230- Welcome to OpenBSD: The proactively secure Unix-like operating system.
230- 
230- Please use the sendbug(1) utility to report bugs in the system.
230- Before reporting a bug, please try to reproduce it with the latest
230- version of the code.  With bug reports, please try to ensure that
230- enough information to reproduce the problem is enclosed, and if a
230- known fix for it exists, include that as well.
230- 
230 User ericj logged in.
Remote system type is UNIX.
Using binary mode to transfer files.
ftp&gt; <strong>cd /</strong>
250 CWD command successful.
ftp&gt; <strong>ls</strong>
227 Entering Passive Mode (127,0,0,1,60,7)
150 Opening ASCII mode data connection for 'file list'.
altroot
bin
dev
etc
home
mnt
root
sbin
stand
tmp
usr
var
bsd
sys
boot
226 Transfer complete.
ftp&gt; <strong>quit</strong>
221 Goodbye.
</pre></blockquote>

<p>
Como puede ver, el acceso est&aacute; permitido para todo el servidor.
En un mundo perfecto esto deber&iacute;a ser as&iacute;,
deber&iacute;amos poder fiarnos de todos los usuarios, pero no es
as&iacute;.  Para limitar un usuario, a&ntilde;ada su nombre al fichero
<em>/etc/ftpchroot</em>.  He aqu&iacute; un ejemplo que muestra
c&oacute;mo restringir al usuario &quot;ericj&quot;:

<blockquote><pre>
$ <strong>cat /etc/ftpchroot</strong>
#       $ OpenBSD: ftpchroot,v 1.3 1996/07/18 12:12:47 deraadt Exp $
#
# list of users (one per line) given ftp access to a chrooted area.
# read by ftpd(8).
ericj
</pre></blockquote>

<p>
Esto es suficiente para evitar que el usuario &quot;ericj&quot; se
escape de su propio directorio.  Como puede ver en el siguiente ejemplo,
el directorio <em>/</em> ha cambiado de repente a su directorio de
usuario.

<blockquote><pre>
$ <strong>ftp localhost</strong>
Connected to localhost.
220 oshibana FTP server (Version 6.4/OpenBSD) ready.
Name (localhost:ericj): <strong>ericj</strong>
331 Password required for ericj.
Password: <strong>*********</strong>
230 User ericj logged in.
Remote system type is UNIX.
Using binary mode to transfer files.
ftp&gt; <strong>cd /</strong>
250 CWD command successful.
ftp&gt; <strong>ls</strong>
227 Entering Passive Mode (127,0,0,1,92,171)
150 Opening ASCII mode data connection for 'file list'.
.login
.mailrc
.profile
.rhosts
.ssh
.cshrc
work
mail
src
226 Transfer complete.
ftp&gt; <strong>quit</strong>
221 Goodbye.
</pre></blockquote>

<p>
<a name="Patches"></a>
<h2>10.15 - C&oacute;mo se aplican parches en OpenBSD</h2>

<p>
El &aacute;rbol de fuentes de OpenBSD experimenta cambios y mejoras
continuamente, y al mismo tiempo se ponen a disponibilidad
p&uacute;blica parches para problemas comunes con bastante frecuencia.
Estos parches aparecen en la p&aacute;gina web de erratas, que puede
encontrar en
<a href="../../es/errata.html">http://www.openbsd.org/es/errata.html</a>,
y se encuentran separados por categor&iacute;as.  Estas
categor&iacute;as corresponden a los parches que se deber&iacute;an
aplicar a las diferentes arquitecturas, o a parches independientes de la
arquitectura.

<p>
Sin embargo, no se producen parches para las nuevas funcionalidades
a&ntilde;adidas al sistema, y s&oacute;lo se producen para solucionar
problemas de fiabilidad o de seguridad que deban ser atajados
inmediatamente, aunque la &uacute;ltima palabra sobre si se deben
aplicar o no la tiene siempre el administrador del sistema.

<p>
A modo de ejemplo parchear&eacute;
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=talkd&amp;sektion=8">talkd(8)</a> 
con un parche de seguridad obtenido de
<a href="../../es/errata.html">errata.html</a>.

<p>
<h3>&iquest;En qu&eacute; se diferencian estos parches de los que se
pueden encontrar en el &aacute;rbol de fuentes?</h3>

<p>
Todos los parches que se env&iacute;an a
<a href="../../es/errata.html">http://www.openbsd.org/es/errata.html</a>
son parches que se aplican directamente al &aacute;rbol de fuentes de la
versi&oacute;n oficial m&aacute;s reciente.  Los parches que se aplican
al &aacute;rbol de CVS m&aacute;s reciente tambi&eacute;n incluyen otros
cambios que no son deseables en un sistema con la versi&oacute;n
oficial.

<p>
<h3>Preparaci&oacute;n del sistema para la aplicaci&oacute;n de
parches</h3>

<p>
Los parches para el Sistema Operativo OpenBSD se distribuyen como
ficheros <tt>diff</tt>, que son ficheros de texto en los que se
encuentran las diferencias con el c&oacute;digo fuente original.
<strong>NO</strong> se distribuyen en formato binario.  Esto quiere
decir que para aplicar un parche al sistema, antes es necesario disponer
del c&oacute;digo fuente de la versi&oacute;n final (<em>-release</em>)
de OpenBSD.  Esto no significa que deba disponer de TODO el
c&oacute;digo fuente del sistema operativo, sino que debe tener todo el
c&oacute;digo para el programa al que vaya a aplicar el parche.  Por
ejemplo, si va a aplicar un parche al n&uacute;cleo del sistema, debe
tener a mano todo el c&oacute;digo fuente para el n&uacute;cleo.

<p>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1">
cvs(1)</a> es una herramienta muy &uacute;til que puede usar para
obtener el c&oacute;digo fuente que necesite por medio de los servidores
an&oacute;nimos de cvs ubicados alrededor del mundo.  Puede ver un
listado de estos servidores en
<a href="../../es/anoncvs.html">
http://www.openbsd.org/es/anoncvs.html</a>.

<p>
Para obtener obtener el c&oacute;digo fuente de talkd(8) para OpenBSD
<i>3.4-release</i> usando
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1">
cvs(1)</a>, hay que hacer lo siguiente:

<div style="margin-left: 2em">
<pre>
$ <b>export CVSROOT=anoncvs@@anoncvs5.usa.openbsd.org:/cvs</b>
$ <b>cvs co -rOPENBSD_3_4_BASE src/libexec/talkd/</b>
cvs server: Updating src/libexec/talkd
U src/libexec/talkd/announce.c
U src/libexec/talkd/talkd.c
U src/libexec/talkd/talkd.h
</pre>
</div>

<p>
Para encontrar en el CVS el camino hasta el c&oacute;digo que necesita,
puede verlo en la l&iacute;nea <em>Index:</em> del parche.  En este caso
el camino en el CVS era <em>src/libexec/talkd/</em>.  Compruebe siempre
el n&uacute;mero de revisi&oacute;n de OPENBSD_version_number_BASE.  Sin
&quot;_BASE&quot; obtendr&aacute; el c&oacute;digo de la rama estable, y
&eacute;sta puede contener otros cambios que sin duda
interferir&aacute;n.  Si ya est&aacute; siguiendo la rama de parches,
los parches ya deber&iacute;an estar en ese c&oacute;digo fuente, pero
por si acaso deber&iacute;a comprobarlo y asegurarse.  Siempre puede
mirar en
<a href="../../plus.html">http://www.openbsd.org/plus.html</a> para
ver qu&eacute; parches se han aplicado a la rama de parches.  Si los
parches todav&iacute;a no han sido aplicados, tendr&aacute; que obtener
el c&oacute;digo fuente de la &uacute;ltima versi&oacute;n usando la
orden anterior.

<p>
Los usuarios que hayan adquirido los CDs oficiales de OpenBSD pueden
obtener el c&oacute;digo fuente directamente desde el CD.  Mire en la
car&aacute;tula del CD para saber c&oacute;mo extraer el c&oacute;digo
fuente desde el mismo.  En este caso no ser&aacute; necesaria la
obtenci&oacute;n del c&oacute;digo fuente por medio de anoncvs.

<blockquote><pre>
Aplicar del siguiente modo:
        cd /usr/src
        patch -p0 &lt; 026_talkd.patch
        cd libexec/talkd
        make obj &amp;&amp; make depend &amp;&amp; make &amp;&amp; make install

Index: libexec/talkd/announce.c <strong>&lt;------ Camino a los fuentes </strong>
===================================================================
RCS file: /cvs/src/libexec/talkd/announce.c,v
retrieving revision 1.8
retrieving revision 1.9
diff -u -r1.8 -r1.9
--- libexec/talkd/announce.c    1998/08/18 03:42:10     1.8
+++ libexec/talkd/announce.c    2000/07/06 00:01:45     1.9
@@@@ -160,6 +160,6 @@@@
                *(bptr++) = '\n';
        }
        *bptr = '\0';
-       fprintf(tf, big_buf);
+       fprintf(tf, "%s", big_buf);
        fflush(tf);
 }
</pre></blockquote>

<p>
Una vez que haya obtenido el c&oacute;digo fuente correcto, puede
obtener el parche y ponerlo en <em>src/</em>.

<p>
<h3>Aplicaci&oacute;n de los parches</h3>

<p>
<div style="margin-left: 2em">
<pre>
$ <strong>cd /usr/src</strong>
$ <strong>patch -p0&lt;/path/to/026_talkd.patch</strong>
Hmm...  Looks like a unified diff to me...
The text leading up to this was:
--------------------------
|Aplicar del siguiente modo:
|       cd /usr/src
|       patch -p0 &lt; 026_talkd.patch
|       cd libexec/talkd
|       make obj &amp;&amp; make depend &amp;&amp; make &amp;&amp; make install
|
|Index: libexec/talkd/announce.c
|===================================================================
|RCS file: /cvs/src/libexec/talkd/announce.c,v
|retrieving revision 1.8
|retrieving revision 1.9
|diff -u -r1.8 -r1.9
|--- libexec/talkd/announce.c   1998/08/18 03:42:10     1.8
|+++ libexec/talkd/announce.c   2000/07/06 00:01:45     1.9
--------------------------
Patching file libexec/talkd/announce.c using Plan A...
Hunk #1 succeeded at 160. <strong>&lt;------------ Parche con &eacute;xito</strong>
done
$ <strong>cd /usr/src/libexec/talkd/</strong>
$ <strong>ls</strong>
CVS             announce.c      print.c         table.c         talkd.c
Makefile        announce.c.orig process.c       talkd.8         talkd.h
$ <strong>make obj &amp;&amp; make depend &amp;&amp; make</strong>
making /home/ericj/lsrc/src/libexec/talkd/obj
mkdep -a /home/ericj/lsrc/src/libexec/talkd/talkd.c /home/ericj/lsrc/sr
c/libexec/talkd/announce.c /home/ericj/lsrc/src/libexec/talkd/process.c
/home/ericj/lsrc/src/libexec/talkd/table.c /home/ericj/lsrc/src/libexec
/talkd/print.c
cc -O2     -c /home/ericj/lsrc/src/libexec/talkd/talkd.c
cc -O2     -c /home/ericj/lsrc/src/libexec/talkd/announce.c
cc -O2     -c /home/ericj/lsrc/src/libexec/talkd/process.c
cc -O2     -c /home/ericj/lsrc/src/libexec/talkd/table.c
cc -O2     -c /home/ericj/lsrc/src/libexec/talkd/print.c
cc   -o ntalkd talkd.o announce.o process.o table.o print.o
nroff -Tascii -mandoc /home/ericj/lsrc/src/libexec/talkd/talkd.8 &gt; talk
d.cat8
$ <strong>sudo make install</strong>
install -c -s -o root -g bin  -m 555 ntalkd /usr/libexec
install -c -o root -g bin -m 444 talkd.cat8 /usr/share/man/cat8/talkd.0
/usr/share/man/cat8/ntalkd.0 -&gt; /usr/share/man/cat8/talkd.0
</pre>
</div>

<p>
Una vez hecho esto, reinicie ese servicio.


<p>
<a name="httpdchroot"></a>
<h2>10.16 - Acerca de chroot() Apache</h2>
<p>
En OpenBSD, el servidor de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8">httpd(8)</a>
de Apache tiene el entorno
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&amp;sektion=2">chroot(2)</a>
activado por definici&oacute;n.  Aunque esto sea un incremento en la
seguridad, puede crear problemas si no se est&aacute; preparado para
ello.

<p>
<h3>&iquest;Qu&eacute; es <em>chroot</em>?</h3>

<p>
Una aplicaci&oacute;n con el entorno
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&amp;sektion=2">chroot(2)</a>
activado se encuentra encerrada en un directorio particular y no puede
pasar al resto del &aacute;rbol del directorio, y ve ese directorio como
su directorio ra&iacute;z (&quot;<tt>/</tt>&quot;).  En el caso de
httpd(8), el programa se inicia, abre sus archivos de registro, se
vincula a sus puertos TCP (aunque a&uacute;n no aceptar&aacute; datos),
y lee su configuraci&oacute;n.  A continuaci&oacute;n, se bloquea en
<i>/var/www</i> y pierde los privilegios, y entonces empieza a aceptar
requerimientos.  Esto quiere decir que todos los archivos que sirva y
que utilice Apache deben estar en el directorio <i>/var/www</i>.  Esto
representa una gran ventaja para la seguridad;  si hubiera alg&uacute;n
problema de seguridad con Apache, el da&ntilde;o quedar&iacute;a
confinado a un solo directorio con permisos de s&oacute;lo lectura y sin
recursos con los que causar ning&uacute;n da&ntilde;o.

<p>
<h3>&iquest;Qu&eacute; implicaciones tiene esto para el usuario?</h3>

<p>
Para ser francos, chroot(2) Apache es algo nuevo, y muchas aplicaciones
y configuraciones del sistema viejas no funcionar&aacute;n como hasta
ahora.

<ul>
<li><b>Composiciones hist&oacute;ricas del sistema de archivos:</b>  Los
servidores que se hayan actualizado partiendo desde versiones m&aacute;s
antiguas de OpenBSD pueden tener ficheros de <em>web</em> ubicados en
los directorios de usuario, lo que l&oacute;gicamente no
funcionar&aacute; en un entorno chroot(2), ya que httpd(8) no
podr&aacute; llegar hasta el directorio <i>/home</i>.  Los
administradores tambi&eacute;n pueden encontrarse con que su
partici&oacute;n /var/www es demasiado peque&ntilde;a para contener en
ella todos los ficheros de <em>web</em>.  La soluci&oacute;n est&aacute;
en reestructurarlo o en no utilizar la funcionalidad de chroot(2).  Y,
por supuesto, se puede usar enlaces simb&oacute;licos en los directorios
de usuario que apunten a subdirectorios en <i>/var/www</i>.  Pero NO se
puede usar enlaces en <i>/var/www</i> que apunten a otra parte del
sistema de archivos;  eso no funcionar&aacute; debido a que FTP chroot
evitar&aacute; (otra vez) que se pueda acceder a los objetivos de los
enlaces simb&oacute;licos.  Una soluci&oacute;n para esto es no usar
<i>/home</i> como directorio de usuario para estos usuarios, y en su
lugar usar algo parecido a <i>/var/www/home</i>.

<li><b>Rotaci&oacute;n de registros:</b>  Generalmente los registros se
rotan mediante un cambio en el nombre de archivo, y luego enviando una
se&ntilde;al SIGUSR1 a httpd(8) para hacer que Apache cierre sus viejos
archivos de registro y abra otros nuevos.  Ahora esto ya no es posible,
ya que httpd(8) no podr&aacute; abrir sus propios archivos de registro
una vez que ha perdido los privilegios.  Hay que parar httpd(8) y
reiniciarlo:

<pre>
     # <b>apachectl stop && apachectl start</b>
</pre>

<p>
Tambi&eacute;n se puede usar otras estrategias, como efectuar los
registros en un
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pipe&amp;sektion=2">
pipe(2)</a> y usar un rotador de registros externo en el otro extremo
del pipe(2).

<li><b>M&oacute;dulos de Apache:</b>  En principio, los m&oacute;dulos
de Apache ya existentes se cargar&aacute;n, sin embargo puede que
algunos no funcionen correctamente con chroot(2), y que muchos tengan
problemas con
&quot;<tt><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=apachectl&amp;sektion=8">apachectl</a> restart</tt>&quot;,
generando un error que har&aacute; que termine httpd(8).

<li><b>CGI:</b>  La mayor&iacute;a de CGI existentes funcionar&aacute;n
sin m&aacute;s.  Puede que necesiten programas o bibliotecas fuera de
<i>/var/www</i>.  Algunos se pueden reparar compil&aacute;ndolos de modo
que se est&eacute;n enlazados est&aacute;ticamente (sin que necesiten
bibliotecas en otros directorios), y la mayor&iacute;a se pueden reparar
llenando el directorio <i>/var/www</i> con los ficheros requeridos por
la aplicaci&oacute;n, aunque esto no es f&aacute;cil y para ello se
requiere unos conocimientos de programaci&oacute;n considerables.  Para
la mayor&iacute;a de usuarios ser&aacute; m&aacute;s f&aacute;cil
desactivar la funcionalidad chroot(2) hasta que est&eacute;n
actualizados.
</ul>

<p>
En algunos casos, se puede alterar la aplicaci&oacute;n o su
configuraci&oacute;n para que se ejecute sin chroot.  En otros casos, no
quedar&aacute; m&aacute;s remedio que desactivar esta funcionalidad
usando la opci&oacute;n <tt>-u</tt> de httpd(8) en
<i><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf&amp;sektion=8">/etc/rc.conf</a></i>.

<a name="rootshell"></a>
<h2>10.17 - &iexcl;No me gusta el int&eacute;rprete preasignado al
usuario <i>root</i>!</h2>

<p>
El int&eacute;rprete de &oacute;rdenes preasignado al superusuario
(<i>root shell</i>) en OpenBSD es
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=csh&amp;sektion=1">
csh</a>, debido principalmente a una cuesti&oacute;n de
tradici&oacute;n, aunque csh(1) no es ning&uacute;n requisito
obligatorio para el ingreso como superusuario (pero antes de cambiarlo
es muy aconsejable leer el resto de estas l&iacute;neas).

<p>
Algunos usuarios que provienen de otros sistemas operativos tipo Unix se
encuentran con que csh(1) no es nada familiar, y en seguida preguntan
c&oacute;mo pueden cambiarlo.  Existen algunas opciones:

<ul>
<li><b>&iexcl;No hay que ingresar nunca como <i>root</i>!</b>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=su&amp;sektion=1">
su</a> y
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">
sudo</a> son dos buenas razones para no tener que ingresar en una
m&aacute;quina directamente como usuario <i>root</i> una vez realizada
la configuraci&oacute;n inicial despu&eacute;s de la instalaci&oacute;n.
<li><b>Se puede invocar al int&eacute;rprete que se desee despu&eacute;s
del ingreso.</b>  Si un usuario prefiere ksh(1) o cualquier otro
int&eacute;rprete de &oacute;rdenes, basta con invocarlo desde el
int&eacute;rprete preasignado.
<li><b>Es posible cambiar la asignaci&oacute;n del int&eacute;rprete de
<i>root</i>.</b>  Para ello hay que usar la orden
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chsh&amp;sektion=1">
chsh</a> o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8">
vipw</a>.
</ul>

<p>
Una regla tradicional en Unix es la de usar para el superusuario
<b>s&oacute;lo</b> int&eacute;rpretes de &oacute;rdenes compilados de
modo est&aacute;tico debido a que, si el sistema tuviera que ser
iniciado en modo mono-usuario, las particiones que no fueran la de
<i>root</i> no se montar&iacute;an y un int&eacute;rprete enlazado de
modo din&aacute;mico no podr&iacute;a acceder a las bibliotecas ubicadas
en la partici&oacute;n <tt>/usr</tt>.  De cualquier modo esto no
representa un problema importante para OpenBSD, ya que el sistema
pedir&iacute;a que se asignase un int&eacute;rprete en cuanto se
iniciara en modo mono-usuario, y el int&eacute;rprete predeterminado en
el sistema es
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sh&amp;sektion=1">
sh</a>.  Los tres int&eacute;rpretes de &oacute;rdenes est&aacute;ndar
en OpenBSD,
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=csh&amp;sektion=1">
csh</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sh&amp;sektion=1">
sh</a> y
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&amp;sektion=1">
ksh</a>), est&aacute;n enlazados de modo est&aacute;tico, y por lo tanto
se pueden utilizar en el modo mono-usuario.

<p>
Algunas personas dicen que no se debe cambiar nunca el int&eacute;rprete
preasignado del superusuario, aunque no existe ning&uacute;n motivo para
no hacerlo en OpenBSD.  De cualquier modo esto no es importante, ya que
no se debe ingresar en un sistema directamente como usuario <i>root</i>.

<a name="ksh"></a>
<h2>10.18 - &iquest;Qu&eacute; m&aacute;s puedo hacer con
el int&eacute;rprete <i>ksh</i>?</h2>

<p>
En OpenBSD, 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&amp;sektion=1">
ksh</a> es <a href="http://web.cs.mun.ca/~michael/pdksh/">pdksh</a>,
Public Domain Korn Shell, y es el mismo fichero binario que
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sh&amp;sektion=1">
sh</a>.

<p>
Los usuarios que est&eacute;n acostumbrados a <i>bash</i>, muy usado en
los sistemas basados en Linux, es probable que encuentren
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&amp;sektion=1">
ksh</a> muy parecido.  Ksh(1) dispone de la mayor&iacute;a de
funcionalidades que se encuentran en <i>bash</i>, incluida la
terminaci&oacute;n mediante tabulador, la edici&oacute;n de la
l&iacute;na de &oacute;rdenes y de su historial por medio de las flechas
del teclado, y el uso de CTRL-A/CTRL-E para saltar al principio/final de
la l&iacute;nea de &oacute;rdenes.  Si se requieren otras
funcionalidades de <i>bash</i>, se puede instalar <i>bash</i> como un
<a href="faq8.html#Ports">porte compilable</a> o como un
<a href="faq8.html#Packages">paquete precompilado</a>.

<p>
El punto de inserci&oacute;n (<i>prompt</i>) de &oacute;rdenes de
<i>ksh</i> se puede cambiar f&aacute;cilmente por algo que provea
m&aacute;s informaci&oacute;n que el predefinido &quot;$ &quot; mediante
la configuraci&oacute;n de la variable <tt>PS1</tt>.  Por ejemplo, si
a&ntilde;ado la siguiente l&iacute;nea:

<pre>
     export PS1='$PWD $ '
</pre>

al fichero <tt>/etc/profile</tt>, el punto de inserci&oacute;n se
ver&iacute;a como:

<pre>
     /home/nick $
</pre>

<p>
En el fichero
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/src/etc/ksh.kshrc?content-type=text/plain"><tt>/etc/ksh.kshrc</tt></a>,
se incluyen muchas funcionalidades y ejemplos, y este fichero se puede
invocar desde el fichero <tt>.profile</tt>.

<p>
<font color="#0000e0">
<a href="index.html">[&Iacute;ndice de documentos]</a>
<a href="faq9.html">[Secci&oacute;n 9 - Consejos para usuarios de Linux]</a>
<a href="faq11.html">[Secci&oacute;n 11 - Mejora del rendimiento]</a>
</font>

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../images/back.gif" border="0" alt="[&iacute;ndice]"></a>
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: faq10.html,v 1.96 ]<br>
$Translation: faq10.html,v 1.52 2004/01/04 19:59:58 horacio Exp $<br>
$OpenBSD: faq10.html,v 1.50 2004/01/04 22:23:56 horacio Exp $
</small>
</body>
</html>
@


1.50
log
@Sync with Steelix CVS
@
text
@d1819 1
a1819 1
$OpenBSD$
@


1.49
log
@Sync with Steelix CVS
@
text
@d12 1
a12 1
<meta name="copyright"     content="Este documento es copyright 1998-2003 de OpenBSD.">
d1817 2
a1818 2
Originally [OpenBSD: faq10.html,v 1.95 ]<br>
$Translation: faq10.html,v 1.51 2003/11/02 19:29:50 horacio Exp $<br>
@


1.48
log
@Sync with Steelix CVS
@
text
@d1295 1
a1295 1
230- OpenBSD 3.3 (GENERIC) #44: Sat Mar 29 13:22:05 MST 2003
d1450 2
a1451 1
<a href="../../es/anoncvs.html">http://www.openbsd.org/es/anoncvs.html</a>.
d1455 1
a1455 1
<i>3.3-release</i> usando
d1462 1
a1462 1
$ <b>cvs co -rOPENBSD_3_3_BASE src/libexec/talkd/</b>
a1583 1
<!-- XXXchanges - stops being new with 3.3 -->
d1585 1
a1585 1
A partir de la versi&oacute;n 3.2 de OpenBSD, el servidor de
d1817 2
a1818 2
Originally [OpenBSD: faq10.html,v 1.94 ]<br>
$Translation: faq10.html,v 1.50 2003/10/26 21:46:49 horacio Exp $<br>
@


1.47
log
@Sync with Steelix CVS
@
text
@d551 1
a551 1
<strong>Thawte Certification</strong>, y la puede localizar en
a552 2
Actualmente Thawte puede firmar sus claves RSA.  Est&aacute; en marcha
un procedimiento para poder firmar tambi&eacute;n las claves DSA.
d725 2
a726 1
testuser:$2a$07$ZWnBOsbqMJ.ducQBfsTKUe3PL97Ve1AHWJ0A4uLamniLNXLeYrEie:1002:31::0:0:Test FAQ User:/home/testuser:/bin/ksh
d1460 2
a1461 1
$ <b>cvs -d anoncvs@@anoncvs5.usa.openbsd.org:/cvs co -rOPENBSD_3_3_BASE src/libexec/talkd/</b>
d1557 4
a1560 1
mkdep -a /home/ericj/lsrc/src/libexec/talkd/talkd.c /home/ericj/lsrc/src/libexec/talkd/announce.c /home/ericj/lsrc/src/libexec/talkd/process.c /home/ericj/lsrc/src/libexec/talkd/table.c /home/ericj/lsrc/src/libexec/talkd/print.c
d1567 2
a1568 1
nroff -Tascii -mandoc /home/ericj/lsrc/src/libexec/talkd/talkd.8 &gt; talkd.cat8
d1817 2
a1818 2
Originally [OpenBSD: faq10.html,v 1.92 ]<br>
$Translation: faq10.html,v 1.49 2003/10/20 10:45:20 horacio Exp $<br>
@


1.46
log
@sync with steelix translation CVS
@
text
@d661 4
a664 3
sistema.  Su directorio $HOME ser&aacute; <i>/home/testuser</i>, se le
a&ntilde;adir&aacute; al grupo <b>guest</b>, y se le dar&aacute; el
int&eacute;rprete <i>/bin/ksh</i>.
d671 1
d677 22
a698 19
Enter username [a-z0-9_]: <strong>testuser</strong>
Enter full name []: <strong>Nombre Completo del Usuario</strong>
Enter shell csh ksh nologin sh [ksh]: <strong>ksh</strong>
Uid [1002]: <strong>&lt;Intro&gt;</strong>
Login group testuser [testuser]: <strong>guest</strong>
Login group is ``guest''. Invite testuser into other groups: guest no
[no]: <strong>no</strong>
Enter password []: <strike>introduzca una contrase&ntilde;a</strike>
Enter password again []: <strike>introduzca la contrase&ntilde;a otra vez</strike>

Name:     testuser
Password: ****
Fullname: Nombre Completo del Usuario
Uid:      1002
Gid:      31 (guest)
Groups:   guest
HOME:     /home/testuser
Shell:    /bin/ksh
OK? (y/n) [y]: <strong>y</strong>
d700 2
a701 2
Copy files from /usr/share/skel to /home/testuser
Add another user? (y/n) [y]: <strong>n</strong>
d1101 1
a1101 1
Use option ``-silent'' if you don't want see all warnings and questions.
d1104 1
d1110 22
a1131 19
Enter username [a-z0-9_]: <strong>ftp</strong>
Enter full name []: <strong>anonymous ftp</strong>
Enter shell csh false ksh nologin sh tcsh zsh [sh]: <strong>false</strong>
Uid [1002]:
Login group ftp [ftp]:
Login group is ``ftp''. Invite ftp into other groups: guest no
[no]: <strong>no</strong>
Enter password []:
Set the password so that user cannot logon? (y/n) [n]: <strong>y</strong>

Name:     ftp
Password: ****
Fullname: anonymous ftp
Uid:      1002
Gid:      1002 (ftp)
Groups:   ftp
HOME:     /home/ftp
Shell:    /usr/bin/false
OK? (y/n) [y]: <strong>y</strong>
d1133 2
a1134 2
Copy files from /usr/share/skel to /home/ftp
Add another user? (y/n) [y]: <strong>n</strong>
d1813 2
a1814 2
Originally [OpenBSD: faq10.html,v 1.91 2003/06/17 15:59:07 nick Exp ]<br>
$Translation: faq10.html,v 1.48 2003/06/17 19:54:11 horacio Exp $<br>
@


1.45
log
@
sync with steelix translation CVS
@
text
@a78 1
<a name="10.1"></a>
a120 1
<a name="10.2"></a>
a149 1
<a name="10.3"></a>
a337 1
<a name="10.4"></a>
a394 1
<a name="10.5"></a>
a492 1
<a name="10.6"></a>
a576 1
<a name="10.7"></a>
a629 1
<a name="10.8"></a>
d643 6
d654 10
a663 16
Puede configurarlo para que funcione como mejor le convenga, editando el
fichero <em>/etc/adduser.conf</em>.  Puede a&ntilde;adir usuarios de
forma manual, mediante
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8">
vipw(8)</a>, pero adduser(8) es el modo en que se recomienda hacerlo.
La orden adduser(8) permite llevar a cabo comprobaciones de consistencia
sobre los ficheros <em>/etc/passwd</em> y <em>/etc/group</em>, y sobre
las bases de datos del int&eacute;rprete (<em>shell</em>).
Tambi&eacute;n generar&aacute; las entradas correspondientes y
directorios $HOME.  Incluso puede enviar un mensaje de bienvenida al
usuario.  Todo esto se puede modificar seg&uacute;n se desee.  He
aqu&iacute; un ejemplo de c&oacute;mo un usuario ficticio,
<strong>testuser</strong>, es a&ntilde;adido a un sistema.  Su
directorio $HOME se ubicar&aacute; en <em>/home/testuser</em>, se le
a&ntilde;adir&aacute; al grupo <strong>guest</strong>, y se le
dar&aacute; el int&eacute;rprete (<em>shell</em>) <em>/bin/ksh</em>:
d824 2
a825 2
(<strong>'</strong>) a ambos lados de la cadena de la contrase&ntilde;a,
y no comillas dobles (<strong>&quot;</strong>) ya que &eacute;stas
d828 3
a830 4
eso, aseg&uacute;rese de especificar la opci&oacute;n
<strong>-m</strong> si quiere que el directorio ra&iacute;z del usuario
sea creado y que los ficheros de <em>/etc/skel</em> se copien a este
directorio.
a895 1
<a name="10.9"></a>
a920 1
<a name="10.10"></a>
a1039 1
<a name="10.11"></a>
a1053 1
<a name="10.12"></a>
a1265 1
<a name="10.13"></a>
a1378 1
<a name="10.14"></a>
d1804 2
a1805 2
Originally [OpenBSD: faq10.html,v 1.89 2003/05/05 03:49:58 david Exp ]<br>
$Translation: faq10.html,v 1.47 2003/05/05 21:27:02 horacio Exp $<br>
@


1.44
log
@
changes for OpenBSD 3.3
@
text
@d1793 1
a1793 1
al fichero <tt>/etc/.profile</tt>, el punto de inserci&oacute;n lo
d1819 2
a1820 2
Originally [OpenBSD: faq10.html,v 1.88 2003/05/01 01:47:41 nick Exp ]<br>
$Translation: faq10.html,v 1.46 2003/05/01 18:42:41 horacio Exp $<br>
@


1.43
log
@
sync with steelix translation CVS
@
text
@d61 1
a61 1
cliente/servidor Kerberos IV.</a>
d344 2
a345 1
reenv&iacute;o?</h2>
d1053 1
a1053 1
KerberosIV en OpenBSD</h2>
d1056 2
a1057 4
Como usuario o administrador de sistemas OpenBSD, tiene suerte de que
KerberosIV sea un componente preinstalado del sistema.  &Eacute;sta es
una gu&iacute;a para configurar el servidor Kerberos as&iacute; como el
cliente.
a1058 111
<p>
Un punto *IMPORTANT&Iacute;SIMO* a recordar es que los clientes y
servidores Kerberos deben tener sincronizados sus relojes del sistemas.
Si existe un lapsus de m&aacute;s de 5 minutos, recibir&aacute; errores
extra&ntilde;os que no le revelar&aacute;n que han sido causados por un
lapsus de tiempo, como:

<blockquote><pre>
kinit: Can't send request (send_to_kdc) 
</pre></blockquote>

Otro error m&aacute;s exacto es:

<blockquote><pre>
kauth: Time is out of bounds (krb_rd_req) 
</pre></blockquote>

<p>
Una forma f&aacute;cil para sincronizar los relojes del sistema es con
ntpd, disponible desde el &aacute;rbol de portes en
<em>/usr/ports/net/ntp/</em>.

<p>
Este documento asume unos conocimientos anteriores de los conceptos
detr&aacute;s de Kerberos.  Para una buena referencia, simple de
entender, v&eacute;ase:

<ul>
<li><a href="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/kerberos.html">The FreeBSD handbook</a>
<li>Use la orden <strong>info kth-krb</strong>
<li><a href="http://web.mit.edu/kerberos/www/dialogue.html">Designing an
Authentication System: a Dialogue in Four Scenes</a>
<li><a href="http://web.mit.edu/kerberos/www/papers.html#krb4">Papers
and Documentation Describing KerberosIV</a>
</ul>
O el libro
<ul>
<li><a href="http://www.amazon.com/exec/obidos/ASIN/0130614661/qid%3D930594963/">Network Security Private Communication in a Public World [Kaufman, Perlman, Speciner, 1995]</a>
</ul>

<p>
<h3>C&oacute;mo configurar el servidor y el campo de acci&oacute;n de
Kerberos IV</h3>

<p>
Configuraremos el campo de acci&oacute;n de CIARASYSTEMS.COM con
avalanche.ciarasystems.com como servidor principal.

<p>
Para empezar, tendremos que editar nuestros ficheros de
configuraci&oacute;n.  Estos ficheros est&aacute;n ubicados en
<em>/etc/kerberosIV/</em>.  Los dos ficheros que nos interesan son
<em>krb.realms</em> y <em>krb.conf</em>.  Empecemos con
<em>krb.conf</em>.

<blockquote><pre>
# <strong>cat krb.conf</strong>
CIARASYSTEMS.COM
CIARASYSTEMS.COM avalanche.ciarasystems.com admin server
</pre></blockquote>

<p>
Como puede ver, esto indica a kerberos que el dominio es
CIARASYSTEMS.COM (o campo de acci&oacute;n l&oacute;gico) y que dentro
de ese dominio, avalanche es el servidor de administraci&oacute;n.  A
continuaci&oacute;n veremos <em>krb.realms</em>.  Para m&aacute;s
informaci&oacute;n lea la p&aacute;gina de manual de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=krb.conf&amp;sektion=5">krb.conf(5)</a>.

<blockquote><pre>
# <strong>cat krb.realms</strong>
avalanche.ciarasystems.com      CIARASYSTEMS.COM
.ciarasystems.com               CIARASYSTEMS.COM
</pre></blockquote>

<p>
krb.realms provee una traducci&oacute;n del nombre del hu&eacute;sped al
nombre del campo de acci&oacute;n de Kerberos para los servicios
provistos por ese hu&eacute;sped.  Cada l&iacute;nea del fichero de
traducci&oacute;n es de una de las siguientes formas (el nombre del
dominio deber&iacute;a ser del tipo .XXX.YYY).  As&iacute;, en este
ejemplo, avalanche es el nombre de hu&eacute;sped de una m&aacute;quina
en el campo de acci&oacute;n CIARASYSTEMS.COM, y .ciarasystems.com es el
nombre del dominio en el campo de acci&oacute;n CIARASYSTEMS.COM.  Para
m&aacute;s informaci&oacute;n lea la p&aacute;gina de manual de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=krb.realms&amp;sektion=5">krb.realms(5)</a>.

<p>
A continuaci&oacute;n ejecutaremos
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kdb_init&amp;sektion=8">kdb_init(8)</a>
para crear una base de datos inicial de Kerberos.

<blockquote><pre>
# <strong>kdb_init</strong>
Realm name [default  NO.DEFAULT.REALM ]: CIARASYSTEMS.COM
You will be prompted for the database Master Password.
It is important that you NOT FORGET this password.

Enter Kerberos master password: <strong>not shown</strong>
Verifying password -
Enter Kerberos master password:
</pre></blockquote>

<p>
Lo siguiente que tendremos que usar es
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kstash&amp;sektion=8">kstash(8)</a>,
que se utiliza para guardar clave maestra de la base de datos, del
centro de distribuci&oacute;n de claves (KDC), en el fichero de
cach&eacute; de la clave maestra.

<blockquote>
d1060 1
a1060 7
# <strong>kstash</strong>
Enter Kerberos master password:

Current Kerberos master key version is 1.

Master key entered.  BEWARE!
Wrote master key to /etc/kerberosIV/master_key
a1062 273
De este modo se guarda la contrase&ntilde;a maestra cifrada en
<em>/etc/kerberosIV/master_key</em>.

<p>
A continuaci&oacute;n necesitaremos a&ntilde;adir a la base de datos dos
entradas &quot;principal&quot; por cada uno de los sistemas que
ser&aacute; asegurado con Kerberos.  Sus nombres son <em>kpasswd</em> y
<em>rcmd</em>.  Estas dos entradas &quot;principal&quot; se har&aacute;n
para cada sistema, siendo la entrada &quot;instance&quot; el nombre de
cada sistema.

Estos d&aelig;mon, <em>kpasswd</em> y <em>rcmd</em>, permiten que otros
sistemas cambien las contrase&ntilde;as de Kerberos y ejecuten
&oacute;rdenes como <em>rcp</em>, <em>rlogin</em> y <em>rsh</em>.

<pre>
# <strong>kdb_edit</strong>
Opening database...
    
Enter Kerberos master key:
    
Current Kerberos master key version is 1.
    
Master key entered.  BEWARE!

Previous or default values are in [brackets] ,
enter return to leave the same, or new value.

Principal name: <strong>passwd</strong>
Instance: <strong>avalanche</strong>

&lt;Not found&gt;, Create [y] ? <strong>y</strong>

Principal: passwd, Instance: avalanche, kdc_key_ver: 1
New Password:            <strong>&lt;----- Use 'RANDOM' como contrase&ntilde;a</strong>
Verifying password -
New Password:

Random password [y] ? <strong>y</strong>

Principal's new key version = 1
Expiration date (enter yyyy-mm-dd) [ 1999-12-31 ] ? <strong>2003-12-31</strong>
Max ticket lifetime (*5 minutes) [ 255 ] ?
Attributes [ 0 ] ?
Edit O.K.


Principal name: <strong>rcmd</strong>
Instance: <strong>avalanche</strong>

&lt;Not found&gt;, Create [y] ? <strong>y</strong>
Principal: rcmd, Instance: avalanche, kdc_key_ver: 1
New Password:            <strong>&lt;----- Use 'RANDOM' como contrase&ntilde;a</strong>
Verifying password -
New Password:

Random password [y] ? <strong>y</strong>

Principal's new key version = 1
Expiration date (enter yyyy-mm-dd) [ 1999-12-31 ] ? <strong>2003-12-31</strong>
Max ticket lifetime (*5 minutes) [ 255 ] ?
Attributes [ 0 ] ?
Edit O.K.
Principal name:       <strong>&lt;----- Pulse &lt;INTRO&gt; para acabar</strong>

</pre>
</blockquote>

<p>
Un fichero srvtab es un fichero de la clave de servicio.  Estas claves
deben extraerse de la base de datos del centro de distribuci&oacute;n de
claves de Kerberos para que los servicions autentiquen usando Kerberos.
Por cada uno de los nombres de hu&eacute;sped (&quot;hostname&quot;)
especificados en la l&iacute;nea de &oacute;rdenes,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ext_srvtab&amp;sektion=8">ext_srvtab(8)</a>
genera el fichero de la clave de servicio hostname-new-srvtab, que
contiene todas las entradas en la base de datos con un campo
&quot;instance&quot; del nombre del hu&eacute;sped.

<blockquote><pre>
# <strong>ext_srvtab avalanche</strong>

Enter Kerberos master password:

Current Kerberos master key version is 1.

Master key entered.  BEWARE!
Generating 'avalanche-new-srvtab'....

# <strong>mv avalanche-new-srvtab srvtab</strong>
# <strong>chmod 600 srvtab</strong>
</pre></blockquote>

<p>
Ahora podemos a&ntilde;adir usuarios a nuestra base de datos.

<blockquote><pre>
# <strong>kdb_edit</strong>
Opening database...
    
Enter Kerberos master key:
    
Current Kerberos master key version is 1.
    
Master key entered.  BEWARE!
Previous or default values are in [brackets] ,
enter return to leave the same, or new value.
    
Principal name: <strong>jeremie</strong>
Instance:
    
&lt;Not found&gt;, Create [y] ? <strong>y</strong>
    
Principal: jeremie, Instance: , kdc_key_ver: 1
New Password:                &lt;---- introduzca una contrase&ntilde;a segura aqu&iacute;
Verifying password
    
New Password:                &lt;---- vuelva a introducir la contrase&ntilde;a
Principal's new key version = 1
Expiration date (enter yyyy-mm-dd) [ 2000-01-01 ] ?
Max ticket lifetime (*5 minutes) [ 255 ] ?
Attributes [ 0 ] ?
Edit O.K.
Principal name:          &lt;---- una entrada vac&iacute;a aqu&iacute; causar&aacute; que abandone
</pre></blockquote>

<p>
Ahora ya est&aacute;n configurados todos los &quot;particular&quot;.
Todo lo que queda por hacer es activar la carga del servidor Kerberos
durante el arranque y activar los d&aelig;mon
&laquo;kerberizados&raquo;.

<p>
Escriba en <em>/etc/rc.conf</em>:

<blockquote>
<tt>kerberos_server=YES</tt>
</blockquote>

y en <em>/etc/inetd.conf</em> active las siguientes l&iacute;neas
(quitando el signo del comentario):

<blockquote><pre>
telnet       stream  tcp     nowait  root    /usr/libexec/telnetd    telnetd -k
klogin       stream  tcp     nowait  root    /usr/libexec/rlogind    rlogind -k
kshell       stream  tcp     nowait  root    /usr/libexec/rshd       rshd -k
kauth        stream  tcp     nowait  root    /usr/libexec/kauthd     kauthd
</pre></blockquote>

Y reinicie o:

<blockquote><pre>
# <strong>kill -HUP `cat /var/run/inetd.pid`</strong>
# <strong>/usr/libexec/kerberos &gt;&gt; /var/log/kerberos.log &amp;</strong>
# <strong>/usr/libexec/kadmind -n &gt;&gt; /var/log/kadmind.log &amp;</strong>
</pre></blockquote>

<p>
Nota: &eacute;sta es una configuraci&oacute;n del servidor bastante
simple.  Generalmente se configuran servidores redundantes (y servidores
esclavos) para que si un servidor cayera, todos los servicios que
dependen de Kerberos se mantuvieran.  Tambi&eacute;n podemos
a&ntilde;adir privilegios de 'su' a un &quot;principal&quot;
espec&iacute;fico;  v&eacute;ase el
<a href="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/kerberos.html#AEN9189">the FreeBSD Handbook</a>
para m&aacute;s informaci&oacute;n.

<p>
<h3>C&oacute;mo &laquo;kerberizar&raquo; una estaci&oacute;n de trabajo
cliente</h3>

<p>
Configuraremos la estaci&oacute;n de trabajo llamada <em>gatekeeper</em>
para que est&eacute; en el campo de acci&oacute;n de CIARASYSTEMS.COM,
con avalanche.ciarasystems.com como el servidor principal.

<p>
Para empezar, necesitamos configurar los ficheros <em>krb.conf</em> y
<em>krb.realms</em> como para la m&aacute;quina anterior.  Esto es para
que <em>gatekeeper</em> sepa qu&eacute; servidor es el KDC y en
qu&eacute; dominio se encuentra.  He aqu&iacute; el contenido de los
ficheros:

<blockquote><pre>
# <strong>cat krb.conf</strong>
CIARASYSTEMS.COM
CIARASYSTEMS.COM avalanche.ciarasystems.com admin server

# <strong>cat krb.realms</strong>
avalanche.ciarasystems.com      CIARASYSTEMS.COM
.ciarasystems.com               CIARASYSTEMS.COM
</pre></blockquote>

<p>
Eso ha sido la configuraci&oacute;n, ahora necesitamos iniciar kerberos.
Para obtener un ticket usaremos
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kinit&amp;sektion=1">kinit(1)</a>.

<blockquote><pre>
$ <strong>kinit</strong>
The OpenBSD Project (gatekeeper)
Kerberos Initialization
Kerberos name: <strong>jeremie</strong>
Password:
</pre></blockquote>

<p>
Ahora que nos hemos identificado, podemos ver una lista de nuestros
tickets con
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=klist&amp;sektion=1">klist(1)</a>.

<blockquote><pre>
$ <strong>klist</strong>
Ticket file:    /tmp/tkt1000
Principal:      jeremie@@CIARASYSTEMS.COM

  Issued           Expires          Principal
Jun 28 01:03:25  Jun 28 11:03:25  krbtgt.CIARASYSTEMS.COM@@CIARASYSTEMS.COM
</pre></blockquote>

<p>
Parece que ya est&aacute; todo.  Lo &uacute;nico que queda por hacer es
probarlo.  En los siguientes ejemplos lo probaremos con
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rlogin&amp;sektion=1">rlogin(1)</a> y
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=telnet&amp;sektion=1">telnet(1)</a>.

<blockquote><pre>
$ <strong>telnet avalanche</strong>
Trying 192.168.0.38...
Connected to avalanche.
Escape character is '^]'.
[ Trying mutual KERBEROS4 ... ]
[ Kerberos V4 accepts you ]
[ Kerberos V4 challenge successful ]
Last login: Sun Jun 27 22:52:25 on ttyp1 from gatekeeper
Warning: no Kerberos tickets issued.
OpenBSD 3.2 (GENERIC) #25: Thu Oct  3 19:51:53 MDT 2002
</pre></blockquote>

y 

<blockquote><pre>
$ <strong>rlogin avalanche</strong>
Last login: Sun Jun 27 22:53:39 on ttyp1 from gatekeeper
Warning: no Kerberos tickets issued.
OpenBSD 3.2 (GENERIC) #25: Thu Oct  3 19:51:53 MDT 2002
</pre></blockquote>

<p>
Se ve claro que est&aacute; usando Kerberos para autenticar la
sesi&oacute;n de rlogin.  Para eliminar los tickets de la sesi&oacute;n
usaremos
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kdestroy&amp;sektion=1">kdestroy(1)</a>.
Por ejemplo:

<blockquote><pre>
$ <strong>kdestroy</strong>
Tickets destroyed.
$ <strong>rlogin avalanche</strong>
krcmd: No ticket file (tf_util)
rlogin: warning, using standard rlogin: can't provide Kerberos auth data.
avalanche: Connection refused
</pre></blockquote>

<p>
No se preocupe por el mensaje 'Warning: no Kerberos tickets issued'.
Esto es debido a que s&oacute;lo estamos haciendo autenticaci&oacute;n
con kerberos, no pases de tickets.  Si quiere pases de tickets, use
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">
OpenSSH</a> que tiene soporte para ello.  KerberosIV de serie tampoco
tiene soporte para pases tgt, s&oacute;lo la implementaci&oacute;n de
krb4 de kaserver AFS, ya que KerberosIV normal comprueba con kdc las
direcciones IP de los clientes en la lista del ticket.
d1301 1
a1301 1
230- OpenBSD 3.2 (GENERIC) #25: Thu Oct  3 19:51:53 MDT 2002
d1460 2
a1461 2
Para obtener obtener el c&oacute;digo fuente de OpenBSD
<i>3.2-release</i> usando
d1467 1
a1467 1
$ <b>cvs -d anoncvs@@anoncvs5.usa.openbsd.org:/cvs co -rOPENBSD_3_2_BASE src/libexec/talkd/</b>
d1819 2
a1820 2
Originally [OpenBSD: faq10.html,v 1.87 2003/04/10 19:01:31 nick Exp ]<br>
$Translation: faq10.html,v 1.45 2003/04/12 14:28:24 horacio Exp $<br>
@


1.42
log
@
sync with steelix translation CVS
@
text
@d37 1
a37 1
<li><a href="#rc">10.3 - &iquest;C&oacute;mo inicio los d&aelig;mons con
d103 4
a106 4
inserci&oacute;n <tt>Invite <em>user</em> into other groups:</tt>,
simplemente contestando <kbd>wheel</kbd>.  De este modo el usuario
quedar&aacute; a&ntilde;adido a la l&iacute;nea del grupo
<kbd>wheel</kbd> en el fichero <em>/etc/group</em>, que quedar&aacute;
d153 1
a153 1
<h2>10.3 - &iquest;C&oacute;mo inicio los d&aelig;mons con el sistema?
d167 1
a167 1
<em>/etc/rc</em> para saber qu&eacute; d&aelig;mons deben iniciarse con
d178 1
a178 1
de los d&aelig;mons.
d222 4
a225 4
<li>Se inician los &quot;d&aelig;mons&quot;.
<li>Se llevan a cabo varias comprobaciones (&quot;quota&quot;,
&quot;savecore&quot;, etc...).
<li>Se invocan y ejecutan los &quot;d&aelig;mons&quot; locales, como en
d230 1
a230 1
<h3>Inicio de los d&aelig;mons y servicios predefinidos en OpenBSD</h3>
d233 1
a233 1
La mayor&iacute;a de d&aelig;mons y servicios que vienen predefinidos en
d287 7
a293 6
Otro modo ser&iacute;a no tocar nunca el fichero <em>/etc/rc.conf</em>,
y en su lugar crear el fichero <em>/etc/rc.conf.local</em>, copiando en
&eacute;ste s&oacute;lo las l&iacute;neas que se quieran cambiar de
<em>/etc/rc.conf</em> y ajustarlas seg&uacute;n se necesite.  De este
modo las futuras actualizaciones pueden ser m&aacute;s f&aacute;ciles,
ya que todos los cambios estar&aacute;n en este fichero.
d296 1
a296 1
<h3>Inicio y configuraci&oacute;n de d&aelig;mons locales</h3>
d299 1
a299 1
Para instalar otros d&aelig;mons en el sistema, por medio de los portes
d313 5
d377 1
a377 1
se&ntilde;al que hace que la mayor&iacute;a de d&aelig;mons vuelvan a
d745 1
a745 1
que facilita el uso de &eacute;stas por medio de un gui&oacute;n de
d749 1
a749 1
Una lista de las &oacute;rdenes a&ntilde;adidas:
d931 1
a931 1
<h2>10.11 - Configuraci&oacute;n de cuotas</h2>
d1192 1
a1192 1
Estos d&aelig;mons, <em>kpasswd</em> y <em>rcmd</em>, permiten que otros
d1310 1
a1310 1
durante el arranque y activar los d&aelig;mons
d1671 2
a1672 2
<h2>10.14 - C&oacute;mo se confinan a los usuarios a sus directorios de
usuario (&quot;home&quot;) en ftpd(8)</h2>
d2210 2
a2211 2
Originally [OpenBSD: faq10.html,v 1.86 2003/04/04 17:49:08 nick Exp ]<br>
$Translation: faq10.html,v 1.44 2003/04/06 22:13:41 horacio Exp $<br>
@


1.41
log
@
sync with steelix translation CVS
@
text
@d1970 1
a1970 1

d2204 2
a2205 2
Originally [OpenBSD: faq10.html,v 1.85 2003/03/18 03:41:04 nick Exp ]<br>
$Translation: faq10.html,v 1.43 2003/03/18 12:33:27 horacio Exp $<br>
@


1.40
log
@
sync with steelix translation CVS
@
text
@d20 7
a26 1
<h2><font color="#e00000">10 - Gesti&oacute;n del sistema</font></h2>
d2193 1
a2193 1
<a href="index.html">[Volver al &iacute;ndice principal]</a>
d2195 1
a2195 1
<a href="faq11.html">[Secci&oacute;n 11 - Afinar el rendimiento]</a>
d2204 2
a2205 2
Originally [OpenBSD: faq10.html,v 1.84 2003/03/11 23:03:07 nick Exp ]<br>
$Translation: faq10.html,v 1.42 2003/03/12 20:15:39 horacio Exp $<br>
a2207 1

@


1.39
log
@
translations fixes reported through sendbug
thank you Víctor Sánchez <one- at madridwireless dot net>
@
text
@d923 3
a925 8
en sus discos.  Puede ser muy &uacute;til en situaciones en las que Vd.
disponga de recursos limitados.  Las cuotas se pueden configurar de dos
maneras diferentes:

<ul>
   <li>Cuotas de Usuario
   <li>Cuotas de Grupo
</ul>
d930 16
a945 14
configuraci&oacute;n del n&uacute;cleo de su sistema.  Esta
opci&oacute;n est&aacute; configurada en el n&uacute;cleo GENERIC.
Despu&eacute;s necesita marcar los sistemas de archivo para los que vaya
a configurar las cuotas en <em>/etc/fstab</em>.  Debe usar las palabras
clave <code>userquota</code> y <code>groupquota</code> para marcar cada
sistema de archivo en el que usará las cuotas.  Por definici&oacute;n,
los ficheros <code>quota.user</code> y <code>quota.group</code> se
crear&aacute;n en la ra&iacute;z de ese sistema de archivo que
tendr&aacute; la informaci&oacute;n sobre las cuotas.  Esto se puede
anular con la siguiente orden:
<code>userquota=/var/quotas/quota.user</code> ... o cualquier otro
fichero en el que quiera almacenar la informaci&oacute;n sobre cuotas.
He aqu&iacute; un ejemplo de <em>/etc/fstab</em> con un sistema de
archivo con cuotas de usuario activadas:
d955 4
a958 3
Una forma simple de usarlo es <strong>edquota &lt;usuario&gt;</strong>.
La orden edquota(8) usar&acute; vi(1) para editar las cuotas a menos que
la variable de entorno EDITOR indique un editor diferente.  Por ejemplo:
d983 10
a992 10
Aqu&iacute; el l&iacute;mite &quot;soft&quot; es de 1.000 bloques, y el
l&iacute;mite &quot;hard&quot; de 1.050 bloques.  El l&iacute;mite
&quot;soft&quot; es en el que el usuario s&oacute;lo recibe un aviso
cuando lo sobrepasa, y tiene hasta su periodo de gracia para rebajar su
uso del disco por debajo de su l&iacute;mite.  Los periodos de gracia se
pueden configurar usando la opci&oacute;n <strong>-t</strong> con la
orden edquota(8).  Despu&eacute;s de que el periodo de gracia haya
pasado, el l&iacute;mite &quot;soft&quot; se toma como l&iacute;mite
&quot;hard&quot;.  El resultado es un fallo de ubicaci&oacute;n
(&quot;allocation failure&quot;).
d1005 3
a1007 3
De este modo repasar&aacute; /etc/fstab para activar los sistemas de
archivo con opciones de cuota.  En cuanto las cuotas est&eacute;n
funcionando, puede verlas con
d1009 4
a1012 4
Si usa la orden <strong>quota &lt;usuario&gt;</strong> obtendr&aacute;
la informaci&oacute;n sobre el usuario que especifique.  Al ser invocada
sin argumentos, la orden quota(8) le dar&aacute; sus estad&iacute;sticas
de cuotas.  Por ejemplo:
d1028 1
a1028 1
Las cuotas que est&eacute;n configuradas en <em>/etc/fstab</em>
d2198 2
a2199 2
Originally [OpenBSD: faq10.html,v 1.82 2003/02/28 00:34:28 nick Exp ]<br>
$Translation: faq10.html,v 1.41 2003/03/01 15:06:16 horacio Exp $<br>
@


1.38
log
@
sync with steelix translation CVS
@
text
@d1545 2
a1546 2
directorio.  Este directorio deber&iacute;a ser de modo 511, y los dos
ficheros de modo 444.  &Eacute;stos se usan para dar al propietario
d1552 1
a1552 1
tambi&eacute;n debert&iacute; ser de modo 555.
d2200 2
a2201 2
Originally [OpenBSD: faq10.html,v 1.81 2003/02/24 17:39:20 nick Exp ]<br>
$Translation: faq10.html,v 1.39 2003/02/25 12:22:31 horacio Exp $<br>
@


1.37
log
@
sync with steelix translation CVS
@
text
@d4 1
a4 1
<title>10.0 - Gesti&oacute;n del sistema</title>
d20 1
a20 1
<h2><font color="#e00000">10.0 - Gesti&oacute;n del sistema</font></h2>
d80 5
a84 5
<em>root</em>, antes hay que a&ntilde;adirlo al grupo <kbd>wheel</kbd> a
mano.  Esto se hace por motivos de seguridad, y se recomienda tener
cuidado con los usuarios a los que se otorgue este acceso especial.  En
OpenBSD, los usuarios que pertenezcan al grupo <kbd>wheel</kbd>
podr&aacute;n usar el programa
d86 5
a90 5
su(1)</a> en modo usuario (<em>userland program</em>) para convertirse
en el superusuario <em>root</em>.  Los usuarios que no pertenezcan al
grupo <kbd>wheel</kbd> no podr&aacute;n usar su(1).  A
continuaci&oacute;n puede verse el ejemplo de una entrada en el fichero
<em>/etc/group</em> para asociar al usuario <strong>ericj</strong> al
d96 6
a101 5
se puede asociar al grupo <kbd>wheel</kbd> desde el punto <tt>Invite
<em>user</em> into other groups:</tt>, simplemente contestando
<kbd>wheel</kbd>.  De este modo se a&ntilde;adir&aacute; al usuario a la
l&iacute;nea del grupo <kbd>wheel</kbd>, en el fichero
<em>/etc/group</em>, que quedar&aacute; del siguiente modo:
d109 1
a109 1
a los privilegios del superusuario sin tener que asociarlos al grupo
d111 2
a112 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo(8)</a>.
d135 4
a138 4
sistema de archivos o parte de &eacute;l.  La orden
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tar&amp;sektion=1">tar(1)</a>
puede resultar m&aacute;s r&aacute;pida para una operaci&oacute;n de
este tipo.  El formato es muy parecido:
d148 2
a149 1
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;sektion=8">rc(8)</a>)</h2>
d153 3
a155 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;sektion=8">rc(8)</a>,
para lo que necesita unos cuantos ficheros claves para iniciar.
d176 2
a177 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=init&amp;sektion=8">init(8)</a>.
d193 2
a194 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;sektion=8">rc(8)</a>,
v&eacute;ase el siguiente flujo:
d231 3
a233 3
<a href="http://www.openbsd.org/cgi-bin/cvsweb/src/etc/rc.conf">/etc/rc.conf</a>
que viene incluido con el sistema, en donde se ven unas l&iacute;neas
parecidas a la siguiente:
d242 2
a243 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;sektion=8">rc(8)</a>;
v&eacute;se la <a href="#AnonFTP">secci&oacute;n sobre FTP
d250 5
a254 4
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=man&amp;sektion=1">man(1)</a>
(las p&aacute;ginas del manual) para ver c&oacute;mo se puede iniciar de
cualquier otro modo que se prefiera ese d&aelig;mon o servicio.  Como
ejemplo, v&eacute;ase la l&iacute;nea predefinida para la entrada de
d376 6
a381 3
<li><a href="http://www.sendmail.org/~ca/email/relayingdenied.html">http://www.sendmail.org/~ca/email/relayingdenied.html</a>
<li><a href="http://www.sendmail.org/tips/relaying.html">http://www.sendmail.org/tips/relaying.html</a>
<li><a href="http://www.sendmail.org/antispam.html">http://www.sendmail.org/antispam.html</a>
d1841 2
a1842 2
Para obtener obtener el c&oacute;digo fuente de la versi&oacute;n 2.7
usando
d1844 1
a1844 1
cvs(1)</a>, debe hacer lo siguiente:
d1848 1
a1848 1
$ <b>cvs -d anoncvs@@anoncvs5.usa.openbsd.org:/cvs co -rOPENBSD_3_0_BASE src/libexec/talkd/</b>
d2190 2
a2191 2
<a href="faq9.html">[Secci&oacute;n 9.0 - Consejos para usuarios de Linux]</a>
<a href="faq11.html">[Secci&oacute;n 11.0 - Afinar el rendimiento]</a>
d2200 2
a2201 2
Originally [OpenBSD: faq10.html,v 1.79 2003/01/11 20:42:21 nick Exp ]<br>
$Translation: faq10.html,v 1.37 2003/01/12 18:06:09 horacio Exp $<br>
@


1.36
log
@
sync with steelix translation CVS
@
text
@d63 4
d2061 117
d2191 2
a2192 2
Originally [OpenBSD: faq10.html,v 1.78 2003/01/01 13:01:59 nick Exp ]<br>
$Translation: faq10.html,v 1.36 2003/01/06 18:33:11 horacio Exp $<br>
@


1.35
log
@
sync with badlands translation CVS
@
text
@d12 1
a12 1
<meta name="copyright"     content="Este documento es copyright 1998-2002 de OpenBSD.">
d1199 1
a1199 1
Expiration date (enter yyyy-mm-dd) [ 1999-12-31 ] ? <strong>2002-12-31</strong>
d1217 1
a1217 1
Expiration date (enter yyyy-mm-dd) [ 1999-12-31 ] ? <strong>2002-12-31</strong>
d2070 2
a2071 2
Originally [OpenBSD: faq10.html,v 1.77 2002/12/04 19:17:25 nick Exp ]<br>
$Translation: faq10.html,v 1.35 2002/12/16 11:52:29 horacio Exp $<br>
@


1.34
log
@
sync with badlands translation CVS
@
text
@d198 1
a198 1
correspondiente en <em>/etc.conf</em>.
d2071 1
a2071 1
$Translation: faq10.html,v 1.34 2002/12/04 20:46:39 horacio Exp $<br>
@


1.33
log
@
sync with badlands translation CVS
@
text
@d460 1
a460 2
Env&iacute;e a Sendmail una se&ntilde;al HUP mediante la siguiente
orden:
d463 1
a463 1
     $ <strong>sudo kill -HUP `head -1 /var/run/sendmail.pid`</strong>
d2070 2
a2071 2
Originally [OpenBSD: faq10.html,v 1.76 2002/11/13 18:05:04 nick Exp ]<br>
$Translation: faq10.html,v 1.33 2002/11/13 21:52:33 horacio Exp $<br>
@


1.32
log
@
Apache chrooted
@
text
@d1 1
d20 2
a21 3
<h2><font color="#e00000">10.0 - Gesti&oacute;n del
sistema</font><hr></h2>
</p>
d24 2
a25 1
<ul><h3>&Iacute;ndice de contenidos</h3>
d28 1
a28 1
en el grupo err&oacute;neo.</a> (&quot;wrong group&quot;).</li>
d30 1
a30 1
sistema de archivos?</a></li>
d33 1
a33 1
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&apropos=0&sektion=8&manpath=OpenBSD+Current&format=html">rc(8)</a>).</li>
d36 2
a37 2
les niega el acceso de reenv&iacute;o?</a> (&quot;relaying access
denied&quot;).</li>
d40 1
a40 1
puedo hacer?</a></li>
d42 1
a42 1
el fichero <tt>/etc/hosts</tt>?</a></li>
d44 1
a44 1
seguro usando ssl(8).</a></li>
d46 1
a46 1
pero los cambios no funcionan.  &iquest;Por qu&eacute;?</a></li>
d48 1
a48 1
usuario?  &iquest;C&oacute;mo elimino un usuario?</a></li>
d50 1
a50 1
cuenta s&oacute;lo FTP?</a></li>
d52 2
a53 2
el uso del disco a los usuarios.</a> 
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=quota&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html">quota(1)</a>).</li>
d55 1
a55 1
cliente/servidor Kerberos IV.</a></li>
d57 1
a57 1
FTP an&oacute;nimo.</a></li>
d64 1
a64 1
</p> 
a66 2
<br>

a72 1
</p>
d81 7
a87 7
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=su&sektion=1">su(1)</a>
en modo usuario (<em>userland program</em>) para convertirse en el
superusuario <em>root</em>.  Los usuarios que no pertenezcan al grupo
<kbd>wheel</kbd> no podr&aacute;n usar su(1).  A continuaci&oacute;n
puede verse el ejemplo de una entrada en el fichero <em>/etc/group</em>
para asociar al usuario <strong>ericj</strong> al grupo
<kbd>wheel</kbd>.
d91 1
a91 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&sektion=8">adduser(8)</a>,
a96 1
</p>
d98 1
a98 2
<ul>
<pre>
d100 1
a100 2
</pre>
</ul>
d106 1
a106 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&sektion=8">sudo(8)</a>.
</p>
a112 1
</p>
d116 2
a117 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&sektion=8">dump(8)</a> y
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&sektion=8">restore(8)</a>.
a119 1
</p>
d121 1
a121 2
<ul>
<pre>
d123 1
a123 2
</pre>
</ul>
d130 1
a130 1
<a href"http://www.openbsd.org/cgi-bin/man.cgi?query=tar&sektion=1">tar(1)</a>
d134 1
a134 2
<ul>
<pre>
d136 1
a136 3
</pre>
</ul>
<br>
d142 1
a142 2
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&sektion=8">rc(8)</a>)</h2>
</p>
d146 1
a146 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&sektion=8">rc(8)</a>,
a147 1
</p>
d168 1
a168 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=init&sektion=8">init(8)</a>.
d170 1
a170 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=shutdown&sektion=8">shutdown(8)</a>.
d173 1
a173 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.shutdown&sektion=8">rc.shutdown(8)</a>.
d176 1
d184 1
a184 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&sektion=8">rc(8)</a>,
a185 1
</p>
d187 4
a190 2
<ul>Despu&eacute;s de arrancar el n&uacute;cleo del sistema, se inicia
<em>/etc/rc</em>.
d214 1
a224 1
</p>
d226 1
a226 2
<ul>
<pre>
d228 1
a228 2
</pre>
</ul>
d233 1
a233 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&sektion=8">rc(8)</a>;
d241 1
a241 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=man&sektion=1">man(1)</a>
d245 1
a245 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html">httpd(8)</a>:
</p>
d247 1
a247 2
<ul>
<pre>
d249 1
a249 2
</pre>
</ul>
d256 1
a256 2
<ul>
<pre>
d258 1
a258 2
</pre>
</ul>
d263 2
a264 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssl&sektion=8&format=html">ssl(8)</a>),
ser&aacute; necesaria una l&iacute;nea como la siguiente:
d266 1
a266 2
<ul>
<pre>
d268 1
a268 3
</pre>
</ul>
</p>
d278 1
a287 1
</p>
d289 1
a289 2
<ul>
<pre>
d293 1
a293 2
</pre>
</ul>
a299 1
</p>
d301 1
a301 2
<ul>
<pre>
d303 1
a303 2
</pre>
</ul>
d305 1
a314 1
</p>
a322 1
</p>
d326 2
a327 3
</p>
<ul>
<pre>
d329 2
a330 2
</pre>
</ul>
d333 2
a334 3
</p>
<ul>
<pre>
d336 2
a337 2
</pre>
</ul>
a341 1
</p>
d343 1
a343 2
<ul>
<pre>
d351 1
a351 2
</pre>
</ul>
a356 1
</p>
d358 1
a358 2
<ul>
<pre>
d360 2
a361 2
</pre>
</ul>
a362 1

a364 1
<p>
a369 1
</p>
a375 1
</p>
a380 1
</p>
d382 1
a382 2
<ul>
<pre>
d384 1
a384 2
</pre>
</ul>
d389 1
a389 2
<ul>
<pre>
d396 1
a396 3
</pre>
</ul>
</p>
a404 1
</p>
d413 3
a415 3
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=popa3d&sektion=8">
popa3d</a>, que se encuentra en la instalaci&oacute;n base de OpenBSD.
O podr&iacute;a darse el caso que tuviera seleccionadas las opciones
a419 1
</p>
d426 1
a426 2
<ul>
<pre>
d428 1
a428 3
</pre>
</ul>
</p>
a433 1
</p>
a439 1
</p>
a445 1
</p>
a453 1
</p>
a461 1
</p>
a468 1
</p>
a475 1
</p>
d482 1
a482 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&sektion=8&format=html">httpd(8)</a>, 
d488 3
a490 3
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssl&sektion=8&format=html">ssl(8)</a>.
Puede ver una informaci&oacute;n m&aacute;s detallada en esta
p&aacute;gina del manual.  La informaci&oacute;n incluida en este
d494 2
a495 3
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssl&sektion=8&format=html">ssl(8)</a> 
si necesita obtener m&aacute;s informaci&oacute;n.
</p> 
a499 1
</p>
a509 1
</p>
a521 1
</p>
a535 1
</p>
a539 1
</p>
d551 1
a551 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&sektion=8">httpd(8)</a>
a554 1
</p> 
a560 1
</p>
d566 1
a566 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pwd_mkdb&sektion=8">pwd_mkdb(8)</a>.
d571 1
a571 2
<ul>
<pre>
d581 1
a581 2
</pre>
</ul>
d598 2
a599 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&apropos=0&sektion=8&manpath=OpenBSD+Current&format=html">vipw(8)</a>,
para la edici&oacute;n del fichero de contrase&ntilde;as.
d601 8
a608 9
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vi&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html">vi(1)</a>
(nuestro editor preferido, definido por $EDITOR) para editar el fichero
<em>/etc/master.passwd</em>.  Una vez que ha terminado de editar, vuelve
a crear los ficheros <em>/etc/passwd</em>, <em>/etc/pwd.db</em>, y
<em>/etc/spwd.db</em> conforme con los cambios que haya llevado a cabo.
<kbd>vipw</kbd> tambi&eacute;n se encarga de bloquear estos ficheros, de
modo que si alguna otra persona intentara cambiarlos al mismo tiempo, no
le permitir&iacute;a el acceso.
</p>
a614 1
</p>
d630 5
a634 5
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&sektion=8">
adduser(8)</a>.  Puede configurarlo para que funcione como mejor le
convenga, editando el fichero <em>/etc/adduser.conf</em>.  Puede
a&ntilde;adir usuarios de forma manual, mediante
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&sektion=8">
a646 1
</p>
d648 1
a648 2
<ul>
<pre>
d681 1
a681 2
</pre>
</ul>
d685 1
a685 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rmuser&sektion=8&format=html">rmuser(8)</a>.
d688 1
a688 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=crontab&sektion=1&format=html">crontab(1)</a>
a692 1
</p>
a698 1
</p>
d700 1
a700 2
<ul>
<pre>
d712 1
a712 2
</pre>
</ul>
d714 1
d720 1
a720 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&sektion=8&format=html">adduser(8)</a>,
a722 1
</p>
d724 2
d727 10
a736 11
Una lista de las &oacute;rdenes a&ntilde;adidas:
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=group&sektion=8&format=html">group(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=groupadd&sektion=8&format=html">groupadd(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=groupdel&sektion=8&format=html">groupdel(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=groupinfo&sektion=8&format=html">groupinfo(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=groupmod&sektion=8&format=html">groupmod(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=user&sektion=8&format=html">user(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&sektion=8&format=html">useradd(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=userdel&sektion=8&format=html">userdel(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=userinfo&sektion=8&format=html">userinfo(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=usermod&sektion=8&format=html">usermod(8)</a>
d739 1
a750 1
</p>
d761 1
a761 2
<ul>
<pre>
d770 1
a770 3
</pre>
</ul>
</p>
d782 1
a782 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=encrypt&sektion=1&format=html">encrypt(1)</a>
a784 1
</p>
d790 1
a790 2
<ul>
<pre>
d794 1
a794 2
</pre>
</ul>
d800 1
a800 2
<ul>
<pre>
d803 1
a803 3
</pre>
</ul>
</p>
a814 1
</p>
d822 1
a822 2
<ul>
<pre>
d837 1
a837 3
</pre>
</ul>
</p>
d843 1
a843 2
<ul>
<pre>
d855 1
a855 3
</pre>
</ul>
</p>
d857 1
d866 1
a866 2
<ul>
<pre>
d868 1
a868 3
</pre>
</ul>
</p>
a876 1
</p>
a882 1
</p>
d891 1
a891 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&sektion=8&format=html">adduser(8)</a> 
d900 3
a902 4
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&sektion=8&format=html">ftpd(8)</a>, 
puede restringir los ingresos (<em>login</em>) para que s&oacute;lo sean
posibles por ftpchroot.
</p>
a907 1
</p>
a913 1
</p>
a914 1
<p>
d916 2
a917 2
   <li>Cuotas de Usuario</li>
   <li>Cuotas de Grupo</li>
a918 1
</p>
a936 1
</p>
d938 1
a938 2
<ul>
<pre>
d940 1
a940 2
</pre>
</ul>
d945 1
a945 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=edquota&sektion=8&format=html">edquota(8)</a>.
a948 1
</p>
d950 1
a950 2
<ul>
<pre>
d952 1
a952 2
</pre>
</ul>
a955 1
</p>
d957 1
a957 2
<ul>
<pre>
d961 1
a961 2
</pre>
</ul>
a964 1
</p>
d966 1
a966 2
<ul>
<pre>
d970 1
a970 2
</pre>
</ul>
a982 1
</p>
d987 1
a987 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=quotaon&sektion=8&format=html">quotaon(8)</a>.
a988 1
</p>
d990 1
a990 2
<ul>
<pre>
d992 1
a992 2
</pre>
</ul>
d998 1
a998 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=quota&sektion=1&format=html">quota(1)</a>.
a1002 1
</p>
d1004 1
a1004 2
<ul>
<pre>
d1006 1
a1006 2
</pre>
</ul>
a1009 1
</p>
d1011 1
a1011 2
<ul>
<pre>
d1015 1
a1015 2
</pre>
</ul>
d1022 3
a1024 5
<ul>
<pre># <strong>quotaoff -a</strong>
</pre>
</ul>
</p>
a1030 1
</p>
a1036 1
</p>
a1043 1
</p>
d1045 1
a1045 2
<ul>
<pre>
d1047 1
a1047 2
</pre>
</ul>
d1051 1
a1051 2
<ul>
<pre>
d1053 1
a1053 2
</pre>
</ul>
a1058 1
</p>
d1060 4
a1063 3
Este documento asume que tiene unos conocimientos anterior de los
conceptos detr&aacute;s de Kerberos.  Para una buena referencia, simple
de entender, lea:
d1066 2
a1067 2
<li><a href="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/kerberos.html">The FreeBSD handbook</a></li>
<li>Use la orden <strong>info kth-krb</strong></li>
d1069 1
a1069 1
Authentication System: a Dialogue in Four Scenes</a></li>
d1071 5
a1075 3
and Documentation Describing KerberosIV</a></li>
</ul>O el libro<ul>
<li><a href="http://www.amazon.com/exec/obidos/ASIN/0130614661/qid%3D930594963/">Network Security Private Communication in a Public World [Kaufman, Perlman, Speciner, 1995]</a></li> 
d1078 1
a1084 1
</p>
a1091 1
</p>
d1093 1
a1093 2
<ul>
<pre>
d1097 1
a1097 2
</pre>
</ul>
d1105 1
a1105 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=krb.conf&sektion=5&format=html">krb.conf</a>.
</p>
d1107 1
a1107 2
<ul>
<pre>
d1111 1
a1111 2
</pre>
</ul>
d1123 1
a1123 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=krb.realms&sektion=5&format=html">krb.realms</a>.
</p>
d1127 1
a1127 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kdb_init&sektion=8&format=html">kdb_init(8)</a>
a1128 1
</p>
d1130 1
a1130 2
<ul>
<pre>
d1139 1
a1139 2
</pre>
</ul>
d1143 1
a1143 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kstash&sektion=8&format=html">kstash(8)</a>,
a1146 1
</p>
d1148 1
a1148 1
<ul>
d1225 1
a1225 1
</ul>
d1233 1
a1233 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ext_srvtab&sektion=8&format=html">ext_srvtab(8)</a>
a1236 1
</p>
d1238 1
a1238 2
<ul>
<pre>
d1250 1
a1250 2
</pre>
</ul>
a1253 1
</p>
d1255 1
a1255 2
<ul>
<pre>
d1283 1
a1283 2
</pre>
</ul>
a1289 1
</p>
d1294 1
a1294 1
<ul>
d1296 1
a1296 1
</ul>
d1301 1
a1301 2
<ul>
<pre>
d1306 1
a1306 2
</pre>
</ul>
d1310 1
a1310 2
<ul>
<pre>
d1314 1
a1314 3
</pre>
</ul>
</p>
d1322 1
a1322 1
espec&iacute;fico;  vea el
a1324 1
</p>
d1326 1
a1333 1
</p>
a1340 1
</p>
d1342 1
a1342 2
<ul>
<pre>
d1350 1
a1350 2
</pre>
</ul>
d1355 1
a1355 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kinit&sektion=1&format=html">kinit(1)</a>.
</p>
d1357 1
a1357 2
<ul>
<pre>
d1363 1
a1363 2
</pre>
</ul>
d1368 1
a1368 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=klist&sektion=1&format=html">klist(1)</a>.
</p>
d1370 1
a1370 2
<ul>
<pre>
d1377 1
a1377 2
</pre>
</ul>
d1382 2
a1383 3
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rlogin&apropos=0&sektion=1&manpath=OpenBSD+Current&format=html">rlogin(1)</a> y
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=telnet&apropos=0&sektion=1&manpath=OpenBSD+Current&format=html">telnet(1)</a>.
</p>
d1385 1
a1385 2
<ul>
<pre>
d1396 1
a1396 2
</pre>
</ul>
d1400 1
a1400 2
<ul>
<pre>
d1405 1
a1405 2
</pre>
</ul>
d1411 1
a1411 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kdestroy&sektion=1&format=html">kdestroy(1)</a>.
a1412 1
</p>
d1414 1
a1414 2
<ul>
<pre>
d1421 1
a1421 2
</pre>
</ul>
d1427 5
a1431 6
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1&format=html">OpenSSH</a>
que tiene soporte para ello.  KerberosIV de serie tampoco tiene soporte
para pases tgt, s&oacute;lo la implementaci&oacute;n de krb4 de kaserver
AFS, ya que KerberosIV normal comprueba con kdc las direcciones IP de
los clientes en la lista del ticket.
</p>
a1436 1
</p>
a1444 1
</p>
d1446 1
d1457 3
a1459 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&sektion=8&format=html">ftp(8)</a> y
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html">chroot(2)</a>.
d1462 1
a1462 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&sektion=8&format=html">adduser(8)</a>.
a1474 1
</p>
d1476 1
a1476 2
<ul>
<pre>
d1509 1
a1509 2
</pre>
</ul>
d1511 1
d1519 2
a1520 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&sektion=8&format=html">ftp(8)</a>.
</p>
d1522 3
a1525 3
<strong>No</strong> necesita crear un directorio <em>/home/ftp/usr</em>
o <em>/home/ftp/bin</em>.<br>

d1527 1
a1527 1
debe ser root, y los permisos deben ser 555.</li>
d1537 1
a1537 1
<em>spwd.db</em>, as&iacute; que no las copie ah&iacute;.</li>
a1546 1
</p>
d1548 1
a1548 2
<ul>
<pre>
d1569 1
a1569 2
</pre>
</ul>
d1571 1
d1575 2
a1576 3
Con <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html">ftpd(8)</a>
puede escoger entre invocarlo desde
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inetd&&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html">inetd(8)</a> 
d1578 7
a1584 7
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html">rc(8)</a>.
En estos ejemplos se ver&aacute; c&oacute;mo se inicia nuestro
d&aelig;mon desde
<a href="http://www.openbsd.org/cgi-bin/cvsweb/src/etc/inetd.conf">inetd.conf</a>.
Primero debemos familiarizarnos con algunas de las opciones de ftpd.
La l&iacute;nea por definici&oacute;n de <em>/etc/inetd.conf</em> es:
</p>
d1586 1
a1586 2
<ul>
<pre>
d1590 1
a1590 2
</pre>
</ul>
d1597 8
a1604 8
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=who&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html">who(1)</a>.
Es posible que algunos s&oacute;lo quisieran tener un servidor
an&oacute;nimo, y desactivar ftp para usuarios.  Para ello debe invocar
ftpd con la opci&oacute;n <em>-A</em>.  He aqu&iacute; una l&iacute;nea
que inicia ftpd para conexiones an&oacute;nimas s&oacute;lo.
Tambi&eacute;n usa <em>-ll</em> para grabar cada conexi&oacute;n a
syslog, junto con las &oacute;rdenes de ftp 'get', 'retrieve', etc.
</p>
d1606 1
a1606 2
<ul>
<pre>
d1610 1
a1610 2
</pre>
</ul>
a1620 1
</p>
d1622 1
a1622 2
<ul>
<pre>
d1624 1
a1624 2
</pre>
</ul>
a1629 1
</p>
d1631 1
d1637 1
a1637 1
   ver&aacute;n al conectar con su servidor ftp.</li>
d1639 1
a1639 1
   despu&eacute;s de haber ingresado en su servidor ftp.</li>
d1642 1
a1642 1
   mensaje que contiene.</li>
a1650 1
</p>
d1654 3
a1656 3
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&sektion=8&format=html">ftpd(8)</a>
est&aacute; configurado por definici&oacute;n para poder gestionar esto
de modo muy f&aacute;cil.  Se hace por medio del fichero
a1661 1
</p>
d1663 1
a1663 2
<ul>
<pre>
d1706 1
a1706 2
</pre>
</ul>
a1714 1
</p>
d1716 1
a1716 2
<ul>
<pre>
d1723 1
a1723 2
</pre>
</ul>
a1729 1
</p>
d1731 1
a1731 2
<ul>
<pre>
d1758 1
a1758 2
</pre>
</ul>
a1763 1
</p>
a1775 1
</p>
a1782 1
</p>
d1786 1
a1786 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=talkd&sektion=8">talkd(8)</a> 
a1788 1
</p>
d1790 1
a1801 1
</p>
d1803 1
a1818 1
</p>
d1821 3
a1823 3
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&sektion=1">cvs(1)</a>
es una herramienta muy &uacute;til que puede usar para obtener el
c&oacute;digo fuente que necesite por medio de los servidores
a1826 1
</p>
d1831 2
a1832 3
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&sektion=1">cvs(1)</a>,
debe hacer lo siguiente:
</p>
a1859 1
</p>
a1866 1
</p>
d1868 1
a1868 1
<ul><pre>
d1891 1
a1891 1
</pre></ul>
a1895 1
</p>
d1897 1
a1948 1
</p>
d1951 1
d1964 1
d1984 1
d2064 1
a2064 1
</p>
d2071 2
a2072 2
Originally [OpenBSD: faq10.html,v 1.75 2002/11/13 00:05:54 nick Exp ]<br>
$Translation: faq10.html,v 1.32 2002/11/13 10:54:44 horacio Exp $<br>
d2075 1
a2075 1
</p>
@


1.31
log
@
sync with badlands translation CVS
@
text
@d6 1
d61 1
d2055 5
a2059 5
<a href="../../es/plus.html">http://www.openbsd.org/es/plus.html</a>
para ver qu&eacute; parches se han aplicado a la rama de parches.  Si
los parches todav&iacute;a no han sido aplicados, tendr&aacute; que
obtener el c&oacute;digo fuente de la &uacute;ltima versi&oacute;n
usando la orden anterior.
d2153 105
d2271 2
a2272 2
Originally [OpenBSD: faq10.html,v 1.74 2002/11/01 15:27:13 nick Exp ]<br>
$Translation: faq10.html,v 1.31 2002/11/05 14:18:38 horacio Exp $<br>
@


1.30
log
@
sync with badlands translation CVS
@
text
@d1558 1
a1558 1
OpenBSD 3.1-current (GENERIC) #4: Wed May  8 09:36:35 EDT 2002
d1569 1
a1569 1
OpenBSD 3.1-current (GENERIC) #4: Wed May  8 09:36:35 EDT 2002
d1855 1
a1855 1
230- OpenBSD 3.1-current (GENERIC) #7: Sat May 11 23:22:52 EDT 2002
d2164 2
a2165 2
Originally [OpenBSD: faq10.html,v 1.73 2002/10/13 22:32:42 nick Exp ]<br>
$Translation: faq10.html,v 1.30 2002/10/17 06:35:38 horacio Exp $<br>
@


1.29
log
@
sync with badlands translation CVS
@
text
@d14 1
a14 1
<!-- máx. 72 caracteres por línea ... hasta 19% -->
d443 4
a446 5
Adem&aacute;s, tambi&eacute;n puede comprobar que el usuario
sea realmente el propietario de su propio fichero
<em>/var/mail</em>.  Por supuesto, esto deber&iacute;a ser
as&iacute; (por ejemplo, el propietario de
<em>/var/mail/joe</em> deber&iacute;a ser el usuario
d452 13
a464 15
Dejar <em>/var/mail</em> con permiso de escritura para el
grupo <em>mail</em> crea algunos problemas de seguridad.  Es
probable que nunca tenga problemas con eso...  &iexcl;pero
podr&iacute;a tenerlos!  (especialmente si su sitio es de alto
rendimiento, como un ISP, ...).  Hay varios servidores de POP
que se pueden instalar directamente desde la colecci&oacute;n
de portes.  Si es posible, es recomendable usar
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=popa3d&sektion=8">popa3d</a>,
que se encuentra en la instalaci&oacute;n base de OpenBSD.
O podr&iacute;a darse el caso que tuviera seleccionadas las
opciones err&oacute;neas para su d&aelig;mon 'pop' (como
&quot;<em>dot locking</em>&quot;).  O tambi&eacute;n es
posible que necesitara cambiar el directorio que bloquea
(aunque entonces, el bloqueo s&oacute;lo ser&iacute;a de valor
para el d&aelig;mon POP).
d468 3
a470 4
<strong>PD:</strong> N&oacute;tese que OpenBSD no tiene un
grupo con el nombre &quot;<em>mail</em>&quot;.  Debe ser
a&ntilde;adido en el fichero <em>/etc/group</em> con una
entrada como &eacute;sta:
d487 2
a488 2
<tt>/etc/hosts</tt> para la resoluci&oacute;n de nombres, sino
DNS.  Esto se puede cambiar a trav&eacute;s del fichero
d493 4
a496 4
Si quiere enviar requerimientos al fichero
<tt>/etc/hosts</tt> antes que a los servidores de DNS, debe
crear un fichero <tt>/etc/mail/service.switch</tt> que
contenga la siguiente l&iacute;nea:
d513 2
a514 2
Env&iacute;e a Sendmail una se&ntilde;al HUP mediante la
siguiente orden:
d529 2
a530 2
<h2>10.7 - C&oacute;mo se configura un servidor HTTP seguro
usando SSL(8)</h2>
d535 3
a537 3
<em>httpd</em> con SSL (<em>Secure Sockets Layer</em>, la capa
de conectores de seguridad) y las bibliotecas de RSA.  Antes
de poderlas usar con
d539 5
a543 6
debe crear un certificado.  Este certificado se
almacenar&aacute; en el directorio <tt>/etc/ssl/</tt> con la
clave correspondiente en <tt>/etc/ssl/private/</tt>.
Los pasos que mostraremos sobre la creaci&oacute;n del
certificado se han tomado en parte de la p&aacute;gina del
manual de
d546 4
a549 5
p&aacute;gina del manual.  La informaci&oacute;n incluida en
este documento se limita a explicar c&oacute;mo crear un
certificado RSA para servidores de <em>web</em>, no un
certifificado DSA para servidores.  Lea la p&aacute;gina del
manual de
d555 2
a556 2
Antes de empezar, necesita generar su clave de servidor y su
certificado usando OpenSSL:
d566 2
a567 3
O, si lo desea, puede cifrar la clave con una
contrase&ntilde;a que tendr&aacute; que introducir cuando
inicie los servidores:
d577 4
a580 4
El pr&oacute;ximo paso es generar un <em>&quot;Certificate
Signing Request&quot;</em> (requerimiento para firmar el
certificado), que se usa para que una Autoridad Certificadora
(CA) firme su certificado.  Para ello use la orden:
d590 3
a592 4
El fichero <em>server.csr</em> se puede entregar a la
Autoridad Certificadora que firmar&aacute; la clave.  Una de
estas CA es <strong>Thawte Certification</strong>, y la puede
localizar en
d594 2
a595 3
Actualmente Thawte puede firmar sus claves RSA.  Est&aacute;
en marcha un procedimiento para poder firmar tambi&eacute;n
las claves DSA.
d599 2
a600 2
Si no se lo puede permitir, o si quiere firmar Vd. mismo el
certificado, puede usar lo siguiente:
d611 2
a612 3
Con <em>/etc/ssl/server.crt</em> y
<em>/etc/ssl/private/server.key</em> en su sitio ya puede
iniciar
d615 2
a616 3
<a href="#rc">secci&oacute;n sobre rc(8)</a> en este
documento), permitiendo transacciones https con su
m&aacute;quina por el puerto 443.
d622 2
a623 2
<h2>10.8 - He hecho cambios a <em>/etc/passwd</em>, pero los
cambios no funcionan.  &iquest;Por qu&eacute;?</h2>
d627 3
a629 3
Si edita <em>/etc/passwd</em> directamente, cualquier cambio
que haga se perder&aacute;.  OpenBSD genera el fichero
<em>/etc/passwd</em> de forma din&aacute;mica con
d632 2
a633 2
<em>/etc/master.passwd</em>.  De acuerdo con la p&aacute;gina
del manual de pwd_mkdb(8):
d652 9
a660 11
contrase&ntilde;a cifrada del usuario, est&aacute; disponible
para cualquiera que pueda acceder al sistema (y es el primer
objetivo para programas como <code>crack</code>).  4.4BSD
introdujo el fichero <em>master.passwd</em>, que tiene un
formato extendido (con opciones adicionales que van m&aacute;s
all&aacute; de las ofrecidas por <em>/etc/passwd</em>), y
s&oacute;lo puede ser le&iacute;do por el superusuario
<em>root</em>.  Para un acceso m&aacute;s r&aacute;pido a los
datos, las llamadas de las bibliotecas que acceden a estos
datos leen los ficheros <em>/etc/pwd.db</em> y
<em>/etc/spwd.db</em>.
d668 7
a674 8
(nuestro editor preferido, definido por $EDITOR) para editar el
fichero <em>/etc/master.passwd</em>.  Una vez que ha terminado
de editar, vuelve a crear los ficheros <em>/etc/passwd</em>,
<em>/etc/pwd.db</em>, y <em>/etc/spwd.db</em> conforme con los
cambios que haya llevado a cabo.  <kbd>vipw</kbd>
tambi&eacute;n se encarga de bloquear estos ficheros, de modo
que si alguna otra persona intentara cambiarlos al mismo
tiempo, no le permitir&iacute;a el acceso.
d685 2
a686 2
OpenBSD dispone de dos &oacute;rdenes para a&ntilde;adir
usuarios en el sistema f&aacute;cilmente:
d695 2
a696 2
En OpenBSD, la manera m&aacute;s f&aacute;cil para
a&ntilde;adir un usuario es usando el gui&oacute;n
d698 3
a700 3
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&sektion=8">adduser(8)</a>.
Puede configurarlo para que funcione como mejor le convenga,
editando el fichero <em>/etc/adduser.conf</em>.  Puede
d702 9
a710 10
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&sektion=8">vipw(8)</a>,
pero adduser(8) es el modo en que se recomienda hacerlo.  La
orden adduser(8) permite llevar a cabo comprobaciones de
consistencia sobre los ficheros <em>/etc/passwd</em> y
<em>/etc/group</em>, y sobre las bases de datos del
int&eacute;rprete (<em>shell</em>).  Tambi&eacute;n
generar&aacute; las entradas correspondientes y directorios
$HOME.  Incluso puede enviar un mensaje de bienvenida al
usuario.  Todo esto se puede modificar seg&uacute;n se desee.
He aqu&iacute; un ejemplo de c&oacute;mo un usuario ficticio,
d712 3
a714 4
directorio $HOME se ubicar&aacute; en <em>/home/testuser</em>,
se le a&ntilde;adir&aacute; al grupo <strong>guest</strong>, y
se le dar&aacute; el int&eacute;rprete (<em>shell</em>)
<em>/bin/ksh</em>:
d757 2
a758 2
De esta forma se eliminar&aacute; todo vestigio de un usuario.
Se eliminar&aacute; cualquier entrada en
d760 4
a763 5
relacionada con el usuario, su directorio $HOME (siempre que
el propietario de &eacute;ste sea el usuario en
cuesti&oacute;n), y su correo.  Tambi&eacute;n se
eliminar&aacute;n sus entradas en los ficheros
<em>/etc/passwd</em> y <em>/etc/group</em>.
d767 4
a770 5
A continuaci&oacute;n sigue un ejemplo sobre c&oacute;mo
eliminar el usuario que se ha a&ntilde;adido en el ejemplo
anterior.  Ver&aacute; que preguntar&aacute; por el nombre, y
si debe o no eliminar el directorio ra&iacute;z ($HOME) del
usuario.
d795 2
a796 2
que facilita el uso de &eacute;stas por medio de un
gui&oacute;n de ejecuci&oacute;n (<em>script</em>).
d816 7
a822 8
Dado que user(8) no es interactivo, la forma m&aacute;s
f&aacute;cil para a&ntilde;adir usuarios de modo eficiente es
usar la orden adduser(8).  La orden <kbd>/usr/sbin/user</kbd>
es simplemente una interfaz para el resto de &oacute;rdenes
<kbd>/usr/sbin/user*</kbd>.  Por lo tanto, las siguientes
&oacute;rdenes pueden ser adheridas usando <kbd>user add</kbd>
o <kbd>useradd</kbd>;  el modo en que lo haga s&oacute;lo
depende de su elecci&oacute;n, y no altera en absoluto la
d827 7
a833 8
En este ejemplo estamos a&ntilde;adiendo el mismo usuario con
las mismas especificaciones que usamos para el nuevo usuario
de los <a href="#adduser">ejemplos anteriores</a>.  La orden
useradd(8) es m&aacute;s f&aacute;cil de usar si se sabe la
configuraci&oacute;n predeterminada antes de crear el usuario.
Estas configuraciones se encuentran en el fichero
<em>/etc/usermgmt.conf</em>, y se pueden ver del siguiente
modo:
d850 9
a858 10
Las configuraciones de arriba son las que se activar&aacute;n
de modo predeterminado a menos que se especifiquen otras
mediante opciones en la l&iacute;nea de &oacute;rdenes.  Por
ejemplo, en nuestro caso, queremos que el usuario pertenezca
al grupo <strong>guest</strong>, no al grupo
<strong>users</strong>.  Un peque&ntilde;o obst&aacute;culo
m&aacute;s al crear usuarios, es que las contrase&ntilde;as se
deben especificar desde la l&iacute;nea de &oacute;rdenes.
Las contrase&ntilde;as est&aacute;n cifradas, as&iacute; que
ser&aacute; necesario usar la utilidad
d860 2
a861 2
para crearla.  OpenBSD usa, de modo predeterminado, 6 veces el
algoritmo Blowfish para crear la contrase&ntilde;a.
d865 2
a866 2
He aqu&iacute; una l&iacute;nea que muestra c&oacute;mo crear
una contrase&ntilde;a para espicificarla en useradd(8).
d877 2
a878 2
Ahora que ya tenemos nuestra contrase&ntilde;a cifrada,
estamos preparados para a&ntilde;adirla al usuario:
d889 9
a897 10
<strong>Nota:</strong>  Aseg&uacute;rese de usar comillas
simples (<strong>'</strong>) a ambos lados de la cadena de la
contrase&ntilde;a, y no comillas dobles
(<strong>&quot;</strong>) ya que &eacute;stas ser&iacute;an
interpretadas por el int&eacute;rprete de &oacute;rdenes
(<em>shell</em>) antes de enviar la cadena a user(8).
Adem&aacute;s de eso, aseg&uacute;rese de especificar la
opci&oacute;n <strong>-m</strong> si quiere que el directorio
ra&iacute;z del usuario sea creado y que los ficheros de
<em>/etc/skel</em> se copien a este directorio.
d901 4
a904 5
Para verificar que se ha creado el usuario correctamente
podemos usar muchas utilidades diferentes.  A
continuaci&oacute;n hay unas cuantas &oacute;rdenes que puede
usar para verificar r&aacute;pidamente que todo ha sido creado
correctamente.
d927 2
a928 3
Aparte de estas &oacute;rdenes, user(8) dispone de,
userinfo(8), su propia utilidad para mostrar las
caracter&iacute;sticas del usuario.
d950 4
a953 4
Para eliminar usuarios con la jerarqu&iacute;a de
&oacute;rdenes user(8), se debe usar userdel(8).  &Eacute;sta
es una orden muy simple, pero muy &uacute;til.  Para eliminar
el usuario creado en el ejemplo anterior, basta con ejecutar
d964 5
a968 6
especificar si se desea que el directorio ra&iacute;z del
usuario sea tambi&eacute;n eliminado.  De forma alternativa
puede especificar <strong>-p</strong> y no
<strong>-r</strong>, y as&iacute; se bloquear&aacute; la
cuenta del usuario pero no se eliminar&aacute; ninguna
informaci&oacute;n.
d983 2
a984 2
<em>/usr/bin/false</em>, &eacute;ste no podr&aacute; ingresar
de forma interactiva pero podr&aacute; usar ftp.
d987 7
a993 7
definici&oacute;n, <em>/home/&lt;usuario&gt;</em>.
Si le parece bien de esta forma, no necesita cambiarlo;  sin embargo,
puede configurarlo a cualquier otro directorio que Vd. desee.  Puede
forzar que el usuario s&oacute;lo pueda ver los ficheros en su
directorio $HOME, a&ntilde;adiendo su nombre de usuario al fichero
<em>/etc/ftpchroot</em>.  Mediante el uso de la opci&oacute;n <strong>-A</strong>
para 
d995 2
a996 2
puede restringir los ingresos (<em>login</em>) para que s&oacute;lo
sean posibles por ftpchroot.
d1006 4
a1009 4
Las cuotas se usan para limitar el espacio del que disponen los
usuarios en sus discos.  Puede ser muy &uacute;til en situaciones en
las que Vd. disponga de recursos limitados.  Las cuotas se pueden
configurar de dos maneras diferentes:
d1024 8
a1031 8
Despu&eacute;s necesita marcar los sistemas de archivo para los que
vaya a configurar las cuotas en <em>/etc/fstab</em>.  Debe usar las
palabras clave <code>userquota</code> y <code>groupquota</code> para
marcar cada sistema de archivo en el que usará las cuotas.  Por
definici&oacute;n, los ficheros <code>quota.user</code> y
<code>quota.group</code> se crear&aacute;n en la ra&iacute;z de ese
sistema de archivo que tendr&aacute; la informaci&oacute;n sobre las
cuotas.  Esto se puede anular con la siguiente orden:
d1045 2
a1046 2
Ahora ya puede configurar las cuotas de usuario.
Para ello use la utilidad
d1049 2
a1050 3
La orden edquota(8) usar&acute; vi(1) para editar las cuotas a menos
que la variable de entorno EDITOR indique un editor diferente.
Por ejemplo:
d1088 2
a1089 2
uso del disco por debajo de su l&iacute;mite.  Los periodos de gracia
se pueden configurar usando la opci&oacute;n <strong>-t</strong> con la
d1115 3
a1117 3
la informaci&oacute;n sobre el usuario que especifique.  Al ser
invocada sin argumentos, la orden quota(8) le dar&aacute; sus
estad&iacute;sticas de cuotas.  Por ejemplo:
d1152 2
a1153 2
<h2>10.12 - C&oacute;mo se configuran los clientes y
servidores KerberosIV en OpenBSD</h2>
d1198 4
a1201 2
<li><a href="http://web.mit.edu/kerberos/www/dialogue.html">Designing an Authentication System: a Dialogue in Four Scenes</a></li>
<li><a href="http://web.mit.edu/kerberos/www/papers.html#krb4">Papers and Documentation Describing KerberosIV</a></li>
d1248 2
a1249 2
krb.realms provee una traducci&oacute;n del nombre del hu&eacute;sped
al nombre del campo de acci&oacute;n de Kerberos para los servicios
d1254 3
a1256 3
en el campo de acci&oacute;n CIARASYSTEMS.COM, y .ciarasystems.com es
el nombre del dominio en el campo de acci&oacute;n CIARASYSTEMS.COM.
Para m&aacute;s informaci&oacute;n lea la p&aacute;gina de manual de
d1302 2
a1303 2
A continuaci&oacute;n necesitaremos a&ntilde;adir a la base de datos
dos entradas &quot;principal&quot; por cada uno de los sistemas que
d1368 4
a1371 5
deben extraerse de la base de datos del centro de distribuci&oacute;n
de claves de Kerberos para que los servicions autentiquen usando
Kerberos.  Por cada uno de los nombres de hu&eacute;sped
(&quot;hostname&quot;) especificados en la l&iacute;nea de
&oacute;rdenes,
d1469 4
a1472 4
simple.  Generalmente se configuran servidores redundantes (y
servidores esclavos) para que si un servidor cayera, todos los
servicios que dependen de Kerberos se mantuvieran.  Tambi&eacute;n
podemos a&ntilde;adir privilegios de 'su' a un &quot;principal&quot;
d1508 2
a1509 2
Eso ha sido la configuraci&oacute;n, ahora necesitamos iniciar
kerberos.  Para obtener un ticket usaremos
d1598 3
a1600 3
para pases tgt, s&oacute;lo la implementaci&oacute;n de krb4 de
kaserver AFS, ya que KerberosIV normal comprueba con kdc las
direcciones IP de los clientes en la lista del ticket.
d1606 1
a1606 2
<h2>10.13 - Configuraci&oacute;n de servicios de FTP
An&oacute;nimo</h2>
d1622 6
a1627 6
Esta cuenta no debe tener una contrase&ntilde;a utilizable.
Aqu&iacute; configuraremos el directorio de ingreso como
<em>/home/ftp</em>, pero puede ponerlos donde quiera.  Cuando use ftp
an&oacute;nimo, el d&aelig;mon de ftp ejecutar&aacute; chroot sobre
s&iacute; mismo para cambiar la directorio del usuario de ftp.  Puede
leer m&aacute;s sobre esto en las p&aacute;ginas de manual de
d1643 2
a1644 3
Tambi&eacute;n, si quiere que esa shell se muestre durante las
preguntas de la orden adduser, necesita modificar
<em>/etc/adduser.conf</em>.
d1695 2
a1696 2
<strong>No</strong> necesita crear un directorio <em>/home/ftp/usr</em> o
<em>/home/ftp/bin</em>.<br>
d1698 2
a1699 2
<li><em>/home/ftp</em> - Es el directorio principal.  Su propietario debe
    ser root, y los permisos deben ser 555.</li>
d1701 9
a1709 10
    ya que s&oacute;lo sirve para dar informaci&oacute;n sobre los
    usuarios existentes en un sistema.  Si quiere que parezca que su
    directorio de ftp an&oacute;nimo contiene usuarios reales adjuntos
    a sus ficheros, deber&iacute;a copiar <em>/etc/pwd.db</em> y
    <em>/etc/group</em> a este directorio.  Este directorio
    deber&iacute;a ser de modo 511, y los dos ficheros de modo 444.
    &Eacute;stos se usan para dar al propietario nombres en lugar de
    n&uacute;meros.  No existen contrase&ntilde;as almacenadas en
    <em>pwd.db</em>, ya que est&aacute;n todas en <em>spwd.db</em>,
    as&iacute; que no las copie ah&iacute;.</li>
d1711 2
a1712 2
    para ubicar los ficheros que quiera compartir.  Este directorio
    tambi&eacute;n debert&iacute; ser de modo 555.
d1795 3
a1797 3
de ftpd de <em>inetd.conf</em> e iniciar ftpd desde <em>rc.conf</em> junto
con la opci&oacute;n <em>-D</em>.  De este modo iniciar&aacute;n ftpd
como un d&aelig;mon, y ser&aacute; m&aacute;s simple que iniciarlo
d1809 3
a1811 3
Esto s&oacute;lo funcionar&aacute; si se ha desactivado ftpd
en <em>/etc/inetd.conf</em> y se ha forzado a inetd a leer su
fichero de configuraci&oacute;n.
d1819 1
a1819 1
       ver&aacute;n al conectar con su servidor ftp.</li>
d1821 1
a1821 1
       despu&eacute;s de haber ingresado en su servidor ftp.</li>
d1823 2
a1824 2
       directorio, y cuando alguien entre en ese directorio,
       ver&aacute; el mensaje que contiene.</li>
d1831 2
a1832 2
<h2>10.14 - C&oacute;mo se confinan a los usuarios a sus
directorios de usuario (&quot;home&quot;) en ftpd(8)</h2>
d1916 3
a1918 3
escape de su propio directorio.  Como puede ver en el siguiente
ejemplo, el directorio <em>/</em> ha cambiado de repente a su directorio
de usuario.
d1967 2
a1968 2
aplicar a las diferentes arquitecturas, o a parches independientes de
la arquitectura.
d1992 5
a1996 5
son parches que se aplican directamente al &aacute;rbol de fuentes de
la versi&oacute;n oficial m&aacute;s reciente.  Los parches que se
aplican al &aacute;rbol de CVS m&aacute;s reciente tambi&eacute;n
incluyen otros cambios que no son deseables en un sistema con la
versi&oacute;n oficial.
d1999 2
a2000 2
<h3>Preparaci&oacute;n del sistema para la aplicaci&oacute;n
de parches</h3>
d2007 7
a2013 8
decir que para aplicar un parche al sistema, antes es necesario
disponer del c&oacute;digo fuente de la versi&oacute;n final
(<em>-release</em>) de OpenBSD.  Esto no significa que debe
disponer de TODO el c&oacute;digo fuente del sistema operativo, sino
que debe tener todo el c&oacute;digo para el programa al que vaya a
aplicar el parche.  Por ejemplo, si va a aplicar un parche al
n&uacute;cleo del sistema, debe tener a mano todo el c&oacute;digo
fuente para el n&uacute;cleo.
d2026 2
a2027 2
Para obtener obtener el c&oacute;digo fuente de la versi&oacute;n
2.7 usando
d2044 9
a2052 9
puede verlo en la l&iacute;nea <em>Index:</em> del parche.  En este
caso el camino en el CVS era <em>src/libexec/talkd/</em>.  Compruebe
siempre el n&uacute;mero de revisi&oacute;n de
OPENBSD_version_number_BASE.  Sin &quot;_BASE&quot; obtendr&aacute; el
c&oacute;digo de la rama estable, y &eacute;sta puede contener otros
cambios que sin duda interferir&aacute;n.  Si ya est&aacute; siguiendo
la rama de parches, los parches ya deber&iacute;an estar en ese
c&oacute;digo fuente, pero por si acaso deber&iacute;a comprobarlo y
asegurarse.  Siempre puede mirar en
d2165 1
a2165 1
$Translation: faq10.html,v 1.29 2002/10/14 11:42:35 horacio Exp $<br>
@


1.28
log
@
sync with badlands translation CVS
@
text
@d14 1
d23 29
a51 33
<ul><h3>Tabla de contenidos</h3>
<li><a href="#wheel">10.1 - Cuando un usuario intenta
convertirse en el superusuario <em>root</em> con
<kbd>su(1)</kbd>, le dice que est&aacute; en el grupo
err&oacute;neo.</a>
(&quot;wrong group&quot;).</li>
<li><a href="#DupFS">10.2 - &iquest;C&oacute;mo puedo duplicar
un sistema de archivos?</a></li>
<li><a href="#rc">10.3 - &iquest;C&oacute;mo inicio los
d&aelig;mons con el sistema?</a>
( <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&apropos=0&sektion=8&manpath=OpenBSD+Current&format=html">rc(8)</a> ).</li>
<li><a href="#RelayingDenied">10.4 - &iquest;Por qu&eacute;
cuando los usuarios env&iacute;an correo a trav&eacute;s de mi
sistema OpenBSD se les niega el acceso de reenv&iacute;o?</a>
(&quot;relaying access denied&quot;).</li>
<li><a href="#POP">10.5 - He configurado POP, pero obtengo
errores cuando accedo a mi correo a trav&eacute;s de POP.
&iquest;Qu&eacute; puedo hacer?</a></li>
<li><a href="#SendmailDNS">10.6 - &iquest;Por qu&eacute;
ignora Sendmail el fichero <tt>/etc/hosts</tt>?</a></li>
<li><a href="#HTTPS">10.7 - C&oacute;mo se configura un
servidor HTTP seguro usando SSL(8).</a></li>
<li><a href="#vipw">10.8 - He hecho cambios a /etc/passwd con
vi(1), pero los cambios no funcionan.  &iquest;Por
qu&eacute;?</a></li>
<li><a href="#AddDelUser">10.9 - &iquest;C&oacute;mo
a&ntilde;ado un usuario?  &iquest;C&oacute;mo elimino un
usuario?</a></li>
<li><a href="#FTPOnly">10.10 - &iquest;C&oacute;mo puedo crear
una cuenta s&oacute;lo FTP?</a></li>
<li><a href="#Quotas">10.11 - C&oacute;mo configurar cuotas
para limitar el uso del disco a los usuarios.</a> 
( <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=quota&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html">quota(1)</a> ).</li>
d53 7
a59 8
cliente/servidor Kerberos.</a></li>
<li><a href="#AnonFTP">10.13 - C&oacute;mo se configura un
servidor de FTP an&oacute;nimo.</a></li>
<li><a href="#ftpchroot">10.14 - C&oacute;mo puedo confinar a
los usuarios a sus directorios de usuario (<em>/home</em>) en
ftpd(8).</a>
<li><a href="#Patches">10.15 - C&oacute;mo se aplican los
parches en OpenBSD.</a>
d69 3
a71 3
<h2>10.1 - &iquest;Por qu&eacute; me dice que estoy en el
grupo err&oacute;neo cuando intento ingresar como usuario
<em>root</em> con <kbd>su(1)</kbd>?</h2>
d75 5
a79 6
Para que un usuario normal se pueda convertir en el
superusuario <em>root</em>, debe a&ntilde;adirlo al grupo
<kbd>wheel</kbd> a mano.  Esto se hace por motivos de
seguridad, y se recomienda tener cuidado con los usuarios a
los que se otorgue este acceso especial.  En OpenBSD, los
usuarios que pertenezcan al grupo <kbd>wheel</kbd>
d81 16
a96 17
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=su&apropos=0&sektion=1&format=html">su(1)</a>
en modo usuario (<em>userland program</em>) para convertirse
en el usuario <em>root</em>.  Los usuarios que no pertenezcan
al grupo <kbd>wheel</kbd> no podr&aacute;n usar su(1).  A
continuaci&oacute;n puede ver el ejemplo de una entrada en el
fichero <em>/etc/group</em> para asociar al usuario
<strong>ericj</strong> al grupo <kbd>wheel</kbd>.

<p>
Si va a crear un usuario nuevo con
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&apropos=0&sektion=8&format=html">adduser(8)</a>,
puede asociarlo al grupo <kbd>wheel</kbd> desde el punto
<tt>Invite <em>user</em> into other groups:</tt>, simplemente
contestando <kbd>wheel</kbd>.  De este modo se
a&ntilde;adir&aacute; al usuario a la l&iacute;nea del grupo
<kbd>wheel</kbd>, en el fichero <em>/etc/group</em>, que
quedar&aacute; del siguiente modo:
d106 4
a109 4
Si lo que busca un modo de permitir a los usuarios acceso
limitado a los privilegios del superusuario, sin tener que
asociarlos al grupo <kbd>wheel</kbd>, use
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&sektion=8&format=html">sudo(8)</a>.
d120 5
a124 5
Para duplicar su sistema de archivos use
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&sektion=8&format=html">dump(8)</a> y
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&sektion=8&format=html">restore(8)</a>.
Por ejemplo, para duplicar todo el directorio <kbd>SRC</kbd>
al directorio <kbd>DST</kbd>, haga lo siguiente:
d134 7
a140 8
<kbd>dump</kbd> est&aacute; dise&ntilde;ado para ofrecer una
gran variedad de posibilidades para copias de
respaldo/seguridad, y puede resultar excesivo si s&oacute;lo
quiere duplicar un &uacute;nico sistema de archivos o parte de
&eacute;l.  La orden
<a href"http://www.openbsd.org/cgi-bin/man.cgi?query=tar&sektion=1&format=html">tar(1)</a>
puede resultar m&aacute;s r&aacute;pida para una
operaci&oacute;n de este tipo.  El formato es muy parecido:
d153 1
a153 1
( <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&sektion=8&format=html">rc(8)</a> )</h2>
d158 2
a159 3
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&sektion=8&format=html">rc(8)</a>,
para lo que necesita unos cuantos ficheros claves para
iniciar.
d163 24
a186 20
   <li>/etc/rc - Gui&oacute;n (<em>&quot;script&quot;</em>)
   principal.  No se debe editar.
   <li>/etc/rc.conf - Fichero de configuraci&oacute;n usado
   por <em>/etc/rc</em> para saber qu&eacute; d&aelig;mons
   deben iniciarse con el sistema.
   <li>/etc/netstart - Gui&oacute;n usado para iniciar la red.
   No se debe editar.
   <li>/etc/rc.local - Gui&oacute;n usado para tareas de
   administraci&oacute;n local.  Aqu&iacute; se debe almacenar
   informaci&oacute;n espec&iacute;fica de la m&aacute;quina
   anfitriona o de los d&aelig;mons.
   <li>/etc/rc.securelevel - Gui&oacute;n para ejecutar las
   &oacute;rdenes que deben ser invocadas antes de los cambios
   en el nivel de seguridad.  V&eacute;ase
   <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=init&sektion=8&format=html">init(8)</a>.
   <li>/etc/rc.shutdown - Gui&oacute;n invocado por 
   <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=shutdown&sektion=8&apropos=0&manpath=OpenBSD+Current&format=html">shutdown(8)</a>.
   A&ntilde;ada en este fichero cualquier cosa que quiera
   hacer antes de cerrar el sistema.  V&eacute;ase
   <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.shutdown&sektion=8&format=html">rc.shutdown(8)</a>.
d192 3
a194 3
Los ficheros m&aacute;s importantes para un administrador de
sitemas son <em>/etc/rc.conf</em>, <em>/etc/rc.local</em> y
<em>/etc/rc.shutdown</em>.  Para que se pueda hacer una idea
d196 2
a197 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&sektion=8">rc(8)</a>, mire este flujo:
d200 14
a213 14
<ul>Despu&eacute;s de arrancar el n&uacute;cleo del sistema,
se inicia <em>/etc/rc</em>.
   <li>Se comprueban los sistemas de archivos
   (<em>&quot;filesystems&quot;</em>).  Este paso se
   omitir&aacute; en caso de que exista el fichero
   <em>/etc/fastboot</em>, pero no es conveniente hacerlo de
   este modo.
   <li>Se leen las variables de configuraci&oacute;n de
   <em>/etc/rc.conf</em>.
   <li>Se montan los sistemas de archivos.
   <li>Se limpia el sistema de archivos <em>/tmp</em> y se
   conserva cualquier fichero creado por el editor.
   <li>Se configura la red por medio de
   <em>/etc/netstart</em>:
d215 2
a216 3
      <li>Se configuran las interfaces.
      <li>Se configuran &quot;hostname&quot;,
      &quot;domainname&quot;, etc.
d218 14
a231 16
   <li>Se inician los &quot;d&aelig;mons&quot;.
   <li>Se llevan a cabo varias comprobaciones
   (&quot;quota&quot;, &quot;savecore&quot;, etc...).
   <li>Se invocan y ejecutan los &quot;d&aelig;mons&quot;
   locales, como en <em>/etc/rc.local</em>.
</ul>

<h3>Inicio de los d&aelig;mons y servicios predefinidos en
OpenBSD</h3>

<p>
La mayor&iacute;a de d&aelig;mons y servicios que vienen
predefinidos en OpenBSD pueden iniciarse durante el arranque,
editando el fichero de configuraci&oacute;n
<em>/etc/rc.conf</em>.  Un ejemplo lo puede encontrar en el
fichero
d233 2
a234 3
que viene incluido con el sistema, en donde ver&aacute;
l&iacute;neas parecidas a la siguiente:

d244 14
a257 16
Una l&iacute;nea como &eacute;sta nos indica que ftpd no se
inicia con el sistema (al menos no mediante
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&apropos=0&sektion=8&manpath=OpenBSD+Current&format=html">rc(8)</a>;
lea la <a href="#AnonFTP">secci&oacute;n sobre FTP
An&oacute;nimo</a> para m&aacute;s informaci&oacute;n al
respecto).  En cualquier caso, cada l&iacute;nea va
acompa&ntilde;ada por un comentario que le mostrar&aacute; los
indicadores para el uso <strong>NORMAL</strong> de ese
d&aelig;mon o servicio.  Esto no significa que debe invocar el
d&aelig;mon o servicio en cuesti&oacute;n con esos
indicadores.  Siempre se puede usar la documentaci&oacute;n de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=man&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html">man(1)</a>
(las p&aacute;ginas del manual) para ver c&oacute;mo se puede
iniciar de cualquier otro modo que se prefiera ese d&aelig;mon
o servicio.  Por ejemplo, vea la l&iacute;nea predefinida para
la entrada de
d268 3
a270 4
Aqu&iacute; puede verse con claridad que no es necesario
ning&uacute;n indicador para iniciar httpd.  Por lo tanto,
s&oacute;lo ser&aacute; necesaria una l&iacute;nea como la
siguiente:
d278 3
a280 3
Pero para iniciar httpd con ssl (v&eacute;ase la <a
href="#HTTPS">secci&oacute;n sobre SSL</a> o la p&aacute;gina
del manual de
d282 1
a282 1
necesitar&aacute; una l&iacute;nea como &eacute;sta:
d291 8
d302 5
a306 6
Para instalar otros d&aelig;mons en el sistema, por medio de
los portes o cualquier otro medio, debe usar el fichero
<em>/etc/rc.local</em>.  Por ejemplo, supongamos que se ha
instalado un d&aelig;mon que se encuentra en
<em>/usr/local/sbin/daemonx</em>, y que se desea iniciar
durante el arranque del sistema.  Para ello pondr&iacute;a una
d319 4
a322 5
Desde este momento, el d&aelig;mon ser&aacute; invocado
durante el arranque.  Tambi&eacute;n podr&aacute; ver
cualquier error durante el arranque;  un arranque normal sin
errores s&oacute;lo mostrar&iacute;a una l&iacute;nea como
&eacute;sta:
d334 5
a338 5
<em>/etc/rc.shutdown</em> es un gui&oacute;n (<em>script</em>)
que se invoca al cerrar el sistema.  Cualquier cosa que quiera
hacer antes de que se cierre el sistema la debe a&ntilde;adir
a este fichero.  Si tiene apm tambi&eacute;n puede configurar
&quot;powerdown=YES&quot;, que le dar&aacute; un resultado
d346 3
a348 3
<h2>10.4 - &iquest;Por qu&eacute; cuando los usuarios
env&iacute;an correo a trav&eacute;s de mi sistema OpenBSD se
les niega el acceso de reenv&iacute;o?</h2>
d352 1
a352 1
Pruebe lo siguiente:
d360 1
a360 1
La salida ser&aacute; parecida a &eacute;sta:
d368 3
a370 3
Si este fichero no existe, debe crearlo.  Necesitar&aacute;
introducir los hu&eacute;spedes que est&eacute;n enviando
correo remoto;  para ello utilice la siguiente sintaxis:
d386 3
a388 3
No olvide enviar una se&ntilde;al 'HangUP' a sendmail (una
se&ntilde;al que hace que la mayor&iacute;a de d&aelig;mons
vuelvan a leer sus ficheros de configuraci&oacute;n):
d390 1
d411 2
a412 3
<h2>10.5 - He configurado POP, pero obtengo errores cuando
accedo a mi correo a trav&eacute;s de POP.  &iquest;Qu&eacute;
puedo hacer?</h2>
d416 3
a418 4
La mayor&iacute;a de problemas relacionados con POP tienen que
ver con ficheros temporales y ficheros de bloqueo.  Si su
servidor pop env&iacute;a un mensaje de error como el
siguiente,
d428 1
a428 1
intente configurar sus permisos del siguiente modo:
d457 5
a461 2
rendimiento, como un ISP, ...) Pruebe a invocar 'cucipop' u
otro d&aelig;mon de la colecci&oacute;n de portes de OpenBSD.
d472 3
a474 3
grupo con el nombre &quot;<em>mail</em>&quot;.  Debe crearlo
en su fichero <em>/etc/group</em> con una entrada como
&eacute;sta:
d544 2
a545 1
almacenar&aacute; en el directorio <tt>/etc/ssl/private/</tt>.
d562 1
a562 3
certificado.  Para poder usar las caracter&iacute;sticas de
RSA, antes debe actualizar <em>libssl</em>.  Despu&eacute;s de
ello ya puede generar su clave usando OpenSSL:
d623 5
a627 3
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&sektion=8&format=html">httpd(8)</a>
con el indicador <strong>-DSSL</strong>, permitiendo
transacciones https con su m&aacute;quina por el puerto 443.
d638 2
a639 2
Si edita <em>/etc/passwd</em>, cualquier cambio que haga se
perder&aacute;.  OpenBSD genera el fichero
d641 1
a641 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pwd_mkdb&sektion=8&apropos=0">pwd_mkdb(8)</a>.
d712 1
a712 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&sektion=8&format=html">adduser(8)</a>.
d716 1
a716 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&sektion=8&format=html">vipw(8)</a>,
d1006 4
a1009 5
<strong>/etc/shells</strong>.  As&iacute;, cuando cree el usuario,
configure su &laquo;int&eacute;rprete de &oacute;rdenes&raquo;
(<em>&quot;shell&quot;</em>) como <em>/usr/bin/false</em> y de este
modo no podr&aacute; ingresar de forma interactiva, pero podr&aacute;
usar ftp.
d1179 1
a1179 1
servidores Kerberos en OpenBSD</h2>
d1837 3
a1839 2
Esto s&oacute;lo funcionar&aacute; si ha desactivado ftpd en
<em>/etc/inetd.conf</em>.
d2193 2
a2194 2
Originally [OpenBSD: faq10.html,v 1.72 2002/07/12 02:51:35 nick Exp ]<br>
$Translation: faq10.html,v 1.28 2002/07/14 07:03:30 horacio Exp $<br>
@


1.27
log
@
sync with badlands translation CVS
@
text
@d2194 2
a2195 2
Originally [OpenBSD: faq10.html,v 1.71 2002/07/04 01:28:45 nick Exp ]<br>
$Translation: faq10.html,v 1.27 2002/07/05 02:08:27 horacio Exp $<br>
@


1.26
log
@
sync with badlands translation CVS
@
text
@d1250 1
a1250 1
[root@@avalanche kerberosIV] <strong>cat krb.conf</strong>
d1267 1
a1267 1
[root@@avalanche kerberosIV] <strong>cat krb.realms</strong>
d1294 1
a1294 1
[root@@avalanche kerberosIV] <strong>kdb_init</strong>
d1315 1
a1315 1
[root@@avalanche kerberosIV] <strong>kstash</strong>
d1407 1
a1407 1
[root@@avalanche kerberosIV] <strong>ext_srvtab avalanche</strong>
d1416 2
a1417 2
[root@@avalanche kerberosIV] <strong>mv avalanche-new-srvtab srvtab</strong>
[root@@avalanche kerberosIV] <strong>chmod 600 srvtab</strong>
d1427 1
a1427 1
[root@@avalanche kerberosIV] <strong>kdb_edit</strong>
d1487 3
a1489 3
[root@@avalanche /] <strong>kill -HUP `cat /var/run/inetd.pid`</strong>
[root@@avalanche /] <strong>/usr/libexec/kerberos &gt;&gt; /var/log/kerberos.log &amp;</strong>
[root@@avalanche /] <strong>/usr/libexec/kadmind -n &gt;&gt; /var/log/kadmind.log &amp;</strong>
d1524 1
a1524 1
[root@@gatekeeper kerberosIV] <strong>cat krb.conf</strong>
d1528 1
a1528 1
[root@@gatekeeper kerberosIV] <strong>cat krb.realms</strong>
d1542 1
a1542 1
xyz:jeremie% <strong>kinit</strong>
d1558 1
a1558 1
xyz:jeremie$ <strong>klist</strong>
d1576 1
a1576 1
xyz:jeremie% <strong>telnet avalanche</strong>
d1593 1
a1593 1
xyz:jeremie% <strong>rlogin avalanche</strong>
d1610 1
a1610 1
xyz:jeremie% <strong>kdestroy</strong>
d1612 1
a1612 1
xyz:jeremie% <strong>rlogin avalanche</strong>
d1678 2
a1679 2
oshibana# <strong>adduser</strong>
Use option ``-silent'' if you don't want see all warnings &amp; questions.
d1753 1
a1753 1
oshibana# pwd 
d1755 1
a1755 1
oshibana# ls -laR ftp
d2194 2
a2195 2
Originally [OpenBSD: faq10.html,v 1.68 2002/06/15 09:25:31 jufi Exp ]<br>
$Translation: faq10.html,v 1.26 2002/06/17 21:32:39 horacio Exp $<br>
@


1.25
log
@
sync with badlands translation CVS
@
text
@d2064 1
a2064 1
$ <strong>cvs -danoncvs@@anoncvs5.usa.openbsd.org:/cvs co -rOPENBSD_3_0_BASE src/libexec/talkd/</strong>
d2194 2
a2195 2
Originally [OpenBSD: faq10.html,v 1.67 2002/05/20 01:04:48 nick Exp ]<br>
$Translation: faq10.html,v 1.25 2002/05/21 15:32:23 horacio Exp $<br>
@


1.24
log
@
sync with badlands translation CVS
@
text
@d540 10
a549 14
Desde la versi&oacute;n 2.8, OpenBSD incluye httpd y RSA
preparados para las bibliotecas SSL.  Sin embargo, si
est&aacute; usando OpenBSD 2.6 &oacute; 2.7, debe instalar Vd
mismo los paquetes de SSL para que usen SSL.  Para m&aacute;s
informaci&oacute;n, <strong>man 8 ssl</strong>.
</p>

<p>
Para usarlas con
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&sektion=8&format=html">httpd(8)</a>,
antes debe haber generado un certificado que se
guardar&aacute; en <em>/etc/ssl/private/</em>.  Los pasos que
aqu&iacute; se muestran est&aacute;n tomados, en parte, de la
p&aacute;gina del manual de
d551 5
a555 5
Para m&aacute;s informaci&oacute;n, lea esta p&aacute;gina.
En estas preguntas frecuentes tan s&oacute;lo se explica
c&oacute;mo generar un certificado RSA para servidores de
<em>web</em>, no un certificado DSA para servidores.  Si desea
saber c&oacute;mo hacerlo, por favor lea la p&aacute;gina del
d557 2
a558 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssl&sektion=8&format=html">ssl(8)</a>.
d700 2
a701 6
En OpenBSD 2.6, los usuarios dipon&iacute;an de la orden
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&sektion=8&format=html">adduser(8)</a>
para a&ntilde;adir usuarios.  A partir de OpenBSD 2.7, se
a&ntilde;adi&oacute; la orden
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=user&sektion=8&format=html">user(8)</a>
para a&ntilde;adir y eliminar tanto usuarios como grupos.
d710 3
a712 2
En OpenBSD, la mejor manera para a&ntilde;adir un usuario es
usando el gui&oacute;n (<em>script</em>)
d812 1
a812 4
A partir de la versi&oacute;n 2.7 de OpenBSD, se
a&ntilde;adieron muchas &oacute;rdenes para gestionar usuarios
y grupos.  Estas herramientas son menos interactivas que la
orden
d814 2
a815 2
que ayuda a facilitar el uso de &eacute;stas en un
gui&oacute;n (<em>script</em>).
d1585 1
a1585 1
OpenBSD 2.5 (AVALANCHE) #5: Tue Apr  6 01:18:16 EDT 1999
d1596 1
a1596 1
OpenBSD 2.5 (AVALANCHE) #5: Tue Apr  6 01:18:16 EDT 1999
d1884 1
a1884 1
230- OpenBSD 2.6 (GENERIC) #690: Fri Oct 29 16:32:17 MDT 1999
d1935 1
a1935 1
#       $OpenBSD: faq10.html,v 1.63 2002/01/27 22:44:34 nick Exp $
d2194 2
a2195 2
Originally [OpenBSD: faq10.html,v 1.66 2002/05/11 01:00:40 nick Exp ]<br>
$Translation: faq10.html,v 1.24 2002/05/14 13:48:23 horacio Exp $<br>
@


1.23
log
@
sync with badlands translation CVS
@
text
@d40 3
a42 1
<li><a href="#HTTPS">10.6 - C&oacute;mo se configura un
d44 1
a44 1
<li><a href="#vipw">10.7 - He hecho cambios a /etc/passwd con
d47 1
a47 1
<li><a href="#AddDelUser">10.8 - &iquest;C&oacute;mo
d50 1
a50 1
<li><a href="#FTPOnly">10.9 - &iquest;C&oacute;mo puedo crear
d52 1
a52 1
<li><a href="#Quotas">10.10 - C&oacute;mo configurar cuotas
d55 1
a55 1
<li><a href="#Kerberos">10.11 - C&oacute;mo se configura un
d57 1
a57 1
<li><a href="#AnonFTP">10.12 - C&oacute;mo se configura un
d59 1
a59 1
<li><a href="#ftpchroot">10.13 - C&oacute;mo puedo confinar a
d62 1
a62 1
<li><a href="#Patches">10.14 - C&oacute;mo se aplican los
d485 46
d535 1
a535 1
<h2>10.6 - C&oacute;mo se configura un servidor HTTP seguro
d637 1
a637 1
<h2>10.7 - He hecho cambios a <em>/etc/passwd</em>, pero los
d698 1
a698 1
<h2>10.8 - &iquest;C&oacute;mo a&ntilde;ado un usuario?
d815 1
a815 2
<h3>10.8.2 - C&oacute;mo a&ntilde;adir usuarios con
user(8)</h3>
d841 1
a841 1
<h4>10.8.2.1 - C&oacute;mo a&ntilde;adir usuarios</h4>
d981 1
a981 1
<h4>10.8.2.2 - C&oacute;mo eliminar usuarios</h4>
d1009 1
a1009 1
<h2>10.9 - &iquest;C&oacute;mo puedo crear una cuenta s&oacute;lo FTP
d1038 1
a1038 1
<h2>10.10 - Configuraci&oacute;n de cuotas</h2>
d1189 1
a1189 1
<h2>10.11 - C&oacute;mo se configuran los clientes y
d1642 1
a1642 1
<h2>10.12 - Configuraci&oacute;n de servicios de FTP
d1869 1
a1869 1
<h2>10.13 - C&oacute;mo se confinan a los usuarios a sus
d1993 1
a1993 1
<h2>10.14 - C&oacute;mo se aplican parches en OpenBSD</h2>
d2203 2
a2204 2
Originally [OpenBSD: faq10.html,v 1.65 2002/04/30 13:02:47 nick Exp ]<br>
$Translation: faq10.html,v 1.23 2002/04/30 22:01:16 horacio Exp $<br>
@


1.22
log
@
sync with badlands translation CVS
@
text
@d198 1
a198 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&apropos=0&sektion=8&manpath=OpenBSD+Current&format=html">rc(8)</a>,
mire este flujo:
d2156 2
a2157 2
Originally [OpenBSD: faq10.html,v 1.64 2002/02/05 23:24:13 nick Exp ]<br>
$Translation: faq10.html,v 1.22 2002/03/29 10:02:49 horacio Exp $<br>
@


1.21
log
@
sync with badlands translation CVS
@
text
@d5 1
d2158 1
a2158 1
$Translation: faq10.html,v 1.21 2002/02/09 20:02:38 horacio Exp $<br>
@


1.20
log
@
sync with badlands translation CVS
@
text
@d1657 1
a1657 1
Use an empty password? (y/n) [y]: <strong>y</strong>
d2156 2
a2157 2
Originally [OpenBSD: faq10.html,v 1.63 2002/01/27 22:44:34 nick Exp ]<br>
$Translation: faq10.html,v 1.20 2002/01/28 14:51:09 horacio Exp $<br>
@


1.19
log
@
sync with badlands translation CVS
@
text
@d252 1
a252 1
lea la <a href="#10.12">secci&oacute;n sobre FTP
d287 1
a287 1
href="#10.6">secci&oacute;n sobre SSL</a> o la p&aacute;gina
a683 6
Puede leer m&aacute;s informaci&oacute;n sobre c&oacute;mo
a&ntilde;adir usuarios en la p&aacute;gina del manual de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser_proc&sektion=8&format=html">adduser_proc(8)</a>.
</p>

<p>
d685 1
a685 1
<strong>testuser</strong> es a&ntilde;adido a un sistema.  Su
d690 1
a727 1
</p>
d1186 1
a1186 1
<li><a href="http://www.freebsd.org/handbook/kerberos.html">The FreeBSD handbook</a> </li>
d1250 1
a1250 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kbd_init&sektion=8&format=html">kdb_init(8)</a>
d1463 2
a1464 2
<a href="http://www.freebsd.org/handbook/kerberos.html#AEN4957">FreeBSD
Handbook</a> para m&aacute;s informaci&oacute;n.
d1897 1
a1897 1
#       $OpenBSD: faq10.html,v 1.62 2002/01/21 20:28:25 nick Exp $
d2156 2
a2157 2
Originally [OpenBSD: faq10.html,v 1.62 2002/01/21 20:28:25 nick Exp ]<br>
$Translation: faq10.html,v 1.19 2002/01/22 21:24:07 horacio Exp $<br>
@


1.18
log
@
sync with badlands translation CVS.
new tags.
@
text
@d9 1
a9 1
<meta name="copyright"     content="Este documento es copyright 1998-2001 de OpenBSD.">
d1333 1
a1333 1
Expiration date (enter yyyy-mm-dd) [ 1999-12-31 ] ? <strong>2001-12-31</strong>
d1351 1
a1351 1
Expiration date (enter yyyy-mm-dd) [ 1999-12-31 ] ? <strong>2001-12-31</strong>
d1903 1
a1903 1
#       $OpenBSD: faq10.html,v 1.61 2002/01/13 00:00:32 ericj Exp $
d2162 2
a2163 2
Originally [OpenBSD: faq10.html,v 1.61 2002/01/13 00:00:32 ericj Exp ]<br>
$Translation: faq10.html,v 1.18 2002/01/16 20:14:55 horacio Exp $<br>
@


1.17
log
@
sync with badlands translation CVS
@
text
@d12 1
a12 1
<body bgcolor="#ffffff" text="#000000" link="#23238e">
d22 39
a60 37
<li><a href="faq10.html#10.1">10.1 - Cuando un usuario intenta
    convertirse en el superusuario root con <kbd>su(1)</kbd>, le dice
    que est&aacute; en el grupo err&oacute;neo.</a>
    (&quot;wrong group&quot;).</li>
<li><a href="faq10.html#10.2">10.2 - &iquest;C&oacute;mo puedo duplicar
    un sistema de archivo?</a></li>
<li><a href="faq10.html#10.3">10.3 - &iquest;C&oacute;mo inicio los
    d&aelig;mons con el sistema?</a>
    ( <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&apropos=0&sektion=8&manpath=OpenBSD+Current&format=html">rc(8)</a> ).</li>
<li><a href="faq10.html#10.4">10.4 - &iquest;Por qu&eacute; cuando los
    usuarios env&iacute;an correo a trav&eacute;s de mi sistema OpenBSD
    les niega el acceso de reenv&iacute;o?</a>
    (&quot;relaying access denied&quot;).</li>
<li><a href="faq10.html#10.5">10.5 - He configurado POP, pero obtengo
    errores cuando accedo a mi correo a trav&eacute;s de POP.
    &iquest;Qu&eacute; Puedo Hacer?</a></li>
<li><a href="faq10.html#10.6">10.6 - C&oacute;mo configurar un servidor
    HTTP seguro usando SSL(8).</a></li>
<li><a href="faq10.html#10.7">10.7 - He hecho cambios a /etc/passwd con
    vi(1), pero los cambios no funcionan.  &iquest;Por
    qu&eacute;?</a></li>
<li><a href="faq10.html#10.8">10.8 - &iquest;C&oacute;mo a&ntilde;ado
    un usuario?  &iquest;C&oacute;mo elimino un usuario?</a></li>
<li><a href="faq10.html#10.9">10.9 - &iquest;C&oacute;mo puedo crear
    una cuenta s&oacute;lo FTP?</a></li>
<li><a href="faq10.html#10.10">10.10 - C&oacute;mo configurar cuotas
    para limitar el uso del disco a los usuarios.</a> 
    ( <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=quota&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html">quota(1)</a> ).</li>
<li><a href="faq10.html#10.11">10.11 - C&oacute;mo configurar un
    cliente/servidor Kerberos.</a></li>
<li><a href="faq10.html#10.12">10.12 - C&oacute;mo configurar un
    servidor de FTP an&oacute;nimo.</a></li>
<li><a href="faq10.html#10.13">10.13 - C&oacute;mo confinar a los
    usuarios a sus directorios de usuario (&quot;home&quot;) en
    ftpd(8).</a>
<li><a href="faq10.html#10.14">10.14 - C&oacute;mo aplicar parches en
    OpenBSD.</a>
d68 5
a72 5
<a name="10.1">
<h2>10.1 - &iquest;Por qu&eacute; me dice que estoy en el grupo
err&oacute;neo cuando intento ingresar como usuario root con
<kbd>su(1)</kbd>?</h2>
</a>
d76 7
a82 6
Para que un usuario normal se pueda convertir en el superusuario root,
debe a&ntilde;adirlo al grupo <kbd>wheel</kbd> a mano.  Esto se hace
por motivos de seguridad, y se recomienda tener cuidado con los
usuarios a los que se otorgue este acceso especial.  En OpenBSD, los
usuarios que pertenezcan al grupo <kbd>wheel</kbd> podr&aacute;n usar
el programa en modo usuario (&quot;userland program&quot;)
d84 2
a85 1
para convertirse en el usuario root.  Los usuarios que no pertenezcan
d87 3
a89 3
continuaci&oacute;n puede ver el ejemplo de una entrada en
<kbd>/etc/group</kbd> para asociar al usuario <strong>ericj</strong> al
grupo <kbd>wheel</kbd>.
d94 6
a99 5
puede asociarlo al grupo <kbd>wheel</kbd> desde el punto <tt>Invite
<em>user</em> into other groups:</tt>, simplemente contestando wheel.
Esto a&ntilde;adir&aacute; al usuario en la l&iacute;nea del grupo
<kbd>wheel</kbd>, en el fichero /etc/group, que quedar&aacute; del
siguiente modo:
d109 3
a111 3
Si lo que busca un modo de permitir a los usuarios acceso limitado a
los privilegios del superusuario, sin tener que asociarlos al grupo
<kbd>wheel</kbd>, use
d116 2
a117 1
<a name="10.2">
d119 1
a119 2
archivo?</h2>
</a>
d123 1
a123 1
Para duplicar su sistema de archivo use
d126 2
a127 2
Por ejemplo, para duplicar todo en el directorio <kbd>SRC</kbd> al
directorio <kbd>DST</kbd>, haga lo siguiente:
d137 5
a141 4
<kbd>dump</kbd> est&aacute; dise&ntilde;ado para ofrecer una gran
variedad de posibilidades para copias de respaldo/seguridad, y puede
resultar excesivo si s&oacute;lo quiere duplicar un &uacute;nico
sistema de archivo o parte de &eacute;l.  La orden
d143 2
a144 2
puede resultar m&aacute;s r&aacute;pida para una operaci&oacute;n de
este tipo.  El formato es muy parecido:
d153 3
a155 1
<p><a name="10.3"></a>
d163 2
a164 1
para lo que necesita unos cuantos ficheros claves para iniciar.
d168 5
a172 5
   <li>/etc/rc - Gui&oacute;n (<em>&quot;script&quot;</em>) principal.
       No se debe editar.
   <li>/etc/rc.conf - Fichero de configuraci&oacute;n usado por
       <em>/etc/rc</em> para saber qu&eacute; d&aelig;mons debe iniciar
       con el sistema.
d174 1
a174 1
       No se debe editar.
d176 3
a178 3
       administraci&oacute;n local.  Aqu&iacute; se debe almacenar
       informaci&oacute;n espec&iacute;fica de la m&aacute;quina
       anfitriona o de los d&aelig;mons.
d180 3
a182 3
       &oacute;rdenes que deben ser invocadas antes de los cambios en
       el nivel de seguridad.  Vea
       <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=init&sektion=8&format=html">init(8)</a>.
d184 4
a187 4
       <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=shutdown&sektion=8&apropos=0&manpath=OpenBSD+Current&format=html">shutdown(8)</a>.
       A&ntilde;ada en este fichero cualquier cosa que quiera hacer
       antes de cerrar el sistema.  Ver tambi&eacute;n
       <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.shutdown&sektion=8&format=html">rc.shutdown(8)</a>.
d193 4
a196 4
Los ficheros m&aacute;s importantes para un administrador de sitemas
son <em>/etc/rc.conf</em>, <em>/etc/rc.local</em> y
<em>/etc/rc.shutdown</em>.  Para que se pueda hacer una idea sobre
c&oacute;mo funciona el procedimiento de
d201 35
a235 31
<ul>Despu&eacute;s de arrancar el n&uacute;cleo del sistema, se inicia
    <em>/etc/rc</em>.
   <li>Comprueba los sistemas de archivo
       (<em>&quot;filesystems&quot;</em>).  Este paso se omitir&aacute;
       en caso de que exista fichero /etc/fastboot, pero no es
       conveniente hacerlo de este modo.
   <li>Lee las variables de configuraci&oacute;n de
       <em>/etc/rc.conf</em>.
   <li>Monta los sistemas de archivo.
   <li>Limpia el sistema de archivo <em>/tmp</em> y preserva cualquier
       fichero creado por el editor.
   <li>Configura la red por medio de <em>/etc/netstart</em>:
      <ul>
         <li>Configura las interfaces.
	 <li>Configura &quot;hostname&quot;, &quot;domainname&quot;,
	     etc.
      </ul>
   <li>Inicia los &quot;d&aelig;mons&quot;.
   <li>Lleva a cabo varias comprobaciones (&quot;quota&quot;,
       &quot;savecore&quot;, etc...).
   <li>Invoca y ejecuta los &quot;d&aelig;mons&quot; locales, como en
       <em>/etc/rc.local</em>.
</ul>

<h3>Iniciar los d&aelig;mons y servicios que vienen con OpenBSD</h3>

<p>
La mayor&iacute;a de d&aelig;mons y servicios que vienen predefinidos
con OpenBSD pueden iniciarse con el arranque, editando el fichero de
configuraci&oacute;n <em>/etc/rc.conf</em>.  Un ejemplo lo puede
encontrar en el fichero
d237 1
a237 1
que viene por definici&oacute;n con el sistema, en donde ver&aacute;
d244 1
a244 1
ftpd_flags=NO           # for non-inetd use: ftpd_flags="-D"
d249 2
a250 2
Una l&iacute;nea como &eacute;sta nos indica que ftpd no se inicia con
el sistema (al menos no mediante
d252 5
a256 4
lea la <a href="#10.12">secci&oacute;n sobre FTP An&oacute;nimo</a>
para m&aacute;s informaci&oacute;n al respecto).  En cualquier caso,
cada l&iacute;nea va acompa&ntilde;ada por un comentario que le
mostrar&aacute; los indicadores para el uso <strong>NORMAL</strong> de ese
d258 2
a259 2
d&aelig;mon o servicio en cuesti&oacute;n con esos indicadores.
Siempre puede usar
d261 4
a264 3
para ver c&oacute;mo puede iniciar de cualquier otro modo que prefiera
ese d&aelig;mon o servicio.  Por ejemplo, vea la l&iacute;nea
predefinida para la entrada para
d270 1
a270 1
httpd_flags=NO          # for normal use: "" (or "-DSSL" after reading ssl(8))
d275 4
a278 3
Aqu&iacute; puede ver con claridad que no es necesario ning&uacute;n
indicador para iniciar httpd.  Por lo tanto, s&oacute;lo ser&aacute;
necesaria una l&iacute;nea como:
d286 3
a288 2
Pero para iniciar httpd con ssl (lea la <a href="#10.6">secci&oacute;n
sobre SSL</a> o la p&aacute;gina de manual de
d290 1
a290 1
necesitar&aacute; una l&iacute;nea como:
d302 1
a302 1
Para instalar otros d&aelig;mons en el sistema por medio de
d305 1
a305 1
instalado un d&aelig;mon que se encuentre en
d320 5
a324 4
Desde este momento, el d&aelig;mon ser&aacute; invocado durante el
arranque.  Tambi&eacute;n podr&aacute; ver cualquier error durante el
arranque;  un arranque normal sin errores s&oacute;lo mostrar&iacute;a
una l&iacute;nea como &eacute;sta:
d333 1
a333 1
<h3>rc.shutdown</h3>
d336 6
a341 5
<em>/etc/rc.shutdown</em> es un gui&oacute;n (<em>script</em>) que se
invoca al cerrar el sistema.  Cualquier cosa que quiera hacer antes de
que se cierre el sistema, la debe a&ntilde;adir a este fichero.  Si
tiene apm, tambi&eacute;n puede configurar &quot;powerdown=YES&quot;,
que le dar&aacute; un resultado equivalente a 'shutdown -p'.
d344 1
d346 1
d348 3
a350 3
<h2>10.4 - &iquest;Por qu&eacute; cuando los usuarios env&iacute;an
correo a trav&eacute;s de mi sistema OpenBSD les niega el acceso de
reenv&iacute;o?</h2>
d370 3
a372 3
Si este fichero no existe, cr&eacute;elo.  Necesitar&aacute; introducir
los hu&eacute;spedes que est&eacute;n enviando correo de forma remota
con la siguiente sintaxis:
d374 1
d377 6
a382 5
.dominio.com    #Permitir reenv&iacute;o para/a cualquier
                #hu&eacute;sped en dominio.com
sub.dominio.com #Permitir reenv&iacute;o para/a sub.dominio.com y
                #cualquier hu&eacute;sped en ese dominio
10.2            #Permitir reenv&iacute;o desde todos los
d386 1
d388 3
a390 3
No olvide enviar una se&ntilde;al 'HangUP' a sendmail (una se&ntilde;al
que hace que la mayor&iacute;a de d&aelig;mons vuelvan a leer sus
ficheros de configuraci&oacute;n):
d409 2
d412 4
a415 2
<h2>10.5 - He configurado POP, pero obtengo errores cuando accedo a mi
correo a trav&eacute;s de POP.  &iquest;Qu&eacute; puedo hacer?</h2>
d418 4
a421 3
La mayor&iacute;a de problemas relacionados con POP tienen que ver con
ficheros temporales y ficheros de cerrojo.  Si su servidor pop
env&iacute;a un mensaje de error como el siguiente:
d431 1
a431 1
Intente configurar sus permisos as&iacute;:
d446 7
a452 6
Otra cosa que puede comprobar es que realmente el usuario sea el
propietario de su propio fichero /var/mail.  Por supuesto, esto
deber&iacute;a ser as&iacute; (como por ejemplo, el propietario de
/var/mail/joe deber&iacute;a ser el usuario joe), pero si no
est&aacute; correctamente configurado podr&iacute;a ser el causante del
problema.
d456 11
a466 9
Dejar /var/mail con permisos de escritura para el grupo mail abre
algunos problemas de seguridad.  Es probable que nunca tenga problemas
con eso.  &iexcl;Pero podr&iacute;a tenerlos!  (especialmente si su
sitio es de alto rendimiento, como un ISP, ...) Pruebe a invocar
'cucipop' u otro d&aelig;mon de la colecci&oacute;n de portes de
OpenBSD.  O podr&iacute;a ser que tuviera seleccionadas las opciones
err&oacute;neas para su d&aelig;mon pop (como &quot;dot locking&quot;).
O tambi&eacute;n es posible que necesitara cambiar el directorio que
bloquea (aunque entonces, el bloqueo s&oacute;lo ser&iacute;a de valor
d471 4
a474 3
<strong>PD:</strong> Note que OpenBSD no tiene un grupo con el nombre
&quot;mail&quot;.  Debe crearlo en su fichero <em>/etc/group</em> con
una entrada como &eacute;sta:
d485 1
d487 2
a488 2
<h2>10.6 - C&oacute;mo configurar un servidor HTTP seguro usando
SSL(8)</h2>
d492 5
a496 5
Desde la versi&oacute;n 2.8, OpenBSD incluye httpd y RSA preparados
para las bibliotecas SSL.  Sin embargo, si est&aacute; usando OpenBSD
2.6 &oacute; 2.7, debe instalar Vd mismo los paquetes de SSL para que
usen SSL.  Para m&aacute;s informaci&oacute;n, <strong>man 8
ssl</strong>.
d501 5
a505 4
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&sektion=8&format=html">httpd(8)</a>
primero debe haber generado un certificado, que se guardar&aacute; en
<em>/etc/ssl/private/</em>.  Los pasos que aqu&iacute; se muestran
est&aacute;n tomados, en parte, de la p&aacute;gina de manual de
d507 6
a512 5
Para m&aacute;s informaci&oacute;n, lea esta p&aacute;gina.  En estas
Preguntas Frecuentes tan s&oacute;lo se resalta c&oacute;mo generar un
certificado RSA para servidores de web, no un certificado DSA para
servidores.  Para saber c&oacute;mo hacerlo, por favor lea la
p&aacute;gina de manual
d517 4
a520 4
Para empezar, necesita generar su clave de servidor y su certificado.
Para usar las caracter&iacute;sticas de RSA, tiene que haber
actualizado antes libssl.  Ahora ya puede generar su clave usando
OpenSSL:
d530 3
a532 2
O si desea puede cifrar la clave con una contrase&ntilde;a que
tendr&aacute; que introducir cuando inicie los servidores:
d542 4
a545 4
El pr&oacute;ximo paso es generar un &quot;Certificate Signing
Request&quot; (Requerimiento para Firmar el Certificado), que se usa
para que una Autoridad Certificadora (CA) firme su certificado.  Para
ello use la orden:
d555 4
a558 3
Este fichero <em>server.csr</em> se puede entregar a la Autoridad
Certificadora que firmar&aacute; la clave.  Una de estas CAs es
<strong>Thawte Certification</strong>, y la puede localizar en
d560 3
a562 2
Actualmente Thawte puede firmar sus claves RSA.  Est&aacute; en marcha
un procedimiento para poder firmar las claves DSA.
d578 3
a580 2
Con <em>/etc/ssl/server.crt</em> y <em>/etc/ssl/private/server.key</em>
en su sitio, ya puede iniciar
d582 2
a583 2
con el indicador <strong>-DSSL</strong>, permitiendo transacciones
https con su m&aacute;quina por el puerto 443.
d587 1
d589 2
a590 2
<h2>10.7 - He hecho cambios a <em>/etc/passwd</em>, pero los cambios no
funcionan.  &iquest;Por qu&eacute;?</h2>
d595 2
a596 2
perder&aacute;.  OpenBSD genera el fichero <em>/etc/passwd</em> de
forma din&aacute;mica con
d599 2
a600 2
<em>/etc/master.passwd</em>.  Seg&uacute;n la p&aacute;gina de manual de
pwd_mkdb(8),
d619 17
a635 15
contrase&ntilde;a cifrada del usuario, est&aacute; disponible para
cualquiera que pueda acceder al sistema (y es el primer objetivo para
programas como Crack).  4.4BSD introdujo el fichero
<em>master.passwd</em>, que tiene un formato extendido (con opciones
adicionales que van m&aacute;s all&aacute; de las ofrecidas por
<em>/etc/passwd</em>), y s&oacute;lo puede ser leido por root.  Para un
acceso m&aacute;s r&aacute;pido a los datos, las llamadas de las
bibliotecas que acceden a estos datos leen los ficheros
<em>/etc/pwd.db</em> y <em>/etc/spwd.db</em>.

<p>
OpenBSD viene con una herramienta para la edici&oacute;n de su fichero
de contrase&ntilde;a,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&apropos=0&sektion=8&manpath=OpenBSD+Current&format=html">vipw(8)</a>.
Vipw usa
d637 8
a644 7
(nuestro editor favorito, definido por $EDITOR) para editar el fichero
<em>/etc/master.passwd</em>.  Una vez haya terminado de editar, vuelve a
crear los ficheros <em>/etc/passwd</em>, <em>/etc/pwd.db</em>, y
<em>/etc/spwd.db</em> conforme con los cambios que haya llevado a cabo.
Vipw tambi&eacute;n se encarga de bloquear estos ficheros, de modo que
si alguna otra persona intentara cambiarlos al mismo tiempo, no le
permitir&iacute;a el acceso.
d648 1
d655 1
a655 1
En OpenBSD 2.6, los usuarios diponen de la orden
d657 2
a658 2
para a&ntilde;adir usuarios.  A partir de OpenBSD 2.7, se ha
a&ntilde;adido la orden
d669 2
a670 2
En OpenBSD, la mejor manera para a&ntilde;adir un usuario es usando el
gui&oacute;n
d672 3
a674 3
Puede configurarlo para que funcione como mejor le convenga, editando
<em>/etc/adduser.conf</em>.  Puede a&ntilde;adir usuarios de forma
manual, mediante
d676 10
a685 9
pero adduser(8) es el modo en que se recomienda hacerlo.  La orden
adduser(8) permite llevar a cabo comprobaciones de consistencia sobre
los ficheros <em>/etc/passwd</em> y <em>/etc/group</em>, y sobre las
bases de datos del int&eacute;rprete (<em>shell</em>).  Tambi&eacute;n
generar&aacute; por Vd. las entradas correspondientes y directorios
$HOME.  Incluso puede enviar un mensaje de bienvenida al usuario.  Todo
esto se puede modificar seg&uacute;n se desee.  Puede leer m&aacute;s
informaci&oacute;n sobre c&oacute;mo a&ntilde;adir usuarios en la
p&aacute;gina de manual
d690 6
a695 4
Aqu&iacute; tiene un ejemplo de c&oacute;mo un usuario ficticio,
<strong>testuser</strong> es a&ntilde;adido a un sistema.  Su directorio $HOME se
ubicar&aacute; en <em>/home/testuser</em>, se le a&ntilde;adir&aacute;
al grupo <strong>guest</strong>, y se le dar&aacute; la shell <em>/bin/ksh</em>.
d736 1
a736 1
Para eliminar usuarios debe usar la utilidad
d738 2
a739 2
Esto eliminar&aacute; todo vestigio de un usuario.  Eliminar&aacute;
cualquier entrada en
d741 4
a744 3
relacionada con el usuario, su directorio $HOME (siempre que el
propietario de &eacute;ste sea el usuario en cuesti&oacute;n), y su
correo.  Tambi&eacute;n eliminar&aacute; sus entradas en los ficheros
d749 5
a753 4
A continuaci&oacute;n sigue un ejemplo sobre c&oacute;mo eliminar el
usuario que se ha a&ntilde;adido en el ejemplo anterior.  Ver&aacute;
que le pedir&aacute; el nombre, y si debe o no eliminar el directorio
ra&iacute;z ($HOME) del usuario.
d773 2
a774 1
<h3>10.8.2 - A&ntilde;adir usuarios con user(8)</h3>
d777 4
a780 3
A partir de la versi&oacute;n 2.7 de OpenBSD, se han a&ntilde;adido
muchas &oacute;rdenes para gestionar usuarios y grupos.  Estas
herramientas son menos interactivas que la orden
d782 2
a783 2
que ayuda a facilitar el uso de &eacute;stas en un gui&oacute;n
(<em>script</em>).
d803 9
a811 7
Dado que user(8) no es interactivo, la forma m&aacute;s f&aacute;cil
para a&ntilde;adir usuarios de modo eficiente es usar la orden
adduser(8).  La orden <em>/usr/sbin/user</em> es simplemente una
interfaz para el resto de &oacute;rdenes <em>/usr/sbin/user*</em>.  Por
lo tanto, las siguientes &oacute;rdenes pueden ser adheridas usando
<strong>user add</strong> o <strong>useradd</strong>;  c&oacute;mo lo vaya a hacer es su
elecci&oacute;n, y no altera en absoluto la funci&oacute;n de la orden.
d815 8
a822 7
En este ejemplo, estamos a&ntilde;adiendo el mismo usuario con las
mismas especificaciones que usamos para el nuevo usuario de los
<a href="#adduser">ejemplos anteriores</a>.  La orden useradd(8) es
m&aacute;s f&aacute;cil de usar si conoce la configuraci&oacute;n
predefinida antes de crear el usuario.  Estas configuraciones se
encuentran en el fichero <em>/etc/usermgmt.conf</em>, y se pueden ver
del siguiente modo:
d839 10
a848 8
Las configuraciones de arriba son las que se activar&aacute;n a menos
que especifique otra cosa con opciones en la l&iacute;nea de
&oacute;rdenes.  Por ejemplo, en nuestro caso, queremos que el usuario
pertenezca al grupo <strong>guest</strong>, no al grupo <strong>users</strong>.  Un
peque&ntilde;o obst&aacute;culo m&aacute;s al crear usuarios, es que
las contrase&ntilde;as se deben especificar desde la l&iacute;nea de
&oacute;rdenes.  Las contrase&ntilde;as son cifradas, as&iacute; que
tendr&aacute; que usar la utilidad
d850 2
a851 2
para crearla.  OpenBSD, por definici&oacute;n usa 6 veces el algoritmo 
Blowfish para crear la contrase&ntilde;a.
d855 2
a856 2
He aqu&iacute; una l&iacute;nea de ejemplo para crear una
contrase&ntilde;a que espicificar a useradd(8).
d867 2
a868 2
Ahora que ya tenemos nuestra contrase&ntilde;a cifrada, estamos
preparados para a&ntilde;adirla al usuario:
d879 10
a888 7
<strong>Nota:</strong>  Aseg&uacute;rese de usar comillas simples (<strong>'</strong>) a 
ambos lados de la cadena de la contrase&ntilde;a, y no comillas dobles
(<strong>&quot;</strong>) ya que &eacute;stas ser&iacute;an interpretadas por la
shell antes de enviar la cadena a user(8).  Adem&aacute;s de eso,
aseg&uacute;rese de especificar la opci&oacute;n <strong>-m</strong> si quiere
que el directorio ra&iacute;z del usuario sea creado y que los ficheros
de <em>/etc/skel</em> se copien en &eacute;l.
d892 5
a896 4
Para verificar que se ha creado el usuario correctamente, podemos usar
muchas utilidades diferentes.  A continuaci&oacute;n hay unas cuantas
&oacute;rdenes que puede usar para verificar r&aacute;pidamente que se
ha creado todo correctamente.
d919 3
a921 2
Aparte de estas &oacute;rdenes, user(8) provee su propia utilidad para
mostrar las caracter&iacute;sticas del usuario, llamada userinfo(8).
d943 4
a946 4
Para eliminar usuarios con la jerarqu&iacute;a de &oacute;rdenes
user(8), deber usar userdel(8).  &Eacute;sta es una orden muy simple,
pero muy &uacute;til.  Para eliminar el usuario creado en el ejemplo
anterior, simplemente ejecute:
d956 7
a962 5
Note que la opci&oacute;n <strong>-r</strong>, que debe ser especificada si
quiere que el directorio ra&iacute;z del usuario sea tambi&eacute;n
eliminado.  De forma alternativa, puede especificar <strong>-p</strong> y no
<strong>-r</strong> y esto bloquear&aacute; la cuenta del usuario, pero no
eliminar&aacute; ninguna informaci&oacute;n.
d966 1
d995 1
d997 1
a997 1
<h2>10.10 - Configurar cuotas</h2>
d1146 1
d1148 2
a1149 2
<h2>10.11 - C&oacute;mo configurar clientes y servidores Kerberos en
OpenBSD</h2>
d1599 1
d1601 2
a1602 1
<h2>10.12 - Configurar servicios de FTP An&oacute;nimo</h2>
d1614 1
a1614 1
<h3>A&ntilde;adir la cuenta de FTP</h3>
d1826 1
d1828 2
a1829 2
<h2>10.13 - Confinar a los usuarios a sus directorios de usuario 
(&quot;home&quot;) en ftpd(8)</h2>
d1903 1
a1903 1
#       $OpenBSD: faq10.html,v 1.59 2001/12/30 11:37:25 jufi Exp $
d1950 1
d1952 1
a1952 1
<h2>10.14 - C&oacute;mo aplicar parches en OpenBSD</h2>
d1996 2
a1997 1
<h3>Preparar el sistema para la aplicaci&oacute;n de parches</h3>
d2005 2
a2006 2
disponer del c&oacute;digo fuente de la versi&oacute;n
<strong>RELEASE</strong> de OpenBSD.  Esto no significa que debe
d2096 1
a2096 1
<h3>Aplicar parches</h3>
d2162 2
a2163 2
Originally [OpenBSD: faq10.html,v 1.59 2001/12/30 11:37:25 jufi Exp ]<br>
$Translation: faq10.html,v 1.17 2001/12/31 00:12:22 horacio Exp $<br>
@


1.16
log
@sync with badlands translation CVS.
@
text
@d1833 1
a1833 1
#       $OpenBSD: faq10.html,v 1.58 2001/11/02 10:54:56 mpech Exp $
d1960 1
a1960 1
$ <strong>cvs -danoncvs@@anoncvs5.usa.openbsd.org:/cvs co -rOPENBSD_2_7_BASE src/libexec/talkd/</strong>
d2090 2
a2091 2
Originally [OpenBSD: faq10.html,v 1.58 2001/11/02 10:54:56 mpech Exp ]<br>
$Translation: faq10.html,v 1.16 2001/11/05 19:46:55 horacio Exp $<br>
@


1.15
log
@
sync with badlands translation CVS.
@
text
@d370 1
a370 1
# <Strong>kill -HUP `cat /var/run/sendmail.pid`</strong>
d1052 1
a1052 1
# <Strong>quota ericj</strong>
d1116 2
a1117 2
xntpd, disponible desde el &aacute;rbol de portes en
<em>/usr/ports/sysutils/xntpd/</em>.
d1281 1
a1281 1
Random password [y] ? <Strong>y</strong>
d1308 1
a1308 1
[root@@avalanche kerberosIV] <Strong>ext_srvtab avalanche</strong>
d1443 1
a1443 1
xyz:jeremie% <Strong>kinit</strong>
d1477 1
a1477 1
xyz:jeremie% <Strong>telnet avalanche</strong>
d1513 1
a1513 1
xyz:jeremie% <Strong>rlogin avalanche</strong>
d1833 1
a1833 1
#       $OpenBSD: faq10.html,v 1.56 2001/08/25 09:31:33 jufi Exp $
d2090 2
a2091 2
Originally [OpenBSD: faq10.html,v 1.56 2001/08/25 09:31:33 jufi Exp ]<br>
$Translation: faq10.html,v 1.15 2001/09/20 02:09:34 horacio Exp $<br>
@


1.14
log
@
Updated by Horacio
@
text
@d9 1
a9 1
<meta name="copyright"     content="Este documento es copyright 1998,2000 de OpenBSD.">
d285 7
a291 6
Para instalar otros d&aelig;mons en el sistema por medio de los portes
o cualquier otro medio, debe usar el fichero <em>/etc/rc.local</em>.
Por ejemplo, supongamos que se ha instalado un d&aelig;mon que se
encuentre en /usr/local/sbin/daemonx, y que se desea iniciar durante el
arranque del sistema.  Para ello pondr&iacute;a una entrada como la
siguiente en <em>/etc/rc.local</em>:
d1833 1
a1833 1
#       $OpenBSD: faq10.html,v 1.54 2001/06/09 16:39:04 pvalchev Exp $
d2090 2
a2091 2
Originally [OpenBSD: faq10.html,v 1.54 2001/06/09 16:39:04 pvalchev Exp ]<br>
$Translation: faq10.html,v 1.14 2001/06/10 01:05:46 horacio Exp $<br>
@


1.13
log
@
Sync with badlands translation CVS, work by Horacio
@
text
@d3 1
a3 1
<title>10.0 - Gesti&oacute;n del Sistema</title>
d17 1
a17 1
Sistema</font><hr></h2>
d21 1
a21 1
<ul><h3>Tabla de Contenidos</h3>
d1832 1
a1832 1
#       $OpenBSD: faq10.html,v 1.53 2001/04/22 05:33:54 austin Exp $
d2089 2
a2090 2
Originally [OpenBSD: faq10.html,v 1.53 2001/04/22 05:33:54 austin Exp ]<br>
$Translation: faq10.html,v 1.13 2001/04/25 11:43:34 horacio Exp $<br>
@


1.12
log
@
Sync with translation CVS, work by Horacio
@
text
@d1832 1
a1832 1
#       $OpenBSD: faq10.html,v 1.52 2001/03/26 17:14:07 todd Exp $
d1972 1
a1972 1
OPENBSD_version_number_BASE.  Sin &quot;BASE&quot; obtendr&aacute; el
d2089 2
a2090 2
Originally [OpenBSD: faq10.html,v 1.52 2001/03/26 17:14:07 todd Exp ]<br>
$Translation: faq10.html,v 1.12 2001/04/06 16:41:15 horacio Exp $<br>
@


1.11
log
@
Sync with translation CVS. Work by Horacio
@
text
@d5 3
a7 3
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq">
d9 1
a9 1
<meta name="copyright"     content="This document copyright 1998,2000 by OpenBSD.">
d1832 1
a1832 1
#       $OpenBSD: faq10.html,v 1.51 2001/01/27 22:19:47 ericj Exp $
d2089 2
a2090 2
Originally [OpenBSD: faq10.html,v 1.51 2001/01/27 22:19:47 ericj Exp ]<br>
$Translation: faq10.html,v 1.11 2001/02/24 22:41:05 horacio Exp $<br>
@


1.10
log
@
Sync with Badlands Translation CVS. Work by Horacio
@
text
@d91 1
a91 1
<i>user</i> into other groups:</tt>, simplemente contestando wheel.
d143 1
a144 1
</pre>
d159 1
a159 1
   <li>/etc/rc - Gui&oacute;n (<i>&quot;script&quot;</i>) principal.
d162 1
a162 1
       <i>/etc/rc</i> para saber qu&eacute; d&aelig;mons debe iniciar
d185 2
a186 2
son <i>/etc/rc.conf</i>, <i>/etc/rc.local</i> y
<i>/etc/rc.shutdown</i>.  Para que se pueda hacer una idea sobre
d193 1
a193 1
    <i>/etc/rc</i>.
d195 1
a195 1
       (<i>&quot;filesystems&quot;</i>).  Este paso se omitir&aacute;
d199 1
a199 1
       <i>/etc/rc.conf</i>.
d201 1
a201 1
   <li>Limpia el sistema de archivo <i>/tmp</i> y preserva cualquier
d203 1
a203 1
   <li>Configura la red por medio de <i>/etc/netstart</i>:
d213 1
a213 1
       <i>/etc/rc.local</i>.
d221 1
a221 1
configuraci&oacute;n <i>/etc/rc.conf</i>.  Un ejemplo lo puede
d242 1
a242 1
mostrar&aacute; los indicadores para el uso <b>NORMAL</b> de ese
d266 1
a266 1
<b>httpd_flags=&quot;&quot;</b>
d286 5
a290 5
o cualquier otro medio, debe usar el fichero <i>/etc/rc.local</i>.  Por
ejemplo, supongamos que se ha instalado un d&aelig;mon que se encuentre
en /usr/local/sbin/daemonx, y que se desea iniciar durante el arranque
del sistema.  Para ello pondr&iacute;a una entrada como la siguiente en
<i>/etc/rc.local</i>:
d317 1
a317 1
<i>/etc/rc.shutdown</i> es un gui&oacute;n (<i>script</i>) que se
d468 1
a468 1
<i>/etc/ssl/private/</i>.  Los pasos que aqu&iacute; se muestran
d517 1
a517 1
Este fichero <i>server.csr</i> se puede entregar a la Autoridad
d519 1
a519 1
<b>Thawte Certification</b>, y la puede localizar en
d538 2
a539 2
Con <i>/etc/ssl/server.crt</i> y <i>/etc/ssl/private/server.key</i> en
su sitio, ya puede iniciar
d541 2
a542 2
con el indicador <b>-DSSL</b>, permitiendo transacciones https con su
m&aacute;quina por el puerto 443.
d547 1
a547 1
<h2>10.7 - He hecho cambios a <i>/etc/passwd</i>, pero los cambios no
d552 4
a555 4
Si edita <i>/etc/passwd</i>, cualquier cambio que haga se
perder&aacute;.  OpenBSD genera el fichero <i>/etc/passwd</i> de forma
din&aacute;mica con <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pwd_mkdb&sektion=8&apropos=0">pwd_mkdb(8)</a>.
d557 1
a557 1
<i>/etc/master.passwd</i>.  Seg&uacute;n la p&aacute;gina de manual de
d576 1
a576 1
<i>/etc/passwd</i>, toda la informaci&oacute;n, incluida la
d580 1
a580 1
<i>master.passwd</i>, que tiene un formato extendido (con opciones
d582 1
a582 1
<i>/etc/passwd</i>), y s&oacute;lo puede ser leido por root.  Para un
d585 1
a585 1
<i>/etc/pwd.db</i> y <i>/etc/spwd.db</i>.
d594 3
a596 3
<i>/etc/master.passwd</i>.  Una vez haya terminado de editar, vuelve a
crear los ficheros <i>/etc/passwd</i>, <i>/etc/pwd.db</i>, y
<i>/etc/spwd.db</i> conforme con los cambios que haya llevado a cabo.
d627 1
a627 1
<i>/etc/adduser.conf</i>.  Puede a&ntilde;adir usuarios de forma
d632 2
a633 2
los ficheros <i>/etc/passwd</i> y <i>/etc/group</i>, y sobre las bases
de datos del int&eacute;rprete (<i>shell</i>).  Tambi&eacute;n
d644 3
a646 3
<b>testuser</b> es a&ntilde;adido a un sistema.  Su directorio $HOME se
ubicar&aacute; en <i>/home/testuser</i>, se le a&ntilde;adir&aacute;
al grupo <b>guest</b>, y se le dar&aacute; la shell <i>/bin/ksh</i>.
d695 1
a695 1
<i>/etc/passwd</i> y <i>/etc/group</i>.
d722 1
a722 1
<h3>10.8.2 - A&ntilde;adir usuarios con user(8)</a></h3>
d730 1
a730 1
(<i>script</i>).
d752 4
a755 4
adduser(8).  La orden <i>/usr/sbin/user</i> es simplemente una interfaz
para el resto de &oacute;rdenes <i>/usr/sbin/user*</i>.  Por lo tanto,
las siguientes &oacute;rdenes pueden ser adheridas usando <b>user
add</b> o <b>useradd</b>;  c&oacute;mo lo vaya a hacer es su
d765 2
a766 2
encuentran en el fichero <i>/etc/usermgmt.conf</i>, y se pueden ver del
siguiente modo:
d786 1
a786 1
pertenezca al grupo <b>guest</b>, no al grupo <b>users</b>.  Un
d821 1
a821 1
<b>Nota:</b>  Aseg&uacute;rese de usar comillas simples (<b>'</b>) a 
d823 1
a823 1
(<b>&quot;</b>) ya que &eacute;stas ser&iacute;an interpretadas por la
d825 1
a825 1
aseg&uacute;rese de especificar la opci&oacute;n <b>-m</b> si quiere
d827 1
a827 1
de <i>/etc/skel</i> se copien en &eacute;l.
d893 1
a893 1
Note que la opci&oacute;n <b>-r</b>, que debe ser especificada si
d895 2
a896 2
eliminado.  De forma alternativa, puede especificar <b>-p</b> y no
<b>-r</b> y esto bloquear&aacute; la cuenta del usuario, pero no
d908 1
a908 1
a&ntilde;adir <i>/usr/bin/false</i> en el fichero
d911 3
a913 2
(<i>&quot;shell&quot;</i>) como <i>/usr/bin/false</i> y de este modo no
podr&aacute; ingresar de forma interactiva, pero podr&aacute; usar ftp.
d916 1
a916 1
definici&oacute;n, <i>/home/&lt;usuario&gt;</i>.
d921 1
a921 1
<i>/etc/ftpchroot</i>.  Mediante el uso de la opci&oacute;n <b>-A</b>
d924 2
a925 2
puede restringir los ingresos (<i>login</i>) para que s&oacute;lo sean
posibles por ftpchroot.
d953 1
a953 1
vaya a configurar las cuotas en <i>/etc/fstab</i>.  Debe usar las
d962 1
a962 1
He aqu&iacute; un ejemplo de <i>/etc/fstab</i> con un sistema de
d983 1
a983 1
</pre>
d1068 1
a1068 1
Las cuotas que est&eacute;n configuradas en <i>/etc/fstab</i>
d1116 1
a1116 1
<i>/usr/ports/sysutils/xntpd/</i>.
a1130 1
</ul>
d1143 3
a1145 2
<i>/etc/kerberosIV/</i>.  Los dos ficheros que nos interesan son
<i>krb.realms</i> y <i>krb.conf</i>.  Empecemos con <i>krb.conf</i>.
d1160 1
a1160 1
continuaci&oacute;n veremos <i>krb.realms</i>.  Para m&aacute;s
d1225 1
a1225 1
<i>/etc/kerberosIV/master_key</i>.
d1230 2
a1231 2
ser&aacute; asegurado con Kerberos.  Sus nombres son <i>kpasswd</i> y
<i>rcmd</i>.  Estas dos entradas &quot;principal&quot; se har&aacute;n
d1235 1
a1235 1
Estos d&aelig;mons, <i>kpasswd</i> y <i>rcmd</i>, permiten que otros
d1237 1
a1237 1
&oacute;rdenes como <i>rcp</i>, <i>rlogin</i> y <i>rsh</i>.
d1240 1
a1240 1
# <b>kdb_edit</b>
d1365 1
a1365 1
Escriba en <i>/etc/rc.conf</i>:
d1371 1
a1371 1
y en <i>/etc/inetd.conf</i> active las siguientes l&iacute;neas
d1409 1
a1409 1
Configuraremos la estaci&oacute;n de trabajo llamada <i>gatekeeper</i>
d1415 3
a1417 3
Para empezar, necesitamos configurar los ficheros <i>krb.conf</i> y
<i>krb.realms</i> como para la m&aacute;quina anterior.  Esto es para
que <i>gatekeeper</i> sepa qu&eacute; servidor es el KDC y en
d1447 1
a1447 1
</pre></strong>
d1493 1
a1493 1
xyz:jeremie% <Strong>rlogin avalanche</strong>
a1497 1
</strong>
d1550 1
a1550 1
<i>/home/ftp</i>, pero puede ponerlos donde quiera.  Cuando use ftp
d1557 1
a1557 1
<i>ftp</i>.  Para ello usaremos
d1560 1
a1560 1
fichero <i>/etc/shells</i>, que ser&aacute; la <i>shell</i> que
d1571 1
a1571 1
<i>/etc/adduser.conf</i>.
d1614 1
a1614 1
Adem&aacute;s del usuario, ha creado el directorio <i>/home/ftp</i>.
d1622 2
a1623 2
<b>No</b> necesita crear un directorio <i>/home/ftp/usr</i> o
<i>/home/ftp/bin</i>.<br>
d1625 1
a1625 1
<li><i>/home/ftp</i> - Es el directorio principal.  Su propietario debe
d1627 1
a1627 1
<li><i>/home/ftp/etc</i> - Es totalmente opcional y no se recomienda,
d1631 2
a1632 2
    a sus ficheros, deber&iacute;a copiar <i>/etc/pwd.db</i> y
    <i>/etc/group</i> a este directorio.  Este directorio
d1636 1
a1636 1
    <i>pwd.db</i>, ya que est&aacute;n todas en <i>spwd.db</i>,
d1638 1
a1638 1
<li><i>/home/ftp/pub</i> - &Eacute;ste es el directorio t&iacute;pico
d1686 1
a1686 1
La l&iacute;nea por definici&oacute;n de <i>/etc/inetd.conf</i> es:
d1698 3
a1700 3
En este caso ftpd se invoca con <i>-US</i>.  As&iacute; se
grabar&aacute;n las conexiones an&oacute;nimas a <i>/var/log/ftpd</i>,
y las sesiones concurrentes a <i>/var/run/utmp</i>.  De este modo,
d1705 1
a1705 1
ftpd con la opci&oacute;n <i>-A</i>.  He aqu&iacute; una l&iacute;nea
d1707 1
a1707 1
Tambi&eacute;n usa <i>-ll</i> para grabar cada conexi&oacute;n a
d1722 3
a1724 3
<i>inetd.conf</i>.  La mejor opci&oacute;n es comentar la l&iacute;nea
de ftpd de <i>inetd.conf</i> e iniciar ftpd desde <i>rc.conf</i> junto
con la opci&oacute;n <i>-D</i>.  De este modo iniciar&aacute;n ftpd
d1727 1
a1727 1
iniciarlo desde <i>rc.conf</i>:
d1732 1
a1732 1
ftpd_flags="-DllUSA"           # for non-inetd use: ftpd_flags="-D"
d1738 1
a1738 1
<i>/etc/inetd.conf</i>.
d1745 1
a1745 1
   <li><i>/etc/ftpwelcome</i> - Contiene el mensaje de bienvenida que
d1747 1
a1747 1
   <li><i>/etc/motd</i> - Contiene el mensaje que ver&aacute;n
d1749 1
a1749 1
   <li><i>.message</i> - Este fichero se puede ubicar en cualquier
d1825 1
a1825 1
<i>/etc/ftpchroot</i>.  He aqu&iacute; un ejemplo que muestra
d1832 1
a1832 1
#       $OpenBSD: faq10.html,v 1.50 2000/12/26 18:45:20 ericj Exp $
d1843 1
a1843 1
ejemplo, el directorio <i>/</i> ha cambiado de repente a su directorio
d1959 1
a1959 1
$ <b>cvs -danoncvs@@anoncvs5.usa.openbsd.org:/cvs co -rOPENBSD_2_7_BASE src/libexec/talkd/</b>
d2089 2
a2090 2
Originally [OpenBSD: faq10.html,v 1.50 2000/12/26 18:45:20 ericj Exp ]<br>
$Translation: faq10.html,v 1.10 2000/12/26 21:12:07 horacio Exp $<br>
@


1.9
log
@
And another one.
@
text
@d438 13
d457 6
a462 25
Desde la versi&oacute;n 2.6, OpenBSD incluye un httpd preparado para
SSL.  Sin embargo, debido a las distintas patentes, algunas bibliotecas
no pueden ser incluidas.  Por lo tanto, para poder usar certificados
RSA, debe instalar unas bibliotecas adicionales en su sistema.  Hay dos
grupos de estas bibliotecas, dependiendo de su ubicaci&oacute;n
geogr&aacute;fica (<strong>NOTA:</strong> Si ha instalado por FTP o
cualquier otra instalaci&oacute;n por red, es m&aacute;s que probable
que ya las tenga instaladas en su sistema).  Quienes residan fuera de
los Estados Unidos deben usar un paquete llamado <b>ssl26.tgz</b>,
mientras que quienes que residan en los Estados Unidos deben usar el
paquete <b>sslUSA26.tgz</b>.  Estos paquetes se instalan con la
utilidad
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1&format=html">pkg_add(1)</a>.
Por ejemplo, para instalar la versi&oacute;n de las bibliotecas para no
residentes en EE.UU. use la siguiente orden, en la que ${arch} es la
arquitectura de su m&aacute;quina (<strong>NOTA:</strong> No
est&aacute; disponible para la arquitectura Alpha, debido a su falta de
bibliotecas compartidas).
</p> 

<div style="margin-left: 2em">
<pre>
# <strong>pkg_add ftp://ftp.openbsd.org/pub/OpenBSD/2.6/packages/${arch}/ssl26.tgz</strong>
</pre>
</div>
d1832 1
a1832 1
#       $OpenBSD: faq10.html,v 1.49 2000/10/18 15:15:29 ericj Exp $
d2089 2
a2090 2
Originally [OpenBSD: faq10.html,v 1.49 2000/10/18 15:15:29 ericj Exp ]<br>
$Translation: faq10.html,v 1.9 2000/10/23 00:07:01 horacio Exp $<br>
@


1.8
log
@
Sync with Badlands Translation CVS. Work by es Horacio
@
text
@d57 2
d1838 1
a1838 1
#       $OpenBSD: faq10.html,v 1.47 2000/07/09 00:42:27 ericj Exp $
d1885 198
d2084 1
a2084 1
<a href="index.html">[Volver al &Iacute;ndice principal]</a>
d2095 2
a2096 2
Originally [OpenBSD: faq10.html,v 1.47 2000/07/09 00:42:27 ericj Exp ]<br>
$Translation: faq10.html,v 1.8 2000/09/26 01:23:27 horacio Exp $<br>
@


1.7
log
@
Sync with Badlands Translation CVS. Work by Horacio.
@
text
@d3 1
a3 1
<title>10.0 - Gestión del Sistema</title>
d16 2
a17 1
<h2><font color="#e00000">10.0 - Gestión del Sistema</font><hr></h2>
d22 8
a29 7
<li><a href="faq10.html#10.1">10.1 - Cuando un Usuario Intenta Convertirse en
    el Superusuario root con <kbd>su(1)</kbd>, le Dice que Está en el Grupo
    Erróneo.</a> (&quot;wrong group&quot;).</li>
<li><a href="faq10.html#10.2">10.2 - ¿Cómo Puedo Duplicar un Sistema de
    Archivo?</a></li>
<li><a href="faq10.html#10.3">10.3 - ¿Cómo Inicio los D&aelig;mons con el
    Sistema?</a>
d31 3
a33 2
<li><a href="faq10.html#10.4">10.4 - ¿Por Qué Cuando los Usuarios Envían
    Correo a través de Mi Sistema OpenBSD les Niega el Acceso de Reenvío?</a>
d35 14
a48 14
<li><a href="faq10.html#10.5">10.5 - He Configurado POP, pero Obtengo Errores
    Cuando Accedo a Mi Correo a través de POP.
    ¿Qué Puedo Hacer?</a></li>
<li><a href="faq10.html#10.6">10.6 - Cómo Configurar un Servidor HTTP Seguro
    Usando SSL(8).</a></li>
<li><a href="faq10.html#10.7">10.7 - He Hecho Cambios a /etc/passwd con
    vi(1), pero los Cambios No Funcionan.
    ¿Por Qué?</a></li>
<li><a href="faq10.html#10.8">10.8 - ¿Cómo Añado un Usuario?  ¿Cómo Elimino
    un Usuario?</a></li>
<li><a href="faq10.html#10.9">10.9 - ¿Cómo Puedo Crear una Cuenta Sólo
    FTP?</a></li>
<li><a href="faq10.html#10.10">10.10 - Configurar Cuotas para Limitar el Uso
    del Disco a los Usuarios.</a> 
d50 7
a56 6
<li><a href="faq10.html#10.11">10.11 - Configurar un Cliente/Servidor
    Kerberos.</a></li>
<li><a href="faq10.html#10.12">10.12 - Configurar un Servidor de FTP
    Anónimo.</a></li>
<li><a href="faq10.html#10.13">10.13 - Confinar a los Usuarios a Sus
    Directorios de Usuario (&quot;home&quot;) en ftpd(8).</a>
d65 3
a67 2
<h2>10.1 - ¿Por Qué Me Dice Que Estoy en el Grupo Erróneo Cuando Intento
Ingresar como Usuario root con <kbd>su(1)</kbd>?</h2>
d72 6
a77 6
Para que un usuario normal se pueda convertir en el superusuario root, debe
añadirlo al grupo <kbd>wheel</kbd> a mano.
Esto se hace por motivos de seguridad, y se recomienda tener cuidado con los
usuarios a los que se otorgue este acceso especial.
En OpenBSD, los usuarios que pertenezcan al grupo <kbd>wheel</kbd> podrán
usar el programa de modo usuario (&quot;userland program&quot;)
d79 5
a83 5
para convertirse en el usuario root.
Los usuarios que no pertenezcan al grupo <kbd>wheel</kbd> no podrán usar
su(1).
A continuación puede ver el ejemplo de una entrada en <kbd>/etc/group</kbd>
para asociar al usuario <strong>ericj</strong> al grupo <kbd>wheel</kbd>.
d90 3
a92 2
Esto añadirá al usuario en la línea del grupo <kbd>wheel</kbd>, en el fichero
/etc/group, que quedará del siguiente modo:
d102 2
a103 2
Si lo que busca un modo de permitir a los usuarios acceso limitado a los 
privilegios del superusuario, sin tener que asociarlos al grupo
d110 2
a111 1
<h2>10.2 - ¿Cómo Puedo Duplicar un Sistema de Archivo?</h2>
d119 2
a120 2
Por ejemplo, para duplicar todo en el directorio <kbd>SRC</kbd> al directorio
<kbd>DST</kbd>, haga lo siguiente:
d130 4
a133 4
<kbd>dump</kbd> está diseñado para ofrecer una gran variedad de posibilidades
para copias de respaldo/seguridad, y puede resultar excesivo si sólo quiere
duplicar un único sistema de archivo o parte de él.
La orden
d135 2
a136 2
puede resultar más rápida para una operación de este tipo.
El formato es muy parecido:
d146 1
a146 1
<h2>10.3 - ¿Cómo Inicio los D&aelig;mons con el Sistema?
d157 1
a157 1
   <li>/etc/rc - Guión (&quot;script&quot;) principal.
d159 4
a162 3
   <li>/etc/rc.conf - Fichero de configuración usado por <i>/etc/rc</i> para
       saber qué d&aelig;mons debe iniciar con el sistema.
   <li>/etc/netstart - Guión usado para iniciar la red.
d164 9
a172 7
   <li>/etc/rc.local - Guión usado para tareas de administración local.
       Aquí se debe almacenar información específica de la máquina anfitriona
       o de los d&aelig;mons.
   <li>/etc/rc.securelevel - Guión para ejecutar las órdenes que deben ser
       invocadas antes de los cambios en el nivel de seguridad.
       Vea <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=init&sektion=8&format=html">init(8)</a>.
   <li>/etc/rc.shutdown - Guión invocado por 
d174 2
a175 3
       Añada en este fichero cualquier cosa que quiera hacer antes de cerrar 
       el sistema.
       Ver también
d179 1
a179 1
<h3>Cómo funciona rc(8)?</h3>
d182 4
a185 3
Los ficheros más importantes para un administrador de sitemas son
<i>/etc/rc.conf</i>, <i>/etc/rc.local</i> y <i>/etc/rc.shutdown</i>.
Para que se pueda hacer una idea sobre cómo funciona el procedimiento de
d190 8
a197 5
<ul>Después de arrancar el núcleo del sistema, se inicia <i>/etc/rc</i>.
   <li>Comprueba los sistemas de archivo (&quot;filesystems&quot;).
       Este paso se omitirá en caso de que exista fichero /etc/fastboot, pero
       no es conveniente hacerlo de este modo.
   <li>Lee las variables de configuración de <i>/etc/rc.conf</i>.
d204 2
a205 1
	 <li>Configura &quot;hostname&quot;, &quot;domainname&quot;, etc.
d217 7
a223 6
La mayoría de d&aelig;mons y servicios que vienen predefinidos con OpenBSD
pueden iniciarse con el arranque, editando el fichero de configuración
<i>/etc/rc.conf</i>.
Un ejemplo lo puede encontrar en el fichero
<a href="http://www.openbsd.org/cgi-bin/cvsweb/src/etc/rc.conf">/etc/rc.conf</a> que viene por definición con el sistema,
en donde verá líneas parecidas a la siguiente:
d234 9
a242 8
Una línea como ésta nos indica que ftpd no se inicia con el sistema (al menos
no mediante <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&apropos=0&sektion=8&manpath=OpenBSD+Current&format=html">rc(8)</a>;  lea la
<a href="#10.12">sección sobre FTP Anónimo</a> para más información al
respecto).
En cualquier caso, cada línea va acompañada por un comentario que le mostrará
los indicadores para el uso <b>NORMAL</b> de ese d&aelig;mon o servicio.
Esto no significa que debe invocar el d&aelig;mon o servicio en cuestión con
esos indicadores.
d245 3
a247 3
para ver cómo puede iniciar de cualquier otro modo que prefiera ese
d&aelig;mon o servicio.
Por ejemplo, vea la línea predefinida para la entrada para
d258 12
a269 6
Aquí puede ver con claridad que no es necesario ningún indicador para iniciar
httpd.
Por lo tanto, sólo será necesaria una línea como:
&quot;<b>httpd_flags=&quot;&quot;</b>&quot;.
Pero para iniciar httpd con ssl (lea la <a href="#10.6">sección sobre SSL</a>
o la página de manual de
d271 7
a277 1
necesitará una línea como: &quot;httpd_flags=&quot;"-DSSL&quot;&quot;.
d280 1
a280 1
<h3>Inicio y configuración de d&aelig;mons locales</h3>
d283 6
a288 6
Para instalar otros d&aelig;mons en el sistema por medio de los portes o
cualquier otro medio, debe usar el fichero <i>/etc/rc.local</i>.
Por ejemplo, supongamos que se ha instalado un d&aelig;mon que se encuentre 
en /usr/local/sbin/daemonx, y que se desea iniciar durante el arranque del
sistema.
Para ello pondría una entrada como la siguiente en <i>/etc/rc.local</i>:
d300 4
a303 3
Desde este momento, el d&aelig;mon será invocado durante el arranque.
También podrá ver cualquier error durante el arranque;  un arranque normal
sin errores sólo mostraría una línea como ésta:
d315 5
a319 6
<i>/etc/rc.shutdown</i> es un guión (&quot;script&quot;) que se invoca al
cerrar el sistema.
Cualquier cosa que quiera hacer antes de que se cierre el sistema, la debe
añadir a este fichero.
Si tiene apm, también puede configurar &quot;powerdown=YES&quot;, que le dará
un resultado equivalente a &quot;shutdown -p&quot;.
d324 3
a326 2
<h2>10.4 - ¿Por Qué Cuando los Usuarios Envían Correo a través de Mi 
Sistema OpenBSD les Niega el Acceso de Reenvío?</h2>
d338 1
a338 1
La salida será parecida a ésta:
d346 2
a347 2
Si este fichero no existe, créelo.
Necesitará introducir los huéspedes que estén enviando correo de forma remota
d352 6
a357 5
.domain.com    #Permitir reenvío para/a cualquier huésped en domain.com
sub.domain.com #Permitir reenvío para/a sub.domain.com y cualquier
               #huésped en ese dominio
10.2           #Permitir reenvío desde todos los huéspedes en la red
               #IP 10.2.*.*
d361 3
a363 2
No olvide enviar una señal 'HangUP' a sendmail (una señal que hace que la
mayoría de d&aelig;mons vuelvan a leer sus ficheros de configuración):
d372 1
a372 1
<h3>Más información</h3>
d380 1
d383 2
a384 3
<h2>10.5 - He Configurado POP, pero Obtengo Errores Cuando Accedo a Mi 
Correo a través de POP.  ¿Qué Puedo Hacer?</h2>
</p>
d387 3
a389 3
La mayoría de problemas relacionados con POP tienen que ver con ficheros
temporales y ficheros de cerrojo.
Si su servidor pop envía un mensaje de error como el siguiente:
d391 1
d397 1
d399 2
a400 1
Intente configurar sus permisos así:
d411 2
d414 19
a432 18
Otra cosa que puede comprobar es que realmente el usuario sea el propietario
de su propio fichero /var/mail.
Por supuesto, esto debería ser así (como por ejemplo, el propietario de
/var/mail/joe debería ser el usuario joe), pero si no está correctamente
configurado podría ser el causante del problema.

<p>
Dejar /var/mail con permisos de escritura para el grupo mail abre algunos
problemas de seguridad.
Es probable que nunca tenga problemas con eso.
¡Pero podría tenerlos!  (especialmente si su sitio es de alto rendimiento,
como un ISP, ...)
Pruebe a invocar 'cucipop' u otro d&aelig;mon de la colección de portes de
OpenBSD.
O podría ser que tuviera seleccionadas las opciones erróneas para su
d&aelig;mon pop (como &quot;dot locking&quot;).
O también es posible que necesitara cambiar el directorio que bloquea (aunque
entonces, el bloqueo sólo sería de valor para el d&aelig;mon POP).
d437 2
a438 1
<h2>10.6 - Cómo Configurar un Servidor HTTP Seguro Usando SSL(8)</h2>
d442 12
a453 12
A partir de la versión 2.6, OpenBSD incluye un httpd preparado para SSL.
Sin embargo, debido a las distintas patentes, algunas bibliotecas no pueden
ser incluidas.
Por lo tanto, para poder usar certificados RSA, debe instalar unas 
bibliotecas extras en su sistema.
Hay dos grupos de estas bibliotecas, dependiendo de su ubicación geográfica
(<strong>NOTA:</strong> Si ha instalado por FTP o cualquier otra instalación 
por red, es más que seguro que ya las tenga instaladas en su sistema).
Aquéllos que vivan fuera de los Estados Unidos deben usar un paquete llamado
<b>ssl26.tgz</b>, mientras que aquellos otros que vivan en los Estados Unidos
deben usar el paquete <b>sslUSA26.tgz</b>.
Estos paquetes se instalan con la utilidad
d455 5
a459 4
Por ejemplo, para instalar la versión de las bibliotecas para no residentes 
en EE.UU. use la siguiente orden, en la que ${arch} es la arquitectura de su
máquina ((<strong>NOTA:</strong> No está disponible para la arquitectura
Alpha, debido a su falta de bibliotecas compartidas).
d471 3
a473 4
primero debe haber generado un certificado, que se guardará en 
<i>/etc/ssl/private/</i>.
Los pasos que aquí se muestran están tomados, en parte, de la página de
manual de
d475 2
a476 2
Para más información, lea esta página.
En estas Preguntas Frecuentes tan sólo se resalta cómo generar un
d478 2
a479 2
servidores.
Para saber cómo hacerlo, por favor lea la página de manual
d485 3
a487 3
Para usar las características de RSA, tiene que haber actualizado antes 
libssl.
Ahora ya puede generar su clave usando OpenSSL:
d497 2
a498 2
O si desea puede cifrar la clave con una contraseña que tendrá que introducir
cuando inicie los servidores:
d508 4
a511 4
El próximo paso es generar un &quot;Certificate Signing Request&quot;
(Requerimiento para Firmar el Certificado), que se usa para que una Autoridad
Certificadora (CA) firme su certificado.
Para ello use la orden:
d522 2
a523 2
Certificadora que firmará la clave.
Una de estas CAs es <b>Thawte Certification</b>, y la puede localizar en
d525 2
a526 2
Actualmente Thawte puede firmar sus claves RSA.
Está en marcha un procedimiento para poder firmar las claves DSA.
d530 2
a531 2
Si no se lo puede permitir, o si quiere firmar Vd. mismo el certificado, 
puede usar lo siguiente:
d542 2
a543 2
Con <i>/etc/ssl/server.crt</i> y <i>/etc/ssl/private/server.key</i> en su
sitio, ya puede iniciar
d545 2
a546 2
con el indicador <b>-DSSL</b>, permitiendo transacciones https con su máquina
en el puerto 443.
d551 2
a552 2
<h2>10.7 - He Hecho Cambios a /etc/passwd, pero los Cambios No Funcionan.
¿Por Qué?</h2>
d556 7
a562 5
Si edita /etc/passwd, cualquier cambio que haga se perderá.
OpenBSD genera el fichero /etc/passwd de forma dinámica con
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pwd_mkdb&sektion=8&apropos=0">pwd_mkdb(8)</a>.
El fichero principal de las contraseñas en OpenBSD es /etc/master.passwd.
Según la página de manual de pwd_mkdb(8),
d567 8
a574 6
     /etc/master.passwd  current password file
     /etc/passwd         a Version 7 format password file
     /etc/pwd.db         insecure password database file
     /etc/pwd.db.tmp     temporary file
     /etc/spwd.db        secure password database file
     /etc/spwd.db.tmp    temporary file
d579 3
a581 2
En un fichero de contraseñas tradicional de Unix, como /etc/passwd, toda la
información, incluida la contraseña cifrada del usuario, está disponible para
d583 7
a589 6
programas como Crack).
4.4BSD introdujo el fichero master.passwd, que tiene un formato extendido
(con opciones adicionales que van más allá de las ofrecidas por /etc/passwd),
y sólo puede ser leido por root.
Para un acceso más rápido a los datos, las llamadas de las bibliotecas que
acceden a estos datos leen los ficheros /etc/pwd.db y /etc/spwd.db.
d592 2
a593 2
OpenBSD viene con una herramienta para la edición de su fichero de
contraseña,
d598 6
a603 6
/etc/master.passwd.
Una vez haya terminado de editar, vuelve a crear los ficheros /etc/passwd,
/etc/pwd.db, y /etc/spwd.db conforme con los cambios que haya llevado a cabo.
Vipw también se encarga de bloquear estos ficheros, de modo que si alguna
otra persona intentara cambiarlos al mismo tiempo, le no le permitiría el
acceso.
d608 2
a609 1
<h2>10.8 - &iexcl;C&oacute;mo A&ntilde;ado un Usuario?  &iexcl;C&oacute;mo Elimino un Usuario?</h2>
d615 2
a616 2
para a&ntilde;adir usuarios.
A partir de OpenBSD 2.7, se ha a&ntilde;adido la orden
d631 2
a632 2
<strong>/etc/adduser.conf</strong>.  Puede a&ntilde;adir usuarios de
forma manual, mediante
d634 1
a634 1
pero adduser(8) es el modo en que se recomienda hacerlo.
d636 7
a642 7
los ficheros <strong>/etc/passwd</strong> y
<strong>/etc/group</strong>, y sobre las bases de datos de la shell.
Tambi&eacute;n generar&aacute; por Vd. las entradas correspondientes y
directorios $HOME.  Incluso puede enviar un mensaje de bienvenida al
usuario.  Todo esto se puede modificar seg&uacute;n se desee.  Puede
leer m&aacute;s informaci&oacute;n sobre c&oacute;mo a&ntilde;adir
usuarios en la p&aacute;gina de manual
d699 1
a699 1
<strong>/etc/passwd</strong> y <strong>/etc/group</strong>.
d734 1
a734 1
(&quot;script&quot;).
d766 5
a770 4
<a href="#adduser">ejemplos anteriores</a>.  useradd(8) es m&aacute;s
f&aacute;cil de usar si conoce la configuraci&oacute;n predefinida
antes de crear el usuario.  Estas configuraciones se encuentran en el
fichero <i>/etc/usermgmt.conf</i>, y se pueden ver del siguiente modo:
d906 2
a907 1
<h2>10.9 - &iquest;C&oacute;mo Puedo Crear una Cuenta S&oacute;lo FTP (no FTP An&oacute;nimo)?</h2>
d914 2
a915 1
configure su shell como <i>/bin/false</i> y de este modo no
d919 1
a919 1
definici&oacute;n, /home/&lt;usuario&gt;.
d927 2
a928 2
puede restringir los ingresos para que s&oacute;lo sean posibles por
ftpchroot.
d933 1
a933 1
<h2>10.10 - Configurar Cuotas</h2>
d937 4
a940 5
Las cuotas se usan para limitar el espacio del que disponen los usuarios en
sus discos.
Puede ser muy útil en situaciones en las que Vd. disponga de recursos
limitados.
Las cuotas se pueden configurar de dos maneras diferentes:
d965 2
a966 2
He aqu&iacute; un ejemplo de /etc/fstab con un sistema de archivo con
cuotas de usuario activadas:
d980 2
a981 2
edquota(8) usará vi(1) para editar las cuotas a menos que la variable de
entorno EDITOR indique un editor diferente.
d992 1
a992 1
Esto dará un resultado parecido al siguiente:
d1004 1
a1004 1
Para añadir límites, debe quedar algo como esto:
d1016 10
a1025 10
Aquí el límite &quot;soft&quot; es de 1.000 bloques, y el límite
&quot;hard&quot; de 1.050 bloques.
El límite &quot;soft&quot; es en el que el usuario sólo recibe un aviso
cuando lo sobrepasa, y tiene hasta su periodo de gracia para rebajar su uso
del disco por debajo de su límite.
Los periodos de gracia se pueden configurar usando la opción
<strong>-t</strong> con la orden edquota(8).
Después de que el periodo de gracia haya pasado, el límite &quot;soft&quot;
se toma como límite &quot;hard&quot;.
El resultado es un fallo de ubicación (&quot;allocation failure&quot;).
d1029 2
a1030 2
Una vez que las cuotas ya están configuradas, tiene que activarlas.
Para ello use
d1042 3
a1044 3
Esto repasará /etc/fstab para activar los sistemas de archivo con opciones de
cuota.
En cuanto las cuotas estén funcionando, puede verlas con
d1046 4
a1049 5
Si usa la orden <strong>quota &lt;usuario&gt;</strong> obtendrá la
información sobre el usuario que especifique.
Al ser invocada sin argumentos, la orden quota(8) le dará sus estadísticas de
cuotas.
Por ejemplo:
d1059 1
a1059 1
Dará como resultado algo como esto:
d1071 3
a1073 3
Las cuotas que estén configuradas en /etc/fstab iniciarán durante el arranque
por definición.
Para desactivarlo use:
d1083 2
a1084 1
<h2>10.11 - Cómo Configurar Clientes y Servidores Kerberos en OpenBSD</h2>
d1089 3
a1091 2
KerberosIV es un componente preinstalado del sistema.
Ésta es una guía para configurar el servidor Kerberos así como el cliente.
d1095 5
a1099 4
Un punto *IMPORTANTÍSIMO* a recordar es que los clientes y servidores 
Kerberos deben tener sincronizados sus relojes del sistemas.
Si existe un lapsus de más de 5 minutos, recibirá errores extraños que no le
revelarán que han sido causados por un lapsus de tiempo, como:
d1108 1
a1108 1
Otro error más exacto es:
d1117 3
a1119 3
Una forma fácil para sincronizar los relojes del sistema es con xntpd,
disponible desde el árbol de portes en
<strong>/usr/ports/sysutils/xntpd/</strong>.
d1122 3
a1124 3
Este documento asume que tiene unos conocimientos anterior de los conceptos
detrás de Kerberos.
Para una buena referencia, simple de entender, lea:
d1136 2
a1137 1
<h3>Cómo configurar el servidor y el campo de acción de Kerberos IV</h3>
d1140 1
a1140 1
Configuraremos el campo de acción de CIARASYSTEMS.COM con
d1145 4
a1148 4
Para empezar, tendremos que editar nuestros ficheros de configuración.
Estos ficheros están ubicados en <tt>/etc/kerberosIV/</tt>.
Los dos ficheros que nos interesan son <i>krb.realms</i> y <i>krb.conf</i>.
Empecemos con <i>krb.conf</i>.
d1160 5
a1164 5
Como puede ver, esto indica a kerberos que el dominio es CIARASYSTEMS.COM (o
campo de acción lógico) y que dentro de ese dominio, avalanche es el servidor
de administración.
A continuación veremos <i>krb.realms</i>.
Para más información lea la página de manual de
d1177 9
a1185 8
krb.realms provee una traducción del nombre del huésped al nombre del campo 
de acción de Kerberos para los servicios provistos por ese huésped.
Cada línea del fichero de traducción es de una de las siguientes formas (el
nombre del dominio debería ser del tipo .XXX.YYY).
Así, en este ejemplo, avalanche es el nombre de huésped de una máquina en el
campo de acción CIARASYSTEMS.COM, y .ciarasystems.com es el nombre del
dominio en el campo de acción CIARASYSTEMS.COM.
Para más información lea la página de manual de
d1190 1
a1190 1
A continuación ejecutaremos
d1211 3
a1213 2
que se utiliza para guardar clave maestra de la base de datos, del centro de
distribución de claves (KDC), en el fichero de caché de la clave maestra.
d1227 2
a1228 2
De este modo se guarda la contraseña maestra cifrada en
/etc/kerberosIV/master_key.
d1231 10
a1240 10
A continuación necesitaremos añadir a la base de datos dos 
&quot;principal&quot; por cada uno de los sistemas que será asegurado 
con Kerberos.
Sus nombres son <i>kpasswd</i> y <i>rcmd</i>.
Estos dos &quot;principal&quot; se harán para cada sistema, siendo
&quot;instance&quot; el nombre de cada sistema.

Estos d&aelig;mons, <i>kpasswd</i> y <i>rcmd</i>, permiten que otros sistemas
cambien las contraseñas de Kerberos y ejecuten órdenes como <i>rcp</i>,
<i>rlogin</i> y <i>rsh</i>.
d1261 1
a1261 1
New Password:            <strong>&lt;----- Use 'RANDOM' como contraseña</strong>
d1279 1
a1279 1
New Password:            <strong>&lt;----- Use 'RANDOM' como contraseña</strong>
d1296 6
a1301 5
Un fichero srvtab es fichero de la clave de servicio.
Éstas deben extraerse de la base de datos del centro de distribución de
claves de Kerberos para que los servicions autentiquen usando Kerberos.
Por cada uno de los nombres de huésped (&quot;hostname&quot;) especificados
en la línea de órdenes,
d1303 3
a1305 3
genera el fichero de la clave de servicio hostname-new-srvtab, que contiene
todas las entradas en la base de datos con un campo &quot;instance&quot; del
nombre del huésped.
d1325 1
a1325 1
Ahora podemos añadir usuarios a nuestra base de datos.
d1347 1
a1347 1
New Password:                &lt;---- introduzca una contraseña segura aquí
d1350 1
a1350 1
New Password:                &lt;---- vuelva a introducir la contraseña
d1356 1
a1356 1
Principal name:          &lt;---- una entrada vacía aquí causará que salga
d1361 4
a1364 3
Ahora ya están configurados todos los &quot;particular&quot;.
Todo lo que queda por hacer es activar la carga del servidor Kerberos durante
el arranque y activar los d&aelig;mons &laquo;kerberizados&raquo;.
d1368 1
a1368 1
Escriba en /etc/rc.conf:
d1374 2
a1375 2
y en /etc/inetd.conf active las siguientes líneas (quitando el signo del
comentario):
d1398 6
a1403 6
Nota: ésta es una configuración del servidor bastante simple.
Generalmente se configuran servidores redundantes (y servidores esclavos)
para que si un servidor cayera, todos los servicios que dependen de Kerberos
se mantuvieran.
También podemos añadir privilegios de 'su' a un &quot;principal&quot;
específico;  vea el
d1405 1
a1405 1
Handbook</a> para más información.
d1408 2
a1409 1
<h3>Cómo &laquo;kerberizar&raquo; una estación de trabajo cliente</h3>
d1412 3
a1414 3
Configuraremos la estación de trabajo llamada <i>gatekeeper</i> para que esté
en el campo de acción de CIARASYSTEMS.COM, con avalanche.ciarasystems.com
como el servidor principal.
d1419 4
a1422 4
<i>krb.realms</i> como para la máquina anterior.
Esto es para que <i>gatekeeper</i> sepa qué servidor es el KDC y en qué
dominio se encuentra.
He aquí el contenido de los ficheros:
d1438 2
a1439 2
Eso ha sido la configuración, ahora necesitamos iniciar kerberos.
Para obtener un ticket usaremos
d1454 2
a1455 2
Ahora que nos hemos identificado, podemos ver una lista de nuestros tickets
con
d1471 2
a1472 3
Parece que ya está todo.
Lo único que queda por hacer es probarlo.
En los siguientes ejemplos lo probaremos con
d1505 3
a1507 2
Se ve claro que está usando Kerberos para autenticar la sesión de rlogin.
Para eliminar los tickets de la sesión usaremos
d1525 7
a1531 7
Esto es debido a que sólo estamos haciendo autenticación con kerberos, no
pases de tickets.
Si quiere pases de tickets, use
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1&format=html">OpenSSH</a> que tiene soporte para ello.
KerberosIV de serie tampoco tiene soporte para pases tgt, sólo la
implementación de krb4 de kaserver AFS, ya que KerberosIV normal comprueba
con kdc las direcciones IP de los clientes en la lista del ticket.
d1536 1
a1536 1
<h2>10.12 - Configurar Servicios de FTP Anónimo</h2>
d1540 6
a1545 5
FTP Anónimo permite a los usuarios que carecen de cuentas en el sistema,
acceder a ficheros en su máquina mediante el &laquo;Protocolo de
Transferencia de Ficheros&raquo; (FTP, &quot;File Transfer Protocol&quot;).
Esta sección ofrece un resumen sobre cómo configurar el servidor de ftp
anónimo, su ingreso, etc...
d1548 1
a1548 1
<h3>Añadir la cuenta de FTP</h3>
d1552 6
a1557 6
Esta cuenta no debe tener una contraseña utilizable.
Aquí configuraremos el directorio de ingreso como /home/ftp, pero puede
ponerlos donde quiera que desee.
Cuando use ftp anónimo, el d&aelig;mon de ftp ejecutará chroot sobre sí 
mismo para cambiar la directorio del usuario de ftp.
Puede leer más sobre esto en las páginas de manual de
d1560 2
a1561 2
He aquí un ejemplo sobre cómo añadir el usuario <i>ftp</i>.
Para ello usaremos
d1563 5
a1567 5
También necesitamos añadir /bin/false a nuestro fichero <i>/etc/shells</i>,
que será la &quot;shell&quot; que configuraremos para el usuario ftp.
Así no tendrán permiso para ingresar, aunque les daremos una contraseña
vacía.
Para ello puede hacer simplemente lo siguiente:
d1570 1
a1570 1
echo /bin/false &gt;&gt; /etc/shells
d1573 3
a1575 2
También, si quiere que esa shell se muestre durante las preguntas de la orden
adduser, necesita modificar <i>/etc/adduser.conf</i>.
d1615 1
a1615 1
<h3>Configuración del directorio</h3>
d1618 4
a1621 4
Además del usuario, ha creado el directorio <i>/home/ftp</i>.
Es lo que queremos, pero hay algunos cambios que tendremos que hacer para
tenerlo preparado para ftp anónimo.
Estos cambios se explican en la página de manual de
d1626 2
a1627 1
<b>No</b> necesita crear un directorio /home/ftp/usr o /home/ftp/bin.<br>
d1629 16
a1644 20
<li><i>/home/ftp</i> - Es el directorio principal.
		       Su propietario debe ser root, y los permisos deben ser
		       555.</li>
<li><i>/home/ftp/etc</i> - Es totalmente opcional y no se recomienda, ya que
			   sólo sirve para dar información sobre los usuarios
			   existentes en un sistema.
			   Si quiere que parezca que su directorio de ftp
			   anónimo contiene usuarios reales adjuntos a sus
			   ficheros, debería copiar /etc/pwd.db y /etc/group
			   a este directorio.
			   Este directorio debería ser de modo 511, y los dos
			   ficheros de modo 444.
			   Éstos se usan para dar al propietario nombres en
			   lugar de números.
			   No existen contraseñas almacenadas en pwd.db, ya
			   que están todas en spwd.db, así que no las copie
			   ahí.</li>
<li><i>/home/ftp/pub</i> - Éste es el directorio estándar para ubicar los
			   ficheros que quiera compartir.
			   Este directorio también debería ser de modo 555.
d1648 3
a1650 3
Note que el propietario de todos estos directorios debería ser ''root''.
He aquí una lista de cómo deberían ser los directorios después de ser
creados:
d1684 1
a1684 1
o lo pueden iniciar los guiones de configuración de
d1686 2
a1687 1
En estos ejemplos se verá cómo se inicia nuestro d&aelig;mon desde
d1690 1
a1690 1
La línea por definición de <i>/etc/inetd.conf</i> es:
d1702 4
a1705 4
En este caso ftpd se invoca con <i>-US</i>.
Así se grabarán las conexiones anónimas a <i>/var/log/ftpd</i>, y las
sesiones concurrentes a <i>/var/run/utmp</i>.
De este modo, podremos ver estas sesiones con la orden
d1707 6
a1712 6
Es posible que algunos sólo quisieran tener un servidor anónimo, y desactivar
ftp para usuarios.
Para ello debe invocar ftpd con la opción <i>-A</i>.
He aquí una línea que inicia ftpd para conexiones anónimas sólo.
También usa <i>-ll</i> para grabar cada conexión a syslog, junto con las
órdenes de ftp 'get', 'retrieve', etc.
d1724 8
a1731 7
Nota:  Para aquéllos que usen servidores de ftp de MUCHO tráfico, es
conveniente que no invoquen ftpd desde inetd.conf.
La mejor opción es comentar la línea de ftpd de inetd.conf e iniciar ftpd
desde rc.conf junto con la opción <i>-D</i>.
De este modo iniciarán ftpd como un d&aelig;mon, y será más simple que
iniciarlo desde inetd.
A continuación viene un ejemplo de cómo iniciarlo desde rc.conf:
d1741 2
a1742 1
Esto sólo funcionará si ha desactivado ftpd en <i>/etc/inetd.conf</i>.
d1749 4
a1752 4
   <li><i>/etc/ftpwelcome</i> - Contiene el mensaje de bienvenida que verán
                                al conectar con su servidor ftp.</li>
   <li><i>/etc/motd</i> - Contiene el mensaje que verán después de haber
                          ingresado en su servidor ftp.</li>
d1754 2
a1755 2
                         directorio, y cuando alguien entre en ese
			 directorio, verá el mensaje que contiene.</li>
d1761 1
a1761 1
<h2>10.13 - Confinar a los Usuarios a Sus Directorios de Usuario 
d1768 7
a1774 6
está configurado por definición para poder gestionar esto de modo muy fácil.
Se hace por medio del fichero <strong>/etc/ftpchroot</strong>.
Como los usuarios no son siempre fiables, puede ser necesario restringir su
entrada en otros directorios que no sean el propio.
Esto NO está activado por definición.
He aquí un ejemplo de cómo responde por definición:
d1825 6
a1830 6
Como puede ver, el acceso está permitido para todo el servidor.
En un mundo perfecto esto debería ser así, deberíamos poder fiarnos de todos
los usuarios, pero no es así.
Para limitar un usuario, añada su nombre al fichero
<strong>/etc/ftpchroot</strong>.
He aquí un ejemplo que muestra cómo restringir al usuario &quot;ericj&quot;:
d1836 1
a1836 1
#       $OpenBSD: faq10.html,v 1.46 2000/07/03 15:22:53 ericj Exp $
d1845 4
a1848 4
Esto es suficiente para evitar que el usuario &quot;ericj&quot; se escape de
su propio directorio.
Como puede ver en el siguiente ejemplo, el directorio / ha cambiado de
repente a su directorio de usuario.
d1884 3
a1886 3
<a href="index.html">[Volver al Índice Principal]</a>
<a href="faq9.html">[Sección 9.0 - Consejos para Usuarios de Linux]</a>
<a href="faq11.html">[Sección 11.0 - Afinar el Rendimiento]</a>
d1895 2
a1896 2
Originally [OpenBSD: faq10.html,v 1.46 2000/07/03 15:22:53 ericj Exp ]<br>
$Translation: faq10.html,v 1.7 2000/07/07 00:37:49 horacio Exp $<br>
@


1.6
log
@
Sync with Badlands Translation CVS. Work by Horacio.
@
text
@d865 1
a865 1
a&ntilde;adir <i>/bin/false</i> en el fichero
d1778 1
a1778 1
#       $OpenBSD: faq10.html,v 1.45 2000/06/14 00:56:26 miod Exp $
d1837 2
a1838 2
Originally [OpenBSD: faq10.html,v 1.45 2000/06/14 00:56:26 miod Exp ]<br>
$Translation: faq10.html,v 1.6 2000/06/14 22:14:57 horacio Exp $<br>
@


1.5
log
@
Sync with Badlands Translation CVS. Work by Horacio.
@
text
@d1778 1
a1778 1
#       $OpenBSD: faq10.html,v 1.44 2000/05/17 23:50:40 reinhard Exp $
d1837 2
a1838 2
Originally [OpenBSD: faq10.html,v 1.44 2000/05/17 23:50:40 reinhard Exp ]<br>
$Translation: faq10.html,v 1.5 2000/05/21 17:52:43 horacio Exp $<br>
@


1.4
log
@
Sync with Badlands Translation CVS. Work by Horacio
@
text
@d305 1
a305 1
# <strong>cat /etc/sendmail.cf | grep relay-domains</strong>
d1778 1
d1837 2
a1838 2
Originally [OpenBSD: faq10.html,v 1.43 2000/05/12 19:39:56 ericj Exp ]<br>
$Translation: faq10.html,v 1.4 2000/05/15 23:44:28 horacio Exp $<br>
@


1.3
log
@Sync with Badlands Translation CVS. Work by Horacio.
@
text
@d564 1
a564 1
<h2>10.8 - ¿Cómo Añado un Usuario?  ¿Cómo Elimino un Usuario?</h2>
d568 16
a583 1
En OpenBSD, la mejor manera para añadir un usuario es usando el guión
d586 12
a597 10
<strong>/etc/adduser.conf</strong>.
También puede añadir usuarios a mano, pero adduser(8) es el modo en que se
recomienda hacerlo.
adduser(8) permite llevar a cabo comprobaciones de consistencia sobre los
ficheros <strong>/etc/passwd</strong> y <strong>/etc/group</strong>, y sobre
las bases de datos de la shell.
También generará para Vd. las entradas correspondientes y directorios HOME.
Incluso puede enviar un mensaje de bienvenida al usuario.
Todo esto se puede modificar según se desee.
Puede leer más información sobre cómo añadir usuarios en la página de manual
d602 44
d648 208
a855 7
Esto eliminará todo vestigio de un usuario.
Eliminará cualquier entrada en
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=crontab&apropos=0&sektion=1&manpath=OpenBSD+Current&format=html">crontab(1)</a>
relacionada con el usuario, su directorio HOME (siempre que el propietario de
éste sea el usuario en cuestión), y su correo.
También eliminará sus entradas en los ficheros <strong>/etc/passwd</strong> y
<strong>/etc/group</strong>.
d860 1
a860 1
<h2>10.9 - ¿Cómo Puedo Crear una Cuenta Sólo FTP (no FTP Anónimo)?</h2>
d864 17
a880 12
Existen varios modos de hacerlo, pero una manera muy común es añadir
/bin/false en el fichero <strong>/etc/shells</strong>.
Así, cuando cree el usuario, configure su shell como /bin/false y de este
modo no podrá ingresar de forma interactiva, pero podrá usar ftp.
adduser(8) le dará un directorio HOME que será, por definición,
/home/&lt;usuario&gt;.
Si le parece bien de esta forma, no necesita cambiarlo;  sin embargo, puede
configurarlo a cualquier otro directorio que Vd. desee.
Puede forzar que el usuario sólo pueda ver los ficheros en su directorio
HOME, añadiendo su nombre de usuario al fichero /etc/ftpchroot.
Mediante el uso de la opción -A para ftpd, puede restringir los ingresos para
que sólo sean posibles por ftpchroot.
d904 16
a919 15
El primer paso para configurar cuotas es asegurarse de que la opción
<tt>QUOTA</tt> se encuentra activada en la configuración del núcleo de su
sistema.
Después necesita marcar los sistemas de archivo para los que vaya a
configurar las cuotas en /etc/fstab.
Debe usar las palabras clave <tt>userquota</tt> y <tt>groupquota</tt> para
marcar cada sistema de archivo en el que usará las cuotas.
Por definición, los ficheros <tt>quota.user</tt> y <tt>quota.group</tt> se
crearán en la raíz de ese sistema de archivo que tendrá la información sobre
las cuotas.
Esto se puede anular con la siguiente orden:
<code>userquota=/var/quotas/quota.user</code> ... o cualquier otro fichero en
el que quiera almacenar la información sobre cuotas.
He aquí un ejemplo de /etc/fstab con un sistema de archivo con cuotas de
usuario activadas:
d1836 2
a1837 2
Originally [OpenBSD: faq10.html,v 1.40 2000/03/25 00:05:04 wvdputte Exp ]<br>
$Translation: faq10.html,v 1.3 2000/04/29 17:58:05 horacio Exp $<br>
@


1.2
log
@Sync with Badlands CVS. Work by Horacio
@
text
@d9 1
a9 1
<meta name="copyright"     content="This document copyright 1998,1999 by OpenBSD.">
d1564 1
a1564 1
<a href="index.html"><img height="24" width="24" src="../../images/back.gif" border="0" alt="[back]"></a>
d1569 1
a1569 1
$Translation: faq10.html,v 1.2 2000/04/20 16:41:05 horacio Exp $<br>
@


1.1
log
@Sync with Badlands Translation CVS. Work by Horacio
@
text
@d1204 1
a1204 1
Si quiere pases de tickest, use
d1569 1
a1569 1
$Translation: faq10.html,v 1.1 2000/04/18 21:47:34 horacio Exp $<br>
@

