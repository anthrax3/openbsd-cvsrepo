head	1.54;
access;
symbols;
locks; strict;
comment	@# @;


1.54
date	2014.04.01.17.03.08;	author nick;	state dead;
branches;
next	1.53;

1.53
date	2009.06.29.17.19.48;	author ajacoutot;	state Exp;
branches;
next	1.52;

1.52
date	2004.01.04.22.23.56;	author horacio;	state Exp;
branches;
next	1.51;

1.51
date	2004.01.01.23.30.28;	author horacio;	state Exp;
branches;
next	1.50;

1.50
date	2003.10.26.22.50.13;	author horacio;	state Exp;
branches;
next	1.49;

1.49
date	2003.10.10.18.39.47;	author horacio;	state Exp;
branches;
next	1.48;

1.48
date	2003.09.02.14.53.22;	author jufi;	state Exp;
branches;
next	1.47;

1.47
date	2003.08.16.20.06.05;	author jufi;	state Exp;
branches;
next	1.46;

1.46
date	2003.07.27.15.30.08;	author jufi;	state Exp;
branches;
next	1.45;

1.45
date	2003.07.20.14.13.28;	author jufi;	state Exp;
branches;
next	1.44;

1.44
date	2003.07.04.22.42.27;	author jufi;	state Exp;
branches;
next	1.43;

1.43
date	2003.06.27.20.55.49;	author jufi;	state Exp;
branches;
next	1.42;

1.42
date	2003.05.01.20.47.29;	author jufi;	state Exp;
branches;
next	1.41;

1.41
date	2003.04.07.22.04.57;	author jufi;	state Exp;
branches;
next	1.40;

1.40
date	2003.03.19.19.00.47;	author jufi;	state Exp;
branches;
next	1.39;

1.39
date	2003.03.14.09.47.04;	author jufi;	state Exp;
branches;
next	1.38;

1.38
date	2003.03.01.18.08.38;	author jufi;	state Exp;
branches;
next	1.37;

1.37
date	2003.02.25.20.13.04;	author jufi;	state Exp;
branches;
next	1.36;

1.36
date	2003.01.06.22.01.41;	author jufi;	state Exp;
branches;
next	1.35;

1.35
date	2002.12.31.22.40.58;	author jufi;	state Exp;
branches;
next	1.34;

1.34
date	2002.12.14.23.51.58;	author jufi;	state Exp;
branches;
next	1.33;

1.33
date	2002.10.06.16.32.32;	author jufi;	state Exp;
branches;
next	1.32;

1.32
date	2002.10.03.09.39.40;	author jufi;	state Exp;
branches;
next	1.31;

1.31
date	2002.07.14.12.24.28;	author jufi;	state Exp;
branches;
next	1.30;

1.30
date	2002.07.05.07.30.01;	author jufi;	state Exp;
branches;
next	1.29;

1.29
date	2002.06.17.21.40.24;	author jufi;	state Exp;
branches;
next	1.28;

1.28
date	2002.06.10.19.07.38;	author jufi;	state Exp;
branches;
next	1.27;

1.27
date	2002.05.22.17.49.47;	author jufi;	state Exp;
branches;
next	1.26;

1.26
date	2002.05.08.11.04.19;	author jufi;	state Exp;
branches;
next	1.25;

1.25
date	2002.05.01.08.53.29;	author jufi;	state Exp;
branches;
next	1.24;

1.24
date	2002.03.30.11.49.55;	author jufi;	state Exp;
branches;
next	1.23;

1.23
date	2002.03.20.20.40.01;	author jufi;	state Exp;
branches;
next	1.22;

1.22
date	2002.02.23.17.35.42;	author jufi;	state Exp;
branches;
next	1.21;

1.21
date	2002.01.28.19.21.45;	author jufi;	state Exp;
branches;
next	1.20;

1.20
date	2002.01.26.11.46.28;	author jufi;	state Exp;
branches;
next	1.19;

1.19
date	2002.01.19.09.12.50;	author jufi;	state Exp;
branches;
next	1.18;

1.18
date	2001.12.31.10.55.47;	author jufi;	state Exp;
branches;
next	1.17;

1.17
date	2001.12.07.07.37.05;	author jufi;	state Exp;
branches;
next	1.16;

1.16
date	2001.12.07.07.30.16;	author jufi;	state Exp;
branches;
next	1.15;

1.15
date	2001.11.05.21.17.05;	author jufi;	state Exp;
branches;
next	1.14;

1.14
date	2001.10.24.18.54.47;	author jufi;	state Exp;
branches;
next	1.13;

1.13
date	2001.10.21.09.15.45;	author jufi;	state Exp;
branches;
next	1.12;

1.12
date	2001.09.20.05.08.52;	author jufi;	state Exp;
branches;
next	1.11;

1.11
date	2001.06.10.08.28.19;	author jufi;	state Exp;
branches;
next	1.10;

1.10
date	2001.05.08.18.22.39;	author jufi;	state Exp;
branches;
next	1.9;

1.9
date	2001.05.07.05.56.56;	author jufi;	state Exp;
branches;
next	1.8;

1.8
date	2001.05.05.18.13.06;	author jufi;	state Exp;
branches;
next	1.7;

1.7
date	2001.04.07.07.58.55;	author jufi;	state Exp;
branches;
next	1.6;

1.6
date	2001.03.09.23.16.23;	author jufi;	state Exp;
branches;
next	1.5;

1.5
date	2001.02.25.20.15.34;	author jufi;	state Exp;
branches;
next	1.4;

1.4
date	2001.01.02.17.11.52;	author jufi;	state Exp;
branches;
next	1.3;

1.3
date	2000.12.01.16.30.16;	author jufi;	state Exp;
branches;
next	1.2;

1.2
date	2000.09.29.07.00.05;	author jufi;	state Exp;
branches;
next	1.1;

1.1
date	2000.04.30.20.30.16;	author wvdputte;	state Exp;
branches;
next	;


desc
@@


1.54
log
@
Abandon translations, per deraadt@@ and ajacoutot@@.
Thanks to all those that did the translation work, and my appologies to
those who had to translate my writing!
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>14 - Configuraci&oacute;n del disco</title>
<link rev="made" href="mailto:www@@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta http-equiv="Content-Language" content="es">
<meta name="resource-type" content="documento">
<meta name="description"   content="Preguntas Frecuentes de OpenBSD">
<meta name="keywords"      content="openbsd,faq,documentación">
<meta name="distribution"  content="global">
<meta name="copyright"     content="Este documento es copyright 1998-2004 de OpenBSD.">
<style type="text/css">
  <!--
  pre { margin-left: 20px; }
  -->
</style>
</head>

<body bgcolor="#ffffff" text="#000000">
<!-- máx. 72 caracteres por línea -->

<img alt="[OpenBSD]" height="30" width="141" src="../../images/smalltitle.gif">
<p>
<font color="#0000e0">
<a href="index.html">[&Iacute;ndice de documentos]</a>
<a href="faq12.html">[Secci&oacute;n 12 - Cuestiones sobre plataformas
espec&iacute;ficas]</a>
</font>

<h1><font color="#e00000">14 - Configuraci&oacute;n del
disco</font></h1><hr>

<h3>Tabla de contenidos</h3>
<ul>
<li><a href="#disklabel">14.1 - Utilizaci&oacute;n del <i>disklabel</i>
de OpenBSD</a>
<li><a href="#fdisk">14.2 - Utilizaci&oacute;n del <i>fdisk</i> de
OpenBSD</a>
<li><a href="#NewDisk">14.3 - C&oacute;mo a&ntilde;adir discos
adicionales en OpenBSD</a>
<li><a href="#SwapFile">14.4 - C&oacute;mo usar un fichero como memoria
de intercambio (<i>swap</i></a>
<li><a href="#SoftUpdates">14.5 - &quot;Soft Updates&quot;</a>
<li><a href="#Boot386">14.6 - El proceso de arranque de OpenBSD/i386 en
detalle</a>
<li><a href="#LargeDrive">14.7 - &iquest;Qu&eacute; problemas puede
haber en OpenBSD con dispositivos de gran capacidad?</a>
<li><a href="#InstBoot">14.8 - Instalaci&oacute;n de bloques de arranque
(espec&iacute;fico de i386)</a>
<li><a href="#Backup">14.9 - C&oacute;mo prepararse para el desastre:
hacer copias de seguridad (respaldo) y restaurar desde una cinta</a>
<li><a href="#MountImage">14.10 - C&oacute;mo montar im&aacute;genes de
disco en OpenBSD.</a>
<li><a href="#pciideErr">14.11 - &iexcl;Ayuda! &iexcl; da errores con
PCIIDE!</a>
<li><a href="#RAID">14.13 - Opciones de RAID con OpenBSD</a>
</ul>
<hr>

<a name="disklabel"></a>
<a name="14.1"></a>
<h2>14.1 - C&oacute;mo usar disklabel</h2>
   
<h3>Tabla de contenidos</h3>

<ul>
<li><a href="#disklabel.1">&iquest;Qu&eacute; es disklabel?</a>
<li><a href="#disklabel.2">disklabel durante la instalaci&oacute;n de
OpenBSD</a>
<li><a href="#disklabel.3">Usos comunes de disklabel</a>
</ul>
   

<a name="disklabel.1"></a>
<h3>&iquest;Qu&eacute; es disklabel?</h3>

<p>
Antes de empezar, se recomienda leer la p&aacute;gina del manual de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>.
   
<p>
Las &laquo;clasificaciones del disco&raquo; (<i>disklabels</i>) se crean
para permitir una interfaz eficiente entre el disco y los controladores
del disco que contiene el n&uacute;cleo del sistema (<i>kernel</i>).
Estas clasificaciones contienen cierta informaci&oacute;n sobre el
disco, como la geometr&iacute;a del controlador e informaci&oacute;n
sobre los sistemas de archivos (<i>filesystems</i>).  Esta
informaci&oacute;n la utiliza el programa de arranque para cargar el
controlador y para saber en qu&eacute; parte del controlador se
encuentran los sistemas de archivos.  Las clasificaciones tambi&eacute;n
se usan en conjunto con los sistemas de archivos para crear un entorno
m&aacute;s eficiente.  Hay una documentaci&oacute;n m&aacute;s detallada
sobre disklabel en la p&aacute;gina del manual de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=5">disklabel(5)</a>.

<p>
Adem&aacute;s, el uso de disklabel ayuda a superar las limitaciones de
las arquitecturas al particionar el disco.  Por ejemplo, en i386
s&oacute;lo se puede crear cuatro particiones primarias (particiones que
puedan ver otros sistemas operativos como Windows NT o DOS).  Con
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>,
una de esas particiones primarias se usa para almacenar <b>todas</b>
nuestras particiones de OpenBSD (<i>swap</i>, <i>/</i>, <i>/usr</i>,
<i>/var</i>, ...), y todav&iacute;a nos quedar&aacute;n tres particiones
libres para otros sistemas operativos.

<p>
<a name="disklabel.2"></a>
<h3>disklabel durante la instalaci&oacute;n de OpenBSD</h3>

<p>
Una de las partes principales de la instalaci&oacute;n de OpenBSD es la
creaci&oacute;n inicial de &laquo;clasificaciones&raquo;
(<i>labels</i>).  Para los usuarios de plataformas i386, &eacute;ste es
el paso que viene justo despu&eacute;s de usar
<a href="#fdisk">fdisk(1)</a>.  Durante la instalaci&oacute;n, el
programa que se usa para crear clasificaciones separadas que contengan
los puntos de montaje separados es
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>.
Durante este proceso se puede configurar los puntos de montaje desde
dentro de disklabel, pero esto no es del todo necesario si consideramos
que m&aacute;s tarde nos pedir&aacute; que confirmemos nuestras
elecciones.  De todos modos hace que la instalaci&oacute;n sea un poco
m&aacute;s suave.

<p>
Ya que esto ocurre durante la instalaci&oacute;n, todav&iacute;a no
tendremos ninguna clasificaci&oacute;n creada y, por lo tanto, antes
debemos crearlas.  La primera clasificaci&oacute;n que tendremos que
crear es la clasificaci&oacute;n '<b>a</b>'.  Esta clasificaci&oacute;n
DEBE ser en la que se monte el sistema de archivos <b>/</b>.  Puede
verse una lista de las particiones que se recomienda crear, y sus
respectivos tama&ntilde;os recomendados, en la
<a href="faq4.html#SpaceNeeded">secci&oacute;n 4.3</a> de las preguntas
frecuentes.  Para servidores se recomienda que, como m&iacute;nimo, se
creen estas particiones separadas.  Para los usuarios de computadoras
(ordenadores) de sobremesa, ser&aacute; suficiente con crear un
s&oacute;lo punto de montaje para <b>/</b>.  Cuando se cree por primera
vez esta partici&oacute;n ra&iacute;z (clasificaci&oacute;n <b>a</b>),
hay que tener en cuenta que ser&aacute; necesario dejar ALGO de espacio
para la clasificaci&oacute;n de <i>swap</i>.  Ahora que ya hemos
explicado lo m&aacute;s b&aacute;sico, pasemos a ver un ejemplo de la
utilizaci&oacute;n de disklabel durante la instalaci&oacute;n.  En este
primer ejemplo se asume que OpenBSD va a ser el &uacute;nico sistema
operativo en la m&aacute;quina, y que se llevar&aacute; a cabo una
instalaci&oacute;n completa.

<p>
<i>N. del T.:  el texto que sigue a continuaci&oacute;n est&aacute;
traducido para el prop&oacute;sito de este documento, pero durante la
instalaci&oacute;n el texto aparecer&aacute; en ingl&eacute;s</i>

<pre>
Si se comparte el disco con otros sistemas operativos, esos sistemas
operativos deben tener una entrada de la partici&oacute;n en la BIOS
que abarque completamente el espacio que ocupen.  Hay que asegurarse
de que todos los sistemas de archivos de OpenBSD se encuentren dentro
del tama&ntilde;o especificado en la tabla de particiones de la BIOS 'A6'
(por definici&oacute;n, el editor de disklabel tratar&aacute; de forzar
esto).  Si no se est&aacute; seguro de c&oacute;mo usar correctamente
particiones m&uacute;ltiples (o sea, /, /usr, /tmp, /var, /usr/local, y
otras separadas), se puede dividir el espacio de momento en una
partici&oacute;n ra&iacute;z y otra <i>swap</i>.

# using MBR partition 3: type A6 off 63 (0x3f) size 4991553 (0x4c2a41) 

Treating sectors 63-16386300 as the OpenBSD portion of the disk.
You can use the 'b' command to change this.

Initial label editor (enter '?' for help at any prompt)
&gt; <b>d a</b>
&gt; <b>a a</b>
offset: [63] <b>&lt;Intro&gt;</b>
size: [16386237] <b>64M</b>
Rounding to nearest cylinder: 131040
FS type: [4.2BSD] <b>&lt;Intro&gt;</b>
mount point: [none] <b>/</b>
fragment size: [1024] <b>&lt;Intro&gt;</b>
block size: [8192] <b>&lt;Intro&gt;</b>
cpg: [16] <b>&lt;Intro&gt;</b>
&gt; <b>a b</b>
offset: [131103] <b>&lt;Intro&gt;</b>
size: [16255197] <b>64M</b>
Rounding to nearest cylinder: 131040
FS type: [swap] <b>&lt;Intro&gt;</b>
</pre>

<p>
Hasta este punto hemos creado una partici&oacute;n ra&iacute;z de 64MB
montada en <b>/</b>, y una partici&oacute;n <i>swap</i> de 64MB.  Note
que empieza (&quot;offset&quot;) en el sector 63.  En la parte
correspondiente al tama&ntilde;o, disklabel muestra su tama&ntilde;o en
sectores; sin embargo no es necesario introducirlos en el mismo formato.
Como en el ejemplo anterior, puede introducir los tama&ntilde;os de la
forma <i>64 Megabytes = 64M</i> y <i>2 Gigabytes = 2G</i>.  Disklabel
los redondear&aacute; hasta el cilindro m&aacute;s cercano.
Tambi&eacute;n notar&aacute; en el ejemplo anterior que disklabel asume
que la clasificaci&oacute;n '<b>b</b>' ser&aacute; <i>swap</i>.  Esto es
correcto ya que el n&uacute;cleo del sistema GENERIC est&aacute;
configurado para buscar <i>swap</i> en la clasificaci&oacute;n <b>b</b>,
y todo lo que usted debe hacer es seguir esta gu&iacute;a y usar
<b>b</b> como su &aacute;rea de <i>swap</i>.

<p>
El siguiente ejemplo le guiar&aacute; por la creaci&oacute;n de dos
clasificaciones m&aacute;s.  Esto quiere decir que no es una
instalaci&oacute;n completa, ya que el tama&ntilde;o de &eacute;stas no
ser&aacute; suficiente para instalar OpenBSD al completo.  Mostrar otra
vez la creaci&oacute;n de todas las particiones ser&iacute;a redundante.

<pre>
&gt; <b>a d</b>
offset: [262143] <b>&lt;Intro&gt;</b>
size: [16124157] <b>64M</b>
Rounding to nearest cylinder: 131040
FS type: [4.2BSD] <b>&lt;Intro&gt;</b>
mount point: [none] <b>/tmp</b>
fragment size: [1024] <b>&lt;Intro&gt;</b>
block size: [8192] <b>&lt;Intro&gt;</b>
cpg: [16] <b>&lt;Intro&gt;</b>
&gt; <b>a e</b>
offset: [393183] <b>&lt;Intro&gt;</b>
size: [15993117] <b>64M</b>
Rounding to nearest cylinder: 131040
FS type: [4.2BSD] <b>&lt;Intro&gt;</b>
mount point: [none] <b>/var</b>
fragment size: [1024] <b>&lt;Intro&gt;</b>
block size: [8192] <b>&lt;Intro&gt;</b>
cpg: [16] <b>&lt;Intro&gt;</b>
</pre>

<p>
En este ejemplo puede notar dos diferencias con el anterior.  Una, que
el inicio del sector (<i>offset</i>) lo averigua de forma
autom&aacute;tica.  Cuando haga una instalaci&oacute;n de este tipo no
tendr&aacute; que configurar los sectores.  Otra diferencia es que la
clasificaci&oacute;n '<b>c</b>' representa a todo el disco.  Por este
motivo no debe tocar la clasificaci&oacute;n <b>c</b>.

<p>
Una vez que todas las clasificaciones hayan sido creadas, todo lo
quedar&aacute; por hacer ser&aacute; grabarlas en el disco y pasar al
proceso de instalaci&oacute;n.  Para grabarlo todo y salir de disklabel
(y continuar con la instalaci&oacute;n), haga lo siguiente:

<pre>
&gt; <b>w</b>
&gt; <b>q</b>
</pre>

<p>
<b>*NOTA*</b> - Para usuarios con discos grandes.  Si la BIOS de su
equipo no tiene soporte para el tama&ntilde;o de su disco, OpenBSD
tampoco tendr&aacute; soporte para &eacute;ste.  En cualquier otro caso
OpenBSD deber&iacute;a ser capaz de tratar su disco sin problema alguno.
Si se encuentra en una situaci&oacute;n en la que la BIOS de su
m&aacute;quina no dispone de soporte para su disco, puede probar Maxtor
EZ-Drive u otro producto complementario de similares
caracter&iacute;sticas.

<p>
<a name="disklabel.3"></a>
<h3>Uso general de disklabel(8)</h3>

<p>
Una vez que est&eacute; instalado el sistema, el uso frecuente de
disklabel no deber&iacute;a ser necesario.  Pero a veces tendr&aacute;
que usarlo cuando a&ntilde;ada, elimine, o reestructure sus discos.  Una
de las primeras cosas que tendr&aacute; que hacer ser&aacute; ver su
disklabel actual.  Para ello, escriba lo siguiente:

<pre>
# <b>disklabel wd0</b> &lt;----- O cualquier dispositivo de disco que quiera ver

# using MBR partition 3: type A6 off 64 (0x40) size 16777152 (0xffffc0)
# /dev/rwd0c:
type: ESDI
disk:
label: TOSHIBA MK2720FC
flags:
bytes/sector: 512
sectors/track: 63
tracks/cylinder: 16
sectors/cylinder: 1008
cylinders: 2633
total sectors: 2654064
rpm: 3600
interleave: 1
trackskew: 0
cylinderskew: 0
headswitch: 0           # milliseconds
track-to-track seek: 0  # milliseconds
drivedata: 0 

16 partitions:
#        size   offset    fstype   [fsize bsize   cpg]
  a:  2071440    65583    4.2BSD     1024  8192    16   # (Cyl.   65*- 2120)
  b:    65520       63      swap                        # (Cyl.    0*- 65)
  c:  2654064        0    unused        0     0         # (Cyl.    0 - 2632)
  j:   512001  2137023    4.2BSD     1024  8192    16   # (Cyl. 2120*- 2627*)
</pre>

<p>
La orden anterior le permite ver el disklabel presente, y de este modo
asegurarse de que no l&iacute;a nada (algo que todos necesitamos algunas
veces).  Pero para poder hacer cambios debe usar disklabel con la
opci&oacute;n -E, de este modo:

<pre>
# <b>disklabel -E wd0</b>
</pre>

<p>
Esto le llevar&aacute; hasta un &laquo;punto de pedido&raquo;
(&quot;prompt&quot;), el mismo que us&oacute; durante la
instalaci&oacute;n de OpenBSD.  Probablemente, la orden m&aacute;s
importante de todas en este punto de pedido sea '?'.  Con esta orden
obtendr&aacute; una lista de posibles opciones relacionadas con
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>.
Incluso podr&aacute; ver la p&aacute;gina del manual de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>
al completo con la orden 'M'.  Desde este punto podr&aacute;
a&ntilde;adir o eliminar todo lo que desee, o hacer cambios en las
particiones.  Para m&aacute;s informaci&oacute;n al respecto lea la
p&aacute;gina del manual de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>.


<a name="fdisk"></a>
<h2>14.2 - C&oacute;mo usar fdisk</h2>

<p>
Antes que nada, aseg&uacute;rese de leer la p&aacute;gina del manual
principal de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>

<p>
Fdisk es un programa de ayuda para el mantenimiento de sus particiones.
Este programa se usa durante la instalaci&oacute;n para configurar la
partici&oacute;n de OpenBSD (esta partici&oacute;n puede contener
<u>varias</u> clasificaciones, cada una de ellas con sistemas de
archivos, <i>swap</i>, etc... ).  Puede dividir el espacio de sus
dispositivos y activar uno de ellos.  Fdisk se suele usar en &laquo;Modo
Monousuario&raquo; (<b>boot -s</b> - &quot;Single User Mode&quot;).
Fdisk tambi&eacute;n configura el MBR de los discos.

<p>
Para la instalaci&oacute;n, la mayor&iacute;a de las veces s&oacute;lo
necesitar&aacute; <b>UNA</b> partici&oacute;n de OpenBSD, y a
continuaci&oacute;n usar disklabel para poner en ella una <i>swap</i> y
un sistema de archivos.

<p>
Para ver s&oacute;lo su tabla de particiones con fdisk, haga lo
siguiente:

<pre>
# <b>fdisk fd0</b>
</pre>

<p>
lo que le dar&aacute; una salida parecida a &eacute;sta:

<pre>
         Disk: fd0       geometry: 80/2/18 [2880 sectors]
         Offset: 0       Signatures: 0xAA55,0x0
                  Starting        Ending
          #: id  cyl  hd sec -  cyl  hd sec [     start -       size]
----------------------------------------------------------------------
----------------------------------------------------------------------
         *0: A6    0   0   1 -   79   1  18 [         0 -       2880] OpenBSD
          1: 00    0   0   0 -    0   0   0 [         0 -          0] unused
          2: A7    0   0   2 -   79   1  18 [         1 -       2879] NEXTSTEP
          3: 00    0   0   0 -    0   0   0 [         0 -          0] unused
</pre>

<p>
En este ejemplo estamos viendo la salida de fdisk para el dispositivo de
la disquetera.  Podemos ver la partici&oacute;n de OpenBSD (A6) y su
tama&ntilde;o.  El asterisco (*) nos indica que la partici&oacute;n de
OpenBSD es una partici&oacute;n de arranque.

<p>
En el ejemplo anterior s&oacute;lo vimos nuestra informaci&oacute;n.
&iquest;Y si quisi&eacute;ramos editar nuestra tabla de particiones?
Pues bien, para ello debemos usar el indicador <b>-e</b>, que nos
trasladar&aacute; a una l&iacute;nea de &oacute;rdenes desde la que
podremos interaccionar con fdisk.

<pre>
# <b>fdisk -e wd0</b>
Enter 'help' for information
fdisk: 1&gt; <b>help</b>
        help            Command help list
        manual          Show entire OpenBSD man page for fdisk
        reinit          Re-initialize loaded MBR (to defaults)
        setpid          Set the identifier of a given table entry
        disk            Edit current drive stats
        edit            Edit given table entry
        flag            Flag given table entry as bootable
        update          Update machine code in loaded MBR
        select          Select extended partition table entry MBR
        print           Print loaded MBR partition table
        write           Write loaded MBR to disk
        exit            Exit edit of current MBR, without saving changes
        quit            Quit edit of current MBR, saving current changes
        abort           Abort program without saving current changes
fdisk: 1&gt; 
</pre>

<p> 
Entrar en fdisk y explorar el disco es totalmente seguro, s&oacute;lo
debe asegurarse de contestar <b>N</b> cuando le pregunte si quiere
guardar los cambios, y de que NO usa la orden <b>write</b>.

<p>
Aqu&iacute; tiene una revisi&oacute;n de las &oacute;rdenes que puede
usar cuando escoja el indicador <b>-e</b>.

<ul>
<li><b>help</b> Mostrar una lista de las &oacute;rdenes comprensibles
para fdisk en el modo de edici&oacute;n interactiva.
<li><b>reinit</b> Iniciar la copia residente en memoria del bloque de
arranque seleccionado.
<li><b>disk</b> Mostrar la geometr&iacute;a del dispositivo que haya
verificado fdisk.  Si lo desea, puede editarla para aplicarle cambios.
<li><b>setpid</b> Cambiar el identificador de particiones de la entrada
en la tabla para la partici&oacute;n indicada.  Esta orden es
&uacute;til para la reasignaci&oacute;n de una partici&oacute;n
existente a OpenBSD.
<li><b>edit</b> Editar una cierta entrada en la tabla en la copia
residente en memoria del bloque de arranque actual.  Puede editarla en
modo de geometr&iacute;a de la BIOS o en modo de sectores de inicio y
tama&ntilde;os.
<li><b>flag</b> Activar una cierta entrada en la tabla de particiones
como partici&oacute;n de arranque.  Solamente se puede marcar una
entrada como partici&oacute;n de arranque.  Si quiere arrancar desde una
partici&oacute;n extendida, tendr&aacute; que marcar la entrada de la
partici&oacute;n en la tabla como partici&oacute;n de arranque.
<li><b>update</b> Actualizar el c&oacute;digo de la m&aacute;quina en la
copia residente en memoria del bloque de arranque seleccionado.
<li><b>select</b> Seleccionar y cargar en memoria el bloque de arranque
que se&ntilde;ala a la entrada en la tabla de particiones extendidas del
bloque de arranque actual.
<li><b>print</b> Mostrar en pantalla la copia residente en memoria del
bloque de arranque seleccionado y su tabla MBR.
<li><b>write</b> Grabar la copia residente en memoria del bloque de
arranque al disco.  Le pedir&aacute; que confirme esta operaci&oacute;n.
<li><b>exit</b> Salir del nivel actual de fdisk, volviendo al bloque de
arranque residente en memoria previamente seleccionado, o saliendo
completamente del programa si no hubiera ninguno.
<li><b>quit</b> Salir del nivel actual de fdisk, volviendo al bloque de
arranque residente en memoria previamente seleccionado, o saliendo
completamente del programa si no hubiera ninguno.  A diferencia de
<b>exit</b>, no guarda los cambios del bloque modificado.
<li><b>abort</b> Salir del programa sin guardar cambios.
</ul>

<a name="NewDisk"></a>
<h2>14.3 - C&oacute;mo a&ntilde;adir discos adicionales</h2>

<p>
Una vez que ya tenga su disco instalado <b>CORRECTAMENTE</b>,
deber&aacute; usar
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>
(<i>s&oacute;lo i386</i>) y
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>
para configurarlo en OpenBSD.

<p>
Los usuarios de plataformas i386 deben empezar con fdisk.  El resto de
plataformas pueden ignorar esta parte.  En el ejemplo que sigue a
continuaci&oacute;n estamos a&ntilde;adiendo un tercer dispositivo SCSI
al sistema.

<pre>
# <b>fdisk -i sd2</b>
</pre>

<p>
De este modo se iniciar&aacute; la tabla de particiones
&laquo;real&raquo; para su uso exclusivo por OpenBSD.  A
continuaci&oacute;n debe crear un disklabel.  Esto le parecer&aacute;
algo confuso.

<pre>
# <b>disklabel -e sd2</b>

<i>(la pantalla se queda en blanco y aparece su $EDITOR)</i>
type: SCSI
<i>...bla...</i>
sectors/track: 63
total sectors: 6185088
<i>...bla...</i>
16 partitions:
#        size   offset    fstype   [fsize bsize   cpg]
  c:  6185088        0    unused        0     0         # (Cyl.    0 - 6135)
  d:  1405080       63    4.2BSD     1024  8192    16   # (Cyl.    0*- 1393*)
  e:  4779945  1405143    4.2BSD     1024  8192    16   # (Cyl. 1393*- 6135)
</pre>

<p>
Ignore la partici&oacute;n <b>c</b>, siempre est&aacute; ah&iacute; y es
para que funcionen programas como disklabel.  El tipo de sistema de
archivos (<i>fstype</i>) para OpenBSD es 4.2BSD.  El n&uacute;mero total
de sectores es el tama&ntilde;o total del disco.  Supongamos que
&eacute;ste es un disco de 3GB;  tres gigabytes, en t&eacute;rminos del
fabricante del disco, son 3000 megabytes.  Divida 6185088 entre 3000
(use
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bc&amp;sektion=1">
bc(1)</a>) y obtendr&aacute; 2061.  Por lo tanto, para crear particiones
para a, d, e, f, g, ... simplemente multiplique X*2061 y obtendr&aacute;
el n&uacute;mero de megabytes de espacio en esa partici&oacute;n.  El
sector de inicio (<i>offset</i>) para su primera partici&oacute;n nueva
debe ser el mismo que el &quot;<i>sectors/track</i>&quot; que le haya
dado anteriormente la salida de disklabel.  En este caso es 63.  El
sector de inicio para cada partici&oacute;n consecutiva debe ser una
combinaci&oacute;n del tama&ntilde;o de cada partici&oacute;n y el
sector de inicio de la misma (excepto la partici&oacute;n <b>c</b>, ya
que no juega ning&uacute;n papel aqu&iacute;).

<p>
O, si s&oacute;lo quiere tener una partici&oacute;n en el disco (si, por
ejemplo, quisiera usarlo todo para almacenaje de web o como directorio
home), tome el tama&ntilde;o total del disco y r&eacute;stele los
sectores por pista (&quot;sectors/track&quot;).  En este caso,
6185088-63 = 6185025.  La partici&oacute;n quedar&aacute; as&iacute;:

<pre>
    d:  6185025       63    4.2BSD     1024  8192    16 
</pre>

<p>
<b>&iexcl;Si todo esto le parece complicado e innecesario, puede usar
disklabel -E para obtener el mismo modo de particiones que tiene en su
disco de instalaci&oacute;n!</b> Ah&iacute; puede usar &laquo;96M&raquo;
para especificar &laquo;96 megabytes&raquo; (o con un disco lo bastante
grande, 96G para 96 gigabytes).  Desafortunadamente, el modo -E usa la
geometr&iacute;a del disco de la BIOS, no la geometr&iacute;a del disco
real, y con frecuencia &eacute;stas no son las mismas.  Para evitar esta
limitaci&oacute;n, escriba 'g d' para la 'geometr&iacute;a del disco'.
Otras opciones son 'g b' para la 'geometr&iacute;a de la bios' y 'g u'
para la 'geometr&iacute;a del usuario', o simplemente lo que indique la
&laquo;clasificaci&oacute;n&raquo; (<i>label</i>) antes de que disklabel
efect&uacute;e alg&uacute;n cambio.

<p>
Esto ha sido largo, pero todav&iacute;a no ha terminado.  Para
finalizar, debe crear el sistema de archivos en el disco usando
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&amp;sektion=8">newfs(8)</a>.

<pre>
# <b>newfs sd2a</b>
</pre>

<p>
O cualquiera otra denominaci&oacute;n de su disco de acuerdo con el
esquema de numeraci&oacute;n del disco de OpenBSD (mire la salida de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg(8)</a> 
para averiguar el nombre que OpenBSD da a su disco).

<p>
Ahora debe decidir d&oacute;nde va a montar la nueva partici&oacute;n
que acaba de crear.  Digamos que quiere ponerla en /u.  Primero cree el
directorio /u, y luego m&oacute;ntelo.

<pre>
# <b>mount /dev/sd2a /u</b>
</pre>

<p>
Finalmente, a&ntilde;&aacute;dalo a
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&amp;sektion=5">/etc/fstab(5)</a>:

<pre>
/dev/sd2a /u ffs rw 1 1
</pre>

<p>
&iexcl;Y si necesitara migrar a un directorio ya existente como
/usr/local?  Entonces deber&iacute;a montar la partici&oacute;n nueva en
/mnt, y usar <tt>cpio -pdum</tt> para copiar /usr/local al directorio
/mnt.  A continuaci&oacute;n editar el fichero
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&amp;sektion=5">/etc/fstab(5)</a>
para indicar que la partici&oacute;n /usr/local es ahora /dev/sd2a (su
partici&oacute;n reci&eacute;n creada).  Por ejemplo:

<pre>
<b>/dev/sd2a /usr/local ffs rw 1 1</b>
</pre>

<p>
Reinicie en modo monousuario con <b>boot -s</b> y copie el fichero
/usr/local existente a /usrs/local-backup (eliminando el original cuando
est&eacute; seguro), y cree un directorio /usr/local vac&iacute;o.
Reinicie el sistema y &iexcl;ya est&aacute;!  &iexcl;ah&iacute;
est&aacute;n los ficheros!


<a name="SwapFile"></a>
<h2>14.4 - C&oacute;mo usar un fichero como memoria de <i>swap</i></h2>

<p>
(Nota: si lo que quiere es usar un fichero como memoria de intercambio
(<i>&quot;swap&quot;</i>) porque obtiene errores del tipo &quot;virtual
memory exhausted&quot;, deber&iacute;a intentar antes elevar los
l&iacute;mites por proceso con la utilidad
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=unlimit&amp;sektion=1">unlimit(1)</a> de csh, o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ulimit&amp;sektion=1">ulimit(1)</a>) de sh.

<p>
Para el uso de un fichero como memoria de intercambio (<i>swap file</i>)
no es estrictamente necesaria la compilaci&oacute;n de un n&uacute;cleo
del sistema personalizado, pero en este documento mostraremos
c&oacute;mo a&ntilde;adir espacio <i>swap</i> de las dos formas.

<p>
<h3>Usar un fichero como <i>swap</i></h3>

<p>
Usar un fichero como memoria de <i>swap</i> es la forma m&aacute;s
f&aacute;cil y r&aacute;pida de obtener una configuraci&oacute;n
adicional del espacio de <i>swap</i>.  El fichero no debe residir en un
sistema de archivos que tenga SoftUpdates activado (se encuentra
desactivado por definici&oacute;n).  Para empezar, puede ver
cu&aacute;nta memoria de <i>swap</i> tiene en ese momento y
cu&aacute;nta est&aacute; usando con la utilidad
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=swapctl&amp;sektion=8">swapctl(8)</a>,
del modo siguiente:

<pre>
$ <b>swapctl -l</b>
Device      512-blocks     Used    Avail Capacity  Priority
swap_device      65520        8    65512     0%    0
</pre>

<p>
Esto le mostrar&aacute; los dispositivos que est&aacute;n siendo usados
como memoria de <i>swap</i> y sus estad&iacute;sticas actuales.  En el
ejemplo anterior, s&oacute;lo hay un dispositivo denominado
&quot;swap_device&quot;.  &Eacute;ste es el &aacute;rea predefinida para
<i>swap</i> (si lo vi&eacute;ramos con disklabel, lo mostrar&iacute;a
como la partici&oacute;n b).  Tambi&eacute;n puede ver en el ejemplo
anterior que el dispositivo no est&aacute; siendo muy usado en ese
momento.  Pero para el prop&oacute;sito de este documento, procederemos
como si necesit&aacute;ramos 32MB adicionales.

<p>
El primer paso para configurar un fichero como un dispositivo de
<i>swap</i> es crear el fichero.  El mejor modo de hacerlo es con la
utilidad
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=1">
dd(1)</a>.  He aqu&iacute; un ejemplo de c&oacute;mo crear el fichero
<i>/var/swap</i>, que tendr&aacute; un tama&ntilde;o de 32MB.

<pre>
$ <b>sudo dd if=/dev/zero of=/var/swap bs=1k count=32768</b>
32768+0 records in
32768+0 records out
33554432 bytes transferred in 20 secs (1677721 bytes/sec)
</pre>

<p>
Una vez que lo hayamos creado, podemos activar el uso de ese dispositivo
como memoria de <i>swap</i>.  Para activarlo, use la siguiente orden:

<pre>
$ <b>sudo chmod 600 /var/swap</b>
$ <b>sudo swapctl -a /var/swap</b>
</pre>

<p>
Ahora debemos comprobar si se ha a&ntilde;adido correctamente a la lista
de nuestros dispositivos de <i>swap</i>.

<pre>
$ <b>swapctl -l</b>
Device      512-blocks     Used    Avail Capacity  Priority
swap_device      65520        8    65512     0%    0
/var/swap        65536        0    65536     0%    0
Total           131056        8   131048     0%
</pre>

<p>
Ahora que ya est&aacute; activado el fichero y que se est&aacute; usando
como <i>swap</i>, debe a&ntilde;adir una l&iacute;nea a su fichero
<i>/etc/fstab</i>, para que el fichero tambi&eacute;n se active en el
pr&oacute;ximo arranque.  Si no a&ntilde;ade esta l&iacute;nea, no
tendr&aacute; este dispositivo de <i>swap</i> configurado.

<pre>
$ <b>cat /etc/fstab</b>
/dev/wd0a / ffs rw 1 1
/var/swap /var/swap swap sw 0 0
</pre>

<p>
<h3>Usar <i>swap</i> a trav&eacute;s de un dispositivo vnode</h3>

<p>
&Eacute;sta es una soluci&oacute;n m&aacute;s permanente que la de
a&ntilde;adir m&aacute;s espacio de <i>swap</i>.  Para usar
permanentemente un fichero como memoria de <i>swap</i>, primero compile
un n&uacute;cleo con vnd0c como <i>swap</i>.  Si su sistema de archivos
ra&iacute;z es wd0a, entonces wd0b es el <i>swap</i> anterior y debe
usar la siguiente l&iacute;nea en el fichero de configuraci&oacute;n del
n&uacute;cleo (si tiene dudas, lea el
<a href="faq5.html">cap&iacute;tulo 5</a> de las preguntas frecuentes
referente a la compilaci&oacute;n del n&uacute;cleo del sistema):

<pre>
config          bsd     root on wd0a swap on wd0b and vnd0c dumps on wd0b
</pre>

<p>
Despu&eacute;s de esto, tendr&aacute; que crear el fichero que se
usar&aacute; como memoria de <i>swap</i>.  Debe hacerlo usando la misma
orden que en los ejemplos anteriores.

<pre>
$ <b>sudo dd if=/dev/zero of=/var/swap bs=1k count=32768</b>
32768+0 records in
32768+0 records out
33554432 bytes transferred in 20 secs (1677721 bytes/sec)
</pre>

<p>
Ahora el fichero est&aacute; en su sitio y debe a&ntilde;adirlo a
<i>/etc/fstab</i>.  Aqu&iacute; tiene una l&iacute;nea de ejemplo de
c&oacute;mo arrancar con este dispositivo como <i>swap</i>.

<pre>
$ <b>cat /etc/fstab</b>
/dev/wd0a / ffs rw 1 1
/dev/vnd0c none swap sw 0 0 
</pre>

<p>
En este punto su m&aacute;quina debe ser reiniciada para que los cambios
en el n&uacute;cleo hagan efecto.  A continuaci&oacute;n deber&aacute;
configurar el dispositivo como memoria de <i>swap</i>.  Para ello
usar&aacute;
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vnconfig&amp;sektion=8">vnconfig(8)</a>.

<pre>
$ <b>sudo vnconfig -c -v vnd0 /var/swap</b>
vnd0: 33554432 bytes on /var/swap
</pre>

<p>
El &uacute;ltimo paso es activar ese dispositivo como memoria de
<i>swap</i>.  Lo haremos como en los ejemplos anteriores, usando
swapctl(8).  Despu&eacute;s comprobaremos si ha sido correctamente
a&ntilde;adido a nuestra lista de dispositivos de <i>swap</i>.

<pre>
$ <b>sudo swapctl -a /dev/vnd0c</b>
$ <b>swapctl -l</b>
Device      512-blocks     Used    Avail Capacity  Priority
swap_device      65520        8    65512     0%    0
/dev/vnd0c       65536        0    65536     0%    0
Total           131056        8   131048     0%
</pre>


<a name="SoftUpdates"></a>
<h2>14.5 - Soft Updates</h2>

<p>
<i>Soft Updates</i> est&aacute; basado en una idea propuesta por
<a href="http://www.ece.cmu.edu/~ganger/papers/CSE-TR-254-95/">Greg
Gangerand Yale Patt</a> y desarrollada para FreeBSD por
<a href="http://www.mckusick.com/softdep/">Kirk McKusick</a>.
<i>Soft Updates</i> impone un orden parcial en las operaciones de la
memoria intermedia de cach&eacute; que eliminar la escritura
sincr&oacute;nica de entradas de directorio del c&oacute;digo de FFS.
De este modo se consigue un gran aumento en el rendimiento de la
escritura en disco.

<p>
El potencial de ejecutar fsck(8) en plano de fondo usando <i>Soft
Updates</i> a&uacute;n no es posible en OpenBSD, por lo que
todav&iacute;a es necesario
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fsck&amp;sektion=8">
fsck(8)</a> despu&eacute;s de que el sistema se apague de forma abrupta.
Esto puede cambiar en versiones futuras.

<p>
Para activar <i>Softupdates</i>, el n&uacute;cleo debe estar compilado
con

<p>
<b>option FFS_SOFTUPDATES</b>

<p>
Esta opci&oacute;n est&aacute; incluida en el n&uacute;cleo GENERIC.

<p>
La activaci&oacute;n de <i>Soft Updates</i> se debe realizar con una
opci&oacute;n de tiempo en el montaje.  Cuando se monta una
partici&oacute;n con la utilidad
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount&amp;sektion=8">mount(8)</a>,
se puede indicar que se active <i>soft updates</i> en esa
partici&oacute;n.  La siguiente muestra es de una entrada en
<i><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&amp;sektion=5">/etc/fstab(5)</a></i> 
para una partici&oacute;n <i>sd0a</i> que queremos que se monte con
<i>soft updates</i> activado.

<pre>
/dev/sd0a / ffs rw,softdep 1 1
</pre>

<p>
Nota para los usuarios de sparc:  no se debe activar <i>soft updates</i>
en las m&aacute;quinas sun4 o sun4c.  Estas arquitecturas s&oacute;lo
tienen soporte para una cantidad de memoria del n&uacute;cleo muy
limitada, y no pueden usar esta funcionalidad.  Las m&aacute;quinas
sun4m no tienen esta limitaci&oacute;n y s&iacute; pueden usarla.

<a name="Boot386"></a>
<h2>14.6 - El proceso de arranque de OpenBSD/i386 en detalle</h2>

<p>
El proceso de arranque de OpenBSD/i386 no es algo trivial, y entender
c&oacute;mo funciona puede ayudarnos a resolver alg&uacute;n problema.
Hay cuatro piezas clave en el proceso de arranque:
<ol>
<li><i><b>Registro de Arranque Maestro</b> (Master Boot Record,
MBR):</i>  El MBR es el primer sector f&iacute;sico del disco (los
primeros 512 bytes).  Contiene la tabla de particiones primarias y un
peque&ntilde;o programa para cargar el <i>Partition Boot Record</i>
(PBR).  N&oacute;tese que en algunos entornos, el t&eacute;rmino MBR se
usa para referirse &uacute;nicamente a la parte de c&oacute;digo de este
primer bloque del disco, en lugar de referirse a todo este primer bloque
(incluida la tabla de particiones).  Es importante que se entienda el
sentido de <i>&quot;initialize the MBR&quot;</i> (iniciar el MBR), ya
que dentro de la terminolog&iacute;a que se usa en OpenBSD esto incluye
la reescritura de todo el sector del MBR, no s&oacute;lo del
c&oacute;digo como en algunos sistemas.  Esto es algo que rara vez se
querr&aacute; hacer.  En lugar de ello, hay que usar la orden
<tt>&quot;update&quot;</tt> de fdisk(8).

<p>
Aunque OpenBSD incluya un MBR, no es necesario usar &eacute;ste ya que
pr&aacute;cticamente cualquier otro MBR puede arrancar OpenBSD.  El MBR
se manipula con el programa fdisk(8), que se usa para modificar la tabla
de particiones adem&aacute;s de para instalar el c&oacute;digo de MBR en
el disco.

<p>
El MBR de OpenBSD se anuncia con el mensaje
<pre>
    Using Drive: 0 Partition: 3
</pre>
mostrando as&iacute; el disco y la partici&oacute;n desde las que va a
cargar el PBR.

<li><i><b>Registro de Arranque de la Partici&oacute;n</b> (Partition
Boot Record, PBR):</i>  El PBR, tambi&eacute;n llamado
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=biosboot&amp;sektion=8&amp;arch=i386">biosboot(8)</a>
(por el nombre del archivo que contiene el c&oacute;digo) es el primer
sector f&iacute;sico de la partici&oacute;n de OpenBSD del disco.  El
PBR es la &laquo;primera fase del cargador de arranque&raquo; para
OpenBSD.  El PBR lo carga el c&oacute;digo del MBR, y tiene la
funci&oacute;n de cargar la segunda fase del cargador de arranque,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">boot(8)</a>.
Como el MBR, el PBR es una peque&ntilde;&iacute;sima secci&oacute;n de
c&oacute;digo y datos, tan s&oacute;lo 512 bytes en total.  Eso no es
suficiente para tener una aplicaci&oacute;n que pueda hacer uso total
del sistema de archivos.  Por lo tanto, en lugar de dejar que el PBR
localice <tt>/boot</tt> en el disco, la ubicaci&oacute;n accesible por
la BIOS de <tt>/boot</tt> se codificada f&iacute;sicamente en PBR
durante la instalaci&oacute;n.

<p>
El PBR lo instala
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=installboot&amp;sektion=8&amp;arch=i386">installboot</a>,
que se describe con detalle en la
<a href="faq14.html#InstBoot">secci&oacute;n 14.8</a> de este documento.
El PBR se anuncia con el mensaje
<pre>
    reading boot....
</pre>
imprimiendo la l&iacute;nea de puntos seg&uacute;n va leyendo los
sectores del disco.

<li><b><i>Cargador de Arranque de Segunda Fase, <tt>/boot</tt>:</i></b>
<tt>/boot</tt> es cargado por el PBR, y tiene la funci&oacute;n de
acceder al sistema de archivos de OpenBSD a trav&eacute;s de la BIOS de
la m&aacute;quina, y de ubicar y cargar el n&uacute;cleo del sistema
(<i>kernel</i>).  boot(8) tambi&eacute;n pasa varias opciones e
informaci&oacute;n al n&uacute;cleo del sistema.

<p>
boot(8) es un programa interactivo.  Despu&eacute;s de cargarse, intenta
ubicar y leer <tt>/etc/boot.conf</tt> si existe (en una
instalaci&oacute;n t&iacute;pica no existe), y procesa cualquier orden
que lleva.  A menos que <tt>/etc/boot.conf</tt> le d&eacute; otras
instrucciones, pasa un punto de inserci&oacute;n al usuario:

<pre>
     probing: pc0 com0 com1 apm mem[636k 190M a20=on]
     disk: fd0 hd0+
     &gt;&gt; OpenBSD/i386 BOOT 2.02
     boot&gt;
</pre>

En la configuraci&oacute;n predeterminada, le da al usuario cinco
segundos para que le pase alguna orden;  si no se hace nada durante este
tiempo, incia su tarea predeterminada:  cargar el n&uacute;cleo del
sistema, <tt>bsd</tt>, desde la partici&oacute;n ra&iacute;z del primer
disco duro.  El cargador de arranque de segunda fase sondea (examina) el
<i>hardware</i> del sistema a trav&eacute;s de la BIOS (ya que
todav&iacute;a no se ha cargado el n&uacute;cleo de OpenBSD).  En el
cuadro de arriba se pueden ver unas pocas cosas que ha buscado y
encontrado:
<ul>
<li><b>pc0</b> - El teclado y la pantalla de v&iacute;deo t&iacute;picas
de un sistema i386
<li><b>com0, com1</b> - Dos puertos serie
<li><b>apm</b> - Funciones <i>Advanced Power Management</i> de la BIOS
<li><b>636k 190M</b> - La cantidad de memoria convencional (por debajo
de 1MB) y extendida (por encima de 1MB) que ha encontrado
<li><b>fd0 hd0+</b> - Los dispositivos de disco de la BIOS que
encuentra;  en este caso una disquetera y un disco duro
</ul>

<p>
El caracter '+' despu&eacute;s de &quot;hd0&quot; indica que la BIOS a
informado a <tt>/boot</tt> de que este disco es accesasible mediante
LBA.  Cuando se realiza una primera instalaci&oacute;n, a veces se
observa un caracter '*' despu&eacute;s del disco duro;  esto indica un
disco que no parece tener una clasificaci&oacute;n de disco de OpenBSD
v&aacute;lida.

<li><b><i>Kernel: <tt>/bsd</tt></i>:</b>  El <i>kernel</i> o
n&uacute;cleo del sistema es el objetivo final de todo el proceso de
arranque:  cargar el n&uacute;cleo en la RAM y que se ejecute
correctamente.  Una vez que se ha cargado el n&uacute;cleo, OpenBSD
accede directamente al <i>hardware</i>, sin que ya sea necesario que
vaya a trav&eacute;s de la BIOS.
</ol>

<p>
As&iacute; pues, el inicio del proceso de arranque seguir&iacute;a un
esquema como el siguiente:
<blockquote><pre>
Using Drive: 0 Partition: 3                      <b><i>&lt;- MBR</i></b>
reading boot....                                 <b><i>&lt;- PBR</i></b>
probing: pc0 com0 com1 apm mem[636k 190M a20=on] <b><i>&lt;- /boot</i></b>
disk: fd0 hd0+
&gt;&gt; OpenBSD/i386 BOOT 2.02
boot&gt;
booting hd0a:/bsd 4464500+838332 [58+204240+181750]=0x56cfd0
entry point at 0x100120

[ using 386464 bytes of bsd ELF symbol table ]
Copyright (c) 1982, 1986, 1989, 1991, 1993     <b><i>&lt;- Kernel</i></b>
        The Regents of the University of California.  All rights reserved.
Copyright (c) 1995-2003 OpenBSD.  All rights reserved.  http://www.OpenBSD.org

OpenBSD 3.4 (GENERIC) #18: Wed Sep 17 03:34:47 MDT 2003
   ...
</pre></blockquote>


<h3>Posibles errores</h3>
<ul>
<li><b>MBR en mal estado, no v&aacute;lido, o incompatible:</b>
Generalmente, un disco duro usado contiene algo de c&oacute;digo de MBR;
pero si el disco es nuevo o se encontraba anteriormente en una
plataforma diferente, Y SI hemos contestado <i>&quot;Yes&quot;</i> a la
pregunta de si quer&iacute;amos usar todo el disco (<i>&quot;Use entire
disk&quot;</i>) durante el <a href="faq4.html#Disks">proceso de
instalaci&oacute;n</a>, podemos acabar con un disco sin un MBR
v&aacute;lido y que ni siquiera podr&aacute; arrancar, aun cuando
contenga una tabla de particiones v&aacute;lida.

<p>
En este caso podemos instalar el MBR de OpenBSD en el disco duro usando
el programa fdisk.  Para ello arrancaremos desde el medio de
instalaci&oacute;n que tengamos, y escogeremos la opci&oacute;n
&quot;Shell&quot; para obtener un punto de inserci&oacute;n de
&oacute;rdenes, desde donde le pasaremos la orden:
<pre>
    # <b>fdisk -u wd0</b>
</pre>

<p>
Tambi&eacute;n podemos instalar un MBR espec&iacute;fico en el disco
usando fdisk.  Por ejemplo:
<pre>
    # <b>fdisk -u -f /usr/mdec/mbr wd0 </b>
</pre> 

instalar&aacute; el archivo <tt>/usr/mdec/mbr</tt> como el MBR de
nuestro sistema.  Este archivo en concreto, en una instalaci&oacute;n
t&iacute;pica de OpenBSD, es el MBR est&aacute;ndar que tambi&eacute;n
se encuentra dentro de fdisk.  Pero se puede especificar cualquier otro
MBR.

<li><b>Ubicaci&oacute;n no v&aacute;lida  de <tt>/boot</tt> instalada
en PBR:</b>
Cuando installboot(8) instala el registro de arranque de la
partici&oacute;n, escribe la ubicaci&oacute;n f&iacute;sica de los
sectores del disco de <tt>/boot</tt> en el PBR.  Por lo tanto, si se
elimina y sustituye <tt>/boot</tt> sin volver a ejecutar
<a href="faq14.html#InstBoot">installboot(8)</a>, el sistema no
podr&aacute; arrancar; el motivo es que el PBR carga cualquier cosa que
se encuentre en los bloques que tiene especificados, que seguramente ya
no ser&aacute; el cargador de arranque de segunda fase.  Dado que
<tt>/boot</tt> se lee usando las llamadas a la BIOS, si se altera la
geometr&iacute;a del disco (o sea, si se pasa de una m&aacute;quina que
usa traducci&oacute;n CHS a otra que usa traducci&oacute;n LBA, o si se
cambia la opci&oacute;n de traducci&oacute;n en la BIOS), la BIOS
entender&aacute; que se encuentra en una ubicaci&oacute;n diferente
(para obtener los mismos datos del disco hay que acceder a un bloque
num&eacute;rico diferente).  De nuevo, aqu&iacute; ser&aacute; necesario
ejecutar installboot(8) antes de poder volver a arrancar el sistema.
Como el PBR es muy peque&ntilde;o, el rango de mensajes de error es
bastante limitado:

<ul>
<li><b>Read Error</b> -- La BIOS devuelve un error al intentar leer un
bloque desde el disco.  Podr&iacute;a ser un problema f&iacute;sico del
disco, o que se ha llamado a un sector no v&aacute;lido (o sea, un
problema de geometr&iacute;a del disco).
<li><b>Bad magic</b> -- Se ha le&iacute;do un n&uacute;mero
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=magic&amp;sektion=5">magic(5)</a>
no v&aacute;lido en la cabecera del cargador de arranque de segunda
fase.  Esto, generalmente, significa que sea lo que fuere que se haya
le&iacute;do, NO era <tt>/boot</tt>.  Este problema se suele deber a un
problema con la geometr&iacute;a del disco, al haber sustituido
<tt>/boot</tt> en el disco o por haber ignorado las
<a href="faq14.html#LargeDrive">limitaciones de 8GB &oacute; de la
BIOS</a> del sistema, y haber acabado <tt>/boot</tt> en alguna parte en
donde no lo puede localizar el PBR.
</ul>
</ul>

<p>
Para m&aacute;s informaci&oacute;n sobre el proceso de arranque de i386,
v&eacute;ase los documentos:
<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot_i386&amp;sektion=8&amp;arch=i386">boot_i386(8)</a>
<li><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.4/i386/INSTALL.mbr">INSTALL.mbr</a>
<li><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.4/i386/INSTALL.ata">INSTALL.ata</a>
<li><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.4/i386/INSTALL.chs">INSTALL.chs</a>
<li><a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.4/i386/INSTALL.dbr">INSTALL.dbr</a>
</ul>


<a name="LargeDrive"></a>
<h2>14.7 - &iquest;Qu&eacute; problemas puede haber en OpenBSD con
dispositivos de gran capacidad?</h2>

<p>
OpenBSD tiene soporte para sistemas de archivos de tama&ntilde;os mucho
mayores que cualquier de los discos duros que existen en la actualidad o
incluso de los que puedan aparecer en breve;  sin embargo, existen
limitaciones en algunas interfaces que son de menor tama&ntilde;o que el
m&aacute;ximo te&oacute;rico de OpenBSD.

<p>
No son posibles todas las combinaciones de <i>hardware</i>.  Un nuevo
disco duro IDE de 250GB no funcionar&aacute; en las interfaces
m&aacute;s viejas (anteriores a los est&aacute;ndares &gt;137GB), y
algunos adaptadores SCSI muy viejos han dado problemas con discos
m&aacute;s modernos.  Hay que respetar las posibilidades y limitaciones
del <i>hardware</i>.

<h3>Limitaciones al tama&ntilde;o de la partici&oacute;n y
ubicaci&oacute;n</h3>
<p>
Desafortunadamente, la capacidad absoluta del sistema operativo no se
encontrar&aacute; disponible hasta DESPU&Eacute;S de que el sistema
operativo haya sido cargado en la memoria y el proceso de arranque haya
introducido sus propios l&iacute;mites.  El proceso de arranuqe tiene
que utilizar (y por lo tanto est&aacute; limitado por) la ROM de
arranque del sistema.  El cargador de arranque de primera face de
OpenBSD/i386
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=biosboot&amp;sektion=8&amp;arch=i386">biosboot(8)</a>)
tambi&eacute;n tiene su propia limitaci&oacute;n interna de 8GB,
heredada del l&iacute;mite de las BIOS antiguas.

<p>
Por este motivo, todo el fichero <i>/bsd</i> (el n&uacute;cleo del
sistema) se debe ubicar dentro del &aacute;rea direccionable de la ROM
de arranque en el disco, o dentro de los primeros 8G del disco,
cualquiera que sea m&aacute;s peque&ntilde;a.  Esto significa que en
algunos equipos i386 m&aacute;s antiguos, la partici&oacute;n
<i>root</i> debe encontrarse dentro del l&iacute;mite de los primeros
504M, pero en la mayor&iacute;a de equipos nuevos se puede encontrar en
cualquier parte dentro de los primeros 8G.

<p>
N&oacute;tese que es posible instalar un dispositivo de 40GB en un 486
antiguo y cargar OpenBSD como una sola partici&oacute;n gigante, y por
ello creer que la regla anterior ha sido violada con &eacute;xito.  Sin
embargo, puede volver para vengarse en un modo horrible:

<ul>
<li>Instala el sistema en la partici&oacute;n <i>/</i> de 40G.
Funciona, ya que el sistema operativo base y sus ficheros, incluido
<i>/bsd</i>, se encuentran dentro de los primeros 504M.
<li>Utiliza el sistema hasta que acaba con m&aacute;s de 504M en
ficheros.
<li>Lo actualiza, compila su propio n&uacute;cleo, cualquier otra cosa,
y copia su nuevo <i>/bsd</i> sobre el antiguo.
<li>Reinicia el sistema.
<li>Le aparece un mensaje tipo &quot;bad magic&quot;.
</ul>

<p>
&iquest;Por qu&eacute;?  Porque cuando copi&oacute; &laquo;sobre&raquo;
el nuevo fichero <i>/bsd</i>, no sobreescribi&oacute; el antiguo, sino
que se reubic&oacute; en un nuevo espacio del disco, probablemente fuera
del rango de los 504M para los que tiene soporte la BIOS.  El cargador
de arranque no pudo localizar <i>/bsd</i> y el sistema se colg&oacute;.

<p>
Para que OpenBSD arranque, los cargadores de arranque (biosboot(8) y
<tt>/boot</tt> en el caso de i386) y el n&uacute;cleo (<tt>/bsd</tt>)
deben encontrarse dentro del rango del soporte de la ROM de arranque, y
dentro de sus propias capacidades.  Para ir sobre seguro, la regla es
f&aacute;cil:

<p>
<b>Toda la partici&oacute;n <i>root</i> debe estar dentro del espacio
direccionable por la BIOS (o ROM de arranque) de la m&aacute;quina o
dentro de los primeros 8G, cualquiera que sea el m&aacute;s
peque&ntilde;o de los dos.</b>
En este momento no hay forma de evitar esto, <i>es necesario</i> seguir
esta regla.

<p>
&Eacute;sta es otra buena raz&oacute;n para
<a href="faq4.html#SpaceNeeded">dividir el disco duro en
particiones</a>, en lugar de usar una &uacute;nica partici&oacute;n
grande.

<h3>Requisitos de tiempo y memoria de fsck(8)</h3>
<p>
Otra consideraci&oacute;n con sistemas de archivos grandes es la del
tiempo y memoria requeridos para poder usar
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fsck&amp;sektion=8">
fsck(8)</a> en el sistema de archivos despu&eacute;s de una ca&iacute;da
del sistema o de una interrupci&oacute;n de la fuente el&eacute;ctrica.
No se debe poner un sistema de archivos de 120GB en un sistema con 32MB
de RAM y esperar que fsck(1) se ejecute con &eacute;xito despu&eacute;s
de una ca&iacute;da.  El sistema deber&iacute;a tener como m&iacute;nimo
1MB de memoria disponible por cada 1GB de espacio en disco para que fsck
se ejecute con &eacute;xito sobre el disco.  El tiempo requerido para
que fsck repare el disco puede ser un problema seg&uacute;n se va
incrementando el tama&ntilde;o del sistema de archivos.


<a name="InstBoot"></a>
<h2>14.8 - Instalaci&oacute;n de bloques de arranque (espec&iacute;fico
de i386)</h2>

<p>
Las versiones m&aacute;s antiguas de MS-DOS s&oacute;lo pod&iacute;an
reconocer geomtr&iacute;as de disco de 1024 cilindros o menos.  Ya que
casi pr&aacute;cticamente todos los discos modernos tienen m&aacute;s de
1024 cilindros, la mayor&iacute;a de chips de BIOS SCSI (que vienen
integrados en la tarjeta controladora SCSI) y de BIOS IDE (que son parte
del resto de la BIOS para PCs) disponen de una opci&oacute;n (algunas
veces preactivada) para &laquo;traducir&raquo; la geometr&iacute;a real
del disco en algo que est&eacute; dentro de los l&iacute;mites de la
capacidad de MS-DOS.  Sin embargo, no todos los chips de BIOS
&laquo;traducen&raquo; la geometr&iacute;a del mismo modo.  Si cambia su
BIOS (instalando una nueva placa base o a&ntilde;adiendo una nueva
controladora SCSI) y la nueva usa una &laquo;traducci&oacute;n&raquo; de
la geometr&iacute;a diferente, no podr&aacute; cargar la segunda fase
del gestor de arranque (y por lo tanto no podr&aacute; cargar el
n&uacute;cleo).  Esto se debe a que la primera fase del gestor de
arranque contiene una lista de bloques que comprende <i>/boot</i> en
t&eacute;rminos de la geometr&iacute;a &laquo;traducida&raquo; original.
Si est&aacute; usando discos IDE y realiza cambios en la
configuraci&oacute;n de su BIOS, tambi&eacute;n puede cambiar sin
saberlo su traducci&oacute;n (la mayor&iacute;a de BIOS IDE ofrecen 3
traducciones diferentes).  Para que su bloque de arranque pueda iniciar
con normalidad, ponga un disquete de arranque (o use un CD-ROM con
capacidad arranque), y en el punto <kbd>boot&gt;</kbd> escriba <kbd>b
hd0a:/bsd</kbd> para forzar el arranque desde el primer disco duro (y no
desde el disquete).  Su m&aacute;quina deber&iacute;a iniciar sin
ning&uacute;n problema.  Ahora debe actualizar la primera fase del
gestor de arranque para poder ver la nueva geometr&iacute;a (y
reescribir el bloque de arranque de acuerdo con ella).<br>
En el ejemplo se asume que su disco de arranque es sd0 (SCSI, pero si
fuera IDE ser&iacute;a wd0, etc... ):

<pre>
# <b>cd /usr/mdec; ./installboot /boot biosboot sd0</b>
</pre>

<p>
Si installboot protesta porque es incapaz de leer la geometr&iacute;a de
la BIOS, puede invocar la orden 'machine diskinfo' (o su forma
abreviada, 'ma di') desde el punto <kbd>boot&gt;</kbd>, para ver la
informaci&oacute;n que necesite.  Rellene con los valores
&quot;heads&quot; y &quot;secs&quot; los indicadores <code>-h</code> y
<code>-s</code> de installboot respectivamente, para que la orden
modificada de installboot quede como sigue:

<pre>
#<b> cd /usr/mdec; ./installboot -h &lt;heads&gt; -s &lt;secs&gt; /boot biosboot sd0</b>
</pre>

<p>
Si se requiriera una versi&oacute;n de los bloques de arranque,
tendr&iacute;a que compilarlos usted mismo.

<pre>
# <b>cd /sys/arch/i386/stand/</b>
# <b>make &amp;&amp; make install </b>
# <b>cd /usr/mdec; cp ./boot /boot</b>
# <b>./installboot /boot biosboot sd0</b> (o cualquier otro
dispositivo que sea su disco)
</pre>

<a name="Backup"></a>
<h2>14.9 - Prepararaci&oacute;n para el desastre: hacer copias de
seguridad (respaldo) y restaurar desde la cinta</h2>

<p>
<h3>Introducci&oacute;n:</h3>

<p>
Si su instalaci&oacute;n de OpenBSD va a ser lo que se llama un servidor
de producci&oacute;n, es aconsejable disponer de alg&uacute;n tipo de
respaldo por si acaso uno de sus discos fijos fallara.

<p>
Esta informaci&oacute;n le ayudar&aacute; a usar las utilidades
t&iacute;picas
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&amp;sektion=8">dump(8)</a>/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore(8)</a>
disponibles con OpenBSD.  Existe una utilidad para copias de seguridad
m&aacute;s avanzada, llamada &quot;Amanda&quot;, con la que se pueden
hacer copias de seguridad de m&uacute;ltiples servidores en una sola
cinta.  En la mayor&iacute;a de entornos,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&amp;sektion=8">dump(8)</a>/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore(8)</a>
es suficiente.  Sin embargo, si necesita hacer copias de seguridad de
m&uacute;ltiples m&aacute;quinas en una sola cinta, vale la pena que
conozca Amanda.

<p>
Los dispositivos de ejemplo en este documento son para una
configuraci&oacute;n que usa discos y cintas SCSI.  En un entorno de
producci&oacute;n, se recomiendan los discos SCSI sobre los IDE debido
al modo que gestionan los bloques err&oacute;neos, lo que no significa
que esta informaci&oacute;n sea in&uacute;til si est&aacute; usando un
disco IDE u otro tipo de cinta;  en este caso los nombres de sus
dispositivos ser&aacute;n ligeramente diferentes.  Por ejemplo, sd0a
ser&iacute;a wd0a en un sistema basado en IDE.

<p>
<h3>Hacer copias en cinta</h3>

<p>
Para hacer copias en una cinta es necesario saber de antemano
d&oacute;nde est&aacute;n montados los sistemas de archivos.  Esto se
puede determinar usando la orden
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount&amp;sektion=8">mount(8)</a>
desde el punto de pedido del int&eacute;rprete de &oacute;rdenes
(<i>shell prompt</i>).  Deber&iacute;a obtener una salida similar a
&eacute;sta:

<pre>
# <b>mount</b>
/dev/sd0a on / type ffs (local)
/dev/sd0h on /usr type ffs (local)  
</pre>

<p>
En este ejemplo, el sistema de archivos ra&iacute;z (/) reside
f&iacute;sicamente en sd0a, lo que indica que es la partici&oacute;n a
del disco fijo SCSI 0.  El sistema de archivos /usr reside en sd0h, lo
que indica que es la partici&oacute;n h del disco fijo SCSI 0.

<p>
Otro ejemplo de una tabla de puntos de montaje m&aacute;s avanzado
ser&iacute;a:

<pre>
# <b>mount</b>
/dev/sd0a on / type ffs (local)
/dev/sd0d on /var type ffs (local)
/dev/sd0e on /home type ffs (local)
/dev/sd0h on /usr type ffs (local)  
</pre>

<p>
En este ejemplo, el sistema de archivos ra&iacute;z reside
f&iacute;sicamente en sd0a, el sistema de archivos <i>/var</i> reside en
sd0d, el sistema de archivos <i>/home</i> en sd0e y finalmente,
<i>/usr</i> en sd0h.

<p>
Para hacer copias de seguridad de su m&aacute;quina necesitar&aacute;
pasar informaci&oacute;n a dump sobre el nombre de cada partici&oacute;n
del disco fijo.  Aqu&iacute; tiene un ejemplo de las &oacute;rdenes que
se necesitan para hacer copias de la primera tabla de montaje (la
m&aacute;s simple):

<pre>
# <b>/sbin/dump -0au -f /dev/nrst0 /dev/rsd0a</b>
# <b>/sbin/dump -0au -f /dev/nrst0 /dev/rsd0h</b>
# <b>mt -f /dev/rst0 rewind</b>
</pre>

<p>
Para la segunda tabla (la m&aacute;s avanzada), usar&iacute;a algo
parecido a esto:

<pre>
# <b>/sbin/dump -0au -f /dev/nrst0 /dev/rsd0a</b>
# <b>/sbin/dump -0au -f /dev/nrst0 /dev/rsd0d</b>
# <b>/sbin/dump -0au -f /dev/nrst0 /dev/rsd0e</b>
# <b>/sbin/dump -0au -f /dev/nrst0 /dev/rsd0h</b>
# <b>mt -f /dev/rst0 rewind</b>
</pre>

<p>
Puede revisar la p&aacute;gina del manual de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&amp;sektion=8">
dump(8)</a> para averiguar qu&eacute; es lo que hace exactamente cada
uno de los par&aacute;metros en la l&iacute;nea de &oacute;rdenes.
Aqu&iacute; tiene una breve descripci&oacute;n de los par&aacute;metros
usados:

<ul>
<li><b>0</b> - Lleva a cabo un nivel 0 de dump, lo coge todo.
<li><b>a</b> - Intenta determinar autom&aacute;ticamente el
tama&ntilde;o de la cinta.
<li><b>u</b> - Actualiza el fichero <i>/etc/dumpdates</i> para indicar
cu&aacute;ndo se realiz&oacute; la &uacute;ltima copia de seguridad.
<li><b>f</b> - Indica qu&eacute; dispositivo de cinta se usar&aacute;
(en este caso <i>/dev/nrst0</i>).
</ul>

<p>
La &uacute;ltima parte indica la partici&oacute;n de la que se
har&aacute; la copia de seguridad (<i>/dev/rsd0a</i>, etc... ).

<p>
La orden <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mt&amp;sektion=1">mt(1)</a>
se usa al final para rebobinar el controlador.  Revise la p&aacute;gina
del manual de mt para ver m&aacute;s opciones (como &quot;eject&quot;).

<p>
Si no est&aacute; seguro de cu&aacute;l es el nombre de su dispositivo
de cinta, use dmesg para localizarlo.  Un ejemplo de entrada del
dispositivo de cinta en dmesg ser&aacute; parecido al siguiente:

<pre>
st0 at scsibus0 targ 5 lun 0: &lt;ARCHIVE, Python 28388-XXX, 5.28&gt;
</pre>

<p>
Es posible que haya notado que al realizar la copia de seguridad, se
accede al controlador de la cinta con el nombre del dispositivo
&quot;nrst0&quot; en lugar de &quot;st0&quot;, que es el nombre que se
ve en dmesg.  Cuando se accede a st0 como nrst0 se est&aacute;
accediendo al mismo controlador f&iacute;sico de la cinta, pero
indicando al controlador que no debe rebobinar al final del proceso y
que acceda al dispositivo en modo virgen.  Para hacer copias de
seguridad de m&uacute;ltiples sistemas de archivos en una sola cinta,
aseg&uacute;rese de usar el dispositivo sin rebobinar;  si usa un
dispositivo de rebobinado (rst0) para hacer copias de seguridad de
m&uacute;ltiples sistemas de archivos, acabar&aacute; anulando el
sistema de archivos anterior cuando el pr&oacute;ximo dump intente
grabar en la cinta.  Puede encontrar una descripci&oacute;n m&aacute;s
elaborada sobre los distintos dispositivos de control de cinta en la
p&aacute;gina del manual de dump.

<p>
Si quiere escribir un peque&ntilde;o gui&oacute;n (<i>script</i>), puede
hacerlo como el siguiente:

<pre>
echo &quot;  Empezando Copia de Seguridad Completa...&quot;
/sbin/dump -0au -f /dev/nrst0 /dev/rsd0a
/sbin/dump -0au -f /dev/nrst0 /dev/rsd0d
/sbin/dump -0au -f /dev/nrst0 /dev/rsd0e
/sbin/dump -0au -f /dev/nrst0 /dev/rsd0h
echo
echo -n &quot;  Rebobinando el Dispositivo, por favor espere...&quot;
mt -f /dev/rst0 rewind
echo &quot;Fin.&quot;
echo                      
</pre>

<p>
Si desea programar las copias de seguridad para que se hagan por la
noche o a cualquier otra hora, puede usar
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cron&amp;sektion=8">
cron(8)</a> para que lance el gui&oacute;n de forma autom&aacute;tica.

<p>
Tambi&eacute;n puede serle de ayuda documentar (en un trozo de papel) el
tama&ntilde;o necesario para cada sistema de archivos.  Puede usar la
orden <kbd>df -h</kbd> para determinar cu&aacute;nto espacio est&aacute;
usando cada partici&oacute;n.  Esto le ser&aacute; &uacute;til cuando el
dispositivo falle y necesite recrear su partici&oacute;n en el nuevo
dispositivo.

<p>
Restaurar sus datos tambi&eacute;n le ayudar&aacute; a reducir la
fragmentaci&oacute;n.  Para asegurarse de que tiene todos los ficheros,
la mejor forma de hacer copias de seguridad es reiniciando el sistema en
modo monousuario.  Los sistemas de archivos no necesitan estar montados
para hacer las copias.  Despu&eacute;s de reiniciar no se olvide de
montar la partici&oacute;n ra&iacute;z (/) con permisos de escritura (r)
y lectura (w), o dump fallar&aacute; cuando intente grabar los
&quot;dumpdates&quot;.  Para iniciar en modo monousuario haga lo
siguiente desde el punto de arranque:

<pre>
boot&gt; bsd -s
</pre>

<p>
<h3>Ver el contenido de una copia en cinta:</h3>

<p>
Despu&eacute;s de que haya hecho las correspondientes copias de
seguridad por primera vez, es una buena idea que pruebe su cinta y que
se asegure de que los datos en ella sean los que Vd. esperaba que
fueran.

<p>
Puede usar el siguiente ejemplo para revisar un cat&aacute;logo de
ficheros en una cinta:

<pre>
# <b>/sbin/restore -tvs 1 -f /dev/rst0</b>
</pre>

<p>
Esto har&aacute; que se muestre una lista con los ficheros existentes en
la primera partici&oacute;n de la cinta.  De acuerdo con los ejemplos
anteriores, 1 ser&iacute;a su sistema de archivos ra&iacute;z
(<i><b>/</b></i>).

<p>
Para poder ver el contenido de la segunda partici&oacute;n de la cinta y
enviar la salida a un fichero, use una orden como la siguiente:

<pre>
# <b>/sbin/restore -tvs 2 -f /dev/rst0 > /home/me/list.txt</b>
</pre>

<p>
Si tiene una tabla de particiones como la simple de ejemplos anteriores,
2 ser&iacute;a <i>/usr</i>;  si la tabla es como la m&aacute;s avanzada,
entonces 2 podr&iacute;a ser <i>/var</i> u otro sistema de archivos.  El
n&uacute;mero de secuencia coincide con el orden en el que se graben los
sistemas de archivos en la cinta.

<p>
<h3>Restaurar desde la cinta:</h3>

<p>
El ejemplo que ver&aacute; m&aacute;s adelante podr&iacute;a ser
&uacute;til si su disco fijo fallara totalmente.  En caso de que quiera
restaurar sus sistemas de archivos desde un &uacute;nico fichero de la
cinta, revise la p&aacute;gina del manual de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore(8)</a>
y preste atenci&oacute;n a las instrucciones sobre el modo interactivo.

<p>
Si se ha preparado bien, substituir un disco y restaurar sus datos desde
la cinta puede ser un proceso muy r&aacute;pido.  El disquete de
instalaci&oacute;n/arranque est&aacute;ndar de OpenBSD contiene la
utilidad que se requiere para restaurar, as&iacute; como los binarios
que se requieren para particionar y hacer que pueda arrancar desde su
dispositivo.  En la mayor&iacute;a de los casos, este disquete y su
cinta con la copia de seguridad m&aacute;s reciente ser&aacute; todo lo
que necesite para restaurar el sistema.

<p>
Despu&eacute;s de substituir f&iacute;sicamente el dispositivo de disco
err&oacute;neo, los pasos b&aacute;sicos para restaurar sus datos son
los siguientes:

<ul>
<li>
Inicie desde el disquete de instalaci&oacute;n/arranque de OpenBSD.
Desde el men&uacute; de selecci&oacute;n, escoja Shell.
Prot&eacute;jalo contra la escritura e introduzca su cinta de la copia
de seguridad m&aacute;s reciente en el dispositivo.

<li>
Use la orden
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>
para crear una partici&oacute;n primaria de OpenBSD en el nuevo
dispostivo.  Por ejemplo:

<pre>
# <b>fdisk -e sd0</b>
</pre>

<p>
Revise la <a href="#fdisk">secci&oacute;n 14.2</a> sobre fdisk para
m&aacute;s informaci&oacute;n.

<li>
Use la orden 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>
para recrear su tabla de particiones de OpenBSD dentro de la
partici&oacute;n primaria de OpenBSD que acaba de crear con fdisk.  Por
ejemplo:

<pre>
# <b>disklabel -E sd0</b>
</pre>

<p>
No se olvide de la partici&oacute;n de <i>swap</i>.  Revise la
<a href="#disklabel">secci&oacute;n 14.1</a> sobre disklabel para
m&aacute;s informaci&oacute;n.

<li>
Use la orden 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&amp;sektion=8">newfs(8)</a>
en cada una de las particiones que acaba de crear, para construir un
sistema de archivos limpio en cada una de ellas.  Por ejemplo:

<pre>
# <b>newfs /dev/rsd0a</b>
# <b>newfs /dev/rsd0h</b>
</pre>

<li>
Monte su reci&eacute;n preparado sistema de archivos ra&iacute;z (/) en
/mnt.  Por ejemplo:

<pre>
# <b>mount /dev/sd0a /mnt</b>
</pre>

<li>
Cambie a ese sistema de archivos ra&iacute;z que acaba de montar y
comience con el proceso de restauraci&oacute;n.  Por ejemplo:

<pre>
# <b>cd /mnt</b>
# <b>restore -rs 1 -f /dev/rst0</b>
</pre>

<li>
Como querr&aacute; poder arrancar desde este nuevo disco, haga lo
siguiente para grabar un nuevo MBR en su dispositivo:

<pre>
# <b>fdisk -i sd0</b>
</pre>

<li>
Adem&aacute;s de grabar un nuevo MBR en el controlador,
necesitar&aacute; instalar bloques de arranque para iniciar desde
&eacute;l.  A continuaci&oacute;n puede ver un breve ejemplo:

<pre>
# <b>cp /usr/mdec/boot /mnt/boot</b>
# <b>/usr/mdec/installboot -v /mnt/boot /usr/mdec/biosboot sd0</b>
</pre>

<li>
Su nuevo sistema de archivos ra&iacute;z en el disco fijo deber&iacute;a
estar lo suficientemente preparado como para que pueda iniciar desde
&eacute;l y continuar restaurando el resto de sus sistemas de archivos.
Como su sistema operativo todav&iacute;a no est&aacute; completo,
aseg&uacute;rese de iniciar la copia de seguridad en modo monousuario.
Desde el punto de pedido de la shell, ejecute las siguientes
&oacute;rdenes para desmontar y parar el sistema:

<pre>
# <b>umount /mnt</b>
# <b>halt</b>
</pre>

<li>
Elimine el disquete de instalaci&oacute;n/arranque del dispositivo y
reinicie el sistema.  Desde el punto de arranque de OpenBSD
<kbd>boot&gt;</kbd>, ejecute la siguiente orden:

<pre>
boot&gt; <b>bsd -s</b>
</pre>

<p>
La orden <kbd>bsd -s</kbd> har&aacute; que el n&uacute;cleo del sistema
inicie en modo monousuario, por lo que s&oacute;lo necesitar&aacute; el
sistema de archivos ra&iacute;z (<i><b>/</b></i>).

<li>
Asumiendo que ha llevado a cabo todos los pasos anteriores correctamente
y que no ha cometido ning&uacute;n error, deber&iacute;a acabar viendo
un punto en el que le pedir&aacute; que introduzca un camino para la
shell o que pulse la tecla <kbd>intro</kbd>.  Pulse
<kbd>&lt;intro&gt;</kbd> si va a usar sh.  A continuaci&oacute;n
tendr&aacute; que volver a montar el sistema de archivos ra&iacute;z en
modo de lectura (r) y escritura (w), al contrario que en modo de
s&oacute;lo lectura como hasta ahora.  Ejecute la siguiente orden:

<pre>
# <b>mount -u -w /</b>
</pre>

<li>
Una vez que lo haya vuelto a montar en modo de lectura y escritura,
puede continuar restaurando sus otros sistemas de archivos.  Por
ejemplo:

<pre>
(tabla de particiones simple)
# <b>mount /dev/sd0h /usr; cd /usr; restore -rs 2 -f /dev/rst0</b>

(tabla de particiones m&aacute;s avanzada)
# <b>mount /dev/sd0d /var; cd /var; restore -rs 2 -f /dev/rst0</b>
# <b>mount /dev/sd0e /home; cd /home; restore -rs 3 -f /dev/rst0</b>
# <b>mount /dev/sd0h /usr; cd /usr; restore -rs 4 -f /dev/rst0</b>
</pre>

<p>
Puede usar &quot;<kbd>restore rvsf</kbd>&quot; en lugar de usar
s&oacute;lo &quot;<kbd>rsf</kbd>&quot;, para ver lo nombres de los
objetos mientras los extrae de la copia de seguridad.

<li>
Por &uacute;ltimo, despu&eacute;s de que acabe de restaurar el resto de
sistemas de archivos al disco, reinicie en modo multiusuario.  Si todo
ha salido como lo ha planeado, su sistema volver&aacute; al estado en el
que se encontraba cuando realiz&oacute; la copia de seguridad, y
volver&aacute; a estar preparado para su uso.
</ul>

<a name="MountImage"></a>
<h2>14.10 - C&oacute;mo montar im&aacute;genes de disco en OpenBSD</h2>

<p>
Para montar una imagen de disco (im&aacute;genes ISO, im&aacute;genes de
disco creadas con ´dd´, etc.. ) en OpenBSD, debe configurar un
dispositivo
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vnd&amp;sektion=4">
vnd(4)</a>.  Por ejemplo, si tuviera una imagen ISO ubicada en
<i>/tmp/ISO.image</i>, deber&iacute;a seguir los siguientes pasos para
montar la imagen:

<table border="0" width="650">
        <tr>
                <td nowrap bgcolor="#eeeeee">
<pre>
# <b>vnconfig svnd0 /tmp/ISO.image</b>
# <b>mount -t cd9660 /dev/svnd0c /mnt</b>
</pre>
                </td>
        </tr>
</table>

<p>
Note que, dado que esta imagen es una imagen de CD, debe especificar el
tipo <i>cd9660</i> al montarla.  Esto se debe aplicar a cualquier tipo;
v.g. deber&aacute; usar el tipo <i>ffs</i> cuando monte im&aacute;genes
de disco.

<p>
Para desmontar la imagen use la siguiente orden:

<table border="0" width="650">
        <tr>
                <td nowrap bgcolor="#eeeeee">
<pre>
# <b>umount /mnt</b>
# <b>vnconfig -u svnd0</b>
</pre>
                </td>
        </tr>
</table>

<p>
Para m&aacute;s informaci&oacute;n mire la p&aacute;gina del manual de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vnconfig&amp;sektion=8">vnconfig(8)</a>

<a name="pciideErr"></a>
<h2>14.11 - &iexcl;Ayuda! &iexcl;da errores con PCIIDE!</h2>

<p>
PCI IDE DMA es inestable en muchas combinaciones de <i>hardware</i>.
Hasta hace poco tiempo, la mayor&iacute;a de sistemas operativos
&laquo;m&aacute;s conocidos&raquo; que aseguraban dar soporte para
transferencias DMA con dispositivos IDE, no ten&iacute;an esa
funcionalidad activada de modo predeterminado.

<p>
OpenBSD es agresivo, e intenta usar el modo DMA m&aacute;s alto que
pueda configurar.  Esto corrompe las transferencias de datos en algunas
configuraciones, por culpa de placas base con <i>chipsets</i>
err&oacute;neos, controladoras err&oacute;neas y, o, ruido en los
cables.  Por suerte, los modos Ultra-DMA protegen las transferencias de
datos con un CRC para detectar la corrupci&oacute;n.  Cuando el CRC
Ultra-DMA falla, OpenBSD muestra un mensaje de error e intenta repetir
la operaci&oacute;n.

<pre>
wd2a:  aborted command, interface CRC error reading fsbn 64 of 64-79
(wd2 bn 127; cn 0 tn 2 sn 1), retrying
</pre>

<p>
Despu&eacute;s de un par de fallos, OpenBSD prueba un modo Ultra-DMA
m&aacute;s bajo, pero m&aacute;s estable.  Si se llega al modo 0
Ultra-DMA, el controlador baja de grado hasta el modo PIO.

<p>
Si OpenBSD no consigue bajar el modo, o si el proceso bloquea la
m&aacute;quina, por favor env&iacute;e un
<a href="../../es/report.html">informe sobre el error</a>.


<a name="RAID"></a>
<h2>14.13 - Opciones de RAID para OpenBSD</h2>

<p>
RAID (<i>Redundant Array of Inexpensive Disks</i>) ofrece la oportunidad
de usar dispositivos m&uacute;ltiples para obtener un mejor rendimiento,
m&aacute;s capacidad, y/o redundancia de la que se puede obtener de un
&uacute;nico dispositivo.  Aunque una explicaci&oacute;n completa de los
beneficios y riesgos de RAID no entra en los objetivos de esta
secci&oacute;n, hay un par de puntos que son importantes aqu&iacute;:

<ul>
<li>RAID no tiene nada que ver con las copias de seguridad.
<li>Por s&iacute; solo, RAID no elimina el tiempo de ca&iacute;das.
</ul>

<p>
Si es la primera vez que lee informaci&oacute;n sobre RAID, tenga en
cuenta que esto no es un buen comienzo para explorar RAID.

<h3>Opciones de <i>software</i></h3>

<p>
OpenBSD incluye <i>RAIDframe</i>, una soluci&oacute;n de software de
RAID.  Puede encontrar documentaci&oacute;n sobre <i>RAIDframe</i> en
los siguientes sitios:

<ul>
<li><a href="faq11.html#raid">FAQ 11, RAID</a>
<li><a href="http://www.pdl.cmu.edu/RAIDframe/">Sitio principal de
RAIDframe</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raidctl&amp;sektion=8">p&aacute;gina del manual de raidctl(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raid&amp;sektion=4">p&aacute;gina del manual de raid(4)</a>
</ul>

<p>
<!-- XXXexpires - paragraph need rewriting when 3.1 becomes unsupported -->
Desde la versi&oacute;n 3.1 de OpenBSD, se puede replicar la
partici&oacute;n ra&iacute;z directamente usando la opci&oacute;n
&quot;<tt>Autoconfiguration</tt>&quot; de <i>RAIDframe</i>.

<h3>Opciones de <i>hardware</i></h3>

<p>
Muchas <a href="../../es/plat.html">plataformas</a> de OpenBSD incluyen
soporte para varios productos de <i>hardware</i> de RAID.  Las opciones
var&iacute;an seg&uacute;n la plataforma; mire en la p&aacute;gina de
soporte apropiada para cada una
<a href="../../es/plat.html">aqu&iacute;</a>.

<p>
Otra opci&oacute;n disponible para muchas plataformas es la de los
muchos productos que hacen que dispositivos m&uacute;ltiples
act&uacute;en como un &uacute;nico dispositivo IDE o SCSI, y
est&aacute;n conectados en un adaptador IDE o SCSI normal.  Estos
dispositivos pueden funcionar en casi cualquier plataforma de
<i>hardware</i> que disponga de soporte para SCSI o IDE.

<p>
Algunos de los fabricantes de estos productos:

<ul>
<li><a href="http://www.arcoide.com/">Arco</a>
<li><a href="http://www.accusys.com.tw/">Accusys</a>
<li><a href="http://www.maxtronic.com/">Maxtronic</a>
<li><a href="http://www.infortrend.com/">Infortrend</a>
</ul>

<p>
(Nota:  &eacute;stos son simplemente productos sobre los que los
usuarios de OpenBSD han informado que utilizan, no es ning&uacute;n tipo
de recomendaci&oacute;n ni es una lista exhaustiva).

<h3>No-opciones</h3>

<p>
Una pregunta formulada a menudo en las
<a href="../../es/mail.html">listas de correo</a> es si &laquo;hay
soporte para las controladoras de IDE RAID Promise o HighPoint&raquo;, y
la respuesta es &laquo;No&raquo;.  Estas tarjetas y <i>chips</i> no son
controladores de <i>hardware</i> de RAID reales, sino <i>software</i> de
RAID de arranque asistido por la BIOS.  Como OpenBSD ya dispone de
soporte para <i>software</i> de RAID independiente del <i>hardware</i>,
no hay un deseo entre los desarrolladores de OpenBSD la
implementaci&oacute;n de un soporte especial para estas tarjetas.

<p>
<font color="#0000e0">
<a href="index.html">[&Iacute;ndice de documentos]</a>
<a href="faq12.html">[Secci&oacute;n 12 - Cuestiones sobre plataformas
espec&iacute;ficas]</a>
</font>

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../images/back.gif" border="0" alt="[&iacute;ndice]"></a>
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: faq14.html,v 1.99 ]<br>
$Translation: faq14.html,v 1.55 2009/06/29 18:34:05 ajacoutot Exp $<br>
-->
$OpenBSD: faq14.html,v 1.53 2009/06/29 17:19:48 ajacoutot Exp $
</small>
</body>
</html>
@


1.53
log
@Sync with Steelix CVS
@
text
@d1828 1
a1828 1
$OpenBSD: faq14.html,v 1.50 2001/10/20 16:51:39 horacio Exp $
@


1.52
log
@Sync with Steelix CVS
@
text
@d1824 1
d1826 2
a1827 1
$Translation: faq14.html,v 1.54 2004/01/04 19:59:58 horacio Exp $<br>
@


1.51
log
@Sync with Steelix CVS
@
text
@d12 1
a12 1
<meta name="copyright"     content="Este documento es copyright 1998-2003 de OpenBSD.">
d45 2
a46 1
&quot;Using Drive: 0 Partition 3&quot;.</a>
d821 233
a1058 1
<!-- XXXexpires - paragraph need rewriting when 3.1 becomes unsupported -->
d1063 9
a1071 7
m&aacute;ximo te&oacute;rico de OpenBSD.  En el caso de dispositivos
IDE, el l&iacute;mite es de 128GB, que es el mismo l&iacute;mite que
tiene actualmente la interfaz ATA.  N&oacute;tese que en la
pr&oacute;xima generaci&oacute;n de dispositivos ATA, aquellos con
capacidad mayor de 128G (1G=2^30, no 1.000.000.000, aunque los
fabricantes de dispositivos lo llamar&aacute;n 137G) no tienen soporte
en OpenBSD 3.1 ni en versiones anteriores.
d1073 2
d1081 5
a1085 5
arranque del sistema.  Los cargadores de arranque de OpenBSD para i386
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=biosboot&amp;sektion=8&amp;arch=i386">biosboot(8)</a> y
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">boot(8)</a>)
tambi&eacute;n tienen sus propias limitaciones internas de 8G, heredadas
del l&iacute;mite de una BIOS antigua.
d1123 5
a1127 2
Para que OpenBSD arranque, <i>/bsd</i> debe encontrarse dentro del rango
de la ROM.  Para mayor seguridad, hay una regla muy simple:
d1143 16
d1824 2
a1825 2
Originally [OpenBSD: faq14.html,v 1.95 ]<br>
$Translation: faq14.html,v 1.53 2003/12/30 12:04:40 horacio Exp $<br>
@


1.50
log
@Sync with Steelix CVS
@
text
@d504 3
a506 4
para que funcionen programas como disklabel.  Para operaciones normales,
<i>fsize</i> siempre debe ser 1024, <i>bsize</i> siempre debe ser 8192,
y <i>cpg</i> siempre debe ser 16.  <i>fstype</i> es 4.2BSD.  <i>total
sectors</i> es el tama&ntilde;o total del disco.  Supongamos que
d1568 2
a1569 2
Originally [OpenBSD: faq14.html,v 1.94 ]<br>
$Translation: faq14.html,v 1.52 2003/10/26 21:46:49 horacio Exp $<br>
@


1.49
log
@Sync with Steelix CVS
@
text
@a44 2
<li><a href="#D0P3">14.6 - Cuando arranco el sistema despu&eacute;s de
la instalaci&oacute;n de OpenBSD/i386, se para en<br>
a55 2
<li><a href="#IDEDMA">14.12 - C&oacute;mo forzar el acceso DMA en discos
IDE</a>
a820 203
<a name="D0P3"></a>
<h2>14.6 -  Cuando arranco el sistema despu&eacute;s de
instalaci&oacute;n de OpenBSD/i386, se para en &quot;Using Drive: 0
Partition: 3&quot; - espec&iacute;fico de i386.</h2>

<p>
En realidad esto no es un mensaje de error, sino un aviso del cargador
de arranque del MBR en el que indica desde qu&eacute; dispositivo y
qu&eacute; partici&oacute;n va a arrancar.  El problema es que el
proceso de arranque se para aqu&iacute;.

<p>
Hay dos motivos por los que esto suele ocurrir:  una incompatibilidad
entre la BIOS y el MBR de OpenBSD, o un problema con la geometr&iacute;a
del dispositivo.  Un ejemplo del problema con la geometr&iacute;a del
dispositivo ser&iacute;a si traslad&aacute;ramos un dispositivo desde
una m&aacute;quina a otra, o si actualiz&aacute;ramos una BIOS o
cambi&aacute;ramos su configuraci&oacute;n;  aunque esto tambi&eacute;n
puede ocurrir por motivos desconocidos durante la instalaci&oacute;n.

<p>
<b>Nota:</b>  A partir de la versi&oacute;n 3.1 de OpenBSD, el problema
de compatibilidad de la BIOS deber&iacute;a estar resuelto en casi todos
los sistemas; sin embargo, a&uacute;n podr&iacute;a surgir un problema
con la geometr&iacute;a del controlador del disco, por lo que es posible
que el sistema se colgase despu&eacute;s de este mensaje.

<p>
Para solucionar el problema de compatibilidad con la BIOS, se debe
sustituir el cargador de arranque con uno que sea compatible con el
sistema.  Por suerte, los cargadores de arranque son f&aacute;ciles de
tratar.

<h3>Instalaci&oacute;n del cargador de arranque BootEasy:</h3>

<p>
Para ello es necesario arrancar antes el sistema.  Como no se
podr&aacute; arrancar directamente desde el disco duro, tendremos que
usar un disquete o un CD-ROM de arranque para iniciar el proceso de
arranque.  Cuando el sistema muestre el punto de pedido
'<b>boot&gt;</b>', redirecci&oacute;nelo para que arranque desde el
disco duro:

<pre>
reading boot.......
probing pc0 com0 com1 pci mem [639k 79m a20=on]
disk hd0 fd0
&gt;&gt; OpenBSD BOOT 1.28
boot&gt; <b>boot hd0a:/bsd</b>
</pre>

<p>
Esta orden redirecciona el proceso de arranque al fichero <i>/bsd</i> en
la partici&oacute;n 'a' del primer disco duro, permitiendo de este modo
el arranque.

<p>
<!-- XXXversion -->
Una vez que el sistema haya arrancado, tendr&aacute; que instalar el
cargador de arranque BootEasy.  El archivo se puede encontrar en el
CD-ROM y en las r&eacute;plicas de FTP, en el directorio
<tt>3.3/tools/booteasy/Boot.bin</tt>, y se puede instalar mediante la
siguiente orden de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a> :

<pre>
<!-- XXXversion -->
# <b>fdisk -i -f /mnt/3.3/tools/booteasy/Boot.bin wd0</b>
</pre>

<p>
<!-- XXXversion -->
Se asume que tiene un CD 3.3 montado en <i>/mnt</i>, y que est&aacute;
usando un dispositivo IDE.  Dependiendo de la ubicaci&oacute;n de
<i>Boot.bin</i> y del tipo de disco duro que tenga (un dispositivo SCSI
suele ser 'sd0'), tendr&aacute; que cambiar esta l&iacute;nea de
&oacute;rdenes.  <b>Nota: &iexcl;NO haga esto si su partici&oacute;n
OpenBSD no ocupa el disco por completo!</b>  Al iniciar el MBR de este
modo se crea una partici&oacute;n de OpenBSD que se expande por todo el
disco y que elimina cualquier otra partici&oacute;n, lo que no suele ser
una buena idea.

<p>
BootEasy tiene otra funcionalidad que puede ser de inter&eacute;s aun
cuando no se tengan problemas con el cargador predeterminado:  es capaz
de seleccionar una partici&oacute;n de arranque durante el inicio.  Para
ello pregunta por la partici&oacute;n desde la que se desea arrancar, y
si no introduce una arranca desde la partici&oacute;n activa.  Esto
puede ser de gran utilidad si se tienen varios sistemas operativos en un
mismo disco.  La instalaci&oacute;n de BootEasy para esto se lleva a
cabo desde MS-DOS con el programa <i>BOOTINST.EXE</i>, que se puede
encontrar en el mismo directorio que BootEasy en el CD-ROM y en los
servidores de FTP.

<h3>Instalci&oacute;n del cargador de arranque de MS-DOS:</h3>

<p>
Inicie desde un disco de arranque de Windows 9x &oacute; DOS v6 que
tengan <i>FDISK.EXE</i> instalado.  Cuando el sistema muestre el punto
de pedido de MS-DOS, introduzca lo siguiente:

<pre>
A:\&gt;<b>fdisk /mbr</b>
</pre>

<p>
Deber&iacute;a mostrar un breve acceso al disco, e inmediatamente
despu&eacute;s un punto de pedido de &oacute;rdenes, sin ning&uacute;n
tipo de mensaje.  &quot;<i>Bad command or file name</i>&quot; significa
que el disco que ha usado no tiene <i>FDISK.EXE</i>.  Si lo ha hecho
bien, el mensaje &quot;<i>Using ...</i>&quot; ser&aacute; eliminado, ya
que se habr&aacute; sustituido el c&oacute;digo que produce este
mensaje.  Si ten&iacute;a alg&uacute;n problema de compatibilidad con la
BIOS, &eacute;ste habr&aacute; desaparecido; reinicie y su
instalaci&oacute;n de OpenBSD deber&iacute;a ser correcta ahora.

<p>
Seg&uacute;n algunos informes, esto tambi&eacute;n deber&iacute;a
funcionar con FreeDOS.

<h3>El cargador de arranque OS-BS:</h3>

<p>
Otro cargador de arranque, OS-BS, tambi&eacute;n viene incluido en los
CD-ROM de OpenBSD y en los servidores de FTP, en el directorio
<tt>3.3/tools/osbs135.exe</tt>.  Las p&aacute;ginas de OS-BSD se
encuentran en <a href="http://www.prz.tu-berlin.de/~wolf/os-bs.html">
http://www.prz.tu-berlin.de/~wolf/os-bs.html</a>.

<h3>LILO:</h3>

<p>
El programa LILO para Linux tambi&eacute;n se puede usar.  M&aacute;s
detalles en
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.3/i386/INSTALL.linux">
INSTALL.linux</a>

<h3>C&oacute;mo evitar el problema de compatibilidad de la BIOS:</h3>

<p>
Hay pocas m&aacute;quinas que tengan un problema de compatibilidad con
la BIOS, pero si &eacute;ste es su caso, es bastante f&aacute;cil de
evitar.  El &uacute;nico momento en el que el cargador de OpenBSD se
instala en el sistema durante una instalaci&oacute;n t&iacute;pica es
cuando se responde 'Y' a la pregunta 'Use entire disk for OpenBSD'
(&laquo;&iquest;usar todo el disco?&raquo;).  Si la respuesta es 'N' y
se procede a crear las particiones del disco para OpenBSD de forma
manual, no se substituir&aacute; el cargador de arranque a menos que se
usen las &oacute;rdenes <code>reinit</code> o <code>update</code> de
<i>fdisk</i>.  Por supuesto, se asume que el dispositivo HA INICIADO con
alg&uacute;n tipo de cargador de arranque;  si no es as&iacute; (bien
porque sea nuevo, est&eacute; en blanco o porque haya sido sacado de
otra plataforma), tendr&aacute; que instalar uno antes de que arranque
el sistema.

<h3>C&oacute;mo solucionar un problema con la geometr&iacute;a del
disco:</h3>

<p>
La soluci&oacute;n ideal es la de evitar este problema manteniendo la
misma geometr&iacute;a en el dispositivo, no cambi&aacute;ndola;  sin
embargo, algunas veces no es posible evitarlo, como cuando se traslada
un dispositivo de gran capacidad desde una m&aacute;quina ya vieja que
no tenga soporte para la geometr&iacute;a LBA a una m&aacute;quina nueva
que insista en usar LBA.

<p>
Inicie la m&aacute;quina usando un disco o CD-ROM de arranque tal y como
se ha indicado anteriormente.  Ingrese como superusuario y ejecute las
siguientes &oacute;rdenes:

<pre>
# cp /usr/mdec/boot /boot
# /usr/mdec/installboot -v /boot /usr/mdec/biosboot wd0
</pre>

<p>
Reinicie y el sistema deber&iacute;a funcionar correctamente.

<p>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=installboot&amp;sektion=8&amp;arch=i386">installboot(8)</a>
instala y configura la partici&oacute;n del cargador de arranque,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=biosboot&amp;sektion=8&amp;arch=i386">biosboot(8)</a>,
que carga
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">boot(8)</a>.  
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">boot(8)</a> 
es el m&oacute;dulo que carga el n&uacute;cleo del sistema en la RAM.
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=biosboot&amp;sektion=8&amp;arch=i386">biosboot(8)</a>
tiene una tabla que apunta a la ubicaci&oacute;n f&iacute;sica (de
acuerdo con la BIOS del sistema) de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">boot(8)</a>.
Si cambia algo que a su vez cambie la percepci&oacute;n que tiene la
BIOS de la ubicaci&oacute;n de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">boot(8)</a>, 
tendr&aacute; que volver a ejecutar
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=installboot&amp;sektion=8&amp;arch=i386">installboot(8)</a>
como antes para reiniciar la tabla que apunta a
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">boot(8)</a>.

<p>
V&eacute;ase <a href="#InstBoot">la secci&oacute;n 14.8</a> para
m&aacute;s informaci&oacute;n.

d1455 2
a1456 1
wd2a:  aborted command, interface CRC error reading fsbn 64 of 64-79 (wd2 bn 127; cn 0 tn 2 sn 1), retrying
a1468 54
<a name="IDEDMA"></a>
<h2>14.12 - Forcing DMA access for IDE disks</h2>

<p>
Con el c&oacute;digo PCI IDE es posible que no se reconozca alg&uacute;n
<i>chipset</i>.  Si esto nos ocurriera ver&iacute;amos un mensaje como
el siguiente:

<blockquote>
<pre>
pciide0: DMA, (unused)
</pre>
</blockquote>

<p>
Si vemos este mensaje podemos obligarle a usar el modo DMA usando 'flags
0x0001' en la entrada pciide del fichero de configuraci&oacute;n del
n&uacute;cleo, de forma que quedara algo como esto:

<blockquote>
<pre>
pciide* at pci ? dev ? function ? flags 0x0001
</pre>
</blockquote>

<p>
Despu&eacute;s de esto, el c&oacute;digo pciide intentar&aacute; usar el
modo DMA tanto si sabe c&oacute;mo hacerlo con nuestro <i>chipset</i>
como si no lo sabe.  Si esto funciona y el sistema logra pasar la
comprobaci&oacute;n de <code>fsck</code> e iniciar, lo m&aacute;s seguro
es que funcione para siempre.  Pero si no funcionara y el sistema se
colgara o hubiera un p&aacute;nico despu&eacute;s del arranque, entonces
no podemos usar el modo DMA (todav&iacute;a, hasta que se a&ntilde;ada
el soporte para ese <i>chipset</i>).  La documentaci&oacute;n para el
<i>chipset</i> de nuestra controladora PCI-IDE, si se tiene, es un buen
comienzo para a&ntilde;adir soporte para el <i>chipset</i> en el
c&oacute;digo PCI-IDE.  O se puede buscar en el sitio del fabricante en
Internet, o ponerse en contacto con &eacute;l.  Si la controladora
PCI-IDE es parte de la placa base, antes ser&aacute; necesario adivinar
qui&eacute;n es el fabricante del <i>chipset</i>.

<p>
Se sabe si el soporte de DMA est&aacute; activado cuando se ve este
mensaje durante el arranque:

<blockquote>
<pre>
cd0(pciide0:1:0): using PIO mode 3, DMA mode 1
</pre>
</blockquote>

<p>
Esto quiere decir que pciide0, canal 1, controladora 0 (que parece ser
un CD-ROM ATAPI) est&aacute; usando transferencias de datos DMA.
d1569 2
a1570 2
Originally [OpenBSD: faq14.html,v 1.92 ]<br>
$Translation: faq14.html,v 1.51 2003/10/10 13:44:45 horacio Exp $<br>
@


1.48
log
@sync with steelix translation CVS
@
text
@d1137 1
a1137 1
con normalidad, ponga un disquete de arranque (o use un CDROM con
d1829 2
a1830 2
Originally [OpenBSD: faq14.html,v 1.91 2003/08/22 13:11:53 nick Exp ]<br>
$Translation: faq14.html,v 1.50 2003/08/23 14:52:29 horacio Exp $<br>
@


1.47
log
@sync with steelix translation CVS
@
text
@d1793 1
d1829 2
a1830 2
Originally [OpenBSD: faq14.html,v 1.90 2003/08/05 19:54:07 nick Exp ]<br>
$Translation: faq14.html,v 1.49 2003/08/11 10:11:09 horacio Exp $<br>
@


1.46
log
@sync with steelix translation CVS
@
text
@d27 2
a28 1
<a href="faq12.html">[Secci&oacute;n 12 - Usuarios avanzados]</a>
d1818 2
a1819 1
<a href="faq12.html">[Secci&oacute;n 12 - Usuarios avanzados]</a>
d1828 2
a1829 2
Originally [OpenBSD: faq14.html,v 1.88 2003/07/25 20:05:19 nick Exp ]<br>
$Translation: faq14.html,v 1.48 2003/07/26 16:34:03 horacio Exp $<br>
@


1.45
log
@sync with steelix translation CVS
@
text
@d27 1
a27 1
<a href="faq13.html">[Secci&oacute;n 13 - IPsec]</a>
d1817 1
a1817 1
<a href="faq13.html">[Secci&oacute;n 13 - IPsec]</a>
d1826 2
a1827 2
Originally [OpenBSD: faq14.html,v 1.87 2003/07/14 20:15:56 nick Exp ]<br>
$Translation: faq14.html,v 1.47 2003/07/19 18:23:00 horacio Exp $<br>
@


1.44
log
@sync with steelix translation CVS
@
text
@d1826 2
a1827 2
Originally [OpenBSD: faq14.html,v 1.86 2003/07/04 13:09:55 nick Exp ]<br>
$Translation: faq14.html,v 1.46 2003/07/04 22:11:07 horacio Exp $<br>
@


1.43
log
@sync with steelix translation CVS
@
text
@d65 1
a65 1
<h2>C&oacute;mo usar disklabel</h2>
d67 1
a67 1
<h3>Tabla de contenidos de disklabel</h3>
a332 1
<a name="14.2"></a>
a462 1
<a name="14.3"></a>
a604 1
<a name="14.4"></a>
a770 1
<a name="14.5"></a>
d774 17
a790 22
Durante los &uacute;ltimos a&ntilde;os, Kirk McKusick ha estado
trabajando en algo llamado &quot;Soft Updates&quot;.  Esto se basa en la
idea propuesta por Greg Ganger y Yale Patt de imponer un orden parcial
sobre las operaciones en la memoria intermedia para permitir que los
requerimientos de escritura sincr&oacute;nica de entradas de directorio
sean eliminadas del c&oacute;digo FFS.  En resumen, un gran incremento
en el rendimiento de la escritura en disco.

<p>
Como &quot;Soft Updates&quot; todav&iacute;a se encuentra en fase de
desarrollo, es necesario ejecutar
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fsck&amp;sektion=8">fsck(8)</a>
despu&eacute;s de una interrupci&oacute;n de la m&aacute;quina sin una
secuencia de apagado limpia, pero esto es algo que se solucionar&aacute;
en las pr&oacute;ximas versiones.

<p>
Puede encontrar m&aacute;s detalles sobre &quot;Soft Updates&quot; en la
documentaci&oacute;n de
<a href="http://www.ece.cmu.edu/~ganger/papers/CSE-TR-254-95/">Ganger y
Patt</a> y de
<a href="http://www.mckusick.com/softdep/index.html">McKusick</a>.
a824 1
<a name="14.6"></a>
d949 1
a949 1
<i>2.9/tools/osbs135.exe</i>.  Las p&aacute;ginas de OS-BSD se
a1027 1
<a name="14.7"></a>
a1110 1
<a name="14.8"></a>
a1175 1
<a name="14.9"></a>
a1593 1
<a name="14.10"></a>
a1640 1
<a name="14.11"></a>
d1674 1
a1674 1
<a name= "IDEDMA"></a>
d1826 2
a1827 2
Originally [OpenBSD: faq14.html,v 1.83 2003/05/01 01:47:41 nick Exp ]<br>
$Translation: faq14.html,v 1.44 2003/06/22 21:28:32 horacio Exp $<br>
@


1.42
log
@
changes for OpenBSD 3.3
@
text
@d276 1
a276 1
# <b>disklabel wd0</b> <small>&lt;----- O cualquier dispositivo de disco que quiera ver</small>
d494 1
a494 1
<small><i>(la pantalla se queda en blanco y aparece su $EDITOR)</i></small>
d496 1
a496 1
<small><i>...bla...</i></small>
d499 1
a499 1
<small><i>...bla...</i></small>
d1183 2
a1184 2
# <b>./installboot /boot biosboot sd0</b> <small>(o cualquier otro 
dispositivo que sea su disco)</small>
d1584 1
a1584 1
<small>(tabla de particiones simple)</small>
d1587 1
a1587 1
<small>(tabla de particiones m&aacute;s avanzada)</small>
d1842 1
a1842 1
$Translation: faq14.html,v 1.43 2003/05/01 18:42:42 horacio Exp $<br>
@


1.41
log
@
sync with steelix translation CVS
@
text
@d374 1
d895 1
a895 1
<i>3.0/tools/booteasy/Boot.bin</i>, y se puede instalar mediante la
d901 1
a901 1
# <b>fdisk -i -f /mnt/3.0/tools/booteasy/Boot.bin wd0</b>
d906 1
a906 1
Se asume que tiene un CD 3.0 montado en <i>/mnt</i>, y que est&aacute;
d968 1
a968 1
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.0/i386/INSTALL.linux">
d1841 2
a1842 2
Originally [OpenBSD: faq14.html,v 1.82 2003/04/04 17:49:08 nick Exp ]<br>
$Translation: faq14.html,v 1.42 2003/04/06 22:13:41 horacio Exp $<br>
@


1.40
log
@
sync with steelix translation CVS
@
text
@d890 1
d899 1
d904 1
d1042 1
d1779 1
d1840 2
a1841 2
Originally [OpenBSD: faq14.html,v 1.81 2003/03/18 03:41:04 nick Exp ]<br>
$Translation: faq14.html,v 1.41 2003/03/18 12:33:28 horacio Exp $<br>
@


1.39
log
@
sync with steelix translation CVS
@
text
@d24 8
a31 2
<h2><font color="#e00000">14 - Configuraci&oacute;n del
disco</font></h2><hr>
d1825 1
a1825 1
<a href="index.html">[Volver al &iacute;ndice principal]</a>
d1829 1
a1830 1
<p>
d1835 2
a1836 2
Originally [OpenBSD: faq14.html,v 1.80 2003/03/11 21:03:38 nick Exp ]<br>
$Translation: faq14.html,v 1.40 2003/03/12 20:15:40 horacio Exp $<br>
@


1.38
log
@
sync with steelix translation CVS
@
text
@a1 1

d470 3
a472 1
plataformas pueden ignorar esta parte.
d552 1
a552 1
# <b>newfs wd1a</b>
d567 1
a567 1
# <b>mount /dev/wd1a /u</b>
d572 1
a572 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&amp;sektion=5">/etc/fstab(5)</a>
d575 1
a575 1
/dev/wd1a /u ffs rw 1 1
d581 2
a582 2
/mnt, y usar 'cpio -pdum' para copiar /usr/local al directorio /mnt.  A
continuaci&oacute;n editar el fichero
d584 1
a584 1
para indicar que la partici&oacute;n /usr/local es ahora /dev/wd1a (su
d588 1
a588 1
<b>/dev/wd1a /usr/local ffs rw 1 1</b>
d592 1
a592 1
Reinicie en modo monousuario... <b>boot -s</b> y copie el fichero
d1101 2
d1829 2
a1830 2
Originally [OpenBSD: faq14.html,v 1.78 2003/02/28 00:34:28 nick Exp ]<br>
$Translation: faq14.html,v 1.39 2003/03/01 11:24:49 horacio Exp $<br>
@


1.37
log
@
sync with steelix translation CVS
@
text
@d76 1
a76 1
Antes que nada se recomienda leer la p&aacute;gina del manual de
d85 1
a85 1
sobre sus sistemas de archivos (<i>filesystems</i>).  Esta
d90 2
a91 2
m&aacute;s eficiente.  Se puede ver documentaci&oacute;n m&aacute;s a
fondo sobre disklabel en la p&aacute;gina del manual de
d97 1
a97 1
s&oacute;lo puede tener cuatro particiones primarias (particiones que
d100 1
a100 1
usa una de esas particiones primarias para almacenar <b>todas</b>
d102 2
a103 2
<i>/var</i>, ...), y todav&iacute;a nos quedan tres particiones libres
para otros sistemas operativos.
d115 2
a116 2
programa que usa para crear clasificaciones separadas que contengan los
puntos de montaje separados es
d126 6
a131 6
tendremos ninguna clasificaci&oacute;n creada, y por lo tanto deben ser
creadas antes.  La primera clasificaci&oacute;n que tendremos que crear
es la clasificaci&oacute;n '<b>a</b>'.  Esta clasificaci&oacute;n DEBE
ser en la que se monte el sistema de archivos <b>/</b>.  Se puede ver
una lista de las particiones que se recomienda crear y sus respectivos
tama&ntilde;os recomendados en la
d133 2
a134 2
frecuentes.  Para servidores se recomienda que, por lo menos, se creen
estas particiones separadas.  Para los usuarios de computadoras
d140 1
a140 1
explicado lo m&aacute;s b&aacute;sico, pasemos a un ejemplo de la
d606 3
a608 4
l&iacute;mites por proceso con la utilidad de csh
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=unlimit&amp;sektion=1">unlimit(1)</a>,
o de sh
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ulimit&amp;sektion=1">ulimit(1)</a>)
d949 2
a950 2
encuentran en
<a href="http://www.prz.tu-berlin.de/~wolf/os-bs.html">http://www.prz.tu-berlin.de/~wolf/os-bs.html</a>.
d957 2
a958 1
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.0/i386/INSTALL.linux">INSTALL.linux</a>
d1600 4
a1603 3
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vnd&amp;sektion=4">vnd(4)</a>.
Por ejemplo, si tuviera una imagen ISO ubicada en <i>/tmp/ISO.image</i>,
deber&iacute;a seguir los siguientes pasos para montar la imagen:
d1826 2
a1827 2
Originally [OpenBSD: faq14.html,v 1.77 2003/02/25 04:00:10 david Exp ]<br>
$Translation: faq14.html,v 1.38 2003/02/25 12:22:31 horacio Exp $<br>
@


1.36
log
@
sync with steelix translation CVS
@
text
@d5 1
a5 1
<title>14.0 - Configuraci&oacute;n del disco</title>
d25 1
a25 1
<h2><font color="#e00000">14.0 - Configuraci&oacute;n del
d1816 1
a1816 1
<a href="faq13.html">[Secci&oacute;n 13.0 - IPsec]</a>
d1825 2
a1826 2
Originally [OpenBSD: faq14.html,v 1.74 2003/01/01 13:02:00 nick Exp ]<br>
$Translation: faq14.html,v 1.36 2003/01/06 18:33:12 horacio Exp $<br>
@


1.35
log
@
sync with steelix translation CVS
@
text
@d13 1
a13 1
<meta name="copyright"     content="Este documento es copyright 1998-2002 de OpenBSD.">
d1825 2
a1826 2
Originally [OpenBSD: faq14.html,v 1.73 2002/12/23 02:34:42 nick Exp ]<br>
$Translation: faq14.html,v 1.35 2002/12/29 19:32:52 horacio Exp $<br>
@


1.34
log
@
sync with badlands translation CVS
@
text
@d30 3
a32 3
<li><a href="#disklabel">14.1 - Utilizaci&oacute;n del
<em>disklabel</em> de OpenBSD</a>
<li><a href="#fdisk">14.2 - Utilizaci&oacute;n del <em>fdisk</em> de
d37 1
a37 1
de intercambio (<em>swap</em></a>
d77 1
a77 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8&amp;format=html">disklabel(8)</a>.
d80 13
a92 14
Las &laquo;clasificaciones del disco&raquo; (<em>disklabels</em>) se
crean para permitir una interfaz eficiente entre el disco y los
controladores del disco que contiene el n&uacute;cleo del sistema
(<em>kernel</em>).  Estas clasificaciones contienen cierta
informaci&oacute;n sobre el disco, como la geometr&iacute;a del
controlador e informaci&oacute;n sobre sus sistemas de archivos
(<em>filesystems</em>).  Esta informaci&oacute;n la utiliza el programa
de arranque para cargar el controlador y para saber en qu&eacute; parte
del controlador se encuentran los sistemas de archivos.  Las
clasificaciones tambi&eacute;n se usan en conjunto con los sistemas de
archivos para crear un entorno m&aacute;s eficiente.  Se puede ver
documentaci&oacute;n m&aacute;s a fondo sobre disklabel en la
p&aacute;gina del manual de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=5&amp;format=html">disklabel(5)</a>.
d99 5
a103 5
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8&amp;format=html">disklabel(8)</a>,
usa una de esas particiones primarias para almacenar
<strong>todas</strong> nuestras particiones de OpenBSD (<em>swap</em>,
<em>/</em>, <em>/usr</em>, <em>/var</em>, ...), y todav&iacute;a nos
quedan tres particiones libres para otros sistemas operativos.
d112 2
a113 2
(<em>labels</em>).  Para los usuarios de plataformas i386, &eacute;ste
es el paso que viene justo despu&eacute;s de usar
d117 1
a117 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8&amp;format=html">disklabel(8)</a>.
d128 4
a131 4
es la clasificaci&oacute;n '<strong>a</strong>'.  Esta
clasificaci&oacute;n DEBE ser en la que se monte el sistema de archivos
<strong>/</strong>.  Se puede ver una lista de las particiones que se
recomienda crear y sus respectivos tama&ntilde;os recomendados en la
d136 9
a144 9
s&oacute;lo punto de montaje para <strong>/</strong>.  Cuando se cree
por primera vez esta partici&oacute;n ra&iacute;z (clasificaci&oacute;n
<strong>a</strong>), hay que tener en cuenta que ser&aacute; necesario
dejar ALGO de espacio para la clasificaci&oacute;n de <em>swap</em>.
Ahora que ya hemos explicado lo m&aacute;s b&aacute;sico, pasemos a un
ejemplo de la utilizaci&oacute;n de disklabel durante la
instalaci&oacute;n.  En este primer ejemplo se asume que OpenBSD va a
ser el &uacute;nico sistema operativo en la m&aacute;quina, y que se
llevar&aacute; a cabo una instalaci&oacute;n completa.
d147 1
a147 1
<em>N. del T.:  el texto que sigue a continuaci&oacute;n est&aacute;
d149 1
a149 1
instalaci&oacute;n el texto aparecer&aacute; en ingl&eacute;s</em>
d161 1
a161 1
partici&oacute;n ra&iacute;z y otra <em>swap</em>.
d169 4
a172 4
&gt; <strong>d a</strong>
&gt; <strong>a a</strong>
offset: [63] <strong>&lt;Intro&gt;</strong>
size: [16386237] <strong>64M</strong>
d174 8
a181 8
FS type: [4.2BSD] <strong>&lt;Intro&gt;</strong>
mount point: [none] <strong>/</strong>
fragment size: [1024] <strong>&lt;Intro&gt;</strong>
block size: [8192] <strong>&lt;Intro&gt;</strong>
cpg: [16] <strong>&lt;Intro&gt;</strong>
&gt; <strong>a b</strong>
offset: [131103] <strong>&lt;Intro&gt;</strong>
size: [16255197] <strong>64M</strong>
d183 1
a183 1
FS type: [swap] <strong>&lt;Intro&gt;</strong>
d188 13
a200 14
montada en <strong>/</strong>, y una partici&oacute;n <em>swap</em> de
64MB.  Note que empieza (&quot;offset&quot;) en el sector 63.  En la
parte correspondiente al tama&ntilde;o, disklabel muestra su
tama&ntilde;o en sectores; sin embargo no es necesario introducirlos en
el mismo formato.  Como en el ejemplo anterior, puede introducir los
tama&ntilde;os de la forma <em>64 Megabytes = 64M</em> y <em>2 Gigabytes
= 2G</em>.  Disklabel los redondear&aacute; hasta el cilindro m&aacute;s
cercano.  Tambi&eacute;n notar&aacute; en el ejemplo anterior que
disklabel asume que la clasificaci&oacute;n '<strong>b</strong>'
ser&aacute; <em>swap</em>.  Esto es correcto ya que el n&uacute;cleo del
sistema GENERIC est&aacute; configurado para buscar <em>swap</em> en la
clasificaci&oacute;n <strong>b</strong>, y todo lo que usted debe hacer
es seguir esta gu&iacute;a y usar <strong>b</strong> como su &aacute;rea
de <em>swap</em>.
d210 3
a212 3
&gt; <strong>a d</strong>
offset: [262143] <strong>&lt;Intro&gt;</strong>
size: [16124157] <strong>64M</strong>
d214 8
a221 8
FS type: [4.2BSD] <strong>&lt;Intro&gt;</strong>
mount point: [none] <strong>/tmp</strong>
fragment size: [1024] <strong>&lt;Intro&gt;</strong>
block size: [8192] <strong>&lt;Intro&gt;</strong>
cpg: [16] <strong>&lt;Intro&gt;</strong>
&gt; <strong>a e</strong>
offset: [393183] <strong>&lt;Intro&gt;</strong>
size: [15993117] <strong>64M</strong>
d223 5
a227 5
FS type: [4.2BSD] <strong>&lt;Intro&gt;</strong>
mount point: [none] <strong>/var</strong>
fragment size: [1024] <strong>&lt;Intro&gt;</strong>
block size: [8192] <strong>&lt;Intro&gt;</strong>
cpg: [16] <strong>&lt;Intro&gt;</strong>
d232 1
a232 1
el inicio del sector (<em>offset</em>) lo averigua de forma
d235 2
a236 3
clasificaci&oacute;n '<strong>c</strong>' representa a todo el disco.
Por este motivo no debe tocar la clasificaci&oacute;n
<strong>c</strong>.
d245 2
a246 2
&gt; <strong>w</strong>
&gt; <strong>q</strong>
d250 2
a251 2
<strong>*NOTA*</strong> - Para usuarios con discos grandes.  Si la BIOS
de su equipo no tiene soporte para el tama&ntilde;o de su disco, OpenBSD
d271 1
a271 1
# <strong>disklabel wd0</strong> <small>&lt;----- O cualquier dispositivo de disco que quiera ver</small>
d308 1
a308 1
# <strong>disklabel -E wd0</strong>
d317 1
a317 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8&amp;format=html">disklabel(8)</a>.
d319 1
a319 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8&amp;format=html">disklabel(8)</a>
d324 1
a324 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8&amp;format=html">disklabel(8)</a>.
d334 1
a334 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;apropos=0&amp;sektion=8&amp;arch=i386&amp;format=html">fdisk(8)</a>
d341 1
a341 1
archivos, <em>swap</em>, etc... ).  Puede dividir el espacio de sus
d343 2
a344 2
Monousuario&raquo; (<strong>boot -s</strong> - &quot;Single User
Mode&quot;).  Fdisk tambi&eacute;n configura el MBR de los discos.
d348 3
a350 3
necesitar&aacute; <strong>UNA</strong> partici&oacute;n de OpenBSD, y a
continuaci&oacute;n usar disklabel para poner en ella una <em>swap</em>
y un sistema de archivos.
d357 1
a357 1
# <strong>fdisk fd0</strong>
d384 2
a385 2
Pues bien, para ello debemos usar el indicador <strong>-e</strong>, que
nos trasladar&aacute; a una l&iacute;nea de &oacute;rdenes desde la que
d389 1
a389 1
# <strong>fdisk -e wd0</strong>
d391 1
a391 1
fdisk: 1&gt; <strong>help</strong>
d411 2
a412 3
debe asegurarse de contestar <strong>N</strong> cuando le pregunte si
quiere guardar los cambios, y de que NO usa la orden
<strong>write</strong>.
d416 1
a416 1
usar cuando escoja el indicador <strong>-e</strong>.
d419 8
a426 9
<li><strong>help</strong> Mostrar una lista de las &oacute;rdenes
comprensibles para fdisk en el modo de edici&oacute;n interactiva.
<li><strong>reinit</strong> Iniciar la copia residente en memoria del
bloque de arranque seleccionado.
<li><strong>disk</strong> Mostrar la geometr&iacute;a del dispositivo
que haya verificado fdisk.  Si lo desea, puede editarla para aplicarle
cambios.
<li><strong>setpid</strong> Cambiar el identificador de particiones de
la entrada en la tabla para la partici&oacute;n indicada.  Esta orden es
d429 26
a454 29
<li><strong>edit</strong> Editar una cierta entrada en la tabla en la
copia residente en memoria del bloque de arranque actual.  Puede
editarla en modo de geometr&iacute;a de la BIOS o en modo de sectores de
inicio y tama&ntilde;os.
<li><strong>flag</strong> Activar una cierta entrada en la tabla de
particiones como partici&oacute;n de arranque.  Solamente se puede
marcar una entrada como partici&oacute;n de arranque.  Si quiere
arrancar desde una partici&oacute;n extendida, tendr&aacute; que marcar
la entrada de la partici&oacute;n en la tabla como partici&oacute;n de
arranque.
<li><strong>update</strong> Actualizar el c&oacute;digo de la
m&aacute;quina en la copia residente en memoria del bloque de arranque
seleccionado.
<li><strong>select</strong> Seleccionar y cargar en memoria el bloque de
arranque que se&ntilde;ala a la entrada en la tabla de particiones
extendidas del bloque de arranque actual.
<li><strong>print</strong> Mostrar en pantalla la copia residente en
memoria del bloque de arranque seleccionado y su tabla MBR.
<li><strong>write</strong> Grabar la copia residente en memoria del
bloque de arranque al disco.  Le pedir&aacute; que confirme esta
operaci&oacute;n.
<li><strong>exit</strong> Salir del nivel actual de fdisk, volviendo al
bloque de arranque residente en memoria previamente seleccionado, o
saliendo completamente del programa si no hubiera ninguno.
<li><strong>quit</strong> Salir del nivel actual de fdisk, volviendo al
bloque de arranque residente en memoria previamente seleccionado, o
saliendo completamente del programa si no hubiera ninguno.  A diferencia
de <strong>exit</strong>, no guarda los cambios del bloque modificado.
<li><strong>abort</strong> Salir del programa sin guardar cambios.
d462 1
a462 1
Una vez que ya tenga su disco instalado <strong>CORRECTAMENTE</strong>,
d464 3
a466 3
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;apropos=0&amp;sektion=8&amp;arch=i386&amp;format=html">fdisk(8)</a>
(<em>s&oacute;lo i386</em>) y
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;apropos=0&amp;sektion=8&amp;format=html">disklabel(8)</a>
d474 1
a474 1
# <strong>fdisk -i sd2</strong>
d484 1
a484 1
# <strong>disklabel -e sd2</strong>
d486 1
a486 1
<small><em>(la pantalla se queda en blanco y aparece su $EDITOR)</em></small>
d488 1
a488 1
<small><em>...bla...</em></small>
d491 1
a491 1
<small><em>...bla...</em></small>
d500 15
a514 15
Ignore la partici&oacute;n <strong>c</strong>, siempre est&aacute;
ah&iacute; y es para que funcionen programas como disklabel.  Para
operaciones normales, <em>fsize</em> siempre debe ser 1024,
<em>bsize</em> siempre debe ser 8192, y <em>cpg</em> siempre debe ser
16.  <em>fstype</em> es 4.2BSD.  <em>total sectors</em> es el
tama&ntilde;o total del disco.  Supongamos que &eacute;ste es un disco
de 3GB;  tres gigabytes, en t&eacute;rminos del fabricante del disco,
son 3000 megabytes.  Divida 6185088 entre 3000 (use
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bc&amp;sektion=1">bc(1)</a>)
y obtendr&aacute; 2061.  Por lo tanto, para crear particiones para a, d,
e, f, g, ... simplemente multiplique X*2061 y obtendr&aacute; el
n&uacute;mero de megabytes de espacio en esa partici&oacute;n.  El
sector de inicio (<em>offset</em>) para su primera partici&oacute;n
nueva debe ser el mismo que el &quot;<em>sectors/track</em>&quot; que le
haya dado anteriormente la salida de disklabel.  En este caso es 63.  El
d517 2
a518 2
sector de inicio de la misma (excepto la partici&oacute;n
<strong>c</strong>, ya que no juega ning&uacute;n papel aqu&iacute;).
d532 12
a543 13
<strong>&iexcl;Si todo esto le parece complicado e innecesario, puede
usar disklabel -E para obtener el mismo modo de particiones que tiene en
su disco de instalaci&oacute;n!</strong> Ah&iacute; puede usar
&laquo;96M&raquo; para especificar &laquo;96 megabytes&raquo; (o con un
disco lo bastante grande, 96G para 96 gigabytes).  Desafortunadamente,
el modo -E usa la geometr&iacute;a del disco de la BIOS, no la
geometr&iacute;a del disco real, y con frecuencia &eacute;stas no son
las mismas.  Para evitar esta limitaci&oacute;n, escriba 'g d' para la
'geometr&iacute;a del disco'.  Otras opciones son 'g b' para la
'geometr&iacute;a de la bios' y 'g u' para la 'geometr&iacute;a del
usuario', o simplemente lo que indique la
&laquo;clasificaci&oacute;n&raquo; (<em>label</em>) antes de que
disklabel efect&uacute;e alg&uacute;n cambio.
d548 1
a548 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&amp;apropos=0&amp;sektion=8&amp;format=html">newfs(8)</a>.
d551 1
a551 1
# <strong>newfs wd1a</strong>
d566 1
a566 1
# <strong>mount /dev/wd1a /u</strong>
d586 3
a588 3
<ul>
<strong>/dev/wd1a /usr/local ffs rw 1 1</strong>
</ul>
d591 1
a591 1
Reinicie en modo monousuario... <strong>boot -s</strong> y copie el
d600 1
a600 2
<h2>14.4 - C&oacute;mo usar un fichero como memoria de
<em>swap</em></h2>
d604 4
a607 4
(<em>&quot;swap&quot;</em>) porque obtiene errores del tipo
&quot;virtual memory exhausted&quot;, deber&iacute;a intentar antes
elevar los l&iacute;mites por proceso con la utilidad de csh
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=unlimit&amp;sektion=1&amp;format=html">unlimit(1)</a>,
d609 1
a609 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ulimit&amp;sektion=1&amp;format=html">ulimit(1)</a>)
d612 4
a615 5
Para el uso de un fichero como memoria de intercambio (<em>swap
file</em>) no es estrictamente necesaria la compilaci&oacute;n de un
n&uacute;cleo del sistema personalizado, pero en este documento
mostraremos c&oacute;mo a&ntilde;adir espacio <em>swap</em> de las dos
formas.
d618 1
a618 1
<h3>Usar un fichero como <em>swap</em></h3>
d621 1
a621 1
Usar un fichero como memoria de <em>swap</em> es la forma m&aacute;s
d623 2
a624 2
adicional del espacio de <em>swap</em>.  El fichero no debe residir en
un sistema de archivos que tenga SoftUpdates activado (se encuentra
d626 1
a626 1
cu&aacute;nta memoria de <em>swap</em> tiene en ese momento y
d628 1
a628 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=swapctl&amp;sektion=8&amp;format=html">swapctl(8)</a>,
d632 1
a632 1
$ <strong>swapctl -l</strong>
d639 1
a639 1
como memoria de <em>swap</em> y sus estad&iacute;sticas actuales.  En el
d642 1
a642 1
<em>swap</em> (si lo vi&eacute;ramos con disklabel, lo mostrar&iacute;a
d650 1
a650 1
<em>swap</em> es crear el fichero.  El mejor modo de hacerlo es con la
d652 3
a654 3
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=1&amp;format=html">dd(1)</a>.
He aqu&iacute; un ejemplo de c&oacute;mo crear el fichero
<em>/var/swap</em>, que tendr&aacute; un tama&ntilde;o de 32MB.
d657 1
a657 1
$ <strong>sudo dd if=/dev/zero of=/var/swap bs=1k count=32768</strong>
d665 1
a665 1
como memoria de <em>swap</em>.  Para activarlo, use la siguiente orden:
d668 2
a669 2
$ <strong>sudo chmod 600 /var/swap</strong>
$ <strong>sudo swapctl -a /var/swap</strong>
d674 1
a674 1
de nuestros dispositivos de <em>swap</em>.
d677 1
a677 1
$ <strong>swapctl -l</strong>
d686 2
a687 2
como <em>swap</em>, debe a&ntilde;adir una l&iacute;nea a su fichero
<em>/etc/fstab</em>, para que el fichero tambi&eacute;n se active en el
d689 1
a689 1
tendr&aacute; este dispositivo de <em>swap</em> configurado.
d692 1
a692 1
$ <strong>cat /etc/fstab</strong>
d698 1
a698 1
<h3>Usar <em>swap</em> a trav&eacute;s de un dispositivo vnode</h3>
d702 6
a707 6
a&ntilde;adir m&aacute;s espacio de <em>swap</em>.  Para usar
permanentemente un fichero como memoria de <em>swap</em>, primero
compile un n&uacute;cleo con vnd0c como <em>swap</em>.  Si su sistema de
archivos ra&iacute;z es wd0a, entonces wd0b es el <em>swap</em> anterior
y debe usar la siguiente l&iacute;nea en el fichero de
configuraci&oacute;n del n&uacute;cleo (si tiene dudas, lea el
d717 2
a718 2
usar&aacute; como memoria de <em>swap</em>.  Debe hacerlo usando la
misma orden que en los ejemplos anteriores.
d721 1
a721 1
$ <strong>sudo dd if=/dev/zero of=/var/swap bs=1k count=32768</strong>
d729 2
a730 2
<em>/etc/fstab</em>.  Aqu&iacute; tiene una l&iacute;nea de ejemplo de
c&oacute;mo arrancar con este dispositivo como <em>swap</em>.
d733 1
a733 1
$ <strong>cat /etc/fstab</strong>
d741 1
a741 1
configurar el dispositivo como memoria de <em>swap</em>.  Para ello
d743 1
a743 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vnconfig&amp;sektion=8&amp;format=html">vnconfig(8)</a>.
d746 1
a746 1
$ <strong>sudo vnconfig -c -v vnd0 /var/swap</strong>
d752 1
a752 1
<em>swap</em>.  Lo haremos como en los ejemplos anteriores, usando
d754 1
a754 1
a&ntilde;adido a nuestra lista de dispositivos de <em>swap</em>.
d757 2
a758 2
$ <strong>sudo swapctl -a /dev/vnd0c</strong>
$ <strong>swapctl -l</strong>
d795 1
a795 1
Para activar <em>Softupdates</em>, el n&uacute;cleo debe estar compilado
d799 1
a799 1
<strong>option FFS_SOFTUPDATES</strong>
d805 1
a805 1
La activaci&oacute;n de <em>Soft Updates</em> se debe realizar con una
d809 1
a809 1
se puede indicar que se active <em>soft updates</em> en esa
d812 2
a813 2
para una partici&oacute;n <em>sd0a</em> que queremos que se monte con
<em>soft updates</em> activado.
d820 5
a824 6
Nota para los usuarios de sparc:  no se debe activar <em>soft
updates</em> en las m&aacute;quinas sun4 o sun4c.  Estas arquitecturas
s&oacute;lo tienen soporte para una cantidad de memoria del
n&uacute;cleo muy limitada, y no pueden usar esta funcionalidad.  Las
m&aacute;quinas sun4m no tienen esta limitaci&oacute;n y s&iacute;
pueden usarla.
d848 5
a852 5
<strong>Nota:</strong>  A partir de la versi&oacute;n 3.1 de OpenBSD, el
problema de compatibilidad de la BIOS deber&iacute;a estar resuelto en
casi todos los sistemas; sin embargo, a&uacute;n podr&iacute;a surgir un
problema con la geometr&iacute;a del controlador del disco, por lo que
es posible que el sistema se colgase despu&eacute;s de este mensaje.
d867 2
a868 2
'<strong>boot&gt;</strong>', redirecci&oacute;nelo para que arranque
desde el disco duro:
d875 1
a875 1
boot&gt; <strong>boot hd0a:/bsd</strong>
d879 3
a881 3
Esta orden redirecciona el proceso de arranque al fichero <em>/bsd</em>
en la partici&oacute;n 'a' del primer disco duro, permitiendo de este
modo el arranque.
d887 1
a887 1
<em>3.0/tools/booteasy/Boot.bin</em>, y se puede instalar mediante la
d889 1
a889 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386&amp;format=html">fdisk(8)</a> :
d892 1
a892 1
# <strong>fdisk -i -f /mnt/3.0/tools/booteasy/Boot.bin wd0</strong>
d896 1
a896 1
Se asume que tiene un CD 3.0 montado en <em>/mnt</em>, y que est&aacute;
d898 7
a904 7
<em>Boot.bin</em> y del tipo de disco duro que tenga (un dispositivo
SCSI suele ser 'sd0'), tendr&aacute; que cambiar esta l&iacute;nea de
&oacute;rdenes.  <strong>Nota: &iexcl;NO haga esto si su
partici&oacute;n OpenBSD no ocupa el disco por completo!</strong>  Al
iniciar el MBR de este modo se crea una partici&oacute;n de OpenBSD que
se expande por todo el disco y que elimina cualquier otra
partici&oacute;n, lo que no suele ser una buena idea.
d914 1
a914 1
cabo desde MS-DOS con el programa <em>BOOTINST.EXE</em>, que se puede
d922 1
a922 1
tengan <em>FDISK.EXE</em> instalado.  Cuando el sistema muestre el punto
d926 1
a926 1
A:\&gt;<strong>fdisk /mbr</strong>
d932 7
a938 8
tipo de mensaje.  &quot;<em>Bad command or file name</em>&quot;
significa que el disco que ha usado no tiene <em>FDISK.EXE</em>.  Si lo
ha hecho bien, el mensaje &quot;<em>Using ...</em>&quot; ser&aacute;
eliminado, ya que se habr&aacute; sustituido el c&oacute;digo que
produce este mensaje.  Si ten&iacute;a alg&uacute;n problema de
compatibilidad con la BIOS, &eacute;ste habr&aacute; desaparecido;
reinicie y su instalaci&oacute;n de OpenBSD deber&iacute;a ser correcta
ahora.
d949 1
a949 1
<em>2.9/tools/osbs135.exe</em>.  Las p&aacute;ginas de OS-BSD se
d972 5
a976 5
<em>fdisk</em>.  Por supuesto, se asume que el dispositivo HA INICIADO
con alg&uacute;n tipo de cargador de arranque;  si no es as&iacute;
(bien porque sea nuevo, est&eacute; en blanco o porque haya sido sacado
de otra plataforma), tendr&aacute; que instalar uno antes de que
arranque el sistema.
d1057 1
a1057 1
Por este motivo, todo el fichero <em>/bsd</em> (el n&uacute;cleo del
d1062 1
a1062 1
<em>root</em> debe encontrarse dentro del l&iacute;mite de los primeros
d1073 1
a1073 1
<li>Instala el sistema en la partici&oacute;n <em>/</em> de 40G.
d1075 1
a1075 1
<em>/bsd</em>, se encuentran dentro de los primeros 504M.
d1079 1
a1079 1
y copia su nuevo <em>/bsd</em> sobre el antiguo.
d1086 1
a1086 1
el nuevo fichero <em>/bsd</em>, no sobreescribi&oacute; el antiguo, sino
d1089 1
a1089 2
de arranque no pudo localizar <em>/bsd</em> y el sistema se
colg&oacute;.
d1092 2
a1093 2
Para que OpenBSD arranque, <em>/bsd</em> debe encontrarse dentro del
rango de la ROM.  Para mayor seguridad, hay una regla muy simple:
d1096 4
a1099 4
<strong>Toda la partici&oacute;n <em>root</em> debe estar dentro del
espacio direccionable por la BIOS (o ROM de arranque) de la
m&aacute;quina o dentro de los primeros 8G, cualquiera que sea el
m&aacute;s peque&ntilde;o de los dos.</strong>
d1128 1
a1128 1
arranque contiene una lista de bloques que comprende <em>/boot</em> en
d1145 1
a1145 1
# <strong>cd /usr/mdec; ./installboot /boot biosboot sd0</strong>
d1158 1
a1158 1
#<strong> cd /usr/mdec; ./installboot -h &lt;heads&gt; -s &lt;secs&gt; /boot biosboot sd0</strong>
d1166 4
a1169 4
# <strong>cd /sys/arch/i386/stand/</strong>
# <strong>make &amp;&amp; make install </strong>
# <strong>cd /usr/mdec; cp ./boot /boot</strong>
# <strong>./installboot /boot biosboot sd0</strong> <small>(o cualquier otro 
d1189 1
a1189 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&amp;sektion=8&amp;format=html">dump(8)</a>/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8&amp;format=html">restore(8)</a>
d1194 1
a1194 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&amp;sektion=8&amp;format=html">dump(8)</a>/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8&amp;format=html">restore(8)</a>
d1218 1
a1218 1
(<em>shell prompt</em>).  Deber&iacute;a obtener una salida similar a
d1222 1
a1222 1
# <strong>mount</strong>
d1238 1
a1238 1
# <strong>mount</strong>
d1247 3
a1249 3
f&iacute;sicamente en sd0a, el sistema de archivos <em>/var</em> reside
en sd0d, el sistema de archivos <em>/home</em> en sd0e y finalmente,
<em>/usr</em> en sd0h.
d1259 3
a1261 3
# <strong>/sbin/dump -0au -f /dev/nrst0 /dev/rsd0a</strong>
# <strong>/sbin/dump -0au -f /dev/nrst0 /dev/rsd0h</strong>
# <strong>mt -f /dev/rst0 rewind</strong>
d1269 5
a1273 5
# <strong>/sbin/dump -0au -f /dev/nrst0 /dev/rsd0a</strong>
# <strong>/sbin/dump -0au -f /dev/nrst0 /dev/rsd0d</strong>
# <strong>/sbin/dump -0au -f /dev/nrst0 /dev/rsd0e</strong>
# <strong>/sbin/dump -0au -f /dev/nrst0 /dev/rsd0h</strong>
# <strong>mt -f /dev/rst0 rewind</strong>
d1278 5
a1282 4
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&amp;sektion=8&amp;format=html">dump(8)</a>
para averiguar qu&eacute; es lo que hace exactamente cada uno de los
par&aacute;metros en la l&iacute;nea de &oacute;rdenes.  Aqu&iacute;
tiene una breve descripci&oacute;n de los par&aacute;metros usados:
d1285 2
a1286 2
<li><strong>0</strong> - Lleva a cabo un nivel 0 de dump, lo coge todo.
<li><strong>a</strong> - Intenta determinar autom&aacute;ticamente el
d1288 4
a1291 5
<li><strong>u</strong> - Actualiza el fichero <em>/etc/dumpdates</em>
para indicar cu&aacute;ndo se realiz&oacute; la &uacute;ltima copia de
seguridad.
<li><strong>f</strong> - Indica qu&eacute; dispositivo de cinta se
usar&aacute; (en este caso <em>/dev/nrst0</em>).
d1296 1
a1296 1
har&aacute; la copia de seguridad (<em>/dev/rsd0a</em>, etc... ).
d1330 2
a1331 2
Si quiere escribir un peque&ntilde;o gui&oacute;n (<em>script</em>),
puede hacerlo como el siguiente:
d1349 2
a1350 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a>
para que lance el gui&oacute;n de forma autom&aacute;tica.
d1389 1
a1389 1
# <strong>/sbin/restore -tvs 1 -f /dev/rst0</strong>
d1396 1
a1396 1
(<em><strong>/</strong></em>).
d1403 1
a1403 1
# <strong>/sbin/restore -tvs 2 -f /dev/rst0 > /home/me/list.txt</strong>
d1408 4
a1411 4
2 ser&iacute;a <em>/usr</em>;  si la tabla es como la m&aacute;s
avanzada, entonces 2 podr&iacute;a ser <em>/var</em> u otro sistema de
archivos.  El n&uacute;mero de secuencia coincide con el orden en el que
se graben los sistemas de archivos en la cinta.
d1421 1
a1421 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&apropos=0&sektion=8&manpath=OpenBSD+Current&format=html">restore(8)</a>
d1448 1
a1448 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;apropos=0&amp;sektion=8&amp;arch=i386&amp;format=html">fdisk(8)</a>
d1453 1
a1453 1
# <strong>fdisk -e sd0</strong>
d1462 1
a1462 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8&amp;format=html">disklabel(8)</a>
d1468 1
a1468 1
# <strong>disklabel -E sd0</strong>
d1472 1
a1472 1
No se olvide de la partici&oacute;n de <em>swap</em>.  Revise la
d1478 1
a1478 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&amp;apropos=0&amp;sektion=8">newfs(8)</a>
d1483 2
a1484 2
# <strong>newfs /dev/rsd0a</strong>
# <strong>newfs /dev/rsd0h</strong>
d1492 1
a1492 1
# <strong>mount /dev/sd0a /mnt</strong>
d1500 2
a1501 2
# <strong>cd /mnt</strong>
# <strong>restore -rs 1 -f /dev/rst0</strong>
d1509 1
a1509 1
# <strong>fdisk -i sd0</strong>
d1518 2
a1519 2
# <strong>cp /usr/mdec/boot /mnt/boot</strong>
# <strong>/usr/mdec/installboot -v /mnt/boot /usr/mdec/biosboot sd0</strong>
d1532 2
a1533 2
# <strong>umount /mnt</strong>
# <strong>halt</strong>
d1542 1
a1542 1
boot&gt; <strong>bsd -s</strong>
d1548 1
a1548 1
sistema de archivos ra&iacute;z (<em><strong>/</strong></em>).
d1561 1
a1561 1
# <strong>mount -u -w /</strong>
d1571 1
a1571 1
# <strong>mount /dev/sd0h /usr; cd /usr; restore -rs 2 -f /dev/rst0</strong>
d1574 3
a1576 3
# <strong>mount /dev/sd0d /var; cd /var; restore -rs 2 -f /dev/rst0</strong>
# <strong>mount /dev/sd0e /home; cd /home; restore -rs 3 -f /dev/rst0</strong>
# <strong>mount /dev/sd0h /usr; cd /usr; restore -rs 4 -f /dev/rst0</strong>
d1601 2
a1602 3
Por ejemplo, si tuviera una imagen ISO ubicada en
<em>/tmp/ISO.image</em>, deber&iacute;a seguir los siguientes pasos para
montar la imagen:
d1608 2
a1609 2
# <strong>vnconfig svnd0 /tmp/ISO.image</strong>
# <strong>mount -t cd9660 /dev/svnd0c /mnt</strong>
d1617 3
a1619 3
tipo <em>cd9660</em> al montarla.  Esto se debe aplicar a cualquier
tipo;  v.g. deber&aacute; usar el tipo <em>ffs</em> cuando monte
im&aacute;genes de disco.
d1628 2
a1629 2
# <strong>umount /mnt</strong>
# <strong>vnconfig -u svnd0</strong>
d1644 1
a1644 1
PCI IDE DMA es inestable en muchas combinaciones de <em>hardware</em>.
d1653 1
a1653 1
configuraciones, por culpa de placas base con <em>chipsets</em>
d1679 1
a1679 1
<em>chipset</em>.  Si esto nos ocurriera ver&iacute;amos un mensaje como
d1701 1
a1701 1
modo DMA tanto si sabe c&oacute;mo hacerlo con nuestro <em>chipset</em>
d1707 3
a1709 3
el soporte para ese <em>chipset</em>).  La documentaci&oacute;n para el
<em>chipset</em> de nuestra controladora PCI-IDE, si se tiene, es un
buen comienzo para a&ntilde;adir soporte para el <em>chipset</em> en el
d1713 1
a1713 1
qui&eacute;n es el fabricante del <em>chipset</em>.
d1733 6
a1738 7
RAID (<em>Redundant Array of Inexpensive Disks</em>) ofrece la
oportunidad de usar dispositivos m&uacute;ltiples para obtener un mejor
rendimiento, m&aacute;s capacidad, y/o redundancia de la que se puede
obtener de un &uacute;nico dispositivo.  Aunque una explicaci&oacute;n
completa de los beneficios y riesgos de RAID no entra en los objetivos
de esta secci&oacute;n, hay un par de puntos que son importantes
aqu&iacute;:
d1749 1
a1749 1
<h3>Opciones de <em>software</em></h3>
d1752 2
a1753 2
OpenBSD incluye <em>RAIDframe</em>, una soluci&oacute;n de software de
RAID.  Puede encontrar documentaci&oacute;n sobre <em>RAIDframe</em> en
d1767 1
a1767 1
&quot;<tt>Autoconfiguration</tt>&quot; de <em>RAIDframe</em>.
d1769 1
a1769 1
<h3>Opciones de <em>hardware</em></h3>
d1773 3
a1775 3
soporte para varios productos de <em>hardware</em> de RAID.  Las
opciones var&iacute;an seg&uacute;n la plataforma; mire en la
p&aacute;gina de soporte apropiada para cada una
d1784 1
a1784 1
<em>hardware</em> que disponga de soporte para SCSI o IDE.
d1806 6
a1811 7
la respuesta es &laquo;No&raquo;.  Estas tarjetas y <em>chips</em> no
son controladores de <em>hardware</em> de RAID reales, sino
<em>software</em> de RAID de arranque asistido por la BIOS.  Como
OpenBSD ya dispone de soporte para <em>software</em> de RAID
independiente del <em>hardware</em>, no hay un deseo entre los
desarrolladores de OpenBSD la implementaci&oacute;n de un soporte
especial para estas tarjetas.
d1825 2
a1826 2
Originally [OpenBSD: faq14.html,v 1.72 2002/12/11 14:36:55 nick Exp ]<br>
$Translation: faq14.html,v 1.34 2002/12/11 18:35:27 horacio Exp $<br>
@


1.33
log
@
sync with badlands translation CVs
@
text
@d1782 2
a1783 3
partici&oacute;n ra&iacute;z directamente en OpenBSD usando la
opci&oacute;n &quot;<tt>Autoconfiguration</tt>&quot; de
<em>RAIDframe</em>.
d1842 2
a1843 2
Originally [OpenBSD: faq14.html,v 1.71 2002/10/05 22:51:57 nick Exp ]<br>
$Translation: faq14.html,v 1.33 2002/10/06 11:53:46 horacio Exp $<br>
@


1.32
log
@
sync with badlands translation CVS
@
text
@a1690 1
</a>
d1843 2
a1844 2
Originally [OpenBSD: faq14.html,v 1.70 2002/10/01 22:47:24 nick Exp ]<br>
$Translation: faq14.html,v 1.32 2002/10/02 20:35:00 horacio Exp $<br>
@


1.31
log
@
sync with badlands translation CVS
@
text
@d7 1
a13 1
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
d22 1
d31 3
a33 3
<em>disklabel</em> de OpenBSD</a></li>
<li><a href="#fdisk">14.2 - Utilizaci&oacute;n del
<em>fdisk</em> de OpenBSD</a></li>
d35 20
a54 23
adicionales en OpenBSD</a></li>
<li><a href="#SwapFile">14.4 - C&oacute;mo usar un fichero
como memoria de intercambio (<em>swap</em></a></li>
<li><a href="#SoftUpdates">14.5 - &quot;Soft
Updates&quot;</a></li>
<li><a href="#D0P3">14.6 - Cuando arranco el sistema
despu&eacute;s de la instalaci&oacute;n de OpenBSD/i386, se
para en<br>
&quot;Using Drive: 0 Partition 3&quot;.</a></li>
<li><a href="#LargeDrive">14.7 - &iquest;Qu&eacute; problemas
puede haber en OpenBSD con dispositivos de gran
capacidad?</a></li>
<li><a href="#InstBoot">14.8 - Instalaci&oacute;n de bloques
de arranque (espec&iacute;fico de i386)</a></li>
<li><a href="#Backup">14.9 - C&oacute;mo prepararse para el
desastre: hacer copias de seguridad (respaldo) y restaurar
desde una cinta</a></li>
<li><a href="#MountImage">14.10 - C&oacute;mo montar
im&aacute;genes de disco en OpenBSD.</a></li>
<li><a href="#pciideErr">14.11 - &iexcl;Ayuda! &iexcl; da
errores con PCIIDE!</a></li>
<li><a href="#RAID">14.12 - Opciones de RAID con
OpenBSD</a></li>
d58 1
a58 1
<a name= "disklabel"></a>
d65 3
a67 4
<li><a href="#disklabel.1">&iquest;Qu&eacute; es
disklabel?</a>
<li><a href="#disklabel.2">disklabel durante la
instalaci&oacute;n de OpenBSD</a>
d76 1
a76 1
Antes que nada lea la p&aacute;gina del manual de
a77 1
</p>
d80 8
a87 10
Las &laquo;clasificaciones del disco&raquo;
(<em>&quot;disklabels&quot;</em>) se crean para permitir una
interfaz eficiente entre su disco y los controladores del
disco que contiene el n&uacute;cleo del sistema
(<em>&quot;kernel&quot;</em>).  Estas clasificaciones
contienen cierta informaci&oacute;n sobre su disco, como la
geometr&iacute;a del controlador e informaci&oacute;n sobre
sus sistemas de archivos (<em>&quot;filesystems&quot;</em>).
Esta informaci&oacute;n la utiliza el programa de arranque
para cargar el controlador y para saber en qu&eacute; parte
d89 4
a92 4
clasificaciones tambi&eacute;n se usan en conjunto con los
sistemas de archivos para crear un entorno m&aacute;s
eficiente.  Puede leer documentaci&oacute;n m&aacute;s a fondo
sobre disklabel en la p&aacute;gina del manual de
a93 1
</p> 
d96 4
a99 5
Adem&aacute;s, el uso de disklabel ayuda a superar las
limitaciones de las arquitecturas al particionar el disco.
Por ejemplo, en i386 s&oacute;lo puede tener cuatro
particiones primarias (particiones que puedan ver otros
sistemas operativos como Windows NT o DOS).  Con
d102 3
a104 5
<strong>todas</strong> sus particiones de OpenBSD
(<em>swap</em>, <em>/</em>, <em>/usr</em>, <em>/var</em>,
...), y todav&iacute;a le quedan tres particiones libres para
otros sistemas operativos.
</p>
d111 7
a117 8
Una de las partes principales de la instalaci&oacute;n de
OpenBSD es la creaci&oacute;n inicial de
&laquo;clasificaciones&raquo; (<em>&quot;labels&quot;</em>).
Para los usuarios de plataformas i386, &eacute;ste es el paso
que viene justo despu&eacute;s de usar
<a href="#fdisk">fdisk(1)</a>.  Durante la instalaci&oacute;n,
el programa que usa para crear clasificaciones separadas que
contengan sus puntos de montaje separados es
d119 27
a145 32
Durante este proceso puede configurar sus puntos de montaje
desde dentro de disklabel, pero esto no es del todo necesario
si consideramos que m&aacute;s tarde le pedir&aacute; que
confirme sus elecciones.  De todos modos hace que su
instalaci&oacute;n sea un poco m&aacute;s suave.
</p>

<p>
Ya que esto ocurre durante la instalaci&oacute;n,
todav&iacute;a no tendr&aacute; ninguna clasificaci&oacute;n
creada, y por lo tanto deben ser creadas.  La primera
clasificaci&oacute;n que tendr&aacute; que crear es la
clasificaci&oacute;n '<strong>a</strong>'.  Esta
clasificaci&oacute;n DEBE ser en la que se monte el sistema de
archivos <strong>/</strong>.  Puede ver las particiones que se
recomienda crear y sus respectivos tama&ntilde;os recomendados
en la <a href="faq4.html#SpaceNeeded">secci&oacute;n 4.3</a> de las
preguntas frecuentes.  Para servidores se recomienda que, por
lo menos, se creen estas particiones separadas.  Para los
usuarios de computadoras (ordenadores) de sobremesa,
ser&aacute; suficiente con crear un s&oacute;lo punto de
montaje para <strong>/</strong>.  Cuando cree por primera vez
esta partici&oacute;n ra&iacute;z (clasificaci&oacute;n
<strong>a</strong>), tenga en cuenta que necesitar&aacute;
dejar ALGO de espacio para la clasificaci&oacute;n de
<em>swap</em>.  Ahora que ya hemos explicado lo m&aacute;s
b&aacute;sico, pasemos a un ejemplo de la utilizaci&oacute;n
de disklabel durante la instalaci&oacute;n.  En este primer
ejemplo se asume que OpenBSD va a ser el &uacute;nico sistema
operativo en la m&aacute;quina, y que se llevar&aacute; a cabo
una instalaci&oacute;n completa.
</p>
a150 1
</p>
d155 3
a157 3
que abarque completamente el espacio que ocupen.  Aseg&uacute;rese de
que todos los sistemas de archivos de OpenBSD se encuentren dentro del
tama&ntilde;o especificado en la tabla de particiones de la BIOS 'A6'
d159 1
a159 1
esto).  Si no est&aacute; seguro de c&oacute;mo usar correctamente
d161 2
a162 2
otras separadas), divida el espacio de momento en una partici&oacute;n
ra&iacute;z y otra <em>swap</em>.
d188 15
a202 18
Hasta este punto hemos creado una partici&oacute;n ra&iacute;z
de 64MB montada en <strong>/</strong>, y una partici&oacute;n
<em>swap</em> de 64MB.  Note que empieza (&quot;offset&quot;)
en el sector 63.  En la parte correspondiente al
tama&ntilde;o, disklabel muestra su tama&ntilde;o en sectores;
sin embargo no es necesario introducirlos en el mismo formato.
Como en el ejemplo anterior, puede introducir los
tama&ntilde;os de la forma <em>64 Megabytes = 64M</em> y <em>2
Gigabytes = 2G</em>.  Disklabel los redondear&aacute; hasta el
cilindro m&aacute;s cercano.  Tambi&eacute;n notar&aacute; en
el ejemplo anterior que disklabel asume que la
clasificaci&oacute;n '<strong>b</strong>' ser&aacute;
<em>swap</em>.  Esto es correcto ya que el n&uacute;cleo del
sistema GENERIC est&aacute; configurado para buscar
<em>swap</em> en la clasificaci&oacute;n <strong>b</strong>, y
todo lo que usted debe hacer es seguir esta gu&iacute;a y usar
<strong>b</strong> como su &aacute;rea de <em>swap</em>.
</p>
d209 1
a209 2
vez la creaci&oacute;n de todas las particiones ser&iacute;a
redundante.
d233 6
a238 7
En este ejemplo puede notar dos diferencias con el anterior.
Una, que el inicio del sector (<em>offset</em>) lo averigua de
forma autom&aacute;tica.  Cuando haga una instalaci&oacute;n
de este tipo no tendr&aacute; que configurar los sectores.
Otra diferencia es que la clasificaci&oacute;n
'<strong>c</strong>' representa a todo el disco.  Por este
motivo no debe tocar la clasificaci&oacute;n
a239 1
</p>
d242 4
a245 6
Una vez que todas las clasificaciones hayan sido creadas, todo
lo quedar&aacute; por hacer ser&aacute; grabarlas en el disco
y pasar al proceso de instalaci&oacute;n.  Para grabarlo todo
y salir de disklabel (y continuar con la instalaci&oacute;n),
haga lo siguiente:
</p>
d254 6
a259 6
de su equipo no tiene soporte para el tama&ntilde;o de su disco,
OpenBSD tampoco tendr&aacute; soporte para &eacute;ste.  En cualquier
otro caso OpenBSD deber&iacute;a ser capaz de tratar su disco sin
problema alguno.  Si se encuentra en una situaci&oacute;n en la que la
BIOS de su m&aacute;quina no dispone de soporte para su disco, puede
probar Maxtor EZ-Drive u otro producto complementario de similares
a260 1
</p>
d269 3
a271 4
que usarlo cuando a&ntilde;ada, elimine, o reestructure sus discos.
Una de las primeras cosas que tendr&aacute; que hacer ser&aacute; ver
su disklabel actual.  Para ello, escriba lo siguiente:
</p>
d306 3
a308 4
asegurarse de que no l&iacute;a nada (algo que todos necesitamos
algunas veces).  Pero para poder hacer cambios debe usar disklabel con
la opci&oacute;n -E, de este modo:
</p>
d317 3
a319 4
instalaci&oacute;n de OpenBSD.  Probablemente, la orden
m&aacute;s importante de todas en este punto de pedido sea
'?'.  Con esta orden obtendr&aacute; una lista de posibles
opciones relacionadas con
d324 3
a326 3
a&ntilde;adir o eliminar todo lo que desee, o hacer cambios en
las particiones.  Para m&aacute;s informaci&oacute;n al
respecto lea la p&aacute;gina del manual de
a327 1
</p>
d330 1
a330 1
<a name= "fdisk"></a>
a337 1
</p>
d340 14
a353 19
Fdisk es un programa de ayuda para el mantenimiento de sus
particiones.  Este programa se usa durante la
instalaci&oacute;n para configurar la partici&oacute;n de
OpenBSD (esta partici&oacute;n puede contener <u>varias</u>
clasificaciones, cada una de ellas con sistemas de archivos,
<em>swap</em>, etc... ).  Puede dividir el espacio de sus
dispositivos y activar uno de ellos.  Fdisk se suele usar en
&laquo;Modo Monousuario&raquo; (<strong>boot -s</strong> -
&quot;Single User Mode&quot;).  Fdisk tambi&eacute;n configura
el MBR de los discos.
</p>

<p>
Para la instalaci&oacute;n, la mayor&iacute;a de las veces
s&oacute;lo necesitar&aacute; <strong>UNA</strong>
partici&oacute;n de OpenBSD, y a continuaci&oacute;n usar
disklabel para poner en ella una <em>swap</em> y un sistema de
archivos.
</p>
a357 1
</p>
a364 1
</p>
d379 2
a380 2
En este ejemplo estamos viendo la salida de fdisk para el dispositivo
de la disquetera.  Podemos ver la partici&oacute;n de OpenBSD (A6) y su
a382 1
</p>
d385 5
a389 7
En el ejemplo anterior s&oacute;lo vimos nuestra
informaci&oacute;n.  &iquest;Y si quisi&eacute;ramos editar
nuestra tabla de particiones?  Pues bien, para ello debemos
usar el indicador <strong>-e</strong>, que nos
trasladar&aacute; a una l&iacute;nea de &oacute;rdenes desde
la que podremos interaccionar con fdisk.
</p>
a416 1
</p>
d419 2
a420 3
Aqu&iacute; tiene una revisi&oacute;n de las &oacute;rdenes
que puede usar cuando escoja el indicador <strong>-e</strong>.
</p>
d424 1
a424 1
comprensibles para fdisk en el modo de edici&oacute;n interactiva.</li>
d426 1
a426 1
bloque de arranque seleccionado.</li>
d429 1
a429 1
cambios.</li>
d433 1
a433 1
existente a OpenBSD.</li>
d437 1
a437 1
inicio y tama&ntilde;os.</li>
d443 1
a443 1
arranque.</li>
d446 1
a446 1
seleccionado.</li>
d449 1
a449 1
extendidas del bloque de arranque actual.</li>
d451 1
a451 1
memoria del bloque de arranque seleccionado y su tabla MBR.</li>
d454 1
a454 1
operaci&oacute;n.</li>
d457 1
a457 1
saliendo completamente del programa si no hubiera ninguno.</li>
d461 2
a462 3
de <strong>exit</strong>, no guarda los cambios del bloque
modificado.</li>
<li><strong>abort</strong> Salir del programa sin guardar cambios.</li>
d465 1
a465 1
<a name= "NewDisk"></a>
d478 2
a479 3
Los usuarios de plataformas i386 deben empezar con fdisk.
El resto de plataformas pueden ignorar esta parte.
</p>
a489 1
</p>
d508 8
a515 9
Ignore la partici&oacute;n <strong>c</strong>, siempre
est&aacute; ah&iacute; y es para que funcionen programas como
disklabel.  Para operaciones normales, <em>fsize</em> siempre
debe ser 1024, <em>bsize</em> siempre debe ser 8192, y
<em>cpg</em> siempre debe ser 16.  <em>fstype</em> es 4.2BSD.
<em>total sectors</em> es el tama&ntilde;o total del disco.
Supongamos que &eacute;ste es un disco de 3GB;  tres
gigabytes, en t&eacute;rminos del fabricante del disco, son
3000 megabytes.  Divida 6185088 entre 3000 (use
d517 17
a533 22
y obtendr&aacute; 2061.  Por lo tanto, para crear particiones
para a, d, e, f, g, ... simplemente multiplique X*2061 y
obtendr&aacute; el n&uacute;mero de megabytes de espacio en
esa partici&oacute;n.  El sector de inicio (<em>offset</em>)
para su primera partici&oacute;n nueva debe ser el mismo que
el &quot;<em>sectors/track</em>&quot; que le haya dado
anteriormente la salida de disklabel.  En este caso es 63.  El
sector de inicio para cada partici&oacute;n consecutiva debe
ser una combinaci&oacute;n del tama&ntilde;o de cada
partici&oacute;n y el sector de inicio de la misma (excepto la
partici&oacute;n <strong>c</strong>, ya que no juega
ning&uacute;n papel aqu&iacute;).
</p>

<p>
O, si s&oacute;lo quiere tener una partici&oacute;n en el disco (si,
por ejemplo, quisiera usarlo todo para almacenaje de web o como
directorio home), tome el tama&ntilde;o total del disco y
r&eacute;stele los sectores por pista (&quot;sectors/track&quot;).  En
este caso, 6185088-63 = 6185025.  La partici&oacute;n quedar&aacute;
as&iacute;:
</p>
d540 13
a552 16
<strong>&iexcl;Si todo esto le parece complicado e
innecesario, puede usar disklabel -E para obtener el mismo
modo de particiones que tiene en su disco de
instalaci&oacute;n!</strong> Ah&iacute; puede usar
&laquo;96M&raquo; para especificar &laquo;96 megabytes&raquo;
(o con un disco lo bastante grande, 96G para 96 gigabytes).
Desafortunadamente, el modo -E usa la geometr&iacute;a del
disco de la BIOS, no la geometr&iacute;a del disco real, y con
frecuencia &eacute;stas no son las mismas.  Para evitar esta
limitaci&oacute;n, escriba 'g d' para la 'geometr&iacute;a del
disco'.  Otras opciones son 'g b' para la 'geometr&iacute;a de
la bios' y 'g u' para la 'geometr&iacute;a del usuario', o
simplemente lo que indique la
&laquo;clasificaci&oacute;n&raquo; (<em>label</em>) antes de
que disklabel efect&uacute;e alg&uacute;n cambio.
</p>
d556 2
a557 3
finalizar, debe crear el sistema de archivos en el disco
usando <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&amp;apropos=0&amp;sektion=8&amp;format=html">newfs(8)</a>.
</p>
a567 1
</p>
a572 1
</p>
d579 2
a580 2
Finalmente, a&ntilde;&aacute;dalo a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&amp;sektion=5">/etc/fstab(5)</a>
</p>
d588 3
a590 3
/usr/local?  Entonces deber&iacute;a montar la partici&oacute;n nueva
en /mnt, y usar 'cpio -pdum' para copiar /usr/local al directorio /mnt.
A continuaci&oacute;n editar el fichero
d592 2
a593 3
para indicar que la partici&oacute;n /usr/local es ahora
/dev/wd1a (su partici&oacute;n reci&eacute;n creada).  Por
ejemplo:
a597 1
</p>
d601 4
a604 5
/usr/local existente a /usrs/local-backup (eliminando el original
cuando est&eacute; seguro), y cree un directorio /usr/local
vac&iacute;o.  Reinicie el sistema y &iexcl;ya est&aacute;!
&iexcl;ah&iacute; est&aacute;n los ficheros!
</p>
d607 1
a607 1
<a name= "SwapFile"></a>
d609 2
a610 1
<h2>14.4 - C&oacute;mo usar un fichero como memoria de <em>swap</em></h2>
d613 4
a616 5
(Nota: si lo que quiere es usar un fichero como memoria de
intercambio (<em>&quot;swap&quot;</em>) porque obtiene errores
del tipo &quot;virtual memory exhausted&quot;, deber&iacute;a
intentar antes elevar los l&iacute;mites por proceso con la
utilidad de csh
a619 1
</p>
d622 5
a626 6
Para el uso de un fichero como memoria de intercambio
(<em>swap file</em>) no es estrictamente necesaria la
compilaci&oacute;n de un n&uacute;cleo del sistema
personalizado, pero en este documento mostraremos c&oacute;mo
a&ntilde;adir espacio <em>swap</em> de las dos formas.
</p>
a640 1
</p>
d652 6
a657 7
&quot;swap_device&quot;.  &Eacute;ste es el &aacute;rea predefinida
para <em>swap</em> (si lo vi&eacute;ramos con disklabel, lo
mostrar&iacute;a como la partici&oacute;n b).  Tambi&eacute;n puede ver
en el ejemplo anterior que el dispositivo no est&aacute; siendo muy
usado en ese momento.  Pero para el prop&oacute;sito de este documento,
procederemos como si necesit&aacute;ramos 32MB adicionales.
</p>
a665 1
</p>
d675 2
a676 4
Una vez que lo hayamos creado, podemos activar el uso de ese
dispositivo como memoria de <em>swap</em>.  Para activarlo, use la
siguiente orden:
</p>
d684 2
a685 3
Ahora debemos comprobar si se ha a&ntilde;adido correctamente a la
lista de nuestros dispositivos de <em>swap</em>.
</p>
d696 5
a700 6
Ahora que ya est&aacute; activado el fichero y que se est&aacute;
usando como <em>swap</em>, debe a&ntilde;adir una l&iacute;nea a su
fichero <em>/etc/fstab</em>, para que el fichero tambi&eacute;n se active
en el pr&oacute;ximo arranque.  Si no a&ntilde;ade esta l&iacute;nea,
no tendr&aacute; este dispositivo de <em>swap</em> configurado.
</p>
d712 9
a720 12
&Eacute;sta es una soluci&oacute;n m&aacute;s permanente que
la de a&ntilde;adir m&aacute;s espacio de <em>swap</em>.  Para
usar permanentemente un fichero como memoria de <em>swap</em>,
primero compile un n&uacute;cleo con vnd0c como <em>swap</em>.
Si su sistema de archivos ra&iacute;z es wd0a, entonces wd0b
es el <em>swap</em> anterior y debe usar la siguiente
l&iacute;nea en el fichero de configuraci&oacute;n del
n&uacute;cleo (si tiene dudas, lea el
<a href="faq5.html">cap&iacute;tulo 5</a> de las preguntas
frecuentes referente a la compilaci&oacute;n del n&uacute;cleo
del sistema):
</p>
d727 3
a729 4
Despu&eacute;s de esto, tendr&aacute; que crear el fichero que
se usar&aacute; como memoria de <em>swap</em>.  Debe hacerlo
usando la misma orden que en los ejemplos anteriores.
</p>
d739 3
a741 5
Ahora el fichero est&aacute; en su sitio y debe
a&ntilde;adirlo a <em>/etc/fstab</em>.  Aqu&iacute; tiene una
l&iacute;nea de ejemplo de c&oacute;mo arrancar con este
dispositivo como <em>swap</em>.
</p>
d750 4
a753 4
En este punto su m&aacute;quina debe ser reiniciada para que
los cambios en el n&uacute;cleo hagan efecto.  A
continuaci&oacute;n deber&aacute; configurar el dispositivo
como memoria de <em>swap</em>.  Para ello usar&aacute;
a754 1
</p>
d762 4
a765 6
El &uacute;ltimo paso es activar ese dispositivo como memoria
de <em>swap</em>.  Lo haremos como en los ejemplos anteriores,
usando swapctl(8).  Despu&eacute;s comprobaremos si ha sido
correctamente a&ntilde;adido a nuestra lista de dispositivos
de <em>swap</em>.
</p>
d777 1
a777 1
<a name= "SoftUpdates"></a>
d782 7
a788 8
Durante los &uacute;ltimos a&ntilde;os, Kirk McKusick ha
estado trabajando en algo llamado &quot;Soft Updates&quot;.
Esto se basa en la idea propuesta por Greg Ganger y Yale Patt
de imponer un orden parcial sobre las operaciones en la
memoria intermedia para permitir que los requerimientos de
escritura sincr&oacute;nica de entradas de directorio sean
eliminadas del c&oacute;digo FFS.  En resumen, un gran
incremento en el rendimiento de la escritura en disco.
d791 2
a792 2
Como &quot;Soft Updates&quot; todav&iacute;a se encuentra en
fase de desarrollo, es necesario ejecutar
d794 3
a796 4
despu&eacute;s de una interrupci&oacute;n de la m&aacute;quina
sin una secuencia de apagado limpia, pero esto es algo que se
solucionar&aacute; en las pr&oacute;ximas versiones.
</p>
d799 4
a802 4
Puede encontrar m&aacute;s detalles sobre &quot;Soft
Updates&quot; en la documentaci&oacute;n de
<a href="http://www.ece.cmu.edu/~ganger/papers/CSE-TR-254-95/">Ganger
y Patt</a> y de
a803 1
</p>
d806 2
a807 3
Para activar <em>Softupdates</em>, el n&uacute;cleo debe estar
compilado con
</p>
a810 1
</p>
d813 1
a813 3
Esta opci&oacute;n est&aacute; incluida en el n&uacute;cleo
GENERIC.
</p>
d816 3
a818 3
La activaci&oacute;n de <em>Soft Updates</em> se debe realizar
con una opci&oacute;n de tiempo en el montaje.  Cuando se
monta una partici&oacute;n con la utilidad
d821 4
a824 5
partici&oacute;n.  La siguiente muestra es de una entrada
en <i><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&amp;sektion=5">/etc/fstab(5)</a></i> 
para una partici&oacute;n <em>sd0a</em> que queremos que se
monte con <em>soft updates</em> activado.
</p>
d832 5
a836 6
updates</em> en las m&aacute;quinas sun4 o sun4c.  Estas
arquitecturas s&oacute;lo tienen soporte para una cantidad de
memoria del n&uacute;cleo muy limitada, y no pueden usar esta
funcionalidad.  Las m&aacute;quinas sun4m no tienen esta
limitaci&oacute;n y s&iacute; pueden usarla.
</p>
d838 1
a838 1
<a name= "D0P3"></a>
d841 24
a864 2
instalaci&oacute;n de OpenBSD/i386, se para en &quot;Using
Drive: 0 Partition: 3&quot; - espec&iacute;fico de i386.</h2>
d867 4
a870 34
En realidad esto no es un mensaje de error, sino un aviso del
cargador de arranque del MBR en el que indica desde qu&eacute;
dispositivo y qu&eacute; partici&oacute;n va a arrancar.  El
problema es que el proceso de arranque se para aqu&iacute;.
</p>

<p>
Hay dos motivos por los que esto suele ocurrir:  una
incompatibilidad entre la BIOS y el MBR de OpenBSD, o un
problema con la geometr&iacute;a del dispositivo.  Un ejemplo
del problema con la geometr&iacute;a del dispositivo
ser&iacute;a si traslad&aacute;ramos un dispositivo
desde una m&aacute;quina a otra, o si actualiz&aacute;ramos
una BIOS o cambi&aacute;ramos su configuraci&oacute;n;  aunque
esto tambi&eacute;n puede ocurrir por motivos desconocidos
durante la instalaci&oacute;n.
</p>

<p>
<strong>Nota:</strong>  A partir de la versi&oacute;n 3.1 de
OpenBSD, el problema de compatibilidad de la BIOS
deber&iacute;a estar resuelto en casi todos los sistemas;
sin embargo, a&uacute;n podr&iacute;a surgir un problema con
la geometr&iacute;a del controlador del disco, por lo que es
posible que el sistema se colgase despu&eacute;s de este
mensaje.
</p>

<p>
Para solucionar el problema de compatibilidad con la BIOS, se
debe sustituir el cargador de arranque con uno que sea
compatible con el sistema.  Por suerte, los cargadores de
arranque son f&aacute;ciles de tratar.
</p>
d876 5
a880 6
podr&aacute; arrancar directamente desde el disco duro,
tendremos que usar un disquete o un CD-ROM de arranque para
iniciar el proceso de arranque.  Cuando el sistema muestre el
punto de pedido '<strong>boot&gt;</strong>',
redirecci&oacute;nelo para que arranque desde el disco duro:
</p>
d891 3
a893 4
Esta orden redirecciona el proceso de arranque al fichero
<em>/bsd</em> en la partici&oacute;n 'a' del primer disco
duro, permitiendo de este modo el arranque.
</p>
d896 5
a900 5
Una vez que el sistema haya arrancado, tendr&aacute; que
instalar el cargador de arranque BootEasy.  El archivo se
puede encontrar en el CD-ROM y en las r&eacute;plicas de FTP,
en el directorio <em>3.0/tools/booteasy/Boot.bin</em>, y se
puede instalar mediante la siguiente orden de
a901 1
</p>
d908 8
a915 9
Se asume que tiene un CD 3.0 montado en <em>/mnt</em>, y que
est&aacute; usando un dispositivo IDE.  Dependiendo de la
ubicaci&oacute;n de <em>Boot.bin</em> y del tipo de disco duro
que tenga (un dispositivo SCSI suele ser 'sd0'), tendr&aacute;
que cambiar esta l&iacute;nea de &oacute;rdenes.
<strong>Nota: &iexcl;NO haga esto si su partici&oacute;n
OpenBSD no ocupa el disco por completo!</strong>  Al iniciar
el MBR de este modo se crea una partici&oacute;n de OpenBSD
que se expande por todo el disco y que elimina cualquier otra
a916 1
</p>
d919 10
a928 13
BootEasy tiene otra funcionalidad que puede ser de
inter&eacute;s aun cuando no se tengan problemas con el
cargador predeterminado:  es capaz de seleccionar una
partici&oacute;n de arranque durante el inicio.  Para ello
pregunta por la partici&oacute;n desde la que se desea
arrancar, y si no introduce una arranca desde la
partici&oacute;n activa.  Esto puede ser de gran utilidad si
se tienen varios sistemas operativos en un mismo disco.  La
instalaci&oacute;n de BootEasy para esto se lleva a cabo desde
MS-DOS con el programa <em>BOOTINST.EXE</em>, que se puede
encontrar en el mismo directorio que BootEasy en el CD-ROM y
en los servidores de FTP.
</p>
d933 3
a935 4
Inicie desde un disco de arranque de Windows 9x &oacute; DOS
v6 que tengan <em>FDISK.EXE</em> instalado.  Cuando el sistema
muestre el punto de pedido de MS-DOS, introduzca lo siguiente:
</p>
d942 9
a950 11
Deber&iacute;a mostrar un breve acceso al disco, e
inmediatamente despu&eacute;s un punto de pedido de
&oacute;rdenes, sin ning&uacute;n tipo de mensaje.
&quot;<em>Bad command or file name</em>&quot; significa que el
disco que ha usado no tiene <em>FDISK.EXE</em>.  Si lo ha
hecho bien, el mensaje &quot;<em>Using ...</em>&quot;
ser&aacute; eliminado, ya que se habr&aacute; sustituido el
c&oacute;digo que produce este mensaje.  Si ten&iacute;a
alg&uacute;n problema de compatibilidad con la BIOS,
&eacute;ste habr&aacute; desaparecido;  reinicie y su
instalaci&oacute;n de OpenBSD deber&iacute;a ser correcta
a951 1
</p>
d954 2
a955 3
Seg&uacute;n algunos informes, esto tambi&eacute;n
deber&iacute;a funcionar con FreeDOS.
</p>
d960 4
a963 4
Otro cargador de arranque, OS-BS, tambi&eacute;n viene
incluido en los CD-ROM de OpenBSD y en los servidores de FTP,
en el directorio <em>2.9/tools/osbs135.exe</em>.  Las
p&aacute;ginas de OS-BSD se encuentran en
a964 1
</p>
d969 2
a970 2
El programa LILO para Linux tambi&eacute;n se puede usar.
M&aacute;s detalles en
a971 1
</p>
d973 1
a973 2
<h3>C&oacute;mo evitar el problema de compatibilidad de la
BIOS:</h3>
d976 30
a1005 36
Hay pocas m&aacute;quinas que tengan un problema de
compatibilidad con la BIOS, pero si &eacute;ste es su caso, es
bastante f&aacute;cil de evitar.  El &uacute;nico momento en
el que el cargador de OpenBSD se instala en el sistema durante
una instalaci&oacute;n t&iacute;pica es cuando se responde 'Y'
a la pregunta 'Use entire disk for OpenBSD'
(&laquo;&iquest;usar todo el disco?&raquo;).  Si la respuesta
es 'N' y se procede a crear las particiones del disco para
OpenBSD de forma manual, no se substituir&aacute; el cargador
de arranque a menos que se usen las &oacute;rdenes
<code>reinit</code> o <code>update</code> de <em>fdisk</em>.
Por supuesto, se asume que el dispositivo HA INICIADO con
alg&uacute;n tipo de cargador de arranque;  si no es
as&iacute; (bien porque sea nuevo, est&eacute; en blanco o
porque haya sido sacado de otra plataforma), tendr&aacute; que
instalar uno antes de que arranque el sistema.
</p>

<h3>C&oacute;mo solucionar un problema con la geometr&iacute;a
del disco:</h3>

<p>
La soluci&oacute;n ideal es la de evitar este problema
manteniendo la misma geometr&iacute;a en el dispositivo, no
cambi&aacute;ndola;  sin embargo, algunas veces no es posible
evitarlo, como cuando se traslada un dispositivo de gran
capacidad desde una m&aacute;quina ya vieja que no tenga
soporte para la geometr&iacute;a LBA a una m&aacute;quina
nueva que insista en usar LBA.
</p>

<p>
Inicie la m&aacute;quina usando un disco o CD-ROM de arranque
tal y como se ha indicado anteriormente.  Ingrese como
superusuario y ejecute las siguientes &oacute;rdenes:
</p>
a1013 1
</p>
d1017 1
a1017 2
instala y configura la partici&oacute;n del cargador de
arranque,
d1022 1
a1022 2
es el m&oacute;dulo que carga el n&uacute;cleo del sistema en
la RAM.
d1024 2
a1025 2
tiene una tabla que apunta a la ubicaci&oacute;n f&iacute;sica
(de acuerdo con la BIOS del sistema) de
d1027 2
a1028 2
Si cambia algo que a su vez cambie la percepci&oacute;n que
tiene la BIOS de la ubicaci&oacute;n de
a1033 1
</p>
a1037 1
</p>
d1039 1
a1039 1
<a name= "LargeDrive"></a>
d1041 2
a1042 2
<h2>14.7 - &iquest;Qu&eacute; problemas puede haber en OpenBSD
con dispositivos de gran capacidad?</h2>
d1045 19
a1063 24
OpenBSD tiene soporte para sistemas de archivos de
tama&ntilde;os mucho mayores que cualquier de los discos duros
que existen en la actualidad o incluso de los que puedan
aparecer en breve;  sin embargo, existen limitaciones en
algunas interfaces que son de menor tama&ntilde;o que el
m&aacute;ximo te&oacute;rico de OpenBSD.  En el caso de
dispositivos IDE, el l&iacute;mite es de 128GB, que es el
mismo l&iacute;mite que tiene actualmente la interfaz ATA.
N&oacute;tese que en la pr&oacute;xima generaci&oacute;n de
dispositivos ATA, aquellos con capacidad mayor de 128G
(1G=2^30, no 1.000.000.000, aunque los fabricantes de
dispositivos lo llamar&aacute;n 137G) no tienen soporte en
OpenBSD 3.1 ni en versiones anteriores.
</p>

<p>
Desafortunadamente, la capacidad absoluta del sistema
operativo no se encontrar&aacute; disponible hasta
DESPU&Eacute;S de que el sistema operativo haya sido cargado
en la memoria y el proceso de arranque haya introducido sus
propios l&iacute;mites.  El proceso de arranuqe tiene que
utilizar (y por lo tanto est&aacute; limitado por) la ROM de
arranque del sistema.
Los cargadores de arranque de OpenBSD para i386
d1066 2
a1067 3
tambi&eacute;n tienen sus propias limitaciones internas de 8G,
heredadas del l&iacute;mite de una BIOS antigua.
</p> 
d1070 7
a1076 8
Por este motivo, todo el fichero <em>/bsd</em> (el
n&uacute;cleo del sistema) se debe ubicar dentro del
&aacute;rea direccionable de la ROM de arranque en el disco,
o dentro de los primeros 8G del disco, cualquiera que sea
m&aacute;s peque&ntilde;a.  Esto significa que en algunos equipos
i386 m&aacute;s antiguos, la partici&oacute;n <em>root</em> debe
encontrarse dentro del l&iacute;mite de los primeros 504M, pero
en la mayor&iacute;a de equipos nuevos se puede encontrar en
a1077 1
</p>
d1080 4
a1083 6
N&oacute;tese que es posible instalar un dispositivo de 40GB
en un 486 antiguo y cargar OpenBSD como una sola
partici&oacute;n gigante, y por ello creer que la regla
anterior ha sido violada con &eacute;xito.  Sin embargo, puede
volver para vengarse en un modo horrible:
</p>
d1086 7
a1092 8
<li>Instala el sistema en la partici&oacute;n <em>/</em> de
40G.  Funciona, ya que el sistema operativo base y sus
ficheros, incluido <em>/bsd</em>, se encuentran dentro de los
primeros 504M.
<li>Utiliza el sistema hasta que acaba con m&aacute;s de 504M
en ficheros.
<li>Lo actualiza, compila su propio n&uacute;cleo, cualquier
otra cosa, y copia su nuevo <em>/bsd</em> sobre el antiguo.
d1098 5
a1102 6
&iquest;Por qu&eacute;?  Porque cuando copi&oacute;
&laquo;sobre&raquo; el nuevo fichero <em>/bsd</em>, no
sobreescribi&oacute; el antiguo, sino que se reubic&oacute; en
un nuevo espacio del disco, probablemente fuera del rango de
los 504M para los que tiene soporte la BIOS.  El cargador de
arranque no pudo localizar <em>/bsd</em> y el sistema se
a1103 1
</p>
d1106 2
a1107 4
Para que OpenBSD arranque, <em>/bsd</em> debe encontrarse
dentro del rango de la ROM.  Para mayor seguridad, hay una
regla muy simple:
</p>
d1110 4
a1113 5
<strong>Toda la partici&oacute;n <em>root</em> debe estar
dentro del espacio direccionable por la BIOS (o ROM de arranque)
de la m&aacute;quina o dentro de los primeros 8G, cualquiera que
sea el m&aacute;s peque&ntilde;o de los dos.</strong>
</p>
d1118 2
a1119 3
particiones</a>, en lugar de usar una &uacute;nica
partici&oacute;n grande.
</p>
d1121 1
a1121 1
<a name= "InstBoot"></a>
d1123 2
a1124 2
<h2>14.8 - Instalaci&oacute;n de bloques de arranque
(espec&iacute;fico de i386)</h2>
d1149 4
a1152 4
capacidad arranque), y en el punto <kbd>boot&gt;</kbd> escriba
<kbd>b hd0a:/bsd</kbd> para forzar el arranque desde el primer disco
duro (y no desde el disquete).  Su m&aacute;quina deber&iacute;a iniciar
sin ning&uacute;n problema.  Ahora debe actualizar la primera fase del
a1156 1
</p>
d1163 2
a1164 2
Si installboot protesta porque es incapaz de leer la geometr&iacute;a
de la BIOS, puede invocar la orden 'machine diskinfo' (o su forma
a1169 1
</p>
a1177 1
</p>
d1187 1
a1187 1
<a name= "Backup"></a>
d1189 2
a1190 2
<h2>14.9 - Prepararaci&oacute;n para el desastre: hacer copias
de seguridad (respaldo) y restaurar desde la cinta</h2>
a1193 1
</p>
d1196 3
a1198 4
Si su instalaci&oacute;n de OpenBSD va a ser lo que se llama un
servidor de producci&oacute;n, es aconsejable disponer de alg&uacute;n
tipo de respaldo por si acaso uno de sus discos fijos fallara.
</p>
a1211 1
</p>
a1221 1
</p>
d1228 2
a1229 2
d&oacute;nde est&aacute;n montados los sistemas de archivos.
Esto se puede determinar usando la orden
d1231 3
a1233 4
desde el punto de pedido del int&eacute;rprete de
&oacute;rdenes (<em>shell prompt</em>).  Deber&iacute;a
obtener una salida similar a &eacute;sta:
</p>
a1245 1
</p>
a1249 1
</p>
d1261 3
a1263 4
f&iacute;sicamente en sd0a, el sistema de archivos
<em>/var</em> reside en sd0d, el sistema de archivos
<em>/home</em> en sd0e y finalmente, <em>/usr</em> en sd0h.
</p>
d1267 4
a1270 5
pasar informaci&oacute;n a dump sobre el nombre de cada
partici&oacute;n del disco fijo.  Aqu&iacute; tiene un ejemplo de las
&oacute;rdenes que se necesitan para hacer copias de la primera tabla
de montaje (la m&aacute;s simple):
</p>
a1280 1
</p>
d1293 3
a1295 4
para averiguar qu&eacute; es lo que hace exactamente cada uno
de los par&aacute;metros en la l&iacute;nea de &oacute;rdenes.
Aqu&iacute; tiene una breve descripci&oacute;n de los
par&aacute;metros usados:
d1298 8
a1305 9
<li><strong>0</strong> - Lleva a cabo un nivel 0 de dump, lo
coge todo.
<li><strong>a</strong> - Intenta determinar
autom&aacute;ticamente el tama&ntilde;o de la cinta.
<li><strong>u</strong> - Actualiza el fichero
<em>/etc/dumpdates</em> para indicar cu&aacute;ndo se
realiz&oacute; la &uacute;ltima copia de seguridad.
<li><strong>f</strong> - Indica qu&eacute; dispositivo de
cinta se usar&aacute; (en este caso <em>/dev/nrst0</em>).
a1306 1
</p>
a1310 1
</p>
d1314 2
a1315 4
se usa al final para rebobinar el controlador.  Revise la
p&aacute;gina del manual de mt para ver m&aacute;s opciones
(como &quot;eject&quot;).
</p>
a1320 1
</p>
a1341 1
</p>
a1345 1
</p>
a1364 1
</p>
d1367 6
a1372 7
Tambi&eacute;n puede serle de ayuda documentar (en un trozo de papel)
el tama&ntilde;o necesario para cada sistema de archivos.  Puede usar la
orden <kbd>df -h</kbd> para determinar cu&aacute;nto espacio
est&aacute; usando cada partici&oacute;n.  Esto le ser&aacute;
&uacute;til cuando el dispositivo falle y necesite recrear su
partici&oacute;n en el nuevo dispositivo.
</p>
d1377 7
a1383 8
la mejor forma de hacer copias de seguridad es reiniciando el sistema
en modo monousuario.  Los sistemas de archivos no necesitan estar
montados para hacer las copias.  Despu&eacute;s de reiniciar no se
olvide de montar la partici&oacute;n ra&iacute;z (/) con permisos de
escritura (r) y lectura (w), o dump fallar&aacute; cuando intente
grabar los &quot;dumpdates&quot;.  Para iniciar en modo monousuario
haga lo siguiente desde el punto de arranque:
</p>
a1396 1
</p>
a1400 1
</p>
d1407 3
a1409 3
Esto har&aacute; que se muestre una lista con los ficheros existentes
en la primera partici&oacute;n de la cinta.  De acuerdo con los
ejemplos anteriores, 1 ser&iacute;a su sistema de archivos ra&iacute;z
a1410 1
</p>
a1414 1
</p>
d1421 5
a1425 6
Si tiene una tabla de particiones como la simple de ejemplos
anteriores, 2 ser&iacute;a <em>/usr</em>;  si la tabla es como
la m&aacute;s avanzada, entonces 2 podr&iacute;a ser
<em>/var</em> u otro sistema de archivos.  El n&uacute;mero de
secuencia coincide con el orden en el que se graben los
sistemas de archivos en la cinta.
a1436 1
</p>
d1439 2
a1440 2
Si se ha preparado bien, substituir un disco y restaurar sus datos
desde la cinta puede ser un proceso muy r&aacute;pido.  El disquete de
a1446 1
</p>
a1451 1
</p>
a1458 1
</p>
a1464 1
</p>
a1472 1
</p>
a1479 1
</p>
d1486 3
a1488 4
No se olvide de la partici&oacute;n de <em>swap</em>.  Revise
la <a href="#disklabel">secci&oacute;n 14.1</a> sobre
disklabel para m&aacute;s informaci&oacute;n.
</p>
a1494 1
</p>
a1503 1
</p>
a1511 1
</p>
a1520 1
</p>
a1529 1
</p>
a1543 1
</p>
a1553 1
</p>
a1562 1
</p>
d1565 4
a1568 4
Asumiendo que ha llevado a cabo todos los pasos anteriores
correctamente y que no ha cometido ning&uacute;n error, deber&iacute;a
acabar viendo un punto en el que le pedir&aacute; que introduzca un
camino para la shell o que pulse la tecla <kbd>intro</kbd>.  Pulse
a1572 1
</p>
a1581 1
</p>
a1596 1
</p>
d1601 2
a1602 2
ha salido como lo ha planeado, su sistema volver&aacute; al estado en
el que se encontraba cuando realiz&oacute; la copia de seguridad, y
d1608 1
a1608 2
<h2>14.10 - C&oacute;mo montar im&aacute;genes de disco en
OpenBSD</h2>
d1611 2
a1612 2
Para montar una imagen de disco (im&aacute;genes ISO, im&aacute;genes
de disco creadas con ´dd´, etc.. ) en OpenBSD, debe configurar un
d1616 2
a1617 3
<em>/tmp/ISO.image</em>, deber&iacute;a seguir los siguientes pasos
para montar la imagen:
</p>
d1619 1
a1619 1
<table border="0" width="800">
a1634 1
</p>
a1637 1
</p>
d1639 1
a1639 1
<table border="0" width="800">
a1652 1
</p>
d1659 15
a1673 19
PCI IDE DMA es inestable en muchas combinaciones de
<em>hardware</em>.  Hasta hace poco tiempo, la mayor&iacute;a
de sistemas operativos &laquo;m&aacute;s conocidos&raquo; que
aseguraban dar soporte para transferencias DMA con
dispositivos IDE, no ten&iacute;an esa funcionalidad activada
de modo predeterminado.
</p>

<p>
OpenBSD es agresivo, e intenta usar el modo DMA m&aacute;s
alto que pueda configurar.  Esto corrompe las transferencias
de datos en algunas configuraciones, por culpa de placas base
con <em>chipsets</em> err&oacute;neos, controladoras
err&oacute;neas y, o, ruido en los cables.  Por suerte, los
modos Ultra-DMA protegen las transferencias de datos con un
CRC para detectar la corrupci&oacute;n.  Cuando el CRC
Ultra-DMA falla, OpenBSD muestra un mensaje de error e intenta
repetir la operaci&oacute;n.
</p>
d1680 3
a1682 5
Despu&eacute;s de un par de fallos, OpenBSD prueba un modo
Ultra-DMA m&aacute;s bajo, pero m&aacute;s estable.  Si se
llega al modo 0 Ultra-DMA, el controlador baja de grado hasta
el modo PIO.
</p>
d1685 2
a1686 2
Si OpenBSD no consigue bajar el modo, o si el proceso bloquea
la m&aacute;quina, por favor env&iacute;e un
d1688 56
a1743 1
</p>
d1746 1
a1746 1
<h2>14.12 - Opciones de RAID para OpenBSD</h2>
d1750 5
a1754 6
oportunidad de usar dispositivos m&uacute;ltiples para obtener
un mejor rendimiento, m&aacute;s capacidad, y/o redundancia de
la que se puede obtener de un &uacute;nico dispositivo.
Aunque una explicaci&oacute;n completa de los beneficios y
riesgos de RAID no entra en los objetivos de esta
secci&oacute;n, hay un par de puntos que son importantes
d1758 2
a1759 4
<li>RAID no tiene nada que ver con las copias de
seguridad</li>
<li>Por s&iacute; solo, RAID no elimina el tiempo de
ca&iacute;das.</li>
d1763 2
a1764 3
Si es la primera vez que lee informaci&oacute;n sobre RAID,
tenga en cuenta que esto no es un buen comienzo para explorar
RAID.
d1769 3
a1771 4
OpenBSD incluye <em>RAIDframe</em>, una soluci&oacute;n de
software de RAID.  Puede encontrar documentaci&oacute;n sobre
<em>RAIDframe</em> en los siguientes sitios:
</p>
d1775 4
a1778 4
<li><a href="http://www.pdl.cmu.edu/RAIDframe/">Sitio
principal de RAIDframe</a></li>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raidctl&amp;sektion=8">p&aacute;gina del manual de raidctl(8)</a></li>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raid&amp;sektion=4">p&aacute;gina del manual de raid(4)</a></li>
a1785 1
</p>
d1790 4
a1793 4
Muchas <a href="../../es/plat.html">plataformas</a> de OpenBSD
incluyen soporte para varios productos de <em>hardware</em> de
RAID.  Las opciones var&iacute;an seg&uacute;n la plataforma;
mire en la p&aacute;gina de soporte apropiada para cada una
a1794 1
</p>
d1797 6
a1802 8
Otra opci&oacute;n disponible para muchas plataformas es la de
los muchos productos que hacen que dispositivos
m&uacute;ltiples act&uacute;en como un &uacute;nico
dispositivo IDE o SCSI, y est&aacute;n conectados en un
adaptador IDE o SCSI normal.  Estos dispositivos pueden
funcionar en casi cualquier plataforma de <em>hardware</em>
que disponga de soporte para SCSI o IDE.
</p>
a1805 1
</p>
d1808 3
a1810 3
<li><a href="http://www.arcoide.com/">Arco</a></li>
<li><a href="http://www.maxtronic.com/">Maxtronic</a></li>
<li><a href="http://www.infortrend.com/">Infortrend</a></li>
d1814 3
a1816 4
(Nota:  &eacute;stos son simplemente productos sobre los que
los usuarios de OpenBSD han informado que utilizan, no es
ning&uacute;n tipo de recomendaci&oacute;n ni es una lista
exhaustiva).
d1822 6
a1827 7
<a href="../../es/mail.html">listas de correo</a> es si
&laquo;hay soporte para las controladoras de IDE RAID Promise
o HighPoint&raquo;, y la respuesta es &laquo;No&raquo;.  Estas
tarjetas y <em>chips</em> no son controladores de
<em>hardware</em> de RAID reales, sino <em>software</em> de
RAID de arranque asistido por la BIOS.  Como OpenBSD ya
dispone de soporte para <em>software</em> de RAID
d1829 2
a1830 3
desarrolladores de OpenBSD la implementaci&oacute;n de un
soporte especial para estas tarjetas.
</p>
a1836 1
</p>
d1844 2
a1845 2
Originally [OpenBSD: faq14.html,v 1.68 2002/07/12 02:51:35 nick Exp ]<br>
$Translation: faq14.html,v 1.31 2002/07/14 07:03:30 horacio Exp $<br>
a1847 1
</p>
@


1.30
log
@
sync with badlands translation CVS
@
text
@d2003 2
a2004 2
Originally [OpenBSD: faq14.html,v 1.67 2002/07/02 01:17:58 nick Exp ]<br>
$Translation: faq14.html,v 1.30 2002/07/05 02:08:28 horacio Exp $<br>
@


1.29
log
@
sync with badlands translation CVS
@
text
@d516 2
a517 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;apropos=0&amp;sektion=8&amp;arch=i386&amp;format=html">fdisk(8)</a> (<em>s&oacute;lo i386</em>) y
d616 1
a616 1
bsd# <strong>newfs wd1a</strong>
d633 1
a633 1
mount /dev/wd1a /u
d707 1
a707 1
ericj@@oshibana&gt; <strong>swapctl -l</strong>
d734 1
a734 1
ericj@@oshibana&gt; <strong>sudo dd if=/dev/zero of=/var/swap bs=1k count=32768</strong>
d747 2
a748 2
ericj@@oshibana&gt; <strong>sudo chmod 600 /var/swap</strong>
ericj@@oshibana&gt; <strong>sudo swapctl -a /var/swap</strong>
d757 1
a757 1
ericj@@oshibana&gt; <strong>swapctl -l</strong>
d773 1
a773 1
ericj@@oshibana&gt; <strong>cat /etc/fstab</strong>
d806 1
a806 1
ericj@@oshibana&gt; <strong>sudo dd if=/dev/zero of=/var/swap bs=1k count=32768</strong>
d820 1
a820 1
ericj@@oshibana&gt; <strong>cat /etc/fstab</strong>
d834 1
a834 1
ericj@@oshibana&gt; <strong>sudo vnconfig -c -v vnd0 /var/swap</strong>
d847 2
a848 2
ericj@@oshibana&gt; <strong>sudo swapctl -a /dev/vnd0c</strong>
ericj@@oshibana&gt; <strong>swapctl -l</strong>
d1384 1
a1384 1
shell# <strong>mount</strong>
d1402 1
a1402 1
shell# <strong>mount</strong>
d1642 1
a1642 1
shell# <strong>fdisk -e sd0</strong>
d1659 1
a1659 1
shell# <strong>disklabel -E sd0</strong>
d1676 2
a1677 2
shell# <strong>newfs /dev/rsd0a</strong>
shell# <strong>newfs /dev/rsd0h</strong>
d1686 1
a1686 1
shell# <strong>mount /dev/sd0a /mnt</strong>
d1695 2
a1696 2
shell# <strong>cd /mnt</strong>
shell# <strong>restore -rs 1 -f /dev/rst0</strong>
d1705 1
a1705 1
shell# <strong>fdisk -i sd0</strong>
d1715 2
a1716 2
shell# <strong>cp /usr/mdec/boot /mnt/boot</strong>
shell# <strong>/usr/mdec/installboot -v /mnt/boot /usr/mdec/biosboot sd0</strong>
d1730 2
a1731 2
shell# <strong>umount /mnt</strong>
shell# <strong>halt</strong>
d1762 1
a1762 1
shell# <strong>mount -u -w /</strong>
d1773 1
a1773 1
shell# <strong>mount /dev/sd0h /usr; cd /usr; restore -rs 2 -f /dev/rst0</strong>
d1776 3
a1778 3
shell#	<strong>mount /dev/sd0d /var; cd /var; restore -rs 2 -f /dev/rst0</strong>
shell#	<strong>mount /dev/sd0e /home; cd /home; restore -rs 3 -f /dev/rst0</strong>
shell#	<strong>mount /dev/sd0h /usr; cd /usr; restore -rs 4 -f /dev/rst0</strong>
d2003 2
a2004 2
Originally [OpenBSD: faq14.html,v 1.65 2002/06/14 21:20:30 nick Exp ]<br>
$Translation: faq14.html,v 1.29 2002/06/17 21:32:39 horacio Exp $<br>
@


1.28
log
@
sync iwth badlands translation CVS
@
text
@d696 5
a700 5
adicional del &aacute;rea de <em>swap</em>.  Esto no es para los usuarios
que usen &quot;Soft Updates&quot; (que viene desactivado por
definici&oacute;n).  Para empezar, puede ver cu&aacute;nta memoria de
<em>swap</em> tiene en ese momento y cu&aacute;nta est&aacute; usando con
la utilidad
d1268 26
a1293 27
casi pr&aacute;cticamente todos los discos modernos tienen m&aacute;s
de 1024 cilindros, la mayor&iacute;a de chips de BIOS SCSI (que vienen
integrados en la tarjeta controladora SCSI) y de BIOS IDE (que son
parte del resto de la BIOS para PCs) disponen de una opci&oacute;n
(algunas veces preactivada) para &laquo;traducir&raquo; la
geometr&iacute;a real del disco en algo que est&eacute; dentro de los
l&iacute;mites de la capacidad de MS-DOS.  Sin embargo, no todos los
chips de BIOS &laquo;traducen&raquo; la geometr&iacute;a del mismo
modo.  Si cambia su BIOS (instalando una nueva placa base o
a&ntilde;adiendo una nueva controladora SCSI) y la nueva usa una
&laquo;traducci&oacute;n&raquo; de la geometr&iacute;a diferente, no
podr&aacute; cargar la segunda fase del gestor de arranque (y por lo
tanto no podr&aacute; cargar el n&uacute;cleo).  Esto se debe a que la
primera fase del gestor de arranque contiene una lista de bloques que
comprende <em>/boot</em> en t&eacute;rminos de la geometr&iacute;a
&laquo;traducida&raquo; original.  Si est&aacute; usando discos IDE y
realiza cambios en la configuraci&oacute;n de su BIOS, tambi&eacute;n
puede cambiar sin saberlo su traducci&oacute;n (la mayor&iacute;a de
BIOS IDE ofrecen 3 traducciones diferentes).  Para que su bloque de
arranque pueda iniciar con normalidad, ponga un disquete de arranque, y
en el punto <kbd>boot&gt;</kbd> escriba <kbd>b hd0a:/bsd</kbd> para
forzar el arranque desde el primer disco duro (y no desde el disquete).
Su m&aacute;quina deber&iacute;a iniciar sin ning&uacute;n problema.
Ahora debe actualizar la primera fase del gestor de arranque para poder
ver la nueva geometr&iacute;a (y reescribir el bloque de arranque de
acuerdo con ella).
<br>
d2002 2
a2003 2
Originally [OpenBSD: faq14.html,v 1.63 2002/06/07 22:54:21 nick Exp ]<br>
$Translation: faq14.html,v 1.28 2002/06/08 11:48:40 horacio Exp $<br>
@


1.27
log
@
sync with badlands translation CVS
@
text
@d44 2
a45 2
puede haber en OpenBSD con dispositivos de gran capacidad?
(espec&iacute;fico de i386)</a></li>
d439 1
d466 41
a506 40
   <li><strong>help</strong> Mostrar una lista de las &oacute;rdenes
       comprensibles para fdisk en el modo de edici&oacute;n
       interactiva.</li>
   <li><strong>reinit</strong> Iniciar la copia residente en memoria
       del bloque de arranque seleccionado.</li>
   <li><strong>disk</strong> Mostrar la geometr&iacute;a del
       dispositivo que haya verificado fdisk.  Si lo desea, puede
       editarla para aplicarle cambios.</li>
   <li><strong>edit</strong> Editar una cierta entrada en la tabla en
       la copia residente en memoria del bloque de arranque actual.
       Puede editarla en modo de geometr&iacute;a de la BIOS o en modo
       de sectores de inicio y tama&ntilde;os.</li>
   <li><strong>flag</strong> Activar una cierta entrada en la tabla de
       particiones como partici&oacute;n de arranque.  Solamente se
       puede marcar una entrada como partici&oacute;n de arranque.  Si
       quiere arrancar desde una partici&oacute;n extendida,
       tendr&aacute; que marcar la entrada de la partici&oacute;n en la
       tabla como partici&oacute;n de arranque.</li>
   <li><strong>update</strong> Actualizar el c&oacute;digo de la
       m&aacute;quina en la copia residente en memoria del bloque de
       arranque seleccionado.</li>
   <li><strong>select</strong> Seleccionar y cargar en memoria el
       bloque de arranque que se&ntilde;ala a la entrada en la tabla de
       particiones extendidas del bloque de arranque actual.</li>
   <li><strong>print</strong> Mostrar en pantalla la copia residente en 
       memoria del bloque de arranque seleccionado y su tabla MBR.</li>
   <li><strong>write</strong> Grabar la copia residente en memoria del
       bloque de arranque al disco.  Le pedir&aacute; que confirme esta
       operaci&oacute;n.</li>
   <li><strong>exit</strong> Salir del nivel actual de fdisk, volviendo
       al bloque de arranque residente en memoria previamente
       seleccionado, o saliendo completamente del programa si no
       hubiera ninguno.</li>
   <li><strong>quit</strong> Salir del nivel actual de fdisk, volviendo
       al bloque de arranque residente en memoria previamente
       seleccionado, o saliendo completamente del programa si no
       hubiera ninguno.  A diferencia de <strong>exit</strong>, no
       guarda los cambios del bloque modificado.</li>
   <li><strong>abort</strong> Salir del programa sin guardar
       cambios.</li>
d1164 1
a1164 2
con dispositivos de gran capacidad?  (espec&iacute;fico de
i386)</h2>
d1178 2
a1179 6
dispositivos lo llamar&aacute;n 137G) no tendr&aacute;n
soporte en OpenBSD hasta que se haya implementado los nuevos
est&aacute;ndares de la interfaz (Las
<a href="/donations.html">donaciones</a> de
<a href="/want.html">equipos y componentes</a> ayudan a
implementar estos nuevos est&aacute;ndares).
d1188 3
a1190 3
utilizar (y por lo tanto est&aacute; limitado por) la BIOS del
sistema.
Los cargadores de arranque de OpenBSD
d1200 7
a1206 7
&aacute;rea direccionable de la BIOS en el disco, o dentro de
los primeros 8G del disco, cualquiera que sea m&aacute;s
peque&ntilde;a.  Esto significa que en algunos equipos viejos
la partici&oacute;n <em>root</em> se debe encontrar dentro del
l&iacute;mite de los primeros 540M, pero en la mayor&iacute;a
de equipos nuevos se puede encontrar en cualquier parte dentro
de los primeros 8G.
d1236 2
a1237 2
arranque basado en la BIOS no pudo localizar <em>/bsd</em> y
el sistema se colg&oacute;.
d1242 1
a1242 1
dentro del rango de la BIOS.  Para mayor seguridad, hay una
d1248 3
a1250 3
dentro del espacio direccionable por la BIOS de la
m&aacute;quina o dentro de los primeros 8G, cualquiera que sea
el m&aacute;s peque&ntilde;o de los dos.</strong>
d1254 4
a1257 4
OpenBSD puede acceder a todo el dispositivo IDE completo (hasta
128G), no s&oacute;lo hasta el espacio reconocido por la BIOS,
pero <em>root</em> debe encontrarse dentro del l&iacute;mite
impuesto por la BIOS.
d2003 2
a2004 2
Originally [OpenBSD: faq14.html,v 1.61 2002/05/20 01:04:48 nick Exp ]<br>
$Translation: faq14.html,v 1.27 2002/05/21 15:32:23 horacio Exp $<br>
@


1.26
log
@
sync with badlands translation CVS
@
text
@d681 5
a685 10
Despu&eacute;s de la versi&oacute;n oficial de OpenBSD 2.5
apareci&oacute;
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=swapctl&amp;sektion=8&amp;format=html">swapctl(8)</a>,
con el que es mucho m&aacute;s f&aacute;cil tratar con dispositivos de
<em>swap</em>.  Si est&aacute; usando la versi&oacute;n 2.5 de OpenBSD,
intercambie swapctl por swapon, y use pstart -s para ver una lista de
dispositivos de <em>swap</em>.  El uso de ficheros como memoria de
<em>swap</em> no requiere la compilaci&oacute;n de un n&uacute;cleo del
sistema personalizado, aunque aqu&iacute; explicaremos c&oacute;mo
hacerlo de las dos maneras.
d865 3
a867 1
incremento en el rendimiento de la escritura en disco.<br>
d885 2
a886 2
Para activar &quot;Softupdates&quot;, el n&uacute;cleo debe
estar compilado con
d894 2
a895 3
Esta opci&oacute;n est&aacute; incluida en los n&uacute;cleos GENERIC
desde la versi&oacute;n 2.9 de OpenBSD.  Sin embargo, es necesario que
antes la active para cada uno de los puntos de montaje del disco.
d899 3
a901 5
A partir de la versi&oacute;n 2.9, para activar <em>soft
updates</em> se debe hacer con una opci&oacute;n de montaje de
tiempo, en lugar de usar 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tunefs&amp;sektion=8">tunefs(8)</a>.
Ahora, al montar una partici&oacute;n con la utilidad
d903 5
a907 6
puede especificar que desea tener <em>soft updates</em>
activado en esa partici&oacute;n.  A continuaci&oacute;n puede
ver un entrada en
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&amp;sektion=5">/etc/fstab(5)</a>
de muestra con una partici&oacute;n, <em>sd0a</em> que
queremos tener montada con <em>soft updates</em>.
d915 6
a920 17
+If you are using an OpenBSD release earlier than 2.9 you need to boot into single-user mode:
Si est&aacute; usando una versi&oacute;n de OpenBSD anterior al
versi&oacute;n final 2.9, debe arrancar en modo monousuario:
</p>

<pre>
        boot&gt; <strong>boot -s</strong>
        [snip]
        bsd# <strong>tunefs -s enable &lt;raw device&gt;</strong>
        bsd# <strong>reboot -n</strong>
</pre>

<p>
Nota para los usuarios de sparc:  No active <em>soft updates</em> en
las m&aacute;quinas sun4 ni sun4c.  Estas arquitecturas s&oacute;lo
tienen soporte para una cantidad de memoria muy limitada, y no pueden
usar esta funcionalidad.  En las m&aacute;quinas sun4m funciona bien.
d949 10
d1935 4
a1938 4
En este momento, la partici&oacute;n ra&iacute;z no se puede
replicar directamente con <em>RAIDframe</em> en OpenBSD, pero
esto es algo que cambiar&aacute; en la pr&oacute;xima
versi&oacute;n de OpenBSD.
d2006 2
a2007 2
Originally [OpenBSD: faq14.html,v 1.60 2002/04/18 19:49:04 nick Exp ]<br>
$Translation: faq14.html,v 1.26 2002/05/06 21:26:40 horacio Exp $<br>
@


1.25
log
@
sync with badlands translation CVS
@
text
@d255 6
a260 6
Una, que el inicio del sector (&quot;offset&quot;) lo averigua
de forma autom&aacute;tica.  Cuando haga una
instalaci&oacute;n de este tipo no tendr&aacute; que
configurar los sectores.  Otra diferencia es que la
clasificaci&oacute;n '<strong>c</strong>' representa a todo el
disco.  Por este motivo no debe tocar la clasificaci&oacute;n
d564 3
a566 4
esa partici&oacute;n.  El sector de inicio
(&quot;<em>offset</em>&quot;) para su primera partici&oacute;n
nueva debe ser el mismo que el
&quot;<em>sectors/track</em>&quot; que le haya dado
d2015 1
a2015 1
$Translation: faq14.html,v 1.25 2002/04/29 10:05:42 horacio Exp $<br>
@


1.24
log
@
sync with badlands translation CVS
@
text
@d1865 6
a1870 2
PCI IDE DMA es inestable.  Por este motivo Microsoft lo mantiene
desactivado de forma predeterminada en sus sistemas operativos.
d1874 9
a1882 8
OpenBSD es agresivo, e intenta usar el modo DMA m&aacute;s alto que
pueda configurar.  Esto corrompe las transferencias de datos en algunas
configuraciones, por culpa de placas base con <em>chipsets</em>
err&oacute;neos, controladoras err&oacute;neas y, o, ruido en los
cables.  Por suerte, los modos Ultra-DMA protegen las transferencias de
datos con un CRC para detectar la corrupci&oacute;n.  Cuando el CRC
Ultra-DMA falla, OpenBSD muestra un mensaje de error e intenta repetir
la operaci&oacute;n.
d1890 4
a1893 3
Despu&eacute;s de un par de fallos, OpenBSD prueba un modo Ultra-DMA
m&aacute;s bajo, pero m&aacute;s estable.  Si se llega al modo 0
Ultra-DMA, el controlador baja de grado hasta el modo PIO.
d1897 2
a1898 2
Si OpenBSD no consigue bajar el modo, o si el proceso bloquea la
m&aacute;quina, por favor env&iacute;e un
d2015 2
a2016 2
Originally [OpenBSD: faq14.html,v 1.59 2002/03/20 03:54:33 nick Exp ]<br>
$Translation: faq14.html,v 1.24 2002/03/29 10:02:49 horacio Exp $<br>
@


1.23
log
@
sync with badlands translation CVS.
@
text
@d7 1
d2010 1
a2010 1
$Translation: faq14.html,v 1.23 2002/03/20 10:07:10 horacio Exp $<br>
@


1.22
log
@
sync with badlands translation CVS.
@
text
@d2008 2
a2009 2
Originally [OpenBSD: faq14.html,v 1.58 2002/02/16 02:18:20 nick Exp ]<br>
$Translation: faq14.html,v 1.22 2002/02/23 02:49:56 horacio Exp $<br>
@


1.21
log
@
sync with badlands translation CVS
@
text
@d1 2
d12 6
a22 1
<p>
d24 1
a24 2
disco</font><hr></h2>
</p>
d26 2
a27 2
<p>
<ul><h3>Tabla de contenidos</h3>
d49 1
a49 1
desde la cinta.</a></li>
d54 2
a56 1
</p> 
a58 1
<p>
a61 1
</p>
a62 1
<p>
d64 1
a71 1
</p>
d73 1
a73 1
<p>
d79 1
a79 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&sektion=8&format=html">disklabel(8)</a>.
d98 1
a98 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&sektion=5&format=html">disklabel(5)</a>.
d107 1
a107 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&sektion=8&format=html">disklabel(8)</a>,
d128 1
a128 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&sektion=8&format=html">disklabel(8)</a>.
a167 1
<ul>
a201 2
</ul>
</p>
a230 1
<ul>
a250 2
</ul>
</p>
d269 1
a270 1
<ul>
a274 2
</ul>
</p>
d297 1
a298 1
<ul>
a328 2
</ul>
</p>
d335 1
a336 1
<ul>
a339 2
</ul>
</p>
d348 1
a348 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&sektion=8&format=html">disklabel(8)</a>.
d350 1
a350 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&sektion=8&format=html">disklabel(8)</a>
d355 1
a355 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&sektion=8&format=html">disklabel(8)</a>.
a358 1
<p>
a361 1
</p>
d366 1
a366 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&apropos=0&sektion=8&arch=i386&format=html">fdisk(8)</a>
d393 1
a394 1
<ul>
a397 2
</ul>
</p>
d401 1
a402 1
<ul>
a413 2
</ul>
</p>
d429 1
a430 1
<ul>
a449 1
</ul>
d461 1
a504 1
</p>
a505 1
<p>
a508 1
</p>
d513 2
a514 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&apropos=0&sektion=8&arch=i386&format=html">fdisk(8)</a> (<em>s&oacute;lo i386</em>) y
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&apropos=0&sektion=8&format=html">disklabel(8)</a>
d520 1
a521 1
<ul>
a524 1
</ul>
d531 1
a532 1
<ul>
a547 1
</ul>
d559 1
a559 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bc&sektion=1">bc(1)</a>)
d582 1
a583 1
<ul>
a586 2
</ul>
</p>
d609 2
a610 1
usando <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&apropos=0&sektion=8&format=html">newfs(8)</a>.
a611 1
<ul>
a614 2
</ul>
</p>
d619 1
a619 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&sektion=8">dmesg(8)</a> 
d627 1
a628 1
<ul>
a631 2
</ul>
</p>
d634 2
a635 1
Finalmente, a&ntilde;&aacute;dalo a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&sektion=5">/etc/fstab(5)</a>
a636 1
<ul>
a639 2
</ul>
</p>
d646 1
a646 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&sektion=5">/etc/fstab(5)</a>
a664 1
<p>
a667 1
</p>
d675 1
a675 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=unlimit&sektion=1&format=html">unlimit(1)</a>,
d677 1
a677 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ulimit&sektion=1&format=html">ulimit(1)</a>)
d683 1
a683 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=swapctl&sektion=8&format=html">swapctl(8)</a>,
d704 1
a704 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=swapctl&sektion=8&format=html">swapctl(8)</a>,
d706 1
a707 1
<ul>
a712 2
</ul>
</p>
d730 1
a730 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&sektion=1&format=html">dd(1)</a>.
d733 1
a734 1
<ul>
a740 2
</ul>
</p>
d746 1
a747 1
<ul>
a751 2
</ul>
</p>
d756 1
a757 1
<ul>
a764 2
</ul>
</p>
d772 1
a773 1
<ul>
a778 2
</ul>
</p>
d795 1
a796 1
<ul>
a799 2
</ul>
</p>
d805 1
a806 1
<ul>
a812 2
</ul>
</p>
d819 1
a820 1
<ul>
a825 2
</ul>
</p>
d832 2
a833 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vnconfig&sektion=8&format=html">vnconfig(8)</a>.
a834 1
<ul>
a838 2
</ul>
</p>
d846 1
a847 1
<ul>
a855 2
</ul>
</p>
a857 1
<p>
a860 1
</p>
d873 1
a873 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fsck&sektion=8">fsck(8)</a>
d906 1
a906 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tunefs&sektion=8">tunefs(8)</a>.
d908 1
a908 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount&sektion=8">mount(8)</a>,
d912 1
a912 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&sektion=5">/etc/fstab(5)</a>
d917 1
a917 1
<ul><pre>
d919 1
a919 1
</pre></ul>
d925 1
a926 1
<ul>
a932 2
</ul>
</p>
a940 1
<p>
a945 1
</p>
a983 1
<ul>
a990 1
</ul>
d1004 1
a1004 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&sektion=8&arch=i386&format=html">fdisk(8)</a> :
a1006 1
<ul>
a1009 1
</ul>
a1046 1
<ul>
a1049 1
</ul>
a1129 1
<ul>
a1133 1
</ul>
d1140 1
a1140 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=installboot&sektion=8&arch=i386">installboot(8)</a>
d1143 1
a1143 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=biosboot&sektion=8&arch=i386">biosboot(8)</a>,
d1145 2
a1146 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&sektion=8&arch=i386">boot(8)</a>.  
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&sektion=8&arch=i386">boot(8)</a> 
d1149 1
a1149 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=biosboot&sektion=8&arch=i386">biosboot(8)</a>
d1152 1
a1152 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&sektion=8&arch=i386">boot(8)</a>.
d1155 1
a1155 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&sektion=8&arch=i386">boot(8)</a>, 
d1157 1
a1157 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=installboot&sektion=8&arch=i386">installboot(8)</a>
d1159 1
a1159 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&sektion=8&arch=i386">boot(8)</a>.
a1166 1
<p>
a1171 1
</p>
d1202 2
a1203 2
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=biosboot&sektion=8&arch=i386">biosboot(8)</a> y
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&sektion=8&arch=i386">boot(8)</a>)
a1270 1
<p>
a1274 1
</p>
d1308 1
a1309 1
<ul>
a1312 2
</ul>
</p>
d1322 1
a1323 1
<ul>
a1326 2
</ul>
</p>
d1331 1
a1332 1
<ul>
a1339 2
</ul>
</p>
a1340 1
<p>
a1344 1
</p>
d1359 1
a1359 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&sektion=8&format=html">dump(8)</a>/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&sektion=8&format=html">restore(8)</a>
d1364 1
a1364 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&sektion=8&format=html">dump(8)</a>/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&sektion=8&format=html">restore(8)</a>
d1388 1
a1388 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount&sektion=8">mount(8)</a>
d1392 1
a1393 1
<ul>
a1398 2
</ul>
</p>
d1410 1
a1411 1
<ul>
a1418 2
</ul>
</p>
d1433 1
a1434 1
<ul>
a1439 2
</ul>
</p>
d1444 1
a1445 1
<ul>
a1452 2
</ul>
</p>
d1456 1
a1456 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&sektion=8&format=html">dump(8)</a>
d1481 1
a1481 1
La orden <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mt&sektion=1">mt(1)</a>
d1491 1
a1492 1
<ul>
a1495 2
</ul>
</p>
d1518 1
a1519 1
<ul>
a1531 2
</ul>
</p>
d1536 1
a1536 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cron&sektion=8&format=html">cron(8)</a>
d1559 1
a1560 1
<ul>
a1563 2
</ul>
</p>
d1578 1
a1579 1
<ul>
a1582 2
</ul>
</p>
d1594 1
a1595 1
<ul>
a1598 2
</ul>
</p>
d1647 1
a1647 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&apropos=0&sektion=8&arch=i386&format=html">fdisk(8)</a>
d1650 1
a1651 1
<ul>
a1654 1
</ul>
d1663 1
a1663 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&sektion=8&format=html">disklabel(8)</a>
d1667 1
a1668 1
<ul>
a1671 1
</ul>
d1681 1
a1681 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&apropos=0&sektion=8">newfs(8)</a>
d1684 1
a1685 1
<ul>
a1689 1
</ul>
d1694 1
a1695 1
<ul>
a1698 1
</ul>
d1703 1
a1704 1
<ul>
a1708 1
</ul>
d1713 1
a1714 1
<ul>
a1717 1
</ul>
d1723 1
a1724 1
<ul>
a1728 1
</ul>
d1738 1
a1739 1
<ul>
a1743 1
</ul>
d1749 1
a1750 1
<ul>
a1753 1
</ul>
d1770 1
a1771 1
<ul>
a1774 1
</ul>
d1780 1
a1781 1
<ul>
a1790 1
</ul>
d1806 1
a1806 2
<p>
<a name= "MountImage"></a>
a1809 1
</p>
d1815 1
a1815 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vnd&sektion=4">vnd(4)</a>.
a1820 1
<ul>
a1830 1
</ul>
a1842 1
<ul>
a1852 1
</ul>
d1856 1
a1856 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vnconfig&sektion=8">vnconfig(8)</a>
d1859 1
a1859 2
<p>
<a name= "pciideErr"></a>
a1861 1
</p>
d1879 1
a1879 1
<ul><pre>
d1881 1
a1881 1
</pre></ul>
d1895 100
d2002 1
a2003 1
<hr>
d2008 2
a2009 2
Originally [OpenBSD: faq14.html,v 1.56 2002/01/27 22:44:34 nick Exp ]<br>
$Translation: faq14.html,v 1.21 2002/01/28 14:51:09 horacio Exp $<br>
@


1.20
log
@
sync with badlands translation CVS
@
text
@d121 1
a121 1
<a href="#14.2">fdisk(1)</a>.  Durante la instalaci&oacute;n,
d141 1
a141 1
en la <a href="faq4.html#4.3">secci&oacute;n 4.3</a> de las
d1147 1
a1147 1
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/2.9/i386/INSTALL.linux">INSTALL.linux</a>
d1203 1
a1203 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=installboot&sektion=8%2fi386&apropos=0&manpath=OpenBSD+Current&arch=i386">installboot(8)</a>
d1206 1
a1206 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=biosboot&sektion=8%2fi386&apropos=0&manpath=OpenBSD+Current&arch=i386">biosboot(8)</a>,
d1208 2
a1209 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&sektion=8%2fi386&apropos=0&manpath=OpenBSD+Current&arch=i386">boot(8)</a>.  
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&sektion=8%2fi386&apropos=0&manpath=OpenBSD+Current&arch=i386">boot(8)</a> 
d1212 1
a1212 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=biosboot&apropos=0&sektion=8&manpath=OpenBSD+Current&arch=i386&format=html">biosboot(8)</a>
d1215 1
a1215 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&sektion=8%2fi386&apropos=0&manpath=OpenBSD+Current&arch=i386">boot(8)</a>.
d1218 1
a1218 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&sektion=8%2fi386&apropos=0&manpath=OpenBSD+Current&arch=i386">boot(8)</a>, 
d1220 1
a1220 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=installboot&sektion=8%2fi386&apropos=0&manpath=OpenBSD+Current&arch=i386">installboot(8)</a>
d1222 1
a1222 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&sektion=8%2fi386&apropos=0&manpath=OpenBSD+Current&arch=i386">boot(8)</a>.
d1226 1
a1226 1
V&eacute;ase <a href="#14.8">la secci&oacute;n 14.8</a> para
d1267 2
a1268 2
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=biosboot&sektion=8%2fi386&apropos=0&manpath=OpenBSD+Current&arch=i386">biosboot(8)</a> y
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&sektion=8%2fi386&apropos=0&manpath=OpenBSD+Current&arch=i386">boot(8)</a>)
d1751 1
a1751 1
Revise la <a href="#14.2">secci&oacute;n 14.2</a> sobre fdisk para
d1769 3
a1771 3
No se olvide de la partici&oacute;n de <em>swap</em>.
Revise la <a href="#14.1">secci&oacute;n 14.1</a> sobre disklabel para
m&aacute;s informaci&oacute;n.
d1776 1
a1776 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&apropos=0&sektion=8&format=html">newfs(8)</a>
d2020 2
a2021 2
Originally [OpenBSD: faq14.html,v 1.55 2002/01/21 20:28:25 nick Exp ]<br>
$Translation: faq14.html,v 1.20 2002/01/22 21:24:07 horacio Exp $<br>
@


1.19
log
@
sync with badlands translation CVS.
new tags.
@
text
@d9 1
a9 1
<meta name="copyright"     content="Este documento es copyright 1998-2001 de OpenBSD.">
d2020 2
a2021 2
Originally [OpenBSD: faq14.html,v 1.54 2002/01/13 00:00:32 ericj Exp ]<br>
$Translation: faq14.html,v 1.19 2002/01/16 20:14:55 horacio Exp $<br>
@


1.18
log
@
sync with badlands translation CVS
@
text
@d12 1
a12 1
<body bgcolor="#ffffff" text="#000000" link="#23238e">
d22 1
a22 1
<li><a href="#14.1">14.1 - C&oacute;mo usar el
d24 3
a26 3
<li><a href="#14.2">14.2 - C&oacute;mo usar el <em>fdisk</em>
de OpenBSD</a></li>
<li><a href="#14.3">14.3 - C&oacute;mo a&ntilde;adir discos
d28 5
a32 4
<li><a href="#14.4">14.4 - C&oacute;mo usar un fichero como
memoria de intercambio (<em>swap</em></a></li>
<li><a href="#14.5">14.5 - &quot;Soft Updates&quot;</a></li>
<li><a href="#14.6">14.6 - Cuando arranco el sistema
d36 2
a37 2
<li><a href="#14.7">14.7 - &iquest;Qu&eacute; problemas puede
haber en OpenBSD con dispositivos de gran capacidad?
d39 6
a44 6
<li><a href="#14.8">14.8 - Instalaci&oacute;n de bloques de
arranque (espec&iacute;fico de i386)</a></li>
<li><a href="#14.9">14.9 - Prepararse para el desastre: hacer
copias de seguridad (respaldo) y restaurar desde la
cinta.</a></li>
<li><a href="#14.10">14.10 - C&oacute;mo montar
d46 1
a46 1
<li><a href="#14.11">14.11 - &iexcl;Ayuda! &iexcl;me da
d53 1
d56 1
d61 5
a65 4
<li><a href="#14.1.1">&iquest;Qu&eacute; es disklabel?</a>
<li><a href="#14.1.2">disklabel durante la instalaci&oacute;n
de OpenBSD</a>
<li><a href="#14.1.3">Usos comunes de disklabel</a>
d70 1
a70 1
<a name="14.1.1"></a>
d112 1
a112 1
<a name="14.1.2"></a>
d292 1
a292 1
<a name="14.1.3"></a>
d368 1
d371 1
d522 1
d525 1
d693 1
d696 1
d908 1
d995 1
d997 1
a997 1
<h2>14.6 -  Cuando arranco el sistema despu&eacute;s de la
d1000 1
d1226 2
a1227 2
Vea <a href="#14.8">la secci&oacute;n 14.8</a> para m&aacute;s
informaci&oacute;n.
d1231 1
d1236 1
d1337 1
d1341 1
d1415 1
d1417 3
a1419 2
<h2>14.9 - Prepararse para el desastre: hacer copias de seguridad
(respaldo) y restaurar desde la cinta</h2>
d1423 1
d1911 1
d1913 2
a1914 1
<h2>14.10 - Montar im&aacute;genes de disco en OpenBSD</h2>
d1970 1
d1972 1
a1972 1
<h2>14.11 - &iexcl;Ayuda! &iexcl;me da errores con PCIIDE!</h2>
d1992 1
a1992 1
+wd2a:  aborted command, interface CRC error reading fsbn 64 of 64-79 (wd2 bn 127; cn 0 tn 2 sn 1), retrying
d2020 2
a2021 2
Originally [OpenBSD: faq14.html,v 1.52 2001/12/30 11:37:25 jufi Exp ]<br>
$Translation: faq14.html,v 1.18 2001/12/31 00:12:22 horacio Exp $<br>
@


1.17
log
@
typo.
@
text
@d101 4
a104 4
<b>todas</b> sus particiones de OpenBSD (<em>swap</em>,
<em>/</em>, <em>/usr</em>, <em>/var</em>, ...), y
todav&iacute;a le quedan tres particiones libres para otros
sistemas operativos.
d129 23
a151 20
Ya que esto ocurre durante la instalaci&oacute;n, todav&iacute;a no
tendr&aacute; ninguna clasificaci&oacute;n creada, y por lo tanto deben
ser creadas.  La primera clasificaci&oacute;n que tendr&aacute; que
crear es la clasificaci&oacute;n '<b>a</b>'.  Esta clasificaci&oacute;n
DEBE ser en la que se monte el sistema de archivos <b>/</b>.  Puede ver
las particiones que se recomienda crear y sus respectivos
tama&ntilde;os recomendados en la 
<a href="faq4.html#4.3">secci&oacute;n 4.3</a> de las preguntas
frecuentes.  Para servidores se recomienda que, por lo menos, se creen
estas particiones separadas.  Para los usuarios de computadoras
(ordenadores) de sobremesa, ser&aacute; suficiente con crear un
s&oacute;lo punto de montaje para <b>/</b>.  Cuando cree por primera
vez esta partici&oacute;n ra&iacute;z (clasificaci&oacute;n <b>a</b>),
tenga en cuenta que necesitar&aacute; dejar ALGO de espacio para la
clasificaci&oacute;n de <em>swap</em>.  Ahora que ya hemos explicado lo
m&aacute;s b&aacute;sico, pasemos a un ejemplo de la utilizaci&oacute;n
de disklabel durante la instalaci&oacute;n.  En este primer ejemplo se
asume que OpenBSD va a ser el &uacute;nico sistema operativo en la
m&aacute;quina, y que se llevar&aacute; a cabo una instalaci&oacute;n
completa.
d200 1
a200 1
de 64MB montada en <b>/</b>, y una partici&oacute;n
d210 6
a215 6
clasificaci&oacute;n '<b>b</b>' ser&aacute; <em>swap</em>.
Esto es correcto ya que el n&uacute;cleo del sistema GENERIC
est&aacute; configurado para buscar <em>swap</em> en la
clasificaci&oacute;n <b>b</b>, y todo lo que usted debe hacer
es seguir esta gu&iacute;a y usar <b>b</b> como su &aacute;rea
de <em>swap</em>.
d251 8
a258 6
En este ejemplo puede notar dos diferencias con el anterior.  Una, que
el inicio del sector (&quot;offset&quot;) lo averigua de forma
autom&aacute;tica.  Cuando haga una instalaci&oacute;n de este tipo no
tendr&aacute; que configurar los sectores.  Otra diferencia es que la
clasificaci&oacute;n '<b>c</b>' representa a todo el disco.  Por este
motivo no debe tocar la clasificaci&oacute;n <b>c</b>.
d262 5
a266 4
Una vez que todas las clasificaciones hayan sido creadas, todo lo
quedar&aacute; por hacer ser&aacute; grabarlas en el disco y pasar al
proceso de instalaci&oacute;n.  Para grabarlo todo y salir de disklabel
(y continuar con la instalaci&oacute;n), haga lo siguiente:
d381 3
a383 3
&laquo;Modo Monousuario&raquo; (<b>boot -s</b> - &quot;Single
User Mode&quot;).  Fdisk tambi&eacute;n configura el MBR de
los discos.
d388 4
a391 3
s&oacute;lo necesitar&aacute; <b>UNA</b> partici&oacute;n de
OpenBSD, y a continuaci&oacute;n usar disklabel para poner en
ella una <em>swap</em> y un sistema de archivos.
d431 6
a436 5
En el ejemplo anterior s&oacute;lo vimos nuestra informaci&oacute;n.
&iquest;Y si quisi&eacute;ramos editar nuestra tabla de particiones?
Pues bien, para ello debemos usar el indicador <b>-e</b>, que nos
trasladar&aacute; a una l&iacute;nea de &oacute;rdenes desde la que
podremos interaccionar con fdisk.
d468 2
a469 2
Aqu&iacute; tiene una revisi&oacute;n de las &oacute;rdenes que puede
usar cuando escoja el indicador <b>-e</b>.
d561 9
a569 9
Ignore la partici&oacute;n <b>c</b>, siempre est&aacute;
ah&iacute; y es para que funcionen programas como disklabel.
Para operaciones normales, <em>fsize</em> siempre debe ser
1024, <em>bsize</em> siempre debe ser 8192, y <em>cpg</em>
siempre debe ser 16.  <em>fstype</em> es 4.2BSD.  <em>total
sectors</em> es el tama&ntilde;o total del disco.  Supongamos
que &eacute;ste es un disco de 3GB;  tres gigabytes, en
t&eacute;rminos del fabricante del disco, son 3000 megabytes.
Divida 6185088 entre 3000 (use
d582 2
a583 2
partici&oacute;n <b>c</b>, ya que no juega ning&uacute;n papel
aqu&iacute;).
d602 15
a616 13
<b>&iexcl;Si todo esto le parece complicado e innecesario, puede usar
disklabel -E para obtener el mismo modo de particiones que tiene en su
disco de instalaci&oacute;n!</b> Ah&iacute; puede usar
&laquo;96M&raquo; para especificar &laquo;96 megabytes&raquo; (o con un
disco lo bastante grande, 96G para 96 gigabytes).  Desafortunadamente,
el modo -E usa la geometr&iacute;a del disco de la BIOS, no la
geometr&iacute;a del disco real, y con frecuencia &eacute;stas no son
las mismas.  Para evitar esta limitaci&oacute;n, escriba 'g d' para la
'geometr&iacute;a del disco'.  Otras opciones son 'g b' para la
'geometr&iacute;a de la bios' y 'g u' para la 'geometr&iacute;a del
usuario', o simplemente lo que indique la
&laquo;clasificaci&oacute;n&raquo; (<em>label</em>) antes de que
disklabel efect&uacute;e alg&uacute;n cambio.
d621 2
a622 2
finalizar, debe crear el sistema de archivos en el disco usando
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&apropos=0&sektion=8&format=html">newfs(8)</a>.
d1046 1
a1046 1
en el directorio <em>2.9/tools/booteasy/Boot.bin</em>, y se
d1053 1
a1053 1
# <b>fdisk -i -f /mnt/2.9/tools/booteasy/Boot.bin wd0</b>
d1058 1
a1058 1
Se asume que tiene un CD 2.9 montado en <em>/mnt</em>, y que
d1095 1
a1095 1
A:\&gt;<b>fdisk /mbr</b>
d1162 1
a1162 1
 <p>
d1170 1
a1170 1
 </p>
d1233 6
a1238 5
dispositivos ATA, aquellos con capacidad mayor de 128G (1G=2^,
no 1.000.000.000, aunque los fabricantes de dispositivos lo
llamar&aacute;n 137G) no tendr&aacute;n soporte en OpenBSD
hasta que se haya implementado los nuevos est&aacute;ndares de
la interfaz (Las <a href="/donations.html">donaciones</a> de
d1450 1
a1450 1
shell# <b>mount</b>
d1470 1
a1470 1
shell# <b>mount</b>
d1495 3
a1497 3
# <b>/sbin/dump -0au -f /dev/nrst0 /dev/rsd0a</b>
# <b>/sbin/dump -0au -f /dev/nrst0 /dev/rsd0h</b>
# <b>mt -f /dev/rst0 rewind  </b>
d1508 5
a1512 5
# <b>/sbin/dump -0au -f /dev/nrst0 /dev/rsd0a</b>
# <b>/sbin/dump -0au -f /dev/nrst0 /dev/rsd0d</b>
# <b>/sbin/dump -0au -f /dev/nrst0 /dev/rsd0e</b>
# <b>/sbin/dump -0au -f /dev/nrst0 /dev/rsd0h  </b>
# <b>mt -f /dev/rst0 rewind  </b>
d1526 9
a1534 8
   <li><b>0</b> - Lleva a cabo un nivel 0 de dump, lo coge todo.
   <li><b>a</b> - Intenta determinar autom&aacute;ticamente el
       tama&ntilde;o de la cinta.
   <li><b>u</b> - Actualiza el fichero <em>/etc/dumpdates</em> para
       indicar cu&aacute;ndo se realiz&oacute; la &uacute;ltima copia
       de seguridad.
   <li><b>f</b> - Indica qu&eacute; dispositivo de cinta se
       usar&aacute; (en este caso <em>/dev/nrst0</em>).
d1650 1
a1650 1
# <b>/sbin/restore -tvs 1 -f /dev/rst0</b>
d1659 1
a1659 1
(<em><b>/</b></em>).
d1668 1
a1668 1
# <b>/sbin/restore -tvs 2 -f /dev/rst0 > /home/me/list.txt</b>
d1726 1
a1726 1
shell# <b>fdisk -e sd0</b>
d1744 1
a1744 1
shell# <b>disklabel -E sd0</b>
d1762 2
a1763 2
shell# <b>newfs /dev/rsd0a</b>
shell# <b>newfs /dev/rsd0h</b>
d1773 1
a1773 1
shell# <b>mount /dev/sd0a /mnt</b>
d1783 2
a1784 2
shell# <b>cd /mnt</b>
shell# <b>restore -rs 1 -f /dev/rst0</b>
d1794 1
a1794 1
shell# <b>fdisk -i sd0</b>
d1805 2
a1806 2
shell# <b>cp /usr/mdec/boot /mnt/boot</b>
shell# <b>/usr/mdec/installboot -v /mnt/boot /usr/mdec/biosboot sd0</b>
d1821 2
a1822 2
shell# <b>umount /mnt</b>
shell# <b>halt</b>
d1833 1
a1833 1
boot&gt; <b>bsd -s</b>
d1840 1
a1840 1
sistema de archivos ra&iacute;z (<em><b>/</b></em>).
d1855 1
a1855 1
shell# <b>mount -u -w /</b>
d1867 1
a1867 1
shell# <b>mount /dev/sd0h /usr; cd /usr; restore -rs 2 -f /dev/rst0</b>
d1870 3
a1872 3
shell#	<b>mount /dev/sd0d /var; cd /var; restore -rs 2 -f /dev/rst0</b>
shell#	<b>mount /dev/sd0e /home; cd /home; restore -rs 3 -f /dev/rst0</b>
shell#	<b>mount /dev/sd0h /usr; cd /usr; restore -rs 4 -f /dev/rst0</b>
d1997 3
a1999 4
Originally [OpenBSD: faq14.html,v 1.50 ]
<br>
$Translation: faq14.html,v 1.17 2001/12/07 07:31:05 jufi Exp $<br>
<small>$OpenBSD: faq14.html,v 1.50 2001/10/20 16:51:39 horacio Exp $</small>
@


1.16
log
@
sync with badlands translation CVS
@
text
@d1985 1
a1985 1
Originally [OpenBSD: faq14.html,v 1.51 ]
d1987 1
a1987 1
$Translation: faq14.html,v 1.16 2001/12/07 07:24:54 jufi Exp $<br>
@


1.15
log
@sync with badlands translation CVS.
@
text
@d1985 4
a1988 3
Originally [OpenBSD: faq14.html,v 1.51 2001/11/01 02:32:39 nick Exp ]<br>
$Translation: faq14.html,v 1.15 2001/11/05 19:46:55 horacio Exp $<br>
$OpenBSD$
@


1.14
log
@sync with badlands translation CVS, work by Horacio
@
text
@d35 3
a37 2
<li><a href="#14.7">14.7 - &iquest;C&oacute;mo obtento un
dmesg de un disquete de arranque?</a></li>
d1209 49
a1257 2
<h2>14.7 - &iquest;C&oacute;mo obtento un dmesg de un disquete de
arranque?</h2>
d1260 6
a1265 4
Las im&aacute;genes de RAMDISK (disquetes de arranque) no incluyen la
utilidad <code>dmesg</code>.  Sin embargo, tienen el sistema de archivos
<em>/kern</em> montado.  Para copiar la informaci&oacute;n de dmesg a un
fichero, haga lo siguiente:
d1268 10
a1277 3
<pre>
# <strong>cat /kern/msgbuf &gt;mydmesg</strong>
</pre>
d1279 9
d1291 4
a1294 3
Los discos de arranque tambi&eacute;n incluyen
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=more&sektion=1">more(1)</a>
como paginador:
d1296 5
a1300 5
<pre>
<ul>
# <strong>more /kern/msgbuf</strong>
</pre>
</ul>
d1304 5
a1308 2
Lea tambi&eacute;n la <a href="faq4.html#4.5">secci&oacute;n 4.5</a> de
estas preguntas frecuentes.
d1985 2
a1986 2
Originally [OpenBSD: faq14.html,v 1.50 2001/10/20 16:51:39 horacio Exp ]<br>
$Translation: faq14.html,v 1.14 2001/10/21 21:13:25 horacio Exp $<br>
@


1.13
log
@sync with badlands translation CVS, work by Horacio
@
text
@d561 1
a561 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bc&bc&apropos=0&sektion=1&manpath=OpenBSD+Current&format=html">bc(1)</a>)
d623 1
a623 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html">dmesg(8)</a> 
d640 1
a640 1
Finalmente, a&ntilde;&aacute;dalo a /etc/fstab
d653 5
a657 3
A continuaci&oacute;n editar el fichero /etc/fstab para indicar que la
partici&oacute;n /usr/local es ahora /dev/wd1a (su partici&oacute;n
reci&eacute;n creada).  Por ejemplo:
d901 2
a902 1
fase de desarrollo, es necesario ejecutar <code>fsck</code>
d932 3
a934 3
A partir de la versi&oacute;n 2.9, para activar <em>soft updates</em>
se debe hacer con una opci&oacute;n de montaje de tiempo, en lugar de
usar 
d938 6
a943 4
puede especificar que desea tener <em>soft updates</em> activado en esa
partici&oacute;n.  A continuaci&oacute;n puede ver un entrada en
<em>/etc/fstab</em> de muestra con una partici&oacute;n, <em>sd0a</em>
que queremos tener montada con <em>soft updates</em>.
d1182 1
a1182 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=installboot&sektion=8%2fi386&apropos=0&manpath=OpenBSD+Current&arch=i386">biosboot</a>,
d1226 1
a1226 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=more&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html">more(1)</a>
d1338 1
a1338 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&sektion=8&format=html">dump(8)</a>/<a href=http://www.openbsd.org/cgi-bin/man.cgi?query=restore&sektion=8&format=html">restore(8)</a>
d1360 6
a1365 4
d&oacute;nde est&aacute;n montados los sistemas de archivos.  Esto se
puede determinar usando la orden <kbd>mount</kbd> desde el punto de
pedido de la shell.  Deber&iacute;a obtener una salida similar a
&eacute;sta:
d1437 6
a1442 5
Puede revisar la p&aacute;gina del manual de dump para averiguar
qu&eacute; es lo que hace exactamente cada uno de los par&aacute;metros
en la l&iacute;nea de &oacute;rdenes.  Aqu&iacute; tiene una breve
descripci&oacute;n de los par&aacute;metros
usados:
d1462 4
a1465 4
La orden mt se usa al final para rebobinar el controlador.  Revise la
p&aacute;gina del manual de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mt&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html">mt(1)</a>
para ver m&aacute;s opciones (como &quot;eject&quot;).
d1607 1
a1607 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&apropos=0&sektion=0&manpath=OpenBSD+Current&format=html">restore(8)</a>
d1915 2
a1916 2
Originally [OpenBSD: faq14.html,v 1.49 2001/10/18 21:10:57 nick Exp ]<br>
$Translation: faq14.html,v 1.13 2001/10/19 14:08:15 horacio Exp $<br>
@


1.12
log
@
sync with badlands translation CVS.
@
text
@d30 1
a30 1
<li><a href="#14.5">14.5 - &quot;Softupdates&quot;</a></li>
d34 1
a34 1
&quot;Using partition 3 id 0&quot;.</a></li>
d706 1
a706 1
que usen &quot;Softupdates&quot; (que viene desactivado por
d886 1
a886 1
<h2>14.5 - Softupdates</h2>
d890 13
a902 7
Durante los &uacute;ltimos a&ntilde;os, Kirk McKusick ha estado
trabajando en algo llamado &quot;soft updates&quot;.  Esto se basa en
la idea propuesta por Greg Ganger y Yale Patt de imponer un orden
parcial sobre las operaciones en la memoria intermedia para permitir
que los requerimientos de escritura sincr&oacute;nica de entradas de
directorio sean eliminadas del c&oacute;digo FFS.  En resumen, un gran
incremento en el rendimiento de la escritura en disco.
d906 10
a915 1
Para activar &quot;Softupdates&quot;, el n&uacute;cleo debe tener
d925 1
a925 1
antes la active para cada una de las particiones del disco.
d970 9
a978 2
instalaci&oacute;n de OpenBSD/i386, se para en &quot;Using partition 3
id 0&quot;</h2>
d981 28
a1008 14
Esto significa que su &laquo;Registro de Arranque Maestro&raquo; (MBR,
<em>&quot;Master Boot Record&quot;</em>) no ha sido instalado
correctamente, o que la idea que su BIOS tiene sobre la
geometr&iacute;a del disco duro no es compatible con su MBR.  Para
solventarlo, primero intente reinstalar los bloques de arranque de
OpenBSD.  Para ello use
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&sektion=8&arch=i386&format=html">fdisk(8)</a> e
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=installboot&sektion=8&arch=i386&format=html">installboot(8)</a>.
Para que arranque y funcione la primera vez, necesitar&aacute; usar el
disco de arranque (<em>&quot;boot disk&quot;</em>) como mecanismo de
arranque.  Despu&eacute;s de insertar el disco de instalaci&oacute;n, y
antes de que cargue el n&uacute;cleo y el &quot;ramdisk&quot;,
ver&aacute; un punto de pedido <tt>boot&gt;</tt> desde el disquete.
&Uacute;selo para iniciar OpenBSD fuera de su disco duro.
d1012 5
a1016 4
booting...
OpenBSD boot 1.2.3
probing hd0 fd0...
boot&gt; <b>boot hd0a:/bsd</b>
d1019 5
d1027 7
a1033 5
Ahora que ya ha iniciado, y asumiendo que haya dedicado todo su disco
duro a OpenBSD, reinicie el MBR con fdisk(8) (de todos modos, si tiene
particiones para otros sistemas operativos en su disco duro, no
podr&aacute; usar <tt>installboot</tt>;  tendr&aacute; que buscar otra
opci&oacute;n como OS-BS, que se describe m&aacute;s adelante).
d1037 1
a1037 1
# <b>fdisk -i wd0</b>
d1040 12
d1055 21
a1075 1
Ahora debe reescribir los bloques de arranque.
d1079 1
a1079 2
# <strong>cp /usr/mdec/boot /boot</strong>
# <strong>/usr/mdec/installboot -v /boot /usr/mdec/biosboot wd0</strong>
d1082 14
d1099 2
a1100 1
Para acabar, reinicie y pru&eacute;belo.
d1103 2
d1106 5
a1110 6
Si no funcionara, todav&iacute;a tendr&iacute;a unas pocas opciones
adicionales.  La primera ser&iacute;a usar un gestor de arranque como
OS-BS.  El CD de OpenBSD incluye el gestor de arranque OS-BS en el
directorio <em>tools</em>.  Si no ha adquirido el CD-ROM, puede obtener
OS-BS desde cualquiera de los servidores de ftp de OpenBSD.  Debe
bajarse el fichero <em>pub/OpenBSD/2.8/tools/osbs135.exe</em>
d1113 2
d1116 3
a1118 3
T&oacute;mese algo de tiempo para leer las p&aacute;ginas en internet
de OS-BS, que se encuentran en
<a href="http://www.prz.tu-berlin.de/~wolf/os-bs.html">http://www.prz.tu-berlin.de/~wolf/os-bs.html</a>
d1121 3
d1125 16
a1140 2
Existen otros gestores de arranque comerciales, o libres como lilo, que
puede usar para un arranque m&uacute;ltiple.
d1143 13
d1157 4
a1160 1
Aqu&iacute; tiene una breve gu&iacute;a para poner lilo en su sistema.
d1163 4
a1166 5
<li>Inicie un disquete de DOS y haga <tt>fdisk /MBR</tt>.
    Aseg&uacute;rese de hacerlo desde el dispositivo con el que vaya
    arrancar.</li>
<li>Inicie desde un disco de linux e instale LILO y m&eacute;talo en la
    cadena de su bloque de arranque de OpenBSD.</li>
d1168 3
d1174 20
a1193 2
Para m&aacute;s instrucciones, lea 
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/2.8/i386/INSTALL.linux">INSTALL.linux</a>
d1196 4
d1907 2
a1908 2
Originally [OpenBSD: faq14.html,v 1.46 2001/09/19 11:45:54 espie Exp ]<br>
$Translation: faq14.html,v 1.12 2001/09/20 02:09:35 horacio Exp $<br>
@


1.11
log
@
Updated by Horacio
@
text
@d9 1
a9 1
<meta name="copyright"     content="Este documento es copyright 1998-2000 de OpenBSD.">
d22 8
a29 8
<li><a href="#14.1">14.1 - C&oacute;mo usar el <i>disklabel</i> de
    OpenBSD</a></li>
<li><a href="#14.2">14.2 - C&oacute;mo usar el <i>fdisk</i> de
    OpenBSD</a></li>
<li><a href="#14.3">14.3 - C&oacute;mo a&ntilde;adir discos adicionales
    en OpenBSD</a></li>
<li><a href="#14.4">14.4 - C&oacute;mo usar un fichero como memoria de
    intercambio (<i>swap</i></a></li>
d31 15
a45 13
<li><a href="#14.6">14.6 - Cuando arranco el sistema despu&eacute;s de
    la instalaci&oacute;n de OpenBSD/i386, se para en<br>
    &quot;Using partition 3 id 0&quot;.</a></li>
<li><a href="#14.7">14.7 - &iquest;C&oacute;mo obtento un dmesg de un
    disquete de arranque?</a></li>
<li><a href="#14.8">14.8 - Instalaci&oacute;n de bloques de arranque
    (espec&iacute;fico de i386)</a></li>
<li><a href="#14.9">14.9 - Prepararse para el desastre: hacer copias de
    seguridad (respaldo) y restaurar desde la cinta.</a></li>
<li><a href="#14.10">14.10 - C&oacute;mo montar im&aacute;genes de
    disco en OpenBSD.</a></li>
<li><a href="#14.11">14.11 - &iexcl;Ayuda! &iexcl;me da errores con
    PCIIDE!</a></li>
d57 4
a60 4
<li><a href="#14.1.1">&iquest;Qu&eacute; es disklabel(8)?</a>
<li><a href="#14.1.2">Disklabel durante la instalaci&oacute;n de
    OpenBSD</a>
<li><a href="#14.1.3">Usos comunes de disklabel(8)</a>
d66 6
a71 1
<h3>&iquest;Qu&eacute; es disklabel(8)?</h3>
d75 14
a88 12
(<i>&quot;disklabels&quot;</i>) se crean para permitir una interfaz
eficiente entre su disco y los controladores del disco que contiene el
n&uacute;cleo del sistema (<i>&quot;kernel&quot;</i>).  Estas
clasificaciones contienen cierta informaci&oacute;n sobre su disco,
como la geometr&iacute;a del controlador e informaci&oacute;n sobre sus
sistemas de archivos (<i>&quot;filesystems&quot;</i>).  Esta
informaci&oacute;n la utiliza el programa de arranque para cargar el
controlador y para saber en qu&eacute; parte del controlador se
encuentran los sistemas de archivos.  Las clasificaciones tambi&eacute;n
se usan en conjunto con los sistemas de archivos para crear un entorno
m&aacute;s eficiente.  Puede leer documentaci&oacute;n m&aacute;s a
fondo sobre disklabel en la p&aacute;gina del manual de
d93 5
a97 4
Adem&aacute;s, el uso de disklabel ayuda a superar las limitaciones de
las arquitecturas al particionar el disco.  Por ejemplo, en i386
s&oacute;lo puede tener cuatro particiones primarias (particiones que
puedan ver otros sistemas operativos como Windows NT o DOS).  Con
d99 5
a103 4
usa una de esas particiones primarias para almacenar <b>todas</b> sus
particiones de OpenBSD (<i>swap</i>, <i>/</i>, <i>/usr</i>,
<i>/var</i>, ...), y todav&iacute;a le quedan tres particiones libres
para otros sistemas operativos.
d108 1
a108 1
<h3>disklabel(8) durante la instalaci&oacute;n de OpenBSD</h3>
d111 13
a123 10
Una de las partes principales de la instalaci&oacute;n de OpenBSD es la
creaci&oacute;n inicial de &laquo;clasificaciones&raquo;
(<i>&quot;labels&quot;</i>).  Para los usuarios de plataformas i386,
&eacute;ste es el paso que viene justo despu&eacute;s de usar <a
href="#14.2">fdisk(1)</a>.  Durante la instalaci&oacute;n, el programa
que usa para crear clasificaciones separadas que contengan sus puntos
de montaje separados es disklabel.  Durante este proceso puede
configurar sus puntos de montaje desde dentro de disklabel, pero esto
no es del todo necesario si consideramos que m&aacute;s tarde le
pedir&aacute; que confirme sus elecciones.  De todos modos hace que su
d142 1
a142 1
clasificaci&oacute;n de <i>swap</i>.  Ahora que ya hemos explicado lo
d167 1
a167 1
ra&iacute;z y otra <i>swap</i>.
d195 17
a211 14
Hasta este punto hemos creado una partici&oacute;n ra&iacute;z de 64MB
montada en <b>/</b>, y una partici&oacute;n <i>swap</i> de 64MB.  Note
que empieza (&quot;offset&quot;) en el sector 63.  En la parte
correspondiente al tama&ntilde;o, disklabel muestra su tama&ntilde;o en
sectores;  sin embargo no es necesario introducirlos en el mismo
formato.  Como en el ejemplo anterior, puede introducir los
tama&ntilde;os de la forma <i>64 Megabytes = 64M</i> y <i>2 Gigabytes =
2G</i>.  Disklabel los redondear&aacute; hasta el cilindro m&aacute;s
cercano.  Tambi&eacute;n notar&aacute; en el ejemplo anterior que
disklabel asume que la clasificaci&oacute;n '<b>b</b>' ser&aacute;
<i>swap</i>.  Esto es correcto ya que el n&uacute;cleo del sistema
GENERIC est&aacute; configurado para buscar <i>swap</i> en la
clasificaci&oacute;n <b>b</b>, y todo lo que usted debe hacer es seguir
esta gu&iacute;a y usar <b>b</b> como su &aacute;rea de <i>swap</i>.
d341 10
a350 7
instalaci&oacute;n de OpenBSD.  Probablemente, la orden m&aacute;s
importante de todas en este punto de pedido sea '?'.  Con esta orden
obtendr&aacute; una lista de posibles opciones relacionadas con
disklabel.  Incluso podr&aacute; ver la p&aacute;gina del manual de
disklabel(8) al completo con la orden 'M'.  Desde este punto
podr&aacute; a&ntilde;adir o eliminar todo lo que desee, o hacer
cambios en las particiones.  Para m&aacute;s informaci&oacute;n al
d367 6
a372 5
Fdisk es un programa de ayuda para el mantenimiento de sus particiones.
Este programa se usa durante la instalaci&oacute;n para configurar la
partici&oacute;n de OpenBSD (esta partici&oacute;n puede contener
<u>varias</u> clasificaciones, cada una de ellas con sistemas de
archivos, <i>swap</i>, etc... ).  Puede dividir el espacio de sus
d374 3
a376 2
&laquo;Modo Monousuario&raquo; (<b>boot -s</b> - &quot;Single User
Mode&quot;).  Fdisk tambi&eacute;n configura el MBR de los discos.
d380 4
a383 4
Para la instalaci&oacute;n, la mayor&iacute;a de las veces s&oacute;lo
necesitar&aacute; <b>UNA</b> partici&oacute;n de OpenBSD, y a
continuaci&oacute;n usar disklabel para poner en ella una <i>swap</i> y
un sistema de archivos.
d537 1
a537 1
<small><i>(la pantalla se queda en blanco y aparece su $EDITOR)</i></small>
d539 1
a539 1
<small><i>...bla...</i></small>
d542 1
a542 1
<small><i>...bla...</i></small>
d552 9
a560 8
Ignore la partici&oacute;n <b>c</b>, siempre est&aacute; ah&iacute; y
es para que funcionen programas como disklabel.  Para operaciones
normales, <i>fsize</i> siempre debe ser 1024, <i>bsize</i> siempre debe
ser 8192, y <i>cpg</i> siempre debe ser 16.  <i>fstype</i> es 4.2BSD.
<i>total sectors</i> es el tama&ntilde;o total del disco.  Supongamos
que &eacute;ste es un disco de 3GB;  tres gigabytes, en t&eacute;rminos
del fabricante del disco, son 3000 megabytes.  Divida 6185088 entre
3000 (use
d562 13
a574 11
y obtendr&aacute; 2061.  Por lo tanto, para crear particiones para a,
d, e, f, g, ... simplemente multiplique X*2061 y obtendr&aacute; el
n&uacute;mero de megabytes de espacio en esa partici&oacute;n.  El
sector de inicio (&quot;<i>offset</i>&quot;) para su primera
partici&oacute;n nueva debe ser el mismo que el
&quot;<i>sectors/track</i>&quot; que le haya dado anteriormente la
salida de disklabel.  En este caso es 63.  El sector de inicio para
cada partici&oacute;n consecutiva debe ser una combinaci&oacute;n del
tama&ntilde;o de cada partici&oacute;n y el sector de inicio de la
misma (excepto la partici&oacute;n <b>c</b>, ya que no juega
ning&uacute;n papel aqu&iacute;).
d604 1
a604 1
&laquo;clasificaci&oacute;n&raquo; (<i>label</i>) antes de que
d673 1
a673 1
<h2>14.4 - C&oacute;mo usar un fichero como memoria de <i>swap</i></h2>
d676 5
a680 4
(Nota: si lo que quiere es usar un fichero como memoria de intercambio
(<i>&quot;swap&quot;</i>) porque obtiene errores del tipo &quot;virtual
memory exhausted&quot;, deber&iacute;a intentar antes elevar los
l&iacute;mites por proceso con la utilidad de csh
d691 1
a691 1
<i>swap</i>.  Si est&aacute; usando la versi&oacute;n 2.5 de OpenBSD,
d693 2
a694 2
dispositivos de <i>swap</i>.  El uso de ficheros como memoria de
<i>swap</i> no requiere la compilaci&oacute;n de un n&uacute;cleo del
d700 1
a700 1
<h3>Usar un fichero como <i>swap</i></h3>
d703 1
a703 1
Usar un fichero como memoria de <i>swap</i> es la forma m&aacute;s
d705 1
a705 1
adicional del &aacute;rea de <i>swap</i>.  Esto no es para los usuarios
d708 1
a708 1
<i>swap</i> tiene en ese momento y cu&aacute;nta est&aacute; usando con
d724 1
a724 1
como memoria de <i>swap</i> y sus estad&iacute;sticas actuales.  En el
d727 1
a727 1
para <i>swap</i> (si lo vi&eacute;ramos con disklabel, lo
d736 1
a736 1
<i>swap</i> es crear el fichero.  El mejor modo de hacerlo es con la
d740 1
a740 1
<i>/var/swap</i>, que tendr&aacute; un tama&ntilde;o de 32MB.
d754 1
a754 1
dispositivo como memoria de <i>swap</i>.  Para activarlo, use la
d767 1
a767 1
lista de nuestros dispositivos de <i>swap</i>.
d782 2
a783 2
usando como <i>swap</i>, debe a&ntilde;adir una l&iacute;nea a su
fichero <i>/etc/fstab</i>, para que el fichero tambi&eacute;n se active
d785 1
a785 1
no tendr&aacute; este dispositivo de <i>swap</i> configurado.
d800 11
a810 9
&Eacute;sta es una soluci&oacute;n m&aacute;s permanente que la de
a&ntilde;adir m&aacute;s espacio de <i>swap</i>.  Para usar
permanentemente un fichero como memoria de <i>swap</i>, primero compile
un n&uacute;cleo con vnd0c como <i>swap</i>.  Si su sistema de archivos
ra&iacute;z es wd0a, entonces wd0b es el <i>swap</i> anterior y debe
usar la siguiente l&iacute;nea en el fichero de configuraci&oacute;n
del n&uacute;cleo (si tiene dudas, lea el
<a href="faq5.html">cap&iacute;tulo 5</a> de las preguntas frecuentes
referente a la compilaci&oacute;n del n&uacute;cleo del sistema):
d820 3
a822 3
Despu&eacute;s de esto, tendr&aacute; que crear el fichero que se
usar&aacute; como memoria de <i>swap</i>.  Debe hacerlo usando la misma
orden que en los ejemplos anteriores.
d835 4
a838 3
Ahora el fichero est&aacute; en su sitio y debe a&ntilde;adirlo a
<i>/etc/fstab</i>.  Aqu&iacute; tiene una l&iacute;nea de ejemplo de
c&oacute;mo arrancar con este dispositivo como <i>swap</i>.
d850 4
a853 4
En este punto su m&aacute;quina debe ser reiniciada para que los
cambios en el n&uacute;cleo hagan efecto.  A continuaci&oacute;n
deber&aacute; configurar el dispositivo como memoria de <i>swap</i>.
Para ello usar&aacute;
d865 5
a869 4
El &uacute;ltimo paso es activar ese dispositivo como memoria de
<i>swap</i>.  Lo haremos como en los ejemplos anteriores, usando
swapctl(8).  Despu&eacute;s comprobaremos si ha sido correctamente
a&ntilde;adido a nuestra lista de dispositivos de <i>swap</i>.
d960 1
a960 1
<i>&quot;Master Boot Record&quot;</i>) no ha sido instalado
d968 1
a968 1
disco de arranque (<i>&quot;boot disk&quot;</i>) como mecanismo de
d1017 1
a1017 1
directorio <i>tools</i>.  Si no ha adquirido el CD-ROM, puede obtener
d1019 1
a1019 1
bajarse el fichero <i>pub/OpenBSD/2.8/tools/osbs135.exe</i>
d1059 1
a1059 1
<i>/kern</i> montado.  Para copiar la informaci&oacute;n de dmesg a un
d1107 1
a1107 1
comprende <i>/boot</i> en t&eacute;rminos de la geometr&iacute;a
d1243 3
a1245 3
f&iacute;sicamente en sd0a, el sistema de archivos <i>/var</i> reside en
sd0d, el sistema de archivos <i>/home</i> en sd0e y finalmente,
<i>/usr</i> en sd0h.
d1290 1
a1290 1
   <li><b>u</b> - Actualiza el fichero <i>/etc/dumpdates</i> para
d1294 1
a1294 1
       usar&aacute; (en este caso <i>/dev/nrst0</i>).
d1300 1
a1300 1
har&aacute; la copia de seguridad (<i>/dev/rsd0a</i>, etc... ).
d1341 1
a1341 1
Si quiere escribir un peque&ntilde;o gui&oacute;n (<i>script</i>),
d1419 1
a1419 1
(<i><b>/</b></i>).
d1429 2
a1430 1
</pre></ul>
d1435 5
a1439 4
anteriores, 2 ser&iacute;a <i>/usr</i>;  si la tabla es como la
m&aacute;s avanzada, entonces 2 podr&iacute;a ser <i>/var</i> u otro
sistema de archivos.  El n&uacute;mero de secuencia coincide con el
orden en el que se graben los sistemas de archivos en la cinta.
d1509 1
a1509 1
No se olvide de la partici&oacute;n de <i>swap</i>.
d1600 1
a1600 1
sistema de archivos ra&iacute;z (<i><b>/</b></i>).
d1757 2
a1758 2
Originally [OpenBSD: faq14.html,v 1.41 2001/06/09 16:39:05 pvalchev Exp ]<br>
$Translation: faq14.html,v 1.11 2001/06/10 01:05:47 horacio Exp $<br>
@


1.10
log
@
Sync wit badlands translation CVS, work by Horacio
@
text
@d1725 2
a1726 2
Originally [OpenBSD: faq14.html,v 1.40 2001/05/06 23:51:45 ericj Exp ]<br>
$Translation: faq14.html,v 1.10 2001/05/07 22:56:53 horacio Exp $<br>
@


1.9
log
@
Sync with badlands translation CVS, work by Horacio
@
text
@d871 1
a871 5
configurada la opci&oacute;n<br> <b>NOTA:</b>  Esta opci&oacute;n
est&aacute; activada por definici&oacute;n a partir de la
versi&oacute;n 2.7 de OpenBSD, y vendr&aacute; predefinida en la
versi&oacute;n 2.8.  Sin embargo, debe activarla para cada
partici&oacute;n de disco.
d878 8
a885 2
A partir de la versi&oacute;n 2.9, se puede activar <em>soft
updates</em> con una opci&oacute;n de montaje de tiempo, en lugar de
d916 7
d1725 2
a1726 2
Originally [OpenBSD: faq14.html,v 1.39 2001/05/06 14:39:37 jufi Exp ]<br>
$Translation: faq14.html,v 1.9 2001/05/06 20:26:28 horacio Exp $<br>
@


1.8
log
@
Sync with badlands translation CVS, work by Horacio
@
text
@d1698 2
a1699 2
Si OpenBSD no consigue bajar el modo, o si durante el proceso se
bloquea la m&aacute;quina, por favor env&iacute;e un
d1716 2
a1717 2
Originally [OpenBSD: faq14.html,v 1.38 2001/05/05 04:43:03 ericj Exp ]<br>
$Translation: faq14.html,v 1.8 2001/05/05 14:06:03 horacio Exp $<br>
@


1.7
log
@
Sync with translation CVS, work by Horacio
@
text
@d42 2
d73 1
a73 1
sistemas de archivo (<i>&quot;filesystems&quot;</i>).  Esta
d76 2
a77 2
encuentran los sistemas de archivo.  Las clasificaciones tambi&eacute;n
se usan en conjunto con los sistemas de archivo para crear un entorno
d79 1
a79 1
fondo sobre disklabel en la p&aacute;gina de manual de
d118 1
a118 1
DEBE ser en la que se monte el sistema de archivo <b>/</b>.  Puede ver
d147 1
a147 1
que todos los sistemas de archivo de OpenBSD se encuentren dentro del
d327 1
a327 1
disklabel.  Incluso podr&aacute; ver la p&aacute;gina de manual de
d331 1
a331 1
respecto lea la p&aacute;gina de manual de
d341 1
a341 1
Antes que nada, aseg&uacute;rese de leer la p&aacute;gina de manual
d351 1
a351 1
archivo, <i>swap</i>, etc... ).  Puede dividir el espacio de sus
d361 1
a361 1
un sistema de archivo.
d585 1
a585 1
finalizar, debe crear el sistema de archivo en el disco usando
d777 1
a777 1
un n&uacute;cleo con vnd0c como <i>swap</i>.  Si su sistema de archivo
d882 20
a901 1
y debe arrancar en modo monousuario:
d905 1
a905 2
<strong>
        boot&gt; boot -s
d907 2
a908 3
        bsd# tunefs -s enable &lt;raw device&gt;
        bsd# reboot -n
</strong>
d1019 1
a1019 1
utilidad <code>dmesg</code>.  Sin embargo, tienen el sistema de archivo
d1166 1
a1166 1
d&oacute;nde est&aacute;n montados los sistemas de archivo.  Esto se
d1181 1
a1181 1
En este ejemplo, el sistema de archivo ra&iacute;z (/) reside
d1183 1
a1183 1
del disco fijo SCSI 0.  El sistema de archivo /usr reside en sd0h, lo
d1203 3
a1205 3
En este ejemplo, el sistema de archivo ra&iacute;z reside
f&iacute;sicamente en sd0a, el sistema de archivo <i>/var</i> reside en
sd0d, el sistema de archivo <i>/home</i> en sd0e y finalmente,
d1241 1
a1241 1
Puede revisar la p&aacute;gina de manual de dump para averiguar
d1266 1
a1266 1
p&aacute;gina de manual de
d1291 1
a1291 1
seguridad de m&uacute;ltiples sistemas de archivo en una sola cinta,
d1294 2
a1295 2
m&uacute;ltiples sistemas de archivo, acabar&aacute; anulando el
sistema de archivo anterior cuando el pr&oacute;ximo dump intente
d1298 1
a1298 1
p&aacute;gina de manual de dump.
d1330 1
a1330 1
el tama&ntilde;o necesario para cada sistema de archivo.  Puede usar la
d1379 1
a1379 1
ejemplos anteriores, 1 ser&iacute;a su sistema de archivo ra&iacute;z
d1397 2
a1398 2
sistema de archivo.  El n&uacute;mero de secuencia coincide con el
orden en el que se graben los sistemas de archivo en la cinta.
d1406 2
a1407 2
restaurar sus sistemas de archivo desde un &uacute;nico fichero de la
cinta, revise la p&aacute;gina de manual de
d1477 1
a1477 1
sistema de archivo limpio en cada una de ellas.  Por ejemplo:
d1487 1
a1487 1
Monte su reci&eacute;n preparado sistema de archivo ra&iacute;z (/) en
d1497 1
a1497 1
Cambie a ese sistema de archivo ra&iacute;z que acaba de montar y
d1530 1
a1530 1
Su nuevo sistema de archivo ra&iacute;z en el disco fijo deber&iacute;a
d1532 1
a1532 1
&eacute;l y continuar restaurando el resto de sus sistemas de archivo.
d1559 1
a1559 1
sistema de archivo ra&iacute;z (<i><b>/</b></i>).
d1568 1
a1568 1
tendr&aacute; que volver a montar el sistema de archivo ra&iacute;z en
d1580 1
a1580 1
puede continuar restaurando sus otros sistemas de archivo.  Por
d1603 1
a1603 1
sistemas de archivo al disco, reinicie en modo multiusuario.  Si todo
d1662 1
a1662 1
Para m&aacute;s informaci&oacute;n mire la p&aacute;gina de manual de
d1667 37
d1716 2
a1717 2
Originally [OpenBSD: faq14.html,v 1.36 2001/03/26 17:14:09 todd Exp ]<br>
$Translation: faq14.html,v 1.7 2001/04/06 16:41:15 horacio Exp $<br>
@


1.6
log
@
Sync with badlands translation CVS, work by Horacio
@
text
@d5 3
a7 3
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq">
d9 1
a9 1
<meta name="copyright"     content="This document copyright 1998-2000 by OpenBSD.">
d1660 2
a1661 2
Originally [OpenBSD: faq14.html,v 1.35 2001/03/07 21:28:30 jufi Exp ]<br>
$Translation: faq14.html,v 1.6 2001/03/07 23:34:35 horacio Exp $<br>
@


1.5
log
@
Sync with translation CVS. Work by Horacio
@
text
@d1660 2
a1661 2
Originally [OpenBSD: faq14.html,v 1.34 2001/01/27 22:19:47 ericj Exp ]<br>
$Translation: faq14.html,v 1.5 2001/02/24 22:41:06 horacio Exp $<br>
@


1.4
log
@
Sync with Badlands Translation CVS. Work by Horacio
@
text
@d40 2
a425 1
</p>
a501 1
</p>
a525 1
</pre>
d588 1
a588 1
bsd# <strong>newfs wd1a </strong>
d763 1
a763 1
/var/swap /var/swap sw 0 0
d885 1
a885 1
        boot&gt;boot -s
d961 1
a961 1
bajarse el fichero <i>pub/OpenBSD/2.6/tools/osbs135.exe</i>
d1004 1
d1006 1
a1006 2
<ul>
# <strong>cat /kern/msgbuf >mydmesg</strong>
d1591 57
d1660 2
a1661 2
Originally [OpenBSD: faq14.html,v 1.26 2000/12/26 22:35:59 horacio Exp ]<br>
$Translation: faq14.html,v 1.4 2001/01/01 15:54:38 horacio Exp $<br>
@


1.3
log
@
More updates from Horacio.
@
text
@d339 1
a339 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&apropos=0&sektion=8&format=html">fdisk(8)</a>.
d488 1
a488 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&apropos=0&sektion=8&format=html">fdisk(8)</a> (<i>i386 only</i>) y
d824 1
a824 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vnconfig&sektion=1&format=html">vnconfig(1)</a>.
d908 2
a909 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&sektion=8&format=html">fdisk(8)</a> e
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=installboot&sektion=8&format=html">installboot(8)</a>.
d1126 1
a1126 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&sektion=8&sektion=html">dump(8)</a>/<a href=http://www.openbsd.org/cgi-bin/man.cgi?query=restore&sektion=8&format=html">restore(8)</a>
d1421 1
a1421 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&sektion=8&format=html">fdisk(8)</a>
d1604 2
a1605 2
Originally [OpenBSD: faq14.html,v 1.25 2000/11/30 05:58:28 ericj Exp ]<br>
$Translation: faq14.html,v 1.3 2000/12/01 14:10:58 horacio Exp $<br>
@


1.2
log
@
Sync with Badlands Translation CVS. Work by es Horacio
@
text
@d770 1
a770 1
<h3>Usar <i>swap<i> a trav&eacute;s de un dispositivo vnode</h3>
d884 1
d886 1
a886 2
<pre>
        boot>boot -s
d890 1
a891 1
</strong>
d990 1
a990 1
<a href="INSTALL.linux">INSTALL.linux</a>
d1604 2
a1605 2
Originally [OpenBSD: faq14.html,v 1.24 2000/09/14 19:28:19 ericj Exp ]<br>
$Translation: faq14.html,v 1.2 2000/09/26 14:43:38 horacio Exp $<br>
@


1.1
log
@Sync with Badlands Translation CVS. Work by Horacio.
@
text
@d3 1
a3 1
<title>14.0 - Configuraci&oacute;n del Disco</title>
d16 2
a17 1
<h2><font color="#e00000">14.0 - Configuraci&oacute;n del Disco</font><hr></h2>
d21 2
a22 4
<ul><h3>Tabla de Contenidos</h3>
<li><a href="#14.1">14.1 - C&oacute;mo usar el Disklabel de OpenBSD</a></li>
<li><a href="#14.2">14.2 - C&oacute;mo usar el fdisk de OpenBSD</a></li>
<li><a href="#14.3">14.3 - C&oacute;mo a&ntilde;adir Discos Adicionales en 
d24 9
a32 5
<li><a href="#14.4">14.4 - C&oacute;mo usar un Fichero como Memoria de 
    swap</a></li>
<li><a href="#14.5">14.5 - &quot;Soft-updates&quot;</a></li>
<li><a href="#14.6">14.6 - Cuando arranco el Sistema despu&eacute;s de la
    Instalaci&oacute;n de OpenBSD/i386, se para en<br>
d34 3
a36 3
<li><a href="#14.7">14.7 - ¿C&oacute;mo obtento un dmesg de un Disquete de
    Arranque?</a></li>
<li><a href="#14.8">14.8 - Instalaci&oacute;n de Bloques de Arranque
d38 2
a39 2
<li><a href="#14.9">14.9 - Prepararse para el Desastre: Hacer Copias de
    Seguridad (Respaldo) y Restaurar desde la Cinta.</a></li>
d46 1
a46 1
<h2>C&oacute;mo usar Disklabel</h2>
d49 1
a49 1
<h3>Tabla de Contenidos de Disklabel</h3>
d51 3
a53 2
<li><a href="#14.1.1">¿Qu&eacute; es disklabel(8)?</a>
<li><a href="#14.1.2">Disklabel durante la instalaci&oacute;n de OpenBSD</a>
d60 1
a60 1
<h3>¿Qu&eacute; es disklabel(8)?</h3>
d63 5
a67 4
Las &laquo;clasificaciones del disco&raquo; (&quot;disklabels&quot;) se crean 
para permitir una interfaz eficiente entre su disco y los controladores del 
disco que contiene el n&uacute;cleo del sistema (&quot;kernel&quot;).
Estas clasificaciones contienen cierta informaci&oacute;n sobre su disco,
d69 7
a75 8
sistemas de archivo (&quot;filesystems&quot;).
Esta informaci&oacute;n la utiliza el programa de arranque para cargar el
controlador y para saber en qu&eacute; parte del controlador se encuentran 
los sistemas de archivo.
Las clasificaciones tambi&eacute;n se usan en conjunto con los sistemas de
archivo para crear un entorno m&aacute;s eficiente.
Puede leer documentaci&oacute;n m&aacute;s a fondo sobre disklabel en la
p&aacute;gina de manual de
d80 9
a88 8
Adem&aacute;s, el uso de disklabel ayuda a superar las limitaciones de las
arquitecturas al particionar el disco.
Por ejemplo, en i386 s&oacute;lo puede tener cuatro particiones primarias
(particiones que puedan ver otros sistemas operativos como Windows NT o DOS).
Con <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&sektion=8&format=html">disklabel(8)</a>,
usa una de esas particiones primarias para almacenar <b>todas</b> sus 
particiones de OpenBSD (swap, /, /usr, /var, ...), y todav&iacute;a le quedan 
tres particiones libres para otros sistemas operativos.
d98 9
a106 9
(&quot;labels&quot;).
Para los usuarios de plataformas i386, éste es el paso que viene justo 
despu&eacute;s de usar <a href="#14.2">fdisk(1)</a>.
Durante la instalaci&oacute;n, el programa que usa para crear clasificaciones
separadas que contengan sus puntos de montaje separados es disklabel.
Durante este proceso puede configurar sus puntos de montaje desde dentro de
disklabel, pero esto no es del todo necesario si consideramos que m&aacute;s
tarde le pedir&aacute; que confirme sus elecciones.
De todos modos hace que su instalaci&oacute;n sea un poco m&aacute;s suave.
d111 19
a129 21
tendr&aacute; ninguna clasificaci&oacute;n creada, y por lo tanto deben ser
creadas.
La primera clasificaci&oacute;n que tendr&aacute; que crear es la
clasificaci&oacute;n '<b>a</b>'.
Esta clasificaci&oacute;n DEBE ser en la que se monte el sistema de archivo
<b>/</b>.
Puede ver las particiones que se recomienda crear y sus respectivos
tama&ntilde;os recomendados en la <a href="faq4.html#4.3">secci&oacute;n
4.3</a> de las preguntas frecuentes.
Para servidores se recomienda que, por lo menos, se creen estas particiones
separadas.
Para los usuarios de computadoras (ordenadores) de sobremesa, ser&aacute;
suficiente con crear un s&oacute;lo punto de montaje para <b>/</b>.
Cuando cree por primera vez esta partici&oacute;n ra&iacute;z 
(clasificaci&oacute;n <b>a</b>), tenga en cuenta que necesitar&aacute; dejar
ALGO de espacio para la clasificaci&oacute;n de &quot;swap&quot;.
Ahora que ya hemos explicado lo m&aacute;s b&aacute;sico, pasemos a un
ejemplo de la utilizaci&oacute;n de disklabel durante la instalaci&oacute;n.
En este primer ejemplo se asume que OpenBSD va a ser el &uacute;nico sistema
operativo en la m&aacute;quina, y que se llevar&aacute; a cabo una
instalaci&oacute;n completa.
d141 9
a149 8
operativos deben tener una entrada de la partici&oacute;n en la BIOS que
abarque completamente el espacio que ocupen.  Aseg&uacute;rese de que todos
los sistemas de archivo de OpenBSD se encuentren dentro del tama&ntilde;o
especificado en la tabla de particiones de la BIOS 'A6' (por
definici&oacute;n, el editor de disklabel tratar&aacute; de forzar esto).  Si
no est&aacute; seguro de c&oacute;mo usar correctamente particiones
m&uacute;ltiples (o sea, /, /usr, /tmp, /var, /usr/local, y otras separadas),
divida el espacio de momento en una partici&oacute;n ra&iacute;z y otra swap.
d177 14
a190 15
Hasta este punto hemos creado una partici&oacute;n ra&iacute;z de 64MB montada 
en <b>/</b>, y una partici&oacute;n swap de 64MB.
Note que empieza (&quot;offset&quot;) en el sector 63.
En la parte correspondiente al tama&ntilde;o, disklabel muestra su
tama&ntilde;o en sectores;  sin embargo no es necesario introducirlos en el
mismo formato.
Como en el ejemplo anterior, puede introducir los tama&ntilde;os de la forma
<i>64 Megabytes = 64M</i> y <i>2 Gigabytes = 2G</i>.
Disklabel los redondear&aacute; hasta el cilindro m&aacute;s cercano.
Tambi&eacute;n notar&aacute; en el ejemplo anterior que disklabel asume que
la clasificaci&oacute;n '<b>b</b>' ser&aacute; swap.
Esto es correcto ya que el n&uacute;cleo del sistema GENERIC est&aacute;
configurado para buscar swap en la clasificaci&oacute;n <b>b</b>, y todo lo
que usted debe hacer es seguir esta gu&iacute;a y usar <b>b</b> como su
&aacute;rea de swap.
d195 4
a198 5
clasificaciones m&aacute;s.
Esto quiere decir que no es una instalaci&oacute;n completa, ya que el
tama&ntilde;o de &eacute;stas no ser&aacute; suficiente para instalar OpenBSD
al completo.
Mostrar otra vez la creaci&oacute;n de todas las particiones ser&iacute;a
d226 6
a231 8
En este ejemplo puede notar dos diferencias con el anterior.
Una, que el inicio del sector (&quot;offset&quot;) lo averigua de forma
autom&aacute;tica.
Cuando haga una instalaci&oacute;n de este tipo no tendr&aacute; que
configurar los sectores.
Otra diferencia es que la clasificaci&oacute;n '<b>c</b>' representa a todo
el disco.
Por este motivo no debe tocar la clasificaci&oacute;n <b>c</b>.
d236 3
a238 4
quedar&aacute; por hacer ser&aacute; grabarlas en el disco y pasar al proceso
de instalaci&oacute;n.
Para grabarlo todo y salir de disklabel (y continuar con la
instalaci&oacute;n), haga lo siguiente:
d249 8
a256 8
<strong>*NOTA*</strong> - Para usuarios con discos grandes.
Si la BIOS de su equipo no tiene soporte para el tama&ntilde;o de su disco,
OpenBSD tampoco tendr&aacute; soporte para &eacute;ste.
En cualquier otro caso OpenBSD deber&iacute;a ser capaz de tratar su disco
sin problema alguno.
Si se encuentra en una situaci&oacute;n en la que la BIOS de su m&aacute;quina
no dispone de soporte para su disco, puede probar Maxtor EZ-Drive u otro
producto complementario de similares caracter&iacute;sticas.
d264 5
a268 7
Una vez que est&eacute; instalado el sistema, el uso frecuente de disklabel
no deber&iacute;a ser necesario.
Pero a veces tendr&aacute; que usarlo cuando a&ntilde;ada, elimine, o
reestructure sus discos.
Una de las primeras cosas que tendr&aacute; que hacer ser&aacute; ver su
disklabel actual.
Para ello, escriba lo siguiente:
d306 3
a308 4
asegurarse de que no l&iacute;a nada (algo que todos necesitamos algunas
veces).
Pero para poder hacer cambios debe usar disklabel con la opci&oacute;n -E, de
este modo:
d319 10
a328 12
(&quot;prompt&quot;), el mismo que us&oacute; durante la instalaci&oacute;n
de OpenBSD.
Probablemente, la orden m&aacute;s importante de todas en este punto de
pedido sea '?'.
Con esta orden obtendr&aacute; una lista de posibles opciones relacionadas
con disklabel.
Incluso podr&aacute; ver la p&aacute;gina de manual de disklabel(8) al
completo con la orden 'M'.
Desde este punto podr&aacute; a&ntilde;adir o eliminar todo lo que desee, o
hacer cambios en las particiones.
Para m&aacute;s informaci&oacute;n al respecto lea la p&aacute;gina de manual
de <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&sektion=8&format=html">disklabel(8)</a>.
d337 3
a339 2
Antes que nada, aseg&uacute;rese de leer la p&aacute;gina de manual principal
de <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&apropos=0&sektion=8&format=html">fdisk(8)</a>.
d346 5
a350 6
<u>varias</u> clasificaciones, cada una de ellas con sistemas de archivo,
swap, etc... ).
Puede dividir el espacio de sus dispositivos y activar uno de ellos.
Fdisk se suele usar en &laquo;Modo Monousuario&raquo; (<b>boot -s</b> - 
&quot;Single User Mode&quot;).
Fdisk tambi&eacute;n configura el MBR de los discos.
d356 2
a357 2
continuaci&oacute;n usar disklabel para poner en ella una swap y un sistema
de archivo.
d361 2
a362 1
Para ver s&oacute;lo su tabla de particiones con fdisk, haga lo siguiente:
d390 4
a393 5
En este ejemplo estamos viendo la salida de fdisk para el dispositivo de la
disquetera.
Podemos ver la partici&oacute;n de OpenBSD (A6) y su tama&ntilde;o.
El asterisco (*) nos indica que la partici&oacute;n de OpenBSD es una
partici&oacute;n de arranque.
d398 1
a398 1
¿Y si quisi&eacute;ramos editar nuestra tabla de particiones?
d400 2
a401 2
trasladar&aacute; a una l&iacute;nea de &oacute;rdenes desde la que podremos
interaccionar con fdisk.
d427 4
a430 3
Entrar en fdisk y explorar el disco es totalmente seguro, s&oacute;lo debe
asegurarse de contestar <strong>N</strong> cuando le pregunte si quiere
guardar los cambios, y de que NO usa la orden <strong>write</strong>.
d434 2
a435 2
Aqu&iacute; tiene una revisi&oacute;n de las &oacute;rdenes que puede usar 
cuando escoja el indicador <b>-e</b>.
d441 9
a449 9
   <li><strong>reinit</strong> Iniciar la copia residente en memoria del 
       bloque de arranque seleccionado.</li>
   <li><strong>disk</strong> Mostrar la geometr&iacute;a del dispositivo que
       haya verificado fdisk.
       Si lo desea, puede editarla para aplicarle cambios.</li>
   <li><strong>edit</strong> Editar una cierta entrada en la tabla en la copia 
       residente en memoria del bloque de arranque actual.
       Puede editarla en modo de geometr&iacute;a de la BIOS o en modo de
       sectores de inicio y tama&ntilde;os.</li>
d451 5
a455 6
       particiones como partici&oacute;n de arranque.
       Solamente se puede marcar una entrada como partici&oacute;n de
       arranque.
       Si quiere arrancar desde una partici&oacute;n extendida, tendr&aacute;
       que marcar la entrada de la partici&oacute;n en la tabla como
       partici&oacute;n de arranque.</li>
d457 5
a461 5
       m&aacute;quina en la copia residente en memoria del bloque de arranque
       seleccionado.</li>
   <li><strong>select</strong> Seleccionar y cargar en memoria el bloque de
       arranque que se&ntilde;ala a la entrada en la tabla de particiones
       extendidas del bloque de arranque actual.</li>
d464 14
a477 12
   <li><strong>write</strong> Grabar la copia residente en memoria del bloque
       de arranque al disco.
       Le pedir&aacute; que confirme esta operaci&oacute;n.</li>
   <li><strong>exit</strong> Salir del nivel actual de fdisk, volviendo al
       bloque de arranque residente en memoria previamente seleccionado, o
       saliendo completamente del programa si no hubiera ninguno.</li>
   <li><strong>quit</strong> Salir del nivel actual de fdisk, volviendo al
       bloque de arranque residente en memoria previamente seleccionado, o
       saliendo completamente del programa si no hubiera ninguno.
       A diferencia de <strong>exit</strong>, no guarda los cambios del
       bloque modificado.</li>
   <li><strong>abort</strong> Salir del programa sin guardar cambios.</li>
d483 1
a483 1
<h2>14.3 - C&oacute;mo a&ntilde;adir Discos Adicionales</h2>
d504 4
a507 4
De este modo se iniciar&aacute; la tabla de particiones &laquo;real&raquo;
para su uso exclusivo por OpenBSD.
A continuaci&oacute;n debe crear un disklabel.
Esto le parecer&aacute; algo confuso.
d529 8
a536 9
Ignore la partici&oacute;n <b>c</b>, siempre est&aacute; ah&iacute; y es para
que funcionen programas como disklabel.
Para operaciones normales, <i>fsize</i> siempre debe ser 1024, <i>bsize</i>
siempre debe ser 8192, y <i>cpg</i> siempre debe ser 16.
<i>fstype</i> es 4.2BSD.
<i>total sectors</i> es el tama&ntilde;o total del disco.
Supongamos que &eacute;ste es un disco de 3GB;  tres gigabytes, en
t&eacute;rminos del fabricante del disco, son 3000 megabytes.
Divida 6185088 entre 3000 (use
d538 10
a547 12
y obtendr&aacute; 2061.
Por lo tanto, para crear particiones para a, d, e, f, g, ... simplemente
multiplique X*2061 y obtendr&aacute; el n&uacute;mero de megabytes de espacio
en esa partici&oacute;n.
El sector de inicio (&quot;<i>offset</i>&quot;) para su primera 
partici&oacute;n nueva debe ser el mismo que el 
&quot;<i>sectors/track</i>&quot; que le haya dado anteriormente la salida de 
disklabel.
En este caso es 63.
El sector de inicio para cada partici&oacute;n consecutiva debe ser una 
combinaci&oacute;n del tama&ntilde;o de cada partici&oacute;n y el sector de
inicio de la misma (excepto la partici&oacute;n <b>c</b>, ya que no juega
d552 6
a557 6
O, si s&oacute;lo quiere tener una partici&oacute;n en el disco (si, por
ejemplo, quisiera usarlo todo para almacenaje de web o como directorio home),
tome el tama&ntilde;o total del disco y r&eacute;stele los sectores por pista
(&quot;sectors/track&quot;).
En este caso, 6185088-63 = 6185025.
La partici&oacute;n quedar&aacute; as&iacute;:
d567 13
a579 13
<b>¡Si todo esto le parece complicado e innecesario, puede usar disklabel -E
para obtener el mismo modo de particiones que tiene en su disco de
instalaci&oacute;n!</b>
Ah&iacute; puede usar &laquo;96M&raquo; para especificar &laquo;96
megabytes&raquo; (o con un disco lo bastante grande, 96G para 96 gigabytes).
Desafortunadamente, el modo -E usa la geometr&iacute;a del disco de la BIOS,
no la geometr&iacute;a del disco real, y con frecuencia &eacute;stas no son
las mismas.
Para evitar esta limitaci&oacute;n, escriba 'g d' para la 'geometr&iacute;a
del disco'.  Otras opciones son 'g b' para la 'geometr&iacute;a de la bios' y
'g u' para la 'geometr&iacute;a del usuario', o simplemente lo que indique la
&laquo;clasificaci&oacute;n&raquo; (&quot;label&quot;) antes de que disklabel
efect&uacute;e alg&uacute;n cambio.
d583 2
a584 2
Esto ha sido largo, pero todav&iacute;a no ha terminado.
Para finalizar, debe crear el sistema de archivo en el disco usando
d595 2
a596 2
O cualquiera otra denominaci&oacute;n de su disco de acuerdo con el esquema
de numeraci&oacute;n del disco de OpenBSD (mire la salida de
d602 3
a604 4
Ahora debe decidir d&oacute;nde va a montar la nueva partici&oacute;n que
acaba de crear.
Digamos que quiere ponerla en /u.
Primero cree el directorio /u, y luego m&oacute;ntelo.
d624 3
a626 3
¿Y si necesitara migrar a un directorio ya existente como /usr/local?
Entonces deber&iacute;a montar la partici&oacute;n nueva en /mnt, y usar
'cpio -pdum' para copiar /usr/local al directorio /mnt.
d629 1
a629 2
reci&eacute;n creada).
Por ejemplo:
d638 4
a641 4
/usr/local existente a /usrs/local-backup (eliminando el original cuando
est&eacute; seguro), y cree un directorio /usr/local vac&iacute;o.
Reinicie el sistema y ¡ya est&aacute;!  ¡ah&iacute; est&aacute;n los
ficheros!
d647 1
a647 1
<h2>14.4 - C&oacute;mo usar un Fichero como Memoria de swap</h2>
d650 4
a653 3
(Nota: si lo que quiere es usar un fichero como memoria de swap porque
obtiene errores del tipo &quot;virtual memory exhausted&quot;, deber&iacute;a
intentar antes elevar los l&iacute;mites por proceso con la utilidad de csh
d660 2
a661 1
Despu&eacute;s de la versi&oacute;n oficial de OpenBSD 2.5 apareci&oacute;
d663 7
a669 6
con el que es mucho m&aacute;s f&aacute;cil tratar con dispositivos de swap.
Si est&aacute; usando la versi&oacute;n 2.5 de OpenBSD, intercambie swapctl 
por swapon, y use pstart -s para ver una lista de dispositivos de swap.
El uso de ficheros como memoria de swap no requiere la compilaci&oacute;n de
un n&uacute;cleo del sistema personalizado, aunque aqu&iacute; explicaremos
c&oacute;mo hacerlo de las dos maneras.
d673 10
a682 10
<h3>Usar un fichero como swap</h3>

<p>
Usar un fichero como memoria de swap es la forma m&aacute;s f&aacute;cil y
r&aacute;pida de obtener una configuraci&oacute;n adicional del &aacute;rea de 
swap.
Esto no es para los usuarios que usen &quot;Softupdates&quot; (que viene
desactivado por definici&oacute;n).
Para empezar, puede ver cu&aacute;nta memoria de swap tiene en ese momento y
cu&aacute;nta est&aacute; usando con la utilidad
d696 9
a704 10
Esto le mostrar&aacute; los dispositivos que est&aacute;n siendo usados como
memoria de swap y sus estad&iacute;sticas actuales.
En el ejemplo anterior, s&oacute;lo hay un dispositivo denominado
&quot;swap_device&quot;.
&Eacute;ste es el &aacute;rea predefinida para swap (si lo vi&eacute;ramos
con disklabel, lo mostrar&iacute;a como la partici&oacute;n b).
Tambi&eacute;n puede ver en el ejemplo anterior que el dispositivo no
est&aacute; siendo muy usado en ese momento.
Pero para el prop&oacute;sito de este documento, procederemos como si
necesit&aacute;ramos 32MB adicionales.
d708 3
a710 3
El primer paso para configurar un fichero como un dispositivo de swap es
crear el fichero.
El mejor modo de hacerlo es con la utilidad
d712 2
a713 2
He aqu&iacute; un ejemplo de c&oacute;mo crear el fichero <i>/var/swap</i>,
que tendr&aacute; un tama&ntilde;o de 32MB.
d726 3
a728 3
Una vez que lo hayamos creado, podemos activar el uso de ese dispositivo como
memoria de swap.
Para activarlo, use la siguiente orden:
d739 2
a740 2
Ahora debemos comprobar si se ha a&ntilde;adido correctamente a la lista de
nuestros dispositivos de swap.
d754 5
a758 5
Ahora que ya est&aacute; activado el fichero y que se est&aacute; usando como
swap, debe a&ntilde;adir una l&iacute;nea a su fichero <i>/etc/fstab</i>,
para que el fichero tambi&eacute;n se active en el pr&oacute;ximo arranque.
Si no a&ntilde;ade esta l&iacute;nea, no tendr&aacute; este dispositivo de
swap configurado.
d770 1
a770 1
<h3>Usar swap a trav&eacute;s de un dispositivo vnode</h3>
d774 7
a780 7
a&ntilde;adir m&aacute;s espacio de swap.
Para usar permanentemente un fichero como memoria de swap, primero compile un
n&uacute;cleo con vnd0c como swap.
Si su sistema de archivo ra&iacute;z es wd0a, entonces wd0b es el swap 
anterior y debe usar la siguiente l&iacute;nea en el fichero de 
configuraci&oacute;n del n&uacute;cleo (si tiene dudas, lea el 
<a href="faq5.html">cap&iacute;tulo 5</a> de las preguntas frecuentes 
d792 2
a793 2
usar&aacute; como memoria de swap.
Debe hacerlo usando la misma orden que en los ejemplos anteriores.
d807 2
a808 3
<i>/etc/fstab</i>.
Aqu&iacute; tiene una l&iacute;nea de ejemplo de c&oacute;mo arrancar con
este dispositivo como swap.
d820 3
a822 4
En este punto su m&aacute;quina debe ser reiniciada para que los cambios en
el n&uacute;cleo hagan efecto.
A continuaci&oacute;n deber&aacute; configurar el dispositivo como memoria de
swap.
d835 4
a838 4
El &uacute;ltimo paso es activar ese dispositivo como memoria de swap.
Lo haremos como en los ejemplos anteriores, usando swapctl(8).
Despu&eacute;s comprobaremos si ha sido correctamente a&ntilde;adido a
nuestra lista de dispositivos de swap.
d855 1
a855 1
<h2>14.5 - Soft-updates</h2>
d859 4
a862 4
Durante los &uacute;ltimos a&ntilde;os, Kirk McKusick ha estado trabajando en
algo llamado &quot;soft updates&quot;.
Esto se basa en la idea propuesta por Greg Ganger y Yale Patt de imponer un
orden parcial sobre las operaciones en la memoria intermedia para permitir
d864 2
a865 2
directorio sean eliminadas del c&oacute;digo FFS.
En resumen, un gran incremento en el rendimiento de la escritura en disco.
d869 6
a874 2
Para activar &quot;Softupdates&quot;, el n&uacute;cleo debe tener configurada
la opci&oacute;n
d897 3
a899 2
<h2>14.6 -  Cuando arranco el Sistema despu&eacute;s de la Instalaci&oacute;n 
de OpenBSD/i386, se para en &quot;Using partition 3 id 0&quot;</h2>
d902 6
a907 7
Esto significa que su &laquo;Registro de Arranque Maestro&raquo; (MBA,
&quot;Master Boot Record&quot;) no ha sido instalado correctamente, o que la
idea que su BIOS tiene sobre la geometr&iacute;a del disco duro no es
compatible con su MBR.
Para solventarlo, primero intente reinstalar los bloques de arranque de
OpenBSD.
Para ello use
d910 5
a914 5
Para que arranque y funcione la primera vez, necesitar&aacute; usar el disco
de arranque (&quot;boot disk&quot;) como mecanismo de arranque.
Despu&eacute;s de insertar el disco de instalaci&oacute;n, y antes de que
cargue el n&uacute;cleo y el &quot;ramdisk&quot;, ver&aacute; un punto de
pedido <tt>boot&gt;</tt> desde el disquete.
d928 5
a932 5
Ahora que ya ha iniciado, y asumiendo que haya dedicado todo su disco duro a
OpenBSD, reinicie el MBR con fdisk(8) (de todos modos, si tiene particiones 
para otros sistemas operativos en su disco duro, no podr&aacute; usar
<tt>installboot</tt>;  tendr&aacute; que buscar otra opci&oacute;n como
OS-BS, que se describe m&aacute;s adelante).
d958 5
a962 7
adicionales.
La primera ser&iacute;a usar un gestor de arranque como OS-BS.
El CD de OpenBSD incluye el gestor de arranque OS-BS en el directorio
<i>tools</i>.
Si no ha adquirido el CD-ROM, puede obtener OS-BS desde cualquiera de los
servidores de ftp de OpenBSD.
Debe bajarse el fichero <tt>pub/OpenBSD/2.6/tools/osbs135.exe</tt>
d966 2
a967 2
T&oacute;mese algo de tiempo para leer las p&aacute;ginas en internet de
OS-BS, que se encuentran en
d972 2
a973 2
Existen otros gestores de arranque comerciales, o libres como lilo, que puede
usar para un arranque m&uacute;ltiple.
d990 1
a990 1
<a href="../INSTALL.linux">INSTALL.linux</a>
d996 2
a997 1
<h2>14.7 - ¿C&oacute;mo obtento un dmesg de un Disquete de Arranque?</h2>
d1000 4
a1003 4
Las im&aacute;genes de RAMDISK (disquetes de arranque) no incluyen la 
utilidad <i>dmesg</i>.
Sin embargo, tienen el sistema de archivo <code>/kern</code> montado.
Para copiar la informaci&oacute;n de dmesg a un fichero, haga lo siguiente:
d1025 2
a1026 2
Lea tambi&eacute;n la <a href="faq4.html#4.5">secci&oacute;n 4.5</a> de estas
preguntas frecuentes.
d1030 1
a1030 1
<h2>14.8 - Instalaci&oacute;n de Bloques de Arranque
d1035 2
a1036 2
reconocer geomtr&iacute;as de disco de 1024 cilindros o menos.
Ya que casi pr&aacute;cticamente todos los discos modernos tienen m&aacute;s
d1038 20
a1057 22
integrados en la tarjeta controladora SCSI) y de BIOS IDE (que son parte del
resto de la BIOS para PCs) disponen de una opci&oacute;n (algunas veces
preactivada) para &laquo;traducir&raquo; la geometr&iacute;a real del disco
en algo que est&eacute; dentro de los l&iacute;mites de la capacidad de 
MS-DOS.
Sin embargo, no todos los chips de BIOS &laquo;traducen&raquo; la
geometr&iacute;a del mismo modo.
Si cambia su BIOS (instalando una nueva placa base o a&ntilde;adiendo una
nueva controladora SCSI) y la nueva usa una &laquo;traducci&oacute;n&raquo;
de la geometr&iacute;a diferente, no podr&aacute; cargar la segunda fase del
gestor de arranque (y por lo tanto no podr&aacute; cargar el n&uacute;cleo).
Esto se debe a que la primera fase del gestor de arranque contiene una lista
de bloques que comprende <i>/boot</i> en t&eacute;rminos de la
geometr&iacute;a &laquo;traducida&raquo; original.
Si est&aacute; usando discos IDE y realiza cambios en la
configuraci&oacute;n de su BIOS, tambi&eacute;n puede cambiar sin saberlo su
traducci&oacute;n (la mayor&iacute;a de BIOS IDE ofrecen 3 traducciones
diferentes).
Para que su bloque de arranque pueda iniciar con normalidad, ponga un
disquete de arranque, y en el punto <kbd>boot&gt;</kbd> escriba 
<kbd>b hd0a:/bsd</kbd> para forzar el arranque desde el primer disco duro (y
no desde el disquete).
d1059 3
a1061 3
Ahora debe actualizar la primera fase del gestor de arranque para poder ver
la nueva geometr&iacute;a (y reescribir el bloque de arranque de  acuerdo con
ella).
d1063 2
a1064 2
En el ejemplo se asume que su disco de arranque es sd0 (SCSI, pero si fuera
IDE ser&iacute;a wd0, etc... ):
d1074 7
a1080 7
Si installboot protesta porque es incapaz de leer la geometr&iacute;a de la
BIOS, puede invocar la orden 'machine diskinfo' (o su forma abreviada, 'ma
di') desde el punto <kbd>boot&gt;</kbd>, para ver la informaci&oacute;n que
necesite.
Rellene con los valores &quot;heads&quot; y &quot;secs&quot; los indicadores 
<code>-h</code> y <code>-s</code> de installboot respectivamente,
para que la orden modificada de installboot quede como sigue:
d1106 2
a1107 2
<h2>14.9 - Prepararse para el Desastre: Hacer Copias de Seguridad (Respaldo) 
y Restaurar desde la Cinta</h2>
d1113 3
a1115 3
Si su instalaci&oacute;n de OpenBSD va a ser lo que se llama un servidor de
producci&oacute;n, es aconsejable disponer de alg&uacute;n tipo de respaldo
por si acaso uno de sus discos fijos fallara.
d1121 5
a1125 5
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&sektion=8&format=html">dump(8)</a>/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&sektion=8&format=html">restore(8)</a> disponibles con OpenBSD.
Existe una utilidad para copias de seguridad m&aacute;s avanzada, llamada
&quot;Amanda&quot;, con la que se pueden hacer copias de seguridad de
m&uacute;ltiples servidores en una sola cinta.
En la mayor&iacute;a de entornos,
d1127 3
a1129 3
es suficiente.
Sin embargo, si necesita hacer copias de seguridad de m&uacute;ltiples
m&aacute;quinas en una sola cinta, vale la pena que conozca Amanda.
d1134 7
a1140 7
configuraci&oacute;n que usa discos y cintas SCSI.
En un entorno de producci&oacute;n, se recomiendan los discos SCSI sobre los
IDE debido al modo que gestionan los bloques err&oacute;neos, lo que no
significa que esta informaci&oacute;n sea in&uacute;til si est&aacute; usando
un disco IDE u otro tipo de cinta;  en este caso los nombres de sus
dispositivos ser&aacute;n ligeramente diferentes.
Por ejemplo, sd0a ser&iacute;a wd0a en un sistema basado en IDE.
d1147 5
a1151 5
Para hacer copias en una cinta es necesario saber de antemano d&oacute;nde
est&aacute;n montados los sistemas de archivo.
Esto se puede determinar usando la orden <kbd>mount</kbd> desde el punto de
pedido de la shell.
Deber&iacute;a obtener una salida similar a &eacute;sta:
d1164 3
a1166 4
f&iacute;sicamente en sd0a, lo que indica que es la partici&oacute;n a del 
disco fijo SCSI 0.
El sistema de archivo /usr reside en sd0h, lo que indica que es la 
partici&oacute;n h del disco fijo SCSI 0.
d1185 4
a1188 3
En este ejemplo, el sistema de archivo ra&iacute;z reside f&iacute;sicamente
en sd0a, el sistema de archivo /var reside en sd0d, el sistema de archivo 
/home en sd0e y finalmente, /usr en sd0h.
d1192 5
a1196 5
Para hacer copias de seguridad de su m&aacute;quina necesitar&aacute; pasar
informaci&oacute;n a dump sobre el nombre de cada partici&oacute;n del disco
fijo.
Aqu&iacute; tiene un ejemplo de las &oacute;rdenes que se necesitan para
hacer copias de la primera tabla de montaje (la m&aacute;s simple):
d1208 2
a1209 2
Para la segunda tabla (la m&aacute;s avanzada), usar&iacute;a algo parecido a
esto:
d1223 4
a1226 4
Puede revisar la p&aacute;gina de manual de dump para averiguar qu&eacute; es
lo que hace exactamente cada uno de los par&aacute;metros en la l&iacute;nea 
de &oacute;rdenes.
Aqu&iacute; tiene una breve descripci&oacute;n de los par&aacute;metros
d1231 7
a1237 6
   <li><b>a</b> - Intenta determinar autom&aacute;ticamente el tama&ntilde;o
       de la cinta.
   <li><b>u</b> - Actualiza el fichero /etc/dumpdates para indicar
       cu&aacute;ndo se realiz&oacute; la &uacute;ltima copia de seguridad.
   <li><b>f</b> - Indica qu&eacute; dispositivo de cinta se usar&aacute;
       (en este caso /dev/nrst0).
d1242 2
a1243 2
La &uacute;ltima parte indica la partici&oacute;n de la que se har&aacute; la 
copia de seguridad (/dev/rsd0a, etc... ).
d1247 2
a1248 2
La orden mt se usa al final para rebobinar el controlador.
Revise la p&aacute;gina de manual de
d1254 3
a1256 4
Si no est&aacute; seguro de cu&aacute;l es el nombre de su dispositivo de
cinta, use dmesg para localizarlo.
Un ejemplo de entrada del dispositivo de cinta en dmesg ser&aacute; parecido
al siguiente:
d1266 15
a1280 15
Es posible que haya notado que al realizar la copia de seguridad, se accede
al controlador de la cinta con el nombre del dispositivo &quot;nrst0&quot; en
lugar de &quot;st0&quot;, que es el nombre que se ve en dmesg.
Cuando se accede a st0 como nrst0 se est&aacute; accediendo al mismo
controlador f&iacute;sico de la cinta, pero indicando al controlador que no
debe rebobinar al final del proceso y que acceda al dispositivo en modo
virgen.
Para hacer copias de seguridad de m&uacute;ltiples sistemas de archivo en una
sola cinta, aseg&uacute;rese de usar el dispositivo sin rebobinar;  si usa
un dispositivo de rebobinado (rst0) para hacer copias de seguridad de
m&uacute;ltiples sistemas de archivo, acabar&aacute; anulando el sistema de
archivo anterior cuando el pr&oacute;ximo dump intente grabar en la cinta.
Puede encontrar una descripci&oacute;n m&aacute;s elaborada sobre los
distintos dispositivos de control de cinta en la p&aacute;gina de manual de
dump.
d1284 1
a1284 1
Si quiere escribir un peque&ntilde;o gui&oacute;n (&quot;script&quot;),
d1304 2
a1305 2
Si desea programar las copias de seguridad para que se hagan por la noche o a
cualquier otra hora, puede usar
d1311 6
a1316 6
Tambi&eacute;n puede serle de ayuda documentar (en un trozo de papel) el
tama&ntilde;o necesario para cada sistema de archivo.
Puede usar la orden <kbd>df -h</kbd> para determinar cu&aacute;nto espacio 
est&aacute; usando cada partici&oacute;n.
Esto le ser&aacute; &uacute;til cuando el dispositivo falle y necesite
recrear su partici&oacute;n en el nuevo dispositivo.
d1321 8
a1328 9
fragmentaci&oacute;n.
Para asegurarse de que tiene todos los ficheros, la mejor forma de hacer
copias de seguridad es reiniciando el sistema en modo monousuario.
Los sistemas de archivos no necesitan estar montados para hacer las copias.
Despu&eacute;s de reiniciar no se olvide de montar la partici&oacute;n 
ra&iacute;z (/) con permisos de escritura (r) y lectura (w), o dump
fallar&aacute; cuando intente grabar los &quot;dumpdates&quot;.
Para iniciar en modo monousuario haga lo siguiente desde el punto de
arranque:
d1341 4
a1344 3
Despu&eacute;s de que haya hecho las correspondientes copias de seguridad por
primera vez, es una buena idea que pruebe su cinta y que se asegure de que 
los datos en ella sean los que Vd. esperaba que fueran.
d1348 2
a1349 2
Puede usar el siguiente ejemplo para revisar un cat&aacute;logo de ficheros
en una cinta:
d1359 4
a1362 4
Esto har&aacute; que se muestre una lista con los ficheros existentes en la
primera partici&oacute;n de la cinta.
De acuerdo con los ejemplos anteriores, 1 ser&iacute;a su sistema de archivo
ra&iacute;z (/).
d1376 5
a1380 5
Si tiene una tabla de particiones como la simple de ejemplos anteriores, 2
ser&iacute;a /usr;  si la tabla es como la m&aacute;s avanzada, entonces 2
podr&iacute;a ser /var u otro sistema de archivo.
El n&uacute;mero de secuencia coincide con el orden en el que se graben los
sistemas de archivo en la cinta.
d1386 4
a1389 4
El ejemplo que ver&aacute; m&aacute;s adelante podr&iacute;a ser &uacute;til
si su disco fijo fallara totalmente.
En caso de que quiera restaurar sus sistemas de archivo desde un &uacute;nico
fichero de la cinta, revise la p&aacute;gina de manual de
d1395 8
a1402 9
Si se ha preparado bien, substituir un disco y restaurar sus datos desde la
cinta puede ser un proceso muy r&aacute;pido.
El disquete de instalaci&oacute;n/arranque est&aacute;ndar de OpenBSD
contiene la utilidad que se requiere para restaurar, as&iacute; como los
binarios que se requieren para particionar y hacer que pueda arrancar desde
su dispositivo.
En la mayor&iacute;a de los casos, este disquete y su cinta con la copia de
seguridad m&aacute;s reciente ser&aacute; todo lo que necesite para restaurar
el sistema.
d1406 3
a1408 3
Despu&eacute;s de substituir f&iacute;sicamente el dispositivo de disco 
err&oacute;neo, los pasos b&aacute;sicos para restaurar sus datos son los
siguientes:
d1415 2
a1416 2
Prot&eacute;jalo contra la escritura e introduzca su cinta de la copia de
seguridad m&aacute;s reciente en el dispositivo.
d1422 2
a1423 2
para crear una partici&oacute;n primaria de OpenBSD en el nuevo dispostivo.
Por ejemplo:
d1432 2
a1433 2
Revise la <a href="#14.2">secci&oacute;n 14.2</a> sobre fdisk para m&aacute;s
informaci&oacute;n.
d1439 3
a1441 3
para recrear su tabla de particiones de OpenBSD dentro de la partici&oacute;n 
primaria de OpenBSD que acaba de crear con fdisk.
Por ejemplo:
d1450 1
a1450 1
No se olvide de la partici&oacute;n de swap.
d1458 2
a1459 3
en cada una de las particiones que acaba de crear, para construir un sistema 
de archivo limpio en cada una de ellas.
Por ejemplo:
d1469 2
a1470 2
Monte su reci&eacute;n preparado sistema de archivo ra&iacute;z (/) en /mnt.
Por ejemplo:
d1479 2
a1480 3
Cambie a ese sistema de archivo ra&iacute;z que acaba de montar y comience
con el proceso de restauraci&oacute;n.
Por ejemplo:
d1490 2
a1491 2
Como querr&aacute; poder arrancar desde este nuevo disco, haga lo siguiente
para grabar un nuevo MBR en su dispositivo:
d1500 3
a1502 3
Adem&aacute;s de grabar un nuevo MBR en el controlador, necesitar&aacute;
instalar bloques de arranque para iniciar desde &eacute;l.
A continuaci&oacute;n puede ver un breve ejemplo:
d1512 3
a1514 3
Su nuevo sistema de archivo ra&iacute;z en el disco fijo deber&iacute;a estar
lo suficientemente preparado como para que pueda iniciar desde &eacute;l y
continuar restaurando el resto de sus sistemas de archivo.
d1517 2
a1518 2
Desde el punto de pedido de la shell, ejecute las siguientes &oacute;rdenes
para desmontar y parar el sistema:
d1528 3
a1530 4
Elimine el disquete de instalaci&oacute;n/arranque del dispositivo y reinicie
el sistema.
Desde el punto de arranque de OpenBSD <kbd>boot&gt;</kbd>, ejecute la
siguiente orden:
d1541 1
a1541 1
sistema de archivo ra&iacute;z (/).
d1545 8
a1552 9
Asumiendo que ha llevado a cabo todos los pasos anteriores correctamente y
que no ha cometido ning&uacute;n error, deber&iacute;a acabar viendo un punto
en el que le pedir&aacute; que introduzca un camino para la shell o que pulse
la tecla <kbd>intro</kbd>.
Pulse <kbd>&lt;intro&gt;</kbd> si va a usar sh.
A continuaci&oacute;n tendr&aacute; que volver a montar el sistema de archivo
ra&iacute;z en modo de lectura (r) y escritura (w), al contrario que en modo
de s&oacute;lo lectura como hasta ahora.
Ejecute la siguiente orden:
d1561 3
a1563 3
Una vez que lo haya vuelto a montar en modo de lectura y escritura, puede
continuar restaurando sus otros sistemas de archivo.
Por ejemplo:
d1578 3
a1580 3
Puede usar &quot;<b>restore rvsf</b>&quot; en lugar de usar s&oacute;lo 
&quot;rsf&quot;, para ver lo nombres de los objetos mientras los extrae de la
copia de seguridad.
d1585 2
a1586 2
sistemas de archivo al disco, reinicie en modo multiusuario.
Si todo ha salido como lo ha planeado, su sistema volver&aacute; al estado en
d1593 1
a1593 1
<a href="index.html">[Volver al Índice Principal]</a>
d1604 2
a1605 2
Originally [OpenBSD: faq14.html,v 1.21 2000/04/07 20:17:49 ericj Exp ]<br>
$Translation: faq14.html,v 1.1 2000/04/29 17:58:06 horacio Exp $<br>
@

