head	1.21;
access;
symbols;
locks; strict;
comment	@# @;


1.21
date	2014.04.01.17.03.10;	author nick;	state dead;
branches;
next	1.20;

1.20
date	2013.05.08.13.48.35;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2010.10.19.14.31.15;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2010.05.11.06.30.57;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2010.04.07.14.14.23;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2010.03.08.12.37.15;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2009.12.22.17.49.10;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2009.12.09.08.30.07;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2009.11.10.13.38.42;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2009.06.13.08.31.49;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2009.05.01.13.16.23;	author tobias;	state Exp;
branches;
next	1.10;

1.10
date	2009.03.25.20.53.32;	author tobias;	state Exp;
branches;
next	1.9;

1.9
date	2009.02.22.20.35.21;	author tobias;	state Exp;
branches;
next	1.8;

1.8
date	2008.12.13.11.02.10;	author tobias;	state Exp;
branches;
next	1.7;

1.7
date	2008.11.26.08.25.03;	author tobias;	state Exp;
branches;
next	1.6;

1.6
date	2008.10.24.19.56.03;	author tobias;	state Exp;
branches;
next	1.5;

1.5
date	2008.07.20.18.18.50;	author tobias;	state Exp;
branches;
next	1.4;

1.4
date	2008.05.27.10.00.24;	author tobias;	state Exp;
branches;
next	1.3;

1.3
date	2008.05.12.07.23.52;	author tobias;	state Exp;
branches;
next	1.2;

1.2
date	2008.05.01.10.01.51;	author tobias;	state Exp;
branches;
next	1.1;

1.1
date	2008.04.28.09.35.19;	author tobias;	state Exp;
branches;
next	;


desc
@@


1.21
log
@
Abandon translations, per deraadt@@ and ajacoutot@@.
Thanks to all those that did the translation work, and my appologies to
those who had to translate my writing!
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>4 - OpenBSD 4.6 安装指南</title>
<link rev= "made" href= "mailto:www@@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2009 by OpenBSD.">
</head>

<!-- Passes validator.w3.org.  Please keep it this way -->

<body bgcolor= "#ffffff" text= "#000000">

<a href="../../zh/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="0">
</a>
<p>

<font color= "#0000e0">
<a href= "index.html">[FAQ 索引]</a>
<a href= "faq3.html">[到 3 - 开始使用 OpenBSD]</a>
<a href= "faq5.html">[到 5 - 从源代码构建系统]</a>
</font>

<h1><font color="#e00000">4 - OpenBSD 4.6 安装指南</font></h1>
<hr>

<p>
<h3>目录</h3>
<ul>
<li><a href= "#Overview"    >4.1 - OpenBSD 安装过程概要</a>
<li><a href= "#Checklist"   >4.2 - 安装前的检查列表</a>

<li><a href="#MkInsMedia"   >4.3 - 创建 OpenBSD 安装媒体</a>
    <ul>
    <li><a href="#MkCD-ROM" >4.3.1 - 创建引导 CD</a>
    <li><a href="#UnixFlop" >4.3.2 - 在 Unix 中创建引导软盘</a>
    <li><a href="#DosFlop"  >4.3.3 - 在 Windows 中创建引导软盘</a>
    </ul>
<li><a href="#Boot"         >4.4 - 使用 OpenBSD 安装媒体启动</a>
<li><a href="#Install"      >4.5 - 执行简单安装</a>
  <ul>
  <li><a href="#InstStart"    >4.5.1 - 开始安装</a>
  <li><a href="#InstQuestions">4.5.2 - 安装期间的问题</a>
  <li><a href="#InstDisks"    >4.5.3 - 配置磁盘</a>
  <li><a href="#InstMedia"    >4.5.4 - 选择安装媒体和文件集</a>
  <li><a href="#Inst1stBoot"  >4.5.5 - 首次启动!</a>
  <li><a href="#InstFinish"   >4.5.6 - 最后要做的事...</a>
  </ul>

<li><a href="#More"         >4.6 - 更复杂的安装步骤</a>
  <ul>
  <li><a href="#MoreNetwork"  >4.6.1 - 配置网络</a>
  <li><a href="#MoreTimeZone" >4.6.2 - 配置时区</a>
  <li><a href="#Morefdisk"    >4.6.3 - 定制 fdisk(8) 布局</a>
  <li><a href="#Moredisklabel">4.6.4 - 定制 disklabel 布局</a>
  </ul>
<li><a href= "#FilesNeeded" >4.7 - 安装时需要什么文件?</a>
<li><a href= "#Partitioning">4.8 - 我需要什么磁盘分区策略?</a>
<li><a href= "#Multibooting">4.9 - OpenBSD/i386 与多启动</a>
<li><a href= "#SendDmesg"   >4.10 - 安装后将你的 dmesg 发送到 dmesg@@openbsd.org</a>
<li><a href= "#AddFileSet"  >4.11 - 安装后增加文件集</a>
<li><a href= "#bsd.rd"      >4.12 - “bsd.rd” 是什么?</a>
<li><a href= "#InstProb"    >4.13 - 常见安装问题</a>
  <ul>
  <li><a href="#cpq16m"     >4.13.1 - 我的 Compaq 只能识别 16M 内存</a>
  <li><a href="#noboot"     >4.13.2 - 我的 i386 安装后不能启动</a>
  <li><a href="#sshhang"    >4.13.3 - 我的机器启动后，在 ssh-keygen 进程挂起</a>
  <li><a href="#noftplist"  >4.13.4 - 安装期间出现信息“改变目录失败”</a>
  <li><a href="#blankfdisk" >4.13.5 - 我的分区表乱七八糟或空白!</a>
  <li><a href="#noflopcd"   >4.13.6 - 我的机器没有软驱或 CD-ROM</a>
  </ul>
<li><a href= "#site"        >4.14 - 定制安装过程</a>
<li><a href= "#Multiple"    >4.15 - 如何简化安装多个相似系统的工作?</a>
<li><a href="#getdmesg"     >4.16 - 何获得 dmesg(8) 以报告安装问题?</a>
</ul>
<hr>

<p>
<a name= "Overview"></a>
<h2>4.1 - Overview of the OpenBSD installation procedure</h2>

<p>
OpenBSD has long been respected for its simple and straight forward
installation process, which is consistent across all platforms.
For OpenBSD 4.6, this process has improved to be even simpler and faster
for the vast majority of users, while retaining the flexibility and
"one floppy" installer OpenBSD is known for.

<p>
All platforms use a very similar installation procedure, however
there are some minor differences in details on a few platforms.
In all cases, you are urged to read the platform-specific INSTALL
document in the <i>platform</i> directory on the CD-ROM or FTP sites
(for example, <tt>i386/INSTALL.i386</tt>, <tt>mac68k/INSTALL.mac68k</tt>
or <tt>sparc/INSTALL.sparc</tt>).

<p>
The OpenBSD installer is a <a href="#bsd.rd">special</a> kernel
with a number of utilities and install scripts embedded in a
pre-loaded RAM disk.
After this kernel is booted, the operating system is extracted from
a number of compressed
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tar&amp;sektion=1">tar(1)</a>
(<tt>.tgz</tt>) files from a source other than this pre-loaded RAM disk.
There are several ways to boot this install kernel:

<ul>
<li><b>Floppy disk:</b>
OpenBSD can be installed on many platforms by booting an installer
from a single floppy disk.
However, due to space constraints, some larger platforms (sparc64,
amd64, alpha) do not have some utilities which may be important to you,
such as a DHCP client to configure the network.
For these platforms, you may do better with the CD install.
However, for platforms like i386 and sparc, you will find the boot
floppy very complete.

<p>
Floppy disk images are provided which can be
used to create an install floppy on another
<a href="#UnixFlop">Unix-like</a> system, or on a
<a href="#DosFlop">Windows</a> system.
Typical file names are <tt>floppy46.fs</tt>, though several platforms
have multiple floppy images available.

<li><b>CD-ROM:</b> On several platforms a CD-ROM image
(<tt>cd46.iso</tt> for just booting, or <tt>install46.iso</tt> for the
entire install) is provided allowing creation of a bootable CD-ROM.

<li><b>Existing partition:</b> The <a href="#bsd.rd">RAM disk</a> kernel
can be booted off an already existing partition for an upgrade or
reinstall.

<li><b>Network:</b> Some platforms support booting over a network
(for example using <a href="faq6.html#PXE">PXE</a> or other
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=diskless&amp;sektion=8">network
boot</a>).

<li><b>Writing a file system image to disk (miniroot):</b> a filesystem
image that can be written to an existing partition, and then can be
booted.

<li><b>Bootable Tape:</b> Some platforms support booting from tape.
These tapes can be made following the INSTALL.<i>platform</i>
instructions.

</ul>

Not every <a href="../plat.html">platform</a> supports all boot options:

<ul>
<li><a href="../alpha.html"><b>alpha:</b></a> Floppy, CD-ROM, network,
writing a floppy image to hard disk.

<li><a href="../amd64.html"><b>amd64:</b></a> Floppy, CD-ROM,
<a href="faq6.html#PXE">network</a>.

<li><a href="../armish.html"><b>armish:</b></a>
Varies by machine.

<li><a href="../hp300.html"><b>hp300:</b></a> CD-ROM, network.

<li><a href="../hppa.html"><b>hppa:</b></a> Network.

<li><a href="../i386.html"><b>i386:</b></a> Floppy, CD-ROM,
<a href="faq6.html#PXE">network</a>.

<li><a href="../landisk.html"><b>landisk:</b></a> miniroot, installed
using another computer.

<li><a href="../macppc.html"><b>macppc:</b></a> CD-ROM, network.

<li><a href="../mvme68k.html"><b>mvme68k:</b></a> Network, bootable tape.

<li><a href="../mvme88k.html"><b>mvme88k:</b></a> Network, bootable tape.

<li><a href="../sparc.html"><b>sparc:</b></a> Floppy, CD-ROM, network,
writing image to existing swap partition, bootable tape.

<li><a href="../sparc64.html"><b>sparc64:</b></a> Floppy (U1/U2 only),
CD-ROM, network, writing image to existing partition.

<li><a href="../vax.html"><b>vax:</b></a> Floppy, network.

<li><a href="../zaurus.html"><b>zaurus:</b></a> Boot bsd.rd from
Linux partition.  See
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.6/zaurus/INSTALL.zaurus">INSTALL.zaurus</a>
for details.

</ul>

All platforms can also use a
<a href="#bsd.rd">bsd.rd</a> to reinstall or upgrade.

<p>
Once the install kernel is booted, you have several options of where to get
the <a href="#FilesNeeded">install file sets</a>.
Again, not every platform supports every option.

<ul>
<li><b>CD-ROM:</b> Of course, we prefer you use the
<a href="../orders.html">Official CD-ROM set</a>, but you can also use
<tt>install46.iso</tt> or you can also make your own.

<li><b>FTP:</b>
Either one of the OpenBSD
<a href="../ftp.html">FTP mirror sites</a>
or your own local FTP server holding the file sets.

<li><b>HTTP:</b>
Either one of the OpenBSD
<a href="../ftp.html#http">HTTP mirror sites</a>
or your own local web server holding the file sets.

<li><b>Local disk partition:</b>
In many cases, you can install file sets from another partition
on a local hard disk.
For example, on <a href="../i386.html">i386</a>,
you can install from a FAT partition or a CD-ROM formatted in
ISO9660, Rock Ridge or Joliet format.
In some cases, you will have to manually mount the file system before using it.

<li><b>NFS:</b>
Some platforms support using NFS mounts for the file sets.

<li><b>Tape:</b>
File sets can also be read from a supported tape.
Details on creating the tape are in the <tt>INSTALL.</tt><i>platform</i>
document.
</ul>

<a name="Checklist"></a>
<h2>4.2 - Pre-installation checklist</h2>

<p>
Before you start your install, you should have some idea what you
want to end up with.

You will want to know the following items, at least:
<ul>
<li>Machine name
<li>Hardware installed and available
  <ul>
  <li>Verify compatibility with your platform's hardware
      compatibility page
  <li>If ISA, you also need to know hardware settings, and confirm
      they are as OpenBSD requires.
  </ul>
<li>Install method to be used (CD-ROM, FTP, etc.)
<li>Should an important bug be found, how will the system be patched?
  <ul>
  <li>If done locally, you will need to have
      <a href="#Partitioning">sufficient space</a> available for the
      source tree and building it.
  <li>Otherwise, you will need access to another machine to build
      a patched
      <a href="faq5.html#Release">release</a>
      on.
  </ul>
<li>Desired disk layout
  <ul>
  <li>Does existing data need to be saved elsewhere?
  <li>Will OpenBSD coexist on this system with another OS?
      If so, how both will be booted?
      Will you need to install a "boot manager"?
  <li>Will the entire disk be used for OpenBSD, or do you want to
      keep an existing partition/OS (or space for a future one)?
  <li>How do you wish to sub-partition the OpenBSD part of your
      disk?
  </ul>
<li>Network settings, if not using DHCP:
  <ul>
  <li>Domain name
  <li>Domain Name Server(s) (DNS) address
  <li>IP addresses and subnet masks for each NIC
  <li>Gateway address
  </ul>
<li>Will you be running the X Window System?
</ul>


<a name="MkInsMedia"></a>
<h2>4.3 - Creating bootable OpenBSD install media</h2>

<p>
As examples, we will look at the installation images available for the
<a href="../i386.html">i386</a>
and <a href="../sparc.html">sparc</a> platforms.

<p>
The <a href="../i386.html">i386</a> platform has six separate
installation disk images to choose from:

<ul>
<li><b><tt>cd46.iso</tt></b> is an ISO9660 image that can be used to
  create a bootable CD with most popular CD-ROM creation software
  on most platforms.
  This image has the widest selection of drivers, and is usually
  the recommended choice if your hardware can boot from a CDROM.
<li><b><tt>cdemu46.iso</tt></b> is an ISO9660 image, using
  "floppy emulation" booting, using a 2.88M floppy image.
  It is hoped that few people will need this
  image -- most people will use <tt>cd46.iso</tt>, only use
  <tt>cdemu46.iso</tt> if <tt>cd46.iso</tt> doesn't work for you.
<li><b><tt>install46.iso</tt></b> is an ISO9660 image, containing
  all the standard install files.
  This file can be used to create a CD that can do a stand-alone
  OpenBSD install.
<li><b><tt>floppy46.fs</tt></b> (Desktop PC) supports many
  PCI and ISA NICs, IDE and simple SCSI adapters and some PCMCIA
  support. Most users will use this image if booting from a
  floppy
<li><b><tt>floppyB46.fs</tt></b> (Servers) supports many RAID controllers,
  and some of the less common SCSI adapters.  However,
  support for many standard SCSI adapters and many EISA and ISA
  NICS has been removed.
<li><b><tt>floppyC46.fs</tt></b> (Laptops) supports the CardBus and PCMCIA
  devices found in many laptops.
</ul>

<p>
The <a href="../sparc.html">sparc</a> platform has four separate
installation disk images to choose from:

<ul>
<li><b><tt>floppy46.fs:</tt></b> Supports systems with a floppy disk.
<li><b><tt>cd46.iso</tt></b> An ISO image usable to make your own
  CD for booting SPARC systems with a CD-ROM.
<li><b><tt>miniroot46.fs</tt></b> Can be written to a swap partition
  and booted.
<li><b><tt>install46.iso</tt></b> is an ISO9660 image, containing
  all the standard install files.
  This file can be used to create a CD that can do a stand-alone
  OpenBSD install.
</ul>

On modern platforms, you are best advised to use the CDROM
boot images, as in some of the "bigger" platforms (such as amd64,
sparc64), the floppy images have had to have a lot of drivers and
utilities cut out, which can make installation much more difficult.
Older platforms, such as i386 and sparc, are still quite installable
from floppy.

<a name="MkCD-ROM"></a>
<h3>4.3.1 - Making a CD-ROM</h3>

<p>
You can create a CD-ROM using the <tt>cd46.iso</tt> or
<tt>install46.iso</tt> files.
The exact details here are left to the reader to determine with
the tools they have at their disposal.

<p>
In OpenBSD, you can create a CD from an ISO image using
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cdio&amp;sektion=1">cdio(1)</a>:

<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # <b>cdio tao cd46.iso</b>
</pre></td></tr></table>

<p>
Most CD recorders sold for Windows and Macintosh systems come with
software that can burn ISO images to blank media.
If yours does not, there are various no-cost applications that can
do this for you.

<p>
Other Unix-like systems use applications such as
<a href="http://www.cdrkit.org/">cdrkit</a>.


<a name="MkFlop"></a>
<a name="UnixFlop"></a>
<h3>4.3.2 - Creating floppies on Unix</h3>

<p>
Precise details and device names may vary from Unix variant to Unix
variant; use what is appropriate for your system.

<p>
To create a formatted floppy, use the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdformat&amp;sektion=1&amp;arch=i386">fdformat(1)</a>
command to both format and check for bad sectors.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # <b>fdformat /dev/rfd0c</b>
  Format 1440K floppy `/dev/rfd0c'? (y/n): y
  Processing VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV done.
</pre></td></tr></table>

<p>
If your output is like the above example, then the disk is OK.
However, if you do not see ALL "V"'s then the disk is most
likely bad, and you should try a new one.

<p>
To write the image file to the disk, use
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=0">dd(1)</a>.
An example usage of <tt>dd(1)</tt> is below:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # <b>dd if=floppy46.fs of=/dev/rfd0c bs=32k</b>
</pre></td></tr></table>

<p>
Once the image is written, check to make sure that the copied image is
the same as the original with the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cmp&amp;sektion=1">cmp(1)</a>
command.
If the diskette is identical to the image, you will just see another prompt.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # <b>cmp /dev/rfd0c floppy46.fs</b>
</pre></td></tr></table>

<a name="DosFlop"></a>
<h3>4.3.3 - Creating floppies on Windows</h3>

<p>
To prepare a floppy in Windows, first use the native
formatting tools to format the disk, verifying that the disk has
no bad sectors.

<p>
To write the installation image to the prepared floppy you can use
<tt>ntrw.exe</tt>, which can be downloaded from the
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.6/tools/">tools</a>
directory on any of the FTP mirrors.


<p>
Example usage of <i>ntrw</i>:
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  C:\> <strong>ntrw floppy46.fs a:</strong>
  3.5", 1.44MB, 512 bytes/sector
  bufsize is 9216
  1474560 bytes written
</pre></td></tr></table>


<a name="Boot"></a>
<h2>4.4 - Booting OpenBSD install media</h2>

<h3>Booting i386/amd64</h3>

Booting an install media on the i386 and amd64 PC platforms is nothing new
to most people.
Your system will have to be instructed to boot from whatever media you have
chosen to use, usually either through a BIOS setup option.
If you want to boot from CD, your system BIOS must able to and be set to
boot from CD.
Some older systems do not have this option, and you must use a floppy
for booting your installation image.
Don't worry though; even if you boot from floppy you can still install
from the CD if it is supported by OpenBSD (i.e., almost all IDE drives).

<p>
You can also install by booting <a href="#bsd.rd">bsd.rd</a> from an
existing OpenBSD partition, or over the network using the
<a href="faq6.html#PXE">PXE boot process</a>.

<h3>Booting sparc/sparc64</h3>

<b>NOTE:</b>
On the <a href="../sparc64.html">sparc64</a> platform, only the SBus
machines (Ultra 1, Ultra 2) are bootable from floppy.

<p>
You will need the system to be at a monitor ROM prompt, which
typically looks like "<tt>ok </tt>".
If you are using a Sun keyboard, press and hold "STOP" while
tapping "A".
If using a serial console, a BREAK should return you to the
monitor prompt.

<p>
Use the following command to boot from the floppy:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ok <b>boot floppy</b>
</pre></td></tr></table>

<p>
Usually, you can boot from the CDROM drive of a Sun system from
the boot prompt by typing '<tt>boot cdrom</tt>':

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ok <b>boot cdrom</b>
</pre></td></tr></table>

<a name="Install"></a>
<h2>4.5 - Performing a simple install</h2>

OpenBSD's new installer is designed to install and configure OpenBSD in
a very usable default configuration with very little user intervention.
In fact, you can often just hit <i>ENTER</i> a number of times to get a
good OpenBSD install, moving your hands to the rest of the keyboard only
to enter the root password.

<p>
The installer will create a partitioning plan based on the size of your
hard disk.
While this will NOT be a perfect layout for all people, it provides a
good starting point and a good overall strategy for figuring out what
you need.

<p>
We will start with a very simple install, with brief discussions of the
options provided, and using the magic of hypertext links, allow you to
read more on the topics that interest you and explore your options.

<p>
Installation notes for each platform are on the install CDs and FTP
servers, in the file <tt>INSTALL.<i>&lt;plat&gt;</i></tt>, where
<i>&lt;plat&gt;</i> is your <a href="../plat.html">platform</a>, for
instance, <tt>i386</tt>.


<a name="InstStart"></a>
<h3>4.5.1 - Starting the install</h3>
<!-- XXXrelease -->
Whatever your means of booting is, it is now time to use it.  During
the boot process, the kernel and all of the programs used to install
OpenBSD are loaded into memory.
Once the install kernel is booted, the boot media is no longer needed,
everything runs from the RAM disk.
You can actually remove the CD or floppy you booted from at this point,
assuming you don't need the CD for installation files.

<p>
At almost any point during the OpenBSD install process, you can
terminate the current install attempt by hitting CTRL-C and can restart
it without rebooting by running <tt>install</tt> at the shell prompt.
You can also enter a "!" at most places in the installation to get to
a shell prompt, then exit the shell to return to the installer.

<p>
When your boot is successful, you will see a lot of text messages scroll by.
This text, on many architectures in white on blue, is the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg</a>,
the kernel telling you what devices have been found and how they are
hooked to other devices.
A copy of this text is saved as <tt>/var/run/dmesg.boot</tt>.

<p>
Then, you will see the following:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  root on rd0a swap on rd0b dump on rd0b
  erase ^?, werase ^W, kill ^U, intr ^C, status ^T
  Welcome to the OpenBSD/i386 4.6 installation program.
  (I)nstall, (U)pgrade or (S)hell? <b>i</b>
</pre></td></tr></table>

<p>
And with that, we reach our first question.  You have the three options
shown:

<ul>
<li><b>Install:</b> load OpenBSD onto the system, overwriting whatever
may have been there.  Note that it is possible to leave some partitions
untouched in this process, such as a <tt>/home</tt>, but otherwise,
assume everything else is overwritten.
<li><b>Upgrade:</b> Install a new set of <a href="#FilesNeeded">install
files</a> on this machine, but do not overwrite any configuration
information, user data, or additional programs.  No disk formatting is
done, nor are the <tt>/etc</tt> or <tt>/var</tt> directories overwritten.
A few important notes:
<ul>
<li> You will not be given the option of installing the
<tt>etc46.tgz</tt> file.
After the install, you will have to
<a href="upgrade46.html#etcUpdates">manually merge</a> the changes of
<tt>etc46.tgz</tt> into your system before you can expect it to be
fully functional.
This is an important step which must be done, as otherwise certain key
services (such as
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a>)
may not start.

<li>The Upgrade process is not designed to skip releases!
While this will often work, it is not supported.
For OpenBSD 4.6, upgrading 4.5 to 4.6 is the only supported upgrade.
If you have to upgrade from an older version, upgrade to intermediate
versions first, or if the system is very out-of-date, consider a
complete reinstall.

</ul>
<!-- XXXversion -->
More information on upgrading between releases can be found in the
<a href="upgrade46.html">OpenBSD Upgrade Guide 4.6</a>.

<li><b>Shell:</b> Sometimes, you need to perform repairs or maintenance
to a system which will not (or should not) boot to a normal kernel.
This option will allow you to do maintenance to the system.
A number of important utilities are available on the boot media.
</ul>

We are assuming you are choosing "(I)nstall" here.

<a name="InstQuestions"></a>
<h3>4.5.2 - The Install Questions</h3>

Now we start getting the questions that will define how the system
is set up.
You will note that in most cases, all the questions are asked up front,
then the installation takes place.
If you have a slow computer or a slow Internet connection, you will be
able to answer these questions, walk away, come back later and only have
to reboot the system to complete the install.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  At any prompt except password prompts you can escape to a shell by
  typing '!'. Default answers are shown in []'s and are selected by
  pressing RETURN.  You can exit this program at any time by pressing
  Control-C, but this can leave your system in an inconsistent state.

  Terminal type: [vt220] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
In most cases, the default terminal type is appropriate; however if you
are using a <a href="faq7.html#SerCon">serial console</a> for install,
don't just take the default, respond appropriately.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  System hostname? (short form, e.g. 'foo') <i><b>puffy</b></i>
</pre></td></tr></table>

<p>
This value, along with the DNS domain name (specified
<a href="#MoreNetwork">below</a>), will be saved in the
file <tt>/etc/myname</tt>, which is used during normal boot to set
the hostname of the system.
If you do not set the domain name of the system, the default value of
'my.domain' will be used.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Available network interfaces are: fxp0 vlan0.
  Which one do you wish to configure? (or 'done') [fxp0] <i><b>Enter</b></i>
</pre></td></tr></table>

<p>
<tt>vlan0</tt> is the VLAN virtual interface.
For our purposes here, we are going to ignore this option and stick
to the physical interfaces.
If you have multiple physical interfaces, they will be listed here.
Note that they are identified by driver name, not generic Ethernet
devices.
In this case, "<tt>fxp0</tt>" refers to the first device using the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fxp&amp;sektion=4">fxp(4)</a>
driver, <tt>fxp1</tt> would be the second device, etc.
More on device naming is in <a href="faq6.html#Setup.if">FAQ 6</a>.

<p>
After selecting the device you wish to configure, you will now
configure it.
In many cases, you will want to configure it using DHCP:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  IPv4 address for fxp0? (or 'dhcp' or 'none') [dhcp] <b><i>Enter</i></b>
  Issuing hostname-associated DHCP request for fxp0.
  DHCPDISCOVER on fxp0 to 255.255.255.255 port 67 interval 1
  DHCPOFFER from 192.168.1.250 (08:00:20:94:0b:c8)
  DHCPREQUEST on fxp0 to 255.255.255.255 port 67
  DHCPACK from 192.168.1.250 (08:00:20:94:0b:c8)
  bound to 192.168.1.199 -- renewal in 43200 seconds.
</pre></td></tr></table>

<p>
DHCP will configure the IP address, subnet mask, default gateway,
DNS domain name and DNS servers.
If you are not using DHCP, you will need to specify all these things
manually; see the more detailed discussion
<a href="#MoreNetwork">below</a>.
<a name="backMoreNetwork"></a>

<p>
If you have any IPv6 configuration to do or there are other interfaces
to configure (or you don't like how you configured the previous one),
you can do that now, but in our case, we are done:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  IPv6 address for fxp0? (or 'rtsol' or 'none') [none] <b><i>Enter</i></b>
  Available network interfaces are: fxp0 vlan0.
  Which one do you wish to configure? (or 'done') [done] <b><i>Enter</i></b>
  Using DNS domainname in.nickh.org
  Using DNS nameservers at 192.168.1.252
  Do you want to do any manual network configuration? [no] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
If you answer "yes" to the "manual network configuration" question, you
will be placed at a shell prompt, where you can configure anything else
that needs configuration, then type "exit" to return back to the install
program.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Password for root account? (will not echo) <i>PaSsWoRd</i>
  Password for root account? (again) <i>PaSsWoRd</i>
</pre></td></tr></table>

<p>
Use a secure password for the root account, remember: on the Internet,
they ARE out to get into your computer, they will be trying lots of
common passwords people think are really clever.

<p>
You will later be given a chance to create an administrative account and
disable remote (SSH) access to the root account, but you still want a
good password on your root account.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Start sshd(8) by default? [yes] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Usually, you will want sshd(8) running, but occasionally you may not.
If your application has no need for sshd(8), there is a small
theoretical security advantage to not having it running.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Start ntpd(8) by default? [no] <b>y</b>
  NTP server? (hostname or 'default') [default] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
You are here given an option of running
<a href="faq6.html#OpenNTPD">OpenNTPD</a>, OpenBSD's NTP implementation.
OpenNTPD is a low-impact way of keeping your computer's clock accurately
synchronized.
The default configuration, using
<a href="http://www.pool.ntp.org">pool.ntp.org</a>, uses a large number
of free-access time servers around the world.

<p>
One reason you may NOT want to run ntpd(8) is if you are running a
dual-boot system mostly using another OS which doesn't use a GMT-set
hardware clock, as you don't want OpenBSD altering the time for your
other OS.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Do you expect to run the X Window System? [yes] <b><i>Enter</i></b>
  Do you want the X Window System to be started by xdm(1)? [no] <b>y</b>
</pre></td></tr></table>

<p>
Not all platforms will ask if you expect to run X, those that do require
a sysctl to be set to use X.
Answering "y" here will modify <tt>/etc/sysctl.conf</tt> to include the
line <tt>machdep.allowaperture=1</tt> or
<tt>machdep.allowaperture=2</tt>, depending on your platform.

<p>
If you do not intend to run X on this system or are not sure, answer 'N'
here, as you can easily change it by editing <tt>/etc/sysctl.conf</tt>
and rebooting, should you need to later.
There is a potential security advantage to leaving this aperture driver
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xf86&amp;sektion=4">xf86(4)</a>
disabled, as the graphics engine on a modern video card could
potentially be used to alter memory beyond the processor's control.
Note that non-graphical applications that require X libraries and
utilities to run do NOT need this sysctl to be set.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Change the default console to com0? [no] <b><i>Enter</i></b>
</pre></td></tr></table>

If you wish to configure a serial console rather than your system's
default (usually a keyboard and monitor), this is your chance.
If you change the default to "y", you will be prompted to set the
bit-rate.
Note that for serial consoles, faster is not always better, taking
your platform's default is highly recommended.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Setup a user? (enter a lower-case loginname, or 'no') [no] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
You are being given an opportunity to create a user OTHER than
root for system maintenance.
This user will be a member of the "wheel" group so they can run
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=su&amp;sektion=1">su(1)</a>
and you will be prompted for a password.

<p>
Note that if you wish to create the user, enter the user's name, not "y"
or "yes".

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  What timezone are you in? ('?' for list) [Canada/Mountain] <b>US/Michigan</b>
</pre></td></tr></table>

<p>
OpenBSD assumes your computer's real-time clock (RTC) is set to GMT, but
you also have to specify what time zone you are in.
There may be several valid answers for your physical location.
Hitting "?" at the prompt will help guide you to finding a valid
time zone name.

<p>
Note that the installer will quite often guess correctly for your
time zone, and you can then just hit "Enter".

<p>
More on setting the time zone <a href="#MoreTimeZone">here</a>.
<a name="backMoreTimeZone"></a>

<a name="InstDisks"></a>
<h3>4.5.3 - Setting up disks</h3>

<i><b>Important Note:</b>
Users with a large hard disk (larger than was commonly available when
your computer was made) will want to see
<a href="faq14.html#LargeDrive">this section</a> before going any
further.</i>

<p>
Laying out your disk appropriately is probably the most difficult part
of an OpenBSD install.

<p>
Setting up disks in OpenBSD varies a bit between platforms.
For <a href="../i386.html">i386</a>, <a href="../amd64.html">amd64</a>,
<a href="../macppc.html">macppc</a>, <a href="../zaurus.html">zaurus</a>
and <a href="../armish.html">armish</a>,
disk setup is done in two stages.
First, the OpenBSD slice of the hard disk is defined using fdisk(8),
then that slice is subdivided into OpenBSD partitions using
disklabel(8).

<p>
Some users may be a little confused by the terminology used here. It
will appear we are using the word "partition" in two different ways.
This observation is correct.
There are two layers of partitioning in the above OpenBSD platforms, the
first, one could consider the Operating System partitioning, which is
how multiple OSs on one computer mark out their own space on the disk,
and the second one is how the OpenBSD partition is sub-partitioned into
individual filesystems.
The first layer is visible as a disk partition to DOS, Windows, and any
other OS that uses this disk layout system, the second layer of
partitioning is visible only to OpenBSD and those OSs which can directly
read an OpenBSD filesystem.

<p>
OpenBSD's new installer attempts to make your disk layout tasks easier
by having a sane default for "general" use.
Note that many people will still want to customize the default, or
use their own disk layout, but new users should probably start with
this configuration until they see what they need to do differently.
Note that the default layout will vary depending on how large your
disk system is.

<p>
For now, we'll take the defaults on our 40G disk.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Available disks are: wd0.
  Which one is the root disk? (or 'done') [wd0]
  Disk: wd0       geometry: 4998/255/63 [80293248 Sectors]
  Offset: 0       Signature: 0xAA55
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   0: 06      0   1   1 -    521 254  63 [          63:     8385867 ] DOS > 32MB
   1: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   2: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   3: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
  Use (W)hole disk or (E)dit the MBR? [whole] <i><b>Enter</b></i>
  Setting OpenBSD MBR partition to whole wd0...done.
</pre></td></tr></table>
Note that this disk has a pre-existing partition on it -- <i>using "whole"
disk will remove it!</i>.

<p>
Setting up the "whole" disk for OpenBSD does a number of important things:
<ul>
<li>erases any existing partitions on the disk
<li>creates an MBR and disk signature so the disk can be booted
<li>Creates an OpenBSD partition using the entire disk
<li>Sets that partition as "active".
</ul>

There are many times when you won't want to do that, including:
<ul>
<li>You wish to retain other OS partitions
<li>You wish to retain "setup", "suspend to disk", or other system
partitions
<li>You wish to build a <a href="#Multibooting">multi-booting</a>
system
</ul>

Note that it is critical that a new (or never-used for booting) drive
has a valid MBR, a valid signature, an OpenBSD partition, and a
partition flagged as "active".
If you don't do these things using the "Use whole disk" option,
you need to manually make sure they get done.

<p>
More information on fdisk partitioning your disk
<a href="#Morefdisk">below</a>.
<a name="BackMorefdisk"></a>

<p>
Now we will break up our OpenBSD fdisk partition into OpenBSD
disk partitions using
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Setting OpenBSD MBR partition to whole wd0...done.
  The auto-allocated layout for wd0 is:
  #                size           offset  fstype [fsize bsize  cpg]
    a:          1024.0M               63  4.2BSD   2048 16384    1 # /
    b:           127.2M          2097215    swap
    c:         39205.7M                0  unused
    d:          2729.1M          2357679  4.2BSD   2048 16384    1 # /tmp
    e:          4223.2M          7946823  4.2BSD   2048 16384    1 # /var
    f:          1252.3M         16595895  4.2BSD   2048 16384    1 # /usr
    g:          1024.0M         19160541  4.2BSD   2048 16384    1 # /usr/X11R6
    h:          3678.7M         21257693  4.2BSD   2048 16384    1 # /usr/local
    i:          2002.4M         28791612  4.2BSD   2048 16384    1 # /usr/src
    j:          2002.4M         32892533  4.2BSD   2048 16384    1 # /usr/obj
    k:         21142.3M         36993454  4.2BSD   2048 16384    1 # /home
  Use (A)uto layout, (E)dit auto layout, or create (C)ustom layout? [a] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
The installer has presented us with its proposed "Auto layout" for
OpenBSD partitions on our disk, which we are going to accept.

<p>
If the proposed layout is not appropriate for your needs, you can,
of course, edit the default or customize it completely, more details
on the disklabel partitioning <a href="#Moredisklabel">below</a>.
<a name="BackMoredisklabel"></a>

<p>
<b>NOTE for re-installers:</b>
The new installer will not clear your old disklabel if you chose
"(C)ustom Layout", but you will need to re-specify each mount point
using the 'm' option in disklabel(8).

<p>
The installer now creates those partitions and creates file systems
on them using
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&amp;sektion=8">newfs(8)</a>,
and mounts them for installation:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  /dev/rwd0a: 1024.0MB in 2097152 sectors of 512 bytes
  6 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0k: 21142.3MB in 43299416 sectors of 512 bytes
  105 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0d: 2729.1MB in 5589144 sectors of 512 bytes
  14 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0f: 1252.3MB in 2564644 sectors of 512 bytes
  7 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0g: 1024.0MB in 2097152 sectors of 512 bytes
  6 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0h: 3678.7MB in 7533916 sectors of 512 bytes
  19 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0j: 2002.4MB in 4100920 sectors of 512 bytes
  10 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0i: 2002.4MB in 4100920 sectors of 512 bytes
  10 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0e: 4223.2MB in 8649072 sectors of 512 bytes
  21 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/wd0a on /mnt type ffs (rw, asynchronous, local)
  /dev/wd0k on /mnt/home type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0d on /mnt/tmp type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0f on /mnt/usr type ffs (rw, asynchronous, local, nodev)
  /dev/wd0g on /mnt/usr/X11R6 type ffs (rw, asynchronous, local, nodev)
  /dev/wd0h on /mnt/usr/local type ffs (rw, asynchronous, local, nodev)
  /dev/wd0j on /mnt/usr/obj type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0i on /mnt/usr/src type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0e on /mnt/var type ffs (rw, asynchronous, local, nodev, nosuid)
</pre></td></tr></table>

<p>

You will note there is a <i>c</i> partition we seem to have ignored.  This
partition is your entire hard disk; don't attempt to alter it.

<a name="InstMedia"></a>
<h3>4.5.4 - Choosing installation media and file sets</h3>

Next, you will get a chance to choose your installation media.
In this case, we will install from an FTP server.
<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Location of sets? (cd disk ftp http or 'done') [ftp] <b><i>Enter</i></b>
  HTTP/FTP proxy URL? (e.g. 'http://proxy:8080', or 'none') [none] <b><i>Enter</i></b>
  Server? (hostname, list#, 'done' or '?') [mirror.example.org] <b>obsd.cec.mtu.edu</b>
</pre></td></tr></table>
If you can't remember your favorite (or any!) mirror's location, the
installer will often be able to come up with a default of a mirror which
will work well for you.
Otherwise, hit "?" to have a list of mirrors displayed, and select the
number of a mirror that will work well for you.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Server directory? [pub/OpenBSD/4.6/i386] <b><i>Enter</i></b>
  Login? [anonymous] <b><i>Enter</i></b>
</pre></td></tr></table>

The public FTP mirrors all support anonymous downloads, of course,
but you may have a local machine which requires a login and password.

<p>
You can now adjust the list of <a href="#Filesets">file sets</a>.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Select sets by entering a set name, a file name pattern or 'all'. De-select
  sets by prepending a '-' to the set name, file name pattern or 'all'. Selected
  sets are labelled '[X]'.
      [X] bsd           [X] etc46.tgz     [X] game46.tgz    [X] xfont46.tgz
      [X] bsd.rd        [X] misc46.tgz    [X] xbase46.tgz   [X] xserv46.tgz
      [ ] bsd.mp        [X] comp46.tgz    [X] xetc46.tgz
      [X] base46.tgz    [X] man46.tgz     [X] xshare46.tgz
  Set name(s)? (or 'abort' or 'done') [done] <b><i>Enter</i></b>
</pre></td></tr></table>


<p>
At a bare minimum, you need to have a kernel (<tt>bsd</tt>), the
base46.tgz and etc46.tgz file sets.
Unless you know what you are doing, stick with the default sets.
You can add and remove file sets using "+" and "-" chars in front
of the file set name, and also use wildcards:
<ul>
<li><tt><b>-comp46.tgz</b></tt> removes <tt>comp46.tgz</tt>
<li><tt><b>+bsd.mp</b></tt> adds bsd.mp
<li><tt><b>-x*</b></tt> removes all X components
</ul>

But again, we'll take the default.
This machine is a single-processor system, so bsd.mp is not installed,
but everything else is.
If it could later be upgraded to a multi-processor system, you might
want to install bsd.mp as well.

<p>
And now, we start our install!
This is the point at which you might want to come back later if you have
a slow computer or Internet connection, though with a fast computer and
local files, this process may take just a couple minutes or less!

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  bsd          100% |*************************************|  7063 KB    00:04
  bsd.rd       100% |*************************************|  5913 KB    00:03
  base46.tgz   100% |*************************************| 47315 KB    01:46
  etc46.tgz    100% |*************************************|   503 KB    00:01
  misc46.tgz   100% |*************************************|  2867 KB    00:06
  comp46.tgz   100% |*************************************| 88555 KB    03:08
  man46.tgz    100% |*************************************|  8047 KB    00:21
  game46.tgz   100% |*************************************|  2558 KB    00:04
  xbase46.tgz  100% |*************************************| 10160 KB    00:21
  xetc46.tgz   100% |*************************************| 69166       00:00
  xshare46.tgz 100% |*************************************|  2861 KB    00:12
  xfont46.tgz  100% |*************************************| 34745 KB    00:57
  xserv46.tgz  100% |*************************************| 19789 KB    00:39
  Location of sets? (cd disk ftp http or 'done') [done] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Yes, it is asking us again where we wish to install things from.
This is so either missed, forgotten or failed file sets can be
re-installed, and also so <a href="#site">custom file sets</a> can be
installed.

<p>
Again, we just take the default, we are done installing files

<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Saving configuration files...done.
  Generating initial host.random file...done.
  Making all device nodes...done.

  CONGRATULATIONS! Your OpenBSD install has been successfully completed!
  To boot the new system, enter 'reboot' at the command prompt.
  When you login to your new system the first time, please read your mail
  using the 'mail' command.

  #
</pre></td></tr></table>

<a name="Inst1stBoot"></a>
<h3>4.5.5 - First boot!</h3>
OpenBSD is now installed on your system and ready for its first
boot, but before you do...

<p>

<h4>Before you reboot</h4>
At this point, your system is installed and ready to be rebooted and
configured for service.  Before doing this, however, it would be wise to
check out the <a href="../errata.html">Errata page</a> to see if there
are any bugs that would immediately impact you.

<p>
A trick you can use for some "before first boot" configuration is to run:
<pre>
    # <b>/mnt/usr/sbin/chroot /mnt</b>
</pre>
at the shell prompt.
This will set your mount points to be what they will be on a normal
reboot of your newly installed system.
You can now do some basic system configuration, such as adding users,
changing mount points, etc.

<h4>After you reboot</h4>

On your first boot, <a href="http://www.openssh.com">SSH</a> keys will
be generated.
On modern computers, this will take a few seconds, you may not even
notice it happening.
On older systems, it may take many minutes, potentially even an hour
or more for really slow systems.

<p>
One of your first things to read after you install your system is
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=afterboot&amp;sektion=8">afterboot(8)</a>.

<p>
You may also find the following links useful:
<ul>
<li><a href="faq10.html#AddDelUser">Adding users in OpenBSD</a>
<li><a href="faq6.html#Setup">Initial Network Setup</a>
<li><a href="faq2.html#ManPages">Man Pages of popular/useful commands</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi">OpenBSD man pages on
  the Web</a>
<li><a href="faq15.html">The OpenBSD Packages and Ports system for
  installing software</a>
</ul>

<a name="InstFinish"></a>
<h3>4.5.6 - One last thing...</h3>

The OpenBSD developers ask you to <a href="#SendDmesg">Send in a copy of
your dmesg</a>.
This is really appreciated by the developers, and ultimately, all users.


<a name="More"></a>
<h2>4.6 - Details for a more complex install</h2>
Sometimes you can't just take the defaults.
Here is some more details on parts of the installation process.

<a name="MoreNetwork"></a>
<h3>4.6.1 - Setting up the network</h3>

If you don't have a DHCP server available, you will have to set up
your network adapter(s) manually.
Here's an example:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Which one do you wish to configure? (or 'done') [xl0] <b><i>Enter</i></b>
  IPv4 address for xl0? (or 'dhcp' or 'none') [dhcp] <b>192.168.1.37</b>
  Netmask? [255.255.255.0] 255.255.254.0
  IPv6 address for xl0? (or 'rtsol' or 'none') [none] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
After that set of questions, you will be given a chance to configure any other
network adapters that your machine has.
If you specify another network adapter here, the above questions repeat.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Available network interfaces are: xl0 vlan0.
  Which one do you wish to configure? (or 'done') [done]
</pre></td></tr></table>

<p>
Now, you will set up the default gateway and DNS servers, things that
impact all network adapters:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Default IPv4 route? (IPv4 address, 'dhcp' or 'none') <b>192.168.1.1</b>
  add net default: gateway 192.168.1.1
  DNS domain name? (e.g. 'bar.com') [my.domain] <b>example.org</b>
  DNS nameservers? (IP address list or 'none') [none] <b>192.168.1.250 192.168.1.251</b>
</pre></td></tr></table>

<p>
Note that multiple DNS servers can be listed, separated by spaces.

<p>
Sometimes, you will have to do something more, for example set up a
wireless access key or hard-set a duplex or speed setting (don't do this
unless you absolutely HAVE to, fixing your switch configuration is a
much better idea!).
You are now given a chance to drop to the shell and do any manual configuration
that you would like.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Do you want to do any manual network configuration? [no] <b>y</b>
  Type 'exit' to return to install.
  # <b>ifconfig xl0 media</b>
  xl0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
          lladdr 00:08:74:2c:df:9c
          groups: egress
          media: Ethernet autoselect (100baseTX full-duplex)
          status: active
          supported media:
                  media 10baseT
                  media 10baseT mediaopt full-duplex
                  media 100baseTX
                  media 100baseTX mediaopt full-duplex
                  media autoselect
          inet 192.168.1.37 netmask 0xfffffe00 broadcast 192.168.1.255
  # <b>ifconfig xl0 media 100baseTX mediaopt full-duplex</b>
  # <b>ifconfig xl0</b>
  xl0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
          lladdr 00:08:74:2c:df:9c
          groups: egress
          media: Ethernet 100baseTX full-duplex
          status: active
          inet6 fe80::208:74ff:fe2c:df9c%xl0 prefixlen 64 scopeid 0x1
          inet 192.168.1.37 netmask 0xfffffe00 broadcast 192.168.1.255
  # <b>exit</b>
<i>...setup resumes...</i>
</pre></td></tr></table>

<p>
<a href="#backMoreNetwork">(back to where we might have been)</a>

<a name="MoreTimeZone"></a>
<h3>4.6.2 - Setting the Time Zone</h3>
Time in Unix is not a simple thing (or put another way, time in Unix is
a <i>really</i> simple thing, human time is a politically manipulated
mess).
Time zone files help the system convert Unix time (the number of seconds
past midnight GMT, Jan 1, 1970) to human time, taking into account things
like time zones, daylight savings time (DST), DST rule changes, etc.
They also include the history of changes.

<p>
Multiple time zone definition files will sometimes give the same
<i>current</i> time, but may have different history.
For example, EST5EDT and US/Michigan have the same time NOW, but back in
1975, the rules were different, so if you were doing math with dates and
times that involved 1975, you would care about the differences.
You should use the most specific and accurate timezone file you can for
your region, rather than one that just gives the correct time at this
moment.

<p>
OpenBSD's installer will help you find an appropriate time zone file for
you if you are not sure.
Simply hit "<tt>?</tt>" at each prompt, and the installer will show you
options.
If the first level of answers doesn't suite you, pick a continent or
country, and look at your options there:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  What timezone are you in? ('?' for list) [right/EST5EDT] <b>?</b>
  Africa/      Chile/       GB-Eire      Israel       NZ-CHAT      UCT
  America/     Cuba         GMT          Jamaica      Navajo       US/
  Antarctica/  EET          GMT+0        Japan        PRC          UTC
  Arctic/      EST          GMT-0        Kwajalein    PST8PDT      Universal
  Asia/        EST5EDT      GMT0         Libya        Pacific/     W-SU
  Atlantic/    Egypt        Greenwich    MET          Poland       WET
  Australia/   Eire         HST          MST          Portugal     Zulu
  Brazil/      Etc/         Hongkong     MST7MDT      ROC          posix/
  CET          Europe/      Iceland      Mexico/      ROK          posixrules
  CST6CDT      Factory      Indian/      Mideast/     Singapore    right/
  Canada/      GB           Iran         NZ           Turkey
  What timezone are you in? ('?' for list) [right/EST5EDT] <b>US</b>
  What sub-timezone of 'US' are you in? ('?' for list) ?
  Alaska          Central         Hawaii          Mountain        Samoa
  Aleutian        East-Indiana    Indiana-Starke  Pacific
  Arizona         Eastern         Michigan        Pacific-New
  What sub-timezone of 'US' are you in? ('?' for list) <b>Michigan</b>
</pre></td></tr></table>

<p>
We've now set the time to "US/Michigan".  This creates a symbolic link in
<tt>/etc</tt> pointing to the appropriate zoneinfo file in
<tt>/usr/share/zoneinfo</tt>, something like this:
<blockquote><pre>
  /etc/localtime -> /usr/share/zoneinfo/US/Michigan
</pre></blockquote>

Note the directory "<tt>right/</tt>", this directory includes leap second
adjustments, but otherwise duplicates the standard zoneinfo choices.
More <a href="faq8.html#NTPerror">here</a>.

<p>
<a href="#backMoreTimeZone">(back to where we might have been)</a>

<a name="Morefdisk"></a>
<h3>4.6.3 - Custom fdisk(8) layout</h3>

Note: only some OpenBSD platforms use fdisk at all, and usually, only
<a href="../i386.html">i386</a> and <a href="../amd64.html">amd64</a>
users will have to worry about getting fancy with fdisk.
Users of most other fdisk(8) using platforms generally don't have to
worry about multibooting or setup/diagnostic partitions.
For this reason, this section is focused on i386 and amd64.

<p>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8">fdisk(8)</a>
is used to mark off the OpenBSD part of your hard disk.
It helps mark off the part of the disk used by OpenBSD from the parts used
by other OSs or system functions.

<p>
If you have a partition on your disk you wish to retain or wish to leave
space for another partition, you will NOT want to chose "(W)hole disk",
but will need to edit the partition table with
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8">fdisk(8)</a>.
More information on manually running fdisk(8) can be found
<a href="faq14.html#fdisk">here</a>.

<b>Before working with any system that has data you don't wish to lose,
make sure you have a good backup.</b>
It is very easy in this process to clobber important data, so make sure
you are ready to get it back, if need be.

<p>
If you are adding OpenBSD to an existing system, you will probably
need to create some free space on your system before installing OpenBSD.
This will usually involve deleting or possibly reducing the size of
existing partitions.
The program <a href="http://gparted.sourceforge.net/">gparted</a>
has been found useful for shrinking the partitions of many popular OSs,
making it possible to install OpenBSD on the freed space.

<p>
In this example, we will assume we are starting with a blank 40G disk
and wish to create a multi-boot system, reserving 5G at the beginning
of the disk for Windows, and the rest for OpenBSD.
Note that a blank drive has to have valid MBR boot code and signature
written to the disk before it can be booted.

<p>
The process is very much the same for working around an existing
partition, you just need to skip over the parts where we create the
Windows partition and worry about installing the MBR boot code.

<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Available disks are: wd0.
  Which one is the root disk? (or 'done') [wd0] <b><i>Enter</i></b>
  MBR has invalid signature; not showing it.
</pre></td></tr></table>
IF the disk had a valid MBR in place, it would show you the existing
partition table, which can be a good way to show if a disk may have
data on it already.
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Use (W)hole disk or (E)dit the MBR? [whole] <b>e</b>

  You will now create a single MBR partition to contain your OpenBSD data. This
  partition must have an id of 'A6'; must *NOT* overlap other partitions; and
  must be marked as the only active partition.  Inside the fdisk command, the
  'manual' command describes all the fdisk commands in detail.

  Disk: wd0       geometry: 4998/255/63 [80293248 Sectors]
  Offset: 0       Signature: 0x0
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   0: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   1: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   2: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   3: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
Enter 'help' for information
fdisk: 1>
</pre></td></tr></table>

First of all notice the fdisk prompt.
The number "1" indicates the first level of partition tables -- if you
were editing an extended partition, it would be "2" (or bigger).
Extended partitions are partitions which have their own sub-partition
table, getting around the IBM AT four partition design limit.
Extended partitions won't be covered here.

<p>
First, we will make partition "0" a 5G Windows partition (using NTFS),
and partition "1" will be our OpenBSD partition using the rest of the
disk.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk: 1> <b>e 0</b>
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   0: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
  Partition id ('0' to disable)  [0 - FF]: [0] (? for help)
</pre></td></tr></table>

<p>
Since we don't know by memory what the partition ID is for NTFS, we hit
"?" here to get a list.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Partition id ('0' to disable)  [0 - FF]: [0] (? for help) <b>?</b>
  Choose from the following Partition id values:
  00 unused         20 Willowsoft     66 NetWare 386    A9 NetBSD
  01 DOS FAT-12     24 NEC DOS        67 Novell         AB MacOS X boot
  02 XENIX /        27 Win Recovery   68 Novell         AF MacOS X HFS+
  03 XENIX /usr     38 Theos          69 Novell         B7 BSDI filesy*
  04 DOS FAT-16     39 Plan 9         70 DiskSecure     B8 BSDI swap
  05 Extended DOS   40 VENIX 286      75 PCIX           BF Solaris
  06 DOS > 32MB     41 Lin/Minux DR   80 Minix (old)    C0 CTOS
  07 NTFS           42 LinuxSwap DR   81 Minix (new)    C1 DRDOSs FAT12
  08 AIX fs         43 Linux DR       82 Linux swap     C4 DRDOSs < 32M
  09 AIX/Coherent   4D QNX 4.2 Pri    83 Linux files*   C6 DRDOSs >=32M
  0A OS/2 Bootmgr   4E QNX 4.2 Sec    84 OS/2 hidden    C7 HPFS Disbled
  0B Win95 FAT-32   4F QNX 4.2 Ter    85 Linux ext.     DB CPM/C.DOS/C*
  0C Win95 FAT32L   50 DM             86 NT FAT VS      DE Dell Maint
  0E DOS FAT-16     51 DM             87 NTFS VS        E1 SpeedStor
  0F Extended LBA   52 CP/M or SysV   8E Linux LVM      E3 SpeedStor
  10 OPUS           53 DM             93 Amoeba FS      E4 SpeedStor
  11 OS/2 hidden    54 Ontrack        94 Amoeba BBT     EB BeOS/i386
  12 Compaq Diag.   55 EZ-Drive       99 Mylex          EE EFI GPT
  14 OS/2 hidden    56 Golden Bow     9F BSDI           EF EFI Sys
  16 OS/2 hidden    5C Priam          A0 NotebookSave   F1 SpeedStor
  17 OS/2 hidden    61 SpeedStor      A5 FreeBSD        F2 DOS 3.3+ Sec
  18 AST swap       63 ISC, HURD, *   A6 OpenBSD        F4 SpeedStor
  19 Willowtech     64 NetWare 2.xx   A7 NEXTSTEP       FF Xenix BBT
  1C ThinkPad Rec   65 NetWare 3.xx   A8 MacOS X
  Partition id ('0' to disable)  [0 - FF]: [0] (? for help) <b>07</b>
</pre></td></tr></table>

<p>
Now we define its starting and ending points:
<p>

<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Do you wish to edit in CHS mode? [n]
</pre></td></tr></table>

<p>
CHS mode allows you to specify disk space in Cylinders, Heads and Sectors.
Keep in mind that for modern hard disks, the CHS numbers are completely
bogus, just three numbers that translate to a sector on the disk, which
is translated to your drives physical geometry (which probably varies
across the disk anyway).

<p>
If you answer "y" here, you will be prompted for the starting and
ending cylinder, head and sector.
If you answer "no" here (as we will), you will be prompted for starting
sector and the size.
Editing by CHS is often easier when working around an existing partition,
starting sector and size is often easier when you want to quickly create
a partition of a given size.

<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  offset: [0] <b>63</b>
</pre></td></tr></table>

<a name="trackoffset"></a>
<p>
The fdisk platforms need a one track gap before the first partition.
One track is one "sectors per track" number of sectors, the last of
the "geometry:" numbers.
It is easy to get in the habit of entering "63" here, as it is common
for modern IDE and SATA disks, but not all disks will use this as
the size of a track, common modern exceptions are SCSI and Flash disks.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  size: [0] <b>5g</b>
  Rounding to nearest cylinder: 10490382
</pre></td></tr></table>

The "Size" value can be the number of sectors (512 bytes each), or the
desired capacity when followed by a "k", "m" or "g".
When editing using offset and size, fdisk will round your partition so
it ends on a cylinder boundary (OpenBSD doesn't care about this, and it
is possible no modern OS cares about this, but some might have at one
time).

<p>
Now, let's look at our new partition:
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> p
  Disk: wd0       geometry: 4998/255/63 [80293248 Sectors]
  Offset: 0       Signature: 0x0
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   0: 07      0   1   1 -    652 254  63 [          63:    10490382 ] NTFS
   1: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   2: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   3: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
  fdisk:*1>
</pre></td></tr></table>

Note that the prompt now includes an "*", this means there are unsaved
changes.

<p>
We've now created our Windows partition.
Note that this partition is so far just reserved space on the disk, it
isn't formatted; no file system exists here.
You will worry about that when you install Windows; we've accomplished
our goal of reserving space for the Windows partition to be created
later.

<p>
Now we create our OpenBSD partition.
In this case, the partition ID will be "A6".

<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> e 1
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   1: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
  Partition id ('0' to disable)  [0 - FF]: [0] (? for help) <b>a6</b>
  Do you wish to edit in CHS mode? [n] <b><i>Enter</i></b>
  offset: [0]
</pre></td></tr></table>

uh-oh!
What's our offset?  Simple -- the offset of the previous partition plus
the size of the partition, in this case, 63+10490382 = 10490445.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  offset: [0] <b>10490445</b>
  size: [0] <b>*</b>
  fdisk:*1>
</pre></td></tr></table>

<p>
Note that here, we entered "*" as the size, meaning "rest of the disk".
Again, we could have entered the size in sectors, "m" or "g" if we
wanted to leave space for something else.

<p>
Now we look at our partition table:

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> <b>p</b>
  Disk: wd0       geometry: 4998/255/63 [80293248 Sectors]
  Offset: 0       Signature: 0x0
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   0: 07      0   1   1 -    652 254  63 [          63:    10490382 ] NTFS
   1: A6    653   0   1 -   4998   5  63 [    10490445:    69802803 ] OpenBSD
   2: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   3: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
  fdisk:*1>
</pre></td></tr></table>

<p>
<b>WE AREN'T DONE YET!</b><br>
This disk is not yet bootable!
As it was a brand new disk, the disk's
<a href="faq14.html#Boot386">MBR</a> was completely blank.
The "Signature: 0x0" message there shows there is not a valid signature
(0xAA55), which indicates there definitely is not a valid boot code.
Of course, you could have a valid signature without valid boot code,
through either random bad luck or damage to the existing boot code, but
an invalid signature pretty well indicates you are lacking boot code, so
we will install it now using the "update" command:

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> <b>update</b>
  Machine code updated.
  fdisk:*1>
</pre></td></tr></table>

<p>
We also have to "flag" a partition as "active" so the boot ROM knows
what partition to boot from:

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> <b>f 1</b>
  Partition 1 marked active.
</pre></td></tr></table>

<p>
Now, let's see how it looks:

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> <b>p</b>
  Disk: wd0       geometry: 4998/255/63 [80293248 Sectors]
  Offset: 0       Signature: 0xAA55
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   0: 07      0   1   1 -    652 254  63 [          63:    10490382 ] NTFS
  *1: A6    653   0   1 -   4998   5  63 [    10490445:    69802803 ] OpenBSD
   2: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   3: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
  fdisk:*1>
</pre></td></tr></table>

<p>
A checklist of things you want to make sure about before you exit
fdisk(8):

<ul>
<li>Valid signature?
<li>non-overlapping partitions?
<li>OpenBSD partition with an "A6" id?
<li>Proper partition (probably OpenBSD) flagged active?
</ul>

<p>
<a href="#BackMorefdisk">(Back to where we may have been)</a>


<a name="Moredisklabel"></a>
<h3>4.6.4 - Custom disklabel layout</h3>

Inside the OpenBSD fdisk(8) partition, we use
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>
to create OpenBSD file system partitions.
OpenBSD labels its file system partitions using sixteen letters, "a"
through "p".
Partition "a" on the boot disk is defined as the root partition,
"b" on the boot disk is the default swap partition.
"c" on all disks is the "whole disk" partition, it is used by programs
that have to have raw access to the physical disk, such as fdisk(8)
and disklabel(8).
The "c" partition is created automatically for you, and should not be
deleted or changed.
The remaining letters are available for you to define mount points on.
You may skip letters, you can define them in any order, and they can be
in any order on the disk (although some platforms do have a requirement
for where the "a" partition is).
You can also leave gaps in the disk that are unallocated, and allocate
them later, or potentially enlarge existing partitions later into that
unallocated space using
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=growfs&amp;sektion=8">growfs(8)</a>.

<p>
All partitions which have native FFS partitions on them should be within
the OpenBSD fdisk(8) partition, however
<a href="faq14.html#foreignfs">non-OpenBSD</a> partitions can (and
usually should) be outside the OpenBSD fdisk partition.

<p>
More information on using disklabel can be found
<a href="faq14.html#disklabel">here</a>.

<p>
More information on the why partitioning is good and strategy for
a good partitioning plan are <a href="#Partitioning">below</a>.

<p>
The new (for 4.6) OpenBSD installer will attempt to auto-partition your
disk in a usable, "general purpose" configuration, based on the size of
your disk.
If your disk is big enough, unused space will be allocated to the
<tt>/home</tt> partition.
While this is often quite useful, it doesn't satisfy all users' needs.

<p>
For our example, we'll assume we are building a static web server
for some of our friends to use.
We have a machine attached to a modest Internet connection, with a 40G
disk, with most of it used for OpenBSD (with the same 5G Windows
partition as the example above.
Why?  Maybe this system has a RAID controller which is supported by
OpenBSD, but manageable only from within Windows.
More likely, because the FAQ editor doesn't feel like maintaining lots
of different example systems).

<p>
The web pages served by an OpenBSD web server will be in
<tt>/var/www</tt>, and very little will be stored in <tt>/home</tt>, so
this indicates a definite change from the default that needs to be made.
For the sake of discussion, we'll also assume that we won't need to
rebuild the OS from source on this machine (we'll do that elsewhere).
The system will not run X, however being that some web applications
<a href="#FilesNeededX">expect X to be installed</a>, we will have X
installed.
The machine is not overly powerful, it can't have more than 1G RAM in
it, and it is unlikely our application will ever desire more than that.

<p>
So, after a bit of thought, our plan is to partition the system like
this:
<ul>
<li><tt>/ - root</tt>: 100m.  This will be 'a'.
<li><tt>swap</tt>: 1G (so we'll always have enough space for a core dump),
   this will be partition 'b'
<li><tt>/usr</tt>: 2g, partition d
<li><tt>/tmp</tt>: 100m (we don't anticipate much use of this), partition e
<li><tt>/usr/local</tt>: 2g, partition f
<li><tt>/usr/X11R6</tt>: 1g, partition g
<li><tt>/home</tt>: 1g, partition h
<li><tt>/var</tt>: 1g (that's a lot of system log files), partition j
<li><tt>/var/www</tt>: rest of disk, partition k
</ul>

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  The auto-allocated layout for wd0 is:
  #                size           offset  fstype [fsize bsize  cpg]
    a:          1024.0M         10490445  4.2BSD   2048 16384    1 # /
    b:           252.1M         12587597    swap
    c:         39205.7M                0  unused
    d:          2319.3M         13103933  4.2BSD   2048 16384    1 # /tmp
    e:          3653.9M         17853877  4.2BSD   2048 16384    1 # /var
    f:          1149.8M         25337016  4.2BSD   2048 16384    1 # /usr
    g:          1024.0M         27691862  4.2BSD   2048 16384    1 # /usr/X11R6
    h:          3422.6M         29789014  4.2BSD   2048 16384    1 # /usr/local
    i:          5122.3M               63    NTFS
    j:          1848.7M         36798433  4.2BSD   2048 16384    1 # /usr/src
    k:          1848.7M         40584654  4.2BSD   2048 16384    1 # /usr/obj
    l:         17540.2M         44370875  4.2BSD   2048 16384    1 # /home
  Use (A)uto layout, (E)dit auto layout, or create (C)ustom layout? [a] <b>c</b>
</pre></td></tr></table>

<p>
If we had only minor revisions, we'd probably opt to "Edit" the custom
layout rather than starting from a clean slate, but we are going to do
things the hard way here.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  You will now create an OpenBSD disklabel inside the OpenBSD MBR
  partition. The disklabel defines how OpenBSD splits up the MBR partition
  into OpenBSD partitions in which filesystems and swap space are created.
  You must provide each filesystem's mountpoint in this program.

  The offsets used in the disklabel are ABSOLUTE, i.e. relative to the
  start of the disk, NOT the start of the OpenBSD MBR partition.

  Label editor (enter '?' for help at any prompt)
  > <b>p</b>
  OpenBSD area: 10490445-80293248; size: 69802803; free: 69802803
  #                size           offset  fstype [fsize bsize  cpg]
    c:         80293248                0  unused
    i:         10490382               63    NTFS
  >
</pre></td></tr></table>

<p>
Note there are already two partitions here -- the "c" partition which is
always there and created for you, but disklabel(8) has also noticed the
existing NTFS partition and assigned it a disklabel partition so it
could potentially be accessed by OpenBSD (note, at this time, NTFS
support is experimental and requires a custom kernel but FAT/FAT32
support is quite good).

<p>
We will now create our partitions.
We will start with the "a" partition, our root partition:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  > <b>a a</b>
  offset: [10490445] <b><i>Enter</i></b>
  size: [69802803] <b>100m</b>
  Rounding to cylinder: 208845
  FS type: [4.2BSD]  <b><i>Enter</i></b>
  mount point: [none] <b>/</b>
  >
</pre></td></tr></table>

Note that disklabel defaulted to the first available OpenBSD sector on
the disk, which is what we want.
It also defaulted to a size of all available space, which is NOT what we
want.
Here we overrode it with our preferred size, which can be specified in
sectors, "M" or "G".

<p>
You will usually want to use the default FS type of "4.2BSD" for a
FFS (Fast File System) or FFS2 partition, though other types you may find
useful include "swap" and "RAID".

<p>
Finally is the mount point.
Our "a" partition is the root partition, by definition.

<p>
Now, we do swap, which is our 'b' partition (again, this is a
requirement -- 'b' on your boot disk is swap):

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  > <b>a b</b>
  offset: [10699290] <b><i>Enter</i></b>
  size: [69593958] <b>1g</b>
  Rounding to cylinder: 2104515
  FS type: [swap] <b><i>Enter</i></b>
  >
</pre></td></tr></table>

<p>
Again, disklabel correctly calculated our starting sector, and presented
us with a suggested size of "entire remaining space", which we again
overrode with our desired size.
Since this is the 'b' partition, disklabel assumed it was to be used
for swap, and when we confirmed that, it didn't bother to ask us a
mount point.

<p>
We are now ready to create the rest of the partitions.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  > <b>a d</b>
  offset: [12803805] <b><i>Enter</i></b>
  size: [67489443] <b>2g</b>
  Rounding to cylinder: 4209030
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/usr</b>
  > <b>a e</b>
  offset: [17012835] <b><i>Enter</i></b>
  size: [63280413] <b>100m</b>
  Rounding to cylinder: 208845
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/tmp</b>
  > <b>a f</b>
  offset: [17221680] <b><i>Enter</i></b>
  size: [63071568] <b>2g</b>
  Rounding to cylinder: 4209030
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/usr/local</b>
  > <b>a g</b>
  offset: [21430710] <b><i>Enter</i></b>
  size: [58862538] <b>1g</b>
  Rounding to cylinder: 2104515
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/usr/X11R6</b>
  > <b>a h</b>
  offset: [23535225] <b><i>Enter</i></b>
  size: [56758023] <b>1g</b>
  Rounding to cylinder: 2104515
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/home</b>
  > <b>a j</b>
  offset: [25639740] <b><i>Enter</i></b>
  size: [54653508] <b>1g</b>
  Rounding to cylinder: 2104515
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/var</b>
  > <b>a k</b>
  offset: [27744255] <b><i>Enter</i></b>
  size: [52548993] <b><i>Enter</i></b>
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/var/www</b>
  >
</pre></td></tr></table>

<p>
Note that on the <tt>/var/www</tt> partition ("k"), we just took the
default to use all remaining available disk space.
With modern monstrously huge drives, this is usually a bad idea.
If you know you will never use it, don't allocate it, and save it for
some future use.

<p>
Now, let's look at our results, using the "p" and "p m" commands:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  > <b>p</b>
  OpenBSD area: 10490445-80293248; size: 69802803; free: 0
  #                size           offset  fstype [fsize bsize  cpg]
    a:           208845         10490445  4.2BSD   2048 16384    1 # /
    b:          2104515         10699290    swap
    c:         80293248                0  unused
    d:          4209030         12803805  4.2BSD   2048 16384    1 # /usr
    e:           208845         17012835  4.2BSD   2048 16384    1 # /tmp
    f:          4209030         17221680  4.2BSD   2048 16384    1 # /usr/local
    g:          2104515         21430710  4.2BSD   2048 16384    1 # /usr/X11R6
    h:          2104515         23535225  4.2BSD   2048 16384    1 # /home
    i:         10490382               63    NTFS
    j:          2104515         25639740  4.2BSD   2048 16384    1 # /var
    k:         52548993         27744255  4.2BSD   2048 16384    1 # /var/www
  > <b>p m</b>
  OpenBSD area: 10490445-80293248; size: 34083.4M; free: 0.0M
    #                size           offset  fstype [fsize bsize  cpg]
    a:           102.0M         10490445  4.2BSD   2048 16384    1 # /
    b:          1027.6M         10699290    swap
    c:         39205.7M                0  unused
    d:          2055.2M         12803805  4.2BSD   2048 16384    1 # /usr
    e:           102.0M         17012835  4.2BSD   2048 16384    1 # /tmp
    f:          2055.2M         17221680  4.2BSD   2048 16384    1 # /usr/local
    g:          1027.6M         21430710  4.2BSD   2048 16384    1 # /usr/X11R6
    h:          1027.6M         23535225  4.2BSD   2048 16384    1 # /home
    i:          5122.3M               63    NTFS
    j:          1027.6M         25639740  4.2BSD   2048 16384    1 # /var
    k:         25658.7M         27744255  4.2BSD   2048 16384    1 # /var/www
  >
</pre></td></tr></table>

<p>
Like with fdisk, you don't want your OpenBSD disklabel partitions to
overlap (other than the 'c' partition, which overlaps everything, of
course).

<p>
Write your changes and quit disklabel:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  > <b>w</b>
  > <b>q</b>
  No label changes.
  newfs: reduced number of fragments per cylinder group from 13048 to 12992 to
  enlarge last cylinder group
  /dev/rwd0a: 102.0MB in 208844 sectors of 512 bytes
  5 cylinder groups of 25.38MB, 1624 blocks, 3328 inodes each
  /dev/rwd0h: 1027.6MB in 2104512 sectors of 512 bytes
  6 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  newfs: reduced number of fragments per cylinder group from 13048 to 12992 to
  enlarge last cylinder group
  /dev/rwd0e: 102.0MB in 208844 sectors of 512 bytes
  5 cylinder groups of 25.38MB, 1624 blocks, 3328 inodes each
  /dev/rwd0d: 2055.2MB in 4209028 sectors of 512 bytes
  11 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0g: 1027.6MB in 2104512 sectors of 512 bytes
  6 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0f: 2055.2MB in 4209028 sectors of 512 bytes
  11 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0j: 1027.6MB in 2104512 sectors of 512 bytes
  6 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0k: 25658.7MB in 52548992 sectors of 512 bytes
  127 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/wd0a on /mnt type ffs (rw, asynchronous, local)
  /dev/wd0h on /mnt/home type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0e on /mnt/tmp type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0d on /mnt/usr type ffs (rw, asynchronous, local, nodev)
  /dev/wd0g on /mnt/usr/X11R6 type ffs (rw, asynchronous, local, nodev)
  /dev/wd0f on /mnt/usr/local type ffs (rw, asynchronous, local, nodev)
  /dev/wd0j on /mnt/var type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0k on /mnt/var/www type ffs (rw, asynchronous, local, nodev, nosuid)

  Let's install the sets!
...
</pre></td></tr></table>

<p>
<a href="#BackMoredisklabel">(Back to where we may have been)</a>

<p>
<a name= "FilesNeeded"></a>
<h2>4.7 - What files are needed for installation?</h2>
<!-- XXXrelease -->

<p>
The complete OpenBSD installation is broken up into a number of
separate <i>file sets</i>.
Not every application requires every file set, however new users are
recommended to install ALL of them.

Here is an overview of each:
<p>
<ul>
  <li><b><i>bsd</i></b>          - This is the Kernel. <b>Required</b>
  <li><b><i>bsd.mp</i></b> - Multi-processor (SMP) kernel (only some
     platforms)
  <li><b><i>bsd.rd</i></b> - <a href="#bsd.rd">RAM disk kernel</a>
  <li><b><i>base46.tgz</i></b>   - Contains the base OpenBSD system
    <b>Required</b>
  <li><b><i>etc46.tgz</i></b>    - Contains all the files in /etc
    <b>Required</b>
  <li><b><i>comp46.tgz</i></b>    - Contains the compiler and its
    tools, headers and libraries.
  <li><b><i>man46.tgz</i></b>    - Contains man pages
  <li><b><i>misc46.tgz</i></b>   - Contains misc info, setup documentation
  <li><b><i>game46.tgz</i></b>   - Contains the games for OpenBSD
  <li><b><i>xbase46.tgz</i></b>  - Contains the base libraries and
    utilities for X11
  <li><b><i>xetc46.tgz</i></b>   - Contains the /etc/X11 and /etc/fonts
    configuration files
  <li><b><i>xfont46.tgz</i></b>  - Contains X11's font server and fonts
  <li><b><i>xserv46.tgz</i></b>  - Contains X11's X servers
  <li><b><i>xshare46.tgz</i></b> - Contains manpages, locale settings,
    includes, etc. for X
</ul>

The <b>etc46.tgz</b> and <b>xetc46.tgz</b> sets are not installed as
part of an upgrade, only as part of a complete install, so any
customizations you make will not be lost.
You will have to update your <tt>/etc</tt>, <tt>/dev</tt> and
<tt>/var</tt> directories manually.

<a name="FilesNeededX"></a>
<h3>Why do I have to install X for my non-graphical application?</h3>
Even if you have no intention of running X, some third party
<a href="faq15.html">packages</a> require the libraries or other
utilities in X to be installed on your system.
These applications can sometimes be satisfied simply by installing
just xbase46.tgz, the rest of X is not always needed.
Many people resist installing X on their system without valid reason:


<ul>
<li>By itself, installing X does not cause any program to
execute on the system.
<li>By itself, installing X on a system does not change the
risk of external security issues.
<li>If someone is already ON your system, they can most likely install
whatever they wish, so the presence or absence of the X
does not appreciably change the situation.
<li>The only parts of X that are running are the parts
required by your application.
<li>The space required for X is relatively modest on modern hardware.
</ul>

People sometimes waste a lot of time and effort trying to pick through
xbase46.tgz and pull out just the files they need to install their
application.
This is not only pointless, but an effort that would have to be
repeated for each upgrade cycle, which probably means you will not
upgrade your system properly, creating REAL security problems.

<p>
IF you need X, just install it.
It won't hurt you any more than the application you are needing it
for will.


<a name="FilesNeededComp"></a>
<h3>I don't want to install the compilers</h3>
Ok, don't, but please don't tell yourself this is for "security
reasons".
By the time someone is far enough into your system that the presence or
absence of the compiler matters, they are far enough in they can install
a compiler themselves.
However, the compXX.tgz file set is relatively big and has a lot of
files in it, so it can take a while to install and upgrade, and on
slow or small systems, this can matter.

<p>
If you do decide to not install the compiler, you will probably need
another system to maintain and build updated software on.
There are far more systems that have been compromised because of
improper maintenance than there have been because a compiler was
installed.

<p>
<a name="Partitioning"></a>
<h2> 4.8 - How should I partition my disk?</h2>
<!-- XXXrelease -->

<p>
Obviously, the answer to this question varies tremendously based on your
use of the system.
OpenBSD can be installed in as little as 512M, but installing to that
small of a device is something for advanced users.
Until you have some experience, a 4G to 8G HD is recommended to start
with.

<p>
Unlike many other OSs, OpenBSD encourages users to partition their
disk into a number of partitions, rather than having just one or two
big partitions.
There are a number of reasons to partition your disk:

<ul>
<li><b>Security:</b> You can mark some filesystems as 'nosuid', 'nodev',
  'noexec', 'readonly', etc.
  This is done for you by the install process, if you use the
  recommended partitions.
<li><b>Stability:</b> A user, or a misbehaved program, can fill a
  filesystem with garbage if they have write permissions for it.  Your
  critical programs, which hopefully run on a different filesystem, do
  not get interrupted.
<li><b>Speed:</b> A filesystem which gets written to frequently may get
  somewhat fragmented.  (Luckily, the ffs filesystem that OpenBSD uses
  is not prone to heavy fragmentation.)
<li><b>Integrity:</b> If one filesystem is corrupted for some reason
  then your other filesystems are most likely still OK.
<li><b>Size:</b> Many machines have limits on the area of a disk where
  the boot ROM can load the kernel from.  In some cases, this limit may
  be very small (504M for an older 486), in other cases, a much larger
  limit (for example, 2G, 8G, or 128G on i386 systems).  As the kernel
  can end up anywhere within the root partition, the entire root
  partition should be within this area.  For more details, see <a
  href="faq14.html#LargeDrive">this section</a>.  A good guideline might
  be to keep your / partition completely below 2G, unless you know your
  platform (and particular machine) can handle more (or less) than that.
<li><b>Read-only:</b> You can mount partitions that you never or
  rarely need to write to as "Read-only" most of the time, which will
  eliminate the need for fsck(8) after a crash or power interruption,
  and may help prevent unintended data alteration.
<li><b>fsck(8):</b> Very large partitions require more RAM to
  fsck(8), and on small-memory systems, you can end up having to use
  swap, resulting in very long fsck times.
</ul>

Given sufficient disk space, OpenBSD's installer will default to the
following partitions:

<ul>
<li><b>/ - root:</b>
In addition to being where the other file systems are mounted,
the root file system holds all the files needed to boot OpenBSD.
This includes the kernel, plus the basic utilities in <tt>/sbin</tt> and
<tt>/bin</tt>, the configuration files in <tt>/etc</tt>, and the device
directory, <tt>/dev</tt> which are all used to bring up the system.
The root file system can be as small as 60M, though 100M to 200M is
easier for a machine that will last through many upgrade cycles.
The 'a' partition of your boot drive becomes your root partition
automatically.
SOME platforms place restrictions on the physical location on the
disk (i.e., must be at start of disk) in order to boot.

<li><b>Swap:</b>
In addition to swap, this partition is also used for storing core dumps
after system crashes, so it is suggested that the swap space (if set
up at all) be bigger than the largest amount of RAM you are likely to
ever install on the machine.
Read more about this in <a href="faq14.html#Swap">FAQ 14, Swap</a>.

<li><b>/tmp:</b>
This is a world-writeable directory used for (as the name implies!)
temporary storage.
Most systems can get by with very modest amounts of storage here, 50M is
usually many times what you should ever need, though there are a few
applications which can use much, much more.
While this directory is world-writable, when it is a separate partition,
OpenBSD defaults to mounting it nodev and nosuid, which minimizes how
it can be used to abuse your system
Note that this directory is cleared on reboot, and files left untouched
over 24 hours are cleared nightly.

<li><b>/var:</b>
This directory and mount point is used for a LOT of things, and depending
on your uses, may be a prime candidate to subdivide into more partitions.
Some of the things that end up here (and potential additional mount points):
<ul>
  <li><tt>/var/log</tt>: System logs.
  <li><tt>/var/mail</tt>: Incoming mail boxes.
  <li><tt>/var/spool</tt>: Outgoing mail (and other things)
  <li><tt>/var/www</tt>: OpenBSD's
     <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8">web server</a>
     lives here.
  <li><tt>/var/tmp</tt>: This is a "persistent" temporary file directory,
     as files placed here are NOT purged on reboot.
     For example, vi(1) uses this directory for temporary storage, so
     if your computer crashes or is rebooted while you are editing a file,
     the files here can be used to recover your editing session.
     Files left here over 24 hours though will be purged by the nightly
     cleanup scripts,
     <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=daily&amp;sektion=8">daily(8)</a>.
   <li><tt>/var/crash</tt>: If the system panics, it will attempt to
     save a core dump in the swap partition before rebooting.
     This core dump will then be saved to <tt>/var/crash</tt> upon
     reboot, so <tt>/var</tt> will need at least as much free space as
     the system has RAM for this to work automatically.
   </ul>

<li><b>/usr:</b>
This is where most of OpenBSD resides.
Program binaries, libraries, documentation, manual pages, etc. are all
located in the <tt>/usr</tt> directory.
The files in this mount point are relatively unchanging -- in many
cases, you could easily mount the <tt>/usr</tt> partition read-only with
no other system changes until your next upgrade or update.

<li><b>/usr/X11R6:</b>
This is where the X Window system resides.
The X binaries, font files, libraries, etc. all are here.
The only part of X not here is the configuration files.

<li><b>/usr/local:</b>
On a default OpenBSD installation, this mount point/directory is
completely empty.
It is used for locally installed binaries and libraries for local
applications.

<li><b>/usr/src:</b>
This directory holds the basic system source files, excluding X and
ports.
This directory is empty by default, you have to load it as detailed in
<a href="faq5.html#BldGetSrc">FAQ 5</a>.

<li><b>/usr/obj:</b>
This directory is populated during the build process with the object
and binary files.
Having this directory a separate mount point allows it to be formatted
rather than erased file by file, which can be significantly faster.

<li><b>/home:</b>
This is where user files go.
Having this a separate partition makes it easy to completely reinstall
your system; simply don't format this partition on reload.
</ul>

<p>
Some additional thoughts on partitioning:
<ul>
 <li>For your first attempt at an experimentation system, one big
   <tt>/</tt> partition and swap may be easiest until you know how much
   space you need. By doing this you will be sacrificing some of the
   default security features of OpenBSD that require separate
   filesystems for <tt>/, /tmp, /var, /usr</tt> and <tt>/home</tt>.
   However, you probably should not be going into production with your
   first OpenBSD install.
 <li>A system exposed to the Internet or other hostile forces should
   have a separate <tt>/var</tt> (and maybe even a separate
   <tt>/var/log</tt>) for logging.
 <li>A <tt>/home</tt> partition can be nice.  New version of the OS?
   Wipe and reload everything else, leave your <tt>/home</tt> partition
   untouched.  Remember to save a copy of your configuration files,
   though!
 <li>A separate partition for anything which may accumulate a large
   quantity of files that may need to be deleted can be faster to
   reformat and recreate than to delete.  See the <a
   href="faq5.html#ProbObjPt">building by source FAQ</a> for an example
   (<tt>/usr/obj</tt>).
 <li>If you wish to rebuild your system from source for any reason,
   the source will be in <tt>/usr/src</tt>.  If you don't make a
   separate partition for <tt>/usr/src</tt>, make sure <tt>/usr</tt> has
   sufficient space.
 <li>A commonly forgotten fact: you do <b>not</b> have to allocate
   all space on a drive when you set the system up! Since  you will now
   find it a challenge to buy a new drive smaller than 100G, it can make
   sense to leave a chunk of your drive unallocated.  If you outgrow a
   partition, you can allocate a new partition from your unused space,
   <a href="faq10.html#DupFS">duplicate</a> your existing partition to
   the new partition, change
   <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&amp;sektion=5">/etc/fstab</a>
   to point to the new partition, remount, you now have more space.
 <li>If you make your partitions too close to the minimum size required,
   you will probably regret it later, when it is time to upgrade your
   system.
 <li>If you make very large partitions, keep in mind that performing
   filesystem checks using
   <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fsck&amp;sektion=8">fsck(8)</a>
   requires about 1M of RAM per gigabyte of filesystem size, and may be
   very time-consuming or not even feasible on older, slower systems
   (please also refer to <a href="faq14.html#LargeDrive">this section</a>).
 <li>If you permit users to write to <tt>/var/www</tt> (i.e., personal
   web pages), you might wish to put it on a separate partition, so you
   can use <a href="faq10.html#Quotas">quotas</a> to restrict the space
   they use, and if they fill the partition, no other parts of your
   system will be impacted.
 <li>You may also want to create an <tt>/altroot</tt> partition, as
   described in
   <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=daily&amp;sektion=8">daily(8)</a>.
   This can make a daily copy of your <tt>/</tt> partition, giving you
   an extra copy of your kernel and <tt>/etc</tt> configuration files should
   something happen to your root partition.
   Obviously, the <tt>/altroot</tt> partition needs to be at least as big
   as <tt>/</tt>.
   If you have a second drive and have something else duplicating the
   rest of your disk, either software
   <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raid&amp;sektion=4">raid(4)</a>
   or a periodic copy using
   <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&amp;sektion=8">dump(8)</a
   >/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore(8)</a>,
   this disk can be bootable after the removal of the primary disk.
 <li>Compiling some <a href="faq15.html#Ports">ports</a> from source
   can take huge amounts of space on your <tt>/usr</tt> and <tt>/tmp</tt>
   partitions.
   This is another reason we suggest using
   <a href="faq15.html#PkgMgmt">pre-compiled packages</a> instead.
 <li>At least some editors use <tt>/var/tmp</tt> for scratch space, and
   this often needs to be as big or bigger than the largest file you edit.
   If you plan on editing 500M files, your <tt>/var</tt> or
   <tt>/var/tmp</tt> partition will need to be much larger than your
   might have planned on.

</ul>


<p>
<a name= "Multibooting"></a>
<h2>4.9 - Multibooting OpenBSD/i386</h2>

Multibooting is having several operating systems on one computer, and
some means of selecting which OS is to boot.  It is <i>not</i> a
trivial task!  If you don't understand what you are doing, you may
end up deleting large amounts of data from your computer.  New OpenBSD
users are <i>strongly</i> encouraged to start with a blank hard drive on a
dedicated machine, and then practice your desired configuration on a
non-production system before attempting a multiboot configuration on a
production machine.  <a href="faq14.html">FAQ 14</a> has more
information about the OpenBSD boot process.

<p>
Preferably use one of the four <i>primary</i> MBR partitions for
booting OpenBSD (i.e., extended partitions may not work).

<p>
Note that Windows 7 and Vista can resize their system partitions: go
to the Control Panel, search for "partition", and enter the corresponding
system tool.  Right click on a partition, and you will notice you can shrink
it.  Its main limitation is that the Windows Exchange File can't be moved,
so if you need more space, you may have to move/disable it.

<p>
Here are several options to multibooting:

<h3>Setting active partitions</h3>
This is probably the most overlooked, and yet, sometimes the best
solution for multibooting.  Simply set the active partition in whatever
OS you are currently using to be the one you want to boot by default
when you next boot.  Virtually every OS offers a program to do
this; OpenBSD's is <a href="faq14.html#fdisk">fdisk(8)</a>, similar
named programs are in Windows 9x and DOS, and many other operating
systems.  This can be highly desirable for OSs or systems which take a
long time to shut down and reboot -- you can set it and start the reboot
process, then walk away, grab a cup of coffee, and come back to the system
booted the way you want it -- no waiting for the Magic Moment to select
the next OS.

<h3>Boot floppy</h3>
If you have a system that is used to boot OpenBSD infrequently (or don't
wish other users of the computer to note anything has changed), consider
using a boot floppy.  Simply use one of the <a href="#MkFlop">standard
OpenBSD install floppies</a>, and create an <tt>/etc/boot.conf</tt> file
(yes, you will also have to create an <tt>/etc</tt> directory on the
floppy) with the contents:

<pre>
     boot hd0a:/bsd
</pre>

to cause the system to boot from hard drive 0, OpenBSD partition 'a',
kernel file <tt>/bsd</tt>.  Note you can also boot from other drives
with a line like: "<tt>boot hd2a:/bsd</tt>" to boot off the third
hard drive on your system.  To boot from OpenBSD, slip your floppy in,
reboot.  To boot from the other OS, eject the floppy, reboot.
(You can, of course, use this floppy to make a bootable CD, too.)

<p>
The
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">boot(8)</a>
program is loaded from the floppy, looks for and reads
<tt>/etc/boot.conf</tt>.  The "<tt>boot hd0a:/bsd</tt>" line instructs
boot(8) where to load the kernel from -- in this case, the first HD the
BIOS sees.  Keep in mind, only a small file (<tt>/boot</tt>) is loaded
from the floppy -- the system loads the entire kernel off the hard disk,
so this only adds about five seconds to the boot process.

<h3>Windows NT/2000/XP NTLDR</h3>

To multiboot OpenBSD and Windows NT/2000/XP, you can use NTLDR, the
boot loader that NT uses. To multi-boot with NT,  you need a copy of your
OpenBSD Partition Boot Record (PBR). After running installboot, you can
copy it to a file using
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=1">dd(1)</a>,
following a process similar to:

<pre>
	# <strong>dd if=/dev/rsd0a of=openbsd.pbr bs=512 count=1</strong>
</pre>

Note: this is a really good time to remind you that blindly typing commands
in you don't understand is a really bad idea.
This line will not work directly on most computers.
It is left to the reader to adapt it to their machine.

<p>
Now boot NT and put <tt>openbsd.pbr</tt> in C:. Add a line like this to
the end of <tt>C:\BOOT.INI</tt>:

<pre>
	c:\openbsd.pbr="OpenBSD"
</pre>

<p>
When you reboot, you should be able to select OpenBSD from the NT loader
menu. There is much more information available about NTLDR at the
<a href="http://www.tburke.net/info/ntldr/ntldr_hacking_guide.htm">NTLDR
Hacking Guide</a>.

<p>
On Windows XP you can also edit the boot information using the GUI; see the
<a href="http://support.microsoft.com/default.aspx?scid=kb;en-us;289022">XP Boot.ini HOWTO</a>.

<p>
Programs that do much of this for you are available, for example,
<a href="http://www.winimage.com/bootpart.htm">BootPart</a>.
This program can be run from Windows NT/2000/XP, and will fetch
the OpenBSD PBR, place it on your NT/2000/XP partition, and will
add it to <tt>C:\BOOT.INI</tt>.

<p>
Note: The Windows NT/2000/XP  boot loader is only capable of booting OSs
from the primary hard drive.
You can not use it to load OpenBSD from the second drive on a system.

<h3>Windows Vista</h3>

<p>
With Vista, Microsoft dropped NTLDR support in favor of their newer Boot
Configuration Data (BCD) store used for controlling the boot
environment.  Since <tt>BOOT.INI</tt> is no longer available for
customization, a command-line utility, <tt>bcdedit</tt>, takes its
place.

<p>
Once OpenBSD's PBR is copied to Vista's system partition, the following
three commands are required to select and boot OpenBSD when the system
is restarted:

<p>
<blockquote><pre>
C:\Windows\system32> bcdedit /create /d "OpenBSD/i386 4.6" /application bootsector
The entry {05a763ce-d81b-11db-b3ec-000000000000} was successfully created.

C:\Windows\System32>
</pre></blockquote>

<p>
The GUID returned here, <tt>05a763ce-d81b-11db-b3ec-000000000000</tt>,
is shown for illustrative reasons.  Take note of the GUID displayed
when you run this command as this value will need to be copied into
the following commands.  Simply copying the GUID shown above will not
work.

<p>
The following two commands are also required:

<p>
<blockquote><pre>
C:\Windows\system32> bcdedit /set {05a763ce-d81b-11db-b3ec-000000000000} device boot
The operation completed successfully.

C:\Windows\system32> bcdedit /set {05a763ce-d81b-11db-b3ec-000000000000} path \openbsd.pbr
The operation completed successfully.

C:\Windows\system32>
</pre></blockquote>

<p>This must be run in a shell with administrative privileges.
Once you've located cmd.exe, right click to be able to select 
"run as administrator".

<p>
Note the absolute pathname of the imported PBR file. Do not add a drive
letter as it is assumed that the file is placed in the system partition.
<tt>bcdedit</tt> will not complain about an explicit drive
specification, but the boot manager will later balk claiming that it
cannot resolve the designated pathname.

<p>
Upon rebooting, Vista will be listed first in the boot manager
ultimately followed by OpenBSD.  Selecting either entry will boot the
corresponding operating system.

<p>
If nothing happens, look around in the control panel for boot information.
Most likely, your Windows boot is set up with no delay, so you don't see the
boot menu. You can also use this to boot OpenBSD by default.

<p>
For more information, consult <tt>bcdedit</tt>'s help by issuing:

<p>
<blockquote><pre>
C:\Windows\system32> bcdedit /?
</pre></blockquote>

<p>
or by searching Microsoft's documentation and Website.  A good
introduction can be found in this TechNet
<a href="http://technet.microsoft.com/en-us/library/cc721886%28WS.10%29.aspx">
Frequently Asked Questions</a> article.

<p>
For those who find manual configuration daunting,
<a href="http://neosmart.net/dl.php?id=1">EasyBCD</a> provides a GUI
alternative.

<h3>Windows 7</h3>

<p>
Microsoft has enhanced BCD since releasing Vista to allow multiple
versions of Windows to be booted through <tt>bcdedit</tt>.  Because of
this greater control, five commands are required to configure a
multiboot environment with OpenBSD.

<p>
After copying OpenBSD's PBR into Windows 7's system partition, issue
the following command to initialize the needed registry hive:

<p>
<blockquote><pre>
C:\Windows\system32> bcdedit /create /d "OpenBSD/i386 4.6" /application bootsector
The entry {0154a872-3d41-11de-bd67-a7060316bbb1} was successfully created.

C:\Windows\system32>
</pre></blockquote>

<p>
As admonished before, the
<tt>{0154a872-3d41-11de-bd67-a7060316bbb1}</tt> GUID is
system-dependent.  Note the value you receive when executing, and copy
it into the following commands:

<p>
<blockquote><pre>
C:\Windows\system32> bcdedit /set {0154a872-3d41-11de-bd67-a7060316bbb1} device boot
The operation completed successfully.

C:\Windows\system32> bcdedit /set {0154a872-3d41-11de-bd67-a7060316bbb1} path \openbsd.pbr
The operation completed successfully.

C:\Windows\system32> bcdedit /set {0154a872-3d41-11de-bd67-a7060316bbb1} device partition=c:
The operation completed successfully.

C:\Windows\system32> bcdedit /displayorder {0154a872-3d41-11de-bd67-7060316bbb1} /addlast
The operation completed successfully.

C:\Windows\system32>
</pre></blockquote>

<p>
At the time of writing, Windows 7 had not been officially released.
It would be prudent for users to consult Microsoft's documentation and
Website for more current information.  Details may have changed.

<h3>Other boot loaders</h3>

<p>
Some other bootloaders OpenBSD users have used successfully include
<a href="http://gag.sourceforge.net/">GAG</a>,
<a href="http://www.ranish.com/part/">The Ranish Partition Manager</a>,
<a href="http://refit.sourceforge.net/">rEFIt</a>,
and <a href="http://www.gnu.org/software/grub/">GRUB</a>.

<p>
<h3>OpenBSD and Linux (i386)</h3>
<!-- XXXversion -->

<p>
Please refer to
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.6/i386/INSTALL.linux">INSTALL.linux</a>,
which gives in depth instructions on getting OpenBSD working with Linux.

<h3>Time zone issues</h3>
OpenBSD expects the computer's real-time clock to be set to UTC
(Universal Coordinated Time).
Some other OSs expect the real-time clock to be set to local time.
Obviously, this can create a bit of a problem if you are using both
OSs on the same computer.
One or the other is most likely going to have to be adapted.
More info on doing this is in <a href="faq8.html#TimeZone">FAQ 8 - Why
is my clock off by several hours?</a>

<a name= "SendDmesg"></a>
<h2>4.10 - Sending your dmesg to dmesg@@openbsd.org after the install</h2>

<p>
Just to remind people, it's important for the OpenBSD developers to keep
track of what hardware works, and what hardware doesn't work perfectly,
including the hardware sensors that are found in machines.

<p>
A quote from /usr/src/etc/root/root.mail
<blockquote><pre>
If you wish to ensure that OpenBSD runs better on your machines, please do us
a favor (after you have your mail system configured!) and type something like:
 # (dmesg; sysctl hw.sensors) | \
        mail -s "Sony VAIO 505R laptop, apm works OK" dmesg@@openbsd.org
so that we can see what kinds of configurations people are running.  As shown,
including a bit of information about your machine in the subject or the body
can help us even further.  We will use this information to improve device driver
support in future releases.  (Please do this using the supplied GENERIC kernel,
not for a custom compiled kernel, unless you're unable to boot the GENERIC
kernel.  If you have a multi-processor machine, dmesg results of both GENERIC.MP
and GENERIC kernels are appreciated.)  The device driver information we get from
this helps us fix existing drivers. Thank you!
</pre></blockquote>

<p>
Make sure you send email from an account that is able to also receive
email so developers can contact you if they have something they
want you to test or change in order to get your setup working. It's not
important at all to send the email from the same machine that is running
OpenBSD, so if that machine is unable to receive email, just

<pre>
$ (dmesg; sysctl hw.sensors) | mail your-account@@yourmail.dom
</pre>
and then forward that message to
<pre>
 dmesg@@openbsd.org
</pre>
where <tt>your-account@@yourmail.dom</tt> is your regular email account.

<p>
<b>NOTES</b>

<ul>
<li>Please send only GENERIC kernel dmesgs.
Custom kernels that have device drivers removed are not helpful.
<li>If you have a supported multiprocessor system and
normally run the GENERIC.MP kernel, it is helpful to developers to see the
dmesg output of both the GENERIC kernel and the GENERIC.MP kernel, so please
send both of them in separate emails.
<li>The dmesgs are received on a computer using the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd</a>
spam rejection system.
This may cause your dmesg to not be accepted by the mail servers for a
period of time.
Be patient, after half an hour to an hour or so, it will get through.
</ul>

<p>
The method above is very easy, but if you have chosen not to configure mail on
your OpenBSD system, you should still send your dmesg to the developers.
Save your dmesg output to a text file.

<pre>
$ (dmesg; sysctl hw.sensors) > ~/dmesg.txt
</pre>

Then transfer this file (using FTP/scp/floppydisk/carrier-pigeon/...)  to the
system you normally use for email.
Since the dmesg output you send in is processed automatically, be sure to
check the following when using alternate email clients/systems:
<ul>
<li>Configure your email client to send messages as plain text;
    do not use HTML-formatted email.
<li>Turn off any forced line break feature.
    Many email clients are configured to insert line breaks at 72 columns
    (the norm for mailing lists).
<li>Make sure your email client does not reformat messages into "text-flow"
    nonsense.
<li>Do not send the dmesg output as file attachment.
    Put the dmesg output into the body of the message.
</ul>


<a name="AddFileSet"></a>
<h2>4.11 - Adding a file set after install</h2>
<!-- XXXversion -->
"Oh no!  I forgot to add a file set when I did the install!"
<p>
Sometimes, you realize you really DID need <tt>comp46.tgz</tt> (or any
other system component) after all, but you didn't realize this at the
time you installed your system.  Good news: There are two easy ways to
add file sets after the initial install:

<h3>Using the upgrade process</h3>
Simply boot your install media (CD-ROM or Floppy), and choose Upgrade
(rather than Install).  When you get to the lists of file sets to
install, choose the sets you neglected to install first time around,
select your source, and let it install them for you.

<h3>Using tar(1)</h3>
The install file sets are simply compressed tar files, and you can
expand them manually from the root of the filesystem:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # cd /
  # tar xzvphf comp46.tgz
</pre></td></tr></table>

<p>
Do NOT forget the <tt>'p'</tt> option in the above command in
order to restore the file permissions properly!
<p>
One common mistake is to think you can use
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1">pkg_add(1)</a>
to add missing file sets.  This does not work.  pkg_add(1) is
the <a href="faq15.html#PkgMgmt">package management tool</a>
to install third party software.
It handles package files, not generic tar files like the install sets.

<p>
If you are installing the <tt>xbase</tt> file set on your system for the first time
using tar(1) and without rebooting, the shared library cache must be
updated after the installation using
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ldconfig&amp;sektion=8"
>ldconfig(8)</a>.
To add all the X libraries to the cache:

<blockquote><pre>
# <b>ldconfig -m /usr/X11R6/lib</b>
</pre></blockquote>

Alternatively, you can just reboot your system, and this will be done
automatically by the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;sektion=8"
>rc(8)</a> startup script.


<a name="bsd.rd"></a>
<h2>4.12 - What is 'bsd.rd'?</h2>

<b><tt>bsd.rd</tt></b> is a "RAM Disk" kernel.  This file can be very
useful; many developers are careful to keep it on the root of their
system at all times.

<p>
Calling it a "RAM Disk kernel" describes the root filesystem of the
kernel -- rather than being a physical drive, the utilities available
after the boot of <tt>bsd.rd</tt> are stored in the kernel, and are run
from a RAM-based filesystem.  <tt>bsd.rd</tt> also includes a healthy set
of utilities to allow you to do system maintenance and installation.

<p>
On some platforms, <tt>bsd.rd</tt> is actually the preferred
installation technique -- you place this kernel on an existing
filesystem, boot it, and run the install from it.  On most
platforms, if you have a running older version of OpenBSD, you
can FTP  a new version of <tt>bsd.rd</tt>, reboot from it, and
install a new version of OpenBSD without using any removable
media at all.

<p>
Here is an example of booting <tt>bsd.rd</tt> on an i386 system:

<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Using Drive: 0 Partition: 3
  reading boot.....
  probing: pc0 com0 com1 apm mem[639k 255M a20=on]
  disk: fd0 hd0+
  &gt;&gt; OpenBSD/i386 BOOT 3.02
  boot&gt; <b>boot hd0a:/bsd.rd</b>
<i>. . . normal boot to install . . .</i>
</pre></td></tr></table>

As indicated, you will be brought to the install program, but you
can also drop to the shell to do maintenance on your system.
<p>
The general rule on booting <tt>bsd.rd</tt> is to change your boot
kernel from <tt>/bsd</tt> to <tt>bsd.rd</tt> through whatever
means used on your platform.


<a name="InstProb"></a>
<h2>4.13 - Common installation problems</h2>

<a name="cpq16m"></a>
<h3>4.13.1 - My Compaq only recognizes 16M RAM</h3>
<i>Some</i> Compaq systems have an issue where the full system RAM is
not detected by the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">OpenBSD
second stage boot loader</a> properly, and only 16M may be detected
and used by OpenBSD. This can be corrected either by creating/editing
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot.conf&amp;sektion=8&amp;arch=i386"><tt>/etc/boot.conf</tt></a>
file, or by entering commands at the "<tt>boot></tt>" prompt before
OpenBSD loads.  If you had a machine with 64M RAM, but OpenBSD was only
detecting the first 16M, the command you would use would be:

<pre>
     machine mem +0x3000000@@0x1000000
</pre>
to add 48M (<tt>0x3000000</tt>) after the first 16M
(<tt>0x1000000</tt>).  Typically, if you had a machine with this
problem, you would enter the above command first at the install
floppy/CD-ROM's <tt>boot></tt> prompt, load the system, reboot, and
create an <tt>/etc/boot.conf</tt> file with the above line in it so all
future bootings will recognize all available RAM.

<p>
It has also been reported that a ROM update will fix this on <i>some</i>
systems.

<a name="noboot"></a>
<h3>4.13.2 - My i386 won't boot after install</h3>
Your install seemed to go fine, but on first boot, you see no sign of
OpenBSD attempting to boot.  There are a few common reasons for this
problem:

<ul>
<li><b>No partition was flagged active in fdisk(8).</b>  To fix this,
reboot the machine using the boot floppy or media, and "flag" a
partition as "active" (bootable).  See
<a href="faq14.html#fdisk">here</a> and
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">here</a>.

<li><b>No valid boot loader was ever put on the disk.</b>
If you hit "Enter" or answer "w" to the
"Use (W)hole disk or (E)dit the MBR?" question during the install, or
use the "<tt>reinit</tt>" option of fdisk(8), the
OpenBSD boot record is installed on the Master Boot Record of the disk;
otherwise, the existing master boot code is untouched.  This will be a
problem if no other boot record existed.
One solution is to boot the
install media again, drop to the shell and invoke
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>
to update the MBR code from the command line:
<pre>
    # fdisk -u wd0
</pre>
Note: the "update" option within the interactive ("-e") mode of
fdisk will not write the signature bytes required to make the disk
bootable.

<li><b>In some rare occasions, something may go wrong with the second
stage boot loader install.</b>  Reinstalling the second stage boot
loader is discussed <a href="faq14.html#InstBoot">here</a>.

</ul>

<a name="sshhang"></a>
<h3>4.13.3 - My (older, slower) machine booted, but hung at the ssh-keygen
steps</h3>
It is very likely your machine is running fine, just taking a while
to do the ssh key generation process.  A SPARCStation2 or a Macintosh
Quadra may take <i>several hours</i> to complete the three
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-keygen&amp;sektion=1">ssh-keygen(1)</a>
steps.
Just let it finish; it is only done once per install.

<p>
Note that the default key size was increased for OpenBSD 3.8, so
the generation times are much longer than they used to be.
Users of very slow machines may wish to generate their keys on another
computer, place them in a <a href="#site">site46.tgz</a> file, and
install them with the rest of the file sets.


<a name="noftplist"></a>
<h3>4.13.4 - I got the message "Failed to change directory" when doing an
install</h3>

When doing an FTP install of a
<a href="faq5.html#Flavors">snapshot</a> during the <i>-beta</i>
stage of the OpenBSD development cycle,
you may see this:

<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>

  Display the list of known ftp servers? [no] <b>yes</b>
  Getting the list from 192.128.5.191 (ftp.openbsd.org)... FAILED
  Failed to change directory.
  Server IP address or hostname?
</pre></td></tr></table>

This is normal and expected behavior during this pre-release part of the
cycle.  The install program looks for the FTP list on the primary FTP
server in a directory that won't be available until the
<a href="faq1.html#Next">release date</a>, so you get the above message.

<p>
Simply use the <a href="../ftp.html">FTP mirror list</a> to find your
favorite FTP mirror, and manually enter its name when prompted.

<p>
<b>Note: You should not see this if you are installing <i>-release</i>
or from CD-ROM.</b>

<a name="blankfdisk"></a>
<h3>4.13.5 - My fdisk partition table is trashed or blank!</h3>
Occasionally, a user will find a system will work, but when doing an
<tt>fdisk wd0</tt>, they see a completely blank (or sometimes, garbage)
partition table.
This is usually caused by having created a partition in
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>
which had an offset of zero sectors, rather than the
<a href="#trackoffset">one track offset</a> it should have
(note: this is assuming the <a href="../i386.html">i386</a> or
<a href="../amd64.html">amd64</a> platform.
Other platforms have different offset requirements, some need NO
offset).
The system then <a href="faq14.html#Boot386">boots</a> using the PBR,
not using the MBR.

<p>
While this configuration can work, it can be a maintenance problem and
should be fixed.
To fix this, the disk's file systems must generally be recreated from
scratch (though if you REALLY know what you are doing, you may be able
to recreate just your disklabel and MBR, and only lose and have to
rebuild the first OpenBSD partition on the disk).

<a name="noflopcd"></a>
<h3>4.13.6 - I have no floppy or CD-ROM on my machine</h3>
Some computers people might want to run OpenBSD on lack any obvious way
to install OpenBSD, having no floppy or CD-ROM drive.
Either the machine was designed without it (for example, many laptops
and "flash" based machines, like Soekris and ALIX systems), or the boot
devices have failed or been removed, and would be difficult to replace.
Here are some tips and techniques you can use to get OpenBSD installed
on these systems.
<ul>
<li>Network boot, using <a href="faq6.html#PXE">PXE</a> (i386 or amd64) or
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=diskless&amp;sektion=8">diskless(8)</a>
(other platforms).

<li>External USB CD-ROM or USB floppy, if your machine can boot from
one.

<li>USB Flash disk or hard disk, again if your computer can boot from
a USB device.
Prepare the device on another computer as described in
<a href="faq14.html#flashmemLive">FAQ 14</a>.
Boot from it, but chose the bsd.rd kernel, then install as normal.
You could also have the file sets pre-loaded on the flash media, as
well.

<li>Worst case, if none of the above is suitable, you can usually pull
the disk out of the target system, use suitable adapters to install it
in a "normal" computer, install OpenBSD, then replace the disk back in
the target system.
OpenBSD will then boot nicely in the target machine, though you will
very possibly have to adjust the network configuration.
You may also have to adjust <tt>/etc/fstab</tt> if you (for example)
did your install using a USB->IDE/SATA adapter or your target or install
machine uses
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahci&amp;sektion=4">ahci(4)</a>
and the other does not.
IDE and some SATA disks will normally be recognized as
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wd&amp;sektion=4">wd(4)</a>
devices, but if attached to a USB adapter, will come up as
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sd&amp;sektion=4">sd(4)</a>.
A SATA disk attached to a
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pciide&amp;sektion=4">pciide(4)</a>
interface will come up as wd(4), but attached to an
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahci&amp;sektion=4">ahci(4)</a>
interface, will come up as a sd(4) device.
However, once you correct the <tt>/etc/fstab</tt> file, the system
will generally boot just fine.

</ul>

In all cases, remember that the machine had an OS installed on it
before, and it was usually intended that the OS could be reloaded in the
field.
How this was originally intended to be done will often provide you a
good idea how you can install OpenBSD now.


<a name="site"></a>
<h2>4.14 - Customizing the install process</h2>
<!-- XXXversion -->

<h3><tt>siteXX.tgz</tt> file</h3>
The OpenBSD install/upgrade scripts allow the selection of a
user-created set called "<tt>siteXX.tgz</tt>", where XX is the release
version (e.g. 46).  The <tt>siteXX.tgz</tt> file set is, like the other
<a href="#FilesNeeded">file sets</a>, a
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gzip&amp;sektion=1">gzip(1)</a>
compressed
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tar&amp;sektion=1">tar(1)</a>
archive rooted in '/' and is un-tarred like the other sets with the
options <tt>xzphf</tt>.  This set will be installed last, after
all other file sets.

<p>
This file set allows the user to add to and/or override the files
installed in the 'normal' sets and thus customize the installation or
upgrade.

<p>
You can also create and use hostname-specific install sets, which are
named <tt>siteXX-<i>&lt;hostname&gt;.tgz</i></tt>, for example,
"<tt>site46-puffy.tgz</tt>".
This allows easy per-host customized installations, upgrades, or
disaster recovery.

<p>
Some example uses of a <tt>siteXX.tgz</tt> file:
<ul>
<li>Create a siteXX.tgz file that contains all the file changes you made
since first installing OpenBSD. Then, if you have to re-create the
system you simply select siteXX.tgz during the re-install and all of
your changes are replicated on the new system.

<li>Create a series of machine specific directories that each contain a
siteXX.tgz file that contains files specific to those machine types.
Installation of machines (e.g. boxes with different graphics cards) of a
particular category can be completed by selecting the appropriate
siteXX.tgz file.

<li>Put the files you routinely customize in a same or similar way
in a siteXX.tgz file --
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&amp;sektion=8"
><tt>/etc/skel</tt></a> files,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5"
><tt>/etc/pf.conf</tt></a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8"
><tt>/var/www/conf/httpd.conf</tt></a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf.local&amp;sektion=8"
><tt>/etc/rc.conf.local</tt></a>,
etc.
</ul>

<h3><tt>install.site</tt>/<tt>upgrade.site</tt> scripts</h3>
As the last step in the install/upgrade process, the scripts look in the
root directory of the newly installed/upgraded system for
<tt>install.site</tt> or <tt>upgrade.site</tt>, as appropriate to the
current process, and runs this script in an environment
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&amp;sektion=8">chroot</a>ed
to the installed/upgraded system's root.  Remember, the upgrade is done
from a booted file system, so your target file system is actually
mounted on <tt>/mnt</tt>.
However, because of the chroot, your script can be written as if
it is running in the "normal" root of your file system.  Since this
script is run after all the files are installed, you have much of the
functionality of the full system when your script runs.
Keep in mind that you are running a minimal kernel, not all features are
available, and due to space constraints, things that work today may not
work in a future release.

<p>
Note that the <tt>install.site</tt> script would have to be in a
<tt>siteXX.tgz file</tt>, while the <tt>upgrade.site</tt> script could
be put in the root directory before the upgrade, or could be put in a
<tt>siteXX.tgz</tt> file.

<p>
The scripts can be used to do many things:
<ul>
<li>Remove files that are installed/upgraded that you don't want present
on the system.
<li> Remove/upgrade/install the
<a href="faq15.html#PkgMgmt">packages</a> you want on the installed
system (may not work for all packages!).
<li> Do an <a href="faq14.html#Backup">immediate backup/archive</a> of
the new system before you expose it to the rest of the world.
<li>Use
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rdate&amp;sektion=8">rdate(8)</a>
to set the system time.
</ul>

<p>
The combination of <tt>siteXX.tgz</tt> and
<tt>install.site/upgrade.site</tt> files is intended to give users
broad customization capabilities without having to build their own
custom install sets.

<p>
Note: if you will be doing your install from an http server, you will
need to add your <tt>site*.tgz</tt> file(s) to the file
<tt>index.txt</tt> in the source directory in order for them to be
listed as an option at install time.
This is not needed for FTP or other installs.


<a name="Multiple"></a>
<h2>4.15 - How can I install a number of similar systems?</h2>
Here are some tools you can use when you have to deploy a number
of similar OpenBSD systems.

<h3><tt>siteXX.tgz</tt> and <tt>install/upgrade.site</tt> files</h3>
See the <a href="#site">above</a> article.

<h3>Restore from dump(8)</h3>
On most platforms, the boot media includes the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore(8)</a>
program, which can be used to restore a backup made by
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&amp;sektion=8">dump(8)</a>.
Thus, you could boot from a
<a href="#MkFlop">floppy</a>,
<a href="../orders.html">CD</a>, or
<a href="#bsd.rd">bsd.rd</a> file, then
<a href="faq14.html#fdisk">fdisk</a>,
<a href="faq14.html#disklabel">disklabel</a>, and
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore</a>
the desired configuration from tape or other media, and install the
<a href="faq14.html#InstBoot">boot blocks</a>. More details
<a href="faq14.html#Backup">here</a>.

<h3>Disk imaging</h3>
Unfortunately, there are no known disk imaging packages which are
FFS-aware and can make an image containing only the active file space.
Most of the major disk imaging solutions will treat an OpenBSD partition
as a "generic" partition, and can make an image of the whole disk. This
often accomplishes your goal, but usually with huge amounts of wasted
space --  an empty, 10G <tt>/home</tt> partition will require 10G of
space in the image, even if there isn't a single file in it.  While you
can typically install a drive image to a larger drive, you would not be
able to directly use the extra space, and you would not be able to
install an image to a smaller drive.

<p>
If this is an acceptable situation, you may find the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=1">dd</a>
command will do what you need, allowing you to copy one disk to another,
sector-for-sector.  This would provide the same functionality as
commercial programs without the cost.

<a name="getdmesg"></a>
<h2>4.16 - How can I get a dmesg(8) to report an install problem?</h2>
When <a href="../report.html">reporting a problem</a>, it is critical to
include the complete system
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg(8)</a>.
However, often when you need to do this, it is because the system is
working improperly or won't install so you may not have disk, network,
or other resources you need to get the dmesg to the appropriate
<a href="../mail.html">mail list</a>.  There are other ways, however:

<ul>
<li><b>Floppy disk:</b>  The boot disks and CD-ROM have enough tools
to let you record your dmesg to an MSDOS floppy disk for reading on
another machine.  Place an MSDOS formatted floppy in your disk drive and
execute the following commands:

<pre>
     mount -t msdos /dev/fd0a /mnt
     dmesg >/mnt/dmesg.txt
     umount /mnt
</pre>
If you have another OpenBSD system, you can also write it to an OpenBSD
compatible floppy -- often, the boot floppy has enough room on it to
hold the dmesg.  In that case, leave off the "<tt>-t msdos</tt>" above.

<p>
<li><b>Serial Console:</b>
Using a serial console and capturing the output on another computer
is often the best way to capture diagnostic information - particularly
if the computer panics immediately after boot.
As well as a second computer, you will need a suitable serial cable
(often a null-modem cable), and a terminal emulator program that can
capture screen output to file.

<p>
General information on setting up a serial console is provided
<a href="faq7.html#SerCon">elsewhere in the FAQ</a>;
in order to capture a log of the install,
the following commands are usually sufficient.

<p><b>i386</b>

<p>
At the boot loader prompt, enter

<p>
<blockquote>
<pre>
boot> <b>set tty com0</b>
</pre>
</blockquote>

<p>
This will tell OpenBSD to use the first serial port (often called
COM1 or COMA in PC documentation) as a serial console.
The default baud rate is 9600.

<p><b>Sparc/Sparc64</b>

<p>
These machines will automatically use a serial console if started
without a keyboard present.
If you have a keyboard and monitor attached, you can still force the
system to use a serial console with the following invocation at the
<tt>ok</tt> prompt.

<p>
<blockquote>
<pre>
ok <b>setenv input-device ttya</b>
ok <b>setenv output-device ttya</b>
ok <b>reset</b>
</pre>
</blockquote>

</ul>
<p>

<font color= "#0000e0">
<a href= "index.html">[FAQ 索引]</a>
<a href= "faq3.html">[到 3 - 开始使用 OpenBSD]</a>
<a href= "faq5.html">[到 5 - 从源代码构建系统]</a>
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt= "[back]"></a>
<a href= "mailto:www@@openbsd.org">www@@openbsd.org</a>
<br>
<small>$OpenBSD: faq4.html,v 1.20 2013/05/08 13:48:35 ajacoutot Exp $</small>
</body>
</html>
<!--
Originally [OpenBSD: faq4.html,v 1.296 ]<br>
$Translation: faq4.html,v 1.22 2013/05/08 11:30:35 ajacoutot Exp $<br>
-->
@


1.20
log
@Sync with Steelix CVS
@
text
@d3201 1
a3201 1
<small>$OpenBSD: faq4.html,v 1.18 2010/05/11 06:30:57 ajacoutot Exp $</small>
@


1.19
log
@Sync with Steelix CVS
@
text
@d3205 2
a3206 2
Originally [OpenBSD: faq4.html,v 1.296]<br>
$Translation: faq4.html,v 1.21 2010/10/19 14:17:33 dongsheng Exp $<br>
@


1.18
log
@Sync with Steelix CVS
@
text
@d3201 1
a3201 1
<small>$OpenBSD: faq4.html,v 1.296 2010/05/02 19:12:03 espie Exp $</small>
d3206 1
a3206 1
$Translation: faq4.html,v 1.20 2010/05/04 14:58:59 dongsheng Exp $<br>
@


1.17
log
@Sync with Steelix CVS
@
text
@d2321 9
a2329 2
Only one of the four <i>primary</i> MBR partitions can be used for
booting OpenBSD (i.e., extended partitions will not work).
d2467 4
d2484 5
a2509 3
The following was verified using Windows 7 Release Candidate Build 7100.

<p>
d3201 1
a3201 1
<small>$OpenBSD: faq4.html,v 1.295 2010/03/07 15:08:22 nick Exp $</small>
d3205 2
a3206 2
Originally [OpenBSD: faq4.html,v 1.295]<br>
$Translation: faq4.html,v 1.19 2010/04/07 13:57:59 dongsheng Exp $<br>
@


1.16
log
@Sync with Steelix CVS
@
text
@d2547 2
a2548 1
<a href="http://www.ranish.com/part/">The Ranish Partition Manager</a>
d3188 1
a3188 1
<small>$OpenBSD: faq4.html,v 1.294 2010/02/12 03:12:21 nick Exp $</small>
d3192 2
a3193 2
Originally [OpenBSD: faq4.html,v 1.294]<br>
$Translation: faq4.html,v 1.18 2010/03/06 13:16:08 dongsheng Exp $<br>
@


1.15
log
@Sync with Steelix CVS
@
text
@d359 1
a359 1
In OpenBSD, you can creat a CD from an ISO image using
d3187 1
a3187 1
<small>$OpenBSD: faq4.html,v 1.293 2009/12/16 04:19:53 nick Exp $</small>
d3191 2
a3192 2
Originally [OpenBSD: faq4.html,v 1.293]<br>
$Translation: faq4.html,v 1.17 2009/12/16 14:22:31 dongsheng Exp $<br>
@


1.14
log
@Sync with Steelix CVS
@
text
@d2574 2
a2575 1
track of what hardware works, and what hardware doesn't work perfectly.
d2582 2
a2583 1
 # dmesg | mail -s "Sony VAIO 505R laptop, apm works OK" dmesg@@openbsd.org
d2602 1
a2602 1
$ dmesg | mail your-account@@yourmail.dom
d2634 1
a2634 1
$ dmesg > ~/dmesg.txt
d2894 4
a2897 1
to install OpenBSD.
d2911 1
a2911 1
<a href="faq14.html#flashmemBoot">FAQ 14</a>.
d2922 16
d3187 1
a3187 1
<small>$OpenBSD: faq4.html,v 1.291 2009/12/06 07:54:39 jmc Exp $</small>
d3191 2
a3192 2
Originally [OpenBSD: faq4.html,v 1.291]<br>
$Translation: faq4.html,v 1.16 2009/12/08 14:18:41 dongsheng Exp $<br>
@


1.13
log
@Sync with Steelix CVS
@
text
@d4 1
a4 1
<title>4 - OpenBSD 4.5 安装指南</title>
d25 2
a26 2
<a href= "../faq3.html">[到 3 - 开始使用 OpenBSD]</a>
<a href= "../faq5.html">[到 5 - 从源代码构建系统]</a>
d29 1
a29 1
<h1><font color="#e00000">4 - OpenBSD 4.5 安装指南</font></h1>
d40 3
a42 3
    <li><a href="#UnixFlop" >4.3.1 - 在 Unix 中创建引导软盘</a>
    <li><a href="#DosFlop"  >4.3.2 - 在 Windows 中创建引导软盘</a>
    <li><a href="#MkCD-ROM" >4.3.3 - 创建引导 CD</a>
d45 1
a45 1
<li><a href="#Install"      >4.5 - 执行安装</a>
d47 6
a52 7
  <li><a href="#Start"      >4.5.1 - 开始安装</a>
  <li><a href="#Disks"      >4.5.2 - 配置磁盘</a>
  <li><a href="#Hostname"   >4.5.3 - 设置主机名称</a>
  <li><a href="#Network"    >4.5.4 - 配置网络</a>
  <li><a href="#InstMedia"  >4.5.5 - 选择安装媒体</a>
  <li><a href="#Filesets"   >4.5.6 - 选择文件集</a>
  <li><a href="#Finish"     >4.5.7 - 结束</a>
d55 1
a55 7
<li><a href= "#FilesNeeded" >4.6 - 安装时需要什么文件?</a>
<li><a href= "#Partitioning">4.7 - 安装 OpenBSD 需要多大空间?</a>
<li><a href= "#Multibooting">4.8 - OpenBSD 与多启动</a>
<li><a href= "#SendDmesg"   >4.9 - 安装后将你的 dmesg 发送到 dmesg@@openbsd.org
<li><a href= "#AddFileSet"  >4.10 - 安装后增加文件集</a>
<li><a href= "#bsd.rd"      >4.11 - “bsd.rd” 是什么?</a>
<li><a href= "#InstProb"    >4.12 - 常见安装问题</a>
d57 4
a60 6
  <li><a href="#cpq16m"     >4.12.1 - 我的 Compaq 只能识别 16M 内存</a>
  <li><a href="#noboot"     >4.12.2 - 我的 i386 安装后不能启动</a>
  <li><a href="#sshhang"    >4.12.3 - 我的(老而慢的)机器启动后，在 ssh-keygen 进程挂起</a>
  <li><a href="#noftplist"  >4.12.4 - 安装期间出现信息“改变目录失败”</a>
  <li><a href="#blankfdisk" >4.12.5 - 我的分区表乱七八糟或空白!</a>
  <li><a href="#noflopcd"   >4.12.6 - 我的机器没有软驱或 CD-ROM</a>
d62 18
a79 3
<li><a href= "#site"        >4.13 - 定制安装过程</a>
<li><a href= "#Multiple"    >4.14 - 如何简化安装多个相似系统的工作?</a>
<li><a href="#getdmesg"     >4.15 - 如何获得 dmesg(8) 报告安装问题?</a>
d85 8
a92 1
<h2>4.1 - OpenBSD 安装过程概要</h2>
d95 2
a96 4
OpenBSD has a robust and adaptable text-based installation procedure,
and can be installed from a single floppy disk.
Most platforms follow a similar installation procedure;
however there are some differences in the details.
d103 3
a105 3
The OpenBSD installation process uses a special
kernel with a number of utilities and install scripts embedded in a
preloaded RAM disk.
d109 1
a109 1
(<tt>.tgz</tt>) files from a source other than this preloaded RAM disk.
d114 10
d128 1
a128 1
Typical file names are <tt>floppy45.fs</tt>, though several platforms
d132 1
a132 1
(<tt>cd45.iso</tt> for just booting, or <tt>install45.iso</tt> for the
d154 1
a154 1
Not every <a href="../../zh/plat.html">platform</a> supports all boot options:
d157 1
a157 1
<li><a href="../../alpha.html"><b>alpha:</b></a> Floppy, CD-ROM, network,
d160 1
a160 1
<li><a href="../../amd64.html"><b>amd64:</b></a> Floppy, CD-ROM,
d163 1
a163 1
<li><a href="../../armish.html"><b>armish:</b></a>
d166 1
a166 1
<li><a href="../../hp300.html"><b>hp300:</b></a> CD-ROM, network.
d168 1
a168 1
<li><a href="../../hppa.html"><b>hppa:</b></a> Network.
d170 1
a170 1
<li><a href="../../i386.html"><b>i386:</b></a> Floppy, CD-ROM,
d173 1
a173 1
<li><a href="../../landisk.html"><b>landisk:</b></a> miniroot, installed
d176 1
a176 7
<li><a href="../../mac68k.html"><b>mac68k:</b></a> Booted
using utilities running on Mac OS.
See
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.5/mac68k/INSTALL.mac68k">INSTALL.mac68k</a>
for details.

<li><a href="../../macppc.html"><b>macppc:</b></a> CD-ROM, network.
d178 1
a178 1
<li><a href="../../mvme68k.html"><b>mvme68k:</b></a> Network, bootable tape.
d180 1
a180 1
<li><a href="../../mvme88k.html"><b>mvme88k:</b></a> Network, bootable tape.
d182 1
a182 1
<li><a href="../../sparc.html"><b>sparc:</b></a> Floppy, CD-ROM, network,
d185 1
a185 1
<li><a href="../../sparc64.html"><b>sparc64:</b></a> Floppy (U1/U2 only),
d188 1
a188 1
<li><a href="../../vax.html"><b>vax:</b></a> Floppy, network.
d190 1
a190 1
<li><a href="../../zaurus.html"><b>zaurus:</b></a> Boot bsd.rd from
d192 1
a192 1
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.5/zaurus/INSTALL.zaurus">INSTALL.zaurus</a>
d207 2
a208 2
<a href="../../zh/orders.html">Official CD-ROM set</a>, but you can also use
<tt>install45.iso</tt> or you can also make your own.
d212 1
a212 1
<a href="../../zh/ftp.html">FTP mirror sites</a>
d217 1
a217 1
<a href="../../zh/ftp.html#http">HTTP mirror sites</a>
d223 1
a223 1
For example, on <a href="../../i386.html">i386</a>,
d238 1
a238 1
<h2>4.2 - 安装前的检查列表</h2>
d262 1
a262 1
      <a href="../faq5.html#Release">release</a>
d288 1
a288 1
<h2>4.3 - 创建 OpenBSD 安装媒体</h2>
d292 2
a293 2
<a href="../../i386.html">i386</a>
and <a href="../../sparc.html">sparc</a> platforms.
d296 1
a296 1
The <a href="../../i386.html">i386</a> platform has six separate
d300 1
a300 11
<li><b><tt>floppy45.fs</tt></b> (Desktop PC) supports many
  PCI and ISA NICs, IDE and simple SCSI adapters and some PCMCIA
  support. Most users will use this image if booting from a
  floppy
<li><b><tt>floppyB45.fs</tt></b> (Servers) supports many RAID controllers,
  and some of the less common SCSI adapters.  However,
  support for many standard SCSI adapters and many EISA and ISA
  NICS has been removed.
<li><b><tt>floppyC45.fs</tt></b> (Laptops) supports the CardBus and PCMCIA
  devices found in many laptops.
<li><b><tt>cd45.iso</tt></b> is an ISO9660 image that can be used to
d305 1
a305 1
<li><b><tt>cdemu45.iso</tt></b> is an ISO9660 image, using
d308 3
a310 3
  image -- most people will use <tt>cd45.iso</tt>, only use
  <tt>cdemu45.iso</tt> if <tt>cd45.iso</tt> doesn't work for you.
<li><b><tt>install45.iso</tt></b> is an ISO9660 image, containing
d314 10
a325 5
Yes, there may be situations where one install disk is required
to support your SCSI adapter and another disk is required to support
your network adapter.
Fortunately, this is a rare event, and can usually be worked around.

d327 1
a327 1
The <a href="../../sparc.html">sparc</a> platform has four separate
d331 2
a332 2
<li><b><tt>floppy45.fs:</tt></b> Supports systems with a floppy disk.
<li><b><tt>cd45.iso</tt></b> An ISO image usable to make your own
d334 1
a334 1
<li><b><tt>miniroot45.fs</tt></b> Can be written to a swap partition
d336 1
a336 1
<li><b><tt>install45.iso</tt></b> is an ISO9660 image, containing
d342 35
d379 5
a383 1
<h3>4.3.1 - 在 Unix 中创建引导软盘</h3>
d403 2
a404 10
Note that some Unix-like systems have different commands for formatting
floppies.
Refer to your system's documentation for the exact procedure.

<p>
Once you have a clean, formatted floppy it is time to write the
installation image to floppy.
For this, you can use the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=0">dd(1)</a>
utility.
d409 1
a409 1
  # <b>dd if=floppy45.fs of=/dev/rfd0c bs=32k</b>
d421 1
a421 1
  # <b>cmp /dev/rfd0c floppy45.fs</b>
d425 1
a425 8
<h3>4.3.2 - 在 Windows 中创建引导软盘</h3>

<p>
This section describes how to write the installation images to
floppy disk under Windows.
You can get the tools mentioned below from the
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.5/tools/">tools</a>
directory on any of the FTP mirrors.
d434 4
a437 1
<tt>ntrw.exe</tt>.
d442 1
a442 1
  C:\> <strong>ntrw floppy45.fs a:</strong>
a447 19
<a name="MkCD-ROM"></a>
<h3>4.3.3 - 创建引导 CD</h3>

<p>
You can create a CD-ROM using the <tt>cd45.iso</tt> or
<tt>install45.iso</tt> files.
The exact details here are left to the reader to determine with
the tools they have at their disposal.

<p>
Some of the tools in OpenBSD are:
<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mkhybrid&amp;sektion=8">mkhybrid(8)</a>
<li><a href="http://cdrecord.berlios.de/old/private/cdrecord.html">cdrecord</a>,
part of the cdrtools collection in the <a href="faq15.html">OpenBSD Packages
and Ports System</a>.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cdio&amp;sektion=1">cdio(1)</a>'s
"track at once" (tao) recording option.
</ul>
d450 1
a450 1
<h2>4.4 - 使用 OpenBSD 安装媒体启动</h2>
d454 1
a454 1
Booting an install image on the i386 and amd64 PC platforms is nothing new
d456 5
a460 6
If you are using a floppy disk, simply insert the floppy into
the floppy drive and boot the system.
The install image will then load, provided floppy boot is enabled in your BIOS.
If you want to boot from CD, you must go into your system's BIOS
and set the boot options to allow booting from CD.
Some older BIOSes do not have this option, and you must use a floppy
d473 1
a473 1
On the <a href="../../sparc64.html">sparc64</a> platform, only the SBus
d477 9
a485 3
To boot from floppy, place the floppy disk with the OpenBSD
installation image on it into the floppy drive.
Then use the following command to boot from the floppy:
a492 1
To boot from CD-ROM, place the OpenBSD CD-ROM disk into the drive.
d501 8
a508 10
<p>
Of course, this will only work in new command mode.
If you are at the old command mode prompt (a right arrow), type 'n'
for the new command mode.
(If you are using an old sparc that is pre-sun4c, you probably
don't have a new command mode.
In this case, you need to experiment.)
If you have multiple CD-ROM devices, you need to boot from the correct one.
try <tt>probe-scsi</tt> (or <tt>probe-ide</tt> on newer systems) from
the new command mode.
d511 5
a515 10
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ok <b>probe-scsi</b>

  Target 0
    Unit 0   Disk     QUANTUM LIGHTNING 365S
  Target 1
    Unit 0   Removable Disk     QUANTUM EMPIRE_1080S
  Target 3
    Unit 0   Removable Disk     Joe's CD-ROM
</pre></td></tr></table>
d518 3
a520 2
Figure out which disk is the CD-ROM you want to boot from.  Note the
target number.
d523 4
a526 3
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ok <b>boot /sbus/esp/sd@@X,0</b>
</pre></td></tr></table>
d529 2
a530 4
<a name="Install"></a>
<h2>4.5 - 执行安装</h2>
<a name="Start"></a>
<h3>4.5.1 - 开始安装</h3>
d534 5
a538 3
OpenBSD are loaded into memory.  The most common problem
when booting is a bad floppy disk or a drive alignment problem.  The
boot floppy is quite tightly packed -- any bad spot will cause problems.
d544 2
d551 3
a553 3
the kernel telling you what devices have been found,
and where. Don't worry about remembering this text, as a copy is saved as
<tt>/var/run/dmesg.boot</tt>.
d562 1
d567 3
a569 2
And with that, we reach our first question.  Most of the time, you have
the three options shown:
d582 1
a582 1
<tt>etc45.tgz</tt> file.
d584 2
a585 2
<a href="../upgrade45.html#etcUpdates">manually merge</a> the changes of
<tt>etc45.tgz</tt> into your system before you can expect it to be
d594 1
a594 1
For OpenBSD 4.5, upgrading 4.4 to 4.5 is the only supported upgrade.
d602 1
a602 1
<a href="../upgrade45.html">OpenBSD Upgrade Guide 4.5</a>.
d610 4
a613 3
On occasion, you will not see the "Upgrade" option listed.
After a <i>flag day</i> event, it is not possible to directly upgrade;
one must reinstall the system from scratch.
d615 7
a621 2
<p>
In this example, we will do an install, but the upgrade process is similar.
d625 4
a628 7
  Welcome to the OpenBSD/i386 4.5 install program.

  This program will help you install OpenBSD. At any prompt except password
  prompts you can escape to a shell by typing '!'. Default answers are shown
  in []'s and are selected by pressing RETURN.  At any time you can exit this
  program by pressing Control-C, but exiting during an install can leave your
  system in an inconsistent state.
a630 1
  kbd(8) mapping? ('L' for list) [none] <b><i>Enter</i></b>
d635 7
a641 3
are using a <a href="../faq7.html#SerCon">serial console</a> for install,
don't just take the default,
respond appropriately.
d644 6
a649 2
If you do not select a keyboard encoding table, a US keyboard layout
will be assumed.
d653 2
a654 7
  IS YOUR DATA BACKED UP? As with anything that modifies disk contents, this
  program can cause SIGNIFICANT data loss.

  It is often helpful to have the installation notes handy. For complex disk
  configurations, relevant disk hardware manuals and a calculator are useful.

  Proceed with install? [no] <b>y</b>
d658 10
a667 2
If you take the default here, the install process will terminate and
drop you to a shell prompt.
d670 3
a672 4
The installation notes referred to here are on the install CDs and FTP
servers, in the file <tt>INSTALL.<i>&lt;plat&gt;</i></tt>, where
<i>&lt;plat&gt;</i> is your <a href="../../zh/plat.html">platform</a>, for
instance, <tt>i386</tt>.
d674 10
a683 8
<a name="Disks"></a>
<h3>4.5.2 - 配置磁盘</h3>

<i><b>Important Note:</b>
Users with a large hard disk (larger than was commonly available when your
computer was made) will want to
see <a href="../faq14.html#LargeDrive">this section</a> before going any
further.</i>
d686 6
a691 7
Setting up disks in OpenBSD varies a bit between platforms. For
<a href="../../i386.html">i386</a>, <a href="../../amd64.html">amd64</a>,
<a href="../../macppc.html">macppc</a>, <a href="../../zaurus.html">zaurus</a>
and <a href="../../armish.html">armish</a>,
disk setup is done in two stages.  First, the OpenBSD slice of the hard
disk is defined using fdisk(8), then that slice is subdivided into
OpenBSD partitions using disklabel(8).
d694 3
a696 11
Some users may be a little confused by the terminology used here. It
will appear we are using the word "partition" in two different ways.
This observation is correct. There are two layers of partitioning in
the above OpenBSD platforms, the first, one could consider the Operating
System partitioning, which is how multiple OSs on one computer mark out
their own space on the disk, and the second one is how the OpenBSD
partition is sub-partitioned into individual filesystems.  The first
layer is visible as a disk partition to DOS, Windows, and any other OS
that uses this disk layout system,
the second layer of partitioning is visible only to OpenBSD
and those OSs which can directly read an OpenBSD filesystem.
d700 6
a705 8
  Cool!  Let's get to it...

  You will now initialize the disk(s) that OpenBSD will use. To enable all
  available security features you should configure the disk(s) to allow the
  creation of separate filesystems for /, /tmp, /var, /usr, and /home.

  Available disks are: wd0.
  Which one is the root disk? (or done) [wd0] <b><i>Enter</i></b>
d709 4
a712 6
The root disk is the disk the system will boot from, and normally where
swap space resides.
IDE disks will show up as <tt>wd0</tt>, <tt>wd1</tt>, etc., SCSI disks and
RAID devices will show up as <tt>sd0</tt>, <tt>sd1</tt>, and so on.  All the
disks OpenBSD can find are listed here -- if you have drives which are
not showing up, you have unsupported or improperly configured hardware.
d716 2
a717 1
  Do you want to use *all* of wd0 for OpenBSD? [no] <b><i>Enter</i></b>
d721 3
a723 15
If you say "yes" to this question, the entire disk will be allocated to
OpenBSD.  This will result in a standard Master Boot Record and partition
table being written out to disk -- one partition, the size of the entire
hard disk, set to the OpenBSD partition type, and flagged as the
bootable partition.  This will be a common choice for most production
uses of OpenBSD; however, there are some systems this should not be done
on.  Many Compaq systems, many laptops, some Dell and other systems use a
"maintenance" or "Suspend to Disk" partition, which should be kept intact.
If your system
has any other partitions of any type you do not wish to erase, do not
select "yes" to the above question.
On the other hand, if your system has a brand new disk that has never
been used, you will probably want to say "yes" here (or use the "update"
option of fdisk), so you do get a valid master boot record and signature
in place.
d726 8
a733 6
For the sake of this example, we will assume the disk is to be split
between OpenBSD and a pre-existing Windows 2000 partition, so we
take the default of "no", which will take us into the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>
program.  You can also get more information on fdisk(8)
<a href="../faq14.html#fdisk">here</a>.
d736 3
a738 5
<b>Note:</b> If you say "Y" to the "Do you want to use *all* of wd0 for
OpenBSD?" question, or if you are using a platform which does not use
fdisk (for example, sparc64), you will not go through this step, but
will rather jump directly to <a href="#disklabel">creating a
disklabel</a>
d742 3
a744 3
  You will now create a single MBR partition to contain your OpenBSD data. This
  partition must have an id of 'A6'; must *NOT* overlap other partitions; and
  must be marked as the only active partition.
d746 8
a753 1
  The 'manual' command describes all the fdisk commands in detail.
d755 5
a759 74
  Disk: wd0       geometry: 2434/255/63 [39102336 Sectors]
  Offset: 0       Signature: 0xAA55
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
  *0: 0B      0   1   1 -    195 254  63 [          63:     3148677 ] Win95 FAT-32
   1: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   2: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   3: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
  Enter 'help' for information
  fdisk: 1> <b>help</b>
          help            Command help list
          manual          Show entire OpenBSD man page for fdisk
          reinit          Re-initialize loaded MBR (to defaults)
          setpid          Set the identifier of a given table entry
          disk            Edit current drive stats
          edit            Edit given table entry
          flag            Flag given table entry as bootable
          update          Update machine code in loaded MBR
          select          Select extended partition table entry MBR
          swap            Swap two partition entries
          print           Print loaded MBR partition table
          write           Write loaded MBR to disk
          exit            Exit edit of current MBR, without saving changes
          quit            Quit edit of current MBR, saving current changes
          abort           Abort program without saving current changes
  fdisk: 1>
</pre></td></tr></table>

<p>
A few commands are worthy of elaboration:
A few commands are worthy of elaboration:
<ul>
<li><b><tt>r</tt></b> or <b><tt>reinit</tt>:</b> Clears existing
partition table, makes one big OpenBSD partition covering entire
disk, flags it active,
and installs the OpenBSD MBR code.
Equivalent to saying "yes" to the "<tt>use *all* of ...</tt>" question.
You almost certainly want to do this on a new disk.
<li><b><tt>p</tt></b> or <b><tt>print:</tt></b> Displays the current
partition table in sectors.  "<tt>p m</tt>" will show the partition
table in megabytes, "<tt>p g</tt>" will show it in gigabytes.
<li><b><tt>e</tt></b> or <b><tt>edit:</tt></b> edit or alter a table
entry.
<li><b><tt>f</tt></b> or <b><tt>flag:</tt></b> Marks a partition as the
active partition, the one that will be booted from.
<li><b><tt>u</tt></b> or <b><tt>update:</tt></b> Updates the MBR with
the OpenBSD boot code, similar to "<tt>reinit</tt>", except it doesn't
alter the existing partition table.
<li><b><tt>exit</tt></b> and <b><tt>quit:</tt></b> Careful on these, as
some users are used to "exit" and "quit" having opposite meanings.
</ul>

It is worth pointing out once again, an error here will result in
significant data loss.  If you are going to do this on a drive with
important data, it might be worth practicing on a "disposable" drive, in
addition to having a good backup.

<p>
Our drive here has a 1.5G partition for Windows 2000 (using the FAT
filesystem).  Looking at the info from the above display, we can see
that the Windows partition occupies through cylinder 202 on the drive.
So, we are going to allocate the rest of the disk to OpenBSD, starting
at cylinder 203.  You could also calculate OpenBSD's starting sector of
3069360 by adding the existing partition's starting sector (63) and its
size (3069297).

<p>
You can edit the drive layout in either Cylinder/Heads/Sectors
form or just raw sectors.  Which is easier depends upon what you
are doing; in this case, working around an existing partition, using
CHS format will probably be easier.
If you are creating the first partition on the disk, just using
raw sectors may be easier.
d763 2
a764 34
  fdisk: 1> <b>e 1</b>
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   1: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
  Partition id ('0' to disable)  [0 - FF]: [0] (? for help) <b>a6</b>
  Do you wish to edit in CHS mode? [n] <b>y</b>
  BIOS Starting cylinder [0 - 2433]: [0] <b>196</b>
  BIOS Starting head [0 - 254]: [0] <b><i>Enter</i></b>
  BIOS Starting sector [1 - 63]: [0] <b>1</b>
  BIOS Ending cylinder [0 - 2433]: [0] <b>2433</b>
  BIOS Ending head [0 - 254]: [0] <b>254</b>
  BIOS Ending sector [1 - 63]: [0] <b>63</b>
  fdisk:*1> <b>p</b>
  Disk: wd0       geometry: 2434/255/63 [39102336 Sectors]
  Offset: 0       Signature: 0xAA55
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
  *0: 0B      0   1   1 -    195 254  63 [          63:     3148677 ] Win95 FAT-32
   1: A6    196   0   1 -   2433 254  63 [     3148740:    35953470 ] OpenBSD
   2: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   3: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
  fdisk:*1> <b>p m</b>
  Disk: wd0       geometry: 2434/255/63 [19093 Megabytes]
  Offset: 0       Signature: 0xAA55
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
  *0: 0B      0   1   1 -    195 254  63 [          63:        1537M] Win95 FAT-32
   1: A6    196   0   1 -   2433 254  63 [     3148740:       17555M] OpenBSD
   2: 00      0   0   0 -      0   0   0 [           0:           0M] unused
   3: 00      0   0   0 -      0   0   0 [           0:           0M] unused
  fdisk:*1>
a766 1
<a name="trackoffset"></a>
d768 5
a772 17
On platforms which use fdisk,
it is important that the first partition skips the first track of the
disk, <i>in this case</i>, starting on sector <tt>63</tt>.
This will vary from machine to machine and disk system to disk system.
If an OpenBSD partition is created starting at offset <tt>0</tt>,
this partition table will end up being overwritten by the OpenBSD
partition's <a href="../faq14.html#Boot386">Partition Boot Record</a>.
The system may still be bootable, but it will be very
difficult to maintain, and this configuration is <i>not recommended
or supported</i>.

<p>
Note that the prompt changed to include an asterisk ('<tt>*</tt>') to
indicate you have unsaved changes.  As we can see from the output of
<tt>p&nbsp;m</tt> we have not altered our Windows partition, we have
successfully allocated the rest of the drive for OpenBSD, and the partitions
do not overlap.  We are in business.  Almost.
d775 9
a783 2
What we haven't done is flagged the partition as active so the machine
will boot OpenBSD on the next reboot:
d787 1
a787 13
  fdisk:*1> <b>f 1</b>
  Partition 1 marked active.
  fdisk:*1> <b>p</b>
  Disk: wd0       geometry: 2434/255/63 [39102336 Sectors]
  Offset: 0       Signature: 0xAA55
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   0: 0B      0   1   1 -    195 254  63 [          63:     3148677 ] Win95 FAT-32
  *1: A6    196   0   1 -   2433 254  63 [     3148740:    35953470 ] OpenBSD
   2: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   3: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
  fdisk:*1>
d790 6
a795 2
<p>
And now, we are ready to save our changes:
d799 1
a799 4
  fdisk:*1> <b>w</b>
  Writing MBR at offset 0.
  wd0: no disk label
  fdisk: 1> <b>q</b>
d803 5
d809 3
a811 7
<a name="disklabel"></a>
<h3>Creating a disklabel</h3>
The next step is to use
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>
to slice up the OpenBSD partition.  More details on using disklabel(8)
can be found in
<a href="../faq14.html#disklabel">FAQ 14, disklabel</a>.
d815 1
a815 43
  Here is the partition information you chose:

  Disk: wd0       geometry: 2586/240/63 [39100320 Sectors]
  Offset: 0       Signature: 0xAA55
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
   0: 0B    0   1  1 -  202 239 63 [          63:     3069297 ] Win95 FAT-32
  *1: A6  203   0  1 - 2585 239 63 [     3069360:    36030960 ] OpenBSD
   2: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0 ] unused

  You will now create an OpenBSD disklabel inside the OpenBSD MBR
  partition. The disklabel defines how OpenBSD splits up the MBR partition
  into OpenBSD partitions in which filesystems and swap space are created.

  The offsets used in the disklabel are ABSOLUTE, i.e. relative to the
  start of the disk, NOT the start of the OpenBSD MBR partition.

  # Inside MBR partition 1: type A6 start 3148740 size 35953470
  Treating sectors 3148740-39102210 as the OpenBSD portion of the disk.
  You can use the 'b' command to change this.

  Initial label editor (enter '?' for help at any prompt)
  > <b>?</b>
  Available commands:
    ? [command] - show help                  n [part] - set mount point
    a [part]    - add partition              p [unit] - print partitions
    b           - set OpenBSD boundaries     q        - quit & save changes
    c [part]    - change partition size      r        - display free space
    D           - reset label to default     s [path] - save label to file
    d [part]    - delete partition           u        - undo last change
    e           - edit drive parameters      w        - write label to disk
    g [d | u]   - [d]isk or [u]ser geometry  X        - toggle expert mode
    l [unit]    - print disk label header    x        - exit & lose changes
    M           - disklabel(8) man page      z        - delete all partitions
    m [part]    - modify partition

  Suffixes can be used to indicate units other than sectors:
          'b' (bytes), 'k' (kilobytes), 'm' (megabytes), 'g' (gigabytes)
          'c' (cylinders), '%' (% of total disk), '&' (% of free space).
  Values in non-sector units are truncated to the nearest cylinder boundary.
  >
d819 5
a823 84
Again, a few of these commands could use a little elaboration:
<ul>
<li><b><tt>p</tt></b> - displays (prints) the current disklabel to the
screen, and you can use the modifiers <tt>k, m</tt> or <tt>g</tt> for
kilobytes, megabytes or gigabytes.

<li><b><tt>D</tt></b> - Clears any existing disklabel, creates a new
default disklabel which covers just the current OpenBSD partition.  This
can be useful if the disk previously had a disklabel on it, and the
OpenBSD partition was recreated to a different size -- the old disk
label may not get deleted, and may cause confusion.

<li><b><tt>m</tt></b> - Modifies an existing entry in a disklabel.
Do not over estimate what this will do for you. While it may alter the
size of a disklabel partition, it does NOT alter the filesystem on the
drive.
Using this option and expecting it to magically resize existing
partitions is a good way of losing large amounts of data.
However, this option and
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=growfs&amp;sektion=8">growfs(8)</a>
can be used to enlarge a partition.

</ul>

<p>
Slicing up your disk properly is important.  The answer to the question,
"How should I partition my system?" is "Exactly how you need it".  This
will vary from application to application.  There is no universal
answer.  If you are unsure of how you want to partition your system, see
<a href="#Partitioning">this discussion</a>.

<p>
In this system, we have over 17G available for OpenBSD.  That's a lot
of space, and it isn't likely we will need most of it.  So, we will
deliberately not use absolute minimum sizes.  We would rather have a
few hundred megabytes of unused space than a kilobyte too little.

<p>
On the root disk, an 'a' partition <b>must</b> be created for the
root filesystem (/).
The installation process can not proceed without it.
Generally, you will want to have a <a href="faq14.html#Swap">swap</a>
partition, 'b', though
if you are sure your system will never exhaust real memory, you can
leave it off.
If a 'b' partition exists on the root disk, it will automatically be
used for swap.
Swap partitions on other disks will have to be manually added to
<i>/etc/fstab</i>.

<p>
After a little thought, we decide to create just enough partitions to
allow the creation of the recommended separate filesystems (<tt>/, /tmp,
/var, /usr, /home</tt>) along with a swap partition:
<ul>
<li><i><b>wd0a: /</b></i> (root) - 150M.  Should be more than enough.
<li><i><b>wd0b: </b></i>(swap) - 300M.
<li><i><b>wd0d: /tmp</b></i> - 120M.  <tt>/tmp</tt> is used for building
  some software, 120M will probably be enough for most things.
<li><i><b>wd0e: /var</b></i> - 80M.  If this were to be a web or mail
  server, we'd have made this partition much larger, but, that's not
  what we are doing.
<li><i><b>wd0g: /usr</b></i> - 6G.  We want this partition to be large
  enough to load a few user applications, plus be able to update
  and rebuild the system by source if desired or needed.  The
  <a href="faq15.html#Ports">Ports tree</a> will be here as well, which
  will take almost 250M of this space before ports are built.
  If one was planning on building many applications from source using
  <a href="faq15.html#Ports">ports</a> rather than pre-built
  <a href="faq15.html#PkgMgmt">packages</a>, you might want a lot
  more space here.
<li><i><b>wd0h: /home</b></i> - 4G.  This will allow plenty of user file
  space.
</ul>

Now, if you add those up, you will see over 6G of space is unused!
Unused space won't hurt anything, and it gives us flexibility to enlarge
things in the future if need be.  Need more <i>/tmp</i>?
Create a new partition in the unused space, format the new partition with
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&amp;sektion=8"
>newfs(8)</a>, and change
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&amp;sektion=5"
><i>/etc/fstab</i></a> to mount the new partition onto <i>/tmp</i>.
Problem solved.
d826 2
a827 55
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  > <b>p m</b>
  #             size        offset  fstype [fsize bsize  cpg]
  OpenBSD area: 1537.5M-19092.9M; size: 17555.4M; free: 17555.4M
    c:      19092.9M          0.0M  unused      0     0
    i:       1498.7M          0.0M  MSDOS
  > <b>a a</b>
  offset: [3148740] <b><i>Enter</i></b>
  size: [35953470] <b>150m</b>
  Rounding to cylinder: 321300
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/</b>
  > <b>a b</b>
  offset: [3470040] <b><i>Enter</i></b>
  size: [35632170] <b>300m</b>
  Rounding to cylinder: 626535
  FS type: [swap] <b><i>Enter</i></b>
  > <b>a d</b>
  offset: [4096575] <b><i>Enter</i></b>
  size: [35005635] <b>120m</b>
  Rounding to cylinder: 257040
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/tmp</b>
  > <b>a e</b>
  offset: [4353615] <b><i>Enter</i></b>
  size: [34748595] <b>80m</b>
  Rounding to cylinder: 176715
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/var</b>
  > <b>a g</b>
  offset: [4530330] <b><i>Enter</i></b>
  size: [34571880] <b>6g</b>
  Rounding to cylinder: 12594960
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/usr</b>
  > <b>a h</b>
  offset: [17125290] <b><i>Enter</i></b>
  size: [21976920] <b>4g</b>
  Rounding to nearest cylinder: 8401995
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/home</b>
  > <b>p m</b>
  OpenBSD area: 1537.5M-19092.9M; size: 17555.4M; free: 6628.4M
  #             size        offset  fstype [fsize bsize  cpg]
    a:           156.9M          1537.5M  4.2BSD   2048 16384    1 # /
    b:           305.9M          1694.4M    swap
    c:         19092.9M             0.0M  unused      0     0
    d:           125.5M          2000.3M  4.2BSD   2048 16384    1 # /tmp
    e:            86.3M          2125.8M  4.2BSD   2048 16384    1 # /var
    g:          6149.9M          2212.1M  4.2BSD   2048 16384    1 # /usr
    h:          4102.5M          8362.0M  4.2BSD   2048 16384    1 # /home
    i:          1537.4M             0.0M   MSDOS
  > <b>q</b>
  Write new label?: [y] <b><i>Enter</i></b>
</pre></td></tr></table>
d830 2
a831 15
You will note there is a <i>c</i> partition we seem to have ignored.  This
partition is your entire hard disk; don't attempt to alter it.  You will
also note the <i>i</i> partition wasn't defined by us; this is the
pre-existing Windows 2000 partition. Partitions are not assigned any particular letters -- with the exception
of <i>a</i> (root), <i>b</i> (swap) and <i>c</i> (entire disk), the rest
of the partitions (through letter <i>p</i>) are available for use as you
desire.

<h3>Configuring your mount points and formatting your filesystems</h3>

Now comes the final configuration of your mount points.  If you configured the
mount points through
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>,
this step consists of just verifying
your selections; otherwise, you can specify them now.
d833 2
a834 41
<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Mount point for wd0d (131584 KBytes)? (or 'none' or 'done') [/tmp] <b><i>Enter</i></b>
  Mount point for wd0e (90624 KBytes)? (or 'none' or 'done') [/var] <b><i>Enter</i></b>
  Mount point for wd0g (6656 MBytes)? (or 'none' or 'done') [/usr] <b><i>Enter</i></b>
  Mount point for wd0h (4096 MBytes)? (or 'none' or 'done') [/home] <b><i>Enter</i></b>
  Mount point for wd0d (131584 KBytes)? (or 'none' or 'done') [/tmp] <b>done</b>
  No more disks to initialize.

  OpenBSD filesystems:
  wd0a /
  wd0d /tmp
  wd0e /var
  wd0g /usr
  wd0h /home

  The next step *DESTROYS* all existing data on these partitions!
  Are you really sure that you're ready to proceed? [no] <b>y</b>
  newfs: reduced number of fragments per cylinder group from 20080 to 19992 to enl
  arge last cylinder group
  /dev/rwd0a: 156.9MB in 321300 sectors of 512 bytes
  5 cylinder groups of 39.05MB, 2499 blocks, 5120 inodes each
  newfs: reduced number of fragments per cylinder group from 16064 to 15992 to enl
  arge last cylinder group
  /dev/rwd0d: 125.5MB in 257040 sectors of 512 bytes
  5 cylinder groups of 31.23MB, 1999 blocks, 4096 inodes each
  newfs: reduced number of fragments per cylinder group from 11040 to 10992 to enl
  arge last cylinder group
  /dev/rwd0e: 86.3MB in 176712 sectors of 512 bytes
  5 cylinder groups of 21.47MB, 1374 blocks, 2816 inodes each
  /dev/rwd0g: 6149.9MB in 12594960 sectors of 512 bytes
  31 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0h: 4102.5MB in 8401992 sectors of 512 bytes
  21 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/wd0a on /mnt type ffs (rw, asynchronous, local, ctime=Tue Oct 21 00:36:28 2
  008)
  /dev/wd0h on /mnt/home type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0d on /mnt/tmp type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0g on /mnt/usr type ffs (rw, asynchronous, local, nodev)
  /dev/wd0e on /mnt/var type ffs (rw, asynchronous, local, nodev)
</pre></td></tr></table>
d836 5
a840 11
<p>
You may wonder why the installer again asks for mount points.  This
allows you to recover from any errors or omissions in the mount
points specified during the creation of the disklabel. For instance,
the installation process will automatically delete any duplicate
mount points you enter during the configuration of the disklabel. The
disklabel program will allow you to enter such duplicates, and thus
they must be checked for after the disklabel program exits. The
deleted duplicate mount points will result in partitions without mount
points, that you must assign new mount points for if you wish to use
the space.
d843 2
a844 5
Notice the "Are you really sure that you are ready to proceed?" question
defaults to no, so you will have to deliberately tell it to proceed and
format your partitions. If you chose no, you would simply be dropped
into a shell and could start the install again by typing "install", or
just by rebooting again with your boot disk.
d847 8
a854 3
At this point all filesystems will be formatted for you.  This could take
some time depending on the size of the partitions and the speed of the
disk.
a855 2
<a name="Hostname"></a>
<h3>4.5.3 - 设置主机名称</h3>
d857 21
a877 7
Now you must set the system hostname.
This value, along with the DNS domain name (specified
<a href="#Network">below</a>), will be saved in the
file <tt>/etc/myname</tt>, which is used during normal boot to set
the hostname of the system.
If you do not set the domain name of the system, the default value of
'my.domain' will be used.
d880 1
a880 4
It is important to set this name now, because it will be used when the
cryptographic keys for the system are generated during the first boot
after installation. This generation takes place whether the network is
configured or not.
d884 13
a896 1
  System hostname (short form, e.g. 'foo'): <b>puffy</b>
d898 11
d910 8
a917 2
<a name="Network"></a>
<h3>4.5.4 - 配置网络</h3>
d919 5
a923 9
<p>
Now it is time to configure your network.  The network must be
configured if you are planning on doing an FTP or NFS based install,
considering it will be based upon the information you are about to
enter. Here is a walk through of the network configuration section of
the install process.
In our example, we will attach one interface (fxp0) to a cable modem,
which will be configured using DHCP, the other will be to our internal
network, and configured statically.
d926 3
a928 33
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Configure the network? [yes] <b><i>Enter</i></b>
  Available interfaces are: fxp0 xl0.
  Which one do you wish to initialize? (or 'done') [fxp0] <b>xl0</b>
  Symbolic (host) name for xl0? [puffy] <b><i>Enter</i></b>
  The media options for xl0 are currently
          media: Ethernet autoselect (100baseTX full-duplex)
  Do you want to change the media options? [no] <b><i>Enter</i></b>
  IPv4 address for xl0? (or 'dhcp') <b>192.168.1.254</b>
  Netmask? [255.255.255.0] <b><i>Enter</i></b>
  IPv6 address for xl0? (or 'rtsol' or 'none') [none] <b><i>Enter</i></b>
  Available interfaces are: fxp0.
  Which one do you wish to initialize? (or 'done') [fxp0] <b><i>Enter</i></b>
  Symbolic (host) name for fxp0? [puffy] <b><i>Enter</i></b>
  The media options for fxp0 are currently
          media: Ethernet autoselect (10baseT half-duplex)
  Do you want to change the media options? [no] <b><i>Enter</i></b>
  IPv4 address for fxp0? (or 'none' or 'dhcp') <b>dhcp</b>
  Issuing hostname-associated DHCP request for fxp0.
  DHCPDISCOVER on fxp0 to 255.255.255.255 port 67 interval 1
  DHCPOFFER from 73.34.136.1
  DHCPREQUEST on fxp0 to 255.255.255.255 port 67
  DHCPACK from 73.34.136.1
  bound to 69.241.244.76 -- renewal in 1800 seconds.
  IPv6 address for fxp0? (or 'rtsol' or 'none') [none] <b><i>Enter</i></b>
  No more interfaces to initialize.
  DNS domain name? (e.g. 'bar.com') [my.domain] <b>example.com</b>
  DNS nameserver? (IP address or 'none') [68.87.77.130 68.87.72.130] <b><i>Enter</i></b>
  Use the nameserver now? [yes] <b><i>Enter</i></b>
  Default route? (IP address, 'dhcp' or 'none') [dhcp] <b><i>Enter</i></b>
  Edit hosts with ed? [no] <b><i>Enter</i></b>
  Do you want to do any manual network configuration? [no] <b><i>Enter</i></b>
</pre></td></tr></table>
d931 3
a933 5
<b>NOTE: </b>Only <b>one</b> interface can easily be configured using
DHCP during an install. If you attempt to configure more than one
interface using DHCP you will encounter errors.
You will have to manually
configure the additional DHCP interfaces after the installation.
a935 2
Now, we set the password for the root account:
<p>
d937 15
a951 2
Password for root account? (will not echo) <b><i>pAssWOrd</i></b>
Password for root account? (again) <b><i>pAssWOrd</i></b>
d953 1
d955 2
a956 9
Use a secure password for the root account.  You will create other
user accounts after the system is booted.  From
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=passwd&amp;sektion=1">passwd(1)</a>:
<pre>
    The new password should be at least six characters long and not purely
    alphabetic.  Its total length must be less than _PASSWORD_LEN (currently
    128 characters).  A mixture of both lower and uppercase letters, numbers,
    and meta-characters is encouraged.
</pre>
d958 5
a962 2
<a name="InstMedia"></a>
<h3>4.5.5 - 选择安装媒体</h3>
d965 4
a968 2
After your network is set up, the install script will give you a chance
to make manual adjustments to the configuration.
d971 4
a974 2
Next, you will get a chance to choose your installation media. The
options are listed below.
d978 27
a1004 3
  Let's install the sets!
  Location of sets? (cd disk ftp http or 'done') [cd] <b><i>Enter</i></b>
  Available CD-ROMs are: cd0.
a1007 4
In this example we are installing from CD-ROM. This will bring up a list
of devices on your computer identified as a CD-ROM. Most people will
only have one. If you need to, make sure you pick the device
which you will use to install OpenBSD from.
d1009 5
a1013 4
<p>
<b>NOTE: </b>Not all platforms support all installation options.
In this case, the OpenBSD/i386 platform does not support NFS installs,
so they are not shown on this list.
d1015 2
d1019 3
a1021 3
  Available CD-ROMs are: cd0.
  Which one contains the install media? (or 'done') [cd0] <b><i>Enter</i></b>
  Pathname to the sets?  (or 'done') [4.5/i386] <b><i>Enter</i></b>
d1023 5
d1030 4
a1033 3
Here, you are prompted for which directory the installation files are,
which is <tt>4.5/i386/</tt> on the official CD-ROM or a CD built
from <tt>install45.iso</tt>.
d1035 2
a1036 2
<a name="Filesets"></a>
<h3>4.5.6 - 选择文件集</h3>
d1039 1
a1039 10
Now it's time to choose which file sets you will be installing. You can
get a description of these files in <a href="#FilesNeeded">the next
section</a>. The files that the install program finds will be shown to
you on the screen. Your job is just to specify which files you want. By
default all the non-X file sets are selected; however, some advanced
users may
wish to limit this to the bare minimum required to run OpenBSD, which
would be <tt>base45.tgz</tt>, <tt>etc45.tgz</tt> and <tt>bsd</tt>.
Most people will want to install the default file sets or all file sets.
The example below is that of a full install.
d1045 7
a1051 1
  sets are labeled '[x]'.
a1052 82
          [X] bsd
          [X] bsd.rd
          [ ] bsd.mp
          [X] base45.tgz
          [X] etc45.tgz
          [X] misc45.tgz
          [X] comp45.tgz
          [X] man45.tgz
          [X] game45.tgz
          [ ] xbase45.tgz
          [ ] xetc45.tgz
          [ ] xshare45.tgz
          [ ] xfont45.tgz
          [ ] xserv45.tgz
  Set name? (or 'done') [bsd.mp] <b>all</b>

          [X] bsd
          [X] bsd.rd
          [X] bsd.mp
          [X] base45.tgz
          [X] etc45.tgz
          [X] misc45.tgz
          [X] comp45.tgz
          [X] man45.tgz
          [X] game45.tgz
          [X] xbase45.tgz
          [X] xetc45.tgz
          [X] xshare45.tgz
          [X] xfont45.tgz
          [X] xserv45.tgz
</pre></td></tr></table>

<p>
You can do all kinds of nifty things here -- "<tt>-x*</tt>" would remove
all X components, if you changed your mind.  In this case, we are going
to load all the sets.  While the system will run with fewer sets, either
the starting default or installing all sets is recommended.
More details on selecting sets <a href="#FilesNeeded">here</a>.

<p>
Once you have successfully picked which file sets you want, you will be
prompted to make sure you want to extract these file sets and they will
then be installed. A progress bar will be shown that will keep you
informed on how much time it will take. The times range greatly
depending on what system it is you are installing OpenBSD on, the
file sets installed, and the speed of the source media.  This part may take
from a few minutes to several hours.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Set name? (or 'done') [done] <b><i>Enter</i></b>
  Ready to install sets? [yes] <b><i>Enter</i></b>
  Getting bsd ...
  100% |**************************************************|  6539 KB    00:01
  Getting bsd.rd ...
  100% |**************************************************|  5461 KB    00:01
  Getting bsd.mp ...
  100% |**************************************************|  6558 KB    00:01
  Getting base45.tgz ...
  100% |**************************************************| 46941 KB    00:29
  Getting etc45.tgz ...
  100% |**************************************************|   501 KB    00:00
  Getting misc45.tgz ...
  100% |**************************************************|  2866 KB    00:01
  Getting comp45.tgz ...
  100% |**************************************************| 87874 KB    00:43
  Getting man45.tgz ...
  100% |**************************************************|  8032 KB    00:07
  Getting game45.tgz ...
  100% |**************************************************|  2555 KB    00:01
  Getting xbase45.tgz ...
  100% |**************************************************|  9761 KB    00:05
  Getting xetc45.tgz ...
  100% |**************************************************| 75214       00:00
  Getting xshare45.tgz ...
  100% |**************************************************|  2698 KB    00:05
  Getting xfont45.tgz ...
  100% |**************************************************| 34745 KB    00:16
  Getting xserv45.tgz ...
  100% |**************************************************| 19478 KB    00:09
  Location of sets? (cd disk ftp http or 'done') [done] <b><i>Enter</i></b>
</pre></td></tr></table>
d1055 22
a1076 4
At this point, you can pull additional files from other sources
(including <a href="#site">custom file sets</a>) if
desired, or hit '<tt>done</tt>' if you have installed all the file sets
you need.
d1078 17
a1094 2
<a name="Finish"></a>
<h3>4.5.7 - 结束</h3>
d1096 5
a1100 8
Next, you get asked a few questions about settings for your
installed system.
First is whether
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd&amp;sektion=8">sshd(8)</a>
should be started on boot.
Usually, you will want sshd(8) running, but occasionally you may not.
If your application has no need for sshd(8), there is a small
theoretical security advantage to not having it running.
d1103 2
d1106 10
a1115 1
  Start sshd(8) by default? [yes] <b>y</b>
d1118 13
d1132 18
a1149 2
(If you change your mind later, alter <a href="../faq10.html"
><tt>/etc/rc.conf.local</tt></a> or <tt>/etc/rc.conf</tt>.)
d1152 34
a1185 6
You will be given the option to run
<a href="../faq6.html#OpenNTPD">OpenNTPD</a>
on boot.
OpenNTPD is a low-impact way to keep your computer's clock accurately
synchronized, and the default configuration is sufficient for many
people's use.
d1189 4
a1192 1
  NTP server? (or 'none' or 'default') [none] <b>default</b>
d1196 9
a1204 5
If you have a local time server, you can specify it here, if you
chose "default", OpenNTPD will use <tt>pool.ntp.org</tt>, a huge
collection of free access time servers.
(If you change your mind later, alter <a href="../faq10.html"
><tt>/etc/rc.conf.local</tt></a> and/or <tt>/etc/ntpd.conf</tt>.)
d1207 2
a1208 13
On some platforms,
you will now be asked if you plan to run X on this system.  If you
answer 'Y', <tt>/etc/sysctl.conf</tt> will be modified to include the
line <tt>machdep.allowaperture=1</tt> or <tt>machdep.allowaperture=2</tt>,
depending on your platform.
Some platforms will not ask this question at all.
If you do not intend to run X on this system or are not sure, answer 'N'
here, as you can easily change it by editing <tt>/etc/sysctl.conf</tt>
should you need to later.
There is a potential security advantage to leaving this aperture driver
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xf86&amp;sektion=4">xf86(4)</a>
disabled, as the graphics engine on a modern video card could
potentially be used to alter memory beyond the processor's control.
d1212 4
a1215 1
  Do you expect to run the X Window System? [no] <b>y</b>
d1219 9
a1227 9
Next, you are asked if you are wanting to use a
<a href="../faq7.html#SerCons">serial console</a> with this computer,
rather than a standard keyboard and monitor.
If you chose "<tt>yes</tt>" and answer a couple other simple questions,
<tt><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot.conf&amp;sektion=8">/etc/boot.conf</a></tt>
and
<tt><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ttys&amp;sektion=5">/etc/ttys</a></tt>
will be edited appropriately for you.
Most users will take the default, <b><tt>no</tt></b> here.
d1231 26
a1256 1
  Change the default console to com0? [no] <b><i>Enter</i></b>
d1260 29
a1288 6
Your last task is to enter the time zone.  Depending on where your
machine lives, there are may be several equally valid answers for the
question.  In the example that follows, we used <tt>US/Eastern</tt>, but
could also have used <tt>EST5EDT</tt> or <tt>US/Michigan</tt> and had
the same result.  Hitting <tt>?</tt> at the prompts will guide you
through your choices.
d1292 1
a1292 3
  Saving configuration files......done.
  Generating initial host.random file ......done.
  What timezone are you in? ('?' for list) [Canada/Mountain] <b>?</b>
d1303 3
a1305 3
  Canada/      GB           Iran         NZ           Turkey       zone.tab
  What timezone are you in? ('?' for list) [Canada/Mountain] <b>US</b>
  What sub-timezone of 'US' are you in? ('?' for list) <b>?</b>
d1309 117
a1425 2
  Select a sub-timezone of 'US' ('?' for list): <b>Eastern</b>
  Setting local timezone to 'US/Eastern'...done.
d1429 102
a1530 2
If you are concerned about very precise time, you may wish to read
<a href="../faq8.html#NTPerror">this</a>.
d1533 6
a1538 4
The last steps are for the system to create the <tt>/dev</tt> directory
(which may take a while on some systems, especially if you have a small
amount of RAM), and install the
boot blocks.
d1541 13
a1553 12
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Making all device nodes...done.
  Installing boot block...
  boot: /mnt/boot
  proto: /usr/mdec/biosboot
  device: /dev/rwd0c
  /usr/mdec/biosboot: entry point 0
  proto bootblock size 512
  /mnt/boot is 3 blocks x 16384 bytes
  fs block shift 2; part offset 3069360; inode block 24, offset 3624
  using MBR partition 1: type 166 (0xa6) offset 3069360 (0x2ed5b0)
  done.
d1555 3
a1557 5
  CONGRATULATIONS! Your OpenBSD install has been successfully completed!
  To boot the new system, enter halt at the command prompt. Once the
  system has halted, reset the machine and boot from the disk.
  # <b>halt</b>
  syncing disks... done
d1559 5
a1563 2
  The operating system has halted.
  Please press any key to reboot.
d1567 33
a1599 2
OpenBSD is now installed on your system and ready for its first
boot, but before you do...
d1602 5
d1608 3
a1610 5
<h4>Before you reboot</h4>
At this point, your system is installed and ready to be rebooted and
configured for service.  Before doing this, however, it would be wise to
check out the <a href="../../zh/errata.html">Errata page</a> to see if there
are any bugs that would immediately impact you.
d1613 4
a1616 9
A trick you can use for some "before first boot" configuration is to run:
<pre>
    # <b>/mnt/usr/sbin/chroot /mnt</b>
</pre>
at the shell prompt.
This will set your mount points to be what they will be on a normal
reboot of your newly installed system.
You can now do some basic system configuration, such as adding users,
changing mount points, etc.
d1618 2
a1619 1
<h4>After you reboot</h4>
d1622 13
a1634 2
One of your first things to read after you install your system is
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=afterboot&amp;sektion=8">afterboot(8)</a>.
d1637 3
a1639 1
You may also find the following links useful:
d1641 4
a1644 7
<li><a href="../faq10.html#AddDelUser">Adding users in OpenBSD</a>
<li><a href="../faq6.html#Setup">Initial Network Setup</a>
<li><a href="../faq2.html#ManPages">Man Pages of popular/useful commands</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi">OpenBSD man pages on
  the Web</a>
<li><a href="faq15.html">The OpenBSD Packages and Ports system for
  installing software</a>
d1647 333
a1979 5
<h4>One last thing...</h4>
The OpenBSD developers ask you to
<a href="#SendDmesg">Send in a copy of your dmesg</a>.  This is
really appreciated by the developers, and ultimately, all
users.
d1983 1
a1983 1
<h2>4.6 - 安装时需要什么文件?</h2>
d1988 5
a1992 2
separate <i>file sets</i>.  Not every application requires every
file set.  Here is an overview of each:
d1999 1
a1999 1
  <li><b><i>base45.tgz</i></b>   - Contains the base OpenBSD system
d2001 1
a2001 1
  <li><b><i>etc45.tgz</i></b>    - Contains all the files in /etc
d2003 6
a2008 6
  <li><b><i>comp45.tgz</i></b>    - Contains the compiler and its
    tools, headers and libraries. <b>Recommended</b>
  <li><b><i>man45.tgz</i></b>    - Contains man pages <b>Recommended</b>
  <li><b><i>misc45.tgz</i></b>   - Contains misc info, setup documentation
  <li><b><i>game45.tgz</i></b>   - Contains the games for OpenBSD
  <li><b><i>xbase45.tgz</i></b>  - Contains the base libraries and
d2010 1
a2010 1
  <li><b><i>xetc45.tgz</i></b>   - Contains the /etc/X11 and /etc/fonts
d2012 3
a2014 3
  <li><b><i>xfont45.tgz</i></b>  - Contains X11's font server and fonts
  <li><b><i>xserv45.tgz</i></b>  - Contains X11's X servers
  <li><b><i>xshare45.tgz</i></b> - Contains manpages, locale settings,
d2018 1
a2018 1
The <b>etc45.tgz</b> and <b>xetc45.tgz</b> sets are not installed as
d2025 1
a2025 1
<h3>Why do I have to install xbase45.tgz for my application?</h3>
d2028 5
a2032 6
utilities in
<b>xbase45.tgz</b> to be installed on your system.
These applications can usually be satisfied simply by installing
xbase45.tgz, the rest of X is not needed.
Many people resist installing xbase45.tgz on their system without
valid reason:
d2035 1
a2035 1
<li>By itself, installing xbase45.tgz does not cause any program to
d2037 1
a2037 1
<li>By itself, installing xbase45.tgz on a system does not change the
d2040 3
a2042 3
whatever they wish, so the presence or absence of the xbase45.tgz file
set does not appreciably change the situation.
<li>The only parts of xbase45.tgz that are running are the parts
d2044 1
a2044 1
<li>The space required for xbase45.tgz is relatively modest, about 30M.
d2048 1
a2048 1
xbase45.tgz and pull out just the files they need to install their
d2055 1
a2055 1
IF you need xbase45.tgz, just install it.
a2057 2
Note that compiling from source will often require more of X to be
installed, but the above points still apply.
d2060 18
d2080 1
a2080 2
<a name= "SpaceNeeded"></a>  <!-- XXXobsolete tag -->
<h2>4.7 - 安装 OpenBSD 需要多大空间?</h2>
d2086 17
a2102 93
However, these numbers can be used as a <i>starting</i> point:

<blockquote><pre>
(root)             60MB
/usr               500MB (no X) or 660MB (with X)
/var               25MB
/tmp               50MB
swap               32MB
</pre></blockquote>

Those are minimum suggested filesystem sizes for a full system
install.
The numbers include enough extra space to permit you to run a typical
home system that is connected to the Internet, but not much else.

<p>
Keep the following facts in mind, however:
<ul>
<li>These are minimum values.
Disk space is relatively cheap now, trying to squeeze your system into
the smallest possible disk is rarely worth the effort.
For special purpose applications, the above numbers can be made
smaller, but you will need to experiment with it.
<li>These numbers do NOT include the ports tree.
<li>If you plan to install a significant amount of third party software,
make your <tt>/usr</tt> partition much larger.
How large will depend on your applications, of course.
<li>For a system that handles lots of email or web pages (stored,
respectively, in <tt>/var/mail</tt> and <tt>/var/www</tt>) you will want
to make your <tt>/var</tt> partition significantly larger, or put them
on separate partitions.
<li>For a multiuser system which may generate lots of logs, you will
want to make your <tt>/var</tt> partition significantly larger still,
or create a separate log partition
(<tt>/var/log</tt>).
<li>If you plan to <a href="faq5.html">rebuild the kernel and system from
source</a>, you will
want to make the <tt>/usr</tt> partition significantly larger,
4G is not a bad size.
<li>Compiling some <a href="faq15.html#Ports">ports</a> from source can
take huge amounts of space on your <tt>/usr</tt> and <tt>/tmp</tt>
partitions. This is another reason we suggest using
<a href="faq15.html#PkgMgmt">pre-compiled packages</a> instead.
<li>The <tt>/tmp</tt> partition is used in the compiling of ports, among
other things, so how big you make it depends on what you do with it.
50M may be plenty for most people, but some large applications may
require 100M or more of <tt>/tmp</tt> space.

<li>The 'b' partition of your root drive automatically becomes your
system swap partition.
Many people follow an old rule of thumb that your swap partition should
be twice the size of your main system RAM.
This rule is nonsense.
On a modern system, that's a LOT of swap, most people prefer that their
systems never swap.
You don't want your system to ever run out of RAM+swap, but you usually
would rather have enough RAM in the system so it doesn't need to swap.
If you are using a flash device for disk, you probably want no swap
partition at all.
Use what is appropriate for your needs.
If you guess wrong, you can add another swap partition in <i>/etc/fstab</i>
or <a href="../faq14.html#SwapFile">swap to a file</a> later.
<li>Swap and <tt>/var</tt> spaces are used to store system core dumps
on in the event of a
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=crash&amp;sektion=8">crash(8)</a>.
If this is a consideration for you, your swap space should be slightly
larger than the amount of main memory you are likely to ever have in the
system.
Upon reboot,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=savecore&amp;sektion=8">savecore(8)</a>
will attempt to save the contents of the swap partition to a file in
<tt>/var/crash</tt> so again, if this is a priority for you, your
<tt>/var</tt> partition must have enough <i>free space</i> to hold these
dump files.
Be realistic -- few developers will want to look at your 1GB dump file,
so if you aren't planning on investigating a crash locally, this is
probably not a concern.
<li>At least some editors use <tt>/var/tmp</tt> for scratch space, and
this often needs to be as big or bigger than the largest file you edit.
If you plan on editing 500M files, your <tt>/var</tt> or
<tt>/var/tmp</tt> partition will need to be much larger than you might
have planned on.
</ul>

<p>
There are several reasons for using separate filesystems, instead of
shoving everything into one or two filesystems:

<ul>
<li><b>Security</b>: You can mark some filesystems as 'nosuid', 'nodev',
  'noexec', 'readonly', etc.  This is done by the install process,
  if you use the above described partitions.
<li><b>Stability</b>: A user, or a misbehaved program, can fill a
d2104 1
a2104 1
  critical programs, which of course run on a different filesystem, do
d2106 1
a2106 1
<li><b>Speed</b>: A filesystem which gets written to frequently may get
d2109 3
a2111 3
<li><b>Integrity</b>: If one filesystem is corrupted for some reason
  then your other filesystems are still OK.
<li><b>Size</b>: Many machines have limits on the area of a disk where
d2114 112
a2225 7
  limit (for example, 2G, 8G, or 128G on i386 systems).
  As the kernel can end up anywhere within
  the root partition, the entire root partition should be within this
  area. For more details, see <a href="../faq14.html#LargeDrive">this
  section</a>.  A good guideline might be to keep your / partition
  completely below 2G, unless you know your platform (and particular
  machine) can handle more (or less) than that.
d2256 1
a2256 1
   find it a challenge to buy a new drive smaller than 20G, it can make
d2259 1
a2259 1
   <a href="../faq10.html#DupFS">duplicate</a> your existing partition to
d2271 1
a2271 1
   (please also refer to <a href="../faq14.html#LargeDrive">this section</a>).
d2274 1
a2274 1
   can use <a href="../faq10.html#Quotas">quotas</a> to restrict the space
d2292 11
d2308 1
a2308 1
<h2>4.8 - OpenBSD 与多启动</h2>
d2311 1
a2311 1
some means of selecting the which OS is to boot.  It is <i>not</i> a
d2317 1
a2317 1
production machine.  <a href="../faq14.html">FAQ 14</a> has more
d2332 1
a2332 1
this; OpenBSD's is <a href="../faq14.html#fdisk">fdisk(8)</a>, similar
d2357 1
d2360 1
a2360 1
In this case, the
d2379 1
a2379 1
    # <strong>dd if=/dev/rsd0a of=openbsd.pbr bs=512 count=1</strong>
d2392 1
a2392 1
    c:\openbsd.pbr="OpenBSD"
d2399 1
a2399 1
Hacking Guide.</a>
d2410 1
a2410 1
add it to <tt>C:\BOOT.INI</tt>
d2417 32
d2450 92
a2546 1
OS-BS,
d2556 1
a2556 1
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.5/i386/INSTALL.linux">INSTALL.linux</a>,
d2566 1
a2566 1
More info on doing this is in <a href="../faq8.html#TimeZone">FAQ 8 - Why
d2570 1
a2570 1
<h2>4.9 - 安装后将你的 dmesg 发送到 dmesg@@openbsd.org</h2>
d2653 1
a2653 1
<h2>4.10 - 安装后增加文件集</h2>
d2657 1
a2657 1
Sometimes, you realize you really DID need <tt>comp45.tgz</tt> (or any
d2675 1
a2675 1
  # tar xzvphf comp45.tgz
d2708 1
a2708 1
<h2>4.11 - “bsd.rd” 是什么?</h2>
d2752 1
a2752 1
<h2>4.12 - 常见安装问题</h2>
d2755 1
a2755 1
<h3>4.12.1 - 我的 Compaq 只能识别 16M 内存</h3>
d2781 1
a2781 1
<h3>4.12.2 - 我的 i386 安装后不能启动</h3>
d2790 1
a2790 1
<a href="../faq14.html#fdisk">here</a> and
d2794 3
a2796 3
If you answer "Y" to the "Use entire disk for OpenBSD?" question during
the install, or use the "<tt>reinit</tt>" option
of fdisk(8), the
d2813 1
a2813 1
loader is discussed <a href="../faq14.html#InstBoot">here</a>.
d2818 2
a2819 1
<h3>4.12.3 - 我的(老而慢的)机器启动后，在 ssh-keygen 进程挂起</h3>
d2831 1
a2831 1
computer, place them in a <a href="#site">site45.tgz</a> file, and
d2836 2
a2837 1
<h3>4.12.4 - 安装期间出现信息“改变目录失败”</h3>
d2855 1
a2855 1
<a href="../faq1.html#Next">release date</a>, so you get the above message.
d2858 1
a2858 1
Simply use the <a href="../../zh/ftp.html">FTP mirror list</a> to find your
d2866 1
a2866 1
<h3>4.12.5 - 我的分区表乱七八糟或空白!</h3>
d2874 2
a2875 2
(note: this is assuming the <a href="../../i386.html">i386</a> or
<a href="../../amd64.html">amd64</a> platform.
d2878 1
a2878 1
The system then <a href="../faq14.html#Boot386">boots</a> using the PBR,
d2890 1
a2890 1
<h3>4.12.6 - I have no floppy or CD-ROM on my machine</h3>
d2928 1
a2928 1
<h2>4.13 - 定制安装过程</h2>
d2934 1
a2934 1
version (e.g. 45).  The <tt>siteXX.tgz</tt> file set is, like the other
d2951 1
a2951 1
"<tt>site43-puffy.tgz</tt>".
d3013 1
a3013 1
<li> Do an <a href="../faq14.html#Backup">immediate backup/archive</a> of
d3035 1
a3035 1
<h2>4.14 - 如何简化安装多个相似系统的工作?</h2>
d3049 1
a3049 1
<a href="../../zh/orders.html">CD</a>, or
d3051 2
a3052 2
<a href="../faq14.html#fdisk">fdisk</a>,
<a href="../faq14.html#disklabel">disklabel</a>, and
d3055 2
a3056 2
<a href="../faq14.html#InstBoot">boot blocks</a>. More details
<a href="../faq14.html#Backup">here</a>.
d3078 2
a3079 2
<h2>4.15 - 如何获得 dmesg(8) 报告安装问题?</h2>
When <a href="../../report.html">reporting a problem</a>, it is critical to
d3085 1
a3085 1
<a href="../../mail.html">mail list</a>.  There are other ways, however:
d3113 1
a3113 1
<a href="../faq7.html#SerCon">elsewhere in the FAQ</a>;
d3157 2
a3158 2
<a href= "../faq3.html">[到 3 - 开始使用 OpenBSD]</a>
<a href= "../faq5.html">[到 5 - 从源代码构建系统]</a>
d3166 1
a3166 1
<small>$OpenBSD: faq4.html,v 1.13 2009/11/07 10:54:26 dongsheng Exp $</small>
d3170 2
a3171 2
Originally [OpenBSD: faq4.html,v 1.280]<br>
$Translation: faq4.html,v 1.14 2009/11/10 13:28:09 dongsheng Exp $<br>
@


1.12
log
@Sync with Steelix CVS
@
text
@d2624 1
a2624 1
<small>$OpenBSD: faq4.html,v 1.280 2009/06/02 01:01:00 nick Exp $</small>
d2629 1
a2629 1
$Translation: faq4.html,v 1.13 2009/06/04 05:25:35 dongsheng Exp $<br>
@


1.11
log
@Sync with Steelix CVS
@
text
@d2451 5
a2455 3
script is run after all the files are installed, you have almost full
functionality of your system (though, in single user mode) when your
script runs.
d2470 1
a2470 1
system.
d2624 1
a2624 1
<small>$OpenBSD: faq4.html,v 1.279 2009/04/30 17:19:11 nick Exp $</small>
d2628 2
a2629 2
Originally [OpenBSD: faq4.html,v 1.279]<br>
$Translation: faq4.html,v 1.12 2009/05/01 05:32:51 dongsheng Exp $<br>
@


1.10
log
@Sync with Steelix CVS
@
text
@d4 1
a4 1
<title>4 - OpenBSD 4.4 安装指南</title>
d29 1
a29 1
<h1><font color="#e00000">4 - OpenBSD 4.4 安装指南</font></h1>
d69 1
d107 1
a107 1
Typical file names are <tt>floppy44.fs</tt>, though several platforms
d111 1
a111 1
(<tt>cd44.iso</tt> for just booting, or <tt>install44.iso</tt> for the
d158 1
a158 1
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.4/mac68k/INSTALL.mac68k">INSTALL.mac68k</a>
d177 1
a177 1
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.4/zaurus/INSTALL.zaurus">INSTALL.zaurus</a>
d193 1
a193 1
<tt>install44.iso</tt> or you can also make your own.
d285 1
a285 1
<li><b><tt>floppy44.fs</tt></b> (Desktop PC) supports many
d289 1
a289 1
<li><b><tt>floppyB44.fs</tt></b> (Servers) supports many RAID controllers,
d293 1
a293 1
<li><b><tt>floppyC44.fs</tt></b> (Laptops) supports the CardBus and PCMCIA
d295 1
a295 1
<li><b><tt>cd44.iso</tt></b> is an ISO9660 image that can be used to
d300 1
a300 1
<li><b><tt>cdemu44.iso</tt></b> is an ISO9660 image, using
d303 3
a305 3
  image -- most people will use <tt>cd44.iso</tt>, only use
  <tt>cdemu44.iso</tt> if <tt>cd44.iso</tt> doesn't work for you.
<li><b><tt>install44.iso</tt></b> is an ISO9660 image, containing
d321 2
a322 2
<li><b><tt>floppy44.fs:</tt></b> Supports systems with a floppy disk.
<li><b><tt>cd44.iso</tt></b> An ISO image usable to make your own
d324 1
a324 1
<li><b><tt>miniroot44.fs</tt></b> Can be written to a swap partition
d326 1
a326 1
<li><b><tt>install44.iso</tt></b> is an ISO9660 image, containing
d368 1
a368 1
  # <b>dd if=floppy44.fs of=/dev/rfd0c bs=32k</b>
d380 1
a380 1
  # <b>cmp /dev/rfd0c floppy44.fs</b>
d390 1
a390 1
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.4/tools/">tools</a>
d405 1
a405 1
  C:\> <strong>ntrw floppy44.fs a:</strong>
d415 2
a416 2
You can create a CD-ROM using the <tt>cd44.iso</tt> or
<tt>install44.iso</tt> files.
d561 1
a561 1
<tt>etc44.tgz</tt> file.
d563 2
a564 2
<a href="../upgrade44.html#etcUpdates">manually merge</a> the changes of
<tt>etc44.tgz</tt> into your system before you can expect it to be
d573 1
a573 1
For OpenBSD 4.4, upgrading 4.3 to 4.4 is the only supported upgrade.
d581 1
a581 1
<a href="../upgrade44.html">OpenBSD Upgrade Guide 4.4</a>.
d598 1
a598 1
  Welcome to the OpenBSD/i386 4.4 install program.
d933 2
a934 6
  disklabel: no disk label
  WARNING: Disk wd0 has no label. You will be creating a new one.

  # using MBR partition 1: type A6 off 3069360 (0x2ed5b0) size 36030960 (0x225c9f0)

  Treating sectors 3069360-39100320 as the OpenBSD portion of the disk.
d940 16
a955 26
          ? [cmnd]  - this message or command specific help.
          a [part]  - add new partition.
          b         - set OpenBSD disk boundaries.
          c [part]  - change partition size.
          D         - set label to default.
          d [part]  - delete partition.
          e         - edit drive parameters.
          g [b|d|u] - use [b]ios, [d]isk or [u]ser geometry.
          M         - show entire OpenBSD man page for disklabel.
          m [part]  - modify existing partition.
          n [part]  - set the mount point for a partition.
          p [unit]  - print label.
          q         - quit and save changes.
          r         - recalculate free space.
          s [path]  - save label to file.
          u         - undo last change.
          w         - write label to disk.
          X         - toggle expert mode.
          x         - exit without saving changes.
          z         - zero out partition table.
  Numeric parameters may use suffixes to indicate units:
          'b' for bytes, 'c' for cylinders, 'k' for kilobytes, 'm' for megabytes,
          'g' for gigabytes or no suffix for sectors (usually 512 bytes).
          '%' for percent of total disk size, '&' for percent of free space.
          Non-sector units will be rounded to the nearest cylinder.
  Entering '?' at most prompts will give you (simple) context sensitive help.
d974 7
a980 3
size of a disklabel partition, it will NOT alter the filesystem on the
drive.  Using this option and expecting it to resize existing partitions
is a good way of losing large amounts of data.
d1026 1
a1026 1
  will take almost 160M of this space before ports are built.
a1047 14
  device: /dev/rwd0c
  type: ESDI
  disk: ESDI/IDE disk
  label: ST320011A
  bytes/sector: 512
  sectors/track: 63
  tracks/cylinder: 16
  sectors/cylinder: 1008
  cylinders: 16383
  total sectors: 39102336
  free sectors: 36030960
  rpm: 3600

  16 partitions:
d1049 1
a1049 1
    a:      17593.2M       1498.7M  unused      0     0
a1051 1
  > <b>d a</b>
d1053 3
a1055 3
  offset: [3069360] <b><i>Enter</i></b>
  size: [36030960] <b>150m</b>
  Rounding to cylinder: 317520
d1059 3
a1061 3
  offset: [3386880] <b><i>Enter</i></b>
  size: [35713440] <b>300m</b>
  Rounding to cylinder: 619920
d1064 2
a1065 2
  offset: [4006800] <b><i>Enter</i></b>
  size: [35093520] <b>120m</b>
d1070 3
a1072 3
  offset: [4263840] <b><i>Enter</i></b>
  size: [34836480] <b>80m</b>
  Rounding to cylinder: 166320
d1076 2
a1077 2
  offset: [4430160] <b><i>Enter</i></b>
  size: [34670160] <b>6g</b>
d1082 3
a1084 3
  offset: [17025120] <b><i>Enter</i></b>
  size: [22075200] <b>4g</b>
  Rounding to nearest cylinder: 8391600
d1088 1
a1088 14
  device: /dev/rwd0c
  type: ESDI
  disk: ESDI/IDE disk
  label: ST320011A
  bytes/sector: 512
  sectors/track: 63
  tracks/cylinder: 240
  sectors/cylinder: 15120
  cylinders: 2586
  total bytes: 19092.9M
  free bytes: 6681.4M
  rpm: 3600

  16 partitions:
d1090 2
a1091 2
    a:           155.0M          1498.7M  4.2BSD   2048 16384   16 # /
    b:           302.7M          1653.8M    swap
d1093 5
a1097 5
    d:           125.5M          1956.4M  4.2BSD   2048 16384   16 # /tmp
    e:            81.2M          2082.0M  4.2BSD   2048 16384   16 # /var
    g:          6149.9M          2163.2M  4.2BSD   2048 16384   16 # /usr
    h:          4097.5M          8313.0M  4.2BSD   2048 16384   16 # /home
    i:          1498.7M             0.0M   MSDOS
a1110 6
<p>
If you look closely at the output of the disklabel, you will note that
your drive RPM rating is probably wrong.  This is historical; the
drive speed is not used in any way by the system. Do not worry about
it.

d1121 5
a1125 5
  Mount point for wd0d (size=128520k)? (or 'none' or 'done') [/tmp] <b><i>Enter</i></b>
  Mount point for wd0e (size=83160k)? (or 'none' or 'done') [/var] <b><i>Enter</i></b>
  Mount point for wd0g (size=6297480k)? (or 'none' or 'done') [/usr] <b><i>Enter</i></b>
  Mount point for wd0h (size=4195800k)? (or 'none' or 'done') [/home] <b><i>Enter</i></b>
  Mount point for wd0d (size=128520k)? (or 'none' or 'done') [/tmp] <b>done</b>
d1137 1
a1137 1
  newfs: reduced number of fragments per cylinder group from 19840 to 19760 to enl
d1139 2
a1140 2
  /dev/rwd0a: 155.0MB in 317520 sectors of 512 bytes
  5 cylinder groups of 38.59MB, 2470 blocks, 4992 inodes each
d1145 1
a1145 1
  newfs: reduced number of fragments per cylinder group from 10392 to 10344 to enl
d1147 2
a1148 2
  /dev/rwd0e: 81.2MB in 166320 sectors of 512 bytes
  5 cylinder groups of 20.20MB, 1293 blocks, 2688 inodes each
d1151 1
a1151 1
  /dev/rwd0h: 4097.5MB in 8391600 sectors of 512 bytes
d1153 6
a1158 10
  /dev/wd0a on /mnt type ffs (rw, asynchronous, local, ctime=Tue Oct 23 00:55:20 2
  007)
  /dev/wd0h on /mnt/home type ffs (rw, asynchronous, local, nodev, nosuid, ctime=T
  ue Oct 23 00:55:20 2007)
  /dev/wd0d on /mnt/tmp type ffs (rw, asynchronous, local, nodev, nosuid, ctime=Tu
  e Oct 23 00:55:20 2007)
  /dev/wd0g on /mnt/usr type ffs (rw, asynchronous, local, nodev, ctime=Tue Oct 23
   00:55:20 2007)
  /dev/wd0e on /mnt/var type ffs (rw, asynchronous, local, nodev, nosuid, ctime=Tu
  e Oct 23 00:55:20 2007)
d1313 1
a1313 1
  Pathname to the sets?  (or 'done') [4.4/i386] <b><i>Enter</i></b>
d1318 2
a1319 2
which is <tt>4.4/i386/</tt> on the official CD-ROM or a CD built
from <tt>install44.iso</tt>.
d1332 1
a1332 1
would be <tt>base44.tgz</tt>, <tt>etc44.tgz</tt> and <tt>bsd</tt>.
d1345 11
a1355 11
          [X] base44.tgz
          [X] etc44.tgz
          [X] misc44.tgz
          [X] comp44.tgz
          [X] man44.tgz
          [X] game44.tgz
          [ ] xbase44.tgz
          [ ] xetc44.tgz
          [ ] xshare44.tgz
          [ ] xfont44.tgz
          [ ] xserv44.tgz
d1361 11
a1371 11
          [X] base44.tgz
          [X] etc44.tgz
          [X] misc44.tgz
          [X] comp44.tgz
          [X] man44.tgz
          [X] game44.tgz
          [X] xbase44.tgz
          [X] xetc44.tgz
          [X] xshare44.tgz
          [X] xfont44.tgz
          [X] xserv44.tgz
d1395 1
a1395 1
  100% |**************************************************|  6356 KB    00:09 ETA
d1397 1
a1397 1
  100% |**************************************************|  5003 KB    00:03 ETA
d1399 23
a1421 23
  100% |**************************************************|  6401 KB    00:04 ETA
  Getting base44.tgz ...
  100% |**************************************************| 42854 KB    00:38 ETA
  Getting etc44.tgz ...
  100% |**************************************************|  1190 KB    00:01 ETA
  Getting misc44.tgz ...
  100% |**************************************************|  2252 KB    00:02 ETA
  Getting comp44.tgz ...
  100% |**************************************************| 77563 KB    01:05 ETA
  Getting man44.tgz ...
  100% |**************************************************|  7530 KB    00:08 ETA
  Getting game44.tgz ...
  100% |**************************************************|  2547 KB    00:01 ETA
  Getting xbase44.tgz ...
  100% |**************************************************|  9450 KB    00:08 ETA
  Getting xetc44.tgz ...
  100% |**************************************************| 76180       00:00 ETA
  Getting xshare44.tgz ...
  100% |**************************************************|  2678 KB    00:05 ETA
  Getting xfont44.tgz ...
  100% |**************************************************| 34745 KB    00:27 ETA
  Getting xserv44.tgz ...
  100% |**************************************************|  8543 KB    00:07 ETA
d1637 1
a1637 1
  <li><b><i>base44.tgz</i></b>   - Contains the base OpenBSD system
d1639 1
a1639 1
  <li><b><i>etc44.tgz</i></b>    - Contains all the files in /etc
d1641 1
a1641 1
  <li><b><i>comp44.tgz</i></b>    - Contains the compiler and its
d1643 4
a1646 4
  <li><b><i>man44.tgz</i></b>    - Contains man pages <b>Recommended</b>
  <li><b><i>misc44.tgz</i></b>   - Contains misc info, setup documentation
  <li><b><i>game44.tgz</i></b>   - Contains the games for OpenBSD
  <li><b><i>xbase44.tgz</i></b>  - Contains the base libraries and
d1648 1
a1648 1
  <li><b><i>xetc44.tgz</i></b>   - Contains the /etc/X11 and /etc/fonts
d1650 3
a1652 3
  <li><b><i>xfont44.tgz</i></b>  - Contains X11's font server and fonts
  <li><b><i>xserv44.tgz</i></b>  - Contains X11's X servers
  <li><b><i>xshare44.tgz</i></b> - Contains manpages, locale settings,
d1656 1
a1656 1
The <b>etc44.tgz</b> and <b>xetc44.tgz</b> sets are not installed as
d1663 1
a1663 1
<h3>Why do I have to install xbase44.tgz for my application?</h3>
d1667 1
a1667 1
<b>xbase44.tgz</b> to be installed on your system.
d1669 2
a1670 2
xbase44.tgz, the rest of X is not needed.
Many people resist installing xbase44.tgz on their system without
d1674 1
a1674 1
<li>By itself, installing xbase44.tgz does not cause any program to
d1676 1
a1676 1
<li>By itself, installing xbase44.tgz on a system does not change the
d1679 1
a1679 1
whatever they wish, so the presence or absence of the xbase44.tgz file
d1681 1
a1681 1
<li>The only parts of xbase44.tgz that are running are the parts
d1683 1
a1683 1
<li>The space required for xbase44.tgz is relatively modest, about 30M.
d1687 1
a1687 1
xbase44.tgz and pull out just the files they need to install their
d1694 1
a1694 1
IF you need xbase44.tgz, just install it.
d2016 1
a2016 1
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.4/i386/INSTALL.linux">INSTALL.linux</a>,
d2117 1
a2117 1
Sometimes, you realize you really DID need <tt>comp44.tgz</tt> (or any
d2135 1
a2135 1
  # tar xzvphf comp44.tgz
d2290 1
a2290 1
computer, place them in a <a href="#site">site44.tgz</a> file, and
d2347 38
d2392 1
a2392 1
version (e.g. 43).  The <tt>siteXX.tgz</tt> file set is, like the other
a2607 6
<p>
<li><b>FTP:</b>  Under some circumstances, and provided you first set up
the network correctly, you may be able to use the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1">ftp(1)</a>
client on the boot disk or CD-ROM to send the dmesg to a local FTP
server, where you can retrieve it later.
d2622 1
a2622 1
<small>$OpenBSD: faq4.html,v 1.277 2009/03/15 02:40:51 nick Exp $</small>
d2626 2
a2627 2
Originally [OpenBSD: faq4.html,v 1.277]<br>
$Translation: faq4.html,v 1.10 2009/03/18 09:20:42 dongsheng Exp $<br>
@


1.9
log
@Sync with Steelix CVS
@
text
@d25 1
a25 1
<a href= "../faq3.html">[到 3 - 获得 OpenBSD]</a>
d41 1
a41 1
    <li><a href="#DosFlop"  >4.3.2 - 在 Windows 或 DOS 中创建引导软盘</a>
d105 1
a105 1
<a href="#DosFlop">DOS/Windows</a> system.
d383 1
a383 1
<h3>4.3.2 - 在 Windows 或 DOS 中创建引导软盘</h3>
d387 1
a387 1
floppy disk under Windows or DOS.
d390 1
a390 2
directory on any of the FTP mirrors,
or from the <tt>4.4/tools</tt> directory on CD1 of the OpenBSD CD set.
d393 3
a395 2
To prepare a floppy in MS-DOS or Windows, first use the native
formatting tools to format the disk.
d399 1
a399 28
<i>rawrite</i>, <i>fdimage</i>, or <i>ntrw</i>.
<i>rawrite</i> will not work on Windows NT, 2000 or XP.

<p>
Note that <tt>FDIMAGE.EXE</tt> and <tt>RAWRITE.EXE</tt> are both
MS-DOS applications, and thus are limited to MS-DOS's "8.3" file naming
convention.
As <tt>floppyB44.fs</tt> and <tt>floppyC44.fs</tt> have longer file names,
you will have to find out how your system stored
the file in "8.3 format" before using <tt>FDIMAGE.EXE</tt> or
<tt>RAWRITE.EXE</tt> to make your boot floppies.

<p>
Example usage of <i>rawrite</i>:
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  C:\> <b>rawrite</b>
  RaWrite 1.2 - Write disk file to raw floppy diskette

  Enter source file name: <b>floppy44.fs</b>
  Enter destination drive: <b>a</b>
  Please insert a formatted diskette into drive A: and press -ENTER- : <i><b>Enter</b></i>
</pre></td></tr></table>

<p>
Example usage of <i>fdimage</i>:
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  C:\> <strong>fdimage -q floppy44.fs a:</strong>
</pre></td></tr></table>
d445 1
a445 1
from the CD.
d450 1
a450 1
<a href="../faq6.html#PXE">PXE boot process</a>.
d470 2
a471 2
If your Sun only has one CD-ROM drive, then just go to the boot prompt,
where you can '<tt>boot cdrom</tt>':
d486 2
a487 1
Try <tt>probe-scsi</tt> from the new command mode.
d1010 2
a1011 1
Generally, you will want to have a swap partition, 'b', as well, though
d1305 3
a1307 2
interface using DHCP you will encounter errors. You have to manually
configure the additional interfaces after the installation.
d1693 2
a1694 1
  <li><b><i>xbase44.tgz</i></b>  - Contains the base files for X11
d1709 2
a1710 1
<p>
d1712 2
a1713 1
<a href="faq15.html">packages</a> require the graphic libraries in
d1716 30
a1745 1
<b>xbase44.tgz</b>, the rest of X is not needed.
d2628 1
a2628 1
<a href= "../faq3.html">[到 3 - 获得 OpenBSD]</a>
d2637 1
a2637 1
<small>$OpenBSD: faq4.html,v 1.273 2009/01/30 22:25:57 sthen Exp $</small>
d2641 2
a2642 2
Originally [OpenBSD: faq4.html,v 1.273]<br>
$Translation: faq4.html,v 1.9 2009/02/22 09:48:18 dongsheng Exp $<br>
@


1.8
log
@Sync with Steelix CVS
@
text
@d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 1998-2008 by OpenBSD.">
d1736 1
a1736 1
These applications can usually be satisified simply by installing
d2629 1
a2629 1
<small>$OpenBSD: faq4.html,v 1.271 2008/11/30 04:17:07 nick Exp $</small>
d2633 2
a2634 2
Originally [OpenBSD: faq4.html,v 1.271]<br>
$Translation: faq4.html,v 1.8 2008/12/02 01:40:35 dongsheng Exp $<br>
@


1.7
log
@Sync with Steelix CVS
@
text
@d2237 1
a2237 1
  &gt;&gt; OpenBSD/i386 BOOT 2.10
d2343 1
a2343 1
  Do you want to see a list of potential FTP servers?  [yes] <b><i>Enter</i></b>
d2629 1
a2629 1
<small>$OpenBSD: faq4.html,v 1.269 2008/10/31 16:52:29 nick Exp $</small>
d2633 2
a2634 2
Originally [OpenBSD: faq4.html,v 1.269]<br>
$Translation: faq4.html,v 1.7 2008/11/12 08:37:02 dongsheng Exp $<br>
@


1.6
log
@Sync with Steelix CVS
@
text
@d4 1
a4 1
<title>4 - OpenBSD 4.3 安装指南</title>
d29 1
a29 1
<h1><font color="#e00000">4 - OpenBSD 4.3 安装指南</font></h1>
d106 1
a106 1
Typical file names are <tt>floppy43.fs</tt>, though several platforms
d110 1
a110 1
(<tt>cd43.iso</tt> for just booting, or <tt>install43.iso</tt> for the
d157 1
a157 1
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.3/mac68k/INSTALL.mac68k">INSTALL.mac68k</a>
d176 1
a176 1
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.3/zaurus/INSTALL.zaurus">INSTALL.zaurus</a>
d192 1
a192 1
<tt>install43.iso</tt> or you can also make your own.
d284 1
a284 1
<li><b><tt>floppy43.fs</tt></b> (Desktop PC) supports many
d288 1
a288 1
<li><b><tt>floppyB43.fs</tt></b> (Servers) supports many RAID controllers,
d292 1
a292 1
<li><b><tt>floppyC43.fs</tt></b> (Laptops) supports the CardBus and PCMCIA
d294 1
a294 1
<li><b><tt>cd43.iso</tt></b> is an ISO9660 image that can be used to
d299 1
a299 1
<li><b><tt>cdemu43.iso</tt></b> is an ISO9660 image, using
d302 3
a304 3
  image -- most people will use <tt>cd43.iso</tt>, only use
  <tt>cdemu43.iso</tt> if <tt>cd43.iso</tt> doesn't work for you.
<li><b><tt>install43.iso</tt></b> is an ISO9660 image, containing
d320 2
a321 2
<li><b><tt>floppy43.fs:</tt></b> Supports systems with a floppy disk.
<li><b><tt>cd43.iso</tt></b> An ISO image usable to make your own
d323 1
a323 1
<li><b><tt>miniroot43.fs</tt></b> Can be written to a swap partition
d325 1
a325 1
<li><b><tt>install43.iso</tt></b> is an ISO9660 image, containing
d367 1
a367 1
  # <b>dd if=floppy43.fs of=/dev/rfd0c bs=32k</b>
d379 1
a379 1
  # <b>cmp /dev/rfd0c floppy43.fs</b>
d389 1
a389 1
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.3/tools/">tools</a>
d391 1
a391 1
or from the <tt>4.3/tools</tt> directory on CD1 of the OpenBSD CD set.
d406 1
a406 1
As <tt>floppyB43.fs</tt> and <tt>floppyC43.fs</tt> have longer file names,
d417 1
a417 1
  Enter source file name: <b>floppy43.fs</b>
d425 1
a425 1
  C:\> <strong>fdimage -q floppy43.fs a:</strong>
d431 1
a431 1
  C:\> <strong>ntrw floppy43.fs a:</strong>
d441 2
a442 2
You can create a CD-ROM using the <tt>cd43.iso</tt> or
<tt>install43.iso</tt> files.
d586 1
a586 1
<tt>etc43.tgz</tt> file.
d588 2
a589 2
<a href="../upgrade43.html#etcUpdates">manually merge</a> the changes of
<tt>etc43.tgz</tt> into your system before you can expect it to be
d598 1
a598 1
For OpenBSD 4.3, upgrading 4.2 to 4.3 is the only supported upgrade.
d606 1
a606 1
<a href="../upgrade43.html">OpenBSD Upgrade Guide 4.3</a>.
d623 1
a623 1
  Welcome to the OpenBSD/i386 4.3 install program.
d762 1
a762 1
  Disk: wd0       geometry: 2586/240/63 [39100320 Sectors]
d764 7
a770 7
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
  *0: 0B    0   1  1 -  202 239 63 [          63:     3069297 ] Win95 FAT-32
   1: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   2: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
d840 4
a843 4
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
   1: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
d846 2
a847 2
  BIOS Starting cylinder [0 - 2585]: [0] <b>203</b>
  BIOS Starting head [0 - 239]: [0] <b><i>Enter</i></b>
d849 2
a850 2
  BIOS Ending cylinder [0 - 2585]: [0] <b>2585</b>
  BIOS Ending head [0 - 239]: [0] <b>239</b>
d853 1
a853 1
  Disk: wd0       geometry: 2586/240/63 [39100320 Sectors]
d855 7
a861 7
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
  *0: 0B    0   1  1 -  202 239 63 [          63:     3069297 ] Win95 FAT-32
   1: A6  203   0  1 - 2585 239 63 [     3069360:    36030960 ] OpenBSD
   2: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
d863 1
a863 1
  Disk: wd0       geometry: 2586/240/63 [19092 Megabytes]
d865 7
a871 7
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
  *0: 0B    0   1  1 -  202 239 63 [          63:        1499M] Win95 FAT-32
   1: A6  203   0  1 - 2585 239 63 [     3069360:       17593M] OpenBSD
   2: 00    0   0  0 -    0   0  0 [           0:           0M] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0M] unused
d904 1
a904 1
  Disk: wd0       geometry: 2586/240/63 [39100320 Sectors]
d906 7
a912 7
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
   0: 0B    0   1  1 -  202 239 63 [          63:     3069297 ] Win95 FAT-32
  *1: A6  203   0  1 - 2585 239 63 [     3069360:    36030960 ] OpenBSD
   2: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
d1384 1
a1384 1
  Pathname to the sets?  (or 'done') [4.3/i386] <b><i>Enter</i></b>
d1389 2
a1390 2
which is <tt>4.3/i386/</tt> on the official CD-ROM or a CD built
from <tt>install43.iso</tt>.
d1403 1
a1403 1
would be <tt>base43.tgz</tt>, <tt>etc43.tgz</tt> and <tt>bsd</tt>.
d1416 11
a1426 11
          [X] base43.tgz
          [X] etc43.tgz
          [X] misc43.tgz
          [X] comp43.tgz
          [X] man43.tgz
          [X] game43.tgz
          [ ] xbase43.tgz
          [ ] xetc43.tgz
          [ ] xshare43.tgz
          [ ] xfont43.tgz
          [ ] xserv43.tgz
d1432 11
a1442 11
          [X] base43.tgz
          [X] etc43.tgz
          [X] misc43.tgz
          [X] comp43.tgz
          [X] man43.tgz
          [X] game43.tgz
          [X] xbase43.tgz
          [X] xetc43.tgz
          [X] xshare43.tgz
          [X] xfont43.tgz
          [X] xserv43.tgz
d1471 1
a1471 1
  Getting base43.tgz ...
d1473 1
a1473 1
  Getting etc43.tgz ...
d1475 1
a1475 1
  Getting misc43.tgz ...
d1477 1
a1477 1
  Getting comp43.tgz ...
d1479 1
a1479 1
  Getting man43.tgz ...
d1481 1
a1481 1
  Getting game43.tgz ...
d1483 1
a1483 1
  Getting xbase43.tgz ...
d1485 1
a1485 1
  Getting xetc43.tgz ...
d1487 1
a1487 1
  Getting xshare43.tgz ...
d1489 1
a1489 1
  Getting xfont43.tgz ...
d1491 1
a1491 1
  Getting xserv43.tgz ...
d1708 1
a1708 1
  <li><b><i>base43.tgz</i></b>   - Contains the base OpenBSD system
d1710 1
a1710 1
  <li><b><i>etc43.tgz</i></b>    - Contains all the files in /etc
d1712 1
a1712 1
  <li><b><i>comp43.tgz</i></b>    - Contains the compiler and its
d1714 5
a1718 5
  <li><b><i>man43.tgz</i></b>    - Contains man pages <b>Recommended</b>
  <li><b><i>misc43.tgz</i></b>   - Contains misc info, setup documentation
  <li><b><i>game43.tgz</i></b>   - Contains the games for OpenBSD
  <li><b><i>xbase43.tgz</i></b>  - Contains the base files for X11
  <li><b><i>xetc43.tgz</i></b>   - Contains the /etc/X11 and /etc/fonts
d1720 3
a1722 3
  <li><b><i>xfont43.tgz</i></b>  - Contains X11's font server and fonts
  <li><b><i>xserv43.tgz</i></b>  - Contains X11's X servers
  <li><b><i>xshare43.tgz</i></b> - Contains manpages, locale settings,
d1726 1
a1726 1
The <b>etc43.tgz</b> and <b>xetc43.tgz</b> sets are not installed as
d1735 1
a1735 1
<b>xbase43.tgz</b> to be installed on your system.
d1737 1
a1737 1
<b>xbase43.tgz</b>, the rest of X is not needed.
d2055 1
a2055 1
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.3/i386/INSTALL.linux">INSTALL.linux</a>,
d2156 1
a2156 1
Sometimes, you realize you really DID need <tt>comp43.tgz</tt> (or any
d2174 1
a2174 1
  # tar xzvphf comp43.tgz
d2329 1
a2329 1
computer, place them in a <a href="#site">site43.tgz</a> file, and
d2629 1
a2629 1
<small>$OpenBSD: faq4.html,v 1.266 2008/09/15 06:04:10 jasper Exp $</small>
d2633 2
a2634 2
Originally [OpenBSD: faq4.html,v 1.266]<br>
$Translation: faq4.html,v 1.6 2008/09/16 08:55:20 dongsheng Exp $<br>
@


1.5
log
@Sync with Steelix CVS
@
text
@d2183 1
a2183 1
to add a missing file sets.  This does not work.  pkg_add(1) is
d2629 1
a2629 1
<small>$OpenBSD: faq4.html,v 1.265 2008/07/01 11:01:40 nick Exp $</small>
d2633 2
a2634 2
Originally [OpenBSD: faq4.html,v 1.265]<br>
$Translation: faq4.html,v 1.5 2008/07/15 05:35:57 dongsheng Exp $<br>
@


1.4
log
@Sync with Steelix CVS
@
text
@d748 1
a748 1
<b>Note:</b> If you say "Y" to "Do you want to use *all* of wd0 for
d2629 1
a2629 1
<small>$OpenBSD: faq4.html,v 1.264 2008/05/04 05:42:38 steven Exp $</small>
d2633 2
a2634 2
Originally [OpenBSD: faq4.html,v 1.264]<br>
$Translation: faq4.html,v 1.4 2008/05/12 08:22:09 dongsheng Exp $<br>
@


1.3
log
@Sync with Steelix CVS
@
text
@d1753 1
a1753 1
/usr               320MB (no X) or 550MB (with X)
d2629 1
a2629 1
<small>$OpenBSD: faq4.html,v 1.263 2008/04/30 21:24:58 nick Exp $</small>
d2633 2
a2634 2
Originally [OpenBSD: faq4.html,v 1.263]<br>
$Translation: faq4.html,v 1.3 2008/05/03 03:52:14 dongsheng Exp $<br>
@


1.2
log
@Sync with Steelix CVS
@
text
@d4 1
a4 1
<title>4 - OpenBSD 4.2 安装指南</title>
d29 1
a29 1
<h1><font color="#e00000">4 - OpenBSD 4.2 安装指南</font></h1>
a68 1
  <li><a href="#42cdboot"   >4.12.6 - 我的 i386 不能用官方 CDROM 启动!</a>
d106 1
a106 1
Typical file names are <tt>floppy42.fs</tt>, though several platforms
d110 1
a110 1
(<tt>cd42.iso</tt> for just booting, or <tt>install42.iso</tt> for the
d157 1
a157 1
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.2/mac68k/INSTALL.mac68k">INSTALL.mac68k</a>
d176 1
a176 1
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.2/zaurus/INSTALL.zaurus">INSTALL.zaurus</a>
d192 1
a192 1
<tt>install42.iso</tt> or you can also make your own.
d284 1
a284 1
<li><b><tt>floppy42.fs</tt></b> (Desktop PC) supports many
d288 1
a288 1
<li><b><tt>floppyB42.fs</tt></b> (Servers) supports many RAID controllers,
d292 1
a292 1
<li><b><tt>floppyC42.fs</tt></b> (Laptops) supports the CardBus and PCMCIA
d294 1
a294 1
<li><b><tt>cd42.iso</tt></b> is an ISO9660 image that can be used to
d299 1
a299 1
<li><b><tt>cdemu42.iso</tt></b> is an ISO9660 image, using
d302 3
a304 3
  image -- most people will use <tt>cd42.iso</tt>, only use
  <tt>cdemu42.iso</tt> if <tt>cd42.iso</tt> doesn't work for you.
<li><b><tt>install42.iso</tt></b> is an ISO9660 image, containing
d320 2
a321 2
<li><b><tt>floppy42.fs:</tt></b> Supports systems with a floppy disk.
<li><b><tt>cd42.iso</tt></b> An ISO image usable to make your own
d323 1
a323 1
<li><b><tt>miniroot42.fs</tt></b> Can be written to a swap partition
d325 1
a325 1
<li><b><tt>install42.iso</tt></b> is an ISO9660 image, containing
d367 1
a367 1
  # <b>dd if=floppy42.fs of=/dev/rfd0c bs=32k</b>
d379 1
a379 1
  # <b>cmp /dev/rfd0c floppy42.fs</b>
d389 1
a389 1
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.2/tools/">tools</a>
d391 1
a391 1
or from the <tt>4.2/tools</tt> directory on CD1 of the OpenBSD CD set.
d406 1
a406 1
As <tt>floppyB42.fs</tt> and <tt>floppyC42.fs</tt> have longer file names,
d417 1
a417 1
  Enter source file name: <b>floppy42.fs</b>
d425 1
a425 1
  C:\> <strong>fdimage -q floppy42.fs a:</strong>
d431 1
a431 1
  C:\> <strong>ntrw floppy42.fs a:</strong>
d441 2
a442 2
You can create a CD-ROM using the <tt>cd42.iso</tt> or
<tt>install42.iso</tt> files.
d586 1
a586 1
<tt>etc42.tgz</tt> file.
d588 2
a589 2
<a href="../upgrade42.html#etcUpdates">manually merge</a> the changes of
<tt>etc42.tgz</tt> into your system before you can expect it to be
d598 1
a598 1
For OpenBSD 4.2, upgrading 4.1 to 4.2 is the only supported upgrade.
d606 1
a606 1
<a href="../upgrade42.html">OpenBSD Upgrade Guide 4.2</a>.
d623 1
a623 1
  Welcome to the OpenBSD/i386 4.2 install program.
d1384 1
a1384 1
  Pathname to the sets?  (or 'done') [4.2/i386] <b><i>Enter</i></b>
d1389 2
a1390 2
which is <tt>4.2/i386/</tt> on the official CD-ROM or a CD built
from <tt>install42.iso</tt>.
d1403 1
a1403 1
would be <tt>base42.tgz</tt>, <tt>etc42.tgz</tt> and <tt>bsd</tt>.
d1416 11
a1426 11
          [X] base42.tgz
          [X] etc42.tgz
          [X] misc42.tgz
          [X] comp42.tgz
          [X] man42.tgz
          [X] game42.tgz
          [ ] xbase42.tgz
          [ ] xetc42.tgz
          [ ] xshare42.tgz
          [ ] xfont42.tgz
          [ ] xserv42.tgz
d1432 11
a1442 11
          [X] base42.tgz
          [X] etc42.tgz
          [X] misc42.tgz
          [X] comp42.tgz
          [X] man42.tgz
          [X] game42.tgz
          [X] xbase42.tgz
          [X] xetc42.tgz
          [X] xshare42.tgz
          [X] xfont42.tgz
          [X] xserv42.tgz
d1466 1
a1466 1
  100% |**************************************************|  6083 KB    00:06
d1468 1
a1468 1
  100% |**************************************************|  4949 KB    00:03
d1470 23
a1492 23
  100% |**************************************************|  6130 KB    00:04
  Getting base42.tgz ...
  100% |**************************************************| 41604 KB    00:37
  Getting etc42.tgz ...
  100% |**************************************************|  1211 KB    00:01
  Getting misc42.tgz ...
  100% |**************************************************|  2239 KB    00:02
  Getting comp42.tgz ...
  100% |**************************************************| 76957 KB    01:04
  Getting man42.tgz ...
  100% |**************************************************|  7477 KB    00:08
  Getting game42.tgz ...
  100% |**************************************************|  2547 KB    00:02
  Getting xbase42.tgz ...
  100% |**************************************************| 11702 KB    00:10
  Getting xetc42.tgz ...
  100% |**************************************************| 75398       00:00
  Getting xshare42.tgz ...
  100% |**************************************************|  2488 KB    00:04
  Getting xfont42.tgz ...
  100% |**************************************************| 34745 KB    00:27
  Getting xserv42.tgz ...
  100% |**************************************************| 10108 KB    00:08
d1708 1
a1708 1
  <li><b><i>base42.tgz</i></b>   - Contains the base OpenBSD system
d1710 1
a1710 1
  <li><b><i>etc42.tgz</i></b>    - Contains all the files in /etc
d1712 1
a1712 1
  <li><b><i>comp42.tgz</i></b>    - Contains the compiler and its
d1714 5
a1718 5
  <li><b><i>man42.tgz</i></b>    - Contains man pages <b>Recommended</b>
  <li><b><i>misc42.tgz</i></b>   - Contains misc info, setup documentation
  <li><b><i>game42.tgz</i></b>   - Contains the games for OpenBSD
  <li><b><i>xbase42.tgz</i></b>  - Contains the base files for X11
  <li><b><i>xetc42.tgz</i></b>   - Contains the /etc/X11 and /etc/fonts
d1720 3
a1722 3
  <li><b><i>xfont42.tgz</i></b>  - Contains X11's font server and fonts
  <li><b><i>xserv42.tgz</i></b>  - Contains X11's X servers
  <li><b><i>xshare42.tgz</i></b> - Contains manpages, locale settings,
d1726 1
a1726 1
The <b>etc42.tgz</b> and <b>xetc42.tgz</b> sets are not installed as
d1735 1
a1735 1
<b>xbase42.tgz</b> to be installed on your system.
d1737 1
a1737 1
<b>xbase42.tgz</b>, the rest of X is not needed.
d1753 1
a1753 1
/usr               420MB (no X) or 550MB (with X)
d2055 1
a2055 1
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.2/i386/INSTALL.linux">INSTALL.linux</a>,
d2156 1
a2156 1
Sometimes, you realize you really DID need <tt>comp42.tgz</tt> (or any
d2174 1
a2174 1
  # tar xzvphf comp42.tgz
d2329 1
a2329 1
computer, place them in a <a href="#site">site42.tgz</a> file, and
a2385 20
<a name="42cdboot"></a>
<h3>4.12.6 - 我的 i386 不能用官方 CDROM 启动!</h3>
It has been found that some older computers are unable to boot the
official CD1 disk.
This problem does not impact CDs made from <tt>install42.iso</tt>,
<tt>cd42.iso</tt> or <tt>cdemu42.iso</tt>; only the official CD set.
An easy work-around for this problem is to use the amd64's boot loader
available on CD2:
<ol>
<li>Insert CD2 and tell your computer to boot it;<br>
<li>When the <tt>boot></tt> prompt appears, stop the automatic boot
by pressing the space bar;<br>
<li>Remove CD2 and insert CD1;<br>
<li>Erase the character you typed to stop the boot, type<br>
<tt><b>boot /4.2/i386/bsd.rd</b></tt><br>
then press <i>Enter</i>.
</ol>
Yes, this really does work on non-amd64 machines for 4.2!
<p>

d2393 1
a2393 1
version (e.g. 42).  The <tt>siteXX.tgz</tt> file set is, like the other
d2410 1
a2410 1
"<tt>site42-puffy.tgz</tt>".
d2629 1
a2629 1
<small>$OpenBSD: faq4.html,v 1.262 2008/04/22 01:18:45 nick Exp $</small>
d2633 2
a2634 2
Originally [OpenBSD: faq4.html,v 1.262]<br>
$Translation: faq4.html,v 1.2 2008/04/29 08:39:42 dongsheng Exp $<br>
@


1.1
log
@Sync with Steelix CVS
@
text
@d44 1
a44 1
<li><a href="#Boot"         >4.4 - 启动 OpenBSD 安装媒体</a>
d59 1
a59 1
<li><a href= "#SendDmesg"   >4.9 - 安装后将你的 dmesg 发送到
d66 1
a66 1
  <li><a href="#sshhang"    >4.12.3 - 我的机器启动后，在 ssh-keygen 进程挂起</a>
d73 1
a73 2
<li><a href="#getdmesg"     >4.15 - 遇到安装问题时如何获得需要报告的
dmesg(8) ?</a>
d79 1
a79 1
<h2>4.1 - Overview of the OpenBSD installation procedure</h2>
d223 1
a223 1
<h2>4.2 - Pre-installation checklist</h2>
d273 1
a273 1
<h2>4.3 - Creating bootable OpenBSD install media</h2>
d334 1
a334 1
<h3>4.3.1 - Creating floppies on Unix</h3>
d384 1
a384 1
<h3>4.3.2 - Creating floppies on Windows or DOS</h3>
d439 1
a439 1
<h3>4.3.3 - Making a CD-ROM</h3>
d459 1
a459 1
<h2>4.4 - Booting OpenBSD install media</h2>
d539 1
a539 1
<h2>4.5 - Performing an install</h2>
d541 1
a541 1
<h3>4.5.1 - Starting the install</h3>
d668 1
a668 1
<h3>4.5.2 - Setting up disks</h3>
d794 1
d797 2
a798 1
partition table, makes one big OpenBSD partition, flags it active,
d801 1
d1259 1
a1259 1
<h3>4.5.3 - Setting the system hostname</h3>
d1281 1
a1281 1
<h3>4.5.4 - Configuring the network</h3>
d1353 1
a1353 1
<h3>4.5.5 - Choosing installation media</h3>
d1394 1
a1394 1
<h3>4.5.6 - Choosing file sets.</h3>
d1504 1
a1504 1
<h3>4.5.7 - Finishing up</h3>
d1696 1
a1696 1
<h2>4.6 - What files are needed for installation?</h2>
d1744 1
a1744 1
<h2> 4.7 - How much space do I need for an OpenBSD installation?</h2>
d1932 1
a1932 1
<h2>4.8 - Multibooting OpenBSD/i386</h2>
d2070 1
a2070 1
<h2>4.9 - Sending your dmesg to dmesg@@openbsd.org after the install</h2>
d2153 1
a2153 1
<h2>4.10 - Adding a file set after install</h2>
d2208 1
a2208 1
<h2>4.11 - What is 'bsd.rd'?</h2>
d2252 1
a2252 1
<h2>4.12 - Common installation problems</h2>
d2255 1
a2255 1
<h3>4.12.1 - My Compaq only recognizes 16M RAM</h3>
d2281 1
a2281 1
<h3>4.12.2 - My i386 won't boot after install</h3>
d2318 1
a2318 2
<h3>4.12.3 - My (older, slower) machine booted, but hung at the ssh-keygen
steps</h3>
d2335 1
a2335 2
<h3>4.12.4 - I got the message "Failed to change directory" when doing an
install</h3>
d2364 1
a2364 1
<h3>4.12.5 - My fdisk partition table is trashed or blank!</h3>
d2388 1
a2388 1
<h3>4.12.6 - My i386 won't boot the official CDROM!</h3>
d2408 1
a2408 1
<h2>4.13 - Customizing the install process</h2>
d2513 1
a2513 1
<h2>4.14 - How can I install a number of similar systems?</h2>
d2556 1
a2556 1
<h2>4.15 - How can I get a dmesg(8) to report an install problem?</h2>
d2640 3
a2642 3
<a href= "index.html">[FAQ Index]</a>
<a href= "../faq3.html">[To Section 3 - Obtaining OpenBSD]</a>
<a href= "faq5.html">[To Section 5 - Building the System from Source]</a>
d2650 1
a2650 1
<small>$OpenBSD: faq4.html,v 1.261 2008/03/09 08:57:20 steven Exp $</small>
d2654 2
a2655 2
Originally [OpenBSD: faq4.html,v 1.261]<br>
$Translation: faq4.html,v 1.1 2008/03/21 14:53:36 dongsheng Exp $<br>
@

