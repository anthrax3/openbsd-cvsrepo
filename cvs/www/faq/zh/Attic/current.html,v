head	1.28;
access;
symbols;
locks; strict;
comment	@# @;


1.28
date	2014.04.01.17.03.10;	author nick;	state dead;
branches;
next	1.27;

1.27
date	2013.05.08.13.48.35;	author ajacoutot;	state Exp;
branches;
next	1.26;

1.26
date	2010.12.02.14.19.45;	author ajacoutot;	state Exp;
branches;
next	1.25;

1.25
date	2010.10.19.14.31.15;	author ajacoutot;	state Exp;
branches;
next	1.24;

1.24
date	2010.05.11.06.30.57;	author ajacoutot;	state Exp;
branches;
next	1.23;

1.23
date	2010.04.07.14.14.23;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2010.03.08.12.37.15;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2010.01.23.11.37.13;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2009.12.28.16.11.44;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2009.12.22.17.49.10;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2009.11.30.13.23.50;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2009.11.16.12.38.13;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2009.11.10.13.38.42;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2009.07.31.10.10.37;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2009.06.13.08.31.49;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2009.05.01.13.16.23;	author tobias;	state Exp;
branches;
next	1.12;

1.12
date	2009.03.25.20.53.32;	author tobias;	state Exp;
branches;
next	1.11;

1.11
date	2009.02.22.20.35.21;	author tobias;	state Exp;
branches;
next	1.10;

1.10
date	2008.12.13.11.02.10;	author tobias;	state Exp;
branches;
next	1.9;

1.9
date	2008.11.26.08.25.03;	author tobias;	state Exp;
branches;
next	1.8;

1.8
date	2008.10.24.19.56.03;	author tobias;	state Exp;
branches;
next	1.7;

1.7
date	2008.08.10.16.14.28;	author tobias;	state Exp;
branches;
next	1.6;

1.6
date	2008.07.20.18.18.50;	author tobias;	state Exp;
branches;
next	1.5;

1.5
date	2008.07.13.18.21.56;	author tobias;	state Exp;
branches;
next	1.4;

1.4
date	2008.06.22.21.06.13;	author tobias;	state Exp;
branches;
next	1.3;

1.3
date	2008.05.12.07.23.52;	author tobias;	state Exp;
branches;
next	1.2;

1.2
date	2008.05.01.10.01.51;	author tobias;	state Exp;
branches;
next	1.1;

1.1
date	2008.04.28.09.35.19;	author tobias;	state Exp;
branches;
next	;


desc
@@


1.28
log
@
Abandon translations, per deraadt@@ and ajacoutot@@.
Thanks to all those that did the translation work, and my appologies to
those who had to translate my writing!
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>跟踪 -current</title>
<link rev= "made" href= "mailto:www@@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 2005-2009 by OpenBSD">
</head>

<body bgcolor= "#ffffff" text= "#000000">
<a href="../../zh/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="0">
</a>
<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ 索引]</a>
</font>

<p>

<h1><font color="#e00000">跟踪 <i>-current</i></font></h1>
<hr>

<h3>目录</h3>
<p>
<ul>
<li><a href="#Intro">介绍</a>
<!-- Oldest on top... -->
<li><a href="#20100923">2010/09/23 - [ports] ruby split into 1.8/1.9</a>
<li><a href="#20100923">2010/09/24 - gcc4 for mips64 and mips64el</a>
<li><a href="#20101019">2010/10/19 - groff moved to ports</a>
<li><a href="#20101023">2010/10/23 - vgrind(1) moved to ports</a>
<li><a href="#20101031">2010/10/31 - wpa configuration changes</a>
<li><a href="#20101108">2010/11/08 - PostgreSQL update</a>
<li><a href="#20101111">2010/11/11 - Xenocara updates</a>
<!-- New additions go on the bottom, please -->
</ul>

<hr>

<a name="Intro"></a>
<!-- XXXversion -->
<h2>介绍</h2>
此文档针对跟踪 <i>-current</i> 的用户。
它包含了从 4.8-release 到 <i>-current</i> 的修改信息，不能用于从 4.7
或更早版本的升级，或者想跟踪
<a href="../../stable.html"><i>-stable</i></a> 的用户。

<p>
如果你想从旧版本更新到 4.8-release 或
4.8-stable，参见<a href="../upgrade48.html">升级指南</a>。

<p>
在使用 -current 和执行下述操作之前，请确认已经阅读和理解了
<a href="../faq5.html">FAQ 5 - 从源代码构建系统</a>。

<p>
你始终应该使用快照作为运行 <i>-current</i> 的起点。
不支持从你自己的源代码编译升级。

<p>
几乎所有这些改变都必须以 root 身份执行。

<a name="20100923"></a>
<h3>2010/09/23 - [ports] ruby split into 1.8/1.9</h3>

The ruby port was split into two separate ports for ruby 1.8 and
ruby 1.9, similar to how the python port is handled.
The ruby 1.8 binaries are now installed with a 18 suffix, and
the ruby 1.9 binaries are installed with a 19 suffix.
The ruby-gems and ruby-rake packages also install the binaries with
a 18 suffix, as those packages are included in ruby 1.9.
If you want to make ruby 1.8 (or 1.9) the default system ruby, you
need to follow the instructions that are displayed after
installing/updating the package.

<a name="20100924"></a>
<h3>2010/09/24 - gcc4 for mips64 and mips64el</h3>

The various mips64 architectures (loongson, sgi) have moved to gcc4.
/usr/libexec/ld.so has a bug that is exposed by gcc4, so make sure
it's up-to-date (rebuild it after updating the sources):
<blockquote><pre>
<b>cd /usr/src/libexec/ld.so
make clean
make depend && make && make install
</b></pre></blockquote>

Updated makefiles, gcc, cpp and libstdc++ must be installed with these four
steps.
<p>
Firstly, gcc4 must be compiled with the existing compiler:
<blockquote><pre>
<b>rm -rf /usr/obj/*
cd /usr/src/share/mk && make install
cd /usr/src/gnu/usr.bin/cc
make obj && make depend && make && make install
</b></pre></blockquote>
Secondly, gcc4 must be rebuilt with itself:
<blockquote><pre>
<b>rm -rf /usr/obj/*
cd /usr/src/usr.bin/cpp
make obj && make && make install
cd /usr/src/gnu/usr.bin/cc
make obj && make depend && make && make install
</b></pre></blockquote>
Thirdly, libstdc++-v3 must be installed after removing the old C++ headers:
<blockquote><pre>
<b>rm -rf /usr/include/g++/*
cd /usr/src/gnu/lib/libstdc++-v3
make obj && make includes && make depend && make && make install
</b></pre></blockquote>
And lastly the entire system rebuilt with the usual procedure documented in
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&sektion=8">release(8)</a>.

<p>
For people updating using snapshots, don't forget to:
<blockquote><pre>
<b>rm -rf /usr/include/g++/*
</b></pre></blockquote>
before installing newer snapshot.


<a name="20101019"></a>
<h3>2010/10/19 - groff moved to ports</h3>

The groff(1) document formatting system (notably used to render
manual pages) has been replaced in base with <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=mandoc&sektion=1">mandoc(1)</a>.
First update /etc/man.conf (sysmerge recommended if you have modified it;
otherwise install a new file from etc48.tgz or updated /usr/src/etc)
which switches to using mandoc(1) to render installed unformatted
manpages.
Then remove old groff files:
<blockquote><pre>
<b>cd /usr/bin
rm addftinfo afmtodit eqn grodvi groff grog grohtml grolj4 grops grotty \
hpftodit indxbib lkbib lookbib neqn nroff pfbtops pic psbb refer soelim \
tbl tfmtodit troff
cd /usr/share
rm -r dict/eign groff_font tmac doc/psd doc/smm doc/usd groff
cd /usr/share/man/cat1
rm addftinfo.0 afmtodit.0 eqn.0 grodvi.0 groff.0 grog.0 grohtml.0 grolj4.0 \
grops.0 grotty.0 hpftodit.0 indxbib.0 lkbib.0 lookbib.0 neqn.0 nroff.0 \
pfbtops.0 pic.0 psbb.0 refer.0 soelim.0 tbl.0 tfmtodit.0 troff.0
cd ../cat5
rm groff_font.0 groff_out.0
cd ../cat7
rm groff_char.0 groff_me.0 groff_mm.0 groff_mmse.0 groff_ms.0 groff_msafer.0 \
me.0 mm.0 ms.0</b></blockquote></pre>
If you require groff reinstall it from /usr/ports/textproc/groff or
install the groff package.

<a name="20101023"></a>
<h3>2010/10/23 - vgrind(1) moved to ports</h3>

The vgrind(1) source file formatter has moved to ports after the
<a href="#20101019">groff removal</a> from the base system.
You should remove the old vgrind files:
<blockquote>
<pre>
<b>
cd /usr/bin/
rm vgrind
cd /usr/share/man/cat1
rm vgrind.0
cd /usr/share/man/cat5
rm vgrindefs.0
cd /usr/share/
rm misc/vgrindefs  misc/vgrindefs.db
</b>
</pre>
</blockquote>
You can install vgrind from /usr/ports/textproc/vgrind or
<tt>pkg_add vgrind</tt>.

<a name="20101029"></a>
<h3>2010/10/29 - colcrt removal</h3>

The colcrt(1) utility has been removed as it is only useful
on very old (glass) terminals.
You should remove the old colcrt files:
<blockquote>
<pre>
<b>
rm /usr/bin/colcrt /usr/share/man/cat1/colcrt.0
</b>
</pre>
</blockquote>

<a name="20101029"></a>
<h3>2010/10/29 - checknr removal</h3>

The checknr(1) utility has been removed after the
<a href="#20101019">groff removal</a> from the base system.
Man pages can now be checked for common errors by running
<tt>mandoc -Tlint</tt>.
You should remove the old checknr files:
<blockquote>
<pre>
<b>
rm /usr/bin/checknr /usr/share/man/cat1/checknr.0
</b>
</pre>
</blockquote>

<a name="20101029"></a>
<h3>2010/10/29 - soelim removal</h3>

The soelim(1) utility has been removed after the
<a href="#20101019">groff removal</a> from the base system.
The groff package includes its own copy of soelim(1).
You should remove the old soelim files:
<blockquote>
<pre>
<b>
rm /usr/bin/soelim /usr/share/man/cat1/soelim.0
</b>
</pre>
</blockquote>

<a name="20101031"></a>
<h3>2010/10/31 - wpa configuration changes</h3>

wpa-psk(8) was deleted because wpakey support is now built directly
into ifconfig(8).  Inspect your /etc/hostname.* files for wireless
devices using WPA and replace:
<blockquote><pre><b>
nwid myssid wpapsk `wpa-psk myssid wpapassword`
</b></pre></blockquote>
with the simpler form:
<blockquote><pre><b>
nwid myssid wpakey wpapassword
</b></pre></blockquote>

<a name="20101108"></a>
<h3>2010/11/08 - PostgreSQL update</h3>
PostgreSQL has been updated to 9.0.1. It's a major upgrade and you need 
to dump/restore your databases.
You can look at this small <a href="http://openbsd.raveland.org/ports/postgresql/UPGRADE_HOWTO.txt">
howto</a> if you want more details about this.
Note that pkg_add will warn you about this upgrade.

<a name="20101111"></a>
<h3>2010/11/11 - Xenocara updates</h3>
libXft and libXext have been updated. You should remove those obsoleted files:
<blockquote><pre><b>
rm /usr/X11R6/bin/xft-config  /usr/X11R6/man/man1/xft-config.1 \
   /usr/X11R6/include/X11/extensions/lbxbuf.h \
   /usr/X11R6/include/X11/extensions/lbxbufstr.h \
   /usr/X11R6/include/X11/extensions/lbximage.h
</b></pre></blockquote>


<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
<br>
<small>$OpenBSD: current.html,v 1.27 2013/05/08 13:48:35 ajacoutot Exp $</small>

</body>
</html>
<!--
Originally [OpenBSD: current.html,v 1.248 ]<br>
$Translation: current.html,v 1.37 2013/05/08 11:30:34 ajacoutot Exp $<br>
-->
@


1.27
log
@Sync with Steelix CVS
@
text
@d263 1
a263 1
<small>$OpenBSD: current.html,v 1.248 2010/11/11 15:07:55 matthieu Exp $</small>
@


1.26
log
@Sync with Steelix CVS
@
text
@d268 2
a269 2
Originally [OpenBSD: current.html,v 1.248]<br>
$Translation: current.html,v 1.36 2010/11/30 14:05:33 dongsheng Exp $<br>
@


1.25
log
@Sync with Steelix CVS
@
text
@d33 7
a39 31
<li><a href="#20090721">2009/07/01 - [ports] postgresql 升级到新版本</a>
<li><a href="#20090724">2009/07/24 - thread model posix enabled for gcc 3</a>
<li><a href="#20090725">2009/07/25 - audio and MIDI device naming change</a>
<li><a href="#20090726">2009/07/26 - thread model posix reverted for gcc 3</a>
<li><a href="#20090801">2009/08/01 - "split-horizon" default behaviour and syntax change in ripd(8)</a>
<li><a href="#20090818">2009/08/18 - sysmerge(8) default running mode change</a>
<li><a href="#20090826">2009/08/26 - ftp(1) auto-fetch redirection handling change</a>
<li><a href="#20090901">2009/09/01 - pf(4) address translation changes</a>
<li><a href="#20090902">2009/09/02 - pf(4) route-to/reply-to syntax change</a>
<li><a href="#20090904">2009/09/04 - bgpd(8), dvmrpd(8) additonal syntax checking</a>
<li><a href="#20091001">2009/10/01 - [ports] Bacula major update</a>
<li><a href="#20091006">2009/10/06 - bgpd(8) capability announcement changes</a>
<li><a href="#20091019">2009/10/19 - need new config(8) to build the kernel</a>
<li><a href="#20091021">2009/10/21 - two packages come with perl 5.10.1</a>
<li><a href="#20091025">2009/10/25 - iwn(4) requires a firmware package update</a>
<li><a href="#20091103">2009/11/03 - pflogd(3) requires new method of logfile rotation</a>
<li><a href="#20091122">2009/11/22 - brconfig(8)/bridgename.if(5) replaced by ifconfig(8)/hostname.if(5)</a>
<li><a href="#20091213">2009/12/13 - [ports] New asterisk release and app_conference</a>
<li><a href="#20091220">2009/12/20 - Makefile.yp(8) support for mknetid(8) -P</a>
<li><a href="#20100110">2010/01/10 - IPsec/HMAC-SHA2 incompatible change</a>
<li><a href="#20100116">2010/01/16 - new user and group for nsd</a>
<li><a href="#20100203">2010/02/03 - make(1) update required</a>
<li><a href="#20100222">2010/02/22 - new user and group for ldpd
<li><a href="#20100326">2010/03/26 - softraid(4) metadata changes</a>
<li><a href="#20100323">2010/03/23 - [ports] Major Dovecot upgrade</a>
<li><a href="#20100403">2010/04/03 - mandoc(1) required now</a>
<li><a href="#20100417">2010/04/17 - ahci(4) no longer attaches to RAID-mode disks</a>
<li><a href="#20100421">2010/04/21 - removal of libevent evdns.h</a>
<li><a href="#20100424">2010/04/24 - new user and group for aucat and midicat</a>
<li><a href="#20100426">2010/04/26 - [ports] samba default user db backend changed</a>

d49 1
a49 1
它包含了从 4.6-release 到 <i>-current</i> 的修改信息，不能用于从 4.5
d54 2
a55 2
如果你想从旧版本更新到 4.6-release 或
4.6-stable，参见<a href="../upgrade46.html">升级指南</a>。
d66 1
a66 3
如果你想查阅从早期的 OpenBSD 升级的信息，参见
<a href= "../upgrade-old.html">upgrade-old.html</a>。
它作为历史记录提供 -- 不能用做升级指南。
d68 2
a69 4
<p>
<a name="20090721"></a>
<h3>2009/07/21 - [ports] postgresql 升级到新版本</h3>
PostgreSQL 的新版本需要你在升级之前导出数据，升级后重新导入。
d71 21
a91 5
<p>
<a name="20090721"></a>
<h3>2009/07/21 - [ports] New postgresql version</h3>
The new version of postgresql requires that your databases be dumped
before upgrade and reloaded after.
d93 2
d96 23
a118 3
<a name="20090724"></a>
<h3>2009/07/24 - thread model posix enabled for gcc 3</h3>
This change was reverted. No special steps are needed now.
d121 55
a175 17
<a name="20090725"></a>
<h3>2009/07/25 - audio and MIDI device naming change</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sndio&amp;sektion=7">sndio(7)</a>
now uses a different scheme for audio and MIDI device naming.
Though the old naming will continue working for some time, it's recommended
to start updating any scripts or configuration files of applications using 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sndio&amp;sektion=7">sndio(7)</a>,
as follows:

<ul>
<li>Convert old device names to new names, examples:
<pre>
     /dev/audio0   --&gt;   sun:0
     /dev/audio1   --&gt;   sun:1
     /dev/rmidi2   --&gt;   rmidi:2
     default       --&gt;   aucat:0
     mystuff       --&gt;   aucat:0.mystuff
d177 15
a191 7
<li>If multiple instances of
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=aucat&amp;sektion=1">aucat(1)</a>
are running, then the -U option must be used to assign unit numbers to aucat(1)
processes. For instance, the following commands:
<pre>
     $ aucat -U 0 -l -f sun:3
     $ aucat -U 1 -l -s default -s mystuff -f sun:2
d193 4
a196 2
will expose <tt>aucat:0</tt>, <tt>aucat:1</tt> and <tt>aucat:1.mystuff</tt> respectively.
</ul>
d198 10
a207 14
<p>
<a name="20090726"></a>
<h3>2009/07/26 - thread model posix reverted for gcc 3</h3>
For users who upgraded userland to enable thread model posix for gcc3,
follow these steps to upgrade. Otherwise no special steps are needed.
<ul>
<li>Build and install gcc:
<pre>
     # cd /usr/src/gnu/usr.bin/gcc
     # make -f Makefile.bsd-wrapper obj
     # make -f Makefile.bsd-wrapper depend
     # make -f Makefile.bsd-wrapper
     # make -f Makefile.bsd-wrapper install
     # make -f Makefile.bsd-wrapper clean
d209 1
a209 22
<li><a href="faq5.html#BldUserland">Build and install userland</a>
</ul>

<p>
<a name="20090801"></a>
<h3>2009/08/01 - "split-horizon" default behaviour and syntax change in ripd(8)</h3>
<ul>
<li>The accepted values for "split-horizon" in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ripd.conf&sektion=5">ripd.conf(5)</a> are now:
none, simple, poisoned.
<br>
The "default" parameter, used to force simple split horizon with no poisoned
reverse, has now been replaced with "simple".
<li>The default behaviour of split horizon is now set to poisoned reverse instead of none.
</ul>

<p>
<a name="20090818"></a>
<h3>2009/08/18 - sysmerge(8) default running mode change</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysmerge&sektion=8">sysmerge(8)</a>
now runs in auto-mode by default.<br>
The "-a" switch has been replaced by "-b" which can be used to get the
former behaviour (full diff mode).
d211 2
a212 8
<p>
<a name="20090826"></a>
<h3>2009/08/26 - ftp(1) auto-fetch redirection handling change</h3>
In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&sektion=1">ftp(1)</a>,
when auto-fetching (command line operation) is used without specifying a
filename with <tt>-o</tt>, the file is now always saved under a filename
derived from the command line. Previous behaviour was to derive the
filename from the redirection URL.
d214 9
a222 125
<p>
<a name="20090901"></a>
<h3>2009/09/01 - pf(4) address translation changes</h3>
As described in more detail in
<a href="http://marc.info/?l=openbsd-misc&m=125181847818600&w=2">this
mailing list post</a>, PF's separate nat/rdr/binat (translation) rules
have been replaced with actions on regular match/filter rules.
Simple rulesets may be converted like this:<p>

<pre>   nat on $ext_if from 10/8 -&gt; ($ext_if)
   rdr on $ext_if to ($ext_if) -&gt; 1.2.3.4</pre>
becomes<br>
<pre>   match out on $ext_if from 10/8 nat-to ($ext_if)
   match in on $ext_if to ($ext_if) rdr-to 1.2.3.4</pre><p>

and...

<pre>   binat on $ext_if from $web_serv_int to any -&gt; $web_serv_ext</pre>
becomes<br>
<pre>   match on $ext_if from $web_serv_int to any binat-to $web_serv_ext</pre>

nat-anchor and/or rdr-anchor lines, e.g. for 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=relayd">relayd(8)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy">ftp-proxy(8)</a>
and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tftp-proxy">tftp-proxy(8)</a>,
are no longer used and should be removed from
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf">pf.conf(5)</a>,
leaving only the anchor lines. Translation rules relating to these and 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd">spamd(8)</a>
will need to be adjusted as appropriate.<p>

N.B.: Previously, translation rules had "stop at first match" behaviour,
with binat being evaluated first, followed by nat/rdr depending on direction
of the packet. Now the filter rules are subject to the usual "last match"
behaviour, so care must be taken with rule ordering when converting.

<p>
<a name="20090902"></a>
<h3>2009/09/02 - pf(4) route-to/reply-to syntax change</h3>
The route-to, reply-to, dup-to and fastroute options in pf.conf
move to filteropts;
<pre>   pass in on $ext_if route-to (em1 192.168.1.1) from 10.1.1.1
   pass in on $ext_if reply-to (em1 192.168.1.1) to 10.1.1.1</pre>
becomes<br>
<pre>   pass in on $ext_if from 10.1.1.1 route-to (em1 192.168.1.1)
   pass in on $ext_if to 10.1.1.1 reply-to (em1 192.168.1.1)</pre>

<p>
<a name="20090904"></a>
<h3>2009/09/04 - bgpd(8), dvmrpd(8) additonal syntax checking</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd">bgpd(8)</a>
and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dvmrpd">dvmrpd(8)</a>
now strictly check whether something other than yes or no is used
in a yes/no token. If your existing syntax is incorrect (e.g. using
"announce capabilities none" instead of "no") this will produce an
error at startup rather than starting up and silently giving incorrect
behaviour.

<p>
<a name="20091001"></a>
<h3>2009/10/01 - [ports] Bacula major version update</h3>
Bacula has been upgraded from 2.4.4 to 3.0.2; this has a new catalog
format which requires a database schema change on the director. The
<a href="http://permalink.gmane.org/gmane.os.openbsd.ports.cvs/39031">commit
log entry</a> and
<a href="http://sourceforge.net/project/shownotes.php?release_id=674473">release
notes</a> have more details.

The server components (storage daemons and director) are not compatible
between major versions so these must be upgraded together.

<ul>
<li>3.x server components (sd/dir) <b>are</b> backwards compatible with 2.4.x clients.
<li>3.x clients are <b>not</b> compatible with 2.4.x server components.
</ul>

<p>
<a name="20091006"></a>
<h3>2009/10/06 - bgpd(8) capability announcement changes</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd">bgpd(8)</a>
now announces 4-byte ASN and graceful restart capabilities by default.
Previously graceful restart was not announced by default, and 4-byte
ASN support was only advertised when one or other peer used an ASN
above 65535. There is now per-session control over which capabilities
are announced:
<pre>   announce refresh yes # was already on by default
   announce restart no
   announce as-4byte no # was only set on sessions to peers with 4byte AS nums </pre>

<p>
<a name="20091019"></a>
<h3>2009/10/19 - need new config(8) to build the kernel</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config">config(8)</a>
has been changed. You must install a new version before building a kernel
from newly updated sources.
<pre>
   # cd /usr/src/usr.sbin/config
   # make
   # make install</pre>

<p>
<a name="20091021"></a>
<h3>2009/10/21 - two packages come with perl 5.10.1</h3>
p5-parent and p5-Parse-CPAN-Meta now come with base Perl.
If you have installed the packages, delete them.
<pre>
   # pkg_delete p5-parent p5-Parse-CPAN-Meta </pre>

<p>
<a name="20091025"></a>
<h3>2009/10/25 - iwn(4) requires a firmware package update</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iwn">iwn(4)</a>
now needs iwn-firmware package version 5.2.
You can install the iwn-firmware-5.2 package with:
<pre>
   # pkg_add http://damien.bergamini.free.fr/packages/openbsd/iwn-firmware-5.2.tgz </pre>

<p>
<a name="20091103"></a>
<h3>2009/11/03 - pflogd(8) requires new method of logfile rotation</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pflogd">pflogd(8)</a>
has lost its <tt>-p</tt> option. Change <tt>/etc/newsyslog.conf</tt> to
include:
<pre>
   /var/log/pflog	600  3     250  *     ZB "pkill -HUP -u root -U root -t - -x pflogd"
d224 1
d226 2
a227 22
<p>
<a name="20091122"></a>
<h3>2009/11/22 - brconfig(8)/bridgename.if(5) replaced by ifconfig(8)/hostname.if(5)</h3>
The functionality of
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=brconfig">brconfig(8)</a>
has been integrated into
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig">ifconfig(8)</a>.
Since the <tt>priority</tt> argument to set the spanning tree priority
on a bridge conflicts with the existing ifconfig(8) interface priority,
it has been renamed to <tt>spanpriority</tt>.
<p>
Existing /etc/bridgename.bridge* files should be replaced with
/etc/hostname.bridge* files; if you use <tt>priority</tt>, replace
it with <tt>spanpriority</tt>.

<p>
<a name="20091213"></a>
<h3>2009/12/13 - [ports] New asterisk release and app_conference</h3>
The Asterisk package was updated to 1.6.0.x, you might need to make some
configuration changes; please see /usr/local/share/doc/asterisk/UPGRADE-16.txt.
The old app_conference plugin is incompatible with the new version, you must use
appkonference instead.
d229 28
a256 103
<p>
<a name="20091220"></a>
<h3>2009/12/20 - Makefile.yp(8) support for mknetid(8) -P</h3>
On YP server hosts, merge
<a href="http://www.openbsd.org/cgi-bin/cvsweb/src/usr.sbin/ypserv/ypinit/Makefile.yp#rev1.15">Makefile.yp rev. 1.15</a>
into all your copies of the YP Makefile, <tt>/var/yp/*/Makefile</tt>.
Strictly speaking, this is only required if you have set the DIR variable
to a non-standard YP source directory AND you do not provide a passwd(5)
file in your YP source directory.  For maximum security to never leak group
information from <tt>/etc/master.passwd</tt> into your netid(5) YP map,
it is recommended that all YP server hosts be updated.

<a name="20100110"></a>
<h3>2010/01/10 - IPsec/HMAC-SHA2 incompatible change</h3>
Two bugs in
<a href="http://marc.info/?l=openbsd-cvs&m=126312766621593&w=2">IPsec/HMAC-SHA2</a>
were fixed, resulting in an incompatibility with the HMAC-SHA-256/384/512
hash algorithms with previous versions of OpenBSD and other IPsec
implementations sharing the bugs.
In particular the default authentication algorithm HMAC-SHA-256
is affected.
Upgrade both sides together, or switch to another authentication
algorithm during the transition.
The per-packet overhead has increased; if you are clamping the
MSS to exact values (i.e. without slack), this will need to be
recalculated.

<a name="20100116"></a>
<h3>2010/01/16 - new user and group for nsd</h3>
The following needs to be run:
<blockquote><pre>
useradd -u 97 -g =uid -c "NSD Daemon" -d /var/empty -s /sbin/nologin _nsd
</pre></blockquote>

<a name="20100203"></a>
<h3>2010/02/03 - make(1) update required</h3>
Changes in the build infrastructure to build the
<a href="../../loongson.html">OpenBSD/loongson</a> port require the use of a new
make(1) binary, providing the <tt>MACHINE_CPU</tt> variable to Makefiles.
You must install a new version before building userland
from newly updated sources.
<pre>
   # cd /usr/src/usr.bin/make
   # make depend
   # make
   # make install</pre>

<a name="20100222"></a>
<h3>2010/02/22 - new user and group for ldpd(8)</h3>
The following needs to be run:
<blockquote><pre>
useradd -u 98 -g =uid -c "LDP Daemon" -d /var/empty -s /sbin/nologin _ldpd
</pre></blockquote>

<p>
<a name="20100326"></a>
<h3>2010/03/26 - softraid(4) metadata changes</h3>
The
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=softraid&sektion=4">softraid(4)</a>
metadata format has changed and is not compatible with previous versions.
As a result, any softraid volumes created with older kernels will not assemble.
Data on existing volumes should be backed up before upgrading.
The volume should then be recreated and the data restored.

<a name="20100323"></a>
<h3>2010/03/23 - [Ports] Major Dovecot upgrade</h3>
Dovecot has been updated from 1.1.20 to 1.2.11. The configuration file changed 
and the old cmusieve plugin has been removed in favor of the new Dovecot sieve 
implementation. The 
<a href="http://permalink.gmane.org/gmane.os.openbsd.ports.cvs/42080">commit 
log entry</a> has more details.

<a name="20100403"></a>
<h3>2010/04/03 - mandoc(1) required now</h3>
mandoc(1) has been added to the build tree, and is now required for
building the system.  If you do not have it:
<pre>
    # cd /usr/src/usr.bin/mandoc
    # make obj
    # NOMAN= make &amp;&amp; NOMAN= make install
</pre>

<a name="20100417"></a>
<h3>2010/04/17 - ahci(4) no longer attaches to RAID-mode disks</h3>
To avoid risk of corrupting metadata on certain Intel RAID devices,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahci&sektion=4">ahci(4)</a>
no longer attaches to the PCI device IDs used by these controllers
when set to RAID mode.
If you lose access to your disks, you'll need to change the
controller type from RAID to AHCI in the BIOS to get them back.

<a name="20100421"></a>
<h3>2010/04/21 - removal of libevent evdns.h</h3>
As part of updating libevent from 1.3 to 1.4, the asynchronous DNS
component was removed. You should delete the /usr/include/evdns.h
and /usr/libdata/perl5/site_perl/*-openbsd/evdns.ph header files manually.

<a name="20100424"></a>
<h3>2010/04/24 - new user and group for aucat(1) and midicat(1)</h3>
The following needs to be run:
<blockquote><pre>
useradd -u 99 -g =uid -c "sndio privsep" -d /var/empty -s /sbin/nologin _sndio
</pre></blockquote>
a257 6
<a name="20100426"></a>
<h3>2010/04/26 - [ports] samba default user db backend changed</h3>
The default user database backend for the Samba port has changed.
If you currently use smbpasswd, you must either adjust your configuration,
or convert your database. See <a href="http://www.openbsd.org/cgi-bin/cvsweb/ports/net/samba/files/README.OpenBSD?rev=1.12">README.OpenBSD</a>
for more information.
d263 1
a263 1
<small>$OpenBSD: current.html,v 1.24 2010/05/11 06:30:57 ajacoutot Exp $</small>
d268 2
a269 2
Originally [OpenBSD: current.html,v 1.205]<br>
$Translation: current.html,v 1.35 2010/10/19 14:17:33 dongsheng Exp $<br>
@


1.24
log
@Sync with Steelix CVS
@
text
@d452 1
a452 1
<small>$OpenBSD: current.html,v 1.205 2010/05/06 20:32:14 naddy Exp $</small>
d458 1
a458 1
$Translation: current.html,v 1.34 2010/05/07 13:16:37 dongsheng Exp $<br>
@


1.23
log
@Sync with Steelix CVS
@
text
@d53 1
d55 1
d59 4
d364 7
d384 7
d416 1
a416 1
    # NOMAN= make && NOMAN= make install
d419 29
d452 1
a452 1
<small>$OpenBSD: current.html,v 1.199 2010/04/04 02:26:42 nick Exp $</small>
d457 2
a458 2
Originally [OpenBSD: current.html,v 1.199]<br>
$Translation: current.html,v 1.32 2010/04/07 13:57:59 dongsheng Exp $<br>
@


1.22
log
@Sync with Steelix CVS
@
text
@d54 3
d73 1
a73 1
4.6-stable，参见<a href="../upgrade45.html">升级指南</a>。
d361 1
a361 1
<a href="../loongson.html">OpenBSD/loongson</a> port require the use of a new
d371 28
d403 1
a403 1
<small>$OpenBSD: current.html,v 1.194 2010/02/04 05:57:00 benoit Exp $</small>
d408 2
a409 2
Originally [OpenBSD: current.html,v 1.194]<br>
$Translation: current.html,v 1.31 2010/03/06 13:16:08 dongsheng Exp $<br>
@


1.21
log
@Sync with Steelix CVS
@
text
@d53 1
d355 13
d372 1
a372 1
<small>$OpenBSD: current.html,v 1.192 2010/01/13 23:56:45 sthen Exp $</small>
d377 2
a378 2
Originally [OpenBSD: current.html,v 1.192]<br>
$Translation: current.html,v 1.30 2010/01/20 14:22:20 dongsheng Exp $<br>
@


1.20
log
@Sync with Steelix CVS
@
text
@d52 1
d339 15
d358 1
a358 1
<small>$OpenBSD: current.html,v 1.189 2009/12/20 13:44:22 schwarze Exp $</small>
d363 2
a364 2
Originally [OpenBSD: current.html,v 1.189]<br>
$Translation: current.html,v 1.29 2009/12/23 13:44:51 dongsheng Exp $<br>
@


1.19
log
@Sync with Steelix CVS
@
text
@d51 1
d326 12
d342 1
a342 1
<small>$OpenBSD: current.html,v 1.188 2009/12/13 12:53:35 sthen Exp $</small>
d347 2
a348 2
Originally [OpenBSD: current.html,v 1.188]<br>
$Translation: current.html,v 1.28 2009/12/16 14:22:31 dongsheng Exp $<br>
@


1.18
log
@Sync with Steelix CVS
@
text
@d50 1
d317 8
d329 1
a329 1
<small>$OpenBSD: current.html,v 1.187 2009/11/22 23:17:44 sthen Exp $</small>
d334 2
a335 2
Originally [OpenBSD: current.html,v 1.187]<br>
$Translation: current.html,v 1.27 2009/11/25 14:02:48 dongsheng Exp $<br>
@


1.17
log
@Sync with Steelix CVS
@
text
@d48 2
a49 1
<li><a href="#20091103">2009/11/03 - pflogd(3) requires new method of logfile rotation
d295 1
a295 1
has lost its <tt>-p<tt> option. Change <tt>/etc/newsyslog.conf</tt> to
d301 14
d320 1
a320 1
<small>$OpenBSD: current.html,v 1.186 2009/11/09 09:37:01 otto Exp $</small>
d325 2
a326 2
Originally [OpenBSD: current.html,v 1.186]<br>
$Translation: current.html,v 1.26 2009/11/14 12:24:40 dongsheng Exp $<br>
@


1.16
log
@Sync with Steelix CVS
@
text
@a32 13
<li><a href="#20090304">2009/03/04 - smtpd 需要增加新用户和组</a>
<li><a href="#20090316">2009/03/16 - 现在通过 mailwrapper(8) 运行 makemap(8)</a>
<li><a href="#20090324">2009/03/24 - ospfd(8) 和 ripd(8) 的 "redistribute default" 行为改变</a>
<li><a href="#20090406">2009/04/06 - pf(4) 的不兼容修改</a>
<li><a href="#20090407">2009/04/07 - pf(4) 默认执行碎片重组</a>
<li><a href="#20090426">2009/04/26 - pfctl(8) 默认关闭 require-order</a>
<li><a href="#20090520">2009/05/20 - rpc.rwalld 需要增加新用户和组</a>
<li><a href="#20090525">2009/05/25 - 更新 daily(8), weekly, monthly, security(8)</a>
<li><a href="#20090531">2009/05/31 - 默认启用 pf</a>
<li><a href="#20090602">2009/06/02 - tmux(1) 从 ports 移到 base 中</a>
<li><a href="#20090603">2009/06/03 - 改变 httpd ABI</a>
<li><a href="#20090626">2009/06/26 - 更新 lynx(1)</a>
<li><a href="#20090703">2009/07/03 - 更新 bnx(4) 驱动</a>
d34 15
d59 1
a59 1
它包含了从 4.5-release 到 <i>-current</i> 的修改信息，不能用于从 4.4
d64 2
a65 2
如果你想从旧版本更新到 4.5-release 或
4.5-stable，参见<a href="../upgrade45.html">升级指南</a>。
d81 3
a83 6
<a name="20090304"></a>
<h3>2009/03/04 - smtpd 需要增加新用户和组</h3>
需要执行下述命令:
<pre>
useradd -u 95 -g =uid -c "SMTP Daemon" -d /var/empty -s /sbin/nologin _smtpd
</pre>
d86 19
a104 21
<a name="20090316"></a>
<h3>2009/03/16 - 现在通过 mailwrapper(8) 运行 makemap(8)</h3>
由于 smtpd(8) 加入构建，所以现在通过 mailwrapper(8) 运行 makemap(8)，以避免其
sendmail 和 smtpd 版本的二进制冲突。所以，用户需要手工增加下行到
/etc/mailer.conf:
<pre>
makemap         /usr/libexec/sendmail/makemap
</pre>

<p>
<a name="20090324"></a>
<h3>2009/03/24 - ospfd(8) 和 ripd(8) 的 "redistribute default" 行为改变</h3>
"redistribute default" 在 ospfd.conf(5) 和 ripd.conf(5)
的配置文件中设置，现在需要出现在内河路由表的默认路由中，否则
ospfd(8) 和 ripd(8) 不会广播路由。

<p>
<a name="20090406"></a>
<h3>2009/04/06 - pf(4) 的不兼容修改</h3>
包的标准化("擦洗")已经集成到主规则集中。现在可以增加参数
"scrub" 到规则中。例如:
d106 2
d109 5
a113 1
        scrub in all no-df max-mss 1440
d115 4
a118 3

可以被在规则中使用新的 "match" 动作替换:

d120 2
a121 1
        match in all scrub (no-df max-mss 1440)
d123 2
d126 7
a132 3
由于默认强制规则集排序，它或者必须放到主规则集(在
"pass quick" 规则之前)，或者禁止检查规则集顺序:

d134 6
a139 1
        set require-order no
d141 2
d144 11
a154 1
包重组已经简化。删除了 "Crop" 和 "drop-ovl"；只剩余全部重组。可以这样打开:
d156 84
a239 3
<pre>
        set reassemble yes|no [no-df]
</pre>
d241 2
a242 2
如果指定了 "no-df"，设置了 df 位的碎片(只有碎片!)在进入碎片缓存之前会被清除
df 位，从而重组后的包没有设置 df 位。"no-df" 不影响非碎片包。
d244 4
a247 6
<p>
<a name="20090407"></a>
<h3>2009/04/07 - pf(4) 默认执行碎片重组</h3>
由于没有什么理由不使用碎片重组，所以
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>
改为默认启用碎片重组。
d250 22
a271 4
<a name="20090426"></a>
<h3>2009/04/26 - pfctl(8) 默认关闭 require-order</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a>
改为默认禁用 "set require-order"。它只是建议，不需要修改配置。
d274 4
a277 3
<a name="20090520"></a>
<h3>2009/05/20 - rpc.rwalld 需要增加新用户和组</h3>
需要执行下述命令:
d279 1
a279 2
useradd -u 96 -g =uid -c "rpc.rwalld" -d /var/empty -s /sbin/nologin _rwalld
</pre>
d282 7
a288 13
<a name="20090525"></a>
<h3>2009/05/25 - 更新 daily(8), weekly, monthly, security(8)</h3>
当你更新周期性维护脚本到最新版本时，请注意下述改变:
<ul>
<li>脚本 daily, weekly, 和 monthly 现在全部使用 root crontab(5) 中的环境变量
PATH，它默认是 /bin:/sbin:/usr/bin:/usr/sbin。daily(8) PATH 不再包含
/usr/local/bin, weekly(8) PATH 不再包含 /usr/libexec。在 daily.local,
weekly.local 和 monthly.local 中，你仍旧可以增加额外的目录到 PATH 中。
<li>这四个脚本全部镇压没有内容的区段。当脚本不产生输出时，不再向
root 发送邮件。这可能导致你的解析脚本需要做些调整。
<li>脚本 security(8) 现在要使用 daily(8) 中的一些函数，所以不能再独立运行。如果你需要手工运行，请使用
"sudo /bin/sh /etc/daily"。
</ul>
d291 8
a298 45
<a name="20090531"></a>
<h3>2009/05/31 - 默认启用 pf</h3>
现在 rc.conf 默认启用
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a> .

<p>
<a name="20090602"></a>
<h3>2009/06/02 - tmux(1) 从 ports 移到 base 中</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&amp;sektion=1">tmux(1)</a>
已经从 ports 移到 base 中。如果你已经从 ports 安装，请使用 pkg_delete 删除。

<p>
<a name="20090603"></a>
<h3>2009/06/03 - 改变 httpd ABI</h3>
修正 <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8"
>httpd(8)</a>，让它正确报告大文件的尺寸，从而导致一个 ABI
改变。因此可能某些第三方模块需要重新构建或者升级安装包。

<p>
<a name="20090626"></a>
<h3>2009/06/26 - 更新 lynx(1)</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lynx&amp;sektion=1">lynx(1)</a>
已经升级到 2.8.6rel.5。配置文件 /etc/lynx.cfg 中的某些指示已经改变，因此你需要更新它：
<blockquote><pre>
# cd /tmp
# ftp ftp://mirror/path/to/snapshots/arch/etc46.tgz
# tar xzpf etc46.tgz ./etc/lynx.cfg
# mv etc/lynx.cfg /etc
</pre></blockquote>
然后合并你的本地修改。

<p>
<a name="20090703"></a>
<h3>2009/07/03 - 更新 bnx(4) 驱动</h3>
<!-- this shouldn't be needed in the 4.6 notes -->
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bnx&amp;sektion=4">bnx(4)</a>
驱动已经更新，可以支持新控制器。它包含一个固件处理的改变。使用 bnx
的用户必须在引导新内核之前，创建新固件文件:
<blockquote><pre>
# cd /sys/dev/microcode/bnx
# make obj clean
# make
# make install
</pre></blockquote>
如果你是手工(不是通过安装程序)从二进制快照升级，那么在引导新内核之前，必须解压 base46.tgz。
a299 4
<p>
<a name="20090721"></a>
<h3>2009/07/21 - [ports] postgresql 升级到新版本</h3>
PostgreSQL 的新版本需要你在升级之前导出数据，升级后重新导入。
a300 1
<p>
d305 1
a305 1
<small>$OpenBSD: current.html,v 1.16 2009/11/07 10:54:26 dongsheng Exp $</small>
d310 2
a311 2
Originally [OpenBSD: current.html,v 1.160]<br>
$Translation: current.html,v 1.25 2009/11/10 13:28:09 dongsheng Exp $<br>
@


1.15
log
@Sync with Steelix CVS
@
text
@d228 1
a228 1
<small>$OpenBSD: current.html,v 1.160 2009/07/23 11:19:47 nick Exp $</small>
d234 1
a234 1
$Translation: current.html,v 1.24 2009/07/24 03:54:08 dongsheng Exp $<br>
@


1.14
log
@Sync with Steelix CVS
@
text
@d43 4
d184 40
d228 1
a228 1
<small>$OpenBSD: current.html,v 1.154 2009/06/03 18:09:04 nicm Exp $</small>
d233 2
a234 2
Originally [OpenBSD: current.html,v 1.154]<br>
$Translation: current.html,v 1.23 2009/06/04 05:25:35 dongsheng Exp $<br>
@


1.13
log
@Sync with Steelix CVS
@
text
@d39 4
d145 35
d184 1
a184 1
<small>$OpenBSD: current.html,v 1.150 2009/04/30 17:23:22 nick Exp $</small>
d189 2
a190 2
Originally [OpenBSD: current.html,v 1.150]<br>
$Translation: current.html,v 1.22 2009/05/01 05:32:51 dongsheng Exp $<br>
@


1.12
log
@Sync with Steelix CVS
@
text
@d33 6
a38 15
<li><a href="#20080907">2008/09/07 - ifconfig(8) 的语法修改</a>
<li><a href="#20080913">2008/09/13 - xcompmgr(1) 从 ports 移到了 xbase</a>
<li><a href="#20080929">2008/09/29 - Perl 升级到 5.10.0</a>
<li><a href="#20081003">2008/10/03 - sm-client.st 移动了位置</a>
<li><a href="#20081102">2008/11/02 - Xserver 升级到 1.5.2</a>
<li><a href="#20081103">2008/11/03 - Perl 升级到 5.10.0</a>
<li><a href="#20081105">2008/11/05 - Perl 升级到 5.10.0</a>
<li><a href="#20081106">2008/11/06 - Xserver 升级到 1.5.2</a>
<li><a href="#20081107">2008/11/07 - Perl 升级到 5.10.0</a>
<li><a href="#20081111">2008/11/11 - PIE 支持被增加到 gcc 3.3.5 & csu</a>
<li><a href="#20081116">2008/11/16 - mixerctl(1) 的名称改变</a>
<li><a href="#20081126">2008/11/26 - btd 需要增加新用户和组</a>
<li><a href="#20090204">2009/02/04 - Perl 升级到 5.10.0</a>
<li><a href="#20090215">2009/02/15 - ifconfig(8) 的语法修改</a>
<li><a href="#20090218">2009/02/18 - pfsync(4) 的版本号增加</a>
d49 1
a49 1
它包含了从 4.3-release 到 <i>-current</i> 的修改信息，不能用于从 4.2
d54 2
a55 2
如果你想从旧版本更新到 4.3-release 或
4.3-stable，参见<a href="../upgrade43.html">升级指南</a>。
d71 3
a73 4
<a name="20080907"></a>
<h3>2008/09/07 - ifconfig(8) 的语法修改</h3>
某些 <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8">ifconfig(8)</a>
的选项已经修改。现在扫描无线网络时应该使用：
d75 1
a75 1
    <b>ifconfig &lt;interface&gt; chan</b>
a76 10
枚举媒体类型时应该使用：
<pre>
    <b>ifconfig &lt;interface&gt; media</b>
</pre>

<p>
<a name="20080913"></a>
<h3>2008/09/13 - xcompmgr(1) 从 ports 移到了 xbase</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xcompmgr&amp;sektion=1">xcompmgr(1)</a>
已经从 ports 移到了 xbase。如果你已经从 ports 安装了 xcompmgr(1)，请使用 pkg_delete 删除之。
d79 5
a83 14
<a name="20080929"></a>
<h3>2008/09/29 - Perl 升级到 5.10.0</h3>
由于 Perl 发行版的改变，你需要在构建之前，手工删除旧的 perl obj 目录。例如：
<pre>
    # rm -rf /usr/obj/gnu/usr.bin/perl
</pre>
然后重新创建 obj 目录:
<pre>
    # cd /usr/src/gnu/usr.bin/perl
    # make -f Makefile.bsd-wrapper obj
</pre>
由于这是 Perl 的关键更新，你需要重新构建/安装全部 Perl XS 模块。
这些模块包含加载到 perl 进程中的共享对象。查看通过 package
子系统安装的 XS 模块列表的方法是：
d85 1
a85 10
    # cd /var/db/pkg
    # fgrep .so p5-*/+CONTENTS | sed 's/+CONTENTS.*//' | sort -u
</pre>
使用“pkg_add -ui”升级到最新的 package 快照会处理这些升级。
在你升级完成后，你需要删除几个被 Perl 基本包提供的模块：

<pre>
    # pkg_delete p5-Archive-Tar p5-Compress-Raw-Zlib p5-Compress-Zlib \
      p5-IO-Compress-Base p5-IO-Compress-Zlib p5-IO-Zlib p5-Module-Build \
      p5-Module-CoreList p5-Module-Load p5-version p5-Digest-SHA
d89 5
a93 6
<a name="20081003"></a>
<h3>2008/10/03 - sm-client.st 移动了位置</h3>
(可选的) sendmail 递送状态文件已经从
<tt>/var/spool/clientmqueue/sm-client.st</tt> 移动到
<tt>/var/log/sm-client.st</tt>，从而与 <tt>/var/log/sendmail.st</tt>
文件的位置一致。
d96 4
a99 13
<a name="20081102"></a>
<h3>2008/11/02 - Xserver 升级到 1.5.2</h3>
<tt>RgbPath</tt> 在 <b>Files</b> 节，配置文件 <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=xorg.conf">xorg.conf(5)</a>
中不再是合法的关键字。请删除相应的配置项。它已经在几个发行版本中被忽略了。
<p>
intel 芯片组的 <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=i810">i810(4)</a>
驱动已经彻底被
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=intel">intel(4)</a>
驱动取代。因此应该更新配置文件 <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=xorg.conf">xorg.conf(5)</a> 。
a100 4
<p>
<a name="20081103"></a>
<h3>2008/11/03 - Perl 升级到 5.10.0</h3>
发现了另一个被 Perl 基本包提供的模块 - 请删除它。
d102 1
a102 1
    # pkg_delete p5-Locale-Maketext-Simple
d105 2
a106 4
<p>
<a name="20081105"></a>
<h3>2008/11/05 - Perl 升级到 5.10.0</h3>
有几个被 Perl 基本包提供的模块需要删除。
d108 1
a108 1
    # pkg_delete p5-Pod-Escapes p5-Pod-Simple
d111 2
a112 6
<p>
<a name="20081106"></a>
<h3>2008/11/06 - Xserver updated to 1.5.2</h3>
淘汰了几个 xserver 模块和驱动。为了确保 <tt>X -configure</tt>
不再试图加载这些过时的模块，推荐在安装新快照之前删除
<tt>/usr/X11R6/lib/modules</tt> 中的内容。
a113 5
<p>
<a name="20081107"></a>
<h3>2008/11/07 - update to Perl 5.10.0</h3>
More modules moved to base, as above.
更多移到 Perl 基本包的模块需要删除。
d115 1
a115 2
    # pkg_delete p5-ExtUtils-ParseXS p5-ExtUtils-CBuilder \
      p5-Module-Pluggable p5-Time-Piece
d118 2
a119 6
<p>
<a name="20081111"></a>
<h3>2008/11/11 - PIE 支持被增加到 gcc 3.3.5 & csu</h3>
位置中立执行(PIE) 支持被增加到 gcc 3.3.5 & csu。使用下述步骤升级：
<ul>
<li>构建和安装 gcc:
d121 1
a121 6
     # cd /usr/src/gnu/usr.bin/gcc
     # make -f Makefile.bsd-wrapper obj
     # make -f Makefile.bsd-wrapper depend
     # make -f Makefile.bsd-wrapper
     # make -f Makefile.bsd-wrapper install
     # make -f Makefile.bsd-wrapper clean
a122 2
<li><a href="faq5.html#BldUserland">构建和安装 userland</a>
</ul>
d124 2
a125 5
<p>
<a name="20081116"></a>
<h3>2008/11/16 - mixerctl(1) 的名称改变</h3>
混频器的变量名称 <tt>headphones</tt> 被缩短为 <tt>hp</tt>，<tt>speaker</tt>
被缩短为 <tt>spkr</tt>。它导致 mixerctl.conf(5) 可能需要修改。
d128 5
a132 9
<a name="20081126"></a>
<h3>2008/11/26 - btd 需要增加新用户和组</h3>
新增加的蓝牙后台程序 <tt>btd</tt> 放弃特权后，使用新用户和组 _btd。
以 <i>root</i> 身份，使用
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8">useradd(8)</a>
增加新用户和组:
<blockquote><pre>
# useradd -u94 -g=uid -c"Bluetooth Daemon" -d/var/empty -s/sbin/nologin _btd</b>
</pre></blockquote>
d135 4
a138 22
<a name="20090204"></a>
<h3>2009/02/04 - Perl 升级到 5.10.0</h3>
新模块移到基本包 - 请删除它。
<pre>
    # pkg_delete p5-Module-Loaded
</pre>

<p>
<a name="20090215"></a>
<h3>2009/02/15 - ifconfig(8) syntax change</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8">ifconfig(8)</a>
扫描无线网络的选项已经修改。现在应该使用：
<pre>
    <b>ifconfig &lt;interface&gt; scan</b>
</pre>

<p>
<a name="20090218"></a>
<h3>2009/02/18 - pfsync(4) 的版本号增加</h3>
由于 pfsync(4) 接口的协议和实现的修改，pfsync(4) 协议的版本号已经增加。
不同版本的防火墙将不能同步状态表，在出现故障时，现有的连接会被终止。

d145 1
a145 1
<small>$OpenBSD: current.html,v 1.138 2009/03/15 18:04:40 nick Exp $</small>
d150 2
a151 2
Originally [OpenBSD: current.html,v 1.138]<br>
$Translation: current.html,v 1.20 2009/03/18 09:20:42 dongsheng Exp $<br>
@


1.11
log
@Sync with Steelix CVS
@
text
@d46 1
d225 9
d245 1
a245 1
<small>$OpenBSD: current.html,v 1.137 2009/02/18 03:38:59 dlg Exp $</small>
d250 2
a251 2
Originally [OpenBSD: current.html,v 1.137]<br>
$Translation: current.html,v 1.19 2009/02/22 09:48:18 dongsheng Exp $<br>
@


1.10
log
@Sync with Steelix CVS
@
text
@d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 2005-2008 by OpenBSD">
d45 2
d216 15
d235 1
a235 1
<small>$OpenBSD: current.html,v 1.135 2008/11/26 00:26:25 sthen Exp $</small>
d240 2
a241 2
Originally [OpenBSD: current.html,v 1.135]<br>
$Translation: current.html,v 1.18 2008/12/02 01:40:34 dongsheng Exp $<br>
@


1.9
log
@Sync with Steelix CVS
@
text
@d44 1
d203 11
d218 1
a218 1
<small>$OpenBSD: current.html,v 1.134 2008/11/17 03:23:22 jakemsr Exp $</small>
d223 2
a224 2
Originally [OpenBSD: current.html,v 1.134]<br>
$Translation: current.html,v 1.17 2008/11/23 07:09:27 dongsheng Exp $<br>
@


1.8
log
@Sync with Steelix CVS
@
text
@a32 19
<li><a href="#20080323">2008/03/23 - cwm 配置和命令行参数已经改变</a>
<li><a href="#20080328">2008/03/28 - landisk 启用共享库</a>
<li><a href="#20080421">2008/04/21 - rtadvd(8) 的命令行参数已经改变</a>
<li><a href="#20080508">2008/05/08 - file(1) 已经更新，需要新的 /etc/magic</a>
<li><a href="#20080522">2008/05/22 - spamd(8) 同步模式协议版本已经更新</a>
<li><a href="#20080606">2008/06/06 - httpd(8) 手册移动了位置</a>
<li><a href="#20080607">2008/06/07 - 不再支持 dhcpd.interfaces</a>
<li><a href="#20080609">2008/06/09 - nmeaattach(8) 被删除</a>
<li><a href="#20080609b">2008/06/09 - 增加名为 _rtadvd 的用户和组</a>
<li><a href="#20080610">2008/06/10 - 地址计数器不再是 pf(4) 表的默认选项</a>
<li><a href="#20080613">2008/06/13 - 删除了 mg(1) 中的 mailmode</a>
<li><a href="#20080616">2008/06/16 - pfsync(4) 版本号增加</a>
<li><a href="#20080627">2008/06/27 - 增加名为 _ypldap 的用户和组 </a>
<li><a href="#20080709">2008/07/09 - yacc(1) 已经更新</a>
<li><a href="#20080710">2008/07/10 - TCP/UDP baddynamic 列表, sysctl(8), named(8) 和 /etc/rc</a>
<li><a href="#20080711-0">2008/07/11 - Xenocara 增加视频驱动 openchrome(4)</a>
<li><a href="#20080711-1">2008/07/11 - 视频驱动 ati(4) 已经更新</a>
<li><a href="#20080719">2008/07/19 - 重写了 softraid 的元数据处理方法</a>
<li><a href="#20080724">2008/07/24 - libc 和 libm 的修改</a>
d37 8
a75 292
<a name="20080323"></a>
<h3>2008/03/23 - cwm 配置和命令行参数已经改变</h3>
cwm(1) 窗口管理器使用了新的配置解析器，所以配置文件需要依照
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cwmrc&amp;sektion=5">cwmrc(5)</a>
所述修改。
命令行参数 "-f" (字体) 和 "-s" (粘滞) 已经被配置指令代替。
请从 .xsession 中删除这些选项，否则登录 xdm(1) 会失败!

<p>
<a name="20080328"></a>
<h3>2008/03/28 - landisk 启用共享库</h3>
为了在 landisk 中从静态库切换到共享库，首先需要构建和安装 gcc 与 ld.so:
<blockquote><pre>
# <b>cd /usr/src/gnu/usr.bin/gcc</b>
# <b>make -f Makefile.bsd-wrapper obj</b>
# <b>make -f Makefile.bsd-wrapper depend</b>
# <b>make -f Makefile.bsd-wrapper</b>
# <b>make -f Makefile.bsd-wrapper install</b>
# <b>cd /usr/src/share/mk</b>
# <b>make install</b>
# <b>cd /usr/src/libexec/ld.so</b>
# <b>make obj</b>
# <b>make depend</b>
# <b>make</b>
# <b>make install</b>
</pre></blockquote>
然后按照
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&amp;sektion=8">
release(8)</a>
中的说明构建整个系统。

<p>
<a name="20080421"></a>
<h3>2008/04/21 - rtadvd(8) 的命令行参数已经改变</h3>
IPv6 路由广播后台程序
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rtadvd">rtadvd(8)</a>
的命令行参数已经改变。
<tt>"-f"</tt> (前台运行)，<tt>"-d"</tt> (调试) 和 <tt>"-D"</tt>
(更多调试信息)。
这些选项被合并到 <tt>“-d”</tt>，其行为更符合 OpenBSD 风格。

<p>
<a name="20080508"></a>
<h3>2008/05/08 - file(1) 已经更新，需要新的 /etc/magic</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=file">file(1)</a>
已经更新，需要安装新的
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=magic">magic(5)</a>
文件:
<blockquote><pre>
# <b>cd /tmp</b>
# <b>ftp ftp://mirror/path/to/snapshots/arch/etc43.tgz</b>
# <b>tar xzpf etc43.tgz ./etc/magic</b>
# <b>mv etc/magic /etc</b>
</pre></blockquote>

<p>
<a name="20080522"></a>
<h3>2008/05/22 - spamd(8) 同步模式协议版本已经更新</h3>
在同步模式中，<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd">spamd(8)</a>
使用的协议已经更新，递增了协议版本号，用以修正各种问题。
因此，spamd 的新版本不能与旧版本同步(它们会忽略对方的数据包)，所以同一
spamd 同步组中的所有实例必须同时升级。

<p>
<a name="20080606"></a>
<h3>2008/06/06 - httpd(8) 手册移动了位置</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd">httpd(8)</a>
的手册从 <tt>/var/www/htdocs/manual/</tt> 移到
<tt>/usr/share/doc/html/httpd/</tt>。
而且它也从文件集 <i>etcXX</i> 移到了文件集 <i>miscXX</i> 中。

<p>
<a name="20080607"></a>
<h3>2008/06/07 - 不再支持 dhcpd.interfaces</h3>
不再支持 <tt>/etc/dhcpd.interfaces</tt>。它被 <tt>dhcpd_flags</tt>
取代，此参数在 <tt>/etc/rc.conf.local</tt> 中配置。

<p>
<a name="20080609"></a>
<h3>2008/06/09 - nmeaattach(8) 被删除</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nmeaattach">nmeaattach(8)</a>
命令和 /etc/rc.conf 中的参数 nmeaattach_flags 已经从 -current 删除。
请使用
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ldattach">
ldattach(8)</a>。它的用法与 nmeaattach(8) 有些许不同: <tt>nmeaattach
cuaU0</tt> 成为 <tt>ldattach nmea cuaU0</tt>。

<p>
<a name="20080609b"></a>
<h3>2008/06/09 - 增加名为 _rtadvd 的用户和组</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rtadvd&amp;sektion=8">rtadvd(8)</a>
后台程序现在初始化后删除特权，以名为 _rtadvd 的用户和组的身份运行。
以 <i>root</i> 身份，使用
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8">useradd(8)</a>
增加名为 _rtadvd 的用户和组:
<blockquote><pre>
<b>useradd -u92 -g=uid -c "IPv6 Router Advertisement Daemon" -d /var/empty -s /sbin/nologin _rtadvd</b>
</pre></blockquote>

<p>
<a name="20080610"></a>
<h3>2008/06/10 - 地址计数器不再是 pf(4) 表的默认选项</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf">pf(4)</a>
表现在需要选项 <tt>counters</tt> 用来开启每个地址的字节和包计数器，例如:
<br>
<blockquote><tt>
table &lt;webservers&gt; counters { 192.168.33.4, 192.168.33.16/29 }
</tt></blockquote>
参见 <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf">pf.conf(5)</a>
以了解详细信息。

<p>
<a name="20080613"></a>
<h3>2008/06/13 - 删除了 mg(1) 中的 mailmode</h3>
因为
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg">mg(1)</a>
中的 mail-mode 不过是 auto-fill-mode 的多虫的重新实现，所以被删除。
如果你使用了此特性，请修改对应的命令:<br>
<blockquote><tt>
mail-mode => auto-fill-mode<br>
mail-set-margin => set-fill-column
</tt></blockquote>
不要忘记同样修改你的 .mg 文件。

<p>
<a name="20080616"></a>
<h3>2008/06/16 - pfsync(4) 版本号增加</h3>
由于
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf">pf(4)</a>
状态表的修改，
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync">pfsync(4)</a>
协议的版本号已经增加; 使用不同版本号的防火墙将不能同步状态表，
断开的连接将不能容灾而终止。

<p>
<a name="20080627"></a>
<h3>2008/06/27 - 增加名为 _ypldap 的用户和组</h3>
即将到来的后台程序 ypldap(8) 需要新的用户和组。
以 <i>root</i> 身份, 使用
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8">useradd(8)</a>
增加名为 _ypldap 的用户和组:
<blockquote><pre>
useradd -u93 -g=uid -c"YP to LDAP Daemon" -d/var/empty -s/sbin/nologin _ypldap
</pre></blockquote>

<p>
<a name="20080709"></a>
<h3>2008/07/09 - yacc(1) 已经更新</h3>
在干净的对象目录执行 “make build” 之前，需要重新构建和安装
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=yacc">yacc(1)</a>，
以确保重新生成使用 yacc 产生的解析器。

<p>
<a name="20080710"></a>
<h3>2008/07/10 - TCP/UDP baddynamic 列表, sysctl(8), named(8) 和 /etc/rc</h3>
内核的 sysctls 参数
<em>net.inet.tcp.baddynamic</em> 和 <em>net.inet.udp.baddynamic</em>，以及工具
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8">sysctl(8)</a>
已经被扩展到覆盖全部 TCP/UDP 端口。
这些列表指示从不动态分配其中的源端口，从而避免与知名服务冲突。
现在脚本 <tt>/etc/rc</tt> 在系统启动的时候，会自动从 <tt>/etc/services</tt> 中填充这些列表。
<p>
已经导入新版本
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=named&amp;sektion=8">named(8)</a>
(9.4.2-P1)，使用随机源端口用于查询，对于健壮的操作，这是必须的基础设施。
<p>
为了避免不兼容性，内核、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8">sysctl(8)</a>、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=named&amp;sektion=8">named(8)</a> 和
<tt>/etc/rc</tt> 应该同步更新(在 "make build" 之前构建和安装内核)。
<p>
<a name="20080711-0"></a>
<h3>2008/07/11 - Xenocara 增加视频驱动 openchrome(4)</h3>
已经为 via 芯片组增加视频驱动 <a href="http://www.openchrome.org">xf86-video-openchrome</a>
到 Xenocara，用来代替已过时的老旧视频驱动 xf86-video-via。
<br>
如果你的配置文件中使用了 VIA 芯片组，将
<blockquote><tt>
  Driver "via"
</tt></blockquote>
替换为
<blockquote><tt>
  Driver "openchrome"
</tt></blockquote>
以使用新驱动。它一般出现在文件 <tt>/etc/X11/xorg.conf</tt> 中。请参阅
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=openchrome&amp;sektion=4">openchrome(4)</a>
手册页以了解更多的配置选项。

<p>
<a name="20080711-1"></a>
<h3>2008/07/11 - 视频驱动 ati(4) 已经更新</h3>
视频驱动 ati(4) 已经更新。更新的 xf86-video-ati 带来了一些重要变化。
<br>
<p>
不再需要 <a href="http://dri.freedesktop.org/wiki/MergedFB">MergedFB</a>:
<br>
<blockquote>
已经从 xrandr(1) 中删除了对 MergedFB 方式的支持。
</blockquote>

<p>
Macbook 的 Quirk 已经改变:
<blockquote>
使用下述 quirk 的 Mac 或 Macbook 用户
<blockquote>
<pre>
Option      "iBookHacks" "on"
</pre>
</blockquote>
如果遇到问题，应该阅读
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=radeon&amp;sektion=4">radeon(4)</a>
手册页，尤其是 <tt>"MacModel"</tt> 节。
<br>
此 quirk 已经被删除。
</blockquote>

<p>
<a name="20080719"></a>
<h3>2008/07/19 - 重写了 softraid 的元数据处理方法</h3>
完全重写了 <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=softraid&amp;sektion=4">softraid(4)</a></a>
的元数据处理方法。新代码与旧的元数据格式不兼容，随意用户必须备份和重新创建他们的 softraid 卷。
之前创建的 Softraid 卷不能被使用此代码的内核识别。

<p>
<a name="20080724"></a>
<h3>2008/07/24 - libc 和 libm 的修改</h3>
由于 libc 和 libm 的修改，必须在系统的后续构建之前执行如下步骤。

<p>0. 确保创建 obj

<blockquote><pre>
# <b>cd /usr/src</b>
# <b>make obj</b>
</blockquote>

<p>1. 安装头文件，构建和安装 libc

<blockquote><pre>
# <b>cd /usr/src/include</b>
# <b>make prereq</b>
# <b>make includes</b>
# <b>cd /usr/src/lib/libc</b>
# <b>make cleandir</b>
# <b>make depend</b>
# <b>make</b>
# <b>make install</b>
</pre></blockquote>

<p>2. 构建和安装 libm

<blockquote><pre>
# <b>cd /usr/src/lib/libm</b>
# <b>make cleandir</b>
# <b>make depend</b>
# <b>make</b>
# <b>make install</b>
</pre></blockquote>

<p>3. 构建和安装 libiberty

<blockquote><pre>
# <b>cd /usr/src/gnu/lib/libiberty</b>
# <b>make -f Makefile.bsd-wrapper cleandir</b>
# <b>make -f Makefile.bsd-wrapper depend</b>
# <b>make -f Makefile.bsd-wrapper</b>
# <b>make -f Makefile.bsd-wrapper install</b>
</pre></blockquote>

<p>4. 构建和安装 gcc

<pre>
    <b>如果你的平台使用 gcc 2.95.3:</b>
       # <b>rm -r /usr/obj/gnu/egcs/gcc/*</b>
       # <b>cd /usr/src/gnu/egcs/gcc</b>
        <i>- or -</i>
    <b>如果你的平台使用 gcc 3.3.5:</b>

       # <b>rm -r /usr/obj/gnu/usr.bin/gcc/*</b>
       # <b>cd /usr/src/gnu/usr.bin/gcc</b>

    <b>gcc v3.3.5 或 v2.95.3 的通用构建过程</b>
    # <b>make -f Makefile.bsd-wrapper clean</b>
    # <b>make -f Makefile.bsd-wrapper obj</b>
    # <b>make -f Makefile.bsd-wrapper depend</b>
    # <b>make -f Makefile.bsd-wrapper</b>
    # <b>make -f Makefile.bsd-wrapper install</b>
</pre>

当然，从快照开始相当简单，也是被强烈推荐的方法。

<p>
d114 1
a114 1
在你升级完成后，你需要删除几个已经作为 Perl 基本包提供的模块：
d131 71
d206 1
a206 1
<small>$OpenBSD: current.html,v 1.124 2008/10/20 13:07:41 sthen Exp $</small>
d211 2
a212 2
Originally [OpenBSD: current.html,v 1.124]<br>
$Translation: current.html,v 1.15 2008/10/21 01:33:17 dongsheng Exp $<br>
@


1.7
log
@Sync with Steelix CVS
@
text
@d41 1
a41 1
<li><a href="#20080609b">2008/06/09 - 增加用户和组 _rtadvd</a>
d45 1
d52 4
d177 1
a177 1
<h3>2008/06/09 增加用户和组 _rtadvd</h3>
d179 1
a179 1
后台程序现在初始化后删除特权，以新用户和组 _rtadvd 的身份运行。
d182 1
a182 1
增加用户和组 _rtadvd:
d223 11
d245 1
a245 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=8">sysctl(8)</a>
d251 1
a251 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=named&sektion=8">named(8)</a>
d255 2
a256 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=8">sysctl(8)</a>、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=named&sektion=8">named(8)</a> 和
d273 1
a273 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=openchrome&sektion=4">openchrome(4)</a>
d298 1
a298 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=radeon&sektion=4">radeon(4)</a>
d307 1
a307 1
完全重写了 <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=softraid&sektion=4">softraid(4)</a>
a309 1
</p>
d316 1
a316 1
<p>0. 确保创建 obj</p>
d323 1
a323 1
<p>1. 安装头文件，构建和安装 libc</p>
d336 1
a336 1
<p>2. 构建和安装 libm</p>
d346 1
a346 1
<p>3. 构建和安装 libiberty</p>
d356 1
a356 1
<p>4. 构建和安装 gcc</p>
d379 55
d438 1
a438 1
<small>$OpenBSD: current.html,v 1.118 2008/07/27 14:39:14 nick Exp $</small>
d443 2
a444 2
Originally [OpenBSD: current.html,v 1.118]<br>
$Translation: current.html,v 1.12 2008/08/05 04:10:03 dongsheng Exp $<br>
@


1.6
log
@Sync with Steelix CVS
@
text
@d49 2
d289 75
d368 1
a368 1
<small>$OpenBSD: current.html,v 1.113 2008/06/21 14:29:53 nick Exp $</small>
d373 2
a374 2
Originally [OpenBSD: current.html,v 1.113]<br>
$Translation: current.html,v 1.11 2008/07/15 05:35:56 dongsheng Exp $<br>
@


1.5
log
@Sync with Steelix CVS
@
text
@d45 4
d216 70
a285 3
<font color= "#0000e0">
<a href= "index.html">[FAQ 索引]</a>
</font>
d291 1
a291 1
<small>$OpenBSD: current.html,v 1.106 2008/06/21 14:29:53 nick Exp $</small>
d296 2
a297 2
Originally [OpenBSD: current.html,v 1.106]<br>
$Translation: current.html,v 1.10 2008/06/24 08:30:32 dongsheng Exp $<br>
@


1.4
log
@Sync with Steelix CVS
@
text
@d35 1
a35 1
<li><a href="#20080421">2008/04/21 - rtadvd 的命令行参数已经改变</a>
d38 7
d89 12
a100 12
# cd /usr/src/gnu/usr.bin/gcc
# make -f Makefile.bsd-wrapper obj
# make -f Makefile.bsd-wrapper depend
# make -f Makefile.bsd-wrapper
# make -f Makefile.bsd-wrapper install
# cd /usr/src/share/mk
# make install
# cd /usr/src/libexec/ld.so
# make obj
# make depend
# make
# make install
d109 1
a109 1
<h3>2008/04/21 - rtadvd 的命令行参数已经改变</h3>
d113 3
a115 2
<tt>"-f"</tt>(前台运行)，<tt>"-d"</tt>(调试) 和 <tt>"-D"</tt>
(更多调试信息)这三个旧选项现在合并为 <tt>-d</tt>，其行为更符合 OpenBSD 风格。
d125 4
a128 4
# cd /tmp
# ftp ftp://mirror/path/to/snapshots/arch/etc43.tgz
# tar xzpf etc43.tgz ./etc/magic
# mv etc/magic /etc
d137 74
a210 2
由于 spamd 的新版本不能与旧版本同步(它们会忽略对方的数据包)，所以同一
spamd 同步组中的所有实例必须同时更新。
d220 1
a220 1
<small>$OpenBSD: current.html,v 1.98 2008/05/28 22:53:31 sthen Exp $</small>
d225 2
a226 2
Originally [OpenBSD: current.html,v 1.98]<br>
$Translation: current.html,v 1.9 2008/06/02 02:38:19 dongsheng Exp $<br>
@


1.3
log
@Sync with Steelix CVS
@
text
@d36 2
d103 1
a103 1
ipv6 路由广播后台程序
d110 22
d140 1
a140 1
<small>$OpenBSD: current.html,v 1.94 2008/04/30 21:51:36 nick Exp $</small>
d145 2
a146 2
Originally [OpenBSD: current.html,v 1.94]<br>
$Translation: current.html,v 1.8 2008/05/03 03:52:13 dongsheng Exp $<br>
@


1.2
log
@Sync with Steelix CVS
@
text
@a32 10
<li><a href="#20070903">2007/09/03 - 支持 _cxa_atexit support，也修改了相应的 sys/net 头文件</a>
<li><a href="#20071008">2007/10/08 - 为 ospf6d 增加了新用户</a>
<li><a href="#20071020">2007/10/20 - 将 libexpat 移到了基本系统中</a>
<li><a href="#20071030">2007/10/30 - httpd.conf 的模块化修改</a>
<li><a href="#20071125">2007/11/25 - config(8) 特性修改</a>
<li><a href="#20071128">2007/11/28 - AGP 更新</a>
<li><a href="#20071207">2007/12/07 - _hoststated 的用户改名为 _relayd</a>
<li><a href="#20080131">2008/01/31 - 为 snmpd 增加了新用户</a>
<li><a href="#20080205">2008/02/05 - carp(4) 特性修改</a>
<li><a href="#20080303">2008/03/03 - xenocara 的默认位置改变</a>
d45 1
a45 1
它包含了从 4.2-release 到 <i>-current</i> 的修改信息，不能用于从 4.1
d50 2
a51 2
如果你想从旧版本更新到 4.2-release 或
4.2-stable，参见<a href="../upgrade42.html">升级指南</a>。
a66 153
<a name="20070903"></a>
<h3>2007/09/03 - 支持 _cxa_atexit support，也修改了相应的 sys/net 头文件</h3>
<p>
对 _cxa_atexit 的支持已经增加到 csu, libc, gcc 和 libstdc++，也修改了相应的 sys/net 头文件。
升级步骤如下:
<ul>
<li><a href="../faq5.html#BldKernel">构建和安装新内核</a>
<li>重启
<li>构建和安装 csu:
<pre>
     # cd /usr/src/lib/csu
     # make obj && make depend && make && make install && make clean
</pre>
<li>构建和安装 gcc:
<pre>
     # cd /usr/src/gnu/usr.bin/gcc
     # make -f Makefile.bsd-wrapper obj
     # make -f Makefile.bsd-wrapper depend
     # make -f Makefile.bsd-wrapper
     # make -f Makefile.bsd-wrapper install
     # make -f Makefile.bsd-wrapper clean
</pre>
<li><a href="../faq5.html#BldUserland">构建和安装用户程序</a>
</ul>

<a name="20071020"></a>
<h3>2007/10/20 - 将 libexpat 移到了基本系统中</h3>
<p>
libexpat 已经从 xenocara (xbase) 移到了 (base)。
如果你正在使用二进制快照和包，那么当新的快照可用时，它会自动更新。
<p>
如果你从源代码构建，那么清理系统很重要:
<pre>
    # mv /usr/X11R6/lib/libexpat.so.* /usr/lib
    # rm /usr/X11R6/lib/libexpat*
    # rm /usr/X11R6/include/expat*
</pre>

<a name="20071008"></a>
<h3>2007/10/08 - 2007/10/08 - 为 ospf6d 增加了新用户</h3>

<i>已经导入 ospf6d 后台程序</i>，为了使用它，需要增加新用户和组。 以 <i>root</i> 身份使用
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8">useradd(8)</a>
执行:

<blockquote><pre>
# useradd -u90 -g=uid -c"OSPF6 Daemon" -d/var/empty -s/sbin/nologin _ospf6d
</pre></blockquote>
此命令同时增加新用户和组。你的环境可能允许复制/粘贴这些命令。

<a name="20071030"></a>
<h3>2007/10/30 - httpd.conf 的模块化修改</h3>
<p>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd">httpd(8)</a>
现在安装配置文件到 <tt>/var/www/conf/modules.samples</tt>，并且指挥用户在
<tt>/var/www/conf/modules</tt> 创建符号链接。
在指示 <tt>LoadModule</tt> 之后，增加下述行到 <tt>/var/www/conf/httpd.conf</tt>
(靠近节 1 的末尾):
<pre>
    #
    # Include extra module configuration files
    #
    Include /var/www/conf/modules/*.conf
</pre>

<a name="20071125"></a>
<h3>2007/11/25 - config(8) 特性修改</h3>
<p>
扩展的特性需要你的系统重新构建
<a href=http://www.openbsd.org/cgi-bin/man.cgi?query=config>config(8)</a>:
<pre>
    # cd /usr/src/usr.sbin/config
    # make clean
    # make obj
    # make depend
    # make
    # make install
</pre>
然后按照<a href="../faq5.html#BldKernel">构建和安装新内核</a>操作。

<a name="20071128"></a>
<h3>2007/11/28 - AGP 更新</h3>
<p>
如果你的机器中的 X 或 XVideo 需要支持 AGP 的话，在安装新内核后，新的 <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=agp">agp(4)</a>
驱动需要更新 X 服务器。
<p>
在安装新内核后，安装新的内核头文件，重新构建 X 服务器(或者安装新的 X
快照)，并且确认创建了设备 <tt>/dev/agp0</tt> 。
<pre>
    # cd /usr/src/include
    # make includes
    # cd /usr/src/xenocara/xserver
    # make -f Makefile.bsd-wrapper build
    # cd /usr/src/etc/etc.`uname -m`
    # install -c MAKEDEV /dev
    # cd /dev
    # ./MAKEDEV agp0
</pre>

<a name="20071207"></a>
<h3>2007/12/07 - _hoststated 的用户改名为 _relayd</h3>
hoststated(8) 后台程序已经改名为
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=relayd&amp;sektion=8">relayd(8)</a>,
因此用户和组也需要修改。

<p>
使用
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8">vipw(8)</a>,
编辑文件 password，和你喜欢的编辑器编辑文件
<tt>/etc/group</tt>，将全部的“<tt>_hoststated</tt>”修改为
“<tt>_relayd</tt>”。
其它部分不修改。

<a name="20080131"></a>
<h3>2008/01/31 - 为 snmpd 增加了新用户</h3>

<i>已经导入 SNMP 后台程序</i>，为了使用它，需要增加新用户和组。

以 <i>root</i> 身份使用
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8">useradd(8)</a>
执行:

<blockquote><pre>
# useradd -u91 -g=uid -c"SNMP Daemon" -d/var/empty -s/sbin/nologin _snmpd
</pre></blockquote>

此命令同时增加新用户和组。你的环境可能允许复制/粘贴这些命令。

<a name="20080205"></a>
<h3>2008/02/05 - carp(4) 特性修改</h3>
carp(4) 已经被修改得更容易配置。
如果你使用 carp 运行 ARP 或 IP 均衡，那么就需要修改配置:
<ul>
<li> 多个 carp(4) 接口共享 IP 已经被 <tt>carpnodes</tt> 选项代替。
<li> <tt>net.inet.carp.arpbalance</tt> sysctl 已经被均衡方式的
<tt>arp</tt> 代替。
<li> 用于 IP 均衡的 <tt>LINK0,1,2</tt> 标志已经被均衡方式的
<tt>ip</tt>，<tt>ip-stealth</tt> 和 <tt>ip-unicast</tt> 代替。
</ul>

<a name="20080303"></a>
<h3>2008/03/03 - xenocara 的默认位置改变</h3>
xenocara 源代码的默认位置现在是 <tt>/usr/xenocara</tt>。
它对于<a href="faq5.html#Xbld">从源代码构建 X</a> 的人很重要。
移动目录 xenocara:

<blockquote><pre>
# mv /usr/src/xenocara /usr
</pre></blockquote>

然后更新到当前的 -current。

<p>
d116 1
a116 1
<small>$OpenBSD: current.html,v 1.93 2008/04/21 20:49:36 rainer Exp $</small>
d121 2
a122 2
Originally [OpenBSD: current.html,v 1.93]<br>
$Translation: current.html,v 1.7 2008/04/29 08:39:41 dongsheng Exp $<br>
@


1.1
log
@Sync with Steelix CVS
@
text
@d45 1
d262 9
d279 1
a279 1
<small>$OpenBSD: current.html,v 1.92 2008/04/15 18:55:40 simon Exp $</small>
d284 2
a285 2
Originally [OpenBSD: current.html,v 1.92]<br>
$Translation: current.html,v 1.6 2008/04/20 07:55:51 dongsheng Exp $<br>
@

