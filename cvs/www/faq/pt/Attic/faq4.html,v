head	1.22;
access;
symbols;
locks; strict;
comment	@# @;


1.22
date	2014.04.01.17.03.09;	author nick;	state dead;
branches;
next	1.21;

1.21
date	2010.07.17.17.38.10;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2010.06.12.19.51.10;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2009.11.30.13.23.49;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2009.11.04.18.08.57;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2009.10.26.20.27.01;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2009.10.17.15.58.26;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2009.09.14.20.24.19;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2009.08.27.07.24.17;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2009.08.24.07.37.55;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2009.06.03.18.19.38;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2009.05.16.08.59.12;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2009.04.26.15.44.20;	author tobias;	state Exp;
branches;
next	1.9;

1.9
date	2009.03.02.19.44.49;	author tobias;	state Exp;
branches;
next	1.8;

1.8
date	2009.02.22.20.35.21;	author tobias;	state Exp;
branches;
next	1.7;

1.7
date	2007.06.20.09.29.47;	author jufi;	state Exp;
branches;
next	1.6;

1.6
date	2007.06.02.09.03.09;	author jufi;	state Exp;
branches;
next	1.5;

1.5
date	2005.09.30.16.27.11;	author saad;	state Exp;
branches;
next	1.4;

1.4
date	2001.05.26.07.50.17;	author jufi;	state Exp;
branches;
next	1.3;

1.3
date	2000.11.10.18.13.21;	author jufi;	state Exp;
branches;
next	1.2;

1.2
date	2000.11.04.17.35.43;	author jufi;	state Exp;
branches;
next	1.1;

1.1
date	2000.11.04.16.48.46;	author jufi;	state Exp;
branches;
next	;


desc
@@


1.22
log
@
Abandon translations, per deraadt@@ and ajacoutot@@.
Thanks to all those that did the translation work, and my appologies to
those who had to translate my writing!
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>4 - Guia de instalação do OpenBSD 4.7</title>
<link rev= "made" href= "mailto:www@@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2010 by OpenBSD.">
</head>

<!-- Passes validator.w3.org.  Please keep it this way -->

<body bgcolor= "#ffffff" text= "#000000">

<a href="../../pt/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif"
border="0">
</a>
<p>

<font color= "#0000e0">
<a href="index.html">[Índice da FAQ]</a>
<a href="faq3.html">[Seção 3 - Primeiros passos com o OpenBSD]</a>
<a href="faq5.html">[Seção 5 - Construção do Sistema a partir do Código Fonte]</a>
</font>

<h1><font color="#e00000">4 - Guia de Instalação do OpenBSD 4.7</font></h1>
<hr>

<p>
<h3>Conteúdo</h3>
<ul>
<li><a href="#Overview"		>4.1 - Visão geral do processo de
    instalação do OpenBSD</a>
<li><a href="#Checklist"	>4.2 - Lista de verificações antes da
    instalação</a>
<li><a href="#MkInsMedia"	>4.3 - Como criar uma mídia
    inicializável de instalação do OpenBSD</a>
    <ul>
    <li><a href="#MkCD-ROM"		>4.3.1 - Criação do CD de
	inicialização</a>
    <li><a href="#UnixFlop"		>4.3.2 - Criação de disquetes no
        Unix</a>
    <li><a href="#DosFlop"		>4.3.3 - Criação de disquetes no
        Windows</a>
    </ul>
<li><a href="#Boot"		>4.4 - Inicialização da mídia de
    instalação do OpenBSD</a>
<li><a href="#Install"		>4.5 - Instalação simples</a>
  <ul>
  <li><a href="#InstStart"    >4.5.1 - Início da instalação</a>
  <li><a href="#InstQuestions">4.5.2 - As perguntas da instalação</a>
  <li><a href="#InstDisks"    >4.5.3 - Configuração dos discos</a>
  <li><a href="#InstMedia"    >4.5.4 - Escolha da mídia de
      instalação e dos pacotes de arquivos</a>
  <li><a href="#Inst1stBoot"  >4.5.5 - Primeira inicialização!</a>
  <li><a href="#InstFinish"   >4.5.6 - Uma última coisa...</a>
  </ul>

<li><a href="#More"         >4.6 - Detalhes de uma instalação mais
    complexa</a>
  <ul>
  <li><a href="#MoreNetwork"  >4.6.1 - Configuração da rede</a>
  <li><a href="#MoreTimeZone" >4.6.2 - Configuração do fuso horário</a>
  <li><a href="#Morefdisk"    >4.6.3 - Layout fdisk(8) personalizado</a>
  <li><a href="#Moredisklabel">4.6.4 - Layout disklabel personalizado</a>
  </ul>
<li><a href="#FilesNeeded"	>4.7 - Quais arquivos são necessários
    para a instalação?</a>
<li><a href="#Partitioning"	>4.8 - De que forma eu devo particionar
    meu disco?</a>
<li><a href="#Multibooting"	>4.9 - Inicialização múltipla com
    OpenBSD</a>
<li><a href="#SendDmesg"	>4.10 - Como enviar o seu dmesg para
    dmesg@@openbsd.org após a instalação</a>

<li><a href="#AddFileSet"	>4.11 - Como adicionar um pacote de
    arquivos após a instalação</a>
<li><a href="#bsd.rd"		>4.12 - O que é 'bsd.rd'?</a>
<li><a href="#InstProb"		>4.13 - Problemas comuns de instalação</a>
  <ul>
  <li><a href="#cpq16m"			>4.13.1 - Meu Compaq só
      reconhece 16M de RAM</a>
  <li><a href="#noboot"			>4.13.2 - Meu i386 não
      inicializa após a instalação</a>
  <li><a href="#sshhang"		>4.13.3 - Minha máquina
      inicializa, mas para no procedimento ssh-keygen</a>
  <li><a href="#noftplist"		>4.13.4 - Eu recebi a mensagem
      "Failed to change directory" enquanto fazia a instalação</a>
  <li><a href="#blankfdisk"		>4.13.5 - Minha tabela de
      partições do fdisk está corrompida ou vazia!</a>
  <li><a href="#noflopcd"               >4.13.6 - Eu não tenho um drive
      de disquete ou CD-ROM na minha máquina</a>
  </ul>

<li><a href="#site"		>4.14 - Personalização do processo de
    instalação</a>
<li><a href="#Multiple"		>4.15 - Como eu instalo em vários
    sistemas similares?</a>
<li><a href="#getdmesg"		>4.16 - Como eu obtenho o dmesg(8) para
    relatar um problema de instalação?</a>
</ul>
<hr>

<p>
<a name= "Overview"></a>
<h2>4.1 - Visão geral do processo de instalação do OpenBSD</h2>

<p>
O OpenBSD há muito tempo é respeitado pelo seu processo de instalação
simples e direto, consistente entre todas as plataformas.

<p>
Todas as plataformas utilizam um procedimento de instalação parecido,
no entanto existem alguns pequenos detalhes diferentes em certas
plataformas.
Em todo caso, é aconselhável que você leia o documento INSTALL,
específico da sua plataforma, no diretório <i>plataforma</i> do CD-ROM
ou no sítio FTP (por exemplo, <tt>i386/INSTALL.i386</tt>,
<tt>macppc/INSTALL.macppc</tt> ou <tt>sparc/INSTALL.sparc</tt>).

<p>
O instalador do OpenBSD é um kernel <a href="#bsd.rd">especial</a>
com vários utilitários e scripts de instalação embutidos em um
disco de RAM pré-carregado.
Após esse kernel ser inicializado, o
sistema operacional é extraído de alguns arquivos
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tar&amp;sektion=1">tar(1)</a>
(<tt>.tgz</tt>) de uma fonte outra que esse disco de RAM pré-carregado.
Existem diversas maneiras de inicializar esse kernel de instalação:

<ul>
<li><b>Disquetes:</b>
O OpenBSD pode ser instalado em várias plataformas através da
inicialização do instalador a partir de um único disquete.
No entanto, devido às restrições de espaço, algumas plataformas maiores
(sparc64, amd64, alpha) não possuem alguns utilitários que podem ser
importantes para você, como um cliente DHCP para configurar a rede.
Para essas plataformas pode ser melhor utilizar um CD de instalação.
No entanto, em plataformas como i386 e sparc, você vai constatar
que o disquete de instalação é bem completo.

<p>
Imagens de disquetes são disponibilizadas para a criação de disquetes de
instalação em outro sistema <a href="#UnixFlop">compatível com Unix</a>,
ou em um sistema <a href="#DosFlop">Windows</a>.
Os nomes dos arquivos são tipicamente <tt>floppy47.fs</tt>, embora
diversas plataformas possuam múltiplas imagens de disquete disponíveis.

<li><b>CD-ROM:</b>
Em diversas plataformas uma imagem de CD-ROM
(<tt>cd47.iso</tt> apenas para inicializar, ou <tt>install47.iso</tt>
para a instalação completa) é disponibilizada para a criação de um
CD-ROM inicializável.

<li><b>Partição existente:</b>
O <a href="#bsd.rd">disco de RAM</a> do kernel pode ser utilizado para a
inicialização a partir de uma partição já existente do OpenBSD, para uma
atualização de versão ou reinstalação.

<li><b>Rede:</b> Algumas plataformas suportam inicialização pela rede
(por exemplo, usando <a href="faq6.html#PXE">PXE</a> ou outro
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=diskless&amp;sektion=8">
método de inicialização pela rede</a>).

<li><b>Escrever uma imagem do sistema de arquivos para o disco
(miniroot):</b> uma imagem do sistema de arquivos pode ser escrita em
uma partição existente e então ser inicializada.

<li><b>Fita inicializável:</b> Algumas plataformas suportam
inicialização a partir de fitas.
Essas fitas podem ser criadas seguindo as instruções do arquivo
INSTALL.<i>plataforma</i>.

</ul>

Nem todas as <a href="../../pt/plat.html">plataformas</a> suportam todos
os métodos de inicialização:

<ul>
<li><a href="../../alpha.html"><b>alpha:</b></a> Disquete, CD-ROM, rede,
escrever uma imagem de disquete no disco.

<li><a href="../../amd64.html"><b>amd64:</b></a> Disquete, CD-ROM,
<a href="faq6.html#PXE">rede</a>.

<li><a href="../../armish.html"><b>armish:</b></a>
Varia por máquina.

<li><a href="../../hp300.html"><b>hp300:</b></a> CD-ROM, rede.

<li><a href="../../hppa.html"><b>hppa:</b></a> Rede.

<li><a href="../../i386.html"><b>i386:</b></a> Disquete, CD-ROM,
<a href="faq6.html#PXE">rede</a>.

<li><a href="../../landisk.html"><b>landisk:</b></a> miniroot, instalar
utilizando outro computador.

<li><a href="../../macppc.html"><b>macppc:</b></a> CD-ROM, rede.

<li><a href="../../mvme68k.html"><b>mvme68k:</b></a> Rede, fita
inicializável.

<li><a href="../../mvme88k.html"><b>mvme88k:</b></a> Rede, fita
inicializável.

<li><a href="../../sparc.html"><b>sparc:</b></a> Disquete, CD-ROM, rede,
escrever uma imagem em uma partição swap existente, fita inicializável.

<li><a href="../../sparc64.html"><b>sparc64:</b></a> Disquete
(somente U1/U2), CD-ROM, rede, escrever uma imagem em uma partição
existente.

<li><a href="../../vax.html"><b>vax:</b></a> Disquete, Rede.

<li><a href="../../zaurus.html"><b>zaurus:</b></a> Inicializar bsd.rd
a partir de uma partição Linux. Veja detalhes em
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.7/zaurus/INSTALL.zaurus">INSTALL.zaurus</a>.

</ul>

Todas as plataformas podem usar um <a href="#bsd.rd">bsd.rd</a> para
reinstalar ou fazer uma atualização de versão.

<p>
Uma vez que o kernel estiver carregado, você possui diversas opções para
obter os <a href="#FilesNeeded">pacotes de arquivos de instalação</a>.
Lembre-se que nem todas as plataformas suportam todas as opções.

<ul>
<li><b>CD-ROM:</b>
Nós preferimos que você use o
<a href="../../orders.html">conjunto de CD-ROMs oficiais</a>, mas você
também pode usar o arquivo <tt>install46.iso</tt> ou também pode fazer
o seu próprio CD-ROM.

<li><b>FTP:</b>
Qualquer <a href="../../ftp.html">espelho FTP</a>
do OpenBSD ou seu próprio servidor FTP local com os pacotes de arquivos.

<li><b>HTTP:</b>
Qualquer <a href="../../ftp.html#http">espelho HTTP</a>
do OpenBSD ou seu próprio servidor HTTP local com os pacotes de
arquivos.

<li><b>Partição local:</b>
Em muitos casos você pode instalar os pacotes de arquivos a partir de
outra partição do seu próprio disco rígido local.
Por exemplo, na plataforma <a href="../../i386.html">i386</a> você pode
instalar a partir de uma partição FAT ou de um CD-ROM formatado em
ISO9660, Rock Ridge ou Joliet.
Em alguns casos você terá que montar manualmente o sistema de arquivos
antes de utilizá-lo.

<li><b>NFS:</b>
Algumas plataformas suportam o uso de pontos de montagem NFS para
armazenar os pacotes de arquivos.

<li><b>Fita:</b>
Os pacotes de arquivos também podem ser lidos pelo sistema a partir de
uma fita suportada. Detalhes sobre a criação da fita estão no documento
<tt>INSTALL.</tt><i>plataforma</i>.
</ul>

<a name="Checklist"></a>
<h2>4.2 - Lista de verificações antes da instalação</h2>

<p>
Antes de você começar a instalação, você deve ter uma ideia do que
precisa para terminá-la.

Você deve conhecer pelo menos os seguintes itens:
<ul>
<li>Nome da máquina
  <li>Hardware instalado e disponível
  <ul>
  <li>Verifique a compatibilidade do seu hardware na página de
      compatibilidades
  <li>Se for ISA, você também precisa saber as configurações do
      hardware e confirmá-las quando o OpenBSD requerir.
  </ul>
<li>Método de instalação a ser usado (CD-ROM, FTP, etc.)
<li>Foi encontrado um erro sério, como o sistema será corrigido?
  <ul>
  <li>Se feito localmente, você necessitará ter
      <a href="#Partitioning">espaço suficiente</a> disponível para a
      árvore de código fonte e para construí-la.
  <li>Se não, você precisará ter acesso a outra máquina para construir
      uma nova <a href="faq5.html#Release">release</a> corrigida.
  </ul>
<li>Layout desejado do disco
  <ul>
  <li>Existe a necessidade de os dados serem armazenados em outro local?
  <li>O OpenBSD deverá coexistir com outro SO neste sistema?
      Se sim, como ambos serão inicializados?
      Você precisará instalar um "gerenciador de inicialização"?
  <li>O disco inteiro será utilizado pelo OpenBSD, ou deseja manter uma
      partição/SO existente (ou espaço para uso futuro)?
  <li>Como você deseja subparticionar a parte do OpenBSD no seu disco?
  </ul>
<li>Configurações de rede se você não usa DHCP:
  <ul>
  <li>Nome de domínio
  <li>Endereço(s) do(s) Servidor(es) de Nomes (DNS)
  <li>Endereço IP e máscara de sub-rede para cada placa de rede
  <li>Endereço do roteador (gateway)
  </ul>
<li>Você pretende usar o sistema X Window?
</ul>


<a name="MkInsMedia"></a>
<h2>4.3 - Como criar uma mídia inicializável de instalação do OpenBSD</h2>

<p>
Como exemplo, nós vamos ver as imagens de instalação disponíveis para
as plataformas
<a href="../../i386.html">i386</a> e
<a href="../../sparc.html">sparc</a>.

<p>
A plataforma <a href="../../i386.html">i386</a> possui seis imagens de
disco, separadas para a instalação, que podem ser escolhidas:

<ul>
<li><b><tt>cd47.iso</tt></b> é uma imagem ISO9660 que pode ser usada
    para criar um CD inicializável na maioria dos softwares de criação
    de CD-ROMs, na maioria das plataformas.
    Essa imagem é a que contém a maior seleção de drivers de
    dispositivos, e é usualmente a escolha mais recomendada se o seu
    hardware pode inicializar a partir do CD-ROM.
<li><b><tt>cdemu47.iso</tt></b> é uma imagem ISO9660 que usa emulação
    de um disquete de 2.88M para a inicialização. Espera-se que poucos
    usuários necessitem dessa imagem -- a maioria deve usar a
    <tt>cd47.iso</tt>; use a <tt>cdemu47.iso</tt> somente se a
    <tt>cd47.iso</tt> não funcionar.
<li><b><tt>install47.iso</tt></b> é uma imagem ISO9660 que contém todos
    os arquivos da instalação padrão.
    Esse arquivo pode ser usado para criar um CD que pode fazer sozinho
    a instalação do OpenBSD.
<li><b><tt>floppy47.fs</tt></b> (PC Desktop) suporta várias placas de
    rede PCI e ISA, oferece suporte a IDE, adaptadores SCSI simples e
    algumas placas PCMCIA. A maioria dos usuários usam essa imagem para
    inicializar a partir de um disquete.
<li><b><tt>floppyB47.fs</tt></b> (Servidores) suporta diversos
    controladores RAID e alguns adaptadores SCSI menos comuns. No
    entanto, o suporte a diversos adaptadores SCSI e muitas placas
    de rede EISA e ISA foi removido.
<li><b><tt>floppyC47.fs</tt></b> (Laptops) suporta diversos
    dispositivos CardBus e PCMCIA encontrados em muitos laptops.
</ul>

<p>
A plataforma <a href="../../sparc.html">sparc</a> possui quatro imagens
de disco, separadas para instalação, que podem ser escolhidas:

<ul>
<li><b><tt>floppy47.fs:</tt></b> Suporte para sistemas com disquete.
<li><b><tt>cd47.iso</tt></b> Uma imagem ISO usada para criar seu próprio
    CD para inicializar sistemas SPARC que possuem CD-ROM.
<li><b><tt>miniroot47.fs</tt></b> Pode ser escrito em uma partição swap
    e inicializado.
<li><b><tt>install47.iso</tt></b> é uma imagem ISO9660 que contém todos
    os arquivos da instalação padrão.
    Esse arquivo pode ser usado para criar um CD que pode fazer sozinho
    a instalação do OpenBSD.
</ul>

Em plataformas modernas a melhor recomendação é utilizar imagens
de inicialização de CD-ROM, já que em algumas plataformas "maiores"
(tais como amd64, sparc64) as imagens de disquete tiveram/têm um
punhado de drivers e utilitários removidos, o que pode fazer da
instalação uma tarefa muito mais difícil.
Plataformas mais antigas, tais como i386 e sparc, ainda são de fácil
instalação por disquete.

<a name="MkCD-ROM"></a>
<h3>4.3.1 - Criação de um CD-ROM</h3>

<p>
Você pode criar um CD-ROM usando o arquivo
<tt>cd47.iso</tt> ou o <tt>install47.iso</tt>.
Os detalhes exatos ficam por conta do leitor, que deve decidir quais
ferramentas usar para a criação do CD.

<p>
No OpenBSD você pode criar um CD a partir de uma imagem ISO usando o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cdio&amp;sektion=1">cdio(1)</a>:

<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # <b>cdio tao cd47.iso</b>
</pre></td></tr></table>

<p>
A maioria dos gravadores de CD vendidos para os sistemas
Windows e Macintosh vêm com um software que pode queimar imagens ISO
em mídias vazias.
Se o seu não possui um desses softwares, saiba que existem vários
aplicativos gratuitos que podem fazer isso para você.

<p>
Outros sistemas do tipo Unix utilizam aplicativos como o
<a href="http://www.cdrkit.org/">cdrkit</a>.


<a name="MkFlop"></a>
<a name="UnixFlop"></a>
<h3>4.3.2 - Criação de disquetes no Unix</h3>

<p>
Os detalhes exatos e os nomes de dispositivos podem variar de variante
para variante do Unix; utilize o que é apropriado para o seu sistema.

<p>
Para criar um disquete formatado, use o comando
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdformat&amp;sektion=1&amp;arch=i386">fdformat(1)</a>
tanto para formatar quanto para verificar blocos defeituosos.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # <b>fdformat /dev/rfd0c</b>
  Format 1440K floppy `/dev/rfd0c'? (y/n): y
  Processing VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV done.
</pre></td></tr></table>

<p>
Se a sua saída for parecida com a do exemplo acima, então o seu
disco está OK. No entanto, se você não vê TODOS os "V"ês, então o disco
provavelmente está com problemas; tente outra vez com um disco novo.

<p>
Para escrever o arquivo de imagem no disco, utilize o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=0">dd(1)</a>.
Um exemplo de uso do <tt>dd(1)</tt>:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # <b>dd if=floppy47.fs of=/dev/rfd0c bs=32k</b>
</pre></td></tr></table>

<p>
Uma vez que a imagem foi escrita, verifique com o comando
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cmp&amp;sektion=1">cmp(1)</a>
para ter certeza de que a imagem copiada é igual a original.
Se o disquete for igual à imagem original, você verá somente um outro
prompt.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # <b>cmp /dev/rfd0c floppy47.fs</b>
</pre></td></tr></table>

<a name="DosFlop"></a>
<h3>4.3.3 - Criação de disquetes no Windows</h3>

<p>
Para preparar o disquete no Windows, primeiramente use uma ferramenta
nativa para formatar o disquete, verificando se o disco não contém
setores ruins.

<p>
Para escrever a imagem de instalação no disquete preparado você pode
usar o <tt>ntrw.exe</tt>, que pode ser baixado a partir do diretório
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.7/tools/">tools</a>
em qualquer um dos espelhos FTP.

<p>
Exemplo de uso do <i>ntrw</i>:
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  C:\> <strong>ntrw floppy47.fs a:</strong>
  3.5", 1.44MB, 512 bytes/sector
  bufsize is 9216
  1474560 bytes written
</pre></td></tr></table>


<a name="Boot"></a>
<h2>4.4 - Inicialização da mídia de instalação do OpenBSD</h2>

<h3>Inicialização em i386/amd64</h3>

Inicializar uma mídia de instalação em plataformas i386 e amd64 não é
nenhuma novidade para muitas pessoas.
Seu sistema tem que ser instruído a inicializar a partir da mídia
que você escolheu utilizar; isso normalmente é feito através de
uma opção de configuração no BIOS.
Se você quer inicializar a partir do CD, o BIOS do seu sistema
deve ser capaz de fazer isso e deve estar configurado para inicializar
a partir do CD.
Alguns BIOS antigos não possuem essa opção, nesse caso você deve
utilizar um disquete para inicializar a imagem de instalação.
Não se preocupe; mesmo que você use o disquete para inicializar, você
ainda pode instalar pelo CD se ele é suportado pelo OpenBSD (ou seja,
praticamente todos os drives IDE).

<p>
Você também pode instalar inicializando o <a href="#bsd.rd">bsd.rd</a>
a partir de uma partição existente do OpenBSD, ou pela rede com o
<a href="faq6.html#PXE">processo de inicialização PXE</a>.

<h3>Inicialização em sparc/sparc64</h3>

<b>NOTA:</b>
Na plataforma <a href="../../sparc64.html">sparc64</a> somente as
máquinas SBus (Ultra 1, Ultra 2) são inicializáveis a partir do
disquete.

<p>
O sistema precisa estar em um prompt ROM monitor, que tipicamente
se parece com "<tt>ok </tt>".
Se você está usando um teclado da Sun, pressione e solte "STOP" enquanto
digita "A".
Se você está usando um console serial, um BREAK deve levar você de
volta ao prompt monitor.

<p>
Utilize o seguinte comando para inicializar a partir do disquete:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ok <b>boot floppy</b>
</pre></td></tr></table>

<p>
Normalmente você pode inicializar a partir do drive de CD-ROM de
um sistema Sun digitando '<tt>boot cdrom</tt>' no prompt de
inicialização:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ok <b>boot cdrom</b>
</pre></td></tr></table>

<a name="Install"></a>
<h2>4.5 - Instalação simples</h2>

O novo instalador do OpenBSD é projetado para instalar e configurar
o OpenBSD em uma configuração padrão útil e com pouca intervenção do
usuário.
De fato, frequentemente você pode simplesmente digitar <i>ENTER</i>
um determinado número de vezes para conseguir uma boa instalação do
OpenBSD, e mover suas mãos para o resto do teclado apenas para
especificar a senha do root.

<p>
O instalador cria um plano de particionamento baseado no tamanho do seu
disco rígido.
Embora este NÃO será um layout perfeito para todas as pessoas, ele
fornece um bom ponto de partida e uma boa estratégia geral para
determinar o que você precisa.

<p>
Nós vamos começar com uma instalação simples, com discussões breves das
opções fornecidas e, utilizando a mágica de links de hipertexto,
permitir que você leia mais sobre os tópicos que lhe interessam e
explore suas opções.

<p>
As notas de instalação para cada plataforma estão nos CDs de instalação
e nos servidores FTP, no arquivo <tt>INSTALL.<i>&lt;plat&gt;</i></tt>,
onde <i>&lt;plat&gt;</i> é a sua
<a href="../../pt/plat.html">plataforma</a>; por exemplo, <tt>i386</tt>.


<a name="InstStart"></a>
<h3>4.5.1 - Início da instalação</h3>
<!-- XXXrelease -->
Qualquer que seja o meio de inicialização, agora é hora de usá-lo.
Durante o processo de inicialização, o kernel e todos os programas
usados para a instalação do OpenBSD são carregados na memória.
Assim que o kernel de instalação estiver inicializado, a mídia de
inicialização não é mais necessária, pois tudo executa a partir do
disco de RAM.
Neste ponto você pode realmente remover o CD ou disquete que você usou
para inicializar, assumindo que você não precisa do CD para obter os
arquivos de instalação.

<p>
Em qualquer ponto durante a instalação do OpenBSD você pode terminar
o processo de instalação em andamento pressionando CTRL-C, e
reinicializar novamente a instalação digitando <tt>install</tt> no
prompt de comando sem reinicializar a máquina.
Você também pode especificar um "!" na maioria dos lugares na
instalação para obter um prompt de shell, e então
terminar a execução do shell para voltar ao instalador.

<p>
Quando a sua inicialização é bem-sucedida, você verá várias mensagens de
texto rolando em sua tela. Esse texto, em azul e branco em várias
arquiteturas, é o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg</a>,
o kernel mostrando a você quais dispositivos foram encontrados
e como eles estão enganchados em outros dispositivos.
Uma cópia desse texto é salva em <tt>/var/run/dmesg.boot</tt>.

<p>
Então você verá o seguinte:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ...
  root on rd0a swap on rd0b dump on rd0b
  erase ^?, werase ^W, kill ^U, intr ^C, status ^T

  Welcome to the OpenBSD/i386 4.7 installation program.
  (I)nstall, (U)pgrade or (S)hell? <b>i</b>
</pre></td></tr></table>

<p>
E com isso nós temos nossa primeira pergunta. Você tem as três
opções mostradas:
<ul>
<li><b>Install:</b> Carrega o OpenBSD, sobrescrevendo quaisquer dados
    que estejam na partição. Note que é possível deixar partições
    intactas nesse processo, tal como uma <tt>/home</tt>, mas
    de qualquer maneira, suponha que tudo mais será sobrescrito.
<li><b>Upgrade:</b> Instala um novo pacote de <a href="#FilesNeeded">
    arquivos de instalação</a> na máquina, mas não sobrescreve nenhuma
    configuração, nenhum dado de usuário ou programas adicionais.
    Nenhuma formatação de disco é realizada, os diretórios <tt>/etc</tt>
    e <tt>/var</tt> não são sobrescritos. Algumas notas importantes:
    <ul>
    <li>Você não tem a opção de instalar o arquivo <tt>etc47.tgz</tt>.
        Depois de instalar, você terá que
        <a href="../upgrade47.html#etcUpdates">mesclar manualmente</a>
        as mudanças de <tt>etc47.tgz</tt> em seu sistema antes de você
        considerá-lo completamente funcional. Essa é uma etapa
        importante que deve ser feita, senão serviços chaves (tais como
        o
        <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a>)
        podem não funcionar.

    <li>O processo de atualização de versão não é projetado para saltar
        versões! Isso frequentemente funciona, mas não é suportado.
        Para o OpenBSD 4.7, atualizar do 4.6 para o 4.7 é a única
        atualização de versão recomendada.
        Se você quer atualizar uma versão mais antiga, atualize primeiro
        para as versões intermediárias ou, se o seu sistema está muito
        desatualizado, considere fazer uma reinstalação completa.
    </ul>
    <!-- XXXversion -->
    Mais informações sobre atualizações entre versões podem ser
    encontradas no
    <a href="../upgrade47.html">Guia de Atualização de Versão do
    OpenBSD 4.7</a>.

<li><b>Shell:</b> Às vezes você precisa executar reparos ou fazer a
    manutenção em um sistema que não inicializa (ou não deve
    inicializar) um kernel normal.
    Essa opção permite que você realize a manutenção do seu sistema.
    Vários utilitários importantes estão disponíveis na mídia de
    inicialização.
</ul>

Assumimos que você escolheu "(I)nstall" aqui.


<a name="InstQuestions"></a>
<h3>4.5.2 - As perguntas da instalação</h3>

Agora começamos a receber as perguntas que definirão como o sistema é
configurado.
Você notará que, na maioria dos casos, todas as questões são feitas
antes, então a instalação toma o lugar.
Se você tem um computador lento ou uma conexão lenta com a Internet,
você pode responder estas questões, sair de perto do computador,
voltar e ter que somente reinicializar o sistema para completar a
instalação.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  At any prompt except password prompts you can escape to a shell by
  typing '!'. Default answers are shown in []'s and are selected by
  pressing RETURN.  You can exit this program at any time by pressing
  Control-C, but this can leave your system in an inconsistent state.

  Terminal type: [vt220] <b><i>Enter</i></b>
</pre></td></tr></table>


<p>
Na maioria dos casos o tipo de terminal padrão é o mais apropriado;
no entanto, se você está usando um
<a href="faq7.html#SerCon">console serial</a>
para a instalação, não escolha o padrão, responda adequadamente.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  System hostname? (short form, e.g. 'foo') <i><b>puffy</b></i>
</pre></td></tr></table>

<p>
Esse valor, junto com o nome de domínio DNS (especificado
<a href="#MoreNetwork">abaixo</a>), será salvo no arquivo
<tt>/etc/myname</tt>, que é utilizado durante a inicialização normal
para definir o nome de máquina do sistema.
Se você não definir um nome de domínio do sistema, o valor padrão
'my.domain' será utilizado.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Available network interfaces are: fxp0 vlan0.
  Which one do you wish to configure? (or 'done') [fxp0] <i><b>Enter</b></i>
</pre></td></tr></table>

<p>
<tt>vlan0</tt> é a interface virtual VLAN.
Para os nossos propósitos, vamos ignorar essa opção e nos focar nas
interfaces físicas.
Se você tem múltiplas interfaces físicas, elas serão listadas aqui.
Note que elas são identificadas pelo nome do driver, e não como
dispositivos Ethernet genéricos.
Nesse caso, "<tt>fxp0</tt>" refere-se ao primeiro dispositivo que
está utilizando o driver
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fxp&amp;sektion=4">fxp(4)</a>,
<tt>fxp1</tt> seria o segundo dispositivo, etc.
Mais informações sobre nomeação de dispositivos estão na
<a href="faq6.html#Setup.if">FAQ 6</a>.

<p>
Após selecionar o dispositivo que você quer configurar, você
agora vai configurá-lo.
Em muitos casos você quer configurá-lo usando DHCP:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  IPv4 address for fxp0? (or 'dhcp' or 'none') [dhcp] <b><i>Enter</i></b>
  Issuing hostname-associated DHCP request for fxp0.
  DHCPDISCOVER on fxp0 to 255.255.255.255 port 67 interval 1
  DHCPOFFER from 192.168.1.250 (08:00:20:94:0b:c8)
  DHCPREQUEST on fxp0 to 255.255.255.255 port 67
  DHCPACK from 192.168.1.250 (08:00:20:94:0b:c8)
  bound to 192.168.1.199 -- renewal in 43200 seconds.
</pre></td></tr></table>

<p>
DHCP configura o endereço IP, a máscara de sub-rede, o gateway padrão,
o nome de domínio DNS e os servidores DNS.
Se você não usa DHCP, você precisa especificar todas essas
coisas manualmente; veja <a href="#MoreNetwork">abaixo</a>
a discussão mais detalhada.
<a name="backMoreNetwork"></a>

<p>
Se você tem alguma configuração de IPv6 para fazer ou existem outras
interfaces para configurar (ou você não gostou da forma como configurou
a interface anterior), você pode fazê-la agora, mas em nosso caso
já estamos satisfeitos:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  IPv6 address for fxp0? (or 'rtsol' or 'none') [none] <b><i>Enter</i></b>
  Available network interfaces are: fxp0 vlan0.
  Which one do you wish to configure? (or 'done') [done] <b><i>Enter</i></b>
  Using DNS domainname in.nickh.org
  Using DNS nameservers at 192.168.1.252
  Do you want to do any manual network configuration? [no] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Se você responder "yes" para a pergunta "manual network configuration",
você será colocado em um prompt de shell onde você pode configurar
qualquer outra coisa que precisa de configuração, então digite "exit"
para retornar ao programa de instalação.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Password for root account? (will not echo) <i>PaSsWoRd</i>
  Password for root account? (again) <i>PaSsWoRd</i>
</pre></td></tr></table>

<p>
Utilize uma senha segura para a conta do root, e lembre-se: existem
vários atacantes na Internet tentando acessar o seu computador, e
eles tentarão um monte de senhas comuns que as pessoas acham que
são senhas realmente seguras.

<p>
Mais tarde você terá uma chance de criar uma conta administrativa
e desativar o acesso (SSH) remoto para a conta do root, mas você
ainda quer uma boa senha na sua conta do root.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Start sshd(8) by default? [yes] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Geralmente você vai querer o sshd(8) funcionando.
Se o seu uso do sistema não necessitar do sshd(8),
há uma pequena vantagem teórica de segurança nisso.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Start ntpd(8) by default? [no] <b>y</b>
  NTP server? (hostname or 'default') [default] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Você terá a opção de executar o
<a href="faq6.html#OpenNTPD">OpenNTPD</a>, a implementação NTP do
OpenBSD.
O OpenNTPD é uma maneira simples de manter o relógio do seu sistema
corretamente sincronizado.
A configuração padrão, utilizando
<a href="http://www.pool.ntp.org">pool.ntp.org</a>, utiliza um grande
número de servidores de horas de acesso gratuito espalhados pelo mundo.

<p>
Uma razão pela qual você talvez NÃO queira executar o ntpd(8) é
se você está executando um sistema em <a href="#Multibooting">inicialização dupla</a>, com
um outro SO que não utiliza o relógio de hardware definido como
GMT, e você não quer que o OpenBSD altere o horário para o seu
outro SO.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Do you expect to run the X Window System? [yes] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Nem todas as plataformas perguntam se você espera executar o X, e
são aquelas que não requerem que uma variável do sysctl seja definida
para utilizar o X.
Responder "y" aqui modificará o <tt>/etc/sysctl.conf</tt> para incluir
a linha <tt>machdep.allowaperture=1</tt> ou
<tt>machdep.allowaperture=2</tt>, dependendo da sua plataforma.

<p>
Se você não pretende executar o X ou não tem certeza, responda 'N'; se
mudar de ideia basta editar o arquivo <tt>/etc/sysctl.conf</tt>.
Existe uma vantagem de segurança em deixar o driver
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xf86&amp;sektion=4">xf86(4)</a>
desabilitado, pois os motores gráficos das placas de vídeo dos
computadores modernos podem potencialmente serem usados para alterar a
memória, sem controle do processador.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Do you want the X Window System to be started by xdm(1)? [no] <b>y</b>
</pre></td></tr></table>

<p>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xdm&amp;sektion=1">xdm(1)</a>
iniciar o ambiente X na inicialização do sistema.
Nós recomendamos fazer isso durante a instalação, só se você estiver certo que irá funcionar
o X por padrão no seu sistema.
Caso contrário, <a href="faq11.html">configure o X</a> antes de configurar o xdm(1).

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Change the default console to com0? [no] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Se você deseja configurar um console serial em vez do padrão do seu
sistema (usualmente um teclado e um monitor), essa é sua chance.
Se você mudar o padrão para "y", um prompt será exibido para você
definir a taxa de bits.
Note que, para consoles seriais, o mais rápido nem sempre é o melhor;
utilizar o padrão da sua plataforma é altamente recomendado.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Setup a user? (enter a lower-case loginname, or 'no') [no] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Você agora tem a oportunidade de criar um OUTRO usuário, além
do root, para a manutenção do sistema.
Esse usuário será um membro do grupo "wheel", assim você pode
executar o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=su&amp;sektion=1">su(1)</a>
e um prompt será exibido para receber uma senha.

<p>
Note que se você quer criar o usuário, especifique o nome do usuário, e
não "y" ou "yes".

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  What timezone are you in? ('?' for list) [Canada/Mountain] <b>US/Michigan</b>
</pre></td></tr></table>

<p>
O OpenBSD assume que o relógio em tempo real (RTC - "Real-Time Clock")
do seu computador está configurado como GMT, mas você também tem que
especificar em qual fuso horário você está.
Podem existir várias respostas válidas para sua localização física.
Pressionar "?" no prompt ajuda a guiá-lo para encontrar um nome de
fuso horário válido.

<p>
Note que o instalador frequentemente vai determinar corretamente
o seu fuso horário, e então você pode simplesmente digitar
"Enter".

<p>
Mais informações sobre a configuração do fuso horário podem
ser encontradas <a href="#MoreTimeZone">aqui</a>.
<a name="backMoreTimeZone"></a>

<a name="InstDisks"></a>
<h3>4.5.3 - Configuração dos discos</h3>

<i><b>Nota importante:</b>
Usuários com um disco rígido grande (maior do que era comum quando seu
computador foi fabricado) talvez queiram ver
<a href="faq14.html#LargeDrive">esta seção</a> antes de continuar.</i>

<p>
Configurar apropriadamente o layout do seu disco é provavelmente
a parte mais difícil de uma instalação do OpenBSD.

<p>
A configuração de discos no OpenBSD pode variar entre as plataformas.
Para <a href="../../i386.html">i386</a>,
<a href="../../amd64.html">amd64</a>,
<a href="../../macppc.html">macppc</a>,
<a href="../../zaurus.html">zaurus</a> e
<a href="../../armish.html">armish</a>, a configuração dos discos
é feita em duas etapas.
Primeiro a fatia do disco rígido referente ao OpenBSD é definida
utilizando o fdisk(8), então essa fatia é subdividida em partições
OpenBSD usando o disklabel(8).

<p>
Alguns usuários se confundem com a terminologia utilizada aqui. Isso
acontece porque nós estamos usando a palavra "partição" em dois sentidos
diferentes.
Existem duas camadas de particionamento nas plataformas do OpenBSD
citadas acima, a primeira, que pode ser considerada o particionamento
de Sistema Operacional, permite que múltiplos SOs em um computador
definam seus espaços no disco, e a segunda, onde a partição
OpenBSD é subparticionada em sistemas de arquivos individuais.
A primeira camada é visível como uma partição do disco para o DOS,
Windows e qualquer outro SO que use esse sistema de layout de disco,
a segunda camada de particionamento somente é visível pelo OpenBSD e SOs
que podem ler diretamente o seu sistema de arquivos.

<p>
O novo instalador do OpenBSD tenta tornar mais fáceis as tarefas de
definição de layout de disco através de um padrão equilibrado para uso
"geral".
Note que muitas pessoas ainda quererão personalizar o padrão, ou usar
seu próprio layout de disco, mas novos usuários certamente devem começar
com esta configuração até que vejam a necessidade de uma diferente.
Note que o layout padrão varia dependendo do tamanho do seu sistema
de discos.

<p>
Por ora, vamos utilizar os valores padrão em nosso disco de 40G.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Available disks are: wd0.
  Which one is the root disk? (or 'done') [wd0]
  Disk: wd0       geometry: 4863/255/63 [78125000 Sectors]
  Offset: 0       Signature: 0xAA55
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   0: 06      0   1   1 -    521 254  63 [          63:     8385867 ] DOS > 32MB
   1: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   2: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   3: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
  Use (W)hole disk or (E)dit the MBR? [whole] <i><b>Enter</b></i>
  Setting OpenBSD MBR partition to whole wd0...done.
</pre></td></tr></table>
Note que esse disco possui uma partição pré-existente -- <i>ao escolher
a opção "whole" (todo o disco) a partição será removida!</i>

<p>
Definir todo o disco para o OpenBSD resulta na
realização de uma série de coisas importantes:
<ul>
<li>Apaga quaisquer partições existentes no disco
<li>Cria um MBR e uma assinatura de disco, assim o disco pode ser
    inicializado
<li>Cria uma partição OpenBSD usando o disco inteiro
<li>Marca aquela partição como "ativa".
</ul>

Existem vários momentos onde você não quer fazer aquilo, incluindo:
<ul>
<li>Você quer que as partições de outros SOs sejam mantidas
<li>Você deseja manter partições de configuração ("setup"),
    suspender para o disco ("suspend to disk"), ou outras
    partições do sistema
<li>Você deseja construir um sistema com
    <a href="#Multibooting">inicialização múltipla</a>
</ul>

Note que é exigido que um novo drive (ou um que nunca foi utilizado para
inicialização) tenha um MBR válido, uma assinatura válida, uma
partição OpenBSD e uma partição marcada como "ativa".
Se você não fizer essas coisas usando a opção "Use whole disk",
você precisa se certificar manualmente de que elas sejam feitas.

<p>
Mais informações sobre o particionamento fdisk do seu disco podem
ser encontradas <a href="#Morefdisk">abaixo</a>.
<a name="BackMorefdisk"></a>

<p>
Agora nós vamos dividir nossa partição fdisk do OpenBSD em
partições de disco do OpenBSD usando o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Setting OpenBSD MBR partition to whole wd0...done.
  The auto-allocated layout for wd0 is:
  #                size           offset  fstype [fsize bsize  cpg]
    a:          1024.0M               63  4.2BSD   2048 16384    1 # /
    b:           507.1M          2097215    swap                   
    c:         38147.0M                0  unused                   
    d:          2620.4M          3135791  4.2BSD   2048 16384    1 # /tmp
    e:          4143.1M          8502287  4.2BSD   2048 16384    1 # /var
    f:          2048.0M         16987323  4.2BSD   2048 16384    1 # /usr
    g:          1024.0M         21181627  4.2BSD   2048 16384    1 # /usr/X11R6
    h:          3610.7M         23278779  4.2BSD   2048 16384    1 # /usr/local
    i:          1961.6M         30673543  4.2BSD   2048 16384    1 # /usr/src
    j:          1961.6M         34690971  4.2BSD   2048 16384    1 # /usr/obj
    k:         19245.9M         38708399  4.2BSD   2048 16384    1 # /home

  Use (A)uto layout, (E)dit auto layout, or create (C)ustom layout? [a] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
O instalador nos apresentou sua proposta de
"Auto layout" (layout automático) para as partições do OpenBSD no nosso
disco, a qual nós vamos aceitar.

<p>
Se o layout proposto não é apropriado para as suas necessidades,
você pode, obviamente, editar o padrão ou personalizá-lo completamente;
mais detalhes sobre o particionamento do disklabel
<a href="#Moredisklabel">abaixo</a>.
<a name="BackMoredisklabel"></a>

<p>
<b>NOTA para reinstaladores:</b>
O novo instalador não limpa o seu disklabel antigo se você
escolher "(C)ustom Layout", mas você terá que especificar
novamente cada ponto de montagem usando a opção 'm' no disklabel(8).

<p>
O instalador agora cria aquelas partições, cria nelas os
sistemas de arquivos usando o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&amp;sektion=8">newfs(8)</a>,
e as monta para a instalação:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  /dev/rwd0a: 1024.0MB in 2097152 sectors of 512 bytes
  6 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0k: 19245.9MB in 39415696 sectors of 512 bytes
  96 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0d: 2620.4MB in 5366496 sectors of 512 bytes
  13 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0f: 2048.0MB in 4194304 sectors of 512 bytes
  11 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0g: 1024.0MB in 2097152 sectors of 512 bytes
  6 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0h: 3610.7MB in 7394764 sectors of 512 bytes
  18 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0j: 1961.6MB in 4017428 sectors of 512 bytes
  10 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0i: 1961.6MB in 4017428 sectors of 512 bytes
  10 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0e: 4143.1MB in 8485036 sectors of 512 bytes
  21 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/wd0a on /mnt type ffs (rw, asynchronous, local)
  /dev/wd0k on /mnt/home type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0d on /mnt/tmp type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0f on /mnt/usr type ffs (rw, asynchronous, local, nodev)
  /dev/wd0g on /mnt/usr/X11R6 type ffs (rw, asynchronous, local, nodev)
  /dev/wd0h on /mnt/usr/local type ffs (rw, asynchronous, local, nodev)
  /dev/wd0j on /mnt/usr/obj type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0i on /mnt/usr/src type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0e on /mnt/var type ffs (rw, asynchronous, local, nodev, nosuid)
</pre></td></tr></table>

<p>

Você pode notar que a partição <i>c</i> parece ter sido ignorada.
Essa partição é o seu disco rígido inteiro; não tente alterá-la.

<a name="InstMedia"></a>
<h3>4.5.4 - Escolha da mídia de instalação e dos pacotes de arquivos</h3>

Nesta etapa você tem a chance de escolher sua mídia de instalação.
Neste caso vamos instalar usando um servidor FTP.
<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Location of sets? (cd disk ftp http or 'done') [cd] <b>ftp</b>
  HTTP/FTP proxy URL? (e.g. 'http://proxy:8080', or 'none') [none] <b><i>Enter</i></b>
  Server? (hostname, list#, 'done' or '?') [mirror.example.org] <b>obsd.cec.mtu.edu</b>
</pre></td></tr></table>
Se você não se lembra da localização do seu espelho favorito
(ou de nenhum!), o instalador frequentemente é capaz de
apresentar-lhe um espelho padrão que funciona bem para você.
Caso contrário, pressione "?" para uma lista de espelhos ser
exibida, e selecione o número de um espelho que funciona bem
para você.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Server directory? [pub/OpenBSD/4.7/i386] <b><i>Enter</i></b>
  Login? [anonymous] <b><i>Enter</i></b>
</pre></td></tr></table>

Todos os espelhos FTP públicos suportam downloads anônimos,
obviamente, mas você pode ter uma máquina local que requer
um nome de início de sessão e uma senha.

<p>
Você agora pode ajustar a lista de
<a href="#FilesNeeded">pacotes de arquivos</a>.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Select sets by entering a set name, a file name pattern or 'all'. De-select
  sets by prepending a '-' to the set name, file name pattern or 'all'. Selected
  sets are labelled '[X]'.
      [X] bsd           [X] etc47.tgz     [X] game47.tgz    [X] xfont47.tgz
      [X] bsd.rd        [X] misc47.tgz    [X] xbase47.tgz   [X] xserv47.tgz
      [ ] bsd.mp        [X] comp47.tgz    [X] xetc47.tgz
      [X] base47.tgz    [X] man47.tgz     [X] xshare47.tgz
  Set name(s)? (or 'abort' or 'done') [done] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Você precisa, no mínimo, de um kernel (<tt>bsd</tt>) e dos
pacotes de arquivos base47.tgz e etc47.tgz.
A menos que você saiba o que está fazendo, utilize os pacotes
escolhidos por padrão.
Você pode adicionar ou remover pacotes de arquivos usando os
caracteres "+" e "-" na frente do nome do pacote de arquivos, e
também pode usar os caracteres curinga:
<ul>
<li><tt><b>-comp47.tgz</b></tt> remove o <tt>comp47.tgz</tt>
<li><tt><b>+bsd.mp</b></tt> adiciona o bsd.mp
<li><tt><b>-x*</b></tt> remove todos os componentes do X
</ul>

Novamente vamos utilizar a escolha padrão.
Essa máquina é um sistema de processador único, então bsd.mp não é
instalado, mas todas as outras coisas são.
Se em um outro momento a máquina for atualizada para um sistema com
múltiplos processadores, você talvez queira instalar o bsd.mp também.

<p>
E agora vamos começar nossa instalação!
Este é o ponto onde você pode desejar voltar depois de um tempo se você
possui um computador lento ou uma conexão lenta com a Internet,
entretanto, com um computador rápido e arquivos locais, este
processo pode levar dois minutos ou menos!

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  bsd          100% |*************************************|  7404 KB    00:04
  bsd.rd       100% |*************************************|  6147 KB    00:03
  base47.tgz   100% |*************************************| 49365 KB    01:46
  etc47.tgz    100% |*************************************|   510 KB    00:01
  misc47.tgz   100% |*************************************|   356 KB    00:06
  comp47.tgz   100% |*************************************| 90468 KB    03:08
  man47.tgz    100% |*************************************|  9240 KB    00:21
  game47.tgz   100% |*************************************|  2556 KB    00:04
  xbase47.tgz  100% |*************************************| 15185 KB    00:21
  xetc47.tgz   100% |*************************************| 70053       00:00
  xshare47.tgz 100% |*************************************|  2887 KB    00:12
  xfont47.tgz  100% |*************************************| 38754 KB    00:57
  xserv47.tgz  100% |*************************************| 19413 KB    00:39
  Location of sets? (cd disk ftp http or 'done') [done] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Sim, o instalador está perguntando novamente sobre a partir de onde nós
queremos instalar coisas.
Essas coisas são pacotes de arquivos ausentes, esquecidos ou falhos
que podem ser reinstalados, e também é dessa maneira que os
<a href="#site">pacotes de arquivos personalizados</a> podem ser
instalados.

<p>
Novamente vamos escolher o padrão, já terminamos a etapa de instalação
de arquivos.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Saving configuration files...done.
  Generating initial host.random file...done.
  Making all device nodes...done.

  CONGRATULATIONS! Your OpenBSD install has been successfully completed!
  To boot the new system, enter 'reboot' at the command prompt.
  When you login to your new system the first time, please read your mail
  using the 'mail' command.

  #
</pre></td></tr></table>
<p>

<a name="Inst1stBoot"></a>
<h3>4.5.5 - Primeira inicialização!</h3>
O OpenBSD agora está instalado no seu sistema e pronto para sua
primeira inicialização, mas antes que você a faça...

<p>
<h4>Antes da reinicialização</h4>
Neste ponto seu sistema está instalado e pronto para ser inicializado
e configurado para o serviço. Antes disso, entretanto, é
melhor você verificar a <a href="../../errata.html">página Errata</a>
para ver se existe alguma falha que possa causar-lhe algum dano.

<p>
Um truque que você pode usar "antes da primeira inicialização" é
executar:
<pre>
    # <b>/mnt/usr/sbin/chroot /mnt</b>
</pre>
no prompt de shell.
Isso ajusta seus pontos de montagem para ser o que seriam em uma
inicialização normal do seu novo sistema instalado. Você agora pode
fazer configurações básicas do seu sistema, como adicionar usuários,
mudar pontos de montagem, etc.

<h4>Depois da reinicialização</h4>

Na sua primeira inicialização as chaves do
<a href="http://www.openssh.com">SSH</a> são geradas.
Em computadores modernos isso leva alguns segundos, e você talvez
nem note a geração acontecendo.
Em sistemas antigos a geração pode levar vários minutos, possivelmente
uma hora ou mais em sistemas realmente lentos.

<p>
Umas das primeiras coisas que você deve ler, depois de instalar o seu
sistema, é
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=afterboot&amp;sektion=8">afterboot(8)</a>.

<p>
Você também pode achar os seguintes links úteis:
<ul>
<li><a href="faq10.html#AddDelUser">Como adicionar usuários no OpenBSD</a>
<li><a href="faq6.html#Setup">Configuração Inicial da Rede</a>
<li><a href="faq2.html#ManPages">Páginas de manual dos comandos
    populares/mais usados</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi">Páginas de manual
    do OpenBSD na Web</a>
<li><a href="faq15.html">O Sistema de Pacotes e Portes do OpenBSD para a
    instalação de software</a>
</ul>

<a name="InstFinish"></a>
<h3>4.5.6 - Uma última coisa...</h3>
Os desenvolvedores do OpenBSD pedem que você
<a href="#SendDmesg">envie uma cópia do seu dmesg</a>. Isso é realmente
muito apreciado por eles e, no final das contas, por todos os usuários.


<a name="More"></a>
<h2>4.6 - Detalhes de uma instalação mais complexa</h2>
Algumas vezes você não pode aceitar os valores padrão.
Nesta seção você encontra alguns detalhes a mais sobre partes
do processo de instalação.

<a name="MoreNetwork"></a>
<h3>4.6.1 - Configuração da rede</h3>

Se você não possui um servidor DHCP disponível, você tem que
configurar seu(s) adaptador(es) de rede manualmente.
Exemplo:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Which one do you wish to configure? (or 'done') [xl0] <b><i>Enter</i></b>
  IPv4 address for xl0? (or 'dhcp' or 'none') [dhcp] <b>192.168.1.37</b>
  Netmask? [255.255.255.0] 255.255.254.0
  IPv6 address for xl0? (or 'rtsol' or 'none') [none] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Após aquele conjunto de perguntas, você tem a chance de configurar
quaisquer outros adaptadores de rede que sua máquina possua.
Se você especificar um outro adaptador de rede aqui, as questões
acima são repetidas.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Available network interfaces are: xl0 vlan0.
  Which one do you wish to configure? (or 'done') [done]
</pre></td></tr></table>

<p>
Agora você tem que configurar o gateway padrão e os servidores DNS,
coisas que estão relacionadas a todos os adaptadores de rede:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Default IPv4 route? (IPv4 address, 'dhcp' or 'none') <b>192.168.1.1</b>
  add net default: gateway 192.168.1.1
  DNS domain name? (e.g. 'bar.com') [my.domain] <b>exemplo.org</b>
  DNS nameservers? (IP address list or 'none') [none] <b>192.168.1.250 192.168.1.251</b>
</pre></td></tr></table>

<p>
Note que múltiplos servidores DNS podem ser listados, separados
por espaços.

<p>
Algumas vezes você tem que fazer alguma outra coisa, por exemplo,
configurar uma chave de acesso de rede sem fio, ou definir manualmente
uma configuração de duplex ou velocidade (não faça isso, a menos que
você absolutamente TENHA que fazer; corrigir a configuração do seu
switch é uma ideia muito melhor!).
Você agora tem a chance de ir para o shell e fazer qualquer configuração
manual que gostaria de fazer.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Do you want to do any manual network configuration? [no] <b>y</b>
  Type 'exit' to return to install.
  # <b>ifconfig xl0 media</b>
  xl0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
          lladdr 00:08:74:2c:df:9c
          groups: egress
          media: Ethernet autoselect (100baseTX full-duplex)
          status: active
          supported media:
                  media 10baseT
                  media 10baseT mediaopt full-duplex
                  media 100baseTX
                  media 100baseTX mediaopt full-duplex
                  media autoselect
          inet 192.168.1.37 netmask 0xfffffe00 broadcast 192.168.1.255
  # <b>ifconfig xl0 media 100baseTX mediaopt full-duplex</b>
  # <b>ifconfig xl0</b>
  xl0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
          lladdr 00:08:74:2c:df:9c
          groups: egress
          media: Ethernet 100baseTX full-duplex
          status: active
          inet6 fe80::208:74ff:fe2c:df9c%xl0 prefixlen 64 scopeid 0x1
          inet 192.168.1.37 netmask 0xfffffe00 broadcast 192.168.1.255
  # <b>exit</b>
<i>...a configuração é retomada...</i>
</pre></td></tr></table>

<p>
<a href="#backMoreNetwork">(voltar para onde você estava)</a>

<a name="MoreTimeZone"></a>
<h3>4.6.2 - Configuração do fuso horário</h3>
O horário no Unix não é uma coisa simples (ou, colocado de outra
maneira, o horário no Unix é uma coisa <i>realmente</i> simples,
o horário humano é uma bagunça politicamente manipulada).
Os arquivos de fuso horário ajudam o sistema a converter o
horário do Unix (o número de segundos que se passaram desde a
meia-noite de 1 de janeiro de 1970 (GMT)) para o horário humano,
levando em consideração coisas como fuso horário, horário de verão
(DST - "Daylight Saving Time"), mudanças de regras de DST, etc.
Eles também incluem o histórico das mudanças.

<p>
Múltiplos arquivos de definição de fuso horário algumas vezes possuem o
mesmo horário <i>atual</i>, mas podem ter uma história diferente.
Por exemplo, EST5EDT e US/Michigan possuem o mesmo horário HOJE EM DIA,
mas em 1975 as regras eram diferentes, então se você está fazendo
cálculos com datas e horários que envolvam 1975, você deve tomar
cuidado com as diferenças.
Você deve utilizar o arquivo de fuso horário mais específico e mais
preciso para a sua região que você puder, em vez de um que fornece o
horário correto no momento.

<p>
O instalador do OpenBSD ajuda-o a encontrar o arquivo de fuso horário
apropriado para você se você não tem certeza sobre qual utilizar.
Simplesmente digite "<tt>?</tt>" em cada prompt e o instalador
mostra a você as opções.
Se o primeiro nível de respostas não serve para você, digite o nome
de um continente ou país e olhe as opções de lá:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  What timezone are you in? ('?' for list) [right/EST5EDT] <b>?</b>
  Africa/      Chile/       GB-Eire      Israel       NZ-CHAT      UCT
  America/     Cuba         GMT          Jamaica      Navajo       US/
  Antarctica/  EET          GMT+0        Japan        PRC          UTC
  Arctic/      EST          GMT-0        Kwajalein    PST8PDT      Universal
  Asia/        EST5EDT      GMT0         Libya        Pacific/     W-SU
  Atlantic/    Egypt        Greenwich    MET          Poland       WET
  Australia/   Eire         HST          MST          Portugal     Zulu
  Brazil/      Etc/         Hongkong     MST7MDT      ROC          posix/
  CET          Europe/      Iceland      Mexico/      ROK          posixrules
  CST6CDT      Factory      Indian/      Mideast/     Singapore    right/
  Canada/      GB           Iran         NZ           Turkey
  What timezone are you in? ('?' for list) [right/EST5EDT] <b>US</b>
  What sub-timezone of 'US' are you in? ('?' for list) ?
  Alaska          Central         Hawaii          Mountain        Samoa
  Aleutian        East-Indiana    Indiana-Starke  Pacific
  Arizona         Eastern         Michigan        Pacific-New
  What sub-timezone of 'US' are you in? ('?' for list) <b>Michigan</b>
</pre></td></tr></table>

<p>
Definimos o horário para "US/Michigan". Isso cria uma ligação simbólica
em <tt>/etc</tt> apontando para o arquivo de fuso horário apropriado em
<tt>/usr/share/zoneinfo</tt>, alguma coisa como:

<blockquote><pre>
  /etc/localtime -> /usr/share/zoneinfo/US/Michigan
</pre></blockquote>

Note o diretório "<tt>right/</tt>", esse diretório inclui ajustes de
segundos de salto, mas fora isso duplica as escolhas de fuso horário
padrão.
Mais informações <a href="faq8.html#NTPerror">aqui</a>.

<p>
<a href="#backMoreTimeZone">(voltar para onde estávamos)</a>

<a name="Morefdisk"></a>
<h3>4.6.3 - Layout fdisk(8) personalizado</h3>

Nota: somente algumas plataformas do OpenBSD usam o fdisk e, usualmente,
apenas os usuários das plataformas <a href="../../i386.html">i386</a> e
<a href="../../amd64.html">amd64</a> têm que se preocupar com o fdisk.
Usuários da maioria das outras plataformas que usam o fdisk não têm
que se preocupar com inicialização múltipla ou partições de
configuração/diagnóstico.
Por essa razão, esta seção é focada nas plataformas i386 e amd64.

<p>
O
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8">fdisk(8)</a>
é usado para marcar a parte do OpenBSD do seu disco rígido.
Ele serve para demarcar a parte do disco utilizada pelo OpenBSD das
outras partes usadas por outros SOs ou funções do sistema.

<p>
Se você tem uma partição no seu disco que você deseja manter, ou se você
deseja deixar espaço para uma outra partição, você NÃO deve escolher
"(W)hole disk" e, no lugar, deve editar a tabela de partições com o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8">fdisk(8)</a>.
Mais informações sobre a execução manual do fdisk(8) podem ser
encontradas <a href="faq14.html#fdisk">aqui</a>.

<b>Antes de mecher com qualquer sistema que contenha dados que você não
deseja perder, tenha certeza de que você possui um bom backup.</b>
É muito fácil arruinar dados importantes neste processo, então tenha
certeza de que você está pronto para voltar atrás, se necessário.

<p>
Se você está adicionando o OpenBSD a um sistema existente, provavelmente
você precisa criar algum espaço livre no seu sistema antes de instalar
o OpenBSD.
Isso normalmente envolve a remoção de partições ou, possivelmente, a
redução do tamanho de partições existentes.
O programa <a href="http://gparted.sourceforge.net/">gparted</a>
é útil para encolher as partições de muitos SOs populares, tornando
possível a instalação do OpenBSD no espaço livre que foi aberto.

<p>
Neste exemplo vamos assumir que você está utilizando um disco vazio
de 40G e deseja criar um sistema com inicialização múltipla, com 5G
reservados no começo do disco para o Windows e o restante para o
OpenBSD.
Note que um drive vazio tem que ter um código de inicialização MBR
válido e uma assinatura válida escritos no disco antes que ele possa
ser inicializado.

<p>
O processo é quase o mesmo que trabalhar ao redor de uma partição
existente, você apenas precisa saltar as partes onde criamos a
partição para o Windows e se preocupar com a instalação do código
de inicialização MBR.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Available disks are: wd0.
  Which one is the root disk? (or 'done') [wd0] <b><i>Enter</i></b>
  MBR has invalid signature; not showing it.
</pre></td></tr></table>
SE o disco tivesse um MBR válido, ele mostraria a você a tabela de
partições existente, que pode ser um bom modo de mostrar se um
disco já possui dados.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Use (W)hole disk or (E)dit the MBR? [whole] <b>e</b>
 
  You will now create a single MBR partition to contain your OpenBSD data. This
  partition must have an id of 'A6'; must *NOT* overlap other partitions; and
  must be marked as the only active partition.  Inside the fdisk command, the
  'manual' command describes all the fdisk commands in detail.

  Disk: wd0       geometry: 4998/255/63 [80293248 Sectors]
  Offset: 0       Signature: 0x0
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   0: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   1: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   2: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   3: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
Enter 'help' for information
fdisk: 1>
</pre></td></tr></table>

<p>
Antes de tudo note o prompt do fdisk.
O número "1" indica o primeiro nível das tabelas de partições -- se você
estivesse editando uma partição estendida o número seria "2"
(ou um número maior).
Partições estendidas são partições que têm sua própria
tabela de subpartições, e são utilizadas para contornar o
limite de projeto de quatro partições do IBM AT.
As partições estendidas não serão abordadas aqui.

<p>
Em primeiro lugar faremos da partição "0" uma partição de 5G para
o Windows (usando NTFS), e a partição "1" será nossa partição para
o OpenBSD usar o resto do disco.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk: 1> <b>e 0</b>
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   0: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
  Partition id ('0' to disable)  [0 - FF]: [0] (? for help)
</pre></td></tr></table>

<p>
Já que não sabemos de cor qual é o ID de partição para o NTFS,
digitamos "?" para obtermos uma lista.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Partition id ('0' to disable)  [0 - FF]: [0] (? for help) <b>?</b>
  Choose from the following Partition id values:
  00 unused         20 Willowsoft     66 NetWare 386    A9 NetBSD
  01 DOS FAT-12     24 NEC DOS        67 Novell         AB MacOS X boot
  02 XENIX /        27 Win Recovery   68 Novell         AF MacOS X HFS+
  03 XENIX /usr     38 Theos          69 Novell         B7 BSDI filesy*
  04 DOS FAT-16     39 Plan 9         70 DiskSecure     B8 BSDI swap
  05 Extended DOS   40 VENIX 286      75 PCIX           BF Solaris
  06 DOS > 32MB     41 Lin/Minux DR   80 Minix (old)    C0 CTOS
  07 NTFS           42 LinuxSwap DR   81 Minix (new)    C1 DRDOSs FAT12
  08 AIX fs         43 Linux DR       82 Linux swap     C4 DRDOSs < 32M
  09 AIX/Coherent   4D QNX 4.2 Pri    83 Linux files*   C6 DRDOSs >=32M
  0A OS/2 Bootmgr   4E QNX 4.2 Sec    84 OS/2 hidden    C7 HPFS Disbled
  0B Win95 FAT-32   4F QNX 4.2 Ter    85 Linux ext.     DB CPM/C.DOS/C*
  0C Win95 FAT32L   50 DM             86 NT FAT VS      DE Dell Maint
  0E DOS FAT-16     51 DM             87 NTFS VS        E1 SpeedStor
  0F Extended LBA   52 CP/M or SysV   8E Linux LVM      E3 SpeedStor
  10 OPUS           53 DM             93 Amoeba FS      E4 SpeedStor
  11 OS/2 hidden    54 Ontrack        94 Amoeba BBT     EB BeOS/i386
  12 Compaq Diag.   55 EZ-Drive       99 Mylex          EE EFI GPT
  14 OS/2 hidden    56 Golden Bow     9F BSDI           EF EFI Sys
  16 OS/2 hidden    5C Priam          A0 NotebookSave   F1 SpeedStor
  17 OS/2 hidden    61 SpeedStor      A5 FreeBSD        F2 DOS 3.3+ Sec
  18 AST swap       63 ISC, HURD, *   A6 OpenBSD        F4 SpeedStor
  19 Willowtech     64 NetWare 2.xx   A7 NEXTSTEP       FF Xenix BBT
  1C ThinkPad Rec   65 NetWare 3.xx   A8 MacOS X
  Partition id ('0' to disable)  [0 - FF]: [0] (? for help) <b>07</b>
</pre></td></tr></table>

<p>
Agora nós definimos os pontos de início e fim:
<p>

<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Do you wish to edit in CHS mode? [n]
</pre></td></tr></table>

<p>
O modo CHS permite a você especificar o espaço de disco em
Cilindros, Cabeças e Setores (CHS - "Cylinders, Heads and Sectors").
Mantenha em mente que em discos rígidos modernos os números CHS são
completamente fictícios, eles são apenas três números que são traduzidos
para um setor no disco, que é traduzido para a geometria física do
seu disco (que, de qualquer jeito, provavelmente varia através do
disco).

<p>
Se você responder "y", você será questionado pelo cilindro, pela
cabeça e pelo setor de início e fim.
Se você responder "no" (como vamos fazer), você será questionado
pelo setor de início e pelo tamanho.
Editar por CHS é frequentemente mais fácil durante o trabalho ao redor
de uma partição existente, e por setor de início e tamanho é mais fácil
quando você quer criar rapidamente uma partição de um determinado
tamanho.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  offset: [0] <b>63</b>
</pre></td></tr></table>

<a name="trackoffset"></a>
<p>
As plataformas que utilizam o fdisk precisam da distância de uma
trilha ("track") antes da primeira partição.
Uma trilha é um número de setores de "setores por trilha", o último
número dos números da mensagem "geometry:".
É fácil criar o hábito de especificar "63" aqui, já que esse é um valor
comum em discos IDE e SATA modernos, mas nem todos os discos usam isso
como o tamanho de uma trilha, as exceções modernas mais comuns a isso
são os discos SCSI e Flash.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  size: [0] <b>5g</b>
  Rounding to nearest cylinder: 10490382
</pre></td></tr></table>

<p>
O valor de tamanho ("size") pode ser o número de setores (cada um com
512 bytes), ou a capacidade desejada quando seguida de "k", "m" ou "g".
Na edição com offset e size, o fdisk arrendonda a sua partição de modo
que ela termine em um limite de cilindro (o OpenBSD não se preocupa
com isso, e é possível que nenhum SO moderno se preocupe, mas alguns
podem se preocupar).

<p>
Agora vamos dar uma olhada na nossa nova partição:
<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> p
  Disk: wd0       geometry: 4998/255/63 [80293248 Sectors]
  Offset: 0       Signature: 0x0
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   0: 07      0   1   1 -    652 254  63 [          63:    10490382 ] NTFS
   1: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   2: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   3: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
  fdisk:*1>
</pre></td></tr></table>

<p>
Note que agora o prompt inclui um "*". Isso significa que existem
mudanças que não foram salvas.

<p>
Agora nossa partição do Windows está criada.
Note que essa partição é apenas um espaço reservado no disco, ela
não está formatada; nenhum sistema de arquivos existe nela.
Você terá que se preocupar com isso quando for instalar o Windows;
nós alcançamos nosso objetivo de reservar espaço para a partição do
Windows ser criada mais tarde.

<p>
Agora nós criamos nossa partição do OpenBSD.
Neste caso o ID de partição será "A6".

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> e 1
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   1: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
  Partition id ('0' to disable)  [0 - FF]: [0] (? for help) <b>a6</b>
  Do you wish to edit in CHS mode? [n] <b><i>Enter</i></b>
  offset: [0]
</pre></td></tr></table>

<p>
Chiii!
Qual é nosso offset? Simples -- o offset da partição anterior mais
o tamanho da partição, neste caso 63+10490382 = 10490445.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  offset: [0] <b>10490445</b>
  size: [0] <b>*</b>
  fdisk:*1>
</pre></td></tr></table>

<p>
Note que aqui nós especificamos "*" como o tamanho, que significa
"o resto do disco". Novamente nós poderíamos ter especificado o tamanho
em setores, "m" ou "g" se quiséssemos deixar espaço para alguma outra
coisa.

<p>
Agora vamos dar uma olhada na nossa tabela de partições:

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> <b>p</b>
  Disk: wd0       geometry: 4998/255/63 [80293248 Sectors]
  Offset: 0       Signature: 0x0
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   0: 07      0   1   1 -    652 254  63 [          63:    10490382 ] NTFS
   1: A6    653   0   1 -   4998   5  63 [    10490445:    69802803 ] OpenBSD
   2: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   3: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
  fdisk:*1>
</pre></td></tr></table>

<p>
<b>AINDA NÃO TERMINAMOS!</b><br>
Esse disco ainda não é inicializável!
Como ele era um disco novo, o <a href="faq14.html#Boot386">MBR</a>
do disco estava completamente vazio.
A mensagem "Signature: 0x0" mostra que não existe uma assinatura
válida (0xAA55), o que indica que definitivamente não existe um
código de inicialização válido.
Você pode ter uma assinatura válida sem um
código de inicialização válido, devido a alguma má sorte aleatória
ou algum dano ao código de inicialização existente, mas uma
assinatura inválida certamente indica que o código de inicialização
está ausente, então vamos instalá-lo agora utilizando o comando
"update":

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> <b>update</b>
  Machine code updated.
  fdisk:*1>
</pre></td></tr></table>

<p>
Também temos que "marcar" uma partição como "ativa", assim a ROM
de inicialização sabe a partir de qual partição inicializar:

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> <b>f 1</b>
  Partition 1 marked active.
</pre></td></tr></table>

<p>
Agora vamos ver como a tabela se parece:

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> <b>p</b>
  Disk: wd0       geometry: 4998/255/63 [80293248 Sectors]
  Offset: 0       Signature: 0xAA55
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   0: 07      0   1   1 -    652 254  63 [          63:    10490382 ] NTFS
  *1: A6    653   0   1 -   4998   5  63 [    10490445:    69802803 ] OpenBSD
   2: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   3: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
  fdisk:*1>
</pre></td></tr></table>

<p>
Uma lista de coisas para você verificar antes de sair do fdisk(8):

<ul>
<li>A assinatura é válida?
<li>As partições não estão sobrepostas?
<li>A partição do OpenBSD está com o ID "A6"?
<li>A partição apropriada (provavelmente a do OpenBSD) está marcada
    como ativa?
</ul>

<p>
<a href="#BackMorefdisk">(voltar para onde estávamos)</a>


<a name="Moredisklabel"></a>
<h3>4.6.4 - Layout disklabel personalizado</h3>

Dentro da partição fdisk(8) do OpenBSD nós usamos o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>
para criar as partições dos sistemas de arquivos do OpenBSD.
O OpenBSD marca suas partições de sistemas de arquivos usando dezesseis
letras, de "a" até "p".
A partição "a" no disco de inicialização é definida como a partição
raiz, e "b" no disco de inicialização é a partição swap padrão.
"c" em todos os discos é a partição do "disco todo"; ela é usada por
programas que tem que ter acesso cru ao disco físico, como os
programas fdisk(8) e disklabel(8).
A partição "c" é criada automaticamente para você, e não deve ser
removida ou alterada.
As letras restantes estão disponíveis para você definir
pontos de montagem nelas.
Você pode saltar letras, você pode defini-las em qualquer ordem, e
elas podem estar em qualquer ordem no disco (embora algumas plataformas
possuam um requerimento relacionado a aonde a partição "a" está).
Você também pode deixar espaços desalocados no disco, e alocá-los mais
tarde, ou possivelmente aumentar o tamanho de partições existentes no
espaço desalocado usando o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=growfs&amp;sektion=8">growfs(8)</a>.


<p>
Todas as partições que possuam partições FFS nativas devem estar dentro
da partição fdisk(8) do OpenBSD, no entanto, partições que
<a href="faq14.html#foreignfs">não são do OpenBSD</a> podem
(e normalmente devem) estar fora da partição fdisk do OpenBSD.

<p>
Mais informações sobre a utilização do disklabel podem ser encontradas
<a href="faq14.html#disklabel">aqui</a>.

<p>
Mais informações sobre por que o particionamento é uma boa ideia, e
uma estratégia para um bom plano de particionamento, podem ser
encontradas mais <a href="#Partitioning">abaixo</a>.

<p>
O instalador do OpenBSD tenta particionar automaticamente o seu disco
em uma configuração útil e de "propósitos gerais",
baseada no tamanho do seu disco.
Se o seu disco é grande o bastante, o espaço não utilizado será alocado
para a partição <tt>/home</tt>.
Mesmo que esse particionamento automático seja bastante útil, ele não
satisfaz todas as necessidades dos usuários.

<p>
No nosso exemplo, assumimos que estamos construindo um servidor Web
estático para alguns dos nossos amigos utilizá-lo.
Temos uma máquina ligada a uma conexão modesta com a Internet, com um
disco de 40G, com a maior parte dele utilizado para o OpenBSD (com a
mesma partição de 5G do Windows do exemplo acima.
Por que? Pode ser que esse sistema tenha um controlador RAID que é
suportado pelo OpenBSD, mas gerenciável apenas a partir de dentro do
Windows.
Ou, possivelmente, porque o editor da FAQ não gosta de manter um
monte de diferentes sistemas de exemplo).

<p>
As páginas Web servidas pelo servidor Web do OpenBSD estarão em
<tt>/var/www</tt>, e muita pouca coisa será guardada em <tt>/home</tt>,
então isso indica uma mudança definitiva do padrão que precisa ser
feita. Para o objetivo da discussão, vamos assumir também que não
queremos recompilar o SO a partir do código fonte nesta máquina
(vamos fazer isso em algum outro lugar).
O sistema não vai executar o X, no entanto, devido a alguns aplicativos
Web <a href="#FilesNeededX">esperarem que o X esteja instalado</a>,
vamos instalar o X.
A máquina não é muito poderosa, ela não pode ter mais que 1G de RAM,
e dificilmente nossa utilização do sistema vai necessitar de mais do
que isso.

<p>
Então, depois de pensar um pouco, nosso plano é particionar o sistema
da seguinte maneira:
<ul>
<li><tt>/ - root</tt>: 100m. Esta será a partição 'a'.
<li><tt>swap</tt>: 1G (assim teremos espaço suficiente para uma descarga
    de memória), esta será a partição 'b'
<li><tt>/usr</tt>: 2g, partição d
<li><tt>/tmp</tt>: 100m (acreditamos que esta partição não será muito
    utilizada), partição e
<li><tt>/usr/local</tt>: 2g, partição f
<li><tt>/usr/X11R6</tt>: 1g, partição g
<li><tt>/home</tt>: 1g, partição h
<li><tt>/var</tt>: 1g (espaço para um monte de arquivos de
    registro de dados do sistema), partição j
<li><tt>/var/www</tt>: restante do disco, partição k
</ul>

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  The auto-allocated layout for wd0 is:
  #                size           offset  fstype [fsize bsize  cpg]
    a:          1024.0M         10490445  4.2BSD   2048 16384    1 # /
    b:           252.1M         12587597    swap
    c:         39205.7M                0  unused
    d:          2319.3M         13103933  4.2BSD   2048 16384    1 # /tmp
    e:          3653.9M         17853877  4.2BSD   2048 16384    1 # /var
    f:          1149.8M         25337016  4.2BSD   2048 16384    1 # /usr
    g:          1024.0M         27691862  4.2BSD   2048 16384    1 # /usr/X11R6
    h:          3422.6M         29789014  4.2BSD   2048 16384    1 # /usr/local
    i:          5122.3M               63    NTFS
    j:          1848.7M         36798433  4.2BSD   2048 16384    1 # /usr/src
    k:          1848.7M         40584654  4.2BSD   2048 16384    1 # /usr/obj
    l:         17540.2M         44370875  4.2BSD   2048 16384    1 # /home
  Use (A)uto layout, (E)dit auto layout, or create (C)ustom layout? [a] <b>c</b>
</pre></td></tr></table>

<p>
Se tivéssemos apenas pequenas modificações a fazer, provavelmente
optaríamos por editar ("Edit") o layout personalizado em vez de começar
a partir de uma losa vazia, mas nós vamos fazer as coisas da forma
difícil.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  You will now create an OpenBSD disklabel inside the OpenBSD MBR
  partition. The disklabel defines how OpenBSD splits up the MBR partition
  into OpenBSD partitions in which filesystems and swap space are created.
  You must provide each filesystem's mountpoint in this program.

  The offsets used in the disklabel are ABSOLUTE, i.e. relative to the
  start of the disk, NOT the start of the OpenBSD MBR partition.

  Label editor (enter '?' for help at any prompt)
  > <b>p</b>
  OpenBSD area: 10490445-80293248; size: 69802803; free: 69802803
  #                size           offset  fstype [fsize bsize  cpg]
    c:         80293248                0  unused
    i:         10490382               63    NTFS
  >
</pre></td></tr></table>

<p>
Note que já existem duas partições -- a partição "c", que está sempre
lá e é criada para você, mas o disklabel(8) também noticiou a
existência da partição NTFS e atribuiu a ela uma partição disklabel,
assim ela pode ser acessada pelo OpenBSD (nota: no momento o suporte
a NTFS é experimental e requer um kernel personalizado, mas o suporte
a FAT/FAT32 é muito bom).

<p>
Agora vamos criar nossas partições.
Vamos começar com a partição "a", nossa partição raiz:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  > <b>a a</b>
  offset: [10490445] <b><i>Enter</i></b>
  size: [69802803] <b>100m</b>
  Rounding to cylinder: 208845
  FS type: [4.2BSD]  <b><i>Enter</i></b>
  mount point: [none] <b>/</b>
  >
</pre></td></tr></table>

<p>
Note que o disklabel deixou como padrão o primeiro setor disponível do
OpenBSD no disco, o qual é o que queremos.
Ele também deixou como padrão o tamanho ("size") de todo o espaço
disponível, o qual NÃO é o que queremos.
Aqui nós vamos cancelar aquele padrão com nosso tamanho predileto, o
qual pode ser especificado em setores, "M" ou "G".

<p>
Normalmente você quer utilizar o "FS type" padrão de "4.2BSD" para
uma partição FFS ("Fast File System") ou FFS2, embora os outros tipos,
como "swap" e "RAID", sejam úteis dependendo da ocasião.

<p>
E finalmente o ponto de montagem.
Nossa partição "a" é a partição raiz, por definição.

<p>
Agora nós criamos a swap, a qual é nossa partição 'b' (novamente,
esse é um requerimento -- 'b' no seu disco de inicialização é a
swap):

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  > <b>a b</b>
  offset: [10699290] <b><i>Enter</i></b>
  size: [69593958] <b>1g</b>
  Rounding to cylinder: 2104515
  FS type: [swap] <b><i>Enter</i></b>
  >
</pre></td></tr></table>

<p>
Novamente o disklabel calculou corretamente nosso setor de início,
e nos apresentou um tamanho sugerido de "todo o espaço restante",
que novamente nós cancelamos com nosso tamanho desejado.
Desde que essa é a partição 'b', o disklabel assume que ela foi
criada para ser utilizada para swap, e quando nós confirmamos isso
ele não nos pergunta sobre um ponto de montagem.

<p>
Agora estamos prontos para criar as partições restantes.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  > <b>a d</b>
  offset: [12803805] <b><i>Enter</i></b>
  size: [67489443] <b>2g</b>
  Rounding to cylinder: 4209030
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/usr</b>
  > <b>a e</b>
  offset: [17012835] <b><i>Enter</i></b>
  size: [63280413] <b>100m</b>
  Rounding to cylinder: 208845
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/tmp</b>
  > <b>a f</b>
  offset: [17221680] <b><i>Enter</i></b>
  size: [63071568] <b>2g</b>
  Rounding to cylinder: 4209030
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/usr/local</b>
  > <b>a g</b>
  offset: [21430710] <b><i>Enter</i></b>
  size: [58862538] <b>1g</b>
  Rounding to cylinder: 2104515
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/usr/X11R6</b>
  > <b>a h</b>
  offset: [23535225] <b><i>Enter</i></b>
  size: [56758023] <b>1g</b>
  Rounding to cylinder: 2104515
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/home</b>
  > <b>a j</b>
  offset: [25639740] <b><i>Enter</i></b>
  size: [54653508] <b>1g</b>
  Rounding to cylinder: 2104515
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/var</b>
  > <b>a k</b>
  offset: [27744255] <b><i>Enter</i></b>
  size: [52548993] <b><i>Enter</i></b>
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/var/www</b>
  >
</pre></td></tr></table>

<p>
Note que na partição <tt>/var/www</tt> ("k") nós aceitamos o padrão
de utilizar todo o espaço em disco restante disponível.
Com drives modernos monstruosamente gigantes, normalmente essa não
é uma boa ideia.
Se você sabe que nunca vai utilizar todo o espaço, não o aloque:
deixe-o a salvo para algum uso futuro.

<p>
Agora vamos dar uma olhada nos nossos resultados utilizando os
comandos "p" e "p m":

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  > <b>p</b>
  OpenBSD area: 10490445-80293248; size: 69802803; free: 0
  #                size           offset  fstype [fsize bsize  cpg]
    a:           208845         10490445  4.2BSD   2048 16384    1 # /
    b:          2104515         10699290    swap
    c:         80293248                0  unused
    d:          4209030         12803805  4.2BSD   2048 16384    1 # /usr
    e:           208845         17012835  4.2BSD   2048 16384    1 # /tmp
    f:          4209030         17221680  4.2BSD   2048 16384    1 # /usr/local
    g:          2104515         21430710  4.2BSD   2048 16384    1 # /usr/X11R6
    h:          2104515         23535225  4.2BSD   2048 16384    1 # /home
    i:         10490382               63    NTFS
    j:          2104515         25639740  4.2BSD   2048 16384    1 # /var
    k:         52548993         27744255  4.2BSD   2048 16384    1 # /var/www
  > <b>p m</b>
  OpenBSD area: 10490445-80293248; size: 34083.4M; free: 0.0M
    #                size           offset  fstype [fsize bsize  cpg]
    a:           102.0M         10490445  4.2BSD   2048 16384    1 # /
    b:          1027.6M         10699290    swap
    c:         39205.7M                0  unused
    d:          2055.2M         12803805  4.2BSD   2048 16384    1 # /usr
    e:           102.0M         17012835  4.2BSD   2048 16384    1 # /tmp
    f:          2055.2M         17221680  4.2BSD   2048 16384    1 # /usr/local
    g:          1027.6M         21430710  4.2BSD   2048 16384    1 # /usr/X11R6
    h:          1027.6M         23535225  4.2BSD   2048 16384    1 # /home
    i:          5122.3M               63    NTFS
    j:          1027.6M         25639740  4.2BSD   2048 16384    1 # /var
    k:         25658.7M         27744255  4.2BSD   2048 16384    1 # /var/www
  >
</pre></td></tr></table>

<p>
Igual ao fdisk, você não quer que as suas partições disklabel do
OpenBSD sobreponham-se (exceto a partição 'c', que, obviamente,
sobrepõe tudo).

<p>
Escreva suas mudanças e feche o disklabel:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  > <b>w</b>
  > <b>q</b>
  No label changes.
  newfs: reduced number of fragments per cylinder group from 13048 to 12992 to
  enlarge last cylinder group
  /dev/rwd0a: 102.0MB in 208844 sectors of 512 bytes
  5 cylinder groups of 25.38MB, 1624 blocks, 3328 inodes each
  /dev/rwd0h: 1027.6MB in 2104512 sectors of 512 bytes
  6 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  newfs: reduced number of fragments per cylinder group from 13048 to 12992 to
  enlarge last cylinder group
  /dev/rwd0e: 102.0MB in 208844 sectors of 512 bytes
  5 cylinder groups of 25.38MB, 1624 blocks, 3328 inodes each
  /dev/rwd0d: 2055.2MB in 4209028 sectors of 512 bytes
  11 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0g: 1027.6MB in 2104512 sectors of 512 bytes
  6 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0f: 2055.2MB in 4209028 sectors of 512 bytes
  11 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0j: 1027.6MB in 2104512 sectors of 512 bytes
  6 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0k: 25658.7MB in 52548992 sectors of 512 bytes
  127 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/wd0a on /mnt type ffs (rw, asynchronous, local)
  /dev/wd0h on /mnt/home type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0e on /mnt/tmp type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0d on /mnt/usr type ffs (rw, asynchronous, local, nodev)
  /dev/wd0g on /mnt/usr/X11R6 type ffs (rw, asynchronous, local, nodev)
  /dev/wd0f on /mnt/usr/local type ffs (rw, asynchronous, local, nodev)
  /dev/wd0j on /mnt/var type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0k on /mnt/var/www type ffs (rw, asynchronous, local, nodev, nosuid)

  Let's install the sets!
...
</pre></td></tr></table>

<p>
<a href="#BackMoredisklabel">(voltar para onde estávamos)</a>

<p>
<a name= "FilesNeeded"></a>
<h2>4.7 - Quais arquivos são necessários para a instalação?</h2>
<!-- XXXrelease -->

<p>
A instalação completa do OpenBSD é dividida em vários
<i>pacotes de arquivos</i> separados.
Nem todos os aplicativos necessitam de todos os pacotes de arquivos,
no entanto, é recomendado aos novos usuários instalar TODOS os
pacotes de arquivos.

Aqui você tem uma visão geral de cada um deles:
<p>
<ul>
  <li><b><i>bsd</i></b>		- Esse é o kernel. <b>Necessário</b>
  <li><b><i>bsd.mp</i></b>	- Kernel para os sistemas com
      múltiplos processadores (SMP) (somente para algumas plataformas).
  <li><b><i>bsd.rd</i></b> 	- <a href="#bsd.rd">Kernel de disco
      RAM</a>.
  <li><b><i>base47.tgz</i></b>	- Contém o sistema base do OpenBSD.
      <b>Necessário</b>
  <li><b><i>etc47.tgz</i></b>	- Contém todos os arquivos de /etc.
      <b>Necessário</b>
  <li><b><i>comp47.tgz</i></b>	- Contém o compilador e suas
      ferramentas, cabeçalhos e bibliotecas.
  <li><b><i>man47.tgz</i></b>    - Contém as páginas de manual.
  <li><b><i>misc47.tgz</i></b>   - Contém informações diversas,
      documentos sobre configuração.
  <li><b><i>game47.tgz</i></b>   - Contém jogos para o OpenBSD.
  <li><b><i>xbase47.tgz</i></b>  - Contém as bibliotecas e utilitários
      da base do X11.
  <li><b><i>xetc47.tgz</i></b>   - Contém os arquivos de configuração
      /etc/X11 e /etc/fonts.
  <li><b><i>xfont47.tgz</i></b>  - Contém o servidor de fontes do X11 e
      fontes.
  <li><b><i>xserv47.tgz</i></b>  - Contém os servidores X do X11.
  <li><b><i>xshare47.tgz</i></b> - Contém páginas de manual,
      definições de locale, arquivos de inclusão, etc. para o X.
</ul>

Os pacotes <b>etc47.tgz</b> e <b>xetc47.tgz</b> não são instalados
como parte de uma atualização de versão, somente como parte de uma
instalação completa, assim nenhuma personalização que você fez é
perdida. Você tem que atualizar manualmente seus diretórios
<tt>/etc</tt>, <tt>/dev</tt> e <tt>/var</tt>.

<a name="FilesNeededX"></a>
<h3>Por que tenho que instalar o X se eu não uso o modo gráfico?</h3>
Mesmo que você não tenha a intenção de executar o X, alguns
<a href="faq15.html">pacotes</a> de terceiros precisam que as
bibliotecas ou outros utilitários do X estejam instalados no
seu sistema.
Essa dependência pode ser facilmente resolvida instalando
apenas o xbase47.tgz; o resto do X nem sempre é necessário.
Muitas pessoas insistem em não instalar o X em seus sistemas,
sem ter uma razão válida:


<ul>
<li>Por si só, instalar o X não causa a execução de nenhum
    programa no sistema.
<li>Por si só, instalar o X em um sistema não influencia
    o risco de problemas externos de segurança.
<li>Se alguém já está DENTRO do seu sistema, ele pode instalar o que ele
    quiser, então a presença ou ausência do X não muda a situação.
<li>As únicas partes do X que estão em execução são as partes
    requeridas pelo seu aplicativo.
<li>O espaço exigido pelo X é relativamente pequeno para
    hardware moderno.
</ul>

As pessoas às vezes perdem um monte de tempo e esforços tentando
escolher partes do xbase47.tgz e usar somente os arquivos que elas
precisam para instalar algum aplicativo.
Isso não é somente sem sentido, como também é um esforço que tem que ser
repetido a cada ciclo de atualização de versão, o que significa que
provavelmente você não atualizará corretamente a versão do seu sistema,
criando problemas de segurança REAIS.

<p>
SE você precisa do X, simplesmente instale-o.
Isso não vai lhe causar nenhum prejuízo maior que o aplicativo
que necessita dele causaria.


<a name="FilesNeededComp"></a>
<h3>Eu não quero instalar os compiladores</h3>
Tudo bem, não instale, mas, por favor, não diga a você mesmo que isso
é por "razões de segurança".
Se um atacante está há muito tempo no seu sistema, ao ponto de que a
presença ou ausência do compilador é importante, ele mesmo pode
instalar o compilador.
Por outro lado, o pacote de arquivos compXX.tgz é relativamente grande
e tem um monte de arquivos, e assim pode levar um tempo na instalação
ou atualização de versão, e em sistemas lentos ou pequenos isso pode
ser relevante.

<p>
Se você decidir não instalar o compilador, você provavelmente vai
precisar de um outro sistema para manter e compilar software
atualizado.
Existem mais sistemas que foram comprometidos por causa de manutenção
inapropriada do que por causa de um compilador que foi instalado.

<p>
<a name="Partitioning"></a>
<h2> 4.8 - De que forma eu devo particionar meu disco?</h2>
<!-- XXXrelease -->

<p>
Obviamente, a resposta para essa pergunta varia com base no tipo de uso
pretendido para seu sistema.
O OpenBSD pode ser instalado em pequenos discos de 512M, mas instalar
em um dispositivo desse tamanho é tarefa para usuários avançados.
A menos que você tenha alguma experiência, um HD de 4G a 8G é um
ponto de partida recomendado.

<p>
Diferente de muitos outros SOs, o OpenBSD incentiva os usuários a
particionar o disco em várias partições em vez de apenas uma ou duas
partições grandes.
Existem várias razões para particionar o seu disco:

<ul>
<li><b>Segurança:</b> Você pode marcar alguns sistemas de arquivos como
    'nosuid', 'nodev', 'noexec', 'readonly', etc.
    Isso é feito para você pelo processo de instalação se você utilizar
    as partições recomendadas.
<li><b>Estabilidade:</b> Um usuário, ou um programa malcomportado, pode
    encher o sistema de arquivos com lixo se tiver permissões de escrita
    nele. Seus programas principais que, é claro, executam em uma
    partição diferente não serão interrompidos.
<li><b>Velocidade:</b> Um sistema de arquivos que é escrito muitas
    vezes pode começar a ficar muito fragmentado. (Felizmente, o sistema
    de arquivos ffs que o OpenBSD usa não tem tendência à
    fragmentação.)
<li><b>Integridade</b>: Se um sistema de arquivos se corromper por
    alguma razão, os seus outros sistemas de arquivos quase sempre
    continuarão em bom estado.
<li><b>Tamanho:</b> Muitas máquinas possuem limites de áreas no disco
    de onde a ROM pode carregar o kernel. Em alguns casos esse limite
    pode ser muito pequeno (504M para alguns 486 antigos), em outros
    casos um limite muito maior (por exemplo, 2G, 8G, ou 128G em
    sistemas i386).
    Enquanto o kernel pode terminar em qualquer lugar
    dentro da partição raiz, a partição raiz deve estar dentro dessa
    área. Para mais detalhes, veja
    <a href="faq14.html#LargeDrive">esta seção</a>.
    Um bom guia pode ser manter a sua partição / completamente abaixo de
    2G, a menos que você saiba que sua plataforma (e máquina em
    particular) pode manipular mais (ou menos) do que isso.
<li><b>Apenas para leitura:</b> Você pode montar partições que você
    nunca ou raramente utiliza para escrita como "apenas para leitura"
    ("Read-only") a maior parte do tempo.
    Isso elimina a necessidade da execução do fsck(8) após um travamento
    ou uma interrupção de energia, e pode ajudar a prevenir a alteração
    não-intencional de dados.
<li><b>fsck(8):</b> Partições muito grandes requerem mais memória RAM
    para executar o fsck(8), e em sistemas com pouca memória você pode
    acabar tendo que usar swap, o que resulta em uma execução demorada
    do fsck.
</ul>

Dado um espaço em disco suficiente, o instalador do OpenBSD cria
por padrão as seguintes partições:

<ul>
<li><b>/ - root:</b>
Além de ser onde os outros sistemas de arquivos são montados,
o sistema de arquivos raiz contém todos os arquivos necessários
para inicializar o OpenBSD.
Isso inclui o kernel, mais os utilitários básicos em <tt>/sbin</tt> e
<tt>/bin</tt>, os arquivos de configuração em <tt>/etc</tt> e o
diretório de dispositivos, <tt>/dev</tt>, que são todos utilizados
para colocar o sistema em funcionamento.
O sistema de arquivos raiz pode ter um tamanho pequeno de 60M, embora
um tamanho de 100M a 200M seja melhor para uma máquina que passará
por muitos ciclos de atualização de versão.
A partição 'a' do seu drive de inicialização torna-se a sua partição
raiz automaticamente.
ALGUMAS plataformas colocam restrições na localização física da
partição no disco (ou seja, deve estar no começo do disco) para
que a inicialização ocorra.

<li><b>Swap:</b>
Além de ser utilizada como swap, essa partição também é utilizada
para guardar descargas de memória após travamentos do sistema,
então é sugerido que o espaço de swap (se algum espaço for definido)
seja tão grande quanto a maior quantidade de memória RAM que você
costuma ter instalada na máquina.
Leia mais sobre isso na <a href="faq14.html#Swap">FAQ 14, Swap</a>.

<li><b>/tmp:</b>
Esse é um diretório que pode ser escrito por todo mundo e é usado
para armazenamento temporário (como o nome sugere!).
A maioria dos sistemas podem se manter com quantidades modestas de
armazenamento nessa partição, 50M muitas vezes é tudo que você vai
precisar, embora existam alguns aplicativos que utilizam muito, muito
mais.
Embora esse diretório possa ser escrito por todo mundo, quando ele
é uma partição separada o OpenBSD a monta como nodev e nosuid, que
minimiza as possibilidades desse diretório ser utilizado para abusar
do seu sistema.
Note que esse diretório é limpo na reinicialização, e arquivos
deixados intocados por 24 horas são removidos durante a noite.

<li><b>/var:</b>
Esse diretório e ponto de montagem é utilizado para um MONTE de
coisas e, dependendo da sua utilização, pode ser o primeiro candidato
a ser subdividido em mais partições.
Algumas das coisas que vêm para esse diretório (e os pontos de montagem
adicionais em potencial):
<ul>
  <li><tt>/var/log</tt>: Registros de dados do sistema.
  <li><tt>/var/mail</tt>: Caixas de entrada de correio eletrônico.
  <li><tt>/var/spool</tt>: Correio eletrônico de saída (e outras coisas)
  <li><tt>/var/www</tt>: O
      <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8">servidor Web</a>
      do OpenBSD mora aqui.
  <li><tt>/var/tmp</tt>: Esse é um diretório de arquivos temporários
      "persistente", já que os arquivos colocados aqui NÃO são
      removidos na reinicialização.
      Por exemplo, o vi(1) utiliza esse diretório para armazenamento
      temporário, então se o seu computador trava ou é reinicializado
      enquanto você está editando um arquivo, os arquivos desse
      diretório podem ser utilizados para recuperar sua sessão de
      edição.
      Arquivos deixados nesse diretório por 24 horas, entretanto,
      serão removidos pelos scripts de limpeza,
      <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=daily&amp;sektion=8">daily(8)</a>,
      executados durante a noite.
  <li><tt>/var/crash</tt>: Se o sistema entra em pânico, ele tenta
      salvar uma descarga de memória na partição swap antes de
      reinicializar.
      Essa descarga de memória então é salva em <tt>/var/crash</tt>
      na reinicialização, dessa forma <tt>/var</tt> precisa ter tanto
      espaço livre quanto o sistema tem de memória RAM para que
      essa tarefa funcione automaticamente.
  </ul>

<li><b>/usr:</b>
Esse é o lugar onde encontra-se a maior parte do OpenBSD.
Binários de programas, bibliotecas, documentação, páginas de manual,
etc. estão todos localizados no diretório <tt>/usr</tt>.
Os arquivos nesse ponto de montagem praticamente não são alterados --
em muitos casos você pode montar facilmente a partição
<tt>/usr</tt> como apenas para leitura, sem efetuar nenhuma outra
mudança até a sua próxima atualização de versão ou atualização do
sistema.

<li><b>/usr/X11R6:</b>
Esse é o lugar onde encontra-se o sistema X Window.
Os binários do X, arquivos de fontes, bibliotecas, etc. estão todos
aqui.
A única parte do X que não está presente aqui são os
arquivos de configuração.

<li><b>/usr/local:</b>
Em uma instalação padrão do OpenBSD, esse ponto de montagem/diretório
está completamente vazio.
Ele é utilizado para abrigar os binários instalados localmente e os
binários dos aplicativos locais.

<li><b>/usr/src:</b>
Esse diretório guarda os arquivos de código fonte do sistema básico,
mas não o X nem os portes.
Esse diretório está vazio por padrão; você tem que enchê-lo, conforme
detalhado na
<a href="faq5.html#BldGetSrc">FAQ 5</a>.

<li><b>/usr/obj:</b>
Esse diretório é populado durante o processo de compilação com
arquivos objetos e binários.
Ter esse diretório em um ponto de montagem separado permite que ele
seja formatado em vez de arquivo por arquivo ser apagado, e isso pode
ser significantemente mais rápido.

<li><b>/home:</b>
Esse é o lugar para onde os arquivos dos usuários vão.
Ter esse diretório como uma partição separada torna fácil a
reinstalação completa do seu sistema; simplesmente não formate
essa partição durante a reinstalação.
</ul>

<p>
Algumas considerações adicionais sobre particionamento:
<ul>
 <li>Para sua primeira tentativa em um sistema experimental, uma grande
     partição <tt>/</tt> e a swap pode ser mais fácil se você não sabe
     de quanto espaço necessita. Fazendo isso você estará sacrificando
     algumas características de segurança do OpenBSD que requerem
     sistemas de arquivos separados para
     <tt>/, /tmp, /var, /usr</tt> e <tt>/home</tt>.
     Entretanto, você provavelmente não colocará sua primeira instalação
     como um sistema de produção.
 <li>Um sistema exposto à Internet, ou a outras forças hostis, deve
     ter um <tt>/var</tt> separado (e até mesmo um <tt>/var/log</tt>
     separado) para o sistema de registro.
 <li>Uma partição <tt>/home</tt> pode ser muito útil. Nova versão
     do sistema operacional? Limpe e reinstale tudo, deixando a sua
     partição <tt>/home</tt> intacta. Lembre-se de salvar uma cópia
     dos seus arquivos de configuração!
 <li>Uma partição separada para qualquer coisa que acumule grandes
     quantidades de arquivos que necessitam ser removidos: pode
     ser mais rápido formatar e recriar do que apagar os arquivos. Veja
     na FAQ <a href="faq5.html#ProbObjPt">Construção a partir do
     código fonte</a> um exemplo (<tt>/usr/obj</tt>).
 <li>Se você deseja reconstruir o seu sistema a partir do código fonte,
     por qualquer razão, o código fonte encontra-se em
     <tt>/usr/src</tt>. Se você não deseja criar uma partição separada
     para <tt>/usr/src</tt>, tenha certeza que <tt>/usr</tt> tem espaço
     suficiente.
 <li>Um fato geralmente esquecido: você <b>não</b> precisa alocar
     todo o espaço em disco quando você configura o sistema! Visto
     que agora você vai achar um desafio comprar um disco rígido novo
     menor que 100GB, pode fazer sentido deixar uma parte do seu disco
     desalocado. Se você mudar o tamanho de uma partição, você pode
     alocar uma nova partição a partir do seu espaço não utilizado,
     <a href="faq10.html#DupFS">duplicar</a> a partição existente para a
     nova partição, mudar o
     <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&amp;sektion=5">/etc/fstab</a>
     para apontar para a nova partição, remontar, e você terá mais
     espaço.
 <li>Se você fizer as suas partições muito próximas do tamanho mínimo
     requerido, provavelmente você lamentará mais tarde, quando for a
     hora de fazer a atualização de versão do seu sistema.
 <li>Se você fizer partições muito grandes, tenha em mente que sempre
     que for executar a verificação do sistema de arquivos utilizando o
     <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fsck&amp;sektion=8">fsck(8)</a>,
     ele irá requerer 1MB de RAM por gigabyte do sistema de arquivos,
     além de consumir muito tempo e às vezes ser impraticável em
     sistemas antigos e muito lentos
     (veja <a href="faq14.html#LargeDrive">esta seção</a>).
 <li>Se você permitir que usuários escrevam em <tt>/var/www</tt>
     (ou seja, páginas Web pessoais), você talvez deseje colocá-lo em
     uma partição separada, assim você pode usar
     <a href="faq10.html#Quotas">quotas</a> para restringir o espaço
     utilizado pelos usuários, e se a partição ficar cheia, nenhuma
     outra parte do seu sistema será comprometida.
 <li>Você talvez queira criar uma partição <tt>/altroot</tt>, como
     descrito em
     <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=daily&amp;sektion=8">daily(8)</a>.
     Isso pode fazer uma cópia diária da sua partição <tt>/</tt>,
     dando a você uma cópia extra do seu kernel e arquivos de
     configuração do diretório <tt>/etc</tt> se alguma coisa acontecer na
     sua partição raiz.
     Obviamente, a partição <tt>/altroot</tt> precisa ser tão grande
     quanto <tt>/</tt>.
     Se você tem um segundo disco rígido e algo duplicando o resto do seu
     disco, como
     <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raid&amp;sektion=4">raid(4)</a>
     baseado em software ou uma cópia periódica usando
     <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&amp;sektion=8">dump(8)</a
     >/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore(8)</a>,
     esse disco pode ser inicializado depois da remoção do disco primário.
 <li>Compilar alguns <a href="faq15.html#Ports">portes</a> a partir do
     código fonte pode consumir uma grande quantidade de espaço das suas
     partições <tt>/usr</tt> e <tt>/tmp</tt>.
     Essa é outra razão pela qual aconselhamos que você utilize
     <a href="faq15.html#PkgMgmt">pacotes pré-compilados</a>.
 <li>Alguns poucos editores utilizam <tt>/var/tmp</tt> como espaço de
     partida, e esse diretório precisa ser tão grande ou maior que o
     enorme arquivo que você editar.
     Se você planeja editar arquivos de 500M, sua partição
     <tt>/var</tt> ou <tt>/var/tmp</tt> precisa ser maior do que você
     provavelmente tinha planejado.
</ul>


<p>
<a name= "Multibooting"></a>
<h2>4.9 - Inicialização múltipla com OpenBSD</h2>

Inicialização múltipla é ter diversos sistemas operacionais em um só
computador e meios de selecionar qual SO é para inicializar. Isso
<i>não</i> é uma tarefa trivial! Se você não compreender o que está
fazendo, você pode acabar apagando grandes quantidades de dados do seu
computador. Novos usuários do OpenBSD são <i>fortemente</i>
incentivados a começar em uma máquina dedicada, com um disco rígido sem
dados, e então praticar as suas configurações em um sistema de testes
antes de se aventurar em uma configuração de inicialização múltipla em
uma máquina de produção. A <a href="faq14.html">FAQ 14</a> possui mais
informações sobre o processo de inicialização do OpenBSD.

<p>
De preferência use uma das quatro partições MBR <i>primárias</i> para
inicializar o OpenBSD (ou seja, partições estendidas podem não funcionam).

<p>
Note que o Windows 7 e o Vista podem redimensionar as partições do sistema:
vai em Painel de Controle, procure por "partição", entre na ferramenta
do sistema correspondente.
Clique com o botão direito em uma partição, e você vai notar que você pode reduzir.
Sua principal limitação é que o "Windows Exchange File" não pode ser movido,
logo, se você precisar de mais espaço, talvez terá que mover/desativar ele.

<p>
Estas são as diversas opções de inicialização múltipla:

<h3>Marcar a partição ativa</h3>
Esta é provavelmente a mais negligenciada e, às vezes, a melhor
solução para inicialização múltipla. Simplesmente utilize o SO onde você
está atualmente para marcar a partição, que você quer inicializar por
padrão na próxima inicialização, como ativa.
Praticamente todos os SOs oferecem um programa
para fazer isso; o do OpenBSD é o
<a href="faq14.html#fdisk">fdisk(8)</a>, programas com nomes similares
existem para sistemas Windows 9x e DOS e para muitos outros sistemas
operacionais. Isso pode ser altamente desejável para SOs que levam muito
tempo para desligar ou reinicializar -- você pode marcar e dar início
ao processo de reinicialização, e então sair de perto, pegar um copo de
café, voltar e ver o sistema inicializado do jeito que você queria --
sem ter que esperar pelo Momento Mágico de selecionar o próximo SO.

<h3>Disquete de inicialização</h3>
Se você possui um sistema onde não usa frequentemente o OpenBSD
(ou não deseja que usuários deste computador notem qualquer alteração),
considere a utilização de um disquete de inicialização. Simplesmente
use um dos
<a href="#MkFlop">disquetes de instalação padrão do OpenBSD</a>
e crie o arquivo <tt>/etc/boot.conf</tt> (sim, você também tem que
criar o diretório <tt>/etc</tt> no seu disquete) com o conteúdo:

<pre>
	 boot hd0a:/bsd
</pre>

para fazer com que o sistema inicialize a partir do disco rígido 0,
partição OpenBSD 'a', arquivo de kernel <tt>/bsd</tt>. Note que você
também pode inicializar a partir de outros discos rígidos, com uma linha
como: "<tt>boot hd2a:/bsd</tt>", para inicializar a partir do terceiro
disco rígido do seu sistema. Para inicializar o OpenBSD, coloque seu
disquete dentro do drive e reinicialize a máquina. Para inicializar
outro SO, retire o disquete do drive e reinicialize.
(Você também pode, obviamente, usar esse disquete para criar um
CD inicializável.)

<p>
O programa
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">boot(8)</a>
é carregado a partir do disquete e procura e lê o arquivo
<tt>/etc/boot.conf</tt>. A linha contendo "<tt>boot hd0a:/bsd</tt>"
instrui o boot(8) a partir de onde ele deve carregar o kernel -- nesse
caso, o primeiro HD que o BIOS vê. Mantenha em mente que somente um
pequeno arquivo (<tt>/boot</tt>) é carregado a partir do disquete -- o
sistema carrega o kernel do disco rígido, adicionando somente 5 segundos
ao processo de inicialização.

<h3>Windows NT/2000/XP NTLDR</h3>

Para inicialização múltipla entre OpenBSD e Windows NT/2000/XP, você
pode usar NTLDR, o carregador de inicialização que o NT usa. Para
inicialização múltipla com NT, você precisa ter uma cópia do seu
Registro de Inicialização de Partição (PBR - "Partition Boot Record")
do OpenBSD. Depois de executar o "installboot", você pode copiar o
arquivo usando o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=1">dd(1)</a>
e seguir um procedimento similar ao seguinte:

<pre>
	# <strong>dd if=/dev/rsd0a of=openbsd.pbr bs=512 count=1</strong>
</pre>

Nota: Este é um bom momento para lembrá-lo para não digitar comandos
cegamente (sem saber o que eles fazem). O comando acima não funciona
diretamente em muitos computadores, ficando para o leitor a tarefa de
adaptá-lo a sua máquina.

<p>
Agora inicialize o NT e coloque o <tt>openbsd.pbr</tt> em C:. Adicione
uma linha como esta no fim de <tt>C:\BOOT.INI</tt>:

<pre>
	c:\openbsd.pbr="OpenBSD"
</pre>

<p>
Quando você reinicializar, você pode selecionar o OpenBSD a partir do
menu do carregador do NT.
Há muito mais informação disponível sobre NTLDR em
<a href="http://www.tburke.net/info/ntldr/ntldr_hacking_guide.htm">
"NTLDR Hacking Guide"</a>.

<p>
No Windows XP, você pode editar as informações de inicialização usando
uma interface gráfica (GUI); consulte o
<a href="http://support.microsoft.com/default.aspx?scid=kb;en-us;289022">
"XP Boot.ini HOWTO"</a>.

<p>
Programas que fazem uma grande parte desse trabalho estão disponíveis,
por exemplo, o
<a href="http://www.winimage.com/bootpart.htm">BootPart</a>.
Esse programa pode ser executado no Windows NT/2000/XP. Ele busca o
PBR do OpenBSD, coloca-o na sua partição do NT/2000/XP e adiciona-o
no <tt>C:\BOOT.INI</tt>.

<p>
Nota: O carregador de inicialização do Windows NT/2000/XP só é capaz
inicializar sistemas operacionais que se encontram no primeiro disco
rígido. Você não pode usar o carregador de inicialização do Windows para
carregar o OpenBSD a partir de um disco secundário.

<h3>Windows Vista</h3>

<p>
Com o Vista, a Microsoft descartou o suporte ao NTLDR em favor de seu
mais novo armazenamento "Boot Configuration Data" (BCD), utilizado para
controlar o ambiente de inicialização. Já que o <tt>BOOT.INI</tt> não
está mais disponível para personalização, um utilitário de linha de
comando, <tt>bcdedit</tt>, tomou seu lugar.

<p>
Uma vez que o PBR do OpenBSD está copiado na partição do sistema Vista,
os três comandos seguintes são requeridos para selecionar e inicializar
o OpenBSD quando o sistema é reiniciado:

<p>
<blockquote><pre>
C:\Windows\system32> bcdedit /create /d "OpenBSD/i386 4.7" /application bootsector
The entry {05a763ce-d81b-11db-b3ec-000000000000} was successfully created.

C:\Windows\System32>
</pre></blockquote>

<p>
O GUID retornado aqui, <tt>05a763ce-d81b-11db-b3ec-000000000000</tt>,
é mostrado por razões ilustrativas. Tome nota do GUID mostrado quando
você executa esse comando, já que esse valor precisa ser copiado nos
comandos seguintes. Copiar o GUID mostrado acima simplesmente não
vai funcionar.

<p>
Os dois comandos seguintes também são requeridos:

<p>
<blockquote><pre>
C:\Windows\system32> bcdedit /set {05a763ce-d81b-11db-b3ec-000000000000} device boot
The operation completed successfully.

C:\Windows\system32> bcdedit /set {05a763ce-d81b-11db-b3ec-000000000000} path \openbsd.pbr
The operation completed successfully.

C:\Windows\system32>
</pre></blockquote>

<p>Isso deve ser executado em um shell com privilégios administrativos.
Quanto tiver localizado cmd.exe, clique com botão direito e selecione "Executar como Administrador".

<p>
Note o nome do caminho absoluto do arquivo PBR importado. Não adicione
uma letra de drive, pois é assumido que o arquivo foi colocado na
partição do sistema.
<tt>bcdedit</tt> não queixa-se de uma especificação explícita de drive,
mas o gerenciador de inicialização vai recusar-se a seguir adiante
dizendo que ele não pôde resolver o nome de caminho designado.

<p>
Após a reinicialização, o Vista é listado por primeiro no gerenciador
de inicialização, seguido do OpenBSD. Selecionar uma das duas entradas
inicializa o sistema operacional correspondente.

Se não acontecer nada, olhe no painel de controle para obter informações de boot.
Provavelmente, o seu boot do Windows não está configurado um timeout para selecionar o sistema,
fazendo com que não apareça o menu de inicialização.
Você também pode usar esse menu para iniciar o OpenBSD por padrão.

<p>
Para mais informações, consulte a ajuda do <tt>bcdedit</tt> digitando:

<p>
<blockquote><pre>
C:\Windows\system32> bcdedit /?
</pre></blockquote>

<p>
ou pesquisando na documentação e no sítio Web da Microsoft. Uma boa
introdução pode ser encontrada neste artigo
"<a href="http://technet.microsoft.com/en-us/library/cc721886%28WS.10%29.aspx">
Frequently Asked Questions</a>", no TechNet.

<p>
Para aqueles que acham a configuração manual assustadora, o
<a href="http://neosmart.net/dl.php?id=1">EasyBCD</a> fornece uma
alternativa em GUI.

<h3>Windows 7</h3>

<p>
A Microsoft tem aperfeiçoado o BCD desde o lançamento do Vista para
permitir que múltiplas versões do Windows sejam inicializadas através do
<tt>bcdedit</tt>. Por causa desse maior controle, cinco comandos são
requeridos para configurar um ambiente de inicialização múltipla com o
OpenBSD.

<p>
Depois de copiar o PBR do OpenBSD na partição do sistema do Windows 7,
digite o seguinte comando para inicializar o registro necessário:

<p>
<blockquote><pre>
C:\Windows\system32> bcdedit /create /d "OpenBSD/i386 4.7" /application bootsector
The entry {0154a872-3d41-11de-bd67-a7060316bbb1} was successfully created.

C:\Windows\system32>
</pre></blockquote>

<p>
Como avisado antes, o GUID
<tt>{0154a872-3d41-11de-bd67-a7060316bbb1}</tt>
é dependente de sistema. Anote o valor que você recebeu ao executar o
comando e copie-o nos comandos seguintes:

<p>
<blockquote><pre>
C:\Windows\system32> bcdedit /set {0154a872-3d41-11de-bd67-a7060316bbb1} device boot
The operation completed successfully.

C:\Windows\system32> bcdedit /set {0154a872-3d41-11de-bd67-a7060316bbb1} path \openbsd.pbr
The operation completed successfully.

C:\Windows\system32> bcdedit /set {0154a872-3d41-11de-bd67-a7060316bbb1} device partition=c:
The operation completed successfully.

C:\Windows\system32> bcdedit /displayorder {0154a872-3d41-11de-bd67-7060316bbb1} /addlast
The operation completed successfully.

C:\Windows\system32>
</pre></blockquote>

<h3>Outros carregadores de inicialização</h3>

<p>
Alguns carregadores de inicialização que os usuários do OpenBSD usam com
sucesso são: <a href="http://gag.sourceforge.net/">GAG</a>,
<a href="http://www.ranish.com/part/">The Ranish Partition Manager</a>,
<a href="http://refit.sourceforge.net/">rEFIt</a>
e o <a href="http://www.gnu.org/software/grub/">GRUB</a>.

<p>
<h3>OpenBSD e Linux (i386)</h3>
<!-- XXXversion -->

<p>
Por favor, consulte
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.7/i386/INSTALL.linux">INSTALL.linux</a>,
que possui instruções sobre como fazer o OpenBSD funcionar com Linux.

<h3>Problemas com o fuso horário</h3>
O OpenBSD espera que o relógio em tempo real do computador esteja
configurado para UTC ("Universal Coordinated Time", ou Tempo Universal
Coordenado).
Outros sistemas operacionais esperam que o relógio esteja
configurado para o horário local.
Isso pode ser um grande problema se você estiver usando ambos os
sistemas no mesmo computador.
Um dos sistemas precisará ser adaptado.
Mais informações sobre como fazer isso estão na
<a href="faq8.html#TimeZone">FAQ 8 - Por que meu relógio está atrasado
várias horas?</a>

<a name= "SendDmesg"></a>
<h2>4.10 - Como enviar o seu dmesg para dmesg@@openbsd.org depois da
instalação</h2>

<p>
Apenas para lembrar, é importante para os desenvolvedores do OpenBSD
saber qual hardware funciona, e qual não funciona perfeitamente,
incluindo os sensores de hardware que são encontrados em máquinas.

<p>
Uma citação de /usr/src/etc/root/root.mail
<blockquote><pre>
If you wish to ensure that OpenBSD runs better on your machines, please do us
a favor (after you have your mail system configured!) and type something like:
 # (dmesg; sysctl hw.sensors) | \
        mail -s "Sony VAIO 505R laptop, apm works OK" dmesg@@openbsd.org

so that we can see what kinds of configurations people are running.  As shown,
including a bit of information about your machine in the subject or the body
can help us even further.  We will use this information to improve device driver
support in future releases.  (Please do this using the supplied GENERIC kernel,
not for a custom compiled kernel, unless you're unable to boot the GENERIC
kernel.  If you have a multi-processor machine, dmesg results of both GENERIC.MP
and GENERIC kernels are appreciated.)  The device driver information we get from
this helps us fix existing drivers. Thank you!
</pre></blockquote>

<p>
Certifique-se de enviar a mensagem de correio eletrônico a partir de uma
conta que esteja habilitada para receber mensagens dos desenvolvedores,
para que eles possam entrar em contato se tiverem algo que queiram
testar ou mudar, a fim de tornar funcional no OpenBSD.
Não é importante enviar a mensagem a partir da mesma máquina que está
executando o OpenBSD; se essa máquina for incapaz de receber a mensagem,
basta executar

<pre>
$ (dmesg; sysctl hw.sensors) | mail your-account@@yourmail.dom
</pre>
E então encaminhar a mensagem para
<pre>
 dmesg@@openbsd.org
</pre>
onde <tt>your-account@@yourmail.dom</tt> é a sua conta de correio
eletrônico.

<p>
<b>NOTAS</b>

<ul>
<li>Por favor, só mande o dmesg do kernel GENERIC.
    Kernels personalizados, que possuem drivers de dispositivos
    removidos, não são úteis.
<li>Se você possui um sistema multiprocessado e usa o kernel
    GENERIC.MP, é muito importante para os desenvolvedores verem a saída
    do seu dmesg, tanto do kernel GENERIC quanto do kernel GENERIC.MP,
    então por favor, mande ambos em mensagens separadas.
<li>Os dmesgs são recebidos por uma máquina que usa
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd</a>
    para rejeitar spams. Isso faz com que a sua mensagem não seja
    recebida por um período de tempo. Tenha paciência, depois de meia
    hora ou até uma hora nós a receberemos.
</ul>

<p>
O método acima é bastante simples, mas se você não configurou o seu
sistema de correio eletrônico no OpenBSD, você pode salvar a sua saída
do dmesg em um arquivo de texto e mandar para os desenvolvedores do
OpenBSD.

<pre>
$ (dmesg; sysctl hw.sensors) > ~/dmesg.txt
</pre>

Então transfira o arquivo (usando FTP/scp/disquete/pombo-correio/...)
para o sistema que você normalmente usa para correio eletrônico. Como a
saída do dmesg que você envia é processada automaticamente, tenha
certeza de verificar os seguintes itens quando usar clientes/sistemas
de correio eletrônico alternativos.
<ul>
<li>Configure o seu correio eletrônico para enviar mensagens somente em
    texto plano; não use HTML na formatação da sua mensagem.
<li>Desabilite qualquer função de quebra de linha.
    Muitos clientes de correio eletrônico são configurados para inserir
    quebra de linha quando chegam na coluna 72 (a norma para listas
    de discussão).
<li>Tenha certeza de que seu cliente de correio eletrônico não reformata
    a mensagem.
<li>Não mande a saída do seu dmesg em anexo.
    Coloque a saída do seu dmesg no corpo da mensagem.
</ul>


<a name="AddFileSet"></a>
<h2>4.11 - Como adicionar um pacote de arquivos após a instalação</h2>
<!-- XXXversion -->
"Oh não! Eu esqueci de adicionar um pacote de arquivos durante a
instalação!"
<p>
Às vezes você acha que necessita realmente só de <tt>comp47.tgz</tt>
(ou algum outro componente do sistema) após a instalação, você então
verifica que necessita de outros pacotes de arquivos. Boa notícia: há
duas maneiras fáceis de instalar pacotes de arquivos após a instalação
inicial:

<h3>Usar o processo de atualização de versão</h3>
Simplesmente inicialize com uma mídia de instalação (CD-ROM ou Disquete)
e escolha "Upgrade" (em vez de "Install"). Quando você ver a lista de
pacotes de arquivos para instalação, escolha somente os pacotes de
arquivos que você não escolheu na primeira instalação, selecione a
fonte, e então deixe eles serem instalados para você.

<h3>Usar o tar(1)</h3>
Os pacotes de arquivos de instalação são simples arquivos tar, e você
pode expandí-los manualmente a partir da raiz do sistema de arquivos:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # cd /
  # tar xzvphf comp47.tgz
</pre></td></tr></table>

<p>
Não se esqueça da opção <tt>'p'</tt> no comando acima, a fim de
restaurar corretamente as permissões dos arquivos!
<p>
Um erro comum é pensar que você pode usar o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1">pkg_add(1)</a>
para adicionar pacotes de arquivos não instalados. Isso não funciona.
pkg_add(1) é a
<a href="faq15.html#PkgMgmt">ferramenta de gerenciamento de pacotes</a>
para instalar software de terceiros. Essa ferramenta manipula arquivos
de pacotes, não arquivos tar genéricos como os pacotes de instalação.

<p>
Se você está instalando o pacote de arquivos <tt>xbase</tt> pela
primeira vez no seu sistema, usando o tar(1) e sem reinicializar, o
cache de bibliotecas compartilhadas precisa ser atualizado usando o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ldconfig&amp;sektion=8"
>ldconfig(8)</a>
após a instalação.
Para adicionar todas as bibliotecas do X no cache:

<blockquote><pre>
# <b>ldconfig -m /usr/X11R6/lib</b>
</pre></blockquote>

Alternativamente, você pode apenas reinicializar seu sistema, e isso
será feito automaticamente pelo script de inicialização
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;sektion=8"
>rc(8)</a>.

<a name="bsd.rd"></a>
<h2>4.12 - O que é 'bsd.rd'?</h2>

<b><tt>bsd.rd</tt></b> é um "Disco de RAM" do kernel. Esse arquivo é
muito útil; muitos desenvolvedores têm cuidados para mantê-lo sempre
na raiz dos seus sistemas.

<p>
Chamá-lo de "disco de RAM do kernel" descreve o sistema de arquivos raiz
do kernel -- ao contrário de um disco físico, os utilitários disponíveis
depois da inicialização do <tt>bsd.rd</tt> são armazenados no kernel e
são executados a partir de um sistema de arquivos baseado em RAM.
<tt>bsd.rd</tt> também inclui um conjunto de utilitários para que você
faça a manutenção e a instalação do seu sistema.

<p>
Em algumas plataformas, <tt>bsd.rd</tt> é realmente a técnica
preferida para instalação -- você coloca esse kernel em um sistema
de arquivos existente, inicializa-o e executa a instalação a partir
dele. Na maioria das plataformas, se você está executando uma versão
antiga do OpenBSD, você pode pegar por FTP uma versão nova de
<tt>bsd.rd</tt>, reinicializar a máquina com ele e instalar uma nova
versão do OpenBSD sem usar uma mídia removível para isso.

<p>
Aqui está um exemplo de inicialização com <tt>bsd.rd</tt> em um sistema
i386:

<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Using Drive: 0 Partition: 3
  reading boot.....
  probing: pc0 com0 com1 apm mem[639k 255M a20=on]
  disk: fd0 hd0+
  &gt;&gt; OpenBSD/i386 BOOT 3.02
  boot&gt; <b>boot hd0a:/bsd.rd</b>
<i>. . . inicialização normal para a instalação . . .</i>
</pre></td></tr></table>

Como indicado, você será levado ao programa de instalação, mas você
também pode executar um shell para fazer a manutenção do seu sistema.
<p>
A regra geral para inicializar com <tt>bsd.rd</tt> é mudar o seu kernel
de <tt>/bsd</tt> para <tt>bsd.rd</tt> através dos meios usados em sua
plataforma.

<a name="InstProb"></a>
<h2>4.13 - Problemas comuns de instalação</h2>

<a name="cpq16m"></a>
<h3>4.13.1 - Meu Compaq só reconhece 16M RAM</h3>
<i>Alguns</i> sistemas Compaq possuem um problema onde toda a RAM do
sistema não é detectada corretamente pelo
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">
carregador de inicialização de segundo estágio do OpenBSD</a>, e somente
16M são detectados e utilizados pelo OpenBSD. Isso pode ser corrigido
pela criação/edição do arquivo
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot.conf&amp;sektion=8&amp;arch=i386"><tt>/etc/boot.conf</tt></a>,
ou especificando comandos depois de "<tt>boot></tt>", antes que
o OpenBSD seja carregado. Se você possui uma máquina com 64M de RAM,
mas o OpenBSD só reconhece os primeiros 16M, o comando que você usaria
seria:

<pre>
	 machine mem +0x3000000@@0x1000000
</pre>
Para adicionar 48M (<tt>0x3000000</tt>) após os primeiros 16M
(<tt>0x1000000</tt>). Tipicamente, se você tivesse uma máquina com esse
problema, você primeiramente especificaria o comando acima no prompt
<tt>boot></tt> no momento da instalação por disquete/CD-ROM, carregaria
o sistema, reinicializaria e criaria o arquivo <tt>/etc/boot.conf</tt>
com a linha de comando acima, para que nas próximas inicializações toda
a memória RAM disponível fosse reconhecida.

<p>
Sabe-se também que uma atualização da ROM soluciona esse problema em
<i>alguns</i> sistemas.

<a name="noboot"></a>
<h3>4.13.2 - Meu i386 não inicializa após a instalação</h3>
Sua instalação parece ter ocorrido perfeitamente, mas na primeira
inicialização você não vê nem sinal do OpenBSD. Há algumas razões
comuns para esse problema:

<ul>
<li><b>Nenhuma partição foi marcada como ativa no fdisk(8).</b>
    Para solucionar esse problema, reinicialize a sua máquina, usando um
    disquete de inicialização ou outra mídia, e "marque" a partição como
    "ativa" (inicializável).
    Veja <a href="faq14.html#fdisk">aqui</a> e
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">aqui</a>.

<li><b>Nenhum carregador de inicialização válido foi colocado no
    disco.</b>
    Se você digitou "Enter" ou respondeu "w" para a questão
    "Use (W)hole disk or (E)dit the MBR?" durante a instalação, ou usou
    a opção "<tt>reinit</tt>" do fdisk(8), o registro de inicialização
    do OpenBSD foi instalado no Registro de Inicialização Mestre
    do disco; caso contrário, o código de inicialização mestre está
    intocado. Isso é um problema se nenhum outro registro de
    inicialização existir. Uma solução é inicializar outra vez com a
    mídia de instalação, entrar em um prompt do shell e executar o
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>
    para atualizar o código MBR a partir da linha de comando:
<pre>
    # fdisk -u wd0
</pre>
    Nota: a opção "update" do modo interativo ("-e") do fdisk não
    escreve os bytes de assinatura requeridos para tornar o disco
    inicializável.

<li><b> Em algumas raras ocasiões, algo pode dar errado na instalação
    do carregador de inicialização de segundo estágio.</b>
    A reinstalação do carregador de inicialização de segundo estágio
    é discutida <a href="faq14.html#InstBoot">aqui</a>.
</ul>

<a name="sshhang"></a>
<h3>4.13.3 - Minha (velha e lenta) máquina inicializa, mas para no
procedimento de ssh-keygen</h3>
É provável que a sua máquina esteja funcionando muito bem, mas está
levando algum tempo para realizar o processo de geração de chaves do
ssh. Uma SPARCStation2 ou um Macintosh Quadra pode levar
<i>várias horas</i> para terminar os três passos do
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-keygen&amp;sektion=1">ssh-keygen(1)</a>.
Deixe-o terminar; isso só é feito uma vez por instalação.

<p>
Note que o tamanho padrão da chave cresceu no OpenBSD 3.8, então os
tempos de geração estão mais demorados do que costumavam ser.
Usuários de máquinas lentas talvez queiram gerar suas chaves em outro
computador, e então colocá-las em um arquivo
<a href="#site">site47.tgz</a> e instalá-las com o resto do sistema.


<a name="noftplist"></a>
<h3>4.13.4 - Eu recebi a mensagem "Failed to change directory" enquanto
fazia a instalação</h3>

Ao fazer uma instalação FTP de uma
<a href="faq5.html#Flavors">snapshot</a> durante o estágio <i>-beta</i>
de desenvolvimento do OpenBSD, você pode ver isto:

<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>

  Display the list of known ftp servers? [no] <b>yes</b>
  Getting the list from 192.128.5.191 (ftp.openbsd.org)... FAILED
  Failed to change directory.
  Server IP address or hostname?
</pre></td></tr></table>

Isso é normal e esperado durante o ciclo de pré-liberação. O programa
de instalação procura pela lista de FTP no servidor FTP primário
em um diretório que ainda não está disponível antes da
<a href="faq1.html#Next">data de liberação</a>, então você recebe
a mensagem acima.

<p>
Simplesmente use uma
<a href="../../ftp.html">lista de espelhos FTP</a>
para encontrar o seu espelho favorito, e especifique manualmente o nome
quando for preciso.

<p>
<b>Nota: Você não deve ver isso se estiver instalando uma versão
<i>-release</i> ou a partir de um CD-ROM.</b>

<a name="blankfdisk"></a>
<h3>4.13.5 - Minha tabela de partições do fdisk está corrompida ou
vazia!</h3>
Ocasionalmente, o usuário consegue um sistema que funciona, mas
quando executa <tt>fdisk wd0</tt> ele vê uma tabela de partições
completamente vazia (ou, algumas vezes, bagunçada). Isso geralmente é
causado por ter sido criada uma partição no
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>
com um offset de zero setores, ao invés de <a href="#trackoffset">um
offset com uma trilha</a> (nota: é assumida aqui uma plataforma
<a href="../../i386.html">i386</a> ou
<a href="../../amd64.html">amd64</a>.
Outras plataformas requerem tamanhos diferentes de offset, e algumas
NÃO precisam de offset).
O sistema então <a href="faq14.html#Boot386">inicializa</a> usando o
PBR, e não o MBR.

<p>
Ao passo que essa configuração pode funcionar, ela pode também ser um
problema durante manutenções, devendo ser consertada.
Para consertar isso, o sistema de arquivos do disco deve geralmente
ser recriado do zero (no entanto, se você REALMENTE sabe o que está
fazendo, você pode apenas recriar o rótulo de disco (disklabel) e o MBR,
e apenas perder e ter que reconstruir a primeira partição OpenBSD no
disco).

<a name="noflopcd"></a>
<h3>4.13.6 - Eu não tenho um drive de disquete ou CD-ROM na minha
máquina</h3>
Algumas pessoas talvez queiram executar o OpenBSD em computadores que
não possuem nenhum jeito óbvio de instalar o OpenBSD, sem unidade de disquete ou CD-ROM.
Ou a máquina foi projetada sem ele (Por exemplo, muitos laptops e máquinas baseadas em "flash",
como sistemas Soekris e ALIX), ou os dispositivos de inicialização falharam ou foram
removidos, e seria difícil de substituir.
Estas são algumas dicas e técnicas que você pode usar para instalar o
OpenBSD nesses sistemas.
<ul>
<li>Inicialização pela rede, usando <a href="faq6.html#PXE">PXE</a>
    (i386 ou amd64) ou
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=diskless&amp;sektion=8">diskless(8)</a>
    (outras plataformas).

<li>Drive USB de disquete ou CD-ROM externo, se a sua máquina pode
    inicializar a partir de um.

<li>Disco rígido ou disco Flash USB, se a sua máquina pode, novamente,
    inicializar a partir de um dispositivo USB.
    Prepare o dispositivo em outro computador, como descrito em
    <a href="faq14.html#flashmemLive">FAQ 14</a>.
    Inicialize a partir dele, mas escolha o kernel bsd.rd, e então
    instale como de hábito.
    Você também pode colocar, previamente, os pacotes de arquivos na
    mídia flash.

<li>Em último caso, se nenhuma das coisas acima é adequada, você pode
    retirar o disco do sistema de destino, usar adaptadores disponíveis
    para instalar em um computador "normal", instalar o OpenBSD, e então
    colocar o disco de volta no sistema de destino.
    O OpenBSD então inicializa na máquina de destino, embora você
    tenha que, possivelmente, ajustar a configuração de rede.

    Talze você tenha que ajustar <tt>/etc/fstab</tt>, se você (por exemplo)
    fez a instalação usando um adaptador USB->IDE/SATA ou caminho diferente
    ou se a máquina usa
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahci&sektion=4">ahci(4)</a>
    e as outras não.

    IDE e alguns discos SATA será normalmente reconhecido como dispositivos
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wd&sektion=4">wd(4)</a>,
    mas, se ligado a um adaptador USB, vai aparecer como
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sd&sektion=4">sd(4)</a>.
    Um disco SATA ligado a uma interface
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pciide&sektion=4">pciide(4)</a>
    surgirá como wd(4), mas ligado a uma interface
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahci&sektion=4">ahci(4)</a>,
    vai aparecer como um dispositivo sd(4).
    No entanto, se você corrigir o <tt>/etc/fstab</tt>, o sistema irá iniciar sem problemas.

</ul>

Em todos os casos, lembre-se que a máquina tinha um SO instalado nela
antes, e normalmente foi pensado para que o SO pudesse ser instalado
novamente.
Como isso foi originalmente pensado para ser feito irá, frequentemente,
fornecer a você uma boa ideia sobre como você pode instalar o OpenBSD.


<a name="site"></a>
<h2>4.14 - Personalização do processo de instalação</h2>
<!-- XXXversion -->

<h3>arquivo <tt>siteXX.tgz</tt></h3>
Os scripts de instalação/atualização de versão do OpenBSD permitem a
seleção de um pacote de arquivos criado pelo usuário, chamado
"<tt>siteXX.tgz</tt>", onde XX é a versão (por exemplo, 47). O arquivo
<tt>siteXX.tgz</tt> é, como os outros
<a href="#FilesNeeded">pacotes de arquivos</a>,
comprimido com
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gzip&amp;sektion=1">gzip(1)</a>
e
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tar&amp;sektion=1">tar(1)</a>,
com a raiz em '/', e descomprimido como qualquer outro
pacote de arquivos com as opções <tt>xzphf</tt>. Esse pacote de
arquivos é instalado por último, depois de todos os outros pacotes de
arquivos.

<p>
Esse pacote de arquivos habilita o usuário a adicionar e/ou sobrescrever
arquivos instalados nos pacotes 'normais' e, assim, personalizar a
instalação ou a atualização de versão.

<p>
Você também pode criar e utilizar pacotes de instalação específicos para
cada máquina, nomeados como <tt>siteXX-<i>&lt;hostname&gt;.tgz</i></tt>;
"<tt>site47-puffy.tgz</tt>", por exemplo.
Isso possibilita instalações personalizadas, atualizações de versão, ou
recuperação do sistema.

<p>
Alguns exemplos de uso de um arquivo <tt>siteXX.tgz</tt>:
<ul>
<li>Crie um arquivo siteXX.tgz que contenha todas as mudanças que
    você fez desde a primeira instalação do OpenBSD. Então, se você
    tiver que recriar o sistema, simplesmente selecione o arquivo
    siteXX.tgz durante a reinstalação e todas as suas mudanças serão
    replicadas no novo sistema.

<li>Crie uma série de diretórios específicos para cada máquina, cada
    um com um arquivo siteXX.tgz que contenha arquivos específicos para
    cada uma delas. A instalação (por exemplo, máquinas com diferentes
    placas de vídeo) de uma categoria pode ser feita selecionando o
    arquivo siteXX.tgz apropriado.

<li>Coloque os arquivos que você personaliza rotineiramente em um mesmo
    siteXX.tgz -- arquivos
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&amp;sektion=8"><tt>/etc/skel</tt></a>,
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5"><tt>/etc/pf.conf</tt></a>,
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8"><tt>/var/www/conf/httpd.conf</tt></a>,
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf.local&amp;sektion=8"><tt>/etc/rc.conf.local</tt></a>,
    etc.
</ul>

<h3><tt>Scripts install.site</tt>/<tt>upgrade.site</tt></h3>
Como último passo no processo de instalação/atualização de versão, o
script procura no diretório raiz do sistema recém-instalado/atualizado
por <tt>install.site</tt> ou <tt>upgrade.site</tt>, conforme apropriado
para o processo atual, e executa esse script em um ambiente
"<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&amp;sektion=8">chroot</a>ado"
para a raiz do sistema instalado/atualizado. Lembre-se: a atualização
de versão é feita a partir de um sistema de arquivos inicializado, então
o seu sistema de arquivos alvo está realmente montado no diretório
<tt>/mnt</tt>. No entanto, por causa do chroot, o script pode ser
escrito como se estivesse executando na raiz "normal" do seu sistema de
arquivos. Pelo fato de que esse script é executado após todos os
arquivos estarem instalados, você tem uma grande parte da funcionalidade
do sistema completo quando o script é executado.
Mantenha em mente que você está executando um kernel mínimo, nem todos
os recursos estão disponíveis e, devido à problemas de espaço, as
coisas que funcionam hoje podem não funcionar em uma versão futura.

<p>
Note que o script <tt>install.site</tt> deve estar em um arquivo
<tt>siteXX.tgz</tt>, enquanto que o script <tt>upgrade.site</tt>
pode ser colocado no diretório raiz antes da atualização de versão, ou
pode ser colocado em um arquivo <tt>siteXX.tgz</tt>.

<p>
Os scripts podem ser utilizados para fazer muitas coisas:
<ul>
<li>Remover arquivos que estão instalados/atualizados, mas que
    você não os quer presentes no sistema.
<li>Remover/atualizar/instalar <a href="faq15.html#PkgMgmt">pacotes</a>
    que você deseja no sistema instalado (pode não funcionar com todos
    os pacotes!).
<li>Fazer um <a href="faq14.html#Backup">backup/arquivamento imediato</a>
    do novo sistema antes de você expô-lo ao resto do mundo.
<li>Usar o <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rdate&amp;sektion=8">rdate(8)</a>
    para configurar a hora do sistema.
</ul>

<p>
A combinação dos arquivos <tt>siteXX.tgz</tt> e
<tt>install.site/upgrade.site</tt> tem o objetivo de dar aos usuários
amplas capacidades de personalização sem precisar construir seus
próprios pacotes de instalação.

<p>
Nota: se você for fazer a sua instalação a partir de um servidor http,
você precisa adicionar <tt>site*.tgz</tt> ao arquivo <tt>index.txt</tt>
no diretório fonte, para que ele fique disponível na hora da instalação.
Isso não é necessário para ftp ou outras formas de instalação.


<a name="Multiple"></a>
<h2>4.15 - Como eu instalo em vários sistemas similares?</h2>
Aqui estão algumas ferramentas que você pode usar quando tem que
instalar vários sistemas similares do OpenBSD.

<h3>Arquivos <tt>siteXX.tgz</tt> e <tt>install/upgrade.site</tt></h3>
Veja o artigo <a href="#site">acima</a>.

<h3>Restauração a partir do dump(8)</h3>
Na maioria das plataformas a mídia de inicialização inclui o programa
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore(8)</a>,
que pode ser usado para recuperar backups feitos com o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&amp;sektion=8">dump(8)</a>.
Assim você pode inicializar a partir de um
<a href="#MkFlop">disquete</a>,
<a href="../../orders.html">CD</a> ou
<a href="#bsd.rd">bsd.rd</a>, executar o
<a href="faq14.html#fdisk">fdisk</a>,
o <a href="faq14.html#disklabel">disklabel</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restaurar</a>
as configurações desejadas a partir de uma fita ou outra mídia, e
instalar os
<a href="faq14.html#InstBoot">blocos de inicialização</a>.
Mais detalhes <a href="faq14.html#Backup">aqui</a>.

<h3>Imagem de disco</h3>
Infelizmente não há nenhum pacote conhecido de software que crie
imagem de discos com suporte ao FFS, e que crie imagens contendo apenas
o espaço ativo do arquivo. A maioria das soluções existentes tratam a
partição OpenBSD como "genérica", e podem fazer uma imagem do disco
inteiro. Isso geralmente é o objetivo, porém há um grande desperdício
de espaço -- uma partição <tt>/home</tt> de 10G requer 10G de espaço na
imagem, mesmo que não haja um único arquivo na partição.
Enquanto que você pode instalar tipicamente uma imagem do drive em um
grande drive, você não pode utilizar diretamente o espaço extra, e você
não pode instalar uma imagem em um drive menor.

<p>
Se essa é uma situação aceitável, você pode utilizar o comando
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=1">dd</a>,
o qual permite copiar o conteúdo inteiro de um disco para outro, setor
a setor. Isso proporcionaria a mesma funcionalidade de programas
comerciais, porém a custo zero.

<a name="getdmesg"></a>
<h2>4.16 - Como eu obtenho o dmesg(8) para relatar um problema de
instalação?</h2>
Ao <a href="../../report.html">relatar um problema</a> é necessário
incluir o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg(8)</a>.
Entretanto, quando você necessita de fazer isso é porque o sistema não
está funcionando normalmente ou não instalou, então você não possui
o disco, a rede, ou outros recursos necessários para que você possa
pegar o dmesg e enviá-lo à
<a href="../../mail.html">lista de discussão</a> apropriada.
Há outras maneiras, no entanto:

<ul>
<li><b>Disquete:</b> Os discos de inicialização e o CD-ROM possuem
ferramentas que possibilitam gravar o seu dmesg em um disquete MSDOS
para depois ser lido em outra máquina. Coloque um disquete formatado em
MSDOS no drive e execute os comandos abaixo:

<pre>
     mount -t msdos /dev/fd0a /mnt
     dmesg >/mnt/dmesg.txt
     umount /mnt
</pre>
Se você tiver um outro sistema OpenBSD, você pode fazer isso em um
disquete compatível com o sistema de arquivos do OpenBSD --
frequentemente o disquete de inicialização tem bastante espaço para
conter o dmesg. Nesse caso, tire a opção "<tt>-t msdos</tt>" acima.

<p>
<li><b>Console Serial:</b>
Usar um console serial e capturar a saída em outro computador
é o melhor caminho para capturar informações de diagnóstico -
particularmente se o computador trava logo após a inicialização.
Em um segundo computador, você necessita de um cabo serial apropriado
(como um cabo "null-modem") e um programa emulador de terminal para
capturar a saída da tela em um arquivo.

<p>
Informações gerais sobre a configuração de console serial são discutidas
em <a href="faq7.html#SerCon">outra parte nesta FAQ</a>; para capturar o
registro da instalação, os seguintes comandos usualmente são
suficientes.

<p><b>i386</b>

<p>
No prompt do carregador de inicialização, digite

<p>
<blockquote>
<pre>
boot> <b>set tty com0</b>
</pre>
</blockquote>

<p>
Isso diz ao OpenBSD para usar a primeira porta serial (também chamada
de COM1 ou COMA na documentação do PC) como um console serial.
A taxa padrão de comunicação é 9600 ("baud rate").

<p><b>Sparc/Sparc64</b>

<p>
Essas máquinas usam automaticamente um console serial se iniciadas
sem um teclado. Se você possui um teclado e um monitor conectados, você
pode forçar o sistema a usar um console serial com o seguinte comando no
prompt <tt>ok</tt>.

<p>
<blockquote>
<pre>
ok <b>setenv input-device ttya</b>
ok <b>setenv output-device ttya</b>
ok <b>reset</b>
</pre>
</blockquote>

</ul>
<p>

<font color= "#0000e0">
<a href="index.html">[Índice da FAQ]</a>
<a href="faq3.html">[Seção 3 - Primeiros passos com o OpenBSD]</a>
<a href="faq5.html">[Seção 5 - Construção do Sistema a partir do Código Fonte]</a>
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif"
border= "0" alt= "[voltar]"></a>
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: faq4.html,v 1.301 ]<br>
$Translation: faq4.html,v 1.29 2010/07/16 02:05:44 renato Exp $<br>
-->
$OpenBSD: faq4.html,v 1.21 2010/07/17 17:38:10 ajacoutot Exp $
</small>
</body>
</html>
@


1.21
log
@Sync with Steelix CVS
@
text
@d3439 1
a3439 1
$OpenBSD$
@


1.20
log
@Sync with Steelix CVS
@
text
@a2754 6
<p>
No momento em que isto é escrito, o Windows 7 ainda não foi lançado
oficialmente. Seria prudente aos usuários consultar a documentação e o
sítio Web da Microsoft para obter informações atuais. Os detalhes podem
ter sido mudados.

d3436 2
a3437 2
Originally [OpenBSD: faq4.html,v 1.300 ]<br>
$Translation: faq4.html,v 1.28 2010/06/10 16:39:46 renato Exp $<br>
@


1.19
log
@Sync with Steelix CVS
@
text
@d4 1
a4 1
<title>4 - Guia de instalação do OpenBSD 4.6</title>
d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 1998-2009 by OpenBSD.">
d30 1
a30 1
<h1><font color="#e00000">4 - Guia de Instalação do OpenBSD 4.6</font></h1>
a114 4
No OpenBSD 4.6 esse processo foi melhorado para ser ainda mais
simples e rápido para a vasta maioria dos usuários, mas sem perder
a flexibilidade e o instalador de "um disquete", motivos pelos quais o
OpenBSD é conhecido.
d123 1
a123 1
<tt>mac68k/INSTALL.mac68k</tt> ou <tt>sparc/INSTALL.sparc</tt>).
d150 1
a150 1
Os nomes dos arquivos são tipicamente <tt>floppy46.fs</tt>, embora
d155 1
a155 1
(<tt>cd46.iso</tt> apenas para inicializar, ou <tt>install46.iso</tt>
d222 1
a222 1
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.6/zaurus/INSTALL.zaurus">INSTALL.zaurus</a>.
d330 1
a330 1
<li><b><tt>cd46.iso</tt></b> é uma imagem ISO9660 que pode ser usada
d336 1
a336 1
<li><b><tt>cdemu46.iso</tt></b> é uma imagem ISO9660 que usa emulação
d339 3
a341 3
    <tt>cd46.iso</tt>; use a <tt>cdemu46.iso</tt> somente se a
    <tt>cd46.iso</tt> não funcionar.
<li><b><tt>install46.iso</tt></b> é uma imagem ISO9660 que contém todos
d345 1
a345 1
<li><b><tt>floppy46.fs</tt></b> (PC Desktop) suporta várias placas de
d349 1
a349 1
<li><b><tt>floppyB46.fs</tt></b> (Servidores) suporta diversos
d353 1
a353 1
<li><b><tt>floppyC46.fs</tt></b> (Laptops) suporta diversos
d362 2
a363 2
<li><b><tt>floppy46.fs:</tt></b> Suporte para sistemas com disquete.
<li><b><tt>cd46.iso</tt></b> Uma imagem ISO usada para criar seu próprio
d365 1
a365 1
<li><b><tt>miniroot46.fs</tt></b> Pode ser escrito em uma partição swap
d367 1
a367 1
<li><b><tt>install46.iso</tt></b> é uma imagem ISO9660 que contém todos
d386 1
a386 1
<tt>cd46.iso</tt> ou o <tt>install46.iso</tt>.
d395 1
a395 1
  # <b>cdio tao cd46.iso</b>
d442 1
a442 1
  # <b>dd if=floppy46.fs of=/dev/rfd0c bs=32k</b>
d454 1
a454 1
  # <b>cmp /dev/rfd0c floppy46.fs</b>
d468 1
a468 1
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.6/tools/">tools</a>
d474 1
a474 1
  C:\> <strong>ntrw floppy46.fs a:</strong>
d605 1
d608 2
a609 1
  Welcome to the OpenBSD/i386 4.6 installation program.
d627 1
a627 1
    <li>Você não tem a opção de instalar o arquivo <tt>etc46.tgz</tt>.
d629 2
a630 2
        <a href="../upgrade46.html#etcUpdates">mesclar manualmente</a>
        as mudanças de <tt>etc46.tgz</tt> em seu sistema antes de você
d639 1
a639 1
        Para o OpenBSD 4.6, atualizar do 4.5 para o 4.6 é a única
d648 2
a649 2
    <a href="../upgrade46.html">Guia de Atualização de Versão do
    OpenBSD 4.6</a>.
d793 2
a794 2
Geralmente você vai querer o sshd(8) funcionando, mas ocasionalmente
talvez não queira. Se o seu uso do sistema não necessitar do sshd(8),
d815 1
a815 1
se você está executando um sistema em inicialização dupla, com
a822 1
  Do you want the X Window System to be started by xdm(1)? [no] <b>y</b>
d844 12
d859 1
d962 1
a962 1
  Disk: wd0       geometry: 4998/255/63 [80293248 Sectors]
d1020 11
a1030 10
    b:           127.2M          2097215    swap
    c:         39205.7M                0  unused
    d:          2729.1M          2357679  4.2BSD   2048 16384    1 # /tmp
    e:          4223.2M          7946823  4.2BSD   2048 16384    1 # /var
    f:          1252.3M         16595895  4.2BSD   2048 16384    1 # /usr
    g:          1024.0M         19160541  4.2BSD   2048 16384    1 # /usr/X11R6
    h:          3678.7M         21257693  4.2BSD   2048 16384    1 # /usr/local
    i:          2002.4M         28791612  4.2BSD   2048 16384    1 # /usr/src
    j:          2002.4M         32892533  4.2BSD   2048 16384    1 # /usr/obj
    k:         21142.3M         36993454  4.2BSD   2048 16384    1 # /home
d1062 6
a1067 6
  /dev/rwd0k: 21142.3MB in 43299416 sectors of 512 bytes
  105 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0d: 2729.1MB in 5589144 sectors of 512 bytes
  14 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0f: 1252.3MB in 2564644 sectors of 512 bytes
  7 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
d1070 3
a1072 3
  /dev/rwd0h: 3678.7MB in 7533916 sectors of 512 bytes
  19 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0j: 2002.4MB in 4100920 sectors of 512 bytes
d1074 1
a1074 1
  /dev/rwd0i: 2002.4MB in 4100920 sectors of 512 bytes
d1076 1
a1076 1
  /dev/rwd0e: 4223.2MB in 8649072 sectors of 512 bytes
d1101 1
a1101 1
  Location of sets? (cd disk ftp http or 'done') [ftp] <b><i>Enter</i></b>
d1114 1
a1114 1
  Server directory? [pub/OpenBSD/4.6/i386] <b><i>Enter</i></b>
d1124 1
a1124 1
<a href="#Filesets">pacotes de arquivos</a>.
d1131 4
a1134 4
      [X] bsd           [X] etc46.tgz     [X] game46.tgz    [X] xfont46.tgz
      [X] bsd.rd        [X] misc46.tgz    [X] xbase46.tgz   [X] xserv46.tgz
      [ ] bsd.mp        [X] comp46.tgz    [X] xetc46.tgz
      [X] base46.tgz    [X] man46.tgz     [X] xshare46.tgz
d1140 1
a1140 1
pacotes de arquivos base46.tgz e etc46.tgz.
d1147 1
a1147 1
<li><tt><b>-comp46.tgz</b></tt> remove o <tt>comp46.tgz</tt>
d1167 13
a1179 13
  bsd          100% |*************************************|  7063 KB    00:04
  bsd.rd       100% |*************************************|  5913 KB    00:03
  base46.tgz   100% |*************************************| 47315 KB    01:46
  etc46.tgz    100% |*************************************|   503 KB    00:01
  misc46.tgz   100% |*************************************|  2867 KB    00:06
  comp46.tgz   100% |*************************************| 88555 KB    03:08
  man46.tgz    100% |*************************************|  8047 KB    00:21
  game46.tgz   100% |*************************************|  2558 KB    00:04
  xbase46.tgz  100% |*************************************| 10160 KB    00:21
  xetc46.tgz   100% |*************************************| 69166       00:00
  xshare46.tgz 100% |*************************************|  2861 KB    00:12
  xfont46.tgz  100% |*************************************| 34745 KB    00:57
  xserv46.tgz  100% |*************************************| 19789 KB    00:39
d1195 1
d1208 1
d1416 1
d1485 1
d1494 2
d1517 1
d1604 1
d1626 1
d1636 1
d1651 1
d1667 1
d1679 2
a1680 1
Chi!
d1822 3
a1824 3
O novo instalador do OpenBSD (da versão 4.6) tenta particionar
automaticamente o seu disco em uma configuração útil e de
"propósitos gerais", baseada no tamanho do seu disco.
d1941 1
d2144 1
a2144 1
  <li><b><i>base46.tgz</i></b>	- Contém o sistema base do OpenBSD.
d2146 1
a2146 1
  <li><b><i>etc46.tgz</i></b>	- Contém todos os arquivos de /etc.
d2148 1
a2148 1
  <li><b><i>comp46.tgz</i></b>	- Contém o compilador e suas
d2150 2
a2151 2
  <li><b><i>man46.tgz</i></b>    - Contém as páginas de manual.
  <li><b><i>misc46.tgz</i></b>   - Contém informações diversas,
d2153 2
a2154 2
  <li><b><i>game46.tgz</i></b>   - Contém jogos para o OpenBSD.
  <li><b><i>xbase46.tgz</i></b>  - Contém as bibliotecas e utilitários
d2156 1
a2156 1
  <li><b><i>xetc46.tgz</i></b>   - Contém os arquivos de configuração
d2158 1
a2158 1
  <li><b><i>xfont46.tgz</i></b>  - Contém o servidor de fontes do X11 e
d2160 2
a2161 2
  <li><b><i>xserv46.tgz</i></b>  - Contém os servidores X do X11.
  <li><b><i>xshare46.tgz</i></b> - Contém páginas de manual,
d2165 1
a2165 1
Os pacotes <b>etc46.tgz</b> e <b>xetc46.tgz</b> não são instalados
d2178 1
a2178 1
apenas o xbase46.tgz; o resto do X nem sempre é necessário.
d2197 1
a2197 1
escolher partes do xbase46.tgz e usar somente os arquivos que elas
d2294 1
a2294 1
o sistema de arquivos raiz guarda todos os arquivos necessários
d2510 10
a2519 3
Somente uma das quatro partições MBR <i>primárias</i> pode ser usada
para inicializar o OpenBSD (ou seja, partições estendidas não
funcionam).
d2644 1
a2644 1
C:\Windows\system32> bcdedit /create /d "OpenBSD/i386 4.6" /application bootsector
d2671 3
d2687 5
a2713 4
O que se segue foi verificado no Windows 7 "Release Candidate",
"Build" 7100.

<p>
d2726 1
a2726 1
C:\Windows\system32> bcdedit /create /d "OpenBSD/i386 4.6" /application bootsector
d2766 2
a2767 1
<a href="http://www.ranish.com/part/">The Ranish Partition Manager</a>
d2776 1
a2776 1
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.6/i386/INSTALL.linux">INSTALL.linux</a>,
d2798 2
a2799 1
saber qual hardware funciona, e qual não funciona perfeitamente.
d2806 3
a2808 1
 # dmesg | mail -s "Sony VAIO 505R laptop, apm works OK" dmesg@@openbsd.org
d2829 1
a2829 1
$ dmesg | mail your-account@@yourmail.dom
d2863 1
a2863 1
$ dmesg > ~/dmesg.txt
d2891 1
a2891 1
Às vezes você acha que necessita realmente só de <tt>comp46.tgz</tt>
d2911 1
a2911 1
  # tar xzvphf comp46.tgz
d3075 1
a3075 1
<a href="#site">site46.tgz</a> e instalá-las com o resto do sistema.
d3140 4
a3143 1
não possuem nenhum jeito óbvio de instalar o OpenBSD.
d3158 1
a3158 1
    <a href="faq14.html#flashmemBoot">FAQ 14</a>.
d3170 18
d3204 1
a3204 1
"<tt>siteXX.tgz</tt>", onde XX é a versão (por exemplo, 46). O arquivo
d3224 1
a3224 1
"<tt>site46-puffy.tgz</tt>", por exemplo.
d3442 2
a3443 2
Originally [OpenBSD: faq4.html,v 1.290 ]<br>
$Translation: faq4.html,v 1.27 2009/11/30 09:29:57 alan Exp $<br>
@


1.18
log
@Sync with Steelix CVS
@
text
@d700 1
a700 1
<a href="#Network">abaixo</a>), será salvo no arquivo
d985 1
a985 1
    <a href="#Multiboot">inicialização múltipla</a>
d997 1
d1318 1
a1318 1
  xl0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> mtu 1500
d1332 1
a1332 1
  xl0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> mtu 1500
d1590 1
d1617 11
a1627 11
fdisk:*1> p
Disk: wd0       geometry: 4998/255/63 [80293248 Sectors]
Offset: 0       Signature: 0x0
            Starting         Ending         LBA Info:
 #: id      C   H   S -      C   H   S [       start:        size ]
-------------------------------------------------------------------------------
 0: 07      0   1   1 -    652 254  63 [          63:    10490382 ] NTFS
 1: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
 2: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
 3: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
fdisk:*1>
d1646 8
a1653 8
fdisk:*1> e 1
            Starting         Ending         LBA Info:
 #: id      C   H   S -      C   H   S [       start:        size ]
-------------------------------------------------------------------------------
 1: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
Partition id ('0' to disable)  [0 - FF]: [0] (? for help) <b>a6</b>
Do you wish to edit in CHS mode? [n] <b><i>Enter</i></b>
offset: [0]
d1662 3
a1664 3
offset: [0] <b>10490445</b>
size: [0] <b>*</b>
fdisk:*1>
d2097 1
a2097 1
<a href="#BackMorefdisk">(voltar para onde estávamos)</a>
d2316 3
a2318 2
  <li><tt>/var/www</tt>: O <a href="XXX">servidor Web</a> do OpenBSD
      mora aqui.
d2997 8
a3004 8
    Se você respondeu "Y" para a questão "Use entire disk for OpenBSD?"
    durante a instalação, ou usou a opção "<tt>reinit</tt>" no fdisk(8),
    o registro de inicialização do OpenBSD foi instalado no
    Registro de Inicialização Mestre do disco; caso contrário, o código
    de inicialização mestre está intocado. Isso é um problema se nenhum
    outro registro de inicialização existir. Uma solução é inicializar
    outra vez com a mídia de instalação, entrar em um prompt do shell e
    executar
d3381 2
a3382 2
Originally [OpenBSD: faq4.html,v 1.289 ]<br>
$Translation: faq4.html,v 1.26 2009/11/02 09:21:59 alan Exp $<br>
@


1.17
log
@Sync with Steelix CVS
@
text
@d876 1
a876 1
  What timezone are you in? ('?' for list) [Canada/Mountain] <b>EST5EDT</b>
d1355 1
d1358 2
a1359 2
Múltiplos arquivos de definição de fuso horário algumas vezes
possuem o mesmo horário atual, mas podem ter uma história diferente.
d1364 3
d3378 2
a3379 2
Originally [OpenBSD: faq4.html,v 1.288 ]<br>
$Translation: faq4.html,v 1.25 2009/10/21 19:25:53 alan Exp $<br>
@


1.16
log
@Sync with Steelix CVS
@
text
@d4 1
a4 1
<title>4 - Guia de instalação do OpenBSD 4.5</title>
d30 1
a30 1
<h1><font color="#e00000">4 - Guia de Instalação do OpenBSD 4.5</font></h1>
d43 3
a45 1
    <li><a href="#UnixFlop"		>4.3.1 - Criação de disquetes no
d47 1
a47 1
    <li><a href="#DosFlop"		>4.3.2 - Criação de disquetes no
a48 2
    <li><a href="#MkCD-ROM"		>4.3.3 - Criação do CD de
	inicialização</a>
d52 1
a52 1
<li><a href="#Install"		>4.5 - Como fazer a instalação</a>
d54 7
a60 10
  <li><a href="#Start"			>4.5.1 - Início da instalação</a>
  <li><a href="#Disks"			>4.5.2 - Configuração dos discos</a>
  <li><a href="#Hostname"		>4.5.3 - Configuração do nome de
      máquina do sistema</a>
  <li><a href="#Network"		>4.5.4 - Configuração da rede</a>
  <li><a href="#InstMedia"		>4.5.5 - Escolha da mídia de
      instalação</a>
  <li><a href="#Filesets"		>4.5.6 - Escolha dos pacotes
      de arquivos</a>
  <li><a href="#Finish"		 	>4.5.7 - Finalização</a>
d63 9
a71 1
<li><a href="#FilesNeeded"	>4.6 - Quais arquivos são necessários
d73 3
a75 3
<li><a href="#Partitioning"	>4.7 - Quanto de espaço eu preciso para
    uma instalação do OpenBSD?</a>
<li><a href="#Multibooting"	>4.8 - Inicialização múltipla com
d77 1
a77 1
<li><a href="#SendDmesg"	>4.9 - Como enviar o seu dmesg para
d79 2
a80 1
<li><a href="#AddFileSet"	>4.10 - Como adicionar um pacote de
d82 2
a83 2
<li><a href="#bsd.rd"		>4.11 - O que é 'bsd.rd'?</a>
<li><a href="#InstProb"		>4.12 - Problemas comuns de instalação</a>
d85 1
a85 1
  <li><a href="#cpq16m"			>4.12.1 - Meu Compaq só
d87 1
a87 1
  <li><a href="#noboot"			>4.12.2 - Meu i386 não
d89 1
a89 1
  <li><a href="#sshhang"		>4.12.3 - Minha máquina
d91 1
a91 1
  <li><a href="#noftplist"		>4.12.4 - Eu recebi a mensagem
d93 1
a93 1
  <li><a href="#blankfdisk"		>4.12.5 - Minha tabela de
d95 1
a95 1
  <li><a href="#noflopcd"               >4.12.6 - Eu não tenho um drive
d99 1
a99 1
<li><a href="#site"		>4.13 - Personalização do processo de
d101 1
a101 1
<li><a href="#Multiple"		>4.14 - Como eu instalo em vários
d103 1
a103 1
<li><a href="#getdmesg"		>4.15 - Como eu obtenho o dmesg(8) para
d113 11
a123 5
O OpenBSD possui um robusto e adaptável procedimento de instalação
baseado em modo texto, e pode ser instalado a partir de um único
disquete.
A maioria das plataformas possuem um procedimento de instalação similar;
no entanto, elas se diferenciam em alguns detalhes.
d130 4
a133 3
O processo de instalação do OpenBSD usa um kernel especial com um
conjunto de utilitários e scripts de instalação embutidos em um
disco de RAM pré-carregado. Após esse kernel ser inicializado, o
d136 1
a136 1
(<tt>.tgz</tt>).
d141 10
d154 1
a154 1
Os nomes dos arquivos são tipicamente <tt>floppy45.fs</tt>, embora
d158 4
a161 3
Em diversas plataformas, uma imagem de CD-ROM (<tt>cd45.iso</tt> apenas
para inicializar, ou <tt>install45.iso</tt> para a instalação completa)
é disponibilizada para a criação de um CD-ROM inicializável.
d170 2
a171 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=diskless&amp;sektion=8">método de inicialização pela rede</a>).
a206 4
<li><a href="../../mac68k.html"><b>mac68k:</b></a> Inicializar
utilizando ferramentas que funcionam no Mac OS. Veja detalhes em
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.5/mac68k/INSTALL.mac68k">INSTALL.mac68k</a>.

d226 1
a226 1
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.5/zaurus/INSTALL.zaurus">INSTALL.zaurus</a>.
d236 1
a236 1
Lembre-se, nem todas as plataformas suportam todas as opções.
d242 1
a242 1
também pode usar o arquivo <tt>install45.iso</tt> ou pode também fazer
d255 1
a255 1
Em muitos casos, você pode instalar os pacotes de arquivos a partir de
d257 4
a260 4
Por exemplo, em <a href="../../i386.html">i386</a>, você pode instalar a
partir de uma partição FAT ou de um CD-ROM formatado em ISO9660, Rock
Ridge ou Joliet.
Em alguns casos, você terá que montar manualmente o sistema de arquivos
d288 1
a288 1
      hardware, e confirmá-las quando o OpenBSD requerir.
d296 1
a296 1
  <li>Senão, você precisará ter acesso a outra máquina para construir
d309 1
a309 1
<li>Configurações de rede, se você não usa DHCP:
d313 1
a313 1
  <li>Endereço IP e máscara de rede para cada placa de rede
d334 1
a334 11
<li><b><tt>floppy45.fs</tt></b> (PC Desktop) suporta várias placas de
    rede PCI e ISA, suporte a IDE e adaptadores SCSI simples, e algumas
    placas PCMCIA. A maioria dos usuários usam essa imagem para
    inicializar a partir de um disquete.
<li><b><tt>floppyB45.fs</tt></b> (Servidores) suporta diversos
    controladores RAID e alguns adaptadores SCSI menos comuns. No
    entanto, o suporte para diversos adaptadores SCSI e muitas placas
    de rede EISA e ISA foi removido.
<li><b><tt>floppyC45.fs</tt></b> (Laptops) suporta diversos
    dispositivos CardBus e PCMCIA encontrados em muitos laptops.
<li><b><tt>cd45.iso</tt></b> é uma imagem ISO9660 que pode ser usada
d340 1
a340 1
<li><b><tt>cdemu45.iso</tt></b> é uma imagem ISO9660 que usa emulação
d343 3
a345 3
    <tt>cd45.iso</tt>, use somente a <tt>cdemu45.iso</tt> se a
    <tt>cd45.iso</tt> não funcionar.
<li><b><tt>install45.iso</tt></b> é uma imagem ISO9660 que contém todos
d349 10
a360 5
Sim, existem situações em que pode ser necessário um disco de instalação
para dar suporte a um adaptador SCSI, e outro disco para dar suporte a
sua placa de rede. Felizmente, esse é um evento raro, e na maioria das
vezes pode ser contornado.

d366 2
a367 2
<li><b><tt>floppy45.fs:</tt></b> Suporte para sistemas com disquete.
<li><b><tt>cd45.iso</tt></b> Uma imagem ISO usada para criar seu próprio
d369 1
a369 1
<li><b><tt>miniroot45.fs</tt></b> Pode ser escrito em uma partição swap
d371 1
a371 1
<li><b><tt>install45.iso</tt></b> é uma imagem ISO9660 que contém todos
d377 37
d416 5
a420 1
<h3>4.3.1 - Criação de disquetes no Unix</h3>
d436 2
a437 2
disco está OK. No entanto, se você não vê TODOS os "V"s, então o disco
está provavelmente com problemas; tente outra vez com um disco novo.
d440 1
a440 9
Note que certos sistemas compatíveis com o Unix possuem diferentes
comandos para formatar disquetes.
Consulte a documentação do seu sistema para verificar o procedimento
exato.

<p>
Agora que você já possui um disquete limpo e formatado, é hora de
escrever a imagem de instalação nele.
Para isso, você pode usar o utilitário
d446 1
a446 1
  # <b>dd if=floppy45.fs of=/dev/rfd0c bs=32k</b>
d458 1
a458 1
  # <b>cmp /dev/rfd0c floppy45.fs</b>
d462 1
a462 8
<h3>4.3.2 - Criação de disquetes no Windows</h3>

<p>
Esta seção descreve como escrever as imagens de instalação em disquetes
no Windows.
Você pode pegar as ferramentas mencionadas abaixo no diretório
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.5/tools/">tools</a>,
em qualquer espelho FTP.
d470 4
a473 2
Para escrever a imagem de instalação no disquete preparado, você pode
usar o <tt>ntrw.exe</tt>.
d478 1
a478 1
  C:\> <strong>ntrw floppy45.fs a:</strong>
a483 19
<a name="MkCD-ROM"></a>
<h3>4.3.3 - Criação de um CD-ROM</h3>

<p>
Você pode criar um CD-ROM usando o arquivo <tt>cd45.iso</tt> ou
<tt>install45.iso</tt>.
Os detalhes exatos ficam por conta do leitor, que deve decidir quais
ferramentas usar para a criação do CD.

<p>
Algumas ferramentas do OpenBSD são:
<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mkhybrid&amp;sektion=8">mkhybrid(8)</a>
<li><a href="http://cdrecord.berlios.de/old/private/cdrecord.html">cdrecord</a>,
    parte do pacote cdrtools encontrado no <a href="faq15.html">Sistema
    de Pacotes e Portes do OpenBSD</a>.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cdio&amp;sektion=1">cdio(1)</a>,
    com a opção de gravação "track at once" (tao).
</ul>
d490 1
a490 1
Inicializar uma imagem de instalação em plataformas i386 e amd64 não é
d492 7
a498 7
Se você está usando um disquete, simplesmente insira-o no drive e
inicialize seu sistema.
A imagem será então carregada, desde que a sua BIOS esteja configurada
para inicializar pelo disquete.
Se deseja inicializar pelo CD, você deve ir na BIOS do sistema e
configurar as opções de inicialização para permitir a inicialização pelo
CD. Algumas BIOS antigas não possuem essa opção, nesse caso você deve
d506 1
a506 1
a partir de uma partição existente do OpenBSD, ou pela rede, usando o
d512 1
a512 1
Na plataforma <a href="../../sparc64.html">sparc64</a>, somente as
d517 9
a525 3
Para inicializar por disquete, coloque o disquete com a imagem de
instalação do OpenBSD dentro do drive. Então use os comandos abaixo para
inicializar:
d533 1
a533 2
Para inicializar por CD-ROM, coloque o CD-ROM do OpenBSD dentro do
drive. Normalmente, você pode inicializar a partir do drive de CD-ROM de
d542 10
a551 9
<p>
Naturalmente, isso funciona somente no novo modo de comando.
Se você está no prompt de modo de comando antigo (seta para direita),
digite 'n' para ir para o novo modo de comando.
(Se você está usando um sparc antigo, pré-sun4c, você provavelmente
não terá o novo modo de comando. Nesse caso, você precisa testar.)
Se você possui múltiplas unidades de CD-ROM, você precisa inicializar a
partir da unidade correta; tente <tt>probe-scsi</tt>
(ou <tt>probe-ide</tt> em sistemas mais novos) do novo modo de comando.
d554 5
a558 10
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ok <b>probe-scsi</b>

  Target 0
    Unit 0   Disk     QUANTUM LIGHTNING 365S
  Target 1
    Unit 0   Removable Disk     QUANTUM EMPIRE_1080S
  Target 3
    Unit 0   Removable Disk     Joe's CD-ROM
</pre></td></tr></table>
d561 4
a564 2
Determine a partir de qual unidade de CD-ROM você quer inicializar.
Preste atenção no número ("target") da unidade.
d567 4
a570 3
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ok <b>boot /sbus/esp/sd@@X,0</b>
</pre></td></tr></table>
d573 1
a573 3
<a name="Install"></a>
<h2>4.5 - Como fazer a instalação</h2>
<a name="Start"></a>
d579 6
a584 3
Os problemas mais comuns durante a inicialização são disquetes com
problemas ou um drive desalinhado. O disquete de inicialização é
fortemente compactado -- qualquer setor ruim pode causar problemas.
d587 1
a587 1
Em qualquer ponto durante a instalação do OpenBSD, você pode terminar
d591 3
d596 1
a596 1
Quando a sua inicialização é bem sucedida, você verá várias mensagens de
d600 3
a602 3
o kernel mostrando para você quais dispositivos foram encontrados,
e suas localizações. Não se preocupe em lembrar desse texto, uma cópia
dele é salva em <tt>/var/run/dmesg.boot</tt>.
d605 1
a605 1
Então, você verá o seguinte:
d611 1
d616 2
a617 2
E com isso, nós temos nossa primeira pergunta. Na maioria das vezes,
você tem as três opções mostradas:
d623 1
a623 1
<li><b>Upgrade:</b> Instala um novo conjunto de <a href="#FilesNeeded">
d629 1
a629 1
    <li>Você não tem a opção de instalar o arquivo <tt>etc45.tgz</tt>.
d631 2
a632 2
        <a href="../upgrade45.html#etcUpdates">mesclar manualmente</a>
        as mudanças de <tt>etc45.tgz</tt> em seu sistema antes de você
d635 1
d641 1
a641 1
        Para o OpenBSD 4.5, atualizar do 4.4 para o 4.5 é a única
d644 1
a644 1
        para as versões intermediárias ou, se seu sistema está muito
d650 2
a651 2
    <a href="../upgrade45.html">Guia de Atualização de versão do
    OpenBSD 4.5</a>.
d661 25
a685 3
Ocasionalmente, você não verá a opção "Upgrade" listada.
Depois do <i>"dia da marcação"</i>, não é possível atualizar a versão
diretamente; você deve reinstalar o sistema do zero.
d688 4
a691 2
Neste exemplo, nós faremos uma instalação, mas o processo de atualização
de versão é similar.
d695 2
a696 1
  Welcome to the OpenBSD/i386 4.5 install program.
d698 43
a740 5
  This program will help you install OpenBSD. At any prompt except password
  prompts you can escape to a shell by typing '!'. Default answers are shown
  in []'s and are selected by pressing RETURN.  At any time you can exit this
  program by pressing Control-C, but exiting during an install can leave your
  system in an inconsistent state.
d742 84
a825 2
  Terminal type: [vt220] <b><i>Enter</i></b>
  kbd(8) mapping? ('L' for list) [none] <b><i>Enter</i></b>
d828 7
d837 7
a843 3
Na maioria dos casos, o terminal padrão é o mais apropriado; no entanto,
se você está usando um <a href="faq7.html#SerCon">console serial</a>
para instalar, não escolha o padrão, responda adequadamente.
d846 10
a855 1
Se você não escolher o layout do seu teclado, US é assumido por padrão.
d859 10
a868 2
  IS YOUR DATA BACKED UP? As with anything that modifies disk contents, this
  program can cause SIGNIFICANT data loss.
d870 3
a872 2
  It is often helpful to have the installation notes handy. For complex disk
  configurations, relevant disk hardware manuals and a calculator are useful.
d874 3
a876 1
  Proceed with install? [no] <b>y</b>
d880 6
a885 2
Se você escolher a opção padrão aqui, o processo de instalação é
interrompido e você é levado a um prompt de comando.
d888 8
a895 4
As notas de instalação referenciadas aqui podem ser encontradas
no CD de instalação e nos servidores FTP, no arquivo
<tt>INSTALL.<i>&lt;plat&gt;</i></tt>, onde <i>&lt;plat&gt;</i> é a sua
<a href="../../pt/plat.html">plataforma</a>; por exemplo, <tt>i386</tt>.
d897 2
a898 2
<a name="Disks"></a>
<h3>4.5.2 - Configuração dos discos</h3>
d906 4
d917 1
a917 1
Primeiro, a fatia do disco rígido referente ao OpenBSD é definida
d926 3
a928 3
citadas acima, a primeira, que pode ser considerada a partição
do sistema operacional, permite que múltiplos SOs em um computador
definam seus espaços em disco, e a segunda, onde a partição
d931 2
a932 2
Windows e qualquer outro SO que use esse tipo de particionamento,
a segunda camada da partição somente é visível pelo OpenBSD e SOs
d936 8
a943 2
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Cool!  Let's get to it.
d945 2
a946 3
  You will now initialize the disk(s) that OpenBSD will use. To enable all
  available security features you should configure the disk(s) to allow the
  creation of separate filesystems for /, /tmp, /var, /usr, and /home.
d948 2
d951 12
a962 1
  Which one is the root disk? (or done) [wd0] <b><i>Enter</i></b>
d964 33
d999 3
a1001 7
O disco raiz (root) é de onde o sistema é inicializado e onde
normalmente a swap reside. Discos IDE são mostrados como <tt>wd0</tt>,
<tt>wd1</tt>, etc., discos SCSI e dispositivos RAID são mostrados como
<tt>sd0</tt>, <tt>sd1</tt> e assim por diante. Todos os discos que o
OpenBSD localizou são mostrados aqui -- se você possui um disco que não
foi exibido aqui, você possui um hardware não-suportado ou mal
configurado.
d1005 15
a1019 1
  Do you want to use *all* of wd0 for OpenBSD? [no] <b><i>Enter</i></b>
d1023 22
a1044 32
Se você responder "yes" a essa pergunta, todo o disco será alocado
para o OpenBSD. O resultado será um "Master Boot Record" (Registro de
Inicialização Mestre) válido e uma tabela de partições escrita no disco
-- uma partição, do tamanho do disco rígido inteiro, configurada com o
tipo de partição OpenBSD e marcada como partição inicializável.
Essa é a escolha mais comum para usuários que usam o OpenBSD como
sistema de produção; no entanto, existem alguns sistemas em que isso não
pode ser feito.
Muitos sistemas Compaq, muitos laptops, alguns Dell e outros sistemas,
usam uma partição de "maintenance" ou "Suspend to Disk", que deve ser
mantida intacta. Se o seu sistema possui uma partição, de qualquer
tipo, que não pode ser apagada, não escolha "yes" na pergunta acima.
Porém, se seu sistema possui um disco novo que nunca foi usado, você
provavelmente irá responder "yes" (ou usar a opção "update" do fdisk),
assim você terá um registro mestre e assinatura de inicialização
válidos.

<p>
Para o objetivo deste exemplo, nós assumimos que o disco será dividido
entre o OpenBSD e uma partição pré-existente do Windows 2000, assim
deixaremos a opção padrão "no", o que nos fará usar o programa
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>.
Você pode obter mais informações sobre o fdisk(8)
<a href="faq14.html#fdisk">aqui</a>.

<p>
<b>Nota:</b>
Se você disser "Y" para a pergunta "Do you want to use *all* of wd0 for
OpenBSD?" (Você deseja usar todo o wd0 para o OpenBSD?), ou se você está
usando uma plataforma que não usa o fdisk (sparc64, por exemplo), você
não vai passar por esta etapa, e irá pular diretamente para a
<a href="#disklabel">criação do "disklabel"</a>.
d1048 57
a1104 3
  You will now create a single MBR partition to contain your OpenBSD data. This
  partition must have an id of 'A6'; must *NOT* overlap other partitions; and
  must be marked as the only active partition.
d1106 3
a1108 1
  The 'manual' command describes all the fdisk commands in detail.
d1110 3
a1112 76
  Disk: wd0       geometry: 2434/255/63 [39102336 Sectors]
  Offset: 0       Signature: 0xAA55
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
  *0: 0B      0   1   1 -    195 254  63 [          63:     3148677 ] Win95 FAT-32
   1: 00      0   0   0 -      0   0   0 [           0:           0 ] unused      
   2: 00      0   0   0 -      0   0   0 [           0:           0 ] unused      
   3: 00      0   0   0 -      0   0   0 [           0:           0 ] unused      
  Enter 'help' for information
  fdisk: 1&gt; <b>help</b>
          help            Command help list
          manual          Show entire OpenBSD man page for fdisk
          reinit          Re-initialize loaded MBR (to defaults)
          setpid          Set the identifier of a given table entry
          disk            Edit current drive stats
          edit            Edit given table entry
          flag            Flag given table entry as bootable
          update          Update machine code in loaded MBR
          select          Select extended partition table entry MBR
          swap            Swap two partition entries
          print           Print loaded MBR partition table
          write           Write loaded MBR to disk
          exit            Exit edit of current MBR, without saving changes
          quit            Quit edit of current MBR, saving current changes
          abort           Abort program without saving current changes
  fdisk: 1&gt; 
</pre></td></tr></table>

<p>
Alguns comandos que merecem explicação:
<ul>
<li><b><tt>r</tt></b> ou <b><tt>reinit</tt>:</b> Limpa a tabela de
    partições existente, cria uma grande partição OpenBSD cobrindo o
    disco inteiro, marca a partição como ativa e instala o código MBR
    do OpenBSD. Equivalente a dizer "yes" na pergunta
    "<tt>use *all* of ...</tt>".
    Você certamente quer fazer isso em um disco novo.
<li><b><tt>p</tt></b> ou <b><tt>print:</tt></b> Mostra a tabela de
    partições atual em setores. "<tt>p m</tt>" mostra a tabela de
    partições em megabytes, "<tt>p g</tt>" mostra a tabela de partições
    em gigabytes.
<li><b><tt>e</tt></b> ou <b><tt>edit:</tt></b> edita ou altera uma
    entrada da tabela.
<li><b><tt>f</tt></b> ou <b><tt>flag:</tt></b> Marca a partição
    como ativa, de onde o OpenBSD será inicializado.
<li><b><tt>u</tt></b> ou <b><tt>update:</tt></b> Atualiza o MBR com
    o código de inicialização do OpenBSD, similar ao "<tt>reinit</tt>",
    exceto que esse comando não altera a tabela de partições existente.
<li><b><tt>exit</tt></b> e <b><tt>quit:</tt></b> Cuidado com esse
    comando, pois certos usuários ainda não se habituaram ao uso do
    "exit" e "quit", que possuem significados diferentes.
</ul>

Vale a pena ressaltar aqui o seguinte, um erro neste ponto resulta em
perdas significantes de dados. Se você for fazer isso em um disco
rígido com dados importantes, pode valer a pena praticar em um drive
sem dados significativos, além de também possuir um backup.

<p>
Nosso disco possui uma partição de 1.5G para o Windows 2000 (usando
sistema de arquivos FAT). Olhando as informações acima, podemos ver
que a partição do Windows ocupa até o cilindro 195 do disco rígido.
Então, vamos alocar o resto do disco para o OpenBSD, iniciando no
cilindro 196. Você também pode calcular o início do setor do OpenBSD,
que é 3148740, adicionando o início do setor da partição existente (63)
com o seu tamanho (3148677).

<p>
Você pode editar o layout do disco utilizando a notação
"Cylinder/Heads/Sectors" ou a notação em setores brutos.
Qual é a mais fácil depende do que você quer fazer; no nosso caso,
trabalhar em torno de uma partição existente, usar o formato
CHS (Cylinder/Heads/Sectors) é provavelmente a forma mais fácil.
Se você está criando uma partição nova, usar somente setores brutos
pode ser mais fácil.
d1116 9
a1124 55
  fdisk: 1> <b>e 1</b>
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   1: 00      0   0   0 -      0   0   0 [           0:           0 ] unused      
  Partition id ('0' to disable)  [0 - FF]: [0] (? for help) <b>a6</b>
  Do you wish to edit in CHS mode? [n] <b>y</b>
  BIOS Starting cylinder [0 - 2433]: [0] <b>196</b>
  BIOS Starting head [0 - 254]: [0] <b><i>Enter</i></b>
  BIOS Starting sector [1 - 63]: [0] <b>1</b>
  BIOS Ending cylinder [0 - 2433]: [0] <b>2433</b>
  BIOS Ending head [0 - 254]: [0] <b>254</b>
  BIOS Ending sector [1 - 63]: [0] <b>63</b>
  fdisk:*1&gt; <b>p</b>
  Disk: wd0       geometry: 2434/255/63 [39102336 Sectors]
  Offset: 0       Signature: 0xAA55
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
  *0: 0B      0   1   1 -    195 254  63 [          63:     3148677 ] Win95 FAT-32
   1: A6    196   0   1 -   2433 254  63 [     3148740:    35953470 ] OpenBSD     
   2: 00      0   0   0 -      0   0   0 [           0:           0 ] unused      
   3: 00      0   0   0 -      0   0   0 [           0:           0 ] unused      
  fdisk:*1&gt; <b>p m</b>
  Disk: wd0       geometry: 2434/255/63 [19093 Megabytes]
  Offset: 0       Signature: 0xAA55
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
  *0: 0B      0   1   1 -    195 254  63 [          63:        1537M] Win95 FAT-32
   1: A6    196   0   1 -   2433 254  63 [     3148740:       17555M] OpenBSD     
   2: 00      0   0   0 -      0   0   0 [           0:           0M] unused      
   3: 00      0   0   0 -      0   0   0 [           0:           0M] unused      
  fdisk:*1&gt; 
</pre></td></tr></table>

<a name="trackoffset"></a>
<p>
Em plataformas que usam fdisk, é importante que a primeira partição
salte a primeira trilha do disco, <i>nesse caso</i>, iniciando no setor
<tt>63</tt>.
Isso pode variar de arquitetura para arquitetura e sistema de disco
para sistema de disco.
Se uma partição OpenBSD é criada iniciando no setor <tt>0</tt>, a
tabela de partições terminará em cima da <a href="faq14.html#Boot386">
"Partição Boot Record"</a> da partição OpenBSD, sobrescrevendo-a.
O sistema ainda poderá ser inicializado, mas a manutenção ficará muito
difícil, e tal configuração não é <i>recomendada ou suportada</i>.

<p>
Note que o prompt indica mudanças ainda não salvas, marcando com um
asterisco ('<tt>*</tt>'). Como podemos ver com a saída
de <tt>p&nbsp;m</tt>, nós não alteramos a partição do Windows,
conseguimos alocar o resto do disco para o OpenBSD com sucesso, e as
partições não se sobreporam. Estamos terminando. Quase.
d1127 25
a1151 2
O que nós ainda não fizemos foi marcar a partição como ativa, para que
a máquina possa ser inicializada na próxima reinicialização:
d1155 14
a1168 13
  fdisk:*1> <b>f 1</b>
  Partition 1 marked active.
  fdisk:*1&gt; <b>p</b>
  Disk: wd0       geometry: 2434/255/63 [39102336 Sectors]
  Offset: 0       Signature: 0xAA55
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   0: 0B      0   1   1 -    195 254  63 [          63:     3148677 ] Win95 FAT-32
  *1: A6    196   0   1 -   2433 254  63 [     3148740:    35953470 ] OpenBSD     
   2: 00      0   0   0 -      0   0   0 [           0:           0 ] unused      
   3: 00      0   0   0 -      0   0   0 [           0:           0 ] unused      
  fdisk:*1&gt;
d1172 6
a1177 1
E agora, nós estamos prontos para salvar as mudanças:
d1180 3
d1184 10
a1193 4
  fdisk:*1> <b>w</b>
  Writing MBR at offset 0.
  wd0: no disk label
  fdisk: 1&gt; <b>q</b>
d1196 5
d1202 26
d1229 4
a1232 7
<a name="disklabel"></a>
<h3>Criação do "disklabel"</h3>
O próximo passo é usar o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>
para dividir a partição OpenBSD.
Mais detalhes de uso do disklabel(8) podem ser encontrados na
<a href="faq14.html#disklabel">FAQ 14, disklabel</a>.
d1235 11
a1245 12
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Here is the partition information you chose:
  
  Disk: wd0       geometry: 2586/240/63 [39100320 Sectors]
  Offset: 0       Signature: 0xAA55
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
   0: 0B    0   1  1 -  202 239 63 [          63:     3069297 ] Win95 FAT-32
  *1: A6  203   0  1 - 2585 239 63 [     3069360:    36030960 ] OpenBSD
   2: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
d1247 5
a1251 3
  You will now create an OpenBSD disklabel inside the OpenBSD MBR
  partition. The disklabel defines how OpenBSD splits up the MBR partition
  into OpenBSD partitions in which filesystems and swap space are created.
a1252 2
  The offsets used in the disklabel are ABSOLUTE, i.e. relative to the
  start of the disk, NOT the start of the OpenBSD MBR partition.
d1254 5
a1258 2
  # Inside MBR partition 1: type A6 start 3148740 size 35953470
  Treating sectors 3148740-39102210 as the OpenBSD portion of the disk.
d1260 2
a1261 1
  You can use the 'b' command to change this.
d1263 3
a1265 112
  Initial label editor (enter '?' for help at any prompt)
  > <b>?</b>
  Available commands:
    ? [command] - show help                  n [part] - set mount point
    a [part]    - add partition              p [unit] - print partitions
    b           - set OpenBSD boundaries     q        - quit & save changes
    c [part]    - change partition size      r        - display free space
    D           - reset label to default     s [path] - save label to file
    d [part]    - delete partition           u        - undo last change
    e           - edit drive parameters      w        - write label to disk
    g [d | u]   - [d]isk or [u]ser geometry  X        - toggle expert mode
    l [unit]    - print disk label header    x        - exit & lose changes
    M           - disklabel(8) man page      z        - delete all partitions
    m [part]    - modify partition

  Suffixes can be used to indicate units other than sectors:
          'b' (bytes), 'k' (kilobytes), 'm' (megabytes), 'g' (gigabytes)
          'c' (cylinders), '%' (% of total disk), '&' (% of free space).
  Values in non-sector units are truncated to the nearest cylinder boundary.
  > 
</pre></td></tr></table>

<p>
Novamente, alguns comandos que merecem um pouco de atenção:
<ul>
<li><b><tt>p</tt></b> - Exibe na tela o particionamento atual, você
    pode usar os modificadores <tt>k, m</tt> ou <tt>g</tt> para
    kilobytes, megabytes ou gigabytes.

<li><b><tt>D</tt></b> - Limpa qualquer particionamento existente, cria
    um novo particionamento padrão que cobre apenas a partição OpenBSD
    atual. Isso é útil no caso do disco já possuir um particionamento,
    e a partição OpenBSD for recriada com um tamanho diferente
    -- o particionamento antigo pode não ser removido, e pode
    causar confusão.

<li><b><tt>m</tt></b> - Modifica uma entrada existente no
    particionamento. Nunca superestime o que isso pode fazer por você.
    Enquanto ele pode alterar o tamanho de uma partição "disklabel", ele
    NÃO altera o sistema de arquivos do disco rígido.
    Usar essa opção e esperar que ele redimensione magicamente o tamanho
    da partição é uma boa maneira de perder grandes quantidades de
    dados. No entanto, essa opção e o
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=growfs&amp;sektion=8">growfs(8)</a>
    podem ser usados para aumentar o tamanho de uma partição.
</ul>

<p>
Dividir o seu disco de maneira apropriada é muito importante. A resposta
à pergunta "Como eu devo particionar meu sistema?" é "Exatamente como
você precisa". Isso varia de aplicação para aplicação.
Não há nenhuma resposta universal. Se você está inseguro de como quer
particionar o seu sistema, veja
<a href="#Partitioning">esta discussão</a>.

<p>
Nesse sistema, nós temos mais de 17G disponíveis para o OpenBSD. Isso
é muito espaço, e é muito provável que nós não vamos utilizá-lo no
total. Mas, nós não vamos usar valores muito pequenos. Melhor termos
algumas centenas de megabytes não utilizados do que alguns kilobytes
sobrando.

<p>
No disco raiz, uma partição 'a' <b>deve</b> ser criada para o sistema
de arquivos raiz (/).
O processo de instalação não continuará se ela não estiver disponível.
Geralmente, você irá querer também uma partição
<a href="faq14.html#Swap">swap</a> 'b'; você pode deixá-la inativa se
tem certeza que a memória do seu sistema nunca vai se esgotar.
Se uma partição 'b' existe no disco raiz, ela é automaticamente usada
para swap.
Partições swap em outros discos terão que ser adicionadas manualmente
no arquivo <i>/etc/fstab</i>.

<p>
Após pensar um pouco, nós decidimos criar apenas as partições separadas
e recomendadas para os sistemas de arquivos (<tt>/, /tmp, /var, /usr,
/home</tt>), junto com a partição de swap:
<ul>
<li><i><b>wd0a: /</b></i> (root) - 150M. Isso é mais do que suficiente.
<li><i><b>wd0b: </b></i>(swap) - 300M.
<li><i><b>wd0d: /tmp</b></i> - 120M. A <tt>/tmp</tt> é usada durante a
    criação de alguns softwares, 120M será o bastante para a maioria das
    ocasiões.
<li><i><b>wd0e: /var</b></i> - 80M. Se esse fosse um servidor Web ou
    de correio eletrônico, nós faríamos essa partição bem maior, mas
    esse não é o nosso caso.
<li><i><b>wd0g: /usr</b></i> - 6G. Nós queremos que essa partição seja
    grande para guardar alguns aplicativos de usuários, além de
    possibilitar atualizações e reconstruções do sistema através do
    código fonte, se necessário ou desejado. A
    <a href="faq15.html#Ports">Árvore de Portes</a> estará aqui também,
    a qual necessita de 250M de espaço antes dos portes serem
    construídos. Se você está planejando construir muitos aplicativos a
    partir do código fonte, usando o <a href="faq15.html#Ports">portes</a>
    em vez dos <a href="faq15.html#PkgMgmt">pacotes</a> pré-compilados,
    você pode necessitar de mais espaço aqui.
<li><i><b>wd0h: /home</b></i> - 4G. Isso deixará bastante espaço para
    os arquivos dos usuários.
</ul>

Agora, se você adicionar as partições acima, você vai ver que ainda
sobram 6G de espaço não utilizado! O espaço não utilizado
não causa nenhum problema, e nos dá a flexibilidade de ampliarmos
alguma partição no futuro, se necessário. A <i>/tmp</i> precisa
de mais espaço? Crie uma nova partição no espaço vazio, formate a nova
partição com o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&amp;sektion=8"
>newfs(8)</a> e modifique o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&amp;sektion=5"
><i>/etc/fstab</i></a> para montar a nova partição em <i>/tmp</i>.
Problema resolvido.
d1269 4
a1272 55
  > <b>p m</b>
  #             size        offset  fstype [fsize bsize  cpg]
  OpenBSD area: 1537.5M-19092.9M; size: 17555.4M; free: 17555.4M
    c:      19092.9M          0.0M  unused      0     0      
    i:       1498.7M          0.0M  MSDOS                   
  &gt; <b>a a</b>
  offset: [3148740] <b><i>Enter</i></b>
  size: [35953470] <b>150m</b>
  Rounding to cylinder: 321300
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/</b>
  &gt; <b>a b</b>
  offset: [3470040] <b><i>Enter</i></b>
  size: [35632170] <b>300m</b>
  Rounding to cylinder: 626535
  FS type: [swap] <b><i>Enter</i></b>
  &gt; <b>a d</b>
  offset: [4096575] <b><i>Enter</i></b>
  size: [35005635] <b>120m</b>
  Rounding to cylinder: 257040
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/tmp</b>
  &gt; <b>a e</b>
  offset: [4353615] <b><i>Enter</i></b>
  size: [34748595] <b>80m</b>
  Rounding to cylinder: 176715
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/var</b>
  &gt; <b>a g</b>
  offset: [4530330] <b><i>Enter</i></b>
  size: [34571880] <b>6g</b>
  Rounding to cylinder: 12594960
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/usr</b>
  &gt; <b>a h</b>
  offset: [17125290] <b><i>Enter</i></b>
  size: [21976920] <b>4g</b>
  Rounding to nearest cylinder: 8401995
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/home</b>
  &gt; <b>p m</b>
  OpenBSD area: 1537.5M-19092.9M; size: 17555.4M; free: 6628.4M
  
  16 partitions:
  #             size        offset  fstype [fsize bsize  cpg]
    a:           156.9M          1537.5M  4.2BSD   2048 16384    1 # /
    b:           305.9M          1694.4M    swap                   
    c:         19092.9M             0.0M  unused      0     0      
    d:           125.5M          2000.3M  4.2BSD   2048 16384    1 # /tmp
    e:            86.3M          2125.8M  4.2BSD   2048 16384    1 # /var
    g:          6149.9M          2212.1M  4.2BSD   2048 16384    1 # /usr
    h:          4102.5M          8362.0M  4.2BSD   2048 16384    1 # /home
    i:          1537.4M             0.0M   MSDOS                   
  &gt; <b>q</b>
  Write new label?: [y] <b><i>Enter</i></b>
d1276 4
a1279 17
Você pode notar que a partição <i>c</i> parece ter sido ignorada.
Essa partição é o seu disco rígido inteiro; não tente alterá-la.
Você pode notar também que a partição <i>i</i> não foi definida por nós;
essa é a partição pré-existente do Windows 2000. Partições não são
atribuídas a alguma letra em particular -- com exceção de
<i>a</i> (raiz), <i>b</i> (swap) e <i>c</i> (disco inteiro), o restante
das partições (até a letra <i>p</i>) estão disponíveis para uso como
você desejar.

<h3>Configuração dos pontos de montagem e formatação dos seus sistemas
de arquivos</h3>

Agora vem a configuração final dos seus pontos de montagem. Se você
configurou os pontos de montagem através do
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>,
este passo consiste em verificar as suas seleções; se não, você pode
especificá-los agora.
d1283 3
a1285 32
  Mount point for wd0d (131584 KBytes)? (or 'none' or 'done') [/tmp] <b><i>Enter</i></b>
  Mount point for wd0e (90624 KBytes)? (or 'none' or 'done') [/var] <b><i>Enter</i></b>
  Mount point for wd0g (6656 MBytes)? (or 'none' or 'done') [/usr] <b><i>Enter</i></b>
  Mount point for wd0h (4096 MBytes)? (or 'none' or 'done') [/home] <b><i>Enter</i></b>
  Mount point for wd0d (131584 KBytes)? (or 'none' or 'done') [/tmp] <b>done</b>
  No more disks to initialize.
 
  OpenBSD filesystems:
  wd0a /
  wd0d /tmp
  wd0e /var
  wd0g /usr
  wd0h /home

  The next step *DESTROYS* all existing data on these partitions!
  Are you really sure that you're ready to proceed? [no] <b>y</b>
  newfs: reduced number of fragments per cylinder group from 20080 to 19992 to enl
  arge last cylinder group
  /dev/rwd0a: 156.9MB in 321300 sectors of 512 bytes
  5 cylinder groups of 39.05MB, 2499 blocks, 5120 inodes each
  newfs: reduced number of fragments per cylinder group from 16064 to 15992 to enl
  arge last cylinder group
  /dev/rwd0d: 125.5MB in 257040 sectors of 512 bytes
  5 cylinder groups of 31.23MB, 1999 blocks, 4096 inodes each
  newfs: reduced number of fragments per cylinder group from 11040 to 10992 to enl
  arge last cylinder group
  /dev/rwd0e: 86.3MB in 176712 sectors of 512 bytes
  5 cylinder groups of 21.47MB, 1374 blocks, 2816 inodes each
  /dev/rwd0g: 6149.9MB in 12594960 sectors of 512 bytes
  31 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0h: 4102.5MB in 8401992 sectors of 512 bytes
  21 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
d1287 3
a1289 7
 /dev/wd0a on /mnt type ffs (rw, asynchronous, local, ctime=Tue Oct 21 00:36:28 2
  008)
  /dev/wd0h on /mnt/home type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0d on /mnt/tmp type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0g on /mnt/usr type ffs (rw, asynchronous, local, nodev)
  /dev/wd0e on /mnt/var type ffs (rw, asynchronous, local, nodev)
</pre></td></tr></table>
d1292 6
a1297 10
Você talvez queira saber por que o instalador pergunta outra vez pelos
pontos de montagem. Isso permite que você conserte erros ou enganos nos
pontos de montagem especificados durante a criação do particionamento.
Por exemplo, o processo de instalação apaga automaticamente todos
os pontos de montagem duplicados que você tenha especificado durante
a configuração do particionamento. O programa disklabel permite que
você entre em tais duplicatas, permitindo assim que estas sejam
verificadas antes de sair do programa. Apagar pontos de montagem
duplicados resulta em partições sem pontos de montagem, nestas você deve
atribuir novos pontos de montagem se deseja utilizar o espaço.
d1300 2
a1301 8
Observe que a pergunta "Are you really sure that you are ready to
proceed?" (Você tem certeza que deseja continuar?) por padrão está
configurada para "no" (não), assim você terá que dizer deliberadamente
para continuar e formatar as suas partições.
Se você escolher não, você simplesmente seria jogado em uma linha de
comando e poderia reiniciar novamente o processo de instalação digitando
"install", ou reinicializando seu computador com um disco de
inicialização.
d1304 7
a1310 3
Neste ponto, todas as partições são formatadas para você. Isso pode
levar algum tempo dependendo do tamanho das partições e da velocidade do
disco.
a1311 2
<a name="Hostname"></a>
<h3>4.5.3 - Configuração do nome de máquina do sistema</h3>
d1313 28
a1340 6
Agora você deve configurar o nome de máquina do sistema. Esse valor,
junto com o nome de domínio DNS (especificado
<a href="#Network">abaixo</a>), são salvos no arquivo
<tt>/etc/myname</tt>, que é usado durante a inicialização para
configurar o nome de máquina do sistema. Se você não configurar o nome
de domínio do seu sistema, o valor padrão 'my.domain' é usado.
d1343 28
a1370 4
É importante que você configure esse nome agora, porque ele será usado
na geração das chaves criptográficas para o seu sistema na primeira
inicialização depois da instalação. Essa geração não depende de a
rede estar configurada ou não.
d1374 18
a1391 1
  System hostname (short form, e.g. 'foo'): <b>puffy</b>
d1394 65
a1458 2
<a name="Network"></a>
<h3>4.5.4 - Configuração da rede</h3>
d1461 47
a1507 9
Agora é hora de configurar a sua rede. A rede deve ser configurada se
você está planejando fazer uma instalação baseada em FTP ou NFS,
considerando que estas são baseadas nas informações que você especificar
neste ponto.
Aqui está uma caminhada completa através da seção de configuração da
rede do processo de instalação.
No nosso exemplo, nós vamos conectar uma interface (fxp0) a um modem
a cabo, configurada para usar DHCP; e a outra interface será para nossa
rede interna, configurada estaticamente.
d1510 7
a1516 32
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Configure the network? [yes] <b><i>Enter</i></b>
  Available interfaces are: fxp0 xl0.
  Which one do you wish to initialize? (or 'done') [fxp0] <b>xl0</b>
  Symbolic (host) name for xl0? [puffy] <b><i>Enter</i></b>
  The media options for xl0 are currently
          media: Ethernet autoselect (100baseTX full-duplex)
  Do you want to change the media options? [no] <b><i>Enter</i></b>
  IPv4 address for xl0? (or 'dhcp') <b>192.168.1.254</b>
  Netmask? [255.255.255.0] <b><i>Enter</i></b>
  IPv6 address for xl0? (or 'rtsol' or 'none') [none] <b><i>Enter</i></b>
  Available interfaces are: fxp0.
  Which one do you wish to initialize? (or 'done') [fxp0] <b><i>Enter</i></b>
  Symbolic (host) name for fxp0? [puffy] <b><i>Enter</i></b>
  The media options for fxp0 are currently
          media: Ethernet autoselect (10baseT half-duplex)
  Do you want to change the media options? [no] <b><i>Enter</i></b>
  IPv4 address for fxp0? (or 'none' or 'dhcp') <b>dhcp</b>
  Issuing hostname-associated DHCP request for fxp0.
  DHCPDISCOVER on fxp0 to 255.255.255.255 port 67 interval 1
  DHCPOFFER from 73.34.136.1
  DHCPREQUEST on fxp0 to 255.255.255.255 port 67
  DHCPACK from 73.34.136.1
  bound to 69.241.244.76 -- renewal in 1800 seconds.
  IPv6 address for fxp0? (or 'rtsol' or 'none') [none] <b><i>Enter</i></b>
  No more interfaces to initialize.
  DNS domain name? (e.g. 'bar.com') [my.domain] <b>exemplo.com</b>
  DNS nameserver? (IP address or 'none') [68.87.77.130 68.87.72.130 68.87.75.194] <b><i>Enter</i></b>
  Use the nameserver now? [yes] <b><i>Enter</i></b>
  Default route? (IP address, 'dhcp' or 'none') [dhcp] <b><i>Enter</i></b>
  Edit hosts with ed? [no] <b><i>Enter</i></b>
  Do you want to do any manual network configuration? [no] <b><i>Enter</i></b>
d1520 2
a1521 4
<b>NOTA: </b>Somente <b>uma</b> interface de rede pode ser configurada
utilizando DHCP durante a instalação. Se você tentar configurar mais de
uma interface para usar DHCP, você encontrará erros. Você terá que
configurar manualmente as outras interfaces DHCP após a instalação.
d1524 30
a1553 1
Agora vamos definir a senha para o usuário root:
d1555 5
a1559 3
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
Password for root account? (will not echo) <b><i>pAssWOrd</i></b>
Password for root account? (again) <b><i>pAssWOrd</i></b>
d1561 1
d1563 17
a1579 9
Use uma senha segura para o usuário root. Você poderá criar outros
usuários depois que o sistema for inicializado. Extraído de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=passwd&amp;sektion=1">passwd(1)</a>:
<pre>
    The new password should be at least six characters long and not purely
    alphabetic.  Its total length must be less than _PASSWORD_LEN (currently
    128 characters).  A mixture of both lower and uppercase letters, numbers,
    and meta-characters is encouraged.
</pre>
d1581 3
a1583 2
<a name="InstMedia"></a>
<h3>4.5.5 - Escolha da mídia de instalação</h3>
d1586 8
a1593 2
Após configurar a rede, o programa de instalação dar-lhe-á a
oportunidade de fazer ajustes manuais na configuração.
d1596 11
a1606 2
Em seguida, você terá a oportunidade de escolher sua mídia de
instalação. As opções são listadas abaixo.
d1609 13
a1621 4
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Let's install the sets!
  Location of sets? (cd disk ftp http or 'done') [cd] <b><i>Enter</i></b>
  Available CD-ROMs are: cd0.
d1624 3
d1628 6
a1633 5
Neste exemplo, nós vamos instalar a partir do CD-ROM. Será mostrada
uma lista de todos os dispositivos no seu computador que foram
identificados como CD-ROM. A maioria das pessoas possuem somente um.
Se você necessitar, certifique-se de qual dispositivo será usado para
fazer a instalação do OpenBSD.
d1636 17
a1652 4
<b>NOTA: </b>
Nem todas as plataformas suportam todas as opções. Neste caso,
a plataforma OpenBSD/i386 não suporta instalação via NFS, por isso
essa opção não está na lista.
d1655 4
a1658 4
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Available CD-ROMs are: cd0.
  Which one contains the install media? (or 'done') [cd0] <b><i>Enter</i></b>
  Pathname to the sets?  (or 'done') [4.5/i386] <b><i>Enter</i></b>
d1662 4
a1665 3
Aqui, você será perguntado por qual diretório contém os arquivos
de instalação, que é <tt>4.5/i386/</tt> no CD-ROM oficial ou no CD
construído a partir da imagem <tt>install45.iso</tt>.
d1667 2
a1668 2
<a name="Filesets"></a>
<h3>4.5.6 - Escolha dos pacotes de arquivos.</h3>
d1671 13
a1683 11
Agora é a hora de escolher quais arquivos serão instalados. Você pode
conseguir uma descrição desses arquivos na
<a href="#FilesNeeded">próxima seção</a>. Os arquivos que o programa
de instalação encontra são mostrados na tela. O seu trabalho é informar
quais arquivos você quer instalar. Por padrão, todos pacotes de arquivos
não-X são selecionados; no entanto, alguns usuários avançados talvez
queiram instalar somente o mínimo requerido para executar o OpenBSD, que
são os arquivos <tt>base45.tgz</tt>, <tt>etc45.tgz</tt> e <tt>bsd</tt>.
A maioria das pessoas vão querer instalar o conjunto padrão de pacotes
de arquivos ou todos os pacotes de arquivos. O exemplo abaixo é o da
instalação completa.
d1686 13
a1698 4
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Select sets by entering a set name, a file name pattern or 'all'. De-select
  sets by prepending a '-' to the set name, file name pattern or 'all'. Selected
  sets are labeled '[x]'.
d1700 5
a1704 83
          [X] bsd
          [X] bsd.rd
          [ ] bsd.mp
          [X] base45.tgz
          [X] etc45.tgz
          [X] misc45.tgz
          [X] comp45.tgz
          [X] man45.tgz
          [X] game45.tgz
          [ ] xbase45.tgz
          [ ] xetc45.tgz
          [ ] xshare45.tgz
          [ ] xfont45.tgz
          [ ] xserv45.tgz
  Set name? (or 'done') [bsd.mp] <b>all</b>

          [X] bsd
          [X] bsd.rd
          [X] bsd.mp
          [X] base45.tgz
          [X] etc45.tgz
          [X] misc45.tgz
          [X] comp45.tgz
          [X] man45.tgz
          [X] game45.tgz
          [X] xbase45.tgz
          [X] xetc45.tgz
          [X] xshare45.tgz
          [X] xfont45.tgz
          [X] xserv45.tgz
</pre></td></tr></table>

<p>
Você pode fazer todos os tipos de coisas aqui -- "<tt>-x*</tt>"
removeria todos os componentes do X, se você mudasse de ideia.
Nesse caso, nós selecionamos todos os arquivos. Embora o sistema
funcione com poucos pacotes de arquivos, começar com a seleção padrão ou
instalar todos os pacotes de arquivos é mais recomendado.
Mais detalhes sobre a seleção dos pacotes podem ser encontrados
<a href="#FilesNeeded">aqui</a>.

<p>
Após escolher os pacotes de arquivos que deseja instalar, você será
questionado para confirmar se deseja que esses pacotes de arquivos sejam
extraídos e instalados.
Uma barra de progresso informar-lhe-á quanto tempo isso levará.
Esse tempo depende do sistema em que o OpenBSD está sendo instalado,
os arquivos que serão instalados e a velocidade da mídia utilizada.
Esta parte pode levar de poucos minutos a algumas horas.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Set name? (or 'done') [done] <b><i>Enter</i></b>
  Ready to install sets? [yes] <b><i>Enter</i></b>
  Getting bsd ...
  100% |**************************************************|  6539 KB    00:01    
  Getting bsd.rd ...
  100% |**************************************************|  5461 KB    00:01    
  Getting bsd.mp ...
  100% |**************************************************|  6558 KB    00:01    
  Getting base45.tgz ...
  100% |**************************************************| 46941 KB    00:29    
  Getting etc45.tgz ...
  100% |**************************************************|   501 KB    00:00    
  Getting misc45.tgz ...
  100% |**************************************************|  2866 KB    00:01    
  Getting comp45.tgz ...
  100% |**************************************************| 87874 KB    00:43    
  Getting man45.tgz ...
  100% |**************************************************|  8032 KB    00:07    
  Getting game45.tgz ...
  100% |**************************************************|  2555 KB    00:01    
  Getting xbase45.tgz ...
  100% |**************************************************|  9761 KB    00:05    
  Getting xetc45.tgz ...
  100% |**************************************************| 75214       00:00    
  Getting xshare45.tgz ...
  100% |**************************************************|  2698 KB    00:05    
  Getting xfont45.tgz ...
  100% |**************************************************| 34745 KB    00:16    
  Getting xserv45.tgz ...
  100% |**************************************************| 19478 KB    00:09    
  Location of sets? (cd disk ftp http or 'done') [done] <b><i>Enter</i></b>
d1708 2
a1709 4
Neste ponto você pode adicionar arquivos de outras fontes
(incluindo <a href="#site">arquivos personalizados</a>) se desejar, ou
digitar '<tt>done</tt>' se você já instalou todos os pacotes de
arquivos que necessita.
d1711 5
a1715 2
<a name="Finish"></a>
<h3>4.5.7 - Finalização</h3>
d1717 2
a1718 7
Em seguida, você será questionado sobre algumas coisas sobre seu
sistema instalado. A primeira é se o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd&amp;sektion=8">sshd(8)</a>
deve ser iniciado na inicialização do seu sistema.
Geralmente, você vai querer o sshd(8) funcionando, mas ocasionalmente
talvez não queira. Se o seu uso do sistema não necessitar do sshd(8), há
uma pequena vantagem teórica de segurança nisso.
d1721 12
a1732 2
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Start sshd(8) by default? [yes] <b>y</b>
d1736 9
a1744 3
(Se você mudar de ideia mais tarde, altere o
<a href="faq10.html"><tt>/etc/rc.conf.local</tt></a> ou
<tt>/etc/rc.conf</tt>.)
d1747 121
a1867 6
Você terá a opção de executar o
<a href="faq6.html#OpenNTPD">OpenNTPD</a> na inicialização do
seu sistema.
O OpenNTPD é uma maneira simples de manter o relógio do seu sistema
corretamente sincronizado, e a configuração padrão é suficiente para
a maioria dos usuários.
d1871 15
a1885 2
  Start ntpd(8) by default? [no] <b>yes</b>
  NTP server? (hostname or 'default') [default] <b><i>Enter</i></b>
d1889 6
a1894 6
Se você tem um servidor de horas local, você pode especificá-lo aqui,
se você escolher "default", o OpenNTPD usa <tt>pool.ntp.org</tt>,
uma enorme coleção de servidores de horas de acesso livre.
(Se você mudar de ideia mais tarde, altere o
<a href="faq10.html"><tt>/etc/rc.conf.local</tt></a> e/ou
<tt>/etc/ntpd.conf</tt>.)
d1897 2
a1898 11
Em algumas plataformas, lhe é perguntado se deseja executar o X.
Se você responder 'Y', o <tt>/etc/sysctl.conf</tt> será
modificado para incluir as linhas <tt>machdep.allowaperture=1</tt> ou
<tt>machdep.allowaperture=2</tt>, dependendo da sua plataforma.
Algumas plataformas não fazem esta pergunta. Se você não pretende
executar o X ou não tem certeza, responda 'N', se mudar de ideia basta
editar o arquivo <tt>/etc/sysctl.conf</tt>. Existe uma vantagem de
segurança em deixar o driver <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xf86&amp;sektion=4">xf86(4)</a>
desabilitado, pois os motores gráficos das placas de vídeo dos
computadores modernos podem ser usados para alterar a memória, sem
controle do processador.
d1902 7
a1908 1
  Do you expect to run the X Window System? [no] <b>y</b>
d1911 7
d1919 3
a1921 9
Em seguida, você será questionado se quer usar um
<a href="faq7.html#SerCons">console serial</a> com este computador,
em vez de um teclado e um monitor.
Se você escolher "<tt>yes</tt>" e responder outras questões simples, o
<tt><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot.conf&amp;sektion=8">/etc/boot.conf</a></tt>
e o
<tt><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ttys&amp;sektion=5">/etc/ttys</a></tt>
serão editados corretamente para você.
A maioria dos usuários escolherão o padrão: <b><tt>no</tt></b>.
d1924 2
a1925 3
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Change the default console to com0? [no] <b><i>Enter</i></b>
</pre></td></tr></table>
d1928 3
a1930 6
A sua última tarefa é configurar o fuso horário ("time zone").
Dependendo de onde a sua máquina vive, existem diversas respostas
válidas a essa pergunta. No exemplo que se segue, nós usamos
<tt>US/Eastern</tt>, mas poderíamos ter usado <tt>EST5EDT</tt> ou
<tt>US/Michigan</tt> e teríamos o mesmo resultado. Ao digitar
<tt>?</tt>, o prompt mostra uma lista com possíveis escolhas.
d1934 6
a1939 21
  Saving configuration files......done.
  Generating initial host.random file ......done.
  What timezone are you in? ('?' for list) [Canada/Mountain] <b>?</b>
  Africa/      Chile/       GB-Eire      Israel       NZ-CHAT      UCT
  America/     Cuba         GMT          Jamaica      Navajo       US/
  Antarctica/  EET          GMT+0        Japan        PRC          UTC
  Arctic/      EST          GMT-0        Kwajalein    PST8PDT      Universal
  Asia/        EST5EDT      GMT0         Libya        Pacific/     W-SU
  Atlantic/    Egypt        Greenwich    MET          Poland       WET
  Australia/   Eire         HST          MST          Portugal     Zulu
  Brazil/      Etc/         Hongkong     MST7MDT      ROC          posix/
  CET          Europe/      Iceland      Mexico/      ROK          posixrules
  CST6CDT      Factory      Indian/      Mideast/     Singapore    right/
  Canada/      GB           Iran         NZ           Turkey       zone.tab
  What timezone are you in? ('?' for list) [Canada/Mountain] <b>US</b>
  What sub-timezone of 'US' are you in? ('?' for list) <b>?</b>
  Alaska          Central         Hawaii          Mountain        Samoa
  Aleutian        East-Indiana    Indiana-Starke  Pacific
  Arizona         Eastern         Michigan        Pacific-New
  Select a sub-timezone of 'US' ('?' for list): <b>Eastern</b>
  Setting local timezone to 'US/Eastern'...done.
d1943 6
a1948 2
Se você está preocupado com a precisão no horário, talvez você queira
ler <a href="faq8.html#NTPerror">isto</a>.
d1951 1
a1951 4
As últimas etapas são para que seu sistema crie o diretório
<tt>/dev</tt> (o que pode levar algum tempo em alguns sistemas,
especialmente aqueles que possuem pouca quantidade de RAM), e para
instalar os blocos de inicialização ("boot blocks").
d1955 42
a1996 20
  Making all device nodes...done.
  Installing boot block...
  boot: /mnt/boot
  proto: /usr/mdec/biosboot
  device: /dev/rwd0c
  /usr/mdec/biosboot: entry point 0
  proto bootblock size 512
  /mnt/boot is 3 blocks x 16384 bytes
  fs block shift 2; part offset 3148740; inode block 24, offset 1832
  using MBR partition 1: type 166 (0xa6) offset 3148740 (0x300bc4)
  done.

  CONGRATULATIONS! Your OpenBSD install has been successfully completed!
  To boot the new system, enter halt at the command prompt. Once the
  system has halted, reset the machine and boot from the disk.
  # <b>halt</b>
  syncing disks... done

  The operating system has halted.
  Please press any key to reboot.
d2000 10
a2009 2
O OpenBSD agora está instalado no seu sistema e pronto para a primeira
inicialização, mas antes que você a faça...
d2012 31
d2044 7
a2050 5
<h4>Antes da reinicialização</h4>
Neste ponto, seu sistema está instalado e pronto para ser inicializado
e configurado para o serviço. Entretanto, antes disso, é
melhor você verificar a <a href="../../errata.html">página Errata</a>
para ver se existe alguma falha que possa causar-lhe algum dano.
d2053 32
a2084 10
Um truque que você pode usar "antes da primeira inicialização" é
executar:
<pre>
    # <b>/mnt/usr/sbin/chroot /mnt</b>
</pre>
no prompt de shell.
Isso ajusta seus pontos de montagem para ser o que seriam em uma
inicialização normal do seu novo sistema instalado. Você pode agora
fazer configurações básicas do seu sistema, como adicionar usuários,
mudar pontos de montagem, etc.
d2086 3
a2088 6
<h4>Depois da reinicialização</h4>

<p>
Umas das primeiras coisas que você deve ler, depois de instalar o seu
sistema, é
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=afterboot&amp;sektion=8">afterboot(8)</a>.
d2091 1
a2091 16
Você também pode achar os seguintes links úteis:
<ul>
<li><a href="faq10.html#AddDelUser">Como adicionar usuários no OpenBSD</a>
<li><a href="faq6.html#Setup">Configuração Inicial da Rede</a>
<li><a href="faq2.html#ManPages">Páginas de manual dos comandos
    populares/mais usados</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi">Páginas de manual
    do OpenBSD na Web</a>
<li><a href="faq15.html">O Sistema de Pacotes e Portes do OpenBSD para a
    instalação de software</a>
</ul>

<h4>Uma última coisa...</h4>
Os desenvolvedores do OpenBSD pedem que você
<a href="#SendDmesg">envie uma cópia do seu dmesg</a>. Isso é realmente
muito apreciado por eles e, no final das contas, por todos os usuários.
d2095 1
a2095 1
<h2>4.6 - Quais arquivos são necessários para a instalação?</h2>
d2101 4
a2104 1
Nem todos os aplicativos necessitam de todos os pacotes de arquivos.
d2110 1
a2110 1
      múltiplos processadores (SMP) (somente para algumas plataformas)
d2112 2
a2113 2
      RAM</a>
  <li><b><i>base45.tgz</i></b>	- Contém o sistema base do OpenBSD
d2115 1
a2115 1
  <li><b><i>etc45.tgz</i></b>	- Contém todos os arquivos de /etc
d2117 1
a2117 1
  <li><b><i>comp45.tgz</i></b>	- Contém o compilador e suas
d2119 13
a2131 15
      <b>Recomendado</b>
  <li><b><i>man45.tgz</i></b>    - Contém as páginas de manual
      <b>Recomendado</b>
  <li><b><i>misc45.tgz</i></b>   - Contém informações diversas,
      documentos sobre configuração
  <li><b><i>game45.tgz</i></b>   - Contém jogos para o OpenBSD
  <li><b><i>xbase45.tgz</i></b>  - Contém as bibliotecas e utilitários
      da base do X11
  <li><b><i>xetc45.tgz</i></b>   - Contém os arquivos de configuração
      /etc/X11 e /etc/fonts
  <li><b><i>xfont45.tgz</i></b>  - Contém o servidor de fontes do X11 e
      fontes
  <li><b><i>xserv45.tgz</i></b>  - Contém os servidores X do X11
  <li><b><i>xshare45.tgz</i></b> - Contém páginas de manual,
      configurações locais, arquivos de inclusão, etc. para o X
d2134 1
a2134 1
Os pacotes <b>etc45.tgz</b> e <b>xetc45.tgz</b> não são instalados
d2141 2
a2142 2
<h3>Por que eu tenho que instalar o xbase45.tgz?</h3>
Mesmo se você não tem a intenção de executar o X, alguns
d2144 2
a2145 2
bibliotecas ou outros utilitários em <b>xbase45.tgz</b> estejam
instalados no seu sistema.
d2147 2
a2148 2
xbase45.tgz; o resto do X não é necessário.
Muitas pessoas insistem em não instalar o xbase45.tgz em seus sistemas,
d2151 1
d2153 1
a2153 1
<li>Por si só, instalar o xbase45.tgz não causa a execução de nenhum
d2155 1
a2155 1
<li>Por si só, instalar o xbase45.tgz em um sistema não influencia
d2157 3
a2159 4
<li>Se alguém já ESTÁ no seu sistema, ele pode instalar o que ele
    quiser, então a presença ou ausência do pacote de arquivos
    xbase45.tgz não muda a situação.
<li>As únicas partes do xbase45.tgz que estão em execução são as partes
d2161 2
a2162 2
<li>O espaço exigido pelo xbase45.tgz é relativamente pequeno:
    cerca de 30M.
d2166 1
a2166 1
escolher partes do xbase45.tgz e usar somente os arquivos que elas
d2174 23
a2196 7
SE você precisa do xbase45.tgz, simplesmente instale-o.
Isso não vai lhe causar nenhum prejuízo maior que a aplicação
necessitando dele causaria.
Note que compilar a partir do código frequentemente exige que mais
partes do X estejam instaladas, mas os pontos acima ainda são
aplicáveis.

d2200 1
a2200 2
<a name= "SpaceNeeded"></a>  <!-- XXXobsolete tag -->
<h2> 4.7 - Quanto de espaço eu preciso para uma instalação do OpenBSD?</h2>
d2205 22
a2226 101
pretendido para seu sistema. Entretanto, estes números podem ser
usados como um ponto de <i>partida</i>:

<blockquote><pre>
(root)             60MB
/usr               500MB (sem o X) ou 660MB (com o X)
/var               25MB
/tmp               50MB
swap               32MB
</pre></blockquote>

Aqueles são os tamanhos mínimos sugeridos para o sistema de arquivos
de uma instalação completa.
Esses números incluem tamanho extra para permitir o uso de um típico
sistema desktop conectado à Internet, mas não muito mais do que isso.

<p>
Mantenha em mente os seguintes fatos:
<ul>
<li>Esses são valores mínimos.
    Os discos são relativamente baratos hoje em dia, tentar espremer seu
    sistema em um disco pequeno raramente é necessário. Para aplicações
    de propósito especial, os números acima podem ser menores, mas é
    melhor você testar antes.
<li>Esses números NÃO incluem a árvore de portes.
<li>Se você planeja instalar uma parte significativa de software de
    terceiros, faça uma partição <tt>/usr</tt> grande. Esse tamanho
    depende dos aplicativos, é claro.
<li>Para sistemas que manipulam grandes quantidades de correio
    eletrônico ou páginas Web (armazenados em <tt>/var/mail</tt> e
    <tt>/var/www</tt>, respectivamente), você irá fazer a sua partição
    <tt>/var</tt> bem grande, ou colocá-los em partições separadas.
<li>Para sistemas multiusuários que geram grandes quantidades de
    arquivos de registro, você irá fazer a sua partição <tt>/var</tt>
    com um tamanho cômodo, ou criar uma partição separada para os
    arquivos de registro (<tt>/var/log</tt>).
<li>Se você planeja <a href="faq5.html">recompilar seu kernel e o
    sistema a partir do código fonte</a>,
    você deverá fazer sua partição <tt>/usr</tt> grande, 4G é um bom
    tamanho.
<li>Compilar alguns <a href="faq15.html#Ports">portes</a> a partir do
    código fonte pode consumir uma grande quantidade de espaço das
    suas partições <tt>/usr</tt> e <tt>/tmp</tt>, essa é outra razão
    pela qual aconselhamos que você use
    <a href="faq15.html#PkgMgmt">pacotes pré-compilados</a>.
<li>A partição <tt>/tmp</tt> é usada na compilação de portes, entre
    outras coisas; um bom tamanho para /tmp depende do que você vai
    fazer com ela. 50M pode ser um bom tamanho para a maioria dos
    usuários, mas alguns aplicativos requerem 100M ou mais de espaço na
    <tt>/tmp</tt>.

<li>A partição 'b' do seu primeiro disco se torna automaticamente a
    partição swap do sistema.
    Muitas pessoas seguem a velha regra de que sua partição swap deve
    ser duas vezes o tamanho da memória principal. Essa regra não faz
    sentido.
    Os sistemas modernos possuem bastante espaço para swap, porém é
    preferível que seu sistema nunca faça swap.
    Você não quer seu sistema funcionando sempre com RAM+swap, você deve
    ter, de preferência, bastante RAM no sistema, assim ele não precisa
    fazer swap.
    Se você está usando um dispositivo flash como disco, você
    provavelmente não vai querer nenhuma partição swap.
    Use o que for apropriado para as suas necessidades.
    Se você pensar errado, é possível adicionar posteriormente outra
    partição swap em <i>/etc/fstab</i> ou
    <a href="faq14.html#SwapFile">fazer swap em um arquivo</a>.
<li>A swap e o <tt>/var</tt> são utilizados para armazenar core dumps
    do sistema em um evento de
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=crash&amp;sektion=8">crash(8)</a>.
    Se isso é importante para você, seu espaço swap deve ser um pouco
    maior que sua memória principal. Após a reinicialização,
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=savecore&amp;sektion=8">savecore(8)</a>
    tenta salvar o conteúdo da sua swap no arquivo
    <tt>/var/crash</tt>, então se isso for importante para você, sua
    partição <tt>/var</tt> deve ter uma grande quantidade de
    <i>espaço livre</i> para esses arquivos de dump.
    Mas sejamos realistas, poucos desenvolvedores quererão analisar o
    seu arquivo de dump de 1GB, então se você não pretende investigar o
    erro localmente, isso não é uma preocupação.
<li>Alguns poucos editores usam <tt>/var/tmp</tt> como espaço de
    partida, e esse diretório precisa ser tão grande ou maior que o
    enorme arquivo que você editar.
    Se você planeja editar arquivos de 500M, sua partição <tt>/var</tt>
    ou <tt>/var/tmp</tt> precisa ser maior do que você provavelmente
    tinha planejado.
</ul>

<p>
Há diversas razões para usar sistemas de arquivos separados em vez
de colocar tudo em uma ou duas partições:

<ul>
<li><b>Segurança</b>: Você pode marcar alguns sistemas de arquivos
    como 'nosuid', 'nodev', 'noexec', 'readonly', etc. Isso é feito pelo
    processo de instalação se você usar as partições descritas acima.
<li><b>Estabilidade</b>: Um usuário, ou um programa qualquer, pode
    encher o sistema de arquivos com lixo se tiver permissões de
    escrever nele. Seus programas principais que, é claro, executam em
    diferentes partições, não sofrerão com isso.
<li><b>Velocidade</b>: Um sistema de arquivos que é escrito muitas
d2231 4
a2234 4
    alguma razão, os seus outros sistemas de arquivos continuarão em
    bom estado.
<li><b>Tamanho</b>: Muitas máquinas possuem limites de áreas no disco
    de onde a ROM pode carregar o kernel. Em alguns casos, esse limite
d2236 3
a2238 2
    casos, um limite muito maior (por exemplo, 2G, 8G, ou 128G em
    sistemas i386). Enquanto o kernel pode terminar em qualquer lugar
d2243 132
a2374 2
    2G, a menos que você saiba que sua plataforma (e máquina particular)
    pode manipular mais (ou menos) do que isso.
d2398 2
a2399 2
     a FAQ <a href="faq5.html#ProbObjPt">Construção a partir do
     código fonte</a> para um exemplo (<tt>/usr/obj</tt>).
d2408 1
a2408 1
     menor que 20GB, pode fazer sentido deixar uma parte do seu disco
d2432 27
a2458 16
<li>Você talvez queira criar uma partição <tt>/altroot</tt>, como
    descrito em
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=daily&amp;sektion=8">daily(8)</a>.
    Isso pode fazer uma cópia diária da sua partição <tt>/</tt>,
    dando a você uma cópia extra do seu kernel e arquivos de
    configuração do diretório <tt>/etc</tt> se alguma coisa acontecer na
    sua partição raiz.
    Obviamente, a partição <tt>/altroot</tt> precisa ser tão grande
    quanto <tt>/</tt>.
    Se você tem um segundo disco rígido e algo duplicando o resto do seu
    disco, como
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raid&amp;sektion=4">raid(4)</a>
    baseado em software ou uma cópia periódica usando
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&amp;sektion=8">dump(8)</a
    >/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore(8)</a>,
    esse disco pode ser inicializado depois da remoção do disco primário.
d2464 1
a2464 1
<h2>4.8 - Inicialização múltipla com OpenBSD</h2>
d2467 1
a2467 1
computador, e meios de selecionar qual SO é para inicializar. Isso
d2474 1
a2474 1
uma máquina em produção. A <a href="faq14.html">FAQ 14</a> possui mais
d2486 1
a2486 1
Esta é, provavelmente, a mais negligenciada e, às vezes, a melhor
d2493 1
a2493 1
existem para sistemas Windows 9x e DOS, e para muitos outros sistemas
d2505 1
a2505 1
<a href="#MkFlop">disquetes de instalação padrão do OpenBSD</a>,
d2520 2
d2524 1
a2524 1
Nesse caso, o programa
d2529 1
a2529 1
caso, o primeiro HD que a BIOS vê. Mantenha em mente que somente um
d2539 3
a2541 2
"Partition Boot Record" (PBR) do OpenBSD. Depois de executar o
"installboot", você pode copiar o arquivo usando o
d2555 2
a2556 2
Agora inicialize o NT e coloque <tt>openbsd.pbr</tt> em C:. Adicione uma
linha como esta no fim de <tt>C:\BOOT.INI</tt>:
d2570 1
a2570 1
No Windows XP você pode editar as informações de inicialização usando
d2580 1
a2580 1
PBR do OpenBSD, coloca-o na sua partição NT/2000/XP e adiciona-o
d2599 1
a2599 1
Uma vez que o PBR do OpenBSD está copiada na partição do sistema Vista,
d2638 1
a2638 1
dizendo que ele não pode resolver o caminho do nome designado.
d2656 3
a2658 3
<a href="http://technet.microsoft.com/en-us/library/cc721886%28WS.10%29.aspx">
Frequently Asked Questions</a> no TechNet.
 
d2660 1
a2660 1
Para aqueles que acham a configuração manual assustadora,
d2667 4
d2732 1
a2732 1
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.5/i386/INSTALL.linux">INSTALL.linux</a>,
d2749 1
a2749 1
<h2>4.9 - Como enviar o seu dmesg para dmesg@@openbsd.org depois da
d2806 1
a2806 1
    hora ou até uma hora, nós a receberemos.
d2839 1
a2839 1
<h2>4.10 - Como adicionar um pacote de arquivos após a instalação</h2>
d2844 1
a2844 1
Às vezes você acha que necessita realmente só de <tt>comp45.tgz</tt>
d2855 1
a2855 1
origem, e então deixe eles serem instalados para você.
d2864 1
a2864 1
  # tar xzvphf comp45.tgz
d2898 1
a2898 1
<h2>4.11 - O que é 'bsd.rd'?</h2>
d2900 3
a2902 3
<b><tt>bsd.rd</tt></b> é um "Disco RAM" do kernel. Esse arquivo é muito
útil; muitos desenvolvedores têm cuidados para mantê-lo sempre na
raiz dos seus sistemas.
d2907 1
a2907 1
depois da inicialização do <tt>bsd.rd</tt> são armazenados no kernel, e
d2932 1
a2932 1
<i>. . . normal boot to install . . .</i>
d2943 1
a2943 1
<h2>4.12 - Problemas comuns de instalação</h2>
d2946 1
a2946 1
<h3>4.12.1 - Meu Compaq só reconhece 16M RAM</h3>
d2968 1
a2968 1
a memória RAM disponível seja reconhecida.
d2975 1
a2975 1
<h3>4.12.2 - Meu i386 não inicializa após a instalação</h3>
d2993 2
a2994 2
    "Master Boot Record" do disco; caso contrário, o código de
    inicialização mestre está intocado. Isso é um problema se nenhum
d3014 1
a3014 1
<h3>4.12.3 - Minha (velha e lenta) máquina inicializa, mas para no
d3028 1
a3028 1
<a href="#site">site45.tgz</a> e instalá-las com o resto do sistema.
d3032 1
a3032 1
<h3>4.12.4 - Eu recebi a mensagem "Failed to change directory" enquanto
d3035 1
a3035 1
Ao fazer uma instalação FTP de um
d3064 1
a3064 1
<h3>4.12.5 - Minha tabela de partições do fdisk está corrompida ou
d3067 1
a3067 1
quando executa <tt>fdisk wd0</tt>, ele vê uma tabela de partições
d3090 1
a3090 1
<h3>4.12.6 - Eu não tenho um drive de disquete ou CD-ROM na minha
d3111 1
a3111 1
    Você também pode colocar, previamente, os conjuntos de arquivos na
d3130 1
a3130 1
<h2>4.13 - Personalização do processo de instalação</h2>
d3136 1
a3136 1
"<tt>siteXX.tgz</tt>", onde XX é a versão (por exemplo, 45). O arquivo
d3150 1
a3150 1
arquivos instalados nos conjuntos 'normais' e, assim, personalizar a
d3156 1
a3156 1
"<tt>site45-puffy.tgz</tt>" por exemplo.
d3188 2
a3189 2
para o processo atual, e executa esse script num ambiente
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&amp;sektion=8">chroot</a>ado
d3236 1
a3236 1
<h2>4.14 - Como eu instalo em vários sistemas similares?</h2>
d3244 1
a3244 1
Na maioria das plataformas, a mídia de inicialização inclui o programa
d3246 1
a3246 1
que pode ser usado para recuperar backups feitos com
d3248 1
a3248 1
Assim, você pode inicializar a partir de um
d3280 1
a3280 1
<h2>4.15 - Como eu obtenho o dmesg(8) para relatar um problema de
d3305 1
a3305 1
frequentemente, o disquete de inicialização tem bastante espaço para
d3314 1
a3314 1
(como um cabo null-modem) e um programa emulador de terminal para
d3338 1
a3338 1
A taxa padrão de comunicação é 9600 (baud rate).
d3374 2
a3375 2
Originally [OpenBSD: faq4.html,v 1.284 ]<br>
$Translation: faq4.html,v 1.24 2009/10/13 19:21:11 alan Exp $<br>
@


1.15
log
@Sync with Steelix CVS
@
text
@d2284 1
a2284 1
testar ou mudar, afim de tornar funcional no OpenBSD.
d2376 2
a2377 2
Não se esqueça da opção <tt>'p'</tt> no comando acima, afim de restaurar
corretamente as permissões dos arquivos!
d2883 1
a2883 1
$Translation: faq4.html,v 1.23 2009/09/09 11:19:45 alan Exp $<br>
@


1.14
log
@Sync with Steelix CVS
@
text
@d519 1
a519 1
partir da unidade correta. Tente <tt>probe-scsi</tt>
d2882 2
a2883 2
Originally [OpenBSD: faq4.html,v 1.283 ]<br>
$Translation: faq4.html,v 1.22 2009/08/26 13:02:34 alan Exp $<br>
@


1.13
log
@Sync with Steelix CVS
@
text
@d26 2
a27 2
<a href="faq3.html">[Seção 3 - Começando com o OpenBSD]</a>
<a href="faq5.html">[Seção 5 - Construindo o Sistema a partir do Código Fonte]</a>
d38 4
a41 4
<li><a href="#Checklist"	>4.2 - Lista de verificações
    antes da instalação</a>
<li><a href="#MkInsMedia"	>4.3 - Criando uma mídia bootável de
    instalação do OpenBSD</a>
d43 1
a43 1
    <li><a href="#UnixFlop"		>4.3.1 - Criando disquetes no
d45 1
a45 1
    <li><a href="#DosFlop"		>4.3.2 - Criando disquetes no
d47 2
a48 2
    <li><a href="#MkCD-ROM"		>4.3.3 - Criando um CD de boot
	(inicialização)</a>
d50 3
a52 3
<li><a href="#Boot"		>4.4 - Carregando a mídia de instalação
    do OpenBSD</a>
<li><a href="#Install"		>4.5 - Executando a instalação</a>
d54 6
a59 1
  <li><a href="#Start"			>4.5.1 - Iniciando a
d61 1
a61 7
  <li><a href="#Disks"			>4.5.2 - Configurando os discos</a>
  <li><a href="#Hostname"		>4.5.3 - Configurando o nome do
      host</a>
  <li><a href="#Network"		>4.5.4 - Configurando a rede</a>
  <li><a href="#InstMedia"		>4.5.5 - Escolhendo a mídia de
      instalação</a>
  <li><a href="#Filesets"		>4.5.6 - Escolhendo o conjunto
d63 1
a63 1
  <li><a href="#Finish"		 	>4.5.7 - Finalizando</a>
d70 3
a72 2
<li><a href="#Multibooting"	>4.8 - Boot múltiplo com OpenBSD/i386</a>
<li><a href="#SendDmesg"	>4.9 - Enviando o seu dmesg para
d74 2
a75 2
<li><a href="#AddFileSet"	>4.10 - Adicionando arquivos após a
    instalação</a>
d77 1
a77 2
<li><a href="#InstProb"		>4.12 - Problemas comuns de
    instalação</a>
d81 6
a86 6
  <li><a href="#noboot"			>4.12.2 - Meu i386 não dá boot
      após a instalação</a>
  <li><a href="#sshhang"		>4.12.3 - Minha máquina dá boot,
      mas para na geração de chaves do OpenSSH</a>
  <li><a href="#noftplist"		>4.12.4 - Eu recebo a mensagem
      "Failed to change directory" quando executo a instalação</a>
d88 1
a88 1
      partição do fdisk está corrompida ou vazia!</a>
d93 1
a93 1
<li><a href="#site"		>4.13 - Customizando o processo de
d95 2
a96 2
<li><a href="#Multiple"		>4.14 - Como eu instalo um número
    similar de sistemas?</a>
d110 1
a110 1
Muitas plataformas possuem procedimentos de instalação similares;
d113 2
a114 2
específico da sua plataforma, no diretório <i>"plataforma"</i> do CD-ROM
ou site FTP (por exemplo, <tt>i386/INSTALL.i386</tt>,
d120 2
a121 3
disco de RAM pré-carregado.
Após esse kernel ser carregado, o sistema operacional é extraído de
alguns arquivos
d128 3
a130 4
São fornecidas imagens de disquetes para a criação de
disquetes de instalação em outro sistema
<a href="#UnixFlop">compatível com Unix</a>, ou em um sistema
<a href="#DosFlop">Windows</a>.
d135 3
a137 4
Em diversas plataformas, uma imagem de CD-ROM
(<tt>cd45.iso</tt> para apenas inicializar, ou <tt>install45.iso</tt>
para a instalação completa) é disponibilizada para a criação de um
CD-ROM inicializável.
d141 2
a142 2
inicialização de uma partição já existente do OpenBSD para uma
atualização ou reinstalação.
d144 1
a144 1
<li><b>Rede:</b> Algumas plataformas suportam boot pela rede
d146 1
a146 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=diskless&amp;sektion=8">método de boot pela rede</a>).
d148 2
a149 2
<li><b>Escrevendo uma imagem do sistema de arquivo para o disco
(miniroot):</b> uma imagem do sistema de arquivo pode ser escrita em
d160 1
a160 1
os métodos de boot:
d163 2
a164 2
<li><a href="../../alpha.html"><b>alpha:</b></a> Disquete, CD-ROM,
rede, escrevendo uma imagem de disquete no disco.
d179 2
a180 2
<li><a href="../../landisk.html"><b>landisk:</b></a> miniroot,
instalada utilizando outro computador.
d182 3
a184 4
<li><a href="../../mac68k.html"><b>mac68k:</b></a> Boot utilizando
ferramentas que rodam no Mac OS. Veja
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.5/mac68k/INSTALL.mac68k">INSTALL.mac68k</a>
para mais detalhes.
d191 2
a192 2
<li><a href="../../mvme88k.html"><b>mvme88k:</b></a> Rede,
fita inicializável.
d194 2
a195 3
<li><a href="../../sparc.html"><b>sparc:</b></a> Disquete, CD-ROM,
rede, escrevendo uma imagem em uma partição swap existente,
fita inicializável.
d198 1
a198 1
(somente U1/U2), CD-ROM, rede, escrevendo uma imagem em uma partição
d203 3
a205 4
<li><a href="../../zaurus.html"><b>zaurus:</b></a> Inicializa bsd.rd
a partir de uma partição Linux. Veja
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.5/zaurus/INSTALL.zaurus">INSTALL.zaurus</a>
para detalhes.
d209 2
a210 2
Todas as plataformas podem usar um
<a href="#bsd.rd">bsd.rd</a> para reinstalação ou atualização.
d213 2
a214 3
Uma vez que o kernel estiver carregado, você possui diversas opções
para obter o
<a href="#FilesNeeded">conjunto de arquivos de instalação</a>.
d226 1
a226 1
do OpenBSD ou seu próprio servidor FTP local.
d230 2
a231 1
do OpenBSD ou seu próprio servidor HTTP local.
d234 1
a234 1
Em muitos casos, você pode instalar o conjunto de arquivos a partir de
d236 5
a240 5
Por exemplo, em <a href="../../i386.html">i386</a>,
você pode instalar a partir de uma partição FAT ou de um CD-ROM
formatado em ISO9660, Rock Ridge ou Joliet.
Em alguns casos, você terá que montar manualmente o sistema de
arquivos para depois poder usar.
d243 2
a244 2
Algumas plataformas suportam o uso de pontos de montagem NFS para usar
o conjunto de arquivos.
d247 2
a248 2
O conjunto de arquivos pode ser lido pelo sistema a partir de uma fita.
Detalhes da criação da fita estão no documento
d256 1
a256 1
Antes de você começar a instalação, você deve ter uma idéia do que
d259 1
a259 1
Você deve conhecer pelo menos os seguintes itens abaixo.
d267 1
a267 1
      hardware, e confirmar quando o OpenBSD as requerer.
d272 3
a274 3
  <li>Se feito localmente, você necessitará ter um
      <a href="#Partitioning">espaço suficiente</a> disponível
      para a árvore de fontes e para construí-la.
d278 1
a278 1
<li>Disposição desejada do disco
d281 3
a283 3
  <li>O OpenBSD deverá co-existir com outro SO neste sistema?
      Se sim, como ambos serão carregados?
      Você precisará instalar um "gerenciador de boot/inicialização"?
d300 1
a300 1
<h2>4.3 - Criando uma mídia bootável de instalação do OpenBSD</h2>
d309 2
a310 2
A plataforma <a href="../../i386.html">i386</a> possui seis imagens
de disco, separadas para a instalação, que podem ser escolhidas:
d313 4
a316 4
<li><b><tt>floppy45.fs</tt></b> (PC Desktop) suporta várias
    placas de rede PCI e ISA, suporte a IDE e simples adaptadores SCSI
    e algumas placas PCMCIA. A maioria dos usuários usam essa imagem
    para iniciar a instalação a partir do disquete.
d328 7
a334 7
    hardware pode inicializar a partir do CDROM.
<li><b><tt>cdemu45.iso</tt></b> é uma imagem ISO9660, usa
    "emulação de disquete" para a inicialização, usando a imagem de
    disquete de 2.88M. Espera-se que poucos usuários necessitem dessa
    imagem -- a maioria deverá usar a <tt>cd45.iso</tt>, use somente a
    <tt>cdemu45.iso</tt> se a <tt>cd45.iso</tt> não funcionar.
<li><b><tt>install45.iso</tt></b> é uma imagem ISO9660, contendo todos
d340 4
a343 4
Sim, existem situações em que pode ser necessário um disco para dar
suporte a um adaptador SCSI e outro disco para suporte a sua placa de
rede. Felizmente, isso é um evento raro, e na maioria das vezes pode ser
contornado.
d346 2
a347 2
A plataforma <a href="../../sparc.html">sparc</a> possui quatro
imagens de disco, separadas para instalação, que podem ser escolhidas:
d355 1
a355 1
<li><b><tt>install45.iso</tt></b> é uma imagem ISO9660, contendo todos
d363 1
a363 1
<h3>4.3.1 - Criando disquetes no Unix</h3>
d368 1
a368 1
tanto para formatar quanto para checar blocos defeituosos.
d380 1
a380 1
está provavelmente com problemas, tente outra vez com um disco novo.
d389 1
a389 1
Se você já possui um disquete limpo e formatado, então é hora de
d403 3
a405 3
para ter certeza de que a imagem copiada é igual à original.
Se o disquete for igual à imagem original, você verá somente um
outro prompt.
d413 1
a413 1
<h3>4.3.2 - Criando disquetes no Windows</h3>
d416 2
a417 2
Esta seção descreve como gravar imagens de instalação em sistemas
Windows.
d423 3
a425 3
Para preparar o disquete no Windows, primeiramente use uma
ferramenta nativa para formatar o disquete, verificando se o
disco não contém setores ruins.
d441 1
a441 1
<h3>4.3.3 - Criando um CD-ROM</h3>
d454 2
a455 2
    parte do pacote cdrtools encontrado no <a href="faq15.html"> Sistema
    de Pacotes e Ports do OpenBSD</a>.
d457 1
a457 1
    utilizando a opção de gravação "track at once" (tao).
d461 1
a461 1
<h2>4.4 - Carregando a mídia de instalação do OpenBSD</h2>
d463 1
a463 1
<h3>Inicializando i386/amd64</h3>
d465 1
a465 1
Carregar uma imagem de instalação em plataformas i386 e amd64 não é
d467 2
a468 2
Se você está usando um disquete, simplesmente insira ele no drive
e inicialize seu sistema.
d472 6
a477 6
configurar as opções de boot para permitir a inicialização pelo CD.
Algumas BIOS antigas não possuem essa opção, nesse caso você deve
utilizar um disquete para carregar a imagem de instalação.
Não se preocupe; mesmo que você use o disquete para inicializar,
você ainda pode instalar pelo CD se ele é suportado pelo OpenBSD
(ou seja, praticamente todos os drives IDE).
d480 1
a480 2
Você também pode instalar carregando o
<a href="#bsd.rd">bsd.rd</a>
d484 1
a484 1
<h3>Inicializando sparc/sparc64</h3>
d487 3
a489 2
Nas plataformas <a href="../../sparc64.html">sparc64</a>, somente as
máquinas SBus (Ultra 1, Ultra 2) carregam a partir do disquete.
d492 3
a494 3
Para inicialização por disquete, coloque o disquete com a imagem
de instalação do OpenBSD dentro do drive.
Então use os comandos abaixo para inicializar:
d503 3
a505 3
drive.
Normalmente, você pode inicializar a partir do drive de CDROM de um
sistema Sun digitando '<tt>boot cdrom</tt>' no prompt de inicialização:
d513 3
a515 3
Naturalmente, isso funcionará somente no modo novo de comando.
Se você está usando um modo de comando antigo (seta para direita),
digite 'n' para o novo modo de comando.
d517 2
a518 3
não terá o novo modo de comando.
Nesse caso, você precisa experimentar.)
Se você possui múltiplas unidades de CD-ROM, você precisa iniciar a
d520 1
a520 2
(ou <tt>probe-ide</tt> em sistemas mais novos) do novo modo de
comando.
d535 2
a536 2
Determine a partir de qual unidade de CD-ROM você vai querer
inicializar. Preste atenção no número ("target") da unidade.
d545 1
a545 1
<h2>4.5 - Executando a instalação</h2>
d547 1
a547 1
<h3>4.5.1 - Iniciando a instalação</h3>
d554 1
a554 2
fortemente compactado -- qualquer setor ruim pode causar
problemas.
d558 3
a560 3
o processo de instalação corrente pressionando CTRL-C e reiniciar
novamente a instalação digitando <tt>install</tt> no prompt de
comando sem reiniciar a máquina.
d563 3
a565 3
Quando a sua inicialização é bem sucedida, você verá uma quantidade
de mensagens de texto correndo em sua tela.
Esse texto, em azul e branco em muitas arquiteturas, é o
d569 1
a569 1
dele fica salva em <tt>/var/run/dmesg.boot</tt>.
d587 1
a587 1
    intactas nesse processo, como por exemplo <tt>/home</tt>, mas
d590 1
a590 1
    arquivos</a> na máquina, mas não sobrescreve nenhuma
d593 1
a593 2
    e <tt>/var</tt> não são sobrescritos.
    Algumas notas importantes:
d595 26
a620 26
    <li> Você não terá a opção de instalar o arquivo
    <tt>etc45.tgz</tt>.
    Depois de instalar, você terá que efetuar
    <a href="../upgrade45.html#etcUpdates">manualmente</a> as
    mudanças em <tt>etc45.tgz</tt> antes de seu sistema se tornar
    funcional.
    Essa é uma etapa importante que deve ser feita, senão
    serviços chaves (tais como o
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a>)
    podem não funcionar.

<li>O processo de atualização não é projetado para saltar releases!
    Isso frequentemente funciona, mas não é suportado.
    Para o OpenBSD 4.5, atualizar do 4.4 para o 4.5 é a única
    atualização recomendada.
    Se você quer atualizar uma versão mais antiga, uma reinstalação
    completa é recomendada.

</ul>
<!-- XXXversion -->
Mais informações sobre atualizações entre releases podem ser encontradas
no <a href="../upgrade45.html">Guia de Upgrade do OpenBSD 4.5</a>.

<li><b>Shell:</b> Às vezes você precisa executar reparos ou
    manutenção em seu sistema que não carrega (ou não deve carregar) um
    kernel normal.
d627 1
a627 1
Depois do <i>"dia da marcação"</i>, não é possível atualizar
d631 2
a632 2
Neste exemplo, nós faremos uma instalação, mas o processo
de atualização é similar.
d650 3
a652 4
Na maioria dos casos, o terminal padrão é o mais apropriado; no
entanto, se você está usando um
<a href="faq7.html#SerCon">console serial</a> para instalar,
não escolha o padrão, responda adequadamente.
d655 1
a655 2
Se você não escolher o layout do seu teclado, US será assumido
por padrão.
d669 2
a670 2
Se você escolher a opção padrão aqui, o processo de instalação
será abortado e um prompt de comando será mostrado.
d673 1
a673 1
As notas de instalação referenciadas podem ser encontradas
d675 2
a676 2
<tt>INSTALL.<i>&lt;plat&gt;</i></tt>, onde <i>&lt;plat&gt;</i> é sua
<a href="../../pt/plat.html">plataforma</a>, por exemplo: <tt>i386</tt>.
d679 1
a679 1
<h3>4.5.2 - Configurando os discos</h3>
d682 2
a683 2
Usuários com um grande disco rígido (maior do que era comum quando seu
computador foi fabricado) vão querer ver
d694 3
a696 3
Primeiro, a fatia do disco rígido referente ao OpenBSD é
definida utilizando o fdisk(8), então esta fatia é subdividida
em partições usando o disklabel(8).
d700 6
a705 6
acontece porque nós estamos usando a palavra "partição"
em dois sentidos diferentes.
Existem duas camadas de partição em diversas plataformas
do OpenBSD, a primeira, que pode ser considerada a partição
dos Sistemas Operacionais, que permite que múltiplos SOs definam
o seu espaço em disco, e a segunda, onde a partição do
d708 1
a708 1
Windows, e qualquer outro SO que use esse tipo de particionamento,
d725 7
a731 7
O disco raiz (root) é de onde o sistema é carregado e onde
normalmente a swap reside. Discos IDE são mostrados como
<tt>wd0</tt>, <tt>wd1</tt>, etc., discos SCSI e dispositivos RAID
são mostrados como <tt>sd0</tt>, <tt>sd1</tt>. Todos os discos que o
OpenBSD localizou são mostrados aqui -- se você possui um disco
que não foi exibido aqui, você possui um hardware não
suportado ou mal configurado.
d740 7
a746 6
para o OpenBSD. O resultado será um "Master Boot Record" válido e uma
tabela de partição escrita no disco -- uma partição, do tamanho do
disco rígido inteiro, configurada com o tipo de partição OpenBSD,
e marcada como partição inicializável. Essa é a escolha mais comum
para usuários que usam o OpenBSD como sistema de produção; no entanto,
existem alguns sistemas em que isso não pode ser feito.
d748 1
a748 1
deixam uma partição para "manutenção" ou "de reserva", que deve ser
d751 4
a754 3
Porém, se seu sistema possui um disco novo que nunca foi usado,
você provavelmente irá responder "yes" (ou usar a opção "update" do
fdisk), assim você terá uma assinatura de boot válida.
d759 1
a759 1
deixaremos a opção padrão "no", que nos fará usar o programa
d769 2
a770 2
não vai passar por esta etapa, e irá pular diretamente para
<a href="#disklabel">criando uma subpartição (disklabel)</a>.
d813 2
a814 2
    partição existente, cria uma grande partição OpenBSD cobrindo o
    disco inteiro, marca a partição como ativa, e instala o código MBR
d819 3
a821 3
    partição atual em setores. "<tt>p m</tt>" mostrará a tabela de
    partição em megabytes, "<tt>p g</tt>" mostrará a tabela de
    partição em gigabytes.
d825 4
a828 4
    como ativa, de onde o OpenBSD será carregado.
<li><b><tt>u</tt></b> ou <b><tt>update:</tt></b> Atualiza a MBR com
    o código de boot do OpenBSD, similar à "<tt>reinit</tt>", exceto que
    esse comando não altera a tabela de partição existente.
d830 1
a830 1
    comando, porque certos usuários ainda não se habituaram ao uso do
d834 1
a834 1
Vale a pena ressaltar aqui o seguinte, um erro neste ponto resultará em
d837 1
a837 1
sem dados significativos, e também possuir um backup.
d845 2
a846 2
que é 3148740, apenas adicionando o início do setor existente (63) com
o seu tamanho (3148677).
d849 1
a849 1
Você pode editar a disposição do disco utilizando a notação
d852 1
a852 1
trabalhar em torno de uma partição já existente, usar o formato
d855 1
a855 1
será melhor.
d897 3
a899 3
Em plataformas que usam fdisk,
é importante que a primeira partição salte a primeira trilha do disco,
<i>nesse caso</i>, iniciando no setor <tt>63</tt>.
d902 3
a904 4
Se a partição é criada iniciando no setor <tt>0</tt>, a tabela de
partição terminará em cima da <a href="faq14.html#Boot386">
"Partição Boot Record"</a> da partição do OpenBSD, sobrescrevendo a
mesma.
d909 3
a911 3
Note que o prompt indica mudanças ainda não salvas, marcando
com um asterisco ('<tt>*</tt>'). Como podemos ver com a saída
de <tt>p&nbsp;m</tt>, nós não alteramos a partição do Windows, e
d917 1
a917 1
o OpenBSD possa ser carregado na próxima reinicialização:
d950 1
a950 1
<h3>Criando uma subpartição (disklabel)</h3>
d953 2
a954 2
para criar as subpartições (fatias) na partição do OpenBSD.
Mais detalhes de uso do disklabel(8) podem ser encontradas na
d1008 1
a1008 1
<li><b><tt>p</tt></b> - Exibe na tela a subpartição atual, e você
d1012 14
a1025 15
<li><b><tt>D</tt></b> - Limpa qualquer subpartição existente, cria
    uma nova subpartição padrão que cobre apenas a partição atual do
    OpenBSD. Isso é útil no caso do disco já possuir uma subpartição
    nele, e a partição do OpenBSD for recriada com um tamanho diferente
    -- a subpartição antiga não pode ser removida, e isso pode causar
    confusão.

<li><b><tt>m</tt></b> - Modifica uma entrada existente na subpartição.
    Nunca superestime o que isso pode fazer por você. Enquanto ele pode
    alterar o tamanho de uma subpartição, ele NÃO altera o sistema de
    arquivos do disco rígido.
    Usar essa opção e esperar que ele altere magicamente o tamanho da
    subpartição é uma boa maneira de perder grandes quantidades de
    dados.
    No entanto, essa opção e o
a1027 1
 
d1031 3
a1033 3
Dividir o seu disco de maneira apropriada é muito importante. A
resposta à pergunta "Como eu devo particionar meu sistema?" é
"Exatamente como você precisa". Isso varia de aplicação para aplicação.
d1047 1
a1047 1
de arquivos root (/).
d1052 1
a1052 1
Se uma partição 'b' existe no disco raiz, ela será automaticamente usada
d1056 1
a1056 1
 
d1058 3
a1060 3
Após pensar um pouco, nós decidimos criar apenas as partições
recomendadas para o sistema de arquivos (<tt>/, /tmp, /var, /usr,
/home</tt>) junto com a partição de swap:
d1064 4
a1067 4
<li><i><b>wd0d: /tmp</b></i> - 120M. A <tt>/tmp</tt> é usada para
    criação de alguns softwares, 120M será o bastante para a
    maioria das ocasiões.
<li><i><b>wd0e: /var</b></i> - 80M.  Se esse fosse um servidor Web ou
d1070 8
a1077 8
<li><i><b>wd0g: /usr</b></i> - 6G.  Nós queremos essa partição grande
    para guardar algumas aplicações de usuários, além de habilitar
    atualizações e reconstruções do sistema através do código fonte, se
    necessário ou desejado. A
    <a href="faq15.html#Ports">Árvore de Ports</a> estará aqui também,
    a qual necessitará de 250M de espaço antes dos ports serem
    construídos. Se você está planejando construir muitas aplicações a
    partir do código fonte, usando o <a href="faq15.html#Ports">ports</a>
d1084 2
a1085 2
Agora, se você adicionar as subpartições conforme acima, você vai ver
que ainda sobram 6G de espaço não utilizado! O espaço não utilizado
d1087 3
a1089 3
alguma subpartição no futuro, se necessário. A <i>/tmp</i> precisa
de mais espaço? Crie uma nova subpartição no espaço vazio, formate
a nova partição com o
d1091 1
a1091 1
>newfs(8)</a>, e modifique o
d1156 4
a1159 4
Você notará que a subpartição <i>c</i> parece ter sido ignorada.
Essa subpartição é o seu disco rígido inteiro; não tente alterá-la.
Você notará também que a subpartição <i>i</i> não foi definida por nós;
essa é a partição pré-existente do Windows 2000. Subpartições não são
d1162 1
a1162 1
das subpartições (até a letra <i>p</i>) estão disponíveis para uso como
d1165 2
a1166 2
<h3>Configurando os pontos de montagem e formatando seu sistema de
arquivos</h3>
d1168 1
a1168 1
Vem agora a configuração final dos seus pontos de montagem. Se você
d1171 2
a1172 2
este passo consiste em verificar as suas seleções; senão, você pode
especificar eles agora.
d1218 4
a1221 4
Você pode querer saber por que o instalador pergunta outra vez pelos
pontos de montagem. Isso permite que você recupere erros ou enganos
nos pontos de montagem especificados durante a criação das subpartições.
Por exemplo, o processo de instalação irá apagar automaticamente todos
d1223 1
a1223 1
a configuração das subpartições. O programa disklabel permitirá que
d1225 3
a1227 3
checadas antes de sair do programa. Apagar pontos de montagem
duplicados resultará em partições sem pontos de montagem, nessas você
deve atribuir novos pontos de montagem se deseja utilizar o espaço.
d1231 7
a1237 6
proceed?" -- "Você tem certeza que deseja continuar? " --
por padrão está configurada para "no" -- "não" --, assim você terá que
dizer deliberadamente para continuar e formatar as suas subpartições.
Se você escolher não, você simplesmente será jogado em uma linha de
comando e poderá reiniciar novamente o processo de instalação digitando
"install", ou reiniciando seu computador com um disco de inicialização.
d1240 2
a1241 2
Neste ponto todas as subpartições serão formatadas para você. Isso pode
levar algum tempo dependendo do tamanho das mesmas e da velocidade do
d1245 1
a1245 1
<h3>4.5.3 - Configurando o nome do host</h3>
d1247 6
a1252 6
Agora você irá configurar o nome do host. Esse valor, junto com o nome
de domínio DNS (especificado <a href="#Network">abaixo</a>), serão
salvos no arquivo <tt>/etc/myname</tt>, que será usado durante a
inicialização para configurar o nome do host. Se você não configurar
o nome de domínio do seu sistema, o valor padrão 'my.domain' será
usado.
d1256 1
a1256 1
para a geração das chaves criptográficas para o seu sistema na primeira
d1266 1
a1266 1
<h3>4.5.4 - Configurando a rede</h3>
d1269 3
a1271 3
Agora é hora de configurar a sua rede. A rede deve ser configurada
se você está planejando fazer uma instalação baseada em FTP ou NFS,
considerando que estas são baseadas nas informações que você colocará
d1273 2
a1274 2
Aqui está um caminho completo através da seção de configuração da rede
do processo de instalação.
d1276 1
a1276 1
a cabo, configurada para usar DHCP, a outra interface será para nossa
d1306 1
a1306 1
  DNS domain name? (e.g. 'bar.com') [my.domain] <b>example.com</b>
d1318 1
a1318 1
configurar manualmente as outras interfaces após a instalação.
d1321 1
a1321 1
Agora vamos especificar a senha para o usuário root:
d1339 1
a1339 1
<h3>4.5.5 - Escolhendo a mídia de instalação</h3>
d1342 1
a1342 1
Após configurar a rede, o programa de instalação lhe dará a
d1357 1
a1357 1
Neste exemplo, nós vamos instalar a partir do CD-ROM. Vai ser mostrada
d1359 1
a1359 1
identificados como CD-ROM. Muitas pessoas possuem somente um.
d1361 1
a1361 1
se fazer a instalação do OpenBSD.
d1382 1
a1382 1
<h3>4.5.6 - Escolhendo o conjunto de arquivos.</h3>
d1386 1
a1386 1
conseguir uma descrição destes arquivos na
d1389 7
a1395 7
quais arquivos serão instalados. Por padrão, todos os arquivos não-X
são selecionados; no entanto, alguns usuários avançados podem querer
instalar somente o mínimo requerido para rodar o OpenBSD, que são os
arquivos <tt>base45.tgz</tt>, <tt>etc45.tgz</tt> e <tt>bsd</tt>.
A maioria das pessoas vão querer instalar o conjunto padrão de arquivos
ou o conjunto de todos os arquivos. O exemplo abaixo é o da instalação
completa.
d1437 5
a1441 5
removeria todos os componente do X, se você mudasse de idéia.
Nesse caso, nós selecionamos todos os arquivos. Enquanto o
sistema irá funcionar com um conjunto de arquivos menor, em vez de
começar com o padrão é recomendado instalar todo o conjunto de arquivos.
Mais detalhes sobre a seleção do conjunto de arquivos estão
d1445 4
a1448 3
Após escolher os arquivos que deseja instalar, você será questionado
para confirmar se deseja instalar os arquivos.
Uma barra de progresso lhe informará quanto tempo isso levará.
d1450 1
a1450 1
os arquivos que serão instalados, e a velocidade da mídia fonte.
d1489 4
a1492 4
Neste ponto você pode adicionar arquivos de outra fonte
(incluindo <a href="#site">arquivos customizados</a>) se desejar, ou
digitar '<tt>done</tt>', se você já instalou todos os arquivos que
necessita.
d1495 1
a1495 1
<h3>4.5.7 - Finalizando</h3>
d1500 4
a1503 4
deve ser carregado na inicialização do seu sistema.
Geralmente, você vai querer o sshd(8) rodando, mas ocasionalmente pode
não querer. Se o seu uso do sistema não necessitar do sshd(8), há uma
pequena vantagem teórica de segurança nisso.
d1511 1
a1511 1
(Se você mudar de idéia mais tarde, altere o
d1516 1
a1516 1
Você terá a opção de carregar o
d1530 4
a1533 4
Se você tem um servidor de tempo local, você pode especificar ele aqui,
se você escolher "default", o OpenNTPD irá usar <tt>pool.ntp.org</tt>,
uma enorme coleção de servidores de tempo de acesso livre.
(Se você mudar de idéia mais tarde, altere o
d1538 1
a1538 1
Em algumas plataformas lhe é perguntado se deseja rodar o X.
d1542 2
a1543 2
Algumas plataformas não farão esta pergunta. Se você não pretende
executar o X ou não tem certeza, responda 'N', se mudar de idéia basta
d1546 2
a1547 2
desabilitado, pois as engines gráficas das placas de vídeo dos
computadores modernos podem ser usadas para alterar a memória, sem
d1572 3
a1574 3
A sua última tarefa será configurar o fuso horário ("time zone").
Dependedo de onde a sua máquina vive, existem diversas respostas
válidas a essa pergunta. No exemplo que segue, nós usamos
d1576 2
a1577 2
<tt>US/Michigan</tt> e teríamos o mesmo resultado. Digitando <tt>?</tt>,
o prompt lhe mostrará uma lista com possíveis escolhas.
d1605 2
a1606 2
Se você necessita de precisão, pode querer ler
<a href="faq8.html#NTPerror">isto</a>.
d1611 2
a1612 2
especialmente aqueles que possuem pouca quantidade de RAM), e
instalar o setor de inicialização ("boot blocks").
d1639 2
a1640 2
O OpenBSD agora está instalado no seu sistema e está pronto para a
primeira inicialização, mas antes que você a faça...
d1644 1
a1644 1
<h4>Antes do reboot</h4>
d1647 2
a1648 3
melhor você checar a <a href="../../errata.html">
página Errata</a> para ver se existe alguma falha que possa lhe causar
algum dano.
d1651 2
a1652 1
Um truque que você pode usar "antes da primeira inicialização" é rodar:
d1657 1
a1657 1
Isso ajustará seus pontos de montagem para ser o que seriam em uma
d1662 1
a1662 1
<h4>Depois do reboot</h4>
d1670 1
a1670 1
Você também pode achar útil os seguintes links:
d1672 1
a1672 1
<li><a href="faq10.html#AddDelUser">Adicionando usuários no OpenBSD</a>
d1674 3
a1676 3
<li><a href="faq2.html#ManPages">Páginas de manuais de comandos
    populares e mais usados</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi">Páginas de manuais
d1678 1
a1678 1
<li><a href="faq15.html">Sistema de Ports e Pacotes do OpenBSD para
d1685 1
a1685 1
muito apreciado por eles, e no final das contas, por todos os usuários.
d1693 4
a1696 3
Uma instalação completa do OpenBSD é dividida em um número separado
de <i>conjunto de arquivos</i>. Nem todas as aplicações necessitarão
de todos os arquivos. Aqui você tem uma visão geral de cada um:
d1709 1
a1709 1
      ferramentas, cabeçalhos (headers) e bibliotecas.
d1714 1
a1714 1
      documentos de configuração
d1720 1
a1720 1
  <li><b><i>xfont45.tgz</i></b>  - Contém o servidor de fonte do X11 e
d1722 3
a1724 3
  <li><b><i>xserv45.tgz</i></b>  - Contém os servidores X11
  <li><b><i>xshare45.tgz</i></b> - Contém páginas de manuais,
      configurações locais, includes, etc. para o X
d1727 4
a1730 4
Os arquivos <b>etc45.tgz</b> e <b>xetc45.tgz</b> não são instalados
como parte de uma atualização, somente como parte de uma instalação
completa, assim nenhuma customização que você fizer será perdida.
Você terá que atualizar manualmente seus diretórios
d1750 1
a1750 1
    quiser, então a presença ou ausência do conjunto de arquivos
d1752 1
a1752 1
<li>As únicas partes do xbase45.tgz que estão rodando são as partes
d1762 3
a1764 3
repetido a cada ciclo de atualizações, o que significa que provavelmente
você não atualizará corretamente o seu sistema, criando problemas de
segurança REAIS.
d1770 1
a1770 1
Note que compilar a partir do código frequentemente irá exigir que mais
d1778 1
a1778 2
<h2> 4.7 - De quanto espaço eu preciso para uma instalação do
    OpenBSD?</h2>
d1796 2
a1797 2
Esses números incluem tamanho extra para permitir um típico sistema
desktop conectado à internet, não mais que isso.
d1807 8
a1814 8
<li>Esses números NÃO incluem a árvore de ports.
<li>Se você planeja instalar uma parte significativa de software,
    faça uma partição <tt>/usr</tt> grande. Isso depende das aplicações,
    é claro.
<li>Para sistemas que manipulam grandes quantidades de e-mail ou páginas
    web (respectivamente armazenadas em <tt>/var/mail</tt> e
    <tt>/var/www</tt>) você irá fazer a sua partição <tt>/var</tt> bem
    grande, ou colocá-los em partições separadas.
d1816 3
a1818 3
    arquivos de log, você irá fazer a sua partição <tt>/var</tt> com um
    tamanho cômodo, ou criar uma partição separada para os arquivos de
    log (<tt>/var/log</tt>).
d1823 1
a1823 1
<li>Compilar alguns <a href="faq15.html#Ports">ports</a> a partir do
d1828 4
a1831 4
<li>A partição <tt>/tmp</tt> é usada para a compilação de ports,
    entre outras coisas, um bom tamanho para o /tmp depende do que você
    vai fazer com ela. 50M pode ser de bom tamanho para a maioria dos
    usuários, mas algumas aplicações requerem 100M ou mais de espaço na
d1841 1
a1841 1
    Você não quer seu sistema rodando sempre com RAM+swap, você deve
d1844 2
a1845 2
    Se você está usando um dispositivo flash, você provavelmente não vai
    querer uma partição swap.
d1847 1
a1847 1
    Se você pensar errado, pode-se adicionar posteriormente outra
d1854 1
a1854 1
    maior que sua memória principal. Após o reboot,
d1856 1
a1856 1
    tentará salvar o conteúdo da sua swap no arquivo
d1865 1
a1865 1
    enorme arquivo que você edita.
d1867 1
a1867 1
    ou <tt>/var/tmp</tt> precisará ser maior do que você provavelmente
d1872 1
a1872 1
Há diversas razões para usar sistemas de arquivos separados, em vez
d1877 3
a1879 4
    como 'nosuid', 'nodev', 'noexec', 'readonly', etc. Isso agora é
    feito pelo processo de instalação se você usar as partições
    descritas acima.
<li><b>Estabilidade</b>: Um usuário, ou um programa qualquer, podem
d1881 1
a1881 1
    escrever nele. Seus programas principais que, é claro, rodam em
d1885 1
a1885 1
    de arquivos ffs que o OpenBSD usa, não tem tendência à
d1895 6
a1900 7
    dentro da partição raíz, a partição raíz deve estar dentro dessa
    área.
    Para mais detalhes, veja <a href="faq14.html#LargeDrive"> esta seção
    </a>. Um bom guia vai dizer para você manter a sua partição /
    completamente abaixo de 2G, a menos que você saiba que sua
    plataforma (e máquina particular) pode manipular mais (ou menos)
    do que isso.
d1909 1
a1909 1
     algumas características de segurança do OpenBSD que requer
d1916 1
a1916 1
     separado) para o sistema de log.
d1918 1
a1918 1
     do Sistema Operacional? Limpe e reinstale tudo, deixando a sua
d1922 1
a1922 1
     quantidades de arquivos que necessitam serem removidos: pode
d1924 6
a1929 6
     a FAQ <a href="faq5.html#ProbObjPt">Construindo a partir do
     código</a> para um exemplo (<tt>/usr/obj</tt>).
 <li>Se você deseja construir o seu sistema a partir do código, por
     qualquer razão, o código fonte encontra-se em <tt>/usr/src</tt>.
     Se você não deseja criar uma partição separada para
     <tt>/usr/src</tt>, tenha certeza que <tt>/usr</tt> terá espaço
d1935 1
a1935 1
     não alocado. Se você mudar o tamanho de uma partição, você pode
d1944 1
a1944 1
     hora de fazer a atualização do seu sistema.
d1946 1
a1946 1
     que for executar a checagem do sistema de arquivos utilizando
d1948 1
a1948 1
     ele irá requerer 1MB de RAM por gigabyte do sistema de arquivo,
d1950 2
a1951 2
     sistemas de arquivos muito antigos.
     (Veja <a href="faq14.html#LargeDrive">esta seção</a>).
d1953 2
a1954 2
     (ou seja, páginas web pessoais), você talvez deseje o pôr em uma
     partição separada, assim você pode usar
d1956 3
a1958 3
     utilizado pelos usuários, e se a partição ficar cheia,
     nenhuma outra parte do seu sistema será comprometida.
<li>Você pode querer criar uma partição <tt>/altroot</tt>, como
d1968 1
a1968 1
    disco, o software
d1970 1
a1970 1
    ou uma cópia periódica usando
d1979 1
a1979 1
<h2>4.8 - Boot múltiplo com OpenBSD/i386</h2>
d1981 10
a1990 10
Boot múltiplo ("multiboot") é ter diversos sistemas operacionais
em um só computador, e meios de selecionar qual OS é para inicializar.
Isso <i>não</i> é uma tarefa trivial! Se você não compreender o que está
fazendo, você pode acabar apagando grandes quantidades de dados do
seu computador. Novos usuários do OpenBSD são <i>fortemente</i>
incentivados a começar em uma máquina dedicada com um disco rígido
sem dados, e então praticar as suas configurações em um sistema de
testes antes de se aventurar em uma configuração multiboot em uma
máquina em produção. A <a href="faq14.html">FAQ 14</a> possui mais
informações sobre o processo de boot do OpenBSD.
d1994 2
a1995 2
para inicializar o OpenBSD (ou seja, partições estendidas não irão
funcionar).
d1998 1
a1998 1
Estão aqui diversas opções de  multibooting:
d2000 19
a2018 18
<h3>Configurando partições ativas</h3>
Este é provavelmente o mais negligenciado e às vezes a melhor
solução para multibooting. Simplesmente ative a partição que você está
usando atualmente se esta for a do SO que você deseja carregar no
próximo boot. Virtualmente todos os SOs oferecem um programa para
fazer isso; o do OpenBSD é o
<a href="faq14.html#fdisk">fdisk(8)</a>, programas similares existem
para sistemas Windows 9x e DOS, e muitos outros sistemas operacionais.
Isso pode ser altamente desejável para um SO que leve muito tempo para
desligar ou reiniciar -- você pode configurá-lo e iniciar o processo de
reboot, então caminhe um pouco, pegue um copo de café e volte
para o sistema inicializado do jeito que você queria -- sem esperar
pelo Momento Mágico de selecionar o próximo SO.

<h3>Disquete de Boot</h3>
Se você possui um sistema que não usa frequentemente o OpenBSD
(ou não deseja que usuários deste computador notem qualquer mudança),
considere ter um disquete de inicialização (boot floppy). Simplesmente
d2020 2
a2021 2
<a href="#MkFlop">Disquetes de instalação padrão do OpenBSD</a>,
e crie o arquivo <tt>/etc/boot.conf</tt> (sim, você também terá que
d2028 7
a2034 7
para o caso de o sistema iniciar do disco rígido 0, partição OpenBSD
'a', arquivo do kernel <tt>/bsd</tt>. Note que você também pode dar
boot a partir de outros discos rígidos, com uma linha como:
"<tt>boot hd2a:/bsd</tt>", para dar boot a partir do terceiro disco
rígido do seu sistema. Para iniciar o OpenBSD, coloque seu disquete
dentro do drive e reinicie a máquina. Para iniciar outro SO, retire o
disquete do drive, e reinicie.
d2037 1
a2037 1
Neste caso, o programa
d2041 5
a2045 5
instrui o boot(8) a partir de onde carregar o kernel -- neste caso, o
primeiro HD que a BIOS vê. Mantenha em mente que somente o pequeno
arquivo (<tt>/boot</tt>) é carregado a partir do disquete -- o sistema
carrega o kernel do disco rígido, adicionando somente 5 segundos ao
processo de boot.
d2049 7
a2055 6
Para multiboot do OpenBSD e Windows NT/2000/XP, você pode usar NTLDR, o
carregador de boot que o NT usa. Para multi-boot com NT, você precisa
ter uma cópia da sua "Partition Boot Record" (PBR) do OpenBSD. Depois
de executar o installboot, você pode copiar o arquivo usando o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=1">dd(1)</a>,
seguindo um procedimento similar ao seguinte:
d2063 2
a2064 2
diretamente em muito computadores, ficando para o leitor adaptá-lo as
suas necessidades.
d2067 2
a2068 2
Agora inicie o NT e ponha <tt>openbsd.pbr</tt> em C:. adicione a linha,
assim como esta aqui, no final de <tt>C:\BOOT.INI</tt>:
d2075 2
a2076 2
Quando você reiniciar, você pode carregar o OpenBSD a partir do menu
loader do NT.
d2078 2
a2079 2
<a href="http://www.tburke.net/info/ntldr/ntldr_hacking_guide.htm">NTLDR
Hacking Guide.</a>
d2082 2
a2083 2
No Windows XP você pode editar as informações de boot usando uma
interface gráfica (GUI); veja
d2085 1
a2085 1
XP Boot.ini HOWTO</a>.
d2088 2
a2089 1
Programas que fazem isso para você estão disponíveis, por exemplo, o
d2091 3
a2093 3
Esse programa pode ser executado em Windows NT/2000/XP. Ele buscará o
OpenBSD PBR, e o colocará na sua partição NT/2000/XP, e adicionará ele
no <tt>C:\BOOT.INI</tt>
d2096 4
a2099 4
Note: O boot loader do Windows NT/2000/XP só é capaz de dar boot em
sistemas operacionais que se encontram no primeiro disco rígido.
Você não pode usar o boot loader do Windows para iniciar o OpenBSD a
partir de um disco secundário.
d2111 1
a2111 1
Uma vez que a PBR do OpenBSD está copiada na partição do sistema Vista,
d2155 1
a2155 1
inicializa o Sistema Operacional correspondente.
d2173 1
a2173 1
<a href="http://neosmart.net/dl.php?id=1">EasyBSD</a> fornece uma
a2178 4
O seguinte foi verificado utilizando o Windows 7 Release Candidate Build
7100.

<p>
d2186 1
a2186 1
Depois de copiar a PBR do OpenBSD na partição do sistema do Windows 7,
d2226 1
a2226 1
<h3>Outros boot loaders</h3>
d2229 2
a2230 2
Alguns bootloaders que os usuários do OpenBSD usam com sucesso são:
<a href="http://gag.sourceforge.net/">GAG</a>,
d2241 1
a2241 1
que possui instruções de como fazer o OpenBSD funcionar com Linux.
d2245 2
a2246 1
configurado para UTC (Universal Coordinated Time).
d2248 1
a2248 1
configurado para a hora local.
d2257 1
a2257 1
<h2>4.9 - Enviando o seu dmesg para dmesg@@openbsd.org depois da
d2262 1
a2262 1
saber que hardware funciona, e qual não funciona perfeitamente.
d2281 6
a2286 6
Certifique-se de enviar o e-mail a partir de uma conta que esteja
habilitada a receber e-mails dos desenvolvedores, para que eles possam
entrar em contato se tiverem algo que queiram testar ou mudar afim
de tornar funcional no OpenBSD.
Não é importante enviar o e-mail da mesma máquina que está rodando o
OpenBSD, se essa máquina for incapaz de receber o e-mail,
d2296 2
a2297 1
onde <tt>your-account@@yourmail.dom</tt> é a sua conta de e-mail.
d2303 4
a2306 4
<li>Por favor, só mande dmesg do kernel GENERIC.
    Kernels customizados, que possuem drivers de dispositivos removidos,
    não são úteis.
<li>Se você possui um sistema multiprocessado e roda o kernel
d2308 2
a2309 2
    do seu dmesg, tanto do kernel GENERIC como do kernel GENERIC.MP,
    então por favor, mande ambos em e-mails separados.
d2312 3
a2314 3
    para rejeitar spams. Isso faz com que o seu e-mail não seja recebido
    por um período de tempo. Tenha paciência, depois de meia hora
    ou até uma hora, nós o receberemos.
d2319 3
a2321 2
sistema de e-mail no OpenBSD, você pode salvar a sua saída do dmesg em
um arquivo de texto e mandar para os desenvolvedores do OpenBSD.
d2327 5
a2331 5
Então transfira o arquivo (usando FTP/scp/disquete/carrier-pigeon/...)
para o sistema que você normalmente usa para e-mail. Como a saída
do dmesg que você envia é processada automaticamente, tenha certeza
de checar os seguintes itens quando usar clientes/sistemas de e-mail
alternativos.
d2333 2
a2334 2
<li>Configure o seu e-mail para enviar mensagens somente em texto plano;
    não use HTML na formatação do seu e-mail.
d2336 5
a2340 5
    Muitos clientes de e-mail s&atilde;o configurados para inserir
    quebra de linha quando chegam a coluna 72 (a norma para listas de
    e-mail).
<li>Tenha certeza de que seu cliente de e-mail não irá reformatar a
    mensagem.
d2342 1
a2342 1
    Coloque a saída do seu dmesg no corpo da mensagem de e-mail.
d2347 1
a2347 1
<h2>4.10 - Adicionando um conjunto de arquivos após a instalação</h2>
d2349 1
a2349 1
"Oh não! Eu esqueci de adicionar um conjunto de arquivos durante a
d2354 3
a2356 3
verifica que necessita de outros conjuntos de arquivos. Boa notícia: há
duas maneiras fáceis de instalar o conjunto de arquivos após a
instalação inicial:
d2358 1
a2358 1
<h3>Usando o processo de atualização</h3>
d2360 4
a2363 4
e escolha Upgrade (em vez de Install). Quando você ver a lista de
arquivos de instalação, escolha somente os arquivos que você não
escolheu na primeira instalação, selecione a origem, e então deixe
eles serem instalados para você.
d2365 2
a2366 2
<h3>Usando tar(1)</h3>
O conjunto de arquivos de instalação são simples arquivos tar, e você
d2381 5
a2385 4
para adicionar conjuntos de arquivos não instalados. Isso não funciona.
pkg_add(1) é para
<a href="faq15.html#PkgMgmt">instalação de pacotes</a>, não para
arquivos tar genéricos como os do conjunto de instalação.
d2388 3
a2390 3
Se você está instalando o conjunto de arquivos <tt>xbase</tt> pela
primeira vez no seu sistema, usando o tar(1) e sem reiniciar, o cache de
bibliotecas compartilhadas precisa ser atualizado usando o
d2400 2
a2401 2
Alternativamente, você pode apenas reiniciar seu sistema, e isso será
feito automaticamente pelo script de inicialização
d2415 2
a2416 2
depois do boot do <tt>bsd.rd</tt> são armazenados no kernel, e são
executados a partir de um sistema de arquivos baseado em RAM.
d2421 1
a2421 1
Em algumas plataformas, <tt>bsd.rd</tt> é atualmente a técnica
d2423 4
a2426 4
de arquivos existente, inicia com ele, e executa a instalação a
partir dele. Na maioria das plataformas, se você está executando uma
versão antiga do OpenBSD, você pode pegar por FTP uma versão nova de
<tt>bsd.rd</tt>, reiniciar a máquina com ele, e instalar uma nova
d2430 2
a2431 2
Aqui está um exemplo de inicialização com <tt>bsd.rd</tt> em um
sistema i386:
d2444 1
a2444 1
pode executar um shell e fazer a manutenção do seu sistema.
d2455 2
a2456 1
<i>Alguns</i> sistemas Compaq não detectam corretamente toda a RAM pelo
d2458 3
a2460 3
boot loader de segundo estágio do OpenBSD</a>, e somente 16M são
detectados e utilizados pelo OpenBSD. Isso pode ser corrigido pela
criação/edição do arquivo
d2462 1
a2462 1
ou entrando com o seguinte comando depois de "<tt>boot></tt>", antes que
d2472 1
a2472 1
problema, você primeiramente entraria com o comando acima no prompt
d2474 3
a2476 3
o sistema, reiniciaria, e criaria o arquivo <tt>/etc/boot.conf</tt>
com a linha de comando acima para que nas próximas inicializações toda
a memória RAM já estivesse disponível.
d2483 1
a2483 1
<h3>4.12.2 - Meu i386 não inicia após a instalação</h3>
d2485 1
a2485 1
inicialização, você não vê nem sinal do OpenBSD. Há algumas razões
d2490 3
a2492 3
    Para solucionar esse problema, reinicie a sua máquina usando um
    disquete de boot ou outra mídia, e "marque" a partição como "ativa"
    ("bootable").
d2496 2
a2497 1
<li><b>Nenhum boot loader válido foi colocado no disco.</b>
d2501 5
a2505 4
    "Master Boot Record" do disco; senão, o código existente do master
    boot estaria intocado. Isso será um problema se nenhum outro
    "boot record" existir. Uma solução é inicializar outra vez com a
    mídia de instalação, entrar em um prompt do shell e executar
d2515 4
a2518 5
<li><b> Em algumas raras ocasiões, algo pode dar errado com o segundo
    estágio de instalação do gerenciador de boot.</b>
    A reinstalação do segundo estágio do gerenciador de boot é discutido
    <a href="faq14.html#InstBoot">aqui</a>.

d2522 2
a2523 2
<h3>4.12.3 - Minha (velha e lenta) máquina inicia, mas não passa do
ssh-keygen</h3>
d2527 1
a2527 1
<i>várias horas</i> para terminar os três passos de
d2532 5
a2536 5
Note que o tamanho padrão da chave cresceu para o OpenBSD 3.8, então
os tempos de geração das chaves estão mais demorados do que costumavam
ser. Usuários de máquinas lentas geram suas chaves em outro
computador (mais rápido), então colocam as chaves geradas em
<a href="#site">site45.tgz</a> e instalam elas com o resto do sistema.
d2540 2
a2541 2
<h3>4.12.4 - Eu recebo a mensagem "Failed to change directory" durante
a instalação</h3>
d2564 1
a2564 1
para encontrar o seu espelho favorito, e entre manualmente com o nome
d2572 7
a2578 6
<h3>4.12.5 - Minha tabela de partições do fdisk está corrompida ou vazia!</h3>
Ocasionalmente, o usuário achará que o sistema irá funcionar, mas
quando executa <tt>fdisk wd0</tt>, eles verão uma tabela de partição
completamente vazia (ou algumas vezes, bagunçada). Isso geralmente é
causado por ter sido criada uma partição
utilizando o <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>,
d2585 2
a2586 2
O sistema então <a href="faq14.html#Boot386">inicializa</a>
usando a PBR, e não a MBR, para o processo de boot.
d2590 6
a2595 6
problema durante manutenções, e deve ser consertada.
Para consertar isso, o sistema de arquivo do disco deve geralmente
ser recriado do zero (no entanto, se você REALMENTE saiba o que
está fazendo, você pode apenas recriar o rótulo de disco (disklabel)
e a MBR, e apenas perder e ter que reconstruir a primeira partição
OpenBSD no disco).
d2600 2
a2601 2
Algumas pessoas podem querer rodar o OpenBSD em computadores que não
possuem nenhum jeito óbvio de instalar o OpenBSD.
d2626 2
a2627 3
    O OpenBSD irá então inicializar na máquina de destino, embora você
    terá que, possivelmente, ajustar a configuração de rede.

d2638 1
a2638 1
<h2>4.13 - Customizando o processo de instalação</h2>
d2642 5
a2646 4
O script de instalação/atualização do OpenBSD permite a seleção de um
conjunto de arquivos criado pelo usuário, chamado "<tt>siteXX.tgz</tt>",
onde XX é a versão (por exemplo, 45). O arquivo <tt>siteXX.tgz</tt> é,
como outro <a href="#FilesNeeded">conjunto de arquivos</a>,
d2648 12
a2659 10
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gzip&amp;sektion=1">gzip(1)</a> e
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tar&amp;sektion=1">tar(1)</a>
e armazenado na partição '/', e descomprimido como qualquer outro
conjunto de arquivos com as opções <tt>xzphf</tt>. Esse conjunto de
arquivos será instalado por último, depois de todos os outros arquivos.

<p>
Esse conjunto de arquivos habilita o usuário a adicionar e/ou
sobrescrever o conjunto de arquivos instalados de forma 'normal' e
então customizar a instalação ou a atualização.
d2662 2
a2663 2
Você pode criar um conjunto de instalação específico para cada máquina,
chamado <tt>siteXX-<i>&lt;hostname&gt;.tgz</i></tt>,
d2665 2
a2666 2
Isso possibilita instalações customizadas, upgrades, ou recuperação do
sistema.
d2669 1
a2669 1
Alguns exemplos do uso do arquivo <tt>siteXX.tgz</tt>:
d2679 1
a2679 1
    cada uma delas. A instalação (por exemplo: máquinas com diferentes
d2683 2
a2684 2
<li>Coloque os arquivos que você customiza rotineiramente em um mesmo
    siteXX.tgz  -- arquivos
d2688 2
a2689 1
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf.local&amp;sektion=8"><tt>/etc/rc.conf.local</tt></a>, etc.
d2692 9
a2700 9
<h3><tt>install.site</tt>/<tt>upgrade.site</tt> scripts</h3>
Como último passo no processo de instalação/atualização, o script
procura no diretório raiz do sistema recém-instalado por
<tt>install.site</tt> ou <tt>upgrade.site</tt>, o mais apropriado para o
processo atual, e executa esse script num ambiente
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&amp;sektion=8">chroot</a>ed
para a raiz do sistema instalado/atualizado. Lembre-se, a atualização
é feita a partir de um sistema de arquivos inicializado, então o seu
sistema de arquivos alvo está montado atualmente no diretório
d2708 1
a2708 1
coisas que funcionam hoje podem não funcionar em uma release futura.
d2713 2
a2714 2
pode ser colocado no diretório raiz antes da atualização, ou pode
ser colocado em um arquivo <tt>siteXX.tgz</tt>.
d2719 1
a2719 1
<li>Remover arquivos que estão instalados/atualizados mas que
d2723 1
a2723 1
    os pacotes).
d2725 1
a2725 1
    do sistema recém-instalado antes de você expô-lo ao resto do mundo.
d2727 1
a2727 1
    para configurar a hora do seu sistema.
d2733 2
a2734 2
amplas capacidades de customização sem precisar construir seus próprios
conjuntos de instalação.
d2739 2
a2740 3
no diretório de fontes, para que ele fique disponível na hora da
instalação. Isso não é necessário para ftp ou outras formas de
instalação.
d2748 1
a2748 1
<h3>Arquivos <tt>siteXX.tgz</tt> e <tt>install/upgrade.site</tt> </h3>
d2751 1
a2751 1
<h3>Restaurando com dump(8)</h3>
d2753 2
a2754 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore(8)</a>
, que pode ser usado para recuperar backups feitos com
d2756 1
a2756 1
Assim, você poderia inicializar a partir de um
d2758 2
a2759 2
<a href="../../orders.html">CD</a>, ou
<a href="#bsd.rd">bsd.rd</a> e então executar
d2761 1
a2761 1
<a href="faq14.html#disklabel">disklabel</a> e
d2765 2
a2766 3
<a href="faq14.html#InstBoot">blocos de boot (boot blocks)</a>. Mais
detalhes
<a href="faq14.html#Backup">aqui</a>.
d2769 3
a2771 3
Infelizmente, não há nenhum pacote conhecido de softwares que criem
imagem de discos com suporte ao FFS, e que criem imagens contendo apenas
o espaço ativo do arquivo. A maioria das soluções existentes tratarão a
d2774 2
a2775 2
de espaço -- uma partição <tt>/home</tt> de 10G irá requerer 10G de
espaço na imagem, mesmo que não haja um único arquivo na partição.
d2790 2
a2791 2
Quando for <a href="../../report.html">relatar um problema</a>, é
necessário incluir o
d2793 1
a2793 1
Entretanto, quando você necessita fazer isso, é porque o sistema não
d2796 2
a2797 2
pegar o dmesg e enviar à
<a href="../../mail.html">lista de e-mail</a> apropriada.
d2801 4
a2804 4
<li><b>Disquete:</b> Discos de boot e CD-ROM possuem ferramentas que
possibilitam gravar o seu dmesg em um disquete MSDOS para depois ser
lido em outra máquina. Coloque um disquete formatado em MSDOS no drive
e execute os comandos abaixo:
d2813 2
a2814 2
frequentemente, o disquete de boot tem bastante espaço para conter o
dmesg. Nesse caso, tire a opção "<tt>-t msdos</tt>" acima.
d2820 1
a2820 1
particularmente se o computador trava logo após o boot.
d2822 1
a2822 1
(como um cabo null-modem), e um programa emulador de terminal para
d2826 4
a2829 3
Informações gerais de configuração de console serial são discutidos em
<a href="faq7.html#SerCon">outra parte nesta FAQ</a>; em geral para
capturar o log da instalação, o comando abaixo é o suficiente.
d2834 1
a2834 1
No prompt do carregador de boot, digite
d2844 1
a2844 1
Isso dirá ao OpenBSD para usar a primeira porta serial (também chamada
d2851 4
a2854 5
Essas máquinas usarão automaticamente um console serial se iniciadas
sem um teclado.
Se você possui um teclado e um monitor unidos, você pode ainda forçar
o sistema a usar um console serial com o seguinte comando no prompt
<tt>ok</tt>.
d2870 2
a2871 2
<a href="faq3.html">[Seção 3 - Começando com o OpenBSD]</a>
<a href="faq5.html">[Seção 5 - Construindo o sistema a partir do Código Fonte]</a>
d2882 2
a2883 2
Originally [OpenBSD: faq4.html,v 1.282 ]<br>
$Translation: faq4.html,v 1.20 2009/08/20 09:33:22 alan Exp $<br>
@


1.12
log
@Sync with Steelix CVS
@
text
@d2087 1
a2087 1
Quando você reinicar, você pode carregar o OpenBSD a partir do menu
d2112 123
d2236 5
a2245 1
OS-BS,
d2889 2
a2890 2
Originally [OpenBSD: faq4.html,v 1.280 ]<br>
$Translation: faq4.html,v 1.18 2009/06/02 18:32:56 alan Exp $<br>
@


1.11
log
@Sync with Steelix CVS
@
text
@d2581 6
a2586 4
arquivos. Uma vez que esse script é executado apenas depois que todos os
arquivos estão instalados, você tem uma funcionalidade quase completa
do seu sistema (apesar de em modo monousuário) quando seu script
é executado.
d2600 2
a2601 1
    que você deseja no sistema instalado.
d2762 2
a2763 2
Originally [OpenBSD: faq4.html,v 1.279 ]<br>
$Translation: faq4.html,v 1.17 2009/05/12 00:31:16 alan Exp $<br>
@


1.10
log
@Sync with Steelix CVS -- we are back to normal operation!
@
text
@d4 1
a4 1
<title>4 - OpenBSD 4.4 Guia de Instalação</title>
d16 1
a16 1
<body bgcolor="#ffffff" text="#000000">
d24 1
a24 1
<font color="#0000e0">
d27 1
a27 1
<a href="faq5.html">[Seção 5 - Construindo o Sistema a partir do Código]</a>
d30 1
a30 1
<h1><font color="#e00000">4 - Guia de Instalação do OpenBSD 4.4</font></h1>
d46 1
a46 1
        Windows ou DOS</a>
d90 2
d104 2
a105 2
<a name="Overview"></a>
</p><h2>4.1 - Visão geral do processo de instalação do OpenBSD</h2>
d133 2
a134 2
<a href="#DosFlop">DOS/Windows</a>.
Os nomes dos arquivos são tipicamente <tt>floppy44.fs</tt>, embora
d139 1
a139 1
(<tt>cd44.iso</tt> para apenas inicializar, ou <tt>install44.iso</tt>
d188 1
a188 1
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.4/mac68k/INSTALL.mac68k">INSTALL.mac68k</a>
d211 1
a211 2
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.4/zaurus/
INSTALL.zaurus">INSTALL.zaurus</a>
d229 1
a229 1
também pode usar o arquivo <tt>install44.iso</tt> ou pode também fazer
d320 1
a320 1
<li><b><tt>floppy44.fs</tt></b> (PC Desktop) suporta várias
d324 1
a324 1
<li><b><tt>floppyB44.fs</tt></b> (Servidores) suporta diversos
d328 1
a328 1
<li><b><tt>floppyC44.fs</tt></b> (Laptops) suporta diversos
d330 1
a330 1
<li><b><tt>cd44.iso</tt></b> é uma imagem ISO9660 que pode ser usada
d336 1
a336 1
<li><b><tt>cdemu44.iso</tt></b> é uma imagem ISO9660, usa
d339 3
a341 3
    imagem -- a maioria deverá usar a <tt>cd44.iso</tt>, use somente a
    <tt>cdemu44.iso</tt> se a <tt>cd44.iso</tt> não funcionar.
<li><b><tt>install44.iso</tt></b> é uma imagem ISO9660, contendo todos
d357 2
a358 2
<li><b><tt>floppy44.fs:</tt></b> Suporte para sistemas com disquete.
<li><b><tt>cd44.iso</tt></b> Uma imagem ISO usada para criar seu próprio
d360 1
a360 1
<li><b><tt>miniroot44.fs</tt></b> Pode ser escrito em uma partição swap
d362 1
a362 1
<li><b><tt>install44.iso</tt></b> é uma imagem ISO9660, contendo todos
d404 1
a404 1
  # <b>dd if=floppy44.fs of=/dev/rfd0c bs=32k</b>
d416 1
a416 1
  # <b>cmp /dev/rfd0c floppy43.fs</b>
d420 1
a420 1
<h3>4.3.2 - Criando disquetes no Windows ou DOS</h3>
d424 1
a424 1
Windows ou DOS.
d426 2
a427 3
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.4/tools/">tools</a>
em qualquer espelho FTP, ou no diretório <tt>4.4/tools</tt> encontrado
no CD1 do conjunto de CDs do OpenBSD.
d430 3
a432 2
Para preparar o disquete no MS-DOS ou Windows, primeiramente use uma
ferramenta nativa para formatar o disquete.
d436 1
a436 28
usar <i>rawrite</i>, <i>fdimage</i> ou <i>ntrw</i>.
O <i>rawrite</i> não funciona em Windows NT, 2000 ou XP.

<p>
Note que <tt>FDIMAGE.EXE</tt> e <tt>RAWRITE.EXE</tt> são ambos
aplicativos MS-DOS, e limitam os nomes de arquivos segundo a convenção
MS-DOS "8.3".
Tanto <tt>floppyB43.fs</tt> quanto <tt>floppyC43.fs</tt> possuem nomes
de arquivos longos, você terá que descobrir como seu sistema armazenou
os arquivos em "formato 8.3" antes de usar o <tt>FDIMAGE.EXE</tt> ou
<tt>RAWRITE.EXE</tt> para criar seu disquete de inicialização.

<p>
Exemplo de uso do <i>rawrite</i>:
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  C:\> <b>rawrite</b>
  RaWrite 1.2 - Write disk file to raw floppy diskette

  Enter source file name: <b>floppy44.fs</b>
  Enter destination drive: <b>a</b>
  Please insert a formatted diskette into drive A: and press -ENTER- : <i><b>Enter</b></i>
</pre></td></tr></table>

<p>
Exemplo de uso do <i>fdimage</i>:
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  C:\> <strong>fdimage -q floppy44.fs a:</strong>
</pre></td></tr></table>
d441 1
a441 1
  C:\> <strong>ntrw floppy44.fs a:</strong>
d451 2
a452 2
Você pode criar um CD-ROM usando o arquivo <tt>cd43.iso</tt> ou
<tt>install44.iso</tt>.
d483 2
a484 1
você ainda pode instalar pelo CD.
d510 3
a512 2
drive. Se o seu Sun possui apenas uma unidade de CD-ROM, então apenas
vá para o prompt, onde você pode digitar '<tt>boot cdrom</tt>':
d527 2
a528 1
partir da unidade correta. Tente <tt>probe-scsi</tt> do novo modo de
d607 4
a610 4
    <tt>etc44.tgz</tt>.
    Depois de instalar, você terá que
    <a href="upgrade44.html#etcUpdates">manualmente</a> efetuar as
    mudanças em <tt>etc44.tgz</tt> antes de seu sistema se tornar
d619 1
a619 1
    Para o OpenBSD 4.4, atualizar do 4.3 para o 4.4 é a única
d627 1
a627 1
no <a href="../upgrade44.html">Guia de Upgrade do OpenBSD 4.4</a>.
d647 1
a647 1
  Welcome to the OpenBSD/i386 4.4 install program.
d966 1
a966 1
Mais detalhes de uso do disklabel(8) podem ser encontradas no
d1063 3
a1065 3
Geralmente, você irá querer também uma partição swap 'b', você pode
deixá-la inativa se tem certeza que a memória do seu sistema nunca
vai se esgotar.
d1222 1
d1225 4
a1228 8
  /dev/wd0h on /mnt/home type ffs (rw, asynchronous, local, nodev, nosuid, ctime=T
  ue Oct 21 00:36:28 2008)
  /dev/wd0d on /mnt/tmp type ffs (rw, asynchronous, local, nodev, nosuid, ctime=Tu
  e Oct 21 00:36:28 2008)
  /dev/wd0g on /mnt/usr type ffs (rw, asynchronous, local, nodev, ctime=Tue Oct 21
   00:36:28 2008)
  /dev/wd0e on /mnt/var type ffs (rw, asynchronous, local, nodev, nosuid, ctime=Tu
  e Oct 21 00:36:28 2008)
d1386 1
a1386 1
  Pathname to the sets?  (or 'done') [4.4/i386] <b><i>Enter</i></b>
d1391 2
a1392 2
de instalação, que é <tt>4.4/i386/</tt> no CD-ROM oficial ou no CD
construído a partir da imagem <tt>install44.iso</tt>.
d1405 1
a1405 1
arquivos <tt>base44.tgz</tt>, <tt>etc44.tgz</tt> e <tt>bsd</tt>.
d1419 11
a1429 11
          [X] base44.tgz
          [X] etc44.tgz
          [X] misc44.tgz
          [X] comp44.tgz
          [X] man44.tgz
          [X] game44.tgz
          [ ] xbase44.tgz
          [ ] xetc44.tgz
          [ ] xshare44.tgz
          [ ] xfont44.tgz
          [ ] xserv44.tgz
d1435 11
a1445 11
          [X] base44.tgz
          [X] etc44.tgz
          [X] misc44.tgz
          [X] comp44.tgz
          [X] man44.tgz
          [X] game44.tgz
          [X] xbase44.tgz
          [X] xetc44.tgz
          [X] xshare44.tgz
          [X] xfont44.tgz
          [X] xserv44.tgz
d1470 1
a1470 1
  100% |**************************************************|  6700 KB    00:03    
d1472 1
a1472 1
  100% |**************************************************|  5404 KB    00:01    
d1474 23
a1496 23
  100% |**************************************************|  6750 KB    00:02    
  Getting base44.tgz ...
  100% |**************************************************| 42904 KB    00:27    
  Getting etc44.tgz ...
  100% |**************************************************|   631 KB    00:00    
  Getting misc44.tgz ...
  100% |**************************************************|  2866 KB    00:02    
  Getting comp44.tgz ...
  100% |**************************************************| 78575 KB    00:43    
  Getting man44.tgz ...
  100% |**************************************************|  7552 KB    00:07    
  Getting game44.tgz ...
  100% |**************************************************|  2552 KB    00:01    
  Getting xbase44.tgz ...
  100% |**************************************************|  9486 KB    00:05    
  Getting xetc44.tgz ...
  100% |**************************************************| 75434       00:00    
  Getting xshare44.tgz ...
  100% |**************************************************|  2672 KB    00:05    
  Getting xfont44.tgz ...
  100% |**************************************************| 34747 KB    00:16    
  Getting xserv44.tgz ...
  100% |**************************************************| 19816 KB    00:10    
d1584 1
a1584 1
A sua última tarefa será configurar a zona de tempo ("time zone").
d1700 1
a1700 1
<a name="FilesNeeded"></a>
d1715 1
a1715 1
  <li><b><i>base44.tgz</i></b>	- Contém o sistema base do OpenBSD
d1717 1
a1717 1
  <li><b><i>etc44.tgz</i></b>	- Contém todos os arquivos de /etc
d1719 1
a1719 1
  <li><b><i>comp44.tgz</i></b>	- Contém o compilador e suas
d1722 1
a1722 1
  <li><b><i>man44.tgz</i></b>    - Contém as páginas de manuais
d1724 1
a1724 1
  <li><b><i>misc44.tgz</i></b>   - Contém informações diversas,
d1726 4
a1729 3
  <li><b><i>game44.tgz</i></b>   - Contém jogos para o OpenBSD
  <li><b><i>xbase44.tgz</i></b>  - Contém a base para instalar o X11
  <li><b><i>xetc44.tgz</i></b>   - Contém os arquivos de configuração
d1731 1
a1731 1
  <li><b><i>xfont44.tgz</i></b>  - Contém o servidor de fonte do X11 e
d1733 2
a1734 2
  <li><b><i>xserv44.tgz</i></b>  - Contém os servidores X11
  <li><b><i>xshare44.tgz</i></b> - Contém páginas de manuais,
d1738 1
a1738 1
Os arquivos <b>etc44.tgz</b> e <b>xetc44.tgz</b> não são instalados
d1744 2
a1745 1
<p>
d1748 36
a1783 3
bibliotecas gráficas do <b>xbase44.tgz</b> estejam instaladas no seu
sistema. Essa dependência pode ser facilmente resolvida
instalando <b>xbase44.tgz</b>, o resto do X não é necessário.
d1788 1
a1788 1
<a name="SpaceNeeded"></a>  <!-- XXXobsolete tag -->
d1872 1
a1872 1
    Mas sejamos realistas, poucos desenvolvedores quererão analizar o
d1967 1
a1967 1
     (i.e., páginas web pessoais), você talvez deseje o pôr em uma
d1992 1
a1992 1
<a name="Multibooting"></a>
d2003 1
a2003 1
máquina em produção. O <a href="faq14.html">FAQ 14</a> possui mais
d2008 1
a2008 1
para inicializar o OpenBSD (i.e., partições estendidas não irão
d2128 1
a2128 1
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.4/i386/INSTALL.linux">INSTALL.linux</a>,
d2131 1
a2131 1
<h3>Problemas com a zona do tempo</h3>
d2139 1
a2139 1
Mais informações sobre como fazer isso estão no
d2143 1
a2143 1
<a name="SendDmesg"></a>
d2237 1
a2237 1
Às vezes você acha que necessita realmente só de <tt>comp44.tgz</tt>
d2257 1
a2257 1
  # tar xzvphf comp44.tgz
d2275 1
a2275 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ldconfig&amp;section=8"
d2286 1
a2286 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;apropos=0&amp;sektion=0"
d2408 4
a2411 5
ssh. Uma SPARCStation2 ou um Macintosh Quadra pode levar 45 minutos
ou mais para terminar os três passos de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-keygen&amp;sektion=1">ssh-keygen(1)</a>,
algumas máquinas levarão algum tempo para fazer isso. Deixe-o terminar;
isso só é feito uma vez por instalação.
d2418 1
a2418 1
<a href="#site">site44.tgz</a> e instalam elas com o resto do sistema.
d2478 41
d2526 2
a2527 2
onde XX é a versão (ex. 44). O arquivo <tt>siteXX.tgz</tt> é,
como outro <a href="faq4.html#FilesNeeded">conjunto de arquivos</a>,
d2543 1
a2543 1
"<tt>site44-puffy.tgz</tt>" por exemplo.
d2704 1
a2704 1
<a href="faq7.html#SerCon">outra parte neste FAQ</a>; em geral para
a2741 5
<p>
<li><b>FTP:</b>  Sob algumas circunstâncias, você pode usar o cliente
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1">ftp(1)</a>
    do disquete de boot ou CD-ROM para enviar o dmesg a um servidor FTP
    local, e recuperá-lo mais tarde.
d2745 1
a2745 1
<font color="#0000e0">
d2748 1
a2748 1
<a href="faq5.html">[Seção 5 - Construindo o sistema a partir do Código]</a>
d2759 2
a2760 2
Originally [OpenBSD: faq4.html,v 1.274 ]<br>
$Translation: faq4.html,v 1.15 2009/03/31 00:40:12 dsantos Exp $<br>
@


1.9
log
@Sync with Steelix CVS
@
text
@d4 1
a4 1
<title>4 - Guia de Instala&ccedil;&atilde;o do OpenBSD 4.4</title>
d11 1
a11 2
<meta name= "copyright"     content= "This document copyright 1998-2008
by OpenBSD.">
d16 1
a16 1
<body bgcolor= "#ffffff" text= "#000000">
d19 2
a20 2
<img alt="[OpenBSD]" height=30 width=141
src="../../images/smalltitle.gif" border="0">    
d24 4
a27 6
<font color= "#0000e0">
<a href= "index.html">[&Iacute;ndice do FAQ]</a>
<a href= "faq3.html">[Para a Se&ccedil;&atilde;o 3 - Come&ccedil;ando no
OpenBSD]</a>
<a href= "faq5.html">[Para a Se&ccedil;&atilde;o 5 - Compilando o
Sistema a partir dos Fontes]</a>
d30 1
a30 2
<h1><font color="#e00000">4 - Guia de Instala&ccedil;&atilde;o do
OpenBSD 4.4</font></h1>
d34 1
a34 1
<h3>Conte&uacute;do</h3>
d36 6
a41 7
<li><a href= "#Overview"    >4.1 - Vis&atilde;o geral do procedimento de
instala&ccedil;&atilde;o do OpenBSD</a>
<li><a href= "#Checklist"   >4.2 - Lista de verifica&ccedil;&atilde;o
pr&eacute;-instala&ccedil;&atilde;o</a>

<li><a href="#MkInsMedia"   >4.3 - Criando uma m&iacute;dia
boot&aacute;vel de instala&ccedil;&atilde;o do OpenBSD</a>
d43 6
a48 4
    <li><a href="#UnixFlop" >4.3.1 - Criando disquetes no Unix</a>
    <li><a href="#DosFlop"  >4.3.2 - Criando disquetes no Windows ou
DOS</a>
    <li><a href="#MkCD-ROM" >4.3.3 - Criando um CD de boot</a>
d50 3
a52 4
<li><a href="#Boot"         >4.4 - Bootando a m&iacute;dia de
instala&ccedil;&atilde;o do OpenBSD</a>
<li><a href="#Install"      >4.5 - Executando a
instala&ccedil;&atilde;o</a>
d54 11
a64 10
  <li><a href="#Start"      >4.5.1 - Come&ccedil;ando a
instala&ccedil;&atilde;o</a>
  <li><a href="#Disks"      >4.5.2 - Configurando discos</a>
  <li><a href="#Hostname"   >4.5.3 - Configurando o hostname do
sistema</a>
  <li><a href="#Network"    >4.5.4 - Configurando a rede</a>
  <li><a href="#InstMedia"  >4.5.5 - Escolhendo a m&iacute;dia de
instala&ccedil;&atilde;o</a>
  <li><a href="#Filesets"   >4.5.6 - Escolhendo pacotes de arquivos</a>
  <li><a href="#Finish"     >4.5.7 - Terminando</a>
d67 12
a78 13
<li><a href= "#FilesNeeded" >4.6 - Que arquivos s&atilde;o
necess&aacute;rios para a instala&ccedil;&atilde;o?</a>
<li><a href= "#Partitioning">4.7 - De quanto espa&ccedil;o eu preciso
para instalar o OpenBSD?</a>
<li><a href= "#Multibooting">4.8 - Boot m&uacute;ltiplo com o
OpenBSD/i386</a>
<li><a href= "#SendDmesg"   >4.9 - Enviando seu dmesg para
dmesg@@openbsd.org ap&oacute;s a instala&ccedil;&atilde;o</a>
<li><a href= "#AddFileSet"  >4.10 - Adicionando pacotes de arquivos
ap&oacute;s a instala&ccedil;&atilde;o</a>
<li><a href= "#bsd.rd"      >4.11 - O que &eacute; 'bsd.rd'?</a>
<li><a href= "#InstProb"    >4.12 - Problemas comuns de
instala&ccedil;&atilde;o</a>
d80 10
a89 10
  <li><a href="#cpq16m"     >4.12.1 - Meu Compaq reconhece apenas 16M de
RAM</a>
  <li><a href="#noboot"     >4.12.2 - Meu i386 n&atilde;o d&aacute; boot
ap&oacute;s a instala&ccedil;&atilde;o</a>
  <li><a href="#sshhang"    >4.12.3 - Minha m&aacute;quina bootou, mas
parou no processo de gera&ccedil;&atilde;o de chaves SSH</a>
  <li><a href="#noftplist"  >4.12.4 - Obtive a mensagem "Failed to
change directory" ao executar a instala&ccedil;&atilde;o</a>
  <li><a href="#blankfdisk" >4.12.5 - Minha tabela de
parti&ccedil;&otilde;es do fdisk est&aacute; corrompida ou vazia!</a>
d91 7
a97 6
<li><a href= "#site"        >4.13 - Customizando o processo de
instala&ccedil;&atilde;o</a>
<li><a href= "#Multiple"    >4.14 - Como posso instalar v&aacute;rios
sistemas similares?</a>
<li><a href="#getdmesg"     >4.15 - Como posso obter a sa&iacute;da do
dmesg(8) para reportar um problema de instala&ccedil;&atilde;o?</a>
d102 29
a130 34
<a name= "Overview"></a>
<h2>4.1 - Vis&atilde;o geral do procedimento de instala&ccedil;&atilde;o
do OpenBSD</h2>

<p>
O OpenBSD possui um robust e adapt&aacute;vel procedimento de
instala&ccedil;&atilde;o em modo texto, e pode ser instalado
atrav&eacute;s de um &uacute;nico disquete.
A maior parte das plataformas segue um procedimento de
instala&ccedil;&atilde;o similar; no entanto, h&aacute; algumas
diferen&ccedil;as nos detalhes.
Em todos os casos, voc&ecirc; deve ler o documento INSTALL
espec&iacute;fico para cada plataforma no diret&oacute;rio
<i>platform</i> do CD-ROM ou dos sites FTP (por exemplo,
<tt>i386/INSTALL.i386</tt>, <tt>mac68k/INSTALL.mac68k</tt> ou
<tt>sparc/INSTALL.sparc</tt>).

<p>
O processo de instala&ccedil;&atilde;o do OpenBSD usa um kernel especial
com algumas ferramentas e scripts de instala&ccedil;&atilde;o embarcados
em um RAM disk pr&eacute;-carregado.
Ap&oacute;s o boot deste kernel, o sistema operacional &eacute;
extra&iacute;do de um n&uacute;mero de arquivos 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=tar&amp;sektion=1">tar(1)</a>
(<tt>.tgz</tt>) de uma fonte diferente do RAM disk pr&eacute;-carregado.
H&aacute; v&aacute;rias formas de boot deste kernel de
instala&ccedil;&atilde;o:

<ul>
<li><b>Disquete:</b>
Imagens de disquete s&atilde;o disponibilizadas, com as quais se pode
criar um disquete de instala&ccedil;&atilde;o em outro sistema
<a href="#UnixFlop">Unix-like</a>, ou em um sistema
d132 2
a133 3
Nomes t&iacute;picos de arquivo s&atilde;o <tt>floppy44.fs</tt>, embora
diversas plataformas possuam m&uacute;ltiplas imagens de disquete
dispon&iacute;veis.
d135 5
a139 4
<li><b>CD-ROM:</b> Em diversas plataformas uma imagem de CD-ROM
(<tt>cd44.iso</tt> apenas para boot, ou <tt>install44.iso</tt> para a
instala&ccedil;&atilde;o completa) &eacute; disponibilizada, permitindo
a cria&ccedil;&atilde;o de um CD-ROM boot&aacute;vel.
d141 4
a144 4
<li><b>Parti&ccedil;&atilde;o existente:</b> O kernel <a
href="#bsd.rd">RAM disk</a> pode ser bootado a partir de uma
parti&ccedil;&atilde;o j&aacute; existente para um upgrade ou
reinstala&ccedil;&atilde;o.
d146 3
a148 4
<li><b>Rede:</b> Algumas plataformas suportam boot via rede (por exemplo
utilizando <a href="../faq6.html#PXE">PXE</a> ou outro <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=diskless&amp;sektion=8">boot
via rede</a>).
d150 3
a152 4
<li><b>Escrevendo uma imagem do sistema de arquivos para o disco
(miniroot):</b> uma imagem de sistema de arquivo que pode ser escrita
para uma parti&ccedil;&atilde;o existente, e ent&atilde;o pode ser
bootada.
d154 4
a157 3
<li><b>Fita de boot:</b> Algumas plataformas suportam boot por fita.
Essas fitas podem ser feitas de acordo com as instru&ccedil;&otilde;es
de INSTALL.<i>plataforma</i>.
d161 2
a162 2
Nem todas as <a href="../../pt/plat.html">plataformas</a> suportam todas
as op&ccedil;&otilde;es de boot:
d165 2
a166 2
<li><a href="../../alpha.html"><b>alpha:</b></a> Disquete, CD-ROM, rede,
escrita de uma imagem de disquete para o disco.
d169 1
a169 1
<a href="../faq6.html#PXE">rede</a>.
d172 1
a172 1
Varia por m&aacute;quina.
d179 1
a179 1
<a href="../faq6.html#PXE">rede</a>.
d181 2
a182 2
<li><a href="../../landisk.html"><b>landisk:</b></a> miniroot, instalado
utilizando outro computador.
d184 4
a187 6
<li><a href="../../mac68k.html"><b>mac68k:</b></a> Bootado utilizando
ferramentas rodando no Mac OS.
Veja
<a
href="ftp://ftp.openbsd.org/pub/OpenBSD/4.4/mac68k/INSTALL.mac68k">INSTALL.mac68k</a>
para detalhes.
d191 2
a192 7
<li><a href="../../mvme68k.html"><b>mvme68k:</b></a> Rede, fita de boot.

<li><a href="../../mvme88k.html"><b>mvme88k:</b></a> Rede, fita de boot.

<li><a href="../../sparc.html"><b>sparc:</b></a> Disquete, CD-ROM, rede,
escrevendo uma imagem para uma parti&ccedil;&atilde;o swap existente,
fita de boot.
d194 2
a195 3
<li><a href="../../sparc64.html"><b>sparc64:</b></a> Disquete (U1/U2
apenas), CD-ROM, rede, escrevendo uma imagem para uma
parti&ccedil;&atilde;o existente.
d197 14
a210 6
<li><a href="../../vax.html"><b>vax:</b></a> Disquete, rede.

<li><a href="../../zaurus.html"><b>zaurus:</b></a> Bootar o bsd.rd a
partir de uma parti&ccedil;&atilde;o Linux. Veja
<a
href="ftp://ftp.openbsd.org/pub/OpenBSD/4.4/zaurus/INSTALL.zaurus">INSTALL.zaurus</a>
d215 2
a216 2
Todas as plataformas tamb&eacute;m podem usar um 
<a href="#bsd.rd">bsd.rd</a> para reinstala&ccedil;&atilde;o ou upgrade.
d219 4
a222 4
Uma vez que o kernel de instala&ccedil;&atilde;o seja bootado,
voc&ecirc; tem diversas op&ccedil;&otilde;es de onde obter os
<a href="#FilesNeeded">pacotes de arquivos</a>.
Mais uma vez, nem toda plataforma suporta todas as op&ccedil;&otilde;es.
d225 5
a229 5
<li><b>CD-ROM:</b> &Eacute; claro, n&oacute;s preferimos que voc&ecirc;
use o
<a href="../../orders.html">Conjunto Oficial de CDs</a>, mas voc&ecirc;
tamb&eacute;m pode usar <tt>install44.iso</tt> ou fazer seu
pr&oacute;prio.
d232 2
a233 3
Qualquer um dos
<a href="../../ftp.html">espelhos FTP</a>
do OpenBSD ou seu servidor FTP local contendo os pacotes de arquivos.
d236 11
a246 12
Qualquer um dos
<a href="../../ftp.html#http">espelhos HTTP</a>
do OpenBSD ou seu servidor web local contendo os pacotes de arquivos.

<li><b>Parti&ccedil;&atilde;o do disco local:</b>
Em muitos casos, voc&ecirc; pode instalar pacotes de arquivos a partir
de outra parti&ccedil;&atilde;o em um disco local.
Por exemplo, na plataforma <a href="../../i386.html">i386</a>,
voc&ecirc; pode instalar a partir de uma parti&ccedil;&atilde;o FAT ou
um CD-ROM formatado em ISO9660, Rock Ridge ou Joliet.
Em alguns casos, voc&ecirc; ter&aacute; que montar manualmente o sistema
de arquivos antes de utiliz&aacute;-lo. 
d249 2
a250 2
Algumas plataformas suportam o uso de mounts NFS para os pacotes de
arquivos.
d253 2
a254 3
Pacotes de arquivos tamb&eacute;m podem ser lidos a partir de uma fita
suportada.
Detalhes na cria&ccedil;&atilde;o de uma fita est&atilde;o no documento
d259 1
a259 2
<h2>4.2 - Lista de verifica&ccedil;&atilde;o
pr&eacute;-instala&ccedil;&atilde;o</h2>
d262 2
a263 2
Antes que voc&ecirc; comece sua instala&ccedil;&atilde;o, voc&ecirc;
deve ter alguma id&eacute;ia do que voc&ecirc; quer obter no final.
d265 1
a265 1
Voc&ecirc; precisa saber os itens a seguir, pelo menos:
d267 2
a268 2
<li>Nome de m&aacute;quina
<li>Hardware instalado e dispon&iacute;vel
d270 4
a273 5
  <li>Verifique compatibilidade com a p&aacute;gina de compatibilidade
de hardware para sua plataforma
  <li>Se ISA, voc&ecirc; tamb&eacute;m precisa saber
configura&ccedil;&otilde;es de hardware, e confirmar que elas
est&atilde;o como o OpenBSD requer.
d275 2
a276 4
<li>M&eacute;todo de instala&ccedil;&atilde;o a ser usado (CD-ROM, FTP,
etc.)
<li>Se um bug important for encontrado, como o sistema ter&aacute; um
patch aplicado?
d278 5
a282 8
  <li>Se feito localmente, voc&ecirc; dever&aacute; ter
      <a href="#Partitioning">espa&ccedil;o suficiente</a>
dispon&iacute;vel para a &aacute;rvore de c&oacute;digo e sua
compila&ccedil;&atilde;o.
  <li>De outra forma, voc&ecirc; dever&aacute; ter acesso a outra
m&aacute;quina para compilar uma
      <a href="faq5.html#Release">vers&atilde;o</a> com o patch
aplicado.
d284 1
a284 1
<li>Layout de disco desejado
d286 7
a292 9
  <li>Os dados preexistente precisam ser salvos em algum outro lugar?
  <li>O OpenBSD ir&aacute; coexistir neste sistema com algum outro SO?
      Se sim, como ser&aacute; o boot de ambos?
      Voc&ecirc; precisar&aacute; instalar um "gerenciador de boot"?
  <li>Todo o disco ser&aacute; usado para o OpenBSD, ou voc&ecirc; quer
manter uma parti&ccedil;&atilde;o/SO existente (ou espa&ccedil;o para um
futuro)?
  <li>Como voc&ecirc; deseja sub-particionar a se&ccedil;&atilde;o do
OpenBSD de seu disco?
d294 1
a294 1
<li>Configura&ccedil;&otilde;es de rede, se n&atilde;o usando DHCP:
d296 4
a299 6
  <li>Nome de dom&iacute;nio
  <li>Endere&ccedil;os(s) dos Servidores de Nomes de Dom&iacute;nio
(DNS)
  <li>Endere&ccedil;os IP e m&aacute;scaras de sub-rede para cada
interface de rede
  <li>Endere&ccedil;o do Gateway
d301 1
a301 1
<li>Voc&ecirc; ir&aacute; rodar o X Window System?
d306 1
a306 2
<h2>4.3 - Criando uma m&iacute;dia boot&aacute;vel de
instala&ccedil;&atilde;o do OpenBSD</h2>
d309 56
a364 58
Como exemplos, iremos examinar as imagens de instala&ccedil;&atilde;o
dispon&iacute;veis para as plataformas <a
href="../../i386.html">i386</a> e <a href="../../sparc.html">sparc</a>.

<p>
A plataforma <a href="../../i386.html">i386</a> tem seis imagens de
instala&ccedil;&atilde;o separadas para escolha:

<ul>
<li><b><tt>floppy44.fs</tt></b> (PC Desktop) suporta v&aacute;rias
interfaces de rede ISA e PCI, adaptadores IDE e SCSI simples e algum
suporte PCMIA. A maioria dos usu&aacute;rios ir&aacute; usar esta imagem
se o boot for por disquete.
<li><b><tt>floppyB44.fs</tt></b> (Servidore) suporta v&aacute;rias
controladoras RAID, e alguns adaptadores SCSI menos comuns. No entanto,
suporte para v&aacute;rios adaptadores SCSI padr&atilde;o e
v&aacute;rias interfaces de rede EISA e ISA foi removido.
<li><b><tt>floppyC44.fs</tt></b> (Laptops) suporta os dispositivos
CardBus e PCMCIM encontrados em muitos laptops.
<li><b><tt>cd44.iso</tt></b> &eacute; uma imagem ISO9660 que pode ser
usada para criar um CD boot&aacute;vel com os software mais populares de
cria&ccedil;&atilde;o de CD-ROMs da maioria das plataformas.
Esta imagem possui a maior cole&ccedil;&atilde;o de drivers, e &eacute;
geralmente a escolha recomendada se seu hardware pode efetuar boot a
partir de um CDROM.
<li><b><tt>cdemu44.iso</tt></b> &eacute; uma imagem ISO9660, usando boot
via "emula&ccedil;&atilde;o de disquete", com uma imagem de disquete de
2.88M.
Espera-se que poucas pessoas precisem desta imagem -- a maioria deve
usar <tt>cd44.iso</tt>, utilize <tt>cdemu44.iso</tt> apenas se
<tt>cd44.iso</tt> n&atilde;o funcionar para voc&ecirc;.
<li><b><tt>install44.iso</tt></b> &eacute; uma imagem ISO9660, contendo
todos os arquivos padr&atilde;o de instala&ccedil;&atilde;o.
Este arquivo pode ser usado para criar um CD que pode efetuar uma
instala&ccedil;&atilde;o do OpenBSD por si s&oacute;.
</ul>

Sim, pode haver situa&ccedil;&otilde;es em que um disco de
instala&ccedil;&atilde;o &eacute; requerido para suportar seu adaptador
SCSI e outro disco &eacute; requerido para suportar sua interface de
rede.
Felizmente, esse &eacute; um evento raro, e normalmente pode ser
solucionado.

<p>
A plataforma <a href="../../sparc.html">sparc</a> tem quatro imagens de
instala&ccedil;&atilde;o separadas para escolha:

<ul>
<li><b><tt>floppy44.fs:</tt></b> Suporta sistemas com drive de disquete.
<li><b><tt>cd44.iso</tt></b> Uma imagem ISO usada para fazer um CD para
boot de m&aacute;quinas SPARC com drive de CD-ROM.
<li><b><tt>miniroot44.fs</tt></b> Pode ser escrita para uma
parti&ccedil;&atilde;o swap e bootada.
<li><b><tt>install44.iso</tt></b> &eacute; uma imagem ISO9660, contendo
todos os arquivos padr&atilde;o de instala&ccedil;&atilde;o.
Este arquivo pode ser usado para criar um CD que pode efetuar uma
instala&ccedil;&atilde;o do OpenBSD por si s&oacute;. 
d373 2
a374 4
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdformat&amp;sektion=1&amp;arch=i386">fdformat(1)</a>
para executar tanto a formata&ccedil;&atilde;o como a checagem por
setores corrompidos.
d384 3
a386 4
Se seu output &eacute; como o do exemplo acima, ent&atilde;o o disco
est&aacute; OK. No entanto, se voc&ecirc; n&atilde;o v&ecirc; TODAS as
letras como "V"'s ent&atilde;o o disco est&aacute; provavelmente ruim, e
voc&ecirc; deve tentar usar um outro.
d389 3
a391 3
Note que algums sistemas Unix-like t&ecirc;m comandos diferentes para
formatar disquetes.
Cheque a documenta&ccedil;&atilde;o de seu sistema para o procedimento
d395 5
a399 7
Uma vez que voc&ecirc; possua um disquete funcional, e formatado,
&eacute; hora de gravar a imagem de instala&ccedil;&atilde;o no
disquete.
Para isso, voc&ecirc; pode utilizar a ferramenta
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=0">dd(1)</a>.
Um exemplo de uso do <tt>dd(1)</tt> est&aacute; abaixo:
d407 4
a410 5
Uma vez que a imagem esteja gravada, certifique-se de que a imagem
copiada &eacute; igual a original com o comando
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=cmp&amp;sektion=1">cmp(1)</a>.
Se o disquete &eacute; igual a imagem, voc&ecirc; ir&aacute; ver apenas
d415 1
a415 1
  # <b>cmp /dev/rfd0c floppy44.fs</b>
d422 3
a424 4
Esta se&ccedil;&atilde;o descreve como gravar as imagens de
instala&ccedil;&atilde;o em disquetes no Windows ou DOS.
Voc&ecirc; pode obter as ferramentas mencionadas abaixo no
diret&oacute;rio
d426 2
a427 2
de qualquer dos espelhos FTP, ou no diret&oacute;rio <tt>4.4/tools</tt>
do CD1 do conjunto de CDs do OpenBSD.
d430 2
a431 2
Para preparar um disquete no MS-DOS ou Windows, primeiro utilize as
ferramentas nativas de formata&ccedil;&atilde;o para formatar o disco.
d434 3
a436 5
Para gravar a imagem de instala&ccedil;&atilde;o para o disquete
preparado voc&ecirc; pode usar <i>rawrite</i>, <i>fdimage</i>, ou
<i>ntrw</i>.
<i>rawrite</i> n&atilde;o ir&aacute; funcionar no Windows NT, 2000 ou
XP.
d439 7
a445 8
Note que <tt>FDIMAGE.EXE</tt> e <tt>RAWRITE.EXE</tt> s&atilde;o ambas
aplica&ccedil;&otilde;es para MS-DOS, e portanto est&atilde;o limitados
&agrave; conven&ccedil;&atilde;o de nomes de arquivo "8.3" do MS-DOS.
Como <tt>floppyB44.fs</tt> e <tt>floppyC44.fs</tt> t&ecirc;m nomes de
arquivo mais longos, voc&ecirc; ter&aacute; que descobrir como seu
sistema guardou os arquivos no "formato 8.3" antes de usar
<tt>FDIMAGE.EXE</tt> ou <tt>RAWRITE.EXE</tt> para fazer seus disquetes
de boot.
d455 1
a455 2
  Please insert a formatted diskette into drive A: and press -ENTER- :
<i><b>Enter</b></i>
d477 1
a477 1
Voc&ecirc; pode criar um CD-ROM usando os arquivos <tt>cd44.iso</tt> ou
d479 2
a480 2
Determinar os detalhes exatos fica a cargo do leitor, com as ferramentas
que ele possua &agrave; sua disposi&ccedil;&atilde;o.
d483 1
a483 1
Algumas das ferramentas no OpenBSD s&atilde;o:
d485 6
a490 10
<li><a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=mkhybrid&amp;sektion=8">mkhybrid(8)</a>
<li><a
href="http://cdrecord.berlios.de/old/private/cdrecord.html">cdrecord</a>,
parte da cole&ccedil;&atilde;o cdrtools no <a
href="../faq15.html">Sistema de Pacotes e Ports do OpenBSD</a>.
<li><a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=cdio&amp;sektion=1">cdio(1)</a>
e sua op&ccedil;&atilde;o de grava&ccedil;&atilde;o "track at once"
(tao).
d494 1
a494 2
<h2>4.4 - Bootando a m&iacute;dia de instala&ccedil;&atilde;o do
OpenBSD</h2>
d496 1
a496 1
<h3>Boot em i386/amd64</h3>
d498 18
a515 21
Efetuar o boot de uma imagem de instala&ccedil;&atilde;o nas plataformas
PC i386 e amd64 n&atilde;o &eacute; nada de novo para a maioria das
pessoas.
Se voc&ecirc; est&aacute; usando um disquete, simplesmente insira o
disquete no drive e ligue o sistema.
A imagem de instala&ccedil;&atilde;o ser&aacute; ent&atilde;o carregada,
dado que o boot por disquete esta habilitado em sua BIOS.
Se voc&ecirc; quer efetuar o boot por CD, voc&ecirc; deve entrar na BIOS
de seu sistema e configurar as op&ccedil;&otilde;es de boot para
permitir o boot por CD.
Algumas BIOS mais antigas n&atilde;o t&ecirc;m essa op&ccedil;&atilde;o,
e ent&atilde;o voc&ecirc; dever&aacute; utilizar um disquete para o boot
de sua imagem de instala&ccedil;&atilde;o.
N&atilde;o se preocupe, no entanto; mesmo que voc&ecirc; efetue o boot a
partir do disquete, voc&ecirc; ainda pode instalar a partir do CD.

<p>
Voc&ecirc; ainda pode instalar bootando <a href="#bsd.rd">bsd.rd</a> a
partir de uma parti&ccedil;&atilde;o OpenBSD existente, ou mesmo
atrav&eacute;s da rede usando o
<a href="../faq6.html#PXE">processo de boot PXE</a>.
d517 1
a517 1
<h3>Boot em sparc/sparc64</h3>
d520 2
a521 3
Na plataforma <a href="../../sparc64.html">sparc64</a> apenas as
m&aacute;quinas (Ultra 1, Ultra 2) podem efetuar boot a partir de
disquete.
d524 3
a526 4
Para efetuar boot por disquete, insira o disquete com a imagem de
instala&ccedil;&atilde;o do OpenBSD no drive de disquete.
Use, ent&atilde;o, o seguinte comando para efetuar o boot a partir do
disquete:
d534 3
a536 4
Para boot a partir do CD-ROM, coloque o CD-ROM do OpenBSD no drive. Se
sua m&aacute;quina Sun possui apenas um drive de CD-ROM, ent&atilde;o
apenas v&aacute; at&eacute; o prompt de boot, onde voc&ecirc;
poder&aacute; digitar '<tt>boot cdrom</tt>':
d544 8
a551 1
&Eacute; claro, isso s&oacute; ir&aacute; funcionar no novo modo de
a552 8
Se voc&ecirc; est&aacute; no antigo modo de comando (uma seta para a
direita), digite 'n' para ir para o novo modo de comando.
(Se voc&ecirc; est&aacute; usando um sparc antigo pr&eacute;-sun4c,
voc&ecirc; provavelmente n&atilde;o tem o novo modo de comando. Nesse
caso, voc&ecirc; ter&aacute; que fazer experi&ecirc;ncias) Se voc&ecirc;
possui m&uacute;ltiplos dispositivos de CD-ROM, voc&ecirc; deve efetuar
o boot a partir do drive correto.
Tente <tt>probe-scsi</tt> no novo modo de comando.
d567 2
a568 2
Descubra qual dos discos &eacute; o CD-ROM a partir do qual voc&ecirc;
quer efetuar o boot. Note o n&uacute;mero 'target'.
d577 1
a577 1
<h2>4.5 - Performing an install</h2>
d579 1
a579 1
<h3>4.5.1 - Come&ccedil;ando a instala&ccedil;&atilde;o</h3>
d581 22
a602 6
Qualquer que seja o seu m&eacute;todo de boot, agora &eacute; hora de
us&aacute;-lo. Durante o processo de boot, o kernel e todos os programas
usados para instalar o OpenBSD s&atilde;o carregados em mem&oacute;ria.
O problema mais comum ao efetuar o boot &eacute; um disquete ruim ou um
problema de alinhamento do drive. O disquete de boot &eacute; bem
compacto -- qualquer m&iacute;nima falha causar&aacute; problemas.
d605 1
a605 19
Em quase qualquer momento da instala&ccedil;&atilde;o do OpenBSD,
voc&ecirc; pode parar a instala&ccedil;&atilde;o atual apertando as
teclas CTRL-C e pode recome&ccedil;ar sem reiniciar executando
<tt>install</tt> no prompt de comando.

<p>
Quando voc&ecirc; efetuar boot com sucesso, voc&ecirc; ir&aacute; ver um
monte de mensagens de texto passar pela tela.
Este texto, em muitas arquiteturas em branco e azul, &eacute; o
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg</a>,

o kernel dizendo a voc&ecirc; quais dispositivos foram encontrados, e
onde. N&atilde;o se preocupe em lembrar esse texto, j&aacute; que uma
c&oacute;pia &eacute; salva como
<tt>/var/run/dmesg.boot</tt>.

<p>
Ent&atilde;o, voc&ecirc; ver&aacute; o seguinte:
d615 2
a616 2
E com isso, chegamos &agrave; nossa primeira pergunta. Na maior parte
das vezes, voc&ecirc; tem as tr&ecirc;s op&ccedil;&otilde;es listadas:
d618 28
a645 36
<li><b>Install:</b> carrega o OpenBSD no sistema, sobrescrevendo o que
quer que estivesse ali. Note que &eacute; poss&iacute;vel deixar algumas
parti&ccedil;&otilde;es intocadas durante esse processo, como
<tt>/home</tt>, mas excetuando-se essa, assuma que todo o restante
ser&aacute; sobrescrito.
<li><b>Upgrade:</b> Instalar um novo conjunto de <a
href="#FilesNeeded">arquivos de instala&ccedil;&atilde;o</a> nesta
m&aacute;quina, mas n&atilde;o sobrescrever nenhuma
informa&ccedil;&atilde;o de configura&ccedil;&atilde;o, dados de
usu&aacute;rio, ou programas adicionais. Nenhuma
formata&ccedil;&atilde;o de disco &eacute; feita, e nem os
diret&oacute;rios <tt>/etc</tt> e <tt>/var</tt> s&atilde;o sobrescritos.
Algumas coisas importantes a notar:
<ul>
<li> Voc&ecirc; n&atilde;o ter&aacute; a op&ccedil;&atilde;o de instalar
o arquivo <tt>etc44.tgz</tt>.
Ap&oacute;s a instala&ccedil;&atilde;o, voc&ecirc; ter&aacute; que
<a href="../upgrade44.html#etcUpdates">unir manualmente</a> as
modifica&ccedil;&otilde;es de <tt>etc44.tgz</tt> em seu sistema antes
que ele esteja totalmente funcional.
Este &eacute; um passo importante que precisa ser feito, j&aacute; que,
ao contr&aacute;rio, alguns servi&ccedil;os vitais (como o
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a>)
podem n&atilde;o iniciar.

<li>O processo de Upgrade n&atilde;o &eacute; projetado para pular
vers&otilde;es!
Muito embora isso frequentemente funcione, n&atilde;o &eacute;
suportado.
Para o OpenBSD 4.4, o &uacute;nico upgrade suportado &eacute; de 4.3
para 4.4.
Se voc&ecirc; tem que atualizar a partir de uma vers&atilde;o anterior,
efetue o upgrade para vers&otilde;es intermedi&aacute;rias primeiro, ou
se o sistema est&aacute; muito desatualizado, considere uma
reinstala&ccedil;&atilde;o completa.
d649 14
a662 17
Mais informa&ccedil;&otilde;es sobre upgrade entre vers&otilde;es podem
ser encontradas no
<a href="../upgrade44.html">Guia de Upgrade do OpenBSD 4.4</a>.

<li><b>Shell:</b> Algumas vezes, voc&ecirc; precisa efetuar reparos ou
manuten&ccedil;&atilde;o em um sistema que n&atilde;o consegue (ou
n&atilde;o deve) bootar por um kernel normal. Esta op&ccedil;&atilde;o
permite que voc&ecirc; execute manuten&ccedil;&atilde;o ao sistema.
Um n&uacute;mero de ferramentas importantes est&aacute;
dispon&iacute;vel na m&iacute;dia de boot.
</ul>

Ocasionalmente, voc&ecirc; n&atilde;o ir&aacute; ver a
op&ccedil;&atilde;o "Upgrade" listada.
Depois de um <i>flag day</i>, n&atilde;o &eacute; poss&iacute;vel
efetuar o upgrade diretamente; voc&ecirc; deve reinstalar o sistema do
zero.
d665 2
a666 2
Neste exemplo, iremos executar uma instala&ccedil;&atilde;o, mas o
processo de upgrade &eacute; similar.
d672 4
a675 8
  This program will help you install OpenBSD. At any prompt except
password
  prompts you can escape to a shell by typing '!'. Default answers are
shown
  in []'s and are selected by pressing RETURN.  At any time you can exit
this
  program by pressing Control-C, but exiting during an install can leave
your
d682 1
d684 4
a687 5
Na maioria dos casos, o terminal padr&atilde;o &eacute; apropriado; no
entanto, se voc&ecirc; est&aacute; utilizando uma <a
href="../faq7.html#SerCon">console serial</a> para a
instala&ccedil;&atilde;o, n&atilde;o escolha o padr&atilde;o, responda
apropriadamente.
d690 2
a691 3
Se voc&ecirc; n&atilde;o escolher uma tabela de
codifica&ccedil;&atilde;o para o teclado, um layout de teclado US
ser&aacute; usado.
d695 1
a695 2
  IS YOUR DATA BACKED UP? As with anything that modifies disk contents,
this
d698 2
a699 4
  It is often helpful to have the installation notes handy. For complex
disk
  configurations, relevant disk hardware manuals and a calculator are
useful.
d705 2
a706 3
Se voc&ecirc; escolher o padr&atilde;o aqui, o processo de
instala&ccedil;&atilde;o ser&aacute; encerrado e retornar&aacute; ao
prompt de comando.
d709 4
a712 6
As notas de instala&ccedil;&atilde;o citadas aqui est&atilde;o nos CDs
de instala&ccedil;&atilde;o e servidores FTP, no arquivo
<tt>INSTALL.<i>&lt;plat&gt;</i></tt>, onde
<i>&lt;plat&gt;</i> &eacute; sua <a
href="../../pt/plat.html">plataforma</a>, por 
exemplo, <tt>i386</tt>.
d715 1
a715 1
<h3>4.5.2 - Configurando discos</h3>
d717 30
a746 35
<i><b>Nota Importante:</b>
Usu&aacute;rios com discos r&iacute;gidos grandes (maiores do que o que
estava normalmente dispon&iacute;vel quando seu computador foi feito)
devem ver
<a href="../faq14.html#LargeDrive">esta se&ccedil;&atilde;o</a> antes de
prosseguir.</i>

<p>
Configurar discos no OpenBSD varia um pouco de acordo com a plataforma.
Para <a href="../../i386.html">i386</a>, <a
href="../../amd64.html">amd64</a>, <a
href="../../macppc.html">macppc</a>, <a
href="../../zaurus.html">zaurus</a> e <a
href="../../armish.html">armish</a>,
a configura&ccedil;&atilde;o de disco &eacute; feita em dois
est&aacute;gios. Primeiro, o se&ccedil;&atilde;o do OpenBSD do disco
&eacute; definida usando o fdisk(8), e ent&atilde;o essa
se&ccedil;&atilde;o &eacute; subdividida em parti&ccedil;&otilde;es do
OpenBSD usando o disklabel(8).

<p>
Alguns usu&aacute;rios podem ficar um pouco confusos com a terminologia
usada aqui. Parecer&aacute; que n&oacute;s estamos usando a palavra
"parti&ccedil;&atilde;o" de duas formas diferentes. Esta
observa&ccedil;&atilde;o est&aacute; correta. H&aacute; dois
n&iacute;veis de particionamento nas plataformas acima listadas do
OpenBSD, a primeira, que poderia ser considerada a
parti&ccedil;&atilde;o de Sistema Operacional, e a segunda que &eacute;
como a parti&ccedil;&atilde;o do OpenBSD &eacute; subparticionada em
sistemas de arquivos individuais. O primeiro n&iacute;vel &eacute;
vis&iacute;vel como uma parti&ccedil;&atilde;o de disco para o DOS,
Windows, e qualquer outro SO que use esse sistema de layout de disco, e
o segundo n&iacute;vel de particionamento &eacute; vis&iacute;vel apenas
para o OpenBSD e aqueles SOs que conseguem ler diretamente um sistema de
arquivos do OpenBSD.
d752 2
a753 4
  You will now initialize the disk(s) that OpenBSD will use. To enable
all
  available security features you should configure the disk(s) to allow
the
d761 7
a767 8
O disco root &eacute; o disco a partir do qual o sistema ir&aacute;
bootar, e normalmente &eacute; onde fica o espa&ccedil;o de swap.
Discos IDE ser&atilde;o mostrados como <tt>wd0</tt>, <tt>wd1</tt>, etc.,
discos SCSI e dispositivos RAID como <tt>sd0</tt>, <tt>sd1</tt>, e assim
por diante. Todos os discos que o OpenBSD consegue detectar est&atilde;o
listados aqui -- se voc&ecirc; tem discos que n&atilde;o est&atilde;o
aparecendo, voc&ecirc; tem hardware n&atilde;o suportado ou configurado
incorretamente.
d775 30
a804 37
Se voc&ecirc; responder "yes" para essa pergunta, todo o disco
ser&aacute; alocado para o OpenBSD. Isso ir&aacute; resultar em um
Master Boot Record e tabela de parti&ccedil;&otilde;es padr&atilde;o
sendo escrita no disco -- uma parti&ccedil;&atilde;o, com tamanho de
todo o disco, configurada para tipo de parti&ccedil;&atilde;o OpenBSD, e
ajustada como parti&ccedil;&atilde;o de boot. Essa ser&aacute; a escolha
comum para a maior parte dos sistemas OpenBSD de produ&ccedil;&atilde;o;
no entanto, h&aacute; alguns sistemas em que isto n&atilde;o deve ser
feito. Muitos sistemas Compaq, muitos laptops, alguns Dell e outros
sistemas utilizam uma parti&ccedil;&atilde;o de
"manuten&ccedil;&atilde;o" ou "Suspender para Disco", que deve ser
mantida intacta.
Se seu sistema tem qualquer parti&ccedil;&atilde;o de outro tipo que
voc&ecirc; n&atilde;o deseja apagar, n&atilde;o responda "yes" para a
pergunta acima.
Por outro lado, se seu sistema tem um disco novo que nunca foi
utilizado, voc&ecirc; provavelmente ir&aacute; querer responder "yes"
aqui (ou usar a op&ccedil;&atilde;o "update" do fdisk), para que
voc&ecirc; tenha um master boot record v&aacute;lido e assinatura
posicionada.

<p>
Para este exemplo, iremos assumir que o disco deve ser dividido entre o
OpenBSD e uma parti&ccedil;&atilde;o pr&eacute;-existente do Windows
2000, ent&atilde;o iremos escolher o padr&atilde;o "no", o que nos
levar&aacute; ao programa
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>.
Voc&ecirc; pode obter mais informa&ccedil;&otilde;es sobre o fdisk(8)
<a href="../faq14.html#fdisk">aqui</a>.

<p>
<b>Nota:</b> Se voc&ecirc; responder "Y" para a pergunta "Do you want to
use *all* of wd0 for OpenBSD?", ou se voc&ecirc; est&aacute; usando uma
plataforma que n&atilde;o usa o fdisk (por exemplo, sparc64), voc&ecirc;
n&atilde;o ir&aacute; passar por esta etapa, indo diretamente para <a
href="#disklabel">criando um disklabel</a>
d808 2
a809 4
  You will now create a single MBR partition to contain your OpenBSD
data. This
  partition must have an id of 'A6'; must *NOT* overlap other
partitions; and
d818 5
a822 10
 
-------------------------------------------------------------------------------
  *0: 0B      0   1   1 -    195 254  63 [          63:     3148677 ]
Win95 FAT-32
   1: 00      0   0   0 -      0   0   0 [           0:           0 ]
unused      
   2: 00      0   0   0 -      0   0   0 [           0:           0 ]
unused      
   3: 00      0   0   0 -      0   0   0 [           0:           0 ]
unused      
d824 1
a824 1
  fdisk: 1> <b>help</b>
d837 2
a838 4
          exit            Exit edit of current MBR, without saving
changes
          quit            Quit edit of current MBR, saving current
changes
d840 1
a840 1
  fdisk: 1> 
d844 1
a844 1
Alguns comandos merecem maiores explica&ccedil;&otilde;es:
d847 5
a851 6
parti&ccedil;&otilde;es corrente, faz uma grande parti&ccedil;&atilde;o
para o OpenBSD cobrindo todo o disco, marca como ativa, e instala o
c&oacute;digo MBR do OpenBSD.
Equivalente a responder "yes" para a pergunta "<tt>use *all* of
...</tt>". Voc&ecirc; quase que certamente s&oacute; vai querer fazer
isso em um disco novo.
d853 3
a855 3
parti&ccedil;&atilde;o atual em setores. "<tt>p m</tt>" ir&aacute;
mostrar a tabela de parti&ccedil;&otilde;es em megabytes, "<tt>p g</tt>"
ir&aacute; mostr&aacute;-la em gigabytes.
d857 33
a889 37
entrada da tabela.
<li><b><tt>f</tt></b> ou <b><tt>flag:</tt></b> Marca uma
parti&ccedil;&atilde;o como ativa, a partir da qual o boot ser&aacute;
feito.
<li><b><tt>u</tt></b> ou <b><tt>update:</tt></b> Atualiza a MBR com o
c&oacute;digo de boot do OpenBSD, similar a "<tt>reinit</tt>", exceto
que n&atilde;o altera a tabela de parti&ccedil;&otilde;es existente.
<li><b><tt>exit</tt></b> e <b><tt>quit:</tt></b> Cuidado com esses,
j&aacute; que alguns usu&aacute;rios est&atilde;o acostumados com "exit"
e "quit" tendo significados opostos.
</ul>

Vale a pena lembrar novamente que um erro aqui ir&aacute; resultar em
uma significativa perda de dados. Se voc&ecirc; vai fazer isso em um
disco que possui dados importantes, pode ser v&aacute;lido praticar em
um disco "descart&aacute;vel", al&eacute;m de possuir um bom backup.

<p>
Nosso disco aqui possui uma parti&ccedil;&atilde;o de 1.5G para o
Windows 2000 (usando o sistema de arquivos FAT). Olhando para as
informa&ccedil;&otilde;es mostradas acima, podemos ver que a
parti&ccedil;&atilde;o Windows termina no cilindro 195 do disco.
Ent&atilde;o, iremos alocar o espa&ccedil;o restante do disco para o
OpenBSD, come&ccedil;ando no cilindro 196. Voc&ecirc; tamb&eacute;m
poderia calcular o setor de in&iacute;cio do OpenBSD (3148740) somando o
setor de in&iacute;cio da parti&ccedil;&atilde;o existente (63) e seu
tamanho (6148677).

<p>
Voc&ecirc; pode editar o layout de disco tanto na forma de
Cilindros/Cabe&ccedil;as/Setores ou apenas em setores. Qual deles
&eacute; mais f&aacute;cil ir&aacute; depender do que voc&ecirc;
est&aacute; fazendo; neste caso, trabalhando com uma
parti&ccedil;&atilde;o j&aacute; existente, usar o formato CHS
ser&aacute; provavelmente mais f&aacute;cil.
Se voc&ecirc; est&aacute; criando a primeira parti&ccedil;&atilde;o do
disco, usar apenas setores pode ser mais f&aacute;cil.
d896 2
a897 4
 
-------------------------------------------------------------------------------
   1: 00      0   0   0 -      0   0   0 [           0:           0 ]
unused      
d906 1
a906 1
  fdisk:*1> <b>p</b>
d911 6
a916 11
 
-------------------------------------------------------------------------------
  *0: 0B      0   1   1 -    195 254  63 [          63:     3148677 ]
Win95 FAT-32
   1: A6    196   0   1 -   2433 254  63 [     3148740:    35953470 ]
OpenBSD     
   2: 00      0   0   0 -      0   0   0 [           0:           0 ]
unused      
   3: 00      0   0   0 -      0   0   0 [           0:           0 ]
unused      
  fdisk:*1> <b>p m</b>
d921 6
a926 11
 
-------------------------------------------------------------------------------
  *0: 0B      0   1   1 -    195 254  63 [          63:        1537M]
Win95 FAT-32
   1: A6    196   0   1 -   2433 254  63 [     3148740:       17555M]
OpenBSD     
   2: 00      0   0   0 -      0   0   0 [           0:           0M]
unused      
   3: 00      0   0   0 -      0   0   0 [           0:           0M]
unused      
  fdisk:*1> 
d931 18
a948 20
Em plataformas que usam o fdisk, &eacute; importante que a primeira
parti&ccedil;&atilde;o n&atilde;o ocupe a primeira trilha do disco,
<i>neste caso</i>, come&ccedil;ando no setor <tt>63</tt>. Isto
ir&aacute; variar de m&aacute;quina para m&aacute;quina e de sistema de
disco para sistema de disco. Se uma parti&ccedil;&atilde;o OpenBSD for
criada come&ccedil;ando no offset <tt>0</tt>, esta tabela de
parti&ccedil;&otilde;es terminar&aacute; sendo sobrescrita pelo <a
href="../faq14.html#Boot386">Partition Boot Record</a> da
parti&ccedil;&atilde;o OpenBSD.
O sistema ainda pode ser boot&aacute;vel, mas ser&aacute; muito
dif&iacute;cil de manter, e esta configura&ccedil;&atilde;o
<i>n&atilde;o &eacute; recomendada ou suportada</i>.

<p>
Note que o prompt mudou para incluir um asterisco ('<tt>*</tt>') para
indicar que voc&ecirc; tem modifica&ccedil;&otilde;es n&atilde;o-salvas.
Como podemos ver pelo output de <tt>p&nbsp;m</tt> n&oacute;s n&atilde;o
alteramos nossa parti&ccedil;&atilde;o Windows, alocamos com sucesso o
restante do disco para o OpenBSD, e as parti&ccedil;&otilde;es
n&atilde;o t&ecirc;m interse&ccedil;&otilde;es. Estamos dentro. Quase.
d951 2
a952 2
O que ainda n&atilde;o fizemos foi marcar a parti&ccedil;&atilde;o como
ativa para que a m&aacute;quina efetue o boot do OpenBSD ao reiniciar:
d958 1
a958 1
  fdisk:*1> <b>p</b>
d963 6
a968 11
 
-------------------------------------------------------------------------------
   0: 0B      0   1   1 -    195 254  63 [          63:     3148677 ]
Win95 FAT-32
  *1: A6    196   0   1 -   2433 254  63 [     3148740:    35953470 ]
OpenBSD     
   2: 00      0   0   0 -      0   0   0 [           0:           0 ]
unused      
   3: 00      0   0   0 -      0   0   0 [           0:           0 ]
unused      
  fdisk:*1>
d972 1
a972 1
E agora, estamos prontos para salvar nossas modifica&ccedil;&otilde;es:
d979 2
a980 2
  fdisk: 1> <b>q</b>
</pre></td></tr></table> 
d985 6
a990 8
<h3>Criando um disklabel</h3>
O pr&oacute;ximo passo &eacute; usar o 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>

para dividir a parti&ccedil;&atilde;o OpenBSD. Mais detalhes no uso do
disklabel(8) podem ser encontrados no
<a href="../faq14.html#disklabel">FAQ 14, disklabel</a>.
d1000 2
a1001 4
 
------------------------------------------------------------------------
   0: 0B    0   1  1 -  202 239 63 [          63:     3069297 ] Win95
FAT-32
d1007 2
a1008 4
  partition. The disklabel defines how OpenBSD splits up the MBR
partition
  into OpenBSD partitions in which filesystems and swap space are
created.
d1015 1
d1023 3
a1025 6
    b           - set OpenBSD boundaries     q        - quit & save
changes
    c [part]    - change partition size      r        - display free
space
    D           - reset label to default     s [path] - save label to
file
d1027 4
a1030 8
    e           - edit drive parameters      w        - write label to
disk
    g [d | u]   - [d]isk or [u]ser geometry  X        - toggle expert
mode
    l [unit]    - print disk label header    x        - exit & lose
changes
    M           - disklabel(8) man page      z        - delete all
partitions
d1036 1
a1036 2
  Values in non-sector units are truncated to the nearest cylinder
boundary.
d1041 1
a1041 2
Novamente, alguns desses comandos merecem mais
explica&ccedil;&otilde;es:
d1043 55
a1097 62
<li><b><tt>p</tt></b> - mostra (print) o disklabel atual na tela, e
voc&ecirc; pode usar os modificadores <tt>k, m</tt> ou <tt>g</tt> para
kilobytes, megabytes ou gigabytes.

<li><b><tt>D</tt></b> - Limpa um disklabel existente, cria um novo
disklabel padr&atilde;o que cobre apenas a parti&ccedil;&atilde;o
OpenBSD atual. Isto pode ser &uacute;til se o disco tinha anteriormente
um outro disklabel, e a parti&ccedil;&atilde;o OpenBSD foi recriada com
um tamanho diferente -- o disklabel antigo pode n&atilde;o ser deletado,
e causar confus&atilde;o.

<li><b><tt>m</tt></b> - Modifica uma entrada existente em um disklabel.
N&atilde;o superestime o que isto ir&aacute; fazer para voc&ecirc;.
Enquanto ele pode alterar o tamanho de uma parti&ccedil;&atilde;o do
disklabel, ele N&Atilde;O altera o sistema de arquivos em disco.
Usar esta op&ccedil;&atilde;o e esperar que ela magicamente redimensione
parti&ccedil;&otilde;es existentes &eacute; uma boa maneira de perder
grandes quantidades de dados.
No entanto, esta op&ccedil;&atilde;o em conjunto com o
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=growfs&amp;sektion=8">growfs(8)</a>
podem ser usados para aumentar uma parti&ccedil;&atilde;o.

</ul>

<p>
Dividir o seu disco apropriadamente &eacute; importante. A resposta para
a pergunta, "Como devo particionar o meu sistema?" &eacute; "Exatamente
como voc&ecirc; precisa". Isto ir&aacute; variar de
aplica&ccedil;&atilde;o para aplica&ccedil;&atilde;o. N&atilde;o
h&aacute; resposta universal. Se voc&ecirc; est&aacute; incerto sobre
como particionar seu sistema, veja
<a href="#Partitioning">esta discuss&atilde;o</a>.

<p>
Neste sistema, temos mais de 17G dispon&iacute;veis para o OpenBSD.
&Eacute; um monte de espa&ccedil;o, e &eacute; improv&aacute;vel que
precisemos da maioria dele. Ent&atilde;o, iremos deliberadamente
n&atilde;o usar os tamanhos m&iacute;nimos absolutos. &Eacute; melhor
ter alguns megabytes de espa&ccedil;o inutilizado do que um kilobyte
faltando.

<p>
No disco root, uma parti&ccedil;&atilde;o 'a' <b>deve</b> ser criada
para o sistema de arquivos root (/).
O processo de instala&ccedil;&atilde;o n&atilde;o ir&aacute; prosseguir
sem ela.
Geralmente, voc&ecirc; ir&aacute; querer ter uma parti&ccedil;&atilde;o
swap, 'b', tamb&eacute;m, mas se voc&ecirc; tiver certeza que seu
sistema nunca ir&aacute; exceder a mem&oacute;ria real, ent&atilde;o
voc&ecirc; pode deix&aacute;-la de fora.
Se uma parti&ccedil;&atilde;o 'b' existir no disco root, ela ser&aacute;
automaticamente usada como swap.
Parti&ccedil;&otilde;es swap nos outros discos dever&atilde;o ser
manualmente adicionadas ao <i>/etc/fstab</i>.

<p>
Depois de pensar um pouco, decidimos criar apenas
parti&ccedil;&otilde;es suficientes para permitir a
cria&ccedil;&atilde;o dos sistemas de arquivos separados recomendados
(<tt>/, /tmp, /var, /usr, /home</tt>) juntamente com uma
parti&ccedil;&atilde;o swap:
d1099 1
a1099 1
<li><i><b>wd0a: /</b></i> (root) - 150M. Deve ser mais que suficiente. 
d1101 30
a1130 36
<li><i><b>wd0d: /tmp</b></i> - 120M.  <tt>/tmp</tt> &eacute; usado para
a compila&ccedil;&atilde;o de alguns softwares, 120M dever&aacute; ser
suficiente para a maioria das coisas.
<li><i><b>wd0e: /var</b></i> - 80M.  Se este fosse um servidor web ou de
email, ter&iacute;amos feito esta parti&ccedil;&atilde;o muito maior,
mas n&atilde;o &eacute; o que estamos fazendo.
<li><i><b>wd0g: /usr</b></i> - 6G.  Queremos que esta
parti&ccedil;&atilde;o seja grande o suficiente para guardar algumas
aplica&ccedil;&otilde;es de usu&aacute;rio, al&eacute;m de ser capaz de
atualizar e recompilar o sistema a partir dos fontes se desejado ou
necess&aacute;rio. A <a href="../faq15.html#Ports">&aacute;rvore de
Ports</a> tamb&eacute;m ficar&aacute; aqui, o que ir&aacute; ocupar
quase 250M deste espa&ccedil;o antes que os ports sejam compilados.
Se voc&ecirc; estiver planejando compilar muitas
aplica&ccedil;&otilde;es a partir dos fontes usando os <a
href="../faq15.html#Ports">ports</a> em lugar de usar os <a
href="../faq15.html#PkgMgmt">pacotes</a> pr&eacute;-compilados,
voc&ecirc; pode querer adicionar muito mais espa&ccedil;o aqui.
<li><i><b>wd0h: /home</b></i> - 4G.  Ir&aacute; disponibilizar
espa&ccedil;o suficiente para arquivos de usu&aacute;rio.
</ul>

Agora, se voc&ecirc; somar tudo, ir&aacute; ver que mais de 6G de
espa&ccedil;&atilde;o n&atilde;o est&atilde;o sendo usados!
Espa&ccedil;o n&atilde;o utilizado n&atilde;o ir&aacute; fazer mal
algum, e nos d&aacute; flexibilidade para aumentar as coisas no futuro
se necess&aacute;rio. Precisa de mais espa&ccedil;o no <i>/tmp</i>?
Crie uma nova parti&ccedil;&atilde;o no espa&ccedil;o vago, formate a
nova parti&ccedil;&atilde;o com o
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&amp;sektion=8"
>newfs(8)</a>, e altere o
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&amp;sektion=5"
><i>/etc/fstab</i></a> para montar a nova parti&ccedil;&atilde;o no
<i>/tmp</i>.
d1140 1
a1140 1
  > <b>a a</b>
d1146 1
a1146 1
  > <b>a b</b>
d1151 1
a1151 1
  > <b>a d</b>
d1157 1
a1157 1
  > <b>a e</b>
d1163 1
a1163 1
  > <b>a g</b>
d1169 1
a1169 1
  > <b>a h</b>
d1175 1
a1175 1
  > <b>p m</b>
d1177 2
d1183 4
a1186 8
    d:           125.5M          2000.3M  4.2BSD   2048 16384    1 #
/tmp
    e:            86.3M          2125.8M  4.2BSD   2048 16384    1 #
/var
    g:          6149.9M          2212.1M  4.2BSD   2048 16384    1 #
/usr
    h:          4102.5M          8362.0M  4.2BSD   2048 16384    1 #
/home
d1188 1
a1188 1
  > <b>q</b>
d1193 17
a1209 22
Voc&ecirc; ir&aacute; notar que h&aacute; uma parti&ccedil;&atilde;o
<i>c</i> que parece termos ignorado. Esta parti&ccedil;&atilde;o
representa todo o disco; n&atilde;o tente alter&aacute;-la. Voc&ecirc;
tamb&eacute;m ir&aacute; notar que a parti&ccedil;&atilde;o <i>i</i>
n&atilde;o foi definida por n&oacute;s; esta &eacute; a
parti&ccedil;&atilde;o Windows 2000 pr&eacute;-existente.
Parti&ccedil;&otilde;es n&atilde;o s&atilde;o assinaladas a nenhuma
letra em particular -- com exce&ccedil;&atilde;o de <i>a</i> (root),
<i>b</i> (swap) e <i>c</i> (todo o disco), o restante das
parti&ccedil;&otilde;es (at&eacute; a letra <i>p</i> est&atilde;o
dispon&iacute;veis para seu uso, como desejar.

<h3>Configurando pontos de montagem e formatando seus sistemas de
arquivo</h3>

Agora vem a configura&ccedil;&atilde;o final de seus pontos de montagem.
Se voc&ecirc; configurou os pontos de montagem atrav&eacute;s do
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>,

este passo consiste apenas em verificar suas escolhas; de outra forma,
voc&ecirc; pode especific&aacute;-las agora.
d1213 5
a1217 10
  Mount point for wd0d (131584 KBytes)? (or 'none' or 'done') [/tmp]
<b><i>Enter</i></b>
  Mount point for wd0e (90624 KBytes)? (or 'none' or 'done') [/var]
<b><i>Enter</i></b>
  Mount point for wd0g (6656 MBytes)? (or 'none' or 'done') [/usr]
<b><i>Enter</i></b>
  Mount point for wd0h (4096 MBytes)? (or 'none' or 'done') [/home]
<b><i>Enter</i></b>
  Mount point for wd0d (131584 KBytes)? (or 'none' or 'done') [/tmp]
<b>done</b>
d1229 1
a1229 2
  newfs: reduced number of fragments per cylinder group from 20080 to
19992 to enl
d1233 1
a1233 2
  newfs: reduced number of fragments per cylinder group from 16064 to
15992 to enl
d1237 1
a1237 2
  newfs: reduced number of fragments per cylinder group from 11040 to
10992 to enl
d1245 1
a1245 2
  /dev/wd0a on /mnt type ffs (rw, asynchronous, local, ctime=Tue Oct 21
00:36:28 2
d1247 1
a1247 2
  /dev/wd0h on /mnt/home type ffs (rw, asynchronous, local, nodev,
nosuid, ctime=T
d1249 1
a1249 2
  /dev/wd0d on /mnt/tmp type ffs (rw, asynchronous, local, nodev,
nosuid, ctime=Tu
d1251 1
a1251 2
  /dev/wd0g on /mnt/usr type ffs (rw, asynchronous, local, nodev,
ctime=Tue Oct 21
d1253 1
a1253 2
  /dev/wd0e on /mnt/var type ffs (rw, asynchronous, local, nodev,
nosuid, ctime=Tu
d1258 24
a1281 26
Voc&ecirc; pode estar se perguntando por que o instalador pergunta
novamente pelos pontos de montagem. Isto permite que voc&ecirc; corrija
quaisquer erros ou omiss&otilde;es feitos durante a
cria&ccedil;&atilde;o do disklabel. Por exemplo, o processo de
instala&ccedil;&atilde;o ir&aacute; deletar automaticamente qualquer
ponto de montagem duplicado informado durante a
configura&ccedil;&atilde;o do disklabel. O programa disklabel ir&aacute;
permitir que voc&ecirc; entre com tais duplicatas, e portanto deve-se
checar por estas ap&oacute;s o disklabel. As duplicatas deletadas
ir&atilde;o resultar em parti&ccedil;&otilde;es sem ponto de montagem,
&agrave;s quais voc&ecirc; dever&aacute; assinalar novos pontos de
montagem se quiser utilizar o espa&ccedil;o.

<p>
Note que a pergunta "Are you really sure that you are ready to proceed?"
tem por padr&atilde;o a resposta "no", ent&atilde;o voc&ecirc;
dever&aacute; deliberadamente informar que ele deve prosseguir e
formatar suas parti&ccedil;&otilde;es. Se voc&ecirc; escolhesse "no",
voc&ecirc; seria simplesmente retornado ao prompt de comando e poderia
reiniciar a instala&ccedil;&atilde;o digitando "install", ou reiniciando
com seu disco de boot.

<p>
Neste ponto todos os sistemas de arquivo ser&atilde;o formatados para
voc&ecirc;. Isto pode demorar algum tempo dependendo do tamanho das
parti&ccedil;&otilde;es e a velocidade do disco.
d1284 1
a1284 1
<h3>4.5.3 - Configurando o hostname do sistema</h3>
d1286 6
a1291 14
Agora voc&ecirc; deve configurar o hostname do sistema.
Esta informa&ccedil;&atilde;o, juntamente com o nome de dom&iacute;nio
DNS (especificado <a href="#Network">abaixo</a>), ser&aacute; salvo em
<tt>/etc/myname</tt>, que &eacute; usado durante o boot para ajustar o
hostname do sistema.
Se voc&ecirc; n&atilde;o configurar um hostname para o sistema, o valor
padr&atilde;o de 'my.domain' ser&aacute; usado.

<p>
&Eacute; importante configurar este nome agora, porque ele ser&aacute;
usado quando as chaves criptogr&aacute;ficas do sistema forem geradas
durante o primeiro boot ap&oacute;s a instala&ccedil;&atilde;o. Esta
gera&ccedil;&atilde;o ocorre independentemente da rede estar configurada
ou n&atilde;o.
d1293 7
a1299 1
<p> 
d1305 1
a1305 1
<h3>4.5.4 - Configurando a redek</h3>
d1308 8
a1315 9
Agora &eacute; hora de configurar sua rede. A rede deve ser configurada
se voc&ecirc; planeja executar uma instala&ccedil;&atilde;o baseada em
FTP ou NFS, considerando que ser&aacute; baseada na
informa&ccedil;&atilde;o que voc&ecirc; est&aacute; prestes a digitar.
Aqui est&aacute; um passo-a-passo da se&ccedil;&atilde;o de
configura&ccedil;&atilde;o de rede do processo de
instala&ccedil;&atilde;o.
Em nosso exemplo, iremos conectar uma interface de rede (fxp0) a um
cable modem, configurada usando DHCP, e outra interface &agrave; nossa
d1329 1
a1329 2
  IPv6 address for xl0? (or 'rtsol' or 'none') [none]
<b><i>Enter</i></b>
d1331 1
a1331 2
  Which one do you wish to initialize? (or 'done') [fxp0]
<b><i>Enter</i></b>
d1343 1
a1343 2
  IPv6 address for fxp0? (or 'rtsol' or 'none') [none]
<b><i>Enter</i></b>
d1346 1
a1346 2
  DNS nameserver? (IP address or 'none') [68.87.77.130 68.87.72.130
68.87.75.194] <b><i>Enter</i></b>
d1348 1
a1348 2
  Default route? (IP address, 'dhcp' or 'none') [dhcp]
<b><i>Enter</i></b>
d1350 1
a1350 2
  Do you want to do any manual network configuration? [no]
<b><i>Enter</i></b>
d1354 4
a1357 5
<b>NOTA: </b>Apenas <b>uma</b> interface pode ser facilmente configurada
usando DHCP durante a instala&ccedil;&atilde;o. Se voc&ecirc; tentar
configurar mais de uma interface usando DHCP voc&ecirc; ir&aacute;
encontrar erros. Voc&ecirc; deve configurar interfaces adicionais
manualmente ap&oacute;s a instala&ccedil;&atilde;o.
d1360 1
a1360 1
Agora, informamos a senha para a conta de root:
d1367 3
a1369 5
Use uma senha segura para a conta de root. Voc&ecirc; ir&aacute; criar
outras contas de usu&aacute;rio ap&oacute;s o boot do sistema. De acordo
com
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=passwd&amp;sektion=1">passwd(1)</a>:
d1371 3
a1373 6
    The new password should be at least six characters long and not
purely
    alphabetic.  Its total length must be less than _PASSWORD_LEN
(currently
    128 characters).  A mixture of both lower and uppercase letters,
numbers,
d1378 1
a1378 1
<h3>4.5.5 - Escolhendo a m&iacute;dia de instala&ccedil;&atilde;o</h3>
d1381 2
a1382 3
Depois que a rede &eacute; configurada, o script de
instala&ccedil;&atilde;o ir&aacute; dar a voc&ecirc; uma chance de
efetuar ajustes manuais &agrave; configura&ccedil;&atilde;o.
d1385 2
a1386 3
Depois, voc&ecirc; ter&aacute; a chance de escolher sua m&iacute;dia de
instala&ccedil;&atilde;o. As op&ccedil;&otilde;es s&atilde;o listadas
abaixo.
d1391 1
a1391 2
  Location of sets? (cd disk ftp http or 'done') [cd]
<b><i>Enter</i></b>
d1396 5
a1400 5
Neste exemplo estamos instalando a partir do CD-ROM. Isto ir&aacute;
trazer uma lista dos dispositivos identificados como CD-ROM em seu
computador. A maioria das pessoas ir&aacute; ter apenas um. Se
voc&ecirc; precisar, certifique-se de escolher o dispositivo pelo qual
voc&ecirc; ir&aacute; instalar o OpenBSD.
d1403 4
a1406 5
<b>NOTA: </b>Nem todas as plataformas suportam todas as
op&ccedil;&otilde;es de instala&ccedil;&atilde;o.
Neste caso, a plataforma OpenBSD/i386 n&atilde;o suporta
instala&ccedil;&otilde;es via NFS, portanto ela n&atilde;o &eacute;
mostrada na lista.
d1411 1
a1411 2
  Which one contains the install media? (or 'done') [cd0]
<b><i>Enter</i></b>
d1416 3
a1418 4
Aqui, voc&ecirc; &eacute; questionado sobre o diret&oacute;rio no qual
se encontram os arquivos de instala&ccedil;&atilde;o, que &eacute;
<tt>4.4/i386/</tt> no conjunto oficial de CDs ou em um CD feito a partir
de <tt>install44.iso</tt>.
d1421 1
a1421 1
<h3>4.5.6 - Escolhendo pacotes de arquivos</h3>
d1424 11
a1434 14
Agora &eacute; hora de escolher quais pacotes de arquivos voc&ecirc;
ir&aacute; instalar. Voc&ecirc; pode ver uma descri&ccedil;&atilde;o
desses arquivos na <a href="#FilesNeeded">pr&oacute;xima
se&ccedil;&atilde;o</a>. Os arquivos encontrados pelo programa de
instala&ccedil;&atilde;o ser&atilde;o mostrados na tela. Seu trabalho
&eacute; apenas especificar quais arquivos voc&ecirc; deseja. Por
padr&atilde;o todos os pacotes de arquivo n&atilde;o-X s&atilde;o
selecionados; no entanto, alguns usu&aacute;rios avan&ccedil;ados podem
querer limitar esses pacotes apenas para os m&iacute;nimos
necess&aacute;rio para rodar o OpenBSD, que seriam <tt>base44.tgz</tt>,
<tt>etc44.tgz</tt> e <tt>bsd</tt>.
A maioria das pessoas ir&aacute; querer instalar os pacotes de arquivos
padr&atilde;o ou todos os pacotes de arquivos. O exemplo abaixo &eacute;
de uma instala&ccedil;&atilde;o completa.
d1438 2
a1439 4
  Select sets by entering a set name, a file name pattern or 'all'.
De-select
  sets by prepending a '-' to the set name, file name pattern or 'all'.
Selected
d1475 15
a1489 18
Voc&ecirc; pode fazer todo tipo de coisa legal aqui -- "<tt>-x*</tt>"
iria remover todos os componentes do X, se voc&ecirc; mudasse de
id&eacute;ia. Neste caso, iremos instalar todos os pacotes. Muito embora
o sistema v&aacute; funcionar com menos pacotes, tanto o conjunto
padr&atilde;o como instalar todos os pacotes &eacute; recomendado. Mais
detalhes sobre a sele&ccedil;&atilde;o de pacotes <a
href="#FilesNeeded">aqui</a>.

<p>
Uma vez que voc&ecirc; tenha selecionado com sucesso quais pacotes
voc&ecirc; deseja, voc&ecirc; ser&aacute; questionado sobre a
confirma&ccedil;&atilde;o da extra&ccedil;&atilde;o desses pacotes e
eles ser&atilde;o ent&atilde;o instalados. Uma barra de progresso
ser&aacute; mostrada para mant&ecirc;-lo informado sobre quanto tempo
ir&aacute; demorar. O tempo varia enormemente dependendo de qual sistema
voc&ecirc; est&aacute; instalando o OpenBSD, os pacotes de arquivos
instalados, e a velocidade da m&iacute;dia de origem. Esta parte pode
demorar desde alguns minutos at&eacute; diversas horas.
d1496 1
a1496 2
  100% |**************************************************|  6700 KB   
00:03    
d1498 1
a1498 2
  100% |**************************************************|  5404 KB   
00:01    
d1500 1
a1500 2
  100% |**************************************************|  6750 KB   
00:02    
d1502 1
a1502 2
  100% |**************************************************| 42904 KB   
00:27    
d1504 1
a1504 2
  100% |**************************************************|   631 KB   
00:00    
d1506 1
a1506 2
  100% |**************************************************|  2866 KB   
00:02    
d1508 1
a1508 2
  100% |**************************************************| 78575 KB   
00:43    
d1510 1
a1510 2
  100% |**************************************************|  7552 KB   
00:07    
d1512 1
a1512 2
  100% |**************************************************|  2552 KB   
00:01    
d1514 1
a1514 2
  100% |**************************************************|  9486 KB   
00:05    
d1516 1
a1516 2
  100% |**************************************************| 75434      
00:00    
d1518 1
a1518 2
  100% |**************************************************|  2672 KB   
00:05    
d1520 1
a1520 2
  100% |**************************************************| 34747 KB   
00:16    
d1522 2
a1523 4
  100% |**************************************************| 19816 KB   
00:10    
  Location of sets? (cd disk ftp http or 'done') [done]
<b><i>Enter</i></b>
d1527 4
a1530 4
Neste ponto, voc&ecirc; pode baixar pacotes de arquivos adicionais de
outras fontes (incluindo <a href="#site">pacotes de arquivos
customizados</a>) se desejado, ou apertar '<tt>done</tt>' se voc&ecirc;
instalou todos os pacotes de arquivos de que precisa.
d1533 1
a1533 1
<h3>4.5.7 - Terminando</h3>
d1535 7
a1541 11
Agora, algumas perguntas sobre a configura&ccedil;&atilde;o do sistema
que voc&ecirc; acaba de instalar.
A primeira &eacute; se o
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd&amp;sektion=8">sshd(8)</a>
deve ser iniciado durante o boot.
Geralmente voc&ecirc; vai querer que o sshd(8) esteja operando, mas
ocasionalmente voc&ecirc; pode n&atilde;o querer. Se sua
aplica&ccedil;&atilde;o n&atilde;o necessita do sshd(8), h&aacute; uma
pequena vantagem te&oacute;rica de seguran&ccedil;a em n&atilde;o
t&ecirc;-lo rodando.
d1546 1
a1546 1
</pre></td></tr></table> 
d1549 3
a1551 3
(Se voc&ecirc; mudar de id&eacute;ia depois, altere o <a
href="../faq10.html"
><tt>/etc/rc.conf.local</tt></a> ou <tt>/etc/rc.conf</tt>.)
d1554 6
a1559 7
Voc&ecirc; ter&aacute; a op&ccedil;&atilde;o de iniciar o
<a href="../faq6.html#OpenNTPD">OpenNTPD</a>
durante o boot.
O OpenNTPD &eacute; uma forma, de baixo impacto, de manter o
rel&oacute;gio do seu computador sincronizado de maneira precisa, e a
configura&ccedil;&atilde;o padr&atilde;o &eacute; suficiente para o uso
da maioria das pessoas.
d1568 5
a1572 6
Se voc&ecirc; tem um servidor de hora local, voc&ecirc; pode
especific&aacute;-lo aqui, e se voc&ecirc; escolher "default", o
OpenNTPD ir&aacute; usar <tt>pool.ntp.org</tt>, uma grande
cole&ccedil;&atilde;o de servidores de hora de livre acesso.
(Se voc&ecirc; mudar de id&eacute;ia depois, altere <a
href="../faq10.html"><tt>/etc/rc.conf.local</tt></a> e/ou
d1576 11
a1586 15
Em algumas plataformas, voc&ecirc; ser&aacute; questionado se planeja
rodar o X neste sistema. Se voc&ecirc; responder 'Y',
<tt>/etc/sysctl.conf</tt> ser&aacute; modificado para incluir a linha
<tt>machdep.allowaperture=1</tt> ou <tt>machdep.allowaperture=2</tt>,
dependendo da sua plataforma.
Algumas plataformas sequer ir&atilde;o fazer essa pergunta.
Se voc&ecirc; n&atilde;o planeja rodar o X neste sistema ou n&atilde;o
tem certeza, responda 'N' aqui, j&aacute; que voc&ecirc; pode mudar isso
facilmente alterando <tt>/etc/sysctl.conf</tt> se precisar, depois.
H&aacute; uma vantagem potencial em deixar o driver aperture
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=xf86&amp;sektion=4">xf86(4)</a>
desabilitado, j&aacute; que a engine gr&aacute;fica em uma placa de
v&iacute;deo moderna poderia potencialmente ser usada para alterar
mem&oacute;ria al&eacute;m do controle do processador.
d1594 9
a1602 13
Agora, voc&ecirc; &eacute; questionado se deseja usar uma
<a href="../faq7.html#SerCons">console serial</a> neste computador,
ao inv&eacute;s do padr&atilde;o teclado e monitor.
Se voc&ecirc; escolher "<tt>yes</tt>" e responder algumas outras
perguntas simples,
<tt><a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot.conf&amp;sektion=8">/etc/boot.conf</a></tt>
e 
<tt><a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ttys&amp;sektion=5">/etc/ttys</a></tt>
ser&atilde;o editados apropriadamente para voc&ecirc;.
A maioria dos usu&aacute;rios ir&aacute; usar o padr&atilde;o,
<b><tt>no</tt></b> aqui.
d1610 6
a1615 8
Sua &uacute;ltima tarefa &eacute; informar o fuso hor&aacute;rio.
Dependendo de onde esteja sua m&aacute;quina, pode haver
m&uacute;ltiplas respostas igualmente v&aacute;lidas para essa pergunta.
No exemplo a seguir, n&oacute;s usamos <tt>US/Eastern</tt>, mas
tamb&eacute;m poder&iacute;amos ter usado <tt>EST5EDT</tt> ou
<tt>US/Michigan</tt> e ter o mesmo resultado. Apertando <tt>?</tt> nos
prompts ir&aacute; gui&aacute;-lo atrav&eacute;s das
op&ccedil;&otilde;es.
d1625 1
a1625 2
  Arctic/      EST          GMT-0        Kwajalein    PST8PDT     
Universal
d1629 4
a1632 8
  Brazil/      Etc/         Hongkong     MST7MDT      ROC         
posix/
  CET          Europe/      Iceland      Mexico/      ROK         
posixrules
  CST6CDT      Factory      Indian/      Mideast/     Singapore   
right/
  Canada/      GB           Iran         NZ           Turkey      
zone.tab
d1643 2
a1644 3
Se voc&ecirc; est&aacute; preocupado com a precis&atilde;o do
rel&oacute;gio, voc&ecirc; pode querer ler
<a href="../faq8.html#NTPerror">isto</a>.
d1647 4
a1650 4
Os &uacute;ltimos passos s&atilde;o para o sistema criar o
diret&oacute;rio <tt>/dev</tt> (o que pode demorar um pouco em alguns
sistemas, especialmente se voc&ecirc; tiver pouca mem&oacute;ria RAM), e
instalar os boot blocks.
d1677 2
a1678 2
O OpenBSD est&aacute; instalado no seu sistema e pronto para seu
primeiro boot, mas antes disso...
d1682 6
a1687 6
<h4>Antes de reiniciar</h4>
Neste ponto, seu sistema est&aacute; instalado e pronto para ser
reiniciado e configurado para um servi&ccedil;o. Antes de faz&ecirc;-lo,
no entanto, seria inteligente chegar a <a
href="../../errata.html">p&aacute;gina de Errata</a> para ver se
h&aacute; quaisquer bugs que iriam impact&aacute;-lo de imediato.
d1690 1
a1690 2
Um truque que voc&ecirc; pode usar para alguma
configura&ccedil;&atilde;o "antes do primeiro boot" &eacute; executar:
d1694 34
a1727 40
no prompt do shell.
Isto ir&aacute; ajustar seus pontos de montagem para estarem da forma
que ficar&atilde;o ap&oacute;s reiniciar em seu sistema
rec&eacute;m-instalado.
Voc&ecirc; pode agora fazer alguma configura&ccedil;&atilde;o
b&aacute;sica, como adicionar usu&aacute;rios, alterar pontos de
montagem, etc.

<h4>Ap&oacute;s reiniciar</h4>

<p>
Uma das primeiras coisas a ler ap&oacute;s instalar seu sistema &eacute;
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=afterboot&amp;sektion=8">afterboot(8)</a>.

<p>
Voc&ecirc; tamb&eacute;m pode achar &uacute;teis os links a seguir:
<ul>
<li><a href="../faq10.html#AddDelUser">Adicionando usu&aacute;rios no
OpenBSD</a>
<li><a href="../faq6.html#Setup">Configura&ccedil;&atilde;o Inicial de
Rede</a>
<li><a href="faq2.html#ManPages">Man Pages de comandos
populares/&uacute;teis</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi">Man pages do
OpenBSD na Web</a
<li><a href="../faq15.html">O sistema de Packages e Ports do OpenBSD
para instala&ccedil;&atilde;o de software</a> 
</ul>

<h4>Uma &uacute;ltima coisa...</h4>
Os desenvolvedores do OpenBSD pedem que voc&ecirc;
<a href="#SendDmesg">Envie uma c&oacute;pia do seu dmesg</a>. Isto
&eacute; realmente apreciado pelos desenvolvedores, e em &uacute;ltima
inst&acirc;ncia, todos os usu&aacute;rios.

<p>
<a name= "FilesNeeded"></a>
<h2>4.6 - Que arquivos s&atilde;o necess&aacute;rios para a
instala&ccedil;&atilde;o?</h2>
d1731 44
a1774 49
A instala&ccedil;&atilde;o completa do OpenBSD &eacute; dividida em um
n&uacute;mero de <i>pacotes de arquivos</i> separados. Nem toda
aplica&ccedil;&atilde;o requer todos os pacotes de arquivos. Aqui
est&aacute; uma vis&atilde;o geral de cada um deles:
<p>
<ul>
  <li><b><i>bsd</i></b>          - Este &eacute; o Kernel.
<b>Necess&aacute;rio</b>
  <li><b><i>bsd.mp</i></b> - Kernel multi-processador (SMP) (apenas em
algumas plataformas)
  <li><b><i>bsd.rd</i></b> - <a href="#bsd.rd">Kernel em RAM disk</a>
  <li><b><i>base44.tgz</i></b>   - Cont&eacute;m o sistema b&aacute;sico
do OpenBSD <b>Necess&aacute;rio</b>
  <li><b><i>etc44.tgz</i></b>    - Cont&eacute;m todos os arquivos do
/etc <b>Necess&aacute;rio</b>
  <li><b><i>comp44.tgz</i></b>    - Cont&eacute;m o compilador e suas
ferramentas, cabe&ccedil;alhos e bibliotecas. <b>Recomendado</b>
  <li><b><i>man44.tgz</i></b>    - Cont&eacute;m as man pages
<b>Recomendado</b>
  <li><b><i>misc44.tgz</i></b>   - Cont&eacute;m
informa&ccedil;&atilde;o miscel&acirc;nea, documenta&ccedil;&atilde;o de
instala&ccedil;&atilde;o
  <li><b><i>game44.tgz</i></b>   - Cont&eacute;m os jogos do OpenBSD
  <li><b><i>xbase44.tgz</i></b>  - Cont&eacute;m os arquivos
b&aacute;sicos do X11
  <li><b><i>xetc44.tgz</i></b>   - Cont&eacute;m os arquivos de
configura&ccedil;&atilde;o para /etc/X11 e /etc/fonts
  <li><b><i>xfont44.tgz</i></b>  - Cont&eacute;m o servidor de fontes e
as fontes do X11
  <li><b><i>xserv44.tgz</i></b>  - Cont&eacute;m os servidores X do X11
  <li><b><i>xshare44.tgz</i></b> - Cont&eacute;m manpages,
configura&ccedil;&otilde;es locais, includes, etc. para o X
</ul>

Os pacotes <b>etc44.tgz</b> e <b>xetc44.tgz</b> n&atilde;o s&atilde;o
instalados como parte de um upgrade, apenas como parte de uma
instala&ccedil;&atilde;o completa, para que quaisquer
customiza&ccedil;&otilde;es feitas por voc&ecirc; n&atilde;o se percam.
Voc&ecirc; ter&aacute; que atualizar os diret&oacute;rios <tt>/etc</tt>,
<tt>/dev</tt> e <tt>/var</tt> manualmente.

<p>
Mesmo que voc&ecirc; n&atilde;o tenha inten&ccedil;&atilde;o de rodar o
X, alguns <a href="../faq15.html">pacotes</a> de terceiros requerem que
as bibliotecas gr&aacute;ficas de <b>xbase44.tgz</b> estejam instaladas
em seu sistema.
Essas depend&ecirc;ncias podem, geralmente, ser satisfeitas simplesmente
instalando <b>xbase44.tgz</b>, o restante do X n&atilde;o &eacute;
necess&aacute;rio.
d1779 3
a1781 3
<a name= "SpaceNeeded"></a>  <!-- XXXobsolete tag -->
<h2> 4.7 - De quanto espa&ccedil;o eu preciso para instalar o
OpenBSD?</h2>
d1785 3
a1787 4
Obviamente, a resposta para essa pergunta varia tremendamente baseada em
seu uso do sistema.
No entanto, estes n&uacute;meros podem ser usados como ponto de
<i>partida</i>:
d1791 1
a1791 1
/usr               500MB (sem X) ou 660MB (com X)
d1797 230
a2026 261
Estes s&atilde;o os tamanhos m&iacute;nimos sugeridos para sistemas de
arquivos para uma instala&ccedil;&atilde;o completa.
Os n&uacute;meros incluem espa&ccedil;o extra suficiente para permitir
que voc&ecirc; rode um sistema t&iacute;pico conectado &agrave;
Internet, mas n&atilde;o muito mais que isso.

<p>
Tenha os seguintes fatos em mente, no entanto:
<ul>
<li>Esses s&atilde;o valores m&iacute;nimos.
Espa&ccedil;o em disco &eacute; um tanto quanto barato nestes tempos, e
tentar espremer seu sistema no menor espa&ccedil;o poss&iacute;vel
&eacute; raramente um esfor&ccedil;o v&aacute;lido. Para
aplica&ccedil;&otilde;es de prop&oacute;sito especial, os n&uacute;meros
acima podem ser diminu&iacute;dos, mas voc&ecirc; ter&aacute; que
experimentar.
<li>Esses n&uacute;meros N&Atilde;O incluem a &aacute;rvore de ports.
<li>Se voc&ecirc; planeja instalar um n&uacute;mero significativo de
aplica&ccedil;&otilde;es de terceiros, fa&ccedil;a a sua
parti&ccedil;&atilde;o <tt>/usr</tt> muito maior.
Qu&atilde;o maior ir&aacute; depender das suas aplica&ccedil;&otilde;es,
evidentemente.
<li>Para um sistema que gerencia muito email ou p&aacute;ginas web
(guardados, respectivamente, em <tt>/var/mail</tt> e <tt>/var/www</tt>)
voc&ecirc; ir&aacute; querer fazer sua parti&ccedil;&atilde;o
<tt>/var</tt> significativamente maior, ou coloc&aacute;-los em uma
parti&ccedil;&atilde;o separada.
<li>Para um sistema multi-usu&aacute;rio que pode gerar muitos logs,
voc&ecirc; ir&aacute; querer fazer sua parti&ccedil;&atilde;o
<tt>/var</tt> ainda maior, ou criar uma parti&ccedil;&atilde;o separada
para os logs (<tt>/var/log</tt>).
<li>Se voc&ecirc; planeja <a href="faq5.html">recompilar o kernel e o
sistema a partir dos fontes</a>, voc&ecirc; ir&aacute; querer fazer a
parti&ccedil;&atilde;o <tt>/usr</tt> significativamente maior, 4G
n&atilde;o &eacute; um tamanho ruim.
<li>Compilar alguns <a href="../faq15.html#Ports">ports</a> a partir dos
fontes pode ocupar grandes quantidades de espa&ccedil;o em suas
parti&ccedil;&otilde;es <tt>/usr</tt> e <tt>/tmp</tt>. Esta &eacute;
outra raz&atilde;o pela qual sugerimos a utiliza&ccedil;&atilde;o de <a
href="../faq15.html#PkgMgmt">pacotes pr&eacute;-compilados</a>.
<li>A parti&ccedil;&atilde;o <tt>/tmp</tt> &eacute; usada durante a
compila&ccedil;&atilde;o de ports, dentre outras coisas, ent&atilde;o
seu tamanho depende do que voc&ecirc; ir&aacute; fazer com ela. 50M
podem ser suficientes para a maioria das pessoas, mas algumas
aplica&ccedil;&otilde;es maiores podem requerer 100M ou mais de
espa&ccedil;o no <tt>/tmp</tt>.
<li>A parti&ccedil;&atilde;o 'b' de seu drive root automaticamente se
torna a parti&ccedil;&atilde;o swap de seu sistema.
Muitas pessoas seguem uma antiga regra de que sua parti&ccedil;&atilde;o
swap deve ter o dobro do tamanho da mem&oacute;ria RAM do sistema.
Esta regra n&atilde;o faz sentido.
Em um sistema moderno, isso &eacute; um MONTE de swap, e a maioria das
pessoas prefere que seu sistema nunca utilize a swap.
Voc&ecirc; ir&aacute; querer que seu sistema nunca fique sem
espa&ccedil;o de RAM+swap, mas &eacute; geralmente melhor ter RAM
suficiente no sistema para n&atilde;o ser necess&aacute;rio usar a swap.
Se voc&ecirc; est&aacute; usando um dispositivo flash como disco,
voc&ecirc; provavelmente n&atilde;o ir&aacute; sequer querer uma
parti&ccedil;&atilde;o swap.
Use o que for mais apropriado para suas necessidades.
Se voc&ecirc; errar, voc&ecirc; pode adicionar outra
parti&ccedil;&atilde;o swap em <i>/etc/fstab</i> ou
<a href="../faq14.html#SwapFile">fazer swap para um arquivo</a> depois.
<li>Espa&ccedil;o de swap e do <tt>/var</tt> s&atilde;o usados para
guardar core dumps do sistema caso ocorra um
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=crash&amp;sektion=8">crash(8)</a>.
Se isto &eacute; um fator importante para voc&ecirc;, seu espa&ccedil;o
de swap deve ser ligeiramente maior que o tamanho da mem&oacute;ria
total que voc&ecirc; pode ter no sistema.
Ap&oacute;s reiniciar, o
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=savecore&amp;sektion=8">savecore(8)</a>
ir&aacute; tentar salvar o conte&uacute;do da parti&ccedil;&atilde;o
swap em um arquivo em <tt>/var/crash</tt> ent&atilde;o, novamente, se
isto &eacute; uma prioridade para voc&ecirc;, sua parti&ccedil;&atilde;o
<tt>/var</tt> deve ter <i>espa&ccedil;o livre</i> suficiente para
guardar estes arquivos de dump.
Seja realista -- poucos desenvolvedores ir&atilde;o querer ver seu
arquivo dump de 1GB, ent&atilde;o se voc&ecirc; n&atilde;o planeja
investigar um crash localmente, isto provavelmente n&atilde;o &eacute;
uma preocupa&ccedil;&atilde;o.
<li>Alguns editores usam <tt>/var/tmp</tt> como espa&ccedil;o
tempor&aacute;rio de armazenamento, e este frequentemente deve ser
t&atilde;o grande quanto ou maior que o maior arquivo que voc&ecirc;
editar.
Se voc&ecirc; planeja editar arquivos de 500M, suas
parti&ccedil;&otilde;es <tt>/var</tt> ou <tt>/var/tmp</tt>
dever&atilde;o ser muito maiores do que o que voc&ecirc; pode ter
planejado inicialmente.
</ul>

<p>
H&aacute; muitas raz&otilde;es para utilizar sistemas de arquivos
separados, ao inv&eacute;s de colocar tudo junto em um ou dois sistemas
de arquivos:

<ul>
<li><b>Seguran&ccedil;a</b>: Voc&ecirc; pode marcar alguns sistemas de
arquivos como 'nosuid', 'nodev', 'noexec', 'readonly', etc. Isto
&eacute; feito pelo processo de instala&ccedil;&atilde;o, se voc&ecirc;
utilizar as parti&ccedil;&otilde;es descritas acima.
<li><b>Estabilidade</b>: Um usu&aacute;rio, ou um programa mal
configurado, pode encher um sistema de arquivos com lixo se tiver
permiss&atilde;o para tal. Suas aplica&ccedil;&otilde;es
cr&iacute;ticas, que evidentemente est&atilde;o rodando em outro sistema
de arquivos, n&atilde;o s&atilde;o interrompidas.
<li><b>Velocidade</b>: Um sistema de arquivos com alta frequ&ecirc;ncia
de escrita pode ficar um tanto quanto fragmentado. (Felizmente, o
sistema de arquivos ffs usado pelo OpenBSD n&atilde;o &eacute;
suscet&iacute;vel a grande fragmenta&ccedil;&atilde;o)
<li><b>Integridade</b>: Se um sistema de arquivos &eacute; corrompido
por alguma raz&atilde;o, seus outros sistemas de arquivos ainda
est&atilde;o OK.
<li><b>Tamanho</b>: Muitas m&aacute;quinas imp&otilde;e limites na
&aacute;rea do disco a partir da qual a ROM de boot pode carregar o
kernel. Em alguns casos, esse limite pode ser muito pequeno (504M para
um 486 antigo), e em outros casos, muito maior (por exemplo, 2G, 8G, ou
128G em sistemas i386).
Como o kernel pode ficar em qualquer &aacute;rea dentro da
parti&ccedil;&atilde;o root, toda a parti&ccedil;&atilde;o root deve
estar contida nessa &aacute;rea. Para mais detalhes, veja <a
href="../faq14.html#LargeDrive">esta se&ccedil;&atilde;o</a>. Uma boa
id&eacute;ia &eacute; manter toda a sua parti&ccedil;&atilde;o / dentro
de 2G, a n&atilde;o ser que voc&ecirc; saiba que sua plataforma (ou
m&aacute;quina em particular) pode trabalhar com mais (ou menos) que
isso.
</ul>

<p>
Algumas id&eacute;ias adicionais sobre particionamento:
<ul>
 <li>Para sua primeira tentativa em um sistema experimental, uma
&uacute;nica parti&ccedil;&atilde;o <tt>/</tt> grande e outra de swap
pode ser o mais f&aacute;cil a fazer at&eacute; que voc&ecirc; saiba
quanto espa&ccedil;o &eacute; necess&aacute;rio. Fazendo isso,
voc&ecirc; estar&aacute; sacrificando algumas das funcionalidades
padr&atilde;o de seguran&ccedil;a do OpenBSD que requerem sistemas de
arquivos separados para <tt>/, /tmp, /var, /usr</tt> e <tt>/home</tt>.
Contudo, voc&ecirc; provavelmente n&atilde;o utilizar&aacute; em
produ&ccedil;&atilde;o sua primeira instala&ccedil;&atilde;o do OpenBSD.
 <li>Um sistema exposto &agrave; Internet ou outras for&ccedil;as hostis
deve ter uma parti&ccedil;&atilde;o <tt>/var</tt> (e talvez at&eacute;
mesmo <tt>/var/log</tt>) separada para logging.
 <li>Uma parti&ccedil;&atilde;o <tt>/home</tt> pode ser legal. Nova
vers&atilde;o do SO? Remova e reinstale todo o restante, mantendo sua
parti&ccedil;&atilde;o <tt>/home</tt> intocada. Lembre-se de salvar uma
c&oacute;pia dos seus arquivos de configura&ccedil;&atilde;o!
 <li>Uma parti&ccedil;&atilde;o separada para qualquer coisa que possa
acumular uma grande quantidade de arquivos que podem ter que ser
deletados pode ser mais r&aacute;pida de reformatar e recriar do que de
deletar. Veja o <a href="faq5.html#ProbObjPt">FAQ de
compila&ccedil;&atilde;o a partir dos fontes</a> para um exemplo
(<tt>/usr/obj</tt>).
 <li>Se voc&ecirc; deseja recompilar seu sistema a partir dos fontes por
qualquer raz&atilde;o, os fontes ficar&atilde;o em <tt>/usr/src</tt>. Se
voc&ecirc; n&atilde;o fizer uma parti&ccedil;&atilde;o separada para
<tt>/usr/src</tt>, certifique-se de que <tt>/usr</tt> possui
espa&ccedil;o suficiente.
 <li>Um fato comumente esquecido: voc&ecirc; <b>n&atilde;o</b> tem que
alocar todo o espa&ccedil;o do disco durante a instala&ccedil;&atilde;o
do sistema! J&aacute; que agora &eacute; um desafio comprar um drive
menor que 20G, pode fazer sentido deixar uma parte do drive desalocada.
Se voc&ecirc; encher uma parti&ccedil;&atilde;o, voc&ecirc; pode alocar
uma nova parti&ccedil;&atilde;o no espa&ccedil;o n&atilde;o utilizado,
<a href="../faq10.html#DupFS">duplicar</a> sua parti&ccedil;&atilde;o
existente para a nova parti&ccedil;&atilde;o, alterar
   <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&amp;sektion=5">/etc/fstab</a>
   para apontar para a nova parti&ccedil;&atilde;o, remontar, e agora
voc&ecirc; j&aacute; tem mais espa&ccedil;o.
 <li>Se voc&ecirc; fizer suas parti&ccedil;&otilde;es com tamanho muito
pr&oacute;ximo do m&iacute;nimo recomendado, voc&ecirc; provavelmente
ir&aacute; se arrepender depois, quando for hora de atualizar o sistema.
 <li>Se voc&ecirc; fizer parti&ccedil;&otilde;es muito grandes, tenha em
mente que efetuar checagens de disco usando o
   <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=fsck&amp;sektion=8">fsck(8)</a>
requer cerca de 1M de RAM por gigabyte de tamanho do sistema de
arquivos, e pode ser muito demorado ou at&eacute; mesmo invi&aacute;vel
em sistemas mais antigos e lentos (por favor veja tamb&eacute;m <a
href="../faq14.html#LargeDrive">esta se&ccedil;&atilde;o</a>).
 <li>Se voc&ecirc; permitir que os usu&aacute;rios escrevam em
<tt>/var/www</tt> (i.e., p&aacute;ginas web pessoais), voc&ecirc; pode
querer coloc&aacute;-lo em uma parti&ccedil;&atilde;o separada, para que
voc&ecirc; posso utilizar <a href="../faq10.html#Quotas">quotas</a> para
restringir o espa&ccedil;o usado por cada usu&aacute;rio, e se a
parti&ccedil;&atilde;o ficar cheia, nenhuma outra parte do sistema
ser&aacute; impactada.
 <li>Voc&ecirc; pode tamb&eacute;m querer criar uma
parti&ccedil;&atilde;o <tt>/altroot</tt>, como descrito em
   <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=daily&amp;sektion=8">daily(8)</a>.
Isto pode fazer uma c&oacute;pia di&aacute;ria de sua
parti&ccedil;&atilde;o <tt>/</tt>, entregando-lhe uma c&oacute;pia extra
do kernel e dos arquivos de configura&ccedil;&atilde;o do <tt>/etc</tt>
caso algo aconte&ccedil;a com sua parti&ccedil;&atilde;o root.
Obviamente, a parti&ccedil;&atilde;o <tt>/altroot</tt> deve ser pelo
menos t&atilde;o grande quanto <tt>/</tt>.
Se voc&ecirc; tiver um segundo drive de disco e algo duplicando o
restante de seu disco, como <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=raid&amp;sektion=4">raid(4)</a>
por software ou uma c&oacute;pia peri&oacute;dica usando <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&amp;sektion=8">dump(8)</a
>/<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore(8)</a>,
este disco pode ser boot&aacute;vel ap&oacute;s a remo&ccedil;&atilde;o
do disco prim&aacute;rio.
</ul>


<p>
<a name= "Multibooting"></a>
<h2>4.8 - Boot m&uacute;ltiplo com o OpenBSD/i386</h2>

Boot m&uacute;ltiplo &eacute; ter diversos sistemas operacionais em um
computador, e alguma maneira de selecionar qual SO bootar.
<i>N&atilde;o</i> &eacute; uma tarefa trivial! Se voc&ecirc; n&atilde;o
entender o que est&aacute; fazendo, voc&ecirc; pode terminar deletando
grandes quantidades de dados do seu computador. Usu&aacute;rios novatos
do OpenBSD s&atilde;o <i>fortemente</i> encorajados a come&ccedil;ar com
um drive de disco livre em uma m&aacute;quina dedicada, e ent&atilde;o
praticar a configura&ccedil;&atilde;o desejada em um sistema que
n&atilde;o seja de produ&ccedil;&atilde;o antes de tentar uma
configura&ccedil;&atilde;o multiboot em uma m&aacute;quina de
produ&ccedil;&atilde;o. O <a href="../faq14.html">FAQ 14</a> tem mais
informa&ccedil;&otilde;es sobre o processo de boot do OpenBSD.

<p>
Apenas uma das quatro parti&ccedil;&otilde;es <i>prim&aacute;rias</i> da
MBR pode ser usada para bootar o OpenBSD (i.e., parti&ccedil;&otilde;es
estendidas n&atilde;o ir&atilde;o funcionar).

<p>
Aqui est&atilde;o v&aacute;rias op&ccedil;&otilde;es para multibooting:

<h3>Configurando parti&ccedil;&otilde;es ativas</h3>
Esta &eacute; provavelmente a menos notada, e no entanto, algumas vezes
a melhor solu&ccedil;&atilde;o para multibooting. Simplesmente configure
a parti&ccedil;&atilde;o ativa em qualquer SO que voc&ecirc; esteja
usando no momento para ser a que voc&ecirc; deseja bootar por
padr&atilde;o no pr&oacute;ximo boot. Virtualmente qualquer SO oferece
um programa para fazer isso; o do OpenBSD &eacute; o <a
href="../faq14.html#fdisk">fdisk(8)</a>, h&aacute; programas com nomes
similares no Windows 9x e DOS, e em muitos outros sistemas operacionais.
Isto pode ser muito desej&aacute;vel para SOs ou sistemas que levam
muito tempo para desligar e reiniciar -- voc&ecirc; pode fazer a
configura&ccedil;&atilde;o e iniciar o processo de reboot, ent&atilde;o
sair e pegar uma x&iacute;cara de caf&eacute;, e voltar ao sistema que
voc&ecirc; desejava j&aacute; iniciado -- sem ter que esperar pelo
Momento M&aacute;gico para selecionar o pr&oacute;ximo SO.

<h3>Disquete de boot</h3>
Se voc&ecirc; tem um sistema que &eacute; usado para bootar o OpenBSD
com pouca frequ&ecirc;ncia (ou n&atilde;o quer que outros
usu&aacute;rios do computador notem que algo tenha mudado), considere
utilizar um disquete de boot. Simplesmente use um dos <a
href="#MkFlop">disquetes de instala&ccedil;&atilde;o do OpenBSD</a>, e
crie um arquivo <tt>/etc/boot.conf</tt> (sim, voc&ecirc; tamb&eacute;m
ter&aacute; que criar um diret&oacute;rio <tt>/etc</tt> no disquete) com
o seguinte conte&uacute;do:
d2029 1
a2029 1
     boot hd0a:/bsd
d2032 7
a2038 7
para fazer o sistema bootar a partir do drive de disco 0,
parti&ccedil;&atilde;o OpenBSD 'a', arquivo de kernel <tt>/bsd</tt>.
Note que voc&ecirc; tamb&eacute;m pode bootar a partir de outros drives
com uma linha como: "<tt>boot hd2a:/bsd</tt>" para efetuar boot a partir
do terceiro drive de disco do seu sistema. Para bootar o OpenBSD, insira
o disquete, reinicie. Para bootar o outro SO, retire o disquete,
reinicie. 
d2042 8
a2049 9
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">boot(8)</a>
&eacute; carregado a partir do disquete, busca e l&ecirc; o arquivo
<tt>/etc/boot.conf</tt>. A linha "<tt>boot hd0a:/bsd</tt>" instrui
boot(8) sobre a partir de onde carregar o kernel -- neste caso, o
primeiro HD visto pela BIOS. Tenha em mente que apenas um pequeno
arquivo (<tt>/boot</tt>) &eacute; carregado do disquete -- o sistema
carrega todo o kernel a partir do disco, ent&atilde;o isso adiciona
apenas cerca de cinco segundos ao tempo do processo de boot.
d2053 6
a2058 8
Para multiboot entre o OpenBSD e Windows NT/2000/XP, voc&ecirc; pode
usar o NTLDR, o carregador de boot utilizado pelo NT. Para multiboot com
o NT, voc&ecirc; precisa de uma c&oacute;pia do Partition Boot Record
(PBR) do OpenBSD. Ap&oacute;s rodar installboot, voc&ecirc; pode
copi&aacute;-lo para um arquivo usando
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=1">dd(1)</a>,
seguindo um processo similar a:
d2064 4
a2067 7
Nota: este &eacute; realmente um bom momento para lembr&aacute;-lo que
digitar cegamente comandos que voc&ecirc; n&atilde;o entende &eacute;
uma p&eacute;ssima id&eacute;ia.
Esta linha n&atilde;o ir&aacute; funcionar diretamente na maioria dos
computadores.
&Eacute; deixado ao leitor o exerc&iacute;cio de adapt&aacute;-la para
sua m&aacute;quina.
d2070 2
a2071 2
Agora d&ecirc; boot no NT e coloque <tt>openbsd.pbr</tt> no C:. Adicione
uma linha como esta ao final do arquivo <tt>C:\BOOT.INI</tt>:
d2078 4
a2081 4
Quando voc&ecirc; reiniciar, voc&ecirc; deve conseguir selecionar o
OpenBSD no menu do carregador NT. H&aacute; muito mais
informa&ccedil;&atilde;o sobre o NTLDR no <a
href="http://www.tburke.net/info/ntldr/ntldr_hacking_guide.htm">NTLDR
d2085 4
a2088 4
No Windows XP voc&ecirc; tamb&eacute;m pode editar a
informa&ccedil;&atilde;o de boot usando a GUI; veja o <a
href="http://support.microsoft.com/default.aspx?scid=kb;en-us;289022">XP
Boot.ini HOWTO</a>.
d2091 5
a2095 7
Programas que fazem boa parte disso para voc&ecirc; est&atilde;o
dispon&iacute;veis, por exemplo, o <a
href="http://www.winimage.com/bootpart.htm">BootPart</a>.
Este programa pode ser executado a partir do Windows NT/2000/XP, e
ir&aacute; carregar a PBR do OpenBSD, coloc&aacute;-la em sua
parti&ccedil;&atilde;o NT/2000/XP, e adicion&aacute;-la ao
<tt>C:\BOOT.INI</tt>
d2098 4
a2101 4
Nota: O carregador de boot do Windows NT/2000/XP &eacute; capaz apenas
de bootar SOs do drive de disco prim&aacute;rio.
Voc&ecirc; n&atilde;o pode us&aacute;-lo para carregar o OpenBSD a
partir do drive secund&aacute;rio de um sistema.
d2104 1
a2104 1
<h3>Outros gerenciadores de boot</h3>
d2107 5
a2111 5
Alguns outros gerenciadores de boot usados com sucesso pelos
usu&aacute;rios do OpenBSD incluem o <a
href="http://gag.sourceforge.net/">GAG</a>, OS-BS, <a
href="http://www.ranish.com/part/">The Ranish Partition Manager</a> e <a
href="http://www.gnu.org/software/grub/">GRUB</a>. 
d2118 3
a2120 5
Por favor veja
<a
href="ftp://ftp.openbsd.org/pub/OpenBSD/4.4/i386/INSTALL.linux">INSTALL.linux</a>,
que d&aacute; instru&ccedil;&otilde;es detalhadas para fazer o OpenBSD
funcionar com o Linux.
d2122 2
a2123 2
<h3>Problemas com fuso hor&aacute;rio</h3>
O OpenBSD espera que o rel&oacute;gio em tempo real do computador esteja
d2125 8
a2132 7
Alguns outros SOs esperam que o rel&oacute;gio em tempo real esteja
configurado para a hora local. Obviamente, isto pode ser um problema se
voc&ecirc; est&aacute; usando ambos os SOs no mesmo computador.
Um ou outro ter&aacute; que ser adaptado. H&aacute; mais
informa&ccedil;&otilde;es sobre como fazer isso no <a
href="../faq8.html#TimeZone">FAQ 8 - Por que meu rel&oacute;gio
est&aacute; defasado em v&aacute;rias horas?</a>
d2134 3
a2136 3
<a name= "SendDmesg"></a>
<h2>4.9 - Enviando seu dmesg para dmesg@@openbsd.org ap&oacute;s a
instala&ccedil;&atilde;o</h2>
d2139 2
a2140 3
Apenas para relembrar as pessoas, &eacute; importante para os
desenvolvedores do OpenBSD ter informa&ccedil;&otilde;es sobre qual
hardware funciona, e qual hardware n&atilde;o funciona perfeitamente.
d2143 1
a2143 1
Uma cita&ccedil;&atilde;o a partir de /usr/src/etc/root/root.mail
d2145 10
a2154 20
If you wish to ensure that OpenBSD runs better on your machines, please
do us
a favor (after you have your mail system configured!) and type something
like:
 # dmesg | mail -s "Sony VAIO 505R laptop, apm works OK"
dmesg@@openbsd.org
so that we can see what kinds of configurations people are running.  As
shown,
including a bit of information about your machine in the subject or the
body
can help us even further.  We will use this information to improve
device driver
support in future releases.  (Please do this using the supplied GENERIC
kernel,
not for a custom compiled kernel, unless you're unable to boot the
GENERIC
kernel.  If you have a multi-processor machine, dmesg results of both
GENERIC.MP
and GENERIC kernels are appreciated.)  The device driver information we
get from
d2159 7
a2165 8
Certifique-se de que voc&ecirc; envie o email a partir de uma conta que
tamb&eacute;m pode receber email para que os desenvolvedores possam
contat&aacute;-lo se eles tiverem algo que gostariam que voc&ecirc;
testasse ou alterasse para que sua configura&ccedil;&atilde;o funcione.
N&atilde;o &eacute; necess&aacute;rio, de forma alguma, enviar o email a
partir da mesma m&aacute;quina que est&aacute; rodando o OpenBSD,
ent&atilde;o se essa m&aacute;quina n&atilde;o tiver como receber email,
apenas execute
d2170 1
a2170 1
e ent&atilde;o encaminhe essa mensagem para
d2174 1
a2174 2
onde <tt>your-account@@yourmail.dom</tt> &eacute; sua conta de email
normal.
d2180 12
a2191 14
<li>Por favor envie apenas mensagens do kernel GENERIC.
Kernels customizados que t&ecirc;m drivers de dispositivo removidos
n&atilde;o s&atilde;o &uacute;teis.
<li>Se voc&ecirc; tem um sistema multiprocessado suportado e normalmente
usa o kernel GENERIC.MP, &eacute; interessante para os desenvolvedores
ver tanto o output do dmesg para o kernel GENERIC e GENERIC.MP,
ent&atilde;o por favor envie ambos em emails separados.
<li>Os dmesgs s&atilde;o recebidos em um computador usando o sistema de
rejei&ccedil;&atilde;o de spam
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd</a>
Isto pode fazer com que seu dmesg n&atilde;o seja aceitado pelos
servidores de email por algum per&iacute;odo de tempo.
Seja paciente, ap&oacute;s cerca de meia hora, ele ir&aacute; passar.
d2195 3
a2197 4
O m&eacute;todo acima &eacute; muito simples, mas mesmo se voc&ecirc;
n&atilde;o escolher configurar email em seu sistema OpenBSD, voc&ecirc;
ainda deve enviar seu dmesg para os desenvolvedores. Salve o output do
dmesg em um arquivo texto.
d2203 16
a2218 17
Ent&atilde;o transfira esse arquivo (usando
FTP/scp/disquete/pombo-correio/...) para o sistema que voc&ecirc;
normalmente usa para email.
J&aacute; que output do dmesg enviado &eacute; processado
automaticamente, tenha certeza de checar o seguinte ao utilizar
clientes/sistemas de email alternativos:
<ul>
<li>Configure seu cliente de email para enviar mensagens como texto
puro; n&atilde;o use email formatado em HTML.
<li>Desligue qualquer funcionalidade de quebra de linha
autom&aacute;tica. Muitos clientes de email s&atilde;o configurados para
inserir quebras de linha a cada 72 colunas (o padr&atilde;o para listas
de discuss&atilde;o).
<li>Certifique-se de que seu cliente de email n&atilde;o reformata a
mensagem em "fluxo de texto" sem sentido.
<li>N&atilde;o envie o output do dmesg como arquivo em anexo. Coloque o
output do dmesg no corpo da mensagem.
d2223 1
a2223 2
<h2>4.10 - Adicionando pacotes de arquivos ap&oacute;s a
instala&ccedil;&atilde;o</h2>
d2225 2
a2226 2
"Oh n&atilde;o! Eu esqueci de adicionar um pacote de arquivos quando fiz
a instala&ccedil;&atilde;o!"
d2228 12
a2239 14
Algumas vezes, voc&ecirc; percebe que REALMENTE precisava de
<tt>comp44.tgz</tt> (ou qualquer outro componente de sistema) no fim das
contas, mas voc&ecirc; n&atilde;o percebeu isso durante a
instala&ccedil;&atilde;o do sistema. Boas not&iacute;cias: h&aacute;
duas maneiras f&aacute;ceis de adicionar pacotes de arquivos ap&oacute;s
a instala&ccedil;&atilde;o inicial:

<h3>Usando o processo de upgrade</h3>
Simplesmente d&ecirc; boot em sua m&iacute;dia de
instala&ccedil;&atilde;o (CD-ROM ou Disquete), e escolha Upgrade (ao
inv&eacute;s de Install). Quando voc&ecirc; chegar &agrave; lista de
pacotes de arquivos a instalar, escolha os pacotes que voc&ecirc;
esqueceu de instalar da primeira vez, selecione a fonte, e deixe-a
instal&aacute;-los para voc&ecirc;.
d2242 2
a2243 3
Os pacotes de arquivos de instala&ccedil;&atilde;o s&atilde;o
simplesmente arquivos tar compactados, e voc&ecirc; pode expandi-los
manualmente a partir da raiz do sistema de arquivos:
d2252 2
a2253 2
N&Atilde;O esque&ccedil;a a op&ccedil;&atilde;o <tt>'p'</tt> no comando
acima para recuperar as permiss&otilde;es de arquivos corretamente!
d2255 15
a2269 19
Um erro comum &eacute; pensar que voc&ecirc; pode usar o
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1">pkg_add(1)</a>
para adicionar pacotes de arquivos faltantes. Isso n&atilde;o funciona.
pkg_add(1) &eacute; a <a href="../faq15.html#PkgMgmt">ferramenta de
gerenciamento de pacotes</a> para instalar software de terceiros.
Ele gerencia arquivos de pacotes, n&atilde;o arquivos tar
gen&eacute;ricos como os pacotes de arquivos de
instala&ccedil;&atilde;o.

<p>
Se voc&ecirc; est&aacute; instalando o pacote de arquivos <tt>xbase</tt>
em seu sistema pela primeira vez usando tar(1) e sem reiniciar, a cache
de bibliotecas compartilhadas deve ser atualizada ap&oacute;s a
instala&ccedil;&atilde;o usando
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ldconfig&amp;sektion=8"
>ldconfig(8)</a>.
Para adicionar todas as bibliotecas X &agrave; cache:
d2275 3
a2277 3
Alternativamente, voc&ecirc; pode apenas reiniciar o sistema, e isso
ser&aacute; feito automaticamente pelo script
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;sektion=8"
d2280 2
d2283 3
a2285 2
<a name="bsd.rd"></a>
<h2>4.11 - O que &eacute; 'bsd.rd'?</h2>
d2287 7
a2293 24
<b><tt>bsd.rd</tt></b> &eacute; um kernel em "RAM Disk". Este arquivo
pode ser muito &uacute;til; muitos desenvolvedores t&ecirc;m o cuidado
de mant&ecirc;-lo sempre na raiz de seu sistema de arquivos.

<p>
Cham&aacute;-lo de um "Kernel em RAM Disk" descreve o sistema de
arquivos raiz do kernel -- ao inv&eacute;s de ser um dispositivo
f&iacute;sico, as ferramentas dispon&iacute;veis ap&oacute;s o boot de
<tt>bsd.rd</tt> s&atilde;o guardadas dentro do kernel, e s&atilde;o
executadas a partir de um sistema de arquivos em RAM. <tt>bsd.rd</tt>
tamb&eacute;m inclui uma boa quantidade de ferramentas para permitir que
voc&ecirc; fa&ccedil;a manuten&ccedil;&atilde;o do sistema e
instala&ccedil;&atilde;o.

<p>
Em algumas plataformas, <tt>bsd.rd</tt> &eacute; na realidade o
m&eacute;todo preferencial de instala&ccedil;&atilde;o -- voc&ecirc;
coloca este kernel em um sistema de arquivos preexistente, o carrega, e
executa a instala&ccedil;&atilde;o a partir dele. Na maioria das
plataformas, se voc&ecirc; tem uma vers&atilde;o antiga do OpenBSD
operando, voc&ecirc; pode baixar via FTP uma nova vers&atilde;o de
<tt>bsd.rd</tt>, reiniciar a partir dele, e instalar uma nova
vers&atilde;o do OpenBSD sem nunca utilizar qualquer tipo de
m&iacute;dia remov&iacute;vel.
d2296 11
a2306 2
Aqui est&aacute; um exemplo do boot de <tt>bsd.rd</tt> em um sistema
i386:
d2318 6
a2323 8
Como indicado, voc&ecirc; ser&aacute; levado ao programa de
instala&ccedil;&atilde;o, mas pode tamb&eacute;m utilizar o shell a
qualquer momento para manuten&ccedil;&atilde;o do sistema.
<p>
A regra geral para boot de <tt>bsd.rd</tt> &eacute; alterar seu kernel
de boot de <tt>/bsd</tt> para <tt>bsd.rd</tt> atrav&eacute;s de qualquer
meio usado em sua plataforma.

d2326 1
a2326 1
<h2>4.12 - Problemas comuns de instala&ccedil;&atilde;o</h2>
d2329 11
a2339 13
<h3>4.12.1 - Meu Compaq reconhece apenas 16M de RAM</h3>
<i>Alguns</i> sistemas Compaq t&ecirc;m um problema em que toda a RAM do
sistema n&atilde;o &eacute; detectada pelo
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">carregador
de boot de segundo est&aacute;gio do OpenBSD</a> corretamente, e apenas
16M podem ser detectados e usados pelo OpenBSD. Isto pode ser corrigido
tanto criando/editando o arquivo
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot.conf&amp;sektion=8&amp;arch=i386"><tt>/etc/boot.conf</tt></a>,
ou digitando comandos no prompt "<tt>boot></tt>" antes do carregamento
do OpenBSD. Se voc&ecirc; tem uma m&aacute;quina com 64M de RAM, mas o
OpenBSD detectou apenas os primeiros 16M, o comando a utilizar seria:
d2342 1
a2342 1
     machine mem +0x3000000@@0x1000000
d2344 7
a2350 7
para adicionar 48M (<tt>0x3000000</tt>) ap&oacute;s os primeiros 16M
(<tt>0x1000000</tt>). Tipicamente, se voc&ecirc; tem uma m&aacute;quina
com este problema, voc&ecirc; primeiro digitaria o comando acima no
prompt <tt>boot></tt> do disquete/CD-ROM de instala&ccedil;&atilde;o,
carregaria o sistema, reiniciaria, e criaria um arquivo
<tt>/etc/boot.conf</tt> contendo a linha acima para que todos os boots
futuros reconhe&ccedil;am toda a RAM dispon&iacute;vel.
d2353 2
a2354 2
Tamb&eacute;m foi reportado que uma atualiza&ccedil;&atilde;o da ROM
poderia corrigir isso em <i>alguns</i> sistemas.
d2357 23
a2379 27
<h3>4.12.2 - Meu i386 n&atilde;o d&aacute; boot ap&oacute;s a
instala&ccedil;&atilde;o</h3>
Sua instala&ccedil;&atilde;o pareceu funcionar bem, mas no primeiro
boot, voc&ecirc; n&atilde;o v&ecirc; qualquer sinal do OpenBSD tentando
bootar. H&aacute; algumas raz&otilde;es comuns para este problema:

<ul>
<li><b>Nenhuma parti&ccedil;&atilde;o foi marcada como ativa no
fdisk(8).</b> Para corrigir isso, reinicie a m&aacute;quina usando o
disquete ou m&iacute;dia de boot, e "marque" a parti&ccedil;&atilde;o
como "ativa" (boot&aacute;vel). Veja <a
href="../faq14.html#fdisk">aqui</a> e <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">aqui</a>.

<li><b>Nenhum carregador de boot v&aacute;lido foi colocado no
disco.</b> Se voc&ecirc; responder "Y" para a pergunta "Use entire disk
for OpenBSD?" durante a instala&ccedil;&atilde;o, ou usar a
op&ccedil;&atilde;o "<tt>reinit</tt>" do fdisk(8), o boot record do
OpenBSD ser&aacute; instalado no Master Boot Record do disco; caso
contr&aacute;rio, o c&oacute;digo da MBR existente permanece intocado.
Isto ser&aacute; um problema se n&atilde;o existia nenhum outro
c&oacute;digo de boot.
Uma solu&ccedil;&atilde;o &eacute; bootar a m&iacute;dia de
instala&ccedil;&atilde;o novamente, ir ao shell e usar o
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>
para atualizar o c&oacute;digo da MBR a partir da linha de comando:
d2383 8
a2390 9
Nota: a op&ccedil;&atilde;o "update" do modo interativo ("-e") do fdisk
n&atilde;o ir&aacute; escrever os bytes de assinatura necess&aacute;rios
para tornar o disco boot&aacute;vel.

<li><b>Em algumas ocasi&otilde;es raras, algo pode dar errado com a
instala&ccedil;&atilde;o do carregador de boot de segundo
est&aacute;gio.</b> A reinstala&ccedil;&atilde;o do carregador de boot
de segundo est&aacute;gio &eacute; discutida <a
href="../faq14.html#InstBoot">aqui</a>.
d2395 16
a2410 19
<h3>4.12.3 - Minha m&aacute;quina (mais antiga, mais lenta) bootou, mas
parou no processo de gera&ccedil;&atilde;o de chaves SSH</h3>
&Eacute; muito prov&aacute;vel que sua m&aacute;quina esteja operando
sem problemas, apenas demorando um pouco para completar o processo de
gera&ccedil;&atilde;o de chaves ssh. Um SPARCStation2 ou Macintosh
Quadra podem demorar <i>v&aacute;rias horas</i> para completar os
tr&ecirc;s passos do
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-keygen&amp;sektion=1">ssh-keygen(1)</a>.
Apenas deixe que termine; s&oacute; &eacute; feito uma vez por
instala&ccedil;&atilde;o.

<p>
Note que o tamanho padr&atilde;o de chave foi aumentado no OpenBSD 3.8,
ent&atilde;o os tempos de gera&ccedil;&atilde;o s&atilde;o muito maiores
do que costumavam ser. Usu&aacute;rios de m&aacute;quinas muito lentas
podem querer gerar suas chaves em outro computador, coloc&aacute;-las no
arquivo <a href="#site">site44.tgz</a>, e instal&aacute;-las como parte
do restante dos pacotes de arquivos.
d2414 2
a2415 2
<h3>4.12.4 - Obtive a mensagem "Failed to change directory" ao executar
a instala&ccedil;&atilde;o</h3>
d2417 3
a2419 3
Ao fazer uma instala&ccedil;&atilde;o via FTP de um <a
href="faq5.html#Flavors">snapshot</a> durante o est&aacute;gio
<i>-beta</i> de desenvolvimento do OpenBSD, voc&ecirc; pode ver isto:
d2426 1
a2426 1
  Server IP address or hostname? 
d2429 5
a2433 6
Este &eacute; o comportamento normal e esperado durante a parte
pr&eacute;-release do ciclo. O programa de instala&ccedil;&atilde;o
busca pela lista FTP no servidor FTP prim&aacute;rio em um
diret&oacute;rio que n&atilde;o estar&aacute; dispon&iacute;vel
at&eacute; a <a href="faq1.html#Next">data de release</a>, ent&atilde;o
voc&ecirc; obt&eacute;m a mensagem acima.
d2436 4
a2439 3
Simplesmente use a <a href="../../ftp.html">lista de espelhos FTP</a>
para encontrar seu espelho FTP preferido, e informe seu nome manualmente
quando questionado.
d2442 2
a2443 2
<b>Nota: Voc&ecirc; n&atilde;o deve ver esta mensagem se est&aacute;
instalando <i>-release</i> ou a partir de um CD-ROM.</b>
d2446 23
a2468 27
<h3>4.12.5 - Minha tabela de parti&ccedil;&otilde;es do fdisk
est&aacute; corrompida ou vazia!</h3>
Ocasionalmente, um usu&aacute;rio ir&aacute; obter um sistema que
funciona, mas ao executar <tt>fdisk wd0</tt>, ir&aacute; ver uma tabela
de parti&ccedil;&otilde;es completamente vazia (ou, algumas vezes,
corrompida).
Isto geralmente &eacute; causado por ter sido criada uma
parti&ccedil;&atilde;o com offset de zero setores no
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>,
ao inv&eacute;s do <a href="#trackoffset">offset de uma trilha</a> com
que deveria ter sido criada (nota: isto est&aacute; assumindo as
plataformas <a href="../../i386.html">i386</a> ou <a
href="../../amd64.html">amd64</a>.
Outras plataformas t&ecirc;m requisi&ccedil;&otilde;es diferentes de
offset, algumas n&atilde;o precisam de NENHUM offset).
O sistema ent&atilde;o <a href="../faq14.html#Boot386">efetua boot</a>
usando a PBR, n&atilde;o a MBR.

<p>
Muito embora essa configura&ccedil;&atilde;o possa funcionar, ela pode
ser um problema de manuten&ccedil;&atilde;o e deve ser corrigida.
Para corrigir isso, os sistemas de arquivos do disco geralmente devem
ser recriados do zero (mas se voc&ecirc; REALMENTE souber o que
est&aacute; fazendo, voc&ecirc; pode conseguir recriar apenas o
disklabel e a MBR, e perder e ter que recriar apenas a primeira
parti&ccedil;&atilde;o OpenBSD do disco).
d2471 1
a2471 1
<h2>4.13 - Customizando o processo de instala&ccedil;&atilde;o</h2>
d2474 94
a2567 120
<h3>Arquivo <tt>siteXX.tgz</tt></h3>
Os scripts de instala&ccedil;&atilde;o/upgrade do OpenBSD permitem a
sele&ccedil;&atilde;o de um pacote de arquivos criado pelo
usu&aacute;rio com nome "<tt>siteXX.tgz</tt>", onde XX &eacute; a
vers&atilde;o de release (p.ex. 44). O pacote de arquivos
<tt>siteXX.tgz</tt> &eacute;, como qualquer outro
<a href="#FilesNeeded">pacote de arquivos</a>, um arquivo
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=tar&amp;sektion=1">tar(1)</a>
compactado com
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=gzip&amp;sektion=1">gzip(1)</a>
com raiz no '/' e descompactado como os outros pacotes com as
op&ccedil;&otilde;es <tt>xzphf</tt>. Este pacote ser&aacute; instalado
por &uacute;ltimo, depois de todos os pacotes de arquivos.

<p>
Este pacote de arquivos permite ao usu&aacute;rio adicionar e/ou
sobrescrever os arquivos instalados pelos pacotes 'normais' e com isso
customizar a instala&ccedil;&atilde;o ou upgrade.

<p>
Voc&ecirc; tamb&eacute;m pode criar e usar pacotes de
instala&ccedil;&atilde;o espec&iacute;ficos por hostname, com nomes
<tt>siteXX-<i>&lt;hostname&gt;.tgz</i></tt>, por exemplo,
"<tt>site44-puffy.tgz</tt>".
Isto permite f&aacute;cil instala&ccedil;&atilde;o, upgrade ou
recupera&ccedil;&atilde;o de falha customizada por host.

<p>
Alguns exemplos de uso de um arquivo <tt>siteXX.tgz</tt>:
<ul>
<li>Crie um arquivo siteXX.tgz que contenha todas as
altera&ccedil;&otilde;es de arquivos feitas desde a
instala&ccedil;&atilde;o do OpenBSD. Ent&atilde;o, se voc&ecirc; tiver
que recriar o sistema, simplesmente selecione siteXX.tgz durante a
reinstala&ccedil;&atilde;o e todas as suas modifica&ccedil;&otilde;es
s&atilde;o replicadas no novo sistema.

<li>Crie uma s&eacute;rie de diret&oacute;rios espec&iacute;ficos por
m&aacute;quina, cada qual contendo um pacote siteXX.tgz com arquivos
espec&iacute;ficos para aqueles tipos de m&aacute;quina. A
instala&ccedil;&atilde;o de m&aacute;quinas (p.ex. computadores com
placas de v&iacute;deos diferentes) de uma categoria em particular pode
ser completada selecionando o arquivo siteXX.tgz apropriado.

<li>Coloque os arquivos que voc&ecirc; rotineiramente customiza da mesma
forma ou de maneira similar em um arquivo siteXX.tgz -- arquivos
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&amp;sektion=8"
><tt>/etc/skel</tt></a>,
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5"
><tt>/etc/pf.conf</tt></a>, 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8"
><tt>/var/www/conf/httpd.conf</tt></a>,
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf.local&amp;sektion=8"
><tt>/etc/rc.conf.local</tt></a>,
etc. 
</ul>

<h3>Scripts <tt>install.site</tt>/<tt>upgrade.site</tt></h3>
Como &uacute;ltimo passo do processo de
instala&ccedil;&atilde;o/upgrade, os scripts buscam no diret&oacute;rio
root do sistema rec&eacute;m instalado/atualizado um script com nome
<tt>install.site</tt> ou <tt>upgrade.site</tt>, de acordo com o processo
atual, e executam esse script em um ambiente com 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&amp;sektion=8">chroot</a>
em rela&ccedil;&atilde;o &agrave; raiz do sistema instalado/atualizado.
Lembre-se, a atualiza&ccedil;&atilde;o &eacute; feita em um sistema de
boot, ent&atilde;o seu sistema de arquivos alvo est&aacute;, na
realidade, montado no <tt>/mnt</tt>.
No entanto, por causa do chroot, seu script pode ser escrito como se
estivesse rodando na raiz "normal" do seu sistema de arquivos. J&aacute;
que esse script &eacute; executado ap&oacute;s a
instala&ccedil;&atilde;o de todos os arquivos, voc&ecirc; tem
funcionalidade quase completa do sistema (em modo monousu&aacute;rio, no
entanto) ao rodar o script.

<p>
Note que o script <tt>install.site</tt> teria que ser colocado dentro do
<tt>arquivo siteXX.tgz</tt>, e o script <tt>upgrade.site</tt> teria que
ser colocado no diret&oacute;rio root antes do upgrade, ou poderia
tamb&eacute;m ser colocado em um arquivo <tt>siteXX.tgz</tt>.

<p>
Os scripts podem ser usados para fazer muitas coisas:
<ul>
<li>Remover arquivos que s&atilde;o instalados/atualizados e que
voc&ecirc; n&atilde;o quer no sistema.
<li>Remover/atualizar/instalar <a
href="../faq15.html#PkgMgmt">pacotes</a> que voc&ecirc; deseja no
sistema instalado.
<li>Fazer um <a href="../faq14.html#Backup">backup/arquivamento
imediato</a> do novo sistema antes que voc&ecirc; o exponha ao restante
do mundo.
<li>Usar o
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=rdate&amp;sektion=8">rdate(8)</a>
para ajustar a hora do sistema.
</ul>

<p>
A combina&ccedil;&atilde;o dos arquivos <tt>siteXX.tgz</tt> e
<tt>install.site/upgrade.site</tt> tem como inten&ccedil;&atilde;o dar
aos usu&aacute;rios grande capacidade de customiza&ccedil;&atilde;o sem
exigir que eles tenham que construir seus pr&oacute;prios pacotes de
instala&ccedil;&atilde;o customizados.

<p>
Nota: se voc&ecirc; est&aacute; fazendo sua instala&ccedil;&atilde;o
atrav&eacute;s de um servidor http, voc&ecirc; ter&aacute; que adicionar
seus arquivos <tt>site*.tgz</tt> ao arquivo <tt>index.txt</tt> no
diret&oacute;rio fonte para que eles sejam listados como
op&ccedil;&atilde;o durante a instala&ccedil;&atilde;o.
Isto n&atilde;o &eacute; necess&aacute;rio para FTP ou outros tipos de
instala&ccedil;&atilde;o.
d2571 3
a2573 3
<h2>4.14 - Como posso instalar v&aacute;rios sistemas similares?</h2>
Aqui est&atilde;o algumas ferramentas que voc&ecirc; pode usar quando
tiver que instalar um n&uacute;mero de sistemas OpenBSD similares.
d2575 1
a2575 1
<h3>Arquivos <tt>siteXX.tgz</tt> e <tt>install/upgrade.site</tt></h3>
d2578 17
a2594 19
<h3>Recuperar com dump(8)</h3>
Na maioria das plataformas, a m&iacute;dia de boot inclui o programa
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore(8)</a>,
que pode ser usado para recuperar um backup feito pelo
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&amp;sektion=8">dump(8)</a>.
Assim, voc&ecirc; poderia efetuar boot a partir de
<a href="#MkFlop">disquete</a>, 
<a href="../../orders.html">CD</a>, ou o arquivo
<a href="#bsd.rd">bsd.rd</a>, e ent&atilde;o usar o
<a href="../faq14.html#fdisk">fdisk</a>,
<a href="../faq14.html#disklabel">disklabel</a>, e usar o
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore</a>
para recuperar a configura&ccedil;&atilde;o desejada por fita ou outro
tipo de m&iacute;dia, e instalar os <a
href="../faq14.html#InstBoot">boot blocks</a>. Mais detalhes <a
href="../faq14.html#Backup">aqui</a>.
d2597 17
a2613 22
Infelizmente, n&atilde;o h&aacute; nenhum pacote conhecido para gerar
imagens de disco que interopere com o FFS e fa&ccedil;a uma imagem
contendo apenas o espa&ccedil;o de arquivos ativo. A maioria das
solu&ccedil;&otilde;es de imagem de disco ir&atilde;o tratar o OpenBSD
como uma parti&ccedil;&atilde;o "gen&eacute;rica", e podem fazer uma
imagem de todo o disco. Isto geralmente cumpre seu objetivo, mas
normalmente com muito espa&ccedil;o desperdi&ccedil;ado -- uma
parti&ccedil;&atilde;o <tt>/home</tt> de 10G, vazia, ir&aacute; requerer
10G de espa&ccedil;o na imagem, mesmo se n&atilde;o houver nenhum
arquivo dentro dela. Muito embora voc&ecirc; possa instalar uma imagem
de disco em um drive maior, voc&ecirc; n&atilde;o pode usar o
espa&ccedil;o extra diretamente, e voc&ecirc; n&atilde;o poder&aacute;
instalar a imagem em um drive menor.

<p>
Se esta &eacute; uma situa&ccedil;&atilde;o aceit&aacute;vel, voc&ecirc;
pode achar o comando
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=1">dd</a>
suficiente para fazer o que voc&ecirc; precisa, permitindo que
voc&ecirc; copie um disco para outro, setor por setor. Isto teria a
mesmo funcionalidade que programas comerciais, sem o custo.
d2616 17
a2632 20
<h2>4.15 - Como posso obter a sa&iacute;da do dmesg(8) para reportar um
problema de instala&ccedil;&atilde;o?</h2>
Ao <a href="../../report.html">reportar um problema</a>, &eacute;
cr&iacute;tico incluir o
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg(8)</a>
completo do sistema.
Contudo, muitas vezes quando voc&ecirc; precisa fazer isto, &eacute;
porque o sistema est&aacute; funcionando incorretamente ou n&atilde;o
instala, ent&atilde;o voc&ecirc; pode n&atilde;o ter o disco, rede, ou
outros recursos de que voc&ecirc; precisa para obter o dmesg e enviar
para a
<a href="../../mail.html">lista de emails</a> apropriada. H&aacute;
outras maneiras, no entanto:

<ul>
<li><b>Disquete:</b> O disquete e CD-ROM de boot t&ecirc;m ferramentas
suficientes para permitir que voc&ecirc; grave o seu dmesg para um
disquete MSDOS para leitura em outra m&aacute;quina. Insira um disquete
formatado para MSDOS em seu drive e execute os comandos a seguir:
d2639 4
a2642 5
Se voc&ecirc; possui outro sistema OpenBSD, voc&ecirc; tamb&eacute;m
pode escrever em um disquete compat&iacute;vel com o OpenBSD --
frequentemente, o disquete de boot tem espa&ccedil;o suficiente para
guardar o dmesg. Neste caso, n&atilde;o digite o "<tt>-t msdos</tt>"
acima.
d2646 6
a2651 8
Usar uma console serial para capturar o output de outro computador
&eacute; frequentemente a melhor maneira para capturar
informa&ccedil;&atilde;o de diagn&oacute;stico - particularmente se o
computador entra em pane (panic) imediatamente ap&oacute;s o boot.
Assim como um segundo computador, voc&ecirc; ir&aacute; precisar de um
cabo serial apropriado (normalmente um cabo null-modem), e um programa
de emula&ccedil;&atilde;o de terminal que consiga capturar a tela para
um arquivo.
d2654 3
a2656 5
Informa&ccedil;&otilde;es gerais sobre como configurar uma console
serial s&atilde;o dadas
<a href="../faq7.html#SerCon">em outro lugar do FAQ</a>;
para capturar um log da instala&ccedil;&atilde;o, os comandos a seguir
geralmente s&atilde;o suficientes.
d2671 3
a2673 3
Isto ir&aacute; informar o OpenBSD para usar a primeira porta serial
(frequentemente chamada COM1 ou COMA na documenta&ccedil;&atilde;o para
PCs) como uma console serial. O baud rate padr&atilde;o &eacute; 9600.
d2678 5
a2682 5
Estas m&aacute;quinas ir&atilde;o automaticamente utilizar uma console
serial se iniciadas sem um teclado.
Se voc&ecirc; tiver um teclado e monitor conectados, voc&ecirc; ainda
pode for&ccedil;ar o sistema a usar uma console serial com os seguintes
comandos no prompt <tt>ok</tt>.
d2694 4
a2697 7
<li><b>FTP:</b> Sob algumas circunst&acirc;ncias, e desde que voc&ecirc;
primeiro configure a rede corretamente, voc&ecirc; pode conseguir usar o
cliente 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1">ftp(1)</a>
do disquete ou CD-ROM de boot para enviar o dmesg para um servidor FTP
local, de onde voc&ecirc; pode obt&ecirc;-lo depois.
d2701 4
a2704 6
<font color= "#0000e0">
<a href= "index.html">[&Iacute;ndice do FAQ]</a>
<a href= "faq3.html">[Para a Se&ccedil;&atilde;o 3 - Come&ccedil;ando no
OpenBSD]</a>
<a href= "faq5.html">[Para a Se&ccedil;&atilde;o 5 - Compilando o
Sistema a partir dos Fontes]</a>
d2709 3
a2711 3
<a href= "index.html"><img height= "24" width= "24" src=
"../../images/back.gif" border= "0" alt= "[back]"></a> 
<a href= "mailto:www@@openbsd.org">www@@openbsd.org</a>
d2715 2
a2716 2
Originally [OpenBSD: faq4.html,v 1.271 ]<br>
$Translation: faq4.html,v 1.14 2009/02/25 14:24:53 dsantos Exp $<br>
@


1.8
log
@Sync with Steelix CVS
@
text
@d3096 2
a3097 2
Originally [OpenBSD: faq4.html, v 1.271 ]<br>
$Translation: faq4.html,v 1.13 2009/02/19 01:14:46 dsantos Exp $<br>
@


1.7
log
@Sync with steelix translation CVS
@
text
@d4 2
a5 2
<title>4 - OpenBSD 4.1 Guia de Instala&ccedil;&atilde;o</title>
<link rev="made" href="mailto:www@@openbsd.org">
d7 6
a12 5
<meta name="resource-type" content="document">
<meta name="description" content="the OpenBSD FAQ page">
<meta name="keywords" content="openbsd,faq">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1998-2007 by OpenBSD.">
d17 1
a17 1
<body bgcolor="#ffffff" text="#000000">
d20 2
a21 2
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif"
border="0"> 
d25 6
a30 4
<font color="#0000e0">
<a href="index.html">[&Iacute;ndice do FAQ]</a>
<a href="../faq3.html">[Para Se&ccedil;&atilde;o 3 - Obtendo o OpenBSD]</a>
<a href="../faq5.html">[Para Se&ccedil;&atilde;o 5 - Construindo o Sistema a partir da fonte]</a>
d33 2
a34 1
<h1><font color="#e00000">4 - Guia de Instala&ccedil;&atilde;o do OpenBSD 4.1</font></h1>
d40 7
a46 6
<li><a href="#Overview"			>4.1 - Vis&atilde;o geral do processo de 
	instala&ccedil;&atilde;o do OpenBSD</a>
<li><a href="#Checklist"		>4.2 - Lista de verifica&ccedil;&otilde;es 
	antes da instala&ccedil;&atilde;o</a>
<li><a href="#MkInsMedia"		>4.3 - Criando uma m&iacute;dia de  
	instala&ccedil;&atilde;o do OpenBSD</a>
d48 4
a51 4
    <li><a href="#UnixFlop"		>4.3.1 - Criando disquetes no Unix</a>
    <li><a href="#DosFlop"		>4.3.2 - Criando disquetes no Windows ou DOS</a>
    <li><a href="#MkCD-ROM"		>4.3.3 - Criando um CD de boot 
	(inicializa&ccedil;&atilde;o)</a>
d53 4
a56 4

<li><a href="#Boot"				>4.4 - Carregando a m&iacute;dia de 
	instala&ccedil;&atilde;o do OpenBSD</a>
<li><a href="#Install"			>4.5 - Executando a instala&ccedil;&atilde;o</a>
d58 10
a67 9
  <li><a href="#Start"			>4.5.1 - Iniciando a 
  	instala&ccedil;&atilde;o</a>
  <li><a href="#Disks"			>4.5.2 - Configurando os discos</a>
  <li><a href="#Hostname"		>4.5.3 - Configurando o nome do host</a>
  <li><a href="#Network"		>4.5.4 - Configurando a rede</a>
  <li><a href="#InstMedia"		>4.5.5 - Escolhendo a m&iacute;dia de 
  	instala&ccedil;&atilde;o</a>
  <li><a href="#Filesets"		>4.5.6 - Escolhendo o conjunto de arquivos</a>
  <li><a href="#Finish"			>4.5.7 - Finalizando</a>
d70 13
a82 12
<li><a href="#FilesNeeded"		>4.6 - Quais arquivos s&atilde;o 
	necess&aacute;rios para instala&ccedil;&atilde;o?</a>
<li><a href="#Partitioning"		>4.7 - Quando de espa&ccedil;o eu preciso para 
	uma instala&ccedil;&atilde;o do OpenBSD?</a>
<li><a href="#Multibooting"		>4.8 - Boot m&uacute;ltiplo com OpenBSD/i386</a>
<li><a href="#SendDmesg"		>4.9 - Enviando o seu dmesg para 
	dmesg@@openbsd.org ap&oacute;s a instala&ccedil;&atilde;o</a>
<li><a href="#AddFileSet"		>4.10 - Adicionando arquivos ap&oacute;s a 
	instala&ccedil;&atilde;o</a>
<li><a href="#bsd.rd"			>4.11 - O que &eacute; 'bsd.rd'?</a>
<li><a href="#InstProb"			>4.12 - Problemas comuns de 
	instala&ccedil;&atilde;o</a>
d84 10
a93 10
  <li><a href="#cpq16m"			>4.12.1 - Meu Compaq s&oacute; reconhece 
  	16M de RAM</a>
  <li><a href="#noboot"			>4.12.2 - Meu i386 n&atilde;o da boot 
  	ap&oacute;s a instala&ccedil;&atilde;o</a>
  <li><a href="#sshhang"		>4.12.3 - Minha m&aacute;quina da boot, mas 
  	para na gera&ccedil;&atilde;o de chaves do OpenSSH</a>
  <li><a href="#noftplist"		>4.12.4 - Eu recebo a mensagem "Failed to 
  	change directory" quando executo a instala&ccedil;&atilde;o</a>
  <li><a href="#blankfdisk"		>4.12.5 - Minha tabela de 
  	parti&ccedil;&atilde;o do fdisk est&eacute; corrompida ou vazia!</a>
d95 6
a100 7

<li><a href="#site"				>4.13 - Customizando o processo de 
	instala&ccedil;&atilde;o</a>
<li><a href="#Multiple"			>4.14 - Como eu instalo um n&uacute;mero 
	similar de sistemas?</a>
<li><a href="#getdmesg"			>4.15 - Como eu obtenho o dmesg(8) para 
	reportar um problema de instala&ccedil;&atilde;o?</a>
d105 27
a131 24
<a name="Overview"></a>
</p><h2>4.1 - Vis&atilde;o geral do processo de instala&ccedil;&atilde;o do OpenBSD</h2>

<p>
O OpenBSD possui um robusto e adapt&aacute;vel procedimento de 
instala&ccedil;&atilde;o baseado em texto, e pode ser instalado a partir de 
um &uacute;nico disquete.
Muitas plataformas possuem procedimentos de instala&ccedil;&atilde;o similares;
No entanto elas se diferenciam em alguns detalhes.
Em todo caso, &eacute; aconselh&aacute;vel que voc&ecirc; leia o documento 
INSTALL espec&iacute;fico da sua plataforma no diret&oacute;rio 
<i>platform</i> do CD-ROM ou site FTP
(por exemplo, <tt>i386/INSTALL.i386</tt>, <tt>mac68k/INSTALL.mac68k</tt>
ou <tt>sparc/INSTALL.sparc</tt>).

<p>
O processo de instala&ccedil;&atilde;o do OpenBSD usa um kernel 
especial com um conjunto de utilit&aacute;rios e scripts de 
instala&ccedil;&atilde;o embutidos em um disco de RAM pr&eacute;-carregado.
Ap&oacute;s este kernel ser carregado, o sistema operacional &eacute; 
extra&iacute;do de alguns arquivos 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tar&amp;sektion=1">tar(1)</a>
(<tt>.tgz</tt>).
Existem diversas maneiras de inicializar este kernel de 
d135 4
a138 4
<li><b>Disquetes:</b>
Imagens em disquetes s&atilde;o fornecidas para a cria&ccedil;&atilde;o de 
disquetes de instala&ccedil;&atilde;o em outros sistemas
<a href="#UnixFlop">Unix</a>, ou em sistemas
d140 2
a141 2
Os nomes dos arquivos s&atilde;o tipicamente <tt>floppy41.fs</tt>, embora 
diversas plataformas possuam m&uacute;ltiplas imagens de disquete 
d144 23
a166 26
<li><b>CD-ROM:</b> 
Em diversas plataformas uma imagem de CD-ROM
(<tt>cd41.iso</tt>) &eacute; disponibilizada para a cria&ccedil;&atilde;o de 
um CD-ROM inicializ&aacute;vel.
Ela cont&eacute;m apenas o kernel para instala&ccedil;&atilde;o - para instalar 
arquivos &eacute; necess&aacute;rio baix&aacute;-los via FTP ou de outra fonte.
Voc&ecirc; pode, &eacute; claro, construir seu pr&oacute;prio CD-ROM com os 
arquivos e ferramentas que deseja.

<li><b>Parti&ccedil;&atilde;o existente:</b> 
O <a href="#bsd.rd">disco de RAM</a> do kernel, pode ser utilizado para 
inicializa&ccedil;&atilde;o de uma parti&ccedil;&atilde;o j&aacute; existente 
do OpenBSD ou para autaliza&ccedil;&atilde;o ou reinstala&ccedil;&atilde;o.

<li><b>Rede:</b> Algumas plataformas suportam boot pela rede
(por exemplo, usando <a href="../faq6.html#PXE">PXE</a> ou outro
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=diskless&amp;sektion=8">m&eacute;todo de boot pela rede</a>).

<li><b>Escrevendo uma imagem do sistema de arquivo para o disco:</b> uma 
imagem do sistema de arquivo pode ser escrita para uma parti&ccedil;&atilde;o 
existente e ent&atilde;o inicializada.

<li><b>Fita inicializ&aacute;vel:</b> Algumas plataformas suportam 
inicializa&ccedil;&atilde;o partir de fitas.
Estas fitas podem ser criadas seguindos as instru&ccedil;&otilde;es do arquivo 
INSTALL.<i>plataforma</i>.
d170 2
a171 2
Nem todas as <a href="../../pt/plat.html">plataformas</a> 
suportam todos os m&eacute;todos de boot:
d175 1
a175 1
escrevendo uma imagem de disquete para o disco.
d180 2
a181 1
<li><a href="../../cats.html"><b>cats:</b></a> CD-ROM.
d190 9
a198 4
<li><a href="../../mac68k.html"><b>mac68k:</b></a> Boot utilizando
ferramentas que rodam em Mac OS. Veja
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.1/mac68k/INSTALL.mac68k">INSTALL.mac68k</a>
para mais detalhes.
d202 1
a202 2
<li><a href="../../mvme68k.html"><b>mvme68k:</b></a> Rede, fita 
inicializ&aacute;vel.
d204 1
a204 1
<li><a href="../../mvme88k.html"><b>mvme88k:</b></a> Rede, fita inicializ&aacute;vel.
d206 3
a208 3
<li><a href="../../sparc.html"><b>sparc:</b></a> Disquete, 
CD-ROM, rede, escrevendo uma imagem para uma parti&ccedil;&atilde;o swap 
existente, fita inicializ&aacute;vel.
d210 3
a212 2
<li><a href="../../sparc64.html"><b>sparc64:</b></a> Disquete (somente U1/U2),
CD-ROM, rede, escrevendo uma imagem para uma parti&ccedil;&atilde;o existente.
d214 7
a220 1
<li><a href="../../vax.html"><b>vax:</b></a> Disquete, Rede.
d224 2
a225 3
Todas as plataformas podem usar
<a href="#bsd.rd">bsd.rd</a> para reinstala&ccedil;&atilde;o ou 
atualiza&ccedil;&atilde;o.
d228 4
a231 4
Uma vez que o kernel estiver carregado, voc&ecirc; possui diversas 
op&ccedil;&otilde;es para obter o 
<a href="#FilesNeeded">conjunto de arquivos de instala&ccedil;&atilde;o</a>.
Lembre-se, nem todas as plataformas suportam todas as op&ccedil;&otilde;es.
d234 5
a238 4
<li><b>CD-ROM:</b> 
N&oacute;s preferimos que voc&ecirc; use o
<a href="../../orders.html">conjunto de CD-ROM's oficiais</a>, mas por 
necessidades especiais voc&ecirc; pode criar seu pr&oacute;prio CD-ROM.
d241 3
a243 2
Qualquer <a href="../../ftp.html">espelho FTP</a>
do OpenBSD ou seu pr&oacute;prio servidor FTP local.
d246 12
a257 11
Qualquer <a href="../../ftp.html#http">espelho HTTP</a>
do OpenBSD ou seu pr&oacute;prio servidor HTTP local.

<li><b>Pati&ccedil;&atilde;o local:</b>
Em muitos casos, voc&ecirc; pode instalar o conjunto de arquivos 
de outra parti&ccedil;&atilde;o do seu pr&oacute;prio disco r&iacute;gido local.
Por exemplo, em <a href="../../i386.html">i386</a>,
voc&ecirc; pode instalar de uma parti&ccedil;&atilde;o FAT ou de um CD-ROM 
formatado em ISO9660, Rock Ridge ou formato Joliet.
Em alguns casos, voc&ecirc; deve montar manualmente o sistema de arquivos para 
depois poder usar.
d260 2
a261 2
Algumas plataformas suportam NFS para montar o conjunto de arquivos 
de instala&ccedil;&atilde;o.
d264 4
a267 4
O conjunto de arquivos de instala&ccedil;&atilde;o podem ser lidos de uma 
fita pelo sistema.
Detalhes da cria&ccedil;&atilde;o da fita est&atilde;o no documento 
<tt>INSTALL.</tt><i>platform</i>.
d271 2
a272 1
<h2>4.2 - Lista de verifica&ccedil;&otilde;es antes da instala&ccedil;&atilde;o</h2>
d275 2
a276 2
Antes de voc&ecirc; come&ccedil;ar a instala&ccedil;&atilde;o, voc&ecirc; deve 
ter uma id&eacute;ia do que precisa para termin&aacute;-la. 
d278 1
a278 1
Voc&ecirc; deve conhecer pelo menos os seguintes itens abaixo.
d280 2
a281 2
<li>Nome da m&aacute;quina
  <li>Hardware instalado e dispon&iacute;vel
d283 5
a287 4
  <li>Verifique a compatibilidade do seu hardware na p&aacute;gina de 
  	compatibilidades
  <li>Se for ISA, voc&ecirc; precisa saber configurar o seu hardware, e 
  	confirmar quando o OpenBSD as requerer.
d289 4
a292 2
<li>M&eacute;todo de instala&ccedil;&atilde;o a ser usado (CD-ROM, FTP, etc.)
<li>Foi encontrado um erro s&eacute;rio, como o sistema ser&aacute; corrigido?
d294 8
a301 6
  <li>Se feito localmente, voc&ecirc; necessitar&aacute; ter
      <a href="#Partitioning">espa&ccedil;o suficiente</a> dispon&iacute;vel 
        para a &aacute;rvore de fontes e para constru&iacute;-la.
  <li>Sen&atilde;o, voc&ecirc; precisar&aacute; de acesso a outra 
  	m&aacute;quina para construir um novo 
	<a href="../faq5.html#Release">release</a>.
d303 1
a303 1
<li>Disposi&ccedil;&atilde;o desejada do disco
d305 9
a313 9
  <li>Existe a necessidade de os dados serem armazenados em outro local?
  <li>Voc&ecirc; precisa que o OpenBSD co-exista com outro SO neste sistema?
      Se sim, como ambos ser&atilde;o carregados?
      Voc&ecirc; precisar&aacute; instalar um "gerenciador de
	boot/inicializa&ccedil;&atilde;o"?
  <li>Voc&ecirc; deseja que o disco todo seja usado para o OpenBSD, ou deseja 
    manter uma parti&ccedil;&atilde;o/SO existente (ou espa&ccedil;o para 
	uso futuro)?
  <li>Como voc&ecirc; deseja subparticionar o OpenBSD no seu disco?
d315 1
a315 1
<li>Configura&ccedil;&otilde;es de rede, se voc&ecirc; n&atilde;o usa DHCP:
d318 5
a322 3
  <li>Endere&ccedil;o(s) do(s) Servidor(es) de Nomes (DNS)
  <li>Endere&ccedil;o IP e mascar&aacute; de rede para cada placa de rede
  <li>Endere&ccedil;o do roteador (gateway)
d324 1
a324 1
<li>Voc&ecirc; pretende usar o sistema de janelas X?
d329 2
a330 1
<h2>4.3 - Criando uma m&iacute;dia de instala&ccedil;&atilde;o do OpenBSD</h2>
d333 58
a390 53
Como exemplo, n&oacute;s olharemos as imagens de instala&ccedil;&atilde;o 
dispon&iacute;veis para as plataformas <a href="../../i386.html">i386</a> 
e <a href="../../sparc.html">sparc</a>.

<p>
A plataforma <a href="../../i386.html">i386</a> possui seis imagens de disco 
separadas para instala&ccedil;&atilde;o que podem ser escolhidas:

<ul>
<li><b><tt>floppy41.fs</tt></b> (PC Desktop) suporte para v&aacute;rias 
  placas de rede PCI e ISA, suporte a IDE e simples adaptadores SCSI e 
  algumas placas PCMCIA. A maioria dos usu&aacute;rios usa esta imagem 
  para iniciar a instala&ccedil;&atilde;o a partir do disquete.
<li><b><tt>floppyB41.fs</tt></b> (Servidores) suporte para diversos 
  controladores RAID e para alguns adaptadores SCSI menos comuns.  No 
  entanto, suporte para diversos adaptadores SCSI e muitas placas de rede 
  EISA e ISA foram removidos.
<li><b><tt>floppyC41.fs</tt></b> (Laptops) suporte para diversos dispositivos 
  CardBus e PCMCIA encontrados em muitos laptops.
<li><b><tt>cdrom41.fs</tt></b> &eacute;, em efeito uma combina&ccedil;&atilde;o 
  de todos os tr&ecirc;s discos de inicializa&ccedil;&atilde;o. Pode ser usado 
  para fazer um disquete de inicializa&ccedil;&atilde;o de 2.88M, ou mais 
  comumente, como a imagem de inicializa&ccedil;&atilde;o para um CD 
  grav&aacute;vel customizado.
<li><b><tt>cd41.iso</tt></b> &eacute; uma imagem ISO9660 que pode ser usada 
  para criar um CD inicializ&aacute;vel na maiorias dos softwares de 
  cria&ccedil;&atilde;o de CD-ROM's na maioria das plataformas.
  Essa imagem &eacute; a que cont&eacute;m a maior sele&ccedil;&atilde;o de 
  drivers de dispositivos, e &eacute; usualmente a escolha mais recomendada se 
  o seu hardware puder inicializaro a partir do CDROM.
<li><b><tt>cdemu41.iso</tt></b> &eacute; uma imagem ISO9660, usando
  inicializa&ccedil;&atilde;o "emula&ccedil;&atilde;o de disquete", usando a 
  imagem de 2.88M, <tt>cdrom41.fs</tt>.  Espera-se que poucos usu&aacute;rios 
  necessitem desta imagem -- a maioria dever&aacute; usar o <tt>cd41.iso</tt>, 
  use somente o <tt>cdemu41.iso</tt> se o <tt>cd41.iso</tt> n&atilde;o 
  funcionar.
</ul>

Sim, existem situa&ccedil;&otilde;es em que pode ser necess&aacute;rio um disco 
para dar suporte a um adaptador SCSI e outro disco para suporte a sua placa de 
rede. Felizmente, isso &eacute; um evento raro, e na maioria das vezes pode ser 
contornado.

<p>
A plataforma <a href="../../sparc.html">sparc</a> possui tr&ecirc;s imagens 
de disco separadas para instala&ccedil;&atilde;o que podem ser escolhidas:

<ul>
<li><b><tt>floppy41.fs:</tt></b> Suporte para sistemas com disquete.
<li><b><tt>cd41.iso</tt></b> Uma imagem ISO usada para criar seu pr&oacute;prio 
  CD para inicializar sistemas SPARC que possuem CD-ROM.
<li><b><tt>miniroot41.fs</tt></b> Pode ser escrito em uma 
  parti&ccedil;&atilde;o swap e inicializado.
d399 4
a402 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdformat&amp;sektion=1&amp;arch=i386">fdformat(1)</a>
tanto para formatar quanto para checar blocos defeituosos.
d412 4
a415 4
Se a sua sa&iacute;da for parecida com a do exemplo acima, ent&atilde;o o seu 
disco esta OK. No entanto, se a sua sa&iacute;da n&atilde;o for TUDO "V" 
ent&atilde;o o seu disco pode estar com problemas, tente outra vez com um 
disco novo.
d418 4
a421 3
Note que sistemas Unix possuem diferentes comandos para formatar disquetes.
Consulte a documenta&ccedil;&atilde;o do seu sistema para verificar o 
procedimento exato.
d424 7
a430 5
Se voc&ecirc; j&aacute; possui um disquete limpo e formatado, ent&atilde;o 
&eacute; hora de escrever a imagem de instala&ccedil;&atilde;o.
Para isso, voc&ecirc; pode usar o utilit&aacute;rio
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=0">dd(1)</a>
Um exemplo de uso do <tt>dd(1)</tt>:
d434 1
a434 1
  # <b>dd if=floppy41.fs of=/dev/rfd0c bs=32k</b>
d438 1
a438 1
Uma vez que a imagem foi escrita, verifique para ter certeza de que a imagem 
d440 4
a443 3
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cmp&amp;sektion=1">cmp(1)</a>
Se o disquete for igual a imagem original, voc&ecirc; ver&aacute; somente o 
prompt novamente.
d447 1
a447 1
  # <b>cmp /dev/rfd0c floppy41.fs</b>
d451 1
a451 1
</p><h3>4.3.2 - Criando disquetes no Windows ou DOS</h3>
d454 7
a460 6
Esta se&ccedil;&atilde;o descreve como gravar imagens de 
instala&ccedil;&atilde;o em sistemas Windows ou DOS.
Voc&ecirc; pode pegar as ferramentas mencionadas abaixo no diret&oacute;rio
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.1/tools/">tools</a>
em qualquer espelho FTP, ou do diret&oacute;rio <tt>4.1/tools</tt> encontrado 
no CD1 do conjunto de CD's do OpenBSD.
d463 2
a464 2
Para preparar o disquete no MS-DOS ou Windows, primeiramente use uma ferramenta 
nativa destes sistemas para formatar o disquete.
d467 5
a471 4
Para escrever a imagem de instala&ccedil;&atilde;o no disquete preparado 
voc&ecirc; pode usar
<i>rawrite</i>, <i>fdimage</i>, or <i>ntrw</i>.
<i>rawrite</i> n&atilde;o funciona em Windows NT, 2000 ou XP.
d474 8
a481 7
Note que <tt>FDIMAGE.EXE</tt> e <tt>RAWRITE.EXE</tt> s&atilde;o ambos 
aplica&ccedil;&otilde;es MS-DOS, e limitam os nomes de arquivos segundo a 
conven&ccedil;&atilde;o MS-DOS "8.3".
Um <tt>floppyB41.fs</tt> e <tt>floppyC41.fs</tt> possuem nome de arquivos 
longos, voc&ecirc; ter&aacute; que encontrar como seu sistema armazenou os 
arquivos em "formato 8.3" antes de usar o <tt>FDIMAGE.EXE</tt> ou
<tt>RAWRITE.EXE</tt> para criar seu disquete de inicializa&ccedil;&atilde;o.
d484 1
a484 1
Exemplo do uso do <i>rawrite</i>:
d489 1
a489 1
  Enter source file name: <b>floppy41.fs</b>
d491 2
a492 1
  Please insert a formatted diskette into drive A: and press -ENTER- : <i><b>Enter</b></i>
d498 1
a498 1
  C:\> <strong>fdimage -q floppy41.fs a:</strong>
d504 1
a504 1
  C:\> <strong>ntrw floppy41.fs a:</strong>
d511 1
a511 1
</p><h3>4.3.3 - Criando um CD-ROM</h3>
d514 18
a531 17
Voc&ecirc; pode criar um CD-ROM usando o arquivo <tt>cd41.iso</tt> ou, no 
caso de plataformas i386, voc&ecirc; pode usar tamb&eacute;m o 
<tt>cdrom41.fs</tt>
como a imagem de inicializa&ccedil;&atilde;o por disquete que &eacute; 
usada para inicializar um sistema i386 do CD-ROM. 
Os detalhes exatos ficam por conta do leitor, que deve decidir que ferramentas 
usar para a cria&ccedil;&atilde;o do CD.

<p>
Algumas ferramentas do OpenBSD s&atilde;o:
<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mkhybrid&amp;sektion=8">mkhybrid(8)</a>
<li><a href="http://cdrecord.berlios.de/old/private/cdrecord.html">cdrecord</a>,
parte do pacote cdrtools encontrado no <a href="../faq15.html"> Sistema
de ports do OpenBSD</a>.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cdio&amp;sektion=1">cdio(1)</a>'s
"track at once" (tao) na op&ccedil;&atilde;o de grava&ccedil;&atilde;o.
d535 2
a536 1
<h2>4.4 - Carregando a m&iacute;dia de instala&ccedil;&atilde;o do OpenBSD</h2>
d538 1
a538 1
<h3>Incializa&ccedil;&atilde;o i386/amd64</h3>
d540 34
a573 30
Carregar uma imagem de instala&ccedil;&atilde;o em plataformas i386 e amd64 
n&atilde;o &eacute; nenhuma novidade para muitas pessoas.
Se voc&ecirc; esta usando um disquete, simplesmente insira o disquete no drive 
e inicialize seu sistema. 
A imagem ser&aacute; ent&atilde;o carregada, desde que a sua BIOS esteja 
configurada para inicializar pelo disquete.
Se voc&ecirc; vai utilizar o CD, voc&ecirc; deve configurar sua BIOS para 
inicializar a partir do CD.
Algumas BIOS antigas n&atilde;o possuem esta op&ccedil;&atilde;o, neste caso 
voc&ecirc; deve utilizar um disquete para carregar a imagem de 
instala&ccedil;&atilde;o.
N&atilde;o se preocupe; mesmo que voc&ecirc; use o disquete para carregar a 
imagem voc&ecirc; ainda pode usar CD para instalar o sistema.

<p>
Voc&ecirc; pode instalar tamb&eacute;m carregando o 
<a href="#bsd.rd">bsd.rd</a> 
de uma parti&ccedil;&atilde;o existente do OpenBSD, ou pela rede usando o
<a href="../faq6.html#PXE">processo inicializa&ccedil;&atilde;o PXE</a>.

<h3>Inicializa&ccedil;&atilde;o sparc/sparc64</h3>

<b>NOTE:</b>
Nas plataformas <a href="../../sparc64.html">sparc64</a>, somente as 
m&aacute;quinas SBus (Ultra 1, Ultra 2) podem inicializar do disquete.

<p>
Para inicializa&ccedil;&atilde;o por disquete, coloque o disquete com a imagem 
de instala&ccedil;&atilde;o do OpenBSD dentro do drive.
Ent&atilde;o use os comandos abaixo para incializar:
d581 4
a584 3
Para inicializar por CD-ROM, coloque o CD-ROM do OpenBSD dentro do drive.
Se a sua Sun possui somente uma unidade de CD-ROM, ent&atilde;o v&aacute; ao 
prompt, aonde voc&ecirc; pode digitar '<tt>boot cdrom</tt>':
d592 10
a601 9
Naturalmente, isto funcionar&aacute; somente no modo novo de comando.
Se voc&ecirc; esta usando um modo de comando antigo (seta para direita), 
digite 'n' para o novo modo de comando.
(Se voc&ecirc; esta usando uma sparc antiga pr&eacute;-sun4c, voc&ecirc; 
provalmente n&atilde;o ter&aacute; o novo modo de comando.
Neste caso, voc&ecirc; precisa experimentar.)
Se voc&ecirc; possui m&uacute;ltiplas unidades de CD-ROM, voc&ecirc; precisa 
inciar da unidade correta.
Tente <tt>probe-scsi</tt> para o novo modo de comando.
d616 2
a617 2
Veja de qual unidade de CD-ROM voc&ecirc; vai querer inicializar.  Anote o 
n&uacute;mero (target) da unidade.
d624 1
d626 1
a626 1
<h2>4.5 - Executando a instala&ccedil;&atilde;o</h2>
d628 1
a628 1
<h3>4.5.1 - Iniciando a instala&ccedil;&atilde;o</h3>
d630 12
a641 12
Qualquer que seja o meio de inicializa&ccedil;&atilde;o, agora &eacute; hora de 
us&aacute;-lo.  Durante o processo de inicializa&ccedil;&atilde;o, o kernel e 
todos os programas usados para a instala&ccedil;&atilde;o do OpenBSD s&atilde;o 
carregados na mem&oacute;ria.  Os problemas mais comuns durante a 
inicializa&ccedil;&atilde;o s&atilde;o disquetes com problemas ou um drive 
desalinhado.

<p>
Em qualquer ponto durante a instala&ccedil;&atilde;o do OpenBSD, voc&ecirc; 
pode terminar o processo de instala&ccedil;&atilde;o corrente precionando 
CTRL-C e reiniciar a instala&ccedil;&atilde;o novamente sem reiniciar a 
m&aacute;quina digitando <tt>install</tt> no prompt de comando.
d644 2
a645 2
Quando a sua inicializa&ccedil;&atilde;o &eacute; bem sucedida, voc&ecirc; 
ver&aacute; uma quantidade de texto correndo em sua tela.
d647 7
a653 4
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg</a>, 
o kernel mostra para voc&ecirc; quais dispositivos foram encontrados,
e aonde. N&atilde;o se preocupe em lembrar deste texto, uma c&oacute;pia dele 
fica salva em <tt>/var/run/dmesg.boot</tt>.
d660 1
a660 1
  rootdev=0x1100 rrootdev=0x2f00 rawdev=0x2f02
d666 2
a667 2
E com isso, n&oacute;s temos nossa primeira pergunta.  Na maioria das vezes, 
voc&ecirc; tem as tr&ecirc;s op&ccedil;&otilde;es mostradas:
d669 29
a697 24
<li><b>Install:</b> Carrega o OpenBSD, sobrescrevendo quaisquer dados que 
estejam na parti&ccedil;&atilde;o.  Note que &eacute; poss&iacute;vel deixar 
parti&ccedil;&otilde;es intactas neste processo, como por exemplo 
<tt>/home</tt>, mas de qualquer maneira, suponha que tudo mais ser&aacute; 
sobrescrito.
<li><b>Upgrade:</b> Instala um novo conjunto de <a href="#FilesNeeded">
arquivos</a> na m&aacute;quina, mas n&atilde;o sobrescreve nenhuma 
configura&ccedil;&atilde;o, nenhum dado de usu&aacute;rio ou programas 
adicionais.  Nenhuma formata&ccedil;&atilde;o de disco &eacute; realizada, os 
diret&oacute;rios /etc ou /var n&atilde;o s&atilde;o sobrescritos.
Algumas notas importantes:
<ul>
<li> Voc&ecirc; n&atilde;o ter&aacute; a op&ccedil;&atilde;o de instalar o 
arquivo <tt>etc41.tgz</tt>.
Depois de instalar, voc&ecirc; ter&aacute; que 
<a href="../upgrade41.html#etcUpdates">manualmente</a> efetuar as 
mudan&ccedil;as em <tt>etc41.tgz</tt> antes de seu sistema se tornar funcional.
Esta &eacute; uma etapa importante que deve ser executada, sen&atilde;o 
servi&ccedil;os chaves (como
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a>)
podem n&atilde;o funcionar.

<li>O processo de atualiza&ccedil;&atilde;o n&atilde;o &eacute; projetado para 
saltar releases! Isto frequentemente funciona, mas n&atilde;o &eacute; 
d699 6
a704 4
Para o OpenBSD 4.1, atualizar do 4.0 para o 4.1 &eacute; a &uacute;nica 
atualiza&ccedil;&atilde;o recomendada.
Se voc&ecirc; quer atualizar uma vers&atilde;o mais antiga, uma completa 
reinstala&ccedil;&atilde;o &eacute; recomendada.
d708 16
a723 14
Mais informa&ccedil;&otilde;es sobre atualiza&ccedil;&otilde;es entre releases 
podem ser encontradas 
<a href="../upgrade41.html">aqui</a>.

<li><b>Shell:</b> As vezes, voc&ecirc; necessita executar reparos ou 
manuten&ccedil;&atilde;o em seu sistema que n&atilde;o carrega (ou n&atilde;o 
deve) carregar um kernel normal. 
Esta op&ccedil;&atilde;o habilita voc&ecirc; a realizar a 
manuten&ccedil;&atilde;o do seu sistema.
</ul>

Em ocasi&otilde;es, voc&ecirc; n&atilde;o ver&aacute; a op&ccedil;&atilde;o 
"Upgrade" listada. Depois do evendo <i>flag day</i>, n&atilde;o &eacute; 
poss&iacute;vel atualizar diretamente; voc&ecirc; deve reinstalar o sistema do 
d727 2
a728 2
Neste exemplo, n&oacute;s faremos uma instala&ccedil;&atilde;o, mas o processo 
de atualiza&ccedil;&atilde;o &eacute; similar.
d732 1
a732 1
  Welcome to the OpenBSD/i386 4.1 install program.
d734 8
a741 4
  This program will help you install OpenBSD. At any prompt except password
  prompts you can escape to a shell by typing '!'. Default answers are shown
  in []'s and are selected by pressing RETURN.  At any time you can exit this
  program by pressing Control-C, but exiting during an install can leave your
a747 1

d749 5
a753 4
Na maioria dos casos, o terminal padr&atilde;o &eacute; o mais apropriado; no 
entanto se voc&ecirc; esta usando um 
<a href="../faq7.html#SerCon">console serial</a> para instalar,
n&atilde;o escolha o padr&atilde;o, responda adequadamente.
d756 3
a758 2
Se voc&ecirc; n&atilde;o escolher o layout do seu teclado, US ser&aacute; 
assumido por padr&atilde;o.
d762 2
a763 1
  IS YOUR DATA BACKED UP? As with anything that modifies disk contents, this
d766 4
a769 2
  It is often helpful to have the installation notes handy. For complex disk
  configurations, relevant disk hardware manuals and a calculator are useful.
d775 3
a777 3
Se voc&ecirc; escolher a op&ccedil;&atilde;o padr&atilde;o aqui, o processo de 
instala&ccedil;&atilde;o ser&aacute; abortado e um prompt de comando 
ser&aacute; mostrado.
d780 6
a785 4
As notas de instala&ccedil;&atilde;o referenciadas aqui podem ser encontradas 
no CD de instala&ccedil;&atilde;o e nos servidores de FTP, no arquivo 
<tt>INSTALL.<i>&lt;plat&gt;</i></tt>, aonde a sua plataforma por exemplo pode 
ser <tt>i386</tt>.
d788 1
a788 1
<h3>4.5.2 - Configurando os discos</h3>
d790 35
a824 26
<p>
A configura&ccedil;&atilde;o de discos no OpenBSD pode variar entre 
plataformas. 
Para <a href="../../i386.html">i386</a>, <a href="../../amd64.html">amd64</a>, 
<a href="../../macppc.html">macppc</a>, <a href="../../zaurus.html">zaurus</a>
e <a href="../../cats.html">cats</a>, a configura&ccedil;&atilde;o dos discos 
&eacute; feita em duas etapas.  
Primeiro, a fatia do disco rig&iacute;do referente ao OpenBSD &eacute; 
definida utilizando o fdisk(8), ent&atilde;o esta fatia &eacute; subdividida 
em parti&ccedil;&otilde;es usando o disklabel(8).

<p>
Alguns usu&aacute;rios se confundem com a terminologia utilizada aqui. Isto
acontece porque n&oacute;s estamos usando a palavra "parti&ccedil;&atilde;o" 
em dois sentidos diferentes.
Existem duas camadas de parti&ccedil;&atilde;o em diversas plataformas 
do OpenBSD, a primeira, que pode ser considerada a parti&ccedil;&atilde;o 
do Sistema Operacional, cujo m&uacute;ltiplos SO's marcam como o seu 
espa&ccedil;o no disco, e a segunda, onde a parti&ccedil;&atilde;o do 
OpenBSD &eacute; subparticionada em sistemas de arquivos individais.

A primeira camada &eacute; vis&iacute;vel na tabela de parti&ccedil;&otilde;es 
do disco para o DOS, Windows e qualquer outro SO que use este tipo
de particionamento, e a segunda camada 
da parti&ccedil;&atilde;o s&oacute; &eacute; vis&iacute;vel pelo OpenBSD e 
SO's que podem ler diretamente o seu sistema de arquivos.
d828 6
a833 4
  Cool!  Let's get to it...

  You will now initialize the disk(s) that OpenBSD will use. To enable all
  available security features you should configure the disk(s) to allow the
d841 8
a848 7
O disco raiz (root) &eacute; de onde o sistema &eacute; carregado e onde 
normalmente o swap reside. Discos IDE s&atilde;o mostrados como 
<tt>wd0</tt>, <tt>wd1</tt>, etc., discos SCSI e dispositivos RAID 
s&atilde;o mostrados como <tt>sd0</tt>, <tt>sd1</tt>. Todos os discos que o 
OpenBSD localizou s&atilde;o mostrados aqui -- se voc&ecirc; possui um disco 
que n&atilde;o foi exibido aqui, voc&ecirc; possui um hardware n&atilde;o 
suportado pelo OpenBSD ou mal configurado.
d856 29
a884 25
Se voc&ecirc; responder "yes" a esta pergunta, todo o disco ser&aacute; 
alocado ao OpenBSD.  Isto resultara em um Registro Mestre de 
Inicializa&ccedil;&atilde;o (MBR) e parti&ccedil;&otilde;es escritas no disco 
-- uma parti&ccedil;&atilde;o, neste caso o disco inteiro, ser&aacute; 
utilizado para o OpenBSD, e ser&aacute; marcado como a parti&ccedil;&atilde;o 
inicializ&aacute;vel.  Esta &eacute; a escolha mais comum para usu&aacute;rios 
que usam o OpenBSD como sistema de produ&ccedil;&atilde;o; no entanto, existem 
alguns sistemas em que isto n&atilde;o pode ser feito.
Muitos sistemas Compaq, muitos laptops, alguns Dell e outros sistemas deixam 
uma parti&ccedil;&atilde;o para "manuten&ccedil;&atilde;o" ou "de reserva", 
que deve ser mantida intacta. Se o seu sistema possui uma 
parti&ccedil;&atilde;o que n&atilde;o pode ser apagada, n&atilde;o escolha 
"yes" na pergunta acima.
Por&eacute;m, se voc&ecirc; possui um sistema com um disco novo ou sobrando
provavelmente ir&aacute; responder "yes" (ou usar a op&ccedil;&atilde;o 
"update" do fdisk), ent&atilde;o voc&ecirc; ter&aacute; uma master boot 
recorde v&aacute;lida.

<p>
Para este exemplo, n&oacute;s assuminos que o disco ser&aacute; dividido entre 
o OpenBSD e uma parti&ccedil;&atilde;o pr&eacute;-existente do Windows 2000, 
assim deixaremos a op&ccedil;&atilde;o padr&atilde;o "no", que nos far&aacute; 
usar o programa 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>.
Voc&ecirc; pode obter mais informar&ccedil;&otilde;es sobre fdisk(8)
d888 5
a892 5
<b>Nota Importante:</b>
Usu&aacute;rios com um disco r&iacute;gido grande (maior do que aquele que foi 
adquirido junto com seu computador)
querer&atilde;o ver <a href="../faq14.html#LargeDrive">esta 
se&ccedil;&atilde;o</a> antes de continuar.
d896 4
a899 2
  You will now create a single MBR partition to contain your OpenBSD data. This
  partition must have an id of 'A6'; must *NOT* overlap other partitions; and
d904 1
a904 1
  Disk: wd0       geometry: 2586/240/63 [39100320 Sectors]
d906 12
a917 7
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
  *0: 0B    0   1  1 -  202 239 63 [          63:     3069297 ] Win95 FAT-32
   1: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   2: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
d919 1
a919 1
  fdisk: 1&gt; <b>help</b>
d932 4
a935 2
          exit            Exit edit of current MBR, without saving changes
          quit            Quit edit of current MBR, saving current changes
d937 1
a937 1
  fdisk: 1&gt; 
d941 1
a941 2
Alguns comandos importantes:

d943 49
a991 42
<li><b><tt>r</tt></b> ou <b><tt>reinit</tt>:</b> Limpa a tabela de 
parti&ccedil;&atilde;o existente, cria uma grande parti&ccedil;&atilde;o 
OpenBSD, marca a parti&ccedil;&atilde;o como ativa, e instala o c&oacute;digo 
da MBR do OpenBSD.
Equivalente a dizer "yes" na pergunta "<tt>use *all* of ...</tt>".
<li><b><tt>p</tt></b> ou <b><tt>print:</tt></b> Mostra a tabela de 
parti&ccedil;&atilde;o atual em setores. "<tt>p m</tt>" Exibira a tabela de 
parti&ccedil;&atilde;o em megabytes, "<tt>p g</tt>" exibira a tabela de 
parti&ccedil;&atilde;o em gigabytes.
<li><b><tt>e</tt></b> ou <b><tt>edit:</tt></b> editar ou alterar uma entrada da 
tabela.
<li><b><tt>f</tt></b> ou <b><tt>flag:</tt></b> Marca a parti&ccedil;&atilde;o 
como ativa, de onde o OpenBSD ser&aacute; carregado.
<li><b><tt>u</tt></b> ou <b><tt>update:</tt></b> Atualiza o c&oacute;digo da 
MBR do OpenBSD, similar a "<tt>reinit</tt>", exceto que este comando n&atilde;o 
altera a tabela de parti&ccedil;&atilde;o existente.
<li><b><tt>exit</tt></b> e <b><tt>quit:</tt></b> Cuidado com este comando, 
alguns usu&aacute;rios tem usado "exit" e "quit" com finalidades opostas.
</ul>

Vale a pena ressaltar aqui o seguinte, um erro neste ponto resultar&aacute; em 
perdas significantes de dados.  Se voc&ecirc; for fazer isso em um disco 
r&iacute;gido com dados importantes, pode valer a pena tentar em um drive sem 
dados significativos, e tamb&eacute;m possuir um backup.

<p>
Nossa parti&ccedil;&atilde;o possui 1.5G para Windows 2000 (usando sistema de 
arquivos FAT).  Olhando as informa&ccedil;&atilde;oes acima, podemos ver que 
a parti&ccedil;&atilde;o do Windows ocupa at&eacute; o cilindro 202 do disco 
r&iacute;gido. Ent&atilde;o, vamos alocar o resto do disco ao OpenBSD, 
iniciando no cilindro 203.  Voc&ecirc; poderia calcular o in&iacute;cio 
do setor do OpenBSD que &eacute; 3069360 apenas adicionando o in&iacute;cio 
do setor existente (63) com o seu tamanho (3069297).

<p>
Voc&ecirc; pode editar o layout do disco em Cylinder/Heads/Sectors. 
Qual &eacute; a mais f&aacute;cil depende do que 
voc&ecirc; quer fazer; neste caso, trabalhar em torno de uma 
parti&ccedil;&atilde;o j&aacute; existente, usando o formato 
CHS (Cylinder/Heads/Sectors) &eacute; provavelmente a forma mais f&aacute;cil.
Se voc&ecirc; esta criando uma parti&ccedil;&atilde;o nova, usar somente 
setores ser&aacute; melhor.
d996 6
a1001 4
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
   1: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
d1004 2
a1005 2
  BIOS Starting cylinder [0 - 2585]: [0] <b>203</b>
  BIOS Starting head [0 - 239]: [0] <b><i>Enter</i></b>
d1007 2
a1008 2
  BIOS Ending cylinder [0 - 2585]: [0] <b>2585</b>
  BIOS Ending head [0 - 239]: [0] <b>239</b>
d1010 2
a1011 2
  fdisk:*1&gt; <b>p</b>
  Disk: wd0       geometry: 2586/240/63 [39100320 Sectors]
d1013 14
a1026 9
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
  *0: 0B    0   1  1 -  202 239 63 [          63:     3069297 ] Win95 FAT-32
   1: A6  203   0  1 - 2585 239 63 [     3069360:    36030960 ] OpenBSD
   2: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
  fdisk:*1&gt; <b>p m</b>
  Disk: wd0       geometry: 2586/240/63 [19092 Megabytes]
d1028 13
a1040 8
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
  *0: 0B    0   1  1 -  202 239 63 [          63:        1499M] Win95 FAT-32
   1: A6  203   0  1 - 2585 239 63 [     3069360:       17593M] OpenBSD
   2: 00    0   0  0 -    0   0  0 [           0:           0M] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0M] unused
  fdisk:*1&gt; 
d1045 24
a1068 23
Em plataformas que usam fdisk &eacute; importante que a primeira 
parti&ccedil;&atilde;o salte a primeira 
trilha do disco, neste caso, iniciando no setor <tt>63</tt>.
Se a parti&ccedil;&atilde;o do OpenBSD iniciar em <tt>0</tt>,
a parti&ccedil;&atilde;o terminar&aacute; em cima do 
<a href="../faq14.html#Boot386">
Registro de Inicializa&ccedil;&atilde;o da Parti&ccedil;&atilde;o</a> 
sobrescrevendo a mesma. 
O sistema ainda poder&aacute; ser inicializado, mas a manuten&ccedil;&atilde;o 
ficar&aacute; muito dif&iacute;cil, e esta configura&ccedil;&atilde;o 
n&atilde;o &eacute; <i>recomendada ou suportada</i>.

<p>
Note que o prompt alerta para mudan&ccedil;as ainda n&atilde;o salvas, marcados 
com um asterisco ('<tt>*</tt>').  Como n&oacute;s podemos ver com a 
sa&iacute;da de <tt>p&nbsp;m</tt> n&oacute;s n&atilde;o alteramos a
parti&ccedil;&atilde;o do Windos, e conseguimos alocar o resto do disco para o 
OpenBSD com sucesso, e as parti&ccedil;&otilde;es n&atilde;o se sobreporam.

<p>
O que n&oacute;s ainda n&atilde;o fizemos foi marcar a parti&ccedil;&atilde;o 
como ativa para assim o OpenBSD conseguir ser carregado na pr&oacute;xima 
reinicializa&ccedil;&atilde;o:
d1074 2
a1075 2
  fdisk:*1&gt; <b>p</b>
  Disk: wd0       geometry: 2586/240/63 [39100320 Sectors]
d1077 13
a1089 8
           Starting       Ending       LBA Info:
   #: id    C   H  S -    C   H  S [       start:      size   ]
  ------------------------------------------------------------------------
   0: 0B    0   1  1 -  202 239 63 [          63:     3069297 ] Win95 FAT-32
  *1: A6  203   0  1 - 2585 239 63 [     3069360:    36030960 ] OpenBSD
   2: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
   3: 00    0   0  0 -    0   0  0 [           0:           0 ] unused
  fdisk:*1&gt;
d1093 1
a1093 1
E agora, n&oacute;s estamos prontos para salvar as mudan&ccedil;as:
d1100 1
a1100 1
  fdisk: 1&gt; <b>q</b>
d1106 7
a1112 5
<h3>Criando uma subparti&ccedil;&atilde;o (disklabel)</h3>
O pr&oacute;ximo passo &eacute; usar 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a> 
para criar as subparti&ccedil;&otilde;es (fatias) na parti&ccedil;&atilde;o do 
OpenBSD.  Mais detalhes de uso do disklabel(8) podem ser encontradas no 
d1123 4
a1126 2
  ------------------------------------------------------------------------
   0: 0B    0   1  1 -  202 239 63 [          63:     3069297 ] Win95 FAT-32
d1132 4
a1135 2
  partition. The disklabel defines how OpenBSD splits up the MBR partition
  into OpenBSD partitions in which filesystems and swap space are created.
d1140 2
a1141 6
  disklabel: no disk label
  WARNING: Disk wd0 has no label. You will be creating a new one.
  
  # using MBR partition 1: type A6 off 3069360 (0x2ed5b0) size 36030960 (0x225c9f0)

  Treating sectors 3069360-39100320 as the OpenBSD portion of the disk.
d1145 1
a1145 1
  &gt; <b>?</b>
d1147 25
a1171 27
          ? [cmnd]  - this message or command specific help.
          a [part]  - add new partition.
          b         - set OpenBSD disk boundaries.
          c [part]  - change partition size.
          D         - set label to default.
          d [part]  - delete partition.
          e         - edit drive parameters.
          g [b|d|u] - use [b]ios, [d]isk or [u]ser geometry.
          M         - show entire OpenBSD man page for disklabel.
          m [part]  - modify existing partition.
          n [part]  - set the mount point for a partition.
          p [unit]  - print label.
          q         - quit and save changes.
          r         - recalculate free space.
          s [path]  - save label to file.
          u         - undo last change.
          w         - write label to disk.
          X         - toggle expert mode.
          x         - exit without saving changes.
          z         - zero out partition table.
  Numeric parameters may use suffixes to indicate units:
          'b' for bytes, 'c' for cylinders, 'k' for kilobytes, 'm' for megabytes,
          'g' for gigabytes or no suffix for sectors (usually 512 bytes).
          '%' for percent of total disk size, '&amp;' for percent of free space.
          Non-sector units will be rounded to the nearest cylinder.
  Entering '?' at most prompts will give you (simple) context sensitive help.
  &gt; 
d1175 2
a1176 1
Novamente, alguns comandos que merecem um pouco de aten&ccedil;&atilde;o:
d1178 2
a1179 2
<li><b><tt>p</tt></b> - Exibe a subparti&ccedil;&atilde;o atual na tela, 
e voc&ecirc; pode usar os modificadores <tt>k, m</tt> ou <tt>g</tt> para
d1182 19
a1200 15
<li><b><tt>D</tt></b> - Limpa qualquer subparti&ccedil;&atilde;o existente, 
cria uma nova subparti&ccedil;&atilde;o padr&atilde;o que cobre apenas a 
parti&ccedil;&atilde;o atual do OpenBSD.  Isto &eacute; &uacute;til no caso 
de o disco j&aacute; possuir uma subparti&ccedil;&atilde;o, e a 
parti&ccedil;&atilde;o do OpenBSD for recriada com um tamanho diferente -- 
a subparti&ccedil;&atilde;o antiga n&atilde;o pode ser removida, e isso pode 
causar confus&atilde;o.

<li><b><tt>m</tt></b> - Modifica uma entrada existente na 
subparti&ccedil;&atilde;o. Nunca superestime o que isto pode fazer por 
voc&ecirc;. Quando puder alterar o tamanho de uma subparti&ccedil;&atilde;o, 
isso N&Atilde;O altera o sistema de arquivos do disco r&iacute;gido.
Usar esta op&ccedil;&atilde;o e esperar alterar o tamanho da 
subparti&ccedil;&atilde;o &eacute; uma boa maneira de perder grandes 
quantidades de dados.
d1204 36
a1239 25
Dividir o seu disco de maneira apropriada &eacute; muito importante.  A 
resposta a esta pergunta, "Como eu devo particionar meu sistema?" &eacute; 
"Extamente como voc&ecirc; precisa".  Isto varia de aplica&ccedil;&atilde;o 
para aplica&ccedil;&atilde;o.  N&atilde;o h&aacute; nenhuma resposta universal. 
Se voc&ecirc; n&atilde;o tem certeza de como quer particionar o seu sistema, 
veja <a href="#Partitioning">esta discuss&atilde;o</a>.

<p>
Neste sistema, n&oacute;s temos mais de 17G dispon&iacute;vel para o OpenBSD.  
Isto &eacute; muito espa&ccedil;o, e &eacute; muito prov&aacute;vel que 
n&oacute;s n&atilde;o vamos utiliz&aacute;-lo no total.  Mas, n&oacute;s 
n&atilde;o vamos usar valores muito pequenos. Melhor termos algumas centenas 
de megabytes n&atilde;o utilizados a alguns kilobytes sobrando.

<p>
No disco raiz, duas parti&ccedil;&otilde;es 'a' e 'b' <b>devem</b> ser criadas.
O processo de instala&ccedil;&atilde;o n&atilde;o continuar&aacute; at&eacute; 
que estas parti&ccedil;&otilde;es estejam dispon&iacute;veis. 'a' ser&aacute; 
usada para o sistema de arquivos raiz (/) e 'b' ser&aacute; usado para a 
&aacute;rea swap.

<p>
Ap&oacute;s pensar um pouco, n&oacute;s decidimos criar apenas as 
parti&ccedil;&otilde;es recomendadas para o sistema de arquivos (<tt>/, /tmp,
/var, /usr, /home</tt>) al&eacute;m da parti&ccedil;&atilde;o de swap:
d1241 1
a1241 1
<li><i><b>wd0a: /</b></i> (root) - 150M.  isto &eacute; mais do que suficiente.
d1243 37
a1279 31
<li><i><b>wd0d: /tmp</b></i> - 120M.  <tt>/tmp</tt> &eacute; usada para 
  cria&ccedil;&atilde;o de alguns softwares, 120M ser&aacute; o bastante para a 
  maioria das ocasi&otilde;es.
<li><i><b>wd0e: /var</b></i> - 80M.  Se este fosse um servidor Web ou de 
  correio eletr&ocirc;nico, n&oacute;s far&iacute;amos esta 
  parti&ccedil;&atilde;o bem maior, mas, este n&atilde;o &eacute; o nosso caso.
<li><i><b>wd0g: /usr</b></i> - 6G.  N&oacute;s queremos esta 
  parti&ccedil;&atilde;o grande para carregar algumas aplica&ccedil;&otilde;es 
  de usu&aacute;rios, al&eacute;m de habilitar atualiza&ccedil;&otilde;es e 
  reconstru&ccedil;&otilde;es do sistema atrav&eacute;s do c&oacute;digo fonte 
  se necess&aacute;rio.  A 
  <a href="../faq15.html#Ports">&Aacute;rvore de Ports</a> estar&aacute; aqui 
  tamb&eacute;m, o qual necessitar&aacute; de 160M de espa&ccedil;o antes dos 
  ports serem contru&iacute;dos.
  Se voc&ecirc; esta planejando construir muitas aplica&ccedil;&otilde;es a 
  partir do c&oacute;digo fonte usando o 
  <a href="..//faq15.html#Ports">ports</a> 
  em vez dos <a href="../faq15.html#PkgMgmt">pacotes</a> pr&eacute;-compilados, 
  voc&ecirc; pode necessitar de mais espa&ccedil;o aqui.
<li><i><b>wd0h: /home</b></i> - 4G.  Isto permitir&aacute; muito espa&ccedil;o 
  para os arquivos dos usu&aacute;rios.
</ul>

Agora, se voc&ecirc; adicionar as subparti&ccedil;&otilde;es conforme acima 
voc&ecirc; ver&aacute; que ainda sobram 6G de espa&ccedil;o n&atilde;o 
utilizado!  O espa&ccedil;o n&atilde;o utilizado n&atilde;o causa nenhum 
problema, e ainda nos da a flexibilidade de ampliarmos alguma 
subparti&ccedil;&atilde;o no futuro se necess&aacute;rio. <i>/tmp</i> precisa 
de mais espa&ccedil;o?  Sem problema, &eacute; s&oacute; criar uma nova 
subparti&ccedil;&atilde;o, formatar usando <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&amp;sektion=8">newfs(8)</a>
e mudar o <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&amp;sektion=5"><i>/etc/fstab</i></a> que o problema esta resolvido.
a1283 14
  device: /dev/rwd0c
  type: ESDI
  disk: ESDI/IDE disk
  label: ST320011A
  bytes/sector: 512
  sectors/track: 63
  tracks/cylinder: 16
  sectors/cylinder: 1008
  cylinders: 16383
  total sectors: 39102336
  free sectors: 36030960
  rpm: 3600
  
  16 partitions:
d1285 1
a1285 1
    a:      17593.2M       1498.7M  unused      0     0      
d1288 4
a1291 5
  &gt; <b>d a</b>
  &gt; <b>a a</b>
  offset: [3069360] <b><i>Enter</i></b>
  size: [36030960] <b>150m</b>
  Rounding to nearest cylinder: 307440
d1294 4
a1297 4
  &gt; <b>a b</b>
  offset: [3376800] <b><i>Enter</i></b>
  size: [35723520] <b>300m</b>
  Rounding to nearest cylinder: 614880
d1299 4
a1302 4
  &gt; <b>a d</b>
  offset: [3991680] <b><i>Enter</i></b>
  size: [35108640] <b>120m</b>
  Rounding to nearest cylinder: 245952
d1305 4
a1308 4
  &gt; <b>a e</b>
  offset: [4237632] <b><i>Enter</i></b>
  size: [34862688] <b>80m</b>
  Rounding to nearest cylinder: 164304
d1311 4
a1314 4
  &gt; <b>a g</b>
  offset: [4401936] <b><i>Enter</i></b>
  size: [34698384] <b>6g</b>
  Rounding to nearest cylinder: 12582864
d1317 4
a1320 4
  &gt; <b>a h</b>
  offset: [16984800] <b><i>Enter</i></b>
  size: [22115520] <b>4g</b>
  Rounding to nearest cylinder: 8388576
d1323 2
a1324 15
  &gt; <b>p m</b>
  device: /dev/rwd0c
  type: ESDI
  disk: ESDI/IDE disk
  label: ST320011A
  bytes/sector: 512
  sectors/track: 63
  tracks/cylinder: 16
  sectors/cylinder: 1008
  cylinders: 16383
  total sectors: 39102336
  free sectors: 22115520
  rpm: 3600
  
  16 partitions:
d1326 13
a1338 9
    a:        150.1M       1498.7M  4.2BSD   2048 16384   16 # /
    b:        300.2M       1648.8M    swap                   
    c:      19092.9M          0.0M  unused      0     0      
    d:        120.1M       1949.1M  4.2BSD   2048 16384   16 # /tmp
    e:         80.2M       2069.2M  4.2BSD   2048 16384   16 # /var
    g:       6144.0M       2149.4M  4.2BSD   2048 16384   16 # /usr
    h:       4096.0M       8293.4M  4.2BSD   2048 16384   16 # /home
    i:       1498.7M          0.0M   MSDOS                   
  &gt; <b>q</b>
d1343 22
a1364 24
Voc&ecirc; notar&aacute; que a subparti&ccedil;&atilde;o <i>c</i> parece ter 
sido ignorada.  Esta subparti&ccedil;&atilde;o &eacute; o seu disco 
r&iacute;gido inteiro; n&atilde;o tente alter&aacute;-la.  Voc&ecirc; 
notar&aacute; tamb&eacute;m que a subparti&ccedil;&atilde;o <i>i</i> n&atilde;o 
foi definida por n&oacute;s; esta &eacute; a pr&eacute;-existente 
parti&ccedil;&atilde;o do Windows 2000. Subparti&ccedil;&otilde;es n&atilde;o 
s&atilde;o atribu&iacute;das a alguma letra particular -- com excess&atilde;o 
de <i>a</i> (raiz), <i>b</i> (swap) e <i>c</i> (disco inteiro), o restante das 
subparti&ccedil;&otilde;es (atrav&eacute;s da letra <i>p</i>) esta 
dispon&iacute;vel para uso como voc&ecirc; desejar.
<p>

Se voc&ecirc; olhar a sa&iacute;da do disklabel, notar&aacute; que o RPM do 
seu disco provavelmente est&aacute; errado.  Isto &eacute; hist&oacute;rico; 
a velocidade do disco n&atilde;o &eacute; utilizado em nenhum lugar pelo 
sistema.  N&atilde;o se preocupe com isso.

<h3>Configurando os pontos de montagem e formatando seu sistema de arquivos</h3>

Vem agora a configura&ccedil;&atilde;o final dos seus pontos de montagem.  Se 
voc&ecirc; configurou os pontos de montagem atrav&eacute;s do 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>, 
este passo consiste em verificar a sua sele&ccedil;&atilde;o; sen&atilde;o, 
voc&ecirc; pode especificar outros pontos de montagem.
d1368 10
a1377 5
  Mount point for wd0d (size=122976k)? (or 'none' or 'done') [/tmp] <b><i>Enter</i></b>
  Mount point for wd0e (size=82152k)? (or 'none' or 'done') [/var] <b><i>Enter</i></b>
  Mount point for wd0g (size=6291432k)? (or 'none' or 'done') [/usr] <b><i>Enter</i></b>
  Mount point for wd0h (size=4194288k)? (or 'none' or 'done') [/home] <b><i>Enter</i></b>
  Mount point for wd0d (size=122976k)? (or 'none' or 'done') [/tmp] <b>done</b>
d1389 34
a1422 20
  /dev/rwd0a:     307440 sectors in 305 cylinders of 16 tracks, 63 sectors
          150.1MB in 1 cyl groups (306 c/g, 150.61MB/g, 19328 i/g)
  /dev/rwd0d:     245952 sectors in 244 cylinders of 16 tracks, 63 sectors
          120.1MB in 1 cyl groups (244 c/g, 120.09MB/g, 15360 i/g)
  /dev/rwd0e:     164304 sectors in 163 cylinders of 16 tracks, 63 sectors
          80.2MB in 1 cyl groups (164 c/g, 80.72MB/g, 10368 i/g)
  /dev/rwd0g:     12582864 sectors in 12483 cylinders of 16 tracks, 63 sectors
          6144.0MB in 39 cyl groups (328 c/g, 161.44MB/g, 20608 i/g)
  /dev/rwd0h:     8388576 sectors in 8322 cylinders of 16 tracks, 63 sectors
          4096.0MB in 26 cyl groups (328 c/g, 161.44MB/g, 20608 i/g)
  /dev/wd0a on /mnt type ffs (rw, asynchronous, local, ctime=Sat Oct  7 19:49:44 2
  006)
  /dev/wd0h on /mnt/home type ffs (rw, asynchronous, local, nodev, nosuid, ctime=T
  hu Apr 19 00:54:25 2007)
  /dev/wd0d on /mnt/tmp type ffs (rw, asynchronous, local, nodev, nosuid, ctime=Th
  u Apr 19 00:54:25 2007)
  /dev/wd0g on /mnt/usr type ffs (rw, asynchronous, local, nodev, ctime=Thu Apr 19
   00:54:25 2007)
  /dev/wd0e on /mnt/var type ffs (rw, asynchronous, local, nodev, nosuid, ctime=Th
  u Apr 19 00:54:25 2007)
d1426 26
a1451 27
Voc&ecirc; pode querer saber porque o instalador pergunta outra vez os ponto de 
montagem.  Isto permite que voc&ecirc; recupere erros ou enganos nos pontos de 
montagem durante a cria&ccedil;&atilde;o destes. Por exemplo, o processo de 
instala&ccedil;&atilde;o apagar&aacute; automaticamente todos os pontos de 
montagem duplicados que voc&ecirc; tenha especificado durante a 
configura&ccedil;&atilde;o. O programa disklabel permitir&aacute; que 
voc&ecirc; entre em tais duplicatas, permitindo assim que estas sejam checadas 
antes de se sair do programa. Subparti&ccedil;&otilde;es duplicadas apagadas 
resultar&atilde;o em subparti&ccedil;&otilde;es sem pontos de montagem, nestas 
voc&ecirc; deve atribuir novos pontos de montagem se deseja utilizar o 
espa&ccedil;o.

<p>
Observe que a pergunta "Are you really sure that you are ready to proceed" 
-- "Voc&ecirc; tem certeza que deseja continuar ? " --
por padr&atilde;o esta configurada para "no" -- "n&atilde;o" --, assim 
voc&ecirc; ter&aacute; que dizer deliberadamente para continuar e 
formatar as suas subparti&ccedil;&otilde;es. Se voc&ecirc; escolher 
n&atilde;o, voc&ecirc; simplesmente ser&aacute; jogado para um tela de linha
de comando aonde poder&aacute; reinicar o processo de instala&ccedil;&atilde;o 
digitando "install", ou reiniciando seu computador com um disco de 
inicializa&ccedil;&atilde;o.

<p>
Neste ponto todas as subparti&ccedil;&otilde;es ser&atilde;o formatadas para 
voc&ecirc;.  Isso pode levar algum tempo dependendo do tamanho das mesmas e 
da velocidade do disco.
d1454 1
a1454 1
<h3>4.5.3 - Configurando o nome do host</h3>
d1456 14
a1469 14
Agora voc&ecirc; ir&aacute; configurar o nome do host.
Este valor, junto com o nome de dominio DNS (especificado
<a href="#Network">abaixo</a>), ser&atilde;o salvos no arquivo 
<tt>/etc/myname</tt>, que ser&aacute; usado durante a 
inicializa&ccedil;&atilde;o para configurar o nome do host.
Se voc&ecirc; n&atilde;o configurar o nome de dom&iacute;nio do seu 
sistema, o padr&atilde;o usado ser&aacute; 'my.domain'.

<p>
&Eacute; importante que voc&ecirc; configure este nome agora, porque ele 
ser&aacute; usado para a gera&ccedil;&atilde;o das chaves criptogr&aacute;ficas 
para o seu sistema na primeira inicializa&ccedil;&atilde;o depois da 
instala&ccedil;&atilde;o. Esta gera&ccedil;&atilde;o n&atilde;o depende de a 
rede estar configurada ou n&atilde;o.
d1477 1
a1477 1
<h3>4.5.4 - Configurando a rede</h3>
d1480 10
a1489 9
Agora &eacute; hora de configurar a sua rede.  A rede deve ser configurada
se voc&ecirc; esta planejando fazer uma instala&ccedil;&atilde;o baseada em 
FTP ou NFS, considerando que estar&aacute; baseado nestas 
informa&ccedil;&otilde;es voc&ecirc; esta pronto para come&ccedil;ar. Aqui 
esta um exemplo completo atrav&eacute;s da se&ccedil;&atilde;o de 
configura&ccedil;&atilde;o da rede.
No nosso exemplo, n&oacute; vamos conectar uma inferface (fxp0) a qual 
ser&aacute; configurada para usar DHCP a um modem a cabo, a outra
interface ser&eacute; configurada estaticamente para a rede interna.
d1497 1
a1497 1
  The default media for xl0 is
d1499 1
a1499 1
  Do you want to change the default media? [no] <b><i>Enter</i></b>
d1502 2
a1503 1
  IPv6 address for xl0? (or 'rtsol' or 'none') [none] <b><i>Enter</i></b>
d1505 2
a1506 1
  Which one do you wish to initialize? (or 'done') [fxp0] <b><i>Enter</i></b>
d1518 2
a1519 1
  IPv6 address for fxp0? (or 'rtsol' or 'none') [none] <b><i>Enter</i></b>
d1522 2
a1523 1
  DNS nameserver? (IP address or 'none') [68.87.77.130 68.87.72.130] <b><i>Enter</i></b>
d1525 2
a1526 1
  Default route? (IP address, 'dhcp' or 'none') [dhcp] <b><i>Enter</i></b>
d1528 2
a1529 1
  Do you want to do any manual network configuration? [no] <b><i>Enter</i></b>
d1533 5
a1537 5
<b>NOTA: </b>Somente <b>uma</b> interface de rede pode ser configurada
utilizando DHCP durante a instala&ccedil;&atilde;o. Se voc&ecirc; tentar
configurar mais de uma interface para usar DHCP vai encontrar problemas.
Voc&ecirc; ter&aacute; que configurar manualmente as outras interfaces
ap&oacute;s a instala&ccedil;&atilde;o.
d1540 1
a1540 1
Agora vamos especificar a senha para o usu&aacute;rio root:
d1547 13
a1559 9
Use uma senha segura para o usu&aacute;rio root.  Voc&ecirc; poder&aacute; 
criar outros usu&aacute;rios depois que o sistema for inicializado.  De
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=passwd&amp;sektion=1">passwd(1)</a>:

<pre>    
   A nova senha deve ter pelo menos seis caracteres e n&atilde;o ser puramente 
   alfab&eacute;tica.  Seu comprimento total deve ser menor que _PASSWORD_LEN 
   (128 caracteres atualmente).  A mistura de caracteres mai&uacute;sculos e 
   min&uacute;sculos, n&uacute;meros e meta-caracteres &eacute; encorajada.
d1566 4
a1569 2
Ap&oacute;s configurar a rede, o programa de instala&ccedil;&atilde;o lhe 
d&aacute; a oportunidade de fazer ajustes manuais na configura&ccedil;&atilde;o. 
d1571 3
a1573 3
Em seguida, voc&ecirc; ter&aacute; uma oportunidade de escolher sua 
m&iacute;dia de instala&ccedil;&atilde;o. As op&ccedil;&otilde;es 
s&atilde;o listadas abaixo.
d1578 2
a1579 1
  Location of sets? (cd disk ftp http or 'done') [cd] <b><i>Enter</i></b>
d1581 1
a1581 1
</pre></td></tr></table> 
d1584 5
a1588 5
Neste exemplo n&oacute;s vamos instalar a partir do CD-ROM. Isto 
mostrar&aacute; uma lista de todos os dispositivos no seu computador 
identificados como CD-ROM. Muitas pessoas possuem somente um. Se voc&ecirc; 
necessitar, certifique-se qual dispositivo ser&aacute; usado para se fazer 
a instala&ccedil;&atilde;o do OpenBSD.
d1591 5
a1595 4
<b>NOTA: </b>
Nem todas as plataformas suportam todas as op&ccedil;&otilde;es. Neste caso,
a plataforma OpenBSD/i386 n&atilde;o suporta instala&ccedil;&atilde;o via NFS, 
por isso esta op&ccedil;&atilde;o n&atilde;o est&aacute; na lista.
d1600 4
a1603 3
  Which one contains the install media? (or 'done') [cd0] <b><i>Enter</i></b>
  Pathname to the sets?  (or 'done') [4.1/i386] <b><i>Enter</i></b>
</pre></td></tr></table> 
d1606 4
a1609 3
Aqui, voc&ecirc; ser&aacute; alertado para o diret&oacute;rio que cont&eacute;m 
os arquivos de instala&ccedil;&atilde;o, que &eacute; <tt>4.1/i386/</tt> 
no CD-ROM oficial.
d1612 1
a1612 1
<h3>4.5.6 - Escolhendo o conjunto de arquivos.</h3>
d1615 14
a1628 11
Agora &eacute; a hora de escolher quais arquivos v&atilde;o ser instalados. 
Voc&ecirc; pode conseguir uma descri&ccedil;&atilde;o destes arquivos na 
<a href="#FilesNeeded">pr&oacute;xima se&ccedil;&atilde;o</a>. Os arquivos 
que o programa de instala&ccedil;&atilde;o encontra s&atilde;o mostrados na 
tela. O seu trabalho &eacute; informar quais arquivos ser&atilde;o instalados. 
Por padr&atilde;o todos os arquivos n&atilde;o-X s&atilde;o selecionados; no 
entanto, algumas pessoas gostam de instalar somente os arquivos que s&atilde;o 
necess&aacute;rios para a execu&ccedil;&atilde;o do OpenBSD, que s&atilde;o
<tt>base41.tgz</tt>, <tt>etc41.tgz</tt> e <tt>bsd</tt>.
Outros desejar&atilde;o instalar todos os arquivos. No exemplo abaixo se faz 
uma instala&ccedil;&atilde;o completa.
d1632 4
a1635 2
  Select sets by entering a set name, a file name pattern or 'all'. De-select
  sets by prepending a '-' to the set name, file name pattern or 'all'. Selected
d1641 11
a1651 11
          [X] base41.tgz
          [X] etc41.tgz
          [X] misc41.tgz
          [X] comp41.tgz
          [X] man41.tgz
          [X] game41.tgz
          [ ] xbase41.tgz
          [ ] xetc41.tgz
          [ ] xshare41.tgz
          [ ] xfont41.tgz
          [ ] xserv41.tgz
d1657 11
a1667 11
          [X] base41.tgz
          [X] etc41.tgz
          [X] misc41.tgz
          [X] comp41.tgz
          [X] man41.tgz
          [X] game41.tgz
          [X] xbase41.tgz
          [X] xetc41.tgz
          [X] xshare41.tgz
          [X] xfont41.tgz
          [X] xserv41.tgz
d1671 18
a1688 16
Voc&ecirc; pode fazer todos os tipos de coisas aqui -- "<tt>-x*</tt>" removeria 
todos os componente do X, se voc&ecirc; mudasse de id&eacute;ia.  Neste caso, 
n&oacute;s poder&iacute;amos selecionar todos os arquivos.
Enquanto o sistema ir&eacute; funcionar com um conjunto de arquivos menor,
em vez de come&ccedil;ar com o padr&atilde;o &eacute; recomendado instalar
todo o conjunto de arquivos.
Mais detalhes sobre a sele&ccedil;&atilde;o do conjunto de arquivos 
<a href="#FilesNeeded">aqui</a>.

<p>
Uma vez que voc&ecirc; escolheu com sucesso os arquivos que deseja instalar, 
voc&ecirc; ser&aacute; alertado para confirmar se deseja instalar os arquivos.
Uma barra de progresso lhe informar&aacute; quanto tempo isso lever&aacute;.
Este tempo depende do sistema em que o OpenBSD esta sendo instalado, 
os arquivos que ser&atilde;o instalados, e a velocidade da m&iacute;dia fonte.  
Esta parte pode levar de poucos minutos a algumas horas.
d1695 2
a1696 1
  100% |**************************************************|  5972 KB    00:03
d1698 2
a1699 1
  100% |**************************************************|  4887 KB    00:03
d1701 37
a1737 24
  100% |**************************************************|  6020 KB    00:03
  Getting base41.tgz ...
  100% |**************************************************| 41437 KB    00:34
  Getting etc41.tgz ...
  100% |**************************************************|  1210 KB    00:01
  Getting misc41.tgz ...
  100% |**************************************************|  2238 KB    00:02
  Getting comp41.tgz ...
  100% |**************************************************| 76666 KB    01:02
  Getting man41.tgz ...
  100% |**************************************************|  7473 KB    00:07
  Getting game41.tgz ...
  100% |**************************************************|  2548 KB    00:02
  Getting xbase41.tgz ...
  100% |**************************************************| 10344 KB    00:08
  Getting xetc41.tgz ...
  100% |**************************************************| 90772       00:00
  Getting xshare41.tgz ...
  100% |**************************************************|  2024 KB    00:03
  Getting xfont41.tgz ...
  100% |**************************************************| 32456 KB    00:24
  Getting xserv41.tgz ...
  100% |**************************************************| 19365 KB    00:15
  Location of sets? (cd disk ftp http or 'done') [done] <b><i>Enter</i></b>
d1741 4
a1744 4
Neste ponto voc&ecirc; pode adicionar arquivos de outra fonte
(incluindo <a href="#site">arquivos customizados</a>) se desejar, ou digitar 
'<tt>done</tt>' se voc&ecirc; j&aacute; instalou todos os arquivos que 
voc&ecirc; necessita.
d1747 1
a1747 1
<h3>4.5.7 - Finalizando</h3>
d1749 11
a1759 8
Em seguida, voc&ecirc; ser&aacute; questionado sobre algumas coisas sobre seu 
sistema instalado. A primeira &eacute; se o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd&amp;sektion=8">sshd(8)</a>
deve ser carregado na inicializa&ccedil;&atilde;o do seu sistema.
Geralmente, voc&ecirc; vai querer o sshd(8) rodando, mas ocasionalmente pode 
n&atilde;o querer.
Se sua aplica&ccedil;&atilde;o n&atilde;o tiver necessidade do sshd(8), 
h&aacute; uma pequena vantagem te&oacute;rica de seguran&ccedil;a nisso.
d1767 12
a1778 11
(Se voc&ecirc; mudar de id&eacute;ia mais tarde, altere 
<a href="../faq10.html"><tt>/etc/rc.conf.local</tt></a> ou 
<tt>/etc/rc.conf</tt>.)

<p>
Voc&ecirc; ter&aacute; a op&ccedil;&atilde;o de carregar o 
<a href="../faq6.html#OpenNTPD">OpenNTPD</a> na inicializa&ccedil;&atilde;o do 
seu sistema. 
O OpenNTPD &eacute; uma maneira simples de manter o rel&oacute;gio do seu 
sistema corretamente sincronizado, e a configura&ccedil;&atilde;o 
padr&atilde;o &eacute; suficiente para a maioria dos usu&aacute;rios.
d1782 2
a1783 1
  Start ntpd(8) by default? [no] <b>y</b>
d1787 24
a1810 16
(Se voc&ecirc; mudar de id&eacute;ia mais tarde, altere 
<a href="../faq10.html"><tt>/etc/rc.conf.local</tt></a> ou 
<tt>/etc/rc.conf</tt>.)

<p>
Em algumas plataformas lhe &eacute; perguntado se deseja rodar o X.  
Se voc&ecirc; responder 'Y', o <tt>/etc/sysctl.conf</tt> ser&aacute; 
modifcado para incluir as linhas <tt>machdep.allowaperture=1</tt> ou 
<tt>machdep.allowaperture=2</tt>, dependendo da sua plataforma.
Algumas plataformas n&atilde;o far&atilde;o esta pergunta. Se voc&ecirc; 
n&atilde;o pretende executar o X ou n&atilde;o tem certeza responda 'N', se 
mudar de id&eacute;ia basta editar o arquivo <tt>/etc/sysctl.conf</tt>. Existe 
uma vantagem de seguran&ccedil;a em deixar o driver <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xf86&amp;sektion=4">xf86(4)</a>
desabilitado, pois as engines gr&aacute;ficas das placas de v&iacute;deo dos 
computadores modernos podem ser usadas paras alterar a mem&oacute;ria sem 
controle do processador.
d1818 13
a1830 10
Em seguida, voc&ecirc; ser&aacute; questionado se quer usar um 
<a href="../faq7.html#SerCons">console serial</a> com este computador,
em vez de um teclado e um monitor.
Se voc&ecirc; escolher "<tt>yes</tt>" e responder outras quest&otilde;es, o
<tt><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot.conf&amp;sektion=8">/etc/boot.conf</a></tt>
e o 
<tt><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ttys&amp;sektion=5">/etc/ttys</a></tt>
ser&atilde;o editados corretamente para voc&ecirc;.
A maioria dos usu&aacute;rios escolher&atilde;o o padr&atilde;o,
<b><tt>no</tt></b>.
d1838 8
a1845 6
A sua &uacute;ltima tarefa ser&aacute; configurar a zona de tempo (time zone).  
Dependedo de onde a sua m&aacute;quina vive, existem diversas respostas 
v&aacute;lidas a esta pergunta. Neste exemplo que segue, n&oacute;s usamos 
<tt>US/Eastern</tt>, mas poder&iacute;amos ter usado <tt>EST5EDT</tt> ou 
<tt>US/Michigan</tt> e ter&iacute;amos o mesmo resultado.  Digitando <tt>?</tt> 
o prompt lhe mostrar&aacute; uma lista com poss&iacute;veis escolhas.
d1855 2
a1856 1
  Arctic/      EST          GMT-0        Kwajalein    PST8PDT      Universal
d1860 8
a1867 4
  Brazil/      Etc/         Hongkong     MST7MDT      ROC          posix/
  CET          Europe/      Iceland      Mexico/      ROK          posixrules
  CST6CDT      Factory      Indian/      Mideast/     Singapore    right/
  Canada/      GB           Iran         NZ           Turkey       zone.tab
d1878 2
a1879 1
Se voc&ecirc; necessita de precis&atilde;o, leia
d1883 4
a1886 4
As &uacute;ltimas etapas s&atilde;o para que seu sistema crie o 
diret&oacute;rio <tt>/dev</tt> (o que pode levar algum tempo em alguns 
sistemas, especialmente aqueles que possuem pouca quantidade de RAM), e 
instalar o setor de inicializa&ccedil;&atilde;o (boot blocks).
d1898 2
a1899 2
  fs block shift 2; part offset 3069360; inode block 216, offset 9256
  using MBR partition 1: type 166 (0xa6) offset 3069360 (0x2ed5b0)
d1913 2
a1914 3
O OpenBSD agora est&aacute; instalado no seu sistema e est&aacute;
pronto para a primeira inicializa&ccedil;&atilde;o, mas antes
que voc&ecirc; o fa&ccedil;a...
d1918 6
a1923 6
<h4>Antes do reboot</h4>
Neste ponto, seu sistema esta instalado e pronto para ser incializado 
e configurado para o servi&ccedil;o.  Entretanto, antes disso, &eacute; 
melhor voc&ecirc; checar a <a href="../errata.html">
p&aacute;gina Errata</a> para ver se existe alguma falha que possa lhe causar 
algum dano.
d1926 3
a1928 3
Um truque que voc&ecirc; pode usar "antes da primeira 
inicializa&ccedil;&atilde;o" &eacute;:
<pre>    
d1931 28
a1958 22
no prompt de shell.
Isto ajustar&aacute; seus pontos de montagem para ser o que seriam
em uma inicializa&ccedil;&atilde;o normal do seu novo sistema instalado.
Voc&ecirc; pode agora fazer configura&ccedil;&otilde;es b&aacute;sicas do seu 
sistema, como adicionar usu&aacute;rios, mudar pontos de montagem, etc.

<h4>Depois do reboot</h4>

<p>
Umas das primeiras coisa que voc&ecirc; deve ler depois de instalar o seu 
sistema &eacute;
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=afterboot&amp;sektion=8">afterboot(8)</a>.

<p>
Voc&ecirc; tamb&eacute;m pode achar os seguintes links &uacute;teis:
<ul>
<li><a href="../faq10.html#AddDelUser">Adicionando usu&aacute;rios no OpenBSD</a> 
<li><a href="../faq6.html#Setup">Configura&ccedil;&atilde;o Inicial da Rede</a>
<li><a href="../faq2.html#ManPages">P&aacute;ginas de manuais de comandos populares e mais usados</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi">P&aacute;ginas de manuais Web do OpenBSD</a>
<li><a href="../faq15.html">Sistema de Ports e Pacotes do OpenBSD para 
instala&ccedil;&atilde;o de software</a>
d1962 4
a1965 3
Os desenvolvedores do OpenBSD pedem que voc&ecirc; 
<a href="#SendDmesg">envie uma c&oacute;pia do seu dmesg</a>.  Isto &eacute; 
realmente muito apreciado por eles, e finalmente, por todos os usu&aacute;rios.
d1968 3
a1970 2
<a name="FilesNeeded"></a>
<h2>4.6 - Quais arquivos s&atilde;o necess&aacute;rios para a instala&ccedil;&atilde;o??</h2>
d1974 50
a2023 45
Uma instala&ccedil;&atilde;o completa do OpenBSD &eacute; dividida em um 
n&uacute;mero separado de <i>conjunto de arquivos</i>.  Nem todas as 
aplica&ccedil;&otilde;es necessitar&atilde;o de todos os arquivos.
Aqui voc&ecirc; tem uma vis&atilde;o geral de cada um:
<p>
<ul>
  <li><b><i>bsd</i></b>			- Este &eacute; o kernel. <b>Necess&aacute;rio</b>
  <li><b><i>bsd.mp</i></b> 		- Kernel Multi-processor (SMP) (somenete para 
  	algumas plataformas)
  <li><b><i>bsd.rd</i></b> 		- <a href="#bsd.rd">RAM disk kernel</a>

  <li><b><i>base41.tgz</i></b>	- Cont&eacute;m o sistema base do OpenBSD 
     <b>Necess&aacute;rio</b>
  <li><b><i>etc41.tgz</i></b>	- Cont&eacute;m todos os arquivos de /etc 
    <b>Necess&aacute;rio</b>
  <li><b><i>comp41.tgz</i></b>	- Cont&eacute;m o compilador e suas 
     ferramentas, cabe&ccedil;alhos (headers) e bibliotecas. <b>Recomendado</b>
  <li><b><i>man41.tgz</i></b>    - Cont&eacute;m as p&aacute;ginas de manuais 
     <b>Recomendando</b>
  <li><b><i>misc41.tgz</i></b>   - Cont&eacute;m informa&ccedil;&otilde;es 
     diversas, documentos de configura&ccedil;&atilde;o
  <li><b><i>game41.tgz</i></b>   - Cont&eacute;m jogos para o OpenBSD
  <li><b><i>xbase41.tgz</i></b>  - Cont&eacute;m a base para instalar o X11
  <li><b><i>xetc41.tgz</i></b>   - Cont&eacute;m os arquivos de 
   configur&ccedil;&atilde;o /etc/X11 e /etc/fonts
  <li><b><i>xfont41.tgz</i></b>  - Cont&eacute;m a fonte do servidor X11 e 
  	fontes
  <li><b><i>xserv41.tgz</i></b>  - Cont&eacute;m o servidor X11
  <li><b><i>xshare41.tgz</i></b> - Cont&eacute;m p&aacute;ginas de manuais, 
     configura&ccedil;&otilde;es locais, includes, etc. para o X
</ul>

Os arquivos <b>etc41.tgz</b> e <b>xetc41.tgz</b> n&atilde;o s&atilde;o 
instalados como parte de uma atualiza&ccedil;&atilde;o, somente como parte de 
uma instala&ccedil;&atilde;o completa, assim nenhuma customiza&ccedil;&atilde;o
que voc&ecirc; fizer ser&aacute; perdida.
Voc&ecirc; mesmo ter&aacute; que atualizar manualmente seus diret&oacute;rios 
<tt>/etc</tt>, <tt>/dev</tt> e <tt>/var</tt>.

<p>
Se voc&ecirc; n&atilde;o tem inten&ccedil;&atilde;o de executar o X,
todos os <a href="../faq15.html">pacotes</a>
de terceiros que necessitam de bibliotecas gr&aacute;ficas precisam apenas
do conjunto de arquivos <b>xbase41.tgz</b>, o resto do sistema X n&atilde;o
&eacute; necess&aacute;rio.
d2027 3
a2029 2
<a name="SpaceNeeded"></a>  <!-- XXXobsolete tag -->
<h2> 4.7 - De quanto espa&ccedil;o eu preciso para uma instala&ccedil;&atilde;o do OpenBSD?</h2>
d2033 3
a2035 3
Obviamente, a resposta para esta pergunta varia com base no tipo de uso 
pretendindo para seu sistema.
Entretanto, estes n&uacute;meros podem ser usados como um ponto de  
d2040 1
a2040 1
/usr               420MB (no X) or 550MB (with X)
d2046 226
a2271 178
Aqueles s&atilde;o tamanhos m&iacute;nimos sugeridos para o sistema de arquivos 
com instala&ccedil;&atilde;o completa.
Estes n&uacute;meros incluem tamanho extra para permitir um t&iacute;pico 
sistema desktop conectado a internet, n&atilde;o mais que isso.

<p>
Mantenha os seguintes fatos em mente:
<ul>
<li>Estes s&atilde;o valores m&iacute;nimos.
Os discos s&atilde;o relatimente baratos hoje em dia, tentar
espremer seu sistema em um disco pequeno raramente &eacute; necess&aacute;rio.
Para aplica&ccedil;&otilde;es de prop&oacute;sito especial, os n&uacute;meros 
acima podem ser menores, mas &eacute; melhor voc&ecirc; testar antes.
<li>Estes n&uacute;meros N&Atilde;O incluem a &aacute;rvore de ports.
<li>Se voc&ecirc; planeja instalar uma parte significativa de software, 
fa&ccedil;a o seu <tt>/usr</tt> grande.
Isto depende das aplica&ccedil;&otilde;es, &eacute; claro.
<li>Para sistemas que manipulam grandes quantidades de e-mail ou p&aacute;ginas 
web (armazenadas, respectivamente, em <tt>/var/mail</tt> e <tt>/var/www</tt>) 
voc&ecirc; ir&aacute; fazer o seu <tt>/var</tt> uma parti&ccedil;&atilde;o 
grande, ou colocalos em parti&ccedil;&otilde;es separadas.
<li>Para sistemas multiusu&aacute;rios que geram grande quantidades de arquivos 
de log, voc&ecirc; ir&aacute; fazer o seu <tt>/var</tt> uma 
parti&ccedil;&atilde;o grande, ou criar uma parti&ccedil;&atilde;o separada 
para os arquivos de log (<tt>/var/log</tt>).
<li>Se voc&ecirc; planeja <a href="../faq5.html">recompilar seu kernel
a partir do c&oacute;digo fonte</a>, 
voc&ecirc; dever&aacute; fazer o seu <tt>/usr</tt> uma parti&ccedil;&atilde;o 
grande, 4G &eacute; um bom tamanho.
<li>Compilar alguns <a href="../faq15.html#Ports">ports</a> a partir do 
c&oacute;digo fonte pode consumir uma grande quantidade de espa&ccedil;o de
suas parti&ccedil;&otilde;es <tt>/usr</tt> e <tt>/tmp</tt>, esta &eacute; outra 
raz&atilde;o pela qual aconselhamos que voc&ecirc; use pacotes 
<a href="../faq15.html#PkgMgmt">pr&eacute;-compilados</a>.
<li>A parti&ccedil;&atilde;o <tt>/tmp</tt> &eacute; usada para a 
compila&ccedil;&atilde;o de ports, entre outras coisas,
um bom tamanho para o /tmp depende do que voc&ecirc; faz com ela.
50M pode ser de bom tamanho para a maioria dos usu&aacute;rios, mas algumas 
aplica&ccedil;&otilde;es requerem 100M ou mais de espa&ccedil;o em 
<tt>/tmp</tt>.

<li>A parti&ccedil;&atilde;o 'b' do seu disco &eacute; colocada 
obrigat&oacute;riamente como swap do seu sistema -- n&oacute;s recomendamos um 
espa&ccedil;o m&iacute;nimo de 32MB mas se voc&ecirc; tiver um disco um pouco 
maior pode colocar at&eacute; 64MB. Se voc&ecirc; tiver um disco grande pode 
colocar 256MB e at&eacute; 512MB. Por&eacute;m se voc&ecirc; est&aacute;
usando um dispositivo flash como disco, provavelmente n&atilde;o vai querer 
uma parti&ccedil;&atilde;o swap. Muitas pessoas usam a regra de que a swap 
deve ser duas vezes o tamanho da mem&oacute;ria principal.  O que n&atilde;o
faz sentido.
Os sistemas modernos possuem bastante espa&ccedil;o para swap, por&eacute;m 
&eacute; prefer&iacute;vel que seu sistema nunca fa&ccedil;a swap. Use o que 
for aprorpiado para as suas necessidades.
<li>A swap e o <tt>/var</tt> s&atilde;o utilizados para armazenar core dumps 
do sistema em um evento de 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=crash&amp;sektion=8">crash(8)</a>.
Se isso &eacute; importante para voc&ecirc; &eacute; melhor ter um swap um 
pouco maior que sua mem&oacute;ria principal. Ap&oacute;s o reboot 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=savecore&amp;sektion=8">savecore(8)</a>
tentar&aacute; salvar o conte&uacute;do da sua swap no arquivo 
<tt>/var/crash</tt>, ent&atilde;o se isso for importante para voc&ecirc; sua 
parti&ccedil;&atilde;o <tt>/var</tt> deve ter uma
grande quantidade de <i>espa&ccedil;o livre</i> para estes arquivos de dump. 
Mas sejamos realistas, poucos desenvolvedores querer&atilde;o analizar o seu 
arquivo de dump de 1GB, ent&atilde;o se voc&ecirc; n&atilde;o pretende 
investigar o erro localmente o <tt>/var</tt> n&atilde;o precisa ser muito 
grande.
</ul>

<p>
H&aacute; diversas raz&otilde;es para usar sistemas de arquivos separados, em 
vez de colocar tudo em uma ou duas parti&ccedil;&otilde;es:

<ul>
<li><b>Seguran&ccedil;a</b>: Voc&ecirc; pode marcar alguns sistemas de arquivos 
  como 'nosuid', 'nodev', 'noexec', 'readonly', etc.  Isto &eacute; agora feito 
  pelo processo de instala&ccedil;&atilde;o, de fato, se voc&ecirc; usar as 
  parti&ccedil;&otilde;es acima descritas.
<li><b>Estabilidade</b>: Um usu&aacute;rio, ou um programa qualquer, podem 
  encher o sistema de arquivos com lixo se tiver permiss&otilde;es de escrever 
  nele.  Seus programas principais, que &eacute; claro rodam em diferentes 
  parti&ccedil;&otilde;es, n&atilde;o sofrer&atilde;o com isso.
<li><b>Velocidade</b>: Um sistema de arquivos que &eacute; muitas vezes escrito 
  pode come&ccedil;ar a ficar muito fragmentado.  (Felizmente, o sistema de 
  arquivos ffs, cujo OpenBSD usa, n&atilde;o tem tend&ecirc;ncia a 
  fragmenta&ccedil;&atilde;o.)
<li><b>Integridade</b>: Se um sistema de arquivos se corromper por alguma 
  raz&atilde;o os outros n&atilde;o ser&atilde;o afetados por isso e 
  continuar&atilde;o OK.
<li><b>Tamanho</b>: Muitas m&aacute;quinas possuem limites de &aacute;reas 
  no disco de onde a ROM pode carregar o kernel.  Em alguns casos, este limite 
  pode ser muito pequeno (504M para alguns 486 antigos), em outros casos, um 
  limite muito maior (por exemplo, 2G, 8G, ou 128G em sistemas i386).
  Enquanto o kernel pode terminar acima em qualquer lugar da 
  parti&ccedil;&atilde;o raiz, a parti&ccedil;&atilde;o inteira da raiz deve 
  estar dentro desta &aacute;rea.
  Para mais detalhes, veja <a href="../faq14.html#LargeDrive">
  esta se&ccedil;&atilde;o</a>.  Um bom guia vai dizer para voc&ecirc; manter 
  a sua parti&ccedil;&atilde;o / completamente abaixo de 2G, a menos que 
  voc&ecirc; soubesse que sua plataforma (e m&aacute;quina particular) pode 
  manipular mais (ou menos) do que isso.
</ul>

<p>
Algumas considere&ccedil;&otilde;es adicionais sobre particionamento:
<ul>
 <li>Para sua primeira tentativa em um sistema experimental, uma grande 
   parti&ccedil;&atilde;o <tt>/</tt> e a swap pode ser mais f&aacute;cil se 
   voc&ecirc; sabe de quanto espa&ccedil;o necessita. Fazendo isso voc&ecirc; 
   estar&aacute; sacrificando algumas caracter&iacute;sticas de 
   seguran&ccedil;a do OpenBSD que requer sistemas de arquivos separados para 
   <tt>/, /tmp, /var, /usr</tt> e <tt>/home</tt>.
   Entretanto, voc&ecirc; n&atilde;o colocar&aacute; sua primeira 
   instala&ccedil;&atilde;o como um sistema de produ&ccedil;&atilde;o.
 <li>Um sistema exposto a Internet ou a qualquer outra for&ccedil;a hostil deve 
   ter um <tt>/var</tt> separado (e at&eacute; mesmo um <tt>/var/log</tt> 
   separado) para o sistema de log.
 <li>Uma parti&ccedil;&atilde;o <tt>/home</tt> pode ser muito &uacute;til.  
   Nova vers&atilde;o do Sistema Operacional? Limpe e reinstale tudo, deixando 
   a sua parti&ccedil;&atilde;o <tt>/home</tt> intocada. Lembre-se de salvar 
   uma c&oacute;pia dos seus arquivos de configura&ccedil;&atilde;o!
 <li>Uma parti&ccedil;&atilde;o separada para qualquer coisa que acumule 
   grandes quantidades de arquivos que podem necessitar ser removidos, pode 
   ser mais r&aacute;pido formatar e recriar do que somente apagar os arquivos.
   Veja o FAQ <a href="../faq5.html#ProbObjPt">Contruindo a partir do fonte</a>
   para um exemplo (<tt>/usr/obj</tt>).
 <li>Se voc&ecirc; deseja construir o seu sistema a partir da fonte por 
   qualquer raz&atilde;o, o c&oacute;digo fonte se encontra em 
   <tt>/usr/src</tt>.  Se voc&ecirc; n&atilde;o deseja criar uma 
   parti&ccedil;&atilde;o separada para <tt>/usr/src</tt>, tenha certeza que 
   <tt>/usr</tt> ter&aacute; espa&ccedil;o suficiente.
 <li>Um fato geralmente esquecido: voc&ecirc; <b>n&atilde;o</b> precisa alocar 
   todo o espa&ccedil;o em disco quando voc&ecirc; configura o sistema! Desde 
   que voc&ecirc; achar&aacute; um desafio comprar um disco r&iacute;gido menor 
   que 20GB, pode fazer sentido deixar uma parte do seu disco n&atilde;o 
   alocado.  Se voc&ecirc; mudar o tamanho de uma parti&ccedil;&atilde;o, 
   voc&ecirc; pode alocar uma nova parti&ccedil;&atilde;o a partir do seu 
   espa&ccedil;o n&atilde;o utilizado,
   <a href="../faq10.html#DupFS">duplicar</a> a parti&ccedil;&atilde;o 
   existente para a nova parti&ccedil;&atilde;o, mudar o
   <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&amp;sektion=5">/etc/fstab</a>
   para apontar para a nova parti&ccedil;&atilde;o, remontar, e voc&ecirc; 
   ter&aacute; mais espa&ccedil;o.
 <li>Se voc&ecirc; fizer as suas parti&ccedil;&otilde;es muito pr&oacute;ximas 
   do tamanho m&iacute;nimo requerido, provavelmente voc&ecirc; 
   lamentar&aacute; isso mais tarde, quando for a hora de fazer a 
   atualiza&ccedil;&atilde;o do seu sistema.
 <li>Se voc&ecirc; fizer parti&ccedil;&otilde;es muito grande, tenha em mente 
   que sempre que for executar a checagem do sistema de arquivos utilizando 
   <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fsck&amp;sektion=8">fsck(8)</a> ele
   ir&aacute; requerer 1MB de RAM por gigabyte do sistema de arquivo, 
   al&eacute;m de consumir muito tempo e as vezes ser impraticavel em sistemas 
   de arquivos muito antigos.
   (Veja <a href="../faq14.html#LargeDrive">esta se&ccedil;&atilde;o</a>).
 <li>Se voc&ecirc; permitir que usu&aacute;rios escrevam em <tt>/var/www</tt> 
   (i.e., p&aacute;ginas web pessoais), voc&ecirc; pode desejar por /var/www 
   em uma parti&ccedil;&atilde;o separada, assim voc&ecirc; pode usar 
   <a href="../faq10.html#Quotas">quotas</a> para restringir o espa&ccedil;o 
   utilizado pelos usu&aacute;rios, e se a parti&ccedil;&atilde;o ficar cheia, 
   nenhuma outra parte do seu sistema ser&aacute; comprometida.
</ul>


<p>
<a name="Multibooting"></a>
<h2>4.8 - Boot m&uacute;ltiplo com OpenBSD/i386</h2>

Boot m&uacute;ltiplo (multiboot) &eacute; ter diversos sistemas operacionais 
em um s&oacute; computador, e meios de selecionar qual OS voc&ecirc; ir&aacute; 
inicializar.
Isso <i>n&atilde;o</i> &eacute; uma tarefa trivial!  Se voc&ecirc; n&atilde;o 
compreender o que est&aacute; fazendo, voc&ecirc; pode perder grandes 
quantidades de dados do seu computador.  Novos usu&aacute;rios do OpenBSD 
s&atilde;o incentivados <i>fortemente</i> a come&ccedil;ar com um disco 
r&iacute;gido sem dados em uma m&aacute;quina dedicada, e ent&atilde;o praticar 
as suas configura&ccedil;&otilde;es em um sistema de testes antes de se 
aventurar em uma configura&ccedil;&atilde;o multiboot em uma m&aacute;quina em 
produ&ccedil;&atilde;o.  <a href="../faq14.html">FAQ 14</a> possui mais 
d2275 6
a2280 1
Est&atilde;o aqui diversas op&ccedil;&otilde;es de  multibooting:
d2283 24
a2306 23
Este &eacute; provavelmente o mais negligenciado, e, as vezes a melhor 
solu&ccedil;&atilde;o para multibooting.  Simplesmente ative a 
parti&ccedil;&atilde;o que voc&ecirc; esta usando atualmente se est&aacute; 
for a do SO que voc&ecirc; deseja carregar no pr&oacute;ximo boot.  
Virtualmente todos os SO's oferecem um programa para fazer isso; o do OpenBSD 
&eacute; o 
<a href="../faq14.html#fdisk">fdisk(8)</a>, programas similares existem 
para sistemas Windows 9x e DOS, e muitos outros sistemas operacionais.  Isso 
pode ser altamente desej&aacute;vel para um SO que leve muito tempo para 
desligar ou reiniciar -- voc&ecirc; pode configur&aacute;-lo e iniciar o 
processo de reboot, de uma volta, pegue um copo de caf&eacute; e volte
para o sistema inicializado do jeito que voc&ecirc; queria -- sem esperar
pelo Momento M&aacute;gico de selecionar o pr&oacute;ximo SO.

<h3>Disquete de Boot</h3>
Se voc&ecirc; possui um sistema que n&atilde;o usa frequentemente o OpenBSD 
(ou n&atilde;o deseja que usu&aacute;rios deste computador notem qualquer 
mudan&ccedil;a), considere ter um disquete de inicializa&ccedil;&atilde;o 
(boot floppy).  Simplesmente use um dos <a href="#MkFlop">
Disquetes de inicializa&ccedil;&atilde;o padr&atilde;o do OpenBSD</a>,
e crie o arquivo <tt>/etc/boot.conf</tt> (sim, voc&ecirc; tamb&eacute;m 
ter&aacute; que criar o diret&oacute;rio <tt>/etc</tt> no seu disquete) com o 
conte&uacute;do:
d2308 2
a2309 2
<pre>     
	 boot hd0a:/bsd
d2312 19
a2330 17
para o caso de o sistema iniciar do disco r&iacute;gido 0, 
parti&ccedil;&atilde;o OpenBSD 'a', arquivo do kernel <tt>/bsd</tt>.  Note que
voc&ecirc; tamb&eacute;m pode dar boot de outros discos r&iacute;gidos com uma 
linha como: "<tt>boot hd2a:/bsd</tt>" para dar boot do terceiro disco 
r&iacute;gido do seu sistema.  Para iniciar o OpenBSD, coloque seu disquete 
dentro do drive e reinicie a m&aacute;quina.  Para iniciar outro SO, retire o 
disquete do drive, ent&atilde;o reinicie.

<p>
Neste caso, o programa &eacute; carregado do disquete,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">boot(8)</a>
procura e l&ecirc;
<tt>/etc/boot.conf</tt>.  A linha contendo "<tt>boot hd0a:/bsd</tt>" instrui o
boot(8) de onde carregar o kernel -- neste caso, o primeiro HD que a BIOS 
v&ecirc;.  Mantenha em mente, somente o pequeno arquivo (<tt>/boot</tt>) 
&eacute; carregado do disquete -- o sistema carrega o kernel do disco 
r&iacute;gido, assim isto adiciona somente 5 segundos ao processo de boot.
d2334 8
a2341 5
Para multiboot do OpenBSD e Windows NT/2000/XP, voc&ecirc; pode usar NTLDR, o 
carregador de boot que o NT usa. Para multi-boot com NT, voc&ecirc; necessita 
de uma c&oacute;pia da sua Partition Boot Record (PBR) do OpenBSD. Depois de 
executar installboot, voc&ecirc; pode copiar o arquivo usando o 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=1">dd(1)</a>:
d2343 1
a2343 1
<pre>	
d2347 7
a2353 4
Nota: Este &eacute; um bom momento para lembr&aacute;-lo para n&atilde;o
digitar comandos segamente (sem saber o que eles fazem). O comando acima 
n&atilde;o funciona diretamente em muito computadores, ficando para o leitor
adapt&aacute;-lo as suas necessidades.
d2356 2
a2357 2
Agora inicie o NT e ponha <tt>openbsd.pbr</tt> em C:. adicione a linha assim 
como ela est&aacute; aqui no final de <tt>C:\BOOT.INI</tt>:
d2359 1
a2359 1
<pre>	
d2364 4
a2367 4
Quando voc&ecirc; reinicar, voc&ecirc; pode carregar o OpenBSD a partir do 
menu loader do NT.
H&aacute; muito mais informa&ccedil;&atilde;o dispon&iacute;vel sobre NTLDR em 
<a href="http://www.tburke.net/info/ntldr/ntldr_hacking_guide.htm">NTLDR
d2371 4
a2374 3
No Windows XP voc&ecirc; pode editar as informa&ccedil;&otilde;es do boot 
usando uma interface gr&aacute;fica (GUI); veja
<a href="http://support.microsoft.com/default.aspx?scid=kb;en-us;289022">XP Boot.ini HOWTO</a>.
d2377 7
a2383 6
Programas que fazem isso para voc&ecirc; est&atilde;o dispon&iacute;veis, por 
exemplo
<a href="http://www.winimage.com/bootpart.htm">BootPart</a>.
Este programa pode ser executado em Windows NT/2000/XP, ele buscar&aacute; o 
OpenBSD PBR, e o colocar&aacute; na sua parti&ccedil;&atilde;o NT/2000/XP, e 
o adicionar&aacute; em <tt>C:\BOOT.INI</tt>
d2386 4
a2389 3
Note: O boot loader do Windows NT/2000/XP s&oacute; &eacute; capaz de dar
boot em sistemas operacionais que se encontram no primeiro disco r&iacute;gido.
Voc&ecirc; n&atilde;o pode usar o boot loader do Windows para iniciar o OpenBSD de um disco secund&aacute;rio.
d2392 1
a2392 1
<h3>Outros boot loaders</h3>
d2395 5
a2399 6
Alguns bootloaders que os usu&aacute;rios do OpenBSD usam com sucesso 
s&atilde;o 
<a href="http://gag.sourceforge.net/">GAG</a>,
OS-BS,
<a href="http://www.ranish.com/part/">The Ranish Partition Manager</a>
e <a href="http://www.gnu.org/software/grub/">GRUB</a>. 
d2406 5
a2410 3
Por favor consulte 
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.1/i386/INSTALL.linux">INSTALL.linux</a>,
que possui instru&ccedil;&otilde;es de como fazer OpenBSD funcionar com Linux.
d2412 2
a2413 2
<h3>Problemas com a zona do tempo</h3>
O OpenBSD espera que o rel&oacute;gio em tempo real do computador esteja 
d2415 41
a2455 31
Outros sistemas operacionais esperam que o rel&oacute;gio esteja
configurado para a hora local.
Isto pode ser um grande problema se voc&ecirc; estiver usando
ambos os sistemas no mesmo computador.
Um dos sistemas precisar&aacute; ser adaptado.
Mais informa&ccedil;&otilde;es sobre como fazer isto no 
<a href="../faq8.html#TimeZone">FAQ 8 - Porque meu rel&oacute;gio est&aacute; 
atrasado v&aacute;rias horas ?</a>

<a name="SendDmesg"></a>
<h2>4.9 - Enviando o seu dmesg para dmesg@@openbsd.org depois da instala&ccedil;&atilde;o</h2>

<p>
Apenas para lembrar, &eacute; importante para os desenvolvedores do OpenBSD 
saber que hardware funciona, e qual n&atilde;o funciona perfeitamente.

<p>
Uma cita&ccedil;&atilde;o de /usr/src/etc/root/root.mail

<blockquote><pre> 
Se voce deseja assegurar que o OpenBSD rode melhor em sua m&aacute;quina, 
por favor nos fa&ccedil;a um favor (depois de ter configurado seu sistema de 
email!) digite algo como:
 # dmesg | mail -s "Sony VAIO 505R laptop, apm works OK" dmesg@@openbsd.org
&eacute; dessa forma que n&oacute;s poderemos ver que tipo de configura&ccedil;&otilde;es 
as pessoas est&atilde;o usando. Como foi mostrado, incluir informa&ccedil;&otilde;es sobre 
sua m&aacute;quina no assunto ou no corpo do email pode nos ajudar.  N&oacute;s vamos usar 
essas informa&ccedil;&otilde;es para melhorar o suporte dos drivers de dispositivos em 
futuros releases.  (Por favor fa&ccedil;a isso usando o kernel GENERIC, e n&atilde;o um 
kernel personalizado). As informa&ccedil;&oatilde;es dos drivers de dispositivos que n&oacute;s 
obtermos nos ajudar&aacute; a corrigir os drivers j&aacute; existentes. Obrigado!
d2459 8
a2466 7
Certifique-se de enviar o e-mail de uma conta que esteja habilitada a receber
e-mails dos desenvolvedores para que eles possam entrar em contato se 
tiverem algo que queiram testar ou mudar a fim de tonar-lhe funcional no 
OpenBSD.
N&atilde;o &eacute; importante enviar o e-mail da mesma m&aacute;quina que 
est&aacute; rodando o OpenBSD, se esta m&aacute;quina for incapaz de receber o 
e-mail, basta executar
d2471 2
a2472 2
E ent&atilde;o encaminhar a mensagem para
<pre> 
d2475 2
a2476 1
aonde <tt>your-account@@yourmail.dom</tt> &eacute; a sua conta de e-mail.
d2482 14
a2495 12
<li>Por favor s&oacute; mande dmesg do kernel GENERIC. 
Kernels customizados que tem drivers de dispositivos removidos n&atilde;o 
s&atilde;o &uacute;teis.
<li>Se voc&ecirc; possui um sistema multiprocessado e roda o kernel
GENERIC.MP, &eacute; muito importante para os desenvolvedores verem a 
sa&iacute;da do seu dmesg tanto para o kernel GENERIC como para o kernel 
GENERIC.MP, ent&atilde;o por favor mande ambos em e-mails separados.
<li> Os dmesgs s&atilde;o recebidos por uma m&aacute;quina que usa
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd</a>
para rejeitar spams. Isso faz com que o seu e-mail n&atilde;o seja recebido 
por um per&iacute;odo de tempo. tenha paci&ecirc;ncia, depois de uma meio hora 
ou at&eacute; uma hora n&oacute;s o receberemos.
d2499 4
a2502 4
O m&eacute;todo acima &eacute; bastante simples, mas se voc&ecirc; n&atilde;o 
configurou o seu sistema de e-mail no OpenBSD, voc&ecirc; pode salvar a sua 
sa&iacute;da do dmesg em um arquivo de texto e mandar para os desenvolvedores 
do OpenBSD.
d2505 1
a2505 1
$ dmesg &gt; ~/dmesg.txt
d2508 17
a2524 15
Ent&atilde;o transfira o arquivo (usando FTP/scp/disquete/carrier-pigeon/...)
para o sistema que voc&ecirc; normalmente usa para e-mail. Como a sa&iacute;da
do dmesg que voc&ecirc; envia &eacute; processada automaticamente tenha certeza
de checar os seguintes itens quando usar clientes/sistemas de e-mail
alternativos.
<ul>
<li>Configure o seu e-mail para enviar mensagens somente em texto plano;
    n&atilde;o use HTML na formata&ccedil;&atilde;o do seu e-mail.
<li>Desabilite qualquer fun&ccedil;&atilde;o de quebra de linha.
    Muitos clientes de e-mail s&atilde;o configurados para inserir quebra de 
	linha quando chegam a coluna 72 (a norma para listas de e-mail).
<li>Tenha certeza de que seu cliente de e-mail n&atilde;o ir&aacute; reformatar
	a mensagem.
<li>N&atilde; mande a sa&iacute;da do seu dmesg em anexo.
    Coloque a sa&iacute;da do seu dmesg no corpo da mensagem de e-mail.
d2529 2
a2530 1
<h2>4.10 - Adicionando um conjunto de arquivos ap&oacute;s a instala&ccedil;&atilde;o</h2>
d2532 2
a2533 2
"Oh n&atilde;o! Eu esqueci de adicionar um conjunto de arquivos durante a 
instala&ccedil;&atilde;o!"
d2535 14
a2548 13
As vezes, voc&ecirc; acha que necessita realmente s&oacute; de 
<tt>comp41.tgz</tt> (ou algum outro componente do sistema)
ap&oacute;s a instala&ccedil;&atilde;o, voc&ecirc; ent&atilde;o verifica que 
necessita de outros conjuntos de arquivos.  Boa not&iacute;cia: H&aacute; duas 
maneiras f&aacute;ceis de instalar o conjunto de arquivos ap&oacute;s a 
instala&ccedil;&atilde;o inicial:

<h3>Usando o processo de atualiza&ccedil;&atilde;o</h3>
Simplismente inicialize com uma m&iacute;dia de instala&ccedil;&atilde;o 
(CD-ROM ou Floppy), e escolha Upgrade (em vez de Install).  Quando voc&ecirc; 
ver a lista de arquivos de instala&ccedil;&atilde;o, escolha somente os 
arquivos que voc&ecirc; n&atilde;o escolheu na primeira 
instala&ccedil;&atilde;o, selecione a origem, e ent&atilde;o comece a instalar.
d2551 3
a2553 3
O conjunto de arquivos de instala&ccedil;&atilde;o s&atilde;o simples arquivos 
tar, e voc&ecirc; pode expand&iacute;-los manualmente da raiz do sistema de 
arquivos:
d2558 1
a2558 1
  # tar xzvpf comp41.tgz
d2562 2
a2563 2
N&atilde;o se esque&ccedil;a da op&ccedil;&atilde;o <tt>'p'</tt> no comando 
acima afim de restaurar corretamente as permiss&otilde;es dos arquivos!
d2565 8
a2572 6
Um erro comum &eacute; pensar que voc&ecirc; pode usar
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1">pkg_add(1)</a>
para adicionar conjunto de arquivos n&atilde;o instalados.  Isto n&atilde;o 
funciona.  pkg_add(1) &eacute; para 
<a href="../faq15.html#PkgMgmt">instala&ccedil;&atilde;o de pacotes</a>,
n&atilde;o para arquivos tar gen&eacute;ricos como os do conjunto de 
d2575 20
d2598 4
a2601 22
<b><tt>bsd.rd</tt></b> &eacute; um "Disco RAM" do kernel.  Este arquivo 
&eacute; muito &uacute;til; muitos desenvolvedores tem cuidados para 
mant&ecirc;-lo sempre na ra&iacute;z do seu sistema.

<p>
Cham&aacute;-lo de "disco de RAM do kernel" descreve o sistema de arquivos
-- melhor que um disco f&iacute;sico, as utilidades dispon&iacute;veis depois 
do boot com <tt>bsd.rd</tt> s&atilde;o armazenadas no kernel, e s&atilde;o 
executadas de um sistema de arquivos baseado em RAM.  <tt>bsd.rd</tt> 
tamb&eacute;m inclui um conjunto de utilit&aacute;rios para que voc&ecirc; 
fa&ccedil;a a manuten&ccedil;&atilde;o e a instala&ccedil;&atilde;o do seu 
sistema.

<p>
Em algumas plataformas, <tt>bsd.rd</tt> &eacute; a t&eacute;cnica preferida 
para instala&ccedil;&atilde;o -- voc&ecirc; coloca este kernel em um sistema 
de arquivos existente, inicia com ele, e executa a instala&ccedil;&atilde;o a 
partir dele.  Na maioria das plataformas, se voc&ecirc; esta executando uma 
vers&atilde;o antiga do OpenBSD, voc&ecirc; pode pegar por FTP uma 
vers&atilde;o nova de <tt>bsd.rd</tt>, reinicar a m&aacute;quina com ele, e 
instalar uma nova vers&atilde;o do OpenBSD sem usar uma m&iacute;dia 
remov&iacute;vel para isso.
d2603 23
a2625 2
Aqui esta um exemplo de inicializa&ccedil;&atilde;o com <tt>bsd.rd</tt> em um 
sistema i386:
d2632 1
a2632 1
  &gt;&gt; OpenBSD/i386 BOOT 2.10
d2637 8
a2644 7
Como indicado, voc&ecirc; ser&aacute; levado ao programa de 
instala&ccedil;&atilde;o, mas voc&ecirc; pode executar um shell e fazer a 
manuten&ccedil;&atilde;o do seu sistema.
<p>
A regra geral para inicializar com <tt>bsd.rd</tt> &eacute; mudar o seu kernel 
de <tt>/bsd</tt> para <tt>bsd.rd</tt> atrav&eacute;s dos meios usados em sua 
plataforma.
d2650 13
a2662 10
<h3>4.12.1 - Meu Compaq s&oacute; reconhece 16M RAM</h3>
<i>Alguns</i> sistemas Compaq n&atilde;o detectam corretamente toda a RAM pelo 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">
boot loader de segundo est&aacute;gio do OpenBSD</a>, e somente 16M s&atilde;o 
detectados e utilizados pelo OpenBSD.  Isso pode ser corrigido pela 
cria&ccedil;&atilde;o/edi&ccedil;&atilde;o do arquivo
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot.conf&amp;sektion=8&amp;arch=i386"><tt>/etc/boot.conf</tt></a>, 
ou entrando com o seguinte comando depois de "<tt>boot></tt>" antes que o OpenBSD seja carregado.  Se voc&ecirc; 
possui uma m&aacute;quina com 64M RAM, mas o OpenBSD s&oacute; reconhece os 
primeiros 16M, o comando que voc&ecirc; usaria seria:
d2664 2
a2665 2
<pre>     
	 machine mem +0x3000000@@0x1000000
d2667 7
a2673 8
Para adicionar 48M (<tt>0x3000000</tt>) ap&oacute;s os primeiros 16M
(<tt>0x1000000</tt>).  Tipicamente, se voc&ecirc; tivesse uma m&aacute;quina 
com esse problema, voc&ecirc; primeiramente entraria com o comando acima no 
prompt <tt>boot></tt> no momento da instala&ccedil;&atilde;o por 
disquete/CD-ROM, carregaria o sistema, reiniciaria, e criaria o 
arquivo <tt>/etc/boot.conf</tt> com a linha de comando acima para que nas 
pr&oacute;ximas inicializa&ccedil;&otilde;es toda a mem&oacute;ria RAM 
j&aacute; estivesse dispon&iacute;vel.
d2676 2
a2677 2
Sabe-se tamb&eacute;m que uma atualiza&ccedil;&atilde;o da ROM soluciona este 
problema em <i>alguns</i> sistemas.
d2680 29
a2708 27
<h3>4.12.2 - Meu i386 n&atilde;o inicia ap&oacute;s a instala&ccedil;&atilde;o</h3>
Sua instala&ccedil;&atilde;o parace ter ocorrigo perfeitamente, mas na primeira 
inicializa&ccedil;&atilde;o, voc&ecirc; n&atilde;o v&ecirc; nem sinal do 
OpenBSD.  H&aacute; algumas raz&otilde;es comuns para este problema:

<ul>
<li><b>Nenhuma parti&ccedil;&atilde;o foi marcada como ativa no fdisk(8).</b>  
para solucionar este problema, reinicie a sua m&aacute;quina usando um disquete 
de boot ou outra m&iacute;dia, e "marque" a parti&ccedil;&atilde;o como 
"ativa" (bootable).  Veja 
<a href="../faq14.html#fdisk">aqui</a> e
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">aqui</a>

<li><b>Nenhum boot loader v&aacute;lido foi colocado no disco.</b>
Se voc&ecirc; respondeu "Y" para a quest&atilde;o "Use entire disk for 
OpenBSD?" durante a instala&ccedil;&atilde;o, ou usou a op&ccedil;&atilde;o 
"<tt>reinit</tt>" no fdisk(8), O registro de inicializa&ccedil;&atilde;o do 
OpenBSD foi instalado no Registro Mestre de Inicializa&ccedil;&atilde;o (MBR) 
do disco; sen&atilde;o, o c&oacute;digo existente do master boot estaria 
intocado.  Isto ser&aacute; um problema se nenhum outro boot record existir.
Uma solu&ccedil;&atilde;o &eacute; inicializar outra vez com a m&iacute;dia de 
instala&ccedil;&atilde;o, entrar em um prompt do shell e executar
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>
para atualizar o c&oacute;digo a partir da linha de comando:

<pre>    
	# fdisk -u wd0
d2710 9
a2718 8
Nota: a op&ccedil;&atilde;o "update" do modo interativo ("-e") do fdisk 
n&atilde;o escreve os bytes de assinatura requeridos para fazer o disco 
inicializ&aacute;vel.

<li><b> Em algumas raras ocasi&otilde;es, algo pode dar errado com o segundo 
est&aacute;gio de instala&ccedil;&atilde;o do gerenciador de boot.</b>  
Reinstala&ccedil;&atilde;o do segundo est&aacute;gio do gerenciador 
de boot &eacute; discutido <a href="../faq14.html#InstBoot">aqui</a>.
d2723 10
a2732 8
<h3>4.12.3 - Minha (velha, lenta) m&aacute;quina inicia, mas n&atilde;o passa do ssh-keygen</h3>
&Eacute; prov&aacute;vel que a sua m&aacute;quina esteja funcionando muito bem, 
mas esta levando algum tempo para realizar o processo de gera&ccedil;&atilde;o 
de chaves do ssh.  Uma SPARCStation2 ou um Macintosh Quadra pode levar 45 
minutos ou mais para terminar os tr&ecirc;s passos de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-keygen&amp;sektion=1">ssh-keygen(1)</a>, 
algumas m&aacute;quinas levar&atilde;o algum tempo para fazer 
isso.  Deixe-o terminar; isso s&oacute; &eacute; feito uma vez por 
d2736 7
a2742 6
Note que o tamanho padr&atilde;o da chave cresceu para o OpenBSD 3.8,
ent&atilde;o os tempos de gera&ccedil;&atilde;o das chaves est&aacute;
levando mais tempo do que costumava levar. usu&aacute;rios de m&aacute;quinas
lentas geram suas chaves em outro computador (mais r&aacute;pido), ent&atilde;o
colocam as chaves geradas em <a href="#site">site41.tgz</a> e instale-o com o 
resto do sistema.
d2745 2
a2746 2
<h3>4.12.4 - Eu recebo a mensagem "Failed to change directory" durante a 
instala&ccedil;&atilde;o</h3>
d2748 2
a2749 2
Ao fazer uma instala&ccedil;&atilde;o FTP de um 
<a href="../faq5.html#Flavors">snapshot</a> durante o est&aacute;gio 
d2754 1
a2754 1
  Do you want to see a list of potential FTP servers?  [yes] <b><i>Enter</i></b>
d2760 6
a2765 6
Isto &eacute; normal e esperado durante o ciclo de 
pr&eacute;-libera&ccedil;&atilde;o.  O programa de instala&ccedil;&atilde;o 
procura pela lista de FTP no servidor FTP prim&aacute;rio 
em um diret&oacute;rio que ainda n&atilde;o esta dispon&iacute;vel antes da 
<a href="../faq1.html#Next">data de libera&ccedil;&atilde;o</a>, ent&atilde;o 
voc&ecirc; recebe a mensagem acima.
d2768 3
a2770 3
Simplesmente use uma <a href="../../ftp.html">lista de espelhos FTP</a> 
para encontrar o seu espelho favorito, e entre manualmente o nome quando for 
preciso.
d2773 2
a2774 2
<b>Nota: Voc&ecirc; n&atilde;o deve ver isto se estiver instalando um 
<i>release</i> ou de um CD-ROM.</b>
d2777 27
a2803 22
<h3>4.12.5 - Minha tabela de parti&ccedil;&otilde;es do fdisk esta corrompida ou vazia!</h3>
Ocasionalmente, o usu&aacute;rio achar&aacute; que o sistema ir&aacute; 
funcionar, mas quando executa <tt>fdisk wd0</tt>, eles ver&atilde;o uma tabela 
de parti&ccedil;&atilde;o completamente vazia (ou algumas vezes, lixo). Isto 
geralmente &eacute; causado por ter sido criada uma parti&ccedil;&atilde;o, 
utilizando o <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>, 
com um offset de tamanho 0 (zero setores), ao inv&eacute;s de <a href="#trackoffset">um offset com uma trilha </a> 
(nota: &eacute; assumida aqui uma plataforma <a href="../../i386.html">i386</a> 
ou <a href="../../amd64.html">amd64</a>. 
Outras plataformas requerem tamanhos diferentes de offset, e algumas 
N&Atilde;O precisam de offset). 
O sistema utiliza ent&atilde;o <a href="../faq14.html#Boot386">inicializa</a>
usando a PBR, e n&atilde;o a MBR, para o processo de boot.

<p>
Ao passo que esta configura&ccedil;&atilde;o pode funcionar, ela pode 
tamb&eacute;m ser um problema durante manuten&ccedil;&otilde;es, e deve ser 
consertada. Para consertar isto, o sistema de arquivo do disco deve geralmente 
ser recriado do zero (no entanto, se voc&ecirc; REALMENTE saiba o que 
est&aacute; fazendo, voc&ecirc; pode apenas recriar o r&oacute;tulo de 
disco (disklabel) e a MBR, e apenas perder e reconstruir a primeira 
parti&ccedil;&atilde;o OpenBSD no disco).
d2809 98
a2906 81
<h3>arquivo <tt>siteXX.tgz</tt></h3>
O script de instala&ccedil;&atilde;o/atualiza&ccedil;&atilde;o do OpenBSD 
permite a sele&ccedil;&atilde;o de um conjunto de arquivos 
criado pelo usu&aacute;rio chamado "<tt>siteXX.tgz</tt>", onde  XX &eacute; a 
vers&atilde;o (por exemplo 41).  O arquivo <tt>siteXX.tgz</tt> &eacute;, como 
outro
<a href="../faq4.html#FilesNeeded">conjunto de arquivos</a>, comprimido com
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gzip&amp;sektion=1">gzip(1)</a> e
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tar&amp;sektion=1">tar(1)</a>
e armazenados na parti&ccedil;&atilde;o '/', e descomprimidos como qualquer 
outro conjunto de arquivos com as op&ccedil;&otilde;es <tt>xzpf</tt>.  Este 
conjunto de arquivos ser&aacute; instalado por &uacute;ltimo, depois de todos 
os outros arquivos.

<p>
Este conjunto de arquivos habilita o usu&aacute;rio a adicionar/ou sobrescrever 
o conjunto de arquivos instalados de forma 'normal' e ent&atilde;o customizar 
a instala&ccedil;&atilde;o ou a atualiza&ccedil;&atilde;o.

<p>
Voc&ecirc; pode criar um conjunto de instala&ccedil;&atilde;o espec&iacute;fico
para cada m&aacute;quina chamado <tt>siteXX-<i>&lt;hostname&gt;.tgz</i></tt>,
por exemplo "<tt>site41-puffy.tgz</tt>". Isso possibilita a 
instala&ccedil;&atilde;o, atualiza&ccedil;&atilde;o ou 
recupera&ccedil;&atilde;o do sistema de forma r&aacute;pida e simples.

<p>
Alguns exemplos do uso do arquivo <tt>siteXX.tgz</tt>:
<ul>
<li> Crie um arquivo siteXX.tgz que contenha todas as mudan&ccedil;as 
que voc&ecirc; fez desde a primeira instala&ccedil;&atilde;o do OpenBSD. 
Ent&atilde;o, se voc&ecirc; tiver que recriar o sistema simplesmente selecione 
o arquivo siteXX.tgz durante a reinstala&ccedil;&atilde;o e todas as suas 
mudan&ccedil;as ser&atilde;o replicadas no novo sistema.

<li>Crie uma s&eacute;rie de diret&oacute;rios espec&iacute;ficos para cada 
m&aacute;quina cada um com um arquivo siteXX.tgz que contenha arquivos 
espec&iacute;ficos para cada uma delas. A instala&ccedil;&atilde;o (por 
exemplo: m&aacute;quinas com diferentes placas de v&iacute;deo) de uma 
categoria pode ser feita selecionando o arquivo siteXX.tgz apropriado.

<li>Coloque os arquivos que voc&ecirc; customiza rotineiramente em um mesmo 
siteXX.tgz  --
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&amp;sektion=8"><tt>/etc/skel</tt></a> ,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5"><tt>/etc/pf.conf</tt></a>, 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8"><tt>/var/www/conf/httpd.conf</tt></a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf.local&amp;sektion=8"><tt>/etc/rc.conf.local</tt></a>, etc. 
</ul>

<h3><tt>install.site</tt>/<tt>upgrade.site</tt> scripts</h3>
Como &uacute;ltimo passo no processo de 
instala&ccedil;&atilde;o/atualiza&ccedil;&atilde;o, o script procura no 
diret&oacute;rio raiz do sistema rec&eacute;m-instalado por 
<tt>install.site</tt> ou <tt>upgrade.site</tt>, o mais apropriado para o 
processo atual, e executa este script num ambiente 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&amp;sektion=8">chroot</a>ed 
para a raiz do sistema instalado/atualizado. Lembre-se, a 
atualiza&ccedil;&atilde;o &eacute; feita a partir de um sistema de arquivos 
inicializado, ent&atilde;o o seu sistema de arquivo alvo est&aacute; montado
atualmente no diret&oacute;rio ,<tt>/mnt</tt>.  No entanto, o script pode ser 
escrito como se estivesse executando na raiz "normal" do seu sistema de 
arquivo. Uma vez que este script &eacute; executado apenas depois que todos os 
arquivos est&atilde;o instalados, voc&ecirc; tem uma funcionalidade quase 
completa do seu sistema (apesar de em modo monousu&aacute;rio) quando seu 
script &eacute; executado.

<p>
Note que o script <tt>install.site</tt> deve estar em um arquivo 
<tt>siteXX.tgz</tt>, enquanto que o script <tt>upgrade.site</tt>
pode ser colocado no diret&oacute;rio raiz antes da atualiza&ccedil;&atilde;o, 
ou pode ser colocado em um arquivo <tt>siteXX.tgz</tt>.

<p>
Os scripts podem ser utilizados para fazer muitas coisas:
<ul>
<li>Remover arquivos que est&atilde;o instalados/atualizados mas que 
voc&ecirc; n&atilde;o os quer presentes no sistema.
<li> Remover/atualizar/instalar <a href="../faq15.html#PkgMgmt">pacotes</a> 
que voc&ecirc; deseja no sistema instalado.
<li> Fazer um <a href="../faq14.html#Backup">backup/arquivo imediato</a> do 
sistema rec&eacute;m-instalado antes de voc&ecirc; exp&ocirc;-lo ao resto
d2908 4
a2911 2
<li> Use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rdate&amp;sektion=8">rdate(8)</a>
para configurar a hora do seu sistema.
d2915 14
a2928 4
A combina&ccedil;&atilde;o dos arquivos <tt>siteXX.tgz</tt> e 
<tt>install.site/upgrade.site</tt> tem o objetivo de dar aos usu&aacute;rios 
amplas capacidades de customiza&ccedil;&atilde;o sem precisar construir seus 
pr&oacute;prios conjuntos de instala&ccedil;&atilde;o.
a2929 6
<p>
Nota: Se voc&ecirc; for fazer a sua instala&ccedil;&atilde;o
de um servidor http, voc&ecirc precisa adicionar <tt>site*.tgz</tt> 
ao arquivo <tt>index.txt</tt> no diret&oacute; de fontes para que ele fique
dispon&iacute;vel na hora da instala&ccedil;&atilde;o. Isso n&atilde;o &eacute;
necess&aacute;rio para ftp ou outras instala&ccedil;&otilde;es.
d2932 3
a2934 3
<h2>4.14 - Como eu instalo um n&uacute;mero de sistemas similares?</h2>
Aqui est&atilde;o algumas ferramentas que voc&ecirc; pode usar quando 
tem que instalar um n&uacute;mero de sistemas similares de OpenBSD.
d2936 1
a2936 1
<h3>Arquivos <tt>siteXX.tgz</tt> e <tt>install/upgrade.site</tt> </h3>
d2939 8
a2946 7
<h3>Restaurando com dump(8)</h3>
Na maioria das plataformas, a m&iacute;dia de inicializa&ccedil;&atilde;o 
inclui o programa 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore(8)</a>
, que pode ser usado para recuperar backups feitos com 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&amp;sektion=8">dump(8)</a>.
Assim, voc&ecirc; poderia inicializar a partir de um 
d2948 2
a2949 2
<a href="../../orders.html">CD</a>, ou
<a href="#bsd.rd">bsd.rd</a> e ent&atilde;o executar
d2951 7
a2957 7
<a href="../faq14.html#disklabel">disklabel</a> e
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restaurar</a>
as configura&ccedil;&otilde;es a partir de uma fita ou outra m&iacute;dia, e 
instalar os
<a href="../faq14.html#InstBoot">blocos de boot (boot blocks)</a>. Mais 
detalhes 
<a href="../faq14.html#Backup">aqui</a>.
d2960 22
a2981 19
Infelizmente, n&atilde;o h&aacute; nenhum pacote conhecido de softwares que
criem imagem de discos com suporte a FFS e que criem imagens contendo apenas o 
espa&ccedil;o ativo do arquivo. A maioria das soluc&otilde;es existentes 
tratar&atilde;o a parti&ccedil;&atilde;o OpenBSD como "gen&eacute;rica", e
podem fazer uma imagem do disco inteiro.  Isso geralmente &eacute; o
objetivo, por&eacute;m h&aacute; um grande desperd&iacute;cio de espa&ccedil;o 
-- uma parti&ccedil;&atilde;o <tt>/home</tt> de 10G ira requerer 10G de 
espa&ccedil;o na imagem, mesmo que n&atilde;o haja um &uacute;nico arquivo na 
parti&ccedil;&atilde;o.  Ao passo que voc&ecirc; pode instalar tipicamente um
drive de imagem para aumentar o tamanho de um drive, voc&ecirc; n&atilde;o pode 
diretamente utilizar o espa&ccedil;o extra, e voc&ecirc; n&atilde;o pode 
instalar uma imagem para um drive menor.

<p>
Se esta &eacute; uma situa&ccedil;&atilde;o aceit&aacute;vel, voc&ecirc; pode 
utilizar o comando <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=1">dd</a>,
o qual permite copiar o conte&uacute;do inteiro de um disco para outro, setor a
setor. Isto proporcionaria a mesma funcionalidade de programas comerciais,
por&eacute;m a custo zero.
d2984 20
a3003 16
<h2>4.15 - Como eu obtenho o dmesg(8) para reportar um problema de instala&ccedil;&atilde;o?</h2>
Quando <a href="../../report.html">reportar um problema</a>, &eacute; 
necess&aacute;rio incluir o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg(8)</a>.
Entretanto, quando voc&ecirc; necessita fazer isso, &eacute; porque o sistema 
n&atilde;o esta funcionando normalmente ou n&atilde;o instalou ent&atilde;o 
voc&ecirc; n&atilde;o possui o disco, a rede, ou outro recurso 
necess&aacute;rio que voc&ecirc; possa pegar o dmesg e enviar a
<a href="../../mail.html">lista de e-mail</a> apropriada.  A outras maneiras, 
no entanto:

<ul>
<li><b>Disquete:</b> Discos de boot e CD-ROM possuem ferramentas que 
possibilitam gravar o seu dmesg em um disquete do MSDOS para depois poder ser 
lido em outra m&aacute;quina.  Coloque um disquete formatado do MSDOS no drive 
e execute os comandos abaixo:
d3005 1
a3005 1
<pre>     
d3007 1
a3007 1
     dmesg &gt;/mnt/dmesg.txt
d3010 5
a3014 4
Se voc&ecirc; tiver um outro sistema OpenBSD, voc&ecirc; pode fazer isso em um 
disquete comp&aacute;tivel com o sistema de arquivos do OpenBSD -- 
frequentemente, o disquete de boot tem bastante espa&ccedil;o para conter o 
dmesg.  Neste caso, tire a op&ccedil;&atilde;o "<tt>-t msdos</tt>" acima.
d3018 8
a3025 6
Usando um console serial e capturando a sa&iacute;da em outro computador 
&eacute; o melhor caminho para capturar informa&ccedil;&otilde;es de 
diagn&oacute;stico - particularmente se o computador trava logo ap&oacute;s 
o boot. Em um segundo computador, voc&ecirc; necessita de um cabo serial 
apropriado (como um cabo null-modem), e um programa emulador de terminal para 
capturar a sa&iacute;da da tela e arquivar.
d3028 5
a3032 5
Informa&ccedil;&otilde;es gerais de configura&ccedil;&atilde;o de console 
serial s&atilde;o discutidos em
<a href="../faq7.html#SerCon">outra parte nesta FAQ</a>;
em geral para capturar o log da instala&ccedil;&atilde;o,
O comando abaixo &eacute; usualmente suficiente.
d3042 1
a3042 1
boot&gt; <b>set tty com0</b>
d3047 3
a3049 4
Isso dir&aacute; ao OpenBSD para usar a primeira porta serial 
(tamb&eacute;m chamada de COM1 ou COMA na documenta&ccedil;&atilde;o do PC)
como um console serial.
A taxa padr&atilde;o de comunica&ccedil;&atilde;o &eacute; 9600 (baud rate).
d3054 5
a3058 5
Estas m&aacute;quinas usar&atilde;o automaticamente um console serial se 
inicados se um teclado.
Se voc&ecirc; possui um teclado e um monitor unidos, voc&ecirc; pode ainda 
for&ccedil;ar o sistema a usar um console serial com o seguinte comando no 
prompt <tt>ok</tt>.
d3070 7
a3076 4
<li><b>FTP:</b>  Sob algumas circunst&acirc;ncias, voc&ecirc; pode usar um 
cliente <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1">ftp(1)</a>
do disquete de boot ou CD-ROM para enviar o dmesg a um servidor FTP local, de 
onde voc&ecirc; possa recuper&aacute;-lo mais tarde.
d3080 6
a3085 4
<font color="#0000e0">
<a href="index.html">[&Iacute;ndice do FAQ]</a>
<a href="../faq3.html">[Para Se&ccedil;&atilde;o 3 - Obtendo OpenBSD]</a>
<a href="../faq5.html">[Para Se&ccedil;&atilde;o 5 - Construindo o sistema a partir da fonte]</a>
d3090 3
a3092 3
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif"
border= "0" alt= "[voltar]"></a>
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
d3096 2
a3097 2
Originally [OpenBSD: faq4.html,v 1.244 ]<br>
$Translation: faq4.html,v 1.10 2007/06/18 22:09:39 dsantos Exp $<br>
@


1.6
log
@Sync with steelix translation CVS
@
text
@d2132 12
d2721 2
a2722 2
Originally [OpenBSD: faq4.html,v 1.242 ]<br>
$Translation: faq4.html,v 1.9 2007/05/31 11:15:53 dsantos Exp $<br>
@


1.5
log
@completely forgot to commit this Steelix CVS update. Reported by Joao
Salvatti, thanks!
@
text
@d4 2
a5 2
<title>4 - Guia de Instala&ccedil;&atilde;o do OpenBSD 3.7</title>
<link rev= "made" href= "mailto:www@@openbsd.org">
d7 5
a11 5
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2005 by OpenBSD.">
d16 1
a16 1
<body bgcolor= "#ffffff" text= "#000000">
d19 2
a20 1
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="0">    
d24 4
a27 4
<font color= "#0000e0">
<a href= "index.html">[&Iacute;ndice do FAQ]</a>
<a href= "../faq3.html">[Para a se&ccedil;&atilde;o 3 - Obtendo o OpenBSD]</a>
<a href= "../faq5.html">[Para a se&ccedil;&atilde;o 5 - Construindo o Sistema a partir da fonte]</a>
d30 1
a30 1
<h1><font color="#e00000">4 - Guia de Instala&ccedil;&atilde;o do OpenBSD 3.7</font></h1>
d36 6
a41 7
<li><a href= "#Overview"    >4.1 - Vis&atilde;o Geral do procedimento de 
								instala&ccedil;&atilde;o do OpenBSD</a>
<li><a href= "#Checklist"   >4.2 - Lista de verifica&ccedil;&otilde;es antes da 
								instala&ccedil;&atilde;o</a>

<li><a href="#MkInsMedia"   >4.3 - Criando uma m&iacute;dia inicializ&aacute;vel 
								de instala&ccedil;&atilde;o do OpenBSD</a>
d43 4
a46 3
    <li><a href="#UnixFlop" >4.3.1 - Criando disquetes no Unix</a>
    <li><a href="#DosFlop"  >4.3.2 - Criando disquetes no Windows ou DOS</a>
    <li><a href="#MkCD-ROM" >4.3.3 - Criando um CD de inicializa&ccedil;&atilde;o</a>
d48 4
a51 3
<li><a href="#Boot"         >4.4 - Carregando a m&iacute;dia de 
								instala&ccedil;&atilde;o do OpenBSD</a>
<li><a href="#Install"      >4.5 - Executando a instala&ccedil;&atilde;o</a>
d53 9
a61 8
  <li><a href="#Start"      >4.5.1 - Iniciando a instala&ccedil;&atilde;o</a>
  <li><a href="#Disks"      >4.5.2 - Configurando os discos</a>
  <li><a href="#Hostname"   >4.5.3 - Configurando o nome do host</a>
  <li><a href="#Network"    >4.5.4 - Configurando a rede</a>
  <li><a href="#InstMedia"  >4.5.5 - Escolhendo a m&iacute;dia de 
  								instala&ccedil;&atilde;o</a>
  <li><a href="#Filesets"   >4.5.6 - Escolhendo o conjunto de arquivos</a>
  <li><a href="#Finish"     >4.5.7 - Finalizando</a>
d64 12
a75 12
<li><a href= "#FilesNeeded" >4.6 - Quais arquivos s&atilde;o necess&aacute;rios 
								para a instala&ccedil;&atilde;o?</a>
<li><a href= "#SpaceNeeded" >4.7 - Quanto de espa&ccedil;o eu preciso para uma 
								instala&ccedil;&atilde;o do OpenBSD?</a>
<li><a href= "#Multibooting">4.8 - Multibooting com OpenBSD/i386</a>
<li><a href= "#SendDmesg"   >4.9 - Enviando seu dmesg para dmesg@@openbsd.org 
								ap&oacute;s a instala&ccedil;&atilde;o</a>
<li><a href= "#AddFileSet"  >4.10 - Adicionando arquivos ap&oacute;s a 
								instala&ccedil;&atilde;o</a>
<li><a href= "#bsd.rd"      >4.11 - O que &eacute; 'bsd.rd'?</a>
<li><a href= "#InstProb"    >4.12 - Problemas comuns de 
								instala&ccedil;&atilde;o</a>
d77 10
a86 11
  <li><a href="#cpq16m"     >4.12.1 - Meu Compaq s&oacute; reconhece 16M RAM</a>
  <li><a href="#noboot"     >4.12.2 - Meu i386 n&atilde;o inicia ap&oacute;s a 
  								instala&ccedil;&atilde;o</a>
  <li><a href="#sshhang"    >4.12.3 - Minha m&aacute;quina iniciou, mas para no 
  								processo de cria&ccedil;&atilde;o de chaves do SSH</a>
  <li><a href="#noftplist"  >4.12.4 - Recebo a mensagem "Failed to change 
  								directory" ao fazer a instala&ccedil;&atilde;o</a>
  <li><a href="#krb4"       >4.12.5 - Quando eu fa&ccedil;o login, Eu recebo a 
  								mensagem "login_krb4-or-pwd: Exec format error"</a>
  <li><a href="#blankfdisk" >4.12.6 - Minha tabela de parti&ccedil;&otilde;es do 
  								fdisk esta corrompida ou vazia!</a>
d88 7
a94 8
<li><a href= "#site"        >4.13 - Customizando o processo de 
								instala&ccedil;&atilde;o</a>
<li><a href= "#Multiple"    >4.14 - Como eu instalo um n&uacute;mero de sistemas 
								similares?</a>
<li><a href="#getdmesg"     >4.15 - Como eu obtenho o dmesg(8) para reportar 
								um problema de instala&ccedil;&atilde;o?</a>
<li><a href="#bsdrdaout"    >4.16 - Atualizando/Reinstalando o OpenBSD/i386 
								usando <tt>bsd.rd-a.out</tt></a>.
d99 2
a100 2
<a name= "Overview"></a>
<h2>4.1 - Vis&atilde;o geral do procedimento de instala&ccedil;&atilde;o do OpenBSD</h2>
d115 1
a115 1
Na maioria das plataformas, a instala&ccedil;&atilde;o do OpenBSD usa um kernel 
d122 2
a123 1
Existem diversas maneiras de inicializar este kernel de instala&ccedil;&atilde;o:
d129 1
a129 1
<a href="#UnixFlop">Unix-like</a>, ou em sistemas
d131 1
a131 1
Os nomes dos arquivos s&atilde;o tipicamente <tt>floppy37.fs</tt>, embora 
d135 4
a138 3
<li><b>CD-ROM:</b> Em diversas plataformas uma imagem de CD-ROM
(<tt>cd37.iso</tt>) &eacute; disponibilizada para a cria&ccedil;&atilde;o de 
CD-ROM inicializ&aacute;vel.
d144 12
a155 11
<li><b><a href="#bsd.rd">bsd.rd</a>:</b> O disco de RAM do kernel,
utilizado para inicializa&ccedil;&atilde;o de uma parti&ccedil;&atilde;o 
j&aacute; existento do OpenBSD ou para inicializa&ccedil;&atilde;o atrav&eacute;s
da rede.

<li><b>Rede:</b> Muitas plataformas suportam inicializa&ccedil;&atilde;o 
atrav&eacute;s da rede.

<li><b>Escrevendo o arquivo de imagem do sistema no disco:</b> a imagem do 
sistema de arquivos pode ser escrita em uma parti&ccedil;&atilde;o j&aacute; 
existente, e depois deve ser carregada.
d157 2
a158 2
<li><b>Fita inicializ&aacute;vel:</b> Muitas plataformas suportam 
inicializa&ccedil;&atilde;o a partir de fitas magn&eacute;ticas.
d164 2
a165 2
Nem todas as <a href="../../pt/plat.html">plataformas</a> suportam todos os 
m&eacute;todos de inicializa&ccedil;&atilde;o:
d168 2
a169 2
<li><a href="../../alpha.html"><b>alpha:</b></a> Disquete, CD-ROM, escrevendo 
a imagem do disquete para o disco r&iacute;gido.
d180 1
a180 1
<li><a href="../../i386.html"><b>i386:</b></a> Disquete, CD,
d183 4
a186 4
<li><a href="../../mac68k.html"><b>mac68k:</b></a> Inicializado utilizando 
ferramentas que rodam no Mac OS.
Veja:
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.7/mac68k/INSTALL.mac68k">INSTALL.mac68k</a> para mais detalhes.
d190 2
a191 1
<li><a href="../../mvme68k.html"><b>mvme68k:</b></a> Rede, fita inicializ&aacute;vel.
d195 3
a197 2
<li><a href="../../sparc.html"><b>sparc:</b></a> Disquete, CD-ROM, rede,
escrevendo a imagem em uma parti&ccedil;&atilde;o swap, fita inicializ&aacute;vel.
d199 2
a200 2
<li><a href="../../sparc64.html"><b>sparc64:</b></a> Disquetes (U1/U2 somente),
CD-ROM, rede, escrevendo a imagem em uma parti&ccedil;&atilde;o j&aacute; existente.
d202 1
a202 1
<li><a href="../../vax.html"><b>vax:</b></a> Disquete, rede.
d207 2
a208 1
<a href="#bsd.rd">bsd.rd</a> para reinstalar ou atualizar o sistema.
d214 1
a214 1
Outra vez, nem todas as plataformas suportam todas as op&ccedil;&otilde;es.
d217 3
a219 2
<li><b>CD-ROM:</b> &Eacute; claro, n&oacute;s preferimos que voc&ecirc; use
<a href="../../pt/orders.html">o conjunto de CD-ROM's oficiais</a>, mas por 
d223 1
a223 2
Qualquer 
<a href="../../pt/ftp.html">espelho FTP</a>
d227 1
a227 2
Qualquer
<a href="../../pt/ftp.html#http">espelho HTTP</a>
d230 1
a230 1
<li><b>Parti&ccedil;&otilde;es de disco locais:</b>
d240 1
a240 1
Algumas plataformas suportam usar NFS para montar o conjunto de arquivos 
d243 5
a247 3
<li><b>FITA:</b>
O conjunto de arquivos de instala&ccedil;&atilde;o podem ser lidos de uma fita 
suportada pelo sistema.
d255 1
a255 1
ter uma id&eacute;ia do que quer quando terminar.
d257 1
a257 1
Voc&ecirc; ir&aacute; querer saber os seguintes items, pelo menos:
d260 1
a260 1
<li>Hardware instalado e dispon&iacute;vel
d263 3
a265 3
  	  compatibilidades
  <li>Se for ISA, voc&ecirc; precisa saber configurar o seu hardware, e confirmar 
  	  quando o OpenBSD as requerer.
d268 1
a268 1
<li>Como o sistema ser&aacute; atualizado e corrigido?
d271 5
a275 5
      <a href="#SpaceNeeded">espa&ccedil;o suficiente</a> dispon&iacute;vel 
	  para a &aacute;rvore de fontes e para constru&iacute;-la.
  <li>Sen&atilde;o, voc&ecirc; precisar&aacute; de acesso a outra m&aacute;quina 
  	  para construir um novo
      <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&amp;sektion=8">release</a> corrigido.
d283 1
a283 1
	  boot/inicializa&ccedil;&atilde;o"?
d285 3
a287 3
  	  manter uma parti&ccedil;&atilde;o/SO existente (ou espa&ccedil;o para uso 
	  futuro)?
  <li>Como voc&ecirc; deseja subparticionar a parte do OpenBSD do seu disco?
d296 1
a296 1
<li>Voc&ecirc; ir&aacute; usar Sistema de Janelas X?
d301 1
a301 1
<h2>4.3 - Criando uma m&iacute;dia inicializ&aacute;vel de instala&ccedil;&atilde;o do OpenBSD</h2>
d305 2
a306 3
dispon&iacute;veis para as plataformas
<a href="../i386.html">i386</a>
e <a href="../sparc.html">sparc</a>.
d309 1
a309 1
A plataforma <a href="../i386.html">i386</a> possui seis imagens de disco 
d313 9
a321 9
<li><b><tt>floppy37.fs</tt></b> (PC Desktop) suporte para v&aacute;rias placas de 
  rede PCI e ISA, suporte a IDE e simples adaptadores SCSI e algumas placas 
  PCMCIA. A maioria dos usu&aacute;rios usa esta imagem para iniciar a 
  instala&ccedil;&atilde;o a partir do disquete
<li><b><tt>floppyB37.fs</tt></b> (Servidores) suporte para diversos controladores
  RAID e para alguns adaptadores SCSI menos comuns.  No entanto,
  suporte para diversos adaptadores SCSI e muitas placas de rede EISA e ISA 
  foram removidos.
<li><b><tt>floppyC37.fs</tt></b> (Laptops) suporte para diversos dispositivos 
d323 1
a323 1
<li><b><tt>cdrom37.fs</tt></b> &eacute;, em efeito uma combina&ccedil;&atilde;o 
d327 3
a329 3
  grav&aacute;vel customizado. 
<li><b><tt>cd37.iso</tt></b> &eacute; uma imagem ISO9660 que pode ser usada para 
  criar um CD inicializ&aacute;vel na maiorias dos softwares de 
d334 1
a334 1
<li><b><tt>cdemu37.iso</tt></b> &eacute; uma imagem ISO9660, usando
d336 4
a339 3
  imagem de 2.88M, <tt>cdrom37.fs</tt>.  Espera-se que poucos usu&aacute;rios 
  necessitem desta imagem -- a maioria dever&aacute; usar o <tt>cd37.iso</tt>, 
  use somente o <tt>cdemu37.iso</tt> se o <tt>cd37.iso</tt> n&atilde;o funcionar.
d348 2
a349 2
A plataforma <a href="../sparc.html">sparc</a> possui tr&ecirc;s imagens de disco 
separadas para instala&ccedil;&atilde;o que podem ser escolhidas:
d352 2
a353 2
<li><b><tt>floppy37.fs:</tt></b> Suporte para sistemas com disquete.
<li><b><tt>cd37.iso</tt></b> Uma imagem ISO usada para criar seu pr&oacute;prio 
d355 2
a356 2
<li><b><tt>miniroot37.fs</tt></b> Pode ser escrito em uma parti&ccedil;&atilde;o 
  swap e inicializado.
d369 1
a369 1
<table border=0 width="650"> <tr> <td nowrap bgcolor="#EEEEEE"><pre>
d373 1
a373 1
</pre></td></tr> </table>
d382 1
a382 1
Note que sistemas Unix-like possuem diferentes comandos para formatar disquetes.
d390 1
a390 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=0">dd(1)</a>.
d394 2
a395 2
<table border=0 width="650"> <tr> <td nowrap bgcolor="#EEEEEE"><pre>
  # <b>dd if=floppy37.fs of=/dev/rfd0c bs=32k</b>
d401 1
a401 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cmp&amp;sektion=1">cmp(1)</a>.
d406 3
a408 3
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # <b>cmp /dev/rfd0c floppy37.fs</b>
</pre></td> </tr> </table>
d411 1
a411 1
<h3>4.3.2 - Criando disquetes no Windows ou DOS</h3>
d417 3
a419 4
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.7/tools/">tools</a>
em qualquer espelho FTP,
ou do diret&oacute;rio <tt>3.7/tools</tt> encontrado no CD1 do conjunto de 
CD's do OpenBSD.
d428 1
a428 1
<i>rawrite</i>, <i>fdimage</i>, ou <i>ntrw</i>.
d435 3
a437 3
Um <tt>floppyB37.fs</tt> e <tt>floppyC37.fs</tt> possuem nome de arquivos longos,
voc&ecirc; ter&aacute; que encontrar como seu sistema armazenou os arquivos em 
"formato 8.3" antes de usar o <tt>FDIMAGE.EXE</tt> ou
d441 2
a442 2
Exemplo do uso de <i>rawrite</i>:
<table border=0 width="650"> <tr> <td nowrap bgcolor="#EEEEEE"><pre>
d446 1
a446 1
  Enter source file name: <b>floppy37.fs</b>
d449 1
a449 1
</pre> </td> </tr> </table>
d453 2
a454 2
<table border=0 width="650"> <tr> <td nowrap bgcolor="#EEEEEE"><pre>
  C:\> <strong>fdimage -q floppy37.fs a:</strong>
d459 2
a460 2
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  C:\> <strong>ntrw floppy37.fs a:</strong>
d467 1
a467 1
<h3>4.3.3 - Criando um CD-ROM</h3>
d470 5
a474 4
Voc&ecirc; pode criar um CD-ROM usando o arquivo <tt>cd37.iso</tt> ou, no caso de
plataformas i386, voc&ecirc; pode usar tamb&eacute;m o <tt>cdrom37.fs</tt>
como a imagem de inicializa&ccedil;&atilde;o por disquete que &eacute; usada para
inicializar um sistema i386 do CD-ROM. 
d483 4
a486 2
parte do pacote cdrtools encontrado no 
<a href="../faq8.html#Ports">sistema de ports do OpenBSD</a>.
d489 1
a489 1
<a name="boot"></a>
d492 1
a492 1
<h3>Incializa&ccedil;&atilde;o i386</h3>
d494 1
a494 1
Carregar uma imagem de instala&ccedil;&atilde;o em plataformas PC i386 
d509 2
a510 1
Voc&ecirc; pode instalar tamb&eacute;m carregando o <a href="#bsd.rd">bsd.rd</a> 
d517 1
a517 1
Nas plataformas <a href="../sparc64.html">sparc64</a>, somente as 
d526 1
a526 1
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
d536 1
a536 1
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
d552 1
a552 1
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
d568 1
a568 1
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
a571 1

d586 3
a588 3
pode terminar o processo de instala&ccedil;&atilde;o corrente precionando CTRL-C 
e reiniciar a instala&ccedil;&atilde;o novamente sem reiniciar a m&aacute;quina 
executando <tt>install</tt> no prompt de comando.
d597 1
a597 2
fica salva em <tt>/var/run/dmesg.boot</tt>. Em algumas arquiteturas, SHIFT+PGUP 
permite que voc&ecirc; movimente a tela para poder examinar o texto.
d603 1
a603 1
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
d625 5
a629 4
<li> Voc&ecirc; n&atilde;o ter&aacute; a op&ccedil;&atilde;o de instalar o arquivo
<tt>etc37.tgz</tt>.
Depois de instalar, voc&ecirc; ter&aacute; que manualmente efetuar as 
mudan&ccedil;as em <tt>etc37.tgz</tt> antes de seu sistema se tornar funcional.
d636 3
a638 2
saltar releases! Isto frequentemente funciona, mas n&atilde;o &eacute; suportado.
Para o OpenBSD 3.7, atualizar do 3.6 para o 3.7 &eacute; a &uacute;nica 
d641 1
a641 1
reinstala&ccedil;&atilde;o &eacute; recomendada.<br>
d644 4
d652 2
a653 2
Esta op&ccedil;&atilde;o habilita voc&ecirc; a realizar manuten&ccedil;&atilde;o 
do seu sistema.
d662 2
a663 2
Neste exemplo, n&oacute;s faremos uma instala&ccedil;&atilde;o, mas o processo de 
atualiza&ccedil;&atilde;o &eacute; similar.
d666 2
a667 2
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Welcome to the OpenBSD/i386 3.7 install program.
d669 5
a673 6
  This program will help you install OpenBSD in a simple and rational way. At
  any prompt except password prompts you can run a shell command by typing
  '!foo', or escape to a shell by typing '!'. Default answers are shown in []'s
  and are selected by pressing RETURN. At any time you can exit this program by
  pressing Control-C and then RETURN, but quitting during an install can leave
  your system in an inconsistent state.
d675 2
a676 2
  Specify terminal type: [vt220] <b><i>Enter</i></b>
  Do you wish to select a keyboard encoding table? [no] <b><i>Enter</i></b>
d679 1
d691 1
a691 1
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
d703 8
a710 2
instala&ccedil;&atilde;o ser&aacute; abortado e um prompt de comando ser&aacute; 
mostrado.
d716 9
a724 6
A configura&ccedil;&atilde;o de discos no OpenBSD pode variar entre plataformas. 
Para <a href="../../i386.html">i386</a> e <a href="../../macppc.html">macppc</a>,
a configura&ccedil;&atilde;o dos discos &eacute; feita em duas etapas.  
Primeiro, a fatia do disco rig&iacute;do referente ao OpenBSD &eacute; definida 
utilizando o fdisk(8), ent&atilde;o esta fatia &eacute; subdividida em 
parti&ccedil;&otilde;es usando o disklabel(8).
d730 11
a740 10
Esta observa&ccedil;&atilde;o &eacute; correta. Existem duas camadas de 
parti&ccedil;&atilde;o em diversas plataformas do OpenBSD, a primeira, que pode 
ser considerada a parti&ccedil;&atilde;o do Sistema Operacional, cujo 
m&uacute;ltiplos SO's marcam como o seu espa&ccedil;o no disco, e a segunda, 
onde a parti&ccedil;&atilde;o do OpenBSD &eacute; subparticionada em sistemas 
de arquivos individais.  A primeira camada &eacute; vis&iacute;vel na tabela de 
parti&ccedil;&otilde;es do disco para o DOS, Windows e qualquer outro SO que 
coexista com outros Sistemas Operacionais em m&aacute;quinas descendentes IBM AT. 
A segunda camada da parti&ccedil;&atilde;o s&oacute; &eacute; vis&iacute;vel 
pelo OpenBSD e SO's que podem ler diretamente o sistema de arquivos do OpenBSD.
d743 1
a743 1
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
d755 1
a755 1
O disco raiz (root) &eacute; de onde o sistema &eacute; carregado, e onde 
d764 1
a764 1
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
d778 8
a785 4
uma parti&ccedil;&atilde;o para "manuten&ccedil;&atilde;o" ou "que Suspenda 
para o Disco", que deve ser mantida intacta.
Se o seu sistema possui uma parti&ccedil;&atilde;o que n&atilde;o pode ser 
apagada, n&atilde;o escolha "yes" na pergunta acima.
d788 2
a789 2
Para este exemplo, n&oacute;s assuminos que o disco ser&aacute; dividido entre o
OpenBSD e uma parti&ccedil;&atilde;o pr&eacute;-existente do Windows 2000, 
d798 4
a801 4
Usu&aacute;rios com um disco r&iacute;gido grande (maior que 8G em um i386 novo, 
embora em m&aacute;quinas antigas e plataformas diferentes, frequentemente 
muito menor) querer&atilde;o ver
<a href="../faq14.html#LargeDrive">esta se&ccedil;&atilde;o</a> antes de continuar.
d804 1
a804 1
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
d821 1
a821 1
  fdisk: 1> <b>help</b>
d837 1
a837 1
  fdisk: 1> 
d841 2
a842 1
Alguns comandos dignos de aten&ccedil;&atilde;o:
d871 1
a871 1
arquivos FAT ).  Olhando as informa&ccedil;&atilde;oes acima, podemos ver que 
d873 4
a876 5
r&iacute;gido.
Ent&atilde;o, vamos alocar o resto do disco ao OpenBSD, iniciando no cilindro 
203.  Voc&ecirc; poderia calcular o in&iacute;cio do setor do OpenBSD que 
&eacute; 3069360 apenas adicionando o in&iacute;cio do setor existente (63) 
com o seu tamanho (3069297).
d879 2
a880 2
Voc&ecirc; pode editar o layout do disco em Cylinder/Heads/Sectors
ou em setores puros. Qual &eacute; a mais f&aacute;cil depende do que 
d885 1
a885 1
setores puros ser&aacute; melhor.
d888 1
a888 1
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
d902 1
a902 1
  fdisk:*1> <b>p</b>
d912 1
a912 1
  fdisk:*1> <b>p m</b>
d922 1
a922 1
  fdisk:*1> 
d927 2
a928 1
&Eacute; importante que a primeira parti&ccedil;&atilde;o salte a primeira 
d936 2
a937 1
ficar&aacute; muito dif&iacute;cil, e esta configura&ccedil;&atilde;o n&atilde;o &eacute; <i>recomendada ou suportada</i>.
d941 4
a944 4
com um asterisco ('<tt>*</tt>').  Como n&oacute;s podemos ver com a sa&iacute;da 
de <tt>p&nbsp;m</tt> n&oacute;s n&atilde;o alteramos a parti&ccedil;&atilde;o 
do Windos, e conseguimos alocar o resto do disco para o OpenBSD com sucesso, e 
as parti&ccedil;&otilde;es n&atilde;o se sobreporam.
d949 1
a949 1
inicializa&ccedil;&atilde;o:
d952 1
a952 1
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
d955 1
a955 1
  fdisk:*1> <b>p</b>
d965 1
a965 1
  fdisk:*1>
d972 1
a972 1
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
d976 1
a976 1
  fdisk: 1> <b>q</b>
d986 1
a986 1
OpenBSD.  Mais detalhes de uso do disklabel(8) podem ser encontradas 
d990 1
a990 1
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
d1019 1
a1019 1
  > <b>?</b>
d1044 1
a1044 1
          '%' for percent of total disk size, '&' for percent of free space.
d1047 1
a1047 1
  > 
d1053 1
a1053 1
<li><b><tt>p</tt></b> - Exibe a subparti&ccedil;&atilde;o corrente na tela, 
d1063 1
a1063 1
cusar confus&atilde;o.
a1071 1

d1078 1
a1078 1
para aplica&ccedil;&atilde;o.  N&atilde;o h&aacute; nenhuma resposta universal.  
d1080 1
a1080 1
veja <a href="#SpaceNeeded">esta discuss&atilde;o</a>.
d1087 1
a1087 1
de megabytes n&atilde;o utilizados a alguns kilobytes sobrando. 
d1109 1
a1109 1
<li><i><b>wd0g: /usr</b></i> - 2G.  N&oacute;s queremos esta 
d1114 2
a1115 2
  <a href="../../ports.html">&Aacute;rvore de Ports</a> estar&aacute; aqui 
  tamb&eacute;m, o qual necessitar&aacute; de 100M de espa&ccedil;o antes dos 
d1117 4
a1120 3
  Se voc&ecirc; esta planejando contruir muitas aplica&ccedil;&otilde;es a 
  partir do c&oacute;digo fonte usando o <a href="../faq8.html#Ports">ports</a> 
  em vez dos <a href="../faq8.html#Packages">pacotes</a> pr&eacute;-compilados, 
d1127 1
a1127 1
voc&ecirc; ver&aacute; que ainda sobram 10G de espa&ccedil;o n&atilde;o 
d1132 2
a1133 2
subparti&ccedil;&atilde;o para ela, mudar o <i>/etc/fstab</i> e o problema 
esta resolvido.
d1136 1
a1136 1
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
d1156 2
a1157 2
  > <b>d a</b>
  > <b>a a</b>
d1159 1
a1159 1
  size: [36030960] <b>150M</b>
d1163 1
a1163 1
  > <b>a b</b>
d1165 1
a1165 1
  size: [35723520] <b>300M</b>
d1168 1
a1168 1
  > <b>a d</b>
d1174 1
a1174 1
  > <b>a e</b>
d1180 1
a1180 1
  > <b>a g</b>
d1182 2
a1183 2
  size: [34698384] <b>2g</b>
  Rounding to nearest cylinder: 4194288
d1186 3
a1188 3
  > <b>a h</b>
  offset: [8596224] <b><i>Enter</i></b>
  size: [30504096] <b>4g</b>
d1192 1
a1192 1
  > <b>p m</b>
d1213 2
a1214 2
    g:       2048.0M       2149.4M  4.2BSD   2048 16384   16 # /usr
    h:       4096.0M       4197.4M  4.2BSD   2048 16384   16 # /home
d1216 1
a1216 1
  > <b>q</b>
d1231 1
a1232 1
<p>
d1235 2
a1236 2
a velocidade do disco n&atilde;o &eacute; utilizado em nenhum lugar pelo sistema.
N&atilde;o se preocupe com isso.
d1247 6
a1252 8
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  The root filesystem will be mounted on wd0a.
  wd0b will be used for swap space.
  Mount point for wd0d (size=122976k), none or done? [/tmp] <b><i>Enter</i></b>
  Mount point for wd0e (size=82152k), none or done? [/var] <b><i>Enter</i></b>
  Mount point for wd0g (size=2097144k), none or done? [/usr] <b><i>Enter</i></b>
  Mount point for wd0h (size=4194288k), none or done? [/home] <b><i>Enter</i></b>
  Mount point for wd0d (size=122976k), none or done? [/tmp] <b>done</b>
d1270 2
a1271 2
  /dev/rwd0g:     4194288 sectors in 4161 cylinders of 16 tracks, 63 sectors
          2048.0MB in 13 cyl groups (328 c/g, 161.44MB/g, 20608 i/g)
d1274 10
a1283 11
  /dev/wd0a on /mnt type ffs (rw, asynchronous, local, ctime=Mon May  9 22:47:18 2
  005)
  /dev/wd0h on /mnt/home type ffs (rw, asynchronous, local, nodev, nosuid, ctime=M
  on May  9 22:47:18 2005)
  /dev/wd0d on /mnt/tmp type ffs (rw, asynchronous, local, nodev, nosuid, ctime=Mo
  n May  9 22:47:18 2005)
  /dev/wd0g on /mnt/usr type ffs (rw, asynchronous, local, nodev, ctime=Mon May  9
   22:47:18 2005)
  /dev/wd0e on /mnt/var type ffs (rw, asynchronous, local, nodev, nosuid, ctime=Mo
  n May  9 22:47:18 2005)

d1334 2
a1335 2
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Enter system hostname (short form, e.g. 'foo'): <b>puffy</b>
d1346 1
a1346 1
esta um caminho completo atrav&eacute;s da se&ccedil;&atilde;o de 
d1348 3
d1353 1
a1353 1
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
d1355 4
a1358 4
  Available interfaces are: fxp0.
  Which one do you wish to initialize? (or 'done') [fxp0] <b><i>Enter</i></b>
  Symbolic (host) name for fxp0? [puffy] <b><i>Enter</i></b>
  The default media for fxp0 is
d1361 1
a1361 1
  IP address for fxp0? (or 'dhcp') <b>199.185.137.55</b>
d1363 1
a1363 22
  Done - no available interfaces found.
  DNS domain name? (e.g. 'bar.com') [my.domain] <b>example.com</b>
  DNS nameserver? (IP address or 'none') [none] <b>199.185.137.1</b>
  Use the nameserver now? [yes] <b><i>Enter</i></b>
  Default route? (IP address, 'dhcp' or 'none') <b>199.185.137.128</b>
  add net default: gateway 199.185.137.128
  Edit hosts with ed? [no] <b><i>Enter</i></b> 
  Do you want to do any manual network configuration? [no] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
No exemplo acima, n&oacute;s estamos usando IP est&aacute;tico. Como indicado, 
voc&ecirc; pode usar "<tt>dhcp</tt>" na maioria das plataformas (menos
<a href="../../alpha.html">Alpha</a>), assumindo que o seu ambiente o suporte.
No caso de DHCP, as informa&ccedil;&otilde;es ser&atilde;o pegas do servidor 
DHCP remoto; voc&ecirc; ter&aacute; uma chance de confirm&aacute;-la.
Este &eacute; um exemplo de configura&ccedil;&atilde;o da rede no procedimento 
de instala&ccedil;&atilde;o, desta vez feita com DHCP:

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Configure the network? [yes] <b><i>Enter</i></b>
d1367 4
a1370 4
  The default media for fxp0 is
          media: Ethernet autoselect (100baseTX full-duplex)
  Do you want to change the default media? [no] <b><i>Enter</i></b>
  IP address for fxp0? (or 'dhcp') <b>dhcp</b>
a1371 1
  Sending on   Socket/fallback/fallback-net
d1373 1
a1373 1
  DHCPOFFER from 199.185.137.128
d1375 6
a1380 7
  DHCPACK from 199.185.137.128 
  New Network Number: 199.185.137.0
  New Broadcast Address: 199.185.137.255
  bound to 199.185.137.55 -- renewal in 43200 seconds.
  Done - no available interfaces found.
  DNS domain name? (e.g. 'bar.com') [example.org] <b><i>Enter</i></b>
  DNS nameserver? (IP address or 'none') [199.185.137.1] <b><i>Enter</i></b>
d1382 1
a1382 1
  Default route? (IP address, 'dhcp' or 'none') [199.185.137.128] <b><i>Enter</i></b>
d1386 1
d1388 5
a1392 5
<b>NOTE: </b>Somente <b>uma</b> interface pode ser configurada facilmente 
utilizando DHCP durante a instala&ccedil;&atilde;o. Se voc&ecirc; tentar 
configurar mais de uma interface usando DHCP voc&ecirc; encontrar&aacute; 
erros. Voc&ecirc; deve configurar manualmente interfaces adicionais 
ap&oacute;s a intal&ccedil;&atilde;o.
d1395 1
a1395 1
Agora, n&oacute;s vamos configurar a senha do usu&aacute;rio root:
d1397 1
a1397 1
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
d1405 2
a1406 1
<pre>
a1418 5
Ent&atilde;o os sistemas de arquivos que voc&ecirc; criou ser&atilde;o montados
e a senha do root ser&aacute; habilitada. Isto permitir&aacute; que os seus 
discos locais estejam prontos para receber o conjunto de arquivos do OpenBSD
para serem instalados.

d1425 3
a1427 9
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  You will now specify the location and names of the install sets you want to
  load. You will be able to repeat this step until all of your sets have been
  successfully loaded. If you are not sure what sets to install, refer to the
  installation notes for details on the contents of each.
 
  Sets can be located on a (m)ounted filesystem; a (c)drom, (d)isk or (t)ape
  device; or a (f)tp, (n)fs or (h)ttp server.
  Where are the install sets? <b>c</b>
d1429 1
a1429 1
</pre></td></tr></table>
d1436 1
a1436 1
a instala&ccedil;&atilde;o do OpenBSD. 
d1439 4
a1442 7
<b>NOTA: </b>Todas as poss&iacute;veis fontes de instala&ccedil;&atilde;o 
ser&atilde;o listadas, mas nem todas podem estar dispon&iacute;veis para o seu 
sistema. por exemplo, "<tt>(n)fs</tt>" &eacute; mostrada mas n&atilde;o esta 
dispon&iacute;vel para todas as arquiteturas. Se voc&ecirc; escolheu uma fonte 
que n&atilde;o esta dispon&iacute;vel, voc&ecirc; receber&aacute;
uma mensagem de erro e ter&aacute; a chance de escolher de novo outra fonte de 
instala&ccedil;&atilde;o.
d1445 1
a1445 1
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
d1448 2
a1449 2
  Pathname to the sets?  (or 'done') [3.7/i386] <b><i>Enter</i></b>
</pre></td></tr></table>
d1453 2
a1454 2
os arquivos de instala&ccedil;&atilde;o, que &eacute; <tt>3.7/i386/</tt> 
no CD-ROM oficial.  
d1468 1
a1468 1
<tt>base37.tgz</tt>, <tt>etc37.tgz</tt> e <tt>bsd</tt>.
d1473 4
a1476 4
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  The following sets are available. Enter a filename, 'all' to select
  all the sets, or 'done'. You may de-select a set by prepending a '-'
  to its name.
d1481 12
a1492 17
          [X] base37.tgz
          [X] etc37.tgz
          [X] misc37.tgz
          [X] comp37.tgz
          [X] man37.tgz
          [X] game37.tgz
          [ ] xbase37.tgz
          [ ] xetc37.tgz
          [ ] xshare37.tgz
          [ ] xfont37.tgz
          [ ] xserv37.tgz

  File Name? (or 'done') [bsd.mp] <b>all</b>

  The following sets are available. Enter a filename, 'all' to select
  all the sets, or 'done'. You may de-select a set by prepending a '-'
  to its name.
d1497 11
a1507 11
          [X] base37.tgz
          [X] etc37.tgz
          [X] misc37.tgz
          [X] comp37.tgz
          [X] man37.tgz
          [X] game37.tgz
          [X] xbase37.tgz
          [X] xetc37.tgz
          [X] xshare37.tgz
          [X] xfont37.tgz
          [X] xserv37.tgz
d1528 3
a1530 2
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  File Name? (or 'done') [done] <b><i>Enter</i></b>
d1533 1
a1533 1
  100% |**************************************************|  5030 KB    00:08
d1535 1
a1535 1
  100% |**************************************************|  4478 KB    00:02
d1537 24
a1560 27
  100% |**************************************************|  5072 KB    00:03
  Getting base37.tgz ...
  100% |**************************************************| 34337 KB    00:24
  Getting etc37.tgz ...
  100% |**************************************************|  1636 KB    00:01
  Getting misc37.tgz ...
  100% |**************************************************|  2222 KB    00:01
  Getting comp37.tgz ...
  100% |**************************************************| 21606 KB    00:17
  Getting man37.tgz ...
  100% |**************************************************|  7199 KB    00:05
  Getting game37.tgz ...
  100% |**************************************************|  2539 KB    00:01
  Getting xbase37.tgz ...
  100% |**************************************************| 10526 KB    00:08
  Getting xetc37.tgz ...
  100% |**************************************************| 96303       00:00
  Getting xshare37.tgz ...
  100% |**************************************************|  1981 KB    00:02
  Getting xfont37.tgz ...
  100% |**************************************************| 32412 KB    00:23
  Getting xserv37.tgz ...
  100% |**************************************************| 18322 KB    00:14

  Sets can be located on a (m)ounted filesystem; a (c)drom, (d)isk or (t)ape
  device; or a (f)tp, (n)fs or (h)ttp server.
  Where are the install sets? (or 'done') [done] <b><i>Enter</i></b>
d1582 1
a1582 1
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
d1587 5
a1597 6
No entanto, se a sua rede n&atilde;o esta corretamente configurada, isto pode 
causar um significante atraso na inicializa&ccedil;&atilde;o do seu sistema, 
voc&ecirc; deve reativ&aacute;-lo mais tarde,
alterando o <a href="../faq10.html#rc">script de incializa&ccedil;&atilde;o</a>.
Entretando, como n&oacute;s configuramos a nossa rede corretamente no 
in&iacute;cio, vamos execut&aacute;-lo.
d1600 1
a1600 1
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
d1605 3
a1607 5
Agora lhe &eacute; perguntado se deseja rodar o X neste sistema.  Se voc&ecirc;
responder 'Y', o <tt>/etc/sysctl.conf</tt> ser&aacute; modifcado para incluir 
as linhas <tt>machdep.allowaperture=1</tt> ou <tt>machdep.allowaperture=2</tt>,
dependendo da sua plataforma.
Algumas plataformas n&atilde;o far&atilde;o esta pergunta.
d1610 15
a1624 2
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Do you expect to run the X Window System? [yes] <b>y</b>
d1628 4
a1631 5
Em seguida, voc&ecirc; ser&aacute; questionado se deseja usar um  
<a href="../faq7.html#SerCons">console serial</a> neste computador,
ao inv&eacute;s de um teclado ou monitor padr&atilde;o.
Se voc&ecirc; escolher "<tt>yes</tt>" e responder a mais algumas perguntas 
simples, o
d1633 5
a1637 3
e 
<tt><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ttys&amp;sektion=5">/etc/ttys</a></tt> ser&atilde;o editados apropriadamente para voc&ecirc;.
A maioria dos usu&aacute;rios escolhe o padr&atilde;o, <b><tt>no</tt></b> aqui.
d1640 1
a1640 1
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
d1653 1
a1653 1
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
d1657 11
a1667 11
  Africa/      Chile/       GB-Eire      Israel       NZ-CHAT      Turkey
  America/     Cuba         GMT          Jamaica      Navajo       UCT
  Antarctica/  EET          GMT+0        Japan        PRC          US/
  Arctic/      EST          GMT-0        Kwajalein    PST8PDT      UTC
  Asia/        EST5EDT      GMT0         Libya        Pacific/     Universal
  Atlantic/    Egypt        Greenwich    MET          Poland       W-SU
  Australia/   Eire         HST          MST          Portugal     WET
  Brazil/      Etc/         Hongkong     MST7MDT      ROC          Zulu
  CET          Europe/      Iceland      Mexico/      ROK          posix/
  CST6CDT      Factory      Indian/      Mideast/     Singapore    posixrules
  Canada/      GB           Iran         NZ           SystemV/     right/
d1677 2
a1678 1
Se voc&ecirc; necessita de tempo preciso, querer&aacute; ler
d1685 1
a1685 1
instalar o setor de inicializa&ccedil;&atilde;o (boot blocks). 
d1688 1
a1688 1
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
d1697 1
a1697 1
  fs block shift 2; part offset 3069360; inode block 152, offset 4136
d1712 3
a1714 2
O OpenBSD est&aacute; agora instalado e pronto para a sua primeira 
inicializa&ccedil;&atilde;o, mas antes que voc&ecirc;...
d1718 1
a1718 1
<h4>Antes que voc&ecirc; reinicie</h4>
d1721 1
a1721 1
melhor voc&ecirc; checar a <a href="../../pt/errata.html">
d1728 1
a1728 1
<pre>
d1737 1
a1737 1
<h4>Depois que voc&ecirc; reiniciou</h4>
d1749 1
a1749 1
<li><a href="../faq2.html#ManPages">P&aacute;ginas de manuais de comandos populares/usados</a>
d1751 2
a1752 3
<li><a href="../../ports.html">Sistema de Ports e Pacotes do OpenBSD para 
instala&ccedil;&atilde;o de software</a>, podem 
ser encontradas <a href="../faq8.html#Ports">aqui</a> e <a href="../faq8.html#Packages">aqui</a>
d1761 2
a1762 3
<a name= "FilesNeeded"></a>
<h2>4.6 - Quais arquivos s&atilde;o necess&aacute;rios para a 
instala&ccedil;&atilde;o?</h2>
d1772 6
a1777 5
  <li><b><i>bsd</i></b>          - Este &eacute; o kernel. <b>Necess&aacute;rio</b>
  <li><b><i>bsd.mp</i></b> - Kernel Multi-processor (SMP) (somenete para algumas 
  	 plataformas)
  <li><b><i>bsd.rd</i></b> - <a href="#bsd.rd">RAM disk kernel</a>
  <li><b><i>base37.tgz</i></b>   - Cont&eacute;m o sistema base do OpenBSD 
d1779 1
a1779 1
  <li><b><i>etc37.tgz</i></b>    - Cont&eacute;m todos os arquivos de /etc 
d1781 1
a1781 1
  <li><b><i>comp37.tgz</i></b>    - Cont&eacute;m o compilador e suas 
d1783 1
a1783 1
  <li><b><i>man37.tgz</i></b>    - Cont&eacute;m as p&aacute;ginas de manuais 
d1785 1
a1785 1
  <li><b><i>misc37.tgz</i></b>   - Cont&eacute;m informa&ccedil;&otilde;es 
d1787 9
a1795 8
  <li><b><i>game37.tgz</i></b>   - Cont&eacute;m jogos para o OpenBSD
  <li><b><i>xbase37.tgz</i></b>  - Cont&eacute;m a base para instalar o X11
  <li><b><i>xetc37.tgz</i></b>   - Cont&eacute;m os arquivos de 
  	 configur&ccedil;&atilde;o /etc/X11 e /etc/fonts
  <li><b><i>xfont37.tgz</i></b>  - Cont&eacute;m a fonte do servidor X11 e fontes
  <li><b><i>xserv37.tgz</i></b>  - Cont&eacute;m o servidor X11
  <li><b><i>xshare37.tgz</i></b> - Cont&eacute;m p&aacute;ginas de manuais, 
     configura&ccedil;&otilde;es locais, includes, etc. para X
d1798 4
a1801 4
O arquivo <b>etc37.tgz</b> e <b>xetc37.tgz</b> n&atilde;o s&atilde;o instalados 
como parte de uma atualiza&ccedil;&atilde;o, somente como parte de uma 
instala&ccedil;&atilde;o completa, assim nenhuma customiza&ccedil;&atilde;o que 
voc&ecirc; fizer ser&aacute; perdida.
d1806 10
a1815 3
<a name= "SpaceNeeded"></a>
<h2> 4.7 - De quanto espa&ccedil;o eu preciso para uma instala&ccedil;&atilde;o 
do OpenBSD?</h2>
d1825 2
a1826 2
(root)             100MB
/usr               250MB (sem X) ou 400MB (com X)
d1845 1
d1847 2
a1848 2
fa&ccedil;a o seu <tt>/usr</tt> grande!  triplique estes valores 
<b>Pelo menos</b>!
d1851 1
a1851 1
voc&ecirc; ir&aacute; fazer o  seu <tt>/var</tt> uma parti&ccedil;&atilde;o 
d1857 5
a1861 4
<li>Se voc&ecirc; planeja recompilar seu kernel a partir do c&oacute;digo fonte, 
voc&ecirc; ir&aacute; fazer o seu <tt>/usr</tt> uma parti&ccedil;&atilde;o 
grande, <b>pelo menos</b> 2G como indicado acima.
<li>Compilar alguns <a href="../faq8.html#Ports">ports</a> a partir do 
d1865 1
a1865 1
pr&eacute;-compilados.
d1868 1
a1868 1
uma bom tamanho para o /tmp depende do que voc&ecirc; faz com ela.
d1870 2
a1871 1
aplica&ccedil;&otilde;es requerem 100M ou mais de espa&ccedil;o em <tt>/tmp</tt>.
d1873 14
a1886 17
<li>A parti&ccedil;&atilde;o 'b' do seu primeiro disco se torna automaticamente 
a sua parti&ccedil;&atilde;o swap -- n&oacute;s recomendamos um valor 
m&iacute;nimo de 32MB mas se voc&ecirc; possui um bom espa&ccedil;o em disco 
fa&ccedil;a de 64MB pelo menos.  Se voc&ecirc; possui um disco realmente grande, 
fa&ccedil;a esta parti&ccedil;&atilde;o com 256MB ou 512MB.
Entretanto, se voc&ecirc; esta usando um disp&oacute;sitivo flash para o disco, 
voc&ecirc; provavelmente n&atilde;o vai querer utilizar uma 
parti&ccedil;&atilde;o swap.
Muitas pessoas seguem uma regra que diz que a sua parti&ccedil;&atilde;o swap 
deve ser duas vezes o tamanho da sua mem&oacute;ria RAM.
Esta regra &eacute; absurda.
Em sistemas modernos, a mem&oacute;ria principal (RAM) j&aacute; &eacute; 
suficiente, muitos usu&aacute;rios preferem que seus sistemas n&atilde;o 
fa&ccedil;am swap.
Use o que for melhor para as suas necessidades.
<li>Swap e <tt>/var</tt> s&atilde;o usados para armazenar core dumps do 
sistema em um evento de 
d1888 2
a1889 3
Se isto for importante para voc&ecirc;, sua parti&ccedil;&atilde;o swap deve 
ter um tamanho um pouco maior que a sua mem&oacute;ria principal.
Em uma reinicializa&ccedil;&atilde;o, o 
d1891 8
a1898 7
tentar&aacute; salvar o conte&uacute;do da swap no arquivo
<tt>/var/crash</tt>, se esta for uma prioridade para voc&ecirc;, sua 
parti&ccedil;&atilde;o <tt>/var</tt> deve ter bastante 
<i>espa&ccedil;o livre</i> para armazenar estes arquivos de dump.
Seja realista -- poucos desenvolvedores ir&atilde;o olhar o seu arquivo de 
dump de 1GB, ent&atilde;o se voc&ecirc; n&atilde;o esta planejando investigar 
este problema localmente, isso realmente &eacute; desnecess&aacute;rio.
d1902 2
a1903 2
H&aacute; diversas raz&otilde;es para usar sistemas de arquivos separados, em vez
de colocar tudo em uma ou duas parti&ccedil;&otilde;es:
d1921 1
a1921 1
<li><b>Tamanhos</b>: Muitas m&aacute;quinas possuem limites de &aacute;reas 
d1924 1
a1924 1
  limite muito maior (por exemplo,  2G, 8G, ou 128G em sistemas i386).
d1931 2
a1932 2
  voc&ecirc; soubesse que sua plataforma (e m&aacute;quina particular!) pode 
  manipular mais (ou menos!) do que isso.
d1941 3
a1943 3
   estar&aacute; sacrificando algumas caracter&iacute;sticas de seguran&ccedil;a 
   do OpenBSD que requer sistemas de arquivos separados para <tt>/, /tmp, /var, 
   /usr</tt> e <tt>/home</tt>.
d1949 14
a1962 14
 <li>Uma parti&ccedil;&atilde;o <tt>/home</tt> pode ser muito &uacute;til.  Nova 
   vers&atilde;o do Sistema Operacional? Limpe e reinstale tudo, deixando a sua 
   parti&ccedil;&atilde;o <tt>/home</tt> intocada. Lembre-se de salvar uma 
   c&oacute;pia dos seus arquivos de configura&ccedil;&atilde;o!
 <li>Uma parti&ccedil;&atilde;o separada para qualquer coisa que acumule grandes 
   quantidades de arquivos que podem necessitar ser removidos, pode ser mais 
   r&aacute;pido formatar e recriar do que somente apagar os arquivos.  Veja o
   FAQ <a href="../faq5.html#ProbObjPt">Contruindo a partir do fonte</a> para 
   um exemplo (<tt>/usr/obj</tt>).
 <li>Se voc&ecirc; deseja construir o seu sistema a partir da fonte por qualquer 
   raz&atilde;o, o c&oacute;digo fonte se encontra em <tt>/usr/src</tt>.  Se 
   voc&ecirc; n&atilde;o deseja criar uma parti&ccedil;&atilde;o separada para 
   <tt>/usr/src</tt>, tenha certeza que <tt>/usr</tt> ter&aacute; espa&ccedil;o 
   suficiente.
d1970 2
a1971 2
   <a href="../faq10.html#DupFS">duplicar</a> a parti&ccedil;&atilde;o existente 
   para a nova parti&ccedil;&atilde;o, mudar o
d1976 10
a1985 3
   do tamanho m&iacute;nimo requerido, provavelmente voc&ecirc; lamentar&aacute; 
   isso mais tarde, quando for a hora de fazer a atualiza&ccedil;&atilde;o do 
   seu sistema.
d1996 2
a1997 2
<a name= "Multibooting"></a>
<h2>4.8 - Multibooting com OpenBSD/i386</h2>
d1999 3
a2001 2
Multibooting &eacute; ter diversos sistemas operacionais em um s&oacute; 
computador, e meios de selecionar qual OS voc&ecirc; ir&aacute; inicializar.
d2019 3
a2021 2
for a do SO que voc&ecirc; deseja carregar no pr&oacute;ximo boot.  Virtualmente 
todos os SO's oferecem um programa para fazer isso; o do OpenBSD &eacute; o 
d2040 2
a2041 2
<pre>
     boot hd0a:/bsd
d2050 1
a2050 1
disquete do drive, ent&atilde;o reinicie.  
d2070 1
a2070 1
<pre>
d2074 5
d2083 1
a2083 1
<pre>
d2101 1
a2101 1
exemplo,
d2108 3
a2110 13
<!-- XXXVersion: issue "expires" after last 3.4 systems are upgraded. -->
O processo de instala&ccedil;&atilde;o e atualiza&ccedil;&atilde;o do OpenBSD 
instala ou reinstala respectivamente o 
<a href="../faq14.html#Boot386">boot loader</a>, que tem sua 
localiza&ccedil;&atilde;o em PBR, ent&atilde;o se voc&ecirc; reinstalar ou 
atualizar o OpenBSD, voc&ecirc; deve repetir o processo acima para 
buscar uma nova c&oacute;pia do PBR do OpenBSD.

<p>
Nota: O boot loader do Windows NT/2000/XP s&oacute; &eacute; capaz de dar boot  
de outros SO's a partir do primeiro disco r&iacute;gico.
Voc&ecirc; n&atilde;o pode us&aacute;-lo para carregar o OpenBSD do segundo 
disco r&iacute;gido do seu sistema.
d2116 2
a2117 1
Alguns bootloaders que os usu&aacute;rios do OpenBSD usam com sucesso s&atilde;o 
d2129 1
a2129 1
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/3.7/i386/INSTALL.linux">INSTALL.linux</a>,
d2132 2
a2133 3
<a name= "SendDmesg"></a>
<h2>4.9 - Enviando o seu dmesg para dmesg@@openbsd.org depois da 
instala&ccedil;&atilde;o</h2>
d2141 2
a2142 1
<pre>
d2147 8
a2154 10
&eacute; dessa forma que n&oacute;s poderemos ver que tipo de
configura&ccedil;&otilde;es as pessoas est&atilde;o usando. Como foi mostrado,
incluir informa&ccedil;&otilde;es sobre sua m&aacute;quina no assunto ou
no corpo do email pode nos ajudar.  N&oacute;s vamos usar essas
informa&ccedil;&otilde;es para melhorar o suporte dos drivers de
dispositivos em futuros releases.  (Por favor fa&ccedil;a isso usando o kernel
GENERIC, e n&atilde;o um kernel personalizado).  As informações dos 
drivers de dispositivos que n&oacute;s obtermos nos ajudar&aacute; a corrigir os 
drivers já existentes. Obrigado!
</pre>
d2159 2
a2160 1
tiverem algo que queiram testar ou mudar a fim de tonar-lhe funcional no OpenBSD.
d2163 1
a2163 1
e-mail, basta
d2168 2
a2169 2
e ent&atilde;o repassar a mensagem para
<pre>
d2172 1
a2172 3
aonde <tt>your-account@@yourmail.dom</tt> &eacute; a sua conta de e-mail regular.
(ou transferir a sa&iacute;da do dmesg usando 
FTP/scp/floppydisk/carrier-pigeon/...)
d2175 4
a2178 1
<strong>NOTA</strong> - Por favor s&oacute; mande dmesg do kernel GENERIC. 
d2181 10
d2193 26
a2218 7
Note tamb&eacute;m que a m&aacute;quina que recebe o e-mail usa um sistema de 
rejei&ccedil;&atilde;o de spam 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd</a>.
Isto faz com que o seu dmesg n&atilde;o seja aceito pelo servidor de e-mail por 
um per&iacute;odo de tempo.
Tenha paci&ecirc;ncia, ap&oacute;s meia hora ou uma hora, ser&aacute; entregue 
completamente.
d2221 1
a2221 2
<h2>4.10 - Adicionando um conjunto de arquivos ap&oacute;s a 
instala&ccedil;&atilde;o</h2>
d2223 1
a2223 1
"Oh n&atilde;o!  Eu esqueci de adicionar um conjunto de arquivos durante a 
d2227 1
a2227 1
<tt>comp37.tgz</tt> (ou algum outro componente do sistema)
d2246 1
a2246 1
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
d2248 1
a2248 1
  # tar xzvpf comp37.tgz
d2258 2
a2259 1
funciona.  pkg_add(1) &eacute; para instala&ccedil;&atilde;o de pacotes,
a2262 1

a2287 1

d2292 1
a2292 1
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
d2297 1
a2297 1
  &gt;&gt; OpenBSD/i386 BOOT 2.02
d2308 1
a2308 3
plataforma.  
<p>
<br>
d2320 2
a2321 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot.conf&amp;sektion=8&amp;arch=i386"><tt>/etc/boot.conf</tt></a>, ou entrando com o seguinte comando 
depois de "<tt>boot></tt>" antes que o OpenBSD seja carregado.  Se voc&ecirc; 
d2325 2
a2326 2
<pre>
     machine mem +0x3000000@@0x1000000
d2355 2
a2356 2
<li><b>nenhum boot loader v&aacute;lido foi colocado no disco.</b>
Se voc&ecirc; respondeu  "Y" para a quest&atilde;o "Use entire disk for 
d2366 3
a2368 2
<pre>
    # fdisk -u wd0
d2374 1
a2374 1
<li><b>Em algumas raras ocasi&otilde;es, algo pode dar errado com o segundo 
d2382 1
a2382 2
<h3>4.12.3 - Minha (velha, lenta) m&aacute;quina inicia, mas n&atilde;o passa 
do ssh-keygen</h3>
d2387 2
a2388 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-keygen&amp;sektion=1">ssh-keygen(1)</a>, algumas m&aacute;quinas levar&atilde;o algum tempo para fazer 
d2392 8
d2405 2
a2406 2
<a href="../faq5.html#Flavors">snapshot</a> durante o est&aacute;gio <i>-beta</i>
de desenvolvimento do OpenBSD, voc&ecirc; pode ver isto:
d2408 1
a2408 1
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
d2420 1
a2420 1
<a href="faq1.html#Next">data de libera&ccedil;&atilde;o</a>, ent&atilde;o 
d2424 1
a2424 1
Simplesmente use uma <a href="../../pt/ftp.html">lista de espelhos FTP</a> 
d2430 1
a2430 26
<i>-release</i> ou de um CD-ROM.</b>

<a name="krb4"></a>
<h3>4.12.5 - Quando eu fa&ccedil;o login, Eu recebo a mensagem 
"login_krb4-or-pwd: Exec format error"</h3>
O Kerberos IV foi removido do OpenBSD 3.4, mas se voc&ecirc; fizer um upgrade,
os bin&aacute;rios antigos do Kerberos IV ainda estar&atilde;o em seu sistema.
Isto &eacute; um problema em plataformas i386, os arquivos antigos do Kerberos 
est&atilde;o em formato
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=a.out&amp;sektion=5">a.out</a>,
e n&atilde;o podem executar no formato ELF padr&atilde;o do kernel (que tem 
a emula&ccedil;&atilde;o a.out desabilitada, como mensionado
<a href="faq1.html#WhatsNew">aqui</a>).
Se voc&ecirc; encontrar este problema, voc&ecirc; necessita cancelar o 
m&eacute;todo de autentica&ccedil;&atilde;o krb4 quando for executar o login:
<pre>
    OpenBSD/i386 (puffy.openbsd.org) (ttyC0)

    login: joeuser:passwd
    password:
</pre>
Voc&ecirc; pode usar a mesma sintaxe de "<tt><i>username</i>:passwd</tt>" com 
uma conex&atilde;o ssh e com
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=su&amp;sektion=1">su(1)</a>
para acessar o seu sistema.
Agora edite <tt>/etc/login.conf</tt>, e remova as prefer&ecirc;ncias krb4.
d2433 1
a2433 2
<h3>4.12.6 - Minha tabela de parti&ccedil;&otilde;es do fdisk esta corrompida 
ou vazia!</h3>
d2438 2
a2439 4
utilizando o 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>, com um offset de tamanho 0 (zero setores), 
ao inv&eacute;s de <a href="#trackoffset">um offset com uma trilha </a> 
d2464 1
a2464 1
vers&atilde;o (por exemplo 37).  O arquivo <tt>siteXX.tgz</tt> &eacute;, como 
d2466 1
a2466 1
<a href="#FilesNeeded">conjunto de arquivos</a>, comprimido com
d2480 8
a2487 1
Alguns exemplos do uso do arquivo <tt>siteXX.tgz</tt> :
d2489 1
a2489 1
<li>Crie um arquivo siteXX.tgz que contenha todas as mudan&ccedil;as 
d2503 4
a2506 9
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&amp;sektion=8"
><tt>/etc/skel</tt></a> ,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5"
><tt>/etc/pf.conf</tt></a>, 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8"
><tt>/var/www/conf/httpd.conf</tt></a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf.local&amp;sektion=8"
><tt>/etc/rc.conf.local</tt></a>,
etc. 
d2509 1
a2509 1
<h3>Scripts<tt> install.site</tt>/<tt>upgrade.site</tt></h3>
d2512 4
a2515 3
diret&oacute;rio raiz do sistema rec&eacute;m-instalado por <tt>install.site</tt>
ou <tt>upgrade.site</tt>, o mais apropriado para o processo atual, e executa 
este script num ambiente <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&amp;sektion=8">chroot</a>ed 
d2537 1
a2537 1
<li> Remover/atualizar/instalar <a href="../faq8.html#Packages">pacotes</a> 
d2542 2
d2552 7
d2568 2
a2569 2
Na maioria das plataformas, a m&iacute;dia de inicializa&ccedil;&atilde;o inclui 
o programa 
d2575 1
a2575 1
<a href="../../pt/orders.html">CD</a>, ou
d2582 2
a2583 1
<a href="../faq14.html#InstBoot">blocos de boot (boot blocks)</a>. Mais detalhes 
d2599 1
d2608 1
a2608 2
<h2>4.15 - Como eu obtenho o dmesg(8) para reportar um problema de 
instala&ccedil;&atilde;o?</h2>
d2614 2
a2615 2
voc&ecirc; n&atilde;o possui o disco, a rede, ou outro recurso necess&aacute;rio 
que voc&ecirc; possa pegar o dmesg e enviar a
d2625 1
a2625 1
<pre>
d2627 1
a2627 1
     dmesg >/mnt/dmesg.txt
d2640 3
a2642 4
o boot.
Em um segundo computador, voc&ecirc; necessita de um cabo serial apropriado
(como um cabo null-modem), e um programa emulador de terminal para capturar 
a sa&iacute;da da tela e arquivar.
d2654 1
a2654 1
No prompt do boot loader, entre
d2659 1
a2659 1
boot> <b>set tty com0</b>
d2689 1
a2689 2
cliente 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1">ftp(1)</a>
d2695 4
a2698 49
<a name="bsdrdaout"></a>
<h2>4.16 - Atualiza&ccedil;&atilde;o/reisntala&ccedil;&atilde;o do OpenBSD/i386 
usando <tt>bsd.rd-a.out</tt></h2>

Geralmente &eacute; poss&iacute;vel fazer uma atualiza&ccedil;&atilde;o e 
instala&ccedil;&atilde;o usando o kernel <a href="../faq4.html#bsd.rd">bsd.rd</a>.
No entanto, com o OpenBSD 3.4, a plataforma i386 mudou o formato do 
execut&aacute;vel de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=a.out&amp;sektion=5"
>a.out</a> para
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=elf&amp;sektion=5"
>ELF</a>,
assim alguns
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386"
>boot
loaders</a> (OpenBSD 3.3 e anteriores) n&atilde;o podem executar o novo formato 
do kernel <tt>bsd.rd</tt>.

<p>
Para resolver este problema, e para permitir que atualiza&ccedil;&otilde;es 
possam ser realizadas usando o kernel <tt>bsd.rd</tt>,
uma vers&atilde;o a.out do <tt>bsd.rd</tt> foi disponibilizado como parte da
<a href="../../pt/ftp.html">distribui&ccedil;&atilde;o FTP do OpenBSD/i386 v3.5</a>.
Esse arquivo, <tt>bsd.rd-a.out</tt>,
pode ser carregado a partir do OpenBSD 3.3 e anteriores,
mas esse &eacute; um kernel genu&iacute;no do OpenBSD 3.5, incluindo o novo 
boot loader em formato ELF, assim podendo ser usado para inicializar o 
OpenBSD/i386 3.5 a partir de vers&otilde;es anteriores.

<p>
Simplesmente fa&ccedil;a o download do <tt>bsd.rd-a.out</tt> e coloque-o no 
diret&oacute;rio raiz da sua m&aacute;quina.
Execute o processo de boot com o mesmo, em vez de chamar o kernel normal 
<tt>bsd</tt> ou <tt>bsd.rd</tt>, como mostrado
<a href="faq4.html#bsd.rd">aqui</a>. (Especificando <tt>bsd.rd-a.out</tt> como
seu kernel, &eacute; claro).

<p>
Depois da instala&ccedil;&atilde;o m&iacute;nima do 3.5 
(<tt>base35.tgz, etc35.tgz, bsd</tt>), fa&ccedil;a o download do 3.7 
(ou <i>-snapshot</i>) <tt>bsd.rd</tt>
e instale-o a partir deste.

<p>

<font color= "#0000e0">
<a href= "index.html">[&Iacute;ndice do FAQ]</a>
<a href= "../faq3.html">[Para a Se&ccedil;&atilde;o 3 - Obtendo o OpenBSD]</a>
<a href= "../faq5.html">[Para a Se&ccedil;&atilde;o 5 - Construindo o Sistema a partir da fonte]</a>
d2703 3
a2705 2
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt= "[back]"></a> 
<a href= "mailto:www@@openbsd.org">www@@openbsd.org</a>
d2709 2
a2710 2
Originally [OpenBSD: faq4.html,v 1.207 ]<br>
$Translation: faq4.html,v 1.8 2005/08/16 19:07:29 dsantos Exp $<br>
d2713 1
@


1.4
log
@
Sync with badlands CVS.
@
text
@d1 2727
a2727 390
<html>
<head>
<title>4.0 - Guia de Instala&ccedil;&atilde;o</title>
<link rev="made" href="mailto:www@@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq">
<meta name="distribution"  content="global">
<meta name="copyright"     content="This document copyright 1998-1999 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238E">

<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif">
<p>
<h2><font color=#e00000>4.0 - Guia de Instala&ccedil;&atilde;o</font><hr></h2>
</p>

<p>
<ul><h3>&Iacute;ndice</h3>
<li><a href="faq4.html#4.1">4.1 - Rápida Introdu&ccedil;&atilde;o nos
    Procedimentos de Instala&ccedil;&atilde;o do OpenBSD.</a>
<li><a href="faq4.html#4.2">4.2 - Quais arquivos s&atilde;o
    necess&aacute;rios para a Instala&ccedil;&atilde;o?  </a></li>
<li><a href="faq4.html#4.3">4.3 - Quanto espa&ccedil;o eu preciso para
    uma Instala&ccedil;&atilde;o do OpenBSD?</a></li>
<li><a href="faq4.html#4.4">4.4 - Boot M&uacute;ltiplo</a></li>
<li><a href="faq4.html#4.5">4.5 - Enviando seu <i>dmesg</i> para
    dmesg@@openbsd.org ap&oacute;s a instala&ccedil;&atilde;o</a></li>
<li>Minha
    instala&ccedil;&atilde;o, para, no MAKEDEV em meu sistema i386 com
    8meg de RAM
</ul>
</p>
<hr>

<p>
<a name="4.1"></a>
<h2>4.1 - R&aacute;pida Introdu&ccedil;&atilde;o nos Procedimentos de
Instala&ccedil;&atilde;o do OpenBSD</h2>
</p>

<p>
O OpenBSD oferece diversas maneiras para instalar uma vers&atilde;o
recente em m&uacute;ltiplas arquiteturas. Isso dar&aacute; a todo
mundo, na maioria da situa&ccedil;&otilde;es, a chance de instalar o
OpenBSD. As diversas maneiras de como instalar um sistema OpenBSD
s&atilde;o as seguintes:
</p>

<ul>
<li><strong>CD-ROM</strong> - Para isto voc&ecirc; precisar&aacute; ter
    comprado um CD do OpenBSD. Voc&ecirc; pode fazer isso indo em
    <a href="../../orders.html">http://www.openbsd.org/orders.html</a>.
    Este provavelmente &eacute; o modo mais f&aacute;cil de instalar o
    OpenBSD.
<li><strong>FTP</strong> - Esta op&ccedil;&atilde;o requer voc&ecirc;
    conhe&ccedil;a seu <i>IP</i>, <i>Netmask</i>, <i>Gateway</i>, etc.
    Tendo conhecimento disso, h&aacute; uma lista enorme de espelhos de
    ftp ao redor do mundo que faz este um modo veloz de adquirir o
    OpenBSD.
<li><strong>DHCP</strong> - Esta op&ccedil;&atilde;o &eacute; igual ao
    <strong>FTP</strong> exceto que seu <i>IP</i>, <i>Netmask</i>,
    <i>Gateway</i> e <i>Nameservers</i> s&atilde;o retirados do
    servidor DHCP.
<li><strong>Local Filesystem</strong> - Esta op&ccedil;&atilde;o lhe
    permite instalar arquivos de um <i>filesystem</i> preexistente.
    Suporte para DOS, EXT2FS e FFS s&atilde;o inclu&iacute;dos no disco
    de instala&ccedil;&atilde;o.
<li><strong>NFS</strong> - Esta lhe permite instalar os arquivos
    localizados no servidor <i>nfs</i>. Leia
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_nfs&sektion=8&format=html">mount_nfs(8)</a>
    para mais informa&ccedil;&otilde;es.
</ul>

<p>
Todos estes m&eacute;todos de instala&ccedil;&atilde;o estão
dispon&iacute;veis em UM disquete. Estes discos podem ser carregados
diretamente de qualquer um dos espelhos de ftp. ( Voc&ecirc; pode pegar
uma lista dos espelhos em
<a href="../../ftp.html">http://www.openbsd.org/ftp.html</a>. )
Cada arquitetura tem seu pr&oacute;prio disco, assim tenha certeza que
voc&ecirc; adquiriu o disco correto para sua arquitetura. Uma lista de
arquiteturas suportadas pode ser encontrada em
<a href="../faq1.html#1.2">FAQ 1</a>.
</p>

<p>
Aqui est&aacute;, o guia detalhado de passos do processo de
instala&ccedil;&atilde;o para arquiteturas <i>i386</i> e <i>sparc</i>.
N&atilde;o esque&ccedil;a de olhar em
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/2.7/i386/INSTALL.i386">INSTALL.i386</a>
e <a href="ftp://ftp.openbsd.org/pub/OpenBSD/2.7/sparc/INSTALL.sparc">INSTALL.sparc</a> tamb&eacute;m documentados.

<ul>
<li>install-i386.html para
    arquiteturas <strong>i386</strong>.
<li>install-sparc.html para
    arquiteturas <strong>sparc</strong>.
</ul>
Para pessoas que usam outras arquiteturas &eacute; desej&aacute;vel que
olhem em INSTALL.<i>arch</i>, documento que vem na
distribui&ccedil;&atilde;o do OpenBSD para sua arquitetura, como
tamb&eacute;m os
<a href="../log26.txt">passos de instala&ccedil;&atilde;o gen&eacute;rica.</a>

<h3>Notas para arquitetura <i>Alpha</i></h3>
<p>
Sua <i>alpha</i> tem que usar <i>SRM firmware</i>, ao inv&eacute;s de
</i>ARC</i>. Na arquitetura <i>alpha</i> voc&ecirc; pode instalar pelo
<i>boot</i> do segundo CD.
Voc&ecirc; pode fazer isso usando o comando
<ul>
<strong>boot -fi 2.6/alpha/bsd.rd dkaX</strong>
</ul>
Use <strong>show device</strong> para encontrar o identificador do seu
dispositivo de CDROM. Se voc&ecirc; est&aacute; impossibilitado de dar
<i>boot</i> pelo CD, voc&ecirc; ainda pode usar o disquete de
<i>boot</i> <i>CD2:2.6/alpha/floppy26.fs</i>, e grave usando os modos
detalhados acima para a arquitetura <i>i386</i>. E novamente siga o
<a href="../log26.txt">guia de instala&ccedil;&atilde;o</a>.
</p>

<p>
<a name="4.2"></a>
<h2>4.2 - Quais arquivos s&atilde;o necess&aacute;rios para a
Instala&ccedil;&atilde;o?</h2>
</p>

<p>
H&aacute; muitos pacotes que cont&ecirc;m os bin&aacute;rios do
OpenBSD, mas qual deles voc&ecirc; precisa para ter seu sistema
funcionando? Aqui est&aacute; uma r&aacute;pida avalia&ccedil;&atilde;o
de cada pacote.
</p>

<p>
<ul>
    <li><strong>base26.tar.gz</strong>   - Tem o sistema b&aacute;sico do OpenBSD <b>Requerido</b></li>
    <li><strong>etc26.tar.gz</strong>    - Tem todos os arquivos do <i>/etc</i> <b>Requerido</b></li>
    <li><strong>comp26.tar.gz</strong>   - Tem o compilador, suas ferramentas e bibliotecas. <b>Recomendado</b></li>
    <li><strong>man26.tar.gz</strong>    - P&aacute;ginas do Manual <b>Recomendado</b></li>
    <li><strong>misc26.tar.gz</strong>   - Informa&ccedil;&otilde;es diversas e documentos de configura&ccedil;&atilde;o</li>
    <li><strong>game26.tar.gz</strong>   - Tem os jogos para o OpenBSD</li>
    <li><strong>xbase26.tar.gz</strong>  - Tem a instala&ccedil;&atilde;o base para o <i>X11</i></li>
    <li><strong>xfont26.tar.gz</strong>  - Fontes do <i>X11</i> e servidor de fontes</li>
    <li><strong>xlink26.tar.gz</strong>  - Tem o grupo de liga&ccedil;&atilde;o de servidores <i>X</i></li>
    <li><strong>xserv26.tar.gz</strong>  - Tem os servidores <i>X</i> para o <i>X11</i></li>
    <li><strong>xshare26.tar.gz</strong> - Tem os manuais, configura&ccedil;&otilde;es locais, <i>includes</i>, etc  para o <i>X</i></li>
    <li><strong>bsd</strong>             - Este &eacute; o N&uacute;cleo (Kernel). <b>Requerido</b></li>
</ul>
</p>

<p>
<a name="4.3"></a>
<h2> 4.3 - Quanto espa&ccedil;o eu preciso para uma
Instala&ccedil;&atilde;o do OpenBSD?</h2>
</p>

<p>
Sugerimos usar os seguintes tamanhos, do sub diret&oacute;rio, para uma
instala&ccedil;&atilde;o completa.  Os n&uacute;meros incluem bastante
espa&ccedil;o extra para lhe permitir rodar um sistema simples em casa
que &eacute; conectado a internet.

<ul>
<li>Para um sistema multiusu&aacute;rio, voc&ecirc; provavelmente
    ir&aacute; triplicar estes valores.
<li>Se voc&ecirc; planeja instalar uma quantia significante de
    <i>software</i> de terceiros, fa&ccedil;a sua
    parti&ccedil;&atilde;o <i>/usr</i> grande! <strong>Pelo
    menos</strong> triplique estes valores!
<li>Para um sistema que manipula muitos emails ou p&aacute;ginas web
    (armazenados, respectivamente, em <i>/var/mail</i> e
    <i>/var/www</i>) voc&ecirc; ter&aacute; que fazer sua
    parti&ccedil;&atilde;o <i>/var</i> significativamente maior.
<li>Para um sistema multiusu&aacute;rio que pode gerar muitos
    <i>logs</i>, voc&ecirc; ainda ter&aacute; que fazer sua
    parti&ccedil;&atilde;o <i>/var</i>  significativamente maior
    (/var/log).
</ul>
Tenha em mente que <i>/usr</i> e <i>/usr/X11R6</i> s&atilde;o
normalmente ambas partes do mesmo <i>filesystem</i>, isto &eacute;,
<i>/usr</i>, e n&atilde;o &eacute; uma grande vantagem os fazer em
<i>filesystems</i> separados.
<ul>
<strong>
<pre>
SISTEMA         /       /usr    /var    /usr/X11R6
alpha           56M     540M    27M     161M
amiga           45M     399M    24M      36M
hp300           31M     234M    24M      47M
i386            35M     229M    24M      72M
mac68k          29M     232M    24M      36M
mvme68k         29M     232M    24M       -  (sem servidor X)
pmax            50M     355M    24M      60M
sparc           40M     259M    24M      49M
</pre>
</strong>
</ul>

<p>
Quando voc&ecirc; estiver no editor <i>disklabel</i>, voc&ecirc; pode
escolher fazer seu sistema inteiro tendo somente 'a' um
(<i>filesystem</i> principal) e 'b' (<i>swap</i>) .  O
<i>filesystem</i> 'a' o qual voc&ecirc; montou no <i>disklabel</i> se
tornar&aacute; sua parti&ccedil;&atilde;o <i>raiz</i>, que poderia ser
a soma de todos os 3 valores principais acima (<i>/</i>, <i>/usr</i>, e
<i>/var</i>) mais algum espa&ccedil;o para <i>/tmp</i>.
A parti&ccedil;&atilde;o 'b' ser&aacute; automaticamente configurada
como sua parti&ccedil;&atilde;o <i>swap</i> -- n&oacute;s recomendamos
um m&iacute;nimo de 32MB mas se voc&ecirc; tem espa&ccedil;o no disco
sobrando fa&ccedil;a isso com pelo menos 64MB.  Se voc&ecirc; tem muito
espa&ccedil;o no disco sobrando, fa&ccedil;a isso com 256MB, ou
at&eacute; mesmo com 512MB.  

<p>
Existem quatro raz&otilde;es principais para usar <i>filesystems</i>
separados, em vez de amontoar tudo em um ou dois <i>filesystems</i>:
<ul>
<li><b>Seguran&ccedil;a</b>: Voc&ecirc; pode marcar algum
    <i>filesystems</i> como 'nosuid', 'nodev', 'noexec', 'readonly',
    etc..
<li><b>Estabilidade</b>: Um usu&aacute;rio, ou um programa indevido,
    pode ocupar um <i>filesystem</i> com lixo, se eles tem
    permiss&otilde;es de escrita para isto.  Seus programas
    cr&iacute;ticos, que &eacute; claro, rodam em <i>filesystems</i>
    diferentes, n&atilde;o ser&atilde;o interrompidos.
<li><b>Velocidade</b>: Um <i>filesystem</i> que &eacute;
    freq&uuml;entemente escrito pode ser fragmentado um pouco.
    (Afortunadamente, o <i>ffs filesystem</i>, que o OpenBSD usa,
    n&atilde;o &eacute; propenso para fragmenta&ccedil;&atilde;o
    pesada.)
<li><b>Integridade</b>: Se um <i>filesystem</i> foi corrompido
    p&ocirc;r alguma raz&atilde;o ent&atilde;o seus outros
    <i>filesystems</i> ainda estar&atilde;o OK.
</ul>

<p>
<a name="4.4"></a>
<h2>4.4 - Boot M&uacute;ltiplo (i386, alpha)</h2>
</p>

<p>
<strong>OpenBSD & NT</strong>
</p>

<p>
Para <i>boot</i> m&uacute;ltiplo com OpenBSD e NT, voc&ecirc; pode usar
<i>NTloader</i>, o carregador de <i>boot</i> que o NT usa. Para
<i>boot</i> m&uacute;ltiplo com NT,  voc&ecirc; precisa de uma
c&oacute;pia de seu OpenBSD pbr. Depois de rodar <i>installboot</i>,
voc&ecirc; pode copiar assim:
</p>

<ul>
<pre>
	# <strong>dd if=/dev/rsd0c of=openbsd.pbr bs=512 count=1</strong>
</pre>
</ul>

<p>
Agora de <i>boot</i> no NT e coloque o openbsd.pbr em c:. Adicione uma
linha assim no final do c:\boot.ini: 
</p>

<ul>
<pre>
	c:\openbsd.pbr=&quot;OpenBSD&quot;
</pre>
</ul>

<p>
Quando der <i>reboot</i>, voc&ecirc; poder&aacute; selecionar o OpenBSD
no menu carregador do NT. H&aacute; muito mais informa&ccedil;&atilde;o
dispon&iacute;vel sobre o <i>NTloader</i> no
<a href="http://www.dorsai.org/~dcl/publications/NTLDR_Hacking/">
<i>NTLDR Hacking Guide</i>. </a>
</p>

<p>
<strong>OpenBSD &amp; Windows ou DOS (i386)</strong>
</p>

<p>
Para dar <i>boot</i> no OpenBSD junto com Windows 3.1, Windows95, ou
DOS voc&ecirc; tem que usar um carregador de <i>boot</i>   no sistema
que pode manipular OpenBSD, Windows, e DOS! Alguns carregadores de
<i>boot</i> a escolha s&atilde;o
<a href="http://www.freebird.org/sw-map/bootmanager.html">
osbs20b8.zip</a> ou
<a href="http://www.users.intercom.com/~ranish/part/">O Administrador
de Parti&ccedil;&atilde;o Ranish</a>.  Ambos podem dar <i>boot</i> em
parti&ccedil;&otilde;es do OpenBSD.
</p>

<p>
<strong>OpenBSD &amp; Linux (i386)</strong>
</p>


<p>
P&ocirc;r favor refira-se a
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/2.8/i386/INSTALL.linux">INSTALL.linux</a>, que dar&aacute;
instru&ccedil;&otilde;es de como fazer o OpenBSD trabalhar junto com o
Linux.
</p>

<p>
<a name="4.5"></a>
<h2>4.5 - Enviando seu <i>dmesg</i> para dmesg@@openbsd.org ap&oacute;s
a instala&ccedil;&atilde;o</h2>
</p>

<p>
Apenas recordando, isso &eacute; importante para os desenvolvedores do
OpenBSD para rastear qual o <i>hardware</i> que funciona, e qual o
<i>hardware</i> que n&atilde;o funciona muito bem..
</p>

<p>
Uma cita&ccedil;&atilde;o de /usr/src/etc/root/root.mail
<pre>
Se voc&ecirc;s desejam assegurar que o OpenBSD rode melhor em suas
m&aacute;quinas, p&ocirc;r favor nos fa&ccedil;a um favor (depois de
ter configurado seu sistema de email!) digite
        dmesg | mail dmesg@@openbsd.org
&eacute; dessa forma que n&oacute;s poderemos ver que tipo de
configura&ccedil;&otilde;es as pessoas estão usando. N&oacute;s vamos
usar essas informa&ccedil;&otilde;es para melhorar o suporte dos
dispositivos em futuros lan&ccedil;amentos.  (N&oacute;s
estar&iacute;amos muito mais contentes se esta informa&ccedil;&atilde;o
foi provida do kernel GEN&Eacute;RICO; e n&atilde;o de um kernel
personalizado).  As informa&ccedil;&otilde;es dos dispositivos que
n&oacute;s obtermos nos ajudar&aacute; a corrigir os dispositivos
j&aacute; existentes.
</pre>
Tamb&eacute;m confira na
<a href="../faq14.html#14.7">se&ccedil;&atilde;o 14.7</a>
</p>
<p>
Tenha certeza que voc&ecirc; enviou um email de uma conta que
tamb&eacute;m pode receber email, assim os desenvolvedores podem
contatar voc&ecirc;, se eles tiverem algo que querem que voc&ecirc;
teste ou mude para ter sua configura&ccedil;&acirc;o funcionando.
N&atilde;o &eacute; necess&aacute;rio enviar o email da mesma
m&aacute;quina que est&aacute; rodando o OpenBSD, assim se aquela
m&aacute;quina est&aacute; impossibilitada de receber email, somente
fa&ccedil;a
<pre>
 dmesg | mail sua-conta@@seucorreio.dom
</pre>
e ent&atilde;o mande aquela mensagem para
<pre>
 dmesg@@openbsd.org
</pre>
onde <tt>sua-conta@@seucorreio.dom</tt> &eacute; sua conta de email
normal.  (ou transfira a sa&iacute;da do <i>dmesg</i> usando
ftp/scp/disquete/caixa-postal/...)
</p>

<p>
<strong>NOTA</strong> - P&ocirc;r favor s&oacute; envie <i>dmesg</i> do
<i>kernel</i> GEN&Eacute;RICO. <i>Kernels</i> personalizados que tem os
dispositivos removidos n&atilde;o ser&atilde;o &uacute;teis.
</p>

<p>
<font color="#0000e0">
<a href="index.html">[P&aacute;gina Principal]</a>
<a href="../faq3.html">[Para Se&ccedil;&atilde;o 3.0 - Obtendo o
OpenBSD]</a>
<a href="../faq5.html">[Para Se&ccedil;&atilde;o 5.0 -
Configura&ccedil;&atilde;o do Kernel e do Disco]</a>
</font>
</p>

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../back.gif" border="0" alt="[back]"></a> 
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: faq4.html,v 1.73 2000/09/14 19:19:24 ericj Exp ]<br>
$Translation: faq4.html,v 1.6 2001/03/02 17:39:17 wim Exp $<br>
$OpenBSD$
</small>
</p>
</body>
</html>
@


1.3
log
@
Updated and another one added by Horacio.
@
text
@d30 1
a30 1
<li><a href="../install-i386.html#8meg">Minha
d32 1
a32 1
    8meg de RAM</a>
d96 1
a96 1
<li><a href="../install-i386.html">install-i386.html</a> para
d98 1
a98 1
<li><a href="../install-sparc.html">install-sparc.html</a> para
d301 1
d304 1
a304 1
<a href="../INSTALL.linux">INSTALL.linux</a>, que dar&aacute;
d385 1
a385 1
$Translation: faq4.html,v 1.4 2000/11/10 14:22:30 horacio Exp $<br>
@


1.2
log
@
Link corrected.
@
text
@d369 1
a369 1
<a href="../index.html">[P&aacute;gina Principal]</a>
d379 1
a379 1
<a href="../index.html"><img height="24" width="24" src="../../back.gif" border="0" alt="[back]"></a> 
d384 1
a384 1
$Translation: faq4.html,v 1.3 2000/11/04 17:02:30 horacio Exp $<br>
@


1.1
log
@
Starting of the portugese FAQ.
@
text
@d14 1
a14 1
<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif">
d384 1
a384 1
$Translation: faq4.html,v 1.2 2000/11/04 11:58:17 horacio Exp $<br>
@

