head	1.36;
access;
symbols;
locks; strict;
comment	@# @;


1.36
date	2005.08.13.08.19.34;	author saad;	state dead;
branches;
next	1.35;

1.35
date	2005.01.31.11.02.52;	author saad;	state Exp;
branches;
next	1.34;

1.34
date	2005.01.29.17.01.31;	author jufi;	state Exp;
branches;
next	1.33;

1.33
date	2004.05.09.09.58.22;	author saad;	state Exp;
branches;
next	1.32;

1.32
date	2004.01.04.22.43.22;	author horacio;	state Exp;
branches;
next	1.31;

1.31
date	2003.11.03.16.52.23;	author jufi;	state Exp;
branches;
next	1.30;

1.30
date	2003.07.26.13.08.15;	author jufi;	state Exp;
branches;
next	1.29;

1.29
date	2003.07.04.22.16.13;	author jufi;	state Exp;
branches;
next	1.28;

1.28
date	2003.06.27.21.20.01;	author jufi;	state Exp;
branches;
next	1.27;

1.27
date	2003.06.15.12.36.09;	author jufi;	state Exp;
branches;
next	1.26;

1.26
date	2003.05.10.13.21.29;	author jufi;	state Exp;
branches;
next	1.25;

1.25
date	2003.04.04.14.44.32;	author jufi;	state Exp;
branches;
next	1.24;

1.24
date	2003.04.02.08.57.35;	author jufi;	state Exp;
branches;
next	1.23;

1.23
date	2003.03.26.16.54.59;	author jufi;	state Exp;
branches;
next	1.22;

1.22
date	2003.03.19.19.08.27;	author jufi;	state Exp;
branches;
next	1.21;

1.21
date	2003.02.28.19.46.47;	author jufi;	state Exp;
branches;
next	1.20;

1.20
date	2003.02.25.19.56.58;	author jufi;	state Exp;
branches;
next	1.19;

1.19
date	2003.02.21.17.24.50;	author jufi;	state Exp;
branches;
next	1.18;

1.18
date	2003.02.19.18.12.52;	author jufi;	state Exp;
branches;
next	1.17;

1.17
date	2003.01.15.18.16.57;	author jufi;	state Exp;
branches;
next	1.16;

1.16
date	2003.01.14.11.59.23;	author jufi;	state Exp;
branches;
next	1.15;

1.15
date	2003.01.04.23.29.57;	author jufi;	state Exp;
branches;
next	1.14;

1.14
date	2002.12.14.23.48.43;	author jufi;	state Exp;
branches;
next	1.13;

1.13
date	2002.11.04.12.12.23;	author jufi;	state Exp;
branches;
next	1.12;

1.12
date	2002.09.28.19.31.29;	author jufi;	state Exp;
branches;
next	1.11;

1.11
date	2002.07.13.07.58.28;	author jufi;	state Exp;
branches;
next	1.10;

1.10
date	2002.07.09.10.47.50;	author jufi;	state Exp;
branches;
next	1.9;

1.9
date	2002.07.02.09.13.42;	author jufi;	state Exp;
branches;
next	1.8;

1.8
date	2002.06.20.11.18.24;	author jufi;	state Exp;
branches;
next	1.7;

1.7
date	2002.06.03.20.00.44;	author jufi;	state Exp;
branches;
next	1.6;

1.6
date	2002.05.08.11.02.49;	author jufi;	state Exp;
branches;
next	1.5;

1.5
date	2002.04.28.10.26.23;	author jufi;	state Exp;
branches;
next	1.4;

1.4
date	2002.03.23.10.19.40;	author jufi;	state Exp;
branches;
next	1.3;

1.3
date	2002.01.13.12.01.46;	author jufi;	state Exp;
branches;
next	1.2;

1.2
date	2001.10.21.09.07.11;	author jufi;	state Exp;
branches;
next	1.1;

1.1
date	2001.06.16.17.32.26;	author jufi;	state Exp;
branches;
next	;


desc
@@


1.36
log
@remove unmaintained [ja] translation files. requested by translator.
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>13 - Using IPsec</title>
<link rev= "made" href= "mailto:www@@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=iso-2022-jp">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 2000-2004 by OpenBSD">
</head>

<body bgcolor= "#ffffff" text= "#000000">
<a href="../index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="0">    
</a>
<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ $B$NL\<!(B]</a>
<a href= "faq12.html">[12 $B>O(B - $B9bEY$J%f!<%68~$1(B]</a>
<a href= "faq14.html">[14 $B>O(B - OpenBSD $B$N%O!<%I%G%#%9%/(B]</a>
</font>

<h1><font color="#e00000">13 - IPsec (IP Security Protocol) $B$r;H$&(B</font></h1>
<hr>
 
<p>
$B%a%s%F%J%s%9$,IT==J,$G$7$?$N$G!"$3$N>O$O:o=|$5$l$^$7$?!#(B

<p>
$B$G$-$l$P!">-Mh$OI|3h$5$;$?$$$H;W$$$^$9!#(B
 

<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ $B$NL\<!(B]</a>
<a href= "faq12.html">[12 $B>O(B - $B9bEY$J%f!<%68~$1(B]</a>
<a href= "faq14.html">[14 $B>O(B - OpenBSD $B$N%O!<%I%G%#%9%/(B]</a>
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: faq13.html,v 1.82 ]
<br>
$Translation: faq13.html,v 1.35 2005/01/29 09:23:19 toshi Exp $
<br>
$OpenBSD: faq13.html,v 1.35 2005/01/31 11:02:52 saad Exp $
</small>

</body>
</html>
@


1.35
log
@sync with Steelix CVS
@
text
@d52 1
a52 1
$OpenBSD: faq13.html,v 1.81 2004/01/01 04:13:34 nick Exp $
@


1.34
log
@sync with steelix translation CVS
@
text
@@


1.33
log
@sync with Steelix CVS
@
text
@d15 3
a17 1
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif">
d48 1
a48 1
Originally [OpenBSD: faq13.html,v 1.81 ]
d50 1
a50 1
$Translation: faq13.html,v 1.34 2004/01/03 02:42:02 toshi Exp $
@


1.32
log
@Sync with Steelix CVS
@
text
@@


1.31
log
@sync with steelix translation CVS
@
text
@d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 2000-2003 by OpenBSD">
d46 1
a46 1
Originally [OpenBSD: faq13.html,v 1.80 ]
d48 1
a48 1
$Translation: faq13.html,v 1.33 2003/07/26 02:39:51 toshi Exp $
d50 1
a50 1
$OpenBSD: faq13.html,v 1.80 2003/07/25 19:55:38 nick Exp $
@


1.30
log
@sync with steelix translation CVS
@
text
@@


1.29
log
@sync with steelix translation CVS
@
text
@d27 1
a27 14
<h3>$BL\<!(B</h3>
<ul>
<li><a href="#What"     >13.1 - IPsec $B$H$O2?$G$7$g$&(B ?</a>
<li><a href="#Why"      >13.2 - $B$=$l$O$9$4$$!#$7$+$7!"$J$<(B IPsec $B$r;H$&I,MW$,$"$k$N$G$7$g$&(B ?</a>
<li><a href="#Protocols">13.3 - IPsec $B$NN"$K$"$k%W%m%H%3%k$O(B ?</a>
<li><a href="#Wire"     >13.4 - $B%M%C%H%o!<%/>e$N%Q%1%C%H%U%)!<%^%C%H(B</a>
<li><a href="#Config"   >13.5 - IPsec $B$N@@_Dj(B</a>
<li><a href="#ManKey"   >13.6 - IPsec $B$r<jF080@@_Dj$G;H$&$K$O(B ?</a>
<li><a href="#isakmpd"  >13.7 - isakmpd $B$N%;%C%H%"%C%W$O(B ?</a>
<li><a href="#x509"     >13.8 - isakmpd $B$r(B X.509 $B>ZL@@=q$H;HMQ$9$k$K$O(B ?</a>
<li><a href="#IKEcl"    >13.9 - IKE $B%/%i%$%"%s%H$G(B isakmpd $B$H8_49@@-$,$"$k$N$O(B ?</a>
<li><a href="#Trouble"  >13.10 - IPsec/VPN $B$N%H%i%V%k%7%e!<%F%#%s%0(B</a>
<li><a href="#SeeAlso"  >13.11 - $B4XO"%I%-%e%a%s%F!<%7%g%s(B</a>
</ul>
d30 1
a30 979
<font size="-1">
$B$3$N%I%-%e%a%s%H$N0lIt$O!"0J2<$N%I%-%e%a%s%H$+$i<h$C$F$-$F$$$^$9!#(B
</font>
<ul style="font-size: small">
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&sektion=4&format=html">ipsec(4)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vpn&sektion=8&format=html">vpn(8)</a>
<li><a href="http://www.freebsd.org/~julian/IPSEC_4_Dummies.html">IPsec for Dummies</a> by Julian Elischer
<li><a href="http://www.secureops.com/vpn/vpn.html">ISAKMP Howto</a> by Patrick Ethier
<li><a href="http://hem.passagen.se/hojg/isakmpd/">X.509v3 certificates with isakmpd</a> by J&ouml;rgen Granstam
</ul>

<hr>

<p>
<a name= "What"></a>
<a name= "13.1"></a>
<h2>13.1 - IPsec $B$H$O2?$G$7$g$&(B ?</h2>

<p>
IPsec $B$O!"(BIP $B%W%m%H%3%k%U%!%_%j!<$KBP$9$k3HD%$G$"$j!"(B
$B0E9f%;%-%e%j%F%#%5!<%S%9$rDs6!$9$k$b$N$G$9!#$3$N%5!<%S%9$G!"G'>Z!"(B
$B40A4@@-(B (integrity)$B!"%"%/%;%9@@)8f!"5!L)@@-$,Ds6!$5$l$^$9!#(BIPsec $B$O(B
SSL $B$H;w$?%5!<%S%9$r!"%M%C%H%o!<%/AX$GDs6!$7$F$*$j!"$7$+$b%"%W%j%1!<%7%g%s$K$O(B
$B40A4$KF)2aE*$G!"$7$+$b$:$C$H6/NO$J$b$N$G$9!#F)2aE*$H$O!"(BIPsec $B$r;HMQ$9$k>e$G!"(B
$B%"%W%j%1!<%7%g%s$O(B IPsec $B$N$3$H$r2?$R$H$DCN$i$J$/$FNI$$!"(B
$B$H$$$&$3$H$G$9!#(B
IPsec $B>e$G$O(B<a href="http://www.openbsd.org/cgi-bin/cvsweb/src/etc/protocols?rev=1.13">$B$"$i$f$k(B IP $B%W%m%H%3%k(B</a>$B$r;HMQ2DG=$G$9!#0E9f2=%H%s%M%k(B (VPN) $B$b:n@@.2DG=$G$9$7!"%3%s%T%e!<%?4V$GC1=c$J0E9f2=$r$9$k$3$H$b$G$-$^$9!#(B
$B$?$@@!"%*%W%7%g%s$,<B$K$$$m$$$m$"$k$?$a$K!"(BIPsec $B$O>/$7J#;($+$bCN$l$^$;$s(B ($B$=$l$b(B SSL $B$h$j$:$C$H(B !)$B!#(B

<p>
IPsec $B$r;H$&A0$K!"(B
FAQ <a href="../faq6.html">6 $B>O(B</a>$B$N?d>)J88%$K$O(B
$B$<$RL\$rDL$7$F$*$$$F$/$@@$5$$!#FC$K!"$b$7(B IP $B%"%I%l%9$N9M$(J}$,$o$+$C$F$$$J$$$N$G$7$?$i!"(B
<a href="http://www.3com.com/corpinfo/en_US/technology/tech_paper.jsp?DOC_ID=135">Understanding
IP Addressing</a> ($B$^$?$O!"(B
<a href="http://www.3com.com/other/pdfs/infra/corpinfo/en_US/501302.pdf">$B$3$3(B</a>)
$B$rFC$K?d>)$7$^$9!#(B

<p>
$BO@@M}E*$K$O!"(BIPsec $B$O0J2<$N$I$N$h$&$J7A$G$b5!G=$7$^$9!#(B

<ul>
<li>Host-to-Host
<li>Host-to-Network
<li>Network-to-Network
</ul>

<p>
$B%M%C%H%o!<%/$N4X78$9$k$9$Y$F$N%7%J%j%*$G!";d$?$A$O%k!<%?$rG0F,$KCV$$$F$$$^$9!#(B
$B$D$^$j$O(B Host-to-Router ($B$=$7$F$3$N%k!<%?$O!"$"$k(B<i>Network</i>$B$N(B
$B%H%i%U%#%C%/$r@@)8f$7$F0E9f2=$7$^$9(B)$B!#(B

<p>
$B$3$l$+$i8+$k$h$&$K!"(BIPsec $B$O(B VPN $B@@\B3MQ$K%H%i%U%#%C%/$r%H%s%M%k$9$k$3$H$,$G$-$^$9!#(B
$B$G$b!"$=$N1~MQ$O(B VPN $B$h$j$O$k$+$K9-$$$b$N$G$9!#Cf1{%$%s%?!<%M%C%H808r49EPO?=j$,$"$l$P!"(B
$B%$%s%?!<%M%C%H>e$NA4%^%7%s$O!"$*8_$$$K$d$j<h$j$9$k:]$K(B
$B6/NO$J0E9f$dG'>Z$,;HMQ2DG=$K$J$k$N$G$9(B !

<p>
<a name= "Why"></a>
<a name= "13.2"></a>
<h2>13.2 - $B$=$l$O$9$4$$!#$7$+$7!"$J$<(B IPsec $B$r;H$&I,MW$,$"$k$N$G$7$g$&(B ?</h2>

<p>
$B%$%s%?!<%M%C%H$N%W%m%H%3%k$G$"$k(B IP $B$^$?$O(B IPv4 $B$O!"$=$l<+BN$H$7$F$O!"E>Aw$7$F$$$k%G!<%?$KBP$7$F2?$NJ]8n$bDs6!$7$^$;$s!#(B
$BAw?.85$,!"<+J,$GL>>h$C$F$$$k$H$*$j$NB8:_$+$I$&$+$9$iJ]>Z$7$F$/$l$J$$$N$G$9!#(B
IPsec $B$O$3$l$r2r7h$7$h$&$H$7$^$9!#0J2<$N%5!<%S%9$O$=$l$>$lFHN)$H9M$($i$l$F$$$^$9$,!"(B
IPsec $B$O$=$l$rE}0lE*$J7A$G%5%]!<%H$7$F$$$^$9!#(B

<p>
<h4>$B5!L)@@-(B</h4> $B<u?.<T0J30$N?M$K$O!"$I$N$h$&$J%G!<%?$,DL?.$5$l$?$+$r(B
$BM}2r$7$K$/$$$h$&$K$7$F$*$-$^$9!#$?$H$($P!"%$%s%?!<%M%C%H7PM3$G(B
$B%j%b!<%H$N%^%7%s$K%m%0%$%s$9$k:]$K!"%Q%9%o!<%I$N%;%-%e%j%F%#$r(B
$BJ]>Z$7$^$9!#(B

<p>
<h4>$B40A4@@-(B (Integrity)</h4> $B%G!<%?$,ESCf$G2~cb$5$l$J$$$h$&$K$7$^$9!#(B
$B@@A5a=q%G!<%?$r%*%s%i%$%s$GAw?.$9$k>l9g$K!"(B
$B?tNL$d6b3[$d%"%+%&%s%HHV9f$,@@53N$G!"(B
$BESCf$G2~cb$5$l$?$j$7$F$$$J$$$+$I$&$+$r3NG'$7$?$$$O$:$G$9!#(B

<p>
<h4>Authenticity ($B@@5??@@-!?3N<B@@-(B)</h4> $B%G!<%?$K=pL>$7$F!"$=$l$rAw?.$7$?$N$,K\Ev$K$"$J$?$@@$HB>$N?M$,(B
$B3NG'$G$-$k$h$&$K$7$^$9!#%I%-%e%a%s%H$,2~cb$5$l$F$$$J$$$3$H$,3NG'$G$-$k$N$O!"(B
$BL@@$+$KNI$$$3$H$G$7$g$&!#(B

<p>
<h4>$B:FAwJ]8n(B (Replay protection)</h4> $B$d$j<h$j$O!"2?EY<u?.$5$l$?$+$K4X78$J$$$b$N0J30!"(B
$B%G!<%?%0%i%`$N=hM}$,3N<B$K0l2s$@@$1$7$+9T$o$l$J$$$h$&$K$9$kJ}K!$,I,MW$G$9!#(B
$B$D$^$j!"967b<T$,(B ($B6d9T8}:B$+$i$N0z$-=P$7$N$h$&$J(B) $B%H%i%s%6%/%7%g%s$r5-O?$7!"(B
$B$=$l$r$=$N$^$^:FAw$7$F!"(B($B0z$-=P$7MW5a$N(B) $B?7$7$$%a%C%;!<%8$r<u?.$7$?$H(B
$BAj<j$K;W$o$;$k$h$&$J$3$H$,$G$-$F$7$^$&$h$&$G$O$$$1$^$;$s!#(B
<i>$B7Y9p(B: $BDL>o$N;EMM$K4X$9$k8B$j!"<jF080$N(B IPsec $B$r;HMQ$7$F$$$k>l9g(B
($B$?$H$($P(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsecadm&amp;sektion=8">ipsecadm(8)</a>)</i>
$B$r;HMQ$7$F$$$k>l9g(B) $B$K$O!":FAw$+$i$NJ]8n$O<B9T$5$l$^$;$s(B</i>$B!#(B

<p>
<a name= "Protocols"></a>
<a name= "13.3"></a>
<h2>13.3 - IPsec $B$NN"$K$"$k%W%m%H%3%k$O(B ?</h2>

<p>
IPsec $B$O!"5!L)@@-!"40A4@@-!"(Bauthenticity ($B@@5??@@-(B)$B!":FAwJ]8n$rDs6!$9$k$N$K!"(B
$B?7$7$$%W%m%H%3%k$r(B 2 $B$D;HMQ$7$^$9!#$=$N%W%m%H%3%k$H$O!"G'>Z%X%C%@@(B (AH:
Authentication Header) $B$H0E9f%Z%$%m!<%I(B (ESP: Encapsulating Security Payload) $B$G$9!#(B

<p>
AH $B$OG'>Z$H40A4@@-$H:FAwJ]8n$rDs6!$7$^$9(B ($B$,!"5!L)@@-$ODs6!$7$^$;$s(B)$B!#(B
$BG'>Z5!G=$K$D$$$F$N(B AH $B$H(B ESP $B$H$N<g$J:9$O!"(BAH $B$O%Q%1%C%H$N(B
IP $B%X%C%@@$N0lIt(B ($B$?$H$($P%Q%1%C%H$NAw?.85!&Aw?.@@h%"%I%l%9(B) $B$b(B
$BG'>Z$9$k$N$KBP$7$F!"(BESP $B$O%Q%1%C%H$N%Z%$%m!<%I$N$_$rG'>Z$9$k(B
$B$H$$$&$3$H$G$9!#(B

<p>
ESP $B$OG'>Z!"40A4@@-!":FAwJ]8n!"%G!<%?5!L)@@-$r(B
$BDs6!$7$^$9(B ($B%X%C%@@$KB3$/%Q%1%C%HFb$N$9$Y$F$rJ]8n$7$^$9(B)$B!#(B
$B:FAwJ]8n$K$OG'>Z$H40A4@@-$,I,MW$G$9(B
($B$3$N$U$?$D$OI,$:BP$H$J$k$b$N$G$9(B)$B!#5!L)@@-(B ($B0E9f2=(B) $B$O!"(B
$BG'>Z(B/$B40A4@@-$NM-L5$K4X$o$i$:;HMQ2DG=$G$9!#(B
$BF1MM$K!"G'>Z(B/$B40A4@@-$O5!L)@@-$J$7$G$b;HMQ$G$-$^$9!#(B

<p>$B<B:]$K$O!"$[$H$s$I$N%"%W%j%1!<%7%g%s$KBP$7$F(B ESP $B$N;HMQ$,?d>)$5$l$F$$$^$9!#(B

<p>
<a name= "Wire"></a>
<a name= "13.4"></a>
<h2>13.4 - $B%M%C%H%o!<%/>e$N%Q%1%C%H%U%)!<%^%C%H(B</h2>

<p>
<b>$BG'>Z%X%C%@@(B (Authentication Header)</b>
(AH) $B$O4pK\E*$J(B IP $B%X%C%@@$N8e$K$-$F!"%G!<%?$N0E9f%O%C%7%e$H(B
$B<1JL>pJs$r;}$C$F$$$^$9!#%O%C%7%e$O(B 
IP $B%X%C%@@<+BN$N!"EAAwCf$KCM$,JQ2=$7$J$$ItJ,$b%+%P!<$G$-$^$9!#(B
AH $B$K;H$&<B:]$N%"%k%4%j%:%`$K$D$$$F$O!"$$$/$D$+$N8DJL$N(B RFC $B$,$"$C$FA*Br2DG=$K$J$C$F$$$^$9$,!"(B
$B$=$N$$$:$l$K$D$$$F$b!"(B<a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2402.html">RFC2402</a> $B$K;XDj$5$l$?%,%$%I%i%$%s$K$O=`5r$7$F$$$J$/$F$O$J$i$J$$!#(B

<p>
<b>$B0E9f%Z%$%m!<%I(B (Encapsulating
Security Payload)</b> (ESP) $B%X%C%@@$O!"%Z%$%m!<%I$r0E9f2=$5$l$?7A$G=q$-49$($k$3$H$r2DG=$K$7$^$9!#(B
ESP $B%X%C%@@$O!"$=$l$K@@hN)$D(B IP
$B%X%C%@@$O07$$$^$;$s$N$G!"%Z%$%m!<%I0J30$N$b$N$K$D$$$F$O$^$C$?$/J]>Z$7$^$;$s!#(B
$B$=$l$>$l3F<o$N(B ESP $B$O(B <a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2406.html">RFC2406</a> $B$K=>$&I,MW$,$"$j$^$9!#(B
ESP $B%X%C%@@$O!"%Z%$%m!<%I$NG'>Z$bDs6!$G$-$^$9(B ($B$,!"(BESP $B$N30$N(B
$B%X%C%@@$K$D$$$F$OG'>Z$G$-$^$;$s(B)$B!#(B

<p>
IPsec $B5!G=$ND>8r@@-$N(B ($B$[$H$s$I$N(B) $BItJ,$O!"(BIPsec $B%+%W%;%k2=$r(B
$B<B9T$9$k=*C<$,%G!<%?$N85$NH/?.8;$J$N$+%2!<%H%&%'%$$J$N$+$K(B
$B1~$8$FE,MQ$5$l$^$9!#(B

<ul>
<li><b>Transport</b> $B%b!<%I$O!"%Q%1%C%H$r@@8@@.$7$F$$$k%[%9%H$,;HMQ$9$k$b$N$G$9!#(B
Transport $B%b!<%I$G$O!"%;%-%e%j%F%#%X%C%@@$O%H%i%s%9%]!<%HAX(B 
(e.g . TCP, UDP) $B$N%X%C%@@$NA0$K!"(BIP$B%X%C%@@$,%Q%1%C%H$N@@hF,$KIUM?$5$l$kA0$NCJ3,$GDI2C$5$l$^$9!#(B
$B8@@$$49$($l$P!"%Q%1%C%H$KDI2C$5$l$?(B AH $B$,(B
TCP $B%X%C%@@$H!"(Bend-to-end IP $B%X%C%@@$N0lIt%U%#!<%k%I$N%O%C%7%s%0$rC4Ev$9$k$H$$$&$3$H$J$N$G$9!#(B
$B$=$7$F!"(BTCP $B%X%C%@@$H%G!<%?$N0E9f2=$O(B ESP $B%X%C%@@$,%+%P!<$7$^$9$,!"$7$+$7!"(B
$B$=$l$O(B end-to-end IP $B%X%C%@@$^$G0E9f2=$7$F$/$l$k$o$1$G$O$"$j$^$;$s!#(B

<li><b>$B%H%s%M%k(B</b>$B%b!<%I$O!"$9$G$K(B end-to-end IP $B%X%C%@@$,(B
$B%Q%1%C%H$KDI2C$5$l$F$$$k>l9g$K!"$5$i$K%;%-%e%"@@\B3$NJRJ}$NC<$,(B
$BC1$J$k%2!<%H%&%'%$$N>l9g$K;HMQ$5$l$^$9!#$3$N%b!<%I$G$O!"(BAH $B$H(B ESP $B%X%C%@@$O!"(B end-to-end header $B$r4^$a!"(B
$B%Q%1%C%HA4BN$r%+%P!<$9$k$N$K;HMQ$5$l$^$9!#$=$7$F!"%;%-%e%"@@\B3$N8~$3$&$NC<$^$G$N%[%C%W$N$_(B
($B$?$@@$7!"$3$l$O$b$A$m$sJ#?t$N(B IP $B%[%C%W$r$^$?$,$C$F$$$k$+$bCN$l$^$;$s(B) $B$r%+%P!<$9$k!"(B
$B?7$7$$(B IP $B%X%C%@@$,IU$1D>$5$l$^$9!#(B
</ul>

<p>IPsec $B$GJ]8n$5$l$?%j%s%/$O!"(B<b>Security Associations
</b>(SAs) $B$K$h$C$FDj5A$E$1$i$l$^$9!#3F(B SA $B$OC10l$NC1J}8~$N%G!<%?$NN.$l$K$D$$$FDj5A$5$l$F$*$j!"(B
$BIaDL$O(B ($B%^%k%A%-%c%9%H$OL5;k$7$F(B) $B$R$H$D$NE@@$+$iJL$NE@@$^$G$K$D$$$F!"2?$i$+$N(B
<b>$B%f%K!<%/$J%;%l%/%?(B</b>$B$K$h$C$F<1JL$G$-$k%H%i%U%#%C%/%U%m!<$r;X$7$^$9!#C10l$N(B SA $B>e$rN.$l$k%H%i%U%#%C%/$O(B
$B$9$Y$FF1$807$$$r<u$1$^$9!#%H%i%U%#%C%/$NCf$K$O!"J#?t$N(B SA $B$r7P$k$b$N$b$"$C$F!"(B
$B$=$N$=$l$>$l$,2?$i$+$NJQ49$r2C$($^$9!#$^$?!"(BSA $B$N=8CD$r(B SA <b>Bundle</b> $B$H8F$S$^$9!#(B
$BF~$C$F$/$k%Q%1%C%H$O!"(B3 $B$D$NDj5A%U%#!<%k%I(B (<b>$B08@@h(B IP $B%"%I%l%9!"%;%-%e%j%F%#%Q%i%a!<%?%$%s%G%C%/%9(B
(Security Parameter Index)$B!"%;%-%e%j%F%#%W%m%H%3%k(B</b>) $B$K1~$8$F;XDj$N(B SA $B$K3d$jEv$F$k$3$H$,$G$-$^$9!#(B
$B%;%-%e%j%F%#%Q%i%a!<%?%$%s%G%C%/%9(B (Security Parameter Index$B!"N,$7$F(B SPI) $B$O!"(B
$B@@\B3$N%Q%i%a!<%?$N%M%4%7%(!<%7%g%s$,9T$o$l$k:]$K!"(BSA $B$N<u$1<j$,<jEO$9%/%C%-!<$@@$H;W$($PNI$$$G$7$g$&!#(B
$B$^$?!"%;%-%e%j%F%#%W%m%H%3%k$O!"(BAH $B$+(B ESP $B$N$I$A$i$+$G$J$/$F$O$J$j$^$;$s!#<u$1<j$N(B IP $B%"%I%l%9$,(B
$B$3$N(B 3 $B$D(B 1 $BAH$NCf$K4^$^$l$F$$$^$9$N$G!"$3$l$O%f%K!<%/$JCM$K$J$k$3$H$,J]>Z$5$l$F$$$^$9!#(B
$B$3$l$O30B&$N(B IP $B%X%C%@@$+$i8+$D$1$k$3$H$b$G$-$^$9$7!":G=i$N%;%-%e%j%F%#%X%C%@@(B
($B$3$l$O(B SPI $B$H%;%-%e%j%F%#%W%m%H%3%k$r4^$`(B) $B$+$i8+$D$1$k$3$H$b$G$-$^$9!#(B

<p>
$B0J2<$K%H%s%M%k%b!<%I$N(B AH $B%Q%1%C%H$NNc$r5s$2$^$9!#(B

<p>
<table border="1">
<tr>
<td><b>IP$B%X%C%@@(B</b></td>
<td><b>AH</b></td>
<td>IP$B%X%C%@@(B2</td>
<td>TCP$B%X%C%@@(B</td>
<td>$B%G!<%?(B</td>
</tr>
</table>

<p>
$B$^$?!"(Btransport $B%b!<%I(B AH $B%Q%1%C%H$NNc$r5s$2$^$9!#(B

<p>
<table border="1">
<tr>
<td><b>IP$B%X%C%@@(B</b></td>
<td><b>AH</b></td>
<td>TCP$B%X%C%@@(B</td>
<td>$B%G!<%?(B</td>
</tr>
</table>

<p>
ESP $B%X%C%@@$O30B&$N(B IP $B%X%C%@@$rG'>Z$G$-$^$;$s$N$G!"(B
AH $B$H(B ESP $B%X%C%@@$rAH$_9g$o$;$F0J2<$N$h$&$K$9$Y$-$G$7$g$&!#(B

<p>
<table border="1">
<tr>
<td><b>IP$B%X%C%@@(B</b></td>
<td><b>AH</b></td>
<td><b>ESP</b></td>
<td><i>TCP$B%X%C%@@(B</i></td>
<td><i>$B%G!<%?(B</i></td>
</tr>
</table>

<p>$B$3$l$O(B <b>Transport Adjacency</b> $B$H8F$P$l$k$b$N$G$9!#(B
$B%H%s%M%kHG$N>l9g$K$O!"0J2<$NNc$N$h$&$K$J$j$^$9!#(B

<p>
<table border="1">
<tr>
<td><b>IP$B%X%C%@@(B</b></td>
<td><b>AH</b></td>
<td><b>ESP</b></td>
<td><i>IP$B%X%C%@@(B2</i></td>
<td><i>TCP$B%X%C%@@(B</i></td>
<td><i>$B%G!<%?(B</i></td>
</tr>
</table>

<p>
$B$7$+$7!"$3$l$O(B RFC $B$K$OL@@<(E*$K5-=R$5$l$F$O$$$^$;$s!#(BTransport
adjacency $B$HF1MM$K!"$3$l$O(BIP $B%X%C%@@$NCf$N%X%C%@@$$$/$D$+$r=|$$$FA4%Q%1%C%H$rG'>Z$7$?>e$G!"(B
$B%Z%$%m!<%I(B ($B%$%?%j%C%/$GI=<((B) $B$r0E9f2=$7$^$9!#(B
AH $B$H(B ESP $B%X%C%@@$,$3$N$h$&$KD>@@\F1;~$KE,MQ$5$l$F$$$k>l9g$K$O!"(B
$B%X%C%@@$N=gHV$O>e5-$N$h$&$K$J$C$F$$$kI,MW$,$"$j$^$9!#%H%s%M%k%b!<%I$G$O!"(B
$BG$0U$N:F5"E*$J%+%W%;%k2=$r9T$&$3$H$G!"$3$N=gHV$,;XDj$5$l$J$$$h$&$K$9$k$3$H$b2DG=$G$9!#(B

<p>
<a name= "Config"></a>
<a name="13.5"></a>
<h2>13.5 - IPsec $B$N@@_Dj(B</h2>

<p>
IPsec $B%7%9%F%`$H%2!<%H%&%'%$$,$I$N$h$&$K@@_Dj$5$l$k$+$O!"$"$kDxEY$O@@_7W<T$KG$$5$l$F(B
$B$$$k$3$H$G$O$"$j$^$9$,!"(BRFC $B$K$O$=$l$,$I$N$h$&$K<BAu$5$l$k$Y$-$+$K$D$$$F$N6/$$?d>)$,$"$j!"(B
$B:.Mp$r:G>.8B$KM^$($h$&$H$7$F$$$^$9!#(B

<p>
$B%Q%1%C%H$K2?$,5/$3$k$+$r%3%s%H%m!<%k$9$k$?$a$N4IM}%(%s%F%#%F%#$,(B 2 $B$D$"$^$9!#(B
$B$R$H$D$O(B <b>Security Association Database</b> (SAD$B!"(B
OpenBSD $B$N(B IPsec $B%=!<%9%3!<%I$NCf$G$O!"(BTDB $B$^$?$O(B TDB table $B$H8F$P$l$k$b$N$G$9(B) $B$G!"(B
$B$b$&0l$D$O(B<b>Security Policy Database</b> (SPD) $B$G$9!#(B

<p>
$B$3$N$U$?$D$O!"$"$k%H%i%U%#%C%/$rI=8=$7$?%;%l%/%?$r$$$/$D$+M?$($i$l$k$H!"(B
$BI,MW$H$J$k=hM}$r5-=R$7$?%(%s%H%j$rDs6!$7$F$/$l$k$H$$$&E@@$G;w$F$$$^$9!#(B
$B$7$+$7!"(BSPD $B$O<B:]$N=hM}$+$i$OFsCJ3,$[$I1s$$$H$3$m$K$"$j$^$9!#(B
SPD $B$O30$X=P$k%Q%1%C%H$K;HMQ$5$l$F!"$I$N(B SAD $B%(%s%H%j$r;HMQ$9$Y$-$+7hDj$9$k$N$KMxMQ$5$l$^$9!#(B
$B5U$K(B SAD $B%(%s%H%j$O!"<B:]$N%W%m%;%9$H$=$3$G;HMQ$5$l$k%Q%i%a!<%?$r5-=R$7$^$9!#(B
SPD $B$N%(%s%H%j$O!"4{B8$N(B SAD $B%(%s%H%j$N$&$A$N$I$l$r;HMQ$9$k$N$+(B
($B%P%s%I%k$J$i!"(BSAD $B%(%s%H%j$OJ#?t$"$jF@@$^$9$N$G(B) $B$r;XDj$7$^$9$,!"$7$+$7!"4{$K(B
$BE,@@Z$J$b$N$,$J$$>l9g$K$O!"$=$N%(%s%H%j$r;HMQ$7$F?7$7$$$b$N$,:n@@.$5$l$^$9!#:n@@.$5$l$k(B SA $B$N%U%#!<%k%I$O!"(B
SPD $B%(%s%H%j$+$i;}$C$F$/$k>l9g$b$"$j$^$9$7!"$=$N%U%#!<%k%I?7@@_$r(B
$B3+;O$5$;$?%Q%1%C%H$+$i;}$C$F$/$k>l9g$b$"$j$^$9!#(B

<p>
$B309T$-$N%Q%1%C%H$O!"(BSPD $B%(%s%H%j$+$i8DJL$N(B SA $B$K9T$C$F%(%s%3!<%G%#%s%0MQ(B
$B%Q%i%a!<%?$r<hF@@$7$^$9!#F~$C$F$/$k%Q%1%C%H$O!"(BSPI/$B08@@h(BIP/$B%W%m%H%3%k$N(B 3 $BE@@%;%C%H$r;HMQ$7$F(B
$BD>@@\@@5$7$$(B SA $B$K$?$I$j$D$-!"$=$3$+$i(B SPD $B%(%s%H%j$K$?$I$j$D$-$^$9!#(B

<p>
SPD $B$O$^$?!"$I$N%H%i%U%#%C%/$,(B IPsec $B$r%P%$%Q%9$9$Y$-$+!"$^$?!"$I$N%H%i%U%#%C%/$r(B
$BGK4~$9$Y$-$+$r;XDj$G$-$^$9$N$G!"F~$C$F$/$kHs(B IPsec $B$N%H%i%U%#%C%/$K$D$$$F$b;2>H$5$l$J$/$F$O$J$j$^$;$s!#(B
SPD $B%(%s%H%j$O!"=gHV$,L@@<(E*$K<($5$l$F$$$kI,MW$,$"$j$^$9!#$"$k%Q%1%C%H$KJ#?t$N$b$N$,%^%C%A$9$k2DG=@@-$,$"$j$^$9$7!"(B
$B=hM}$K$O:F8=@@-$,$J$/$F$O$J$i$J$$$+$i$J$N$G$9!#(B

<p>
SPD $B$H$$$&$N$O!"%Q%1%C%H%U%#%k%?$H;w$?$h$&$J$b$N$@@$H;W$($PNI$$$+$bCN$l$^$;$s!#$=$3$G7hDj$5$l$k%"%/%7%g%s$O!"(B
SA $B%W%m%;%9$N5/F0$K$J$k$N$G$9!#%;%l%/%?$H$7$F;HMQ$G$-$k$N$O(B
$BAw?.85$H08@@h%"%I%l%9!"4X78$"$k>l9g$K$O%]!<%HHV9f!"%"%W%j%1!<%7%g%s$d!"$"$k>l9g$K$O%f!<%6(B ID
($B$3$l$O(B host based transport SA $B$N$_(B)$B!"%[%9%HL>!"%;%-%e%j%F%#(B
$B46EY%l%Y%k!"%W%m%H%3%k$J$I$G$9!#(B

<p>
SAD $B%(%s%H%j$K4^$^$l$k$N$O$?$H$($P!"(B

<ul>
<li>$B08@@h(B IP $B%"%I%l%9(B
<li>IPsec $B%W%m%H%3%k(B(AH $B$+(B ESP)
<li>SPI ($B%/%C%-!<(B)
<li>$B%7!<%1%s%9%+%&%s%?(B
<li>Seq O/F $B%U%i%0(B
<li>Anti-replay window info
<li>AH $B$N<oN`$H>pJs(B
<li>ESP $B$N<oN`$H>pJs(B
<li>$B<wL?>pJs(B
<li>Tunnel/transport $B%b!<%I%U%i%0(B
<li>Path MTU $B>pJs(B
</ul>

<p>
SPD $B%(%s%H%j$K4^$^$l$k$N$O!"(B

<ul>
<li>SA$B5/F0%]%$%s%?(B
<li>$B%;%l%/%?%U%#!<%k%I(B
</ul>

<p>
$B3F(B SA $B$O!"(BESP $B%X%C%@@$R$H$D$H(B AH $B%X%C%@@$R$H$D$H$rDj5A$G$-$^$9!#(B
IPsec $B%;%C%7%g%s$O$3$N$I$A$i$+!"$"$k$$$ON>J}$r;}$?$J$1$l$P$J$j$^$;$s!#$I$A$i$N%X%C%@@$b$J$7$GDj5A$5$l$k$3$H$O(B
$B$G$-$1$l$P$J$j$^$;$s!=!=$5$b$J$$$H!"(BSA $B$r;2>H$9$k$?$a$N(B SPI $B$r;XDj$9$k%X%C%@@$,$J$$$3$H$K$J$C$F$7$^$$$^$9!#(B
RFC $B$O!"(BAH $B$H(B ESP $B%X%C%@@$,(B SPI $B$NCM$K$D$$$F(B
$BJL!9$N;XDj$r$7$F$$$k>l9g$N$3$H$ODj5A$7$F$$$^$;$s!#(B
$B$3$l$O%P%s%I%kCf$NJ#?t$N(B SA $B$r0UL#$9$k$b$N$HH=CG$5$l$k$3$H$,9M$($i$l$^$9!#(B

<p>
OpenBSD $B$N(B SPD $B$O!"(B<tt>ipsecadm flow</tt> $B%3%^%s%I$r;HMQ$7$F4IM}$5$l$^$9(B
($B$3$l$KJQ99$r2C$($k$N$O!"<jF080@@_Dj$r;HMQ$9$k>l9g$@@$1$G$9(B)$B!#(B
SAD $B%(%s%H%j$O!"(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsecadm&amp;sektion=8">ipsecadm(8)</a>
$B$r;HMQ$9$l$P%^%K%e%"%k$G@@_Dj$G$-$^$9$,!"(BIETF $B$O%;%C%7%g%s$d(B
$B808r49$N=i4|2=$J$I$N<+F0%a%+%K%:%`$bDj5A$7$F$$$^$9!#(B
OpenBSD $B$O(B ISAKMP $B<+F0808r49(B
(<a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2407.html">RFC2407</a>$B!"(B
<a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2408.html">RFC2408</a> $B$J$i$S$K(B
<a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2409.html">RFC2409</a>)
$B$r<BAu$7$F$$$F!"(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a>
$B%G!<%b%s$G;HMQ$5$l$F$$$^$9!#(B

<p>
a name= "ManKey"></a>
<a name= "13.6"></a>
<h2>13.6 - IPsec $B$r<jF080@@_Dj$G;H$&$K$O(B ?</h2>

<p>
IPsec $B$N<j;O$a$H$7$F:G$b4JC1$J$N$,<jF080@@_Dj$G$9!#(B
$B$3$N<jK!$G%M%C%H%o!<%/4V$r0E9f2=$7$F(B VPN $B$r:n$l$^$9!#(B
$B$3$NItJ,$rFI$s$@@$i!"$3$N@@_Dj$r<+F02=$9$k$N$K(B
<a href="http://www.openbsd.org/cgi-bin/cvsweb/src/share/ipsec/rc.vpn?rev=1.3">/usr/share/ipsec/rc.vpn</a>
$B$r;HMQ$9$k!"$H$$$&$3$H$b<B9T$7$F$_$k$HNI$$$+$bCN$l$^$;$s!#(B

<p>
$B$^$:!"(BOpenBSD $B%+!<%M%k$N(B IP AH $B$H(B IP ESP $B%*%W%7%g%s$,M-8z$K$J$C$F$$$k$3$H$r(B
$B3NG'$7$F$/$@@$5$$!#$3$l$O%G%U%)%k%H$GM-8z2=$5$l$F$$$^$9$,!"0J2<$N$h$&$K$7$F(B
$B$=$l$r3NG'$7$F$*$$$F$/$@@$5$$!#(B

<blockquote><tt>
# <b>sysctl net.inet.esp.enable</b><br>
net.inet.esp.enable = 1<br>
</tt></blockquote>

<p>$BF1MM$K!"$b$7(B AH $B$,I,MW$J$i!"0J2<$N$h$&$K$7$FM-8z2=$5$l$F$$$k$3$H$r3NG'$7$F$/$@@$5$$!#(B
<blockquote><tt>
# <b>sysctl net.inet.ah.enable</b><br>
net.inet.ah.enable = 1
</tt></blockquote>


<p>
$B$b$7!"I,MW$G$7$?$i!"(B
$B$3$l$i$N%W%m%H%3%k$O(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8">sysctl(8)</a>
$B$G(B <i>-w</i> $B%*%W%7%g%s$r;HMQ$7$FM-8z2=$9$k$3$H$,$G$-$k$O$:$G$9!#(B

<p>
$B5/F0;~$K$3$l$rM-8z(B ($B$^$?$OL58z(B) $B$K$9$k$K$O(B <tt>/etc/sysctl.conf</tt> $B$rJT=8$7$^$9!#(B
$B;HMQ$7$?$$$b$N$K1~$8$F!"(Bnet.inet.esp.enable $B$*$h$S(B/$B$^$?$O(B
net.inet.ah.enable $B$NA0$N(B # $B$r30$7!"$=$l$,(B 1 $B$K%;%C%H$5$l$F$$$k(B
$B$3$H$r3N$+$a$F$/$@@$5$$!#(B

<p>
$B$[$H$s$I$N>l9g!"(B<i>rc.vpn</i> $B%9%/%j%W%H$d0J2<$NNc$N$h$&$K!"(B
ESP $B$@@$1$,MW5a$5$l$k$3$H$KCm0U$7$F$/$@@$5$$!#$3$N$h$&$J>l9g!"(B
<i>AH $B$rM-8z$K$9$kI,MW$O$"$j$^$;$s(B</i>$B!#;v:]$K$O;HMQ$7$J$$$N$K!"(BAH
$B$rM-8z$K$9$k$3$H$K4X$7$F!"%;%-%e%j%F%#>e$N7|G0$,$"$k$+$bCN$l$^$;$s!#(B

<p>
$B<!$K!"<jF080$N@@8@@.$bI,MW$K$J$j$^$9!#(B
VPN $B$N%;%-%e%j%F%#$O!"$3$N80$r?dDj$9$k$N$,IT2DG=$H$$$&E@@$K$+$+$C$F$$$^$9$N$G!"(B
$B$3$N80$rA*$V$N$K$O6/NO$JMp?t8;$r;HMQ$9$k$H$$$&$3$H$,BgJQ=EMW$J$N$G$9!#(B
$B$3$l$r@@8@@.$9$k$N$K<BMQ@@-$,9b$$J}K!$N$R$H$D$H$7$F!"(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=random&amp;sektion=4">random(4)</a>
$B%G%P%$%9$r;HMQ$9$kJ}K!$,$"$j$^$9!#$?$H$($P!"(B160 $B%S%C%H(B (20 $B%P%$%H(B) $BJ,$NMp?t@@-$r:n@@.$9$k$K$O!"0J2<$N$h$&$K$7$^$9!#(B

<blockquote><tt>
# <b>openssl rand 20 | hexdump -e '20/1 "%02x"'</b>
</tt></blockquote>

<p>
$B@@8@@.$5$l$k%S%C%H?t$O=EMW$G$9!#0E9f$N<oN`$K$h$C$F!"I,MW$J80$N%5%$%:$O0[$J$j$^$9!#(B

<pre>
$B0E9fJ}<0(B    $B80D9(B
DES       56 bits
3DES      168 bits
BLF       $B2DJQ(B (160 bits $B?d>)(B)
CAST      $B2DJQ(B (40-128 bits $B?d>)(B)
SKIPJACK  80 bits
</pre>

<p>
$B$G$O!"(BSA (Security Associations) $B$N@@_Dj$r$7$^$7$g$&!#(B
Security Association $B$H$O!"(BIP $B%"%I%l%9!"(BSPI$B!"(B
$B%;%-%e%j%F%#%W%m%H%3%k(B (AH $B$*$h$S(B/$B$^$?$O(B ESP) $B$NAH$_9g$o$;$G$9!#(BIP $B%"%I%l%9$O!"$"$J$?<+?H$N$b$N$H!"(B
$BAw?.@@h$N$b$N$H$NN>J}$G$9!#(BSPI (Security Parameter
Index) $B$O3F<o(B SA $B$NJ,N`$K(B OpenBSD $B$,;H$&HV9f$N$3$H$G$9!#(B

<p>
<i>$B$3$l$i$NNc$O!"%H%i%U%#%C%/$N0E9f2=$K(B ESP $B$7$+;HMQ$7$^$;$s!#(BESP $B$O(B
$B0E9f2=$5$l$?Cf?H$N%G!<%?$NG'>Z$O9T$$$^$9$,!"(BAH $B$H$O0[$J$j!"(B
$B$=$l$rJq$`(B IP $B%X%C%@@$^$G$OG'>Z$7$^$;$s!#$3$N!V8B$i$l$?G'>Z!W$G$b!"(B
$B$[$H$s$I$N>l9g$K$O$^$C$?$/==J,$J$b$N$G$7$g$&!#FC$K%H%s%M%k4D6-$G$N(B
ESP $B$N>l9g$K$O$=$&$G$9!#(B</i>

<blockquote><tt>
# <b>ipsecadm new esp -spi SPI_OUT -src MY_EXTERNAL_IP -dst PEER_EXTERNAL_IP
-forcetunnel -enc blf -auth sha1 -key ENC_KEY -authkey AUTH_KEY</b>
</tt></blockquote>

<p>
$B$3$l$r$U$?$D$N%k!<%?(B 192.168.5.1 $B$H(B 192.168.25.9 $B$K<B:]$K@@_Dj$7$F$_$^$7$g$&!#(B

<p>
$B%[%9%H(B 192.168.5.1 $B>e$G$O(B:

<blockquote><tt>
# <b>ipsecadm new esp -spi 1000 -src 192.168.5.1 -dst 192.168.25.9 -forcetunnel -enc blf -auth sha1 -key 7762d8707255d974168cbb1d274f8bed4cbd3364 -authkey 6a20367e21c66e5a40739db293cf2ef2a4e6659f</b><br>
# <b>ipsecadm new esp -spi 1001 -dst 192.168.5.1 -src 192.168.25.9 -forcetunnel -enc blf -auth sha1 -key 7762d8707255d974168cbb1d274f8bed4cbd3364 -authkey 6a20367e21c66e5a40739db293cf2ef2a4e6659f</b>
</tt></blockquote>

<p>
$B%[%9%H(B 192.168.25.9 $B>e$G$O(B:

<blockquote><tt>
# <b>ipsecadm new esp -spi 1001 -src 192.168.25.9 -dst 192.168.5.1 -forcetunnel -enc blf -auth sha1 -key 7762d8707255d974168cbb1d274f8bed4cbd3364 -authkey 6a20367e21c66e5a40739db293cf2ef2a4e6659f</b><br>
# <b>ipsecadm new esp -spi 1000 -dst 192.168.25.9 -src 192.168.5.1 -forcetunnel -enc blf -auth sha1 -key 7762d8707255d974168cbb1d274f8bed4cbd3364 -authkey 6a20367e21c66e5a40739db293cf2ef2a4e6659f</b>
</tt></blockquote>

<p>
SPI $B$,0[$J$C$F$$$k$3$H$KCm0U$7$F$/$@@$5$$!#(BSPI $B$,2?$G$"$j!"$=$l$,$I$3$G;HMQ$5$l$k$N$+$K$D$$$F$N40A4$J@@bL@@$O!"(B<a href="#13.4">On the wire format</a> $B$r;2>H$7$F$/$@@$5$$!#(B

<p>
$B$3$l$G(B Security Associations $B$,:n@@.$5$l$?$N$G!"(B
$B%U%m!<$r@@_Dj$7$^$9!#(B

<p>
$B$^$:$O(B 192.168.5.1 $B$G$9!#(B

<p>
$B$5$F$3$3$G$$$-$J$j!"%U%m!<$,(B<b>$B$U$?$D(B</b>$B:n@@.$5$l$^$9!#$R$H$D$O%m!<%+%k$N%=!<%9%"%I%l%9$G!"(B
$B%m!<%+%k%[%9%H$+$i=P$FL\E*CO$K8~$+$&$9$Y$F$N%Q%1%C%H$r%+%P!<$7!"(B
$B$b$&$R$H$D$N%U%m!<$OAw?.@@h$+$i%m!<%+%k%[%9%H$KLa$C$F$/$k(B
$B%U%m!<$G$9!#(B

<blockquote><tt>
# <b>ipsecadm flow -proto esp -dst 192.168.25.9 -spi 1000 -addr 192.168.5.1 255.255.255.255 192.168.25.9 255.255.255.255</b>
</tt></blockquote>

<p>
$B<!$O(B 192.168.25.9 $BB&$G$9!#(B

<blockquote><tt>
# <b>ipsecadm flow -proto esp -dst 192.168.5.1 -spi 1001 -addr 192.168.25.9 255.255.255.255 192.168.5.1 255.255.255.255</b>
</tt></blockquote>

<p>
$B$b$7!"(BHost-to-Host VPN $B$N%*!<%P!<%X%C%I$r8:$i$7$?$$>l9g$K$O!"(BSPI $B$r:n@@.$9$k$N$K(B
<tt>-forcetunnel</tt> $B$r30$7$F$*$/$H!"(Btransport $B%b!<%I$,;HMQ$G$-$^$9(B (<tt>-forcetunnel</tt>
$B$r;HMQ$9$k$H(B IP $B%X%C%@@$^$G4^$s$@@(B IP $B%Q%1%C%H$N$9$Y$F$,I,$:(B SPI $B$K%+%W%;%k2=(B
$B$5$l$^$9(B)$B!#$b$7!"(B
$BH/?.85$+Aw?.@@h$N$I$A$i$+$,%M%C%H%o!<%/$N>l9g$K$O!"%H%s%M%k%b!<%I$r;HMQ$9$k$7$+$"$j$^$;$s!#(B
$B%M%C%H%o!<%/$+$i=PF~$j$9$k%H%i%U%#%C%/$K(B SA $B$r;HMQ$9$k$H!"<+F0E*$K(B
$B%H%s%M%k%b!<%I$N(B SPI $B$,3N<B$K:n@@.$5$l$k$3$H$K$J$j$^$9!#(B

<p>
$B$3$l$O(B IPsec $B$r;H$$;O$a$k4JC1$JJ}K!$G$9!#(B

<p>
IPsec $B$r;H$($P!"%W%i%$%Y!<%H(B IP $B%"%I%l%96u4V$r%$%s%?!<%M%C%H7PM3$G@@\B32DG=$G$9!#(B
$BNI$$Nc$r5s$2$^$7$g$&!D!D(B  208.1.1.1 $B$NGX8e$K$"$k(B 192.168.99.0/24 $B$H!"(B
208.2.2.2 $B$NGX8e$K$"$k(B 208.1.5.0/24 $B$H(B 208.1.2.0/24 $B$H$r%H%s%M%k$G@@\B3$9$k$H$7$^$9!#(B
$B0J2<$NNc$O(B <a href="http://www.openbsd.org/cgi-bin/cvsweb/src/share/ipsec/rc.vpn?rev=1.3">rc.vpn</a> $B%9%/%j%W%H$r;HMQ$7$F@@8@@.$7$?$b$N$G$9!#(B

<p>
$B$4Mw$N$H$*$j!"(BIPsec $B$r<jF080@@_Dj$G;HMQ$7$F$$$k$H!"(B
$B<B9T$7$FM_$7$$$3$H$r(B<b>$B$9$Y$F@@53N$K(B</b>$B;XDj$7$J$1$l$P$J$j$^$;$s!#(B
$B$"$J$?$N$+$o$j$K8+Ev$r$D$1$F$/$l$?$j$O$7$J$$$N$G$9!#0J2<$NNc$r8+$F$/$@@$5$$!#(B


<h2>208.1.1.1 $B$NB&$G$O(B:</h2>
$B$^$:!"(Bsecurity associations (SA) $B$r@@_Dj$7$^$9!#(B<br>
($B$3$l$G(B SPI$B!"0E9f2=$NJ}K!$H80$,@@_Dj$5$l$^$9(B)$B!#(B

<blockquote><tt>
# <b>ipsecadm new esp -src 208.1.1.1 -dst 208.2.2.2 -forcetunnel -spi 1001 -enc blf -auth sha1 -key 7762d8707255d974168cbb1d274f8bed4cbd3364 -authkey 67e21c66e5a40739db293cf2ef2a4e6659f</b><br>
# <b>ipsecadm new esp -src 208.2.2.2 -dst 208.1.1.1 -forcetunnel -spi 1000 -enc blf -auth sha1 -key 7762d8707255d974168cbb1d274f8bed4cbd3364 -authkey 67e21c66e5a40739db293cf2ef2a4e6659f</b><br>
</tt></blockquote>

<p>
$B<!$K!"(B208.1.1.1 $B$+$i(B 208.2.2.2 $B$X$N%U%m!<$r@@_Dj!'(B

<blockquote><tt>
# <b>ipsecadm flow -proto esp -dst 208.2.2.2 -spi 1001 -addr 208.1.1.1 255.255.255.255 208.2.2.2 255.255.255.255</b><br>
</tt></blockquote>

<p>
$B<!$K(B  208.2.2.2 $B$NGX8e$K$"$k(B 208.1.2.0/24 $B$+$i(B 192.168.99.0/24 $B$X$N%U%m!<$r@@_Dj!'(B

<blockquote><tt>
# <b>ipsecadm flow -proto esp -dst 208.2.2.2 -spi 1001 -addr 192.168.99.0 255.255.255.0 208.1.2.0 255.255.255.0</b><br>
</tt></blockquote>

<p>
$B<!$K(B 208.2.2.2$B$NGX8e$K$"$k(B 208.1.5.0/24 $B$+$i(B 192.168.99.0/24 $B$X$N%U%m!<$r@@_Dj!'(B

<blockquote><tt>
# <b>ipsecadm flow -proto esp -dst 208.2.2.2 -spi 1001 -addr 192.168.99.0 255.255.255.0 208.1.5.0 255.255.255.0</b><br>
</tt></blockquote>

<p>
$B$=$7$F!"(B208.2.2.2 $B$NGX8e$K$"$k(B 208.1.2.0/24 $B$+$i%k!<%?(B 208.1.1.1 $B$X$N%U%m!<$r@@_Dj!'(B

<blockquote><tt>
# <b>ipsecadm flow -proto esp -dst 208.2.2.2 -spi 1001 -addr 208.1.1.1 255.255.255.255 208.1.2.0 255.255.255.0</b><br>
</tt></blockquote>

<p>
$B$=$7$F!"(B208.2.2.2$B$N(B $BGX8e$N(B 208.1.5.0/24 $B$+$i%k!<%?(B 208.1.1.1 $B$X$N%U%m!<$r@@_Dj(B:

<blockquote><tt>
# <b>ipsecadm flow -proto esp -dst 208.2.2.2 -spi 1001 -addr 208.1.1.1 255.255.255.255 208.1.5.0 255.255.255.0</b><br>
</tt></blockquote>

<p>
$B:G8e$K!"%k!<%?(B 208.2.2.2 $B$+$i(B 192.168.99.0/24 $B$X$N%U%m!<$r@@_Dj$7$^$9!#(B

<blockquote><tt>
# <b>ipsecadm flow -proto esp -dst 208.2.2.2 -spi 1001 -addr 192.168.99.0 255.255.255.0 208.2.2.2 255.255.255.255</b><br>
</tt></blockquote>


<h2>208.2.2.2 $BB&$G$O(B:</h2>

<p>
$BA0$HF1MM$K!"$^$:$O(B SA $B$N@@_Dj$+$i$G$9!#(B

<blockquote><tt>
# <b>ipsecadm new esp -src 208.2.2.2 -dst 208.1.1.1 -forcetunnel -spi 1000 -enc blf -auth sha1 -key 7762d8707255d974168cbb1d274f8bed4cbd3364 -authkey 67e21c66e5a40739db293cf2ef2a4e6659f</b><br>
# <b>ipsecadm new esp -src 208.1.1.1 -dst 208.2.2.2 -forcetunnel -spi 1001 -enc blf -auth sha1 -key 7762d8707255d974168cbb1d274f8bed4cbd3364 -authkey 67e21c66e5a40739db293cf2ef2a4e6659f</b><br>
</tt></blockquote>

<p>
$B$5$F!"$3$A$i$ON"JV$7$K$J$k$N$G!"(B
$B%k!<%?(B 208.2.2.2 $B$+$i(B 208.1.1.1 $B$X$N%U%m!<$r@@_Dj!'(B

<blockquote><tt>
# <b>ipsecadm flow -proto esp -dst 208.1.1.1 -spi 1000 -addr 208.2.2.2 255.255.255.255 208.1.1.1 255.255.255.255</b><br>
</tt></blockquote>

<p>
208.1.1.1 $B$NGX8e$K$"$k%M%C%H%o!<%/(B 192.168.99.0/24 $B$+$i(B 208.1.2.0/24 $B$X$N%U%m!<$r@@_Dj!'(B

<blockquote><tt>
# <b>ipsecadm flow -proto esp -dst 208.1.1.1 -spi 1000 -addr 208.1.2.0 255.255.255.0 192.168.99.0 255.255.255.0</b><br>
</tt></blockquote>

<p>
208.1.1.1 $B$NGX8e$K$"$k%M%C%H%o!<%/(B 192.168.99.0/24 $B$+$i(B 208.1.5.0/24 $B$X$N%U%m!<$r@@_Dj!'(B

<blockquote><tt>
# <b>ipsecadm flow -proto esp -dst 208.1.1.1 -spi 1000 -addr 208.1.5.0 255.255.255.0 192.168.99.0 255.255.255.0</b><br>
</tt></blockquote>

<p>
$B$G$O(B 208.1.1.1 $B$NGX8e$N(B 192.169.99.0/24 $B$+$i%k!<%?(B 208.2.2.2 $B$X$N%U%m!<$r@@_Dj!'(B

<blockquote><tt>
# <b>ipsecadm flow -proto esp -dst 208.1.1.1 -spi 1000 -addr 208.2.2.2 255.255.255.255 192.168.99.0 255.255.255.0</b><br>
</tt></blockquote>

<p>
$B$3$l$G$[$\=*N;$G$9!#8e$O!"(B
208.1.2.0/24 $B$H(B 208.1.5.0/24 $B$r%k!<%?(B 208.2.2.2 $B$+$i(B 208.1.1.1 $B$^$GFO$1$k$N$K!"(B
$B;D$j$N%U%m!<$O$U$?$D$@@$1$G$9!#(B

<blockquote><tt>
# <b>ipsecadm flow -proto esp -dst 208.1.1.1 -spi 1000 -addr 208.1.2.0 255.255.255.0 208.2.2.2 255.255.255.255 -ingress</b><br>
# <b>ipsecadm flow -proto esp -dst 208.1.1.1 -spi 1000 -addr 208.1.5.0 255.255.255.0 208.2.2.2 255.255.255.255 -ingress</b><br>
</tt></blockquote>

<p>
ipsecadm $B$r;HMQ$7$F$$$F!"<+J,$N9T$C$?:n6H$r$9$Y$F$4GK;;$K$7$F(B
$B0l$+$i$d$jD>$7$?$1$l$P!"<!$N$h$&$K$7$^$9!#(B

<blockquote><tt>
# <b>ipsecadm flush</b>
</tt></blockquote>

<p>
$B$3$l$G$9$Y$F$N(B IPsec $B>pJs(B (SPI$B!"%U%m!<!"%k!<%F%#%s%0$N%(%s%H%j(B) $B$,%7%9%F%`$+$i0lA]$5$l$^$9!#(B


<p>
<a name= "isakmpd"></a>
<h2>13.7 - isakmpd $B$N@@_Dj$O(B ?</h2>

<p>
VPNs $B$r$O$8$a(B IPsec $B$N3F<oEAE}E*$J%"%W%j%1!<%7%g%s$r9M$($F$$$k$N$G$7$?$i!"(B
$B$*$=$i$/(B ISAKMP $B$r;HMQ$9$k$3$H$K$J$j$^$9!#(BIPsec $B$N0lIt$N>&6H<BAu$G$O!"(B
$B<jF080@@_Dj$r;HMQ$9$k$3$H$,$G$-$^$;$s$N$G!"(B
$B2?$i$+$N7A$N(B ISAKMP $B$r;HMQ$9$k$7$+$"$j$^$;$s!#(B


<p>
<h3>13.7.1 - isakmpd $B$H$O(B ?</h3>

<p>
ISAKMP $B$H$O(B Internet Security Association and Key Management Protocol $B$N$3$H$G$9!#(B
$B$3$l$O!"(BIKE $B$"$k$$$O%$%s%?!<%M%C%H808r49(B (Internet Key Exchange) $B$H8F$P$l$k$3$H$b$"$j$^$9!#(B
$B$3$l$O!"(BIPsec $BMQ$NI8=`808r49%a%+%K%:%`$G$9!#$3$l$O!"(B
<a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2407.html">RFC 2407</a>$B!"(B
<a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2408.html">RFC 2408,</a>
$B$J$i$S$K(B
<a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2409.html">RFC 2409</a>
$B$K5-=R$5$l$?<jK!$r;HMQ$7$F!"%;%-%e%j%F%#$NLdBj$r%/%j%"$7$F$$$^$9!#(B
ISAKMP $B$O!"DL>o$J$i(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsecadm&amp;sektion=8">ipsecadm(8)</a>
$B$r;HMQ$7$J$/$F$O$J$i$J$$$h$&$J0E9f80$N$d$j<h$j$r4IM}$7$F$/$l$^$9!#(B
$B$3$l$O!"$U$?$D$N(B IPsec $B%N!<%I4V$G(B IPsec $B%Q%i%a!<%?$r3NN)$9$k$?$a$K!"(B
$BFsCJ3,%W%m%;%9$r:NMQ$7$F$$$^$9!#(B

<p>
<b>$B%U%'!<%:(B 1</b> - ISAKMP $B%T%"$U$?$D$O!"J]8n$5$lG'>Z$5$l$?%A%c%M%k$r3NN)$7!"(B
$B$U$?$D$N%G!<%b%s4V$GDL?.$,$G$-$k$h$&$K$7$^$9!#$3$l$O(B
$BN>%[%9%H4V$G(B Security Association (SA) $B$r3NN)$7$^$9!#$3$N%A%c%M%k$r3NN)$9$k$?$a$N<jK!$K$O!"(B
<b>Main Mode</b> $B$H(B <b>Aggressive Mode</b> $B$H$,$"$j$^$9!#(B
Main Mode $B$O3F<oG'>Z>pJs$r(B
$BFCDj$N=gHV$GAw$j!"%"%$%G%s%F%#%F%#$NJ]8n$rDs6!$7$^$9!#$^$?!"(BAggressive Mode $B$O(B
$B%"%$%G%s%F%#%F%#J]8n$ODs6!$7$^$;$s!#$3$l$O!"G'>Z>pJs$r(B
$B$9$Y$F0l5$$KAw?.$9$k$?$a$G$9$,!"$3$N(B Aggressive mode $B$r;HMQ$9$k$N$O!"(B
$BEpD0<T$KBP$7$F<1JL>pJs$rK=O*$9$k$3$H$K$J$C$F$7$^$&$3$H$,$"$j$^$9$N$G!"(B
$B%M%C%H%o!<%/$NBS0hI}$,69$$$H$-$@@$1$K$7$?$[$&$,NI$$$G$7$g$&!#(B

<p>
<b>$B%U%'!<%:(B 2</b> - IPsec $B$N$?$a$K(B Security Associations $B$N%M%4%7%(!<%7%g%s$,9T$o$l$^$9!#(B
$B%U%'!<%:(B 2 $B$G$O!"(BIPsec $B%[%9%H4V$K%H%s%M%k$+(B endpoint SA $B$r3NN)$7$^$9!#$^$?!"(B
$B%U%'!<%:(B 2 $B$G$O(B <b>Quick Mode</b> $B$,;HMQ$5$l$^$9!#$3$l$O!"%U%'!<%:(B 1 $B$G(B
$B4{$K(B SA $B$,3NN)$7$F$$$^$9$N$G!"40A4$JG'>Z$r$/$jJV$5$J$/$F$bNI$$$+$i$J$N$G$9!#(B

<p>
$B<jC;$K$$$($P!"%U%'!<%:(B 1 $B$OJ]8n$5$l$?%A%c%M%k$r3NJ]$9$k$N$K;HMQ$5$l!"$=$3$G(B
($B$h$jAGAa$$(B) $B%U%'!<%:(B 2 $B$N@@_Dj$,9T$o$l$k$N$G$9!#F1$8%U%'!<%:(B 1 $B%A%c%M%k$NCf$G!"(B
$BJ#?t$N%U%'!<%:(B 2 $B@@_Dj$r$9$k$3$H$b$"$j$^$9!#$=$7$F!"$3$N%U%'!<%:(B 2 $B$O!"<B:]$N(B
$B%H%s%M%k$r@@_Dj$9$k$N$K;HMQ$5$l$^$9!#(B
$B%U%'!<%:(B 1 $B$G$O(B IPsec $B%N!<%IF1;N$,@@\B3$r3NN)$7$FG'>Z$r8r49$7$^$9(B (X.509 $B>ZL@@$+!"(B
$B;vA0$K6&M-$7$?HkL)80$N$$$:$l$+(B)$B!#$3$l$GN>C<$H$b!"Aj<j$,G'>Z$5$l$?$3$H$r(B
$B3NG'$G$-$^$9!#%U%'!<%:(B 2 $B$O80$N8r49$G!"N><T$N4V$N%G!<%?$,(B
$B$I$N$h$&$K0E9f2=$5$l$k$+$r7hDj$7$^$9!#(B

<h3>13.7.2 - isakmpd $B$3$H$O$8$a(B</h3>

<p>
$B%G%U%)%k%H$G(B OpenBSD $B$K$O!"(BISAKMP $B$H(B IPsec $B%9%?%C%/MQ$H$7$FI,MW$H$J$k(B
$B$9$Y$F$N%P%$%J%j$,ImB0$7$F$$$^$9!#%5%s%W%k$N@@_Dj%U%!%$%k$O(B
<tt>/usr/share/ipsec/isakmpd</tt> $B$K$"$j$^$9!#(B
$B$3$NNc$G;HMQ$9$k$N$K!"(B<i>policy</i> $B$r(B
<tt>/etc/isakmpd/isakmpd.policy</tt> $B$r%3%T!<$7!"(B<i>VPN-east.conf</i> $B$r(B
<tt>/etc/isakmpd/isakmpd.conf</tt> $B$K%3%T!<$7$F$/$@@$5$$!#(B
$B$3$3$G$O!"(BVPN ($B%H%s%M%k(B) $B$N@@_Dj$N;EJ}$r@@bL@@$7$^$9!#(B
isakmpd $B$r8DJL%[%9%H4V$G;HMQ$9$k>l9g$K$O!"(B<i>samples</i> $B%G%#%l%/%H%j$K$=$N$?$a$N%5%s%W%k$,(B
$BF~$C$F$$$^$9!#(Bman $B%Z!<%8$K>\$7$$>pJs$,$"$j$^$9$N$G!"(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.conf&amp;sektion=5">isakmpd.conf(5)</a> $B$H(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.policy&amp;sektion=5">isakmpd.policy(5)</a>
$B$bK:$l$:$K;2>H$7$F$/$@@$5$$!#(B

<p>
$B%G%U%)%k%H$G$O%+!<%M%k$G(B AH $B$H(B ESP $B$NN>J}$,M-8z$K$J$C$F$$$k$N$G$9$,!"(B
FAQ $B%;%/%7%g%s$N(B <a href="#ManKey">Manual Keying</a> $B$N35MW$K$"$k<jB3$-$K$h$C$F!"(B
$BI,MW$H$9$k%W%m%H%3%k$,M-8z2=$5$l$F$$$k$3$H$r3NG'$7$F$*$$$F$/$@@$5$$!#(B
$B<!$K!"(B<tt>/etc/isakmpd/isakmpd.policy</tt> $B$rJT=8$7$F$/$@@$5$$!#(B
$B$3$N%U%!%$%k$O(B ISAKMP $B$K!"C/$,(B IPsec $B$K%"%/%;%9$G$-$k$N$+$r65$($k$?$a$N$b$N$G$9!#$3$N%7%J%j%*$G$O!"(B
$B$3$N(B policy $B%U%!%$%k$O!"(BEncapsulating Security Payload (ESP) $B$r;HMQ$7$F%G!<%?$rAw?.$7$F$-$F!"(B
<i>mekmitasdigoat</i> $B$H$$$&%Q%9%o!<%I(B ($B$3$l$O$"$J$?$,<+M3$K7h$a$F$/$@@$5$$(B) $B$GG'>Z$5$l$?Aj<j$J$i!"(B
$BC/$G$b(B isakmpd $B$HDL?.$G$-$k$3$H$,5-=R$5$l$F$$$^$9!#FCDj$N%G%8%?%k>ZL@@=q$G=pL>$5$l$?%G!<%?$@@$1$rG'$a$?$j!"(B
$BFCDj$N0E9fJQ49$r;HMQ$7$?%G!<%?$@@$1$rG'$a$?$j$9$k$3$H$r!"(BISAKMP $B$KEA$($k$?$a!"$3$N%U%!%$%k$rJQ99$9$k$3$H$,(B
$B$G$-$^$9!#$^$?!"C/$b$,(B IPsec $B$r;HMQ$G$-$k$h$&$K$9$k$3$H$b$G$-$^$9!#$b$A$m$s!"$3$l$O%F%9%H$N$?$a$@@$1$K(B
$B$9$Y$-$G$9$,!"$b$7!"$=$N$h$&$K$7$?$$>l9g$K$O!"(Bpolicy $B%U%!%$%k$rJT=8$7$F0J2<$N5-=R$@@$1$K$7$^$9!#(B

<blockquote><pre>
KeyNote-Version: 2
Authorizer: &quot;POLICY&quot;
</pre></blockquote>

<p>
$BF1$8(B policy $B%U%!%$%k$K$O(B $ $B$N$D$$$?9T$,Fs9T$"$j$^$9!#;HMQ$9$kA0$K!"(B
$B$3$l$i$NFs9T$O:o=|$9$kI,MW$,$"$j$^$9!#$3$l$i$N9T$O!"(BCVS $B$,;HMQ$7$F$$$?$b$N$G$9!#(B

<p>
$B$h$jJXMx$J(B policy $B%U%!%$%k$O0J2<$NNc$N$h$&$J$b$N$G$7$g$&!#(B

<blockquote><pre>
KeyNote-Version: 2
Comment: $B$3$N(B policy $B$O@@5$7$$%Q%9%o!<%I$r;H$&%j%b!<%H$+$i$N(B ESP SA $B$r<u$1IU$1$k(B
Authorizer: &quot;POLICY&quot;
Licensees: &quot;passphrase:mekmitasdigoat&quot;
Conditions: app_domain == &quot;IPsec policy&quot; &amp;&amp;
            esp_present == &quot;yes&quot; -&gt; &quot;true&quot;; 
</pre></blockquote>

<p>
$B$3$l$r<BAu$9$k$3$H$K$h$j!"(BESP $B$@@$1$r;HMQ$7$?4pK\E*$J(B VPN ($B%H%s%M%k(B) $B$r:n@@.$9$k$3$H$,$G$-$^$9!#(B
$B%[%9%H(B A $B$G$O(B <tt>/etc/isakmpd/isakmpd.conf</tt> $B$rJT=8$7$^$9!#8+K\$KF~$C$F$$$k(B 249.2.2.2 $B$H$$$&(B IP $B%"%I%l%9$O!"(B
$B%[%9%H(B A $B$N<B:]$N30It(B IP $B%"%I%l%9$K=q$-49$($F$/$@@$5$$!#(B

<blockquote><pre>
[General] 
Retransmits=		5
Exchange-max-time=	120
Listen-on=		249.2.2.2
</pre></blockquote>

<p>
$BF1MM$K$7$F!"%[%9%H(B B $B$N(B isakmpd.conf $B$K$b@@_Dj$7$^$9!#$3$3$G!"(B249.3.3.3 $B$O(B
$B%[%9%H(B B $B$N30It(B IP $B%"%I%l%9$G$9!#(B

<blockquote><pre>
[General]
Retransmits=		5
Exchange-max-time=	120
Listen-on=		249.3.3.3
</pre></blockquote>

<p>
$B$3$3$G(B isakmpd $B$N<g$J5sF0$r7hDj$9$kJQ?t$r@@_Dj$G$-$k!#$3$3$G$O(B
$B%G%U%)%k%H$r;HMQ$9$l$PNI$$$G$7$g$&!#(B
<b>Listen-on</b>= value $B$O!"(Bisakmpd $B$,%j%9%s$9$Y$-(B IP $B%"%I%l%9(B
$B$r;XDj$7$^$9!#$"$J$?$N%2!<%H%&%'%$$N%$%s%?!<%M%C%H(B IP $B$@@$1$,I,MW$H$J$j$^$9!#(B
$B%2!<%H%&%'%$$KJ#?t$N30It%$%s%?!<%U%'%$%9$,$"$k>l9g$K$O!"(B
$B%+%s%^$G6h@@Z$C$?0lMw7A<0$GF~NO$7$F!"$I$N%$%s%?!<%U%'%$%9$r%j%9%s$9$Y$-$+$r0lMw$K$G$-$^$9!#(B

<p>
$B<!$K%[%9%H(B A $B$G!"$b$&0lEY(B isakmpd.conf $B$rJT=8$7$^$9!#(B

<blockquote><pre>
[Phase 1]
249.3.3.3=		HostB
</pre></blockquote>

<p>
$B%[%9%H(B B $B$G$O0J2<$N$h$&$K$J$j$^$9!#(B

<blockquote><pre>
[Phase 1]
249.2.2.2=		HostA
</pre></blockquote>

<p>
$B$3$NItJ,$O!"%U%'!<%:(B 1 $B@@\B3$N%M%4%7%(!<%7%g%s$N:]$K<u$1IU$1$k$Y$-(B IP $B%"%I%l%9$r5-=R$7$^$9!#(B
$B$3$3$G$NCM$O2<$NItJ,$r;X$7$F$$$^$9(B ($B%U%'!<%:(B 1 $B$OC1$K%j%b!<%H$N%T%"$rG'>Z$7$F!"(B
$B$=$l$,<gD%DL$j$NAj<j$@@$H3NG'$9$k$@@$1$G$"$k$3$H$KCm0U$7$F$/$@@$5$$(B)$B!#$^$?!"(B
IP_Address=<i> &lt;PEER-NAME&gt;</i> $B$H$$$&7A<0$GJ#?t$N%T%"$r5-=R$9$k$3$H$,$G$-$^$9!#(B

<p>
$B<!$K%[%9%H(B A $B$G$O(B:

<blockquote><pre>
[Phase 2]
Connections=		HostA-HostB
</pre></blockquote>

<p>
$B%[%9%H(B B $B$G$O(B:

<blockquote><pre>
[Phase 2]
Connections=		HostB-HostA
</pre></blockquote>

<p>
$B$3$l$O@@\B3$N%U%'!<%:(B 2 $B$r5-=R$7$F$$$^$9!#$3$N%U%'!<%:$O!"DL?.$KN>(B
$B%T%"$,;H$&%W%m%H%3%k$r7hDj$9$k$?$a$N$b$N$G$9!#(B

<p>
<b>Connections</b>= $B%?%0$O!"$=$N2<$N%;%/%7%g%s$r;X$7$^$9!#(B
$B%U%'!<%:(B 2 $B$r@@_Dj$9$k$?$a$K<u$1F~$l$i$l$k%a%=%C%I$dMW7o$r3+;O$7$^$9!#$3$l$O$^$?!"(B
$B$$$C$?$s3+;O$7$?$i$I$N@@\B3$r3+;O$9$Y$-$+$K$D$$$F(B ISAKMPD $B$K<($7$F$$$^$9!#(B
$BJ#?t$N%T%"%[%9%H$K@@\B3$9$k>l9g$K$O!"(B
$B0J2<$N$h$&$KJ#?t$N%;%/%7%g%s$r5-=R2DG=$G$"$k$3$H$KCm0U$7$F$/$@@$5$$!#(B

<p>
$B%j%b!<%H%[%9%H$N(B IP $B%"%I%l%9$,$o$+$i$J$$>l9g$K$O!"(B<b>Connections</b>= $B%?%0$K(B
$BNs5s$5$l$F$$$J$$(B IP $B$+$i$N@@\B3$G;2>H$5$l$kHFMQ%(%s%H%j$r!"$"$k%;%/%7%g%s$K5-=R$7$F$*$$$F!"(B
$B$=$l$r(B Default= $B$G;XDj$9$k$h$&$K$7$^$9!#(B

<p>
$B%[%9%H(B A $B$G$O(B:

<blockquote><pre>
[HostB]
Phase=			1
Transport=		udp
Local-address=		249.2.2.2
Address=		249.3.3.3
Configuration=		Default-main-mode
Authentication=		mekmitasdigoat
#Flags=
</pre></blockquote>

<p>
$B%[%9%H(B B $B$G$O(B:

<blockquote><pre>
[HostA]
Phase=			1
Transport=		udp
Local-address=		249.3.3.3
Address=		249.2.2.2
Configuration=		Default-main-mode
Authentication=		mekmitasdigoat
#Flags=
</pre></blockquote>

<p>
$B$3$l$i$O>e$G@@bL@@$7$?%U%'!<%:(B 1 $B$NItJ,$G;2>H$5$l$F$$$k%;%/%7%g%s$G$9!#$=$l$>$l(B
$B%U%'!<%:(B 2 $B$K?J$`$?$a$K%T%"$N%2!<%H%&%'%$$,K~B-$7$J$1$l$P$J$i$J$$MW7o$r5-=R$7$F$$$^$9!#B>$K$b%*%W%7%g%s$O(B
$BB??t$"$j$^$9$,!">e5-$N$b$N$O:GDc8BI,MW$J$b$N$G$9!#(B

<ul>
<li><b>Phase=1 </b>$B$,I,MW$J$N$O!"(BISAKMPD $B$N%3!<%I$,%U%'!<%:(B 1 $B$H%U%'!<%:(B 2 $B$r=hM}$9$k$N$K(B
$BF1$8%W%m%7!<%8%c$r;H$&$+$i$G!"$3$l$r(B <b>1</b> $B$K$7$J$1$l$P!"2?$R$H$D5!G=$7$J$/$J$j$^$9!#(B
<li><b>Transport= </b> $B$O!"%T%"$4$H$K0[$J$k2DG=@@-$,$"$j$^$9!#$3$3$G$O(B UDP $B$r;HMQ$9$k$3$H$K$J$C$F$$$^$9$N$G!"(B
$B$=$N$^$^$K$7$F$*$-$^$9!#0lIt$N%T%"$O%U%!%$%"!<%&%)!<%k$NGX8e$K$"$j!"(BUDP $B%H%i%U%#%C%/$rDL$5$J$$>l9g$,(B
$B$"$k$3$H$KCm0U$7$F$/$@@$5$$!#EvA3$G$9$,!"$3$l$O@@_DjA0$K3NG'$7$F$*$/I,MW$,$"$j$^$9!#(B
<li><b>Local-address </b>$B$OF~$C$F$/$k%Q%1%C%H$,;X$9L\E*%"%I%l%9$G$9!#0lIt$N%1!<%9$G$O!"(B
$B%U%'!<%:(B 1 $B$N@@\B3$N$?$a$K%j%9%s$9$k%$%s%?!<%U%'%$%9$,0[$J$C$F$$$k$+$bCN$l$^$;$s!#(B
$B$3$NNc$G$O!"%$%s%?!<%U%'%$%9$O$R$H$D$7$+$"$j$^$;$s$N$G!"$3$N%T%"$G%j%9%s$9$k(B
$B%$%s%?!<%U%'%$%9$N(B IP $B$,$=$l$K$J$j$^$9!#(B
<li><b>Address= </b>$B$O!"F~$C$F$/$k%Q%1%C%H$N%=!<%9(B IP $B$G$9!#$3$l$O%T%"%2!<%H%&%'%$$r(B
$B;X$9$N$,0lHLE*$G$9!#$3$NItJ,$O$h$j>\$7$$@@bL@@$,I,MW$G$9!#(B
$B$3$l$O!"%T%"$NH/?.$9$k(B IP $B%"%I%l%9$O;vA0$K$O$o$+$i$J$$$3$H$,$"$k$+$i$G$9!#(B
<li><b>Configuration= </b> $B$O!"2<$N%;%/%7%g%s$r;X$7$^$9!#$3$3$K<($7$?$h$&$J7A$G(B
$BJ#?t$N%;%/%7%g%s$r;XDj$G$-$^$9!#$3$3$G$O%5%s%W%k%U%!%$%k$K$"$C$?(B
$B%G%U%)%k%HCM$r;HMQ$7$^$9!#(B
<li><b>Authentication=</b> $B$O!"$3$N%T%"$,;HMQ$9$k$O$:$N;vA0$K6&M-$7$F$$$kHkL)80$G$9!#(B
$B$3$N%Q%9%o!<%I$,(B policy $B$KEO$5$l!"$3$N%T%"$,$3$N%[%9%H$H(B IPsec $B$r;HMQ$7$FNI$$$+$I$&$+$r3NG'$7$^$9!#(B
$B$3$N%Q%9%o!<%I$rJQ$($k>l9g$K$O!"(Bpolicy $B%U%!%$%k$G$N5-=R$bJQ$($kI,MW$,$"$j$^$9!#(B
$B$3$l$O!"(Bsample $B%U%!%$%k$,$3$N%Q%9%o!<%I$K1~$8$FDs6!$5$l$F$$$k$+$i$G$9!#(B
$B:GDc8B$N(B policy $B%U%!%$%k$r;HMQ$9$k$D$b$j$G$7$?$i!"$3$3$G$O9%$-$J$b$N$r;XDj$7$F$/$@@$5$$!#(B
<li><b>Flags=</b> $B$O8=:_$G$O;HMQ$5$l$F$$$^$;$s!#(B
RFC $B$G$O!"%U%'!<%:(B 1 $BMQ$NDI2C%*%W%7%g%s$r;XDj$9$k$?$a$NM=Hw$H$7$F$3$l$r;D$7$F$$$^$9!#(B
<p>$BB>$N%*%W%7%g%s$r;XDj$9$k$?$a$N%?%0$bB??t$"$j$^$9!#>\$7$/$O(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.conf&amp;sektion=5">isakmpd.conf(5)</a>
$B$r;2>H$7$F$/$@@$5$$!#(B
</ul>

<p>
$B%[%9%H(B A $B$G$O(B:

<blockquote><pre>
[HostA-HostB]
Phase=			2
ISAKMP-peer=		HostB
Configuration=		Default-quick-mode
Local-ID=		Net-A
Remote-ID=		Net-B
</pre></blockquote>

<p>
$B%[%9%H(B B $B$G$O(B:

<blockquote><pre>
[HostB-HostA]
Phase=			2
ISAKMP-peer=		HostA
Configuration=		Default-quick-mode
Local-ID=		Net-B
Remote-ID=		Net-A
</pre></blockquote>

<p>
$B$3$l$i$O!">e5-$N%U%'!<%:(B 2 $B$G;2>H$5$l$F$$$k%;%/%7%g%s$rI=$7$F$$$^$9!#$3$l$O(B
$B8DJL$N@@\B3$N$?$a$K!"$U$?$D$N%2!<%H%&%'%$4V$GOC$r$9$k$N$K(B ISAKMPD $B$,;HMQ$9$Y$-(B
$B8DJL@@_Dj$J$N$G$9!#(B

<ul>
<li><b>Phase=2</b> $B$OI,?\$G$9!#(BISAKMPD $B$N%3!<%I$O!"%U%'!<%:(B 1 $B$H(B
$B%U%'!<%:(B 2 $B$NG'>Z$KF1$84X?t$r;H$&$+$i$G$9!#$3$l$,$J$$>l9g$K$O(B VPN $B$O5!G=$7$^$;$s!#(B
<li><b>ISAKMPD-Peer=</b> $B$O!">e$G$N%[%9%H$N%;%/%7%g%s$NL>A0$G$9!#$D$^$j!"%U%'!<%:(B 2 $B@@\B3$r3NN)$9$k$?$a$K!"(B
$B$3$3$G;XDj$7$?%T%"$HOC$7$F$$$k!"$H$$$&0UL#$G$9!#$3$l$,$"$k$N$O!"(Bisakmp $B%T%"$d@@\B3$r5-=R$9$k$N$K(B
$BJ#?t$N%;%/%7%g%s$,$"$k>l9g$b$"$k$+$i$J$N$G$9!#(B
<li><b>Configuration=</b> $B$O!"2<$N%;%/%7%g%s$G!"$3$N%[%9%H$H@@\B3$K$*$1$k;XDj$N%T%"$H$,(B
$B=>$&$Y$-5,3J$r5-=R$7$?ItJ,$r;X$7$^$9!#(B
<li><b>Local-ID=</b> $B$O!"%T%"$N%2!<%H%&%'%$$X$N$3$N%W%i%$%Y!<%H%M%C%H%o!<%/$r(B
$B5-=R$7$?!"0J2<$N(B IPsec-ID $B%;%/%7%g%s$r;X$7$F$$$^$9!#$3$NItJ,$,Aw$i$l$k$3$H$G!"BP8~B&$N%2!<%H%&%'%$$,(B VPN $B7PM3$G(B
$B$3$A$i$N%M%C%H%o!<%/$K%G!<%?$rE>Aw$9$k$?$a$N%k!<%F%#%s%0%F!<%V%k$r@@5$7$/@@_Dj$G$-$k$h$&$K$J$j$^$9!#(B
<li><b>Remote-ID=</b> $B$O!"$3$A$i$N%[%9%H$NBP8~$N%j%b!<%H$N%W%i%$%Y!<%H%M%C%H%o!<%/$G$"$k$O$:$N$b$N$r5-=R$7$?!"(B
$B2<$N(B IPsec-ID $B%;%/%7%g%s$r;2>H$7$F$$$^$9!#$3$A$i$N%W%i%$%Y!<%H%M%C%H%o!<%/$+$i(B VPN $B7PM3$G%j%b!<%H$N%W%i%$%Y!<%H(B
$B%M%C%H%o!<%/$K%G!<%?$rE>Aw$9$k$?$a$N%k!<%F%#%s%0%F!<%V%k$r@@5$7$/@@_Dj$9$k$?$a$K$3$NItJ,$,2r<a$5$l$^$9!#(B
<p>$B$3$3$G%5%]!<%H$5$l$k$b$&$R$H$D$N%?%0$,(B Flags= $B$G$9!#$3$N%?%0$,I,MW$J>l9g$K$O!"(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.conf&amp;sektion=5">isakmpd.conf(5)</a> $B$r;2>H$7$F$/$@@$5$$!#(B
</ul>

<p>
$B$3$3$O(B IPsec-ID $B%;%/%7%g%s$G$9!#0J2<$N%(%s%H%j$O!"%[%9%H(B A $B$H%[%9%H(B B $B$N(B
$BN>J}$N(B isakmpd.conf $B%U%!%$%k$NCf$KB8:_$7$F$$$J$1$l$P$J$j$^$;$s!#$3$NNc$N>l9g!"(B
$B%[%9%H(B A ($B$3$l$O>e$N(B Net-A $B$K@@\B3$5$l$F$$$k$b$N$G$9(B) $B$G$O(B 192.168.1.0/255.255.255.0$B!"(B
$B%[%9%H(B B ($B$3$l$O>e$N(B Net-B $B$K@@\B3$5$l$F$$$k$N$N$G$9(B) $B$G$O(B 192.168.20.0/255.255.255.0 $B$H$J$j$^$9!#(B

<blockquote><pre>
[Net-A]
ID-type=		IPV4_ADDR_SUBNET
Network=		192.168.1.0
Netmask=		255.255.255.0

[Net-B]
ID-type=		IPV4_ADDR_SUBNET
Network=		192.168.20.0
Netmask=		255.255.255.0
</pre></blockquote>

<p>
$B$3$N$U$?$D$N%;%/%7%g%s$,3F%[%9%H$N(B <b>conf</b> $B%U%!%$%k$K4^$^$l$F$$$^$9!#$3$l$,(B <b>Local-ID</b> $B$H(B <b>Remote-ID</b>
$B$N<1JL$7$G;2>H$5$l$k%;%/%7%g%s$G$9!#$R$H$D$N%W%i%$%Y!<%H%M%C%H%o!<%/$+$i!"JL$N%W%i%$%Y!<%H%M%C%H%o!<%/$X$N(B
$B%H%i%U%#%C%/$r2DG=$K$9$k:]$K@@_Dj$5$l$k$Y$-7PO)$,5-=R$5$l$F$$$^$9!#(B<b>ID-type</b>= $B$O(B <b>IPV4_ADDR_SUBNET</b> $B$+(B
<b>IPV4_ADDR</b> $B$r5-=R$G$-$^$9(B (RFC2708 $B$K$OB>$K$bM-8z$JCM$,5-=R$5$l$F$$$^$9!#(BOpenBSD $B$N8=>u$N<BAu$G$O(B IPv4 $B$7$+%5%]!<%H$5$l$F$$$^$;$s$,!"(BIPv6 $B$O(B OpenBSD-current $B$G%5%]!<%H$5$l$F$$$k$+$bCN$l$^$;$s(B)$B!#(B
 
<p>
$B$3$l$GN>J}$N%[%9%H$G!"(Bsample $B%U%!%$%k$O0J2<$NNc$N$h$&$K$J$C$?$O$:$G$9!#(B

<blockquote><pre>
[Default-main-mode]
DOI=			IPSEC
EXCHANGE_TYPE=		ID_PROT
Transforms=		3DES-SHA
</pre></blockquote>

<p>
$B$3$N%;%/%7%g%s$O!"%U%'!<%:(B 1 $B@@\B3$G;HMQ$5$l$k0E9fJ}<0$NMW7o$r5-=R$7$F$$$^$9!#L>A0$O(B
<i>Configuration=</i> $BJQ?t$N$H$kCM$rH?1G$7$F$$$^$9!#$4Mw$N$H$*$j!"(BDomain of Interest (DOI) $B$r(B
IPSEC $B$H$7$F5-=R$7$F$$$^$9!#(B<b>EXCHANGE_TYPE</b> $BJQ?t$O!"%U%'!<%:(B 1 $B$G$O(B <b>ID_PROT</b> $B$K@@_Dj$7$F$*$j!"(B
$B$3$l$O$3$NG'>Z$G%+%P!<$5$l$k%W%m%H%3%k$r;XDj$7$F$$$k$b$N$G$9!#(B
<b>Transforms=</b> $B$O$3$N$d$j<h$j$GI,MW$H$5$l$k(B ($B$^$?$O;XDj$5$l$k(B) $B0E9fJQ49J}<0$G$9!#$3$NNc$G$O!"(B
$B$3$l$O@@_Dj%U%!%$%k$N2<$N%;%/%7%g%s$r;X$7$F$$$F!"$=$3$G$O!"$o$l$o$l$O(B 3DES $B$G0E9f2=$5$l!"(B
SHA $B$G3NG'$G$-$k%A%'%C%/%5%`$r;}$D%Q%1%C%H$r<u$1<h$k!"$H5-=R$5$l$F$$$^$9!#%5%s%W%k$N(B <b>VPN-east.conf</b> $B$K$O!"(B
$B3F<oJQ49J}<0$,B??t5-=R$5$l$F$$$^$9!#$J$<$J$i!"(B3DES $B$d(B SHA $B$O3F<o$N%W%i%C%H%[!<%`$GI,$:$7$b%5%]!<%H$5$l$$$k(B
$B$H$O8B$i$J$$$+$i$G$9!#(BOpenBSD $B$N>l9g!"$3$l$r4pK\E*$J@@_Dj$GJQ$($k$Y$-M}M3$OFC$K$"$j$^$;$s!#$3$N%;%/%7%g%s$r(B
$B%3%T!<$7$FJQ49J}<0$rJQ$($k$N$O!"<+M3$G$9!#M#0l!"I,MW$K$J$k$N$O!"(BConfiguration= $BJQ?t$bJQ$($k$3$H$@@$1$G$9!#(B

<blockquote><pre>
[Default-quick-mode]
DOI=			IPSEC
EXCHANGE_TYPE=		QUICK_MODE
Suites=			QM-ESP-3DES-SHA-PFS-SUITE,QM-ESP-DES-MD5-PFS-SUITE
</pre></blockquote>

<p>
$B$3$N%;%/%7%g%s$O!"(BVPN $B7PM3$GE>Aw$l$k%G!<%?$N0E9f$NMW7o$r5-=R$9$k$H$3$m$G!"(B
$B>e$N(B <i>Configuration</i> $B$G;2>H$5$l$kItJ,$G$9!#$3$N%;%/%7%g%s$H!"(B
$B$9$0>e$N%U%'!<%:(B 1 $B$N$3$NItJ,$KAjEv$9$kItJ,$H$N0c$$$O!"(B <b>EXCHANGE_TYPE</b> $B$,(B <b>QUICK_MODE</b>$B$K(B
$B$J$C$F$$$k$H$$$&$3$H$KCmL\$7$F$/$@@$5$$!#%U%'!<%:(B 2 $B$G$OI,$:$3$N$h$&$K$J$k$N$G$9!#(B
$B$^$?!"(B<b>Suites=</b> $B$O(B IPsec Suite $B%;%/%7%g%s$r;X$7$F$$$^$9!#(B
$BN>%[%9%H4V$GDs6!$5$l$F$$$k3F<o$N0E9fJ}<0$r5-=R$7$?$b$N$G$9!#(B
ISAKMP $B$H(B IPsec $B$K$D$$$F$O!"B>$K$b@@bL@@$9$Y$-$3$H$,B??t$"$j$^$9!#$3$3$^$G$N4pK\E*$J@@bL@@$r$b$H$K!"(B
$B<+N)$7$F@@_Dj$7$F$b!"C1=c$J$,$i$b7xO4$J(B VPN $B$r9=@@.$G$-$^$9!#(B
$B$7$+$7!"$3$l$O!"N>%[%9%H$K$H$C$F(B<i>$BI,MW:GDc:G>.8B$N(B</i> 
<b>isakmpd.conf</b> $B$G$7$+$"$j$^$;$s!#(B
a31 419
<h3>13.7.3 - isakmpd$B$N5/F0(B</h3>

<p>
$B:G=i$K$3$N%G!<%b%s$r<B9T$9$k>l9g$K$O!"0J2<$N%3%^%s%I$r;HMQ$7$^$9!#(B

<blockquote><tt>
# <b>isakmpd -d -DA=90</b>
</tt></blockquote>

<p>
$B%G!<%b%s$O%G!<%b%s%b!<%I$G$O<B9T$5$l$:!"DL>o$N(B ($B%U%)%"%0%i%&%s%I(B)
$B%W%m%;%9$H$7$F<B9T$5$l$^$9!#$=$7$F!"$9$Y$F$r%?!<%_%J%k$K=PNO$7$^$9!#(B
isakmpd $B$r;_$a$F7PO)$r0lA]$9$k$K$O!"3F%N!<%I$G(B isakmpd $B%W%m%;%9$r(B
kill $B$7$F$+$i(B <b>ipsecadm flush</b>
$B$r<B9T$7$^$9!#(B


<p>
<a name= "x509"></a>
<h2>13.8 - isakmpd $B$r(B X.509 $B>ZL@@=q$H;HMQ$9$k$K$O(B ?</h2>

<p>
$B;vA0$K6&M-$7$?80$N$+$o$j$K>ZL@@=q$r;HMQ$9$k$h$&$K(B isakmpd $B$r@@_Dj$9$k$N$O!"(B
$BJ]8n$5$l$F$$$J$$%T%"$,B?$/B8:_$9$k5pBg%M%C%H%o!<%/$N>l9g$K$O!"(B
$B>.$5$J%M%C%H%o!<%/$HHf3S$7$F$=$l$[$IFq$7$$$3$H$G$O$"$j$^$;$s!#(B
$B$`$7$m!"@@_Dj$,4JC1$K$J$k$+$bCN$l$^$;$s$7!"$5$i$K=EMW$J$3$H$H$7$F!"(B
$B804IM}$,Hs>o$K=@@Fp$K$J$j$^$9!#(B


<h2>$B>ZL@@=q$N@@8@@.(B</h2>

<p>
$B80$d>ZL@@=q$N@@8@@.$N;EJ}$K$D$$$F!"(Bisakmpd
$B%=!<%9%G%#%l%/%H%j$N(B
<a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sbin/isakmpd/README.PKI?rev=1.7">README.PKI</a>
$B%U%!%$%k$K>\$7$/5-=R$5$l$F$$$^$9!#(B
CA $B80!"BP1~$9$k(B CA X.509
$B>ZL@@=q!"%M%C%H%o!<%/>e$N(B isakmpd $B$r;H$&%3%s%T%e!<%?$=$l$>$l$KHkL)80$R$H$D$H!"$=$NHkL)80$N$=$l$>$l$KBP$7$F(B X.509
$B>ZL@@=q$R$H$D$:$D$,I,MW$H$J$j$^$9!#(B

<p>
isakmpd $B$G;HMQ$G$-$k$b$N$K$9$k$?$a$K!"(BX.509 $B>ZL@@=q$O!">ZL@@=q$N;}$A<g$r5-=R$9$k(B
Subject Alternative Name (subjectAltName) $B3HD%$,DI2C$5$l$kI,MW$,$"$j$^$9!#(B
$B$3$N3HD%$O>ZL@@=q$N;}$A<g$N?H85$r5-=R$9$k$b$N$G$"$j!"(B
$B$3$l$O!"(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=certpatch&amp;sektion=8">certpatch(8)</a>
$B$+!"$^$?$O!"(B
<tt>/etc/ssl/x509v3.cnf</tt>
$B$N$h$&$J!"(BOpenSSL $B$NFCJL$J@@_Dj%U%!%$%k$r;HMQ$7$FDI2C$5$l$k$+$bCN$l$J$$$b$N$G$9!#(B
<a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sbin/isakmpd/README.PKI?rev=1.7">README.PKI</a>
$B$NNc$O!"(BsubjectAltName $B<1JL;R$H$7$F(B IP $B%"%I%l%9$r;HMQ$9$k$3$N<j=g$K$D$$$F@@bL@@$7$F$$$^$9!#(B

<p>
IP $B%"%I%l%9$O(B subjectAltName $B3HD%$N%G%U%)%k%H$N%a%+%K%:%`$G$9$,!"(B
certpatch $B$O!"(BFQDN (Fully Qualified Domain Name) $B$+!"$^$?$O(B
UFQDN (User FQDN) $B$r;HMQ$9$kJ}K!$b%5%]!<%H$7$F$$$^$9!#(B
$B$3$l$O!"%b%P%$%k%f!<%6$K$OBgJQJXMx$J$b$N$G$7$g$&!#(BFQDN $B$NNc$O!"(B
<tt>www.openbsd.org</tt> $B$G$9!#$^$?!"(BUFQDN $B$NNc$H$7$F$O!"(B
<tt>Jorgen.Granstam@@abc.se</tt> $B$N$h$&$JEE;R%a!<%k%"%I%l%9$+$bCN$l$^$;$s!#(B
$B$3$l$O!"(BIP $B%Y!<%9$N<1JL;R$H$O0[$J$k$b$N$H$7$FCm0U$9$Y$-$b$N$G$"$j!"(B
isakmpd $B$O(B FQDN $B$"$k$$$O(B UFQDN $B%Y!<%9$N<1JLJ}K!$K$h$k%G!<%?$N8!>Z$r(B
$B9T$o$:!"<1JL;R$OC1$J$kJ8;zNs$H8+$J$5$l$^$9!#(B

<p>
$B0J2<$NNc$G$O(B subjectAltNames $B$H$7$F(B FQDN $B$r;HMQ$7$F$$$^$9!#(B

<p>
FQDN subjectAltName $B$r>ZL@@=q$KF~$l$k$K$O!"(B
$B0J2<$NNc$N$h$&$K5-=R$7$^$9!#(B

<blockquote><tt>
$ <b>/usr/sbin/certpatch -t fqdn -i home.mysite.se -k ca.key originalcert.crt newcert.crt</b>
</tt></blockquote>

<p>
$B$3$3$G!"(Bca.key $B$O(B CA $B$NHkL)80$G$9$N$G!"$3$l$r<B9T$G$-$k$N$O(B
CA $BHkL)80$K%"%/%;%9$G$-$k?M$@@$1$H$$$&$3$H$K$J$j$^$9!#(B
home.mysite.se $B$H$$$&$N$O(B ($B<B:_$7$^$;$s$,(B) $B>ZL@@=q$KA^F~$5$l$k$Y$-(B FQDN $B$G$9!#(B
originalcert.crt $B$H(B newcert.crt $B$N%U%!%$%kL>$OF1$8L>A0$K$7$F$bNI$$$G$7$g$&!#(B
$B$3$N>l9g!"85$N%U%!%$%k$O?7$7$$JQ99:Q$_$N>ZL@@=q$K(B
$B>e=q$-$5$l$k$3$H$K$J$j$^$9!#(B

<p>
$B$3$N80$H>ZL@@=q$r!"(BREADME.PKI $B$N:G8e$K@@bL@@$K=>$C$F%G%#%l%/%H%j$KCV$-$^$9!#(B
$B$b$7!"K\Ev$K80$r;HMQ$9$k$D$b$j$G$7$?$i!"(BCA $B80(B (ca.key) $B$O!"(B
$B$I$3$+0BA4$J$H$3$m$KJ]4I$9$k$h$&$K$7$F$/$@@$5$$!#(B
 
<p>
<table>
<tr><td><tt>/etc/isakmpd/ca</tt></td>
<td>$B?.Mj$5$l$?(B CA $B$N8x3+80(B (PEM $B%U%)!<%^%C%H(B) $B>ZL@@=q(B</td></tr>
<tr><td><tt>/etc/isakmpd/certs</tt></td>
<td>$B?.Mj$5$l$?8x3+80(B (PEM $B%U%)!<%^%C%H(B) $B>ZL@@=q(B (subjectAltName $B3HD%$"$j(B)</td></tr>
<tr><td><tt>/etc/isakmpd/private</tt></td>
<td>$BHkL)80!#$3$l$i$O>e5-$N(B <tt>cert</tt> $B%G%#%l%/%H%jCf$N(B
$B4X78$9$k8x3+80$r;}$D$Y$-$G$9!#(B</td></tr>
</table>

<p>
$B$3$l$i$N0LCV$O!"(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.conf&amp;sektion=5">isakmpd.conf(5)</a>
$B$NCf$N(B [X509-certificates] $B%;%/%7%g%s$NCM$K$h$C$F%*!<%P!<%i%$%I$5$l$k$+$bCN$l$^$;$s!#(B

<p>
CA $B$N%$%s%U%i%9%H%i%/%A%c!<$r?.Mj$9$Y$-$b$N$K$9$k$?$a$K$O!"(BCA $B$NHkL)80(B
(<tt>/etc/isakmpd/ca/ca.key</tt>) $B$O0BA4$J>l=j$KJ]4I$5$l$J$1$l$P$J$i$:!"(B
$B$=$7$F!"(B($B$?$H$($P(B 2048 $B%S%C%H$N$h$&$J(B) $BE,@@5$J%S%C%HD9$G$"$k$Y$-$G$"$j!"(B
$B6(NO$J%Q%9%U%l!<%:$G0E9f2=$5$l$k$Y$-$G$"$k!"$H$$$&$3$H$KCm0U$7$F$/$@@$5$$!#(B


<h2>isakmpd $B$N@@_Dj(B</h2>

<p>
<tt>/etc/isakmpd/isakmpd.conf</tt> $B@@_Dj%U%!%$%k$r8+$F$_$^$7$g$&!#(B
$B$3$l$O$b$H$b$H(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.conf&amp;sektion=5">isakmpd.conf(5)</a>
$B$N%5%s%W%k%U%!%$%k$+$i<h$C$F$-$?$b$N$G$9$,!"$+$J$jJQ99$5$l$F$$$^$9!#(B
$B$5$i$K!"$3$N@@_Dj$NM}2r$r$h$j4JC1$K$9$k$?$a$K!"(Bman $B%Z!<%8$K$"$k(B
$B$b$N$h$j$b$+$J$jC;$$%U%!%$%k$r;HMQ$7$F$$$^$9!#$=$7$F!"%3%a%s%H$bDI2C$7$F(B
 ($B0lIt$N%3%a%s%H$O(B isakmpd.conf(5)$B$K$"$C$?$b$N$G$9(B)$B!"L>A0$b>/$7JQ99$7$^$7$?!#(B
$B$3$3$G;HMQ$7$?%I%a%$%sL>$O!";d$?$A$NCN$k8B$j$G$O$R$H$D$b<B:_$7$F$$$^$;$s!#(B

<p>
$B<B:]$K$O!"$3$3$rFI$`?M$O4{$K;vA06&M-80$K$D$$$F<B:]$KF0$/@@_Dj$r(B
$B;}$C$F$$$k$O$:$G$9$N$G(B ($BA0$N@@a$r;2>H(B)$B!"$3$N%U%!%$%k$K$OL\?7$7$$$H$3$m$O(B
$B$"$^$j$J$$$3$H$G$7$g$&!#$G$9$N$G!"$9$Y$F$r>\:Y$K@@bL@@$9$k$N$O95$($^$9!#(B
$B@@bL@@$7$J$$ItJ,$K$D$$$F$O(B isakmpd.conf(5) $B$r(B
$B;2>H$7$F$/$@@$5$$!#(B

<p>
$BA4BN$N9=@@.$O0J2<$N$h$&$J$b$N$r2>Dj$7$^$9!#(B

<p>
<center>
<pre>
one.mysite.se                                        one.worksite.se
 192.168.1.2--+    10.0.0.1====/======10.0.0.2     +--192.168.2.2 
              |  gw.mysite.se       gw.worksite.se |
              +--192.168.1.1         192.168.2.1---+
two.mysite.se |                                    | two.worksite.se
 192.168.1.3--+                                    +--192.168.2.3
</pre>
</center>

<p>
$B$3$l$O$D$^$j!"$U$?$D$N%M%C%H%o!<%/$,!"J]8n$5$l$F$$$J$$%M%C%H%o!<%/>e$N(B IPsec $B%H%s%M%k(B
$B7PM3$G@@\B3$5$l$F$$$k!"$H$$$&$b$N$G$9!#$3$3$G$O%W%i%$%Y!<%H%$%s%?!<%M%C%HMQ$KM=Ls$5$l$?(B
IP $B%"%I%l%9(B (RFC1918) $B$r;HMQ$7$F$$$k$3$H$OL5;k$7$F$/$@@$5$$!#$3$l$OC1$K!"2?$+$r;HMQ$9$k(B
$BI,MW$,$"$C$?$H$$$&$@@$1$N$3$H$@@$C$?$N$G$9!#(Bisakmpd $B$r(B NAT $B$HAH$_9g$o$;$F;HMQ$9$k$J$I$N(B
$B$3$H$K4X$7$F$O@@bL@@$7$J$$$D$b$j$G$9(B ($B;d<+?H$K7P83$,$J$$$+$i$G$9(B)$B!#(B

<p>
$B$G$O!"@@_Dj%U%!%$%k$r8+$F$_$^$7$g$&!#0J2<$O!"(B
$B%;%-%e%j%F%#%2!<%H%&%'%$(B gw.mysite.se $BMQ$N%U%!%$%k$G$9!#(B

<blockquote><pre>

# *****************************************************************
# ************* Start of the gw.mysite.se isakmpd.conf ************
# *****************************************************************

# A configuration sample for the isakmpd ISAKMP/Oakley (aka IKE) daemon.
[General]
Policy-File=            /etc/isakmpd/policy
Retransmits=            5
Exchange-max-time=      120
Listen-on=              10.0.0.1


# The name work-gw here is used just as a section name and a tag for
# use in this configuration file below and need not actually be the 
# real hostname or domain name of the peer (but it could be). The IP 
# address however needs to be correct. Phase 1, as you might already
# know, is to negotiate an ISAKMP security association (SA). There 
# should of course be one IP and name for each peer we want to
# communicate with.
[Phase 1]
10.0.0.2=               work-gw


# Now phase 2 is negotiating IPsec SAs. As in phase 1, the name here
# is a section name to be used later. Actually, it can be a comma
# separated list of section names here. Thus if traffic from many
# networks (or individual hosts) should be forwarded through this
# tunnel, more section names would be added (and of course corresponding 
# new sections further down). 
[Phase 2]
Connections=            work-gw-my-gw


# Now, here are some parameters for the ISAKMP SA negotiations. Almost 
# self documenting. The section name is from [Phase 1] above. The most 
# interesting tag might be the ID tag. The ID tag is set to the name
# of the section where the identity information about this host that 
# will be presented to connecting peers, can be found. If the ID tag 
# is not available, isakmpd will assume that it will identify itself 
# using the IP address. You might also notice that there is no longer 
# any authentication tag here in this configuration. The authentication
# data is currently used only in the preshared key case. 
[work-gw]
Phase=                  1
Transport=              udp
Local-address=          10.0.0.1                # Local address
Address=                10.0.0.2                # Peer address
ID=                     my-ID
Configuration=          Default-main-mode


# This is the identity data. ID-type may also be IPV4_ADDR (the
# default), IPV4_ADDR_SUBNET or UFQDN. The Name tag is used for 
# FQDN and UFQDN, for IPV4_ADDR an Address tag would be used instead.
# For IPV4_ADDR_SUBNET a Network and a Netmask tag would be used.  
[my-ID]
ID-type=                FQDN
Name=                   gw.mysite.se


# This is the section for the IPsec connection. The section name is
# from the list in the [Phase 2] section above. The ISAKMP-peer is,
# of course, the tag of our peer from section [Phase 1] above. The 
# Local-ID and Remote-ID tags should be section names describing which
# packages should be forwarded over the IPsec tunnel to the remote 
# network.
[work-gw-my-gw]
Phase=                  2
ISAKMP-peer=            work-gw
Configuration=          Default-quick-mode
Local-ID=               Net-west
Remote-ID=              Net-east

# Any packet originating from a computer on the network described
# here... 
[Net-west]
ID-type=                IPV4_ADDR_SUBNET
Network=                192.168.1.0
Netmask=                255.255.255.0

# ... and with a destination matching the network described here, 
# will be encrypted and forwarded over the IPsec tunnel to the remote 
# system. 
[Net-east]
ID-type=                IPV4_ADDR_SUBNET
Network=                192.168.2.0
Netmask=                255.255.255.0

# Main mode descriptions


# Here are the data for main mode. Using DES here for real purposes
# is not very smart since DES is no longer considered a secure
# encryption algorithm. 3DES is generally considered to have much better
# security since it has enough bits in the key to be considered secure. 
# Transforms is a list of tags describing main mode transforms. In 
# this example we have only one.
[Default-main-mode]
DOI=                    IPSEC
EXCHANGE_TYPE=          ID_PROT
Transforms=             3DES-MD5


# Certificates stored in PEM format
# This is important when using certificates. The CA certificates should 
# be in the CA-directory (but not the CA private key of course).
# The Cert-directory should have at least the certificate for the
# local host but other certificates are also allowed. The private key 
# should be the private key of the local host. 
[X509-certificates]
CA-directory=           /etc/isakmpd/ca/
Cert-directory=         /etc/isakmpd/certs/
Private-key=            /etc/isakmpd/private/local.key

# Main mode transforms
######################

# Here is our main mode transform. The important thing here is to use
# RSA_SIG as authentication method when using certificates. It is the
# only method supported when using certificates so far. Commercial
# entities in the US will thus have to wait until September 2000 to
# use this due to the RSA patent. Luckily, I am not living in the US. 
# Also important is the GROUP_DESCRIPTION tag. It must match the
# GROUP_DESCRIPTION tag in the Quick mode transforms further down. 
# The Life tag here could possibly be modified. The LIFE_60_SECS might 
# be shorter than necessary for normal use. 

[3DES-MD5]
ENCRYPTION_ALGORITHM=   3DES_CBC
HASH_ALGORITHM=         MD5
AUTHENTICATION_METHOD=  RSA_SIG
GROUP_DESCRIPTION=      MODP_1024
Life=                   LIFE_60_SECS,LIFE_1000_KB

# Quick mode description
########################

[Default-quick-mode]
DOI=                    IPSEC
EXCHANGE_TYPE=          QUICK_MODE
Suites=                 QM-ESP-3DES-MD5-PFS-SUITE

# Quick mode protection suites
##############################
# 3DES

[QM-ESP-3DES-MD5-PFS-SUITE]
Protocols=              QM-ESP-3DES-MD5-PFS

# 3DES

[QM-ESP-3DES-MD5-PFS]
PROTOCOL_ID=            IPSEC_ESP
Transforms=             QM-ESP-3DES-MD5-PFS-XF

# Quick mode transforms

# Don't forget. The GROUP_DESCRIPTION must match the GROUP_DESCRIPTION 
# in main mode above. For forwarding packets between two networks (or
# from a host to a network) we use TUNNEL mode. Between two hosts we
# may also use TRANSPORT mode instead. 
[QM-ESP-3DES-MD5-PFS-XF]
TRANSFORM_ID=           3DES
ENCAPSULATION_MODE=     TUNNEL
AUTHENTICATION_ALGORITHM=       HMAC_MD5
GROUP_DESCRIPTION=      MODP_1024
Life=                   LIFE_60_SECS


# As we know from the isakmpd.config manpage the LIFE_DURATION here is 
# an offer value (60), a minimum acceptable value (45) and a maximum
# acceptable value. The isakmpd.conf example has this set to 
# 600,450/720 instead. That might be a better value for normal use.
[LIFE_60_SECS]
LIFE_TYPE=              SECONDS
LIFE_DURATION=          60,45:72

[LIFE_1000_KB]
LIFE_TYPE=              KILOBYTES
LIFE_DURATION=          1000,768:1536

# *****************************************************************
# ************* End of the gw.mysite.se isakmpd.conf **************
# *****************************************************************
</pre></blockquote>

<p>
$B$3$3$^$G$O%m!<%+%k%7%9%F%`MQ$N@@_Dj$K$J$j$^$9!#%j%b!<%H%7%9%F%`$N@@_Dj$b(B
$B$^$C$?$/F1$8$G$9$,!"$3$NN"JV$7$K$J$j$^$9!#$G$9$+$i!"0[$J$k$N$O(B isakmpd.conf
$B%U%!%$%k$NKAF,$N$H$3$m$@@$1$H$$$&$3$H$K$J$j$^$9!#%;%-%e%j%F%#%2!<%H%&%'%$(B
gw.worksite.se $B$N(B isakmpd.conf $B%U%!%$%k$NKAF,$N$H$3$m$@@$18+$F$_$^$7$g$&!#(B

<blockquote><pre>
# *****************************************************************
# ************* Start of the gw.worksite.se isakmpd.conf **********
# *****************************************************************

[General]
Policy-File=            /etc/isakmpd/isakmpd.policy
Retransmits=            5
Exchange-max-time=      120
Listen-on=              10.0.0.2

[Phase 1]
10.0.0.1=               my-gw

[Phase 2]
Connections=            work-gw-my-gw

[my-gw]
Phase=                  1
Transport=              udp
Local-address=          10.0.0.2                # Local address
Address=                10.0.0.1                # Peer address
ID=                     work-ID
Configuration=          Default-main-mode

[work-ID]
ID-type=                FQDN
Name=                   gw.worksite.se

[work-gw-my-gw]
Phase=                  2
ISAKMP-peer=            my-gw
Configuration=          Default-quick-mode
Local-ID=               Net-east
Remote-ID=              Net-west

# *****************************************************************
# ********************** ... to be continued **********************
# *****************************************************************
</pre></blockquote>

<p>
$B$"$^$jFq$7$/$O$J$$$H;W$$$^$9!#$?$@@$7!"FI$`$N$O>/$7B`6~$@@$C$?$+$bCN$l$^$;$s$M!#(B
$B<!$NItJ,$O!"$b$&>/$7$*$b$7$m$/$J$k$O$:$G$9!#(B


<h2>policy $B%U%!%$%k(B</h2>

<p>
$B<B$N$H$3$m!"(Bpolicy $B%U%!%$%k$O=i$a$F$N?M$K$O>/!9Fq2r$J$b$N$+$bCN$l$^$;$s!#(B
$BFC$K;W$$$I$*$j$KF0$+$J$$$H$-$K$O$=$&$@@$H;W$$$^$9!#(Bman $B%Z!<%8(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.policy&amp;sektion=5">isakmpd.policy(5)</a>
$B$O!"<B$O$=$l$[$I0-$/$O$J$$$H;W$$$^$9!#$H$3$m$I$3$m(B
$B$O$C$-$j$7$J$$$H$3$m$,$"$k$K$O$"$k$N$G$9$,!"A4BN$H$7$F$ONI$/5-=R$5$l$F$$$^$9!#(B

<p>
$B:G$b4JC1$J!"@@5>o$K5!G=$9$k(B policy $B%U%!%$%k$O(B
$B$?$C$?0l9T$@@$1$N$b$N$G$9!#(B

<blockquote><pre>
authorizer: &quot;POLICY&quot;
</pre></blockquote>

<p>
$B$3$l$O$D$^$j!"C/$,@@\B32DG=$+$H$$$&$3$H$K$D$$$F$N%]%j%7!<>e$N@@)Ls$,2?$b$J$$!"(B
$B$H$$$&$3$H$J$N$G$9!#$G$9$+$i!"7h$7$F%;%-%e%j%F%#$N9b$$@@_Dj$G$O$"$j$^$;$s!#(B
$B$3$N(B authorizer $B%?%0$O!"(Bpolicy $B$r7hDj$9$k8"8B$r;}$D%f!<%6$G$9!#(B
$BFCJL(B authorizer $B$G$"$k(B &quot;POLICY&quot; $B$O!"(Bpolicy $B$K$D$$$F$N(B
$B:G=*E*$+$DL58B$N8"8B$r;}$A$^$9!#$=$l0J30$N(B authorizer $B$K$D$$$F$O!"(B
$B$3$3$G8"8B$r;}$D$?$a$K$O!"$^$:(B &quot;POLICY&quot; $B$NG'Dj$r<u$1$kI,MW$,$"$j$^$9!#(B
a33 675
$B$5$i$K2?$,5v$5$l$k$+$K$D$$$F!">r7o72$,$"$k$+$bCN$l$^$;$s!#(B
$B$G$9$+$i!"0J2<$N(B policy $B$OK\J*$N0E9f$r2?$+;HMQ$7$F(B ESP
$B%W%m%H%3%k$r;HMQ$7$?%f!<%6$@@$1$,G'Dj$5$l$k$H$$$&$3$H$J$N$G$9(B ($BK\J*$H$O8@@$(!"(B
$B$3$l$G$9$H(B DES $B$r;HMQ$9$k%f!<%6$bG'$a$i$l$^$9$,!"(BDES $B$O(B
$B8=:_$G$O$[$H$s$I%@@%a$J$b$N$H9M$($FNI$$$/$i$$$N$b$N$J$N$G!"(BDES $B$rG'$a$J$$$h$&!"(B
$B$3$N(B policy $B$rJQ99$9$k$N$O!"FI<T$NN}=,LdBj$H$7$F;D$7$F$*$/$3$H$K$7$^$7$g$&(B)$B!#(B
$B$3$l$G$9$H(B ESP $B$G0E9f2=$9$k%f!<%6$J$i!"C/$G$bG'$a$i$l$k$3$H$KCm0U$7$F$/$@@$5$$!#(B

<blockquote><pre>
authorizer: &quot;POLICY&quot;
conditions: app_domain == &quot;IPsec policy&quot; &amp;&amp;
            esp_present == &quot;yes&quot; &amp;&amp;
            esp_enc_alg != &quot;null&quot; -&gt; &quot;true&quot;;

</pre></blockquote>

<p>
$B$5$i$K!"8"8B$rC/$+B>$NB8:_(B ($BJ#?t$G$b9=$$$^$;$s(B)
$B$K!V%5%V%i%$%;%s%9!W$9$k$3$H$b$G$-$^$9!#4JC1$J%1!<%9$H$7$F$O!";vA06&M-80$N(B
$B>l9g$G$7$g$&!#$3$N>l9g!";vA0$K6&M-$5$l$?%Q%9%o!<%I$rCN$k?M$O$9$Y$F(B
$BG'$a$i$l$k$3$H$K$J$j$^$9!#$G$9$+$i!"(B

<blockquote><pre>
authorizer: &quot;POLICY&quot;
licensees:  &quot;passphrase:something really secret&quot;
conditions: app_domain == &quot;IPsec policy&quot; &amp;&amp;
            esp_present == &quot;yes&quot; &amp;&amp;
            esp_enc_alg != &quot;null&quot; -&gt; &quot;true&quot;;
</pre></blockquote>

<p>
$B$3$l$O$3$N%Q%9%o!<%I$rCN$C$F$$$F>r7o$K%^%C%A$7$??M$9$Y$F$,(B
$B@@\B3$rG'$a$i$l$^$9(B ($B$?$@@$7!"$3$N%Q%9%o!<%I$O(B isalmpd.conf $B$N(B Authentication
$B%?%0$G$b@@_Dj$7$F$*$/$N$rK:$l$J$$$h$&$K$7$F$/$@@$5$$(B)$B!#(B

<p>
$B$3$3$^$G$O2?$bFq$7$/$O$J$$$H;W$$$^$9!#$3$l$+$i$,$*$b$7$m$$$H$3$m$J$N$G$9!#$^$:!"(B
$B%i%$%;%s%9$r<u$1$kB8:_$OB??t$"$C$F$b9=$$$^$;$s$,!"$=$N$9$Y$F$,(B &quot;POLICY&quot;
$B$KG'Dj$5$l$J$/$F$O$J$j$^$;$s!#$5$i$K!"G'Dj$5$l$?%i%$%;%s%9J];}<T$O!"B>$N%i%$%;%s%9J];}<T$K(B
$B%5%V%i%$%;%s%9$r=P$;$k$^$9!#%i%$%;%s%9J];}<T$O!"(Bpolicy $B%U%!%$%k$K$b5-=R$5$l$F$$$k>l9g$K$O(B
$BC1$J$k%9%H%j%s%0$G$b9=$$$^$;$s!#(B

<blockquote><pre>
authorizer: &quot;POLICY&quot;
licensees:  &quot;subpolicyAH&quot; ||  &quot;subpolicyESP&quot;
conditions: app_domain == &quot;IPsec policy&quot; -&gt; &quot;true&quot;;

authorizer: &quot;subpolicyESP&quot; 
licensees:  &quot;passphrase:something more secret&quot;
conditions: esp_present == &quot;yes&quot; -&gt; &quot;true&quot;;

authorizer: &quot;subpolicyAH&quot; 
licensees:  &quot;passphrase:something really secret&quot;
conditions: ah_present == &quot;yes&quot; -&gt; &quot;true&quot;;
</pre></blockquote>

<p>
$B$5$F!"$_$J$5$s$*BT$A$+$M$NItJ,$G$9!#(BPolicy $B$O$^$?!"(B
$B80$K%5%V%i%$%;%s%9$7$?$j8"8B0Q>y$7$?$j$G$-$^$9!#$3$N>l9g$N80$O!"DL>o$O(B
X.509 $B>ZL@@=q$K$J$j$^$9!#>ZL@@=q$r4JC1$K;HMQ$9$k$K$O!"(B
$B$=$l$r%Q%9%o!<%I$,$o$j$K;HMQ$9$k$3$H$G$9!#(B
policy $B%U%!%$%k$K8DJL%f!<%6$N>ZL@@=q$r2C$($k$@@$1$GNI$$$G$7$g$&!#(B

<blockquote><pre>
keynote-version: 2
comment: This is an example of a policy delegating to a key.
authorizer: &quot;POLICY&quot;
licensees: &quot;x509-base64:\
        MIIBsTCCARoCAQAwDQYJKoZIhvcNAQEEBQAwITELMAkGA1UEBhMCc2UxEjAQBgNV\
        BAMTCUlLRUxBQiBDQTAeFw0wMDAxMjgxNzQyMTZaFw0wMTAxMjcxNzQyMTZaMCEx\
        CzA                $B$3$NItJ,$O%f!<%6>ZL@@=q$G$9(B               AQEB\
        BQA                                                         IUuz\
        eOW8P5UGJUH2JVkiA2CTDryFf0CHYwd2P003dtVYw5RvET7XLMpRZiCcWtBdxneW\
        ct+016zUBP/cQMMl+KownxAUq9ezA8GvTyUWC97SOMOgoVj/QR3FHmEjpUi3AgMB\
        AAEwDQYJKoZIhvcNAQEEBQADgYEALGShaAxHvGncev0iFnKrJI4x5T4vlaMP1ad+\
        iWLV5q9H3wickVGN0NPerq0YLwx/VA9WaecYN8V+ALtNKYPuDiT11zwvE8GQeaai\
        NuzgmQ9hh3GifEgN9VEiC3j4kTytonKr0Q+vTLM7xYzheOxvrtUErRwZ9Xs1KzHe\
        yiXHSU8=&quot;
conditions: app_domain == &quot;IPsec policy&quot; &amp;&amp;
            esp_present == &quot;yes&quot; &amp;&amp;
            esp_enc_alg != &quot;null&quot; -&gt; &quot;true&quot;;
</pre></blockquote>

<p>
$B$5$F!"%f!<%6$N?t$,B?$1$l$P!"$3$NJ}K!$KLdBj$,$"$k$3$H$O4{$K$*$o$+$j$N$3$H$H;W$$$^$9!#(B
isakmpd $B$,(B CA- $B%G%#%l%/%H%j$H(B Certificate
$B%G%#%l%/%H%j$+$iFI$_9~$`>ZL@@=q$H!"%T%"$+$iAw?.$5$l$k>ZL@@=q$H$O!"(B
$B5?;w;q3J>ZL@@(B (credentials) $B$KJQ49$5$l$^$9!#$3$&$7$?5?;w;q3J>ZL@@$KJQ49$5$l$?>ZL@@=q$O!"(B
$B0J2<$N$h$&$J$b$N$G$9!#(B

<blockquote><pre>

authorizer: &quot;x509-base64:\
        MIIBsTCCARoCAQAwDQYJKoZIhvcNAQEEBQAwITELMAkGA1UEBhMCc2UxEjAQBgI2\
    	CzA   $B$3$NItJ,$O%f!<%6>ZL@@=q(B ($B$D$^$j(BCA$B>ZL@@=q(B) $B$K=pL>$7$?(B    AQEB\
        BQA               $B%f!<%6$N8x3+80(B/$B>ZL@@=q$G$9(B                 IUuz\
        eOW8P5UGJUH2JVkiA2CTDryFf0CHYwd2P003dtVYw5RvET7XLMpRZiCcWtBdxneW\
        ct+016zUBP/cQMMl+KownxAUq9ezA8GvTyUWC97SOMOgoVj/QR3FHmEjpUi3AgMB\
        AAEwDQYJKoZIhvcNAQEEBQADgYEALGShaAxHvGncev0iFnKrJI4x5T4vlaMP1ad+\
        iWLV5q9H3wickVGN0NPerq0YLwx/VA9WaecYN8V+ALtNKYPuDiT11zwvE8GQeaai\
        NuzgmQ9hh3GifEgN9VEiC3j4kTytonKr0Q+vTLM7xYzheOxvrtUErRwZ9Xs1KzHe\
        yiXHSU8=&quot;
licensees:  &quot;x509-base64:\
        MIIBsTCCARoCAQAwDQYJKoZIhvcNAQEEBQAwITELMAkGA1UEBhMCc2UxEjAQBgNV\
        BAMTCUlLRUxBQiBDQTAeFw0wMDAxMjgxNzQyMTZaFw0wMTAxMjcxNzQyMTZaMCEx\
        CzA          $B$3$NItJ,$O>ZL@@=q$r<u$1$kB&$N80$G$9!!(B           AQEB\
        BQA                                                         IUuz\
        eOW8P5UGJUH2JVkiA2CTDryFf0CHYwd2P003dtVYw5RvET7XLMpRZiCcWtBdxneW\
        ct+016zUBP/cQMMl+KownxAUq9ezA8GvTyUWC97SOMOgoVj/QR3FHmEjpUi3AgMB\
        AAEwDQYJKoZIhvcNAQEEBQADgYEALGShaAxHvGncev0iFnKrJI4x5T4vlaMP1ad+\
        iWLV5q9H3wickVGN0NPerq0YLwx/VA9WaecYN8V+ALtNKYPuDiT11zwvE8GQeaai\
        NuzgmQ9hh3GifEgN9VEiC3j4kTytonKr0Q+vTLM7xYzheOxvrtUErRwZ9Xs1KzHe\
        yiXHSU8=&quot;
conditions: app_domain == &quot;IPsec policy&quot; -&gt; &quot;true&quot;;
</pre></blockquote>

<p>
$B$5$F!"$3$l$i$O(B &quot;POLICY&quot; $B$KG'$a$i$l$?$b$N$G$O$"$j$^$;$s$N$G!"(B
$B$=$l$r2?$i$+$N7A$GG'CN$9$k(B policy $B$,$J$1$l$P%@@%a$@@$H$$$&$3$H$KCm0U$7$F$/$@@$5$$!#(B
$B$5$i$K!"$3$l$OFbIt$G>ZL@@=q$,$I$N$h$&$K$J$C$F$$$k$N$+$r@@bL@@$7$F$$$k$N$G$9!#(B
$B>e5-$N;q3J>ZL@@(B (credential) $B$O!"(Bpolicy $B%U%!%$%k$NCf$K$O8+$i$l$^$;$s!#$7$+$7!"$=$N$h$&$J(B
$B;q3J>ZL@@$K$b%5%V%i%$%;%s%9$O=P$;$k$N$G$9!#>e5-$N%5%V%i%$%;%s%9H/9T$r;W$$$@@$7$F$/$@@$5$$!#(B
$B$=$l$r;HMQ$7!"(BCA $B>ZL@@=q$r%i%$%;%s%9$H$7$F(B &quot;POLICY&quot; $B$K5-=R$9$l$P!"(B
$B$"$k(B CA $B$,=pL>$7$?>ZL@@=q$9$Y$F$K%i%$%;%s%9$,=P$;$k$3$H$K$J$k$N$G$9!#(B

<blockquote><pre>
keynote-version: 2
comment: This is an example of a policy delegating to a key.
authorizer: &quot;POLICY&quot;
licensees: &quot;x509-base64:\
        MIIBsTCCARoCAQAwDQYJKoZIhvcNAQEEBQAwITELMAkGA1UEBhMCc2UxEjAQBgNV\
        BAMTCUlLRUxBQiBDQTAeFw0wMDAxMjgxNzQyMTZaFw0wMTAxMjcxNzQyMTZaMCEx\
        CzA                 $B$3$NItJ,$,(B CA $B>ZL@@=q$G$9(B                AQEB\
        BQA                                                         IUuz\
        eOW8P5UGJUH2JVkiA2CTDryFf0CHYwd2P003dtVYw5RvET7XLMpRZiCcWtBdxneW\
        ct+016zUBP/cQMMl+KownxAUq9ezA8GvTyUWC97SOMOgoVj/QR3FHmEjpUi3AgMB\
        AAEwDQYJKoZIhvcNAQEEBQADgYEALGShaAxHvGncev0iFnKrJI4x5T4vlaMP1ad+\
        iWLV5q9H3wickVGN0NPerq0YLwx/VA9WaecYN8V+ALtNKYPuDiT11zwvE8GQeaai\
        NuzgmQ9hh3GifEgN9VEiC3j4kTytonKr0Q+vTLM7xYzheOxvrtUErRwZ9Xs1KzHe\
        yiXHSU8=&quot;
conditions: app_domain == &quot;IPsec policy&quot; &amp;&amp;
            esp_present == &quot;yes&quot; &amp;&amp;
            esp_enc_alg != &quot;null&quot; -&gt; &quot;true&quot;;
</pre></blockquote>

<p>
$B$D$^$j!">e$N(B policy $B$O(B CA $B$K8"8B0Q>y$9$k(B policy $B$N4JC1$JNc$J$N$G$9!#(B
$B$3$N>ZL@@=q$r;}$D(B CA $B$,=pL>$7$?>ZL@@=q$r;}$A!"(B
policy $B$H@@_Dj%U%!%$%k$N@@_Dj$7$?B>$N>r7o$K$b(B
$B=>$&%f!<%6$O$9$Y$FG'$a$i$l$k$N$G$9!#(B


<h2>$B$[$H$s$I0BA4!D!D$O0BA4$K$"$i$:(B !</h2>

<p>
$B$5$F!"K\Ev$K0BA4$r4|$9$k$J$i!"$3$l$G$O;DG0$J$,$i==J,$G$O$"$j$^$;$s!#(B
$B$3$N$h$&$J@@_Dj$N%;%-%e%j%F%#%2!<%H%&%'%$$r967b$9$kJ}K!$,$"$k$N$G$9!#(B
$B$b$7!"$=$N$h$&$J:Y!9$H$7$?OC$,ITMW$G$7$?$i!"<!@@a$^$GFI$_Ht$P$7$F$/$@@$5$$!#(B
$B$=$l0J30$N?M$?$A$O!"$J$<$3$l$,0BA4$G$O$J$$$N$+$rM}2r$7$F$_$^$7$g$&!#(B
$B$`$:$+$7$$$3$H$G$O$"$j$^$;$s!#(B

<p>
$B$3$NCJ3,$G!"(Bisakmpds $B$,$I$N$h$&$J>pJs$K%"%/%;%9$G$-$k$N$+$r9M$($F$/$@@$5$$!#(B
$B@@_Dj%U%!%$%k$+$i!"(Bisakmpd $B$O%T%"$,$I$N(B IP $B%"%I%l%9$+$i(B
$BAw?.$7$F$/$k$N$+$rCN$C$F$$$^$9(B ([$B%U%'!<%:(B 1] $B%;%/%7%g%s$G(B)$B!#%U%'!<%:(B 1 $B$N(B
$B%M%4%7%(!<%7%g%s$N:]$KF@@$i$l$k>pJs$+$i!"%T%"$,$I$N$h$&$J(B ID $B$r(B
$B=P$7$F$/$k$N$+$b$o$+$j$^$9$7!"%T%"$+$i$N>ZL@@=q$r$b$i$&$3$H$G%T%"$,K\Ev$K(B
$B$=$N(B ID $B$r;}$D$3$H$,>ZL@@$5$l$k$N$G$9!#$3$3$^$G$OLdBj$J$5$=$&$G$9$M(B ?

<p>
$B$=$&$G$9!"$b$7(B ID $B>pJs$,(B IP $B$J$i$P(B ($B%U%'!<%:(B 1 $B$N(B ID $B%;%/%7%g%s$r;H$o$J$1$l$P(B
$B$3$l$,%G%U%)%k%H$K>u67$K$J$j$^$9(B) $B$9$Y$FLdBj$"$j$^$;$s!#(BCA
$B$O$=$N(B IP $B$r(B cert $B$K7k$S$D$1$F!"@@_Dj$NCf$N(B IP
$B$@@$1$GI,MW>pJs$O$9$Y$F$=$m$$$^$9!#$J$j$9$^$7HH$,!"$[$+$N%3%s%T%e!<%?$+$i(B
$BF1$8(B IP $B$r;HMQ$9$k$3$H$bIT2DG=$G$O$"$j$^$;$s$,(B
($B$?$H$($P!"N>J}$N%3%s%T%e!<%?$,F1$8(B LAN $B>e$K$"$C$F!"(B
$BIaCJ$=$N(B IP $B$r;HMQ$7$F$$$k%^%7%s$,2?$i$+$NM}M3$G%@@%&%s$7$F$$$k$J$I(B)$B!"(B
$B$J$j$9$^$7HH$,>ZL@@=q$H$=$l$KBP1~$9$kHkL)80$r;}$C$F$*$j!"(B
$B$=$N(B IP $B$,$J$j$9$^$7HH$N$b$N$@@$H(B ($BIT@@5$K(B) $B>ZL@@$9$k$3$H$O(B
$BIT2DG=$J$O$:$G$9!#(B

<p>
$B$7$+$7$b$7!"$=$l$,K|0l5/$-$F$7$^$C$?$i!"$=$N$J$j$9$^$7HH$O$=$N(B IP $B$N(B
$B=jM-<T$+$iHkL)80$r2?$i$+$NJ}K!$GEp$s$@@$+!"$"$k$$$O(B CA $B$r2?$i$+$NJ}K!$GqY$7$F!"(B
$B56$N>pJs$r4^$`>ZL@@=q$rH/9T$5$;$?$+$N$I$A$i$+$H$$$&$3$H$K$J$j$^$9!#(B
$B$b$7!"$3$N$$$:$l$+$,5/$-$?$J$i!"(B
$BHkL)80$NJ]8n$,IT==J,$@@$C$?$N$+!"(BCA $B$,(B
$B$J$j$9$^$7HH$N?H85(B ($B$"$k$$$O(B cert $B$N(B ID $B>pJs(B) $B$r==J,$K%A%'%C%/$G$-$J$+$C$?$N$+!"(B
$B$"$k$$$O(B CA $BHkL)80$,==J,$KJ]8n$5$l$F$$$J$+$C$?$N$+!"$N$$$:$l$+$J$N$G$9!#(B
$B$3$l$i$O$9$Y$F!"$=$b$=$b%;%-%e%j%F%#$,$^$H$b$K5!G=$9$kA0Ds$G$9$N$G!"(B
$B$3$N$h$&$J>u67$O@@dBP$K5/$-$F$O$$$1$J$$$3$H$G$9!#(B

<p>
$B$5$F!";d$?$A$NNc$G$O>u67$,0[$J$j$^$9!#$3$3$G$O(B
$B>ZL@@=q$NCf$K!"(BIP $B%"%I%l%9$G$O$J$/(B FQDN $B$,F~$C$F$$$^$9!#(B
[Phase 1] $B%;%/%7%g%s$K$^$@@(B IP $B%"%I%l%9$,$"$j$^$9$N$G!"(B
$B$3$l$O%;%-%e%j%F%#LdBj$H$J$k2DG=@@-$,$"$k$b$N$G$9!#$3$N>l9g!"(BISAKMP
$B%U%'!<%:(B 1 $B%M%4%7%(!<%7%g%s$N4V$K2?$,5/$-$k$+$H$$$&$H!"%T%"$,(B
$B4|BT$I$*$j$N(B IP $B$+$iAw$i$l$F$-$?$3$H$r%A%'%C%/$G$-$k$N$G$9(B ($B$7$+$7!"$5$-$[$I@@bL@@$7$?$h$&$K!"(B
$B$3$l$O0lIt$N>u67$G$O56$k$3$H$,$G$-$k$3$H$G$9(B)$B!#$^$?!"%T%"$,Ds<($9$k(B ID $B$r!"(B
$BK\Ev$K$=$N%T%"$,;}$C$F$$$k$3$H$b%A%'%C%/$G$-$^$9!#(B
$B$7$+$7!":#!"%A%'%C%/$G$-$J$$$N$O!"$=$N(B ID $B$,K\Ev$K$=$N%T%"$,;}$C$F$$$k$b$N$H4|BT2DG=$J(B ID $B$J$N$+!"(B
$B$H$$$&$3$H$G$9!#(Bisakmpd $B$O!"$I$N$h$&$J(B ID $B$r4|BT$9$l$P$$$$$N$+$K$D$$$F$O0lEY$b65$($i$l$F$$$J$$$+$i$G$9!#(B

<p>
DNS $B%7%9%F%`$,%[%9%H$N$?$a$K(B IP $B$H(B FQDN $B$H$r7k$S$D$1$F$/$l$k!"(B
$B$H$$$&?M$b$$$k$3$H$G$7$g$&!#3N$+$K$=$&$J$N$G$9$,!"8=:_$N(B DNS $B%7%9%F%`$O%;%-%e%j%F%#$,$"$^$j9b$/$O$"$j$^$;$s$7!"(B
$BqY$7$F56$N>pJs$r=P$5$;$k$3$H$b!">l9g$K$h$C$F$O(B
$B$G$-$F$7$^$$$^$9(B ($B$"$k$$$O%5!<%S%95qH](B (DoS) $B967b$r(B
$B967b<T$K<u$1$F!"$=$N967b<T$N%^%7%s$,(B DNS $B%5!<%P$NEz$r(B
$B56B$$9$k$3$H$b$G$-$F$7$^$$$^$9(B)$B!#$$$:$l9b%;%-%e%j%F%#(B DNS $B$bEP>l$9$kM=Dj$G$9$,!"(B
$B$^$@@=P2s$C$F$O$$$^$;$s$7(B ($B>/$J$/$H$b$[$H$s$I$N(B DNS $B%5!<%P$O$^$@@9b%;%-%e%j%F%#$G$O$"$j$^$;$s(B)$B!"(B
$B$G$9$+$i8=:_!"(Bcert $B$N(B FQDN $B$,4|BT$5$l$k(B IP $B$HBP1~$7$F$$$k$+$I$&$+$rD4$Y$k$N$K(B
DNS $B$r;HMQ$7$F$bJ]>Z$K$O$J$j$^$;$s!#<B$O(B isakmpd $B$O$3$l$r(B DNS $B$KJ9$$$?$j$O$7$^$;$s!#(B
DNS $B$,0BA4$G$b!"(BUFQDN $B$r;HMQ$7$F$$$k>l9g$K$O(B
$B$3$l$r%A%'%C%/$G$-$J$$$+$i$G$9!#(B

<p>
$B$D$^$j!"(BID $B$H$7$F(B FQDN $B$r;HMQ$9$k>l9g!"967b<T$O(B
$B<+J,$NHkL)80$rMQ0U$7$F!"$=$l$r;d$?$A$N;HMQ$9$k$N$H(B
$BF1$8(B CA $B$K=pL>$5$;$^$9(B ($B$G$b$b$A$m$s967b<T<+?H$N(B FQDN $B$r;HMQ$7$F(B)$B!#(B
$B$=$7$F!"%T%"$K(B DoS $B967b$r$7$+$1$F%@@%&%s$5$;$^$9(B ($B<B$O(B
ISAKMP $B%W%m%H%3%k<+BN$K7g4Y$,$"$k$?$a!"%T%"$KBP$7$F(B
$B%j%b!<%H(B DoS $B$r;E3]$1$F%@@%&%s$5$;$F$7$^$&2DG=@@-$,$"$j$^$9$,!"(B
isakmpd $B$,$3$N$h$&$J967b$KBP$7$F$I$N$/$i$$IR46$+$OCN$j$^$;$s(B)$B!#(B
$B$=$7$F!"967b<T$O<+J,$N%3%s%T%e!<%?$r;d$?$A$N%T%"$HF1MM$K@@_Dj$7$F!"(B
$B%T%"$N%M%C%H%o!<%/$K@@\B3$7$F(B
$B<+J,$N(B ID $B$HHkL)80$H>ZL@@=q$r;HMQ$G$-$^$9!#(B

<p>
$B;d$?$A$NB&$N(B isakmpd $B$O!"$3$A$i$N%T%"$X$N(B ID $B$,2?$+$r65$($i$l$F$$$^$;$s(B ($B$=$7$F$=$l$O!"967b<T$,(B
$B>ZL@@=q$H(B ID $B$HHkL)800J30$O$^$C$?$/F1$8@@_Dj$K$7$F$*$$$?$+$i$G$9(B)$B!#$5$i$K!";d$?$A$N(B
isakmpd $B$O>ZL@@=q$,F1$8(B CA $B$N%5%$%s$7$?$b$N$@@$H%A%'%C%/$G$-$^$9(B ($B$7$+$7!"(B
$BB?$/$N(B CA $B$O(B cert $B$rB??t$N%5%$%s$r$7$^$9$N$G!"(Bcert $B$r<j$KF~$l$k$N$O:$Fq$G$O$J$$$+$bCN$l$^$;$s(B)$B!#(B
$B$=$7$F!"$=$3$G<($5$l$?(B ID $B$,>ZL@@=q$NCf$N(B ID $B$HF1$8$G$"$k$3$H$b3NG'$G$-$^$9!#$7$+$7!"(B
$B$3$l$^$GDs<($5$l$?@@_Dj$G$O!"$=$N(B ID $B$,4|BT$7$F$$$?(B ID $B$+$I$&$+$O%A%'%C%/$G$-$^$;$s!#(B
$B$G$9$+$i!"967b<T$O@@\B3$rG'$a$i$l$F$7$^$&$N$G$9!#(B


<h3>$B967b$rKI$0(B</h3>

<p>
$B$D$^$j!"LdBj$O!"$I$N$h$&$K$9$l$P(B isakmpd $B$K4|BT$9$Y$-(B ID $B$N$3$H$r65$($i$l$k$+!"(B
$B$H$$$&$3$H$K$J$j$^$9!#9,1?$K$b$3$l$O4JC1$J$3$H$G!"(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.policy&amp;sektion=5">isakmpd.policy(5)</a>
$B$K$b@@bL@@$5$l$F$$$^$9!#$?$H$($P0J2<$N$h$&$K!"(B
policy $BFb$G%A%'%C%/$7$J$1$l$P$J$i$J$$$N$G$9!#(B

<blockquote><pre>
keynote-version: 2
comment: This is an example of a policy delegating to a key.
authorizer: &quot;POLICY&quot;
licensees: &quot;x509-base64:\
        MIIBsTCCARoCAQAwDQYJKoZIhvcNAQEEBQAwITELMAkGA1UEBhMCc2UxEjAQBgNV\
        BAMTCUlLRUxBQiBDQTAeFw0wMDAxMjgxNzQyMTZaFw0wMTAxMjcxNzQyMTZaMCEx\
        CzA                 $B$3$NItJ,$,(B CA $B>ZL@@=q$G$9(B                AQEB\
        BQA                                                         IUuz\
        eOW8P5UGJUH2JVkiA2CTDryFf0CHYwd2P003dtVYw5RvET7XLMpRZiCcWtBdxneW\
        ct+016zUBP/cQMMl+KownxAUq9ezA8GvTyUWC97SOMOgoVj/QR3FHmEjpUi3AgMB\
        AAEwDQYJKoZIhvcNAQEEBQADgYEALGShaAxHvGncev0iFnKrJI4x5T4vlaMP1ad+\
        iWLV5q9H3wickVGN0NPerq0YLwx/VA9WaecYN8V+ALtNKYPuDiT11zwvE8GQeaai\
        NuzgmQ9hh3GifEgN9VEiC3j4kTytonKr0Q+vTLM7xYzheOxvrtUErRwZ9Xs1KzHe\
        yiXHSU8=&quot;
conditions: app_domain == &quot;IPsec policy&quot; &amp;&amp;
            esp_present == &quot;yes&quot; &amp;&amp;
            esp_enc_alg != &quot;null&quot; &amp;&amp;
            remote_id == &quot;gw.worksite.se&quot; -&gt; &quot;true&quot;;
</pre></blockquote>

<p>
$B$3$l$G!"(BIPsec $B@@\B3$,2DG=$K$J$k$N$O(B gw.worksite.se $B$@@$1$K$J$C$?$O$:$G$9!#(B
$BB>$K(B remote_id $B$N%A%'%C%/$rB-$;$P!"5v2D$9$k(B ID $B$r4JC1$KA}$d$9$3$H$,$G$-$^$9!#(B
$B$D$^$j0J2<$NNc$N$h$&$J(B ID $B$r(B policy $B$KB-$;$PNI$$$N$G$9!#(B

<blockquote><pre>
conditions: app_domain == &quot;IPsec policy&quot; &amp;&amp;
            esp_present == &quot;yes&quot; &amp;&amp;
            esp_enc_alg != &quot;null&quot; &amp;&amp;
            (remote_id == &quot;gw.worksite.se&quot;  ||
               remote_id == &quot;gw.whatsite.se&quot;) -&gt; &quot;true&quot;;
</pre></blockquote>

<p>
$B$3$N(B policy $B$N>l9g!"(Bgw.worksite.se$B!"(Bgw.somesite.se$B!"(B
gw.whatsite.se $B$N$$$:$l$b@@\B3$G$-$k$3$H$K$J$j$^$9!#(B

<p>
policy $B$K>ZL@@=q$r$9$Y$F4^$a$J$/$F$O$J$i$J$$$N$O;DG0$@@!"(B
$B$H;W$&?M$b$$$k$3$H$G$7$g$&!#>ZL@@=q$r(B policy $B$K(B
$BF~$k$h$&$J7A<0$KJQ99$9$k$N$O<j4V$G$9$7!"(B
policy $B$bFI$_$K$/$/$J$k$+$i$G$9!#$^$?!"4V0c$C$F!"(B
$BJ#;($J(B policy $B$NCf$G!"(BCA $B>ZL@@=q$H4V0c$($F(B
$B%f!<%6>ZL@@=q$rF~$l$F$7$^$C$?$j$7$h$&$b$N$J$i!"8"8B$N$J$$%f!<%6$b(B
$B@@\B3$,G'$a$i$l$F$7$^$&$+$bCN$l$^$;$s$7!"$5$i$K:$$C$?$3$H$K$O!"(B
policy $B%U%!%$%k$r8+$F$b$=$l$r$D$-$H$a$k$N$OFq$7$$$N$G$9(B ($B$3$l$O!"(B
X.509 $B>ZL@@=q$,?M4V$KFI$a$k7A$G$O$J$$$+$i$G$9(B)$B!#(B

<p>
$B$5$F!"K\Ev$K:G@@hC<$N?M$?$A$K$O!"$3$NLdBj$N2r7hJ}K!$,$"$k$N$G$9!#(B
$B:#$G$O!"(Bpolicy $BFb$G>ZL@@=q$=$N$b$N$N$+$o$j$K!"(B
$B>ZL@@=q$N(B Distinguished Name (DN) $B$r;HMQ$9$k$3$H$,$G$-$k$+$i$G$9(B
($BBP1~$9$k>ZL@@=q$O$b$A$m$s%G%#%9%/>e$N(B certs $B$+(B ca $B%G%#%l%/%H%j$K$"$j!"(B
isakmpd $B$,8+$D$1$i$l$k$h$&$K$J$C$F$$$k$3$H$,I,MW$G$9(B)$B!#(B
$B$3$N7A<0$G$9$H!">e5-$N(B policy $B$O0J2<$N$h$&$J$b$N$K$J$k$O$:$G$9!#(B

<blockquote><pre>
keynote-version: 2
comment: This is an example of a policy delegating to a key.
authorizer: &quot;POLICY&quot;
licensees: &quot;DN:/C=se/CN=IKELAB CA&quot;
conditions: app_domain == &quot;IPsec policy&quot; &amp;&amp;
            esp_present == &quot;yes&quot; &amp;&amp;
            esp_enc_alg != &quot;null&quot; &amp;&amp;
            (remote_id == &quot;gw.worksite.se&quot;  ||
             remote_id == &quot;gw.somesite.se&quot;  ||
             remote_id == &quot;gw.whatsite.se&quot;) -&gt; &quot;true&quot;;
</pre></blockquote>

<p>
$B$+$J$jFI$_$d$9$/$J$j$^$7$?$h$M(B !?  $B$"$k>ZL@@=q$N@@53N$J(B DN $B$O!"(B
openssl $B%f!<%F%#%j%F%#$r;HMQ$7$F>ZL@@=q$r8+$k$H!"<!$N$h$&$K(B
$B$o$+$j$^$9!#(B

<blockquote><tt>
$ <b>openssl x509 -text &lt; ca.crt</b>
</tt></blockquote>

<p>
$B$5$i$KJ#;($J(B policy $B$b$b$A$m$s:n@@.$G$-$^$9$,!"(B
$B$3$l$O$H$j$"$($:F~Lg$G$9$7!"<!$N@@a$GJL$NNc$r8+$F(B
$B:n@@.$9$k$3$H$K$J$j$^$9!#(B

<p>
$B$3$l$G(B ca.crt $B$NCf$N>ZL@@=q$K$D$$$FI,MW$J>pJs$,(B
$BDs6!$5$l$k$O$:$G$9$M!#(Bpolicy $B$,>.$5$$$+!"$=$3$=$3$/$i$$Bg$-$5$G$7$?$i!"(B
$B$3$l$G$bNI$$$G$7$g$&!#$7$+$7!"5pBg$J%5%$%H$G@@\B3%f!<%6$,Hs>o$KB??t$$$k>l9g$K$O(B
$B$3$l$G$b$^$@@$^$@@$G$7$g$&!#(B


<h2>$B%^%k%A%f!<%6@@_Dj$H!"Cf1{4IM}7?G'>Z(B</h2>

<p>
$B$=$l$G$O!"(Bisakmpd $B$NK\Ev$K%/!<%k$J5!G=$r$$$/$D$+8+$F$_$^$7$g$&!#$3$l$^$G$O!"(B
$B@@\B3$7$F$/$k$O$:$N%T%"$O$h$/CN$i$l$F$$$F!"(BIP $B%"%I%l%9$b@@EE*$K8GDj$5$l$F$$$k$b$N$H$7$^$7$?!#(B
$B$7$+$7!"$=$N$h$&$J>l9g$P$+$j$G$O$"$j$^$;$s!#F0E*$K3d$jEv$F$i$l$?(B IP $B$r;HMQ$7$F$$$?$j!"(B
$B%3%s%T%e!<%?$r2?Bf$b;HMQ$7$F$$$?$j$9$k?M$OB?$$$N$G$9!#$"$k$$$O(B ($B%5!<%P(B
$BEy$N$h$&$K(B) $B@@\B3$7$?$$$N$,C/$G$"$k$N$+!"$O$C$-$j$H$O$o$+$i$J$$>l9g$b$"$j$^$9!#(B

<p>
$B$=$3$G(B isakmpd $B$NAG@@2$7$$5!G=$N$R$H$D$O!"(B
[Phase 1] $B%;%/%7%g%s$G(B IP $B$G$O$J$/!"%G%U%)%k%H$N%?%0$r;HMQ$G$-$k$H$$$&$b$N$G$9!#(B
$B$=$l$K$h$j!"(Bisakmpd $B$O$I$N(B IP $B$+$i$G$b%M%4%7%(!<%7%g%s$r<u$1IU$1$i$l$k$h$&$K$J$j$^$9!#(B
$B$3$NNc$r0J2<$K<($7$^$9!#(B

<blockquote><pre>
[phase 1]
Default=        work-gw
</pre></blockquote>

<p>
$B$^$:8@@$C$F$*$+$J$1$l$P$J$i$J$$$3$H$O!"$3$N@@_Dj$O(B DoS $B967b$KBP$7$F$O(B
$B0BA4$G$O$J$$$+$bCN$l$J$$$H$$$&$3$H$G$9!#A0=R$7$?$h$&$K!"(B
ISAKMP/IKE $B%W%m%H%3%k$K$O7g4Y$,$"$k$+$i$G$9!#$$$:$l$K$;$h!"%G%U%)%k%H$N(B
[phase 1] $B%;%/%7%g%s$r;HMQ$9$l$P!"0l<o$N!VG'>Z>ZL@@=q!W$,Be$o$j$K;HMQ2DG=$K$J$j$^$9!#(B

<p>
$B$?$H$($P!"8"8B$r;}$D%f!<%6$,B??t$$$k$b$N$N!"C/$G$bH`$G$b<u$1IU$1$k!"(B
$B$H$$$&$o$1$G$O$J$$>l9g$r9M$($F$_$^$7$g$&!#$?$H$($P!"2q<R$N>l9g$G$9!#(B
$B2q<R$N=>6H0w$O@@\B3$5$;$?$$$,!"$=$l0J30$N?M$K$O@@\B3$7$F$[$7$/$J$$>l9g$G$9!#(B
$B$5$F!"Bg4k6H$G<R0w$,2?@@i?M$b$$$k$H$7$^$9!#H`$i$,$I$N%3%s%T%e!<%?$+$i$G$b(B
($B<RFb(B LAN $B>e$N$b$N$K8B$i$:(B) $B@@\B3$G$-$k$h$&$K$7$?$$$,!"(B
$BA40w$,2?$G$b$G$-$k$h$&$K$O$7$?$/$O$"$j$^$;$s!#$3$N$h$&$J>l9g!"(B
$B0J2<$N$h$&$J(B policy $B$,=q$1$k$O$:$G$9!#(B

<blockquote><pre>
keynote-version: 2
authorizer: &quot;POLICY&quot;
licensees: &quot;telnet@@work&quot; || &quot;telnet@@lab&quot; || &quot;pop3@@work&quot; 
conditions: app_domain == &quot;IPsec policy&quot; &amp;&amp;
            esp_present == &quot;yes&quot; &amp;&amp;
            esp_enc_alg != &quot;null&quot; &amp;&amp;
            remote_id_type == &quot;UFQDN&quot; &amp;&amp;
            (remote_id == &quot;telnet@@worksite.se&quot;  ||
             remote_id == &quot;pop3@@worksite.se&quot;  ||
             remote_id == &quot;telnet@@lab.worksite.se&quot;) -&gt; &quot;true&quot;;

authorizer: &quot;telnet@@work&quot;
licensees: &quot;DN:/C=se/CN=IKELAB CA&quot;
conditions: remote_id == &quot;telnet@@worksite.se&quot; &amp;&amp;
            local_filter_type == &quot;IPv4 address&quot; &amp;&amp;
            local_filter_port == &quot;23&quot; &amp;&amp;
            local_filter == &quot;192.168.002.003&quot;

authorizer: &quot;telnet@@lab&quot;
licensees: &quot;DN:/C=se/CN=IKELAB CA&quot;
conditions: remote_id == &quot;telnet@@lab.worksite.se&quot; &amp;&amp;
            local_filter_type == &quot;IPv4 address&quot; &amp;&amp;
            local_filter_port == &quot;23&quot; &amp;&amp;
            local_filter == &quot;192.168.002.002&quot; -&gt; &quot;true&quot;;

authorizer: &quot;pop3@@work&quot;
licensees: &quot;DN:/C=se/CN=IKELAB CA&quot;
conditions: local_filter_type == &quot;IPv4 address&quot; &amp;&amp;
            local_filter_port == &quot;110&quot; &amp;&amp;
            local_filter == &quot;192.168.002.003&quot; &amp;&amp;
            remote_id == &quot;telnet@@worksite.se&quot; -&gt; &quot;true&quot;;

</pre></blockquote>

<p> 
$B$3$l$,87L)$K@@5$7$$$+$I$&$+$O$o$+$j$^$;$s!#;d$,CN$k8B$j!"(B
$B$3$l$O$^$C$?$/%F%9%H$5$l$F$$$J$$$+$i$G$9(B ($B$G$9$+$i!"$3$N%U%#%k%?>r7o$O!";d$N;W$$$I$*$j$K$O(B
$B$<$s$<$sF0$+$J$$$+$bCN$l$^$;$s(B)$B!#$^$?!"$3$N$h$&$J(B policy ($B498@@$9$l$P!"%G%U%)%k%H$r%T%"$N(B
IP $B$H$7$F$$$k$b$N$9$Y$F$G$9(B) $B$O!"(Bisakmpd.conf $B%U%!%$%k$b9g$o$;$F=q$-49$($J$1$l$P(B
$B$J$j$^$;$s$@@!#$3$l$K$O!"%;%-%e%j%F%#>e$NLdBj$b$D$$$F$^$o$j$^$9!#$5$i$K!"(B
$BC/$G$b@@\B3$G$-$k$h$&$K$J$C$F$$$k$3$N<o$N@@\B3$G$O!"(B
$B$?$V$s@@\B3$7$??M$N(B DN $B$O$9$Y$F%m%.%s%0$7$F$*$/$[$&$,K>$^$7$$$G$7$g$&!#(B
isakmpd $B$O;d$NCN$k8B$j$G$O!"$3$l$r$^$@@%5%]!<%H$7$F$$$^$;$s!#$5$i$K$O!"(B
$B$3$N2DG=@@-$K$OJL$N%;%-%e%j%F%#>e$NLdBj$,$"$k2DG=@@-$b$"$j$^$9!#$9$Y$F$O(B
$B<+8J@@UG$$K$F<B;\$7$F$/$@@$5$$!#$7$+$7!"4pK\E*$J9M$(J}$O$b$&$O$C$-$j$7$F$$$k$O$:$G$9!#(B

<p> 
$B$3$l$,;}$D!"<B$K$*$b$7$m$$2DG=@@-$K;W$$Ev$?$i$J$$?M$,$$$k$+$bCN$l$^$;$s$N$G!"G0$N$?$a$K@@bL@@$7$F$*$-$^$7$g$&!#(B
$B$b$7!"$3$N$h$&$J7A$G(B ISAKMP/IKE $B$r;HMQ$7$F$$$k%3%s%T%e!<%?$,$9$Y$F!"(B
$B%j%b!<%H$+$i%f!<%6$,;HMQ$7$?$$$H;W$&%5!<%S%9$N$=$l$>$l$K$D$$$F!"I8=`E*$J>r7o$r;}$D$b$N$H$7$^$9!#(B
$B$9$k$H(B CA $B$O!"%f!<%6$N>ZL@@=q$K$7$+$k$Y$-(B subjectAltName $B3HD%$r(B
$BF~$l$F$*$/$@@$1$G$=$N%f!<%6$NG'>Z$,$G$-$k$h$&$K$J$j$^$9!#$5$i$K!"$=$N$h$&$J>ZL@@=q$NM-8z4|8B$r(B
$BHf3SE*C;$$$b$N$K$7$F$*$$$F!"%f!<%6$O(B
$B>ZL@@=q$,8E$/$J$C$F$-$?$i>ZL@@=q$r:FH/9T$7$F%@@%&%s%m!<%I$G$-$k$h$&$K(B
$B$7$F$*$/$N$G$9!#$b$7$b!"%f!<%6$,8"8B$r0-MQ$9$k$J$i!"(B
$B>ZL@@=q$r:FH/9T$7$J$$$h$&$K$9$l$P!"M-8z4|8B8e$OF~$C$F$/$k$3$H$,$G$-$J$/$J$j$^$9!#(B
$B$3$l$G!"<R0w$,$R$H$j$d$a$?$/$i$$$G!"(B
$B$9$Y$F$N%3%s%T%e!<%?>e$N(B policy $B%U%!%$%k$rJQ99$9$kI,MW$O$J$/$J$j$^$7$?!#(B
$BF1$8J}<0$O(B ISAKMP/IPsec $B0J30$NL\E*$K$b;H$($k$O$:$G$9(B ($B%*%U%i%$%s%7%9%F%`$NG'>Z$5$(2DG=$G$9(B !)$B!#(B
$B$?$@@$7!"$=$N>l9g$K$OFCJL$J%=%U%H$,I,MW$K$J$j$^$9$,!D!D(B
$B$H$K$+$/!"$3$N$h$&$K$7$h$&$H$9$kAH?%$O!"$*$=$i$/<+J,$G<+J,<+?H$N(B CA $B$K$J$kJ}$,NI$$$G$7$g$&!#(B

<p>
$B$3$N$h$&$J%^%k%A%f!<%6@@_Dj(B ($B%b%P%$%k%f!<%6(B) $B$O!"(B
$B;vA06&M-80$G$b2DG=$G$9$,!"$=$l$G$O!"$I$N(B IP $B$+$i@@\B3$7$F$/$k$+$o$+$j$^$;$s$+$i!"(B
ID $B$r$b$H$K@@5$7$$%Q%9%o!<%I$,A*$Y$k$h$&$K$J$C$F$$$kI,MW$,$"$j$^$9!#(B
$B$G$9$+$i!"(BID_PROT $B%b!<%I$G$O$J$/(B AGGRESSIVE $B%b!<%I$r(B
$B;HMQ$7$J$/$F$O$J$j$^$;$s(B (AGGRESSIVE $B%b!<%I$G$O!"(BID $B$O%M%4%7%(!<%7%g%s$N(B
$B=i4|$NCJ3,$GAw?.$5$l$^$9$,!"0E9f2=$5$l$:$KAw?.$5$l$^$9!#$G$9$+$i!"(B
AGGRESSIVE $B%b!<%I$NJ}$,%a%C%;!<%88r49$,>/$J$/$F:Q$_$^$9$N$G9bB.$G$9$,!"(B
ID $B$,J?J8$GAw?.$5$l$kJ,!"%;%-%e%j%F%#$O2<$,$k$3$H$K$J$j$^$9(B)$B!#(B


<p>
<a name= "IKEcl"></a>
<h2>13.9 - isakmpd $B$G;H$($k(B IKE $B%/%i%$%"%s%H$O(B ?</h2>

<p>
<tt>isakmpd</tt> $B$O!"(BOpenBSD $BImB0$N(B ISAKMP/Oakley $B804IM}%G!<%b%s$G$9!#(B
$B$*$=$i$/!"$[$H$s$I$N(B ISAKMP $B<BAu$H$O!"ItJ,E*$K$;$hAj8_1?MQ2DG=$@@$H;W$$$^$9$,!"(B
$B<B:]$K%F%9%H$5$l$?$N$O0J2<$N$b$N$G$9!#$^$?!"=P2s$C$F$$$k(B
isakmp $B%=%U%H$N0lIt$O!"<B$O(B OpenBSD isakmp $B%G!<%b%s$r%Y!<%9$K$7$?$b$N$@@$C$?$j$7$^$9!#(B

<p>
$B0J2<$N(B MS-Windows $B%/%i%$%"%s%H$O!"8_49@@-$,$"$k$H$NJs9p$,$"$j$^$9!#(B

<ul>
<!-- <li><a href="http://www.timestep.com/">TimeStep</a> PERMIT/Client -->
<li><a href="http://www.ashleylaurent.com/">Ashley Laurent</a> VPN $B%=%U%H%&%'%"(B
<li><a href="http://www.radguard.com/">Radguard</a> cIPro $B%/%i%$%"%s%H(B
<li><a href="http://www.ssh.com/">SSH Sentinel</a> IPsec $B%/%i%$%"%s%H(B
<li><a href="http://www.cisco.com/">Cisco</a> IRE $B%/%i%$%"%s%H(B
<li><a href="http://www.microsoft.com">Microsoft</a> Windows 2000$B!"(BXP
</ul>

<p>
$B0J2<$N%2!<%H%&%'%$(B/$B%k!<%?$b8_49@@-$,$"$k$H$NJs9p$,$"$j$^$9!#(B

<ul>
<li><a href="http://www.cisco.com/">Cisco</a> IOS
<li><a href="http://www.cisco.com/">Cisco</a> PIX
<li><a href="http://www.intel.com/">Intel</a> LanRover
<!-- <li><a href="http://www.timestep.com/">TimeStep</a> PERMIT/Gate -->
<li><a href="http://www.cendio.com/">Cendio</a> Fuego
<li><a href="http://www.kame.net/">KAME</a> for FreeBSD
<li><a href="http://www.xs4all.nl/~freeswan/">FreeS/WAN</a> for Linux
<li><a href="http://www.symantec.com/">Symantec</a> Raptor
<li><a href="http://www.ericsson.com/">Ericsson</a> eBox
<li><a href="http://www.f-secure.com/">F-Secure</a> VPN+
<li><a href="http://www.teamware.com/">Teamware</a> TWISS
<li><a href="http://www.3com.com/">3com</a> Pathbuilder
<li><a href="http://www.nortelnetworks.com/">Nortel</a> Contivity
<li><a href="http://www.checkpoint.com/">CheckPoint</a> FW-1
<li><a href="http://www.watchguard.com/">Watchguard</a> Firebox III
<li><a href="http://www.lucent.com/">Lucent</a> Access Point
</ul>

<p>
<a name= "Trouble"></a>
<h2>13.10 - IPsec/VPN $B$N%H%i%V%k%7%e!<%F%#%s%0(B</h2>

<p>
IPsec $B$N%H%i%V%k%7%e!<%F%#%s%0$N$?$a$N:G=i$N%D!<%k$O(B <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&amp;sektion=8">tcpdump(8)</a> $B$G$9!#(B
<tt>tcpdump</tt> $B$r;HMQ$7$F$$$/$D$+C5$9$Y$-$b$N$r5s$2$k$H!"(B

<p>
$B$^$:!"(BOpenBSD $B$N(B tcpdump $B$r;HMQ$7$F$$$k?M$O!"(B
$B3HD%HG$N(B tcpdump $B$r;HMQ$7$F$$$k$N$G!"(B
ESP $B$H(B AH $B%Q%1%C%H$K$D$$$F$b>pJs$,<h$l$^$9!#$b$7!"(BOpenBSD
2.5 $B$dB>$N(B OS $B$N(B tcpdump $B$r;HMQ$7$F$$$k$N$G$7$?$i!"$*$=$i$/8E$$(B
$B%P!<%8%g%s$G$9$+$i!"(BAH $B$d(B ESP$B$K$D$$$F$O%W%m%H%3%kHV9f$7$+I=<($5$l$^$;$s(B
(ESP $B$O(B IP $B%W%m%H%3%k(B 50$B!"(BAH $B$O(B 51)$B!#(B

<ul>
<li>
tcpdump $B$G$O!"%H%i%U%#%C%/$,(B AH/ESP $B$r;HMQ$7$F$$$k$+J?J8$N$^$^$+$r3N$+$a$^$9!#(B
$BJ?J8$N$^$^$G$7$?$i!"%U%m!<$,@@5$7$/@@_Dj$5$l$F$$$J$$$+!"(Bisakmp $B$N%M%4%7%(!<%7%g%s$,$&$^$/$$$C$F$$$^$;$s!#(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ping&amp;sektion=8">ping(8)</a>
$B$r;HMQ$7$F4JC1$J%H%i%U%#%C%/$rH/@@8$5$;$F$_$^$7$g$&!#(B
<p>
$B$?$H$($P!"(B208.1.1.1 $B$H(B 208.2.2.2 $B$N$U$?$D$N%[%9%H$,$"$k$H$7$F!"(B
208.2.2.2 $B$K(B login $B$7$F!"0J2<$r<B9T$7$F$_$^$7$g$&!#(B
<pre>
# <b>ping -c 3 208.1.1.1</b>
PING esp.mil (208.1.1.1): 56 data bytes
64 bytes from 208.1.1.1: icmp_seq=0 ttl=255 time=190.155 ms
64 bytes from 208.1.1.1: icmp_seq=1 ttl=255 time=201.040 ms
64 bytes from 208.1.1.1: icmp_seq=2 ttl=255 time=165.481 ms
--- esp.mil ping statistics ---
3 packets transmitted, 3 packets received, 0% packet loss
round-trip min/avg/max = 165.481/185.558/201.040 ms
</pre>
<p>
$BJL$N%;%C%7%g%s$G$O!"(Bencapsulated $B$5$l$?(B ping $B$,8+$i$l$^$9!#(B
<pre>
# <b>tcpdump -ni fxp7 host 208.1.1.1</b>
tcpdump: listening on fxp7
14:12:19.630274 esp 208.2.2.2 &gt; 208.1.1.1 spi 0x00001000 seq 4535 len 116
14:12:19.813519 esp 208.1.1.1 &gt; 208.2.2.2 spi 0x00001001 seq 49313 len 116
14:12:20.630277 esp 208.2.2.2 &gt; 208.1.1.1 spi 0x00001000 seq 4536 len 116
14:12:20.832458 esp 208.1.1.1 &gt; 208.2.2.2 spi 0x00001001 seq 49314 len 116
14:12:21.630273 esp 208.2.2.2 &gt; 208.1.1.1 spi 0x00001000 seq 4537 len 116
<b>^C</b>
1831 packets received by filter
0 packets dropped by kernel
</pre>
<p>
<li>ISAKMP $B$O(B UDP port 500 $B$G<B9T$5$l$^$9!#$b$7!"$3$l$,%U%!%$%"%&%)!<%k$+(B
$B%Q%1%C%H%U%#%k%?$GAK;_$5$l$F$$$?$i!"$3$l$rJQ99$7$F$/$@@$5$$(B !
<blockquote><pre>
# Passing in ISAKMP traffic from the security gateways
pass in on ne0 proto udp from gatewB/32 port = 500 to gatewA/32 port = 500
pass out on ne0 proto udp from gatewA/32 port = 500 to gatewB/32 port = 500

# Passing in encrypted traffic from security gateways
pass in proto esp from gatewB/32 to gatewA/32
pass out proto esp from gatewA/32 to gatewB/32
</pre></blockquote>
<p>
<li>
isakmpd $B$KLr$KN)$D%G%P%C%0$r$9$Y$F$D$1$k$N$G$7$?$i!"<!$N$h$&$K$7$F<B9T$7$^$9!#(B
<blockquote><tt>
# <b>/sbin/isakmpd -d -DA=90</b>
</tt></blockquote>
<p>
$B$"$k$$$O(B ($B$$$A$P$s>\$7$$%?%$%^%G%P%C%0>pJs$r%9%-%C%W$9$k$K$O(B)$B!"(B
<blockquote><tt>
# <b>/sbin/isakmpd -d -DA=90 -D1=70</b>
</tt></blockquote>
<p>
<li>IPsec $B$G=hM}$5$l$?%H%i%U%#%C%/$r!"(BnetB $B$+$i<+J,$N%m!<%+%k$N%U%!%$%"%&%)!<%kJ]8n$D$-$N(B netA $B$K(B
$BF~$l$k$h$&$K$9$kI,MW$,$"$j$^$9!#(B
<blockquote><pre>
# Passing in traffic from the designated subnets.
pass in on enc0 from netB/netBmask to netA/netAmask
</pre></blockquote>
<p>
<li>OpenBSD $B$N(B tcpdump $B$N>l9g!"$[$H$s$I$N%$%s%?!<%M%C%H(B
$B808r49(B ($B<+F0808r49(B) $B%;%C%7%g%s$NJ?J8ItJ,$O$[$H$s$I%G%3!<%I$G$-$^$9!#(BTcpdump $B$O$^$?!"(BAH $B%Z%$%m!<%I%G!<%?$bI=<($7$^$9!#(B
<p>
<li>($B$b$74{$K%G%U%)%k%H$G;HMQ$7$F$$$J$$$N$G$7$?$i(B) /kern $B%U%!%$%k%7%9%F%`$r%^%&%s%H$7$^$9!#(B 
<blockquote><tt>
# <b>mkdir /kern; mount -t kernfs /kern /kern</b>
</tt></blockquote>
<p>
/kern $B$K$O!"8=:_$N(B SA/SPI $B0lMwI=$,$"$C$F!"%U%m!<$,$"$k$b$N(B
($B309T$-$N(B SA) $B$b$J$$$b$N(B ($BF~$C$F$/$k(B SA) $B$b5-=R$5$l$F$$$^$9!#(B
$B$^$?!"$I$N$h$&$J%H%i%U%#%C%/$,$I$3$X9T$C$F$$$k$N$+$rD4$Y$k$3$H$,$G$-$k!"(B
$B%H%i%U%#%C%/%+%&%s%?$b$"$j$^$9!#(B
<p>
<li>$B:G8e$K!"(B<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=netstat&apropos=0&sektion=1&format=html">netstat(1)</a> $B$r;HMQ$7$F(B SA $B$r8+$k$3$H$,$G$-$^$9!#(B
<blockquote><pre>
$ <b>netstat -rn -f encap</b>
Routing tables

Encap:
Source             Port  Destination        Port  Proto SA(Address/SPI/Proto) 
0.0.0.0/32         0     192.168.99/24      0     0     208.1.1.1/00001000/50
0.0.0.0/32         0     208.1.1.1/32       0     0     208.1.1.1/00001000/50
208.1.2.0/24       0     192.168.99/24      0     0     208.1.1.1/00001000/50
208.1.2.0/24       0     208.1.1.1/32       0     0     208.1.1.1/00001000/50
208.1.5.0/24       0     192.168.99/24      0     0     208.1.1.1/00001000/50
208.1.5.0/24       0     208.1.1.1/32       0     0     208.1.1.1/00001000/50
208.2.2.2/32       0     192.168.99/24      0     0     208.1.1.1/00001000/50
208.2.2.2/32       0     208.1.1.1/32       0     0     208.1.1.1/00001000/50
</pre></blockquote>
<p>
<li>
$B$3$l$@@$1$d$C$F$_$F$b%@@%a$G$7$?$i!"(B<tt>option ENCDEBUG</tt> $B$D$-$G%+!<%M%k$r%3%s%Q%$%k$7D>$7$F$/$@@$5$$!#(B
$B$=$7$F!"(B<tt>net.inet.ip.encdebug</tt> $B$r(B 1 $B$K$7$F$/$@@$5$$!#$=$7$F!"(Bdmesg $B$r8+$F7Y9p$d%(%i!<$rC5$7!"$=$l$r(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendbug&amp;sektion=1">sendbug(1)</a> $B$r;HMQ$7$F(B
OpenBSD $B$N3+H/<T$KJs9p$7$F$/$@@$5$$!#$"$k$$$O!"$b$7$=$l$,%P%0$+$I$&$+$o$+$i$J$1$l$P!"(B
<A HREF="../../ja/mail.html">$B%a!<%j%s%0%j%9%H(B</a>$B$N$$$:$l$+$K%a%C%;!<%8$rEj$2$F$_$^$7$g$&!#(B
</ul>


<p>
<a name= "SeeAlso"></a>
<h2>13.11 - $B4XO"%I%-%e%a%s%F!<%7%g%s(B</h2>

<p>
IPsec $B$,FC$K>\$7$/@@bL@@$5$l$F$$$k$N$O!"(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vpn&amp;sektion=8">vpn(8)</a>
$B%Z!<%8$G$7$g$&!#3F<o$N@@_Dj%F%s%W%l!<%H$,(B <A HREF="http://www.openbsd.org/cgi-bin/cvsweb/src/share/ipsec/">/usr/share/ipsec/</a>
$B%G%#%l%/%H%j$K$"$k$N$GLr$KN)$D$H;W$$$^$9!#(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=enc&amp;sektion=4">enc(4)</a>$B!"(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&amp;sektion=4">ipsec(4)</a>$B!"(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsecadm&amp;sektion=8">ipsecadm(8)</a>$B!"(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a>$B!"(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.conf&amp;sektion=5">isakmpd.conf(5)</a> $B$*$h$S(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.policy&amp;sektion=5">isakmpd.policy(5)</a>
$B$N(B man $B%Z!<%8$b>\$7$/$F!"(BIPsec $B$N@@_Dj$H1?MQ$KLrN)$D$O$:$G$9!#(B

<p>
$B$=$NB>%j%s%/$H$7$F!D!D(B

<ul>
<li><a href="http://www.ietf.org/html.charters/ipsec-charter.html">IETF IPsec Working Group</a>
<li><a href="http://isakmp-test.ssh.fi/">SSH IPsec interoperability Test Node</a>
<li><a href="http://ipsec-wit.antd.nist.gov/">NIST IPsec Web Based Interoperability Tester</a>
<li><a href="http://www.r4k.net/ipsec/">A port of OpenBSD's IPsec to FreeBSD</a>
<li><a href="http://www.xs4all.nl/~freeswan/">FreeS/WAN - IPsec for Linux</a>
<li><a href="http://www.pintday.org/hack/docs/vpn-24-minifaq.shtml">OpenBSD 2.4 VPN Configuration Mini-FAQ</a>
</ul>

<p> 
<a name="rfc">
$B$=$7$F$D$E$-$^$7$F$O(B RFC$B$I$b(B...
</a>

<ul>
<li><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc1320.html">RFC 1320</a> - The MD4 Message-Digest Algorithm
<li><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc1321.html">RFC 1321</a> - The MD5 Message-Digest Algorithm
<li><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc1828.html">RFC 1828</a> - IP Authentication using Keyed MD5
<li><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc1829.html">RFC 1829</a> - The ESP DES-CBC Transform
<li><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2040.html">RFC 2040</a> - The RC5, RC5-CBC, RC5-CBC-Pad, and RC5-CTS Algorithms
<li><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2085.html">RFC 2085</a> - HMAC-MD5 IP Authentication with Replay Prevention
<li><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2104.html">RFC 2104</a> - HMAC: Keyed-Hashing for Message Authentication
<li><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2144.html">RFC 2144</a> - The CAST-128 Encryption Algorithm 
<li><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2202.html">RFC 2202</a> - Test Cases for HMAC-MD5 and HMAC-SHA-1 
<li><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2207.html">RFC 2207</a> - RSVP Extensions for IPsec Data Flows
<li><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2268.html">RFC 2268</a> - A Description of the RC2 Encryption Algorithm 
<li><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2367.html">RFC 2367</a> - PF_KEY Key Management API, Version 2
<li><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2401.html">RFC 2401</a> - Security Architecture for the Internet Protocol (<b>IPsec</b>)
<li><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2402.html">RFC 2402</a> - IP Authentication Header (<b>AH</b>)
<li><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2403.html">RFC 2403</a> - The Use of HMAC-MD5-96 within ESP and AH
<li><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2404.html">RFC 2404</a> - The Use of HMAC-SHA-1-96 within ESP and AH
<li><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2405.html">RFC 2405</a> - The ESP DES-CBC Cipher Algorithm With Explicit IV
<li><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2406.html">RFC 2406</a> - IP Encapsulating Security Payload (<b>ESP</b>)
<li><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2407.html">RFC 2407</a> - The Internet IP Security Domain of Interpretation for ISAKMP
<li><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2408.html">RFC 2408</a> - Internet Security Association and Key Management Protocol (<b>ISAKMP</b>)
<li><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2409.html">RFC 2409</a> - The Internet Key Exchange (<b>IKE</b>)
<li><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2410.html">RFC 2410</a> - The NULL Encryption Algorithm and Its Use With IPsec (ha ha...)
<li><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2411.html">RFC 2411</a> - IP Security Document Roadmap
<li><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2412.html">RFC 2412</a> - The OAKLEY Key Determination Protocol
<li><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2451.html">RFC 2451</a> - The ESP CBC-Mode Cipher Algorithms
<li><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2631.html">RFC 2631</a> - Diffie-Hellman Key Agreement Method
<li><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2709.html">RFC 2709</a> - Security Model with Tunnel-mode IPsec for NAT Domains
</ul>

d46 1
a46 1
Originally [OpenBSD: faq13.html,v 1.78 ]
d48 1
a48 1
$Translation: faq13.html,v 1.31 2003/06/29 02:16:10 toshi Exp $
d50 1
a50 1
$OpenBSD: faq13.html,v 1.78 2003/06/28 23:01:32 jolan Exp $
@


1.28
log
@sync with steelix translation CVS
@
text
@d1909 1
a1909 1
<li><a href="http://www.ssh.com/">SSH Sentinel</a> IPSec $B%/%i%$%"%s%H(B
d2131 1
a2131 1
Originally [OpenBSD: faq13.html,v 1.77 ]
d2133 1
a2133 1
$Translation: faq13.html,v 1.30 2003/06/22 19:50:52 toshi Exp $
d2135 1
a2135 1
$OpenBSD: faq13.html,v 1.77 2003/06/22 18:54:12 david Exp $
@


1.27
log
@sync with steelix translation CVS
@
text
@d1 1
a1 1
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
d2131 1
a2131 1
Originally [OpenBSD: faq13.html,v 1.76 ]
d2133 1
a2133 1
$Translation: faq13.html,v 1.29 2003/06/15 11:26:55 toshi Exp $
d2135 1
a2135 1
$OpenBSD: faq13.html,v 1.76 2003/06/15 01:56:38 nick Exp $
@


1.26
log
@
sync with steelix translation CVS
@
text
@d1909 1
d2131 1
a2131 1
Originally [OpenBSD: faq13.html,v 1.75 ]
d2133 1
a2133 1
$Translation: faq13.html,v 1.28 2003/05/10 01:03:42 toshi Exp $
d2135 1
a2135 1
$OpenBSD: faq13.html,v 1.75 2003/05/02 15:41:59 nick Exp $</small>
@


1.25
log
@
sync with steelix translation CVS
@
text
@d1907 1
a1907 1
<li><a href="http://www.vpcom.com/">Ashley Laurent</a> VPCom VPN $B%=%U%H%&%'%"(B
d2130 1
a2130 1
Originally [OpenBSD: faq13.html,v 1.74 ]
d2132 1
a2132 1
$Translation: faq13.html,v 1.27 2003/04/03 23:10:52 toshi Exp $
d2134 1
a2134 1
$OpenBSD: faq13.html,v 1.74 2003/04/03 15:12:53 nick Exp $
@


1.24
log
@
sync with steelix translation CVS
@
text
@d1831 1
a1831 1
licensees: &quot;DN:\C=se\CN=IKELAB CA&quot;
d1838 1
a1838 1
licensees: &quot;DN:\C=se\CN=IKELAB CA&quot;
d1845 1
a1845 1
licensees: &quot;DN:\C=se\CN=IKELAB CA&quot;
d2130 1
a2130 1
Originally [OpenBSD: faq13.html,v 1.73 ]
d2132 1
a2132 1
$Translation: faq13.html,v 1.26 2003/03/30 15:11:39 toshi Exp $
d2134 1
a2134 1
$OpenBSD: faq13.html,v 1.73 2003/03/29 20:22:58 nick Exp $
@


1.23
log
@
sync with steelix translation CVS
@
text
@d1753 1
a1753 1
licensees: &quot;DN:\C=se\CN=IKELAB CA&quot;
d2130 1
a2130 1
Originally [OpenBSD: faq13.html,v 1.72 ]
d2132 1
a2132 1
$Translation: faq13.html,v 1.25 2003/03/24 08:03:13 toshi Exp $
d2134 1
a2134 1
$OpenBSD: faq13.html,v 1.72 2003/03/22 22:02:20 nick Exp $
@


1.22
log
@
sync with steelix translation CVS
@
text
@d2130 1
a2130 1
Originally [OpenBSD: faq13.html,v 1.71 ]
d2132 1
a2132 1
$Translation: faq13.html,v 1.24 2003/03/19 06:08:01 toshi Exp $
d2134 1
a2134 1
$OpenBSD: faq13.html,v 1.71 2003/03/18 03:41:04 nick Exp $
@


1.21
log
@
sync with steelix translation CVS
@
text
@d17 6
d2119 1
a2119 1
<a href= "index.html">[FAQ $B%H%C%W(B]</a>
d2130 1
a2130 1
Originally [OpenBSD: faq13.html,v 1.70 ]
d2132 1
a2132 1
$Translation: faq13.html,v 1.23 2003/02/28 07:05:35 toshi Exp $
d2134 1
a2134 1
$OpenBSD: faq13.html,v 1.70 2003/02/28 00:34:28 nick Exp $
@


1.20
log
@
sync with steelix translation CVS
@
text
@d2124 1
a2124 1
Originally [OpenBSD: faq13.html,v 1.69 ]
d2126 1
a2126 1
$Translation: faq13.html,v 1.22 2003/02/25 05:11:15 toshi Exp $
d2128 1
a2128 1
$OpenBSD: faq13.html,v 1.69 2003/02/25 04:00:10 david Exp $
@


1.19
log
@
sync with steelix translation CVS
@
text
@d53 1
a53 1
<h1>13.1 - IPsec $B$H$O2?$G$7$g$&(B ?</h1>
d98 1
a98 1
<h1>13.2 - $B$=$l$O$9$4$$!#$7$+$7!"$J$<(B IPsec $B$r;H$&I,MW$,$"$k$N$G$7$g$&(B ?</h1>
d137 1
a137 1
<h1>13.3 - IPsec $B$NN"$K$"$k%W%m%H%3%k$O(B ?</h1>
d164 1
a164 1
<h1>13.4 - $B%M%C%H%o!<%/>e$N%Q%1%C%H%U%)!<%^%C%H(B</h1>
d288 1
a288 1
<h1>13.5 - IPsec $B$N@@_Dj(B</h1>
d382 1
a382 1
<h1>13.6 - IPsec $B$r<jF080@@_Dj$G;H$&$K$O(B ?</h1>
d654 1
a654 1
<h1>13.7 - isakmpd $B$N@@_Dj$O(B ?</h1>
d667 8
a674 3
ISAKMP ($B$H$-$I$-(B IKE$B!"(B
Internet Key Exchange$B!"%$%s%?!<%M%C%H808r49!"<+F0808r49$H$b8F$P$l$k(B) $B$O(B VPN $BMQ$N808r49%a%+%K%:%`$G$9!#(B
RFC 2407$B!"(BRFC 2408$B!"(BRFC 2409 $B$K5-=R$5$l$?<jK!$r;HMQ$7$F%;%-%e%j%F%#>e$NLdBj$r%/%j%"$7$F$$$^$9!#(B
d690 1
d712 2
a713 2
$B%G%U%)%k%H$G(B OpenBSD $B$K$O!"(BISAKMP $B$H(B IPsec $B%9%?%C%/MQ$N%P%$%J%j$,ImB0$7$F$$$^$9!#(B
$B%5%s%W%k$N@@_Dj%U%!%$%k$O(B
d1027 5
a1031 4
$B%G!<%b%s$O%G!<%b%s%b!<%I$G$O<B9T$5$l$:!"DL>o$N%W%m%;%9$H$7$F<B9T$5$l$^$9!#(B
$B$=$7$F!"$9$Y$F$r%?!<%_%J%k$K=PNO$7$^$9!#(Bisakmpd $B$r;_$a$F(B
$B7PO)$r0lA]$9$k$K$O!"3F%N!<%I$G(B isakmpd $B%W%m%;%9$r(B kill $B$7$F$+$i(B
<b>ipsecadm flush</b> $B$r<B9T$7$^$9!#(B
d1036 1
a1036 1
<h1>13.8 - isakmpd $B$r(B X.509 $B>ZL@@=q$H;HMQ$9$k$K$O(B ?</h1>
d1039 5
a1043 3
$B;vA0$K6&M-$7$?80$N$+$o$j$K>ZL@@=q$r;HMQ$9$k$h$&$K(B isakmpd $B$r@@_Dj$9$k$N$O!"J]8n$5$l$F$$$J$$%T%"$,(B
$BB?$/B8:_$9$k5pBg%M%C%H%o!<%/$N>l9g$K$O!">.$5$J%M%C%H%o!<%/$HHf3S$7$F$=$l$[$IFq$7$$$3$H$G$O$"$j$^$;$s!#(B
$B$`$7$m!"@@_Dj$,4JC1$K$J$j!"$5$i$K=EMW$J$3$H$H$7$F!"804IM}$b4JC1$K$J$k$+$bCN$l$^$;$s!#(B
d1058 10
a1067 6
X.509 $B>ZL@@=q$O!">ZL@@=q$N;}$A<g$r5-=R$9$k(B Subject Alternative Name
(SubjectAltName) extension $B$,I,MW$K$J$j$^$9!#>ZL@@=q$N(B SubjectAltName extension $B$r(B
certpatch $B$r;H$C$F@@_Dj$9$kJ}K!$b!"(B
SubjectAltName $B$H$7$F(B IP $B%"%I%l%9$r@@_Dj$9$k>l9g$N@@bL@@$,(B README.PKI $B$K5-=R$5$l$F$$$^$9!#(B
$B$3$3$G(B IP $B%"%I%l%9$r;HMQ$9$k$N$O!"(Bisakmpd $B$N(B
$B%G%U%)%k%H$N5sF0$G$b$"$j$^$9!#(B
d1070 9
a1078 4
Certpatch $B$O$^$?!"(B FQDN (Fully Qualified Domain
Name) $B$+(B UFQDN (User FQDN) $B$N;HMQ$b%5%]!<%H$7$F$$$^$9!#(BFQDN $B$NNc$O!"$?$H$($P(B
<tt>www.openbsd.org</tt> $B$G$9$7!"(BUFQDN $B$NNc$H$7$F$O(B
$B%a!<%k%"%I%l%9$,$"$j$^$9!#$3$l$O$?$H$($P!"(B<tt>Jorgen.Granstam@@abc.se</tt> $B$J$I$G$9!#(B
d1081 1
a1081 4
$B$3$N(B how to $BJ8=q$G$O!"(B FQDN $B$r(B
SubjectAltNames $B$G;HMQ$7$F$$$^$9$,!"(BIP $B%"%I%l%9$r;HMQ$9$k$[$&$,$d$d4JC1$K$J$j$^$9!#(B
$B$=$l$,(B isakmpd $B$N%G%U%)%k%H$N5sF0$@@$+$i$J$N$G$9!#(B
$B$7$+$7!"$9$0$K$o$+$k$h$&$KBg$7$?:9$G$O$"$j$^$;$s!#(B
d1084 1
a1084 1
FQDN SubjectAltName $B$r>ZL@@=q$KF~$l$k$K$O!"(B
d1103 22
d1372 1
a1372 1
Policy-File=            /etc/isakmpd/policy
d1863 1
a1863 1
$B$9$k$H(B CA $B$O!"%f!<%6$N>ZL@@=q$K$7$+$k$Y$-(B SubjectAltName $B3HD%$r(B
d1888 1
a1888 1
<h1>13.9 - isakmpd $B$G;H$($k(B IKE $B%/%i%$%"%s%H$O(B ?</h1>
d1931 1
a1931 1
<h1>13.10 - IPsec/VPN $B$N%H%i%V%k%7%e!<%F%#%s%0(B</h1>
d2050 1
a2050 1
<h1>13.11 - $B4XO"%I%-%e%a%s%F!<%7%g%s(B</h1>
d2124 1
a2124 1
Originally [OpenBSD: faq13.html,v 1.65 ]
d2126 1
a2126 1
$Translation: faq13.html,v 1.19 2003/02/20 06:32:59 toshi Exp $
d2128 1
a2128 1
$OpenBSD: faq13.html,v 1.65 2003/02/20 03:09:56 nick Exp $
@


1.18
log
@
sync with steelix translation CVS
@
text
@d4 1
a4 1
<title>13.0 - IPsec $B$r;H$&(B</title>
d17 1
a17 1
<h1><font color="#e00000">13.0 - IPsec (IP Security Protocol) $B$r;H$&(B</font></h1>
d2076 3
a2078 3
<a href= "index.html">[FAQ $B%H%C%W$X(B]</a>
<a href= "faq12.html">[12.0 - $B9bEY$J%f!<%68~$1(B]</a>
<a href= "faq14.html">[14.0 - OpenBSD $B$N%O!<%I%G%#%9%/(B]</a>
d2087 1
a2087 1
Originally [OpenBSD: faq13.html,v 1.64 ]
d2089 1
a2089 1
$Translation: faq13.html,v 1.18 2003/02/19 00:12:40 toshi Exp $
d2091 1
a2091 1
$OpenBSD: faq13.html,v 1.64 2003/02/18 02:53:38 nick Exp $
@


1.17
log
@
sync with steelix translation CVS
@
text
@d411 1
a411 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=8">sysctl(8)</a>
d2087 1
a2087 1
Originally [OpenBSD: faq13.html,v 1.63 ]
d2089 1
a2089 1
$Translation: faq13.html,v 1.17 2003/01/14 10:22:14 toshi Exp $
d2091 1
a2091 1
$OpenBSD: faq13.html,v 1.63 2003/01/12 22:48:23 kjell Exp $
@


1.16
log
@
sync with steelix translation CVS, work by Toshihiko UEKI
@
text
@@


1.15
log
@
sync with steelix translation CVS
@
text
@d108 3
a110 3
$BM}2r$7$K$/$$$h$&$K$7$F$*$-$^$9!#%$%s%?!<%M%C%H7PM3$G(B
$B%j%b!<%H$N%^%7%s$K%m%0%$%s$9$k:]$K!"(B
$BB>$N?M$K$O%Q%9%o!<%I$rCN$i$l$?$/$"$j$^$;$s$h$M!#(B
d124 7
a130 10
<h4>$B:FAwJ]8n(B (Replay protection)</h4> $B$d$j<h$j$O!"2?EY$b7+$jJV$9$h$&G'$a$i$l$?$b$N0J30$O!"(B
$B3N<B$K0l2s$@@$1$7$+9T$o$l$J$$$h$&$K$9$kJ}K!$,I,MW$G$9!#$D$^$j!"(B
$BC/$+$,$d$j<h$j$r5-O?$7$F$*$$$F!"(B
$B$=$l$r$=$N$^$^:FAw$7$F!"7k2L$H$7$FF1$81~Ez$r2?EY$b<hF@@$9$k!"$H$$$&$3$H$,$G$-$J$$$h$&$K$9$kI,MW$,$"$k$N$G$9!#(B
$B$?$H$($P!"967b<T$,0E9f%/%i%C%/0J30$NB>$N<jCJ$G%H%i%U%#%C%/$N<q;]$r<hF@@$7$F!"(B
$B$=$7$F$=$N%H%i%U%#%C%/$,!"$=$N?MJ*$K$H$C$FM-Mx$J%$%Y%s%H$r@@8$8$5$;$k$b$N$H(B
$B$7$^$7$g$&(B ($BH`$N8}:B$K$*6b$r?6$j9~$^$;$kEy(B)$B!#(B
$B$=$N?MJ*$,!"8e$+$iC1=c$KF1$8%H%i%U%#%C%/$r:FAw$7$F$b(B
$B@@.8y$7$J$$$h$&$K$9$kI,MW$,$"$k$N$G$9!#(B
<i>$B7Y9p(B: $BDL>o$N;EMM$K4X$9$k8B$j!"<jF080$N(B IPsec $B$r;HMQ$7$F$$$k>l9g(B ($B$?$H$($P(B
d141 2
a142 2
$B?7$7$$%W%m%H%3%k$r(B 2 $B$D;HMQ$7$^$9!#$=$N%W%m%H%3%k$H$O!"(BAH (
Authentication header$B!"G'>Z%X%C%@@(B) $B$H(B ESP (Encapsulated security payload$B!"0E9f%Z%$%m!<%I(B) $B$G$9!#(B
d146 1
a146 1
ESP $B$H$N<g$J:9$O!"(BAH $B$O%Q%1%C%H$N(B
d148 2
a149 1
$BJ]8n$9$k$3$H$G$9!#(B
d158 3
a161 1

d392 3
a394 5
$B$^$:!"(BOpenBSD $B%+!<%M%k$N(B IP AH $B$H(B IP ESP $B%*%W%7%g%s$rM-8z$K$7$^$9(B
($B$b$7(B rc.vpn $B%9%/%j%W%H$r;HMQ$7$F$$$?$j!"$"$k$$$O!"$3$N<!$NNc$N$h$&$K!"(B
ESP $B$@@$1$r;HMQ$7$F$$$k$h$&$J>l9g$K$O(B <i>AH $B$OM-8z$K$7$J$/$F9=$$$^$;$s(B</i>$B!#(B
$B$`$7$m!";HMQ$7$F$b$$$J$$$N$K(B AH $B$rM-8z$K$9$k$H!"%;%-%e%j%F%#>e$NLdBj$,(B
$BH/@@8$9$k$+$bCN$l$^$;$s(B)$B!#(B
d396 4
a399 2
<p>
$B$3$l$i$N%W%m%H%3%k$rM-8z$K$9$k$?$a$N!"$9$F$-$J(B sysctl $B$,$"$j$^$9!#(B
d401 1
d403 2
a404 4
# <b>sysctl -w net.inet.esp.enable=1</b><br>
net.inet.esp.enable: 0 -&gt; 1<br>
# <b>sysctl -w net.inet.ah.enable=1</b><br>
net.inet.ah.enable: 0 -&gt; 1
d407 7
d415 1
a415 1
$B5/F0;~$K$3$l$r<B9T$5$;$k$K$O(B<tt>/etc/sysctl.conf</tt> $B$rJT=8$7$^$9!#(B
d417 1
a417 1
net.inet.ah.enable$B$NA0$N(B # $B$r30$7!"$=$l$,(B 1 $B$K%;%C%H$5$l$F$$$k(B
d421 7
a427 1
$B$5$i$K<jF080$N@@8@@.$bI,MW$K$J$j$^$9!#(B
d432 1
a432 1
$B%G%P%$%9$r;HMQ$9$kJ}K!$,$"$j$^$9!#$?$H$($P!"(B160 $B%S%C%HJ,$NMp?t@@-$r:n@@.$9$k$K$O!"0J2<$N$h$&$K$7$^$9!#(B
d435 1
a435 1
# <b>dd if=/dev/urandom bs=1024 count=1 | sha1</b>
d707 6
a712 14
$B;DG0$J$,$i!"%5%s%W%k%U%!%$%k$O%G%U%)%k%H$G$O$"$j$^$;$s!#(B
$B$3$l$rF~<j$9$k$K$O!"%=!<%9%D%j!<$+$i(B
/usr/src/sbin/isakmpd/samples/VPN-east.conf $B$*$h$S(B
/usr/src/sbin/isakmpd/samples/policy $B$r<hF@@$7$^$9!#(B
CD-ROM ($BEvA3$"$j$^$9$h$M(B) $B$+$i$G$bNI$$$G$7$g$&$7!"(B
<a href="http://www.openbsd.org/cgi-bin/cvsweb/">cvsweb</a> $B$d(B
<a href="http://www.usa.openbsd.org/anoncvs.html">$B%3%^%s%I%i%$%s(B CVS
$B%/%i%$%"%s%H(B</a>$B$r;HMQ$7$F$bNI$$$G$7$g$&(B (cvsweb $B$O(B
<a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sbin/isakmpd/samples/VPN-east.conf">VPN-east.conf</a>
$B$H(B
<a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sbin/isakmpd/samples/policy">policy</a>
$B$rMQ0U$7$F$$$^$9(B)$B!#$3$NNc$G;HMQ$9$k$N$K!"(B<i>policy</i> $B$r(B
/etc/isakmpd/isakmpd.policy $B$K%3%T!<$7$^$9!#$^$?!"(B<i>VPN-east.conf</i> $B$O(B /etc/isakmpd/isakmpd.conf
$B$K%3%T!<$7$^$9!#$3$3$G$O!"(BVPN ($B%H%s%M%k(B) $B$N@@_Dj$N;EJ}$r@@bL@@$7$^$9!#(B
d720 4
a723 2
$B$^$:!"(Besp $B$r5/F0$7$^$9!#(BFAQ $B%;%/%7%g%s$NKAF,$N(B <a href="#ManKey"> Manual Keying</a> $B$G!"(B
$B$=$l$>$l<B9T;~!&5/F0;~$K$3$l$r<B9T$9$kJ}K!$r@@bL@@$7$F$$$^$9!#<!$O(B /etc/isakmpd/isakmpd.policy $B$rJT=8$7$^$9!#(B
d725 2
a726 2
$B$3$N(B policy $B%U%!%$%k$O!"(BEncapsulate Security Payload (ESP) $B$r;HMQ$7$F%G!<%?$rAw?.$7$F$-$F!"(B
mekmitasdigoat $B$H$$$&%Q%9%o!<%I(B ($B$3$l$O$"$J$?$,<+M3$K7h$a$F$/$@@$5$$(B) $B$GG'>Z$5$l$?Aj<j$J$i!"(B
d755 1
a755 1
$B%[%9%H(B A $B$G$O(B /etc/isakmpd/isakmpd.conf $B$rJT=8$7$^$9!#8+K\$KF~$C$F$$$k(B 249.2.2.2 $B$H$$$&(B IP $B%"%I%l%9$O!"(B
d1017 1
a1017 1
# <b>isakmpd -d -DA=99</b>
d1093 1
a1093 1
/etc/isakmpd/isakmpd.conf $B@@_Dj%U%!%$%k$r8+$F$_$^$7$g$&!#(B
d1955 1
a1955 1
isakmpd $B$K%G%P%C%0$r$9$Y$F$D$1$k$N$G$7$?$i!"<!$N$h$&$K$7$F<B9T$7$^$9!#(B
d1957 1
a1957 1
# <b>/sbin/isakmpd -d -DA=99</b>
d1962 1
a1962 1
# <b>/sbin/isakmpd -d -DA=99 -D1=70</b>
d2087 1
a2087 1
Originally [OpenBSD: faq13.html,v 1.62 ]
d2089 1
a2089 1
$Translation: faq13.html,v 1.16 2003/01/04 15:40:51 toshi Exp $
d2091 1
a2091 1
$OpenBSD: faq13.html,v 1.62 2003/01/01 13:01:59 nick Exp $
@


1.14
log
@
sync with badlands translation CVS
@
text
@d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 2000-2002 by OpenBSD">
d2081 1
a2081 1
Originally [OpenBSD: faq13.html,v 1.61 ]
d2083 1
a2083 1
$Translation: faq13.html,v 1.15 2002/12/13 16:00:25 toshi Exp $
d2085 1
a2085 1
$OpenBSD: faq13.html,v 1.58 2002/07/12 02:51:35 nick Exp $
@


1.13
log
@
sync with badlands translation CVS
@
text
@d1 1
d6 1
a11 1
<meta http-equiv="Content-Type" content="text/html; charset=iso-2022-jp">
d17 1
a17 1
<h1><font color=#e00000>13.0 - IPsec (IP Security Protocol) $B$r;H$&(B</font></h1>
d22 4
a25 4
<UL>
<li><a href="#What"     >13.1 - IPsec$B$C$F2?(B ?</a>
<li><a href="#Why"      >13.2 - $B$=$j$c7k9=$@@$1$l$I!"$3$N$\$/$,$J$<(B IPsec $B$J$s$+;H$o$K$c$J$i$s$N(B ?</a>
<li><a href="#Protocols">13.3 - IPsec$B$NN"$K$"$k%W%m%H%3%k$O(B?</a>
d30 1
a30 1
<li><a href="#x509"     >13.8 - isakmpd $B$r(B X.509 $B>ZL@@=q$H;H$&$K$O(B ?</a>
d34 2
a35 1
</UL>
d37 4
a40 3
<Font size="-1">
$B$3$N%I%-%e%a%s%H$N0lIt$O!"0J2<$N%I%-%e%a%s%H$+$i$H$C$F$$$k(B:
<UL>
d46 2
a47 2
</UL>
</font>
d49 1
d53 2
a54 2
<h1>13.1 - IPsec$B$C$F$J$K(B?</h1>
</p>
d56 10
a65 9
IPsec $B$O!"(BIP $B%W%m%H%3%k%U%!%_%j!<$KBP$9$k3HD%$@@!#(B
$B0E9f%;%-%e%j%F%#%5!<%S%9$rDs6!$9$k!#$3$N%5!<%S%9$G!"G'>Z!"(B
$B40A4@@-(B (integrity)$B!"%"%/%;%9@@)8f!"5!L)@@-$,Ds6!$5$l$k!#(BIPsec $B$O(B
SSL $B$H;w$?%5!<%S%9$r!"%M%C%H%o!<%/AX$GDs6!$7$F!"$7$+$b%"%W%j%1!<%7%g%s$K$O$^$C$?$/(B
$BF)2aE*$G!"$7$+$b$:$C$H6/NO!#F)2aE*$H$$$&$N$O!"(B
$B%"%W%j%1!<%7%g%s$N$[$&$G$O(B IPsec $B$r;H$&$N$K!"(BIPsec $B$N$3$H$r2?0l$DCN$i$J$/$F$$$$!"(B
$B$H$$$&$3$H$@@!#(B
IPsec $B>e$G$O(B<a href="http://www.openbsd.org/cgi-bin/cvsweb/src/etc/protocols?rev=1.13">$B$"$i$f$k(B IP $B%W%m%H%3%k(B</a>$B$r;H$($k!#0E9f2=%H%s%M%k(B (VPN) $B$b:n$l$k$7!"%3%s%T%e!<%?4V$GC1=c$J0E9f2=$r$7$F$b$$$$!#(B
$B%*%W%7%g%s$,<B$K$$$m$$$m$"$k$;$$$G!"(BIPsec $B$O$A$g$C$H$d$d$3$7$$$N$G$"$k(B ($B$=$l$b(B SSL $B$h$j$:$C$H(B!)
d68 2
a69 2
FAQ <a href="../faq6.html">6$B>O(B</a> $B$N?d>)J88%$K$O(B
$B@@'Hs$H$bL\$rDL$7$F$*$$$F$[$7$$!#FC$K!"$b$7(B IP $B%"%I%l%9$N9M$(J}$,$o$+$C$F$$$J$+$C$?$i!"(B
d73 13
a85 9
$B$OBg$$$K$*>)$a$@@!#(B
<P>
$BO@@M}E*$K$O!"(BIPsec $B$O0J2<$N$I$s$J7A$G$b5!G=$9$k(B:
<UL>
<LI>Host-to-Host
<LI>Host-to-Network
<LI>Network-to-Network
</UL>
$B%M%C%H%o!<%/$N$+$i$`$9$Y$F$N%7%J%j%*$G!"$\$/$?$A$O%k!<%?$rG0F,$K$*$$$F$$$k!#(B
d87 7
a93 6
$B%H%i%U%#%C%/$r@@)8f$7$F0E9f2=$9$k(B)$B!#(B
<P>
$B$3$l$+$i8+$k$h$&$K!"(BIPsec $B$O(B VPN $B@@\B3MQ$K%H%i%U%#%C%/$r%H%s%M%k$G$-$k!#(B
$B$G$b!"$=$N1~MQ$O(B VPN $B$h$j$O$k$+$K9-$$!#Cf1{%$%s%?!<%M%C%H808r49EPO?=j$,$"$l$P!"(B
$B%$%s%?!<%M%C%H>e$NA4%^%7%s$O$*8_$$$K$d$j$H$j$r$9$k$H$-$K!"(B
$B6/NO$J0E9f$dG'>Z$,;H$($k$h$&$K$J$k$s$@@!*(B
d98 1
a98 2
<h1>13.2 - $B$=$j$c7k9=$@@$1$l$I!"$3$N$\$/$,$J$<(B IPsec$B$J$s$+;H$o$K$c$J$i$s$N(B?</h1>
</p>
d101 4
a104 4
$B%$%s%?!<%M%C%H$N%W%m%H%3%k$G$"$k(B IP $B$^$?$O(B IPv4 $B$O!"$=$l<+BN$H$7$F$O!"E>Aw$7$F$$$k%G!<%?$KBP$7$F2?$NJ]8n$bDs6!$7$J$$!#(B
$BAw$j<g$,!"<+J,$GL>>h$C$F$$$kDL$j$NB8:_$+$I$&$+$9$iJ]>Z$7$F$/$l$J$$!#(B
IPsec $B$O$3$l$r2r7h$7$h$&$H$9$k!#0J2<$N%5!<%S%9$O$=$l$>$lFHN)$H9M$($i$l$F$$$k$1$l$I!"(B
IPsec $B$O$=$l$rE}0lE*$J7A$G%5%]!<%H$7$F$$$k!#(B
d107 5
a111 4
<h4>$B5!L)@@-(B</h4> $B<u?.<T0J30$N?M$K$O!"$I$s$J%G!<%?$,DL?.$5$l$?$+$r(B
$BM}2r$7$K$/$$$h$&$K$7$F$*$/!#%$%s%?!<%M%C%H7PM3$G(B
$B%j%b!<%H$N%^%7%s$K%m%0%$%s$9$k$H$-!"(B
$B$[$+$N?M$K%Q%9%o!<%I$rCN$i$l$?$/$J$$$h$M!#(B
d113 2
a114 2
<h4>$B40A4@@-(B (Integrity)</h4> $B%G!<%?$,ESCf$G2~cb$5$l$J$$$h$&$K$9$k!#(B
$B@@A5a=q%G!<%?$r%*%s%i%$%s$GAw$k$s$J$i!"(B
d116 7
a122 1
$BESCf$G2~cb$5$l$?$j$7$F$$$J$$$+3N$+$a$?$$$G$7$g$&!#(B
d124 5
a128 9
<h4>Authenticity ($B@@5??@@-!?3N<B@@-(B)</h4> $B%G!<%?$K=pL>$7$F!"$=$l$rAw$C$?$N$,K\Ev$K$"$J$?$@@$HB>$N?M$,(B
$B3NG'$G$-$k$h$&$K$9$k!#%I%-%e%a%s%H$,%$%s%A%-$8$c$J$$$H3NG'$G$-$k$N$O!"(B
$B$I$&9M$($F$b$h$$$3$H$@@!#(B
<p>
<h4>$B:FAwJ]8n(B (Replay protection)</h4> $B$d$j$H$j$O!"2?EY$b7+$jJV$9$h$&G'$a$i$l$?$b$N0J30$O!"(B
$B3N<B$K0l2s$@@$1$7$+@@8$8$J$$$h$&$K$9$kJ}K!$,I,MW$@@!#$D$^$j!"(B
$B$@@$l$+$,$d$j$H$j$r5-O?$7$F$*$$$F!"(B
$B$=$l$r$=$N$^$^:FAw$7$F!"7k2L$H$7$FF1$81~Ez$r2?EY$b$b$i$&!"$H$$$&$3$H$,$G$-$J$$$h$&$K$9$kI,MW$,$"$k!#(B
$B$?$H$($P!"967b<T$,0E9f%/%i%C%/0J30$N<jCJ$G%H%i%U%#%C%/$N<q;]$rB>$NJ}K!$G$D$-$H$a$F!"(B
d130 6
a135 6
$B$7$h$&(B ($B$+$l$N8}:B$K$*6b$r?6$j9~$`$H$+(B)$B!#(B
$B$=$N?MJ*$,!"$"$H$+$iC1=c$KF1$8%H%i%U%#%C%/$r:FAw$7$F$b(B
$B$&$^$/$$$+$J$$$h$&$K$9$kI,MW$,$"$k!#(B
<i>$B7Y9p(B: $BDL>o$N;EMM$K4X$9$k8B$j!"<jF080$N(B IPsec $B$r;H$C$F$$$k$H$-(B 
($B$?$H$($P(B <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsecadm&amp;apropos=0&amp;sektion=8&amp;format=html">ipsecadm(8)</a> $B$r;H$C$F$$$k$H$-(B)
$B$K$O:FAw$+$i$NJ]8n$O<B9T$5$l$J$$(B</i>.
d140 1
a140 2
<h1>13.3 - IPsec $B$NN"$K$"$k%W%m%H%3%k$O(B?</h1>
</p>
d144 5
a148 4
$B?7$7$$%W%m%H%3%k$r(B 2 $B$D;H$&!#$3$N%W%m%H%3%k$O(B AH (
Authentication header, $BG'>Z%X%C%@@(B) $B$H(B ESP (Encapsulated security payload$B!"0E9f%Z%$%m!<%I(B) $B$@@!#(B
<P>
AH $B$OG'>Z$H40A4@@-$H:FAwJ]8n$rDs6!$9$k(B ($B$,5!L)@@-$ODs6!$7$J$$(B)$B!#(B
d150 4
a153 3
IP $B%X%C%@@$N0lIt(B ($B$?$H$($P%Q%1%C%H$NH/?.85!&Aw$j@@h%"%I%l%9(B) $B$b(B
$BJ]8n$9$k$3$H$@@!#(B
<P>
d155 5
a159 5
$BDs6!$9$k(B ($B%X%C%@@$K$D$E$/%Q%1%C%HFb$N$9$Y$F$rJ]8n$9$k(B)$B!#(B
$B:FAwJ]8n$OG'>Z$H40A4@@-$,I,MW$@@(B
($B$3$NFs$D$O$$$D$b%Z%"$G$/$k(B)$B!#5!L)@@-(B ($B0E9f2=(B) $B$O!"(B
$BG'>Z(B/$B40A4@@-$,$"$C$F$b$J$/$F$b;H$($k!#(B
$BF1$8$h$&$K!"G'>Z!&40A4@@-$O5!L)@@-$J$7$G$b;H$($k!#(B
a164 1
</p>
d166 2
a167 1
<p>   <B>$BG'>Z%X%C%@@(B (Authentication Header)</B>
d169 4
a172 4
$B<1JL>pJs$r;}$C$F$$$k!#%O%C%7%e$O(B 
IP $B%X%C%@@<+BN$N!"EAAwCf$KCM$,JQ2=$7$J$$ItJ,$b%+%P!<$G$-$k!#(B
AH $B$K;H$&<B:]$N%"%k%4%j%:%`$K$D$$$F$O!"$$$/$D$+JL8D$N(B RFC $B$,$"$C$FA*$Y$k$h$&$K$J$C$F$$$k$1$l$I!"(B
$B$=$N$I$l$b!"(B<a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2402.html">RFC2402</a>$B$K;XDj$5$l$?%,%$%I%i%$%s$K$O=`5r$7$F$$$J$/$F$O$J$i$J$$!#(B
d174 3
a176 2
<P>The <B>$B0E9f%Z%$%m!<%I(B (Encapsulating
Security Payload)</B> (ESP) $B%X%C%@@$O!"%Z%$%m!<%I$r0E9f2=$5$l$?7A$G=q$-49$($k$3$H$r2DG=$K$9$k!#(B
d178 9
a186 8
$B%X%C%@@$O07$o$J$$$N$G!"%Z%$%m!<%I0J30$N$b$N$K$D$$$F$O$^$C$?$/J]>Z$7$J$$!#(B
$B$=$l$>$l3F<o$N(B ESP $B$O(B <A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2406.html">RFC2406</A>$B$K$7$?$,$&I,MW$,$"$k!#(B
ESP $B%X%C%@@$O!"%Z%$%m!<%I$NG'>Z$bDs6!$G$-$k(B ($B$,(B ESP $B$N30$N(B
$B%X%C%@@$K$D$$$F$OG'>Z$G$-$J$$(B)$B!#(B

<P>IPsec $B5!G=$N(B ($B$[$H$s$I(B) $BFHN)$7$?ItJ,$,!"(BIPsec encapsulation $B$r(B
$B$d$C$F$$$k$N$,%G!<%?$N$b$H$NH/?.8;$+%2!<%H%&%'%$$+$K(B
$B1~$8$FE,MQ$5$l$k(B:
d188 2
a189 2
<UL>
<LI><B>Transport</B> $B%b!<%I$O!"%Q%1%C%H$r@@8@@.$7$F$$$k%[%9%H$,;H$&$b$N$@@!#(B
d191 31
a221 28
(e.g . TCP, UDP) $B$N%X%C%@@$NA0$K!"(BIP$B%X%C%@@$,%Q%1%C%H$N@@hF,$K$D$1$i$l$kA0$NCJ3,$GDI2C$5$l$k!#(B
$B8@@$$49$($k$H!"%Q%1%C%H$KDI2C$5$l$?(B AH $B$,(B
TCP $B%X%C%@@$H!"(Bend-to-end IP $B%X%C%@@$N0lIt%U%#!<%k%I$N%O%C%7%s%0$rC4Ev$9$k$H$$$&$3$H$@@!#(B
$B$=$7$F(BTCP $B%X%C%@@$H%G!<%?$N0E9f2=$O(B ESP
$B%X%C%@@$,%+%P!<$9$k$1$l$I!"$G$b$=$l$O(B end-to-end IP $B%X%C%@@$O0E9f2=$7$F$/$l$J$$!#(B</LI>

<LI><B>$B%H%s%M%k(B</B> $B%b!<%I$O!"$9$G$K(B end-to-end IP $B%X%C%@@$,(B
$B%Q%1%C%H$KDI2C$5$l$F$$$k$H$-$G!"$5$i$K%;%-%e%"@@\B3$NJRJ}$NC<$,(B
$B$?$@@$N%2!<%H%&%'%$$N$H$-$K;H$o$l$k!#$3$N%b!<%I$G$O!"(BAH $B$H(B ESP $B%X%C%@@$O!"(B end-to-end header $B$r4^$a(B
$B%Q%1%C%HA4BN$r%+%P!<$9$k$N$K;H$o$l$k!#$=$7$F%;%-%e%"@@\B3$N8~$3$&C<$^$G$N%[%C%W$N$_(B
($B$H$$$C$F$b!"$3$l$O$b$A$m$sJ#?t$N(B IP $B%[%C%W$r$^$?$,$k$+$b$7$l$J$$$1$l$I(B) $B$r%+%P!<$9$k!"(B
$B?7$7$$(B IP $B%X%C%@@$,$D$1$J$*$5$l$k!#(B</LI>
</UL>

<P>IPsec $B$GJ]8n$5$l$?%j%s%/$O!"(B<B>Security Associations
</B>(SAs) $B$K$h$C$FDj5A$E$1$i$l$k!#3F(B SA $B$OC10l$NC1J}8~$N%G!<%?$NN.$l$K$D$$$FDj5A$5$l$F!"(B
$BIaDL$O(B ($B%^%k%A%-%c%9%H$OL5;k$7$F(B) $B0l$D$NE@@$+$iJL$NE@@$^$G$K$D$$$F!"(B
$B$J$s$i$+$N(B<B>$B%f%K!<%/$J%;%l%/%?(B</B>$B$K$h$C$F<1JL$G$-$k%H%i%U%#%C%/%U%m!<$r$5$9!#C10l$N(B SA $B>e$rN.$l$k%H%i%U%#%C%/$O$9$Y$F(B
$BF1$807$$$r<u$1$k!#%H%i%U%#%C%/$NCf$K$O!"J#?t$N(B SA $B$r7P$k$b$N$b$"$C$F!"(B
$B$=$N$=$l$>$l$,$J$s$i$+$NJQ49$r2C$($k!#(BSA $B$N=8CD$r(B
SA <B>Bundle</B> $B$H8F$V!#F~$C$F$/$k%Q%1%C%H$O!"(B3 $B$D$NDj5A%U%#!<%k%I(B
(<B>$B08@@h(B IP $B%"%I%l%9(B, $B%;%-%e%j%F%#%Q%i%a!<%?%$%s%G%C%/%9(B (Security Parameter
Index), $B%;%-%e%j%F%#%W%m%H%3%k(B</B>)$B$K1~$8$F;XDj$N(B SA $B$K3d$jEv$F$k$3$H$,$G$-$k!#(B
$B%;%-%e%j%F%#%Q%i%a!<%?%$%s%G%C%/%9(B (Security Parameter
Index$B!"N,$7$F(B SPI) $B$O@@\B3$N%Q%i%a!<%?$N%M%4%7%(!<%7%g%s$,9T$o$l$k$H$-$K!"(BSA $B$N<u$1<j$,<jEO$9%/%C%-!<$@@$H;W$($P$$$$!#(B
$B%;%-%e%j%F%#%W%m%H%3%k$O(B AH $B$+(B ESP $B$N$I$A$i$+$G$J$/$F$O$J$i$J$$!#<u$1<j$N(B IP
$B%"%I%l%9$,$3$N#3$D#1AH$NCf$K4^$^$l$F$$$k$N$G!"$3$l$O%f%K!<%/$JCM$K$J$k$3$H$,J]>Z$5$l$F$$$k!#(B
$B$3$l$O30B&$N(B IP $B%X%C%@@$+$i8+$D$1$k$3$H$b$G$-$k$7!":G=i$N%;%-%e%j%F%#%X%C%@@(B ($B$3$l$O(B SPI $B$H%;%-%e%j%F%#%W%m%H%3%k$r4^$`(B) $B$+$i8+$D$1$k$3$H$b$G$-$k!#(B
a222 1
<P>$B%H%s%M%k%b!<%I$N(B AH $B%Q%1%C%H$NNc$r5s$2$h$&(B:
d226 2
a227 2
<td><B>IP$B%X%C%@@(B</B></td>
<td><B>AH</B></td>
d234 3
a236 1
<P>transport $B%b!<%I(B AH $B%Q%1%C%H$NNc$r5s$2$h$&(B:
d240 2
a241 2
<td><B>IP$B%X%C%@@(B</B></td>
<td><B>AH</B></td>
d247 4
a250 2
<P>ESP $B%X%C%@@$O30B&$N(B IP $B%X%C%@@$rG'>Z$G$-$J$$$N$G!"(B
AH $B$H(B ESP $B%X%C%@@$rAH$_9g$o$;$F<!$N$h$&$K$7$?$[$&$,$$$$(B:
d254 5
a258 5
<td><B>IP$B%X%C%@@(B</B></td>
<td><B>AH</B></td>
<td><B>ESP</B></td>
<td><I>TCP$B%X%C%@@(B</I></td>
<td><I>$B%G!<%?(B</I></td>
d262 3
a264 2
<P>$B$3$l$O(B <B>Transport Adjacency</B> $B$H8F$P$l$k!#%H%s%M%kHG$@@$H(B
$B$3$s$J46$8$@@(B:
d268 6
a273 6
<td><B>IP$B%X%C%@@(B</B></td>
<td><B>AH</B></td>
<td><B>ESP</B></td>
<td><I>IP$B%X%C%@@(B2</I></td>
<td><I>TCP$B%X%C%@@(B</I></td>
<td><I>$B%G!<%?(B</I></td>
d277 7
a283 6
<P>$B$G$b!"$3$l$O(B RFC $B$K$OL@@<(E*$K5-=R$5$l$F$$$J$$!#(BTransport
adjacency $B$HF1$8$h$&$K!"$3$l$O(BIP $B%X%C%@@$NCf$N%X%C%@@$$$/$D$+$r=|$$$FA4%Q%1%C%H$rG'>Z$7$?$&$($G!"(B
$B%Z%$%m!<%I(B ($B%$%?%j%/%9$GI=<((B) $B$r0E9f2=$9$k!#(B
AH $B$H(B ESP $B%X%C%@@$,$3$N$h$&$KD>@@\$$$C$7$g$KE,MQ$5$l$F$$$k$H$-$K$O!"(B
$B%X%C%@@$N=gHV$O>e5-$N$h$&$K$J$C$F$$$kI,MW$,$"$k!#%H%s%M%k%b!<%I$G$O!"(B
$BG$0U$N(B recursive encapsulation $B$r$d$k$3$H$G!"$3$N=gHV$,;XDj$5$l$:$K$9$`$h$&$K$9$k$3$H$b$G$-$k!#(B
a288 1
</p>
d290 10
a299 28
<P>IPsec $B%7%9%F%`$H%2!<%H%&%'%$$,$I$&@@_Dj$5$l$k$+$O!"$"$kDxEY$O@@_7W<T$^$+$;$K(B
$B$J$C$F$O$$$k$N$@@$1$l$I!"$G$b(B RFC $B$O$=$l$,$I$&<BAu$5$l$k$Y$-$+$K$D$$$F6/$$%l%3%a%s%G!<%7%g%s$r9T$C$F(B
$B:.Mp$r:G>.8B$K$*$5$($h$&$H$7$F$$$k!#(B

<p>$B%Q%1%C%H$K2?$,5/$3$k$+$r%3%s%H%m!<%k$9$k!"4IM}%(%s%F%#%F%#$,#2$D$"$k!#(B
$B0l$D$O(B<B>Security Association Database</B> (SAD, 
OpenBSD$B$N(B IPsec$B%=!<%9%3!<%I$NCf$G$O!"(BTDB $B$^$?$O(B TDB table $B$H8F$P$l$F$$$k(B) $B$G!"(B
$B$b$&0l$D$O(B<B>Security Policy Database</B> (SPD)$B$@@!#(B

<P>$B$3$NFs$D$O!"$"$k%H%i%U%#%C%/$rI=8=$7$?%;%l%/%?$r$$$/$D$+M?$($i$l$k$H!"(B
$BI,MW$H$J$k=hM}$r5-=R$7$?%(%s%H%j$rDs6!$7$F$/$l$k$H$$$&E@@$G;w$F$$$k!#(B
$B$G$b(BSPD $B$O<B:]$N=hM}$+$iFsCJ3,$[$I1s$$$H$3$m$K$"$k(B: 
SPD $B$O30$X=P$k%Q%1%C%H$K;H$o$l$F!"$I$N(B SAD $B%(%s%H%j$r;H$&$Y$-$+7h$a$k$N$KMxMQ$5$l$k!#(B
$B5U$K(B SAD $B%(%s%H%j$O!"<B:]$N%W%m%;%9$H$=$3$G;H$&%Q%i%a!<%?$r5-=R$9$k!#(B
SPD $B$N%(%s%H%j$O!"4{B8$N(B SAD $B%(%s%H%j$N$&$A$I$l$r;H$&$+(B
($B%P%s%I%k$J$i!"(BSAD $B%(%s%H%j$OJ#?t$"$jF@@$k$N$G(B) $B$r;XDj$9$k$1$l$I!"$G$b$9$G$K(B
$BE,@@Z$J$b$N$,$J$$$J$i!"$=$N%(%s%H%j$r;H$C$F?7$7$$$b$N$,$D$/$i$l$k!#$D$/$i$l$k(B SA $B$N%U%#!<%k%I$O!"(B
SPD $B%(%s%H%j$+$i;}$C$F$/$k>l9g$b$"$k$7!"$=$N%U%#!<%k%I?7@@_$r(B
$B3+;O$5$;$?%Q%1%C%H$+$i;}$C$F$/$k>l9g$b$"$k!#(B

<P>$B!!309T$-$N%Q%1%C%H$O!"(BSPD $B%(%s%H%j$+$i8DJL$N(B SA $B$K9T$C$F%(%s%3!<%G%#%s%0MQ(B
$B%Q%i%a!<%?$r$b$i$&!#F~$C$F$/$k%Q%1%C%H$O!"(BSPI/$B08@@h(BIP/$B%W%m%H%3%k$N(B 3 $BE@@%;%C%H$r;H$C$F(B
$BD>@@\@@5$7$$(B SA $B$K$?$I$j$D$-!"$=$3$+$i(B SPD $B%(%s%H%j$K$?$I$j$D$/!#(B

<P>$B!!(BSPD $B$O$^$?$I$N%H%i%U%#%C%/$,(B IPsec $B$r%P%$%Q%9$9$Y$-$+!"$^$?$I$N%H%i%U%#%C%/$r(B
$B<N$F$k$Y$-$+$r;XDj$G$-$k$N$G!"F~$C$F$/$kHs(B IPsec $B$N%H%i%U%#%C%/$K$D$$$F$b;2>H$5$l$J$/$F$O$J$i$J$$!#(B
SPD $B%(%s%H%j$O!"=gHV$,L@@<(E*$K<($5$l$F$$$kI,MW$,$"$k!#$"$k%Q%1%C%H$KJ#?t$N$b$N$,%^%C%A$9$k2DG=@@-$,$"$k$7!"(B
$B=hM}$K$O:F8=@@-$,$J$/$F$O$J$i$J$$$+$i$@@!#(B
d301 26
a326 2
<P>SPD $B$H$$$&$N$O!"%Q%1%C%H%U%#%k%?$H;w$?$h$&$J$b$N$@@$H;W$($P$$$$$+$b$7$l$J$$!#$=$3$G7hDj$5$l$k%"%/%7%g%s$H$$$&$N$O!"(B
SA $B%W%m%;%9$N5/F0$K$J$k$o$1$@@!#%;%l%/%?$H$7$F;H$($k$N$O(B
d328 22
a349 2
($B$3$l$O(B host based transport SA$B$N$_(B)$B!"%[%9%HL>!"%;%-%e%j%F%#(B
$B46EY%l%Y%k!"%W%m%H%3%k$J$I$@@!#(B
d351 4
a354 1
<P>SAD $B%(%s%H%j$K4^$^$l$k$N$O$?$H$($P(B:
d356 7
a362 27
<UL>
<LI>$B08@@h(B IP $B%"%I%l%9(B
<LI>IPsec $B%W%m%H%3%k(B(AH $B$+(B ESP)
<LI>SPI ($B%/%C%-!<(B)
<LI>$B%7!<%1%s%9%+%&%s%?(B
<LI>Seq O/F $B%U%i%0(B
<LI>Anti-replay window info
<LI>AH $B$N<oN`$H>pJs(B
<LI>ESP $B$N<oN`$H>pJs(B
<LI>$B<wL?>pJs(B
<LI>Tunnel/transport $B%b!<%I%U%i%0(B
<LI>Path MTU $B>pJs(B
</UL>

<P>SPD $B%(%s%H%j$K4^$^$l$k$N$O(B:

<UL>
<LI>SA$B5/F0%]%$%s%?(B
<LI>$B%;%l%/%?%U%#!<%k%I(B
</UL>

<P>$B3F(B SA $B$O!"(BESP $B%X%C%@@0l$D$H(B AH $B%X%C%@@0l$D$rDj5A$G$-$k!#(B
IPsec $B%;%C%7%g%s$O$3$N$I$A$i$+!"$"$k$$$ON>J}$r;}$?$J$-$c$J$i$J$$!#$I$A$i$N%X%C%@@$b$J$7$GDj5A$5$l$k$3$H$O(B
$B$G$-$J$$!=!=$5$b$J$$$H!"(BSA $B$r;2>H$9$k$?$a$N(B SPI $B$r;XDj$9$k%X%C%@@$,$J$$$3$H$K$J$C$F$7$^$&!#(B
RFC $B$O!"(BAH $B$H(BESP $B%X%C%@@$,(B SPI $B$NCM$K$D$$$F(B
$BJL!9$N;XDj$r$7$F$$$k>l9g$N$3$H$ODj5A$7$F$$$J$$!#;!$9$k$K!"(B
$B$3$l$O%P%s%I%kCf$NJ#?t$N(B SA $B$r0UL#$9$k$b$N$HH=CG$5$l$k$@@$m$&!#(B
d364 3
a366 2
<P>OpenBSD $B$N(B SPD $B$O!"(B<tt>ipsecadm flow</tt> $B%3%^%s%I$r;H$C$F4IM}$5$l$k(B
($B$3$l$KJQ99$r2C$($k$N$O!"<jF080@@_Dj$r;H$&>l9g$@@$1$@@(B)$B!#(B
d368 3
a370 3
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsecadm&apropos=0&sektion=8&format=html">ipsecadm(8)</a>$B$r;H$($P%^%K%e%"%k$G@@_Dj$G$-$k$1$l$I!"(B
IETF $B$O%;%C%7%g%s$d808r49$N=i4|2=$J$I$N(B
$B<+F0%a%+%K%:%`$bDj5A$7$F$$$k!#(B
d372 3
a374 3
(<A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2407.html">RFC2407</a>$B!"(B
<A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2408.html">RFC2408</A> $B$J$i$S$K(B
<A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2409.html">RFC2409</A>)
d376 2
a377 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&apropos=0&sektion=8&format=html">isakmpd(8)</a>
$B%G!<%b%s$G;H$o$l$F$$$k!#(B
d382 21
a402 17
<h1>13.6 - $B<jF080@@_Dj$G(B IPsec $B$r@@_Dj$9$k$K$O$I$&$9$k$N(B?</h1>
</p>
<P>
IPsec $B$N<j;O$a$H$7$F$$$A$P$s$+$s$?$s$J$N$,<jF080@@_Dj$@@!#(B
$B$3$N<jK!$G%M%C%H%o!<%/4V$r0E9f2=$7$F(B VPN $B$r$D$/$l$k!#(B
$B$3$NItJ,$rFI$s$@@$i!"$3$N@@_Dj$r(B
$B<+F02=$9$k$N$K(B<A HREF="http://www.openbsd.org/cgi-bin/cvsweb/src/share/ipsec/rc.vpn?rev=1.3">/usr/share/ipsec/rc.vpn</a>
$B$r;H$&!"$J$s$F$$$&$N$b$d$C$F$_$k$H$$$$$+$b$7$l$J$$!#(B
<P>
$B$^$:!"(BOpenBSD$B%+!<%M%k$N(B IP AH $B$H(B IP ESP $B%*%W%7%g%s$rM-8z$K$7$h$&(B
($B$b$7(B rc.vpn $B%9%/%j%W%H$r;H$C$F$$$?$j!"$"$k$$$O(B
$B$3$N<!$NNc$N$h$&$K!"(BESP $B$@@$1$r;H$C$F$$$k$h$&$J>l9g$K$O(B <i>AH $B$OM-8z$K$7$J$$$G$$$$!#(B</i>$B$=$l$I$3$m$+!"(B
$B;H$C$F$$$J$$$N$K(B AH $B$rM-8z$K$9$k$H%;%-%e%j%F%#>e$NLdBj$,(B
$BH/@@8$9$k$+$b$7$l$J$$(B)$B!#(B<P>
$B$3$&$$$&%W%m%H%3%k$rM-8z$K$9$k$?$a$N!"$9$F$-$J(B sysctl $B$,$"$k!#(B
<ul><tt>
# <b>sysctl -w net.inet.esp.enable=1</b><BR>
d406 17
a422 13
</tt></ul>
$B5/F0;~$K$3$l$r$?$A$"$2$k$K$O(B<tt>/etc/sysctl.conf</tt> $B$rJT=8$9$l$P$$$$!#(B
$B;H$$$?$$$b$N$K1~$8$F(Bnet.inet.esp.enable $B$=$7$F(B/$B$"$k$$$O(B
net.inet.ah.enable$B$NA0$N(B # $B$r$O$:$7!"$=$l$,(B 1 $B$K%;%C%H$5$l$F$$$k(B
$B$3$H$r3N$+$a$h$&!#(B
<P>
$B$5$i$K<jF080$N@@8@@.$bI,MW$@@!#(B
VPN $B$N%;%-%e%j%F%#$O!"$3$N80$r?dDj$9$k$N$,IT2DG=$@@$H$$$&E@@$K$+$+$C$F$$$k$N$G!"(B
$B$3$N80$rA*$V$N$K$O6/NO$JMp?t8;$r;H$&$N$,$H$F$b$@@$$$8$@@!#(B
$B$3$l$r@@8@@.$9$k$N$K<BMQ@@-$,9b$$J}K!$N0l$D$H$7$F!"(B
<A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=random&sektion=4&format=html">random(4)</a>
$B%G%P%$%9$r;H$&<j$,$"$k!#$?$H$($P(B160$B%S%C%HJ,$NMp?t@@-$r$D$/$j$@@$9$K$O!"0J2<$N$h$&$K$9$k(B:
<UL><tt>
d424 6
a429 3
</TT></UL>
$B@@8@@.$5$l$k%S%C%H?t$O$@@$$$8$@@!#0E9f$N<oN`$K$h$C$F!"I,MW$J80$N%5%$%:$,$A$,$&!#(B
<PRE>
d436 17
a452 16
</PRE>
<P>
$B$G$O!"(BSA (Security Associations) $B$N@@_Dj$r$7$h$&!#(B
Security Association $B$H$$$&$N$O!"(BIP $B%"%I%l%9!"(BSPI, 
$B%;%-%e%j%F%#%W%m%H%3%k(B (AH $B$=$7$F(B/$B$^$?$O(B ESP) $B$NAH$_9g$o$;$@@!#(BIP $B%"%I%l%9$O!"$"$J$?<+?H$N$b$N$H!"(B
$BAw$j@@h$N$b$NN>J}$@@!#(BSPI (Security Parameter
Index) $B$O3F<o(B SA $B$NJ,N`$K(B OpenBSD $B$,;H$&HV9f$@@!#(B
<P>
<I>$B$3$l$i$NNc$O!"%H%i%U%#%C%/$N0E9f2=$K(B ESP $B$7$+;H$o$J$$!#(BESP $B$O(B
$B0E9f2=$5$l$?Cf?H$N%G!<%?$NG'>Z$O$9$k$1$l$I!"(BAH $B$H$O$A$,$C$F(B
$B$=$l$rJq$`(B IP $B%X%C%@@$OG'>Z$7$F$/$l$J$$!#$3$N!V8B$i$l$?G'>Z!W$O!"(B
$B$=$l$G$b$[$H$s$I$N>l9g$K$O$^$C$?$/==J,$J$b$N$@@!#FC$K%H%s%M%k4D6-$G$N(B
ESP $B$N>l9g$K$O!#(B</I>
<P>
<ul>
<tt>
d455 10
a464 9
</tt>
</ul>
<P>
$B$3$l$rFs$D$N%k!<%?$G<B:]$K$d$C$F$_$h$&!#%k!<%?$N(B IP $B%"%I%l%9$O$=$l$>$l(B 192.168.5.1 $B$H(B 192.168.25.9 $B$@@!#(B
<P>
$B%[%9%H(B192.168.5.1 $B>e$G$O(B:
<UL>
<TT>
# <b>ipsecadm new esp -spi 1000 -src 192.168.5.1 -dst 192.168.25.9 -forcetunnel -enc blf -auth sha1 -key 7762d8707255d974168cbb1d274f8bed4cbd3364 -authkey 6a20367e21c66e5a40739db293cf2ef2a4e6659f</b><BR>
d466 3
a468 2
</TT>
</UL>
d470 3
a472 3
<UL>
<TT>
# <b>ipsecadm new esp -spi 1001 -src 192.168.25.9 -dst 192.168.5.1 -forcetunnel -enc blf -auth sha1 -key 7762d8707255d974168cbb1d274f8bed4cbd3364 -authkey 6a20367e21c66e5a40739db293cf2ef2a4e6659f</b><BR>
d474 14
a487 10
</TT>
</UL>
<P>
$B$4$i$s$N$h$&$K!"(BSPI $B$,$A$,$C$F$$$k!#(BSPI $B$,2?$G!"$=$l$,$I$3$G;H$o$l$F$$$k$+$K$D$$$F$N40A4$J@@bL@@$O!"(B<A HREF="#13.4">On the wire format</a> $B$r;2>H!#(B
<P>
$B$3$l$G(B Security Associations $B$,$G$-$"$,$C$?$N$G!"(B
$B%U%m!<$r@@_Dj$7$h$&!#(B
<P>
$B$^$:$O(B 192.168.5.1 $B$+$i(B:<P>
$B$5$F$3$3$G$$$-$J$j!"%U%m!<$,(B<b>2$B$D(B</b>$BAO$i$l$k!#0l$D$O%m!<%+%k$N%=!<%9%"%I%l%9$G!"(B
d489 38
a526 32
$B$b$&0l$D$N%U%m!<$OAw$j@@h$+$i%m!<%+%k%[%9%H$KLa$C$F$/$k(B
$B%U%m!<$@@!#(B
<ul>
<tt>
# <b>ipsecadm flow -proto esp -dst 192.168.25.9 -spi 1000
-addr 192.168.5.1 255.255.255.255 192.168.25.9 255.255.255.255</b>
</tt></ul>
192.168.25.9$BB&$G$O$3$s$J6q9g$@@(B:
<ul>
<tt>
# <b>ipsecadm flow -proto esp -dst 192.168.5.1 -spi 1001
-addr 192.168.25.9 255.255.255.255 192.168.5.1 255.255.255.255</b>
</tt></ul>
<P>
$B$b$7(B Host-to-Host VPN $B$N%*!<%P!<%X%C%I$r8:$i$7$?$1$l$P!"(BSPI
$B$r:n$k$N$K(B <tt>-forcetunnel</tt> $B$r$O$:$7$F$*$/$H!"(Btransport $B%b!<%I$,;H$($k(B (<tt>-forcetunnel</tt>
$B$r;H$&$H(B IP $B%X%C%@@$^$G4^$s$@@(B IP $B%Q%1%C%H$N$9$Y$F$,I,$:(BSPI$B$K%+%W%;%k2=(B
$B$5$l$k(B)$B!#$b$7(B
$BH/?.85$+Aw$j@@h$N$I$A$i$+$,%M%C%H%o!<%/$J$i!"%H%s%M%k%b!<%I$r;H$&$7$+$J$$!#(B
$B%M%C%H%o!<%/$+$i=PF~$j$9$k%H%i%U%#%C%/$K(B SA $B$r;H$&$H!"<+F0E*$K(B
$B%H%s%M%k%b!<%I$N(B SPI $B$,3N<B$K:n$i$l$k$3$H$K$J$k!#(B
<p>
$B$3$l$O(BIPsec$B$r;H$$;O$a$k4JC1$J$d$j$+$?$@@!#(B
<P>
IPsec $B$r;H$($P!"%W%i%$%Y!<%H(B IP $B%"%I%l%96u4V$r%$%s%?!<%M%C%H$4$7$K$D$J$2$k!#(B
$B$$$$Nc$r5s$2$h$&!D!D(B208.1.1.1$B$NGX8e$K$"$k(B 192.168.99.0/24 $B$H!"(B
208.2.2.2$B$NGX8e$K$"$k(B 208.1.5.0/24 $B$H(B 208.1.2.0/24 $B$r%H%s%M%k$G$D$J$2$?$$$H$7$h$&!#(B
$B0J2<$NNc$O(B <A HREF="http://www.openbsd.org/cgi-bin/cvsweb/src/share/ipsec/rc.vpn?rev=1.3">rc.vpn</a> $B%9%/%j%W%H$r;H$C$F@@8@@.$7$?$b$N$@@!#(B
<P>
$B$4$i$s$N$H$*$j!"(BIPsec$B$G<jF080@@_Dj$r;H$C$F$$$k$H!"(B
$B$d$C$F$[$7$$$3$H$r(B<b>$B$:$P$j@@53N$K(B</b>$B;XDj$7$J$-$c%@@%a$@@!#(B
$B$"$J$?$N$+$o$j$K8+Ev$r$D$1$F$/$l$?$j$O$7$J$$!#0J2<$NNc$r$_$F$4$i$s!D!D(B
d528 4
a531 3
$B$^$:!"(Bsecurity associations (SA) $B$r@@_Dj$7$h$&(B:<BR>
($B$3$l$G(B SPI, $B0E9f2=$NJ}K!$H80$,@@_Dj$5$l$k(B) 
<UL><tt>
d534 6
a539 3
</tt></ul>
$B<!$K!"(B208.1.1.1 $B$+$i(B 208.2.2.2$B$X$N%U%m!<$r@@_Dj!'(B
<ul><tt>
d541 13
a553 7
</tt></ul>
$B<!$K(B  208.2.2.2$B$NGX8e$K$"$k(B208.1.2.0/24 $B$+$i(B 192.168.99.0/24$B$X$N%U%m!<$r@@_Dj!'(B
<ul><tt>
# <b>ipsecadm flow -proto esp -dst 208.2.2.2 -spi 1001 -addr 192.168.99.0 255.255.255.0 208.1.2.0 255.255.255.0</b><BR>
</tt></ul>
$B<!$K(B 208.2.2.2$B$NGX8e$K$"$k(B 208.1.5.0/24 $B$+$i(B 192.168.99.0/24$B$X$N%U%m!<$r@@_Dj!'(B
<ul><tt>
d555 6
a560 3
</tt></ul>
$B$3$s$I$O(B 208.2.2.2$B$NGX8e$K$"$k(B 208.1.2.0/24 $B$+$i%k!<%?(B 208.1.1.1$B$X$N%U%m!<$r@@_Dj!'(B
<ul><tT>
d562 6
a567 3
</tt></ul>
$B%*%C%1!<!"$G$O(B 208.2.2.2$B$NGX8e$N(B 208.1.5.0/24 $B$+$i%k!<%?(B 208.1.1.1$B$X$N%U%m!<$r@@_Dj(B
<ul><tt>
d569 6
a574 3
</tt></ul>
$B:G8e$K!"%k!<%?(B 208.2.2.2 $B$+$i(B 192.168.99.0/24$B$X$N%U%m!<$r@@_Dj$7$h$&(B
<ul><tt>
d576 9
a584 5
</tt></ul>
<P>
<h2>208.2.2.2$BB&$G$O(B:</h2>
$BA0$HF1$8$h$&$K!"$^$:$O(B SA$B$N@@_Dj$+$i!D!D(B
<ul><tt>
d587 7
a593 4
</tt></ul>
$B$5$F$3$C$A$ON"JV$7$K$J$k$N$G!D!D(B
$B%k!<%?(B 208.2.2.2 $B$+$i(B 208.1.1.1$B$X$N%U%m!<$r@@_Dj!'(B
<ul><tt>
d595 6
a600 3
</tt></ul>
208.1.1.1$B$NGX8e$K$"$k%M%C%H%o!<%/(B 192.168.99.0/24 $B$+$i(B 208.1.2.0/24$B$X$N%U%m!<$r@@_Dj!'(B
<ul><tt>
d602 6
a607 3
</tt></ul>
208.1.1.1$B$NGX8e$K$"$k%M%C%H%o!<%/(B 192.168.99.0/24 $B$+$i(B 208.1.5.0/24$B$X$N%U%m!<$r@@_Dj!'(B
<ul><tt>
d609 6
a614 3
</tt></ul>
$B$G$O(B208.1.1.1$B$NGX8e$N(B 192.169.99.0/24 $B$+$i%k!<%?(B 208.2.2.2$B$X$N%U%m!<$r@@_Dj!'(B
<ul><tt>
d616 8
a623 5
</tt></ul>
$B$O!<$$!"$b$&$9$0$*$7$^$$$G$9$h!<!D!D(B
208.1.2.0/24 $B$H(B 208.1.5.0/24 $B$r%k!<%?(B 208.2.2.2$B$+$i(B 208.1.1.1$B$^$GFO$1$k$N$K!"(B
$B$"$H%U%m!<(B2$B$D$@@$1!'(B
<ul><tt>
d626 7
a632 5
</tt></ul>
<P>
ipsecadm $B$r;H$C$F$$$F!"<+J,$N$d$C$?:n6H$r$<$s$V$4GK;;$K$7$F(B
$B0l$+$i$d$j$J$*$7$?$1$l$P!"<!$N$h$&$K$9$k!'(B
<ul><tt>
d634 5
a638 2
</tt></ul>
$B$3$l$G$9$Y$F$N(B IPsec $B>pJs(B (SPI$B!"%U%m!<!"%k!<%F%#%s%0$N%(%s%H%j(B) $B$,%7%9%F%`$+$i0lA]$5$l$k!#(B
d642 27
a668 21
<h1>13.7 - isakmpd$B$N@@_Dj$O(B ?</h1>
</p>
<p>VPNs $B$r$O$8$a(B IPsec $B$N3F<oEAE}E*$J%"%W%j%1!<%7%g%s$r9M$($F$$$k$J$i!"(B
$B$?$V$s(B ISAKMP $B$r;H$&$3$H$K$J$k!#(BIPsec $B$N>&6H<BAu$N(B
$B0lIt$O!"<jF080@@_Dj$r$5$;$F$/$l$J$$$N$G!"(B
$B$J$s$i$+$N7A$N(B ISAKMP $B$r;H$&$7$+$J$/$J$k!#(B
<P>

<h3>13.7.1 - isakmpd$B$C$F$J$K(B?</h3> ISAKMP ($B$H$-$I$-(B IKE, 
Internet Key Exchange$B!"%$%s%?!<%M%C%H808r49!"<+F0808r49$H$b8F$P$l$k(B) $B$O(B VPN $BMQ$N808r49%a%+%K%:%`$@@!#(B
RFC 2407, RFC 2408$B!"(BRFC 2409$B$K5-=R$5$l$?<jK!$r;H$C$F%;%-%e%j%F%#>e$NLdBj$r%/%j%"$7$F$$$k!#(B
ISAKMP $B$O!"DL>o$J$i(B <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsecadm&apropos=0&sektion=8">ipsecadm(8)</a>
$B$r;H$o$J$/$F$O$J$i$J$$$h$&$J0E9f2H6q$N$d$j$H$j$r4IM}$7$F$/$l$k!#(B
$BFs$D$N(B IPsec $B%N!<%I4V$G(B IPsec $B%Q%i%a!<%?$r3NN)$9$k$?$a$K!"(B
$BFsCJ3,%W%m%;%9$r:NMQ$7$F$$$k!#(B

<P> <b>$B%U%'!<%:(B 1</b> - ISAKMP $B%T%"#2$D$O!"J]8n$5$lG'>Z$5$l$?%A%c%M%k$r3NN)$7!"(B
$B#2$D$N%G!<%b%s4V$GDL?.$,$G$-$k$h$&$K$9$k!#$3$l$O(B
$BN>%[%9%H4V$G(B Security Association (SA) $B$r3NN)$9$k!#$3$N%A%c%M%k$r3NN)$9$k$?$a$N<jK!$O!"(B<b>Main
Mode</b> $B$H(B <b>Aggressive Mode</b> $B$@@!#(B
d670 31
a700 32
$BFCDj$N=gHV$GAw$j!"%"%$%G%s%F%#%F%#$NJ]8n$rDs6!$9$k!#(BAggressive Mode $B$O(B
$B%"%$%G%s%F%#%F%#J]8n$ODs6!$7$J$$!#G'>Z>pJs$r(B
$B$9$Y$F0l5$$KAw$k$+$i$@@!#(BAggressive mode $B$r;H$&$N$O!"(B
$B%M%C%H%o!<%/$NBS0hI}$,69$$$H$-$@@$1$K$7$?$[$&$,$$$$!#(B
<P>

<b>$B%U%'!<%:(B 2</b> - Security Associations $B$,(B IPsec $B$K$+$o$C$F%M%4$5$l$k!#(B
$B%U%'!<%:(B 2 $B$O(B IPsec $B%[%9%H4V$K%H%s%M%k$+(B endpoint SA $B$r3NN)$9$k!#(B
$B%U%'!<%:(B 2 $B$G$O(B <b>Quick Mode</b> $B$,;H$o$l$k!#%U%'!<%:(B 1 $B$G$9$G$K(B SA $B$,3NN)$7$F$$$k$N$G!"(B
$B40A4$JG'>Z$r$/$jJV$5$J$/$F$$$$$+$i$@@!#(B

<P>

$B<jC;$K$$$($P!"%U%'!<%:(B 1 $B$OJ]8n$5$l$?%A%c%M%k$r3NJ]$9$k$N$K;H$o$l$F!"$=$3$G(B
($B$b$C$H<jAa$$(B) $B%U%'!<%:(B 2 $B$N@@_Dj$,9T$o$l$k!#F1$8%U%'!<%:(B 1 $B%A%c%M%k$NCf$G!"J#?t$N%U%'!<%:(B 2 $B@@_Dj$r(B
$B$9$k$3$H$b$"$k!#%U%'!<%:(B 2 $B$O<B:]$N%H%s%M%k$r@@_Dj$9$k$N$K;H$o$l$k!#(B
$B%U%'!<%:(B 1 $B$G$O(B IPsec $B%N!<%IF1;N$,@@\B3$r3NN)$7$F(B
$BG'>Z$r8r49$9$k(B (X.509 $B>ZL@@$+!"(B
$B;vA0$K6&M-$7$?HkL)(B)$B!#$3$l$GN>C<$H$b!"Aj<j$,G'>Z$5$l$?$3$H$r(B
$B3NG'$G$-$k!#%U%'!<%:(B 2 $B$O80$N8r49$G!"N><T$N4V$N%G!<%?$,(B
$B$I$&0E9f2=$5$l$k$+$r7h$a$k!#(B

<h3>13.7.2 - isakmpd$B$3$H$O$8$a(B</h3>

<P>
$B%G%U%)%k%H$G(B OpenBSD $B$O(B ISAKMP $B$H(B
IPsec $B%9%?%C%/MQ$N%P%$%J%j$,$D$$$F$/$k!#;DG0$J$,$i!"(B
$B%5%s%W%k%U%!%$%k$O%G%U%)%k%H$G$O$J$$!#$3$l$r<j$KF~$l$k$K$O!"%=!<%9%D%j!<$+$i0J2<$N$b$N$r<h$C$F$3$h$&(B:
/usr/src/sbin/isakmpd/samples/VPN-east.conf and
/usr/src/sbin/isakmpd/samples/policy
CD-ROM ($BEvA3;}$C$F$k$h$M(B) $B$+$i$G$b$$$$$7!"(B<A
href="http://www.openbsd.org/cgi-bin/cvsweb/">cvsweb</a> $B$d(B
d702 25
a726 25
$B%/%i%$%"%s%H(B</a>. $B$r;H$C$F$b$$$$(B (Cvsweb $B$O(B <a
href="http://www.openbsd.org/cgi-bin/cvsweb/src/sbin/isakmpd/samples/VPN-east.conf">VPN-east.conf</a>
$B$H(B <a
href="http://www.openbsd.org/cgi-bin/cvsweb/src/sbin/isakmpd/samples/policy">policy</a>
$B$rMQ0U$7$F$"$k(B)$B!#$3$NNc$G;H$&$K$O!"(B<i>policy</i>
$B$r(B /etc/isakmpd/isakmpd.policy $B$K%3%T!<$7$h$&!#(B<i>VPN-east.conf</i> $B$O(B /etc/isakmpd/isakmpd.conf$B$K%3%T!<$9$k!#(B
$B$3$3$G$O!"(BVPN ($B%H%s%M%k(B) $B$N@@_Dj$N;EJ}$r@@bL@@$7$F$_$k!#$b$7(B
isakmpd $B$r8DJL%[%9%H4V$G;H$$$?$1$l$P!"(B<i>samples</i> $B%G%#%l%/%H%j$K$=$lMQ$N%5%s%W%k$,(B
$BF~$C$F$$$k!#(B
man $B%Z!<%8$K>\$7$$>pJs$,$"$k$N$G!"(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.conf&sektion=5">isakmpd.conf(5)</a> $B$H(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.policy&sektion=5">isakmpd.policy(5)</a> $B$r$*K:$l$J$/!#(B

<p>
$B$^$:$O(B esp $B$N5/F0$+$i$@@!#(BFAQ $B%;%/%7%g%s$NF,$N$H$3$m$N(B <a href="#ManKey">
Manual Keying</a> $B$G!"$3$l$r<B9T;~!&5/F0;~$K$=$l$>$l$d$kJ}K!$r@@bL@@$7$F$$$k!#(B
$B<!$K(B /etc/isakmpd/isakmpd.policy $B$NJT=8$@@!#(B
$B$3$N%U%!%$%k$O(B ISAKMP $B$K!"$@@$l$,(B IPsec $B$K%"%/%;%9$G$-$k$+$r65$($k!#$3$N%7%J%j%*$G$O!"$3$N(B policy $B%U%!%$%k$O!"(B
Encapsulate Security Payload(ESP) $B$r;H$C$F%G!<%?$rAw$C$F$-$F!"(Bmekmitasdigoat $B$H$$$&%Q%9%o!<%I(B ($B$3$l$O$"$J$?$,(B
$B>!<j$K7h$a$l$P$$$$(B) $B$GG'>Z$5$l$?Aj<j$J$i!"$@@$l$G$b(B isakmpd $B$HDL?.$G$-$k$H=R$Y$F$$$k!#$3$N%U%!%$%k$r$rJQ99$7$F!"(B
$BFCDj$N%G%8%?%k>ZL@@=q$G=pL>$5$l$?%G!<%?$@@$1$rG'$a$k$H$+!"FCDj$N0E9fJQ49$r;H$C$?%G!<%?$@@$1$rG'$a$k$H$+!"(B
$B4uK>$r(BISAKMP$B$KEA$($i$l$k!#$^$?$@@$l$G$b(B IPsec $B$,;H$($k$h$&$K$7$F$b$$$$!#$3$l$O%F%9%HMQ$@@$1$K$7$F$*$/$N$,K>$^$7$$!#(B
$BK|?M$K%"%/%;%9$5$;$k$K$O!"(Bpolicy $B%U%!%$%k$rJT=8$7$F0J2<$@@$1$K$7$h$&(B:
<BR>
<UL><PRE>
d729 10
a738 7
</PRE></UL>
<P>
$BF1$8(B policy $B%U%!%$%k$K$O(B $ $B$N$D$$$?9T$,Fs9T$"$k!#(B
$B;H$&A0$K$3$N#29T$O:o=|$9$k$3$H!#(BCVS $B$G$7$+;H$o$J$$!#(B
<P>
$B$3$NNc$G!"$b$C$H;H$$J*$K$J$k(B policy $B%U%!%$%k$O$3$s$J46$8$@@(B:
<BR><UL><PRE>
d745 6
a750 4
</pre></UL>
$B$3$l$r<BAu$9$l$P!"(BESP $B$@@$1$r;H$C$?4pK\E*$J(B VPN ($B%H%s%M%k(B) $B$,$G$-$"$,$k!#(B
$B%[%9%H(B A $B$G$O(B /etc/isakmpd/isakmpd.conf $B$rJT=8$9$k!#8+K\$GF~$C$F$$$k(B249.2.2.2 $B$H$$$&(B IP $B%"%I%l%9$O!"(B
$B%[%9%H(B A $B$N<B:]$N30It(B IP $B%"%I%l%9$K=q$-49$($k$3$H!#(B
d752 1
a752 1
<UL><PRE>
d757 1
a757 1
</PRE></UL>
d759 3
a761 2
$BF1$8$h$&$J$3$H$r%[%9%H(B B $B$N(B isakmpd.conf $B$G$b$d$m$&!#(B249.3.3.3 $B$O(B
$B%[%9%H(B B $B$N30It(B IP $B%"%I%l%9$@@!#(B
d763 1
a763 1
<UL><PRE>
d768 1
a768 1
</PRE></UL>
d770 7
a776 8
<p>$B$3$3$G(B isakmpd $B$N$*$b$J$U$k$^$$$r7h$a$kJQ?t$r@@_Dj$G$-$k!#$3$3$G$O(B
$B%G%U%)%k%H$r;H$C$F$*$1$P$$$$!#(B
<b>Listen-on</b>= value $B$O!"(Bisakmpd $B$,J9$-<*$r$?$F$k$Y$-(B IP 
$B$r;XDj$9$k!#$"$J$?$N%2!<%H%&%'%$$N%$%s%?!<%M%C%H(B IP $B$@@$1$,I,MW$@@!#(B
$B%2!<%H%&%'%$$KJ#?t$N30It%$%s%?!<%U%'!<%9$,$"$k$J$i!"(B
$B%3%s%^$G6h@@Z$C$?0lMw7A<0$GF~NO$7$F!"$I$N%$%s%?!<%U%'!<%9$rD0$$$F$[$7$$$+0lMw$K$G$-$k!#(B
<P>
$B<!$K%[%9%H(B A $B$G!"$b$&0lEY(Bisakmpd.conf $B$rJT=8$7$h$&!#(B
d778 4
a781 1
<UL><PRE>
d784 1
a784 1
</PRE></UL>
d786 2
a787 1
$B%[%9%H(B B$B$G$O(B:
d789 1
a789 1
<UL><PRE>
d792 7
a798 1
</PRE></UL>
a799 4
<p>$B$3$NItJ,$O!"%U%'!<%:(B 1 $B@@\B3$N%M%4%7%(!<%7%g%s$r$9$k$H$-$K<u$1IU$1$k$Y$-(B IP $B%"%I%l%9$r5-=R$9$k!#(B
$B$3$3$G$NCM$O2<$NItJ,$r;X$7$F$$$k(B ($B%U%'!<%:(B 1 $B$OC1$K%j%b!<%H$N%T%"$rG'>Z$7$F!"(B
$B$=$l$,<gD%DL$j$NAj<j$@@$H3NG'$9$k$@@$1$J$N$r$*K:$l$J$/(B)$B!#(B
IP_Address=<i> &lt;PEER-NAME&gt;</i>$B$H$$$&7A<0$GJ#?t$N%T%"$r5-=R$G$-$k!#(B
d801 3
a803 2
$B<!$K%[%9%H(B A$B$G$O(B:
<UL><PRE>
d806 1
a806 1
</PRE></UL>
d808 2
a809 1
$B%[%9%H(B B$B$G$O(B:
d811 1
a811 1
<UL><PRE>
d814 12
a825 1
</PRE></UL>
d827 7
a833 2
<p>$B$3$l$O@@\B3$N%U%'!<%:(B 2 $B$r5-=R$7$?$b$N!#$3$N%U%'!<%:$O!"DL?.$KN>(B
$B%T%"$,;H$&%W%m%H%3%k$r7h$a$k$H$3$m$@@!#(B
d835 1
a835 12
<p>The <b>Connections</b>= tag $B$O!"$=$N2<$N%;%/%7%g%s$r$5$9!#(B
$B%U%'!<%:(B 2 $B$r@@_Dj$9$k$?$a$K<u$1F~$l$i$l$k%a%=%C%I$dMW7o$r%$%K%7%(!<%H$9$k!#$3$l$O$^$?!"(B
$B$$$C$?$s3+;O$7$?$i$I$N@@\B3$r%$%K%7%(!<%H$9$Y$-$+$r(BISAKMPD $B$K9p$2$k!#(B
$BJ#?t$N%T%"%[%9%H$K$D$J$0$D$b$j$J$i!"(B
$B0J2<$N$h$&$KJ#?t$N%;%/%7%g%s$r=q$$$F$b$$$$$3$H$KCm0U!#(B

<p>$B%j%b!<%H%[%9%H$N(B IP $B%"%I%l%9$,$o$+$i$J$1$l$P!"(B <b>Connections</b>= tag $B$K(B
$B5s$,$C$F$$$J$$(B IP $B$+$i$N@@\B3$G;2>H$5$l$k!"HFMQ%(%s%H%j$r$"$k%;%/%7%g%s$K5-=R$7$F$*$$$F!"(B
$B$=$l$r(B Default= $B$G;XDj$9$k$h$&$K$9$l$P$$$$!#(B
<P>
$B%[%9%H(B A$B$G$O(B:
<UL><PRE>
d844 1
a844 1
</PRE></UL>
d846 2
a847 1
$B%[%9%H(B B$B$G$O(B:
d849 1
a849 1
<UL><PRE>
d858 6
a863 1
</PRE></UL>
a864 3
$B$3$l$i$O>e$G@@bL@@$7$?%U%'!<%:(B 1 $B$NItJ,$G;2>H$5$l$F$$$k%;%/%7%g%s$@@!#$=$l$>$l(B
$B%U%'!<%:(B 2 $B$K?J$`$?$a$K%T%"$N%2!<%H%&%'%$$,K~B-$7$J$1$l$P$J$i$J$$MW7o$r5-=R$7$F$$$k!#$[$+$K$b%*%W%7%g%s$O(B
$B$?$/$5$s$"$k$1$l$I!">e$K5s$2$?$b$N$O:GDc8BI,MW$J$b$N$@@!#(B
d866 25
a890 25
<li><b>Phase=1 </b>$B$,I,MW$J$N$O!"(B ISAKMPD $B%3!<%I$,%U%'!<%:(B 1 $B$H%U%'!<%:(B 2 $B$r=hM}$9$k$N$KF1$8%W%m%7!<%8%c$r;H$&$+$i$@@!#(B
$B$3$l$r(B <b>1</b> $B$K$7$J$$$H!"2?0l$D5!G=$7$J$/$J$k!#(B
<li><b>Transport= </b> $B$O!"%T%"$4$H$K$A$,$&2DG=@@-$,$"$k!#$3$3$G$O(B
udp $B$r;H$&$3$H$K$7$F$"$k$N$G!"$=$&$$$&$3$H$K$7$F$*$3$&!#(B
$B0lIt$N%T%"$O%U%!%$%"!<%&%)!<%k$NGX8e$K$"$C$F!"(BUDP $B%H%i%U%#%C%/$rDL$5$J$$>l9g$,$"$k$3$H$KCm0U!#$3$l$OEvA3$J$,$i!"@@_DjA0$K3NG'$7$F$*$/I,MW$,$"$k!#(B
<li><b>Local-address </b>$B$OF~$C$F$/$k%Q%1%C%H$,;X$9L\E*%"%I%l%9$@@!#0lIt$N%1!<%9$G$O!"(B
$B%U%'!<%:(B 1 $B$N@@\B3$N$?$a$KD0$/%$%s%?!<%U%'!<%9$,$A$,$C$F$$$k$+$b$7$l$J$$!#(B
$B$3$NNc$G$O!"%$%s%?!<%U%'!<%9$O0l$D$7$+$J$$$N$G!"$3$N%T%"$GJ9$-<*$r$?$F$k(B
$B%$%s%?!<%U%'!<%9$N(B IP $B$,$=$l$K$J$k!#(B
<li><b>Address= </b>$B$O!"F~$C$F$/$k%Q%1%C%H$N%=!<%9(BIP$B!#$3$l$O%T%"%2!<%H%&%'%$$r(B
$B;X$9$N$,$U$D$&!#(B
$B$3$3$O$b$C$H@@bL@@$,I,MW!#%T%"$NH/?.$9$k(B IP $B%"%I%l%9$O;vA0$K$o$+$i$J$$$3$H$,$"$k$+$i!#(B
<li><b>Configuration= </b>$B$O!"2<$N%;%/%7%g%s$r;X$9!#$3$3$G$d$C$?$h$&$J7A$G(B
$BJ#?t$N%;%/%7%g%s$r;XDj$G$-$k!#$3$3$G$O%5%s%W%k%U%!%$%k$K$"$C$?(B
$B%G%U%)%k%HCM$r;H$*$&!#(B
<li><b>Authentication=</b> $B$O!"$3$N%T%"$,;H$&$O$:$N!"(B
$B;vA0$K6&M-$7$F$"$kHkL)!#$3$N%Q%9%o!<%I$,(B policy $B$KEO$5$l$F!"(B
$B$3$N%T%"$,$3$N%[%9%H$H(B IPsec $B$r;H$C$F$$$$$3$H$K$J$C$F$$$k$+$r3NG'$9$k!#$3$3$N%Q%9%o!<%I$rJQ$($?$i!"(B
policy $B%U%!%$%k$G$N5-=R$bJQ$($kI,MW$,$"$k!#(Bsample $B%U%!%$%k$,$3$N%Q%9%o!<%I$K1~$8$FDs6!$5$l$k$+$i$@@!#(B
$B:GDc8B$N(B policy $B%U%!%$%k$G9T$/$D$b$j$J$i!"$3$3$G$O9%$-$J$b$N$r;XDj$9$l$P$$$$!#(B
<li><b>Flags=</b> $B$O$$$^$O;H$o$l$F$$$J$$!#(BRFC $B$G$O!"%U%'!<%:(B 1 $BMQ$NDI2C%*%W%7%g%s$r;XDj$9$k$?$a$NM=Hw$H$7$F(B
$B$3$l$r;D$7$F$$$k!#(B
<p>$B$[$+$N%*%W%7%g%s$r;XDj$9$k$?$a$N%?%0$b$?$/$5$s$"$k!#>\$7$/$O(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.conf&apropos=0&sektion=5&format=html">isakmpd.conf(5)</a>
$B$r;2>H!#(B
d892 5
a896 3
<P>
$B%[%9%H(B A$B$G$O(B:
<UL><PRE>
d903 1
a903 1
</PRE></UL>
d905 4
a908 2
$B%[%9%H(B B$B$G$O(B:
<UL><PRE>
d915 6
a920 1
</PRE></UL>
a921 3
<p>$B$3$l$i$O!">e5-$N%U%'!<%:(B2$B$G;2>H$5$l$F$$$k%;%/%7%g%s$r$"$i$o$7$F$$$k!#$3$l$O(B
$B8DJL$N@@\B3$N$?$a$K!"Fs$D$N%2!<%H%&%'%$4V$GOC$r$9$k$N$K(B ISAKMPD $B$,;H$&$Y$-(B
$B8DJL@@_Dj$J$N$@@!#(B
d923 5
a927 5
<li><b>Phase=2</b> $B$OI,?\!#(BISAKMPD $B%3!<%I$O!"%U%'!<%:(B 1 $B$H(B
$B%U%'!<%:(B 2 $B$NG'>Z$KF1$84X?t$r;H$&$+$i!#$3$l$,$J$$$H(B VPN $B$O5!G=$7$J$$!#(B
<li><b>ISAKMPD-Peer=</b> $B$O!">e$G$N%[%9%H$N%;%/%7%g%s$NL>A0$@@!#$D$^$j%U%'!<%:(B 2 $B@@\B3$r3NN)$9$k$?$a$K!"(B
$B$3$3$G;XDj$7$?%T%"$HOC$r$7$F$$$k$s$G$9$h!"$H$$$&0UL#$@@!#$3$l$,$"$k$N$O!"(B isakmp $B%T%"$d@@\B3$r5-=R$9$k$N$K(B
$BJ#?t$N%;%/%7%g%s$,$"$k>l9g$b$"$k$+$i$@@!#(B
d929 1
a929 1
$B$7$?$,$&$Y$-5,3J$r5-=R$7$?ItJ,$r$5$9!#(B
d931 7
a937 7
$B5-=R$7$?!"0J2<$N(B IPsec-ID $B%;%/%7%g%s$r;X$9!#$3$NItJ,$,Aw$i$l$F!"8~$3$&B&$N%2!<%H%&%'%$$,(BVPN$B7PM3$G(B
$B$3$A$i$N%M%C%H%o!<%/$K%G!<%?$rE>Aw$9$k$?$a$N%k!<%F%#%s%0%F!<%V%k$r$-$A$s$H@@_Dj$G$-$k$h$&$K$9$k!#(B
<li><b>Remote-ID=</b> $B$3$l$O!"$3$A$i$N%[%9%H$+$i8+$F!"%j%b!<%H$N%W%i%$%Y!<%H%M%C%H%o!<%/$G(B
$B$"$k$O$:$N$b$N$r5-=R$7$?!"2<$N(BIPsec-ID $B%;%/%7%g%s$r5-=R$7$F$$$k$3$NItJ,$,2r<a$5$l$F!"$3$A$i$N%W%i%$%Y!<%H%M%C%H%o!<%/$+$i(B
VPN$B7PM3$G%j%b!<%H$N%W%i%$%Y!<%H%M%C%H%o!<%/$K%G!<%?$rE>Aw$9$k$?$a$N%k!<%F%#%s%0%F!<%V%k$r$-$A$s$H@@_Dj$9$k!#(B
<p>$B$3$3$G%5%]!<%H$5$l$F$$$k%?%0$,$b$&0l$D$"$C$F!"$=$l$,(B Flags= $B$@@!#$3$N%?%0$,I,MW$J$i(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.conf&apropos=0&sektion=5&format=html">isakmpd.conf(5)</a>$B$rFI$s$G$[$7$$!#(B
d939 8
a946 6
<P>
$B$3$3$O(BIPsec-ID $B%;%/%7%g%s$@@!#0J2<$N%(%s%H%j$O!"%[%9%H(BA$B$H%[%9%H(BB$B$N(B
$BN>J}$G(B isakmpd.conf $B%U%!%$%k$NCf$K$J$1$l$P$$$1$J$$!#$3$NNc$@@$H(B
$B%[%9%H(BA ($B$3$l$O>e$N(B Net-A$B$K(B
$B$D$J$,$C$F$$$k(B) $B$G$O(B 192.168.1.0/255.255.255.0 $B!"%[%9%H(BB ($B$3$l$O>e$N(B Net-B$B$K$D$J$,$C$F$$$k(B) $B$G$O(B192.168.20.0/255.255.255.0 $B$@@!#(B
<UL><PRE>
d956 1
a956 1
</PRE></UL>
d958 5
a962 4
<p>$B$3$NFs$D$N%;%/%7%g%s$,3F%[%9%H$N(B <b>conf</b> $B%U%!%$%k$K4^$^$l$F$$$k!#$3$l$,(B
<b>Local-ID</b> $B$H(B <b>Remote-ID</b>$B$N<1JL$7$G;2>H$5$l$k%;%/%7%g%s$@@!#0l$D$N(B
$B%W%i%$%Y!<%H%M%C%H%o!<%/$+$i!"JL$N%W%i%$%Y!<%H%M%C%H%o!<%/$X$N%H%i%U%#%C%/$r2DG=$K$9$k$N$K@@_Dj$5$l$k$Y$-7PO)$H5-=R$7$F$$$k!#(B
<b>ID-type</b>= $B$O(B <b>IPV4_ADDR_SUBNET</b> $B$+(B <b>IPV4_ADDR</b>$B$,$H$l$k(B (RFC2708 $B$K$O$[$+$K$bM-8z$JCM$,$"$,$C$F$$$k!#(BOpenBSD$B$N<BAu$G$O$$$^$N$H$3$m(BIPv4 $B$7$+%5%]!<%H$5$l$F$$$J$$!#(BIPv6 $B$O!"(BOpenBSD-current $B$G%5%]!<%H$5$l$F$$$k$+$b$7$l$J$$(B)$B!#(B
d964 4
a967 3
<P>
$B!!$3$l$GN>J}$N%[%9%H$G!"(Bsample $B%U%!%$%k$O$3$s$J6q9g$K$J$C$F$$$k$O$:$@@(B:
<UL><PRE>
d972 1
a972 1
</PRE></UL>
d974 11
a984 10
$B$3$N%;%/%7%g%s$O%U%'!<%:(B 1 $B@@\B3$G;H$&0E9fJ}<0$NMW7o$r5-=R$7$F$$$k!#L>A0$O(B
<i>Configuration=</i> $BJQ?t$N$H$kCM$rH?1G$7$F$$$k!#$4$i$s$N$H$*$j!"(B
Domain of Interest (DOI) $B$r(B IPSEC $B$H$7$F5-=R$7$?!#(B<b>EXCHANGE_TYPE</b> $BJQ?t$O!"%U%'!<%:(B 1 $B$G$O(B <b>ID_PROT</b> $B$K@@_Dj$7$F$"$k!"(B
$B$3$l$O$3$NG'>Z$G%+%P!<$5$l$k%W%m%H%3%k$r;XDj$7$F$$$k!#(B
<b>Transforms=</b> $B$O$3$N$d$j$H$j$GI,MW$H$5$l$k(B ($B$^$?$O;XDj$5$l$k(B) $B0E9fJQ49J}<0$@@!#$3$NNc$G$O!"(B
$B$3$l$O@@_Dj%U%!%$%k$N2<$N%;%/%7%g%s$r$5$7$F$$$F!"$=$3$G$O!"$o$l$o$l$O(B3DES$B$G0E9f2=$5$l$F$$$F(B
SHA$B$G3NG'$G$-$k%A%'%C%/%5%`$r;}$D%Q%1%C%H$r<u$1<h$k!"$H=q$$$F$"$k!#(B
$B%5%s%W%k$N(B<b>VPN-east.conf</b>$B$K$O!"$$$m$$$mJQ49J}<0$,;3$[$I$+$$$F$"$k!#$J$<$+$H$$$&$H(B 3DES $B$d(B SHA $B$O3F<o%W%i%C%H%[!<%`$GI,$:$7$b%5%]!<%H$5$l$$$k(B
$B$o$1$G$O$J$$$+$i$@@!#(BOpenBSD $B$N>l9g!"$3$l$r4pK\E*$J@@_Dj$GJQ$($k$Y$-M}M3$OFC$K$J$$!#$3$N%;%/%7%g%s$r%3%T!<$7$FJQ49J}<0$rJQ$($k$N$O!"(B
$B$>$s$V$s$K$d$C$F$[$7$$!#M#0l!"I,MW$K$J$k$N$O!"(B Configuration= $BJQ?t$bJQ$($k$3$H$@@!#(B
d986 1
a986 1
<UL><PRE>
d991 1
a991 1
</PRE></UL>
d993 11
a1003 10
<p>$B$3$N%;%/%7%g%s$O!"(BVPN$B7PM3$GAw$i$l$k%G!<%?$N0E9f$NMW7o$r5-=R$9$k$H$3$m$G!"(B
$B>e$N(B <i>Configuration</i> $B$G;2>H$5$l$k!#$3$N%;%/%7%g%s$H!"(B
$B$9$0>e$N%U%'!<%:(B 1 $B$G$3$3$KAjEv$9$k$H$3$m$H$N$A$,$$$O!"(B <b>EXCHANGE_TYPE</b> $B$,(B <b>QUICK_MODE</b>$B$K$J$C$F$$$k$3$H$J$N$KCmL\!#(B
$B%U%'!<%:(B 2 $B$G$OI,$:$3$&$J$k!#(B
<b>Suites=</b> $B$O(B IPsec Suite $B%;%/%7%g%s$r;X$7$F$$$k!#(B
$BN>%[%9%H4V$GDs6!$5$l$F$$$k3F<o$N0E9fJ}<0$r5-=R$7$?$b$N$@@!#(B
ISAKMP $B$H(B IPsec $B$K$D$$$F$O!"$[$+$K$b@@bL@@$9$k$3$H$,$$$C$Q$$$"$k!#$$$^$N4pK\E*$J@@bL@@$r$b$H$K!"(B
$B<+N)$7$F$d$C$F$$$1$kC1=c$J$,$i$b7xO4$J(BVPN$B$,$G$-$k!#(B
$B$G$b$3$l$O!"N>%[%9%H$K$H$C$F(B<i>$BI,MW:GDc:G>.8B$N(B</i> 
<b>isakmpd.conf</b> $B$G$7$+$J$$!#(B
d1006 14
a1019 10
$B:G=i$K$3$N%G!<%b%s$rAv$i$;$k$H$-$K$O!"0J2<$N%3%^%s%I$r;H$*$&!'(B
<P>
<ul>
<tt># <b>isakmpd -d -DA=99</b></tt>
</ul>
<P>
$B%G!<%b%s$O%G!<%b%s%b!<%I$G$OAv$i$:!"$U$D$&$N%W%m%;%9$H$7$F(B
$BAv$k!#$=$7$F$9$Y$F$r%?!<%_%J%k$K=PNO$9$k!#(Bisakmpd$B$r;_$a$F(B
$B7PO)$r0lA]$9$k$K$O!"3F%N!<%I$G(Bisakmpd $B%W%m%;%9$r;&$7$F$+$i(B
<b>ipsecadm flush</b>$B$r<B9T$7$h$&!#(B
d1023 7
a1029 7
<h1>13.8 - isakmpd $B$r(B X.509 $B>ZL@@=q$H$$$C$7$g$K;H$&$K$O(B?</h1>
</p>
<P>
$B;vA0$K6&M-$7$?80$N$+$o$j$K>ZL@@=q$r;H$&$h$&$K(B isakmpd $B$r@@_Dj$9$k$N$O!"J]8n$5$l$F$$$J$$%T%"$,$?$/$5$s$"$k5pBg%M%C%H%o!<%/$N>l9g$K$O!"(B
$B>.$5$J%M%C%H%o!<%/$K$/$i$Y$F$=$s$J$K$`$:$+$7$/$J$$!#$`$7$m@@_Dj$,4JC1$K$J$C$F!"$5$i$K=EMW$J$3$H$H$7$F(B
$B804IM}$b4JC1$K$J$k$+$b$7$l$J$$!#(B
<P>
d1033 2
a1034 1
$B80$d>ZL@@=q$N@@8@@.$N;EJ}$K$D$$$F$N$h$$5-=R$,!"(Bisakmpd
d1037 1
a1037 1
$B%U%!%$%k$K=q$$$F$"$k!#I,MW$J$N$O(B
d1039 3
a1041 2
$B>ZL@@=q!"%M%C%H%o!<%/>e$N(B isakmpd $B$r;H$&%3%s%T%e!<%?$=$l$>$l$KHkL)800l$D$H!"$=$NHkL)80$N$=$l$>$l$KBP$7$F(B X.509
$B>ZL@@=q0l$D$:$D$@@!#(B
d1044 1
a1044 1
(SubjectAltName) extension $B$,I,MW$@@!#>ZL@@=q$N(B SubjectAltName extension $B$r(B
d1046 4
a1049 3
SubjectAltName$B$H$7$F(BIP$B%"%I%l%9$r@@_Dj$9$k>l9g$N@@bL@@$,(B README.PKI $B$K=q$$$F$"$k!#(B
$B$3$3$G(B IP $B%"%I%l%9$r;H$&$N$O!"(Bisakmpd $B$N(B
$B%G%U%)%k%H$N$U$k$^$$$G$b$"$k!#(B
d1052 10
a1061 8
Name) $B$+(B UFQDN (User FQDN) $B$N;HMQ$b%5%]!<%H$7$F$$$k!#(BFQDN $B$NNc$O$?$H$($P(B
<tt>www.openbsd.org</tt> $B$@@$7!"(BUFQDN $B$NNc$H$7$F$O(B
$B%a!<%k%"%I%l%9$,$"$k!#$?$H$($P(B <tt>Jorgen.Granstam@@abc.se</tt> $B$J$I!#(B
<p>
$B$3$N(B howto $BJ8=q$G$O!"(B FQDN $B$r(B
SubjectAltNames $B$G;H$&!#(BIP $B%"%I%l%9$r;H$&$[$&$,$A$g$C$H4JC1$K$J$k!#(B
$B$=$l$,(B isakmpd $B$N%G%U%)%k%H$N$U$k$^$$$@@$+$i$@@!#(B
$B$G$b!"$9$0$K$o$+$k$h$&$KBg$7$?:9$G$O$J$$!#(B
d1064 6
a1069 1
$B$3$s$J46$8$K$9$l$P$$$$!'(B
d1071 17
a1087 18
<UL><TT>
$ <b>/usr/sbin/certpatch -t fqdn -i home.mysite.se -k ca.key originalcert.crt newcert.crt</b>
</TT></UL>
$B$3$3$G(B ca.key $B$O(B CA $B$NHkL)80$J$N$G!"$3$l$,(B
$B$G$-$k$N$O(B CA $BHkL)80$K%"%/%;%9$G$-$k?M$@@$1$@@!#(B
home.mysite.se $B$H$$$&$N$O(B ($B<B:_$O$7$J$$$1$l$I(B) $B>ZL@@=q$KA^F~$5$l$k$Y$-(B FQDN $B$@@!#(B
originalcert.crt $B$H(B newcert.crt $B$N%U%!%$%kL>$OF1$8L>A0$K$7$F$b$$$$!#(B
$B$3$N>l9g!"$b$H$N%U%!%$%k$O?7$7$$JQ99:Q$_$N>ZL@@=q$K(B
$B>e=q$-$5$l$k!#(B
<p>
$B$3$N80$H>ZL@@=q$r!"(BREADME.PKI $B$N:G8e$K@@bL@@$K$7$?$,$C$F%G%#%l%/%H%j$K(B
$BJ|$j9~$b$&!#$b$7K\5$$G80$r;H$&$D$b$j$J$i!"(BCA $B80(B (ca.key) $B$O(B
$B$I$3$+0BA4$J$H$3$m$K$7$^$C$F$*$3$&!#(B


<h2>isakmpd$B$N@@_Dj(B</h2>
  
$B$3$s$I$O(B /etc/isakmpd/isakmpd.conf $B@@_Dj%U%!%$%k$r8+$F$d$m$&!#(B
d1089 2
a1090 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.conf&sektion=5">isakmpd.conf(5)</a>
$B$N%5%s%W%k%U%!%$%k$+$i<h$C$?$b$N$@@$1$l$I!"$+$J$j=q$-49$($F$"$k!#(B
d1092 4
a1095 9
$B$b$N$h$j$b$+$J$jC;$$%U%!%$%k$r;H$&!#$5$i$K%3%a%s%H$bDI2C$7$F(B
 ($B0lIt$N%3%a%s%H$O(B isakmpd.conf(5)$B$K$"$C$?$^$^(B)$B!"L>A0$b$A$g$C$HJQ$($?!#(B
$B$3$3$G;H$C$?%I%a%$%sL>$O!"$\$/$NCN$k8B$j$G$O0l$D$b<B:_$7$F$$$J$$!#(B
<p>
$B<B$O$3$l$rFI$`?M$O$_$s$J!"$9$G$K;vA06&M-80$K$D$$$F$^$H$b$KF0$/(B
$B@@_Dj$r;}$C$F$$$k$N$G(B ($BA0$N@@a$r;2>H(B) $B$3$N%U%!%$%k$G$b(B
$BL\?7$7$$$H$3$m$O$"$^$j$J$$!#$@@$+$i$3$l$O!"A4It;v:Y$+$K@@bL@@$7$?$j$O$7$J$$!#(B
$B$\$/$,@@bL@@$7$J$$ItJ,$K$D$$$F$O(B isakmpd.conf(5) $B$r(B
$B8+$F$[$7$$!#(B
d1097 6
a1102 1
$BA4BN$N9=@@.$O$3$s$J46$8$@@$H$7$h$&$+!#(B
d1104 1
d1106 1
d1119 11
a1129 10
$BMW$9$k$K!"Fs$D$N%M%C%H%o!<%/$,!"J]8n$5$l$F$$$J$$%M%C%H%o!<%/>e$r!"(BIPsec$B%H%s%M%k7PM3$G(B
$B@@\B3$5$l$k!"$H$$$&$3$H!#$3$3$G%W%i%$%Y!<%H%$%s%?!<%M%C%HMQ$KM=Ls$5$l$?(BIP
$B%"%I%l%9(B (RFC1918) $B$r;H$C$F$$$k$3$H$OL5;k$7$F$[$7$$!#(B
$B$J$K$+$7$iNc$OI,MW$@@$C$?$b$s$G!#(Bisakmpd $B$r(B NAT
$B$HAH$_9g$o$;$F;H$&$H$+$=$N<j$N$r$I$&$9$k$+$O@@bL@@$7$J$$(B($B$\$/<+?H$d$C$?$3$H$,$J$$$+$i(B)$B!#(B
<p>
$B$G$O@@_Dj%U%!%$%k$r8+$F$d$m$&!#0J2<$O!"(B
$B%;%-%e%j%F%#%2!<%H%&%'%$(B gw.mysite.se$BMQ$N%U%!%$%k$@@(B:
<UL>
<pre>
d1132 1
a1132 1
# *************  gw.mysite.se isakmpd.conf  $B$N$O$8$^$j(B       ************
d1158 1
a1158 1
# tunnel, more sectionnames would be added (and of course corresponding 
d1204 2
a1205 2
# $B$3$3$G5-=R$5$l$?%M%C%H%o!<%/>e$N%3%s%T%e!<%?$+$iH/$;$i$l$?(B
# $B%Q%1%C%H$G(B... 
d1211 3
a1213 3
# ... $B0J2<$N5-=R$H%^%C%A$9$kL\E*CO$r(B
# $B;}$C$?$b$N$O!"0E9f2=$5$l$F(B
# IPsec$B%H%s%M%k7PM3$G%j%b!<%H%7%9%F%`$KE>Aw$5$l$k!#(B
d1219 1
a1219 1
# Main mode $B$N5-=R(B
d1236 1
a1236 1
# be in the CA-directory (but not the CA private key ofcourse).
d1315 2
a1316 2
</pre>
</UL>
d1318 6
a1323 7
$B$3$3$^$G$O%m!<%+%k%7%9%F%`MQ$N@@_Dj!#%j%b!<%H%7%9%F%`$N(B
$B@@_Dj$b$^$C$?$/F1$8$@@$1$l$I!"N"JV$7$K$J$k!#$@@$+$i$A$,$&$N$O(B
isakmpd.conf $B%U%!%$%k$NF,$N$H$3$m$@@$1$@@!#(B
$B%;%-%e%j%F%#%2!<%H%&%'%$(Bgw.worksite.se$B$N(B isakmpd.conf $B%U%!%$%k$NF,$N$H$3$m$@@$18+$F$d$m$&(B:
<p>
<UL>
<pre>
d1325 1
a1325 1
# *************      gw.worksite.se isakmpd.conf $B$N$O$8$^$j(B    **********
d1360 1
a1360 1
# **********************     ... $B$D$E$/(B...      **********************
d1362 2
a1363 5
</pre>
</UL>
<p>
$B$"$^$j$`$:$+$7$/$O$J$+$C$?$M!#$?$@@FI$`$N$O$A$g$C$HB`6~$@@$C$?$+$b$7$l$J$$$1$l$I!#<!$NItJ,$O!"(B
$B$b$&$A$g$C$H$*$b$7$m$/$J$k!#(B
d1365 2
a1370 5
$B<B$r$$$($P!"(Bpolicy $B%U%!%$%k$O=i$a$F$N?M$K$O$A$g$C$H$d$d$3$7$$$+$b$7$l$J$$!#(B
$BFC$K;W$$DL$j$KF0$+$J$$$H$-$K$O!#(Bman-$B%Z!<%8(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.policy&sektion=5">isakmpd.policy(5)</a>
$B$O!"<B$O$=$s$J$K0-$/$J$$!#$H$3$m$I$3$m(B
$B$O$C$-$j$7$J$$$H$3$m$,$"$k$1$l$I!"A4BN$H$7$F$O$$$$!#(B
d1372 6
a1377 2
$B0lHV4JC1$J!"$A$c$s$H5!G=$9$k(B policy $B%U%!%$%k$O(B
$B$?$C$?0l9T$@@(B:
d1379 4
a1382 2
<UL>
<pre>
d1384 2
a1385 2
</pre>
</UL>
d1387 17
a1403 17
$B$3$l$OMW$9$k$K!"$@@$l$,@@\B3$7$F$$$$$+$K$D$$$F!"%]%j%7!<>e$N@@)Ls$O$J$K$b$J$$!"(B
$B$H$$$&$3$H$@@!#$@@$+$i$"$^$j%;%-%e%j%F%#$N9b$$@@_Dj$G$O$J$$!#$3$3$N(B
authorizer $B%?%0$O!"(Bpolicy $B$r7h$a$k8"8B$r;}$C$??MJ*!"(B
$B$H$$$&$3$H$@@!#FCJL(B authorizer $B$G$"$k(B&quot;POLICY&quot; $B$O!"(B
policy $B$K$D$$$F:G=*E*$+$DL58B$N8"8B$r;}$D!#$=$l0J30$N(B authorizer $B$O!"(B
$B$3$3$G8"8B$r;}$D$?$a$K$O$^$:(B &quot;POLICY&quot; $B$KG'Dj$7$F$b$i$o$J$1$l$P$J$i$J$$!#(B
<p>
$B$5$i$K2?$,5v$5$l$k$+$K$D$$$F!">r7o72$,$"$k$+$b$7$l$J$$!#(B
$B0J2<$N(B policy $B$O$@@$+$i!"K\J*$N0E9f$r2?$+;H$C$F(B ESP
$B%W%m%H%3%k$r;HMQ$7$??M$@@$1$,G'Dj$5$l$k$H$$$&$3$H$@@(B ($BK\J*$H$$$C$F$b$^$"!"(B
$B$3$l$@@$H(B DES $B$r;H$C$F$$$k?M$bG'$a$i$l$F!"(BDES $B$O(B
$B$$$^$d$[$H$s$I%$%s%A%-$H;W$C$F$b$$$$$/$i$$$@@$1$l$I!"$G$b(B DES $B$rG'$a$J$$$h$&$K(B
$B$3$N(B policy $B$rJQ99$9$k$N$O!"FI<T$NN}=,LdBj$H$7$F;D$7$F$*$3$&$+(B)$B!#(B
$B$3$l$@@$H(BESP $B$G0E9f2=$9$k?M$J$i$@@$l$G$bG'$a$i$l$k$3$H$KCm0U!#(B
<p>
<UL>
<pre>
d1409 2
a1410 2
</pre>
</UL>
d1412 6
a1417 7
$B$5$i$K8"8B$r$@@$l$+B>$NB8:_(B ($BJ#?t$G$b(B
$B$$$$(B) $B$K!V%5%V%i%$%;%s%9!W$9$k$3$H$b$G$-$k!#4JC1$J%1!<%9$H$7$F$O!";vA06&M-80$N(B
$B>l9g$@@!#$3$N>l9g!";vA0$K6&M-$5$l$?%Q%9%o!<%I$rCN$C$F$$$k?M$O$9$Y$F(B
$BG'$a$i$l$k!#$@@$+$i!'(B
<p>
<UL>
<pre>
d1423 2
a1424 2
</pre>
</UL>
d1426 4
a1429 9
$B$3$l$O$3$N%Q%9%o!<%I$rCN$C$F>r7o$K%^%C%A$7$??M$9$Y$F$K(B
$B@@\B3$rG'$a$k(B ($B$?$@@$7$3$N%Q%9%o!<%I$O(B isalmpd.conf $B$N(B Authentication $B%?%0$G$b(B
$B@@_Dj$7$F$*$/$N$r$*K:$l$J$/(B)$B!#(B
<p>
$B$3$3$^$G$O2?$b$`$:$+$7$/$J$$!#$3$C$+$i$,$*$b$7$m$$$H$3$m!#$^$:!"(B
$B%i%$%;%s%9$r<u$1$kB8:_$O$?$/$5$s$"$C$F$b$$$$$1$l$I!"$=$N$9$Y$F$,(B &quot;POLICY&quot;$B$KG'Dj$5$l$J$/$F$O$J$i$J$$!#(B
$B$5$i$KG'Dj$5$l$?%i%$%;%s%9J];}<T$O!"B>$N%i%$%;%s%9J];}<T$K%5%V%i%$%;%s%9$r=P$;$k!#(B
$B%i%$%;%s%9J];}<T$O!"(Bpolicy$B%U%!%$%k$G$5$i$K5-=R$5$l$F$$$?$i(B
$BC1$J$k%9%H%j%s%0$G$b$$$$(B:
d1431 7
a1437 2
<UL>
<pre>
d1449 2
a1450 2
</pre>
</UL>
d1452 7
a1458 8
$B$5$"$_$J$5$s$*BT$A$+$M$NItJ,!#(BPolicy $B$O$^$?!"(B
$B80$K%5%V%i%$%;%s%9$7$?$j8"8B0Q>y$7$?$j$G$-$k!#$3$N>l9g$N80$O!"$U$D$&$O(B
X.509 $B>ZL@@=q$@@!#>ZL@@=q$r4JC1$K;H$&$K$O!"(B
$B$=$l$r%Q%9%o!<%I$,$o$j$K;H$&$3$H$@@!#(B
policy $B%U%!%$%k$K8DJL%f!<%6$N>ZL@@=q$r2C$($k$@@$1$G$$$$(B:
<p>
<UL>
<pre>
d1465 1
a1465 1
        CzA           $B$3$NItJ,$O%f!<%6>ZL@@=q$G$4$6$$$^$9$J(B          AQEB\
d1476 2
a1477 2
</pre>
</UL>
d1479 1
a1479 1
$B$5$F!"%f!<%6$N?t$,B?$1$l$P!"$3$N$d$jJ}$,$P$+$2$F$$$k$N$O$9$0$o$+$k!#(B
d1481 5
a1485 6
$B%G%#%l%/%H%j$+$iFI$s$G$/$k>ZL@@=q$H!"%T%"$+$iAw$i$l$F$/$k>ZL@@=q$O!"(B
$B5?;w;q3J>ZL@@(B (credentials) $B$KJQ49$5$l$k!#$3$&$7$?5?;w;q3J>ZL@@$KJQ49$5$l$?>ZL@@=q$O!"(B
$B$3$s$J46$8$K$J$C$F$$$k(B:
<p>
<UL>
<pre>
d1489 2
a1490 2
    	CzA  $B$3$NItJ,$O%f!<%6>ZL@@=q(B ($B$D$^$j(BCA$B>ZL@@=q(B) $B$K=pL>$7$?(B     AQEB\
        BQA             $B!!?M$N8x3+80!?>ZL@@=q$G$9$J(B                  IUuz\
d1500 2
a1501 2
        CzA          $B$3$3$s$H$3$O>ZL@@=q$r<u$1$kB&$N80$K!!(B           AQEB\
        BQA                          $B$J$j$^$9(B                       IUuz\
d1509 2
a1510 2
</pre>
</UL>
d1512 9
a1520 10
$B$5$F!"$3$l$i$,(B &quot;POLICY&quot; $B$KG'$a$i$l$?$b$N$G$O$J$$$N$G!"(B
$B$=$l$r$J$s$i$+$N7A$GG'CN$9$k(B policy $B$,$J$1$l$P%@@%a$@@$H$$$&$3$H$KCm0U!#$5$i$K!"$3$l$O(B
$BFbIt$G>ZL@@=q$,$I$&$J$C$F$$$k$+$r@@bL@@$7$F$$$k!#>e$N;q3J>ZL@@(B (credential) $B$O!"(B
policy $B%U%!%$%k$NCf$G$O8+$i$l$J$$!#$G$b!"$=$&$$$&;q3J>ZL@@$K(B
$B%5%V%i%$%;%s%9$O=P$;$k!#>e$N%5%V%i%$%;%s%9H/9T$r;W$$$@@$7$F$[$7$$!#$"$l$r;H$($P!"(B
CA$B>ZL@@=q$r%i%$%;%s%9$H$7$F(B &quot;POLICY&quot;$B$K=q$$$F$d$l$P!"(B
$B$"$k(B CA $B$,=pL>$7$?>ZL@@=q$9$Y$F$K%i%$%;%s%9$,=P$;$k!#(B
<p>
<UL>
<pre>
d1527 1
a1527 1
        CzA             $B$3$NItJ,$,(B CA $B>ZL@@=q$G$4$6$$$^$9$J(B          AQEB\
d1538 18
a1555 2
</pre>
</UL>
d1557 7
a1563 20
$B$D$^$j>e$N(B policy $B$O!"(BCA $B$K8"8B0Q>y$9$k(B policy $B$N4JC1$JNc$@@!#(B
$B$3$N>ZL@@=q$r;}$C$?(B CA $B$,=pL>$7$?>ZL@@=q$r;}$C$F$$$F(B
policy $B$H@@_Dj%U%!%$%k$N@@_Dj$7$?$[$+$N>r7o$K$b(B
$B$7$?$,$C$F$$$k%f!<%6$O$9$Y$FG'$a$i$l$k!#(B
<p>

<h2>$B$[$H$s$I0BA4!D!D$O0BA4$KHs$:(B!</h2>

$B$5$F!"K\Ev$K0BA4$r4|$9$k$J$i!"$3$l$G$O;DG0$J$,$i==J,$G$O$J$$$N$@@!#(B
$B$3$&$$$&@@_Dj$N%;%-%e%j%F%#%2!<%H%&%'%$$r967b$9$kJ}K!$,$"$k!#(B
$B$b$7:Y!9$7$?OC$,$$$i$J$$$J$i!"$$$^$9$0<!$N@@a$^$GHt$P$=$&!#(B
$B$=$l0J30$N?M$?$A$O!"$J$<$3$l$,0BA4$G$J$$$+$rM}2r$7$F$_$h$&$G$O$J$$$N!#(B
$B$`$:$+$7$/$O$J$$$h!#(B
<p>
$B$3$NCJ3,$G!"(Bisakmpds $B$,$I$s$J>pJs$K%"%/%;%9$G$-$k$+9M$($F$[$7$$!#(B
$B@@_Dj%U%!%$%k$+$i!"(Bisakmpd $B$O%T%"$,$I$N(B IP-$B%"%I%l%9$+$i(B
$BAw?.$7$F$/$k$+$o$+$k(B ([$B%U%'!<%:(B 1] $B%;%/%7%g%s$G(B)$B!#%U%'!<%:(B 1 $B$N(B
$B%M%4%7%(!<%7%g%s$r$9$k$H$-$KF@@$i$l$k>pJs$+$i!"%T%"$,$I$s$J(B ID $B$r(B
$B=P$7$F$/$k$+$o$+$C$F!"%T%"$+$i$N>ZL@@=q$r$b$i$C$?$i$=$l$G%T%"$,K\Ev$K(B
$B$=$N(BID$B$r;}$C$F$$$k$3$H$,>ZL@@$5$l$k!#LdBj$J$5$=$&$@@$M(B?
d1565 2
a1566 2
$B$&$s!"$b$7(BID $B>pJs$,(B IP $B$J$i(B ($B%U%'!<%:(B 1 $B$N(B ID $B%;%/%7%g%s$r;H$o$J$1$l$P(B
$B$3$l$,%G%U%)%k%H$K>u67$K$J$k(B) $B$9$Y$F$O%*%C%1!<$@@!#(BCA
d1568 5
a1572 5
$B$@@$1$GI,MW>pJs$O$9$Y$F$=$m$&!#$J$j$9$^$7HH$,!"$[$+$N%3%s%T%e!<%?$+$i(B
$BF1$8(B IP $B$r;H$&$3$H$bIT2DG=$G$O$J$$(B
($B$?$H$($PN>J}$N%3%s%T%e!<%?$,F1$8(B LAN $B>e$K$"$C$F!"(B
$B$U$@@$s$=$N(B IP $B$r;H$C$F$$$k%^%7%s$,$J$s$i$+$NM}M3$G%@@%&%s$7$F$$$k$J$I(B)$B!#(B
$B$G$b!"$J$j$9$^$7HH$,!">ZL@@=q$H$=$l$KBP1~$9$kHkL)80$r;}$C$F!"(B
d1574 2
a1575 1
$BIT2DG=$J$O$:$@@!#(B
d1577 15
a1591 15
$B$b$7$=$l$,K|$,0l5/$3$C$?$i!"$=$N$J$j$9$^$7HH$O$=$N(BIP$B$N=jM-<T$+$iHkL)80$r(B
$B$I$&$K$+$7$FEp$s$@@$+!"$"$k$$$O(B CA $B$r$J$s$i$+$NJ}K!$G$@@$^$7$F!"(B
$B$K$;$N>pJs$r4^$s$@@>ZL@@=q$rH/9T$5$;$?$+$N$I$A$i$+$@@!#(B
$B$b$7$3$N$$$:$l$+$,5/$3$C$?$J$i!"(B
$BHkL)80$NJ]8n$,IT==J,$@@$C$?$+!"(BCA $B$,(B
$B$J$j$9$^$7HH$N?H85(B ($B$"$k$$$O(B cert $B$N(B
ID $B>pJs(B) $B$r==J,$K%A%'%C%/$G$-$J$+$C$?$+!"$"$k$$$O(B CA $BHkL)80$,==J,$KJ]8n$5$l$F$$$J$+$C$?$+$@@!#(B
$B$3$l$i$O$9$Y$F!"$=$b$=$b%;%-%e%j%F%#$,$^$H$b$K5!G=$9$kA0Ds$J$N$G!"(B
$B$3$&$$$&>u67$O@@dBP$K5/$3$C$F$O$$$1$J$$!#(B

<p>
$B$5$F$\$/$?$A$NNc$G$O>u67$,$A$,$&!#$3$3$G$O(B
$B>ZL@@=q$NCf$K!"(BIP$B%"%I%l%9$G$O$J$/(B FQDN $B$,F~$C$F$$$k!#(B
[Phase 1] $B%;%/%7%g%s$K$^$@@(B IP $B%"%I%l%9$,$"$k$N$G!"(B
$B$3$l$O%;%-%e%j%F%#LdBj$H$J$k2DG=@@-$,$"$k!#(BISAKMP
d1593 51
a1643 48
$B4|BT$I$*$j$N(B IP $B$+$iAw$i$l$F$-$?$3$H$r%A%'%C%/$G$-$k(B ($B$G$b$5$C$-@@bL@@$7$?$h$&$K!"(B
$B$3$l$O0lIt$N>u67$G$O$4$^$+$;$k(B)$B!#%T%"$,Ds<($9$k(BID$B$r!"(B
$BK\Ev$K$=$N%T%"$,;}$C$F$$$k$3$H$b%A%'%C%/$G$-$k!#(B
$B$G$b!"$$$^%A%'%C%/$G$-$J$$$N$O!"$=$N(BID $B$,K\Ev$K$=$N%T%"$,;}$C$F$$$k$H4|BT$9$Y$-(B ID $B$J$N$+!"$H$$$&$3$H$@@!#(B
isakmpd $B$O!"$I$s$J(B ID $B$r4|BT$9$l$P$$$$$+0lEY$b65$o$C$F$$$J$$$+$i$@@!#(B
<p>
DNS $B%7%9%F%`$,%[%9%H$N$?$a$K(B IP $B$r(B FQDN $B$H(B
$B7k$S$D$1$F$/$l$k!"$H$$$&?M$b$$$k$@@$m$&!#$=$l$O$=$&$J$s$@@$1$l$I!"8=:_$N(B DNS $B%7%9%F%`$O%;%-%e%j%F%#$,9b$/$J$$$7!"(B
$B$@@$^$7$F$K$;$N>pJs$r=P$5$;$k$3$H$b!">l9g$K$h$C$F$O(B
$B$G$-$k(B ($B$"$k$$$O%5!<%S%95qH](B (DoS) $B967b$r(B
$B967b<T$K<u$1$F!"$=$N967b<T$N%^%7%s$,(BDNS$B%5!<%P$NEz$r(B
$B56B$$9$k$3$H$b$G$-$k(B)$B!#$$$:$l9b%;%-%e%j%F%#(B DNS $B$bEP>l$9$k$1$l$I!"(B
$B$^$@@=P2s$C$F$$$J$$$7(B ($B>/$J$/$H$b$[$H$s$I$N(B DNS $B%5!<%P$O$^$@@9b%;%-%e%j%F%#$G$O$J$$(B)$B!"(B
$B$@@$+$i8=:_!"(Bcert $B$N(B FQDN $B$,4|BT$5$l$k(B IP $B$HBP1~$7$F$$$k$+$rD4$Y$k$N$K(B
DNS $B$r;H$C$F$bJ]>Z$K$O$J$i$J$$!#<B$O(B isakmpd $B$O$3$l$r(B DNS $B$K$-$$$?$j$7$J$$!#(B
DNS $B$,0BA4$G$b!"(BUFQDN$B$r;H$C$F$$$k>l9g$K$O(B
$B$3$l$r%A%'%C%/$G$-$J$$!#(B
<p>
$B$D$^$j(B ID $B$H$7$F(B FQDN $B$r;H$&>l9g!"%"%?%C%+!<$O(B
$B<+J,$NHkL)80$rMQ0U$7$F!"$=$l$r$o$l$o$l$N;H$&$N$H(B
$BF1$8(B CA $B$K=pL>$5$;$k(B ($B$G$b$b$A$m$s%"%?%C%+!<<+?H$N(B FQDN $B$r;H$C$F(B)$B!#$=$l$+$i(B
$B%T%"$K(B DoS $B967b$r$7$+$1$F%@@%&%s$5$;$k(B ($B<B$O(B
ISAKMP $B%W%m%H%3%k<+BN$K7g4Y$,$"$C$F!"%T%"$KBP$7$F(B
$B%j%b!<%H(BDoS $B$r;E3]$1$F%@@%&%s$5$;$F$7$^$($k2DG=@@-$,$"$k$1$l$I!"(B
isakmpd $B$,$3$&$$$&967b$KBP$7$F$I$N$/$i$$IR46$+$OCN$i$J$$(B)$B!#$=$l$+$i(B
$B%"%?%C%+!<$O<+J,$N%3%s%T%e!<%?$r$o$l$o$l$N%T%"$HF1$8$h$&$K@@_Dj$7$F!"(B
$B%T%"$N%M%C%H%o!<%/$K$D$J$$$G(B
$B<+J,$N(BID$B$HHkL)80$H>ZL@@=q$r;H$($k!#(B
<p>
$B$\$/$?$AB&$N(B isakmpd $B$O!"$3$C$A$N%T%"$X$N(B ID $B$,2?$+$r65$o$C$F$$$J$$(B ($B$=$7$F$=$l$O!"%"%?%C%+!<$,(B
$B>ZL@@=q$H(BID$B$HHkL)800J30$O$^$C$?$/F1$8@@_Dj$K$7$F$*$$$?$+$i(B)$B!#$5$i$K$\$/$?$A$N(B
isakmpd $B$O>ZL@@=q$,F1$8(B CA $B$N%5%$%s$7$?$b$N$@@$H%A%'%C%/$G$-$k(B ($B$G$b(B
$BB?$/$N(B CA $B$O(Bcert $B$r$$$C$Q$$%5%$%s$9$k$+$i!"(Bcert $B$r<j$KF~$l$k$N$O$`$:$+$7$/$J$$$+$b(B)$B!#$=$7$F(B
$B$=$3$G<($5$l$?(B ID $B$,>ZL@@=q$NCf$N(B ID $B$H$$$C$7$g$J$N$b3NG'$G$-$k!#$G$b!"(B
$B$3$l$^$GDs<($5$l$?@@_Dj$G$O!"$=$N(B ID $B$,4|(B
$BBT$7$F$$$?(B ID $B$+$I$&$+$O%A%'%C%/$G$-$J$$!#$@@$+$i%"%?%C%+!<$O@@\B3$rG'$a$i$l$F$7$^$&!#(B
<p>

<h3>$B967b$r$U$;$0(B</h3>

$B$9$k$HLdBj$O!"$I$&$d$C$?$i(B isakmpd $B$K4|BT$9$Y$-(B ID $B$N$3$H$r65$($F$"$2$i$l$k$+!"(B
$B$H$$$&$3$H$@@!#$"$j$,$?$$$3$H$K$3$l$O4JC1$G!"(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.policy&sektion=5">isakmpd.policy(5)</a>$B$K$b@@bL@@$5$l$F$$$k!#(B
policy$BFb$G%A%'%C%/$r$+$1$J$-$c$$$1$J$$$N$@@!#(B
$B$?$H$($P$3$s$J$U$&$K(B:
<p>
<UL>
<pre>
d1650 1
a1650 1
        CzA             $B$3$NItJ,$,(B CA $B>ZL@@=q$G$4$6$$$^$9$J(B          AQEB\
d1662 2
a1663 2
</pre>
</UL>
d1665 5
a1669 6
$B$3$l$G!"(BIPsec$B@@\B3$rF@@$i$l$k$N$O(B gw.worksite.se $B$@@$1$N$O$:!#$[(B
$B$+$K(B remote_id$B$N%A%'%C%/$rB-$;$P!"5v2D$5$l$k(BID$B$O4JC1$KA}$($k!#(B
$B$D$^$j0J2<$N$h$&$J$N$r(B policy $B$KB-$;$P$$$$(B:
<p>
<UL>
<pre>
d1675 2
a1676 2
</pre>
</UL>
d1678 2
a1679 2
$B$3$N(B policy $B$@@$H!"(Bgw.worksite.se, gw.somesite.se$B!"(B
gw.whatsite.se $B$N$$$:$l$b@@\B3$G$-$k!#(B
d1682 9
a1690 9
policy $B$K>ZL@@=q4]$4$H4^$a$J$/$F$O$J$i$J$$$N$O;DG0!"(B
$B$H$$$&?M$b$$$k$@@$m$&!#>ZL@@=q$r(B policy $B$K(B
$BF~$k$h$&$J7A<0$K$J$*$9$N$O<j4V$@@$7!"(B
policy $B$bFI$_$K$/$/$J$k!#$@@$l$+$,$^$A$,$C$F!"(B
$B$d$d$3$7$$(B policy $B$N$J$+$G!"(BCA $B>ZL@@=q$H$^$A$,$($F(B
$B%f!<%6>ZL@@=q$rF~$l$F$7$^$C$?$i!"8"8B$N$J$$%f!<%6$b(B
$B@@\B3$,G'$a$i$l$F$7$^$&$+$b$7$l$:!"$5$i$K:$$C$?$3$H$K!"(B
policy $B%U%!%$%k$r8+$F$b$=$l$r$D$-$H$a$k$N$O$`$:$+$7$$(B (X.509 $B>ZL@@=q$O(B
$B?M4V$KFI$a$k7A$G$O$J$$$+$i(B)$B!#(B
d1693 6
a1698 6
$B$5$F!"K\Ev$K%+%j%+%j$N:G@@hC<$N?M$?$A$K$O!"(B
$B$3$NLdBj$N2r7hJ}K!$,$"$k!#$$$^$G$O!"(Bpolicy $BFb$G>ZL@@=q$=$N$b$N$N$+$o$j$K!"(B
$B>ZL@@=q$N(BDistinguished Name (DN) $B$r;H$&$3$H$,$G$-$k(B ($BBP1~$9$k(B
$B>ZL@@=q$O$b$A$m$s%G%#%9%/>e$N(B certs
$B$+(B ca $B%G%#%l%/%H%j$K$"$C$F!"(Bisakmpd $B$,8+$D$1$i$l$k$h$&$K$J$C$F$$$k$3$H(B)$B!#$3$N(B
$B7A<0$@@$H!">e$N(B policy $B$O0J2<$N$h$&$J46$8$K$J$k$@@$m$&(B:
d1700 1
a1700 3
<p>
<UL>
<pre>  
d1711 2
a1712 2
</pre>
</UL>
d1714 5
a1718 5
$B$:$C$HFI$_$d$9$$!"$G$7$g!)!!$"$k>ZL@@=q$N@@53N$J(B DN
$B$O!"(Bopenssl $B%f!<%F%#%j%F%#$r;H$C$F>ZL@@=q$r8+$F$d$k$H$o$+$k!#(B
$B$3$s$J6q9g(B:
<p>
<UL><tt>
d1720 2
a1721 1
</tt></UL>
d1723 4
a1726 3
$B$b$C$HJ#;($J(B policy $B$O$b$A$m$s$G$-$k$1$l$I!"(B
$B$3$l$O$H$j$"$($:F~Lg$@@$7!"<!$N@@a$GJL$NNc$r8+$F(B
$B$d$k$3$H$K$J$k!#(B
d1729 3
a1731 3
$BDs6!$5$l$k$O$:$@@!#(Bpolicy $B$,>.$5$$$+!"$=$3$=$3$/$i$$$J$i(B
$B$3$l$G$b$$$$$@@$m$&!#$G$b5pBg$J%5%$%H$G@@\B3%f!<%6$,;3$[$I$$$k$J$i!"(B
$B$3$l$G$b$^$@@$^$@@$@@!#(B
a1732 1
<H2>$B%^%k%A%f!<%6@@_Dj$H!"Cf1{4IM}7?G'>Z(B</h2>
d1734 1
a1734 5
$B$=$l$8$c(B isakmpd $B$N%[%s%H$K%/!<%k$J5!G=$r$$$/$D$+8+$F$d$m$&!#$3$l$^$G$O!"(B
$B@@\B3$7$F$/$k$O$:$N%T%"$O$h$/CN$i$l$F$$$F!"(BIP$B%"%I%l%9$b@@EE*$K8GDj$5$l$F$$$k$b$N$H$7$?!#(B
$B$G$b!"$=$&$$$&>l9g$P$+$j$8$c$J$$!#F0E*$K3d$jEv$F$i$l$?(BIP$B$r;H$C$?$j!"(B
$B%3%s%T%e!<%?$r2?Bf$b;H$C$?$j$9$k?M$OB?$$!#$"$k$$$O(B ($B%5!<%P(B
$B$J$s$+$@@$H(B) $B@@\B3$7$?$$$N$,$@@$l$J$N$+!"$O$C$-$j$o$+$i$J$$$3$H$b$"$k!#(B
d1737 6
a1742 4
$B$=$3$G(Bisakmpd$B$N$9$F$-$J5!G=$N0l$D$O!"(B
[Phase 1]$B%;%/%7%g%s$G(BIP$B$G$O$J$/%G%U%)%k%H$N%?%0$r;H$($k$H$$$&$b$N!#(B
$B$3$l$K$h$C$F!"(Bisakmpd$B$O$I$N(BIP$B$+$i$G$b%M%4%7%(!<%7%g%s$r<u$1IU$1$i$l$k$h$&$K$J$k!#(B
$B$3$l$O$3$s$J46$8$K$J$k!'(B
d1744 6
a1749 2
<UL>
<pre>
d1752 8
a1759 2
</pre>
</UL>
d1761 9
a1769 15
$B$^$:8@@$C$F$*$/$Y$-$J$N$O!"$3$N@@_Dj$O(BDoS$B967b$KBP$7$F(B
$B0BA4$G$O$J$$$+$b$7$l$J$$$H$$$&$3$H!#$^$($K$b8@@$C$?$h$&$K!"(B
ISAKMP/IKE$B%W%m%H%3%k$K$O7g4Y$,$"$k!#$$$:$l$K$7$F$b!"%G%U%)%k%H$N(B [phase 1] $B%;%/%7%g%s$r;H$($P!"(B
$B0l<o$N!VG'>Z>ZL@@=q!W$,JQ$o$j$K;H$($k$h$&$K$J$k!#(B
<p>
$B$?$H$($P8"8B$r;}$D%f!<%6$O$?$/$5$s$$$k$1$l$I!"(B
$B$G$bC/$G$b$$$$$+$i$&$1$D$1$k!"$H$$$&$o$1$G$O$J$$>l9g$r9M$($F$_$h$&!#$?$H$($P2q<R$J$s$+$N>l9g!#(B
$B2q<R$N=>6H0w$O@@\B3$5$;$?$$$1$l$I!"$=$l0J30$N?M$K$O@@\B3$7$F$[$7$/$J$$!#$5$F!"(B
$BBg4k6H$G<R0w$,2?@@i?M$b$$$k$H$7$h$&!#$+$l$i$,(B
$B$I$N%3%s%T%e!<%?$+$i$G$b(B ($B<RFb(BLAN$B>e$N$b$N$K8B$i$:(B) $B@@\B3$G$-$k$h$&$K$7$?$$$1$l$I!"(B
$BA40w$,$J$s$G$b$G$-$k$h$&$K$O$7$?$/$J$$!#$3$N>l9g!"(B
$B<!$N$h$&$J(Bpolicy $B$,=q$1$k$O$:$@@!'(B
<P>
<UL>
<pre>
d1802 2
a1803 2
</pre> 
</UL>
d1805 10
a1814 11

$B$3$l$O87L)$K@@5$7$$$+$I$&$+$O$o$+$i$s!#$\$/$,CN$k8B$j!"(B
$B$3$$$D$O$^$C$?$/%F%9%H$7$F$$$J$$(B ($B$@@$+$i$3$N%U%#%k%?>r7o$O!"$\$/$N;W$$DL$j$K$O(B
$B$<$s$<$sF0$+$J$$$+$b$7$l$J$$(B)$B!#$=$l$H!"$3$$$D$_$?$$$J(Bpolicy  ($B$H$$$&$+!"(B
$B%G%U%)%k%H$,%T%"$N(BIP$B$K$7$F$"$k$b$N$9$Y$F(B) $B$O!"(Bisakmpd.conf$B%U%!%$%k$b$"$o$;$F=q$-49$($J$$$H(B
$B%@@%a$@@!#$3$l$K$O!"%;%-%e%j%F%#>e$NLdBj$b$D$$$F$^$o$k!#$5$i$K!"(B
$B$@@$l$G$b@@\B3$G$-$k$h$&$K$J$C$F$$$k$3$N<o$N@@\B3$G$O!"(B
$B$?$V$s@@\B3$7$??M$N(B DN $B$O$9$Y$F%m%0$7$F$*$$$?$[$&$,(B
$BK>$^$7$$!#(Bisakmpd $B$O$\$/$NCN$k8B$j$G$O!"$3$l$r$^$@@%5%]!<%H$7$F$$$J$$!#$5$i$K(B
$B$3$N2DG=@@-$K$O$Y$D$N%;%-%e%j%F%#>e$NLdBj$,$D$$$F$/$k$+$b$7$l$J$$!#$J$K$+$"$C$F$b!"(B
$B$@@$l$b@@UG$$O$H$C$F$/$l$J$$$N$G!"3P8g$7$F?J$`$h$&$K!#$G$b4pK\E*$J9M$(J}$O$b$&$O$C$-$j$7$F$$$k$O$:$@@!#(B
d1817 5
a1821 6

$B$$$^$N$,;}$C$F$$$k!"<B$K$*$b$7$m$$2DG=@@-$K;W$$Ev$?$i$J$$?M$,$$$k$H%"%l$@@$+$i!"G0$N$?$a@@bL@@$7$F$*$3$&!"(B
$B$b$7$3$&$$$&7A$G(BISAKMP/IKE $B$r;H$C$F$$$k%3%s%T%e!<%?$,$9$Y$F!"(B
$B%j%b!<%H$+$i%f!<%6$,;H$$$?$$$H;W$C$F$$$k%5!<%S%9$N$=$l$>$l$K$D$$$F!">r7o$NB+$r;}$C$F$$$?$H$7$h$&!#$9$k$H(B CA $B$O!"(B
$B%f!<%6$N>ZL@@=q$K$7$+$k$Y$-(B SubjectAltName
extension $B$rF~$l$F$*$/$@@$1$G$=$N%f!<%6$NG'>Z$,$G$-$k!#$5$i$K!"$=$&$$$&>ZL@@=q$NM-8z4|8B$r(B
d1824 18
a1841 7
$B$7$F$*$/!#$b$7%f!<%6$,8"8B$r0-MQ$9$k$J$i!"(B
$B>ZL@@=q$r:FH/9T$7$J$$$h$&$K$9$l$P!"M-8z4|8B8e$OF~$C$F$3$i$l$J$$!#(B
$B<R0w$,0l?M$d$a$?$/$i$$$G!"(B
$B$9$Y$F$N%3%s%T%e!<%?>e$N(Bpolicy$B%U%!%$%k$rJQ$($kI,MW$b$J$$!#(B
$BF1$8J}<0$O(BISAKMP/IPsec $B0J30$NL\E*$K$b;H$($k$O$:$@@(B ($B%*%U%i%$%s%7%9%F%`$NG'>Z$5$($G$-$k!*(B)$B!#(B
$B$?$@@$7$=$N>l9g$K$OFCJL$J%=%U%H$,I,MW$K$J$k$1$l$I!#(B
$B$H$K$+$/!#$3$l$r$d$kAH?%$O$*$=$i$/<+J,$G<+J,<+?H$N(BCA$B$K$J$C$?$[$&$,$$$$!#(B
d1844 8
d1853 10
a1862 8
$B$3$&$$$&%^%k%A%f!<%6@@_Dj(B ($B%b%P%$%k%f!<%6(B) $B$O!"(B
$B;vA06&M-80$G$b$G$-$&$1$l$I!"$G$b$=$l$@@$H!"$I$N(BIP$B$+$i@@\B3$7$F$/$k$+$o$+$i$J$$$+$i!"(B
ID$B$r$b$H$K@@5$7$$%Q%9%o!<%I$,A*$Y$k$h$&$K$J$C$F$$$kI,MW$,$"$k!#(B
$B$@@$+$i(BID_PROT$B%b!<%I$G$O$J$/(BAGGRESSIVE $B%b!<%I$r(B
$B;H$o$J$/$F$O$J$i$J$$(B(AGGRESSIVE $B%b!<%I$G$O!"(BID$B$O%M%4%7%(!<%7%g%s$N(B
$B=i4|$NCJ3,$GAw$i$l$k$1$l$I!"0E9f2=$5$l$J$$$GAw$i$l$k!#$@@$+$i(B
AGGRESSIVE $B%b!<%I$N$[$&$,%a%C%;!<%88r49$,>/$J$/$F$9$`$N$G!"9bB.$@@$1$l$I!"(B
ID$B$,%J%^$N$^$^$GAw$i$l$k$+$i$A$g$C$H%;%-%e%j%F%#$O2<$,$k(B)$B!#(B
d1865 20
a1884 37
<a name= "IKEcl"></a>
<h1>13.9 - isakmpd$B$G;H$($k(BIKE $B%/%i%$%"%s%H$O(B ?</h1>
</a>
<P>
<tt>isakmpd</tt> $B$O!"(BOpenBSD $B$K$D$$$F$/$k(B ISAKMP/Oakley $B804IM}%G!<%b%s$@@!#(B
$B$?$V$s!"$[$H$s$I$N(B ISAKMP $B<BAu$H$O!"ItJ,E*$K$;$hAj8_1?MQ2DG=$@@$H;W$&$1$l$I!"(B
$B<B:]$K%F%9%H$5$l$?$N$O0J2<$N$b$N$@@!#=P2s$C$F$$$k(B
isakmp $B%=%U%H$N0lIt$O!"<B$O(B OpenBSD isakmp $B%G!<%b%s$r%Y!<%9$K$7$?$b$N$@@$C$?$j$9$k!#(B
<P>
$B0J2<$N(B MS-Windows $B%/%i%$%"%s%H$O!"8_49@@-$,$"$k$H$NJs9p$,$"$k(B:
<UL>
<!-- <LI><a href="http://www.timestep.com/">TimeStep</a> PERMIT/Client -->
<LI><a href="http://www.vpcom.com/">Ashley Laurent</a> VPCom VPN $B%=%U%H%&%'%"(B
<LI><a href="http://www.radguard.com/">Radguard</a> cIPro $B%/%i%$%"%s%H(B
<LI><a href="http://www.cisco.com/">Cisco</a> IRE $B%/%i%$%"%s%H(B
<LI><a href="http://www.microsoft.com">Microsoft</a> Windows 2000$B!"(BXP
</UL>
<P>
$B0J2<$N%2!<%H%&%'%$(B/$B%k!<%?$b8_49@@-$,$"$k$H$NJs9p(B:
<UL>
<LI><a href="http://www.cisco.com/">Cisco</a> IOS
<LI><a href="http://www.cisco.com/">Cisco</a> PIX
<LI><a href="http://www.intel.com/">Intel</a> LanRover
<!-- <LI><a href="http://www.timestep.com/">TimeStep</a> PERMIT/Gate -->
<LI><a href="http://www.cendio.com/">Cendio</a> Fuego
<LI><a href="http://www.kame.net/">KAME</a> for FreeBSD
<LI><a href="http://www.xs4all.nl/~freeswan/">FreeS/WAN</a> for Linux
<LI><a href="http://www.symantec.com/">Symantec</a> Raptor
<LI><a href="http://www.ericsson.com/">Ericsson</a> eBox
<LI><a href="http://www.f-secure.com/">F-Secure</a> VPN+
<LI><a href="http://www.teamware.com/">Teamware</a> TWISS
<LI><a href="http://www.3com.com/">3com</a> Pathbuilder
<LI><a href="http://www.nortelnetworks.com/">Nortel</a> Contivity
<LI><a href="http://www.checkpoint.com/">CheckPoint</a> FW-1
<LI><a href="http://www.watchguard.com/">Watchguard</a> Firebox III
<LI><a href="http://www.lucent.com/">Lucent</a> Access Point
</UL>
d1888 20
a1907 2
<h1>13.10 - Troubleshooting IPsec/VPN</h1>
</p>
d1909 3
a1911 21
IPsec $B%H%i%V%k%7%e!<%F%#%s%0$N:G=i$N%D!<%k$O(B <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&apropos=0&sektion=8&format=html">tcpdump(8)</a>$B$@@!#(B
<tt>tcpdump</tt> $B$r;H$C$F$$$/$D$+C5$9$Y$-$b$N$r5s$2$k$H!'(B
<P>
$B$^$:(BOpenBSD$B$N(B tcpdump $B$r;H$C$F$$$k?M$O!"(B
$B3HD%HG$N(B tcpdump $B$r;H$C$F$$$k$N$G!"(B
ESP $B$H(B AH $B%Q%1%C%H$K$D$$$F$b>pJs$,$H$l$k!#$b$7(B OpenBSD
2.5 $B$dB>$N(B OS $B$N(B tcpdump $B$r;H$C$F$$$k$J$i!"$?$V$s8E$$(B
$B%P!<%8%g%s$@@$+$i(B AH $B$d(B ESP$B$K$D$$$F$O%W%m%H%3%kHV9f$7$+I=<($5$l$J$$(B
(ESP $B$O(B IP $B%W%m%H%3%k(B 50, AH $B$O(B 51)$B!#(B
<UL>
<P>
<LI>
tcpdump $B$G$O!"%H%i%U%#%C%/$,(B AH/ESP $B$r;H$C$F$$$k$+J?J8$N$^$^$+$r3N$+$a$h$&!#(B
$BJ?J8$N$^$^$J$i!"%U%m!<$,$A$c$s$H@@_Dj$5$l$F$$$J$$$+!"(B
isakmp $B$N%M%4%7%(!<%7%g%s$,$&$^$/$$$C$F$$$J$$!#(B<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ping&apropos=0&sektion=8&format=html">ping(8)</a>$B$r;H$C$F(B
$B4JC1$J%H%i%U%#%C%/$rH/@@8$5$;$F$_$h$&!#(B
<P>
<UL>
$B$?$H$($P!"(B208.1.1.1 $B$H(B 208.2.2.2 $B$N#2$D$N%[%9%H$,$"$k!#(B
208.2.2.2 $B$K%m%0%*%s$7$F!"0J2<$r$d$C$F$_$h$&(B:
<PRE>
d1920 4
a1923 3
</PRE>
$BJL$N%;%C%7%g%s$G$O!"(Bencapsulated $B$5$l$?(Bping$B$,8+$i$l$k(B:
<PRE>
d1934 5
a1938 6
</PRE>
</ul>
<P>
<LI>ISAKMP $B$O(BUDP port 500$B$G<B9T$5$l$k!#$b$7$3$l$,%U%!%$%"!<%&%)!<%k$+(B
$B%Q%1%C%H%U%#%k%?$G%m%C%/%"%&%H$5$l$F$$$?$i!"$3$l$rJQ$($k$3$H!*(B
<UL><PRE>
d1946 5
a1950 6
</PRE></UL>
<P>
<LI>
isakmpd $B$K%G%P%C%0$rA4It$D$1$k$J$i!"<!$N$h$&$K$7$F<B9T$7$h$&!'(B
<P>
<UL><TT>
d1952 4
a1955 4
</TT></UL><P>
$B$"$k$$$O(B ($B$$$A$P$s>\$7$$%?%$%^!<%G%P%C%0>pJs$r$H$P$9$K$O(B)
<P>
<UL><TT>
d1957 5
a1961 5
</TT></UL>
<P>
<LI>IPsec$B$G=hM}$5$l$?%H%i%U%#%C%/$r!"(BnetB$B$+$i<+J,$N%m!<%+%k$N%U%!%$%"!<%&%)!<%kJ]8n$D$-(BnetA$B$K(B
$BF~$l$k$h$&$K$7$F$d$kI,MW$,$"$k!#(B
<UL><PRE>
d1964 7
a1970 8
</PRE></UL>
<P>
<LI>OpenBSD $B$N(B tcpdump $B$@@$H!"$[$H$s$I$N%$%s%?!<%M%C%H(B
$B808r49(B ($B<+F0808r49(B) $B%;%C%7%g%s$NJ?J8ItJ,$O$[$H$s$I%G%3!<%I$G$-$k!#(BTcpdump $B$O$^$?(B AH $B%Z%$%m!<%I%G!<%?$bI=<($9$k!#(B
<P>
<LI>/kern $B%U%!%$%k%7%9%F%`$r%^%&%s%H$7$h$&(B ($B$b$7$9$G$K%G%U%)%k%H$G;H$C$F$$$J$$$J$i(B)$B!'(B
<P>
<UL><TT>
d1972 2
a1973 2
</TT></UL>
<P>
d1975 6
a1980 6
($B309T$-$N(B SA) $B$b$J$$$b$N(B ($BF~$C$F$/$k(B SA) $B$b5-=R$5$l$F$$$k!#(B
$B$^$?$I$s$J%H%i%U%#%C%/$,$I$3$X9T$C$F$$$k$N$+$7$i$Y$i$l$k!"%H%i%U%#%C%/%+%&%s%?$b(B
$B$"$k!#(B
<P>
<LI>$B:G8e$K!"(B <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=netstat&apropos=0&sektion=1&format=html">netstat(1)</a> $B$r;H$C$F(B SA$B$r8+$k$3$H$,$G$-$k!#(B
<UL><PRE>
d1994 10
a2003 9
</PRE></UL>
<P>
<LI>
$B$3$l$@@$1$d$C$F$b%@@%a$J$i!"(B<tt>option ENCDEBUG</tt>$B$D$-$G%+!<%M%k$r%3%s%Q%$%k$7$J$*$9$3$H!#(B
$B$=$l$+$i(B <tt>net.inet.ip.encdebug</tt> $B$r(B 1 $B$K$9$k!#$=$7$F(B dmesg $B$r8+$F(B
$B7Y9p$d%(%i!<$r$5$,$7!"$=$l$r(B <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendbug&apropos=0&sektion=1&format=html">sendbug(1)</a>$B$r;H$C$F(B
OpenBSD $B%G%Y%m%C%Q!<$KJs9p$7$h$&!#(B $B$"$k$$$O$b$7$=$l$,(B
$B%P%0$+$I$&$+$o$+$i$J$+$C$?$i!"(B<A HREF="../../ja/mail.html">$B%a!<%j%s%0%j%9%H(B</a>$B$N$I$l$+$K%a%C%;!<%8$rEj$2$F$_$h$&!#(B
</UL>
d2008 14
a2021 1
</p>
a2022 12
IPsec $B$,FC$K>\$7$/@@bL@@$7$F$"$k$N$O(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vpn&apropos=0&sektion=0&format=html">vpn(8)</a>
$B%Z!<%8$@@!#3F<o$N@@_Dj%F%s%W%l!<%H$,(B <A HREF="http://www.openbsd.org/cgi-bin/cvsweb/src/share/ipsec/">/usr/share/ipsec/</a>
$B%G%#%l%/%H%j$K$"$k$N$GLr$K$?$D$@@$m$&!#(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=enc&sektion=4">enc(4)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&sektion=4">ipsec(4)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsecadm&sektion=8">ipsecadm(8)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8">isakmpd(8)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.conf&sektion=5">isakmpd.conf(5)</a> and
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.policy&sektion=5">isakmpd.policy(5)</a>
$B$N(Bman$B%Z!<%8$b>\$7$/$F!"(BIPsec$B$N@@_Dj$H1?MQ$KLrN)$D$O$:$@@!#(B
<P>
d2024 10
a2033 8
<UL>
<LI><a href="http://www.ietf.org/html.charters/ipsec-charter.html">IETF IPsec Working Group</a>
<LI><a href="http://isakmp-test.ssh.fi/">SSH IPsec interoperability Test Node</a>
<LI><a href="http://ipsec-wit.antd.nist.gov/">NIST IPsec Web Based Interoperability Tester</a>
<LI><a href="http://www.r4k.net/ipsec/">A port of OpenBSD's IPsec to FreeBSD</a>
<LI><a href="http://www.xs4all.nl/~freeswan/">FreeS/WAN - IPsec for Linux</a>
<LI><a href="http://www.pintday.org/hack/docs/vpn-24-minifaq.shtml">OpenBSD 2.4 VPN Configuration Mini-FAQ</a>
</UL>
d2035 32
a2066 30
<A name="rfc">
$B$=$7$F$D$E$-$^$7$F$O(B RFC$B$I$b(B...</a>
<UL>
<LI><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc1320.html">RFC 1320</a> - The MD4 Message-Digest Algorithm
<LI><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc1321.html">RFC 1321</a> - The MD5 Message-Digest Algorithm
<LI><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc1828.html">RFC 1828</a> - IP Authentication using Keyed MD5
<LI><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc1829.html">RFC 1829</a> - The ESP DES-CBC Transform
<LI><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2040.html">RFC 2040</a> - The RC5, RC5-CBC, RC5-CBC-Pad, and RC5-CTS Algorithms
<LI><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2085.html">RFC 2085</a> - HMAC-MD5 IP Authentication with Replay Prevention
<LI><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2104.html">RFC 2104</a> - HMAC: Keyed-Hashing for Message Authentication
<LI><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2144.html">RFC 2144</a> - The CAST-128 Encryption Algorithm 
<LI><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2202.html">RFC 2202</a> - Test Cases for HMAC-MD5 and HMAC-SHA-1 
<LI><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2207.html">RFC 2207</a> - RSVP Extensions for IPsec Data Flows
<LI><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2268.html">RFC 2268</a> - A Description of the RC2 Encryption Algorithm 
<LI><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2367.html">RFC 2367</a> - PF_KEY Key Management API, Version 2
<LI><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2401.html">RFC 2401</a> - Security Architecture for the Internet Protocol (<b>IPsec</b>)
<LI><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2402.html">RFC 2402</A> - IP Authentication Header (<b>AH</b>)
<LI><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2403.html">RFC 2403</A> - The Use of HMAC-MD5-96 within ESP and AH
<LI><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2404.html">RFC 2404</A> - The Use of HMAC-SHA-1-96 within ESP and AH
<LI><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2405.html">RFC 2405</A> - The ESP DES-CBC Cipher Algorithm With Explicit IV
<LI><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2406.html">RFC 2406</A> - IP Encapsulating Security Payload (<b>ESP</b>)
<LI><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2407.html">RFC 2407</A> - The Internet IP Security Domain of Interpretation for ISAKMP
<LI><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2408.html">RFC 2408</A> - Internet Security Association and Key Management Protocol (<b>ISAKMP</b>)
<li><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2409.html">RFC 2409</A> - The Internet Key Exchange (<b>IKE</b>)
<LI><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2410.html">RFC 2410</A> - The NULL Encryption Algorithm and Its Use With IPsec (ha ha...)
<LI><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2411.html">RFC 2411</A> - IP Security Document Roadmap
<LI><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2412.html">RFC 2412</A> - The OAKLEY Key Determination Protocol
<LI><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2451.html">RFC 2451</a> - The ESP CBC-Mode Cipher Algorithms
<LI><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2631.html">RFC 2631</a> - Diffie-Hellman Key Agreement Method
<LI><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2709.html">RFC 2709</a> - Security Model with Tunnel-mode IPsec for NAT Domains
d2074 1
d2081 1
a2081 1
Originally [OpenBSD: faq13.html,v 1.60 ]
d2083 1
a2083 1
$Translation: faq13.html,v 1.14 2002/11/03 12:23:12 toshi Exp $
d2087 1
a2087 1
</p>
@


1.12
log
@
sync with badlands translation CVS
@
text
@d1725 2
a1726 1
<li><a href="http://www.watchguard.com/">Watchguard</a> Firebox III
d1919 1
a1919 1
Originally [OpenBSD: faq13.html,v 1.59 ]
d1921 1
a1921 1
$Translation: faq13.html,v 1.13 2002/09/27 13:32:11 toshi Exp $
@


1.11
log
@
sync with badlands translation CVS
@
text
@d339 3
a341 5
OpenBSD $B$O(B Photuris (<A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2522.html">RFC2522</a>$B$*$h$S(B
<A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2523.html">RFC2523</a>)
$B$H(B ISAKMP $B<+F0808r49(B
(<A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2407.html">RFC2407</a>,
<A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2408.html">RFC2408,</A> and
d343 2
a344 3
$B$r<BAu$7$F$$$F!"$=$l$>$l(B
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=photurisd&apropos=0&sektion=8&format=html">photurisd(8)</a>
$B$H(B <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&apropos=0&sektion=8&format=html">isakmpd(8)</a>
d614 1
a614 1
$B<!$K(B /etc/isakmpd.policy $B$NJT=8$@@!#(B
a1789 11
<LI>Photuris $B$O(B UDP port 468 $B$GF0$/!#9M$($k$N$OF1$8$3$H$@@$1$l$I!"%W%m%H%3%k$O(B ah$B$@@!#(B
<UL><PRE>
# Passing in Photuris traffic from the security gateways
pass in on ne0 proto udp from gatewB/32 port = 468 to gatewA/32 port = 468
pass out on ne0 proto udp from gatewA/32 port = 468 to gatewB/32 port = 468

# Passing in encrypted traffic from security gateways
pass in proto ah from gatewB/32 to gatewA/32
pass out proto ah from gatewA/32 to gatewB/32
</PRE></UL>
<P>
a1859 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=photurisd&sektion=8">photurisd(8)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=startkey&sektion=1">startkey(1)</a>,
a1902 2
<LI><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2522.html">RFC 2522</a> - Photuris: Session-Key Management Protocol
<LI><a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2523.html">RFC 2523</a> - Photuris: Extended Schemes and Attributes
d1918 1
a1918 1
Originally [OpenBSD: faq13.html,v 1.58 ]
d1920 1
a1920 1
$Translation: faq13.html,v 1.12 2002/07/13 01:04:40 toshi Exp $
@


1.10
log
@
sync with badlands translation CVS
@
text
@d1936 1
a1936 1
Originally [OpenBSD: faq13.html,v 1.57 ]
d1938 1
a1938 1
$Translation: faq13.html,v 1.11 2002/07/08 13:40:54 toshi Exp $
d1940 1
a1940 1
$OpenBSD: faq13.html,v 1.57 2002/07/07 21:58:21 nick Exp $
@


1.9
log
@
HTML cleanup
@
text
@d22 11
a32 12
<LI><a href="#What"     >13.1 - IPsec$B$C$F2?(B?</A></LI>
<LI><a href="#Why"      >13.2 - $B$=$j$c7k9=$@@$1$l$I!"$3$N$\$/$,$J$<(B IPsec $B$J$s$+;H$o$K$c$J$i$s$N(B?</A></LI>
<LI><a href="#Protocols">13.3 - IPsec$B$NN"$K$"$k%W%m%H%3%k$O(B?</A>
<LI><a href="#Wire"     >13.4 - $B%M%C%H%o!<%/>e$N%Q%1%C%H%U%)!<%^%C%H(B</A>
<LI><a href="#Config"   >13.5 - IPsec $B$N@@_Dj(B</A>
<LI><a href="#ManKey"   >13.6 - IPsec $B$r<jF080@@_Dj$G;H$&$K$O(B?</A>
<LI><a href="#Photuris" >13.7 - photurisd $B$N%;%C%H%"%C%W$O(B?</A>
<LI><a href="#isakmpd"  >13.8 - isakmpd $B$N%;%C%H%"%C%W$O(B?</A>
<LI><a href="#x509"     >13.9 - isakmpd $B$r(B X.509 $B>ZL@@=q$H;H$&$K$O(B?</A>
<LI><a href="#IKEcl"    >13.10 - IKE $B%/%i%$%"%s%H$G(B isakmpd $B$H8_49@@-$,$"$k$N$O(B?</A>
<LI><a href="#Trouble"  >13.11 - IPsec/VPN $B$N%H%i%V%k%7%e!<%F%#%s%0(B</A>
<LI><a href="#SeeAlso"  >13.12 - $B4XO"%I%-%e%a%s%F!<%7%g%s(B</A>
d38 5
a42 5
<LI><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&sektion=4&format=html">ipsec(4)</a>
<LI><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vpn&sektion=8&format=html">vpn(8)</a>
<LI><a href="http://www.freebsd.org/~julian/IPSEC_4_Dummies.html">IPsec for Dummies</a> by Julian Elischer
<LI><a href="http://www.secureops.com/vpn/vpn.html">ISAKMP Howto</a> by Patrick Ethier
<LI><a href="http://hem.passagen.se/hojg/isakmpd/">X.509v3 certificates with isakmpd</a> by J&ouml;rgen Granstam
a544 52
<a name= "Photuris"></a>
<a name="13.7"></a>
<h1>13.7 - photurisd $B$N@@_Dj$O$I$&$d$k$N(B?</h1>
</p>
<P>
Photuris $B$O$^$@@$"$^$j;H$o$l$F$$$J$$$7!"(B
RFC$B$N%9%F!<%?%9$+$i8@@$($P$^$@@<B83CJ3,$@@!#$G$b(B OpenBSD $B$G$O$?$/$5$s$N?M$,(B
$BMxMQ$7$F$-$?!#(B
<P>
photurisd $B$r@@_Dj$9$k$K$O!"$^$:(B /etc/photuris/secrets.conf
$B$r(B photurisd $B$r;}$C$?%[%9%H$N$9$Y$F$GJT=8$9$k$3$H!#(B
<UL>
<PRE>
# <b>cat /etc/photuris/secrets.conf</b>
# Accepted keywords are:
# identity local &quot;id&quot; &quot;secret&quot;
# identity pair local &quot;receivedid&quot; &quot;myid&quot; &quot;secret&quot;
# identity remote &quot;id&quot; &quot;secret&quot;
# identity lookup &quot;tag&quot; username
# Simple 
identity local &quot;Default&quot; &quot;$B$3$3$rJQ$($k(B&quot;
identity remote &quot;Default&quot; &quot;$B$3$3$rJQ$($k(B&quot;
</PRE></UL>
&quot;$B$3$3$rJQ$($k(B&quot; $B$NItJ,$r!"(Blocal config $BB&$G9%$-$J80$K$7$F!"(B
$B$=$l$+$i(B remote config $B$G$OJL$N9%$-$J80$K$7$h$&!#(B
($B%j%b!<%H%\%C%/%9$G$b(B config $B$r;H$&$3$H!#$?$@@$7(B &quot;local&quot; 
&quot;remote&quot; $B$rF~$lBX$($F!"%j%b!<%H%[%9%HB&$K$H$C$F$O$=$C$A$,%m!<%+%k80$K$J$k$h$&$K$9$k!#(B)
$B$J$*!"$3$l$i$N80$O>-Mh$N(B photurisd $B$N%P!<%8%g%s$G$O!"(B
$B:G=i$N808r49$r8x3+80$G9T$&$h$&$J7A$GCV$-49$o$k$3$H$K$J$k$N$GCm0U!#(B
<P>
<tt>net.inet.ah.enable</tt> $B$,(B 1$B$K@@_Dj$5$l$F$$$k$3$H$r3NG'$7$h$&!#(B
<UL><PRE>
# <b>sysctl -w net.inet.ah.enable=1</b>
net.inet.ah.enable: 0 -&gt; 1
</PRE></UL>
$B$=$l$+$i(B startkey$B$r<B9T!#(B
<UL><PRE>
# <b>startkey dst=remote.host</B>
</PRE></UL>
$B$=$l$G$O(B tcpdump $B$r<B9T$7$F!"%Q%1%C%H$,(B AH$B$G0E9f2=$5$l$F$$$k$3$H$r3NG'$7$F$_$h$&(B
($BJL$N%&%#%s%I%&$G(Bping$B$9$k$H$+!"$J$s$+%;%C%7%g%s$r3+;O$7$F%H%i%U%#%C%/$r$D$/$k$3$H(B)$B!#(B
<UL><PRE>
# <b>tcpdump proto ah</b>
</PRE></UL>
$B$J$K$b=P$F$3$J$$$h$&$J$i!"(Btcpdump $B$r%[%9%H%"%I%l%9B&$G;H$C$F$_$k<j$,$"$k!#(B
<UL><PRE>
# <b>tcpdump host remote.host</b>
</PRE></UL>
photurisd $B$,<+F0E*$KH/?.85$HAw$j@@h$N%[%9%H$d%M%C%H%o!<%/$r@@_Dj$9$k$h$&$K(B
$B$9$k$K$O!"(B /etc/photuris/photuris.startup$B$K5-=R$7$F$*$/!#(B

<p>
d546 1
a546 2
<a name="13.8"></a>
<h1>13.8 - isakmpd$B$N@@_Dj$O(B?</h1>
d554 1
a554 1
<h3>13.8.1 - isakmpd$B$C$F$J$K(B?</h3> ISAKMP ($B$H$-$I$-(B IKE, 
d590 1
a590 1
<h3>13.8.2 - isakmpd$B$3$H$O$8$a(B</h3>
d871 1
a871 1
<h3>13.8.3 - isakmpd$B$N5/F0(B</h3>
d885 1
a885 2
<a name="13.9"></a>
<h1>13.9 - isakmpd $B$r(B X.509 $B>ZL@@=q$H$$$C$7$g$K;H$&$K$O(B?</h1>
d1695 1
a1695 2
<a name= "13.10">
<h1>13.10 - isakmpd$B$G;H$($k(BIKE $B%/%i%$%"%s%H$O(B?</h1>
d1733 1
a1733 2
<a name= "13.11"></a>
<h1>13.11 - Troubleshooting IPsec/VPN</h1>
d1864 1
a1864 2
<a name= "13.12"></a>
<h1>13.12 - $B4XO"%I%-%e%a%s%F!<%7%g%s(B</h1>
d1936 1
a1936 1
Originally [OpenBSD: faq13.html,v 1.56 ]
d1938 1
a1938 1
$Translation: faq13.html,v 1.10 2002/07/02 08:12:49 toshi Exp $
d1940 1
a1940 1
$OpenBSD: faq13.html,v 1.56 2002/07/02 01:17:58 nick Exp $
@


1.8
log
@
sync with badlands translation CVS
@
text
@d559 1
a559 1
bsd# <b>cat /etc/photuris/secrets.conf</b>
d578 1
a578 1
bsd# <b>sysctl -w net.inet.ah.enable=1</b>
d583 1
a583 1
bsd# <b>startkey dst=remote.host</B>
d588 1
a588 1
bsd# <b>tcpdump proto ah</b>
d592 1
a592 1
bsd# <b>tcpdump host remote.host</b>
d1784 1
d1814 1
a1814 1
vpn# <b>ping -c 3 208.1.1.1</b>
d1825 1
a1825 1
vpn# <b>tcpdump -ni fxp7 host 208.1.1.1</b>
d1896 1
a1896 1
vpn% <b>netstat -rn -f encap</b>
d1994 1
a1994 1
Originally [OpenBSD: faq13.html,v 1.54 ]
d1996 1
a1996 1
$Translation: faq13.html,v 1.9 2002/06/20 09:02:49 toshi Exp $
d1998 1
a1998 1
$OpenBSD: faq13.html,v 1.54 2002/06/20 06:17:32 chris Exp $
@


1.7
log
@
sync with badlands translation CVS
@
text
@d394 2
a395 2
BLF       $B2DJQ(B (40-160, 160 bits $B?d>)(B)
CAST      $B2DJQ(B (40-128, 128 bits $B?d>)(B)
d1765 1
a1765 1
<LI><a href="http://www.microsoft.com">Microsoft</a> Windows 2000 (Transport $B%b!<%I$N$_(B)
d1993 1
a1993 1
Originally [OpenBSD: faq13.html,v 1.53 ]
d1995 1
a1995 1
$Translation: faq13.html,v 1.8 2002/05/30 00:16:32 toshi Exp $
d1997 1
a1997 1
$OpenBSD: faq13.html,v 1.53 2002/05/29 19:24:44 nick Exp $
@


1.6
log
@
sync with badlands translation CVS
@
text
@d999 2
a1000 3
$B$5$i$K(B man $B%Z!<%8$K$"$k$b$N$h$j$b$+$J$jC;$$%U%!%$%k$r;H$&!#(B
$B$3$N@@_Dj$NM}2r$r$h$j4JC1$K$9$k$?$a$K!"%U%!%$%k$+$i!"(B
$B$3$N@@_Dj$K$OI,MW$J$$$b$N$r$[$H$s$I:o=|$7$?!#$5$i$K%3%a%s%H$bDI2C$7$F(B
d1993 1
a1993 1
Originally [OpenBSD: faq13.html,v 1.52 ]
d1995 1
a1995 1
$Translation: faq13.html,v 1.7 2002/05/06 08:36:50 toshi Exp $
d1997 1
a1997 1
$OpenBSD: faq13.html,v 1.52 2002/05/03 13:24:33 jsyn Exp $
@


1.5
log
@
sync with badlands translation CVS
@
text
@d55 1
a55 1
$B40A4@@-!J(Bintegrity$B!K!"%"%/%;%9@@)8f!"5!L)@@-$,Ds6!$5$l$k!#(BIPsec $B$O(B
d104 1
a104 1
<h4>$B40A4@@-!J(BIntegrity$B!K(B</h4> $B%G!<%?$,ESCf$G2~cb$5$l$J$$$h$&$K$9$k!#(B
d109 1
a109 1
<h4>Authenticity$B!J@@5??@@-!?3N<B@@-!K(B</h4> $B%G!<%?$K=pL>$7$F!"$=$l$rAw$C$?$N$,K\Ev$K$"$J$?$@@$HB>$N?M$,(B
d113 1
a113 1
<h4>$B:FAwJ]8n!J(BReplay protection$B!K(B</h4> $B$d$j$H$j$O!"2?EY$b7+$jJV$9$h$&G'$a$i$l$?$b$N0J30$O!"(B
d119 1
a119 1
$B$7$h$&!J$+$l$N8}:B$K$*6b$r?6$j9~$`$H$+!K!#(B
d133 3
a135 3
IPsec $B$O!"5!L)@@-!"40A4@@-!"(Bauthenticity$B!J@@5??@@-!K!":FAwJ]8n$rDs6!$9$k$N$K!"(B
$B?7$7$$%W%m%H%3%k$r(B 2 $B$D;H$&!#$3$N%W%m%H%3%k$O(B AH$B!J(B
Authentication header, $BG'>Z%X%C%@@!K$H(B ESP$B!J(BEncapsulated security payload$B!"0E9f%Z%$%m!<%I!K$@@!#(B
d137 1
a137 1
AH $B$OG'>Z$H40A4@@-$H:FAwJ]8n$rDs6!$9$k!J$,5!L)@@-$ODs6!$7$J$$!K!#(B
d139 1
a139 1
IP $B%X%C%@@$N0lIt!J$?$H$($P%Q%1%C%H$NH/?.85!&Aw$j@@h%"%I%l%9!K$b(B
d143 1
a143 1
$BDs6!$9$k!J%X%C%@@$K$D$E$/%Q%1%C%HFb$N$9$Y$F$rJ]8n$9$k!K!#(B
d145 1
a145 1
$B!J$3$NFs$D$O$$$D$b%Z%"$G$/$k!K!#5!L)@@-!J0E9f2=!K$O!"(B
d155 1
a155 1
<p>   <B>$BG'>Z%X%C%@@!J(BAuthentication Header$B!K(B</B>
d162 2
a163 2
<P>The <B>$B0E9f%Z%$%m!<%I!J(BEncapsulating
Security Payload$B!K(B</B> (ESP) $B%X%C%@@$O!"%Z%$%m!<%I$r0E9f2=$5$l$?7A$G=q$-49$($k$3$H$r2DG=$K$9$k!#(B
d167 2
a168 2
ESP $B%X%C%@@$O!"%Z%$%m!<%I$NG'>Z$bDs6!$G$-$k!J$,(B ESP $B$N30$N(B
$B%X%C%@@$K$D$$$F$OG'>Z$G$-$J$$!K!#(B
d170 1
a170 1
<P>IPsec $B5!G=$N!J$[$H$s$I!KFHN)$7$?ItJ,$,!"(BIPsec encapsulation $B$r(B
d187 1
a187 1
$B!J$H$$$C$F$b!"$3$l$O$b$A$m$sJ#?t$N(B IP $B%[%C%W$r$^$?$,$k$+$b$7$l$J$$$1$l$I!K$r%+%P!<$9$k!"(B
d193 1
a193 1
$BIaDL$O!J%^%k%A%-%c%9%H$OL5;k$7$F!K0l$D$NE@@$+$iJL$NE@@$^$G$K$D$$$F!"(B
d198 4
a201 4
(<B>$B08@@h(B IP $B%"%I%l%9(B, $B%;%-%e%j%F%#%Q%i%a!<%?%$%s%G%C%/%9!J(BSecurity Parameter
Index$B!K(B, $B%;%-%e%j%F%#%W%m%H%3%k(B</B>)$B$K1~$8$F;XDj$N(B SA $B$K3d$jEv$F$k$3$H$,$G$-$k!#(B
$B%;%-%e%j%F%#%Q%i%a!<%?%$%s%G%C%/%9!J(BSecurity Parameter
Index$B!"N,$7$F(BSPI$B!K$O@@\B3$N%Q%i%a!<%?$N%M%4%7%(!<%7%g%s$,9T$o$l$k$H$-$K!"(BSA $B$N<u$1<j$,<jEO$9%/%C%-!<$@@$H;W$($P$$$$!#(B
d204 1
a204 1
$B$3$l$O30B&$N(B IP $B%X%C%@@$+$i8+$D$1$k$3$H$b$G$-$k$7!":G=i$N%;%-%e%j%F%#%X%C%@@!J$3$l$O(B SPI $B$H%;%-%e%j%F%#%W%m%H%3%k$r4^$`!K$+$i8+$D$1$k$3$H$b$G$-$k!#(B
d258 1
a258 1
$B%Z%$%m!<%I!J%$%?%j%/%9$GI=<(!K$r0E9f2=$9$k!#(B
d275 1
a275 1
OpenBSD$B$N(B IPsec$B%=!<%9%3!<%I$NCf$G$O!"(BTDB $B$^$?$O(B TDB table $B$H8F$P$l$F$$$k!K$G!"(B
d284 1
a284 1
$B!J%P%s%I%k$J$i!"(BSAD $B%(%s%H%j$OJ#?t$"$jF@@$k$N$G!K$r;XDj$9$k$1$l$I!"$G$b$9$G$K(B
d301 1
a301 1
$B!J$3$l$O(B host based transport SA$B$N$_(B)$B!"%[%9%HL>!"%;%-%e%j%F%#(B
d335 1
a335 1
$B!J$3$l$KJQ99$r2C$($k$N$O!"<jF080@@_Dj$r;H$&>l9g$@@$1$@@!K!#(B
d340 1
a340 1
OpenBSD $B$O(BPhoturis (<A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2522.html">RFC2522</a>$B$*$h$S(B
d342 1
a342 1
$B$H(B ISAKMP $B<+F0$+$.8r49(B
d357 2
a358 2
IPsec$B$N<j;O$a$H$7$F$$$A$P$s$+$s$?$s$J$N$,<jF080@@_Dj$@@!#(B
$B$3$N<jK!$G%M%C%H%o!<%/4V$r0E9f2=$7$F(BVPN$B$r$D$/$l$k!#(B
d365 1
a365 1
$B$3$N<!$NNc$N$h$&$K!"(BESP $B$@@$1$r;H$C$F$$$k$h$&$J>l9g$K$O(B <i>AH$B$OM-8z$K$7$J$$$G$$$$!#(B</i>$B$=$l$I$3$m$+!"(B
d367 1
a367 1
$BH/@@8$9$k$+$b$7$l$J$$!K!#(B<P>
d407 1
a407 1
$B$=$l$rJq$`(BIP $B%X%C%@@$OG'>Z$7$F$/$l$J$$!#$3$N!V8B$i$l$?G'>Z!W$O!"(B
d418 1
a418 1
$B$3$l$rFs$D$N%k!<%?$G<B:]$K$d$C$F$_$h$&!#%k!<%?$N(BIP$B%"%I%l%9$O$=$l$>$l(B192.168.5.1 $B$H(B 192.168.25.9$B$@@!#(B
d420 1
a420 1
$B%[%9%H(B192.168.5.1$B>e$G$O(B:
d427 1
a427 1
$B%[%9%H(B 192.168.25.9$B>e$G$O(B:
d440 1
a440 1
$B$^$:$O(B192.168.5.1$B$+$i(B:<P>
d459 1
a459 1
$B$r;H$&$H(B IP $B%X%C%@@$^$G4^$s$@@(BIP $B%Q%1%C%H$N$9$Y$F$,I,$:(BSPI$B$K%+%W%;%k2=(B
d475 2
a476 2
<h2>208.1.1.1$B$NB&$G$O(B:</h2>
$B$^$:!"(Bsecurity associations (SA)$B$r@@_Dj$7$h$&(B:<BR>
d543 1
a543 1
$B$3$l$G$9$Y$F$N(B IPsec $B>pJs(B (SPI$B!"%U%m!<!"%k!<%F%#%s%0$N%(%s%H%j!K$,%7%9%F%`$+$i0lA]$5$l$k!#(B
d548 1
a548 1
<h1>13.7 - photurisd$B$N@@_Dj$O$I$&$d$k$N(B?</h1>
d552 1
a552 1
RFC$B$N%9%F!<%?%9$+$i8@@$($P$^$@@<B83CJ3,$@@!#$G$b(BOpenBSD$B$G$O$?$/$5$s$N?M$,(B
d556 1
a556 1
$B$r(B photurisd$B$r;}$C$?%[%9%H$N$9$Y$F$GJT=8$9$k$3$H!#(B
d570 1
a570 1
$B$=$l$+$i(Bremote config$B$G$OJL$N9%$-$J80$K$7$h$&!#(B
d586 1
a586 1
$B!JJL$N%&%#%s%I%&$G(Bping$B$9$k$H$+!"$J$s$+%;%C%7%g%s$r3+;O$7$F%H%i%U%#%C%/$r$D$/$k$3$H!K!#(B
d602 1
a602 1
<p>VPNs $B$r$O$8$a(BIPsec$B$N3F<oEAE}E*$J%"%W%j%1!<%7%g%s$r9M$($F$$$k$J$i!"(B
d605 1
a605 1
$B$J$s$i$+$N7A$N(B ISAKMP$B$r;H$&$7$+$J$/$J$k!#(B
d614 1
a614 1
$BFs$D$N(BIPsec$B%N!<%I4V$G(BIPsec$B%Q%i%a!<%?$r3NN)$9$k$?$a$K!"(B
d628 3
a630 3
<b>$B%U%'!<%:(B 2</b> - Security Associations $B$,(BIPsec$B$K$+$o$C$F%M%4$5$l$k!#(B
$B%U%'!<%:(B 2 $B$O(BIPsec$B%[%9%H4V$K%H%s%M%k$+(B endpoint SA $B$r3NN)$9$k!#(B
$B%U%'!<%:(B 2 $B$G$O(B<b>Quick Mode</b> $B$,;H$o$l$k!#%U%'!<%:(B 1 $B$G$9$G$K(B SA $B$,3NN)$7$F$$$k$N$G!"(B
d636 1
a636 1
$B!J$b$C$H<jAa$$!K%U%'!<%:(B 2 $B$N@@_Dj$,9T$o$l$k!#F1$8%U%'!<%:(B 1 $B%A%c%M%k$NCf$G!"J#?t$N%U%'!<%:(B 2 $B@@_Dj$r(B
d639 2
a640 2
$BG'>Z$r8r49$9$k(B (X509 $B>ZL@@$+!"(B
$B;vA0$K6&M-$7$?HkL)!K!#$3$l$GN>C<$H$b!"Aj<j$,G'>Z$5$l$?$3$H$r(B
d652 1
a652 1
CD-ROM$B!JEvA3;}$C$F$k$h$M!K$+$i$G$b$$$$$7!"(B<A
d739 2
a740 2
$B$3$3$G$NCM$O2<$NItJ,$r;X$7$F$$$k!J%U%'!<%:(B 1 $B$OC1$K%j%b!<%H$N%T%"$rG'>Z$7$F!"(B
$B$=$l$,<gD%DL$j$NAj<j$@@$H3NG'$9$k$@@$1$J$N$r$*K:$l$J$/!K!#(B
d868 2
a869 2
$B%[%9%H(BA$B!J$3$l$O>e$N(B Net-A$B$K(B
$B$D$J$,$C$F$$$k!K$G$O(B 192.168.1.0/255.255.255.0 $B!"%[%9%H(BB$B!J$3$l$O>e$N(B Net-B$B$K$D$J$,$C$F$$$k!K$G$O(B192.168.20.0/255.255.255.0 $B$@@!#(B
d900 1
a900 1
<b>Transforms=</b> $B$O$3$N$d$j$H$j$GI,MW$H$5$l$k!J$^$?$O;XDj$5$l$k!K0E9fJQ49J}<0$@@!#$3$NNc$G$O!"(B
d983 1
a983 1
home.mysite.se $B$H$$$&$N$O!J<B:_$O$7$J$$$1$l$I!K>ZL@@=q$KA^F~$5$l$k$Y$-(B FQDN $B$@@!#(B
d1006 1
a1006 1
$B@@_Dj$r;}$C$F$$$k$N$G!JA0$N@@a$r;2>H!K$3$N%U%!%$%k$G$b(B
d1030 1
a1030 1
$B$HAH$_9g$o$;$F;H$&$H$+$=$N<j$N$r$I$&$9$k$+$O@@bL@@$7$J$$(B($B$\$/<+?H$d$C$?$3$H$,$J$$$+$i!K!#(B
d1303 1
a1303 1
$B%W%m%H%3%k$r;HMQ$7$??M$@@$1$,G'Dj$5$l$k$H$$$&$3$H$@@!JK\J*$H$$$C$F$b$^$"!"(B
d1306 1
a1306 1
$B$3$N(B policy $B$rJQ99$9$k$N$O!"FI<T$NN}=,LdBj$H$7$F;D$7$F$*$3$&$+!K!#(B
d1319 2
a1320 2
$B$5$i$K8"8B$r$@@$l$+B>$NB8:_!JJ#?t$G$b(B
$B$$$$!K$K!V%5%V%i%$%;%s%9!W$9$k$3$H$b$G$-$k!#4JC1$J%1!<%9$H$7$F$O!";vA06&M-80$N(B
d1335 2
a1336 2
$B@@\B3$rG'$a$k!J$?$@@$7$3$N%Q%9%o!<%I$O(B isalmpd.conf $B$N(B Authentication $B%?%0$G$b(B
$B@@_Dj$7$F$*$/$N$r$*K:$l$J$/!K!#(B
d1391 1
a1391 1
$B5?;w;q3J>ZL@@!J(Bcredentials$B!K$KJQ49$5$l$k!#$3$&$7$?5?;w;q3J>ZL@@$KJQ49$5$l$?>ZL@@=q$O!"(B
d1399 1
a1399 1
    	CzA  $B$3$NItJ,$O%f!<%6>ZL@@=q!J$D$^$j(BCA$B>ZL@@=q!K$K=pL>$7$?(B     AQEB\
d1424 1
a1424 1
$BFbIt$G>ZL@@=q$,$I$&$J$C$F$$$k$+$r@@bL@@$7$F$$$k!#>e$N;q3J>ZL@@!J(Bcredential$B!K$O!"(B
d1468 1
a1468 1
$BAw?.$7$F$/$k$+$o$+$k!J(B[$B%U%'!<%:(B 1] $B%;%/%7%g%s$G(B)$B!#%U%'!<%:(B 1 $B$N(B
d1473 2
a1474 2
$B$&$s!"$b$7(BID $B>pJs$,(B IP $B$J$i!J%U%'!<%:(B 1 $B$N(B ID $B%;%/%7%g%s$r;H$o$J$1$l$P(B
$B$3$l$,%G%U%)%k%H$K>u67$K$J$k!K$9$Y$F$O%*%C%1!<$@@!#(BCA
d1478 2
a1479 2
$B!J$?$H$($PN>J}$N%3%s%T%e!<%?$,F1$8(B LAN $B>e$K$"$C$F!"(B
$B$U$@@$s$=$N(B IP $B$r;H$C$F$$$k%^%7%s$,$J$s$i$+$NM}M3$G%@@%&%s$7$F$$$k$J$I!K!#(B
d1481 1
a1481 1
$B$=$N(B IP $B$,$J$j$9$^$7HH$N$b$N$@@$H!JIT@@5$K!K>ZL@@$9$k$3$H$O(B
d1489 2
a1490 2
$B$J$j$9$^$7HH$N?H85!J$"$k$$$O(B cert $B$N(B
ID $B>pJs!K$r==J,$K%A%'%C%/$G$-$J$+$C$?$+!"$"$k$$$O(B CA $BHkL)80$,==J,$KJ]8n$5$l$F$$$J$+$C$?$+$@@!#(B
d1500 2
a1501 2
$B4|BT$I$*$j$N(B IP $B$+$iAw$i$l$F$-$?$3$H$r%A%'%C%/$G$-$k!J$G$b$5$C$-@@bL@@$7$?$h$&$K!"(B
$B$3$l$O0lIt$N>u67$G$O$4$^$+$;$k!K!#%T%"$,Ds<($9$k(BID$B$r!"(B
d1509 1
a1509 1
$B$G$-$k!J$"$k$$$O%5!<%S%95qH]!J(BDoS$B!K967b$r(B
d1511 2
a1512 2
$B56B$$9$k$3$H$b$G$-$k!K!#$$$:$l9b%;%-%e%j%F%#(B DNS $B$bEP>l$9$k$1$l$I!"(B
$B$^$@@=P2s$C$F$$$J$$$7!J>/$J$/$H$b$[$H$s$I$N(B DNS $B%5!<%P$O$^$@@9b%;%-%e%j%F%#$G$O$J$$!K!"(B
d1520 1
a1520 1
$BF1$8(B CA $B$K=pL>$5$;$k!J$G$b$b$A$m$s%"%?%C%+!<<+?H$N(B FQDN $B$r;H$C$F(B)$B!#$=$l$+$i(B
d1529 4
a1532 4
$B$\$/$?$AB&$N(B isakmpd $B$O!"$3$C$A$N%T%"$X$N(B ID $B$,2?$+$r65$o$C$F$$$J$$!J$=$7$F$=$l$O!"%"%?%C%+!<$,(B
$B>ZL@@=q$H(BID$B$HHkL)800J30$O$^$C$?$/F1$8@@_Dj$K$7$F$*$$$?$+$i!K!#$5$i$K$\$/$?$A$N(B
isakmpd $B$O>ZL@@=q$,F1$8(B CA $B$N%5%$%s$7$?$b$N$@@$H%A%'%C%/$G$-$k!J$G$b(B
$BB?$/$N(B CA $B$O(Bcert $B$r$$$C$Q$$%5%$%s$9$k$+$i!"(Bcert $B$r<j$KF~$l$k$N$O$`$:$+$7$/$J$$$+$b!K!#$=$7$F(B
d1600 1
a1600 1
$B>ZL@@=q$N(BDistinguished Name (DN) $B$r;H$&$3$H$,$G$-$k!JBP1~$9$k(B
d1643 2
a1644 2
$B%3%s%T%e!<%?$r2?Bf$b;H$C$?$j$9$k?M$OB?$$!#$"$k$$$O!J%5!<%P(B
$B$J$s$+$@@$H!K@@\B3$7$?$$$N$,$@@$l$J$N$+!"$O$C$-$j$o$+$i$J$$$3$H$b$"$k!#(B
d1668 1
a1668 1
$B$I$N%3%s%T%e!<%?$+$i$G$b!J<RFb(BLAN$B>e$N$b$N$K8B$i$:!K@@\B3$G$-$k$h$&$K$7$?$$$1$l$I!"(B
d1711 3
a1713 3
$B$3$$$D$O$^$C$?$/%F%9%H$7$F$$$J$$!J$@@$+$i$3$N%U%#%k%?>r7o$O!"$\$/$N;W$$DL$j$K$O(B
$B$<$s$<$sF0$+$J$$$+$b$7$l$J$$!K!#$=$l$H!"$3$$$D$_$?$$$J(Bpolicy $B!J$H$$$&$+!"(B
$B%G%U%)%k%H$,%T%"$N(BIP$B$K$7$F$"$k$b$N$9$Y$F!K$O!"(Bisakmpd.conf$B%U%!%$%k$b$"$o$;$F=q$-49$($J$$$H(B
d1734 1
a1734 1
$BF1$8J}<0$O(BISAKMP/IPsec $B0J30$NL\E*$K$b;H$($k$O$:$@@!J%*%U%i%$%s%7%9%F%`$NG'>Z$5$($G$-$k!*!K!#(B
d1740 1
a1740 1
$B$3$&$$$&%^%k%A%f!<%6@@_Dj!J%b%P%$%k%f!<%6!K$O!"(B
d1747 1
a1747 1
ID$B$,%J%^$N$^$^$GAw$i$l$k$+$i$A$g$C$H%;%-%e%j%F%#$O2<$,$k!K!#(B
d1867 1
a1867 1
$B$"$k$$$O!J$$$A$P$s>\$7$$%?%$%^!<%G%P%C%0>pJs$r$H$P$9$K$O!K(B
d1881 1
a1881 1
$B808r49!J<+F0808r49!K%;%C%7%g%s$NJ?J8ItJ,$O$[$H$s$I%G%3!<%I$G$-$k!#(BTcpdump $B$O$^$?(B AH $B%Z%$%m!<%I%G!<%?$bI=<($9$k!#(B
d1883 1
a1883 1
<LI>/kern $B%U%!%$%k%7%9%F%`$r%^%&%s%H$7$h$&!J$b$7$9$G$K%G%U%)%k%H$G;H$C$F$$$J$$$J$i!K!'(B
d1890 1
a1890 1
$B!J309T$-$N(B SA$B!K$b$J$$$b$N!JF~$C$F$/$k(B SA)$B$b5-=R$5$l$F$$$k!#(B
d1994 1
a1994 1
Originally [OpenBSD: faq13.html,v 1.51 ]
d1996 1
a1996 1
$Translation: faq13.html,v 1.6 2002/04/27 13:21:12 toshi Exp $
d1998 1
a1998 1
$OpenBSD: faq13.html,v 1.51 2002/02/20 03:13:15 nick Exp $
@


1.4
log
@
sync with badlands translation CVS
@
text
@d3 1
a3 1
<title>13.0 - IPsec $B$r;H$&(J</title>(B
d16 1
a16 1
<h1><font color=#e00000>13.0 - IPsec (IP Security Protocol) $B$r;H$&(J</font></h1>(B
d20 1
a20 1
<h3>$BL\<!(J</h3>(B
d22 12
a33 12
<LI><a href="#What"     >13.1 - IPsec$B$C$F2?(J?</A></LI>(B
<LI><a href="#Why"      >13.2 - $B$=$j$c7k9=$@@$1$l$I!"$3$N$\$/$,$J$<(B (JIPsec(B $B$J$s$+;H$o$K$c$J$i$s$N(J?</A></LI>(B
<LI><a href="#Protocols">13.3 - IPsec$B$NN"$K$"$k%W%m%H%3%k$O(J?</A>(B
<LI><a href="#Wire"     >13.4 - $B%M%C%H%o!<%/>e$N%Q%1%C%H%U%)!<%^%C%H(J</A>(B
<LI><a href="#Config"   >13.5 - IPsec $B$N@@_Dj(J</A>(B
<LI><a href="#ManKey"   >13.6 - IPsec $B$r<jF080@@_Dj$G;H$&$K$O(J?</A>(B
<LI><a href="#Photuris" >13.7 - photurisd $B$N%;%C%H%"%C%W$O(J?</A>(B
<LI><a href="#isakmpd"  >13.8 - isakmpd $B$N%;%C%H%"%C%W$O(J?</A>(B
<LI><a href="#x509"     >13.9 - isakmpd $B$r(B (JX.509(B $B>ZL@@=q$H;H$&$K$O(J?</A>(B
<LI><a href="#IKEcl"    >13.10 - IKE $B%/%i%$%"%s%H$G(B (Jisakmpd(B $B$H8_49@@-$,$"$k$N$O(J?</A>(B
<LI><a href="#Trouble"  >13.11 - IPsec/VPN $B$N%H%i%V%k%7%e!<%F%#%s%0(J</A>(B
<LI><a href="#SeeAlso"  >13.12 - $B4XO"%I%-%e%a%s%F!<%7%g%s(J</A>(B
d37 1
a37 1
$B$3$N%I%-%e%a%s%H$N0lIt$O!"0J2<$N%I%-%e%a%s%H$+$i$H$C$F$$$k(J:(B
d50 1
a50 1
<h1>13.1 - IPsec$B$C$F$J$K(J?</h1>(B
d53 1
a53 1
IPsec $B$O!"(JIP(B $B%W%m%H%3%k%U%!%_%j!<$KBP$9$k3HD%$@@!#(B
d55 1
a55 1
$B40A4@@-!J(Jintegrity$B!K!"%"%/%;%9@@)8f!"5!L)@@-$,Ds6!$5$l$k!#(JIPsec(B $B$O(B
d58 1
a58 1
$B%"%W%j%1!<%7%g%s$N$[$&$G$O(B (JIPsec(B $B$r;H$&$N$K!"(JIPsec(B $B$N$3$H$r2?0l$DCN$i$J$/$F$$$$!"(B
d60 2
a61 2
IPsec $B>e$G$O(J<a(B (Jhref="http://www.openbsd.org/cgi-bin/cvsweb/src/etc/protocols?rev=1.(B13(J">$B$"$i$f$k(B (JIP(B $B%W%m%H%3%k(J</a>$B$r;H$($k!#0E9f2=%H%s%M%k(B (J(VPN)(B $B$b:n$l$k$7!"%3%s%T%e!<%?4V$GC1=c$J0E9f2=$r$7$F$b$$$$!#(B
$B%*%W%7%g%s$,<B$K$$$m$$$m$"$k$;$$$G!"(JIPsec(B $B$O$A$g$C$H$d$d$3$7$$$N$G$"$k(B (J($B$=$l$b(B (JSSL(B $B$h$j$:$C$H(J!)(B
d64 3
a66 3
FAQ <a href="../faq6.html">6$B>O(J</a>(B $B$N?d>)J88%$K$O(B
$B@@'Hs$H$bL\$rDL$7$F$*$$$F$[$7$$!#FC$K!"$b$7(B (JIP(B $B%"%I%l%9$N9M$(J}$,$o$+$C$F$$$J$+$C$?$i!"(B
<a href="http://www.3com.com/corpinfo/en_US/technology/tech_paper.jsp?DOC_ID=135">(JUnderstanding(B
d71 1
a71 1
$BO@@M}E*$K$O!"(JIPsec(B $B$O0J2<$N$I$s$J7A$G$b5!G=$9$k(J:(B
d78 2
a79 2
$B$D$^$j$O(B (JHost-to-Router(B (J($B$=$7$F$3$N%k!<%?$O!"$"$k(J<i>Network</i>$B$N(B
$B%H%i%U%#%C%/$r@@)8f$7$F0E9f2=$9$k(J)$B!#(B
d81 2
a82 2
$B$3$l$+$i8+$k$h$&$K!"(JIPsec(B $B$O(B (JVPN(B $B@@\B3MQ$K%H%i%U%#%C%/$r%H%s%M%k$G$-$k!#(B
$B$G$b!"$=$N1~MQ$O(B (JVPN(B $B$h$j$O$k$+$K9-$$!#Cf1{%$%s%?!<%M%C%H808r49EPO?=j$,$"$l$P!"(B
d89 1
a89 1
<h1>13.2 - $B$=$j$c7k9=$@@$1$l$I!"$3$N$\$/$,$J$<(B (JIPsec$B$J$s$+;H$o$K$c$J$i$s$N(J?</h1>(B
d93 1
a93 1
$B%$%s%?!<%M%C%H$N%W%m%H%3%k$G$"$k(B (JIP(B $B$^$?$O(B (JIPv4(B $B$O!"$=$l<+BN$H$7$F$O!"E>Aw$7$F$$$k%G!<%?$KBP$7$F2?$NJ]8n$bDs6!$7$J$$!#(B
d99 1
a99 1
<h4>$B5!L)@@-(J</h4>(B $B<u?.<T0J30$N?M$K$O!"$I$s$J%G!<%?$,DL?.$5$l$?$+$r(B
d104 1
a104 1
<h4>$B40A4@@-!J(JIntegrity$B!K(J</h4>(B $B%G!<%?$,ESCf$G2~cb$5$l$J$$$h$&$K$9$k!#(B
d109 1
a109 1
<h4>Authenticity$B!J@@5??@@-!?3N<B@@-!K(J</h4>(B $B%G!<%?$K=pL>$7$F!"$=$l$rAw$C$?$N$,K\Ev$K$"$J$?$@@$HB>$N?M$,(B
d113 1
a113 1
<h4>$B:FAwJ]8n!J(JReplay(B (Jprotection$B!K(J</h4>(B $B$d$j$H$j$O!"2?EY$b7+$jJV$9$h$&G'$a$i$l$?$b$N0J30$O!"(B
d122 3
a124 3
<i>$B7Y9p(J:(B $BDL>o$N;EMM$K4X$9$k8B$j!"<jF080$N(B (JIPsec(B $B$r;H$C$F$$$k$H$-(B 
($B$?$H$($P(B (J<a(B (Jhref="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsecadm&amp;apropos=0&amp;sektion=8&amp;format=html">ipsecadm(8)</a>(B $B$r;H$C$F$$$k$H$-(J)(B
$B$K$O:FAw$+$i$NJ]8n$O<B9T$5$l$J$$(J</i>.(B
d129 1
a129 1
<h1>13.3 - IPsec $B$NN"$K$"$k%W%m%H%3%k$O(J?</h1>(B
d133 3
a135 3
IPsec $B$O!"5!L)@@-!"40A4@@-!"(Jauthenticity$B!J@@5??@@-!K!":FAwJ]8n$rDs6!$9$k$N$K!"(B
$B?7$7$$%W%m%H%3%k$r(B (J2(B $B$D;H$&!#$3$N%W%m%H%3%k$O(B (JAH$B!J(B
Authentication header, $BG'>Z%X%C%@@!K$H(B (JESP$B!J(JEncapsulated(B (Jsecurity(B (Jpayload$B!"0E9f%Z%$%m!<%I!K$@@!#(B
d138 1
a138 1
ESP $B$H$N<g$J:9$O!"(JAH(B $B$O%Q%1%C%H$N(B
d146 1
a146 1
$BG'>Z(J/$B40A4@@-$,$"$C$F$b$J$/$F$b;H$($k!#(B
d152 1
a152 1
<h1>13.4 - $B%M%C%H%o!<%/>e$N%Q%1%C%H%U%)!<%^%C%H(J</h1>(B
d155 2
a156 2
<p>   <B>$BG'>Z%X%C%@@!J(JAuthentication(B (JHeader$B!K(J</B>(B
(AH) $B$O4pK\E*$J(B (JIP(B $B%X%C%@@$N8e$K$-$F!"%G!<%?$N0E9f%O%C%7%e$H(B
d159 2
a160 2
AH $B$K;H$&<B:]$N%"%k%4%j%:%`$K$D$$$F$O!"$$$/$D$+JL8D$N(B (JRFC(B $B$,$"$C$FA*$Y$k$h$&$K$J$C$F$$$k$1$l$I!"(B
$B$=$N$I$l$b!"(J<a(B (Jhref="http://www.cis.ohio-state.edu/htbin/rfc/rfc2402.html">RFC2402</a>$B$K;XDj$5$l$?%,%$%I%i%$%s$K$O=`5r$7$F$$$J$/$F$O$J$i$J$$!#(B
d162 3
a164 3
<P>The <B>$B0E9f%Z%$%m!<%I!J(JEncapsulating(B
Security Payload$B!K(J</B>(B (J(ESP)(B $B%X%C%@@$O!"%Z%$%m!<%I$r0E9f2=$5$l$?7A$G=q$-49$($k$3$H$r2DG=$K$9$k!#(B
ESP $B%X%C%@@$O!"$=$l$K@@hN)$D(B (JIP(B
d166 2
a167 2
$B$=$l$>$l3F<o$N(B (JESP(B $B$O(B (J<A(B (JHREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2406.html">RFC2406</A>$B$K$7$?$,$&I,MW$,$"$k!#(B
ESP $B%X%C%@@$O!"%Z%$%m!<%I$NG'>Z$bDs6!$G$-$k!J$,(B (JESP(B $B$N30$N(B
d170 1
a170 1
<P>IPsec $B5!G=$N!J$[$H$s$I!KFHN)$7$?ItJ,$,!"(JIPsec(B (Jencapsulation(B $B$r(B
d172 1
a172 1
$B1~$8$FE,MQ$5$l$k(J:(B
d177 5
a181 5
(e.g . TCP, UDP) $B$N%X%C%@@$NA0$K!"(JIP$B%X%C%@@$,%Q%1%C%H$N@@hF,$K$D$1$i$l$kA0$NCJ3,$GDI2C$5$l$k!#(B
$B8@@$$49$($k$H!"%Q%1%C%H$KDI2C$5$l$?(B (JAH(B $B$,(B
TCP $B%X%C%@@$H!"(Jend-to-end(B (JIP(B $B%X%C%@@$N0lIt%U%#!<%k%I$N%O%C%7%s%0$rC4Ev$9$k$H$$$&$3$H$@@!#(B
$B$=$7$F(JTCP(B $B%X%C%@@$H%G!<%?$N0E9f2=$O(B (JESP(B
$B%X%C%@@$,%+%P!<$9$k$1$l$I!"$G$b$=$l$O(B (Jend-to-end(B (JIP(B $B%X%C%@@$O0E9f2=$7$F$/$l$J$$!#(J</LI>(B
d183 1
a183 1
<LI><B>$B%H%s%M%k(J</B>(B $B%b!<%I$O!"$9$G$K(B (Jend-to-end(B (JIP(B $B%X%C%@@$,(B
d185 1
a185 1
$B$?$@@$N%2!<%H%&%'%$$N$H$-$K;H$o$l$k!#$3$N%b!<%I$G$O!"(JAH(B $B$H(B (JESP(B $B%X%C%@@$O!"(B (Jend-to-end(B (Jheader(B $B$r4^$a(B
d187 2
a188 2
$B!J$H$$$C$F$b!"$3$l$O$b$A$m$sJ#?t$N(B (JIP(B $B%[%C%W$r$^$?$,$k$+$b$7$l$J$$$1$l$I!K$r%+%P!<$9$k!"(B
$B?7$7$$(B (JIP(B $B%X%C%@@$,$D$1$J$*$5$l$k!#(J</LI>(B
d191 2
a192 2
<P>IPsec $B$GJ]8n$5$l$?%j%s%/$O!"(J<B>Security(B (JAssociations(B
</B>(SAs) $B$K$h$C$FDj5A$E$1$i$l$k!#3F(B (JSA(B $B$OC10l$NC1J}8~$N%G!<%?$NN.$l$K$D$$$FDj5A$5$l$F!"(B
d194 9
a202 9
$B$J$s$i$+$N(J<B>$B%f%K!<%/$J%;%l%/%?(J</B>$B$K$h$C$F<1JL$G$-$k%H%i%U%#%C%/%U%m!<$r$5$9!#C10l$N(B (JSA(B $B>e$rN.$l$k%H%i%U%#%C%/$O$9$Y$F(B
$BF1$807$$$r<u$1$k!#%H%i%U%#%C%/$NCf$K$O!"J#?t$N(B (JSA(B $B$r7P$k$b$N$b$"$C$F!"(B
$B$=$N$=$l$>$l$,$J$s$i$+$NJQ49$r2C$($k!#(JSA(B $B$N=8CD$r(B
SA <B>Bundle</B> $B$H8F$V!#F~$C$F$/$k%Q%1%C%H$O!"(J3(B $B$D$NDj5A%U%#!<%k%I(B
(<B>$B08@@h(B (JIP(B $B%"%I%l%9(J,(B $B%;%-%e%j%F%#%Q%i%a!<%?%$%s%G%C%/%9!J(JSecurity(B (JParameter(B
Index$B!K(J,(B $B%;%-%e%j%F%#%W%m%H%3%k(J</B>)$B$K1~$8$F;XDj$N(B (JSA(B $B$K3d$jEv$F$k$3$H$,$G$-$k!#(B
$B%;%-%e%j%F%#%Q%i%a!<%?%$%s%G%C%/%9!J(JSecurity(B (JParameter(B
Index$B!"N,$7$F(JSPI$B!K$O@@\B3$N%Q%i%a!<%?$N%M%4%7%(!<%7%g%s$,9T$o$l$k$H$-$K!"(JSA(B $B$N<u$1<j$,<jEO$9%/%C%-!<$@@$H;W$($P$$$$!#(B
$B%;%-%e%j%F%#%W%m%H%3%k$O(B (JAH(B $B$+(B (JESP(B $B$N$I$A$i$+$G$J$/$F$O$J$i$J$$!#<u$1<j$N(B (JIP(B
d204 1
a204 1
$B$3$l$O30B&$N(B (JIP(B $B%X%C%@@$+$i8+$D$1$k$3$H$b$G$-$k$7!":G=i$N%;%-%e%j%F%#%X%C%@@!J$3$l$O(B (JSPI(B $B$H%;%-%e%j%F%#%W%m%H%3%k$r4^$`!K$+$i8+$D$1$k$3$H$b$G$-$k!#(B
d206 1
a206 1
<P>$B%H%s%M%k%b!<%I$N(B (JAH(B $B%Q%1%C%H$NNc$r5s$2$h$&(J:(B
d210 1
a210 1
<td><B>IP$B%X%C%@@(J</B></td>(B
d212 3
a214 3
<td>IP$B%X%C%@@(J2</td>(B
<td>TCP$B%X%C%@@(J</td>(B
<td>$B%G!<%?(J</td>(B
d218 1
a218 1
<P>transport $B%b!<%I(B (JAH(B $B%Q%1%C%H$NNc$r5s$2$h$&(J:(B
d222 1
a222 1
<td><B>IP$B%X%C%@@(J</B></td>(B
d224 2
a225 2
<td>TCP$B%X%C%@@(J</td>(B
<td>$B%G!<%?(J</td>(B
d229 2
a230 2
<P>ESP $B%X%C%@@$O30B&$N(B (JIP(B $B%X%C%@@$rG'>Z$G$-$J$$$N$G!"(B
AH $B$H(B (JESP(B $B%X%C%@@$rAH$_9g$o$;$F<!$N$h$&$K$7$?$[$&$,$$$$(J:(B
d234 1
a234 1
<td><B>IP$B%X%C%@@(J</B></td>(B
d237 2
a238 2
<td><I>TCP$B%X%C%@@(J</I></td>(B
<td><I>$B%G!<%?(J</I></td>(B
d242 2
a243 2
<P>$B$3$l$O(B (J<B>Transport(B (JAdjacency</B>(B $B$H8F$P$l$k!#%H%s%M%kHG$@@$H(B
$B$3$s$J46$8$@@(J:(B
d247 1
a247 1
<td><B>IP$B%X%C%@@(J</B></td>(B
d250 3
a252 3
<td><I>IP$B%X%C%@@(J2</I></td>(B
<td><I>TCP$B%X%C%@@(J</I></td>(B
<td><I>$B%G!<%?(J</I></td>(B
d256 2
a257 2
<P>$B$G$b!"$3$l$O(B (JRFC(B $B$K$OL@@<(E*$K5-=R$5$l$F$$$J$$!#(JTransport(B
adjacency $B$HF1$8$h$&$K!"$3$l$O(JIP(B $B%X%C%@@$NCf$N%X%C%@@$$$/$D$+$r=|$$$FA4%Q%1%C%H$rG'>Z$7$?$&$($G!"(B
d259 1
a259 1
AH $B$H(B (JESP(B $B%X%C%@@$,$3$N$h$&$KD>@@\$$$C$7$g$KE,MQ$5$l$F$$$k$H$-$K$O!"(B
d261 1
a261 1
$BG$0U$N(B (Jrecursive(B (Jencapsulation(B $B$r$d$k$3$H$G!"$3$N=gHV$,;XDj$5$l$:$K$9$`$h$&$K$9$k$3$H$b$G$-$k!#(B
d266 1
a266 1
<h1>13.5 - IPsec $B$N@@_Dj(J</h1>(B
d270 1
a270 1
$B$J$C$F$O$$$k$N$@@$1$l$I!"$G$b(B (JRFC(B $B$O$=$l$,$I$&<BAu$5$l$k$Y$-$+$K$D$$$F6/$$%l%3%a%s%G!<%7%g%s$r9T$C$F(B
d274 3
a276 3
$B0l$D$O(J<B>Security(B (JAssociation(B (JDatabase</B>(B (J(SAD,(B 
OpenBSD$B$N(B (JIPsec$B%=!<%9%3!<%I$NCf$G$O!"(JTDB(B $B$^$?$O(B (JTDB(B (Jtable(B $B$H8F$P$l$F$$$k!K$G!"(B
$B$b$&0l$D$O(J<B>Security(B (JPolicy(B (JDatabase</B>(B (J(SPD)$B$@@!#(B
d280 6
a285 6
$B$G$b(JSPD(B $B$O<B:]$N=hM}$+$iFsCJ3,$[$I1s$$$H$3$m$K$"$k(J:(B 
SPD $B$O30$X=P$k%Q%1%C%H$K;H$o$l$F!"$I$N(B (JSAD(B $B%(%s%H%j$r;H$&$Y$-$+7h$a$k$N$KMxMQ$5$l$k!#(B
$B5U$K(B (JSAD(B $B%(%s%H%j$O!"<B:]$N%W%m%;%9$H$=$3$G;H$&%Q%i%a!<%?$r5-=R$9$k!#(B
SPD $B$N%(%s%H%j$O!"4{B8$N(B (JSAD(B $B%(%s%H%j$N$&$A$I$l$r;H$&$+(B
$B!J%P%s%I%k$J$i!"(JSAD(B $B%(%s%H%j$OJ#?t$"$jF@@$k$N$G!K$r;XDj$9$k$1$l$I!"$G$b$9$G$K(B
$BE,@@Z$J$b$N$,$J$$$J$i!"$=$N%(%s%H%j$r;H$C$F?7$7$$$b$N$,$D$/$i$l$k!#$D$/$i$l$k(B (JSA(B $B$N%U%#!<%k%I$O!"(B
d289 3
a291 3
<P>$B!!309T$-$N%Q%1%C%H$O!"(JSPD(B $B%(%s%H%j$+$i8DJL$N(B (JSA(B $B$K9T$C$F%(%s%3!<%G%#%s%0MQ(B
$B%Q%i%a!<%?$r$b$i$&!#F~$C$F$/$k%Q%1%C%H$O!"(JSPI/$B08@@h(JIP/$B%W%m%H%3%k$N(B (J3(B $BE@@%;%C%H$r;H$C$F(B
$BD>@@\@@5$7$$(B (JSA(B $B$K$?$I$j$D$-!"$=$3$+$i(B (JSPD(B $B%(%s%H%j$K$?$I$j$D$/!#(B
d293 2
a294 2
<P>$B!!(JSPD(B $B$O$^$?$I$N%H%i%U%#%C%/$,(B (JIPsec(B $B$r%P%$%Q%9$9$Y$-$+!"$^$?$I$N%H%i%U%#%C%/$r(B
$B<N$F$k$Y$-$+$r;XDj$G$-$k$N$G!"F~$C$F$/$kHs(B (JIPsec(B $B$N%H%i%U%#%C%/$K$D$$$F$b;2>H$5$l$J$/$F$O$J$i$J$$!#(B
d300 2
a301 2
$BAw?.85$H08@@h%"%I%l%9!"4X78$"$k>l9g$K$O%]!<%HHV9f!"%"%W%j%1!<%7%g%s$d!"$"$k>l9g$K$O%f!<%6(B (JID(B
$B!J$3$l$O(B (Jhost(B (Jbased(B (Jtransport(B (JSA$B$N$_(J)$B!"%[%9%HL>!"%;%-%e%j%F%#(B
d304 1
a304 1
<P>SAD $B%(%s%H%j$K4^$^$l$k$N$O$?$H$($P(J:(B
d307 3
a309 3
<LI>$B08@@h(B (JIP(B $B%"%I%l%9(B
<LI>IPsec $B%W%m%H%3%k(J(AH(B $B$+(B (JESP)(B
<LI>SPI ($B%/%C%-!<(J)(B
d320 1
a320 1
<P>SPD $B%(%s%H%j$K4^$^$l$k$N$O(J:(B
d327 1
a327 1
<P>$B3F(B (JSA(B $B$O!"(JESP(B $B%X%C%@@0l$D$H(B (JAH(B $B%X%C%@@0l$D$rDj5A$G$-$k!#(B
d329 2
a330 2
$B$G$-$J$$!=!=$5$b$J$$$H!"(JSA(B $B$r;2>H$9$k$?$a$N(B (JSPI(B $B$r;XDj$9$k%X%C%@@$,$J$$$3$H$K$J$C$F$7$^$&!#(B
RFC $B$O!"(JAH(B $B$H(JESP(B $B%X%C%@@$,(B (JSPI(B $B$NCM$K$D$$$F(B
d332 1
a332 1
$B$3$l$O%P%s%I%kCf$NJ#?t$N(B (JSA(B $B$r0UL#$9$k$b$N$HH=CG$5$l$k$@@$m$&!#(B
d334 1
a334 1
<P>OpenBSD $B$N(B (JSPD(B $B$O!"(J<tt>ipsecadm(B (Jflow</tt>(B $B%3%^%s%I$r;H$C$F4IM}$5$l$k(B
d340 1
a340 1
OpenBSD $B$O(JPhoturis(B (J(<A(B (JHREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2522.html">RFC2522</a>$B$*$h$S(B
d342 1
a342 1
$B$H(B (JISAKMP(B $B<+F0$+$.8r49(B
d348 1
a348 1
$B$H(B (J<a(B (Jhref="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&apropos=0&sektion=8&format=html">isakmpd(8)</a>(B
d354 1
a354 1
<h1>13.6 - $B<jF080@@_Dj$G(B (JIPsec(B $B$r@@_Dj$9$k$K$O$I$&$9$k$N(J?</h1>(B
d358 1
a358 1
$B$3$N<jK!$G%M%C%H%o!<%/4V$r0E9f2=$7$F(JVPN$B$r$D$/$l$k!#(B
d360 1
a360 1
$B<+F02=$9$k$N$K(J<A(B (JHREF="http://www.openbsd.org/cgi-bin/cvsweb/src/share/ipsec/rc.vpn?rev=1.3">/usr/share/ipsec/rc.vpn</a>(B
d363 6
a368 6
$B$^$:!"(JOpenBSD$B%+!<%M%k$N(B (JIP(B (JAH(B $B$H(B (JIP(B (JESP(B $B%*%W%7%g%s$rM-8z$K$7$h$&(B
($B$b$7(B (Jrc.vpn(B $B%9%/%j%W%H$r;H$C$F$$$?$j!"$"$k$$$O(B
$B$3$N<!$NNc$N$h$&$K!"(JESP(B $B$@@$1$r;H$C$F$$$k$h$&$J>l9g$K$O(B (J<i>AH$B$OM-8z$K$7$J$$$G$$$$!#(J</i>$B$=$l$I$3$m$+!"(B
$B;H$C$F$$$J$$$N$K(B (JAH(B $B$rM-8z$K$9$k$H%;%-%e%j%F%#>e$NLdBj$,(B
$BH/@@8$9$k$+$b$7$l$J$$!K!#(J<P>(B
$B$3$&$$$&%W%m%H%3%k$rM-8z$K$9$k$?$a$N!"$9$F$-$J(B (Jsysctl(B $B$,$"$k!#(B
d375 3
a377 3
$B5/F0;~$K$3$l$r$?$A$"$2$k$K$O(J<tt>/etc/sysctl.conf</tt>(B $B$rJT=8$9$l$P$$$$!#(B
$B;H$$$?$$$b$N$K1~$8$F(Jnet.inet.esp.enable(B $B$=$7$F(J/$B$"$k$$$O(B
net.inet.ah.enable$B$NA0$N(B (J#(B $B$r$O$:$7!"$=$l$,(B (J1(B $B$K%;%C%H$5$l$F$$$k(B
d385 1
a385 1
$B%G%P%$%9$r;H$&<j$,$"$k!#$?$H$($P(J160$B%S%C%HJ,$NMp?t@@-$r$D$/$j$@@$9$K$O!"0J2<$N$h$&$K$9$k(J:(B
d394 2
a395 2
BLF       $B2DJQ(B (J(40-160,(B (J160(B (Jbits(B $B?d>)(J)(B
CAST      $B2DJQ(B (J(40-128,(B (J128(B (Jbits(B $B?d>)(J)(B
d399 9
a407 9
$B$G$O!"(JSA(B (J(Security(B (JAssociations)(B $B$N@@_Dj$r$7$h$&!#(B
Security Association $B$H$$$&$N$O!"(JIP(B $B%"%I%l%9!"(JSPI,(B 
$B%;%-%e%j%F%#%W%m%H%3%k(B (J(AH(B $B$=$7$F(J/$B$^$?$O(B (JESP)(B $B$NAH$_9g$o$;$@@!#(JIP(B $B%"%I%l%9$O!"$"$J$?<+?H$N$b$N$H!"(B
$BAw$j@@h$N$b$NN>J}$@@!#(JSPI(B (J(Security(B (JParameter(B
Index) $B$O3F<o(B (JSA(B $B$NJ,N`$K(B (JOpenBSD(B $B$,;H$&HV9f$@@!#(B
<P>
<I>$B$3$l$i$NNc$O!"%H%i%U%#%C%/$N0E9f2=$K(B (JESP(B $B$7$+;H$o$J$$!#(JESP(B $B$O(B
$B0E9f2=$5$l$?Cf?H$N%G!<%?$NG'>Z$O$9$k$1$l$I!"(JAH(B $B$H$O$A$,$C$F(B
$B$=$l$rJq$`(JIP(B $B%X%C%@@$OG'>Z$7$F$/$l$J$$!#$3$N!V8B$i$l$?G'>Z!W$O!"(B
d409 1
a409 1
ESP $B$N>l9g$K$O!#(J</I>(B
d418 1
a418 1
$B$3$l$rFs$D$N%k!<%?$G<B:]$K$d$C$F$_$h$&!#%k!<%?$N(JIP$B%"%I%l%9$O$=$l$>$l(J192.168.5.1(B $B$H(B (J192.168.25.9$B$@@!#(B
d420 1
a420 1
$B%[%9%H(J192.168.5.1$B>e$G$O(J:(B
d427 1
a427 1
$B%[%9%H(B (J192.168.25.9$B>e$G$O(J:(B
d435 1
a435 1
$B$4$i$s$N$h$&$K!"(JSPI(B $B$,$A$,$C$F$$$k!#(JSPI(B $B$,2?$G!"$=$l$,$I$3$G;H$o$l$F$$$k$+$K$D$$$F$N40A4$J@@bL@@$O!"(J<A(B (JHREF="#13.4">On(B (Jthe(B (Jwire(B (Jformat</a>(B $B$r;2>H!#(B
d437 1
a437 1
$B$3$l$G(B (JSecurity(B (JAssociations(B $B$,$G$-$"$,$C$?$N$G!"(B
d440 2
a441 2
$B$^$:$O(J192.168.5.1$B$+$i(J:<P>(B
$B$5$F$3$3$G$$$-$J$j!"%U%m!<$,(J<b>2$B$D(J</b>$BAO$i$l$k!#0l$D$O%m!<%+%k$N%=!<%9%"%I%l%9$G!"(B
d450 1
a450 1
192.168.25.9$BB&$G$O$3$s$J6q9g$@@(J:(B
d457 4
a460 4
$B$b$7(B (JHost-to-Host(B (JVPN(B $B$N%*!<%P!<%X%C%I$r8:$i$7$?$1$l$P!"(JSPI(B
$B$r:n$k$N$K(B (J<tt>-forcetunnel</tt>(B $B$r$O$:$7$F$*$/$H!"(Jtransport(B $B%b!<%I$,;H$($k(B (J(<tt>-forcetunnel</tt>(B
$B$r;H$&$H(B (JIP(B $B%X%C%@@$^$G4^$s$@@(JIP(B $B%Q%1%C%H$N$9$Y$F$,I,$:(JSPI$B$K%+%W%;%k2=(B
$B$5$l$k(J)$B!#$b$7(B
d462 2
a463 2
$B%M%C%H%o!<%/$+$i=PF~$j$9$k%H%i%U%#%C%/$K(B (JSA(B $B$r;H$&$H!"<+F0E*$K(B
$B%H%s%M%k%b!<%I$N(B (JSPI(B $B$,3N<B$K:n$i$l$k$3$H$K$J$k!#(B
d465 1
a465 1
$B$3$l$O(JIPsec$B$r;H$$;O$a$k4JC1$J$d$j$+$?$@@!#(B
d467 4
a470 4
IPsec $B$r;H$($P!"%W%i%$%Y!<%H(B (JIP(B $B%"%I%l%96u4V$r%$%s%?!<%M%C%H$4$7$K$D$J$2$k!#(B
$B$$$$Nc$r5s$2$h$&!D!D(J208.1.1.1$B$NGX8e$K$"$k(B (J192.168.99.0/24(B $B$H!"(B
208.2.2.2$B$NGX8e$K$"$k(B (J208.1.5.0/24(B $B$H(B (J208.1.2.0/24(B $B$r%H%s%M%k$G$D$J$2$?$$$H$7$h$&!#(B
$B0J2<$NNc$O(B (J<A(B (JHREF="http://www.openbsd.org/cgi-bin/cvsweb/src/share/ipsec/rc.vpn?rev=1.3">rc.vpn</a>(B $B%9%/%j%W%H$r;H$C$F@@8@@.$7$?$b$N$@@!#(B
d472 2
a473 2
$B$4$i$s$N$H$*$j!"(JIPsec$B$G<jF080@@_Dj$r;H$C$F$$$k$H!"(B
$B$d$C$F$[$7$$$3$H$r(J<b>$B$:$P$j@@53N$K(J</b>$B;XDj$7$J$-$c%@@%a$@@!#(B
d475 3
a477 3
<h2>208.1.1.1$B$NB&$G$O(J:</h2>(B
$B$^$:!"(Jsecurity(B (Jassociations(B (J(SA)$B$r@@_Dj$7$h$&(J:<BR>(B
($B$3$l$G(B (JSPI,(B $B0E9f2=$NJ}K!$H80$,@@_Dj$5$l$k(J)(B 
d482 1
a482 1
$B<!$K!"(J208.1.1.1(B $B$+$i(B (J208.2.2.2$B$X$N%U%m!<$r@@_Dj!'(B
d486 1
a486 1
$B<!$K(B  (J208.2.2.2$B$NGX8e$K$"$k(J208.1.2.0/24(B $B$+$i(B (J192.168.99.0/24$B$X$N%U%m!<$r@@_Dj!'(B
d490 1
a490 1
$B<!$K(B (J208.2.2.2$B$NGX8e$K$"$k(B (J208.1.5.0/24(B $B$+$i(B (J192.168.99.0/24$B$X$N%U%m!<$r@@_Dj!'(B
d494 1
a494 1
$B$3$s$I$O(B (J208.2.2.2$B$NGX8e$K$"$k(B (J208.1.2.0/24(B $B$+$i%k!<%?(B (J208.1.1.1$B$X$N%U%m!<$r@@_Dj!'(B
d498 1
a498 1
$B%*%C%1!<!"$G$O(B (J208.2.2.2$B$NGX8e$N(B (J208.1.5.0/24(B $B$+$i%k!<%?(B (J208.1.1.1$B$X$N%U%m!<$r@@_Dj(B
d502 1
a502 1
$B:G8e$K!"%k!<%?(B (J208.2.2.2(B $B$+$i(B (J192.168.99.0/24$B$X$N%U%m!<$r@@_Dj$7$h$&(B
d507 2
a508 2
<h2>208.2.2.2$BB&$G$O(J:</h2>(B
$BA0$HF1$8$h$&$K!"$^$:$O(B (JSA$B$N@@_Dj$+$i!D!D(B
d514 1
a514 1
$B%k!<%?(B (J208.2.2.2(B $B$+$i(B (J208.1.1.1$B$X$N%U%m!<$r@@_Dj!'(B
d518 1
a518 1
208.1.1.1$B$NGX8e$K$"$k%M%C%H%o!<%/(B (J192.168.99.0/24(B $B$+$i(B (J208.1.2.0/24$B$X$N%U%m!<$r@@_Dj!'(B
d522 1
a522 1
208.1.1.1$B$NGX8e$K$"$k%M%C%H%o!<%/(B (J192.168.99.0/24(B $B$+$i(B (J208.1.5.0/24$B$X$N%U%m!<$r@@_Dj!'(B
d526 1
a526 1
$B$G$O(J208.1.1.1$B$NGX8e$N(B (J192.169.99.0/24(B $B$+$i%k!<%?(B (J208.2.2.2$B$X$N%U%m!<$r@@_Dj!'(B
d531 2
a532 2
208.1.2.0/24 $B$H(B (J208.1.5.0/24(B $B$r%k!<%?(B (J208.2.2.2$B$+$i(B (J208.1.1.1$B$^$GFO$1$k$N$K!"(B
$B$"$H%U%m!<(J2$B$D$@@$1!'(B
d543 1
a543 1
$B$3$l$G$9$Y$F$N(B (JIPsec(B $B>pJs(B (J(SPI$B!"%U%m!<!"%k!<%F%#%s%0$N%(%s%H%j!K$,%7%9%F%`$+$i0lA]$5$l$k!#(B
d548 1
a548 1
<h1>13.7 - photurisd$B$N@@_Dj$O$I$&$d$k$N(J?</h1>(B
d552 1
a552 1
RFC$B$N%9%F!<%?%9$+$i8@@$($P$^$@@<B83CJ3,$@@!#$G$b(JOpenBSD$B$G$O$?$/$5$s$N?M$,(B
d555 2
a556 2
photurisd $B$r@@_Dj$9$k$K$O!"$^$:(B (J/etc/photuris/secrets.conf(B
$B$r(B (Jphoturisd$B$r;}$C$?%[%9%H$N$9$Y$F$GJT=8$9$k$3$H!#(B
d566 2
a567 2
identity local &quot;Default&quot; &quot;$B$3$3$rJQ$($k(J&quot;(B
identity remote &quot;Default&quot; &quot;$B$3$3$rJQ$($k(J&quot;(B
d569 5
a573 5
&quot;$B$3$3$rJQ$($k(J&quot;(B $B$NItJ,$r!"(Jlocal(B (Jconfig(B $BB&$G9%$-$J80$K$7$F!"(B
$B$=$l$+$i(Jremote(B (Jconfig$B$G$OJL$N9%$-$J80$K$7$h$&!#(B
($B%j%b!<%H%\%C%/%9$G$b(B (Jconfig(B $B$r;H$&$3$H!#$?$@@$7(B (J&quot;local&quot;(B 
&quot;remote&quot; $B$rF~$lBX$($F!"%j%b!<%H%[%9%HB&$K$H$C$F$O$=$C$A$,%m!<%+%k80$K$J$k$h$&$K$9$k!#(J)(B
$B$J$*!"$3$l$i$N80$O>-Mh$N(B (Jphoturisd(B $B$N%P!<%8%g%s$G$O!"(B
d576 1
a576 1
<tt>net.inet.ah.enable</tt> $B$,(B (J1$B$K@@_Dj$5$l$F$$$k$3$H$r3NG'$7$h$&!#(B
d581 1
a581 1
$B$=$l$+$i(B (Jstartkey$B$r<B9T!#(B
d585 2
a586 2
$B$=$l$G$O(B (Jtcpdump(B $B$r<B9T$7$F!"%Q%1%C%H$,(B (JAH$B$G0E9f2=$5$l$F$$$k$3$H$r3NG'$7$F$_$h$&(B
$B!JJL$N%&%#%s%I%&$G(Jping$B$9$k$H$+!"$J$s$+%;%C%7%g%s$r3+;O$7$F%H%i%U%#%C%/$r$D$/$k$3$H!K!#(B
d590 1
a590 1
$B$J$K$b=P$F$3$J$$$h$&$J$i!"(Jtcpdump(B $B$r%[%9%H%"%I%l%9B&$G;H$C$F$_$k<j$,$"$k!#(B
d595 1
a595 1
$B$9$k$K$O!"(B (J/etc/photuris/photuris.startup$B$K5-=R$7$F$*$/!#(B
d600 1
a600 1
<h1>13.8 - isakmpd$B$N@@_Dj$O(J?</h1>(B
d602 2
a603 2
<p>VPNs $B$r$O$8$a(JIPsec$B$N3F<oEAE}E*$J%"%W%j%1!<%7%g%s$r9M$($F$$$k$J$i!"(B
$B$?$V$s(B (JISAKMP(B $B$r;H$&$3$H$K$J$k!#(JIPsec(B $B$N>&6H<BAu$N(B
d605 1
a605 1
$B$J$s$i$+$N7A$N(B (JISAKMP$B$r;H$&$7$+$J$/$J$k!#(B
d608 4
a611 4
<h3>13.8.1 - isakmpd$B$C$F$J$K(J?</h3>(B (JISAKMP(B (J($B$H$-$I$-(B (JIKE,(B 
Internet Key Exchange$B!"%$%s%?!<%M%C%H808r49!"<+F0808r49$H$b8F$P$l$k(J)(B $B$O(B (JVPN(B $BMQ$N808r49%a%+%K%:%`$@@!#(B
RFC 2407, RFC 2408$B!"(JRFC(B (J2409$B$K5-=R$5$l$?<jK!$r;H$C$F%;%-%e%j%F%#>e$NLdBj$r%/%j%"$7$F$$$k!#(B
ISAKMP $B$O!"DL>o$J$i(B (J<(Ba
d614 1
a614 1
$BFs$D$N(JIPsec$B%N!<%I4V$G(JIPsec$B%Q%i%a!<%?$r3NN)$9$k$?$a$K!"(B
d617 1
a617 1
<P> <b>$B%U%'!<%:(B (J1</b>(B (J-(B (JISAKMP(B $B%T%"#2$D$O!"J]8n$5$lG'>Z$5$l$?%A%c%M%k$r3NN)$7!"(B
d619 2
a620 2
$BN>%[%9%H4V$G(B (JSecurity(B (JAssociation(B (J(SA)(B $B$r3NN)$9$k!#$3$N%A%c%M%k$r3NN)$9$k$?$a$N<jK!$O!"(J<b>Main(B
Mode</b> $B$H(B (J<b>Aggressive(B (JMode</b>(B $B$@@!#(B
d622 1
a622 1
$BFCDj$N=gHV$GAw$j!"%"%$%G%s%F%#%F%#$NJ]8n$rDs6!$9$k!#(JAggressive(B (JMode(B $B$O(B
d624 1
a624 1
$B$9$Y$F0l5$$KAw$k$+$i$@@!#(JAggressive(B (Jmode(B $B$r;H$&$N$O!"(B
d628 3
a630 3
<b>$B%U%'!<%:(B (J2</b>(B (J-(B (JSecurity(B (JAssociations(B $B$,(JIPsec$B$K$+$o$C$F%M%4$5$l$k!#(B
$B%U%'!<%:(B (J2(B $B$O(JIPsec$B%[%9%H4V$K%H%s%M%k$+(B (Jendpoint(B (JSA(B $B$r3NN)$9$k!#(B
$B%U%'!<%:(B (J2(B $B$G$O(J<b>Quick(B (JMode</b>(B $B$,;H$o$l$k!#%U%'!<%:(B (J1(B $B$G$9$G$K(B (JSA(B $B$,3NN)$7$F$$$k$N$G!"(B
d635 5
a639 5
$B<jC;$K$$$($P!"%U%'!<%:(B (J1(B $B$OJ]8n$5$l$?%A%c%M%k$r3NJ]$9$k$N$K;H$o$l$F!"$=$3$G(B
$B!J$b$C$H<jAa$$!K%U%'!<%:(B (J2(B $B$N@@_Dj$,9T$o$l$k!#F1$8%U%'!<%:(B (J1(B $B%A%c%M%k$NCf$G!"J#?t$N%U%'!<%:(B (J2(B $B@@_Dj$r(B
$B$9$k$3$H$b$"$k!#%U%'!<%:(B (J2(B $B$O<B:]$N%H%s%M%k$r@@_Dj$9$k$N$K;H$o$l$k!#(B
$B%U%'!<%:(B (J1(B $B$G$O(B (JIPsec(B $B%N!<%IF1;N$,@@\B3$r3NN)$7$F(B
$BG'>Z$r8r49$9$k(B (J(X509(B $B>ZL@@$+!"(B
d641 1
a641 1
$B3NG'$G$-$k!#%U%'!<%:(B (J2(B $B$O80$N8r49$G!"N><T$N4V$N%G!<%?$,(B
d644 1
a644 1
<h3>13.8.2 - isakmpd$B$3$H$O$8$a(J</h3>(B
d647 1
a647 1
$B%G%U%)%k%H$G(B (JOpenBSD(B $B$O(B (JISAKMP(B $B$H(B
d649 1
a649 1
$B%5%s%W%k%U%!%$%k$O%G%U%)%k%H$G$O$J$$!#$3$l$r<j$KF~$l$k$K$O!"%=!<%9%D%j!<$+$i0J2<$N$b$N$r<h$C$F$3$h$&(J:(B
d652 1
a652 1
CD-ROM$B!JEvA3;}$C$F$k$h$M!K$+$i$G$b$$$$$7!"(J<A(B
d654 2
a655 2
<a href="http://www.usa.openbsd.org/anoncvs.html">$B%3%^%s%I%i%$%s(B (JCVS(B
$B%/%i%$%"%s%H(J</a>.(B $B$r;H$C$F$b$$$$(B (J(Cvsweb(B $B$O(B (J<(Ba
d657 1
a657 1
$B$H(B (J<(Ba
d659 4
a662 4
$B$rMQ0U$7$F$"$k(J)$B!#$3$NNc$G;H$&$K$O!"(J<i>policy</i>(B
$B$r(B (J/etc/isakmpd/isakmpd.policy(B $B$K%3%T!<$7$h$&!#(J<i>VPN-east.conf</i>(B $B$O(B (J/etc/isakmpd/isakmpd.conf$B$K%3%T!<$9$k!#(B
$B$3$3$G$O!"(JVPN(B (J($B%H%s%M%k(J)(B $B$N@@_Dj$N;EJ}$r@@bL@@$7$F$_$k!#$b$7(B
isakmpd $B$r8DJL%[%9%H4V$G;H$$$?$1$l$P!"(J<i>samples</i>(B $B%G%#%l%/%H%j$K$=$lMQ$N%5%s%W%k$,(B
d669 6
a674 6
$B$^$:$O(B (Jesp(B $B$N5/F0$+$i$@@!#(BFAQ $B%;%/%7%g%s$NF,$N$H$3$m$N(B <a href="#ManKey">
Manual Keying(J</a>(B $B$G!"$3$l$r<B9T;~!&5/F0;~$K$=$l$>$l$d$kJ}K!$r@@bL@@$7$F$$$k!#(B
$B<!$K(B (J/etc/isakmpd.policy(B $B$NJT=8$@@!#(B
$B$3$N%U%!%$%k$O(B (JISAKMP(B $B$K!"$@@$l$,(B (JIPsec(B $B$K%"%/%;%9$G$-$k$+$r65$($k!#$3$N%7%J%j%*$G$O!"$3$N(B (Jpolicy(B $B%U%!%$%k$O!"(B
Encapsulate Security Payload(ESP) $B$r;H$C$F%G!<%?$rAw$C$F$-$F!"(Jmekmitasdigoat(B $B$H$$$&%Q%9%o!<%I(B ($B$3$l$O$"$J$?$,(B
$B>!<j$K7h$a$l$P$$$$(B) $B$GG'>Z$5$l$?Aj<j$J$i!"$@@$l$G$b(B (Jisakmpd(B $B$HDL?.$G$-$k$H=R$Y$F$$$k!#$3$N%U%!%$%k$r$rJQ99$7$F!"(B
d676 2
a677 2
$B4uK>$r(JISAKMP$B$KEA$($i$l$k!#$^$?$@@$l$G$b(B (JIPsec(B $B$,;H$($k$h$&$K$7$F$b$$$$!#$3$l$O%F%9%HMQ$@@$1$K$7$F$*$/$N$,K>$^$7$$!#(B
$BK|?M$K%"%/%;%9$5$;$k$K$O!"(Jpolicy(B $B%U%!%$%k$rJT=8$7$F0J2<$@@$1$K$7$h$&(J:(B
d684 2
a685 2
$BF1$8(B (Jpolicy(B $B%U%!%$%k$K$O(B (J$(B $B$N$D$$$?9T$,Fs9T$"$k!#(B
$B;H$&A0$K$3$N#29T$O:o=|$9$k$3$H!#(JCVS(B $B$G$7$+;H$o$J$$!#(B
d687 1
a687 1
$B$3$NNc$G!"$b$C$H;H$$J*$K$J$k(B (Jpolicy(B $B%U%!%$%k$O$3$s$J46$8$@@(J:(B
d690 1
a690 1
Comment: $B$3$N(B (Jpolicy(B $B$O@@5$7$$%Q%9%o!<%I$r;H$&%j%b!<%H$+$i$N(B (JESP(B (JSA(B $B$r<u$1IU$1$k(B
d696 3
a698 3
$B$3$l$r<BAu$9$l$P!"(JESP(B $B$@@$1$r;H$C$?4pK\E*$J(B (JVPN(B (J($B%H%s%M%k(J)(B $B$,$G$-$"$,$k!#(B
$B%[%9%H(B (JA(B $B$G$O(B (J/etc/isakmpd/isakmpd.conf(B $B$rJT=8$9$k!#8+K\$GF~$C$F$$$k(J249.2.2.2(B $B$H$$$&(B (JIP(B $B%"%I%l%9$O!"(B
$B%[%9%H(B (JA(B $B$N<B:]$N30It(B (JIP(B $B%"%I%l%9$K=q$-49$($k$3$H!#(B
d707 2
a708 2
$BF1$8$h$&$J$3$H$r%[%9%H(B (JB(B $B$N(B (Jisakmpd.conf(B $B$G$b$d$m$&!#(J249.3.3.3(B $B$O(B
$B%[%9%H(B (JB(B $B$N30It(B (JIP(B $B%"%I%l%9$@@!#(B
d717 1
a717 1
<p>$B$3$3$G(B (Jisakmpd(B $B$N$*$b$J$U$k$^$$$r7h$a$kJQ?t$r@@_Dj$G$-$k!#$3$3$G$O(B
d719 2
a720 2
<b>Listen-on</b>= value $B$O!"(Jisakmpd(B $B$,J9$-<*$r$?$F$k$Y$-(B (JIP(B 
$B$r;XDj$9$k!#$"$J$?$N%2!<%H%&%'%$$N%$%s%?!<%M%C%H(B (JIP(B $B$@@$1$,I,MW$@@!#(B
d724 1
a724 1
$B<!$K%[%9%H(B (JA(B $B$G!"$b$&0lEY(Jisakmpd.conf(B $B$rJT=8$7$h$&!#(B
d731 1
a731 1
$B%[%9%H(B (JB$B$G$O(J:(B
d738 2
a739 2
<p>$B$3$NItJ,$O!"%U%'!<%:(B (J1(B $B@@\B3$N%M%4%7%(!<%7%g%s$r$9$k$H$-$K<u$1IU$1$k$Y$-(B (JIP(B $B%"%I%l%9$r5-=R$9$k!#(B
$B$3$3$G$NCM$O2<$NItJ,$r;X$7$F$$$k!J%U%'!<%:(B (J1(B $B$OC1$K%j%b!<%H$N%T%"$rG'>Z$7$F!"(B
d743 1
a743 1
$B<!$K%[%9%H(B (JA$B$G$O(J:(B
d749 1
a749 1
$B%[%9%H(B (JB$B$G$O(J:(B
d756 1
a756 1
<p>$B$3$l$O@@\B3$N%U%'!<%:(B (J2(B $B$r5-=R$7$?$b$N!#$3$N%U%'!<%:$O!"DL?.$KN>(B
d760 2
a761 2
$B%U%'!<%:(B (J2(B $B$r@@_Dj$9$k$?$a$K<u$1F~$l$i$l$k%a%=%C%I$dMW7o$r%$%K%7%(!<%H$9$k!#$3$l$O$^$?!"(B
$B$$$C$?$s3+;O$7$?$i$I$N@@\B3$r%$%K%7%(!<%H$9$Y$-$+$r(JISAKMPD(B $B$K9p$2$k!#(B
d765 3
a767 3
<p>$B%j%b!<%H%[%9%H$N(B (JIP(B $B%"%I%l%9$,$o$+$i$J$1$l$P!"(B (J<b>Connections</b>=(B (Jtag(B $B$K(B
$B5s$,$C$F$$$J$$(B (JIP(B $B$+$i$N@@\B3$G;2>H$5$l$k!"HFMQ%(%s%H%j$r$"$k%;%/%7%g%s$K5-=R$7$F$*$$$F!"(B
$B$=$l$r(B (JDefault=(B $B$G;XDj$9$k$h$&$K$9$l$P$$$$!#(B
d769 1
a769 1
$B%[%9%H(B (JA$B$G$O(J:(B
d781 1
a781 1
$B%[%9%H(B (JB$B$G$O(J:(B
d794 2
a795 2
$B$3$l$i$O>e$G@@bL@@$7$?%U%'!<%:(B (J1(B $B$NItJ,$G;2>H$5$l$F$$$k%;%/%7%g%s$@@!#$=$l$>$l(B
$B%U%'!<%:(B (J2(B $B$K?J$`$?$a$K%T%"$N%2!<%H%&%'%$$,K~B-$7$J$1$l$P$J$i$J$$MW7o$r5-=R$7$F$$$k!#$[$+$K$b%*%W%7%g%s$O(B
d798 2
a799 2
<li><b>Phase=1 </b>$B$,I,MW$J$N$O!"(B (JISAKMPD(B $B%3!<%I$,%U%'!<%:(B (J1(B $B$H%U%'!<%:(B (J2(B $B$r=hM}$9$k$N$KF1$8%W%m%7!<%8%c$r;H$&$+$i$@@!#(B
$B$3$l$r(B (J<b>1</b>(B $B$K$7$J$$$H!"2?0l$D5!G=$7$J$/$J$k!#(B
d802 1
a802 1
$B0lIt$N%T%"$O%U%!%$%"!<%&%)!<%k$NGX8e$K$"$C$F!"(JUDP(B $B%H%i%U%#%C%/$rDL$5$J$$>l9g$,$"$k$3$H$KCm0U!#$3$l$OEvA3$J$,$i!"@@_DjA0$K3NG'$7$F$*$/I,MW$,$"$k!#(B
d804 1
a804 1
$B%U%'!<%:(B (J1(B $B$N@@\B3$N$?$a$KD0$/%$%s%?!<%U%'!<%9$,$A$,$C$F$$$k$+$b$7$l$J$$!#(B
d806 2
a807 2
$B%$%s%?!<%U%'!<%9$N(B (JIP(B $B$,$=$l$K$J$k!#(B
<li><b>Address= </b>$B$O!"F~$C$F$/$k%Q%1%C%H$N%=!<%9(JIP$B!#$3$l$O%T%"%2!<%H%&%'%$$r(B
d809 1
a809 1
$B$3$3$O$b$C$H@@bL@@$,I,MW!#%T%"$NH/?.$9$k(B (JIP(B $B%"%I%l%9$O;vA0$K$o$+$i$J$$$3$H$,$"$k$+$i!#(B
d814 5
a818 5
$B;vA0$K6&M-$7$F$"$kHkL)!#$3$N%Q%9%o!<%I$,(B (Jpolicy(B $B$KEO$5$l$F!"(B
$B$3$N%T%"$,$3$N%[%9%H$H(B (JIPsec(B $B$r;H$C$F$$$$$3$H$K$J$C$F$$$k$+$r3NG'$9$k!#$3$3$N%Q%9%o!<%I$rJQ$($?$i!"(B
policy $B%U%!%$%k$G$N5-=R$bJQ$($kI,MW$,$"$k!#(Jsample(B $B%U%!%$%k$,$3$N%Q%9%o!<%I$K1~$8$FDs6!$5$l$k$+$i$@@!#(B
$B:GDc8B$N(B (Jpolicy(B $B%U%!%$%k$G9T$/$D$b$j$J$i!"$3$3$G$O9%$-$J$b$N$r;XDj$9$l$P$$$$!#(B
<li><b>Flags=</b> $B$O$$$^$O;H$o$l$F$$$J$$!#(JRFC(B $B$G$O!"%U%'!<%:(B (J1(B $BMQ$NDI2C%*%W%7%g%s$r;XDj$9$k$?$a$NM=Hw$H$7$F(B
d825 1
a825 1
$B%[%9%H(B (JA$B$G$O(J:(B
d835 1
a835 1
$B%[%9%H(B (JB$B$G$O(J:(B
d845 2
a846 2
<p>$B$3$l$i$O!">e5-$N%U%'!<%:(J2$B$G;2>H$5$l$F$$$k%;%/%7%g%s$r$"$i$o$7$F$$$k!#$3$l$O(B
$B8DJL$N@@\B3$N$?$a$K!"Fs$D$N%2!<%H%&%'%$4V$GOC$r$9$k$N$K(B (JISAKMPD(B $B$,;H$&$Y$-(B
d849 4
a852 4
<li><b>Phase=2</b> $B$OI,?\!#(JISAKMPD(B $B%3!<%I$O!"%U%'!<%:(B (J1(B $B$H(B
$B%U%'!<%:(B (J2(B $B$NG'>Z$KF1$84X?t$r;H$&$+$i!#$3$l$,$J$$$H(B (JVPN(B $B$O5!G=$7$J$$!#(B
<li><b>ISAKMPD-Peer=</b> $B$O!">e$G$N%[%9%H$N%;%/%7%g%s$NL>A0$@@!#$D$^$j%U%'!<%:(B (J2(B $B@@\B3$r3NN)$9$k$?$a$K!"(B
$B$3$3$G;XDj$7$?%T%"$HOC$r$7$F$$$k$s$G$9$h!"$H$$$&0UL#$@@!#$3$l$,$"$k$N$O!"(B (Jisakmp(B $B%T%"$d@@\B3$r5-=R$9$k$N$K(B
d857 1
a857 1
$B5-=R$7$?!"0J2<$N(B (JIPsec-ID(B $B%;%/%7%g%s$r;X$9!#$3$NItJ,$,Aw$i$l$F!"8~$3$&B&$N%2!<%H%&%'%$$,(JVPN$B7PM3$G(B
d860 1
a860 1
$B$"$k$O$:$N$b$N$r5-=R$7$?!"2<$N(JIPsec-ID(B $B%;%/%7%g%s$r5-=R$7$F$$$k$3$NItJ,$,2r<a$5$l$F!"$3$A$i$N%W%i%$%Y!<%H%M%C%H%o!<%/$+$i(B
d862 1
a862 1
<p>$B$3$3$G%5%]!<%H$5$l$F$$$k%?%0$,$b$&0l$D$"$C$F!"$=$l$,(B (JFlags=(B $B$@@!#$3$N%?%0$,I,MW$J$i(B
d866 4
a869 4
$B$3$3$O(JIPsec-ID(B $B%;%/%7%g%s$@@!#0J2<$N%(%s%H%j$O!"%[%9%H(JA$B$H%[%9%H(JB$B$N(B
$BN>J}$G(B (Jisakmpd.conf(B $B%U%!%$%k$NCf$K$J$1$l$P$$$1$J$$!#$3$NNc$@@$H(B
$B%[%9%H(JA$B!J$3$l$O>e$N(B (JNet-A$B$K(B
$B$D$J$,$C$F$$$k!K$G$O(B (J192.168.1.0/255.255.255.0(B $B!"%[%9%H(JB$B!J$3$l$O>e$N(B (JNet-B$B$K$D$J$,$C$F$$$k!K$G$O(J192.168.20.0/255.255.255.0(B $B$@@!#(B
d882 2
a883 2
<p>$B$3$NFs$D$N%;%/%7%g%s$,3F%[%9%H$N(B (J<b>conf</b>(B $B%U%!%$%k$K4^$^$l$F$$$k!#$3$l$,(B
<b>Local-ID</b> $B$H(B (J<b>Remote-ID</b>$B$N<1JL$7$G;2>H$5$l$k%;%/%7%g%s$@@!#0l$D$N(B
d885 1
a885 1
<b>ID-type</b>= $B$O(B (J<b>IPV4_ADDR_SUBNET</b>(B $B$+(B (J<b>IPV4_ADDR</b>$B$,$H$l$k(B (J(RFC2708(B $B$K$O$[$+$K$bM-8z$JCM$,$"$,$C$F$$$k!#(JOpenBSD$B$N<BAu$G$O$$$^$N$H$3$m(JIPv4(B $B$7$+%5%]!<%H$5$l$F$$$J$$!#(JIPv6(B $B$O!"(JOpenBSD-current(B $B$G%5%]!<%H$5$l$F$$$k$+$b$7$l$J$$(J)$B!#(B
d888 1
a888 1
$B!!$3$l$GN>J}$N%[%9%H$G!"(Jsample(B $B%U%!%$%k$O$3$s$J6q9g$K$J$C$F$$$k$O$:$@@(J:(B
d896 1
a896 1
$B$3$N%;%/%7%g%s$O%U%'!<%:(B (J1(B $B@@\B3$G;H$&0E9fJ}<0$NMW7o$r5-=R$7$F$$$k!#L>A0$O(B
d898 1
a898 1
Domain of Interest (DOI) $B$r(B (JIPSEC(B $B$H$7$F5-=R$7$?!#(J<b>EXCHANGE_TYPE</b>(B $BJQ?t$O!"%U%'!<%:(B (J1(B $B$G$O(B (J<b>ID_PROT</b>(B $B$K@@_Dj$7$F$"$k!"(B
d901 1
a901 1
$B$3$l$O@@_Dj%U%!%$%k$N2<$N%;%/%7%g%s$r$5$7$F$$$F!"$=$3$G$O!"$o$l$o$l$O(J3DES$B$G0E9f2=$5$l$F$$$F(B
d903 3
a905 3
$B%5%s%W%k$N(J<b>VPN-east.conf</b>$B$K$O!"$$$m$$$mJQ49J}<0$,;3$[$I$+$$$F$"$k!#$J$<$+$H$$$&$H(B (J3DES(B $B$d(B (JSHA(B $B$O3F<o%W%i%C%H%[!<%`$GI,$:$7$b%5%]!<%H$5$l$$$k(B
$B$o$1$G$O$J$$$+$i$@@!#(JOpenBSD(B $B$N>l9g!"$3$l$r4pK\E*$J@@_Dj$GJQ$($k$Y$-M}M3$OFC$K$J$$!#$3$N%;%/%7%g%s$r%3%T!<$7$FJQ49J}<0$rJQ$($k$N$O!"(B
$B$>$s$V$s$K$d$C$F$[$7$$!#M#0l!"I,MW$K$J$k$N$O!"(B (JConfiguration=(B $BJQ?t$bJQ$($k$3$H$@@!#(B
d914 5
a918 5
<p>$B$3$N%;%/%7%g%s$O!"(JVPN$B7PM3$GAw$i$l$k%G!<%?$N0E9f$NMW7o$r5-=R$9$k$H$3$m$G!"(B
$B>e$N(B (J<i>Configuration</i>(B $B$G;2>H$5$l$k!#$3$N%;%/%7%g%s$H!"(B
$B$9$0>e$N%U%'!<%:(B (J1(B $B$G$3$3$KAjEv$9$k$H$3$m$H$N$A$,$$$O!"(B (J<b>EXCHANGE_TYPE</b>(B $B$,(B (J<b>QUICK_MODE</b>$B$K$J$C$F$$$k$3$H$J$N$KCmL\!#(B
$B%U%'!<%:(B (J2(B $B$G$OI,$:$3$&$J$k!#(B
<b>Suites=</b> $B$O(B (JIPsec(B (JSuite(B $B%;%/%7%g%s$r;X$7$F$$$k!#(B
d920 3
a922 3
ISAKMP $B$H(B (JIPsec(B $B$K$D$$$F$O!"$[$+$K$b@@bL@@$9$k$3$H$,$$$C$Q$$$"$k!#$$$^$N4pK\E*$J@@bL@@$r$b$H$K!"(B
$B<+N)$7$F$d$C$F$$$1$kC1=c$J$,$i$b7xO4$J(JVPN$B$,$G$-$k!#(B
$B$G$b$3$l$O!"N>%[%9%H$K$H$C$F(J<i>$BI,MW:GDc:G>.8B$N(J</i>(B 
d925 1
a925 1
<h3>13.8.3 - isakmpd$B$N5/F0(J</h3>(B
d933 2
a934 2
$BAv$k!#$=$7$F$9$Y$F$r%?!<%_%J%k$K=PNO$9$k!#(Jisakmpd$B$r;_$a$F(B
$B7PO)$r0lA]$9$k$K$O!"3F%N!<%I$G(Jisakmpd(B $B%W%m%;%9$r;&$7$F$+$i(B
d940 1
a940 1
<h1>13.9 - isakmpd $B$r(B (JX.509(B $B>ZL@@=q$H$$$C$7$g$K;H$&$K$O(J?</h1>(B
d943 1
a943 1
$B;vA0$K6&M-$7$?80$N$+$o$j$K>ZL@@=q$r;H$&$h$&$K(B (Jisakmpd(B $B$r@@_Dj$9$k$N$O!"J]8n$5$l$F$$$J$$%T%"$,$?$/$5$s$"$k5pBg%M%C%H%o!<%/$N>l9g$K$O!"(B
d948 1
a948 1
<h2>$B>ZL@@=q$N@@8@@.(J</h2>(B
d950 1
a950 1
$B80$d>ZL@@=q$N@@8@@.$N;EJ}$K$D$$$F$N$h$$5-=R$,!"(Jisakmpd(B
d954 2
a955 2
CA $B80!"BP1~$9$k(B (JCA(B (JX.509(B
$B>ZL@@=q!"%M%C%H%o!<%/>e$N(B (Jisakmpd(B $B$r;H$&%3%s%T%e!<%?$=$l$>$l$KHkL)800l$D$H!"$=$NHkL)80$N$=$l$>$l$KBP$7$F(B (JX.509(B
d958 2
a959 2
X.509 $B>ZL@@=q$O!">ZL@@=q$N;}$A<g$r5-=R$9$k(B (JSubject(B (JAlternative(B (JName(B
(SubjectAltName) extension $B$,I,MW$@@!#>ZL@@=q$N(B (JSubjectAltName(B (Jextension(B $B$r(B
d961 2
a962 2
SubjectAltName$B$H$7$F(JIP$B%"%I%l%9$r@@_Dj$9$k>l9g$N@@bL@@$,(B (JREADME.PKI(B $B$K=q$$$F$"$k!#(B
$B$3$3$G(B (JIP(B $B%"%I%l%9$r;H$&$N$O!"(Jisakmpd(B $B$N(B
d965 8
a972 8
Certpatch $B$O$^$?!"(B (JFQDN(B (J(Fully(B (JQualified(B (JDomain(B
Name) $B$+(B (JUFQDN(B (J(User(B (JFQDN)(B $B$N;HMQ$b%5%]!<%H$7$F$$$k!#(JFQDN(B $B$NNc$O$?$H$($P(B
<tt>www.openbsd.org</tt> $B$@@$7!"(JUFQDN(B $B$NNc$H$7$F$O(B
$B%a!<%k%"%I%l%9$,$"$k!#$?$H$($P(B (J<tt>Jorgen.Granstam@@abc.se</tt>(B $B$J$I!#(B
<p>
$B$3$N(B (Jhowto(B $BJ8=q$G$O!"(B (JFQDN(B $B$r(B
SubjectAltNames $B$G;H$&!#(JIP(B $B%"%I%l%9$r;H$&$[$&$,$A$g$C$H4JC1$K$J$k!#(B
$B$=$l$,(B (Jisakmpd(B $B$N%G%U%)%k%H$N$U$k$^$$$@@$+$i$@@!#(B
d981 4
a984 4
$B$3$3$G(B (Jca.key(B $B$O(B (JCA(B $B$NHkL)80$J$N$G!"$3$l$,(B
$B$G$-$k$N$O(B (JCA(B $BHkL)80$K%"%/%;%9$G$-$k?M$@@$1$@@!#(B
home.mysite.se $B$H$$$&$N$O!J<B:_$O$7$J$$$1$l$I!K>ZL@@=q$KA^F~$5$l$k$Y$-(B (JFQDN(B $B$@@!#(B
originalcert.crt $B$H(B (Jnewcert.crt(B $B$N%U%!%$%kL>$OF1$8L>A0$K$7$F$b$$$$!#(B
d988 2
a989 2
$B$3$N80$H>ZL@@=q$r!"(JREADME.PKI(B $B$N:G8e$K@@bL@@$K$7$?$,$C$F%G%#%l%/%H%j$K(B
$BJ|$j9~$b$&!#$b$7K\5$$G80$r;H$&$D$b$j$J$i!"(JCA(B $B80(B (J(ca.key)(B $B$O(B
d993 1
a993 1
<h2>isakmpd$B$N@@_Dj(J</h2>(B
d995 1
a995 1
$B$3$s$I$O(B (J/etc/isakmpd/isakmpd.conf(B $B@@_Dj%U%!%$%k$r8+$F$d$m$&!#(B
d999 1
a999 1
$B$5$i$K(B (Jman(B $B%Z!<%8$K$"$k$b$N$h$j$b$+$J$jC;$$%U%!%$%k$r;H$&!#(B
d1002 1
a1002 1
 ($B0lIt$N%3%a%s%H$O(B (Jisakmpd.conf(5)$B$K$"$C$?$^$^(J)$B!"L>A0$b$A$g$C$HJQ$($?!#(B
d1008 1
a1008 1
$B$\$/$,@@bL@@$7$J$$ItJ,$K$D$$$F$O(B (Jisakmpd.conf(5)(B $B$r(B
d1026 5
a1030 5
$BMW$9$k$K!"Fs$D$N%M%C%H%o!<%/$,!"J]8n$5$l$F$$$J$$%M%C%H%o!<%/>e$r!"(JIPsec$B%H%s%M%k7PM3$G(B
$B@@\B3$5$l$k!"$H$$$&$3$H!#$3$3$G%W%i%$%Y!<%H%$%s%?!<%M%C%HMQ$KM=Ls$5$l$?(JIP(B
$B%"%I%l%9(B (J(RFC1918)(B $B$r;H$C$F$$$k$3$H$OL5;k$7$F$[$7$$!#(B
$B$J$K$+$7$iNc$OI,MW$@@$C$?$b$s$G!#(Jisakmpd(B $B$r(B (JNAT(B
$B$HAH$_9g$o$;$F;H$&$H$+$=$N<j$N$r$I$&$9$k$+$O@@bL@@$7$J$$(J($B$\$/<+?H$d$C$?$3$H$,$J$$$+$i!K!#(B
d1033 1
a1033 1
$B%;%-%e%j%F%#%2!<%H%&%'%$(B (Jgw.mysite.se$BMQ$N%U%!%$%k$@@(J:(B
d1038 1
a1038 1
# *************  gw.mysite.se isakmpd.conf  $B$N$O$8$^$j(B       (J************(B
d1111 1
a1111 1
# $B%Q%1%C%H$G(J...(B 
d1227 1
a1227 1
$B%;%-%e%j%F%#%2!<%H%&%'%$(Jgw.worksite.se$B$N(B (Jisakmpd.conf(B $B%U%!%$%k$NF,$N$H$3$m$@@$18+$F$d$m$&(J:(B
d1232 1
a1232 1
# *************      gw.worksite.se isakmpd.conf $B$N$O$8$^$j(B    (J**********(B
d1267 1
a1267 1
# **********************     ... $B$D$E$/(J...(B      (J**********************(B
d1277 1
a1277 1
<h2>policy $B%U%!%$%k(J</h2>(B
d1279 2
a1280 2
$B<B$r$$$($P!"(Jpolicy(B $B%U%!%$%k$O=i$a$F$N?M$K$O$A$g$C$H$d$d$3$7$$$+$b$7$l$J$$!#(B
$BFC$K;W$$DL$j$KF0$+$J$$$H$-$K$O!#(Jman-$B%Z!<%8(B
d1285 2
a1286 2
$B0lHV4JC1$J!"$A$c$s$H5!G=$9$k(B (Jpolicy(B $B%U%!%$%k$O(B
$B$?$C$?0l9T$@@(J:(B
d1296 4
a1299 4
authorizer $B%?%0$O!"(Jpolicy(B $B$r7h$a$k8"8B$r;}$C$??MJ*!"(B
$B$H$$$&$3$H$@@!#FCJL(B (Jauthorizer(B $B$G$"$k(J&quot;POLICY&quot;(B $B$O!"(B
policy $B$K$D$$$F:G=*E*$+$DL58B$N8"8B$r;}$D!#$=$l0J30$N(B (Jauthorizer(B $B$O!"(B
$B$3$3$G8"8B$r;}$D$?$a$K$O$^$:(B (J&quot;POLICY&quot;(B $B$KG'Dj$7$F$b$i$o$J$1$l$P$J$i$J$$!#(B
d1302 1
a1302 1
$B0J2<$N(B (Jpolicy(B $B$O$@@$+$i!"K\J*$N0E9f$r2?$+;H$C$F(B (JESP(B
d1304 4
a1307 4
$B$3$l$@@$H(B (JDES(B $B$r;H$C$F$$$k?M$bG'$a$i$l$F!"(JDES(B $B$O(B
$B$$$^$d$[$H$s$I%$%s%A%-$H;W$C$F$b$$$$$/$i$$$@@$1$l$I!"$G$b(B (JDES(B $B$rG'$a$J$$$h$&$K(B
$B$3$N(B (Jpolicy(B $B$rJQ99$9$k$N$O!"FI<T$NN}=,LdBj$H$7$F;D$7$F$*$3$&$+!K!#(B
$B$3$l$@@$H(JESP(B $B$G0E9f2=$9$k?M$J$i$@@$l$G$bG'$a$i$l$k$3$H$KCm0U!#(B
d1335 1
a1335 1
$B@@\B3$rG'$a$k!J$?$@@$7$3$N%Q%9%o!<%I$O(B (Jisalmpd.conf(B $B$N(B (JAuthentication(B $B%?%0$G$b(B
d1339 1
a1339 1
$B%i%$%;%s%9$r<u$1$kB8:_$O$?$/$5$s$"$C$F$b$$$$$1$l$I!"$=$N$9$Y$F$,(B (J&quot;POLICY&quot;$B$KG'Dj$5$l$J$/$F$O$J$i$J$$!#(B
d1341 2
a1342 2
$B%i%$%;%s%9J];}<T$O!"(Jpolicy$B%U%!%$%k$G$5$i$K5-=R$5$l$F$$$?$i(B
$BC1$J$k%9%H%j%s%0$G$b$$$$(J:(B
d1360 1
a1360 1
$B$5$"$_$J$5$s$*BT$A$+$M$NItJ,!#(JPolicy(B $B$O$^$?!"(B
d1364 1
a1364 1
policy $B%U%!%$%k$K8DJL%f!<%6$N>ZL@@=q$r2C$($k$@@$1$G$$$$(J:(B
d1374 1
a1374 1
        CzA           $B$3$NItJ,$O%f!<%6>ZL@@=q$G$4$6$$$^$9$J(B           (JAQEB\(B
d1389 1
a1389 1
isakmpd $B$,(B (JCA-(B $B%G%#%l%/%H%j$H(B (JCertificate(B
d1391 2
a1392 2
$B5?;w;q3J>ZL@@!J(Jcredentials$B!K$KJQ49$5$l$k!#$3$&$7$?5?;w;q3J>ZL@@$KJQ49$5$l$?>ZL@@=q$O!"(B
$B$3$s$J46$8$K$J$C$F$$$k(J:(B
d1399 2
a1400 2
    	CzA  $B$3$NItJ,$O%f!<%6>ZL@@=q!J$D$^$j(JCA$B>ZL@@=q!K$K=pL>$7$?(B     (JAQEB\(B
        BQA             $B!!?M$N8x3+80!?>ZL@@=q$G$9$J(B                  (JIUuz\(B
d1410 2
a1411 2
        CzA          $B$3$3$s$H$3$O>ZL@@=q$r<u$1$kB&$N80$K!!(B           (JAQEB\(B
        BQA                          $B$J$j$^$9(B                       (JIUuz\(B
d1422 3
a1424 3
$B$5$F!"$3$l$i$,(B (J&quot;POLICY&quot;(B $B$KG'$a$i$l$?$b$N$G$O$J$$$N$G!"(B
$B$=$l$r$J$s$i$+$N7A$GG'CN$9$k(B (Jpolicy(B $B$,$J$1$l$P%@@%a$@@$H$$$&$3$H$KCm0U!#$5$i$K!"$3$l$O(B
$BFbIt$G>ZL@@=q$,$I$&$J$C$F$$$k$+$r@@bL@@$7$F$$$k!#>e$N;q3J>ZL@@!J(Jcredential$B!K$O!"(B
d1427 2
a1428 2
CA$B>ZL@@=q$r%i%$%;%s%9$H$7$F(B (J&quot;POLICY&quot;$B$K=q$$$F$d$l$P!"(B
$B$"$k(B (JCA(B $B$,=pL>$7$?>ZL@@=q$9$Y$F$K%i%$%;%s%9$,=P$;$k!#(B
d1438 1
a1438 1
        CzA             $B$3$NItJ,$,(B (JCA(B $B>ZL@@=q$G$4$6$$$^$9$J(B          (JAQEB\(B
d1452 2
a1453 2
$B$D$^$j>e$N(B (Jpolicy(B $B$O!"(JCA(B $B$K8"8B0Q>y$9$k(B (Jpolicy(B $B$N4JC1$JNc$@@!#(B
$B$3$N>ZL@@=q$r;}$C$?(B (JCA(B $B$,=pL>$7$?>ZL@@=q$r;}$C$F$$$F(B
d1458 1
a1458 1
<h2>$B$[$H$s$I0BA4!D!D$O0BA4$KHs$:(J!</h2>(B
d1466 4
a1469 4
$B$3$NCJ3,$G!"(Jisakmpds(B $B$,$I$s$J>pJs$K%"%/%;%9$G$-$k$+9M$($F$[$7$$!#(B
$B@@_Dj%U%!%$%k$+$i!"(Jisakmpd(B $B$O%T%"$,$I$N(B (JIP-$B%"%I%l%9$+$i(B
$BAw?.$7$F$/$k$+$o$+$k!J(J[$B%U%'!<%:(B (J1](B $B%;%/%7%g%s$G(J)$B!#%U%'!<%:(B (J1(B $B$N(B
$B%M%4%7%(!<%7%g%s$r$9$k$H$-$KF@@$i$l$k>pJs$+$i!"%T%"$,$I$s$J(B (JID(B $B$r(B
d1471 1
a1471 1
$B$=$N(JID$B$r;}$C$F$$$k$3$H$,>ZL@@$5$l$k!#LdBj$J$5$=$&$@@$M(J?(B
d1473 3
a1475 3
$B$&$s!"$b$7(JID(B $B>pJs$,(B (JIP(B $B$J$i!J%U%'!<%:(B (J1(B $B$N(B (JID(B $B%;%/%7%g%s$r;H$o$J$1$l$P(B
$B$3$l$,%G%U%)%k%H$K>u67$K$J$k!K$9$Y$F$O%*%C%1!<$@@!#(JCA(B
$B$O$=$N(B (JIP(B $B$r(B (Jcert(B $B$K7k$S$D$1$F!"@@_Dj$NCf$N(B (JIP(B
d1477 3
a1479 3
$BF1$8(B (JIP(B $B$r;H$&$3$H$bIT2DG=$G$O$J$$(B
$B!J$?$H$($PN>J}$N%3%s%T%e!<%?$,F1$8(B (JLAN(B $B>e$K$"$C$F!"(B
$B$U$@@$s$=$N(B (JIP(B $B$r;H$C$F$$$k%^%7%s$,$J$s$i$+$NM}M3$G%@@%&%s$7$F$$$k$J$I!K!#(B
d1481 1
a1481 1
$B$=$N(B (JIP(B $B$,$J$j$9$^$7HH$N$b$N$@@$H!JIT@@5$K!K>ZL@@$9$k$3$H$O(B
d1484 2
a1485 2
$B$b$7$=$l$,K|$,0l5/$3$C$?$i!"$=$N$J$j$9$^$7HH$O$=$N(JIP$B$N=jM-<T$+$iHkL)80$r(B
$B$I$&$K$+$7$FEp$s$@@$+!"$"$k$$$O(B (JCA(B $B$r$J$s$i$+$NJ}K!$G$@@$^$7$F!"(B
d1488 3
a1490 3
$BHkL)80$NJ]8n$,IT==J,$@@$C$?$+!"(JCA(B $B$,(B
$B$J$j$9$^$7HH$N?H85!J$"$k$$$O(B (Jcert(B $B$N(B
ID $B>pJs!K$r==J,$K%A%'%C%/$G$-$J$+$C$?$+!"$"$k$$$O(B (JCA(B $BHkL)80$,==J,$KJ]8n$5$l$F$$$J$+$C$?$+$@@!#(B
d1496 6
a1501 6
$B>ZL@@=q$NCf$K!"(JIP$B%"%I%l%9$G$O$J$/(B (JFQDN(B $B$,F~$C$F$$$k!#(B
[Phase 1] $B%;%/%7%g%s$K$^$@@(B (JIP(B $B%"%I%l%9$,$"$k$N$G!"(B
$B$3$l$O%;%-%e%j%F%#LdBj$H$J$k2DG=@@-$,$"$k!#(JISAKMP(B
$B%U%'!<%:(B (J1(B $B%M%4%7%(!<%7%g%s$N4V$K2?$,5/$-$k$+$H$$$&$H!"%T%"$,(B
$B4|BT$I$*$j$N(B (JIP(B $B$+$iAw$i$l$F$-$?$3$H$r%A%'%C%/$G$-$k!J$G$b$5$C$-@@bL@@$7$?$h$&$K!"(B
$B$3$l$O0lIt$N>u67$G$O$4$^$+$;$k!K!#%T%"$,Ds<($9$k(JID$B$r!"(B
d1503 2
a1504 2
$B$G$b!"$$$^%A%'%C%/$G$-$J$$$N$O!"$=$N(JID(B $B$,K\Ev$K$=$N%T%"$,;}$C$F$$$k$H4|BT$9$Y$-(B (JID(B $B$J$N$+!"$H$$$&$3$H$@@!#(B
isakmpd $B$O!"$I$s$J(B (JID(B $B$r4|BT$9$l$P$$$$$+0lEY$b65$o$C$F$$$J$$$+$i$@@!#(B
d1506 2
a1507 2
DNS $B%7%9%F%`$,%[%9%H$N$?$a$K(B (JIP(B $B$r(B (JFQDN(B $B$H(B
$B7k$S$D$1$F$/$l$k!"$H$$$&?M$b$$$k$@@$m$&!#$=$l$O$=$&$J$s$@@$1$l$I!"8=:_$N(B (JDNS(B $B%7%9%F%`$O%;%-%e%j%F%#$,9b$/$J$$$7!"(B
d1509 7
a1515 7
$B$G$-$k!J$"$k$$$O%5!<%S%95qH]!J(JDoS$B!K967b$r(B
$B967b<T$K<u$1$F!"$=$N967b<T$N%^%7%s$,(JDNS$B%5!<%P$NEz$r(B
$B56B$$9$k$3$H$b$G$-$k!K!#$$$:$l9b%;%-%e%j%F%#(B (JDNS(B $B$bEP>l$9$k$1$l$I!"(B
$B$^$@@=P2s$C$F$$$J$$$7!J>/$J$/$H$b$[$H$s$I$N(B (JDNS(B $B%5!<%P$O$^$@@9b%;%-%e%j%F%#$G$O$J$$!K!"(B
$B$@@$+$i8=:_!"(Jcert(B $B$N(B (JFQDN(B $B$,4|BT$5$l$k(B (JIP(B $B$HBP1~$7$F$$$k$+$rD4$Y$k$N$K(B
DNS $B$r;H$C$F$bJ]>Z$K$O$J$i$J$$!#<B$O(B (Jisakmpd(B $B$O$3$l$r(B (JDNS(B $B$K$-$$$?$j$7$J$$!#(B
DNS $B$,0BA4$G$b!"(JUFQDN$B$r;H$C$F$$$k>l9g$K$O(B
d1518 1
a1518 1
$B$D$^$j(B (JID(B $B$H$7$F(B (JFQDN(B $B$r;H$&>l9g!"%"%?%C%+!<$O(B
d1520 2
a1521 2
$BF1$8(B (JCA(B $B$K=pL>$5$;$k!J$G$b$b$A$m$s%"%?%C%+!<<+?H$N(B (JFQDN(B $B$r;H$C$F(J)$B!#$=$l$+$i(B
$B%T%"$K(B (JDoS(B $B967b$r$7$+$1$F%@@%&%s$5$;$k(B (J($B<B$O(B
d1523 2
a1524 2
$B%j%b!<%H(JDoS(B $B$r;E3]$1$F%@@%&%s$5$;$F$7$^$($k2DG=@@-$,$"$k$1$l$I!"(B
isakmpd $B$,$3$&$$$&967b$KBP$7$F$I$N$/$i$$IR46$+$OCN$i$J$$(J)$B!#$=$l$+$i(B
d1527 1
a1527 1
$B<+J,$N(JID$B$HHkL)80$H>ZL@@=q$r;H$($k!#(B
d1529 7
a1535 7
$B$\$/$?$AB&$N(B (Jisakmpd(B $B$O!"$3$C$A$N%T%"$X$N(B (JID(B $B$,2?$+$r65$o$C$F$$$J$$!J$=$7$F$=$l$O!"%"%?%C%+!<$,(B
$B>ZL@@=q$H(JID$B$HHkL)800J30$O$^$C$?$/F1$8@@_Dj$K$7$F$*$$$?$+$i!K!#$5$i$K$\$/$?$A$N(B
isakmpd $B$O>ZL@@=q$,F1$8(B (JCA(B $B$N%5%$%s$7$?$b$N$@@$H%A%'%C%/$G$-$k!J$G$b(B
$BB?$/$N(B (JCA(B $B$O(Jcert(B $B$r$$$C$Q$$%5%$%s$9$k$+$i!"(Jcert(B $B$r<j$KF~$l$k$N$O$`$:$+$7$/$J$$$+$b!K!#$=$7$F(B
$B$=$3$G<($5$l$?(B (JID(B $B$,>ZL@@=q$NCf$N(B (JID(B $B$H$$$C$7$g$J$N$b3NG'$G$-$k!#$G$b!"(B
$B$3$l$^$GDs<($5$l$?@@_Dj$G$O!"$=$N(B (JID(B $B$,4|(B
$BBT$7$F$$$?(B (JID(B $B$+$I$&$+$O%A%'%C%/$G$-$J$$!#$@@$+$i%"%?%C%+!<$O@@\B3$rG'$a$i$l$F$7$^$&!#(B
d1538 1
a1538 1
<h3>$B967b$r$U$;$0(J</h3>(B
d1540 1
a1540 1
$B$9$k$HLdBj$O!"$I$&$d$C$?$i(B (Jisakmpd(B $B$K4|BT$9$Y$-(B (JID(B $B$N$3$H$r65$($F$"$2$i$l$k$+!"(B
d1544 1
a1544 1
$B$?$H$($P$3$s$J$U$&$K(J:(B
d1554 1
a1554 1
        CzA             $B$3$NItJ,$,(B (JCA(B $B>ZL@@=q$G$4$6$$$^$9$J(B          (JAQEB\(B
d1569 3
a1571 3
$B$3$l$G!"(JIPsec$B@@\B3$rF@@$i$l$k$N$O(B (Jgw.worksite.se(B $B$@@$1$N$O$:!#$[(B
$B$+$K(B (Jremote_id$B$N%A%'%C%/$rB-$;$P!"5v2D$5$l$k(JID$B$O4JC1$KA}$($k!#(B
$B$D$^$j0J2<$N$h$&$J$N$r(B (Jpolicy(B $B$KB-$;$P$$$$(J:(B
d1583 1
a1583 1
$B$3$N(B (Jpolicy(B $B$@@$H!"(Jgw.worksite.se,(B (Jgw.somesite.se$B!"(B
d1588 1
a1588 1
$B$H$$$&?M$b$$$k$@@$m$&!#>ZL@@=q$r(B (Jpolicy(B $B$K(B
d1591 1
a1591 1
$B$d$d$3$7$$(B (Jpolicy(B $B$N$J$+$G!"(JCA(B $B>ZL@@=q$H$^$A$,$($F(B
d1594 2
a1595 2
policy $B%U%!%$%k$r8+$F$b$=$l$r$D$-$H$a$k$N$O$`$:$+$7$$(B (J(X.509(B $B>ZL@@=q$O(B
$B?M4V$KFI$a$k7A$G$O$J$$$+$i(J)$B!#(B
d1599 5
a1603 5
$B$3$NLdBj$N2r7hJ}K!$,$"$k!#$$$^$G$O!"(Jpolicy(B $BFb$G>ZL@@=q$=$N$b$N$N$+$o$j$K!"(B
$B>ZL@@=q$N(JDistinguished(B (JName(B (J(DN)(B $B$r;H$&$3$H$,$G$-$k!JBP1~$9$k(B
$B>ZL@@=q$O$b$A$m$s%G%#%9%/>e$N(B (Jcerts(B
$B$+(B (Jca(B $B%G%#%l%/%H%j$K$"$C$F!"(Jisakmpd(B $B$,8+$D$1$i$l$k$h$&$K$J$C$F$$$k$3$H(J)$B!#$3$N(B
$B7A<0$@@$H!">e$N(B (Jpolicy(B $B$O0J2<$N$h$&$J46$8$K$J$k$@@$m$&(J:(B
d1621 3
a1623 3
$B$:$C$HFI$_$d$9$$!"$G$7$g!)!!$"$k>ZL@@=q$N@@53N$J(B (JDN(B
$B$O!"(Jopenssl(B $B%f!<%F%#%j%F%#$r;H$C$F>ZL@@=q$r8+$F$d$k$H$o$+$k!#(B
$B$3$s$J6q9g(J:(B
d1629 1
a1629 1
$B$b$C$HJ#;($J(B (Jpolicy(B $B$O$b$A$m$s$G$-$k$1$l$I!"(B
d1633 2
a1634 2
$B$3$l$G(B (Jca.crt(B $B$NCf$N>ZL@@=q$K$D$$$FI,MW$J>pJs$,(B
$BDs6!$5$l$k$O$:$@@!#(Jpolicy(B $B$,>.$5$$$+!"$=$3$=$3$/$i$$$J$i(B
d1638 1
a1638 1
<H2>$B%^%k%A%f!<%6@@_Dj$H!"Cf1{4IM}7?G'>Z(J</h2>(B
d1640 3
a1642 3
$B$=$l$8$c(B (Jisakmpd(B $B$N%[%s%H$K%/!<%k$J5!G=$r$$$/$D$+8+$F$d$m$&!#$3$l$^$G$O!"(B
$B@@\B3$7$F$/$k$O$:$N%T%"$O$h$/CN$i$l$F$$$F!"(JIP$B%"%I%l%9$b@@EE*$K8GDj$5$l$F$$$k$b$N$H$7$?!#(B
$B$G$b!"$=$&$$$&>l9g$P$+$j$8$c$J$$!#F0E*$K3d$jEv$F$i$l$?(JIP$B$r;H$C$?$j!"(B
d1647 3
a1649 3
$B$=$3$G(Jisakmpd$B$N$9$F$-$J5!G=$N0l$D$O!"(B
[Phase 1]$B%;%/%7%g%s$G(JIP$B$G$O$J$/%G%U%)%k%H$N%?%0$r;H$($k$H$$$&$b$N!#(B
$B$3$l$K$h$C$F!"(Jisakmpd$B$O$I$N(JIP$B$+$i$G$b%M%4%7%(!<%7%g%s$r<u$1IU$1$i$l$k$h$&$K$J$k!#(B
d1659 1
a1659 1
$B$^$:8@@$C$F$*$/$Y$-$J$N$O!"$3$N@@_Dj$O(JDoS$B967b$KBP$7$F(B
d1661 1
a1661 1
ISAKMP/IKE$B%W%m%H%3%k$K$O7g4Y$,$"$k!#$$$:$l$K$7$F$b!"%G%U%)%k%H$N(B (J[phase(B (J1](B $B%;%/%7%g%s$r;H$($P!"(B
d1668 1
a1668 1
$B$I$N%3%s%T%e!<%?$+$i$G$b!J<RFb(JLAN$B>e$N$b$N$K8B$i$:!K@@\B3$G$-$k$h$&$K$7$?$$$1$l$I!"(B
d1670 1
a1670 1
$B<!$N$h$&$J(Jpolicy(B $B$,=q$1$k$O$:$@@!'(B
d1712 2
a1713 2
$B$<$s$<$sF0$+$J$$$+$b$7$l$J$$!K!#$=$l$H!"$3$$$D$_$?$$$J(Jpolicy(B $B!J$H$$$&$+!"(B
$B%G%U%)%k%H$,%T%"$N(JIP$B$K$7$F$"$k$b$N$9$Y$F!K$O!"(Jisakmpd.conf$B%U%!%$%k$b$"$o$;$F=q$-49$($J$$$H(B
d1716 2
a1717 2
$B$?$V$s@@\B3$7$??M$N(B (JDN(B $B$O$9$Y$F%m%0$7$F$*$$$?$[$&$,(B
$BK>$^$7$$!#(Jisakmpd(B $B$O$\$/$NCN$k8B$j$G$O!"$3$l$r$^$@@%5%]!<%H$7$F$$$J$$!#$5$i$K(B
d1724 3
a1726 3
$B$b$7$3$&$$$&7A$G(JISAKMP/IKE(B $B$r;H$C$F$$$k%3%s%T%e!<%?$,$9$Y$F!"(B
$B%j%b!<%H$+$i%f!<%6$,;H$$$?$$$H;W$C$F$$$k%5!<%S%9$N$=$l$>$l$K$D$$$F!">r7o$NB+$r;}$C$F$$$?$H$7$h$&!#$9$k$H(B (JCA(B $B$O!"(B
$B%f!<%6$N>ZL@@=q$K$7$+$k$Y$-(B (JSubjectAltName(B
d1733 2
a1734 2
$B$9$Y$F$N%3%s%T%e!<%?>e$N(Jpolicy$B%U%!%$%k$rJQ$($kI,MW$b$J$$!#(B
$BF1$8J}<0$O(JISAKMP/IPsec(B $B0J30$NL\E*$K$b;H$($k$O$:$@@!J%*%U%i%$%s%7%9%F%`$NG'>Z$5$($G$-$k!*!K!#(B
d1736 1
a1736 1
$B$H$K$+$/!#$3$l$r$d$kAH?%$O$*$=$i$/<+J,$G<+J,<+?H$N(JCA$B$K$J$C$?$[$&$,$$$$!#(B
d1741 1
a1741 1
$B;vA06&M-80$G$b$G$-$&$1$l$I!"$G$b$=$l$@@$H!"$I$N(JIP$B$+$i@@\B3$7$F$/$k$+$o$+$i$J$$$+$i!"(B
d1743 2
a1744 2
$B$@@$+$i(JID_PROT$B%b!<%I$G$O$J$/(JAGGRESSIVE(B $B%b!<%I$r(B
$B;H$o$J$/$F$O$J$i$J$$(J(AGGRESSIVE(B $B%b!<%I$G$O!"(JID$B$O%M%4%7%(!<%7%g%s$N(B
d1752 1
a1752 1
<h1>13.10 - isakmpd$B$G;H$($k(JIKE(B $B%/%i%$%"%s%H$O(J?</h1>(B
d1755 2
a1756 2
<tt>isakmpd</tt> $B$O!"(JOpenBSD(B $B$K$D$$$F$/$k(B (JISAKMP/Oakley(B $B804IM}%G!<%b%s$@@!#(B
$B$?$V$s!"$[$H$s$I$N(B (JISAKMP(B $B<BAu$H$O!"ItJ,E*$K$;$hAj8_1?MQ2DG=$@@$H;W$&$1$l$I!"(B
d1758 1
a1758 1
isakmp $B%=%U%H$N0lIt$O!"<B$O(B (JOpenBSD(B (Jisakmp(B $B%G!<%b%s$r%Y!<%9$K$7$?$b$N$@@$C$?$j$9$k!#(B
d1760 1
a1760 1
$B0J2<$N(B (JMS-Windows(B $B%/%i%$%"%s%H$O!"8_49@@-$,$"$k$H$NJs9p$,$"$k(J:(B
d1766 1
a1766 1
<LI><a href="http://www.microsoft.com">Microsoft</a> Windows 2000 (Transport $B%b!<%I$N$_(J)(B
d1769 1
a1769 1
$B0J2<$N%2!<%H%&%'%$(J/$B%k!<%?$b8_49@@-$,$"$k$H$NJs9p(J:(B
d1793 1
a1793 1
IPsec $B%H%i%V%k%7%e!<%F%#%s%0$N:G=i$N%D!<%k$O(B (J<a(B (Jhref="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&apropos=0&sektion=8&format=html">tcpdump(8)</a>$B$@@!#(B
d1796 6
a1801 6
$B$^$:(JOpenBSD$B$N(B (Jtcpdump(B $B$r;H$C$F$$$k?M$O!"(B
$B3HD%HG$N(B (Jtcpdump(B $B$r;H$C$F$$$k$N$G!"(B
ESP $B$H(B (JAH(B $B%Q%1%C%H$K$D$$$F$b>pJs$,$H$l$k!#$b$7(B (JOpenBSD(B
2.5 $B$dB>$N(B (JOS(B $B$N(B (Jtcpdump(B $B$r;H$C$F$$$k$J$i!"$?$V$s8E$$(B
$B%P!<%8%g%s$@@$+$i(B (JAH(B $B$d(B (JESP$B$K$D$$$F$O%W%m%H%3%kHV9f$7$+I=<($5$l$J$$(B
(ESP $B$O(B (JIP(B $B%W%m%H%3%k(B (J50,(B (JAH(B $B$O(B (J51)$B!#(B
d1805 1
a1805 1
tcpdump $B$G$O!"%H%i%U%#%C%/$,(B (JAH/ESP(B $B$r;H$C$F$$$k$+J?J8$N$^$^$+$r3N$+$a$h$&!#(B
d1807 1
a1807 1
isakmp $B$N%M%4%7%(!<%7%g%s$,$&$^$/$$$C$F$$$J$$!#(J<a(B (Jhref="http://www.openbsd.org/cgi-bin/man.cgi?query=ping&apropos=0&sektion=8&format=html">ping(8)</a>$B$r;H$C$F(B
d1811 2
a1812 2
$B$?$H$($P!"(J208.1.1.1(B $B$H(B (J208.2.2.2(B $B$N#2$D$N%[%9%H$,$"$k!#(B
208.2.2.2 $B$K%m%0%*%s$7$F!"0J2<$r$d$C$F$_$h$&(J:(B
d1823 1
a1823 1
$BJL$N%;%C%7%g%s$G$O!"(Jencapsulated(B $B$5$l$?(Jping$B$,8+$i$l$k(J:(B
d1838 1
a1838 1
<LI>ISAKMP $B$O(JUDP(B (Jport(B (J500$B$G<B9T$5$l$k!#$b$7$3$l$,%U%!%$%"!<%&%)!<%k$+(B
d1850 1
a1850 1
<LI>Photuris $B$O(B (JUDP(B (Jport(B (J468(B $B$GF0$/!#9M$($k$N$OF1$8$3$H$@@$1$l$I!"%W%m%H%3%k$O(B (Jah$B$@@!#(B
d1873 1
a1873 1
<LI>IPsec$B$G=hM}$5$l$?%H%i%U%#%C%/$r!"(JnetB$B$+$i<+J,$N%m!<%+%k$N%U%!%$%"!<%&%)!<%kJ]8n$D$-(JnetA$B$K(B
d1880 2
a1881 2
<LI>OpenBSD $B$N(B (Jtcpdump(B $B$@@$H!"$[$H$s$I$N%$%s%?!<%M%C%H(B
$B808r49!J<+F0808r49!K%;%C%7%g%s$NJ?J8ItJ,$O$[$H$s$I%G%3!<%I$G$-$k!#(JTcpdump(B $B$O$^$?(B (JAH(B $B%Z%$%m!<%I%G!<%?$bI=<($9$k!#(B
d1889 2
a1890 2
/kern $B$K$O!"8=:_$N(B (JSA/SPI(B $B0lMwI=$,$"$C$F!"%U%m!<$,$"$k$b$N(B
$B!J309T$-$N(B (JSA$B!K$b$J$$$b$N!JF~$C$F$/$k(B (JSA)$B$b5-=R$5$l$F$$$k!#(B
d1894 1
a1894 1
<LI>$B:G8e$K!"(B (J<a(B (Jhref="http://www.openbsd.org/cgi-bin/man.cgi?query=netstat&apropos=0&sektion=1&format=html">netstat(1)</a>(B $B$r;H$C$F(B (JSA$B$r8+$k$3$H$,$G$-$k!#(B
d1912 3
a1914 3
$B$3$l$@@$1$d$C$F$b%@@%a$J$i!"(J<tt>option(B (JENCDEBUG</tt>$B$D$-$G%+!<%M%k$r%3%s%Q%$%k$7$J$*$9$3$H!#(B
$B$=$l$+$i(B (J<tt>net.inet.ip.encdebug</tt>(B $B$r(B (J1(B $B$K$9$k!#$=$7$F(B (Jdmesg(B $B$r8+$F(B
$B7Y9p$d%(%i!<$r$5$,$7!"$=$l$r(B (J<a(B (Jhref="http://www.openbsd.org/cgi-bin/man.cgi?query=sendbug&apropos=0&sektion=1&format=html">sendbug(1)</a>$B$r;H$C$F(B
d1916 1
a1916 1
$B%P%0$+$I$&$+$o$+$i$J$+$C$?$i!"(B (Jyou(B (Jmay(B (Jwant(B (Jto(B (Jsend(B (Ja(B (Jmessage(B (Jto(B (Jone(B (Jof(B (Jthe(B (J<A(B (JHREF="../../mail.html">$B%a!<%j%s%0%j%9%H(J</a>$B$N$I$l$+$K%a%C%;!<%8$rEj$2$F$_$h$&!#(B
d1922 1
a1922 1
<h1>13.12 - $B4XO"%I%-%e%a%s%F!<%7%g%s(J</h1>(B
d1927 1
a1927 1
$B%Z!<%8$@@!#3F<o$N@@_Dj%F%s%W%l!<%H$,(B (J<A(B (JHREF="http://www.openbsd.org/cgi-bin/cvsweb/src/share/ipsec/">/usr/share/ipsec/</a>(B
d1937 1
a1937 1
$B$N(Jman$B%Z!<%8$b>\$7$/$F!"(JIPsec$B$N@@_Dj$H1?MQ$KLrN)$D$O$:$@@!#(B
d1950 1
a1950 1
$B$=$7$F$D$E$-$^$7$F$O(B (JRFC$B$I$b(J...</a>(B
d1984 3
a1986 3
<a href= "index.html">[FAQ $B%H%C%W$X(J]</a>(B
<a href= "faq12.html">[12.0 - $B9bEY$J%f!<%68~$1(J]</a>(B
<a href= "../faq14.html">[14.0 - OpenBSD $B$N%O!<%I%G%#%9%/(J]</a>(B
d1996 1
a1996 1
$Translation: faq13.html,v 1.5 2002/03/23 09:58:16 jufi Exp $
@


1.3
log
@
sync with badlands translation CVS.
@
text
@d3 1
a3 1
<title>13.0 - IPsec $B$r;H$&(J</title>
d9 1
a9 1
<meta name= "copyright"     content= "This document copyright 2000-2001 by OpenBSD">
d13 1
a13 1
<body bgcolor= "#ffffff" text= "#000000" link= "#23238E">
d16 1
a16 1
<h1><font color=#e00000>13.0 - IPsec (IP Security Protocol) $B$r;H$&(J</font></h1>
d19 2
a20 2
<P>
<h3>$BL\<!(J</h3>
d22 12
a33 12
<LI><A HREF="#13.1">13.1 - IPsec$B$C$F2?(J?</A></LI>
<LI><A HREF="#13.2">13.2 - $B$=$j$c7k9=$@@$1$l$I!"$3$N$\$/$,$J$<(J IPsec $B$J$s$+;H$o$K$c$J$i$s$N(J?</A></LI>
<LI><A HREF="#13.3">13.3 - IPsec$B$NN"$K$"$k%W%m%H%3%k$O(J?</A>
<LI><A HREF="#13.4">13.4 - $B%M%C%H%o!<%/>e$N%Q%1%C%H%U%)!<%^%C%H(J</A>
<LI><A HREF="#13.5">13.5 - IPsec $B$N@@_Dj(J</A>
<LI><A HREF="#13.6">13.6 - IPsec $B$r<jF080@@_Dj$G;H$&$K$O(J?</A>
<LI><A HREF="#13.7">13.7 - photurisd $B$N%;%C%H%"%C%W$O(J?</A>
<LI><A HREF="#13.8">13.8 - isakmpd $B$N%;%C%H%"%C%W$O(J?</A>
<LI><A HREF="#13.9">13.9 - isakmpd $B$r(J X.509 $B>ZL@@=q$H;H$&$K$O(J?</A>
<LI><A HREF="#13.10">13.10 - IKE $B%/%i%$%"%s%H$G(J isakmpd $B$H8_49@@-$,$"$k$N$O(J?</A>
<LI><A HREF="#13.11">13.11 - IPsec/VPN $B$N%H%i%V%k%7%e!<%F%#%s%0(J</A>
<LI><A HREF="#13.12">13.12 - $B4XO"%I%-%e%a%s%F!<%7%g%s(J</A>
d37 1
a37 1
$B$3$N%I%-%e%a%s%H$N0lIt$O!"0J2<$N%I%-%e%a%s%H$+$i$H$C$F$$$k(J:
d39 5
a43 5
<LI><A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&sektion=4&format=html">ipsec(4)</a>
<LI><A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=vpn&sektion=8&format=html">vpn(8)</a>
<LI><A HREF="http://www.freebsd.org/~julian/IPSEC_4_Dummies.html">IPsec for Dummies</a> by Julian Elischer
<LI><A HREF="http://www.secureops.com/vpn/vpn.html">ISAKMP Howto</a> by Patrick Ethier
<LI><A HREF="http://hem.passagen.se/hojg/isakmpd/">X.509v3 certificates with isakmpd</a> by J&ouml;rgen Granstam
d48 22
a69 3
<a name= "13.1">
<h1>13.1 - IPsec$B$C$F$J$K(J?</h1>
</a>
d71 1
a71 16
IPsec $B$O!"(JIP $B%W%m%H%3%k%U%!%_%j!<$KBP$9$k3HD%$@@!#(J
$B0E9f%;%-%e%j%F%#%5!<%S%9$rDs6!$9$k!#$3$N%5!<%S%9$G!"G'>Z!"(J
$B40A4@@-!J(Jintegrity$B!K!"%"%/%;%9@@)8f!"5!L)@@-$,Ds6!$5$l$k!#(JIPsec $B$O(J
SSL $B$H;w$?%5!<%S%9$r!"%M%C%H%o!<%/AX$GDs6!$7$F!"$7$+$b%"%W%j%1!<%7%g%s$K$O$^$C$?$/(J
$BF)2aE*$G!"$7$+$b$:$C$H6/NO!#F)2aE*$H$$$&$N$O!"(J
$B%"%W%j%1!<%7%g%s$N$[$&$G$O(J IPsec $B$r;H$&$N$K!"(JIPsec $B$N$3$H$r2?0l$DCN$i$J$/$F$$$$!"(J
$B$H$$$&$3$H$@@!#(J
IPsec $B>e$G$O(J<a href="http://www.openbsd.org/cgi-bin/cvsweb/src/etc/protocols?rev=1.8">$B$"$i$f$k(J IP $B%W%m%H%3%k(J</a>$B$r;H$($k!#0E9f2=%H%s%M%k(J (VPN) $B$b:n$l$k$7!"%3%s%T%e!<%?4V$GC1=c$J0E9f2=$r$7$F$b$$$$!#(J
$B%*%W%7%g%s$,<B$K$$$m$$$m$"$k$;$$$G!"(JIPsec $B$O$A$g$C$H$d$d$3$7$$$N$G$"$k(J ($B$=$l$b(J SSL $B$h$j$:$C$H(J!)
<P>
IPsec $B$r;H$&A0$K!"(J
FAQ <a href="../faq6.html">6$B>O(J</a> $B$N?d>)J88%$K$O(J
$B@@'Hs$H$bL\$rDL$7$F$*$$$F$[$7$$!#FC$K!"$b$7(J IP $B%"%I%l%9$N9M$(J}$,$o$+$C$F$$$J$+$C$?$i!"(J<a href="http://www.3com.com/nsc/501302s.html">Understanding
IP Addressing</a> $B$OBg$$$K$*>)$a$@@!#(J
<P>
$BO@@M}E*$K$O!"(JIPsec $B$O0J2<$N$I$s$J7A$G$b5!G=$9$k(J:
d77 128
a204 119
$B%M%C%H%o!<%/$N$+$i$`$9$Y$F$N%7%J%j%*$G!"$\$/$?$A$O%k!<%?$rG0F,$K$*$$$F$$$k!#(J
$B$D$^$j$O(J Host-to-Router ($B$=$7$F$3$N%k!<%?$O!"$"$k(J<i>Network</i>$B$N(J
$B%H%i%U%#%C%/$r@@)8f$7$F0E9f2=$9$k(J)$B!#(J
<P>
$B$3$l$+$i8+$k$h$&$K!"(JIPsec $B$O(J VPN $B@@\B3MQ$K%H%i%U%#%C%/$r%H%s%M%k$G$-$k!#(J
$B$G$b!"$=$N1~MQ$O(J VPN $B$h$j$O$k$+$K9-$$!#Cf1{%$%s%?!<%M%C%H808r49EPO?=j$,$"$l$P!"(J
$B%$%s%?!<%M%C%H>e$NA4%^%7%s$O$*8_$$$K$d$j$H$j$r$9$k$H$-$K!"(J
$B6/NO$J0E9f$dG'>Z$,;H$($k$h$&$K$J$k$s$@@!*(J
<p>
<a name= "13.2">
<h1>13.2 - $B$=$j$c7k9=$@@$1$l$I!"$3$N$\$/$,$J$<(J IPsec$B$J$s$+;H$o$K$c$J$i$s$N(J?</h1>
</a>
<P>
$B%$%s%?!<%M%C%H$N%W%m%H%3%k$G$"$k(J IP $B$^$?$O(J IPv4 $B$O!"$=$l<+BN$H$7$F$O!"E>Aw$7$F$$$k%G!<%?$KBP$7$F2?$NJ]8n$bDs6!$7$J$$!#(J
$BAw$j<g$,!"<+J,$GL>>h$C$F$$$kDL$j$NB8:_$+$I$&$+$9$iJ]>Z$7$F$/$l$J$$!#(J
IPsec $B$O$3$l$r2r7h$7$h$&$H$9$k!#0J2<$N%5!<%S%9$O$=$l$>$lFHN)$H9M$($i$l$F$$$k$1$l$I!"(J
IPsec $B$O$=$l$rE}0lE*$J7A$G%5%]!<%H$7$F$$$k!#(J
<P>
<h4>$B5!L)@@-(J</h4> $B<u?.<T0J30$N?M$K$O!"$I$s$J%G!<%?$,DL?.$5$l$?$+$r(J
$BM}2r$7$K$/$$$h$&$K$7$F$*$/!#%$%s%?!<%M%C%H7PM3$G(J
$B%j%b!<%H$N%^%7%s$K%m%0%$%s$9$k$H$-!"(J
$B$[$+$N?M$K%Q%9%o!<%I$rCN$i$l$?$/$J$$$h$M!#(J
<P>
<h4>$B40A4@@-!J(JIntegrity$B!K(J</h4> $B%G!<%?$,ESCf$G2~cb$5$l$J$$$h$&$K$9$k!#(J
$B@@A5a=q%G!<%?$r%*%s%i%$%s$GAw$k$s$J$i!"(J
$B?tNL$d6b3[$d%"%+%&%s%HHV9f$,@@53N$G!"(J
$BESCf$G2~cb$5$l$?$j$7$F$$$J$$$+3N$+$a$?$$$G$7$g$&!#(J
<P>
<h4>Authenticity$B!J@@5??@@-!?3N<B@@-!K(J</h4> $B%G!<%?$K=pL>$7$F!"$=$l$rAw$C$?$N$,K\Ev$K$"$J$?$@@$HB>$N?M$,(J
$B3NG'$G$-$k$h$&$K$9$k!#%I%-%e%a%s%H$,%$%s%A%-$8$c$J$$$H3NG'$G$-$k$N$O!"(J
$B$I$&9M$($F$b$h$$$3$H$@@!#(J
<P>
<h4>$B:FAwJ]8n!J(JReplay protection$B!K(J</h4> $B$d$j$H$j$O!"2?EY$b7+$jJV$9$h$&G'$a$i$l$?$b$N0J30$O!"(J
$B3N<B$K0l2s$@@$1$7$+@@8$8$J$$$h$&$K$9$kJ}K!$,I,MW$@@!#$D$^$j!"(J
$B$@@$l$+$,$d$j$H$j$r5-O?$7$F$*$$$F!"(J
$B$=$l$r$=$N$^$^:FAw$7$F!"7k2L$H$7$FF1$81~Ez$r2?EY$b$b$i$&!"$H$$$&$3$H$,$G$-$J$$$h$&$K$9$kI,MW$,$"$k!#(J
$B$?$H$($P!"967b<T$,0E9f%/%i%C%/0J30$N<jCJ$G%H%i%U%#%C%/$N<q;]$rB>$NJ}K!$G$D$-$H$a$F!"(J
$B$=$7$F$=$N%H%i%U%#%C%/$,!"$=$N?MJ*$K$H$C$FM-Mx$J%$%Y%s%H$r@@8$8$5$;$k$b$N$H(J
$B$7$h$&!J$+$l$N8}:B$K$*6b$r?6$j9~$`$H$+!K!#(J
$B$=$N?MJ*$,!"$"$H$+$iC1=c$KF1$8%H%i%U%#%C%/$r:FAw$7$F$b(J
$B$&$^$/$$$+$J$$$h$&$K$9$kI,MW$,$"$k!#(J
<i>$B7Y9p(J: $BDL>o$N;EMM$K4X$9$k8B$j!"<jF080$N(J IPsec $B$r;H$C$F$$$k$H$-(J 
($B$?$H$($P(J <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsecadm&amp;apropos=0&amp;sektion=8&amp;format=html">ipsecadm(8)</a> $B$r;H$C$F$$$k$H$-(J)
$B$K$O:FAw$+$i$NJ]8n$O<B9T$5$l$J$$(J</i>.
<p>
<a name= "13.3">
<h1>13.3 - IPsec $B$NN"$K$"$k%W%m%H%3%k$O(J?</h1>
</a>
<P>
IPsec $B$O!"5!L)@@-!"40A4@@-!"(Jauthenticity$B!J@@5??@@-!K!":FAwJ]8n$rDs6!$9$k$N$K!"(J
$B?7$7$$%W%m%H%3%k$r(J 2 $B$D;H$&!#$3$N%W%m%H%3%k$O(J AH$B!J(J
Authentication header, $BG'>Z%X%C%@@!K$H(J ESP$B!J(JEncapsulated security payload$B!"0E9f%Z%$%m!<%I!K$@@!#(J
<P>
AH $B$OG'>Z$H40A4@@-$H:FAwJ]8n$rDs6!$9$k!J$,5!L)@@-$ODs6!$7$J$$!K!#(J
ESP $B$H$N<g$J:9$O!"(JAH $B$O%Q%1%C%H$N(J
IP $B%X%C%@@$N0lIt!J$?$H$($P%Q%1%C%H$NH/?.85!&Aw$j@@h%"%I%l%9!K$b(J
$BJ]8n$9$k$3$H$@@!#(J
<P>
ESP $B$OG'>Z!"40A4@@-!":FAwJ]8n!"%G!<%?5!L)@@-$r(J
$BDs6!$9$k!J%X%C%@@$K$D$E$/%Q%1%C%HFb$N$9$Y$F$rJ]8n$9$k!K!#(J
$B:FAwJ]8n$OG'>Z$H40A4@@-$,I,MW$@@(J
$B!J$3$NFs$D$O$$$D$b%Z%"$G$/$k!K!#5!L)@@-!J0E9f2=!K$O!"(J
$BG'>Z(J/$B40A4@@-$,$"$C$F$b$J$/$F$b;H$($k!#(J
$BF1$8$h$&$K!"G'>Z!&40A4@@-$O5!L)@@-$J$7$G$b;H$($k!#(J
<P>
<a name= "13.4">
<h1>13.4 - $B%M%C%H%o!<%/>e$N%Q%1%C%H%U%)!<%^%C%H(J</h1>
</a>

<P>   <B>$BG'>Z%X%C%@@!J(JAuthentication Header$B!K(J</B>
(AH) $B$O4pK\E*$J(J IP $B%X%C%@@$N8e$K$-$F!"%G!<%?$N0E9f%O%C%7%e$H(J
$B<1JL>pJs$r;}$C$F$$$k!#%O%C%7%e$O(J 
IP $B%X%C%@@<+BN$N!"EAAwCf$KCM$,JQ2=$7$J$$ItJ,$b%+%P!<$G$-$k!#(J
AH $B$K;H$&<B:]$N%"%k%4%j%:%`$K$D$$$F$O!"$$$/$D$+JL8D$N(J RFC $B$,$"$C$FA*$Y$k$h$&$K$J$C$F$$$k$1$l$I!"(J
$B$=$N$I$l$b!"(J<a href="http://www.cis.ohio-state.edu/htbin/rfc/rfc2402.html">RFC2402</a>$B$K;XDj$5$l$?%,%$%I%i%$%s$K$O=`5r$7$F$$$J$/$F$O$J$i$J$$!#(J

<P>The <B>$B0E9f%Z%$%m!<%I!J(JEncapsulating
Security Payload$B!K(J</B> (ESP) $B%X%C%@@$O!"%Z%$%m!<%I$r0E9f2=$5$l$?7A$G=q$-49$($k$3$H$r2DG=$K$9$k!#(J
ESP $B%X%C%@@$O!"$=$l$K@@hN)$D(J IP
$B%X%C%@@$O07$o$J$$$N$G!"%Z%$%m!<%I0J30$N$b$N$K$D$$$F$O$^$C$?$/J]>Z$7$J$$!#(J
$B$=$l$>$l3F<o$N(J ESP $B$O(J <A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2406.html">RFC2406</A>$B$K$7$?$,$&I,MW$,$"$k!#(J
ESP $B%X%C%@@$O!"%Z%$%m!<%I$NG'>Z$bDs6!$G$-$k!J$,(J ESP $B$N30$N(J
$B%X%C%@@$K$D$$$F$OG'>Z$G$-$J$$!K!#(J

<P>IPsec $B5!G=$N!J$[$H$s$I!KFHN)$7$?ItJ,$,!"(JIPsec encapsulation $B$r(J
$B$d$C$F$$$k$N$,%G!<%?$N$b$H$NH/?.8;$+%2!<%H%&%'%$$+$K(J
$B1~$8$FE,MQ$5$l$k(J:

<UL>
<LI><B>Transport</B> $B%b!<%I$O!"%Q%1%C%H$r@@8@@.$7$F$$$k%[%9%H$,;H$&$b$N$@@!#(J
Transport $B%b!<%I$G$O!"%;%-%e%j%F%#%X%C%@@$O%H%i%s%9%]!<%HAX(J 
(e.g . TCP, UDP) $B$N%X%C%@@$NA0$K!"(JIP$B%X%C%@@$,%Q%1%C%H$N@@hF,$K$D$1$i$l$kA0$NCJ3,$GDI2C$5$l$k!#(J
$B8@@$$49$($k$H!"%Q%1%C%H$KDI2C$5$l$?(J AH $B$,(J
TCP $B%X%C%@@$H!"(Jend-to-end IP $B%X%C%@@$N0lIt%U%#!<%k%I$N%O%C%7%s%0$rC4Ev$9$k$H$$$&$3$H$@@!#(J
$B$=$7$F(JTCP $B%X%C%@@$H%G!<%?$N0E9f2=$O(J ESP
$B%X%C%@@$,%+%P!<$9$k$1$l$I!"$G$b$=$l$O(J end-to-end IP $B%X%C%@@$O0E9f2=$7$F$/$l$J$$!#(J</LI>

<LI><B>$B%H%s%M%k(J</B> $B%b!<%I$O!"$9$G$K(J end-to-end IP $B%X%C%@@$,(J
$B%Q%1%C%H$KDI2C$5$l$F$$$k$H$-$G!"$5$i$K%;%-%e%"@@\B3$NJRJ}$NC<$,(J
$B$?$@@$N%2!<%H%&%'%$$N$H$-$K;H$o$l$k!#$3$N%b!<%I$G$O!"(JAH $B$H(J ESP $B%X%C%@@$O!"(J end-to-end header $B$r4^$a(J
$B%Q%1%C%HA4BN$r%+%P!<$9$k$N$K;H$o$l$k!#$=$7$F%;%-%e%"@@\B3$N8~$3$&C<$^$G$N%[%C%W$N$_(J
$B!J$H$$$C$F$b!"$3$l$O$b$A$m$sJ#?t$N(J IP $B%[%C%W$r$^$?$,$k$+$b$7$l$J$$$1$l$I!K$r%+%P!<$9$k!"(J
$B?7$7$$(J IP $B%X%C%@@$,$D$1$J$*$5$l$k!#(J</LI>
</UL>

<P>IPsec $B$GJ]8n$5$l$?%j%s%/$O!"(J<B>Security Associations
</B>(SAs) $B$K$h$C$FDj5A$E$1$i$l$k!#3F(J SA $B$OC10l$NC1J}8~$N%G!<%?$NN.$l$K$D$$$FDj5A$5$l$F!"(J
$BIaDL$O!J%^%k%A%-%c%9%H$OL5;k$7$F!K0l$D$NE@@$+$iJL$NE@@$^$G$K$D$$$F!"(J
$B$J$s$i$+$N(J<B>$B%f%K!<%/$J%;%l%/%?(J</B>$B$K$h$C$F<1JL$G$-$k%H%i%U%#%C%/%U%m!<$r$5$9!#C10l$N(J SA $B>e$rN.$l$k%H%i%U%#%C%/$O$9$Y$F(J
$BF1$807$$$r<u$1$k!#%H%i%U%#%C%/$NCf$K$O!"J#?t$N(J SA $B$r7P$k$b$N$b$"$C$F!"(J
$B$=$N$=$l$>$l$,$J$s$i$+$NJQ49$r2C$($k!#(JSA $B$N=8CD$r(J
SA <B>Bundle</B> $B$H8F$V!#F~$C$F$/$k%Q%1%C%H$O!"(J3 $B$D$NDj5A%U%#!<%k%I(J
(<B>$B08@@h(J IP $B%"%I%l%9(J, $B%;%-%e%j%F%#%Q%i%a!<%?%$%s%G%C%/%9!J(JSecurity Parameter
Index$B!K(J, $B%;%-%e%j%F%#%W%m%H%3%k(J</B>)$B$K1~$8$F;XDj$N(J SA $B$K3d$jEv$F$k$3$H$,$G$-$k!#(J
$B%;%-%e%j%F%#%Q%i%a!<%?%$%s%G%C%/%9!J(JSecurity Parameter
Index$B!"N,$7$F(JSPI$B!K$O@@\B3$N%Q%i%a!<%?$N%M%4%7%(!<%7%g%s$,9T$o$l$k$H$-$K!"(JSA $B$N<u$1<j$,<jEO$9%/%C%-!<$@@$H;W$($P$$$$!#(J
$B%;%-%e%j%F%#%W%m%H%3%k$O(J AH $B$+(J ESP $B$N$I$A$i$+$G$J$/$F$O$J$i$J$$!#<u$1<j$N(J IP
$B%"%I%l%9$,$3$N#3$D#1AH$NCf$K4^$^$l$F$$$k$N$G!"$3$l$O%f%K!<%/$JCM$K$J$k$3$H$,J]>Z$5$l$F$$$k!#(J
$B$3$l$O30B&$N(J IP $B%X%C%@@$+$i8+$D$1$k$3$H$b$G$-$k$7!":G=i$N%;%-%e%j%F%#%X%C%@@!J$3$l$O(J SPI $B$H%;%-%e%j%F%#%W%m%H%3%k$r4^$`!K$+$i8+$D$1$k$3$H$b$G$-$k!#(J
d206 1
a206 1
<P>$B%H%s%M%k%b!<%I$N(J AH $B%Q%1%C%H$NNc$r5s$2$h$&(J:
d210 1
a210 1
<td><B>IP$B%X%C%@@(J</B></td>
d212 3
a214 3
<td>IP$B%X%C%@@(J2</td>
<td>TCP$B%X%C%@@(J</td>
<td>$B%G!<%?(J</td>
d218 1
a218 1
<P>transport $B%b!<%I(J AH $B%Q%1%C%H$NNc$r5s$2$h$&(J:
d222 1
a222 1
<td><B>IP$B%X%C%@@(J</B></td>
d224 2
a225 2
<td>TCP$B%X%C%@@(J</td>
<td>$B%G!<%?(J</td>
d229 2
a230 2
<P>ESP $B%X%C%@@$O30B&$N(J IP $B%X%C%@@$rG'>Z$G$-$J$$$N$G!"(J
AH $B$H(J ESP $B%X%C%@@$rAH$_9g$o$;$F<!$N$h$&$K$7$?$[$&$,$$$$(J:
d234 1
a234 1
<td><B>IP$B%X%C%@@(J</B></td>
d237 2
a238 2
<td><I>TCP$B%X%C%@@(J</I></td>
<td><I>$B%G!<%?(J</I></td>
d242 2
a243 2
<P>$B$3$l$O(J <B>Transport Adjacency</B> $B$H8F$P$l$k!#%H%s%M%kHG$@@$H(J
$B$3$s$J46$8$@@(J:
d247 1
a247 1
<td><B>IP$B%X%C%@@(J</B></td>
d250 3
a252 3
<td><I>IP$B%X%C%@@(J2</I></td>
<td><I>TCP$B%X%C%@@(J</I></td>
<td><I>$B%G!<%?(J</I></td>
d256 56
a311 54
<P>$B$G$b!"$3$l$O(J RFC $B$K$OL@@<(E*$K5-=R$5$l$F$$$J$$!#(JTransport
adjacency $B$HF1$8$h$&$K!"$3$l$O(JIP $B%X%C%@@$NCf$N%X%C%@@$$$/$D$+$r=|$$$FA4%Q%1%C%H$rG'>Z$7$?$&$($G!"(J
$B%Z%$%m!<%I!J%$%?%j%/%9$GI=<(!K$r0E9f2=$9$k!#(J
AH $B$H(J ESP $B%X%C%@@$,$3$N$h$&$KD>@@\$$$C$7$g$KE,MQ$5$l$F$$$k$H$-$K$O!"(J
$B%X%C%@@$N=gHV$O>e5-$N$h$&$K$J$C$F$$$kI,MW$,$"$k!#%H%s%M%k%b!<%I$G$O!"(J
$BG$0U$N(J recursive encapsulation $B$r$d$k$3$H$G!"$3$N=gHV$,;XDj$5$l$:$K$9$`$h$&$K$9$k$3$H$b$G$-$k!#(J

<A name="13.5">
<h1>13.5 - IPsec $B$N@@_Dj(J</h1>
</a>

<P>IPsec $B%7%9%F%`$H%2!<%H%&%'%$$,$I$&@@_Dj$5$l$k$+$O!"$"$kDxEY$O@@_7W<T$^$+$;$K(J
$B$J$C$F$O$$$k$N$@@$1$l$I!"$G$b(J RFC $B$O$=$l$,$I$&<BAu$5$l$k$Y$-$+$K$D$$$F6/$$%l%3%a%s%G!<%7%g%s$r9T$C$F(J
$B:.Mp$r:G>.8B$K$*$5$($h$&$H$7$F$$$k!#(J

<p>$B%Q%1%C%H$K2?$,5/$3$k$+$r%3%s%H%m!<%k$9$k!"4IM}%(%s%F%#%F%#$,#2$D$"$k!#(J
$B0l$D$O(J<B>Security Association Database</B> (SAD, 
OpenBSD$B$N(J IPsec$B%=!<%9%3!<%I$NCf$G$O!"(JTDB $B$^$?$O(J TDB table $B$H8F$P$l$F$$$k!K$G!"(J
$B$b$&0l$D$O(J<B>Security Policy Database</B> (SPD)$B$@@!#(J

<P>$B$3$NFs$D$O!"$"$k%H%i%U%#%C%/$rI=8=$7$?%;%l%/%?$r$$$/$D$+M?$($i$l$k$H!"(J
$BI,MW$H$J$k=hM}$r5-=R$7$?%(%s%H%j$rDs6!$7$F$/$l$k$H$$$&E@@$G;w$F$$$k!#(J
$B$G$b(JSPD $B$O<B:]$N=hM}$+$iFsCJ3,$[$I1s$$$H$3$m$K$"$k(J: 
SPD $B$O30$X=P$k%Q%1%C%H$K;H$o$l$F!"$I$N(J SAD $B%(%s%H%j$r;H$&$Y$-$+7h$a$k$N$KMxMQ$5$l$k!#(J
$B5U$K(J SAD $B%(%s%H%j$O!"<B:]$N%W%m%;%9$H$=$3$G;H$&%Q%i%a!<%?$r5-=R$9$k!#(J
SPD $B$N%(%s%H%j$O!"4{B8$N(J SAD $B%(%s%H%j$N$&$A$I$l$r;H$&$+(J
$B!J%P%s%I%k$J$i!"(JSAD $B%(%s%H%j$OJ#?t$"$jF@@$k$N$G!K$r;XDj$9$k$1$l$I!"$G$b$9$G$K(J
$BE,@@Z$J$b$N$,$J$$$J$i!"$=$N%(%s%H%j$r;H$C$F?7$7$$$b$N$,$D$/$i$l$k!#$D$/$i$l$k(J SA $B$N%U%#!<%k%I$O!"(J
SPD $B%(%s%H%j$+$i;}$C$F$/$k>l9g$b$"$k$7!"$=$N%U%#!<%k%I?7@@_$r(J
$B3+;O$5$;$?%Q%1%C%H$+$i;}$C$F$/$k>l9g$b$"$k!#(J

<P>$B!!309T$-$N%Q%1%C%H$O!"(JSPD $B%(%s%H%j$+$i8DJL$N(J SA $B$K9T$C$F%(%s%3!<%G%#%s%0MQ(J
$B%Q%i%a!<%?$r$b$i$&!#F~$C$F$/$k%Q%1%C%H$O!"(JSPI/$B08@@h(JIP/$B%W%m%H%3%k$N(J 3 $BE@@%;%C%H$r;H$C$F(J
$BD>@@\@@5$7$$(J SA $B$K$?$I$j$D$-!"$=$3$+$i(J SPD $B%(%s%H%j$K$?$I$j$D$/!#(J

<P>$B!!(JSPD $B$O$^$?$I$N%H%i%U%#%C%/$,(J IPsec $B$r%P%$%Q%9$9$Y$-$+!"$^$?$I$N%H%i%U%#%C%/$r(J
$B<N$F$k$Y$-$+$r;XDj$G$-$k$N$G!"F~$C$F$/$kHs(J IPsec $B$N%H%i%U%#%C%/$K$D$$$F$b;2>H$5$l$J$/$F$O$J$i$J$$!#(J
SPD $B%(%s%H%j$O!"=gHV$,L@@<(E*$K<($5$l$F$$$kI,MW$,$"$k!#$"$k%Q%1%C%H$KJ#?t$N$b$N$,%^%C%A$9$k2DG=@@-$,$"$k$7!"(J
$B=hM}$K$O:F8=@@-$,$J$/$F$O$J$i$J$$$+$i$@@!#(J

<P>SPD $B$H$$$&$N$O!"%Q%1%C%H%U%#%k%?$H;w$?$h$&$J$b$N$@@$H;W$($P$$$$$+$b$7$l$J$$!#$=$3$G7hDj$5$l$k%"%/%7%g%s$H$$$&$N$O!"(J
SA $B%W%m%;%9$N5/F0$K$J$k$o$1$@@!#%;%l%/%?$H$7$F;H$($k$N$O(J
$BAw?.85$H08@@h%"%I%l%9!"4X78$"$k>l9g$K$O%]!<%HHV9f!"%"%W%j%1!<%7%g%s$d!"$"$k>l9g$K$O%f!<%6(J ID
$B!J$3$l$O(J host based transport SA$B$N$_(J)$B!"%[%9%HL>!"%;%-%e%j%F%#(J
$B46EY%l%Y%k!"%W%m%H%3%k$J$I$@@!#(J

<P>SAD $B%(%s%H%j$K4^$^$l$k$N$O$?$H$($P(J:

<UL>
<LI>$B08@@h(J IP $B%"%I%l%9(J
<LI>IPsec $B%W%m%H%3%k(J(AH $B$+(J ESP)
<LI>SPI ($B%/%C%-!<(J)
<LI>$B%7!<%1%s%9%+%&%s%?(J
<LI>Seq O/F $B%U%i%0(J
d313 28
a340 28
<LI>AH $B$N<oN`$H>pJs(J
<LI>ESP $B$N<oN`$H>pJs(J
<LI>$B<wL?>pJs(J
<LI>Tunnel/transport $B%b!<%I%U%i%0(J
<LI>Path MTU $B>pJs(J
</UL>

<P>SPD $B%(%s%H%j$K4^$^$l$k$N$O(J:

<UL>
<LI>SA$B5/F0%]%$%s%?(J
<LI>$B%;%l%/%?%U%#!<%k%I(J
</UL>

<P>$B3F(J SA $B$O!"(JESP $B%X%C%@@0l$D$H(J AH $B%X%C%@@0l$D$rDj5A$G$-$k!#(J
IPsec $B%;%C%7%g%s$O$3$N$I$A$i$+!"$"$k$$$ON>J}$r;}$?$J$-$c$J$i$J$$!#$I$A$i$N%X%C%@@$b$J$7$GDj5A$5$l$k$3$H$O(J
$B$G$-$J$$!=!=$5$b$J$$$H!"(JSA $B$r;2>H$9$k$?$a$N(J SPI $B$r;XDj$9$k%X%C%@@$,$J$$$3$H$K$J$C$F$7$^$&!#(J
RFC $B$O!"(JAH $B$H(JESP $B%X%C%@@$,(J SPI $B$NCM$K$D$$$F(J
$BJL!9$N;XDj$r$7$F$$$k>l9g$N$3$H$ODj5A$7$F$$$J$$!#;!$9$k$K!"(J
$B$3$l$O%P%s%I%kCf$NJ#?t$N(J SA $B$r0UL#$9$k$b$N$HH=CG$5$l$k$@@$m$&!#(J

<P>OpenBSD $B$N(J SPD $B$O!"(J<tt>ipsecadm flow</tt> $B%3%^%s%I$r;H$C$F4IM}$5$l$k(J
$B!J$3$l$KJQ99$r2C$($k$N$O!"<jF080@@_Dj$r;H$&>l9g$@@$1$@@!K!#(J
SAD $B%(%s%H%j$O!"(J
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsecadm&apropos=0&sektion=8&format=html">ipsecadm(8)</a>$B$r;H$($P%^%K%e%"%k$G@@_Dj$G$-$k$1$l$I!"(J
IETF $B$O%;%C%7%g%s$d808r49$N=i4|2=$J$I$N(J
$B<+F0%a%+%K%:%`$bDj5A$7$F$$$k!#(J
OpenBSD $B$O(JPhoturis (<A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2522.html">RFC2522</a>$B$*$h$S(J
d342 1
a342 1
$B$H(J ISAKMP $B<+F0$+$.8r49(J
d346 1
a346 1
$B$r<BAu$7$F$$$F!"$=$l$>$l(J
d348 21
a368 19
$B$H(J <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&apropos=0&sektion=8&format=html">isakmpd(8)</a>
$B%G!<%b%s$G;H$o$l$F$$$k!#(J
<P>
<a name= "13.6">
<h1>13.6 - $B<jF080@@_Dj$G(J IPsec $B$r@@_Dj$9$k$K$O$I$&$9$k$N(J?</h1>
</a>
<P>
IPsec$B$N<j;O$a$H$7$F$$$A$P$s$+$s$?$s$J$N$,<jF080@@_Dj$@@!#(J
$B$3$N<jK!$G%M%C%H%o!<%/4V$r0E9f2=$7$F(JVPN$B$r$D$/$l$k!#(J
$B$3$NItJ,$rFI$s$@@$i!"$3$N@@_Dj$r(J
$B<+F02=$9$k$N$K(J<A HREF="http://www.openbsd.org/cgi-bin/cvsweb/src/share/ipsec/rc.vpn?rev=1.3">/usr/share/ipsec/rc.vpn</a>
$B$r;H$&!"$J$s$F$$$&$N$b$d$C$F$_$k$H$$$$$+$b$7$l$J$$!#(J
<P>
$B$^$:!"(JOpenBSD$B%+!<%M%k$N(J IP AH $B$H(J IP ESP $B%*%W%7%g%s$rM-8z$K$7$h$&(J
($B$b$7(J rc.vpn $B%9%/%j%W%H$r;H$C$F$$$?$j!"$"$k$$$O(J
$B$3$N<!$NNc$N$h$&$K!"(JESP $B$@@$1$r;H$C$F$$$k$h$&$J>l9g$K$O(J <i>AH$B$OM-8z$K$7$J$$$G$$$$!#(J</i>$B$=$l$I$3$m$+!"(J
$B;H$C$F$$$J$$$N$K(J AH $B$rM-8z$K$9$k$H%;%-%e%j%F%#>e$NLdBj$,(J
$BH/@@8$9$k$+$b$7$l$J$$!K!#(J<P>
$B$3$&$$$&%W%m%H%3%k$rM-8z$K$9$k$?$a$N!"$9$F$-$J(J sysctl $B$,$"$k!#(J
d375 9
a383 9
$B5/F0;~$K$3$l$r$?$A$"$2$k$K$O(J<tt>/etc/sysctl.conf</tt> $B$rJT=8$9$l$P$$$$!#(J
$B;H$$$?$$$b$N$K1~$8$F(Jnet.inet.esp.enable $B$=$7$F(J/$B$"$k$$$O(J
net.inet.ah.enable$B$NA0$N(J # $B$r$O$:$7!"$=$l$,(J 1 $B$K%;%C%H$5$l$F$$$k(J
$B$3$H$r3N$+$a$h$&!#(J
<P>
$B$5$i$K<jF080$N@@8@@.$bI,MW$@@!#(J
VPN $B$N%;%-%e%j%F%#$O!"$3$N80$r?dDj$9$k$N$,IT2DG=$@@$H$$$&E@@$K$+$+$C$F$$$k$N$G!"(J
$B$3$N80$rA*$V$N$K$O6/NO$JMp?t8;$r;H$&$N$,$H$F$b$@@$$$8$@@!#(J
$B$3$l$r@@8@@.$9$k$N$K<BMQ@@-$,9b$$J}K!$N0l$D$H$7$F!"(J
d385 1
a385 1
$B%G%P%$%9$r;H$&<j$,$"$k!#$?$H$($P(J160$B%S%C%HJ,$NMp?t@@-$r$D$/$j$@@$9$K$O!"0J2<$N$h$&$K$9$k(J:
d389 1
a389 1
$B@@8@@.$5$l$k%S%C%H?t$O$@@$$$8$@@!#0E9f$N<oN`$K$h$C$F!"I,MW$J80$N%5%$%:$,$A$,$&!#(J
d391 1
a391 1
$B0E9fJ}<0(J    $B80D9(J
d394 2
a395 2
BLF       $B2DJQ(J (40-160, 160 bits $B?d>)(J)
CAST      $B2DJQ(J (40-128, 128 bits $B?d>)(J)
d399 11
a409 11
$B$G$O!"(JSA (Security Associations) $B$N@@_Dj$r$7$h$&!#(J
Security Association $B$H$$$&$N$O!"(JIP $B%"%I%l%9!"(JSPI, 
$B%;%-%e%j%F%#%W%m%H%3%k(J (AH $B$=$7$F(J/$B$^$?$O(J ESP) $B$NAH$_9g$o$;$@@!#(JIP $B%"%I%l%9$O!"$"$J$?<+?H$N$b$N$H!"(J
$BAw$j@@h$N$b$NN>J}$@@!#(JSPI (Security Parameter
Index) $B$O3F<o(J SA $B$NJ,N`$K(J OpenBSD $B$,;H$&HV9f$@@!#(J
<P>
<I>$B$3$l$i$NNc$O!"%H%i%U%#%C%/$N0E9f2=$K(J ESP $B$7$+;H$o$J$$!#(JESP $B$O(J
$B0E9f2=$5$l$?Cf?H$N%G!<%?$NG'>Z$O$9$k$1$l$I!"(JAH $B$H$O$A$,$C$F(J
$B$=$l$rJq$`(JIP $B%X%C%@@$OG'>Z$7$F$/$l$J$$!#$3$N!V8B$i$l$?G'>Z!W$O!"(J
$B$=$l$G$b$[$H$s$I$N>l9g$K$O$^$C$?$/==J,$J$b$N$@@!#FC$K%H%s%M%k4D6-$G$N(J
ESP $B$N>l9g$K$O!#(J</I>
d418 1
a418 1
$B$3$l$rFs$D$N%k!<%?$G<B:]$K$d$C$F$_$h$&!#%k!<%?$N(JIP$B%"%I%l%9$O$=$l$>$l(J192.168.5.1 $B$H(J 192.168.25.9$B$@@!#(J
d420 1
a420 1
$B%[%9%H(J192.168.5.1$B>e$G$O(J:
d427 1
a427 1
$B%[%9%H(J 192.168.25.9$B>e$G$O(J:
d435 1
a435 1
$B$4$i$s$N$h$&$K!"(JSPI $B$,$A$,$C$F$$$k!#(JSPI $B$,2?$G!"$=$l$,$I$3$G;H$o$l$F$$$k$+$K$D$$$F$N40A4$J@@bL@@$O!"(J<A HREF="#13.4">On the wire format</a> $B$r;2>H!#(J
d437 2
a438 2
$B$3$l$G(J Security Associations $B$,$G$-$"$,$C$?$N$G!"(J
$B%U%m!<$r@@_Dj$7$h$&!#(J
d440 5
a444 5
$B$^$:$O(J192.168.5.1$B$+$i(J:<P>
$B$5$F$3$3$G$$$-$J$j!"%U%m!<$,(J<b>2$B$D(J</b>$BAO$i$l$k!#0l$D$O%m!<%+%k$N%=!<%9%"%I%l%9$G!"(J
$B%m!<%+%k%[%9%H$+$i=P$FL\E*CO$K8~$+$&$9$Y$F$N%Q%1%C%H$r%+%P!<$7!"(J
$B$b$&0l$D$N%U%m!<$OAw$j@@h$+$i%m!<%+%k%[%9%H$KLa$C$F$/$k(J
$B%U%m!<$@@!#(J
d450 1
a450 1
192.168.25.9$BB&$G$O$3$s$J6q9g$@@(J:
d457 21
a477 21
$B$b$7(J Host-to-Host VPN $B$N%*!<%P!<%X%C%I$r8:$i$7$?$1$l$P!"(JSPI
$B$r:n$k$N$K(J <tt>-forcetunnel</tt> $B$r$O$:$7$F$*$/$H!"(Jtransport $B%b!<%I$,;H$($k(J (<tt>-forcetunnel</tt>
$B$r;H$&$H(J IP $B%X%C%@@$^$G4^$s$@@(JIP $B%Q%1%C%H$N$9$Y$F$,I,$:(JSPI$B$K%+%W%;%k2=(J
$B$5$l$k(J)$B!#$b$7(J
$BH/?.85$+Aw$j@@h$N$I$A$i$+$,%M%C%H%o!<%/$J$i!"%H%s%M%k%b!<%I$r;H$&$7$+$J$$!#(J
$B%M%C%H%o!<%/$+$i=PF~$j$9$k%H%i%U%#%C%/$K(J SA $B$r;H$&$H!"<+F0E*$K(J
$B%H%s%M%k%b!<%I$N(J SPI $B$,3N<B$K:n$i$l$k$3$H$K$J$k!#(J
<p>
$B$3$l$O(JIPsec$B$r;H$$;O$a$k4JC1$J$d$j$+$?$@@!#(J
<P>
IPsec $B$r;H$($P!"%W%i%$%Y!<%H(J IP $B%"%I%l%96u4V$r%$%s%?!<%M%C%H$4$7$K$D$J$2$k!#(J
$B$$$$Nc$r5s$2$h$&!D!D(J208.1.1.1$B$NGX8e$K$"$k(J 192.168.99.0/24 $B$H!"(J
208.2.2.2$B$NGX8e$K$"$k(J 208.1.5.0/24 $B$H(J 208.1.2.0/24 $B$r%H%s%M%k$G$D$J$2$?$$$H$7$h$&!#(J
$B0J2<$NNc$O(J <A HREF="http://www.openbsd.org/cgi-bin/cvsweb/src/share/ipsec/rc.vpn?rev=1.3">rc.vpn</a> $B%9%/%j%W%H$r;H$C$F@@8@@.$7$?$b$N$@@!#(J
<P>
$B$4$i$s$N$H$*$j!"(JIPsec$B$G<jF080@@_Dj$r;H$C$F$$$k$H!"(J
$B$d$C$F$[$7$$$3$H$r(J<b>$B$:$P$j@@53N$K(J</b>$B;XDj$7$J$-$c%@@%a$@@!#(J
$B$"$J$?$N$+$o$j$K8+Ev$r$D$1$F$/$l$?$j$O$7$J$$!#0J2<$NNc$r$_$F$4$i$s!D!D(J
<h2>208.1.1.1$B$NB&$G$O(J:</h2>
$B$^$:!"(Jsecurity associations (SA)$B$r@@_Dj$7$h$&(J:<BR>
($B$3$l$G(J SPI, $B0E9f2=$NJ}K!$H80$,@@_Dj$5$l$k(J) 
d482 1
a482 1
$B<!$K!"(J208.1.1.1 $B$+$i(J 208.2.2.2$B$X$N%U%m!<$r@@_Dj!'(J
d486 1
a486 1
$B<!$K(J  208.2.2.2$B$NGX8e$K$"$k(J208.1.2.0/24 $B$+$i(J 192.168.99.0/24$B$X$N%U%m!<$r@@_Dj!'(J
d490 1
a490 1
$B<!$K(J 208.2.2.2$B$NGX8e$K$"$k(J 208.1.5.0/24 $B$+$i(J 192.168.99.0/24$B$X$N%U%m!<$r@@_Dj!'(J
d494 1
a494 1
$B$3$s$I$O(J 208.2.2.2$B$NGX8e$K$"$k(J 208.1.2.0/24 $B$+$i%k!<%?(J 208.1.1.1$B$X$N%U%m!<$r@@_Dj!'(J
d498 1
a498 1
$B%*%C%1!<!"$G$O(J 208.2.2.2$B$NGX8e$N(J 208.1.5.0/24 $B$+$i%k!<%?(J 208.1.1.1$B$X$N%U%m!<$r@@_Dj(J
d502 1
a502 1
$B:G8e$K!"%k!<%?(J 208.2.2.2 $B$+$i(J 192.168.99.0/24$B$X$N%U%m!<$r@@_Dj$7$h$&(J
d507 2
a508 2
<h2>208.2.2.2$BB&$G$O(J:</h2>
$BA0$HF1$8$h$&$K!"$^$:$O(J SA$B$N@@_Dj$+$i!D!D(J
d513 2
a514 2
$B$5$F$3$C$A$ON"JV$7$K$J$k$N$G!D!D(J
$B%k!<%?(J 208.2.2.2 $B$+$i(J 208.1.1.1$B$X$N%U%m!<$r@@_Dj!'(J
d518 1
a518 1
208.1.1.1$B$NGX8e$K$"$k%M%C%H%o!<%/(J 192.168.99.0/24 $B$+$i(J 208.1.2.0/24$B$X$N%U%m!<$r@@_Dj!'(J
d522 1
a522 1
208.1.1.1$B$NGX8e$K$"$k%M%C%H%o!<%/(J 192.168.99.0/24 $B$+$i(J 208.1.5.0/24$B$X$N%U%m!<$r@@_Dj!'(J
d526 1
a526 1
$B$G$O(J208.1.1.1$B$NGX8e$N(J 192.169.99.0/24 $B$+$i%k!<%?(J 208.2.2.2$B$X$N%U%m!<$r@@_Dj!'(J
d530 3
a532 3
$B$O!<$$!"$b$&$9$0$*$7$^$$$G$9$h!<!D!D(J
208.1.2.0/24 $B$H(J 208.1.5.0/24 $B$r%k!<%?(J 208.2.2.2$B$+$i(J 208.1.1.1$B$^$GFO$1$k$N$K!"(J
$B$"$H%U%m!<(J2$B$D$@@$1!'(J
d538 2
a539 2
ipsecadm $B$r;H$C$F$$$F!"<+J,$N$d$C$?:n6H$r$<$s$V$4GK;;$K$7$F(J
$B0l$+$i$d$j$J$*$7$?$1$l$P!"<!$N$h$&$K$9$k!'(J
d543 7
a549 5
$B$3$l$G$9$Y$F$N(J IPsec $B>pJs(J (SPI$B!"%U%m!<!"%k!<%F%#%s%0$N%(%s%H%j!K$,%7%9%F%`$+$i0lA]$5$l$k!#(J
<P>
<a name="13.7">
<h1>13.7 - photurisd$B$N@@_Dj$O$I$&$d$k$N(J?</h1>
</a>
d551 3
a553 3
Photuris $B$O$^$@@$"$^$j;H$o$l$F$$$J$$$7!"(J
RFC$B$N%9%F!<%?%9$+$i8@@$($P$^$@@<B83CJ3,$@@!#$G$b(JOpenBSD$B$G$O$?$/$5$s$N?M$,(J
$BMxMQ$7$F$-$?!#(J
d555 2
a556 2
photurisd $B$r@@_Dj$9$k$K$O!"$^$:(J /etc/photuris/secrets.conf
$B$r(J photurisd$B$r;}$C$?%[%9%H$N$9$Y$F$GJT=8$9$k$3$H!#(J
d566 2
a567 2
identity local &quot;Default&quot; &quot;$B$3$3$rJQ$($k(J&quot;
identity remote &quot;Default&quot; &quot;$B$3$3$rJQ$($k(J&quot;
d569 6
a574 6
&quot;$B$3$3$rJQ$($k(J&quot; $B$NItJ,$r!"(Jlocal config $BB&$G9%$-$J80$K$7$F!"(J
$B$=$l$+$i(Jremote config$B$G$OJL$N9%$-$J80$K$7$h$&!#(J
($B%j%b!<%H%\%C%/%9$G$b(J config $B$r;H$&$3$H!#$?$@@$7(J &quot;local&quot; 
&quot;remote&quot; $B$rF~$lBX$($F!"%j%b!<%H%[%9%HB&$K$H$C$F$O$=$C$A$,%m!<%+%k80$K$J$k$h$&$K$9$k!#(J)
$B$J$*!"$3$l$i$N80$O>-Mh$N(J photurisd $B$N%P!<%8%g%s$G$O!"(J
$B:G=i$N808r49$r8x3+80$G9T$&$h$&$J7A$GCV$-49$o$k$3$H$K$J$k$N$GCm0U!#(J
d576 1
a576 1
<tt>net.inet.ah.enable</tt> $B$,(J 1$B$K@@_Dj$5$l$F$$$k$3$H$r3NG'$7$h$&!#(J
d581 1
a581 1
$B$=$l$+$i(J startkey$B$r<B9T!#(J
d585 2
a586 2
$B$=$l$G$O(J tcpdump $B$r<B9T$7$F!"%Q%1%C%H$,(J AH$B$G0E9f2=$5$l$F$$$k$3$H$r3NG'$7$F$_$h$&(J
$B!JJL$N%&%#%s%I%&$G(Jping$B$9$k$H$+!"$J$s$+%;%C%7%g%s$r3+;O$7$F%H%i%U%#%C%/$r$D$/$k$3$H!K!#(J
d590 1
a590 1
$B$J$K$b=P$F$3$J$$$h$&$J$i!"(Jtcpdump $B$r%[%9%H%"%I%l%9B&$G;H$C$F$_$k<j$,$"$k!#(J
d594 2
a595 2
photurisd $B$,<+F0E*$KH/?.85$HAw$j@@h$N%[%9%H$d%M%C%H%o!<%/$r@@_Dj$9$k$h$&$K(J
$B$9$k$K$O!"(J /etc/photuris/photuris.startup$B$K5-=R$7$F$*$/!#(J
d597 35
a631 31
<P> <a name="13.8"> <h1>13.8 - isakmpd$B$N@@_Dj$O(J?</h1>
</a><P>VPNs $B$r$O$8$a(JIPsec$B$N3F<oEAE}E*$J%"%W%j%1!<%7%g%s$r9M$($F$$$k$J$i!"(J
$B$?$V$s(J ISAKMP $B$r;H$&$3$H$K$J$k!#(JIPsec $B$N>&6H<BAu$N(J
$B0lIt$O!"<jF080@@_Dj$r$5$;$F$/$l$J$$$N$G!"(J
$B$J$s$i$+$N7A$N(J ISAKMP$B$r;H$&$7$+$J$/$J$k!#(J
<P>

<h3>13.8.1 - isakmpd$B$C$F$J$K(J?</h3> ISAKMP ($B$H$-$I$-(J IKE, 
Internet Key Exchange$B!"%$%s%?!<%M%C%H808r49!"<+F0808r49$H$b8F$P$l$k(J) $B$O(J VPN $BMQ$N808r49%a%+%K%:%`$@@!#(J
RFC 2407, RFC 2408$B!"(JRFC 2409$B$K5-=R$5$l$?<jK!$r;H$C$F%;%-%e%j%F%#>e$NLdBj$r%/%j%"$7$F$$$k!#(J
ISAKMP $B$O!"DL>o$J$i(J <A
HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsecadm&apropos=0&sektion=8">ipsecadm(8)</a>
$B$r;H$o$J$/$F$O$J$i$J$$$h$&$J0E9f2H6q$N$d$j$H$j$r4IM}$7$F$/$l$k!#(J
$BFs$D$N(JIPsec$B%N!<%I4V$G(JIPsec$B%Q%i%a!<%?$r3NN)$9$k$?$a$K!"(J
$BFsCJ3,%W%m%;%9$r:NMQ$7$F$$$k!#(J

<P> <b>$B%U%'!<%:(J 1</b> - ISAKMP $B%T%"#2$D$O!"J]8n$5$lG'>Z$5$l$?%A%c%M%k$r3NN)$7!"(J
$B#2$D$N%G!<%b%s4V$GDL?.$,$G$-$k$h$&$K$9$k!#$3$l$O(J
$BN>%[%9%H4V$G(J Security Association (SA) $B$r3NN)$9$k!#$3$N%A%c%M%k$r3NN)$9$k$?$a$N<jK!$O!"(J<b>Main
Mode</b> $B$H(J <b>Aggressive Mode</b> $B$@@!#(J
Main Mode $B$O3F<oG'>Z>pJs$r(J
$BFCDj$N=gHV$GAw$j!"%"%$%G%s%F%#%F%#$NJ]8n$rDs6!$9$k!#(JAggressive Mode $B$O(J
$B%"%$%G%s%F%#%F%#J]8n$ODs6!$7$J$$!#G'>Z>pJs$r(J
$B$9$Y$F0l5$$KAw$k$+$i$@@!#(JAggressive mode $B$r;H$&$N$O!"(J
$B%M%C%H%o!<%/$NBS0hI}$,69$$$H$-$@@$1$K$7$?$[$&$,$$$$!#(J
<P>

<b>$B%U%'!<%:(J 2</b> - Security Associations $B$,(JIPsec$B$K$+$o$C$F%M%4$5$l$k!#(J
$B%U%'!<%:(J 2 $B$O(JIPsec$B%[%9%H4V$K%H%s%M%k$+(J endpoint SA $B$r3NN)$9$k!#(J
$B%U%'!<%:(J 2 $B$G$O(J<b>Quick Mode</b> $B$,;H$o$l$k!#%U%'!<%:(J 1 $B$G$9$G$K(J SA $B$,3NN)$7$F$$$k$N$G!"(J
$B40A4$JG'>Z$r$/$jJV$5$J$/$F$$$$$+$i$@@!#(J
d635 15
a649 15
$B<jC;$K$$$($P!"%U%'!<%:(J 1 $B$OJ]8n$5$l$?%A%c%M%k$r3NJ]$9$k$N$K;H$o$l$F!"$=$3$G(J
$B!J$b$C$H<jAa$$!K%U%'!<%:(J 2 $B$N@@_Dj$,9T$o$l$k!#F1$8%U%'!<%:(J 1 $B%A%c%M%k$NCf$G!"J#?t$N%U%'!<%:(J 2 $B@@_Dj$r(J
$B$9$k$3$H$b$"$k!#%U%'!<%:(J 2 $B$O<B:]$N%H%s%M%k$r@@_Dj$9$k$N$K;H$o$l$k!#(J
$B%U%'!<%:(J 1 $B$G$O(J IPsec $B%N!<%IF1;N$,@@\B3$r3NN)$7$F(J
$BG'>Z$r8r49$9$k(J (X509 $B>ZL@@$+!"(J
$B;vA0$K6&M-$7$?HkL)!K!#$3$l$GN>C<$H$b!"Aj<j$,G'>Z$5$l$?$3$H$r(J
$B3NG'$G$-$k!#%U%'!<%:(J 2 $B$O80$N8r49$G!"N><T$N4V$N%G!<%?$,(J
$B$I$&0E9f2=$5$l$k$+$r7h$a$k!#(J

<h3>13.8.2 - isakmpd$B$3$H$O$8$a(J</h3>

<P>
$B%G%U%)%k%H$G(J OpenBSD $B$O(J ISAKMP $B$H(J
IPsec $B%9%?%C%/MQ$N%P%$%J%j$,$D$$$F$/$k!#;DG0$J$,$i!"(J
$B%5%s%W%k%U%!%$%k$O%G%U%)%k%H$G$O$J$$!#$3$l$r<j$KF~$l$k$K$O!"%=!<%9%D%j!<$+$i0J2<$N$b$N$r<h$C$F$3$h$&(J:
d652 26
a677 26
CD-ROM$B!JEvA3;}$C$F$k$h$M!K$+$i$G$b$$$$$7!"(J<A
HREF="http://www.openbsd.org/cgi-bin/cvsweb/">cvsweb</a> $B$d(J
<A HREF="http://www.usa.openbsd.org/anoncvs.html">$B%3%^%s%I%i%$%s(J CVS
$B%/%i%$%"%s%H(J</a>. $B$r;H$C$F$b$$$$(J (Cvsweb $B$O(J <A
HREF="http://www.openbsd.org/cgi-bin/cvsweb/src/sbin/isakmpd/samples/VPN-east.conf">VPN-east.conf</a>
$B$H(J <A
HREF="http://www.openbsd.org/cgi-bin/cvsweb/src/sbin/isakmpd/samples/policy">policy</a>
$B$rMQ0U$7$F$"$k(J)$B!#$3$NNc$G;H$&$K$O!"(J<i>policy</i>
$B$r(J /etc/isakmpd/isakmpd.policy $B$K%3%T!<$7$h$&!#(J<i>VPN-east.conf</i> $B$O(J /etc/isakmpd/isakmpd.conf$B$K%3%T!<$9$k!#(J
$B$3$3$G$O!"(JVPN ($B%H%s%M%k(J) $B$N@@_Dj$N;EJ}$r@@bL@@$7$F$_$k!#$b$7(J
isakmpd $B$r8DJL%[%9%H4V$G;H$$$?$1$l$P!"(J<i>samples</i> $B%G%#%l%/%H%j$K$=$lMQ$N%5%s%W%k$,(J
$BF~$C$F$$$k!#(J
man$B%Z!<%8$K>\$7$$>pJs$,$"$k$N$G!"(J
<A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.conf&sektion=5">isakmpd.conf(5)</a> $B$H(J
<A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.policy&sektion=5">isakmpd.policy(5)</a> $B$r$*K:$l$J$/!#(J

<P>
$B$^$:$O(J esp $B$N5/F0$+$i$@@!#(J<A HREF="#13.6" TARGET="_blank">13.6$B$NF,$N(J
$B$H$3$m(J</a> $B$G!"$3$l$r<B9T;~!&5/F0;~$K$=$l$>$l$d$kJ}K!$r@@bL@@$7$F$$$k!#(J
$B<!$K(J /etc/isakmpd.policy $B$NJT=8$@@!#(J
$B$3$N%U%!%$%k$O(J ISAKMP $B$K!"$@@$l$,(J IPsec $B$K%"%/%;%9$G$-$k$+$r65$($k!#$3$N%7%J%j%*$G$O!"$3$N(J policy $B%U%!%$%k$O!"(J
Encapsulate Security Payload(ESP)$B$r;H$C$F%G!<%?$rAw$C$F$-$F!"(Jmekmitasdigoat $B$H$$$&%Q%9%o!<%I!J$3$l$O$"$J$?$,(J
$B>!<j$K7h$a$l$P$$$$!K$GG'>Z$5$l$?Aj<j$J$i!"$@@$l$G$b(J isakmpd $B$HDL?.$G$-$k$H=R$Y$F$$$k!#$3$N%U%!%$%k$r$rJQ99$7$F!"(J
$BFCDj$N%G%8%?%k>ZL@@=q$G=pL>$5$l$?%G!<%?$@@$1$rG'$a$k$H$+!"FCDj$N0E9fJQ49$r;H$C$?%G!<%?$@@$1$rG'$a$k$H$+!"(J
$B4uK>$r(JISAKMP$B$KEA$($i$l$k!#$^$?$@@$l$G$b(J IPsec $B$,;H$($k$h$&$K$7$F$b$$$$!#$3$l$O%F%9%HMQ$@@$1$K$7$F$*$/$N$,K>$^$7$$!#(J
$BK|?M$K%"%/%;%9$5$;$k$K$O!"(Jpolicy $B%U%!%$%k$rJT=8$7$F0J2<$@@$1$K$7$h$&(J:
d684 2
a685 2
$BF1$8(J policy $B%U%!%$%k$K$O(J $ $B$N$D$$$?9T$,Fs9T$"$k!#(J
$B;H$&A0$K$3$N#29T$O:o=|$9$k$3$H!#(JCVS $B$G$7$+;H$o$J$$!#(J
d687 1
a687 1
$B$3$NNc$G!"$b$C$H;H$$J*$K$J$k(J policy $B%U%!%$%k$O$3$s$J46$8$@@(J:
d690 1
a690 1
Comment: $B$3$N(J policy $B$O@@5$7$$%Q%9%o!<%I$r;H$&%j%b!<%H$+$i$N(J ESP SA $B$r<u$1IU$1$k(J
d696 3
a698 3
$B$3$l$r<BAu$9$l$P!"(JESP $B$@@$1$r;H$C$?4pK\E*$J(J VPN ($B%H%s%M%k(J) $B$,$G$-$"$,$k!#(J
$B%[%9%H(J A $B$G$O(J /etc/isakmpd/isakmpd.conf $B$rJT=8$9$k!#8+K\$GF~$C$F$$$k(J249.2.2.2 $B$H$$$&(J IP $B%"%I%l%9$O!"(J
$B%[%9%H(J A $B$N<B:]$N30It(J IP $B%"%I%l%9$K=q$-49$($k$3$H!#(J
d707 2
a708 2
$BF1$8$h$&$J$3$H$r%[%9%H(J B $B$N(J isakmpd.conf $B$G$b$d$m$&!#(J249.3.3.3 $B$O(J
$B%[%9%H(J B $B$N30It(J IP $B%"%I%l%9$@@!#(J
d717 6
a722 6
<p>$B$3$3$G(J isakmpd $B$N$*$b$J$U$k$^$$$r7h$a$kJQ?t$r@@_Dj$G$-$k!#$3$3$G$O(J
$B%G%U%)%k%H$r;H$C$F$*$1$P$$$$!#(J
<b>Listen-on</b>= value $B$O!"(Jisakmpd $B$,J9$-<*$r$?$F$k$Y$-(J IP 
$B$r;XDj$9$k!#$"$J$?$N%2!<%H%&%'%$$N%$%s%?!<%M%C%H(J IP $B$@@$1$,I,MW$@@!#(J
$B%2!<%H%&%'%$$KJ#?t$N30It%$%s%?!<%U%'!<%9$,$"$k$J$i!"(J
$B%3%s%^$G6h@@Z$C$?0lMw7A<0$GF~NO$7$F!"$I$N%$%s%?!<%U%'!<%9$rD0$$$F$[$7$$$+0lMw$K$G$-$k!#(J
d724 1
a724 1
$B<!$K%[%9%H(J A $B$G!"$b$&0lEY(Jisakmpd.conf $B$rJT=8$7$h$&!#(J
d731 1
a731 1
$B%[%9%H(J B$B$G$O(J:
d738 4
a741 4
<p>$B$3$NItJ,$O!"%U%'!<%:(J 1 $B@@\B3$N%M%4%7%(!<%7%g%s$r$9$k$H$-$K<u$1IU$1$k$Y$-(J IP $B%"%I%l%9$r5-=R$9$k!#(J
$B$3$3$G$NCM$O2<$NItJ,$r;X$7$F$$$k!J%U%'!<%:(J 1 $B$OC1$K%j%b!<%H$N%T%"$rG'>Z$7$F!"(J
$B$=$l$,<gD%DL$j$NAj<j$@@$H3NG'$9$k$@@$1$J$N$r$*K:$l$J$/!K!#(J
IP_Address=<i> &lt;PEER-NAME&gt;</i>$B$H$$$&7A<0$GJ#?t$N%T%"$r5-=R$G$-$k!#(J
d743 1
a743 1
$B<!$K%[%9%H(J A$B$G$O(J:
d749 1
a749 1
$B%[%9%H(J B$B$G$O(J:
d756 2
a757 2
<p>$B$3$l$O@@\B3$N%U%'!<%:(J 2 $B$r5-=R$7$?$b$N!#$3$N%U%'!<%:$O!"DL?.$KN>(J
$B%T%"$,;H$&%W%m%H%3%k$r7h$a$k$H$3$m$@@!#(J
d759 9
a767 9
<p>The <b>Connections</b>= tag $B$O!"$=$N2<$N%;%/%7%g%s$r$5$9!#(J
$B%U%'!<%:(J 2 $B$r@@_Dj$9$k$?$a$K<u$1F~$l$i$l$k%a%=%C%I$dMW7o$r%$%K%7%(!<%H$9$k!#$3$l$O$^$?!"(J
$B$$$C$?$s3+;O$7$?$i$I$N@@\B3$r%$%K%7%(!<%H$9$Y$-$+$r(JISAKMPD $B$K9p$2$k!#(J
$BJ#?t$N%T%"%[%9%H$K$D$J$0$D$b$j$J$i!"(J
$B0J2<$N$h$&$KJ#?t$N%;%/%7%g%s$r=q$$$F$b$$$$$3$H$KCm0U!#(J

<p>$B%j%b!<%H%[%9%H$N(J IP $B%"%I%l%9$,$o$+$i$J$1$l$P!"(J <b>Connections</b>= tag $B$K(J
$B5s$,$C$F$$$J$$(J IP $B$+$i$N@@\B3$G;2>H$5$l$k!"HFMQ%(%s%H%j$r$"$k%;%/%7%g%s$K5-=R$7$F$*$$$F!"(J
$B$=$l$r(J Default= $B$G;XDj$9$k$h$&$K$9$l$P$$$$!#(J
d769 1
a769 1
$B%[%9%H(J A$B$G$O(J:
d781 1
a781 1
$B%[%9%H(J B$B$G$O(J:
d794 3
a796 3
$B$3$l$i$O>e$G@@bL@@$7$?%U%'!<%:(J 1 $B$NItJ,$G;2>H$5$l$F$$$k%;%/%7%g%s$@@!#$=$l$>$l(J
$B%U%'!<%:(J 2 $B$K?J$`$?$a$K%T%"$N%2!<%H%&%'%$$,K~B-$7$J$1$l$P$J$i$J$$MW7o$r5-=R$7$F$$$k!#$[$+$K$b%*%W%7%g%s$O(J
$B$?$/$5$s$"$k$1$l$I!">e$K5s$2$?$b$N$O:GDc8BI,MW$J$b$N$@@!#(J
d798 25
a822 25
<li><b>Phase=1 </b>$B$,I,MW$J$N$O!"(J ISAKMPD $B%3!<%I$,%U%'!<%:(J 1 $B$H%U%'!<%:(J 2 $B$r=hM}$9$k$N$KF1$8%W%m%7!<%8%c$r;H$&$+$i$@@!#(J
$B$3$l$r(J <b>1</b> $B$K$7$J$$$H!"2?0l$D5!G=$7$J$/$J$k!#(J
<li><b>Transport= </b> $B$O!"%T%"$4$H$K$A$,$&2DG=@@-$,$"$k!#$3$3$G$O(J
udp $B$r;H$&$3$H$K$7$F$"$k$N$G!"$=$&$$$&$3$H$K$7$F$*$3$&!#(J
$B0lIt$N%T%"$O%U%!%$%"!<%&%)!<%k$NGX8e$K$"$C$F!"(JUDP $B%H%i%U%#%C%/$rDL$5$J$$>l9g$,$"$k$3$H$KCm0U!#$3$l$OEvA3$J$,$i!"@@_DjA0$K3NG'$7$F$*$/I,MW$,$"$k!#(J
<li><b>Local-address </b>$B$OF~$C$F$/$k%Q%1%C%H$,;X$9L\E*%"%I%l%9$@@!#0lIt$N%1!<%9$G$O!"(J
$B%U%'!<%:(J 1 $B$N@@\B3$N$?$a$KD0$/%$%s%?!<%U%'!<%9$,$A$,$C$F$$$k$+$b$7$l$J$$!#(J
$B$3$NNc$G$O!"%$%s%?!<%U%'!<%9$O0l$D$7$+$J$$$N$G!"$3$N%T%"$GJ9$-<*$r$?$F$k(J
$B%$%s%?!<%U%'!<%9$N(J IP $B$,$=$l$K$J$k!#(J
<li><b>Address= </b>$B$O!"F~$C$F$/$k%Q%1%C%H$N%=!<%9(JIP$B!#$3$l$O%T%"%2!<%H%&%'%$$r(J
$B;X$9$N$,$U$D$&!#(J
$B$3$3$O$b$C$H@@bL@@$,I,MW!#%T%"$NH/?.$9$k(J IP $B%"%I%l%9$O;vA0$K$o$+$i$J$$$3$H$,$"$k$+$i!#(J
<li><b>Configuration= </b>$B$O!"2<$N%;%/%7%g%s$r;X$9!#$3$3$G$d$C$?$h$&$J7A$G(J
$BJ#?t$N%;%/%7%g%s$r;XDj$G$-$k!#$3$3$G$O%5%s%W%k%U%!%$%k$K$"$C$?(J
$B%G%U%)%k%HCM$r;H$*$&!#(J
<li><b>Authentication=</b> $B$O!"$3$N%T%"$,;H$&$O$:$N!"(J
$B;vA0$K6&M-$7$F$"$kHkL)!#$3$N%Q%9%o!<%I$,(J policy $B$KEO$5$l$F!"(J
$B$3$N%T%"$,$3$N%[%9%H$H(J IPsec $B$r;H$C$F$$$$$3$H$K$J$C$F$$$k$+$r3NG'$9$k!#$3$3$N%Q%9%o!<%I$rJQ$($?$i!"(J
policy $B%U%!%$%k$G$N5-=R$bJQ$($kI,MW$,$"$k!#(Jsample $B%U%!%$%k$,$3$N%Q%9%o!<%I$K1~$8$FDs6!$5$l$k$+$i$@@!#(J
$B:GDc8B$N(J policy $B%U%!%$%k$G9T$/$D$b$j$J$i!"$3$3$G$O9%$-$J$b$N$r;XDj$9$l$P$$$$!#(J
<li><b>Flags=</b> $B$O$$$^$O;H$o$l$F$$$J$$!#(JRFC $B$G$O!"%U%'!<%:(J 1 $BMQ$NDI2C%*%W%7%g%s$r;XDj$9$k$?$a$NM=Hw$H$7$F(J
$B$3$l$r;D$7$F$$$k!#(J
<p>$B$[$+$N%*%W%7%g%s$r;XDj$9$k$?$a$N%?%0$b$?$/$5$s$"$k!#>\$7$/$O(J
<A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.conf&apropos=0&sektion=5&format=html">isakmpd.conf(5)</a>
$B$r;2>H!#(J
d825 1
a825 1
$B%[%9%H(J A$B$G$O(J:
d835 1
a835 1
$B%[%9%H(J B$B$G$O(J:
d845 3
a847 3
<p>$B$3$l$i$O!">e5-$N%U%'!<%:(J2$B$G;2>H$5$l$F$$$k%;%/%7%g%s$r$"$i$o$7$F$$$k!#$3$l$O(J
$B8DJL$N@@\B3$N$?$a$K!"Fs$D$N%2!<%H%&%'%$4V$GOC$r$9$k$N$K(J ISAKMPD $B$,;H$&$Y$-(J
$B8DJL@@_Dj$J$N$@@!#(J
d849 15
a863 15
<li><b>Phase=2</b> $B$OI,?\!#(JISAKMPD $B%3!<%I$O!"%U%'!<%:(J 1 $B$H(J
$B%U%'!<%:(J 2 $B$NG'>Z$KF1$84X?t$r;H$&$+$i!#$3$l$,$J$$$H(J VPN $B$O5!G=$7$J$$!#(J
<li><b>ISAKMPD-Peer=</b> $B$O!">e$G$N%[%9%H$N%;%/%7%g%s$NL>A0$@@!#$D$^$j%U%'!<%:(J 2 $B@@\B3$r3NN)$9$k$?$a$K!"(J
$B$3$3$G;XDj$7$?%T%"$HOC$r$7$F$$$k$s$G$9$h!"$H$$$&0UL#$@@!#$3$l$,$"$k$N$O!"(J isakmp $B%T%"$d@@\B3$r5-=R$9$k$N$K(J
$BJ#?t$N%;%/%7%g%s$,$"$k>l9g$b$"$k$+$i$@@!#(J
<li><b>Configuration=</b> $B$O!"2<$N%;%/%7%g%s$G!"$3$N%[%9%H$H@@\B3$K$*$1$k;XDj$N%T%"$H$,(J
$B$7$?$,$&$Y$-5,3J$r5-=R$7$?ItJ,$r$5$9!#(J
<li><b>Local-ID=</b> $B$O!"%T%"$N%2!<%H%&%'%$$X$N$3$N%W%i%$%Y!<%H%M%C%H%o!<%/$r(J
$B5-=R$7$?!"0J2<$N(J IPsec-ID $B%;%/%7%g%s$r;X$9!#$3$NItJ,$,Aw$i$l$F!"8~$3$&B&$N%2!<%H%&%'%$$,(JVPN$B7PM3$G(J
$B$3$A$i$N%M%C%H%o!<%/$K%G!<%?$rE>Aw$9$k$?$a$N%k!<%F%#%s%0%F!<%V%k$r$-$A$s$H@@_Dj$G$-$k$h$&$K$9$k!#(J
<li><b>Remote-ID=</b> $B$3$l$O!"$3$A$i$N%[%9%H$+$i8+$F!"%j%b!<%H$N%W%i%$%Y!<%H%M%C%H%o!<%/$G(J
$B$"$k$O$:$N$b$N$r5-=R$7$?!"2<$N(JIPsec-ID $B%;%/%7%g%s$r5-=R$7$F$$$k$3$NItJ,$,2r<a$5$l$F!"$3$A$i$N%W%i%$%Y!<%H%M%C%H%o!<%/$+$i(J
VPN$B7PM3$G%j%b!<%H$N%W%i%$%Y!<%H%M%C%H%o!<%/$K%G!<%?$rE>Aw$9$k$?$a$N%k!<%F%#%s%0%F!<%V%k$r$-$A$s$H@@_Dj$9$k!#(J
<p>$B$3$3$G%5%]!<%H$5$l$F$$$k%?%0$,$b$&0l$D$"$C$F!"$=$l$,(J Flags= $B$@@!#$3$N%?%0$,I,MW$J$i(J
<A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.conf&apropos=0&sektion=5&format=html">isakmpd.conf(5)</a>$B$rFI$s$G$[$7$$!#(J
d866 4
a869 4
$B$3$3$O(JIPsec-ID $B%;%/%7%g%s$@@!#0J2<$N%(%s%H%j$O!"%[%9%H(JA$B$H%[%9%H(JB$B$N(J
$BN>J}$G(J isakmpd.conf $B%U%!%$%k$NCf$K$J$1$l$P$$$1$J$$!#$3$NNc$@@$H(J
$B%[%9%H(JA$B!J$3$l$O>e$N(J Net-A$B$K(J
$B$D$J$,$C$F$$$k!K$G$O(J 192.168.1.0/255.255.255.0 $B!"%[%9%H(JB$B!J$3$l$O>e$N(J Net-B$B$K$D$J$,$C$F$$$k!K$G$O(J192.168.20.0/255.255.255.0 $B$@@!#(J
d882 4
a885 4
<p>$B$3$NFs$D$N%;%/%7%g%s$,3F%[%9%H$N(J <b>conf</b> $B%U%!%$%k$K4^$^$l$F$$$k!#$3$l$,(J
<b>Local-ID</b> $B$H(J <b>Remote-ID</b>$B$N<1JL$7$G;2>H$5$l$k%;%/%7%g%s$@@!#0l$D$N(J
$B%W%i%$%Y!<%H%M%C%H%o!<%/$+$i!"JL$N%W%i%$%Y!<%H%M%C%H%o!<%/$X$N%H%i%U%#%C%/$r2DG=$K$9$k$N$K@@_Dj$5$l$k$Y$-7PO)$H5-=R$7$F$$$k!#(J
<b>ID-type</b>= $B$O(J <b>IPV4_ADDR_SUBNET</b> $B$+(J <b>IPV4_ADDR</b>$B$,$H$l$k(J (RFC2708 $B$K$O$[$+$K$bM-8z$JCM$,$"$,$C$F$$$k!#(JOpenBSD$B$N<BAu$G$O$$$^$N$H$3$m(JIPv4 $B$7$+%5%]!<%H$5$l$F$$$J$$!#(JIPv6 $B$O!"(JOpenBSD-current $B$G%5%]!<%H$5$l$F$$$k$+$b$7$l$J$$(J)$B!#(J
d888 1
a888 1
$B!!$3$l$GN>J}$N%[%9%H$G!"(Jsample $B%U%!%$%k$O$3$s$J6q9g$K$J$C$F$$$k$O$:$@@(J:
d896 10
a905 10
$B$3$N%;%/%7%g%s$O%U%'!<%:(J 1 $B@@\B3$G;H$&0E9fJ}<0$NMW7o$r5-=R$7$F$$$k!#L>A0$O(J
<i>Configuration=</i> $BJQ?t$N$H$kCM$rH?1G$7$F$$$k!#$4$i$s$N$H$*$j!"(J
Domain of Interest (DOI) $B$r(J IPSEC $B$H$7$F5-=R$7$?!#(J<b>EXCHANGE_TYPE</b> $BJQ?t$O!"%U%'!<%:(J 1 $B$G$O(J <b>ID_PROT</b> $B$K@@_Dj$7$F$"$k!"(J
$B$3$l$O$3$NG'>Z$G%+%P!<$5$l$k%W%m%H%3%k$r;XDj$7$F$$$k!#(J
<b>Transforms=</b> $B$O$3$N$d$j$H$j$GI,MW$H$5$l$k!J$^$?$O;XDj$5$l$k!K0E9fJQ49J}<0$@@!#$3$NNc$G$O!"(J
$B$3$l$O@@_Dj%U%!%$%k$N2<$N%;%/%7%g%s$r$5$7$F$$$F!"$=$3$G$O!"$o$l$o$l$O(J3DES$B$G0E9f2=$5$l$F$$$F(J
SHA$B$G3NG'$G$-$k%A%'%C%/%5%`$r;}$D%Q%1%C%H$r<u$1<h$k!"$H=q$$$F$"$k!#(J
$B%5%s%W%k$N(J<b>VPN-east.conf</b>$B$K$O!"$$$m$$$mJQ49J}<0$,;3$[$I$+$$$F$"$k!#$J$<$+$H$$$&$H(J 3DES $B$d(J SHA $B$O3F<o%W%i%C%H%[!<%`$GI,$:$7$b%5%]!<%H$5$l$$$k(J
$B$o$1$G$O$J$$$+$i$@@!#(JOpenBSD $B$N>l9g!"$3$l$r4pK\E*$J@@_Dj$GJQ$($k$Y$-M}M3$OFC$K$J$$!#$3$N%;%/%7%g%s$r%3%T!<$7$FJQ49J}<0$rJQ$($k$N$O!"(J
$B$>$s$V$s$K$d$C$F$[$7$$!#M#0l!"I,MW$K$J$k$N$O!"(J Configuration= $BJQ?t$bJQ$($k$3$H$@@!#(J
d914 10
a923 10
<p>$B$3$N%;%/%7%g%s$O!"(JVPN$B7PM3$GAw$i$l$k%G!<%?$N0E9f$NMW7o$r5-=R$9$k$H$3$m$G!"(J
$B>e$N(J <i>Configuration</i> $B$G;2>H$5$l$k!#$3$N%;%/%7%g%s$H!"(J
$B$9$0>e$N%U%'!<%:(J 1 $B$G$3$3$KAjEv$9$k$H$3$m$H$N$A$,$$$O!"(J <b>EXCHANGE_TYPE</b> $B$,(J <b>QUICK_MODE</b>$B$K$J$C$F$$$k$3$H$J$N$KCmL\!#(J
$B%U%'!<%:(J 2 $B$G$OI,$:$3$&$J$k!#(J
<b>Suites=</b> $B$O(J IPsec Suite $B%;%/%7%g%s$r;X$7$F$$$k!#(J
$BN>%[%9%H4V$GDs6!$5$l$F$$$k3F<o$N0E9fJ}<0$r5-=R$7$?$b$N$@@!#(J
ISAKMP $B$H(J IPsec $B$K$D$$$F$O!"$[$+$K$b@@bL@@$9$k$3$H$,$$$C$Q$$$"$k!#$$$^$N4pK\E*$J@@bL@@$r$b$H$K!"(J
$B<+N)$7$F$d$C$F$$$1$kC1=c$J$,$i$b7xO4$J(JVPN$B$,$G$-$k!#(J
$B$G$b$3$l$O!"N>%[%9%H$K$H$C$F(J<i>$BI,MW:GDc:G>.8B$N(J</i> 
<b>isakmpd.conf</b> $B$G$7$+$J$$!#(J
d925 2
a926 2
<h3>13.8.3 - isakmpd$B$N5/F0(J</h3>
$B:G=i$K$3$N%G!<%b%s$rAv$i$;$k$H$-$K$O!"0J2<$N%3%^%s%I$r;H$*$&!'(J
d932 42
a973 39
$B%G!<%b%s$O%G!<%b%s%b!<%I$G$OAv$i$:!"$U$D$&$N%W%m%;%9$H$7$F(J
$BAv$k!#$=$7$F$9$Y$F$r%?!<%_%J%k$K=PNO$9$k!#(Jisakmpd$B$r;_$a$F(J
$B7PO)$r0lA]$9$k$K$O!"3F%N!<%I$G(Jisakmpd $B%W%m%;%9$r;&$7$F$+$i(J
<b>ipsecadm flush</b>$B$r<B9T$7$h$&!#(J

<P> <a name="13.9"> <h1>13.9 - isakmpd $B$r(J X.509 $B>ZL@@=q$H$$$C$7$g$K;H$&$K$O(J?</h1>
</a>
<P>
$B;vA0$K6&M-$7$?80$N$+$o$j$K>ZL@@=q$r;H$&$h$&$K(J isakmpd $B$r@@_Dj$9$k$N$O!"J]8n$5$l$F$$$J$$%T%"$,$?$/$5$s$"$k5pBg%M%C%H%o!<%/$N>l9g$K$O!"(J
$B>.$5$J%M%C%H%o!<%/$K$/$i$Y$F$=$s$J$K$`$:$+$7$/$J$$!#$`$7$m@@_Dj$,4JC1$K$J$C$F!"$5$i$K=EMW$J$3$H$H$7$F(J
$B804IM}$b4JC1$K$J$k$+$b$7$l$J$$!#(J
<P>

<h2>$B>ZL@@=q$N@@8@@.(J</h2>

$B80$d>ZL@@=q$N@@8@@.$N;EJ}$K$D$$$F$N$h$$5-=R$,!"(Jisakmpd
$B%=!<%9%G%#%l%/%H%j$N(J
<A HREF="http://www.openbsd.org/cgi-bin/cvsweb/src/sbin/isakmpd/README.PKI?rev=1.7">README.PKI</a>
$B%U%!%$%k$K=q$$$F$"$k!#I,MW$J$N$O(J
CA $B80!"BP1~$9$k(J CA X.509
$B>ZL@@=q!"%M%C%H%o!<%/>e$N(J isakmpd $B$r;H$&%3%s%T%e!<%?$=$l$>$l$KHkL)800l$D$H!"$=$NHkL)80$N$=$l$>$l$KBP$7$F(J X.509
$B>ZL@@=q0l$D$:$D$@@!#(J
<p>
X.509 $B>ZL@@=q$O!">ZL@@=q$N;}$A<g$r5-=R$9$k(J Subject Alternative Name
(SubjectAltName) extension $B$,I,MW$@@!#>ZL@@=q$N(J SubjectAltName extension $B$r(J
certpatch $B$r;H$C$F@@_Dj$9$kJ}K!$b!"(J
SubjectAltName$B$H$7$F(JIP$B%"%I%l%9$r@@_Dj$9$k>l9g$N@@bL@@$,(J README.PKI $B$K=q$$$F$"$k!#(J
$B$3$3$G(J IP $B%"%I%l%9$r;H$&$N$O!"(Jisakmpd $B$N(J
$B%G%U%)%k%H$N$U$k$^$$$G$b$"$k!#(J
<p>
Certpatch $B$O$^$?!"(J FQDN (Fully Qualified Domain
Name) $B$+(J UFQDN (User FQDN) $B$N;HMQ$b%5%]!<%H$7$F$$$k!#(JFQDN $B$NNc$O$?$H$($P(J
<tt>www.openbsd.org</tt> $B$@@$7!"(JUFQDN $B$NNc$H$7$F$O(J
$B%a!<%k%"%I%l%9$,$"$k!#$?$H$($P(J <tt>Jorgen.Granstam@@abc.se</tt> $B$J$I!#(J
<p>
$B$3$N(J howto $BJ8=q$G$O!"(J FQDN $B$r(J
SubjectAltNames $B$G;H$&!#(JIP $B%"%I%l%9$r;H$&$[$&$,$A$g$C$H4JC1$K$J$k!#(J
$B$=$l$,(J isakmpd $B$N%G%U%)%k%H$N$U$k$^$$$@@$+$i$@@!#(J
$B$G$b!"$9$0$K$o$+$k$h$&$KBg$7$?:9$G$O$J$$!#(J
d975 2
a976 2
FQDN SubjectAltName $B$r>ZL@@=q$KF~$l$k$K$O!"(J
$B$3$s$J46$8$K$9$l$P$$$$!'(J
d981 10
a990 10
$B$3$3$G(J ca.key $B$O(J CA $B$NHkL)80$J$N$G!"$3$l$,(J
$B$G$-$k$N$O(J CA $BHkL)80$K%"%/%;%9$G$-$k?M$@@$1$@@!#(J
home.mysite.se $B$H$$$&$N$O!J<B:_$O$7$J$$$1$l$I!K>ZL@@=q$KA^F~$5$l$k$Y$-(J FQDN $B$@@!#(J
originalcert.crt $B$H(J newcert.crt $B$N%U%!%$%kL>$OF1$8L>A0$K$7$F$b$$$$!#(J
$B$3$N>l9g!"$b$H$N%U%!%$%k$O?7$7$$JQ99:Q$_$N>ZL@@=q$K(J
$B>e=q$-$5$l$k!#(J
<p>
$B$3$N80$H>ZL@@=q$r!"(JREADME.PKI $B$N:G8e$K@@bL@@$K$7$?$,$C$F%G%#%l%/%H%j$K(J
$BJ|$j9~$b$&!#$b$7K\5$$G80$r;H$&$D$b$j$J$i!"(JCA $B80(J (ca.key) $B$O(J
$B$I$3$+0BA4$J$H$3$m$K$7$^$C$F$*$3$&!#(J
d993 1
a993 1
<h2>isakmpd$B$N@@_Dj(J</h2>
d995 15
a1009 15
$B$3$s$I$O(J /etc/isakmpd/isakmpd.conf $B@@_Dj%U%!%$%k$r8+$F$d$m$&!#(J
$B$3$l$O$b$H$b$H(J
<A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.conf&sektion=5">isakmpd.conf(5)</a>
$B$N%5%s%W%k%U%!%$%k$+$i<h$C$?$b$N$@@$1$l$I!"$+$J$j=q$-49$($F$"$k!#(J
$B$5$i$K(Jman $B%Z!<%8$K$"$k$b$N$h$j$b$+$J$jC;$$%U%!%$%k$r;H$&!#(J
$B$3$N@@_Dj$NM}2r$r4JC1$K$9$k$?$a$K!"%U%!%$%k$+$i!"(J
$B$3$N@@_Dj$K$OI,MW$J$$$b$N$r$[$H$s$I:o=|$7$?!#$5$i$K%3%a%s%H$bDI2C$7$F(J
$B!J0lIt$N%3%a%s%H$O(J isakmpd.conf(5)$B$K$"$C$?$^$^(J) $B!"L>A0$b$A$g$C$HJQ$($?!#(J
$B$3$3$G;H$C$?%I%a%$%sL>$O!"$\$/$NCN$k8B$j$G$O0l$D$b<B:_$7$F$$$J$$!#(J
<p>
$B<B$O$3$l$rFI$`?M$O$_$s$J!"$9$G$K;vA06&M-80$K$D$$$F$^$H$b$KF0$/(J
$B@@_Dj$r;}$C$F$$$k$N$G!JA0$N@@a$r;2>H!K$3$N%U%!%$%k$G$b(J
$BL\?7$7$$$H$3$m$O$"$^$j$J$$!#$@@$+$i$3$l$O!"A4It;v:Y$+$K@@bL@@$7$?$j$O$7$J$$!#(J
$B$\$/$,@@bL@@$7$J$$ItJ,$K$D$$$F$O(J isakmpd.conf(5) $B$r(J
$B8+$F$[$7$$!#(J
d1011 1
a1011 1
$BA4BN$N9=@@.$O$3$s$J46$8$@@$H$7$h$&$+!#(J
d1026 5
a1030 5
$BMW$9$k$K!"Fs$D$N%M%C%H%o!<%/$,!"J]8n$5$l$F$$$J$$%M%C%H%o!<%/>e$r!"(JIPsec$B%H%s%M%k7PM3$G(J
$B@@\B3$5$l$k!"$H$$$&$3$H!#$3$3$G%W%i%$%Y!<%H%$%s%?!<%M%C%HMQ$KM=Ls$5$l$?(JIP
$B%"%I%l%9(J (RFC1918) $B$r;H$C$F$$$k$3$H$OL5;k$7$F$[$7$$!#(J
$B$J$K$+$7$iNc$OI,MW$@@$C$?$b$s$G!#(Jisakmpd $B$r(J NAT
$B$HAH$_9g$o$;$F;H$&$H$+$=$N<j$N$r$I$&$9$k$+$O@@bL@@$7$J$$(J($B$\$/<+?H$d$C$?$3$H$,$J$$$+$i!K!#(J
d1032 2
a1033 2
$B$G$O@@_Dj%U%!%$%k$r8+$F$d$m$&!#0J2<$O!"(J
$B%;%-%e%j%F%#%2!<%H%&%'%$(J gw.mysite.se$BMQ$N%U%!%$%k$@@(J:
d1038 1
a1038 1
# *************  gw.mysite.se isakmpd.conf  $B$N$O$8$^$j(J       ************
d1110 2
a1111 2
# $B$3$3$G5-=R$5$l$?%M%C%H%o!<%/>e$N%3%s%T%e!<%?$+$iH/$;$i$l$?(J
# $B%Q%1%C%H$G(J... 
d1117 3
a1119 3
# ... $B0J2<$N5-=R$H%^%C%A$9$kL\E*CO$r(J
# $B;}$C$?$b$N$O!"0E9f2=$5$l$F(J
# IPsec$B%H%s%M%k7PM3$G%j%b!<%H%7%9%F%`$KE>Aw$5$l$k!#(J
d1125 1
a1125 1
# Main mode $B$N5-=R(J
d1224 4
a1227 4
$B$3$3$^$G$O%m!<%+%k%7%9%F%`MQ$N@@_Dj!#%j%b!<%H%7%9%F%`$N(J
$B@@_Dj$b$^$C$?$/F1$8$@@$1$l$I!"N"JV$7$K$J$k!#$@@$+$i$A$,$&$N$O(J
isakmpd.conf $B%U%!%$%k$NF,$N$H$3$m$@@$1$@@!#(J
$B%;%-%e%j%F%#%2!<%H%&%'%$(Jgw.worksite.se$B$N(J isakmpd.conf $B%U%!%$%k$NF,$N$H$3$m$@@$18+$F$d$m$&(J:
d1232 1
a1232 1
# *************      gw.worksite.se isakmpd.conf $B$N$O$8$^$j(J    **********
d1267 1
a1267 1
# **********************     ... $B$D$E$/(J...      **********************
d1272 2
a1273 2
$B$"$^$j$`$:$+$7$/$O$J$+$C$?$M!#$?$@@FI$`$N$O$A$g$C$HB`6~$@@$C$?$+$b$7$l$J$$$1$l$I!#<!$NItJ,$O!"(J
$B$b$&$A$g$C$H$*$b$7$m$/$J$k!#(J
d1277 1
a1277 1
<h2>policy $B%U%!%$%k(J</h2>
d1279 5
a1283 5
$B<B$r$$$($P!"(Jpolicy $B%U%!%$%k$O=i$a$F$N?M$K$O$A$g$C$H$d$d$3$7$$$+$b$7$l$J$$!#(J
$BFC$K;W$$DL$j$KF0$+$J$$$H$-$K$O!#(Jman-$B%Z!<%8(J
<A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.policy&sektion=5">isakmpd.policy(5)</a>
$B$O!"<B$O$=$s$J$K0-$/$J$$!#$H$3$m$I$3$m(J
$B$O$C$-$j$7$J$$$H$3$m$,$"$k$1$l$I!"A4BN$H$7$F$O$$$$!#(J
d1285 2
a1286 2
$B0lHV4JC1$J!"$A$c$s$H5!G=$9$k(J policy $B%U%!%$%k$O(J
$B$?$C$?0l9T$@@(J:
d1294 14
a1307 14
$B$3$l$OMW$9$k$K!"$@@$l$,@@\B3$7$F$$$$$+$K$D$$$F!"%]%j%7!<>e$N@@)Ls$O$J$K$b$J$$!"(J
$B$H$$$&$3$H$@@!#$@@$+$i$"$^$j%;%-%e%j%F%#$N9b$$@@_Dj$G$O$J$$!#$3$3$N(J
authorizer $B%?%0$O!"(Jpolicy $B$r7h$a$k8"8B$r;}$C$??MJ*!"(J
$B$H$$$&$3$H$@@!#FCJL(J authorizer $B$G$"$k(J&quot;POLICY&quot; $B$O!"(J
policy $B$K$D$$$F:G=*E*$+$DL58B$N8"8B$r;}$D!#$=$l0J30$N(J authorizer $B$O!"(J
$B$3$3$G8"8B$r;}$D$?$a$K$O$^$:(J &quot;POLICY&quot; $B$KG'Dj$7$F$b$i$o$J$1$l$P$J$i$J$$!#(J
<p>
$B$5$i$K2?$,5v$5$l$k$+$K$D$$$F!">r7o72$,$"$k$+$b$7$l$J$$!#(J
$B0J2<$N(J policy $B$O$@@$+$i!"K\J*$N0E9f$r2?$+;H$C$F(J ESP
$B%W%m%H%3%k$r;HMQ$7$??M$@@$1$,G'Dj$5$l$k$H$$$&$3$H$@@!JK\J*$H$$$C$F$b$^$"!"(J
$B$3$l$@@$H(J DES $B$r;H$C$F$$$k?M$bG'$a$i$l$F!"(JDES $B$O(J
$B$$$^$d$[$H$s$I%$%s%A%-$H;W$C$F$b$$$$$/$i$$$@@$1$l$I!"$G$b(J DES $B$rG'$a$J$$$h$&$K(J
$B$3$N(J policy $B$rJQ99$9$k$N$O!"FI<T$NN}=,LdBj$H$7$F;D$7$F$*$3$&$+!K!#(J
$B$3$l$@@$H(JESP $B$G0E9f2=$9$k?M$J$i$@@$l$G$bG'$a$i$l$k$3$H$KCm0U!#(J
d1319 4
a1322 4
$B$5$i$K8"8B$r$@@$l$+B>$NB8:_!JJ#?t$G$b(J
$B$$$$!K$K!V%5%V%i%$%;%s%9!W$9$k$3$H$b$G$-$k!#4JC1$J%1!<%9$H$7$F$O!";vA06&M-80$N(J
$B>l9g$@@!#$3$N>l9g!";vA0$K6&M-$5$l$?%Q%9%o!<%I$rCN$C$F$$$k?M$O$9$Y$F(J
$BG'$a$i$l$k!#$@@$+$i!'(J
d1334 9
a1342 9
$B$3$l$O$3$N%Q%9%o!<%I$rCN$C$F>r7o$K%^%C%A$7$??M$9$Y$F$K(J
$B@@\B3$rG'$a$k!J$?$@@$7$3$N%Q%9%o!<%I$O(J isalmpd.conf $B$N(J Authentication $B%?%0$G$b(J
$B@@_Dj$7$F$*$/$N$r$*K:$l$J$/!K!#(J
<p>
$B$3$3$^$G$O2?$b$`$:$+$7$/$J$$!#$3$C$+$i$,$*$b$7$m$$$H$3$m!#$^$:!"(J
$B%i%$%;%s%9$r<u$1$kB8:_$O$?$/$5$s$"$C$F$b$$$$$1$l$I!"$=$N$9$Y$F$,(J &quot;POLICY&quot;$B$KG'Dj$5$l$J$/$F$O$J$i$J$$!#(J
$B$5$i$KG'Dj$5$l$?%i%$%;%s%9J];}<T$O!"B>$N%i%$%;%s%9J];}<T$K%5%V%i%$%;%s%9$r=P$;$k!#(J
$B%i%$%;%s%9J];}<T$O!"(Jpolicy$B%U%!%$%k$G$5$i$K5-=R$5$l$F$$$?$i(J
$BC1$J$k%9%H%j%s%0$G$b$$$$(J:
d1360 5
a1364 5
$B$5$"$_$J$5$s$*BT$A$+$M$NItJ,!#(JPolicy $B$O$^$?!"(J
$B80$K%5%V%i%$%;%s%9$7$?$j8"8B0Q>y$7$?$j$G$-$k!#$3$N>l9g$N80$O!"$U$D$&$O(J
X.509 $B>ZL@@=q$@@!#>ZL@@=q$r4JC1$K;H$&$K$O!"(J
$B$=$l$r%Q%9%o!<%I$,$o$j$K;H$&$3$H$@@!#(J
policy $B%U%!%$%k$K8DJL%f!<%6$N>ZL@@=q$r2C$($k$@@$1$G$$$$(J:
d1374 1
a1374 1
        CzA           $B$3$NItJ,$O%f!<%6>ZL@@=q$G$4$6$$$^$9$J(J           AQEB\
d1388 5
a1392 5
$B$5$F!"%f!<%6$N?t$,B?$1$l$P!"$3$N$d$jJ}$,$P$+$2$F$$$k$N$O$9$0$o$+$k!#(J
isakmpd $B$,(J CA- $B%G%#%l%/%H%j$H(J Certificate
$B%G%#%l%/%H%j$+$iFI$s$G$/$k>ZL@@=q$H!"%T%"$+$iAw$i$l$F$/$k>ZL@@=q$O!"(J
$B5?;w;q3J>ZL@@!J(Jcredentials$B!K$KJQ49$5$l$k!#$3$&$7$?5?;w;q3J>ZL@@$KJQ49$5$l$?>ZL@@=q$O!"(J
$B$3$s$J46$8$K$J$C$F$$$k(J:
d1399 2
a1400 2
    	CzA  $B$3$NItJ,$O%f!<%6>ZL@@=q!J$D$^$j(JCA$B>ZL@@=q!K$K=pL>$7$?(J     AQEB\
        BQA             $B!!?M$N8x3+80!?>ZL@@=q$G$9$J(J                  IUuz\
d1410 2
a1411 2
        CzA          $B$3$3$s$H$3$O>ZL@@=q$r<u$1$kB&$N80$K!!(J           AQEB\
        BQA                          $B$J$j$^$9(J                       IUuz\
d1422 7
a1428 7
$B$5$F!"$3$l$i$,(J &quot;POLICY&quot; $B$KG'$a$i$l$?$b$N$G$O$J$$$N$G!"(J
$B$=$l$r$J$s$i$+$N7A$GG'CN$9$k(J policy $B$,$J$1$l$P%@@%a$@@$H$$$&$3$H$KCm0U!#$5$i$K!"$3$l$O(J
$BFbIt$G>ZL@@=q$,$I$&$J$C$F$$$k$+$r@@bL@@$7$F$$$k!#>e$N;q3J>ZL@@!J(Jcredential$B!K$O!"(J
policy $B%U%!%$%k$NCf$G$O8+$i$l$J$$!#$G$b!"$=$&$$$&;q3J>ZL@@$K(J
$B%5%V%i%$%;%s%9$O=P$;$k!#>e$N%5%V%i%$%;%s%9H/9T$r;W$$$@@$7$F$[$7$$!#$"$l$r;H$($P!"(J
CA$B>ZL@@=q$r%i%$%;%s%9$H$7$F(J &quot;POLICY&quot;$B$K=q$$$F$d$l$P!"(J
$B$"$k(J CA $B$,=pL>$7$?>ZL@@=q$9$Y$F$K%i%$%;%s%9$,=P$;$k!#(J
d1438 1
a1438 1
        CzA             $B$3$NItJ,$,(J CA $B>ZL@@=q$G$4$6$$$^$9$J(J          AQEB\
d1452 93
a1544 93
$B$D$^$j>e$N(J policy $B$O!"(JCA $B$K8"8B0Q>y$9$k(J policy $B$N4JC1$JNc$@@!#(J
$B$3$N>ZL@@=q$r;}$C$?(J CA $B$,=pL>$7$?>ZL@@=q$r;}$C$F$$$F(J
policy $B$H@@_Dj%U%!%$%k$N@@_Dj$7$?$[$+$N>r7o$K$b(J
$B$7$?$,$C$F$$$k%f!<%6$O$9$Y$FG'$a$i$l$k!#(J
<p>

<h2>$B$[$H$s$I0BA4!D!D$O0BA4$KHs$:(J!</h2>

$B$5$F!"K\Ev$K0BA4$r4|$9$k$J$i!"$3$l$G$O;DG0$J$,$i==J,$G$O$J$$$N$@@!#(J
$B$3$&$$$&@@_Dj$N%;%-%e%j%F%#%2!<%H%&%'%$$r967b$9$kJ}K!$,$"$k!#(J
$B$b$7:Y!9$7$?OC$,$$$i$J$$$J$i!"$$$^$9$0<!$N@@a$^$GHt$P$=$&!#(J
$B$=$l0J30$N?M$?$A$O!"$J$<$3$l$,0BA4$G$J$$$+$rM}2r$7$F$_$h$&$G$O$J$$$N!#(J
$B$`$:$+$7$/$O$J$$$h!#(J
<p>
$B$3$NCJ3,$G!"(Jisakmpds $B$,$I$s$J>pJs$K%"%/%;%9$G$-$k$+9M$($F$[$7$$!#(J
$B@@_Dj%U%!%$%k$+$i!"(Jisakmpd $B$O%T%"$,$I$N(J IP-$B%"%I%l%9$+$i(J
$BAw?.$7$F$/$k$+$o$+$k!J(J[$B%U%'!<%:(J 1] $B%;%/%7%g%s$G(J)$B!#%U%'!<%:(J 1 $B$N(J
$B%M%4%7%(!<%7%g%s$r$9$k$H$-$KF@@$i$l$k>pJs$+$i!"%T%"$,$I$s$J(J ID $B$r(J
$B=P$7$F$/$k$+$o$+$C$F!"%T%"$+$i$N>ZL@@=q$r$b$i$C$?$i$=$l$G%T%"$,K\Ev$K(J
$B$=$N(JID$B$r;}$C$F$$$k$3$H$,>ZL@@$5$l$k!#LdBj$J$5$=$&$@@$M(J?
<p>
$B$&$s!"$b$7(JID $B>pJs$,(J IP $B$J$i!J%U%'!<%:(J 1 $B$N(J ID $B%;%/%7%g%s$r;H$o$J$1$l$P(J
$B$3$l$,%G%U%)%k%H$K>u67$K$J$k!K$9$Y$F$O%*%C%1!<$@@!#(JCA
$B$O$=$N(J IP $B$r(J cert $B$K7k$S$D$1$F!"@@_Dj$NCf$N(J IP
$B$@@$1$GI,MW>pJs$O$9$Y$F$=$m$&!#$J$j$9$^$7HH$,!"$[$+$N%3%s%T%e!<%?$+$i(J
$BF1$8(J IP $B$r;H$&$3$H$bIT2DG=$G$O$J$$(J
$B!J$?$H$($PN>J}$N%3%s%T%e!<%?$,F1$8(J LAN $B>e$K$"$C$F!"(J
$B$U$@@$s$=$N(J IP $B$r;H$C$F$$$k%^%7%s$,$J$s$i$+$NM}M3$G%@@%&%s$7$F$$$k$J$I!K!#(J
$B$G$b!"$J$j$9$^$7HH$,!">ZL@@=q$H$=$l$KBP1~$9$kHkL)80$r;}$C$F!"(J
$B$=$N(J IP $B$,$J$j$9$^$7HH$N$b$N$@@$H!JIT@@5$K!K>ZL@@$9$k$3$H$O(J
$BIT2DG=$J$O$:$@@!#(J
<p>
$B$b$7$=$l$,K|$,0l5/$3$C$?$i!"$=$N$J$j$9$^$7HH$O$=$N(JIP$B$N=jM-<T$+$iHkL)80$r(J
$B$I$&$K$+$7$FEp$s$@@$+!"$"$k$$$O(J CA $B$r$J$s$i$+$NJ}K!$G$@@$^$7$F!"(J
$B$K$;$N>pJs$r4^$s$@@>ZL@@=q$rH/9T$5$;$?$+$N$I$A$i$+$@@!#(J
$B$b$7$3$N$$$:$l$+$,5/$3$C$?$J$i!"(J
$BHkL)80$NJ]8n$,IT==J,$@@$C$?$+!"(JCA $B$,(J
$B$J$j$9$^$7HH$N?H85!J$"$k$$$O(J cert $B$N(J
ID $B>pJs!K$r==J,$K%A%'%C%/$G$-$J$+$C$?$+!"$"$k$$$O(J CA $BHkL)80$,==J,$KJ]8n$5$l$F$$$J$+$C$?$+$@@!#(J
$B$3$l$i$O$9$Y$F!"$=$b$=$b%;%-%e%j%F%#$,$^$H$b$K5!G=$9$kA0Ds$J$N$G!"(J
$B$3$&$$$&>u67$O@@dBP$K5/$3$C$F$O$$$1$J$$!#(J

<p>
$B$5$F$\$/$?$A$NNc$G$O>u67$,$A$,$&!#$3$3$G$O(J
$B>ZL@@=q$NCf$K!"(JIP$B%"%I%l%9$G$O$J$/(J FQDN $B$,F~$C$F$$$k!#(J
[Phase 1] $B%;%/%7%g%s$K$^$@@(J IP $B%"%I%l%9$,$"$k$N$G!"(J
$B$3$l$O%;%-%e%j%F%#LdBj$H$J$k2DG=@@-$,$"$k!#(JISAKMP
$B%U%'!<%:(J 1 $B%M%4%7%(!<%7%g%s$N4V$K2?$,5/$-$k$+$H$$$&$H!"%T%"$,(J
$B4|BT$I$*$j$N(J IP $B$+$iAw$i$l$F$-$?$3$H$r%A%'%C%/$G$-$k!J$G$b$5$C$-@@bL@@$7$?$h$&$K!"(J
$B$3$l$O0lIt$N>u67$G$O$4$^$+$;$k!K!#%T%"$,Ds<($9$k(JID$B$r!"(J
$BK\Ev$K$=$N%T%"$,;}$C$F$$$k$3$H$b%A%'%C%/$G$-$k!#(J
$B$G$b!"$$$^%A%'%C%/$G$-$J$$$N$O!"$=$N(JID $B$,K\Ev$K$=$N%T%"$,;}$C$F$$$k$H4|BT$9$Y$-(J ID $B$J$N$+!"$H$$$&$3$H$@@!#(J
isakmpd $B$O!"$I$s$J(J ID $B$r4|BT$9$l$P$$$$$+0lEY$b65$o$C$F$$$J$$$+$i$@@!#(J
<p>
DNS $B%7%9%F%`$,%[%9%H$N$?$a$K(J IP $B$r(J FQDN $B$H(J
$B7k$S$D$1$F$/$l$k!"$H$$$&?M$b$$$k$@@$m$&!#$=$l$O$=$&$J$s$@@$1$l$I!"8=:_$N(J DNS $B%7%9%F%`$O%;%-%e%j%F%#$,9b$/$J$$$7!"(J
$B$@@$^$7$F$K$;$N>pJs$r=P$5$;$k$3$H$b!">l9g$K$h$C$F$O(J
$B$G$-$k!J$"$k$$$O%5!<%S%95qH]!J(JDoS$B!K967b$r(J
$B967b<T$K<u$1$F!"$=$N967b<T$N%^%7%s$,(JDNS$B%5!<%P$NEz$r(J
$B56B$$9$k$3$H$b$G$-$k!K!#$$$:$l9b%;%-%e%j%F%#(J DNS $B$bEP>l$9$k$1$l$I!"(J
$B$^$@@=P2s$C$F$$$J$$$7!J>/$J$/$H$b$[$H$s$I$N(J DNS $B%5!<%P$O$^$@@9b%;%-%e%j%F%#$G$O$J$$!K!"(J
$B$@@$+$i8=:_!"(Jcert $B$N(J FQDN $B$,4|BT$5$l$k(J IP $B$HBP1~$7$F$$$k$+$rD4$Y$k$N$K(J
DNS $B$r;H$C$F$bJ]>Z$K$O$J$i$J$$!#<B$O(J isakmpd $B$O$3$l$r(J DNS $B$K$-$$$?$j$7$J$$!#(J
DNS $B$,0BA4$G$b!"(JUFQDN$B$r;H$C$F$$$k>l9g$K$O(J
$B$3$l$r%A%'%C%/$G$-$J$$!#(J
<p>
$B$D$^$j(J ID $B$H$7$F(J FQDN $B$r;H$&>l9g!"%"%?%C%+!<$O(J
$B<+J,$NHkL)80$rMQ0U$7$F!"$=$l$r$o$l$o$l$N;H$&$N$H(J
$BF1$8(J CA $B$K=pL>$5$;$k!J$G$b$b$A$m$s%"%?%C%+!<<+?H$N(J FQDN $B$r;H$C$F(J)$B!#$=$l$+$i(J
$B%T%"$K(J DoS $B967b$r$7$+$1$F%@@%&%s$5$;$k(J ($B<B$O(J
ISAKMP $B%W%m%H%3%k<+BN$K7g4Y$,$"$C$F!"%T%"$KBP$7$F(J
$B%j%b!<%H(JDoS $B$r;E3]$1$F%@@%&%s$5$;$F$7$^$($k2DG=@@-$,$"$k$1$l$I!"(J
isakmpd $B$,$3$&$$$&967b$KBP$7$F$I$N$/$i$$IR46$+$OCN$i$J$$(J)$B!#$=$l$+$i(J
$B%"%?%C%+!<$O<+J,$N%3%s%T%e!<%?$r$o$l$o$l$N%T%"$HF1$8$h$&$K@@_Dj$7$F!"(J
$B%T%"$N%M%C%H%o!<%/$K$D$J$$$G(J
$B<+J,$N(JID$B$HHkL)80$H>ZL@@=q$r;H$($k!#(J
<p>
$B$\$/$?$AB&$N(J isakmpd $B$O!"$3$C$A$N%T%"$X$N(J ID $B$,2?$+$r65$o$C$F$$$J$$!J$=$7$F$=$l$O!"%"%?%C%+!<$,(J
$B>ZL@@=q$H(JID$B$HHkL)800J30$O$^$C$?$/F1$8@@_Dj$K$7$F$*$$$?$+$i!K!#$5$i$K$\$/$?$A$N(J
isakmpd $B$O>ZL@@=q$,F1$8(J CA $B$N%5%$%s$7$?$b$N$@@$H%A%'%C%/$G$-$k!J$G$b(J
$BB?$/$N(J CA $B$O(Jcert $B$r$$$C$Q$$%5%$%s$9$k$+$i!"(Jcert $B$r<j$KF~$l$k$N$O$`$:$+$7$/$J$$$+$b!K!#$=$7$F(J
$B$=$3$G<($5$l$?(J ID $B$,>ZL@@=q$NCf$N(J ID $B$H$$$C$7$g$J$N$b3NG'$G$-$k!#$G$b!"(J
$B$3$l$^$GDs<($5$l$?@@_Dj$G$O!"$=$N(J ID $B$,4|(J
$BBT$7$F$$$?(J ID $B$+$I$&$+$O%A%'%C%/$G$-$J$$!#$@@$+$i%"%?%C%+!<$O@@\B3$rG'$a$i$l$F$7$^$&!#(J
<p>

<h3>$B967b$r$U$;$0(J</h3>

$B$9$k$HLdBj$O!"$I$&$d$C$?$i(J isakmpd $B$K4|BT$9$Y$-(J ID $B$N$3$H$r65$($F$"$2$i$l$k$+!"(J
$B$H$$$&$3$H$@@!#$"$j$,$?$$$3$H$K$3$l$O4JC1$G!"(J
<A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.policy&sektion=5">isakmpd.policy(5)</a>$B$K$b@@bL@@$5$l$F$$$k!#(J
policy$BFb$G%A%'%C%/$r$+$1$J$-$c$$$1$J$$$N$@@!#(J
$B$?$H$($P$3$s$J$U$&$K(J:
d1554 1
a1554 1
        CzA             $B$3$NItJ,$,(J CA $B>ZL@@=q$G$4$6$$$^$9$J(J          AQEB\
d1569 3
a1571 3
$B$3$l$G!"(JIPsec$B@@\B3$rF@@$i$l$k$N$O(J gw.worksite.se $B$@@$1$N$O$:!#$[(J
$B$+$K(J remote_id$B$N%A%'%C%/$rB-$;$P!"5v2D$5$l$k(JID$B$O4JC1$KA}$($k!#(J
$B$D$^$j0J2<$N$h$&$J$N$r(J policy $B$KB-$;$P$$$$(J:
d1583 2
a1584 2
$B$3$N(J policy $B$@@$H!"(Jgw.worksite.se, gw.somesite.se$B!"(J
gw.whatsite.se $B$N$$$:$l$b@@\B3$G$-$k!#(J
d1587 17
a1603 17
policy $B$K>ZL@@=q4]$4$H4^$a$J$/$F$O$J$i$J$$$N$O;DG0!"(J
$B$H$$$&?M$b$$$k$@@$m$&!#>ZL@@=q$r(J policy $B$K(J
$BF~$k$h$&$J7A<0$K$J$*$9$N$O<j4V$@@$7!"(J
policy $B$bFI$_$K$/$/$J$k!#$@@$l$+$,$^$A$,$C$F!"(J
$B$d$d$3$7$$(J policy $B$N$J$+$G!"(JCA $B>ZL@@=q$H$^$A$,$($F(J
$B%f!<%6>ZL@@=q$rF~$l$F$7$^$C$?$i!"8"8B$N$J$$%f!<%6$b(J
$B@@\B3$,G'$a$i$l$F$7$^$&$+$b$7$l$:!"$5$i$K:$$C$?$3$H$K!"(J
policy $B%U%!%$%k$r8+$F$b$=$l$r$D$-$H$a$k$N$O$`$:$+$7$$(J (X.509 $B>ZL@@=q$O(J
$B?M4V$KFI$a$k7A$G$O$J$$$+$i(J)$B!#(J

<p>
$B$5$F!"K\Ev$K%+%j%+%j$N:G@@hC<$N?M$?$A$K$O!"(J
$B$3$NLdBj$N2r7hJ}K!$,$"$k!#$$$^$G$O!"(Jpolicy $BFb$G>ZL@@=q$=$N$b$N$N$+$o$j$K!"(J
$B>ZL@@=q$N(JDistinguished Name (DN) $B$r;H$&$3$H$,$G$-$k!JBP1~$9$k(J
$B>ZL@@=q$O$b$A$m$s%G%#%9%/>e$N(J certs
$B$+(J ca $B%G%#%l%/%H%j$K$"$C$F!"(Jisakmpd $B$,8+$D$1$i$l$k$h$&$K$J$C$F$$$k$3$H(J)$B!#$3$N(J
$B7A<0$@@$H!">e$N(J policy $B$O0J2<$N$h$&$J46$8$K$J$k$@@$m$&(J:
d1621 3
a1623 3
$B$:$C$HFI$_$d$9$$!"$G$7$g!)!!$"$k>ZL@@=q$N@@53N$J(J DN
$B$O!"(Jopenssl $B%f!<%F%#%j%F%#$r;H$C$F>ZL@@=q$r8+$F$d$k$H$o$+$k!#(J
$B$3$s$J6q9g(J:
d1629 22
a1650 22
$B$b$C$HJ#;($J(J policy $B$O$b$A$m$s$G$-$k$1$l$I!"(J
$B$3$l$O$H$j$"$($:F~Lg$@@$7!"<!$N@@a$GJL$NNc$r8+$F(J
$B$d$k$3$H$K$J$k!#(J
<p>
$B$3$l$G(J ca.crt $B$NCf$N>ZL@@=q$K$D$$$FI,MW$J>pJs$,(J
$BDs6!$5$l$k$O$:$@@!#(Jpolicy $B$,>.$5$$$+!"$=$3$=$3$/$i$$$J$i(J
$B$3$l$G$b$$$$$@@$m$&!#$G$b5pBg$J%5%$%H$G@@\B3%f!<%6$,;3$[$I$$$k$J$i!"(J
$B$3$l$G$b$^$@@$^$@@$@@!#(J

<H2>$B%^%k%A%f!<%6@@_Dj$H!"Cf1{4IM}7?G'>Z(J</h2>

$B$=$l$8$c(J isakmpd $B$N%[%s%H$K%/!<%k$J5!G=$r$$$/$D$+8+$F$d$m$&!#$3$l$^$G$O!"(J
$B@@\B3$7$F$/$k$O$:$N%T%"$O$h$/CN$i$l$F$$$F!"(JIP$B%"%I%l%9$b@@EE*$K8GDj$5$l$F$$$k$b$N$H$7$?!#(J
$B$G$b!"$=$&$$$&>l9g$P$+$j$8$c$J$$!#F0E*$K3d$jEv$F$i$l$?(JIP$B$r;H$C$?$j!"(J
$B%3%s%T%e!<%?$r2?Bf$b;H$C$?$j$9$k?M$OB?$$!#$"$k$$$O!J%5!<%P(J
$B$J$s$+$@@$H!K@@\B3$7$?$$$N$,$@@$l$J$N$+!"$O$C$-$j$o$+$i$J$$$3$H$b$"$k!#(J

<p>
$B$=$3$G(Jisakmpd$B$N$9$F$-$J5!G=$N0l$D$O!"(J
[Phase 1]$B%;%/%7%g%s$G(JIP$B$G$O$J$/%G%U%)%k%H$N%?%0$r;H$($k$H$$$&$b$N!#(J
$B$3$l$K$h$C$F!"(Jisakmpd$B$O$I$N(JIP$B$+$i$G$b%M%4%7%(!<%7%g%s$r<u$1IU$1$i$l$k$h$&$K$J$k!#(J
$B$3$l$O$3$s$J46$8$K$J$k!'(J
d1659 12
a1670 12
$B$^$:8@@$C$F$*$/$Y$-$J$N$O!"$3$N@@_Dj$O(JDoS$B967b$KBP$7$F(J
$B0BA4$G$O$J$$$+$b$7$l$J$$$H$$$&$3$H!#$^$($K$b8@@$C$?$h$&$K!"(J
ISAKMP/IKE$B%W%m%H%3%k$K$O7g4Y$,$"$k!#$$$:$l$K$7$F$b!"%G%U%)%k%H$N(J [phase 1] $B%;%/%7%g%s$r;H$($P!"(J
$B0l<o$N!VG'>Z>ZL@@=q!W$,JQ$o$j$K;H$($k$h$&$K$J$k!#(J
<p>
$B$?$H$($P8"8B$r;}$D%f!<%6$O$?$/$5$s$$$k$1$l$I!"(J
$B$G$bC/$G$b$$$$$+$i$&$1$D$1$k!"$H$$$&$o$1$G$O$J$$>l9g$r9M$($F$_$h$&!#$?$H$($P2q<R$J$s$+$N>l9g!#(J
$B2q<R$N=>6H0w$O@@\B3$5$;$?$$$1$l$I!"$=$l0J30$N?M$K$O@@\B3$7$F$[$7$/$J$$!#$5$F!"(J
$BBg4k6H$G<R0w$,2?@@i?M$b$$$k$H$7$h$&!#$+$l$i$,(J
$B$I$N%3%s%T%e!<%?$+$i$G$b!J<RFb(JLAN$B>e$N$b$N$K8B$i$:!K@@\B3$G$-$k$h$&$K$7$?$$$1$l$I!"(J
$BA40w$,$J$s$G$b$G$-$k$h$&$K$O$7$?$/$J$$!#$3$N>l9g!"(J
$B<!$N$h$&$J(Jpolicy $B$,=q$1$k$O$:$@@!'(J
d1710 10
a1719 10
$B$3$l$O87L)$K@@5$7$$$+$I$&$+$O$o$+$i$s!#$\$/$,CN$k8B$j!"(J
$B$3$$$D$O$^$C$?$/%F%9%H$7$F$$$J$$!J$@@$+$i$3$N%U%#%k%?>r7o$O!"$\$/$N;W$$DL$j$K$O(J
$B$<$s$<$sF0$+$J$$$+$b$7$l$J$$!K!#$=$l$H!"$3$$$D$_$?$$$J(Jpolicy $B!J$H$$$&$+!"(J
$B%G%U%)%k%H$,%T%"$N(JIP$B$K$7$F$"$k$b$N$9$Y$F!K$O!"(Jisakmpd.conf$B%U%!%$%k$b$"$o$;$F=q$-49$($J$$$H(J
$B%@@%a$@@!#$3$l$K$O!"%;%-%e%j%F%#>e$NLdBj$b$D$$$F$^$o$k!#$5$i$K!"(J
$B$@@$l$G$b@@\B3$G$-$k$h$&$K$J$C$F$$$k$3$N<o$N@@\B3$G$O!"(J
$B$?$V$s@@\B3$7$??M$N(J DN $B$O$9$Y$F%m%0$7$F$*$$$?$[$&$,(J
$BK>$^$7$$!#(Jisakmpd $B$O$\$/$NCN$k8B$j$G$O!"$3$l$r$^$@@%5%]!<%H$7$F$$$J$$!#$5$i$K(J
$B$3$N2DG=@@-$K$O$Y$D$N%;%-%e%j%F%#>e$NLdBj$,$D$$$F$/$k$+$b$7$l$J$$!#$J$K$+$"$C$F$b!"(J
$B$@@$l$b@@UG$$O$H$C$F$/$l$J$$$N$G!"3P8g$7$F?J$`$h$&$K!#$G$b4pK\E*$J9M$(J}$O$b$&$O$C$-$j$7$F$$$k$O$:$@@!#(J
d1723 14
a1736 14
$B$$$^$N$,;}$C$F$$$k!"<B$K$*$b$7$m$$2DG=@@-$K;W$$Ev$?$i$J$$?M$,$$$k$H%"%l$@@$+$i!"G0$N$?$a@@bL@@$7$F$*$3$&!"(J
$B$b$7$3$&$$$&7A$G(JISAKMP/IKE $B$r;H$C$F$$$k%3%s%T%e!<%?$,$9$Y$F!"(J
$B%j%b!<%H$+$i%f!<%6$,;H$$$?$$$H;W$C$F$$$k%5!<%S%9$N$=$l$>$l$K$D$$$F!">r7o$NB+$r;}$C$F$$$?$H$7$h$&!#$9$k$H(J CA $B$O!"(J
$B%f!<%6$N>ZL@@=q$K$7$+$k$Y$-(J SubjectAltName
extension $B$rF~$l$F$*$/$@@$1$G$=$N%f!<%6$NG'>Z$,$G$-$k!#$5$i$K!"$=$&$$$&>ZL@@=q$NM-8z4|8B$r(J
$BHf3SE*C;$$$b$N$K$7$F$*$$$F!"%f!<%6$O(J
$B>ZL@@=q$,8E$/$J$C$F$-$?$i>ZL@@=q$r:FH/9T$7$F%@@%&%s%m!<%I$G$-$k$h$&$K(J
$B$7$F$*$/!#$b$7%f!<%6$,8"8B$r0-MQ$9$k$J$i!"(J
$B>ZL@@=q$r:FH/9T$7$J$$$h$&$K$9$l$P!"M-8z4|8B8e$OF~$C$F$3$i$l$J$$!#(J
$B<R0w$,0l?M$d$a$?$/$i$$$G!"(J
$B$9$Y$F$N%3%s%T%e!<%?>e$N(Jpolicy$B%U%!%$%k$rJQ$($kI,MW$b$J$$!#(J
$BF1$8J}<0$O(JISAKMP/IPsec $B0J30$NL\E*$K$b;H$($k$O$:$@@!J%*%U%i%$%s%7%9%F%`$NG'>Z$5$($G$-$k!*!K!#(J
$B$?$@@$7$=$N>l9g$K$OFCJL$J%=%U%H$,I,MW$K$J$k$1$l$I!#(J
$B$H$K$+$/!#$3$l$r$d$kAH?%$O$*$=$i$/<+J,$G<+J,<+?H$N(JCA$B$K$J$C$?$[$&$,$$$$!#(J
d1740 8
a1747 8
$B$3$&$$$&%^%k%A%f!<%6@@_Dj!J%b%P%$%k%f!<%6!K$O!"(J
$B;vA06&M-80$G$b$G$-$&$1$l$I!"$G$b$=$l$@@$H!"$I$N(JIP$B$+$i@@\B3$7$F$/$k$+$o$+$i$J$$$+$i!"(J
ID$B$r$b$H$K@@5$7$$%Q%9%o!<%I$,A*$Y$k$h$&$K$J$C$F$$$kI,MW$,$"$k!#(J
$B$@@$+$i(JID_PROT$B%b!<%I$G$O$J$/(JAGGRESSIVE $B%b!<%I$r(J
$B;H$o$J$/$F$O$J$i$J$$(J(AGGRESSIVE $B%b!<%I$G$O!"(JID$B$O%M%4%7%(!<%7%g%s$N(J
$B=i4|$NCJ3,$GAw$i$l$k$1$l$I!"0E9f2=$5$l$J$$$GAw$i$l$k!#$@@$+$i(J
AGGRESSIVE $B%b!<%I$N$[$&$,%a%C%;!<%88r49$,>/$J$/$F$9$`$N$G!"9bB.$@@$1$l$I!"(J
ID$B$,%J%^$N$^$^$GAw$i$l$k$+$i$A$g$C$H%;%-%e%j%F%#$O2<$,$k!K!#(J
d1749 2
a1750 1
<P>
d1752 1
a1752 1
<h1>13.10 - isakmpd$B$G;H$($k(JIKE $B%/%i%$%"%s%H$O(J?</h1>
d1755 30
a1784 32
<tt>isakmpd</tt> $B$O!"(JOpenBSD $B$K$D$$$F$/$k(J ISAKMP/Oakley $B804IM}%G!<%b%s$@@!#(J
$B$?$V$s!"$[$H$s$I$N(J ISAKMP $B<BAu$H$O!"ItJ,E*$K$;$hAj8_1?MQ2DG=$@@$H;W$&$1$l$I!"(J
$B<B:]$K%F%9%H$5$l$?$N$O0J2<$N$b$N$@@!#=P2s$C$F$$$k(J
isakmp $B%=%U%H$N0lIt$O!"<B$O(J OpenBSD isakmp $B%G!<%b%s$r%Y!<%9$K$7$?$b$N$@@$C$?$j$9$k!#(J
<P>
$B0J2<$N(J MS-Windows $B%/%i%$%"%s%H$O!"8_49@@-$,$"$k$H$NJs9p$,$"$k(J:
<UL>
<LI><A HREF="http://www.timestep.com/">TimeStep</a> PERMIT/Client
<LI><A HREF="http://www.vpcom.com/">Ashley Laurent</a> VPCom VPN $B%=%U%H%&%'%"(J
<LI><A HREF="http://www.nai.com/asp_set/products/tns/pgp_vpn.asp">PGP VPN</a> $B%=%U%H%&%'%"(J
<LI><A HREF="http://www.radguard.com/">Radguard</a> cIPro $B%/%i%$%"%s%H(J
<LI><A HREF="http://www.cisco.com/">Cisco</a> IRE $B%/%i%$%"%s%H(J
<LI><A HREF="http://www.microsoft.com">Microsoft</a> Windows 2000 (Transport $B%b!<%I$N$_(J)
</UL>
<P>
$B0J2<$N%2!<%H%&%'%$(J/$B%k!<%?$b8_49@@-$,$"$k$H$NJs9p(J:
<UL>
<LI><A HREF="http://www.cisco.com/">Cisco</a> IOS
<LI><A HREF="http://www.cisco.com/">Cisco</a> PIX
<LI><A HREF="http://www.intel.com/">Intel</a> LanRover
<LI><A HREF="http://www.timestep.com/">TimeStep</a> PERMIT/Gate
<LI><A HREF="http://www.cendio.com/">Cendio</a> Fuego
<LI><A HREF="http://www.kame.net/">KAME</a> for FreeBSD
<LI><A HREF="http://www.xs4all.nl/~freeswan/">FreeS/WAN</a> for Linux
<LI><A HREF="http://www.axent.com/">Axent</a> Raptor
<LI><A HREF="http://www.ericsson.com/">Ericsson</a> eBox
<LI><A HREF="http://www.radguard.com/">Radguard</a> cIPro-VPN
<LI><A HREF="http://www.f-secure.com/">F-Secure</a> VPN+
<LI><A HREF="http://www.teamware.com/">Teamware</a> TWISS
<LI><A HREF="http://www.3com.com/">3com</a> Pathbuilder
<LI><A HREF="http://www.nortelnetworks.com/">Nortel</a> Contivity
<LI><A HREF="http://www.checkpoint.com/">CheckPoint</a> FW-1
d1786 4
a1789 2
<P>
<a name= "13.11">
d1791 4
a1794 1
</a>
d1796 6
a1801 9
IPsec $B%H%i%V%k%7%e!<%F%#%s%0$N:G=i$N%D!<%k$O(J <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&apropos=0&sektion=8&format=html">tcpdump(8)</a>$B$@@!#(J
<tt>tcpdump</tt> $B$r;H$C$F$$$/$D$+C5$9$Y$-$b$N$r5s$2$k$H!'(J
<P>
$B$^$:(JOpenBSD$B$N(J tcpdump $B$r;H$C$F$$$k?M$O!"(J
$B3HD%HG$N(J tcpdump $B$r;H$C$F$$$k$N$G!"(J
ESP $B$H(J AH $B%Q%1%C%H$K$D$$$F$b>pJs$,$H$l$k!#$b$7(J OpenBSD
2.5 $B$dB>$N(J OS $B$N(J tcpdump $B$r;H$C$F$$$k$J$i!"$?$V$s8E$$(J
$B%P!<%8%g%s$@@$+$i(J AH $B$d(J ESP$B$K$D$$$F$O%W%m%H%3%kHV9f$7$+I=<($5$l$J$$(J
(ESP $B$O(J IP $B%W%m%H%3%k(J 50, AH $B$O(J 51)$B!#(J
d1805 4
a1808 4
tcpdump $B$G$O!"%H%i%U%#%C%/$,(J AH/ESP $B$r;H$C$F$$$k$+J?J8$N$^$^$+$r3N$+$a$h$&!#(J
$BJ?J8$N$^$^$J$i!"%U%m!<$,$A$c$s$H@@_Dj$5$l$F$$$J$$$+!"(J
isakmp $B$N%M%4%7%(!<%7%g%s$,$&$^$/$$$C$F$$$J$$!#(J<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ping&apropos=0&sektion=8&format=html">ping(8)</a>$B$r;H$C$F(J
$B4JC1$J%H%i%U%#%C%/$rH/@@8$5$;$F$_$h$&!#(J
d1811 2
a1812 2
$B$?$H$($P!"(J208.1.1.1 $B$H(J 208.2.2.2 $B$N#2$D$N%[%9%H$,$"$k!#(J
208.2.2.2 $B$K%m%0%*%s$7$F!"0J2<$r$d$C$F$_$h$&(J:
d1823 1
a1823 1
$BJL$N%;%C%7%g%s$G$O!"(Jencapsulated $B$5$l$?(Jping$B$,8+$i$l$k(J:
d1838 2
a1839 2
<LI>ISAKMP $B$O(JUDP port 500$B$G<B9T$5$l$k!#$b$7$3$l$,%U%!%$%"!<%&%)!<%k$+(J
$B%Q%1%C%H%U%#%k%?$G%m%C%/%"%&%H$5$l$F$$$?$i!"$3$l$rJQ$($k$3$H!*(J
d1850 1
a1850 1
<LI>Photuris $B$O(J UDP port 468 $B$GF0$/!#9M$($k$N$OF1$8$3$H$@@$1$l$I!"%W%m%H%3%k$O(J ah$B$@@!#(J
d1862 1
a1862 1
isakmpd $B$K%G%P%C%0$rA4It$D$1$k$J$i!"<!$N$h$&$K$7$F<B9T$7$h$&!'(J
d1867 1
a1867 1
$B$"$k$$$O!J$$$A$P$s>\$7$$%?%$%^!<%G%P%C%0>pJs$r$H$P$9$K$O!K(J
d1873 2
a1874 2
<LI>IPsec$B$G=hM}$5$l$?%H%i%U%#%C%/$r!"(JnetB$B$+$i<+J,$N%m!<%+%k$N%U%!%$%"!<%&%)!<%kJ]8n$D$-(JnetA$B$K(J
$BF~$l$k$h$&$K$7$F$d$kI,MW$,$"$k!#(J
d1880 2
a1881 2
<LI>OpenBSD $B$N(J tcpdump $B$@@$H!"$[$H$s$I$N%$%s%?!<%M%C%H(J
$B808r49!J<+F0808r49!K%;%C%7%g%s$NJ?J8ItJ,$O$[$H$s$I%G%3!<%I$G$-$k!#(JTcpdump $B$O$^$?(J AH $B%Z%$%m!<%I%G!<%?$bI=<($9$k!#(J
d1883 1
a1883 1
<LI>/kern $B%U%!%$%k%7%9%F%`$r%^%&%s%H$7$h$&!J$b$7$9$G$K%G%U%)%k%H$G;H$C$F$$$J$$$J$i!K!'(J
d1889 4
a1892 4
/kern $B$K$O!"8=:_$N(J SA/SPI $B0lMwI=$,$"$C$F!"%U%m!<$,$"$k$b$N(J
$B!J309T$-$N(J SA$B!K$b$J$$$b$N!JF~$C$F$/$k(J SA)$B$b5-=R$5$l$F$$$k!#(J
$B$^$?$I$s$J%H%i%U%#%C%/$,$I$3$X9T$C$F$$$k$N$+$7$i$Y$i$l$k!"%H%i%U%#%C%/%+%&%s%?$b(J
$B$"$k!#(J
d1894 1
a1894 1
<LI>$B:G8e$K!"(J <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=netstat&apropos=0&sektion=1&format=html">netstat(1)</a> $B$r;H$C$F(J SA$B$r8+$k$3$H$,$G$-$k!#(J
d1912 5
a1916 5
$B$3$l$@@$1$d$C$F$b%@@%a$J$i!"(J<tt>option ENCDEBUG</tt>$B$D$-$G%+!<%M%k$r%3%s%Q%$%k$7$J$*$9$3$H!#(J
$B$=$l$+$i(J <tt>net.inet.ip.encdebug</tt> $B$r(J 1 $B$K$9$k!#$=$7$F(J dmesg $B$r8+$F(J
$B7Y9p$d%(%i!<$r$5$,$7!"$=$l$r(J <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendbug&apropos=0&sektion=1&format=html">sendbug(1)</a>$B$r;H$C$F(J
OpenBSD $B%G%Y%m%C%Q!<$KJs9p$7$h$&!#(J $B$"$k$$$O$b$7$=$l$,(J
$B%P%0$+$I$&$+$o$+$i$J$+$C$?$i!"(J you may want to send a message to one of the <A HREF="../mail.html">$B%a!<%j%s%0%j%9%H(J</a>$B$N$I$l$+$K%a%C%;!<%8$rEj$2$F$_$h$&!#(J
d1918 6
a1923 4
<P>
<a name= "13.12">
<h1>13.12 - $B4XO"%I%-%e%a%s%F!<%7%g%s(J</h1>
</a>
d1925 1
a1925 1
IPsec $B$,FC$K>\$7$/@@bL@@$7$F$"$k$N$O(J
d1927 20
a1946 20
$B%Z!<%8$@@!#3F<o$N@@_Dj%F%s%W%l!<%H$,(J <A HREF="http://www.openbsd.org/cgi-bin/cvsweb/src/share/ipsec/">/usr/share/ipsec/</a>
$B%G%#%l%/%H%j$K$"$k$N$GLr$K$?$D$@@$m$&!#(J
<A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=enc&sektion=4">enc(4)</a>,
<A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&sektion=4">ipsec(4)</a>,
<A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsecadm&sektion=8">ipsecadm(8)</a>,
<A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=photurisd&sektion=8">photurisd(8)</a>,
<A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=startkey&sektion=1">startkey(1)</a>,
<A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&sektion=8">isakmpd(8)</a>,
<a HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.conf&sektion=5">isakmpd.conf(5)</a> and
<a HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd.policy&sektion=5">isakmpd.policy(5)</a>
$B$N(Jman$B%Z!<%8$b>\$7$/$F!"(JIPsec$B$N@@_Dj$H1?MQ$KLrN)$D$O$:$@@!#(J
<P>
$B$=$NB>%j%s%/$H$7$F!D!D(J
<UL>
<LI><A HREF="http://www.ietf.org/html.charters/ipsec-charter.html">IETF IPsec Working Group</a>
<LI><A HREF="http://isakmp-test.ssh.fi/">SSH IPsec interoperability Test Node</a>
<LI><A HREF="http://ipsec-wit.antd.nist.gov/">NIST IPsec Web Based Interoperability Tester</a>
<LI><A HREF="http://www.r4k.net/ipsec/">A port of OpenBSD's IPsec to FreeBSD</a>
<LI><A HREF="http://www.xs4all.nl/~freeswan/">FreeS/WAN - IPsec for Linux</a>
<LI><A HREF="http://www.codetalker.com/greenbox/docs/vpn-24-minifaq.html">OpenBSD 2.4 VPN Configuration Mini-FAQ</a>
d1950 1
a1950 1
$B$=$7$F$D$E$-$^$7$F$O(J RFC$B$I$b(J...</a>
d1952 30
a1981 30
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc1320.html">RFC 1320</a> - The MD4 Message-Digest Algorithm
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc1321.html">RFC 1321</a> - The MD5 Message-Digest Algorithm
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc1828.html">RFC 1828</a> - IP Authentication using Keyed MD5
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc1829.html">RFC 1829</a> - The ESP DES-CBC Transform
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2040.html">RFC 2040</a> - The RC5, RC5-CBC, RC5-CBC-Pad, and RC5-CTS Algorithms
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2085.html">RFC 2085</a> - HMAC-MD5 IP Authentication with Replay Prevention
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2104.html">RFC 2104</a> - HMAC: Keyed-Hashing for Message Authentication
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2144.html">RFC 2144</a> - The CAST-128 Encryption Algorithm 
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2202.html">RFC 2202</a> - Test Cases for HMAC-MD5 and HMAC-SHA-1 
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2207.html">RFC 2207</a> - RSVP Extensions for IPsec Data Flows
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2268.html">RFC 2268</a> - A Description of the RC2 Encryption Algorithm 
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2367.html">RFC 2367</a> - PF_KEY Key Management API, Version 2
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2401.html">RFC 2401</a> - Security Architecture for the Internet Protocol (<b>IPsec</b>)
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2402.html">RFC 2402</A> - IP Authentication Header (<b>AH</b>)
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2403.html">RFC 2403</A> - The Use of HMAC-MD5-96 within ESP and AH
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2404.html">RFC 2404</A> - The Use of HMAC-SHA-1-96 within ESP and AH
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2405.html">RFC 2405</A> - The ESP DES-CBC Cipher Algorithm With Explicit IV
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2406.html">RFC 2406</A> - IP Encapsulating Security Payload (<b>ESP</b>)
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2407.html">RFC 2407</A> - The Internet IP Security Domain of Interpretation for ISAKMP
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2408.html">RFC 2408</A> - Internet Security Association and Key Management Protocol (<b>ISAKMP</b>)
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2409.html">RFC 2409</A> - The Internet Key Exchange (<b>IKE</b>)
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2410.html">RFC 2410</A> - The NULL Encryption Algorithm and Its Use With IPsec (ha ha...)
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2411.html">RFC 2411</A> - IP Security Document Roadmap
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2412.html">RFC 2412</A> - The OAKLEY Key Determination Protocol
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2451.html">RFC 2451</a> - The ESP CBC-Mode Cipher Algorithms
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2522.html">RFC 2522</a> - Photuris: Session-Key Management Protocol
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2523.html">RFC 2523</a> - Photuris: Extended Schemes and Attributes
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2631.html">RFC 2631</a> - Diffie-Hellman Key Agreement Method
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2709.html">RFC 2709</a> - Security Model with Tunnel-mode IPsec for NAT Domains
</UL>
d1984 3
a1986 3
<a href= "index.html">[FAQ $B%H%C%W$X(J]</a>
<a href= "faq12.html">[12.0 - $B9bEY$J%f!<%68~$1(J]</a>
<a href= "../faq14.html">[14.0 - OpenBSD $B$N%O!<%I%G%#%9%/(J]</a>
d1994 1
a1994 1
Originally [OpenBSD: faq13.html,v 1.46 ]
d1996 1
a1996 1
$Translation: faq13.html,v 1.3 2002/01/12 04:09:11 tueda Exp $
d1998 1
a1998 1
$OpenBSD: faq13.html,v 1.46 2001/12/23 03:09:52 miod Exp $
@


1.2
log
@sync with badlands translation CVS.
@
text
@d3 1
a3 1
<title>13.0 - IPSec $B$r;H$&(J</title>
d10 1
a10 1
 <meta http-equiv="Content-Type" content="text/html; charset=iso-2022-jp">
d16 1
a16 1
<h1><font color=#e00000>13.0 - IPSec (IP Security Protocol) $B$r;H$&(J</font></h1>
d22 3
a24 3
<LI><A HREF="#13.1">13.1 - IPSec$B$C$F2?(J?</A></LI>
<LI><A HREF="#13.2">13.2 - $B$=$j$c7k9=$@@$1$l$I!"$3$N$\$/$,$J$<(J IPSec $B$J$s$+;H$o$K$c$J$i$s$N(J?</A></LI>
<LI><A HREF="#13.3">13.3 - IPSec$B$NN"$K$"$k%W%m%H%3%k$O(J?</A>
d26 2
a27 2
<LI><A HREF="#13.5">13.5 - IPSec $B$N@@_Dj(J</A>
<LI><A HREF="#13.6">13.6 - IPSec $B$r<jF080@@_Dj$G;H$&$K$O(J?</A>
d32 1
a32 1
<LI><A HREF="#13.11">13.11 - IPSec/VPN $B$N%H%i%V%k%7%e!<%F%#%s%0(J</A>
d41 1
a41 1
<LI><A HREF="http://www.freebsd.org/~julian/IPSEC_4_Dummies.html">IPSec for Dummies</a> by Julian Elischer
d49 1
a49 1
<h1>13.1 - IPSec$B$C$F$J$K(J?</h1>
d52 1
a52 1
IPSec $B$O!"(JIP $B%W%m%H%3%k%U%!%_%j!<$KBP$9$k3HD%$@@!#(J
d54 1
a54 1
$B40A4@@-!J(Jintegrity$B!K!"%"%/%;%9@@)8f!"5!L)@@-$,Ds6!$5$l$k!#(JIPSec $B$O(J
d57 1
a57 1
$B%"%W%j%1!<%7%g%s$N$[$&$G$O(J IPSec $B$r;H$&$N$K!"(JIPSec $B$N$3$H$r2?0l$DCN$i$J$/$F$$$$!"(J
d59 2
a60 2
IPSec $B>e$G$O(J<a href="http://www.openbsd.org/cgi-bin/cvsweb/src/etc/protocols?rev=1.8">$B$"$i$f$k(J IP $B%W%m%H%3%k(J</a>$B$r;H$($k!#0E9f2=%H%s%M%k(J (VPN) $B$b:n$l$k$7!"%3%s%T%e!<%?4V$GC1=c$J0E9f2=$r$7$F$b$$$$!#(J
$B%*%W%7%g%s$,<B$K$$$m$$$m$"$k$;$$$G!"(JIPSec $B$O$A$g$C$H$d$d$3$7$$$N$G$"$k(J ($B$=$l$b(J SSL $B$h$j$:$C$H(J!)
d62 1
a62 1
IPSec $B$r;H$&A0$K!"(J
d67 1
a67 1
$BO@@M}E*$K$O!"(JIPSec $B$O0J2<$N$I$s$J7A$G$b5!G=$9$k(J:
d77 1
a77 1
$B$3$l$+$i8+$k$h$&$K!"(JIPSec $B$O(J VPN $B@@\B3MQ$K%H%i%U%#%C%/$r%H%s%M%k$G$-$k!#(J
d83 1
a83 1
<h1>13.2 - $B$=$j$c7k9=$@@$1$l$I!"$3$N$\$/$,$J$<(J IPSec$B$J$s$+;H$o$K$c$J$i$s$N(J?</h1>
d88 2
a89 2
IPSec $B$O$3$l$r2r7h$7$h$&$H$9$k!#0J2<$N%5!<%S%9$O$=$l$>$lFHN)$H9M$($i$l$F$$$k$1$l$I!"(J
IPSec $B$O$=$l$rE}0lE*$J7A$G%5%]!<%H$7$F$$$k!#(J
d119 1
a119 1
<h1>13.3 - IPSec $B$NN"$K$"$k%W%m%H%3%k$O(J?</h1>
d122 1
a122 1
IPSec $B$O!"5!L)@@-!"40A4@@-!"(Jauthenticity$B!J@@5??@@-!K!":FAwJ]8n$rDs6!$9$k$N$K!"(J
d157 1
a157 1
<P>IPsec $B5!G=$N!J$[$H$s$I!KFHN)$7$?ItJ,$,!"(JIPSec encapsulation $B$r(J
d178 1
a178 1
<P>IPSec $B$GJ]8n$5$l$?%j%s%/$O!"(J<B>Security Associations
d251 1
a251 1
<h1>13.5 - IPSec $B$N@@_Dj(J</h1>
d254 1
a254 1
<P>IPSec $B%7%9%F%`$H%2!<%H%&%'%$$,$I$&@@_Dj$5$l$k$+$O!"$"$kDxEY$O@@_7W<T$^$+$;$K(J
d260 1
a260 1
OpenBSD$B$N(J IPSec$B%=!<%9%3!<%I$NCf$G$O!"(JTDB $B$^$?$O(J TDB table $B$H8F$P$l$F$$$k!K$G!"(J
d278 2
a279 2
<P>$B!!(JSPD $B$O$^$?$I$N%H%i%U%#%C%/$,(J IPSec $B$r%P%$%Q%9$9$Y$-$+!"$^$?$I$N%H%i%U%#%C%/$r(J
$B<N$F$k$Y$-$+$r;XDj$G$-$k$N$G!"F~$C$F$/$kHs(J IPSec $B$N%H%i%U%#%C%/$K$D$$$F$b;2>H$5$l$J$/$F$O$J$i$J$$!#(J
d293 1
a293 1
<LI>IPSec $B%W%m%H%3%k(J(AH $B$+(J ESP)
d313 1
a313 1
IPSec $B%;%C%7%g%s$O$3$N$I$A$i$+!"$"$k$$$ON>J}$r;}$?$J$-$c$J$i$J$$!#$I$A$i$N%X%C%@@$b$J$7$GDj5A$5$l$k$3$H$O(J
d337 1
a337 1
<h1>13.6 - $B<jF080@@_Dj$G(J IPSec $B$r@@_Dj$9$k$K$O$I$&$9$k$N(J?</h1>
d340 1
a340 1
IPSec$B$N<j;O$a$H$7$F$$$A$P$s$+$s$?$s$J$N$,<jF080@@_Dj$@@!#(J
d448 1
a448 1
$B$3$l$O(JIPSec$B$r;H$$;O$a$k4JC1$J$d$j$+$?$@@!#(J
d450 1
a450 1
IPSec $B$r;H$($P!"%W%i%$%Y!<%H(J IP $B%"%I%l%96u4V$r%$%s%?!<%M%C%H$4$7$K$D$J$2$k!#(J
d452 1
a452 1
208.2.2.2$B$NGX8e$K$"$k(J 208.1.5.0/24 $B$r%H%s%M%k$G$D$J$2$?$$$H$7$h$&!#(J
d455 1
a455 1
$B$4$i$s$N$H$*$j!"(JIPSec$B$G<jF080@@_Dj$r;H$C$F$$$k$H!"(J
d526 1
a526 1
$B$3$l$G$9$Y$F$N(J IPSec $B>pJs(J (SPI$B!"%U%m!<!"%k!<%F%#%s%0$N%(%s%H%j!K$,%7%9%F%`$+$i0lA]$5$l$k!#(J
d579 2
a580 2
</a><P>VPNs $B$r$O$8$a(JIPSec$B$N3F<oEAE}E*$J%"%W%j%1!<%7%g%s$r9M$($F$$$k$J$i!"(J
$B$?$V$s(J ISAKMP $B$r;H$&$3$H$K$J$k!#(JIPSec $B$N>&6H<BAu$N(J
d591 1
a591 1
$BFs$D$N(JIPSec$B%N!<%I4V$G(JIPSec$B%Q%i%a!<%?$r3NN)$9$k$?$a$K!"(J
d605 2
a606 2
<b>$B%U%'!<%:(J 2</b> - Security Associations $B$,(JIPSec$B$K$+$o$C$F%M%4$5$l$k!#(J
$B%U%'!<%:(J 2 $B$O(JIPSec$B%[%9%H4V$K%H%s%M%k$+(J endpoint SA $B$r3NN)$9$k!#(J
d615 1
a615 1
$B%U%'!<%:(J 1 $B$G$O(J IPSec $B%N!<%IF1;N$,@@\B3$r3NN)$7$F(J
d625 1
a625 1
IPSec $B%9%?%C%/MQ$N%P%$%J%j$,$D$$$F$/$k!#;DG0$J$,$i!"(J
d649 1
a649 1
$B$3$N%U%!%$%k$O(J ISAKMP $B$K!"$@@$l$,(J IPSec $B$K%"%/%;%9$G$-$k$+$r65$($k!#$3$N%7%J%j%*$G$O!"$3$N(J policy $B%U%!%$%k$O!"(J
d653 1
a653 1
$B4uK>$r(JISAKMP$B$KEA$($i$l$k!#$^$?$@@$l$G$b(J IPSec $B$,;H$($k$h$&$K$7$F$b$$$$!#$3$l$O%F%9%HMQ$@@$1$K$7$F$*$/$N$,K>$^$7$$!#(J
d670 1
a670 1
Conditions: app_domain == &quot;IPSec policy&quot; &amp;&amp;
d792 1
a792 1
$B$3$N%T%"$,$3$N%[%9%H$H(J IPSec $B$r;H$C$F$$$$$3$H$K$J$C$F$$$k$+$r3NG'$9$k!#$3$3$N%Q%9%o!<%I$rJQ$($?$i!"(J
d834 1
a834 1
$B5-=R$7$?!"0J2<$N(J IPSec-ID $B%;%/%7%g%s$r;X$9!#$3$NItJ,$,Aw$i$l$F!"8~$3$&B&$N%2!<%H%&%'%$$,(JVPN$B7PM3$G(J
d837 1
a837 1
$B$"$k$O$:$N$b$N$r5-=R$7$?!"2<$N(JIPSec-ID $B%;%/%7%g%s$r5-=R$7$F$$$k$3$NItJ,$,2r<a$5$l$F!"$3$A$i$N%W%i%$%Y!<%H%M%C%H%o!<%/$+$i(J
d843 1
a843 1
$B$3$3$O(JIPSec-ID $B%;%/%7%g%s$@@!#0J2<$N%(%s%H%j$O!"%[%9%H(JA$B$H%[%9%H(JB$B$N(J
d895 1
a895 1
<b>Suites=</b> $B$O(J IPSec Suite $B%;%/%7%g%s$r;X$7$F$$$k!#(J
d897 1
a897 1
ISAKMP $B$H(J IPSec $B$K$D$$$F$O!"$[$+$K$b@@bL@@$9$k$3$H$,$$$C$Q$$$"$k!#$$$^$N4pK\E*$J@@bL@@$r$b$H$K!"(J
d1000 1
a1000 1
$BMW$9$k$K!"Fs$D$N%M%C%H%o!<%/$,!"J]8n$5$l$F$$$J$$%M%C%H%o!<%/>e$r!"(JIPSec$B%H%s%M%k7PM3$G(J
d1034 1
a1034 1
# Now phase 2 is negotiating IPSec SAs. As in phase 1, the name here
d1071 1
a1071 1
# This is the section for the IPSec connection. The section name is
d1075 1
a1075 1
# packages should be forwarded over the IPSec tunnel to the remote 
d1093 1
a1093 1
# IPSec$B%H%s%M%k7PM3$G%j%b!<%H%7%9%F%`$KE>Aw$5$l$k!#(J
d1543 1
a1543 1
$B$3$l$G!"(JIPSec$B@@\B3$rF@@$i$l$k$N$O(J gw.worksite.se $B$@@$1$N$O$:!#$[(J
d1763 1
a1763 1
<h1>13.11 - Troubleshooting IPSec/VPN</h1>
d1766 1
a1766 1
IPSec $B%H%i%V%k%7%e!<%F%#%s%0$N:G=i$N%D!<%k$O(J <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&apropos=0&sektion=8&format=html">tcpdump(8)</a>$B$@@!#(J
d1846 1
a1846 1
<LI>IPSec$B$G=hM}$5$l$?%H%i%U%#%C%/$r!"(JnetB$B$+$i<+J,$N%m!<%+%k$N%U%!%$%"!<%&%)!<%kJ]8n$D$-(JnetA$B$K(J
d1896 1
a1896 1
IPSec $B$,FC$K>\$7$/@@bL@@$7$F$"$k$N$O(J
d1908 1
a1908 1
$B$N(Jman$B%Z!<%8$b>\$7$/$F!"(JIPSec$B$N@@_Dj$H1?MQ$KLrN)$D$O$:$@@!#(J
d1912 5
a1916 5
<LI><A HREF="http://www.ietf.org/html.charters/ipsec-charter.html">IETF IPSec Working Group</a>
<LI><A HREF="http://isakmp-test.ssh.fi/">SSH IPSec interoperability Test Node</a>
<LI><A HREF="http://ipsec-wit.antd.nist.gov/">NIST IPSec Web Based Interoperability Tester</a>
<LI><A HREF="http://www.r4k.net/ipsec/">A port of OpenBSD's IPSec to FreeBSD</a>
<LI><A HREF="http://www.xs4all.nl/~freeswan/">FreeS/WAN - IPSec for Linux</a>
d1932 1
a1932 1
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2207.html">RFC 2207</a> - RSVP Extensions for IPSec Data Flows
d1935 1
a1935 1
<LI><A HREF="http://www.cis.ohio-state.edu/htbin/rfc/rfc2401.html">RFC 2401</a> - Security Architecture for the Internet Protocol (<b>IPSec</b>)
d1965 1
a1965 1
Originally [OpenBSD: faq13.html,v 1.45 ]
d1967 1
a1967 1
$Translation: faq13.html,v 1.2 2001/10/19 11:24:15 tueda Exp $
d1969 1
a1969 1
$OpenBSD: faq13.html,v 1.45 2001/10/04 09:59:02 wilfried Exp $
@


1.1
log
@
Sync with badlands translation CVS
@
text
@d9 2
a10 2
<meta name= "copyright"     content= "This document copyright (C) 2000 OpenBSD">
<meta http-equiv="Content-Type" content="text/html; charset=iso-2022-jp">
d16 3
a18 20

<p>
<font color= "#0000e0">
<a href="index.html">[FAQ $BL\<!(J]</a>
<a href="faq12.html">[12.0 - $B9bEY$J%f!<%68~$1(J]</a>
<a href="../faq14.html">[14.0 - OpenBSD $B$G%G%#%9%/$r;H$&(J]</a>
</font>
</p>

<p>
<Font size="-1">
$B$3$N%I%-%e%a%s%H$N0lIt$O!"0J2<$N%I%-%e%a%s%H$+$i$H$C$F$$$k(J:
<UL>
<LI><A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&sektion=4&format=html">ipsec(4)</a>
<LI><A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=vpn&sektion=8&format=html">vpn(8)</a>
<LI><A HREF="http://www.freebsd.org/~julian/IPSEC_4_Dummies.html">IPSec for Dummies</a> by Julian Elischer
<LI><A HREF="http://www.secureops.com/vpn/vpn.html">ISAKMP Howto</a> by Patrick Ethier
<LI><A HREF="http://hem.passagen.se/hojg/isakmpd/">X.509v3 certificates with isakmpd</a> by J&ouml;rgen Granstam
</UL>
</font>
d20 1
a20 1
<h1>13.0 - IPSec (IP Security Protocol) $B$r;H$&(J</h1>
d36 12
a1916 1
<LI><A HREF="http://www.cs.umass.edu/~lmccarth/ipsec.html">Lots of IPSec related links</A>
d1965 1
a1965 1
Originally [OpenBSD: faq13.html,v 1.40 ]
d1967 1
a1967 1
$Translation: faq13.html,v 1.1 2001/06/16 15:35:37 tueda Exp $
d1969 1
a1969 1
$OpenBSD: faq13.html,v 1.40 2001/03/26 17:14:09 todd Exp $
@

