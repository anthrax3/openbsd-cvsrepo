head	1.133;
access;
symbols;
locks; strict;
comment	@# @;


1.133
date	2017.04.11.03.28.01;	author tj;	state Exp;
branches;
next	1.132;
commitid	86nLlctMwACj6lFT;

1.132
date	2017.02.27.21.13.53;	author tj;	state Exp;
branches;
next	1.131;
commitid	a2bIKJExhOlpzGvf;

1.131
date	2017.02.27.20.09.53;	author tj;	state Exp;
branches;
next	1.130;
commitid	L12CsxiuRU6l99Sn;

1.130
date	2017.02.09.17.22.19;	author tb;	state Exp;
branches;
next	1.129;
commitid	T7p2qUf6sgevbhcO;

1.129
date	2016.09.03.13.53.40;	author tj;	state Exp;
branches;
next	1.128;
commitid	m6ASQa7doHhu0Xq8;

1.128
date	2016.09.01.16.09.01;	author tj;	state Exp;
branches;
next	1.127;
commitid	szuG3RUW7Xig3iZV;

1.127
date	2016.08.15.02.22.13;	author tb;	state Exp;
branches;
next	1.126;
commitid	3DeixV5YkPOb78RN;

1.126
date	2016.04.21.00.45.48;	author tj;	state Exp;
branches;
next	1.125;
commitid	HtZ8nUjqaAunZXL2;

1.125
date	2016.04.16.00.30.41;	author tj;	state Exp;
branches;
next	1.124;
commitid	rTxoenHHaeutOff1;

1.124
date	2016.04.15.22.19.21;	author tj;	state Exp;
branches;
next	1.123;
commitid	SbVa2HBPaB5JhGVM;

1.123
date	2016.04.15.20.39.49;	author tb;	state Exp;
branches;
next	1.122;
commitid	jwteSMEb4rFzI8UA;

1.122
date	2016.04.15.16.42.34;	author tj;	state Exp;
branches;
next	1.121;
commitid	4iGhbtsBAhiGE70P;

1.121
date	2016.03.29.01.27.39;	author tb;	state Exp;
branches;
next	1.120;
commitid	4Y8oU6GBrSY1UOfW;

1.120
date	2016.03.27.19.52.09;	author sthen;	state Exp;
branches;
next	1.119;
commitid	hi2ObFv9LGB98JY5;

1.119
date	2016.03.22.10.54.47;	author sthen;	state Exp;
branches;
next	1.118;
commitid	cyODCFvIgxpUoVc0;

1.118
date	2016.03.21.05.46.21;	author beck;	state Exp;
branches;
next	1.117;
commitid	zEx6zFkNSFFExu0v;

1.117
date	2016.02.25.23.27.37;	author tj;	state Exp;
branches;
next	1.116;
commitid	NWFWdLICm8sN5kXB;

1.116
date	2016.02.25.16.04.36;	author tj;	state Exp;
branches;
next	1.115;
commitid	xJWxbZk8LC0BeXnb;

1.115
date	2016.02.25.15.52.09;	author tj;	state Exp;
branches;
next	1.114;
commitid	oFaDIGe11APFdRDz;

1.114
date	2016.02.25.00.22.20;	author tj;	state Exp;
branches;
next	1.113;
commitid	tivViQ6ONhG9ck3b;

1.113
date	2016.02.20.22.59.20;	author tj;	state Exp;
branches;
next	1.112;
commitid	8IPwAs1etKEHjS9q;

1.112
date	2016.02.20.09.35.58;	author tb;	state Exp;
branches;
next	1.111;
commitid	BZoo9hrTssP5wqu3;

1.111
date	2016.02.18.12.26.43;	author tb;	state Exp;
branches;
next	1.110;
commitid	PTyZmZA2BNvbjJkO;

1.110
date	2016.02.06.02.31.37;	author tj;	state Exp;
branches;
next	1.109;
commitid	bpKIMzdXv1BsSKJ7;

1.109
date	2016.01.11.20.20.26;	author matthieu;	state Exp;
branches;
next	1.108;
commitid	6W60DUghNj7Y0BBx;

1.108
date	2016.01.11.06.30.13;	author tb;	state Exp;
branches;
next	1.107;
commitid	kpxTb5fPDcXr5p29;

1.107
date	2015.07.02.05.49.04;	author bentley;	state Exp;
branches;
next	1.106;
commitid	AP3UllesavMDEUhQ;

1.106
date	2015.05.11.11.18.30;	author sthen;	state Exp;
branches;
next	1.105;
commitid	wRrXxcro6dFYiwF8;

1.105
date	2015.04.30.23.38.57;	author nick;	state Exp;
branches;
next	1.104;
commitid	uIacNW3dhb39XNuY;

1.104
date	2014.12.01.09.49.46;	author bentley;	state Exp;
branches;
next	1.103;
commitid	VffT7s4nM0NK88NG;

1.103
date	2014.11.01.13.42.51;	author nick;	state Exp;
branches;
next	1.102;
commitid	ZgANDuwHdulMn8Ng;

1.102
date	2014.08.06.00.49.01;	author nick;	state Exp;
branches;
next	1.101;
commitid	EhWyVkRy73BZXq6m;

1.101
date	2014.08.01.01.41.09;	author nick;	state Exp;
branches;
next	1.100;
commitid	VM9SIOWPqhmntknX;

1.100
date	2014.05.01.15.01.13;	author nick;	state Exp;
branches;
next	1.99;

1.99
date	2014.03.30.19.13.39;	author nick;	state Exp;
branches;
next	1.98;

1.98
date	2014.02.12.16.41.56;	author nick;	state Exp;
branches;
next	1.97;

1.97
date	2013.11.01.14.05.57;	author nick;	state Exp;
branches;
next	1.96;

1.96
date	2013.05.01.13.16.32;	author nick;	state Exp;
branches;
next	1.95;

1.95
date	2012.11.05.03.38.09;	author nick;	state Exp;
branches;
next	1.94;

1.94
date	2012.05.01.14.35.15;	author nick;	state Exp;
branches;
next	1.93;

1.93
date	2011.12.21.09.05.24;	author ajacoutot;	state Exp;
branches;
next	1.92;

1.92
date	2011.12.07.01.18.24;	author nick;	state Exp;
branches;
next	1.91;

1.91
date	2011.11.01.10.52.27;	author nick;	state Exp;
branches;
next	1.90;

1.90
date	2011.07.24.16.18.56;	author nick;	state Exp;
branches;
next	1.89;

1.89
date	2011.06.09.07.40.08;	author lum;	state Exp;
branches;
next	1.88;

1.88
date	2010.11.01.09.48.45;	author nick;	state Exp;
branches;
next	1.87;

1.87
date	2010.06.18.13.30.54;	author blambert;	state Exp;
branches;
next	1.86;

1.86
date	2010.05.26.01.43.19;	author nick;	state Exp;
branches;
next	1.85;

1.85
date	2010.05.24.02.48.08;	author nick;	state Exp;
branches;
next	1.84;

1.84
date	2010.05.19.12.41.02;	author nick;	state Exp;
branches;
next	1.83;

1.83
date	2010.05.10.03.09.21;	author nick;	state Exp;
branches;
next	1.82;

1.82
date	2010.02.09.00.57.37;	author nick;	state Exp;
branches;
next	1.81;

1.81
date	2009.10.16.19.07.37;	author nick;	state Exp;
branches;
next	1.80;

1.80
date	2009.10.11.02.51.10;	author nick;	state Exp;
branches;
next	1.79;

1.79
date	2009.04.30.17.19.10;	author nick;	state Exp;
branches;
next	1.78;

1.78
date	2009.02.22.16.57.42;	author nick;	state Exp;
branches;
next	1.77;

1.77
date	2009.02.19.01.32.23;	author nick;	state Exp;
branches;
next	1.76;

1.76
date	2008.11.12.02.59.41;	author nick;	state Exp;
branches;
next	1.75;

1.75
date	2008.07.08.00.00.59;	author nick;	state Exp;
branches;
next	1.74;

1.74
date	2007.12.27.01.42.47;	author nick;	state Exp;
branches;
next	1.73;

1.73
date	2007.11.29.01.48.23;	author nick;	state Exp;
branches;
next	1.72;

1.72
date	2007.11.05.08.07.54;	author steven;	state Exp;
branches;
next	1.71;

1.71
date	2007.09.06.04.04.47;	author joel;	state Exp;
branches;
next	1.70;

1.70
date	2007.08.08.16.41.58;	author nick;	state Exp;
branches;
next	1.69;

1.69
date	2007.08.07.01.49.34;	author nick;	state Exp;
branches;
next	1.68;

1.68
date	2007.08.07.00.17.50;	author nick;	state Exp;
branches;
next	1.67;

1.67
date	2006.11.01.21.16.57;	author jasper;	state Exp;
branches;
next	1.66;

1.66
date	2006.08.28.02.19.07;	author nick;	state Exp;
branches;
next	1.65;

1.65
date	2006.08.28.02.17.01;	author nick;	state Exp;
branches;
next	1.64;

1.64
date	2006.08.06.10.58.09;	author steven;	state Exp;
branches;
next	1.63;

1.63
date	2006.08.03.00.29.48;	author nick;	state Exp;
branches;
next	1.62;

1.62
date	2006.08.03.00.26.16;	author nick;	state Exp;
branches;
next	1.61;

1.61
date	2006.04.06.11.02.18;	author nick;	state Exp;
branches;
next	1.60;

1.60
date	2006.02.26.22.21.16;	author nick;	state Exp;
branches;
next	1.59;

1.59
date	2006.02.26.21.19.39;	author nick;	state Exp;
branches;
next	1.58;

1.58
date	2006.02.26.21.09.19;	author nick;	state Exp;
branches;
next	1.57;

1.57
date	2005.07.09.02.16.08;	author nick;	state Exp;
branches;
next	1.56;

1.56
date	2005.05.19.16.54.27;	author nick;	state Exp;
branches;
next	1.55;

1.55
date	2005.02.12.19.08.41;	author nick;	state Exp;
branches;
next	1.54;

1.54
date	2004.10.20.23.04.26;	author nick;	state Exp;
branches;
next	1.53;

1.53
date	2004.08.06.20.55.24;	author nick;	state Exp;
branches;
next	1.52;

1.52
date	2004.08.06.02.22.50;	author nick;	state Exp;
branches;
next	1.51;

1.51
date	2004.07.31.23.00.24;	author nick;	state Exp;
branches;
next	1.50;

1.50
date	2004.04.21.00.02.10;	author nick;	state Exp;
branches;
next	1.49;

1.49
date	2004.02.13.07.20.28;	author david;	state Exp;
branches;
next	1.48;

1.48
date	2004.01.01.04.13.34;	author nick;	state Exp;
branches;
next	1.47;

1.47
date	2003.10.30.22.43.42;	author nick;	state Exp;
branches;
next	1.46;

1.46
date	2003.10.16.00.48.14;	author nick;	state Exp;
branches;
next	1.45;

1.45
date	2003.08.05.19.54.07;	author nick;	state Exp;
branches;
next	1.44;

1.44
date	2003.08.05.18.32.56;	author nick;	state Exp;
branches;
next	1.43;

1.43
date	2003.07.23.02.01.56;	author nick;	state Exp;
branches;
next	1.42;

1.42
date	2003.06.22.18.54.12;	author david;	state Exp;
branches;
next	1.41;

1.41
date	2003.06.17.19.34.21;	author david;	state Exp;
branches;
next	1.40;

1.40
date	2003.05.01.01.47.41;	author nick;	state Exp;
branches;
next	1.39;

1.39
date	2003.04.04.17.49.08;	author nick;	state Exp;
branches;
next	1.38;

1.38
date	2003.03.18.03.41.04;	author nick;	state Exp;
branches;
next	1.37;

1.37
date	2003.02.28.00.34.28;	author nick;	state Exp;
branches;
next	1.36;

1.36
date	2003.02.26.02.54.48;	author nick;	state Exp;
branches;
next	1.35;

1.35
date	2003.02.25.04.00.10;	author david;	state Exp;
branches;
next	1.34;

1.34
date	2003.02.20.03.09.56;	author nick;	state Exp;
branches;
next	1.33;

1.33
date	2003.02.15.14.54.50;	author nick;	state Exp;
branches;
next	1.32;

1.32
date	2003.02.15.00.53.43;	author nick;	state Exp;
branches;
next	1.31;

1.31
date	2003.01.01.13.01.59;	author nick;	state Exp;
branches;
next	1.30;

1.30
date	2002.11.26.01.02.04;	author nick;	state Exp;
branches;
next	1.29;

1.29
date	2002.07.25.08.05.08;	author jufi;	state Exp;
branches;
next	1.28;

1.28
date	2002.05.29.19.17.41;	author nick;	state Exp;
branches;
next	1.27;

1.27
date	2002.05.22.02.17.16;	author nick;	state Exp;
branches;
next	1.26;

1.26
date	2002.05.20.01.04.48;	author nick;	state Exp;
branches;
next	1.25;

1.25
date	2002.05.07.01.36.52;	author nick;	state Exp;
branches;
next	1.24;

1.24
date	2002.03.20.03.54.33;	author nick;	state Exp;
branches;
next	1.23;

1.23
date	2002.02.20.03.11.34;	author nick;	state Exp;
branches;
next	1.22;

1.22
date	2002.01.27.22.44.34;	author nick;	state Exp;
branches;
next	1.21;

1.21
date	2002.01.21.20.28.25;	author nick;	state Exp;
branches;
next	1.20;

1.20
date	2002.01.13.00.00.32;	author ericj;	state Exp;
branches;
next	1.19;

1.19
date	2002.01.12.01.39.29;	author ericj;	state Exp;
branches;
next	1.18;

1.18
date	2001.08.25.09.31.33;	author jufi;	state Exp;
branches;
next	1.17;

1.17
date	2001.08.13.16.16.42;	author heko;	state Exp;
branches;
next	1.16;

1.16
date	2001.04.06.16.15.50;	author horacio;	state Exp;
branches;
next	1.15;

1.15
date	2001.03.26.17.14.08;	author todd;	state Exp;
branches;
next	1.14;

1.14
date	2001.01.27.22.19.47;	author ericj;	state Exp;
branches;
next	1.13;

1.13
date	2000.11.30.05.34.42;	author ericj;	state Exp;
branches;
next	1.12;

1.12
date	2000.10.18.15.37.14;	author ericj;	state Exp;
branches;
next	1.11;

1.11
date	2000.09.30.17.36.38;	author chris;	state Exp;
branches;
next	1.10;

1.10
date	2000.09.20.00.43.02;	author ericj;	state Exp;
branches;
next	1.9;

1.9
date	2000.08.11.21.26.14;	author chris;	state Exp;
branches;
next	1.8;

1.8
date	2000.03.03.13.17.15;	author rohee;	state Exp;
branches;
next	1.7;

1.7
date	2000.02.26.01.19.59;	author rohee;	state Exp;
branches;
next	1.6;

1.6
date	99.12.06.21.42.08;	author chris;	state Exp;
branches;
next	1.5;

1.5
date	99.11.03.20.21.48;	author chris;	state Exp;
branches;
next	1.4;

1.4
date	99.10.10.18.21.19;	author chris;	state Exp;
branches;
next	1.3;

1.3
date	99.09.29.22.57.42;	author ericj;	state Exp;
branches;
next	1.2;

1.2
date	99.09.29.21.51.43;	author chris;	state Exp;
branches;
next	1.1;

1.1
date	99.09.24.01.46.14;	author ericj;	state Exp;
branches;
next	;


desc
@@


1.133
log
@6.1 faq updates:

- syspatch
- less xdm, more xenodm
- less pkg.conf, more installurl
- vmm networking (written by edd)
- signing_params is gone
- pkg_sign flags changed
- build user changes (written by tb)
- https in the installer
- cvs version bumps
- remove ports.html redirect page

ok tb
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>

<!-- If you make edits to any FAQ documents, please start each sentence
     on a new line, and try to keep the general formatting consistent
     with the rest of the pages -->

<title>OpenBSD FAQ: The X Window System</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="copyright" content="This document copyright 1998-2017 by OpenBSD.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="../openbsd.css">
<link rel="canonical" href="https://www.openbsd.org/faq/faq11.html">
</head>

<body bgcolor="#ffffff" text="#000000">

<h2>
<a href="../index.html">
<font color="#0000ff"><i>Open</i></font><font color="#000084">BSD</font></a>
<font color="#e00000">FAQ - The X Window System</font>
<small>
<a href="index.html" style="font-weight:normal; float:right">[FAQ Index]</a>
</small>
</h2>
<hr>

<ul>
<li><a href="#Intro"        >Introduction to X</a>
<li><a href="#ConfigX"      >Configuring X</a>
<li><a href="#StartingX"    >Starting X</a>
<li><a href="#CustomizingX" >Customizing X</a>
</li>
</ul>

<hr>

<h2 id="Intro">Introduction to X</h2>

The X Window System (sometimes just called "X") is the environment which
provides graphics services to OpenBSD and other Unix-based systems.
By itself, X provides very little, since one also must have a window manager
to present a user interface.
OpenBSD ships with the <a href="http://man.openbsd.org/cwm">cwm(1)</a>,
<a href="http://man.openbsd.org/fvwm">fvwm(1)</a> and
<a href="http://man.openbsd.org/twm">twm(1)</a> window managers, although
many others are available via <a href="faq15.html">ports and packages</a>.

<p>
It is possible to run X clients on a system without any graphical support.
For example, one could have an application (the X client) running on an
ARM system, displaying its output on an amd64's graphical display (the X
server).
Since X is a well-defined, cross-platform protocol, it is even possible
to have an X application running on (for example) a Linux machine use an
OpenBSD machine for its display.
The client and server can also be running on the same machine, and for
most of this section, that will be the assumption.

<h2 id="ConfigX">Configuring X</h2>

For the majority of hardware on the most common platforms, X requires no
configuration at all.

<p>
The details of manual X configuration vary considerably from platform
to platform.
In all cases, there will be instructions and other platform-specific
information in <tt>/usr/X11R6/README</tt> on the installed system.

<h2 id="StartingX">Starting X</h2>

There are two common ways to run X: by manually invoking the
<a href="http://man.openbsd.org/startx">startx(1)</a> command at
a console, or via <a href="http://man.openbsd.org/xenodm">xenodm(1)</a>.

<p>
If you didn't enable xenodm at install time, you can do so like any other
system daemon:

<blockquote><pre>
# <b>rcctl enable xenodm</b>
</pre></blockquote>

On some platforms, you will need to disable the console
<a href="http://man.openbsd.org/getty">getty(8)</a> to use xenodm.
This is not needed on amd64, i386 or macppc.

<h2 id="CustomizingX">Customizing X</h2>

OpenBSD's default X environment is fully functional, but you may wish to
customize it.

<p>
The <a href="http://man.openbsd.org/startx">startx(1)</a> command looks for
a <tt>.xinitrc</tt> file in the user's home directory.
This is usually a shell script, which can start as many programs as desired.
Generally, most of the programs run by this script should run in the
background, though the last one (typically the window manager) should run in
the foreground.
When it exits, the script will exit, and X will be shut down.

<p>
In the simplest case, this can be as little as just the name of the
window manager you wish to invoke:

<blockquote><pre>
cwm
</pre></blockquote>

Or you can get a little more fancy:

<blockquote><pre>
xconsole -geometry -0+0 -fn 5x7 &
oclock -geometry 75x75-0-0 &
xsetroot -solid grey &
cwm
</pre></blockquote>

Note that only the window manager is not being run in the background. 
This means that X will stay running until it exits.

<p>
If a user's home directory does not have a <tt>.xinitrc</tt> file, the
system's <tt>/etc/X11/xinit/xinitrc</tt> file is used.

When <a href="http://man.openbsd.org/xenodm">xenodm(1)</a> starts, it runs
<tt>/etc/X11/xenodm/Xsession</tt>, which will check to see if the user has
a <tt>.xsession</tt> configuration file in their home directory.
If you wish to change your default window manager, simply invoke it in
<tt>.xsession</tt>.
Any programs you want started with X can be placed here, but all should
be backgrounded except for your window manager again.

<p>
</body>
</html>
@


1.132
log
@the xf86/machdep.allowaperture section isn't valid anymore for platforms
with kms support.

spotted by tb
discussed with and ok matthieu
@
text
@d76 1
a76 1
a console, or via <a href="http://man.openbsd.org/xdm">xdm(1)</a>.
d79 1
a79 1
If you didn't enable xdm at install time, you can do so like any other
d83 1
a83 1
# <b>rcctl enable xdm</b>
d87 1
a87 1
<a href="http://man.openbsd.org/getty">getty(8)</a> to use xdm.
d128 2
a129 2
When <a href="http://man.openbsd.org/xdm">xdm(1)</a> starts, it runs
<tt>/etc/X11/xdm/Xsession</tt>, which will check to see if the user has
@


1.131
log
@start cleaning up this page. remove much useless text and weird formatting.
try to stay on topic and get right to the point. also replace some outdated
installer text with its current version.

ok tb
@
text
@a71 16
<p>
Several platforms require the <a href="http://man.openbsd.org/xf86">xf86(4)</a>
X aperture driver, which provides access to the memory and I/O ports of a VGA
board and the PCI configuration registers required by the X server.
This driver must be enabled before it is used, either by answering "yes" to
this question during install...

<blockquote><pre>
Do you expect to run the X window System [yes]
</pre></blockquote>

...or by changing the value of the <tt>machdep.allowaperture</tt> sysctl
to the appropriate value in <tt>/etc/sysctl.conf</tt>.
This sysctl cannot be changed after boot has been completed for security
reasons.

@


1.130
log
@2017
@
text
@d41 8
a48 27
The X Window System (sometimes just called "X", other times, incorrectly
called "X Windows") is the environment which provides graphics services
to OpenBSD and other Unix-based systems.
However, by itself, X provides very little: one also must have a window
manager to present a user interface.
Most of the "personality" one will feel from X will be due to the
window manager, rather than X itself.
OpenBSD ships with the
<a href="http://man.openbsd.org/cwm">cwm(1)</a>,
<a href="http://man.openbsd.org/fvwm">fvwm(1)</a>
and
<a href="http://man.openbsd.org/twm">twm(1)</a>
window managers, although you may wish to use any of the others that are
in <a href="faq15.html">ports and packages</a>.
Search for "window manager" for a list of the many available options.

<p>
X is considered a "client-server" structured protocol, however the
terminology is sometimes confusing.
The computer with the graphics on the screen is the X server.
The application which tells the X server what to put on its screen
is the X client, even though it may be a much more powerful computer
in a data center.
This model can be used to have large, processor-intensive applications
(X clients) running on a very powerful machine, using the X server
running on a small, low power machine on your desk for their user
interface.
d56 2
a57 4
to have an X application running on (for example) a Linux machine
use an OpenBSD machine for its display.

<p>
d63 2
a64 3
Good news: In the vast majority of hardware in most platforms, X requires
no configuration at all.
It Just Works.
d67 1
a67 1
The details of manual X configuration varies considerably from platform
d73 5
a77 7
Several platforms require the
<a href="http://man.openbsd.org/xf86">xf86(4)</a>
X aperture driver, which provides access to the memory and I/O
ports of a VGA board and the PCI configuration registers required
by the X servers.
This driver must be enabled before it is used, either by answering
"yes" to this question during install:
d80 1
a80 1
Do you expect to run the X window System [no]
d83 4
a86 6
or by changing the value of <tt>machdep.allowaperture</tt> to the
appropriate non-zero value in <tt>/etc/sysctl.conf</tt> for your
platform and rebooting the machine (this sysctl cannot be changed
after boot has been completed for security reasons).
There are security implications to this, so do not do this if you
do not need it.
d90 3
a92 1
There are two common ways to run X:
d94 3
a96 1
<h3>On Demand:</h3>
d98 3
a100 19
Log in to a console as normal, then run
<a href="http://man.openbsd.org/startx">startx(1)</a>.

<h3>Boot directly into X:</h3>

This is done using
<a href="http://man.openbsd.org/xdm">xdm(1)</a>,
the X Display Manager.
xdm(1) is started as root, normally by <a href="faq10.html#rc">rc(8)</a>,
and presents a login prompt.
Upon successful login, it starts an X session for that user.
If or when that X session should be terminated (including by hitting
CTRL-ALT-Backspace), xdm(1) will return, prompting the user to log in again.
For this reason, do NOT attempt to start xdm(1) from
<tt>/etc/rc.conf.local</tt> until you have verified X works as you wish,
or your machine may become very difficult to manage!
(worst case: boot single user, as if you <a href="faq8.html#LostPW">lost
your password</a>, and edit out the <tt>xdm_flags</tt> line in your
<tt>/etc/rc.conf.local</tt> file.)
a101 1
<p>
d103 2
a104 32
<a href="http://man.openbsd.org/getty">getty(8)</a>
to use xdm(1). This is not needed on amd64, i386 or macppc.

<h3>X won't start, I get lots of error messages</h3>

A common cause for X problems is the machdep.allowaperture
<a href="http://man.openbsd.org/sysctl">sysctl(8)</a>
setting.
Since this defaults to being disabled on OpenBSD, this is a fairly likely
cause of the problem.

<p>
You need to edit <tt>/etc/sysctl.conf</tt> and set
<b>machdep.allowaperture=2</b> (or <b>1</b>, depending upon your platform).
This will allow X to access the aperture driver,
<a href="http://man.openbsd.org/xf86">xf86(4)</a>,
upon the next reboot.
It can not be made available after boot.
This can also be set during install if you answer "Y" when you are asked
whether you expect to run the X Window System.

<p>
OpenBSD requires that the aperture driver be activated on amd64, i386,
macppc and sparc64 platforms to control access to the video boards.
Other platforms use a safer way to handle the video system, and do not
need this (and do not have it in their kernel).
If you do not anticipate using X on your system, it is recommended that
you not enable the aperture driver.

<p>
For more information about configuring and using X on your platform, see
the <tt>/usr/X11R6/README</tt> file on your installed system.
a109 23
You may wish to change the background pattern or color, or you may wish
to change the window manager (the program that most defines your X
environment), or change the applications that are started when X starts.

<p>
The default window manager in OpenBSD is
<a href="http://man.openbsd.org/fvwm">fvwm(1)</a>.
Fvwm is a good, general purpose window manager, but it is hardly your
only choice; it isn't even the only window manager included with OpenBSD
(see
<a href="http://man.openbsd.org/cwm">cwm(1)</a>
and
<a href="http://man.openbsd.org/twm">twm(1)</a>).
A large number of window managers are also available through
<a href="faq15.html">packages and ports</a>.

<p>
Similar to the <a href="faq10.html#rc">system startup script</a>,
X has a process it goes through to set up the user environment.
More accurately, it has more than one process; which process is used
depends on how you <a href="#StartingX">start X</a>.
Understanding how X starts will help you understand how to customize
your work environment the way you wish it to be.
d112 3
a114 13
Note that you can customize the environment on both a system-wide and
user level.
It is probably best to do user level changes rather than to change the
system defaults, as the user scripts are stored in the user's home
directory, so you will have less merging of files to do when upgrading
to a new version of OpenBSD.

<h3>startx(1) startup</h3>

startx(1) looks for the file <tt>.xinitrc</tt> in the user's home directory.
<tt>.xinitrc</tt> is usually a shell script, which can start as many
X "client" (applications that use X) programs as desired.
When this script exits, the X server shuts down.
d116 3
a118 3
background, though the last one should run in the foreground (typically
the window manager); when it exits, the script will exit, and X will be
shutdown.
d137 2
a138 37
That will start the
<a href="http://man.openbsd.org/xconsole">xconsole(1)</a>,
which provides a copy of any text that the kernel would have sent to the
console (which is now covered by the graphical screen), an analog clock,
<a href="http://man.openbsd.org/oclock">oclock(1)</a>,
and sets the background to a solid grey background with
<a href="http://man.openbsd.org/xsetroot">xsetroot(1)</a>,
all before invoking the
<a href="http://man.openbsd.org/cwm">cwm(1)</a>
window manager.
Note that only the window manager is not "backgrounded" with an "&amp;"
character.
This means that X will stay running until cwm(1) exits.

<p>
If a user's home directory does not have a <tt>.xinitrc</tt> file in it,
the system's <tt>/etc/X11/xinit/xinitrc</tt> file is used.
This file can provide you some additional ideas for your
<tt>.xinitrc</tt> script.

<h3>xdm(1) startup</h3>

<a href="http://man.openbsd.org/xdm">xdm(1)</a>
is usually started by the <a href="faq10.html#rc">system startup
scripts</a>, but for testing purposes (recommended, until you know your
have your X config right!), it can be run as root.

<p>
xdm(1) has a lot of other functionality that won't be touched on here,
but for our purposes, xdm will present the user with a login screen, get
and verify a user name and password, and then give the user their X
environment.
When X shuts down, either deliberately or accidentally, xdm will start
it back up again.
This is why you want to make sure X is configured properly before using
xdm(1), and certainly before having xdm(1) start at boot. Otherwise, you
may have some difficulty getting control of the machine.
d141 2
a142 20
When xdm(1) starts, it runs the <tt>/etc/X11/xdm/Xsession</tt>, which
will check to see if the user has a <tt>.xsession</tt> file in their
home directory.
So, if you wish to change your default window manager, simply invoke it
(and maybe other things) in <tt>.xsession</tt>.
Again, any programs you want started with X (for example, maybe three
xterms) can be placed here, but all should be backgrounded except
for your window manager, as again, when that exits, your X session
will be ended.
In this case, xdm(1) will restart X and bring you back to a login
screen.

<h3>Trying a new window manager</h3>

You can invoke a particular window manager when you load X without
altering any defaults like this:

<blockquote><pre>
$ <b>startx /usr/local/bin/fluxbox</b>
</pre></blockquote>
d144 7
a150 18
Several window managers (including cwm(1) and fvwm(1)) offer the ability
to change window managers on the fly, without restarting X or any of
your applications.
Your new window manager replaces your old one; exiting the newly-loaded
window manager terminates X. It does not return you back to your
previous window manager.
fvwm(1) allows you to start a different window manager by left clicking
on the background ("root window"), chose "(Re)Start" and then pick your
preferred window manager.
However, note that you will need to add your alternative window managers
to your <tt>.fvwmrc</tt> file (the system-wide default is
<tt>/usr/X11R6/lib/X11/fvwm/.fvwmrc</tt>).
cwm(1) allows you to invoke another window manager by hitting Ctrl-Alt-w
and typing in the manager you wish to switch to.

<p>
Once you have found a window manager you like, you can set it as the final
program run by your startup scripts as described above.
@


1.129
log
@remove zaurus mentions.
@
text
@d11 1
a11 1
<meta name="copyright" content="This document copyright 1998-2016 by OpenBSD.">
@


1.128
log
@remove more sparc mentions and use "sparc64" to refer to ultrasparc.
@
text
@d143 1
a143 1
to use xdm(1). This is not needed on amd64, i386, macppc or zaurus.
@


1.127
log
@tls on openbsd.org is now real:
- link to https://www.openbsd.org from the sub-projects' pages
- make internal links relative
- switch link rel=canonical to https to please some search engines
"go ahead" from beck, "do it!!!!" tj
@
text
@d72 1
a72 1
ARM system, displaying its output on a SPARC's graphical display (the X
@


1.126
log
@delete section numbers. this will make adding and removing content a lot
less work.
@
text
@d14 1
a14 1
<link rel="canonical" href="http://www.openbsd.org/faq/faq11.html">
@


1.125
log
@tweak [faq index] button and sync the pf user's guide with that style.
@
text
@d9 1
a9 1
<title>11 - The X Window System</title>
a10 1
<meta name="description" content="OpenBSD FAQ 11 - The X Window System">
d22 1
a22 1
<font color="#e00000">FAQ 11 - The X Window System</font>
d30 4
a33 4
<li><a href="#Intro"        >11.1 - Introduction to X</a>
<li><a href="#ConfigX"      >11.2 - Configuring X</a>
<li><a href="#StartingX"    >11.3 - Starting X</a>
<li><a href="#CustomizingX" >11.4 - Customizing X</a>
d39 1
a39 1
<h2 id="Intro">11.1 - Introduction to X</h2>
d82 1
a82 1
<h2 id="ConfigX">11.2 - Configuring X</h2>
d114 1
a114 1
<h2 id="StartingX">11.3 - Starting X</h2>
d175 1
a175 1
<h2 id="CustomizingX">11.4 - Customizing X</h2>
@


1.124
log
@save some space by moving the [faq index] button to the top right corner
and removing the <h3> table of contents.
@
text
@d24 3
a26 1
<small><a href= "index.html" style="float:right;">[FAQ Index]</a></small>
@


1.123
log
@use short form man links in the faq and fix a few broken links
@
text
@d24 1
a26 3
<p>
<a href= "index.html">[FAQ Index]</a>
<p>
a27 2
<p>
<h3>Table of Contents</h3>
a317 3
<hr>
<p>
<a href= "index.html">[FAQ Index]</a>
@


1.122
log
@each faq page has header and footer links that look like this:

[faq index] [to section x - some topic] [to section y - another topic]

that can be very useful if the faq you're reading only covers one topic,
or if the pages are meant to be read in order. it makes sense to have
them on the pf and smtpd faq pages, but the main faq contains a variety
of unrelated topics, so they're not actually very useful there. remove.

while here, make a few subject titles more concise.

ok tb
@
text
@d52 2
a53 2
<a href="http://man.openbsd.org/?query=cwm">cwm(1)</a>,
<a href="http://man.openbsd.org/?query=fvwm">fvwm(1)</a>
d55 1
a55 1
<a href="http://man.openbsd.org/?query=twm">twm(1)</a>
d99 1
a99 1
<a href="http://man.openbsd.org/?query=xf86">xf86(4)</a>
d124 1
a124 1
<a href="http://man.openbsd.org/?query=startx">startx(1)</a>.
d129 1
a129 1
<a href="http://man.openbsd.org/?query=xdm">xdm(1)</a>,
d145 1
a145 1
<a href="http://man.openbsd.org/?query=getty">getty(8)</a>
d151 1
a151 1
<a href="http://man.openbsd.org/?query=sysctl">sysctl(8)</a>
d160 1
a160 1
<a href="http://man.openbsd.org/?query=xf86">xf86(4)</a>,
d188 1
a188 1
<a href="http://man.openbsd.org/?query=fvwm">fvwm(1)</a>.
d192 1
a192 1
<a href="http://man.openbsd.org/?query=cwm">cwm(1)</a>
d194 1
a194 1
<a href="http://man.openbsd.org/?query=twm">twm(1)</a>).
d243 1
a243 1
<a href="http://man.openbsd.org/?query=xconsole">xconsole(1)</a>,
d246 1
a246 1
<a href="http://man.openbsd.org/?query=oclock">oclock(1)</a>,
d248 1
a248 1
<a href="http://man.openbsd.org/?query=xsetroot">xsetroot(1)</a>,
d250 1
a250 1
<a href="http://man.openbsd.org/?query=cwm">cwm(1)</a>
d264 1
a264 1
<a href="http://man.openbsd.org/?query=xdm">xdm(1)</a>
@


1.121
log
@new openbsd faq style. joint with tj and validator.w3.org
@
text
@a27 3
<a href= "faq10.html">[To Section 10 - System Management]</a>
<a href= "faq12.html">[To Section 12 - Hardware and Platform-Specific
                      Questions]</a>
a324 3
<a href= "faq10.html">[To Section 10 - System Management]</a>
<a href= "faq12.html">[To Section 12 - Hardware and Platform-Specific
                      Questions]</a>
@


1.120
log
@add a small sprinkling of css to improve readability in the faq, ok tj@@ tb@@
@
text
@d20 1
d22 9
a30 2
<img alt="[OpenBSD]" src="../images/smalltitle.gif" border="0" height="30" width="141">
</a>
a31 9
<font color="#0000e0">
<a href="index.html">[FAQ Index]</a>
<a href="faq10.html">[To Section 10 - System Management]</a>
<a href="faq12.html">[To Section 12 - Hardware and Platform-Specific
                     Questions]</a>
</font>

<h1><font color="#e00000">11 - The X Window System</font></h1>
<hr>
@


1.119
log
@fix URIs, the / before querystring isn't optional, if it isn't fixed up
by the browser the server returns 400 Bad Request
@
text
@d13 2
@


1.118
log
@change http://www.openbsd.org/cgi-bin/man.cgi to be http://man.openbsd.org
this points stuff to the new place and gets us ready to deprecate the old
place we did this.
@
text
@d54 2
a55 2
<a href="http://man.openbsd.org?query=cwm">cwm(1)</a>,
<a href="http://man.openbsd.org?query=fvwm">fvwm(1)</a>
d57 1
a57 1
<a href="http://man.openbsd.org?query=twm">twm(1)</a>
d101 1
a101 1
<a href="http://man.openbsd.org?query=xf86">xf86(4)</a>
d126 1
a126 1
<a href="http://man.openbsd.org?query=startx">startx(1)</a>.
d131 1
a131 1
<a href="http://man.openbsd.org?query=xdm">xdm(1)</a>,
d147 1
a147 1
<a href="http://man.openbsd.org?query=getty">getty(8)</a>
d153 1
a153 1
<a href="http://man.openbsd.org?query=sysctl">sysctl(8)</a>
d162 1
a162 1
<a href="http://man.openbsd.org?query=xf86">xf86(4)</a>,
d190 1
a190 1
<a href="http://man.openbsd.org?query=fvwm">fvwm(1)</a>.
d194 1
a194 1
<a href="http://man.openbsd.org?query=cwm">cwm(1)</a>
d196 1
a196 1
<a href="http://man.openbsd.org?query=twm">twm(1)</a>).
d245 1
a245 1
<a href="http://man.openbsd.org?query=xconsole">xconsole(1)</a>,
d248 1
a248 1
<a href="http://man.openbsd.org?query=oclock">oclock(1)</a>,
d250 1
a250 1
<a href="http://man.openbsd.org?query=xsetroot">xsetroot(1)</a>,
d252 1
a252 1
<a href="http://man.openbsd.org?query=cwm">cwm(1)</a>
d266 1
a266 1
<a href="http://man.openbsd.org?query=xdm">xdm(1)</a>
@


1.117
log
@fix <h3> remnant; spotted by matthieu
@
text
@d54 2
a55 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cwm">cwm(1)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fvwm">fvwm(1)</a>
d57 1
a57 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=twm">twm(1)</a>
d101 1
a101 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xf86">xf86(4)</a>
d126 1
a126 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=startx">startx(1)</a>.
d131 1
a131 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xdm">xdm(1)</a>,
d147 1
a147 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getty">getty(8)</a>
d153 1
a153 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl">sysctl(8)</a>
d162 1
a162 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xf86">xf86(4)</a>,
d190 1
a190 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fvwm">fvwm(1)</a>.
d194 1
a194 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cwm">cwm(1)</a>
d196 1
a196 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=twm">twm(1)</a>).
d245 1
a245 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xconsole">xconsole(1)</a>,
d248 1
a248 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=oclock">oclock(1)</a>,
d250 1
a250 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xsetroot">xsetroot(1)</a>,
d252 1
a252 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cwm">cwm(1)</a>
d266 1
a266 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xdm">xdm(1)</a>
@


1.116
log
@move section 8.2 "x won't start, i get lots of errors" to the main x11 faq.
also remove mention of alpha since i'm told x doesn't work there.

suggested by matthieu
@
text
@d150 1
a150 1
<h3>8.2 - X won't start, I get lots of error messages</h3>
@


1.115
log
@remove per-platform x11 instructions, which essentially just said to
read /usr/X11R6/README or had copied the text from there.

ok matthieu
@
text
@d150 30
@


1.114
log
@remove section 11.1.2 "can i have any kind of graphics without x?" because
it basically just says nope.

and if you have to ask "how much computer do i need to run x?" then the answer
is probably "more than you have."
@
text
@d80 1
a80 1
to have an X application running on (for example) a Solaris machine
a118 150

<h3>11.2.1 - alpha</h3>

No X server, only X clients.

<h3>11.2.2 - amd64</h3>

Read
<a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.amd64">
/usr/X11R6/README</a> for amd64.

<p>
In some cases, set <tt>machdep.allowaperture=2</tt> in
<tt>/etc/sysctl.conf</tt>.
If needed, this is usually prompted for by the installer.

<p>
For the vast majority of users, X on amd64 auto-configures successfully,
so no further configuration is needed.

<h3>11.2.3 - armish</h3>

No X servers, only X clients.

<h3>11.2.4 - hppa</h3>

No X server, only X clients.

<h3>11.2.5 - i386</h3>

Read
<a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.i386">
/usr/X11R6/README</a> for i386.

<p>
In some cases, set <tt>machdep.allowaperture=2</tt> in
<tt>/etc/sysctl.conf</tt>.
If needed, this is usually prompted for by the installer.

<p>
For the vast majority of users, X on i386 auto-configures successfully,
so no further configuration is needed.

<h3>11.2.7 - landisk</h3>

No X servers, only X clients.

<h3>11.2.8 - loongson</h3>

No configuration needed.

<h3>11.2.9 - luna88k</h3>

Read
<a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.luna88k">
/usr/X11R6/README</a> for luna88k.

<h3>11.2.10 - macppc</h3>

Read
<a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.macppc">
/usr/X11R6/README</a> for macppc.

<p>
Set <tt>machdep.allowaperture=2</tt> in <tt>/etc/sysctl.conf</tt>.

<p>
Supported Macintosh PPC systems can be run in one of two different ways:
"accelerated" and "framebuffer" (unaccelerated).

<p>
In the "framebuffer" mode, the system will be running with 8 bits per
pixel, and the video resolution is controlled by the Macintosh environment,
so you will probably want to keep a small MacOS section on your disk to
adjust these settings.
This mode has the advantage of Just Working, however it can be frustratingly
inflexible (for example, altering resolution may require booting Mac OS).

<p>
If your Macintosh has an ATI-based video system, it can run using an
accelerated X server, which gives better performance and more control
in the OpenBSD environment.
The NVIDIA video cards in some macppc systems will also work in many cases.
The README file has details on configuring the accelerated driver, start
by using the sample file there.

<p>
While the README file details using the standard Apple one-button mouse
with X, unless you are using a laptop, it is highly recommended that you
just buy a modern third-party USB mouse with three or more buttons.

<h4>CRT iMacs and X</h4>

iMacs have a very unusual (in this day) CRT, in that it has a fixed
horizontal scan frequency.
Attempting to use a horizontal sweep speed outside a very narrow range
will cause the monitor to not light up.
The following lines, added to xorg.conf in the <tt>Section "Monitor"</tt>
area seem to make a lot of CRT-based iMacs in the 333MHz to 500MHz range
(and possibly more!) work well:

<blockquote><pre>
        HorizSync       60.0 - 60.0
        VertRefresh     43.0 - 117.0
</pre></blockquote>

You may wish to restrict the lower limit of <tt>VertRefresh</tt> to
values that you are more likely to find acceptable, for example 70.

<h3>11.2.13 - sgi</h3>

X runs on the O2 system's frame buffer in unaccelerated mode.

<h3>11.2.14 - sparc</h3>

Read
<a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.sparc">
/usr/X11R6/README</a> for sparc.

<p>
With a single supported framebuffer, there is no configuration needed.
If you wish to use a multi-headed configuration, see the above README file
for details.

<p>
Resolution is controlled by the firmware before booting OpenBSD.

<h3>11.2.15 - sparc64</h3>

Read
<a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.sparc64">
/usr/X11R6/README</a> for sparc64.

<p>
Most simple configurations now Just Work.
If yours does not, or you wish to get fancy, see the above README file.

<h3>11.2.16 - vax</h3>

No X servers, only X clients.

<h3>11.2.17 - zaurus</h3>

Read
<a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.zaurus">
/usr/X11R6/README</a> for zaurus.

<p>
No configuration needed, X "Just Works".

d123 1
a123 1
<h3>11.3.1 - On Demand:</h3>
d128 1
a128 1
<h3>11.3.2 - Boot directly into X:</h3>
a151 2
<h3>11.4.1 - Introduction</h3>

d186 1
a186 1
<h3>11.4.2 - startx(1) startup</h3>
d234 1
a234 1
<h3>11.4.3 - xdm(1) startup</h3>
d265 1
a265 1
<h3>11.4.4 - Trying a new window manager</h3>
@


1.113
log
@- remove section 1.9 "what's new in 5.8" (just read the release page)
- remove section 2.1 "web pages of interest"
- amd 64 -> amd64
- mail list -> mailing list
- clean up table of contents
- remove "back" button on index (browsers can do this by themselves now)

ok tb
@
text
@a86 29
<h3>11.1.1 - How much computer do I need to run X?</h3>

X itself is a pretty large program.
A fast computer will be appreciated if you are starting it and stopping
it regularly.
However, once running, it performs pretty responsively on a very modest
computer.
To get responsive display performance on some platforms, even for just
text, you will want to run X.
These platforms, such as <a href="../sparc.html">sparc</a> and
<a href="../sparc64.html">sparc64</a>, were intended to be used with a
graphical interface, and the text console performance is very poor.

<p>
That being said, the point of running X is usually to run X applications.
Some X applications are very lean; others will seemingly take and use
all the processor and RAM you can give them.
Of course, some users just like to use X to provide a large number of
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xterm">xterm(1)</a>
windows, which can be done on very modest hardware.

<h3>11.1.2 - Can I have any kind of graphics without X?</h3>

Assuming you won't accept
<a href="https://en.wikipedia.org/wiki/ASCII_Art">ASCII graphics</a>,
that requires some kind of framebuffer console driver.
Some operating systems provide this, but there is not currently one for
OpenBSD, nor is there much interest among developers for one.

d437 1
a437 1
<tt>/usr/X11R6/lib/X11/fvwm/.fvwmrc</tt>)).
@


1.112
log
@Fix numbering of sub-sub-sections, pointed out by lists () wrant ! com
@
text
@d2 2
a3 1
<html><head><title>11 - The X Window System</title>
d5 5
@


1.111
log
@windowss -> windows, from Jan Stary
@
text
@d166 1
a166 1
<h3>11.2.5 - hppa</h3>
d170 1
a170 1
<h3>11.2.6 - i386</h3>
@


1.110
log
@new sentence, new line. many formatting improvements, including renumbering
the sections after some were stripped out years ago. zap more whitespaces.

ok tb
@
text
@d100 1
a100 1
windowss, which can be done on very modest hardware.
@


1.109
log
@md64, i386, macppc or zaurus don't need to disable the console getty(8)
from TJ. Thanks
@
text
@d6 1
a6 1
<meta name="copyright" content="This document copyright 1998-2015 by OpenBSD.">
d13 1
a13 1
<img alt="[OpenBSD]" src="../images/smalltitle.gif" border="0" height="30" width="141">    
d19 2
a20 1
<a href="faq12.html">[To Section 12 - Hardware and Platform-Specific Questions]</a>
d29 4
a32 5
<li><a href="#Intro">11.1 - Introduction to X</a>
<li><a href="#ConfigX">11.2 - Configuring X</a>
<!-- <li><a href="#amd64i386">11.3 - Configuring X on amd64 and i386</a> -->
<li><a href="#StartingX">11.4 - Starting X</a>
<li><a href="#CustomizingX">11.5 - Customizing X</a>
d45 1
a45 1
Most of the "personality" one will feel from X will be due to the 
d47 8
a54 8
OpenBSD ships with a free version of the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fvwm&amp;sektion=1">fvwm(1)</a>
and 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cwm&amp;sektion=1">cwm(1)</a>
window managers, although you may wish to use any of the others
that are in <a href="faq15.html">packages</a>.
Search using a key of "<tt>window manager</tt>" for a list of the many
available options.
d57 1
a57 1
X is considered a "client-server" structured protocol, however the 
d59 1
a59 1
The computer with the graphics on the screen is the "X server."
d61 1
a61 1
is the "X client," even though it may be a much more powerful computer
d65 1
a65 1
running on a small, low power machine on your desk for their user 
d69 1
a69 2
It is possible to run X clients on a system without any graphical
support.
d74 1
a74 1
to have an X application running on (for example) a Solaris machine 
d78 1
a78 1
The client and server can also be running on the same machine, and for 
d82 4
a85 2
X itself is a pretty large program. A fast computer will be appreciated
if you are starting it and stopping it regularly.
d95 1
a95 2
That being said, the point of running X is usually to run X
applications.
d98 3
a100 3
Of course, some users just like to use X to provide a large number of 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xterm&amp;sektion=1">xterm(1)</a>s,
which can be done on very modest hardware.
d103 1
d111 4
a114 2
<b>Good news:  In the vast majority of hardware in most platforms, X
requires no configuration at all, it Just Works.</b>
d117 2
a118 2
The details of manual X configuration varies considerably from
platform to platform.
d120 1
a120 1
information in <tt>/usr/X11R6/README</tt> in the installed system.
d123 4
a126 4
Several platforms require the 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xf86&amp;sektion=4">xf86(4)</a>
X aperture driver, which provides access to the memory and I/O 
ports of a VGA board and the PCI configuration registers required 
d128 1
a128 1
This driver must be enabled before it is used, either by answering 
d139 1
a139 1
There are security implications to this, so do not do this if you 
d144 1
d148 4
a151 2
<a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.amd64"
>/usr/X11R6/README</a> for amd64.
d154 2
a155 1
In some cases, set <tt>machdep.allowaperture=2</tt> in <tt>/etc/sysctl.conf</tt>.
d163 1
d167 1
d171 4
a174 2
<a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.i386"
>/usr/X11R6/README</a> for i386.
d177 2
a178 1
In some cases, set <tt>machdep.allowaperture=2</tt> in <tt>/etc/sysctl.conf</tt>.
d186 1
d190 1
d194 4
a197 2
<a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.luna88k"
>/usr/X11R6/README</a> for luna88k.
d200 5
a204 3
<a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.macppc"
>/usr/X11R6/README</a> for macppc.
   
d208 1
a208 1
<p> 
d214 5
a218 6
pixel, and the video resolution is controlled by the Macintosh
environment, so you will probably want to keep a small MacOS section on
your disk to adjust these settings.
This mode has the advantage of "Just Working", however it can be 
frustratingly inflexible (for example, altering resolution may require
booting MacOS).
d221 1
a221 1
If your Macintosh has an ATI-based video system, it can run using an 
d224 1
a224 2
The NVIDIA video cards in some macppc systems will also work in many
cases.
d234 1
d239 3
a241 3
The following lines, added to xorg.conf in the <tt>Section
"Monitor"</tt> area seem to make a lot of CRT-based iMacs in the 333MHz
to 500MHz range (and possibly more!) work well:
d245 1
a245 1
        VertRefresh     43.0 - 117.0 
d252 1
d256 4
a259 2
<a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.sparc"
>/usr/X11R6/README</a> for sparc.
d270 4
a273 2
<a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.sparc64"
>/usr/X11R6/README</a> for sparc64.
d276 2
a277 2
Most simple configurations now "Just Work".
If yours does not or you wish to get fancy, see the above README file.
d280 1
d284 4
a287 2
<a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.zaurus"
>/usr/X11R6/README</a> for zaurus.
d292 2
a293 5
<!--
<h2 id="amd64i386">11.3 - Configuring X on amd64 and i386</h2>
 be nice to see this section rewritten...
-->
<h2 id="StartingX">11.4 - Starting X</h2>
d296 2
a297 1
<h3>11.4.1 - On Demand:</h3>
d299 3
a301 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=startx&amp;sektion=1">startx(1)</a>.
a302 1
<h3>11.4.2 - Boot directly into X:</h3>
d304 1
a304 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xdm&amp;sektion=1">xdm(1)</a>,
d306 1
a306 1
xdm(1) is started as root, normally by <a href="faq10.html#rc">rc</a>,
d309 2
a310 2
If or when that X session should be terminated (including by hitting 
CTRL-ALT-Backspace), xdm(1) will return, prompting the user to login again.
d320 1
a320 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getty&amp;sektion=8">getty(8)</a>
d323 3
a325 1
<h2 id="CustomizingX">11.5 - Customizing X</h2>
a326 1
<h3>11.5.1 - Introduction</h3>
d335 1
a335 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fvwm&amp;sektion=1">fvwm(1)</a>.
d339 1
a339 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cwm&amp;sektion=1">cwm(1)</a>
d341 1
a341 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=twm&amp;sektion=1">twm(1)</a>).
d343 1
a343 1
<a href="faq15.html">packages</a>.
d361 1
d363 1
a363 3
<h3>11.5.2 - startx(1) startup</h3>
startx(1) looks for the file <tt>.xinitrc</tt> in the user's home
directory.
d390 1
a390 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xconsole&amp;sektion=1">xconsole(1)</a>,
d393 1
a393 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=oclock&amp;sektion=1">oclock(1)</a>,
d395 1
a395 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xsetroot&amp;sektion=1">xsetroot(1)</a>,
d397 1
a397 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cwm&amp;sektion=1">cwm(1)</a>
d404 1
a404 1
If a user's home directory does not have a <tt>.xinitrc</tt> file in it,  
d406 2
a407 2
This file can provide you some additional ideas for your .xinitrc
script.
d409 1
d411 1
a411 2
<h3>11.5.3 - xdm(1) startup</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xdm&amp;sektion=1">xdm(1)</a>
d421 2
a422 2
When X shuts down, either deliberately or accidently, xdm will start it   
back up again.
d440 2
a441 1
<h3>11.5.4 - Trying a new window manager</h3>
d446 1
a446 1
$ startx /usr/local/bin/fluxbox
d456 7
a462 6
on the background ("root window"), chose "(Re)Start", then pick your
preferred window manager (however, note that you will need to add
your alternative window managers to your <tt>.fvwmrc</tt> file (the
system-wide default is <tt>/usr/X11R6/lib/X11/fvwm/.fvwmrc</tt>)).
cwm(1) allows you to invoke another window manager by hitting
Ctrl-Alt-w, and typing in the manager you wish to switch to.
d473 2
a474 1
<a href= "faq12.html">[To Section 12 - Hardware and Platform-Specific Questions]</a>
@


1.108
log
@TJ's work on the FAQ continues, this time a big diff with lots of small
fixes:

- only specify the current supported "set debug" choices in the options
  section of the pf faq
- clarify ipv4 vs ipv6 configs in the nat section of the pf faq
- mention that usb disk images are available in addition to the cd isos
- don't say that all donors get their name on the donations page anymore
- replace the last few instances of "ftp mirrors" with "http mirrors" or
  just "mirrors" where appropriate
- reword some 5.8 mentions to reduce the amount of version bumps we have
  to do each release
- few minor tweaks

Thanks!
@
text
@d297 1
a297 1
to use xdm(1).
@


1.107
log
@Clean up meta tags.

name=distribution, name=keywords, and name=resource-type have no effect
in modern search engines and just clutter up the page source.

From Pavel Plamenov.
@
text
@d43 2
a44 2
However, by itself, X provides very little: one also must have a "Window
Manager", to present a user interface.
d51 1
a51 1
window managers, although you may wish to use any of the other window managers
d53 2
a54 2
Search using a key of "<tt>window manager</tt>" for a list of the many window
managers available.
d59 3
a61 3
The computer with the graphics on the screen is the "X Server".
The application which directs the X server what to put on its screen
is the "X Client", even though it may be a much more powerful computer
d63 2
a64 2
This model can be used to have large, processor intensive applications
(X clients) running on a very powerful machine, using the X Server
d72 1
a72 1
armv7 system, displaying its output on a SPARC's graphical display (the X
d83 1
a83 1
X itself is a pretty large program, a fast computer will be appreciated
d96 1
a96 1
Some X applications are very lean, others will seemingly take and use
d104 1
a104 1
<a href="http://en.wikipedia.org/wiki/ASCII_Art">ASCII graphics</a>,
d114 1
a114 1
The details of manual configuration of X varies considerably from
d134 1
a134 1
platform, and rebooting the machine (this sysctl cannot be changed
d291 1
a291 1
your password</a>, and edit out the xdm_flags line in your
d305 1
a305 1
to change the Window Manager (the program that most defines your X
d366 1
a366 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xconsole&amp;sektion=1">xconsole(1)</a>
d371 1
a371 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xsetroot&amp;sektion=1">xsetroot(1)</a>
d400 1
a400 1
xdm(1), and certainly before having xdm(1) start at boot, otherwise, you
d410 1
a410 1
xterm(1)s) can be placed here, but all should be backgrounded except
d428 1
a428 1
window manager terminates X, it does not return you back to your
@


1.106
log
@Add 'link rel="canonical"' to pages, acting as a hint to search engines
to list the copies on www.openbsd.org rather than mirrors.

From Carlin Bingham, ok millert@@ nick@@
@
text
@a4 1
<meta name="resource-type" content="document">
a5 2
<meta name="keywords" content="openbsd,faq11">
<meta name="distribution" content="global">
@


1.105
log
@
updates for 5.7
@
text
@d10 1
@


1.104
log
@Convert the rest of the FAQ to id="" instead of <a name=""></a>.

prodded by nick@@
@
text
@d9 1
a9 1
<meta name="copyright" content="This document copyright 1998-2014 by OpenBSD.">
a336 7

<!--XXX version -->
The system-wide defaults are in <tt>/etc/X11</tt> and were initially
loaded from <a href="faq4.html#FilesNeeded">xetcXX.tgz</a>, which is not
reloaded by the <a href="upgrade56.html">suggested upgrade process</a>,
so if you make system-wide changes, they will persist, but you may need
to merge those changes into later versions of those files.
@


1.103
log
@
faq updates for 5.6
@
text
@d40 1
a40 3
<p>
<a name="Intro"></a>
<h2>11.1 - Introduction to X</h2>
d111 1
a111 3
<p>
<a name="ConfigX"></a>
<h2>11.2 - Configuring X</h2>
a268 2

<p>
d270 1
a270 2
<a name="amd64i386"></a>
<h2>11.3 - Configuring X on amd64 and i386</h2>
d273 1
a273 2
<a name="StartingX"></a>
<h2>11.4 - Starting X</h2>
d301 1
a301 3
<p>
<a name="CustomizingX"></a>
<h2>11.5 - Customizing X</h2>
@


1.102
log
@
s=http://www.openbsd.org/cgi-bin/cvsweb=http://cvsweb.openbsd.org/cgi-bin/cvsweb=
(new domain for man pages).  Lots more to come!
@
text
@d76 1
a76 1
mvme88k, displaying its output on an alpha's graphical display (the X
d154 2
a155 1
Set <tt>machdep.allowaperture=2</tt> in <tt>/etc/sysctl.conf</tt>.
d172 2
a173 1
Set <tt>machdep.allowaperture=2</tt> in <tt>/etc/sysctl.conf</tt>.
a239 6
<h3>11.2.11 - mvme68k</h3>
No X servers, only X clients.

<h3>11.2.12 - mvme88k</h3>
No X servers, only X clients.

d351 1
a351 1
reloaded by the <a href="upgrade55.html">suggested upgrade process</a>,
@


1.101
log
@
luna88k has X!  Info and diff from aoyama@@, thanks!
@
text
@d147 1
a147 9
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.alpha"
>/usr/X11R6/README</a> for alpha.

<p>
Set <tt>machdep.allowaperture=1</tt> in <tt>/etc/sysctl.conf</tt>.

<p>
The TGA and some VGA cards are supported.
No further configuration should be needed.
d150 1
a150 1
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.amd64"
a162 4
<h3>11.2.4 - hp300</h3>
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.hp300"
>/usr/X11R6/README</a> for hp300.

d167 1
a167 1
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.i386"
d184 1
a184 1
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.luna88k"
d188 1
a188 1
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.macppc"
d248 1
a248 1
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.sparc"
d260 1
a260 1
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.sparc64"
d268 1
a268 9
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.vax"
>/usr/X11R6/README</a> for vax.

<p>
The X server currently only works on VAXstation 4000 models with either a 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lcg&amp;sektion=4&amp;arch=vax">lcg(4)</a>
or
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lcspx&amp;sektion=4&amp;arch=vax">lcspx(4)</a>
framebuffer.
d271 1
a271 1
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.zaurus"
@


1.100
log
@
welcome 5.5!
@
text
@d196 2
a197 1
No X servers, only X clients.
@


1.99
log
@
remove www@@ references, simplify footers on all pages.
@
text
@d374 1
a374 1
reloaded by the <a href="upgrade54.html">suggested upgrade process</a>,
@


1.98
log
@
X -configure is broke, and apparently won't be fixed.  Unfortunately, that
pretty much means 11.3 is of minimal value anymore, though realistically
it needed some major updating and improvement anyway.  Delete for now.
@
text
@a4 1
<link rev="made" href="mailto:www@@openbsd.org">
d9 1
a9 1
<meta name="copyright" content="This document copyright 1998-2013 by OpenBSD.">
a483 2


d485 2
a486 1
<font color= "#0000e0">
a489 8
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
<br>
<small>$OpenBSD: faq11.html,v 1.97 2013/11/01 14:05:57 nick Exp $</small>
@


1.97
log
@
updates for 5.4
@
text
@d33 1
a33 1
<li><a href="#amd64i386">11.3 - Configuring X on amd64 and i386</a>
a167 3
IF further configuration is needed, use the 
<a href="#amd64i386">X&nbsp;-configure</a>
process <a href="#amd64i386example">below</a>.
a188 3
IF further configuration is needed, use the
<a href="#amd64i386">X&nbsp;-configure</a>
process <a href="#amd64i386example">below</a>.
d299 1
d302 2
a303 311
If you haven't tried <a href="#StartingX">just starting X</a>, stop!
Don't make work for yourself if you you don't need to!
Most i386 and amd64 users will find X Just Works without any manual
configuration.

<h3>11.3.1 - X.Org configuration</h3>
Sometimes, X does not "just work" as desired, and sometimes, you need to
customize something that does work.

<p>
If X does not work as desired with your system, you will need to create a
configuration file.
A good starting place (and sometimes, a good ending place!) is to run
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=Xorg&amp;sektion=1">Xorg(1)</a>
in the "X -configure" mode.
This will load all available video driver modules,
probes for other hardware, and based on what it finds, writes out a xorg.conf
file that may or may not work.
Even if it does not work, it will be a useful starting point for
creating one that works as desired.

<p>
Another time-honored way to
configure X is to use your favorite search engine to hunt for someone
else who already solved your problem.
Note that <tt>xorg.conf</tt> files for other Unix-like OSs will often
provide very useful tips on what you need to get X running on your
similar hardware.
While that's not a bad way, that method won't be emphasized here.

<p>
<a name="amd64i386example"></a>
<h3>11.3.2 - Our example machine</h3>
As a demonstration of setting up X, we will use an old Celeron 400MHz
system, with an AGP video slot.
The video card is an old AGP card, shown in the dmesg as:

<blockquote><pre>
vga1 at pci1 dev 0 function 0 "3DFX Interactive Banshee" rev 0x03
</pre></blockquote>

This is a once high-end video card, with 16M RAM, but is now mostly
unsupported on modern versions of "mainstream" operating systems.
The monitor attached to the system is a Sony Multiscan G400 19" CRT
monitor, and it would be nice to run this monitor at 1280x1024, with 
a decent refresh rate, and 24 bit color.

<p>
First, after installing OpenBSD with X (and making sure the aperture
driver is enabled in the kernel), let's see what X.Org's auto detection
and configuration does, after all, we might get lucky.
So, we simply log in and use the command
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=startx&amp;sektion=1">startx(1)</a>.
The screen goes blank for a few moments, then we get the X
"checkerboard" background, the "X" cursor, and then an xterm window.

<p>
It works!

<p>
More or less.
While the system is fully functional, it doesn't appear to have picked
up any of the capabilities of the monitor, and is running at what is
clearly a low resolution (640x480).
We hope to do better than this.
Much better, in fact.
This does mean we need to make our own xorg.conf file, however.

<p>
Let's use the "X -configure" process to generate a starting <tt>xorg.conf</tt>
file.
You will need to do this as root:
<blockquote><pre>
# <b>X -configure</b>
 [...]
Your xorg.conf file is /root/xorg.conf.new

To test the server, run 'X -config /root/xorg.conf.new'
</pre></blockquote>

By the way, the message is serious -- use the entire path to your 
<tt>xorg.conf.new</tt> file, even if it is sitting in your current
default directory.
Failing to do so will result in
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=X&amp;sektion=7">X(7)</a>
not finding the file, and it will silently use the default
configuration, and if that had worked, you wouldn't be using this
process!
This can set back your troubleshooting quite a bit.
Trust us on this.

<p>
Let's do as it says, and see what we get:
<blockquote><pre>
# <b>X -config /root/xorg.conf.new</b>
</pre></blockquote>

Now, all we get is a black screen.
Things had started out so well...

<p>
This might be a really good time to talk about ways of 
exiting X when started in this way.
In order of preference:
<ul>
<li><b>CTRL-ALT-Backspace</b>:  This hopefully causes X to immediately
terminate, along with all X applications that are running.
Of course, during the configuration process, you don't have any 
applications running, so this is not a problem (and in fact, at
this point, this is your <i>best</i> way to exit X).
<li><b>SSH into the box</b>, and 
"<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkill&amp;sektion=1">pkill</a>
Xorg", which may kill the X process, and may return you to a usable console.
<li><b>SSH into the box</b> and reboot it.
<li><b>Reset or power button.</b>  Sometimes things go really bad.
Yes, it is usually good to get X running before you load critical
applications on the system.
Sometimes, a bad X configuration will hang the entire machine to the 
point that only a hard reset will resolve the problem.
</ul>

Fortunately for us, CTRL-ALT-Backspace does the job here, and we
are returned to a command prompt.
So now we need to see if we can figure out what is wrong.
First, we should look at what Xorg thinks is going on, and that is 
recorded in the file <tt>/var/log/Xorg.0.log</tt>.
In this case, it appears that X thinks all is running fine, there are no
obviously significant errors shown in the log (lines that start with an
"<tt>(EE)</tt>" are errors).

<p>
Here is where knowing your hardware comes in handy.
Attaching this system to a different monitor while it is showing the
blank screen produces a "Sync. Out of Range" message on the display.
So, apparently the configuration X gave us will not run on this monitor,
and may not run on ANY monitor, if a video mode was selected that isn't
possible for this particular card (keep in mind, X is looking at the
chips on the card, and what they are potentially capable of, not how the
manufacturer put it all together).
Different monitors will do different things when the timing is way off,
some will attempt to display what they can, others will drop to power 
saving mode, some will make horrible noises, some will display useful
messages on the screen.
This monitor seems to do none of the above.
A note is made to NOT use this monitor for initial X configuration in
the future.

<p>
Looking through the generated xorg.conf.new file, we see this:
<blockquote><pre>
Section "Monitor"
        #DisplaySize      370   270     # mm
        Identifier   "Monitor0"
        VendorName   "SNY"
        ModelName    "SONY CPD-G400"
 ### Comment all HorizSync and VertSync values to use DDC:
        HorizSync    30.0 - 107.0
        VertRefresh  48.0 - 120.0
        Option      "DPMS"
EndSection
</pre></blockquote>

As a test, let's try using DDC ("Data Display Channel", a way the
monitor can tell the computer and video card what it is capable of), and
see what happens.
This time, we get the X mesh pattern and the moving cursor, which is all
we expect when invoking X in this way (we terminate X using the
CTRL-ALT-Backspace trick above).
It is (again) a very low resolution, but it is working, so we can be
pretty sure we have a timing and resolution problem.
We'll restore the "HorizSync" and "VertRefresh" lines as they were,
as we have verified this monitor's specs through a bit of Internet
searching.

<p>
Let's try to force Xorg to a particular resolution, and see if we have any
luck.
In the <tt>Section "Screen"</tt> part of the xorg.conf file, we want to add 
a couple lines.
The added lines are shown in bold:

<blockquote><pre>
Section "Screen"
        Identifier "Screen0"
        Device     "Card0"
        Monitor    "Monitor0"
<b>        DefaultDepth   24</b>
        SubSection "Display"
                Viewport   0 0
                Depth     1
        EndSubSection
        SubSection "Display"
                Viewport   0 0
                Depth     4
        EndSubSection
        SubSection "Display"
                Viewport   0 0
                Depth     8
        EndSubSection
        SubSection "Display"
                Viewport   0 0
                Depth     15
        EndSubSection
        SubSection "Display"
                Viewport   0 0 
                Depth     16
        EndSubSection
        SubSection "Display"
                Viewport   0 0
                Depth     24
<b>                Modes	"1280x1024"</b>
        EndSubSection
EndSection
</pre></blockquote>

These two changes tell X we want to use a 24 bit display depth, and 
for 24 bit depths, we want the resolution 1280x1024.
As no other resolution is listed for "Depth 24", the system will 
be forced to that resolution.

<p>
We test as above, and...  SUCCESS!
We have what appears to be a very nice, high resolution display.
Note that ALL that is expected is a mesh pattern (very good for seeing
how good your monitor REALLY is and also great for calibrating LCD
displays, called the
"<a href="http://www.openbsd.org/cgi-bin/cvsweb/xenocara/data/bitmaps/root_weave">root
weave</a>") and a movable cursor.
It is not intended to be functional at this point.

<p>
Now, we want to install this xorg.conf file so we can see how well we
are really doing with usable running of X.

<blockquote><pre>
# cp xorg.conf.new /etc/X11/xorg.conf
</pre></blockquote>

We can now try X using the normal startx(1) command.
It works!

<p>
It would probably be good to verify that we are at the resolution and
color depth we desire, and also that we are running at a respectable
refresh rate.
We can do that with the 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xrandr&amp;sektion=1">xrandr(1)</a>
and 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xdpyinfo&amp;sektion=1">xdpyinfo(1)</a>
commands.
Among other things, xdpyinfo(1) tells us:
<blockquote><pre>
    [...]
screen #0:
  print screen:    no
  dimensions:    1280x1024 pixels (433x347 millimeters)
  resolution:    75x75 dots per inch
  depths (7):    24, 1, 4, 8, 15, 16, 32
  root window id:    0x44
  depth of root window:    24 planes
    [...]
</pre></blockquote>

So, yes, we are running at 1280x1024 with a depth of 24 planes (bits).

<p>
xrandr(4) tells us:
<blockquote><pre>
 SZ:    Pixels          Physical       Refresh
*0   1280 x 1024   ( 433mm x 347mm )  *85   75   60  
 1   1280 x 960    ( 433mm x 347mm )   85   60  
    [...]
</pre></blockquote>

which tells us we are running with an 85Hz refresh rate, so this should
be a very comfortable setting for most users.

<p>
<h3>11.3.3 - What if it isn't that "easy"?</h3>
Sometimes, things just don't go together.
Here are some tips.

<ul>
<li>Read the man page for the X server you are using.
In our example, <tt>/var/log/Xorg.0.log</tt> shows X is using TDFX as
the driver, so that would be the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tdfx&amp;sektion=4">tdfx(4)</a>
man page.
You will often find tips, limitations, and options for configuring your
video card.
These vary from driver to driver, so don't assume you don't need to read the 
man page for the driver you are using now because you read a different one
before.

<li>Try different monitors.
As we discovered in our above example, different monitors will often give 
different clues as to what might be wrong.

<li>Try the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vesa&amp;sektion=4">vesa(4)</a>
X driver.
This is definitely a "last choice" for performance reasons, but it works
on almost all video cards, including those for which none of the "better"
X server drivers will work with.

<li>Use different hardware.
If you have a choice of video cards to use, try some others.


</ul>

d499 1
a499 1
<small>$OpenBSD: faq11.html,v 1.96 2013/05/01 13:16:32 nick Exp $</small>
@


1.96
log
@
updates for 5.3
@
text
@d689 1
a689 1
reloaded by the <a href="upgrade53.html">suggested upgrade process</a>,
d813 1
a813 1
<small>$OpenBSD: faq11.html,v 1.95 2012/11/05 03:38:09 nick Exp $</small>
@


1.95
log
@
missed a 50->51 change last time 'round, so didn't find it when searching
for 51 this time around.  thanks to Tomas Bodzar!
@
text
@d10 1
a10 1
<meta name="copyright" content="This document copyright 1998-2012 by OpenBSD.">
d689 1
a689 1
reloaded by the <a href="upgrade52.html">suggested upgrade process</a>,
d813 1
a813 1
<small>$OpenBSD: faq11.html,v 1.94 2012/05/01 14:35:15 nick Exp $</small>
@


1.94
log
@
welcome 5.1!
@
text
@d686 1
d689 1
a689 1
reloaded by the <a href="upgrade50.html">suggested upgrade process</a>,
d813 1
a813 1
<small>$OpenBSD: faq11.html,v 1.93 2011/12/21 09:05:24 ajacoutot Exp $</small>
@


1.93
log
@More typos, from Steffen Daode Nurpmeso.
@
text
@d10 1
a10 1
<meta name="copyright" content="This document copyright 1998-2011 by OpenBSD.">
d812 1
a812 1
<small>$OpenBSD: faq11.html,v 1.92 2011/12/07 01:18:24 nick Exp $</small>
@


1.92
log
@
Talk about cwm, link to cwm.  From James Turner (James at calminferno
dot net), thanks!
@
text
@a35 2
<!-- li><a href="#TuningRes">11.9 - Tuning your monitor resolution under
  X</a -->
d671 1
a671 1
Similar to the the <a href="faq10.html#rc">system startup script</a>,
d684 1
a684 1
to the your version of OpenBSD.
d812 1
a812 1
<small>$OpenBSD: faq11.html,v 1.91 2011/11/01 10:52:27 nick Exp $</small>
@


1.91
log
@
updates for 5.0 (and some non-version-related improvements).
@
text
@d57 1
a57 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fvwm&amp;sektion=1">cwm(1)</a>
d814 1
a814 1
<small>$OpenBSD: faq11.html,v 1.90 2011/07/24 16:18:56 nick Exp $</small>
@


1.90
log
@
"re-tone".  Make it clear that X usually Just Works for people, and that
diving in to make your own xorg.conf file before verifying it is needed
is wrong.  Per discussion with matthieu@@
@
text
@d690 1
a690 1
reloaded by the <a href="upgrade49.html">suggested upgrade process</a>,
a802 177
<!-- a name= "TuningRes"></a>
<h2>11.9 - Tuning your monitor resolution under X</h2>

<i>Note: Most users do NOT need to worry about manually creating a 
ModeLine in modern versions of X.
HOWEVER, sometimes it is needed for unusual situations.</i>

<p>
Getting an X server working at an acceptable resolution with many multi-sync
monitors is possible.  If anyone has tried to do this with the standard
xorgconfig or XF86Setup utilities, they probably didn't get the best possible
results.  One of the more painful aspects is simply getting your monitor running
with your preferred resolution,
and then
getting the vertical scan rate set to at least 72-75 Hz,
a rate where the screen flicker is much less visible to humans.  
Conversely, what if you are trying to set the vertical scan rate so it is very low?
You can set it at 50 Hz so that it can be captured on to video without flicker,
but the methods to do this are non-obvious with the standard X tools and
documentation.

<p>
Finally, at the resolutions many people normally use with inexpensive VGA monitors
(800x600, 1024x768, 1152x900,
1280x1024), it is possible (at least on newer monitors) to use vertical scan rates of
85Hz and above, to achieve an extremely clean, palatable picture.
The X server has a mechanism which allows you to describe in detail the video
mode you want to use, this is the ModeLine.  A ModeLine has four sections, a single number for the pixel clock,
four numbers for horizontal timings, four numbers for vertical timings,
and an optional section with a list of flags specifying other characteristics
of the mode (such as Interlace, DoubleScan, and more... see the
xorg.conf(5) manual page for more ModeLine details).

<p>
Generating a ModeLine is a black art... Luckily, there are several scripts
which can do this for you.  One is <a href="http://koala.ilog.fr/cgi-bin/nph-colas-modelines">
Colas XFree86 ModeLine Generator</a>.  Another is
<a href="http://xtiming.sourceforge.net/">The XFree86 Modeline Generator</a>
hosted at SourceForge, and there are several others available on
<a href="http://freshmeat.net/search/?q=modeline">Freshmeat</a>.
Before you can use these ModeLine generators, you need to figure
out the vertical
and horizontal sync limits for your monitor.  This is often documented
in the manual, or on the manufacturer's web site.  If you can't find
either of those, simply search the web for the monitor make and model,
several people have been kind enough to compile lists with this information.

<p>
For example, say you have a Dell D1226H monitor.  You searched in agony
at Dell's web site to find that it has a 30-95 kHz horizontal scan range,
and a 50-160 Hz vertical scan range.  Visit the ModeLine generator page,
enter this information.  Next, you need to enter the minimum
vertical scan rate you want.  Any rate at or above 72 Hz should generally have low
visible flicker.  As you go higher, the clearer and crisper your screen
image becomes.  

<p>
With all of these bits of information, the script will generate a ModeLine
for every possible 4x3 resolution which your monitor can support, above
the minimum vertical scan rate which you enter.  If someone enters the Dell specs above
and a 75 Hz vertical scan minimum, the script gives out something like the
following:

<pre>
ModeLine "320x240" 20.07 320 336 716 448 240 242 254 280 #160Hz
ModeLine "328x246" 20.86 328 344 424 456 246 248 260 286 #160Hz
...
ModeLine "816x612" 107.39 816 856 1056 1136 612 614 626 652 #145Hz
ModeLine "824x618" 108.39 824 864 1064 1144 618 620 632 658 #144Hz
ModeLine "832x624" 109.38 832 872 1072 1152 624 626 638 664 #143Hz
...
ModeLine "840x630" 109.58 840 880 1080 1160 630 632 644 670 #141Hz
ModeLine "848x636" 110.54 848 888 1088 1168 636 638 650 676 #140Hz
...
ModeLine "1048x786" 136.02 1048 1096 1336 1432 786 788 800 826 #115Hz
ModeLine "1056x792" 136.58 1056 1104 1344 1440 792 794 806 832 #114Hz
ModeLine "1064x798" 137.11 1064 1112 1352 1448 798 800 812 838 #113Hz
...
ModeLine "1432x1074" 184.07 1432 1496 1816 1944 1074 1076 1088 1114 #85Hz
ModeLine "1576x1182" 199.86 1576 1648 2008 2152 1182 1184 1196 1222 #76Hz
ModeLine "1584x1188" 198.93 1584 1656 2016 2160 1188 1190 1202 1228 #75Hz
</pre>

<p>
Now, this monitor claims to do 1600x1200 @@ 75 Hz, but the script does not
say this is within 75 Hz.  So, if you really want exactly 1600x1200, 
go down a notch with your minimum vertical rate... (Here, we go down
to 70 Hz)

<pre>
ModeLine "1592x1194" 197.97 1592 1664 2024 2168 1194 1196 1208 1234 #74Hz
ModeLine "1600x1200" 199.67 1600 1672 2032 2176 1200 1202 1214 1240 #74Hz
ModeLine "1608x1206" 198.65 1608 1680 2040 2184 1206 1208 1220 1246 #73Hz
ModeLine "1616x1212" 197.59 1616 1688 2048 2192 1212 1214 1226 1252 #72Hz
ModeLine "1624x1218" 199.26 1624 1696 2056 2200 1218 1220 1232 1258 #72Hz
ModeLine "1632x1224" 198.15 1632 1704 2064 2208 1224 1226 1238 1264 #71Hz
ModeLine "1640x1230" 199.81 1640 1712 2072 2216 1230 1232 1244 1270 #71Hz
ModeLine "1648x1236" 198.64 1648 1720 2080 2224 1236 1238 1250 1276 #70Hz
</pre>

<p>
Here, we see the monitor really does 1600x1200 @@ 74 Hz when the dot clock
(bandwidth) is limited to 200MHz.  Set the bandwidth according to the
limits defined by the monitor.

<p>
Once you have your ModeLines, put them into your /etc/X11/xorg.conf file. 
Comment out the old ModeLines, so that you can use them again if the new ones
don't work.
Next, choose what resolution you actually want to run at.   First,
figure out if X is running in accelerated mode (which it does with most video
cards), so you know which <tt>"Screen"</tt> section of the xorg.conf to modify.
Or, just modify all of the Screen sections.

<pre>
Section "Screen"
   Driver          "Accel"
   Device          "Primary Card"
   Monitor         "Primary Monitor"
   DefaultColorDepth 32
   SubSection "Display"
      Depth        32
      Modes        "1280x1024" "1024x768"
   EndSubSection
</pre>

<p>
The first resolution you see after the "Modes" keyword is the resolution that
X is going to start in.  By pressing CTRL-ALT-KEYPAD MINUS, or CTRL-ALT-KEYPAD
PLUS, you can switch between any resolutions that you list here.  According
to the section above, X will try to start in 32-bit color mode (via
the DefaultColorDepth directive, without it X will start in 8-bit color mode.)
The first resolution it will try to use is 1280x1024 (it follows the order
of the Modes line.)  Note that "1280x1024" is just a label for the values in
the ModeLine.

<p>
Note that the ModeLine generator script has options to relax its timings for older
or smaller monitors, and also has the ability to provide ModeLines for
specific resolutions.  Depending on the type of hardware you have, it
may not be very easy to use with the default options.  If the picture is
too tall, too wide, or too small, or is shifted horizontally or vertically,
and the controls of the monitor aren't enough to correct its appearance,
one can use xvidtune(1) to adjust the ModeLine to better fit with the
monitor's timings.

<p>
On most modern monitors, there is no fixed limit on the bandwidth, thus
they are often not listed anymore in the specs. What happens is that the
more you go up in bandwidth, the fuzzier the screen image becomes.
So you may want to put in the bandwidth of your card (also named
"dotclock") to test (you cannot damage your monitor this way), and go
progressively down in bandwidth until you have a nice crisp image.

<p>
If this seems needlessly complex, that's because it is.  X.Org addresses
this, and makes this process much easier since it has several built-in
modes and is capable of reading back capabilities from "plug and play" monitors
through DDC and DDC2.

<p>
You can download the Colas XFree86 ModeLine Generator script at:
<a href="http://koala.ilog.fr/ftp/pub/Klone/">http://koala.ilog.fr/ftp/pub/Klone/</a>.
You need to grab the Klone interpreter, and compile it.  It is in the
ports as <tt>lang/klone</tt>.  The scripts
exist under the scripts directory in the Klone distribution.  (The
port installs them to /usr/local/lib/klone/scripts.)

<p>
There are two versions of the script included, the first is a CGI version identical
to the web page above.  The second is a non-CGI version
which will take your complete xorg.conf file, decode the monitor specs that
you entered into xorgconfig/XF86Setup (Now, think, did you actually
enter the specs for your monitor or just choose generic ones?),
and fix the existing ModeLines accordingly. 

<p -->
d814 1
a814 1
<small>$OpenBSD: faq11.html,v 1.89 2011/06/09 07:40:08 lum Exp $</small>
@


1.89
log
@2 small fixes and
also align "a name" links with top of browser window
and make some Meta Tags more pertinent.
@
text
@d56 3
a58 1
window manager, although you may wish to use any of the other window managers
d119 6
a124 1
The configuration of X varies considerably from platform to platform.
d168 3
a170 3
X on amd64 often auto-configures very successfully, so no further
configuration is needed in many cases.
If further configuration is needed, use the 
d192 5
a196 11
Due to the incredibly wide range of video cards, mice, keyboards, and
other hardware, configuring an i386 system to run X can be exciting.
Exciting enough that a <a href="#amd64i386">separate section</a> is
provided.

<p>
Fortunately, things are not always as bad as they may seem -- in many
cases, X "Just Works" by invoking "startx".
In these cases, your hardware will be detected and queried for its
abilities, and X will run very well.

d234 1
a234 1
using the sample file there.
d239 1
a239 1
just buy a modern third-party USB mouse.
d309 4
a312 2
The variety of hardware options on these platforms makes the X configuration
process "tricky".
d315 2
a316 5
X.Org has made great improvements in making their servers "Just Work".
In many cases, it does Just Work without any <tt>/etc/X11/xorg.conf</tt>
file.
But not always, and sometimes, you need to customize something that does
work.
d319 1
a319 1
If X does not Just Work with your system, you will need to create a
d323 2
a324 1
in the "X -configure" mode will load all available video driver modules,
d326 3
a328 2
file that may or may not work, but even if it does not work it may be a
useful starting point for creating one from scratch.
d395 2
a396 2
configuration, which may have nothing to do with the file you are
currently working with.
d991 1
a991 1
<small>$OpenBSD: faq11.html,v 1.88 2010/11/01 09:48:45 nick Exp $</small>
@


1.88
log
@
update to 4.8
@
text
@d7 2
a8 2
<meta name="description" content="the OpenBSD FAQ page">
<meta name="keywords" content="openbsd,faq">
d10 1
a10 1
<meta name="copyright" content="This document copyright 1998-2010 by OpenBSD.">
d114 1
d243 1
a243 1
Attempt to use a horizontal sweep speed outside a very narrow range
d647 1
a647 1

d688 1
a688 1
reloaded by the <a href="upgrade48.html">suggested upgrade process</a>,
d989 1
a989 1
<small>$OpenBSD: faq11.html,v 1.87 2010/06/18 13:30:54 blambert Exp $</small>
@


1.87
log
@spelling nit; simplist -> simplest

ok nick@@
@
text
@d687 1
a687 1
reloaded by the <a href="upgrade47.html">suggested upgrade process</a>,
d988 1
a988 1
<small>$OpenBSD: faq11.html,v 1.86 2010/05/26 01:43:19 nick Exp $</small>
@


1.86
log
@
sparc64 now Just Works (usually).
@
text
@d704 1
a704 1
In the simplist case, this can be as little as just the name of the
d988 1
a988 1
<small>$OpenBSD: faq11.html,v 1.85 2010/05/24 02:48:08 nick Exp $</small>
@


1.85
log
@
close tag properly, from Maurice Janssen, thanks!
@
text
@d282 2
a283 7
There are a number of variations on these machines, you will need to
know what kind of bus your system has (PCI or SBus), what kind of port
your mouse is attached to (zstty, com, or USB/PS2), and what kind of
video card you have.
Start with the sample <tt>xorg.conf</tt> file in the <tt>README</tt>
file, then modify as indicated for your actual hardware and need.
<i>Do not expect the sample file to work unmodified on your machine!</i>
d988 1
a988 1
<small>$OpenBSD: faq11.html,v 1.84 2010/05/19 12:41:02 nick Exp $</small>
@


1.84
log
@
updates for 4.7
@
text
@d199 1
a199 1
<h3>11.2.8 - loongson</h4>
d993 1
a993 1
<small>$OpenBSD: faq11.html,v 1.83 2010/05/10 03:09:21 nick Exp $</small>
@


1.83
log
@
finally figured out how to make a CRT iMac happy with X in a predictable
way.  Whudda thunk they went back to constant sweep speed monitors?
@
text
@d10 1
a10 1
<meta name="copyright" content="This document copyright 1998-2009 by OpenBSD.">
d199 2
a200 2
<h3>11.2.8 - luna88k</h3>
No X servers, only X clients.
d202 1
a202 1
<h3>11.2.9 - mac68k</h3>
d320 1
a320 1
work, anyway.
d323 5
a327 9
There are two programs that can be used to semi-automatically create a
configuration file for X.Org's i386 X servers.
Unfortunately, neither of them are guaranteed to create a usable
xorg.conf file.


<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=Xorg&amp;sektion=1">Xorg(1)</a>
run in the "X -configure" mode will load all available video driver modules,
d332 2
a333 7
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xorgconfig&amp;sektion=1">xorgconfig</a>
is another program that attempts to interactively create a xorg.conf
file, in a purely text-based application.

</ul>

In addition to the above applications, another time-honored way to
d336 3
a341 1

d692 1
a692 1
reloaded by the <a href="upgrade46.html">suggested upgrade process</a>,
d869 1
a869 1
ModeLine "320x240" 20.07 320 336 416 448 240 242 254 280 #160Hz
d993 1
a993 1
<small>$OpenBSD: faq11.html,v 1.82 2010/02/09 00:57:37 nick Exp $</small>
@


1.82
log
@
Some fixes from Seth Wright via tech@@, some of which I improved(?).  Thanks!
@
text
@d239 16
d1000 1
a1000 1
<small>$OpenBSD: faq11.html,v 1.81 2009/10/16 19:07:37 nick Exp $</small>
@


1.81
log
@
updates for 4.6
@
text
@d94 2
a95 2
These platforms, such as <a href="../sparc.html">sparc</a> and 
<a href="../sparc64.html">sparc64</a> were intended to be used with a
d586 2
a587 2
In our example, the <tt>/var/log/Xorg.0.log</tt> file, we can see X is 
using TDFX as the driver, so that would be the
d608 1
a608 1
If you have choice on the video card to use, try some others.
d668 2
a669 2
More accurately, it has more than one process; which is used depends on
how you <a href="#StartingX">start X</a>.
d696 1
a696 1
the window manager), when it exits, the script will exit, and X will be
d778 1
a778 1
Your new window manager replaces your old one, exiting the newly loaded
d984 1
a984 1
<small>$OpenBSD: faq11.html,v 1.80 2009/10/11 02:51:10 nick Exp $</small>
@


1.80
log
@
Miod@@ points out that the O2's frame buffer does work for X
@
text
@d683 1
a683 1
reloaded by the <a href="upgrade45.html">suggested upgrade process</a>,
d984 1
a984 1
<small>$OpenBSD: faq11.html,v 1.79 2009/04/30 17:19:10 nick Exp $</small>
@


1.79
log
@
updates for 4.5
@
text
@d247 1
a247 1
No X servers, only X clients.
d984 1
a984 1
<small>$OpenBSD: faq11.html,v 1.78 2009/02/22 16:57:42 nick Exp $</small>
@


1.78
log
@
a couple punctuation fixes from Alan R. S. Bueno (alan dot bsd at gmail
dot com), thanks!
@
text
@d683 1
a683 1
reloaded by the <a href="upgrade44.html">suggested upgrade process</a>,
d984 1
a984 1
<small>$OpenBSD: faq11.html,v 1.77 2009/02/19 01:32:23 nick Exp $</small>
@


1.77
log
@
new article: 11.5 - Customizing X.  With input from okan@@ and oga@@
@
text
@d749 1
a749 1
back up again
d785 1
a785 1
system-wide default is <tt>/usr/X11R6/lib/X11/fvwm/.fvwmrc</tt>).
d984 1
a984 1
<small>$OpenBSD: faq11.html,v 1.76 2008/11/12 02:59:41 nick Exp $</small>
@


1.76
log
@
punctation, standardizing, other misc. cleanup, from from Alan R. S.
Bueno (alan dot bsd at gmail dot com)
@
text
@d10 1
a10 1
<meta name="copyright" content="This document copyright 1998-2006 by OpenBSD.">
d35 1
d643 152
d984 1
a984 1
<small>$OpenBSD: faq11.html,v 1.75 2008/07/08 00:00:59 nick Exp $</small>
@


1.75
log
@
mac68k has no working X servers.
@
text
@d354 2
a355 2
The screen goes blank for a few moments, the we get the X "checkerboard"
background, the "X" cursor, and then an xterm window.
d831 1
a831 1
<small>$OpenBSD: faq11.html,v 1.74 2007/12/27 01:42:47 nick Exp $</small>
@


1.74
log
@
xorgcfg is gone for 4.3, and never worked properly, so I probably should
never have listed it in the first place, so nuke it now.
@
text
@d202 1
a202 14
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.mac68k"
>/usr/X11R6/README</a> for mac68k.

<p>  
Mac68k systems will "just work" with X, no configuration needed.

<p>
Mouse: The standard Macintosh mouse has only one button, which is a
problem, as X assumes a three-button mouse.
Some third party mice will give you a second button which will work with
X.
Failing that, see the Xmac68k(1) page for information on mouse button
emulation.

d831 1
a831 1
<small>$OpenBSD: faq11.html,v 1.73 2007/11/29 01:48:23 nick Exp $</small>
@


1.73
log
@
sync with rename of faq12.html
@
text
@d319 1
a319 1
There are three programs that can be used to semi-automatically create a
d321 2
a322 2
Unfortunately, none of them are guaranteed to create a usable xorg.conf
file.
a331 6
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xorgcfg&amp;sektion=1">xorgcfg(1)</a>
is supposed to have both a graphical mode and a text mode,
however the graphical mode is not fully functional.
For this reason, it is recommended that you use the "textmode", invoked
by "xorgcfg -textmode".

d844 1
a844 1
<small>$OpenBSD: faq11.html,v 1.72 2007/11/05 08:07:54 steven Exp $</small>
@


1.72
log
@XF4 -> xenocara
@
text
@d22 1
a22 1
<a href="faq12.html">[To Section 12 - Platform-Specific Questions]</a>
d842 1
a842 1
<a href= "faq12.html">[To Section 12 - Platform-Specific Questions]</a>
d850 1
a850 1
<small>$OpenBSD: faq11.html,v 1.71 2007/09/06 04:04:47 joel Exp $</small>
@


1.71
log
@Zap stray line.

From Maurice Janssen <maurice..z74.net>, thank you.
@
text
@d141 1
a141 1
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/XF4/distrib/notes/README.alpha"
d152 1
a152 1
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/XF4/distrib/notes/README.amd64"
d169 1
a169 1
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/XF4/distrib/notes/README.hp300"
d176 1
a176 1
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/XF4/distrib/notes/README.i386"
d202 1
a202 1
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/XF4/distrib/notes/README.mac68k"
d218 1
a218 1
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/XF4/distrib/notes/README.macppc"
d262 1
a262 1
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/XF4/distrib/notes/README.sparc"
d274 1
a274 1
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/XF4/distrib/notes/README.sparc64"
d287 1
a287 1
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/XF4/distrib/notes/README.vax"
d298 1
a298 1
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/XF4/distrib/notes/README.zaurus"
d546 1
a546 1
"<a href="http://www.openbsd.org/cgi-bin/cvsweb/XF4/xc/include/bitmaps/root_weave">root
d850 1
a850 1
<small>$OpenBSD: faq11.html,v 1.70 2007/08/08 16:41:58 nick Exp $</small>
@


1.70
log
@
missing a "No" there, spotted by Tobias Stoeckmann, thanks!
While in neighborhood, standardize wording for hppa.
@
text
@a173 1
support.
d850 1
a850 1
<small>$OpenBSD: faq11.html,v 1.69 2007/08/07 01:49:34 nick Exp $</small>
@


1.69
log
@
There will be no XF3 for 4.2, so let's stop talking about it now.
@
text
@d166 1
a166 1
X servers, only X clients.
d173 1
a173 1
There is no X server for HPPA at this time, but there is X client
d851 1
a851 1
<small>$OpenBSD: faq11.html,v 1.68 2007/08/07 00:17:50 nick Exp $</small>
@


1.68
log
@
nick@@ got lazy, sync with reality.  cats is gone, zaurus, landisk, armish
now are here.  Inspired by (maurice at z74 dot net)'s posting to tech@@,
though a very different diff.
@
text
@d181 1
a181 2
Set <tt>machdep.allowaperture=2</tt> in <tt>/etc/sysctl.conf</tt> 
for X.Org servers, or "1" for XFree86 v3 servers.
a195 13
<h4>X.Org vs. XFree86 v3</h4>
Both X.Org and XFree86 v3.3.6 servers are provided with OpenBSD/i386.
Some older video cards work better (and sometimes, only!) with the older
XFree86 v3 servers, as their drivers were never ported to recent versions
of X.
However one should start with the newer X.Org servers unless they don't
work or give poor results.
If you have problems with a modern computer or video card, don't bother
trying the XFree86 v3 servers -- development of XFree86 v3 stopped many
years ago.
On the other hand, if you have a ten year old system, you may need to 
use the XFree86 v3 servers.

d312 1
a312 16

<h3>11.3.1 - XFree86 v3.3.6 configuration <i>(i386 only)</i></h3>
If you have a very old video card you wish to use with X, you may 
need to configure and use the XFree86 v3 servers.
This is typically done with the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=XF86Setup&amp;sektion=1&amp;plat=i386"
>XF86Setup(1)</a> (graphical) or
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xf86config3&amp;sektion=1&amp;plat=i386"
>xf86config3(1)</a> (text-mode) programs.

<p>
That is all we are going to say about XFree86 v3, however.
Running the old X servers on old hardware is a labor of love, we'd hate
to ruin your fun by making it easy.

<h3>11.3.2 - X.Org configuration</h3>
d353 1
a353 1
<h3>11.3.3 - Our example machine</h3>
d599 1
a599 1
<h3>11.3.4 - What if it isn't that "easy"?</h3>
d851 1
a851 1
<small>$OpenBSD: faq11.html,v 1.67 2006/11/01 21:16:57 jasper Exp $</small>
@


1.67
log
@X11 bits for vax with lcg(4) and lcspx(4)

ok miod nick
@
text
@d165 2
a166 2
<h3>11.2.3 - cats</h3>
No X at this time.
d210 1
a210 1
<h3>11.2.7 - luna88k</h3>
d213 4
a216 1
<h3>11.2.8 - mac68k</h3>
d232 1
a232 1
<h3>11.2.9 - macppc</h3>
d267 4
a270 1
<h3>11.2.10 - mvme68k</h3>
d273 1
a273 1
<h3>11.2.11 - mvme88k</h3>
d276 1
a276 1
<h3>11.2.12 - sparc</h3>
d288 1
a288 1
<h3>11.2.13 - sparc64</h3>
d301 1
a301 1
<h3>11.2.14 - vax</h3>
d312 1
a312 1
<h3>11.2.15 - zaurus</h3>
d880 1
a880 1
<small>$OpenBSD: faq11.html,v 1.66 2006/08/28 02:19:07 nick Exp $</small>
@


1.66
log
@
Another error spotted by Tobias Stoeckmann: Alpha -> alpha to match rest.
@
text
@d296 9
a304 1
No X servers, only X clients.
d874 1
a874 1
<small>$OpenBSD: faq11.html,v 1.65 2006/08/28 02:17:01 nick Exp $</small>
@


1.65
log
@
Wording improvements and typos, spotted by Tobias Stoeckmann, thanks!
@
text
@d140 1
a140 1
<h3>11.2.1 - Alpha</h3>
d866 1
a866 1
<small>$OpenBSD: faq11.html,v 1.64 2006/08/06 10:58:09 steven Exp $</small>
@


1.64
log
@tweaks
@
text
@d185 1
a185 1
Due to the incredibly wide range of video cards, mice, keyboards and
d352 1
a352 1
by "xorgcfg -textmode"
d442 1
a442 1
terminate, along with all applications that are running.
d506 1
a506 1
We'll restore the HorizSync" and "VertRefresh" lines as they were,
d574 2
a575 1
We can now try X using the normal startx(1) command.  It works!
d669 1
a669 1
<tt>/etc/rc.conf.local</tt> file)
d866 1
a866 1
<small>$OpenBSD: faq11.html,v 1.63 2006/08/03 00:29:48 nick Exp $</small>
@


1.63
log
@
Modeline stuff could be reworked, but is way out of date, and low
priority at the moment, so comment out for now.
@
text
@d15 1
a15 1
<a href="/index.html">
a70 1
The client and server can also be running on the same machine.
d73 1
a73 1
It is also possible to run X clients on a system without any graphical
d103 1
a103 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xterm&amp;sektion=1">xterm(1)s</a>,
d134 1
a134 1
platform, and rebooting the machine (this sysctl can not be changed
a171 2
<p>

d182 1
a182 1
for X.org X servers, or "1" for XFree86 v3 servers.
a184 1

d186 1
a186 1
other hardware, configuring an i386 system to run X can be...exciting.
d197 2
a198 2
<h4>X.org vs. XFree86 v3</h4>
Both X.org and XFree86 v3.3.6 servers are provided with OpenBSD/i386.
d200 1
a200 1
XFree86 v3 servers, as their drivers were never ported to later versions
d202 1
a202 1
However one should start with the newer X.org servers unless they don't
d205 1
a205 1
trying the XFree86 v3 servers -- development stopped on XFree86 v3 many
d275 1
a275 1
With a single supported frame buffers, there is no configuration needed.
d296 1
a296 1
No X servers, only X clients
d315 1
a315 1
need to configure and use the XFree86 v3 X servers.
d327 2
a328 2
<h3>11.3.2 - X.org configuration</h3>
X.org has made great improvements in making their servers "Just Work".
d336 1
a336 1
configuration file for X.org's i386 X servers.
d355 1
a355 1
is another program that attempts to interactively create an xorg.conf
d378 1
a378 1
unsupported on modern versions of "mainstream" OSs.
d385 1
a385 1
driver is enabled in the kernel), let's see what X.org's auto detection
d396 1
a396 1
Kinda.
d399 1
a399 1
clearly a low resolution (640x480, in fact).
d416 1
a416 1
By the way...the message is serious -- use the entire path to your 
a426 1

d428 1
a428 1
So..let's do as it says, and see what we get:
d437 1
a437 1
Well, this might be a really good time to talk about ways of 
d450 3
a452 3
<li><b>Reset or power button.</b>  Sometimes things go really badly.
Yes, it is usually good to get X running before you load critical apps
on the system.
d459 1
a459 1
So now...we need to see if we can figure out what is wrong.
d557 2
a558 2
We test as above, and...  SUCCESS!  We have what appears to be a very
nice, high resolution display.
d618 1
a618 1
<li>See the man page for the X server you are using.
d662 1
a662 1
CTL-ALT-Backspace), xdm(1) will return, prompting the user to login again.
d832 1
a832 1
If this seems needlessly complex, that's because it is.  X.org addresses
d865 1
a865 1
<small>$OpenBSD: faq11.html,v 1.62 2006/08/03 00:26:16 nick Exp $</small>
@


1.62
log
@
New page: 11 - The X Window System
Start of a page on X, configuring X, etc.  Not yet linked to the rest of
the FAQ.  No apparent objection from matthieu@@, though he had a list of
things he wanted added. :)
For those wishing to help, focus on 4.0, not 3.9 for this.
@
text
@d35 2
a36 2
<li><a href="#TuningRes">11.9 - Tuning your monitor resolution under
  X</a>
d682 1
a682 1
<a name= "TuningRes"></a>
d858 1
a858 1
<p>
d870 1
a870 1
<small>$OpenBSD: faq11.html,v 1.61 2006/04/06 11:02:18 nick Exp $</small>
@


1.61
log
@
no, faq11.html being missing is not a mistake.  Linking to it, however,
WAS a mistake.  Expect to see something good here post 3.9.
@
text
@d2 2
a3 3
<html>
<head>
<title>11 - Performance Tuning</title>
d5 6
a10 6
<link rev= "made" href= "mailto:www@@openbsd.org">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2006 by OpenBSD.">
d13 1
a13 1
<body bgcolor= "#ffffff" text= "#000000">
d15 2
a16 2
<a href="../index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif" border="0">    
d19 4
a22 4
<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
<a href= "faq10.html">[To Section 10 - System Management]</a>
<a href= "faq12.html">[To Section 12 - Platform-Specific Questions]</a>
d25 1
a25 1
<h1><font color="#e00000">11 - This section being reworked</font></h1>
d31 7
a37 2
<li><a href="#XF86"   >11.4 - Tuning your monitor resolution under
X</a>
d43 641
a683 2
<a name= "XF86"></a>
<h2>11.4 - Tuning your monitor resolution under X</h2>
d717 1
a717 1
which can do this for you.  One is <a href="http://www-sop.inria.fr/cgi-bin/koala/nph-colas-modelines">
d870 1
a870 1
<small>$OpenBSD: faq11.html,v 1.60 2006/02/26 22:21:16 nick Exp $</small>
@


1.60
log
@
remove "Hardware Choices".  This article will be substantially reworked
and relocated in the near future, but for the moment, it is in my way,
and rather out of date.  Its new home will require a little rework to
plant it in.
@
text
@d26 1
a26 1
<h1><font color="#e00000">11 - Performance Tuning</font></h1>
d227 1
a227 1
<small>$OpenBSD: faq11.html,v 1.59 2006/02/26 21:19:39 nick Exp $</small>
@


1.59
log
@
clearing out faq11.html.  Relocate async mount section from faq11 to faq14.
@
text
@a31 1
<li><a href="#HW"     >11.2 - Hardware Choices</a>
a38 98
<a name= "HW"></a>
<h2>11.2 - Hardware choices</h2>
<!-- XXXchanges - check every OpenBSD release -->

<p>
<i>(Note- this section is heavily centered around the i386, or PC, architecture.
That is to say... other architectures don't give you quite as many choices!)</i>

<p>
The performance of your applications depends heavily on your OS and the
facilities it provides.  This 
may be part of the reason that you are using OpenBSD.
The performance of your applications also depends heavily on your hardware.
For many folks, the Price/Performance ratio of a brand new PC with
a Intel Pentium IV or AMD Athlon processor is much better than the
Price/Performance ratio of a Sun UltraSPARC 60!
Of course, the price of OpenBSD can't be beaten.

<p>
If you are shopping for a new PC, whether you are buying it
piece by piece or completely pre-built, you want to make sure first
that you are buying reliable parts.  In the PC world, this is not easy.
<b>Bad or otherwise unreliable or mismatched parts can
make OpenBSD run poorly and crash often</b>.  The best advice
we can give is to be careful, and
buy brands and parts that have been reviewed by an authority you trust.
Sometimes, when you skimp on the price of a PC, you lose in quality!

<p>
There are certain things that will help bring
out the maximum performance of your hardware:

<ul>
<li><b>Use multiple disks.</b>
Instead of buying one large disk, buy multiple smaller disks.  While this
may cost more, distributing the load over multiple spindles will decrease
the amount of time necessary to access data on the disks.  And, with more 
spindles, you will get more reliability and faster data access with RAID.
<p>
<li><b>Use SCSI if you need very high disk IO speeds.</b>
IDE disks normally run at 5400 RPM to 7200 RPM.  
Using high end IDE disks, it may be unreasonable to expect
more than 15 to 20 megabytes per second of throughput from a single disk.
Using high end SCSI disks (higher cost 10k RPM to 15k RPM disks), you can 
achieve
performance higher than this.  Conversely, if you are using medium or 
low end SCSI disks, this is a waste of money, and IDE will serve you 
just as well, if not better.
<p>If you are building a server, and you need more than one drive,
you may want to consider SCSI.  IDE limits you to two disks per controller.  Concurrent access to these two disks may have a negative
impact on the I/O performance of these disks.
Wide SCSI limits you to 15 per controller, and has better support for 
concurrent access than IDE. While SCSI costs more, the flexibility and
performance can justify these costs in some environments.
<p>
<li><b>Use SDRAM instead of DRAM.</b>
This option applies mainly to PCs.  Most other architectures don't give
you a choice of what kind of RAM you can use.  Several PCs still do.
You will get better performance with SDRAM versus DRAM (SIMMs).
If your system supports RDRAM, DDR or some other new type of RAM, then
you are even further ahead...
<p>
<li><b>Use ECC or parity RAM.</b>
Parity adds some functionality to see if the data in RAM has been
corrupted.  ECC extends this functionality and attempts to correct
some bit corruption errors on the fly.
This option applies mainly to PCs.  Most other architectures
simply require parity or ECC capable RAM.  Several non-PC computers won't
even boot with non-parity RAM. 
If you aren't using ECC/parity RAM, you may get data corruption and
other abnormalities. Several manufacturers
of "cheap PC RAM" don't even make an ECC variety!  This will help you
avoid them!  PC manufacturers often sell several product lines, 
divided around "servers" and "workstations."  The servers will incorporate
ECC RAM into their architecture.  Unix workstation manufacturers have been
using parity (and now ECC) for several years in all of their product lines.
<p>
<li><b>Avoid ISA devices.</b>
While most folks avoid ISA devices because they are generally hard to configure
and out of date, there are still plenty in existence.  If you are using the ISA
bus for your disk or network controllers, (or even worse, for both) remember
that the ISA bus itself can be a performance bottleneck.  If you need speed,
look into PCI.  Of course, there are still several ISA bus cards that work
just fine.  Unfortunately, most of these are sound cards and serial port cards.
<p>
<li><b>Avoid cheap PCI network adapters.</b>
OpenBSD supports a plethora of cheap PCI network adapters.  These
adapters work great in home systems, and also low or moderate throughput
business and research environments. But, if you
need high throughput and low impact on your server, you are better
off buying a quality PCI network adapter.  Unfortunately, some
expensive brand adapters are not much better than the cheap adapters.
Gigabit adapters often perform better than 10Mbps/100Mbps adapters, even
when used on slower speed networks, due to superior buffering.
</ul>


<p>
d227 1
a227 1
<small>$OpenBSD: faq11.html,v 1.58 2006/02/26 21:09:19 nick Exp $</small>
@


1.58
log
@
clearing out faq11.html.  relocate Disk I/O section to faq14.html.
Some cleanup to content, more will be needed.
@
text
@a32 1
<li><a href="#Async"  >11.3 - Why aren't we using async mounts?</a>
a137 41
<a name= "Async"></a>
<h2>11.3 - Why aren't we using async mounts?</h2>

<p>
Question: "I simply do "mount -u -o async /" which makes one package I use 
(which insists on touching a few hundred things from time to time) usable.

Why is async mounting frowned upon and not on by default (as it is in some
other unixen)? Isn't it a much simpler, and therefore, a safer way of
improving performance in some applications?"

<p>
Answer: "Async mounts are indeed faster than sync mounts, but they are also 
less safe. What happens in case of a power failure? Or a hardware problem?
The quest for speed should not sacrifice the reliability and the stability of 
the system. Check the man page for 
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=mount&amp;sektion=8">mount(8)</a>."

<pre>
	     async   All I/O to the file system should be done asynchronously.
		     This is a dangerous flag to set since it does not guaran-
		     tee to keep a consistent file system structure on the
		     disk.  You should not use this flag unless you are pre-
		     pared to recreate the file system should your system
		     crash.  The most common use of this flag is to speed up
		     restore(8) where it can give a factor of two speed in-
		     crease.
</pre>

<p>
On the other hand, when you are dealing with temp data that you can recreate 
from scratch after a crash, you can gain speed by using a separate 
partition for that data only, mounted async.  Again, do this <i>only if</i> 
you don't mind the loss of all the data in the partition 
when something goes wrong. For this reason,
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=mfs&amp;sektion=8">mfs(8)</a>
partitions are mounted asynchronously, as
they will get wiped and recreated on a reboot anyway.


<p>
d326 1
a326 1
<small>$OpenBSD: faq11.html,v 1.57 2005/07/09 02:16:08 nick Exp $</small>
@


1.57
log
@
few more XF86Config -> xorg.conf changes, inspired by a note from Marcos
Latas, and found with grep...
@
text
@d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 1998-2005 by OpenBSD.">
a31 1
<li><a href="#Disk"   >11.1 - Disk I/O</a>
a39 168

<p>
<a name= "Disk"></a>
<h2>11.1 - Disk I/O</h2>

<p>
Disk I/O speed is a significant factor in the overall speed of your
computer.  It becomes increasingly important when your computer
is hosting a multi-user environment (users of all kinds, from those
who log-in interactively to those who see you as a file-server or a web-server.)
Data storage constantly needs attention, especially when your partitions run
out of space or when your disks fail.  OpenBSD has several options
to increase the speed of your disk operations and provide fault tolerance.

<p>
Table Of Contents
<ul>
<li><a href="#ccd">CCD</a> - Concatenated Disk Driver.
<li><a href="#raid">RAID</a>
<li><a href="#softu">Soft Updates</a>
<li><a href="#maxvnodes">Size of the namei() cache</a>
</ul>

<p>
<a name="ccd"></a>
<h3>11.1.1 - CCD</h3>

<blockquote>
The first option is the use of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccd&amp;sektion=4">ccd(4)</a>, the Concatenated Disk Driver.
This allows you to join several partitions into one virtual disk (and thus,
you can make several disks look like one disk).  This concept is
similar to that of LVM (logical volume management), which is found in many commercial Unix flavors.

<p>
If you are running GENERIC, ccd is already enabled (in
<tt>/usr/src/sys/conf/GENERIC</tt>).  If you have customized
your kernel, you may need to return it to your kernel configuration.
Either way, a line such as this should be in your configuration file:

<pre>
     <strong>pseudo-device   ccd     4       # concatenated disk devices</strong>
</pre>

<p>
The above example gives you up to 4 ccd devices (virtual disks).
Now you need to figure out which partitions on your real disks you want
to dedicate to ccd.  Use disklabel to mark these partitions as type 'ccd'.
On some architectures, disklabel may not allow you to do this.  In this case,
mark them as 'ffs'.

<p>
If you are using ccd to gain performance by striping, note that you will
not get optimum performance unless you use the same model of disks with
the same disklabel settings.

<p>
Edit /etc/ccd.conf to look something like this:
(for more information on configuring ccd, look at
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccdconfig&amp;sektion=8">ccdconfig(8)</a>)

<blockquote><pre>
# Configuration file for concatenated disk devices
#
# ccd   ileave  flags   component devices
ccd0   16      none    /dev/sd2e /dev/sd3e
</pre></blockquote>

<p>
To make your changes take effect, run

<blockquote><pre>
# ccdconfig -C
</pre></blockquote>

<p>
As long as /etc/ccd.conf exists, ccd will automatically configure itself
upon boot.
Now, you have a new disk, ccd0, a combination of /dev/sd2e and /dev/sd3e.
Just use disklabel on it like you normally would to make the partition 
or partitions you want to use.  Again, don't use the 'c' partition as
an actual partition that you put stuff on.
Make sure your usable partitions are at least one cylinder off from the beginning
of the disk.
</blockquote>

<p>
<a name="raid"></a>
<h3>11.1.2 - RAID</h3>

<blockquote>
Another solution is <a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=raid&amp;sektion=4">raid(4)</a>,
which will have you use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raidctl&amp;sektion=8">raidctl(8)</a>
to control your raid devices.  OpenBSD's RAID is based upon
Greg Oster's <a href="http://www.cs.usask.ca/staff/oster/raid.html">NetBSD port</a>
of the CMU
<a href="http://www.pdl.cmu.edu/RAIDframe/">RAIDframe</a> software.
OpenBSD has support for RAID levels
of 0, 1, 4, and 5.<p> With raid, as with ccd, support must be in the KERNEL.
Unlike ccd, support for RAID is not found in GENERIC, so it must be compiled 
into your kernel (RAID support adds some 500K to the size of an i386 kernel).

<blockquote><pre>
<strong>pseudo-device   raid   4       # RAIDframe disk device</strong>
</pre></blockquote>

<p>
Setting up RAID on some operating systems is confusing and
painful to say the least.  Not so with RAIDframe.
Read the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raid&amp;sektion=4">raid(4)</a> and
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raidctl&amp;sektion=8">raidctl(8)</a>
man pages to get full details. There are many
options and possible configurations available, and a detailed explanation is beyond the scope of this document.
</blockquote>

<p>
<a name="softu"></a>
<h3>11.1.3 - Soft updates</h3>

<blockquote>
Another tool that can be used to speed up your system is softupdates.  One of the 
slowest operations in the traditional BSD file system is updating metainfo
(which happens, among other times, when you create or delete files and
directories.) Softupdates
attempts to update metainfo in RAM instead of writing
to the hard disk each and every single metainfo update.  Another 
effect of this is that the metainfo on disk should always be complete,
although not always up to date.  So, a system crash should not require
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fsck&amp;sektion=8">fsck(8)</a>
upon boot up, but simply a background version of fsck that makes
changes to the metainfo in RAM (a la softupdates).
This means rebooting a server is much faster, as you don't
have to wait for fsck!  (OpenBSD does not have this feature yet.) You can read
more about softupdates in the <a href="faq14.html#SoftUpdates">Softupdates FAQ</a> entry.
</blockquote>

<p>
<a name="maxvnodes"></a>
<h3>11.1.4 - Size of the namei() cache</h3>

<dl>
<dd>
Note: previously, the 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&amp;sektion=4">options(4)</a>
manual page recommended to set the <tt>NVNODE=integer</tt> kernel option. This
is no longer recommended; you should now use the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8">sysctl(8)</a>
command instead. 
<p>
The name-to-inode translation (a.k.a., <!-- need to write the manual
page first... <a href="">namei(3)</a> --> namei()) cache controls
the speed of pathname to 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inode&amp;sektion=5">inode(5)</a>
translation.
A reasonable way to derive a value for the cache, should a large number of namei()
cache misses be noticed with a tool such as 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systat&amp;sektion=1">systat(1)</a>,
is to examine the system's current computed value with 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8">sysctl(8)</a>,
(which calls this parameter "<tt>kern.maxvnodes</tt>") and to increase this 
value until either the namei() cache hit rate improves or it is determined that 
the system does not benefit substantially from an increase in the size of the 
namei() cache. After the value has been determined, you can  
set it at system startup time with 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl.conf&amp;sektion=5">sysctl.conf(5)</a>.
</dd>
</dl>


d368 1
a368 1
<small>$OpenBSD: faq11.html,v 1.56 2005/05/19 16:54:27 nick Exp $</small>
@


1.56
log
@
Welcome 3.7!
@
text
@d380 1
a380 1
XF86Config(5) manual page for more ModeLine details).
d455 1
a455 1
Once you have your ModeLines, put them into your /etc/X11/XF86Config file. 
d460 1
a460 1
cards), so you know which <tt>"Screen"</tt> section of the XF86Config to modify.
d537 1
a537 1
<small>$OpenBSD: faq11.html,v 1.55 2005/02/12 19:08:41 nick Exp $</small>
@


1.55
log
@
typos, wordos, linkos and other errors spotted by Steven Mestdagh (steven
dot mestdagh at esat dot kuleuven dot ac dot be), thanks!
@
text
@d36 1
a36 1
XFree86</a>
d350 1
a350 1
<h2>11.4 - Tuning your monitor resolution under XFree86</h2>
d359 1
a359 1
xf86config or XF86Setup utilities, they probably didn't get the best possible
d367 1
a367 1
but the methods to do this are non-obvious with the standard XFree86 tools and
d375 1
a375 1
The XFree86 X server has a mechanism which allows you to describe in detail the video
d504 1
a504 1
If this seems needlessly complex, that's because it is.  XFree86 4.0 addresses
d520 2
a521 2
which will take your complete XF86Config file, decode the monitor specs that
you entered into xf86config/XF86Setup (Now, think, did you actually
d537 1
a537 1
<small>$OpenBSD: faq11.html,v 1.54 2004/10/20 23:04:26 nick Exp $</small>
@


1.54
log
@
make "OpenBSD" logo on top of page a "click back" to the OpenBSD home page.
(about time!)
@
text
@d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 1998-2004 by OpenBSD.">
d492 1
a492 1
once can use xvidtune(1) to adjust the ModeLine to better fit with the
d501 1
a501 1
progressively down in BW down to have a nice crisp image.
d537 1
a537 1
<small>$OpenBSD: faq11.html,v 1.53 2004/08/06 20:55:24 nick Exp $</small>
@


1.53
log
@
cleaning out mail.  *Sparc -> *SPARC.  From Tom@@ back in *mumble*
@
text
@d16 3
a18 1
<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif">
d537 1
a537 1
<small>$OpenBSD: faq11.html,v 1.52 2004/08/06 02:22:50 nick Exp $</small>
@


1.52
log
@
is -> are, from Justin Krejci, jusATkrytosvirusDOTcom
@
text
@d223 1
a223 1
Price/Performance ratio of a Sun UltraSparc 60!
d535 1
a535 1
<small>$OpenBSD: faq11.html,v 1.51 2004/07/31 23:00:24 nick Exp $</small>
@


1.51
log
@
brad@@ wanted me to remove reference to "Our favourite" adapter.  I'm tired
of trying to defend naming names there, anyway.  Add Henning's(?) gigabit
adapter tip.
@
text
@d318 1
a318 1
Answer: "Async mounts is indeed faster than sync mounts, but they are also 
d535 1
a535 1
<small>$OpenBSD: faq11.html,v 1.50 2004/04/21 00:02:10 nick Exp $</small>
@


1.50
log
@
Remove some bad stuff...  NMBCLUSTERS gets people into serious trouble,
as does BUFCACHEPERCENT.  Removed.  Added note about the ModeLine
section being (usually) unneeded now, but left in because there are some
rare exceptions.  Renumber sections to bring back into order.
@
text
@d299 3
a301 3
expensive brand adapters (such as the 3com XL series) are not much
better than the cheap adapters.  One favourite 10/100Mbps adapter
is the Intel EtherExpress PRO/100.
d535 1
a535 1
<small>$OpenBSD: faq11.html,v 1.49 2004/02/13 07:20:28 david Exp $</small>
@


1.49
log
@uppercase HTML -> lowercase HTML
ok nick@@
@
text
@d30 4
a33 6
<li><a href="#Network">11.1 - Networking</a>
<li><a href="#Disk"   >11.2 - Disk I/O</a>
<!-- li><a href="#kmem"   >11.3 - Tuning kmem</a></li -->
<li><a href="#HW"     >11.4 - Hardware Choices</a>
<li><a href="#Async"  >11.5 - Why aren't we using async mounts?</a>
<li><a href="#XF86"   >11.6 - Tuning your monitor resolution under
a38 59
<p>
If you run a busy server, gateway or firewall, you may wish or need to
adjust some of the default parameters to get optimal performance.
The <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&amp;sektion=4">options(4)</a> 
man page talks about the kernel options presented. These options are placed 
in the kernel configuration file before you compile a custom kernel, and some
are settable via
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a>.
For more details, see <a href="faq5.html">FAQ 5</a>.


<p>
<a name= "Network"></a>
<h2>11.1 - Networking</h2>
<!-- XXXchanges - changes with OpenBSD 3.3 -->

<p>
A parameter you may need to change for a busy server, gateway or firewall is
NMBCLUSTERS.  This controls the size of the kernel mbuf cluster map.
On your computer, if you get messages like "mb_map full",
you need to increase the value of this parameter.  If traffic on a network
interface stops
for no apparent reason, this may also be a sign that you need to increase
the value of NMBCLUSTERS.  A reasonable value on the i386 port with most 100Mbps
ethernet interfaces (no matter how many the machine has) is 8192.  

<blockquote><strong>
option NMBCLUSTERS=8192
</strong></blockquote>

<p>
The default number of NMBCLUSTERS varies from platform to platform, 
ranging from 256 to 2048.  It is set in a platform-dependent header 
file unless overridden by an option line in a kernel config file.

<p>
NMBCLUSTERS can also be set using
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a>,
which eliminates the need to compile a kernel and reboot solely to
change this option:

<blockquote><pre>
# <b>config -e -o bsd.new /bsd</b>
OpenBSD 3.4 (GENERIC) #18: Wed Sep 17 03:34:47 MDT 2003
    deraadt@@i386.openbsd.org:/usr/src/sys/arch/i386/compile/GENERIC
Enter 'help' for information
ukc> <b>nmbclust</b>
nmbclusters = 2048
ukc> <b>nmbclust 8192</b>
nmbclusters = 8192
ukc> <b>quit</b>
Saving modified kernel.
</pre></blockquote>

This will create a new kernel, <tt>bsd.new</tt>, in the current
directory, <i>and</i> modifies the NMBCLUSTERS parameter of the running
kernel.  If all goes well, don't forget to copy <tt>bsd.new</tt> to
<tt>/bsd</tt> before rebooting.

d42 1
a42 1
<h2>11.2 - Disk I/O</h2>
a57 1
<li><a href="#buf">Filesystem Buffer</a>
d64 1
a64 1
<h3>11.2.1 - CCD</h3>
d126 1
a126 1
<h3>11.2.2 - RAID</h3>
a153 27
<a name="buf"></a>
<h3>11.2.3 - Filesystem Buffer</h3>

<blockquote>
For fileservers with memory to spare, you can increase BUFCACHEPERCENT.
That is, what percentage of your RAM should you use as a file system buffer.
This option may change when the Unified Buffer Cache is completed
and is part of OpenBSD.  In the mean time, to increase BUFCACHEPERCENT,
you should add a line to your kernel configuration like this:
</blockquote>

<blockquote>
<strong>option	BUFCACHEPERCENT=30</strong><br>
</blockquote>

<blockquote>
Of course you can make it as low as 5 percent (the default) or as high
as 50 percent (or more.)
</blockquote>

<blockquote>
BUFCACHEPERCENT can also be set using
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a>,
as <a href="#Network">above</a>, which eliminates the need to compile a
kernel solely to change this option.  </blockquote>

<p>
d155 1
a155 1
<h3>11.2.4 - Soft updates</h3>
d176 1
a176 1
<h3>11.2.5 - Size of the namei() cache</h3>
d191 1
a191 4
translation. By default, this cache has <tt>NPROC * (80 + NPROC / 8)</tt> 
entries.  <tt>NPROC</tt> is set to <tt>20 + 16 * MAXUSERS</tt>; see the 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a>
manual page for an explanation on the <tt>maxusers</tt> kernel configuration parameter.
d209 1
a209 1
<h2>11.4 - Hardware choices</h2>
d307 1
a307 1
<h2>11.5 - Why aren't we using async mounts?</h2>
d348 5
a352 1
<h2>11.6 - Tuning your monitor resolution under XFree86</h2>
d535 1
a535 1
<small>$OpenBSD: faq11.html,v 1.48 2004/01/01 04:13:34 nick Exp $</small>
@


1.48
log
@
bump copyright to 2004
@
text
@d198 1
a198 1
of 0, 1, 4, and 5.<P> With raid, as with ccd, support must be in the KERNEL.
d228 1
a228 1
<strong>option	BUFCACHEPERCENT=30</strong><BR>
d623 1
a623 1
<small>$OpenBSD: faq11.html,v 1.47 2003/10/30 22:43:42 nick Exp $</small>
@


1.47
log
@
FAQ updates for OpenBSD 3.4.  Lots of help from lots of people, but
special thanks to Tom Cosgrove who provided many improvements and
proofreading.
@
text
@d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 1998-2003 by OpenBSD.">
d623 1
a623 1
<small>$OpenBSD: faq11.html,v 1.46 2003/10/16 00:48:14 nick Exp $</small>
@


1.46
log
@
Standarize headings.  Pointed out by (and pleaded to be fixed by)
Tom Cosgrove.
@
text
@d84 1
a84 1
OpenBSD 3.3 (GENERIC) #44: Sat Mar 29 13:22:05 MST 2003
d623 1
a623 1
<small>$OpenBSD: faq11.html,v 1.45 2003/08/05 19:54:07 nick Exp $</small>
@


1.45
log
@
You are right, Tom Cosgrove (tom dot cosgrove at arches-consulting dot com),
Platform-Specific should be hyphenated...
@
text
@d20 1
a20 1
<a href= "faq10.html">[To Section 10 - System Administration]</a>
d614 1
a614 1
<a href= "faq10.html">[To Section 10 - System Administration]</a>
d623 1
a623 1
<small>$OpenBSD: faq11.html,v 1.44 2003/08/05 18:32:56 nick Exp $</small>
@


1.44
log
@
Sync with new faq12.html
@
text
@d21 1
a21 1
<a href= "faq12.html">[To Section 12 - Platform Specific Questions]</a>
d615 1
a615 1
<a href= "faq12.html">[To Section 12 - Platform Specific Questions]</a>
d623 1
a623 1
<small>$OpenBSD: faq11.html,v 1.43 2003/07/23 02:01:56 nick Exp $</small>
@


1.43
log
@
finish removing numeric targets (<a name="9.3">).  No words changed.
Also removed some inert stuff from faq11.html...
@
text
@d21 1
a21 1
<a href= "faq12.html">[To Section 12 - For Advanced Users]</a>
d615 1
a615 1
<a href= "faq12.html">[To Section 12 - For Advanced Users]</a>
d623 1
a623 1
<small>$OpenBSD: faq11.html,v 1.41 2003/06/17 19:34:21 david Exp $</small>
@


1.42
log
@doctype/charset cleanup
ok nick@@
@
text
@a53 1
<a name= "11.1"></a>
a102 1
<a name= "11.2"></a>
a299 6
<!-- a name= "kmem"></a>
<a name= "11.3"></a>
<h2>11.3 - Tuning kmem</h2>
This was moved to the <a href="faq11-2.5.html#11.2">OpenBSD 2.5 information section</a>.
<br>
<p -->
a300 1
<a name= "11.4"></a>
a398 1
<a name= "11.5"></a>
a439 1
<a name= "11.6"></a>
@


1.41
log
@update path to XF86Config
noticed by Wouter Coene <wouter@@inebriated.demon.nl> long ago
ok nick@@
@
text
@a0 1

d634 1
a634 1
<small>$OpenBSD: faq11.html,v 1.40 2003/05/01 01:47:41 nick Exp $</small>
@


1.40
log
@
Updated FAQ for OpenBSD 3.3.
@
text
@d553 1
a553 1
Once you have your ModeLines, put them into your /etc/XF86Config file. 
d635 1
a635 1
<small>$OpenBSD: faq11.html,v 1.39 2003/04/04 17:49:08 nick Exp $</small>
@


1.39
log
@
More tags for Stuff That Changes every release, from Sam Smith.
@
text
@d79 1
a79 1
Starting with OpenBSD 3.1, NMBCLUSTERS can be set using
d86 1
a86 1
OpenBSD 3.2 (GENERIC) #25: Thu Oct  3 19:51:53 MDT 2002
d100 1
a100 1
<tt>bsd</tt> before rebooting.
d240 1
a240 1
Starting with OpenBSD 3.1, BUFCACHEPERCENT can be set using
d344 1
a344 1
Instead of buying one 20GB disk, buy multiple 9GB disks.  While this
d358 1
a358 1
<p>If you are building a server, and you need more than 20GB of disk space,
d635 1
a635 1
<small>$OpenBSD: faq11.html,v 1.38 2003/03/18 03:41:04 nick Exp $</small>
@


1.38
log
@
* [FAQ Index] [Back] [Next] links at top of page ('bout time.  Finally
decided not having them was worse than the lame ideas I had).
* Top heading changed from <h2> to <h1> throughout
* [Back to Main Index] shortened to [FAQ Index] top and bottom
* Bottoms of faq5.html and faq14.html standardized.
@
text
@d57 1
d312 1
d635 1
a635 1
<small>$OpenBSD: faq11.html,v 1.37 2003/02/28 00:34:28 nick Exp $</small>
@


1.37
log
@
Typo fixes from Tom Cosgrove (tom dot cosgrove at arches-consulting dot com).
Thanks!
@
text
@d19 7
a25 1
<h2><font color="#e00000">11 - Performance Tuning</font></h2>
d623 1
a623 1
<a href= "index.html">[Back to Main Index]</a>
d633 1
a633 1
<small>$OpenBSD: faq11.html,v 1.36 2003/02/26 02:54:48 nick Exp $</small>
@


1.36
log
@
typos, spotted by Tom Cosgrove (tom dot cosgrove at arches-consulting dot com>,
and at least a few weren't made by me!  whoo-hoo!  Thanks!
@
text
@d196 1
a196 1
into your kernel (RAID support adds some 500K to the size of an i386 kernel!)
d469 2
a470 2
of the mode (such as Interlace, DoubleScan, and more...See the
XF86Config(5) manual page for more ModeLine details.)
d627 1
a627 1
<small>$OpenBSD: faq11.html,v 1.35 2003/02/25 04:00:10 david Exp $</small>
@


1.35
log
@remove double word stuttering.
ok nick@@
@
text
@d449 1
a449 1
xf86config or XF86Setup utilties, they probably didn't get the best possible
d627 1
a627 1
<small>$OpenBSD: faq11.html,v 1.34 2003/02/20 03:09:56 nick Exp $</small>
@


1.34
log
@
Page name cleanups.  Standardize capitalization, and change
x.0 -> x on titles and on "next/previous" links at bottom of page.
From Tom Cosgrove (tom dot cosgrove at arches-consulting dot com), thanks!
@
text
@d69 1
a69 1
file unless overridden by an an option line in a kernel config file.
d627 1
a627 1
<small>$OpenBSD: faq11.html,v 1.33 2003/02/15 14:54:50 nick Exp $</small>
@


1.33
log
@
Geez, Nick.  Don't break validation!  Pointed out by Horacio.  Thanks!
@
text
@d5 1
a5 1
<title>11.0 - Performance Tuning</title>
d19 1
a19 1
<h2><font color="#e00000">11.0 - Performance Tuning</font></h2>
d618 2
a619 2
<a href= "faq10.html">[To Section 10.0 - System Administration]</a>
<a href= "faq12.html">[To Section 12.0 - For Advanced Users]</a>
d627 1
a627 1
<small>$OpenBSD: faq11.html,v 1.32 2003/02/15 00:53:43 nick Exp $</small>
@


1.32
log
@
You don't always need to build a kernel anymore!
Good updates from frisco at blackant dot net.
@
text
@d43 1
a43 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&sektion=8">config(8)</a>.
d73 1
a73 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&sektion=8">config(8)</a>,
d234 1
a234 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&sektion=8">config(8)</a>,
d627 1
a627 1
<small>$OpenBSD: faq11.html,v 1.31 2003/01/01 13:01:59 nick Exp $</small>
@


1.31
log
@
Rev copyrights to 2003.
@
text
@d41 4
a44 2
in the kernel configuration file before you compile a custom kernel. For 
more details, see <a href="faq5.html">FAQ 5</a>.
d71 24
d232 6
d627 1
a627 1
<small>$OpenBSD: faq11.html,v 1.30 2002/11/26 01:02:04 nick Exp $</small>
@


1.30
log
@
Validation Man strikes again!  More great work from Horacio.  Thanks!
@
text
@d12 1
a12 1
<meta name= "copyright"     content= "This document copyright 1998-2002 by OpenBSD.">
d595 1
a595 1
<small>$OpenBSD: faq11.html,v 1.29 2002/07/25 08:05:08 jufi Exp $</small>
@


1.29
log
@
new PCs include a Pentium IV
@
text
@d1 2
d6 1
d19 2
a20 2
<h2><font color=#e00000>11.0 - Performance Tuning</font><hr></h2>
</p>
d23 4
a26 3
<ul><h3>Table of Contents</h3>
<li><a href="#Network">11.1 - Networking</a></li>
<li><a href="#Disk"   >11.2 - Disk I/O</a></li>
d28 4
a31 3
<li><a href="#HW"     >11.4 - Hardware Choices</a></li>
<li><a href="#Async"  >11.5 - Why aren't we using async mounts?</a></li>
<li><a href="#XF86"   >11.6 - Tuning your monitor resolution under XFree86</a></li>
d33 1
a33 1
</p> 
d39 1
a39 1
The <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&sektion=4">options(4)</a> 
d43 2
a48 1
</p>
a58 1
</p>
d60 5
a64 5
<ul>
<strong>
option NMBCLUSTERS=8192<BR>
</strong>
</ul>
d68 1
a68 1
<br>
a73 1
</p>
a82 1
</p>
d84 8
a91 6
<ul>Table Of Contents
	<li><a href="#ccd">CCD</a> - Concatenated Disk Driver.
	<li><a href="#raid">RAID</a>
	<li><a href="#buf">Filesystem Buffer</a>
	<li><a href="#softu">Soft Updates</a>
	<li><a href="#maxvnodes">Size of the namei() cache</a>
d93 1
d96 4
a99 3
<H3>11.2.1 - CCD</H3><UL>
<p>
The first option is the use of <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccd&apropos=0&sektion=4&format=html">ccd(4)</a>, the Concatenated Disk Driver.
d103 2
a104 1
<P>
a108 1
</p>
a109 1
<p>
a112 1
</p>
d120 1
d125 2
a126 1
<P>
d129 3
a131 3
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccdconfig&apropos=0&sektion=8&format=html">ccdconfig(8)</a>)
<UL>
<PRE>
d136 3
a138 1
</PRE></UL>
d140 6
a145 2
<UL><PRE># ccdconfig -C
</PRE></UL>
d154 1
a154 3
</p>
</UL>
<br>
d156 1
d158 5
a162 5
<H3>11.2.2 - RAID</H3>
<UL>
<p>
Another solution is <a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=raid&apropos=0&sektion=4&format=html">raid(4)</a>,
which will have you use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raidctl&apropos=0&sektion=8&format=html">raidctl(8)</a>
d171 4
a174 1
</p>
a176 6
<UL>
<pre>
<strong>pseudo-device   raid   4       # RAIDframe disk device</strong>
</pre>
</UL>
<P>
d179 2
a180 2
Read the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raid&apropos=0&sektion=4&format=html">raid(4)</a> and
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raidctl&apropos=0&sektion=8&format=html">raidctl(8)</a>
d183 1
a183 2
</UL>
<BR>
d185 1
d187 3
a189 2
<H3>11.2.3 - Filesystem Buffer</H3>
<UL>
d195 1
a195 2
</UL>
</p>
d197 1
a197 2
<p>
<UL>
d199 3
a201 4
</UL>
</p>
<ul>
<p>
d204 1
a204 3
</p>
</ul>
<br>
d206 1
d208 3
a210 1
<H3>11.2.4 - Soft updates</H3><UL>
d225 1
a225 3
</UL>
</p>
<BR>
d227 1
d229 4
a232 4
<H3>11.2.5 - Size of the namei() cache</H3>
<DL>
<DD>
<p>
d234 2
a235 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&sektion=4&format=html">options(4)</a>
manual page recommended to set the <TT>NVNODE=integer</TT> kernel option. This
d237 1
a237 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=8&format=html">sysctl(8)</a>
a238 1
</p>
d243 5
a247 5
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inode&sektion=5&format=html">inode(5)</a>
translation. By default, this cache has <TT>NPROC * (80 + NPROC / 8)</TT> 
entries.  <TT>NPROC</TT> is set to <TT>20 + 16 * MAXUSERS</TT>; see the 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&sektion=8&format=html">config(8)</a>
manual page for an explanation on the <TT>maxusers</TT> kernel configuration parameter.
d250 1
a250 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systat&sektion=1&format=html">systat(1)</a>,
d252 2
a253 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=8&format=html">sysctl(8)</a>,
(which calls this parameter "<TT>kern.maxvnodes</TT>") and to increase this 
d258 4
a261 5
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl.conf&sektion=5&format=html">sysctl.conf(5)</a>.
</DD>
</DL>
</p>
<BR>
a266 1
</p>
d273 2
a274 1
</p>
d277 2
a278 1
<P>
d287 2
a288 1
<P>
d297 2
a298 1
<P>
d301 4
a304 3
<UL>
<LI>Use multiple disks.
<P>Instead of buying one 20GB disk, buy multiple 9GB disks.  While this
d309 2
a310 2
<LI>Use SCSI if you need very high disk IO speeds.
<P>IDE disks normally run at 5400 RPM to 7200 RPM.  
d318 1
a318 1
<P>If you are building a server, and you need more than 20GB of disk space,
d324 2
a325 3
<P>
<li>Use SDRAM instead of DRAM.
<P>
d331 2
a332 3
<P>
<li>Use ECC or parity RAM.
<P>
d346 2
a347 3
<P>
<LI>Avoid ISA devices.
<P>
d354 2
a355 3
<P>
<LI> Avoid cheap PCI network adapters.
<P>
a363 1
<P>
d365 2
a366 1
<br>
d371 1
d379 1
a379 1
</p>
d385 2
a386 2
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=mount&apropos=0&sektion=8&format=html">mount(8)</a>."
</p>
d397 1
d404 1
a404 1
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=mfs&sektion=8">mfs(8)</a>
d407 2
a408 2
</p>
<br>
d413 1
d427 2
a428 1
<P>
d439 2
a440 1
<P>
d453 2
a454 1
<P>
d462 2
a463 1
<P>
d469 2
a470 2
<P>
<PRE>
d488 3
a490 2
</PRE>
<P>
d495 2
a496 1
<Pre>
d505 3
a507 2
</PRE>
<P>
d511 2
a512 1
<P>
d518 1
a518 1
cards), so you know which <TT>"Screen"</tt> section of the XF86Config to modify.
d520 2
a521 1
<PRE>
d531 3
a533 1
</PRE>
d542 2
a543 1
<P>
d552 2
a553 1
<P>
d560 2
a561 1
<P>
d566 2
a567 1
<P>
d574 2
a575 1
<P>
d582 1
a588 1
</p>
d595 1
a595 2
<small>$OpenBSD: faq11.html,v 1.28 2002/05/29 19:17:41 nick Exp $</small>
</p>
@


1.28
log
@
Wording improvements from Sam Smith <S@@mSmith.net>, Thanks!
@
text
@d278 1
a278 1
a Intel Pentium III or AMD Athlon processor is much better than the
d571 1
a571 1
<small>$OpenBSD: faq11.html,v 1.27 2002/05/22 02:17:16 nick Exp $</small>
@


1.27
log
@
Grammar, spelling, punctuation and a link.  from Horacio@@, thanks!
@
text
@d77 1
a77 1
out of space and when your disks fail.  OpenBSD has several options
d393 7
a399 4
from scratch after a crash, you could gain speed by using a separate 
partition, used for that data only, mounted async. If you don't mind
risking the loss of all the data in the partition when something goes
wrong...
d571 1
a571 1
<small>$OpenBSD: faq11.html,v 1.26 2002/05/20 01:04:48 nick Exp $</small>
@


1.26
log
@
Updates for OpenBSD 3.1.  ok Miod@@
@
text
@d111 1
a111 1
Now you need to figure out what partitions on your real disks that you want
d149 1
a149 1
Another solution is <a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=raid&apropos=0&sektion=4&format=html">raid(4)</a>
d157 1
a157 1
Unlike ccd, support for RAID is not found in GENERIC, it must be compiled 
d173 1
a173 1
options and possible configurations, a detailed explanation is beyond the scope of this document.
d211 2
a212 1
fsck upon boot up, but simply a background version of fsck that makes
d214 1
a214 1
This means rebooting a server is much faster, because you don't
d241 1
a241 1
manual page for explanation on the <TT>maxusers</TT> kernel configuration parameter.
d280 1
a280 1
Of course, the price of OpenBSD can't be beat.
d287 1
a287 1
we can give is to be careful,
d303 1
a303 1
more then 15 to 20 megabytes per second of throughput from a single disk.
d306 1
a306 1
performance higher then this.  Conversely, if you are using medium or 
d309 1
a309 1
<P>If you are building a server, and you need more then 20GB of disk space,
d346 1
a346 1
look to PCI.  Of course, there are still several ISA bus cards that work
d375 1
a375 1
Answer: "Async mounts is indeed faster then sync mounts, but they are also 
d432 1
a432 1
hosted at SourceForge and several others are available on
d521 1
a521 1
Note that the ModeLine generator script has options to relax its' timings for older
d568 1
a568 1
<small>$OpenBSD: faq11.html,v 1.25 2002/05/07 01:36:52 nick Exp $</small>
@


1.25
log
@
Lots of word choice and clarifications suggestions from
Saad Kadhi <bsdguy@@docisland.org>.  Thanks!
@
text
@d23 1
a23 1
<li><a href="#kmem"   >11.3 - Tuning kmem</a></li>
d258 1
a258 1
<a name= "kmem"></a>
d264 1
a264 1
<p>
d300 2
a301 2
<P>IDE disks normally run at 5400 RPM, with new disks emerging from manufacturers
that run at 7200 RPM.  Using high end IDE disks, it may be unreasonable to expect
d303 2
a304 1
Using high end SCSI disks (higher cost 10000 RPM disks), you can achieve
d311 2
a312 2
Wide SCSI limits you to 15 per controller!
While SCSI costs more, the flexibility and
d320 2
a321 2
If your system supports RDRAM or some other new type of RAM, then
you are already one step ahead...
d341 1
a341 1
While most folks avoid ISA devices, because they are generally hard to configure
d567 1
a567 1
<small>$OpenBSD: faq11.html,v 1.24 2002/03/20 03:54:33 nick Exp $</small>
@


1.24
log
@
Typos, grammar improvements, submitted by David Krause
<openbsd@@davidkrause.com>, including correction of loopback subnet from
rootix@@yahoo.fr.  Some fixes had also been submitted by Saad
Kadhi <bsdguy@@docisland.org>.
@
text
@d32 7
d45 1
a45 10
If you run a busy server, gateway or firewall, you should make sure to prevent 
memory starvation to various parts of the kernel described below.
</p>

<P>
The <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&apropos=0&sektion=4&format=html">options(4)</a> man page talks about the options presented.
<p>

<p>
An option you may need to change for a busy server, gateway or firewall is
d48 2
a49 1
you need to increase this value.  If traffic on a networking interface stops
d51 1
a51 1
this value.  A reasonable value on the i386 port with most 100Mbps
d60 3
d97 4
a100 4
If you are running GENERIC, ccd is already enabled.  If not, you may
need to add it to your kernel configuration.
To start the setup of ccd, you need to add support for it in your kernel. A
line such as:
a103 1
<UL>
d105 1
a105 1
<strong>pseudo-device   ccd     4       # concatenated disk devices</strong>
a106 1
</UL>
d221 1
a221 1
<H3>11.2.5 - Size of the namei cache</H3>
d233 1
a233 1
The name-to-inode translation (a.ka., <!-- need to write the manual
d240 2
a241 2
manual page for explanation on the <TT>maxusers</TT> kernel configuration value.
A reasonable way to derive a value for the cache, should a large number of namei
d247 1
a247 1
value until either the namei cache hit rate improves or it is determined that 
d249 2
a250 2
namei cache. After the value has been determined, you can determine it to be 
set at system startup time with 
d369 2
a370 2
other unixen) ? Surely it is much simpler and therefore a safer way of
improving performance in some applications ?"
d376 1
a376 1
the system. Check the manpage for 
d418 1
a418 1
85MHz and above, to achieve an extremely clean, palatable picture.
d432 1
a432 1
Before you can use these modeline generators, you need to figure
d510 1
a510 1
The first frequency you see after the "Modes" line is the frequency that
d512 1
a512 1
PLUS, you can switch between any frequencies that you list here.  According
d530 2
a531 2
more you go up in BW, the fuzzier the screen image becomes.
So you may want to put in the bandwith of your card (also named
d536 1
a536 1
this, and makes this process much easier since it has several builtin
d566 1
a566 1
<small>$OpenBSD: faq11.html,v 1.23 2002/02/20 03:11:34 nick Exp $</small>
@


1.23
log
@
Added additional modeline generators.
Thanks, David Krause <openbsd@@davidkrause.com>
ok ericj@@
@
text
@d432 1
a432 1
Before you can use the these modeline generators, you need to figure 
d566 1
a566 1
<small>$OpenBSD: faq11.html,v 1.22 2002/01/27 22:44:34 nick Exp $</small>
@


1.22
log
@
Link Cleanup:  Retargeting links, test all links,
man page references, update and repair as needed.
ok ericj@@
@
text
@d426 8
a433 3
Generating a ModeLine is a black art... Luckily, there is a script which can 
do this for you.  It is the <a href="http://www-sop.inria.fr/cgi-bin/koala/nph-colas-modelines">Colas XFree86 ModeLine Generator</a>.
Before you can use the Colas generator, you need to figure out the vertical
d538 1
a538 3
through DDC and DDC2.  Unfortunately, it is not
quite ready for prime time because it does not support many video cards
which are supported in XFree86 3.3.
d566 1
a566 1
<small>$OpenBSD: faq11.html,v 1.21 2002/01/21 20:28:25 nick Exp $</small>
@


1.21
log
@
Update copyright notice to 2002.  ok ericj@@
@
text
@d43 1
a43 1
The <A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=options&apropos=0&sektion=4&format=html">options(4)</a> man page talks about the options presented.
d122 1
a122 1
<A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=ccdconfig&apropos=0&sektion=8&format=html">ccdconfig(8)</a>)
d152 1
a152 1
Greg Oster's <A HREF="http://www.cs.usask.ca/staff/oster/raid.html">NetBSD port</a>
d154 1
a154 1
<A HREF="http://www.pdl.cs.cmu.edu/RAIDframe/">RAIDframe</a> software.
d215 1
a215 1
more about softupdates in the <a href="faq14.html#14.5">softupdates FAQ</a> entry.
d262 1
a262 1
This was moved to the <A HREF="faq11-2.5.html#11.2">OpenBSD 2.5 information section</a>.
d424 1
a424 2
<A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=XF86Config&sektion=5">XF86Config(5)</a>
manual page for more ModeLine details.)
d427 1
a427 1
do this for you.  It is the <A HREF="http://www-sop.inria.fr/cgi-bin/koala/nph-colas-modelines">Colas XFree86 ModeLine Generator</a>.
d538 1
a538 1
<A HREF="ftp://koala.inria.fr/pub/Klone/">ftp://koala.inria.fr/pub/Klone/</a>.
d540 1
a540 1
ports as lang/klone.  The scripts
d563 1
a563 1
<small>$OpenBSD: faq11.html,v 1.20 2002/01/13 00:00:32 ericj Exp $</small>
@


1.20
log
@
change followed link color, so it is more visible in all netscape,
IE, konqueror

from Nick Holland <nick@@holland-consulting.net>
@
text
@d9 1
a9 1
<meta name= "copyright"     content= "This document copyright 1998-2001 by OpenBSD.">
d564 1
a564 1
<small>$OpenBSD: faq11.html,v 1.19 2002/01/12 01:39:29 ericj Exp $</small>
@


1.19
log
@
re-target the faq.
Change internal links from #10.XX -> #somethingmeaningfull
This will probobly break some external links to us, but will allow
us greater mobility in moving internal things around without breaking
links in the future.

work by Nick Holland <nick@@holland-consulting.net>
@
text
@d12 1
a12 1
<body bgcolor= "#ffffff" text= "#000000" link= "#23238E">
d564 1
a564 1
<small>$OpenBSD: faq11.html,v 1.18 2001/08/25 09:31:33 jufi Exp $</small>
@


1.18
log
@
copyright extended to 2001
@
text
@d21 6
a26 6
<li><a href="#11.1">11.1 - Networking</a></li>
<li><a href="#11.2">11.2 - Disk I/O</a></li>
<li><a href="#11.3">11.3 - Tuning kmem</a></li>
<li><a href="#11.4">11.4 - Hardware Choices</a></li>
<li><a href="#11.5">11.5 - Why aren't we using async mounts?</a></li>
<li><a href="#11.6">11.6 - Tuning your monitor resolution under XFree86</a></li>
d32 1
d64 1
d258 1
d265 1
d361 1
d398 1
d564 1
a564 1
<small>$OpenBSD: faq11.html,v 1.17 2001/08/13 16:16:42 heko Exp $</small>
@


1.17
log
@Document how to set the namei cache size here instead of options(4).
(We should document many other sysctl(8) tuning parameters
better in a manual page.) Large parts are directly from
the old options(4) NVNODE section, which was originally
from NetBSD.

ok jufi@@, ericj@@
@
text
@d9 1
a9 1
<meta name= "copyright"     content= "This document copyright 1998,1999 by OpenBSD.">
d558 1
a558 1
<small>$OpenBSD: faq11.html,v 1.15 2001/03/26 17:14:08 todd Exp $</small>
@


1.16
log
@typos
@
text
@d82 1
d217 38
@


1.15
log
@spelling
@
text
@d234 1
a234 1
a Intel Pentium III or AMD Athlon processor is much better then the
d312 1
a312 1
better then the cheap adapters.  One favourite 10/100Mbps adapter
d363 1
a363 1
getting the veritcal scan rate set to at least 72-75 Hz,
d519 1
a519 1
<small>$OpenBSD: faq11.html,v 1.14 2001/01/27 22:19:47 ericj Exp $</small>
@


1.14
log
@
some html cleanup; from mpech@@prosoft.org.lv
@
text
@d136 1
a136 1
Make sure your useable partitions are at least one cylinder off from the beginning
d308 1
a308 1
business and research enviroments. But, if you
d312 1
a312 1
better then the cheap adapters.  One favorite 10/100Mbps adapter
d322 1
a322 1
(which insists on touching a few hundred things from time to time) useable.
d519 1
a519 1
<small>$OpenBSD: faq11.html,v 1.13 2000/11/30 05:34:42 ericj Exp $</small>
@


1.13
log
@make this page link like the others; merlin@@crimelabs.net
@
text
@d182 1
d190 1
d195 1
a195 1
</UL>
d519 1
a519 1
<small>$OpenBSD: faq11.html,v 1.12 2000/10/18 15:37:14 ericj Exp $</small>
@


1.12
log
@make links look like the other pages. Pointed out by Sam Carter <scarter@@prosrm.com>
@
text
@d507 1
a508 1
<a href= "faq10.html">[To Section 10.0 - System Administration]</a>
d517 1
a517 1
<small>$OpenBSD: faq11.html,v 1.11 2000/09/30 17:36:38 chris Exp $</small>
@


1.11
log
@Mention Klone Port
@
text
@d506 2
a507 1
<a href= "faq12.html">[to Section 12.0 - For Advanced Users]</a>
d517 1
a517 1
<small>$OpenBSD: faq11.html,v 1.10 2000/09/20 00:43:02 ericj Exp $</small>
@


1.10
log
@break Disk I/O section into sub-sections. Its Cleaner
@
text
@d465 1
a465 1
of the Modes line.)  Note that "1280x1024" is just a level for the values in
d488 2
a489 2
quite ready for prime time because it does not support many devices supported
in XFree86 3.3.
d493 7
a499 3
You need to grab the Klone interpreter, and compile it.  The scripts
exist under the scripts directory in the Klone distribution.
There are two versions, a CGI version and a non-CGI version
d516 1
a516 1
<small>$OpenBSD: faq11.html,v 1.9 2000/08/11 21:26:14 chris Exp $</small>
@


1.9
log
@New answer
11.6 - Tuning your monitor resolution under XFree86
@
text
@d77 9
a85 1
<H3>CCD</H3><UL>
d141 3
a143 1
<H3>RAID</H3>
d173 3
a175 1
<H3>Filesystem Buffer</H3>
d195 3
a197 1
<H3>Soft updates</H3><UL>
d512 1
a512 1
<small>$OpenBSD: faq11.html,v 1.8 2000/03/03 13:17:15 rohee Exp $</small>
@


1.8
log
@reliabilty ->reliability + small HTML cleanup
@
text
@d26 1
d336 150
a485 1

d498 1
a498 1
<small>$OpenBSD: faq11.html,v 1.7 2000/02/26 01:19:59 rohee Exp $</small>
@


1.7
log
@informaton -> information
@
text
@d31 1
a31 1
<a name= "11.1">
a32 1
</a>
d62 1
a62 1
<a name= "11.2">
a63 1
</a>
d200 1
a200 1
<a name= "11.3">
a201 1
</a>
d206 1
a206 1
<a name= "11.4">
a207 1
</a>
d301 1
a301 1
<a name= "11.5">
a302 1
</a>
d314 1
a314 1
The quest for speed should not sacrifice the reliabilty and the stability of 
d348 1
a348 1
<small>$OpenBSD: faq11.html,v 1.6 1999/12/06 21:42:08 chris Exp $</small>
@


1.6
log
@Changes for consistency
@
text
@d206 1
a206 1
This was moved to the <A HREF="faq11-2.5.html#11.2">OpenBSD 2.5 informaton section</a>.
d353 1
a353 1
<small>$OpenBSD: faq11.html,v 1.5 1999/11/03 20:21:48 chris Exp $</small>
@


1.5
log
@Move "Tuning kmem" to a 2.5-specific area
Modify information on "what hardware should I use for OpenBSD" to be more
accurate.
@
text
@d3 1
a3 1
<title>OpenBSD FAQ: 11.0 - Performance Tuning</title>
d353 1
a353 1
<small>$OpenBSD: faq11.html,v 1.4 1999/10/10 18:21:19 chris Exp $</small>
@


1.4
log
@more explicit about when to mess with MAX_KMAP
@
text
@a197 2
If you use softupdates, you will most certainly want to take
advantage of the Tuning kmem section below.
d206 1
a206 30

<P>
If you are running 2.5 (not applicable for -current or 2.6), and if
you start using the performance tuning measures above, you may start
running out of kernel memory.  If you start getting
panics like "out of space in kmem_map" then you need to try
<UL>
<strong>
option NKMEMCLUSTERS=8192<BR>
</strong>
</UL>
Note that 8192 is valid for the i386 architecture, but may be too
little or too much for others. Look at /usr/include/machine/param.h
to see more information.
<P>
<b>This change is not necessary for anyone running -current on i386
as this has already been cranked up from a commit on September 20th.</b>
<P>
If you ever get a panic "vm_map_entry_create: out of map entries", you 
may also want to increase the number of static kernel maps and entries.
The default value for these options is architecture dependent and is specified
in /sys/vm/vm_map.h. If you are using soft updates, the following values should 
keep you going!
<UL>
<strong>
option MAX_KMAP=120<BR>
option MAX_KMAPENT=6000<BR>
</strong>
</ul>
<b>These changes may be unnecessary for anyone running current..</b>
d223 1
a223 1
And, the price of OpenBSD can't be beat.
d238 1
a238 1
<P>Instead of buying one 20GB disk, buy multiple 4GB or 9GB disks.  While this
d243 14
a256 6
<LI>Use SCSI where you can.
<P>If you are building a server, and you need more then 10GB of disk space,
the SCSI architecture is the best choice.  IDE limits you to two disks per controller.
Wide SCSI limits you to 15 per controller!  While SCSI costs more, the flexibility and
performance can justify these costs.
IDE was not designed for use in a multi-user, multi-tasking environment.
d258 1
a258 1
<li>Use SDRAM.
d262 3
a264 2
Avoid SIMMs, as there are not many companies manufacturing them anymore,
and in some cases they cost more then equivalent SDRAM!
d290 12
a302 1
<P>
d353 1
a353 1
<small>$OpenBSD: faq11.html,v 1.3 1999/09/29 22:57:42 ericj Exp $</small>
@


1.3
log
@fix bottom links
@
text
@d226 2
a227 1
You may also want to increase the number of static kernel maps and entries.
d364 1
a364 1
<small>$OpenBSD: faq11.html,v 1.2 1999/09/29 21:51:43 chris Exp $</small>
@


1.2
log
@Notes for current, no need to make questionable changes to kernel
config ...
@
text
@d353 2
a354 2
<a href= "index.html">[Back to Main Index]</a>
<a href= "faq10">[To Section 10.0 - System Administration]</a>
d363 1
a363 1
<small>$OpenBSD: faq11.html,v 1.1 1999/09/24 01:46:14 ericj Exp $</small>
@


1.1
log
@re-organization of the faq, based greatly on the recent changes to the main web page. This way will hopefully allow for greater expansion and readability. Some of the numbers have changed. sorry.
@
text
@d210 2
a211 1
If you start using the performance tuning measures above, you may start
d223 3
d236 1
a236 1

d363 1
a363 1
<small>$OpenBSD$</small>
@

