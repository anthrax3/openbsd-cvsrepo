head	1.12;
access;
symbols;
locks; strict;
comment	@# @;


1.12
date	2003.04.30.23.05.50;	author nick;	state dead;
branches;
next	1.11;

1.11
date	2003.01.01.13.01.59;	author nick;	state Exp;
branches;
next	1.10;

1.10
date	2002.01.21.20.28.25;	author nick;	state Exp;
branches;
next	1.9;

1.9
date	2001.08.25.09.31.33;	author jufi;	state Exp;
branches;
next	1.8;

1.8
date	2001.08.08.21.06.32;	author jsyn;	state Exp;
branches;
next	1.7;

1.7
date	99.12.06.21.42.08;	author chris;	state Exp;
branches;
next	1.6;

1.6
date	99.10.25.17.52.11;	author ericj;	state Exp;
branches;
next	1.5;

1.5
date	99.10.25.17.42.33;	author ericj;	state Exp;
branches;
next	1.4;

1.4
date	99.09.24.17.50.41;	author ericj;	state Exp;
branches;
next	1.3;

1.3
date	99.09.24.14.19.21;	author ericj;	state Exp;
branches;
next	1.2;

1.2
date	99.09.24.02.38.14;	author ericj;	state Exp;
branches;
next	1.1;

1.1
date	99.08.31.00.49.18;	author chris;	state Exp;
branches;
next	;


desc
@@


1.12
log
@
stuff from 2.4, 2.5.  Ick.  Bye bye!
@
text
@<html>
<head>
<title>11-2.4.0 - OpenBSD 2.4 Specific Information</title>
<link rev= "made" href= "mailto:www@@openbsd.org">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2003 by OpenBSD.">
</head>

<body bgcolor= "#ffffff" text= "#000000" link= "#23238E">

<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif">
<p>
<h2><font color=#e00000>11-2.4 - OpenBSD 2.4 Specific Information</font><hr></h2>
</p>

<p>
<ul><h3>Table of Contents</h3>
<li><a href="#11.1">11.1 - Why do I get UserDir error when running httpd?</a>
<li><a href="#11.2">11.2 - Installing at a partition 4GB or higher</a>
<li><a href="log24.txt">11.3 - OpenBSD 2.4 installation walkthrough</a>
</ul>
</p> 
<hr>

<br>

<p>
<a name= "11.1">
<h2>11.1 - In 2.4 why do I get UserDir error when running httpd?</h2>
</a>
</p>
   
<p>
It seems as though userdir support was left out of 2.4. Make sure to pick
up
the patch at:
</p>

<p>
<a href= "../errata24.html#userdir">http://www.openbsd.org/errata24.html</a>
</p>

<p> 
<a name= "11.2"></a>
<h2>11.2 - Installing at a partition 4GB or higher</h2>
</p>

<p>
The 2.4 CDs shipped with a problem in installboot. A patch can be
obtained
here <a href= "../errata.html#installboot">
              http://www.openbsd.org/errata.html</a>.
This is fixed in -current.
</p>

<p>
To place the partition boot record, installboot used a 32 bit multiplication
for the sectors times the sectorsize which is larger than 2^32 -1 (i.e.
multiplication overflow) when the partition starts at 4 GB or higher. This
means the pbr is installed in the real partition address modulo 4GB. It's
still possible to install at >= 4GB with some effort:
</p>

<p> 
You have 2 Options for doing so with OpenBSD 2.4. If you have Linux or any
other unix like OS, you should back up the sectors first before trying
anything.
</p>

<p>
<ul>
    <li>Suppose the partition starts at cylinder 611, and the drive has
        255 heads, 63 sectors: offset for the obsd partition is 611*255*63=
        9815715 sectors. multiply this by 512 and you get: 5025646080.
        5025646080 mod 2^32 = 730678784
        <p>
        (You can just subtract 2^32 on a hand calculator...) dividing by 512
        gives sector 1427107.
        </p>

        <p>
        Ok, suppose were now in linux (where cylinder numbers are 1 higher
        btw..) and that the obsd partition is DOS partition 4:
        </p>

        <p>
        <strong>
        dd if=/dev/hda of=backup.txt skip=1427107 bs=512 count=1
        </strong>
        </p>
        
        <p>
        will backup the data that installboot will nuke ..
        </p>
        
        <p> 
        Now install OpenBSD. Return to Linux.
        </p>
        
        <p>
        Now we're going to copy the partition boot record to the right place.
        </p>
           
        <p>
        <strong>
        dd if=/dev/hda of=pbr.txt skip=1427107 bs=512 count=1
        <br>
        dd if=/pbr.txt of=/dev/hda4 bs=512 count=1
        </strong>
        </p>
        
        <p>
        (adding obsd to lilo should now work)
        </p>
        
        <p>
        Now write back the nuked sector:
        </p>
        
        <p>
        <strong>
        dd if=/backup.txt of=/dev/hda seek=1427107 bs=512 count=1
        </strong>
        </p>        
        <p>
        Caveat: make sure that whatever gets nuked by installboot isn't
        essential to running dd (and starting the other OS). Backing up the
        affected partition is recommended.
        </p>
        
    <li>Use a correct version of installboot (compiled for you by another OBSD'er ..):
        <p> 
        put it on another partition, e.g. a DOS partition. Suppose wd0j is the
        DOS partition (see disklabel wd0, this is in case of IDE disks), and
        installboot is named installb there.
        </p>
        <p> 
        After booting from floppy/CD, press ^C to get into the shell:
        <strong>
        <ul>
            <li> mkdir dos<br>
            <li> mount /dev/wd0j dos<br>  
            <li> cp dos/tmp/installb /usr/mdec/installboot<br>
        </ul>
        </strong>
        </p>
</ul>   
</p>
        
<p>
Now enter 'install' and the installation procedure should use the new
installboot.
</p>    

<p> 
<hr>
<a href= "index.html"><img height= "24" width= "24" src="../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
<br>
<small>$OpenBSD: faq11-2.4.html,v 1.11 2003/01/01 13:01:59 nick Exp $</small>
</p>
</body>
</html>

@


1.11
log
@
Rev copyrights to 2003.
@
text
@d163 1
a163 1
<small>$OpenBSD: faq11-2.4.html,v 1.10 2002/01/21 20:28:25 nick Exp $</small>
@


1.10
log
@
Update copyright notice to 2002.  ok ericj@@
@
text
@d9 1
a9 1
<meta name= "copyright"     content= "This document copyright 1998-2002 by OpenBSD.">
d163 1
a163 1
<small>$OpenBSD: faq11-2.4.html,v 1.9 2001/08/25 09:31:33 jufi Exp $</small>
@


1.9
log
@
copyright extended to 2001
@
text
@d9 1
a9 1
<meta name= "copyright"     content= "This document copyright 1998-2001 by OpenBSD.">
d163 1
a163 1
<small>$OpenBSD: faq11-2.4.html,v 1.8 2001/08/08 21:06:32 jsyn Exp $</small>
@


1.8
log
@giant spelling/grammar clean-up; ok millert@@
@
text
@d9 1
a9 1
<meta name= "copyright"     content= "This document copyright 1998,1999 by OpenBSD.">
d163 1
a163 1
<small>$OpenBSD: faq11-2.4.html,v 1.7 1999/12/06 21:42:08 chris Exp $</small>
@


1.7
log
@Changes for consistency
@
text
@d52 1
a52 1
The 2.4 cd's shipped with a problem in installboot. A patch can be
d163 1
a163 1
<small>$OpenBSD: faq11-2.4.html,v 1.6 1999/10/25 17:52:11 ericj Exp $</small>
@


1.6
log
@link log24.txt since its there
@
text
@d3 1
a3 1
<title>OpenBSD FAQ: 11-2.4.0 - OpenBSD 2.4 Specific Information</title>
d163 1
a163 1
<small>$OpenBSD: faq11-2.4.html,v 1.5 1999/10/25 17:42:33 ericj Exp $</small>
@


1.5
log
@cleanup and correct links
@
text
@d23 1
d163 1
a163 1
<small>$OpenBSD: faq11-2.4.html,v 1.4 1999/09/24 17:50:41 ericj Exp $</small>
@


1.4
log
@remove bottom tags
@
text
@d21 1
a21 1
<li><a href="#11.1">Why do I get UserDir error when running httpd?</a>
d42 1
a42 1
<a href= "../errata.html#userdir">http://www.openbsd.org/errata.html</a>
d162 1
a162 1
<small>$OpenBSD: faq11-2.4.html,v 1.3 1999/09/24 14:19:21 ericj Exp $</small>
@


1.3
log
@oops
@
text
@a157 8
<font color= "#0000e0">
<a href= "index.html">[Back to Main Index]</a>
<a href= "faq11-2.4.html">[To Section 10.0 - System Administration]</a>
<a href= "faq12.html">[To Section 11.0 - Performance Tuning]</a>
</font>
</p>

<p> 
d162 1
a162 1
<small>$OpenBSD: faq11-2.4.html,v 1.2 1999/09/24 02:38:14 ericj Exp $</small>
@


1.2
log
@give proper heading to faq11-2.4.html
@
text
@d16 1
a16 1
<h2><font color=#e00000>7.0 - Keyboard Controls</font><hr></h2>
d170 1
a170 1
<small>$OpenBSD: faq11-2.4.html,v 1.1 1999/08/31 00:49:18 chris Exp $</small>
@


1.1
log
@proper naming for 2.4 faq entries
@
text
@d3 1
a3 1
<title>OpenBSD FAQ: 11.0 - OpenBSD 2.4 Specific Information</title>
d13 2
d16 1
a16 5
<font color= "#0000e0">
<a href= "index.html">[Back to Main Index]</a>
<a href= "faq10.html">[To Section 10.0 - System Administration]</a>
<a href= "faq12.html">[To Section 12.0 - Performance Tuning]</a>
</font>
d20 5
a24 1
<h1>11.0 - OpenBSD 2.4 Specific Information</h1>
d26 2
a27 1
</p>
d161 1
a161 1
<a href= "faq12.html">[To Section 12.0 - Performance Tuning]</a>
d170 1
a170 1
<small>$OpenBSD: faq11-2.4.html,v 1.3 1999/06/30 16:01:27 ericj Exp $</small>
@

