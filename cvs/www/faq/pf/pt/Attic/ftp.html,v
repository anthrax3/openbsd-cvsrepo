head	1.15;
access;
symbols;
locks; strict;
comment	@# @;


1.15
date	2014.04.01.17.14.11;	author nick;	state dead;
branches;
next	1.14;

1.14
date	2013.12.06.20.52.46;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2013.05.03.05.53.48;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2013.01.05.15.19.49;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2009.10.19.09.39.59;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2009.10.17.15.58.26;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2009.05.16.08.59.12;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2009.03.16.20.24.23;	author tobias;	state Exp;
branches;
next	1.7;

1.7
date	2007.12.01.10.39.11;	author tobias;	state Exp;
branches;
next	1.6;

1.6
date	2007.06.23.18.29.30;	author jufi;	state Exp;
branches;
next	1.5;

1.5
date	2006.12.29.12.56.48;	author jufi;	state Exp;
branches;
next	1.4;

1.4
date	2006.05.29.11.06.11;	author jufi;	state Exp;
branches;
next	1.3;

1.3
date	2005.11.18.20.48.47;	author jufi;	state Exp;
branches;
next	1.2;

1.2
date	2005.05.30.13.52.07;	author saad;	state Exp;
branches;
next	1.1;

1.1
date	2005.01.06.20.03.30;	author jufi;	state Exp;
branches;
next	;


desc
@@


1.15
log
@
Abandon translations, per deraadt@@ and ajacoutot@@.
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF: Problemas com FTP</title>
<link rev="made" href="mailto:www@@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq,pf">
<meta name="distribution"  content="global">
</head>

<!--
Copyright (c) 2003, Nick Holland <nick@@openbsd.org>
Copyright (c) 2003, 2004, Joel Knight <enabled@@myrealbox.com>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<a href="../../../pt/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../../images/smalltitle.gif" border="0">
</a>
<p>
[<a href="perf.html">Anterior: Desempenho</a>]
[<a href="index.html">Conteúdo</a>]
[<a href="authpf.html">Próximo: Authpf: Shell de Usuário para Gateways
de Autenticação</a>]

<p>
<h1><font color="#e00000">PF: Problemas com FTP</font></h1>
<hr>

<h3>Conteúdo</h3>
<ul>
<li><a href="#modes">Modos do FTP</a>
<li><a href="#client">Cliente FTP Atrás do Firewall</a>
<li><a href="#server">Servidor FTP Protegido pelo PF</a>
<li><a href="#natserver">Servidor FTP Protegido por um Firewall PF
    Externo Fazendo NAT</a>
<li><a href="#info">Mais Informações sobre FTP</a>
<li><a href="#tftp-proxy">Proxy de TFTP</a>
</ul>

<hr>

<a name="modes"></a>
<h2>Modos do FTP</h2>
FTP é um protocolo que data dos primórdios da Internet, quando esta
era uma pequena e amigável coleção de computadores onde todo mundo
se conhecia. Naquele tempo não havia necessidade de filtragem e altos
requisitos de segurança. O FTP não foi desenvolvido para ser filtrado,
atravessar firewalls, ou trabalhar com NAT.

<p>
Você pode usar o FTP em dois modos: passivo e ativo. Geralmente a
escolha de modo passivo ou ativo é feita para determinar de quem
será o problema com o firewall. Na verdade, você precisa suportar
ambos para deixar seus usuários contentes.

<p>
Com FTP ativo, quando um usuário se conecta ao servidor FTP remoto e
solicita informações ou um arquivo, o servidor FTP abre uma nova
conexão com o cliente para transferir os dados. Essa é a chamada
<i>conexão de dados</i>. Para iniciar, o cliente FTP escolhe uma porta
aleatória para receber a conexão de dados. O cliente envia o número da
porta escolhida para o servidor FTP e fica esperando uma conexão nessa
porta. Então o servidor FTP inicia a conexão com o endereço do cliente
na porta escolhida e transfere os dados.
Isso se torna um problema para usuários atrás de um gateway NAT tentando
se conectar a servidores FTP. Por causa da forma como NAT funciona, o
servidor FTP inicializa a conexão de dados se conectando ao endereço
externo do gateway NAT na porta escolhida.
A máquina fazendo NAT recebe o pedido, mas como não possui mapeamento
para o pacote na tabela de estados, descarta o pacote sem entregá-lo
ao cliente.

<p>
No modo FTP passivo (o modo padrão no cliente
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1"
>ftp(1)</a> do OpenBSD), o cliente pede ao servidor que escolha uma
porta aleatória para ouvir, esperando a conexão de dados. O servidor
informa ao cliente a porta escolhida e o cliente se conecta na porta
para transferir os dados.
Infelizmente, isso nem sempre é possível ou desejável, por causa
da possibilidade do firewall em frente ao servidor FTP bloquear
a conexão de dados. O ftp(1) do OpenBSD usa o modo passivo por padrão;
para forçar o modo ativo, use o sinalizador -A no ftp, ou defina o modo
passivo para "off" usando o comando "<tt>passive off</tt>" no prompt
"<tt>ftp&gt;</tt>".


<a name="client"></a>
<h2>Cliente FTP Atrás do Firewall</h2>
Como explicado anteriormente, o FTP não se dá muito bem com
NAT e firewalls.

<p>
O Packet Filter fornece uma solução para essa situação através do
desvio do tráfego FTP para um servidor proxy de FTP.
Esse processo age como "guia" do tráfego FTP através do
gateway/firewall NAT, adicionando as regras necessárias e removendo-as
do sistema quando não forem mais necessárias através do sistema de
<a href="anchors.html">âncoras</a>.
O proxy de FTP usado pelo PF é o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+5.4"
>ftp-proxy(8)</a>.

<p>
Para ativá-lo, insira algo assim no início da sessão de regras do <tt>pf.conf</tt>:

<blockquote>
<tt>
pass in quick on $int_if inet proto tcp to port 21 divert-to 127.0.0.1 port 8021</tt>
</blockquote>

<p>
Isso desvia o tráfego FTP de seus clientes para o ftp-proxy(8),
que está ouvindo na porta 8021 em sua máquina.

<p>
Você também precisa de uma âncora na seção de regras:

<blockquote>
<tt>
anchor "ftp-proxy/*"
</tt>
</blockquote>

<p>
O servidor proxy tem que ser iniciado e estar em execução na máquina
OpenBSD. Isso é feito inserindo a linha abaixo em
<tt>/etc/rc.conf.local</tt>:

<blockquote>
<tt>
ftpproxy_flags=""
</tt>
</blockquote>

<p>
O programa ftp-proxy pode ser iniciado como root, para ativá-lo sem
precisar reinicializar.

<p>
O ftp-proxy escuta na porta 8021, a mesma porta que a instrução
<tt>divert-to</tt> acima está enviando o tráfego FTP.

<p>
Para suportar conexões de modo ativo a partir de certos 
(diferentíssimos) clientes, você pode precisar utilizar '-r' 
em conjunto com o ftp-proxy(8).

<a name="server"></a>
<h2>Servidor FTP Protegido pelo PF</h2>
Nesse caso, o PF está em execução no próprio servidor FTP em vez de um
firewall dedicado. Ao servir uma conexão FTP passiva, o FTP usa
uma porta TCP alta e escolhida aleatoriamente para os dados que chegam.
Por padrão, o servidor FTP
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8"
>ftpd(8)</a> nativo do OpenBSD utiliza a faixa de portas de
49152 a 65535.
Obviamente, essa faixa de portas deve ter permissão de passar pelas
regras de filtragem, junto com a porta 21 (a porta de controle FTP):

<blockquote>
<tt>
pass in on $ext_if proto tcp to port 21<br>
pass in on $ext_if proto tcp to port &gt; 49151
</tt>
</blockquote>

<p>
Perceba que se você quiser, pode restringir consideravelmente a faixa de
portas. No caso do programa
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8"
>ftpd(8)</a> do OpenBSD, isso é feito utilizando as variáveis do
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8"
>sysctl(8)</a> <tt>net.inet.ip.porthifirst</tt> e
<tt>net.inet.ip.porthilast</tt>.

<a name="natserver"></a>
<h2>Servidor FTP Protegido por um Firewall PF Externo Fazendo NAT</h2>
Nesse caso, o firewall deve redirecionar o tráfego para o servidor FTP
além de não bloquear as portas necessárias.
Para conseguir isso, voltamos para o ftp-proxy(8).

<p>
O ftp-proxy(8) pode executar em um modo que faz com que ele redirecione
todas as conexões FTP para um servidor FTP específico.
Basicamente, configuramos o proxy para escutar na porta 21 do firewall
e redirecionamos todas as conexões de volta para o servidor.

<p>
Edite o arquivo <tt>/etc/rc.conf.local</tt> e adicione o seguinte:

<blockquote>
<tt>
ftpproxy_flags="-R 10.10.10.1 -p 21 -b 192.168.0.1"
</tt>
</blockquote>

<p>
Aqui o 10.10.10.1 é o endereço IP do servidor FTP real, 21 é a porta
que queremos que o ftp-proxy(8) escute e 192.168.0.1 é o endereço no
firewall para o proxy.

<p>
Agora para as regras do pf.conf:

<blockquote>
<tt>
ext_ip = "192.168.0.1"<br>
ftp_ip = "10.10.10.1"<br>
<br>
+match out on $ext_if inet from $int_if nat-to ($ext_if)<br>
<br>
anchor "ftp-proxy/*"<br>
pass in on $ext_if inet proto tcp to $ext_ip port 21<br>
pass out on $int_if inet proto tcp to $ftp_ip port 21 user proxy
</tt>
</blockquote>

<p>
Aqui nós permitimos a conexão vindo para a porta 21 na
interface externa, bem como a conexão de saída correspondente para o
servidor FTP.
O "user proxy" na regra de saída garante que apenas as conexões
iniciadas pelo ftp-proxy(8) sejam permitidas.

<p>
Note que se você quer executar o ftp-proxy(8) para proteger um servidor
FTP, bem como permitir que clientes façam FTP para fora do firewall,
duas instâncias do ftp-proxy serão necessárias.


<a name="info"></a>
<h2>Mais Informações sobre FTP</h2>
Mais informações sobre filtragem de tráfego FTP e funcionamento geral
do FTP podem ser encontradas neste documento:
<ul>
<li><a href="http://www.pintday.org/whitepapers/ftp-review.shtml">FTP
    Reviewed</a>
</ul>

<a name="tftp-proxy"></a>
<h2>Proxy de TFTP</h2>

<p>
O Protocolo de Transferência de Arquivos Trivial
(TFTP - "Trivial File Transfer Protocol") sofre algumas das mesmas
limitações que o FTP quando tenta passar através de um firewall.
Felizmente, o PF tem um proxy de TFTP chamado
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+5.4"
>tftp-proxy(8)</a>.

<p>
O tftp-proxy(8) é configurado da mesma forma que o ftp-proxy(8) foi
configurado na seção
<a href="#client">Cliente FTP Atrás do Firewall</a> acima.

<blockquote>
<tt>
match out on $ext_if from $int_if nat-to ($ext_if)<br>
anchor "tftp-proxy/*"<br>
pass in quick on $int_if inet proto udp from $int_if to port tftp \<br>
&nbsp;&nbsp;&nbsp;&nbsp;divert-to 127.0.0.1 port 6969<br>
<br>
anchor "tftp-proxy/*"
</tt>
</blockquote>

<p>
As regras acima permitem a saída de tráfego TFTP da rede interna para
servidores TFTP na rede externa.

<p>
O último passo é habilitar o tftp-proxy no
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inetd.conf&amp;sektion=5"
>inetd.conf(5)</a>
para que ele escute na mesma porta que a regra <tt>divert-to</tt> especificada
acima, nesse caso a porta 6969.

<blockquote>
<tt>
127.0.0.1:6969  dgram   udp   wait  root  /usr/libexec/tftp-proxy tftp-proxy
</tt>
</blockquote>

<p>
Diferentemente do ftp-proxy(8), o tftp-proxy(8) é chamado a partir do
inetd.


<p>
[<a href="perf.html">Anterior: Desempenho</a>]
[<a href="index.html">Conteúdo</a>]
[<a href="authpf.html">Próximo: Authpf: Shell de Usuário para Gateways
de Autenticação</a>]

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[voltar]"></a>
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: index.html,v 1.39 ]<br>
$Translation: ftp.html,v 1.14 2013/12/01 12:44:33 egypcio Exp $<br>
-->
$OpenBSD: ftp.html,v 1.14 2013/12/06 20:52:46 ajacoutot Exp $
</small>

</body>
</html>
@


1.14
log
@Sync with Steelix CVS
@
text
@d325 1
a325 1
$OpenBSD$
@


1.13
log
@Sync with Steelix CVS
@
text
@d120 1
a120 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+5.3"
d268 1
a268 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+5.3"
d322 2
a323 2
Originally [OpenBSD: index.html,v 1.38 ]<br>
$Translation: ftp.html,v 1.13 2013/05/02 22:48:46 renato Exp $<br>
@


1.12
log
@Sync with Steelix CVS
@
text
@d120 1
a120 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+5.2"
d268 1
a268 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+5.2"
d322 2
a323 2
Originally [OpenBSD: index.html,v 1.37 ]<br>
$Translation: ftp.html,v 1.12 2013/01/04 19:08:08 egypcio Exp $<br>
@


1.11
log
@Sync with Steelix CVS
@
text
@d114 1
a114 1
redirecionamento do tráfego FTP para um servidor proxy de FTP.
d120 1
a120 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+4.6"
d124 1
a124 1
Para ativá-lo, insira algo assim na seção de NAT do <tt>pf.conf</tt>:
d128 1
a128 5
nat-anchor "ftp-proxy/*"<br>
rdr-anchor "ftp-proxy/*"<br>
rdr on $int_if proto tcp from any to any port 21 -&gt; 127.0.0.1 \<br>
&nbsp;&nbsp;&nbsp;port 8021
</tt>
d132 2
a133 5
As primeiras duas linhas são <a href="anchors.html">âncoras</a>, as
quais são usadas pelo ftp-proxy para adicionar regras em tempo de
execução para gerenciar seu tráfego FTP.
A última linha redireciona o tráfego FTP de seus clientes para o
programa ftp-proxy(8), que está escutando na sua máquina, na porta 8021.
d161 1
a161 1
<tt>rdr</tt> acima está enviando o tráfego FTP.
d164 3
a166 4
Para habilitar conexões de modo ativo, você precisa do comutador '-r' no
ftp-proxy(8) (para isso você tem que executar o proxy antigo com
"-u root").

d182 2
a183 3
pass in on $ext_if proto tcp from any to any port 21 keep state<br>
pass in on $ext_if proto tcp from any to any port &gt; 49151 \<br>
&nbsp;&nbsp;&nbsp;keep state
d230 1
a230 3
nat-anchor "ftp-proxy/*"<br>
nat on $ext_if inet from $int_if -&gt; ($ext_if)<br>
rdr-anchor "ftp-proxy/*"<br>
d232 3
a234 5
pass in on $ext_if inet proto tcp to $ext_ip port 21 \<br>
&nbsp;&nbsp;&nbsp;&nbsp;flags S/SA keep state<br>
pass out on $int_if inet proto tcp to $ftp_ip port 21 \<br>
&nbsp;&nbsp;&nbsp;&nbsp;user proxy flags S/SA keep state<br>
anchor "ftp-proxy/*"
d268 1
a268 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+4.6"
d278 4
a281 4
nat on $ext_if from $int_if -&gt; ($ext_if)<br>
rdr-anchor "tftp-proxy/*"<br>
rdr on $int_if proto udp from $int_if to port tftp -&gt; \<br>
&nbsp;&nbsp;&nbsp;&nbsp;127.0.0.1 port 6969<br>
d295 1
a295 1
para que ele escute na mesma porta que a regra <tt>rdr</tt> especificada
d322 2
a323 2
Originally [OpenBSD: index.html,v 1.29 ]<br>
$Translation: ftp.html,v 1.11 2009/10/18 16:52:52 alan Exp $<br>
@


1.10
log
@Sync with Steelix CVS
@
text
@d120 1
a120 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+4.5"
d278 1
a278 1
(TFTP, "Trivial File Transfer Protocol") sofre algumas das mesmas
d281 1
a281 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+4.5"
d335 2
a336 2
Originally [OpenBSD: index.html,v 1.28 ]<br>
$Translation: ftp.html,v 1.10 2009/10/13 19:12:27 alan Exp $<br>
@


1.9
log
@Sync with Steelix CVS
@
text
@d41 2
a42 2
[<a href="authpf.html">Próximo: Authpf: Shell de Usuário para Autenticação
em Gateways</a>]
d50 3
a52 3
<li><a href="#modes">Modos FTP</a>
<li><a href="#client">Cliente FTP atrás de Firewall</a>
<li><a href="#server">PF "Auto-Protegendo" um Servidor FTP</a>
d56 1
a56 1
<li><a href="#tftp-proxy">TFTP Proxy</a>
d62 1
a62 1
<h2>Modos FTP</h2>
d70 1
a70 1
Você pode usar FTP em dois modos: passivo e ativo. Geralmente, a
d72 1
a72 1
será o problema com o firewall. Na verdade, você precisará suportar
d88 2
a89 2
A máquina fazendo NAT receberá o pedido, mas como não possui mapeamento
para o pacote na tabela de estado, descartará o pacote sem entregá-lo
d96 1
a96 1
porta aleatória para ouvir esperando a conexão de dados. O servidor
d101 2
a102 2
a conexão de dados. O ftp(1) do OpenBSD usa o modo passivo por padrão,
para forçar o modo ativo, use a opção -A no ftp, ou defina o modo
d108 1
a108 1
<h2>Cliente FTP Atrás de um Firewall</h2>
d113 7
a119 6
O Packet Filter fornece uma solução para essa situação redirecionando
tráfego FTP para um servidor proxy FTP. Esse processo age "guiando" o
tráfego FTP através do gateway/firewall NAT, adicionando as regras
necessárias e removendo-as do sistema quando não forem mais necessárias,
através do sistema de <a href="anchors.html">âncoras</a>.
O proxy FTP usado pelo PF no OpenBSD 3.9 e posteriores é o
d124 1
a124 1
Para ativá-lo, insira algo assim na seção NAT do <tt>pf.conf</tt>:
d139 2
a140 2
A última linha redireciona tráfego FTP de seus clientes para o programa
ftp-proxy(8), que está escutando na sua máquina, na porta 8021.
d152 1
a152 1
O servidor proxy tem que ser iniciado e estar rodando na máquina
d163 2
a164 2
O programa ftp-proxy pode ser iniciado como root, para ativá-lo
sem precisar reiniciar.
d167 2
a168 2
O ftp-proxy escuta na porta 8021, a mesma porta que o <tt>rdr</tt>
acima está enviando tráfego FTP.
d171 3
a173 2
Para habilitar conexões ativas, você precisa da opção '-r' no
ftp-proxy(8) (para isso no proxy antigo, você usava a opção "-u root").
d177 5
a181 5
<h2>PF "Auto-Protegendo" um Servidor FTP</h2>
Nesse caso, o PF está rodando no próprio servidor FTP em vez de um
firewall dedicado. Quando servindo uma conexão FTP passiva, FTP usará
uma porta alta TCP aleatória para os dados. Por padrão, o servidor FTP
nativo do OpenBSD
d183 2
a184 1
>ftpd(8)</a> utiliza a faixa de portas de 49152 a 65535.
d200 1
a200 1
>ftpd(8)</a> do OpenBSD, isso é feito utilizando as variáveis
d207 1
a207 1
Nesse caso, o firewall deve redirecionar tráfego para o servidor FTP
d212 1
a212 1
O ftp-proxy(8) pode rodar em um modo que faz com que ele redirecione
d214 1
a214 1
Basicamente, configuramos o proxy para escutar na porta 21 no firewall
d218 1
a218 1
Edite o <tt>/etc/rc.conf.local</tt> e adicione o seguinte:
d227 1
a227 1
Aqui o 10.10.10.1 é o endereço IP do atual servidor FTP, 21 é a porta
d232 1
a232 1
Agora para as regras pf.conf:
d252 3
a254 2
Aqui nós permitimos a conexão para a porta 21 na interface externa, bem
como a conexão de saída correspondente para o servidor FTP.
d259 3
a261 3
Note que se você quer rodar o ftp-proxy(8) para proteger um servidor
FTP, bem como permitir clientes fazer FTP para fora do firewall, duas
instâncias do ftp-proxy serão necessárias.
d266 2
a267 2
Mais informações sobre filtragem FTP e funcionamento geral do FTP
podem ser encontradas neste documento:
d274 1
a274 1
<h2>TFTP Proxy</h2>
d277 4
a280 3
O "Trivial File Transfer Protocol" (TFTP) sofre das mesmas limitações
que o FTP quando tenta passar através de um firewall.
Felizmente, o PF tem um proxy TFTP chamado
d287 1
a287 1
<a href="#client">Cliente FTP atrás de Firewall</a> acima.
d301 2
a302 2
As regras acima permitem saída TFTP da rede interna para servidores
TFTP na rede externa.
d309 1
a309 1
acima, nesse caso 6969.
d318 2
a319 1
Diferentemente do ftp-proxy(8), o tftp-proxy(8) é chamado do inetd.
d325 2
a326 2
[<a href="authpf.html">Próximo: Authpf: Shell de Usuário para Autenticação
em Gateways</a>]
d336 1
a336 1
$Translation: ftp.html,v 1.9 2009/05/10 17:44:16 alan Exp $<br>
@


1.8
log
@Sync with Steelix CVS
@
text
@d39 1
a39 1
[<a href="perf.html">Anterior: Performance</a>]
d118 2
a119 2
O proxy FTP usado pelo PF é o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+4.4"
d276 1
a276 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+4.4"
d317 1
a317 1
[<a href="perf.html">Anterior: Performance</a>]
d329 2
a330 2
Originally [OpenBSD: index.html,v 1.27 ]<br>
$Translation: ftp.html,v 1.8 2009/03/11 00:52:55 dsantos Exp $<br>
@


1.7
log
@Sync with Steelix CVS
@
text
@d8 3
a10 3
<meta name="description" content="the OpenBSD FAQ page">
<meta name="keywords" content="openbsd,faq,pf">
<meta name="distribution" content="global">
d40 3
a42 2
[<a href="index.html">Conte&uacute;do</a>]
[<a href="authpf.html">Pr&oacute;ximo: Authpf: Shell de Usu&aacute;rio para Autentica&ccedil;&atilde;o em Gateways</a>]
d48 1
a48 1
<h3>Conte&uacute;do</h3>
d51 1
a51 1
<li><a href="#client">Cliente FTP atr&aacute;s de Firewall</a>
d53 3
a55 2
<li><a href="#natserver">Servidor FTP Protegido por um Firewall PF Externo Fazendo NAT</a>
<li><a href="#info">Mais Informa&ccedil;oes sobre FTP</a>
d63 43
a105 46
FTP &eacute; um protocolo que data dos prim&oacute;rdios da Internet, 
quando esta era uma pequena a amig&aacute;vel cole&ccedil;&atilde;o de 
computadores onde todo mundo se conhecia. Naquele tempo n&atilde;o 
havia necessidade de filtragem e altos requisitos de seguran&ccedil;a. 
O FTP n&atilde;o foi desenvolvido para ser filtrado, atravessar 
firewalls, ou trabalhar com NAT.

<p>
Voc&ecirc; pode usar FTP em dois modos: passivo e ativo. Geralmente, a 
escolha de modo passivo ou ativo &eacute; feita para determinar de quem 
ser&aacute; o problema com o firewall.  Na verdade voc&ecirc; 
precisar&aacute; suportar ambos para deixar seus usu&aacute;rios 
contentes.

<p>
Com FTP ativo, quando um usu&aacute;rio se conecta ao servidor FTP 
remoto e solicita informa&ccedil;&otilde;es ou um arquivo, o servidor 
FTP abre uma nova conex&atilde;o com o cliente para transferir os 
dados. Esta &eacute; a chamada <i>conex&atilde;o de dados</i>.  Para 
iniciar, o cliente FTP escolhe uma porta aleat&oacute;ria para receber 
a conex&atilde;o de dados. O cliente envia o n&uacute;mero da porta
escolhida para o servidor FTP e fica esperando uma conex&atilde;o nessa 
porta.  Ent&atilde;o o servidor FTP inicia a conex&atilde;o com o 
endere&ccedil;o do cliente na porta escolhida e transfere os dados. 
Isto se torna um problema para usu&aacute;rios atr&aacute;s de um 
gateway NAT tentando se conectar a servidores FTP.  Por causa da forma 
como NAT funciona, o servidor FTP inicializa a conex&atilde;o de dados 
se conectando ao endere&ccedil;o externo do gateway NAT na porta 
escolhida. 
A m&aacute;quina fazendo NAT receber&aacute; o pedido, mas como 
n&atilde;o possui mapeamento para o pacote na tabela de estado, 
descartar&aacute; o pacote sem entrega-lo ao cliente.

<p>
No modo FTP passivo (o modo padr&atilde;o no cliente 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1"
>ftp(1)</a> do OpenBSD), o cliente pede ao servidor que escolha uma porta aleat&oacute;ria 
para ouvir esperando a conex&atilde;o de dados. O servidor informa ao cliente a porta 
escolhida e o cliente se conecta na porta para transferir os dados. 
Infelizmente, isto nem sempre &eacute; poss&iacute;vel ou desej&aacute;vel, por causa 
da possibilidade do firewall em frente ao servidor FTP bloquear 
a conex&atilde;o de dados. O ftp(1) do OpenBSD usa modo passivo por 
padr&atilde;o; para for&ccedil;ar o modo ativo, use a op&ccedil;&atilde;o -A para o ftp, ou 
defina modo passivo para "off" usando o comando 
"<tt>passive off</tt>" no prompt do "<tt>ftp&gt;</tt>".
d108 2
a109 2
<h2>Cliente FTP Atr&aacute;s de um Firewall</h2>
Como indicado anteriormente, FTP n&atilde;o se d&aacute; muito bem com 
d113 8
a120 16
PF fornece uma solu&ccedil;&atilde;o para esta 
situa&ccedil;&atilde;o redirecionando tr&aacute;fego FTP para um 
servidor proxy FTP. Este processo age "guiando" o tr&aacute;fego FTP 
atrav&eacute;s do gateway/firewall NAT, adicionando as regras 
necess&aacute;rias e removendo-as do sistema quando n&atilde;o forem 
mais necess&aacute;rias, atrav&eacute;s do sistema de <a
href="anchors.html">&acirc;ncoras</a>.
O proxy FTP usado pelo OpenBSD 4.0 e PF &eacute; o 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+4.2">ftp-proxy(8)</a>.  
(nota: Vers&otilde;es anteriores do OpenBSD usam um proxy diferente, 
com o mesmo nome, que &eacute; descrito na documenta&ccedil;&atilde;o do
OpenBSD 3.8 em
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+3.8"
>ftp-proxy(8)v3.8</a>).
d123 1
a123 2
Para ativa-lo, insira algo assim na se&ccedil;&atilde;o NAT do 
<tt>pf.conf</tt>:
d135 5
a139 7
As primeiras duas linhas s&atilde;o 
<a href="anchors.html">&acirc;ncoras</a> as quais s&atilde;o usadas 
pelo ftp-proxy para adicionar regras em tempo de execu&ccedil;&atilde;o 
para gerenciar seu tr&aacute;fego FTP.
A &uacute;ltima linha redireciona tr&aacute;fego FTP de seus clientes
para o programa ftp-proxy(8), que est&aacute; escutando na sua 
m&aacute;quina na porta 8021.
d142 1
a142 2
Voc&ecirc; tamb&eacute;m precisa uma &acirc;ncora na 
se&ccedil;&atilde;o de regras:
d151 2
a152 2
O servidor proxy tem que ser iniciado e estar rodando na m&aacute;quina
OpenBSD.  Isto &eacute; feito inserindo a linha abaixo em
d162 1
a162 1
O programa ftp-proxy pode ser iniciado como root, para ativ&aacute;-lo
d166 2
a167 2
O ftp-proxy escuta na porta 8021, a mesma porta que o 
<tt>rdr</tt> acima est&aacute; enviando tr&aacute;fego FTP.
d170 3
a172 3
Para habilitar conex&otilde;es ativas, voc&ecirc; precisa da
op&ccedil;&atilde;o '-r' no ftp-proxy(8) (para isto, no proxy antigo, 
voc&ecirc; usava a op&ccedil;&atilde;o "-u root").
d176 5
a180 7
Neste caso, PF est&aacute; rodando no pr&oacute;prio servidor FTP ao 
inv&eacute;s de um firewall dedicado.  Quando servindo uma
conex&atilde;o FTP passiva, FTP usar&aacute; uma porta alta TCP 
aleat&oacute;ria para os dados.  Por padr&atilde;o, o servidor FTP 
nativo do OpenBSD 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8"
d182 2
a183 3
Obviamente, esta faixa de portas deve ter permiss&atilde;o de passar
pelas regras de filtragem, junto com a porta 21 
(a porta de controle FTP):
d194 5
a198 7
Perceba que se voc&ecirc; quiser, pode restringir consideravelmente  
a faixa de portas. No caso do programa 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8"
>ftpd(8)</a> do OpenBSD, isto &eacute; feito utilizando as vari&aacute;veis  
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8"
d204 3
a206 4
Neste caso, o firewall deve redirecionar tr&aacute;fego para o 
servidor FTP al&eacute;m de n&atilde;o bloquear as portas 
necess&aacute;rias.  
Para conseguir isto, voltamos para o ftp-proxy(8).
d210 3
a212 3
todas as conex&otilde;es FTP para um servidor FTP espec&iacute;fico.
Basicamente configuramos o proxy para escutar na porta 21 no firewall
e redirecionamos todas as conex&otilde;es de volta para o servidor.
d224 3
a226 3
Aqui 10.10.10.1 &eacute; o endere&ccedil;o IP do atual servidor FTP, 
21 &eacute; a porta que queremos que o ftp-proxy(8) escute
e 192.168.0.1 &eacute; o endere&ccedil;o no firewall para o proxy. 
d249 4
a252 5
Aqui n&oacute;s permitimos a conex&atilde;o para a porta 21 na 
interface externa bem como a conex&atilde;o de sa&iacute;da
correspondente para o servidor FTP.
O "user proxy" na regra de sa&iacute;da garante que
apenas as conex&otilde;es iniciadas pelo ftp-proxy(8) sejam permitidas.
d255 4
a258 3
Note que se voc&ecirc; quer rodar o ftp-proxy(8) para proteger um
servidor FTP bem como permitir clientes fazer FTP para fora do firewall,
duas inst&acirc;ncias do ftp-proxy ser&atilde;o necessarias.
d261 2
a262 2
<h2>Mais Informa&ccedil;&otilde;es sobre FTP</h2>
Mais informa&ccedil;&otilde;es sobre filtragem FTP e funcionamento geral do FTP 
d266 1
a266 1
Reviewed</a>
d273 4
a276 6
Trivial File Transfer Protocol (TFTP) sofre das mesmas 
limita&ccedil;&otilde;es que o FTP quando tenta passar atrav&eacute;s 
de um firewall.
Felizmente o PF tem um proxy TFTP chamado
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=tftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+4.2"
d280 3
a282 3
O tftp-proxy(8) &eacute; configurado da mesma forma que o ftp-proxy(8) 
foi configurado na se&ccedil;&atilde;o
<a href="#client">Cliente FTP atr&aacute;s de Firewall</a> acima.
d296 2
a297 2
As regras acima permitem sa&iacute;da TFTP da rede interna para
servidores TFTP na rede externa.
d300 5
a304 6
O &uacute;ltimo passo &eacute; habilitar o tftp-proxy no
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=inetd.conf&amp;sektion=5"
>inetd.conf(5)</a> 
para que ele escute na mesma porta que a regra
<tt>rdr</tt> especificada acima, neste caso 6969.
d313 1
a313 1
Diferentemente do ftp-proxy(8) o tftp-proxy(8) &eacute; chamado do inetd.
d318 3
a320 2
[<a href="index.html">Conte&uacute;do</a>]
[<a href="authpf.html">Pr&oacute;ximo: Authpf: Shell de Usu&aacute;rio para Autentica&ccedil;&atilde;o em Gateways</a>]
d329 2
a330 2
Originally [OpenBSD: index.html,v 1.25 ]<br>
$Translation: ftp.html,v 1.7 2007/11/24 18:12:31 dsantos Exp $<br>
d332 1
a332 1
$OpenBSD$ 
@


1.6
log
@sync with steelix translation CVS
@
text
@d97 1
a97 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1&amp;manpath=OpenBSD+4.0"
d114 1
a114 1
Packet Filter fornece uma solu&ccedil;&atilde;o para esta 
d123 1
a123 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+4.0">ftp-proxy(8)</a>.  
d195 1
a195 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d213 1
a213 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d216 1
a216 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d292 1
a292 1
O Trivial File Transfer Protocol (TFTP) sofre das mesmas 
d297 1
a297 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=tftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d323 1
a323 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=inetd.conf&amp;sektion=5&amp;manpath=OpenBSD+4.0"
d350 2
a351 2
Originally [OpenBSD: index.html,v 1.23 ]<br>
$Translation: ftp.html,v 1.6 2007/06/20 13:25:12 dsantos Exp $<br>
@


1.5
log
@sync with steelix translation CVS
@
text
@d129 1
a129 1
+>ftp-proxy(8)v3.8</a>).
d351 1
a351 1
$Translation: ftp.html,v 1.5 2006/12/28 18:29:29 dsantos Exp $<br>
@


1.4
log
@sync with steelix translation CVS
@
text
@d50 1
a50 1
<li><a href="#client">Client FTP atr&aacute;s de Firewall</a>
d54 1
d61 6
a66 5
FTP &eacute; um protocolo que data dos prim&oacute;rdios da Internet, quando esta 
era uma pequena a amig&aacute;vel cole&ccedil;&atilde;o de computadores onde todo mundo se 
conhecia. Naquele tempo n&atilde;o havia necessidade de filtragem e 
altos requisitos de seguran&ccedil;a. O FTP n&atilde;o foi desenvolvido para ser 
filtrado, atravessar firewalls, ou trabalhar com NAT.
d71 22
a92 19
ser&aacute; o problema com o firewall.  Na verdade voc&ecirc; precisar&aacute; suportar 
ambos para deixar seus usu&aacute;rios contentes.

<p>
Com FTP ativo, quando um usu&aacute;rio se conecta ao servidor FTP remoto e 
solicita informa&ccedil;&otilde;es ou um arquivo, o servidor FTP abre uma nova 
conex&atilde;o com o cliente para transferir os dados. Esta &eacute; a chamada
<i>conex&atilde;o de dados</i>.  Para iniciar, o cliente FTP escolhe uma 
porta aleat&oacute;ria para receber a conex&atilde;o de dados. O cliente envia 
o n&uacute;mero da porta escolhida para o servidor FTP e fica esperando 
uma conex&atilde;o nessa porta.  Ent&atilde;o o servidor FTP inicia a conex&atilde;o 
com o endere&ccedil;o do cliente na porta escolhida e transfere os dados. 
Isto se torna um problema para usu&aacute;rios atr&aacute;s de um gateway NAT 
tentando se conectar a servidores FTP.  Por causa da forma como NAT 
funciona, o servidor FTP inicializa a conex&atilde;o de dados se 
conectando ao endere&ccedil;o externo do gateway NAT na porta escolhida. 
A m&aacute;quina fazendo NAT receber&aacute; o pedido, mas como n&atilde;o possui 
mapeamento para o pacote na tabela de estado, descartar&aacute; o 
pacote sem entrega-lo ao cliente.
d97 1
a97 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1&amp;manpath=OpenBSD+3.9"
d109 1
a109 1
<h2>Client FTP Atr&aacute;s de um Firewall</h2>
d121 1
a121 1
O proxy FTP usado pelo OpenBSD 3.9 e PF &eacute; o 
d123 1
a123 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+3.9">ftp-proxy(8)</a>.  
d145 4
a148 4
As primeiras duas linhas s&atilde;o <a href="anchors.html">&acirc;ncoras</a>
as quais s&atilde;o usadas pelo ftp-proxy para adicionar regras
em tempo de execu&ccedil;&atilde;o para gerenciar seu tr&aacute;fego
FTP.
a186 6
<p>
Por favor note que a fun&ccedil;&atilde;o do ftp-proxy(8) &eacute; 
ajudar <b>clientes FTP</b> atr&aacute;s de um filtro PF; ele 
n&atilde;o &eacute; usado para lidar com <b>servidor FTP</b> 
atr&aacute;s de um filtro PF.

d195 1
a195 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d213 1
a213 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d216 1
a216 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d222 24
a245 7
Neste caso, o firewall deve redirecionar tr&aacute;fego para o servidor FTP 
al&eacute;m de n&atilde;o bloquear as portas necess&aacute;rias.  Para o prop&oacute;sito da 
discuss&atilde;o, assumiremos que o servidor FTP em quest&atilde;o &eacute; novamente o 
servidor padr&atilde;o do OpenBSD
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.9"
>ftpd(8)</a>, usando a faixa de portas padr&atilde;o.
d248 2
a249 1
Aqui est&aacute; um pequeno conjunto de regras para realizar o servi&ccedil;o:
d252 2
a253 1
ftp_server = "10.0.3.21"<br>
d255 3
a257 4
rdr on $ext_if proto tcp from any to any port 21 -&gt; $ftp_server \<br>
&nbsp;&nbsp;&nbsp;port 21<br>
rdr on $ext_if proto tcp from any to any port 49152:65535 -&gt; \<br>
&nbsp;&nbsp;&nbsp;$ftp_server port 49152:65535<br>
d259 5
a263 11
# entrada em $ext_if<br>
pass in quick on $ext_if proto tcp from any to $ftp_server \<br>
&nbsp;&nbsp;&nbsp;port 21 keep state<br>
pass in quick on $ext_if proto tcp from any to $ftp_server \<br>
&nbsp;&nbsp;&nbsp;port &gt; 49151 keep state<br>
<br>
# sa&iacute;da em $int_if<br>
pass out quick on $int_if proto tcp from any to $ftp_server \<br>
&nbsp;&nbsp;&nbsp;port 21 keep state<br>
pass out quick on $int_if proto tcp from any to $ftp_server \<br>
&nbsp;&nbsp;&nbsp;port &gt; 49151 keep state
d267 11
d288 50
d350 2
a351 2
Originally [OpenBSD: index.html,v 1.22 ]<br>
$Translation: ftp.html,v 1.4 2006/05/28 17:23:02 dsantos Exp $<br>
@


1.3
log
@sync with steelix translation CVS
@
text
@d92 1
a92 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1&amp;manpath=OpenBSD+3.8"
d105 2
a106 1
Como indicado anteriormente, FTP n&atilde;o se d&aacute; muito bem com NAT e firewalls.
d108 17
d127 2
a128 7
Packet Filter fornece uma solu&ccedil;&atilde;o para esta situa&ccedil;&atilde;o redirecionando 
tr&aacute;fego FTP para um servidor proxy FTP. Este processo age "guiando" o 
tr&aacute;fego FTP atrav&eacute;s do gateway/firewall NAT.  O proxy FTP usado pelo 
OpenBSD e PF &eacute; o 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+3.8">ftp-proxy(8)</a>.  Para ativa-lo, insira algo assim
na se&ccedil;&atilde;o NAT do <tt>pf.conf</tt>:
d132 2
d140 7
a146 3
A explica&ccedil;&atilde;o desta linha &eacute;: "Tr&aacute;fego na interface interna &eacute; 
redirecionado para o servidor proxy nesta m&aacute;quina que est&aacute; 
ouvindo na porta 8021".
d149 2
a150 4
Espero que tenha ficado &oacute;bvio que o servidor proxy deve ter sido iniciado e estar 
rodando na m&aacute;quina OpenBSD. Isso &eacute; feito adicionando a seguinte 
linha em 
<tt>/etc/inetd.conf</tt>:
d154 1
a154 2
127.0.0.1:8021 stream tcp nowait root /usr/libexec/ftp-proxy \<br>
&nbsp;&nbsp;&nbsp;ftp-proxy -n
d159 3
a161 8
Note que a op&ccedil;ao <tt>-n</tt> se faz necess&aacute;ria apenas caso a 
m&aacute;quina OpenBSD esteja fazendo NAT.
Agora envie um sinal 'HUP' ao 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=inetd&amp;sektion=8&amp;manpath=OpenBSD+3.8"
>inetd(8)</a> para fazer com que ele releia seu 
arquivo de configura&ccedil;&atilde;o.
Uma forma de enviar o sinal 'HUP' &eacute; com o comando:
d165 1
a165 1
kill -HUP `cat /var/run/inetd.pid`
d170 6
a175 18
Voc&ecirc; notar&aacute; que o servidor ftp-proxy est&aacute; ouvindo na porta 8021, 
a mesma porta onde a instru&ccedil;ao <tt>rdr</tt> est&aacute; enviando tr&aacute;fego FTP. 
A escolha da porta 8021 &eacute; arbitr&aacute;ria, de qualquer forma a 8021 &eacute; uma 
boa op&ccedil;&atilde;o j&aacute; que n&atilde;o &eacute; definida para nenhuma 
aplica&ccedil;&atilde;o.

<p>
Neste ponto apenas conex&otilde;es FTP em modo passivo funcionar&atilde;o. 
Para habilitar conex&otilde;es em modo ativo, a conex&atilde;o ftp-data que o 
servidor FTP inicia deve passar pelo firewall.
Infelizmente, a porta onde chega este pedido de conex&atilde;o n&atilde;o 
pode ser previamente conhecida, apenas a faixa de portas em que 
ela pode estar.
O que &eacute; sabido por&eacute;m, &eacute; que a conex&atilde;o ser&aacute; iniciada 
da porta 20 (porta ftp-data) e que o servidor ftp-proxy estar&aacute; aceitando
a conex&atilde;o (e depois transmitir&aacute; os dados para o cliente). 
J&aacute; que o ftp-proxy roda como usu&aacute;rio <tt>proxy</tt>, a 
palavra-chave <tt>user</tt> pode ser usada na regra de filtragem. 
d177 4
a180 6
<blockquote>
<tt>
pass in on $ext_if inet proto tcp from port 20 to ($ext_if) \<br>
&nbsp;&nbsp;&nbsp;&nbsp;user proxy flags S/SA keep state
</tt>
</blockquote>
d183 4
a186 3
Por favor note que a fun&ccedil;&atilde;o do ftp-proxy(8) &eacute; ajudar 
<b>clientes FTP</b> atr&aacute;s de um filtro PF; ele n&atilde;o &eacute; usado 
para lidar com <b>servidor FTP</b> atr&aacute;s de um filtro PF.
d190 5
a194 4
Neste caso, PF est&aacute; rodando no pr&oacute;prio servidor FTP ao inv&eacute;s de 
um firewall dedicado.  Quando servindo uma conex&atilde;o FTP passiva, FTP 
usar&aacute; uma porta alta TCP aleat&oacute;ria para os dados.  Por padr&atilde;o, 
o servidor FTP nativo do OpenBSD 
d196 1
a196 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d214 1
a214 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d217 1
a217 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d228 1
a228 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d278 2
a279 2
Originally [OpenBSD: index.html,v 1.19 ]<br>
$Translation: ftp.html,v 1.3 2005/11/15 14:36:42 dsantos Exp $<br>
@


1.2
log
@sync with Steelix CVS
@
text
@d91 2
a92 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1&amp;manpath=OpenBSD+3.7"
d113 2
a114 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+3.7">ftp-proxy(8)</a>.  Para ativa-lo, insira algo assim
d146 2
a147 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inetd&amp;sektion=8&amp;manpath=OpenBSD+3.7/"
d196 2
a197 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d214 2
a215 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d217 2
a218 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d228 2
a229 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d278 4
a281 2
Originally [OpenBSD: index.html,v 1.18 ]<br>
$Translation: ftp.html,v 1.2 2005/05/27 15:11:33 dsantos Exp $<br>
@


1.1
log
@sync with steelix translation CVS
@
text
@d91 1
a91 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1&amp;manpath=OpenBSD+3.6"
d112 1
a112 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+3.6">ftp-proxy(8)</a>.  Para ativa-lo, insira algo assim
d144 1
a144 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inetd&amp;sektion=8&amp;manpath=OpenBSD+3.6"
d193 1
a193 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.6"
d210 1
a210 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.6"
d212 1
a212 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8&amp;manpath=OpenBSD+3.6"
d222 1
a222 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.6"
d271 2
a272 2
Originally [OpenBSD: index.html,v 1.17 ]<br>                                                      
$Translation: ftp.html,v 1.1 2005/01/04 17:09:07 dsantos Exp $<br>                 
@

