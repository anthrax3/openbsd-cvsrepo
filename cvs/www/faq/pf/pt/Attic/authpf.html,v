head	1.18;
access;
symbols;
locks; strict;
comment	@# @;


1.18
date	2014.04.01.17.14.11;	author nick;	state dead;
branches;
next	1.17;

1.17
date	2013.12.06.20.52.46;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2013.05.03.05.53.48;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2013.01.05.15.19.49;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2009.10.19.09.39.58;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2009.10.17.15.58.26;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2009.05.16.08.59.12;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2009.03.16.20.24.23;	author tobias;	state Exp;
branches;
next	1.10;

1.10
date	2007.12.16.17.18.35;	author tobias;	state Exp;
branches;
next	1.9;

1.9
date	2007.06.18.13.02.50;	author jufi;	state Exp;
branches;
next	1.8;

1.8
date	2006.12.29.12.56.48;	author jufi;	state Exp;
branches;
next	1.7;

1.7
date	2006.11.16.15.56.37;	author jufi;	state Exp;
branches;
next	1.6;

1.6
date	2006.06.26.18.32.12;	author jufi;	state Exp;
branches;
next	1.5;

1.5
date	2006.05.29.11.06.11;	author jufi;	state Exp;
branches;
next	1.4;

1.4
date	2005.12.24.10.04.36;	author saad;	state Exp;
branches;
next	1.3;

1.3
date	2005.11.18.20.48.47;	author jufi;	state Exp;
branches;
next	1.2;

1.2
date	2005.06.08.17.38.20;	author saad;	state Exp;
branches;
next	1.1;

1.1
date	2005.01.06.20.03.30;	author jufi;	state Exp;
branches;
next	;


desc
@@


1.18
log
@
Abandon translations, per deraadt@@ and ajacoutot@@.
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF: Authpf: Shell de Usuário para Gateways de Autenticação</title>
<link rev="made" href="mailto:www@@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq,pf">
<meta name="distribution"  content="global">
</head>

<!--
Copyright (c) 2003-2007 Joel Knight <enabled@@myrealbox.com>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<a href="../../../pt/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../../images/smalltitle.gif" border="0">
</a>
<p>
[<a href="ftp.html">Anterior: Problemas com FTP</a>]
[<a href="index.html">Conteúdo</a>]
[<a href="carp.html">Próximo: Redundância de Firewall com CARP
e pfsync</a>]

<h1><font color="#e00000">PF: Authpf: Shell de Usuário para Gateways
de Autenticação</font></h1>

<hr>

<h3>Conteúdo</h3>
<ul>
<li><a href="#intro">Introdução</a>
<li><a href="#config">Configuração</a>
	<ul>
        <li><a href="#enable">Habilitação do Authpf</a>
	<li><a href="#linkmain">Ligando o Authpf ao
            Conjunto de Regras Principal</a>
	<li><a href="#loadrules">Configuração de Regras Carregadas</a>
	<li><a href="#acl">Listas de Controle de Acesso</a>
        <li><a href="#message">Mostrando uma Mensagem de
            Início de Sessão</a>
	<li><a href="#shell">Definindo o Authpf como um
            Shell do Usuário</a>
	</ul>
<li><a href="#loginclass">Criação de uma Classe de Início de Sessão
    authpf</a>
<li><a href="#wholog">Verificando Quem está em Sessão</a>
<li><a href="#example">Exemplo</a>
</ul>

<hr>

<a name="intro"></a>
<h2>Introdução</h2>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8&amp;manpath=OpenBSD+5.4"
>Authpf(8)</a> é um shell de usuário para gateways de autenticação.
Um gateway de autenticação é como um gateway de rede normal (também
conhecido como um roteador), exceto pelo fato dos usuários precisarem
primeiro se autenticar no gateway antes de poderem passar tráfego por
ele. Quando um shell de usuário é definido como
<tt>/usr/sbin/authpf</tt> (ou seja, em vez de definir o shell como
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&amp;sektion=1"
>ksh(1)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=csh&amp;sektion=1"
>csh(1)</a>, etc.), e esse usuário inicia sessão por SSH, o authpf faz as
alterações necessárias no conjunto de regras ativas do
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+5.4"
>pf(4)</a> para permitir que o tráfego do usuário passe pelas regras de
filtragem e/ou seja alterado usando Tradução do Endereço de Rede (NAT)
ou redirecionamento. Assim que o usuário encerrar a sessão ou sua sessão
for desconectada, o authpf remove quaisquer regras carregadas para o
usuário e derruba quaisquer conexões, com o estado mantido na
tabela de estados, que o usuário possa ter aberto. Por isso a habilidade
do usuário de passar tráfego através do gateway somente existe enquanto
sua conexão SSH estiver ativa.

<p>
O authpf carrega as regras do usuários em uma única
<a href="anchors.html">âncora</a>.
A âncora é nomeada combinando o nome de usuário UNIX e o ID de processo
(PID - "Process ID") do authpf em um formato
"<tt>nome_de_usuário(PID)</tt>".
Cada âncora de usuário é guardada dentro da âncora <tt>authpf</tt>, a
qual é ancorada no conjunto de regras principal.
O "caminho da âncora totalmente qualificado" então torna-se:

<blockquote>
<tt>
<i>conjunto_de_regras_principal</i>/authpf/<i>nome_de_usuário</i>(<i>PID</i>)
</tt>
</blockquote>

<p>
As regras que o authpf carrega podem ser configuradas por usuário ou
globalmente.

<p>
Exemplos de uso do authpf incluem:
<ul>
<li>Exigir a autenticação do usuário antes de permitir o acesso
    à Internet.
<li>Garantir a certos usuários -- como administradores -- acesso
    à partes restritas da rede.
<li>Permitir o acesso ao restante da rede ou à Internet em um segmento
    de rede sem fio apenas a usuários conhecidos.
<li>Permitir o acesso de pessoas que trabalham em casa, viajantes, etc.,
    aos recursos na rede da empresa. Usuários fora do escritório não
    apenas podem acessar a rede da empresa, mas também podem ser
    redirecionados para recursos em particular (por exemplo, seu próprio
    desktop) baseando-se no nome de usuário com que eles se autenticam.
<li>Em lugares como bibliotecas ou outros estabelecimentos com
    terminais públicos para Internet, o PF pode ser configurado para
    permitir acesso limitado para visitantes. O authpf pode então ser
    utilizado para prover acesso completo a usuários registrados.
</ul>

<p>
O authpf registra o nome de usuário e endereço IP de cada usuário que se
autentica, bem como o horário de início e fim de sua sessão, via
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=syslogd&amp;sektion=8"
>syslogd(8)</a>. Utilizando essa informação, um administrador pode
determinar quem estava em sessão e quando, e também pode calcular o
tráfego utilizado por cada usuário, podendo fazer cobranças com base
nesses dados.

<a name="config"></a>
<h2>Configuração</h2>
Os passos básicos necessários para configurar o authpf são descritos
aqui.
Para uma descrição completa da configuração do authpf, por favor
consulte a
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8&amp;manpath=OpenBSD+5.4"
>página de manual do authpf</a>.

<a name="enable"></a>
<h3>Habilitação do Authpf</h3>

<p>
O authpf não é executado se o arquivo de configuração
<tt>/etc/authpf/authpf.conf</tt> não estiver presente.
O arquivo pode até estar vazio (com tamanho zero), mas deve existir para que
o authpf termine sua execução imediatamente após o momento em que um usuário se
autenticar com sucesso.

<p>
As seguintes diretivas de configuração podem ser colocadas no
<tt>authpf.conf</tt>:

<ul>
<li><tt>anchor=<i>nome</i></tt> - Usa o nome de
    <a href="anchors.html">âncora</a> especificado em vez de
    "authpf".
<li><tt>table=<i>nome</i></tt> - Usa o nome de
    <a href="tables.html">tabela</a> especificado em vez de
    "authpf_users".
</ul>

<a name="linkmain"></a>
<h3>Ligando o Authpf ao Conjunto de Regras Principal</h3>
O authpf é ligado ao conjunto de regras principal utilizando-se de
regras <tt>anchor</tt>:
<blockquote>
<tt>
anchor "authpf/*"<br>
</tt>
</blockquote>

<p>
O lugar onde a regra <tt>anchor</tt> for especificada dentro do conjunto de
regras é onde o PF sai do conjunto de regras principal para avaliar as
regras do authpf.

<a name="loadrules"></a>
<h3>Configuração de Regras Carregadas</h3>
O authpf carrega suas regras a partir de um destes arquivos:
<ul>
<li><tt>/etc/authpf/users/$USER/authpf.rules</tt>
<li><tt>/etc/authpf/authpf.rules</tt>
</ul>

<p>
O primeiro arquivo contém regras que são carregadas apenas quando o
usuário <tt>$USER</tt> (que é substituído pelo nome do usuário)
inicia sessão. A configuração de regras por usuário é utilizada quando
um usuário em específico -- como um administrador -- exige um conjunto
de regras diferente do padrão. O segundo arquivo contém as regras padrão
que são carregadas para quaisquer usuários que não possuam seu próprio
arquivo <tt>authpf.rules</tt>. Se o arquivo específico do usuário
existir, ele sobrescreve as regras do arquivo padrão. Pelo menos
um dos arquivos deve existir, caso contrário o authpf não funciona.

<p>
Regras possuem a mesma sintaxe, como em qualquer
outro conjunto de regras PF, com uma exceção: o authpf permite o uso de
duas macros predefinidas:
<ul>
<li><tt>$user_ip</tt> - o endereço IP do usuário em sessão
<li><tt>$user_id</tt> - o nome de usuário do usuário em sessão
</ul>

<p>
É prática recomendada usar a macro <tt>$user_ip</tt> para permitir
tráfego através do gateway vindo apenas do computador do usuário
autenticado.

<p>
Em adição à macro <tt>$user_ip</tt>, o authpf faz uso da tabela
<tt>authpf_users</tt> (se existir) para armazenar o endereço IP de todos
os usuários autenticados. Tenha certeza de definir a tabela antes de
usá-la:

<blockquote>
<tt>
table &lt;authpf_users&gt; persist<br>
pass in on $ext_if proto tcp from &lt;authpf_users&gt; \<br>
&nbsp;&nbsp;&nbsp;&nbsp;to port  smtp 
</tt>
</blockquote>

<p>
Essa tabela somente deve ser usada em regras que se pretende aplicar
a todos os usuários autenticados.

<a name="acl"></a>
<h3>Listas de Controle de Acesso</h3>
Usuários podem ser impedidos de usar o authpf criando-se um arquivo no
diretório <tt>/etc/authpf/banned/</tt> e nomeando-o com o nome de
usuário que deve ter o acesso negado. O conteúdo desse arquivo será
mostrado ao usuário antes que authpf o desconecte. Isso fornece uma
maneira simples de notificar o usuário do porquê que seu acesso não
é permitido e a quem contatar para ter o acesso liberado novamente.

<p>
De outro modo, é possível também permitir o acesso apenas a usuários
específicos colocando seus nomes de usuário no arquivo
<tt>/etc/authpf/authpf.allow</tt>. Se o arquivo
<tt>/etc/authpf/authpf.allow</tt> não existe ou seu conteúdo for um
"<tt>*</tt>", então o authpf permite o acesso a qualquer usuário que
conseguir iniciar sessão via SSH, desde que não tenha sido
explicitamente banido.

<p>
Caso o authpf não consiga determinar se um nome de usuário tem ou não
permissão de acesso, ele mostra uma breve mensagem e então
desconecta o usuário. Uma entrada em <tt>/etc/authpf/banned/</tt>
sempre sobrescreve uma entrada em <tt>/etc/authpf/authpf.allow</tt>.

<a name="message"></a>
<h3>Mostrando uma Mensagem de Início de Sessão</h3>

<p>
Sempre que um usuário se autentica com sucesso no authpf, uma saudação
que indica que o usuário está autenticado é mostrada.

<blockquote>
<tt>
Hello charlie. You are authenticated from host "64.59.56.140"
</tt>
</blockquote>

<p>
Essa mensagem pode ser suplementada colocando-se uma mensagem
personalizada no <tt>/etc/authpf/authpf.message</tt>.
O conteúdo desse arquivo será mostrado depois da mensagem de bem-vindo
padrão.

<a name="shell"></a>
<h3>Definindo o Authpf como um Shell do Usuário</h3>
Para o authpf funcionar, ele deve ser definido como shell de início de
sessão do usuário. Quando o usuário se autenticar no
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd&amp;sektion=8"
>sshd(8)</a>, o authpf será executado como o shell do usuário.
Ele então verifica se o usuário tem permissão de usar o authpf, carrega
as regras do arquivo apropriado, etc.

<p>
Existem algumas formas de se definir o authpf como um shell do usuário:
<ol>
<li>Manualmente para cada usuário, usando
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chsh&amp;sektion=1"
    >chsh(1)</a>,
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8"
    >vipw(8)</a>,
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8"
    >useradd(8)</a>,
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=usermod&amp;sektion=8"
    >usermod(8)</a>, etc.
<li>Colocando usuários em uma classe de início de sessão e alterando
    a opção <tt>shell</tt> da classe em
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login.conf&amp;sektion=5"
    ><tt>/etc/login.conf</tt></a>.
</ol>

<a name="loginclass"></a>
<h2>Criação de uma Classe de Início de Sessão authpf</h2>
Ao utilizar o authpf em um sistema que tem contas de usuários normais
e contas de usuários authpf, pode ser útil usar uma
classe de início de sessão separada para os usuários authpf.
Isso permite que certas mudanças àquelas contas sejam feitas
globalmente, e também permite que políticas diferentes sejam
colocadas em contas normais e contas authpf.
Alguns exemplos de quais políticas podem ser configuradas:

<ul>
<li><b>shell</b> - Especifica um shell de início de sessão do usuário.
    Isso pode ser usado para forçar o shell do usuário para
    <tt>authpf</tt>, independente da entrada no banco de dados
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=passwd&amp;sektion=5"
    >passwd(5)</a>.
<li><b>welcome</b> - Especifica qual arquivo
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=motd&amp;sektion=5"
    >motd(5)</a> mostrar quando um usuário iniciar sessão.
    Isso é útil para mostrar mensagens que são relevantes somente para
    usuários authpf.
</ul>

<p>
Classes de início de sessão são criadas no arquivo
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login.conf&amp;sektion=5"
>login.conf(5)</a>.
O OpenBSD possui uma classe de início de sessão definida como:

<blockquote>
<tt>
authpf:\<br>
&nbsp;&nbsp;&nbsp;&nbsp;:welcome=/etc/motd.authpf:\<br>
&nbsp;&nbsp;&nbsp;&nbsp;:shell=/usr/sbin/authpf:\<br>
&nbsp;&nbsp;&nbsp;&nbsp;:tc=default:
</tt>
</blockquote>

<p>
Os usuários são designados para uma classe de início de sessão através
da edição do campo <tt>class</tt> da entrada do usuário no
banco de dados passwd(5).
Uma maneira de se fazer isso é com o comando
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chsh&amp;sektion=1"
>chsh(1)</a>.


<a name="wholog"></a>
<h2>Verificando Quem está em Sessão</h2>
Assim que um usuário inicia sessão e o authpf ajusta as regras PF,
ele também altera o título do processo para mostrar o nome e o
endereço IP do usuário em sessão:
<pre>
    # ps -ax | grep authpf
    23664 p0  Is+     0:00.11 -authpf: charlie@@192.168.1.3 (authpf)
</pre>

<p>
Aqui o usuário <tt>charlie</tt> iniciou sessão a partir da máquina
192.168.1.3.
Ao enviar um sinal SIGTERM ao processo authpf, o usuário pode ser
forçado a encerrar sua sessão. O authpf remove quaisquer regras
inseridas para o usuário e derruba todas conexões, com o estado mantido
na tabela de estados, que esse usuário tiver aberto.
<pre>
    # kill -TERM 23664
</pre>

<a name="example"></a>
<h2>Exemplo</h2>
O authpf está sendo usado em um gateway OpenBSD para autenticar usuários
em uma rede sem fio que é parte de uma grande rede em um campus.
Assim que o usuário tiver se autenticado, assumindo que não esteja na
lista de banidos, ele terá permissão de abrir conexões SSH e navegar na
Web (incluindo sítios Web seguros), além de poder acessar os servidores
DNS do campus.

<p>
O arquivo <tt>/etc/authpf/authpf.rules</tt> contém as seguintes
regras:<br>
<br>

<table border=0 width="650">
<tr><td nowrap bgcolor="#EEEEEE">
<pre>
wifi_if = "wi0"

pass in quick on $wifi_if proto tcp from $user_ip to port { ssh, http, \
   https }
</pre>
</td></tr>
</table>

<p>
O usuário administrativo <tt>charlie</tt> deve ter acesso aos
servidores SMTP e POP3, além de poder navegar na Web e usar
SSH. As regras a seguir estão definidas no arquivo
<tt>/etc/authpf/users/charlie/authpf.rules</tt>:<br>
<br>

<table border=0 width="650">
<tr><td nowrap bgcolor="#EEEEEE">
<pre>
wifi_if = "wi0"
smtp_server = "10.0.1.50"
pop3_server = "10.0.1.51"

pass in quick on $wifi_if \
   proto tcp from $user_ip to $smtp_server port smtp
pass in quick on $wifi_if \
   proto tcp from $user_ip to $pop3_server port pop3
pass in quick on $wifi_if \
   proto tcp from $user_ip to port { ssh, http, https }
</pre>
</td></tr>
</table>

<p>
O conjunto de regras principal -- localizado em <tt>/etc/pf.conf</tt> --
é configurado a seguir:<br>
<br>

<table border=0 width="650">
<tr><td nowrap bgcolor="#EEEEEE">
<pre>
# Macros
wifi_if = "wi0"
ext_if  = "fxp0"
dns_servers = "{ 10.0.1.56, 10.0.2.56 }"

table &lt;authpf_users&gt; persist

# Filtros
block drop all

pass out quick on $ext_if inet proto { tcp, udp, icmp } \
   from { $wifi_if:network, $ext_if }

pass in quick on $wifi_if inet proto tcp \
   from $wifi_if:network to $wifi_if port ssh

pass in quick on $wifi_if inet proto { tcp, udp } \
   from &lt;authpf_users&gt; to $dns_servers port domain

anchor "authpf/*" in on $wifi_if
</pre>
</td></tr>
</table>

<p>
O conjunto de regras é bem simples e faz o seguinte:
<ul>
<li>Bloqueia tudo (negar por padrão).
<li>Permite tráfego TCP, UDP e ICMP saindo na interface externa,
    vindo da rede sem fio e do próprio gateway.
<li>Permite tráfego SSH de entrada vindo da rede sem fio e
    destinado ao próprio gateway. Essa regra é necessária para
    permitir que os usuários possam iniciar sessão.
<li>Permite requisições DNS de entrada vindas de todos os usuários
    authpf autenticados para servidores DNS do campus.
<li>Cria uma âncora "authpf" para tráfego de entrada vindo pela
    interface da rede sem fio.
</ul>

<p>
A ideia por trás do conjunto de regras principal é bloquear tudo e
permitir a passagem da menor quantidade possível de tráfego.
O tráfego saindo pela interface externa é liberado, mas é bloqueada pela
política negar por padrão a entrada na interface sem fio.
Uma vez autenticado, é permitido ao tráfego do usuário atravessar a
interface sem fio e seguir através do gateway para o resto da rede.
A palavra-chave <tt>quick</tt> é usada de forma que o PF não precise
avaliar cada conjunto de regras nomeado quando uma nova conexão
atravessa o gateway.

<p>
[<a href="ftp.html">Anterior: Problemas com FTP</a>]
[<a href="index.html">Conteúdo</a>]
[<a href="carp.html">Próximo: Redundância de Firewall com CARP
e pfsync</a>]

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[voltar]"></a>
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: authpf.html,v 1.34 ]<br>
$Translation: authpf.html,v 1.17 2013/12/01 12:44:32 egypcio Exp $<br>
-->
$OpenBSD: authpf.html,v 1.17 2013/12/06 20:52:46 ajacoutot Exp $
</small>

</body>
</html>
@


1.17
log
@Sync with Steelix CVS
@
text
@d503 1
a503 1
$OpenBSD$
@


1.16
log
@Sync with Steelix CVS
@
text
@d73 1
a73 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8&amp;manpath=OpenBSD+5.3"
d85 1
a85 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+5.3"
d150 1
a150 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8&amp;manpath=OpenBSD+5.3"
d500 2
a501 2
Originally [OpenBSD: authpf.html,v 1.33 ]<br>
$Translation: authpf.html,v 1.16 2013/05/02 22:48:46 renato Exp $<br>
@


1.15
log
@Sync with Steelix CVS
@
text
@d73 1
a73 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8&amp;manpath=OpenBSD+5.2"
d85 1
a85 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+5.2"
d150 1
a150 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8&amp;manpath=OpenBSD+5.2"
d500 2
a501 2
Originally [OpenBSD: authpf.html,v 1.32 ]<br>
$Translation: authpf.html,v 1.15 2013/01/04 18:51:16 egypcio Exp $<br>
@


1.14
log
@Sync with Steelix CVS
@
text
@d73 1
a73 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8&amp;manpath=OpenBSD+4.6"
d85 1
a85 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.6"
d96 1
a96 1
O authpf carrega regras de filtragem/NAT de usuários em uma única
d150 1
a150 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8&amp;manpath=OpenBSD+4.6"
d159 2
a160 2
Mesmo se o arquivo estiver vazio (tamanho zero), deve estar presente
ou o authpf termina sua execução imediatamente após um usuário se
a181 3
nat-anchor "authpf/*"<br>
rdr-anchor "authpf/*"<br>
binat-anchor "authpf/*"<br>
d187 1
a187 1
O lugar onde regras <tt>anchor</tt> são colocadas dentro do conjunto de
d189 1
a189 4
regras do authpf. Não é necessário que todas as quatro regras
<tt>anchor</tt> estejam presentes; por exemplo, caso o authpf não seja
configurado para carregar regras <tt>nat</tt>, a regra
<tt>nat-anchor</tt> pode ser omitida.
d211 1
a211 1
Regras de filtragem e tradução possuem a mesma sintaxe como em qualquer
d234 1
a234 1
&nbsp;&nbsp;&nbsp;&nbsp;to port  smtp flags S/SA keep state
d400 1
a400 1
   https } flags S/SA keep state
d419 6
a424 6
pass in quick on $wifi_if proto tcp from $user_ip to $smtp_server \
   port smtp flags S/SA keep state
pass in quick on $wifi_if proto tcp from $user_ip to $pop3_server \
   port pop3 flags S/SA keep state
pass in quick on $wifi_if proto tcp from $user_ip to port { ssh, http, \
   https } flags S/SA keep state
d444 2
a445 1
scrub in all
d447 2
a448 2
# Filtragem
block drop all
d450 2
a451 4
pass out quick on $ext_if inet proto tcp from \
   { $wifi_if:network, $ext_if } flags S/SA modulate state
pass out quick on $ext_if inet proto { udp, icmp } from \
   { $wifi_if:network, $ext_if } keep state
d453 2
a454 2
pass in quick on $wifi_if inet proto tcp from $wifi_if:network to $wifi_if \
   port ssh flags S/SA keep state
a455 2
pass in quick on $wifi_if inet proto { tcp, udp } from &lt;authpf_users&gt; \
   to $dns_servers port domain keep state
d500 2
a501 2
Originally [OpenBSD: authpf.html,v 1.26 ]<br>
$Translation: authpf.html,v 1.14 2009/10/18 16:52:52 alan Exp $<br>
@


1.13
log
@Sync with Steelix CVS
@
text
@d73 1
a73 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8&amp;manpath=OpenBSD+4.5"
d85 1
a85 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.5"
d99 1
a99 1
(PID, "Process ID") do authpf em um formato
d150 1
a150 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8&amp;manpath=OpenBSD+4.5"
d509 2
a510 2
Originally [OpenBSD: authpf.html,v 1.25 ]<br>
$Translation: authpf.html,v 1.13 2009/10/13 19:12:27 alan Exp $<br>
@


1.12
log
@Sync with Steelix CVS
@
text
@d4 1
a4 1
<title>PF: Authpf: Shell de Usuário para Autenticação em Gateways</title>
d43 2
a44 2
<h1><font color="#e00000">PF: Authpf: Shell de Usuário para Autenticação
em Gateways</font></h1>
d53 9
a61 6
        <li><a href="#enable">Habilitando o Authpf</a>
	<li><a href="#linkmain">Linkando Authpf no Conjunto de Regras</a>
	<li><a href="#loadrules">Configurando Regras Carregadas</a>
	<li><a href="#acl">Listas de Controle de Acesso (ACL)</a>
        <li><a href="#message">Mostrando uma Mensagem de Login</a>
	<li><a href="#shell">Definindo Authpf como Shell do Usuário</a>
d63 3
a65 2
<li><a href="#loginclass">Criando uma Classe de Login authpf</a>
<li><a href="#wholog">Verificando Quem está Logado</a>
d74 1
a74 1
>Authpf(8)</a> é um shell para autenticação em gateways.
d77 3
a79 3
primeiro se autenticar no gateway antes de poderem passar por ele.
Quando um shell de usuário é definido como <tt>/usr/sbin/authpf</tt>
(ou seja, ao invés de definir o shell como
d83 2
a84 2
>csh(1)</a>, etc.) e esse usuário loga por SSH, o authpf fará as
alterações necessárias nas regras ativas do
d88 6
a93 6
ou Redirecionamento. Uma vez que o usuário fizer logout ou sua sessão
for desconectada, o authpf removerá quaisquer regras carregadas para o
usuário e derrubará quaisquer conexões mantidas pela tabela de estado
que o usuário possa ter aberto. Por isso a habilidade do usuário de
passar tráfego através do gateway somente existe enquanto sua conexão
SSH estiver ativa.
d96 1
a96 1
Authpf carrega regras de filtragem/NAT de usuários em uma única
d98 3
a100 2
A âncora é nomeada combinando o nome de usuário UNIX e o identificador
de processo do authpf em um formato "<tt>username(PID)</tt>".
d107 1
a107 1
<i>main_ruleset</i>/authpf/<i>username</i>(<i>PID</i>)
d112 2
a113 2
As regras que o authpf carrega podem ser configuradas em uma base por
usuário ou global.
d118 2
a119 1
<li>Exigir autenticação do usuário antes de permitir acesso à Internet.
d122 7
a128 7
<li>Permitir apenas a usuários conhecidos acessarem o restante da
    rede ou Internet em um segmento de rede sem fio.
<li>Permitir a trabalhadores em casa, viajantes, etc., acesso a recursos
    na rede da empresa. Usuários fora do escritório não apenas
    podem acessar a rede da empresa, mas também podem ser redirecionados
    para recursos em particular (por exemplo, seu próprio desktop)
    baseado no nome de usuário com que ele se autenticar.
d131 2
a132 2
    permitir acesso limitado a usuários visitantes. Authpf pode então
    ser utilizado para prover acesso completo a usuários registrados.
d136 2
a137 2
Authpf loga o nome de usuário e endereço IP de cada usuário que se
autentica, bem como horário de início e fim de sua sessão de login, via
d140 3
a142 3
determinar quem se logou e quando, e também pode calcular o tráfego
utilizado por cada usuário, podendo fazer cobrança com base nesses
dados.
d148 1
a148 1
Para um descrição completa da configuração do authpf, por favor
d154 1
a154 1
<h3>Habilitando o Authpf</h3>
d157 1
a157 1
Authpf não rodará se o arquivo de configuração
d159 2
a160 2
Mesmo se o arquivo for vazio (tamanho zero), deve estar presente
ou o authpf será encerrado imediatamente após um usuário se
d164 2
a165 2
As seguintes diretivas de configuração podem ser colocadas
no <tt>authpf.conf</tt>:
d168 6
a173 4
<li><tt>anchor=<i>nome</i></tt> - Usa o nome especificado de
    <a href="anchors.html">âncora</a> em vez de "authpf".
<li><tt>table=<i>nome</i></tt> - Usa o nome especificado de
    <a href="tables.html">tabela</a> em vez de "authpf_users".
d177 2
a178 2
<h3>Linkando Authpf nas Regras Principais</h3>
Authpf é linkado no conjunto de regras principais utilizando-se de
d190 3
a192 3
Sempre que regras <tt>anchor</tt> são colocadas dentro do conjunto de
regras, é onde o PF sairá do conjunto de regras principal para avaliar
as regras do authpf. Não é necessário que todas as quatro regras
d198 2
a199 2
<h3>Configurando as Regras a Carregar</h3>
Authpf carrega suas regras de um destes arquivos:
d208 7
a214 7
se loga. A configuração de regras por usuário é utilizada quando um
usuário em específico -- como um administrador -- exige um conjunto
de regras diferente do padrão. O segundo arquivo contém as regras
padrão que são carregadas por quaisquer usuários que não possuam seu
próprio arquivo <tt>authpf.rules</tt>. Se o arquivo específico do
usuário existir, sobrescreve as regras do arquivo padrão. Pelo menos
um dos arquivos deve existir, caso contrário o authpf não funcionará.
d217 2
a218 2
Regras de filtragem e tradução de endereço possuem a mesma sintaxe
como em qualquer regra PF, com uma exceção: o Authpf permite o uso de
d221 2
a222 2
<li><tt>$user_ip</tt> - o endereço IP do usuário logado
<li><tt>$user_id</tt> - o nome de usuário do cliente logado
d226 1
a226 1
É prática recomendada o uso da macro <tt>$user_ip</tt> para permitir
d231 4
a234 4
Em adição à macro <tt>$user_ip</tt>, o authpf fará uso da tabela
<tt>authpf_users</tt> (se existir) para armazenar o endereço IP de
todos os usuários autenticados. Tenha certeza de definir a tabela antes
de usá-la:
d249 1
a249 1
<h3>Listas de Controle de Acesso (ACL)</h3>
d251 1
a251 1
diretório <tt>/etc/authpf/banned/</tt> e nomeando-o com o nome do
d255 1
a255 1
é permitido e a quem contactar para ter o acesso liberado novamente.
d258 2
a259 2
De outro modo, é possível também permitir acesso apenas a usuários
específicos colocando seus nomes no arquivo
d261 4
a264 4
<tt>/etc/authpf/authpf.allow</tt> não existir ou seu conteúdo for um
"<tt>*</tt>", então authpf dará acesso a qualquer usuário que
conseguir se autenticar via SSH, desde que não tenha sido explicitamente
banido.
d267 4
a270 4
Caso o authpf não consiga determinar se um usuário tem ou não
permissão de acesso, mostrará uma breve mensagem e então
desconectará o usuário. Uma entrada em <tt>/etc/authpf/banned/</tt>
sempre sobrescreve entradas em <tt>/etc/authpf/authpf.allow</tt>.
d273 1
a273 1
<h3>Mostrando uma Mensagem de Login</h3>
d276 1
a276 1
Sempre que um usuário se autentica com sucesso ao authpf, uma saudação
d286 2
a287 2
Essa mensagem pode ser acrescentada colocando uma mensagem customizada
no <tt>/etc/authpf/authpf.message</tt>.
d292 3
a294 3
<h3>Definindo Authpf como um Shell de usuário</h3>
Para o authpf funcionar, ele deve ser definido como shell de login do
usuário. Quando o usuário se autenticar ao
d301 1
a301 1
Existem algumas formas de se definir o authpf como shell de usuário:
d312 2
a313 2
<li>Colocando usuários numa classe de login e alterando a opção
    <tt>shell</tt> da classe em
d319 8
a326 8
<h2>Criando uma Classe de Login authpf</h2>
Quanto estiver usando o authpf em um sistema que tiver contas de
usuários regulares e contas de usuários authpf, pode ser útil usar
uma classe de login separada para os usuários authpf.
Isso permite certas mudanças para aquelas contas serem feitas
em uma base global e também permite políticas diferentes serem
colocadas em contas regulares e contas authpf.
Alguns exemplos de como as políticas podem ser configuradas:
d329 1
a329 1
<li><b>shell</b> - Especifica um shell de login de usuário.
d331 1
a331 1
    <tt>authpf</tt>, indiferente da entrada da base de dados
d336 1
a336 1
    >motd(5)</a> mostrar quando um usuário fizer login.
d342 1
a342 1
Classes de login são criadas no arquivo
d345 1
a345 1
O OpenBSD possui uma classe de login definida como:
d357 3
a359 2
Os usuários são designados para uma classe de login editando o campo
<tt>class</tt> da base de dados passwd(5) do usuário.
d366 4
a369 4
<h2>Verificando Quem está Logado</h2>
Assim que um usuário se loga e o authpf ajusta as regras PF, ele também
altera o título do processo para mostrar o nome e endereço IP do
usuário logado:
d376 6
a381 5
Aqui o usuário <tt>charlie</tt> se logou da máquina 192.168.1.3.
Enviando um sinal SIGTERM ao processo authpf, o usuário pode ser
forçado a sair. Authpf removerá quaisquer regras inseridas para
o usuário e derrubará todas conexões mantidas na tabela de estado
que esse usuário tiver aberto.
d388 3
a390 3
O authpf está sendo usado num gateway OpenBSD para autenticar
usuários numa rede sem fio que é parte de uma grande rede num
campus. Uma vez autenticado o usuário, assumindo que não esteja na
d392 1
a392 1
web (incluindo web sites seguros), além de poder acessar os servidores
d413 1
a413 1
servidores SMTP e POP3, além de poder navegar na web e usar
d436 2
a437 2
As regras principais -- localizadas em <tt>/etc/pf.conf</tt> --
são configuradas a seguir:<br>
d471 1
a471 1
As regras são bem simples e fazem o seguinte:
d473 10
a482 10
<li>Bloquear tudo (negar por padrão).
<li>Permitir tráfego TCP, UDP e ICMP vindo da rede sem fio e
    saindo pela interface externa e do próprio gateway.
<li>Permitir tráfego SSH entrante vindo da rede sem fio e
    destinado ao próprio gateway. Essa regra deve existir para que
    os usuários possam logar.
<li>Permite requisições DNS, vindas de todos os usuários authpf
    autenticados, para servidores DNS do campus.
<li>É criada uma âncora "authpf" para tráfego vindo na interface de
    rede sem fio.
d486 9
a494 8
A idéia por trás das regras principais é bloquear tudo e permitir a
passagem de menos tráfego possível. O tráfego saindo pela interface
externa é liberado, mas é bloqueado pela política negar por padrão
a entrada na interface sem fio. Uma vez autenticado, o tráfego do
usuário é permitido atravessar a interface sem fio e seguir através
do gateway para o resto da rede. A palavra-chave <tt>quick</tt> é
usada de forma que o PF não precise avaliar cada regra quando uma nova
conexão atravessa o gateway.
d510 1
a510 1
$Translation: authpf.html,v 1.12 2009/05/10 17:44:16 alan Exp $<br>
@


1.11
log
@Sync with Steelix CVS
@
text
@d69 1
a69 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8&amp;manpath=OpenBSD+4.4"
d75 1
a75 1
(ex., ao invés de definir o shell como
d81 1
a81 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.4"
d121 2
a122 2
    para recursos em particular (ex., seu próprio desktop) baseado no
    nome de usuário com que ele se autenticar.
d144 1
a144 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8&amp;manpath=OpenBSD+4.4"
d498 2
a499 2
Originally [OpenBSD: authpf.html,v 1.24 ]<br>
$Translation: authpf.html,v 1.11 2009/03/11 00:52:55 dsantos Exp $<br>
@


1.10
log
@Sync with Steelix CVS
@
text
@d4 1
a4 1
<title>PF: Authpf: Shell de Usu&aacute;rio para Atutentica&ccedil;&atilde;o em Gateways</title>
d8 3
a10 3
<meta name="description" content="the OpenBSD FAQ page">
<meta name="keywords" content="openbsd,faq,pf">
<meta name="distribution" content="global">
d39 3
a41 2
[<a href="index.html">Conte&uacute;do</a>]
[<a href="carp.html">Pr&oacute;ximo: Redund&acirc;ncia de Firewall com CARP e pfsync</a>]
d43 1
a43 1
<h1><font color="#e00000">PF: Authpf: Shell de Usu&aacute;rio para Autentica&ccedil;&atilde;o 
d48 1
a48 1
<h3>Conte&uacute;do</h3>
d50 2
a51 2
<li><a href="#intro">Introdu&ccedil;&atilde;o</a>
<li><a href="#config">Configura&ccedil;&atilde;o</a>
d58 1
a58 1
	<li><a href="#shell">Definindo Authpf como Shell do Usu&aacute;rio</a>
d61 1
a61 1
<li><a href="#wholog">Verificando quem est&aacute; logado</a>
d68 9
a76 11
<h2>Introdu&ccedil;&atilde;o</h2>
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8&amp;manpath=OpenBSD+4.2"
>Authpf(8)</a> &eacute; um shell para autentica&ccedil;&atilde;o em gateways.
Um gateway de autentica&ccedil;&atilde;o &eacute; como um gateway de rede normal 
(um roteador) exceto pelo fato dos usu&aacute;rios precisarem primeiro se
autenticar no gateway antes de poderem passar por ele. Quando um shell 
de usu&aacute;rio &eacute; definido como <tt>/usr/sbin/authpf</tt> (ex: ao inv&eacute;s 
de definir o shell como 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&amp;sektion=1"
d78 21
a98 23
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=csh&amp;sektion=1"
>csh(1)</a>, etc) e esse usu&aacute;rio loga por SSH, o authpf far&aacute; as 
altera&ccedil;oes necess&aacute;rias nas regras do 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.2"
>pf(4)</a> para permitir que o tr&aacute;fego do usu&aacute;rio passe pelas 
regras de filtragem e/ou seja alterado usando Tradu&ccedil;&atilde;o do Endere&ccedil;o 
de Rede (NAT) ou Redirecionamento. Uma vez que o usu&aacute;rio fizer logout ou sua sess&atilde;o
for desconectada, o authpf remover&aacute; quaisquer regras carregadas para o usu&aacute;rio e 
derrubar&aacute; quaisquer conex&otilde;es mantidas pelas tabela de estado 
que o usu&aacute;rio possa ter aberto. Por isso a possibilidade do usu&aacute;rio 
passar tr&aacute;fego atrav&eacute;s do gateway somente existe enquanto 
sua conex&atilde;o SSH estiver ativa.

<p>
Authpf carrega regras de filtragem/NAT de usu&aacute;rios em uma &uacute;nica
<a href="anchors.html">&acirc;ncora</a>.
A &acirc;ncora &eacute; nomeada combinando o nome de usu&aacute;rio UNIX e 
o identificador de processo do authpf em um formato "<tt>username(PID)</tt>".
Cada &acirc;ncora de usu&aacute;rio &eacute; guardada dentro da &acirc;ncora
<tt>authpf</tt> a qual &eacute; ancorada do conjunto de regras principal. 
O "caminho da &acirc;ncora totalmente qualificado" ent&atilde;o torna-se:
d108 2
a109 2
usu&aacute;rio ou global.
 
d111 1
a111 1
Exemplos de uso de authpf incluem:
d113 14
a126 14
<li>Exigir autentica&ccedil;&atilde;o do usu&aacute;rio antes de permitir acesso &agrave; Internet.
<li>Garantir a certos usu&aacute;rios -- como administradores -- acesso
a partes restritas da rede.
<li>Permitir apenas a usu&aacute;rios conhecidos acessarem o restante da 
rede ou Internet em um segmento de rede wireless.
<li>Permitir a trabalhadores em casa, viajantes, etc, acesso a 
recursos na rede da empresa.  Usu&aacute;rios fora do escrit&oacute;rio n&atilde;o apenas 
podem acessar a rede da empresa, mas tamb&eacute;m podem ser redirecionados 
para recursos em particular (ex: seu pr&oacute;prio desktop) baseado no nome 
de usu&aacute;rio com que ele se autenticar.
<li>Em lugares como bibliotecas ou outros estabelecimentos com 
terminais p&uacute;blicos para Internet, o PF pode ser configurado para 
permitir acesso limitado a usu&aacute;rios visitantes. Authpf pode ent&atilde;o ser
utilizado para prover acesso completo a usu&aacute;rios registrados.
d130 7
a136 9
Authpf loga o nome de usu&aacute;rio e endere&ccedil;o IP de cada usu&aacute;rio que se 
autentica, bem como hor&aacute;rio de in&iacute;cio e fim de sua sess&atilde;o de login 
via
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=syslogd&amp;sektion=8"
>syslogd(8)</a>. Utilizando esta informa&ccedil;&atilde;o, um administrador 
pode determinar quem se logou e quando, e tamb&eacute;m pode calcular o 
tr&aacute;fego utilizado por cada usu&aacute;rio podendo fazer cobran&ccedil;a com base 
nesses dados.
d139 7
a145 7
<h2>Configura&ccedil;&atilde;o</h2>
Os passos b&aacute;sicos necess&aacute;rios para configurar authpf s&atilde;o descritos aqui. 
Para uma descri&ccedil;&atilde;o completa da configura&ccedil;&atilde;o do authpf, por favor 
consulte a 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8&amp;manpath=OpenBSD+4.2"
>p&aacute;gina de manual do authpf</a>.
d151 2
a152 2
Authpf n&atilde;o rodar&aacute; se o arquivo de configura&ccedil;&atilde;o
<tt>/etc/authpf/authpf.conf</tt> n&atilde;o estiver presente.
d154 2
a155 2
ou o authpf ser&aacute; encerrado imediatamente depois que um
usu&aacute;rio se autenticar com sucesso.
d158 1
a158 1
As seguintes diretivas de configura&ccedil;&atilde;o podem ser colocadas
d162 4
a165 4
<li><tt>anchor=<i>nome</i></tt> - Use o nome 
<a href="anchors.html">&acirc;ncora</a> especificado em vez de "authpf".
<li><tt>table=<i>nome</i></tt> - Use o nome 
<a href="tables.html">tabela</a> em vez de "authpf_users".
d170 2
a171 2
Authpf &eacute; linkado no conjunto de regras principais utilizando-se de regras 
<tt>anchor</tt>:
d182 5
a186 4
Quando regras <tt>anchor</tt> s&atilde;o encontradas &eacute; onde PF sair&aacute; do 
conjunto principal de regras e avaliar&aacute; as regras do authpf. N&atilde;o &eacute; 
necess&aacute;rio que todas as quatro regras <tt>anchor</tt> estejam presentes; por exemplo, 
caso authpf n&atilde;o seja configurado para carregar regras <tt>nat</tt>, a regra 
d198 9
a206 9
O primeiro arquivo cont&eacute;m regras que s&atilde;o carregadas apenas quando o 
usu&aacute;rio <tt>$USER</tt> (que &eacute; substitu&iacute;do pelo nome do usu&aacute;rio) 
se loga. A configura&ccedil;&atilde;o de regras por usu&aacute;rio &eacute; utilizada 
quando um usu&aacute;rio em espec&iacute;fico -- como um administrador -- exige um conjunto 
de regras diferente do padr&atilde;o.  O segundo arquivo cont&eacute;m as regras padr&atilde;o 
que s&atilde;o carregadas por quaisquer usu&aacute;rios que n&atilde;o possuam seu 
pr&oacute;prio arquivo <tt>authpf.rules</tt>. Se o arquivo espec&iacute;fico do usu&aacute;rio 
existir, sobrescreve as regras do arquivo padr&atilde;o. Pelo menos um dos arquivos deve 
existir, caso contr&aacute;rio authpf n&atilde;o funcionar&aacute;.
d209 3
a211 3
Regras de filtragem e tradu&ccedil;&atilde;o de endere&ccedil;o possuem a mesma sintaxe 
como em qualquer regra PF, com uma exce&ccedil;&atilde;o: Authpf permite o uso de 
duas macros pr&eacute;-definidas:
d213 2
a214 2
<li><tt>$user_ip</tt> - o endere&ccedil;o IP do usu&aacute;rio logado
<li><tt>$user_id</tt> - o nome de usu&aacute;rio do cliente logado
d218 2
a219 2
&Eacute; pr&aacute;tica recomendada o uso da macro <tt>$user_ip</tt> para permitir 
tr&aacute;fego atrav&eacute;s do gateway vindo apenas do computador do usu&aacute;rio 
d223 4
a226 4
Em adi&ccedil;&atilde;o a macro <tt>$user_ip</tt>, o authpf far&aacute;
uso ta tabela <tt>authpf_users</tt> (se existir) para armazenar o
endere&ccedil;o IP de todos os usu&aacute;rios autenticados. 
Tenha certeza de definir a tabela antes de usa-l&aacute;:
d237 2
a238 2
Esta tabela somente deve ser usada em regras que se pretende aplicar
a todos os usu&aacute;rios autenticados.
d242 20
a261 20
Usu&aacute;rios podem ser impedidos de usar authpf criando-se um arquivo no 
diret&oacute;rio <tt>/etc/authpf/banned/</tt> e nomeando-o com o nome do 
usu&aacute;rio que deve ter o acesso negado.  O conte&uacute;do deste arquivo ser&aacute; 
mostrado ao usu&aacute;rio antes que authpf o desconecte. Isso fornece uma 
maneira simples de notificar o usu&aacute;rio do porqu&ecirc; seu acesso n&atilde;o &eacute; 
permitido e a quem contactar para ter o acesso liberado novamente.

<p>
De outro modo, &eacute; possivel tamb&eacute;m permitir acesso apenas a usu&aacute;rios 
espec&iacute;ficos colocando seus nomes no arquivo 
<tt>/etc/authpf/authpf.allow</tt>. Se o arquivo 
<tt>/etc/authpf/authpf.allow</tt> n&atilde;o existir ou seu conte&uacute;do for um 
"<tt>*</tt>", ent&atilde;o authpf dar&aacute; acesso a qualquer usu&aacute;rio que 
conseguir se autenticar via SSH desde que n&atilde;o tenha sido banido 
explicitamente.

<p>
Caso authpf n&atilde;o consiga determinar se um usu&aacute;rio tem ou n&atilde;o 
permiss&atilde;o de acesso, mostrar&aacute; uma breve mensagem e ent&atilde;o 
desconectar&aacute; o usu&aacute;rio. Uma entrada em <tt>/etc/authpf/banned/</tt> 
d268 2
a269 3
Sempre que um usu&aacute;rio se autentica com sucesso ao authpf,
uma sauda&ccedil;&atilde;o &eacute; mostrada que indica que o
usu&aacute;rio est&aacute; autenticado.
d278 1
a278 1
Esta mensagem pode ser acrescentada colocando uma mensagem customizada
d280 2
a281 2
O conte&uacute;do deste arquivo ser&aacute; mostrado depois
da mensagem de bem-vindo padr&atilde;o.
d284 7
a290 8
<h3>Definindo Authpf como um Shell de usu&aacute;rio</h3>
Para authpf funcionar ele deve ser definido como shell de 
login do usu&aacute;rio. Quando o usu&aacute;rio se autenticar ao 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd&amp;sektion=8"
>sshd(8)</a>, authpf ser&aacute; executado como o shell do usu&aacute;rio.
Ele ent&atilde;o verifica se o usu&aacute;rio tem permiss&atilde;o de 
usar authpf, carrega as regras do arquivo apropriado, etc.
d293 1
a293 1
Existem algumas formas de se definir authpf como shell de usu&aacute;rio:
d295 13
a307 18
<li>Manualmente para cada usu&aacute;rio usando
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=chsh&amp;sektion=1"
>chsh(1)</a>, 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8"
>vipw(8)</a>,
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8"
>useradd(8)</a>,
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=usermod&amp;sektion=8"
>usermod(8)</a>, etc.
<li>Colocando usu&aacute;rios numa classe de login e alterando a 
op&ccedil;&atilde;o <tt>shell</tt> da classe em
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=login.conf&amp;sektion=5"
><tt>/etc/login.conf</tt></a>.
d312 7
a318 8
Quanto estiver usando o authpf em um sistema que tiver contas 
de usu&aacute;rios regulares e contas de usu&aacute;rios authpf,
pode ser &uacute;til usar uma classe de login separado para
os usu&aacute;rios authpf.
Isto permite certas mudan&ccedil;as, para aquelas contas, serem feitas
em uma base global e tamb&eacute;m permite pol&iacute;ticas difirentes
serem colocadas em contas regulares e contas authpf.
Alguns exemplos de como as pol&iacute;ticas podem ser configuradas:
d321 5
a325 5
<li><b>shell</b> - Especifica uma shell de login de usu&aacute;rio.
Isto pode ser usado para for&ccedil;ar a shell do usu&aacute;rio para 
<tt>authpf</tt> indifirente da entrada da base de dados 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=passwd&amp;sektion=5"
>passwd(5)</a>.
d327 4
a330 4
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=motd&amp;sektion=5"
>motd(5)</a> mostrar quando um usu&aacute;rio fizer login.
Isto &eacute; &uacute;til para mostrar mensagens que s&atilde;o relevantes
somente para usu&aacute;rios authpf.
d334 1
a334 1
Classes de login s&atilde;o criadas no arquivo
d349 3
a351 3
Os usu&aacute;rios s&atilde;o designados para uma classe de login
editando o campo <tt>class</tt> da base de dados passwd(5) do usu&aacute;rio.
Uma maneira de se fazer isso &eacute; com o comando
d357 5
a361 5
<h2>Verificando quem est&aacute; Logado</h2>
Assim que um usu&aacute;rio se loga e o authpf ajusta as regras PF, ele tamb&eacute;m
altera o t&iacute;tulo do processo para mostrar o nome e endere&ccedil;o IP do 
usu&aacute;rio logado:
<pre>    
d367 6
a372 7
Aqui o usu&aacute;rio <tt>charlie</tt> se logou da m&aacute;quina 192.168.1.3. 
Enviando um sinal SIGTERM ao processo authpf, o usu&aacute;rio pode ser 
for&ccedil;ado a sair. Authpf remover&aacute; quaisquer regras inseridas para 
o usu&aacute;rio e derrubar&aacute; todas conex&otilde;es mantidas nas tabelas de estado 
que este usu&aacute;rio tiver aberto.

<pre>    
d378 6
a383 6
O authpf est&aacute; sendo usado num gateway OpenBSD para autenticar 
usu&aacute;rios numa rede wireless que &eacute; parte de uma grande 
rede num campus. Uma vez autenticado o usu&aacute;rio, assumindo que 
n&atilde;o esteja na lista de banidos, ter&aacute; permiss&atilde;o de 
abrir conex&otilde;es SSH e navegar na web (incluindo web sites 
seguros), al&eacute;m de poder acessar os servidores DNS do campus.
d386 1
a386 1
O arquivo <tt>/etc/authpf/authpf.rules</tt> cont&eacute;m as seguintes
d402 3
a404 3
O usu&aacute;rio administrativo <tt>charlie</tt> deve ter acesso aos 
servidores SMTP e POP3, al&eacute;m de poder navegar na web e usar 
SSH. As regras a seguir est&atilde;o definidas no arquivo 
d426 2
a427 2
As regras principais -- localizadas em <tt>/etc/pf.conf</tt> -- 
s&atilde;o configuradas a seguir:<br>
d433 1
a433 1
# macros
d442 1
a442 1
# filter
d461 1
a461 1
As regras s&atilde;o bem simples e sua fun&ccedil;&atilde;o &eacute;:
d463 10
a472 10
<li>Bloquear tudo (negar por padr&atilde;o).
<li>Permitir tr&aacute;fego TCP, UDP e ICMP vindo da rede wireless e 
saindo pela interface externa e do pr&oacute;prio gateway.
<li>Permitir tr&aacute;fego SSH entrante vindo da rede wireless e 
destinado ao pr&oacute;prio gateway. Esta regra deve existir para que 
os usu&aacute;rios possam logar.
<li>Permite requisi&ccedil;&otilde;es DNS vindo de todos os 
usu&aacute;rios authpf autenticados para servidores DNS do campus.
<li>&Eacute; criada uma &acirc;ncora "authpf" para tr&aacute;fego 
vindo na interface de rede wireless. 
d476 8
a483 11
A id&eacute;ia por tr&aacute;s das regras principais &eacute; bloquear 
tudo e permitir a passagem de menos tr&aacute;fego poss&iacute;vel. O 
tr&aacute;fego saindo pela interface externa &eacute; liberado, mas 
n&atilde;o &eacute; permitido entrar pela interface wireless 
atrav&eacute;s do pol&iacute;tica negar por padr&atilde;o. Uma vez 
autenticado, o tr&aacute;fego do 
usu&aacute;rio &eacute; permitido atravessar a interface wireless e 
seguir atrav&eacute;s do gateway para o resto da rede. A 
palavra-chave <tt>quick</tt> &eacute; usada de forma que o PF 
n&atilde;o precise avaliar cada regra quando uma nova conex&atilde;o 
atravessa o gateway.
d487 3
a489 2
[<a href="index.html">Conte&uacute;do</a>]
[<a href="carp.html">Pr&oacute;ximo: Redund&acirc;ncia de Firewall com CARP e pfsync</a>] 
d498 2
a499 2
Originally [OpenBSD: authpf.html,v 1.22 ]<br>
$Translation: authpf.html,v 1.10 2007/11/24 03:02:04 dsantos Exp $<br>
d501 1
a501 1
$OpenBSD$ 
@


1.9
log
@Sycn with steelix translation CVS
@
text
@d69 1
a69 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8&amp;manpath=OpenBSD+4.1"
d71 2
a72 2
Um gateway de autentica&ccedil;&atilde;o &eacute; como um gateway de rede normal (a.k.a. 
um roteador) exceto pelo fato dos usu&aacute;rios precisarem primeiro se
d74 1
a74 1
de usu&aacute;rio &eacute; definido como <tt>/usr/sbin/authpf</tt> (ex:, ao inv&eacute;s 
d84 1
a84 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.1"
d90 2
a91 2
que o usu&aacute;rio possa ter aberto. Por isso a habilidade do usu&aacute;rio 
de passar tr&aacute;fego atrav&eacute;s do gateway somente existe enquanto 
d110 2
a111 1
As regras que o authpf carrega podem ser configuradas em uma base por usu&aacute; ou global.
d146 1
a146 1
Para um descri&ccedil;&atilde;o completa da configura&ccedil;&atilde;o do authpf, por favor 
d149 1
a149 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8&amp;manpath=OpenBSD+4.1"
d215 1
a215 1
duas macros predefinidas:
d327 1
a327 1
Isto permite certas mudan&ccedil;as para naquelas contas serem feitas
d362 1
a362 1
editando o campo <tt>class</tt> da base de dados passwd(5) do usu&aacute;rio
d513 2
a514 2
Originally [OpenBSD: authpf.html,v 1.21 ]<br>
$Translation: authpf.html,v 1.9 2007/06/13 19:46:24 dsantos Exp $<br>
@


1.8
log
@sync with steelix translation CVS
@
text
@d14 1
a14 1
Copyright (c) 2003-2005 Joel Knight <enabled@@myrealbox.com>
d69 1
a69 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d77 1
a77 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&amp;sektion=1&amp;manpath=OpenBSD+4.0"
d80 1
a80 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=csh&amp;sektion=1&amp;manpath=OpenBSD+4.0"
d84 1
a84 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.0"
d136 2
a137 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=syslogd&amp;sektion=8&amp;manpath=OpenBSD+4.0">syslogd(8)</a>. Utilizando esta informa&ccedil;&atilde;o, um administrador 
d148 1
a148 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d292 1
a292 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d302 1
a302 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=chsh&amp;sektion=1&amp;manpath=OpenBSD+4.0"
d305 1
a305 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d308 2
a309 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8&amp;manpath=OpenBSD+4.0">useradd(8)</a>,
d311 2
a312 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=usermod&amp;sektion=8&amp;manpath=OpenBSD+4.0">usermod(8)</a>, etc.
d316 2
a317 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=login.conf&amp;sektion=5&amp;manpath=OpenBSD+4.0"><tt>/etc/login.conf</tt></a>.
d324 1
a324 1
pode ser &uacute;til criar uma classe de login separado para
d348 1
a348 1
Um exemplo de classe de login para usu&aacute;rios authpf:
d512 2
a513 2
Originally [OpenBSD: authpf.html,v 1.19 ]<br>
$Translation: authpf.html,v 1.8 2006/12/28 18:29:28 dsantos Exp $<br>
@


1.7
log
@sync with steelix translation CVS
@
text
@d286 30
a361 30
<a name="shell"></a>
<h3>Definindo Authpf como um Shell de usu&aacute;rio</h3>
Para authpf funcionar ele deve ser definido como shell de 
login do usu&aacute;rio. Quando o usu&aacute;rio se autenticar ao 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd&amp;sektion=8&amp;manpath=OpenBSD+4.0"
>sshd(8)</a>, authpf ser&aacute; executado como o shell do usu&aacute;rio.
Ele ent&atilde;o verifica se o usu&aacute;rio tem permiss&atilde;o de 
usar authpf, carrega as regras do arquivo apropriado, etc.

<p>
Existem algumas formas de se definir authpf como shell de usu&aacute;rio:
<ol>
<li>Manualmente para cada usu&aacute;rio usando
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=chsh&amp;sektion=1&amp;manpath=OpenBSD+4.0"
>chsh(1)</a>, 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8&amp;manpath=OpenBSD+4.0"
>vipw(8)</a>,
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8&amp;manpath=OpenBSD+4.0">useradd(8)</a>,
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=usermod&amp;sektion=8&amp;manpath=OpenBSD+4.0">usermod(8)</a>, etc.
<li>Colocando usu&aacute;rios numa classe de login e alterando a 
op&ccedil;&atilde;o <tt>shell</tt> da classe em
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=login.conf&amp;sektion=5&amp;manpath=OpenBSD+4.0"><tt>/etc/login.conf</tt></a>.
</ol>

d509 1
a509 1
$Translation: authpf.html,v 1.7 2006/11/15 23:11:15 dsantos Exp $<br>
@


1.6
log
@sync with steelix translation CVS
@
text
@d69 1
a69 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d77 1
a77 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&amp;sektion=1&amp;manpath=OpenBSD+3.9"
d80 1
a80 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=csh&amp;sektion=1&amp;manpath=OpenBSD+3.9"
d84 1
a84 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+3.9"
d136 1
a136 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=syslogd&amp;sektion=8&amp;manpath=OpenBSD+3.9">syslogd(8)</a>. Utilizando esta informa&ccedil;&atilde;o, um administrador 
d147 1
a147 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d336 2
a337 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d346 2
a347 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chsh&amp;sektion=1&amp;manpath=OpenBSD+3.9"
d349 2
a350 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d352 4
a355 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8&amp;manpath=OpenBSD+3.9">useradd(8)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=usermod&amp;sektion=8&amp;manpath=OpenBSD+3.9">usermod(8)</a>, etc.
d358 2
a359 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login.conf&amp;sektion=5&amp;manpath=OpenBSD+3.9"><tt>/etc/login.conf</tt></a>.
d508 2
a509 2
Originally [OpenBSD: authpf.html,v 1.18 ]<br>
$Translation: authpf.html,v 1.6 2006/06/23 15:10:21 dsantos Exp $<br>
@


1.5
log
@sync with steelix translation CVS
@
text
@a331 4




d336 1
a336 2
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d338 2
a339 2
Ele ent&atilde;o verifica se o usu&aacute;rio tem permiss&atilde;o de usar authpf, 
carrega as regras do arquivo apropriado, etc.
d345 1
a345 2
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=chsh&amp;sektion=1&amp;manpath=OpenBSD+3.9"
d347 1
a347 2
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d349 5
a353 8
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8&amp;manpath=OpenBSD+3.9">useradd(8)</a>,
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=usermod&amp;sektion=8&amp;manpath=OpenBSD+3.9">usermod(8)</a>, etc.
<li>Colocando usu&aacute;rios numa classe de login e alterando a op&ccedil;&atilde;o
<tt>shell</tt> da classe em
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=login.conf&amp;sektion=5&amp;manpath=OpenBSD+3.9"><tt>/etc/login.conf</tt></a>.
d356 1
d380 6
a385 5
O authpf est&aacute; sendo usado num gateway OpenBSD para autenticar usu&aacute;rios 
numa rede wireless que &eacute; parte de uma grande rede num campus. Uma vez 
autenticado o usu&aacute;rio, assumindo que n&atilde;o esteja na lista de banidos, 
ter&aacute; permiss&atilde;o de abrir conex&otilde;es SSH e navegar na web (incluindo 
web sites seguros), al&eacute;m de poder acessar os servidores DNS do campus.
d388 2
a389 1
O arquivo <tt>/etc/authpf/authpf.rules</tt> cont&eacute;m as seguintes regras:<br>
d469 6
a474 6
destinado ao pr&oacute;prio gateway. Esta regra deve existir para que os 
usu&aacute;rios possam logar.
<li>Permite requisi&ccedil;&otilde;es DNS vindo de todos os usu&aacute;rios
authpf autenticados para servidores DNS do campus.
<li>&Eacute; criada uma &acirc;ncora "authpf" para tr&aacute;fego vindo na 
interface de rede wireless. 
d478 11
a488 8
A id&eacute;ia por tr&aacute;s das regras principais &eacute; bloquear tudo e permitir 
a passagem de menos tr&aacute;fego poss&iacute;vel. O tr&aacute;fego saindo pela interface 
externa &eacute; liberado, mas n&atilde;o &eacute; permitido entrar pela interface wireless 
atrav&eacute;s do pol&iacute;tica negar por padr&atilde;o. Uma vez autenticado, o tr&aacute;fego do 
usu&aacute;rio &eacute; permitido atravessar a interface wireless e seguir atrav&eacute;s 
do gateway para o resto da rede. A palavra-chave <tt>quick</tt> 
&eacute; usada de forma que o PF n&atilde;o precise avaliar cada regra quando uma 
nova conex&atilde;o atravessa o gateway.
d503 1
a503 1
$Translation: authpf.html,v 1.5 2006/05/28 17:23:02 dsantos Exp $<br>
@


1.4
log
@sync with Steelix CVS
@
text
@d69 1
a69 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d77 1
a77 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&amp;sektion=1&amp;manpath=OpenBSD+3.8"
d80 1
a80 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=csh&amp;sektion=1&amp;manpath=OpenBSD+3.8"
d84 1
a84 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+3.8"
d136 1
a136 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=syslogd&amp;sektion=8&amp;manpath=OpenBSD+3.8">syslogd(8)</a>. Utilizando esta informa&ccedil;&atilde;o, um administrador 
d147 1
a147 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d341 1
a341 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d351 1
a351 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=chsh&amp;sektion=1&amp;manpath=OpenBSD+3.8"
d354 1
a354 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d357 1
a357 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8&amp;manpath=OpenBSD+3.8">useradd(8)</a>,
d359 1
a359 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=usermod&amp;sektion=8&amp;manpath=OpenBSD+3.8">usermod(8)</a>, etc.
d363 1
a363 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=login.conf&amp;sektion=5&amp;manpath=OpenBSD+3.8"><tt>/etc/login.conf</tt></a>.
d506 2
a507 2
Originally [OpenBSD: authpf.html,v 1.17 ]<br>
$Translation: authpf.html,v 1.4 2005/12/22 21:21:45 dsantos Exp $<br>
@


1.3
log
@sync with steelix translation CVS
@
text
@d40 1
a40 1
[<a href="example1.html">Pr&oacute;ximo: Redund&acirc;ncia de Firewall com CARP e pfsync</a>]
d507 1
a507 1
$Translation: authpf.html,v 1.3 2005/11/15 14:36:42 dsantos Exp $<br>
@


1.2
log
@sync with Steelix CVS
@
text
@d68 2
a69 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d76 2
a77 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&amp;sektion=1&amp;manpath=OpenBSD+3.7"
d79 2
a80 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=csh&amp;sektion=1&amp;manpath=OpenBSD+3.7"
d83 2
a84 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+3.7"
d135 2
a136 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=syslogd&amp;sektion=8&amp;manpath=OpenBSD+3.7">syslogd(8)</a>. Utilizando esta informa&ccedil;&atilde;o, um administrador 
d146 2
a147 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d340 2
a341 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d350 2
a351 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chsh&amp;sektion=1&amp;manpath=OpenBSD+3.7"
d353 2
a354 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d356 4
a359 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8&amp;manpath=OpenBSD+3.7">useradd(8)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=usermod&amp;sektion=8&amp;manpath=OpenBSD+3.7">usermod(8)</a>, etc.
d362 2
a363 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login.conf&amp;sektion=5&amp;manpath=OpenBSD+3.7"><tt>/etc/login.conf</tt></a>.
d505 4
a508 2
Originally [OpenBSD: authpf.html,v 1.16 ]<br>
$Translation: authpf.html,v 1.2 2005/06/06 13:06:29 dsantos Exp $<br>
@


1.1
log
@sync with steelix translation CVS
@
text
@d14 1
a14 1
Copyright (c) 2003, 2004 Joel Knight <enabled@@myrealbox.com>
d40 1
a40 1
[<a href="example1.html">Pr&oacute;ximo: Exemplo: Firewall para Casa ou Pequeno Escrit&oacute;rio</a>]
d52 1
d56 1
d59 1
a60 1
<li><a href="#moreinfo">Mais Informa&ccedil;&otilde;es</a>
d68 1
a68 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8&amp;manpath=OpenBSD+3.6"
d75 1
a75 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&amp;sektion=1&amp;manpath=OpenBSD+3.6"
d77 1
a77 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=csh&amp;sektion=1&amp;manpath=OpenBSD+3.6"
d80 1
a80 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+3.6"
d91 7
a97 10
Authpf altera as regras   
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+3.6"
>pf(4)</a> adicionando regras numa 
<a href="anchors.html#named">regra nomeada</a> ligadas numa
<a href="anchors.html">&acirc;ncora</a>. Toda vez que um usu&aacute;rio se autentica, authpf 
nomeia e cria um novo conjunto de regras e carrega as regras de 
<a href="filter.html">filtragem</a>, <a href="nat.html"><tt>nat</tt></a>,
<a href="nat.html#binat"><tt>binat</tt></a> e 
<a href="rdr.html"><tt>rdr</tt></a> previamente configuradas. As regras que o authpf
carrega podem ser configuradas por usu&aacute;rio ou global.
d99 9
d131 1
a131 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=syslogd&amp;sektion=8&amp;manpath=OpenBSD+3.6">syslogd(8)</a>. Utilizando esta informa&ccedil;&atilde;o, um administrador 
d141 1
a141 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8&amp;manpath=OpenBSD+3.6"
d144 21
d218 18
d260 70
d334 1
a334 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd&amp;sektion=8&amp;manpath=OpenBSD+3.6"
d343 1
a343 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chsh&amp;sektion=1&amp;manpath=OpenBSD+3.6"
d345 1
a345 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8&amp;manpath=OpenBSD+3.6"
d347 2
a348 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8&amp;manpath=OpenBSD+3.6">useradd(8)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=usermod&amp;sektion=8&amp;manpath=OpenBSD+3.6">usermod(8)</a>, etc.
d351 1
a351 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login.conf&amp;sektion=5&amp;manpath=OpenBSD+3.6"><tt>/etc/login.conf</tt></a>.
a374 6
<a name="moreinfo"></a>
<h2>Mais Informa&ccedil;&otilde;es</h2>
Para uma descri&ccedil;&atilde;o completa da opera&ccedil;&atilde;o do authpf, por favor consulte a 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=authpf&amp;sektion=8&amp;manpath=OpenBSD+3.6"
>p&aacute;gina de manual do authpf</a>.

a390 1
dns_servers = "{ 10.0.1.56, 10.0.2.56 }"
a391 2
pass in quick on $wifi_if proto udp from $user_ip to $dns_servers \
   port domain keep state
a410 1
dns_servers = "{ 10.0.1.56, 10.0.2.56 }"
a411 2
pass in quick on $wifi_if proto udp from $user_ip to $dns_servers \
   port domain keep state
d433 3
d442 4
a445 4
pass out quick on $ext_if proto tcp from $wifi_if:network flags S/SA \
   modulate state
pass out quick on $ext_if proto { udp, icmp } from $wifi_if:network \
   keep state
d447 1
a447 1
pass in quick on $wifi_if proto tcp from $wifi_if:network to $wifi_if \
d450 2
d462 1
a462 1
saindo pela interface externa.
d466 2
d485 1
a485 1
[<a href="example1.html">Pr&oacute;ximo: Exemplo: Firewall para Casa ou Pequeno Escrit&oacute;rio</a>]
d493 2
a494 2
Originally [OpenBSD: authpf.html,v 1.10 ]<br>                                                      
$Translation: authpf.html,v 1.1 2005/01/04 17:09:07 dsantos Exp $<br>                 
@

