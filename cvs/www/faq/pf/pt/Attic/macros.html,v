head	1.19;
access;
symbols;
locks; strict;
comment	@# @;


1.19
date	2014.04.01.17.14.11;	author nick;	state dead;
branches;
next	1.18;

1.18
date	2013.12.06.20.52.46;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2013.05.03.05.53.48;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2012.11.07.09.26.25;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2012.06.15.19.18.59;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2011.07.15.05.55.00;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2010.11.25.16.49.10;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2010.10.19.14.31.15;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2009.10.19.09.39.59;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2009.10.17.15.58.26;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2009.05.16.08.59.12;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2009.03.16.20.24.23;	author tobias;	state Exp;
branches;
next	1.7;

1.7
date	2007.12.01.10.39.11;	author tobias;	state Exp;
branches;
next	1.6;

1.6
date	2007.06.23.18.29.30;	author jufi;	state Exp;
branches;
next	1.5;

1.5
date	2006.11.22.15.14.07;	author saad;	state Exp;
branches;
next	1.4;

1.4
date	2006.05.29.11.06.11;	author jufi;	state Exp;
branches;
next	1.3;

1.3
date	2005.11.18.20.48.47;	author jufi;	state Exp;
branches;
next	1.2;

1.2
date	2005.05.30.13.52.07;	author saad;	state Exp;
branches;
next	1.1;

1.1
date	2005.01.06.20.03.30;	author jufi;	state Exp;
branches;
next	;


desc
@@


1.19
log
@
Abandon translations, per deraadt@@ and ajacoutot@@.
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF: Listas e Macros</title>
<link rev="made" href="mailto:www@@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq,pf">
<meta name="distribution"  content="global">
</head>

<!--
Copyright (c) 2003, Nick Holland <nick@@openbsd.org>
Copyright (c) 2003, 2004, Joel Knight <enabled@@myrealbox.com>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<a href="../../../pt/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../../images/smalltitle.gif" border="0">
</a>
<p>
[<a href="config.html">Anterior: Primeiros Passos</a>]
[<a href="index.html">Conteúdo</a>]
[<a href="tables.html">Próximo: Tabelas</a>]

<h1><font color="#e00000">PF: Listas e Macros</font></h1>
<hr>

<h3>Conteúdo</h3>
<ul>
<li><a href="#lists">Listas</a>
<li><a href="#macros">Macros</a>
</ul>

<hr>

<a name="lists"></a>
<h2>Listas</h2>
Uma lista permite a especificação de múltiplas informações similares
dentro de uma regra. Por exemplo, múltiplos protocolos, números de
portas, endereços, etc.
Portanto, em vez de escrever uma regra de filtragem para cada
endereço IP a ser bloqueado, pode-se escrever apenas uma regra
especificando os endereços IP em uma lista. Listas são definidas
colocando seus itens entre chaves <tt>{ }</tt>.

<p>
Quando o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.4"
>pfctl(8)</a> encontra uma lista durante o carregamento do
conjunto de regras, ele cria várias regras, uma para cada item na lista.
Por exemplo:
<blockquote>
<tt>
block out on fxp0 from { 192.168.0.1, 10.5.32.6 } to any
</tt>
</blockquote>

<p>
é expandida para:
<blockquote>
<tt>
block out on fxp0 from 192.168.0.1 to any<br>
block out on fxp0 from 10.5.32.6 to any
</tt>
</blockquote>

<p>
Múltiplas listas podem ser especificadas em uma regra:
<blockquote>
<tt>
match in on fxp0 proto tcp to port { 22 80 } rdr-to 192.168.0.6<br>
block out on fxp0 proto { tcp udp } from { 192.168.0.1, \<br>
&nbsp;&nbsp;&nbsp;10.5.32.6 } to any port { ssh telnet }
</tt>
</blockquote>

<p>
Perceba que as vírgulas entre os elementos da lista são opcionais.

<p>
As listas também podem conter listas aninhadas:

<blockquote>
<tt>
trusted = "{ 192.168.1.2 192.168.5.36 }"<br>
pass in inet proto tcp from { 10.10.0.0/24 $trusted } to port 22
</tt>
</blockquote>

<p>
Tome cuidado com construções do tipo "lista negada", um erro comum é:
<blockquote>
<tt>
pass in on fxp0 from { 10.0.0.0/8, !10.1.2.3 }
</tt>
</blockquote>

<p>
Enquanto a intenção geralmente é corresponder a "qualquer endereço em
10.0.0.0/8, exceto 10.1.2.3", na verdade a regra expande para:
<blockquote>
<tt>
pass in on fxp0 from 10.0.0.0/8<br>
pass in on fxp0 from !10.1.2.3
</tt>
</blockquote>

<p>
que corresponde a qualquer endereço possível. Nesse caso, uma
<a href="tables.html">tabela</a> deve ser usada.

<a name="macros"></a>
<h2>Macros</h2>
Macros são variáveis definidas pelo usuário que podem conter endereços
IP, números de portas, nomes de interfaces, etc.
O uso de macros pode reduzir em muito a complexidade de um conjunto de
regras PF, além de facilitar bastante sua manutenção.

<p>
Nomes de macro devem começar com uma letra e podem conter letras,
dígitos e sublinhados. Não se pode utilizar palavras reservadas
como <tt>pass</tt>, <tt>out</tt> ou <tt>queue</tt> como nomes de macros.
<blockquote>
<tt>
ext_if = "fxp0"<br>
<br>
block in on $ext_if from any to any<br>
</tt>
</blockquote>

<p>
Isso cria a macro nomeada <tt>ext_if</tt>. Quando a macro é referenciada
após sua criação, seu nome deve ser precedido pelo caractere <tt>$</tt>.

<p>
Macros também podem expandir para listas, como:
<blockquote>
<tt>
friends = "{ 192.168.1.1, 10.0.2.5, 192.168.43.53 }"
</tt>
</blockquote>

<p>
Macros podem ser definidas recursivamente. Como macros não são
expandidas entre aspas, a seguinte sintaxe deve ser usada:
<blockquote>
<tt>
host1      = "192.168.1.1"<br>
host2      = "192.168.1.2"<br>
all_hosts  = "{" $host1 $host2 "}"<br>
</tt>
</blockquote>

<p>
A macro <tt>$all_hosts</tt> agora expande para 192.168.1.1, 192.168.1.2.

<p>
[<a href="config.html">Anterior: Primeiros Passos</a>]
[<a href="index.html">Conteúdo</a>]
[<a href="tables.html">Próximo: Tabelas</a>]

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[voltar]"></a>
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: macros.html,v 1.33 ]<br>
$Translation: macros.html,v 1.18 2013/12/01 12:44:33 egypcio Exp $<br>
-->
$OpenBSD: macros.html,v 1.18 2013/12/06 20:52:46 ajacoutot Exp $
</small>

</body>
</html>
@


1.18
log
@Sync with Steelix CVS
@
text
@d190 1
a190 1
$OpenBSD$
@


1.17
log
@Sync with Steelix CVS
@
text
@d66 1
a66 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.3"
d187 2
a188 2
Originally [OpenBSD: macros.html,v 1.32 ]<br>
$Translation: macros.html,v 1.17 2013/05/02 22:48:46 renato Exp $<br>
@


1.16
log
@Sync with Steelix CVS
@
text
@d66 1
a66 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.2"
d187 2
a188 2
Originally [OpenBSD: macros.html,v 1.31 ]<br>
$Translation: macros.html,v 1.16 2012/11/06 16:57:12 egypcio Exp $<br>
@


1.15
log
@Sync with Steelix CVS
@
text
@d66 1
a66 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.1"
d187 2
a188 2
Originally [OpenBSD: macros.html,v 1.30 ]<br>
$Translation: macros.html,v 1.15 2012/06/12 21:14:55 renato Exp $<br>
@


1.14
log
@Sync with Steelix CVS
@
text
@d66 1
a66 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.9"
d187 2
a188 2
Originally [OpenBSD: macros.html,v 1.28 ]<br>
$Translation: macros.html,v 1.14 2011/07/06 12:09:42 rodolfo Exp $<br>
@


1.13
log
@Sync with Steelix CVS
@
text
@d66 1
a66 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.8"
d187 2
a188 2
Originally [OpenBSD: macros.html,v 1.27 ]<br>
$Translation: macros.html,v 1.13 2010/11/24 16:29:16 renato Exp $<br>
@


1.12
log
@Sync with Steelix CVS
@
text
@d66 1
a66 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.7"
d187 2
a188 2
Originally [OpenBSD: macros.html,v 1.26 ]<br>
$Translation: macros.html,v 1.12 2010/10/18 10:41:25 renato Exp $<br>
@


1.11
log
@Sync with Steelix CVS
@
text
@d66 1
a66 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.6"
d86 1
a86 2
Múltiplas listas podem ser especificadas em uma regra e não são
limitadas apenas às regras de filtragem:
d89 1
a89 2
rdr on fxp0 proto tcp from any to any port { 22 80 } -&gt; \<br>
&nbsp;&nbsp;&nbsp;192.168.0.6<br>
d187 2
a188 2
Originally [OpenBSD: macros.html,v 1.25 ]<br>
$Translation: macros.html,v 1.11 2009/10/18 16:52:52 alan Exp $<br>
@


1.10
log
@Sync with Steelix CVS
@
text
@d66 1
a66 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.5"
d189 2
a190 2
Originally [OpenBSD: macros.html,v 1.24 ]<br>
$Translation: macros.html,v 1.10 2009/10/13 19:12:28 alan Exp $<br>
@


1.9
log
@Sync with Steelix CVS
@
text
@d39 1
a39 1
[<a href="config.html">Anterior: Começando</a>]
d57 2
a58 2
dentro de uma regra. Por exemplo, vários protocolos, números de portas,
endereços, etc.
d61 1
a61 1
especificando uma lista de endereços IP. Listas são definidas
d67 3
a69 2
>pfctl(8)</a> encontra uma lista ao carregar as regras, ele
cria várias regras, uma para cada item na lista. Por exemplo:
d86 2
a87 2
Várias listas podem ser especificadas numa regra e não estão limitadas
apenas às regras de filtragem:
d119 1
a119 1
Enquanto a intenção geralmente é casar "qualquer endereço em
d129 1
a129 1
que casa com qualquer endereço possível. Nesse caso, uma
d134 4
a137 4
Macros são variáveis definidas pelo usuário e podem conter endereços IP,
números de portas, nomes de interfaces, etc. O uso de macros pode
reduzir em muito a complexidade de um arquivo de regras PF, além de
facilitar bastante sua manutenção.
d156 1
a156 1
Macros também podem expandir em listas, como:
d178 1
a178 1
[<a href="config.html">Anterior: Começando</a>]
d190 1
a190 1
$Translation: macros.html,v 1.9 2009/05/10 17:44:16 alan Exp $<br>
@


1.8
log
@Sync with Steelix CVS
@
text
@d66 1
a66 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.4"
d188 2
a189 2
Originally [OpenBSD: macros.html,v 1.23 ]<br>
$Translation: macros.html,v 1.8 2009/03/11 00:52:56 dsantos Exp $<br>
@


1.7
log
@Sync with Steelix CVS
@
text
@d8 3
a10 3
<meta name="description" content="the OpenBSD FAQ page">
<meta name="keywords" content="openbsd,faq,pf">
<meta name="distribution" content="global">
d39 3
a41 3
[<a href="config.html">Anterior: Come&ccedil;ando</a>]
[<a href="index.html">Conte&uacute;do</a>]
[<a href="tables.html">Pr&oacute;ximo: Tabelas</a>]
d46 1
a46 1
<h3>Conte&uacute;do</h3>
d56 6
a61 6
Uma lista permite a especifica&ccedil;&atilde;o de m&uacute;ltiplas 
informa&ccedil;&otilde;es similares numa regra.  Por exemplo, v&aacute;rios 
protocolos, n&uacute;meros de portas, endere&ccedil;os, etc.
Portando, ao inv&eacute;s de escrever uma regra de filtragem para cada 
endere&ccedil;o IP a ser bloqueado, pode-se escrever apenas uma regra 
especificando uma lista de endere&ccedil;os IP. Listas s&atilde;o definidas 
d65 2
a66 3
Quando o 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.2"
d68 1
a68 1
cria v&aacute;rias regras, uma para cada item na lista. Por exemplo:
d76 1
a76 1
&eacute; expandida para:
d85 2
a86 2
V&aacute;rias listas podem ser especificadas numa regra e n&atilde;o 
est&atilde;o limitadas apenas &agrave;s regras de filtragem:
d91 1
a91 1
block out on fxp0 proto { tcp udp } from { 192.168.0.1, \<br> 
d97 1
a97 2
Perceba que as v&iacute;rgulas entre elementos da lista s&atilde;o 
opcionais.
d100 1
a100 1
As listas tamb&eacute;m podem conter listas aninhadas:
d110 1
a110 2
Tome cuidado com constru&ccedil;&otilde;es do tipo "lista negada",  
um erro comum &eacute;:
d118 2
a119 3
Enquanto a inten&ccedil;&atilde;o geralmente &eacute; casar com 
"qualquer endere&ccedil;o em 10.0.0.0/8, exceto 10.1.2.3",
na verdade a regra expande para:
d128 1
a128 1
que casa com qualquer endere&ccedil;o poss&iacute;vel. Neste caso, uma 
d133 4
a136 4
Macros s&atilde;o var&iacute;aveis definidas pelo usu&aacute;rio e podem 
conter endere&ccedil;os IP, n&uacute;meros de portas, nomes de interfaces, 
etc. O uso de macros pode reduzir em muito a complexidade de um arquivo de 
regras PF al&eacute;m de facilitar bastante sua manuten&ccedil;&atilde;o.
d139 2
a140 2
Nomes de macro devem come&ccedil;ar com uma letra e pode conter letras, 
d&iacute;gitos e underscore. N&atilde;o se pode utilizar palavras reservadas 
d151 2
a152 3
Isto cria a macro nomeada <tt>ext_if</tt>. Quando a macro &eacute; 
referenciada ap&oacute;s sua cria&ccedil;&atilde;o, seu nome deve ser 
precedido pelo caracter <tt>$</tt>.
d155 1
a155 1
Macros tamb&eacute;m podem expandir em listas como:
d163 1
a163 1
Macros podem ser definias recursivamente. Como macros n&atilde;o s&atilde;o 
d177 3
a179 3
[<a href="config.html">Anterior: Come&ccedil;ando</a>]
[<a href="index.html">Conte&uacute;do</a>]
[<a href="tables.html">Pr&oacute;ximo: Tabelas</a>]
d188 2
a189 2
Originally [OpenBSD: macros.html,v 1.21 ]<br>
$Translation: macros.html,v 1.7 2007/11/24 03:02:05 dsantos Exp $<br>
d191 1
a191 1
$OpenBSD$ 
@


1.6
log
@sync with steelix translation CVS
@
text
@d67 1
a67 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.1"
d193 2
a194 2
Originally [OpenBSD: macros.html,v 1.20 ]<br>
$Translation: macros.html,v 1.6 2007/06/21 23:41:17 dsantos Exp $<br>
@


1.5
log
@sync with Steelix CVS
@
text
@d56 7
a62 7
Uma lista permite a especifica&ccedil;&atilde;o de m&uacute;ltiplas informa&ccedil;&otilde;es 
similares numa regra.  Por exemplo, v&aacute;rios protocolos, n&uacute;meros de portas, 
endere&ccedil;os, etc.
Portando, ao inv&eacute;s de escrever uma regra de filtragem para cada endere&ccedil;o
IP a ser bloqueado, pode-se escrever apenas uma regra especificando 
uma lista de endere&ccedil;os IP. Listas s&atilde;o definidas colocando seus itens entre 
chaves <tt>{ }</tt>.
d67 1
a67 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d137 4
a140 4
Macros s&atilde;o var&iacute;aveis definidas pelo usu&aacute;rio e podem conter endere&ccedil;os 
IP, n&uacute;meros de portas, nomes de interfaces, etc. O uso de macros pode 
reduzir em muito a complexidade de um arquivo de regras PF al&eacute;m de 
facilitar bastante sua manuten&ccedil;&atilde;o.
d143 3
a145 3
Nomes de macro devem come&ccedil;ar com uma letra e pode conter letras, d&iacute;gitos, e
underscore. N&atilde;o se pode utilizar palavras reservadas como <tt>pass</tt>, 
<tt>out</tt> ou <tt>queue</tt> como nomes de macros.
d155 3
a157 2
Isto cria a macro nomeada <tt>ext_if</tt>. Quando a macro &eacute; referenciada ap&oacute;s 
sua cria&ccedil;&atilde;o, seu nome deve ser precedido pelo caracter <tt>$</tt>.
d168 2
a169 2
Macros podem ser definias recursivamente. Como macros n&atilde;o s&atilde;o expandidas 
entre aspas, a seguinte sintaxe deve ser usada:
d193 2
a194 2
Originally [OpenBSD: macros.html,v 1.19 ]<br>
$Translation: macros.html,v 1.5 2006/11/21 01:54:24 dsantos Exp $<br>
@


1.4
log
@sync with steelix translation CVS
@
text
@d67 1
a67 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d86 2
a87 2
V&aacute;rias listas podem ser especificadas numa regra e n&atilde;o est&atilde;o limitadas 
apenas &agrave;s regras de filtragem:
d98 12
a109 1
Perceba que as v&iacute;rgulas entre elementos da lista &eacute; opcional.
d192 2
a193 2
Originally [OpenBSD: macros.html,v 1.18 ]<br>
$Translation: macros.html,v 1.4 2006/05/28 17:23:02 dsantos Exp $<br>
@


1.3
log
@sync with steelix translation CVS
@
text
@d67 1
a67 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d181 2
a182 2
Originally [OpenBSD: macros.html,v 1.17 ]<br>
$Translation: macros.html,v 1.3 2005/11/15 14:36:42 dsantos Exp $<br>
@


1.2
log
@sync with Steelix CVS
@
text
@d66 2
a67 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d180 4
a183 2
Originally [OpenBSD: macros.html,v 1.16 ]<br>
$Translation: macros.html,v 1.2 2005/05/27 15:11:33 dsantos Exp $<br>
@


1.1
log
@sync with steelix translation CVS
@
text
@d66 1
a66 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.6"
d179 2
a180 2
Originally [OpenBSD: macros.html,v 1.15 ]<br>                                                      
$Translation: macros.html,v 1.1 2005/01/04 17:09:07 dsantos Exp $<br>                 
@

