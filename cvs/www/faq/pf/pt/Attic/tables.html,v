head	1.20;
access;
symbols;
locks; strict;
comment	@# @;


1.20
date	2014.04.01.17.14.11;	author nick;	state dead;
branches;
next	1.19;

1.19
date	2013.12.06.20.52.46;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2013.05.03.05.53.48;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2013.02.25.08.23.50;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2012.11.07.09.26.25;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2012.11.02.07.24.05;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2012.01.03.08.19.10;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2011.07.15.05.55.00;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2009.10.19.09.39.59;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2009.10.17.15.58.26;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2009.05.16.08.59.12;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2009.03.16.20.24.23;	author tobias;	state Exp;
branches;
next	1.8;

1.8
date	2007.12.01.10.39.11;	author tobias;	state Exp;
branches;
next	1.7;

1.7
date	2007.06.20.09.29.47;	author jufi;	state Exp;
branches;
next	1.6;

1.6
date	2006.12.29.12.56.48;	author jufi;	state Exp;
branches;
next	1.5;

1.5
date	2006.05.29.11.06.11;	author jufi;	state Exp;
branches;
next	1.4;

1.4
date	2005.12.24.10.04.36;	author saad;	state Exp;
branches;
next	1.3;

1.3
date	2005.11.18.20.48.47;	author jufi;	state Exp;
branches;
next	1.2;

1.2
date	2005.05.30.13.52.07;	author saad;	state Exp;
branches;
next	1.1;

1.1
date	2005.01.06.20.03.30;	author jufi;	state Exp;
branches;
next	;


desc
@@


1.20
log
@
Abandon translations, per deraadt@@ and ajacoutot@@.
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF: Tabelas</title><link rev="made" href="mailto:www@@openbsd.org">
<meta http-equiv="Content-type" content="text/html; charset=ISO-8859-1">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq,pf">
<meta name="distribution"  content="global">
</head>

<!--
Copyright (c) 2003, 2004 Joel Knight <enabled@@myrealbox.com>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<a href="../../../pt/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../../images/smalltitle.gif" border="0">
</a>
<p>
[<a href="macros.html">Anterior: Listas e Macros</a>]
[<a href="index.html">Conteúdo</a>]
[<a href="filter.html">Próximo: Filtragem de Pacotes</a>]

<p>
<h1><font color="#e00000">PF: Tabelas</font></h1>

<hr>

<h3>Conteúdo</h3>
<ul>
<li><a href="#intro">Introdução</a>
<li><a href="#config">Configuração</a>
<li><a href="#manip">Manipulação com o <tt>pfctl</tt></a>
<li><a href="#addr">Especificação de Endereços</a>
<li><a href="#match">Correspondência de Endereços</a>
</ul>

<hr>

<a name="intro"></a>
<h2>Introdução</h2>
Uma tabela é usada para armazenar um grupo de endereços IPv4 e/ou IPv6. 
Pesquisas em tabelas são muito rápidas e consumem menos memória e tempo de
processamento do que as <a href="macros.html#lists">listas</a>.
Por essa razão, uma tabela é ideal para armazenar uma grande quantidade
de endereços, já que o tempo de pesquisa em uma tabela com
50.000 endereços é apenas ligeiramente maior do que em uma contendo
50 endereços.  Tabelas podem ser usadas nos seguintes caminhos:
<ul>
<li>endereço de origem e/ou destino em regras de filtragem. 
<li>endereços de tradução e redirecionamento com regras de 
<tt>nat-to</tt> e <tt>rdr-to</tt>, reespectivamente.
<li>endereço de destino em opções <tt>route-to</tt>, <tt>reply-to</tt>
    e <tt>dup-to</tt> das regras de filtragem.
</ul>

<p>
Tabelas são criadas no
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+5.4"><tt>pf.conf</tt></a>
ou utilizando o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.4"
>pfctl(8)</a>.

<a name="config"></a>
<h2>Configuração</h2>
No <tt>pf.conf</tt>, tabelas são criadas usando a diretiva <tt>table</tt>.
Os atributos a seguir podem ser especificados para cada tabela:
<ul>
<li><tt>const</tt> - uma vez criada, o conteúdo da tabela não pode ser
    alterado. Quando esse atributo não é especificado,
    o <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.4"
    >pfctl(8)</a> pode ser usado para adicionar ou remover endereços da
    tabela a qualquer momento, mesmo quando o sistema estiver
    em execução no nível de segurança
    (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=securelevel&amp;sektion=7">securelevel(7)</a>)
    dois ou maior.
<li><tt>persist</tt> - faz com que o kernel mantenha a tabela na memória
    mesmo quando nenhuma regra faz referência a ela. Sem esse atributo,
    o kernel removerá automaticamente a tabela quando a última regra
    referenciando-a for liberada.
</ul>

<p>
Exemplo:
<blockquote>
<tt>
table &lt;goodguys&gt; { 192.0.2.0/24 }<br>
table &lt;rfc1918&gt; const { 192.168.0.0/16, 172.16.0.0/12, \<br>
&nbsp;&nbsp;&nbsp;10.0.0.0/8 }<br>
table &lt;spammers&gt; persist<br>
<br>
block in on fxp0 from { &lt;rfc1918&gt;, &lt;spammers&gt; } to any<br>
pass&nbsp; in on fxp0 from &lt;goodguys&gt; to any<br>
</tt>
</blockquote>

<p>
Endereços também podem ser especificados usando o modificador de negação
(ou "not") desta forma:
<blockquote>
<tt>
table &lt;goodguys&gt; { 192.0.2.0/24, !192.0.2.5 }
</tt>
</blockquote>

<p>
A tabela <tt>goodguys</tt> agora corresponde a todos os endereços na
rede 192.0.2.0/24, exceto 192.0.2.5.

<p>
Note que nomes de tabelas são sempre colocados entre &lt; &gt;.

<p>
Tabelas também podem ser populadas via arquivos de texto contendo uma
lista de endereços IP e redes:
<blockquote>
<tt>
table &lt;spammers&gt; persist file "/etc/spammers"<br>
<br>
block in on fxp0 from &lt;spammers&gt; to any<br>
</tt>
</blockquote>

<p>
O arquivo <tt>/etc/spammers</tt> deve conter uma lista de endereços IP
e/ou blocos de rede
<a href="http://public.swbell.net/dedicated/cidr.html">CIDR</a>,
um por linha.
Toda linha começando com <tt>#</tt> é tratada como um comentário e é
ignorada.

<a name="manip"></a>
<h2>Manipulação com o <tt>pfctl</tt></h2>
Tabelas podem ser manipuladas em tempo real usando o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.4"
>pfctl(8)</a>.
Por exemplo, para adicionar entradas à tabela &lt;spammers&gt; criada
acima:
<blockquote>
<tt># pfctl -t spammers -T add 218.70.0.0/16</tt>
</blockquote>

<p>
Caso a tabela &lt;spammers&gt; ainda não exista, ela será criada.
Para listar os endereços na tabela:
<blockquote>
<tt># pfctl -t spammers -T show</tt>
</blockquote>
O argumento <tt>-v</tt> também pode ser usado com <tt>-Tshow</tt>
para mostrar as estatísticas de cada entrada da tabela. Para remover
endereços de uma tabela:
<blockquote>
<tt>
# pfctl -t spammers -T delete 218.70.0.0/16
</tt>
</blockquote>

<p>
Para mais informações sobre manipulação de tabelas com o <tt>pfctl</tt>,
por favor leia a página de manual
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.4"
>pfctl(8)</a>.

<a name="addr"></a>
<h2>Especificação de Endereços</h2>
Além de especificar máquinas através de endereços IP, elas também podem
ser referenciadas pelo nome da máquina. Quando o nome da máquina é
resolvido para um endereço IP, todos os endereços IPv4 e IPv6
resultantes são inseridos na tabela. Endereços IP também podem ser
inseridos na tabela especificando-se um nome de interface válido ou a
palavra-chave <tt>self</tt>.
A tabela conterá então todos os endereços IP atribuídos àquela interface
ou à máquina, respectivamente (incluindo endereço de loopback).<br>
<br>
Uma limitação ao especificar endereços é que <tt>0.0.0.0/0</tt> e
<tt>0/0</tt> não funcionam em tabelas.
A alternativa é escrever esses endereços manualmente ou fazer uso de uma
<a href="macros.html#macros">macro</a>.

<a name="match"></a>
<h2>Correspondência de Endereços</h2>
Uma pesquisa de endereço em uma tabela retorna a entrada que corresponda
mais precisamente ao endereço. Isso permite a criação de tabelas como:
<blockquote>
<tt>
table &lt;goodguys&gt; { 172.16.0.0/16, !172.16.1.0/24, 172.16.1.100 }<br>
<br>
block in on dc0<br>
pass &nbsp;in on dc0 from &lt;goodguys&gt;<br>
</tt>
</blockquote>

<p>
Qualquer pacote chegando em <tt>dc0</tt> terá seu endereço de origem
comparado aos endereços da tabela <tt>&lt;goodguys&gt;</tt>:
<ul>
<li>172.16.50.5 - o correspondente mais próximo é 172.16.0.0/16; o
    pacote corresponde à tabela e será aceito
<li>172.16.1.25 - a entrada mais próxima é !172.16.1.0/24; o pacote
    corresponde a uma entrada na tabela, mas essa entrada está negada
    (usa o modificador "!"); portanto o pacote não corresponde à tabela
    e será bloqueado
<li>172.16.1.100 - corresponde exatamente a 172.16.1.100; o pacote
    corresponde à tabela e será aceito
<li>10.1.4.55 - não corresponde a nenhuma entrada na tabela e, portanto,
    será bloqueado
</ul>

<p>
[<a href="macros.html">Anterior: Listas e Macros</a>]
[<a href="index.html">Conteúdo</a>]
[<a href="filter.html">Próximo: Filtragem de Pacotes</a>]

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[voltar]"></a>
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: tables.html,v 1.35 ]<br>
$Translation: tables.html,v 1.19 2013/12/01 12:44:33 egypcio Exp $<br>
-->
$OpenBSD: tables.html,v 1.19 2013/12/06 20:52:46 ajacoutot Exp $
</small>

</body>
</html>
@


1.19
log
@Sync with Steelix CVS
@
text
@d241 1
a241 1
$OpenBSD$
@


1.18
log
@Sync with Steelix CVS
@
text
@d76 1
a76 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+5.3"><tt>pf.conf</tt></a>
d78 1
a78 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.3"
d88 1
a88 1
    o <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.3"
d152 1
a152 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.3"
d178 1
a178 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.3"
d238 2
a239 2
Originally [OpenBSD: tables.html,v 1.34 ]<br>
$Translation: tables.html,v 1.18 2013/05/02 22:48:46 renato Exp $<br>
@


1.17
log
@Sync with Steelix CVS
@
text
@d76 1
a76 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+5.2"><tt>pf.conf</tt></a>
d78 1
a78 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.2"
d88 1
a88 1
    o <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.2"
d152 1
a152 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.2"
d178 1
a178 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.2"
d238 2
a239 2
Originally [OpenBSD: tables.html,v 1.33 ]<br>
$Translation: tables.html,v 1.17 2013/02/24 17:01:46 egypcio Exp $<br>
@


1.16
log
@Sync with Steelix CVS
@
text
@d144 1
a144 1
<a href="http://public.pacbell.net/dedicated/cidr.html">CIDR</a>,
d238 2
a239 2
Originally [OpenBSD: tables.html,v 1.32 ]<br>
$Translation: tables.html,v 1.16 2012/11/06 16:57:12 egypcio Exp $<br>
@


1.15
log
@Sync with Steelix CVS
@
text
@d76 1
a76 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+5.1"><tt>pf.conf</tt></a>
d78 1
a78 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.1"
d88 1
a88 1
    o <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.1"
d152 1
a152 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.1"
d178 1
a178 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.1"
d238 2
a239 2
Originally [OpenBSD: tables.html,v 1.31 ]<br>
$Translation: tables.html,v 1.15 2012/11/01 16:19:57 egypcio Exp $<br>
@


1.14
log
@Sync with Steelix CVS
@
text
@d76 1
a76 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+5.0"><tt>pf.conf</tt></a>
d78 1
a78 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.0"
d88 1
a88 1
    o <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.0"
d152 1
a152 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.0"
d178 1
a178 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.0"
d238 2
a239 2
Originally [OpenBSD: tables.html,v 1.30 ]<br>
$Translation: tables.html,v 1.14 2012/01/02 16:38:56 renato Exp $<br>
@


1.13
log
@Sync with Steelix CVS
@
text
@d76 1
a76 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+4.9"><tt>pf.conf</tt></a>
d78 1
a78 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.9"
d88 1
a88 1
    o <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.9"
d152 1
a152 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.9"
d178 1
a178 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.9"
d238 2
a239 2
Originally [OpenBSD: tables.html,v 1.29 ]<br>
$Translation: tables.html,v 1.13 2011/07/09 16:24:49 rodolfo Exp $<br>
@


1.12
log
@Sync with Steelix CVS
@
text
@d59 2
a60 2
Uma tabela é usada para armazenar endereços IPv4 e/ou IPv6. Pesquisas em
tabelas são muito rápidas, consumindo menos memória e tempo de
d65 1
a65 2
50 endereços.
Tabelas podem ser usadas nos seguintes caminhos:
d67 3
a69 7
<li>endereço de origem e/ou destino em regras de
<a href="filter.html">filtragem</a>,
<a href="nat.html">NAT</a> e
<a href="rdr.html">redirecionamento</a>.
<li>endereço de tradução em regras de <a href="nat.html">NAT</a>.
<li>endereço de redirecionamento em regras de <a href="rdr.html">
    redirecionamento</a>.
d76 1
a76 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+4.6"><tt>pf.conf</tt></a>
d78 1
a78 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.6"
d88 1
a88 1
    o <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.6"
d116 1
a116 1
(ou "não") desta forma:
d146 1
a146 1
Toda linha que começa com <tt>#</tt> é tratada como um comentário e é
d152 1
a152 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.6"
d178 1
a178 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.6"
d205 2
a206 2
block in on dc0 all<br>
pass &nbsp;in on dc0 from &lt;goodguys&gt; to any<br>
d238 2
a239 2
Originally [OpenBSD: tables.html,v 1.26 ]<br>
$Translation: tables.html,v 1.12 2009/10/18 16:52:52 alan Exp $<br>
@


1.11
log
@Sync with Steelix CVS
@
text
@d69 3
a71 2
<a href="filter.html">filtragem</a>, <a href="scrub.html">scrub</a>,
<a href="nat.html">NAT</a> e <a href="rdr.html">redirecionamento</a>.
d81 1
a81 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+4.5"><tt>pf.conf</tt></a>
d83 1
a83 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.5"
d93 1
a93 1
    o <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.5"
d157 1
a157 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.5"
d183 1
a183 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.5"
d243 2
a244 2
Originally [OpenBSD: tables.html,v 1.25 ]<br>
$Translation: tables.html,v 1.11 2009/10/13 19:12:28 alan Exp $<br>
@


1.10
log
@Sync with Steelix CVS
@
text
@d50 3
a52 3
<li><a href="#manip">Manipulando com <tt>pfctl</tt></a>
<li><a href="#addr">Especificando Endereços</a>
<li><a href="#match">Pesquisa de Endereços</a>
d59 8
a66 7
Uma tabela é usada para armazenar endereços IPv4 e/ou IPv6. Pesquisas
em tabelas são muito rápidas, consumindo menos memória e tempo de
processamento do que as <a href="macros.html#lists">listas</a>. Por
essa razão, uma tabela é ideal para armazenar grandes números de
endereços já que o tempo de pesquisa numa tabela com 50,000 endereços
é apenas ligeiramente maior do que para uma contendo 50 endereços.
Tabelas podem ser usadas das seguintes maneiras:
d71 2
a72 2
<li>endereços de tradução em regras <a href="nat.html">NAT</a>.
<li>endereços para redirecionamento em regras de <a href="rdr.html">
d74 2
a75 2
<li>endereços de destino em opções <tt>route-to</tt>, <tt>reply-to</tt>
    e <tt>dup-to</tt> nas regras de filtragem.
d79 3
a81 2
Tabelas são criadas tanto no
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+4.5"><tt>pf.conf</tt></a> ou utilizando o
d90 2
a91 2
<li><tt>const</tt> - o conteúdo da tabela não pode ser alterado, uma vez
    que ela tenha sido criada. Quando esse atributo não é especificado,
d94 4
a97 3
    tabela a qualquer momento, mesmo quando o sistema estiver usando
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=securelevel&amp;sektion=7">securelevel(7)</a>
    no nível dois ou maior.
d99 3
a101 3
    mesmo quando nenhuma regra faz referência a mesma. Sem esse
    atributo, o kernel removerá a tabela automaticamente quando a
    última regra referenciando a tabela for removida.
d120 1
a120 1
(ou "not") desta forma:
d128 2
a129 2
A tabela <tt>goodguys</tt> agora casará com todos endereços na rede
192.0.2.0/24 exceto 192.0.2.5.
d135 2
a136 2
Tabelas também podem ser populadas via arquivos texto contendo listas
de endereços IP e redes:
d150 2
a151 2
Qualquer linha começando com <tt>#</tt> é tratada como comentário e
é ignorada.
d154 1
a154 1
<h2>Manipulando com <tt>pfctl</tt></h2>
d157 3
a159 2
>pfctl(8)</a>. Por
exemplo, para adicionar entradas à tabela &lt;spammers&gt; criada acima:
d171 1
a171 1
para mostrar estatísticas para cada entrada da tabela. Para remover
d180 1
a180 1
Para mais informações sobre manipulação de tabelas com <tt>pfctl</tt>,
d186 6
a191 6
<h2>Especificando Endereços</h2>
Além de especificar hosts por endereços IP, eles também podem ser
referenciados pelo nome de host. Quando o nome de host é resolvido para
um endereço IP, todos os endereços IPv4 e IPv6 resultantes são
inseridos na tabela. Endereços IP também podem ser inseridos na
tabela especificando-se um nome de interface válido ou a
d196 3
a198 3
Uma limitação ao se especificar endereços é que <tt>0.0.0.0/0</tt> e
<tt>0/0</tt> não funcionarão em tabelas.
A alternativa é escrever esse endereço manualmente ou fazer uso de uma
d202 3
a204 4
<h2>Pesquisa de Endereços</h2>
Uma pesquisa de endereço numa tabela retornará a entrada que case
mais precisamente com o endereço. Isso permite a criação de tabelas
como:
d216 1
a216 1
comparado com a tabela <tt>&lt;goodguys&gt;</tt>:
d218 9
a226 5
<li>172.16.50.5 - a entrada mais próxima é 172.16.0.0/16; o pacote casa
    com a tabela e será aceito
<li>172.16.1.25 - a entrada mais próxima é !172.16.1.0/24; o pacote casa
    com uma entrada na tabela, mas essa entrada é uma negação
    (usa o modificador "!"); portanto o pacote não casa com a tabela e
a227 4
<li>172.16.1.100 - casa exatamente com 172.16.1.100; o pacote casa com a
    tabela e será aceito
<li>10.1.4.55 - não casa com nenhuma entrada na tabela, portanto será
    bloqueado
d243 1
a243 1
$Translation: tables.html,v 1.10 2009/05/10 17:44:16 alan Exp $<br>
@


1.9
log
@Sync with Steelix CVS
@
text
@d79 2
a80 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+4.4"><tt>pf.conf</tt></a> ou utilizando o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.4"
d90 1
a90 1
    o <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.4"
d153 1
a153 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.4"
d178 1
a178 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.4"
d190 1
a190 1
ou à máquina respectivamente (incluindo endereço de loopback).<br>
d239 2
a240 2
Originally [OpenBSD: tables.html,v 1.24 ]<br>
$Translation: tables.html,v 1.9 2009/03/11 00:52:57 dsantos Exp $<br>
@


1.8
log
@Sync with Steelix CVS
@
text
@d7 3
a9 3
<meta name="description" content="the OpenBSD FAQ page">
<meta name="keywords" content="openbsd,faq,pf">
<meta name="distribution" content="global">
d38 2
a39 2
[<a href="index.html">Conte&uacute;do</a>]
[<a href="filter.html">Pr&oacute;ximo: Filtragem de Pacotes</a>]
d46 1
a46 1
<h3>Conte&uacute;do</h3>
d48 2
a49 2
<li><a href="#intro">Introdu&ccedil;&atilde;o</a>
<li><a href="#config">Configura&ccedil;&atilde;o</a>
d51 2
a52 2
<li><a href="#addr">Especificando Endere&ccedil;os</a>
<li><a href="#match">Pesquisa de Endere&ccedil;os</a>
d58 8
a65 8
<h2>Introdu&ccedil;&atilde;o</h2>
Uma tabela &eacute; usada para armazenar endere&ccedil;os IPv4 e/ou IPv6. Pesquisas 
em tabelas s&atilde;o muito r&aacute;pidas, consumindo menos mem&oacute;ria e tempo de 
processamento do que as <a href="macros.html#lists">listas</a>. Por 
esta raz&atilde;o, uma tabela &eacute; ideal para armazenar grandes n&uacute;meros de 
endere&ccedil;os j&aacute; que o tempo de pesquisa numa tabela com 50,000 endere&ccedil;os 
&eacute; apenas ligeiramente maior do que para uma contendo 50 endere&ccedil;os. Tabelas podem 
ser usadas das seguintes maneiras:
d67 1
a67 1
<li>endere&ccedil;o de origem e/ou destino em regras de 
d70 5
a74 4
<li>endere&ccedil;os de tradu&ccedil;&atilde;o em regras <a href="nat.html">NAT</a>.
<li>endere&ccedil;os para redirecionamento em regras de <a href="rdr.html">redirecionamento</a>.
<li>endere&ccedil;os de destino em op&ccedil;&otilde;es <tt>route-to</tt>, <tt>reply-to</tt> e
<tt>dup-to</tt> nas regras de filtragem.
d78 3
a80 6
Tabelas s&atilde;o criadas tanto no 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+4.2">
<tt>pf.conf</tt></a> ou utilizando o 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.2"
d84 2
a85 2
<h2>Configura&ccedil;&atilde;o</h2>
No <tt>pf.conf</tt>, tabelas s&atilde;o criadas usando a diretiva <tt>table</tt>.
d88 11
a98 12
<li><tt>const</tt> - o conte&uacute;do da tabela n&atilde;o pode ser alterado, uma vez que 
ela tenha sido criada. Quando este atributo n&atilde;o &eacute; especificado, o 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.2"
>pfctl(8)</a> pode ser usado para adicionar ou remover endere&ccedil;os da tabela
a qualquer momento, mesmo quando o sistema estiver usando 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=securelevel&amp;sektion=7">securelevel(7)</a> no n&iacute;vel dois ou maior.
<li><tt>persist</tt> - faz com que o kernel mantenha a tabela em mem&oacute;ria
mesmo quando nenhuma regra fa&ccedil;a refer&ecirc;ncia a mesma. Sem esse atributo, o kernel 
remover&aacute; a tabela automaticamente quando a &uacute;ltima regra referenciando a tabela 
for removida. 
d116 2
a117 2
Endere&ccedil;os tamb&eacute;m podem ser especificados usando o modificador de nega&ccedil;&atilde;o
dessa forma:
d125 1
a125 1
A tabela <tt>goodguys</tt> agora casar&aacute; com todos endere&ccedil;os na rede 
d129 1
a129 1
Note que nomes de tabelas s&atilde;o sempre colocados entre &lt; &gt;. 
d132 2
a133 2
Tabelas tamb&eacute;m podem ser populadas via arquivos texto contendo listas 
de endere&ccedil;os IP e redes:
d143 3
a145 2
O arquivo <tt>/etc/spammers</tt> deve conter uma lista de endere&ccedil;os IP 
e/ou blocos de rede <a href="http://public.pacbell.net/dedicated/cidr.html">CIDR</a>, 
d147 2
a148 1
Qualquer linha come&ccedil;ando com <tt>#</tt> &eacute; tratado como coment&aacute;rio e ignorada.
d152 2
a153 3
Tabelas podem ser manipuladas em tempo real usando o 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.2"
d155 1
a155 1
exemplo, para adicionar entradas a tabela &lt;spammers&gt; criada acima:
d161 2
a162 2
Caso a tabela &lt;spammers&gt; ainda n&atilde;o exista ela ser&aacute; criada.
Para listar os endere&ccedil;os na tabela:
d166 3
a168 3
O argumento <tt>-v</tt> tamb&eacute;m pode ser usado com <tt>-Tshow</tt> 
para mostrar estat&iacute;sticas para cada entrada da tabela. Para remover 
endere&ccedil;os de uma tabela:
d176 3
a178 4
Para mais informa&ccedil;oes sobre manipula&ccedil;&atilde;o de tabelas com <tt>pfctl</tt>,
por favor leia a p&aacute;gina de manual 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.2"
d182 6
a187 6
<h2>Especificando Endere&ccedil;os</h2>
Al&eacute;m de especificar hosts por endere&ccedil;o, eles tamb&eacute;m podem ser 
referenciados pelo nome de host.  Quando o nome de host &eacute; resolvido para 
um endere&ccedil;o IP, todos os endere&ccedil;os IPv4 e IPv6 resultantes s&atilde;o 
inseridos na tabela. Endere&ccedil;os IP tamb&eacute;m podem ser inseridos na 
tabela especificando-se um nome de interface v&aacute;lido ou a 
d189 2
a190 2
A tabela conter&aacute; ent&atilde;o todos endere&ccedil;os IP atribu&iacute;dos aquela 
interface ou &agrave; m&aacute;quina respectivamente (incluindo endere&ccedil;o de loopback).<br>
d192 3
a194 3
Uma limita&ccedil;&atilde;o ao se especificar endere&ccedil;os &eacute; que <tt>0.0.0.0/0</tt> e
<tt>0/0</tt> n&atilde;o funcionar&atilde;o em tabelas.
A alternativa &eacute; escrever esse endere&ccedil;o manualmente ou fazer uso de uma 
d198 4
a201 3
<h2>Pesquisa de Endere&ccedil;os</h2>
Uma pesquisa de endere&ccedil;o numa tabela retornar&aacute; a entrada que combine mais
precisamente com o endere&ccedil;o. Isso permite a cria&ccedil;&atilde;o de tabelas como:
d212 1
a212 1
Qualquer pacote chegando em <tt>dc0</tt> ter&aacute; seu endere&ccedil;o de origem 
d215 6
a220 6
<li>172.16.50.5 - a entrada mais pr&oacute;xima &eacute; 172.16.0.0/16; o pacote 
casa com a tabela e ser&aacute; aceito
<li>172.16.1.25 -  a entrada mais pr&oacute;xima &eacute; !172.16.1.0/24; o 
pacote casa com uma entrada na tabela, mas essa entrada &eacute; uma nega&ccedil;&atilde;o
(usa o modificador "!"); portanto o pacote n&atilde;o casa com a tabela e 
ser&aacute; bloqueado
d222 3
a224 3
tabela e ser&aacute; aceito
<li>10.1.4.55 - n&atilde;o combina com nenhuma entrada na tabela, portanto 
ser&aacute; bloqueado
d229 2
a230 2
[<a href="index.html">Conte&uacute;do</a>]
[<a href="filter.html">Pr&oacute;ximo: Filtragem de Pacotes</a>]
d239 2
a240 2
Originally [OpenBSD: tables.html,v 1.22 ]<br>
$Translation: tables.html,v 1.8 2007/11/24 18:12:32 dsantos Exp $<br>
d242 1
a242 1
$OpenBSD$ 
@


1.7
log
@Sync with steelix translation CVS
@
text
@d79 2
a80 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+4.1"><tt>pf.conf</tt></a> ou utilizando o 
d82 1
a82 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.1"
d93 1
a93 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.1"
d155 1
a155 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.1"
d181 1
a181 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.1"
d241 2
a242 2
Originally [OpenBSD: tables.html,v 1.21 ]<br>
$Translation: tables.html,v 1.7 2007/06/18 22:09:39 dsantos Exp $<br>
@


1.6
log
@sync with steelix translation CVS
@
text
@d79 1
a79 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+4.0"><tt>pf.conf</tt></a> ou utilizando o 
d81 1
a81 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d92 1
a92 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d96 1
a96 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=securelevel&amp;sektion=7&amp;manpath=OpenBSD+4.0">securelevel(7)</a> no n&iacute;vel dois ou maior.
d154 1
a154 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d180 1
a180 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d240 2
a241 2
Originally [OpenBSD: tables.html,v 1.20 ]<br>
$Translation: tables.html,v 1.6 2006/12/28 18:29:29 dsantos Exp $<br>
@


1.5
log
@sync with steelix translation CVS
@
text
@d79 1
a79 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+3.9"><tt>pf.conf</tt></a> ou utilizando o 
d81 1
a81 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d92 1
a92 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d96 1
a96 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=securelevel&amp;sektion=7&amp;manpath=OpenBSD+3.9">securelevel(7)</a> no n&iacute;vel dois ou maior.
d154 1
a154 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d178 1
a178 1
por favor consulte
d180 1
a180 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d240 2
a241 2
Originally [OpenBSD: tables.html,v 1.17 ]<br>
$Translation: tables.html,v 1.5 2006/05/28 17:23:03 dsantos Exp $<br>
@


1.4
log
@sync with Steelix CVS
@
text
@d79 1
a79 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+3.8"><tt>pf.conf</tt></a> ou utilizando o 
d81 1
a81 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d92 1
a92 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d96 1
a96 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=securelevel&amp;sektion=7&amp;manpath=OpenBSD+3.8">securelevel(7)</a> no n&iacute;vel dois ou maior.
d154 1
a154 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d180 1
a180 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d240 2
a241 2
Originally [OpenBSD: tables.html,v 1.16 ]<br>
$Translation: tables.html,v 1.4 2005/12/22 21:21:45 dsantos Exp $<br>
@


1.3
log
@sync with steelix translation CVS
@
text
@d105 1
a105 1
</p><blockquote>
d120 1
a120 1
</p><blockquote>
d184 1
a184 1
</p><h2>Especificando Endere&ccedil;os</h2>
d241 1
a241 1
$Translation: tables.html,v 1.3 2005/11/15 14:36:42 dsantos Exp $<br>
@


1.2
log
@sync with Steelix CVS
@
text
@d78 4
a81 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+3.7"><tt>pf.conf</tt></a> ou utilizando o 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d91 2
a92 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d95 2
a96 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=securelevel&amp;sektion=7&amp;manpath=OpenBSD+3.7">securelevel(7)</a> no n&iacute;vel dois ou maior.
d153 2
a154 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d179 2
a180 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d239 4
a242 2
Originally [OpenBSD: tables.html,v 1.15 ]<br>
$Translation: tables.html,v 1.2 2005/05/27 15:11:33 dsantos Exp $<br>
@


1.1
log
@sync with steelix translation CVS
@
text
@d78 2
a79 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+3.6"><tt>pf.conf</tt></a> ou utilizando o 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.6"
d89 1
a89 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.6"
d92 1
a92 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=securelevel&amp;sektion=7&amp;manpath=OpenBSD+3.6">securelevel(7)</a> no n&iacute;vel dois ou maior.
d149 1
a149 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.6"
d174 1
a174 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.6"
d233 2
a234 2
Originally [OpenBSD: tables.html,v 1.14 ]<br>                                                      
$Translation: tables.html,v 1.1 2005/01/04 17:09:07 dsantos Exp $<br>                 
@

