head	1.20;
access;
symbols;
locks; strict;
comment	@# @;


1.20
date	2014.04.01.17.14.11;	author nick;	state dead;
branches;
next	1.19;

1.19
date	2013.12.06.20.52.46;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2013.05.03.05.53.48;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2013.01.13.15.45.16;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2009.10.19.09.39.58;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2009.10.17.15.58.26;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2009.05.16.08.59.12;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2009.03.16.20.24.23;	author tobias;	state Exp;
branches;
next	1.12;

1.12
date	2007.12.01.10.39.11;	author tobias;	state Exp;
branches;
next	1.11;

1.11
date	2007.06.20.09.29.47;	author jufi;	state Exp;
branches;
next	1.10;

1.10
date	2007.06.18.13.02.50;	author jufi;	state Exp;
branches;
next	1.9;

1.9
date	2006.12.29.12.56.48;	author jufi;	state Exp;
branches;
next	1.8;

1.8
date	2006.11.16.15.56.37;	author jufi;	state Exp;
branches;
next	1.7;

1.7
date	2006.06.26.18.32.12;	author jufi;	state Exp;
branches;
next	1.6;

1.6
date	2006.05.29.11.06.11;	author jufi;	state Exp;
branches;
next	1.5;

1.5
date	2005.12.24.10.04.36;	author saad;	state Exp;
branches;
next	1.4;

1.4
date	2005.11.18.20.48.47;	author jufi;	state Exp;
branches;
next	1.3;

1.3
date	2005.05.30.13.52.07;	author saad;	state Exp;
branches;
next	1.2;

1.2
date	2005.02.12.11.03.21;	author jufi;	state Exp;
branches;
next	1.1;

1.1
date	2005.01.06.20.03.30;	author jufi;	state Exp;
branches;
next	;


desc
@@


1.20
log
@
Abandon translations, per deraadt@@ and ajacoutot@@.
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF: Âncoras</title>
<link rev="made" href="mailto:www@@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq,pf">
<meta name="distribution"  content="global">
</head>

<!--
Copyright (c) 2003-2007 Joel Knight <enabled@@myrealbox.com>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<a href="../../../pt/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../../images/smalltitle.gif" border="0">
</a>
<p>
[<a href="options.html">Anterior: Opções em Tempo de Execução</a>]
[<a href="index.html">Conteúdo</a>]
[<a href="queueing.html">Próximo: Enfileiramento de Pacotes e
Priorização</a>]

<p>
<h1><font color="#e00000">PF: Âncoras</font></h1>

<hr>

<h3>Conteúdo</h3>
<ul>
<li><a href="#intro">Introdução</a>
<li><a href="#anchors">Âncoras</a>
<li><a href="#options">Opções de Âncoras</a>
<li><a href="#manip">Manipulação de Âncoras</a>
</ul>

<hr>

<a name="intro"></a>
<h2>Introdução</h2>
Além do conjunto de regras principal, o PF pode ainda avaliar
subconjuntos de regras.
Subconjuntos podem ser manipulados em tempo real através do uso do
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.4"
>pfctl(8)</a>, provendo um modo conveniente de alterar um conjunto de
regras ativo de forma dinâmica.
Assim como as <a href="tables.html">tabelas</a> são usadas para guardar
listas dinâmicas de endereços.
Um subconjunto de regras é incorporado ao conjunto de regras principais 
com a utilização de um <tt>anchor</tt>.

<p>
Âncoras podem ser aninhadas, o que permite ao subconjunto de regras ser
encadeado junto.
Regras de âncora são avaliadas de forma relativa à âncora que as
carregou. Por exemplo, regras de âncora no conjunto de regras principal
criam pontos de referência tendo o conjunto de regras principal como
pai, e regras de âncora carregadas de arquivos chamados através da
diretiva <tt>load anchor</tt> criam pontos de ancoramento tendo aquela
âncora como pai.

<a name="named"></a>
<a name="anchors"></a>
<h2>Âncoras</h2>
Uma âncora é uma coleção de regras, tabelas e outras âncoras 
que possuam nomes definidos. 
Quando o PF encontra uma regra <tt>anchor</tt> no conjunto de 
regras principal, ele avalia as regras contidas no ponto de 
ancoramento como se estivesse avaliando regras no conjunto principal.
O processamento então continua no conjunto principal, a menos que o
pacote corresponda a uma regra de filtragem que utilize a opção
<tt>quick</tt>, que, neste caso, será a última regra para o pacote, 
interrompendo a avaliação das demais regras tanto na âncora quanto 
no conjunto de regras principal.

<p>
Por exemplo:
<blockquote>
<tt>
ext_if = "fxp0"<br>
<br>
block on $ext_if<br>
pass &nbsp;out on $ext_if<br>
anchor goodguys
</tt>
</blockquote>

<p>
Esse conjunto de regras define uma política "negar por padrão" na
interface <tt>fxp0</tt> para o tráfego que entra e sai.
O tráfego de saída é aceito e uma regra de âncora é criada com o nome
<tt>goodguys</tt>.
Âncoras podem ter suas regras populadas três maneiras:
<ul>
<li>usando uma regra <tt>load</tt>
<li>usando o
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.4"
    >pfctl(8)</a>
<li>especificando regras na linha do conjunto de regras principal
</ul>

<p>
A regra <tt>load</tt> instrui o <tt>pfctl</tt> a inserir na âncora
especificada as regras lidas de um arquivo texto.
A regra <tt>load</tt> deve ser colocada depois da regra <tt>anchor</tt>.
Exemplo:
<blockquote>
<tt>
anchor goodguys<br>
load anchor goodguys:ssh from "/etc/anchor-goodguys-ssh"
</tt>
</blockquote>

<p>
Para adicionar regras a uma âncora usando o <tt>pfctl</tt>, o seguinte
tipo de comando pode ser usado:
<blockquote>
<tt>
# echo "pass in proto tcp from 192.0.2.3 to any port 22" \<br>
&nbsp;&nbsp;&nbsp;| pfctl -a goodguys -f -
</tt>
</blockquote>

<p>
As regras podem ser salvas e carregadas a partir de arquivos de texto:
<blockquote>
<tt>
# cat &gt;&gt; /etc/anchor-goodguys-www<br>
pass in proto tcp from 192.0.2.3 to any port 80<br>
pass in proto tcp from 192.0.2.4 to any port { 80 443 }<br>
<br>
# pfctl -a goodguys -f /etc/anchor-goodguys-www<br>
</tt>
</blockquote>

<p>
Para carregar regras diretamente do conjunto de regras principal,
coloque as regras de âncora em um bloco delimitado por chaves:

<blockquote>
<tt>
anchor "goodguys" { <br>
&nbsp;&nbsp;&nbsp;pass in proto tcp from 192.168.2.3 to port 22<br>
}
</tt>
</blockquote>

<p>
Âncoras na linha também podem conter mais âncoras.

<blockquote>
<tt>
allow = "{ 192.0.2.3 192.0.2.4 }" <br>
<br>
anchor "goodguys" { <br>
&nbsp;&nbsp;&nbsp;anchor { <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pass in proto tcp from 192.0.2.3 to port 80 <br>
&nbsp;&nbsp;&nbsp;} <br>
&nbsp;&nbsp;&nbsp;pass in proto tcp from $allow to port 22<br>
}
</tt>
</blockquote>

Com âncoras na linha, o nome da âncora torna-se opcional.
Note que a âncora aninhada no exemplo acima não tem um nome.
Também note que a macro <tt>$allow</tt> é criada fora da âncora (no
conjunto de regras principal) e é usada dentro da âncora.

<p>
Regras podem ser carregadas na âncora usando a mesma sintaxe e 
opções que regras carregadas no conjunto de regras principais.
Um problema, no entanto, é que, a não ser que você esteja usando âncoras
na linha, quaisquer <a href="macros.html">macros</a> usadas também devem
estar definidas dentro da âncora; macros definidas no conjunto de regras
pai <i>não</i> são visíveis na âncora.

<p>
Uma vez que âncoras podem ser aninhadas, é possível especificar que
todas as âncoras filho dentro de uma âncora especificada sejam
avaliadas:

<blockquote>
<tt>
anchor "spam/*"
</tt>
</blockquote>

<p>
Essa sintaxe faz com que cada regra dentro de cada âncora vinculada
à âncora <tt>spam</tt> seja avaliada.
As âncoras filho são avaliadas em ordem alfabética, mas não são
recursivas.
Âncoras sempre são avaliadas em relação à âncora em que estão definidas.

<p>
Cada âncora, bem como o conjunto de regras principal, existe
separadamente dos outros conjuntos de regras. Operações executadas
em um conjunto de regras, como a liberação de regras, não afetam regras
em outros conjuntos de regras. Além disso, remover um ponto de
ancoramento do conjunto de regras principal não causa a destruição da
âncora ou qualquer âncora filha vinculada a ela. Uma âncora não é
destruída até que todas as suas regras sejam liberadas usando o
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.4"
>pfctl(8)</a> e que não existam âncoras filha dentro da âncora.

<a name="options"></a>
<h2>Opções de Âncoras</h2>
Regras <tt>anchor</tt> podem opcionalmente especificar interface,
protocolo, endereço de origem e destino, etiqueta, etc., usando
a mesma sintaxe das outras regras. Quando tais informações
são dadas, regras <tt>anchor</tt> somente são processadas se o
pacote corresponder à definição da regra <tt>anchor</tt>.
Por exemplo:
<blockquote>
<tt>
ext_if = "fxp0"<br>
<br>
block on $ext_if<br>
pass &nbsp;out on $ext_if<br>
anchor ssh in on $ext_if proto tcp port 22<br>
</tt>
</blockquote>

<p>
As regras na âncora <tt>ssh</tt> somente são avaliadas em pacotes TCP
com destino a porta 22, vindos da interface <tt>fxp0</tt>.
As regras são então adicionadas à âncora (<tt>anchor</tt>) da seguinte
forma:
<blockquote>
<tt>
# echo "pass in from 192.0.2.10 to any" | pfctl -a ssh -f -
</tt>
</blockquote>

<p>
Portanto, mesmo que a regra de filtragem não especifique uma interface,
protocolo ou porta, a máquina 192.0.2.10 só pode se conectar via SSH por
causa da definição na regra <tt>anchor</tt>.

<p>
A mesma sintaxe pode ser aplicada em âncoras na linha.

<blockquote>
<tt>
allow = "{ 192.0.2.3 192.0.2.4 }" <br>
<br>
anchor "goodguys" in proto tcp { <br>
&nbsp;&nbsp;&nbsp;anchor proto tcp to port 80 { <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pass from 192.0.2.3 <br>
&nbsp;&nbsp;&nbsp;} <br>
&nbsp;&nbsp;&nbsp;anchor proto tcp to port 22 { <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pass from $allow<br>
&nbsp;&nbsp;&nbsp;} <br>
}
</tt>
</blockquote>


<a name="manip"></a>
<h2>Manipulação de Âncoras</h2>
A manipulação de âncoras é feita via <tt>pfctl</tt>.
Ele pode ser usado para adicionar ou remover regras em uma âncora sem
precisar recarregar o conjunto de regras principal.

<p>
Para listar todas as regras na âncora nomeada <tt>ssh</tt>:
<blockquote>
<tt>
# pfctl -a ssh -s rules
</tt>
</blockquote>

<p>
Para liberar todas as regras da mesma âncora:
<blockquote>
<tt>
# pfctl -a ssh -F rules
</tt>
</blockquote>

<p>
Para uma listagem completa de comandos, por favor consulte
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.4"
>pfctl(8)</a>.

<p>
[<a href="options.html">Anterior: Opções em Tempo de Execução</a>]
[<a href="index.html">Conteúdo</a>]
[<a href="queueing.html">Próximo: Enfileiramento de Pacotes e
Priorização</a>]

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[voltar]"></a>
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: anchors.html,v 1.35 ]<br>
$Translation: anchors.html,v 1.20 2013/12/01 12:44:32 egypcio Exp $<br>
-->
$OpenBSD: anchors.html,v 1.19 2013/12/06 20:52:46 ajacoutot Exp $
</small>

</body>
</html>
@


1.19
log
@Sync with Steelix CVS
@
text
@d321 1
a321 1
$OpenBSD$
@


1.18
log
@Sync with Steelix CVS
@
text
@d63 1
a63 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.3"
d116 1
a116 1
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.3"
d222 1
a222 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.3"
d302 1
a302 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.3"
d318 2
a319 2
Originally [OpenBSD: anchors.html,v 1.34 ]<br>
$Translation: anchors.html,v 1.19 2013/05/02 22:48:46 renato Exp $<br>
@


1.17
log
@Sync with Steelix CVS
@
text
@d63 1
a63 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.2"
d116 1
a116 1
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.2"
d222 1
a222 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.2"
d302 1
a302 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.2"
d318 2
a319 2
Originally [OpenBSD: anchors.html,v 1.33 ]<br>
$Translation: anchors.html,v 1.18 2013/01/13 15:21:54 egypcio Exp $<br>
@


1.16
log
@Sync with Steelix CVS
@
text
@d63 1
a63 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.6"
d67 3
a69 3
listas dinâmicas de endereços, um subconjunto de regras é usado para
guardar conjuntos dinâmicos de regras de filtragem, <tt>nat</tt>,
<tt>rdr</tt> e <tt>binat</tt>.
a71 14
Subconjuntos de regras são vinculados ao conjunto principal
utilizando-se âncoras. Existem quatro tipos de regras <tt>anchor</tt>:
<ul>
<li><tt>anchor <i>nome</i></tt> - avalia todas as regras de
    <a href="filter.html">filtragem</a> na âncora <i><tt>nome</tt></i>
<li><tt>binat-anchor <i>nome</i></tt> - avalia todas as regras de
    <a href="nat.html#binat"><tt>binat</tt></a> na âncora
    <i><tt>nome</tt></i>
<li><tt>nat-anchor <i>nome</i></tt> - avalia todas as regras de
    <a href="nat.html"><tt>nat</tt></a> na âncora <i><tt>nome</tt></i>
<li><tt>rdr-anchor <i>nome</i></tt> - avalia todas as regras de
    <a href="rdr.html"><tt>rdr</tt></a> na âncora <i><tt>nome</tt></i>
</ul>

d84 5
a88 5
Uma âncora é uma coleção de regras de filtragem e/ou tradução, tabelas
e outras âncoras que possuam nomes definidos. Quando o PF encontra uma
regra <tt>anchor</tt> no conjunto de regras principal, ele avalia as
regras contidas no ponto de ancoramento como se estivesse avaliando
regras no conjunto principal.
d91 3
a93 3
<tt>quick</tt> ou a uma regra de tradução dentro da âncora, que nesse
caso será a última regra para o pacote, interrompendo a avaliação das
demais regras tanto na âncora quanto no conjunto de regras principal.
d101 2
a102 2
block on $ext_if all<br>
pass &nbsp;out on $ext_if all keep state<br>
d112 1
a112 1
Regras podem ser inseridas na âncora de três maneiras:
d116 1
a116 1
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.6"
d189 2
a190 3
Regras de filtragem e tradução podem ser carregadas na âncora usando a
mesma sintaxe e opções que regras carregadas no conjunto de regras
principal.
d222 1
a222 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.6"
d229 1
a229 1
a mesma sintaxe das regras de filtragem. Quando tais informações
d237 3
a239 3
block on $ext_if all<br>
pass &nbsp;out on $ext_if all keep state<br>
anchor ssh in on $ext_if proto tcp from any to any port 22<br>
d293 1
a293 1
Para liberar todas as regras de filtragem da mesma âncora:
d302 1
a302 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.6"
d318 2
a319 2
Originally [OpenBSD: anchors.html,v 1.27 ]<br>
$Translation: anchors.html,v 1.17 2009/10/18 16:52:52 alan Exp $<br>
@


1.15
log
@Sync with Steelix CVS
@
text
@d38 1
a38 1
[<a href="scrub.html">Anterior: Scrub (Normalização de Pacotes)</a>]
d63 1
a63 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.5"
d130 1
a130 1
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.5"
d237 1
a237 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.5"
d317 1
a317 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.5"
d321 1
a321 1
[<a href="scrub.html">Anterior: Scrub (Normalização de Pacotes)</a>]
d333 2
a334 2
Originally [OpenBSD: anchors.html,v 1.26 ]<br>
$Translation: anchors.html,v 1.16 2009/10/13 19:12:27 alan Exp $<br>
@


1.14
log
@Sync with Steelix CVS
@
text
@d40 2
a41 1
[<a href="queueing.html">Próximo: Fila de Pacotes e Priorização</a>]
d53 1
a53 1
<li><a href="#manip">Manipulando Âncoras</a>
d60 2
a61 2
Além das regras padrões, o PF pode ainda avaliar subconjuntos de
regras.
d65 5
a69 5
regras de forma dinâmica.
Assim como as <a href="tables.html">tabelas</a>
são usadas para guardar listas dinâmicas de endereços, um subconjunto
de regras é usado para guardar conjuntos dinâmicos de regras de
filtragem <tt>nat</tt>, <tt>rdr</tt> e <tt>binat</tt>.
d73 1
a73 2
utilizando-se âncoras. Existem quatro tipos de regras
<tt>anchor</tt>:
d77 7
a83 7
<li><tt>binat-anchor <i>nome</i></tt> - avalia todas regras
    <a href="nat.html#binat"><tt>binat</tt></a>
    na âncora <i><tt>nome</tt></i>
<li><tt>nat-anchor <i>nome</i></tt> - avalia todas regras <a href="nat.html">
    <tt>nat</tt></a> na âncora <i><tt>nome</tt></i>
<li><tt>rdr-anchor <i>nome</i></tt> - avalia todas regras <a href="rdr.html">
    <tt>rdr</tt></a> na âncora <i><tt>nome</tt></i>
d86 8
a93 8
Âncoras podem ser aninhadas, o que permite ao subconjunto de regras
ser encadeado junto.
Regras anchor serão avaliadas de forma relativa à âncora que as
carregou. Por exemplo, regras anchor no conjunto de regras principal
criarão pontos de referência tendo o conjunto de regras principal
como pai, e regras anchor carregadas de arquivos chamados através
da diretiva <tt>load anchor</tt> criarão pontos de ancoramento
tendo aquela âncora como pai.
d98 1
a98 1
Uma âncora é uma coleção de regras de filtragem e/ou tradução, tabelas,
d103 5
a107 5
O processamento então continuará no conjunto principal a menos que
o pacote case com uma regra de filtragem que utilize a opção
<tt>quick</tt> ou com uma regra de tradução dentro da âncora, que nesse
caso será a última regra para o pacote, abortando a avaliação das demais
regras tanto na âncora quanto no conjunto de regras principal.
d122 5
a126 5
Essas regras definem uma política "negar por padrão" na interface
<tt>fxp0</tt> para tráfego entrando e saindo. O tráfego de saída
é aceito e uma regra anchor é
criada com nome <tt>goodguys</tt>. Regras podem ser inseridas na
âncora de três maneiras:
d132 1
a132 1
<li>especificando regras inline do conjunto principal
d136 2
a137 2
A regra <tt>load</tt> instrui o <tt>pfctl</tt> a inserir
na âncora especificada as regras lidas de um arquivo texto.
d148 2
a149 2
Para adicionar regras a uma âncora usando o <tt>pfctl</tt>, o
seguinte tipo de comando pode ser usado:
d158 1
a158 1
Regras podem ser salvas e carregadas a partir de arquivos de texto:
d170 2
a171 2
Para carregar regras diretamente do conjunto principal, coloque
as regras anchor em um bloco delimitado por chaves:
d182 1
a182 1
Âncoras "inline" também podem conter mais âncoras.
d197 1
a197 1
Com âncoras inline, o nome da âncora se torna opcional.
d199 2
a200 2
Também note que a macro <tt>$allow</tt> é criada fora da âncora
(no conjunto de regras principal) e é usada dentro da âncora.
d203 7
a209 7
Regras de filtragem e tradução podem ser carregadas na âncora
usando a mesma sintaxe e opções que regras carregadas no conjunto
principal. Uma diferença, porém, é que, a não ser que você
esteja usando âncoras inline,
quaisquer <a href="macros.html">macros</a> usadas também devem estar
definidas dentro da âncora; macros definidas no conjunto de regras pai
<i>não</i> são visíveis na âncora.
d223 1
a223 1
Essa sintaxe faz com que cada regra dentro de cada âncora anexada
d225 1
a225 1
As âncoras filho serão avaliadas em ordem alfabética, mas não são
d227 1
a227 2
Âncoras sempre são avaliadas em relação à âncora em que estão
definidas.
d231 6
a236 6
separadamente dos outros subconjuntos de regras. Operações executadas
num grupo de regras, como remover as regras, não afetam regras agrupadas
em outros subconjuntos. Além disso, remover um ponto de ancoramento
do conjunto de regras principal não causa destruição da âncora
ou qualquer âncora filho vinculado a ela. Uma âncora não é destruída
até que seja removida usando o
d238 1
a238 1
>pfctl(8)</a> e que não tenha âncoras filho dentro da âncora.
d243 1
a243 1
protocolo, endereço de origem e destino, marcações, etc., usando
d246 1
a246 1
pacote casar com a definição da regra <tt>anchor</tt>.
d259 4
a262 4
As regras na âncora <tt>ssh</tt> somente são avaliadas para pacotes
TCP com destino a porta 22, vindos da interface <tt>fxp0</tt>.
As regras são então adicionadas à âncora (<tt>anchor</tt>),
da seguinte forma:
d271 2
a272 2
protocolo ou porta, o host 192.0.2.10 só poderá se conectar com SSH
por causa da definição na regra <tt>anchor</tt>.
d275 1
a275 1
A mesma sintaxe pode ser aplicada para âncoras inline.
d294 1
a294 1
<h2>Manipulando Âncoras</h2>
d296 1
a296 1
Ele pode ser usado para adicionar ou remover regras numa âncora sem
d308 1
a308 1
Para remover todas as regras de filtragem da mesma âncora:
d323 2
a324 1
[<a href="queueing.html">Próximo: Fila de Pacotes e Priorização</a>]
d334 1
a334 1
$Translation: anchors.html,v 1.15 2009/05/12 00:31:15 alan Exp $<br>
@


1.13
log
@Sync with Steelix CVS
@
text
@d62 1
a62 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.4"
d130 1
a130 1
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.4"
d171 1
a171 1
as regras <tt>anchor</tt> em um bloco delimitado por chaves:
d238 1
a238 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.4"
d318 1
a318 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.4"
d333 2
a334 2
Originally [OpenBSD: anchors.html,v 1.25 ]<br>
$Translation: anchors.html,v 1.13 2009/03/11 00:52:55 dsantos Exp $<br>
@


1.12
log
@Sync with Steelix CVS
@
text
@d4 1
a4 1
<title>PF: &Acirc;ncoras</title>
d8 3
a10 3
<meta name="description" content="the OpenBSD FAQ page">
<meta name="keywords" content="openbsd,faq,pf">
<meta name="distribution" content="global">
d38 3
a40 3
[<a href="scrub.html">Anterior: Scrub (Normaliza&ccedil;&atilde;o de Pacotes)</a>]
[<a href="index.html">Conte&uacute;do</a>]
[<a href="queueing.html">Pr&oacute;ximo: Fila de Pacotes e Prioriza&ccedil;&atilde;o</a>]
d43 1
a43 1
<h1><font color="#e00000">PF: &Acirc;ncoras</font></h1>
d47 1
a47 1
<h3>Conte&uacute;do</h3>
d49 4
a52 4
<li><a href="#intro">Introdu&ccedil;&atilde;o</a>
<li><a href="#anchors">&Acirc;ncoras</a>
<li><a href="#options">Op&ccedil;&otilde;es de &Acirc;ncoras</a>
<li><a href="#manip">Manipulando &Acirc;ncoras</a>
d58 16
a73 18
<h2>Introdu&ccedil;&atilde;o</h2>
Al&eacute;m das regras padr&otilde;es, o PF pode ainda avaliar 
subconjuntos de regras.
Subconjuntos podem ser manipudados em tempo real atrav&eacute;s do uso do 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.2"
>pfctl(8)</a>, provendo um modo conveniente de alterar um conjunto de 
regras de forma din&acirc;mica.
Assim como as <a href="tables.html">tabelas</a> 
s&atilde;o usadas para guardar listas din&acirc;micas de 
endere&ccedil;os, um subconjunto de regras &eacute; usado para guardar 
conjuntos din&acirc;micos de regras de filtragem
<tt>nat</tt>, <tt>rdr</tt> e
<tt>binat</tt>.

<p>
Subconjuntos de regras s&atilde;o vinculados ao conjunto principal 
utilizando-se de &acirc;ncoras. Existem quatro tipos de regras <tt>anchor</tt>:
d75 5
a79 5
<li><tt>anchor <i>nome</i></tt> - avalia todas as regras de 
<a href="filter.html">filtragem</a> na &acirc;ncora <i><tt>nome</tt></i>
<li><tt>binat-anchor <i>nome</i></tt> - avalia todas regras 
<a href="nat.html#binat"><tt>binat</tt></a> 
na &acirc;ncora <i><tt>nome</tt></i>
d81 1
a81 1
<tt>nat</tt></a> na &acirc;ncora <i><tt>nome</tt></i>
d83 1
a83 1
<tt>rdr</tt></a> na &acirc;ncora <i><tt>nome</tt></i>
d86 8
a93 8
&Acirc;ncoras podem ser aninhadas, o que permite ao subconjunto de regras 
ser encadeado junto. 
Regras anchor ser&atilde;o avaliadas de forma relativa &agrave; 
&acirc;ncora que as carregou. Por exemplo, regras anchor no conjunto 
de regras principal criar&atilde;o pontos de refer&ecirc;ncia tendo o 
conjunto de regras principal como pai, e regras anchor carregadas de 
arquivos chamados atrav&eacute;s da diretiva <tt>load anchor</tt> 
criar&atilde;o pontos de ancoramento tendo esta &acirc;ncora como pai.
d95 1
a95 1
<a name="named"></a> 
d97 11
a107 13
<h2>&Acirc;ncoras</h2>
Uma &acirc;ncora &eacute; uma cole&ccedil;&atilde;o de regras de 
filtragem e/ou tradu&ccedil;&atilde;o, tabelas, e outras &acirc;ncoras 
que possuam nomes definidos. Quando o PF encontra uma regra 
<tt>anchor</tt> no arquivo principal, ele avalia as regras contidas no 
ponto de ancoramento como se estivesse avaliando regras no arquivo 
principal.
O processamento ent&atilde;o continuar&aacute; no conjunto principal a 
n&atilde;o ser que o pacote case com uma regra de filtragem que utilize a 
op&ccedil;&atilde;o <tt>quick</tt> ou com uma regra de 
tradu&ccedil;&atilde;o na &acirc;ncora, que nesse caso ser&aacute; a 
&uacute;ltima regra para o pacote, abortando a avalia&ccedil;&atilde;o 
das demais regras tanto no arquivo principal quanto na &acirc;ncora.
d122 5
a126 5
Estas regras definem uma pol&iacute;tica "negar por padr&atilde;o" na 
interface <tt>fxp0</tt> para tr&aacute;fego entrando e saindo. O 
tr&aacute;fego de sa&iacute;da &eacute; aceito e uma regra anchor &eacute; 
criada com nome <tt>goodguys</tt>. Regras podem ser inseridas na 
&acirc;ncora de tr&ecirc;s maneiras:
d129 3
a131 4
<li>usando 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.2"
>pfctl(8)</a>
d136 2
a137 2
<tt>load</tt> instrui o <tt>pfctl</tt> a inserir,  
na &acirc;ncora especificada, as regras carregadas de um arquivo texto.
d148 2
a149 2
Para adicionar regras a uma &acirc;ncora usando o <tt>pfctl</tt>, o 
seguinte tipo de comando pode ser usado: 
d158 1
a158 1
Regras podem ser salvas e carregadas de arquivos texto:
d169 1
d171 1
a171 1
as regras <tt>anchor</tt> em um bloco delimitado por par&ecirc;nteses:
d182 1
a182 1
Regras <tt>anchor</tt> inline tamb&eacute;m podem conter mais &acirc;ncoras.
d197 18
a214 18
Com &acirc;ncoras inline, o nome da &acirc;ncora se torna opcional.
Note que a &acirc;ncora aninhada no exemplo acima n&atilde;o tem um nome.
Tamb&eacute;m note que a macro <tt>$allow</tt> &eacute; criada fora da 
&acirc;ncora (no conjunto principal) e &eacute; usada dentro da &acirc;ncora.

<p>
Regras de filtragem e tradu&ccedil;&atilde;o podem ser carregadas no 
conjunto principal usando-se a mesma sintaxe e op&ccedil;&otilde;es 
que as regras do arquivo principal. Uma diferen&ccedil;a por&eacute;m, 
&eacute; que, a n&atilde;o ser que esteja usando &acirc;ncoras inline, 
as <a href="macros.html">macros</a> usadas tamb&eacute;m 
devem estar definidas na &acirc;ncora, macros definidas no arquivo pai 
<i>n&atilde;o</i> s&atilde;o vis&iacute;veis na &acirc;ncora.

<p>
Uma vez que &acirc;ncoras podem ser aninhadas, &eacute; poss&iacute;vel
especificar que todas as &acirc;ncoras filho dentro de uma &acirc;ncora
especificada sejam avaliadas:
d220 1
a220 1
</blockquote> 
d223 17
a239 20
Esta sintaxe faz com que cada regra dentro de cada &acirc;ncora anexada
a &acirc;ncora <tt>spam</tt> seja avaliada.
As &acirc;ncoras filho ser&atilde;o avaliadas em ordem alfab&eacute;tica 
mas n&atilde;o s&atilde;o recursivas.
&Acirc;ncoras s&atilde;o avaliadas sempre relativamente a &acirc;ncora 
em que est&atilde;o definidas.  

<p>
Cada &acirc;ncora, bem como o arquivo principal, existem separados 
dos outros subconjuntos de regras. Opera&ccedil;&otilde;es executadas 
num grupo de regras, como remover as regras, n&atilde;o afetam regras 
agrupadas em outros subconjuntos.  Al&eacute;m disso, remover um ponto 
de ancoramento do conjunto principal de regras n&atilde;o causa 
destrui&ccedil;&atilde;o da &acirc;ncora ou qualquer &acirc;ncora filho 
v&iacute;nculado a ela. Uma &acirc;ncora n&atilde;o &eacute; 
destru&iacute;da at&eacute; que seja removida usando 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.2"
>pfctl(8)</a> e que n&atilde;o tenha &acirc;ncoras filho dentro da 
&acirc;ncora. 
d242 6
a247 7
<h2>Op&ccedil;&otilde;es de &Acirc;ncoras</h2>
Regras <tt>anchor</tt> podem opcionalmente especificar interface, 
protocolo, endere&ccedil;o de origem e destino, 
marca&ccedil;&otilde;es, etc., usando a mesma sintaxe das regras de 
filtragem. Quando estas op&ccedil;&otilde;es forem usadas,
regras <tt>anchor</tt> somente s&atilde;o processadas caso o pacote case
com a defini&ccedil;&atilde;o da regra <tt>anchor</tt>.
d260 4
a263 4
Regras na &acirc;ncora <tt>ssh</tt> somente s&atilde;o avaliadas para 
pacotes TCP com destino a porta 22 vindos da interface <tt>fxp0</tt>. 
Regras s&atilde;o ent&atilde;o adicionadas &agrave; <tt>anchor</tt> 
assim:
d271 3
a273 4
Portando, mesmo que a regra de filtragem n&atilde;o especifique 
interface, protocolo ou porta, o host 192.0.2.10 s&oacute; 
poder&aacute; se conectar com SSH por causa da defini&ccedil;&atilde;o 
na regra <tt>anchor</tt>.
d276 1
a276 1
A mesma sintaxe pode ser aplicada para &acirc;ncoras inline.
d295 4
a298 4
<h2>Manipulando &Acirc;ncoras</h2>
A manipula&ccedil;ao de &acirc;ncoras &eacute; feita via <tt>pfctl</tt>. 
Ele pode ser usado para adicionar ou remover regras numa &acirc;ncora 
sem precisar recarregar o arquivo principal.
d301 1
a301 1
Para listar todas regras na &acirc;ncora nomeada <tt>ssh</tt>: 
d309 1
a309 1
Para remover todas regras de filtragem da mesma &acirc;ncora:
d318 1
a318 2
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.2"
d322 3
a324 3
[<a href="scrub.html">Anterior: Scrub (Normaliza&ccedil;&atilde;o de Pacotes)</a>]
[<a href="index.html">Conte&uacute;do</a>]
[<a href="queueing.html">Pr&oacute;ximo: Fila de Pacotes e Prioriza&ccedil;&atilde;o</a>]
d333 2
a334 2
Originally [OpenBSD: anchors.html,v 1.23 ]<br>
$Translation: anchors.html,v 1.12 2007/11/24 03:02:04 dsantos Exp $<br>
d336 1
a336 1
$OpenBSD$ 
@


1.11
log
@Sync with steelix translation CVS
@
text
@d63 1
a63 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.1"
d135 1
a135 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.1"
d244 1
a244 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.1"
d328 1
a328 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.1"
d343 2
a344 2
Originally [OpenBSD: anchors.html,v 1.22 ]<br>
$Translation: anchors.html,v 1.11 2007/06/18 22:09:39 dsantos Exp $<br>
@


1.10
log
@Sycn with steelix translation CVS
@
text
@d59 1
a59 1
Al&eacute;m das regras padr&atilde;o, o PF pode ainda avaliar 
d66 3
a68 3
Assim como <a href="tables.html">tabelas</a> 
s&atilde;o udadas para guardar listas din&acirc;micas de 
endere&ccedil;o, um subconjunto de regras &eacute; usado para guardar 
d88 1
a88 1
&Acirc;ncoras podem ser aninhadas o que permite ao subconjunto de regras 
d107 2
a108 2
n&atilde;o ser que o pacote case uma regra de filtragem que utilize a 
op&ccedil;&atilde;o <tt>quick</tt> ou uma regra de 
d128 1
a128 1
tr&aacute;fego &eacute; ent&atilde;o aceito e uma regra anchor &eacute; 
d153 1
a153 1
Para adicionar regras a uma &acirc;ncora usando <tt>pfctl</tt>, o 
d203 2
a204 2
Tamb&eacute;m note que a macro <tt>$allow</tt> &eacute; criada fora da &acirc;ncora
(no conjunto principal) e &eacute; usada dentro da &acirc;ncora.
d239 1
a239 1
de &acirc;ncoramento do conjunto principal de regras n&atilde;o causa 
d241 1
a241 1
v&igrave;nculado a ela. Uma &acirc;ncora n&atilde;o &eacute; 
d344 1
a344 1
$Translation: anchors.html,v 1.10 2007/06/13 19:46:24 dsantos Exp $<br>
@


1.9
log
@sync with steelix translation CVS
@
text
@d14 1
a14 1
Copyright (c) 2003-2005 Joel Knight <enabled@@myrealbox.com>
d63 1
a63 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d77 2
a78 2
<li><tt>anchor <i>nome</i></tt> - avalia todas as regras de <a href="filter.html">
filtragem</a> na &acirc;ncora <i><tt>nome</tt></i>
d130 1
a130 1
&acirc;ncora de duas maneiras:
d135 1
a135 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d137 1
d141 2
a142 2
<tt>load</tt> instrui <tt>pfctl</tt> a inserir  
na &acirc;ncora especificada regras carregadas de um arquivo texto.
d174 32
d210 2
a211 1
&eacute; que as <a href="macros.html">macros</a> usadas tamb&eacute;m 
d244 3
a246 2
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.0"
>pfctl(8)</a> e que n&atilde;o tenha &acirc;ncoras filho dentro da &acirc;ncora. 
d284 19
d328 1
a328 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d343 2
a344 2
Originally [OpenBSD: anchors.html,v 1.20 ]<br>
$Translation: anchors.html,v 1.9 2006/12/28 18:29:28 dsantos Exp $<br>
@


1.8
log
@sync with steelix translation CVS
@
text
@d59 2
a60 1
Al&eacute;m das regras padr&atilde;o, o PF pode ainda avaliar subconjuntos de regras.
d67 3
a69 2
s&atilde;o udadas para guardar listas din&acirc;micas de endere&ccedil;o, um subconjunto de regras 
&eacute; usado para guardar conjuntos din&acirc;micos de regras de filtragem
d74 2
a75 2
Subconjuntos de regras s&atilde;o vinculados ao conjunto principal utilizando-se de 
&acirc;ncoras. Existem quatro tipos de regras <tt>anchor</tt>:
d88 1
a88 1
&Acirc;ncoras podem ser aninhadas o que permite ao subconjunto de regras  
d90 6
a95 6
Regras anchor ser&atilde;o avaliadas de forma relativa &agrave; &acirc;ncora que 
as carregou. Por exemplo, regras anchor no conjunto de regras 
principal criar&atilde;o pontos de refer&ecirc;ncia tendo o conjunto de regras 
principal como pai, e regras anchor carregadas de arquivos 
chamados atrav&eacute;s da diretiva <tt>load anchor</tt> criar&atilde;o pontos de 
ancoramento tendo esta &acirc;ncora como pai.
d100 12
a111 10
Uma &acirc;ncora &eacute; uma cole&ccedil;&atilde;o de regras de filtragem e/ou 
tradu&ccedil;&atilde;o, tabelas, e outras &acirc;ncoras que possuam nomes definidos.
Quando o PF encontra uma regra <tt>anchor</tt> no arquivo principal, 
ele avalia as regras contidas no ponto de ancoramento como se 
estivesse avaliando regras no arquivo principal.
O processamento ent&atilde;o continuar&aacute; no conjunto principal a n&atilde;o ser que 
o pacote case uma regra de filtragem que utilize a op&ccedil;&atilde;o <tt>quick</tt> 
ou uma regra de tradu&ccedil;&atilde;o na &acirc;ncora, que nesse caso ser&aacute; a 
&uacute;ltima regra para o pacote, abortando a avalia&ccedil;&atilde;o das demais regras tanto 
no arquivo principal quanto na &acirc;ncora.
d126 4
a129 3
Estas regras definem uma pol&iacute;tica "negar por padr&atilde;o" na interface <tt>fxp0</tt> 
para tr&aacute;fego entrando e saindo. O tr&aacute;fego &eacute; ent&atilde;o aceito e uma regra 
anchor &eacute; criada com nome <tt>goodguys</tt>. Regras podem ser inseridas na 
d152 2
a153 2
Para adicionar regras a uma &acirc;ncora usando <tt>pfctl</tt>, o seguinte tipo
de comando pode ser usado: 
d174 6
a179 6
Regras de filtragem e tradu&ccedil;&atilde;o podem ser carregadas no conjunto principal 
usando-se a mesma sintaxe e op&ccedil;&otilde;es que as regras do arquivo principal.
Uma diferen&ccedil;a por&eacute;m, &eacute; que as 
<a href="macros.html">macros</a> usadas tamb&eacute;m devem estar definidas na 
&acirc;ncora, macros definidas no arquivo pai <i>n&atilde;o</i> s&atilde;o 
vis&iacute;veis na &acirc;ncora.
d195 4
a198 4
As &acirc;ncoras filho ser&atilde;o avaliadas em ordem alfab&eacute;tica mas
n&atilde;o s&atilde;o recursivas.
&Acirc;ncoras s&atilde;o avaliadas sempre relativamente a &acirc;ncora em
que est&atilde;o definidas.  
d202 6
a207 5
dos outros subconjuntos de regras. Opera&ccedil;&otilde;es executadas num grupo de 
regras, como remover as regras, n&atilde;o afetam regras agrupadas em outros 
subconjuntos.  Al&eacute;m disso, remover um ponto de &acirc;ncoramento do conjunto 
principal de regras n&atilde;o causa destrui&ccedil;&atilde;o da &acirc;ncora ou qualquer 
&acirc;ncora filho v&igrave;nculado a ela. Uma &acirc;ncora n&atilde;o &eacute; 
d220 1
a220 1
com a defini&ccedil;&atilde;o da regra.
d233 4
a236 3
Regras na &acirc;ncora <tt>ssh</tt> somente s&atilde;o avaliadas para pacotes 
TCP com destino a porta 22 vindos da interface <tt>fxp0</tt>. 
Regras s&atilde;o ent&atilde;o adicionadas &agrave; <tt>anchor</tt> assim:
d244 4
a247 3
Portando, mesmo que a regra de filtragem n&atilde;o especifique interface, 
protocolo ou porta, o host 192.0.2.10 s&oacute; poder&aacute; se conectar com SSH 
por causa da defini&ccedil;&atilde;o na regra <tt>anchor</tt>.
d251 3
a253 3
A manipula&ccedil;ao de &acirc;ncoras &eacute; feita via <tt>pfctl</tt>. Ele pode ser 
usado para adicionar ou remover regras numa &acirc;ncora sem precisar 
recarregar o arquivo principal.
d290 1
a290 1
$Translation: anchors.html,v 1.8 2006/11/15 23:11:15 dsantos Exp $<br>
@


1.7
log
@sync with steelix translation CVS
@
text
@d62 1
a62 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d130 1
a130 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d204 1
a204 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d266 1
a266 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d281 2
a282 2
Originally [OpenBSD: anchors.html,v 1.19 ]<br>
$Translation: anchors.html,v 1.7 2006/06/23 15:10:21 dsantos Exp $<br>
@


1.6
log
@sync with steelix translation CVS
@
text
@d210 4
a213 3
protocolo, endere&ccedil;o de origem e destino, marca&ccedil;&otilde;es, etc., usando 
a mesma sintaxe das regras de filtragem. Quando estas op&ccedil;&otilde;es forem usadas,
regras <tt>anchor</tt> somente s&atilde;o processadas caso o pacote case 
d282 1
a282 1
$Translation: anchors.html,v 1.6 2006/05/28 17:23:02 dsantos Exp $<br>
@


1.5
log
@sync with Steelix CVS
@
text
@d62 1
a62 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d130 1
a130 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d204 1
a204 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d265 1
a265 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d280 2
a281 2
Originally [OpenBSD: anchors.html,v 1.18 ]<br>
$Translation: anchors.html,v 1.5 2005/12/22 21:21:45 dsantos Exp $<br>
@


1.4
log
@sync with steelix translation CVS
@
text
@d42 2
a43 2
</p><p>
</p><h1><font color="#e00000">PF: &Acirc;ncoras</font></h1>
d95 1
d281 1
a281 1
$Translation: anchors.html,v 1.4 2005/11/15 14:36:42 dsantos Exp $<br>
@


1.3
log
@sync with Steelix CVS
@
text
@d61 2
a62 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d128 2
a129 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d202 2
a203 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d263 2
a264 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.6"
d278 4
a281 2
Originally [OpenBSD: anchors.html,v 1.17 ]<br>                                               
$Translation: anchors.html,v 1.3 2005/05/27 15:11:33 dsantos Exp $<br>                 
@


1.2
log
@Sync with Steelix CVS
@
text
@d61 1
a61 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.6"
d127 1
a127 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.6"
d200 1
a200 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.6"
d274 2
a275 2
Originally [OpenBSD: anchors.html,v 1.16 ]<br>                                               
$Translation: anchors.html,v 1.2 2005/02/11 15:53:16 dsantos Exp $<br>                 
@


1.1
log
@sync with steelix translation CVS
@
text
@d4 1
a4 1
<title>PF: Anterior: &Acirc;ncoras e Subconjuntos de Regras Nomeadas</title>
d14 1
a14 1
Copyright (c) 2003, 2004 Joel Knight <enabled@@myrealbox.com>
d43 1
a43 1
</p><h1><font color="#e00000">PF: &Acirc;ncoras e Subconjuntos de Regras Nomeadas</font></h1>
d50 1
a50 1
<li><a href="#named">Subconjuntos de Regras Nomeadas</a>
d85 4
a88 2
Regras <tt>anchor</tt> ser&atilde;o avaliadas de forma relativa &agrave; &acirc;ncora que 
as carregou. Por exemplo regras <tt>anchor</tt> no conjunto de regras 
d90 1
a90 1
principal como pai, e regras <tt>anchor</tt> carregadas de arquivos 
d94 1
a94 1
<a name="named"></a>
d132 3
a134 2
<tt>load</tt> instrui <tt>pfctl</tt> a inserir no subconjunto de 
regras e na &acirc;ncora especificada regras carregadas de um arquivo texto.
d138 1
a143 6
Quando o arquivo de regras principal &eacute; carregado, regras listadas 
no arquivo <tt>/etc/anchor-goodguys-ssh</tt> ser&atilde;o carregadas no 
subconjunto de regras nomeado <tt>ssh</tt> e v&iacute;nculado &agrave; &acirc;ncora 
<tt>goodguys</tt>.

<p>
d149 1
a149 1
&nbsp;&nbsp;&nbsp;| pfctl -a goodguys/ssh -f -
a153 7
Isto adiciona uma regra <tt>pass</tt> na &acirc;ncora de nome
<tt>ssh</tt> vinculada &agrave; &acirc;ncora <tt>goodguys</tt>. O PF 
ent&atilde;o avaliar&aacute; esta regra (e quaisquer outras regras que forem 
inseridas) quando encontrar a linha <tt>anchor "goodguys/*"</tt>
no arquivo principal.

<p>
d161 1
a161 1
# pfctl -a goodguys:www -f /etc/anchor-goodguys-www<br>
a165 4
Isso carregar&aacute; regras do arquivo <tt>/etc/anchor-goodguys-www</tt>
no conjunto de regras nomeado <tt>www</tt> na &acirc;ncora <tt>goodguys</tt>.

<p>
d169 22
a190 3
<a href="macros.html">macros</a> usadas tamb&eacute;m devem estar definidas neste 
subconjunto, macros definidas no arquivo principal <i>n&atilde;o</i> s&atilde;o 
vis&iacute;veis nos subconjuntos de regras.
d193 1
a193 1
Cada subconjunto nomeado, bem como o arquivo principal, existem separados 
d198 2
a199 2
subconjunto v&igrave;nculado a ela. Um subconjunto nomeado n&atilde;o &eacute; 
destru&iacute;do at&eacute; que seja removido usando 
d201 1
a201 2
>pfctl(8)</a>. No caso de um ponto de ancoramento n&atilde;o possuir 
v&iacute;nculos a subconjuntos nomeados, ele tamb&eacute;m &eacute; destru&iacute;do.
d227 1
a227 1
# echo "pass in from 192.0.2.10 to any" | pfctl -a ssh/allowed -f -
d239 1
a239 1
usado para adicionar ou remover regras numa &atilde;ncora sem precisar 
d243 1
a243 2
Para listar todas regras na &acirc;ncora nomeada <tt>allowed</tt> v&iacute;nculada 
&agrave; &acirc;ncora <tt>ssh</tt>:
d246 1
a246 1
# pfctl -a ssh/allowed -s rules
d254 1
a254 1
# pfctl -a ssh/allowed -F rules
d274 2
a275 2
Originally [OpenBSD: anchors.html,v 1.15 ]<br>                                               
$Translation: anchors.html,v 1.1 2005/01/04 17:09:07 dsantos Exp $<br>                 
@

