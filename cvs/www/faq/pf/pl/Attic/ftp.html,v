head	1.29;
access;
symbols;
locks; strict;
comment	@# @;


1.29
date	2014.04.01.17.14.11;	author nick;	state dead;
branches;
next	1.28;

1.28
date	2009.11.08.22.09.17;	author tobias;	state Exp;
branches;
next	1.27;

1.27
date	2009.05.04.19.07.52;	author tobias;	state Exp;
branches;
next	1.26;

1.26
date	2008.11.02.00.28.45;	author tobias;	state Exp;
branches;
next	1.25;

1.25
date	2008.08.04.12.05.27;	author tobias;	state Exp;
branches;
next	1.24;

1.24
date	2007.11.12.20.29.59;	author saad;	state Exp;
branches;
next	1.23;

1.23
date	2007.05.09.05.49.53;	author jufi;	state Exp;
branches;
next	1.22;

1.22
date	2007.05.01.17.03.19;	author jufi;	state Exp;
branches;
next	1.21;

1.21
date	2006.11.03.07.59.05;	author jufi;	state Exp;
branches;
next	1.20;

1.20
date	2006.05.28.10.32.40;	author jufi;	state Exp;
branches;
next	1.19;

1.19
date	2006.05.24.06.48.44;	author jufi;	state Exp;
branches;
next	1.18;

1.18
date	2006.05.19.09.13.25;	author jufi;	state Exp;
branches;
next	1.17;

1.17
date	2006.05.14.09.54.41;	author saad;	state Exp;
branches;
next	1.16;

1.16
date	2006.05.03.14.48.29;	author saad;	state Exp;
branches;
next	1.15;

1.15
date	2006.05.02.17.09.33;	author jufi;	state Exp;
branches;
next	1.14;

1.14
date	2005.11.03.11.30.54;	author saad;	state Exp;
branches;
next	1.13;

1.13
date	2005.08.24.12.58.45;	author saad;	state Exp;
branches;
next	1.12;

1.12
date	2005.08.21.22.37.27;	author saad;	state Exp;
branches;
next	1.11;

1.11
date	2005.02.19.10.16.13;	author jufi;	state Exp;
branches;
next	1.10;

1.10
date	2004.11.14.20.02.44;	author jufi;	state Exp;
branches;
next	1.9;

1.9
date	2004.11.12.16.16.53;	author jufi;	state Exp;
branches;
next	1.8;

1.8
date	2004.08.26.15.18.45;	author jufi;	state Exp;
branches;
next	1.7;

1.7
date	2004.05.09.09.48.24;	author saad;	state Exp;
branches;
next	1.6;

1.6
date	2004.01.16.21.01.34;	author jufi;	state Exp;
branches;
next	1.5;

1.5
date	2003.12.07.00.43.19;	author horacio;	state Exp;
branches;
next	1.4;

1.4
date	2003.11.14.23.10.31;	author horacio;	state Exp;
branches;
next	1.3;

1.3
date	2003.09.28.22.28.56;	author horacio;	state Exp;
branches;
next	1.2;

1.2
date	2003.09.13.17.15.27;	author horacio;	state Exp;
branches;
next	1.1;

1.1
date	2003.09.02.14.37.19;	author jufi;	state Exp;
branches;
next	;


desc
@@


1.29
log
@
Abandon translations, per deraadt@@ and ajacoutot@@.
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF: Problemy z FTP</title>
<link rev="made" href="mailto:www@@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-2">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq,pf">
<meta name="distribution"  content="global">
</head>

<!--
Copyright (c) 2003, Nick Holland <nick@@openbsd.org>
Copyright (c) 2003-2005, Joel Knight <enabled@@myrealbox.com>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<a href="../../../pl/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../../images/smalltitle.gif" border="0">
</a>
<p>
[<a href="perf.html">Wstecz: Wydajno¶æ</a>]
[<a href="index.html">Spis tre¶ci</a>]
[<a href="authpf.html">Dalej: Authpf: pow³oka dla bramek
uwierzytelniaj±cych</a>]

<p>
<h1><font color="#e00000">PF: Problemy z FTP</font></h1>
<hr>

<h3>Spis tre¶ci</h3>
<ul>
<li><a href="#modes">Tryby pracy FTP</a>
<li><a href="#client">Klient FTP za firewallem</a>
<li><a href="#server">"Samozabezpieczenie" PF serwera FTP</a>
<li><a href="#natserver">Zabezpieczanie serwera FTP poprzez dedykowany
firewall z NAT</a>
<li><a href="#info">Wiêcej informacji o FTP</a>
<li><a href="#tftp-proxy">Proxy TFTP</a>
</ul>

<hr>

<a name="modes"></a>
<h2>Tryby pracy FTP</h2>
Powstanie protoko³u FTP mia³o miejsce gdy Internet by³ jeszcze ma³±,
przyjazn± sieci± i ka¿dy wiedzia³ wszystko o wszystkich, a wiêc wtedy
gdy filtrowanie pakietów i nadzwyczajne ¶rodki ostro¿no¶ci nie by³y
jeszcze potrzebne. Protokó³ ten nie jest wiêc zaprojektowany tak aby
umo¿liwiæ jego ³atwe filtrowanie lub przekazywanie jego datagramów
poprzez ¶ciany ogniowe, a tak¿e do wspó³pracy z translacj± adresów.

<p>
Z FTP mo¿na korzystaæ na dwa sposoby: pasywnie lub aktywnie. Wybór
trybu aktywnego lub pasywnego zale¿y w g³ównej mierze od okre¶lenia
kto ma problemy z filtrowaniem pakietów. Najlepszym rozwi±zaniem
by³oby umo¿liwiæ korzystanie z obu metod.

<p>
Kiedy u¿ytkownik ³±czy siê z serwerem przy pomocy aktywnego FTP i
wysy³a ¿±danie otrzymania informacji lub pliku, serwer FTP tworzy
nowe po³±czenie z powrotem do klienta i przesy³a dane. nazywa siê to
<i>po³±czeniem przesy³ania danych</i> (ang. data connection).
Aby zacz±æ, klient FTP wybiera losowy port, przesy³a jego numer
do serwera FTP i wtedy zaczyna nas³uchiwaæ na tym porcie wybra³.
Serwer FTP inicjuje wówczas po³±czenie na adres i otrzymany port
klienta, po czym rozpoczyna transmisjê danych. Stanowi to problem
dla u¿ytkowników staraj±cych siê uzyskaæ dostêp do serwerów FTP
z za bramek realizuj±cych NAT. Poniewa¿ NAT dzia³a, jak dzia³a,
serwer FTP inicjuje po³±czenie przesy³ania danych poprzez ³±czenie
siê na zewnêtrzny adres bramki oraz wybrany port. Maszyna realizuj±ca
NAT otrzyma po³±czenie, lecz poniewa¿ nie wie, jak zmapowaæ pakiet
w swojej tabeli stanów, porzuci pakiet i nie dostarczy go do klienta.

<p>
W trybie pasywnym (jest to domy¶lne zachowanie programu <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1"
>ftp(1)</a>), dostarczonego wraz z OpenBSD), klient ¿±da aby to
serwer okre¶li³ losowy port na którym bêdzie oczekiwa³ na po³±czenie
dla przes³ania danych. Serwer informuje klienta, który port zosta³
wybrany, a klient ³±czy siê z tym portem i nastêpuje transfer danych.
Niestety, z powodu mo¿liwo¶ci istnienia zapory ogniowej przed
serwerem FTP, która bêdzie blokowaæ nadchodz±ce po³±czenia przesy³ania
danych. W OpenBSD ftp(1) u¿ywa tego trybu domy¶lnie, wymuszenie trybu
aktywnego mo¿na uzyskaæ na dwa sposoby: opcja -A podczas wywo³ania ftp,
lub wy³±czenie trybu pasywnego komend± "<tt>passive off</tt>" w linii
poleceñ programu "<tt>ftp&gt;</tt>".

<a name="client"></a>
<h2>Klient FTP za firewallem</h2>
Jak to zosta³o opisane wcze¶niej, protokó³ FTP ma problemy z wspó³prac±
z NAT i firewallami.


<p>
Packet Filter dostarcza rozwi±zanie tego problemu, jakim jest przekierowanie
ruchu FTP na serwer proxy FTP. W procesie tym twój ruch FTP jest "przeprowadzany"
przez twoj± bramê/firewall NAT, poprzez dynamiczne dodawanie niezbêdnych regu³
do PF, i usuwanie ich gdy nie s± potrzebne, za pomoc± systemu
<a href="anchors.html">zakotwiczeñ</a> (ang. anchors).
FTP proxy wykorzystywanym przez PF w OpenBSD 3.9 i po¿niejszych jest
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+4.6"
>ftp-proxy(8)</a>. 

<p>
Aby go aktywowaæ, umie¶æ co¶ takiego w sekcji NAT pliku 
<tt>pf.conf</tt>:

<blockquote>
<tt>
nat-anchor "ftp-proxy/*"<br>
rdr-anchor "ftp-proxy/*"<br>
rdr on $int_if proto tcp from any to any port 21 -&gt; 127.0.0.1 \<br>
&nbsp;&nbsp;&nbsp;port 8021
</tt>
</blockquote>

<p>
Pierwsze dwie linie s± par± <a href="anchors.html">zakotwiczeñ</a>, które
s± wykorzystywane przez ftp-proxy do dodawania regu³, wymaganych do
zarz±dzania ruchem FTP, "w locie".
Ostatnia linia kieruje FTP od twoich klientów do programu ftp-proxy(8),
który nas³uchuje na twojej maszynie na porcie 8021.

<p>
Potrzebne jest tak¿e zakotwiczenie w sekcji regu³:
<blockquote>
<tt>
anchor "ftp-proxy/*"
</tt>
</blockquote>

<p>
Oczywi¶cie powy¿sze przekierowanie zak³ada, ¿e serwer proxy jest
uruchomiony na tym komputerze. Mo¿esz go uruchomiæ umieszczaj±c w pliku
<tt>/etc/rc.local.conf</tt>, jest nastêpuj±c± liniê:

<blockquote>
<tt>
ftpproxy_flags=""
</tt>
</blockquote>

<p>
Program ftp-proxy mo¿e byæ tak¿e uruchomiony jako root bez konieczno¶ci
restartu komputera.

<p>
ftp-proxy nas³uchuje na porcie 8021, na ten sam port wysy³a ruch FTP
podane wy¿ej wyra¿enie <tt>rdr</tt>.

<p>
Aby uaktywniæ po³±czenia w trybie aktywnym, musisz podaæ flagê "-r"
dla ftp-proxy(8) (w poprzedniej wersji proxy musia³e¶ korzystaæ z 
"-u root").

<a name="server"></a>
<h2>"Samozabezpieczenie" PF serwera FTP</h2>
W tym przypadku, filtr PF jest uruchomiony na tym samym komputerze co serwer
FTP, a nie na osobnej maszynie. Kiedy serwer obs³uguje pasywne sesje FTP,
otwiera wysoki port TCP dla danych. Domy¶lnie, natywny serwer OpenBSD
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8"
>ftpd(8)</a> u¿ywa w tym celu portów z zakresu od 49152 do 65535.
Oczywi¶cie ruch na tych portach musi byæ przepuszczany wraz z portem
21 (który jest portem kontrolnym FTP):

<blockquote>
<tt>
pass in on $ext_if proto tcp from any to any port 21 keep state<br>
pass in on $ext_if proto tcp from any to any port &gt; 49151 \<br>
&nbsp;&nbsp;&nbsp;keep state
</tt>
</blockquote>

<p>
Proszê zauwa¿yæ, ¿e je¶li zaistnieje potrzeba ograniczenia
zakresu wysokich portów, których bêdzie u¿ywa³ natywny serwer
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8"
>ftpd(8)</a> OpenBSD, mo¿na to osi±gn±æ poprzez zmianê
warto¶ci zmiennych
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8"
>sysctl(8)</a> <tt>net.inet.ip.porthifirst</tt> i
<tt>net.inet.ip.porthilast</tt>.

<a name="natserver"></a>
<h2>Zabezpieczanie serwera FTP poprzez dedykowany firewall z NAT</h2>
Ta sytuacja zmusza ¶cianê ogniow± do przekierowania ruchu FTP do serwera FTP,
dodatkowo nie blokuj±c wymaganych, nowo otwartych portów. 
Aby to zrealizowaæ wrócimy do ftp-proxy(8).

<p>
ftp-proxy(8) mo¿e pracowaæ w trybie w którym przekierowuje wszystkie
po³±czenia FTP do okre¶lonego serwera FTP.
Ustawimy proxy tak by nas³uchiwa³o na porcie 21 firewall-a i przekierowywa³
po³±czenia do innego serwera.

<p>
W pliku <tt>/etc/rc.conf.local</tt> dodaj liniê:

<blockquote>
<tt>
ftpproxy_flags="-R 10.10.10.1 -p 21 -b 192.168.0.1"
</tt>
</blockquote>

<p>
W tym przypadku 10.10.10.1 jest IP aktualnego serwera FTP, 21 jest portem
na którym chcemy by s³ucha³ ftp-proxy(8), natomiast 192.168.0.1 jest adresem
firewall-a na ktorym chcemy ustawiæ proxy.

<p>
Teraz regu³y firewall-a:

<blockquote>
<tt>
ext_ip = "192.168.0.1"<br>
ftp_ip = "10.10.10.1"<br>
<br>
nat-anchor "ftp-proxy/*"<br>
nat on $ext_if inet from $int_if -&gt; ($ext_if)<br>
rdr-anchor "ftp-proxy/*"<br>
<br>
pass in on $ext_if inet proto tcp to $ext_ip port 21 \<br>
&nbsp;&nbsp;&nbsp;&nbsp;flags S/SA keep state<br>
pass out on $int_if inet proto tcp to $ftp_ip port 21 \<br>
&nbsp;&nbsp;&nbsp;&nbsp;user proxy flags S/SA keep state<br>
anchor "ftp-proxy/*"
</tt>
</blockquote>

<p>
W ten sposób zezwalamy na przychodz±ce po³±czenia na port 21 na zewnêtrznym
interfejsie, a tak¿e na odpowiadaj±ce im po³±czenia wychodz±ce na serwer FTP.
Opcja "user proxy" dodana do regu³y dla pakietów wychodz±cych, gwarantuje,
¿e przepuszczane s± tylko po³±czenia inicjowane przez ftp-proxy(8).

<p>
Zwróæ uwagê, ¿e w sytuacji w której chcesz korzystaæ z ftp-proxy(8)
zarówno do ochrony serwera FTP i aby daæ u¿ytkownikom dostep do serwera FTP
za firewall-em, bêdziesz musia³ uruchomiæ dwie instancje ftp-proxy(8).


<a name="info"></a>
<h2>Wiêcej informacji o FTP</h2>
Wiêcej informacji o filtrowaniu protoko³u FTP oraz o tym, jak
ogólnie dzia³a FTP znajdziesz w tym opracowaniu:
<ul>
<li><a href="http://www.pintday.org/whitepapers/ftp-review.shtml">FTP
Reviewed</a>
</ul>

<a name="tftp-proxy"></a>
<h2>Proxy TFTP</h2>

<p>
Trivial File Transfer Protocol (TFTP) podlega w pewnej mierze tym samym 
ograniczeniom jakim podlega FTP gdy ruch odbywa siê poprzez firewall.
Na szczê¶cie PF posiada u¿yteczne proxy dla TFTP nazwane
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+4.6"
>tftp-proxy(8)</a>.

<p>
tftp-proxy(8) jest konfigurowane w znaczny sposób podobnie jak ftp-proxy(8),
opisany powy¿ej w sekcji <a href="#client">Klient FTP za firewall-em</a>.

<blockquote>
<tt>
nat on $ext_if from $int_if -&gt; ($ext_if)<br>
rdr-anchor "tftp-proxy/*"<br>
rdr on $int_if proto udp from $int_if to port tftp -&gt; \<br>
&nbsp;&nbsp;&nbsp;&nbsp;127.0.0.1 port 6969<br>
<br>
anchor "tftp-proxy/*"
</tt>
</blockquote>

<p>
Powy¿sze regu³y zezwalaj± na ruch wyj¶ciowy TFTP z sieci wewnêtrznej
do serwerów TFTP w sieci zewnêtrznej.

<p>
Ostatnim krokiem jest w³±czenie tftp-proxy w 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inetd.conf&amp;sektion=5"
>inetd.conf(5)</a>, w taki sposób, ¿e nas³uchuje on na tym samym porcie
do którego odnosi siê regu³a <tt>rdr</tt> powy¿ej, w tym przypadku 6969.

<blockquote>
<tt>
127.0.0.1:6969  dgram   udp   wait  root  /usr/libexec/tftp-proxy tftp-proxy
</tt>
</blockquote>

<p>
W przeciwieñstwie do ftp-proxy(8), tftp-proxy(8) wywo³ywany jest z inetd.


<p>
[<a href="perf.html">Wstecz: Wydajno¶æ</a>]
[<a href="index.html">Spis tre¶ci</a>]
[<a href="authpf.html">Dalej: Authpf: pow³oka dla bramek
uwierzytelniaj±cych</a>]

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[wstecz]"></a> 
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: ftp.html,v 1.29 ]<br>
$Translation: ftp.html,v 1.28 2009/11/08 19:35:52 tkniaz Exp $<br>
-->
$OpenBSD: ftp.html,v 1.28 2009/11/08 22:09:17 tobias Exp $
</small>
</body>
</html> 
@


1.28
log
@Sync with Steelix CVS
@
text
@d330 1
a330 1
$OpenBSD$
@


1.27
log
@Sync with Steelix CVS
@
text
@d119 1
a119 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+4.5"
d276 1
a276 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+4.5"
d327 2
a328 2
Originally [OpenBSD: ftp.html,v 1.28 ]<br>
$Translation: ftp.html,v 1.27 2009/05/03 15:43:29 tkniaz Exp $<br>
@


1.26
log
@Sync with Steelix CVS
@
text
@d119 1
a119 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+4.4"
d276 1
a276 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+4.4"
d327 2
a328 2
Originally [OpenBSD: ftp.html,v 1.27 ]<br>
$Translation: ftp.html,v 1.26 2008/11/01 23:52:41 tkniaz Exp $<br>
@


1.25
log
@Sync with Steelix CVS
@
text
@d119 1
a119 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+4.3"
d276 1
a276 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+4.3"
d327 2
a328 2
Originally [OpenBSD: ftp.html,v 1.26 ]<br>
$Translation: ftp.html,v 1.25 2008/07/30 23:22:49 tkniaz Exp $<br>
@


1.24
log
@Sync with Steelix CVS
@
text
@d119 1
a119 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+4.2"
a120 4
(uwaga: wcze¶niejsze wersje OpenBSD korzysta³y z innego proxy o tej samej nazwie,
który zosta³ udokumentowany na stronie manuala OpenBSD 3.8
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+3.8"
>ftp-proxy(8)v3.8</a>).
d276 1
a276 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+4.2"
d327 2
a328 2
Originally [OpenBSD: ftp.html,v 1.25 ]<br>
$Translation: ftp.html,v 1.24 2007/11/03 10:20:39 tkniaz Exp $<br>
@


1.23
log
@Sync with steelix translation CVS
@
text
@d119 1
a119 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+4.1"
d280 1
a280 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+4.1"
d331 2
a332 2
Originally [OpenBSD: ftp.html,v 1.24 ]<br>
$Translation: ftp.html,v 1.23 2007/05/07 00:53:30 tkniaz Exp $<br>
@


1.22
log
@Sync with steelix translation CVS
@
text
@d94 1
a94 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1&amp;manpath=OpenBSD+4.0"
d119 1
a119 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d183 1
a183 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d199 1
a199 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d202 1
a202 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d280 1
a280 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d304 1
a304 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inetd.conf&amp;sektion=5&amp;manpath=OpenBSD+4.0"
d331 2
a332 2
Originally [OpenBSD: ftp.html,v 1.23 ]<br>
$Translation: ftp.html,v 1.22 2007/04/30 18:33:31 tkniaz Exp $<br>
@


1.21
log
@sync with steelix translation CVS
@
text
@d263 1
a263 1
<p>
d332 1
a332 1
$Translation: ftp.html,v 1.21 2006/11/02 20:00:54 tkniaz Exp $<br>
@


1.20
log
@sync with steelix translation CVS
@
text
@d56 1
d94 1
a94 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1&amp;manpath=OpenBSD+3.9"
d118 2
a119 2
FTP proxy wykorzystywanym przez OpenBSD 3.9 i PF jest
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+3.9"
a177 6
<p>
Prosimy zwróæ uwagê, ¿e ftp-proxy(8) jest u¿yteczny dla <b>klientów FTP</b>
za filtrem FTP; nie jest u¿ywany do obs³ugi <b>serwera FTP</b> za filtrem
PF.  


d183 1
a183 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d199 1
a199 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d202 1
a202 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d208 3
a210 5
Ta sytuacja zmusza, ¶cianê ogniow± do przekierowania ruchu FTP do serwera FTP,
dodatkowo nie blokuj±c wymaganych, nowo otwartych portów. W tym przyk³adzie
za³o¿ono, ¿e serwerem FTP bêdzie znów natywne rozwi±zanie OpenBSD czyli
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.9"
>ftpd(8)</a>, korzystaj±cy z domy¶lnego zakresu portów.
d213 8
a220 1
Oto przyk³ad regu³ dziêki którym powy¿szy cel mo¿e zostaæ osi±gniêty:
d223 16
a238 1
ftp_server = "10.0.3.21"<br>
d240 3
a242 4
rdr on $ext_if proto tcp from any to any port 21 -&gt; $ftp_server \<br>
&nbsp;&nbsp;&nbsp;port 21<br>
rdr on $ext_if proto tcp from any to any port 49152:65535 -&gt; \<br>
&nbsp;&nbsp;&nbsp;$ftp_server port 49152:65535<br>
d244 5
a248 11
# in on $ext_if<br>
pass in quick on $ext_if proto tcp from any to $ftp_server \<br>
&nbsp;&nbsp;&nbsp;port 21 keep state<br>
pass in quick on $ext_if proto tcp from any to $ftp_server \<br>
&nbsp;&nbsp;&nbsp;port &gt; 49151 keep state<br>
<br>
# out on $int_if<br>
pass out quick on $int_if proto tcp from any to $ftp_server \<br>
&nbsp;&nbsp;&nbsp;port 21 keep state<br>
pass out quick on $int_if proto tcp from any to $ftp_server \<br>
&nbsp;&nbsp;&nbsp;port &gt; 49151 keep state
d252 5
d258 6
d273 45
d331 2
a332 2
Originally [OpenBSD: ftp.html,v 1.22 ]<br>
$Translation: ftp.html,v 1.20 2006/05/28 01:13:10 tkniaz Exp $<br>
@


1.19
log
@sync with steelix translation CVS
@
text
@d110 1
d126 2
a127 1
Aby go aktywowaæ, umie¶æ co¶ takiego w sekcji NAT pliku <tt>pf.conf</tt>:
a146 1

d182 1
d229 1
d268 1
a268 1
$Translation: ftp.html,v 1.19 2006/05/21 00:13:23 tkniaz Exp $<br>
@


1.18
log
@sync with steelix translation CVS
@
text
@d79 1
a79 1
<i>po³±czeniem przesy³ania danych</i> (ang. <i>data connection</i>).
d265 1
a265 1
$Translation: ftp.html,v 1.18 2006/05/18 19:07:12 tkniaz Exp $<br>
@


1.17
log
@sync with Steelix CVS
@
text
@d35 1
a35 1
<a href="../../index.html">
d265 1
a265 1
$Translation: ftp.html,v 1.17 2006/05/13 00:20:44 tkniaz Exp $<br>
@


1.16
log
@sync with Steelix CVS
@
text
@d144 9
d264 2
a265 2
Originally [OpenBSD: ftp.html,v 1.21 ]<br>
$Translation: ftp.html,v 1.16 2006/05/03 03:12:14 tkniaz Exp $<br>
@


1.15
log
@sync with steelix translation CVS
@
text
@d51 1
a51 1
<li><a href="#client">Klient FTP za firewall-em</a>
d106 1
a106 1
<h2>Klient FTP za firewall-em</h2>
d108 1
a108 1
z NAT i firewall-ami.
d140 1
a140 1
Ostatnia linia przekierowuje FTP od twoich klientów do programu ftp-proxy(8),
d255 2
a256 2
Originally [OpenBSD: ftp.html,v 1.20 ]<br>
$Translation: ftp.html,v 1.15 2006/05/02 00:59:45 tkniaz Exp $<br>
@


1.14
log
@sync with Steelix CVS
@
text
@d51 1
a51 1
<li><a href="#client">Klient FTP za firewallem</a>
d93 1
a93 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1&amp;manpath=OpenBSD+3.8"
d106 1
a106 1
<h2>Klient FTP za firewallem</h2>
d108 1
a108 1
z NAT i firewallami.
d111 10
a120 4
Packet Filter dostarcza rozwi±zanie tego problemu, którym jest przekierowanie
ruchu FTP na serwer proxy FTP. proces ten "przeprowadzi" po³±czenia FTP
poprzez bramkê/firewall z NAT. Serwerem proxy FTP wykorzystywanym przez
OpenBSD i PF
d122 4
a125 2
>ftp-proxy(8)</a>. Aby go aktywowaæ, w umie¶æ co¶ takiego w sekcji translacji
pliku <tt>pf.conf</tt>:
d129 2
d137 5
a141 3
Dzia³anie tej linii mo¿na stre¶ciæ nastêpuj±co: "Ruch na wewnêtrznym
interfejsie sieciowym jest przekierowany do serwera po¶rednicz±cego,
uruchomionego na tej maszynie i nas³uchuj±cego na porcie 8021".
d145 2
a146 2
uruchomiony na tym komputerze. Nale¿y sprawdziæ, czy w pliku
<tt>/etc/inetd.conf</tt>, jest nastêpuj±ca linia:
d150 1
a150 2
127.0.0.1:8021 stream tcp nowait root /usr/libexec/ftp-proxy \<br>
&nbsp;&nbsp;&nbsp;ftp-proxy -n
d155 2
a156 6
Flaga <tt>-n</tt> jest niezbêdna tylko gdy maszyna OpenBSD
realizuje NAT. Nastêpnie wy¶lij sygna³ 'HUP' do demona
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inetd&amp;sektion=8&amp;manpath=OpenBSD+3.8"
>inetd(8)</a> aby zmusiæ go do ponownego odczytania swojego pliku
konfiguracyjnego. Sygna³ ten mo¿na wys³aæ do demona inetd w
nastêpuj±cy sposób:
d158 3
a160 5
<blockquote>
<tt>
kill -HUP `cat /var/run/inetd.pid`
</tt>
</blockquote>
d163 3
a165 27
Mo¿na zauwa¿yæ, ¿e ftp-proxy nas³uchuje na porcie 8021, dok³adnie
tym samym, na który podana dyrektywa <tt>rdr</tt> przekierowuje
ruch FTP. Wybór numeru portu jest zupe³nie dowolny, jednak port
8021 jest dobrym wyborem, jako ¿e nie jest on u¿ywany przez
¿adn± inn± aplikacjê.

<p>
W tym momencie nadal jeszcze bêd± funkcjonowa³y jedynie pasywne
po³±czenia FTP.
Aby umo¿liwiæ po³±czenia w trybie "aktywnym", po³±czenie zwrotne
inicjowane z powrotem do klienta przez serwer FTP musi przej¶æ przez
firewall.
Niestety, znamy jedynie zakres mo¿liwych portów port na który nadejdzie
to po³±czenie.
Wiadomo natomiast, ¿e po³±czenie to bêdzie nadchodzi³o z portu
20 (ftp-data port) oraz ze ftp-proxy przejmie je i bêdzie
po¶redniczyæ w komunikacji z w³a¶ciwym klientem.
Poniewa¿ ftp-proxy uruchamiane jest z prawami u¿ytkownika
<tt>proxy</tt>, s³owo kluczowe <tt>user</tt> mo¿e byæ
wykorzystywane w regule filtrowania.

<blockquote>
<tt>
pass in on $ext_if inet proto tcp from port 20 to ($ext_if) \<br>
&nbsp;&nbsp;&nbsp;&nbsp;user proxy flags S/SA keep state
</tt>
</blockquote>
d168 3
a170 3
Proszê zauwa¿yæ, ¿e ftp-proxy(8) jest pomoc± dla <b>klientów FTP</b>
znajduj±cych siê za ¶cian± ogniow±, nie s³u¿y natomiast do uruchomienia
<b>serwera FTP</b> za firewallem.
d177 1
a177 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d193 1
a193 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d196 1
a196 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d205 1
a205 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d255 2
a256 2
Originally [OpenBSD: ftp.html,v 1.19 ]<br>
$Translation: ftp.html,v 1.14 2005/11/02 15:08:02 tkniaz Exp $<br>
@


1.13
log
@sync with Steelix CVS
@
text
@d93 1
a93 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1&amp;manpath=OpenBSD+3.7"
d115 1
a115 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d146 1
a146 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inetd&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d196 1
a196 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d212 1
a212 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d215 1
a215 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d224 1
a224 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d274 2
a275 2
Originally [OpenBSD: ftp.html,v 1.18 ]<br>
$Translation: ftp.html,v 1.13 2005/08/24 11:42:26 pl-team Exp $<br>
@


1.12
log
@sync with Steelix CVS
@
text
@d273 1
d275 2
a276 1
$Translation: ftp.html,v 1.12 2005/08/12 07:53:29 pl-team Exp $<br>
@


1.11
log
@Sync with Steelix CVS
@
text
@d15 1
a15 1
Copyright (c) 2003, 2004, Joel Knight <enabled@@myrealbox.com>
d93 1
a93 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1&amp;manpath=OpenBSD+3.6"
d115 1
a115 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+3.6"
d146 1
a146 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inetd&amp;sektion=8&amp;manpath=OpenBSD+3.6"
d196 1
a196 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.6"
d212 1
a212 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.6"
d215 1
a215 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8&amp;manpath=OpenBSD+3.6"
d224 1
a224 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.6"
d273 2
a274 2
Originally [OpenBSD: ftp.html,v 1.17 ]<br>
$Translation: ftp.html,v 1.11 2005/02/18 23:08:45 pl-team Exp $<br>
@


1.10
log
@Sync with Steelix CVS
@
text
@d35 3
a37 1
<img alt="[OpenBSD]" height=30 width=141 src="../../../images/smalltitle.gif">
d273 2
a274 2
Originally [OpenBSD: ftp.html,v 1.16 ]<br>
$Translation: ftp.html,v 1.10 2004/11/13 16:19:18 pl-team Exp $<br>
@


1.9
log
@sync with Polish OpenBSD Doc Project, thanks guys !
@
text
@d137 1
a137 1
&nbsp;&nbsp;&nbsp;ftp-proxy
d142 2
a143 2
a nastêpnie albo uruchomiæ ponownie system albo wys³aæ sygna³
'HUP' do demona
d145 3
a147 2
>inetd(8)</a>. Sygna³ ten mo¿na wys³aæ do demona inetd
w nastêpuj±cy sposób:
d163 22
d271 2
a272 2
Originally [OpenBSD: ftp.html,v 1.15 ]<br>
$Translation: ftp.html,v 1.9 2004/11/12 13:46:45 pl-team Exp $<br>
@


1.8
log
@Sync with Steelix CVS
@
text
@d91 1
a91 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1&amp;manpath=OpenBSD+3.5"
d113 1
a113 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+3.5"
d144 1
a144 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inetd&amp;sektion=8&amp;manpath=OpenBSD+3.5"
d171 1
a171 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.5"
d187 1
a187 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.5"
d190 1
a190 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8&amp;manpath=OpenBSD+3.5"
d199 1
a199 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.5"
d248 2
a249 2
Originally [OpenBSD: ftp.html,v 1.14 ]<br>
$Translation: ftp.html,v 1.8 2004/08/26 13:59:49 pl-team Exp $<br>
@


1.7
log
@sync with Steelix CVS
@
text
@a10 1
<meta name="copyright"     content="This document copyright 2002-2004 by OpenBSD.">
d13 18
d248 2
a249 2
Originally [OpenBSD: ftp.html,v 1.13 ]<br>
$Translation: ftp.html,v 1.7 2004/05/07 11:39:48 pl-team Exp $<br>
@


1.6
log
@Sync with Steelix CVS
@
text
@d74 1
a74 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1&amp;manpath=OpenBSD+3.4"
d96 1
a96 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+3.4"
d127 1
a127 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inetd&amp;sektion=8&amp;manpath=OpenBSD+3.4"
d154 1
a154 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.4"
d170 1
a170 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.4"
d173 1
a173 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8&amp;manpath=OpenBSD+3.4"
d182 1
a182 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.4"
d231 2
a232 2
Originally [OpenBSD: ftp.html,v 1.12 ]<br>
$Translation: ftp.html,v 1.6 2004/01/12 17:37:45 pl-team Exp $<br>
@


1.5
log
@Sync with Steelix CVS
@
text
@d11 1
a11 1
<meta name="copyright"     content="This document copyright 2002-2003 by OpenBSD.">
d195 1
a195 1
<br>
d199 6
d231 2
a232 2
Originally [OpenBSD: ftp.html,v 1.10 ]<br>
$Translation: ftp.html,v 1.5 2003/12/06 20:59:13 pl-team Exp $<br>
@


1.4
log
@Sync with Steelix CVS
@
text
@d98 1
a98 1
pliku <tt>/etc/pf.conf</tt>:
d225 2
a226 2
Originally [OpenBSD: ftp.html,v 1.9 ]<br>
$Translation: ftp.html,v 1.4 2003/11/11 15:18:29 pl-team Exp $<br>
@


1.3
log
@sync with steelix cvs
@
text
@d74 1
a74 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1&amp;manpath=OpenBSD+3.3"
d96 1
a96 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8&amp;manpath=OpenBSD+3.3"
d127 1
a127 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inetd&amp;sektion=8&amp;manpath=OpenBSD+3.3"
d154 1
a154 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.3"
d170 1
a170 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.3"
d173 1
a173 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8&amp;manpath=OpenBSD+3.3"
d182 1
a182 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8&amp;manpath=OpenBSD+3.3"
d225 2
a226 2
Originally [OpenBSD: ftp.html,v 1.8 ]<br>
$Translation: ftp.html,v 1.3 2003/09/28 14:46:48 pl-team Exp $<br>
@


1.2
log
@sync with steelix cvs
@
text
@d225 2
a226 2
Originally [OpenBSD: ftp.html,v 1.7 ]<br>
$Translation: ftp.html,v 1.2 2003/09/11 10:09:43 pl-team Exp $<br>
@


1.1
log
@sync with Polish translation project
@
text
@d23 1
a23 1
autentykacyjnych</a>]
d217 1
a217 1
autentykacyjnych</a>]
d226 1
a226 1
$Translation: ftp.html,v 1.1 2003/08/28 09:44:13 pl-team Exp $<br>
@

