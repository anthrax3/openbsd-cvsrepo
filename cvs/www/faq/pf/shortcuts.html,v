head	1.56;
access;
symbols;
locks; strict;
comment	@# @;


1.56
date	2017.06.26.17.18.58;	author tb;	state Exp;
branches;
next	1.55;
commitid	jKVBuSx5No9bUpg1;

1.55
date	2016.09.19.23.57.52;	author tj;	state Exp;
branches;
next	1.54;
commitid	GNVOkJslrAyDPluC;

1.54
date	2016.09.19.23.44.47;	author tj;	state Exp;
branches;
next	1.53;
commitid	P53AgOpLKrOmgs5r;

1.53
date	2016.08.15.02.22.15;	author tb;	state Exp;
branches;
next	1.52;
commitid	3DeixV5YkPOb78RN;

1.52
date	2016.08.14.15.21.18;	author tb;	state Exp;
branches;
next	1.51;
commitid	p45GRXRN7v62aGwm;

1.51
date	2016.06.16.18.26.12;	author tj;	state Exp;
branches;
next	1.50;
commitid	YxulLlh2ODeRIZ8i;

1.50
date	2016.06.13.17.58.25;	author tj;	state Exp;
branches;
next	1.49;
commitid	Grx2UyJPWzJbbhkP;

1.49
date	2016.04.18.19.07.50;	author tj;	state Exp;
branches;
next	1.48;
commitid	g0cUF3jNn5Tz4oaZ;

1.48
date	2016.04.16.00.30.41;	author tj;	state Exp;
branches;
next	1.47;
commitid	rTxoenHHaeutOff1;

1.47
date	2016.04.15.20.39.49;	author tb;	state Exp;
branches;
next	1.46;
commitid	jwteSMEb4rFzI8UA;

1.46
date	2016.03.29.01.27.39;	author tb;	state Exp;
branches;
next	1.45;
commitid	4Y8oU6GBrSY1UOfW;

1.45
date	2016.03.27.19.52.09;	author sthen;	state Exp;
branches;
next	1.44;
commitid	hi2ObFv9LGB98JY5;

1.44
date	2016.03.22.10.56.56;	author sthen;	state Exp;
branches;
next	1.43;
commitid	G2izHhNJ7aqR0Y6j;

1.43
date	2016.03.21.05.46.21;	author beck;	state Exp;
branches;
next	1.42;
commitid	zEx6zFkNSFFExu0v;

1.42
date	2015.10.18.19.48.19;	author nick;	state Exp;
branches;
next	1.41;
commitid	gkrFWKimwWNVivXe;

1.41
date	2015.07.02.05.49.05;	author bentley;	state Exp;
branches;
next	1.40;
commitid	AP3UllesavMDEUhQ;

1.40
date	2015.05.11.11.18.30;	author sthen;	state Exp;
branches;
next	1.39;
commitid	wRrXxcro6dFYiwF8;

1.39
date	2015.04.30.23.48.01;	author nick;	state Exp;
branches;
next	1.38;
commitid	uFWv68UTtTmjkqVF;

1.38
date	2014.12.02.03.17.26;	author nick;	state Exp;
branches;
next	1.37;
commitid	RQ0cKiFD5x45dGyo;

1.37
date	2014.12.01.10.01.07;	author bentley;	state Exp;
branches;
next	1.36;
commitid	DtrOVs7q8kqgEsjm;

1.36
date	2014.07.30.21.57.19;	author sthen;	state Exp;
branches;
next	1.35;
commitid	632wqensvvuAHAOA;

1.35
date	2014.06.03.11.11.20;	author nick;	state Exp;
branches;
next	1.34;
commitid	Bl9YHio9LiChPels;

1.34
date	2014.05.01.15.03.50;	author nick;	state Exp;
branches;
next	1.33;

1.33
date	2014.03.31.02.33.07;	author nick;	state Exp;
branches;
next	1.32;

1.32
date	2013.11.01.14.07.06;	author nick;	state Exp;
branches;
next	1.31;

1.31
date	2013.05.01.13.21.45;	author nick;	state Exp;
branches;
next	1.30;

1.30
date	2012.11.01.15.06.36;	author nick;	state Exp;
branches;
next	1.29;

1.29
date	2012.05.11.11.20.04;	author nick;	state Exp;
branches;
next	1.28;

1.28
date	2011.11.02.01.01.47;	author nick;	state Exp;
branches;
next	1.27;

1.27
date	2011.05.01.12.57.11;	author nick;	state Exp;
branches;
next	1.26;

1.26
date	2010.11.01.09.53.51;	author nick;	state Exp;
branches;
next	1.25;

1.25
date	2010.05.19.13.25.16;	author sthen;	state Exp;
branches;
next	1.24;

1.24
date	2009.10.16.19.12.42;	author nick;	state Exp;
branches;
next	1.23;

1.23
date	2009.04.30.17.27.31;	author nick;	state Exp;
branches;
next	1.22;

1.22
date	2008.10.31.16.49.34;	author nick;	state Exp;
branches;
next	1.21;

1.21
date	2008.07.27.17.13.47;	author nick;	state Exp;
branches;
next	1.20;

1.20
date	2007.11.01.02.57.56;	author joel;	state Exp;
branches;
next	1.19;

1.19
date	2007.05.06.18.59.54;	author nick;	state Exp;
branches;
next	1.18;

1.18
date	2006.11.01.01.56.01;	author joel;	state Exp;
branches;
next	1.17;

1.17
date	2006.05.01.00.54.29;	author nick;	state Exp;
branches;
next	1.16;

1.16
date	2005.11.01.11.35.18;	author nick;	state Exp;
branches;
next	1.15;

1.15
date	2005.05.20.00.12.02;	author joel;	state Exp;
branches;
next	1.14;

1.14
date	2004.12.22.04.28.16;	author david;	state Exp;
branches;
next	1.13;

1.13
date	2004.10.29.17.22.57;	author nick;	state Exp;
branches;
next	1.12;

1.12
date	2004.05.07.01.55.24;	author nick;	state Exp;
branches;
next	1.11;

1.11
date	2004.04.30.18.00.25;	author nick;	state Exp;
branches;
next	1.10;

1.10
date	2004.01.01.04.16.17;	author nick;	state Exp;
branches;
next	1.9;

1.9
date	2003.11.27.15.08.25;	author nick;	state Exp;
branches;
next	1.8;

1.8
date	2003.11.09.23.29.02;	author nick;	state Exp;
branches;
next	1.7;

1.7
date	2003.09.22.02.29.03;	author nick;	state Exp;
branches;
next	1.6;

1.6
date	2003.09.16.01.23.49;	author nick;	state Exp;
branches;
next	1.5;

1.5
date	2003.06.13.02.54.08;	author nick;	state Exp;
branches;
next	1.4;

1.4
date	2003.05.15.03.03.54;	author nick;	state Exp;
branches;
next	1.3;

1.3
date	2003.05.12.03.27.58;	author nick;	state Exp;
branches;
next	1.2;

1.2
date	2003.05.01.14.20.37;	author nick;	state Exp;
branches;
next	1.1;

1.1
date	2003.05.01.01.46.06;	author nick;	state Exp;
branches;
next	;


desc
@@


1.56
log
@move man.openbsd.org links from http:// to https://
reduces the number of http:// links in www/ from >33k to <7k

thanks to schwarze for doing the work
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>

<!-- If you make edits to any FAQ documents, please start each sentence
     on a new line, and try to keep the general formatting consistent
     with the rest of the pages -->

<title>OpenBSD PF: Shortcuts For Creating Rulesets</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="../../openbsd.css">
<link rel="canonical" href="https://www.openbsd.org/faq/pf/shortcuts.html">
</head>

<!--
Copyright (c) 2003, 2004 Joel Knight <enabled@@myrealbox.com>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

<body bgcolor="#ffffff" text="#000000">

<h2>
<a href="../../index.html">
<font color="#0000ff"><i>Open</i></font><font color="#000084">BSD</font></a>
<font color="#e00000">PF - Shortcuts For Creating Rulesets</font>
<small>
<a href="index.html" style="font-weight:normal; float:right">[Contents]</a>
</small>
</h2>
<hr>

<ul>
  <li><a href="#intro"      >Introduction</a>
  <li><a href="#macros"     >Using macros</a>
  <li><a href="#lists"      >Using lists</a>
  <li><a href="#grammar"    >PF grammar</a>
    <ul>
      <li><a href="#elim"   >Elimination of keywords</a>
      <li><a href="#return" ><tt>Return</tt> simplification</a>
      <li><a href="#order"  >Keyword ordering</a>
    </ul>
</ul>
<hr>

<h2 id="intro">Introduction</h2>

PF offers many ways in which a ruleset can be simplified.
Some good examples are by using
<a href="macros.html#macros">macros</a>
and <a href="macros.html#lists">lists</a>.
In addition, the ruleset language, or grammar, also offers some shortcuts
for making a ruleset simpler.
As a general rule of thumb, the simpler a ruleset is, the easier it is to
understand and to maintain.

<h2 id="macros">Using macros</h2>

Macros are useful because they provide an alternative to hard-coding
addresses, port numbers, interfaces names, etc., into a ruleset.
Did a server's IP address change? No problem, just update the macro; no need
to mess around with the filter rules that you've spent time and energy
perfecting for your needs.

<p>
A common convention in PF rulesets is to define a macro for each network
interface.
If a network card ever needs to be replaced with one that uses a different
driver, the macro can be updated and the filter rules will function as before.
Another benefit is when installing the same ruleset on multiple machines.
Certain machines may have different network cards in them, and using macros
to define the network interfaces allows the rulesets to be installed with
minimal editing.
Using macros to define information in a ruleset that is subject to change,
such as port numbers, IP addresses, and interface names, is recommended
practice.

<blockquote><pre>
# define macros for each network interface
IntIF = "dc0"
ExtIF = "fxp0"
DmzIF = "fxp1"
</pre></blockquote>

Another common convention is using macros to define IP addresses and
network blocks.
This can greatly reduce the maintenance of a ruleset when IP addresses change.

<blockquote><pre>
# define our networks
IntNet = "192.168.0.0/24"
ExtAdd = "192.0.2.4"
DmzNet = "10.0.0.0/24"
</pre></blockquote>

If the internal network ever expanded or was renumbered into a different
IP block, the macro can be updated:

<blockquote><pre>
IntNet = "{ 192.168.0.0/24, 192.168.1.0/24 }"
</pre></blockquote>

Once the ruleset is reloaded, everything will work as before.

<h2 id="lists">Using lists</h2>

Let's look at a good set of rules to have in your ruleset to handle
<a href="https://tools.ietf.org/html/rfc1918">RFC 1918</a> addresses that
just shouldn't be floating around the Internet, and when they are, are
usually trying to cause trouble:

<blockquote><pre>
block in  quick on egress inet from 127.0.0.0/8 to any
block in  quick on egress inet from 192.168.0.0/16 to any
block in  quick on egress inet from 172.16.0.0/12 to any
block in  quick on egress inet from 10.0.0.0/8 to any
block out quick on egress inet from any to 127.0.0.0/8
block out quick on egress inet from any to 192.168.0.0/16
block out quick on egress inet from any to 172.16.0.0/12
block out quick on egress inet from any to 10.0.0.0/8
</pre></blockquote>

Now look at the following simplification:

<blockquote><pre>
block in quick  on egress inet from { 127.0.0.0/8, 192.168.0.0/16, \
   172.16.0.0/12, 10.0.0.0/8 } to any
block out quick on egress inet from any to { 127.0.0.0/8, \
   192.168.0.0/16, 172.16.0.0/12, 10.0.0.0/8 }
</pre></blockquote>

The ruleset has been reduced from eight lines down to two.
Things get even better when macros are used in conjunction with a list:

<blockquote><pre>
NoRouteIPs = "{ 127.0.0.0/8, 192.168.0.0/16, 172.16.0.0/12, 10.0.0.0/8 }"

block in  quick on egress from $NoRouteIPs to any
block out quick on egress from any to $NoRouteIPs
</pre></blockquote>

Note that macros and lists simplify the <tt>pf.conf</tt> file, but the lines
are actually expanded by <a href="https://man.openbsd.org/pfctl">pfctl(8)</a>
into multiple rules.
So, the above example actually expands to the following rules:

<blockquote><pre>
block in  quick on egress inet from 127.0.0.0/8 to any
block in  quick on egress inet from 192.168.0.0/16 to any
block in  quick on egress inet from 172.16.0.0/12 to any
block in  quick on egress inet from 10.0.0.0/8 to any
block out quick on egress inet from any to 10.0.0.0/8
block out quick on egress inet from any to 172.16.0.0/12
block out quick on egress inet from any to 192.168.0.0/16
block out quick on egress inet from any to 127.0.0.0/8
</pre></blockquote>

As you can see, the PF expansion is purely a convenience for the writer
and maintainer of the <tt>pf.conf</tt> file, not an actual simplification
of the rules processed by <a href="https://man.openbsd.org/pf">pf(4)</a>.

<p>
Macros can be used to define more than just addresses and ports; they
can be used anywhere in a PF rules file:

<blockquote><pre>
pre  = "pass in quick on ep0 inet proto tcp from "
post = "to any port { 80, 6667 }"

$pre 198.51.100.80 $post
$pre 203.0.113.79  $post
$pre 203.0.113.178 $post
</pre></blockquote>

Expands to:

<blockquote><pre>
pass in quick on ep0 inet proto tcp from 198.51.100.80 to any port = 80
pass in quick on ep0 inet proto tcp from 198.51.100.80 to any port = 6667
pass in quick on ep0 inet proto tcp from 203.0.113.79  to any port = 80
pass in quick on ep0 inet proto tcp from 203.0.113.79  to any port = 6667
pass in quick on ep0 inet proto tcp from 203.0.113.178 to any port = 80
pass in quick on ep0 inet proto tcp from 203.0.113.178 to any port = 6667
</pre></blockquote>

<h2 id="grammar">PF grammar</h2>

PF's grammar is quite flexible which, in turn, allows for great flexibility
in a ruleset.
PF is able to infer certain keywords which means that they don't have to be
explicitly stated in a rule, and keyword ordering is relaxed such that it
isn't necessary to memorize strict syntax.

<h3 id="elim">Elimination of keywords</h3>

To define a "default deny" policy, two rules are used:

<blockquote><pre>
block in  all
block out all
</pre></blockquote>

This can now be reduced to:

<blockquote><pre>
block
</pre></blockquote>

When no direction is specified, PF will assume the rule applies to
packets moving in both directions.

<p>
Similarly, the "<tt>from any to any</tt>" and "<tt>all</tt>" clauses can
be left out of a rule, for example:

<blockquote><pre>
block in on rl0 all
pass  in quick log on rl0 proto tcp from any to any port 22
</pre></blockquote>

can be simplified as:

<blockquote><pre>
block in on rl0
pass  in quick log on rl0 proto tcp to port 22
</pre></blockquote>

The first rule blocks all incoming packets from anywhere to anywhere on
rl0, and the second rule passes in TCP traffic on rl0 to port 22.

<h3 id="return"><tt>Return</tt> simplification</h3>

A ruleset used to block packets and reply with a TCP RST or ICMP
Unreachable response could look like this:

<blockquote><pre>
block in all
block return-rst  in proto tcp all
block return-icmp in proto udp all
block out all
block return-rst  out proto tcp all
block return-icmp out proto udp all
</pre></blockquote>

This can be simplified as:

<blockquote><pre>
block return
</pre></blockquote>

When PF sees the <tt>return</tt> keyword, it's smart enough to send the
proper response, or no response at all, depending on the protocol of the
packet being blocked.

<h3 id="order">Keyword ordering</h3>

The order in which keywords are specified is flexible in most cases.
For example, a rule written as:

<blockquote><pre>
pass in log quick on rl0 proto tcp to port 22 flags S/SA queue ssh label ssh
</pre></blockquote>

can also be written as:

<blockquote><pre>
pass in quick log on rl0 proto tcp to port 22 queue ssh label ssh flags S/SA
</pre></blockquote>

Other, similar variations will also work.

<p>
</body>
</html>
@


1.55
log
@"keep state" is the default so we don't need to specify it so many times.
@
text
@d155 1
a155 1
are actually expanded by <a href="http://man.openbsd.org/pfctl">pfctl(8)</a>
d172 1
a172 1
of the rules processed by <a href="http://man.openbsd.org/pf">pf(4)</a>.
@


1.54
log
@less "$ext_if" and more egress to simplify example rulesets.
zap some stray <p> tags while here.
@
text
@d237 1
a237 1
pass  in quick log on rl0 proto tcp to port 22 keep state
d273 1
a273 1
pass in log quick on rl0 proto tcp to port 22 flags S/SA keep state queue ssh label ssh
d279 1
a279 1
pass in quick log on rl0 proto tcp to port 22 queue ssh keep state label ssh flags S/SA
@


1.53
log
@tls on openbsd.org is now real:
- link to https://www.openbsd.org from the sub-projects' pages
- make internal links relative
- switch link rel=canonical to https to please some search engines
"go ahead" from beck, "do it!!!!" tj
@
text
@d125 8
a132 8
block in  quick on tl0 inet from 127.0.0.0/8 to any
block in  quick on tl0 inet from 192.168.0.0/16 to any
block in  quick on tl0 inet from 172.16.0.0/12 to any
block in  quick on tl0 inet from 10.0.0.0/8 to any
block out quick on tl0 inet from any to 127.0.0.0/8
block out quick on tl0 inet from any to 192.168.0.0/16
block out quick on tl0 inet from any to 172.16.0.0/12
block out quick on tl0 inet from any to 10.0.0.0/8
d138 1
a138 1
block in quick on tl0 inet from { 127.0.0.0/8, 192.168.0.0/16, \
d140 1
a140 1
block out quick on tl0 inet from any to { 127.0.0.0/8, \
d150 2
a151 3
ExtIF = "tl0"
block in  quick on $ExtIF from $NoRouteIPs to any
block out quick on $ExtIF from any to $NoRouteIPs
d160 8
a167 8
block in  quick on tl0 inet from 127.0.0.0/8 to any
block in  quick on tl0 inet from 192.168.0.0/16 to any
block in  quick on tl0 inet from 172.16.0.0/12 to any
block in  quick on tl0 inet from 10.0.0.0/8 to any
block out quick on tl0 inet from any to 10.0.0.0/8
block out quick on tl0 inet from any to 172.16.0.0/12
block out quick on tl0 inet from any to 192.168.0.0/16
block out quick on tl0 inet from any to 127.0.0.0/8
@


1.52
log
@use <blockquote><pre> instead of just <blockquote>

patch from Vinicius Zavam, thanks!
@
text
@d13 1
a13 1
<link rel="canonical" href="http://www.openbsd.org/faq/pf/shortcuts.html">
@


1.51
log
@silence w3 validator warnings.
@
text
@d111 1
a111 1
<blockquote>
d113 1
a113 1
</blockquote>
@


1.50
log
@sync pf guide formatting with the main faq's style, fixing a few grammar
knits and broken links along the way.

input and ok tb
@
text
@d137 1
a137 1
<blockquote>
d281 1
a281 1
<pre></blockquote>
@


1.49
log
@page titles and <title> should be the same.
@
text
@d4 5
a10 1
<meta name="description"   content="the OpenBSD FAQ page">
d46 9
a54 9
<li><a href="#intro"         >Introduction</a>
<li><a href="#macros"        >Using Macros</a>
<li><a href="#lists"         >Using Lists</a>
<li><a href="#grammar"       >PF Grammar</a>
	<ul>
	<li><a href="#elim"  >Elimination of Keywords</a>
	<li><a href="#return"><tt>Return</tt> Simplification</a>
	<li><a href="#order" >Keyword Ordering</a>
	</ul>
a55 1

a58 7
PF offers many ways in which a ruleset can be simplified. Some good
examples are by using
<a href="macros.html#macros">macros</a> and
<a href="macros.html#lists">lists</a>.
In addition, the ruleset language, or grammar, also offers some
shortcuts for making a ruleset simpler.  As a general rule of thumb, the
simpler a ruleset is, the easier it is to understand and to maintain.
d60 11
a70 1
<h2 id="macros">Using Macros</h2>
d72 2
a73 2
addresses, port numbers, interfaces names, etc., into a ruleset. Did a
server's IP address change? No problem, just update the macro; no need
d78 16
a93 15
A common convention in PF rulesets is to define a macro for each
network interface. If a network card ever needs to be replaced with one
that uses a different driver, for example swapping out a 3Com for an
Intel, the macro can be updated and the filter rules will function as
before. Another benefit is when installing the same ruleset on multiple
machines. Certain machines may have different network cards in them,
and using macros to define the network interfaces allows the rulesets to
be installed with minimal editing. Using macros to define information in
a ruleset that is subject to change, such as port numbers, IP addresses,
and interface names, is recommended practice.
<blockquote>
<tt>
# define macros for each network interface<br>
IntIF = "dc0"<br>
ExtIF = "fxp0"<br>
d95 1
a95 2
</tt>
</blockquote>
d97 8
a104 9
<p>
Another common convention is using macros to define IP addresses and 
network blocks. This can greatly reduce the maintenance of a ruleset
when IP addresses change.
<blockquote>
<tt>
# define our networks<br>
IntNet = "192.168.0.0/24"<br>
ExtAdd = "192.0.2.4"<br>
d106 1
a106 2
</tt>
</blockquote>
a107 1
<p>
d110 1
a111 1
<tt>
a112 1
</tt>
a114 1
<p>
d117 2
a118 1
<h2 id="lists">Using Lists</h2>
d120 12
a131 12
<a href="http://tools.ietf.org/html/rfc1918">RFC 1918</a>
addresses that just shouldn't be floating around the Internet,
and when they are, are usually trying to cause trouble:
<blockquote>
<tt>
block in &nbsp;quick on tl0 inet from 127.0.0.0/8 to any<br>
block in &nbsp;quick on tl0 inet from 192.168.0.0/16 to any<br>
block in &nbsp;quick on tl0 inet from 172.16.0.0/12 to any<br>
block in &nbsp;quick on tl0 inet from 10.0.0.0/8 to any<br>
block out quick on tl0 inet from any to 127.0.0.0/8<br>
block out quick on tl0 inet from any to 192.168.0.0/16<br>
block out quick on tl0 inet from any to 172.16.0.0/12<br>
d133 1
a133 2
</tt>
</blockquote>
a134 1
<p>
d136 1
d138 5
a142 7
<tt>
block in &nbsp;quick on tl0 inet from { 127.0.0.0/8, 192.168.0.0/16, \<br>
&nbsp;&nbsp;&nbsp;172.16.0.0/12, 10.0.0.0/8 } to any<br>
block out quick on tl0 inet from any to { 127.0.0.0/8, \<br>
&nbsp;&nbsp;&nbsp;192.168.0.0/16, 172.16.0.0/12, 10.0.0.0/8 }
</tt>
</blockquote>
a143 1
<p>
d145 7
a151 9
Things get even better when macros are used in conjunction with 
a list:
<blockquote>
<tt>
NoRouteIPs = "{ 127.0.0.0/8, 192.168.0.0/16, 172.16.0.0/12, \<br>
&nbsp;&nbsp;&nbsp;10.0.0.0/8 }"
<br>
ExtIF = "tl0"<br>
block in &nbsp;quick on $ExtIF from $NoRouteIPs to any<br>
d153 1
a153 2
</tt>
</blockquote>
d155 13
a167 15
<p>
Note that macros and lists simplify the <tt>pf.conf</tt> file, but
the lines are actually expanded by 
<a href="http://man.openbsd.org/pfctl.8"
>pfctl(8)</a> into multiple rules.  So, the above example actually
expands to the following rules:
<blockquote>
<tt>
block in &nbsp;quick on tl0 inet from 127.0.0.0/8 to any<br>
block in &nbsp;quick on tl0 inet from 192.168.0.0/16 to any<br>
block in &nbsp;quick on tl0 inet from 172.16.0.0/12 to any<br>
block in &nbsp;quick on tl0 inet from 10.0.0.0/8 to any<br>
block out quick on tl0 inet from any to 10.0.0.0/8<br>
block out quick on tl0 inet from any to 172.16.0.0/12<br>
block out quick on tl0 inet from any to 192.168.0.0/16<br>
d169 1
a169 2
</tt>
</blockquote>
a170 1
<p>
d172 2
a173 4
and maintainer of the <tt>pf.conf</tt> file, not an actual
simplification of the rules processed by 
<a href="http://man.openbsd.org/pf.4"
>pf(4)</a>.
d178 7
a184 10
<blockquote>
<tt>
pre  = "pass in quick on ep0 inet proto tcp from "<br>
post = "to any port { 80, 6667 }"<br>
<br>
# David's classroom<br>
$pre 198.51.100.80 $post<br>
<br>
# Nick's home<br>
$pre 203.0.113.79 $post<br>
d186 1
a186 2
</tt>
</blockquote>
a187 1
<p>
a188 16
<blockquote>
<tt>
pass in quick on ep0 inet proto tcp from 198.51.100.80 to any \<br>
&nbsp;&nbsp;&nbsp;port = 80<br>
pass in quick on ep0 inet proto tcp from 198.51.100.80 to any \<br>
&nbsp;&nbsp;&nbsp;port = 6667<br>
pass in quick on ep0 inet proto tcp from 203.0.113.79 to any \<br>
&nbsp;&nbsp;&nbsp;port = 80<br>
pass in quick on ep0 inet proto tcp from 203.0.113.79 to any \<br>
&nbsp;&nbsp;&nbsp;port = 6667<br>
pass in quick on ep0 inet proto tcp from 203.0.113.178 to any \<br>
&nbsp;&nbsp;&nbsp;port = 80<br>
pass in quick on ep0 inet proto tcp from 203.0.113.178 to any \<br>
&nbsp;&nbsp;&nbsp;port = 6667
</tt>
</blockquote>
d190 18
a207 6
<h2 id="grammar">PF Grammar</h2>
Packet Filter's grammar is quite flexible which, in turn, allows
for great flexibility in a ruleset. PF is able to infer certain
keywords which means that they don't have to be explicitly stated in a
rule, and keyword ordering is relaxed such that it isn't necessary to
memorize strict syntax.
a208 2
<h3 id="elim">Elimination of Keywords</h3>
<p>
d210 3
a212 3
<blockquote>
<tt>
block in &nbsp;all<br>
d214 1
a214 2
</tt>
</blockquote>
a215 1
<p>
d217 2
a218 2
<blockquote>
<tt>
d220 1
a220 2
</tt>
</blockquote>
a221 1
<p>
a227 6
<blockquote>
<tt>
block in on rl0 all<br>
pass &nbsp;in quick log on rl0 proto tcp from any to any port 22 keep state
</tt>
</blockquote>
d229 5
a233 1
<p>
a234 5
<blockquote>
<tt>
block in on rl0<br>
pass &nbsp;in quick log on rl0 proto tcp to port 22 keep state</tt>
</blockquote>
d236 5
a240 1
<p>
d244 2
a245 2
<h3 id="return"><tt>Return</tt> Simplification</h3>
<p>
d248 7
a254 7
<blockquote>
<tt>
block in all<br>
block return-rst in proto tcp all<br>
block return-icmp in proto udp all<br>
block out all<br>
block return-rst out proto tcp all<br>
d256 1
a256 2
</tt>
</blockquote>
a257 1
<p>
d259 2
a260 2
<blockquote>
<tt>
d262 1
a262 2
</tt>
</blockquote>
a263 1
<p>
d268 10
a277 10
<h3 id="order">Keyword Ordering</h3>
<p>
The order in which keywords are specified is flexible in most cases. For
example, a rule written as:
<blockquote>
<tt>
pass in log quick on rl0 proto tcp to port 22 \<br> 
&nbsp;&nbsp;&nbsp;flags S/SA keep state queue ssh label ssh
</tt>
</blockquote>
d279 3
a281 8
<p>
Can also be written as:
<blockquote>
<tt>
pass in quick log on rl0 proto tcp to port 22 \<br>
&nbsp;&nbsp;&nbsp;queue ssh keep state label ssh flags S/SA
</tt>
</blockquote>
a282 1
<p>
d287 1
a287 1
</html> 
@


1.48
log
@tweak [faq index] button and sync the pf user's guide with that style.
@
text
@d4 1
a4 1
<title>PF - Shortcuts For Creating Rulesets</title>
@


1.47
log
@use short form man links in the faq and fix a few broken links
@
text
@a29 2
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->
d35 3
a39 5
<p>
[<a href="index.html">Contents</a>]
[<a href="rdr.html">Previous: Traffic Redirection (Port Forwarding)</a>]
[<a href="options.html">Next: Runtime Options</a>]
<p>
a40 1
<h3>Table of Contents</h3>
d42 4
a45 4
<li><a href="#intro">Introduction</a>
<li><a href="#macros">Using Macros</a>
<li><a href="#lists">Using Lists</a>
<li><a href="#grammar">PF Grammar</a>
d47 1
a47 1
	<li><a href="#elim">Elimination of Keywords</a>
d49 1
a49 1
	<li><a href="#order">Keyword Ordering</a>
a322 5

<p>
[<a href="rdr.html">Previous: Traffic Redirection (Port Forwarding)</a>]
[<a href="index.html">Contents</a>]
[<a href="options.html">Next: Runtime Options</a>]
@


1.46
log
@new openbsd faq style. joint with tj and validator.w3.org
@
text
@d168 1
a168 1
<a href="http://man.openbsd.org/?query=pfctl&amp;sektion=8"
d188 1
a188 1
<a href="http://man.openbsd.org/?query=pf&amp;sektion=4"
@


1.45
log
@add a small sprinkling of css to improve readability in the faq, ok tj@@ tb@@
@
text
@d4 1
a4 1
<title>PF: Shortcuts For Creating Rulesets</title>
d33 1
d35 4
a38 2
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="0">
</a>
d40 1
a41 1
[<a href="index.html">Contents</a>]
a42 1

a43 5
<h1>
<font color="#e00000">PF: Shortcuts For Creating Rulesets</font>
</h1>

<hr>
@


1.44
log
@fix URIs, the / before querystring is not optional,
if not fixed up by browsers the server returns 400 Bad Request.
@
text
@d7 2
@


1.43
log
@change http://www.openbsd.org/cgi-bin/man.cgi to be http://man.openbsd.org
this points stuff to the new place and gets us ready to deprecate the old
place we did this.
@
text
@d169 1
a169 1
<a href="http://man.openbsd.org?query=pfctl&amp;sektion=8"
d189 1
a189 1
<a href="http://man.openbsd.org?query=pf&amp;sektion=4"
@


1.42
log
@
rev for 5.8, mostly removing manpath part of man page urls
@
text
@d169 1
a169 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8"
d189 1
a189 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4"
@


1.41
log
@Clean up meta tags.

name=distribution, name=keywords, and name=resource-type have no effect
in modern search engines and just clutter up the page source.

From Pavel Plamenov.
@
text
@d169 1
a169 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.7"
d189 1
a189 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+5.7"
@


1.40
log
@Add 'link rel="canonical"' to pages, acting as a hint to search engines
to list the copies on www.openbsd.org rather than mirrors.

From Carlin Bingham, ok millert@@ nick@@
@
text
@a5 1
<meta name="resource-type" content="document">
a6 2
<meta name="keywords"      content="openbsd,faq,pf">
<meta name="distribution"  content="global">
@


1.39
log
@
updates for 5.7
@
text
@d10 1
@


1.38
log
@
5.5->5.6 which I forgot and Jonathan Thornburg (jthorn at astro dot
indiana dot edu) reminded me of, but also sent a diff for, thanks!
@
text
@d171 1
a171 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.6"
d191 1
a191 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+5.6"
@


1.37
log
@Convert the pf faq to use id="" instead of "a name=""></a>.
@
text
@d171 1
a171 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.5"
d191 1
a191 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+5.5"
@


1.36
log
@Switch example addresses to the prefixes reserved for documentation in rfc5737.
From Sevan Janiyan, nick@@ ok
@
text
@d63 1
a63 2
<a name="intro"></a>
<h2>Introduction</h2>
d72 1
a72 2
<a name="macros"></a>
<h2>Using Macros</h2>
d124 1
a124 2
<a name="lists"></a>
<h2>Using Lists</h2>
d230 1
a230 2
<a name="grammar"></a>
<h2>PF Grammar</h2>
d237 1
a237 2
<a name="elim"></a>
<h3>Elimination of Keywords</h3>
d281 1
a281 2
<a name="return"></a>
<h3><tt>Return</tt> Simplification</h3>
d309 1
a309 2
<a name="order"></a>
<h3>Keyword Ordering</h3>
@


1.35
log
@
dead link, new link.  From peter dot de dot com, thanks!
@
text
@d109 1
a109 1
ExtAdd = "24.65.13.4"<br>
d206 1
a206 1
$pre 21.14.24.80 $post<br>
d209 2
a210 2
$pre 24.2.74.79 $post<br>
$pre 24.2.74.178 $post
d218 1
a218 1
pass in quick on ep0 inet proto tcp from 21.14.24.80 to any \<br>
d220 1
a220 1
pass in quick on ep0 inet proto tcp from 21.14.24.80 to any \<br>
d222 1
a222 1
pass in quick on ep0 inet proto tcp from 24.2.74.79 to any \<br>
d224 1
a224 1
pass in quick on ep0 inet proto tcp from 24.2.74.79 to any \<br>
d226 1
a226 1
pass in quick on ep0 inet proto tcp from 24.2.74.178 to any \<br>
d228 1
a228 1
pass in quick on ep0 inet proto tcp from 24.2.74.178 to any \<br>
@


1.34
log
@
update for 5.5
@
text
@d129 1
a129 1
<a href="http://www.geektools.com/rfc/rfc1918.txt">RFC 1918</a>
@


1.33
log
@
www@@ removal, normalize footers.
@
text
@d174 1
a174 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.4"
d194 1
a194 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+5.4"
@


1.32
log
@
update for 5.4
@
text
@a4 1
<link rev="made" href="mailto:www@@openbsd.org">
a344 6
<hr>
<a href="index.html"><img height="24" width="24" src="../../images/back.gif" border="0" alt="[back]"></a> 
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
<br>
<small>$OpenBSD: shortcuts.html,v 1.31 2013/05/01 13:21:45 nick Exp $</small>

@


1.31
log
@
updates for 5.3
@
text
@d175 1
a175 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.3"
d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+5.3"
d350 1
a350 1
<small>$OpenBSD: shortcuts.html,v 1.30 2012/11/01 15:06:36 nick Exp $</small>
@


1.30
log
@
enter 5.2
@
text
@d175 1
a175 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.2"
d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+5.2"
d350 1
a350 1
<small>$OpenBSD: shortcuts.html,v 1.29 2012/05/11 11:20:04 nick Exp $</small>
@


1.29
log
@
forgot to actually COMMIT these 5.1 changes.  *sigh*
@
text
@d175 1
a175 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.1"
d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+5.1"
d350 1
a350 1
<small>$OpenBSD: shortcuts.html,v 1.28 2011/11/02 01:01:47 nick Exp $</small>
@


1.28
log
@
rev man page references to 5.0
@
text
@d175 1
a175 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.0"
d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+5.0"
d350 1
a350 1
<small>$OpenBSD: shortcuts.html,v 1.27 2011/05/01 12:57:11 nick Exp $</small>
@


1.27
log
@
updates for 4.9
@
text
@d175 1
a175 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.9"
d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.9"
d350 1
a350 1
<small>$OpenBSD: shortcuts.html,v 1.26 2010/11/01 09:53:51 nick Exp $</small>
@


1.26
log
@
update to 4.8
@
text
@d175 1
a175 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.8"
d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.8"
d350 1
a350 1
<small>$OpenBSD: shortcuts.html,v 1.25 2010/05/19 13:25:16 sthen Exp $</small>
@


1.25
log
@Update the PF faq for 4.7 changes.
@
text
@d175 1
a175 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.7"
d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.7"
d350 1
a350 1
<small>$OpenBSD: shortcuts.html,v 1.24 2009/10/16 19:12:42 nick Exp $</small>
@


1.24
log
@
quick update for 4.6.  much more is needed, at least scrub.html is
currently dead wrong, so I've unlinked it from the rest for now.
@
text
@d175 1
a175 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.6"
d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.6"
d204 1
a204 1
post = "to any port { 80, 6667 } keep state"<br>
d220 1
a220 1
&nbsp;&nbsp;&nbsp;port = 80 keep state<br>
d222 1
a222 1
&nbsp;&nbsp;&nbsp;port = 6667 keep state<br>
d224 1
a224 1
&nbsp;&nbsp;&nbsp;port = 80 keep state<br>
d226 1
a226 1
&nbsp;&nbsp;&nbsp;port = 6667 keep state<br>
d228 1
a228 1
&nbsp;&nbsp;&nbsp;port = 80 keep state<br>
d230 1
a230 1
&nbsp;&nbsp;&nbsp;port = 6667 keep state
d257 1
a257 1
block all
d350 1
a350 1
<small>$OpenBSD: shortcuts.html,v 1.23 2009/04/30 17:27:31 nick Exp $</small>
@


1.23
log
@
updates for 4.5
@
text
@d175 1
a175 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.5"
d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.5"
d350 1
a350 1
<small>$OpenBSD: shortcuts.html,v 1.22 2008/10/31 16:49:34 nick Exp $</small>
@


1.22
log
@
update numbers for 4.4
@
text
@d175 1
a175 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.4"
d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.4"
d350 1
a350 1
<small>$OpenBSD: shortcuts.html,v 1.21 2008/07/27 17:13:47 nick Exp $</small>
@


1.21
log
@
PF updates for 4.3..which got missed a few times.
@
text
@d175 1
a175 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.3"
d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.3"
d350 1
a350 1
<small>$OpenBSD: shortcuts.html,v 1.20 2007/11/01 02:57:56 joel Exp $</small>
@


1.20
log
@Updates for OpenBSD 4.2
@
text
@d175 1
a175 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.2"
d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.2"
d350 1
a350 1
<small>$OpenBSD: shortcuts.html,v 1.19 2007/05/06 18:59:54 nick Exp $</small>
@


1.19
log
@
manpath changes to:
  4.1 for PF related items
  removed for non-PF-related items, which will probably either not
    change much, or benefit from the newest, best man pages.
@
text
@d175 1
a175 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.1"
d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.1"
d350 1
a350 1
<small>$OpenBSD: shortcuts.html,v 1.18 2006/11/01 01:56:01 joel Exp $</small>
@


1.18
log
@Updates for OpenBSD 4.0. uRPF, tftp-proxy, more ftp-proxy, etc.
Thanks to mcbride for the bits about interface groups
@
text
@d175 1
a175 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.0"
d350 1
a350 1
<small>$OpenBSD: shortcuts.html,v 1.17 2006/05/01 00:54:29 nick Exp $</small>
@


1.17
log
@
3.9 updates, mostly rev'ing man page links
@
text
@d175 1
a175 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+3.9"
d350 1
a350 1
<small>$OpenBSD: shortcuts.html,v 1.16 2005/11/01 11:35:18 nick Exp $</small>
@


1.16
log
@
bump manpath= tag for 3.8
@
text
@d175 1
a175 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+3.8"
d350 1
a350 1
<small>$OpenBSD: shortcuts.html,v 1.15 2005/05/20 00:12:02 joel Exp $</small>
@


1.15
log
@Updates for OpenBSD 3.7.
@
text
@d175 1
a175 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+3.7"
d350 1
a350 1
<small>$OpenBSD: shortcuts.html,v 1.14 2004/12/22 04:28:16 david Exp $</small>
@


1.14
log
@make small title logo a link back to main page; ok nick@@
@
text
@d175 1
a175 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.6"
d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+3.6"
d350 1
a350 1
<small>$OpenBSD: shortcuts.html,v 1.13 2004/10/29 17:22:57 nick Exp $</small>
@


1.13
log
@
Update for 3.6
@
text
@d34 3
a36 1
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif">
d350 1
a350 1
<small>$OpenBSD: shortcuts.html,v 1.12 2004/05/07 01:55:24 nick Exp $</small>
@


1.12
log
@
Add an OpenBSD license to the PF User's Guide.
Concept and breakdown of copyrights agreed to by Joel Knight and myself,
license assistance millert@@, ok deraadt@@.
@
text
@d173 1
a173 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.5"
d193 1
a193 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+3.5"
d348 1
a348 1
<small>$OpenBSD: shortcuts.html,v 1.11 2004/04/30 18:00:25 nick Exp $</small>
@


1.11
log
@
PF User's Guide updates for OpenBSD 3.5.
Work done by Joel Knight (enabled et myrealbox.dit com), many, many thanks
to him for providing and maintaining some darned good docs.
@
text
@a10 1
<meta name="copyright"     content="This document copyright 2003-2004 by OpenBSD.">
d13 17
d348 1
a348 1
<small>$OpenBSD: shortcuts.html,v 1.10 2004/01/01 04:16:17 nick Exp $</small>
@


1.10
log
@
Bump copyright to 2004
@
text
@d157 1
a157 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.4"
d177 1
a177 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+3.4"
d332 1
a332 1
<small>$OpenBSD: shortcuts.html,v 1.9 2003/11/27 15:08:25 nick Exp $</small>
@


1.9
log
@
Major update to the PF FAQ from "Mr. PF FAQ", Joel Knight.  THANKS!
@
text
@d11 1
a11 1
<meta name="copyright"     content="This document copyright 2003 by OpenBSD.">
d332 1
a332 1
<small>$OpenBSD: shortcuts.html,v 1.8 2003/11/09 23:29:02 nick Exp $</small>
@


1.8
log
@
Update of PF User's Guide to 3.4.  Ok, really just pointing the man page
links at the 3.4-release man pages rather than the 3.3-release man pages.
Work by Joel Knight.
@
text
@d20 1
a20 1
[<a href="anchors.html">Previous: Anchors and Sub Rulesets</a>]
d22 1
a22 1
[<a href="pools.html">Next: Address Pools and Load Balancing</a>]
d155 1
a155 1
Note that macros and lists simplify the <tt>/etc/pf.conf</tt> file, but
d175 1
a175 1
and maintainer of the <tt>/etc/pf.conf</tt> file, not an actual
d323 1
a323 1
[<a href="anchors.html">Previous: Anchors and Sub Rulesets</a>]
d325 1
a325 1
[<a href="pools.html">Next: Address Pools and Load Balancing</a>]
d332 1
a332 1
<small>$OpenBSD: shortcuts.html,v 1.7 2003/09/22 02:29:03 nick Exp $</small>
@


1.7
log
@
From Joel Knight: changes formatting so that all keywords are
in <i>, all literals are in <tt>, etc.  Excess man page links removed.
No words were changed.
@
text
@d157 1
a157 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.3"
d177 1
a177 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+3.3"
d218 2
a219 2
With the release of OpenBSD 3.3, PF's grammar has been tuned to allow
for greater flexibility in a ruleset. PF is now able to infer certain
d221 2
a222 1
rule.  Ordering of keywords is also not as strict as it used to be.
d332 1
a332 1
<small>$OpenBSD: shortcuts.html,v 1.6 2003/09/16 01:23:49 nick Exp $</small>
@


1.6
log
@
Grammar and punctuation clean up, from Joel Knight.
Only a very few words changed.
@
text
@d39 1
a39 1
	<li><a href="#return">Return Simplification</a>
d117 4
a120 4
block in quick on tl0 inet from 127.0.0.0/8 to any<br>
block in quick on tl0 inet from 192.168.0.0/16 to any<br>
block in quick on tl0 inet from 172.16.0.0/12 to any<br>
block in quick on tl0 inet from 10.0.0.0/8 to any<br>
d132 1
a132 1
block in quick on tl0 inet from { 127.0.0.0/8, 192.168.0.0/16, \<br>
d149 1
a149 1
block in quick on $ExtIF from $NoRouteIPs to any<br>
d162 4
a165 4
block in quick on tl0 inet from 10.0.0.0/8 to any<br>
block in quick on tl0 inet from 172.16.0.0/12 to any<br>
block in quick on tl0 inet from 192.168.0.0/16 to any<br>
block in quick on tl0 inet from 127.0.0.0/8 to any<br>
d229 1
a229 1
block in all<br>
d269 1
a269 1
<h3>Return Simplification</h3>
d331 1
a331 1
<small>$OpenBSD: shortcuts.html,v 1.5 2003/06/13 02:54:08 nick Exp $</small>
@


1.5
log
@
Improved wrapping of man page links, renders better on some browsers.
No words altered.  From Joel Knight.
@
text
@d54 1
a54 1
simpler a ruleset is the easier it is to understand and to maintain.
d59 1
a59 1
addresses, port numbers, interfaces names, etc into a ruleset. Did a
d70 1
a70 1
machines. Certain machines may have different network cards in them
d155 1
a155 1
Note that macros and lists simplify the <tt>/etc/pf.conf</tt> file but
d226 1
a226 1
To define a "default deny" policy two rules are used:
d331 1
a331 1
<small>$OpenBSD: shortcuts.html,v 1.4 2003/05/15 03:03:54 nick Exp $</small>
@


1.4
log
@
Table of Contents now on each page.  Work by Joel Knight (yay! Joel! 8-).
@
text
@d157 2
a158 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.3">
pfctl(8)</a> into multiple rules.  So, the above example actually
d177 2
a178 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+3.3">
pf(4)</a>.
d331 1
a331 1
<small>$OpenBSD: shortcuts.html,v 1.3 2003/05/12 03:27:58 nick Exp $</small>
@


1.3
log
@
one line diff from Henning@@ which snowballed out of control.  Improvements
from Joel Knight and me.
@
text
@d31 17
a47 1
<p>
d223 2
a224 1
<h3>Elimination of Key Words</h3>
d268 1
d297 1
d331 1
a331 1
<small>$OpenBSD: shortcuts.html,v 1.2 2003/05/01 14:20:37 nick Exp $</small>
@


1.2
log
@
ARGH!  no, it is "ruleset", not "rule set".  Pointed out by Margarida@@
@
text
@d207 1
d227 5
a231 2
packets moving in both directions. In fact, the <tt>all</tt> keyword is
optional as well:
d234 2
a235 1
block
d240 10
a249 2
This will block all packets moving in either direction from anywhere to
anywhere on all interfaces.
d251 1
d279 1
d285 1
a285 1
pass in log quick on rl0 proto tcp from any to any port 22 \<br> 
d294 1
a294 1
pass in quick log on rl0 proto tcp from any to any port 22 \<br>
d312 1
a312 1
<small>$OpenBSD: shortcuts.html,v 1.1 2003/05/01 01:46:06 nick Exp $</small>
@


1.1
log
@
The long awaited, new PF FAQ!
Most of it written by Joel Knight >enabled at myrealbox dot com<,
some parts by me, a few parts yanked out of the old PF FAQ.
GREAT work, Joel!
@
text
@d4 1
a4 1
<title>PF: Shortcuts For Creating Rule Sets</title>
d20 1
a20 1
[<a href="anchors.html">Previous: Anchors and Sub Rule Sets</a>]
d26 1
a26 1
<font color="#e00000">PF: Shortcuts For Creating Rule Sets</font>
d32 1
a32 1
PF offers many ways in which a rule set can be simplified. Some good
d36 3
a38 3
In addition, the rule set language, or grammar, also offers some
shortcuts for making a rule set simpler.  As a general rule of thumb, the
simpler a rule set is the easier it is to understand and to maintain.
d43 1
a43 1
addresses, port numbers, interfaces names, etc into a rule set. Did a
d49 1
a49 1
A common convention in PF rule sets is to define a macro for each
d53 1
a53 1
before. Another benefit is when installing the same rule set on multiple
d55 1
a55 1
and using macros to define the network interfaces allows the rule sets to
d57 1
a57 1
a rule set that is subject to change, such as port numbers, IP addresses,
d70 1
a70 1
network blocks. This can greatly reduce the maintenance of a rule set
d91 1
a91 1
Once the rule set is reloaded, everything will work as before.
d95 1
a95 1
Let's look at a good set of rules to have in your rule set to handle
d124 1
a124 1
The rule set has been reduced from eight lines down to two.
d203 1
a203 1
for greater flexibility in a rule set. PF is now able to infer certain
d239 1
a239 1
A rule set used to block packets and reply with a TCP RST or ICMP
d288 1
a288 1
[<a href="anchors.html">Previous: Anchors and Sub Rule Sets</a>]
d297 1
a297 1
<small>$OpenBSD$</small>
@

