head	1.32;
access;
symbols;
locks; strict;
comment	@# @;


1.32
date	2014.04.01.17.18.45;	author nick;	state dead;
branches;
next	1.31;

1.31
date	2013.11.01.18.04.05;	author ajacoutot;	state Exp;
branches;
next	1.30;

1.30
date	2013.05.01.17.39.07;	author ajacoutot;	state Exp;
branches;
next	1.29;

1.29
date	2013.05.01.14.42.14;	author ajacoutot;	state Exp;
branches;
next	1.28;

1.28
date	2012.11.02.07.24.05;	author ajacoutot;	state Exp;
branches;
next	1.27;

1.27
date	2012.05.13.16.30.18;	author ajacoutot;	state Exp;
branches;
next	1.26;

1.26
date	2012.01.21.19.34.39;	author ajacoutot;	state Exp;
branches;
next	1.25;

1.25
date	2009.11.07.07.32.54;	author ajacoutot;	state Exp;
branches;
next	1.24;

1.24
date	2009.05.04.19.07.52;	author tobias;	state Exp;
branches;
next	1.23;

1.23
date	2008.11.01.11.02.22;	author tobias;	state Exp;
branches;
next	1.22;

1.22
date	2008.08.10.16.14.28;	author tobias;	state Exp;
branches;
next	1.21;

1.21
date	2007.11.12.20.29.59;	author saad;	state Exp;
branches;
next	1.20;

1.20
date	2007.05.10.12.43.45;	author saad;	state Exp;
branches;
next	1.19;

1.19
date	2007.05.09.05.49.52;	author jufi;	state Exp;
branches;
next	1.18;

1.18
date	2007.04.26.03.08.05;	author jufi;	state Exp;
branches;
next	1.17;

1.17
date	2007.02.10.05.22.16;	author saad;	state Exp;
branches;
next	1.16;

1.16
date	2006.11.01.11.30.45;	author jufi;	state Exp;
branches;
next	1.15;

1.15
date	2006.08.08.07.14.20;	author saad;	state Exp;
branches;
next	1.14;

1.14
date	2006.07.29.09.33.04;	author saad;	state Exp;
branches;
next	1.13;

1.13
date	2006.05.01.12.19.17;	author jufi;	state Exp;
branches;
next	1.12;

1.12
date	2006.04.25.08.25.49;	author saad;	state Exp;
branches;
next	1.11;

1.11
date	2005.11.04.20.24.23;	author jufi;	state Exp;
branches;
next	1.10;

1.10
date	2005.09.20.07.30.02;	author saad;	state Exp;
branches;
next	1.9;

1.9
date	2005.05.22.17.38.07;	author saad;	state Exp;
branches;
next	1.8;

1.8
date	2005.05.20.17.13.26;	author jufi;	state Exp;
branches;
next	1.7;

1.7
date	2005.02.08.13.59.02;	author jufi;	state Exp;
branches;
next	1.6;

1.6
date	2005.01.18.17.18.10;	author jufi;	state Exp;
branches;
next	1.5;

1.5
date	2004.12.22.20.00.48;	author jufi;	state Exp;
branches;
next	1.4;

1.4
date	2004.12.08.05.22.43;	author saad;	state Exp;
branches;
next	1.3;

1.3
date	2004.11.18.19.39.13;	author jufi;	state Exp;
branches;
next	1.2;

1.2
date	2004.11.14.20.22.40;	author jufi;	state Exp;
branches;
next	1.1;

1.1
date	2003.11.27.19.39.09;	author horacio;	state Exp;
branches;
next	;


desc
@@


1.32
log
@
missed another one...
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF: Anker</title>
<link rev="made" href="mailto:www@@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq,pf">
<meta name="distribution"  content="global">
</head>

<!--
Copyright (c) 2003-2007 Joel Knight <enabled@@myrealbox.com>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<a href="../../../de/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../../images/smalltitle.gif" border="0">
</a>
<p>
[<a href="options.html">Zurück: Laufzeitoptionen</a>]
[<a href="index.html">Inhalt</a>]
[<a href="queueing.html">Weiter: Paket-Queueing und Priorisierung</a>]

<p>
<h1><font color="#e00000">PF: Anker</font></h1>

<hr>

<h3>Inhaltsverzeichnis</h3>
<ul>
<li><a href="#intro">Einführung</a>
<li><a href="#anchors">Anker</a>
<li><a href="#options">Ankeroptionen</a>
<li><a href="#manip">Anker manipulieren</a>
</ul>

<hr>

<a name="intro"></a>
<h2>Einführung</h2>
Zusätzlich zu den Hauptregelsätzen kann PF ebenfalls Unterregelsätze
festsetzen. Seit Unterregelsätze zur Laufzeit mit
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.4"
>pfctl(8)</a> manipuliert werden können, bieten sie einen praktischen
Weg, um einen aktiven Regelsatz dynamisch zu verändern.
Während eine <a href="tables.html">Tabelle</a> benutzt wird, um eine dynamische
Liste von Adressen vorzuhalten, wird ein Unter-Regelsatz zur Vorhaltung einer
dynamischen Gruppe von Regeln genutzt.
Ein Unterregelsatz wird an den Hauptregelsatz mit Hilfe eines <tt>anchor</tt>
angehängt.

<p>
Anker können verschachtelt werden. Damit ist es möglich,
Unterregelsätze in Reihe zusammenzuschließen. Ankerregeln werden
relativ zu dem Anker zugewiesen, in welchem sie geladen werden.
Zum Beispiel werden im Hauptregelsatz befindliche Ankerregeln
Ankeranhänge erzeugen, die auf den Hauptregelsatz als Eltern
verweisen. Ankerregeln, die aus Dateien mit der
<tt>load anchor</tt>-Direktive geladen wurden, werden
Ankerpunkte mit eben jenem Anker als Elternanker erstellen.

<a name="named"></a>
<a name="anchors"></a>
<h2>Anker</h2>
Ein Anker ist eine Anhäufung von Regeln, Tabellen und anderen Ankern,
denen ein Name zugewiesen wurde.
Wenn PF auf eine <tt>anchor</tt>-Regel im Hauptregelsatz trifft, werden
die Regeln, die in diesem Anker liegen, genauso wie die Regeln
im Hauptregelsatz zugewiesen.
Die Verarbeitung wird dann im Hauptregelsatz fortgesetzt,
es sei denn das Paket entsprach einer Filterregel mit gesetzter
<tt>quick</tt>-Option, in welchem Fall die Entsprechung als endgültig
angesehen, und die Regelverarbeitung sowohl im Anker als auch im Hauptregelsatz
abgebrochen wird.


<p>
Zum Beispiel:
<blockquote>
<tt>
ext_if = "fxp0"<br>
<br>
block on $ext_if<br>
pass &nbsp;out on $ext_if<br>
anchor goodguys
</tt>
</blockquote>

<p>
Dieser Regelsatz setzt eine »standardmäßig blocken«-Richtlinie auf
<tt>fxp0</tt> für sowohl einkommenden als auch ausgehenden Verkehr.
Der Verkehr wird dann zustandsmäßig (statefully) herausgelassen und
eine Ankerregel wird mit dem Namen <tt>goodguys</tt> erstellt. Anker
können auf drei Arten mit Regeln gefüllt werden:
<ul>
<li>eine <tt>load</tt>-Regel verwenden
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.4"
>pfctl(8)</a>
verwenden
<li>die Regeln innerhalb des Hauptregelsatzes angeben
</ul>

<p>
Die <tt>load</tt>-Regel sorgt dafür, dass <tt>pfctl</tt> den angegebenen
Anker anlegt, indem Regeln aus einer Textdatei gelesen werden. Die
<tt>load</tt>-Regel muss nach der <tt>anchor</tt>-Regel angegeben
werden. Beispiel:
<blockquote>
<tt>
anchor goodguys<br>
load anchor goodguys from "/etc/anchor-goodguys-ssh"
</tt>
</blockquote>

<p>
Um Regeln unter Verwendung von <tt>pfctl</tt> einem Anker hinzuzufügen,
kann der folgende Befehlstyp verwendet werden:
<blockquote>
<tt>
# echo "pass in proto tcp from 192.0.2.3 to any port 22" \<br>
&nbsp;&nbsp;&nbsp;| pfctl -a goodguys -f -
</tt>
</blockquote>

<p>
Regeln können ebenfalls in eine Textdatei geschrieben und geladen
werden:
<blockquote>
<tt>
# cat &gt;&gt; /etc/anchor-goodguys-www<br>
pass in proto tcp from 192.0.2.3 to any port 80<br>
pass in proto tcp from 192.0.2.4 to any port { 80 443 }<br>
<br>
# pfctl -a goodguys -f /etc/anchor-goodguys-www<br>
</tt>
</blockquote>

<p>
Um Regeln direkt aus dem Hauptregelsatz zu laden, schließe deine
Ankerregeln in geschweiften Klammern ein:

<blockquote>
<tt>
anchor "goodguys" { <br>
&nbsp;&nbsp;&nbsp;pass in proto tcp from 192.168.2.3 to port 22<br>
}
</tt>
</blockquote>

<p>
Direkt eingetragene Anker können weitere Anker beinhalten.

<blockquote>
<tt>
allow = "{ 192.0.2.3 192.0.2.4 }" <br>
<br>
anchor "goodguys" { <br>
&nbsp;&nbsp;&nbsp;anchor { <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pass in proto tcp from 192.0.2.3 to port 80 <br>
&nbsp;&nbsp;&nbsp;} <br>
&nbsp;&nbsp;&nbsp;pass in proto tcp from $allow to port 22<br>
}
</tt>
</blockquote>

Bei der Verwendung von direkt angegebenen Ankern wird der Ankername
optional. Der eingebettete Anker im oben angegebenen Fall hat zum
Beispiel keinen Namen. Des Weiteren wurde das Makro <tt>$allow</tt>
außerhalb des Ankers (im Hauptregelsatz) erstellt und kann dennoch im
Anker verwendet werden.

<p>
Regeln können unter Verwendung der gleichen Syntax und Optionen in einen Anker
geladen werden, wie es für das Laden von Regeln in den Hauptregelsatz gilt.
Ein Haken jedoch ist, dass jegliche <a href="macros.html">Makros</a>,
die verwendet werden, ebenfalls im Anker definiert
werden müssen - es sei denn, du verwendest direkt angegebene Anker.
Makros, die im Elternregelsatz definiert wurden, sind von
Ankern aus <i>nicht</i> sichtbar.

<p>
Da Anker verschachtelt werden können, ist es möglich anzugeben, dass
alle Kindanker innerhalb eines angegebenen Ankers verarbeitet werden:

<blockquote>
<tt>
anchor "spam/*"
</tt>
</blockquote>

<p>
Diese Syntax sorgt dafür, dass alle Regeln innerhalb eines jeden
Ankers, der an den <tt>spam</tt>-Anker angehängt wurde, ausgewertet
werden.
Die Kindanker werden in alphabetischer Reihenfolge ausgewertet,
verlieren sich aber nicht in Rekursivitäten. Anker werden immer relativ
zum Anker ausgewertet, in dem sie definiert worden sind.

<p>
Jeder Anker - wie auch der Hauptregelsatz - existiert separat
neben anderen Regelsätzen. Operationen, die in einem Regelsatz
ausgeführt werden (wie zum Beispiel die Regeln zu flushen), haben keine
Auswirkung auf andere. Ebenfalls wird das Entfernen eines Ankerpunktes
aus dem Hauptregelsatz keinen Anker oder irgendeinen Kindanker
zerstören, die diesem Anker angehängt worden sind. Ein Anker wird nicht
zerstört, bis er von allen Regeln unter Verwendung von
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.4"
>pfctl(8)</a> geflusht wird und sich kein Kindanker mehr in
diesem Anker befindet.

<a name="options"></a>
<h2>Ankeroptionen</h2>
Wenn gewünscht, können <tt>anchor</tt>-Regeln ein Interface, Protokoll,
Quell- und Zieladresse, Tags etc. unter Verwendung der selben
Syntax der Filterregeln spezifizieren. Wenn solche Informationen gegeben
sind, werden <tt>anchor</tt>-Regeln nur verarbeitet, wenn das Paket mit
der Regeldefinition vom <tt>anchor</tt> übereinstimmt. Zum Beispiel:
<blockquote>
<tt>
ext_if = "fxp0"<br>
<br>
block on $ext_if<br>
pass &nbsp;out on $ext_if<br>
anchor ssh in on $ext_if proto tcp to port 22<br>
</tt>
</blockquote>

<p>
Die Regeln in dem Anker <tt>ssh</tt> werden nur für TCP-Pakete
verarbeitet, die für den Port 22 bestimmt sind und über <tt>fxp0</tt>
hereinkommen. Regeln werden wie folgt dem <tt>anchor</tt> angehängt:
<blockquote>
<tt>
# echo "pass in from 192.0.2.10 to any" | pfctl -a ssh -f -
</tt>
</blockquote>

<p>
Selbst wenn die Filterregel kein Interface, Protokoll oder Port
angibt, wird dem Host 192.0.2.10 die Verbindung nur erlaubt sein, wenn
er SSH verwendet, da die Definition der <tt>anchor</tt>-Regel greift.

<p>
Die gleiche Syntax kann auch in direkt angegebenen Ankern verwendet
werden.

<blockquote>
<tt>
allow = "{ 192.0.2.3 192.0.2.4 }" <br>
<br>
anchor "goodguys" in proto tcp { <br>
&nbsp;&nbsp;&nbsp;anchor proto tcp to port 80 { <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pass from 192.0.2.3 <br>
&nbsp;&nbsp;&nbsp;} <br>
&nbsp;&nbsp;&nbsp;anchor proto tcp to port 22 { <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pass from $allow<br>
&nbsp;&nbsp;&nbsp;} <br>
}
</tt>
</blockquote>


<a name="manip"></a>
<h2>Anker manipulieren</h2>
Die Manipulation von Ankern wird durch <tt>pfctl</tt> bewerkstelligt.
Sie kann verwendet werden, um Regeln einem Anker hinzuzufügen oder zu
löschen, ohne den Hauptregelsatz neuzuladen.

<p>
Um alle Regeln in dem Anker namens <tt>ssh</tt> aufzulisten:
<blockquote>
<tt>
# pfctl -a ssh -s rules
</tt>
</blockquote>


<p>
Um alle Regeln eines Ankers zu leeren:
<blockquote>
<tt>
# pfctl -a ssh -F rules
</tt>
</blockquote>

<p>
Für eine vollständige Liste der Kommandos, siehe bitte
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.4"
>pfctl(8)</a>.

<p>
[<a href="options.html">Zurück: Laufzeitoptionen</a>]
[<a href="index.html">Inhalt</a>]
[<a href="queueing.html">Weiter: Paket-Queueing und Priorisierung</a>]

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[zurück]"></a>
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: anchors.html,v 1.35 ]<br>
$Translation: anchors.html,v 1.31 2013/11/01 16:59:45 steffen Exp $<br>
-->
$OpenBSD: anchors.html,v 1.31 2013/11/01 18:04:05 ajacoutot Exp $
</small>

</body>
</html>
@


1.31
log
@Sync with Steelix CVS
@
text
@d324 1
a324 1
$OpenBSD$
@


1.30
log
@Sync with Steelix CVS
@
text
@d61 1
a61 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.3"
d115 1
a115 1
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.3"
d225 1
a225 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.3"
d306 1
a306 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.3"
d321 2
a322 2
Originally [OpenBSD: anchors.html,v 1.34 ]<br>
$Translation: anchors.html,v 1.30 2013/05/01 16:34:16 steffen Exp $<br>
@


1.29
log
@Sync with Steelix CVS
@
text
@d321 2
a322 2
Originally [OpenBSD: anchors.html,v 1.33 ]<br>
$Translation: anchors.html,v 1.29 2013/05/01 13:35:26 steffen Exp $<br>
@


1.28
log
@Sync with Steelix CVS
@
text
@d61 1
a61 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.2"
d115 1
a115 1
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.2"
d225 1
a225 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.2"
d306 1
a306 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.2"
d322 1
a322 1
$Translation: anchors.html,v 1.28 2012/11/01 20:43:18 steffen Exp $<br>
@


1.27
log
@Sync with Steelix CVS
@
text
@d61 1
a61 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.1"
d115 1
a115 1
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.1"
d225 1
a225 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.1"
d306 1
a306 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.1"
d321 2
a322 2
Originally [OpenBSD: anchors.html,v 1.32 ]<br>
$Translation: anchors.html,v 1.27 2012/05/11 17:06:29 steffen Exp $<br>
@


1.26
log
@Sync with Steelix CVS
@
text
@d61 1
a61 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.0"
d115 1
a115 1
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.0"
d225 1
a225 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.0"
d306 1
a306 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.0"
d321 2
a322 2
Originally [OpenBSD: anchors.html,v 1.31 ]<br>
$Translation: anchors.html,v 1.26 2012/01/19 21:33:34 steffen Exp $<br>
@


1.25
log
@Sync with Steelix CVS
@
text
@d61 1
a61 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.6"
d63 6
a68 5
Weg, um einen aktiven Regelsatz dynamisch zu verändern. Während eine
<a href="tables.html">Tabelle</a> eine dynamische Liste von Adressen
enthält, wird ein Unterregelsatz verwendet, um einen dynamischen Satz
an Filter-, <tt>nat</tt>-, <tt>rdr</tt>- und <tt>binat</tt>-Regeln zu
halten.
a70 16
Unterregelsätze werden mit Hilfe von Ankern an den Hauptregelsatz
angehängt. Es gibt vier Typen dieser <tt>Anker</tt>-Regeln:
<ul>
<li><tt>anchor <i>name</i></tt> - weist alle <a
href="filter.html">Filter</a>-Regeln dem Anker <i><tt>name</tt></i> zu.
<li><tt>binat-anchor <i>name</i></tt> - weist alle
<a href="nat.html#binat"><tt>binat</tt></a>-Regeln dem Anker
<i><tt>name</tt></i> zu.
<li><tt>nat-anchor <i>name</i></tt> - weist alle <a
href="nat.html"><tt>nat</tt></a>-Regeln dem Anker <i><tt>name</tt></i>
zu.
<li><tt>rdr-anchor <i>name</i></tt> - weist alle <a
href="rdr.html"><tt>rdr</tt></a>-Regeln dem Anker <i><tt>name</tt></i>
zu.
</ul>

d83 2
a84 2
Ein Anker ist eine Sammlung von Filter- und/oder Übersetzungsregeln,
Tabellen und anderen Ankern, denen ein Name zugewiesen wurde.
d87 6
a92 6
im Hauptregelsatz zugewiesen. Die Verarbeitung wird dann mit
dem Hauptregelsatz weitergesetzt - es sei denn, das Paket trifft auf
eine Filterregel, die die <tt>quick</tt>-Option gesetzt hat, oder auf
eine Übersetzungsregel innerhalb des Ankers zu. In diesem Fall wird die
Übereinstimmung als final angesehen und die Überprüfungen der Regeln
sowohl im Anker als auch im Hauptregelsatz beendet.
d101 2
a102 2
block on $ext_if all<br>
pass &nbsp;out on $ext_if all keep state<br>
d115 1
a115 1
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.6"
d191 2
a192 3
Filter- und Übersetzungsregeln können unter Verwendung der gleichen
Syntax und Optionen in einen Anker wie Regeln in den
Hauptregelsatz geladen werden.
d225 1
a225 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.6"
d240 3
a242 3
block on $ext_if all<br>
pass &nbsp;out on $ext_if all keep state<br>
anchor ssh in on $ext_if proto tcp from any to any port 22<br>
d297 1
a297 1
Um alle Filterregeln von dem gleichen Anker zu flushen:
d306 1
a306 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.6"
d321 2
a322 2
Originally [OpenBSD: anchors.html,v 1.27 ]<br>
$Translation: anchors.html,v 1.25 2009/11/05 12:55:49 tobias Exp $<br>
@


1.24
log
@Sync with Steelix CVS
@
text
@d38 1
a38 1
[<a href="scrub.html">Zurück: Scrub (Paketnormalisierung)</a>]
d61 1
a61 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.5"
d130 1
a130 1
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.5"
d241 1
a241 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.5"
d322 1
a322 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.5"
d326 1
a326 1
[<a href="scrub.html">Zurück: Scrub (Paketnormalisierung)</a>]
d337 2
a338 2
Originally [OpenBSD: anchors.html,v 1.26 ]<br>
$Translation: anchors.html,v 1.24 2009/05/03 12:44:31 tobias Exp $<br>
@


1.23
log
@Sync with Steelix CVS
@
text
@d61 1
a61 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.4"
d130 1
a130 1
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.4"
d241 1
a241 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.4"
d322 1
a322 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.4"
d337 2
a338 2
Originally [OpenBSD: anchors.html,v 1.25 ]<br>
$Translation: anchors.html,v 1.23 2008/11/01 09:15:06 paldium Exp $<br>
@


1.22
log
@Sync with Steelix CVS
@
text
@d61 1
a61 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.3"
d130 1
a130 1
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.3"
d241 1
a241 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.3"
d322 1
a322 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.3"
d337 2
a338 2
Originally [OpenBSD: anchors.html,v 1.24 ]<br>
$Translation: anchors.html,v 1.22 2008/08/04 14:41:03 paldium Exp $<br>
@


1.21
log
@Sync with Steelix CVS
@
text
@d61 1
a61 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.2"
d130 1
a130 1
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.2"
d241 1
a241 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.2"
d322 1
a322 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.2"
d337 2
a338 2
Originally [OpenBSD: anchors.html,v 1.23 ]<br>
$Translation: anchors.html,v 1.21 2007/11/03 10:45:40 paldium Exp $<br>
@


1.20
log
@Sync with Steelix CVS
@
text
@d61 1
a61 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.1"
d130 1
a130 1
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.1"
d241 1
a241 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.1"
d322 1
a322 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.1"
d337 2
a338 2
Originally [OpenBSD: anchors.html,v 1.22 ]<br>
$Translation: anchors.html,v 1.20 2007/05/09 14:08:40 paldium Exp $<br>
@


1.19
log
@Sync with steelix translation CVS
@
text
@d14 1
a14 1
Copyright (c) 2003-2005 Joel Knight <enabled@@myrealbox.com>
d127 1
a127 1
können auf zwei Arten mit Regeln gefüllt werden:
d133 1
d172 34
d211 2
a212 1
werden müssen. Makros, die im Elternregelsatz definiert wurden, sind von
d277 20
d337 2
a338 2
Originally [OpenBSD: anchors.html,v 1.21 ]<br>
$Translation: anchors.html,v 1.19 2007/05/06 20:44:29 simon Exp $<br>
@


1.18
log
@Sync with steelix translation CVS
@
text
@d61 1
a61 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d130 1
a130 1
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d205 1
a205 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d266 1
a266 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d281 2
a282 2
Originally [OpenBSD: anchors.html,v 1.20 ]<br>
$Translation: anchors.html,v 1.18 2007/04/25 15:41:14 paldium Exp $<br>
@


1.17
log
@sync with Steelix CVS
@
text
@d276 1
a276 1
<a href="index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[zurück]"></a> 
d282 1
a282 1
$Translation: anchors.html,v 1.17 2007/02/09 18:13:48 paldium Exp $<br>
d288 1
a288 1
</html> 
@


1.16
log
@sync with steelix translation CVS
@
text
@d212 1
a212 1
Quell- und Zieladresse, Tags, etc. unter Verwendung der selben
d282 1
a282 1
$Translation: anchors.html,v 1.16 2006/11/01 10:48:50 paldium Exp $<br>
@


1.15
log
@sync with Steelix CVS
@
text
@d61 1
a61 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d130 1
a130 1
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d205 1
a205 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d266 1
a266 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d281 2
a282 2
Originally [OpenBSD: anchors.html,v 1.19 ]<br>
$Translation: anchors.html,v 1.15 2006/08/06 14:06:56 paldium Exp $<br>
@


1.14
log
@sync
@
text
@d60 1
a60 1
festsetzen. Seit Unterregelsätze zur Laufzeit unter Verwendung von
d64 4
a67 4
<a href="tables.html">Tabelle</a> verwendet wird, um eine dynamische
Liste von Adressen zu halten, wird ein Unterregelsatz verwendet, um
einen dynamischen Satz von Filter-, <tt>nat</tt>-, <tt>rdr</tt>- und
<tt>binat</tt>-Regeln zu halten.
d74 1
a74 1
href="filter.html">Filter</a>-Regeln dem Anker <i><tt>name</tt></i> zu
d77 1
a77 1
<i><tt>name</tt></i> zu
d80 1
a80 1
zu
d83 1
a83 1
zu
d91 1
a91 1
verweisen. Ankerregeln, die von Dateien mit der
d100 8
a107 9
Wenn PF auf eine <tt>anchor</tt>-Regel im Hauptregelsatz trifft, wird
es die Regeln, die in diesem Anker liegen, genauso wie die Regeln
im Hauptregelsatz zuweisen. Die Verarbeitung wird dann mit
dem Hauptregelsatz weitergesetzt - es sei denn, das Paket trifft auf eine
Filterregel, die die <tt>quick</tt>-Option gesetzt hat, oder auf eine
Übersetzungsregel innerhalb des Ankers zu, so dass in diesem Fall die
Übereinstimmung als final angesehen wird und in einem Abbruch der
Überprüfungen der Regeln in sowohl dem Anker als auch im Hauptregelsatz
endet.
d137 1
a137 1
Anker durch das Lesen von Regeln aus einer Textdatei anlegt. Die
d176 2
a177 2
werden müssen; Makros, die im Elternregelsatz definiert worden sind,
sind von Ankern aus <i>nicht</i> sichtbar.
d194 2
a195 3
aber verlieren sich nicht in Rekursivitäten.
Anker werden immer relativ zu dem Anker, in welchem sie definiert
wurden, ausgewertet.
d198 7
a204 7
Jeder Anker, wie auch der Hauptregelsatz, existiert separat
neben anderen Regelsätzen. Operationen, die in einem Regelsatz ausgeführt
werden, wie zum Beispiel die Regeln zu flushen, haben keine Auswirkung
auf andere. Ebenfalls wird das Entfernen eines Ankerpunktes aus dem
Hauptregelsatz keinen Anker oder irgendeinen Kindanker
zerstören, die diesem Anker angehängt worden sind. Ein Anker
wird nicht zerstört, bis er von allen Regeln unter Verwendung von
d228 2
a229 3
verarbeitet, die für den Port 22 bestimmt sind und über
<tt>fxp0</tt> hereinkommen. Regeln werden wie folgt dem
<tt>anchor</tt> angehängt:
d237 1
a237 1
So, selbst wenn die Filterregel kein Interface, Protokoll oder Port
d243 1
a243 1
Die Manipulierung von Ankern wird durch <tt>pfctl</tt> bewerkstelligt.
d282 1
a282 1
$Translation: anchors.html,v 1.14 2006/07/26 17:51:59 paldium Exp $<br>
@


1.13
log
@3.9 release time.
@
text
@d51 1
a51 1
<li><a href="#options">Anker-Optionen</a>
d60 1
a60 1
festsetzen. Seit Unterregelsätze ,on the fly' unter Verwendung von
d62 2
a63 2
>pfctl(8)</a> manipuliert werden können, bieten sie einen praktischen Weg,
um einen aktiven Regelsatz dynamisch zu verändern. Während eine
d73 2
a74 2
<li><tt>anchor <i>name</i></tt> - weist alle <a href="filter.html">
Filter</a>regeln dem Anker <i><tt>name</tt></i> zu
d78 6
a83 4
<li><tt>nat-anchor <i>name</i></tt> - weist alle <a href="nat.html">
<tt>nat</tt></a>-Regeln dem Anker <i><tt>name</tt></i> zu
<li><tt>rdr-anchor <i>name</i></tt> - weist alle <a href="rdr.html">
<tt>rdr</tt></a>-Regeln dem Anker <i><tt>name</tt></i> zu
d86 6
a91 7
Anker können verschachtelt werden, was es ermöglicht, dass
Unterregelsätze in Reihe zusammengeschlossen werden können.
Anker-Regeln werden relativ zu dem Anker zugewiesen, in
welchem sie geladen werden.
Zum Beispiel werden im Hauptregelsatz befindliche Anker-Regeln
Anker-Anhänge erzeugen, die auf den Hauptregelsatz als Eltern
verweisen und Anker-Regeln, die von Dateien mit der
d93 1
a93 1
Anker-Punkte mit eben jenem Anker als Eltern-Anker erstellen.
d98 1
a98 1
Ein Anker ist eine Kollektion von Filter- und/oder Übersetzungsregeln,
d103 1
a103 1
dem Hauptregelsatz weitergesetzt, außer das Paket trifft auf eine
d124 1
a124 1
Dieser Regelsatz setzt eine ,standardmäßiges Blocken'-Richtlinie auf
d140 1
a140 2
werden.
Beispiel:
d159 2
a160 1
Regeln können ebenfalls in eine Textdatei gespeichert und geladen werden:
d176 2
a177 2
die verwenden werden, ebenfalls im Anker definiert
werden müssen; Makros, die im Eltern-Regelsatz definiert worden sind,
d182 1
a182 2
alle ,child'-Anker innerhalb eines angegebenen Ankers verarbeitet
werden:
d194 1
a194 1
Die ,child'-Anker werden in alphabetischer Reihenfolge ausgewertet,
d202 1
a202 1
werden, wie zum Beispiel die Regeln zu ,flush'en, haben keine Auswirkung
d204 1
a204 1
Hauptregelsatz keinen Anker oder irgendeinen ,child'-Anker
d208 1
a208 1
>pfctl(8)</a> ge,flush't wird und sich kein ,child'-Anker mehr in
d212 1
a212 1
<h2>Anker-Optionen</h2>
d214 2
a215 2
Quell- und Zieladresse, Tags, etc., unter Verwendung der selben
Syntax der Filterregeln spezifizieren. Wenn solche Information gegeben
d217 1
a217 2
der Regeldefinition vom <tt>anchor</tt> übereinstimmt.
Zum Beispiel:
d247 1
a247 1
Es kann verwendet werden, um Regeln einem Anker hinzuzufügen oder zu
d260 1
a260 1
Um alle Filterregeln von dem gleichen Anker zu ,flush'en:
d285 1
a285 1
$Translation: anchors.html,v 1.13 2006/05/01 11:17:11 paldium Exp $<br>
@


1.12
log
@sync with Steelix CVS
@
text
@d61 1
a61 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d130 1
a130 1
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d207 1
a207 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d270 1
a270 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d285 2
a286 2
Originally [OpenBSD: anchors.html,v 1.18 ]<br>
$Translation: anchors.html,v 1.12 2006/04/24 17:44:30 paldium Exp $<br>
@


1.11
log
@sync with steelix translation CVS
@
text
@a5 1
<meta http-equiv="Content-Language" content="de">
d8 1
a8 1
<meta name="description"   content="Die OpenBSD-FAQ-Seite">
d285 2
a286 2
Originally [OpenBSD: anchors.html,v 1.18 ]
$Translation: anchors.html,v 1.11 2005/11/04 11:01:44 paldium Exp $
@


1.10
log
@sync with Steelix CVS
@
text
@d62 1
a62 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d131 1
a131 1
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d208 1
a208 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d271 1
a271 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d286 2
a287 2
Originally [OpenBSD: anchors.html,v 1.17 ]
$Translation: anchors.html,v 1.10 2005/09/14 16:16:38 paldium Exp $
@


1.9
log
@sync with Steelix CVS
@
text
@d6 1
a8 1
<meta http-equiv="Content-Language" content="de">
d287 1
a287 1
$Translation: anchors.html,v 1.9 2005/05/20 18:05:19 paldium Exp $
@


1.8
log
@sync with steelix translation CVS
@
text
@d95 1
d144 1
a144 1
anchor goodguys
a244 1
<p>
d287 1
a287 1
$Translation: anchors.html,v 1.8 2005/05/20 16:33:52 paldium Exp $
@


1.7
log
@Sync with Steelix CVS
@
text
@d62 1
a62 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.6"
d130 1
a130 1
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.6"
d207 1
a207 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.6"
d271 1
a271 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.6"
d286 2
a287 2
Originally [OpenBSD: anchors.html,v 1.16 ]
$Translation: anchors.html,v 1.7 2005/02/07 12:39:02 paldium Exp $
@


1.6
log
@Sync with Steelix CVS
@
text
@d4 1
a4 1
<title>PF: Anker und Benannte Regelsätze</title>
d15 1
a15 1
Copyright (c) 2003, 2004 Joel Knight <enabled@@myrealbox.com>
d44 1
a44 1
<h1><font color="#e00000">PF: Anker und benannte Regelsätze</font></h1>
d51 1
a51 1
<li><a href="#named">Benannte Regelsätze</a>
d85 9
a93 6
<tt>anchor</tt>-Regeln werden relativ zu dem Anker zugewiesen, in welchem
sie geladen werden. Zum Beispiel werden <tt>anchor</tt>-Regeln im
Hauptregelsatz Ankeranhänge erzeugen, die auf den Hauptregelsatz als
ihre Eltern zeigen und <tt>anchor</tt> Regeln, die aus Dateien mit der
<tt>load anchor</tt> Direktive geladen worden sind, werden Ankerpunkte
mit diesen Ankern als ihre Eltern erzeugen.
d95 1
a95 1
<a name="named"></a>
d100 3
a102 3
es die Regeln, die in diesem <tt>anchor</tt>-Punkt liegen, genauso
wie die Regeln im Hauptregelsatz zuweisen. Die Verarbeitung wird dann
mit dem Hauptregelsatz weitergesetzt, außer das Paket trifft auf eine
d137 4
a140 2
Anker und benannten Regelsatz durch das Lesen von Regeln aus einer Textdatei
anlegt. Beispiel:
d143 2
a144 1
load anchor goodguys:ssh from "/etc/anchor-goodguys-ssh"
a147 5
<p>Wenn der Hauptregelsatz geladen ist, werden die Regeln, die in der Datei
<tt>/etc/anchor-goodguys-ssh</tt> aufgelistet sind, in den benannten
Regelsatz <tt>ssh</tt> geladen, welcher an den <tt>goodguys</tt>-Anker
angehängt ist.

d154 1
a154 1
&nbsp;&nbsp;&nbsp;| pfctl -a goodguys/ssh -f -
a158 6
Dies fügt eine <tt>pass</tt>-Regel dem Anker namens <tt>ssh</tt> hinzu,
welcher dem <tt>goodguys</tt>-Anker angehängt wurde. PF wird nun diese
Regel berücksichtigen (und jede andere Filterregel, die hinzugefügt wird),
wenn es die <tt>anchor "goodguys/*"</tt>-Zeile im Hauptregelsatz erreicht.

<p>
d166 1
a166 1
# pfctl -a goodguys:www -f /etc/anchor-goodguys-www<br>
a170 4
Dies lädt die Regeln aus der <tt>/etc/anchor-goodguys-www</tt>-Datei
in den benannten Regelsatz <tt>www</tt> im <tt>goodguys</tt>-Anker.

<p>
d172 1
a172 1
Syntax und Optionen in einen benannten Regelsatz wie Regeln in den
d175 23
a197 3
die verwenden werden, ebenfalls im benannten Regelsatz definiert
werden müssen; Makros, die im Hauptregelsatz definiert worden sind,
sind von benannten Regelsätzen aus <i>nicht</i> sichtbar.
d200 1
a200 1
Jeder benannte Regelsatz, wie auch der Hauptregelsatz, existiert separat
d204 2
a205 2
Hauptregelsatz keinen Anker oder irgendeinen benannten Regelsatz
zerstören, die diesem Anker angehängt worden sind. Ein benannter Regelsatz
d208 2
a209 3
>pfctl(8)</a>
ge,flush't wird. Sobald einem Ankerpunkt kein benannter Regelsatz mehr
angehängt ist, wird er ebenfalls zerstört.
d236 1
a236 1
# echo "pass in from 192.0.2.10 to any" | pfctl -a ssh/allowed -f -
d253 1
a253 2
Um alle Regeln in dem Anker namens <tt>allowed</tt> aufzulisten, der
dem <tt>ssh</tt>-Anker angehängt ist:
d256 1
a256 1
# pfctl -a ssh/allowed -s rules
d265 1
a265 1
# pfctl -a ssh/allowed -F rules
d286 2
a287 2
Originally [OpenBSD: anchors.html,v 1.15 ]
$Translation: anchors.html,v 1.6 2005/01/18 14:33:46 paldium Exp $
@


1.5
log
@Sync with Steelix CVS
@
text
@d9 1
a9 1
<meta name="description"   content="die OpenBSD-FAQ-Seite">
d276 5
a280 3
Originally [OpenBSD: anchors.html,v 1.15 ]<br>
$Translation: anchors.html,v 1.5 2004/12/22 12:29:53 paldium Exp $<br>
$OpenBSD: anchors.html,v 1.15 2004/12/22 04:28:16 david Exp $
@


1.4
log
@sync with Steelix CVS
@
text
@d35 3
a37 1
<img alt="[OpenBSD]" height=30 width=141 src="../../../images/smalltitle.gif">
d276 3
a278 3
Originally [OpenBSD: anchors.html,v 1.14 ]<br>
$Translation: anchors.html,v 1.4 2004/12/07 16:56:32 paldium Exp $<br>
$OpenBSD: anchors.html,v 1.14 2004/11/01 21:41:07 nick Exp $
@


1.3
log
@Sync with Steelix CVS
@
text
@d4 1
a4 1
<title>PF: Anker and Benannte Regelsätze</title>
d8 2
a9 1
<meta name="description"   content="die OpenBSD FAQ Seite">
d39 1
a39 1
[<a href="queueing.html">Weiter: Paket Queueing und Priorisierung</a>]
d50 1
a50 1
<li><a href="#options">Anker Optionen</a>
d65 1
a65 1
ein dynamisches Set von Filter-, <tt>nat</tt>-, <tt>rdr</tt>- und
d70 1
a70 1
angehängt. Es gibt vier Typen dieser <tt>Anker</tt> Regeln:
d73 1
a73 1
Filter</a>-Regeln dem Anker <i><tt>name</tt></i> zu
d98 1
a98 1
Filterregel, die die <tt>quick</tt> Option gesetzt hat, oder auf eine
d118 5
a122 5
Dieser Regelsatz setzt eine standardmäßige deny Policy auf <tt>fxp0</tt>
für sowohl einkommenden als auch ausgehenden Verkehr. Der Verkehr wird dann
zustandsmäßig (statefully) herausgelassen und eine Ankerregel wird mit dem
Namen <tt>goodguys</tt> erstellt. Anker können auf zwei Arten mit Regeln
gefüllt werden:
d131 1
a131 1
Die <tt>load</tt> Regel sorgt dafür, dass <tt>pfctl</tt> den angegebenen
d142 1
a142 1
Regelsatz <tt>ssh</tt> geladen, welcher an den <tt>goodguys</tt> Anker
d157 1
a157 1
welcher dem <tt>goodguys</tt> Anker angehängt wurde. PF wird nun diese
d159 1
a159 1
wenn es die <tt>anchor "goodguys/*"</tt> Zeile im Hauptregelsatz erreicht.
d174 2
a175 2
Dies lädt die Regeln aus der <tt>/etc/anchor-goodguys-www</tt> Datei
in den benannten Regelsatz <tt>www</tt> im <tt>goodguys</tt> Anker.
d179 2
a180 2
Syntax und Optionen in einen benannten Regelsatz geladen werden, wie
Regeln in den Hauptregelsatz geladen werden.
d200 1
a200 1
<h2>Anker Optionen</h2>
d203 2
a204 2
Syntax der Filterregeln, spezifizieren. Wenn solche Information gegeben
ist, werden <tt>anchor</tt>-Regeln nur verarbeitet, wenn das Paket mit
d218 1
a218 1
Die Regeln in dem Anker <tt>ssh</tt> werden nur für TCP Pakete
d242 1
a242 1
dem <tt>ssh</tt> Anker angehängt ist:
d266 1
a266 1
[<a href="queueing.html">Weiter: Packet Queueing und Priorisierung</a>]
d270 1
a270 1
<a href="index.html"><img height="24" width="24" src="../../images/back.gif" border="0" alt="[back]"></a> 
d274 4
a277 5
Originally [OpenBSD: anchors.html,v 1.14 ]
<br>
$Translation: anchors.html,v 1.3 2004/11/18 17:06:26 paldium Exp $
<br></small>
<small>$OpenBSD: anchors.html,v 1.14 2004/11/01 21:41:07 nick Exp $</small>
@


1.2
log
@Sync with Steelix CVS
@
text
@d155 1
a155 1
Dies fügt eine <tt>pass</tt>_Regel dem Anker namens <tt>ssh</tt> hinzu,
d275 1
a275 1
$Translation: anchors.html,v 1.2 2004/11/14 12:54:05 paldium Exp $
@


1.1
log
@Sync with Steelix CVS
@
text
@d4 1
a4 1
<title>PF: Anchors and Named Rulesets</title>
d8 1
a8 1
<meta name="description"   content="the OpenBSD FAQ page">
a10 1
<meta name="copyright"     content="This document copyright 2003 by OpenBSD.">
d13 17
d36 3
a38 3
[<a href="logging.html">Previous: Logging</a>]
[<a href="index.html">Contents</a>]
[<a href="shortcuts.html">Next: Shortcuts For Creating Rulesets</a>]
d41 1
a41 1
<h1><font color="#e00000">PF: Anchors and Named Rulesets</font></h1>
d45 1
a45 1
<h3>Table of Contents</h3>
d47 4
a50 4
<li><a href="#intro">Introduction</a>
<li><a href="#named">Named Rulesets</a>
<li><a href="#options">Anchor Options</a>
<li><a href="#manip">Manipulating Named Rulesets</a>
d56 10
a65 9
<h2>Introduction</h2>
In addition to the main ruleset, PF can also evaluate sub rulesets.
Since sub rulesets can be manipulated on the fly by using 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.4"
><tt>pfctl(8)</tt></a>, they provide a convenient way of dynamically
altering an active ruleset. Whereas a <a href="tables.html">table</a> 
is used to hold a dynamic list of addresses, a sub ruleset is used to
hold a dynamic set of filter, <tt>nat</tt>, <tt>rdr</tt>, and
<tt>binat</tt> rules.
d68 2
a69 2
Sub rulesets are attached to the main ruleset by using anchors.  There
are four types of <tt>anchor</tt> rules:
d71 9
a79 9
<li><tt>anchor <i>name</i></tt> - evaluates all <a href="filter.html">
filter</a> rules in the anchor <i><tt>name</tt></i>
<li><tt>binat-anchor <i>name</i></tt> - evaluates all 
<a href="nat.html#binat"><tt>binat</tt></a> rules in the
anchor <i><tt>name</tt></i>
<li><tt>nat-anchor <i>name</i></tt> - evaluates all <a href="nat.html">
<tt>nat</tt></a> rules in the anchor <i><tt>name</tt></i>
<li><tt>rdr-anchor <i>name</i></tt> - evaluates all <a href="rdr.html">
<tt>rdr</tt></a> rules in the anchor <i><tt>name</tt></i>
d82 6
a87 1
Only the main ruleset can contain <tt>anchor</tt> rules.
d90 13
a102 11
<h2>Named Rulesets</h2>
A named ruleset is a group of filter and/or translation rules that has
been assigned a name. An <tt>anchor</tt> point may contain more than one 
such ruleset. When PF comes across an <tt>anchor</tt> rule in the main
ruleset, it will evaluate all the rulesets attached to that
<tt>anchor</tt> point in alphabetical order according to their names.
Processing will then continue in the main ruleset unless the packet
matches a filter rule that uses the <tt>quick</tt> option or a
translation rule within the anchor in which case the match will be
considered final and will abort the evaluation of rules in both the
anchor and the main rulesets.
d105 1
a105 1
For example:
d117 30
a146 4
This ruleset sets a default deny policy on fxp0 for both incoming and
outgoing traffic. Traffic is then statefully passed out and an anchor
rule is created named <tt><i>goodguys</i></tt>. To add rules to the
<tt><i>goodguys</i></tt> anchor the following commands can be used:
d150 1
a150 1
&nbsp;&nbsp;&nbsp;| pfctl -a goodguys:ssh -f -
d155 4
a158 4
This adds a <tt>pass</tt> rule to the ruleset named <tt><i>ssh</i></tt>
attached to the <tt><i>goodguys</i></tt> anchor. PF will then evaluate
this rule (and any other filter rules that get added) when it reaches
the <tt>anchor goodguys</tt> line in the main ruleset.
d161 1
a161 1
Rules can also be saved and loaded from a text file:
d173 24
a196 22
This loads the rules from the <tt>/etc/anchor-goodguys-www</tt> file
into the named ruleset <tt><i>www</i></tt> in the
<tt><i>goodguys</i></tt> anchor.

<p>
Filter and translation rules can be loaded into a named ruleset using
the same syntax and options as rules loaded into the main ruleset.
One caveat, however, is that any 
<a href="macros.html">macros</a> that are used must also be defined 
within the named ruleset; macros that are defined in the main ruleset
are <i>not</i> visible from named rulesets.

<p>
Each named ruleset, as well as the main ruleset, exist separately from
the other rulesets. Operations done on one ruleset, such as flushing the
rules, do not affect any of the others.  In addition, removing an anchor
point from the main ruleset does not destroy the anchor or any named
rulesets that are attached to that anchor. A named ruleset is not
destroyed until it's flushed of all rules using
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.4"
>pfctl(8)</a>. Once an anchor point has no named rulesets attached to
it, it's also destroyed.
d199 7
a205 6
<h2>Anchor Options</h2>
Optionally, <tt>anchor</tt> rules can specify interface, protocol,
source and destination address, etc., using the same syntax as filter
rules. When such information is given, <tt>anchor</tt> rules are only
processed if the packet matches the <tt>anchor</tt> rule's definition.
For example:
d217 4
a220 3
The rules in the anchor <tt><i>ssh</i></tt> are only evaluated for TCP
packets destined for port 22 that come in on fxp0. Rules are then added
to the <tt>anchor</tt> like so:
d223 1
a223 1
# echo "pass in from 192.0.2.10 to any" | pfctl -a ssh:allowed -f -
d228 4
a231 3
So, even though the filter rule doesn't specify an interface, protocol,
or port, the host 192.0.2.10 will only be permitted to connect using 
SSH because of the <tt>anchor</tt> rule's definition.
d234 4
a237 4
<h2>Manipulating Named Rulesets</h2>
Manipulation of named rulesets is performed via <tt>pfctl</tt>. It can
be used to add and remove rules from a ruleset without reloading the
main ruleset.
d240 2
a241 2
To list all the rules in the ruleset <tt><i>allowed</i></tt> attached
to the <tt><i>ssh</i></tt> anchor:
d244 1
a244 1
# pfctl -a ssh:allowed -s rules
d248 1
d250 1
a250 1
To flush all filter rules from the same ruleset: 
d253 1
a253 1
# pfctl -a ssh:allowed -F rules
d258 3
a260 7
If the ruleset name is omitted, the action applies to all rules in the
anchor.

<p>
For a full list of commands, please see
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.4"
><tt>pfctl(8)</tt></a>.
d263 3
a265 3
[<a href="logging.html">Previous: Logging</a>]
[<a href="index.html">Contents</a>]
[<a href="shortcuts.html">Next: Shortcuts For Creating Rulesets</a>]
d269 1
a269 1
<a href="../../de/index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[back]"></a> 
d273 6
a278 4
Originally [OpenBSD: anchors.html,v 1.8 ]<br>
$Translation: anchors.html,v 1.1 2003/11/27 17:34:57 sl Exp $<br>
$OpenBSD$
</small>
@

