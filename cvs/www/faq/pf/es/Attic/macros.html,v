head	1.11;
access;
symbols;
locks; strict;
comment	@# @;


1.11
date	2014.04.01.17.14.10;	author nick;	state dead;
branches;
next	1.10;

1.10
date	2011.02.20.10.08.24;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2004.09.03.04.45.58;	author jufi;	state Exp;
branches;
next	1.8;

1.8
date	2004.01.04.22.29.12;	author horacio;	state Exp;
branches;
next	1.7;

1.7
date	2003.12.03.21.40.56;	author horacio;	state Exp;
branches;
next	1.6;

1.6
date	2003.11.17.19.44.24;	author horacio;	state Exp;
branches;
next	1.5;

1.5
date	2003.09.27.14.55.54;	author horacio;	state Exp;
branches;
next	1.4;

1.4
date	2003.09.20.07.00.26;	author horacio;	state Exp;
branches;
next	1.3;

1.3
date	2003.07.05.20.28.15;	author jufi;	state Exp;
branches;
next	1.2;

1.2
date	2003.06.15.12.27.34;	author jufi;	state Exp;
branches;
next	1.1;

1.1
date	2003.05.28.14.39.30;	author jufi;	state Exp;
branches;
next	;


desc
@@


1.11
log
@
Abandon translations, per deraadt@@ and ajacoutot@@.
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF: listas y macros</title>
<link rev="made" href="mailto:www@@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq,pf">
<meta name="distribution"  content="global">
</head>

<!--
Copyright (c) 2003, Nick Holland <nick@@openbsd.org>
Copyright (c) 2003, 2004 Joel Knight <enabled@@myrealbox.com>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<a href="../../../es/index.html">
<img alt="[OpenBSD]" height="30" width="141"
src="../../../images/smalltitle.gif" border="0">
</a>
<p>[<a href="config.html">Anterior: Primeros pasos</a>]
[<a href="index.html">Contenido</a>]
[<a href="tables.html">Siguiente: Tablas</a>]

<h1><font color="#e00000">PF: listas y macros</font></h1>
<hr>

<h3>Índice de contenidos</h3>
<ul>
<li><a href="#lists">Listas</a>
<li><a href="#macros">Macros</a>
</ul>

<hr>

<a name="lists"></a>
<h2>Listas</h2>
<p>
Una lista permite especificar múltiples criterios similares
dentro de una misma regla, como puedan ser múltiples protocolos,
números de puertos, direcciones, etc.  De este modo, en lugar de
escribir una regla de filtrado para cada dirección IP que haya
que bloquear, se puede escribir una sola regla e indicar las direcciones
IP en una lista aparte.  Las listas se definen especificando los
componentes dentro de <tt>{ }</tt> llaves.

<p>
Así, cuando
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.8"
>pfctl(8)</a>
está cargando el grupo de reglas y se encuentra con una lista,
crea automáticamente múltiples reglas, una para cada uno
de los elementos de la lista.  Por ejemplo:
<blockquote>
<tt>
block out on fxp0 from { 192.168.0.1, 10.5.32.6 } to any
</tt>
</blockquote>

<p>
se expande a:
<blockquote>
<tt>
block out on fxp0 from 192.168.0.1 to any<br>
block out on fxp0 from 10.5.32.6 to any
</tt>
</blockquote>

<p>
Además, se pueden incluir varias listas dentro de una misma
regla:
<blockquote>
<tt>
match in on fxp0 proto tcp to port { 22 80 } rdr-to 192.168.0.6<br>
block out on fxp0 proto { tcp udp } from { 192.168.0.1, \<br> 
&nbsp;&nbsp;&nbsp;10.5.32.6 } to any port { ssh telnet }
</tt>
</blockquote>

<p>
Nótese que las comas entre los componentes de las listas son
opcionales.

<p>
Las listas pueden contener también listas anidadas:

<blockquote>
<tt>
trusted = "{ 192.168.1.2 192.168.5.36 }"<br>
pass in inet proto tcp from { 10.10.0.0/24 $trusted } to port 22
</tt>
</blockquote>

<p>
Ponga atención con las construcciones siguientes, conocidas como 
"listas negadas", pues constituyen un error común:
<blockquote>
<tt>
pass in on fxp0 from { 10.0.0.0/8, !10.1.2.3 }
</tt>
</blockquote>

<p>
Si bien el significado implícito es generalmente 
aplicar la regla citada en "cualquier dirección 10.0.0.0/8 
excepto 10.1.2.3", en realidad esta regla 
se expande de la siguiente manera:
<blockquote>
<tt>
pass in on fxp0 from 10.0.0.0/8<br>
pass in on fxp0 from !10.1.2.3
</tt>
</blockquote>

<p>
que corresponde a cualquier dirección posible 
En su lugar, debe usarse una 
<a href="tables.html">tabla</a>.

<a name="macros"></a>
<h2>Macros</h2>
<p>
Las macros son variables definidas por el usuario que pueden contener
direcciones IP, números de puertos, nombres de interfaces, etc.
Las macros reducen la complejidad de un grupo de reglas de PF, y
también facilitan mucho el mantenimiento de un grupo reglas.

<p>
Los nombres de las macros deben empezar con una letra y pueden contener
letras, dígitos y guiones bajos.  Los nombres de las macros no
pueden ser palabras reservadas (como <tt>pass</tt>, <tt>out</tt>, o
<tt>queue</tt>).
<blockquote>
<tt>
ext_if = "fxp0"<br>
<br>
block in on $ext_if from any to any<br>
</tt>
</blockquote>

<p>
Con la primera línea se ha creado una macro llamada
<tt>ext_if</tt>.  Cuando se hace referencia a una macro después
de que esta haya sido creada, su nombre debe ir precedido por el
carácter <tt>$</tt>.

<p>
Las macros también se pueden expandir mediante el uso de listas,
como por ejemplo:

<blockquote>
<tt>
friends = "{ 192.168.1.1, 10.0.2.5, 192.168.43.53 }"
</tt>
</blockquote>

<p>
Las macros se pueden definir de forma recursiva, como componentes de una
lista.  Pero hay que tener en cuenta que las macros, si van
entrecomilladas, no se expanden, por lo que hay que usar la siguiente
sintaxis:
<blockquote>
<tt>
host1      = "192.168.1.1"<br>
host2      = "192.168.1.2"<br>
all_hosts  = "{" $host1 $host2 "}"<br>
</tt>
</blockquote>

<p>
Ahora, la macro <tt>$all_hosts</tt> se expandirá a 192.168.1.1,
192.168.1.2.

<p>
[<a href="config.html">Anterior: Primeros pasos</a>]
[<a href="index.html">Contenido</a>]
[<a href="tables.html">Siguiente: Tablas</a>]

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[back]"></a>
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: macros.html,v 1.27 ]<br>
$Translation: macros.html,v 1.11 2011/02/18 11:31:01 mvidal Exp $<br>
-->
$OpenBSD: macros.html,v 1.10 2011/02/20 10:08:24 ajacoutot Exp $
</small>

</body>
</html> 
@


1.10
log
@Sync with Steelix CVS
@
text
@d207 1
a207 1
$OpenBSD$
@


1.9
log
@Sync with Steelix CVS
@
text
@d4 1
a4 1
<title>PF: Listas y Macros</title>
d7 3
a9 4
<meta http-equiv="Content-Language" content="es">
<meta name="resource-type" content="documento">
<meta name="description"   content="Preguntas Frecuentes de OpenBSD">
<meta name="keywords"      content="openbsd,preguntas frecuentes,faq,pf">
d15 1
a15 1
Copyright (c) 2003, 2004, Joel Knight <enabled@@myrealbox.com>
d32 2
d35 5
a39 3
<img alt="[OpenBSD]" height="30" width="141" src="../../../images/smalltitle.gif">
<p>
[<a href="config.html">Anterior: Primeros pasos</a>]
d43 1
a43 1
<h1><font color="#e00000">PF: Listas y Macros</font></h1>
d46 1
a46 1
<h3>&Iacute;ndice de Contenidos</h3>
d57 4
a60 4
Una lista permite especificar m&uacute;ltiples criterios similares
dentro de una misma regla, como puedan ser m&uacute;ltiples protocolos,
n&uacute;meros de puertos, direcciones, etc.  De este modo, en lugar de
escribir una regla de filtrado para cada direcci&oacute;n IP que haya
d66 6
a71 6
As&iacute;, cuando
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.5">pfctl(8)</a>
est&aacute; cargando el grupo de reglas y se encuentra con una lista,
crea autom&aacute;ticamente m&uacute;ltiples reglas, una para cada uno
de los componentes.  Por ejemplo:

d79 1
a79 2
ser&iacute;a una contracci&oacute;n de:

d88 2
a89 3
Adem&aacute;s, se pueden incluir varias listas dentro de una misma
regla, y estas listas no se limitan s&oacute;lo a reglas de filtrado:

d92 1
a92 2
rdr on fxp0 proto tcp from any to any port { 22 80 } -&gt; \<br>
&nbsp;&nbsp;&nbsp;192.168.0.6<br>
d99 1
a99 1
N&oacute;tese que las comas entre los componentes de las listas son
d102 36
d142 1
a142 1
direcciones IP, n&uacute;meros de puertos, nombres de interfaces, etc.
d144 1
a144 1
tambi&eacute;n facilitan mucho el mantenimiento de un grupo reglas.
d148 1
a148 1
letras, d&iacute;gitos y guiones bajos.  Los nombres de las macros no
a150 1

d153 1
a153 1
ext_if = &quot;fxp0&quot;<br>
d160 4
a163 4
Con la primera l&iacute;nea se ha creado una macro llamada
<tt>ext_if</tt>.  Cuando se hace referencia a una macro despu&eacute;s
de que &eacute;sta haya sido creada, su nombre debe ir precedido por el
car&aacute;cter <tt>$</tt>, como en la segunda l&iacute;nea del ejemplo.
d166 1
a166 1
Las macros tambi&eacute;n se pueden expandir mediante el uso de listas,
d171 1
a171 1
friends = &quot;{ 192.168.1.1, 10.0.2.5, 192.168.43.53 }&quot;
a179 1

d182 3
a184 3
host1      = &quot;192.168.1.1&quot;<br>
host2      = &quot;192.168.1.2&quot;<br>
all_hosts  = &quot;{&quot; $host1 $host2 &quot;}&quot;<br>
d189 1
a189 1
Ahora, la macro <tt>$all_hosts</tt> se expandir&iacute;a a 192.168.1.1,
d199 1
a199 1
<a href="index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[&Iacute;ndice]"></a> 
d203 5
a207 3
Originally [OpenBSD: macros.html,v 1.11 ]<br>
$OpenBSD$<br>
$Translation: macros.html,v 1.10 2004/09/03 00:21:55 santana Exp $
d209 1
@


1.8
log
@Sync with Steelix CVS
@
text
@a11 1
<meta name="copyright"     content="Este documento es copyright 2002-2004 de OpenBSD.">
d14 18
d64 1
a64 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.4">pfctl(8)</a>
d169 1
a169 1
Originally [OpenBSD: macros.html,v 1.9 ]<br>
d171 1
a171 1
$Translation: macros.html,v 1.9 2004/01/04 21:32:07 horacio Exp $
@


1.7
log
@Sync with Steelix CVS
@
text
@d12 1
a12 1
<meta name="copyright"     content="Este documento es copyright 2002-2003 de OpenBSD.">
d152 1
a152 1
Originally [OpenBSD: macros.html,v 1.8 ]<br>
d154 1
a154 1
$Translation: macros.html,v 1.8 2003/12/02 15:35:11 horacio Exp $
@


1.6
log
@Sync with Steelix CVS
@
text
@d19 1
a19 1
[<a href="config.html">Anterior: Configuraci&oacute;n</a>]
d142 1
a142 1
[<a href="config.html">Anterior: Configuraci&oacute;n</a>]
d152 1
a152 1
Originally [OpenBSD: macros.html,v 1.7 ]<br>
d154 1
a154 1
$Translation: macros.html,v 1.7 2003/11/17 19:22:08 horacio Exp $
@


1.5
log
@sync with steelix cvs
@
text
@d47 1
a47 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.3">pfctl(8)</a>
d152 1
a152 1
Originally [OpenBSD: macros.html,v 1.6 ]<br>
d154 1
a154 1
$Translation: macros.html,v 1.6 2003/09/27 13:46:08 horacio Exp $
@


1.4
log
@sync with steelix cvs
@
text
@d152 1
a152 1
Originally [OpenBSD: macros.html,v 1.5 2003/09/16 01:23:49 nick Exp ]<br>
d154 1
a154 1
$Translation: macros.html,v 1.5 2003/09/19 22:10:58 horacio Exp $
@


1.3
log
@sync with steelix translation CVS
@
text
@d96 2
a97 2
pueden ser palabras reservadas (como <tt>pass</tt>, <tt>out</tt>,
<tt>queue</tt>, etc).
d152 1
a152 1
Originally [OpenBSD: macros.html,v 1.4 2003/06/13 02:54:08 nick Exp ]<br>
d154 1
a154 1
$Translation: macros.html,v 1.4 2003/07/05 16:48:23 horacio Exp $
@


1.2
log
@sync with steelix translation CVS
@
text
@d38 1
a38 1
dentro de una misma regla.  Por ejemplo, m&uacute;ltiples protocolos,
d41 3
a43 3
que bloquear, se puede escribir una sola regla indicando las direcciones
IP en una lista.  Las listas se definen especificando los componentes
dentro de <tt>{ }</tt> llaves.
d48 3
a50 3
se encuentra con una lista mientras est&aacute; cargando el grupo de
reglas, crea m&uacute;ltiples reglas, una para cada uno de los
componentes.  Por ejemplo:
d59 1
a59 1
se expande en:
d69 2
a70 2
Se pueden incluir varias listas dentro de una misma regla, y estas
listas no se limitan s&oacute;lo a reglas de filtrado:
d96 2
a97 2
pueden ser palabras reservadas, como <tt>pass</tt>, <tt>out</tt>,
<tt>queue</tt>, etc.
d108 4
a111 4
Esto crea una macro llamada <tt>ext_if</tt>.  Cuando se hace referencia
a una macro despu&eacute;s de que &eacute;sta haya sido creada, su
nombre debe ir precedido con un car&aacute;cter <tt>$</tt>, como en el
ejemplo anterior.
d138 1
a138 1
Ahora, la macro <tt>$all_hosts</tt> se expande a 192.168.1.1,
d154 1
a154 1
$Translation: macros.html,v 1.3 2003/06/15 11:40:23 horacio Exp $
@


1.1
log
@
initial translation from horacio
@
text
@d152 1
a152 1
Originally [OpenBSD: macros.html,v 1.3 2003/05/15 03:03:54 nick Exp ]<br>
d154 1
a154 1
$Translation: macros.html,v 1.2 2003/05/26 09:12:05 horacio Exp $
@

