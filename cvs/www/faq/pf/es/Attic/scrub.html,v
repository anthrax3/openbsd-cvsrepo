head	1.11;
access;
symbols;
locks; strict;
comment	@# @;


1.11
date	2014.04.01.17.14.10;	author nick;	state dead;
branches;
next	1.10;

1.10
date	2011.02.17.23.28.45;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2004.09.03.04.45.58;	author jufi;	state Exp;
branches;
next	1.8;

1.8
date	2004.01.04.22.29.12;	author horacio;	state Exp;
branches;
next	1.7;

1.7
date	2003.12.03.21.40.57;	author horacio;	state Exp;
branches;
next	1.6;

1.6
date	2003.09.27.14.55.54;	author horacio;	state Exp;
branches;
next	1.5;

1.5
date	2003.09.20.07.00.26;	author horacio;	state Exp;
branches;
next	1.4;

1.4
date	2003.07.05.20.28.15;	author jufi;	state Exp;
branches;
next	1.3;

1.3
date	2003.06.21.11.27.36;	author jufi;	state Exp;
branches;
next	1.2;

1.2
date	2003.06.15.12.27.34;	author jufi;	state Exp;
branches;
next	1.1;

1.1
date	2003.05.28.14.39.30;	author jufi;	state Exp;
branches;
next	;


desc
@@


1.11
log
@
Abandon translations, per deraadt@@ and ajacoutot@@.
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF: Scrub (Normalización de Paquetes)</title>
<link rev="made" href="mailto:www@@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq,pf">
<meta name="distribution"  content="global">
</head>

<!--

Copyright (c) 2003, Nick Holland <nick@@openbsd.org>
Copyright (c) 2003-2005, Joel Knight <enabled@@myrealbox.com>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<a href="../../../es/index.html">
<img alt="[OpenBSD]" height="30" width="141" src="../../../images/smalltitle.gif" border="0">
</a>
<p>
[<a href="options.html">Anterior: Opciones en tiempo de
ejecución</a>]
[<a href="index.html">Contenidos</a>]
[<a href="anchors.html">Siguiente: Anclajes</a>]

<p>
<h1><font color="#e00000">PF: Scrub:  Normalización de
paquetes</font></h1>
<hr>

<h3>&Iacute;ndice de Contenidos</h3>
<ul>
<li><a href="#intro">Introducción</a>
<li><a href="#options">Opciones</a>
</ul>

<hr>

<a name="intro"></a>
<h2>Introducción</h2>
<p>
<i>Scrubbing</i> es la normalización de paquetes con
el objetivo de que no existan ambig&uuml;edades de interpretación
en el destino final del paquete.  La directiva <i>scrub</i>
también realiza el reensamblaje de paquetes fragmentados,
protegiendo a algunos sistemas operativos de ciertos tipos de ataques y
bloqueando los paquetes TCP que lleven una combinación no
válida del indicador de TCP (véase
<a href="filter.html#tcpflags">flag</a>).  Una forma simple de la
directiva <i>scrub</i> sería:
<blockquote>
<tt>
scrub in all
</tt>
</blockquote>

<p>
Con este ejemplo de <i>scrub</i> se normalizarían todos los
paquetes entrantes en todas las interfaces.

<p>
Un motivo para no usar <i>scrub</i> en una interfaz sería que se
estuviera pasando tráfico de NFS a través de PF.  Algunas
plataformas no OpenBSD envían (y esperan recibir) paquetes
extraños, paquetes fragmentados con el <i>bit</i> <i>&quot;do not
fragment&quot;</i> activado, y éstos son rechazados con motivo
por <tt>scrub</tt>.  Este problema se puede solucionar usando la
opción <tt>no-df</tt>.  Otro motivo para no usar <i>scrub</i> es
que algunos juegos de jugadores múltiples tienen problemas de
conexión al pasar a través de PF con la directiva
<tt>scrub</tt> activada.  A parte de estos casos poco usuales, el uso de
<i>scrub</i> en todos los paquetes es una práctica <i>muy
recomendable</i>.

<p>
La sintaxis de la directiva <tt>scrub</tt> es muy parecida a la sintaxis
del <a href="filter.html">filtro de paquetes</a>, lo que facilita el uso
de <i>scrub</i> en cierto paquetes y no en otros.

<p>
Puede verse más información sobre los principios y
conceptos de <i>scrub</i> en el artículo académico
<i><a href="http://www.icir.org/vern/papers/norm-usenix-sec-01-html/index.html"
>Network Intrusion Detection: Evasion, Traffic Normalization, and
End-to-End Protocol Semantics</a></i>.

<a name="options"></a>
<h2>Opciones</h2>
La directiva <tt>scrub</tt> acepta las siguientes opciones:
<dl>
<dt><tt>no-df</tt> 
<dd>Elimina el <i>bit</i> &quot;<i>don't fragment</i>&quot; de la
cabecera del paquete de IP.  Se sabe que algunos sistemas operativos
generan paquetes fragmentados con <i>don't fragment</i> activado.  En
concreto, esto es lo que ocurre con NFS.  <i>Scrub</i> bloquea esos
paquetes a menos que se especifique la opción <tt>no-df</tt>.
Debido a que algunos sistemas operativos generan paquetes <i>don't
fragment</i> con un campo de cabecera de identificación de IP
nulo, se recomienda usar <tt>no-df</tt> junto con <tt>random-ip</tt>.

<dt><tt>random-id</tt> 
<dd>Sustituye el campo de identificación de IP de los paquetes
con valores aleatorios, para compensar la existencia de
sistemas operativos que usan valores predecibles.  Esta opción
sólo se aplica a los paquetes que no estén
fragmentados después del reensamblaje opcional de paquetes.

<dt><tt>min-ttl <i>num</i></tt> 
<dd>Impone un <i>Time To Live</i> (TTL, un tiempo de vida) mínimo
en cabeceras de paquetes IP.

<dt><tt>max-mss <i>num</i></tt> 
<dd>Impone un <i>Maximum Segment Size</i> (MSS, un tamaño
máximo de segmento) máximo en cabeceras de paquetes TCP.

<dt><tt>fragment reassemble</tt> 
<dd>Almacena en memoria fragmentos de paquetes entrantes y los
reensambla en un paquete completo antes de pasarlos a la maquinaria de
filtrado.  La ventaja de esto es que las reglas de filtrado sólo
tienen que tratar con paquetes completos y pueden ignorar los
fragmentos.  La desventaja es que necesita más memoria para
almacenar temporalmente los fragmentos de los paquetes.  Cuando no se
especifica la opción <tt>fragment</tt>, este funcionamiento es el
predeterminado.  También es la única opción de
<tt>fragment</tt> que funciona con NAT.

<dt><tt>fragment crop</tt> 
<dd>Provoca que se rechacen los fragmentos duplicados y que se recorten
los que coincidan en parte.  A diferencia de
<tt>fragment&nbsp;reassemble</tt>, los fragmentos no se almacenan
temporalmente en la memoria, sino que que se pasan en cuanto llegan.

<dt><tt>fragment drop-ovl</tt> 
<dd>Parecido a <tt>fragment crop</tt>, con la diferencia de que todos
los fragmentos duplicados o que coincidan, así como cualquier
fragmento correspondiente a continuación, son rechazados.

<dt><tt>reassemble tcp</tt>
<dd>Normaliza las conexiones TCP manteniendo el estado.
Cuando se usa <tt>scrub reassemble tcp</tt>, no se puede especificar una
dirección (entrante/saliente).  Lleva a cabo las siguientes
normalizaciones en el paquete:
	<ul>
	<li>A ninguna parte de la conexión se le permite reducir su
	IP TTL.  Esto es así para proteger contra la posibilidad de
	que un atacante que envíe un paquete que alcance el
	cortafuegos, afecte la información de estado mantenida para
	la conexión, y que ésta caduque antes de alcanzar el
	anfitrión de destino.  El TTL de todos los paquetes se eleva
	al máximo valor visto para la conexión.
	<li>Modulación de las marcas de tiempo
	<a href="http://www.geektools.com/rfc/rfc1323.txt">RFC1323</a>
	en las cabeceras de paquetes TCP con un número aleatorio.
	Esto puede evitar que un observador deduzca el tiempo de actividad
	(<i>uptime</i>) del anfitrión, o que pueda adivinar
	cuántos anfitriones se encuentran detrás de la
	pasarela de NAT.
	</ul>
</dl>

<p>
Ejemplos:
<blockquote>
<tt>
scrub in on fxp0 all fragment reassemble min-ttl 15 max-mss 1400<br>
scrub in on fxp0 all no-df<br>
scrub &nbsp;&nbsp; on fxp0 all reassemble tcp
</tt>
</blockquote>

<p>
[<a href="options.html">Anterior: Opciones en tiempo de
ejecución</a>]
[<a href="index.html">Contenidos</a>]
[<a href="anchors.html">Siguiente: Anclajes</a>]

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[back]"></a> 
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: scrub.html,v 1.15 ]<br>
$Translation: scrub.html,v 1.11 2011/02/17 12:24:10 mvidal Exp $<br>
-->
$OpenBSD: scrub.html,v 1.10 2011/02/17 23:28:45 ajacoutot Exp $
</small>

</body>
</html> 
@


1.10
log
@Sync with Steelix CVS
@
text
@d206 1
a206 1
$OpenBSD$
@


1.9
log
@Sync with Steelix CVS
@
text
@d4 1
a4 1
<title>PF: Scrub: Normalizaci&oacute;n de Paquetes</title>
d7 3
a9 4
<meta http-equiv="Content-Language" content="es">
<meta name="resource-type" content="documento">
<meta name="description"   content="Preguntas Frecuentes de OpenBSD">
<meta name="keywords"      content="openbsd,preguntas frecuentes,faq,pf">
d14 1
d16 1
a16 1
Copyright (c) 2003, 2004, Joel Knight <enabled@@myrealbox.com>
d33 2
d36 3
a38 1
<img alt="[OpenBSD]" height="30" width="141" src="../../../images/smalltitle.gif">
d40 2
a41 2
[<a href="options.html">Anterior: Opciones en Tiempo de
Ejecuci&oacute;n</a>]
d43 1
a43 1
[<a href="queueing.html">Siguiente: Formaci&oacute;n de Colas</a>]
d46 2
a47 2
<h1><font color="#e00000">PF: <i>Scrubbing:</i>  Normalizaci&oacute;n de
Paquetes</font></h1>
d52 1
a52 1
<li><a href="#intro">Introducci&oacute;n</a>
d59 1
a59 1
<h2>Introducci&oacute;n</h2>
d61 2
a62 2
<i>&quot;Scrubbing&quot;</i> es la normalizaci&oacute;n de paquetes con
el objetivo de que no existan ambig&uuml;edades de interpretaci&oacute;n
d64 1
a64 1
tambi&eacute;n realiza el reensamblaje de paquetes fragmentados,
d66 2
a67 2
bloqueando los paquetes TCP que lleven una combinaci&oacute;n no
v&aacute;lida del indicador de TCP (v&eacute;ase
d69 1
a69 1
directiva <i>scrub</i> ser&iacute;a:
d77 1
a77 1
Con este ejemplo de <i>scrub</i> se normalizar&iacute;an todos los
d81 5
a85 5
Un motivo para no usar <i>scrub</i> en una interfaz ser&iacute;a que se
estuviera pasando tr&aacute;fico de NFS a trav&eacute;s de PF.  Algunas
plataformas no OpenBSD env&iacute;an (y esperan recibir) paquetes
extra&ntilde;os, paquetes fragmentados con el <i>bit</i> <i>&quot;do not
fragment&quot;</i> activado, y &eacute;stos son rechazados con motivo
d87 3
a89 3
opci&oacute;n <tt>no-df</tt>.  Otro motivo para no usar <i>scrub</i> es
que algunos juegos de jugadores m&uacute;ltiples tienen problemas de
conexi&oacute;n al pasar a trav&eacute;s de PF con la directiva
d91 2
a92 2
<i>scrub</i> en todos los paquetes es una pr&aacute;ctica muy
recomendable.
d100 5
a104 5
Puede verse m&aacute;s informaci&oacute;n sobre los principios y
conceptos de <i>scrub</i> en el documento
<a href="http://www.icir.org/vern/papers/norm-usenix-sec-01-html/index.html"
><i>Network Intrusion Detection: Evasion, Traffic Normalization, and
End-to-End Protocol Semantics</i></a>.
d115 1
a115 1
paquetes a menos que se especifique la opci&oacute;n <tt>no-df</tt>.
d117 1
a117 1
fragment</i> con un campo de cabecera de identificaci&oacute;n de IP
d121 5
a125 5
<dd>Sustituye el campo de identificaci&oacute;n de IP de los paquetes
salientes con valores aleatorios, para compensar la existencia de
sistemas operativos que usan valores predecibles.  Esta opci&oacute;n
s&oacute;lo se aplica a los paquetes salientes que no est&eacute;n
fragmentados despu&eacute;s del reensamblaje opcional del paquete.
d128 1
a128 1
<dd>Impone un <i>Time To Live</i> (TTL, un tiempo de vida) m&iacute;nimo
d132 2
a133 2
<dd>Impone un <i>Maximum Segment Size</i> (MSS, un tama&ntilde;o
m&aacute;ximo de segmento) m&aacute;ximo en cabeceras de paquetes TCP.
d138 1
a138 1
filtrado.  La ventaja de esto es que las reglas de filtrado s&oacute;lo
d140 1
a140 1
fragmentos.  La desventaja es que necesita m&aacute;s memoria para
d142 2
a143 2
especifica la opci&oacute;n <tt>fragment</tt>, este funcionamiento es el
predeterminado.  Tambi&eacute;n es la &uacute;nica opci&oacute;n de
d154 2
a155 2
los fragmentos duplicados o que coincidan, as&iacute; como cualquier
fragmento correspondiente a continuaci&oacute;n, son rechazados.
d160 1
a160 1
direcci&oacute;n (entrante/saliente).  Lleva a cabo las siguientes
d163 8
a170 8
	<li>A ninguna parte de la conexi&oacute;n se le permite reducir su
	IP TTL.  Esto es as&iacute; para proteger contra la posibilidad de
	que un atacante que env&iacute;e un paquete que alcance el
	cortafuegos, afecte la informaci&oacute;n de estado mantenida para
	la conexi&oacute;n, y que &eacute;sta caduque antes de alcanzar el
	anfitri&oacute;n de destino.  El TTL de todos los paquetes se eleva
	al m&aacute;ximo valor visto para la conexi&oacute;n.
	<li>Modulaci&oacute;n de las marcas de tiempo
d172 1
a172 1
	en las cabeceras de paquetes TCP con un n&uacute;mero aleatorio.
d174 2
a175 2
	(<i>uptime</i>) del anfitri&oacute;n, o que pueda adivinar
	cu&aacute;ntos anfitriones se encuentran detr&aacute;s de la
d191 2
a192 2
[<a href="options.html">Anterior: Opciones en Tiempo de
Ejecuci&oacute;n</a>]
d194 1
a194 1
[<a href="queueing.html">Siguiente: Formaci&oacute;n de Colas</a>]
d198 1
a198 1
<a href="index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[&Iacute;ndice]"></a> 
d202 5
a206 3
Originally [OpenBSD: scrub.html,v 1.9 ]<br>
$OpenBSD$<br>
$Translation: scrub.html,v 1.10 2004/09/03 00:59:46 santana Exp $
d208 1
@


1.8
log
@Sync with Steelix CVS
@
text
@d4 1
a4 1
<title>PF: <i>Scrub:</i>  Normalizaci&oacute;n de Paquetes</title>
a11 1
<meta name="copyright"     content="Este documento es copyright 2002-2004 de OpenBSD.">
d14 18
d173 1
d198 1
a198 1
Originally [OpenBSD: scrub.html,v 1.8 ]<br>
d200 1
a200 1
$Translation: scrub.html,v 1.9 2004/01/04 21:32:07 horacio Exp $
@


1.7
log
@Sync with Steelix CVS
@
text
@d12 1
a12 1
<meta name="copyright"     content="Este documento es copyright 2002-2003 de OpenBSD.">
d180 1
a180 1
Originally [OpenBSD: scrub.html,v 1.7 ]<br>
d182 1
a182 1
$Translation: scrub.html,v 1.8 2003/12/02 15:35:11 horacio Exp $
@


1.6
log
@sync with steelix cvs
@
text
@d4 1
a4 1
<title>PF: Normalizaci&oacute;n de Paquetes (Scrub)</title>
d19 2
a20 1
[<a href="options.html">Anterior: Opciones</a>]
d25 2
a26 2
<h1><font color="#e00000">PF: Normalizaci&oacute;n de Paquetes
(<i>Scrub</i>)</font></h1>
d41 8
a48 8
el fin de que no existan ambig&uuml;edades de interpretaci&oacute;n en
el destino final del paquete.  La directiva <i>scrub</i> tambi&eacute;n
realiza el
reensamblaje de paquetes fragmentados, protegiendo a algunos sistemas
operativos de ciertos tipos de ataques y bloqueando los paquetes TCP que
lleven una combinaci&oacute;n no v&aacute;lida del indicador de TCP
(v&eacute;ase <a href="filter.html#tcpflags">flag</a>).  Una forma
simple de la directiva <i>scrub</i> ser&iacute;a:
d80 4
a83 2
conceptos de <i>scrub</i> en:
<a href="http://www.icir.org/vern/papers/norm-usenix-sec-01-html/index.html">http://www.icir.org/vern/papers/norm-usenix-sec-01-html/index.html</a>
d135 21
d159 1
a159 1
Ejemplo:
d162 3
a164 1
scrub in on fxp0 all fragment reassemble min-ttl 15 max-mss 1400
d169 2
a170 1
[<a href="options.html">Anterior: Opciones</a>]
d180 1
a180 1
Originally [OpenBSD: scrub.html,v 1.6 ]<br>
d182 1
a182 1
$Translation: scrub.html,v 1.7 2003/09/27 13:46:08 horacio Exp $
@


1.5
log
@sync with steelix cvs
@
text
@d153 1
a153 1
Originally [OpenBSD: scrub.html,v 1.5 2003/09/16 01:23:49 nick Exp ]<br>
d155 1
a155 1
$Translation: scrub.html,v 1.6 2003/09/19 22:10:58 horacio Exp $
@


1.4
log
@sync with steelix translation CVS
@
text
@d153 1
a153 1
Originally [OpenBSD: scrub.html,v 1.4 2003/06/15 16:40:06 nick Exp ]<br>
d155 1
a155 1
$Translation: scrub.html,v 1.5 2003/07/05 16:48:23 horacio Exp $
@


1.3
log
@sync with steelix translation CVS
@
text
@d39 4
a42 3
<i>&quot;Scrubbing&quot;</i> es la normalizaci&oacute;n de paquetes para
que no existan ambig&uuml;edades de interpretaci&oacute;n en el destino
final del paquete.  La directiva <i>scrub</i> tambi&eacute;n realiza el
d44 4
a47 4
operativos de algunos tipos de ataques y bloqueando los paquetes TCP que
lleven una combinaci&oacute;n no v&aacute;lida del
<a href="filter.html#tcpflags">flag</a>.  Una forma simple de la
directiva <i>scrub</i> ser&iacute;a:
d59 4
a62 4
Un motivo para no usar <i>scrub</i> en una interfaz ser&iacute;a si se
estuviera pasando NFS a trav&eacute;s de PF.  Algunas plataformas no
OpenBSD env&iacute;an (y experan recibir) paquetes extra&ntilde;os,
paquetes fragmentados con el <i>bit</i> <i>&quot;do not
d65 2
a66 2
opci&oacute;n <tt>no-df</tt>.  Otro motivo para no usar <i>scrub</i>
ser&iacute;a que algunos juegos de varios jugadores tienen problemas de
d84 1
a84 1
<tt>scrub</tt> acepta las siguientes opciones:
d87 8
a94 8
<dd>Elimina el <i>bit</i> <i>don't fragment</i> de la cabecera del
paquete de IP.  Se sabe que algunos sistemas operativos generan paquetes
fragmentados con <i>don't fragment</i> activado.  En concreto, esto es
lo que ocurre con NFS.  <i>Scrub</i> bloquea esos paquetes a menos que
se especifique la opci&oacute;n <tt>no-df</tt>.  Debido a que algunos
sistemas operativos generan paquetes <i>don't fragment</i> con un campo
de cabecera de identificaci&oacute;n de IP nulo, se recomienda usar
<tt>no-df</tt> junto con <tt>random-ip</tt>.
d98 1
a98 1
salientes con valores aleatorios para compensar la existencia de
d101 1
a101 1
fragmentados despu&eacute;s del reensamblaje de paquete opcional.
d129 3
a131 4
<dd>Parecido a <tt>fragment crop</tt>, con la excepci&oacute;n de que
todos los fragmentos duplicados o que coincidan, as&iacute; como
cualquier fragmento correspondiente a continuaci&oacute;n, son
rechazados.
d155 1
a155 1
$Translation: scrub.html,v 1.4 2003/06/15 18:36:50 horacio Exp $
@


1.2
log
@sync with steelix translation CVS
@
text
@d43 3
a45 1
operativos de algunos tipos de ataques.  Una forma simple de la
d153 1
a153 1
Originally [OpenBSD: scrub.html,v 1.3 2003/06/13 02:54:08 nick Exp ]<br>
d155 1
a155 1
$Translation: scrub.html,v 1.3 2003/06/15 11:40:23 horacio Exp $
@


1.1
log
@
initial translation from horacio
@
text
@d151 1
a151 1
Originally [OpenBSD: scrub.html,v 1.2 2003/05/15 03:03:54 nick Exp ]<br>
d153 1
a153 1
$Translation: scrub.html,v 1.2 2003/05/26 09:12:05 horacio Exp $
@

