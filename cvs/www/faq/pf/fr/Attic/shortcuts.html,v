head	1.32;
access;
symbols;
locks; strict;
comment	@# @;


1.32
date	2014.04.01.17.14.10;	author nick;	state dead;
branches;
next	1.31;

1.31
date	2013.11.01.18.04.05;	author ajacoutot;	state Exp;
branches;
next	1.30;

1.30
date	2013.05.07.12.47.22;	author ajacoutot;	state Exp;
branches;
next	1.29;

1.29
date	2012.11.02.07.24.05;	author ajacoutot;	state Exp;
branches;
next	1.28;

1.28
date	2012.05.13.16.30.18;	author ajacoutot;	state Exp;
branches;
next	1.27;

1.27
date	2011.11.05.12.45.49;	author ajacoutot;	state Exp;
branches;
next	1.26;

1.26
date	2011.05.07.08.22.01;	author ajacoutot;	state Exp;
branches;
next	1.25;

1.25
date	2010.11.09.08.15.21;	author ajacoutot;	state Exp;
branches;
next	1.24;

1.24
date	2010.05.24.18.32.44;	author ajacoutot;	state Exp;
branches;
next	1.23;

1.23
date	2009.10.20.20.44.42;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2009.05.01.13.16.23;	author tobias;	state Exp;
branches;
next	1.21;

1.21
date	2008.12.01.07.52.52;	author tobias;	state Exp;
branches;
next	1.20;

1.20
date	2008.08.25.14.21.24;	author tobias;	state Exp;
branches;
next	1.19;

1.19
date	2008.01.13.13.43.35;	author tobias;	state Exp;
branches;
next	1.18;

1.18
date	2007.05.09.05.49.53;	author jufi;	state Exp;
branches;
next	1.17;

1.17
date	2007.02.11.08.22.01;	author saad;	state Exp;
branches;
next	1.16;

1.16
date	2006.11.02.18.23.22;	author jufi;	state Exp;
branches;
next	1.15;

1.15
date	2006.08.08.07.14.20;	author saad;	state Exp;
branches;
next	1.14;

1.14
date	2006.05.02.17.09.33;	author jufi;	state Exp;
branches;
next	1.13;

1.13
date	2006.04.21.09.28.54;	author jufi;	state Exp;
branches;
next	1.12;

1.12
date	2006.03.10.16.35.07;	author saad;	state Exp;
branches;
next	1.11;

1.11
date	2005.11.03.11.30.53;	author saad;	state Exp;
branches;
next	1.10;

1.10
date	2005.05.22.17.38.07;	author saad;	state Exp;
branches;
next	1.9;

1.9
date	2005.01.18.09.54.52;	author jufi;	state Exp;
branches;
next	1.8;

1.8
date	2004.12.29.10.38.26;	author saad;	state Exp;
branches;
next	1.7;

1.7
date	2004.11.01.02.56.30;	author saad;	state Exp;
branches;
next	1.6;

1.6
date	2004.10.11.16.17.48;	author jufi;	state Exp;
branches;
next	1.5;

1.5
date	2004.05.31.21.12.02;	author saad;	state Exp;
branches;
next	1.4;

1.4
date	2004.05.12.20.51.36;	author saad;	state Exp;
branches;
next	1.3;

1.3
date	2004.05.06.21.34.05;	author saad;	state Exp;
branches;
next	1.2;

1.2
date	2004.01.03.19.45.23;	author jufi;	state Exp;
branches;
next	1.1;

1.1
date	2003.12.29.22.13.35;	author horacio;	state Exp;
branches;
next	;


desc
@@


1.32
log
@
Abandon translations, per deraadt@@ and ajacoutot@@.
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF : Raccourcis pour la Création de Jeux de
Règles</title>
<link rev="made" href="mailto:www@@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq,pf">
<meta name="distribution"  content="global">
</head>

<!--
Copyright (c) 2003, 2004 Joel Knight <enabled@@myrealbox.com>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<a href="../../../fr/index.html">
<img alt="[OpenBSD]" height="30" width="141" src="../../../images/smalltitle.gif" border="0">
</a>
<p>
[<a href="rdr.html">Précédent : Redirection de Trafic
("Forwarding" de Ports)</a>]
[<a href="index.html">Index</a>]
[<a href="options.html">Suivant : Options de Fonctionnement</a>]

<p>
<h1>
<font color="#e00000">PF : Raccourcis pour la Création de Jeux de
Règles</font>
</h1>

<hr>

<h3>Table des Matières</h3>
<ul>
<li><a href="#intro">Introduction</a>
<li><a href="#macros">Utiliser les Macros</a>
<li><a href="#lists">Utiliser les Listes</a>
<li><a href="#grammar">Grammaire de PF</a>
        <ul>
        <li><a href="#elim">Suppression de Mots-clés</a>
        <li><a href="#return">Simplification des Règles avec
            <tt>return</tt></a>
        <li><a href="#order">Ordonnancement de Mots-clés</a>
        </ul>
</ul>

<hr>

<a name="intro"></a>
<h2>Introduction</h2>
PF offre plusieurs moyens pour simplifier un jeu de règles.
Quelques bons exemples sont les
<a href="macros.html#macros">macros</a> et les
<a href="macros.html#lists">listes</a>.
De plus, le langage d'écriture des jeux de règles, ou
grammaire, offre aussi quelques raccourcis pour rendre un jeu de
règles plus simple. En règle générale, plus
un jeu de règles est facile plus il est facile de le comprendre
et le maintenir.

<a name="macros"></a>
<h2>Utiliser les Macros</h2>
Les macros sont utiles car elles fournissent une alternative au codage
en dur des adresses, des numéros de ports, des noms d'interfaces,
etc... dans un jeu de règles. Est-ce que l'adresse IP d'un serveur
a été modifiée ? Pas de problème, il suffit
de mettre à jour la macro; nul besoin de retoucher les
règles de filtrage que vous avez mis du temps et de
l'énergie à construire selon vos besoins.

<p>
Une convention usuelle dans l'écriture des jeux de règles
PF est de définir une macro pour chaque interface réseau.
Si une carte réseau doit être remplacée par une
autre carte qui utilise un pilote différent (en changeant une
3Com par une Intel par exemple), la macro est mise à jour et les
règles de filtrage fonctionneront comme avant. Un autre
bénéfice est le déploiement du même jeu de
règles sur plusieurs machines. Certaines de ces machines peuvent
avoir des cartes réseau différentes. L'utilisation de
macros pour définir les cartes réseau permet d'installer
les jeux de règles avec un minimum d'édition.
L'utilisation de macros pour définir des informations dans un jeu
de règles sujet à changements, telles que les
numéros de ports, les adresses IP et les noms d'interfaces est
une pratique recommandée.
<blockquote>
<tt>
# définition de macros pour chaque interface réseau<br>
IntIF = "dc0"<br>
ExtIF = "fxp0"<br>
DmzIF = "fxp1"
</tt>
</blockquote>

<p>
Une autre convention usuelle est d'utiliser les macros pour
définir des adresses IP et les blocs réseau. Ceci aura
pour effet de réduire de manière significative les
opérations de maintenance d'un jeu de règles lorsque les
adresses IP y figurant changent.
<blockquote>
<tt>
# définition de nos réseaux<br>
IntNet = "192.168.0.0/24"<br>
ExtAdd = "24.65.13.4"<br>
DmzNet = "10.0.0.0/24"
</tt>
</blockquote>

<p>
Si le réseau interne doit être étendu ou
modifié, il suffit de mettre à jour la macro :
<blockquote>
<tt>
IntNet = "{ 192.168.0.0/24, 192.168.1.0/24 }"
</tt>
</blockquote>

<p>
Une fois le jeu de règles rechargé, tout fonctionnera
comme avant.

<a name="lists"></a>
<h2>Utiliser les Listes</h2>
Prenons comme exemple quelques bonnes règles à inclure
dans vos jeux de règles pour gérer les adresses

<a href="http://www.geektools.com/rfc/rfc1918.txt">RFC 1918</a>
qui ne doivent pas être routées sur Internet et qui
d'habitude sont utilisées dans un but malicieux :
<blockquote>
<tt>
block in &nbsp;quick on tl0 inet from 127.0.0.0/8 to any<br>
block in &nbsp;quick on tl0 inet from 192.168.0.0/16 to any<br>
block in &nbsp;quick on tl0 inet from 172.16.0.0/12 to any<br>
block in &nbsp;quick on tl0 inet from 10.0.0.0/8 to any<br>
block out quick on tl0 inet from any to 127.0.0.0/8<br>
block out quick on tl0 inet from any to 192.168.0.0/16<br>
block out quick on tl0 inet from any to 172.16.0.0/12<br>
block out quick on tl0 inet from any to 10.0.0.0/8
</tt>
</blockquote>

<p>
Simplifions maintenant les règles ci-dessus :
<blockquote>
<tt>
block in &nbsp;quick on tl0 inet from { 127.0.0.0/8, 192.168.0.0/16, \<br>
&nbsp;&nbsp;&nbsp;172.16.0.0/12, 10.0.0.0/8 } to any<br>
block out quick on tl0 inet from any to { 127.0.0.0/8, \<br>
&nbsp;&nbsp;&nbsp;192.168.0.0/16, 172.16.0.0/12, 10.0.0.0/8 }
</tt>
</blockquote>

<p>
Le jeu de règles a été réduit de six lignes
: on est passé de huit lignes à deux. On peut encore
simplifier en utilisant des macros en conjonction d'une liste :

<blockquote>
<tt>
NoRouteIPs = "{ 127.0.0.0/8, 192.168.0.0/16, 172.16.0.0/12, \<br>
&nbsp;&nbsp;&nbsp;10.0.0.0/8 }"
<br>
ExtIF = "tl0"<br>
block in &nbsp;quick on $ExtIF from $NoRouteIPs to any<br>
block out quick on $ExtIF from any to $NoRouteIPs
</tt>
</blockquote>

<p>
Notez que les macros et les listes simplifient le fichier
<tt>pf.conf</tt> mais que les lignes sont en réalité
interprétées par
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.4">pfctl(8)</a> 
en plusieurs lignes. Ainsi l'exemple précédent est
interprété comme suit :
<blockquote>
<tt>
block in &nbsp;quick on tl0 inet from 127.0.0.0/8 to any<br>
block in &nbsp;quick on tl0 inet from 192.168.0.0/16 to any<br>
block in &nbsp;quick on tl0 inet from 172.16.0.0/12 to any<br>
block in &nbsp;quick on tl0 inet from 10.0.0.0/8 to any<br>
block out quick on tl0 inet from any to 10.0.0.0/8<br>
block out quick on tl0 inet from any to 172.16.0.0/12<br>
block out quick on tl0 inet from any to 192.168.0.0/16<br>
block out quick on tl0 inet from any to 127.0.0.0/8
</tt>
</blockquote>

<p>
Comme vous pouvez le voir, la simplification des règles figurant
dans le fichier <tt>pf.conf</tt> est une facilité offerte
à l'auteur et à la personne chargée de la maintenance de ce fichier.
Ce n'est pas une simplification réelle des règles traitées par
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+5.4">pf(4)</a>.

<p>
Les macros peuvent être utilisées n'importe où dans
le fichier de règles PF et pas seulement pour définir des
adresses et des ports :
<blockquote>
<tt>
pre  = "pass in quick on ep0 inet proto tcp from "<br>
post = "to any port { 80, 6667 }"<br>
<br>
# classe de David<br>
$pre 21.14.24.80 $post<br>
<br>
# logement de Nick<br>
$pre 24.2.74.79 $post<br>
$pre 24.2.74.178 $post
</tt>
</blockquote>

<p>
Les macros précédentes sont interprétées
comme suit :
<blockquote>
<tt>
pass in quick on ep0 inet proto tcp from 21.14.24.80 to any \<br>
&nbsp;&nbsp;&nbsp;port = 80<br>
pass in quick on ep0 inet proto tcp from 21.14.24.80 to any \<br>
&nbsp;&nbsp;&nbsp;port = 6667<br>
pass in quick on ep0 inet proto tcp from 24.2.74.79 to any \<br>
&nbsp;&nbsp;&nbsp;port = 80<br>
pass in quick on ep0 inet proto tcp from 24.2.74.79 to any \<br>
&nbsp;&nbsp;&nbsp;port = 6667<br>
pass in quick on ep0 inet proto tcp from 24.2.74.178 to any \<br>
&nbsp;&nbsp;&nbsp;port = 80<br>
pass in quick on ep0 inet proto tcp from 24.2.74.178 to any \<br>
&nbsp;&nbsp;&nbsp;port = 6667
</tt>
</blockquote>

<a name="grammar"></a>
<h2>Grammaire de PF</h2>
La grammaire de PF est assez flexible ce qui permet une grande
flexibilité dans les jeux de règles. PF est capable de
supposer certains mots-clés ce qui veut dire qu'ils n'ont pas
besoin d'être explicitement inclus dans une règle, et
l'ordonnancement des mots-clés est relâché de telle
façon à ce qu'il ne soit pas nécessaire de
mémoriser une syntaxe stricte.

<a name="elim"></a>
<h3>Élimination de mots-clé</h3>
<p>
Pour définir une politique de blocage par défaut, deux
règles sont utilisés :
<blockquote>
<tt>
block in &nbsp;all<br>
block out all
</tt>
</blockquote>

<p>
Ceci peut être réduit à :
<blockquote>
<tt>
block
</tt>
</blockquote>

<p>
Quand aucune direction n'est spécifiée, PF suppose que la
règle s'applique aux paquets passant dans les deux sens.

<p>
De manière similaire, les clauses "<tt>from any to any</tt>" et
"<tt>all</tt>" peuvent ne pas figurer dans une règle. Par exemple
:
<blockquote>
<tt>
block in on rl0 all<br>
pass &nbsp;in quick log on rl0 proto tcp from any to any port 22 keep state
</tt>
</blockquote>

<p>
peut être simplifiée de la manière suivante :
<blockquote>
<tt>
block in on rl0<br>
pass &nbsp;in quick log on rl0 proto tcp to port 22 keep state</tt>
</blockquote>

<p>
La première règle bloque tous les paquets en entrée
de n'importe où vers n'importe où sur l'interface rl0, et
la deuxième règle laisse passer le trafic TCP sur rl0
à destination du port 22.

<a name="return"></a>
<h3>Simplification des Règles avec <tt>return</tt></h3>
<p>
Un jeu de règles utilisé pour bloquer des paquets et
répondre avec un TCP RST ou un ICMP Unreachable peut être
écrit comme suit :
<blockquote>
<tt>
block in all<br>
block return-rst in proto tcp all<br>
block return-icmp in proto udp all<br>
block out all<br>
block return-rst out proto tcp all<br>
block return-icmp out proto udp all
</tt>
</blockquote>

<p>
Il peut être largement simplifié comme suit :
<blockquote>
<tt>
block return
</tt>
</blockquote>

<p>
Quand PF voit le mot-clé <tt>return</tt>, il "sait" ce qu'il faut
envoyer comme réponse (ou ne pas en envoyer du tout), selon le
protocole du paquet bloqué.

<a name="order"></a>
<h3>Ordonnancement de Mots-clés</h3>
<p>
L'ordre selon lequel les mots-clés sont spécifiés
est flexible dans la plupart des cas. Par exemple, une règle
écrite comme suit :
<blockquote>
<tt>
pass in log quick on rl0 proto tcp to port 22 \<br> 
&nbsp;&nbsp;&nbsp;flags S/SA keep state queue ssh label ssh
</tt>
</blockquote>

<p>
Peut aussi être écrite de cette façon :
<blockquote>
<tt>
pass in quick log on rl0 proto tcp to port 22 \<br>
&nbsp;&nbsp;&nbsp;queue ssh keep state label ssh flags S/SA
</tt>
</blockquote>

<p>
Des variations similaires fonctionneront aussi.

<p>
[<a href="rdr.html">Précédent : Redirection de Trafic
("Forwarding" de Ports)</a>]
[<a href="index.html">Index</a>]
[<a href="options.html">Suivant : Options de Fonctionnement</a>]

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[back]"></a> 
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: shortcuts.html,v 1.32 ]<br>
$Translation: shortcuts.html,v 1.32 2013/11/01 17:02:17 rustybsd Exp $<br>
-->
$OpenBSD: shortcuts.html,v 1.31 2013/11/01 18:04:05 ajacoutot Exp $
</small>

</body>
</html> 
@


1.31
log
@Sync with Steelix CVS
@
text
@d386 1
a386 1
$OpenBSD$
@


1.30
log
@Sync with Steelix CVS
@
text
@d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.3">pfctl(8)</a> 
d216 1
a216 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+5.3">pf(4)</a>.
d383 2
a384 2
Originally [OpenBSD: shortcuts.html,v 1.31 ]<br>
$Translation: shortcuts.html,v 1.31 2013/05/07 08:34:48 rustybsd Exp $<br>
@


1.29
log
@Sync with Steelix CVS
@
text
@d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.2">pfctl(8)</a> 
d216 1
a216 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+5.2">pf(4)</a>.
d383 2
a384 2
Originally [OpenBSD: shortcuts.html,v 1.30 ]<br>
$Translation: shortcuts.html,v 1.30 2012/11/01 19:46:21 rustybsd Exp $<br>
@


1.28
log
@Sync with Steelix CVS
@
text
@d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.1">pfctl(8)</a> 
d216 1
a216 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+5.1">pf(4)</a>.
d383 2
a384 2
Originally [OpenBSD: shortcuts.html,v 1.29 ]<br>
$Translation: shortcuts.html,v 1.29 2012/05/11 15:01:30 rustybsd Exp $<br>
@


1.27
log
@Sync with Steelix CVS
@
text
@d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.0">pfctl(8)</a> 
d216 1
a216 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+5.0">pf(4)</a>.
d383 2
a384 2
Originally [OpenBSD: shortcuts.html,v 1.28 ]<br>
$Translation: shortcuts.html,v 1.28 2011/11/05 09:29:01 benoit Exp $<br>
@


1.26
log
@Sync with Steelix CVS
@
text
@d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.9">pfctl(8)</a> 
d216 1
a216 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.9">pf(4)</a>.
d383 2
a384 2
Originally [OpenBSD: shortcuts.html,v 1.27 ]<br>
$Translation: shortcuts.html,v 1.27 2011/05/07 07:02:59 benoit Exp $<br>
@


1.25
log
@Sync with Steelix CVS
@
text
@d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.8">pfctl(8)</a> 
d216 1
a216 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.8">pf(4)</a>.
d383 2
a384 2
Originally [OpenBSD: shortcuts.html,v 1.26 ]<br>
$Translation: shortcuts.html,v 1.26 2010/11/06 14:41:18 benoit Exp $<br>
@


1.24
log
@Sync with Steelix CVS
@
text
@d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.7">pfctl(8)</a> 
d216 1
a216 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.7">pf(4)</a>.
d383 2
a384 2
Originally [OpenBSD: shortcuts.html,v 1.25 ]<br>
$Translation: shortcuts.html,v 1.25 2010/05/24 06:30:44 benoit Exp $<br>
@


1.23
log
@Sync with Steelix CVS
@
text
@d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.6">pfctl(8)</a> 
d216 1
a216 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.6">pf(4)</a>.
d225 1
a225 1
post = "to any port { 80, 6667 } keep state"<br>
d242 1
a242 1
&nbsp;&nbsp;&nbsp;port = 80 keep state<br>
d244 1
a244 1
&nbsp;&nbsp;&nbsp;port = 6667 keep state<br>
d246 1
a246 1
&nbsp;&nbsp;&nbsp;port = 80 keep state<br>
d248 1
a248 1
&nbsp;&nbsp;&nbsp;port = 6667 keep state<br>
d250 1
a250 1
&nbsp;&nbsp;&nbsp;port = 80 keep state<br>
d252 1
a252 1
&nbsp;&nbsp;&nbsp;port = 6667 keep state
d282 1
a282 1
block all
d383 2
a384 2
Originally [OpenBSD: shortcuts.html,v 1.24 ]<br>
$Translation: shortcuts.html,v 1.24 2009/10/19 15:48:30 benoit Exp $<br>
@


1.22
log
@Sync with Steelix CVS
@
text
@d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.5">pfctl(8)</a> 
d216 1
a216 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.5">pf(4)</a>.
d383 2
a384 2
Originally [OpenBSD: shortcuts.html,v 1.23 ]<br>
$Translation: shortcuts.html,v 1.23 2009/04/30 22:46:58 benoit Exp $<br>
@


1.21
log
@Sync with Steelix CVS
@
text
@d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.4">pfctl(8)</a> 
d216 1
a216 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.4">pf(4)</a>.
d383 2
a384 2
Originally [OpenBSD: shortcuts.html,v 1.22 ]<br>
$Translation: shortcuts.html,v 1.22 2008/11/26 22:39:40 benoit Exp $<br>
@


1.20
log
@Sync with Steelix CVS
@
text
@d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.3">pfctl(8)</a> 
d216 1
a216 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.3">pf(4)</a>.
d383 2
a384 2
Originally [OpenBSD: shortcuts.html,v 1.21 ]<br>
$Translation: shortcuts.html,v 1.21 2008/08/20 15:32:01 gapz Exp $<br>
@


1.19
log
@Sync with Steelix CVS
@
text
@d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.2">pfctl(8)</a> 
d216 1
a216 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.2">pf(4)</a>.
d383 2
a384 2
Originally [OpenBSD: shortcuts.html,v 1.20 ]<br>
$Translation: shortcuts.html,v 1.20 2008/01/11 10:30:26 saad Exp $<br>
@


1.18
log
@Sync with steelix translation CVS
@
text
@d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.1">pfctl(8)</a> 
d216 1
a216 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.1">pf(4)</a>.
d383 2
a384 2
Originally [OpenBSD: shortcuts.html,v 1.19 ]<br>
$Translation: shortcuts.html,v 1.19 2007/05/07 09:38:20 ajacoutot Exp $<br>
@


1.17
log
@sync with Steelix CVS
@
text
@d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.0">pfctl(8)</a> 
d216 1
a216 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.0">pf(4)</a>.
d383 2
a384 2
Originally [OpenBSD: shortcuts.html,v 1.18 ]<br>
$Translation: shortcuts.html,v 1.18 2007/02/10 23:53:52 benoit Exp $<br>
@


1.16
log
@sync with steelix translation CVS
@
text
@d83 2
a84 2
en dur des adresses, des numéros de ports, des noms d'interfaces
etc. dans un jeu de règles. Est-ce que l'adresse IP d'un serveur
d104 1
a104 1
numéros de ports, les adresses IP, et les noms d'interfaces, est
d150 1
a150 1
d'habitude, sont utilisées dans un but malicieux :
d287 1
a287 1
Quand aucune direction n'est spécifiées, PF suppose que la
d342 1
a342 1
envoyer comme réponse (ou pas en envoyer du tout), selon le
d384 1
a384 1
$Translation: shortcuts.html,v 1.17 2006/11/02 08:49:04 ajacoutot Exp $<br>
@


1.15
log
@sync with Steelix CVS
@
text
@d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.9">pfctl(8)</a> 
d216 1
a216 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+3.9">pf(4)</a>.
d383 2
a384 2
Originally [OpenBSD: shortcuts.html,v 1.17 ]<br>
$Translation: shortcuts.html,v 1.16 2006/08/07 08:33:51 saad Exp $<br>
@


1.14
log
@sync with steelix translation CVS
@
text
@d15 1
a15 1
Copyright (c) 2003, 2004, Nick Holland <nick@@openbsd.org>
d384 1
a384 1
$Translation: shortcuts.html,v 1.15 2006/05/02 10:12:39 ajacoutot Exp $<br>
@


1.13
log
@sync with steelix translation CVS
@
text
@d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.8">pfctl(8)</a> 
d216 1
a216 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+3.8">pf(4)</a>.
d383 2
a384 2
Originally [OpenBSD: shortcuts.html,v 1.16 ]<br>
$Translation: shortcuts.html,v 1.14 2006/04/20 06:42:51 ajacoutot Exp $<br>
@


1.12
log
@sync with Steelix CVS
@
text
@d267 1
a267 1
<h3>Elimination of Keywords</h3>
d384 1
a384 1
$Translation: shortcuts.html,v 1.13 2006/03/09 14:46:29 ajacoutot Exp $<br>
@


1.11
log
@sync with Steelix CVS
@
text
@d35 1
a35 1
<a href="../../fr/index.html">
d384 1
a384 1
$Translation: shortcuts.html,v 1.12 2005/11/02 19:38:09 aanriot Exp $<br>
@


1.10
log
@sync with Steelix CVS
@
text
@d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.7">pfctl(8)</a> 
d216 1
a216 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+3.7">pf(4)</a>.
d383 2
a384 2
Originally [OpenBSD: shortcuts.html,v 1.15 ]<br>
$Translation: shortcuts.html,v 1.11 2005/05/21 10:02:27 aanriot Exp $<br>
@


1.9
log
@Sync with Steelix CVS
@
text
@d195 1
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.6">pfctl(8)</a> 
d214 3
a216 4
à l'auteur et à la personne chargée de la
maintenance de ce fichier. Ce n'est pas une simplification réelle
des règles traitées par
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+3.6">pf(4)</a>.
d383 2
a384 2
Originally [OpenBSD: shortcuts.html,v 1.14 ]<br>
$Translation: shortcuts.html,v 1.10 2005/01/17 21:34:49 aanriot Exp $<br>
@


1.8
log
@sync with Steelix CVS
@
text
@d383 1
d385 2
a386 1
$Translation: shortcuts.html,v 1.9 2004/12/29 10:33:02 saad Exp $<br>
@


1.7
log
@sync with Steelix CVS
@
text
@d35 3
a37 1
<img alt="[OpenBSD]" height=30 width=141 src="../../../images/smalltitle.gif">
d383 2
a384 2
Originally [OpenBSD: shortcuts.html,v 1.13 ]<br>
$Translation: shortcuts.html,v 1.7 2004/11/01 00:46:13 saad Exp $<br>
@


1.6
log
@Sync with Steelix CVS
@
text
@d193 1
a193 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.5">pfctl(8)</a> 
d215 1
a215 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+3.5">pf(4)</a>.
d381 2
a382 2
Originally [OpenBSD: shortcuts.html,v 1.12 ]<br>
$Translation: shortcuts.html,v 1.6 2004/10/11 12:24:36 saad Exp $<br>
@


1.5
log
@sync with Steelix CVS
@
text
@d4 2
a5 2
<title>PF : Raccourcis pour la Cr&eacute;ation de Jeux de
R&egrave;gles</title>
d37 1
a37 1
[<a href="rdr.html">Pr&eacute;c&eacute;dent : Redirection de Trafic
d44 2
a45 2
<font color="#e00000">PF : Raccourcis pour la Cr&eacute;ation de Jeux de
R&egrave;gles</font>
d50 1
a50 1
<h3>Table des Mati&egrave;res</h3>
d57 2
a58 2
        <li><a href="#elim">Suppression de Mots-cl&eacute;s</a>
        <li><a href="#return">Simplification des R&egrave;gles avec
d60 1
a60 1
        <li><a href="#order">Ordonnancement de Mots-cl&eacute;s</a>
d68 1
a68 1
PF offre plusieurs moyens pour simplifier un jeu de r&egrave;gles.
d72 1
a72 1
De plus, le langage d'&eacute;criture des jeux de r&egrave;gles, ou
d74 2
a75 2
r&egrave;gles plus simple. En r&egrave;gle g&eacute;n&eacute;rale, plus
un jeu de r&egrave;gles est facile plus il est facile de le comprendre
d81 23
a103 23
en dur des adresses, des num&eacute;ros de ports, des noms d'interfaces
etc. dans un jeu de r&egrave;gles. Est-ce que l'adresse IP d'un serveur
a &eacute;t&eacute; modifi&eacute;e ? Pas de probl&egrave;me, il suffit
de mettre &agrave; jour la macro; nul besoin de retoucher les
r&egrave;gles de filtrage que vous avez mis du temps et de
l'&eacute;nergie &agrave; construire selon vos besoins.

<p>
Une convention usuelle dans l'&eacute;criture des jeux de r&egrave;gles
PF est de d&eacute;finir une macro pour chaque interface r&eacute;seau.
Si une carte r&eacute;seau doit &ecirc;tre remplac&eacute;e par une
autre carte qui utilise un pilote diff&eacute;rent (en changeant une
3Com par une Intel par exemple), la macro est mise &agrave; jour et les
r&egrave;gles de filtrage fonctionneront comme avant. Un autre
b&eacute;n&eacute;fice est le d&eacute;ploiement du m&ecirc;me jeu de
r&egrave;gles sur plusieurs machines. Certaines de ces machines peuvent
avoir des cartes r&eacute;seau diff&eacute;rentes. L'utilisation de
macros pour d&eacute;finir les cartes r&eacute;seau permet d'installer
les jeux de r&egrave;gles avec un minimum d'&eacute;dition.
L'utilisation de macros pour d&eacute;finir des informations dans un jeu
de r&egrave;gles sujet &agrave; changements, telles que les
num&eacute;ros de ports, les adresses IP, et les noms d'interfaces, est
une pratique recommand&eacute;e.
d106 1
a106 1
# d&eacute;finition de macros pour chaque interface r&eacute;seau<br>
d115 3
a117 3
d&eacute;finir des adresses IP et les blocs r&eacute;seau. Ceci aura
pour effet de r&eacute;duire de mani&egrave;re significative les
op&eacute;rations de maintenance d'un jeu de r&egrave;gles lorsque les
d121 1
a121 1
# d&eacute;finition de nos r&eacute;seaux<br>
d129 2
a130 2
Si le r&eacute;seau interne doit &ecirc;tre &eacute;tendu ou
modifi&eacute;, il suffit de mettre &agrave; jour la macro :
d138 1
a138 1
Une fois le jeu de r&egrave;gles recharg&eacute;, tout fonctionnera
d143 2
a144 2
Prenons comme exemple quelques bonnes r&egrave;gles &agrave; inclure
dans vos jeux de r&egrave;gles pour g&eacute;rer les adresses
d147 2
a148 2
qui ne doivent pas &ecirc;tre rout&eacute;es sur Internet et qui
d'habitude, sont utilis&eacute;es dans un but malicieux :
d163 1
a163 1
Simplifions maintenant les r&egrave;gles ci-dessus :
d174 2
a175 2
Le jeu de r&egrave;gles a &eacute;t&eacute; r&eacute;duit de six lignes
: on est pass&eacute; de huit lignes &agrave; deux. On peut encore
d191 2
a192 2
<tt>pf.conf</tt> mais que les lignes sont en r&eacute;alit&eacute;
interpr&eacute;t&eacute;es par
d194 2
a195 2
en plusieurs lignes. Ainsi l'exemple pr&eacute;c&eacute;dent est
interpr&eacute;t&eacute; comme suit :
d210 5
a214 5
Comme vous pouvez le voir, la simplification des r&egrave;gles figurant
dans le fichier <tt>pf.conf</tt> est une facilit&eacute; offerte
&agrave; l'auteur et &agrave; la personne charg&eacute;e de la
maintenance de ce fichier. Ce n'est pas une simplification r&eacute;elle
des r&egrave;gles trait&eacute;es par
d218 2
a219 2
Les macros peuvent &ecirc;tre utilis&eacute;es n'importe o&ugrave; dans
le fichier de r&egrave;gles PF et pas seulement pour d&eacute;finir des
d236 1
a236 1
Les macros pr&eacute;c&eacute;dentes sont interpr&eacute;t&eacute;es
d258 6
a263 6
flexibilit&eacute; dans les jeux de r&egrave;gles. PF est capable de
supposer certains mots-cl&eacute;s ce qui veut dire qu'ils n'ont pas
besoin d'&ecirc;tre explicitement inclus dans une r&egrave;gle, et
l'ordonnancement des mots-cl&eacute;s est rel&acirc;ch&eacute; de telle
fa&ccedil;on &agrave; ce qu'il ne soit pas n&eacute;cessaire de
m&eacute;moriser une syntaxe stricte.
d268 2
a269 2
Pour d&eacute;finir une politique de blocage par d&eacute;faut, deux
r&egrave;gles sont utilis&eacute;s :
d278 1
a278 1
Ceci peut &ecirc;tre r&eacute;duit &agrave; :
d286 2
a287 2
Quand aucune direction n'est sp&eacute;cifi&eacute;es, PF suppose que la
r&egrave;gle s'applique aux paquets passant dans les deux sens.
d290 2
a291 2
De mani&egrave;re similaire, les clauses "<tt>from any to any</tt>" et
"<tt>all</tt>" peuvent ne pas figurer dans une r&egrave;gle. Par exemple
d301 1
a301 1
peut &ecirc;tre simplifi&eacute;e de la mani&egrave;re suivante :
d309 4
a312 4
La premi&egrave;re r&egrave;gle bloque tous les paquets en entr&eacute;e
de n'importe o&ugrave; vers n'importe o&ugrave; sur l'interface rl0, et
la deuxi&egrave;me r&egrave;gle laisse passer le trafic TCP sur rl0
&agrave; destination du port 22.
d315 1
a315 1
<h3>Simplification des R&egrave;gles avec <tt>return</tt></h3>
d317 3
a319 3
Un jeu de r&egrave;gles utilis&eacute; pour bloquer des paquets et
r&eacute;pondre avec un TCP RST ou un ICMP Unreachable peut &ecirc;tre
&eacute;crit comme suit :
d332 1
a332 1
Il peut &ecirc;tre largement simplifi&eacute; comme suit :
d340 3
a342 3
Quand PF voit le mot-cl&eacute; <tt>return</tt>, il "sait" ce qu'il faut
envoyer comme r&eacute;ponse (ou pas en envoyer du tout), selon le
protocole du paquet bloqu&eacute;.
d345 1
a345 1
<h3>Ordonnancement de Mots-cl&eacute;s</h3>
d347 3
a349 3
L'ordre selon lequel les mots-cl&eacute;s sont sp&eacute;cifi&eacute;s
est flexible dans la plupart des cas. Par exemple, une r&egrave;gle
&eacute;crite comme suit :
d358 1
a358 1
Peut aussi &ecirc;tre &eacute;crite de cette fa&ccedil;on :
d370 1
a370 1
[<a href="rdr.html">Pr&eacute;c&eacute;dent : Redirection de Trafic
d382 1
a382 1
$Translation: shortcuts.html,v 1.5 2004/05/28 18:44:13 saad Exp $<br>
@


1.4
log
@sync with Steelix CVS. thanks to Olivier HORN <ohorn at axal dot fr> for
a fix.
@
text
@d37 1
a37 1
[<a href="../rdr.html">Pr&eacute;c&eacute;dent : Redirection de Trafic
d370 1
a370 1
[<a href="../rdr.html">Pr&eacute;c&eacute;dent : Redirection de Trafic
d382 1
a382 1
$Translation: shortcuts.html,v 1.4 2004/05/12 20:21:45 saad Exp $<br>
@


1.3
log
@Sync with Steelix CVS
@
text
@a11 1
<meta name="copyright"     content="This document copyright 2003-2004 by OpenBSD.">
d14 17
d381 2
a382 2
Originally [OpenBSD: shortcuts.html,v 1.11 ]<br>
$Translation: shortcuts.html,v 1.3 2004/05/02 21:04:14 saad Exp $<br>
@


1.2
log
@Sync with Steelix CVS
@
text
@d177 1
a177 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.4">pfctl(8)</a> 
d199 1
a199 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+3.4">pf(4)</a>.
d365 2
a366 2
Originally [OpenBSD: shortcuts.html,v 1.10 ]<br>
$Translation: shortcuts.html,v 1.2 2004/01/02 22:10:05 saad Exp $<br>
@


1.1
log
@Sync with Steelix CVS
@
text
@d12 1
a12 1
<meta name="copyright"     content="This document copyright 2003 by OpenBSD.">
d365 2
a366 2
Originally [OpenBSD: shortcuts.html,v 1.9 ]<br>
$Translation: shortcuts.html,v 1.1 2003/12/28 21:20:14 saad Exp $<br>
@

