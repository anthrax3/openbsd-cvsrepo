head	1.34;
access;
symbols;
locks; strict;
comment	@# @;


1.34
date	2014.04.01.17.14.10;	author nick;	state dead;
branches;
next	1.33;

1.33
date	2013.11.01.18.04.05;	author ajacoutot;	state Exp;
branches;
next	1.32;

1.32
date	2013.05.07.12.47.22;	author ajacoutot;	state Exp;
branches;
next	1.31;

1.31
date	2013.01.28.09.28.24;	author ajacoutot;	state Exp;
branches;
next	1.30;

1.30
date	2012.11.02.07.24.05;	author ajacoutot;	state Exp;
branches;
next	1.29;

1.29
date	2012.05.19.22.52.00;	author ajacoutot;	state Exp;
branches;
next	1.28;

1.28
date	2012.05.13.16.30.18;	author ajacoutot;	state Exp;
branches;
next	1.27;

1.27
date	2012.02.14.07.25.33;	author ajacoutot;	state Exp;
branches;
next	1.26;

1.26
date	2011.11.05.12.45.49;	author ajacoutot;	state Exp;
branches;
next	1.25;

1.25
date	2011.05.07.08.22.01;	author ajacoutot;	state Exp;
branches;
next	1.24;

1.24
date	2010.11.09.08.15.20;	author ajacoutot;	state Exp;
branches;
next	1.23;

1.23
date	2010.05.24.18.32.44;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2010.02.02.10.26.34;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2009.10.20.20.44.42;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2009.05.01.13.16.23;	author tobias;	state Exp;
branches;
next	1.19;

1.19
date	2008.12.01.07.52.52;	author tobias;	state Exp;
branches;
next	1.18;

1.18
date	2008.08.25.14.21.24;	author tobias;	state Exp;
branches;
next	1.17;

1.17
date	2008.01.13.13.43.34;	author tobias;	state Exp;
branches;
next	1.16;

1.16
date	2007.05.09.05.49.53;	author jufi;	state Exp;
branches;
next	1.15;

1.15
date	2007.02.16.05.14.25;	author saad;	state Exp;
branches;
next	1.14;

1.14
date	2007.02.14.19.01.55;	author jufi;	state Exp;
branches;
next	1.13;

1.13
date	2007.02.06.06.04.56;	author saad;	state Exp;
branches;
next	1.12;

1.12
date	2007.01.25.10.26.14;	author jufi;	state Exp;
branches;
next	1.11;

1.11
date	2007.01.22.05.39.58;	author saad;	state Exp;
branches;
next	1.10;

1.10
date	2006.11.22.15.14.07;	author saad;	state Exp;
branches;
next	1.9;

1.9
date	2006.10.29.10.58.52;	author jufi;	state Exp;
branches;
next	1.8;

1.8
date	2006.10.27.07.04.45;	author jufi;	state Exp;
branches;
next	1.7;

1.7
date	2006.05.02.17.09.33;	author jufi;	state Exp;
branches;
next	1.6;

1.6
date	2006.03.10.16.35.07;	author saad;	state Exp;
branches;
next	1.5;

1.5
date	2005.11.11.06.17.59;	author saad;	state Exp;
branches;
next	1.4;

1.4
date	2005.11.03.11.30.53;	author saad;	state Exp;
branches;
next	1.3;

1.3
date	2005.09.28.19.46.33;	author saad;	state Exp;
branches;
next	1.2;

1.2
date	2005.05.24.04.28.06;	author saad;	state Exp;
branches;
next	1.1;

1.1
date	2005.05.22.17.38.07;	author saad;	state Exp;
branches;
next	;


desc
@@


1.34
log
@
Abandon translations, per deraadt@@ and ajacoutot@@.
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF : Haute disponibilité des pare-feux avec CARP et pfsync</title>
<link rev="made" href="mailto:www@@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq,pf,carp,pfsync">
<meta name="distribution"  content="global">
</head>

<!--
Copyright (c) 2005-2007 Joel Knight <enabled@@myrealbox.com>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<a href="../../../fr/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../../images/smalltitle.gif" border="0">
</a>
<p>
[<a href="authpf.html">Précédent : Authpf : Shell Utilisateur pour les
Passerelles d'Authentifications</a>]
[<a href="index.html">Index</a>]
[<a href="example1.html">Suivant : Pare-feu pour réseau domestique ou
petite société</a>]


<p>
<h1><font color="#e00000">PF: Haute disponibilité des pare-feux avec
    CARP et pfsync</font></h1>

<hr>

<h3>Table des Matières</h3>
<ul>
<li><a href="#carpintro">Introduction à CARP</a>
<li><a href="#carpop">Fonctionnement de CARP</a>
<li><a href="#carpconfig">Configurer CARP</a>
<li><a href="#carpex">Exemple de configuration CARP</a>
<li><a href="#pfsyncintro">Introduction à pfsync</a>
<li><a href="#pfsyncop">Fonctionnement de pfsync</a>
<li><a href="#pfsyncconfig">Configurer pfsync</a>
<li><a href="#pfsyncex">Exemple de configuration pfsync</a>
<li><a href="#failover">Utilisation combinée de CARP et pfsync pour
    assurer la haute disponibilité et la redondance</a>
<li><a href="#ops">Problèmes opérationnels</a>
        <ul>
        <li><a href="#bootconfig">Configuration de CARP et pfsync au
            démarrage</a>
        <li><a href="#forcefail">Comment forcer le basculement vers ou
            depuis le noeud maître</a>
        <li><a href="#RulesetTips">Astuces pour la création de
            règles</a>
        </ul>
<li><a href="#ref">Autres références</a>
</ul>

<hr>

<a name="carpintro"></a>
<h2>Introduction à CARP</h2>
CARP veut dire "Common Address Redundancy Protocol".
L'objectif premier de ce protocole est de permettre à un groupe d'hôtes
sur un même segment réseau de partager une adresse IP.
CARP est une alternative sécurisée et libre aux protocoles <a
href="http://www.ietf.org/rfc/rfc3768.txt">Virtual Router Redundancy
Protocol</a> (VRRP) et
<a href="http://www.ietf.org/rfc/rfc2281.txt">Hot Standby Router
Protocol</a> (HSRP).

<p>
On appelle un groupe d'hôtes utilisant CARP un "groupe de redondance".
Le groupe de redondance se voit attribuer une adresse IP partagée entre
les membres du groupe. Au sein de ce groupe, un hôte est désigné comme
"maître". Les autres membres sont appellés "esclaves".
L'hôte maître est celui qui "prend" l'adresse IP partagée. Il répond à
tout trafic ou requête ARP à l'attention de cette adresse.
Chaque hôte peut appartenir à plusieurs groupes de redondance.

<p>
Une utilisation commune de CARP est la création d'un groupe de pare-feux
redondants.
L'adresse IP virtuelle attribuée au groupe de redondance est désignée
comme l'adresse du routeur par défaut sur les machines clientes.
Dans le cas où le pare-feu maître rencontre une panne ou est déconnecté
du réseau, l'adresse IP virtuelle sera prise par un des pare-feux
esclaves et le service continuera à être rendu sans interruption.

<p>
CARP supporte IPv4 et IPv6.


<a name="carpop"></a>
<h2>Fonctionnement de CARP</h2>
L'hôte maître du groupe envoie des annonces régulières sur le réseau
local afin que les hôtes esclaves puissent savoir qu'il est toujours
disponible.
Si les hôtes esclaves ne reçoivent plus d'annonce de la part du maître
durant une période de temps configurable, alors l'un d'eux devient le
nouveau maître. Ce dernier est celui dont les valeurs configurées pour
<tt>advbase</tt> et <tt>advskew</tt> sont les plus faibles.

<p>
Il est possible de faire co-exister plusieurs groupes CARP sur un même
segment réseau.
Les annonces de CARP contiennent un identifiant appelé "Virtual Host ID"
qui permet à des membres d'un même groupe d'identifier le groupe de
redondance auquel une annonce donnée appartient.

<p>
Afin d'empêcher un utilisateur malicieux sur le segment réseau d'usurper
les annonces CARP, chaque groupe peut être doté d'un mot de passe. Ainsi
chaque paquet CARP envoyé au groupe est protégé par SHA1 MAC.

<p>
Étant donné que CARP est un protocole à part entière, il doit être
explicitement autorisé au niveau des règles de filtrage :

<blockquote>
<tt>
pass out on $carp_dev proto carp keep state
</tt>
</blockquote>

<p>
<tt>$carp_dev</tt> est l'interface physique que CARP utilise pour la
communication.


<a name="carpconfig"></a>
<h2>Configurer CARP</h2>
Chaque groupe de redondance est représenté par une interface réseau
virtuelle de type
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+5.4"
>carp(4)</a>. Ainsi, CARP est configuré à l'aide de la commande 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8">ifconfig(8)</a>.

<blockquote>
<tt>
ifconfig <i>carpN</i> create<br>
<br>
ifconfig <i>carpN</i> vhid <i>vhid</i> [pass <i>password</i>]
[carpdev <i>carpdev</i>] \<br>
&nbsp;&nbsp;&nbsp;[advbase <i>advbase</i>] [advskew <i>advskew</i>]
[state <i>state</i>] [group|-group <i>group</i>] \<br>
&nbsp;&nbsp;&nbsp;<i>ipaddress</i> netmask <i>mask</i>
</tt>
</blockquote>
<!-- XXX someone who understands carpnodes should add a piece -->

<dl>
<dt><tt><i>carpN</i></tt>
<dd>Le nom de l'interface virtuelle carp(4). <i>N</i> est un entier qui
représente le numéro de l'interface (par exemple carp10).

<dt><tt><i>vhid</i></tt>
<dd>L'identifiant Virtual Host ID. C'est un numéro unique utilisé pour
identifier le groupe de redondance parmi les autres groupes, et pour
distinguer les différents groupes sur un même réseau. Les valeurs
acceptables vont de 1 à 255. Elles doivent être identiques sur
chacun des membres du groupe.

<dt><tt><i>password</i></tt>
<dd>Le mot de passe d'authentification à utiliser lors de la
communication avec d'autres hôtes CARP dans le même groupe de
redondance.
Ce mot de passe doit être partagé entre tous les membres du groupe.

<dt><tt><i>carpdev</i></tt>
<dd>Ce paramètre optionnel spécifie l'interface réseau physique qui
appartient à ce groupe de redondance.
Par défaut, CARP essaiera de déterminer l'interface à utiliser en
cherchant une interface physique qui est dans le même sous-réseau que la
combinaison <i>adresse IP</i>/<i>masque</i> de l'interface carp(4).

<dt><tt><i>advbase</i></tt>
<dd>Ce paramètre optionnel spécifie le nombre de secondes qui s'écoule
entre chaque annonce CARP.
La valeur par défaut est 1 seconde.
Les valeurs acceptables sont de 1 à 255.

<dt><tt><i>advskew</i></tt>
<dd>Ce paramètre optionnel spécifie le biais à introduire au niveau de
<tt><i>advbase</i></tt> lors de l'envoi d'annonces CARP.
En manipulant <tt><i>advskew</i></tt>, l'hôte maître CARP peut être
choisi.
Plus grand est ce nombre, <i>moindres</i> sont les chances pour que
l'hôte soit retenu lorsqu'un maître est choisi.
La valeur par défaut est 0.
Les valeurs acceptables sont de 1 à 254.

<dt><tt><i>state</i></tt>
<dd>Permet de forcer l'état de l'interface carp(4). Les états valides
sont <tt>init</tt>, <tt>backup</tt> et <tt>master</tt>.

<dt><tt><i>group</i>, <i>-group</i></tt>
<dd>Ajoute ou supprime une interface carp(4) à un certain groupe d'interface.
Par défaut toutes les interfaces carp(4) sont ajoutées au groupe <tt>carp</tt>.
Chaque groupe possède un compteur <tt>carpdemote</tt> affectant toutes les
interfaces carp(4) liées à ce groupe.
Comme décrit plus <a href="#demote">loin</a>, il peut être utile de grouper
certaines interfaces ensembles pour des choix de redondance.

<dt><tt><i>ipaddress</i></tt>
<dd>Adresse IP partagée entre les membres du groupe de redondance.
Cette adresse n'a pas besoin d'être dans le même sous-réseau que
l'adresse IP de l'interface physique (si une adresse est configurée sur
cette interface).
En revanche, elle doit être la même sur tous les membres du groupe.

<dt><tt><i>mask</i></tt>
<dd>Masque de sous-réseau de l'adresse IP partagée.
</dl>

<p>
Vous pouvez contrôler d'avantages de paramètres de CARP à l'aide de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8"
>sysctl(8)</a>.

<dl>
<dt><tt>net.inet.carp.allow</tt>
<dd>Permet d'accepter ou de refuser les paquets CARP entrants. La valeur
par défaut est 1 (accepter).

<dt><tt>net.inet.carp.preempt</tt>
<dd>Permet aux hôtes au sein d'un même groupe de redondance d'avoir de
meilleurs <tt>advbase</tt> et <tt>advskew</tt> pour élire le maître.
De plus, cette option permet de basculer toutes les interfaces d'un groupe dans
le cas où une interface est en panne.
Si une des interfaces physiques utilisées pour CARP est indisponible,
CARP augmentera le compteur de dégradation, <tt>carpdemote</tt>, de 1 sur
le groupe d'interfaces dont l'interface carp(4) est membre, ce qui aura pour
effet de basculer tous les membres du groupe ensemble. 
<tt>net.inet.carp.preempt</tt> est à 0 (désactivation) par défaut.

<dt><tt>net.inet.carp.log</tt>
<dd>Journalise les changements d'états, les mauvais paquets CARP et autres
erreurs. Peut être entre 0 et 7, correspondant aux priorités syslog(3).
La valeur par défaut est 2 (changements d'états uniquement).
</dl>


<a name="carpex"></a>
<h2>Exemple de configuration CARP</h2>
Voici un exemple de configuration CARP :

<blockquote>
<tt>
# sysctl -w net.inet.carp.allow=1<br>
# ifconfig carp1 create<br>
# ifconfig carp1 vhid 1 pass mekmitasdigoat carpdev em0 \<br>
&nbsp;&nbsp;&nbsp;&nbsp;advskew 100 10.0.0.1 netmask 255.255.255.0<br>
</tt>
</blockquote>

<p>
Les commandes ci-dessous permettent de faire les opérations suivantes :
<ul>
<li>Active la réception des paquets CARP (c'est le comportement par
défaut)
<li>Crée une interface carp(4), <tt>carp1</tt>.
<li>Configure <tt>carp1</tt> pour l'hôte virtuel #1, met en place un mot
de passe, utilise <tt>em0</tt> comme interface physique du groupe, et
fait de cette machine un esclave étant donné la valeur de
<tt>advskew</tt>, fixée à <tt>100</tt> (en supposant bien entendu que le
maître a un <tt>advskew</tt> de moins de 100).
L'adresse IP partagée affectée à ce groupe est 10.0.0.1/255.255.255.0.
</ul>

<p>
L'utilisation de <tt>ifconfig</tt> permet de voir l'état de l'interface
<tt>carp1</tt>. 

<blockquote>
<tt>
# ifconfig carp1<br>
carp1: flags=8802&lt;UP,BROADCAST,SIMPLEX,MULTICAST&gt; mtu 1500<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carp: BACKUP carpdev em0 vhid 1 advbase 1
advskew 100<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;groups: carp<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inet 10.0.0.1 netmask 0xffffff00 broadcast
10.0.0.255
</tt>
</blockquote>


<a name="pfsyncintro"></a>
<h2>Introduction à pfsync</h2>
L'interface réseau
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+5.4"
>pfsync(4)</a> expose certains changements effectués au niveau de la
table d'état de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+5.4"
>pf(4)</a>.
En surveillant cette interface à l'aide de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&amp;sektion=8"
>tcpdump(8)</a>, les changements de la table d'état peuvent être
observés en temps réel.
De plus, l'interface pfsync(4) peut envoyer ces messages relatifs aux
changements affectant la table d'état sur le réseau afin que d'autres
pare-feux PF puissent fusionner ces changements à leurs propres tables
d'état.
De même, pfsync(4) peut aussi être en écoute des messages entrants.


<a name="pfsyncop"></a>
<h2>Fonctionnement de pfsync</h2>
Par défaut, pfsync(4) n'envoie pas et ne reçoit pas les mises à jour de
la table d'état à travers le réseau. Cependant, les mises à jour peuvent
être toujours surveillées en utilisant tcpdump(8) ou d'autres outils
similaires en local sur la machine.

<p>
Lorsque pfsync(4) est configuré pour envoyer et recevoir des mises à
jour à travers le réseau, le comportement par défaut consiste à utiliser le
multicast sur le réseau local.
Toutes les mises à jour sont envoyées sans authentification.
Il faudrait donc utiliser une des deux méthodes suivantes pour sécuriser
les échanges :
<ol>
<li>Connectez les deux pare-feux qui devront échanger les mises à jour à
    l'aide d'un câble croisé. Les interfaces physiques ainsi connectées
    seront utilisées comme <tt>syncdev</tt> (voir <a
    href="#pfsyncconfig">plus bas</a>).
<li>Utilisez l'option <tt>syncpeer</tt> de la commande ifconfig(8) (voir
	<a href="#pfsyncconfig">plus bas</a>) de telle façon à utiliser des
	échanges unicast pour envoyer les mises à jour au pair, puis configurez
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&amp;sektion=4"
>ipsec(4)</a>
	entre les deux hôtes pour sécuriser le trafic pfsync(4).
</ol>

<p>
Lorsque les mises à jour sont envoyées et reçues à travers le réseau,
les paquets pfsync doivent être autorisés par les règles de filtrage :

<blockquote>
<tt>
pass on $sync_if proto pfsync
</tt>
</blockquote>

<p>
<tt>$sync_if</tt> est l'interface physique utilisée pour la
communication pfsync(4).


<a name="pfsyncconfig"></a>
<h2>Configurer pfsync</h2>
pfsync(4) étant une interface réseau virtuelle, elle est configurée à
l'aide de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8"
>ifconfig(8)</a>. 

<blockquote>
<tt>
ifconfig <i>pfsyncN</i> syncdev <i>syncdev</i> [syncpeer
<i>syncpeer</i>] [defer|-defer]
</tt>
</blockquote>

<dl>
<dt><tt><i>pfsyncN</i></tt>
<dd>Le nom de l'interface pfsync(4). Si vous utilisez le noyau
<tt>GENERIC</tt>, l'interface <tt>pfsync0</tt> existe par défaut.

<dt><tt><i>syncdev</i></tt>
<dd>Le nom de l'interface physique utilisée pour envoyer les mises à
jour pfsync.

<dt><tt><i>syncpeer</i></tt>
<dd>Ce paramètre optionnel spécifie l'adresse IP d'un hôte avec qui les
échanges de mises à jour pfsync auront lieu.
Par défaut les mises à jour pfsync sont multicast sur le réseau local.
Cette option change ce comportement et utilise des échanges unicast avec
le <tt><i>syncpeer</i></tt> spécifié.
</dl>


<dt><tt><i>defer</i></tt>
<dd>Si le drapeau <tt>defer</tt> est utilisé, le paquet initial d'une
nouvelle connexion traversant le pare-feu ne sera pas transmis tant qu'un
autre système pfsync(4) n'aura pas acquitté l'état ajouté dans la table, ou
que le délai d'attente aura expiré.
Cela ajoute un petit délai mais permet au trafic de passer quand plus d'un
pare-feu doit s'occuper des paquets activement ("actif/actif"),
par exemple avec certaines configurations ospfd(8), bgpd(8) ou carp(4).

<a name="pfsyncex"></a>
<h2>Exemple de configuration pfsync</h2>
Voici un exemple de configuration pfsync.

<blockquote>
<tt>
# ifconfig pfsync0 syncdev em1 up<br>
</tt>
</blockquote>

Cette commande active pfsync sur l'interface <tt>em1</tt>.
Les mises à jour seront envoyées en multicast sur le réseau. Ainsi tout
hôte utilisant pfsync pourra les recevoir.


<a name="failover"></a>
<h2>Utilisation combinée de CARP et pfsync pour assurer la haute
    disponibilité et la redondance</h2>
En combinant les fonctionnalités de CARP et de pfsync, un groupe de deux
pare-feux ou plus peut être utilisé pour créer une grappe de pare-feu
hautement disponible et entièrement redondante.

<dl>
<dt>CARP:
<dd>Gère le basculement automatique d'un pare-feu à un autre.

<dt>pfsync:
<dd>Synchronise la table d'état entre les pare-feux.
Dans le cas d'un basculement, le trafic n'est pas interrompu lorsque le
nouveau pare-feu maître prend la main.
</dl>

<p>
Voici un scénario typique avec deux pare-feux : <tt>fw1</tt> et
<tt>fw2</tt>.

<pre>
         +----| WAN/Internet |----+ 
         |                        |
      em2|                        |em2   
      +-----+                  +-----+
      | fw1 |-em1----------em1-| fw2 |
      +-----+                  +-----+
      em0|                        |em0
         |                        | 
      ---+-------LAN partagé------+---
</pre>

<p>
Les interfaces <tt>em1</tt> des pare-feux sont connectées à l'aide d'un
câble croisé. 
Les interfaces <tt>em0</tt> sont connectées au LAN et les interfaces
<tt>em2</tt> sont connectées à un réseau WAN ou à Internet.
Les adresses IP utilisées sont les suivantes :

<ul>
<li>fw1 em0 : 172.16.0.1
<li>fw1 em1 : 10.10.10.1
<li>fw1 em2 : 192.0.2.1
<li>fw2 em0 : 172.16.0.2
<li>fw2 em1 : 10.10.10.2
<li>fw2 em2 : 192.0.2.2
<li>IP partagée sur le LAN : 172.16.0.100
<li>IP partagée sur WAN/Internet : 192.0.2.100
</ul>

<p>
La politique réseau veut que le pare-feu <tt>fw1</tt> soit maître.

<p>
Configurons d'abord fw1 :

<table border=0 width="650">
<tr><td nowrap bgcolor="#EEEEEE">
<pre>
! activation de la préemption et le basculement de toutes les interfaces
# sysctl -w net.inet.carp.preempt=1

! configuration de pfsync
# ifconfig em1 10.10.10.1 netmask 255.255.255.0
# ifconfig pfsync0 syncdev em1
# ifconfig pfsync0 up

! configuration de CARP côté LAN
# ifconfig carp1 create
# ifconfig carp1 vhid 1 carpdev em0 pass lanpasswd \
     172.16.0.100 netmask 255.255.255.0

! configuration de CARP côté WAN/Internet
# ifconfig carp2 create
# ifconfig carp2 vhid 2 carpdev em2 pass netpasswd \
    192.0.2.100 netmask 255.255.255.0
</pre>
</td></tr>
</table>

<p>
Configurons maintenant fw2 :

<table border=0 width="650">
<tr><td nowrap bgcolor="#EEEEEE">
<pre>
! activation de la préemption et le basculement de toutes les interfaces
# sysctl -w net.inet.carp.preempt=1

! configuration de pfsync
# ifconfig em1 10.10.10.2 netmask 255.255.255.0
# ifconfig pfsync0 syncdev em1
# ifconfig pfsync0 up

! configuration de CARP côté LAN
# ifconfig carp1 create
# ifconfig carp1 vhid 1 carpdev em0 pass lanpasswd \
     advskew 128 172.16.0.100 netmask 255.255.255.0

! configuration de CARP côté WAN/Internet
# ifconfig carp2 create
# ifconfig carp2 vhid 2 carpdev em2 pass netpasswd \
    advskew 128 192.0.2.100 netmask 255.255.255.0
</pre>
</td></tr>
</table>


<a name="ops"></a>
<h2>Problèmes opérationnels</h2>
Voici quelques problèmes opérationnels communément rencontrés avec
CARP/pfsync.

<a name="bootconfig"></a>
<h3>Configuration de CARP et pfsync au démarrage</h3>
Étant donné que carp(4) et pfsync(4) sont des interfaces réseau, elles
peuvent être configurées au démarrage en créant des fichiers
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hostname.if&amp;sektion=5"
>hostname.if(5)</a>.
Le script de démarrage
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=netstart&amp;sektion=8"
>netstart</a> prendra soin de la création et de la configuration des
interfaces.

<p>
Exemples :

<dl>
<dt>/etc/hostname.carp1</dt>
<dd>
inet 172.16.0.100 255.255.255.0 172.16.0.255 vhid 1 carpdev em0 \<br>
&nbsp;&nbsp;&nbsp;&nbsp;pass lanpasswd
</dd>
</dl>

<dl>
<dt>/etc/hostname.pfsync0</dt>
<dd>
up syncdev em1
</dd>
</dl>

<a name="forcefail"></a>
<h3>Comment forcer le basculement vers ou depuis le noeud maître</h3>
De temps à autre, il peut y avoir besoin de forcer le basculement du
maître intentionnellement.
Il peut s'agir par exemple de la nécessité d'arrêter le maître pour des
besoins de maintenance ou de diagnostic suite à des problèmes de
fonctionnements.
L'objectif est de faire basculer le trafic vers un des hôtes esclaves
afin que les utilisateurs ne soient pas affectés par ces opérations.

<p>
Pour forcer le basculement d'un groupe CARP donné, il vous suffit
d'arrêter l'interface carp(4) sur le maître. Ceci aura pour effet
d'amener le maître à annoncer des valeurs <tt>advbase</tt> et
<tt>advskew</tt> "infinies". Les autres membres du groupe de redondance
le remarqueront immédiatement et l'un d'eux prendra le rôle de maître.

<blockquote>
<tt>
# ifconfig carp1 down
</tt>
</blockquote>

<p>
Une alternative consiste à positionner <tt>advskew</tt> à une valeur
supérieure à la valeur d'<tt>advskew</tt> sur les hôtes esclaves. Ceci
causera un basculement tout en permettant au maître de participer au
groupe CARP.

<a name="demote"></a>
<p>
Une autre méthode de basculement consiste à paramétrer finement le
compteur de dégradation CARP.
Ce compteur est une mesure de la promptitude d'un hôte à devenir le
maître d'une groupe CARP.
Par exemple, lorsqu'un hôte est au milieu d'une séquence de démarrage,
il ne saurait devenir maître CARP avant que toutes les interfaces soient
configurées, que tous les services réseau soient démarrés, etc...
Des hôtes annonçant une grande valeur de dégradation seront moins
privilégiés pour passer maître.

<p>
Un compteur de dégradation est stocké au niveau de chaque groupe
d'interfaces auquel appartient l'interface CARP.
Par défaut, les interfaces CARP sont membres du groupe d'interfaces
"carp".
La valeur actuelle du compteur de dégradation peut être vue à l'aide
d'ifconfig(8) :

<blockquote>
<tt>
# ifconfig -g carp<br>
carp: carp demote count 0
</tt>
</blockquote>

<p>
Dans cet exemple, le compteur associé au groupe d'interfaces "carp" est
affiché.
Lorsqu'un hôte CARP s'annonce sur le réseau, il prend la somme des
compteurs de dégradation pour chaque groupe d'interfaces auquel est
associée l'interface carp(4) et l'annonce comme étant sa valeur de
dégradation.

<p>
Considérons maintenant l'exemple suivant.
Deux pare-feux utilisant CARP avec les interfaces ci-après :

<ul>
<li>carp1 -- Service de Comptabilité
<li>carp2 -- Employés
<li>carp3 -- Internet
<li>carp4 -- DMZ
</ul>

<p>
L'objectif consiste à basculer uniquement les groupes carp1 et carp2 au
pare-feu secondaire.

<p>
Tout d'abord, affectez chaque interface à un nouveau groupe, dans ce cas
appelé "internal" :

<blockquote>
<tt>
# ifconfig carp1 group internal<br>
# ifconfig carp2 group internal<br>
# ifconfig internal<br>
carp1: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu
1500<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carp: MASTER carpdev em0 vhid 1 advbase 1
advskew 100<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;groups: carp internal<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inet 10.0.0.1 netmask 0xffffff00
broadcast
10.0.0.255<br>
carp2: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu
1500<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carp: MASTER carpdev em1 vhid 2 advbase 1
advskew 100<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;groups: carp internal<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inet 10.0.1.1 netmask 0xffffff00
broadcast
10.0.1.255
</tt>
</blockquote>

<p>
Maintenant, augmentez la valeur du compteur de dégradation pour le
groupe "internal" à l'aide d'ifconfig(8):

<blockquote>
<tt>
# ifconfig -g internal<br>
internal: carp demote count 0<br>
# ifconfig -g internal carpdemote 50<br>
# ifconfig -g internal<br>
internal: carp demote count 50<br>
</tt>
</blockquote>

<p>
Le pare-feu basculera les groupes carp1 et carp2 vers l'autre pare-feu
du cluster tout en restant maître de carp3 et carp4.
Si l'autre pare-feu commence à s'annoncer avec une valeur de dégradation
supérieure à 50 ou s'il arrête d'effectuer des annonces, alors ce
pare-feu prendra à nouveau le rôle de maître pour carp1 et carp2.

<p>
Pour revenir vers le pare-feu primaire, renversez les modifications :

<blockquote>
<tt>
# ifconfig -g internal -carpdemote 50<br>
# ifconfig -g internal<br>
internal: carp demote count 0<br>
</tt>
</blockquote>

<p>
Des services réseau tels que
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&amp;sektion=8"
>OpenBGPD</a> et
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sasyncd&amp;sektion=8"
>sasyncd(8)</a> utilisent le compteur de dégradation pour s'assurer que
le pare-feu ne devienne maître que lorsque les sessions BGP ont été
établies et les SAs IPsec ont été synchronisées.

<a name="RulesetTips"></a> 
<h3>Astuces pour la création de règles</h3>
<b>Filtrer l'interface physique.</b>
Pour PF, le trafic réseau arrive à partir de l'interface physique, pas
de l'interface virtuelle CARP (i.e., <tt>carp0</tt>).
N'oubliez pas que, sous PF, le nom d'une interface dans une règle
correspond au nom de l'interface physique ou à l'adresse réseau qui lui
est associée.
Tenez-en compte lors de l'écriture de vos règles.
Par exemple, la règle suivante pourrait être correcte :
<blockquote><tt>
pass in on fxp0 inet proto tcp from any to carp0 port 22
</tt></blockquote>
mais le remplacement de <tt>fxp0</tt> par <tt>carp0</tt> ne permettrait
pas de la faire fonctionner comme on le souhaite.
<p>
<b>N'oubliez PAS</b> d'autoriser <tt>proto carp</tt> et <tt>proto
pfsync</tt>!

<p>

<a name="ref"></a>
<h2>Références supplémentaires</h2>
Pour plus d'informations, veuillez consulter les sources suivantes :

<ul>
<li>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+5.4"
>carp(4)</a>
<li>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+5.4"
>pfsync(4)</a>
<li>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8"
>ifconfig(8)</a>
<li>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hostname.if&amp;sektion=5"
>hostname.if(5)</a>
<li>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+5.4"
>pf.conf(5)</a>
<li>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifstated&amp;sektion=8"
>ifstated(8)</a>
<li>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifstated.conf&amp;sektion=5" 
>ifstated.conf(5)</a>
</ul>


<p>
[<a href="authpf.html">Précédent : Authpf : Shell Utilisateur pour les
Passerelles d'Authentifications</a>]
[<a href="index.html">Index</a>]
[<a href="example1.html">Suivant : pare-feu pour réseau domestique ou
petite société</a>]

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[back]"></a> 
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: carp.html,v 1.35 ]<br>
$Translation: carp.html,v 1.40 2013/11/01 17:02:17 rustybsd Exp $<br>
-->
$OpenBSD: carp.html,v 1.33 2013/11/01 18:04:05 ajacoutot Exp $
</small>

</body>
</html> 
@


1.33
log
@Sync with Steelix CVS
@
text
@d779 1
a779 1
$OpenBSD$
@


1.32
log
@Sync with Steelix CVS
@
text
@d151 1
a151 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+5.3"
d307 1
a307 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+5.3"
d310 1
a310 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+5.3"
d739 1
a739 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+5.3"
d742 1
a742 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+5.3"
d751 1
a751 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+5.3"
d776 2
a777 2
Originally [OpenBSD: carp.html,v 1.34 ]<br>
$Translation: carp.html,v 1.39 2013/05/07 08:34:48 rustybsd Exp $<br>
@


1.31
log
@Sync with Steelix CVS
@
text
@d151 1
a151 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+5.2"
d307 1
a307 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+5.2"
d310 1
a310 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+5.2"
d739 1
a739 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+5.2"
d742 1
a742 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+5.2"
d751 1
a751 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+5.2"
d776 2
a777 2
Originally [OpenBSD: carp.html,v 1.33 ]<br>
$Translation: carp.html,v 1.38 2013/01/25 15:02:32 rustybsd Exp $<br>
@


1.30
log
@Sync with Steelix CVS
@
text
@d175 4
a178 2
identifier le groupe de redondance sur le réseau. Les valeurs
acceptables sont de 1 à 255.
d776 2
a777 2
Originally [OpenBSD: carp.html,v 1.32 ]<br>
$Translation: carp.html,v 1.37 2012/11/01 19:46:20 rustybsd Exp $<br>
@


1.29
log
@Sync with Steelix CVS
@
text
@d151 1
a151 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+5.1"
d305 1
a305 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+5.1"
d308 1
a308 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+5.1"
d737 1
a737 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+5.1"
d740 1
a740 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+5.1"
d749 1
a749 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+5.1"
d774 2
a775 2
Originally [OpenBSD: carp.html,v 1.31 ]<br>
$Translation: carp.html,v 1.36 2012/05/17 14:16:54 rustybsd Exp $<br>
@


1.28
log
@Sync with Steelix CVS
@
text
@d4 1
a4 1
<title>PF : Haute-disponibilité des pare-feu avec CARP et pfsync</title>
d46 1
a46 1
<h1><font color="#e00000">PF: Haute-disponibilité des pare-feu avec
d62 1
a62 1
    assurer la haute-disponibilité et la redondance</a>
d98 1
a98 1
Une utilisation commune de CARP est la création d'un groupe de pare-feu
d103 1
a103 1
du réseau, l'adresse IP virtuelle sera prise par un des pare-feu
d112 1
a112 1
L'hôte maître du groupe envoit des annonces régulières sur le réseau
d115 1
a115 1
Si les hôtes esclaves ne recoivent plus d'annonce de la part du maître
d133 1
a133 1
Etant donné que CARP est un protocole à part entière, il doit être
d214 1
a214 1
Chaque groupe posséde un compteur <tt>carpdemote</tt> affectant toutes les
d216 1
a216 1
Comme décrit plus <a href="#demote">loin</a>, il peut-être utile de grouper
d245 1
a245 1
Si une des interfaces physiques utilisée pour CARP est indisponible,
d253 1
a253 1
erreurs. Peut-être entre 0 et 7, correspondant aux priorités syslog(3).
d276 1
a276 1
<li>Créé une interface carp(4), <tt>carp1</tt>.
d316 1
a316 1
pare-feu PF puissent fusionner ces changements à leurs propres tables
d323 1
a323 1
Par défaut, pfsync(4) n'envoit pas et ne reçoit pas les mises à jour de
d336 1
a336 1
<li>Connectez les deux pare-feu qui devront échanger les mises à jour à
d397 1
a397 1
nouvelle connexion traversant le pare-feu ne sera pas transmit tant qu'un
d420 1
a420 1
<h2>Utilisation combinée de CARP et pfsync pour assurer la haute-
d423 1
a423 1
pare-feu ou plus peut être utilisé pour créer une grappe de pare-feu
d431 1
a431 1
<dd>Synchronise la table d'état entre les pare-feu.
d437 1
a437 1
Voici un scénario typique avec deux pare-feu : <tt>fw1</tt> et
d453 1
a453 1
Les interfaces <tt>em1</tt> des pare-feu sont connectées à l'aide d'un
d535 1
a535 1
Etant donné que carp(4) et pfsync(4) sont des interfaces réseau, elles
d600 1
a600 1
Des hôtes annoncant une grande valeur de dégradation seront moins
d628 1
a628 1
Deux pare-feu utilisant CARP avec les interfaces ci-après :
d775 1
a775 1
$Translation: carp.html,v 1.35 2012/05/11 18:43:42 rustybsd Exp $<br>
@


1.27
log
@Sync with Steelix CVS
@
text
@d151 1
a151 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+5.0"
d305 1
a305 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+5.0"
d308 1
a308 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+5.0"
d737 1
a737 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+5.0"
d740 1
a740 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+5.0"
d749 1
a749 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+5.0"
d774 2
a775 2
Originally [OpenBSD: carp.html,v 1.30 ]<br>
$Translation: carp.html,v 1.34 2012/02/12 07:48:12 benoit Exp $<br>
@


1.26
log
@Sync with Steelix CVS
@
text
@d410 1
a410 1
# ifconfig pfsync0 syncdev em1<br>
d774 2
a775 2
Originally [OpenBSD: carp.html,v 1.29 ]<br>
$Translation: carp.html,v 1.33 2011/11/05 09:20:59 benoit Exp $<br>
@


1.25
log
@Sync with Steelix CVS
@
text
@d151 1
a151 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+4.9"
d305 1
a305 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+4.9"
d308 1
a308 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.9"
d737 1
a737 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+4.9"
d740 1
a740 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+4.9"
d749 1
a749 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+4.9"
d774 2
a775 2
Originally [OpenBSD: carp.html,v 1.28 ]<br>
$Translation: carp.html,v 1.32 2011/05/07 06:39:55 benoit Exp $<br>
@


1.24
log
@Sync with Steelix CVS
@
text
@d151 1
a151 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+4.8"
d305 1
a305 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+4.8"
d308 1
a308 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.8"
d737 1
a737 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+4.8"
d740 1
a740 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+4.8"
d749 1
a749 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+4.8"
d774 2
a775 2
Originally [OpenBSD: carp.html,v 1.27 ]<br>
$Translation: carp.html,v 1.31 2010/11/06 14:28:08 benoit Exp $<br>
@


1.23
log
@Sync with Steelix CVS
@
text
@d151 1
a151 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+4.7"
d305 1
a305 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+4.7"
d308 1
a308 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.7"
d737 1
a737 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+4.7"
d740 1
a740 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+4.7"
d749 1
a749 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+4.7"
d774 2
a775 2
Originally [OpenBSD: carp.html,v 1.26 ]<br>
$Translation: carp.html,v 1.30 2010/05/24 13:28:43 benoit Exp $<br>
@


1.22
log
@Sync with Steelix CVS
@
text
@d151 1
a151 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+4.6"
d162 2
a163 2
[state <i>state</i>] <i>ipaddress</i> \<br>
&nbsp;&nbsp;&nbsp;netmask <i>mask</i>
d166 1
d211 8
d243 2
a244 2
De plus, cette option permet de basculer toutes les interfaces dans le
cas où une interface est en panne.
d246 4
a249 3
CARP fixera l'<tt>advskew</tt> de toutes les autres interfaces à 240. Ce
qui revient à se déclarer indisponible et forcer un basculement.
Cette option est à 0 (désactivation) par défaut.
d252 3
a254 2
<dd>Journalise les mauvais paquets CARP. La valeur par défaut est 0
(désactivé).
d305 1
a305 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+4.6"
d308 1
a308 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.6"
d373 1
a373 1
<i>syncpeer</i>]
d395 9
d591 1
d737 1
a737 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+4.6"
d740 1
a740 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+4.6"
d749 1
a749 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+4.6"
d774 2
a775 2
Originally [OpenBSD: carp.html,v 1.25 ]<br>
$Translation: carp.html,v 1.29 2010/02/01 22:38:20 benoit Exp $<br>
@


1.21
log
@Sync with Steelix CVS
@
text
@a243 8

<dt><tt>net.inet.carp.arpbalance</tt>
<dd>Permet de partager la charge entre plusieurs membres d'un même
groupe de redondance.
Cette option est à 0 (désactivation) par défaut.
Veuillez consulter
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+4.6"
>carp(4)</a> pour plus d'informations.
d753 2
a754 2
Originally [OpenBSD: carp.html,v 1.24 ]<br>
$Translation: carp.html,v 1.28 2009/10/19 15:29:20 benoit Exp $<br>
@


1.20
log
@Sync with Steelix CVS
@
text
@d151 1
a151 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+4.5"
d153 1
a153 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8"
>ifconfig(8)</a>.
d250 1
a250 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+4.5"
d302 1
a302 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+4.5"
d305 1
a305 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.5"
d724 1
a724 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+4.5"
d727 1
a727 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+4.5"
d736 1
a736 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+4.5"
d761 2
a762 2
Originally [OpenBSD: carp.html,v 1.23 ]<br>
$Translation: carp.html,v 1.27 2009/04/30 22:46:58 benoit Exp $<br>
@


1.19
log
@Sync with Steelix CVS
@
text
@d151 1
a151 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+4.4"
d251 1
a251 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+4.4"
d303 1
a303 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+4.4"
d306 1
a306 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.4"
d725 1
a725 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+4.4"
d728 1
a728 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+4.4"
d737 1
a737 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+4.4"
d762 2
a763 2
Originally [OpenBSD: carp.html,v 1.22 ]<br>
$Translation: carp.html,v 1.26 2008/11/27 04:57:54 benoit Exp $<br>
@


1.18
log
@Sync with Steelix CVS
@
text
@d151 1
a151 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+4.3"
d251 1
a251 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+4.3"
d303 1
a303 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+4.3"
d306 1
a306 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.3"
d542 3
a544 1
<br>
d725 1
a725 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+4.3"
d728 1
a728 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+4.3"
d737 1
a737 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+4.3"
d762 2
a763 2
Originally [OpenBSD: carp.html,v 1.20 ]<br>
$Translation: carp.html,v 1.25 2008/08/20 15:31:59 gapz Exp $<br>
@


1.17
log
@Sync with Steelix CVS
@
text
@d151 1
a151 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+4.2"
d251 1
a251 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+4.2"
d303 1
a303 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+4.2"
d306 1
a306 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.2"
d723 1
a723 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+4.2"
d726 1
a726 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+4.2"
d735 1
a735 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+4.2"
d760 2
a761 2
Originally [OpenBSD: carp.html,v 1.19 ]<br>
$Translation: carp.html,v 1.24 2008/01/11 10:30:24 saad Exp $<br>
@


1.16
log
@Sync with steelix translation CVS
@
text
@d151 1
a151 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+4.1"
d251 1
a251 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+4.1"
d303 1
a303 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+4.1"
d306 1
a306 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.1"
d723 1
a723 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+4.1"
d726 1
a726 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+4.1"
d735 1
a735 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+4.1"
d760 2
a761 2
Originally [OpenBSD: carp.html,v 1.18 ]<br>
$Translation: carp.html,v 1.23 2007/05/07 09:38:20 ajacoutot Exp $<br>
@


1.15
log
@sync with Steelix CVS
@
text
@d151 1
a151 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+4.0"
d153 1
a153 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d224 1
a224 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d251 1
a251 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+4.0"
d303 1
a303 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+4.0"
d306 1
a306 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+4.0"
d309 1
a309 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d341 1
a341 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&amp;sektion=4&amp;manpath=OpenBSD+4.0"
d365 1
a365 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d526 1
a526 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hostname.if&amp;sektion=5&amp;manpath=OpenBSD+4.0"
d529 1
a529 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=netstart&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d689 1
a689 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d691 1
a691 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sasyncd&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d723 1
a723 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+4.0"
d726 1
a726 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+4.0"
d729 1
a729 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d732 1
a732 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hostname.if&amp;sektion=5&amp;manpath=OpenBSD+4.0"
d735 1
a735 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+4.0"
d738 1
a738 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifstated&amp;sektion=8&amp;manpath=OpenBSD+4.0"
d741 1
a741 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifstated.conf&amp;sektion=5&amp;manpath=OpenBSD+4.0" 
d760 2
a761 2
Originally [OpenBSD: carp.html,v 1.16 ]<br>
$Translation: carp.html,v 1.22 2007/02/15 08:29:35 benoit Exp $<br>
@


1.14
log
@sync with steelix translation CVS
@
text
@d84 1
a84 1
Protocol</a> (VRRP)et
d209 1
a209 1
sont <tt>init</tt>, <tt>backup</tt>, et <tt>master</tt>.
d277 2
a278 2
fais de cette machine un esclave étant donné la valeur de
<tt>advskew</tt>, fixée à <tt>100</tt> (en supposant bien entedu que le
d585 1
a585 1
configurées, que tous les services réseau soient démarrés, etc.
d590 1
a590 1
Un compteur de dégration est stocké au niveau de chaque groupe
d761 1
a761 1
$Translation: carp.html,v 1.21 2007/02/14 13:13:03 saad Exp $<br>
@


1.13
log
@sync with Steelix CVS
@
text
@d560 5
a564 5
Pour forcer le basculement, il vous suffit d'arrêter l'interface carp(4)
sur le maître. Ceci aura pour effet d'amener le maître à annoncer des
valeurs <tt>advbase</tt> et <tt>advskew</tt> "infinies".
Les autres membres du groupe de redondance le remarqueront immédiatement
et l'un d'eux prendra le rôle de maître.
d573 4
a576 2
Si la préemption est activée, <b>tous</b> les autres groupes CARP
basculeront aussi.
d760 2
a761 2
Originally [OpenBSD: carp.html,v 1.15 ]<br>
$Translation: carp.html,v 1.20 2007/02/05 07:03:30 benoit Exp $<br>
@


1.12
log
@sync with steelix translation CVS
@
text
@d4 1
a4 1
<title>PF : Haute-disponibilité des pare-feux avec CARP et pfsync</title>
d46 1
a46 1
<h1><font color="#e00000">PF: Haute-disponibilité des pare-feux avec
d98 1
a98 1
Une utilisation commune de CARP est la création d'un groupe de pare-feux
d103 1
a103 1
du réseau, l'adresse IP virtuelle sera prise par un des pare-feux
d314 1
a314 1
pare-feux PF puissent fusionner ces changements à leurs propres tables
d334 1
a334 1
<li>Connectez les deux pare-feux qui devront échanger les mises à jour à
d412 1
a412 1
pare-feux ou plus peut être utilisé pour créer une grappe de pare-feux
d420 1
a420 1
<dd>Synchronise la table d'état entre les pare-feux.
d426 1
a426 1
Voici un scénario typique avec deux pare-feux : <tt>fw1</tt> et
d442 1
a442 1
Les interfaces <tt>em1</tt> des pare-feux sont connectées à l'aide d'un
d759 1
a759 1
$Translation: carp.html,v 1.19 2007/01/24 12:55:52 ajacoutot Exp $<br>
@


1.11
log
@sync with Steelix CVS
@
text
@d14 1
a14 1
Copyright (c) 2005 Joel Knight <enabled@@myrealbox.com>
d205 1
a205 1
Les valeurs acceptables sont de 1 à 255.
d758 2
a759 2
Originally [OpenBSD: carp.html,v 1.14 ]<br>
$Translation: carp.html,v 1.18 2007/01/22 05:35:55 saad Exp $<br>
@


1.10
log
@sync with Steelix CVS
@
text
@d200 1
a200 1
En manipulant <tt><i>advbase</i></tt>, l'hôte maître CARP peut être
d758 2
a759 2
Originally [OpenBSD: carp.html,v 1.13 ]<br>
$Translation: carp.html,v 1.17 2006/11/22 15:02:41 saad Exp $<br>
@


1.9
log
@sync with steelix translation CVS
@
text
@d151 1
a151 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+3.9"
d153 1
a153 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d224 1
a224 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d251 1
a251 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+3.9"
d293 1
d303 1
a303 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+3.9"
d306 1
a306 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+3.9"
d309 1
a309 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d341 1
a341 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&amp;sektion=4&amp;manpath=OpenBSD+3.9"
d365 1
a365 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d526 1
a526 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hostname.if&amp;sektion=5&amp;manpath=OpenBSD+3.9"
d529 1
a529 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=netstart&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d572 122
d721 1
a721 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+3.9"
d724 1
a724 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+3.9"
d727 1
a727 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d730 1
a730 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hostname.if&amp;sektion=5&amp;manpath=OpenBSD+3.9"
d733 1
a733 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+3.9"
d736 1
a736 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifstated&amp;sektion=8&amp;manpath=OpenBSD+3.9"
d739 1
a739 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifstated.conf&amp;sektion=5&amp;manpath=OpenBSD+3.9" 
d758 2
a759 2
Originally [OpenBSD: carp.html,v 1.12 ]<br>
$Translation: carp.html,v 1.16 2006/10/28 18:23:46 aanriot Exp $<br>
@


1.8
log
@sync with steelix translation CVS
@
text
@d84 3
a86 3
Protocol (VRRP)</a> et <a
href="http://www.ietf.org/rfc/rfc2281.txt">Hot Standby Router
Protocol (HSRP)</a>.
d258 1
a258 1
Voici un exemple de configuration CARP.
d338 2
a339 3
<a
    href="#pfsyncconfig">plus bas</a>) de telle façon à utiliser des
échanges unicast pour envoyer les mises à jour au pair, puis configurez
d342 1
a342 1
entre les deux hôtes pour sécuriser le trafic pfsync(4).
d635 2
a636 2
Originally [OpenBSD: carp.html,v 1.11 ]<br>
$Translation: carp.html,v 1.15 2006/10/26 07:42:36 ajacoutot Exp $<br>
@


1.7
log
@sync with steelix translation CVS
@
text
@d163 2
a164 2
[state <i>state</i>] <i>ipaddress</i>
<i>mask</i>
d265 1
a265 1
&nbsp;&nbsp;&nbsp;&nbsp;advskew 100 10.0.0.1 255.255.255.0<br>
d479 1
a479 1
     172.16.0.100 255.255.255.0
d484 1
a484 1
    192.0.2.100 255.255.255.0
d506 1
a506 1
     advskew 128 172.16.0.100 255.255.255.0
d511 1
a511 1
    advskew 128 192.0.2.100 255.255.255.0
d636 2
a637 2
Originally [OpenBSD: carp.html,v 1.10 ]<br>
$Translation: carp.html,v 1.14 2006/05/02 10:12:39 ajacoutot Exp $<br>
@


1.6
log
@sync with Steelix CVS
@
text
@d151 1
a151 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+3.8"
d153 1
a153 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d224 1
a224 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d251 1
a251 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+3.8"
d302 1
a302 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+3.8"
d305 1
a305 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+3.8"
d308 1
a308 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d341 1
a341 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&amp;sektion=4&amp;manpath=OpenBSD+3.8"
d365 1
a365 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d526 1
a526 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hostname.if&amp;sektion=5&amp;manpath=OpenBSD+3.8"
d529 1
a529 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=netstart&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d599 1
a599 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+3.8"
d602 1
a602 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+3.8"
d605 1
a605 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d608 1
a608 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hostname.if&amp;sektion=5&amp;manpath=OpenBSD+3.8"
d611 1
a611 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+3.8"
d614 1
a614 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifstated&amp;sektion=8&amp;manpath=OpenBSD+3.8"
d617 1
a617 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifstated.conf&amp;sektion=5&amp;manpath=OpenBSD+3.8" 
d636 2
a637 2
Originally [OpenBSD: carp.html,v 1.9 ]<br>
$Translation: carp.html,v 1.13 2006/03/09 14:46:29 ajacoutot Exp $<br>
@


1.5
log
@sync with Steelix CVS
@
text
@d34 1
a34 1
<a href="../../fr/index.html">
d188 2
a189 2
cherchant une interface physique qui est dans le même sous-réseau que
l'interface carp(4).
d637 1
a637 1
$Translation: carp.html,v 1.12 2005/11/11 05:43:56 saad Exp $<br>
@


1.4
log
@sync with Steelix CVS
@
text
@d62 1
a62 1
assurer la haute-disponibilité et la redondance</a>
d68 3
a70 1
depuis le noeud maître</a>
d572 20
d613 6
d636 2
a637 2
Originally [OpenBSD: carp.html,v 1.7 ]<br>
$Translation: carp.html,v 1.11 2005/11/02 19:38:08 aanriot Exp $<br>
@


1.3
log
@sync with Steelix CVS
@
text
@d149 1
a149 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+3.7"
d151 1
a151 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d222 1
a222 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d249 1
a249 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+3.7"
d300 1
a300 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+3.7"
d303 1
a303 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+3.7"
d306 1
a306 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tcpdump&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d339 1
a339 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&amp;sektion=4&amp;manpath=OpenBSD+3.7"
d363 1
a363 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d524 1
a524 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hostname.if&amp;sektion=5&amp;manpath=OpenBSD+3.7"
d527 1
a527 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=netstart&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d577 1
a577 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=carp&amp;sektion=4&amp;manpath=OpenBSD+3.7"
d580 1
a580 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4&amp;manpath=OpenBSD+3.7"
d583 1
a583 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8&amp;manpath=OpenBSD+3.7"
d586 1
a586 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hostname.if&amp;sektion=5&amp;manpath=OpenBSD+3.7"
d589 1
a589 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+3.7"
d608 2
a609 2
Originally [OpenBSD: carp.html,v 1.6 ]<br>
$Translation: carp.html,v 1.10 2005/09/25 08:21:16 aanriot Exp $<br>
@


1.2
log
@sync with Steelix CVS
@
text
@d476 1
a476 1
# ifconfig carp1 vhid 1 carpdev em0 password lanpasswd \
d481 1
a481 1
# ifconfig carp2 vhid 2 carpdev em2 password netpasswd \
d503 1
a503 1
# ifconfig carp1 vhid 1 carpdev em0 password lanpasswd \
d508 1
a508 1
# ifconfig carp2 vhid 2 carpdev em2 password netpasswd \
d538 1
a538 1
&nbsp;&nbsp;&nbsp;&nbsp;password lanpasswd
d608 2
a609 2
Originally [OpenBSD: carp.html,v 1.5 ]<br>
$Translation: carp.html,v 1.9 2005/05/23 07:49:54 aanriot Exp $<br>
@


1.1
log
@sync with Steelix CVS
@
text
@d89 1
a89 1
les membres du groupe. Au sein de ce groupe. un hôte est désigné comme
d110 1
a110 1
L'hôte maître du groupe envoie des annonces régulières sur le réseau
d114 1
a114 1
durant une periode de temps configurable, alors l'un d'eux devient le
d273 1
a273 1
<li>Configure <tt>carp1</tt> pour l'hôte virtuel #1,met en place un mot
d318 3
a320 3
Par défaut, pfsync(4) n'envoie ni ne reçoit les mises à jour de la table
d'état à travers le réseau. Cependant, les mises à jour peuvent être
toujours surveillées en utilisant tcpdump(8) ou d'autres outils
d517 1
a517 1
Voici quelques problèmes opérationnels communèment rencontrés avec
d550 1
a550 1
maître intentionellement.
d552 2
a553 1
besoins de maintenance ou de troubleshooting.
d559 1
a559 1
sur le maître. Ceci aura pour effet d'ammener le maître à annoncer des
d609 1
a609 1
$Translation: carp.html,v 1.7 2005/05/22 17:16:59 saad Exp $<br>
@

