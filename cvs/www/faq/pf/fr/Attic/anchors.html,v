head	1.32;
access;
symbols;
locks; strict;
comment	@# @;


1.32
date	2014.04.01.17.14.10;	author nick;	state dead;
branches;
next	1.31;

1.31
date	2013.11.01.18.04.05;	author ajacoutot;	state Exp;
branches;
next	1.30;

1.30
date	2013.05.07.12.47.22;	author ajacoutot;	state Exp;
branches;
next	1.29;

1.29
date	2012.11.02.07.24.05;	author ajacoutot;	state Exp;
branches;
next	1.28;

1.28
date	2012.05.19.22.52.00;	author ajacoutot;	state Exp;
branches;
next	1.27;

1.27
date	2012.05.13.16.30.18;	author ajacoutot;	state Exp;
branches;
next	1.26;

1.26
date	2011.11.05.12.45.49;	author ajacoutot;	state Exp;
branches;
next	1.25;

1.25
date	2011.05.07.08.22.01;	author ajacoutot;	state Exp;
branches;
next	1.24;

1.24
date	2010.11.09.08.15.20;	author ajacoutot;	state Exp;
branches;
next	1.23;

1.23
date	2010.05.24.18.32.44;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2009.10.20.20.44.42;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2009.05.01.13.16.23;	author tobias;	state Exp;
branches;
next	1.20;

1.20
date	2008.12.01.07.52.52;	author tobias;	state Exp;
branches;
next	1.19;

1.19
date	2008.08.25.14.21.24;	author tobias;	state Exp;
branches;
next	1.18;

1.18
date	2008.01.13.13.43.34;	author tobias;	state Exp;
branches;
next	1.17;

1.17
date	2007.05.10.12.43.45;	author saad;	state Exp;
branches;
next	1.16;

1.16
date	2007.02.14.19.01.55;	author jufi;	state Exp;
branches;
next	1.15;

1.15
date	2006.11.02.18.23.22;	author jufi;	state Exp;
branches;
next	1.14;

1.14
date	2006.05.02.17.09.33;	author jufi;	state Exp;
branches;
next	1.13;

1.13
date	2006.03.10.16.35.07;	author saad;	state Exp;
branches;
next	1.12;

1.12
date	2005.11.03.11.30.53;	author saad;	state Exp;
branches;
next	1.11;

1.11
date	2005.05.22.17.38.07;	author saad;	state Exp;
branches;
next	1.10;

1.10
date	2005.05.19.18.23.06;	author jufi;	state Exp;
branches;
next	1.9;

1.9
date	2005.05.04.17.52.25;	author jufi;	state Exp;
branches;
next	1.8;

1.8
date	2005.02.13.17.41.41;	author saad;	state Exp;
branches;
next	1.7;

1.7
date	2005.01.18.09.54.52;	author jufi;	state Exp;
branches;
next	1.6;

1.6
date	2004.12.29.10.38.26;	author saad;	state Exp;
branches;
next	1.5;

1.5
date	2004.11.03.21.01.25;	author saad;	state Exp;
branches;
next	1.4;

1.4
date	2004.11.01.02.56.29;	author saad;	state Exp;
branches;
next	1.3;

1.3
date	2004.10.11.16.17.48;	author jufi;	state Exp;
branches;
next	1.2;

1.2
date	2004.10.07.10.24.20;	author jufi;	state Exp;
branches;
next	1.1;

1.1
date	2004.05.31.21.12.02;	author saad;	state Exp;
branches;
next	;


desc
@@


1.32
log
@
Abandon translations, per deraadt@@ and ajacoutot@@.
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF : Ancres</title>
<link rev="made" href="mailto:www@@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq,pf">
<meta name="distribution"  content="global">
</head>

<!--
Copyright (c) 2003-2007 Joel Knight <enabled@@myrealbox.com>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<a href="../../../fr/index.html">
<img alt="[OpenBSD]" height="30" width="141" src="../../../images/smalltitle.gif" border="0">
</a>
<p>
[<a href="options.html">Précédent : Options de Fonctionnement</a>]
[<a href="index.html">Index</a>]
[<a href="queueing.html">Suivant : Gestion de La Bande Passante</a>]

<p>
<h1><font color="#e00000">PF : Ancres</font></h1>

<hr>

<h3>Table des Matières</h3>
<ul>
<li><a href="#intro">Introduction</a>
<li><a href="#anchors">Ancres</a>
<li><a href="#options">Options d'Ancrage</a>
<li><a href="#manip">Manipulation des Ancres</a>
</ul>

<hr>

<a name="intro"></a>
<h2>Introduction</h2>
En plus de la base de règles principale, PF peut aussi évaluer des bases
de règles secondaires. Vu que les bases de règles secondaires ("sub
rulesets" en anglais) peuvent être manipulées à la volée en utilisant
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.4">pfctl(8)</a>,
elles fournissent un bon moyen de modifier dynamiquement l'ensemble des
règles actives. 
Alors qu'une <a href="tables.html">table</a> est
utilisée pour contenir une liste dynamique d'adresses, une base de règle
secondaire est utilisée pour contenir un ensemble dynamique de règles. 
Une base de règle secondaire est attachée à la base principale en utilisant
des <tt>ancres</tt>.

Les ancres peuvent être imbriquées, ce qui permet aux sous-règles
d'êtres enchainées ensembles.
Les règles d'ancres seront évaluées par rapport à l'ancre depuis
laquelle elles sont chargées.
Par exemple, les règles d'ancres de la base de règles principales peuvent
créer des points d'ancrage avec la base de règles principale comme
parent, et les règles d'ancres chargées à partir de fichiers à l'aide de
la directive <tt>load anchor</tt> créeront des points d'ancrage
définissant cette ancre comme parent.

<a name="named"></a>
<a name="anchors"></a>
<h2>Ancres</h2>
Une ancre est une collection de règles, des tables et d'autres ancres 
auxquelles un nom a été affecté. Lorsque
PF lit une règle <tt>anchor</tt> dans le jeu de règles principal, il va
évaluer les règles contenues dans ce point d'ancre de la même manière
qu'il évalue des règles dans la base de règles principale.
Le traitement de la base de règles principale se poursuivra ensuite à
moins que le paquet en cours de traitement ne corresponde à une règle de
filtrage qui utilise le mot-clé <tt>quick</tt>, auquel cas la correspondance 
est déclarée comme finale et l'évaluation sera arrêtée aussi bien dans les 
bases de règles rattachées à l'ancre que dans la base de règles principale.

<p>
Par exemple :
<blockquote>
<tt>
ext_if = "fxp0"<br>
<br>
block on $ext_if<br>
pass &nbsp;out on $ext_if<br>
anchor goodguys
</tt>
</blockquote>

<p>
Cette base de règles implémente une politique dite restrictive (tout ce
qui n'est pas connu est interdit par défaut) sur l'interface
<tt>fxp0</tt> aussi bien pour le trafic entrant que le trafic sortant.
Le trafic sortant est ensuite autorisé et un état est gardé. Ensuite une
règle d'ancrage est créée avec le nom <tt>goodguys</tt>. 
Les ancres peuvent être peuplées avec des règles de trois façons différentes :
<ul>
<li>en utilisant une règle de chargement <tt>load</tt>
<li>en utilisant 
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.4">pfctl(8)</a>
<li>en spécifiant les règles directement dans le jeu de règles principal
</ul>

<p>
La règle de chargement <tt>load</tt> est utilisée pour ordonner à
<tt>pfctl</tt> de peupler l'ancre spécifiée à partir d'un fichier texte.
La règle <tt>load</tt> doit être placée après la règle <tt>anchor</tt>.
Par exemple :
<blockquote>
<tt>
anchor goodguys<br>
load anchor goodguys from "/etc/anchor-goodguys-ssh"
</tt>
</blockquote>

<p>
Pour ajouter des règles à une ancre à l'aide de <tt>pfctl</tt>, le type
de commandes suivant devra être employé :
<blockquote>
<tt>
# echo "pass in proto tcp from 192.0.2.3 to any port 22" \<br>
&nbsp;&nbsp;&nbsp;| pfctl -a goodguys -f -
</tt>
</blockquote>

<p>
Les règles peuvent aussi être sauvegardées et chargées à partir d'un
fichier texte :
<blockquote>
<tt>
# cat &gt;&gt; /etc/anchor-goodguys-www<br>
pass in proto tcp from 192.0.2.3 to any port 80<br>
pass in proto tcp from 192.0.2.4 to any port { 80 443 }<br>
<br>
# pfctl -a goodguys -f /etc/anchor-goodguys-www<br>
</tt>
</blockquote>

<p>
Pour charger les règles directement à partir du jeu de règles principal,
entourez les règles d'ancrage dans un bloc délimité par des accolades :

<blockquote>
<tt>
anchor "goodguys" { <br>
&nbsp;&nbsp;&nbsp;pass in proto tcp from 192.168.2.3 to port 22<br>
}
</tt>
</blockquote>

<p>
Les ancres spécifiées de cette façon peuvent contenir d'autres ancres.

<blockquote>
<tt>
allow = "{ 192.0.2.3 192.0.2.4 }" <br>
<br>
anchor "goodguys" { <br>
&nbsp;&nbsp;&nbsp;anchor { <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pass in proto tcp from 192.0.2.3 to
port 80 <br>
&nbsp;&nbsp;&nbsp;} <br>
&nbsp;&nbsp;&nbsp;pass in proto tcp from $allow to port 22<br>
}
</tt>
</blockquote>

Lorsque les règles d'ancrage sont directement spécifiées dans le jeu de
règles principal, le nom de l'ancre devient optionnel.
Veuillez noter que l'ancre imbriquée dans l'exemple précité n'a pas de
nom.
Veuillez notez aussi que la macro <tt>$allow</tt> est créée en dehors de
l'ancre (dans le jeu de règles principal) puis utilisée à l'intérieur de
cette dernière.

<p>
Des règles peuvent être chargées dans une
base de règles nommée en utilisant les mêmes syntaxes et options
utilisées par les règles définies dans la base de règles principale. 
Une exception est à signaler cependant dans le cas des
<a href="macros.html">macros</a>, sauf si vous utilisez des ancres
directement dans le jeu de règles principal. Les macros utilisées dans
une base de règles nommée doivent aussi être définies dans la base de
règles nommée qui les utilisent; les macros définies dans la base de
règles principale ne sont <i>pas</i> visibles par les bases de règles
nommées.

<p>
Étant donné que les ancres peuvent être imbriquées, il est possible de
demander l'évaluation de toutes les ancres filles :

<blockquote>
<tt>
anchor "spam/*"
</tt>
</blockquote>

<p>
Cette syntaxe cause l'évaluation de chaque règle attachée à l'ancre
<tt>spam</tt>.
Les ancres filles seront évaluées dans l'ordre alphabétique mais ne sont
pas parcourues récursivement.
Les ancres sont toujours relatives à l'ancre dans laquelle elles sont
définies.

<p>
Chaque ancre, ainsi que la base de règles principale, existe séparément
des autres jeux de règles. Les opérations effectuées sur une base de
règles, telles que la suppression des règles, n'a aucun effet sur les
autres bases. De plus, la suppression d'un point d'ancrage dans la base
de règles principale ne détruit pas l'ancre ni les ancres attachées à celles-
ci. Une ancre n'est détruite que lorsque toutes les ancres qu'elle contient
sont supprimées à l'aide de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.4">pfctl(8)</a>.

<a name="options"></a>
<h2>Options d'Ancrage</h2>
Optionnellement, les règles d'ancrage <tt>anchor</tt> peuvent spécifier
une interface, un protocole, un port source, un port destination, une
balise, etc... en utilisant la même syntaxe que celle employée dans les
autres règles. Lorsque de telles informations sont fournies, les
règles d'ancrage <tt>anchor</tt> sont uniquement évaluées lorsque le paquet en
cours de traitement correspond à la définition de la règle <tt>anchor</tt>. Par
exemple :
<blockquote>
<tt>
ext_if = "fxp0"<br> 
<br> 
block on $ext_if<br>
pass &nbsp;out on $ext_if<br>
anchor ssh in on $ext_if proto tcp to port 22<br>
</tt>
</blockquote>

<p>
Les règles de l'ancre <tt>ssh</tt> sont uniquement évaluées pour les
paquets TCP destinés au port 22 en entrée de <tt>fxp0</tt>. 
Ces règles sont alors ajoutées à l'ancre (<tt>anchor</tt>) de la façon suivante :
<blockquote>
<tt>
# echo "pass in from 192.0.2.10 to any" | pfctl -a ssh -f -
</tt>
</blockquote>

<p>
Ainsi, même si la règle de filtrage ne spécifie ni l'interface, ni le
protocole ni d'autres paramètres tels que le port, l'hôte 192.0.2.10
sera uniquement autorisé à faire des connexions SSH vu la définition de
la règle d'ancrage (<tt>anchor</tt>).

<p>
La même syntaxe peut être appliquée aux ancres spécifiées directement
dans le jeu de règles principal.

<blockquote>
<tt>
allow = "{ 192.0.2.3 192.0.2.4 }" <br>
<br>
anchor "goodguys" in proto tcp { <br>
&nbsp;&nbsp;&nbsp;anchor proto tcp to port 80 { <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pass from 192.0.2.3 <br>
&nbsp;&nbsp;&nbsp;} <br>
&nbsp;&nbsp;&nbsp;anchor proto tcp to port 22 { <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pass from $allow<br>
&nbsp;&nbsp;&nbsp;} <br>
}
</tt>
</blockquote>


<a name="manip"></a>
<h2>Manipulation des Ancres</h2>
La manipulation des ancres se fait à l'aide de <tt>pfctl</tt>. Cette
commande peut être utilisée pour ajouter ou supprimer des règles d'une
ancre sans nécessiter le rechargement de la base de règles principale.

<p>
Pour lister toutes les règles de l'ancre <tt>ssh</tt> :
<blockquote>
<tt>
# pfctl -a ssh -s rules
</tt>
</blockquote>

<p>
Pour supprimer toutes les règles de la même ancre :
<blockquote>
<tt>
# pfctl -a ssh -F rules
</tt>
</blockquote>

<p>
Pour une liste complète des commandes, veuillez consulter
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.4">pfctl(8)</a>.

<p>
[<a href="options.html">Précédent : Options de Fonctionnement</a>]
[<a href="index.html">Index</a>]
[<a href="queueing.html">Suivant : Gestion de La Bande Passante</a>]

<p>
<hr>
<a href="index.html"><img height="24" width="24"
src="../../../images/back.gif" border="0" alt="[back]"></a>
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: anchors.html,v 1.35 ]<br>
$Translation: anchors.html,v 1.36 2013/11/01 17:02:16 rustybsd Exp $<br>
-->
$OpenBSD: anchors.html,v 1.31 2013/11/01 18:04:05 ajacoutot Exp $
</small>

</body>
</html> 
@


1.31
log
@Sync with Steelix CVS
@
text
@d330 1
a330 1
$OpenBSD$
@


1.30
log
@Sync with Steelix CVS
@
text
@d62 1
a62 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.3">pfctl(8)</a>,
d117 1
a117 1
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.3">pfctl(8)</a>
d231 1
a231 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.3">pfctl(8)</a>.
d312 1
a312 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.3">pfctl(8)</a>.
d327 2
a328 2
Originally [OpenBSD: anchors.html,v 1.34 ]<br>
$Translation: anchors.html,v 1.35 2013/05/07 08:34:48 rustybsd Exp $<br>
@


1.29
log
@Sync with Steelix CVS
@
text
@d62 1
a62 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.2">pfctl(8)</a>,
d117 1
a117 1
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.2">pfctl(8)</a>
d231 1
a231 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.2">pfctl(8)</a>.
d312 1
a312 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.2">pfctl(8)</a>.
d327 2
a328 2
Originally [OpenBSD: anchors.html,v 1.33 ]<br>
$Translation: anchors.html,v 1.34 2012/11/01 19:46:20 rustybsd Exp $<br>
@


1.28
log
@Sync with Steelix CVS
@
text
@d62 1
a62 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.1">pfctl(8)</a>,
d117 1
a117 1
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.1">pfctl(8)</a>
d231 1
a231 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.1">pfctl(8)</a>.
d312 1
a312 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.1">pfctl(8)</a>.
d327 2
a328 2
Originally [OpenBSD: anchors.html,v 1.32 ]<br>
$Translation: anchors.html,v 1.33 2012/05/17 14:16:54 rustybsd Exp $<br>
@


1.27
log
@Sync with Steelix CVS
@
text
@d206 1
a206 1
Etant donné que les ancres peuvent être imbriquées, il est possible de
d328 1
a328 1
$Translation: anchors.html,v 1.32 2012/05/11 14:53:26 rustybsd Exp $<br>
@


1.26
log
@Sync with Steelix CVS
@
text
@d62 1
a62 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.0">pfctl(8)</a>,
d117 1
a117 1
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.0">pfctl(8)</a>
d231 1
a231 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.0">pfctl(8)</a>.
d312 1
a312 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.0">pfctl(8)</a>.
d327 2
a328 2
Originally [OpenBSD: anchors.html,v 1.31 ]<br>
$Translation: anchors.html,v 1.31 2011/11/05 09:01:31 benoit Exp $<br>
@


1.25
log
@Sync with Steelix CVS
@
text
@d62 1
a62 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.9">pfctl(8)</a>,
d117 1
a117 1
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.9">pfctl(8)</a>
d231 1
a231 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.9">pfctl(8)</a>.
d312 1
a312 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.9">pfctl(8)</a>.
d327 2
a328 2
Originally [OpenBSD: anchors.html,v 1.30 ]<br>
$Translation: anchors.html,v 1.30 2011/05/07 06:39:55 benoit Exp $<br>
@


1.24
log
@Sync with Steelix CVS
@
text
@d62 1
a62 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.8">pfctl(8)</a>,
d117 1
a117 1
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.8">pfctl(8)</a>
d231 1
a231 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.8">pfctl(8)</a>.
d312 1
a312 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.8">pfctl(8)</a>.
d327 2
a328 2
Originally [OpenBSD: anchors.html,v 1.29 ]<br>
$Translation: anchors.html,v 1.29 2010/11/06 14:28:08 benoit Exp $<br>
@


1.23
log
@Sync with Steelix CVS
@
text
@d62 1
a62 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.7">pfctl(8)</a>,
d117 1
a117 1
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.7">pfctl(8)</a>
d231 1
a231 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.7">pfctl(8)</a>.
d312 1
a312 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.7">pfctl(8)</a>.
d327 2
a328 2
Originally [OpenBSD: anchors.html,v 1.28 ]<br>
$Translation: anchors.html,v 1.28 2010/05/24 09:31:58 benoit Exp $<br>
@


1.22
log
@Sync with Steelix CVS
@
text
@d62 1
a62 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.6">pfctl(8)</a>,
d64 2
a65 1
règles actives. Alors qu'une <a href="tables.html">table</a> est
d67 3
a69 21
secondaire est utilisée pour contenir un ensemble dynamique de règles de
filtrage, <tt>nat</tt>, <tt>rdr</tt>, et <tt>binat</tt>.

<p>
Les bases de règles secondaires sont attachées à la base de règles
principale à l'aide d'ancres. Il existe quatre types de règles
<tt>anchor</tt> (ancre en anglais) :
<ul>
<li><tt>anchor <i>nom</i></tt> - évalue toutes les règles
    de <a href="filter.html">filtrage</a> de l'ancre
    <i><tt>nom</tt></i>
<li><tt>binat-anchor <i>nom</i></tt> - évalue toutes les règles de
    traduction <a href="nat.html#binat"><tt>binat</tt></a> de l'ancre
    <i><tt>nom</tt></i>
<li><tt>nat-anchor <i>nom</i></tt> - évalue toutes les règles de
    traduction <a href="nat.html"> <tt>nat</tt></a> de l'ancre
    <i><tt>nom</tt></i>
<li><tt>rdr-anchor <i>nom</i></tt> - évalue toutes les règles
    <a href="rdr.html"><tt>rdr</tt></a> de l'ancre
    <i><tt>nom</tt></i>
</ul>
d84 2
a85 2
Une ancre est une collection de règles de filtrage et/ou de traduction,
des tables et d'autres ancres auxquelles un nom a été affecté. Lorsque
d91 3
a93 4
filtrage qui utilise le mot-clé <tt>quick</tt> ou à une règle de
traduction dans l'ancre, auquel cas la correspondance est déclarée
comme finale et l'évaluation sera arrêtée aussi bien dans les bases de
règles rattachées à l'ancre que dans la base de règles principale.
d101 2
a102 2
block on $ext_if all<br>
pass &nbsp;out on $ext_if all keep state<br>
d112 2
a113 2
règle d'ancrage est créée avec le nom <tt>goodguys</tt>. Les ancres
peuvent être peuplées avec des règles de trois façons différentes :
d117 1
a117 1
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.6">pfctl(8)</a>
d194 1
a194 1
Des règles de filtrage et de traduction peuvent être chargées dans une
d196 2
a197 2
utilisées par les règles définies dans la base de règles principale. Une
exception est à signaler cependant dans le cas des
d231 1
a231 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.6">pfctl(8)</a>.
d238 1
a238 1
règles de filtrage. Lorsque de telles informations sont fournies, les
d244 5
a248 3
ext_if = "fxp0"<br> <br> block on $ext_if all<br>
pass &nbsp;out on $ext_if all keep state<br>
anchor ssh in on $ext_if proto tcp from any to any port 22<br>
d254 2
a255 2
paquets TCP destinés au port 22 en entrée de <tt>fxp0</tt>. Ces règles
sont alors ajoutées à l'ancre (<tt>anchor</tt>) de la façon suivante :
d303 1
a303 1
Pour supprimer toutes les règles de filtrage de la même ancre :
d312 1
a312 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.6">pfctl(8)</a>.
d327 2
a328 2
Originally [OpenBSD: anchors.html,v 1.27 ]<br>
$Translation: anchors.html,v 1.27 2009/10/19 15:29:20 benoit Exp $<br>
@


1.21
log
@Sync with Steelix CVS
@
text
@d38 1
a38 1
[<a href="scrub.html">Précédent : Scrub (Normalisation de Paquets)</a>]
d62 1
a62 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.5">pfctl(8)</a>,
d135 1
a135 2
    <a
    href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.5">pfctl(8)</a>
d249 1
a249 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.5">pfctl(8)</a>.
d328 1
a328 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.5">pfctl(8)</a>.
d331 1
a331 1
[<a href="scrub.html">Précédent : Scrub (Normalisation de Paquets)</a>]
d343 2
a344 2
Originally [OpenBSD: anchors.html,v 1.26 ]<br>
$Translation: anchors.html,v 1.26 2009/04/30 22:46:58 benoit Exp $<br>
@


1.20
log
@Sync with Steelix CVS
@
text
@d62 1
a62 2
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.4">pfctl(8)</a>, 
d136 1
a136 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.4">pfctl(8)</a>
d250 1
a250 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.4">pfctl(8)</a>.
d329 1
a329 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.4">pfctl(8)</a>.
d344 2
a345 2
Originally [OpenBSD: anchors.html,v 1.25 ]<br>
$Translation: anchors.html,v 1.25 2008/11/26 22:25:18 benoit Exp $<br>
@


1.19
log
@Sync with Steelix CVS
@
text
@d63 1
a63 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.3">pfctl(8)</a>, 
d136 2
a137 1
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.3">pfctl(8)</a>
d251 1
a251 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.3">pfctl(8)</a>.
d330 1
a330 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.3">pfctl(8)</a>.
d345 2
a346 2
Originally [OpenBSD: anchors.html,v 1.24 ]<br>
$Translation: anchors.html,v 1.24 2008/08/20 15:31:59 gapz Exp $<br>
@


1.18
log
@Sync with Steelix CVS
@
text
@d63 1
a63 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.2">pfctl(8)</a>, 
d136 1
a136 1
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.2">pfctl(8)</a>
d250 1
a250 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.2">pfctl(8)</a>.
d329 1
a329 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.2">pfctl(8)</a>.
d344 2
a345 2
Originally [OpenBSD: anchors.html,v 1.23 ]<br>
$Translation: anchors.html,v 1.23 2008/01/11 10:52:47 saad Exp $<br>
@


1.17
log
@Sync with Steelix CVS
@
text
@d63 1
a63 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.1">pfctl(8)</a>, 
d93 1
a93 1
Par exemple, les règles d'ancres de la base de régles principale peuvent
d136 1
a136 1
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.1">pfctl(8)</a>
d250 1
a250 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.1">pfctl(8)</a>.
d329 1
a329 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.1">pfctl(8)</a>.
d344 2
a345 2
Originally [OpenBSD: anchors.html,v 1.22 ]<br>
$Translation: anchors.html,v 1.21 2007/05/10 11:55:06 saad Exp $<br>
@


1.16
log
@sync with steelix translation CVS
@
text
@d14 1
a14 1
Copyright (c) 2003-2005 Joel Knight <enabled@@myrealbox.com>
d63 1
a63 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.0">pfctl(8)</a>, 
d132 1
a132 1
peuvent être peuplées avec des règles de deux façons différentes :
d136 2
a137 1
	<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.0">pfctl(8)</a>
d176 37
d216 7
a222 5
exception est à signaler cépendant dans le cas des
<a href="macros.html">macros</a>. Les macros utilisées dans une base de
règles nommée doivent aussi être définies dans la base de règles nommée
qui les utilisent; les macros définies dans la base de règles principale
ne sont <i>pas</i> visibles par les bases de règles nommées.
d250 1
a250 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.0">pfctl(8)</a>.
d285 20
d329 1
a329 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.0">pfctl(8)</a>.
d344 2
a345 2
Originally [OpenBSD: anchors.html,v 1.20 ]<br>
$Translation: anchors.html,v 1.20 2007/02/11 17:10:10 benoit Exp $<br>
@


1.15
log
@sync with steelix translation CVS
@
text
@d89 1
a89 1
Les ancres peuvent être encastrées, ce qui permet aux sous-règles
d103 1
a103 1
des tables, et d'autres ancres auxquelles un nom a été affecté. Lorsque
d176 1
a176 1
base de règles nommée en utilisant les mêmes syntaxe et options
d185 2
a186 2
Etant donné que les ancres peuvent être encastrées, il est possible de
demander l'évaluation de toutes les ancres fille :
d197 1
a197 1
Les ancres fille seront évaluées dans l'ordre alphabétique mais ne sont
d203 1
a203 1
Chaque ancre, ainsi que la base de règles principale, existe séparemment
d207 1
a207 1
de règles principale ne détruit pas l'ancre ni ancres attachées à celles-
d216 1
a216 1
balise ... en utilisant la même syntaxe que celle employée dans les
d241 1
a241 1
protocole ni d'autres paramètres tels que le port, le hôte 192.0.2.10
d285 1
a285 1
$Translation: anchors.html,v 1.19 2006/11/02 08:49:03 ajacoutot Exp $<br>
@


1.14
log
@sync with steelix translation CVS
@
text
@d63 1
a63 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.9">pfctl(8)</a>, 
d136 1
a136 1
	<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.9">pfctl(8)</a>
d210 1
a210 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.9">pfctl(8)</a>.
d269 1
a269 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.9">pfctl(8)</a>.
d284 2
a285 2
Originally [OpenBSD: anchors.html,v 1.19 ]<br>
$Translation: anchors.html,v 1.18 2006/05/02 10:12:39 ajacoutot Exp $<br>
@


1.13
log
@sync with Steelix CVS
@
text
@d63 1
a63 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.8">pfctl(8)</a>, 
d136 1
a136 1
	<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.8">pfctl(8)</a>
d210 1
a210 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.8">pfctl(8)</a>.
d269 1
a269 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.8">pfctl(8)</a>.
d284 2
a285 2
Originally [OpenBSD: anchors.html,v 1.18 ]<br>
$Translation: anchors.html,v 1.17 2006/03/09 14:46:29 ajacoutot Exp $<br>
@


1.12
log
@sync with Steelix CVS
@
text
@d34 1
a34 1
<a href="../../fr/index.html">
d146 1
a146 1
anchor goodguys
d218 3
a220 3
règles d'ancrage sont uniquement évaluées lorsque le paquet en cours de
traitement correspond à la définition de la règle d'ancrage. Par exemple
:
d232 1
a232 1
sont alors ajoutées à l'ancre de la façon suivante :
d243 1
a243 1
la règle d'ancrage.
d285 1
a285 1
$Translation: anchors.html,v 1.16 2005/11/02 19:38:08 aanriot Exp $<br>
@


1.11
log
@sync with Steelix CVS
@
text
@d63 1
a63 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.7">pfctl(8)</a>, 
d136 1
a136 1
	<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.7">pfctl(8)</a>
d210 1
a210 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.7">pfctl(8)</a>.
d269 1
a269 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.7">pfctl(8)</a>.
d284 2
a285 2
Originally [OpenBSD: anchors.html,v 1.17 ]<br>
$Translation: anchors.html,v 1.15 2005/05/21 17:56:05 aanriot Exp $<br>
@


1.10
log
@sync with steelxi translation CVS
@
text
@d38 1
a38 2
[<a href="scrub.html">Précédent : Scrub (Normalisation de
Paquets)</a>]
d62 2
a63 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.6">pfctl(8)</a>, 
d89 3
a91 3
Les ancres peuvent être encastrées, ce qui permet aux
sous-règles d'êtres enchainées ensembles.
Les règles d'ancres seronts évaluées relativement à l'ancre depuis
d93 5
a97 5
Par exemple, les règles d'ancres de la base de régles principale
peuvent créér des points d'ancrage avec la base de règles principale
comme parent, et les règles d'ancres chargées à partir de fichiers
à l'aide de la directive <tt>load anchor</tt> crééront des points
d'ancrage définissant cette ancre comme parent.
d103 4
a106 5
des tables, et d'autres ancres auxquelles un nom a été affecté.
Lorsque PF lit une règle <tt>anchor</tt> dans le jeu de règles
principal, il va évaluer les règles contenues dans ce point
d'ancre de la même manière qu'il évalue des règles dans la base
de règles principale.
d109 2
a110 2
filtrage qui utilise le mot- clé <tt>quick</tt> ou à une règle de
traduction dans l'ancre, dans ce cas la correspondance est déclarée
d136 1
a136 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.6">pfctl(8)</a>
d141 2
a142 3
<tt>pfctl</tt> de peupler l'ancre spécifiée à partir d'un fichier
texte. La règle <tt>load</tt> doit être placée après la règle
<tt>anchor</tt>.
d203 8
a210 8
Chaque ancre, ainsi que la base de règles principale,
existe séparemment des autres jeux de règles. Les opérations effectuées
sur une base de règles, telles que la suppression des règles, n'a aucun
effet sur les autres bases. De plus, la suppression d'un point d'ancrage
dans la base de règles principale ne détruit pas l'ancre ni ancres
attachées à celles-ci. Ancre n'est détruite que lorsque toutes les
ancres qu'elle contient sont supprimées à l'aide de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.6">pfctl(8)</a>.
d269 1
a269 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.6">pfctl(8)</a>.
d278 2
a279 1
<a href="index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[back]"></a> 
d284 2
a285 2
Originally [OpenBSD: anchors.html,v 1.16 ]<br>
$Translation: anchors.html,v 1.12 2005/04/25 20:44:26 aanriot Exp $<br>
@


1.9
log
@huge sync from the translators
@
text
@@


1.8
log
@sync with Steelix CVS
@
text
@d64 5
a68 6
elles fournissent une bonne façon pour modifier dynamiquement l'ensemble
des règles actives. Alors qu'une
<a href="tables.html">table</a> est utilisée pour contenir une liste
dynamique d'adresses, une base de règle secondaire est utilisée pour
contenir un ensemble dynamique de règles de filtrage, <tt>nat</tt>,
<tt>rdr</tt>, et <tt>binat</tt>.
d188 1
a188 1
demander l'évaluation de toutes les ancres enfants :
d199 1
a199 1
Les ancres enfants seront évaluées dans l'ordre alphabétique mais ne sont
d286 1
a286 1
$Translation: anchors.html,v 1.11 2005/02/13 16:52:28 svincent Exp $<br>
@


1.7
log
@Sync with Steelix CVS
@
text
@d4 1
a4 2
<title>PF : Ancres et Bases de Règles
            Nommées (Sub)</title>
d14 1
a14 1
Copyright (c) 2003, 2004 Joel Knight <enabled@@myrealbox.com>
d44 1
a44 2
<h1><font color="#e00000">PF : Ancres et Bases de Règles
    Nommées (Sub)</font></h1>
d51 1
a51 1
<li><a href="#named">Bases de Règles Nommées</a>
d90 9
a98 7
Les règles <tt>anchor</tt> seront évaluées relativement à l'ancre dans
laquelle elles sont chargées. Par exemple, les règles <tt>anchor</tt>
dans la base de règles principale crééront des points d'ancrage
définissant la base de règles principale comme parent, et les règles
<tt>anchor</tt> chargées à partir de fichiers à l'aide de la directive
<tt>load anchor</tt> crééront des points d'ancrage définissant cette
ancre comme parent.
d101 1
d107 1
a107 1
<tt>anchor</tt> de la même manière qu'il évalue des règles dans la base
d142 5
a146 3
Une règle de chargement <tt>load</tt> est utilisée pour ordonner à
<tt>pfctl</tt> de peupler l'ancre spécifiée et la base de règles nommées
à partir d'un fichier texte. Par exemple :
d149 2
a150 1
load anchor goodguys:ssh from "/etc/anchor-goodguys-ssh"
a154 6
Lorsque la base de règles principale est chargée, les règles figurant
dans le le fichier <tt>/etc/anchor-goodguys- ssh</tt> seront chargées
dans la base de règles nommée <tt>ssh</tt> attachée à l'ancre
<tt>goodguys</tt>.

<p>
d160 1
a160 1
&nbsp;&nbsp;&nbsp;| pfctl -a goodguys/ssh -f -
a164 6
Ceci ajoute une règle <tt>pass</tt> à l'ancre <tt>ssh</tt> attachée à
l'ancre <tt>goodguys</tt>. PF évaluera ensuite cette règle (ainsi que
les autres règles de filtrage ajoutées par la suite) lorsqu'il atteint
la ligne <tt>anchor goodguys</tt> dans la base de règles principale.

<p>
d173 1
a173 1
# pfctl -a goodguys:www -f /etc/anchor-goodguys-www<br>
a177 5
Ceci charge les règles à partir du fichier <tt>/etc/anchor-goodguys-
www</tt> dans la base de règles nommée <tt>www</tt> attachée à l'ancre
<tt>goodguys</tt>.

<p>
d188 20
a207 2
Chaque base de règles nommée, ainsi que la base de règles principale,
existe séparemment des autres bases de règles. Les opérations effectuées
d210 3
a212 4
dans la base de règles principale ne détruit pas l'ancre ni les bases de
règles nommées attachées à cet ancre. Une base de règles nommée n'est
détruire que lorsque toutes les règles qu'elle contient sont supprimées
à l'aide de
a213 2
Une fois un point d'ancrage se retrouve sans aucune base de règles
nommée attachée, il est aussi détruit.
d238 1
a238 1
# echo "pass in from 192.0.2.10 to any" | pfctl -a ssh/allowed -f -
d255 1
a255 2
Pour lister toutes les règles de l'ancre <tt>allowed</tt>, attachée à
l'ancre <tt>ssh</tt> :
d258 1
a258 1
# pfctl -a ssh/allowed -s rules
d266 1
a266 1
# pfctl -a ssh/allowed -F rules
d286 2
a287 2
Originally [OpenBSD: anchors.html,v 1.15 ]<br>
$Translation: anchors.html,v 1.10 2005/01/17 21:34:48 aanriot Exp $<br>
@


1.6
log
@sync with Steelix CVS
@
text
@d284 1
d286 2
a287 1
$Translation: anchors.html,v 1.9 2004/12/29 10:33:01 saad Exp $<br>
@


1.5
log
@sync with Steelix CVS
@
text
@d35 3
a37 1
<img alt="[OpenBSD]" height=30 width=141 src="../../../images/smalltitle.gif">
d284 2
a285 2
Originally [OpenBSD: anchors.html,v 1.14 ]<br>
$Translation: anchors.html,v 1.7 2004/11/03 20:38:27 saad Exp $<br>
@


1.4
log
@sync with Steelix CVS
@
text
@d53 1
a53 2
<li><a href="#manip">Manipulation des Bases de Règles
    Nommées</a>
d90 7
a96 2
Seule la base de règles principale peut contenir des règles
<tt>anchor</tt>.
d99 13
a111 12
<h2>Bases de Règles Nommées</h2>
Une base de règles nommée est un groupe de règles de filtrage et/ou de
traduction à laquelle un nom a été attribué. Lorsque PF lit une règle
<tt>anchor</tt> dans la base de règles principale, il évaluera toutes
les bases de règles attachées à ce point d'ancrage dans l'ordre
alphabétique de leur nommage. Le traitement de la base de règles
principale se poursuivra ensuite à moins que le paquet en cours de
traitement ne corresponde à une règle de filtrage qui utilise le mot-
clé <tt>quick</tt> ou à une règle de traduction dans l'ancre, dans ce
cas la correspondance est déclarée comme finale et l'évaluation sera
arrêtée aussi bien dans les bases de règles rattachées à l'ancre que
dans la base de règles principale.
d160 1
a160 1
&nbsp;&nbsp;&nbsp;| pfctl -a goodguys:ssh -f -
d165 4
a168 5
Ceci ajoute une règle <tt>pass</tt> à la base de règles nommée
<tt>ssh</tt> attachée à l'ancre <tt>goodguys</tt>. PF évaluera ensuite
cette règle (ainsi que les autres règles de filtrage ajoutées par la
suite) lorsqu'il atteint la ligne <tt>anchor goodguys</tt> dans la base
de règles principale.
d234 1
a234 1
# echo "pass in from 192.0.2.10 to any" | pfctl -a ssh:allowed -f -
d245 4
a248 5
<h2>Manipulation des Bases de Règles Nommées</h2>
La manipulation des bases de règles nommées se fait à l'aide de
<tt>pfctl</tt>. Cette commande peut être utilisée pour ajouter ou
supprimer des règles d'une base de règles sans nécessiter le
rechargement de la base de règles principale.
d251 2
a252 2
Pour lister toutes les règles de la base de règles <tt>allowed</tt>,
attachée à l'ancre <tt>ssh</tt> :
d255 1
a255 1
# pfctl -a ssh:allowed -s rules
d260 1
a260 1
Pour supprimer toutes les règles de filtrage de la même base de règles :
d263 1
a263 1
# pfctl -a ssh:allowed -F rules
a267 4
Si la base de règles est omise, l'action s'applique à toutes les règles
de l'ancre.

<p>
d282 2
a283 2
Originally [OpenBSD: anchors.html,v 1.13 ]<br>
$Translation: anchors.html,v 1.6 2004/10/31 23:43:38 saad Exp $<br>
@


1.3
log
@Sync with Steelix CVS
@
text
@d64 1
a64 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.5">pfctl(8)</a>, 
d130 1
a130 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.5">pfctl(8)</a>
d203 1
a203 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.5">pfctl(8)</a>.
d270 1
a270 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.5">pfctl(8)</a>.
d283 2
a284 2
Originally [OpenBSD: anchors.html,v 1.12 ]<br>
$Translation: anchors.html,v 1.5 2004/10/11 12:29:39 saad Exp $<br>
@


1.2
log
@Sync with Steelix CVS
@
text
@d4 2
a5 2
<title>PF : Ancres et Bases de R&egrave;gles
            Nomm&eacute;es (Sub)</title>
d37 1
a37 1
[<a href="scrub.html">Pr&eacute;c&eacute;dent : Scrub (Normalisation de
d40 1
a40 1
[<a href="../queueing.html">Suivant : Gestion de La Bande Passante</a>]
d43 2
a44 2
<h1><font color="#e00000">PF : Ancres et Bases de R&egrave;gles
    Nomm&eacute;es (Sub)</font></h1>
d48 1
a48 1
<h3>Table des Mati&egrave;res</h3>
d51 1
a51 1
<li><a href="#named">Bases de R&egrave;gles Nomm&eacute;es</a>
d53 2
a54 2
<li><a href="#manip">Manipulation des Bases de R&egrave;gles
    Nomm&eacute;es</a>
d61 3
a63 4
En plus de la base de r&egrave;gles principale, PF peut aussi
&eacute;valuer des bases de r&egrave;gles secondaires. Vu que les bases
de r&egrave;gles secondaires ("sub rulesets" en anglais) peuvent
&ecirc;tre manipul&eacute;es &agrave; la vol&eacute;e en utilisant
d65 6
a70 6
elles fournissent une bonne fa&ccedil;on pour modifier dynamiquement
l'ensemble des r&egrave;gles actives. Alors qu'une
<a href="tables.html">table</a> est utilis&eacute;e pour contenir une
liste dynamique d'adresses, une base de r&egrave;gle secondaire est
utilis&eacute;e pour contenir un ensemble dynamique de r&egrave;gles de
filtrage, <tt>nat</tt>, <tt>rdr</tt>, et <tt>binat</tt>.
d73 3
a75 3
Les bases de r&egrave;gles secondaires sont attach&eacute;es &agrave; la
base de r&egrave;gles principale &agrave; l'aide d'ancres. Il existe
quatre types de r&egrave;gles <tt>anchor</tt> (ancre en anglais) :
d77 1
a77 1
<li><tt>anchor <i>nom</i></tt> - &eacute;value toutes les r&egrave;gles
d80 2
a81 3
<li><tt>binat-anchor <i>nom</i></tt> - &eacute;value toutes les
    r&egrave;gles de traduction
    <a href="nat.html#binat"><tt>binat</tt></a> de l'ancre
d83 5
a87 5
<li><tt>nat-anchor <i>nom</i></tt> - &eacute;value toutes les
    r&egrave;gles de traduction <a href="nat.html"> <tt>nat</tt></a> de
    l'ancre <i><tt>nom</tt></i>
<li><tt>rdr-anchor <i>nom</i></tt> - &eacute;value toutes les
    r&egrave;gles <a href="rdr.html"><tt>rdr</tt></a> de l'ancre
d91 2
a92 2
Seule la base de r&egrave;gles principale peut contenir des
r&egrave;gles <tt>anchor</tt>.
d95 12
a106 15
<h2>Bases de R&egrave;gles Nomm&eacute;es</h2>
Une base de r&egrave;gles nomm&eacute;e est un groupe de r&egrave;gles
de filtrage et/ou de traduction &agrave; laquelle un nom a
&eacute;t&eacute; attribu&eacute;. Lorsque PF lit une r&egrave;gle
<tt>anchor</tt> dans la base de r&egrave;gles principale, il
&eacute;valuera toutes les bases de r&egrave;gles attach&eacute;es
&agrave; ce point d'ancrage dans l'ordre alphab&eacute;tique de leur
nommage. Le traitement de la base de r&egrave;gles principale se
poursuivra ensuite &agrave; moins que le paquet en cours de traitement
ne corresponde &agrave; une r&egrave;gle de filtrage qui utilise le mot-
cl&eacute; <tt>quick</tt> ou &agrave; une r&egrave;gle de traduction
dans l'ancre, dans ce cas la correspondance est d&eacute;clar&eacute;e
comme finale et l'&eacute;valuation sera arr&ecirc;t&eacute;e aussi bien
dans les bases de r&egrave;gles rattach&eacute;es &agrave; l'ancre que
dans la base de r&egrave;gles principale.
d121 6
a126 8
Cette base de r&egrave;gles impl&eacute;mente une politique dite
restrictive (tout ce qui n'est pas connu est interdit par d&eacute;faut)
sur l'interface <tt>fxp0</tt> aussi bien pour le trafic entrant que le
trafic sortant. Le trafic sortant est ensuite autoris&eacute; et un
&eacute;tat est gard&eacute;. Ensuite une r&egrave;gle d'ancrage est
cr&eacute;&eacute;e avec le nom <tt>goodguys</tt>. Les ancres peuvent
&ecirc;tre peupl&eacute;es avec des r&egrave;gles de deux fa&ccedil;ons
diff&eacute;rentes :
d128 1
a128 1
<li>en utilisant une r&egrave;gle de chargement <tt>load</tt>
d134 3
a136 4
Une r&egrave;gle de chargement <tt>load</tt> est utilis&eacute;e pour
ordonner &agrave; <tt>pfctl</tt> de peupler l'ancre
sp&eacute;cifi&eacute;e et la base de r&egrave;gles nomm&eacute;es
&agrave; partir d'un fichier texte. Par exemple :
d144 3
a146 4
Lorsque la base de r&egrave;gles principale est charg&eacute;e, les
r&egrave;gles figurant dans le le fichier <tt>/etc/anchor-goodguys-
ssh</tt> seront charg&eacute;es dans la base de r&egrave;gles
nomm&eacute;e <tt>ssh</tt> attach&eacute;e &agrave; l'ancre
d150 2
a151 3
Pour ajouter des r&egrave;gles &agrave; une ancre &agrave; l'aide de
<tt>pfctl</tt>, le type de commandes suivant devra &ecirc;tre
employ&eacute; :
d160 3
a162 4
Ceci ajoute une r&egrave;gle <tt>pass</tt> &agrave; la base de
r&egrave;gles nomm&eacute;e <tt>ssh</tt> attach&eacute;e &agrave;
l'ancre <tt>goodguys</tt>. PF &eacute;valuera ensuite cette r&egrave;gle
(ainsi que les autres r&egrave;gles de filtrage ajout&eacute;es par la
d164 1
a164 1
de r&egrave;gles principale.
d167 2
a168 2
Les r&egrave;gles peuvent aussi &ecirc;tre sauvegard&eacute;es et
charg&eacute;es &agrave; partir d'un fichier texte :
d180 2
a181 3
Ceci charge les r&egrave;gles &agrave; partir du fichier
<tt>/etc/anchor-goodguys-www</tt> dans la base de r&egrave;gles
nomm&eacute;e <tt>www</tt> attach&eacute;e &agrave; l'ancre
d185 13
a197 17
Des r&egrave;gles de filtrage et de traduction peuvent &ecirc;tre
charg&eacute;es dans une base de r&egrave;gles nomm&eacute;e en
utilisant les m&ecirc;mes syntaxe et options utilis&eacute;es par les
r&egrave;gles d&eacute;finies dans la base de r&egrave;gles principale.
Une exception est &agrave; signaler c&eacute;pendant dans le cas des
<a href="macros.html">macros</a>. Les macros utilis&eacute;es dans une
base de r&egrave;gles nomm&eacute;e doivent aussi &ecirc;tre
d&eacute;finies dans la base de r&egrave;gles nomm&eacute;e qui les
utilisent; les macros d&eacute;finies dans la base de r&egrave;gles
principale ne sont <i>pas</i> visibles par les bases de r&egrave;gles
nomm&eacute;es.

<p>
Chaque base de r&egrave;gles nomm&eacute;e, ainsi que la base de
r&egrave;gles principale, existe s&eacute;paremment des autres bases de
r&egrave;gles. Les op&eacute;rations effectu&eacute;es sur une base de
r&egrave;gles, telles que la suppression des r&egrave;gles, n'a aucun
d199 4
a202 5
dans la base de r&egrave;gles principale ne d&eacute;truit pas l'ancre
ni les bases de r&egrave;gles nomm&eacute;es attach&eacute;es &agrave;
cet ancre. Une base de r&egrave;gles nomm&eacute;e n'est d&eacute;truire
que lorsque toutes les r&egrave;gles qu'elle contient sont
supprim&eacute;es &agrave; l'aide de
d204 2
a205 3
Une fois un point d'ancrage se retrouve sans aucune base de
r&egrave;gles nomm&eacute;e attach&eacute;e, il est aussi
d&eacute;truit.
d209 19
a227 16
Optionnellement, les r&egrave;gles d'ancrage <tt>anchor</tt> peuvent
sp&eacute;cifier une interface, un protocole, un port source, un port
destination, une balise ... en utilisant la m&ecirc;me syntaxe que celle
employ&eacute;e dans les r&egrave;gles de filtrage. Lorsque de telles
informations sont fournies, les r&egrave;gles d'ancrage sont uniquement
&eacute;valu&eacute;es lorsque le paquet en cours de traitement
correspond &agrave; la d&eacute;finition de la r&egrave;gle d'ancrage.
Par exemple : <blockquote> <tt> ext_if = "fxp0"<br> <br> block on
$ext_if all<br> pass &nbsp;out on $ext_if all keep state<br> anchor ssh
in on $ext_if proto tcp from any to any port 22<br> </tt> </blockquote>

<p>
Les r&egrave;gles de l'ancre <tt>ssh</tt> sont uniquement
&eacute;valu&eacute;es pour les paquets TCP destin&eacute;s au port 22
en entr&eacute;e de <tt>fxp0</tt>. Ces r&egrave;gles sont alors
ajout&eacute;es &agrave; l'ancre de la fa&ccedil;on suivante :
d235 4
a238 5
Ainsi, m&ecirc;me si la r&egrave;gle de filtrage ne sp&eacute;cifie ni
l'interface, ni le protocole ni d'autres param&egrave;tres tels que le
port, le h&ocirc;te 192.0.2.10 sera uniquement autoris&eacute; &agrave;
faire des connexions SSH vu la d&eacute;finition de la r&egrave;gle
d'ancrage.
d241 5
a245 6
<h2>Manipulation des Bases de R&egrave;gles Nomm&eacute;es</h2>
La manipulation des bases de r&egrave;gles nomm&eacute;es se fait
&agrave; l'aide de <tt>pfctl</tt>. Cette commande peut &ecirc;tre
utilis&eacute;e pour ajouter ou supprimer des r&egrave;gles d'une base
de r&egrave;gles sans n&eacute;cessiter le rechargement de la base de
r&egrave;gles principale.
d248 2
a249 2
Pour lister toutes les r&egrave;gles de la base de r&egrave;gles
<tt>allowed</tt>, attach&eacute;e &agrave; l'ancre <tt>ssh</tt> :
d257 1
a257 2
Pour supprimer toutes les r&egrave;gles de filtrage de la m&ecirc;me
base de r&egrave;gles :
d265 2
a266 2
Si la base de r&egrave;gles est omise, l'action s'applique &agrave;
toutes les r&egrave;gles de l'ancre.
d269 1
a269 1
Pour une liste compl&egrave;te des commandes, veuillez consulter
d273 1
a273 1
[<a href="scrub.html">Pr&eacute;c&eacute;dent : Scrub (Normalisation de Paquets)</a>]
d275 1
a275 1
[<a href="../queueing.html">Suivant : Gestion de La Bande Passante</a>]
d284 1
a284 1
$Translation: anchors.html,v 1.2 2004/10/06 17:17:44 saad Exp $<br>
@


1.1
log
@sync with Steelix CVS
@
text
@d79 1
a79 1
    de <a href="../filter.html">filtrage</a> de l'ancre
d302 1
a302 1
$Translation: anchors.html,v 1.1 2004/05/28 18:44:13 saad Exp $<br>
@

