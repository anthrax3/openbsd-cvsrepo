head	1.19;
access;
symbols;
locks; strict;
comment	@# @;


1.19
date	2006.09.30.08.55.04;	author jufi;	state dead;
branches;
next	1.18;

1.18
date	2004.01.16.20.30.20;	author jufi;	state Exp;
branches;
next	1.17;

1.17
date	2003.12.03.21.30.16;	author horacio;	state Exp;
branches;
next	1.16;

1.16
date	2003.11.03.14.19.31;	author horacio;	state Exp;
branches;
next	1.15;

1.15
date	2003.11.01.06.57.51;	author horacio;	state Exp;
branches;
next	1.14;

1.14
date	2003.10.30.18.00.22;	author horacio;	state Exp;
branches;
next	1.13;

1.13
date	2002.09.23.18.05.59;	author jufi;	state Exp;
branches;
next	1.12;

1.12
date	2002.09.09.11.54.47;	author jufi;	state Exp;
branches;
next	1.11;

1.11
date	2002.08.27.12.20.06;	author jufi;	state Exp;
branches;
next	1.10;

1.10
date	2002.06.29.08.41.16;	author jufi;	state Exp;
branches;
next	1.9;

1.9
date	2002.05.24.07.10.54;	author jufi;	state Exp;
branches;
next	1.8;

1.8
date	2002.04.05.06.15.31;	author jufi;	state Exp;
branches;
next	1.7;

1.7
date	2002.03.05.07.26.16;	author jufi;	state Exp;
branches;
next	1.6;

1.6
date	2002.02.14.01.03.42;	author jufi;	state Exp;
branches;
next	1.5;

1.5
date	2001.10.16.18.05.29;	author jufi;	state Exp;
branches;
next	1.4;

1.4
date	2001.08.29.17.58.44;	author jufi;	state Exp;
branches;
next	1.3;

1.3
date	2001.07.14.14.00.38;	author jufi;	state Exp;
branches;
next	1.2;

1.2
date	2001.05.31.19.02.35;	author jufi;	state Exp;
branches;
next	1.1;

1.1
date	2001.05.11.06.28.56;	author jufi;	state Exp;
branches;
next	;


desc
@@


1.19
log
@not maintained anymore, time to go.
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>5 - Vytvoøení systému ze zdrojových kódù</title>
<link rev= "made" href= "mailto:www@@openbsd.org">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2004 by OpenBSD.">
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-2">
</head>

<body bgcolor= "#ffffff" text= "#000000" link= "#23238E">
<!-- Passes validator.w3.org.  Please keep it this way -->

<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif">
<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
<a href= "faq4.html">[Do sekce 4 - Prùvodce instalací]</a>
<a href= "faq6.html">[Do sekce 6 - Nastavení sítì]</a>
</font>

<h1><font color="#e00000">5 - Vytvoøení systému ze zdrojových kódù</font></h1>
<hr>

<p>
<h3>Obsah</h3>
<ul>
<li><a href= "#Flavors">5.1 - Pøíchutì OpenBSD</a>
<li><a href= "#Why">5.2 - Proè potøebuji vlastní jádro?</a>
<li><a href= "#Options">5.3 - Soubory pro konfiguraci jádra</a>
<li><a href= "#Building">5.4 - Tvorba vlastního jádra</a>
<li><a href= "#BootConfig">5.5 - Konfigurace pøi startu</a>
<li><a href= "#VerboseBoot">5.6 - Jak získat podrobnìj¹í výpis
  bìhem bootování</a>
<li><a href= "#config">5.7 - Pou¾ití pøíkazu config(8) pro zmìnu
zkompilovaného jádra</a>
<li><a href="#buildprobs">5.8 - Bì¾né problémy pøi kompilaci a vytváøení
systému</a>
	<ul>
	<li><a href="#sig11">5.8.1 - Build se zastaví s chybou "Signal 11"</a>
	<li><a href="#snake">5.8.2 - "make build" skonèí s hlá¹kou
 "cannot open output file snake: is a directory"</a>
	</ul>
</ul>
<hr>
<br>


<a name="Flavors"></a>
<h2>5.1 - Druhy OpenBSD</h2>
<!-- XXXversion - revise doodle -->

Existují tøi "pøíchutì" OpenBSD:
<blockquote>
<li><b>-release:</b> Verze OpenBSD dodávaná ka¾dých ¹est mìsícù na CD.
<li><b>-stable:</b>  Release, plus opravy pova¾ované za kritické
    pro bezpeènost a spolehlivost.
<li><b>-current:</b> Momentální verze OpenBSD, z které se stane
    dal¹í release.
</blockquote>

Graficky se vývoj tìchto pøíchutí dá znázornit takto:

<blockquote>
<pre>
       ,------o-----------o----X                    3.1 Stable
       |      .           .
       |      .    ,------o---------o----X          3.2 Stable
       |      .    |      .         .
       |      .    |      .    ,----o----------o--&gt; 3.3 Stable
       |      .    |      .    |    .          .
       |      .    |      .    |    .    ,-----o--&gt; 3.4 Stable
       |      .    |      .    |    .    |     .
       |      .    |      .    |    .    |     .
 --&gt;3.1Rel-----&gt;3.2Rel-----&gt;3.3Rel-----&gt;3.4Rel----&gt; Current

          Èas ---&gt;
</pre>
</blockquote>

<p>
Ka¾dých ¹est mìsícù se kód vìtví do <i>-current</i>, <i>-release</i> a
<i>-stable</i> -- <i>-release</i> se stane zmrazený bod
(&quot;Tag&quot;) v historii stromu zdrojových souborù - nikdy se
nemìní a je to to co je na CD discích a <a href="../ftp.html">FTP
serverech</a>.  <i>-Current</i> je místo, kde probíhá aktivní vývoj
a stane se z nìj dal¹í <i>-release</i> OpenBSD.

<p>
<i>-stable</i> (také známý jako "Patch branch") je zalo¾en na 
<i>-release</i>, a jak ka¾dý mù¾e vidìt, je to "vìtev" z hlavní
vývojové cesty OpenBSD. Dùle¾ité opravy provedené do
<i>-current</i>, jsou "back portovány" do vìtví <i>i-stable</i>.
Na obrázku uvedeném vý¹e odpovídají svislé teèkované èáry opravám chyb,
které jsou pøidávány do vìtvì <i>-stable</i>.
Rovnì¾ si mù¾ete vý¹e v¹imnout, ¾e vìtev <i>3.1-stable</i> byla
ukonèena po vydání <i>3.3-release</i>, a <i>3.2-stable</i> vìtev
<i>3.2-stable</i> byla ukonèena po vydání <i>3.4-release</i> -- star¹í
verze jsou typicky podporovány 2 verze zpìtnì.
Podpora star¹ích verzí zabírá prostøedky a èas, zatímco bychom mohli
poskytovat podporu pro star¹í releasy, chtìli bychom se radìji
zamìøit na vylep¹ování a nové vlastnosti. Vìtev <i>-stable</i> je ze své 
podstaty velmi snadno buildovatelná z <i>-release</i> 
té samé verze (napø. pøechod z <i>3.4-release</i> k <i>3.4-stable</i>).

<p>
Vìtev <i>-stable</i> je typicky shodná s <i>-release</i>, navíc obsahuje
opravy, uvedené na
<a href="../errata.html">stránce errata</a>, a nìkteré jednoduché
opravy, které se nevyskytují v errata.
Obvykle nejsou <i>-stable</i> a <i>release</i> na které je stable
zalo¾en mìnìny, pokud zmìna vy¾aduje úpravu <a
href="http://www.openbsd.org/cgi-bin/man.cgi">manuálové
stránky</a>. Jinými slovy, podpora nových zaøízení NEbude do <i>-stable</i>
nikdy pøidána a podpora pro nové vlastnosti bude pøidána pouze vyjímeènì,
pokud je to velmi dùle¾ité.

<p>
Varování: <i>-current</i> se neustále mìní. Zmìny následují doslova
minutu po minutì a èaso se mù¾e stát, ¾e v dobì, kdy zrovna aktualizujete
zdrojové kódy, dojde k takové zmìnì.
Jak bylo zmínìno døíve, neexistuje ¾ádný slib,
¾e systém se podaøí zkompilovat nebo ¾e bude pracovat (samozøejmì,
doufáme ¾e ano). Je úplnì mo¾né a ne tak výjimeèné, ¾e si stáhnete
zdrojové soubory <i>-current</i> a nepodaøí se vám je zkompilovat,
zatímco o pìt minut pozdìji to mù¾e bì¾et docela dobøe.
Pokud nejste pøipraveni si s tím poradit, dr¾te se od
<i>-current</i> dále.

<p>
Vìt¹ina u¾ivatelù bì¾í buï <i>-stable</i> nebo <i>-release</i>.
Mnoho lidí bì¾í <i>-current</i> na produkèních systémech, a je
dùle¾ité, ¾e nìkteøí lidé tak èiní proto, aby identifikovali chyby
a otestovali nové fíèury. Nicménì, pokud nevíte jak správnì
popsat, diagnostikovat a poradit si s problémem, neøíkejte sobì
(nebo komukoliv jinému), ¾e "pomáháte projektu" tím, ¾e bì¾íte
<i>-current</i>. "Tohle nepracuje!" není <a
href="../report.html#bugtypes">u¾iteèné hlá¹ení o chybì</a>.
"Nedávné zmìny v driveru pciide po¹kodily kompatibilitu s mým IDE
rozhraním zalo¾eném na Slugchip, dmesg funkèního a nefunkèního
systému následují..." mù¾e být u¾iteèné chybové hlá¹ení.

<p>
Stává se, ¾e "normální" u¾ivatelé chtìjí ¾ít na hranì a bì¾í
<i>-current</i>, nejèastìji tehdy, kdy¾ mají zaøízení, které není
podporované v <i>-release</i> (a tím pádem i ve <i>-stable</i>),
nebo chtìjí pou¾ít novou fíèuru v <i>-current</i>. V tomto
pøípadì je volba buï pou¾ívat <i>-current</i> nebo nepou¾ívat ono
zaøízení a <i>-current</i> mù¾e být men¹í zlo. Nicménì, èlovìk
nemù¾e oèekávat pomocnou ruku od developerù.

<h3>Snapshots</h3>
Mezi jednotlivými verzemi OpenBSD jsou na
<a href="../ftp.html">FTP serverech</a> k dispozici tzv. <i>snapshoty</i>.
Jak jméno napovídá, jedná se o build zdrojových kódù, který byl k dispozici
v dobì výroby snapshotu pro tu kterou platformu. Pamatujte si, ¾e 
u urèitých platforem trvá øádovì DNY, ne¾ je build snapshotu dokonèen
a dodán k distribuci. Nikdo nemù¾e slíbit, ¾e snapshot bude kompletnì fungovat,
nebo jej pùjde nainstalovat. Èasto je motivací k vytvoøení snapshotu
provedení dùle¾ité zmìny, kterou je tøeba otestovat. Pro nìkteré platformy
se snapshoty vytváøejí dennì, u jiných ménì frekventovanìji.
Pokud chcete provozovat <i>-current</i>, poslední snapshot je vìt¹inou
to, co potøebujete a upgrade za pou¾ití snapshotu je obvykle dobrý
odrazový mùstek pøedtím ne¾ se pokusíte vybuildovat <i>-current</i>.

<p>
Èas od èasu se nìkdo ptá, zda existuje zpùsob, jak získat kopii pøesnì
toho kódu, ze kterého byl snapshot vytvoøen. Odpovìd zní ne. Jednak
je diskutabilní, na co by to bylo dobré, jednak jsou snapshoty vytváøeny
podle libovùle, podle èasových mo¾ností a podle dostupných zdrojù.
Na rychlých platformách mù¾ete vytvoøit nìkolik snapshotù dennì. Na pomalých
platformách mù¾ete èekat týden, ne¾ se snapshot vytvoøí. Poskytování
tagù nebo znaèek pro ka¾dý snapshot ve zdrojovém kódu by bylo nepraktické.

<h3>Udr¾ování vìcí v souladu</h3>
Je dùle¾ité porozumìt ¾e OpenBSD je Operaèní Systém, my¹lený jako
celek, nejenom kernel s nìkolika utilitami. Musíte zajistit, aby
kernel, "userland" (podpùrné utility a soubory) a strom <a
href="../ports.html"><tt>portù</tt></a> byly, co se týèe jejich
verzí, v souladu. Jinak
se mohou pøihodit nepøíjemné vìci. Jinak øeèeno (proto¾e lidé
prostì poøád dìlají tuto chybu), nemù¾ete bì¾et úplnì nový strom
<tt>portù</tt> na mìsíc starém systému nebo vytváøet kernel ze
zdrojových souborù <i>-current</i> a oèekávát, ¾e bude fungovat
s userlandem z <i>-release</i>. Ano, mù¾ete namítat, ¾e to znamená,
¾e pokud byl nový program
pøidán dnes do <tt>portù</tt>, který chcete pou¾ívat, bude k tomu
nutný update. Litujeme, ale znovu opakujeme: na¹e zdroje jsou omezené.

<p>
Dále je nutné porozumìt tomu, ¾e pøi
<a href="upgrade-minifaq.html">upgrade zdrojových souborù</a>
je aktualizaèní proces podporován <b>pouze v jednom smìru: ze starého na
nový</b>, a z <i>-stable</i> na <i>-current</i>. Nemù¾ete provozovat
<i>3.4-current</i> èi snapshot a poté se rozhodnout, ¾e je to pøíli¹
nebezpeèné a vrátíte se zpìt k <i>3.4-stable</i>. 
Pokud si vyberete jinou cestu ne¾ podporovanou, pak jste v tom sami.

<p>
Ano, toto znamená ¾e pøedtím ne¾ zaènete pou¾ívat <i>-current</i>
mìli byste se dlouze a dùkladnì zamyslet.


<p>
<a name="Why"></a>
<h2>5.2 - Proè bych mìl vytvoøit své vlastní jádro?</h2>

<p>
Nìkolik dùvodù, pøesto¾e vlastní jádro vìt¹inou sestavují pøedev¹ím zku¹ení
u¾ivatelé, kteøí dobøe rozumí celému systému.

<blockquote>
    <li>vá¹ poèítaè má obecnì velmi málo pamìti RAM a vy byste jí rádi co nejvíce
u¹etøili, co¾ provedete vyøazením tìch ovladaèù zaøízení z jádra, které nepou¾íváte, napø. GENERIC jádro i386 architektury má pøibli¾nì velikost 3,1 MB , prùmìrná velikost u¾ivatelského jádra bez nepou¾ívaných ovladaèù je cca 1,7MB.
    <li>Odstraníte nìkteré pùvodní volby, se kterými bylo jádro kompilováno a 
mù¾ete naopak pøidat jiné, které nebyly pùvodnì v konfiguraci zahrnuty
    <li>Mù¾ete pøidat nìkteré volby experimentálního, zku¹ebního významu, které
jsou k dispozici pro testování nového kódu jádra

</blockquote>

<p>
Ve vìt¹inì pøípadù NEbudete potøebovat kompilovat vlastní jádro.
GENERIC jádro bude obvykle tím, které potøebujete. Vlastnì je tu i
nìkolik dùvodù, ze kterých byste nemìli chtít kompilovat va¹e
vlastní jádro. Hlavní dùvod je ten, ¾e je
snadné udìlat nìjaké zmìny v nastavení jádra, které se zdají být
logické, ale nefungují. To je nebezpeèí, které vá¹ zásah provází.
Jestli¾e nìco v novém jádøe nefunguje tak jak by mìlo, vyzkou¹ejte
prosím nejprve GENERIC jádro, døíve ne¾ ode¹lete zprávu o chybì
(bug report). Vývojáøi budou obvykle ignorovat takové hlá¹ení o
chybì, které se zabývají vlastními jádry dokud nebude problém
reprodukován také v GENERIC kernelu. Byli jste varováni.

<p>
<a name= "Options"></a>
<h2>5.3 - Soubory pro konfiguraci jádra</h2>

<p>
Generování OpenBSD jádra je øízeno z nìkolika konfiguraèních souborù,
je¾ jsou umístìny standardnì v adresáøi
<tt>/usr/src/sys/arch/<i>&lt;arch&gt;</i>/conf/</tt>.
V¹echny architektury mají soubor <tt>GENERIC</tt>, který se pou¾ívá
pro vygenerování standardního OpenBSD jádra pro danou platformu (GENERIC jádro).
Dále zde mohou být dal¹í konfiguraèní soubory, které se pou¾ívají pro vytvoøení
jádra s urèitým zamìøením, napø. pro minimální RAM, bezdiskové stanice apod.

<p>
Konfiguraèní soubor je zpracován programem
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a>,
který vytváøí konfiguraci a kompilaèní adresáø v <tt>../compile</tt>.
V typické instalaci OpenBSD je kompilaèní adresáø umístìn v
<tt>/usr/src/sys/arch/&lt;<i>arch</i>&gt;/compile/</tt>.
Program config(8) rovnì¾ vytváøí
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=make&amp;sektion=1">Makefile</a>
a dal¹í soubory, které jsou potøeba pro úspì¹nou kompilaci jádra.

<p>
Volby (options) pøi konfiguraci jádra jsou nastavení, kterými konfigurujete
slo¾ení va¹eho jádra. Tyto nastavení pøidávají pøi
kompilaci do jádra èásti kódu, který realizuje po¾adované operace.
Takto mù¾ete specifikovat pøesnì to co od svého jádra oèekáváte, zahrnout podporu pøesnì pro ta zaøízení, které potøebujete a která pou¾íváte, a naopak vyjmout z jádra ty ovladaèe, které jsou pro vás nepotøebné. Je zde spousta voleb, které
mù¾ete pøi konfiguraci zapnout nebo vypnout. Zde se zamìøíme jen na nìkteré
z nich, pøedev¹ím na ty, které se pou¾ívají nejèastìji. Pro kompletní seznam
tìchto voleb si pøeètìte manuálovou stránku pøíkazu <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&apropos=0&sektion=4&format=html">options(4)</a> a proto¾e se seznam tìchto voleb èas od èasu mìní, ujistìtì se, ¾e
máte manuálovou stránku pro stejnou verzi OpenBSD, jako tu, kterou kompilujete.
Mù¾ete se rovnì¾ podívat na pøíklady konfiguraèních souborù, které jsou
dostupné pro va¹i architekturu.

<p>
<b>Nepøidávejte, neodebírejte ani nemìnte volby v konfiguraèním souboru jádra,
pokud pro to nemáte dùvod!</b> Jediná konfigurace jádra, která je podporována
OpenBSD týmem je jádro GENERIC, s kombinací voleb nacházející se v
<tt>/usr/src/sys/arch/&lt;<i>arch</i>&gt;/conf/GENERIC</tt> a
<tt>/usr/src/sys/conf/GENERIC</tt> <i>tak jak jsou dodávány OpenBSD týmem</i>
(tj. NE editovány). Reportování problémù s u¾ivatelským jádrem témìø
v¾dy vyústí v to, ¾e budete vyzvání, aby jste reprodukovali problém
s jádrem GENERIC. Ne v¹echny volby jsou kompatibilní jedna s druhou a mnoho
voleb je po¾adováno k tomu, aby systém vùbec mohl fungovat.
Není ¾ádná garance toho, ¾e tím, ¾e se vám podaøí jádro zkompilovat,
tak bude také bez problémù bì¾et.

<p>
Následuje seznam umístìní konfiguraèních souborù jádra pro jednotlivé
architektury:
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/alpha/conf/">Konfiguraèní soubory pro architekturu Alpha</a>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/i386/conf/">Konfiguraèní soubory pro i386</a>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/macppc/conf/">Konfiguraèní soubory pro macppc</a>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/sparc/conf/">Kon
figuraèní soubory pro architekturu sparc</a>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/sparc64/conf/">Kon
figuraèní soubory pro architekturu sparc64</a>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/vax/conf/">Konfiuraèní soubory pro vax</a>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/hppa/conf/">Konfiguraèní soubory pro hppa</a>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/">Ostatní architektury</a>
</blockquote>

<p>
Pøi bli¾¹ím ohledání tìchto souborù zjistíte, ¾e obsahují øádku
typu:
<pre>
	include "../../../conf/GENERIC"
</pre>
To znamená, ¾e se v nich odkazuje je¹tì na dal¹í konfiguraèní soubor.
V tomto souboru se nacházejí na architektuøe nezávislé volby. Pøi
vytváøení va¹eho vlastního jádra se tedy urèitì podívejte na 
<a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/conf/GENERIC">/sys/conf/GENERIC</a>.

<p>
Konfiguraèní volby jádra by mìly být napsány v konfiguraèním souboru jádra
ve formátu :
<blockquote>
<tt>option&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt><i>jméno</i>
</blockquote>
Kupøíkladu pro pøidáné volby "DEBUG" do jádra, pøidejte øádek:
<pre>
     option      DEBUG
</pre>
Volby v OpenBSD jádøe jsou pøekládány na volby preprocesoru pøi
kompilaci, proto volba jako DEBUG zpùsobí kompilaci zdrojového
kódu s volbou -DDEBUG. Co¾ je ekvivalentní tomu, ¾e bychom ve
v¹ech zdrojových souborech pøipsali <tt>#define DEBUG</tt>.

<p>
Èas od èasu je potøeba vypnout nìjakou volbu, která je u¾ definovaná, typicky
v souboru "<tt>src/sys/conf/GENERIC</tt>". I kdy¾ byste mohli modifikovat
kopii tohoto souboru, lep¹í volba je pou¾ít statement <i>rmoption</i>.
Kupøíkladu pokud skuteènì nechcete zakompilovat interní debugger jádra
(<i>co¾ vám nedoporuèujeme!</i>), pou¾ili v konfiguraèním souboru øádek typu:
<pre>
     rmoption DDB
</pre>
<tt>option DDB</tt> je definováno v <tt>src/sys/conf/GENERIC</tt>, ale
vý¹e uvedený øádek <tt>rmoption</tt> ji deaktivuje.

<p>
Je¹tì jednou bychom vás chtìli poprosit, aby se podívali 
do manuálové stránky
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&amp;sektion=4">options(4)</a>,
kde naleznete dostatek informací o jednotlivých volbách jádra. Takté¾
poznamenejme, ¾e mnoho z tìchto voleb má svoji vlastní manuálovou stránku
-- v¾dycky si pøeètìte v¹echno, co je o dané volbì k dispozici, ne¾ 
pøikroèíte k jejímu pøidání nebo odstranìní z jádra.

<p> 
<a name="Building"></a>
<h2>5.4 -  Tvorba va¹eho vlastního jádra</h2>

<p>
Úplné instrukce pro vytvoøení vlastního jádra jsou v manuálové stránce 
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=afterboot&amp;sektion=8">
afterboot(8)</a>.

<p>
Pro kompilaci jádra, které bylo na CD-ROM potøebujete nejprve mít k ruce
zdrojový kód. Zdrojový kód jádra se nachází jak na
<a href="../orders.html">officiálním CD</a> (disk 3), tak na 
<a href="../ftp.html">FTP serverech</a>.
Následující pøíklad pøedpokládá, ¾e CD3 je pøipojeno na /mnt:

<blockquote>
<pre>
# <strong>cd /usr/src</strong>
# <strong>tar xvzf /mnt/src.tar.gz</strong>
</pre>
</blockquote>

<b>Poznámka:</b> Pokud stahujete z FTP serverù, budete potøebovat DVA soubory,
<i>src.tar.gz</i> a <i>sys.tar.gz</i>. První jsou zdrojové kódy
"userlandu" -- v¹e kromì jádra, druhý jsou zdrojové kódy jádra. Stáhnìte
a rozbalte oba dva jako vý¹e, proto¾e povìt¹inou budete potøebovat
oba dva. Na CD-ROM jsou oba dva soubory kombinovány do jednoho.

<p>
Pøi tvorbì vlastního jádra je nejjednodu¹¹í zaèít s GENERIC
jádrem. To se nachází v
<i>/usr/src/sys/arch/${arch}/conf/GENERIC</i>, kde $ARCH je
va¹e architektura. V tomto adresáøi se rovnì¾ nachází dal¹í pøíklady
konfigurací. V následujícím vám uká¾eme dva pøíklady pro kompilaci
jádra. První kompiluje jádro v adesáøovém stromu, který je pouze
pro ètení. Druhý v zapisovatelném adresáøi. 

<blockquote> 
<pre>
# <strong>cd /somewhere</strong>
# <strong>cp /usr/src/sys/arch/$ARCH/conf/SOMEFILE .</strong>
# <strong>vi SOMEFILE</strong> <i>(udìláte zmìny, které chcete)</i>
# <strong>config -s /usr/src/sys -b . SOMEFILE</strong>
</pre>
následované buï:

<pre>
    # <strong>make depend</strong>
         <b><i>- NEBO -</i></b>
    # <strong>make clean</strong>
# <strong>make</strong>
</pre>
</blockquote>

Musíte spustit '<tt>make depend</tt>' kdy¾ provádíte nìjaké zmìny
(vèetnì updatù a patchù) ve va¹em stromu zdrojových souborù
(jinými slovy skoro v¾dy, dokud nepotøebujete spustit '<tt>make
clean</tt>').

<p>
Pokud jste provedli zmìny do voleb konfigurace jádra, a/nebo  jste
udìlali velké zmìny ve va¹em stromì zdrojových souborù, mìli byste
pou¾ít '<tt>make clean</tt>' namísto vý¹e zmínìného '<tt>made
depend</tt>'. V¾dy je bezpeèné provést 'make clean', aèkoliv to
mù¾e mít za následek del¹í èas kompilace, proto¾e toho bude více
buildováno. 

<p>
Pro kompilaci jádra uvnitø zapisovatelného adresáøového stromu,
vykonejte následující:

<blockquote>
<tt>
# <strong>cd /sys/arch/$ARCH/conf</strong>
# <strong>vi SOMEFILE</strong> (udìláte zmìny, které chcete)
# <strong>config SOMEFILE</strong> (o tomhle si pøeètìte více zde:
 <a href= # "http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a>)</i><br>
# <strong>cd ../compile/SOMEFILE</strong>
# <strong>make</strong>
</tt>
</blockquote>

<p>
Kde $ARCH je architektura, kterou pou¾íváte, napø. i386. Mù¾ete rovnì¾ spustit <strong>make depend</strong> pro zji¹tìní závislostí, a¾ budete kompilovat jádro
pøí¹tì.

<p>
Umístìní jádra na své místo:

<blockquote>
<pre>
# <strong>cp /bsd /bsd.old</strong>
# <strong>cp /sys/arch/$ARCH/compile/SOMEFILE/bsd /bsd</strong>
</pre>
</blockquote>

Pro pøechod k va¹emu starému jádru v èase startu systému napi¹te pouze:

<blockquote>
<pre>
boot&gt; <strong>bsd.old</strong>
</pre>
</blockquote>

a va¹e staré jádro bude nahráno namísto /bsd.

<p>
Nìkdy budete potøebovat spolu s novým jádrem instalovat i nový
boot blok. Více viz. <a href="faq14.html#InstBoot">
faq14.8 o OpenBSD Bootloaderu</a>. Zde naleznete základní pøehled
o jeho pou¾ívání.

<p>
<a name= "BootConfig"></a>
<h2>5.5 - Konfigurace pøi bootu</h2>

<p>
Nìkdy pøi startu systému se stane, ¾e va¹e jádro nalezne zaøízení,
ale mo¾ná se ¹patným IRQ. A mo¾ná právì toto zaøízení budete muset
ihned pou¾ít. Ani¾ byste museli vytváøet nové jádro, mù¾ete zkusit
konfiguraci  OpenBSD jádra v okam¾iku bootování. Tato konfigurace
opraví vá¹ problém pouze v jednom startu systému. Po rebootování
budete muset tuto proceduru opakovat. Tento postup je tudí¾ my¹len
jen jako doèasná záplata, a problém byste mìli opravit opravou a
rekompilací jádra. Va¹e jádro musí být zkompilované s volbou
<strong>option BOOT_CONFIG</strong>, co¾ pro GENERIC jádra platí.

<p>
Vìt¹ina této dokumentace se nachází v manuálové stránce
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot_config&amp;sektion=8">boot_config(8)</a>.

<p>
Pro start s u¾ivatelskou konfigurací jádra, ( User Kernel Config, UKC) ,
pou¾ijte pøi bootování volbu -c.

<blockquote><pre>
boot&gt; <strong>boot hd0a:/bsd -c</strong>
</pre></ul>

Nebo jakékoliv jiné jádro, které chcete nabootovat. Poté co provedete pøedchozí
krok, obdr¾íte UKC prompt. Odtud mù¾ete vykonávat pøíkazy pøímo specifikující
zaøízení jádra, která chcete zmìnit, vypnout nebo zapnout.

<p>
Zde je seznam pøíkazù v UKC.
<ul>
<li><tt>add <strong>device</strong></tt> - pøidání zaøízení pomocí okopírování jiného
<li><tt>change <strong>devno | device </strong></tt> - zmìna jednoho nebo více zaøízení
<li><tt>disable <strong>devno | device </strong></tt> - vypnutí jednoho nebo více zaøízení
<li><tt>enable <strong>devno | device </strong></tt> - zapnutí jednoho nebo více zaøízení
<li><tt>find <strong>devno | device </strong></tt> - nalezení jednoho nebo více zaøízení
<li><tt>help</tt> - krátký pøehled tìchto pøíkazù
<li><tt>list</tt> - seznam V©ECH známých zaøízení
<li><tt>exit/quit</tt> - pokraèuj v bootování
<li><tt>show <strong>[attr [val]]</strong></tt> - vypí¹e zaøízení s danou vlastností attr a volitelnì s danou hodnotou val
</ul>

<p>
Jakmile jste jednou nakonfigurovali va¹e  zaøízení, pou¾ijte quit nebo exit
a continue pro pokraèování bootování. Poté byste mìli opravit
nastavení jádra a zkompilovat nové jádro. Dal¹í info viz. <a
href="faq5.html#Building"> Tvorba va¹eho vlastního jádra.
</p>

<p>
<a name= "VerboseBoot"></a>
<h2>5.6 - Jak získat podrobnìj¹í výpis bìhem bootování</h2>
</p>

<p>
Podrobnìj¹í výpis pøi bootování mù¾e být velmi u¾iteèný, pokud se
sna¾íte ladit problémy. Pokud napøíklad systém nedetekuje floppy
disk a potøebujete více informací, prostì rebootujete. Poté co
obdr¾íte &quot;boot>&quot; prompt, bootujte s -c. Dostanete 
UKC&gt;, pak vykonejte:
</p>


<blockquote><pre>
UKC&gt; <strong>verbose</strong>
autoconf verbose enable
UKC&gt; <strong>quit</strong>
</pre></ul>

<p>
Následovat budou extrémnì podrobné startovací hlá¹ky.

<p>
<a name="config"></a>
<h2>5.7 - Pou¾ití pøíkazu config(8) pro zmìnu zkompilovaného jádra</h2>

<p>
Volby <b>-e</b> a <b>-u</b> pøíkazu 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a>
mohou být velmi u¾iteèné a ¹etøí èas strávený kompilací jádra.
Volba <b>-e</b> umo¾òuje, abyste vstoupili do UKC neboli User
Kernel Configu v bì¾ícím systému. Zmìny, které provedete, se pak
objeví pøi dal¹ím bootu. Volba <b>-u</b> testuje , zda byly
provedeny pøi bootování v jádøe nìjaké zmìny. Za pøedpokladu,
¾e jste pou¾ili <b>boot -c</b> pro vstup do UKC pøi bootování
systému.
</p>

<p>
Následující pøíklad nám ukazuje vyøazení ep* zaøízení z jádra. Pro
¹etrnost va¹eho poèínání musíte pou¾ít volbu <b>-o</b>, která
zapisuje provedené zmìny do souboru, který uvedete. Napø.
<strong>config -e -o bsd.new /bsd</strong> zapí¹e zmìny do bsd.new
. Pøíklad nepou¾ívá volbu <b>-o</b> , proto zmìny jsou ignorovány
a nejsou zapsány zpìt do binárky jádra. Pro více informací o tom,
jak obdr¾et chybové a varovné hlá¹ky, ètìte manuálovou stránku 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a>.

<blockquote><pre>
$ <strong>sudo config -e /bsd</strong>
OpenBSD 3.4 (GENERIC) #18: Wed Sep 17 03:34:47 MST 2003
    deraadt@@i386.openbsd.org:/usr/src/sys/arch/i386/compile/GENERIC
warning: no output file specified
Enter 'help' for information
+ukc&gt; ?
        help                            Command help list
        add         dev                 Add a device
        base        8|10|16             Base on large numbers
        change      devno|dev           Change device
        disable     attr val|devno|dev  Disable device
        enable      attr val|devno|dev  Enable device
        find        devno|dev           Find device
        list                            List configuration
        lines       count               # of lines per page
        show        [attr [val]]        Show attribute
        exit                            Exit, without saving changes
        quit                            Quit, saving current changes
        timezone    [mins [dst]]        Show/change timezone
        nmbclust    [number]            Show/change NMBCLUSTERS
        cachepct    [number]            Show/change BUFCACHEPERCENT
        nkmempg     [number]            Show/change NKMEMPAGES
        shmseg      [number]            Show/change SHMSEG
        shmmaxpgs   [number]            Show/change SHMMAXPGS
ukc&gt; <strong>list</strong>
  0 audio* at sb0|sb*|gus0|pas0|sp0|ess*|wss0|wss*|ym*|eap*|eso*|sv*|neo*|cmpci*
|clcs*|clct*|auich*|autri*|auvia*|fms*|uaudio*|maestro*|esa*|yds*|emu* flags 0x0
  1 midi* at sb0|sb*|opl*|opl*|opl*|opl*|ym*|mpu*|autri* flags 0x0
  2 nsphy* at aue*|xe*|ef*|gx*|stge*|bge*|nge*|sk*|ste*|sis*|sf*|wb*|tx*|tl*|vr*
|ne0|ne1|ne2|ne*|ne*|ne*|dc*|dc*|rl*|fxp*|fxp*|xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep*|e
p*|ep* phy -1 flags 0x0
  3 nsphyter* at aue*|xe*|ef*|gx*|stge*|bge*|nge*|sk*|ste*|sis*|sf*|wb*|tx*|tl*|
vr*|ne0|ne1|ne2|ne*|ne*|ne*|dc*|dc*|rl*|fxp*|fxp*|xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep
*|ep*|ep* phy -1 flags 0x0
  4 qsphy* at aue*|xe*|ef*|gx*|stge*|bge*|nge*|sk*|ste*|sis*|sf*|wb*|tx*|tl*|vr*
|ne0|ne1|ne2|ne*|ne*|ne*|dc*|dc*|rl*|fxp*|fxp*|xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep*|e
p*|ep* phy -1 flags 0x0
  5 inphy* at aue*|xe*|ef*|gx*|stge*|bge*|nge*|sk*|ste*|sis*|sf*|wb*|tx*|tl*|vr*
|ne0|ne1|ne2|ne*|ne*|ne*|dc*|dc*|rl*|fxp*|fxp*|xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep*|e
p*|ep* phy -1 flags 0x0
  6 iophy* at aue*|xe*|ef*|gx*|stge*|bge*|nge*|sk*|ste*|sis*|sf*|wb*|tx*|tl*|vr*
|ne0|ne1|ne2|ne*|ne*|ne*|dc*|dc*|rl*|fxp*|fxp*|xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep*|e
p*|ep* phy -1 flags 0x0
  7 eephy* at aue*|xe*|ef*|gx*|stge*|bge*|nge*|sk*|ste*|sis*|sf*|wb*|tx*|tl*|vr*
|ne0|ne1|ne2|ne*|ne*|ne*|dc*|dc*|rl*|fxp*|fxp*|xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep*|e
p*|ep* phy -1 flags 0x0
  8 exphy* at aue*|xe*|ef*|gx*|stge*|bge*|nge*|sk*|ste*|sis*|sf*|wb*|tx*|tl*|vr*
|ne0|ne1|ne2|ne*|ne*|ne*|dc*|dc*|rl*|fxp*|fxp*|xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep*|e
p*|ep* phy -1 flags 0x0
[...snip...]
ukc&gt; <strong>disable ep</strong>
 67 ep0 disabled
 68 ep* disabled
 69 ep* disabled
155 ep0 disabled
156 ep0 disabled
157 ep* disabled
158 ep* disabled
210 ep* disabled
ukc&gt; <strong>quit</strong>
not forced
</pre></blockquote>

<p>
V pøedcházejícím pøíkladì byla v¹echna zaøízení ep* v jádøe
vypnuta a nebudou zkou¹ena pøi startu. V nìkterých situacích, kdy
pou¾ijete pøi bootu UKC, pomocí <b>boot -c</b>, budete chtít zmìny
ulo¾it trvale. Provést to mù¾ete pomocí volby <b>-u</b> . V
následujícím pøíkladì, poèítaè nabootoval do UKC a zaøízení wi(4)
bylo odstranìno. Proto¾e zmìny pøi boot -c  NEJSOU trvalé, musí
být zapsány.
Tento pøíklad zapisuje zmìny provedené z boot -c do nového jádra
ulo¾eného v bsd.new.

<blockquote><pre>
$ <strong>sudo config -e -u -o bsd.new /bsd</strong>
OpenBSD 3.4 (GENERIC) #18: Wed Sep 17 03:34:47 MST 2003
    deraadt@@i386.openbsd.org:/usr/src/sys/arch/i386/compile/GENERIC
Processing history...
105 wi* disabled
106 wi* disabled
Enter 'help' for information
ukc&gt; <strong>quit</strong>
</pre></blockquote>

<p>
<a name="buildprobs"></a>
<h2>5.8 - Spoleèné problémy pøi kompilaci a buildování</h2>

<a name="sig11"></a>
<h3>5.8.1 - Build se zastavil s chybou "Signal 11"</h3>

<p>
Buildování OpenBSD a dal¹ích programù ze zdrojových kódù je úloha, která
klade vy¹¹í nároky na hardware ne¾ vìt¹ina ostatních, intezivnì pou¾ívá
procesor, disky a pamì». Výsledkem je, ¾e pokud máte problémový hardware,
s vysokou pravdìpodobností se tyto problémy objeví v prùbìhu buildování.
Chyby typu Signal 11 jsou <i>typicky</i> zpùsobeny problémy s hardware,
èasto se také jedná o problémy s pamìtí, ale mù¾e to být také problém
CPU, základní desky nebo tøeba pøehøátí. Mù¾ete mít systém, který je
v podstatì velmi stabilní, ale na kterém nejste schopni zkompilovat programy,
(tomuhle moc nevìøím, pozn. pøekladatele).

<p>
Zøejmì zjistíte, ¾e je nejjednodu¹¹í opravit nebo nahradit komponenty,
které zpùsobují chyby, proto¾e problémy se do budoucna budou s nejvy¹¹í
pravdìpodobností prohlubovat. Pokud máte hardware, který chcete skuteènì
pou¾ít a máte s ním problémy, jednodu¹e nainstalujte snapshot nebo release
(nebo tøeba zkuste NetBSD).

<p>
Více informací najdete napø. v 
<a href="http://www.bitwizard.nl/sig11/">Sig11 FAQ</a>.

<a name="snake"></a>
<h3>5.8.2 - "make build" skonèí s hlá¹kou "cannot open output file snake: is
a directory"</h3>

Jedná se o výsledek dvou rùzných chyb:
<ul>
<li><b>Nesprávnì jste provedly update èi sta¾ení va¹eho CVS stromu.</b>
V prùbìhu operace CVS checkout musíte pou¾ít volbu "<tt>-P</tt>",
pokud provádíte update zdrojových kódù s CVS, musíte pou¾ít
volby "<tt>-Pd</tt>" programu
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1"
>cvs(1)</a>, jak je zdokumentováno v <a href="../../cs/anoncvs.html">prùvodci
anoncvs</a>, <a href="upgrade-minifaq.html">upgrade-minifaq</a> a
<a href="faq8.html#CVS">FAQ</a>. Tyto volby vám zajistí, ¾e jsou pøidány
nové adresáøe a odstranìny prázdné adresáøe, které u¾ nejsou ve stromu
zapotøebí.

<li><b>Nesprávnì jste vytvoøili adresáø <tt>obj</tt> pøed zapoèetím buildu.</b>
Buildování stromu bez adresáøe <tt>/usr/obj</tt> není podporováno.

</ul>
Je dùle¾ité peèlivì následovat instrukce, kdy¾
<a href="../../cs/anoncvs.html">stahujete a aktualizujete</a> va¹e
zdrojové kódy a <a href="upgrade-minifaq.html">buildujete</a> vá¹ strom.

<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
<a href= "faq4.html">[Do sekce 4 - Prùvodce instalací]</a>
<a href= "faq6.html">[Do sekce 6 - Nastavení sítì]</a>
</font>

<p>
<hr>
+<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt= "[zpìt]"></a>
<a href= "mailto:www@@openbsd.org">www@@openbsd.org</a>
<small>
<br>
Originally [OpenBSD: faq5.html,v 1.90 ]
<br>
$Translation: faq5.html,v 1.18 2004/01/11 21:41:15 certik Exp $
<br>
$OpenBSD: faq5.html,v 1.18 2004/01/16 20:30:20 jufi Exp $
</small>
</body>
</html>
@


1.18
log
@Sync with Steelix CVS
@
text
@d719 1
a719 1
$OpenBSD: faq5.html,v 1.11 2002/08/27 12:20:06 jufi Exp $
@


1.17
log
@Sync with Steelix CVS
@
text
@d10 1
a10 1
<meta name= "copyright"     content= "This document copyright 1998-2003 by OpenBSD.">
d715 1
a715 1
Originally [OpenBSD: faq5.html,v 1.89 ]
d717 1
a717 1
$Translation: faq5.html,v 1.17 2003/12/03 18:24:45 certik Exp $
@


1.16
log
@Sync with Steelix CVS
@
text
@d485 1
a485 1
boot&gt; <strong>boot wd0a:/bsd -c</strong>
d715 1
a715 1
Originally [OpenBSD: faq5.html,v 1.88 ]
d717 1
a717 1
$Translation: faq5.html,v 1.16 2003/11/02 21:49:28 certik Exp $
@


1.15
log
@Sync with Steelix CVS
@
text
@d717 1
a717 1
$Translation: faq5.html,v 1.15 2003/11/01 00:24:46 certik Exp $
@


1.14
log
@Sync with Steelix CVS
@
text
@d69 1
a69 1
       ,------o-----------o----X          	    3.0 Stable
d71 1
a71 1
       |      .    ,------o---------o----X	    3.1 Stable
d73 6
a78 6
       |      .    |      .    ,----o----------o--&gt; 3.2 Stable
       |      .    |      .    |    .	       .
       |      .    |      .    ,    o    ,-----o--&gt; 3.3 Stable
       |      .    |      .    |    .    |     . 
       |      .    |      .    |    .    |     . 
 --&gt;3.0Rel-----&gt;3.1Rel-----&gt;3.2Rel-----&gt;3.3Rel----&gt; Current 
d99 3
a101 3
Rovnì¾ si mù¾ete vý¹e v¹imnout, ¾e vìtev <i>3.0-stable</i> byla
ukonèena po vydání <i>3.2-release</i>, a <i>3.1-stable</i> vìtev
<i>3.1-stable</i> byla ukonèena po vydání <i>3.3-release</i> -- star¹í
d107 1
a107 1
té samé verze (napø. pøechod z <i>3.3-release</i> k <i>3.3-stable</i>).
d198 2
a199 2
<i>3.3-current</i> èi snapshot a poté se rozhodnout, ¾e je to pøíli¹
nebezpeèné a vrátíte se zpìt k <i>3.3-stable</i>. 
d436 1
a436 1
Umístìní jádra na své místo.
d564 1
a564 1
OpenBSD 3.3 (GENERIC) #44: Sat Mar 29 13:22:05 MST 2003
d639 1
a639 1
OpenBSD 3.3 (GENERIC) #44: Sat Mar 29 13:22:05 MST 2003
d715 1
a715 1
Originally [OpenBSD: faq5.html,v 1.87 ]
d717 1
a717 1
$Translation: faq5.html,v 1.14 2003/10/29 08:13:12 certik Exp $
@


1.13
log
@
sync with badlands translation CVS
@
text
@d4 1
a4 2
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-2">
<title>5.0 - Buildování systému ze zdrojových souborù</title>
d10 2
a11 2
<meta name= "copyright"     content= "This document copyright 1998-2002 by OpenBSD.">
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
d19 7
a25 2
<h2><font color="#e00000">5.0 - Buildování systému ze zdrojových
souborù</font></h2>
d30 6
a35 6
<blockquote>
<li><a href= "#Flavors">5.1 - Pøíchutì OpenBSD</a></li>
<li><a href= "#Why">5.2 - Proè potøebuji vlastní jádro?</a></li>
<li><a href= "#Options">5.3 - Volby pøi konfiguraci jádra</a></li>
<li><a href= "#Building">5.4 - Tvorba vlastního jádra</a></li>
<li><a href= "#BootConfig">5.5 - Konfigurace pøi startu</a></li>
d37 2
a38 2
  bìhem bootování</a></li>
<li><a href= "#config">5.6 - Pou¾ití pøíkazu config(8) pro zmìnu
d40 8
a47 1
</blockquote>
d54 1
d56 1
a56 1
Existují døi "pøíchutì" OpenBSD:
d59 1
a59 1
<li><b>-stable:</b>  Release, plus patche pova¾ované za kritické
d61 1
a61 1
<li><b>-current:</b> Momentální verse OpenBSD, z které se stane
d69 1
a69 1
       ,------o-----------o----X          2.9 Stable
d71 1
a71 1
       |      .    ,------o---------o---> 3.0 Stable
d73 6
a78 4
       |      .    |      .    ,----o---> 3.1 Stable
       |      .    |      .    |    .
       |      .    |      .    |    .
 -->2.9Rel----->3.0Rel----->3.1Rel------> Current 
d80 1
a80 1
          Time --->
d85 2
a86 2
Ka¾dých ¹est mìsícù je kód vyvìtven mezi <i>current</i>, <i>release</i> a
<i>stable</i> -- <i>release</i> se stane zmrazený bod
d89 2
a90 2
serverech</a>.  <i>Current</i> je místo, kde probíhá aktivní vývoj
a stane se z nìj dal¹í release OpenBSD.
d97 11
a107 8
Také si v¹imnete, ¾e v pøíkladì uvedeném vý¹e byla vìtev
2.9-stable ukonèena s 3.1-release -- staré release jsou typicky
podporovány do dvou release zpìtnì. Podpora star¹ích verzí zabírá
prostøedky a èas, zatímco bychom mohli poskytovat podporu pro
star¹í releasy, chtìli bychom se zamìøit na nové fíèury. Vìtev
<i>-stable</i> z hlediska svého návrhu velmi snadno buildovatelná
z release té samé verze (napø. pøechod z 3.1-release na
3.1-stable).
d110 2
a111 1
Typicky, co jde do <i>-stable</i> jsou opravy nalezené na 
d117 3
a119 2
stránky</a>. Podpora nových zaøízení nebude do <i>-stable</i>
pøidána. 
d122 4
a125 3
<i>-current</i> je pohybující se cíl.  Mìní se skoro minutu po
minutì, a mù¾e být zmìnìn nìkolikrát za èas za který stáhnete
zdrojové soubory. Jak bylo zmínìno døíve, neexistuje ¾ádný slib,
d147 1
a147 1
Jsou èasy, kdy "normální" u¾ivatelé chtìjí ¾ít na hranì a bì¾í
d149 1
a149 1
podporované v <i>-release</i> (a tím pádem i ve <i>stable</i>),
d155 24
a178 1
<h3>Udr¾ování vìcí syncnutých</h3>
d182 2
a183 1
href="../ports.html"><tt>portù</tt></a> byly v¹echny syncnuté nebo
d186 4
a189 8
<tt>portù</tt> na mìsíc starém systému nebo rebuildovat kernel ze
zdrojových souborù -current a oèekávát, ¾e bude pracovat s
userlandem z <i>-release</i>. 

are all in sync, or unpleasant things will happen.  Said another
way na mìsíc starém systému nebo rebuildovat kernel ze zdrojových
souborù -current a oèekávát, ¾e bude pracovat s userlandem z
<i>-release</i>. A ano, to znamená, ¾e pokud byl nový program
d191 1
a191 1
nutný update. Sorry, ale znovu, OpenBSD má omezené prostøedky.
d194 7
a200 6
Dále je nutné porozumìt tomu, ¾e upgradováním zdrojových souborù
je proces podporován <b>pouze v jednom smìru: ze starého na
nový</b>, a z <i>-stable</i> na <i>-current</i>. Nemù¾ete se
pøesunout z post 3.1 na 3.1-stable, a oèekávat podporu nebo
asistenci vývojového týmu. Pokud si vyberete jinou cestu ne¾
podporovanou - reload systému od zaèátku, jste v tom sami.
d208 1
a208 2
<a name= "Why"></a>
<a name= "5.1"></a>
d240 20
a259 2
<a name= "5.2"></a>
<h2>5.3 - Volby pøi konfiguraci jádra</h2>
d268 3
a270 1
tìchto voleb si pøeètìte manuálovou stránku pøíkazu <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&apropos=0&sektion=4&format=html">options(4)</a>. Mù¾ete se rovnì¾ podívat na pøíklady konfiguraèních souborù, které jsou
d274 11
a284 7
Ne v¹echny volby byly testovány na kompatibilitu s jinými.
Nepøidávejte do jádra volbu, pokud nemáte skuteènì dùvod tak
uèinit! Jediná konfigurace jádra,
která byla dostateènì testována, je GENERIC kernel. Jedná se
obvykle o kombinaci voleb v
<tt>/usr/src/sys/arch/`arch -s`/conf/GENERIC</tt>
a <tt>/usr/src/sys/conf/GENERIC</tt>. 
d287 2
a288 1
<blockquote>
d291 1
a291 3
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/mac68k/conf/">Konfiguraèní soubory pro mac68k</a>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/sun3/conf/">Kon
figuraèní soubory pro sun3</a>
d294 4
d303 5
a307 3
typu:<br>
<strong>include "../../../conf/GENERIC"</strong><br>
To znamená, ¾e se v nich odkazuje je¹tì dal¹í konfiguraèní soubor.
d309 1
a309 2
vytváøení va¹eho
vlastního jádra se tedy urèitì podívejte na 
a310 2
<b>jsou</b> zde volby, které jsou <b>nutné</b>.
</p>
d313 9
a321 5
V¹echny z dále uvedených voleb, by mìly být umístìny ve va¹em
konfiguraèním souboru jádra ve formátu:<br>
<strong>option      VOLBA</strong><br>
napøíklad chcete-li mít jádro s podporou ladìní (volba DEBUG), pøidejte øádek: <br>
<strong>option      DEBUG</strong><br>
d325 1
a325 1
v¹ech zdrojových souborech pøipsali #define DEBUG.
d328 10
a337 85
OpenBSD má mnoho voleb týkajících se kompatibility, které vám
umo¾òují spou¹tìt binární soubory z jiných operaèních systémù. Ne
v¹echny jsou dostupné pro ka¾dou architekturu, proto se ujistìte v
manuálové stránce, ¾e daná volba pro danou architekturu je
podporována.

<p>
<blockquote>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_svr4&sektion=8&apropos=0&manpath=OpenBSD+Current">COMPAT_SVR4(8)</a> 
  - Kompatibilita programù ze SVR4<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_bsdos&sektion=8&apropos=0&manpath=OpenBSD+Current">COMPAT_BSDOS(8)</a> - Kompatibilita programù z BSD.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_linux&sektion=8&apropos=0&manpath=OpenBSD+Current">COMPAT_LINUX(8)</a> 
  - Kompatibilita Linuxového kódu.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_sunos&sektion=8&apropos=0&manpath=OpenBSD+Current">COMPAT_SUNOS(8)</a> 
  - Kompatibilita programù z SunOS.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_ultrix&sektion=8&apropos=0&manpath=OpenBSD+Current">COMPAT_ULTRIX(8)</a> 
  - Kompatibilita programù z Ultrixu.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_freebsd&sektion=8&apropos=0&manpath=OpenBSD+Current">COMPAT_FREEBSD(8)</a> 
  - Kompatibilita kódu pro FreeBSD.
<li>COMPAT_HPUX 
  - Kompatibilita programù pro HP-UX. Dostupná pouze pro nìkteré
    m68k architektury.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_ibcs2&sektion=8&apropos=0&manpath=OpenBSD+Current">COMPAT_IBCS2(8)</a> 
  - Kompatibilita pro spou¹tìní kódu z ibcs2
<li>COMPAT_OSF1 
  - Pro spu¹tìní kódu z Digital Unix. Dostupná pouze pro platformu Alpha.
<li>COMPAT_43 
  - Kompatibilita s 4.3BSD. Pou¾ití této volby se nedoporuèuje.
    Je v¹ak nutná pro ná¹ port Netscape Navigator.
<li>COMPAT_11 - Kompatibilita s NetBSD 1.1
<li>COMPAT_NOMID 
  - Kompatibilita pro binárky ve formátu a.out s
    chybìjícím ID systému.
</blockquote>

<p>
V¾dy je vhodné umo¾nit ladìní kódu jádra. Hodnì lidí sice tyto
volby odstraòuje, proto¾e jsou zdrojem velkého mno¾ství dal¹ího
kódu jádra a tedy zvy¹ují jeho velikost. Jsou v¹ak velmi výhodné v
pøípadì, ¾e se objeví nìjaká chyba v kódu jádra. Pomáhají
vývojáøùm objevit zdroj problémù mnohem rychleji. Zde je seznam
nejèastìj¹ích voleb pro ladìní, které mù¾ete pøidat do va¹í
konfigurace.
</p>

<p>
<blockquote>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ddb&sektion=4&format=html">DDB</a> 
  - Tato volba zakompiluje do jádra interní debugger. Není k
    dispozici na v¹ech platformách. Proto si nejdøíve o ní
    pøeètìte v dokumentaci.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gdb&sektion=1&format=html">KGDB</a> 
  - Tato volba zakompiluje do jádra remote kernel debugger.
    Umo¾òuje debugování jádra bì¾ícího na cílovém stroji z jiného
    poèítaèe pomocí gdb, tak¾e se celý proces debugování neli¹í od
    ladìní jakéhokoliv jiného programu. Oba stroje jsou spojeny
    sériovým kabelem pøes COM port, gdb bì¾ící na vzdáleném
    (remote) stroji se spojí po startu s debugovaným kernelem na
    druhém poèítaèi. Na vzdáleném stroji mù¾eme pou¾ít i grafické
    nástavby ke gdb, jako je ddd . Více o nastavení remote kernel
    debuggeru na <a
    href="http://www.netbsd.org/Documentation/kernel/kgdb.html">kgdb.html.</a>,
    opìt je ale nutné pøipomenout, ¾e pro øadu
    architektur (ne-li v souèasnosti pro v¹echny) není k dispozici
    <li>makeoptions  DEBUG="-g" - Vytvoøí spolu s bsd také bsd.gdb .
    Dodá do zkompilovaného jádra úplnou tabulku ladících symbolù.
    Pou¾ívá se pro debugování jádra pomocí gdb. Vzhledem k tomu, ¾e
    velikost jádra s pøíponou .gdb dosahuje øádovì 34.0 MB, je rozumné
    ji pou¾ívat pouze 'offline' s odpovídajícím kernel c0re. 
<li>DEBUG 
  - Pøidává do jádra rùzné ladící volby, tam kde jsou ve zdrojovém kódu
    definovány.
<li>KTRACE 
  - Pøidává do jádra kód pro sledování volání jádra. Dovoluje
    u¾ivatelùm pou¾ívat <a
    href="http://www.openbsd.org/cgi-bin/man.cgi?query=ktrace&sektion=1&format=html">ktrace(1)</a>.
<li>DIAGNOSTIC 
  - Pøidává do jádra kód, který kontroluje interní konzistenci
    datových struktur.
<li>GPROF 
  - Pøidává do jádra kód pro kernel profiling spolu s <a
    href="http://www.openbsd.org/cgi-bin/man.cgi?query=kgmon&sektion=8&format=html">kgmon(8)</a>.
<li>makeoptions PROF="-pg" - volba -pg zpùsobuje, ¾e jádro je
  kompilované s podporou pro profiling.  Pro pou¾ití musíte dodat
  rovnì¾ volbu GPROF.
</blockquote>
d340 7
a346 113
<strong>Filesystem Options.</strong>
<blockquote>
<li>FFS - Berkeley Fast Filesystem <strong>POZN:</strong> Tato
  volba je NUTNÁ
<li>EXT2FS - Second Extended File System, nutné pro ty z vás,
  kteøí budou chtít èíst Linuxové oddíly.
<li>MFS - Memory File System který skladuje soubory ve
i  swapovatelné pamìti.
<li>NFS - Network File System, je potøeba tam, kde budete pou¾ívat
  NFS.
<li>CD9660 - iso9660 + rockridge extensions filesystem. NUTNÁ pro
  ètení z CD.
<li>MSDOSFS - Nutná pro ètení MS-DOS FAT filesystému. Obsahuje i
  podporu pro Windows 95 dlouhá jména souborù + rùzné znaky ve
  jménech souborù.
<li>FDESC - Obsahuje kód pro souborový systém, který mù¾e být
  pøipojen na /dev/fd.
<li>KERNFS - Pøidává kód, který umo¾òuje pøipojení speciálního
  souborového systému (bì¾nì pøipojeném na /kern) se soubory,které
  reprezenují èetné promìnné jádra a jeho parametry (pøíli¹ se
  nepou¾ívá)
<li>NULLFS - Kód pro loopback filesystém. Více viz. <a
  href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_null&sektion=8&format=html">mount_null(8)</a>
<li>PROCFS - Kód pro speciální filesystém (obvykle pøipojený na
  /proc), opìt (narozdíl od FreeBSD), se nepou¾ívá.
<li>PORTAL - Kód pro experimentální portal filesystém. Tento
  souborový systém
  dovoluje zajímavé triky, jako napø. otevøení TCP socketu
  prostøednictvím otevøení souboru ve file systému.
<li>UMAPFS - Obsahuje kód pro loopback filesystém, ve kterém mohou
  být user a group ids pøemapována -- toto mù¾e být u¾iteèné v
  pøípadì pøipojení cizího filesystému s odli¹nými uids a gids ne¾
  lokální filesystém (napø. vzdálený NFS). 
<li>UNION - Pøidává kód pro union filesystém, který umo¾òuje, aby
  adresáøe byly namountovány na sebe tím zpùsobem, aby oba file
  systémy zùstaly viditelné.
  Tento kód není zatím stabilní.
<li>XFS - Pøidává podporu pro pou¾ívání filesystému kompatibilních
  s AFS filesystémem. Bì¾nì pou¾íváno kódem Arla/AFS.
<li>LFS - Log Structured Filesystem.
<li>FFS_SOFTUPDATES - umo¾òuje softupdates. Více o softupdates v
  <a href="faq14.html#SoftUpdates">Softupdates FAQ</a>.
<li>NFSSERVER - Pøidává do jádra kód pro NFS server.
<li>NFSCLIENT - Pøidává do jádra kód pro NFS klienta.
<li>FIFO - Podpora pro FIFO (pojmenovaná roura). Ta by NEmìla chybìt.
<li>NVNODE=integer - kde integer je velikost cache pou¾ívané
  pøekladovou rutinou name-to-inode, (napø. namei() cache a jiné
  podobnì pojmenované)..
<li>EXT2FS_SYSTEM_FLAG - tato volba mìní chování flagù APPEND a
  IMMUTABLE pro soubor na EXT2FS filesystému. Více viz <a
  href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&sektion=4&format=html">options(4)</a>.
<li>QUOTA - Podpora pro kvóty ve filesystému. Pou¾ívání kvót více
  viz <a href="faq10.html#Quotas">FAQ 10, Quota</a>
</blockquote>


<strong>Rùzné volby</strong>
<blockquote>
<li>PCIVERBOSE - podrobnìj¹í výpis pøi bootování pro zaøízení PCI.
<li>EISAVERBOSE - podrobnìj¹í výpis pøi bootování pro zaøízení EISA.
<li>PCMCIAVERBOSE - podrobnìj¹í výpis pøi bootování pro zaøízení PCMCIA.
<li>APERTURE - dodává interní podporu jádra pro VGA framebuffer mapování u¾ivatelským procesem. Nutné pro spu¹tìní X.
<li>XSERVER - Podpora pro X server console driver. Nutné pro X.
<li>LKM - podpora pro Loadable Kernel Modules. Není na v¹ech architekturách. Více viz.  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lkm&sektion=4&format=html">lkm(4)</a>, pøíli¹ se nepou¾ívá .
<li>INSECURE - Pevnì stanoví hodnotu kernel security levelu na -1. Více viz.  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=init&sektion=8&format=html">init(8)</a> pro informace o kernel security levelech..
<li>RAM_DISK_HOOKS - Umo¾òuje volat na architektuøe závislé funkce, poté co je nakonfigurován ramdisk (jako napø. nahrání druhé diskety po jejím vlo¾ení).
<li>RAM_DISK_IS_ROOT - Pevnì stanoví ramdisk jako root device .
<li>CCDNBUF=integer - nastaví poèet component bufferù pou¾ívaných CCD(4). Default je 8. Více o CCD viz. <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccd&sektion=4&format=html">CCD(4)</a> man page, nebo <a href="faq11.html#ccd">Sekce FAQ Ladìní výkonu.</a>
<li>KMEMSTATS - Pøimìje funkci malloc(9), kernel memory allocator, aby uchovávala statistiku o svém pou¾ívání. Je-li nastaveno DEBUG, tato volba je automaticky zapnutá config-em.. 
<li>BOOT_CONFIG - Pøidává podporu pro volbu -c na boot promptu , související s runtime konfigurací jádra (UKC) pøi startu systému.
</blockquote>

<strong>Sí»ové volby</strong><br>
Rovnì¾ si pøeètìte <a href="faq6.html">Sí»ové FAQ</a> nebo <a
href="faq11.html#Network">Networking Performance Tuning FAQ</a>.
<blockquote>
<li>GATEWAY - umo¾òuje IPFORWARDING a (pro vìt¹inu portù) zvy¹uje velikost NMB
clusterù. .
<li>NMBCLUSTERS=integer - øídí velikost mbuf cluster map. 
<li>IPFORWARDING - umo¾òuje IP routování. S touto volbou bude stroj forwardovat
IP datagramy mezi svými sí»ovými rozhraními, pokud budou adresovány jiným strojùm.
<li>MROUTING - Zahrnuje podporu pro IP multicast routery.
<li>INET - Zahrnuje podporu pro TCP/IP protokol stack. Tato volba je NUTNÁ
<li>MCLSHIFT=value - tato volba je logaritmem pøi základu 2 velikosti mbuf clusterù. Lépe viz. <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&sektion=4&format=html">options(4)</a> .
<li>NS - Pøidává podporu pro Xerox XNS protokol stack. Viz. <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ns&sektion=4&apropos=0&manpath=OpenBSD+Current">ns(4)</a>
<li>ISO,TPIP - Pøidává podporu pro v¹udypøítomný OSI protokol stack. Viz. <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iso&sektion=4&format=html">iso(4)</a> .
<li>EON - Podpora pro OSI tunneling pomocí IP. 
<li>CCITT,LLC,HDLC - Podpora pro X.25 protokol stack. 
<li>IPX, IPXIP - Pøidává podporu pro Internetwork Packet Exchange protokol 
, který pou¾ívá bì¾nì Novell NetWare. 
<li>NETATALK - Kernel podpora pro rodinu protokolù AppleTalk.
<li>TCP_COMPAT_42 - Pou¾ití této volby dùraznì nedoporuèujeme, tedy by mìla být
vypnutá. Jedná se o TCP bug compatibility s 4.2BSD. Ve 4.2BSD, TCP sequence numbers byla 32-bitová èísla se znaménkem. Moderní implementace TCP pou¾ívají unsigned hodnoty, tedy datové typy bez znaménka. 
<li>TCP_NEWRENO - Zapíná NewReno fast recovery phase, která umo¾òuje, aby 
one lost segment to be recovered per round trip time ;).
<li>TCP_SACK -  Turns on selective acknowledgements.
<li>TCP_FACK - Turns on forward acknowledgements allowing a more precise estimate of outstanding data during the fast recovery phase by using SACK information. This option can be used together with TCP_SACK.
(pozn.> a¾ budete mít nìkdo rozumný pøeklad tìchto bodù, dejte vìdìt. @@milosh)
<li>PPP_FILTER - Tato volba zapíná filtrování ppp spojení na základì <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pcap&sektion=3&format=html">pcap(3)</a> .
<li>PPP_BSDCOMP - PPP BSD komprese.
<li>PPP_DEFLATE - pou¾ívá se ve spojení s  PPP_BSDCOMP.
<li>IPSEC - Tato volba pøidává podporu pro IP security protokol. Viz. <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&sektion=4&format=html">ipsec(4)</a> pro více informací o IPsecu. Tato volba pøedpokládá volbu KEY, která pøidává podporu pro PFKEYv2.
<li>ENCDEBUG - Tato volba umo¾òuje logování ladících informací v pøípadì
, ¾e IPSEC se setká s chybami. 
</blockquote>

<strong>Volby subsystému SCSI </strong>
<blockquote>
<li>SCSITERSE - Struènìj¹í chybová hlá¹ení SCSI. Vynechání dekódovací ASC/ASCQ info tabulky, u¹etøí asi 8 bytù. 
<li>SCSIDEBUG - Vypí¹e speciální ladící informace pro SCSI subsystém na konzoli.
</blockquote>
</p>

d349 1
a349 2
<a name= "Building"></a>
<a name= "5.3"></a>
d358 3
a360 3
Pro kompilaci jádra, které bylo na cdrom potøebujete nejprve mít k ruce
zdrojový kód. Zdrojový kód jádra se nachází právì na 
<a href="../orders.html">officiálím CD</a> (disk 3) a na 
d371 6
d459 1
a459 2
o jeho pou¾ívání
</p>
a462 1
<a name="5.4"></a>
d477 2
a478 2
Vìt¹ina této dokumentace se nachází v manuálov0 stránce
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot_config&amp;sektion=8">boot_config(8)</a>
d480 3
a482 2
Pro start s u¾ivatelskou konfigurací jádra, ( User Kernel Config
aka UKC) , pou¾ijte pøi bootování volbu -c.
a514 1
<a name="5.5"></a>
a537 1
<a name="5.6"></a>
d564 2
a565 2
OpenBSD 3.1 (GENERIC) #2: Sat Apr 20 21:44:54 EDT 2002
    root@@build:/usr/src/sys/arch/i386/compile/GENERIC
d614 8
a621 8
 65 ep0 disabled
 66 ep* disabled
 67 ep* disabled
149 ep0 disabled
150 ep0 disabled
151 ep* disabled
152 ep* disabled
202 ep* disabled
d639 2
a640 2
OpenBSD 3.1 (GENERIC) #2: Sat Apr 20 21:44:54 EDT 2002
    root@@build:/usr/src/sys/arch/i386/compile/GENERIC
d648 53
d704 3
a706 3
<a href= "index.html">[Zpátky na hlavní stránku]</a>
<a href= "faq4.html">[Do sekce 4.0 - Prùvodce instalací]</a>
<a href= "faq6.html">[Do sekce 6.0 - Nastavení sítì]</a>
d715 1
a715 1
Originally [OpenBSD: faq5.html,v 1.69 ]
d717 1
a717 1
$Translation: faq5.html,v 1.13 2002/09/23 15:42:55 certik Exp $
@


1.12
log
@
sync with badlands translation CVS
@
text
@d773 1
a773 1
$Translation: faq5.html,v 1.12 2002/09/09 07:53:47 certik Exp $
@


1.11
log
@
sync with badlands translation CVS
@
text
@d80 1
a80 1
<i>-release</i>, a jak kad¾ý mù¾e vidìt, je to "vìtev" z hlavní
d93 1
a93 1
Typicy, co jde do <i>-stable</i> jsou opravy nalezené na 
d107 1
a107 1
doufáme ¾e ano). Je úplnì mo¾né a ne tak vyjímeèné, ¾e si stáhnete
d258 1
a258 1
OpenBSD má mnoho voleb týkajících se kompatiblity, které vám
d773 1
a773 1
$Translation: faq5.html,v 1.11 2002/08/20 17:43:23 certik Exp $
d775 1
a775 1
$OpenBSD$
@


1.10
log
@
broken links
@
text
@d1 1
d5 1
a5 1
<title>5.0 - Nastavení jádra</title>
d12 1
d16 1
d20 3
a22 2
<h2><font color=#e00000>5.0 - Nastavení jádra</font><hr></h2>
</p>
d25 12
a36 9
<ul><h3>Obsah</h3>
<li><a href= "#Why">5.1 - Proè potøebuji u¾ivatelské jádro?</a></li>
<li><a href= "#Options">5.2 - Volby pøi konfiguraci jádra</a></li>
<li><a href= "#Building">5.3 - Tvorba vlastního jádra</a></li>
<li><a href= "#BootConfig">5.4 - Konfigurace pøi startu</a></li>
<li><a href= "#VerboseBoot">5.5 - Jak získat podrobnìj¹í výpis bìhem bootování</a></li>
<li><a href= "#config">5.6 - Pou¾ití pøíkazu config(8) pro zmìnu zkompilovaného jádra</a>
</ul>
</p>
d40 126
d169 1
a169 2
<h2>5.1 - Proè bych mìl vytvoøit své vlastní jádro?</h2>
</p>
d175 1
a175 1
<ul>
d183 2
a184 2
</ul>
</p>
d186 11
a196 6
Ve vìt¹inì pøípadù NEbudete potøebovat kompilovat vlastní jádro. GENERIC jádro bude obvykle tím, které potøebujete. Vlastnì je tu i nìkolik dùvodù, ze kterých byste nemìli chtít kompilovat va¹e vlastní jádro. Hlavní dùvod je ten, ¾e je
snadné udìlat nìjaké zmìny v nastavení jádra, které se zdají být logické, ale
nefungují. To je nebezpeèí, které vá¹ zásah provází. Jestli¾e nìco v novém
jádøe nefunguje tak jak by mìlo, vyzkou¹ejte prosím nejprve GENERIC jádro, 
døíve ne¾ ode¹lete zprávu o chybì (bug report).
</p>
d201 1
a201 2
<h2>5.2 - Volby pøi konfiguraci jádra</h2>
</p>
a211 1
</p>
d213 8
a220 4
<P>
Ne v¹echny volby byly testovány na kompatibilitu s jinými. Nepøidávejte do jádra volbu, pokud nemáte skuteènì dùvod tak uèinit! Jediná konfigurace jádra,
která byla dostateènì testována, je GENERIC kernel. Jedná se obvykle o kombinaci voleb v /usr/src/sys/arch/&lt;va¹e_architektura&gt;/conf/GENERIC a  /usr/src/sys/conf/GENERIC.
</P>
d223 4
a226 4
<ul>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/alpha/conf/">Konfiguraèní soubory pro architekturu Alpha</a></li>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/i386/conf/">Konfiguraèní soubory pro i386</a></li>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/mac68k/conf/">Konfiguraèní soubory pro mac68k</a></li>
d228 1
a228 1
figuraèní soubory pro sun3</a></li>
d230 3
a232 4
figuraèní soubory pro architekturu sparc</a></li>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/">Ostatní architektury</a></li>
</ul>
</p>
d235 2
a236 1
Pøi bli¾¹ím ohledání tìchto souborù zjistíte, ¾e obsahují øádku typu:<br>
d238 6
a243 3
To znamená, ¾e se v nich odkazuje je¹tì dal¹í konfiguraèní soubor. V tomto souboru se nacházejí na architektuøe nezávislé volby. Pøi vytváøení va¹eho
vlastního jádra se tedy urèitì podívejte na <a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/conf/GENERIC">/sys/conf/GENERIC</a>. JSOU zde volby, které
jsou NUTNÉ.
d247 2
a248 1
V¹echny z dále uvedených voleb, by mìly být umístìny ve va¹em konfiguraèním souboru jádra ve formátu:<br>
d252 91
a342 4
Volby v OpenBSD jádøe jsou pøekládány na volby preprocesoru pøi kompilaci,
proto volba jako DEBUG zpùsobí kompilaci zdrojového kódu s volbou -DDEBUG. Co¾
je ekvivalentní tomu, ¾e bychom ve v¹ech zdrojových souborech pøipsali #define DEBUG.
</p>
d345 54
a398 40
OpenBSD má mnoho voleb týkajících se kompatiblity, které vám umo¾òují spou¹tìt  
binární soubory z jiných operaèních systémù. Ne v¹echny jsou dostupné pro ka¾dou architekturu, proto se ujistìte v manuálové stránce, ¾e daná volba pro danou architekturu je podporována.
</p>
<p>
<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_svr4&sektion=8&apropos=0&manpath=OpenBSD+Current">COMPAT_SVR4(8)</a> - Kompatibilita programù ze SVR4<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_bsdos&sektion=8&apropos=0&manpath=OpenBSD+Current">COMPAT_BSDOS(8)</a> - Kompatibilita programù z BSD.</li>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_linux&sektion=8&apropos=0&manpath=OpenBSD+Current">COMPAT_LINUX(8)</a> - Kompatibilita Linuxového kódu.</li>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_sunos&sektion=8&apropos=0&manpath=OpenBSD+Current">COMPAT_SUNOS(8)</a> - Kompatibilita programù z SunOS.</li>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_ultrix&sektion=8&apropos=0&manpath=OpenBSD+Current">COMPAT_ULTRIX(8)</a> - Kompatibilita programù z Ultrixu.</li>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_freebsd&sektion=8&apropos=0&manpath=OpenBSD+Current">COMPAT_FREEBSD(8)</a> - Kompatibilita kódu pro FreeBSD.</li>
<li>COMPAT_HPUX - Kompatibilita programù pro HP-UX. Dostupná pouze pro nìkteré m68k architektury.</li>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_ibcs2&sektion=8&apropos=0&manpath=OpenBSD+Current">COMPAT_IBCS2(8)</a> - Kompatibilita pro spou¹tìní kódu z ibcs2</li>
<li>COMPAT_OSF1 - Pro spu¹tìní kódu z Digital Unix. Dostupná pouze pro platformu Alpha.</li>
<li>COMPAT_43 - Kompatibilita s 4.3BSD. Pou¾ití této volby se nedoporuèuje. Je
v¹ak nutná pro ná¹ port Netscape Navigator.</li>
<li>COMPAT_11 - Kompatibilita s NetBSD 1.1</li>
<li>COMPAT_NOMID - Kompatibilita pro binárky ve formátu a.out s chybìjícím ID systému.
</ul>
</p>

<p>
V¾dy je vhodné umo¾nit ladìní kódu jádra. Hodnì lidí sice tyto volby odstraòuje, proto¾e jsou zdrojem velkého mno¾ství dal¹ího kódu jádra a tedy zvy¹ují jeho velikost. Jsou v¹ak velmi výhodné v pøípadì, ¾e se objeví nìjaká chyba v kódu jádra. Pomáhají vývojáøùm objevit zdroj problémù mnohem rychleji. Zde je seznam
nejèastìj¹ích voleb pro ladìní, které mù¾ete pøidat do va¹í konfigurace.
</p>

<p>
<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ddb&sektion=4&format=html">DDB</a> - Tato volba zakompiluje do jádra interní debugger. Není k dispozici na v¹ech platformách. Proto si nejdøíve o ní pøeètìte v dokumentaci.</li>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gdb&sektion=1&format=html">KGDB</a> - Tato volba zakompiluje do jádra remote kernel debugger. Umo¾òuje debugování jádra bì¾ícího na cílovém stroji z jiného poèítaèe pomocí gdb, tak¾e se celý proces debugování neli¹í od ladìní jakéhokoliv jiného programu. Oba stroje jsou spojeny sériovým kabelem pøes COM port, gdb bì¾ící na vzdáleném (remote) stroji se spojí po startu s debugovaným kernelem na druhém poèítaèi. Na vzdáleném stroji mù¾eme pou¾ít i grafické nástavby ke gdb, jako je ddd . Více o nastavení remote kernel debuggeru na <a href="http://www.netbsd.org/Documentation/kernel/kgdb.html">kgdb.html.</a>, opìt je ale nutné pøipomenout, ¾e pro øadu
architektur (ne-li v souèasnosti pro v¹echny) není k dispozici</li>
<li>makeoptions  DEBUG="-g" - Vytvoøí spolu s bsd také bsd.gdb . Dodá do zkompilovaného jádra úplnou tabulku ladících symbolù. Pou¾ívá se pro debugování jádra pomocí gdb. Vzhledem k tomu, ¾e velikost jádra s pøíponou .gdb dosahuje øádovì 34.0 MB, je rozumné ji pou¾ívat pouze 'offline' s odpovídajícím kernel c0re. </li>
<li>DEBUG - Pøidává do jádra rùzné ladící volby, tam kde jsou ve zdrojovém kódu
definovány.</li>
<li>KTRACE - Pøidává do jádra kód pro sledování volání jádra. Dovoluje
u¾ivatelùm pou¾ívat <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ktrace&sektion=1&format=html">ktrace(1)</a>.</li>
<li>DIAGNOSTIC - Pøidává do jádra kód, který kontroluje interní konzistenci datových struktur.</li>
<li>GPROF - Pøidává do jádra kód pro kernel profiling spolu s <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kgmon&sektion=8&format=html">kgmon(8)</a>.</li>
<li>makeoptions PROF="-pg" - volba -pg zpùsobuje, ¾e jádro je kompilované s podporou pro profiling.  Pro pou¾ití musíte dodat rovnì¾ volbu GPROF.</li>
</ul>
</p>
a399 32
<p>
<strong>Filesystem Options.</strong>
<ul>
<li>FFS - Berkeley Fast Filesystem <strong>POZN:</strong> Tato volba je NUTNÁ</li>
<li>EXT2FS - Second Extended File System, nutné pro ty z vás, kteøí budou chtít
èíst Linuxové oddíly.</li>
<li>MFS - Memory File System který skladuje soubory ve swapovatelné pamìti.</li>
<li>NFS - Network File System, je potøeba tam, kde budete pou¾ívat NFS.</li>
<li>CD9660 - iso9660 + rockridge extensions filesystem. NUTNÁ pro ètení z CD</li>
<li>MSDOSFS - Nutná pro ètení MS-DOS FAT filesystému. Obsahuje i podporu pro Windows 95 dlouhá jména souborù + rùzné znaky ve jménech souborù.</li>
<li>FDESC - Obsahuje kód pro souborový systém, který mù¾e být pøipojen na /dev/fd</li>
<li>KERNFS - Pøidává kód, který umo¾òuje pøipojení speciálního souborového systému (bì¾nì pøipojeném na /kern) se soubory,které reprezenují èetné promìnné jádra a jeho parametry (pøíli¹ se nepou¾ívá)</li>
<li>NULLFS - Kód pro loopback filesystém. Více viz. <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_null&sektion=8&format=html">mount_null(8)</a></li>
<li>PROCFS - Kód pro speciální filesystém (obvykle pøipojený na /proc), opìt (narozdíl od FreeBSD), se nepou¾ívá</li>
<li>PORTAL - Kód pro experimentální portal filesystém. Tento souborový systém
dovoluje zajímavé triky, jako napø. otevøení TCP socketu prostøednictvím otevøení souboru ve file systému.</li>
<li>UMAPFS - Obsahuje kód pro loopback filesystém, ve kterém mohou být user a
group ids pøemapována -- toto mù¾e být u¾iteèné v pøípadì pøipojení cizího filesystému s odli¹nými uids a gids ne¾ lokální filesystém (napø. vzdálený NFS). </li>
<li>UNION - Pøidává kód pro union filesystém, který umo¾òuje, aby adresáøe byly
namountovány na sebe tím zpùsobem, aby oba file systémy zùstaly viditelné.
Tento kód není zatím stabilní.</li>
<li>XFS - Pøidává podporu pro pou¾ívání filesystému kompatibilních s AFS filesystémem. Bì¾nì pou¾íváno kódem Arla/AFS.  </li>
<li>LFS - Log Structured Filesystem.</li>
<li>FFS_SOFTUPDATES - umo¾òuje softupdates. Více o softupdates v <a href="faq14.html#SoftUpdates">Softupdates FAQ</a>.
<li>NFSSERVER - Pøidává do jádra kód pro NFS server.</li>
<li>NFSCLIENT - Pøidává do jádra kód pro NFS klienta.</li>
<li>FIFO - Podpora pro FIFO (pojmenovaná roura). Ta by NEmìla chybìt.</li>
<li>NVNODE=integer - kde integer je velikost cache pou¾ívané pøekladovou rutinou name-to-inode, (napø. namei() cache a jiné podobnì pojmenované)..</li>
<li>EXT2FS_SYSTEM_FLAG - tato volba mìní chování flagù APPEND a IMMUTABLE pro soubor na EXT2FS filesystému. Více viz <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&sektion=4&format=html">options(4)</a>.</li>
<li>QUOTA - Podpora pro kvóty ve filesystému. Pou¾ívání kvót více viz <a href="faq10.html#Quotas">FAQ 10, Quota</a></li>
</ul>
</p>
a400 1
<p>
d402 14
a415 15
<ul>
<li>PCIVERBOSE - podrobnìj¹í výpis pøi bootování pro zaøízení PCI.</li>
<li>EISAVERBOSE - podrobnìj¹í výpis pøi bootování pro zaøízení EISA.</li>
<li>PCMCIAVERBOSE - podrobnìj¹í výpis pøi bootování pro zaøízení PCMCIA.</li>
<li>APERTURE - dodává interní podporu jádra pro VGA framebuffer mapování u¾ivatelským procesem. Nutné pro spu¹tìní X.</li>
<li>XSERVER - Podpora pro X server console driver. Nutné pro X.</li>
<li>LKM - podpora pro Loadable Kernel Modules. Není na v¹ech architekturách. Více viz.  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lkm&sektion=4&format=html">lkm(4)</a>, pøíli¹ se nepou¾ívá .</li>
<li>INSECURE - Pevnì stanoví hodnotu kernel security levelu na -1. Více viz.  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=init&sektion=8&format=html">init(8)</a> pro informace o kernel security levelech..</li>
<li>RAM_DISK_HOOKS - Umo¾òuje volat na architektuøe závislé funkce, poté co je nakonfigurován ramdisk (jako napø. nahrání druhé diskety po jejím vlo¾ení).</li>
<li>RAM_DISK_IS_ROOT - Pevnì stanoví ramdisk jako root device .</li>
<li>CCDNBUF=integer - nastaví poèet component bufferù pou¾ívaných CCD(4). Default je 8. Více o CCD viz. <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccd&sektion=4&format=html">CCD(4)</a> man page, nebo <a href="faq11.html#ccd">Sekce FAQ Ladìní výkonu.</a></li>
<li>KMEMSTATS - Pøimìje funkci malloc(9), kernel memory allocator, aby uchovávala statistiku o svém pou¾ívání. Je-li nastaveno DEBUG, tato volba je automaticky zapnutá config-em.. </li>
<li>BOOT_CONFIG - Pøidává podporu pro volbu -c na boot promptu , související s runtime konfigurací jádra (UKC) pøi startu systému.</li>
</ul>
</p>
a416 1
<p>
d418 3
a420 2
Rovnì¾ si pøeètìte <a href="faq6.html">Sí»ové FAQ</a> nebo <a href="faq11.html#Network">Networking Performance Tuning FAQ</a>.
<ul>
d422 2
a423 2
clusterù. .</li>
<li>NMBCLUSTERS=integer - øídí velikost mbuf cluster map. </li>
d425 8
a432 8
IP datagramy mezi svými sí»ovými rozhraními, pokud budou adresovány jiným strojùm.</li>
<li>MROUTING - Zahrnuje podporu pro IP multicast routery.</li>
<li>INET - Zahrnuje podporu pro TCP/IP protokol stack. Tato volba je NUTNÁ</li>
<li>MCLSHIFT=value - tato volba je logaritmem pøi základu 2 velikosti mbuf clusterù. Lépe viz. <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&sektion=4&format=html">options(4)</a> .</li>
<li>NS - Pøidává podporu pro Xerox XNS protokol stack. Viz. <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ns&sektion=4&apropos=0&manpath=OpenBSD+Current">ns(4)</a></li>
<li>ISO,TPIP - Pøidává podporu pro v¹udypøítomný OSI protokol stack. Viz. <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iso&sektion=4&format=html">iso(4)</a> .</li>
<li>EON - Podpora pro OSI tunneling pomocí IP. </li>
<li>CCITT,LLC,HDLC - Podpora pro X.25 protokol stack. </li>
d434 2
a435 2
, který pou¾ívá bì¾nì Novell NetWare. </li>
<li>NETATALK - Kernel podpora pro rodinu protokolù AppleTalk.</li>
d437 1
a437 1
vypnutá. Jedná se o TCP bug compatibility s 4.2BSD. Ve 4.2BSD, TCP sequence numbers byla 32-bitová èísla se znaménkem. Moderní implementace TCP pou¾ívají unsigned hodnoty, tedy datové typy bez znaménka. </li>
d439 3
a441 3
one lost segment to be recovered per round trip time ;).</li>
<li>TCP_SACK -  Turns on selective acknowledgements.</li>
<li>TCP_FACK - Turns on forward acknowledgements allowing a more precise estimate of outstanding data during the fast recovery phase by using SACK information. This option can be used together with TCP_SACK.</li>
d443 4
a446 4
<li>PPP_FILTER - Tato volba zapíná filtrování ppp spojení na základì <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pcap&sektion=3&format=html">pcap(3)</a> .</li>
<li>PPP_BSDCOMP - PPP BSD komprese.</li>
<li>PPP_DEFLATE - pou¾ívá se ve spojení s  PPP_BSDCOMP.</li>
<li>IPSEC - Tato volba pøidává podporu pro IP security protokol. Viz. <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&sektion=4&format=html">ipsec(4)</a> pro více informací o IPsecu. Tato volba pøedpokládá volbu KEY, která pøidává podporu pro PFKEYv2.</li>
d448 2
a449 3
, ¾e IPSEC se setká s chybami. </li>
</ul>
</p>
d451 5
a455 6
<p>
<strong>SCSI Subsystem Options</strong>
<ul>
<li>SCSITERSE - Struènìj¹í chybová hlá¹ení SCSI. Vynechání dekódovací ASC/ASCQ info tabulky, u¹etøí asi 8 bytù. </li>
<li>SCSIDEBUG - Vypí¹e speciální ladící informace pro SCSI subsystém na konzoli.</li>
</ul>
d462 1
a462 2
<h2>5.3 -  Tvorba va¹eho vlastního jádra</h2>
</p>
d465 2
a466 1
Úplné instrukce pro vytvoøení vlastního jádra jsou v manuálové stránce <a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=afterboot&apropos=0&sektion=8&format=html">
a467 1
</p>
d472 2
a473 2
<a href="../../cs/orders.html">officiálím CD</a> (disk 3) a na 
<a href="../../ftp.html">FTP serverech</a>.
a474 1
</p>
d476 1
a476 1
<ul>
d481 1
a481 1
</ul>
d484 7
a490 3
Pøi tvorbì vlastního jádra je nejjednodu¹¹í zaèít s GENERIC jádrem. To se nachází v <i>/usr/src/sys/arch/${arch}/conf/GENERIC</i>, kde ${arch} je va¹e architektura. V tomto adresáøi se rovnì¾ nachází dal¹í pøíklady konfigurací. V následujícím vám uká¾eme dva pøíklady pro kompilaci jádra. První kompiluje jádro v adesáøovém
stromu, který je pouze pro ètení. Druhý v zapisovatelném adresáøi. 
</p>
d492 1
a492 1
<ul>
d496 1
a496 1
# <strong>vi SOMEFILE</strong> (udìláte zmìny, které chcete)
d498 7
a504 16
<ul>
# <strong>make depend</strong>
<ul>
(Pøedcházející krok je nutný, pokud jste udìlali nìjaké zmìny [vèetnì updatù a patchù] ve stromu zdrojového kódu jádra. Tento krok mù¾e být vynechán, pokud 
provedete následující krok.)
</ul>
<font size="+1">
<b><i>NEBO</i></b>
</font>
# <strong>make clean</strong>
<ul>
Pøedcházející krok je nutný, pokud udìláte zmìny ve volbách nastavení jádra,
a je doporuèován také pokud provedete vìt¹í updaty ve stromu zdrojového kódu.
Mù¾ete v¹ak tento krok vynechat a provést jen 'make depend'.)
</ul>
</ul>
d507 14
a520 1
</ul>
d523 2
a524 2
Pro kompilaci jádra uvnitø zapisovatelného adresáøového stromu, vykonejte následující:
</p>
d526 2
a527 2
<ul>
<pre>
d530 2
a531 1
# <strong>config SOMEFILE</strong> (o tomhle si pøeètìte více zde: <a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=config&apropos=0&sektion=8&format=html">config(8)</a>)
d534 2
a535 2
</pre>
</ul>
a539 1
</p>
a542 1
</p>
d544 1
a544 1
<ul>
d549 1
a549 1
</ul>
a550 1
<p>
a551 1
</p>
d553 1
a553 1
<ul>
d555 1
a555 1
boot> <strong>bsd.old</strong>
d557 1
a557 1
</ul>
a558 1
<p>
a559 1
</p>
d562 4
a565 3
Nìkdy budete potøebovat spolu s novým jádrem instalovat i nový boot blok. Více
viz. <a href="faq14.html#InstBoot">
faq14.8 o OpenBSD Bootloaderu</a>. Zde naleznete základní pøehled o jeho pou¾ívání
d571 1
a571 2
<h2>5.4 - Konfigurace pøi startu </h2>
</p>
d574 9
a582 8
Nìkdy pøi startu systému se stane, ¾e va¹e jádro nalezne zaøízení, ale mo¾ná
se ¹patným IRQ. A mo¾ná právì toto zaøízení budete muset ihned pou¾ít. Ani¾
byste museli vytváøet nové jádro, mù¾ete zkusit konfiguraci  OpenBSD jádra
v okam¾iku bootování. Tato konfigurace opraví vá¹ problém pouze v jednom startu
systému. Po rebootování budete muset tuto proceduru opakovat. Tento postup je
tudí¾ my¹len jen jako doèasná záplata, a problém byste mìli opravit opravou
a rekompilací jádra. Va¹e jádro musí být zkompilované s volbou <strong>option BOOT_CONFIG</strong>, co¾ pro GENERIC jádra platí. 
</p>
d585 2
a586 2
Vìt¹ina této dokumentace se nachází v manuálových stránkách <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot_config&apropos=0&sektion=8&format=html">boot_config(8)</a>
</p>
d588 2
a589 1
Pro start s u¾ivatelskou konfigurací jádra, ( User Kernel Config aka UKC) , pou¾ijte pøi bootování volbu -c.
d591 2
a592 2
<ul><pre>
boot> <strong>boot wd0a:/bsd -c</strong>
a594 1
<p>
a597 1
</p>
d601 11
a611 1
</p>
a612 1
<CODE>
d614 4
a617 29
add <strong>device</strong> - pøidání zaøízení pomocí okopírování jiného
</p>

<p>
change <strong>devno | device </strong> - zmìna jednoho nebo více zaøízení
</p>

<p>
disable <strong>devno | device </strong> - vypnutí jednoho nebo více zaøízení
</p>

<p>
enable <strong>devno | device </strong> - zapnutí jednoho nebo více zaøízení
</p>

<p>
find <strong>devno | device </strong> - nalezení jednoho nebo více zaøízení
</p>

<p>
help - krátký pøehled tìchto pøíkazù
</p>

<p>
list - seznam V©ECH zaøízení
</p>

<p>
exit/quit - pokraèuj v bootování
a620 10
show <strong>[attr [val]]</strong> - vypí¹e zaøízení s danou vlastností attr
a volitelnì s danou hodnotou val
</p></CODE>

<p>
Jakmile jste jednou nakonfigurovali va¹e  zaøízení, pou¾ijte quit nebo exit
a continue pro pokraèování bootování. Poté byste mìli opravit nastavení jádra
a zkompilovat nové jádro. Dal¹í info viz. <a href="faq5.html#Building"> Tvorba va¹eho vlastního jádra.
</p>

d623 1
a623 1
<h2>5.5 - Jak získat podrobnìj¹í výpis bìhem bootování</h2>
d627 5
a631 3
Podrobnìj¹í výpis pøi bootování mù¾e být velmi u¾iteèný, pokud se sna¾íte ladit
problémy. Pokud napøíklad systém nedetekuje floppy disk a potøebujete více informací, prostì rebootujete. Poté co obdr¾íte &quot;boot>&quot; prompt, bootujte s -c. Dostanete 
UKC>, pak vykonejte:
d635 2
a636 2
<ul><pre>
UKC> <strong>verbose</strong>
d638 1
a638 1
UKC> <strong>quit</strong>
d642 1
a642 2
Následovat budou docela podrobné startovací hlá¹ky.
</p>
d647 1
a647 2
<h2>5.6 - Pou¾ití pøíkazu config(8) pro zmìnu zkompilovaného jádra</h2>
</p>
d650 9
a658 3
Spoleènì s OpenBSD 2.6 se objevily volby <b>-e</b> a <b>-u</b> pøíkazu <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&sektion=8&format=html">config(8)</a>.
Tyto volby jsou velmi u¾iteèné a ¹etøí èas strávený kompilací jádra. Volba <b>-e</b> umo¾òuje, abyste vstoupili do UKC neboli User Kernel Configu v bì¾ícím systému. Zmìny, které provedete, se pak objeví pøi dal¹ím bootu. Volba <b>-u</b> testuje , zda byly provedeny pøi bootování v jádøe nìjaké zmìny. Za pøedpokladu,
¾e jste pou¾ili <b>boot -c</b> pro vstup do UKC pøi bootování systému.
d662 8
a669 7
Následující pøíklad nám ukazuje vyøazení ep* zaøízení z jádra. Pro ¹etrnost 
va¹eho poèínání musíte pou¾ít volbu <b>-o</b>, která zapisuje provedené zmìny
do souboru, který uvedete. Napø. <strong>config -e -o bsd.new /bsd</strong> zapí¹e zmìny do bsd.new . Pøíklad nepou¾ívá volbu <b>-o</b> , proto zmìny jsou
ignorovány a nejsou zapsány zpìt do binárky jádra. Pro více informací o tom,
jak obdr¾et chybové a varovné hlá¹ky, ètìte manuálovou stránku <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&sektion=8&format=html">config(8)</a>
.
</p>
d671 1
a671 1
<ul><pre>
d673 2
a674 2
OpenBSD 2.6 (GENERIC) #1: Tue Nov 16 21:25:10 EST 1999
    ericj@@oshibana:/usr/src/sys/arch/i386/compile/GENERIC
d677 1
a677 1
ukc> <strong>?</strong>
d679 6
a684 6
        add     dev                     Add a device
        base    8|10|16                 Base on large numbers
        change  devno|dev               Change device
        disable attr val|devno|dev      Disable device
        enable  attr val|devno|dev      Enable device
        find    devno|dev               Find device
d686 2
a687 2
        lines   count                   # of lines per page
        show    [attr [val]]            Show attribute
d690 42
a731 31
ukc> <strong>list</strong>
  0 audio* at sb0|sb*|gus0|pas0|sp0|ess*|wss0|wss*|ym*|eap*|eso*|sv*
  1 midi* at sb0|sb*|opl*|opl*|opl*|ym*|mpu*
  2 nsphy* at xe*|ef*|sf*|xl*|tl*|rl*|fxp* phy -1
  3 inphy* at xe*|ef*|sf*|xl*|tl*|rl*|fxp* phy -1
  4 iophy* at xe*|ef*|sf*|xl*|tl*|rl*|fxp* phy -1
  5 exphy* at xe*|ef*|sf*|xl*|tl*|rl*|fxp* phy -1
  6 rlphy* at xe*|ef*|sf*|xl*|tl*|rl*|fxp* phy -1
  7 icsphy* at xe*|ef*|sf*|xl*|tl*|rl*|fxp* phy -1
  8 sqphy* at xe*|ef*|sf*|xl*|tl*|rl*|fxp* phy -1
  9 ukphy* at xe*|ef*|sf*|xl*|tl*|rl*|fxp* phy -1
 10 scsibus* at bt0|bt1|bt2|aha0|aha1|aha*|ahb*|ahc0|ahc*|ahc*|isp*|aic0|aic*|ncr*|adv*|adw*|sea0|uha0|uha1|uha*|wds0|atapiscsi*
 11 cd* at scsibus* target -1 lun -1
 12 ch* at scsibus* target -1 lun -1
 13 sd* at scsibus* target -1 lun -1
 14 st* at scsibus* target -1 lun -1
 15 ss* at scsibus* target -1 lun -1
 16 uk* at scsibus* target -1 lun -1
 17 atapiscsi* at wdc0|wdc1|wdc*|wdc*|pciide* channel -1
--- more ---
[snip]
ukc> <strong>disable ep</strong>
 31 ep0 disabled
 32 ep* disabled
 33 ep* disabled
 87 ep0 disabled
 88 ep0 disabled
 89 ep* disabled
 90 ep* disabled
136 ep* disabled
ukc> <strong>quit</strong>
d733 1
a733 1
</pre></ul>
d736 9
a744 3
V pøedcházejícím pøíkladì byla v¹echna zaøízení ep* odstranìna z jádra a nebudou zkou¹ena pøi startu. V nìkterých situacích, kdy pou¾ijete pøi bootu UKC, pomocí <b>boot -c</b>, budete chtít zmìny ulo¾it trvale. Provést to mù¾ete pomocí volby <b>-u</b> . V následujícím pøíkladì, poèítaè nabootoval do UKC a zaøízení wi(4) bylo odstranìno. Proto¾e zmìny pøi boot -c  NEJSOU trvalé, musí být zapsány.
Tento pøíklad zapisuje zmìny provedené z boot -c do nového jádra ulo¾eného v bsd.new .
</p>
d746 1
a746 1
<ul><pre>
d748 2
a749 2
OpenBSD 2.6 (GENERIC) #1: Tue Nov 16 21:25:10 EST 1999
    ericj@@oshibana:/usr/src/sys/arch/i386/compile/GENERIC
d751 2
a752 1
151 wi* disabled
d754 2
a755 2
ukc> <strong>quit</strong>
</pre></ul>
a763 1
</p>
d767 1
a767 1
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt= "[zpìt]"></a>
d771 1
a771 1
Originally [OpenBSD: faq5.html,v 1.58 ]
d773 1
a773 1
$Translation: faq5.html,v 1.10 2002/06/29 08:13:54 jufi Exp $
@


1.9
log
@
sync with badlands translation CVS
work by {milos,vasek,vlada}@@openbsd.cz
@
text
@d265 2
a266 2
<a href="../orders.html">officiálím CD</a> (disk 3) a na 
<a href="../ftp.html">FTP serverech</a>.
d566 1
a566 1
$Translation: faq5.html,v 1.9 2002/05/23 23:30:15 certik Exp $
@


1.8
log
@
sync with badlands translation CVS
updates by Vasek
@
text
@d263 5
a267 1
Pro kompilaci jádra, které bylo na cdrom potøebujete nejprve mít k ruce zdrojový kód. Zdrojový kód jádra se nachází právì na CD. Zde je pøíklad jak zkopírovat zdrojový kód z cd. Tento pøíklad pøedpokládá, ¾e CD1 je pøipojeno na /mnt.
d272 2
a273 3
# <strong>mkdir -p /usr/src/sys</strong>
# <strong>cd /mnt/sys</strong>
# <strong>tar cf - . | ( cd /usr/src/sys; tar xvf - )</strong>
d564 1
a564 1
Originally [OpenBSD: faq5.html,v 1.57 ]
d566 1
a566 1
$Translation: faq5.html,v 1.8 2002/04/03 20:24:30 certik Exp $
@


1.7
log
@
sync with badlands translation CVS.
@
text
@d561 1
a561 1
Originally [OpenBSD: faq5.html,v 1.56 ]
d563 1
a563 1
$Translation: faq5.html,v 1.7 2002/03/01 21:21:53 certik Exp $
@


1.6
log
@
sync with badlands translation CVS
@
text
@d179 1
a179 1
<li>FFS_SOFTUPDATES - umo¾òuje softupdates. Více o softupdates v <a href="faq14.html#14.5">Softupdates FAQ</a>.
d184 2
a185 2
<li>EXT2FS_SYSTEM_FLAG - tato volba mìní chování flagù APPEND a IMMUTABLE pro soubor na EXT2FS filesystému. Více viz.  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&sektion=4&format=html">options(4)</a>.</li>
<li>QUOTA - Podpora pro kvóty ve filesystému. Pou¾ívání kvót více viz. <a href="faq10.html#10.10">FAQ 10</a></li>
d201 1
a201 1
<li>CCDNBUF=integer - nastaví poèet component bufferù pou¾ívaných CCD(4). Default je 8. Více o CCD viz. <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccd&sektion=4&format=html">CCD(4)</a> man page, nebo <a href="faq11.html#11.2">Sekce FAQ Ladìní výkonu.</a></li>
d209 1
a209 1
Rovnì¾ si pøeètìte <a href="faq6.html">Sí»ové FAQ</a> nebo <a href="faq11.html#11.1">Networking Performance Tuning FAQ</a>.
d219 1
a219 1
<li>NS - Pøidává podporu pro Xerox XNS protokol stack. Viz. <A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=ns&sektion=4&apropos=0&manpath=OpenBSD+Current">ns(4)</a></li>
a232 4
<li>IPFILTER - pøidává do jádra kód pro IP filtrování na úrovni paketù, za u¾ití balíku ipfilter. .</li>
<li>IPFILTER_LOG - tato volba spoleènì s IPFILTER, umo¾òuje logování IP paketù
u¾itím ipfiltru. .</li>
<li>IPFILTER_DEFAULT_BLOCK - Nastavuje implicitní politiku ipfiltru. Je-li nastavena, pak ipfiltr bude implicitnì blokovat pakety.</li>
d351 1
a351 1
viz. <a href="faq14.html#14.8">
d432 1
a432 1
a zkompilovat nové jádro. Dal¹í info viz. <a href="faq5.html#5.3"> Tvorba va¹eho vlastního jádra.
d561 1
a561 1
Originally [OpenBSD: faq5.html,v 1.54 ]
d563 1
a563 1
$Translation: faq5.html,v 1.6 2002/02/11 10:04:29 certik Exp $
@


1.5
log
@sync with badlands translation CVS.
@
text
@d10 1
a10 1
<meta name= "copyright"     content= "This document copyright 1998-2001 by OpenBSD.">
d22 6
a27 6
<li><a href= "faq5.html#5.1">5.1 - Proè potøebuji u¾ivatelské jádro?</a></li>
<li><a href= "faq5.html#5.2">5.2 - Volby pøi konfiguraci jádra</a></li>
<li><a href= "faq5.html#5.3">5.3 - Tvorba vlastního jádra</a></li>
<li><a href= "faq5.html#5.4">5.4 - Konfigurace pøi startu</a></li>
<li><a href= "faq5.html#5.5">5.5 - Jak získat podrobnìj¹í výpis bìhem bootování</a></li>
<li><a href= "faq5.html#5.6">5.6 - Pou¾ití pøíkazu config(8) pro zmìnu zkompilovaného jádra</a>
d34 1
d62 1
d255 3
a257 1
<p> <a name= "5.3"></a>
d360 1
d439 1
d442 1
a442 1

d461 2
d465 1
d565 1
a565 1
Originally [OpenBSD: faq5.html,v 1.51 ]
d567 1
a567 1
$Translation: faq5.html,v 1.5 2001/10/15 20:19:29 certik Exp $
@


1.4
log
@
sync with badlands translation CVS.
@
text
@d197 1
a197 2
<li>MACHINE_NONCONTIG - Zmìní èást VM/pmap rozhraní, umo¾ní nesouvislou pamì».</li>
<li>RAM_DISK_HOOKS - Umo¾òuje volat strojovì závislé funkce, poté co je nakonfigurován ramdisk (jako napø. nahrání druhé diskety po jejím vlo¾ení).</li>
d556 1
a556 1
Originally [OpenBSD: faq5.html,v 1.50 ]
d558 1
a558 1
$Translation: faq5.html,v 1.4 2001/08/29 12:57:59 certik Exp $
@


1.3
log
@
sync with badlands translation CVS.
@
text
@d10 1
a10 1
<meta name= "copyright"     content= "This document copyright 1998-2000 by OpenBSD.">
d557 1
a557 1
Originally [OpenBSD: faq5.html,v 1.48 ]
d559 1
a559 1
$Translation: faq5.html,v 1.3 2001/07/12 19:59:38 certik Exp $
@


1.2
log
@
Sync with badlands translation CVS.
@
text
@d559 1
a559 1
$Translation: faq5.html,v 1.2 2001/05/31 10:47:38 certik Exp $
@


1.1
log
@
Initial commit of czech translation.
Work by Milos Urbanek.
@
text
@a241 19
<li>TCP_SIGNATURE - TCP MD5 Signatures, pro BGP routing sessions</li>
</ul>
</p>

<p>
<strong>PCVT Options</strong> (<i>pouze platné pro architekturu i386</i>)
<ul>
<li>PCVT_NSCREENS=integer - poèet obrazovek pcvt . Default 8. </li>
<li>PCVT_VT220KEYB - pokud aktivována, rozlo¾ení klávesnice odpovídá terminálu
DEC VT200 (TM) + generuje se odpovídající výstup.</li>
<li>PCVT_SCREENSAVER - pøidává vestavìný screensaver. Defaultnì zapnutá.</li>
<li>PCVT_PRETTYSCRNS - pokud je zapnutá, je pou¾it screensaver s blikajícími
hvìzdami. Default off. </li>
<li>PCVT_CTRL_ALT_DEL - pokud zapnutá, trojkombinace kláves &lt;Ctrl&gt; &lt;Alt&gt; &lt;Del&gt; generuje CPU reset, a tedy reboot. Implicitnì vypnutá.</li>
<li>PCVT_USEKBDSEC - Zapíná  bezpeènostní zámek pro klávesnici. Implicitnì zapnutá. </li>
<li>PCVT_24LINESDEF - pokud je zapnutá, dostaneme pro VT emulaci 25 øádek, pro
HP emulaci 28 øádek. Default je 24 øádek, pro lep¹í kompatibilitu s pùvodním terminálem DEV VT220 (TM).</li>
<li>PCVT_EMU_MOUSE - emulace tøítlaèítkové my¹i prostøednictvím keypadu. U¾iteèné pro notebooky pøi stup¹tìní XFree86. Implicitnì vypnutá. </li>
<li>PCVT_META_ESC - pokud je zapnuta, stisknutí sekvence &lt;Alt&gt a klávesa generuje  &lt;esc&gt;, následované normálním kódem klávesy. Pokud je vypnuta, obdr¾íme normální kód klávesy spolu s pøidanou hodnotou 0x80. Implicitnì vypnutá. </li>
d557 1
a557 1
Originally [OpenBSD: faq5.html,v 1.47 ]
d559 1
a559 1
$Translation: faq5.html,v 1.1 2001/05/04 17:11:00 certik Exp $
@

